# StackOverflow 问答 15644000-15644999

# caching - Ehcache - whether objects are eternal or not

> ID：15644000
> 
> 赞同：5
> 
> 时间：2013-03-26T17:47:58.117
> 
> 标签：caching, ehcache, terracotta

In my ehcache configuration I see these:

```
eternal="false"
timeToIdleSeconds="0"
timeToLiveSeconds="0" 
```

What does that mean effectively?

Documentation mentions that timeToLiveSeconds="0" means these checks will not be made. So this means objects will be eternal, even if "eternal" is set to false?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T17:57:47.327

如果你看一下`CacheConfiguration.java:826`（我的 Ehcache 版本是 2.6.5），你会看到以下内容：

```
if (eternal) {
    setTimeToIdleSeconds(0);
    setTimeToLiveSeconds(0);
} 
```

所以本质上是一样的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-13T16:07:15.977

当设置为 true 时，属性“永恒”会覆盖 TimeToIdle 和 TimeToLive 参数。当设置为 false 时，它​​对配置没有影响。因此，在上述情况下，将考虑 setTimeToIdleSeconds(0) 和 setTimeToLiveSeconds(0) 参数，并且缓存元素将保留一生（因为 0 表示无限）。

# batch-file - PSFTP Recursive Delete

> ID：15644003
> 
> 赞同：1
> 
> 时间：2013-03-26T17:48:00.173
> 
> 标签：batch-file, ftp, sftp

I'm trying to set up an automated SFTP backup from my local machine to a remote NAS.

I've got a batch script that calls PSFTP. I'm looking to mirror a local directory to a remote directory. PSFTP doesn't have a mirror command, but it can do a recursive PUT. So I thought I'd try to do delete the directory on the SFTP server and then do the recursive PUT, which would accomplish the same thing. PSFTP doesn't support a recursive DEL, though, nor can you do RMDIR on a non-empty directory.

So, in a Windows batch environment, how can I delete the remote directory before I upload it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:19:56.713

如果您更喜欢使用脚本而不是 GUI 进行自动备份，则可以使用[WinSCP](https://winscp.net/)（它同时具有命令行脚本和 GUI）。

WinSCP 支持[递归上传](https://winscp.net/eng/docs/scriptcommand_put)和[递归 rm](https://winscp.net/eng/docs/scriptcommand_rm)。

另请参阅[使用 WinSCP 自动化 SFTP 的一般指南](https://winscp.net/eng/docs/guide_automation)。

*（我是WinSCP的作者）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:34:56.207

您可以使用 plink 在服务器上执行任何命令，包括 rm -r

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:10:01.263

我不确定删除所有内容然后重新打开是否真的是个好主意，在较大的目录上这将需要时间和精力。我也不知道psftp，但是如果你能使用windows命令rmdir，你也可以使用xcopy吗？如果是这样，也许 xxcopy 可能是一个更好的解决方案，非常强大且免费供私人使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T19:19:26.407

我找到了一个免费的基于 GUI 的 SFTP 解决方案：

[http://www.duplicati.com/](http://www.duplicati.com/)

花了一点时间才开始，但要让它做 SFTP，你实际上需要告诉它 SSH。此外，它似乎想在远程服务器上创建一个文件夹。因此，让 Duplicati 创建文件夹而不是选择现有文件夹，它将接受该条目。我将它设置为进行完整备份，并且只保留一个备份，从而完成我打算做的事情。

# c - Build a c program that reads an array

> ID：15644009
> 
> 赞同：0
> 
> 时间：2013-03-26T17:48:19.437
> 
> 标签：c, algorithm

i have this "test" let's say.. i need to solve this problem, it's not homework but i need it in order to pass a test.

I could need a little help, because i don't understand what i need to do. I need the algorithm here! So it goes: The table below represents a labyrinth. "1" means you cannot pass through that value, "0" means you can pass through that value. "T" is the treasure to achieve and "H" is the entrance. The coordinates are : H(3.1) , T(2.8).

-I need a program that reads a matrix A[1..M,1..N] which itself represents a labyrinth with elements [0,1] and also reads the H,T value.

It should print a way to the treasure , if there is one, else it should say "No way to the treasure"he Matrix is:

```
 1 1 1 1 1 1 1 1 1 1
    1 1 0 0 0 1 0 T 0 1
    H 0 0 1 1 1 0 1 1 1
    1 1 0 0 0 0 0 0 0 1
    1 1 1 1 1 1 1 1 1 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:53:08.763

使用[Wall Follower](http://en.wikipedia.org/wiki/Maze_solving_algorithm#Wall_follower)方法。您需要有一个变量来存储您正在查看的方向（左、右、上、下）。然后你继续朝那个方向前进，直到撞到墙。当你在墙上时，你一直向左转，直到你可以继续走路。这样做直到你达到目标。

或者在伪代码中：

```
var walkingDirection = up;
while (not at target)
    if (next field in walkingDirection is not a wall)
        go to next field in walkingDirection
    else
        turn right
    end if
end while 
```

然而，这将在不是简单连接的迷宫中失败（阅读该链接）。

另一种稍微困难的方法可能是[A* 算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)。

# git - 仅从 Github 存储库中分叉特定分支

> ID：15644015
> 
> 赞同：10
> 
> 时间：2013-03-26T17:48:57.980
> 
> 标签：git, github, fork

假设有一个正式的 repo 被维护，叫做`O`分支`B1`，`B2`& `B3`。

一位用户将其分叉到他的 Github 帐户上，为自己创建了另一个分支`B4`并公开可用。

我也分叉了同一个官方仓库，但我也想在`B4`不影响我的原始副本的情况下分叉该用户的分支。

我不能再分叉整个官方回购，因为我已经为自己做了几个自定义分支。

那么，我怎样才能将一个特定的分支分叉到我的 Github 存储库中呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T17:54:53.497

您可以将他的分支拉入您的本地 git 存储库，然后将其推送到您的 GitHub 托管存储库。

首先，将遥控器添加到这个其他用户的 GitHub 页面

```
git remote add other-user http://github.com/otheruser/repo 
```

然后在您的存储库中对该分支进行本地结帐。

```
git checkout -b B4 other-user/B4 
```

最后，将该分支推送到托管在 GitHub 上的存储库。

```
git push origin B4:B4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T17:55:33.537

将该用户的存储库添加为您工作目录的“远程存储库”：

```
git remote add someuser git://github.com/someuser/somerepo.git 
```

完成此操作后，您需要从该用户的存储库中获取更改。稍后，您可以随时执行此操作，而不会影响本地存储库中的任何其他内容。

```
git fetch someuser 
```

并将该用户分支`B4`到您自己的`B5`：

```
git checkout -b B5 someuser/B4 
```

也就是说，创建一个`-b`名为 的新分支 ( ) `B5`，并`someuser/B4`以此为起点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-28T23:33:58.207

尽管@keelerm 提供的答案是正确的，但由于该答案中遵循的命名约定，它可能会导致一些混淆。

假设您要克隆其分支的用户具有 github 用户名`Naruto`。因此，基本上 put已经从您想要在系统上的官方存储库`Naruto`创建了一个分支。`B4``O`

1.  首先，检查您是否`Naruto`已经使用 `git remote -v`. 如果您看到类似 和 的内容`https://github.com/Naruto/O (fetch)`，`https://github.com/Naruto/O (push)`则您已经添加了遥控器。跳到第 3 步。

2.  在这一步中，我们将添加远程`Naruto`的分支，`O`以便我们可以从中获取所有信息。选择您将用来指代遥控器的任何方便的名称。出于说明目的，我将使用`Kyuubi`. 使用这个命令：`git remote add Kyuubi https://github.com/Naruto/O`

3.  现在，您需要从`Naruto`的存储库中获取更改。使用这个命令：`git fetch Kyuubi`

4.  在这一步中，我们将创建我们自己的名为`myB4`from`Naruto`的分支`B4`。使用这个命令：`git checkout -b myB4 Naruto/B4`

5.  如果您也需要此`myB4`分支立即反映在您的 Github 中，使用相同的名称，请使用以下命令：`git push origin myB4:myB4`

这就对了。现在你有一个`myB4`从`Naruto`'s fork 存储库命名的分支`O`，并且你的分支包含与's`myB4`相同的信息。`Naruto``B4`

# ruby-on-rails-3 - 每次发生heroku部署时运行一些代码

> ID：15644018
> 
> 赞同：0
> 
> 时间：2013-03-26T17:49:11.080
> 
> 标签：ruby-on-rails-3, heroku

我想放一些每次我在heroku上发布我的应用程序时都会运行的代码，我应该把它放在哪里？我需要访问我的模型才能运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:28:18.527

如果您不介意每次启动 dyno（缩放、重启、环境更改或推送）时运行它，请使用 .profile 文件（[https://devcenter.heroku.com/articles/dynos#startup](https://devcenter.heroku.com/articles/dynos#startup)）。如果您想让它仅在您进行部署时运行，请使用 http 部署挂钩[https://addons.heroku.com/deployhooks](https://addons.heroku.com/deployhooks)来命中另一个执行您想要的工作的应用程序。

# jquery-mobile - 自动完成只工作一次？

> ID：15644021
> 
> 赞同：0
> 
> 时间：2013-03-26T17:49:24.453
> 
> 标签：jquery-mobile

我尝试了许多不同的自动完成脚本 - 每次都出现相同的错误......使用链接或其他东西从页面 a 到页面 b 并且自动完成不再工作......

我有这样的来源

页 A ....

```
<script src="css/jqm.autoComplete-1.5.1-min.js"></script>

<div data-role="page" id="PAGE A" data-theme="a"   >    
<div data-role="header"  data-id="header" data-position="fixed">
<input type="text" id="searchbox" placeholder="Suchbegriffe..." data-filter-theme="a">
</div>

<div data-role="content" >
<ul  id="autocomplete_displ" data-role="listview"  data-inset="true" style="margin-top: -20px;margin-  bottom: 10px;" data-filter-theme="a"></ul>
</div>

</div>      

<script>
    $("#PAGE A").on("pageshow", function(e) {

        $("#searchbox").autocomplete({
            target: $('#autocomplete_displ'),
            source: '../json.asp',
            link: 'list_titles.asp?searchstring=',
            minLength: 1
        });
    }); 
```

页 B ....

```
<script src="css/jqm.autoComplete-1.5.1-min.js"></script>

<div data-role="page" id="PAGE B" data-theme="a"   >    
<div data-role="header"  data-id="header" data-position="fixed">
<input type="text" id="searchbox" placeholder="Suchbegriffe..." data-filter-theme="a">
</div>

<div data-role="content" >
<ul  id="autocomplete_displ" data-role="listview"  data-inset="true" style="margin-top: -20px;margin- bottom: 10px;" data-filter-theme="a"></ul>
</div>

</div>      

<script>
    $("PAGE B").on("pageshow", function(e) {

        $("#searchbox").autocomplete({
            target: $('#autocomplete_displ'),
            source: '../json.asp',
            link: 'list_titles.asp?searchstring=',
            minLength: 1
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:15:15.200

解决了在标题中移动 js 的问题 - 当自动完成的输入字段在标题中时...

# php - 通过拆分php从字符串创建表

> ID：15644023
> 
> 赞同：-3
> 
> 时间：2013-03-26T17:49:29.907
> 
> 标签：php, html

我在 php 中有一个这样的字符串，`pid1+2+price1+20+qty1+2+pid2+3+price2+20+qty2+1+`它是某个函数的结果处理。现在我需要创建应该将上述结果显示为的表

```
      pid 价格 数量
       2 20 2
       3 40 1

```

注意：结果应该显示为字符串谢谢

我用来创建字符串的函数是

```
$a=var_export($_REQUEST);
$b ='';
foreach($_REQUEST as $key=>$value)
{
    $b.=$key."+".$value."+";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:05:17.637

```
$array = array();
foreach ($_REQUEST as $key => $value) {
  preg_match('/^([a-z]+)(\d+)$/', $key, $match);
  $array[$match[2]][$match[$1] = $value;
}
echo "<table><tr><th>pid</th><th>price</th><th>qty</th></tr>";
foreach ($array as $row) {
  echo "<tr><td>$row[pid]</td><td>$row[price]</td><td>$row[qty]</td></tr>";
}
echo "</table>"; 
```

# active-directory - 从 Active Directory 获取 EmailAddress NULL (AccountManagement UserPrincipal)

> ID：15644025
> 
> 赞同：1
> 
> 时间：2013-03-26T17:49:44.940
> 
> 标签：active-directory, null, account-management, email-address, userprincipal

我有一个问题，找不到解决方案：

我有下面的代码来检索正在访问 Web 应用程序的电子邮件 ( `EmailAddress`) 用户。

```
var pc = new System.DirectoryServices.AccountManagement.PrincipalContext(System.DirectoryServices.AccountManagement.ContextType.Domain);

var user = System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(pc, System.DirectoryServices.AccountManagement.IdentityType.SamAccountName, username.ToLower());

email = user.EmailAddress; 
```

对于某些用户（目前为止三个），电子邮件 ( `EmailAddress`) 带有一个空值。

我也尝试了下面的代码，同样的情况发生了：

```
string connection = "LDAP://name.org";

DirectoryEntry entry = new DirectoryEntry(connection);

DirectorySearcher dssearch = new DirectorySearcher(entry);

dssearch.Filter = "(sAMAccountName=UserLogin)";

SearchResult sresult = dssearch.FindOne();

DirectoryEntry dsresult = sresult.GetDirectoryEntry();

if (dsresult.Properties.Count > 0)
{
    if (dsresult.Properties["mail"].Count > 0)
        Response.Write("email: " + dsresult.Properties["mail"][0].ToString());
}
else
    Response.Write("<p>não encontrou</p>"); 
```

我怀疑这与 Exchange Server 有关，但我不能说缺乏知识。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:04:54.113

该系统托管在使用森林和域树的架构上。

实现的代码访问它正在运行的上下文的 AD。

在这种情况下，负责应用程序上下文的 AD 未更新。有问题的用户不是填写此广告的电子邮件地址。

当它使用一些工具咨询主要广告时，信息是正确的，这引起了混乱。

经过一番调查发现混乱。

而已。问题解决了！

感谢合作！

# wpf - WPF - 自定义可重用按钮不显示文本

> ID：15644026
> 
> 赞同：1
> 
> 时间：2013-03-26T17:49:52.807
> 
> 标签：wpf, xaml, styles

这是我目前用来为可重复使用的简单后退按钮设置动画的代码，问题是我还需要另一个具有相同属性的按钮，但可以根据将要显示的屏幕指定文本用过的。

为了显示效果和文本，我必须添加什么？（我所有添加文本的尝试只是使按钮完全消失。）

```
<UserControl x:Class="SantaBarbara.Resources.BackButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             >
    <Button Width="116" Height="119" Canvas.Top="57" BorderThickness="0" BorderBrush="Transparent">
        <Button.Style>            
            <Style TargetType="{x:Type Button}">
                <Style.Resources>
                    <SolidColorBrush x:Key="BackgroundBrush" Color="#990050" Opacity="0.50" />                    
                </Style.Resources>
                <Setter Property="OverridesDefaultStyle" Value="True"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">

                            <ControlTemplate.Resources>
                                <Storyboard x:Key="MouseOverAnimation">
                                    <DoubleAnimation Duration="0:0:0.5" To="0.9" Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Opacity)" Storyboard.TargetName="Border" />
                                </Storyboard>
                                <Storyboard x:Key="MouseOutAnimation">
                                    <DoubleAnimation Duration="0:0:0.5" To="0.5" Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Opacity)" Storyboard.TargetName="Border" />
                                </Storyboard>
                            </ControlTemplate.Resources>

                            <Grid>
                                <Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" >
                                    <ContentPresenter x:Name="ContentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}"  Content="{TemplateBinding Content}" HorizontalAlignment="Center" Margin="{TemplateBinding Padding}"/>
                                </Border>
                            </Grid>

                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Trigger.EnterActions>
                                        <BeginStoryboard Storyboard="{StaticResource MouseOverAnimation}" />
                                    </Trigger.EnterActions>
                                    <Trigger.ExitActions>
                                        <BeginStoryboard Storyboard="{StaticResource MouseOutAnimation}" />
                                    </Trigger.ExitActions>
                                </Trigger>
                            </ControlTemplate.Triggers>

                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Button.Style>        
    </Button>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:51:29.367

你需要一点补充。在. `Button`_ `Background`_`Style`

你有你`Brush`的资源，需要在默认样式设置器中设置它。

就像是：

```
<Style TargetType="{x:Type Button}">
  <Style.Resources>
    <SolidColorBrush x:Key="BackgroundBrush"
                     Opacity="0.50"
                     Color="#990050" />
  </Style.Resources>
  <Setter Property="OverridesDefaultStyle"
          Value="True" />
  <Setter Property="Background"
          Value="{StaticResource BackgroundBrush}" />
  ... 
```

然后，您可以提取`Style`，指定 a`x:Key`并将其应用于您想要的按钮。刚试了一下，动画效果很好

# phpmyadmin - 使用 Chef 安装 PHPMyAdmin

> ID：15644029
> 
> 赞同：0
> 
> 时间：2013-03-26T17:49:58.707
> 
> 标签：phpmyadmin, chef-infra

我正在尝试在厨师客户端上设置 PHPMyAdmin，但是它在构建时不断出错，并且无法找出原因。

这是我的节点运行列表...

```
"recipe[networking_basic]",
"recipe[apache2]",
"recipe[chef-php]",
"recipe[chef-php::fpm]",
"recipe[php]",
"recipe[mysql]",
"recipe[phpmyadmin]" 
```

这是我得到的错误......

```
FATAL: Saving node information to /srv/chef/file_store/failed-run-data.json
ERROR: Exception handlers complete
FATAL: Stacktrace dumped to /srv/chef/file_store/chef-stacktrace.out
FATAL: NameError: Cannot find a resource for php_fpm on ubuntu version 12.04 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:52:58.973

我得到了食谱作者的回复，建议使用 chef-php 食谱而不是普通的 php 食谱，因为它取代了它。

我使用了 chef-php 食谱，但将其重命名为“php”，然后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:09:35.510

您应该至少从 /srv/chef/file_store/chef-stacktrace.out 发布堆栈跟踪，但很可能您正在尝试在其中没有 include_recipe "chef-php" 的食谱中使用提供程序 php_fpm。

相应的代码可能如下所示：

```
php_fpm 'phpmyadmin' do
  action :add
  user 'phpmyadmin'
  group 'phpmyadmin'
  socket true
  socket_path '/tmp/phpmyadmin.sock'
  socket_perms "0666"
  start_servers 2
  min_spare_servers 2
  max_spare_servers 8
  max_children 8
  terminate_timeout (node['php']['ini_settings']['max_execution_time'].to_i + 20)
  value_overrides({ 
    :error_log => "#{node['php']['fpm_log_dir']}/phpmyadmin.log"
  })
end 
```

但它错过了线

```
include_recipe "chef-php" 
```

就在这个代码块之前

并且不要忘记在 metadata.rb 中声明对 chef-php 食谱的依赖关系，如：

```
depends "chef-php" 
```

最后，我建议不要使用官方食谱中的叉子——当你试图维护它时，你会失去更多

# android - 自动加载自定义键盘，无需在 Android 中触摸 EditText

> ID：15644030
> 
> 赞同：0
> 
> 时间：2013-03-26T17:50:03.950
> 
> 标签：android

我在“xml”文件夹下的keyboard.xml 文件中定义了CustomKeyBoard，并在activity_layout.xml 中添加了这个keyboard.xml。我希望我的 CustomkKeyboard 在我的活动开始时自动加载，但是当我触摸 EditText 时它正在加载。我的代码是

```
private CustomKeyboardView mKeyboardView;
private View mTargetView;
private Keyboard mKeyboard;
mKeyboard = new Keyboard(this, R.xml.keyboard);
    mTargetView = (EditText) findViewById(R.id.ed_2d_res);
    mTargetView.setFocusable(true);
    mTargetView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            showKeyboardWithAnimation();
            return true;
        }
    });

    mKeyboardView = (CustomKeyboardView) findViewById(R.id.keyboard_view);
    mKeyboardView.setKeyboard(mKeyboard);
    mKeyboardView.setOnKeyboardActionListener(new BasicOnKeyboardActionListener(this));
}

private void showKeyboardWithAnimation() {
    if (mKeyboardView.getVisibility() == View.GONE) {
        Animation animation = AnimationUtils.loadAnimation(Add2d.this, R.anim.slide_in_bottom);
        mKeyboardView.showWithAnimation(animation);
    }
} 
```

有什么方法可以在不触摸edittext的情况下加载自定义键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:02:04.493

您可以在活动的 onCreate() 方法中调用 showKeyboardWithAnimation() 您还应该调用 edittext.requestfocus()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:19:51.917

动画从具有焦点的视图开始。覆盖`onWindowFocusChanged(boolean hasFocus)。

# c - 用于文件传输的选择性重复协议

> ID：15644033
> 
> 赞同：0
> 
> 时间：2013-03-26T17:50:15.087
> 
> 标签：c, protocols

您能否帮我提供一种用于选择性重复协议文件传输良好文档的算法？是否有任何协议编程书籍，就像 Beej 网络套接字编程指南一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:59:39.430

您可以尝试 TCP RFC，我相信[这](http://www.ietf.org/rfc/rfc2018.txt)就是您想要的。

您还可以选择一本关于网络的教科书： [计算机网络：一种自上而下的方法](https://rads.stackoverflow.com/amzn/click/com/0132856204)是一个相当不错的方法（我已经学习了一些网络课程，这是迄今为止最好的一门）。

此外，谷歌是你的朋友！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T01:35:16.647

而且我认为这个交互式演示对于理解**选择性重复**和返回 N的行为非常有帮助

[选择性重复/返回 N | CCS-LABS](http://www.ccs-labs.org/teaching/rn/animations/gbn_sr/)

# linux - 在 Linux 上测量和跟踪内存消耗

> ID：15644034
> 
> 赞同：2
> 
> 时间：2013-03-26T17:50:15.290
> 
> 标签：linux, matlab, memory, memory-management

在最近的一个项目中，我必须测量不同算法的内存需求以进行比较。但是，我无法控制内存分配本身（算法是用 matlab 编写的），但似乎只有在需要时才分配内存，并在系统不再需要时提前释放内存。因此，测量内存需求的想法如下：

1.  获取正在运行的matlab进程的PID
2.  在算法开始之前读取`/proc/<PID>/status`并解析并记录条目`VmSize`
3.  在每个算法的内部循环中执行与 2) 相同的操作，并将 's 之间的差异记录 `VmSize`为算法的内存消耗

现在我的问题是：这是对内存消耗的可靠估计吗？还是我应该使用不同的字段（有很多`Vm*`字段可供选择，但我发现`VmSize`与我预期的最接近）？请注意，我不需要“精确到字节”的测量，而只需要一些“粗略”的估计。

# javascript - 在多个按钮上使用 jquery .clone 函数

> ID：15644039
> 
> 赞同：1
> 
> 时间：2013-03-26T17:50:39.803
> 
> 标签：javascript, jquery

我不是最熟悉 jQuery，这是我第一次使用“克隆”功能。

基本上我想要完成的是有一个包含多个“部分”的表单，每个部分都有一个输入字段。我希望用户能够根据需要在每个部分中添加任意数量的输入字段。这些部分中的每一个都是根据用户在流程早期导入的值动态创建的（仅使用一个简单的 php 循环）。

我有它以便构建表单，但我的问题是用户能够添加/删除每个部分的输入字段。我设置了它，以便 php 循环为每个部分创建一个输入字段和“添加”/“删除”按钮。这些项目的 id 是根据部分 # 动态创建的。单击该按钮时，它会调用一个 javascript 函数，该函数会克隆现有的输入字段，然后更新新字段的 id 以使其唯一。您可以在此 JSfiddle 中看到我目前拥有的示例：http: [//jsfiddle.net/NWGUp/2/](http://jsfiddle.net/NWGUp/2/)（请注意，由于 jsfiddle 不允许使用 php，因此我刚刚将 html 包含在 3 个部分的 id 中以及与 php 循环将创建的所有内容完全相同）。您会看到添加按钮不起作用。

如果我只是删除第 2 节和第 3 节，并保留第 1 节的 html 和所有 javascript，那么一切都应该正常工作：http: [//jsfiddle.net/NWGUp/1/](http://jsfiddle.net/NWGUp/1/)

所以很明显，问题都是由于有多个“部分”，但我不知道为什么，因为一切都被设置为通过其编号标识符唯一地对待每个部分。

知道我哪里出错了吗？我知道这可能有点令人困惑，所以如果需要任何澄清，请告诉我！

谢谢你的帮助！

这是我正在使用的javascript：

```
$(document).ready(function () {

        $(".addClass").click(function () {
            //get ch#
            var ch = $(this).attr('param1');

            var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
            var newNum = new Number(num + 1); // the numeric ID of the new input field being added

            //create var which stores the div name
            var divName = 'input' + ch + '_' + num;
            //alert(divName);
            // create the new element via clone(), and manipulate it's ID using newNum value
            var newElem = $('#' + divName).clone().attr('id', 'input' + ch + '_' + newNum);

            // manipulate the name/id values of the input inside the new element
            newElem.children(':first').attr('id', 'name' + ch + '_' + newNum).attr('name', 'name' + ch + '_' + newNum);

            // insert the new element after the last "duplicatable" input field
            $('#' + divName).after(newElem);

            // enable the "remove" button
            var btnName = 'btnDel' + ch;
            //alert(btnName);
            // $('#'+btnName).attr('disabled','');

        });

        $(".delClass").click(function () {
            //get ch#
            var ch = $(this).attr('param1');

            var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
            $('#input' + ch + '_' + num).remove(); // remove the last element

            // if only one element remains, disable the "remove" button
            /*if (num-1 == 1)
                  $('#btnDel'+ch).attr('disabled','disabled');*/

        });

    }); 
```

和带有所有 3 个部分的 html：

```
<form id="myForm">

    <h2>SECTION 1</h2>

    <div id="input1_1" class="clonedInput" style="margin-bottom:4px;">file path:
        <input id="name1_1" type="text" name="name1_1">
    </div>
    <div>
        <input id="btnAdd1" class="addClass" type="button" param1="1" value="Add Another">
        <input id="btnDel1" class="delClass" type="button" param1="1" value="Remove Last">
    </div>
    <br />
    <br />
            <h2>SECTION 2</h2>
    <div id="input2_1" class="clonedInput" style="margin-bottom:4px;">file path:
        <input id="name2_1" type="text" name="name2_1">
    </div>
    <div>
        <input id="btnAdd2" class="addClass" type="button" param1="2" value="Add Another">
        <input id="btnDel2" class="delClass" type="button" param1="2" value="Remove Last">
    </div>
    <br />
    <br />
            <h2>SECTION 3</h2>
    <div id="input3_1" class="clonedInput" style="margin-bottom:4px;">file path:
        <input id="name3_1" type="text" name="name3_1">
    </div>
    <div>
        <input id="btnAdd3" class="addClass" type="button" param1="3" value="Add Another">
        <input id="btnDel3" class="delClass" type="button" param1="3" value="Remove Last">
    </div>
</form> 
```

和只有第 1 部分的 html：

```
<form id="myForm">
    <div id="input1_1" class="clonedInput" style="margin-bottom:4px;">file path:
        <input id="name1_1" type="text" name="name1_1">
    </div>
    <div>
        <input id="btnAdd1" class="addClass" type="button" param1="1" value="Add Another">
        <input id="btnDel1" class="delClass" type="button" param1="1" value="Remove Last">
    </div>
    <br />
    <br />

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:31:46.210

通常，您无需设置 id 和名称就可以逃脱，在这种情况下，一切都会变得更加简单。

HTML：

```
<form id="myForm">
    <div class="section">
        <h2>SECTION 1</h2>
        <div class="inputWrapper hidden">file path:
            <input type="text" name="name1[]" />
        </div>
        <div class="controls">
            <input class="addClass" type="button" value="Add Another" />
            <input class="delClass" type="button" value="Remove Last" />
        </div>
    </div>
    <div class="section">
        <h2>SECTION 2</h2>
        <div class="inputWrapper hidden">file path:
            <input id="name2_1" type="text" name="name2[]" />
        </div>
        <div class="controls">
            <input class="addClass" type="button" value="Add Another" />
            <input class="delClass" type="button" value="Remove Last" />
        </div>
    </div>
    <div class="section">
        <h2>SECTION 3</h2>
        <div class="inputWrapper hidden">file path:
            <input type="text" name="name3[]" />
        </div>
        <div class="controls">
            <input class="addClass" type="button" value="Add Another" />
            <input class="delClass" type="button" value="Remove Last" />
        </div>
    </div>
</form> 
```

Javascript：

```
$(function() {
    $(".addClass").on('click', function () {
        var $sect = $(this).closest(".section");
        $sect.find(".inputWrapper").eq(0).clone().show().insertBefore($sect.find(".controls"));
        $sect.find(".delClass").attr('disabled', false);
    }).trigger('click');
    $(".delClass").on('click', function () {
        var $sect = $(this).closest(".section");
        $sect.find(".inputWrapper:last").remove();
        if($sect.find(".inputWrapper:visible").length <= 1) {
            $(this).attr('disabled', true);
        }
    }).attr('disabled', true);
}); 
```

[更新的小提琴](http://jsfiddle.net/NWGUp/4/)

# php - 如何获取下拉菜单的标题而不是值？

> ID：15644041
> 
> 赞同：0
> 
> 时间：2013-03-26T17:50:47.533
> 
> 标签：php

Normaly 我会使用 $_POST['dorp_down_menu_name'] 这给了我下拉菜单的 id。获得该值的标题是否有技巧？

所以如果我有

```
<select name="dorp_down_menu_name">
    <option value="10">Title Goes Here</option>
</select> 
```

我需要返回“Title Goes Here”而不是“10”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:52:33.853

诀窍是使值`<option>`成为您在服务器端想要的值。你没有理由不能这样做：

```
<option value="Title Goes Here">Title Goes Here</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:56:37.527

假设您的意思是客户端，您可以使用 jquery：

```
var selectedText = $('[name="dorp_down_menu_name"]').find(":selected").text(); 
```

另一种选择是使用 data 伪属性：

```
<option value="10" data-title="Title goes here">Title goes here</option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:54:28.760

如果您需要能够同时获得价值和头衔，您有两种方法：

a) 创建隐藏元素，该元素将由 javasript 使用 onSubmit 事件填充并包含标题。

b）您可以在构建时对其进行序列化，例如 value="Title Goes Here:::10" 并稍后按 ::: 拆分，但前提是您确定不能满足 ::: 或任何其他拆分组合在原文中

# matlab - 找到 Cell 结构中值的最大组合？

> ID：15644047
> 
> 赞同：0
> 
> 时间：2013-03-26T17:50:56.453
> 
> 标签：matlab, cell, max, combinations

如果我有以下单元格：

```
a = cell(5,1);
a{1} = [1 3 1 0];
a{2} = [3 1 3 3];
a{3} = [3 2 3 2];
a{4} = [3 3 3 2];
a{5} = [3 2 3 3]; 
```

打字`max(cell2mat(a))`给`ans = 3 3 3 3`

但这没有意义，因为`3 3 3 3`在那个细胞结构中甚至不存在！到底是怎么回事 ？以及如何找到细胞结构的最大组合？

*注意*：我将最大组合称为`3 3 3 2`或- 因为两者在和的 3/4 列中`3 2 3 3`都有值（最大值） 。`3``a{4}``a{5}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:57:22.650

我相信您想要以下内容：

```
[~, maxInd] = max(sum(cell2mat(a), 2));
a{maxInd}

ans =

 3     3     3     2 
```

如果您希望**所有**行的总值与具有最大值的行相同，那么您可以执行以下操作：

```
% Take the sum along the rows of a
summedMat = sum(cell2mat(a), 2); 
% Find the value from the summed rows that is the highest
maxVal = max(summedMat);         
% Find any other rows that also have this total
maxInd = summedMat == maxVal;
% Get them rows!
a{maxInd}

ans =

 3     3     3     2

ans =

 3     2     3     3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:52:50.760

max(A) 给出返回 A 的每一列中的最大值。

因此，如果

```
A = cell2mat(a)
A =

   1   3   1   0
   3   1   3   3
   3   2   3   2
   3   3   3   2 
```

`max(A)`是一个向量，包含 A 的每一列中的最大元素。

# jquery - 如何在 jQuery 1.9 和 jQuery Mobile 应用程序中正确更改复选框单选状态

> ID：15644051
> 
> 赞同：-2
> 
> 时间：2013-03-26T17:51:02.390
> 
> 标签：jquery, jquery-mobile

这不适用于 jQuery 1.9

```
$("#" + IDProduct).attr("checked", "checked").checkboxradio("refresh"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T17:51:02.390

**检查它**

```
$("#" + IDProduct).prop("checked", true).checkboxradio("refresh"); 
```

**取消选中它**

```
 $("#" + IDProduct).prop("checked", false).checkboxradio("refresh"); 
```

**根据 jQuery docs 1.9 版本：**

[attr() 与 .prop()](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T19:22:09.153

**`.checkboxradio("refresh");`**

是一个 jQuery 移动功能，因此如果您尝试在没有 jQuery 移动并且是仅 jQuery 的应用程序上运行它，它将无法工作。

我注意到的另一件事是，在许多情况下，当您使用 .attr("checked",false) 时，您将无法使用`.attr("checked",true)`或`.attr("checked","checked")`之后在同一个复选框组上使用 .. 这只是个人经验

如果您仅使用 jQuery，请使用 RolandoCC 提到的 .prop，但请记住，checkboxradio 不适**用于**jQuery 复选框，**仅**适用于 jQuery 移动特定项目

****编辑****
我可以提供的另一个提示（最近，当 ("checked",false) 打破我的复选框时，这对我有用，是首先在应该检查的项目上执行 ("checked",true) 并且仅一次）对要取消选中的项目进行检查以执行 ("checked",false).. 这样您至少可以检查正确的项目

例如，而不是这样做：

```
$("#box1").attr("checked", false).checkboxradio("refresh");
$("#box2").attr("checked", true).checkboxradio("refresh"); 
```

做：

```
$("#box1").attr("checked", true).checkboxradio("refresh");
$("#box2").attr("checked", false).checkboxradio("refresh"); 
```

我个人不确定为什么检查错误会破坏任何后续检查真实但可能需要记录一个错误..祝大家好运

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-10T17:48:40.647

检查它

```
$("#" + IDProduct).prop("checked", true).checkboxradio("refresh"); 
```

取消选中它

```
$("#" + IDProduct).prop("checked", false).checkboxradio("refresh"); 
```

地位

```
$("#" + IDProduct).prop("checked") true/false 
```

根据**jQuery docs 1.7.1**版本：

# c# - Windows Phone 8 语音合成器暂停

> ID：15644054
> 
> 赞同：1
> 
> 时间：2013-03-26T17:51:05.260
> 
> 标签：c#, windows-phone-8, speech-synthesis, speechsynthesizer

我正在开发一个应用程序，我想在 SpeechSynthesizer.SpeakTextAsync 运行时暂停并从那里恢复。

```
await synthesizer.SpeakTextAsync(text); 
```

什么时候停止阅读`var stop = true;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:40:42.757

不久前有人在这里发帖，同时我刷新了页面，阅读了他的答案，看到了通知并再次刷新了页面，答案消失了。但无论是谁发帖，他都是救命稻草。它让我想起了，我最终创造了这个。

```
 String text;  // your text to read out loud
    String[] parts = text.Split(' ');
    int max = parts.Length;
    int count = 0;

    private String makeSSML() {
        if (count == max) { 
            count= 0;
        }
        String s = "<speak version=\"1.0\" ";
        s += "xmlns=\"http://www.w3.org/2001/10/synthesis\" xml:lang=\"en-US\">";
        for (int i = count; i < max; i++)
        {
            s += parts[i];
            s += "<mark name=\"anything\"/>";
        }
        s += "<mark name=\"END\"/>";
        s += "</speak>";
        return s;
    }

    private void playIT(){
        synth = new SpeechSynthesizer();
        synth.BookmarkReached += synth_BookmarkReached;
        synth.SpeakSsmlAsync(makeSSML());
    }

    private void synth_BookmarkReached(object sender, SpeechBookmarkReachedEventArgs e)
    {
        count++;
        if (e.Bookmark == "END") {
            synth.Dispose();
        }
    }

    private void Pause_Click(object sender, RoutedEventArgs e)
    {
        synth.Dispose();
    } 
```

谢谢大佬，你的回答给了我灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T11:39:48.860

好吧，根据文档，当您调用 时`CancellAll`，您正在取消异步执行的任务。根据合同，这会导致`OperationCancelledException`被抛出。这意味着无论您调用 SpeakTextAsync、SpeakSsmlAsync 还是 SpeakSsmlFromUriAsync，都必须在这些调用周围加上 try/catch 语句，以防止此异常未被捕获。

**例子：**

```
private static SpeechSynthesizer synth;

public async static Task<SpeechSynthesizer> SpeechSynth(string dataToSpeak)
        {
            synth = new SpeechSynthesizer();
            IEnumerable<VoiceInformation> englishVoices = from voice in InstalledVoices.All
                                                          where voice.Language == "en-US"
                                                          && voice.Gender.Equals(VoiceGender.Female)
                                                          select voice;
            if (englishVoices.Count() > 0)
            {
                synth.SetVoice(englishVoices.ElementAt(0));
            }

            await synth.SpeakTextAsync(dataToSpeak); 

            return synth;
        }  

public static void CancelSpeech()
        {
            synth.CancelAll();
        } 
```

现在调用`SpeechSynth("Some Data to Speak")`你想要的地方，只要你想取消它，只需调用`CancelSpeech()`.

完成！享受...！

# grails - CXF 在特定文件中写入日志

> ID：15644059
> 
> 赞同：1
> 
> 时间：2013-03-26T17:51:50.523
> 
> 标签：grails, cxf, grails-2.0

在我的应用程序中，有几个借助 cxf 框架实现的 Web 服务。我想将每个 Web 服务的传入请求记录在单独的文件中。例如

```
requests -> ws1 interface -> incomingWs1.log
requests -> ws2 interface -> incomingWs2.log 
```

目前我知道如何使用日志拦截器记录传入和传出消息。这很好用，但是使用拦截器我无法定义日志的输出位置。这是使用日志拦截器的示例：

```
@WebService(endpointInterface = "at.pdts.cxf.HelloWorld")
@InInterceptors(interceptors = "org.apache.cxf.interceptor.LoggingInInterceptor") // this works!
@Logging(limit=16000, inLocation="<stdout>", outLocation="<logger>", pretty=true) // does not work!
public class HelloWorldImpl implements HelloWorld { ... 
```

在研究了一段时间后，发现提供了我搜索的位置设置的日志注释，如您在上面的代码示例中所见。国庆没有效果！我尝试了几个位置选项，比如

```
file:///c:/log.log
file:c:\log.log
<stdout> 
```

我希望有人能指出我正确的方向。我在版本 2.2.1 的 grails 应用程序中使用 cxf 框架 2.7.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-23T10:20:22.480

可以使用 annotation的`outLocation`属性来实现这一点，但是，提供的文件名必须是绝对文件名。`@Logging`下面提供了一个示例：

```
@Logging(limit=16000, inLocation="<stdout>", outLocation="/absolute/path/to/file", pretty=true)
public class HelloWorldImpl implements HelloWorld { ... 
```

请注意，只有绝对路径才能工作，因为 a`URI`用于在类内部创建输出文件`AbstractLoggingInterceptor`，如下所示：

```
public abstract class AbstractLoggingInterceptor extends AbstractPhaseInterceptor<Message> {
    public void setOutputLocation(String s) {
        ...
        } else {
            try {
                URI uri = new URI(s);
                File file = new File(uri);
                writer = new PrintWriter(new FileWriter(file, true), true);
            } catch (Exception ex) {
                getLogger().log(Level.WARNING, "Error configuring log location " + s, ex);
            }
        }
    }
} 
```

如果您想使用名称将在运行时确定的动态文件，您可以通过扩展`LoggingOutInterceptor`来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:17:33.163

解决方案非常简单。如果要使用日志注释，则必须将其放置在服务端点接口中。在我上面发布的示例中，注释属于 HelloWorld 接口：

```
@Logging(limit=16000, inLocation="<stdout>", outLocation="<logger>", pretty=true)
public interface HelloWorld {
... 
```

使用文件uris 将soap 消息记录在特定文件中，例如file:///c:/out.txt。

# java - 如何将多个数组添加到 JComboBox？

> ID：15644063
> 
> 赞同：1
> 
> 时间：2013-03-26T17:52:07.020
> 
> 标签：java, arrays, swing, jcombobox

我正在为一些课程制作一个剧院座位预订系统，但是在创建一个 JComboBox 来帮助用户从总共 197 个座位中选择一个座位时遇到了麻烦。

座位由“Seat”对象表示，这些对象只是一些变量的集合，例如“isBooked”（布尔值）。座位排列成多个座位数组，每个数组代表一排座位，例如A[]、B[]...

预订座位时，需要按行分隔座位，因为它们的价格不同，但是 JComboBox 将用作选择要取消预订的座位的一种方式，因此只需要完整的座位列表。

我可以轻松地将单个数组添加到 JComboBox 并使其正常工作，但是尝试将更多数组添加到 JComboBox 中的列表失败。

如何向 JComboBox 添加多个数组？即A[1]、A[2]、A[3]...A[14]、B[1]、B[2]...

如果这是一个愚蠢的问题，我在 Java 方面不是很有经验，很抱歉。经过过去几天的大量研究，我尝试使用 DefaultComboBoxModel 类进行试验，但显然没有正确使用它。这是我最近尝试解决我的问题：

```
DefaultComboBoxModel model = new DefaultComboBoxModel();
            model.addElement(A);
            model.addElement(B);
            model.addElement(C);
            model.addElement(D);
            model.addElement(E);
            model.addElement(F);
            model.addElement(G);
            model.addElement(H);
            model.addElement(J);
            model.addElement(K);
            model.addElement(L);
            JComboBox seatCombobox = new JComboBox();
            seatCombobox.setModel(model);
            unbookSeatWindow.buttonsPanel.add(seatCombobox); 
```

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T17:56:45.883

您的 DefaultComboBoxModel 代码是正确答案。您只需从尽可能多的数组中添加元素。

我可以建议您使用两个 JComboBox 组件。一个用于分区，另一个用于座位号。否则，您的用户会在阅读数百个座位的列表时感到沮丧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T18:03:45.173

您可以使用以下方式填充模型`ArrayList`：

```
 DefaultComboBoxModel model ;
    JComboBox seatCombobox = new JComboBox();
    public void fillModel()
    {
      ArrayList<String> elements = new ArrayList<String>();
      elements.addAll(java.util.Arrays.asList(A));
      elements.addAll(java.util.Arrays.asList(B));
      elements.addAll(java.util.Arrays.asList(C));
      elements.addAll(java.util.Arrays.asList(D));
      elements.addAll(java.util.Arrays.asList(E));
      elements.addAll(java.util.Arrays.asList(F));
      elements.addAll(java.util.Arrays.asList(G));
      elements.addAll(java.util.Arrays.asList(H));
      elements.addAll(java.util.Arrays.asList(I));
      elements.addAll(java.util.Arrays.asList(J));
      elements.addAll(java.util.Arrays.asList(K));
      elements.addAll(java.util.Arrays.asList(L));
      model = new DefaultComboBoxModel(elements.toArray()) ;
      seatCombobox.setModel(model);
    } 
```

# cakephp - CakePHP 查找相关模型计数的条件

> ID：15644066
> 
> 赞同：0
> 
> 时间：2013-03-26T17:52:16.830
> 
> 标签：cakephp

我有 3 个模型。类型 hasMany Collector，并且 Collector hasAndBelongsToMany Place。

我需要获取 Collectors 至少拥有一个 Place 的所有类型。所以我不需要收藏家没有地方的类型。

我在 Collector 模型中没有计数字段，所以我不能使用 counterCache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:44:02.280

我在这里可能弄错了，但我相信最好的方法是利用 Model::afterFind() 方法。

```
<?php
// type.php (Model)
function afterFind($results, $primary) {
    if ($primary === true) {
        foreach ($results as $key => $type) {
            foreach ($type['Collector'] as $collector) {
                // Assuming you built the associations/tables/etc. correctly and are following cake conventions.
                if (empty($collector['Place']))  {
                    unset($results[$key]);
                    continue 2;
                }
            }
        }
    }
}
?> 
```

* * *

```
<?php
// types_controller.php

// Assuming you're using the containable behavior? If not
// set recursive to 2.
$this->Type->contain(array(
    'Collector' => array(
        'Place'
    )
));
$types = $this->Type->find('all');

?> 
```

# android - 可以为所有活动使用一个 menu.xml 布局文件吗？

> ID：15644067
> 
> 赞同：0
> 
> 时间：2013-03-26T17:52:17.943
> 
> 标签：android, android-layout, menuitem, android-xml, android-menu

我正在尝试在我的活动中构建一个菜单导航系统。我将在我的应用程序中使用几个活动作为示例。我有一个地图活动、登录和列表活动。

Maps Activity 可以在按下物理菜单按钮后导航到这些活动：登录和列表。地图图标/按钮不会出现在菜单中，因为它已经在地图活动中。

同样，List 可以转到 Login 和 Maps，但不能转到自身。与登录相同，它可以进入地图和列表，但不能进入自身。

现在，我为每个包含基本相同内容的活动都有一个单独的菜单布局文件，但例如，地图活动将不包含地图菜单项。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/list" android:title="List" android:icon="@drawable/ic_menu_list"/>
  <item android:id="@+id/login" android:title="Login" android:icon="@drawable/ic_menu_login"/>
</menu> 
```

然后 List 将是这样的：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
  <item android:id="@+id/mapViewList" android:title="Map View" android:icon="@drawable/ic_menu_map"/>
  <item android:id="@+id/loginList" android:title="Login" android:icon="@drawable/ic_menu_login"/>
</menu> 
```

因此，我的问题是，我是否可以使用一个菜单布局文件来包含每个菜单项，即使某些活动不使用该项目？多个活动指向同一个菜单文件是否安全？

即这样可以吗？请记住，并非所有项目都会在活动中使用，例如刷新项目，它仅在地图中显示。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/add" android:title="Add" android:icon="@drawable/ic_menu_add"/>
    <item android:id="@+id/mapView" android:title="Map View" android:icon="@drawable/ic_menu_map"/>
    <item android:id="@+id/list" android:title="List" android:icon="@drawable/ic_menu_list"/>
    <item android:id="@+id/refresh" android:title="Refresh" android:icon="@drawable/ic_menu_refresh"/>
    <item android:id="@+id/login" android:title="Login" android:icon="@drawable/ic_menu_login"/>
    <item android:id="@+id/logout" android:title="Logout" android:icon="@drawable/ic_menu_logout2"/>
</menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:53:57.593

是的，多个活动使用相同的菜单 XML 是一样的。

请记住，所有选项都将显示给用户，即使您不使用其中一些选项。您可以使它们在单击时不执行任何操作，但它们仍然可见。

您可以覆盖 onPrepareOptionsMenu() 以隐藏其中一些，例如地图之一：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    menu.findItem(R.id.mapView).setVisible(false);
    return true;
} 
```

# sql - 修改加入 SQL Server

> ID：15644070
> 
> 赞同：0
> 
> 时间：2013-03-26T17:52:26.023
> 
> 标签：sql, sql-server, tsql

我在 SQL Server 存储过程中有以下查询

```
SELECT SZ_SK FROM tbl_Class CC
INNER JOIN tbl_Location LR ON CC.LCTN_RSTN = LR.LCTN_RSTN
WHERE LR.LCTN_RSTN = ISNULL(@Location,LR.LCTN_RSTN) 
```

我有一个问题，我意识到在`tbl_Class`值`LCTN_RSTN`可能是`NULL`，`tbl_Location`没有`NULL`字段。这是一个问题，因为如果`@Location = NULL`那时我想要`CC.LCTN_RSTN= NULL`显示的字段。我有什么办法可以做到吗？（`SZ_SK`仅存在于`tbl_Class`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:55:43.130

假设 LCTN_RSTN 是一个字符串，并且您不在任何地方使用空字符串

```
SELECT SZ_SK FROM tbl_Class CC
INNER JOIN tbl_Location LR ON ISNULL(CC.LCTN_RSTN, '') = ISNULL(LR.LCTN_RSTN, '')
WHERE LR.LCTN_RSTN = ISNULL(@Location,LR.LCTN_RSTN) 
```

将加入空值。NULL != NULL，但转换为空字符串，'' = ''

这里的基本技术是使用实际范围之外的哨兵值。例如，如果 LCTN_RSTN 为 IDENTITY(1,1)，则使用 -1 作为空值的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:56:29.303

尝试这个

```
SELECT SZ_SK FROM tbl_Class CC
INNER JOIN tbl_Location LR 
     ON coalesce(CC.LCTN_RSTN,'') = coalesce(LR.LCTN_RSTN,'')
WHERE (@Location is null) or (coalesce(LR.LCTN_RSTN,'') = @Location) 
```

# sql - 等效于带有 data.table 的 sql 笛卡尔查询

> ID：15644075
> 
> 赞同：3
> 
> 时间：2013-03-26T17:52:55.620
> 
> 标签：sql, r, data.table

有没有办法在 data.table 中获得以下 SQL 查询的等价物？

```
create C as select * from R,P where 
P.x between R.min_x and R.max_x and P.var2 < R.col3 
```

我的问题是我不能`R,P`像 R 的笛卡尔积一样崩溃，我对任何技术都很满意（即使它是在几个步骤中......）

典型大小为 R 1K 行，P 3M 行

编辑：

```
library(data.table)
R = data.table(min_x=c(.6,.4,.01,.8),max_x=c(.7,.51,.05,.95),col3=c(.6,.4,1.2,.6))
P = data.table(x=seq(.1,.9,.1),var2=c(1,.4,.3,.2,0,.5,.65,.7,0))
setkey(P, x)
setkey(R,min_x,max_x) #and max_x is always > min_x

#R
#   min_x max_x col3
#1:  0.01  0.05  1.2
#2:  0.40  0.51  0.4
#3:  0.60  0.70  0.6
#4:  0.80  0.95  0.6

#B
#      x var2
#1:  0.1 1.00 => var1 not in any [col1,col2]
#2:  0.2 0.40 => same
#3:  0.3 0.30 => same
#4:  0.4 0.20 => .4 in [.4,.51] but .2 < .4 so NO
#5:  0.5    0 => same 
#6:  0.6 0.50 => .6 in [.6, .7] but .5 < .6 so NO
#7:  0.7 0.65 => .6 in [.6, .7] AND .65 > .6 => SELECTED
#8:  0.8 0.70 => YES
#9:  0.9    0 => NO 
```

所以预期的结果

```
#  min_x max_x  col3    x var2
#1: 0.60  0.70  0.6  0.70 0.65 
#2: 0.80  0.95  0.6  0.80 0.70 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:34:02.900

当这个 FR 被实现时（它的链接可能有用）：

[FR#203 允许 2 列在 i 中指定范围而不是 %between%](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=203&group_id=240&atid=978)

有可能 ：

```
setkey(B, var1, var2)
B[A[,list(.(col1,col2),.(-Inf,col3))], j] 
```

如果这听起来不错？您可能希望指定`j`每个组（每行`i`）运行的 a 以在内存中保存潜在的笛卡尔扩展。但是如果你真的想要返回大表，`allow.cartesian`可以设置标志：

```
B[A[,list(.(col1,col2),.(-Inf,col3))], allow.cartesian=TRUE] 
```

这当然不能现在完成，所以这只是一个探索性的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:27:18.510

[在这篇文章](https://stackoverflow.com/questions/11157172/subset-and-recombine-dataframes-using-data-table-package-or-other-solutions-r)的@Matthew Dowle 的帮助下，我最终得到了答案

```
setkey(P,x)
# sort by x and mark as sorted so future queries can use binary search on P
# Lookup each min_x in the key of P, returning the location. J stands for Join.
from = P[J(R$min_x), roll=-Inf, mult='first', which=TRUE]
# Lookup each max_x in the key of P, returning the location.
to = P[J(R$max_x),roll=Inf, mult='last', which=TRUE]
# vectorized for each item the length to[i]-from[i]+1
len = to-from+1
#get NA that can occur if no x > min_x  
isNaFromTo = !is.na(from) & !is.na(to)
#remove the NA from from/to
to = to[isNaFromTo]
from = from[isNaFromTo]
#replace NA by 0 in len which will flag the fact that we want to remove the line from R
len[!isNaFromTo] = 0;
# create index for P
i = unlist(mapply("seq.int",from,to,SIMPLIFY=FALSE))
# create index of R 
j = rep(1:nrow(R), len);
#bind to get the result
res = cbind(R[j], P[i]) 
res = res[var2>col3] 
```

结果符合预期

```
 min_x max_x col3   x var2
1:   0.6  0.70  0.6 0.7 0.65
2:   0.8  0.95  0.6 0.8 0.70 
```

# javascript - 如何在一次单击时隐藏 div 并在另一次单击时取消隐藏？

> ID：15644082
> 
> 赞同：1
> 
> 时间：2013-03-26T17:53:09.050
> 
> 标签：javascript, jquery

我想在我的 javascript 中添加一个 else 语句，目前如果用户点击一个链接，那么 div 就会隐藏，但我想要它，这样如果他们再次点击链接，div 就会取消隐藏。有人可以告诉我我该怎么做吗谢谢？

```
<a id="myLink" href="javascript:void(0)" onclick="javascript:myLinkButtonClick();"><h3 id="bobcontent1-title" class="handcursor"><img src="assets/img/help_support/howdo.png" width="302" height="45" /></a>

<script>
function myLinkButtonClick()
{
    $(".nswp-frame2").hide();
}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T17:54:11.840

由于您似乎正在使用 jQuery，因此您可以简单地使用该`toggle()`方法。

例如：

```
$('#myLink').on('click', function() {
    $(".nswp-frame2").toggle();
}); 
```

该`toggle()`方法可互换地显示和隐藏元素，具体取决于元素当前是可见还是隐藏。

作为旁注，请注意此示例如何以不显眼`click`的方式使用方法将处理程序绑定到事件`on()`，而不是示例中的显眼（内联）代码。这也意味着这个片段应该是单独脚本声明的一部分，最好在页面加载后执行。所以一个更完整的例子是：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#myLink').on('click', function() {
            $(".nswp-frame2").toggle();
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:55:04.237

```
function myLinkButtonClick()
{
    var $element = $('.nswp-frame2');
    if($element.is(':visible')){
        $element.hide();
    } else {
        $element.show();
    }
} 
```

或者，您也可以简单地使用 .toggle 方法：

```
function myLinkButtonClick()
{
    $('.nswp-frame2').toggle();
} 
```

# c - 返回函数指针的函数声明

> ID：15644088
> 
> 赞同：4
> 
> 时间：2013-03-26T17:53:19.167
> 
> 标签：c, function, syntax, function-pointers, declaration

在阅读[本文](https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work)时，我遇到了以下函数指针声明。我没有使用过这样的声明，但我解释它的方式是：取消引用时 functionFactory 的返回值是一个接受 2 个 int 并返回一个 int 的函数。

```
int (*functionFactory(int n))(int, int) {
printf("Got parameter %d", n);
int (*functionPtr)(int,int) = &addInt;
return functionPtr;
} 
```

我很想知道这样的声明是否特定于这个案例，或者是否有我错过的通用方法。

我的意思是我们通常会看到像这样的声明

```
<returnType> funcName(listOfArgs){} 
```

这个看起来不合群。有人可以详细说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:02:46.607

> *我们通常会看到像这样的声明* `<returnType> funcName(listOfArgs){}`

是的，但在这种情况下，返回类型是指向函数的指针，这实际上是定义这种函数的一种可能方法：

```
int (*functionFactory(int n))(int, int) {
    ...
} 
```

幸运的是，您可以为任何类型创建别名，`typedef`这使得它变得更加简单：

```
typedef int (*FncPtr)(int,int);

FncPtr functionFactory(int n) {
    printf("Got parameter %d", n);
    FncPtr functionPtr = &addInt;
    return functionPtr;
} 
```

这更容易阅读，也更容易理解。函数原型的形式就像你期望的那样：它是被调用的函数`functionFactory`，它接受 1 个类型的参数`int`并返回`FncPtr`:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:04:08.680

要声明返回指向函数的指针的函数，首先编写要返回的函数类型的声明。例如，接受两个`int`并返回一个的函数的类型`int`是：

```
int function(int, int) 
```

现在，通过插入使其成为指向函数的指针`*`。由于优先级妨碍了（带括号的函数参数将比实际更紧密地绑定到标识符`*`），我们也必须插入括号：

```
int (*function)(int, int) 
```

最后，将标识符替换为工厂函数的声明符。（为此，声明符是函数标识符和参数列表。）在这种情况下，我们替换`function`为`factory(int)`. 这给出了：

```
int (*factory(int))(int, int) 
```

这声明了一个函数 ，它返回适合in`factory(int)`所在位置的东西。适合该位置的是指向一个函数的指针，该函数接受两个并返回一个.`xxx``int (*xxx)(int, int)``int``int`

# ruby-on-rails - Rails 中的社交动态

> ID：15644093
> 
> 赞同：1
> 
> 时间：2013-03-26T17:53:35.380
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, feed

我有一个带有表列（id、user_id 和 post）的**Post**
模型 然后我有 带有列（id、post_id 和 user_id（与帖子共享的用户））的**post_shared_with 。**此表目前没有模型，我只需要它来跟踪帖子的共享对象。一个帖子可以分享给很多人。**然后我对Photos**
有相同的方案。使用表格列（id、user_id 和 photo_path）对照片进行建模。表**photo_shared_with**没有模型并且有列（id、photo_id、user_id）。 最后，同样的旧视频方案。 问题： ****我需要一个页面来在一个提要中同时显示所有帖子、照片和视频。让我们说控制器提要，我如何在数据库中获取排序提要？我的观点会是什么样子？
其次，这甚至是解决此问题的有效方法吗？我应该使用像骨干这样的前端框架来处理提要还是有更好的方法来构建这样的东西？
真的很抱歉，如果这是一个超级基本的东西，我是一个新手，任何帮助将不胜感激。Nb：我已经完成了 micheal hartl 的 railstutorial 书籍，所以我了解了基础知识。****

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:32:25.107

我创建了一个 gem 来处理社交提要功能[https://github.com/SharpV/sharp_social](https://github.com/SharpV/sharp_social)，希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:42:03.733

您可以创建一个多态的 shared_with 表（因此它可以属于任何对象）。然后，您只需查询 shared_with 表。

所以你的架构看起来像：

```
Post (id, user_id, post_content)
Photo (id, user_id, photo_path)
SharedWith(id, shareable_id, shareable_type, user_id) (where the user_id is who you're sharing this with). 
```

[这是一个关于使用 rails http://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)的多态连接的链接以供参考。****

# python - PyGame 将 cStringIO 加载为图像

> ID：15644096
> 
> 赞同：2
> 
> 时间：2013-03-26T17:53:40.277
> 
> 标签：python, image, pygame, stringio

因此，我在网上为此尝试了一些解决方案，但每个解决方案都返回不同的错误。最近我决定尝试类似的东西：

```
import cStringIO, pygame, os
from pygame.locals import *

pygame.init()
mainClock = pygame.time.Clock()
WINDOWWIDTH = 640
WINDOWHEIGHT = 480
windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)
pygame.display.set_caption('StringIO Test')

with open("image.png", "rb") as infile:
    outfile = cStringIO.StringIO()
    outfile.write(infile.read())

class DummyFile:
    def __init__(self, data):
       self.data = data
        self.pos = 0

    def read(self, size=None):
        start = self.pos
        end = len(self.data) - 1

        if size is not None:
            end = min(len(self.data), self.pos + size)

        self.pos = end
        return self.data[start:end]

    def seek(self, offset, whence=0):
        if whence == 0:
            self.pos = offset
        elif whence == 1:
            self.pos = self.pos + offset
        elif whence == 2:
            self.pos = len(data) + offset    

    def write(self):
        pass

while True:
    windowSurface.fill((0,0,0))
    testIm = pygame.image.load(DummyFile(outfile.getvalue()))
    testImRect = testIm.get_rect()
    testImRect.topleft = (0,0)
    windowSurface.blit(testIm, testImRect)
    pygame.display.flip() 
```

这只是返回：

```
error: Can't seek in this data source 
```

本质上，我的程序将加密/解密图像文件，并允许用户查看它们而无需将解密的副本保存到硬盘驱动器。在另一个问题中，有人告诉我 stringIO 对象为此目的工作，如果您要广泛使用它，python 文档建议使用 cStringIO。pygame 的问题不想将对象作为图像。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:06:34.210

将此添加到 DummyFile

```
def tell(self):
    return self.pos 
```

它认为您的类文件对象不可搜索，因为它缺少该方法。通过向 DummyFile 添加一个**__ *getattr* __**方法并查看调用了哪种方法来解决这个问题。

# php - 如何从 url 中删除 %0A

> ID：15644097
> 
> 赞同：2
> 
> 时间：2013-03-26T17:53:40.523
> 
> 标签：php

```
<code> 
<form action="" method="get">
<table cellspacing="0">
<tbody>
<tr>
<th>Check</th>
<th>Country</th>
<th>Check</th>
</tr>
<?
while($row = mysql_fetch_array($result))
{ ?>
<tr>
<td>
<input type='checkbox' onclick="check()" name='allowed' value='1' <?
$reflex=mysql_query("select distinct * from geocity where isAllowed='1' AND 
country='" . $row['Code'] . "'"); $count = mysql_num_rows($reflex); if ($count ==
1{echo 'checked';}else{echo '';} ?>>
</td>
<td><? echo $row['CountryName']; ?></td>
<td>
<input type='checkbox' id="check1" name='countryname' value="<?echo $row['Code'];?>"
<? $reflex = mysql_query("select distinct * from geocity where isAllowed='1' AND 
country='" . $row['Code'] . "'"); $count = mysql_num_rows($reflex); if ($count == 1)
{echo 'checked';}else{echo '';} ?>>
</td>
</tr>
<?
};
?>
</tbody>
</table>
<input type="submit" class='button' value="Save">
</form>
</code> 
```

这是我的代码，但是当我提交问题时，出现的问题是在 url“%0A”中发生了这种情况，所以我怎样才能从 url 中删除这个 %0A。网址看起来像这样： `example.com/test.php?allowed=1&countryname=AF%0A`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:55:24.490

`%0A`是一个 url 编码的字符。
要在 PHP 中删除它们，请使用[`urldecode()`](http://php.net/manual/en/function.urldecode.php)函数。

[添加]
如果要删除添加空格（这里有一些：**value="AF"**），请在处理中使用[`trim()`](http://php.net/manual/en/function.trim.php)函数。`echo`

并查看您的数据库内容以使用[TRIM](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_trim)删除空格，如下所示：

```
UPDATE countries set countryname = TRIM(countryname); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:01:26.920

对我来说，您似乎需要清理`Code`数据库中的字段以将其限制为两个字符。在您的数据库上运行此程序以清理数据：

```
UPDATE geocity
SET Code = SUBSTRING(Code, 1, 2); 
```

这当然是假设每条记录中该字段的前两个字符是两个正确的字段，并且数据中出现的任何换行符都在这两个字符之后。

还应该注意的是，您的数据库访问模式可以大大改进。您在一个循环中运行了两次相同的查询。如果这是通过数百个国家代码的循环，那么当您只需要一个数据库查询时，您可能会进行数百个数据库查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T18:29:30.117

使用 PHP 使用以下代码：

```
 $string = str_replace("%0A"," ","text%0Amore"); 
```

# android - 带计时器的画布

> ID：15644098
> 
> 赞同：0
> 
> 时间：2013-03-26T17:53:48.920
> 
> 标签：android, canvas

我不知道如何命名我的问题，但是每次用户单击正方形时，我都会尝试在一段时间内使用画布显示一些文本，我一直在尝试使用计时器

```
timer.schedule(new TimerTask() {
       public void run() {
       }
    }, 11000); 
```

但这仅适用于第一次点击，第二次立即消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:00:26.607

尝试

```
timer.schedule(new TimerTask() {....},
                       0,        //initial delay
                       11000);  //subsequent rate 
```

# multithreading - 通过现有对象进行多线程文件写入

> ID：15644099
> 
> 赞同：2
> 
> 时间：2013-03-26T17:53:48.967
> 
> 标签：multithreading, delphi

**应用说明：**

我有一个应用程序允许用户通过线程运行多个并发查询（一次最多 100 个）。

我有一个用于记录错误的类。如果应用程序中发生错误，我会创建该类的一个实例并调用一个过程将错误写入日志文件。

**问题：**

我需要使错误记录代码线程安全。我注意到如果很多线程同时运行并产生相同的错误（例如无法连接到数据库），我会收到 i/o 错误 32（由于应用程序试图写入文件已经开放）。

作为一个快速而肮脏的修复，我已将写入文件的代码放在 try... 除了块内的重复循环中。如果出现异常（例如，该文件已被该类的另一个实例打开，由另一个线程启动），则它将标志设置为“false”。循环继续执行，直到标志为“真”（即没有错误写入文件），如下：

```
procedure TErrorLogging.logError(error: string);
var
     f: textfile;
     ok: boolean;
begin
     repeat
          ok := true;
          try
               assignfile(f, fLogFilename);
               if fileExists(fLogFilename) then append(f) else rewrite(f);
               writeln(f, error);
               closefile(f);
          except
               ok := false;
          end;
     until ok;
end; 
```

我知道保护代码块的正确方法是使用关键部分，但我不确定如何实现它，因为有许多不同的线程使用日志记录类，并且每个实例线程有自己的日志类实例，用于写入文件（因此它们不都只是与同一块代码同步）。

我可以看到的选项：

1.  使用上面的代码。保留此代码是否有任何问题？这是一个快速而肮脏的修复，但它有效。
2.  使用全局 TcriticalSection（如何？）。
3.  在某处使用单个过程来创建日志记录类的实例，线程将与之同步（我想这会破坏拥有日志记录类的对象）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:09:30.553

每当您想要附加日志条目时创建日志记录类的实例以及一遍又一遍地打开和关闭日志文件都是错误的。我个人会使用一个内部使用字符串列表并且其基本方法是线程安全的类的实例。像这样的东西：

```
type
  TErrorLog = class
  private
    FList: TStringList;
    FLock: TRTLCriticalSection;
  public
    constructor Create;
    destructor Destroy; override;
    procedure Clear;
    procedure Add(const ErrorText: string);
    procedure SaveToFile(const FileName: string);
  end;

implementation

{ TErrorLog }

constructor TErrorLog.Create;
begin
  inherited Create;
  InitializeCriticalSection(FLock);
  FList := TStringList.Create;
end;

destructor TErrorLog.Destroy;
begin
  EnterCriticalSection(FLock);
  try
    FList.Free;
    inherited Destroy;
  finally
    LeaveCriticalSection(FLock);
    DeleteCriticalSection(FLock);
  end;
end;

procedure TErrorLog.Clear;
begin
  EnterCriticalSection(FLock);
  try
    FList.Clear;
  finally
    LeaveCriticalSection(FLock);
  end;
end;

procedure TErrorLog.Add(const ErrorText: string);
begin
  EnterCriticalSection(FLock);
  try
    FList.Add(ErrorText);
  finally
    LeaveCriticalSection(FLock);
  end;
end;

procedure TErrorLog.SaveToFile(const FileName: string);
begin
  EnterCriticalSection(FLock);
  try
    FList.SaveToFile(FileName);
  finally
    LeaveCriticalSection(FLock);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T18:01:54.013

不知道 Delphi，作为一般设计规则（如果可能），我会将您的 logError 函数插入到线程安全的 Array、ArrayList、Queue 对象或您可用的对象中，然后让它在后台写入文件，也许每 5-10 秒左右。这不仅应该解决 i/o 问题，而且还应该扩展到每秒数千次写入，以防您想要记录其他事件以进行调试等。

# paypal - PayPal Sandbox 突然为自适应支付输出代理错误

> ID：15644100
> 
> 赞同：0
> 
> 时间：2013-03-26T17:53:53.937
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

**编辑：由于某种原因，它再次工作。我也不需要登录 developer.paypal.com。如果有人知道为什么，那将很有用。谢谢！**

在过去的几个月里，我一直在使用 PayPal 的自适应支付开发一个网站，特别是链式支付方法。我正在使用来自使用 SSL 的网站的[嵌入式支付方式。](https://www.x.com/developers/community/blogs/praveen/switching-over-embedded-payments?view=overview)直到一两天前，这种集成已经完美运行了几个月。在我将旧沙箱帐户导入新的 developer.paypal.com 沙箱后，它甚至仍然可以正常工作。

从网站表单提交付款后，浏览器会旋转一两分钟。几分钟后产生的错误如下：

> 代理服务器无法处理请求 GET /webapps/adaptivepayment/flow/corepay 原因：**与远程服务器进行 SSL 握手时出错**

```
$API_UserName = "us business account from developer.paypal.com sandbox";
$API_Password = "password from developer.paypal.com sandbox";
$API_Signature = "singature from developer.paypal.com sandbox";
// AppID is preset for sandbox use
//   If your application goes live, you will be assigned a value for the live environment by PayPal as part of the live onboarding process
$API_AppID = "APP-80W284485P519543T";
$API_Endpoint = "";

if ($Env == "sandbox") 
{
    $API_Endpoint = "https://svcs.sandbox.paypal.com/AdaptivePayments";
}
else
{
    $API_Endpoint = "https://svcs.paypal.com/AdaptivePayments";
} 
```

如果我没记错的话，我相信当从这里的这个函数发生重定向时会产生错误：

```
function RedirectToPayPal ( $cmd )
{
    // Redirect to paypal.com here
    global $Env;

    $payPalURL = "";

    if ($Env == "sandbox") 
    {
        $payPalURL = 'https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?expType='.$_POST['expType'].$cmd;
    }
    else
    {
        $payPalURL = "https://www.paypal.com/webscr?" . $cmd;
    }

    header("Location: ".$payPalURL);
    exit;
} 
```

编辑：我按照建议将 $payPalURL 更改为“ [https://developer.paypal.com](https://developer.paypal.com) ...”并得到以下信息：

> 服务暂时不可用
> 
> 由于维护停机或容量问题，服务器暂时无法满足您的请求。请稍后再试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:50:04.093

After the recent code change this flow now requires you to log in to [https://developer.paypal.com](https://developer.paypal.com) first. I am checking to see if this was intentional or is a code bug.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:51:34.163

sandbox.paypal.com 服务器似乎出现了一个问题，该服务器在几天内禁用了自适应支付。一切似乎都像以前一样运作。感谢丹尼斯的意见。

**编辑：** 这似乎是持续的和间歇性的

# c++ - WTL RedrawWindow 参数

> ID：15644104
> 
> 赞同：0
> 
> 时间：2013-03-26T17:54:20.587
> 
> 标签：c++, redraw, wtl

我是 WTL C++ 的新手。我对进入 RedrawWindows 函数的参数感到非常困惑，尤其是对于标志。我只是想在每次画一条线时更新一个窗口，但我不完全明白如何

```
LRESULT  CDrawView::OnLButtonUp(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
{
    int xPos= GET_X_LPARAM(lParam);
    int yPos = GET_Y_LPARAM(lParam);
    end.X = xPos;
    end.Y = yPos;

    Pen pen(Color(0, 0, 255));
    m_GraphicsImage.DrawLine(&pen, start.X, start.Y, end.X, end.Y); 
```

我尝试在这里调用 RedrawWindow，

```
RedrawWIndow(NULL,NULL, NULL, RDW_INTERNALPAINT) 
```

所以每次我释放鼠标左键时，窗口都会更新。我很难理解进入重绘函数的参数。我尝试将它们全部设为 null 减去最后一个，但 Visual Studio 说该函数不采用 4 个参数，即使我阅读了 msdn microsoft...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:58:59.283

这不是您应该使用的方式，您应该使用 API。您的鼠标按钮处理程序应该调用`Invalidate()`或`InvalidateRect`使用您标记为需要更新的窗口的特定部分。然后，您的窗口将`WM_PAINT`在第一个操作系统方便时接收事件，并且您的绘图处理程序将绘制线条。

`RedrawWindow`这次可能会解决，但是很可能很快就会成为下一个问题的基础，因为您已经走错路了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:14:09.077

您没有调用全局[`RedrawWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162911%28v=vs.85%29.aspx).

您正在调用成员函数[`CWindow::RedrawWindow`](http://msdn.microsoft.com/en-us/library/bdf1xe8b%28v=vs.80%29.aspx)，它接受 3 个参数。

```
BOOL RedrawWindow(
   LPCRECT lpRectUpdate = NULL,
   HRGN hRgnUpdate = NULL,
   UINT flags = RDW_INVALIDATE | RDW_UPDATENOW | RDW_ERASE 
); throw() 
```

**编辑：** 这三个参数都有*默认参数*，这意味着它们不需要`RedrawWindow()`单独提供。

# c# - 在运行时更改 WPF DataGrid 整列的背景颜色

> ID：15644105
> 
> 赞同：26
> 
> 时间：2013-03-26T17:54:25.597
> 
> 标签：c#, wpf, datagrid, colors

所有，我对 WPF 比较陌生。我已经四处寻找答案，但我发现的只是如何在运行时对行而不是列进行着色；例如以下问题：

1.  [更改 WPF 数据网格行颜色](https://stackoverflow.com/questions/10056657/change-wpf-datagrid-row-color)

2.  [如何以编程方式更改 WPF 中的数据网格行颜色？](https://stackoverflow.com/questions/5030361/how-do-i-programatically-change-datagrid-row-color-in-wpf)

3.  [以编程方式为 DataGrid 中的行分配颜色](https://stackoverflow.com/questions/1847359/wpf-programmatically-assigning-a-color-to-a-row-in-datagrid)

4.  [根据值更改 DataGrid 单元格颜色](https://stackoverflow.com/questions/5549617/change-datagrid-cell-colour-based-on-values)

等。

我已经在[MSDN DataGrid 页面](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtextcolumn.aspx)`CellStyle`上看到了该属性，但它的使用对我来说一点也不明显，尽管围绕它进行了搜索。

**如何在运行时更改整个列的背景颜色？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-26T22:50:36.623

我让它工作的唯一方法是自己设置列（不使用自动生成）。所以首先要做的是定义列：

```
<DataGrid x:Name="Frid" ItemsSource="{Binding Path=.}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="First Name" 
                                Binding="{Binding Path=FirstName}">

            </DataGridTextColumn>

            <DataGridTextColumn Header="Last Name" 
                                Binding="{Binding Path=LastName}">

            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

然后您需要设置每一列 CellStyle 并将 Background 绑定到您可以在 Window.Resources 中声明的静态资源：

```
<Window x:Class="WpfApplication1.MainWindow" ...>
<Window.Resources>
    <SolidColorBrush x:Key="clBr" Color="White" />
</Window.Resources>
... 
```

列：

```
 <DataGridTextColumn Header="First Name" 
                                    Binding="{Binding Path=FirstName}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" 
                                Value="{StaticResource clBr}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn> 
```

那么您可以通过代码或 xaml 操作来操作静态资源。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-10T06:21:57.633

有点老了，但这里是您可以如何以编程方式执行此操作（对于 AutoGen 列）：

```
private void dgvMailingList_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    e.Column.CellStyle = new Style(typeof(DataGridCell));
    e.Column.CellStyle.Setters.Add(new Setter(DataGridCell.BackgroundProperty,  new SolidColorBrush(Colors.LightBlue)));
} 
```

同样的方法也可以应用于非 AutoGen 列。

# jquery - 用于从 jquery ajax 读取文本文件的字符编码

> ID：15644109
> 
> 赞同：0
> 
> 时间：2013-03-26T17:54:33.373
> 
> 标签：jquery, ajax, character-encoding, get

我正在使用 jquery get 读取文本文件。

```
jQuery.ajaxSetup({
    async: false,
    scriptCharset: "utf-8",
    cache: false,
    contentType: "utf-8"
});
$.get('test.txt', 'text')
.success(function (d)
{
    alert(d);
}); 
```

文本文件的内容如下..“©e”（不带语音标记）。两个字符。

ajax 方法返回的是（我不能在这里输入）alt+65533

我一定做错了什么，我不知道如何解决这个问题。我试过 utf-8 但无济于事。我需要做什么才能使其正常工作？我应该使用 ajax 函数而不是 get 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:05:12.540

在编辑器中打开文本文件，当您在“另存为”对话框中时，选择 UTF-8 作为编码。

您现在已将文件保存为 Windows-1252/ANSI/ISO-88591 编码，您需要修复它。

# c# - Google Analytics .net api OAuth 编译错误

> ID：15644115
> 
> 赞同：1
> 
> 时间：2013-03-26T17:54:55.847
> 
> 标签：c#, asp.net, oauth, google-analytics

我正在尝试编写一些通过 Google 的 .net/c# api 获取 Google Analytics 数据的代码，

我使用以下主题开始：[堆栈溢出线程](https://stackoverflow.com/questions/9366380/service-account-google-analytics-oauth-accesstype-offline-c-sharp)

并编写了以下代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlTypes;
using System.Security.Cryptography.X509Certificates;
using Google.Apis.Authentication.OAuth2;
using DotNetOpenAuth.OAuth2;
using Google.Apis.Analytics.v3;

namespace ManagementAPI.Models
{
public class Value
{
    public Guid SiteID { get; set; }
    public Guid WidgetID { get; set; }
    public string NewValue { get; set; }
    public DateTime updateTime { get; set; }
    public string GaRefreshToken { get; set; }
    public string GaAccesToken { get; set; }
    public string GaAccountName { get; set; }

    public void getGaValue()
    {
        var client = new WebServerClient(GoogleAuthenticationServer.Description, "319907436177.apps.googleusercontent.com", "rIir_V4IWcckC0QoDX3gZLYd");
        var auth = new OAuth2Authenticator<WebServerClient>(client, Authenticate);
        var asv = new AnalyticsService(auth);
        var request = asv.Data.Ga.Get("ga:" + GaAccountName, "2012-01-01", "2012-02-20", NewValue);
        request.Dimensions = "ga:pagePath";
        request.Sort = "-ga:visitors";
        request.MaxResults = 5;
        var report = request.Fetch();
        Console.ReadLine();
        NewValue = "TEST";
    }

    private static IAuthorizationState Authenticate(WebServerClient client)
    {
        IAuthorizationState state = new AuthorizationState(new string[] { }) { RefreshToken = "REFRESH_TOKEN" };

        client.RefreshToken(state);
        return state;
    }

} 
```

但是当我尝试编译它时，我收到以下错误：

```
Error   1   The best overloaded method match for 'Google.Apis.Analytics.v3.AnalyticsService.AnalyticsService(Google.Apis.Services.BaseClientService.Initializer)' has some invalid arguments    H:\vs12\ManagementAPI\ManagementAPI\Models\Value.cs 27  23  ManagementAPI

Error   2   Argument 1: cannot convert from 'Google.Apis.Authentication.OAuth2.OAuth2Authenticator<DotNetOpenAuth.OAuth2.WebServerClient>' to 'Google.Apis.Services.BaseClientService.Initializer'  H:\vs12\ManagementAPI\ManagementAPI\Models\Value.cs 27  44  ManagementAPI 
```

我还尝试按照另一个线程中的描述“修复”api dll，但这不会编译。

我想将此作为对另一个答案的评论发布，但由于我不能，我尝试用一​​个新问题来做到这一点。

编辑：使用了错误的版本，但这仍然无法编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:01:29.900

我通过进行以下更改解决了编译问题：

```
 var auth = new OAuth2Authenticator<WebServerClient>(client, Authenticate);
        var asv = new AnalyticsService(new BaseClientService.Initializer()
        {
            Authenticator = auth
        }); 
```

这样服务就有了 OAuth2 登录

# ios - 如何使 [NSNotificationQueue defaultQueue] 中的所有通知出列？

> ID：15644118
> 
> 赞同：1
> 
> 时间：2013-03-26T17:55:13.490
> 
> 标签：ios, nsnotificationcenter, nsnotifications

我正在尝试测试是否发送了异步 NSNotifcation，并且我想在检查是否收到通知之前确保所有通知都已出列。

看来我不能使用`NSNotificationQueue`唯一的出队方法，

```
- (void)dequeueNotificationsMatching:(NSNotification *)notification coalesceMask:(NSUInteger)coalesceMask 
```

因为我的测试不知道通知，所以它不能匹配它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:15:53.303

通知是用 , 设置的`NSPostingStyle`，`NSPostWhenIdle`所以解决方案是在验证模拟之前包含这一行。

```
 [[NSRunLoop mainRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1.1]]; 
```

# c# - 用制表符替换字符串中的字符 & 必须包含 4 个制表符

> ID：15644122
> 
> 赞同：1
> 
> 时间：2013-03-26T17:55:18.640
> 
> 标签：c#

我有一个制表符分隔的文件，其中一些字符串包含一个`ý`需要替换为`\t`. 此外，字符串总共需要包含 4 个制表符，任何额外的制表符都附加到末尾。例如，字符串：

```
1234ý5678
1234
ý1234ý5678 
```

应该看起来像

```
1234\t5678\t\t\t
1234\t\t\t\t
\t1234\t5678\t\t 
```

这是我到目前为止所拥有的：

```
string[] input_file = (string[])(e.Data.GetData(DataFormats.FileDrop));
string output_file = @"c:\filename.txt";

foreach (string file in input_file)
{
    string[] lines = File.ReadAllLines(file);

    for (int i = 0; i < lines.Length; i++)
    {
        string line = lines[i];

        string[] values = line.Split('\t');

        //look at each value in values, replace any ý with a tab, and add
                    //tabs at the end of the value so there are 4 total

        lines[i] = String.Join("\t", values);

    }
    File.WriteAllLines(output_file, lines);
} 
```

编辑：一些澄清 - 整行可能如下所示：

```
331766*ALL1 16ý7    14561ý8038  14560ý8037  ausername  11:54:05  12 Nov 2007 
```

我需要查看组成该行的每个字符串，并将任何 ý 替换为 \t，并在末尾添加 \t，因此每个字符串总共有 4 个。结果应该如下所示：

```
331766*ALL1 16\t7\t\t\t 14561\t8038\t\t\t   14560\t8037\t\t\t   ausername  11:54:05  12 Nov 2007 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:59:13.010

你要做的是：

1.  使用 \t 作为分隔符将每一行拆分为*字符串。*

2.  遍历字符串。

3.  对于每个字符串，用 \t 替换 ý。

4.  现在计算字符串中 \t 的数量，并根据需要添加额外的 \t。

这是一些代码：

```
string[] lines = System.IO.File.ReadAllLines(input_file);
var result = new List<string>();
foreach(var line in lines)
{
    var strings = line.Split('\t');
    var newLine = "";
    foreach(var s in strings)
    {
        var newString = s.Replace('ý','\t');
        var count = newString.Count(f=>f=='\t');
        if (count<4)
            for(int i=0; i<4-count; i++)
                newString += "\t";
        newLine += newString + "\t";
    }
    result.Add(newLine);
}
File.WriteAllLines(output_file, result); 
```

使用 StringBuilder 可能会更好地优化速度，但这是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:16:24.943

```
private static string SplitAndPadded(string line, string joinedWith = "\t", char splitOn = 'ý')
{
    // 4 required splits yields 5 items ( 1 | 2 | 3 | 4 | 5 )
    // could/should be a parameter; this allowed for the cleaner comment
    const int requiredItems = 5;

    // the empty string case
    var required = Enumerable.Repeat(string.Empty, requiredItems);

    // keep empty items; 3rd test case
    var parts = line.Split(new[] { splitOn });

    // this will exclude items when parts.Count() > requiredItems
    return string.Join(joinedWith, parts.Concat(required).Take(requiredItems));
}

//usage
// .Select(SplitAndPadded) may need to be .Select(line => SplitAndPadded(line))
var lines = File.ReadAllLines(file).Select(SplitAndPadded).ToArray();
File.WriteAllLines(outputFile, lines);

// if input and output files are different, you don't need the ToArray (you can stream) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:17:13.863

尝试这个：

```
string[] lines = System.IO.File.ReadAllLines(input_file);

for (int i = 0; i < lines.Length; i++)
{
    string line = lines[i];
    line = line.Replace("ý", "\t");
    int n = line.Split(new string[] { "\t" }, StringSplitOptions.None).Count()-1;
    string[] temp = new string[4 - n ];
    temp = temp.Select(input => "\t").ToArray();
    line += string.Join(string.Empty, temp);
    lines[i] = line;
}

System.IO.File.WriteAllLines(output_file, lines); 
```

# php - 在我的 PHP 网站上显示我自己的 Facebook 用户相册

> ID：15644128
> 
> 赞同：0
> 
> 时间：2013-03-26T17:55:35.187
> 
> 标签：php, facebook, authentication

[我的问题与这个](https://stackoverflow.com/questions/12110934/how-to-build-a-facebook-app-with-php-that-shows-albums)问题几乎相同，但我在那里找不到答案。

我只想在 PHP 页面上显示我的 Facebook 相册。

我知道要让我的网站访问 Facebook 用户的信息，我需要一个访问令牌。由于用户名和密码始终相同，我希望我的网站（或应用程序）可以直接将这些信息发送到 Facebook 并获得访问令牌，而无需任何用户交互。我已将此过程视为[OAuth 用户名和密码流](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-05#section-3.8)。

脸书可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:07:18.830

不，我认为没有 OAuth 用户名和密码流程。

Facebook 的每个流程都要求用户手动授予应用访问权限。

# ajax - 如何解决 jQuery 冲突

> ID：15644131
> 
> 赞同：0
> 
> 时间：2013-03-26T17:55:39.910
> 
> 标签：ajax, jquery

我有几行 jQuery 代码可以在点击链接时加载外部页面。

```
$(document).ready(function() {  
    $(".link").click(function (e) {
    e.preventDefault();      
    var $urlToLoad = $(this).attr('href'); 

    $("#loadarea").load($urlToLoad, function(data){
        $("#loading").fadeIn('fast').fadeOut('fast');
        $("#loadarea").hide().fadeIn('slow');       
        return false;
        });
    });      

}); 
```

这工作正常。但是，当我添加这一行在此页面上必不可少的附加代码时，会出现“$ 未定义”错误。

我已经在[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)尝试了每一种技术，但是我无法解决冲突。

```
function goto(id, t){   
    $(".contentbox-wrapper").animate({"left": -($(id).position().left)}, 600);
    $('#slide a').removeClass('active');
    $(t).addClass('active');    
} 
```

我试过 var jq=jQuery.noConflict(); 替换 $ 但这并不能解决问题。

我想我对 jQuery 的了解还不够，无法解决这个冲突，我非常感谢任何能够解释发生了什么的人，以便我可以从中学习。

所以总的来说，它看起来像这样：

```
<script>

 $(document).ready(function() { 
    $(".link").click(function (e) {
    e.preventDefault();      
    var $urlToLoad = $(this).attr('href'); 

    $("#loadarea").load($urlToLoad, function(data){
        $("#loading").fadeIn('fast').fadeOut('fast');
        $("#loadarea").hide().fadeIn('slow');       
        return false;
        });
    });      

}); 

function goto(id, t){   
    $(".contentbox-wrapper").animate({"left": -($(id).position().left)}, 600);
    $('#slide a').removeClass('active');
    $(t).addClass('active');    
}

</script> 
```

然后我有一个内联代码来触发脚本。

(a class="active" href="#" onClick="goto('#kr', this); return false">测试

奇怪的是，即使出现错误，它也会在第二次点击时触发。

////////////////////////////////

通过转换内联 javascript 解决了冲突/错误。

感谢下面的黄教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:31:17.407

我只想重写锚点

```
<a class="active" href="#" onClick="goto('#kr', this); return false">test</a> 
```

至

```
<a class="active" href="#kr">test</a> 
```

对于 jQuery

```
$('.active').on('click', function() {
    var $this = $(this);        
    var id = $this.attr('href');
    $(".contentbox-wrapper").animate({"left": -($(id).position().left)}, 600);
    $('#slide a').removeClass('active');
    $this.addClass('active');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:00:28.587

```
$(document).ready(function() {

}); 
```

应改写为：

```
jQuery(function($) {

}); 
```

这可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:01:41.430

这可能与您包含 js 文件的顺序有关，请确保 jquery 是第一个加载的文件。

# eclipse - Eclipse 错误，返回的退出代码=13

> ID：15644133
> 
> 赞同：1
> 
> 时间：2013-03-26T17:55:42.140
> 
> 标签：eclipse

我在打开 Eclipse Juno 64 位时遇到问题。这是错误的图片：

![Eclipse 启动错误](../Images/078f63043f461d70520d87cd842083e5.png)

我不知道为什么会这样，这是我第一次看到这样的错误。我已经重新安装了 JDK/JRE 64 位，但它并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-02T09:54:47.830

配置很好，问题是文件夹名称：从文件夹名称中删除特殊字符。

我有一个名为**“Prj#1”**的文件夹，eclipse 显示了同样的错误。我已将文件夹重命名为“Prj1”，一切正常。

# sql-server - 通过 IntelliJ IDEA 使用 Hibernate 和 MS SQL

> ID：15644136
> 
> 赞同：0
> 
> 时间：2013-03-26T17:56:01.353
> 
> 标签：sql-server, hibernate, jpa, intellij-idea, persistence-unit

我将 Hibernate/JPA 2.0 与 SQL Server 和 IntelliJ IDEA 一起使用，这是我为测试连接而制作的示例代码：

```
public class App {
    public static final String SELECT_QUERY = "select u from UsersEntity as u where u.userId = :userId";

    public static void main(String[] args)
    {
        String userId = "1";
        PersistenceProvider persistenceProvider = new HibernatePersistence();
        EntityManagerFactory entityManagerFactory = persistenceProvider.createEntityManagerFactory("newPersistenceUnit", new HashMap());
        EntityManager entityManager = entityManagerFactory.createEntityManager();

        List<UsersEntity> users = entityManager.createQuery(SELECT_QUERY, UsersEntity.class).setParameter("userId", userId).getResultList();
        System.out.println(users);
        entityManager.close();
    }
} 
```

这是我在控制台中收到的内容：

```
"C:\Program Files\Java\jdk1.6.0_29\bin\java" -Didea.launcher.port=7539 "-Didea.launcher.bin.path=C:\Program Files\JetBrains\IntelliJ IDEA 12.0.4\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.6.0_29\jre\lib\alt-rt.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\alt-string.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\jce.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\resources.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\rt.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.6.0_29\jre\lib\ext\sunpkcs11.jar;D:\mobitrack\out\production\web;D:\mobitrack\lib\javax.persistence.jar;D:\mobitrack\lib\hibernate-entitymanager-4.2.0.Final.jar;D:\mobitrack\lib\jboss-logging-3.1.0.GA.jar;D:\mobitrack\lib\hibernate-core-4.2.0.Final.jar;D:\mobitrack\lib\antlr-2.7.7.jar;D:\mobitrack\lib\jboss-transaction-api_1.1_spec-1.0.0.Final.jar;D:\mobitrack\lib\dom4j-1.6.1.jar;D:\mobitrack\lib\hibernate-jpa-2.0-api-1.0.1.Final.jar;D:\mobitrack\lib\javassist-3.15.0-GA.jar;D:\mobitrack\lib\hibernate-commons-annotations-4.0.1.Final.jar;D:\mobitrack\lib\tools.jar;D:\mobitrack\lib\sqljdbc4-4.0.2206.100.jar;C:\Program Files\JetBrains\IntelliJ IDEA 12.0.4\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain com.mobitrack.services.App
26 mars 2013 17:44:18 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
26 mars 2013 17:44:18 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.2.0.Final}
26 mars 2013 17:44:18 org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
26 mars 2013 17:44:18 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
26 mars 2013 17:44:19 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
26 mars 2013 17:44:19 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 20
26 mars 2013 17:44:19 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: true
26 mars 2013 17:44:19 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [com.microsoft.sqlserver.jdbc.SQLServerDriver] at URL [jdbc:sqlserver://localhost:1433;databaseName=MOBITRACKDB]
26 mars 2013 17:44:19 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=sa, password=****, autocommit=true, release_mode=auto} 
```

调试时我发现它停在：

```
EntityManagerFactory entityManagerFactory = persistenceProvider.createEntityManagerFactory("newPersistenceUnit", new HashMap()); 
```

知道“newPersistenceUnit”是我的持久性单元的名称。

**编辑：** 是的，它在 IDEA 之外工作。当我在 IDEA 中使用控制台查询数据时，它可以工作。

我尝试使用下一个代码：

```
public class HibernateUtil {

private static final SessionFactory sessionFactory;

static {
    try {

        sessionFactory = new Configuration().configure().buildSessionFactory();
    } catch (Throwable ex) {

        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static SessionFactory getSessionFactory() {
    return sessionFactory;
}

} 
```

我收到与上面相同的内容，调试停止在：

```
sessionFactory = new Configuration().configure().buildSessionFactory(); 
```

**编辑2：**

我使用了一个EntityManager：

```
EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("newPersistenceUnit");

    EntityManager entityManager = entityManagerFactory.createEntityManager();
    entityManager.getTransaction().begin();
    List<AdminsEntity> result = entityManager.createQuery( "from AdminsEntity",     AdminsEntity.class ).getResultList();
    for ( AdminsEntity event : result ) {
        logged = event;
    }
    entityManager.getTransaction().commit();
    entityManager.close();
    return logged; 
```

它停在：

```
 EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("newPersistenceUnit"); 
```

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">
<persistence-unit name="newPersistenceUnit">
    <class>com.mobitrack.entities.GroupsEntity</class>
    <class>com.mobitrack.entities.ZonesEntity</class>
    <class>com.mobitrack.entities.AdminsEntity</class>
    <class>com.mobitrack.entities.AlarmsEntity</class>
    <class>com.mobitrack.entities.LocationsEntity</class>
    <class>com.mobitrack.entities.UsersEntity</class>
    <class>com.mobitrack.entities.UserGroupsEntity</class>
    <class>com.mobitrack.entities.UserZonesEntity</class>
    <class>com.mobitrack.entities.SettingsEntity</class>
    <class>com.mobitrack.entities.MessagesEntity</class>
    <class>com.mobitrack.entities.ProfilesEntity</class>
    <class>com.mobitrack.entities.ProfileZonesEntity</class>
    <properties>
        <property name="hibernate.connection.url" value="jdbc:sqlserver://localhost:1433;databaseName=MOBITRACKDB"/>
        <property name="hibernate.connection.driver_class" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
        <property name="hibernate.connection.username" value="admin"/>
        <property name="hibernate.connection.password" value="password"/>
        <property name="hibernate.query.factory_class"
                  value="org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory"/>
    </properties>
</persistence-unit> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T13:24:25.663

此问题可能是由[减慢调试器](http://devnet.jetbrains.com/docs/DOC-23)的方法断点引起的。

请仔细检查您是否设置了任何方法断点。在|中禁用`toString()`评估和备用集合视图选项 也可以提高其性能。`Settings``Debugger`

# javascript - 在 JavaScript 中使用 childNodes 更改段落样式

> ID：15644137
> 
> 赞同：1
> 
> 时间：2013-03-26T17:56:01.460
> 
> 标签：javascript, dom, javascript-events

您好，我是 javascript 新手，我有一个 html 文档，我想更改 div 内的段落的字体大小，但我遇到了问题，我在控制台中收到此错误`Uncaught TypeError: Cannot set property 'fontSize' of undefined codigo.js:5`

这是我的html：

```
<!DOCTYPE html>
<html leng="es">
<head>
<meta charset="UTF-8">
<title>Mi ejercicio DHTML</title>
<link rel="stylesheet" type="text/css" href="css/estilos.css">
<script type="text/javascript" src="js/codigo.js" ></script>
</head>
<body>
<div id="parrafos">
<p>
    Your bones don't break, mine do. That's clear. Your cells react to bacteria 
</p>
<p>
    Your bones don't break, mine do. That's clear. Your cells react to bacteria 
</p>
<p>
    Your bones don't break, mine do. That's clear. Your cells react to bacteria 
</p>
<p>
    Your bones don't break, mine do. That's clear. Your cells react to bacteria 
</p>
<p>
    Your bones don't break, mine do. That's clear. Your cells react to bacteria 
</p>
</div>
</body>
</html> 
```

这是我的 js：

```
window.addEventListener('load', inicio); 

function inicio(){
var parrafos = document.getElementById('parrafos');
parrafos.childNodes[0].style.fontSize='10px';
} 
```

我想要的是通过在名为 parrafos 的 div 上使用 childNodes 通过访问其索引 parrafos.childNodes[2].style....etc 等来更改每个段落的样式

[编辑]

我以这段代码结束

```
window.addEventListener('load', inicio); 

function inicio(){
var parrafos = document.getElementById('parrafos');
parrafos.childNodes[1].style.fontSize='1.5em';
parrafos.childNodes[3].style.fontSize='1.3em';
parrafos.childNodes[5].style.fontSize='.5em';
parrafos.childNodes[7].style.fontSize='1em';
parrafos.childNodes[9].style.fontSize='.2em';

} 
```

我发现由于空间 en html 文档它没有遵循连续的顺序，这似乎很奇怪，因为我认为它应该是连续的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:13:08.453

在您的示例中，您应该将 fontSize 设置为“10pt”而不是“10px”（或“1em”），请参阅：http: [//jsfiddle.net/K9Uhn](http://jsfiddle.net/K9Uhn)

```
var parrafos = document.getElementById('parrafos');
parrafos.childNodes[1].style.fontSize='10pt'; 
```

此外，您还应该考虑为此使用 jQuery。当它自己处理元素迭代和 dom 问题时，它会为您省去很多麻烦。例如，用于更改上述示例的所有字体大小的 jQuery 代码将是

```
$("#parrafos").css("font-size", "10pt"); 
```

不需要自己做 for 循环，jQuery 处理所有这些。而且，它与所有浏览器兼容（您会发现这是一个巨大的优势）：www.jquery.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:07:25.647

尝试这个：

```
window.addEventListener('load', inicio); 

function inicio(){
var parrafos = document.getElementById('parrafos');

for (var i=0; i<parrafos.children.length; i++) {
    parrafos.children[i].style.fontSize = '10px';
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:12:52.427

在每个元素的基础上调整这样的样式并不是一个好主意。样式表和元素类是你的朋友！

请考虑下一个拿起您的代码的人。他们需要更改字体大小。他们查看样式表，您希望在其中找到该值，但它不存在。几个小时后，他们在 JavaScript 中找到了它，这是您意想不到的。然后他们下班，酗酒，把你的代码搞砸给他们的朋友，因为你刚刚让他们度过了多么辛苦的一天。

*可维护性*是最小化这种情况发生频率的东西。

* * *

所以相反，你给你的身体类一个标签，并有一些基于它改变字体大小的样式怎么样？

```
/* Stylesheet */
p {
  font-size: 16px
}

body.small p {
  font-size: 10px
} 
```

现在你的 JS 函数就变成了这样：

```
// Javascript
function inicio(){
    document.body.className = 'small';
} 
```

这更容易管理。

在这里看到它的工作：http: [//jsfiddle.net/s6BAf/](http://jsfiddle.net/s6BAf/)

* * *

一般来说，不要在 HTML 中使用内联样式，或者如果可以避免的话，直接在 javascript 中设置 CSS 值。取而代之的是，操纵页面上的元素类，让样式表做它该做的事情：为内容设置样式。

# label - Jface Label Provider：如何向 ObservableMapLabelProvider 添加工具提示

> ID：15644139
> 
> 赞同：1
> 
> 时间：2013-03-26T17:56:08.307
> 
> 标签：label, tooltip, jface, provider, viewer

我需要向 a 的元素添加工具提示`TreeViewer`，但作为标签提供者我必须使用 a `ObservableMapLabelProvider`（因为数据绑定）。

此标签提供程序与 eg 不同`ColumnCellLabelProvider`，没有方法`getTooltipText`。

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:15:04.637

也许您可以使用 org.eclipse.jface.window.DefaultToolTip 或 org.eclipse.jface.viewers.ColumnViewerToolTipSupport 之类的类进行调查...

# c# - 填写清单 在使用 LINQ 的已知对象内？

> ID：15644149
> 
> 赞同：0
> 
> 时间：2013-03-26T17:56:51.253
> 
> 标签：c#, linq

我对 Linq 很陌生，但只是想问一下如何`List<String>`使用 LINQ 填充一个对象？

我想要做的是从特定用户那里获取所有 URL。此数据存储在 Azure 表中

我的代码是：

```
public IEnumerable<UserTable> getUserImages(UserTable pUser) {
    var results = from u in this.context.usersTableQuery
                  where u.UserName == pUser.UserName
                  select u.PhotosUrl //PHOTOS URL IS A LIST of strings and I know im missing something here
    return results;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:58:56.103

尝试这个

```
 List<String>  results =( from u in this.context.usersTableQuery
                                  where u.UserName == pUser.UserName
                                  select u.PhotosUrl).ToList () 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:07:01.823

看起来您的查询总是返回一个用户，并且您想要他的`PhotosUrl`列表。如果这是真的，你应该使用它：

```
var user = this.context.usersTableQuery.FirstOrDefault(u => u.UserName == pUser.UserName);

List<string> results;
if(user == null)
    results = new List<string>();
else
    results = user.PhotosUrl; 
```

如果查询有可能返回多个具有给定 UserName 的用户，则必须使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb548748.aspx)扩展方法：

```
List<string> results = this.context.usersTableQuery
                                   .Where(u => u.UserName == pUser.UserName)
                                   .SelectMany(u => u.PhotosUrl)
                                   .ToList(); 
```

`SelectMany`在基于语法的查询中没有关联的关键字。它会将你的结果从`List<List<string>>`into扁平化`List<string>`。

# c++ - Windows C++ CMD 窗口切换

> ID：15644150
> 
> 赞同：0
> 
> 时间：2013-03-26T17:56:55.410
> 
> 标签：c++, windows, cmd, pipe

各位程序员大家好，我在一个C++程序中遇到了一些控制台应用的问题，我的目标如下。

1.  创建第一个 CMD 窗口。
2.  执行一个命令。(system("打印一些错误文本");)
3.  创建第二个 CMD 窗口。
4.  将 system(...) 焦点更改为第二个 CMD 窗口。
5.  执行一个命令。
6.  将 system(...) 焦点更改为第一个 CMD 窗口。
7.  执行一个命令。

所有这一切的最终目标是创建一个将由 CMD 应用程序执行的函数，该应用程序将生成另一个 CMD 窗口，在其上执行命令，然后将焦点返回到原始 CMD 窗口以继续执行其他代码。我不需要跟踪窗口，或者能够返回到它。只需创建新窗口，将焦点切换到它，执行命令，将焦点返回到原始窗口。

* * *

1.  第一个 CMD 窗口在应用程序启动时创建。
2.  使用 system(...) 对该窗口执行命令；工作正常。
3.  我创建了第二个 CMD 窗口

    ```
    HWND new_hWnd = NULL;
    ShellExecute(new_hWnd, "open", "cmd.exe", NULL, NULL, SW_SHOW); 
    ```

4.  这是我遇到问题的地方，我无法将 system(...) 重定向到不同的 CMD 窗口，这是我需要帮助的部分，因为如果我能解决这个问题，那么步骤 5、6 和 7将很容易完成。

我尝试在网上对此进行研究，并遇到了一些使用“管道”的不同示例，但无法重新创建它们或理解它们。另外，我注意到有一个

```
 GetConsoleWindow(); 
```

返回当前 CMD 窗口句柄的函数，这对我来说有点暗示应该有一种方法可以通过使用句柄在 CMD 窗口之间切换，但是由于我没有将焦点切换到另一个 CMD 窗口，所以我无法调用该函数得到它的句柄。

那么，如何使 system(...) 使用句柄来定位不同的 CMD 窗口？如果那不可能，我该如何实现这个“管道”系统。

如果解决方案是后者，请尝试尽可能详细和简单，因为我在网上找到的每个示例都非常庞大且难以阅读/理解。

如果没有简单的方法来实现“管道”，那么请发帖或指出我可以找到的最好的（有助于我理解管道如何工作的）示例，我将继续使用它，直到我弄明白为止。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T11:07:00.807

您可以通过在调用时指定`dwCreationFlags`值来为新进程创建新控制台。`CREATE_NEW_CONSOLE``CreateProcess`

请参阅文档：

*   进程创建标志：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms684863(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms684863(v=vs.85).aspx)
*   CreateProcess 函数：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)

# postgresql - 列出 PostgreSQL 模式中的表

> ID：15644152
> 
> 赞同：432
> 
> 时间：2013-03-26T17:56:59.277
> 
> 标签：postgresql, postgresql-9.1, psql

当我`\dt`在 psql 中执行时，我只会得到当前模式中的表列表（`public`默认情况下）。

如何获取所有模式或特定模式中的所有表的列表？

* * *

## 回答 #1

> 赞同：673
> 
> 时间：2013-03-26T18:40:28.457

在所有模式中：

```
=> \dt *.* 
```

在特定模式中：

```
=> \dt public.* 
```

可以使用[有一些限制的正则表达式](http://www.postgresql.org/docs/current/static/app-psql.html#APP-PSQL-PATTERNS)

```
\dt (public|s).(s|t)
       List of relations
 Schema | Name | Type  | Owner 
--------+------+-------+-------
 public | s    | table | cpn
 public | t    | table | cpn
 s      | t    | table | cpn 
```

> 高级用户可以使用诸如字符类之类的正则表达式表示法，例如 [0-9] 来匹配任何数字。所有正则表达式特殊字符都按照第 9.7.3 节中的规定工作，除了`.`上面提到的作为分隔符，`*`它被翻译成正则表达式符号`.*`，`?`被翻译成`.`，并且`$`被逐字匹配。您可以根据需要通过编写`?`for `.`、`(R+|)`for`R*`或`(R|)`for来模拟这些模式字符`R?`。`$`不需要作为正则表达式字符，因为模式必须匹配整个名称，这与正则表达式的通常解释不同（换句话说，`$`会自动附加到您的模式中）。`*`如果您不希望固定模式，请写在开头和/或结尾。请注意，在双引号内，所有正则表达式特殊字符都失去了它们的特殊含义，并按字面意思匹配。此外，正则表达式特殊字符在运算符名称模式（即 的参数`\do`）中按字面意思匹配。

* * *

## 回答 #2

> 赞同：320
> 
> 时间：2013-03-26T18:12:28.737

您可以从中选择表`information_schema`

```
SELECT * FROM information_schema.tables 
WHERE table_schema = 'public' 
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2015-05-28T14:39:51.940

或者，`information_schema`可以使用`pg_tables`：

```
select * from pg_tables where schemaname='public'; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-02-01T02:10:49.997

对于那些将来遇到这种情况的人：

如果您想查看多个模式的关系列表：

```
$psql mydatabase
mydatabase=# SET search_path TO public, usa;   #schema examples
SET
mydatabase=# \dt
              List of relations
 Schema |      Name       | Type  |  Owner
--------+-----------------+-------+----------
 public | counties        | table | postgres
 public | spatial_ref_sys | table | postgres
 public | states          | table | postgres
 public | us_cities       | table | postgres
 usa    | census2010      | table | postgres 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-03-29T09:22:23.130

如果您有兴趣列出**特定**模式中的所有表，我发现[这个答案](https://dba.stackexchange.com/a/114647)是相关的：

```
SELECT table_schema||'.'||table_name AS full_rel_name
  FROM information_schema.tables
 WHERE table_schema = 'yourschemaname'; 
```

# python - 在 selenium 中启动浏览器

> ID：15644153
> 
> 赞同：0
> 
> 时间：2013-03-26T17:56:59.610
> 
> 标签：python, selenium

我想用硒运行测试。在使用此文本“这是 WebDriver 服务器的初始起始页”启动 IE 8 后，IE 给我一个模式错误：

```
from selenium import webdriver
import time

browser = webdriver.Ie() # Get local session of IE
browser.get("http://www.google.com") # Load page
time.sleep(5)
browser.close() 
```

所以我尝试了 Chrome。

```
from selenium import webdriver
browser = webdriver.Chrome()
browser.get("http://www.google.com")
time.sleep(5)
browser.close() 
```

和 Selenium 错误，因为没有正确的 chrome.exe 应用程序路径。Chrome 已按预期安装... C:\Users\%USERNAME%\AppData\Local\Google\Chrome\Application\chrome.exe

在这里提供一点帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:19:29.003

你下载了[Chrome驱动](http://code.google.com/p/selenium/wiki/ChromeDriver)吗？

要进行设置，首先下载适当的预建服务器。确保服务器可以位于您的 PATH 或通过 webdriver.chrome.driver 系统属性指定其位置。

然后当你跑

```
from selenium import webdriver
browser = webdriver.Chrome()
browser.get("http://www.google.com")
time.sleep(5)
browser.close() 
```

它应该工作。

# c# - 异步调用多个方法

> ID：15644154
> 
> 赞同：1
> 
> 时间：2013-03-26T17:57:00.933
> 
> 标签：c#, threadpool

有没有办法同时调用多个方法？我有一个 winforms 应用程序，它在加载时会加载大量数据：

```
private void form1_Load(object sender, EventArgs e)
{
    LoadValues1();
    LoadValues2();
    LoadValues3();
    LoadValues4();
    LoadValues5();
    LoadValues6();
    LoadValues7();
    LoadValues8();
} 
```

这些方法检索数据并填充 DevExpress LookUpEdits（类似于 windows 下拉列表），所以它们看起来像这样：

```
DBContext dbContext = new DBContext();
ObservableCollection<string> values1 = 
    new ObservableCollection<string>((from i in dbContext.Items
                                      where i.Value1 != null
                                      && i.Value1.Length > 0
                                      orderby i.Value1
                                      select i.Value1).Distinct());

lookupValues1.Properties.DataSource = descModelYear;
DevExpress.XtraEditors.Controls.LookUpColumnInfoCollection colInfo = lookupValues1.Properties.Columns;
colInfo.Clear();
colInfo.Add(new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Column"));
colInfo[0].Caption = "Values 1"; 
```

其中一些方法需要一段时间才能完成，但它们都不是相互依赖的，所以我想我可以同时完成它们：

```
Task.Factory.StartNew(() => LoadValues1());
Task.Factory.StartNew(() => LoadValues2());
etc. 
```

但是当第二个任务运行时我不断收到错误，说不能从与创建它的线程不同的线程访问控件。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:06:03.143

正如其他人指出的那样，您需要确保在访问 UI 元素时需要确保您在正确阅读时进行操作。使用任务并行库很容易做到这一点，如下所示：

```
private TaskScheduler m_TaskScheduler = TaskScheduler.FromCurrentSynchronizationContext(); 
```

拥有 TaskScheduler 后，您可以安排任务在 UI 线程上运行，如下所示：

```
Task.Factory.StartNew(() => 
{
     LoadValues1();
}, CancellationToken.None, TaskCreationOptions.None, m_TaskScheduler); 
```

这里需要注意的是，在 UI 线程上运行您的所有任务可能仍会锁定您。我建议您创建某种类或一组集合，您可以将相关信息填充到其中，然后一旦所有数据都存在，您就可以在 UI 线程上调用另一个方法，该方法只是将您的控件绑定到数据或执行您需要的任何 UI 特定操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:01:42.133

操作 UI 控件时，您必须在创建控件的同一线程上执行此操作。在这种情况下，您应该只运行那些同步修改 UI 的方法。如果所有方法都修改了 UI，您应该拆分工作，以便在 UI 线程上*仅*调用修改 UI 的代码。

通常，您可以使用`InvokeRequired`来检查您是否在正确的线程上，并`Invoke`在 UI 线程上运行方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:20:18.747

您应该将您的逻辑分离到不同的单元中，并尝试将您的 UI 逻辑放在一个地方。

```
//private fields
private readonly DBContext _dbContext = new DBContext();

private Task<ICollection<string>> GetValues1()
{
    return Task.Run(() =>
            {
                return (from i in _dbContext.Items
                        where i.Value1 != null
                        && i.Value1.Length > 0
                        orderby i.Value1
                        select i.Value1)
                        .Distinct()
                        .ToList();
             };
}

private void LoadUIElements1(ICollection<string> values)
{
    var observableValues = new ObservableCollection<string>(values);

    lookupValues1.Properties.DataSource = descModelYear;
    DevExpress.XtraEditors.Controls.LookUpColumnInfoCollection colInfo = lookupValues1.Properties.Columns;
    colInfo.Clear();
    colInfo.Add(new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Column"));
    colInfo[0].Caption = "Values 1";
}

private async void form1_Load(object sender, EventArgs e)
{
    var tasks = new List<Task>();

    // Start each UI task so they will complete independently.
    var uiTask1 =  GetValues1()
          .ContinueWith(t =>
                LoadUIElements1(t.Result),
                CancellationToken.None,
                TaskCreationOptions.None,
                TaskScheduler.FromCurrentSynchronizationContext());
    tasks.Add(uiTask1);

    // Wait for all the tasks to complete
    Task.WaitAll(tasks.ToArray());
    tasks.Clear();
} 
```

# ebay-api - 如何在 eBay API 上获取交易详情

> ID：15644162
> 
> 赞同：0
> 
> 时间：2013-03-26T17:57:32.307
> 
> 标签：ebay-api

要从 eBay 获取卖家交易，我使用 API 函数[`GetSellerTransactions`](http://developer.ebay.com/DevZone/xml/docs/Reference/ebay/GetSellerTransactions.html)

它在响应的属性中返回我`TransactionType`数组（ ）`TransactionArray``GetSellerTransactionsResponseType`

在那个数组中，我有来自 eBay 的交易。

`TransactionType`当我有 eBay 交易 ID 值（如字符串：12345678900）时，有没有办法获取一个对象？

感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:22:36.090

好吧，好像做不到，可以[getOrderTransactions](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/GetOrderTransactions.html)

但您需要知道 OrderID、ItemID 或 SKU 值

# c - C 字符串数组 sizeof() 变化

> ID：15644163
> 
> 赞同：0
> 
> 时间：2013-03-26T17:57:33.590
> 
> 标签：c, string

```
void func(char *s[]){
    printf("s: %d\n", sizeof(s));
}

void caller(){
    char *a[2];
    for(int i = 0; i < 2; i++){
        a[i] = (char *)malloc(50 * sizeof(char));
    }
    strcpy(a[0], "something");
    strcpy(a[1], "somethingelse");

    printf("a: %d\n", sizeof(a));

    func(a);
} 
```

这输出

```
a: 16
s: 8 
```

为什么in和的输出`sizeof()`不同？另外，是否可以通过 获取数组中的数量？`caller()``func()``func``char *``sizeof`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:02:03.023

一个是两个字符指针的数组。另一个是指向指针数组的指针。它们的大小不一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:03:48.100

在 C/C++ 中，[Array 衰减为指针](http://web.archive.org/web/20081208122434/http://www.transcendentaxis.com/dthompson/blog/archives/9).char *s[] 是指针，指针的大小始终固定为 4 或 8（取决于机器）。

# visual-studio - MvcMiniProfiler.dll 与 MiniProfiler.dll

> ID：15644164
> 
> 赞同：0
> 
> 时间：2013-03-26T17:57:34.970
> 
> 标签：visual-studio, c#-4.0, mvc-mini-profiler

在 C# 项目中，MvcMiniProfiler.dll（1.7 版）和 MiniProfiler.dll（2.1）有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:07:18.507

它们都是同一个东西，MiniProfiler.dll (2.1) 是最新版本。该项目在 2.0 左右从 MvcMiniProfiler 重命名为 MiniProfiler；因为它现在也可以在 Ruby 上使用（即它不再只是一个“mvc”分析器了）。

请参见[此处](http://samsaffron.com/archive/2012/02/22/miniprofiler-2-0-almost-out-of-the-gate)，特别是*“不再 MVCMiniProfiler”部分*

# javascript - Azure 移动服务“push.apns.send”的成功回调

> ID：15644166
> 
> 赞同：2
> 
> 时间：2013-03-26T17:57:50.927
> 
> 标签：javascript, azure, push-notification, apple-push-notifications, azure-mobile-services

`push.apns.send`方法不调用`success`回调。因此，在成功执行的情况下，我们无法确定此操作何时完成。

这是我的代码（它是在其中一个数据表的插入事件上运行的服务器端脚本的一部分）：

```
 push.apns.send(message.deviceToken, {
    alert: message.alert,
    badge: message.badge,
    sound: message.sound,
    payload: {
      message: message.alert,
      appID: message.appID
    }
  }, {
    success: function(resp) {
      console.log(resp)
    },
    error: function(err) {
      console.error(err)
    }
  }) 
```

`error`回调有效。例如，当我通过 invalid 时`deviceToken`，我可以在日志中看到错误消息。但是在成功执行的情况下，日志中没有任何内容。似乎它根本不调用`success`回调。

此示例中未显示，但在我的情况下，我需要`success`回调来更改记录的状态并保存它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:50:08.117

不幸的是，这就是[Apple 推送通知服务 (APNS)](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)的工作方式。基本上，在幕后打开一个 TCP 连接到 APNS，并将与您的消息相对应的字节（正确格式化）发送到服务。如果推送成功，APNS 不会发回任何响应。如果没有，它可能会立即响应（这是调用错误回调的情况），也可能不会 - 稍后当您尝试访问反馈服务时，它*可能会*告诉您出现错误。

因此，鉴于没有可靠的方法告诉调用者`push.apns.send`推送成功，团队认为添加`success`回调没有意义（这会产生推送成功的错误印象）。

您可能想要使用的一种启发式方法是首先发送推送，然后等待 ( `setTimeout`) 一段时间，如果未调用错误回调，则假设推送成功。请注意，正如我上面提到的，它不是 100% 准确的，但对于您的场景来说可能就足够了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-11-26T11:29:51.293

在您的代码中更改以下内容将起作用。

```
success: function(data) {
  console.log(data)
}, 
```

# php - 从 MYSQL 填充 HTML 表并计算行数

> ID：15644167
> 
> 赞同：2
> 
> 时间：2013-03-26T17:57:50.970
> 
> 标签：php, mysql

我正在尝试用 mysql 数据填充 HTML 表，我在 Mysql 中有以下数据：

```
ID, IP, Referal 
```

我想创建一个表来显示引用列表以及它们发生的频率，例如：

```
ID,    IP,      Referal
1     1.1.1.1   google.com
2     2.2.2.2   google.com
3     3.3.3.3   test.com
4     4.4.4.4   another.com 
```

应该输出：

```
google.com     2
test.com       1
another.com    1 
```

我试过的是这样的：

```
<table class="table table-bordered table-primary">
<tbody>
<?php
$sql="SELECT * FROM traffic";
$result=mysql_query($sql);
?>
<?php while($row = mysql_fetch_array($result)) { ?>
<tr >
<td class="tc"><font face="Arial, Helvetica, sans-serif"><?php if($row['referal']==''){
echo "Empty Referal";
} else { echo $row['referal']; }?></font></td>

<td class="tc"><center><font face="Arial, Helvetica, sans-serif"><?php $referal = $row['referal'];
$sql="SELECT COUNT(*) FROM traffic WHERE referal = $referal";
$num_rows = mysql_num_rows($result);

echo "$num_rows";

?></font></center></td>

</tr>
                    <?php } ?>
            </tbody>
        </table> 
```

但这并没有单独计算每个引用，即使引用相同，它也会为每个条目创建一个新的表行。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:07:15.310

问题是您正在收集在最后一个查询中找到的行数，而不是您的计数查询：

```
$sql="SELECT COUNT(*) FROM traffic WHERE referal = '$referal'";
$num_rows = mysql_num_rows($result); 
```

首先，该`COUNT`命令将返回单行，其中单列包含找到的计数。您应该使用以下内容：

```
$sql="SELECT COUNT(*) as count FROM traffic WHERE referal = '$referal'";
$numResult = mysql_fetch_array(mysql_query($sql));
$num_rows = $numResult['count']; 
```

此外，非常不需要在要回显的变量周围加上引号。这就足够了：

```
echo $num_rows; //NOT echo "$num_rows"; 
```

**注意：**不要使用 MySQL_* 函数，因为它们在 PHP 5.5 中已被弃用。请改用 MySQLi_* 或 PDO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:09:08.220

您可能正在寻找`GROUP BY`SQL 的关键字：

```
SELECT Referal, COUNT(*) FROM traffic GROUP BY Referal 
```

这将为您提供您想要的表格，而无需在 php 中进行任何额外的 for 循环

# matlab - 在matlab中显示椭圆

> ID：15644176
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:58:12.217
> 
> 标签：matlab

我想编写代码以首先显示正方形，然后在正方形框内显示两个相互正交的椭圆。请帮我。我是 Matlab 的新手。我知道matlab的所有基础知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:27:49.590

以下代码应该可以工作：

```
pdeellip(0, 0, 1, 0.5, 0) % Draw firste ellipse with center (0,0) 
pdeellip(0, 0, 0.5, 1, 0) % Draw firste ellipse with center (0,0)
epderect([-1 1 -1 1]) % Parameters are [xMin xMax yMin yMax] 
```

您应该阅读有关绘制矩形和椭圆的文档：http: [//www.mathworks.com/help/pde/ug/pderect.html](http://www.mathworks.com/help/pde/ug/pderect.html) [http://www.mathworks.com/help/pde/ug/pdeellip.html](http://www.mathworks.com/help/pde/ug/pdeellip.html)

在那里，您将看到函数采用哪些参数，然后您可以更改参数以满足您的需要。

# excel - 使用公式将格式 0d 22h 41min 转换为任何格式的时间

> ID：15644177
> 
> 赞同：0
> 
> 时间：2013-03-26T17:58:14.290
> 
> 标签：excel, formula

我有一列数据，我想根据从最早到最晚的时间进行排序。

数据格式如下：

0 天 22 小时 41 分钟，

0 天 2 小时 3 分钟

等等。

最好的方法是什么？我假设提取数字 0、22 和 41，然后使用计算将其转换为分钟，然后我可以重新排序？

请建议最好的方法，如果可以的话，还有公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:01:37.567

假设总是存在天数小时和分钟，然后使用 A2 中的数据尝试 B2 中的此公式以转换为时间值：

`=SUM(MID(0&A2,FIND({"d","h","m"},0&A2)-2,2)/{1,24,1440})`

自定义格式 B2`[h]:mm`以显示总小时和分钟......然后您可以使用 B 作为“键”对两列进行排序

这将处理高达 99 天的值 - 对于更多天数，请尝试此版本

`=LEFT(A2,FIND("d",A2)-1)+SUM(MID(A2,FIND({"h","m"},A2)-2,2)/{24,1440})`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:56:11.583

您可以通过多种方式执行此操作，但可以在公式中使用一些简单的字符串操作和连接：

假设

```
A1 = 0d 22h 41min
A2 = 0d 2h 3min 
```

首先，您必须使用 MID() 函数提取 hh 和 mm

您可以通过使用 FIND() 函数搜索“d”、“h”和“m”出现的位置来提取它们之间的数字。

最后，您只需使用“：”将 22:41 连接在一起

对于 A1（放入另一列，即 B1）：

```
=MID(A1, FIND( "d", A1) + 2, SUM( FIND( {"d","h"}, A1) * {-1,1}) - 2 )&":"&IF(LEN(MID(A1, FIND( "h", A1) + 2, SUM( FIND( {"h","m"}, A1) * {-1,1}) - 2))=2,MID(A1, FIND( "h", A1) + 2, SUM( FIND( {"h","m"}, A1) * {-1,1}) - 2 ),"0"&MID(A1, FIND( "h", A1) + 2, SUM( FIND( {"h","m"}, A1) * {-1,1}) - 2 )) 
```

结果应该是

```
A1 = 0d 22h 41min
A2 = 0d 2h 3min

B1 = 22:41
B2 = 2:03 
```

需要注意的是，如果出现“3min”，我们使用 LEN() 函数来查看分钟值是 1 个字符还是 2 个字符长。如果是 2 个字符（即 41 个），请保持原样。如果它是 1 个字符（即 3），那么在它前面放一个 0 得到 03。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:19:14.570

假设您的数据在 A 列、单元格 A1、A2 等中，您可以使用以下公式提取天、小时和分钟，然后将所有内容相加：

首先，将天数提取到单元格 B1 中：

> =左（A1，查找（“d”，A1）- 1）

现在，进入 C1 的几个小时：

> =MID(A1, FIND("d", A1)+2, FIND("h", A1)-FIND("d", A1)-2)

进入 D1 分钟：

> =MID(A1, FIND("h", A1) + 1, FIND("min",A1)-FIND("h", A1)-1)

将天数总和放入 E1：

> =B1*24*60 +C1*24 +D1

现在对列 E 进行排序。

另一种可能性是使用正则表达式查找和替换数据：

寻找：

> ([0-9]{1,2})d ([0-9]{1,2})h ([0-9]{1,2})min

代替：

> =\1*24*60+\2*24+\3

[此页面](http://office.microsoft.com/en-us/word-help/find-and-replace-text-by-using-regular-expressions-advanced-HA102350661.aspx#_Toc286834991)描述了日期操作示例的替换行为。

# debugging - 调试器如何从断点恢复？

> ID：15644180
> 
> 赞同：4
> 
> 时间：2013-03-26T17:58:19.950
> 
> 标签：debugging, breakpoints

假设一个调试器（常见的 x86 ring3 调试器，如 olly、IDA、gdb...）将软件断点设置为虚拟地址 0x1234。

这是通过将 0x1234 处的任何操作码替换为“0xCC”来完成的。现在让我们假设被调试进程运行此 0xCC 指令并引发软件异常，并且调试器捕获到此异常。

调试器检查内存内容、寄存器并做一些事情......现在它想要恢复被调试进程。

这是据我所知。从现在开始，这是我的假设。

调试器恢复被调试者的原始操作码（已替换为 0xCC）以恢复执行。

调试器操纵被调试者的 CONTEXT 的 EIP 来指向恢复的指令。

调试器处理异常，现在，被调试者从断点恢复。

但调试器希望保留断点。调试器如何管理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-24T17:08:47.230

要直接回答原始问题，请参阅[GDB 内部手册](https://sourceware.org/gdb/5.1.1/onlinedocs/gdbint_3.html)：

> 当用户说要继续时，GDB 会恢复原来的指令，单步执行，重新插入陷阱，然后继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:12:44.683

简而言之，普通人的话：

由于进入调试状态是处理器`X86`中的原子操作，`ARM`因此处理器进入调试状态并退出调试状态与架构中的任何其他指令相同。参见[gdb 文档](http://www.gnu.org/software/gdb/documentation/)解释了它是如何工作的和可以使用的。

以下是 ARM 和 X86 规范的一些亮点：

在[ARM](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka4141.html)中：

> SW（软件）断点是通过在单步执行或执行代码之前用特殊的“断点”指令临时替换断点位置的指令操作码来实现的。当内核执行断点指令时，将被强制进入调试状态。SW 断点只能放在 RAM 中，因为它们依赖于修改目标内存。
> 
> 通过对观察点单元进行编程来设置 HW（硬件）断点，以监视内核总线是否从特定内存位置获取指令。可以在 RAM 或 ROM 中的任何位置设置硬件断点。在调试复制指令（分散加载）、修改或处理器 MMU 重新映射内存区域的代码时，应使用硬件断点。在这些情况下，软件断点是不可靠的，因为它们可能会丢失或被覆盖。

在[X86](http://www.nynaeve.net/?p=80)中：

> The way software breakpoints work is fairly simple. Speaking about x86 specifically, to set a software breakpoint, the debugger simply writes an int 3 instruction (opcode 0xCC) over the first byte of the target instruction. This causes an interrupt 3 to be fired whenever execution is transferred to the address you set a breakpoint on. When this happens, the debugger “breaks in” and swaps the 0xCC opcode byte with the original first byte of the instruction when you set the breakpoint, so that you can continue execution without hitting the same breakpoint immediately. There is actually a bit more magic involved that allows you to continue execution from a breakpoint and not hit it immediately, but keep the breakpoint active for future use; I’ll discuss this in a future posting.
> 
> 正如您可能想象的那样，硬件断点设置有特殊的硬件支持。特别是对于 x86，这涉及到一组特殊的可能鲜为人知的寄存器，称为“Dr”寄存器（用于调试寄存器）。这些寄存器允许您设置最多四个（对于 x86，这是高度特定于平台的）地址，当读取、读/写或执行时，将导致处理器抛出一个特殊异常，导致执行停止并控制转移到调试器

# javascript - 如何在脚本标签的文档中放置文本？

> ID：15644185
> 
> 赞同：0
> 
> 时间：2013-03-26T17:58:47.657
> 
> 标签：javascript, tags

我想知道是否可以通过使用脚本标签作为参考来使用 Javascript 编写文档，而不是使用找到的某些部分`document.getElementById("id")`或类似的东西。

示例：我有一个表单，当您在输入中输入值并按 Enter 时，它会将文本写入使用先前输入的值的文档。

现在，我知道继续将其发送到头部带有 onSubmit 的函数显然会更容易，但是通过这种设置方式，如果我可以用这种方式写出来，它的格式会更容易。所以，如果有人知道如何实现这一点，请告诉我，谢谢。

```
<div style="text-align: center; font-size: 15pt; padding-top: 70px;">
    <form onSubmit="reveal(this.a.value, this.b.value)">
        a = <input name="a"/>
        b = <input name="b"/>
    </form>
    <hr>
    <script>
        function reveal(a, b)
        {
            [math]a + b = c[math]
        }
    </script>
</div> 
```

你可以看到我到目前为止在这里。如果有人可以告诉我如何`[math]a + b = c[math]`使用脚本标签作为参考将其写入文档。

**Clarification Of Attempted Result：** `[math]a + b = c[math]`代表我想放在文档中的文本，到目前为止，我还没有设置任何东西来实际编写它，这就是为什么它只是坐在那里。我希望将其放置在脚本标记位置的文档中，即函数reveal() 周围的标记。如何将该文本放置在文档中周围脚本标记的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:24:22.130

我相信这就是你想要做的：找到`script`具有 function 的标签`reveal()`，然后在标签之前或之后插入字符串`script`。

如果是这种情况，那么试试这个：（为了简单起见使用jQuery）

```
var tag = $("script").filter(function () {
    return /reveal\(\)/.test(this.innerText);     //Find the script tag that has
});                                               // the function "reveal()"

tag.after("[math]a + b = c[math]");               //Insert your text

    - or -

$("<span>[math]a + b = c[math]</span>").replaceAll(tag);  //Replace it 
```

`[Demo](http://jsfiddle.net/DerekL/cDbGz/)`

* * *

PS：

如果您已经有`script`标签，那么为什么不这样做：

```
<script>
    function reveal(){
        blah();
    }
    document.write("[math]a + b = c[math]");    //The text will be inserted where
                                                //the script tag is located at
</script> 
```

# java - 我们可以在不知道它属于哪个对象的情况下从 xml 创建一个 java 对象吗

> ID：15644186
> 
> 赞同：1
> 
> 时间：2013-03-26T17:58:49.930
> 
> 标签：java, xml-serialization

我有一个 xml 内容，我不知道它属于哪个类。我需要使用 XML 中可用的信息创建一个动态 java 对象。有可能这样做吗？它可能是简单的 java 对象，然后我们可以使用 java 反射从该对象中获取值。例如，

```
<Employee>
  <name>Jack</name>
  <designation>Manager</designation>
  <department>Finance</department>
</Employee> 
```

所以，从这个 xml，我需要转换为 Employee 对象。但是，我的类路径中没有 Employee 类。是否可以使用提供的 XML 创建对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:24:18.303

您可以使用 JCodemodel 即时生成 java 类。[JCodeModel 在 1.6 + jdk 中随 JAX-B 一起提供，并且还作为托管在http://codemodel.java.net/](http://codemodel.java.net/)的单独项目分拆出来。

对于代码生成，您需要查找需要使用解析 API 的 DOM/SAX/Stax API 的 XML 节点类型。但是，如果只有 XML 可用，就不可能管理每个 Java 属性的数据类型。如果您可以只使用 String 属性，那么探索这条路径就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:17:29.527

```
File fXmlFile = new File("Employee.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(fXmlFile);

    //optional, but recommended
    //read this - http://stackoverflow.com/questions/13786607/normalization-in-dom-parsing-with-java-how-does-it-work
    doc.getDocumentElement().normalize();

    System.out.println("Root element :" + doc.getDocumentElement().getNodeName());

    NodeList nList = doc.getElementsByTagName("Employee");

    System.out.println("----------------------------");

    for (int temp = 0; temp < nList.getLength(); temp++) {

        Node nNode = nList.item(temp);

        System.out.println("\nCurrent Element :" + nNode.getNodeName());

        if (nNode.getNodeType() == Node.ELEMENT_NODE) {

            Element eElement = (Element) nNode;

            System.out.println("Name        :- " + eElement.getElementsByTagName("name").item(0).getTextContent());
            System.out.println("Designation :-" + eElement.getElementsByTagName("designation").item(0).getTextContent());
            System.out.println("Department  :- " + eElement.getElementsByTagName("department").item(0).getTextContent());

        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T18:11:46.577

您可以解析 XML 并生成对象的源代码。

使用您的示例，生成的类将是：

```
public class Employee {

    private String name;
    private String designation;
    private String department;

    public Employee(String name, String designation, String department) {
        this.name = name;
        this.designation = designation;
        this.department = department;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDesignation() {
        return designation;
    }

    public void setDesignation(String designation) {
        this.designation = designation;
    }

    public String getDepartment() {
        return department;
    }

    public void setDepartment(String department) {
        this.department = department;
    }

} 
```

您使用大量 StringBuilder 方法生成这样的代码。这是我的 Java 项目中的一种方法。此方法为针对数据库执行 SQL 的类生成执行选择尝试块。

```
protected static final String DELIM_LINE = System
        .getProperty("line.separator");

protected StringBuilder generateExecuteSelectTryBlock(String ps,
        StringBuilder variables) {
    StringBuilder sb = new StringBuilder();
    sb.append("\t\ttry {");
    sb.append(DELIM_LINE);
    sb.append("\t\t\tprepare");
    sb.append(ps);
    sb.append("Select(");
    if (variables != null) {
        sb.append(variables);
    }
    sb.append(");");
    sb.append(DELIM_LINE);
    sb.append("\t\t\tResultSet rs = ps");
    sb.append(ps);
    sb.append(".executeQuery();");
    sb.append(DELIM_LINE);
    sb.append("\t\t\treturn rs;");
    sb.append(DELIM_LINE);
    sb.append("\t\t} catch (SQLException e) {");
    sb.append(DELIM_LINE);
    sb.append("\t\t\tif (e.getErrorCode() == +100) return null;");
    sb.append(DELIM_LINE);
    sb.append("\t\t\tDB2Connection.sqlException(e);");
    sb.append(DELIM_LINE);
    sb.append("\t\t}");
    sb.append(DELIM_LINE);
    sb.append("\t\treturn null;");
    sb.append(DELIM_LINE);
    return sb;
} 
```

# asp.net-mvc - 路径中的非法字符。while 捆绑 javascript 文件

> ID：15644197
> 
> 赞同：2
> 
> 时间：2013-03-26T17:59:41.270
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundling-and-minification

我正在尝试将我的 javascrip 文件和 css 文件捆绑到我的 MVC 项目中。添加它们时抛出异常。

```
Illegal characters in path. 
  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

 Exception Details: System.ArgumentException: Illegal characters in path.

Source Error: 

Line 9:          public static void RegisterBundles(BundleCollection bundles)
Line 10:         {
Line 11:             bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-{version}.js",
Line 12:             "~/js/bootstrap.js",
Line 13:            "~/js/jquery.flexslider-min.js",
                    "~/js/jquery.isotope.js",
                    "~/js/jquery.fancybox.pack.js?v=2.1.0",
                    "~/rs-plugin/js/jquery.themepunch.plugins.min.js",
                    "~/rs-plugin/js/jquery.themepunch.revolution.min.js",
                    "~/js/revolution.custom.js",
                    "~/js/custom.js"
                    ));

Stack Trace: 

[ArgumentException: Illegal characters in path.]
   System.IO.Path.CheckInvalidPathChars(String path, Boolean checkAdditional) +10631190
   System.Security.Permissions.FileIOPermission.CheckIllegalCharacters(String[] str) +30
   System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList) +97
   System.Security.Permissions.FileIOPermission..ctor(FileIOPermissionAccess access, String path) +63
   System.Web.InternalSecurityPermissions.PathDiscovery(String path) +29
   System.Web.HttpRequest.MapPath(VirtualPath virtualPath, VirtualPath baseVirtualDir, Boolean allowCrossAppMapping) +149
   System.Web.HttpServerUtility.MapPath(String path) +104
   System.Web.Optimization.BundleTable.<get_MapPathMethod>b__0(String virtualPath) +67
   System.Web.Optimization.ItemRegistry.Include(String[] virtualPaths) +644
   System.Web.Optimization.Bundle.Include(String[] virtualPaths) +64
   IntensifyTech.IntensifyTechConfig.RegisterBundles(BundleCollection bundles) in c:\Users\sxxx\SkyDrive\Trunk\IntensifyTech\IntensifyTech\App_Start\IntensifyTechConfig.cs:11
   IntensifyTech.MvcApplication.Application_Start() in c:\Users\sxxxx\SkyDrive\Trunk\IntensifyTech\IntensifyTech\Global.asax.cs:24

[HttpException (0x80004005): Illegal characters in path.]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859725
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +336
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +296

[HttpException (0x80004005): Illegal characters in path.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:30:08.920

是的，它绝对是这个项目：“~/js/jquery.fancybox.pack.js?v=2.1.0”。这是一个虚拟路径，而不是 url，所以 '?' 在这种情况下，字符是非法的。

# c# - 如何在c#.net中使用.avi扩展在视频中添加声音

> ID：15644200
> 
> 赞同：0
> 
> 时间：2013-03-26T17:59:49.640
> 
> 标签：c#, .net, audio, video

我正在使用 c#.net 开发视频水印项目。我正在从 .bmp 文件创建视频。

我可以使用 .avi 扩展名中的 avi 管理器创建视频，但无法向其中添加声音 视频是在没有声音的情况下创建的....获取 .wav 扩展名的声音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:34:41.947

看看这个，可能对你有用：

[http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

# c# - 使用敏捷包在 html 文档中读取、分组和排序节点

> ID：15644201
> 
> 赞同：0
> 
> 时间：2013-03-26T17:59:54.127
> 
> 标签：c#, html, html-agility-pack

我正在尝试构建一个类，该类将基于另一个网站读取、分组和排序 html 文档。

我将展示我到目前为止所拥有的东西。这是一个网页是如何构建的示例（请记住，它只是“如何”构建的，我已经重写了整个内容）：

```
<tr>
            <td id="ab100_ab100_ab100_Main_Sub_Sub_objComponent" class="compContainer">
                <table class="objDetails" style="position: relative; margin: auto;">
 <tr>
<div class="smallSetup" style="margin-top: 10px;">
    <b class="ft"><b></b></b>
    <div id="ab100_ab100_ab100_Main_Sub_Sub_firstProp" class="row">
       <div class="label">
           First Name:</div>
       <div class="value">
           Albert Trebla</div>
    </div>

    <div id="ab100_ab100_ab100_Main_Sub_Sub_secondProp" class="row">
        <div class="label" style="line-height:25px;">
           Second Year:</div>
        <div class="value">
           <img src="/Setup/Images.ashx?size=medium&amp;name=5&amp;type=symbol" alt="5" align="absbottom" /><img src="/Setup/Images.ashx?size=medium&amp;name=W&amp;type=symbol" alt="Second" align="absbottom" />
     </div>
     <div id="ab100_ab100_ab100_Main_Sub_Sub_thirdProp" class="row" style="height:15px; position:relative;">
         <div class="label" style="font-size:.7em;">
             Classy Stuff:</div>
         <div class="value">
             7<br /><br /></div>
     </div>

     <div id="ab100_ab100_ab100_Main_Sub_Sub_fourthProp" class="row">
         <div class="label">
             Weather:</div>
         <div class="value">
             Cloudy  — Might Rain</div>
         </div>
     <div id="ab100_ab100_ab100_Main_Sub_Sub_fifthProp" class="row">
         <div class="label">
             Front Text:</div>
         <div class="value">
             <div class="frontTextBox">Opened</div><div class="frontTextBox">The shop is opened when the bridges are lowered.</div></div>
     </div>
     <div id="ab100_ab100_ab100_Main_Sub_Sub_sixthProp" class="row">
         <div class="label">
              Flavor:</div>
         <div id="ctl00_ctl00_ctl00_MainContent_SubContent_SubContent_FlavorText" class="value">
              <div class="frontTextBox"><i>"This taste good!"</i></div></div>
     </div> 
```

等等。

现在这是我在应用程序中构建代码的方式：

```
HtmlWeb loader = new HtmlWeb();
HtmlDocument doc = loader.Load(stringUrl);
HtmlNode parentNode = doc.GetElementById(ab100_ab100_ab100_Main_Sub_Sub_objComponent);

HtmlNodeCollection allNodes = parentNode.SelectNodes(".//div[@class='row']"); 
```

我有我的 div 集合，但我无法进行下一步。首先要了解的是，上面的html代码的布局会发生变化，所以有时firstProp不会显示，有时是第六个prop，以此类推。

所以我想检查节点的属性是否是“标签”：

```
foreach (HtmlNode htmlNode in allNodes)
{
    if (htmlNode.Attributes["class"].Value == "label")
    {

    }
} 
```

但我不知道如何检查后的值，因为下一个兄弟是一个空的 div。而且我不太了解 HtmlAgilityPack 是如何工作的，所以我想知道是否有更简单的方法来获得它。

谁能告诉我如何进行，或者我做错了什么以及如何纠正？

*** 编辑 ***

我改变了这一行：

```
HtmlNodeCollection allNodes = parentNode.SelectNodes(".//div[@class='row']"); 
```

所以现在我的收藏只限于我会得到的 div。但是当我得到一个带有“标签”类的 div 时，我仍然需要阅读，读取它的值（例如：Front Text），如果那是 Front Text，则获取下面的带有“value”类的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:25:51.930

我建议你学习一点 Html Agility Pack 支持的[XPATH](http://www.w3schools.com/xpath/)，它允许对 HTML DOM 进行简洁的查询。例如，下面的代码：

```
 HtmlDocument doc = new HtmlDocument();
    doc.Load("test.htm");

    HtmlNode node = doc.GetElementbyId("ab100_ab100_ab100_Main_Sub_Sub_objComponent");
    foreach (HtmlNode row in node.SelectNodes(".//div[@class='row']"))
    {
        Console.Write(row.SelectSingleNode("div[@class='label']").InnerText.Trim());
        Console.WriteLine(row.SelectSingleNode("div[@class='value']").InnerText.Trim());
    } 
```

会输出这个：

```
First Name:Albert Trebla
Second Year:
Classy Stuff:7
Weather:Cloudy  - Might Rain
Front Text:OpenedThe shop is opened when the bridges are lowered.
Flavor:"This taste good!" 
```

如果您在值或标签 div 中需要 HTML，那么您可以再次从那里发出 XPATH 查询。

# sql-server - 如何自动填充 SQL Server 列

> ID：15644204
> 
> 赞同：2
> 
> 时间：2013-03-26T18:00:18.870
> 
> 标签：sql-server, tsql

我的 SQL Server 表有一个列定义为：

```
TicketNo varchar(5) 
```

此表中的行由来自不同来源的一些批量加载文件插入。

现在，取决于谁准备了批量加载输入文件，有时`TicketNo`有前导 0，有时没有。

如何对表强制执行 INSERTS，以便`TicketNo`始终使用前导零设置，例如：

```
TicketNo = RIGHT('00000'+TicketNo, 5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:09:26.980

您可以使用带有检查约束的 char(5) 列。

```
create table YourTable
(
  TicketNo char(5) check (patindex('%[^0-9]%', TicketNo) = 0)
) 
```

更新：

使用[Martin Smith的](https://stackoverflow.com/users/73226/martin-smith)[这个答案](https://dba.stackexchange.com/a/34731/2103)，它可能看起来像这样，以确保只允许 0-9。

```
create table YourTable
(
  TicketNo char(5) collate Latin1_General_CS_AS check (patindex('%[^0123456789]%', TicketNo) = 0) 
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:08:37.133

你如何执行它是一个棘手的问题。我的第一个方法是创建一个存储过程并强制所有插入通过它进行。然后你可以使用rs的解决方案。

除此之外，您可以创建一个插入/更新触发器来检查前导零。

# php - 如何制作重定向 PHP

> ID：15644209
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:00:52.310
> 
> 标签：php, mysql, redirect

我试图检查数据库中是否存在 varchar “race”，如果它为空，则重定向到页面。这是我的代码，我确保 var 为空，但即使在重新加载时它什么也不做我如何进行 php 重定向

```
 <?php
    $check_bone_query = mysql_query("SELECT bone FROM users WHERE name = '".$user->name."'");
    {
    if($check_bone_query == NULL){
    header('Location: /bone');
    }  
`   }  
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:04:03.230

您没有获取任何记录，所以可能`mysql_fetch_assoc`先使用？

```
$row = mysql_fetch_assoc($check_bone_query);
if (is_null($row)) { //or use empty()
  header('Location: /bone'); exit;
} 
```

PS摆脱`MySQL_.*`函数使用**PDO**或**MySQLi**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:05:22.600

您是否在页面上加载任何内容（html 代码或回显）之前执行了 header 语句，如果您已经在响应的正文中进行了某些操作，则无法使用 header()

所以：

```
<html>
 some html
</html>
<?php header(location: 'your new location'); ?> 
```

不会工作，但是：

```
 <?php header(location: 'your new location'); ?>
 <html>
  some html
 </html> 
```

将要

# java - 带有 UDP 数据包的字符串 if 语句表现得很奇怪

> ID：15644210
> 
> 赞同：0
> 
> 时间：2013-03-26T18:00:56.713
> 
> 标签：java, android, networking, wifi, adb

我有一个连接的客户端，它将向主机发送一个字符串，以便主机知道如何处理该数据包。这是客户端的启动方式

```
public void connectToServer()
{
    //Send a connect message to the server
    try {
        socket = new DatagramSocket( port );
        byte[] bufer = new byte[256];
        String msg = "connect";
        int msgLength = msg.length();
        bufer = msg.getBytes();
        InetAddress address;
        address = InetAddress.getByName("192.168.1.59");
        DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
        socket.send( p );

    } catch (UnknownHostException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //Receive the message back
    byte[] buf = new byte[256];
    DatagramPacket packet = new DatagramPacket( buf, buf.length );
    try 
    {
        socket.receive( packet );
    } 
    catch (IOException e) 
    {
        Log.d(TAG, "Error with receiving data");
        e.printStackTrace();
    }

    String data = new String( buf, 0, packet.getLength() );
    //ID = Integer.parseInt( data );

    Log.d(TAG, "Data received was :" + ID);
} 
```

客户端连接后，它将继续运行

```
while( true )
    {
        //Tell the server to give position of players
        if( host == false)
        {
            try {
                if(socket == null)
                {
                    socket = new DatagramSocket( port );
                }
                byte[] bufer = new byte[256];
                String msg = "position";
                int msgLength = msg.length();
                bufer = msg.getBytes();
                InetAddress address;
                address = InetAddress.getByName("192.168.1.59");
                DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
                socket.send( p );

            } catch (UnknownHostException e2) {
                // TODO Auto-generated catch block
                e2.printStackTrace();
            } catch (SocketException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            byte[] buf = new byte[256];
            DatagramPacket packet = new DatagramPacket( buf, buf.length );
            try 
            {
                socket.receive( packet );
            } 
            catch (IOException e) 
            {
                Log.d(TAG, "Error with receiving data");
                e.printStackTrace();
            }

            String data = new String( buf, 0, packet.getLength() );
            Log.d(TAG, "Data received is in run method:" + data);
            //Take the data from the server and use it
            //String[] pos = data.split(":");
            //assets.get(0).setPosition( Integer.parseInt( pos[0] ), Integer.parseInt( pos[1] ) );
            //ID = Integer.parseInt( data );
        }
    } 
```

现在服务器像这样运行

```
protected Object doInBackground(Object... params) {
    Log.d(TAG, "Ip address used:" + getLocalIPAddress() );
    InetAddress client = null;
    boolean run = true;
    String data = "";
    while( run )
    {
        Log.d(TAG, "Data value:" + data);
        if( data.equalsIgnoreCase( "" ) )
        {
            String msg = "waiting";
            int msgLength = msg.length();
            byte[] message = msg.getBytes();
            DatagramPacket p = new DatagramPacket( message, msgLength, client, port );
            try 
            {
                socket.send( p );
            } 
            catch (IOException e2) 
            {
                Log.d(TAG, "Error with sending");
                e2.printStackTrace();
            }
        }

        //Send some data
        if( data.equalsIgnoreCase( "connect" ) );
        {
            Log.d(TAG, "ID send");
            players++;
            String msg = String.valueOf( players );
            int msgLength = msg.length();
            byte[] message = msg.getBytes();
            DatagramPacket p = new DatagramPacket( message, msgLength, client, port );
            try 
            {
                socket.send( p );
            } 
            catch (IOException e2) 
            {
                Log.d(TAG, "Error with sending");
                e2.printStackTrace();
                data = "";
            }
        }

        if( data.equalsIgnoreCase( "position" ) )
        {
            Log.d(TAG, "position send");
            String msg = String.valueOf( assets.get(0).returnPosX() + ":" + assets.get(0).returnPosY() );
            int msgLength = msg.length();
            byte[] message = msg.getBytes();
            DatagramPacket p = new DatagramPacket( message, msgLength, client, port );
            try 
            {
                socket.send( p );
            } 
            catch (IOException e2) 
            {
                Log.d(TAG, "Error with sending");
                e2.printStackTrace();

            }
        }

        data = "";

        //Receive some data
        byte[] buf = new byte[256];
        DatagramPacket packet = new DatagramPacket( buf, buf.length );
        try 
        {
            socket.receive( packet );
        } 
        catch (IOException e) 
        {
            Log.d(TAG, "Error with receiving data");
            e.printStackTrace();
        }

        data = new String( buf, 0, packet.getLength() );
        client = packet.getAddress();

        //Log.d(TAG, "Data received was :" + data);

    }
    return null;
} 
```

现在这确实有效，但不是 IF 语句，如 .data.equalsIgnoreCase("position")、.data.equalsIgnoreCase("connect") 和 data.equalsIgnoreCase("")，服务器将发送到客户这个

```
data received is in run: 250:300
data received is in run: 51 (depends on how long the client has connected for) 
```

但服务器不应该再发送 ID，只是我的对象的位置是 250:300

这是一个更大的日志，所以你明白

```
03-26 17:53:53.814: D/gameClient(20073): Data received is in run method:928
03-26 17:53:53.814: D/gameClient(20073): Data received is in run method:250:300
03-26 17:53:53.824: D/gameClient(20073): Data received is in run method:929
03-26 17:53:53.834: D/gameClient(20073): Data received is in run method:250:300
03-26 17:53:53.844: D/gameClient(20073): Data received is in run method:930
03-26 17:53:53.854: D/gameClient(20073): Data received is in run method:250:300
03-26 17:53:53.864: D/gameClient(20073): Data received is in run method:931
03-26 17:53:53.874: D/gameClient(20073): Data received is in run method:250:300
03-26 17:53:53.884: D/gameClient(20073): Data received is in run method:932
03-26 17:53:53.894: D/gameClient(20073): Data received is in run method:250:300
03-26 17:53:53.914: D/gameClient(20073): Data received is in run method:933
03-26 17:53:53.914: D/gameClient(20073): Data received is in run method:250:300
03-26 17:53:53.934: D/gameClient(20073): Data received is in run method:934
03-26 17:53:53.944: D/gameClient(20073): Data received is in run method:250:300
03-26 17:53:53.954: D/gameClient(20073): Data received is in run method:935 
```

我还对服务器进行了跟踪，它在连接后只接收来自客户端的位置，仍然对为什么它不断发送 ID 感到困惑？？？

# java - Yummly API 在 JSON 响应中返回奇怪的字符（Android）

> ID：15644211
> 
> 赞同：0
> 
> 时间：2013-03-26T18:01:00.410
> 
> 标签：java, android, json, httpresponse, http-get

我使用 html 查询在我的 Android 应用程序中访问 Yummly 数据库以获取食谱：

```
http://api.yummly.com/v1/api/recipes?_app_id=MY-APP-ID_app_key=MY-APP-KEY&q=KEYWORD 
```

尽管他们的文档声明 GET 请求以 UTF-8 格式返回，但我在代码中发现了一些奇怪的字符，例如：`Pots de Creme a l&rsquo;Orange`.

问题不仅限于我的 Android 应用程序，在 Chrome 浏览器中也出现了同样的问题。有趣的是，当我尝试在 Internet Explorer 中打开它时，它似乎没问题：`Pots de Creme a l’Orange`，但还有其他类似的东西`crĂ¨me fraĂ®che`，在 Chrome 中有时显示为`Cr&egrave;me Fra&icirc;che`，有时正确显示为`Crème Fraîche`.

使它们以不同方式解释响应的浏览器之间有什么区别？而且，更重要的是，在 Android/Java 中可以做些什么来消除这个问题？你有什么想法？

在 Android 中，我使用 HttpGet 从服务器获取数据，然后将其传递给 JSONObject。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:54:50.887

我为 Yummly 工作。我们处理这些事情的方式不一致，但现在应该修复。

作为解释，&; 语法是用于转义某些字符的 SGML/XML/HTML 实体。例如，请参见[此处](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)。对于大多数浏览器的用户来说，文档是否包含 & 或 & 没有区别，所以我们在规范化它们方面不够彻底。但对于像您这样的应用程序，显然它确实有所作为，我们添加了更彻底的规范化。您从 API 获得的所有内容都不应该是没有任何 HTML 实体的 UTF8。

仅供参考，[Apache Commons Lang](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringEscapeUtils.html)为这类事情提供了一个方便的 Java 实用程序

# python - 在多维数组中查找连续值 - python

> ID：15644217
> 
> 赞同：4
> 
> 时间：2013-03-26T18:01:08.180
> 
> 标签：python, arrays, loops

我真的对python完全陌生。我需要一些有关多维数组的帮助。我正在为剧院制作座位预订系统。（只是练习）。我已经建立了一个 5 行乘 10 个座位的矩阵。我真正需要做的就是为每个座位分配“可用”或“不可用”。我显然可以做到这一点，但我不知道该怎么做是能够搜索或循环一排，看看是否有 6 个座位相邻。任何帮助都会很棒。请记住，我对 python 完全陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:23:08.723

我能想到的最简单的方法是遍历行，将行号跟踪为`index`.

然后，我们计算可用座位，直到我们连续找到六个或遇到一个不可用的座位（如果发生这种情况，我们会重置计数）。

```
seats = [[True, True, True, False, True, True, True, False, False, True],
         [True, True, True, True, True, True, True, False, False, True],
         [True, True, True, False, True, True, True, False, False, True],
         [True, True, True, False, True, True, True, False, False, True],
         [True, True, True, True, True, True, True, False, False, True]]

for index, row in enumerate(seats):
    consecutive_seats = 0
    for seat in row:
        if seat:
            consecutive_seats += 1
            if consecutive_seats >= 6:
                print('There are at least six seats available on row', index)
                break
        else:
            consecutive_seats = 0 
```

## 进一步说明

1.  python[`enumerate`](http://docs.python.org/3.3/library/functions.html#enumerate)函数允许您遍历 的序列`seats`，返回一个索引和该索引处的当前项。或者，您可以向它传递一个参数来设置起始索引（因此，如果您希望您的座位行从一个开始，您可以使用以下命令：

    ```
    for index, row in enumerate(seats, start=1): ... 
    ```

    事实上，这里发生的事情的细节很有趣：`enumerate`返回一个包含两个项目[`Tuple`](http://docs.python.org/3.3/tutorial/datastructures.html#tuples-and-sequences) （将其视为一个*不可变*的- 不可更改的 - 列表），您将其*解包*到`index`和`row`. 然后，您可以像使用其他任何变量一样使用这两个变量。

2.  对于每一对索引和行，您遍历该行并检查是否`seat`是`True`（您可以但不应该写`seat == True`——这是冗余信息）。如果是`True`，您认为它可用并将可用连续座位的计数器增加一个。

3.  紧接着，你需要检查你是否找到了足够的空闲座位，在这种情况下你可以[`break`](http://docs.python.org/3.3/reference/simple_stmts.html#break)跳出循环，换句话说，你跳过了这一排的其余座位，因为你已经知道了足够多的座位是自由，并继续外循环的下一次迭代，这将产生下一行索引和行。

4.  另一方面，如果座位是`False`（不可用），您将连续可用座位的计数重置为零，但您继续检查该行的其余部分。

## 建议的改进

*   创建一个类`Seat`并赋予它一个属性`is_available`
*   引入常量以摆脱幻数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:20:28.503

假设您的座位安排类似于以下

```
seats=[   [1, 0, 0, 0, 1, 1, 1, 0, 1, 0],
    [0, 0, 0, 1, 1, 0, 1, 1, 1, 0],
    [0, 0, 1, 1, 1, 0, 1, 0, 0, 1],
    [0, 0, 1, 0, 0, 0, 0, 0, 1, 1],
    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0]] 
```

我的建议不是维护一个嵌套列表，而是维护一个字符串列表。通过字符串搜索来搜索模式（这里是 '0' 或 '1' 的序列，甚至像中间座位或末端座位这样复杂的东西）更快更容易。即使对于复杂的搜索，您也可以使用正则表达式

建议的数据结构

```
seats=[   '1000111010',
    '0001101110',
    '0011101001',
    '0010000011',
    '0000000100'] 
```

现在要搜索连续 6 个空座位，您必须搜索`'0'*6`类似

```
>>> any('0'*6 in row for row in seats)
True
>>> next((i,row.index('0'*6)) for i,row in enumerate(seats) if '0'*6 in row )
(4, 0) 
```

解释

`next((i,row.index('0'*6)) for i,row in enumerate(seats) if '0'*6 in row )`从生成器表达式返回第一项。假设您了解内置

[enumerate](http://docs.python.org/2/library/functions.html#enumerate)：返回 (index , element) 的元组列表

该表达式可以等效地写为

```
for i,row in enumerate(seats):
    if '0'*6 in row
       print (i,row.index('0'*6)
       break 
```

`any('0'*6 in row for row in seats)`可以等效地写为

```
def search(seats):
    for row in seats:
        if '0'*6 in row:
            return True
    return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:28:09.513

您可以考虑使用[稀疏矩阵](http://docs.scipy.org/doc/scipy/reference/sparse.html)。

并像这样迭代它： [https ://stackoverflow.com/a/4319159/1031417](https://stackoverflow.com/a/4319159/1031417)

# php - 计数是PHP中的“要求”吗？

> ID：15644223
> 
> 赞同：0
> 
> 时间：2013-03-26T18:01:40.053
> 
> 标签：php, loops, foreach

我做了一些研究，但我还没有找到我的问题的直接答案。

**在循环之前进行计数是一种好方法吗？**

这样做更好吗：

```
if(count(array) > 0){
    foreach(array as entry){

    }
} 
```

或者

```
foreach(array as entry){

} 
```

从我的角度来看，计数是一个额外的步骤，因为如果数组为空，我们将不会循环。

你怎么看待这件事 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:03:55.313

如果数组中没有任何内容，则 foreach 循环将循环 0 次。检查前面的计数是不必要的。根据 $array 的可能值，您可能会更好地测试 is_array() 因为如果 $array 不是数组，foreach 将引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:27:27.723

让我们尝试一些简单的测试；

**测试 1**

```
$array = "string";
foreach ( $array as $entry ) {
} 
```

输出

```
Warning: Invalid argument supplied for foreach() 
```

**测试 2**

```
$array = "string";
if (count($array) > 0) {
    foreach ( $array as $entry ) {
    }
} 
```

输出

```
Warning: Invalid argument supplied for foreach() 
```

**测试 3**

```
$array = "string";
if (is_array($array) || $array instanceof Traversable) {
    foreach ( $array as $entry ) {
    }
} 
```

输出

```
 No error 
```

您不必一直验证......但是当您不确定该值时......您应该在循环之前检查它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:04:26.013

如果你去，`count()`它类似于做`is_array()`. 如果它不是数组，Foreach 会给你一个错误。

一个更好的方法，imo，是`if(!empty($array)){`

# php - MySQL检索用户没有用户结果集的用户

> ID：15644224
> 
> 赞同：0
> 
> 时间：2013-03-26T18:01:40.900
> 
> 标签：php, mysql, sql, database

我有两个表用户和父母。

1.  每个用户都有一个唯一的 id 和一个父 id（这是将他推荐到网站的人）。
2.  root 用户的父 id 为 0。
3.  具有相同父 ID 的用户是该 ID 的子代

**用户**
*id
姓名
电子邮件*

**父母**
*id
parentId
加入金额*

我想要一个查询，我将在其中给出**父母的 id。**

此查询应返回其所有子项以及以下信息

id，姓名，电子邮件，joiningAmount，（**此用户拥有的孩子数**）

是否可以在一个查询中执行此操作？
如果不是，我应该如何规范化数据库以便在一个查询中完成此操作。
非常感谢任何帮助。

**编辑：**

users 表将包含所有用户信息

假设这是用户表。

```
身份证 姓名 电子邮件
1 管理员 admin@web.com
2 约翰·约翰@web1.com
3 拉里·拉里@web2.com
4 琼斯 Jone@web3.com

```

只有通过推荐才能注册。
由于管理员没有被任何人推荐，因此他的 parentId 为 0。
假设管理员引用了 larry 和 john（因此他们的父 id 为 1）并且 john 从他的推荐中带来了另一个用户，该用户的名字是他的 jone（因此他的父 id 是 john 的）然后是父母表应该是这样的。

加入金额现在可以忽略，因为它只是申请的一部分。

```
id parentId joinAmount
1 0 1000
2 1 1000
3 1 1000
4 2 1000

```

所以现在我想要一个查询，如果我传递一个 1（管理员 id）的 id，它应该返回他孩子的

```
id，姓名，电子邮件，joiningAmount，（**此用户拥有的孩子数**）

2, John, John@web1.com, 1000, 1（因为 john 有 1 个孩子）
3, 拉里, Larry@web2.com, 1000, 0

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:34:31.820

基于[Unamata Sanatarai](https://stackoverflow.com/users/2119863/unamata-sanatarai)的回答，这里是查询：

```
SELECT users.id, users.name, users.email, users.joiningAmount, 
(SELECT COUNT(*) FROM users AS children WHERE children.parent_id = users.id ) AS children_count 
FROM users WHERE users.parent_id = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:13:28.510

Assuming that you don't change the tables the way suggested (which you probably should) then the appropriate query would be:

```
SELECT users.id, users.name, users.email, parents.joiningAmount,
    (SELECT COUNT(*) FROM parents P WHERE P.parentId=users.id) 
FROM users,parents
WHERE users.id=parents.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:17:05.287

我建议像这样将它放入一个数据库中

```
users
- id
- parent_id
- name
- email
- joiningAmount 
```

这样，您只有一个数据库，并使用以下查询检索所有内容：

```
SELECT id, name, email, joiningAmount FROM users WHERE parent_id = 3 
```

# php - PHP/prestashop：浏览器中显示奇怪的 HTML/XML 错误

> ID：15644230
> 
> 赞同：0
> 
> 时间：2013-03-26T18:01:51.877
> 
> 标签：php, xml, prestashop, html-rendering

我有一个运行良好的 PHP/prestashop (1.5.0.17) 应用程序，突然间，当我的托管服务提供商更改（可能他更改了一些服务器 php 选项）时，我开始收到以下错误：

```
This page contains the following errors:
error on line 636 at column 127: Specification mandate value for attribute gagarin
Below is a rendering of the page up to the first error. 
```

这是第 636 行：

```
<p class="product_desc"><a href="http://modele-ad9bis.pl/lokomotywy-h0/546-br-120-dr-piko.html" title="Lokomotywa spalinowa typu BR 120 zarządu kolei wschodnioniemieckich DR produkcji PIKO- kultowy " gagarin".">Lokomotywa spalinowa typu BR 120 zarządu kolei wschodnioniemieckich DR produkcji PIKO- kultowy "gagarin".</a></p> 
```

所以他抱怨标签`"`内的`p`标志？我不明白。它与 HTML 文档定义有关吗？这是文档的标题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl"> 
```

当浏览器无法解析时，这看起来像 XML 解析错误，但它在 HTML 文档中......

当然，对于不同的页面，不同的行会有不同的错误。它突然开始抱怨——我不知道 PHP 服务器选项是否发生了变化或浏览器发生了什么变化（有一天所有浏览器都开始验证整个 XML？）。我 100% 确定我没有更改代码中的任何内容，并且我确信在过去的几个月里，商店运行良好，浏览器没有显示类似的内容。有人可以提示这里出了什么问题，我该如何解决？

* * *

总而言之 - 这些是我的问题：

1.  我该怎么做才能解决这个停止渲染的丑陋错误？
2.  发生了什么——原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:47:04.430

您的页面肯定是以“application/xhtml+xml”而不是“text/html”的形式发送的。

在这种情况下，您的浏览器会检查 HTML 的 xml 语法并显示这些错误。

如果您的提供商没有更改配置中的 mime 类型，则可能是安装了 mod_pagespeed。该模块以“application/xhtml+xml”的形式发送内容。

# html - 防止文本在图像后面移动

> ID：15644233
> 
> 赞同：1
> 
> 时间：2013-03-26T18:01:53.733
> 
> 标签：html, css, text, image

我有一个页面，左侧是图像，右侧是文本。当调整浏览器窗口的大小或使用较小的分辨率时，文本会位于图像的后面。我希望文本始终在图像旁边，而不是在它后面。

有什么建议么？[http://jsfiddle.net/TYpCq/](http://jsfiddle.net/TYpCq/)（jsfiddle上的布局有点不对劲。没关系，我只需要知道如何防止文本落后于图像）

HTML：

```
<div id="indishopmain">

<p><strong>Test shop image</strong> by <strong>no one</strong></p>

<div id ="canvasshopwrap">
<div id="canvasshophead">
<p>Blabla</p>
</div>

<div id="canvasshoptext"</p>
<p>The high-quality print on a <span style="color:#01A07E;font-family:Cusmyrb;">stretched canvas</span> lets the artwork just pop of the wall, it’s almost magical. It’s easy to hang up and will keep it’s color brillance as well as the shape for a long time. We are sure, you will love it forever. Note: the size 20 x 20cm comes with a complementary easel.</p>
</div>

</div>

<div id="indishopimg">
<img src="frontgallery/1.jpg" alt="gallery image 1" width="500px" />
</div>

</div> 
```

CSS：

```
#indishopmain {
    width:100%;
    padding:0em;

}

#indishopmain p {
    text-align:center;
    font-family:Logo;
    color:#343234;
    margin-top:4em;
    font-size:90%;
}

#indishopimg img {
    margin-top:-11.9em;
    margin-left:10%;
    -moz-box-shadow: 5px 5px 10x #000000;
    -webkit-box-shadow: 5px 5px 10px #000000;
    box-shadow: 5px 5px 10px #000000;
}

#canvasshophead {
    display:inline-block;
    width:11em;
    background-color:#5020B8;
    height:2em;
    border-radius:3px;
    -moz-border-radius:3px;
}

#canvasshophead p {
    font-family:Cusmyrb;
    color:#ffffff;
    font-size:30px;
    text-align:center;
    line-height:2;
    margin-top:0;
}

#canvasshopwrap {
    margin-left:60%;
    width:11em;
    display:inline-block;
}

#canvasshoptext p {
    font-family:Cusmyr;
    font-size:14px;
    color:#343234;
    text-align:left;    
}

#canvasshoptext {
    width:11em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:09:09.360

删除此边距顶部：

```
#indishopimg img {
    margin-top:-11.9em;     <--- here
    margin-left:10%;
    -moz-box-shadow: 5px 5px 10x #000000;
    -webkit-box-shadow: 5px 5px 10px #000000;
    box-shadow: 5px 5px 10px #000000;
} 
```

如果您想要文本旁边的图像，请将图像移动到包含文本的段落中并添加`float:left`到上面的 CSS 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:26:34.587

在不知道您要完成什么的情况下（代码中的内容让我怀疑它们是否是设计使然），我会假设您正在尝试将静态元素置于页面中间。如果您要使用流畅的布局（例如，会自动降级到移动设备中的布局），则解决方案看起来会有所不同。

jsfiddle在这里：http: [//jsfiddle.net/RbA92/](http://jsfiddle.net/RbA92/)

我发现在调试时为元素添加临时背景颜色非常有用。出于本练习的目的，我将它们留在那里供您使用，以便您可以轻松查看正在发生的事情。我还建议将这些颜色放在您原来的小提琴上（并将边距更改为填充以真正了解发生了什么）。你有一些事情没有按照你的预期行事......我认为:)

下面小编就为大家介绍一下款式。我注释掉了我“删除”的样式，并注释了我添加的内容和原因。

```
body { text-align: center; } /* centers all content */

#indishopmain {
    padding:0em;
    /*width: 100%;*/
background-color: blue;
    overflow: hidden; /* allows us to float elements inside a non-floated element */
    width: 700px; /* gives the browser a literal size to render, which keeps the elements from moving when the window is resized */
    text-align: left; /* keeps child elements from inheriting the text-aling: center we put on the body */
    margin: 0 auto; /* this is what actually centers our item. use this with body {text-align: center;} */
}

#indishopmain p {
    text-align:center;
    font-family:Logo;
    color:#343234;
    margin-top:4em;
    font-size:90%;
}

#indishopimg img {
    /*margin-top:-11.9em;
    margin-left:10%;*/
    -moz-box-shadow: 5px 5px 10x #000000;
    -webkit-box-shadow: 5px 5px 10px #000000;
    box-shadow: 5px 5px 10px #000000;
    float: left; /* float this bad boy all the way to the left */
}

#canvasshopwrap {
    /*margin-left:60%;*/
    width:11em; /* having this in em could break your layout. consider putting this in px to keep it from getting too big for it's area and being pushed to the bottom */
    /*display:inline-block;*/
background-color: red;
    float: right; /* float this one all the way to the right */
}

#canvasshophead {
    /*display:inline-block;*/
    width:11em;
    background-color:#5020B8;
    /*height:2em;*/
    border-radius:3px;
    -moz-border-radius:3px;
    padding: 0  0 .5em 0; /* it's better to size the CONTENT how you want, so this box will always contain it. size thie box but leave the contents dynamic and you could end up with the content outside of your container */
}

#canvasshophead p {
    font-family:Cusmyrb;
    color:#ffffff;
    font-size:2em;
    text-align:center;
    line-height:2;
    margin:0; /* remove any browser-specific formatting */
    padding: 0;  /* ditto */
}

#canvasshoptext {
    width:11em;
}

#canvasshoptext p {
    font-family:Cusmyr;
    font-size:14px;
    color:#343234;
    text-align:left;
    padding: 0;  /* remove any browser-specific formatting */
    margin: 0;  /* ditto */
} 
```

希望这是您正在寻找的答案。

# c++ - 成员错误 C2352 上的非静态链接

> ID：15644235
> 
> 赞同：0
> 
> 时间：2013-03-26T18:01:55.907
> 
> 标签：c++, winapi, firebreath

再会。
我正在用 FireBreath 编写一个插件。由于我的 C++ 知识贫乏，出现了一些小问题，请参阅下面的代码。

我不明白，为什么`FB::PluginWindowWin::getBrowserHWND()`返回的函数`HWND` 不想像函数一样`HWND`工作`GetWindowRect(hWnd, &rect)`。

编译器强调`FB`并`FB::PluginWindowWin::getBrowserHWND()`告诉我“必须指定成员上的非静态链接而不是设置对象”（这是我的翻译，消息是俄语，但我相信它仍然具有相同的含义）

得到这个错误：

```
Error C2352 FB::PluginWindowWin::getBrowserHWND:illegal call of non-static member function 
```

代码：

```
TestPlugin.cpp
#include "Win/PluginWindowWin.h" 
#include "JSObject.h"
#include "variant_list.h"
#include "DOM/Document.h"
#include "global/config.h"
#include <Windows.h>
#include "TestPluginAPI.h"

///////My Functions////////

FB::variant PosTest()
{
RECT rect; 
HWND hWnd;
hWnd = FB::PluginWindowWin::getBrowserHWND();
if(GetWindowRect(hWnd, &rect))
    {

  int width = rect.right - rect.left;
  int height = rect.bottom - rect.top;
  int left = rect.left;
      return left;
    }
}

TestPlugin.h
#include "Win/PluginWindowWin.h"
#include <string>
#include <sstream>
#include <boost/weak_ptr.hpp>
#include "JSAPIAuto.h"
#include "BrowserHost.h"
#include "TestPlugin.h"
#include <Windows.h>

/////Declarations/////

//Rect
BOOL WINAPI GetWindowRect(HWND hWnd, LPRECT lpRect);

//Pos Test
FB::variant PosTest(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:11:33.403

该错误表明这`getBrowserHWND()`不是一个`static`方法，因此它需要一个对象实例来调用它。

换句话说，你需要有一个 type 的对象`FB::PluginWindowWin`，然后你可以这样称呼它：

```
hWnd = myPluginWindowWin.getBrowserHWND(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:48:28.550

这段代码非常适合我：

```
HWND myPluginAPI::getBrowserHwnd() {
    FB::PluginWindow* pluginWindow = getPlugin()->GetWindow();
    FB::PluginWindowWin* w = (FB::PluginWindowWin*)(pluginWindow);
    HWND hwndBrowser = GetAncestor( w->getHWND(), GA_ROOTOWNER );
    return hwndBrowser;
} 
```

# javascript - 使用 Javascript 计算表单字段——结果是 NaN

> ID：15644240
> 
> 赞同：0
> 
> 时间：2013-03-26T18:02:18.603
> 
> 标签：javascript, forms, calculator, nan

我创建了一个简短的表单，它应该根据用户输入计算值。我已经弄清楚了大部分，但似乎无法让结果显示在总计字段中。相反，我得到了 NaN。

我正在尝试使用 parseInt 但还没有任何运气。

这是我到目前为止所拥有的：

Javascript：

```
 var AdPrice = document.getElementsByTagName('input') = 0;
  var ColorCharge = document.getElementsByTagName('input') = 0;
  var WebAd = document.getElementsByTagName('input') = 0;
  var AdSubtotal = 0;
  var DownPayment = document.getElementsByTagName('input') = 0;
  var TotalPrice = 0;
  var Payments = document.getElementsByTagName('input') = 0;
  var TotalPayment = 0; 

function updateTotal()
{
  var subtotal = AdPrice + ColorCharge + WebAd;
  var total = subtotal - DownPayment;
  var totalmonthlypayment = total / Payments;

 parseFloat(document.getElementById('AdSubtotal').value = subtotal);
 parseFloat(document.getElementById('TotalPrice').value = total);
 parseFloat(document.getElementById('Payment').value = totalmonthlypayment);

} 
```

的HTML：

```
<fieldset>
              <legend>Payment Details</legend>

             Ad Charge $

              <input type="text" name="AdPrice" id="AdPrice" class="medium" onChange="updateTotal()" /><br />

              Color Charge +

              <input type="text" name="ColorCharge" id="ColorCharge" class="medium" onChange="updateTotal()" /><br />

              Web Ad +
              <input type="text" name="WebAd" id="WebAd" class="medium" onChange="updateTotal()" /><br />

              Subtotal =

              <input type="text" name="AdSubtotal" id="AdSubtotal" readonly class="medium"  /><br />

           Down Payment -

           <input type="text" name="DownPayment" id="DownPayment" class="medium" onChange="updateTotal()" /><br />

           Total = 
           <input type="text" name="TotalPrice" id="TotalPrice" readonly class="medium"  /><br /><br />

           # Consec. Payments \

             <input type="text" name="Payments" id="Payments" class="medium" onChange="updateTotal" /><br />

            Amt Each Payment $ 

            <input type="text" name="Payment" id="Payment" class="medium" readonly  /><br /><br />

            <input type="checkbox" name="ProratedCheck" id="ProratedCheck" /> <span style="margin-right:10px;">Prorated/Length</span><input type="text" name="ProratedLength" id="ProratedLength" />
</fieldset> 
```

我也有一个小提琴：

[http://jsfiddle.net/kjetterman/eHQV4/10/](http://jsfiddle.net/kjetterman/eHQV4/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:13:47.473

在开始时除以零（小计）。

并且：这种绑定有效吗？我想不是。对我来说很新......

在方法中放置“getElements”行怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:40:12.087

您需要处理的 javascript 上有几个错误，正如您应该`getElementById`用于检索 DOM 元素的问题的评论中所述，您遇到的另一个问题是，您的代码在浏览器收到响应后立即运行此刻可能没有准备好 DOM 工作，所以你所有的引用都返回为 NULL。这是工作版本，当初始值为零时，您仍然需要添加一些验证，这样您就不会因为操作而得到 NaN。

[http://jsfiddle.net/Wy7kE/2/](http://jsfiddle.net/Wy7kE/2/)

# css - 将 div 分成四个相等的部分，用固定的导航栏填充视口

> ID：15644245
> 
> 赞同：0
> 
> 时间：2013-03-26T18:02:30.080
> 
> 标签：css, fluid-layout

所以我有一个固定导航的流畅布局。我有：固定导航本身，以及一个包含其他四个 div 的 div，我希望完全填充固定导航下方的空间。如果没有导航或 div 的某种滚动，我似乎无法做到这一点。

nav 设置为 position:fixed
包含内容 div 的 div 设置为 position:absolute height:100% width:100%
四个内容 div 本身设置为 float:left height:50% width:50%

我什至不确定这是否可以单独使用 css 处理，如果可以，那将是很棒的，如果不是，我会考虑其他可能性。任何帮助，一如既往，非常感谢。

开发区： [http ://riverhousegolf.icwebdev.com](http://riverhousegolf.icwebdev.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:04:29.987

也许只有 CSS 的解决方案，但这里是 jQuery 解决方案。菜单下方的内容将填充其余空间，没有滚动条。

**HTML**标记将是：

```
<div id="menu">SOMETHING IN MENU</div>
<div class="content">
    <div class="part1"></div>
    <div class="part2"></div>
    <div class="part3"></div>
    <div class="part4"></div>
</div> 
```

**CSS**：

```
body,html{padding:0; margin:0;height:100%;width:100%;}

#menu {
    position: fixed;
    top: 0;
    background: blue;
    height: 50px;
    width: 100%;
}

.part1 {
    width:50%;
    height: 50%;
    float: left;
    background: purple;
}
.part2 {
    width:50%;
    height: 50%;
    float: left;
    background: red;
}
.part3 {
    width:50%;
    height: 50%;
    float: left;
    background: green;
}
.part4 {
    width:50%;
    height: 50%;
    float: left;
    background: silver;
}

.content{
    width: 100%;
    position: relative;
} 
```

**jQuery** :

```
var height = $(document).height();
var menu_height = $("#menu").height();
var content_height = height - menu_height;

$(".content").css("height", content_height);
$(".content").css("top", menu_height); 
```

[**演示**](http://jsfiddle.net/QEdxW/1/)

最重要的部分是 jQuery。首先，我们需要获取文档（html）的高度，然后是菜单的高度。然后，我们从文档高度中减去菜单高度，结果就是内容高度。同样的结果我们将应用于内容的顶部位置，以避免重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:16:45.343

删除“溢出-y：滚动；” 样式表中“html”选择器的属性。

**编辑**：我认为如果您要使用纯 CSS，您将有一个滚动条。我做了一个小提琴来展示如何至少阻止导航切断其他 div 的顶部。我用了一个

```
<div class="spaceTaker" > 
```

这会使页面的其余部分向下颠簸。

[http://jsfiddle.net/Dtwigs/XRJ8n/](http://jsfiddle.net/Dtwigs/XRJ8n/)

**Edit2**：尝试保持所有宽度相同。但是删除所有设置为百分比的高度。html 元素应该有 height: 100% 但你的图块等不应该。现在把这个 jquery 放到你的页面上。

```
$( function () {
    var pHeight = $("html").height() - $("nav").height(); 
    $(".tile").height(pHeight / 2);    
}); 
```

还要使您的导航位置相对。

[http://jsfiddle.net/Dtwigs/XRJ8n/](http://jsfiddle.net/Dtwigs/XRJ8n/)

# css - 在迭代计数的最后一帧停止 CSS3 动画

> ID：15644246
> 
> 赞同：1
> 
> 时间：2013-03-26T18:02:32.563
> 
> 标签：css, animation, sass

我已经在[http://codepen.io/samaxes/pen/KbCHi](http://codepen.io/samaxes/pen/KbCHi)上设置了一个带有饼图计时器的笔。

但是我还没有弄清楚如何在迭代计数的最后一帧（在这个特定示例中为 0.9）停止动画。

添加以下 CSS 属性：

```
-webkit-animation-fill-mode: forwards; 
```

不会修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:52:07.263

你真的不能。但是，如果您将动画对象设置为您希望它们最终处于的状态，则相对容易获得您正在寻找的效果：

```
.wrapper {
  position: relative;
  margin: 40px auto;
  background: #d5d5d5;
  border-radius: 50%;
}

@mixin timer($item, $duration, $size, $color, $end, $hover: pause) {
  #{$item}, #{$item} * { @include box-sizing(border-box); }

  #{$item} { 
    width: $size;
    height: $size;
  }

  #{$item} .pie {
    width: 50%;
    height: 100%;
    transform-origin: 100% 50%;
    position: absolute;
    background: $color;
  }

  #{$item} .spinner {
    border-radius: 100% 0 0 100% / 50% 0 0 50%;
    z-index: 200;
    transform: rotate(360deg*.9);
    animation: rota $duration + s linear $end;
  }

  #{$item}:hover .spinner,
  #{$item}:hover .filler, 
  #{$item}:hover .mask {
    animation-play-state: $hover;
  }

  #{$item} .filler {
    border-radius: 0 100% 100% 0 / 0 50% 50% 0; 
    left: 50%;
    opacity: 1;
    z-index: 100;
    animation: opa $duration + s steps(1,end) $end reverse;
  }

  #{$item} .mask {
    border-radius: 100% 0 0 100% / 50% 0 0 50%;
    width: 50%;
    height: 100%;
    position: absolute;
    background: inherit;
    z-index: 300;
    opacity: 0;
    animation: opa $duration + s steps(1,end) $end;
  }

  @keyframes rota {
    0% { transform: rotate(0deg); }
    90% { transform: rotate(360deg*.9); }
  }

  @keyframes opa {
    0% { opacity: 1; }
    50%, 100% { opacity: 0; }
  }
}

@include timer('.wrapper', 5, 250px, #6c6, 0.9); 
```

[演示](http://codepen.io/bookcasey/pen/hisHj)

# mongodb - 保护 Mongodb 以供 Windows 服务使用

> ID：15644247
> 
> 赞同：0
> 
> 时间：2013-03-26T18:02:36.083
> 
> 标签：mongodb, authentication, passwords, windows-server-2008

我有一个作为特定域用户运行的 Windows 服务。此服务需要访问 MongoDB。我可以将 mongo 配置为接受此域用户，还是在某个配置中使用 mongo 用户名和密码的唯一方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:59:02.493

Linux 上运行的 MongoDB 2.4 Server（仅限企业版）支持外部身份验证。如果您的数据库在 Linux 上运行并且您使用 .Net 或 Java 驱动程序连接到它，您可以设置使用 Kerberos 作为外部身份验证提供程序。更多信息可以在[http://docs.mongodb.org/ecosystem/tutorial/authenticate-with-csharp-driver/](http://docs.mongodb.org/ecosystem/tutorial/authenticate-with-csharp-driver/)或：[http ://docs.mongodb.org/ecosystem/tutorial/authenticate-with-java-找到司机/](http://docs.mongodb.org/ecosystem/tutorial/authenticate-with-java-driver/)

# javascript - JavaScript：如何检索 HTML 对象标签的文档对象？

> ID：15644250
> 
> 赞同：0
> 
> 时间：2013-03-26T18:02:45.080
> 
> 标签：javascript, html, document.write

我尝试在对象元素（type="text/html"）中调用 document.open/write/close 序列。在 Safari/Chrome 中，我可以通过 contentDocument 属性获取内部文档对象。示例代码（使用 jquery）：

```
$(document).ready(function() {
  var container = $('<object/>')
    .css({'width': '700px', 'height': '100px', 'border': '0px none'})
    .attr({'type': 'text/html'}).appendTo('body');

  var doc = container.get(0).contentDocument;
  doc.open();
  doc.write('<h1>Hello world!</h1>');
  doc.close();
}); 
```

有没有办法在其他浏览器中做同样的事情？

我想做这么奇怪的事情的原因是我需要在 DOM 关闭后调用包含 document.write 的外部脚本。我已经尝试过处理 iframe，但由于 Internet Explorer 和 Opera 错误，我失败了。实现这一目标的任何其他方式将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:24:29.590

这应该适合你。我不知道为什么（我只有我的怀疑）。

```
$(document).ready(function () {
    var container = $('<object>')
        .css({
            'width': '700px',
            'height': '100px',
            'border': '0 none'
        })
        .attr({
            'type': 'text/html',
            'data': 'about:blank'
        })
        .appendTo('body');

    function writeToDoc() {
        var obj, doc;
        obj = container.get(0);
        if (obj.document) {
            doc = obj.document;
        } else if (obj.contentWindow) {
            doc = obj.contentWindow.document;
        }
        else if (obj.contentDocument) {
            doc = obj.contentDocument;
        }
        if (doc) {
            doc.open();
            doc.write('<h1>Works!</h1>');
            doc.close();
        } else {
            $('body').append('<h1>No luck...</h1>');
        }
    };

    // yes, this is weird
    setTimeout(writeToDoc, 0);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-27T17:52:58.957

在 HTML5 中不推荐使用 Object 元素，因此您将无法再使用它。

# web-services - 使用 VBA 连接到 MS Access 中的 Web 服务

> ID：15644254
> 
> 赞同：10
> 
> 时间：2013-03-26T18:02:59.300
> 
> 标签：web-services, ms-access, ms-access-2007, vba

是否可以通过Microsoft Access**中**的 VBA 连接到 Web 服务（例如发送 HTTP 请求） ？例如，用户单击表单上的按钮，然后将 HTTP 请求发送到响应为 的 Web 服务`OK`。

有没有人这样做过？

注意：VBA，而不是 VB.NET。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T01:09:29.203

这是我在 Access 2003 中非常成功地使用的代码。它来自互联网，多年前被复制和重新复制。它创建一个[XMLHttpRequest 对象](http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx)，发送一个 HTTP GET 请求，并将结果作为字符串返回。

```
Public Function http_Resp(ByVal sReq As String) As String

    Dim byteData() As Byte
    Dim XMLHTTP As Object

    Set XMLHTTP = CreateObject("MSXML2.XMLHTTP")

    XMLHTTP.Open "GET", sReq, False
    XMLHTTP.send
    byteData = XMLHTTP.responseBody

    Set XMLHTTP = Nothing

    http_Resp = StrConv(byteData, vbUnicode)

End Function 
```

sReq 是 URL；该函数返回响应。您可能需要确保在您的引用下启用了 ActiveX 数据对象（在 VBA 编辑器中，转到工具 > 引用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-24T06:10:41.800

这是我使用的代码。您需要首先参考 Microsoft XML V6 才能使此代码正常工作。

```
Public Sub GetPerson()
    'For API
    Dim reader As New XMLHTTP60

    reader.Open "GET", "www.exmple.com/users/5428a72c86abcdee98b7e359", False
    reader.setRequestHeader "Accept", "application/json"
    reader.send

    Do Until reader.ReadyState = 4
        DoEvents
    Loop

    If reader.Status = 200 Then
        Msgbox (reader.responseText)
    Else
        MsgBox "Unable to import data."
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:08:36.823

我在一些项目中使用了“Microsoft Office 2003 Web Services Toolkit 2.01”工具包（可[在此处](http://www.microsoft.com/en-ca/download/details.aspx?id=2224)获得）。它对我来说工作得很好，虽然我也写了它正在与之交谈的 Web 服务，所以我有幸在让它真正工作时能够摆弄过程的两端。:)

事实上，我刚刚将其中一个应用程序从 Access_2003 升级到 Access_2010，应用程序的 SOAP 客户端部分无需修改即可继续工作。但是，我在部署前测试期间确实遇到了一个问题：

我的应用程序无法在运行 32 位 Office_2010 的 64 位机器上编译，因为它不喜欢`SoapClient30`对象的早期绑定。当我切换到对该对象使用后期绑定时，代码会编译，但它不起作用。因此，对于那个特定的应用程序，我必须添加一个限制，即 64 位机器需要运行 64 位 Office。

此外，请注意 Microsoft 的官方立场是“所有 SOAP 工具包都已被 Microsoft .NET Framework 取代”。（参考[这里](http://support.microsoft.com/gp/lifedevtool)）。

# c++ - 具有标准偏差和均值的 C++ 问题输出不良

> ID：15644256
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:03:11.393
> 
> 标签：c++, standards, deviation

您好，有人可以帮忙吗，我的 SD 和均值数字非常奇怪，我不知道为什么。我觉得我可能以错误的方式访问数组？有一个结构，但也有一个独立的数组，这是我正在使用的。我的中位数很好，但其他一切都是非常奇怪的输出。

```
#include<iostream>
#include<fstream>
#include <cstdlib>
#include <cstring>
#include <cmath>
#include <climits>

using namespace std;

#define output_bit 1  // change it to 1/0 if you want(don't want to print/output 

struct Stock{
    char  date[10];
    double open;
    double high;
    double low;
    double close;
    int    volume;
    double adj_close;
};

//debug tip: pause your program

void pauseIT(){
    cout << "Wait, press ENTER to continue,...";
    cin.clear(); //clear errors
    cin.sync();  //clear the buffer
    cin.get();   //wait for a letter
}

void setOutputPrecision(int n){

    cout.setf(ios::fixed);
    cout.setf(ios::showpoint);
    cout.precision(n);   
}
double* sortArray(double *a, int size);
int findMaxIndex(const double *a, int size);
void MedianandMean(double * stock, int size, double& stockMedian, double& stockMean);
void standardDeviation(double *stock, int size, double& sum, double& avg, double& sum2, double& stdDev);

int main(int argc, char** argv) {

    const int n = 249;

    Stock GoogleStock[n]; // a struct array
    char filename[100] = "google_stock_.txt";

    double *google_stock_adj_close=new double[n];

    FILE *fp;

    char header[100];

    // items since the 2nd line in the file
    double open, high, low, close, adj_close;
    int    volume;
    char   date[10];

    //header information
    char date_s[10],open_s[10], high_s[10], low_s[10], 
         close_s[10],  volume_s[10], adj_s[10], adj_close_s[10];

    int i=0;

    // Read a file 

    fp=fopen(filename, "r"); //open a file for read

    // book keeping: make sure it is not a NULL
    if(!fp)
        perror("Double-check your input file");

    // read the header information (first line)
    if(!feof(fp)){
          fscanf(fp, "%s  %s  %s  %s  %s  %s  %s %s\n", date_s, open_s, 
                  high_s, low_s, close_s,volume_s, adj_s, adj_close_s);
    }
    // merge the "adj"  and "Close"  to "AdjClose"
        strcat(adj_s, adj_close_s);
        strcpy(adj_close_s, adj_s);

    //read the main information from the 2nd line to the file end: 
    // feof will tell you if the file ends

      while(!feof(fp)){
        fscanf(fp, "%s  %lf  %lf  %lf  %lf  %10d  %lf\n", 
                date, &open, &high, &low, &close, &volume, &adj_close);

     //copy information to a structure array

        strcpy(GoogleStock[i].date, date);
        GoogleStock[i].open      = open;
        GoogleStock[i].high      = high;
        GoogleStock[i].low       = low;
        GoogleStock[i].close     = close;
        GoogleStock[i].volume    = volume;
        GoogleStock[i].adj_close = adj_close; 

       //copy the adj close price to an independent array 

        google_stock_adj_close[i]= adj_close;

        i++;
    }

    fclose(fp); //close your program after finishing reading

    cout<<"Finish reading \n"<<endl;

      if (output_bit) {

         cout<<"The stock information is written in a structure array: \n"<<endl;
         pauseIT();
         for(int i=0;i<n;i++){
            fprintf(stderr, "%s  %lf  %lf  %lf  %lf  %d  %lf\n", 
                 GoogleStock[i].date,
                 GoogleStock[i].open, 
                 GoogleStock[i].high, 
                 GoogleStock[i].low, 
                 GoogleStock[i].close, 
                 GoogleStock[i].volume, 
                 GoogleStock[i].adj_close);
          }
         cout<<endl<<endl;
      }

    if(output_bit){
        cout<<"This is the adjusted close price of Google stock"<<endl;
        pauseIT();
        setOutputPrecision(3);  
        for(int i=0;i<n;i++)
        cout<<google_stock_adj_close[i]<<endl;
    }

    double stockMedian,stockMean,stdDev,sum,avg,sum2;
    stockMedian=stockMean=stdDev=0.0;

    MedianandMean((double *) google_stock_adj_close,n, stockMedian, stockMean);

standardDeviation((double *) google_stock_adj_close, n, sum, avg, sum2, stdDev);

    cout<<"The stock median = "<<stockMedian<<endl;
    cout<<"The stock mean = "<<stockMean<<endl;
    cout<<"The stock standard deviation = "<<stdDev<<endl;

    delete []google_stock_adj_close;

    return 0;
}

   int findMaxIndex(const double *a, int size){
         int index=0;
    double max=a[0];
    for (int i=1;i<size;i++){
        if (a[i]>max){
            max=a[i];
            index=i;
        }
    }
    return index;
    }   

  double * sortArray(double *a, int size){
        int index;   
        double *sortedArray=new double[size];
        for(int i=0;i<size;i++){
            index =findMaxIndex(a, size);
            sortedArray[i]=a[index];
            a[index]=LONG_MIN;   
        }
     return sortedArray;            
    }

void MedianandMean(double * stock, int size, double& stockMedian, double& stockMean){
    stockMedian=0.0;
    double *sorted_stock=sortArray(stock,size);

       if(size%2==0)
        stockMedian=sorted_stock[(size-1)/2];
    else
        stockMedian=(sorted_stock[(size-1)/2]+sorted_stock[((size-1)/2)+1])/2;

    //Mean
    stockMean=0.0;
    for(int i=0;i<size;i++)
        stockMean=stockMean+stock[i];
    stockMean=stockMean/size;

}

void standardDeviation(double *stock, int size, double& sum, double& avg, double& sum2, double& stdDev){

     //stanadard deviation
    double temp=0.0;
    for (int i=0; i<size;i++)
    sum=sum+stock[i];
    avg=sum/float(size);

    for(int i=0; i<size; i++)
        sum2 += pow((stock[size]-avg),2);
        temp =sum2/(size-1);
    stdDev= pow(temp, 0.5);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:10:23.983

1.  在尝试集成新代码之前， 您应该*单独*开发和测试新代码。
2.  您发布的示例既不是最小的也不是完整的。
3.  您的代码格式不正确。
4.  您的变量存在时间过长。
5.  你永远不会初始化 `sum`。

# ruby-on-rails - Sidekiq 工作人员无法写入数据库或日志文件

> ID：15644257
> 
> 赞同：3
> 
> 时间：2013-03-26T18:03:13.650
> 
> 标签：ruby-on-rails, redis, twilio, sidekiq

我正在 Herkou 和 Redis 上构建一个应用程序，它为包含手机号码的输入 CSV 文件中的每一行发送一条 SMS 消息。该消息是使用 Twilio 在`sidekiq`如下所示的工作器中发送的。问题是，即使为 CSV 中的所有行发送 SMS，数据库写入（`TextMessage.create)`和日志写入（`puts`语句）仅针对 CSV 中的一行执行。为**CSV**中的每一行生成一个 Sidekiq 工作程序文件。似乎只有一个 Sidekiq 工作人员具有 I/O（数据库、文件）访问权限，并将其与其他 Sidekiq 工作人员锁定。任何帮助将不胜感激。

**sidekiq 工作人员：**

```
require 'sidekiq'
require 'twilio-rb'

class TextMessage < ActiveRecord::Base
    include Sidekiq::Extensions

    def self.send_message(number, body, row_index, column_index, table_id)
        puts "TextMessage#send_message: ROW INDEX: #{row_index} COLUMN INDEX: #{column_index} TABLEID: #{table_id} BODY: #{body} PHONE: #{number}"

        Twilio::Config.setup :account_sid  => 'obfuscated', :auth_token   => '<obfuscated>'
    sms = Twilio::SMS.create :to => number, :from => '+17085555555', :body => body +  ' | Sent: ' + Time.now.in_time_zone('Central Time (US & Canada)').strftime("%m/%d/%Y %I:%M%p Central")
        TextMessage.create :to => number, :from => '+17085555555'
        ImportCell.add_new_column(table_id, row_index, column_index, "Time Sent", Time.now.in_time_zone('Central Time (US & Canada)').strftime("%m/%d/%Y %I:%M%p Central"))
    end
end 
```

**致电 sidekiq 工作人员：**

```
 TextMessage.delay_until(time_to_send, :retry => 3).send_message(phone, 'Scheduled: ' + time_to_send.in_time_zone('Central Time (US & Canada)').strftime("%m/%d/%Y %I:%M%p Central"), row_index, column_index, table.id)
      column_index += 1 
```

**Heroku`Procfile`**

```
worker: bundle exec sidekiq -C config/sidekiq.yml 
```

**`sidekiq.yml`**

```
:verbose: false
:concurrency:  3
:queues:
  - [default, 5] 
```

**`config/initializers/redis.rb`**：

```
uri = URI.parse(ENV["REDISTOGO_URL"])
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)

Sidekiq.configure_server do |config|
 database_url = ENV['DATABASE_URL']
 if(database_url)
   ENV['DATABASE_URL'] = "#{database_url}?pool=25"
   ActiveRecord::Base.establish_connection
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T04:50:10.367

我是对您的问题发表评论的人之一，刚刚解决了它！

您正在使用 SideKiq 似乎不喜欢的 .create，所以我尝试使用 .new 然后 .save 使其工作！我认为这与 .create 不是线程安全的或类似的东西有关，但老实说我不知道​​。

非工作代码：

```
class HardWorker
    include Sidekiq::Worker

    def perform(name, count)
        puts 'Doing some hard work!'

        UserInfo.create(
         :user => "someone",
         :misc1 => 0,
         :misc2 => 0,
         :misc3 => 0,
         :comment => "Made from HardWorker",
         :time_changed => Time.now
        )

        puts 'Done with hard work!'
    end
end 
```

工作代码：

```
class HardWorker
    include Sidekiq::Worker

    def perform(name, count)
        puts 'Doing some hard work!'

        a_row = UserInfo.new(
         :user => "someone",
         :misc1 => 0,
         :misc2 => 0,
         :misc3 => 0,
         :comment => "Made from HardWorker",
         :time_changed => Time.now
        )

        a_row.save

        puts 'Done with hard work!'
    end
end 
```

# highcharts - Highstock 中的双轴？

> ID：15644258
> 
> 赞同：2
> 
> 时间：2013-03-26T18:03:17.147
> 
> 标签：highcharts, highstock

有没有办法在 Highstock 上制作一个像 Highcharts 上的双轴？

[http://www.highcharts.com/demo/combo-dual-axes](http://www.highcharts.com/demo/combo-dual-axes)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:18:41.860

看起来你可以像在 highcharts 中那样做。每个系列都指定 yAxis:n 其中 n 是您要绘制它的轴，您需要定义 n 个 yAxis 条目。我修改了一个示例 highstock 演示：http: [//jsfiddle.net/ykfmG/](http://jsfiddle.net/ykfmG/)

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename='+ name.toLowerCase() +'-c.json&callback=?',   function(data) {

        seriesOptions[i] = {
            name: name,
            data: data,
            yAxis:i
        };
}

        yAxis: [{
            labels: {
                formatter: function() {
                    return (this.value > 0 ? '+' : '') + this.value + '%';
                }
            },
            plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
            }]
        },{opposite:true},{opposite:true},{opposite:true}], 
```

# javascript - Firefox onclick显示中的getelementbyid：块脚本故障排除

> ID：15644259
> 
> 赞同：0
> 
> 时间：2013-03-26T18:03:20.580
> 
> 标签：javascript, cross-browser

我有一个脚本可以切换 div 的块/无显示，onClick。onClick 还将关联的“缩略图”图像从活动切换到非活动。

只有在 Firefox 中，div 的堆栈是相互叠加的。似乎 onClick 没有将 display:none 样式与当前项目相关联。

我确保所有 div 都有关联的 ID，这似乎是 Firefox 中与 getElementById 问题相关的首要问题。

有关故障排除的任何想法都会有所帮助，谢谢！

这是我的javascript：

```
var curVid = "VideoA";
var curImg = "VideoA_thumbnail";

function changeVideo(id, img)
  {
   if(document.getElementById(id) != null && curVid != id)
  {

    document.getElementById(curVid).style.display = "none";
    document.getElementById(id).style.display = "block";
    document.getElementById(id + "_thumb").src = "..//Thumbnails//" + img + "_selected.jpg";
    document.getElementById(id + "_thumb").style.cursor = "default";
    document.getElementById(curVid + "_thumb").src = "..//Thumbnails//" + curImg + ".jpg";
    document.getElementById(curVid + "_thumb").style.cursor = "pointer";

    if(VideoJS.browserSupportsVideo())
      {
        document.getElementById(curVid + "_video").pause();
        document.getElementById(curVid + "_video").currentTime = 0;
        VideoJS.setup(id + "_video");
        document.getElementById(id + "_video").play();
      }
    else
      {
        $f(curVid + "_flash").stop();
        $f(id + "_flash").play();
      }

curVid = id;
curImg = img;
}
} 
```

这是HTML

```
<div id = "VideoA" style = "display:block;">content here</div> 
<div id = "VideoB" style = "display:none;">content here</div> 
<div id = "VideoC" style = "display:none;">content here</div> 
<div id = "VideoD" style = "display:none;">content here</div> 
<div id = "VideoE" style = "display:none;">content here</div> 

<div>
   <img src = "a.jpg" id = "VideoA_thumb" onclick = "changeVideo('VideoA', 'VideoA_thumb')" />
   <img src = "b.jpg" id = "VideoB_thumb" onclick = "changeVideo('VideoB', 'VideoB_thumb')" />
   <img src = "c.jpg" id = "VideoC_thumb" onclick = "changeVideo('VideoC', 'VideoC_thumb')" />
   <img src = "d.jpg" id = "VideoD_thumb" onclick = "changeVideo('VideoD', 'VideoD_thumb')" />
   <img src = "e.jpg" id = "VideoE_thumb" onclick = "changeVideo('VideoE', 'VideoE_thumb')" />
</div> 
```

# cuda - CUDA 函数指针

> ID：15644261
> 
> 赞同：6
> 
> 时间：2013-03-26T18:03:35.147
> 
> 标签：cuda, function-pointers

我试图在CUDA中做这样的事情（实际上我需要编写一些集成函数）

```
#include <iostream>
using namespace std;

float f1(float x) {
    return x * x;
}

float f2(float x) {
    return x;
}

void tabulate(float p_f(float)) {
    for (int i = 0; i != 10; ++i) {
        std::cout << p_f(i) << ' ';
    }
    std::cout << std::endl;
}

int main() {
    tabulate(f1);
    tabulate(f2);
    return 0;
} 
```

输出：

> 0 1 4 9 16 25 36 49 64 81
> 0 1 2 3 4 5 6 7 8 9

* * *

我尝试了以下但只得到了错误

> 错误：sm_1x 不支持函数指针和函数模板参数。

```
float f1(float x) {
    return x;
}

__global__ void tabulate(float lower, float upper, float p_function(float), float* result) {
    for (lower; lower < upper; lower++) {
        *result = *result + p_function(lower);
    }
}

int main() {
    float res;
    float* dev_res;

    cudaMalloc( (void**)&dev_res, sizeof(float) ) ;

    tabulate<<<1,1>>>(0.0, 5.0, f1, dev_res);
    cudaMemcpy(&res, dev_res, sizeof(float), cudaMemcpyDeviceToHost);

    printf("%f\n", res);
    /************************************************************************/
    scanf("%s");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T20:29:45.817

要消除编译错误，您必须`-gencode arch=compute_20,code=sm_20`在编译代码时将其用作编译器参数。但是你可能会遇到一些运行时问题：

摘自 CUDA 编程指南[http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#functions](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#functions)

> 主机代码支持指向函数的函数指针`__global__`，但设备代码不支持。`__device__`仅在为计算能力 2.x 及更高版本的设备编译的设备代码中支持指向函数的函数指针。
> 
> 不允许`__device__`在主机代码中获取函数的地址。

所以你可以有这样的东西（改编自“FunctionPointers”示例）：

```
//your function pointer type - returns unsigned char, takes parameters of type unsigned char and float
typedef unsigned char(*pointFunction_t)(unsigned char, float);

//some device function to be pointed to
__device__ unsigned char
Threshold(unsigned char in, float thresh)
{
   ...
}

//pComputeThreshold is a device-side function pointer to your __device__ function
__device__ pointFunction_t pComputeThreshold = Threshold;
//the host-side function pointer to your __device__ function
pointFunction_t h_pointFunction;

//in host code: copy the function pointers to their host equivalent
cudaMemcpyFromSymbol(&h_pointFunction, pComputeThreshold, sizeof(pointFunction_t)) 
```

然后，您可以将`h_pointFunction`作为参数传递给内核，内核可以使用它来调用您的`__device__`函数。

```
//your kernel taking your __device__ function pointer as a parameter
__global__ void kernel(pointFunction_t pPointOperation)
{
    unsigned char tmp;
    ...
    tmp = (*pPointOperation)(tmp, 150.0)
    ...
}

//invoke the kernel in host code, passing in your host-side __device__ function pointer
kernel<<<...>>>(h_pointFunction); 
```

希望这有点道理。总而言之，看起来您必须将 f1 函数更改为`__device__`函数并遵循类似的过程（typedef 不是必需的，但它们确实使代码更好）才能将其作为主机上的有效函数指针-side 传递给你的内核。我还建议给 FunctionPointers CUDA 示例看看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:40:53.347

即使您可以编译此代码（请参阅@Robert Crovella 的答案），此代码也不起作用。您不能从主机代码传递函数指针，因为主机编译器无法确定函数地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-21T13:40:56.943

这是一个简单的函数指针类，可以从我根据[这个](https://stackoverflow.com/questions/9000388/device-function-pointers)问题编写的内核中调用：

```
template <typename T>
struct cudaCallableFunctionPointer
{
public:
  cudaCallableFunctionPointer(T* f_)
  {
    T* host_ptr = (T*)malloc(sizeof(T));
    cudaMalloc((void**)&ptr, sizeof(T));

    cudaMemcpyFromSymbol(host_ptr, *f_, sizeof(T));
    cudaMemcpy(ptr, host_ptr, sizeof(T), cudaMemcpyHostToDevice);

    cudaFree(host_ptr)
  }

  ~cudaCallableFunctionPointer()
  {
    cudaFree(ptr);
  }

  T* ptr;
}; 
```

你可以像这样使用它：

```
__device__ double func1(double x)
{
    return x + 1.0f;
}

typedef double (*func)(double x);
__device__ func f_ = func1;

__global__ void test_kernel(func* f)
{
    double x = (*f)(2.0);
    printf("%g\n", x);
}

int main()
{
    cudaCallableFunctionPointer<func> f(&f_);

    test_kernel << < 1, 1 >> > (f.ptr);
} 
```

输出：

```
3 
```

# iphone - 扭曲的导航栏自定义后退按钮

> ID：15644267
> 
> 赞同：3
> 
> 时间：2013-03-26T18:03:56.767
> 
> 标签：iphone, ios

![在此处输入图像描述](../Images/3c9ca151082c8dd518e584d378ac7f0d.png)

我有一个自定义后退按钮，该按钮未按预期显示，它正在被拉伸，即使后退按钮文本为空，它仍显示“后退”文本。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:32:16.693

我通常使用这种技术来使其工作：

1.  要摆脱默认标题：

    ```
    [[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(-400.f, 0) forBarMetrics:UIBarMetricsDefault]; 
    ```

2.  使用可调整大小的图像：

    ```
    UIImage *backButton = [UIImage imageNamed:@"back.png"];         
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:[backButton resizableImageWithCapInsets:UIEdgeInsetsMake(0, backButton.size.width, 0, 0)] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:11:11.253

尝试类似的东西

```
UIButton *back = [UIButton buttonWithType:UIButtonTypeCustom];  
UIImage *image = ... your image
[back setBackgroundImage:image forState:UIControlStateNormal];  
[back addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];
back.frame = CGRectMake(0, 0, image.size.width, image.size.height);
UIBarButtonItem *backbi = [[UIBarButtonItem alloc] initWithCustomView:back];  
self.navigationItem.leftBarButtonItem = backbi; 
```

或发布您的代码。

# c# - C# 创建的 Excel 图表 - 应该是 ScatterLine 但它在其他计算机上是 Line 类型

> ID：15644273
> 
> 赞同：4
> 
> 时间：2013-03-26T18:04:11.227
> 
> 标签：c#, visual-studio-2010, visual-studio, excel, excel-2010

我在使 Excel 图形类型显示为 ScatterLine 时遇到问题。奇怪的是，编译后，在我的电脑上它显示为 ScatterLine，但在其他人的电脑上它显示为没有 X 轴的 Line 类型！

```
 private void showExcelXY_Open(ArrayList al)
    {
        ArrayList alX = new ArrayList();
        ArrayList alY = new ArrayList();
        alX.Clear();
        alY.Clear();
        for (int i = 0; i < al.Count; i++)
        {
            string[] val = al[i].ToString().Split('^');
            alX.Add(val[0]);
            alY.Add(val[1]);
        }

        xla = new Microsoft.Office.Interop.Excel.Application();

        xla.Visible = true;
        Workbook wb = xla.Workbooks.Add(XlSheetType.xlWorksheet);
        Worksheet ws = (Worksheet)xla.ActiveSheet;

        // Now create the chart.
        ChartObjects chartObjs = (ChartObjects)ws.ChartObjects(Type.Missing);
        ChartObject chartObj = chartObjs.Add(100, 20, 500, 300);
        Microsoft.Office.Interop.Excel.Chart xlChart = chartObj.Chart;

        //add some data from your datasource like a dataset or like below.
        ws.Cells[1, 1] = "Pressure";
        ws.Cells[1, 2] = "Compression";

        ws.Cells[2, 1] = alX[0];
        ws.Cells[2, 2] = alY[0];

        ws.Cells[3, 1] = alX[1];
        ws.Cells[3, 2] = alY[1];

        ws.Cells[4, 1] = alX[2];
        ws.Cells[4, 2] = alY[2];

        ws.Cells[5, 1] = alX[3];
        ws.Cells[5, 2] = alY[3];

        ws.Cells[6, 1] = alX[4];
        ws.Cells[6, 2] = alY[4];

        ws.Cells[7, 1] = alX[5];
        ws.Cells[7, 2] = alY[5];

        ws.Cells[8, 1] = alX[6];
        ws.Cells[8, 2] = alY[6];

        //set the source data and the chart type.
        Range chartRange = ws.get_Range("A2", "B8");
        xlChart.SetSourceData(chartRange, Type.Missing);
        xlChart.ChartType = XlChartType.xlXYScatterLines;

        // Customize axes:
        Microsoft.Office.Interop.Excel.Axis xAxis = (Microsoft.Office.Interop.Excel.Axis)xlChart.Axes(XlAxisType.xlCategory, XlAxisGroup.xlPrimary);
        xAxis.HasMajorGridlines = true;
        xAxis.HasTitle = true;
        xAxis.AxisTitle.Text = "Above         Pressure (psi)          Below";

        Microsoft.Office.Interop.Excel.Axis yAxis = (Microsoft.Office.Interop.Excel.Axis)xlChart.Axes(XlAxisType.xlValue, XlAxisGroup.xlPrimary);
        yAxis.MajorTickMark = XlTickMark.xlTickMarkCross;
        yAxis.HasTitle = true;
        yAxis.AxisTitle.Text = "Compression (lbf)";

        // Add title:
        xlChart.HasTitle = true;
        xlChart.ChartTitle.Text = "XPak Performance Envelope" + '\n' + "(Open Top & Bottom)";

        // Remove legend:
        xlChart.HasLegend = false;
   } 
```

代码清楚地表明它将图表类型设置为：

```
xlChart.ChartType = XlChartType.xlXYScatterLines; 
```

任何想法将不胜感激！

# database - 经验丰富的数据库架构师的主题

> ID：15644274
> 
> 赞同：1
> 
> 时间：2013-03-26T18:04:11.677
> 
> 标签：database, database-design, architecture, schema, database-schema

我面临以下问题。

我正在为（比如说）人类信息创建一个数据库。所有的人都可以归为以下三类之一：成年女性、成年男性、儿童。很明显，“身高”和“体重”等参数适用于所有类别。参数“子女数”仅适用于成人，而参数“怀孕数”仅适用于女性。此外，每个参数可以根据类别分为强制或可选（例如，对于成年人，参数“前伴侣的数量”是可选的）。

当我加载（比如说）“身高”和“体重”时，我会检查这两个字段中的信息是否是自洽的。即，我将 height=6'4'' 和 weight=10 lb 的记录标记为错误（显然，这在物理上是不可能的）。我有几个类似的验证规则。

当我插入关于一个人的记录时，我需要反映信息的以下特征：

1.  此特定人的类别的最大可能信息（包括所有可选参数）。
2.  类别所需的最少信息（即，仅限必填字段）
3.  为这个特定的人实际插入的内容（即，可以插入我为这个人所拥有的任何内容，无论它是否小于所需的最少信息量）。这里的重要问题是字段“XXX”可能具有 NULL 值，因为我从未在其中插入任何内容，或者因为我故意插入了 NULL 值。具有默认值的字段的逻辑相同。所以应该在某个地方反映出我已经处理了这个特定的字段。
4.  已验证插入的信息量（即，即使我加载了大约 5 个字段，我也只能检查 3 个字段的自洽性，而忽略剩下的 2 个字段）。

所以我的问题是如何在技术上组织它。目前，所有这些必需的功能要么被硬编码，没有统一的逻辑，要么被分解成完全独立的块。我需要创建一个统一的方法。

在这方面，我脑子里有一些幼稚的想法。例如，对于每个类别的人，我可以创建并存储可能字段的列表（我称之为“模板”）。A 可以标记那些必填字段。

当我插入关于一个人的记录时，我会复制模板并标记该模板中的哪些字段实际上已被处理。在下一阶段，我可以在此模板副本中标记当前将验证的那些字段。

验证模块通过以下方式进行了特别修正：对于每个验证程序，我创建一个在此特定验证程序中使用的字段列表。然后，我只调用那些在模板副本中实际标记为“待验证”的字段的验证过程，以供要验证的特定人员使用（参见前面的段落）。

如您所见，这是解决此问题的最直接方法。但我的猜测是，有很多我不知道的非常标准化的方法。我真的怀疑我是世界上第一个解决这样一个问题的人。我不喜欢我的解决方案，因为编写代码以在这个复制的模板中正确反映记录中发生的所有“更新”真的很痛苦。

所以，我请你分享你的意见，你将如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:40:54.093

我认为这里有两个问题：

*   如何在数据库中存储多态数据？
*   如何验证复杂的业务规则？

您应该分别解决它们 - 尝试同时解决这两个问题可能太难了。

在 RDBMS 中有几种处理多态数据的方法——例如，ORM 使用术语[继承映射](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html)。这里的三个解决方案——每个类层次结构的表、每个子类的表和每个具体类的表——是“纯”关系解决方案。您还可以使用“[实体-属性-值](https://stackoverflow.com/questions/1336449/eav-over-sql-server)”设计，或使用文档方法（以 XML 或 JSON 等结构化格式存储数据）——这些不是“纯粹的”关系选项，但有它们的位置。

验证复杂的业务规则通常是使用[规则引擎](http://en.wikipedia.org/wiki/Business_rules_engine)完成的——这些是非常酷的技术，但你必须确保你的问题真的适合他们的解决方案——决定投资规则引擎意味着你的项目变成了规则引擎项目，而不是“人类”项目。或者，大多数主流解决方案都在应用程序的业务逻辑层中体现了有关实体的业务逻辑。听起来你已经超越了这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:16:11.817

这个确切的问题，无论是在健康方面还是在金融工具方面，都在 Martin Fowlers 的《分析模式》一书中用作主要示例。这是一个广泛的话题。正如@NevilleK 所说，您正在尝试处理两个问题，最好分别处理它们。解决这些问题的一种超简化方法是：

1 多态数据的存储——只在类别表中放入类别共有的强制性数据。对于可选数据，将它们放在一个单独的表中，与类别表呈 1-1 关系。仅当有要记录的值时，才会在这些可选表中输入条目。数据验证的记录也可以放在这些附加表中。

2 验证复杂的业务规则——考虑可能出现的错误类型很有用。有多种方法可以对错误进行分类，但我发现最有用的一种方法是 (a) 类型错误，仅通过查看数据就可以判断该值是错误的 - 例如 1980-02-30。(b) 上下文错误，其中人们只能通过参考先前捕获的日期来检测错误 - 例如，出生日期 1995-03-15，结婚日期 1996-08-26。(c) 对系统撒谎——数据类型正常；上下文还可以；但是只有在以后有更多信息曝光时才能检测到该信息是不正确的，例如，如果我将我的 DoB 注册为 1990-12-31，此时它是不同的。后一类错误通常必须由正在开发的系统之外的程序处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:24:44.857

我会使用派对角色模式（Silverston）：

```
Party
id
name

Individual : Party
current_weight
current_height

PartyRole
id
party_id
from_date
to_date (nullable)

AdultRole : PartyRole
number_of_children

FemaleAdultRole : AdultRole
number_of_pregnancies 
```

Postgres 有一个时间扩展，这样你就可以强制一个方一次只能扮演一个角色（但保持他们的角色历史）。

使用表继承。为简单起见，使用单表继承（有空值），没有空值使用类表继承。

# php - 在页面刷新/关闭之前设置 cookie

> ID：15644275
> 
> 赞同：1
> 
> 时间：2013-03-26T18:04:19.597
> 
> 标签：php, javascript, joomla

我再次向 SO 社区寻求一点帮助。

我正在修改一个 Joomla“测验”组件，使其按照我需要的方式运行。我现在要做的是改变组件的“刷新”行为。基本上，每个测验都有一个超时时间，即用户不再可以访问测验的时间，所以当计时器变为 0 时，测验被提交等等，但是这个组件的默认行为使得每当页面刷新，计时器将重置为初始设置时间（比如 10 分钟）

问题是我希望能够让计时器在刷新的情况下从它离开的地方继续。

自从 3 或 4 年前我就没有使用过 PHP，所以我有点迷路了。

为了能够实现所需的行为，我正在设置一个 cookie，它将存储（通过内爆）初始时间（打开测验时）和“现在”时间（加载时它设置为 0，但刷新时我想要“更新” cookie 以存储重新加载时间）。

通过初始时间和现在时间，我将能够计算已经过去了多少时间并将计时器从它停止的地方放置。

问题是，我正在尝试使用 javascript 'onbeforeunload' 来“更新” cookie，以便我可以设法将刷新时间放入 cookie。但由于某种原因，它根本没有做任何事情。当我去查看 cookie 内容时，一切都与设置 cookie 时一样。

我知道为了更新 cookie，我必须删除它然后重新设置它，但我没有成功。

下面是示例代码：

```
//This is responsible for setting the cookie (via PHP):
<?php
$name = "progress";
$now = 0;
$time_diff = 0;
$expire = time() + 3600;
$data = array(time(), $now, $time_diff, $this->quiz->time_limit);
//$var = implode(',', $data);

if(isset($_COOKIE[$name])) {
    /* If defined, update the timer */

} else {
    setcookie($name, implode(',',$data), $expire);
}
echo $_COOKIE[$name];
echo "<br />";
echo $this->quiz->time_limit;
?> 
```

这是为了检测“刷新”事件（使用将运行 PHP 的 Javascript）：

```
window.onbeforeunload = function() {
    <?php
        $name = "progress";
        $list = explode($_COOKIE[$name]);
        //delete cookie
        setcookie($name, "", time() - 3600);

        //Update the fields
        $list['1'] = time(); //now - refresh time
        $list['2'] = $list['1'] - $list['0']; //time_diff

        //Set the cookie again
        setcookie($name, implode(',', $list), time() + 3600);
    ?>
} 
```

谁能指出这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:13:01.823

As has been said in the comments, JavaScript cannot run PHP code like that... but if you use AJAX then you can. Now with the code you posted for us to see, if you load up your page in the browser and view the code your function will look like this:

```
window.onbeforeunload(){

} 
```

So it's no surprise that nothing is happening with your cookies when you are closing your browser. Now, without seeing your other functions it's hard to tell exactly what is happening but you can use PHP and JavaScript intertwined but in a different fashion. Let me explain this with an example.

```
window.onbeforeunload(){
  var name = <?php $name='Steve'; echo($name); ?>;
  console.log(name);
} 
```

If you had this code and loaded the page in the browser you would no longer see the PHP code, but instead would see this:

```
window.onbeforeunload(){
  var name = 'Steve';
  console.log(name);
} 
```

* * *

With that being said, here are a few links you might find helpful.

*   [JavaScript Cookies](http://www.quirksmode.org/js/cookies.html)
*   [Set/Get Cookie using PHP and JavaScript](http://www.satya-weblog.com/2007/05/php-and-javascript-cookie.html)
*   [Simple AJAX - PHP and JavaScript](http://tech.pro/tutorial/791/simple-ajax-php-and-javascript)

# sql - SQL 更新多行

> ID：15644278
> 
> 赞同：0
> 
> 时间：2013-03-26T18:04:36.330
> 
> 标签：sql, sql-server, sql-update

```
UPDATE
  TABLE_1
SET
  COL_1 = (
             SELECT
               SUM(TOT)
             FROM
               TABLE_2
           )
WHERE
  CUST_NO = TABLE_2.CUST_NO 
```

所以，到目前为止，这是我的 SQL。本质上，我试图将 TABLE_1 中的 COL_1 更新为存储在 TABLE_2 中的 TOT 的总和。我正在尝试从两个表的 CUST_NO 上更新它。

我知道我的代码根本不起作用，但我真的不知道该怎么做。

因此，在我运行 SQL 之前，TABLE_1 中的一行的示例是：

```
|CUST_NO |COL_1|
|1000    |null |
|1001    |null | 
```

和 TABLE_2：

```
|CUST_NO |TOT  |
|1000    |15   |
|1000    |17   |
|1001    |13   |
|1001    |12   | 
```

而我最终想要/需要的：

表格1：

```
|CUST_NO |COL_1|
|1000    |32   |
|1001    |25   | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:10:38.350

这可能是你想要的：

```
UPDATE TABLE_1
    SET COL_1 = (SELECT SUM(TOT)
                 FROM TABLE_2
                 WHERE  table_1.CUST_NO = TABLE_2.CUST_NO    
                ) 
```

这假设您要更改所有行。否则，试试这个：

```
UPDATE TABLE_1
    SET COL_1 = (SELECT SUM(TOT)
                 FROM TABLE_2
                 WHERE  table_1.CUST_NO = TABLE_2.CUST_NO    
                )
where exists (select 1 from table_2 WHERE  table_1.CUST_NO = TABLE_2.CUST_NO) 
```

只需更改表 1 中的客户编号在表 2 中的行。

根据数据库的不同，可能还有其他表达方式。但是，这种语法应该适用于大多数数据库。

# wamp - Wamp 权限窗口 8

> ID：15644281
> 
> 赞同：1
> 
> 时间：2013-03-26T18:04:39.323
> 
> 标签：wamp

**问题**

我已经尝试并阅读了有关此主题的各种问题，但无法使其正常工作。我正在尝试使用虚拟主机来访问与 wamp 使用的默认 /www 不同的文件夹。但我不断收到错误消息；

```
Forbidden

You don't have permission to access / on this server. 
```

我可以完美地访问本地主机和 phpmyadmin，但不能访问我创建的任何虚拟主机。

**httpd-vhosts.conf**

```
# Virtual Hosts
#
# Required modules: mod_log_config

Listen 80

<VirtualHost *:80>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:\Program Files (x86)\2\. Apps\Wamp\www"
    ServerName localhost
    <Directory "C:/wamp/www">
                Options Indexes FollowSymLinks
        Order allow,deny
        Allow from all
        </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:\Users\Chris\Documents\CBull Files\Projects\Tests"
    ServerName test.lo
    ServerAlias test.lo
    <directory "C:\Users\Chris\Documents\CBull Files\Projects\Tests">
    Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride all
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
    </directory> 
```

**主机**

```
# Wamp Server Settings
127.0.0.1       localhost
127.0.0.1       test.lo 
```

**httpd.conf**

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:25:04.523

谢谢大家的意见，主要有两个问题

1.  我将 wamp 安装到一个文件夹中，该文件夹嵌套在一个文件夹中，该文件夹的名称有一个空格，因此`c:/folder/folder with a space/wamp/`我被告知这是不好的做法，如果有人知道为什么请告诉我。

2.  互联网协议（即 ipv6）存在问题，因此解决此问题您需要确保 wamp 仅使用 ipv4，在`httpd.conf`find内`Listen 80`并更改为`Listen 0.0.0.0:80`. 同样，我不确定这是做什么的，如果有人知道，请在下面发布。

我希望这可以帮助其他人陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:26:19.920

尝试将以下块替换为：

```
<VirtualHost test.lo:80>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:\Users\Chris\Documents\CBull Files\Projects\Tests"
    ServerName test.lo
    ServerAlias test.lo
    <directory "C:\Users\Chris\Documents\CBull Files\Projects\Tests">
        Options Indexes FollowSymLinks Includes ExecCGI
            AllowOverride all
            Order Deny,Allow
            Deny from all
            Allow from 127.0.0.1
    </directory>
</VirtualHost> 
```

我只做了一项更改：`<VirtualHost *:80>`替换为`<VirtualHost test.lo:80>`.

注意：你`</VirtualHost>`最后错过了。

# uml - 使用 UML 时如何在类图中定义属性？

> ID：15644291
> 
> 赞同：1
> 
> 时间：2013-03-26T18:05:05.110
> 
> 标签：uml

我试图在开发尚未开始时如何构建类图。我的理解是，您在进行任何开发之前都会将 UML 图放在一起。我在[http://digitsby.me/2010/01/14/idiots-guid-to-uml-class-diagrams.html](http://digitsby.me/2010/01/14/idiots-guid-to-uml-class-diagrams.html)看到了一篇文章。

如果我在“类”标题下查看，我会看到关于类属性的描述，例如名字、姓氏等

1.  如果开发尚未开始，这些如何定义？
2.  看到开发尚未开始，如何给出类名？
3.  我假设当它提到公共和私有时，这意味着在前者的情况下，任何其他对象都可以访问该属性，而私有时，它仅限于 User 类。那是对的吗？
4.  为什么在例如盐和例如登录、注销之间存在分隔符？
5.  类图是否只出现在用例和活动图之后？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T22:19:44.157

1&2：想想你的功能背景。你必须制作一个软件来管理图书馆？您可能会操作书籍，因此您将拥有 UML 中的“书籍”。你可能需要知道这本书的标题和作者。因此很自然地，使用 UML，您将创建一个名为 Book 的 UML 类，其中包含属性 title 和 author。而且你不需要知道它会真正对应于真正的开发语言中的一个真正的类。

3：正确。

4：分隔符上面是属性，下面是操作（即方法）

5：这个问题没有唯一的答案。这取决于您的项目方法。UML 没有告诉你什么时候使用哪个图表，它只是给你工具。就个人而言，我喜欢从我认为基本的用例开始，然后我喜欢制作第一个非常通用的类图，只有主要类和非常重要的属性（没有操作，没有可见性），以澄清所涉及数据的全球视野。然后我用活动图、详细的类图和序列图进一步详细说明了这些过程。但这是我喜欢的工作方式，不是一般要求。

# php - 使用php创建数据库表时出错

> ID：15644299
> 
> 赞同：0
> 
> 时间：2013-03-26T18:05:28.440
> 
> 标签：php, mysql

我想使用 php (mysql_query) 在数据库中创建一个表

表有“n”个属性。在 n 中，数组中有 n-2 个属性名称可用。

我无法解释我从哪里得到数组，但它看起来像这样 - [http://i.stack.imgur.com/tH98f.png](http://i.stack.imgur.com/tH98f.png)

这是生成字符串以在 mysql_query 中执行的代码。

```
 $str="CREATE TABLE $register_name(id int NOT NULL AUTO_INCREMENT, date DATE, ";
    $j=0;
    while($j<$i)
    {
        $str=$str.$roll_no[$j]." int(100), ";
        $j++;

    }
    $str=$str."PRIMARY KEY(id))";

require('blogic.php');
$obj = new blogic();
$createtable=$obj->create($str); 
```

当我回显 $str 时，我得到了这个：

```
CREATE TABLE $register_name(id int NOT NULL AUTO_INCREMENT, date DATE, 913310128 int(100), 0913310129 int(100), PRIMARY KEY(id)) 
```

但是，它给出了这样的错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“913310128 int(100)、0913310129 int(100)、PRIMARY KEY(id))”附近使用正确的语法

我不明白这个问题。当我不使用 roll_no 数组时，它工作正常。请让我知道这是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:14:46.087

从[文档](http://dev.mysql.com/doc/refman/4.1/en/identifiers.html)：

“标识符可以以数字开头，但除非引用，否则可能不仅仅由数字组成。”

因此，您可以引用名称：

```
$str=$str."`".$roll_no[$j]."` int(100), "; 
```

或者，在它前面加上一个字母：

```
$str=$str."c".$roll_no[$j]." int(100), "; 
```

# wordpress - 使用变量时 Wordpress get_post_meta 不返回

> ID：15644305
> 
> 赞同：1
> 
> 时间：2013-03-26T18:05:52.343
> 
> 标签：wordpress, metadata

我正在尝试获取一个插件来读取附件的帖子元数据，并使用它来更新它所附加的帖子的内容。我在我的主题 function.php 中使用以下内容：

```
add_action( 'afip_created_post', 'get_desc', 10, 2 );
function get_desc( $post_id, $attachment_id ) {

$postmeta = get_post_meta ($attachment_id, '_wp_attachment_metadata', true);

    $meta = $postmeta['image_meta'];
    $mmwwdesc = $meta['description'];
    wp_update_post( array( 'ID' => $post_id, 'post_content'  => $mmwwdesc  ) );

} 
```

然后在插件中使用这一行来挂钩函数

```
do_action( 'afip_created_post', $new_post_id, $post_id ); 
```

如果我用另一个帖子中的数字（即“15”）填写变量“$attachment_id”，我会将描述插入到已发布的帖子中。如果我将输出更改为，`wp_update_post( array( 'ID' => $post_id, 'post_content' => $attachment_id ) );`我会在已发布帖子的正文中得到回显的 id 号。我不明白为什么原始代码不起作用，因为 $attachment_id 似乎已正确定义。我只是 php 的初学者。有什么明显的我做错了吗？变量`$attachment_id`应该在返回时被回显，还是类似的技术？

背景：我正在使用两个 wordpress 插件，一个称为媒体元数据工作流向导 (MMWW)，另一个称为自动特色图像发布 (AFIP)。MMWW 提取图像元数据并将其作为后期元数据写入数据库。AFIP 使用上传的媒体创建新帖子，并将每个图像附加到帖子，将其设置为帖子缩略图。我不认为这是调用函数时元数据未准备好的问题，因为 AFIP 在媒体上传后创建帖子，并将其元数据写入数据库。在它已经创建之后，我还将我的功能作为帖子的更新挂钩。

我进行了广泛的搜索，反复试验，但没有成功。有人可以帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T08:43:41.170

我认为您的问题是 get_post_meta 函数在functions.php中返回空白。处理此问题的方法是使用带有 wordpress 的 MYSQL 查询来返回您的 psot 元数据中的数据。

首先，您需要全局 $wpdb 对象，因此在函数开始时编写：`global $wpdb;` 然后您需要使用 mysql 和 $wpdb 对象执行 get_post_meta 操作：

```
$postmeta = $wpdb->get_var("SELECT meta_value FROM $wpdb->postmeta" WHERE meta_key = '_wp_attachment_metadata' AND post_id = $attachment_id"); 
```

用 wpdb 查询替换你的 get_post_meta 行，你应该没问题。

# jquery - 结合jQuery函数使之更简单

> ID：15644307
> 
> 赞同：0
> 
> 时间：2013-03-26T18:05:57.710
> 
> 标签：jquery

我有一个简单的函数，可以在鼠标悬停时更改图像的来源，并在鼠标悬停时将其改回。它工作得很好，但是当我尝试将此效果应用于具有相同类的多个图像时，错误的图像被替换了。所以我为每个鼠标悬停图像编写了不同的函数。它正在变得太多的代码。有人可以给我一些想法，我可以如何压缩此代码以使具有特定类的所有图像切换到它们适当的悬停图像并返回。

```
$(document).ready(function(){
var passiveBio = $("#index_container img.bio").attr("src");
var hoverBio = passiveBio.replace(".jpg", "_hover.jpg");
$("#index_container img.bio")
    .mouseover(function() { 
        $(this).attr("src", hoverBio);
        })
    .mouseout(function() {
        $(this).attr("src", passiveBio);
        });
var passiveSamples = $("#index_container img.samples").attr("src");
var hoverSamples = passiveSamples.replace(".jpg", "_hover.jpg");
$("#index_container img.samples")
    .mouseover(function() { 
        $(this).attr("src", hoverSamples);
        })
    .mouseout(function() {
        $(this).attr("src", passiveSamples);
        });
var passiveServices = $("#index_container img.services").attr("src");
var hoverServices = passiveServices.replace(".jpg", "_hover.jpg");
$("#index_container img.services")
    .mouseover(function() { 
        $(this).attr("src", hoverServices);
        })
    .mouseout(function() {
        $(this).attr("src", passiveServices);
    });}); 
```

这是带有图像的 div。

```
<div id="index_container">
    <a href="samples.html"><img class="index_box samples" src="images/samples.jpg"/></a>
    <a href="services.html"><img class="index_box services" src="images/services.jpg"/></a>
    <a href="about.html"><img class="index_box bio" src="images/bio.jpg"/></a>
    <img class="index_box" src="images/grey.png"/>
    <img class="index_box" src="images/light_blue.png"/>
    <img class="index_box" src="images/dark_blue.png"/>
    <img class="index_box" src="images/grey.png"/>
    <img class="index_box" src="images/light_blue.png"/>
    <img class="index_box" src="images/dark_blue.png"/>
    <p class="clear"></p>
</div> 
```

我尝试将所有 a 图像设为同一类，并将 .jpg 更改为 _hover.jpg 但它们没有更改为正确的图像。他们都变成了同一个悬停图像，而不是他们自己的。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:10:26.907

定位所有图像，或者给它们一个公共类并将其用作选择器，然后在函数内部进行动态替换：

```
$('#index_container img').on({
    mouseenter: function() {
        this.src = this.src.replace('.jpg', '_hover.jpg');
    },
    mouseleave: function() {
        this.src = this.src.replace('_hover.jpg', '.jpg');
    }
}); 
```

# oracle - ServiceStack 中的 Dapper 和 OrmLite IDBConnectionFactory

> ID：15644309
> 
> 赞同：3
> 
> 时间：2013-03-26T18:05:59.223
> 
> 标签：oracle, servicestack, dapper, ormlite-servicestack

使用 ServiceStack 创建服务的速度给我留下了深刻的印象，但有一段时间我无法掌握在我的项目中同时使用 OrmLite 和 Dapper 的概念。我正在我的 Global.asax.cs 中注册一个这样的 IDbConnectionFactory

```
 public override void Configure(Funq.Container container)
        {
            var dbConnectionFactory =
                new OrmLiteConnectionFactory(ConfigUtils.GetConnectionString("test"), true, OracleDialect.Provider);

            container.Register<IDbConnectionFactory>(dbConnectionFactory);          
            container.Register<ISubscriberRepository>(
                c => new SubscriberRepository(c.Resolve<IDbConnectionFactory>()));
        } 
```

这对 OrmLite 来说很好用，但对 Dapper 来说就没那么简单了。也许我只是在想这应该比实际上更方便。在我的存储库中，我试图调用 Oracle 存储过程。这是我在这个过程中使用 Dapper 而不是 OrmLite 的主要原因。这是我的存储库：

```
 public class SubscriberRepository : ISubscriberRepository {
    public SubscriberRepository(IDbConnectionFactory conn) {
        _conn = conn;
    }

    public IDbConnectionFactory _conn { get; set; }

    public SubscriberResponse GetSubscriber(SubscriberRequest request) {
        using (IDbConnection db = _conn.OpenDbConnection()) {
            var resp = new SubscriberResponse();

            List<Subscriber> s = db.Select<Subscriber>(
                q => q.Subscribernum == request.Subscribernum &&
                     q.Personcode == request.Personcode &&
                     q.Clientcode == request.Clientcode);

            resp.Subscriber = s[0];

            return resp;
        }
    }

    public SubscribersResponse SearchSubscribers(SubscribersRequest request) {
        var response = new SubscribersResponse();

        using (var cnn = new OracleConnection("this is my conneciton string")) {
            cnn.Open();

            var p = new OracleDynamicParameters();
            p.Add("@username", "uname", OracleDbType.Varchar2);
            p.Add("@Subscribernum", "", OracleDbType.Varchar2);
            p.Add("@Personcode", "", OracleDbType.Varchar2);
            p.Add("@Lastname", "TEST", OracleDbType.Varchar2);
            p.Add("@Firstname", "HA", OracleDbType.Varchar2);
            p.Add("@Mi", "", OracleDbType.Varchar2);
            p.Add("@Dob", null, OracleDbType.Date);
            p.Add("@MaxResults", 200, OracleDbType.Int32);
            p.Add("@Curs", dbType: OracleDbType.RefCursor, direction: ParameterDirection.Output);

            using (SqlMapper.GridReader multi = cnn.QueryMultiple("SEARCHSUBSCRIBER", p,
                                                                  commandType: CommandType.StoredProcedure)) {
                List<SearchSubscriberResults> r = multi.Read<SearchSubscriberResults>().ToList();
                response.Results = r;
            }
        }
        return response;
    }
} 
```

这行得通。但它并没有真正在 SearchSubscribers 函数中使用 IDbConnectionFactory。我真的不想在我的存储库中查看连接字符串，因为我真的可以在服务本身中预先注册它们。

我尝试使用 ServiceStack.Razor.Dapper.SqlMapper.QueryMultiple() 但这不起作用，因为如果不使用[OracleDynamicParamaters](http://blog.vijay.name/2012/07/dapper-micro-orm-for-oracle-and-microsoft-net/ "Oracle动态参数")解决方法，我无法将 Oracle sys_refcursor 映射回任何东西。

所以，我的问题是我可以从 IDBConnectionFactory 为 Dapper 创建一个连接吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T16:42:16.210

我没有在 .NET 中使用过 Oracle（从我的 Perl 时代开始就没有），但 OracleConnection 实现了接口 IDbConnection。

您应该能够投射您从中获取的数据库连接：

```
IDbConnection db = _conn.OpenDbConnection() 
```

并将其转换为 OracleConnection （假设[OrmLite 提供者创建了相同的实例](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/ba9d7f9887837361416f3829a3e4d31432db162b/src/ServiceStack.OrmLite.Oracle/OracleOrmLiteDialectProvider.cs#L54)）。

```
var cnn = db as OracleConnection; 
```

...然后您可以尝试调用所有特定于 Oracle 的东西，例如 OracleDynamicParameters。

您可能必须在 AppHost.Configure() 或某处进行设置：

```
OrmLiteConfig.DialectProvider = new OracleOrmLiteDialectProvider(); 
```

# php - 本地主机上有两台服务器的虚拟主机

> ID：15644314
> 
> 赞同：0
> 
> 时间：2013-03-26T18:06:04.873
> 
> 标签：php, windows, zend-framework, vhosts

我在运行 Windows 7 的笔记本电脑上运行了两台 apache Web 服务器。一台在端口 80（XAMPP）上，另一台在 81（Zend CE）上。我使用 Zend Server one 来开发站点。我想使用端口 81 而不是端口 80 在第二台服务器上设置我的虚拟主机。我已经尝试过，但得到的只是在谷歌上搜索的请求。

```
<VirtualHost *:81>
DocumentRoot "C:\Program Files (x86)\Zend\Apache2\htdocs"
ServerName localhost:81
</VirtualHost>

<VirtualHost *:81>
DocumentRoot "C:/Program Files (x86)/Zend/Apache2/htdocs/folder"
ServerName folder.app
</VirtualHost> 
```

我对主机文件进行了更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:35:45.220

你记得编辑：

```
NameVirtualHost *:81 
```

在您的 vhosts 文件的顶部？

# mysql - MySQL - 用同一行中另一列的子字符串填充一列

> ID：15644317
> 
> 赞同：6
> 
> 时间：2013-03-26T18:06:14.463
> 
> 标签：mysql

我想遍历整个表，用另一列的值的子字符串填充新创建列的值。

给定一个表结构，如下所示：

```
+--------+--------------+------+-----+---------+----------------+
| Field  | Type         | Null | Key | Default | Extra          |
+--------+--------------+------+-----+---------+----------------+
| id     | int(11)      | NO   | PRI | NULL    | auto_increment |
| email  | varchar(150) | YES  |     | NULL    |                |
| domain | varchar(100) | YES  |     | NULL    |                |
+--------+--------------+------+-----+---------+----------------+ 
```

其中包含类似的数据：

```
+----+-------------------------+--------+
| id | email                   | domain |
+----+-------------------------+--------+
|  1 | bob@domain1.com         | NULL   |
|  2 | jim@domain1.com         | NULL   |
|  3 | terry@domain1.com       | NULL   |
|  4 | frank@anotherdomain.com | NULL   |
|  5 | linda@anotherdomain.com | NULL   |
|  6 | craig@thethird.com      | NULL   |
+----+-------------------------+--------+ 
```

我想要一个查询来解析电子邮件地址的域部分，并将其放在域列中，最终得到如下结果：

```
+----+-------------------------+-------------------+
| id | email                   | domain            |
+----+-------------------------+-------------------+
|  1 | bob@domain1.com         | domain1.com       |
|  2 | jim@domain1.com         | domain1.com       |
|  3 | terry@domain1.com       | domain1.com       |
|  4 | frank@anotherdomain.com | anotherdomain.com |
|  5 | linda@anotherdomain.com | anotherdomain.com |
|  6 | craig@thethird.com      | thethird.com      |
+----+-------------------------+-------------------+ 
```

目前，我正在使用 shell 脚本在 MySQL 引擎*之外*执行此操作，但这效率低下，而且我确信在 MySQL 引擎内部必须有更好的方法来执行此操作。

效率在这里很重要，因为我将在生产中执行此操作的表有数万甚至数十万行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T18:08:14.057

您可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)：

```
SELECT
  id,
  email,
  SUBSTRING_INDEX(email, '@', -1) domain
FROM
  yourtable 
```

或者这个来更新你的数据：

```
UPDATE yourtable
SET domain = SUBSTRING_INDEX(email, '@', -1) 
```

请[在此处](http://sqlfiddle.com/#!2/a0865/1)查看小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:10:41.493

使用[`SUBSTRING_INDEX`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)：

> 如果 count 为负数，则返回最终分隔符右侧（从右侧开始计数）的所有内容。

因此，要将所有内容都放在 的右侧`@`，您可以提供一个负数：

```
UPDATE YourTable
SET Domain = SUBSTRING_INDEX(email, '@', -1) 
```

## [SQL小提琴](http://sqlfiddle.com/#!2/f04fd/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T18:09:53.820

```
update your_table
set domain = SUBSTRING_INDEX(email, '@', -1)
where domain is null; 
```

如果表很大，您应该考虑将更新分成块。我建议使用[`split`](http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script_split.html)common_schema 中的函数来做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T18:10:32.513

```
-1 will give the value after `@`

update tablename set domain = SUBSTRING_INDEX(email, '@', -1) 
```

# java - 将限制整数设置为 JTextField

> ID：15644318
> 
> 赞同：0
> 
> 时间：2013-03-26T18:06:22.453
> 
> 标签：java, swing, jlabel, jtextfield, setbounds

如何为用户设置输入限制，我的意思是用户只能输入 2 或 4 个整数，不能再输入了。

代码：

```
 JLabel dateD = new JLabel("| Date  Day:");
 dateD.setBounds(170,270, 120, 25);

 dateDD = new JTextField();
 dateDD.setBounds(235,270, 20, 25); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:13:35.287

使用`DocumentFilter`应该对您进行分类，按如下方式创建过滤器：-

```
class MaximumCharacters extends DocumentFilter {

        private int maxLength;

        public MaximumCharacters() {
            maxLength = 10; // The number of characters allowed
        }

        @Override
        public void insertString(FilterBypass fb, int offset, String string,
                AttributeSet attr) throws BadLocationException {
            if (maxLength > 0
                    && fb.getDocument().getLength() + string.length() <= maxLength) {
                super.insertString(fb, offset, string, attr);
            }
        }

        @Override
        public void replace(FilterBypass fb, int offset, int length,
                String text, AttributeSet attrs) throws BadLocationException {

            if ((fb.getDocument().getLength() + text.length() - length) <= maxLength)
                super.replace(fb, offset, length, text, attrs);
        }
    } 
```

然后您将 设置`DocumentFilter`为您的`JTextField`组件，如下所示：-

```
((AbstractDocument) dateDD.getDocument()).setDocumentFilter(new MaximumCharacters()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:39:37.247

对于上面的答案，下面是我为处理上述情况而创建的实用方法 -

```
 /**
     * Method installNumericMaximumCharacters.
     * 
     * @param document
     *            AbstractDocument
     * @param numberofChars
     *            int
     */
    public static void installNumericMaximumCharacters(
            AbstractDocument document, final int numberofChars) {
        document.setDocumentFilter(new DocumentFilter() {
            @Override
            public void insertString(FilterBypass fb, int offset,
                    String string, AttributeSet attr)
                    throws BadLocationException {
                try {
                    if (string.equals(".")
                            && !fb.getDocument()
                                    .getText(0, fb.getDocument().getLength())
                                    .contains(".")) {
                        super.insertString(fb, offset, string, attr);
                        return;
                    }
                    Double.parseDouble(string);
                    if (fb.getDocument().getLength() + string.length() <= numberofChars) {
                        super.insertString(fb, offset, string, attr);
                    } else {
                        Toolkit.getDefaultToolkit().beep();
                    }
                } catch (Exception e) {
                    Toolkit.getDefaultToolkit().beep();
                }
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length,
                    String text, AttributeSet attrs)
                    throws BadLocationException {
                try {
                    if (text.equals(".")
                            && !fb.getDocument()
                                    .getText(0, fb.getDocument().getLength())
                                    .contains(".")) {
                        super.insertString(fb, offset, text, attrs);
                        return;
                    }
                    Double.parseDouble(text);
                    int l = fb.getDocument().getLength() - length
                            + text.length();
                    if (length > 0) {
                        fb.getDocument().remove(offset, length);
                    }
                    if (l <= numberofChars) {
                        super.insertString(fb, offset, text, attrs);

                    } else {
                        Toolkit.getDefaultToolkit().beep();
                    }
                } catch (Exception e) {
                    Toolkit.getDefaultToolkit().beep();
                }
            }
        });
    } 
```

该方法有点不言自明。当它发生变化时，`Document`它会唤起`DocumentFilter`. 请注意，您不能`setText()`相同`Document`。您将不得不为此使用该`FilterBypass`对象。

# java - JTable 中的 JFileChooser

> ID：15644319
> 
> 赞同：0
> 
> 时间：2013-03-26T18:06:24.150
> 
> 标签：java, swing, jtable, jfilechooser, tablecelleditor

我正在尝试创建一个新组件以进入 JTable。它由一个 JTextfield 组成，单击该字段时会生成一个 JFileChooser，因此用户可以浏览文件系统并选择所需的文件，然后使用该文件的路径填充该字段。到目前为止，我已经到了可以在编辑器中填写文本字段的地步，但是当我单击它时，FilecChooser 不会产生。有人知道我在这里做错了什么吗？

```
public class FileBrowserCellEditor extends AbstractCellEditor implements TableCellEditor, ActionListener {

private static final long serialVersionUID = 1L;
private Component frame;
JButton button;
JTextField textField;
String path;
JFileChooser fc;
protected static final String EDIT = "edit";

public FileBrowserCellEditor(Component frame){
    this.frame = frame;

    textField = new JTextField();
    textField.setActionCommand(EDIT);
    textField.addActionListener(this);

    fc = new JFileChooser();
}

@Override
public Object getCellEditorValue() {

    return path;

}

@Override
public Component getTableCellEditorComponent(JTable arg0, Object arg1,
        boolean arg2, int arg3, int arg4) {

    return textField;
}

@Override
public void actionPerformed(ActionEvent e) {

    //Debug
    System.out.println(e.getActionCommand());

    if (EDIT.equals(e.getActionCommand())) {
        //The user has clicked the cell, so
        //bring up the dialog.
        textField.setText(path);
        fc.showOpenDialog(frame);

        fireEditingStopped(); //Make the renderer reappear.

    } else { //User pressed dialog's "OK" button.
        //currentColor = colorChooser.getColor();

            File file = fc.getSelectedFile();
            this.path = file.getAbsolutePath();

    }

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T14:15:28.817

这是一个简单的单元格编辑器，它`JFileChooser`在双击单元格时显示：

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.io.File;
import javax.swing.DefaultCellEditor;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.table.TableCellEditor;

public class FileChooserCellEditor extends DefaultCellEditor implements TableCellEditor {

    /** Number of clicks to start editing */
    private static final int CLICK_COUNT_TO_START = 2;
    /** Editor component */
    private JButton button;
    /** File chooser */
    private JFileChooser fileChooser;
    /** Selected file */
    private String file = "";

    /**
     * Constructor.
     */
    public FileChooserCellEditor() {
        super(new JTextField());
        setClickCountToStart(CLICK_COUNT_TO_START);

        // Using a JButton as the editor component
        button = new JButton();
        button.setBackground(Color.white);
        button.setFont(button.getFont().deriveFont(Font.PLAIN));
        button.setBorder(null);

        // Dialog which will do the actual editing
        fileChooser = new JFileChooser();
    }

    @Override
    public Object getCellEditorValue() {
        return file;
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
        file = value.toString();
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                fileChooser.setSelectedFile(new File(file));
                if (fileChooser.showOpenDialog(button) == JFileChooser.APPROVE_OPTION) {
                    file = fileChooser.getSelectedFile().getAbsolutePath();
                }
                fireEditingStopped();
            }
        });
        button.setText(file);
        return button;
    }
} 
```

要将其添加到您的`JTable`：

```
yourJTable.getColumnModel().getColumn(yourColumnIndex).setCellEditor(new FileChooserCellEditor()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:18:43.017

![在此处输入图像描述](../Images/474de0fdf5ece15929f1289572878bf5.png)
您可以尝试以下代码：

```
import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.table.*;
import java.io.*;

class TableFileChooser extends JFrame  
{
    private JTable table;
    private JScrollPane jsPane;
    private TableModel myModel;
    private JPanel dialogPanel;
    private JTextField tf[];
    private JLabel     lbl[];
    public void prepareAndShowGUI()
    {
        setTitle("FileChooser in JTable");
        myModel = new MyModel();
        table = new JTable(myModel);
        jsPane = new JScrollPane(table);
        table.addMouseListener(new MyMouseAdapter());
        getContentPane().add(jsPane);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        prepareDialogPanel();
        pack();
        setLocationRelativeTo(null);
        setVisible(true);

    }
    private void prepareDialogPanel()
    {
        dialogPanel = new JPanel();
        int col = table.getColumnCount() - 1;
        dialogPanel.setLayout(new GridLayout(col,2));
        tf = new JTextField[col];
        lbl = new JLabel[col];
        for (int i = 0; i < col; i++)
        {
            lbl[i] = new JLabel(table.getColumnName(i));
            tf[i] = new JTextField(10);
            dialogPanel.add(lbl[i]);
            dialogPanel.add(tf[i]);
        }
    }
    private void populateTextField(String[] s)
    {
        for (int i = 0 ; i < s.length ; i++ )
        {
            tf[i].setText(s[i]);
        }
    }

    private class MyMouseAdapter extends MouseAdapter
    {
        @Override
        public void mousePressed(MouseEvent evt)
        {
            int x = evt.getX();
            int y = evt.getY();
            int row = table.rowAtPoint(new Point(x,y));
            int col = table.columnAtPoint(new Point(x,y));
            if (col == 2)
            {
                String value = load();
                if (value!=null && ! "null".equalsIgnoreCase(value.trim()) && ! "".equalsIgnoreCase(value.trim()))
                {
                    myModel.setValueAt(value,row,col);
                }
                else
                {
                    myModel.setValueAt("ChooseFile",row,col);
                }
            }
        }
    }
    //Loads the file
    private String load()
    {
        JFileChooser chooser = new JFileChooser(".");
        chooser.setDialogTitle("Open");
        chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        int returnVal = chooser.showOpenDialog(this);
        if(returnVal == JFileChooser.APPROVE_OPTION) 
        {
            File file = chooser.getSelectedFile();
            if (file!= null)
            {
                return file.getAbsolutePath();
            }
            else 
            {
                JOptionPane.showMessageDialog(this,"Please enter a fileName","Error",JOptionPane.ERROR_MESSAGE);
                return null;
            }
        }
        return null;
    }
    private class MyModel extends AbstractTableModel 
    {
        String[] columns = {
                            "Roll No.",
                            "Name",
                            "File Name"
                            };
        String[][] inData = {
                                {"1","Anthony Hopkins","ChooseFile"},
                                {"2","James William","ChooseFile"},
                                {"3","Mc. Donald","ChooseFile"}
                            };
        @Override
        public void setValueAt(Object value, int row, int col)
        {
            inData[row][col] = (String)value;
            fireTableCellUpdated(row,col);
        }
        @Override
        public Object getValueAt(int row, int col)
        {
            return inData[row][col];
        }
        @Override
        public int getColumnCount()
        {
            return columns.length;
        }
        @Override 
        public int getRowCount()
        {
            return inData.length;
        }
        @Override
        public String getColumnName(int col)
        {
            return columns[col];
        }
        @Override
        public boolean isCellEditable(int row ,int col)
        {
            return false;
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                TableFileChooser td = new TableFileChooser();
                td.prepareAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:41:34.483

这是一个在编辑单元格时显示自定义对话框的示例。您应该能够自定义它以使用 JFileChooser 而不是自定义对话框：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.*;

/*
 * The editor button that brings up the dialog.
 */
//public class TablePopupEditor extends AbstractCellEditor
public class TablePopupEditor extends DefaultCellEditor
    implements TableCellEditor
{
    private PopupDialog popup;
    private String currentText = "";
    private JButton editorComponent;

    public TablePopupEditor()
    {
        super(new JTextField());

        setClickCountToStart(1);

        //  Use a JButton as the editor component

        editorComponent = new JButton();
        editorComponent.setBackground(Color.white);
        editorComponent.setBorderPainted(false);
        editorComponent.setContentAreaFilled( false );

        // Make sure focus goes back to the table when the dialog is closed
        editorComponent.setFocusable( false );

        //  Set up the dialog where we do the actual editing

        popup = new PopupDialog();
    }

    public Object getCellEditorValue()
    {
        return currentText;
    }

    public Component getTableCellEditorComponent(
        JTable table, Object value, boolean isSelected, int row, int column)
    {

        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                System.out.println("run");
                popup.setText( currentText );
//              popup.setLocationRelativeTo( editorComponent );
                Point p = editorComponent.getLocationOnScreen();
                popup.setLocation(p.x, p.y + editorComponent.getSize().height);
                popup.show();
                fireEditingStopped();
            }
        });

        currentText = value.toString();
        editorComponent.setText( currentText );
        return editorComponent;
    }

    /*
    *   Simple dialog containing the actual editing component
    */
    class PopupDialog extends JDialog implements ActionListener
    {
        private JTextArea textArea;

        public PopupDialog()
        {
            super((Frame)null, "Change Description", true);

            textArea = new JTextArea(5, 20);
            textArea.setLineWrap( true );
            textArea.setWrapStyleWord( true );
            KeyStroke keyStroke = KeyStroke.getKeyStroke("ENTER");
            textArea.getInputMap().put(keyStroke, "none");
            JScrollPane scrollPane = new JScrollPane( textArea );
            getContentPane().add( scrollPane );

            JButton cancel = new JButton("Cancel");
            cancel.addActionListener( this );
            JButton ok = new JButton("Ok");
            ok.setPreferredSize( cancel.getPreferredSize() );
            ok.addActionListener( this );

            JPanel buttons = new JPanel();
            buttons.add( ok );
            buttons.add( cancel );
            getContentPane().add(buttons, BorderLayout.SOUTH);
            pack();

            getRootPane().setDefaultButton( ok );
        }

        public void setText(String text)
        {
            textArea.setText( text );
        }

        /*
        *   Save the changed text before hiding the popup
        */
        public void actionPerformed(ActionEvent e)
        {
            if ("Ok".equals( e.getActionCommand() ) )
            {
                currentText = textArea.getText();
            }

            textArea.requestFocusInWindow();
            setVisible( false );
        }
    }

    public static void main(String[] args)
    {
        String[] columnNames = {"Item", "Description"};
        Object[][] data =
        {
            {"Item 1", "Description of Item 1"},
            {"Item 2", "Description of Item 2"},
            {"Item 3", "Description of Item 3"}
        };

        JTable table = new JTable(data, columnNames);
        table.getColumnModel().getColumn(1).setPreferredWidth(300);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);

        // Use the popup editor on the second column

        TablePopupEditor popupEditor = new TablePopupEditor();
        table.getColumnModel().getColumn(1).setCellEditor( popupEditor );

        JFrame frame = new JFrame("Popup Editor Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new JTextField(), BorderLayout.NORTH);
        frame.add( scrollPane );
        frame.pack();
        frame.setLocationRelativeTo( null );
        frame.setVisible(true);
    }
} 
```

# c - 测试 strstr 是否返回有效指针

> ID：15644321
> 
> 赞同：0
> 
> 时间：2013-03-26T18:06:43.137
> 
> 标签：c, visual-studio-2010

我正在尝试像这样使用 strstr 函数：

```
const char * pInicio = strstr(origem, chave);       
if (pInicio != NULL) ... 
```

与预期相反，当我进行“if”测试时，编译器会抛出访问位置冲突异常。每次我尝试从字符串中获取一些不存在的关键字时都会发生这种情况。

调用栈是：

```
 ntdll.dll!779315de()    
    [Os quadros abaixo podem estar incorretos e/ou ausentes, nenhum símbolo foi carregado para ntdll.dll]   
    ntdll.dll!779315de()    
    ntdll.dll!7792014e()    
>   msvcr100d.dll!_output_l(_iobuf * stream, const char * format, localeinfo_struct * plocinfo, char * argptr)  Linha 2361 + 0xa bytes  C++
    cccccccc() 
```

输出是：

```
Exceção de primeira chance em 0x0f8620a7 (msvcr100d.dll) no TestesApp.exe: 0xC0000005: Violação de acesso ao ler o local 0x00000001.
Exceção sem-tratamento em 0x779315de no TestesApp.exe: 0xC0000005: Violação de acesso ao ler o local 0x00000001. 
```

在异常之前，变量值是：

1.  查韦：0x00196f64“$ GNGSA”类型：字符*
2.  原点：0x00196840 "$GPRMC,000651.082,V,,,,,,,191210,,,N*4F $GPGGA,000652.091,,,,,0,00,,,M,0.0,M,,0000*5F $ GPGSA,A,1,,,,,,,,,,,,,,,*1E" 类型：const char *
3.  pInicio：0x00000000 无效>类型：const char *

链接器命令行是：

```
/OUT:"C:\Users\Leandro\documents\visual studio 2010\Projects\TestesApp\Debug\TestesApp.exe" /INCREMENTAL /NOLOGO "kernel32.lib" "user32.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" "advapi32.lib" "shell32.lib" "ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" /MANIFEST /ManifestFile:"Debug\TestesApp.exe.intermediate.manifest" /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"C:\Users\Leandro\documents\visual studio 2010\Projects\TestesApp\Debug\TestesApp.pdb" /SUBSYSTEM:CONSOLE /PGD:"C:\Users\Leandro\documents\visual studio 2010\Projects\TestesApp\Debug\TestesApp.pgd" /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE 
```

c/c++ 命令行也是

```
/ZI /nologo /W3 /WX- /Od /Oy- /D "WIN32" /D "_DEBUG" /D "_CONSOLE" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /RTC1 /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fp"Debug\TestesApp.pch" /Fa"Debug\" /Fo"Debug\" /Fd"Debug\vc100.pdb" /Gd /analyze- /errorReport:queue 
```

在此之后，我尝试测试指针是否为空。这是我现在的问题，如何解决？

此致！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:27:44.903

无法复制您的错误。这是我尝试过的：

```
int main( int argc, char **argv )
{
   char * chave = "$GNGSA";
   const char * origem = "$GPRMC,000651.082,V,,,,,,,191210,,,N*4F $GPGGA,000652.091,,,,,0,00,,,M,0.0,M,,0000*5F $GPGSA,A,1,,,,,,,,,,,,,,,*1E";
   const char * pInicio = strstr(origem, chave);
   if (pInicio != NULL)
   {
      printf("found it\n");
   }
   return 0;
} 
```

这在 Visual Studio 2010 中编译和运行没有错误。顺便说一句，它没有找到匹配项。我愿意接受有关如何调整它以创建错误的说明。

- 编辑 -

将编译器命令行设置为： /ZI /nologo /W3 /WX- /Od /Oy- /D "WIN32" /D "_D​​EBUG" /D "_CONSOLE" /D "_UNICODE" /D "UNICODE" /Gm /EHsc / RTC1 /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fp"Debug\odt.pch" /Fa"Debug\" /Fo"Debug\" /Fd"Debug\vc100.pdb" /Gd /analyze- /错误报告：队列

链接器命令行：/OUT:"E:\code\odt\Debug\odt.exe" /INCREMENTAL /NOLOGO "kernel32.lib" "user32.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" “advapi32.lib” “shell32.lib” “ole32.lib” “oleaut32.lib” “uuid.lib” “odbc32.lib” “odbccp32.lib” /MANIFEST /ManifestFile:”Debug\odt.exe.intermediate.manifest " /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"E:\code\odt\Debug\odt.pdb" /SUBSYSTEM:CONSOLE /PGD:"E:\code\ odt\Debug\odt.pgd" /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE

即使两个命令行基本相同，我仍然没有收到错误。我不知道该说什么，对不起。

# java - SQL Server Java 兼容 GUID/UUID（大端唯一标识符）

> ID：15644323
> 
> 赞同：0
> 
> 时间：2013-03-26T18:06:55.700
> 
> 标签：java, .net, sql-server, uniqueidentifier, endianness

我正在尝试将 128 位二进制文​​件转换为 sql 中与 .net 和 java 中相同的唯一标识符。

我知道java使用大端，所以我想以此为基础。

我可以在 .net 中获得正确的字节顺序，但在 SQL Server 中我真的很挣扎。

爪哇：

```
 byte[] bytesOfMessage = "google.com".getBytes("UTF-8");

        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] md5 = md.digest(bytesOfMessage);
        ByteBuffer bb = ByteBuffer.wrap(md5);
        LongBuffer ig = bb.asLongBuffer();
        return new UUID(ig.get(0), ig.get(1)); 
```

返回 1d5920f4-b44b-27a8-02bd-77c4f0536f5a

。网

```
 System.Security.Cryptography.MD5 c = System.Security.Cryptography.MD5.Create();
    byte[] b = c.ComputeHash(Encoding.UTF8.GetBytes("google.com"));
    int z = System.Net.IPAddress.HostToNetworkOrder(BitConverter.ToInt32(b, 0));
    short y = System.Net.IPAddress.HostToNetworkOrder(BitConverter.ToInt16(b, 4));
    short x = System.Net.IPAddress.HostToNetworkOrder(BitConverter.ToInt16(b, 6));
    Guid g = new Guid(z, y, x, b.Skip(8).ToArray());
    return g; 
```

返回 1d5920f4-b44b-27a8-02bd-77c4f0536f5a

SQL

```
DECLARE @s VARCHAR(MAX) = 'google.com' --'goolge.com'

DECLARE @md5 BINARY(16) = HASHBYTES
        (
            'MD5',
            @s
        )

DECLARE @a BINARY(4) = 
        CONVERT
        (
            BINARY(4),
            REVERSE
            (
                CONVERT
                (
                    BINARY(4),
                    LEFT(@md5, 4)
                )
            )
        )

DECLARE @b BINARY(2) = 
        CONVERT
        (
            BINARY(2),
            REVERSE
            (
                CONVERT
                (
                    BINARY(2),
                    RIGHT(@md5, 12)
                )
            )
        )

DECLARE @c BINARY(2) = 
        CONVERT
        (
            BINARY(2),
            REVERSE
            (
                CONVERT
                (
                    BINARY(2),
                    RIGHT(@md5, 10)
                )
            )
        )

DECLARE @d BINARY(8) = 
        CONVERT
        (
            BINARY(8),
            RIGHT(@md5, 8)
        )

SELECT  
    CONVERT
    (
        UNIQUEIDENTIFIER,
        @a + @b + @c + @d
    ) 
```

返回 D86B5A7F-7A25-4895-A6D0-63BA3A706627

在转换为 int64 时，我能够让所有三个产生相同的值，但 GUID 让我感到困惑。

[原始问题](https://stackoverflow.com/questions/15579946/sql-bigint-hash-to-match-c-sharp-int64-hash)

[原始答案](https://stackoverflow.com/questions/8467072/sql-server-varbinary-bigint-with-bitconverter-toint64-values-are-different)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:27:36.687

如果您更正`google`SQL 示例中的拼写（`goolge`在您的帖子中），您将得到正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:16:22.113

SQL Server 不支持 UTF-8 编码。请参阅[在 SQL Server 中存储 UTF-8 数据的说明](http://support.microsoft.com/kb/232580)。使用 Michael Harmon 的建议将您的 .NET 函数添加到 SQLServer 以进行转换。有关如何将 .NET 函数添加到 SQLServer 的说明，请参阅[如何编码...。](https://stackoverflow.com/questions/14038303/how-to-encode-language-specific-chars-while-converting-varbinary-to-varcharma)

或者，不要在 Java 和 .NET 代码中指定 UTF-8。我相信 SQL Server 会像 Java 和 .NET 一样对 varchar 使用相同的 256 位编码。（但不完全确定这一点。）

# iphone - 通过运营商分发 iPhone 应用程序

> ID：15644328
> 
> 赞同：0
> 
> 时间：2013-03-26T18:07:15.410
> 
> 标签：iphone, ios, app-store-connect

Google 的开发者控制台可以通过运营商分发应用程序。我正在尝试为 iTunes 连接找到相同的东西。我需要确保 T-mobile 用户无法下载我的应用程序。有没有办法做到这一点？在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:10:10.017

抱歉，这是不可能的。您可以限制应用程序分发的唯一方法是按国家/地区。

# x++ - AlwaysOnTop 属性行为不正常

> ID：15644330
> 
> 赞同：3
> 
> 时间：2013-03-26T18:07:18.890
> 
> 标签：x++, microsoft-dynamics, axapta

出于某种原因，表单设计的 AlwaysOnTop 属性无法正常工作。

这是上下文：我们试图让一个表单在打开时保持在其他所有表单之上。简单不？另外，出于其他原因，我们不想根据我的上级将 WindowType 设置为 Popup（如果您知道原因，请告诉我）。

所以我的问题是，是否有任何参数/安全功能以某种方式限制表单随时处于顶部？

甚至 WinApi 的 setForegroundWindow 也使用表单的 hWnd 返回 false。有任何想法吗？

哦，我们也在 Dynamics AX 4.0 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:52:46.470

我很久以前用 lostFocus 事件和 setFocus 方法处理过这个案例。我没有找到使表单保持在顶部的正确方法（我认为 AX 专门阻止了这种情况以避免锁定终端）但它以这种方式工作得很好：当表单失去焦点时，将焦点设置在表单上。

我没有旧项目中的代码。这是一个 PDA 项目，但我认为您永远无法避免用户使用 Alt+Tab 更改表单。

这是一个有趣的观点，请随时更新。

**编辑**：

twitter 上的某个人为模态表单提供了一个可爱的解决方案。我很确定它会为你解决问题。在表单的 init 方法中：

```
public void run()
{
    super();
    element.wait(true);
    // Execution will resume at this point, only after
    // the user has closed the form.
} 
```

来源： http: [//gotdax.blogspot.com.es/2013/08/modal-forms-in-dynamics-ax.html](http://gotdax.blogspot.com.es/2013/08/modal-forms-in-dynamics-ax.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T08:38:21.647

如果您希望您的表单具有[模态行为](http://en.wikipedia.org/wiki/Modal_dialog)`wait`，请从表单本身调用该方法！

```
public void run()
{
    super();
    this.wait(true);
} 
```

该`true`参数触发模态模式。这适用于所有版本的 AX。

`wait`可以改为从调用者调用，但这不太有吸引力，因为大多数表单都是通过菜单项调用的。

```
formRun.init();
formRun.run();
formRun.wait(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:13:34.350

我解决这个问题的方法是通过 WinAPI 使表单成为模态。下面的代码是保存文本的副本，因此可能需要一些修饰。（还请记住，它可能无法从 AX2009 开始工作。）

```
void setFormModal(int _thisHWND, boolean _bModal)
{
DLL _winApiDLL;
DLLFunction _EnabledWindow;
DLLFunction _getTop;
DLLFunction _getNext;
DLLFunction _getParent;

void local_enableWHND(int _lHWND)
{
int lnextWnd;

lnextWnd = _getTop.call(_getParent.call(_lHWND));

while (lnextWnd)
{
if (lnextWnd != _lHWND)
_enabledWindow.call(lnextWnd, (!_bModal));

lnextWnd = _getNext.call(lnextWnd, 2);
}
}
;
_winApiDLL = new DLL('user32');
_getNext = new DLLFunction(_winApiDLL, "GetWindow");
_EnabledWindow = new DLLFunction(_winApiDLL, "EnableWindow");
_getTop = new DLLFunction(_winApiDLL, "GetTopWindow");
_getParent = new DLLFunction(_winApiDLL, "GetParent");

_getParent.returns(ExtTypes:: DWORD);
_getParent.arg(ExtTypes:: DWORD);

_EnabledWindow.returns(ExtTypes:: DWORD);
_EnabledWindow.arg(ExtTypes:: DWORD, ExtTypes:: DWORD);

_getTop.returns(ExtTypes:: DWORD);
_getTop.arg(ExtTypes:: DWORD);

_getNext.returns(ExtTypes:: DWORD);
_getNext.arg(ExtTypes:: DWORD, ExtTypes:: DWORD);

local_enableWHND(_thisHWND);

local_enableWHND(_getParent.call(_thisHWND));
} 
```

# visual-c++ - Win64 中的犰狳（LAPACK 和 BLAS） - VC++ 2010

> ID：15644331
> 
> 赞同：0
> 
> 时间：2013-03-26T18:07:20.113
> 
> 标签：visual-c++, lapack, win64, armadillo

我正在使用 VC++ 2010 用犰狳做一些矩阵计算。我发现犰狳使用 LAPACK 和 BLAS 来做一些矩阵逆运算，它的示例中有 .lib 文件（lapack_win32_MT.lib 和 blas_win32_MT.lib）。现在，我想使用一个win64平台，但我不知道如何将LAPACK和BLAS文件链接或查找到犰狳。

* * *

我尝试在 x64 平台上使用相同的文件（lapack_win32_MT.lib 和 blas_win32_MT.lib），但我遇到了很多错误（`error LNK2019: unresolved external symbol...`）。

* * *

如何在 x64 VC++ 2010 平台中使用 Armadillo（使用 LAPACK 和 BLAS 的函数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:24:30.653

您需要使用 64 位版本的 LAPACK 和 BLAS，或提供 LAPACK 和 BLAS 功能的库。例如，您可以使用 64 位版本的 Intel MKL 或 AMD ACML：

*   MKL： http: [//software.intel.com/en-us/intel-mkl/](http://software.intel.com/en-us/intel-mkl/)
*   ACML：[http ://www.amd.com/acml](http://www.amd.com/acml)

MKL 和 ACML 实际上是 LAPACK 和 BLAS 的高性能版本。

还有原始 LAPACK（参考实现）的 64 位版本：

*   [http://icl.cs.utk.edu/lapack-for-windows/lapack/](http://icl.cs.utk.edu/lapack-for-windows/lapack/)

# vba - 确定扫描仪架构、平板或进纸器、WIA

> ID：15644337
> 
> 赞同：1
> 
> 时间：2013-03-26T18:07:47.427
> 
> 标签：vba, scanning

我正在尝试编写一个函数（在 VBA 中），如果扫描仪有一个 flatbad 架构，它将扫描一个页面，如果它有一个进纸器，它将扫描多个页面。我在 Windows XP 上使用 Windows Image Acquisition 2.0。以下代码行返回错误：

```
MsgBox wiaScanner.Properties("3086").Value 
```

在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630202%28v=vs.85%29.aspx)您可以看到属性 3086 代表文档处理能力。当我运行它时，我得到“找不到 ID”。这在 Windows 7 上运行良好。我确信 Windows XP 有另一种方法，我只是找不到。

有任何想法吗？谢谢

# c# - 如果找不到实体 DB 文件，如何处理异常

> ID：15644344
> 
> 赞同：0
> 
> 时间：2013-03-26T18:08:16.320
> 
> 标签：c#, .net, entity-framework, sql-server-ce

我将 Entity fw 与 SQL Server 紧凑型数据库一起使用。问题是，如果找不到数据库文件，我似乎无法理解如何以及在何处处理 System.Data.EntityException，因为当我启动我的应用程序时，会弹出一个“..已停止工作”窗口，其中包含以下详细信息

```
Problem signature:
Problem Event Name: CLR20r3
Problem Signature 01:   AVIOB1BUUW4KTDA4Y2PQRQUMWZFODHST
Problem Signature 02:   1.0.0.0
Problem Signature 03:   5151de5d
Problem Signature 04:   System.Data.SqlServerCe
Problem Signature 05:   4.0.8876.1
Problem Signature 06:   4fcd17f1
Problem Signature 07:   17b
Problem Signature 08:   4ad
Problem Signature 09:   System.Data.EntityException 
```

另外，我似乎无法从 VS2012 调试应用程序，因为它没有运行的错误，所以我不得不通过重命名 db 文件来手动测试它。

**如何**以及**在哪里**处理这个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:12:13.903

像这样的东西：

```
if (!File.Exists(NameAndLocationofDBFile))
{
     System.Windows.Forms.MessageBox.Show("Database file does not exist");
     return; // exist application
} 
```

# google-chrome - Webkit 错误或预期行为？（溢出 DIV 和 IFRAME）

> ID：15644346
> 
> 赞同：1
> 
> 时间：2013-03-26T18:08:19.650
> 
> 标签：google-chrome, safari, webkit

我在隐藏溢出的 DIV 中遇到了 IFRAME 问题，我很想知道这是错误还是预期行为。它只出现在 Chrome 和 Safari 中，FF 和 IE 工作正常，所以它可能是一些 Webkit 特定的问题。

我的情况如下：

*   带有 DIV 的站点，其中溢出设置为隐藏
*   此 DIV 包含一个绝对定位的 IFRAME 以及一些其他元素溢出 DIV 尺寸
*   如果用户单击按钮，jQuery 函数会将一些 html 文本写入 IFRAME

看看这个例子，一切都按预期工作：http: [//jsbin.com/aqexij/1](http://jsbin.com/aqexij/1)

现在在 url 中重新加载带有附加哈希字符 (#) 的页面，然后单击按钮：http: [//jsbin.com/aqexij/1#](http://jsbin.com/aqexij/1#)

在 Chrome 和 Safari 中，这会导致包含 IFRAME 的 DIV 重置滚动位置，以便 iframe 位于顶部（在上面的示例中 $('#workspace').scrollTop() 返回 100，这正是 iframe 与顶部的距离）。

有人可以向我解释为什么会这样吗？

# google-maps-api-3 - 在 infobox.open 上的谷歌地图信息框中显示动态背景图像

> ID：15644348
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:08:23.507
> 
> 标签：google-maps-api-3, domready, infobox

我正在尝试将背景图像添加到谷歌地图信息框内容内的 div 中。我遇到了问题，因为我用来更改 .css('background-image') 的函数无法识别 div 的 ID。这可能是因为打开信息框时内容字符串尚未被 DOM 加载。我知道我必须添加一个监听“domready”或类似的事件，但我不确定如何实现它。这是有问题的代码：

```
var boxContent = var boxContent = "<div id=box><div id=leftside><img id=logo src=" + 
                    logopath + " /><h1>" + number + "<br />" + street + 
                    "<br />" + city + "</h1><h2>" + phone + 
                    "<br /><a target=_blank href=" + website + 
                    ">visit website</a></h2></div><div id=menu>" +
                    "<button id=photo onClick=buttonState(this.id)><img src=infomenu/photoicon.png></button></button>" +
                    "<button id=comments onClick=buttonState(this.id)><img src=infomenu/commentsicon.png></button>" +
                    "<button id=games onClick=buttonState(this.id)><img src=infomenu/gamesicon.png></button>" +
                    "<button id=ed onClick=buttonState(this.id)><img src=infomenu/edicon.png></button>" +
                    "<button id=stay onClick=buttonState(this.id)><img src=infomenu/stayicon.png></button>" +
                    "<button id=fly onClick=buttonState(this.id)><img src=infomenu/flyicon.png></button>"  +
                    "<div id=display></div>"

var myOptions = {
        content: boxContent,
        disableAutoPan: false,
        pixelOffset: new google.maps.Size(-400, -173),
        closeBoxMargin: "-12px -12px 0px 0px",
        closeBoxURL: "close.png",
        infoBoxClearance: new google.maps.Size(1, 1),
        pane: "floatPane",
        enableEventPropagation: false
   };

var ib = new InfoBox(myOptions);

  google.maps.event.addListener(marker, 'click', function(e) {
        map.setZoom(13);
        map.setCenter(this.getPosition());  
        ib.open(map, this, displayphotos(imagepath);
  });

function displayphotos(imagepath){

       $('#display').css('background-image', 'url(' + imagepath + '1.png)');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:00:57.213

`InfoBox.open`只需要 2 个参数 - 地图和锚点。您需要单独设置该属性。我发现持有对`boxContent`DOM 元素的引用可以让你的生活更轻松。

```
var boxContent = $("<div id='display'></div>");
var myOptions = {
    content: boxContent[0],
    disableAutoPan: false,
    pixelOffset: new google.maps.Size(-400, -173),
    closeBoxMargin: "-12px -12px 0px 0px",
    closeBoxURL: "http://www.carltonhotelblanchardstown.com/files/images/a/calendar-popup-close.png",
    infoBoxClearance: new google.maps.Size(1, 1),
    pane: "floatPane",
    enableEventPropagation: false
}; 
```

[http://jsfiddle.net/Jeff_Meadows/ujxSq/](http://jsfiddle.net/Jeff_Meadows/ujxSq/)

# matlab - MATLAB 中的 GUI 弹出菜单

> ID：15644351
> 
> 赞同：3
> 
> 时间：2013-03-26T18:08:30.463
> 
> 标签：matlab, matlab-figure, matlab-guide

我有一个弹出菜单，其中包含 5,10,15,20 的内容。使用开关我创建了这个

```
val=get(hobject,'value');
switch val
    case '5'
        n=5;
    case '10'
        n=10;
    case '15'
        n=15;
    case '20'
        n=20;
end
guidata(hObject, handles); 
```

其中它表示输出图像的数量。在同一个 GUI 窗口中按下搜索按钮时，它会调用另一个我需要使用此“n”的函数。

```
for i = 1:n          % Store top n matches...
    tempstr = char(resultNames(index(i)));
    fprintf(fid, '%s\r', tempstr);
    disp(resultNames(index(i)));
    disp(sortedValues(i));
    disp('  ')
end 
```

我怎样才能将这个'n'传递给那个代码或函数？任何适当的答案都是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:25:52.363

好吧，从你的`switch`陈述开始是不正确和不必要的。下拉列表的`Value`属性不是当前选择中包含的文本，它是当前选择在其列表中的**索引。**要获取当前选定列表项的字符串值，您可以：

```
contents = cellstr(get(hObject,'String')) % returns contents as cell array
contents{get(hObject,'Value')} % returns value of selected item from dropdown 
```

也就是说，当然，假设`hObject`是一个指向您的下拉框的句柄 -**只有**当您处于下拉列表本身引发的回调中时才会如此。此外，请注意**无需**通过离散`switch`语句转换字符串值；你可以只使用`str2num`or`str2double`函数。

最后，如果您需要从其自己的回调之一之外访问下拉列表的值，则需要使用`handles`传递给每个回调的结构（或者在您的示例中，从 中返回`guidata`）。句柄中将有一个与您的下拉列表同名的字段 - 这将是您可以访问其属性的句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:28:13.037

在 GUI 周围传递信息的方法是使用该`handles`结构。如果您使用 GUIDE 创建 GUI，`handles`则应该在打开函数中创建。您可以修改打开函数以将字段和初始值添加到`handles`. 例如，您可以将以下内容添加到打开函数中：

```
handles.n = 1; % This initializes handles.n to a default value in case the search button is 
                % pushed before an item in the menu is selected. 
```

然后在菜单的回调中包含以下内容以更新和存储 n 的值：

```
handles.n = val; % This is updated every time an item from the menu is selected.  
guidata(hObject,handles); 
```

在搜索按钮的回调中，您可以访问 n 的值并将其传递给您的其他函数，如下所示：

```
n = handles.n;
myFunction(n); 
```

您的其他功能将从以下内容开始：

```
function [] = myFunction(n) 
```

然后是您上面包含的其余代码。您必须确保 myFunction.m 在 Matlab 搜索路径中（可以使用`addpath`或单击 Matlab 中的设置路径按钮进行设置。）

# asp.net-mvc - 使 Html.TextBoxFor 在 MVC 4 中将未初始化的整数属性显示为空字符串

> ID：15644352
> 
> 赞同：1
> 
> 时间：2013-03-26T18:08:32.773
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html-helper, html.textboxfor

我已将 Html.TextBoxFor 添加到我的视图中：

```
@Html.TextBoxFor(x => x.zip, String.Empty, new { @class = "gsTextBox", placeholder = "Enter your zip" }); 
```

它在输入中显示 0 而不是空字符串。

我也找到[了这个](https://stackoverflow.com/questions/3887005/html-textboxfor-default-value-for-integer-decimal-to-be-empty-instead-of-0)解决方案，但它似乎很可怕。或者这是一个不错的方法？或者也许我应该使用 javascript 将 0 替换为空字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:33:08.417

*试试这个*- 使 int 可以为空

```
public int? zip { get;set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-22T14:08:43.590

或者，如果您不想使用可空值：

```
@Html.TextBoxFor(x => x.zip, new { placeholder = "Enter your zip", @class = "gsTextBox", @Value = (Model.zip > 0 ? Model.zip.ToString() : string.Empty) }) 
```

空字符串将导致占位符出现。如果出现验证错误或类似错误并返回页面，此代码将显示用户输入的值...或占位符（如果不大于 0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-01T13:09:20.247

如果您不会通过 Nullable 属性更改您的模型：

使用 javascrip 或 Jquery 方式。

```
$("input.no-init").val(""); 
```

# c# - 如何在c#中转换sql类型双精度

> ID：15644353
> 
> 赞同：0
> 
> 时间：2013-03-26T18:08:36.140
> 
> 标签：c#, sql, types, double-precision

我有一个数据库访问权限，其中一个字段是双精度的。通常，如果我在文本框中设置 1.71 或 1,71，则数据库中的字段应包含 1.71。

但如果我执行查询，访问字段的值为 171 !!。

```
public const string QUERY = 
        @"UPDATE TBLART 
          SET TBLART.COST = @cost
          WHERE TBLART.CODE= '1'";

var param = new DynamicParameters();
var cost = totalCost.Replace(',', '.'); //totalCost is a textbox
param.Add("cost", Double.Parse(cost), DbType.Double);

gsmconn.Execute(QUERY, param); 
```

我错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:12:32.070

`double.Parse`默认情况下将使用当前线程的文化。我*怀疑*您当前的文化使用“。” 作为分组分隔符。

两种选择：

*   照样继续使用`Replace`，但`CultureInfo.InvariantCulture`解析时再指定
*   去掉替换，解析原始值时只使用当前线程的文化。这依赖于适合用户的文化，但在这种情况下可能是更好的解决方案。（否则，输入“1,234.56”的人在预期值“略大于 1234”时会出现解析错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:27:01.353

如果我在 Windows 窗体中没记错的话，您可以将双重属性绑定到文本框，它会自动处理解析和转换。您不应该手动将字符串解析为双精度。

.NET 框架已经为您解决了这个问题。

另一个建议，你的数据访问代码不应该做任何解析。这应该在更高的层中完成。但最好把它留给框架。

# operating-system - MMU究竟是如何将程序从二级内存加载到主内存的

> ID：15644358
> 
> 赞同：-2
> 
> 时间：2013-03-26T18:08:49.767
> 
> 标签：operating-system

当我打开一个未缓存在主内存中的应用程序或程序时，究竟会发生什么。a) 操作系统如何知道在哪里寻找程序？b) 如果假设所有页面都无法加载，那么其余页面的地址或至少其余页面的起始地址是否保留在 PCB 中？c) 此外，有关应用程序的任何信息是否都存在于主内存中，假设它以前从未被访问过，并且它不是必须存在于内存中的关键组件。

欢迎任何答案，后续问题，澄清。

编辑：我在网上浏览了许多链接，但没有一个确切说明发生了什么或谁维护了这些信息。大多数地方都说程序将由页面错误处理程序带入主内存，我正在寻找更具体的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:50:44.477

阅读有关页表和页错误的信息。这就是它背后的机制。如果您想要一些非常具体的东西，请从英特尔或 AMD 下载 x86 CPU 手册并阅读相同的章节。

# c++ - 结构作为函数的参数：复制或取消引用更有效？

> ID：15644362
> 
> 赞同：0
> 
> 时间：2013-03-26T18:09:02.357
> 
> 标签：c++, performance, function, parameters, struct

我目前正在为 C 开发一个简单的克隆检测器，用 C++ 编写，并且不断地问自己关于效率和如何优化 C++ 代码的问题。

我的一个问题是关于如何有效地传递结构。如果给出类似于以下内容的结构：

```
typedef struct {
    unsigned int a;
    void *b;
} my_struct; 
```

以及一个对其 my_struct 参数执行大量操作（而非赋值）的函数。在 AST 遍历中为每个节点调用这个函数（所以很多......），并且根据一些初步阅读，我的理解是传递结构的实例（非指针）会导致它的副本为被调用函数制作。

因此，将结构作为指针传递然后取消引用是否更有效？

```
void foo(my_struct *s) {
    // then dereference s->a... 
```

基本上：**复制速度与取消引用速度**是我的问题。

我认为，由于内存消耗，将结构作为指针传递会更聪明，但我不知道有关速度的任何副作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:29:06.813

这取决于。

在您的情况下，您的结构并不比指针大多少；将整个结构作为函数参数传递很可能不会比传递指针慢很多。

在您的函数内部，通过指针访问结构成员*可能*比访问本地结构对象的成员慢。如果是这样，那么如果你在函数内部做了很多事情，那么直接传递结构可能会给你更快的代码。但这取决于 CPU 的能力和生成的代码；无论是否通过指针，成员访问都可能具有相同的速度。

回答这个问题的唯一方法是衡量你自己代码的性能。您得到的任何答案都将仅适用于您自己当前的情况，并且可能会在其他目标系统或不同版本的编译器上发生变化。

确保您告诉编译器优化您的代码。如果你不这样做，那么衡量性能就没有多大意义了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:30:18.993

读取堆栈（副本）将更加可靠，因为堆栈不太可能从缓存中分页出来，但是您也会承担执行复制的成本，并且可能会更多地填充堆栈。

我的经验法则是按值传递“简单”数据，按引用传递“复杂”数据。通常，如果我的数据超过 8-16 个字节，我会开始考虑是否值得通过参考。

这里要考虑的另一件事是它是否值得优化。我尽量避免以意想不到的方式（与代码的其余部分不同）做事，除非我能证明存在或将会出现问题，因为打破模式会使代码更难支持。

# javascript - javascript类杀应用

> ID：15644363
> 
> 赞同：0
> 
> 时间：2013-03-26T18:09:03.533
> 
> 标签：javascript, function

只是一个快速的，我在我的 javascript 游戏中使用了 oop 样式，但是由于某种原因，当我添加一个新类时，它会杀死我包含的其他类的任何函数。

这是我正在谈论的脚本，这是我的主文件，我将在其中包含所有类文件：

```
$(document).ready(function(){

var canvas = document.getElementById("TBG");
var context = canvas.getContext("2d");

var ui = new Gui();
// var level = new Level();

//----------Login/Register Gui --------------
$('#TBG').hide();
$('#load-new').hide();
$('#reg').hide();
$('#login').hide();

//if login_but is clicked do ui.login function
$('#login_but').click(ui.login);
//if reg_but is clicked do ui.register function
$('#reg_but').click(ui.register);

$('#new_but').click(function(){
    game_settings("new");
});

$('#load_but').click(function(){
    game_settings("load");
});

//if login_sumbit button is clicked do ui.login_ajax function
$("#login_submit").click(ui.login_ajax);

$("#reg_submit").click(ui.register_ajax);

$("#welcome").on("click", "#logout_but", ui.logout);

  //___________________________________________________________________

//Initialisation of game

function game_settings(state){
    if(state == "load"){
        ui.load_game();
        //do ajax call to load user last save
        level.level_init(0,1);
    }
    else{
        //set beginning params

        //Change screens
        ui.new_game();
        alert("new game");
    }
}

}); 
```

在上面脚本的上下文中，我的问题是当我只调用 new Gui() 而没有调用下面的新级别或评论如你所见，那么下面的所有函数在标题 login/register gui 下完美运行，但是一旦我将调用置于新级别或取消注释，它就会杀死登录/注册 gui 标题下的所有功能。

为什么是这样？

**编辑**：这是 level.js 文件，以防您想查看它以及我如何构建我的类：

```
function Level(){

this.level_init = function(level, location){

    var saved_level = level;
    var saved_location = location;

};

this.get_tileset = function(){

};

this.draw = function() {

}
   } 
```

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:27:47.040

抱歉，伙计们，事实证明这是一个愚蠢的错误，我没有在 html 中添加脚本！，我想我需要更多的睡眠，哈哈！感谢您的输入

汤姆

# javascript - google可视化api总和

> ID：15644364
> 
> 赞同：2
> 
> 时间：2013-03-26T18:09:03.883
> 
> 标签：javascript, google-visualization

有没有办法计算谷歌可视化 API 表中列的总和。例如，在 MS Excel 中，有自动求和功能来计算列的总和。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T00:48:46.907

唯一的内置聚合函数用于[对数据进行分组](https://developers.google.com/chart/interactive/docs/reference?hl=en#google_visualization_data_group)

但是，在 javascript 中编写一个返回列总和的函数很容易。

例如：

```
 var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria', 'Belgium', 'Czech Republic', 'Finland', 'France', 'Germany'],
    ['2003',  1336060,   3817614,       974066,       1104797,   6651824,  15727003],
    ['2004',  1538156,   3968305,       928875,       1151983,   5940129,  17356071],
    ['2005',  1576579,   4063225,       1063414,      1156441,   5714009,  16716049],
    ['2006',  1600652,   4604684,       940478,       1167979,   6190532,  18542843],
    ['2007',  1968113,   4013653,       1037079,      1207029,   6420270,  19564053],
    ['2008',  1901067,   6792087,       1037327,      1284795,   6240921,  19830493]
  ]);

  function getSum(data, column) {
    var total = 0;
    for (i = 0; i < data.getNumberOfRows(); i++)
      total = total + data.getValue(i, column);
    return total;
  }

  alert(getSum(data, 1)); 
```

这会给你一个很好的警告框，上面写着 9920627

1336060+1538156+1576579+1600652+1968113+1901067=9920627

摆弄列号或使用您自己的数据表使其变得灵活。

# java - 如何将值从一个类传递到另一个类？

> ID：15644368
> 
> 赞同：1
> 
> 时间：2013-03-26T18:09:10.883
> 
> 标签：java, user-interface, store

我有这个 gui 弹出面板，它填写了数据包号、距离等信息。一旦用户填写信息，他将单击确定，gui 将关闭，我的其他具有计算方法的 gui 类应该接收所有数据那些是在早期的gui中填写的。我如何存储这些数据？我知道我可以存储在临时文件中，但我不想这样做。我希望你能启发我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:07:19.600

```
import java.awt.*;
import java.applet.Applet;

class Example extends Applet implements ActionListener
{
    TextField txt = new TextField(10);
    Button goButton = new Button("Go");
    String data = new String ();

    public void init ()
    {
        add(txt);
        add(goButton);
        goButton.addActionListener(this);
    }

    public void actionPerformed (ActionEvent e)
    {
        String cmd = e.getActionCommand();

        if (cmd.equals("Go"))
        {
            // preserve data
            data = txt.getText();

            repaint();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:10:34.083

您应该创建一个代表数据的中间类。

填写完 GUI 并单击提交按钮后，解析数据并填写类中的字段。

例如：

```
public class MyData {
    public String Name;
    public String Address;
} 
```

然后，在您的计算方法中触发一个将此类作为参数的方法：

公共无效计算（MyData数据）{...}

对于更高级的处理，请查看 Java 中的“接口”——这是完成此操作的标准方式。

# jasper-reports - 在 Jasper 报告（JRXML 文件）中使用 WITH 子句

> ID：15644375
> 
> 赞同：0
> 
> 时间：2013-03-26T18:09:31.880
> 
> 标签：jasper-reports

我试图在我的 jasper 报告查询中使用 WITH 子句，但它给了我错误：- java.sql.SQLSyntaxErrorException: ORA-00928: missing SELECT keyword and net.sf.jasperreports.engine.JRException: No input source提供给出口商。

相同的查询在 Oracle DB 客户端中运行良好。

如果在 Jasper 报告版本 3.7.6 中使用 WITH 子句有问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:29:39.883

如果您`WITH`在选择查询的开头使用子句，则需要更改 Jasper 报告配置，您需要指定查询以`SELECT`或开头`WITH`。

如果您`WITH`在选择查询中间使用子句，您可能会忘记从 WITH 子句生成的数据集中选择记录。请参见下面的示例...

```
select * from (
  WITH temp as (
    select data from any_table
  )
) 
```

相反，使用下面...

```
select * from (
  WITH temp as (
    select data from any_table
  )
  select * from temp
) 
```

或者

```
select * from (
 select * from
 (
  WITH temp as (
    select data from any_table
  )
 )
) 
```

继续查询！

# split - Camel Splitter，如果在最后再次聚合消息有什么价值？

> ID：15644376
> 
> 赞同：1
> 
> 时间：2013-03-26T18:09:32.373
> 
> 标签：split, apache-camel

假设您有这条路线：

```
from("direct:processOrders")
.process(new MultipleOrdersProcessor())
.to("direct:done") 
```

MultipleOrdersProcessor 循环遍历订单并做“事情”

使用拆分器并使用 SingleOrderProcessor 而不是 MultipleOrdersProcessor 有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:18:55.687

我能想到两个好处

1.  如果其中一个“订单”失败，如果它们被拆分为多条消息，则不一定会使您的整个交换失败。
2.  使用自动化工具对 SingleOrderProcessor 函数进行单元测试可能更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T02:08:06.007

一个直接的好处是能够并行处理订单，前提是用例适合并行处理。在 MultipleOrdersProcessor 的情况下，并行处理需要自定义实现。

# javascript - Webdriver 随机创建附加的 Firefox 选项卡

> ID：15644385
> 
> 赞同：1
> 
> 时间：2013-03-26T18:10:07.240
> 
> 标签：javascript, firefox, tabs, webdriver, selenium-webdriver

有时，当我的 Web 驱动程序测试单击执行 JavaScript 函数而不是执行正确函数的元素时，浏览器会创建另一个选项卡，其中 JavaScript 作为测试失败的标题名称。

为什么会发生这种情况我该如何阻止它？

![在此处输入图像描述](../Images/7dbbd7dbed1d5c80b731c91e7c973907.png)

# iphone - iOS，使用下划线与直接使用 iVar

> ID：15644386
> 
> 赞同：9
> 
> 时间：2013-03-26T18:10:08.737
> 
> 标签：iphone, ios, objective-c, cocoa-touch, ivar

很多人都问过这个问题，但是这个问题是为了获得有关何时使用这些方法的示例。请使用 setter 和 getter 无限循环以外的示例

例子。

.h -
`@property(nonatomic, strong)NSMutableArray* mutArray`
.m -
`@synthesize mutArray= _mutArray;`

1）我想要：
`_mutArray = [[NSMutableArray alloc] init];`
或者
`self.mutArray=[[NSMutableArray alloc] init];`
我为什么要做每一个，有什么区别？！

2）如果我想向它添加一个对象......
`[_mutArray addObject:object];`
或者
`[self.mutArray addobject:object];`

为什么？

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T18:35:54.233

`init`您应该只在实现细节绝对需要的地方（例如访问器本身内部，`dealloc`或者您实际需要内存地址的地方）处理您的 ivars 。除了在那些地方，您应该始终使用访问器，这意味着`[self foo]`而不是`_foo`.

`self.foo`只是实际调用周围的语法糖，即`[self foo]`. 重要的是要理解这`self.foo`是一个标准的 ObjC 消息发送，与`[self foo]`. 按照惯例，您应该只在引用属性时使用点语法。

根据我的经验，在 ARC 之前，直接使用 ivars 是导致崩溃的第一大原因。在没有 ARC 的情况下直接分配给 ivar 时，您搞砸的可能性在程序范围内迅速接近 100%。

自 ARC 以来，我仍然认为您应该始终使用访问器（上面给出的例外情况除外），但原因更加微妙。其主要原因是可以在当前类、子类或通过 KVO（这完全发生在您的代码之外）中自定义访问器。如果您直接访问 ivar，那么您将绕过它。例如，假设该属性是延迟创建的（这很常见）。然后，如果您在创建 ivar 之前使用它，您会得到一些细微的错误。因此，您必须记住，对于该属性，始终使用访问器。同样，您可能会打电话`setNeedsDisplay`或发布通知等。

如果您有一条简单的规则，上面写着“我将始终使用访问器”，那么很容易查看代码并知道它是正确的。在少数情况下，您需要绕过访问器，`_`“嘿，注意这里，我在做一些奇怪的事情。”

如果您有一条规则“我将对需要它的属性使用访问器，但对于不需要的属性则不使用”，那么查看代码并知道它是否正确几乎是不可能的。之前的开发人员使用 ivar 是因为它是必需的，还是仅仅因为他喜欢它？能不能改？很难知道。

因此，即使在 ARC 之后，始终如一地使用访问器也是很好的防御性编程，我强烈推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:24:24.797

_mutArray 是 iVar，self.mutArray 通过 @synthesize 属性时为您创建的 getter 和 setter 访问属性。您可以根据自定义内容覆盖这些 getter 和 setter。在您的示例中，您的属性设置为强，这会为您的属性添加保留。所以 self.mutarray = [[NSMutableArray alloc] init]; 会做这样的事情（除非你覆盖属性的设置器）：

```
-(void)setMutarray:(NSMutableArray*)_mutArray{
    if(_mutArray != mutArray){
        [mutArray release];
        mutArray = nil;
        mutArray = [_mutArray retain];
    }
} 
```

要将对象添加到数组中，您只需要访问 iVar，而不是属性，除非您在 getter 中进行自定义操作。例如，您的吸气剂可能如下所示：

```
-(NSMutableArray*)mutArray{
    if(!mutArray){
        self.mutArray = [[[NSMutableArray alloc] init] autorelease];
    }
    return mutArray;
} 
```

通过这种方式，您可以确保始终有一个真实的数组来添加对象。如果是这种情况，您会想要使用 [self.mutArray addObject:object];

因此，除非您想在 getter 或 setter 中进行自定义操作，否则您只想访问 iVar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:42:46.407

`self``keyword`就像`this` `keyword`在`JAVA`. _

它访问当前对象，也是一个指向对象的指针。

[有关`self`阅读本教程的更多信息](http://useyourloaf.com/blog/2011/02/08/understanding-your-objective-c-self.html)

`_ObjeName``iVar`被调用`Objective c`

在实现中声明的实例变量是隐式隐藏的（*实际上是私有*的），并且可见性不能改变`- @public, @protected and @private`不会产生编译器错误（*至少是当前的 Clang*）但被忽略。

**例如 ：**

**之间的不同**

**1)** `NSString *someString = _name;`

**2)** `NSString * someString = self.name;`

假设您的 .m 文件中有这一行（并且没有任何覆盖的方法可以直接访问 _name）

```
@synthesize name = _name; 
```

这意味着`name`当您尝试访问属性 (self.name) 时，它将使用变量 _name。在这种情况下`self.name`等于 _name

* * *

但是，如果您有名称的动态属性，则如下所示：

```
-(NSString)name{
    return @"1234";
} 
```

那么就有区别了。`self.name`将始终返回 1234，但 _name 不能等于该值。

例子：

```
_name = @"555";
NSLog(_name);
NSLog(self.name); 
```

结果：

```
2012-02-09 14:27:49.931 ExampleApp[803:207] 555
2012-02-09 14:27:49.933 ExampleApp[803:207] 1234 
```

[以上示例我从这个问题中得到。](https://stackoverflow.com/questions/9209862/what-is-the-difference-between-name-and-self-name-if-name-was-a-nsstring)

# c - 检查我对指针/结构和数组的理解

> ID：15644390
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:10:21.213
> 
> 标签：c, arrays, pointers, typedef

嘿，我只是想了解一些关键概念，并且已经完成了自己的研究，但是有一些问题，如果有人可以检查它们是否正确，我将不胜感激。我正在为考试做复习，我们的教授告诉我们自己弄清楚……所以我做了，就这样:)

**1：声明一个名为 thePointer 的指针，用于保存具有 10 个元素的数组中的一个元素的地址，称为 Pointed**

```
int Pointed[10] = {};

int *thePointer = &Pointed[1]; 
```

需要这方面的帮助...

**2：编写一个函数，该函数将接受数组的地址和数组中元素的数量，并使用信息将数组的每个元素初始化为零**

```
void arrayFunction (int *array, int element)

    for (x = 0; x < element; x++);
      {
      array[x] = 0;
      } 
```

**3：创建一个包含表示以下内容的位的结构**

**--2 个字段，每个字段包含 4 位 BCD 数字，它们一起保存当前旋转计数（我称它们为 CRC1 和 CRC2）电机方向：2 位速度：4 位故障条件：3 位命名结构 controlMotor**

```
struct controlMotor{

unsigned char CRC1: 4;
unsigned char CRC2: 4;
unsigned int motorDirection: 2;
unsigned int speed: 4;
unsigned int faultCondition: 3;
}; 
```

**-- 使用 typedef 来命名这个新的数据类型：statusDrive_t**

```
typedef controlMotor statusDrive_t; 
```

**--创建名为marsDrive的结构数组来保存每6个驱动器的状态**

```
statusDrive_t marsDrive[5] ={statusDrive_t.CRC1,statusDrive_t.CRC2,statusDrive_t.motorDirection,statusDrive_t.speed,statusDrive_t.faultCondition} 
```

**用最大值初始化数组第一个元素的每个字段**

```
marsDrive[0].CRC1 = 15;
marsDrive[0].CRC2 = 15; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:22:30.507

**Q1：如果问题是指向数组的*任何*元素，你是对的。但是 1 不是数组的第一个元素。**

**Q2：函数应该接受数组的地址，你是在函数内部声明数组。`for`此外，应避免使用后面的分号。此外，您应该只使用 < 而不是 <= 。正确的应该是这样的：**

```
void ArrayFunction(int arr[], int i) {
for (x = 0; x < i; x++){
      arr[x] = 0;
      }
} 
```

**我认为 Q3 不错，但 typedef 应该是**

```
typedef struct controlMotor statusDrive_t; 
```

**数组也必须声明为**

```
statusDrive_t marsDrive[6]; 
```

**数组从 0 开始（在您的情况下为 5）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:26:41.933

1 看起来不错，但您不需要`&`运算符：

```
int *thePointer = Pointed; 
```

将起作用，因为数组衰减为指针。

2`write a function that will accept the address of an array and number of elements in an array`你的函数只需要一个`int`甚至不接近问题所问的内容。这个问题试图让您参考的一点是，将数组传递给函数会丢失有关数组中元素数量的信息。

我很确定他们正在寻找类似的东西：

```
void arrayFunction (int * arr, int elements) // you could do (int arr[], ... as well 
{
    for(int i = 0; i<elements; i++)
        arr[i] = 0;
}

int main(void) {
    int i[4];
    arrayFunction(i, 4); 
```

3 你的typedef错了，应该是：

```
typedef struct controlMotor statusDrive_t; 
```

语法是：

```
typedef <the type> <the new name to call it>; 
```

在这种情况下，类型是`struct controlMotor`

该数组也被错误地声明。`int marsDrive[6]`这构成了一个 s 数组`int`。你想把类型放在数组之前，所以在这种情况下，因为你刚刚做了那个花哨的新 typedef：

```
statusDrive_t marsDrive[6]; 
```

将为您提供一个包含 6 个结构 controlMotor（编号为 0 到 5）的数组。而对于 3 的最后一部分：`initialize each field of the first element of array with maximum value`您需要初始化第一个元素的字段。这是通过以下方式完成的：

```
marsDrive[0].CRC1 = ...
marsDrive[0].CRC2 = ... 
```

当您在中增加该值时，`[]`您将远离第一个元素。您可以通过位数计算出每个的“最大”大小。例如 CRC1 是 4 位，这意味着您最多可以拥有 1111 [2]即 15 [10]

# asp.net-mvc-3 - 更改 Windows Azure 云服务上的 .cshtml 文件

> ID：15644395
> 
> 赞同：0
> 
> 时间：2013-03-26T18:10:28.940
> 
> 标签：asp.net-mvc-3, razor, azure, azure-web-roles

我们有一个自定义 CMS 站点，管理员可以在其中对 _Layout.cshtml 进行更改（因为他们进行了大量更改）。该站点托管在 Azure 网站中，但现在我们将其移至云服务。

现在，管理面板正在读取并显示 _Layout.cshtml 的内容（实际上， ~/Views/Shared 文件夹中的所有文件都可以编辑），但是当应用程序尝试写入文件时，它会抛出这个错误：对路径“F:sitesrootViewsoasShared_Layout.cshtml”的访问被拒绝。

我们正在研究一种编辑布局文件的新方法，但在我们到达那里之前，我们需要快速修复！我正在使用这种方法写入文件： System.IO.File.WriteAllText(path, fileContents);

在本地，在 Windows azure 模拟器中，这可以正常工作，但在 Azure 上托管时则无法正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:24:51.520

首先，我不得不说即使你可以更新你的`_Layout.cshtml`文件也会有一些问题。

1.  如果您有多个 Web 角色实例，一旦管理员更改页面，它只会更新该实例的文件，但默认情况下不会更改其他文件。你必须以某种方式同步它们。

2.  如果您的实例因硬件故障或虚拟机资源重新分配等原因被移动到另一个虚拟机，您的管理员所做的所有更改都将丢失。

所以我强烈建议修改你的实现。如何将更改部分保存到 BLOB、表或数据库中，然后在呈现页面时从 DB 中检索内容。我认为这比仅仅修改页面本身要好。

HTH。

# asp.net-mvc-3 - Linq 分组会丢失子实体

> ID：15644397
> 
> 赞同：0
> 
> 时间：2013-03-26T18:10:30.897
> 
> 标签：asp.net-mvc-3, entity-framework, asp.net-mvc-4, ef-code-first

我有以下查询：

```
 var _customers = (from c in _db.UserProfiles.Include(x=>x.ParentCompanies).Include(x=>x.cProfile).Include(x=>x.cProfile.PhoneNumbers).Include(x=>x.cProfile.Addresses)
                          where (c.ParentCompanies.Any(pc => pc.CompanyUsers.Any(cu => cu.UserName == userName)) && c.cProfile != null)
                          group c by c.FirstName.Substring(0, 1).ToUpper() into customerGroup
                          select new ContactsViewModel
                          {
                              FirstLetter = customerGroup.Key,
                              Customers = customerGroup
                          }).OrderBy(letter => letter.FirstLetter); 
```

如果我取出`group`，它运行良好，并且`(parentCompanies, cProfile, ...)`一旦我将`group`背面放入其中就会包括所有孩子，它会丢失所有孩子。我该如何解决这个问题？

**更新**

我想我还应该包括我用来放入结果的视图模型。

```
public class ContactsViewModel
{
    public string FirstLetter { get; set; }
    public IEnumerable<UserProfile> Customers { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:23:20.747

Include only applies to items in the query results (i.e. the final projection) and cannot contain operations that change the type of the result between Include and the outermost operation (e.g. GroupBy())

[http://wildermuth.com/2008/12/28/Caution_when_Eager_Loading_in_the_Entity_Framework](http://wildermuth.com/2008/12/28/Caution_when_Eager_Loading_in_the_Entity_Framework)

If you want to eager load, do the grouping client-side (i.e. enumerate the query then call the GroupBy method on the results)

# php - PHP - 使用 GET 变量重新加载 URL

> ID：15644403
> 
> 赞同：0
> 
> 时间：2013-03-26T18:10:36.197
> 
> 标签：php, redirect, get

我想确保将 $_GET 变量设置为我的 URL 中另一个变量的值。如果没有，那么我想重新加载页面/网址以显示设置变量。这是我使用的代码：

```
session_start(); 
$openfile = $_SESSION['openfile'];
//check if $GET variable isset to the current $SESSION variable
if($_GET['file'] !== $_SESSION['openfile'] && !empty($_SESSION['openfile'])){
//if not then create new URL string
  $hloc = basename($_SERVER['PHP_SELF']).'?file='.$openfile;
//change location to new URL string
  header("Location: $hloc");
} 
```

我不明白为什么它不起作用。任何帮助都会很棒。谢谢。

编辑：问题是 url 没有反映标题信息应该是什么。如果页面然后再次重新加载，这将自行修复。然而，这显然不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:13:41.257

```
if(isset($_GET['file'])) {
   //its set means value is not equal to null or false
} else {
   //its not set so redirect
} 
```

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:49:46.387

我发现了问题。

这是由于脚本后面的标题信息不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:13:19.690

您能否提供一个示例 URL，以便我们查看它是否正在焦化？除此之外，试试这个。请注意`$hloc`现在如何在引号之外：

```
session_start(); 
//check if $GET variable isset to the current $SESSION variable
if($_GET['file'] !== $_SESSION['openfile'] && !empty($_SESSION['openfile'])){
//if not then create new URL string
  $hloc = basename($_SERVER['PHP_SELF']).'?file='.$openfile;
//change location to new URL string
  header("Location: " . $hloc);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T18:16:36.197

有一个错误。`Undefined variable: openfile`.

更改此行

`$hloc = basename($_SERVER['PHP_SELF']).'?file='.$openfile;`

至

```
$hloc = basename($_SERVER['PHP_SELF']).'?file='.$_SESSION['openfile']; 
```

由于 $openvariable 已设置（根据海报评论），因此唯一的错误是：未设置 SESSION 变量或 GET 变量。由于以下代码完美运行。

```
<?php
session_start(); 
$_SESSION['openfile']='foo';
$_GET['file']='bar';
$openfile = $_SESSION['openfile'];
//check if $GET variable isset to the current $SESSION variable
if($_GET['file'] !== $_SESSION['openfile'] && !empty($_SESSION['openfile'])){
//if not then create new URL string
  $hloc = basename($_SERVER['PHP_SELF']).'?file='.$openfile;
//change location to new URL string
  header("Location: $hloc");
}
?> 
```

从语法上看，您的代码看起来很完美，因此请正确检查是否设置了 GET 变量和会话变量。

首先暂时**评论此声明。** `header("Location: $hloc");`放：

```
echo $_GET['file'];
echo $_SESSION['openfile']; 
```

在 if 条件之前检查输出。它将帮助您跟踪和了解错误。

# user-interface - MonoTouch 中的 iPhone 4/iPhone 5 用户界面兼容性

> ID：15644404
> 
> 赞同：0
> 
> 时间：2013-03-26T18:10:37.453
> 
> 标签：user-interface, xamarin.ios, iphone-5, iphone-4

我希望有人可以帮助我解决这个问题。我有一个应用程序，我正在尝试更新它以摆脱在 iPhone 5 上运行时的信箱外观。我已将 Default-568h@2x.png 添加到项目中，并且该应用程序似乎可以正确缩放。任一设备上的启动画面看起来都是正确的，但是我的“主”屏幕上有一个工具栏，我似乎无法进入正确的位置。如果我对 5 正确，我在 4s 上看不到它，如果我对 4s 正确，它在 5 上非常低。

我错过了什么吗？我是否需要手动移动顶部的工具栏？我是否需要在应用程序的所有屏幕上移动所有控件？

任何建议表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:51:08.697

以下是使用 Interface Builder 处理大小调整的一些技巧。

1.  利用 Interface Builder 中的 Simulated Metrics，如下所示： ![属性检查器，模拟指标，尺寸：Retina 4 Full Screen](../Images/f47b09385081199ce79bc74b0cb4650a.png)
    为此，请选择您的顶级视图，然后打开 Attribute Inspector。然后，您可以选择不同的尺寸和方向来查看您的视图如何响应。
2.  选择 Autosizing 选项，如下所示：
    ![尺寸检查器，视图，固定上边距](../Images/f168b5d1e3bddc4ebe8eed0f92f8d1d8.png)
    在您的情况下，您需要上面的固定边距，但下面的灵活边距。请注意，这与工具栏的默认设置相反，因为 iOS 约定工具栏位于视图的底部。
3.  意识到由于旋转和不同的屏幕尺寸而调整大小通常可以以相同的方式处理。（因此，如果您使用 Autosizing 处理纵向和横向方向，iPhone5 布局通常会自行处理。）

# c++ - 异常处理的基类技术

> ID：15644406
> 
> 赞同：8
> 
> 时间：2013-03-26T18:10:38.893
> 
> 标签：c++

[GotW#8](http://www.gotw.ca/gotw/008.htm)的任务是在 C++ 中实现一个异常中立的通用堆栈数据结构，假设只有模板参数的析构函数不抛出。诀窍是处理可能抛出的模板参数操作（构造函数、复制构造函数、赋值），以使堆栈在抛出时保持一致状态。

在解决方案中，Herb Sutter 说

> 为了使这个解决方案更简单，我决定不演示异常安全资源所有权的基类技术。

经过一番谷歌搜索，我找到了 Dave Abrahams 可以追溯到 1997 年的[答案。在他的解决方案中，他处理了基类中内存的分配和删除，并在子类中实现了堆栈操作。](https://groups.google.com/d/msg/comp.lang.c++.moderated/ajsM_rFWJ74/4iTRyU8LoDUJ)这样，他确保了复制构造函数中的元素复制与内存分配是分开的，这样如果复制失败，无论如何都会调用基类析构函数。

作为参考，这是 Dave 的复制构造函数，并添加了我的评论：

```
// v_ refers to the internal array storing the stack elements
Stack(const Stack& rhs)
        : StackBase<T>( rhs.Count() ) // constructor allocates enough space
                                      // destructor calls delete[] appropriately
{
        while ( Count() < rhs.Count() )
           Push( rhs.v_[ Count() ] ); // may throw
} 
```

如果基构造函数成功，则即使子类的复制构造函数抛出异常，也可以保证基析构函数中的内存清理。

我的问题是：

1.  除了上述之外，该方法还有其他好处吗？
2.  当我自己解决问题时，我想出了这个复制构造函数：

    ```
    // v_ refers to the internal array storing the stack elements
    // vsize_ is the amount of space allocated in v_
    // vused_ is the amount of space used so far in v_
    Stack (const Stack &rhs) :
            vsize_ (0), vused_ (0), v_ (0) {
        Stack temp (rhs.vused_); // constructor calls `new T[num_elements]`
                                 // destructor calls `delete[] v_`
        std::copy (rhs.v_, rhs.v_ + rhs.vused_, temp.v_); // may throw
        swap (temp);
    }
    void swap (Stack &rhs) {
        std::swap (v_, rhs.v_);
        std::swap (vused_, rhs.vused_);
        std::swap (vsize_, rhs.vsize_);
    } 
    ```

    与这种方法相比，我发现拥有一个基类有点麻烦。有什么理由应该首选基类技术而不是这种 temp-copy-then-swap 方法？请注意，我和 Dave 都已经拥有该`swap()`成员，因为我们在`operator=()`.

3.  Dave Abrahams 的技术似乎并不为人所知（根据 Google 的说法）。它有不同的名称吗？这是标准做法吗？我错过了什么吗？

笔记：

*   假设戴夫`Push()`在一个循环中等同于我的使用`std::copy`
*   让我们将智能指针排除在答案之外，因为它们的使用会带走本练习中显式管理内存的意义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:30:33.530

从行为上讲，这两种实现是相同的。他们都设置了一个托管内存分配对象，如果构造函数失败，它将在范围退出时清理。复制到临时变量可能会更昂贵，但如评论中所述，`std::move`可能会使这些额外成本无效。在回答您的具体问题时：

1.  Abraham 的示例确实使堆分配远离您的实际类实现细节。在您的代码中，如果您在复制数组之前/之后进行更复杂的内存操作，则确保正确管理所有实体可能会稍微困难一些。否则，关于第一个实现的行为，我看不到您尚未涵盖的任何明确细节。
2.  Abraham 的实现确实将清理工作抽象到了一个位置。如果多个类使用`StackBase<T>`然后他们每个人都可以安全地假设如果他们抛出异常，他们的动态内存将被清理。在您的实现中，您需要重写（至少部分）临时对象并交换代码以实现相同的目的。有效地，这种实现减少了实现 StackBase 的多个子类的行数。但是，如果您希望在其他基类之上分配额外的内存，您的实现会避免多重继承。您的代码还避免了模板代码膨胀的编译时间/大小——尽管在大多数情况下我通常不认为这是一个很大的负面影响。除非我尝试编写非常通用的用例代码，否则我可能会使用与您的代码接近的东西作为默认值。
3.  我不知道这种方法是否有一个特定的名称——如果我找到了，我会更新它——但我之前至少在一本 C++ 编程书籍中看到过它。

# ruby-on-rails - Ruby、地图、对象属性

> ID：15644408
> 
> 赞同：2
> 
> 时间：2013-03-26T18:10:45.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个如下所示的对象：

```
class Report
  attr_accessor :weekly_stats, :report_times

  def initialize
    @weekly_stats = Hash.new {|h, k| h[k]={}}
    @report_times = Hash.new {|h, k| h[k]={}}
    values = []
  end
end 
```

我想循环遍历weekly_stats 和report_times 并大写每个键并为其分配值。

现在我有这个：

```
report.weekly_stats.map do |attribute_name, value|
  report.values <<
 {
    :name => attribute_name.upcase,
    :content => value ||= "Not Currently Available"
  }
end
report.report_times.map do |attribute_name, value|
  report.values <<
  {
    :name => attribute_name.upcase,
    :content => format_date(value)
  }
end
report.values 
```

有没有一种方法可以在一个循环中同时映射每周统计数据和报告时间？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:34:55.903

```
(@report_times.keys + @weekly_stats.keys).map do |attribute_name|
  {
    :name => attribute_name.upcase,
    :content => @report_times[attribute_name] ? format_date(@report_times[attribute_name]) : @weekly_stats[attribute_name] || "Not Currently Available"
  }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:36:20.110

如果您保证在 中为 nil 或空字符串`weekly_stats`，并且在 中获得日期对象`report_times`，那么您可以使用此信息来处理合并的哈希：

```
merged = report.report_times.merge( report.weekly_stats )

report.values = merged.map do |attribute_name, value|
 {
    :name => attribute_name.upcase,
    :content => value.is_a?(Date) ? format_date(value) : ( value || "Not Currently Available")
  }
end 
```

# c# - 从 webfarm 调用 SignalR 客户端

> ID：15644413
> 
> 赞同：1
> 
> 时间：2013-03-26T18:10:59.413
> 
> 标签：c#, .net, signalr, nservicebus, azureservicebus

我有以下消息传输​​方案

客户端 -> 调用 SignalR -> 调用 NServiceBus -> 内部处理消息 -> 使用结果调用 NServiceBus 网关服务 -> 调用 SignalR 集线器 -> 使用结果更新客户端。

在选择是否使用 SignalR 与长轮询时，我需要知道 SignalR 是否可扩展。所以在做作业时，我在 Azure 服务总线上遇到了 SignalR。设置在 Global.asax 应用程序启动时完成。

最终，我需要能够从 NServiceBus 处理程序内部执行此操作：

```
 var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
        context.Clients.Group(group).addMessage(message); 
```

问题是上下文是否会被提升，因为我（可能）从另一台机器而不是客户端连接的机器调用它？

另外，SignalR 实现用来播种主题的分片模式是什么？我知道我可以将其配置为使用 N 个主题，但它实际上如何确定哪些消息转到哪些主题以及它是否与外部调用者 PoV 相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:23:44.140

您应该能够在您通过 SignalR注册为您`GlobalHost.ConnectionManager.GetHubContext`的任何应用程序中使用。如果您在应用程序中调用，这将为您完成。`ServiceBusMessageBus``IMessageBus``GlobalHost.DepenencyResolver``GlobalHost.DepenencyResolver.UseServiceBus(...)`

如果执行此操作，则每次调用或返回 from`addMessage`的任何其他集线器方法都会向 Azure 服务总线发布一条消息。如果有订阅的客户端连接到网络场中的其他节点，其他节点将从服务总线中获取消息并将其中继给订阅的客户端。`IHubContext``GetHubContext`

消息去往哪个主题不应该与外部调用者的 PoV 相关。您可以使用多个主题来提高吞吐量，但对于大多数用例来说，一个主题就足够了。

如果您选择使用多个主题，则可以将消息转到的主题视为本质上是随机的。唯一可以保证的是来自同一发件人的消息将转到同一主题。这允许 SignalR 按顺序保持来自同一发件人的消息。

**警告购买者：** SignalR 尚未发布支持横向扩展的官方版本。1.1 版本将是第一个正式支持横向扩展的版本。

# php - 在 PHP 中运行多个查询会插入错误的值

> ID：15644416
> 
> 赞同：0
> 
> 时间：2013-03-26T18:11:06.430
> 
> 标签：php, mysql, mysqli

我遇到了一个我以前从未见过的问题。代码太多太多，类太多，所以请原谅我没有详细说明。有趣的是：

```
$copy = clone $this;
$copy->workerid = $new_workerid;
if ( $copy->mysql_create_row( $this->pending_table ) )
    return $copy; 
```

这按预期运行。当我进入数据库时​​，我在表 Pending 中看到一个新条目。

但是，当我连续运行多个查询时：

```
$copy = clone $this;
$copy->workerid = $new_workerid;
if ( $copy->mysql_create_row( $this->pending_table ) )
    if ( $this->mysql_delete_row( $this->pending_table ) )
        if ( $this->mysql_create_row( $this->cancelled_table ) )
            return $copy; 
```

然后由于某种无法解释的原因，错误的 id 列被插入到其中一个表中。在特定方法 $copy->mysql_create_row 中，除其他外，执行以下操作：

```
if ( $con = db_connect() ) {
    $res = mysqli_query( $con, "INSERT INTO $table (`workerid`,`time`,`location`,`tasks`) VALUES ('$this->workerid','$this->datetime','$this->location','$this->tasks');" ) 
    or error_log( "mysql_create_row Error: " . mysqli_error( $con ) );
    if ( $res ) {
        $this->contactid = mysqli_insert_id( $con );
        foreach ( $this->attendees as $att ) {
            $att->__setContactId( $this->contactid );
            if ( !$att->mysql_create_row( $this->attendee_table ) ) {
                error_log( " Contact->mysql_create_row Error: Did not create attendee MySQL row" );
                return false;
            } 
```

通过对象方法 $att->mysql_create_row( $this->attendee_table ) 进行委托的工作方式相同，它只是一个 INSERT 查询。

现在这是没有意义的地方：虽然新插入的 $copy 对象在 $copy->mysql_create_row 处插入了正确的 id，但 $att->mysql_create_row 没有！它插入旧的ID。此外，当我从 $att->mysql_create_row 回显查询时，它回显出正确的（新 id）！！！

但是当我进入实际的数据库时，它已经插入了旧的 id。这对我来说完全没有意义。

我尝试创建自定义 __clone() 方法，尝试确保我有副本而不是引用（该死的 php），但它仍然会产生相同的错误。

问题似乎与连续查询有关，因为当我不执行删除或新插入时，我没有任何问题。

删除工作正常，第二次插入也工作正常，没有任何错误。

什么可能会迫使 MySQLi api 插入错误的 id，而查询回显正确的 id？我只能处理某种形式的后台/多线程损坏，但由于我无法控制这类事情，我什至不知道如何解决这个问题。

从 $att->mysql_create_row 回显查询时，我得到：

查询前 id: 305

> '插入到`XXXXXXXX`. `attendees` ( `contactid`, `title`, `forenames`, `surname`, `relationship`, `gender`, `age`, `arrived`, `left`, `supervised`, `ics_number`) 值 ('305','Mr', 'Alex','Werner','','M','29/08/1981','0',' ','','0');'

查询后 id: 305

但是当我真正进入数据库时​​，插入的值是旧的 id 值（比如 294）。表列不是自动递增的，不是唯一的或主要的，它只是一个 int(11)。

到底是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:24:20.987

您的问题可能是您正在使用`mysql_last_insert_id`获取最后插入行的 id。当您插入多行时，您可能没有获得正确的 ID。

将`mysql_last_insert_id`call替换为`select`返回您上次插入的 id 的查询，并查看您的问题是否已解决。

# swing - 当它们发生在 EDT 上时如何获得 Clojure 异常通知？

> ID：15644421
> 
> 赞同：1
> 
> 时间：2013-03-26T18:11:35.687
> 
> 标签：swing, exception, clojure

我一直在抓挠我的头发很长一段时间，但我找不到一个错误。结果证明这是一个例外，但显然因为它发生在 EDT 上，我无法“看到”它。从终端运行时它没有显示在“lein run”终端中，从 Emacs 运行时它没有显示在任何 Emacs 缓冲区中。

很长一段时间后，我最终这样做了：

```
(try (function-call-with-arity-error ...) (catch Exception e (println e) 
```

最后，多亏了这个，我才能看到这个打印出来的：

```
#<ArityException clojure.lang.ArityException: wrong number of args passed to... 
```

因此我能够找到我的错误。

如果我这样做：

```
(do 
   (println "trying...")
   (arity-error-here-on-purpose) ; this ones throws the arity error
   (println "done")
) 
```

然后终端打印*"trying..."*但永远不会*"done..."*。

我尝试设置一个默认的未捕获异常处理程序：异常没有被捕获。就好像程序或 EDT 在 arity 异常之后“卡住”了（没有在任何地方打印任何内容）。

下次我应该如何处理这个问题？因为我在任何地方都看不到任何消息，所以我花了很长时间才找到。再一次：'lein run' 终端中没有任何内容，任何 Emacs 缓冲区中也没有任何内容。

我是否应该创建一个函数来包装应该在 EDT 上手动尝试/捕获的调用，然后记录/打印异常？

另请注意，这是在一个相对“长”的 Clojure 应用程序中：1000 行代码，因此我无法将其粘贴到此处，也无法在一个简短的示例中重现该行为（但它在我的应用程序中始终如一地发生）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:23:38.127

您可以使用 Thread 注册未捕获的异常处理程序，这样您就不必包装 EDT 上可能发生的所有调用。

*   [Thread.UncaughtExceptionHandler](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)

尝试在 EDT 上注册一个，看看这是否会给你想要的行为。

# objective-c - 带有 NSFetchedResultsControllers 的 NSError 对象

> ID：15644422
> 
> 赞同：0
> 
> 时间：2013-03-26T18:11:38.940
> 
> 标签：objective-c, coding-style, nsfetchedresultscontroller, nserror

这是一个简单的：`NSError`每次我在我的`NSFetchedResultsController`. 这发生在许多方法中，因此我的主视图控制器中目前有九个方法。我应该创建一个`NSError`作为属性并使用它，还是更传统地接受每次使用时创建一个新属性？

我猜创建多个错误的好处是，如果发生多个错误，您可以独立处理两个错误，但如果这不太可能发生，是否可以为所有`performFetch`调用使用共享错误？我正在学习很多编程约定和技术，所以如果这不是问题，我很抱歉，我只是想获得一些关于`NSError`在各种地方使用对象的更典型方法的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:29:16.953

您并没有真正创建`NSError`对象。您正在声明对`NSError`对象的引用，然后将引用传递给可以将引用指向`NSError`它创建的对象的方法。

```
NSError *err; // just a reference, no object created
// this creates an object, but you don't do this
err = [NSError errorWithDomain:@"foo" code:0 userInfo:nil];

// You do this.... 
BOOL success = [fetchedResultsController performFetch:&err]; 
```

区别在于，您并没有真正创建一堆需要开销的对象。因此，如果您对所有变量重复使用相同的变量，或者为每个变量创建一个新变量，则不会影响性能。

所以要回答这个问题......要么使用 1 个变量，要么使用许多你认为合适的变量。某些代码可能会因任何错误而失败并拒绝继续，因此 1 个错误就可以了。其他代码可能想尝试并继续运行，这样您就可以保留所有错误并在最后将它们喷出。这是最适合您当时正在处理的特定编码的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:23:16.873

只需在堆栈上声明一个并传递它的地址实际上是免费的。所以你可以这样做：

```
NSError *errorA;

// do something, passing &errorA
if (!errorA) {
    // do something passing &errorA again
} 
```

或者，几乎没有任何额外成本（只是堆栈上的另一个指针）

```
NSError *errorA, *errorB;

// do something, passing &errorA
// do something, passing &errorB, that doesn't care whether the last thing succeeded

if (!errorA && !errorB) {
    // do something else
} 
```

这里无需担心 NSError 的分配。它应该更多地是关于第一个动作成功和执行第二个动作之间的依赖逻辑。

# vb.net - 创建跨域 Web 服务

> ID：15644426
> 
> 赞同：0
> 
> 时间：2013-03-26T18:11:55.907
> 
> 标签：vb.net, json, web-services, xmlhttprequest, httpresponse

所以，我对创建 Web 服务非常陌生，但我成功地制作了一个简单的 Web 服务，它可以从数据库中返回我需要的信息作为`List(Of dictionary(of string, string))`对象。

出于测试的目的，我手动创建了它，我的代码如下所示：

```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Web.Script.Serialization

<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class test
Inherits System.Web.Services.WebService

<WebMethod()> _
Public Function dic() As String
    Dim newDic As New List(Of Dictionary(Of String, String))
    Dim one As New Dictionary(Of String, String)
    one.Add("id", "1")
    one.Add("name", "the name")
    one.Add("price", "5.99")
    newDic.Add(one)
    Dim two As New Dictionary(Of String, String)
    two.Add("id", "2")
    two.Add("name", "item name two")
    two.Add("price", "1299")
    newDic.Add(two)
    Dim s As New JavaScriptSerializer
    Dim str As String = s.Serialize(newDic)
    Return str
End Function

End Class 
```

这个网络服务“dic”给了我这样的序列化字符串/列表：

```
[{"id":"1","name":"the name","price":"5.99"},{"id":"2","name":"item name two","price":"1299"}] 
```

我可以像这样在 VB 代码中阅读它：

```
Sub loadMe() Handles Me.Load
    Dim t As New websvce.testSoapClient
    Dim d As String = t.dic
    Dim s As New JavaScriptSerializer
    Dim d2 = s.DeserializeObject(d)
    Response.Write(d2(1)("name") & "<hr>")
End Sub 
```

这给了我索引为“1”的“name”元素的输出。它工作正常。

然而，不出所料，当尝试使用 jQuery 使用以下代码获取此信息时，它不起作用：

```
 $(document).ready(function () { 
        $.getJSON('URL/test.asmx/dic', function (data) {
            alert(data);
        });
    }); 
```

所以我花了一天的大部分时间在谷歌上搜索，发现各种各样的评论和对话告诉我为什么不允许跨域脚本，还有使用代理解决它的方法，向页面添加标题等等。 .但是...问题没有最终的解决方案。

这是我发现的一些 SO 问题：

[Access-Control-Allow-Origin 不允许来源 http://localhost](https://stackoverflow.com/questions/11597314/origin-http-localhost-is-not-allowed-by-access-control-allow-origin)

[如何在 asp.net 中实现“Access-Control-Allow-Origin”标头](https://stackoverflow.com/questions/6516591/how-to-implement-access-control-allow-origin-header-in-asp-net)

还有更多，但我找不到符合我标准的绝对解决方案。我想以与上述类似的格式输出数据，并使用 jQuery 从另一个域访问它。

我发现的最简单的解决方法是编写一个在接收服务器上运行的处理页面，只需按照我上面的 VB 代码示例加载数据并`webMethod`在该服务器上操作以吐出 JSON，但我宁愿整个事情可以由 Web 服务处理，因此无需在消费服务器上运行额外的文件。

编辑; 实际上，我还需要能够执行 POST 操作。

# java - 如何实现根据宽度显示/隐藏内容的 JPanel？

> ID：15644427
> 
> 赞同：2
> 
> 时间：2013-03-26T18:12:02.890
> 
> 标签：java, swing, layout, miglayout

我正在尝试实现一个 JPanel，它根据可用大小显示更多或更少的信息。

基本上，这个想法是有一个这样的默认内容：

![在此处输入图像描述](../Images/9abdc301e96e8af73b1640866bba28d3.png)

当空间减少时，这可以缩小到：

![在此处输入图像描述](../Images/09be817b9b60ced8282a48a41ac6c37d.png)

我的代码是这样的：

```
import net.miginfocom.swing.MigLayout;
import javax.swing.*;

class PanelDemo extends JPanel {
private final JLabel title = new JLabel();

private final JLabel counter1 = new JLabel("00");
private final JLabel counter1Label = new JLabel();

private final JLabel counter2 = new JLabel("00");
private final JLabel counter2Label = new JLabel();

/**
 * Instantiates a new obs app cadre message bloc panel.
 */
public PanelDemo() {
    this.setOpaque(false);
    initGUI();
}

private final void initGUI() {
    // 1°)
    final MigLayout migLayout = new MigLayout(
            "fillx, hidemode 2, debug",
            "[growprio 0][]" //define 4 columns
    );

    setLayout(migLayout);

    // 2°)
    //
    add(title, "spanx");
    add(counter1, "newline");
    add(counter1Label);
    add(counter2);
    add(counter2Label);
}

public static void main(String[] args) {
    final JFrame jFrame = new JFrame("test 4");
    jFrame.getContentPane().setLayout(new MigLayout("fillx, debug"));
    final PanelDemo item1 = new PanelDemo();
    item1.title.setText("Element 1");
    item1.counter1Label.setText("First lbl");
    item1.counter2Label.setText("Second lbl");
    jFrame.getContentPane().add(item1, "growx, gpx 110");

    final PanelDemo item2 = new PanelDemo();
    item2.title.setText("Element 2");
    item2.counter1Label.setText("First lbl");
    item2.counter2Label.setText("Second lbl");
    jFrame.getContentPane().add(item2, "growx, gpx 100");

    jFrame.pack();
    jFrame.setVisible(true);
} } 
```

我尝试添加一个 ComponentListener 并覆盖 componentResized() 以查找何时可以显示/隐藏我的辅助标签，但我没有成功。

有谁知道如何实现这种与 MigLayout 增长优先级相匹配的行为？

**Update1：**​​我在想...如果我将最小宽度设置为 counter1+label1，将最大尺寸设置为 counter2+label2，然后监听调整大小操作并将首选尺寸更改为最小值或最大值。这种机制会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:05:22.883

这个怎么样：

```
public static JPanel panel(String name) {
    JPanel panel = new JPanel(new MigLayout("insets 0, wrap 4, fillx, debug", "[][][shrink 200][shrink 200, grow 200]"));
    panel.add(new JLabel(name), "spanx 4");
    panel.add(new JLabel("00"));
    panel.add(new JLabel("First lbl"));
    panel.add(new JLabel("01"));
    panel.add(new JLabel("Second lbl"));
    return panel;
}

public static void main(String[] args) {
    JPanel panel = new JPanel(new MigLayout("insets 10, gap 10, fillx, debug"));
    panel.add(panel("Element 1"), "w (50% - 15)!");
    panel.add(panel("Element 2"), "w (50% - 15)!");

    JFrame frame = new JFrame();
    frame.setContentPane(panel);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

我很难让两个主要列的大小相等；我必须通过在组件而不是列上设置宽度来做到这一点。我不确定为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T21:27:06.273

我使用 LayoutCallback 实现了一个自动隐藏机制，根据面板的宽度切换组件的可见性。

这是一个例子：

```
MigLayout layout = new MigLayout("fill");
JPanel panel = new JPanel(layout);

JLabel label1 = new JLabel("Label 1");
label1.putClientProperty("autohide.width", 300);

JLabel label2 = new JLabel("Label 2");
label2.putClientProperty("autohide.width", 200);

panel.add(label1, "grow");
panel.add(label2, "grow");                

layout.addLayoutCallback(new LayoutCallback() {
    @Override
    public void correctBounds(ComponentWrapper wrapper) {
        JComponent component = (JComponent) wrapper.getComponent();

        Number width = (Number) component.getClientProperty("autohide.width");
        if (width != null) {
            if (component.isVisible() && wrapper.getParent().getWidth() < width.intValue()) {
                component.setVisible(false);
            } else if (!component.isVisible() && wrapper.getParent().getWidth() > width.intValue()) {
                component.setVisible(true);
            }
        }
    }
}); 
```

这里label1在面板宽度缩小到300像素以下时隐藏，label2在宽度小于200像素时消失。

# sql-server - 将 SQL 中的多项数据绑定到标签

> ID：15644428
> 
> 赞同：0
> 
> 时间：2013-03-26T18:12:05.037
> 
> 标签：sql-server, visual-studio-2010, visual-studio, sql-server-2008, visual-studio-2008

如何将 SQL 中的多个数据项绑定到标签？

这是我的代码：

```
 Dim str As String = ("Data Source=PC1; User ID=sa; Password=pwd;Databasfriend")
    Dim con As New SqlConnection(str)
    Dim str1 As String = "SELECT * FROM tbl_course"
    Dim da As New SqlDataAdapter(str1, con)
    Dim dataset1 As New DataSet()
    da.Fill(dataset1, "course")
    lbl.DataBindings.Add("text", dataset1, "course.Course_Code") 
```

它只绑定一项数据，我想在特定列中绑定多项数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:45:04.573

您可以在 SQL 语句中创建一个字符串并绑定到该字符串：

```
Dim str1 As String = "SELECT Course_Title + '(' + Course_Code + ')' AS lbl1 FROM tbl_course" 
```

..

```
lbl.DataBindings.Add("text", dataset1, "course.lbl1") 
```

# c# - Windows 应用商店应用程序（Metro 应用程序）中的 Web API 文档

> ID：15644429
> 
> 赞同：1
> 
> 时间：2013-03-26T18:12:05.840
> 
> 标签：c#, windows-8, windows-runtime, asp.net-web-api, windows-store-apps

我记得几个月前在 MSDN 上看到了一些文档，用于从 Windows 应用商店应用程序中访问 Web API，并带有示例，但我再也找不到这个页面了，而且 Google 搜索也没有为 MSDN 产生一个相关的结果。

有谁知道这个的文档在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:31:04.673

[nkvu - 退出评论并进入答案，以防其他人正在寻找类似的东西]

我不知道它在 MSDN 上的哪个位置，但这里似乎有一个可下载的[示例](http://www.piotrwalat.net/consuming-asp-net-web-api-services-in-a-windows-8-c-xaml-app/)。[此处](http://support.microsoft.com/kb/2778398)和[此处](http://www.c-sharpcorner.com/UploadFile/c25b6d/create-a-web-api-and-consume-it-in-the-windows-8-apps/)的文档显示代码但没有可下载的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:33:36.567

大多数包含 HttpClient 的 System.Net.Http 命名空间可用于 Windows 应用商店应用程序。请参阅[http://msdn.microsoft.com/en-US/library/System.Net.Http.aspx](http://msdn.microsoft.com/en-US/library/System.Net.Http.aspx)

# c# - 如何持续监控一组线程，然后在它们结束后执行一些操作？

> ID：15644433
> 
> 赞同：2
> 
> 时间：2013-03-26T18:12:17.540
> 
> 标签：c#

如何持续监视一组线程，然后在它们结束后执行一些操作。

我的代码如下：

```
int threadcount = 5;

for (int i = 0; i < threadcount; i++)
{                    
  _azgetThread = new Thread(() => Getazuredata());
  _azgetThread.Start();
} 
```

在上述情况下，创建了 5 个线程（_azgetThread），我想监视它们并知道它们何时结束。

我熟悉 _azgetThread.IsAlive 但在这种情况下有多个实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:14:08.017

这里一个不错的选择是使用[CountdownEvent](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.aspx)。每个线程都可以在事件完成时设置事件，主线程可以检查是否设置了事件或调用[Wait](http://msdn.microsoft.com/en-us/library/dd270870.aspx)就可以了。

您始终可以使用相同的机制（检查`IsAlive`），但您需要将线程存储在一个数组中，`List<Thread>`而不是对所有 5 个线程使用单个变量。

话虽如此，我还建议使用 TPL 而不是单个线程。根据您的工作，您可以使用`Parallel.For`或`Parallel.ForEach`运行所有 5 个项目，甚至可以跨项目集合使用 PLINQ。如果您想保持相同的逻辑，您可以使用`Task.Factory.StartNew`and[`Task.WhenAll`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.whenall.aspx)安排一个任务，它会在 5 个初始任务完成时通知您。

# c++ - C++：将数组类转换为类模板（范围问题）

> ID：15644437
> 
> 赞同：0
> 
> 时间：2013-03-26T18:12:29.157
> 
> 标签：c++, arrays, templates, scope

我正处于尝试将包含运算符重载的数组类转换为模板化类的早期阶段。目前我正在尝试将模板定义添加到类和每个函数中。但是，这应该相当简单，每当我运行程序时，都会出现范围错误。

编译器说'T'没有在这个范围内声明（我会在它发生的那一行注释错误）。该错误也会在其他函数定义上再次出现。我正在使用一个涉及模板化类的程序作为指南，它以我尝试的确切方式实现功能（这就是我感到困惑的原因）。我需要做什么来解决这个问题？

谢谢你。

```
#include <iostream>
#include <iomanip>
#include <cstdlib>
#include <stdexcept>
using namespace std;

#ifndef ARRAY_H
#define ARRAY_H

template <typename T>
class Array
{
  public:
         Array(int = 10);
         Array(const Array&);
         ~Array();
         int getSize() const;

         const Array &operator=(const Array &);
         bool operator==(const Array&) const;

         bool operator!=(const Array &right) const
         {
              return ! (*this == right);     
         }     

         int &operator[](int);
         int operator[](int) const;
  private:
          int size;
          int *ptr;        
};

#endif

template<typename t>
Array<T>::Array(int arraySize) //ERROR: T was not declared in this scope***********
{
 if(arraySize > 0)
              size = arraySize;
 else
     throw invalid_argument("Array size myst be greater than 0");

 ptr = new int[size];

 for(int i = 0; i < size; i++)
              ptr[i] = 0;   
}

template<typename t>
Array<T>::Array(const Array &arrayToCopy): size(arrayToCopy.size)
{
 ptr = new int[size];

 for(int i = 0; i < size; i++)
         ptr[i] = arrayToCopy.ptr[i];                  
}

template<typename t>
Array<T>::~Array()
{
 delete [] ptr;              
}

template<typename t>
int Array<T>::getSize() const
{
 return size;   
}

template<typename t>
const Array<T> &Array::operator=(const Array &right)
{
 if (&right != this)
 {
    if(size != right.size)
    {
            delete [] ptr;
            size = right.size;  
            ptr = new int[size];
    }

 for(int i = 0; i < size; i++)
         ptr[i] = right.ptr[i]; 
 }  

 return *this;
}

template<typename t>
bool Array<T>::operator==(const Array &right) const
{
 if(size != right.size)
         return false;

 for(int i = 0; i < size; i++)
         if(ptr[i] != right.ptr[i])
                   return false;

 return true;     
}

template<typename t>
int &Array<T>::operator[](int subscript)
{
 if(subscript < 0 || subscript >= size)
              throw out_of_range("Subscript out of range");

 return ptr[subscript];   
}

template<typename t>
int Array<T>::operator[](int subscript) const
{   
    if(subscript < 0 || subscript >= size)
                 throw out_of_range("Subscript out of range");

    return ptr[subscript];
}

int main()
{
    //main is empty at the moment because I want to make sure that the class is functional
    //before implementing the driver function.

    system("pause");  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:13:39.693

在您的每个函数定义之前，您已经编写了：

```
template<typename t> 
```

你的意思是：

```
template<typename T> 
```

也就是说，它应该匹配你的类的模板参数，它是一个大写的`T`。

# google-maps-sdk-ios - GMSProjection 线程安全

> ID：15644439
> 
> 赞同：2
> 
> 时间：2013-03-26T18:12:31.380
> 
> 标签：google-maps-sdk-ios

GMSProjection 和 GMSMarkerOptions 在后台线程上使用是否安全（假设访问是同步的）？

GMSMapView.h 特别指出 GMSMapView 和“相关对象，例如标记和折线”不是线程安全的，但这是否也适用于 GMSProjection，因为它是一个不可变对象，它看起来可能/应该是安全的？

我问是因为我想在工作线程上进行一些相当繁重的位置计算，我需要一个投影来这样做。自然，我会从地图中获取投影，并在主线程上进行因后台工作而产生的任何更改。

# asp.net-mvc - 控制和管理 DbContext

> ID：15644442
> 
> 赞同：0
> 
> 时间：2013-03-26T18:12:41.987
> 
> 标签：asp.net-mvc, entity-framework, dbcontext

现在我有这个上下文

```
namespace Dafoor_MVC.Models
{
  public class DafoorDBContext : DbContext
  {
    public DbSet<Department> departments { get; set; }
    public DbSet<Course> courses { get; set; }
    public DbSet<Reply> replies { get; set; }
  }
} 
```

这个上下文会变大，因为我有大约 40 个模型要添加。

1-在一个上下文中拥有 40 个模型是个好主意吗？

2-我希望在所有用户之间共享此上下文，因为如果记录已经在上下文中，我不想每次都使用查询来访问数据库，但这会影响服务器内存，所以我该如何实现像“最后一个对象曾经被释放或在一段时间内没有被调用的对象从上下文中被释放”？我不想处理整个上下文。

3-如果第 2 点不起作用，我可以在用户会话中放置一个上下文实例，这样上下文将是用户特定的而不是应用程序特定的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:18:27.390

> 将 40 个模型放在一个上下文中是个好主意吗？

如果它们在逻辑上属于同一类，那并没有错。

> 我希望在所有用户之间共享此上下文

不，你没有。您希望为每个单独的 HTTP 请求实例化一个上下文，并在处理完 HTTP 请求之前将其处理掉。不要缓存您的 DbContext *。*

> 我可以将上下文的实例放在用户会话中，这样上下文将是特定于用户的，而不是特定于应用程序的

你不应该缓存你的上下文。但是，您可以将使用上下文检索到的对象存储在 Session 中。如果不先将对象重新附加到新上下文，您将无法*更新对象/对象图。*

**更新**

这就是为什么 DbContext 永远不应存储在当前 HTTP 请求之外的原因：

[每个 Web 请求一个 DbContext... 为什么？](https://stackoverflow.com/questions/10585478/one-dbcontext-per-web-request-why)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:24:14.150

1) 没有理由担心在单个上下文类中有 40 多个 DbSet。它们只是集合，仅填充您当前使用的对象

2) 不保证 DbContext 和 DbSet 的实例成员是线程安全的。我不推荐单例方法

3）你可以，但一定要正确处理数据库并发异常

# android - 单击插入按钮后 SQLite Android 崩溃（插入按钮用于创建和插入表和表值）

> ID：15644444
> 
> 赞同：0
> 
> 时间：2013-03-26T18:12:55.177
> 
> 标签：android, android-sqlite

代码：

```
public class DatabaseOpenHelper extends SQLiteOpenHelper {
public String str=null;
public static final String TABLE_SPEECH = "takespeech";
public static final String COLUMN_ID = "id";
public static final String SPEECH_TEXT = "speech";

private static final String DATABASE_NAME = "speechtext.db";
private static final int DATABASE_VERSION = 1;

private SQLiteDatabase database;
private DatabaseOpenHelper dbHelper;
private static final String TABLE_CREATE =
                "CREATE TABLE " + TABLE_SPEECH + "(" + COLUMN_ID +" INTEGER, " +
                 SPEECH_TEXT + " TEXT);";

    DatabaseOpenHelper(Context context) {
        super(context,DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(TABLE_CREATE);
        Log.v("MainActivity", "after creation");
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_SPEECH);

        // Create tables again
        onCreate(db);
    }

    public void open() throws SQLException {
        database=dbHelper.getWritableDatabase();
    }

    public void close() {
        database.close();
    }

    public void insert(String getpass) {
        ContentValues cv=new ContentValues();
        cv.put(COLUMN_ID, 1);
        cv.put(SPEECH_TEXT,getpass);
      //    open();
        database.insert(TABLE_SPEECH, null, cv);
      //    close();
    }

   public String readme() {
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery("SELECT"+SPEECH_TEXT+"FROM"+TABLE_SPEECH,null);
        if (cursor.moveToFirst()) {
            str = cursor.getString(cursor.getColumnIndex(SPEECH_TEXT));
        }

        return str; 
    }
} 
```

并在 Mainactivty 中添加和创建表和表值的按钮（是）：单击此应用程序崩溃后。

```
yes.setOnClickListener(new View.OnClickListener(){
        public void onClick(View view) {  
            try {
               createTable();       
            }
            catch (SQLiteException se) {
               Log.e(getClass().getSimpleName(), "Could not create or Open the database");
            } 
        }
}); 
```

这是当用户单击“是”按钮并插入数据并应调用 onCreate() 时调用的函数，但是当我单击“是”不知道时它会崩溃。

```
public void createTable() {
    DatabaseOpenHelper dbhelper=new DatabaseOpenHelper(getBaseContext());
    dbhelper.getWritableDatabase();
    dbhelper.insert(pass);
    String a=dbhelper.readme();
    TextView reads=(TextView)findViewById(R.id.textView2);
    reads.setText(a);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:48:49.673

put ui updation inside handler or asynctask

mHandler.post(new Runnable()

{ @Override public void run() { reads.setText(a);

} });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:21:54.343

在您的“createTable”方法中，您没有设置您在插入中使用的“数据库”变量，因此它为空。检查您的堆栈跟踪并查看错误是否在 insert() 方法中。

在 createTable() 更改：

```
dbhelper.getWritableDatabase(); 
```

至

```
dbhelper.open(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:22:01.327

所以你有我认为两个问题。第一个问题是**rawQuery()**方法。看

```
db.rawQuery("SELECT"+SPEECH_TEXT+"FROM"+TABLE_SPEECH, null); 
```

在这里，您在保留字之间缺少空格。你的输出现在是这样的：

```
selecttextfromtable 
```

听起来不太好，不是吗？解决方案是在单词之间添加空格，它应该可以工作。

```
String query = "SELECT " + SPEECH_TEXT + " FROM " + TABLE_SPEECH;
db.rawQuery(query, null); 
```

其次是您可能将分配给的 Context 传递给`NULL`：

```
DatabaseOpenHelper dbhelper = new DatabaseOpenHelper(getBaseContext()); 
```

**将 getBaseContext()**更改为

```
new DatabaseOpenHelper(YourActivity.this); 
```

# svn - SVNSERVE - 所有存储库都必须在同一个父文件夹中吗？

> ID：15644445
> 
> 赞同：0
> 
> 时间：2013-03-26T18:12:59.393
> 
> 标签：svn, repository-design, svnserve

这是我的情况：

我继承了一个带有小硬盘和没有指定名称的存储库的 SVN 服务器（仅在 Win 2008 R2 上使用 svnserve）。它的路径是`C:\svn\repos`。如果可能的话，我宁愿不对其进行任何更改，并且该磁盘适合该项目。

另一组想要在此服务器上创建一个新的存储库。我正在添加一个新硬盘。我可以直接去 D:，创建一个名为`D:\svn\repos\Project2`,的文件夹`cd\svn\repos\Project2`，然后使用该`svnadmin create`命令创建他们的新存储库吗？

如果这很重要，我们使用 TortoiseSVN 作为客户端...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:20:53.323

这取决于。

如果您使用该`-r`参数运行 svnserve，那么 svnserve 将只提供由该参数指定的目录的直接子目录的存储库。

如果您不使用该`-r`参数，那么您可以将存储库放置在任何位置，因为您必须指定服务器上存储库的完整路径。

有关可以调用 svnserve 的各种方式的文档，请参阅[手册。](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.serverconfig.svnserve)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T08:04:35.477

使用可以为 svnserve 实例的 repos 使用一个根路径。但是您可以尝试使用`symlink`来自 svn repo root 的虚拟路径，链接到多个路径

尝试`MKLINK`

[https://technet.microsoft.com/en-us/library/cc753194%28WS.10%29.aspx](https://technet.microsoft.com/en-us/library/cc753194%28WS.10%29.aspx)

# wcf - 在 WCF 服务中使用 ServiceKnownType 时，在 SoapUI 中将多态类型作为参数传递

> ID：15644446
> 
> 赞同：4
> 
> 时间：2013-03-26T18:12:59.357
> 
> 标签：wcf, soapui, datacontract, serviceknowntype

我有 WCF 服务；该服务有一个接收类型参数的操作`Request`。这只是基本类型，在调用操作时，我们实际上发送了一个类型的值`Request_V1`（它继承自`Request`），它具有我要发送的请求的完整实现。

尝试使用soapUI 测试服务时，我能够创建复杂类型的类型`Request_V1`（添加正确的命名空间），但由于某种原因，服务接收到的值就好像它是`Request`类型一样。

阅读关于`ServiceKnowType`，我发现在[这里](https://stackoverflow.com/questions/2758062/understanding-serviceknowntype-in-wcf)我需要在客户端以某种方式明确指定这种继承关系，但我还没有找到任何关于如何在soapUI上做到这一点的信息

有没有人经历过并解决过同样的问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-15T19:16:03.700

您还必须在 SOAP 消息中指定类型。例如

> ```
> <Request i:type="d:RequestV1"> 
> ```
> 
> ...

其中 i 被定义为 XML-Instance 命名空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T15:54:36.977

在服务方面，您需要将类型转换为特定的派生类型。

```
operation (Request request){
    if(!(request is Request_V1)){
        throw Excetion("Unknown type!");
    }

    var request_v1 = Request as Request_V1;

    // use request_v1
} 
```

在 SOAP UI 端，指定类型如下：

```
<soapenv:Body xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <ns1:OperationName>
     <ns1:request i:type="ns2:Request_V1"> 
```

在引用它们之前，请确保您已经定义了 ns1 和 ns2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:52:20.073

您没有在客户端中指定继承，而是在服务中指定。SOAPUI 应该没有问题。检查您的数据合同声明是否正确。这可能会有所帮助 -[反序列化抽象类](https://stackoverflow.com/questions/634040/deserialize-abstract-class/634191#634191)。

# sql - ORA-00979: 不是 GROUP BY 表达式错误

> ID：15644450
> 
> 赞同：1
> 
> 时间：2013-03-26T18:13:14.413
> 
> 标签：sql, oracle10g

我不明白我得到的错误！

我的问题是我必须显示员工的姓名和他们参加的会议的数量。如果员工没有直接在任何会议上工作，则必须为该员工显示 0。与此查询关联的表是：

Employee_C 表：

```
 EID  NAME   SALARY          MID
---    -------------------- -----
e01   Wilson    53000
e02   Smith      48000       e01
e03   Jones      38000       e01
e04   Loftus     41000
e05   Fox        54000       e04
e06   Smith      45000       e04
e07   Green     48000
e08   Fox         49000      e04
e09   Wolf       41000       e04
e10   Wang        32000      e01
e11   Phillips   33000       e07
e12   Liu         27000      e07 
```

Deals_C 表：

```
EID CONFID
---    ------
e02   c00001
e03   c00001
e05   c00001
e06   c00001
e03   c00002
e08   c00002
e09   c00002
e10   c00002
e03   c00003
e05   c00003
e06   c00004
e08   c00005
e09   c00005
e10   c00005
e06   c00005
e11   c00006
e12   c00006
e05   c00007
e06   c00007
e08   c00007
e09   c00008
e10   c00008
e11   c00008
e02   c00009
e12   c00009
e10   c00010
e02   c00011
e03   c00011
e05   c00011
e12   c00012
e06   c00012 
```

我拥有的sql语句是

```
 select E.Name, D.ConfID as "Number of Conferences" 
     from Employee_C E  left outer join Deals_C D on E.eid = D.eid group by E.eid; 
```

错误：

选择 E.Name、D.ConfID 作为“会议数量” * 第 1 行出错：ORA-00979：不是 GROUP BY 表达式

请帮忙！谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:16:04.887

您缺少聚合函数，并且您`GROUP BY`在不在`SELECT`列表中的列上使用 a。`GROUP BY E.Name`由于该列在选择中，因此您需要：

```
select E.Name, count(D.ConfID) as "Number of Conferences" 
from Employee_C E  
left outer join Deals_C D 
  on E.eid = D.eid 
group by E.Name; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/1a5ae/8)

# css - 无法访问服务器上的字体（在控制台中出现 404 错误）

> ID：15644452
> 
> 赞同：0
> 
> 时间：2013-03-26T18:13:27.297
> 
> 标签：css, wordpress, fonts, webfonts

所以我下载了一种名为“Alef”的新字体。它是希伯来语的，但这无关紧要，因为我无法激活它。我很确定我在做一些非常愚蠢的事情，但我已经尝试了几个小时来应用它但无济于事。

我得到了什么：

8个文件：

4 x 正常 eot、svg、ttf、woff

4 x 粗体 eot、svg、ttf、woff

还有一个名为 stylesheet.css 的样式表文件，现在包含以下代码：

```
@font-face {
font-family: 'Alef';
src: url("/wp-content/themes/duet/Alef-bold.eot");
src: url("/wp-content/themes/duet/Alef-bold.eot?#iefix") format('embedded-opentype'),
     url("/wp-content/themes/duet/Alef-bold.woff") format('woff'),
     url("/wp-content/themes/duet/Alef-bold.ttf") format('truetype'),
     url("/wp-content/themes/duet/Alef-bold.svg#alefbold") format('svg');
font-weight: bold;
font-style: normal;

}
@font-face {
font-family: 'Alef';
src: url("/wp-content/themes/duet/Alef-regular.eot");
src: url("/wp-content/themes/duet/Alef-regular.eot?#iefix") format('embedded-opentype'),
     url("/wp-content/themes/duet/Alef-regular.woff") format('woff'),
     url("/wp-content/themes/duet/Alef-regular.ttf") format('truetype'),
     url("/wp-content/themes/duet/Alef-regular.svg#alefregular") format('svg');
    font-weight: normal;
    font-style: normal; 
```

我已将所有文件上传到我的主题目录：/wp-content/themes/duet/

我的主要 CSS 文件名为 style.css，它也在同一个目录中，我在文件中添加了以下代码：

```
@font-face{
font-family: 'Alef';
src: url('Alef.eot');
src: url('Alef.eot?#iefix')
   format('embedded-opentype'),
   url('Alef.woff') format('woff'),
   url('Alef.ttf') format('truetype'),
   url('Alef.svg#webfont') format('svg');
} 
```

然后我所做的就是将此行添加到我的 header.php 中：

```
 <link rel="stylesheet" href="/wp-content/themes/duet/stylesheet.css" type="text/css" charset="utf-8" /> 
```

当然，我设置了我的 p {font-family: Alef;)

我究竟做错了什么？Chrome 控制台中的文件出现 404 错误。不过，它在错误控制台的右侧显示了正确的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:48:19.110

我几乎痴迷地使用这个工具。节省了我像这个一样解决错误的时间。

[http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

有史以来最好的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:56:05.757

两个主要问题：

*   您正在引用 12 个不同的文件，但您只有 8 个（Alef.eot 等；Alef-regular.eot 等；Alef-bold.eot 等）
*   我认为您的每个声明的 2 个“src”声明都把事情搞砸了。只能是 url 用逗号分隔的一个。

这是我要做的：

*   删除 style.css 中的 font-face 声明。将 font-face 声明移出 stylesheet.css 并移入 style.css。
*   只使用一个所有 url 用逗号分隔的 'src' 声明。

这是我将使用的代码：（您的文件路径已替换）：

```
`@font-face {
    font-family: 'Alef';
    src: url('/wp-content/themes/duet/Alef-regular.eot?#iefix') format('embedded-opentype'),
    url('/wp-content/themes/duet/Alef-regular.woff') format('woff'),
    url('/wp-content/themes/duet/Alef-regular.ttf') format('truetype'),
    url('/wp-content/themes/duet/Alef-regular.svg#Alef') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

补充：当然，这里是粗体版...

```
`@font-face {
    font-family: 'Alef';
    src: url('/wp-content/themes/duet/Alef-bold.eot?#iefix') format('embedded-opentype'),
    url('/wp-content/themes/duet/Alef-bold.woff') format('woff'),
    url('/wp-content/themes/duet/Alef-bold.ttf') format('truetype'),
    url('/wp-content/themes/duet/Alef-bold.svg#Alef') format('svg');
    font-weight: bold;
    font-style: normal;
} 
```

# php - 顺序或多次调用时PHP存储过程错误

> ID：15644453
> 
> 赞同：1
> 
> 时间：2013-03-26T18:13:28.037
> 
> 标签：php, mysql, database, stored-procedures

我在 php 中有两个使用存储过程的菜单。我们将其命名为 Menu1 和 Menu2。此代码为 Menu1：这也是 Menu 2 的代码。

```
<?php

$sql=$mysqli->query("call selectproducts()");
$i=1;
while($row=mysqli_fetch_array($sql)){
$id=$row['prodid'];
$date=$row['prodname'];
$item=$row['proddescription'];
$qtyleft=$row['prodsupplier'];
$qty_sold=$row['proddate'];
$price=$row['prodprice'];
$sales=$row['prodquantity'];

if($i%2){
?>
<tr id="<?php echo $id; ?>" class="edit_tr">
<?php } else { ?>
<tr id="<?php echo $id; ?>" bgcolor="#f2f2f2" class="edit_tr">
<?php } ?>
<td class="edit_td">
<span class="text"><?php echo $date; ?></span> 
</td>
<td>
<span class="text"><?php echo $item; ?></span> 
</td>
<td>
<span class="text"><?php echo $qtyleft; ?></span>
</td>
<td>

<span id="last_<?php echo $id; ?>" class="text">
<?php

echo $qty_sold;
?>
</span> 
<input type="text" value="<?php echo $rtrt; ?>"  class="editbox" id="last_input_<?php   echo $id; ?>"/>
</td>
<td>
<span id="first_<?php echo $id; ?>" class="text"><?php echo $price; ?></span>
<input type="text" value="<?php echo $price; ?>" class="editbox" id="first_input_<?php echo $id; ?>" />
</td>
<td>

<span class="text"><?php echo $dailysales; ?>
<?php
echo $sales;
?>
</span> 
</td>
</tr>

<?php
$i++;
}
?> 
```

我的问题是当我调用存储过程时`Menu1`它可以工作，但`Menu2`它有错误。

根据我的研究，此代码可能有错误，因为我按顺序调用存储过程。

如何修改此代码以便能够第二次调用存储过程？我真的对这个感到困惑。似乎我需要在第一次执行后关闭存储过程，然后才能再次调用存储过程。我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:27:35.527

我猜您遇到了“不同步”错误？

您需要通过在结果集上调用 close() 来释放资源，然后才能在同一连接上再次调用数据库。由于您命名了结果变量`$sql`，因此您需要进行调用`$sql->close()`。

例如：

```
<?php
if( $result = $mysqli->query( "call selectproducts()" ) ) {
    $i = 1;
    while( $row=mysqli_fetch_array( $result ) ) {
        $id=$row[ 'prodid' ];
        $date=$row[ 'prodname' ];
        $item=$row[ 'proddescription' ];
        $qtyleft=$row[ 'prodsupplier' ];
        $qty_sold=$row[ 'proddate' ];
        $price=$row[ 'prodprice' ];
        $sales=$row[ 'prodquantity' ];

        if( $i % 2 ) {
?>
            <tr id="<?php echo $id; ?>" class="edit_tr">
<?php
        } else {
?>
            <tr id="<?php echo $id; ?>" bgcolor="#f2f2f2" class="edit_tr">
<?php
        }
?>
                <td class="edit_td"><span class="text"><?php echo $date; ?></span></td>
                <td><span class="text"><?php echo $item; ?></span></td>
                <td><span class="text"><?php echo $qtyleft; ?></span></td>
                <td>
                    <span id="last_<?php echo $id; ?>" class="text">
                        <?php echo $qty_sold; ?>
                    </span> 
                    <input type="text" value="<?php echo $rtrt; ?>"  class="editbox" id="last_input_<?php   echo $id; ?>"/>
                </td>
                <td>
                    <span id="first_<?php echo $id; ?>" class="text"><?php echo $price; ?></span>
                    <input type="text" value="<?php echo $price; ?>" class="editbox" id="first_input_<?php echo $id; ?>" />
                </td>
                <td>
                    <span class="text"><?php echo $dailysales; ?><?php echo $sales; ?></span>
                </td>
            </tr>
    <?php
    $i++;
    }

    $result->close();
}
    ?> 
```

# ios - 尝试使用 AVPlayer 播放媒体时，iOS 上的 NSError 错误代码 -11819

> ID：15644457
> 
> 赞同：0
> 
> 时间：2013-03-26T18:13:32.203
> 
> 标签：ios, avplayer

尝试使用 AVPlayer 播放媒体 url 时，我收到 AVPlayerStatusFailed 错误代码 -11819。请指教。

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change: (NSDictionary *)change context:(void *)context
{
  if (context == &AVPlayerItemStatusContext) {
    AVPlayerItem *playerItem = (AVPlayerItem *)object;
    NSInteger status = [playerItem status];
    switch (status) {
        case AVPlayerStatusFailed:
        {
            NSError *error = [playerItem error];
            NSLog(@"%s %d\n", __FUNCTION__, [error code]);
            .....
        }
  .... 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:08:01.197

我在 AVError.h 中发现 AVFoundation 错误代码 -11819 对应于 AVErrorMediaServicesWereReset（“无法完成操作，因为媒体服务变得不可用”）。

# templates - 使用 Wijmo 淘汰模板

> ID：15644464
> 
> 赞同：0
> 
> 时间：2013-03-26T18:13:40.030
> 
> 标签：templates, knockout.js, wijmo

我正在尝试使用 Knockout 将选项卡动态添加到 Wijmo 选项卡，但在应用绑定后出现异常

```
addSingleExecution: (execution) ->
      tabName =  "#tabs-#{@tabCounter}"
      tabs  = $(@targetDomElement).wijtabs(
        tabTemplate: '<li><a href="#{href}">#{label}</a> <span class="ui-icon ui-icon-close">Remove Tab</span></li>'
        add: (event,ui) ->
          $(ui.panel).append('<div data-bind="template: { name: singleExecutionTemplate }"/>')
          $(ui.tab).siblings('span.ui-icon-close').on('click', null,self, (event)->
            index = $('li', tabs).index($(this).parent());
            tabs.wijtabs('remove', index);
          )
      )

      tabs.wijtabs('add',tabName,moment(execution.date()).format('DD MMM YYYY'))
      ko.applyBindings(execution,$(tabName)[0])
      @tabCounter++ 
```

更准确地说，我得到的异常是在淘汰赛 2.2.1 调试的第 3008 行：

```
Uncaught TypeError: Cannot read property 'length' of null 
 // Loosely check result is an array of DOM nodes
        if ((typeof renderedNodesArray.length != "number") || (renderedNodesArray.length > 0 && typeof renderedNodesArray[0].nodeType != "number"))
Uncaught TypeError: Cannot read property 'length' of null
            throw new Error("Template engine must return an array of DOM nodes"); 
```

这是我的模板

```
<script type="text/html" id="singleExecutionTemplate">
    <div>
        <ul>
            <li>
                <h1>Step 1</h1>
                Setup input data
            </li>
            <li>
                <h1>Step 2</h1>
                This is the second step.
            </li>
            <li>
                <h1>Step 3</h1>
                Analyse result and record
            </li>
        </ul>
        <div>
            Setup
        </div>
        <div>
            Run
        </div>
        <div>
            Analyse
        </div>
    </div>
</script> 
```

为什么没有正确渲染？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T14:03:36.667

我在 ASP.Net MVC 中切换到使用 Razor 模板时遇到了这个问题。标记的差异是微妙的，如果没有 Edmondo1984 给出的答案，我永远不会发现我的错误。

是的，这必须是一个字符串属性。使用 Razor，我不得不改变我的样子：

```
<div data-bind="template: { name: '@Model.TemplateName' }"></div> 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:38:16.983

问题来自以下行：

```
 $(ui.panel).append('<div data-bind="template: { name: singleExecutionTemplate }"/>') 
```

模板名称应该是一个字符串属性：

```
$(ui.panel).append('<div data-bind="template: { name: 'singleExecutionTemplate' }"/>') 
```

正常工作

# c - 文本文件编辑 C

> ID：15644468
> 
> 赞同：0
> 
> 时间：2013-03-26T18:14:03.100
> 
> 标签：c, file, edit

我有一个程序，它接受用户提供的数据（整数、浮点数和字符串）并将其写入文本文件。现在我必须更新部分写入的数据。

例如：

在文件的第 4 行，我想更改前 2 个单词（有 an`int`和 a `float`）。我怎样才能做到这一点？

有了我发现的信息，`fseek()`可以`fputs()`使用，但我不知道如何到达特定线路。

（解释代码将不胜感激，因为我是 C 语言的初学者）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:20:17.503

您不能在文件中“插入”字符。您将必须创建程序，该程序将读取整个文件，然后在插入新文件之前复制部分，您的版本，文件的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:17:46.367

您确实需要阅读所有文件，并忽略不需要的内容。

`fseek`并不是很有用：它将文件定位在某个字节偏移量（相对于文件的开头或结尾）并且不知道行边界。

实际上，文件中的行是一个定义不明确的概念。通常，一行是由换行符 ( ) 结束的字节序列（不同于换行符`'\n'`）。某些操作系统（Windows、MacOSX）以特殊方式读取文本文件（例如，真实文件包含`\r\n`以结束每一行，但 C 库给您的错觉是您已阅读`\n`）。

在实践中，您可能特别想（或可能）使用[行输入例程](http://www.gnu.org/software/libc/manual/html_node/Line-Input.html)。`getline``fgets`

^(如果你使用`getline`你应该关心`free`-ing 行缓冲区。)

如果您的文本文件具有非常规则的结构，您可能会`fscanf`在不关心行边界的情况下获取数据（忽略需要跳过的内容）。

如果您想绝对使用`fseek`（这是一个错误），则必须读取该文件两次：第一次记住每行的开始（或结束）位置，第二次记住`fseek`该行的开头。不过，这对更新不起作用，因为您不能在文件中间插入字节。

而在实践中，最昂贵的操作是实际的磁盘读取。缓冲（部分由内核和`<stdio.h>`函数完成，部分由您在处理行时完成）可以忽略不计。

当然，您不能更改文件中的某些行。如果您需要这样做，请处理输入文件，生成一些输出文件（包含修改后的输入）并在完成后重命名。

顺便说一句，您可能对[GDBM](http://www.gnu.org.ua/software/gdbm/)等索引文件感兴趣......甚至对[SqlLite](http://www.sqlite.org/)、[MariaDb](https://mariadb.org/)、[mongodb](http://www.mongodb.org/)等数据库感兴趣......并且您可能对[JSON](http://json.org)或[YAML](http://yaml.org/)等标准文本序列化格式感兴趣（两者都有很多库，即使对于 C 来说，也要处理它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:20:22.770

`fseek()`用于每个数据记录具有相同大小的随机访问文件。通常数据是二进制的，而不是文本的。

要解决您的特定问题，您需要一次阅读一行以找到要更改的行。进行更改的一个简单解决方案是将这些行写入临时文件，将更改写入同一个临时文件，然后跳过原始文件中要更改的部分并将重置复制到临时文件。最后关闭原文件，将临时文件复制到其中，删除临时文件。

话虽如此，我建议您了解有关随机访问文件的更多信息。这些在存储所有相同大小的记录时非常有用。如果您可以控制创建原始文件，这些可能更适合您当前的目的。

# c++ - 如何通过 InvokeHelper 传递 HWND 以调用 .NET COM 对象？

> ID：15644474
> 
> 赞同：1
> 
> 时间：2013-03-26T18:14:21.553
> 
> 标签：c++, .net, com, marshalling, ole

## 更新

我为原始问题（我在下面移动）做了一个测试项目。C#代码：

```
namespace TestManagedCom
{
   [ComVisible(true)]
   public class DummyObject
   {
      public void Method1(int value)
      {
         IntPtr hwnd = new IntPtr(value);
         MessageBox.Show(string.Format("[Method1] value={0:X}, hwnd={1}", value, hwnd));
      }

      public void Method2(long value)
      {
         IntPtr hwnd = new IntPtr(value);
         MessageBox.Show(string.Format("[Method2] value={0:X}, hwnd={1}", value, hwnd));
      }
   }
} 
```

C++ 代码：

```
class CDispatchWrapper : public COleDispatchDriver
{
public:
   CDispatchWrapper(){}
   CDispatchWrapper(LPDISPATCH pDispatch) : COleDispatchDriver(pDispatch) {}
   CDispatchWrapper(const CDispatchWrapper& dispatchSrc) : COleDispatchDriver(dispatchSrc) {}

   void CallMethod(DISPID dwDispID, int value)
   {
      static BYTE parms[] = VTS_I4;
      InvokeHelper(dwDispID, DISPATCH_METHOD, VT_EMPTY, NULL, parms, value);
   }

   void CallMethod(DISPID dwDispID, long long value)
   {
      static BYTE parms[] = VTS_I8;
      InvokeHelper(dwDispID, DISPATCH_METHOD, VT_EMPTY, NULL, parms, value);
   };
};

template <typename T>
void Execute(const CString& progId, const CString& methodName, T value)
{
   LPDISPATCH lpEventComponent = NULL;

   _com_ptr_t<_com_IIID<IDispatch, &IID_IDispatch> > pCreateComp;
   HRESULT hr = pCreateComp.CreateInstance(progId);
   if(SUCCEEDED(hr) && pCreateComp != NULL)
   {
      hr = pCreateComp.QueryInterface(IID_IDispatch, (void**)&lpEventComponent);

      if(SUCCEEDED(hr))
      {
         USES_CONVERSION;

         DISPID dwFunctionID = 0;
         OLECHAR FAR *szFunc = T2OLE(const_cast<LPTSTR>(methodName.GetString()));

         hr = lpEventComponent->GetIDsOfNames(IID_NULL, &szFunc, 1, LOCALE_SYSTEM_DEFAULT, &dwFunctionID);

         if(SUCCEEDED(hr) && dwFunctionID != -1)
         {
            lpEventComponent->AddRef(); // released by the dispatch driver

            CDispatchWrapper wrapper(lpEventComponent);
            wrapper.CallMethod(dwFunctionID, value);
         }
      }
   }
}

Execute<int>(_T("TestManagedCom.DummyObject"), _T("Method1"), 0x11223344);
Execute<long long>(_T("TestManagedCom.DummyObject"), _T("Method2"), 0x1122334455667788LL); 
```

当目标是 x64 时效果很好。它打印：

> [方法1] value=11223344, hwnd=287454020
> 
> 【方法二】value=1122334455667788，hwnd=1234605616436508552

`Method2`当目标是 x86 时，调用会引发异常。

> TestOleDispatcher.exe 中 0x76A2B727 处的第一次机会异常：Microsoft C++ 异常：内存位置 0x003FE3C4 处的 EEException。
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

我都试过了`long long`，`__int64`而且错误显然是一样的。

似乎它无法`VTS_I8`在 x86 上正确编组参数。

## 原来的问题

我在一些遗留代码调用 .NET 类中的一个方法时遇到问题，该类表示一个带有 .NET 的 COM 对象`COleDispatchDriver::InvokeHelper`。其中一个参数是窗口的句柄。

.NET 代码过去看起来像这样（简化）：

```
[ComVisible(true)]
public class Sample
{
   public void Method1(int hwndParent)
   {
   }
} 
```

和 C++ 代码

```
class CSendEventWrapper : public COleDispatchDriver
{
public:
   void CallMethod(DISPID dwDispID, long* hwnd)
   {
      static BYTE parms[] = VTS_PI4;
      InvokeHelper(dwDispID, DISPATCH_METHOD, VT_EMPTY, NULL, parms, hwnd);
   }
};

HWND hWnd = ...;
long lval = (long)hWnd;
o.CallMethod(dispId, &lval); // snippet for calling the method 
```

当 C++ 应用程序只有 32 位时，这工作正常。但是在 64 位版本上，这是不正确的，因为`HWND`是 64 位并且`long`只是 32 位，所以您会丢失数据。

所以我开始改变 .NET 代码来使用`IntPtr`而不是`int`（因为它本来应该放在首位）。

```
[ComVisible(true)]
public class Sample
{
   public void Method1(IntPtr hwndParent)
   {
   }
} 
```

但现在的问题是我如何用`InvokeHelper`. 我试着做这样的事情：

```
void CallMethod(DISPID dwDispID, INT_PTR hwnd)
{
#ifdef _WIN64
   static BYTE parms[] = VTS_PI8;
#else
   static BYTE parms[] = VTS_PI4;
#endif
   InvokeHelper(dwDispID, DISPATCH_METHOD, VT_EMPTY, NULL, parms, hwnd);
}

HWND hWnd = ...;
INT_PTR lval = (INT_PTR)hWnd; // 32- or 64-bit depending on the platform
o.CallMethod(dispId, &lval); // snippet for calling the method 
```

但是，现在这会导致异常，指出参数格式不正确。`IntPtr`应该是 32 位还是 64 位，具体取决于进程是 32 位还是 64 位。我不确定出了什么问题。

`InvokeHelper`对于确定如何正确通过32 位和 64 位版本的 HWND 的任何帮助，我们将不胜感激。（不，我不能代替使用`COleDispatchDriver`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:56:09.590

看起来您的参数类型不匹配。从 c# 获取句柄通常会在 IntPtr 中为您提供窗口句柄。这将是实际的句柄，而不是指向句柄的指针。从您的代码看来，您需要一个指针来处理。我可以通过 long* hWnd 和 VTS_PI4 来判断。

如果 COM 调用确实需要一个 INT_PTR（指向句柄的指针），则必须存储传入的变量并获取它的地址以传递。如果它直接使用窗口句柄，那么您需要将 VTS_PI4/VTS_PI8 修改为 VTS_I4/VTS_I8。

# postgresql - 在 PostgreSQL 中导入期间的重复密钥

> ID：15644475
> 
> 赞同：0
> 
> 时间：2013-03-26T18:14:27.360
> 
> 标签：postgresql, postgresql-9.1, psql

我正在关注一本 PostgreSQL 书，并且必须将 CSV 文件导入到表中`census.lu_tracts`。

**问题：**执行`INSERT`如下所示的查询时，出现错误：

```
ERROR:  duplicate key value violates unique constraint "pk_lu_tracts"
DETAIL:  Key (tract_id)=(25001010800) already exists. 
```

密钥是如何重复的？`SELECT * from lu_tracs`显示 0 行。

```
CREATE SCHEMA census;
set search_path=census;
CREATE TABLE lu_tracts(tract_id varchar(11), tract_long_id varchar(25)
, tract_name varchar(150)
, CONSTRAINT pk_lu_tracts PRIMARY KEY (tract_id));

INSERT INTO lu_tracts( tract_id, tract_long_id, tract_name)
SELECT geo_id2, geo_id, geo_display
FROM staging.factfinder_import
WHERE geo_id2 ~ '^[0-9]+'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T11:04:18.357

正确的答案是`DISTINCT ON (geo_id2)`每个 geo_id2 只选择一行（更多在[手册](http://www.postgresql.org/docs/current/static/sql-select.html#SQL-DISTINCT)中），它应该伴随一个 ORDER BY 子句，它将指定将选择哪一行。

# macos - 无法在mac上打印mpdf生成的pdf文件

> ID：15644477
> 
> 赞同：0
> 
> 时间：2013-03-26T18:14:36.597
> 
> 标签：macos, pdf, printing, preview, acrobat

这真的很奇怪。我使用 mpdf 生成 pdf。我打印pdf没有问题。但是突然出现了这个问题。不确定这与更改我的代码或更新我的操作系统或无线打印机打印机有关。

**系统------------应用程序--------结果**
OS X 10.8.2---------预览---------可以' t 打印
OS X 10.8.2---------Acrobat----------可以打印
OS X 10.7.x----------Reader-- -----无法打印
Windows XP-----Reader/Dont know----可以打印
OS X 10.XX---------Preview------无法打印

一些信息：我们之前能够打印 pdf。任何操作系统/人都没有任何抱怨。我正在处理一些 sql 查询更改。但我撤消了我的东西。还是行不通。

所以当有人尝试使用“预览”打印时它会说什么 - 在我的 macbook pro 上它说（打印 - 连接到打印。并保持这种状态） - 可能在其他 Mac 上它也显示像发生了一些事情......但没有任何反应。仅供参考，我们没有得到任何确认，例如……打印完成……就像打印……和打印一样。

有一个应用程序 PDFRepair。并在使用此应用程序修复后。我可以打印我的pdf。但问题是它不是免费软件，质量也不好。

也许它是损坏/损坏的内容问题。

目标：目标是使用“预览”打印我们的 pdf 文件

任何形式的帮助或建议都将受到高度赞赏。

![我的pdf截图](../Images/7856c3cd00ead0349c4e1e23597a8f81.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:17:50.763

终于解决了。这与 mPDF CMap 资源有关。但它只发生在 mPDF 旧版本上。就我而言，它是 mPDF 5.0 Beta。

**使用 mPDF 最新版本将解决这个问题**。现在我可以从任何操作系统和任何应用程序打印我导出的 pdf。干杯

# python - Python：如何在使用 argparse 的子解析器中拥有互斥组？

> ID：15644480
> 
> 赞同：2
> 
> 时间：2013-03-26T18:15:02.447
> 
> 标签：python, python-2.7, argparse, mutual-exclusion

我正在编写一个程序，例如：

```
import argparse

def task1(args):
    print "running task 1"

def task2(args):
    print "running task 2"

if __name__=="__main__":
    parser=argparse.ArgumentParser(description="How can I have mutually exclusive groups in subparsers?")
    subparsers=parser.add_subparsers()
    t1sub=subparsers.add_parser("task1")
    #....
    t1sub.set_defaults(func=task1)
    # here I would like to have a mutually exclusive group
    # when task 1 of the option one between --in and --out is required, but one excludes the other
    # apparently a subparser has no add_group() not add_mutually_exclusive_group(), though
    t2sub=subparsers.add_parser("task2")
    #....
    t1sub.set_defaults(func=task2)

    args = parser.parse_args()

    args.func(args) 
```

正如我在运行 task1 时所解释的那样，两者之间`--in`是`--out`必需的，但不是两者兼而有之。如何将此功能添加到我的程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:18:55.987

子解析器支持普通解析器支持的所有方法，包括`add_mutually_exclusive_group()`：

```
>>> megroup = t1sub.add_mutually_exclusive_group()
>>> megroup.add_argument('--in', action='store_true')
_StoreTrueAction(option_strings=['--in'], dest='in', nargs=0, const=True, default=False, type=None, choices=None, help=None, metavar=None)
>>> megroup.add_argument('--out', action='store_true')
_StoreTrueAction(option_strings=['--out'], dest='out', nargs=0, const=True, default=False, type=None, choices=None, help=None, metavar=None)
>>> parser.parse_args(['task1', '--in'])
Namespace(func=<function task1 at 0x10a0d9050>, in=True, out=False)
>>> t1sub.print_help()
usage:  task1 [-h] [--in | --out]

optional arguments:
  -h, --help  show this help message and exit
  --in
  --out
>>> parser.print_help()
usage: [-h] {task1,task2} ...

How can I have mutually exclusive groups in subparsers?

positional arguments:
  {task1,task2}

optional arguments:
  -h, --help     show this help message and exit 
```

# php - 将 id 从 HTML 电子邮件传递到登录页面，然后使用它来填充 SQL 查询

> ID：15644483
> 
> 赞同：2
> 
> 时间：2013-03-26T18:15:11.520
> 
> 标签：php, sql, pdo, html-email

我有，比如说 5 个电子邮件线程（a、b、c、d、e），每封电子邮件都是不同的。每封电子邮件都包含一个指向登录页面的链接。

然后我有一个 php 登录页面线框，它从 SQL 数据库（当前是 mysql，但可能会使用 PDO 进行更改）来填充不同的内容，具体取决于查看器来自哪个电子邮件线程。所以 1 个 php 登陆页面，但数据库中有 5 行来填充该登陆页面的 5 个不同版本，具体取决于哪个电子邮件查看器链接。

我的着陆页中的当前查询如下所示：

```
<?php
       $result = "SELECT body_copy FROM low_engagement WHERE thread_segment = 'a3'";
       $stmt = $connection->prepare($result);
       $stmt->execute();
       $body_copy = "";
       while($row = $stmt->fetch()) {
       $bodyCopy = $row['body_copy'];
       }
?> 
```

如果我在“a1”、“a2”、“a3”、“a4”和“a5”的值之间手动更改名为**thread_segment的****WHERE**子句，我的登录页面会根据 5 个线程中的每一个更新相应的内容。

 **我的问题是，是否有可能在 HTML 电子邮件中标记 href，因此当该链接链接到登录页面时，它可能会如何与登录页面进行交互，告诉它它来自 5 个电子邮件/电子邮件链接中的哪一个并动态更改thread_segment 值合适吗？

我对 PHP/PDO 相当陌生，所以我愿意接受建议和/或方向。我目前对此事的研究让我仍在研究可能通过几种方式之一传递变量，但我发现的大部分内容都是关于表单的。

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:20:21.850

是的，只需在电子邮件的 href 中传递 thread_segment，例如： some.url.com/page.php?s=a3 并将您的 pdo 更改为：

```
<?php
   $result = "SELECT body_copy FROM low_engagement WHERE thread_segment = :s";
   $stmt = $connection->prepare($result);
   $stmt->bind_param(':s', $_GET['s']);
   $stmt->execute();
   $body_copy = "";
   while($row = $stmt->fetch()) {
       $bodyCopy = $row['body_copy'];
   }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:28:46.023

您可以使用 HTTP GET 变量通过 URL 传递信息。

例如链接：http: [//yourlink.org ?segment=a1](http://yourlink.org?segment=a1)

与value`?segment=a1`关联，您可以通过分隔添加更多参数，如下所示：`segment``a1``&``?segment=a1&language=en`

我在这里对变量名称非常明确，通常您会尝试使 url 尽可能短。

然后，您可以使用以下方法在 PHP 中访问此变量`$_GET`：

```
$_GET["segment"] 
```

查看 PHP 文档以获取更多信息 [http://www.php.net/manual/en/reserved.variables.get.php](http://www.php.net/manual/en/reserved.variables.get.php)**

# ruby - 我可以包含/扩展一个模块但将所有包含/扩展的方法标记为私有吗？

> ID：15644484
> 
> 赞同：5
> 
> 时间：2013-03-26T18:15:16.807
> 
> 标签：ruby, module

说，我有一个 class`A`和一个 module `B`。我想包含/扩展`B`，`A`但将包含/扩展的方法标记为私有（因此调用者无法访问它们，`A`但可以在 的方法中访问它们`A`）。

如何包含但将所有包含的方法标记`B`为`A`私有？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:34:03.913

包含然后显式地将所有包含的方法设为私有？

```
class A
  include B
  private *B.instance_methods
  extend B
  class << self
    private *B.instance_methods
  end
end 
```

您可以猴子补丁`Module`添加`private_include`和`private_extend`：

```
class Module
  def private_include *modules
    class_eval do
      self.send(:include, *modules)
      modules.each do |mod|
        self.send(:private, *mod.instance_methods)
      end
    end
  end

  def private_extend *modules
    singleton = class << self; self end
    singleton.instance_eval do
      self.send(:include, *modules)
      modules.each do |mod|
        self.send(:private, *mod.instance_methods)
      end
    end
  end
end 
```

# java - 如何从数据库驱动程序调用 Web 服务？

> ID：15644486
> 
> 赞同：0
> 
> 时间：2013-03-26T18:15:29.093
> 
> 标签：java, database, web-services, odbc, dsn

我有一个 COTS（商业的、现成的）应用程序，它必须连接到某种 ODBC 连接（驱动程序并不重要）。但是，我希望通过 HTTP Post 将数据保存到 Web 服务，而不是保存到数据库。有没有办法将数据库驱动程序链接到 Web 服务？我是否坚持编写自己的数据库驱动程序？

# sql - 简单的存在与存在

> ID：15644488
> 
> 赞同：1
> 
> 时间：2013-03-26T18:15:38.627
> 
> 标签：sql, sql-server

我一生都看不到我在这里缺少什么，但有人可以向我指出为什么第一个查询没有做我想要的，但第二个工作正常吗？我知道查询并不完全相同，但它们应该返回相同的 20 行，但它们没有。（查询填充查找单个表中最常见的前 20 项）

```
 select distinct
             rx.drug_class
        from rx
        where exists
        (
            select top 20    
                     rx2.drug_class
                    ,COUNT(distinct rx2.pat_id) as counts
                    ,RANK() over(order by count(distinct pat_id) desc) as rn
                    from rx as rx2
                    --when the line below is commented out 
                    --this subquery gives the correct answer
                    where rx.drug_class = rx2.drug_class
                    group by rx2.drug_class
        ) 
```

这个工作正常

```
select distinct 
        rx.drug_class
        from rx
        where rx.drug_class in 
        (
            select top 20 rx.drug_class
                from rx
                group by rx.drug_class
                order by COUNT(distinct pat_id) desc 
        ) 
```

Exists 子查询中的 where 子句不起作用，是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:17:54.643

即使您为第一个查询分配了行号，您仍然需要`ORDER BY`此行号：

```
where rx.drug_class = rx2.drug_class
group by rx2.drug_class
order by rn 
```

另外，我假设这只是一个简化的示例，因为以下内容也可以：

```
select top 20 rx.drug_class
from rx
group by rx.drug_class
order by COUNT(distinct pat_id) desc 
```

编辑：

您`EXISTS`也将无法工作，因为您在`SELECT`执行计数之前将集合限制为内部匹配行与外部集合中的行......因此在这种情况下，该行将始终存在于`top 20`计数中。

之所以`IN`有效，是因为它是所有行的一组计数...`EXISTS`失败是因为正在对外部集合中的每一行进行计数...所以当这些计数时，外部集合中的每一行都在前 20 位仅限于外排的`drug_class`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:26:48.523

据我所知，`EXISTS`子句只返回**TRUE**或**FALSE**。因此，如果子查询中存在 20 行，则表示**TRUE**`IN` ，而不是与子句一样的过滤器。

# c - shm_open() 函数没有创建共享内存

> ID：15644489
> 
> 赞同：5
> 
> 时间：2013-03-26T18:15:42.893
> 
> 标签：c, posix

我正在尝试打开共享内存，它给了我没有这样的文件或目录错误。但是我在名称区域中有一个文件和一个目录。

```
 fd_sh = shm_open("/home/angus/c_tutorials/interview/linux_sys_pgm/mmap/region", O_CREAT | O_RDWR, S_IRUSR | S_IWUSR);
 if(fd_sh == -1){
  perror("fd_sh:ERROR");
  return -1;
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T18:22:38.127

在 Linux 中（我假设这是您的操作系统，给定您的代码），名称应该以斜杠开头，但后面不能有任何其他名称，例如`"/myshm"`- 不是常规文件名。

从手册页：

```
 The operation of shm_open() is analogous  to  that  of  open(2).   name
   specifies the shared memory object to be created or opened.  For porta‐
   ble use, a shared memory object should be identified by a name  of  the
   form  /somename;  that  is,  a null-terminated string of up to NAME_MAX
   (i.e., 255) characters consisting of an initial slash, followed by  one
   or more characters, none of which are slashes. 
```

这样做会很好。

实际上发生的是，给定的名称是作为文件创建的`/dev/shm`，因此您需要创建一个目录结构来使用路径；这不是一个好主意，因为这个目录只在内存中。

# php - 没有响应表单 ajax 和 responseText 未定义

> ID：15644490
> 
> 赞同：0
> 
> 时间：2013-03-26T18:15:50.097
> 
> 标签：php, ajax

我一直试图让 ajax 工作一整天，这是我最后的希望，我写了一个简单的测试来看看我是否得到任何响应，xhr.status 是 0 而不是 200，xhr.responseText 是未定义的。我调用了一个生成 json 对象的简单（php 文件），我的代码如下（我尝试使用 $.ajax 但它也没有帮助）：

```
$(function(){

$('#checkin').click(function(){
var ajaxRequest;
var connection  = ajaxFunction();
function ajaxFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
ajaxRequest.open("GET", "places.php", true);
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){

    alert(console.error(ajaxRequest.status));
    }
}

ajaxRequest.send(null); 
}
});

}) 
```

我的php文件如下：

```
<?php
header('Content-type: application/json');
require "SQLquery.php";

$places = new SQLquery;
$places->db_query("SELECT * FROM places");
echo json_encode($places->results);

?> 
```

任何帮助都感激不尽。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:35:56.760

这是一个使用 jQuery 的 $.ajax() 和 json 的简单实现。

Javascript：

```
function sendAjax() {

    // The data you want to pass to places.php
    var params = {
        'checkin' : true
    };

    // Construct the call
    ajax = $.ajax({
        url: '/places.php',
        type: 'GET',
        data: params,
        dataType: 'json'
    });

    // Send it and say which function you'll
    // use to handle the response
    ajax.done(sendAjaxDone);
}

// Handle the response
function sendAjaxDone(response) {
    console.log(response);
} 
```

地方.php

```
header('Content-type: application/json');
require "SQLquery.php";

if ($_GET['checkin']) {
    $places = new SQLquery;
    $places->db_query("SELECT * FROM places");
    echo json_encode($places->results);
} 
```

# ruby-on-rails-3 - 将 Angular.js FilterBy 应用于嵌套的 json 属性

> ID：15644494
> 
> 赞同：0
> 
> 时间：2013-03-26T18:16:16.450
> 
> 标签：ruby-on-rails-3, angularjs

我一直在尝试使用 angular.js 作为处理可排序和可搜索数据列表的一种方式。

使用此 RailsCast 开始[http://railscasts.com/episodes/405-angularjs](http://railscasts.com/episodes/405-angularjs)

然后通过这里的过滤器示例[http://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

当我在几分钟内运行排序和过滤的东西时，我感到很震惊。因此，我似乎有一种理想的方法来呈现表格数据，通过过滤每一列来排序和搜索......

直到我意识到过滤器似乎不适用于使用“。”寻址的 json 嵌套属性。表示法，例如我的客户都有一个所有者，我想显示他们的电子邮件地址并按此字段排序和筛选 - 我的代码的关键部分如下所示。

```
<tbody ng-repeat="client in clients | orderBy:sort_by:reverse | filter:search">
  <tr>
     <td>{{name}}</td>
     <td>{{owner.email}}</td>
  <tr>

<input ng-model="search.name">
<input ng-model="search.owner.email"> 
```

owner.email 已呈现并可排序，但不会过滤。我有一个解决方法：每个 :include 关联只允许一个属性并在关联上进行搜索，例如所有者电子邮件上的 search.owner 过滤器，因为这就是我允许进入 json 的全部内容。这感觉就像一个黑客。必须有适当的优雅方式来做到这一点。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:37:45.293

正如上面评论中提到的，您可能必须使用[自定义过滤器](http://docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters)。自定义过滤器可以根据`search.owner.email`或您想要的任何其他标准/输入进行过滤。

# php - PHP 高级 XML 添加到项目节点

> ID：15644496
> 
> 赞同：0
> 
> 时间：2013-03-26T18:16:24.220
> 
> 标签：php, xml-parsing, xml-serialization

我想在下面给定的 XML 中添加一个节点，我想在数据节点中添加一个项目，如下所示，项目 id 递增，我想使用 PHP 执行此操作

```
<?xml version="1.0" encoding="utf-8"?>
<data>
    <item id="1" order="1">
        <properties>
            <item propertyType="1"><![CDATA[images/gallery/images/bg_ph_01.jpg]]></item>
            <item propertyType="2"><![CDATA[images/gallery/thumbs/small_pic_01.jpg]]></item>
            <item propertyType="3"><![CDATA[true]]></item>
            <item propertyType="4"><![CDATA[openPopup;id=1]]></item>
        </properties>
    </item>

    <item id="2" order="2">
        <properties>
            <item propertyType="1"><![CDATA[images/gallery/images/bg_ph_02.jpg]]></item>
            <item propertyType="2"><![CDATA[images/gallery/thumbs/small_pic_02.jpg]]></item>
            <item propertyType="3"><![CDATA[false]]></item>
            <item propertyType="4"><![CDATA[]]></item>
        </properties>
    </item>

    <item id="3" order="3">
        <properties>
            <item propertyType="1"><![CDATA[images/gallery/images/bg_ph_03.jpg]]></item>
            <item propertyType="2"><![CDATA[images/gallery/thumbs/small_pic_03.jpg]]></item>
            <item propertyType="3"><![CDATA[false]]></item>
            <item propertyType="4"><![CDATA[]]></item>
        </properties>
    </item>
</data> 
```

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:26:49.807

`simplexml_insert_after`从这里获取的函数： [PHP SimpleXML：在特定位置插入节点](https://stackoverflow.com/questions/3361036/php-simplexml-insert-node-at-certain-position)

```
<?php
$xml = new SimpleXMLElement('<?xml version="1.0" encoding="utf-8"?>
<data>
    <item id="1" order="1">
        <properties>
            <item propertyType="1"><![CDATA[images/gallery/images/bg_ph_01.jpg]]></item>
            <item propertyType="2"><![CDATA[images/gallery/thumbs/small_pic_01.jpg]]></item>
            <item propertyType="3"><![CDATA[true]]></item>
            <item propertyType="4"><![CDATA[openPopup;id=1]]></item>
        </properties>
    </item>

    <item id="2" order="2">
        <properties>
            <item propertyType="1"><![CDATA[images/gallery/images/bg_ph_02.jpg]]></item>
            <item propertyType="2"><![CDATA[images/gallery/thumbs/small_pic_02.jpg]]></item>
            <item propertyType="3"><![CDATA[false]]></item>
            <item propertyType="4"><![CDATA[]]></item>
        </properties>
    </item>

    <item id="3" order="3">
        <properties>
            <item propertyType="1"><![CDATA[images/gallery/images/bg_ph_03.jpg]]></item>
            <item propertyType="2"><![CDATA[images/gallery/thumbs/small_pic_03.jpg]]></item>
            <item propertyType="3"><![CDATA[false]]></item>
            <item propertyType="4"><![CDATA[]]></item>
        </properties>
    </item>
</data>');

function simplexml_insert_after(SimpleXMLElement $insert, SimpleXMLElement $target)
{
    $target_dom = dom_import_simplexml($target);
    $insert_dom = $target_dom->ownerDocument->importNode(dom_import_simplexml($insert), true);
    if ($target_dom->nextSibling) {
        return $target_dom->parentNode->insertBefore($insert_dom, $target_dom->nextSibling);
    } else {
        return $target_dom->parentNode->appendChild($insert_dom);
    }
}

foreach($xml->xpath('/data/item') as $node) {
    $id = (int)$node['id'];
}

$next_id = $id + 1;

simplexml_insert_after(new SimpleXMLElement('<item id="'.$next_id.'" order="'.$next_id.'">
        <properties>
            <item propertyType="1"><![CDATA[images/gallery/images/bg_ph_03.jpg]]></item>
            <item propertyType="2"><![CDATA[images/gallery/thumbs/small_pic_03.jpg]]></item>
            <item propertyType="3"><![CDATA[false]]></item>
            <item propertyType="4"><![CDATA[]]></item>
        </properties>
    </item>'), $xml);

var_dump($xml->asXML()); 
```

# caching - FIFO 缓存与 LRU 缓存

> ID：15644499
> 
> 赞同：13
> 
> 时间：2013-03-26T18:16:31.807
> 
> 标签：caching, data-structures, hash, fifo

对于这么简单的问题，我真的很抱歉。我只是想确保我正确理解 FIFO 缓存模型，我希望有人能帮助我：) 如果缓存已满，LRU 缓存会删除最近最少访问的条目。如果缓存需要可用空间（例如，如果 'a' - 'v' - 'f' - 'k' 是缓存中的条目，而 'a' 是如果需要可用空间，则缓存将删除最旧的条目）。

我对吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-26T18:21:13.090

你是对的。

将 FIFO 想象为穿过隧道的汽车。第一辆进入隧道的汽车将是第一个驶出另一侧的汽车。

将 LRU 缓存视为清理车库。你会扔掉你很长一段时间没有使用的物品，并保留你经常使用的物品。该算法的演变（对简单 LRU 的改进）将丢弃长时间未使用的物品，并且如果您毕竟需要更换它们并不昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:21:12.387

是的，LRU 缓存基于最近最少使用缓存中的对象，但 FIFO 是基于对象被缓存的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:21:26.873

对，那是正确的。FIFO 意味着先进先出，即严格按照到达顺序考虑（在这种情况下删除）元素。LRU 是最近最少使用的，最长时间没有使用的缓存元素被驱逐（预感很快就不需要了）。

# java - Java 多维数组初始值设定项

> ID：15644506
> 
> 赞同：2
> 
> 时间：2013-03-26T18:16:49.993
> 
> 标签：java, arrays, initialization

在这里，我试图在 Java 中初始化一个对象数组，但我不知道如何初始化一个嵌套的对象数组。我尝试创建一个对象数组，其中一个字符串作为第一个元素，一个字符串数组作为第二个元素。

我遇到的错误信息：

```
Main.java:8: error: illegal initializer for Object 
```

产生此错误的代码是：

```
import java.util.*;
import java.lang.*;

class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
        Object[] multiDimensionalObjectArray = {"Hi!", {5, 5}};
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:20:27.933

出于某种原因，即使您不需要`new Object[]`在主数组文字前面加上一个，看起来您也需要一个用于内部数组文字：

```
Object[] multiDimensionalObjectArray = {"Hi!", new Object[] {5, 5}}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:21:41.013

您不是在创建多维数组。您正在创建一个数组，其中第一个元素是一个字符串 - 这不是一个开始的数组。当然，您可以将第二个元素设为数组……您希望它是哪种数组？鉴于它包含两个整数，也许您希望它是一个`int[]`：

```
Object[] mixedDataArray = { "Hi!", new int[] { 5, 5 } }; 
```

# powershell - 托管 powershell 导入模块失败

> ID：15644507
> 
> 赞同：0
> 
> 时间：2013-03-26T18:17:04.007
> 
> 标签：powershell, powershell-2.0

我正在尝试托管 powershell 并运行需要“ServerAdmin”模块的 Get-Windowsfeature。操作系统是 Server 2008 R2。我可以在 PS comamnd 提示符下成功运行“Import-module ServerAdmin”，所以我知道机器配置很好。但是，我无法让它在我的自定义 c# 主机中工作。我尝试了两种方法，如下所示。第一个，使用 import-module 命令，报告错误“未加载指定的模块'ServerAdmin'，因为在任何模块目录中找不到有效的模块文件”。使用 InitialSessionState.ImportModule() 的第二种方法也失败了。该方法没有报告错误，但 get-windowsfeature 命令仍然无法识别。

第一种方法：

```
var ps = PowerShell.Create();
var cmd = ps.AddCommand("Import-Module");
cmd.AddArgument("ServerManager");
ps.Invoke();
Console.WriteLine("errors");
// produces "The specified module 'ServerAdmin' was not loaded because no valid module file was found in any module directory"
foreach (var error in ps.Streams.Error)
{
    Console.WriteLine(error.ToString());
} 
```

第二种方法：

```
var ps = PowerShell.Create();
var initial = InitialSessionState.CreateDefault();
initial.ImportPSModule(new[]{"ServerManager"});
var runspace = RunspaceFactory.CreateRunspace(initial);
runspace.Open();
ps.Runspace = runspace;
ps.AddCommand("Get-WindowsFeature");
var results = ps.Invoke(); // throws exception because Get-WindowsFeature is not known
foreach (var result in results)
{
    Console.WriteLine(result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:22:21.557

发现了问题。我正在构建 x86 而不是 x64 或“任何”。显然 x86 是默认值。当然 server2008 很乐意在 wow64 中运行它，但 serveradmin 模块在这种情况下不可用。

# javascript - Knockout JS 对现有视图模型的验证

> ID：15644510
> 
> 赞同：0
> 
> 时间：2013-03-26T18:17:16.367
> 
> 标签：javascript, knockout.js, knockout-validation

这是我当前未修改的代码：http: [//jsfiddle.net/XABtF/](http://jsfiddle.net/XABtF/)

我目前正在使用[jQuery Validation](http://docs.jquery.com/Plugins/Validation)和[Knockout Validation](https://github.com/ericmbarnard/Knockout-Validation)

我已经阅读了两者的文档并尝试将它们实施到我现有的脚本中，但都没有成功运行。以下是我尝试实施淘汰赛验证的方式：http: [//jsfiddle.net/yNVeF/](http://jsfiddle.net/yNVeF/)

我的脚本非常简单，我只想对两个 observable 进行验证，如下所示：

```
self.emailAdd = ko.observable(""); 
```

我试过这样做：

```
self.emailAdd = ko.observable("").extend({required: { message: 'Please supply your email address.' }}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:15:09.080

将 jQuery validate 放在我的 applyBindings 下方，并使用“save”绑定视图模型名称：

```
$("#getAcc").validate({ submitHandler: authViewModel.save }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:33:22.073

编辑：根据下面的评论，如果您使用验证插件，扩展器就是其中的一部分 - 如果不是... /编辑

扩展器不是预先编写的 - 您需要添加自己所需的扩展器，如此处文档中所示。

[http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)

```
ko.extenders.required = function(target, overrideMessage) {
  //add some sub-observables to our observable
  target.hasError = ko.observable();
  target.validationMessage = ko.observable();

  //define a function to do validation
  function validate(newValue) {
     target.hasError(newValue ? false : true);
     target.validationMessage(newValue ? "" : overrideMessage || "This field is required");
  }

  //initial validation
  validate(target());

  //validate whenever the value changes
  target.subscribe(validate);

  //return the original observable
  return target;
}; 
```

# file - 从 cmd 打开“打开”对话框

> ID：15644511
> 
> 赞同：3
> 
> 时间：2013-03-26T18:17:18.750
> 
> 标签：file, cmd

我想知道是否可以从 cmd 打开“打开”对话框，以便我可以使用它来选择要打开的正确文件。（我已经知道如何直接从 cmd 打开文件，但这不是我感兴趣的）

目前我正在做一个使用程序（例如program.exe）的项目。这个程序需要一个模型文件（例如modelfile.mod）。我通过编写以下命令在 CMD 中执行程序：program.exe modelfile.mod，它可以工作。我有许多不同名称的模型文件，但程序文件始终具有相同的名称。不是每次我需要执行程序时都写入 CMD，我想创建一个批处理，我可以在其中选择我喜欢执行的 modfile，然后它以选择的 modfile 作为输入来执行程序。

因此，我需要知道如何从 cmd 打开“打开”对话框，以及如何获取所选文件的名称以用于执行程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:23:39.107

如果您已安装 PowerShell，则可以执行以下操作：

```
@echo off
setlocal
set ps_cmd=powershell "Add-Type -AssemblyName System.windows.forms|Out-Null;$f=New-Object System.Windows.Forms.OpenFileDialog;$f.Filter='Model Files (*.mod)|*.mod|All files (*.*)|*.*';$f.showHelp=$true;$f.ShowDialog()|Out-Null;$f.FileName"

for /f "delims=" %%I in ('%ps_cmd%') do set "filename=%%I"

if defined filename (
    echo You chose %filename%
) else (
    echo You didn't choose squat!
)

goto :EOF 
```

或者，如果您想分解 powershell cmdlet 以便于维护：

```
@echo off
setlocal
set "ps=Add-Type -AssemblyName System.windows.forms | Out-Null;"
set "ps=%ps% $f=New-Object System.Windows.Forms.OpenFileDialog;"
set "ps=%ps% $f.Filter='Model Files (*.mod)|*.mod|All files (*.*)|*.*';"
set "ps=%ps% $f.showHelp=$true;"
set "ps=%ps% $f.ShowDialog() | Out-Null;"
set "ps=%ps% $f.FileName"

for /f "delims=" %%I in ('powershell "%ps%"') do set "filename=%%I"

if defined filename (
    echo You chose %filename%
) else (
    echo You didn't choose squat!
)

goto :EOF 
```

（PowerShell 命令无情地从[Just Tinkering 博客](http://justtinkering.wordpress.com/2011/05/14/use-file-open-dialog-in-powershell/)中窃取。）请参阅[OpenFileDialog 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)文档以了解您可以设置的其他属性，例如`Title`和`InitialDirectory`。

# c - 编程作业说测试程序将仅#include .H 文件，而不是 .CC 文件。有人可以澄清

> ID：15644512
> 
> 赞同：-3
> 
> 时间：2013-03-26T18:17:20.617
> 
> 标签：c, include

所以我有 2 个文件需要上交，调用它们：example.cc 和 example.h

我们被告知他们的测试代码只会#include "example.h"

通常我一直使用#include "example.cc"，因为它已经在它的声明中包含了example.h。

当我运行测试代码时，每当我在测试代码中提到示例时，我都会得到“未定义的 example::example..”，这显然是因为测试代码只能看到我在 example.h 中的声明，而不是它们的实际执行。

我错过了什么？我在example.h中尝试过#include example.cc，但这显然是不对的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:39:01.337

您的教授似乎有某种其他文件，例如professor_main.cc，并且他们将像这样编译项目：

```
g++ example.cc professor_main.cc -o project 
```

他们的professional_main.cc 会有一行

```
#include "example.h" 
```

它还将使用您的一些功能，并可能测试它们是否在做正确的事情：

```
std::cout << (example_add(2,3) == 5) ? "good" : "bad" << std::endl; 
```

现在，如果他们没有#include example.h，或者如果你没有正确地制作那个文件，他们会在professor_main.cc 上得到一个编译错误，因为它不知道example_add(int,int)。应该在头文件中并使此错误消失的关键行是：

```
int example_add(int a, int b); 
```

这称为函数声明。

如果头文件一切正常，但你的教授犯了一个错误，并试图在没有 example.cc 的情况下编译项目，如下所示：

```
g++ professor_main.cc -o project 
```

然后他们会收到关于 example_add() 的“未定义引用”的*链接器*错误。

缺少的是函数*定义*：

```
int example_add(int a, int b) { return a + b; } 
```

这应该在您的 example.cc 文件中，如果教授在他们的编译命令行中包含它，那么一切都应该很好。

但是，如果您在*头*文件中添加了#include "example.cc"，那么一切都不会好。实际上，您随后会将 example.cc 复制并粘贴到professor_main.cc 中，因为它在那里#included。但它显然仍然在它自己的文件example.cc 中。因此，如果您的教授尝试这样做：

```
g++ example.cc professor_main.cc -o project 
```

他们会从链接器获得*多重定义*错误，因为函数 example_add() 将被定义*两次*。

通常，您可能应该做的是将所有函数*定义*放在源文件 (.cc) 中，并将所有函数*声明*放在头文件 (.h) 中。尝试自己编译另一个 .cc 文件并尝试看看它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:39:10.497

在 C++（和它的起源 C）中，想法是*头*文件（`*.h`在 C 中，在 C++ 中没有扩展名）包含声明（没有可执行代码，内联函数除外），而代码文件（`*.c in C,`*.cc `in C++) contain all executable code, and`#include`声明他们需要什么的头文件。请注意，实现一些更广泛使用的时髦类的文件还应该包括声明它的头文件，以避免由于声明不同而难以追踪错误。

C/C++ 预处理器是一个笨蛋，它只是替换文本，并且`#include`只是逐字复制文件的内容。所以你可以做各种奇怪的扭曲，比如在`#incude`d 文件中开始一个语句并在外面完成它，或者在头文件中包含可执行代码。我会编译并正常工作，但真正重要的是下一个阅读代码的人是否理解它（我的意思是几天后*你）。*你的助教不会因为你的代码组织得不好而受苦，她只会皱着眉头给你一个 F。*你*会在努力让它工作的同时。

他们大概的意思是你应该实现，比如说，给出在头文件`class foo`中使用所需的声明（并且*只有*未洗过的大众应该看到的工作原理！），以及一个给出实际实现的代码文件；他们将提供哪些包含和链接来测试您的课程。`class foo``foo.h`*`class foo``foo.cc``bar-uses-foo.cc``foo.h``foo.o`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:04:05.073

您需要使用编译器链接文件，然后构建它们。另一件事是除了头文件之外的每个文件中，您都需要包含头文件。

这样的事情应该有帮助

```
gcc -c example.c -o example.o
gcc example.o -o example 
```

如果您添加另一个使用标题的文件：

```
gcc -c file1.c -o file1.o 
gcc -c file2.c -o file2.o
gcc file1.o file2.o -o myprogram 
```

术语`gcc`和`g++`都是 Linux 和 Unix 编译器。如果您使用的是 windows dev c++ 应该可以工作或使用[gcc for windows](https://stackoverflow.com/questions/6394755/how-to-install-gcc-on-windows-7-machine)*

# javascript - 将对象文字插入数组

> ID：15644513
> 
> 赞同：0
> 
> 时间：2013-03-26T18:17:27.477
> 
> 标签：javascript

我不明白为什么拼接方法对我不起作用。我有一个看起来像这样的数组：（它实际上更大，但我不想弄乱页面）

```
var navItems = [ {
                    "content": "Panels",
                    "icon": "panels"
                },
                {
                    "content": "Samples",
                    "icon": "sample"
                }]; 
```

我想在中间插入一个项目说：

```
var testNavItems = navItems.splice(1, 0, {
                    "content": "New Nav",
                    "icon": "New Nav"
                   });
console.log(testNavItems); 
```

或者

```
var testNavItems = navItems.push({
                    "content": "New Nav",
                    "icon": "New Nav"
                   });
console.log(testNavItems); 
```

我得到一个空数组。这在JS中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:18:38.560

`.push`并且`.splice`不要创建新数组。他们修改了原始数组。

尝试

```
console.log(navItems); 
```

# javascript - JavaScript 执行顺序的正确解释

> ID：15644514
> 
> 赞同：1
> 
> 时间：2013-03-26T18:17:27.580
> 
> 标签：javascript

我知道关于这个主题有很多问题，但所有问题都是针对特定案例量身定制的。我在问这个问题，并希望每个人在调查此事时都能使用的答案。

假设我有三个需要按顺序执行的函数，它们都做一些异步的事情。

对于两个函数，回调很简单：

```
var fOne = function(callback) {
  // do stuff
  callback();
};

var fTwo = function() {
  // do stuff
}; 
```

来电：

```
fOne(fTwo); 
```

使 fTwo 在 fOne 完成后运行。如何将 fThree 添加到这种情况下，使其在 fTwo 之后运行，而 fTwo 在 fOne 之后运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:20:59.557

基本上，如果我正确理解您的问题，您需要将 lambda 传递给 fOne，以便能够向 fTwo 添加参数，然后让 fTwo 收集回调并像 fOne 一样调用它。

```
var fOne = function(callback) {
  // do stuff
  callback();
};

var fTwo = function(callback) {
  // do stuff
  callback();
};

var fThree = function() {
  // do stuff
};

fOne(function() { fTwo(fThree); }); // <- lambda 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:50:29.813

One more approach I came up with:

```
var stack = [fOne, fTwo, fThree];
stack.shift()(function() {
    stack.shift()(stack[0]);
}); 
```

Where you define your functins as:

```
function fOne(callback) {
    setTimeout(function() { // <-- example of async task
        alert('fOne done');
        callback && callback();
    }, 1000);
} 
```

[http://jsfiddle.net/kRMr8/2/](http://jsfiddle.net/kRMr8/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:21:48.090

由于您没有使用 deferred 和 promises 来同时运行异步操作，而是在另一个操作完成时才启动一个操作，因此添加第三个操作的方式几乎相同：

```
var fOne = function(callback) {
   console.log('1')
   callback();
};

var fTwo = function(callback) {
   console.log('2')
   callback();
};

var fThree = function() {
   console.log('3')
};

fOne(function() {
    fTwo(function() {
        fThree();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/gc9dr/)

# android - 带有 setBackgroundResource 和 setImageBitmap 的 ImageView

> ID：15644515
> 
> 赞同：1
> 
> 时间：2013-03-26T18:17:28.730
> 
> 标签：android, bitmap, drawable

我有 Imageview 我正在动态创建它，现在我正在设置

```
imageView.setImageBitmap(bitmap);
imageView.setBackgroundResource(R.drawable.a); 
```

随着位图大小的增加，setBackgroundResource 图像正在拉伸。

为什么会这样？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:21:28.297

背景资源旨在填满整个 View，这就是为什么当 View 的内容增加时它会被拉伸。

一种可能的解决方法是使用 9-patch 可绘制对象，仅由您指定拉伸。

另一种解决方法是随着普通视图内容的增加缩放背景，并将其重置为新背景。

# asp.net - 必须为所有类引用指定程序集名称

> ID：15644518
> 
> 赞同：0
> 
> 时间：2013-03-26T18:17:35.693
> 
> 标签：asp.net, vb.net, visual-studio-2010, entity-framework, .net-4.0

VS 2010、.NET 4.0、VB、EF 4.4

我在将 Web 应用程序部署到服务器时遇到问题...当我尝试在服务器上运行它时收到错误“无法加载类型”。谷歌搜索我还发现我的 Web 应用程序不应该有“App_Code”文件夹（复制共享但来自其他公司网站的代码）。所以我将所有类从 App_Code 移到了根目录下的文件夹（“BLL”——也是我们代码库的命名空间）。

现在，当我在 VS IDE 中运行应用程序时，我收到来自 web.config 负载的错误“配置错误。无法加载类型 'BLL.Roles'”。如果我将应用程序的程序集名称添加到“BLL.Roles”>“appName.BLL.Roles”的前面，我会越过这一行并在下一次引用“BLL”时出错。

我已经清理并重建了我的项目。

为什么我的课程没有被识别为应用程序的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:40:29.590

我可能是错的，但我相信因为您使用的是网站而不是 Web 应用程序，您只能访问 App_Code 文件夹中的类。如果您使用的是 Web 应用程序，则无论类位于哪个文件夹中，您都可以访问它们。在这种情况下，您可能必须将文件移动到应用程序格式而不是网站格式的新项目中。我会尝试将您的文件移动到 Web 应用程序项目。

# mysql - 如何只为每个用户选择最新的行？

> ID：15644519
> 
> 赞同：0
> 
> 时间：2013-03-26T18:17:44.027
> 
> 标签：mysql

我的表如下所示：

```
id  | user_id | period_id | completed_on
----------------------------------------
1   | 1       | 1         | 2010-01-01
2   | 2       | 1         | 2010-01-10
3   | 3       | 1         | 2010-01-13
4   | 1       | 2         | 2011-01-01
5   | 2       | 2         | 2011-01-03
6   | 2       | 3         | 2012-01-13
... | ...     | ...       | ... 
```

我只想选择最新的用户期间条目，记住用户不会都有相同的期间条目。

本质上（假设我只有上表）我想得到这个：

```
id  | user_id | period_id | completed_on
----------------------------------------
3   | 3       | 1         | 2010-01-13
4   | 1       | 2         | 2011-01-01
6   | 2       | 3         | 2012-01-13 
```

以下两个查询总是导致选择第一个 user_id 出现，而​​不是最新的（因为排序发生在从我理解的行中选择之后）：

```
SELECT
    DISTINCT user_id,
    period_id,
    completed_on
FROM my_table
ORDER BY
    user_id ASC,
    period_id DESC

SELECT *
FROM my_table
GROUP BY user_id
ORDER BY
    user_id ASC,
    period_id DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:34:31.650

似乎这应该使用`MAX`和子查询：

```
SELECT t.Id, t.User_Id, t.Period_Id, t.Completed_On
FROM my_table t
   JOIN (SELECT Max(completed_on) Max_Completed_On, t.User_Id
         FROM my_table
         GROUP BY t.User_ID
         ) t2 ON
      t.User_Id = t2.User_Id AND t.Completed_On = t2.Max_Completed_On 
```

但是，如果您可能有多个记录，其中每个用户的 completed_on 日期相同，那么这可能会返回多个记录。根据您的需要，可能在您的子查询中添加一个 MAX(Id) 并加入它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:38:23.527

尝试这个：

```
SELECT t.Id, t.User_Id, t.Period_Id, t.Completed_On
FROM table1 t
JOIN (SELECT Max(completed_on) Max_Completed_On, t.User_Id
FROM table1 t
GROUP BY t.User_ID) t2 ON t.User_Id = t2.User_Id AND t.Completed_On = t2.Max_Completed_On 
```

[**在这里演示**](http://sqlfiddle.com/#!2/27359/20)

# c - 如何将 uint16_t 数组类型转换为 uint8_t 数组？

> ID：15644525
> 
> 赞同：0
> 
> 时间：2013-03-26T18:18:11.347
> 
> 标签：c, arrays, casting

我有一个对长度为 32 的数组执行操作的函数`uint8_t`。我想将一个`uint16_t`长度为 16 的数组传递给它，并让它逐字节地对该数组执行相同的操作。

我试过这样做：

```
uint8_t byteArray[32];
void function(uint16_t *inArray)
{
    byteArray = (uint8_t *) inArray;
    ... do the byte-by-byte operations on byteArray
} 
```

但我得到了错误：

> 从类型'uint8_t *'分配给类型'uint8_t [32]'时不兼容的类型

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:21:58.057

> ```
> uint8_t byteArray[32]; 
> ```

你不能分配给`byteArray`. 它是一个数组，因此在 C 中不可修改。您可以改用指针或重新考虑您在做什么：强制转换本身就是一种代码味道，应该避免。

既然您提到您有一个对此进行操作的函数，那么让该函数接受参数不是比使用全局对象更好吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:24:40.720

数组是元素的集合，它不能像 C 中那样分配（更不用说类型转换）。您可以逐个元素地循环使用它，或者重新考虑您正在做什么以在任何地方使用相同的类型。

# java - 如何检测tomcat连接池问题

> ID：15644526
> 
> 赞同：0
> 
> 时间：2013-03-26T18:18:17.173
> 
> 标签：java, mysql, spring, tomcat, c3p0

我们有一个使用 Tomcat 6 和 MySQL 5.0 的 Java Spring MVC 2.5 应用程序。我们有一个奇怪的场景，无论出于何种原因，c3p0 连接池中使用的连接数量开始失控并最终导致 tomcat 宕机。

我们通过 JMX 监控 c3p0 连接池，大多数时候，几乎没有使用连接。当这种螺旋式上升的情况发生时，我们的 tomcat 连接池会达到最大值，并且 apache 开始排队线程。

在螺旋式场景中，数据库负载较低，不会出现任何错误或任何明显的不良情况。

开始没有关于如何检测此问题的想法。当情况已经失控并且不确定我如何在它失控之前抓住它时，我认为做一个 tomcat 堆栈转储对我没有任何好处。

我们还使用 Terracotta，根据日志我不相信它在做任何奇怪的事情。

任何想法将不胜感激！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:43:33.880

你在某个地方泄漏了连接。当您从会话工厂显式检索 Hibernate 会话时，可能会发生这种情况，而不是获取与进程内事务关联的连接（不记得确切的方法名称）。

C3P0 将允许您使用两个配置选项来调试这种情况（以下是从文档中复制的，它们是下载包的一部分）：

> unreturnedConnectionTimeout 定义连接可以保持签出状态的限制（以秒为单位）。如果设置为 nozero 值，则未返回的、已签出的超过此限制的连接将被立即销毁，然后在池中替换
> 
> 将 debugUnreturnedConnectionStackTraces 设置为 true，则每次签出连接时都会捕获堆栈跟踪。每当未返回的连接超时时，将打印该堆栈跟踪，显示未及时签入的连接被签出的位置。debugUnreturnedConnectionStackTraces 仅用于调试，因为捕获堆栈跟踪会减慢连接签出速度

# ajax - Express res.jsonp 向 Safari Extension AJAX 调用返回两个回调名称

> ID：15644538
> 
> 赞同：0
> 
> 时间：2013-03-26T18:18:43.220
> 
> 标签：ajax, express, jsonp

我正在 Safari 中构建一个扩展，在后端使用 Express.js。我对服务器进行了 AJAX 调用，服务器以似乎是双回调名称的方式进行响应：

```
jQuery191026131771644577384_1364321159940 && jQuery191026131771644577384_1364321159940([
  {
    "foo": "bar"
  }
]); 
```

这是 AJAX：

```
$.ajax({
    type : "GET",
    data : { 'something': 'something more'},
    url :  "http://localhost:3001/api/login/?callback=?",
    dataType: 'jsonp',
    success: function(data, text){
        console.log(data)
    },
    error: function (request, status, error) {
        console.log("ERROR: " + status + error );
    }  
}); 
```

...这是 Express.js：

```
app.get('/api/login', function(req, res){
  res.jsonp([{'foo':'bar'}]);
}); 
```

浏览器报告解析错误，可能是因为上面的双回调标记。

线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:02:19.277

它不是双重回调，它与doing相同`func && func()`，只是在调用之前确保函数存在，因此避免抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:18:22.227

赫克托在评论中说得对：尝试删除回调=？从网址

# delphi - 如何显示 Windows 照片打印向导？

> ID：15644539
> 
> 赞同：3
> 
> 时间：2013-03-26T18:18:44.970
> 
> 标签：delphi, wia

我找到了VB函数[`ShowPhotoPrintingWizard`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630781.aspx)：

```
CommonDialog.ShowPhotoPrintingWizard( _
  ByVal Files As VARIANT _
) As HRESULT 
```

如何在 Delphi 中调用它或获得等效功能？我正在使用德尔福 2010。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:25:07.813

我认为单个文件可能是这样的：

```
uses
  ComObj;

procedure TForm1.Button1Click(Sender: TObject);
var
  CommDlg: OleVariant;
begin
  CommDlg := CreateOleObject('WIA.CommonDialog');
  CommDlg.ShowPhotoPrintingWizard('d:\Image.jpg');
end; 
```

或多个文件的类似内容：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Files: OleVariant;
  CommDlg: OleVariant;
begin
  CommDlg := CreateOleObject('WIA.CommonDialog');
  Files := CreateOleObject('WIA.Vector');
  Files.Add('d:\Image 1.jpg');
  Files.Add('d:\Image 2.jpg');
  CommDlg.ShowPhotoPrintingWizard(Files);
end; 
```

# sql-server - 返回与对应的 MAX(datetime) 值相关的详细数据

> ID：15644542
> 
> 赞同：0
> 
> 时间：2013-03-26T18:18:48.800
> 
> 标签：sql-server, tsql, select, group-by, max

我有以下使用 SQL Server 2005 的数据集：

```
TABLE NAME: LOG

TYPE       TIMESTAMP            USERID
Job        26/03/2013 00:24     DED
Job        21/03/2013 02:31     EGA
Sales      NULL                 NULL
Sales      NULL                 NULL 
```

我想根据 MA​​X(timestamp) 检索列 TYPE、TIMESTAMP 和 USERID.. 即结果应该是

```
Job        26/03/2013 00:24     DED 
```

我试过以下

```
SELECT max(timestamp), UserID
FROM log
GROUP BY UserID 
```

但是，这会返回所有行。

当我尝试

```
SELECT max(timestamp), max(UserID)
FROM log
GROUP BY UserID 
```

返回

```
Job        26/03/2013 00:24     EGA 
```

我了解返回的 max(userID) 是按字母顺序排序的最大列值。

最后当我尝试

```
SELECT * 
FROM log 
WHERE timestamp = (SELECTmax(timestamp) FROM log) 
```

我没有得到任何结果（空）..

如果有人可以提供帮助，将不胜感激！

* * *

**编辑更新：**

如果它有任何帮助-我应该提到我有多个表，并且需要`SELECT`并且需要WHERE TYPE` 可以等于（'Job' 或 'Sales'）..`USERID``MAX(timestamp)`

我发现这非常有效：

```
SELECT Type,
       MAX(CASE WHEN log.Type IN ('Job', 'Sales') THEN log.Timestamp ELSE NULL END) As Timestamp,
FROM log 
```

现在的问题是当我尝试时：

```
SELECT Type,
       MAX(CASE WHEN log.Type IN ('Job', 'Sales') THEN log.Timestamp ELSE NULL END) As Timestamp,
       MAX(CASE WHEN log.Type IN ('Job', 'Sales') THEN log.UserID ELSE NULL END) As UserID,
FROM log 
```

它给了我基于字母顺序的 max(userID)，而不是基于 max(timeframe)..

当 TYPE = JOB 或 SALES 时，我需要 MAX(timeframe) 和相应的 UserID

**（放置在带有许多其他列的大选择查询的末尾）。**

* * *

**示例查询更新：**

这是我要执行的查询.. 非常抱歉我缺乏深入的知识！

```
DECLARE @FROMDATE AS DATETIME, @TODATE AS DATETIME;
SET @FROMDATE = '1 Mar 2013'; SET @TODATE = '31 Mar 2013';

SELECT CASE WHEN country.country_code IN (61,64,673,60,65,679,66,62,92,84,63,91) THEN 'APAC'
            WHEN country.country_code IN (81,82,852,853,886) THEN 'EAST ASIA'
            WHEN country.country_code IN (44,353,32,45,358,33,49,30,39,352,356,47,351,34,46,31) THEN 'EUROPE'
            WHEN country.country_code IN (1,101) THEN 'USA/CANADA' ELSE 'OTHER'
       END AS REGION,

       info.Status as STATUS, info.Code as CODE,
       CONVERT(VARCHAR, info.Start_Date,103) as 'START DATE', 

       log.Type AS TYPE,
       MAX(CASE WHEN log.Type IN ('Job','Sales') THEN log.Timestamp ELSE NULL END) As TIMESTAMP,   -- this works fine! :)
       MAX(CASE WHEN log.Type IN ('Job','Sales') THEN log.UserID ELSE NULL END) As USERID  --having trouble with this! :(

FROM log JOIN info ON (log.id = info.id), country

WHERE info.date BETWEEN @FROMDATE AND @TODATE
      AND info.Status NOT LIKE '%NA%'

GROUP BY country.code, info.status, info.code, info.start_date, log.type 
```

我希望这对大家有所帮助，并再次感谢您的惊人支持。我猜这很简单，但我错过了一些东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:27:40.067

我根据您的问题创建了以下示例测试表：

```
CREATE TABLE Log (TYPE VARCHAR(5) NOT NULL, TIMESTAMP DATETIME NULL, USERID VARCHAR(3) NULL);

INSERT INTO Log
VALUES ('Job', '03/26/2013 00:24', 'DED'), ('Job', '03/21/2013 02:31', 'EGA'), ('Sales', NULL, NULL), ('Sales', NULL, NULL); 
```

我尝试了您的最后一个示例查询，它工作正常。由于此查询对您不起作用，因此我编写了以下内容，它也应该可以处理并处理您有多个具有相同 TIMESTAMP 值的行的情况：

```
WITH BaseData
AS
    (SELECT *
        , ReverseOrder = ROW_NUMBER() OVER
            (ORDER BY TIMESTAMP DESC)
    FROM Log)
SELECT *
FROM BaseData
WHERE ReverseOrder = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:47:14.187

查看我对另一个问题的回答，以根据日期列获取表格中的第一行或最后一行：[https ://stackoverflow.com/a/10111071/452792](https://stackoverflow.com/a/10111071/452792)

你可以试试 ：

```
DECLARE @FROMDATE AS DATETIME, @TODATE AS DATETIME;
SET @FROMDATE = '1 Mar 2013'; SET @TODATE = '31 Mar 2013';

;WITH LOG_CTE AS 
(
  SELECT Stuff(Max(Convert(Varchar, Timestamp, 20) + IsNull(Convert(Varchar, Id), '')), 1, 19, '') As Id
       , Max(Type) As Type
       , Max(timestamp) As Timestamp
       , Stuff(Max(Convert(Varchar, Timestamp, 20) + IsNull(Convert(Varchar, UserID), '')), 1, 19, '') As UserID
    FROM log 
   GROUP BY log.Type 
  HAVING log.Type IN ('JOB','SALES')
)
SELECT CASE WHEN country.country_code IN (61,64,673,60,65,679,66,62,92,84,63,91) THEN 'APAC'
            WHEN country.country_code IN (81,82,852,853,886) THEN 'EAST ASIA'
            WHEN country.country_code IN (44,353,32,45,358,33,49,30,39,352,356,47,351,34,46,31) THEN 'EUROPE'
            WHEN c.country_code IN (1,101) THEN 'USA/CANADA' ELSE 'OTHER'
       END AS REGION,

       info.Status as STATUS, info.Code as CODE,
       CONVERT(VARCHAR, info.Start_Date,103) as 'START DATE', 

       log.Type AS TYPE,
       log.Timestamp,
       log.UserID

FROM LOG_CTE log JOIN info ON (log.id = info.id)

WHERE info.date BETWEEN @FROMDATE AND @TODATE
      AND info.Status NOT LIKE '%NA%' 
```

# servicestack - ServiceStack 和 FluentValidation 未触发

> ID：15644546
> 
> 赞同：5
> 
> 时间：2013-03-26T18:19:00.817
> 
> 标签：servicestack, fluentvalidation

我必须忽略在我创建的基本**服务堆栈应用程序中启动****流利验证的一些事情。**我一直在关注[此处](https://github.com/ServiceStack/ServiceStack/wiki/Validation)找到的示例。对于我的一生，我似乎无法让我的验证者被解雇？？？？面包屑，一定有什么愚蠢的东西我错过了......？？？

 **> 我正在针对用户服务（[http://my.service/users](http://my.service/users)）发出用户请求，该请求直接通过而无需调用已注册的适当验证器。

请求是：{"Name":"","Company":"Co","Age":10,"Count":110,"Address":"123 brown str."}

响应：“用户已保存...”

* * *

这是代码： **1.DTO**

```
[Route("/users")]
public class User
{
    public string Name { get; set; }
    public string Company { get; set; }
    public int Age { get; set; }
    public int Count { get; set; }
    public string Address { get; set; }
} 
```

**2.验证者**

```
 public class UserValidator : AbstractValidator<User>
{
    public UserValidator()
    {
        RuleFor(r => r.Name).NotEmpty();
        RuleFor(r => r.Age).GreaterThan(0);
    }
} 
```

**3.AppHostBase**

```
public class ValidationAppHost : AppHostBase
{
    public ValidationAppHost()
        : base("Validation Test", typeof(UserService).Assembly)
    {

    }

    public override void Configure(Funq.Container container)
    {
        Plugins.Add(new ValidationFeature());

        //This method scans the assembly for validators
        container.RegisterValidators(typeof(UserValidator).Assembly);
    }
} 
```

**4.服务**

```
 public class UserService : Service
{
    public object Any(User user)
    {
        return "user saved...";
    }
} 
```

**5.Global.asax.cs**

```
protected void Application_Start(object sender, EventArgs e)
    {
        new ValidationAppHost().Init();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T21:07:54.803

好的....找到了问题....我（错误地）安装了（通过 nuget）并在我的项目中引用了带有 Service-Stack 的 FluentValidation 实现的 FluentValidation.dll（请参阅命名空间`ServiceStack.FluentValidation`）。一旦我删除了这个唯一不正确的 FluentValidation 引用并确保我的验证器从`AbstractValidator`正确触发的验证器的服务堆栈实现扩展......**

# wpf - WPF 中的复杂模板继承

> ID：15644552
> 
> 赞同：1
> 
> 时间：2013-03-26T18:19:31.280
> 
> 标签：wpf, xaml, templates, inheritance, styles

我创建了自己的按钮模板，其中有一个画布，其中定义了一些相互重叠的渐变。

基本按钮为灰色

```
<Style x:Key="ButtonGrey" TargetType="Button">
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="Width" Value="200" />
    <Setter Property="Height" Value="40" />
    <Setter Property="FontSize" Value="24" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontFamily" Value="Utsaah" />
    <Setter Property="Foreground" Value="#FFE6E7E8" />
    <Setter Property="Margin" Value="0,0,0,2" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">

                <Border x:Name="Border" 
                        BorderThickness="2"
                        Margin="-2"
                        BorderBrush="{x:Null}" >

                    <Canvas x:Name="ButtonGreyCanvas">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="InvalidFocused"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                    <!-- Button complex background -->
                        <Path x:Name="Bg1" Data="M0,40L200,40L200,0L0,0z" Stretch="Fill" Fill="{DynamicResource ButtonGreyBg1}" />
                        <Path x:Name="Bg2" Data="M0,40L200,40L200,0L0,0z" Stretch="Fill" Fill="{DynamicResource ButtonGreyBg2}" />
                        <!-- middle high dark strip -->
                        <Path x:Name="Bg3" Data="F1M200,20L0,20L0,40L200,40z" Fill="{DynamicResource ButtonGreyStripBg3}" Opacity="0.30000299215316772" Stretch="Fill" Canvas.Top="20" />

                        <ContentPresenter 
                            Content="{TemplateBinding Content}"
                            Margin="40,8,0,0"/>

                        <ContentPresenter 
                            Content="{TemplateBinding Content}"
                            TextBlock.Foreground="#1EE6E7E8"
                            Margin="41.5,6.8,0,0"/>                     
                    </Canvas>
                </Border>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsFocused" Value="True">
                        <Setter Property="Foreground" Value="White" />
                        <Setter TargetName="Border" Property="BorderThickness" Value="1.3" />
                        <Setter TargetName="Border" Property="Margin" Value="-1.3" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource ButtonGreyOverBrush}"/>
                    </Trigger>
                    <Trigger Property="IsDefaulted" Value="True"/>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="Border" Property="BorderThickness" Value="2" />
                        <Setter TargetName="Border" Property="Margin" Value="-2" /> 
                        <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource ButtonGreyOverBrush}"/>                          
                        <Setter Property="Foreground" Value="White" />
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Foreground" Value="White" />
                        <Setter TargetName="Border" Property="BorderThickness" Value="2" />
                        <Setter TargetName="Border" Property="Margin" Value="-2" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource ButtonGreyOverBrush}"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False"/>
                </ControlTemplate.Triggers>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

现在我只想将 Bg1、Bg2 和 Bg3 路径更改为不同的渐变画笔，所以我创建了继承自 ButtonGrey（称为 ButtonBlue）的新样式，但我无法简单地访问这些路径（Bg1、Bg2 和 Bg3）直接，比如

```
<Style x:Key="ButtonBlue" TargetType="Button" BasedOn="{StaticResource ButtonGrey}">
    <Setter TargetName="Bg1" ...???...  />
</Style> 
```

谁能帮助如何访问画布上的这些路径？

非常感谢！

# google-cloud-datastore - 使用 JPA2 将数据异步放入谷歌数据存储

> ID：15644553
> 
> 赞同：2
> 
> 时间：2013-03-26T18:19:35.863
> 
> 标签：google-cloud-datastore, jpa-2.0, datanucleus, google-cloud-endpoints

我正在使用 JPA2`@entity`来表示我的模型。我需要将数据异步放入数据存储区。我该怎么做？如果 JPA Dao 无法做到这一点，我可以在 JPA 实体上使用 AsyncDatastoreService - 而不是 JPQL？有人有例子吗？

（我知道在 Python 中这将是一个笑话，因为我可以扩展`ndb.Model`以创建模型，然后在它们上调用 put_async。但在 Java 中没有`ndb.Model`扩展，所以我使用 JPA。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:42:33.620

我非常希望不必使用以下`ThreadManager.createBackgroundThread`. 但到目前为止，这就是我所发现的。有没有其他人有更简单的东西（比如 python 的`put_async`）？

```
import com.google.appengine.api.ThreadManager;
import java.util.concurrent.AtomicLong;

AtomicLong counter = new AtomicLong();

Thread thread = ThreadManager.createBackgroundThread(new Runnable() {
  public void run() {
    try {
      while (true) {
        counter.incrementAndGet();
        Thread.sleep(10);
      }
    } catch (InterruptedException ex) {
      throw new RuntimeException("Interrupted in loop:", ex);
    }
  }
});
thread.start(); 
```

# javascript - 打开钛加速器窗口的正确方法是什么？

> ID：15644557
> 
> 赞同：1
> 
> 时间：2013-03-26T18:19:41.637
> 
> 标签：javascript, titanium, appcelerator

我正在开发一个 Titanium Appcelerator iOS 应用程序，该应用程序包含一个初始仪表板屏幕和 2 个可以从仪表板访问的独立屏幕。

我已经将我的应用程序设置为使用导航控制器，并且一切都通过使用自定义事件侦听器的 main.js 文件进行控制。我这样做是为了将每个屏幕的代码分成单独的文件。

问题是每次加载屏幕时，我都必须打开导航堆栈上的窗口，然后将所有元素添加到其中。这对于其中一个屏幕来说很好，因为它只包含一些视图和标签。但是，另一个屏幕有一个 MapView，在用户看到屏幕打开后需要 3 秒左右才能加载。

处理这个问题的正确方法是什么？有没有办法在打开之前预加载窗口但保留我当前的架构？

[我在这里](https://stackoverflow.com/questions/15328219/titanium-appcelerator-mapview-takes-a-long-time-to-open)以更加混乱和具体的方式提出了这个问题，但我认为这个一般性问题适用于更多人，因为我使用的架构风格相当普遍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:04:33.830

我认为您的方法相当典型……不幸的是，我不知道有任何方法可以预加载窗口的内容。您可以通过包含地图画布的静态图像来改善地图视图加载时的用户体验（就像 Apple 的 UI 指南建议 Default.png 是应用程序本身的基本界面的图像以给人留下印象一样它正在快速加载）。您还可以以`Ti.UI.ActivityIndicator`. 这两个都可以默认添加到窗口中，然后在您在地图视图的`load`事件中显示地图时隐藏。我认为他们可能会帮助让这 3 秒的等待看起来不那么痛苦。

我在您的另一篇文章中注意到，即使您没有主动获取用户的 GPS 位置，您观察到地图仍然需要很长时间才能加载。虽然确实如此，但您可以通过在应用程序启动时立即获取位置，然后使用您正在使用的自定义事件将其传递到地图窗口来节省一些时间，这样地图就可以直接在用户的位置上初始化，而不是而不是一个虚拟的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:56:48.543

对于导航控制器，我开始使用[https://github.com/vuinguyen/NavController](https://github.com/vuinguyen/NavController)

它适用于 ios/android 并且 git 代码简单明了且易于理解。它是 Kevin Whinnery 很久以前推出的增强版。我一直在 3.0 中使用它，没有任何具体的抱怨。我添加了抑制本机 ios 导航标题的功能，但除此之外它直接插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:39:43.467

我不这么认为使用完全相同的架构。首次加载应用程序时，您可以在一个窗口中加载所有视图，而不是使用多个窗口。然后，通过改变 zIndexes 来修改当前显示的那个

# ruby-on-rails - 使用 actionmailer 对多个电子邮件方法重用相同的视图

> ID：15644558
> 
> 赞同：0
> 
> 时间：2013-03-26T18:19:45.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, actionmailer

```
class AdminMailer < ActionMailer::Base
  def send_message_to_user(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject)
  end

  def send_message_to_all_users(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject)
  end

  def send_message_to_active_users(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject)
  end

  def send_message_to_suspended_users(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject)
  end
end 
```

我想为每个操作使用 4 个视图`send_message_to_active_users.html.erb`, `send_message_to_all_users.html.erb`, `send_message_to_suspended_users.html.erb`, `send_message_to_user.html.erb`,**我只想对所有操作使用 1 个视图文件。**

**我该怎么做？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:35:07.160

要选择另一个模板，您可以`:template_name`作为选项传递：

```
mail(:to => user.email, :subject => subject, :template_name => "another_template_name") 
```

因此，您可以将一个模板用于多种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:35:55.797

回应是：

```
class AdminMailer < ActionMailer::Base
  def send_message_to_user(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject) do |format|
      format.html { render "send_email_to_users" }
    end
  end

  def send_message_to_all_users(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject) do |format|
      format.html { render "send_email_to_users" }
    end
  end

  def send_message_to_active_users(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject) do |format|
      format.html { render "send_email_to_users" }
    end
  end

  def send_message_to_suspended_users(user, subject, body, locale)
    @body = body
    mail(:to => user.email, :subject => subject) do |format|
      format.html { render "send_email_to_users" }
    end
  end
end 
```

你可以看看[http://api.rubyonrails.org/classes/ActionMailer/Base.html](http://api.rubyonrails.org/classes/ActionMailer/Base.html)

谢谢！

# javascript - kinetic.js 在实例化后、添加到图层和场景后以及在动画循环中更改对象的填充类型

> ID：15644559
> 
> 赞同：1
> 
> 时间：2013-03-26T18:19:46.137
> 
> 标签：javascript, oop, html5-canvas, kineticjs

我试图在KineticJS Rect 对象实例化后、添加到图层和场景后以及在动画循环中更改其**填充样式。**

我正在尝试根据渲染画布的主应用程序文件中的用户按钮控件在单一颜色类型和线性渐变类型之间**切换填充类型。**

我在一个不同的文件中实例化对象，这是我编写的一个类，它最初在它的构造函数中实例化一个具有线性渐变填充的 KineticJS Rect，如下所示：

```
function MyBackground(width,height,c1,c2,mode) {
  this.width = width;
  this.height = height;
  this.color1 = c1;
  this.color2 = c2;
  this.mode = mode;
  this.background = new Kinetic.Rect({
  x: 0,
  y: 0,
  width: this.width,
  height: this.height,
  fillLinearGradientStartPoint: [0, 0],
  fillLinearGradientEndPoint: [this.width, this.height],
  fillLinearGradientColorStops: [0, this.color1, 1, this.color2]
  });
  this.getMode = function() { return this.mode; }; } 
```

然后我在主文件中创建一个实例：

```
var myBack= new MyBackground(stageWidth,stageHeight,getRandomHexColor(),getRandomHexColor(),'dualColorLinearGradientStatic');
var background = myBack.getBackground();
myBack.setMode('singleColor'); 
```

然后我将背景矩形添加到图层，并将图层添加到舞台：

```
layer.add(background);
stage.add(layer); 
```

然后我启动动画循环代码，然后捕获按钮按下以更改填充的事件处理程序在内部尝试：

```
myBack.setMode(bgmodeselected);
background = myBack.getBackground(); 
```

应用页面加载良好，显示初始线性渐变填充。如果我选择相同的线性渐变模式并按下按钮控件，它会根据我的需要更改颜色，以保持线性渐变的填充类型。如果然后我将模式切换为单色填充并单击控制按钮，那也可以，将矩形更改为单色。这是我在类函数中的内容，用于更改使其特别有效的模式：

```
this.background.setFill(this.color1); 
```

在基于条件的同一个函数内部，它应该将填充更改为线性渐变（并且只要它没有首先更改为上面的单色填充）

```
this.background.setAttrs({
    fillLinearGradientStartPoint: [0, 0],
    fillLinearGradientEndPoint: [960, 600],
    fillLinearGradientColorStops: [0, this.color1, 1, this.color2]
  }); 
```

我也在同一块内尝试过：

```
this.background.setFillLinearGradientStartPoint(0, 0);
this.background.setFillLinearGradientEndPoint(960, 600);
this.background.setFillLinearGradientColorStops([0, this.color1, 1, this.color2]); 
```

我知道正确的变量和值正在传递给函数并且条件正在工作，因为它将填充模式类型从其（最初实例化的）线性渐变填充更改为单色填充（即使作为不同的单色）。

问题是当我尝试切换回线性渐变填充时，它不会这样做，或者至少重新绘制/刷新，尽管它使用正确的值调用相同的函数。所以，我想我的具体问题是**如何多次更改 KineticJS Rect 的填充样式，从单一颜色填充回线性渐变填充，之后它已经被添加到图层和舞台并具有动画循环实现了吗？**

这是我的第一个问题帖子，所以我希望我做得正确；如果我应该做不同的事情，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:44:39.217

欢迎来到堆栈溢出！

当您重新应用渐变时，请务必清除纯色填充：

```
 // clear the solid fill
      this.setFill('');
      // then apply the gradient fill
      this.setFillLinearGradientStartPoint(-50);
      this.setFillLinearGradientEndPoint(50);
      this.setFillLinearGradientColorStops([0, 'green', 1, 'yellow']); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/dmmF2/](http://jsfiddle.net/m1erickson/dmMF2/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    <script>

      function draw(images) {
        var stage = new Kinetic.Stage({
          container: 'container',
          width: 578,
          height: 200
        });
        var layer = new Kinetic.Layer();

        var linearGradPentagon = new Kinetic.Rect({
          x: 100,
          y: 30,
          width: 75,
          height: 50,
          fill:"red",
          stroke: 'black',
          strokeWidth: 4,
          draggable: true
        });

        linearGradPentagon.on('mouseover touchstart', function() {
          this.setFill('');
          this.setFillLinearGradientStartPoint(-50);
          this.setFillLinearGradientEndPoint(50);
          this.setFillLinearGradientColorStops([0, 'green', 1, 'yellow']);
          layer.draw();
        });

        linearGradPentagon.on('mouseout touchend', function() {
          this.setFill('red');
          layer.draw();
        });

        layer.add(linearGradPentagon);
        stage.add(layer);
      }

      draw();

    </script>
  </body>
</html> 
```

# php - mysql：使用like返回重复的行数

> ID：15644560
> 
> 赞同：0
> 
> 时间：2013-03-26T18:19:47.973
> 
> 标签：php, mysql, postal-code

我在下面有一个问题

表格1

第一种情况：

```
postcode
LS1 1LS 
```

第二种情况：

```
postcode
LS11LS 
```

表2

```
 postcode| region
    LS1 | Leeds
    LS11    | Leeds 
```

我正在使用以下查询来计算区域与相关邮政编码

```
SELECT table2.region as 'Region', COUNT( table2.postcode ) as  'count'
FROM table1
INNER JOIN table2 ON table1.postcode LIKE CONCAT( table2.postcode,  '%' ) 
WHERE table1.postcode >  ''
GROUP BY Region 
```

在表 1 第一个案例中应用它时，我得到

```
Leeds | 1 
```

在将其应用于表 1 第二种情况时，我得到

```
Leeds | 2 
```

出于某种原因，在这个邮政编码/类似的邮政编码中，另一半与第一部分完全相同，并且在类似的内部连接之间没有空格返回计数为 2。

有什么解决方案吗？

看到这个[sqlfiddle](http://sqlfiddle.com/#!2/58d39/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:35:00.063

如果表 1 中有两个条目的值`LS1 1LS`和`LS11LS`，则您的联接将匹配这两个条目，计数为 2。

# facebook - Facebook 应用程序创建第二组

> ID：15644564
> 
> 赞同：2
> 
> 时间：2013-03-26T18:19:55.337
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我正在使用我的 FB 应用程序创建组并邀请用户加入我的应用程序组，第一次一切正常。当我尝试创建另一个组时，出现以下错误：{“（OAuthException - #4009）（#4009）此应用程序在拥有更多用户之前无法添加更多组”}

“......直到它有更多的用户”？我们可以创建的组有限制吗？

当我删除第一个组然后创建另一个组时，一切正常。

谁能帮我解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:11:52.623

您的应用可以创建的群组数量受您的应用拥有的活跃用户数量的限制。

向您的应用添加其他开发者帐户（以便他们成为“活跃用户”）或尝试添加一些测试用户来做同样的事情。

# r - 使 xtable 适合 pdf 文件

> ID：15644574
> 
> 赞同：4
> 
> 时间：2013-03-26T18:20:39.293
> 
> 标签：r, latex, sweave

我正在创建一个使用 xtable 创建表格并放入 pdf 文件的 sweave 文档。它可以工作，但表格不适合文档，并且缺少一些文本。有没有办法在 xtable 中进行文本对齐/完全适合 xtable 到 pdf 文件？

这是我的数据：

```
dput(x)
structure(list(App = structure(c(3L, 2L, 1L), .Label = c("AppServer", 
"Db", "Web"), class = "factor"), Group = structure(c(2L, 1L, 
1L), .Label = c("Back", "Front"), class = "factor"), Owner = structure(c(1L, 
1L, 1L), .Label = "Infrasructure", class = "factor"), Server = structure(1:3, .Label = c("ServerA", 
"ServerB", "ServerC"), class = "factor"), NumberCPU = c(64L, 
120L, 120L), Description = structure(c(1L, 3L, 2L), .Label = c("Front End server to server web traffic", 
"Hold Web templates to generate dynamic content", "Keeps customer data and login information"
), class = "factor"), Cost = structure(1:3, .Label = c("$200,000 ", 
"$400,000 ", "$500,000 "), class = "factor")), .Names = c("App", 
"Group", "Owner", "Server", "NumberCPU", "Description", "Cost"
), class = "data.frame", row.names = c(NA, -3L)) 
```

这是将表格放入pdf的代码：

```
print(xtable(x, caption=paste("Summary of applications"),table.placement="!h",caption.placement="top", align=c('l', 'p{1.5in}', rep('c',6) ))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:35:03.570

我建议查看[xtable 库](http://cran.r-project.org/web/packages/xtable/vignettes/xtableGallery.pdf)，有很多有用的示例。基本上，如果您不想通过缩短字符串来调整表格，我看到两个选项：

1.  使用较小的字体。
2.  使用横向模式。

在这里，我使用了两者的组合：

```
\documentclass{article}
\usepackage{rotating}

\begin{document}

<<Data,echo=FALSE>>=
library(xtable)
x <- structure(list(App = structure(c(3L, 2L, 1L), .Label = c("AppServer", 
"Db", "Web"), class = "factor"), Group = structure(c(2L, 1L, 
1L), .Label = c("Back", "Front"), class = "factor"), Owner = structure(c(1L, 
1L, 1L), .Label = "Infrasructure", class = "factor"), Server = structure(1:3, .Label = c("ServerA", 
"ServerB", "ServerC"), class = "factor"), NumberCPU = c(64L, 
120L, 120L), Description = structure(c(1L, 3L, 2L), .Label = c("Front End server to server web traffic", 
"Hold Web templates to generate dynamic content", "Keeps customer data and login information"
), class = "factor"), Cost = structure(1:3, .Label = c("$200,000 ", 
"$400,000 ", "$500,000 "), class = "factor")), .Names = c("App", 
"Group", "Owner", "Server", "NumberCPU", "Description", "Cost"
), class = "data.frame", row.names = c(NA, -3L))
@

<<tab,echo=FALSE,results='asis'>>=
print(xtable(x, caption=paste("Summary of applications"),
             caption.placement="top",
             align=c('l', 'p{1.5in}', rep('c',6))),
             size="footnotesize",
             floating.environment="sidewaystable")
@

\end{document} 
```

请注意，您必须使用 LaTex 包`rotating`。这应该给你这样的东西：

![输出](../Images/f3d6b49516def2388e8c6c5c41ac4ea9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:51:03.920

另一种解决方案是使用一些降价后端（`knitr`或`markdown`包`pander`）并将表格自动拆分为 80 个字符（或其他用户指定的宽度）`pander`。例如：

```
> library(pander)
> res <- structure(list(App = structure(c(3L, 2L, 1L), .Label = c("AppServer", "Db", "Web"), class = "factor"), Group = structure(c(2L, 1L, 1L), .Label = c("Back", "Front"), class = "factor"), Owner = structure(c(1L, 1L, 1L), .Label = "Infrasructure", class = "factor"), Server = structure(1:3, .Label = c("ServerA", "ServerB", "ServerC"), class = "factor"), NumberCPU = c(64L, 120L, 120L), Description = structure(c(1L, 3L, 2L), .Label = c("Front End server to server web traffic", "Hold Web templates to generate dynamic content", "Keeps customer data and login information"), class = "factor"), Cost = structure(1:3, .Label = c("$200,000 ", "$400,000 ", "$500,000 "), class = "factor")), .Names = c("App", "Group", "Owner", "Server", "NumberCPU", "Description", "Cost"), class = "data.frame", row.names = c(NA, -3L))
> pander(res)

----------------------------------------------------
   App     Group      Owner      Server   NumberCPU 
--------- ------- ------------- -------- -----------
   Web     Front  Infrasructure ServerA      64     

   Db      Back   Infrasructure ServerB      120    

AppServer  Back   Infrasructure ServerC      120    
----------------------------------------------------

Table: Table continues below

---------------------------------------
     Description             Cost  
------------------------------ --------
Front End server to server web $200,000
    traffic                        

Keeps customer data and login  $400,000
       information                     

Hold Web templates to generate $500,000
       dynamic content                 
--------------------------------------- 
```

`pandoc`然后可以使用或`pander`直接从 R轻松地将结果转换为 pdf 或 LaTeX 。

# c - 计算插入排序中的步骤数

> ID：15644585
> 
> 赞同：0
> 
> 时间：2013-03-26T18:21:12.290
> 
> 标签：c, insertion-sort

这是插入排序的两个版本，我用伪代码实现一个，一个直接实现。我想知道哪个版本需要更多的步骤和空间（即使是一点空间也很复杂）。

```
void insertion_sort(int a[], int n) {
    int key, i, j;
    for(i = 1; i < n; i++) {
        key = a[i];
        j = i - 1;
        while(j >= 0 && a[j] > key) {
            a[j+1] = a[j];
            j--;
        }
        a[j+1] = key;
    }       
} 
```

和这个

```
insertion_sort(item s[], int n) {
  int i,j;
  for (i=1; i<n; i++) {
    j=i;
    while ((j>0) && (s[j] < s[j-1])) {
      swap(&s[j],&s[j-1]);
      j = j-1;
    }
  }
} 
```

这是示例排序数组 a = {5, 2, 4, 6, 1, 3}。在我看来，第二个版本采取了更多步骤，因为它一个接一个地交换数字，而第一个版本在 while 循环中交换更大的数字，然后交换最小的数字。例如：直到 index = 3，两个版本都采取相同的步骤，但是当 index = 4 时，即交换编号 1，第 2 次比第 1 次采取更多的步骤。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:46:10.813

“步数”不是衡量任何事情的有用指标。

一步是一条线吗？一份声明？一种表达？汇编指令？CPU微操作？

也就是说，您的“步骤”被转换为汇编程序，然后进行优化，生成的指令可能具有不同的（并且可能是可变的）运行时成本。

* * *

您可能会问的明智问题：

## 1 什么是*算法复杂度*？

正如 Rafe Kettler 的评论和 Arpit 的回答中所给出的，这是关于算法如何随着输入大小的增长而扩展

## *2表现*如何

 *如果您想知道哪个更快（对于某些输入集），您应该测量它。

* * *

如果您只想知道哪个执行*更多交换*，为什么不编写一个`swap`每次调用全局计数器时递增的函数并找出答案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:48:52.387

Number of swaps is the wrong term, you should count the number of assignments. swap() expands to three assignments and you therefore usually end up with more assignments in the second version without saving space (you may not have key in the second version, but swap() internally has something similar).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:26:21.900

两个版本都使用两个循环。所以复杂`O(n*n)`的时间。考虑所有其他语句的常量（1）时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T18:46:27.283

让我们逐行分析。我假设交换的复杂度为 3

a) 计算复杂度：（ `3+(n-1)*(1+1+((n-1)/2)*(1+1+1)*(1+1)+1)=1+(n-1)*(3n)=3n^2-3n+1` 我们使用 n/2，因为它似乎是连续最坏情况的平均值）。

内存：3 个整数，+1（for 循环）

b) 计算复杂度：2+(n-1) *(1+((n-1))/2(1+1+1)* (3+1))=2+(n-1)*(6n-5 )=6n^2-11n+7

内存：2 个整数，+交换成本（很可能是额外的 1 个整数）

不计算输入内存，因为在两种情况下都是相同的。希望能帮助到你。*

# matlab - matlab（给定程序所需的简单编辑工作）

> ID：15644593
> 
> 赞同：0
> 
> 时间：2013-03-26T18:21:35.183
> 
> 标签：matlab

下面的程序是选择性重复协议，用于传输随机生成的帧，有时在传输帧时会出现错误。帧总数、窗口大小和帧长度由用户动态给出。如果窗口大小为 3 且帧数为 7，则协议发送第一个生成的三帧，并在接收到第一三帧后发送接下来的三个生成位，最后剩余的第 7 帧在接收到先前发送的帧后发送。然后在完成传输后，收到确认。如果发送第 2 帧有错误，只有在第 2 帧重传后，才会发送下一组三帧。如果帧长度为 4 ，则每帧将有 5 位（帧长度 + 一个奇偶校验位）

```
%while(b==1)
clc;
m=input('Enter the total no of frames:');
n=input('Enter the window size:');
t=input('Enter the length of frames:');
disp(sprintf('\n'));
while(m~=0)
if(m<n)
n=m;
end
for i=1:1:n;
d=randint(1,t);
d(t+1)=rem(sum(d),2);
a(i,1:t+1)=d;
disp(sprintf('Transmitting frame %d :',i));
disp(a(i,1:t+1));
end
p=randint(1,1,[1,n]);
q=randint(1,1,[1,t+1]);
a(p,q)=randint(1,1);
for i=1:1:n
fprintf('Received frame %d:',i);
disp(a(i,1:t+1));
end
f=zeros(1,n);
for i=1:1:n
f(i)=rem(sum(a(i,1:t+1)),2);
if(f(i)==1)
p=i;
end
end
if(f==0)
fprintf('ACKNOWLEDGEMENT RECEIVED\n');
else
fprintf('Frame%d is REJECTED\n',p);
disp('RETRANSMITTING....');
a(p,q)=~a(p,q);
for i=p
fprintf('Received frame %d:',i);
disp(a(i,1:t+1));
end
end
m=m-n;
end 
```

该程序的输出

```
Enter the total no of frames:5
Enter the window size:3
Enter the length of frames:4

Transmitting frame 1 :
     1     1     0     1     1

Transmitting frame 2 :
     1     0     0     1     0

Transmitting frame 3 :
     1     1     0     1     1

Received frame 1:     1     1     0     1     1

Received frame 2:     1     0     0     1     0

Received frame 3:     1     1     1     1     1

Frame3 is REJECTED
RETRANSMITTING....
Received frame 3:     1     1     0     1     1

Transmitting frame 1 :
     0     0     1     1     0

Transmitting frame 2 :
     1     1     0     1     1

Received frame 1:     0     0     1     1     0

Received frame 2:     1     1     0     1     1

ACKNOWLEDGEMENT RECEIVED
>> 
```

我需要将随机生成的帧更改为用户动态，并且对帧的长度没有限制（想要输入不同长度的帧）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:09:04.857

据我了解，您希望用户输入每一帧，并且一帧的长度可能与下​​一帧不同。

如果是这种情况，您可以使用以下代码：

```
clear;
close;
clc;

m=input('Enter the total no of frames:');
n=input('Enter the window size:');
a=-ones(n,1);
max=0;
disp(sprintf('\n'));

while(m~=0)
    if(m<n)
        n=m;
    end

    for i=1:1:n;
        while(1)
            d=input('Enter a frame: ');    %To be input as, for example, [0 1 1 0]
            if((size(d,1)~=1 && size(d,2)~=1) || length(size(d))~=2)
                disp('Invalid input! Frame must be an one dimensional array. Try again.');
                continue;
            else
                break;
            end
        end
        t=length(d);
        if(t>max)
            max=t;
            a_temp=-(ones(n,t+2));
            a_temp(1:size(a,1),1:size(a,2))=a;
            a=a_temp;
        end
        d(t+1)=rem(sum(d),2);
        a(i,1:t+1)=d;
        disp(sprintf('Transmitting frame %d :',i));
        disp(a(i,1:t+1));
    end

    p=[find(a==1);find(a==0)];
    q=ceil(rand()*length(p));
    if(q==0)
        q=1;
    end
    a(q)=randint(1,1);

    for i=1:1:n
        t=find(a(i,:)==-1,1)-2;
        fprintf('Received frame %d:',i);
        disp(a(i,1:t+1));
    end

    f=zeros(1,n);
    for i=1:1:n
        t=find(a(i,:)==-1,1)-2;
        f(i)=rem(sum(a(i,1:t+1)),2);
        if(f(i)==1)
            p=i;
        end
    end

    if(f==0)
        fprintf('ACKNOWLEDGEMENT RECEIVED\n');
    else
        fprintf('Frame%d is REJECTED\n',p);
        disp('RETRANSMITTING....');
        a(q)=~a(q);
        for i=p
            t=find(a(i,:)==-1,1)-2;
            fprintf('Received frame %d:',i);
            disp(a(i,1:t+1));
        end
    end

    m=m-n;
end 
```

## 编辑

为此，您需要`d`上一个问题中的 将上一个问题中的 d 替换为其他内容，例如`d_indices`.

将该行添加`j=1;`到上一个代码的末尾。

现在将当前代码（不带`clear`）添加到先前代码的末尾并进行以下更改：

1.  替换`m=input('Enter the total no of frames:');`为`m=length(d_indices)-1;`。
2.  替换`d=input('Enter a frame: ');`为

> ```
> j=j+1;
> if(j>length(d_indices)
>     break;
> end
> d=x((d_indices(j-1)+1):d_indices(j)); 
> ```

我还没有尝试过，但你应该很高兴。

# ios - 带有 SUBQUERY 的 NSPredicate 不起作用

> ID：15644597
> 
> 赞同：1
> 
> 时间：2013-03-26T18:21:49.790
> 
> 标签：ios, core-data, subquery, nspredicate

我需要用选定的人对我的获取请求进行排序，但它没有返回任何内容

我用 coredata 对象比较了这段代码

```
NSPredicate *peoplePredicate = [NSPredicate predicateWithFormat:@"SUBQUERY(classPeople, $p, $p IN %@).@count == %d", self.selectedPeople, [self.selectedPeople count]]; 
```

这与 nsnumber iD 比较

```
NSPredicate *peoplePredicate = [NSPredicate predicateWithFormat:@"SUBQUERY(classPeople, $p, $p.iD IN %@).@count == %d", self.selectedPeopleiD, [self.selectedPeopleiD count]]; 
```

我有实体类，它有关系人。我有视图控制器，我可以在列表中选择一些人，在选择人对象后添加到数组 self.selectedPeople，所以我需要获取已选择人员的 Class 实体的所有对象

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:10:51.787

因此，您的谓词应如下所示：

```
NSPredicate *peoplePredicate = [NSPredicate predicateWithFormat:@"ANY classPeople IN %@", self.selectedPeople]; 
```

# symfony - Symfony2 Assetic 从控制器内部获取资产 url，而不是模板

> ID：15644598
> 
> 赞同：14
> 
> 时间：2013-03-26T18:21:52.590
> 
> 标签：symfony, assetic

我想将 URL 包含到控制器中我的捆绑包中的一项资产，而不是模板中。

更具体地说，但不是很重要：我使用 obHighChartsBundle 制作了一个 HighChart 图表，并且我必须在我正在制作的图表的某些点上绘制一些特殊图标。因此，我需要图标的 url，该图标位于我的包的资产文件夹中。

是否可以从控制器调用某种资产管理器并获取该资产的正确 URL？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-26T22:21:28.897

您可以调用（$packageName 是可选的）：

```
$this->container->get('assets.packages')->getUrl($path, $packageName); 
```

对于旧的 Symfony 版本，服务被调用`templating.helper.assets`，所以你使用：

```
$this->container->get('templating.helper.assets')->getUrl($path, $packageName); 
```

它的使用方式与 twig 函数相同（实际上这在 twig 函数中被调用）。

# java - 带有 Projections.groupProperty 的休眠条件无法返回完整的休眠对象 (ClassCastException)

> ID：15644602
> 
> 赞同：3
> 
> 时间：2013-03-26T18:22:05.027
> 
> 标签：java, hibernate, hibernate-criteria

我对 Hibernate 比较陌生，在我的 hibernate 类上添加“不同”限制时遇到问题。

```
@Entity
public class TaggedOffer {
   private Long tagged_offers_id;
   private String brand;
   private Long cid;
   private Date created_date;
   //Getter and Setter and more fields
} 
```

以前，我们正在创建一个休眠查询，如下所示：

```
public DetachedCriteria build(final TaggedOfferRequest request) {

        DetachedCriteria criteria = DetachedCriteria.forClass(TaggedOffer.class);

        criteria.add(Restrictions.eq("brand", request.getBrand()));
        criteria.add(Restrictions.in("cid", request.getCids()));

        // sort by date
        criteria.addOrder(Property.forName("createdDate").desc());

        return criteria;
} 
```

这将创建以下（工作）SQL 查询：

```
select
        this_.tagged_offers_id as tagged1_2_3_,
        this_.brand as brand2_3_,
        this_.cid as cid2_3_,
        this_.created_date as created6_2_3_
    from
        site.tagged_offers this_ 
    where
        this_.brand=? 
        and this_.country_code=? 
        and this_.cid in (
            ?, ?
        ) 
    order by
        this_.created_date desc limit ? 
```

棘手的部分来了。我们现在需要确保返回的结果在`cid`字段上是不同的。意思是，返回尽可能多的结果，前提是每条记录都有一个与之关联的唯一 cid。

我在 SQL 中对此进行了研究，似乎最简单的方法就是`group by cid`在查询中添加一个。就休眠标准而言，这基本上是我一直在尝试的：

```
public DetachedCriteria build(final TaggedOfferRequest request) {

        DetachedCriteria criteria = DetachedCriteria.forClass(TaggedOffer.class);

        criteria.add(Restrictions.eq("brand", request.getBrand()));
        criteria.add(Restrictions.in("cid", request.getCids()));

        // sort by date
        criteria.addOrder(Property.forName("createdDate").desc());

        // ** new ** distinct criteria
        criteria.setProjection(Projections.groupProperty("cid"));

        return criteria;
} 
```

这几乎创建了我正在寻找的 SQL，但它稍后会引发类转换异常（因为它只是选择 cid 字段而不是整个对象）。

```
select
    this_.cid as y0_ 
from
    site.tagged_offers this_ 
where
    this_.brand=? 
    and this_.country_code=? 
    and this_.cid in (
        ?, ?
    ) 
    and tagtype1_.tag_type=? 
group by
    this_.cid 
order by
    this_.created_date desc limit ? 
```

还有一个例外：

```
java.lang.ClassCastException: java.lang.Long cannot be cast to com.mycompany.site.taggedoffers.dao.model.TaggedOffer 
```

知道如何使用投影来做我想做的事吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:40:16.087

为您需要的所有列添加投影。

```
 ProjectionList projectionList = Projections.projectionList();
    projectionList.add(Projections.groupProperty("cid"));
    projectionList.add(Projections.property("tagged_offers_id"));
    ...
    criteria.setProjection(projectionList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T09:38:28.973

我怀疑为什么需要在这里使用 group by 而不进行任何聚合计算！！

如果您将 group by 与 projection 一起使用，则 group by 中使用的特定列将再次包含在 fetch sql 中，即使选择语句中已经使用了相同的列。

要映射由于分组而由休眠生成的额外列，您必须在实体类中编写一个字段并将其标记为@Transient，或者您可以使用 setResultTransformer 并映射到另一个类

# jquery - Jquery动画持续时间：运动不够平滑

> ID：15644606
> 
> 赞同：2
> 
> 时间：2013-03-26T18:22:12.903
> 
> 标签：jquery, jquery-animate, smooth

这是我第一次在这里写信。我对 JQuery 动画有一些问题：当持续时间真的很慢（例如，10000）时，动作不够流畅。我的 div 需要一个“自然”的运动。有人知道我的问题的解决方案吗？或者你能告诉我该怎么做吗？谢谢！！！！代码是这样的：

```
function moveFoo(){
    var timeFoo = setInterval(function(){
        var $foo = $("#foo");
        $foo.animate({"top": "-=10px"}, 20000, "linear");
        $foo.animate({"top": "+=10px"}, 20000, "linear");
    }, 1);
};
moveFoo(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:27:01.827

您应该查看 requestanimationframe 和/或使用使用 requestanimationframe 的补间引擎。jQuery 补间引擎中使用的基于计时器的动画效率不高，并且计时器会导致动画不一致。

[https://developer.mozilla.org/en/docs/Web/API/window.requestAnimationFrame](https://developer.mozilla.org/en/docs/Web/API/window.requestAnimationFrame)

# jboss7.x - VMWare ESXI 虚拟机中的 jBoss 缓慢

> ID：15644607
> 
> 赞同：0
> 
> 时间：2013-03-26T18:22:14.233
> 
> 标签：jboss7.x, vmware

我们有一个在 JBoss 7.1.1 中运行的 Java EE 应用程序，我们必须在 VirtualMachines（例如 VMWare ESXI）中运行它。

问题是，当我们在 VM 中运行我们的应用程序时，性能下降了大约 50%。

似乎 GC 疯了......据我所知，当 GC 运行时，“结束”所需的时间比正常情况要长得多，同时阻塞应用程序。

其他人有过这样的经历吗？我可以遵循任何提示、调音或灯光吗？

提前致谢。

* * *

# 编辑

*   JVM 有 Xmx 和 Xms = 1Gb
*   虚拟机有 4Gb 内存
*   Ubuntu 服务器 64
*   甲骨文 JVM 64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:45:34.957

我想说的是，在将您的应用程序移动到具有您发布的配置的 VM 之前，它在 32 位系统和 32 位 jvm 上运行并使用相同的 jvm 参数。

诀窍是您使用 64 位 java 迁移到 64 位，但仍然为您的应用程序分配了相同数量的堆大小，实际上发生的情况是您的应用程序现在拥有的可用内存是以前的一半。64 位 jvm 上的每个对象的大小都是 32 位 jvm 的两倍。

鉴于您的配置，我会建议一些解决方案：

*   将堆大小增加到 2G
*   或使用[压缩的oops](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html)
*   或者安装 32bit jvm

鉴于您的应用程序分配的内存不超过 1.3G，它认为通过安装 32 位 jvm 并使用 -Xms1300m -Xmx1300m 运行可以实现最佳性能。

您甚至可以更进一步，安装 32 位 linux 并安装 32 位 VM。64 位 jvm 仅在您需要超过 1.3G 的堆时才有用，否则只会增加太多开销。

你也可以运行jvm

```
-verbose:gc -XX:+PrintGCDetails 
```

这将向您展示 GC 发生了什么，这可以进一步帮助您调整 jvm。

# python-2.7 - 如何在 CentOS 6 上安装带有 RPM (cx_Oracle) 的软件？

> ID：15644608
> 
> 赞同：0
> 
> 时间：2013-03-26T18:22:23.500
> 
> 标签：python-2.7, centos, yum, cx-oracle, centos6

我有要安装到 CentOS 6 系统上的软件模块的 RPM。我已通过命令“rpm -ivh”将此 RPM 安装到 yum 数据库中。我的理解是，现在 RPM 可用于通过 'yum install ' 安装模块，但这并没有奏效，即当我尝试这样做时，我收到“无需安装”消息。所以我一定没有做对吗？任何人都可以建议吗？

仅供参考，这是我迄今为止尝试过的：

```
$ rpm -ivh cx_Oracle-5.1.2-11g-py27-1.x86_64.rpm
Preparing...                ########################################### [100%]
   1:cx_Oracle              ########################################### [100%]

$ yum search cx_Oracle
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.ash.fastserv.com
 * extras: mirror.symnds.com
 * updates: ftp.linux.ncsu.edu
base                                                     | 3.7 kB     00:00
extras                                                   | 3.5 kB     00:00
updates                                                  | 3.5 kB     00:00
============================ N/S Matched: cx_Oracle ============================
cx_Oracle.x86_64 : Python interface to Oracle

$ yum install cx_Oracle
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.ash.fastserv.com
 * extras: mirror.symnds.com
 * updates: ftp.linux.ncsu.edu
base                                                     | 3.7 kB     00:00
extras                                                   | 3.5 kB     00:00
updates                                                  | 3.5 kB     00:00
Setting up Install Process
Nothing to do

$ yum update cx_Oracle
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.ash.fastserv.com
 * extras: mirror.symnds.com
 * updates: ftp.linux.ncsu.edu
base                                                     | 3.7 kB     00:00
extras                                                   | 3.5 kB     00:00
updates                                                  | 3.5 kB     00:00
Setting up Update Process
No Packages marked for Update 
```

提前感谢您的任何建议，见解等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:53:46.110

您已经安装了该软件包。您使用 rpm 安装 cx_Oracle-5.1.2-11g-py27-1.x86_64.rpm。报告的“cx_Oracle.x86_64”正是`yum search cx_Oracle`您通过 rpm 命令安装在计算机上的那个。

# python - [django]：如何验证来自邮件的新帐户请求？

> ID：15644609
> 
> 赞同：0
> 
> 时间：2013-03-26T18:22:28.853
> 
> 标签：python, django, django-admin, django-users

我有在 Django 中创建新用户的简单表单。

此外，我希望（来自用户）的请求转发到管理员的电子邮件，只有管理员可以启用该帐户。用户必须等待管理员的响应。如果管理员启用该帐户，用户将能够使用该帐户！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:34:43.087

使用 创建用户`is_active = False`，然后您可以轻松地在 django 管理面板上过滤这些用户。或者您可以使用 django`signal`等[`post_save`](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)信号发送电子邮件到管理员的电子邮件，电子邮件可以包含一个激活链接，该链接是唯一用于激活用户的。您可以创建一个单独的模型来保持非激活用户，并为每条记录生成一个随机散列密钥。您可以在发送到管理员电子邮件的激活链接中使用该随机散列密钥（令牌）。

已经有一些应用程序可以让您处理注册，例如[django-registration](https://bitbucket.org/ubernostrum/django-registration/wiki/Home)。但是你的情况有点棘手。因为您希望管理员能够激活这些用户。所以我建议你看一下[django-registration](https://bitbucket.org/ubernostrum/django-registration/src)源代码。它是如此清晰易懂。只需阅读代码，您就会明白这一点。

# c++ - 函数参数类型

> ID：15644611
> 
> 赞同：3
> 
> 时间：2013-03-26T18:22:37.860
> 
> 标签：c++, templates, template-meta-programming

我的代码应该是确定给定函数是否将给定类型作为参数。回答您未来的“做什么”问题，我将很快回答：将其与`boost::enable_if`模板一起使用。

该代码使用 C++11 的 decltype 运算符。我的问题是：是否可以使用 c++03 实现相同的目标？

```
#include <iostream>

template <class F, class P>
struct has_arg_of_type
{
    static bool const value = false;
};

template <class R, class A>
struct has_arg_of_type<R (A), A>
{
    static bool const value = true;
};

template <class R, class T, class A>
struct has_arg_of_type<R (T::*)(A), A>
{
    static bool const value = true;
};

int pisz(int);

class MyClass
{
public:
    void pisz(int);
};

int main(int argc, char *argv[])
{

    std::cout << "MyClass::pisz has the int as an argument? " << has_arg_of_type<decltype(&MyClass::pisz), int>::value << std::endl; // Line 32
    std::cout << "pisz has the int as an argument? ? " << has_arg_of_type<decltype(pisz), int>::value << std::endl;
    std::cout << "pisz has the float as an argument? ? " << has_arg_of_type<decltype(pisz), float>::value << std::endl;

    return 0;

} 
```

错误是：

```
In function 'int main(int, char**)':
Line 32: error: 'MyClass::pisz(int)' cannot appear in a constant-expression 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:11:41.787

我认为您可以通过[Boost.FunctionTypes](http://www.boost.org/doc/libs/1_53_0/libs/function_types/doc/html/index.html)来做到这一点，或者您也可以使用提升类型特征。

```
#include <iostream>
#include <boost/function_types/function_type.hpp>
#include <boost/function_types/parameter_types.hpp>
#include <boost/typeof/std/utility.hpp>

float pisz(int);

class MyClass
{
public:
    void pisz(int);
};

int main(int argc, char *argv[])
{
    typedef BOOST_TYPEOF(&MyClass::pisz) MyClassPisz;
    typedef BOOST_TYPEOF(pisz) Pisz;

    typedef boost::mpl::at_c<boost::function_types::parameter_types<MyClassPisz>, 1>::type MemberFunction;
    typedef boost::mpl::at_c<boost::function_types::parameter_types<Pisz>, 0>::type Function;

    std::cout << "MyClass::pisz has the int as an argument? " << boost::is_same<MemberFunction, int>::value << std::endl;
    std::cout << "pisz has the int as an argument? ? " << boost::is_same<Function, int>::value << std::endl;
    std::cout << "pisz has the float as an argument? ? " << boost::is_same<Function, float>::value << std::endl;

    return 0;
} 
```

# python - 对两个相似模型使用一种形式

> ID：15644616
> 
> 赞同：0
> 
> 时间：2013-03-26T18:22:46.597
> 
> 标签：python, django

我有以下型号：

```
class BaseAddress(models.Model):
    name = models.CharField(max_length=100)
    business_name = models.CharField(max_length=100, blank=True, null=True)
    address = models.CharField(max_length=100, blank=True, null=True)
    address_2 = models.CharField(max_length=100, blank=True, null=True)
    address_3 = models.CharField(max_length=100, blank=True, null=True)
    city = models.CharField(max_length=100, blank=True, null=True)
    state = models.CharField(max_length=2, blank=True, null=True)
    zip_code = models.CharField(max_length=10, blank=True, null=True)
    phone = models.CharField(max_length=30, blank=True, null=True)

    class Meta:
        abstract = True

class ProfileBilling(BaseAddress):
    profile = models.OneToOneField(
        Profile, related_name='billing_info')

class OrderBilling(BaseAddress):
    order = models.OneToOneField(Order, related_name='billing')
    name_on_card = models.CharField(max_length=100)
    #card_type = models.PositiveSmallIntegerField(
    #    choices=CARD_TYPE, default=0)
    #card_number = models.CharField(
    #    max_length=16, default=0)
    expire_month = models.PositiveSmallIntegerField(
        choices=MONTHS, null=True, default=0)
    expire_year = models.PositiveSmallIntegerField(
        choices=YEARS, null=True, default=1960) 
```

当客户输入帐单地址时，我想将其保存在 OrderBilling 中，但我也想将其保存在 ProfileBilling 中作为他们最近的帐单地址。我该怎么做？

当 OrderBilling 和 ProfileBilling 具有大部分相同的字段时，如何使用表单将帐单地址保存在两个不同的表中......？

我如何在 Django 中做到这一点？

这是我的 OrderBilling 表格：

```
class OrderBillingForm(forms.ModelForm):

class Meta:
    model = OrderBilling
    exclude = ('order',)

def __init__(self, *args, **kwargs):
    super(OrderBillingForm, self).__init__(*args, **kwargs)
    self.fields['address'].required = True
    self.fields['city'].required = True
    self.fields['state'] = USStateField()
    self.fields['zip_code'] = us.USZipCodeField()
    self.fields['phone'].required = False
    self.fields['expire_month'].required = False
    self.fields['expire_year'].required = False

def clean(self):
    return self.cleaned_data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:28:10.690

您可以覆盖`save()`方法，但在您的情况下更聪明的方法是[`post_save`](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)为此目的使用信号。

保存后`OrderBilling`，您也可以将其数据保存到`ProfileBilling`。

如果熟悉 post_save 信号，请查看谷歌搜索的一些示例，

喜欢：

*   [https://groups.google.com/forum/?fromgroups=#!topic/django-users/2m88qTrqnM8](https://groups.google.com/forum/?fromgroups=#!topic/django-users/2m88qTrqnM8)
*   [http://www.djangofoo.com/85/signal-connect-disconnect-django-signals](http://www.djangofoo.com/85/signal-connect-disconnect-django-signals)
*   ETC...

然后在您的 post_save 接收器|回调函数中轻松获取`OrderBilling`实例

```
orderbil_instance = kwargs['instance'] 
```

并根据其数据创建您的 ProfileBilling

```
ProfileBilling.objects.create(name=orderbil_instance.name, ....) 
```

类似于`post_save`信号接收器的东西

```
def do_something(sender, **kwargs):
    # Getting OrderBilling instance which get saved just now
    orderbil_instance = kwargs['instance']
    # Save the data into new ProfileBilling
    ProfileBilling.objects.create(name=orderbil_instance.name, ....) 
```

# android - 片段的 oncreateView() 中的 NullPointerException

> ID：15644617
> 
> 赞同：11
> 
> 时间：2013-03-26T18:22:49.757
> 
> 标签：android, android-fragments, nullpointerexception, android-tabhost

下面的代码显示了添加片段的部分活动。

* * *

```
 FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragment_container, srkt_frag);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();

    TabSpec specs1=mTab.newTabSpec("tag1");
    specs1.setContent(R.id.fragment_container);
    specs1.setIndicator("SRK/T");
    mTab.addTab(specs1); 
```

* * *

mTab 是 TabHost，其中 srkt_frag 显示为内容。片段类如下所示

* * *

```
public class Srkt_x extends Fragment 
{
    @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            View view=inflater.inflate(R.layout.activity_srkt_x,container,false);
            TextView text = (TextView) getView().findViewById(R.id.srkt_power);
            Float result=getArguments().getFloat("RESULT");
            text.setText(String.valueOf(result));
            return view;

        }

} 
```

* * *

执行项目后，我在第 21 行得到 nullpointerexception，即

```
TextView text = (TextView) getView().findViewById(R.id.srkt_power); 
```

我的 xml 文件如下所示

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"

tools:context=".Srkt_x" >

<ScrollView
    android:id="@+id/srkt_scrollView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@color/Black" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="433dp" >

        <TextView
            android:id="@+id/srkt_power"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/iolpower"
            android:layout_toRightOf="@+id/iolpower"
            android:clickable="false"
            android:ems="10"
            android:enabled="false"
            android:fadingEdge="horizontal"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="center|left"
            android:longClickable="false"
            android:paddingTop="10dp"
            android:textColor="@color/DeepSkyBlue"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/iolpower"
            android:layout_width="100dp"
            android:layout_height="30dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="16dp"
            android:layout_marginTop="20dp"
            android:gravity="bottom|center"
            android:textColor="@color/White"
            android:inputType="text"
            android:text="@string/power"
            android:textSize="20sp"
            android:visibility="visible" />

        <TableLayout
            android:layout_width="228dp"
            android:layout_height="match_parent"
            android:layout_below="@+id/srkt_power"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="33dp"
            android:paddingTop="10dp" >

            <TableRow
                android:id="@+id/srkttableRow1"
                android:layout_height="wrap_content"
                android:background="@color/SkyBlue"
                android:orientation="vertical"
                android:showDividers="middle" >

                <TextView
                    android:id="@+id/iolCol"
                    android:layout_height="wrap_content"
                    android:layout_gravity="left"
                    android:layout_weight="1"
                    android:background="@color/SkyBlue"
                    android:gravity="center"
                    android:text="@string/iol"
                    android:textColor="@color/White"
                    android:textSize="20sp" />

                <TextView
                    android:id="@+id/refCol"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_weight="1"
                    android:background="@color/SkyBlue"
                    android:gravity="center"
                    android:text="@string/refr"
                    android:textColor="@color/White"
                    android:textSize="20sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow2"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd2"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref2"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow3"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd3"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref3"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow4"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd4"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref4"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow5"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd5"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref5"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow6"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd6"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref6"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow7"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd7"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:background="@color/DeepSkyBlue"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref7"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:background="@color/DeepSkyBlue"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow8"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd8"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref8"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow9"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd9"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref9"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow10"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd10"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref10"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow11"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd11"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref11"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>

            <TableRow
                android:id="@+id/srkttableRow12"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/srktrnd12"
                    android:layout_gravity="left|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/srktref12"
                    android:layout_gravity="right|center"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:textColor="@color/White"
                    android:textSize="15sp" />
            </TableRow>
        </TableLayout>

    </RelativeLayout>
</ScrollView> 
```

* * *

日志文件如下所示

* * *

```
 03-26 23:49:22.333: D/AndroidRuntime(497): Shutting down VM
03-26 23:49:22.333: W/dalvikvm(497): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-26 23:49:22.353: E/AndroidRuntime(497): FATAL EXCEPTION: main
03-26 23:49:22.353: E/AndroidRuntime(497): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Menu}: java.lang.NullPointerException
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.os.Looper.loop(Looper.java:123)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-26 23:49:22.353: E/AndroidRuntime(497):  at java.lang.reflect.Method.invokeNative(Native Method)
03-26 23:49:22.353: E/AndroidRuntime(497):  at java.lang.reflect.Method.invoke(Method.java:507)
03-26 23:49:22.353: E/AndroidRuntime(497):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-26 23:49:22.353: E/AndroidRuntime(497):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-26 23:49:22.353: E/AndroidRuntime(497):  at dalvik.system.NativeStart.main(Native Method)
03-26 23:49:22.353: E/AndroidRuntime(497): Caused by: java.lang.NullPointerException
03-26 23:49:22.353: E/AndroidRuntime(497):  at com.example.iolcalci.Srkt_x.onCreateView(Srkt_x.java:21)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:551)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.Activity.performStart(Activity.java:3791)
03-26 23:49:22.353: E/AndroidRuntime(497):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1620)
03-26 23:49:22.353: E/AndroidRuntime(497):  ... 11 more 
```

* * *

我无法找出问题。任何解决方案？

**编辑：** 第 22 行：Float result=getArguments().getFloat("RESULT");

**编辑 2：**设置参数，如下所示：

```
IOLPower_srkt=Srkt();

                Bundle srkt_bundle=new Bundle();
                srkt_bundle.putFloat("RESULT", IOLPower_srkt);

                srkt_frag.setArguments(srkt_bundle); 
```

* * *

这里srkt()返回float值查看详细代码

* * *

```
IOLPower_srkt=Srkt();
            Bundle srkt_bundle=new Bundle();
            srkt_bundle.putFloat("RESULT", IOLPower_srkt);
            srkt_frag.setArguments(srkt_bundle);

            IOLPower_bink=Binkhorst();
            Bundle bink_bundle=new Bundle();
            bink_bundle.putFloat("RESULT", IOLPower_bink);
            bink_frag.setArguments(bink_bundle);

            IOLPower_srk2=Srk2();
            if((Math.ceil(IOLPower_srk2)-IOLPower_srk2)>0.5){
                srk2_rnd=(float) Math.floor(IOLPower_srk2);
            }else{
                srk2_rnd=(float) Math.ceil(IOLPower_srk2);
            }
            Bundle srk2_bundle=new Bundle();
            srk2_bundle.putFloat("RESULT", srk2_rnd);
            srk2_frag.setArguments(srk2_bundle);

            IOLPower_holl=Holladay();
            Bundle holl_bundle=new Bundle();
            holl_bundle.putFloat("RESULT", IOLPower_holl);
            holl_frag.setArguments(holl_bundle);

        }
            });

    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragment_container, srkt_frag);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();

    TabSpec specs1=mTab.newTabSpec("tag1");
    specs1.setContent(R.id.fragment_container);
    specs1.setIndicator("SRK/T");
    mTab.addTab(specs1);

    TabSpec specs2=mTab.newTabSpec("tag2");
    specs2.setContent(R.id.fragment_container);
    specs2.setIndicator("SRK II");
    mTab.addTab(specs2);

    TabSpec specs3=mTab.newTabSpec("tag3");
    specs3.setContent(R.id.fragment_container);
    specs3.setIndicator("HOLLADAY");
    mTab.addTab(specs3);

    TabSpec specs4=mTab.newTabSpec("tag4");
    specs4.setContent(R.id.fragment_container);
    specs4.setIndicator("BINKHORST");
    mTab.addTab(specs4); 
```

* * *

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T18:36:49.733

如何解决：你的日志线索是`Caused by: java.lang.NullPointerException at com.example.iolcalci.Srkt_x.onCreateView(Srkt_x.java:21)`

它说有一个`Null Pointer Exception`at`Srkt_x.java line 21`所以转到第 21 行，看看哪个值等于`null`并抛出异常。

`TextView text = (TextView) getView().findViewById(R.id.srkt_power);`您的代码的问题`getView()`在于`null`它尚未创建的位置。

正确的代码是：

```
public class Srkt_x extends Fragment 
{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view=inflater.inflate(R.layout.activity_srkt_x,container,false);

        // use view instead of getView()
        TextView text = (TextView) view.findViewById(R.id.srkt_power);
        if(getArguments() != null) {
            Float result=getArguments().getFloat("RESULT");
            text.setText(String.valueOf(result));
        } else {
            text.setText("result not included");
        }
        return view;

    }

} 
```

您必须使用膨胀视图才能通过 id 获取所需的 TextView。

在执行结束`onCreateView`时`return view;`，`getView()`将返回`view`值而不是`null`.

* * *

[如Fragment](http://developer.android.com/reference/android/app/Fragment.html)的 Android 文档页面中所建议的，请参阅`TitlesFragment`和`DetailsFragment`，使用类似于以下代码的内容来设置参数

```
public static Srkt_x newInstance(Float result) {
    Srkt_x f = new Srkt_x ();

    // Supply index input as an argument.
    Bundle args = new Bundle();
    args.putFloat("RESULT", result);
    f.setArguments(args);

    return f;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T18:26:24.650

而不是`getView()`使用你刚刚膨胀的视图，因为视图还没有返回，你会得到一个 NPE 可能是这样的：

```
View view=inflater.inflate(R.layout.activity_srkt_x,container,false);
TextView text = (TextView) view.findViewById(R.id.srkt_power);

//*** do something***

return view; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T18:25:55.160

代替

```
TextView text = (TextView) getView().findViewById(R.id.srkt_power); 
```

和

```
TextView text = (TextView) getActivity().findViewById(R.id.srkt_power); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T18:40:00.953

您的错误和困惑的原因是由于不了解[Android 事件循环的工作原理。](http://mattias.niklewski.com/2012/09/android_event_loop.html)

您是`getView()`在片段还没有片段的时候调用的。`onCreateView`片段只有在完成运行后才会有视图。要点`onCreateView`是“让片段实例化其用户界面视图”。

你应该这样做`getActivity().findViewById`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-01T18:16:34.203

尝试在方法中做你需要做的事情`onViewCreated()`，你应该覆盖它。不要忘记打电话`super()`给它。

# wpf - Visual Tree Finder 在搜索数据网格时返回 null

> ID：15644620
> 
> 赞同：1
> 
> 时间：2013-03-26T18:23:15.313
> 
> 标签：wpf, wpfdatagrid, tabcontrol, tabitem

我有选项卡控件，它有很多选项卡项，我在关闭选项卡项时检查数据网格项计数。第一次它工作正常（我的意思是在第一次迭代中）。关闭一个选项卡项目后，在第二次迭代中，sellDtg 为空。有谁知道为什么会这样？我担心这是 UI 问题，布局没有被刷新。请帮助我或指示方向。

```
while (tc.HasItems) 
        {
            TabItem ti = tc.SelectedItem as TabItem;
            if (ti.Header == "Продажа") 
            {
                Microsoft.Windows.Controls.DataGrid sellDtg = FindChild<Microsoft.Windows.Controls.DataGrid>(tc, "SellDataGrid");
                if (sellDtg.Items.Count > 0)
                {
                    Sell sl = new Sell();
                    if (Sell.basketfromSellDateListBox == false)
                    {
                        sl.ClearBasket(sellDtg);
                        Sell.ClearFromSellBasket((int)sellDtg.Tag);
                    }
                }
            }
            if (ti != null)
                tc.Items.Remove(ti);

        } 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:10:10.170

我在下面写了一个简单的`FindChildLogical`函数`LogicalTreeHelper`：

```
public static T FindChildLogical<T>(DependencyObject parent, string childName)
           where T : DependencyObject
        {
            if (parent == null) return null;
            var child = LogicalTreeHelper.FindLogicalNode(parent, childName);

            return (T)child;
        } 
```

你称之为：

```
Microsoft.Windows.Controls.DataGrid sellDtg = FindChildLogical<Microsoft.Windows.Controls.DataGrid>(ti, "SellDataGrid"); 
```

我希望它能把你带到你想要的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:58:56.410

我将假设您的`FindChild`方法使用`VisualTreeHelper`来查找其子级。

在第一次迭代中，`TabItem`'s`Content`已经通过了布局传递，并且是可见的。这意味着`TabItem`'`Content`将在可视化树中。

但是，对于其他选项卡项，它们`Content`尚未通过布局通道（仅在选择其父级时才将其添加到可视化树中，然后必须通过布局/渲染通道），并且不会在视觉树中。

有几种方法可以将`TabItem`未通过布局传递的子内容作为选定选项卡：

1）您可以尝试使用`LogicalTreeHelper`来查找`Grid`您正在寻找的（并且您可能必须搜索 的`Content`，`TabItem`而不是`TabControl`）。

2）您可以将代码从while循环中取出，并以Loaded优先级对调度程序进行回调：

```
void RemoveAllItems()
{
    if (!tc.HasItems) return;

    TabItem ti = tc.SelectedItem as TabItem;
    if (ti.Header == "Продажа") 
    {
        var sellDtg = FindChild<Microsoft.Windows.Controls.DataGrid>(tc, "SellDataGrid");
        if (sellDtg.Items.Count > 0)
        {
            Sell sl = new Sell();
            if (Sell.basketfromSellDateListBox == false)
            {
                sl.ClearBasket(sellDtg);
                Sell.ClearFromSellBasket((int)sellDtg.Tag);
            }

            if (ti != null)
                tc.Items.Remove(ti);
        }
    }

    Dispatcher.BeginInvoke(new Action(RemoveAllItems), DispatcherPriority.Loaded);
} 
```

如果您使用第二种方法，您可能会看到一次删除一个标签项，这可能是您不想看到的。

# sql - VB.NET 和 IBMi SQL dr.hasrows 没有显示行（我知道存在）

> ID：15644631
> 
> 赞同：0
> 
> 时间：2013-03-26T18:24:07.687
> 
> 标签：sql, vb.net

我遇到了一个问题，我正在使用 dr.hasrows If 语句，它返回为假（当我 100% 肯定时，它是真的）。我对 VB 和（IBM）SQL 都很陌生，但我过去曾让这个命令正常工作。

```
Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAdd.Click
    Dim SQL As String = "Select * from testlib.hrcontra where @HRAART=HRAART and @HRASEC=HRASEC and @HRAPAR=HRAPAR and @HRASEQ=HRASEQ and @HRARED=HRARED"
    Using cmd As New iDB2Command(SQL, CN)
        cmd.DeriveParameters()
        cmd.Parameters("@HRAART").Value = SCRHRAART
        cmd.Parameters("@HRASEC").Value = SCRHRASEC
        cmd.Parameters("@HRAPAR").Value = SCRHRAPAR
        cmd.Parameters("@HRASEQ").Value = SCRHRASEQ
        'cmd.Parameters("@HRARED").Value = SCRHRARED
        Try
            Using dr As iDB2DataReader = cmd.ExecuteReader
                dr.Read()
                If dr.HasRows = True Then
                    MsgBox("Table already exists!")
                    Exit Sub
                End If
            End Using
        Catch ex As iDB2Exception
            Form1.HandleError("An error occurred on cmd.ExecuteReader()", ex)
            Exit Sub
        End Try
    End Using 
```

我是否需要确定使用所有字段（甚至非键）？或者，我可以在这种情况下使用 4 个关键字段（这是目标）。我已经尝试从 SQL 和 VB.net 角度来解决解决方案，但无处可去。e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:06:38.990

HOLY CRAP，你让我重新检查 SQL 并意识到我正在比较我的 SQL 中的 HRARED。我从 SQL 命令中删除了它，现在它可以工作了！

谢谢你，史蒂夫！

**解决方案：仔细检查以确保您的 SQL 和 VB 匹配，孩子们！**

# visual-studio-2012 - 如何确定是否为 TFS 构建定义执行了 MSBUILD 参数

> ID：15644635
> 
> 赞同：6
> 
> 时间：2013-03-26T18:24:21.737
> 
> 标签：visual-studio-2012, tfs, msbuild, build-agent

我使用的是 Team Foundation Service 2012，内部托管了一个构建控制器，因此我可以将应用程序部署到我们的 Web 服务器。我设置了构建定义，并使用了我的调试配置，并提供了以下 MSBUILD 参数。

```
/p:DeployOnBuild=true /p:DeployTarget=MSDeployPublish /p:MSDeployPublishMethod=WMSVC /p:MSDeployServiceUrl=https://myserversname:8172/msdeploy.axd /p:AllowUntrustedCertificate=true /p:DeployIisAppPath="somesite.ourdomain.com" /p:Username=na\svc-users /p:Password=PASS /p:VisualStudioVersion=11.0 
```

该解决方案构建得很好，我没有收到任何警告或错误。当我去我的部署服务器时，应用程序是空的。我已经设置了 Web 应用程序文件夹和 inetsrv 文件夹的权限。我还安装/配置了 Web 部署。如果我没有返回任何错误，我怎么知道我的部署出了什么问题？我已经检查了构建服务器和部署服务器上的事件日志，都没有任何错误或警告。我也可以从我的开发机器上进行发布，它可以完美地使用完全相同的参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T15:40:07.437

将这两个文件夹及其内容从您的开发环境复制到构建服务器：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications 
```

这些文件夹是通过 Visual Studio 2012 发布引起的依赖项。此依赖项在 .sln 文件中引用。

不幸的是，这意味着 web 部署正在静默失败。

或者，您可以在构建服务器上安装 Visual Studio，但这会浪费许可证。

# java - java存储5/6静态相关信息的最佳方式

> ID：15644637
> 
> 赞同：2
> 
> 时间：2013-03-26T18:24:23.083
> 
> 标签：java, static, constants

我正在尝试优化一些代码，其中有 6 个公式，每个公式都返回一个 double。每个公式只有一行长，有一个标题和一个解释（两个字符串）。

```
textOutput.setString("Formula A: " + formulaResult + " explanation of formula... " ); 
```

当我注意到公式结果、公式标题和解释被手动添加到字符串中以显示输出时，我认为有一种更简单、更整洁的方法。

我宁愿不创建一个类（带有 2 个静态字符串）和一个单行公式。这样做的原因是可能会添加一些新公式，而将来可能会删除一些。

我想如果一个 XML 文件包含 6 个左右的公式，其中包含两个字符串的字段，并且带有双精度的公式很容易实现，我可以看一下 - 但也许这一步太远了。

# paypal - 描述贝宝购物车上的送货服务？

> ID：15644639
> 
> 赞同：0
> 
> 时间：2013-03-26T18:24:27.313
> 
> 标签：paypal

我将变量传递给贝宝购物车（使用 api 和贝宝支付标准）。我可以通过运费，但是如何，或者是否可以在贝宝表格上描述运输方式？我一辈子都找不到这是在哪里或如何完成的。

例如，我的小部件.... 1 美元的运费和处理费.... 12 美元

我想要什么：

我的小部件.... $1 运费和手续费....$12 (UPS Ground)

感谢您的任何意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:40:46.490

不完全确定是否可以将运输提供商传递给 PayPal。您可能可以将其作为单独的变量或某种类型的自定义变量传递。如果您只有一个运输提供商，您也许可以执行以下操作

1.  登录您的贝宝账户
2.  转到**个人资料 > 我的销售工具**
3.  在运送我的物品下方，单击与“运送偏好”对齐的**更新按钮**
4.  选择您的默认承运商，然后按**保存**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:43:18.663

您可以忽略运输描述/供应商。但是，该功能仅适用于 Express Checkout 和网站付款标准（购物车上传方法）。您将在使用即时更新 API 时使用它。您可以在开发人员指南中找到有关此内容的更多信息，这里有一个部分[显示](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables#id09CA80W0Z5Z)您需要通过购物车上传代码传递哪些变量。

# properties - Extjs 配置选项与属性

> ID：15644640
> 
> 赞同：3
> 
> 时间：2013-03-26T18:24:27.980
> 
> 标签：properties, config, extjs3

Java 类具有用于操作这些属性的属性和方法。ExtJS 类具有属性、方法和`configOptions`. 从概念上讲，和 属性有什么
区别？`configOptions`为什么我们两者都需要？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T20:39:42.000

## 据我了解……</h2>

> **configs** - 在定义类的行为的构造函数中传递，配置不应在运行时更改，因为它不会有任何影响，假设您需要为面板指定标题，那么您可以添加一个配置`{ title : 'some title' }`，例如将被面板用于在渲染时设置面板的标题，但之后，即使您尝试更改标题，也无法通过简单地更改该配置选项来更改属性。
> 
> **properties** - 用于存储对该类有用的信息，这通常不通过构造函数传递，但应该具有 getter 和 setter 方法，您可以在运行时更改属性（如果定义了 setter 方法）并且类对象应该检测到这一点更改，也可以有只读属性，这些属性也由类对象修改，但我们不应该全部更改。

## 更多信息

> ### [Sencha：属性与配置，在 Ext 4 文档中](http://www.sencha.com/forum/showthread.php?172367-Properties-vs-Configs-in-the-Ext-4-Documentation&p=710874&viewfull=1#post710874)
> 
> 我对这个问题的回答有点简单化和理想化。恐怕试图给出一个涵盖所有细节的完整答案更有可能增加混乱而不是澄清情况。
> 
> 配置选项用于在创建对象时对其进行配置。在实例化之后尝试将它们设置为对象的属性通常不会有任何效果。

```
Ext.create('Ext.panel.Panel', {
    // config options go here
}); 
```

> 一个对象将有很多属性，但只有“属性”部分中列出的那些才应该被视为公共属性。虽然没有什么可以阻止您访问私有属性，但您只能将其作为最后的手段，尽量使用记录在案的方法来操作它们。

```
// rendered is a public property used to indicate whether the panel has been rendered
if (panel.rendered) {
    // could just do panel.el but that isn't a public property, so use getEl instead
    var el = panel.getEl();
    ...
} 
```

> 线条变得模糊的一个原因是对象通常像这样将它们的配置复制到自己身上：

```
Ext.apply(this, config); 
```

> 这导致所有配置选项成为私有属性，至少在最初是这样。然后，内部类可以适当地操作这些属性，但从外部访问这些属性是违反封装的，应该避免。

# visual-c++ - “ESP 的值未在函数调用中正确保存。” 即使离开

> ID：15644642
> 
> 赞同：0
> 
> 时间：2013-03-26T18:24:31.077
> 
> 标签：visual-c++, assembly, x86

尝试调用在程序集中定义的方法时，我收到错误*“ESP 的值未在函数调用中正确保存。”* ，使用 Visual Studio 2012。查看其他问题，一个共同因素是提到程序集可能没有`LEAVE`每个标签末尾的说明。

我收到此错误，但使用以下代码，其中包含`LEAVE`指令。

```
section .bss
    vs: resb 13 ; 12-byte vendor string + NULL char
    ns: resb 49 ; 48-byte proc. name + NULL char

section .text

global _meta_vendor
global _meta_procname

_meta_vendor:
    push ebp
    mov ebp, esp
    mov eax, 0h
    cpuid
    mov [vs], ebx
    mov [vs + 4], edx
    mov [vs + 8], ecx
    mov byte [vs + 12], 0h
    mov eax, vs
    leave
    ret

_meta_procname:
    push ebp
    mov ebp, esp
    mov eax, 80000002h
    cpuid

    mov [ns], eax
    mov [ns + 4], ebx
    mov [ns + 8], ecx
    mov [ns + 12], edx
    mov eax, 80000003h
    cpuid
    mov [ns + 16], eax
    mov [ns + 20], ebx
    mov [ns + 24], ecx
    mov [ns + 28], edx
    mov eax, 80000004h
    cpuid
    mov [ns + 32], eax
    mov [ns + 36], ebx
    mov [ns + 40], ecx
    mov [ns + 44], edx
    mov byte [ns + 48], 0h
    mov eax, ns
    leave
    ret 
```

然后，这些标签的函数原型位于一个仅包含以下内容的头文件中：

```
#include <cstdint>

extern "C" {
    char* meta_vendor();
    char* meta_procname();
} 
```

关于我为什么收到此错误的任何见解？

请注意，如果我在出现的弹出窗口上单击“继续”，则会出现预期值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:54:07.260

The problem was solved by adding `push ebx` and `pop ebx` as is shown below:

```
_meta_vendor:
    push ebp
    mov ebp, esp
    push ebx

    ; code...

    pop ebx
    leave
    ret 
```

# containers - Docker 什么时候推出？

> ID：15644643
> 
> 赞同：4
> 
> 时间：2013-03-26T18:24:32.770
> 
> 标签：containers, dotcloud, lxc, docker

我需要一个工具来将异构负载封装在标准容器中，并在任何服务器上运行它们，并保证隔离和可重复性。

Docker什么时候上线？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T19:26:19.197

它已在几分钟前启动！[http://docker.io/](http://docker.io/)

您可以通过 IRC #docker @freenode 联系团队。

# mysql - 如何在 Objective C Mysql 客户端中设置 mysql_protocol_tcp

> ID：15644646
> 
> 赞同：0
> 
> 时间：2013-03-26T18:24:43.287
> 
> 标签：mysql, ios, ssh, port, forward

我下载了 Karl Kraft 的 MySQL 源代码和库，并为 iOS 6 构建了一个 mysql 客户端库。它第一次在本地 mysql 数据库上运行良好。甚至可以很好地处理 blob 数据。

下一步是移植到远程数据库。在下载了各种库并扯掉了我的头发后，我去寻找一个打包的解决方案。

我下载了 Chilkat 的 SSH Tunnel 库（30 天免费试用——149 美元——物有所值）。这也是第一次。在没有构建、没有链接、没有编译、没有为 i386 blah blah blah 找到符号的日子和发呆之后，这是一种乐趣！

好的，这是踢球者。我现在想使用远程数据库。当我在防火墙后面的数据库机器上通过 ssh 端口 22 将 3306 ssh 端口转发到 3306 时。现在我关掉mysqld，我的主机是localhost 3306端口。我的mysql有点小问题。

UNIX/MAC 机器上客户端的默认启动是在 localhost 上寻找套接字连接。

我收到以下错误：

> 错误：无法通过套接字“/tmp/mysql.sock”连接到本地 MySQL 服务器 (38)

我需要 mysql 的 TCP 协议启动选项。使用命令行，很容易 --protocol=TCP。

使用 iOS 客户端库，这并不明显。我进行了搜索，在 mysql.h 中我们有 mysql_protocol_type 和常量 MYSQL_PROTOCOL_DEFAULT、MYSQL_PROTOCOL_TCP 等。

我缺少的知识是如何在 Objective C 中以编程方式设置选项。

有一个服务器对象只定义了参数（服务器、名称、端口、用户名、密码），下一个对象是一个调用 mysql_init() 的连接对象。有没有人知道如何做到这一点？

顺便说一句：Karl Kraft 和 ChilKat 的那个人应该为后代保留他们的血液。他们为我节省了很多时间。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:56:27.397

我花了一段时间才弄清楚这一点。对于 MySQL 客户端，如果您指定连接到 'localhost'，它会尝试连接位于 /tmp/mysql.sock 或 /var/lib/mysql.sock 的 UNIX 套接字。但是，如果您将 localhost 指定为 127.0.0.1，则它使用等效于 --protocol=TCP 的 TCP 协议进行连接。

# ios - 在tableview ios6.1中加载图像

> ID：15644647
> 
> 赞同：0
> 
> 时间：2013-03-26T18:24:45.980
> 
> 标签：ios, ios6, uiimageview, uitableview

如何在 uitableview ios6.1 中加载图像。

我目前正在使用 **SDWebImage** [https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)并且它可以工作。但有时它不会加载图像。

有没有比我正在使用的库更好的库？我是 ios 的初学者，它对我有很大帮助。

提前致谢。

这是我现在使用的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:MyIdentifier] autorelease];
    }

    // Here we use the new provided setImageWithURL: method to load the web image
    [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                   placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

    cell.textLabel.text = @"My Text";
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:38:40.857

我将其放入答案中，因为评论太长了：

SDWebImage 包在缓存方面非常强大 - 尤其是磁盘缓存，这在 iOS 中可能有点麻烦（不同的操作系统版本支持不同级别/类型的缓存）。SDWebImage 还提供了很多很好的功能——你可以在他们的 GitHub 页面上看到要点（它是顶部的项目符号列表）。

如果它只是你所追求的 UIImageView 类别（它提供了`setImageWithURL:placeholderImage:`方法），那么一些人（我想说'大多数'，但我不能用数据/统计数据备份它）人们使用 AFNetworking，因为他们更有可能'已经在使用它作为他们的网络堆栈。我们的生产应用程序使用 AFNetworking + SDWebImage，因为我们需要广泛的 AFNetworking 功能，还需要磁盘缓存。

哦，关于未下载的图像 - 可能是网络问题。您没有收到错误并且应用程序没有崩溃的事实几乎是 SDWebImage 添加的功能的重点。实现类似的方法需要处理错误情况（网络错误、未经授权和错误的 URL），并且在不阻塞主线程的情况下更新 UIImageView，所有这些都可能非常复杂，不仅对于初学者，对于中级程序员也是如此. 该功能看起来很简单——下载图像，使用占位符，并在图像到达时更新——但这绝对是一项不平凡的任务。

# c# - 将 UserControl 动态设置为 Listbox DataTemplate body

> ID：15644649
> 
> 赞同：1
> 
> 时间：2013-03-26T18:25:04.407
> 
> 标签：c#, wpf, xaml, listbox, datatemplate

我有以下设置：

```
<ListBox ItemSource="{Binding Targets}">
    <ListBox.ItemTemplate>
        <DataTemplate>
          <view:ViewName />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我想要完成的是动态决定在运行时使用哪个视图，基于`DataContext`. `ListBox`简单来说，我想替换`<view:ViewName>`为返回正确视图的数据绑定。

我使用 MEF 为我的应用程序提供插件，这些插件可能需要提供自定义视图以在适当时显示项目。在设计时，我不会知道所有可能的视图类型（它们可能是从 DLL 动态加载的），所以简单的`DataTemplateSelector`不会做。

我已经研究了解决方案，但结果是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:10:00.703

由于要根据绑定值更改模板，因此可以使用 a来`DataTrigger`确定`ContentTemplate``ListBoxItem`

```
<Style TargetType="{x:Type ListBoxItem}">
    <Setter Property="ContentTemplate" Value="{StaticResource DefaultTemplate}"/>
    <Style.Triggers>
        <DataTrigger Property="{Binding SomeProperty}" Value="A">
            <Setter Property="ContentTemplate" Value="{StaticResource TemplateA}"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

我发现这比使用 a 更好，`DataTemplateSelector`因为如果绑定属性发生变化，它会重新评估，而 a`DataTemplateSelector`不会。

如果要根据对象类型更改模板，可以使用 Implicit `DataTemplates`。这些是`DataTemplates`定义 a `DataType`，但 no的`x:Key`，它们将在 WPF 尝试绘制指定类型的对象时使用。

例如，如果您在`<X.Resources>`某处定义了此模板

```
<DataTemplate DataType="{x:Type models:ActionA}">
    <views:ActionAView />
</DataTemplate> 
```

然后，您可以将 Model 对象直接插入 UI，WPF 将使用您指定的模板绘制它

```
<ContentControl Content="{Binding SomeIActionObject}" />

<ItemsControl ItemsSource="{Binding CollectionOfIActionObjects}" /> 
```

**更新**

您提到您将允许用户使用使用 MEF 导入的其他模板创建模块，因此在这种情况下，您最好使用[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)来查找其中的匹配模板`Application.Resources`

例如，如果绑定值等于`"A"`，则转换器可能会搜索`Application.Resources`名为的模板并将`"TemplateA"`其返回给绑定

```
<Style TargetType="{x:Type ListBoxItem}">
    <Setter Property="ContentTemplate" 
            Value="{Binding SomeProperty, 
                Converter={StaticResource MyTemplateConverter}}"/>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:34:55.903

使用[这篇文章](http://www.codeproject.com/Articles/444371/Creating-WPF-Data-Templates-in-Code-The-Right-Way)`DataTemplateManager`中的您可以执行以下操作：

```
DataTemplateManager.RegisterDataTemplate<ViewModelType1, ViewType1>();
DataTemplateManager.RegisterDataTemplate<ViewModelType2, ViewType2>();
DataTemplateManager.RegisterDataTemplate<ViewModelType3, ViewType3>(); 
```

然后你会`ItemTemplate`从 ListBox 中删除：

```
<ListBox ItemSource="{Binding Targets}"/> 
```

在 ListBox ViewModel 中，您可以：

```
public void AddTargets()
{
    Targets.Add(new ViewModelType1());
    Targets.Add(new ViewModelType2());
    Targets.Add(new ViewModelType3());
} 
```

然后，`DataTemplate`WPF 会自动使用 each 来渲染每个对应的 ViewModel。

另请注意，您可以`DataTemplateManager.RegisterDataTemplate()`在显示 ListBox 之前随时调用，因此理论上您可以在加载 MEF 部件时这样做。

编辑：

根据您的评论，您可以创建一个带有 ContentPresenter 的 DataTemplate 以根据 ViewModel 中的属性显示所选视图：

```
<DataTemplate DataType="{x:Type local:TargetViewModel}">
    <ContentPresenter x:Name="MainContentPresenter" Content="{Binding}" ContentTemplate="{Binding YourProperty, Converter=SomeConverter}"/> 
```

在 SomeConverter 中，您应该使用与帖子中演示的相同的技术来动态生成 DataTemplate。

# python - functools.partial 可以用来绑定任意位置参数吗？

> ID：15644650
> 
> 赞同：5
> 
> 时间：2013-03-26T18:25:05.917
> 
> 标签：python

假设您想定义一个以任意顺序设置位置参数的*部分*，即您想将*部分*应用到*str.split*以固定第二个和第三个参数。所需的结果与以下内容相同：

```
lambda s: str.rsplit(s, SEP, 1) # SEP given. 
```

（我使用`str.rsplit(s...`而不是`s.rsplit(...`使这一点更清楚）。

*使用functools.partial*的一些近似值是：

```
partial(str.rsplit, sep=SEP, maxsplit=1) # SEP given 
```

但是*str.rsplit*不使用关键字参数，只使用位置参数。

如何部分解决这些论点？lamda 和 wrappers 是唯一的选择吗？

如果您想内联定义函数，包装器很丑陋，例如为函数的参数定义它。*Lambda*是这里的事实，*部分**是*另一种选择，但在这种情况下似乎缺乏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:57:33.437

你不能用`partial`. 这是因为`split`使用了`PyArg_ParseTuple`C API 中不提供关键字参数的函数。从 python 的角度来看，如果方法被定义为：

```
def split(self, *args):
    if len(args) > 2:
        raise TypeError(...)
    sep = args[0] if args else None
    maxsplit = args[1] if len(args) > 1 else -1
    ... 
```

Partial 只能按顺序分配位置参数。这在[文档](http://docs.python.org/2/library/functools.html#functools.partial)中提到，他们在其中声明`partial`“大致相当于”：

```
def partial(func, *args, **keywords):
    def newfunc(*fargs, **fkeywords):
        newkeywords = keywords.copy()
        newkeywords.update(fkeywords)
        return func(*(args + fargs), **newkeywords)
    newfunc.func = func
    newfunc.args = args
    newfunc.keywords = keywords
    return newfunc 
```

请注意，`return func(*(args + fargs), **newkeywords)`这清楚地表明您传递给的参数`partial`被附加到其他函数参数。

结论是`lambda`比 更强大`partial`。

附带说明一下，在 python3.3 中，您可以指定`maxsplit`为关键字参数：

```
>>> 'some string with spaces'.split(maxsplit=2)
['some', 'string', 'with spaces'] 
```

许多其他具有相同问题的方法/功能也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T18:26:53.863

因为`str.rsplit`你真的想[`operator.methodcaller()`](http://docs.python.org/2/library/operator.html#operator.methodcaller)改用：

```
>>> from operator import methodcaller
>>> SEP = ' '
>>> s = methodcaller('rsplit', SEP, 1)
>>> s('Test one two')
['Test one', 'two'] 
```

# c++ - 按类型大小递增 void* 的正确方法，因为强制转换导致临时而不是左值

> ID：15644653
> 
> 赞同：3
> 
> 时间：2013-03-26T18:25:20.560
> 
> 标签：c++

在升级以下旧 C++ 代码以在现代 Xcode 4.x 编译器下编译时，我发现原始开发人员使用了一个有效但应该避免的编程习惯——现在这是一个错误：

```
*((USHORT*) pvPixel)++ = uRG;   // copy red & green (2 bytes) 
```

我明白了它的意图：将 unsigned short (uRG) 复制到 void 指针 (pvPixel) 指向的地址，然后增加适当的大小（在上述情况下为 2 个字节）。问题是投射 pvPixel 会导致一个临时的，而不是一个左值，这是不再允许的。

最初的开发者在几十个地方使用了这个成语——我可以在短时间内重写。但是，最好提供一个优雅且可读的解决方案，而不是蛮力地重写每一个事件。我可以想到几种可能的替代方案来对每次出现进行强力重写：宏、内联函数，也许是模板？

我的问题是：这个问题是否有任何 C++ 语法/语言解决方案？什么样的方法可以为未来的开发人员生成最清晰的代码？

（两个示例函数，如下）：

```
void PrimSurfaceGDI3::mFillHLine( UINT uRGB, UINT uX, UINT uY, UINT uW )
{
    LPVOID pvPixel;

    if ( uW > 0 )
    {
        //  obtain a pointer to a specified pixel in the surface
        pvPixel = mPtr( uX, uY );

        USHORT uRG = *(USHORT*) &uRGB;

        BYTE uB = ((BYTE*) &uRGB)[2];

        LPVOID pvEnd = (BYTE*) pvPixel + uW * 3;

        while (pvPixel < pvEnd)
        {
            // The two lines below are now ILLEGAL in modern compilers because casting pvPixel to USHORT* or BYTE* results in a TEMPORARY, not an lvalue
            *((USHORT*) pvPixel)++ = uRG;   // copy red & green (2 bytes)

            *((BYTE*) pvPixel)++ = uB;      // copy blue (1 byte)
        }
    }
} 
```

下面，这个成语用于 for 循环的重新初始化语句：

```
void PrimSurfaceGDI3::mFillVLine( UINT uRGB, UINT uX, UINT uY, UINT uH )
{
    LPVOID pvPixel = mPtr( uX, uY );

    USHORT uRG = *(USHORT*) &uRGB;

    BYTE uB = ((BYTE*) &uRGB)[2];

    LPVOID pvEnd = (BYTE*) pvPixel + uH * muScan;

    // The reinitialization statement is now ILLEGAL in modern compilers because casting pvPixel to BYTE* results in a TEMPORARY, not an lvalue
    for ( ; pvPixel < pvEnd; ((BYTE*) pvPixel) += muScan)
    {
        *(USHORT*) pvPixel = uRG;       // copy red & green (2 bytes)

        ((BYTE*) pvPixel)[2] = uB;      // copy blue (1 byte)
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:40:03.290

可能解决这个问题的一种更合理的方法是稍微修改一些东西。更改`mPtr`，使其返回一个指向其中包含三个字段的三字节类型的指针（或容器引用），然后使用`std::fill_n`输入 RGB 填充该类型。然后函数收缩到这样的东西（这给你的编译器一个很好的机会来应用任何适当的优化）：

```
void PrimSurfaceGDI3::mFillHLine( UINT uRGB, UINT uX, UINT uY, UINT uW )
{
    if ( uW > 0 )
    {
        ColorRep pvPixel* = mPtr( uX, uY );
        std::fill_n(pvPixel, uW, ColorRep(uRGB));
    }
} 
```

接下来，请注意原始的“优化”可能是反优化，因为它会导致程序中出现所有未对齐的两字节访问。

但是，如果您想尽可能少地更改代码，您接受此代码可能无法在 x86 以外的任何架构上运行（由于未对齐的访问），并且您愿意编译`-fno-strict-aliasing`（这将可能由于强制转换为不相关的类型而需要），那么您可能可以摆脱`reinterpret_cast`对引用的影响：

```
*(reinterpret_cast<unsigned short*&>(pvPixel))++ = uRG; 
```

# javascript - executeSql 可以带命名参数吗？

> ID：15644654
> 
> 赞同：2
> 
> 时间：2013-03-26T18:25:25.067
> 
> 标签：javascript, html, web-sql

我在[示例](http://www.html5rocks.com/en/tutorials/webdatabase/todo/)中看到executeSql 需要几个参数时，我们使用问号：

```
db.transaction(function(tx){
var addedOn = new Date();
tx.executeSql("INSERT INTO todo(todo, added_on) VALUES (?,?)",
    [todoText, addedOn],
    html5rocks.webdb.onSuccess,
    html5rocks.webdb.onError);
}); 
```

可以`executeSql`带命名参数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:29:21.617

从[同一页面](http://www.html5rocks.com/en/tutorials/webdatabase/todo/)：

> 2010 年 11 月 18 日，W3C 宣布 Web SQL 数据库是一个弃用的规范。这是对 Web 开发人员不再使用该技术的建议，因为该规范不会收到任何新的更新，并且不鼓励浏览器供应商支持该技术。

[另请参阅http://www.w3.org/TR/webdatabase](http://www.w3.org/TR/webdatabase)上的大警告

但要回答你的问题：据我所知：没有。不过，您可以编写一个“包装器”，用实际值替换您自己的占位符，但我认为这不值得打扰。

在黑暗中的另一个镜头将尝试`:foo`用作占位符。AFAIK 大多数浏览器使用(d) SQLite 来实现他们的网络数据库，并且~~从我的头顶~~ [上看，SQLite 支持](http://www.sqlite.org/lang_expr.html#varparam)~~-form多种形式~~~~的`:parametername`~~命名参数。不知道您将如何实际提供值，尽管我想像`[{'foo': 'bar'}, {'baz': 'bat'}]`

* * *

**编辑**
我在[您的示例](http://www.html5rocks.com/en/tutorials/webdatabase/todo/)中尝试了许多排列，如下所示：

```
var p = {};
p.aa = todoText;
p.bb = addedOn;

tx.executeSql("INSERT INTO todo(todo, added_on) VALUES (:aa, :bb)",
    p,
    ...
}); 
```

或者：

```
tx.executeSql("INSERT INTO todo(todo, added_on) VALUES (:aa, :bb)",
    {"aa": todoText, "bb": addedOn},
    ...
}); 
```

或者：

```
tx.executeSql("INSERT INTO todo(todo, added_on) VALUES (@aa, @bb)",
    {"aa": todoText, "bb": addedOn},
    ...
}); 
```

或者：

```
tx.executeSql("INSERT INTO todo(todo, added_on) VALUES (?aa, ?bb)",
    {"aa": todoText, "bb": addedOn},
    ...
}); 
```

...Chrome 25 中还有更多内容；它们似乎都没有表明支持命名参数。我能做的只是一个简单的`n`th 位置值来映射到`n`th 参数位置（或索引，如果你愿意的话）。

我并不是说绝对没有办法，也许我只是找不到它或猜不到正确的使用方法，但我认为你不走运。而且，再次[如评论中所述](https://stackoverflow.com/questions/15644654/can-executesql-take-named-parameters/15644727#comment22235022_15644727)，即使我或其他*人*让它工作我也不会依赖它（因为：[未记录](http://www.w3.org/TR/webdatabase/#preprocess-the-sql-statement)，以及无论如何都已弃用）并且它可能会在许多（大多数？）其他浏览器中失败. 老实说：试图让它发挥作用是在浪费你的时间。

# html - 使用 iTextSharp 使用 HTML 格式的文本填充 PDF 模板 acrofield

> ID：15644655
> 
> 赞同：5
> 
> 时间：2013-03-26T18:25:31.133
> 
> 标签：html, forms, pdf, itext, acrofields

我正在使用 iTextSharp 填写 PDF 模板。我使用的数据保存在数据库中，并采用 HTML 格式。我的问题是，当我`AcroField`用这个文本加载时，我让它做换行符，但没有粗体或斜体。

我已经尝试使用 HtmlWorker，但所有在线示例都显示它用于将 HTML 转换为 PDF，但我试图`AcroField`在 PDF 模板中设置一个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T18:50:22.597

花了几天时间浏览论坛和 iTextsharp 源代码后，我找到了一个解决方案。我没有使用 HTML 格式的文本填充 Acrofield，而是使用了 ColumnText。我解析 html 文本并将 IElements 加载到段落中。然后将段落添加到 ColumnText。然后，我使用字段的坐标将 ColumnText 覆盖在 Acrofield 应该在的位置之上。

```
 public void AddHTMLToContent(String htmlText,PdfContentByte contentBtye,IList<AcroFields.FieldPosition> pos) 
    {
        Paragraph par = new Paragraph();
        ColumnText c1 = new ColumnText(contentBtye);
        try
        {
            List<IElement> elements = HTMLWorker.ParseToList(new StringReader(htmlText),null);
            foreach (IElement element in elements) 
            {
               par.Add(element);
            }

            c1.AddElement(par);
            c1.SetSimpleColumn(pos[0].position.Left, pos[0].position.Bottom, pos[0].position.Right, pos[0].position.Top);
            c1.Go(); //very important!!!
        }
        catch (Exception ex)
        {

            throw;
        }
    } 
```

这是调用此函数的示例。

```
string htmlText ="<b>Hello</b><br /><i>World</i>";
IList<AcroFields.FieldPosition> pos = form.GetFieldPositions("Field1");
//Field1 is the name of the field in the PDF Template you are trying to fill/overlay
AddHTMLToContent(htmlText, stamp.GetOverContent(pos[0].page), pos);
//stamp is the PdfStamper in this example 
```

我在执行此操作时遇到的一件事是我的 Acrofield 确实具有预定义的字体大小。由于此函数将 ColumnText 设置在字段的顶部，因此必须在函数中完成任何字体更改。以下是更改字体大小的示例：

```
 public void AddHTMLToContent(String htmlText,PdfContentByte contentBtye,IList<AcroFields.FieldPosition> pos) 
    {
        Paragraph par = new Paragraph();
        ColumnText c1 = new ColumnText(contentBtye);
        try
        {
            List<IElement> elements = HTMLWorker.ParseToList(new StringReader(htmlText),null);
            foreach (IElement element in elements) 
            {
                foreach (Chunk chunk in element.Chunks) 
                {
                    chunk.Font.Size = 14;
                }
            }
            par.Add(elements[0]);
            c1.AddElement(par);
            c1.SetSimpleColumn(pos[0].position.Left, pos[0].position.Bottom, pos[0].position.Right, pos[0].position.Top);
            c1.Go();//very important!!!
        }
        catch (Exception ex)
        {

            throw;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T17:23:16.533

所以，在过去的几个月里，我不得不稍微调整一下这段代码，我找到了一个更好/更少的方法来做到这一点。

```
 public void Final(string text,string fieldName,string filename) 
    {
        iTextSharp.text.pdf.PdfReader reader = null;
        iTextSharp.text.pdf.PdfStamper stamp = null;

        reader = new PdfReader(file path to template);
        stamp = new PdfStamper(reader, new FileStream(path to new file, FileMode.CreateNew));

        AcroFields form = stamp.AcroFields;

        //get the position of the field
        IList<AcroFields.FieldPosition> pos = form.GetFieldPositions(fieldName);
        //tell itextSharp to overlay this content 
        PdfContentByte contentBtye = stamp.GetOverContent(pos[0].page);

        //create a new paragraph
        Paragraph par = new Paragraph();
        //parse html
        List<IElement> elements = HTMLWorker.ParseToList(new StringReader(text), null);
        for (int k = 0; k < elements.Count; k++)
        {
            par.Add((IElement)elements[k]);
        }
        //create a ColumnText to hold the paragraph and set position to the position of                   the field
        ColumnText ct = new ColumnText(contentBtye);
        ct.SetSimpleColumn(pos[0].position.Left, pos[0].position.Bottom, pos[0].position.Right, pos[0].position.Top);
        ct.AddElement(par);
        ct.Go();
        stamp.Close();
        reader.Close();

    } 
```

# android - 如何测试定时通知？还是我的代码有问题？

> ID：15644656
> 
> 赞同：0
> 
> 时间：2013-03-26T18:25:37.737
> 
> 标签：android, android-notifications

我想发送定时通知（每天早上 5:00），并尝试使用 AlarmManager 和以下代码来做到这一点：

```
Intent appIntent = new Intent(this, NotificationService.class);
        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        PendingIntent penIntent = PendingIntent.getService(this, 0,
                appIntent, 0);

        alarmManager.cancel(penIntent);

        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.HOUR_OF_DAY, 5);
        cal.set(Calendar.MINUTE, 00);
        cal.set(Calendar.SECOND, 00);

        alarmManager.setRepeating(AlarmManager.RTC, cal.getTimeInMillis(), AlarmManager.INTERVAL_DAY, penIntent); 
```

NotificationService.class 看起来（至少是重要部分）如下所示：

```
int id = 001;

            NotificationManager mNotifyMng = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
            NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                    MainActivity.this).setSmallIcon(R.drawable.icon).setContentTitle("Test")
                    .setContentText("Test!");

            mNotifyMng.notify(id, mBuilder.build());
            stopSelf(); 
```

我似乎无法让它工作。当我将模拟器时钟设置为 4:59 或其他时间并等待它更改为 5:00 时，没有出现任何通知，我想不出另一种方法来测试它。我希望你知道一些方法来测试它或在我的代码中找到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:46:33.673

我相信问题是你取消了，`PendingIntent`但是你需要在设置之前重新创建它`alarmManager`。

```
 //cancel pendingIntent
  AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
  PendingIntent penIntent = PendingIntent.getService(this, 0,appIntent, 0);   
  alarmManager.cancel(penIntent);

  //reset pendingIntent
  Intent appIntent = new Intent(this, NotificationService.class);
  AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
  PendingIntent penIntent = PendingIntent.getService(this, 0,appIntent, 0);  
  Calendar cal = Calendar.getInstance();
    cal.set(Calendar.HOUR_OF_DAY, 5);
    cal.set(Calendar.MINUTE, 00);
    cal.set(Calendar.SECOND, 00);

    alarmManager.setRepeating(AlarmManager.RTC, cal.getTimeInMillis(),                                                                      
          AlarmManager.INTERVAL_DAY, penIntent); 
```

要取消 a `PendingIntent`，您需要像第一次一样创建它，然后按原样调用`AlarmManager`s `cancel()`。但随后您需要再次创建它以在`PendingIntent`

> **我希望你知道一些测试方法...

可能有更好的方法，但出于测试目的，我有时会设置一个全局调试标志，它会改变测试和生产之间的时间。所以说4小时可能是2分钟。一天中的时间可能有点棘手，但您可以将时间更改为任何小时、分钟或任何接近的时间。一旦您知道它在正确的时间触发，那么您可以将其更改回来并在一天中的那个时间到来时仍然进行测试，但您现在知道它应该可以工作。

# sql - 如何创建 SQL 触发器

> ID：15644659
> 
> 赞同：0
> 
> 时间：2013-03-26T18:25:48.443
> 
> 标签：sql, triggers

我有下表： product(id, price, is_deleted)

我想创建一个触发器，当有人从 PRODUCT 表中删除一行而不是删除它时，将该行中“is_deleted”列的值更改为“1”。在执行 DELETE 任务期间要删除的行在名为“已删除”的表中必须是临时的。它也必须是那一刻表中“删除”的唯一行。

这就是我的想法：

```
CREATE TRIGGER is_deleted                                                                       
ON product
FOR INSERT      
AS         
BEGIN               
    UPDATE Product, is_deleted  = 1                    
    WHERE is_deleted = NULL
END 
```

这是一个好方法吗？

提前致谢！

# java - GWT - 浏览器中未显示图像（从服务器检索的 src）

> ID：15644660
> 
> 赞同：0
> 
> 时间：2013-03-26T18:25:51.177
> 
> 标签：java, gwt, base64, asynccallback

我在服务器端生成一个 base64 图像源，然后通过异步调用将其检索到 GWT 客户端。不幸的是，回调结束后图像未显示（一切正常），但在第二次回调后显示。在创建 Image 对象后，我尝试立即捕获 onLoad 事件，但这并不好。

谢谢！

**编辑 1**

经过一番调查，这是一个尺寸问题，我的意思是，base64 在那里并且图像标签被正确创建，但是宽度和高度都设置为 0。

**编辑 2**

这就是我在网站中放置图像的方式：

```
import net.customware.gwt.dispatch.server.Dispatch
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.Image;

dispatch.execute(action, new AsyncCallback<GenerateImageResult> () {
    @Override
    public void onFailure(Throwable caught) {};
    @Override
    public void onSuccess(GetCarpetasResult result) {
        String base64 = result.getBase64();
        Image image = new Image(base64);
        RootPanel.get().add(image);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T01:21:55.417

您是否尝试将 onLoadHandler 添加到图像对象？像这样的东西：

```
image.addLoadHandler(new LoadHandler () {
    @Override
    public void onLoad(LoadEvent event) {
        image.setUrl(base64);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T21:09:26.587

我已经能够使用以下方法成功显示（在 google-chome 中）base64 图像数据：

```
 String base64= "data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAAAAAAbGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf8AAAAAAAAAAGxsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/AAAAAAAAAABsbG3/bGxt/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsbG3/bGxt/wAAAAAAAAAAbGxt/2xsbf8AAAAAbGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf8AAAAAbGxt/2xsbf8AAAAAAAAAAGxsbf9sbG3/AAAAAGxsbf9sbG3/bGxt/2xsbf9sbG3/bGxt/2xsbf9sbG3/AAAAAGxsbf9sbG3/AAAAAAAAAABsbG3/bGxt/wAAAAAAAAAAAAAAAAAAAAAAAAAAVHibFE94oDxKeKRkRHiqkUx4ohlsbG3/bGxt/wAAAAAAAAAAAAAAAAAAAABLeKMPPHixUj54sIQ+eLC5Pniw3j54sP8/eK//QXet/0J2q/9Ed6k+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPXiwKkF4rf9BeK3/QXit/0J3q+xFdqnAQ3erhTt7s1Qqg8VSFY3cWQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD94rwlCeKxzRHaqUUR2qis7e7MIAAAAABiM2QwJk+hyA5fv4gKX7v8AmfIbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZPoGQOX7oIDlu7tBZXs/wSX6+wJkeqCHXjmTiBy6QIAAAAAAAAAAAAAAAAAAAAAAAAAAA+R4QICl+4kA5fuhgWW7PMGlev/BpXr6wSY64MNjOkQJ23lTC9j5PwuZOSBAAAAAAAAAAAAAAAAAAAAAAAAAAAElu0JBpXr1QaV6/8GlevpBpbrfASY6xcAAAAAK2fkNi5k5PgsZuT4LGbkRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaV62wGlet+BZbrFQAAAAAAAAAALWTkIi1l5OUsZuT/LGbkWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALmPkDyxl5MssZuT/LGbkewAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALmPkAixm5K0sZuT/LGbkoQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALmTkAixm5JMsZuT/LGbkwCxm5AcAAAAAAAAAAAAAAAAAAAAAgAEAAIAB8L+f+QAAkAkAAJAJAACfAQAA4AcAAOAHAADggwAA/gEAAPABAADwIQAA+MP///+H////DwAA/g8AAA==";
    Image image = new Image(base64);
    RootPanel.get().add(image); 
```

检查这些事情：

*   您的 base64 数据是否以 开头`data:${mime};base64,`？
*   你`mime`真的在描述解码的base64图像格式吗？

# java - 使用隐式 Intent 过滤器时，如何绕过 Complete Action Using 菜单？

> ID：15644664
> 
> 赞同：1
> 
> 时间：2013-03-26T18:26:02.867
> 
> 标签：java, android, eclipse, android-intent

在此示例中，我试图在访问 URL (test.com) 时自动启动我的应用程序

但是每次我这样做时都会被问到应该使用哪个应用程序来这样做。我想要一种每次启动我的应用程序而不提示用户交互的方法。

我已经研究了如何做到这一点，并发现了以下内容：

[Android 使用对话框消除完整操作](https://stackoverflow.com/questions/3082077/android-eliminate-complete-action-using-dialog)

但是，如果我实现显式意图而不是隐式意图 - 我如何指定在访问 test.com 时启动我的活动，因为我不会使用

```
<data android:scheme="http" android:host="test.com" android:pathPrefix="/" /> 
```

隐含意图（成功运行 - 访问 test.com 时启动应用程序，但提示用户选择应用程序 - 这是不希望的 - 需要在没有使用提示的完整操作的情况下启动我的应用程序）

```
<activity android:name="com.nfc.linked.Warning">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"></action>
        <category android:name="android.intent.category.LAUNCHER"></category>
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW"></action>
        <category android:name="android.intent.category.DEFAULT"></category>
        <category android:name="android.intent.category.BROWSABLE"></category>
        <data android:scheme="http" android:host="test.com" android:pathPrefix="/" />
    </intent-filter>
</activity> 
```

明确意图（尝试）：

```
public class Warning extends Activity {

    Intent intent = new Intent(this, Warning.class);
    startActivity(intent); 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:31:44.540

你不能。

你所谓的显式意图只针对*一个*类。

您之前所做的是`intent-filter`在您的清单中创建一个，它侦听与 URL 相关的 Intent `http://*.test.com/*`。但是，由于 HTTP 是一种非常常见的协议，并且您的 URI 只是一个网站，因此其他应用程序（例如侦听 URL）的浏览器也`http://*`将提供显示内容。因此，Android 创建了一个选择器，用户必须从中选择您的应用程序。

解决此问题的唯一方法是在您的应用程序中设置一个打开选择器的按钮`http://test.com`，要求用户按下它并选择您的应用程序作为此类 URL 的默认处理程序。出于安全原因，它不能以编程方式完成，因为恶意应用程序可以将自己设置为各种操作的默认值。

另一种选择是提出您自己的 URI 方案，例如 Google Play 的`market://`. 由于您的应用程序将是唯一使用此功能的应用程序，因此它将是唯一可用于处理链接的应用程序。但是，您需要确保所有试图通过其他地方（例如网页上的链接或其他应用程序）打开您的应用程序的第三方都遵循您的 URL 方案。此外，如果用户按下第三方链接之一并且您的应用程序未安装，则可能会导致`ActivityNotFoundException`用户设备上出现错误。

# web-scraping - 是否可以检测在 PhantomJS 中包含“不安全内容”的 SSL 站点

> ID：15644665
> 
> 赞同：0
> 
> 时间：2013-03-26T18:26:05.717
> 
> 标签：web-scraping, screen-scraping, phantomjs

我想自动检查 HTTPS 页面是否包含“不安全内容”，例如 HTTP 内容。

有没有办法自动确定？

幻象似乎只是加载内容并忽略了这一事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:48:41.477

这就像一个魅力：

```
console.log('Loading a web page');

var page = new WebPage();
page.onResourceRequested = function(request) {
  if(/^https/.exec(request.url)) {
    console.log('i am fine with ' + request.url)
  } else {
    console.log('i dont like ' + request.url)
  }
}

page.viewportSize = { width: 1024, height: 768 };
var url = "https://example.com";

page.open(url, function (status) {
  if(status == 'success') {
    page.render('test.png');
    console.log('loaded')
  }
  phantom.exit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:23:18.793

有趣的方法。谢谢你。我只是建议检查它是否真的捕获了所有资源，并且没有与该事件相关的打开的 phantomjs 错误。

# php - 在 Symfony 2 中加载父类

> ID：15644669
> 
> 赞同：0
> 
> 时间：2013-03-26T18:26:11.767
> 
> 标签：php, symfony, namespaces

我在 Symfony 2 控制器中设置了一个测试父类，如下所示：

```
<?php

namespace Zetcho\AmColAnBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class BaseController extends Controller
{
    public function validateUser()
    {
        $user['first_name'] = "Name";
        $user['signin'] = true;
        return $user;
    }
}
class DefaultController extends BaseController
{
    public function indexAction()
    {
        $user = $this->validateUser();
        $displayParms['user'] = $user;
        return $this->render('ZetchoAmColAnBundle:Default:index.html.twig',$displayParms);
    }
} 
```

代码在 src/Zetcho/AmColAnBundle/Controller/DefaultController.php 测试代码有效。我现在想将父类（BaseController）从控制器文件中移到它自己的文件中，这样我就可以在我的其他控制器中重用它。我想把它放在与其他控制器相同的目录中，并且我想以与上面 use 语句中的 Controller 相同的方式声明它。在 Symfony 2 中最好/公认的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:42:41.453

您在 Symfony2 中执行此操作的方式与使用任何 PHP 类的方式完全相同。将您的类拆分为单独的文件，如下所示：-

src/Zetcho/AmColAnBundle/Controller/BaseController.php

```
namespace Zetcho\AmColAnBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class BaseController extends Controller
{
    public function validateUser()
    {
        $user['first_name'] = "Name";
        $user['signin'] = true;
        return $user;
    }
} 
```

src/Zetcho/AmColAnBundle/Controller/DefaultController.php

```
namespace Zetcho\AmColAnBundle\Controller;

use Zetcho\AmColAnBundle\Controller\BaseController;

class DefaultController extends BaseController
{
    public function indexAction()
    {
        $user = $this->validateUser();
        $displayParms['user'] = $user;
        return $this->render('ZetchoAmColAnBundle:Default:index.html.twig',$displayParms);
    }
} 
```

一旦你知道如何，它真的很简单。请记住，symfony2 中的控制器只是普通的 PHP 类，它们并没有什么特别之处。

# bash - sed - 如何从第二列中删除 AZ

> ID：15644677
> 
> 赞同：0
> 
> 时间：2013-03-26T18:26:44.510
> 
> 标签：bash, sed

我已经能够通过 awk print $2、sed [az] 等部分地做到这一点，但是我将如何通过 sed 一次对一个流做到这一点？

```
host_192.168.0.100 host_192.168.0.100 
```

变成

```
host_192.168.0.100 192.168.0.100 
```

此外，“主机”只是一个占位符，我确实需要删除“所有”字母，留下数字/标点符号。

编辑:: 抓住下划线也很好，但是我相信我可以弄清楚其他一些常见的例子是：

```
ab-ab-abababab-ABABABAB-000.000.000.0 ab-ab-abababab-ABABABAB-000.000.000.0 
01-admin-10.10.10.10 01-admin-10.10.10.10
10.10.10.10-NAT 10.10.10.10-NAT
1test-10.10.10.10 1test-10.10.10.10 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:32:02.943

尝试这个：

```
sed 's/^\([^ ]*\) [a-z_-]*\(.*\)/\1 \2/i' 
```

**编辑：**更新以反映更改的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:35:47.110

一种可行的简单方法：

```
sed 's/ [A-Za-z_]*/ /' 
```

例子：

```
$ sed 's/ [A-Za-z_]*/ /' <<<'host_192.168.0.100 host_192.168.0.100'
host_192.168.0.100 192.168.0.100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:18:09.040

给定第二个示例，您似乎想要删除出现在第一个空格之后的所有非数字，逻辑上在第一个数字之前。您需要它来删除破折号、下划线、甚至点以及字母；任何不是数字的东西。这表明：

```
sed -e 's/ [^0-9]*/ /' 
```

这是相当简约的，但符合您的标准：

```
$ cat data
host_192.168.0.100 host_192.168.0.100
ab-ab-abababab-ABABABAB-000.000.000.0 ab-ab-abababab-ABABABAB-000.000.000.0 
$ sed -e 's/ [^0-9]*/ /' data
host_192.168.0.100 192.168.0.100
ab-ab-abababab-ABABABAB-000.000.000.0 000.000.000.0 
$ 
```

编写好的正则表达式的很大一部分技巧是写一个好的描述你希望正则表达式实际做的事情（用对正则表达式有意义的术语）。

* * *

这三个带有前导数字和字母以及尾随材料的新项目使生活变得相当复杂：

```
$ cat data
host_192.168.0.100 host_192.168.0.100
ab-ab-abababab-ABABABAB-000.000.000.0 ab-ab-abababab-ABABABAB-000.000.000.0 
01-admin-10.10.10.10 01-admin-10.10.10.10
10.10.10.10-NAT 10.10.10.10-NAT
1test-10.10.10.10 1test-10.10.10.10
$ sed -e 's/ [^0-9]*/ /' \
>     -e 's/ [^.]*-\([0-9][0-9.]*[0-9]\)/ \1/' \
>     -e 's/ \([0-9][0-9.]*[0-9]\)[^0-9.].*$/ \1/' data
host_192.168.0.100 192.168.0.100
ab-ab-abababab-ABABABAB-000.000.000.0 000.000.000.0
01-admin-10.10.10.10 10.10.10.10
10.10.10.10-NAT 10.10.10.10
1test-10.10.10.10 10.10.10.10
$ 
```

该`sed`脚本获取 3 个独立的清理表达式。第一个和以前一样，在空格后立即删除所有非数字。不太可能需要调整。

不过这`01-admin-`条线没有受到影响；第二个正则表达式通过查找一个空白、一个非点序列后跟一个破折号来处理这个问题，然后捕获一个以数字开头、以交错的数字和点继续，并以数字结尾的序列，将其替换为记住的数字和点串。匹配破折号是正常工作的关键。如果您不小心，`*`则太贪心了（例如，`s/ .*\([0-9][0-9.]*[0-9]\)/\1/`从 IP 地址组件中吞噬了前导数字）。我假设`sed`没有非贪婪的量词，例如`*?`; 如果您的版本是这样，您可能会想出一个不同的答案（但这个版本也可以）。您可能需要调整该模式以处理其他异常情况；请为自己做，而不是作为对这个问题的编辑。

第三个正则表达式处理尾随`-NET`和其他此类材料；它查找并记住数字和点的序列（以数字开头和结尾），后跟非数字、非点字符和任何其他尾随材料，并将其替换为记住的数字和点串。这不太可能需要太多调整。

# c# - 当我使用拨号调制解调器拨打电话时，DataReceived（串行端口）事件不起作用

> ID：15644678
> 
> 赞同：3
> 
> 时间：2013-03-26T18:26:46.230
> 
> 标签：c#, events, ports

当有人拨打我的电话号码时，我尝试获取并识别铃声，但是当我用我的调制解调器（电话号码）接听电话时，DataReceieved 事件不起作用。问题是什么？这是我的代码：

```
namespace WindowsFormsApplication3
{
    public partial class Form1 : Form
    {
        delegate void SetTextCallback(string text);
        private void SetText(string text)
        {
            if (this.lblStatus.InvokeRequired)
            {
                SetTextCallback d = new SetTextCallback(SetText);
                this.Invoke(d, new object[] { text });
            }
            else
                this.lblStatus.Text = text;
        }

        private void sp1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {

            string rs = sp1.ReadExisting();
            MessageBox.Show(rs);
            if (rs.Contains("NMBR"))
            {
                int sx = rs.IndexOf("NMBR");
                SetText("Incomming Call From: " + rs.Substring(sx + 7, 11));

            }

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            if (sp1.IsOpen)
                sp1.Close();
            sp1.Open();
            sp1.Write("AT+SCID=1;" + Environment.NewLine);
            sp1.Write("AT+FCLASS=0;" + Environment.NewLine);
            sp1.Write("AT+VCID=1;" + Environment.NewLine);
            sp1.Write("AT+PCW=0;" + Environment.NewLine);
            lblStatus.Text = "Ready...";
        }

} 
```

}

# python - NetworkX 中按边和节点属性查询图的最佳实践

> ID：15644684
> 
> 赞同：24
> 
> 时间：2013-03-26T18:26:53.133
> 
> 标签：python, networkx, igraph

使用 NetworkX 和新的库，用于社交网络分析查询。通过查询，我的意思是通过两个边节点的属性选择/创建子图，其中边创建路径，节点包含属性。该图使用形式为 MultiDiGraph

```
G2 = nx.MultiDiGraph()
G2.add_node( "UserA", { "type" :"Cat" } )
G2.add_node( "UserB", { "type" :"Dog" } )
G2.add_node( "UserC", { "type" :"Mouse" } )
G2.add_node( "Likes", { "type" :"Feeling" } )
G2.add_node( "Hates", { "type" :"Feeling" } )

G2.add_edge( "UserA", 'Hates' ,  statementid="1" )
G2.add_edge( "Hates", 'UserB' ,  statementid="1"  )
G2.add_edge( "UserC", 'Hates' ,  statementid="2" )
G2.add_edge( "Hates", 'UserA' ,  statementid="2"  )
G2.add_edge( "UserB", 'Hates' ,  statementid="3"  )
G2.add_edge( "Hates", 'UserA' ,  statementid="3"  )
G2.add_edge( "UserC", 'Likes' ,  statementid="3"  )
G2.add_edge( "Likes", 'UserB' ,  statementid="3"  ) 
```

查询

```
for node,data in G2.nodes_iter(data=True):
    if ( data['type'] == "Cat" ):
       # get all edges out from these nodes
            #then recursively follow using a filter for a specific statement_id

#or get all edges with a specific statement id
   # look for  with a node attribute of "cat" 
```

有没有更好的查询方式？还是创建自定义迭代来创建子图的最佳实践？

或者（和一个单独的问题），可以简化图表，但我没有使用下图，因为“讨厌”类型的对象将有前身。这会使查询更简单吗？似乎更容易迭代节点

```
G3 = nx.MultiDiGraph()
G3.add_node( "UserA", { "type" :"Cat" } )
G3.add_node( "UserB", { "type" :"Dog" } )

G3.add_edge( "UserA", 'UserB' ,  statementid="1" , label="hates")
G3.add_edge( "UserA", 'UserB' ,  statementid="2" , label="hates") 
```

其他注意事项：

*   也许`add_path`为创建的路径添加一个标识符？
*   iGraph 有一个[很好的查询功能](http://www.cs.rhul.ac.uk/home/tamas/development/igraph/tutorial/tutorial.html) `g.vs.select()`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T04:14:36.427

编写一个单行代码来制作具有特定属性的节点列表或生成器非常简单（此处显示的生成器）

```
import networkx as nx

G = nx.Graph()
G.add_node(1, label='one')
G.add_node(2, label='fish')
G.add_node(3, label='two')
G.add_node(4, label='fish')

# method 1
fish = (n for n in G if G.node[n]['label']=='fish')
# method 2
fish2 = (n for n,d in G.nodes(data=True) if d['label']=='fish')

print(list(fish))
print(list(fish2))

G.add_edge(1,2,color='red')
G.add_edge(2,3,color='blue')

red = ((u,v) for u,v,d in G.edges(data=True) if d['color']=='red')

print(list(red)) 
```

如果您的图表很大且固定，并且您想要进行快速查找，您可以制作这样的属性的“反向字典”，

```
labels = {}
for n, d in G.nodes(data=True):
    l = d['label']
    labels[l] = labels.get(l, [])
    labels[l].append(n)
print labels 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-27T10:17:53.470

基于[@Aric 的回答](https://stackoverflow.com/a/15651795/190597)，你可以找到这样的红鱼：

```
red_fish = set(n for u,v,d in G.edges_iter(data=True)
               if d['color']=='red'
               for n in (u, v)
               if G.node[n]['label']=='fish')

print(red_fish)
# set([2]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-27T08:41:05.780

为了根据边和节点的属性选择边，您可能需要使用图形 G2 执行以下操作：

```
def select(G2, query):
    '''Call the query for each edge, return list of matches'''
    result = []
    for u,v,d in G2.edges(data=True):
        if query(u,v,d):
            result.append([(u,v)])
    return result

# Example query functions
# Each assumes that it receives two nodes (u,v) and 
# the data (d) for an edge 

def dog_feeling(u, v, d):
    return (d['statementid'] == "3" 
            and G2.node[u]['type'] == "Dog"
            or G2.node[u]['type'] == "Dog")

def any_feeling(u,v,d):
    return (d['statementid'] == "3" 
            and G2.node[u]['type'] == "Feeling"
            or G2.node[u]['type'] == "Feeling")

def cat_feeling(u,v,d):
    return (G2.node[u]['type'] == "Cat"
            or G2.node[v]['type'] == "Cat")

# Using the queries
print select(G2, query = dog_feeling)
print select(G2, query = any_feeling)
print select(G2, query = cat_feeling) 
```

这将迭代过程抽象到`select()`函数中，您可以将查询编写为单独的、可测试的函数。

# java - 将 BufferedImage 添加到 JLayerPane 上的 JPanel

> ID：15644686
> 
> 赞同：2
> 
> 时间：2013-03-26T18:26:55.743
> 
> 标签：java, swing, bufferedimage, paintcomponent, jlayeredpane

所以，我有一个 JLayeredPane（实际上是 JLayeredPane 的子类）。在那上面是一个JPanel。我想向 Jpanel 添加一个 BufferedImage。

```
public class BigMap extends JLayeredPane implements MouseListener
  JPanel mapPanel;
  BufferedImage theMap;
  public BigMap (BufferedImage m){
    theMap = m;
    mapPanel = new JPanel();
    add(mapPanel, 0);
    mapPanel.setBounds(0, 0, 640, 640);
    //other unimportant stuff
    }

  @Overrride
  public void paintComponent (Graphics g){
    super.paintComponent(g);
    Graphics2D gmap = (Graphics2D) mapPanel.getGraphics();
    gmap.drawImage(theMap, null, 0, 0);
    //some other stuff which is working just fine
   } 
```

问题是 BufferedImage 没有显示。JPanel 肯定存在，因为我可以设置它的 backgroundColour 并根据需要查看它。我意识到 JLayeredPane 没有布局管理器，并且必须为 JPanel 设置边界，但这对 JPanel 本身来说应该不是问题，对吧？鉴于 BufferedImage 缺乏直接控制其大小的方法，我不知道如果是这样我将如何克服它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:31:30.470

这里的问题是您覆盖了`paintComponent()`分层窗格的方法，而不是`JPanel`. 稍后将`JPanel`作为分层窗格的子项之一进行绘制，这将清除您绘制的内容。

一般来说，一个`paintComponent()`方法应该绘制到`Graphics`给它的那个，而不是绘制到其他组件的图形中。

# xslt - xslt 中的字符串和数学运算

> ID：15644687
> 
> 赞同：1
> 
> 时间：2013-03-26T18:26:56.970
> 
> 标签：xslt

我正在寻找使用 XSLT 修复一些表。我需要使用`Colspan`属性，但我从使用`namest`和转换的代码`nameend`。

例子：

```
<entry namest="col1" nameend="col3"> 
```

我需要把它变成`<td colspan="3">`. 我考虑过设置变量，然后用`substring($var,4,1)`它来获取 col3/col1 末尾的数字，然后通过从 nameend 的数字中减去 namest 的数字，然后加一个，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:58:07.280

如果`entry`是上下文节点，则以下表达式返回“col”值加一的差值，这应该是您要查找的 colspan 值：

```
substring(@nameend, 4) - substring(@namest, 4) + 1 
```

`substring(@attr, 4)`返回`@attr`从第四个字符开始到结束的子字符串。子字符串由减号运算符隐式转换为数字。

使用 libxslt 测试表达式`xmllint`：

```
$ echo '<entry namest="col1" nameend="col3"/>' >so.xml
$ xmllint --shell so.xml 
/ > cd entry
entry > xpath substring(@nameend, 4) - substring(@namest, 4) + 1
Object is a number : 3 
```

# testing - Fitnesse在哪里写我的课堂日志

> ID：15644688
> 
> 赞同：3
> 
> 时间：2013-03-26T18:26:58.200
> 
> 标签：testing, fitnesse

我是 Fitnesse 的新手，从示例测试用例开始。我有一个简单的测试用例

```
System.out.println("XYZ"); 
```

执行测试用例时的语句。我想知道 FitNesse 在哪里记录系统输出日志语句？

当我在日志启用模式下启动 FitNesse 时，我在 FitNesse 日志文件中看不到它。

```
java -jar fitnesse-standalone.jar -p 9999 -d . -l .

System info:
Windows 7 Enterprise edition, 64 bit
JDK 1.6b35
FitNesse Release 20121220 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T12:23:01.743

System.out.println() 转到输出页面。测试完成后，您会在右上角看到一个绿色、红色或黄色图标。单击该图标，它将转到输出页面。任何打印到标准输出或标准错误的东西都会去那里。

如果您想要更详细的日志记录，您可能希望使用 Loj4j 或您的固件语言中的等效版本构建一个记录器类。

# oauth - 贝宝访问oauth登录json_decode返回null

> ID：15644689
> 
> 赞同：0
> 
> 时间：2013-03-26T18:27:00.977
> 
> 标签：oauth, paypal, null, json

我有 2 个 PHP 文件，一个是 index.php，另一个是 paypal.php。paypal.php 的代码是：

```
 <?php 

session_start();

$client_id = 'xxxxxxxxxxxx';            
$client_secret = 'xxxxxxxxxxxxxxxxxxxx';    
$scopes = 'email profile';                    
$app_return_url = 'http://xxx.com/xxx/paypal.php';  
$nonce = time() . rand();

$code = $_REQUEST["code"];

if(empty($code)) {

    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); 
    $paypal_auth_url = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/authorize?"
            ."client_id=".$client_id
            ."&response_type=code"
            ."&scope=".$scopes
            ."&nonce=".$nonce
            ."&state=".$_SESSION['state']
            ."&redirect_uri=".urlencode($app_return_url);

    header("Location: $paypal_auth_url");     
}else{

    $token_url = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenservice";    
    $postvals = "client_id=".$client_id
            ."&client_secret=".$client_secret
            ."&grant_type=authorization_code"
            ."&code=".$code;

    $ch = curl_init($token_url);
    $options = array(
                CURLOPT_POST => 1,
                CURLOPT_VERBOSE => 1,
                CURLOPT_POSTFIELDS => $postvals,
                CURLOPT_RETURNTRANSFER => 1,
                CURLOPT_SSLVERSION => 3
    );
    curl_setopt_array( $ch, $options );
    $response = curl_exec($ch);
    curl_close($ch);
    $atoken = json_decode($response);

    $profile_url = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/userinfo?"
            ."schema=openid"
            ."access_token=".$atoken->access_token;

    $ch = curl_init($profile_url);
    $options = array(
                CURLOPT_RETURNTRANSFER => 1,
                CURLOPT_SSLVERSION => 3
    );
    curl_setopt_array( $ch, $options );
    $response = curl_exec($ch);
    curl_close($ch);
    $profile= json_decode($response,true);  

    $_SESSION['paypal_user'] = "true";
    $_SESSION['profile'] = $profile;

    echo("<script> top.location.href='index.php'</script>");
}
?> 
```

index.php 的代码是：

```
 <?php
session_start();

// LOGOUT
if ($_GET['logout'] == 'true'){
    $_SESSION['paypal_user']="";    
}

if (strlen($_SESSION['paypal_user'])){
    // LOGGED USER
    echo "<pre>";
    print_r($_SESSION['profile']);
    echo "</pre>";
    echo "<br><BR> <a href='?logout=true'>LOGOUT</a>";
}else{
    // LOGIN
?>
    <a href='paypal.php' title='Paypal oAuth Login'>
    <img src='https://www.paypalobjects.com/en_US/Marketing/i/btn/login-with-paypal-button.png'>
    </a>
<?
}
?> 
```

任何想法为什么此代码不起作用？我尝试了 var_dump json_decode 并返回 null。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T19:04:47.987

只需在访问令牌之前添加'&'，他错过了两个变量之间的&符号

$profile_url = " [https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/userinfo](https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/userinfo)？" ."schema=openid" ."**&**access_token=".$atoken->access_token;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T18:39:57.647

我可能是错的，但我相信你的范围需要......

```
 "scopes": "email https://uri.paypal.com/services/paypalattributes", 
```

URL 是个人资料

# javascript - 页面上的多个 ShareThis 实现

> ID：15644693
> 
> 赞同：3
> 
> 时间：2013-03-26T18:27:05.127
> 
> 标签：javascript, sharethis

我有一个包含不同定价计划的页面，我希望每个计划列都有自己的 ShareThis 信息。

这是仅用于电子邮件的标记（我也有 Facebook 和 Twitter）：

```
<span class="st_email" st_title="column 1"
                       st_url="http://domain/col1" 
                       displayText=""
                       st_summary="c1 text"></span>

<span class="st_email" st_title="column 2"
                       st_url="http://domain/col2" 
                       displayText=""
                       st_summary="c1 text"></span>

<span class="st_email" st_title="column 3"
                       st_url="http://domain/col3" 
                       displayText=""
                       st_summary="c1 text"></span> 
```

问题是在你点击一列之后，无论你以后是否点击差异列，你只能看到你选择的第一列的 sharethis 内容。

我确定这与 ShareThis JS 有关。如何解决此问题，以便我可以在同一页面上拥有多个 ShareThis 链接？

# javascript - 如何调用 Ajax 动态加载的元素的函数？

> ID：15644694
> 
> 赞同：0
> 
> 时间：2013-03-26T18:27:24.617
> 
> 标签：javascript, jquery, ajax, grails, gsp

我正在尝试使用 jQuery Plugin SelectBoxIt，但我的内容是由 Ajax 加载的，我没有让它工作。

我正在使用 Grails，我不想放入内联代码，所以我尝试使用 .on() jQuery 方法加载它，但我无法获取它，因为我不想放置事件，我只是希望它在我的内容加载时加载，我找不到其他解决方案。

我正在尝试做这样的事情：

我的页面调用了一个远程链接：

```
<g:remoteLink controller="strategy" action="index" update="content-box"></g:remoteLink> 
```

然后，我所有的 HTML 选择都必须触发插件并从正常选择转变为插件提供的选择：

```
$(document).on('click', 'select', function(){
    $('select').selectBoxIt()
}) 
```

但我不想用点击事件触发它们，我希望它们在页面被调用时触发。

由于第一个页面加载时没有添加我的内容，我认为 .on() 方法是正确的选择，但它让我放置了一个事件，我想在页面加载时触发()

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:43:25.667

也许读这个，[http://api.jquery.com/load/](http://api.jquery.com/load/)和[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。抱歉，我无法提供更多帮助。

# python - PySide QSelectionModel.isRowSelected() 函数中的父级是什么？

> ID：15644696
> 
> 赞同：2
> 
> 时间：2013-03-26T18:27:31.047
> 
> 标签：python, qt, pyqt, pyside

我需要确定在与[QStandardItemModel](http://srinikom.github.com/pyside-docs/PySide/QtGui/QStandardItemModel.html)关联的[QTableView](http://srinikom.github.com/pyside-docs/PySide/QtGui/QTableView.html)中选择了哪些行。从视图中，我调用函数[selectionModel()](http://srinikom.github.com/pyside-docs/PySide/QtGui/QAbstractItemView.html#PySide.QtGui.PySide.QtGui.QAbstractItemView.selectionModel)来获取选择。此函数返回一个[QSelectionModel](http://srinikom.github.com/pyside-docs/PySide/QtGui/QItemSelectionModel.html)对象。从那个对象，我想调用[isRowSelected()](http://srinikom.github.com/pyside-docs/PySide/QtGui/QItemSelectionModel.html#PySide.QtGui.PySide.QtGui.QItemSelectionModel.isRowSelected)函数。这个函数有两个参数：我要测试的行和一个参数，它是一个[QModelIndex](http://srinikom.github.com/pyside-docs/PySide/QtCore/QModelIndex.html)。这就是我迷路的地方。这个论点是为了什么？它从何而来？从概念上讲，我不明白为什么我需要这个参数，具体来说，我不知道应该将什么值传递给函数以使其工作。`parent``parent`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:50:11.140

例如，您会`parent`在 a 中找到有用的`QTreeView`。对于您的用例，这是文档的相关部分：

> 项目视图、委托和选择模型使用索引来定位模型中的项目
> **......**
> 在引用模型中的顶级项目时，无效索引通常用作父索引。”

随着`QtCore.QModelIndex()`您将创建一个无效的索引，这就是您正在寻找的论点。在此示例中，您可以使用上下文菜单打印行的选择状态：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QTableView):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.modelSource = QtGui.QStandardItemModel(self)

        for rowNumber in range(3):
            items = []
            for columnNumber in range(3):
                item = QtGui.QStandardItem()
                item.setText("row: {0} column: {0}".format(rowNumber, columnNumber))

                items.append(item)

            self.modelSource.appendRow(items)

        self.actionSelectedRows = QtGui.QAction(self)
        self.actionSelectedRows.setText("Get Selected Rows")
        self.actionSelectedRows.triggered.connect(self.on_actionSelectedRows_triggered)

        self.contextMenu = QtGui.QMenu(self)
        self.contextMenu.addAction(self.actionSelectedRows)

        self.setModel(self.modelSource)
        self.setContextMenuPolicy(QtCore.Qt.CustomContextMenu)
        self.setSelectionBehavior(QtGui.QAbstractItemView.SelectRows)
        self.horizontalHeader().setStretchLastSection(True)
        self.customContextMenuRequested.connect(self.on_customContextMenuRequested)

    @QtCore.pyqtSlot(bool)
    def on_actionSelectedRows_triggered(self, state):
        for rowNumber in range(self.model().rowCount()):
            info = "Row {0} is ".format(rowNumber)
            if self.selectionModel().isRowSelected(rowNumber, QtCore.QModelIndex()):
                info += "selected"

            else:
                info += "not selected"

            print info

    @QtCore.pyqtSlot(QtCore.QPoint)
    def on_customContextMenuRequested(self, pos):
        self.contextMenu.exec_(self.mapToGlobal(pos))

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.resize(333, 222)
    main.show()

    sys.exit(app.exec_()) 
```

# php - mysqlworkbench 在导出数据库时给出版本错误

> ID：15644697
> 
> 赞同：74
> 
> 时间：2013-03-26T18:27:39.467
> 
> 标签：php, mysql, export, mysql-workbench

当我尝试通过 MySQL Workbench 从本地服务器远程导出我的数据库时，

我收到一些低于版本的错误：

> mysqldump Version Mismatch [内容] mysqldump.exe 是5.5.16 版本，但是要转储的MySQL Server 有5.6.10-log 版本。因为mysqldump的版本比服务器旧，有些功能可能无法正常备份。建议您升级本地 MySQL 客户端程序，包括 mysqldump 到等于或高于目标服务器的版本。然后必须在 Preferences -> Administrator -> Path to mysqldump Tool 中设置转储工具的路径

我正在尝试找到解决方案 - 我在谷歌上搜索了解决方案，但找不到解决问题的好答案。

有谁知道，如何在 MySQL Workbench 中解决这个问题？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-03-28T20:01:46.033

转到：`Edit`-> `Preferences`-> `Administrator`-> `Path to Mysqldumptool`：在您的 MySQL 服务器安装文件夹中
查找`mysqldump.exe`文件（可能是：）`mysql/bin/`。然后单击它，然后`OK`。之后尝试进行备份。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-08-18T14:06:23.460

幸运的是，虽然不是很明显，但有一个相当简单的解决方案。您只需要更新`mysqldump.exe`. 该文件的最新版本`.exe`可以在 中找到。要解决该问题，只需转到`Edit->Preferences->Administrator`，然后浏览以下路径

```
C:\Program Files\MySQL\MySQL Server 5.6\bin\mysqldump.exe 
```

抓住这个文件并在`Path to mysqldump tool`文本框中替换它

可能是在上面提到的之前设置了以下路径，所以只需将其替换为较新的路径

```
C:\Program Files\MySQL\MySQL Workbench CE 5.2.47\mysqldump.exe 
```

路径对您来说可能略有不同，但解决方案保持不变。在某些操作系统（64 位）中，有两个文件夹 `C:\Program Files (x86)\MySQL` ， `C:\Program Files\MySQL` 但你必须去找`C:\Program Files\MySQL` 希望它会有所帮助:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-11T12:56:20.490

在基于 Linux 的 Ubuntu 中，编辑 > 首选项... > 管理（选项卡），将“mydqldump 工具的路径”设置为**/usr/bin/mysqldump**（很可能默认情况下就是它应该在的位置）。

如果不确定，可以尝试通过在终端中运行以下命令来查找 mysqldump 所在的位置：

```
locate mysqldump 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T07:50:54.377

该消息说您需要更新的 mysqldump 工具。与您要从中转储的服务器匹配的服务器。因此，根据您运行的平台，从具有最新版本的服务器安装中获取 mysqldump 工具的副本。每台服务器都带有一个 mysqldump 工具。所以应该很容易得到一个副本。

将工具放在它具有持久主目录但不与其他实例冲突的位置，并将 MySQL Workbench 指向它（如消息所述）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-29T23:20:19.733

我试图使用默认的 mysqldump 来解决这个问题`Edit > Preferences... > Administration (tab)`，并且设置 from `/usr/bin/mysqldump`which 不起作用。

我看到 XAMPP 服务器也有一个运行良好的 mysqldump 文件！通常，您可以在`/opt/lampp/bin/mysqldump`（对于 Debian 和类似的）中找到它，因此您可以在工作台内的首选项中使用此路径。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-01T13:55:46.960

在我的 Mac 上（运行最新的 Mac OS Sierra），我将 mysqldump 的路径更改为 /Applications/XAMPP/xamppfiles/bin/mysqldump，这解决了问题。以前，路径被设置为 mysqldump 的不同版本（旧版本）。因此，您需要获取最新版本的 mysqldump。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-04T10:10:18.943

当您的 mysql 工作台的版本与您的 mysql 服务器的版本不同时，就会发生这种情况。对此的解决方案是使用与您的服务器版本相同的 mysqldump.exe 进行导出/转储。脚步 ：

1.  下载与您的服务器相同版本的 mysql zip。（例如 mysql-5.7.25-winx64.zip）
2.  在这个 zip 中，您会在 bin 文件夹下找到 mysqldump.exe。
3.  打开 Mysql 工作台。转到编辑 -> 首选项 -> 管理。
4.  现在，在 mysqldump 工具的路径中：，给出这个下载的 mysqldump.exe 的路径

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-10-29T14:51:24.023

[我确实从这里https://downloads.mysql.com/archives/community/](https://downloads.mysql.com/archives/community/)为需要的 mysql 版本存档了

并从那里使用mysqldump。它对我有帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-25T19:31:49.347

由于这些答案对于 Mac 用户来说并不完全清楚，因此我在这里找到了我的 MySQLDump 文件：

应用程序 > MAMP > 库 > bin > mysqldump

快速搜索“mysqldump”应该可以找到它。我遵循上述答案并转到：

首选项 > 管理 > mysqldump 工具的路径：

这是我现在的路径：/Applications/MAMP/Library/bin/mysqldump

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-16T19:59:44.327

对我有用的解决方案如下：

1.  进入页面[https://www.pconlife.com/viewfileinfo/mysqldump-exe/](https://www.pconlife.com/viewfileinfo/mysqldump-exe/) 有一个 mysqldump.exe 文件列表，他们必须下载与错误中出现的版本匹配的版本。

2.  然后转到通常安装 mysql 的文件夹 C:\Program Files\MySQL\MySQL Workbench 8.0 CE 他们把下载的文件放在那里，然后给它替换。

3.  现在打开 MySQL，他们将更改出现在的路径：Preferences> Administration> Path to mysqldump tool：通过替换文件所在的地址

就这样

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-19T11:18:25.733

如果上述解决方案均无效，则可以在 wb_admin_export.py 中硬编码 mysqldump 的版本

```
def get_mysqldump_version():
    #path = get_path_to_mysqldump()
    #if not path:
    #    log_error("mysqldump command was not found, please install it or configure it in Edit -> Preferences -> Administration")
    #    return None
    #  
    #output = StringIO.StringIO()
    #rc = local_run_cmd('"%s" --version' % path, output_handler=output.write)
    #output = output.getvalue()
    #
    #if rc or not output:
    #    log_error("Error retrieving version from %s:\n%s (exit %s)"%(path, output, rc))
    #    return None
    #  
    #regexp = ".*Ver ([\d.a-z]+).*"
    #if ("Distrib" in output):
    #    regexp = ".*Distrib ([\d.a-z]+).*"
    #
    #s = re.match(regexp, output)
    #
    #if not s:
    #    log_error("Could not parse version number from %s:\n%s"%(path, output))
    #    return None
    #
    #version_group = s.groups()[0]
    #major, minor, revision = [int(i) for i in version_group.split(".")[:3]]
    #return Version(major, minor, revision)
    return Version(5, 7, 30) 
```

只有这对我有用：Windows 上的 Workbench 和远程 linux 上的 Mysql 服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-21T05:05:42.750

对于 Mac 用户，它只有在重新启动 Mysql Workbench 后才能工作，在设置中将 Path 设置为 Mysqldumptool （编辑 - 首选项 - 管理员）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-23T08:47:02.723

Mac 用户在这里：我在更新 MySQLWorkbench 后遇到了这个问题。尝试了一切......最后，我下载了旧版本并降级了MySQLWorkbench。完美地工作。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-09-18T11:00:36.447

我必须制作远程数据库的本地副本，并且面临 MySQLWorkbench 的版本问题。为了避免重新安装MySQLWorkbench以适应远程数据库版本，我做了next：

1.  我使用 ssh 将我的数据库从远程服务器导出到 /home/my-user/ 文件夹（在远程服务器上）：

    root@bananapi# **mysqldump -u root -p my-incredible-password > /home/my-user/database-dump-18-set-2020.sql**

2.  在 /home/my-user/ 远程目录中拥有 sql 脚本，我使用 scp 命令将其下载到本地文件夹中：

    my-user % **scp root@remote-server-ip-address:/home/my-user/database-dump-18-set-2020.sql /Users/my-mac-user/tmp/**

我只需要使用我的 MySQLWorkbench 打开 sql 脚本文件并将数据导入本地数据库。我希望这可以帮助某人。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-07-17T10:15:17.977

wb_admin_export.py（由 mysqldump 使用）查看**PATH**变量以查找 mysqldump 并获取版本号。确保它的 mysqldump 来自 mysql bundle，而不是 mysql workbench ...

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-02T20:32:26.643

这里没有其他答案对我有用，所以我将发布另一种修复我的方法（我使用的是 Windows WSL Ubuntu 18.04）。

**TL;DR**：检查您的 MySQL 配置文件中是否有该行，如果您现在不需要它，请将其`local_infile=1`更改为或将其完全注释掉，然后重新启动您的 MySQL Workbench。`loose-local-infile=1`

**进一步说明**：我关闭了 MySQL Workbench 并打开了我的终端并运行`mysqldump --version`，它给了我这个错误：`mysqldump: [ERROR] unknown variable 'local_infile=1'.`，我意识到我`/etc/my.cnf`之前在文件中添加了一些东西，以便使用本地文件将一些数据导入数据库，但是[作为事实证明](https://lists.mysql.com/mysql/206182)，其他一些 MySQL 工具（可能是 mysqldump）不能很好地理解这一行，所以我将其注释掉，然后`mysqldump --version`工作正常并给出正确的版本号，没有任何其他问题。现在我再次打开 MySQL Workbench，这次它工作正常。

HTH。

# java - 如何去除 Java 字符串中的空/单字符括号

> ID：15644699
> 
> 赞同：1
> 
> 时间：2013-03-26T18:27:44.637
> 
> 标签：java, regex

我想去掉括号内单个字符的所有内容。例如，在字符串“I am at part (a) and not (aaa)”中，期望的结果是“I am at part and not (aaa)”，其中第二个括号对被保留，因为它更长。我怎样才能在 Java 中做到这一点？我已经尝试了以下，但它不匹配任何东西！

```
 String text = "the meaning of 5 U.S.C. 552(a)(6)(B) and Section 1.16(b) .";
 text.replaceAll("\\(.?\\)", ""); // should return "the meaning of 5 U.S.C. 552 and Section 1.16 ." but doesn't! 
```

我认为问题在于我如何转义反斜杠和括号字符，但我尝试了许多变体，例如“\\(.?\\)”无济于事。此外，他们似乎在在线正则表达式网站上工作，所以我完全不知道可能出了什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:30:06.933

您的正则表达式看起来不错 - 您是否可能忘记将结果分配给变量？

```
text = text.replaceAll("\\(.?\\)", ""); 
```

# javascript - 2 Javascripts 不能互相工作......（平滑滚动和淡入淡出的身体）

> ID：15644701
> 
> 赞同：0
> 
> 时间：2013-03-26T18:27:47.387
> 
> 标签：javascript, jquery, scroll, fade

亲爱的stackoverflowers，

我有两个似乎不能一起正常工作的 javascript 片段。第一个是在导航中的单击事件上淡出正文，然后重定向到不同的页面。但这似乎只有在我单击触发“JavaScript-2”的链接后才有效。

这是第一个的代码：

```
// JavaScript-1
<script type="text/javascript">   
        $("a.transition").click(function(event){         
            event.preventDefault();                      
            linkLocation = this.href;
            $("body").fadeOut(1000, redirectPage);      
        });

        function redirectPage() {
            window.location = linkLocation;
        }
</script> 
```

'JavaScript-2' 是第二个，它与 'jquery.easing.1.3.js' 一起工作，并产生很好的平滑滚动到锚点。滚动总是可以正常工作，并且在所有情况下都会触发。

我不知道为什么，但看起来平滑滚动的 javascript 会导致其他 javascript 失败。

我真的很期待这个小谜团的答案。

这是第二个的代码：

```
 // JavaScript-2 
    <script type="text/javascript">  
        $(function() {
            $('ul.navscroll a, #test a').bind('click',function(event){              
                var $anchor = $(this);

                $('html, body').stop().animate({
                    scrollTop: $($anchor.attr('href')).offset().top
                }, 1500,'easeInOutExpo');
                event.preventDefault();
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:40:22.520

尝试`Javascript-1`像这样更新您的代码：

```
// JavaScript-1
<script type="text/javascript">   
   $(function() { // this fires the jQuery after load
        var linkLocation = false; // define the linkLocation var

        $("a.transition").click(function(event){         
            event.preventDefault();                      
            linkLocation = this.href;
            $("body").fadeOut(1000, redirectPage);      
        });

        function redirectPage() {
            window.location = linkLocation;
        }
   });
</script> 
```

这里纠正了两个主要问题：

1.  `$(function() {...});`将在 DOM 完全加载后触发 jQuery-Events
2.  `var linkLocation`必须在`redirectPage()`-Method中访问它们之前定义

为了消除错误`Javascript-2`（它破坏了 Javascript），像这样更新它们：

```
// JavaScript-2 
<script type="text/javascript">  
    $(function() {
        $('ul.navscroll a, #test a').bind('click',function(event){              
            target = $(this).attr('href'); // find the top of the target
            offset = $(target).offset(); // this returns an object {top: y,left: x}
            $('html, body').stop().animate({
                scrollTop: offset.top
            }, 1500,'easeInOutExpo');
            event.preventDefault();
        });
    });
</script> 
```

现在，如果您单击一个链接，`href='#test'`您将滚动到具有 ID 测试的元素，例如您的`<footer id='test'>`.

# c# - c# hookinig API

> ID：15644707
> 
> 赞同：0
> 
> 时间：2013-03-26T18:27:57.213
> 
> 标签：c#, api, hook, easyhook

我正在研究一个反作弊，我想挂钩诸如 Read/WriteProcessMemory、OpenProcess 之类的 API，也许还有一些 API 来检查它是否从游戏读取或写入一些数据。

但我不是那种有经验的程序员自己做的，所以我尝试通过easyhook来做。首先，我让示例（[http://www.codeproject.com/Articles/27637/EasyHook-The-reinvention-of-Windows-API-hooking](http://www.codeproject.com/Articles/27637/EasyHook-The-reinvention-of-Windows-API-hooking)）工作。然后我尝试替换`CreateFile`，`ReadProcessMemory`但是有一条线，如果我被钩住了`This.Queue.Push(hProcess);`，我应该如何替换？`hProcess``ReadProcessMemory`

除了上面发布的挂钩之外，我找不到任何其他在 C# 中挂钩 API 的示例`CreateFile`。如果有更简单的方法，也不需要通过easyhook来完成。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:43:04.800

我没有阅读所有那篇文章，但我理解它的方式，

```
 This.Queue.Push(<argument to the original function>) 
```

部分用于他的示例的跟踪部分。

如果您只想阻止某人调用 ReadProcessMemory，那么您不需要这样做，也不会调用原始入口点 - 只需将 FALSE 返回给调用者。

# vb.net - 您如何使用 vb.net 在 5 中找到最大的数字？

> ID：15644712
> 
> 赞同：5
> 
> 时间：2013-03-26T18:28:06.780
> 
> 标签：vb.net, find, max

这是在 3 中查找最大值的代码，但我想要在 5 中查找最大值的代码：

```
Dim a, b, c As Integer

a = InputBox("enter 1st no.") 
b = InputBox("enter 2nd no.") 
c = InputBox("enter 3rd no.")

If a > b Then 
    If a > c Then 
        MsgBox("A is Greater") 
    Else 
        MsgBox("C is greater") 
    End If 
Else 
    If b > c Then 
        MsgBox("B is Greater") 
    Else 
        MsgBox("C is Greater")
    End If 
End If 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T18:33:49.710

将值放入数组并[使用`Max`函数`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.max.aspx)：

```
'Requires Linq for Max() function extension
Imports System.Linq
'This is needed for List
Imports System.Collections.Generic

' Create a list of Long values. 
Dim longs As New List(Of Long)(New Long() _
                                   {4294967296L, 466855135L, 81125L})

' Get the maximum value in the list. 
Dim max As Long = longs.Max()

' Display the result.
MsgBox("The largest number is " & max)

' This code produces the following output: 
' 
' The largest number is 4294967296 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T19:50:13.887

正如大卫建议的那样，将您的价值观列在一个列表中。这比使用单个变量更容易，并且可以根据要求扩展到尽可能多的值（多达数百万个值）。

如果出于某种原因需要保留单个变量，请执行以下操作：

```
Dim max As Integer = a
Dim name As String = "A"
If b > max Then
    max = b
    name = "B"
End If
If c > max Then
    max = c
    name = "C"
End If
If d > max Then
    max = d
    name = "D"
End If
' ...  extend to as many variables as you need.
MsgBox(name & " is greater") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T19:41:59.960

给你一个简单的解决方案，

```
Dim xMaxNo As Integer
Dim xTemp As Integer

For i as integer = 1 To 5
   xTemp =  InputBox("enter No: " & i)
   xMaxNo = if(xTemp > xMaxNo, xTemp, xMaxNo)
Next

MsgBox("The Highest Number is " & xMaxNo) 
```

# sql - 在同一个 SELECT sql 查询中从 SUM() 计算百分比

> ID：15644713
> 
> 赞同：2
> 
> 时间：2013-03-26T18:28:08.000
> 
> 标签：sql, postgresql, count, aggregate-functions, postgresql-9.1

表`my_obj`中有两个整数字段：

```
(value_a integer, value_b integer); 
```

我试着计算多少时间`value_a = value_b`，我想用百分比来表示这个比率。这是我尝试过的代码：

```
select sum(case when o.value_a = o.value_b then 1 else 0 end) as nb_ok,
       sum(case when o.value_a != o.value_b then 1 else 0 end) as nb_not_ok,
       compute_percent(nb_ok,nb_not_ok)
from  my_obj as o
group by o.property_name; 
```

`compute_percent`是一个简单的存储过程`(a * 100) / (a + b)`

但是 PostgreSQL 抱怨该列`nb_ok`不存在。
你会如何正确地做到这一点？

我将 PostgreSQL 9.1 与 Ubuntu 12.04 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:22:30.707

这个问题比看起来的要多。

### 简单版

这**更快**更简单：

```
SELECT property_name
      ,(count(value_a = value_b OR NULL) * 100) / count(*) AS pct
FROM   my_obj
GROUP  BY 1; 
```

结果：

```
property_name | pct
--------------+----
 prop_1       | 17
 prop_2       | 43 
```

如何？

*   你根本不需要这个功能。

*   而不是计数`value_b`（你不需要开始）和计算总数，使用`count(*)`总数。更快，更简单。

*   这假设您没有**`NULL`**值。即定义了两列`NOT NULL`。您的问题中缺少信息。
    如果没有，您的原始查询**可能没有按照您的想法执行**。如果任何值为 NULL，则您的版本根本不计算该行。您甚至可以通过这种方式引发*除零*异常。
    此版本也适用于 NULL。`count(*)`产生所有行的计数，无论值如何。

*   以下是计数的工作原理：

    ```
     TRUE  OR NULL = TRUE
     FALSE OR NULL = NULL 
    ```

    `count()`忽略 NULL 值。瞧。

*   [运算符优先级](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-PRECEDENCE)控制`=`之前的绑定`OR`。您可以添加括号以使其更清晰：

    ```
    count ((value_a = value_b) OR FALSE) 
    ```

*   你可以这样做

    ```
    count NULLIF(<expression>, FALSE) 
    ```

*   结果类型默认`count()`为`bigint`。
    除法`bigint / bigint`，**截断小数位数**。

### 包括小数位

使用**`100.0`**（带小数位）强制计算为`numeric`，从而保留小数位。
你可能想[`round()`](http://www.postgresql.org/docs/current/interactive/functions-math.html#FUNCTIONS-MATH-FUNC-TABLE)用这个：

```
SELECT property_name
      ,round((count(value_a = value_b OR NULL) * 100.0) / count(*), 2) AS pct
FROM   my_obj
GROUP  BY 1; 
```

结果：

```
property_name | pct
--------------+-------
 prop_1       | 17.23
 prop_2       | 43.09 
```

顺便说一句：
我使用`value_a`而不是`valueA`. 不要在 PostgreSQL 中使用不带引号的混合大小写标识符。我已经看到太多来自这种愚蠢的绝望问题。如果您想知道我在说什么，请阅读手册中的[标识符和关键字](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)一章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:32:02.117

可能最简单的方法就是使用 with 子句

```
WITH data 
     AS (SELECT Sum(CASE WHEN o.valuea = o.valueb THEN 1 ELSE 0 END) AS nbOk, 
                Sum(CASE WHEN o.valuea != o.valueb THEN 1 ELSE 0 END) AS nbNotOk, 
         FROM   my_obj AS o 
         GROUP  BY o.property_name) 
SELECT nbok, 
       nbnotok, 
       Compute_percent(nbok, nbnotok) 
FROM   data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:47:28.163

您可能还想试试这个版本：

```
WITH all(count) as (SELECT COUNT(*)
                    FROM my_obj),
     matching(count) as (SELECT COUNT(*)
                         FROM my_obj
                         WHERE valueA = valueB)
SELECT nbOk, nbNotOk, Compute_percent(nbOk, nbNotOk)
FROM (SELECT matching.count as nbOk, all.count - matching.count as nbNotOk
      FROM all
      CROSS JOIN matching) data 
```

# regex - Perl正则表达式在特定模式之后grep一个单词

> ID：15644716
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:28:12.410
> 
> 标签：regex, perl, grep

我将以下行分配给一个变量：

```
"[ some contents ] NAME:saranyya" 
```

我怎样才能`grep`得到这个模式之后的一个词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:43:45.290

一个简单的捕获可能会满足您的需要。虽然目前还不清楚你的意思。

```
my ($word) = $string =~ /\Q[ some contents ] NAME:saranyya \E(.+)/; 
```

转义将允许在您的正则表达式`\Q .. \E`中使用元字符。`[]`遵循您的模式的任何文本都将被捕获并分配给`$word`.

# xml - XPath 查询条件表示：“集合不包含任何/全部”或“集合包含任何/全部”

> ID：15644723
> 
> 赞同：1
> 
> 时间：2013-03-26T18:29:04.617
> 
> 标签：xml, xpath

给定以下 XML（来自 W3Schools）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book category="COOKING">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
</book>

<book category="CHILDREN">
  <title lang="en">Harry Potter</title>
  <author>J K. Rowling</author>
  <year>2005</year>
  <price>29.99</price>
</book>

<book category="WEB">
  <title lang="en">XQuery Kick Start</title>
  <author>James McGovern</author>
  <author>Per Bothner</author>
  <author>Kurt Cagle</author>
  <author>James Linn</author>
  <author>Vaidyanathan Nagarajan</author>
  <year>2003</year>
  <price>49.99</price>
</book>

<book category="WEB">
  <title lang="en">Learning XML</title>
  <author>Erik T. Ray</author>
  <year>2003</year>
  <price>39.95</price>
</book>

</bookstore> 
```

有没有办法退回满足：

1.  (A, B, ...) 中的任何一个作为作者存在吗？
2.  所有（A，B，...）都作为作者存在？
3.  (A, B, ...) 中的任何一个都不应该作为作者存在吗？
4.  所有 (A, B, ...) 不应该作为作者一起存在吗？

其中 (A, B, ...) 是一组作者姓名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:33:37.327

**这里是所有通缉的表达**。我假设名称集不仅仅是作为字符串集提供的（XPath 1.0 中没有这样的概念），而是作为节点集提供的，其中每个节点的字符串值是我们必须拥有的名称之一.

我还使用 XSLT 1.0，以便显示四个 XPath 表达式中每一个表达式的计算结果。

作为作者姓名的集合，我选择了名为“XQuery Kick Start”的书的作者姓名。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vAuthors" select="/*/*[3]/author"/>

 <xsl:template match="/">
  1\. Any of (A, B, ...) exist as authors: <xsl:text/>

  <xsl:value-of select="boolean($vAuthors[. = /*/*/author])"/>

  2\. All of (A, B, ...) exist as authors: <xsl:text/>

  <xsl:value-of select="not($vAuthors[not(. = /*/*/author)])"/>

  3\. Any of (A, B, ...) should not exist as authors: <xsl:text/>

  <xsl:value-of select="not($vAuthors[. = /*/*/author])"/>

  4\. All of (A, B, ...) should not exist as authors together: <xsl:text/>

  <xsl:value-of select=
    "not(/*/*[count(author[. = $vAuthors]) = count($vAuthors)])"/>

 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<bookstore>
    <book category="COOKING">
        <title lang="en">Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>30.00</price>
    </book>
    <book category="CHILDREN">
        <title lang="en">Harry Potter</title>
        <author>J K. Rowling</author>
        <year>2005</year>
        <price>29.99</price>
    </book>
    <book category="WEB">
        <title lang="en">XQuery Kick Start</title>
        <author>James McGovern</author>
        <author>Per Bothner</author>
        <author>Kurt Cagle</author>
        <author>James Linn</author>
        <author>Vaidyanathan Nagarajan</author>
        <year>2003</year>
        <price>49.99</price>
    </book>
    <book category="WEB">
        <title lang="en">Learning XML</title>
        <author>Erik T. Ray</author>
        <year>2003</year>
        <price>39.95</price>
    </book>
</bookstore> 
```

**计算 XPath 表达式并将其结果复制到输出：**

```
 1\. Any of (A, B, ...) exist as authors: true

  2\. All of (A, B, ...) exist as authors: true

  3\. Any of (A, B, ...) should not exist as authors: false

  4\. All of (A, B, ...) should not exist as authors together: false 
```

# javascript - 以所有可能的尺寸自动调整画布

> ID：15644724
> 
> 赞同：2
> 
> 时间：2013-03-26T18:29:11.067
> 
> 标签：javascript, css, html, canvas, size

我有一个 canvas-fx 代码（“星星”从深到前，全部居中，模拟空间导航；这**不是**我做的），我想把它放在一个网站中作为背景。

我想要它，以便当用户调整窗口大小（向右或向左或调整大小或其他）时，效果可以自动调整，以便星星总是以任何大小从中心出现，甚至改变桌面分辨率（我参考 FX 可以自动重置，就像渲染 webcode 时一样）。

我也想要它，以便代码可以根据正文内容的大小自行调整（即从上到下添加内容等）。

最后，我怎样才能退出底部栏，只留下右边的滚动条？

这是我正在使用的完整代码：

```
<!DOCTYPE html>
<html lang="es">

    <head>
        <meta charset="utf-8">
        <title>FX TEST</title>
        <STYLE type="text/css">
            html, body {
                width:100%;
                height:100%;
            }
            #Canvas2D {
                position:absolute;
                top:0;
                left:0;
            }
            #content {
                z-index: 10;
                position: relative;
            }
        </STYLE>
        <script language="JavaScript">
            function setup() {
                var fov = 150;
                var SCREEN_WIDTH = 1920;
                var SCREEN_HEIGHT = 1080;
                var HALF_WIDTH = SCREEN_WIDTH / 2;
                var HALF_HEIGHT = SCREEN_HEIGHT / 2;
                var numPoints = 300;

                function draw3Din2D(point3d) {
                    x3d = point3d[0];
                    y3d = point3d[1];
                    z3d = point3d[2];
                    var scale = fov / (fov + z3d);
                    var x2d = (x3d * scale) + HALF_WIDTH;
                    var y2d = (y3d * scale) + HALF_HEIGHT;
                    c.lineWidth = scale;
                    c.strokeStyle = "rgb(255,255,255)";
                    c.beginPath();
                    c.moveTo(x2d, y2d);
                    c.lineTo(x2d + scale, y2d);
                    c.stroke();
                }
                var canvas = document.getElementById('Canvas2D');
                var c = canvas.getContext('2d');
                var points = [];

                function initPoints() {
                    for(i = 0; i < numPoints; i++) {
                        point = [(Math.random() * 400) - 200, (Math.random() * 400) - 200, (Math.random() * 400) - 200];
                        points.push(point);
                    }
                }

                function render() {
                    c.fillStyle = "rgb(0,0,0)";
                    c.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);
                    for(i = 0; i < numPoints; i++) {
                        point3d = points[i];
                        z3d = point3d[2];
                        z3d -= 4;
                        if(z3d < -fov) z3d += 400;
                        point3d[2] = z3d;
                        draw3Din2D(point3d);
                    }
                }
                initPoints();
                var loop = setInterval(function () {
                    render();
                }, 50);
            }
        </script>
    </head>

    <body onload="setup();">
        <canvas id="Canvas2D" width="1920" height="1080">NOT USING HTML5 SUPPORT</canvas>
        <div id="content">
            <z-index: 0></z-index:>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:35:31.500

## **[现场演示](http://jsfiddle.net/loktar/nr8jr/)**

## **[全屏演示](http://fiddle.jshell.net/loktar/nr8jr/show/light/)**

以下是我为使其正常工作所做的修改。首先删除画布元素中的大小。将其更改为

```
<canvas id="Canvas2D"></canvas> 
```

接下来是我用画布全屏做任何事情时用于我的 CSS 的内容。

```
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}
#Canvas2D {
    position:absolute;
    top:0;
    left:0;
} 
```

这是使这一切正常工作所需的 JS

```
 // set the width and height to the full windows size
    var SCREEN_WIDTH = window.innerWidth;
    // Change to scroll height to make it the size of the document
    var SCREEN_HEIGHT = document.documentElement.scrollHeight;

    // Make sure to set the canvas to the screen height and width.
    canvas.width = SCREEN_WIDTH;
    canvas.height = SCREEN_HEIGHT;

// everytime we resize change the height and width to the window size, and reset the
// center point  
window.onresize = function () {
    SCREEN_HEIGHT = canvas.height = document.documentElement.scrollHeight;
    SCREEN_WIDTH = canvas.width = document.body.offsetWidth;    
    HALF_WIDTH = SCREEN_WIDTH / 2;
    HALF_HEIGHT = SCREEN_HEIGHT / 2;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:22:05.313

好吧，首先，**非常感谢** *@Loktar*的内在支持。

现在我一直在编写我将放入我自己的官方网站的代码（重新启动它）。

*在@Loktar*的帮助下，问题是**垂直自动调整不起作用**，所以*我改变了这个*：

```
var SCREEN_HEIGHT = document.documentElement.scrollHeight; 
```

*对此*：

```
var SCREEN_HEIGHT = window.innerHeight; 
```

*这*：

```
SCREEN_HEIGHT = canvas.height = document.documentElement.scrollHeight; 
```

*改为*：

```
SCREEN_HEIGHT = canvas.height = document.body.offsetHeight; 
```

现在它垂直居中也很好。

第二个问题是，当你没有给画布命令一个确切的大小时它不会显示滚动条，所以我资助了一个样式代码，在我适应这个 fx 之后，现在你可以水平滚动条和垂直。您需要做的是将此添加到您网站的样式中：

```
div.scroll
{
width:100%;
height:100%;
overflow:scroll;
} 
```

对于在带有类的内容的 div 中调用它之后，如下所示：

```
<div id="content" class="scroll"> 
```

现在，您将在需要时激活滚动条。它在 Internet Explorer 和 Firefox 上进行了测试并且可以工作。我希望它有助于应用于其他几个画布代码。

最后，我在这里留下了最终代码的外观，以及它在我的官方网站上的部分外观：

```
<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="utf-8">

<title>FX TEST</title>

<STYLE type="text/css"> 
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
}
#Canvas2D {
    position:absolute;
    top:0;
    left:0;

}
#content {
    z-index: 10;
    position: relative;
}

div.scroll
{
width:100%;
height:100%;
overflow:scroll;
}
</STYLE> 

<script language="JavaScript">
function setup() {

    var fov = 150;
var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;

    var HALF_WIDTH = SCREEN_WIDTH / 2;
    var HALF_HEIGHT = SCREEN_HEIGHT / 2;
    var numPoints = 300;

    function draw3Din2D(point3d) {
        x3d = point3d[0];
        y3d = point3d[1];
        z3d = point3d[2];
        var scale = fov / (fov + z3d);
        var x2d = (x3d * scale) + HALF_WIDTH;
        var y2d = (y3d * scale) + HALF_HEIGHT;

        c.lineWidth = scale;
        c.strokeStyle = "rgb(255,255,255)";
        c.beginPath();
        c.moveTo(x2d, y2d);
        c.lineTo(x2d + scale, y2d);
        c.stroke();

    }

    var canvas = document.getElementById('Canvas2D');
    var c = canvas.getContext('2d');

    canvas.width = SCREEN_WIDTH;
    canvas.height = SCREEN_HEIGHT;

    var points = [];

    function initPoints() {
        for (i = 0; i < numPoints; i++) {
            point = [(Math.random() * 400) - 200, (Math.random() * 400) - 200, (Math.random() * 400) - 200];
            points.push(point);
        }

    }

    function render() {

        c.fillStyle = "rgb(0,0,0)";
        c.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);

        for (i = 0; i < numPoints; i++) {
            point3d = points[i];

            z3d = point3d[2];
            z3d -= 4;
            if (z3d < -fov) z3d += 400;
            point3d[2] = z3d;

            draw3Din2D(point3d);

        }
    }

    initPoints();

    var loop = setInterval(function () {
        render();
    }, 50);

    window.onresize = function () {
SCREEN_HEIGHT = canvas.height = document.body.offsetHeight;
    SCREEN_WIDTH = canvas.width = document.body.offsetWidth;
        HALF_WIDTH = SCREEN_WIDTH / 2;
        HALF_HEIGHT = SCREEN_HEIGHT / 2;
    };
}

setup();
</script>

</head>

<body onload="setup();">

<canvas id="Canvas2D"></canvas>

<div id="content" class="scroll">
<z-index: 0>

</z-index:>
</div>

</body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:31:01.823

将画布的宽度和高度设置为 100%。

# tcp - 使用 SIP，何时使用 TCP 而不是 UDP？

> ID：15644726
> 
> 赞同：25
> 
> 时间：2013-03-26T18:29:19.167
> 
> 标签：tcp, udp, sip, voip

我非常了解 UDP 和 TCP 之间的区别*（*例如[http://www.onsip.com/about-voip/sip/udp-versus-tcp-for-voip](http://www.onsip.com/about-voip/sip/udp-versus-tcp-for-voip)）

问题是，在什么情况下使用 TCP 作为传输特别是在 SIP VOiP 通信下具有优势？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-26T18:45:50.623

很多人通常会将 UDP 与 voip 相关联，并且可能会留在那里，但简单来说，voip 有两个部分 - 连接和语音数据传输。

SIP 是一种非常轻量级的协议，一旦建立连接，它就会有效地保持空闲状态，直到有人拨打电话的罕见事件。TCP（与 UDP 不同）实际上将通过消除需要减少到服务器的流量；

1.  每隔几分钟重新注册一次
2.  刷新/ping 服务器

您可以通过 TCP 运行 SIP，然后使用（推荐的）UDP 进行 RTP。

我忍不住也指出了我看过的明显的东西。例如。连接到服务器的设备数量。随着数量的增长，等式向 UDP 倾斜。但是您还必须考虑扩展 SIP 用户代理以涵盖多种编解码器、多媒体、视频和屏幕共享。INVITE 数据包可能开始变大，并可能超过 UDP 单个数据报大小，从而再次倾斜等式以支持 TCP。

说了这么多，我希望你有足够的信息来回答你想要回答的问题。

希望这可以帮助。

信用：onSip 的精彩讨论：[https ://www.onsip.com/blog/sip-via-udp-vs-tcp](https://www.onsip.com/blog/sip-via-udp-vs-tcp)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-29T00:47:17.253

对于移动设备，基于 TCP 的 SIP 比 UDP 具有显着优势。原因是由于使用了 NAT，以及无线路由器或信元提供商的路由器中的 NAT 表条目通常如何比 TCP 更快地超时。由于保持相同的 NAT 表条目对于能够可靠地接收呼叫是必要的，因此 SIP 必须定期发送保持活动状态以维护 NAT 表条目。UDP（可能每 30 秒）与 TCP（可能每 15 分钟）相比，所需的保持活动频率要高得多，因此导致移动设备电池使用量明显增加。通常，当您看到有人抱怨他们的电池使用量在使用 VOIP 客户端时受到重大打击时，这是因为客户端使用的是 UDP。

因此，对于移动设备，TCP 胜过 UDP。

请注意，以上假设您希望能够在移动设备上可靠地接听电话。如果您只想打电话，那就另当别论了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-26T20:28:33.263

如果消息很大（在 MTU 大小的 200 字节内），则 RFC 3261 第 18.1.1 节要求使用 TCP（准确地说，它要求使用“拥塞控制的传输协议，例如 TCP”）。`INVITE`在发送包含大量标头和复杂请求 URI的初始值时，我在实践中遇到了这一点。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-02T17:32:31.887

您无法从基于 TCP 的协议可靠地组装音频流。在音频中，丢包比因为丢包而重发包要好得多。如果数据包时序中存在过度抖动，音频将无法工作。音频是实时的，需要像 UDP 这样的协议才能正常工作。丢包不会破坏音频，只会降低质量。TCP 的完美交付对音频没有任何帮助，如果您获得 100% 的数据包，就没有质量，但它们不是实时的。在音频中，时间（延迟、抖动）比数据完整性更能决定质量。

当信号和控制通过 TCP 但语音数据通过 UDP 时，此 sip 效果***最佳。***

自从我在 1987 年为日本新兴的数字蜂窝网络设计了首批智能手机之一以来，我一直致力于通过网络协议传输数字语音。自 1987 年以来，数字语音传输唯一没有改变的方面就是我在此描述的内容。音频（语音）传输的实时性以及它对系统设计的影响仍然与我从前的恐龙时代完全一样。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-03-01T08:33:37.157

当 UDP 可能无法理解时，TCP 可以非常清晰地通过有损连接。使用 UDP 可以降低延迟，但如果您无法理解所说的内容，这对您没有帮助。

# visual-studio-2012 - 为什么选择 SQL 模式比较的源会导致 VS2012 崩溃？

> ID：15644728
> 
> 赞同：10
> 
> 时间：2013-03-26T18:29:32.330
> 
> 标签：visual-studio-2012, sql-server-data-tools

似乎没有任何原因，选择 SQL > 架构比较 > 新架构比较，然后尝试“选择源”会导致 Visual Studio 2012 崩溃。（它已经按预期工作了几个月）。

除了尝试重新安装之外，还有其他可能的修复方法吗？

注意：尝试在 Visual Studio 的另一个实例中调试崩溃会显示异常

```
Application: devenv.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Security.Cryptography.CryptographicException
Stack:
   at Microsoft.VisualStudio.Data.DataProtection.DecryptString(System.String)
   at Microsoft.VisualStudio.Data.Tools.Design.Core.Common.SqlClient.SqlUtils.DecryptConnectionString(System.String)
   at Microsoft.VisualStudio.Data.Tools.Design.Core.Common.SqlClient.ServerExplorerConnection.get_DisplayNameWithDatabase()
   at Microsoft.VisualStudio.Data.Tools.Package.UI.DatabaseConnectionControl+ConnectionItem.Initialize(Microsoft.VisualStudio.Data.Tools.Design.Core.Common.SqlClient.ServerExplorerConnection)
   at Microsoft.VisualStudio.Data.Tools.Package.UI.DatabaseConnectionControl.PopulateDatabaseCombo()
   at Microsoft.VisualStudio.Data.Tools.Package.UI.DatabaseConnectionControl.DatabaseConnectionControl_Load(System.Object, System.EventArgs) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T18:29:32.330

尝试按照[此处](http://www.beta.microsoft.com/SQLServer/feedback/details/780171/ssdt-2012-crashes-importing-database)发布的信息进行操作，我确实检查了正在访问哪些注册表项。删除在下面找到`HKCU\Software\Microsoft\VisualStudio\11.0\SSDT\ConnectionMruList`的所有东西就可以了。

# android - 共享菜单中的不同应用名称

> ID：15644740
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:22.723
> 
> 标签：android

我正在努力寻找正确的关键字来实现这一目标。

我基本上是在尝试在“共享”对话框中使用与其他应用程序不同的应用程序名称，这与 Pocket 显示“添加到 Pocket”而不仅仅是“Pocket”的方式几乎相同。

任何帮助将不胜感激 =) 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:36:50.957

更改`android:label`具有意图过滤器的 Activity 中的值。

# android - 何时填充与 ListFragment 关联的列表视图

> ID：15644741
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:27.633
> 
> 标签：android, android-listview, android-listfragment

我在 ListFragment 中有这段代码：

```
TextView tv = (TextView) this.getListView().getChildAt(0);
tv.setBackgroundColor(getResources().getColor(R.color.White));
tv.setTextColor(getResources().getColor(R.color.OtherColor)); 
```

我想在ActivityCreated 上编写这段代码，但 tv 为空。

如果我在 onListItemClick 中编写此代码，它会完美运行。

我想要的不可能吗？

代码：

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    String[] values = new String[] { getResources().getString(R.string.menu_partida),
              getResources().getString(R.string.menu_acciones),
              getResources().getString(R.string.menu_resultado) };
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), R.layout.list_item_menu, values);
    setListAdapter(adapter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:36:46.890

视图仅在所有“创建”回调执行后才绘制，此事件没有回调。但是，您可以`post()`将 Runnable 传递给 UI 处理程序并实现相同的目标：

```
getListView().post(new Runnable() {
    public void run() {
        TextView tv = (TextView) this.getListView().getChildAt(0);
        tv.setBackgroundColor(getResources().getColor(R.color.White));
        tv.setTextColor(getResources().getColor(R.color.OtherColor));
    }
} 
```

但实际上，这种更改不会达到您的预期，因为行布局在 ListView 中被回收。（您将在滚动时看到根除行为。）您应该创建一个自定义适配器来更改`position 0` *仅*. 由于只有三行，您可能会摆脱 Runnable，但最好的解决方案是扩展 Adapter。

# matlab - matlab图保留以前图像的历史

> ID：15644742
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:29.083
> 
> 标签：matlab, image-processing

我正在 Matlab 中手动旋转图像。每次我用不同的图像运行我的代码时，之前旋转的图像都会显示在图中。我想不通。任何帮助都是不言而喻的。代码在这里：

![在此处输入图像描述](../Images/cbd32a825fe473b7421cdfb40bef6336.png)[截屏]

```
im1 = imread('gradient.jpg');

[h, w, p] = size(im1);
theta = pi/12;
hh = round( h*cos(theta) + w*abs(sin(theta)));      %Round to nearest integer
ww = round( w*cos(theta) + h*abs(sin(theta)));      %Round to nearest integer

R = [cos(theta) -sin(theta); sin(theta) cos(theta)];
T = [w/2; h/2];
RT = [inv(R) T; 0 0 1];
for z = 1:p
for x = 1:ww
    for y = 1:hh
        % Using matrix multiplication
        i = zeros(3,1);
        i = RT*[x-ww/2; y-hh/2; 1];

        %% Nearest Neighbour
        i = round(i);
        if i(1)>0 && i(2)>0 && i(1)<=w && i(2)<=h
            im2(y,x,z) = im1(i(2),i(1),z);
        end
    end
end
end

 x=1:ww;
 y=1:hh;

 [X, Y] = meshgrid(x,y);      %  Generate X and Y arrays for 3-D plots
 orig_pos = [X(:)' ; Y(:)' ; ones(1,numel(X))];   %  Number of elements in array or   subscripted array expression
 orig_pos_2 = [X(:)'-(ww/2) ; Y(:)'-(hh/2) ; ones(1,numel(X))];

 new_pos = round(RT*orig_pos_2); % Round to nearest neighbour

 % Check if new positions fall from map:
 valid_pos = new_pos(1,:)>=1 & new_pos(1,:)<=w & new_pos(2,:)>=1 & new_pos(2,:)<=h;

 orig_pos = orig_pos(:,valid_pos);
 new_pos = new_pos(:,valid_pos);

 siz = size(im1);
 siz2 = size(im2);

%  Expand the 2D indices to include the third dimension.
 ind_orig_pos = sub2ind(siz2,orig_pos(2*ones(p,1),:),orig_pos(ones(p,1),:), (1:p)'*ones(1,length(orig_pos)));
 ind_new_pos  = sub2ind(siz, new_pos(2*ones(p,1),:), new_pos(ones(p,1),:), (1:p)'*ones(1,length(new_pos)));

 im2(ind_orig_pos) = im1(ind_new_pos);
  imshow(im2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:34:02.313

的初始化存在问题`im2`，或者更确切地说，缺少它。`im2`在如下所示的部分中创建：

```
if i(1)>0 && i(2)>0 && i(1)<=w && i(2)<=h
    im2(y,x,z) = im1(i(2),i(1),z);
end 
```

如果`im2`在此代码运行之前存在并且其宽度或高度大于您正在生成的图像，则新图像只会覆盖现有`im2`. `im2`尝试通过添加来初始化

```
im2 = zeros(hh, ww, p); 
```

前

```
for z = 1:p
    for x = 1:ww
        for y = 1:hh
             ... 
```

`im2`作为奖励，它可能会使您的代码更快一点，因为 Matlab在循环中增长时不必调整大小。

# core-data - 核心数据以块的形式迭代 fetchrequest，而 setFetchLimit 只处理一半的记录

> ID：15644744
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:31.110
> 
> 标签：core-data, batch-processing, nsfetchrequest

我正在尝试以一定大小（batchSize）的块处理大量对象。这个循环似乎有效，但它只处理了一半的记录。相关的代码是：

```
{
//Prepare fetching products without images in the database
NSFetchRequest * productFetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Product"];

//Sort by last changed photo first
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"photoModificationDate" ascending:NO];
[productFetchRequest setSortDescriptors:@[sortDescriptor]];

NSPredicate *predicate = [NSPredicate predicateWithFormat: predicateString];
[productFetchRequest setPredicate:predicate];

//First get the total count
NSUInteger numberOfProducts = [self.backgroundMOC countForFetchRequest: productFetchRequest error: &error];
NSLog(@"Getting images for: %d products", numberOfProducts);

//Then set the batchsize to get chunks of data
NSUInteger batchSize = 25;
[productFetchRequest setFetchBatchSize: batchSize];
[productFetchRequest setFetchLimit:batchSize];

//Fetch the products in batches
for (NSUInteger offset = 0; offset < numberOfProducts; offset += batchSize) {
    @autoreleasepool {
        [productFetchRequest setFetchOffset: offset];
        NSArray * products = [self.backgroundMOC executeFetchRequest:productFetchRequest error:&error];
        NSLog(@"Offset: %d, number of products: %d", offset, [products count]);
        if (!products) {
            return NO;
        }

        for (Product * product in products) {
            NSLog(@"Downloading photo for product: %@", product.number);
            [self downLoadAndStoreImageForProduct:product];
        }
        [self saveAndResetBackgroundMOC];
    }
}

return YES; 
```

}

日志显示，对于计数的前半部分 (numberOfProducts)，它按预期工作。因此处理了 25 种产品的块。在前半部分之后，循环中的 fetchrequest 结果有 0 条记录。如果我再次重试相同的代码，则再次只处理一半（剩余）记录，因此总共 3/4。我究竟做错了什么？注意，managedObjectContext 不仅保存了，保存后还会重置，以节省内存。如果我不分块执行此操作，则程序在下载大约 3000 张图片后会持续崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:37:15.860

`fetchLimit`第一点：也许对做什么和做什么有一些基本的误解`fetchBatchSize`。

`fetchLimit`并`fetchOffset`确定提取了哪些记录以及获取了多少记录。

`fetchBatchSize`指示在一次访问持久存储期间应检索多少条记录。因此，如果（有或没有`fetchBatchSize`）要检索的记录数为 100，`fetchBatchSize`则 25 的 a 将导致 4 次前往商店。（换句话说，典型的 SQLite 存储执行了 4 条 SQL 语句。然而，这一切都发生在幕后。）

因此，代码片段

```
request.fetchLimit      = x; 
request.fetchBatchSize  = x; 
```

是多余的。无论如何，去商店的次数总是一次。

第二点：我不确定您对第二个 MOC 的设置是否有意义。我想你已经在后台线程中了。据我所知，重置 MOC 非常昂贵。如果您禁用 MOC 的撤消管理器，则实际上没有必要。至于循环，我相信您可以获取所有记录并让`fetchBatchSize`处理离散的“分块”。由于 Core Data 的错误行为，你`@autoreleasepool`在循环中可能只会带来有限的优势。

有用的`@autoreleaspool`是下载图像时。也许批处理这部分过程就足够了。

话虽如此，您可能不想更改（某种）有效的东西。

第三点：您根据未知的（对我们而言）谓词字符串计算记录数。是动态的吗？不确定这是否也可能不是问题的一部分。毕竟，不知道它是什么，记录的数量变化是令人惊讶的。

最后：检查是否可以不重置 MOC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:47:17.363

问题出在谓词上。它获取所有没有图像的产品。如果我下载图像，则谓词的结果集会在随后的提取中发生变化，并且每次都会变小。解决方案是按相反的顺序处理结果集。所以改变：

```
for (NSUInteger offset = 0; offset < numberOfProducts; offset += batchSize) 
```

进入：

```
for (NSInteger offset = MAX(numberOfProducts - batchSize, 0); offset > 0; offset -= batchSize) 
```

# javascript - 如何在 javascript 数组中显示图像

> ID：15644745
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:34.793
> 
> 标签：javascript, jquery

我试图将数组中的图像显示到页面上但遇到了困难

这是js

```
 var movieArray = [
      { title: "The Artist", picture: "http://cmclove.org/img/sw_off_off.png" },
      { title: "A Better Life", picture: "http://cmclove.org/img/sw_off_off.png" },
      { title: "Abduction", picture: "http://cmclove.org/img/sw_off_off.png" },
      { title: "African Cats", picture: "http://cmclove.org/img/sw_off_off.png" },
      { title: "Angel Crest", picture: "http://cmclove.org/img/sw_off_off.png" },
      { title: "Arthur", picture: "http://cmclove.org/img/sw_off_off.png" },
      { title: "Anonymous", picture: "http://cmclove.org/img/sw_off_off.png" },
      { title: "A Dangerous Method", picture: "http://cmclove.org/img/sw_off_off.png" },
      ];

      for (var p in movieArray) {
      console.log(p+ ':' +movieArray[p].title+ '|' +movieArray[p].picture);
      } 
```

这是小提琴的链接

[http://jsfiddle.net/d0okie0612/YTKHh/](http://jsfiddle.net/d0okie0612/YTKHh/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:32:43.367

您没有在页面中插入任何内容。

一个解决方案是：

```
for (var p = 0; p < movieArray.length; p++) {
    $('body').append('<img src="'+movieArray[p].picture+'" title="'+movieArray[p].title+'">');
} 
```

演示：http: [//jsfiddle.net/YTkhh/2/](http://jsfiddle.net/YTKHh/2/)

# jquery - 使用 ID 而不是类调用 FancyBox

> ID：15644746
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:36.403
> 
> 标签：jquery, fancybox, fancybox-2

我有一个应用到它的类的链接，使它看起来像一个按钮 IE 给它一些基本的样式、填充和背景颜色等

```
<a href="mypage.html" class="blue-button">Click me</a> 
```

我现在决定使用 FancyApps / fancybox (v2.1) 来触发 iframe 中的弹出窗口。

我的问题是 FancyBox 告诉我使用的实际代码还有一个类，所以我最终将 2 个类应用于我的链接并破坏了我的按钮和 Fancybox 弹出窗口 **。**[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

```
<a href="mypage.html" class="callback" class="blue-button" data-fancybox-type="iframe" >Request Call back</a> 
```

这是我的fancybox脚本...

```
$(".callback").fancybox({
        maxWidth    : 510,
        maxHeight   : 510,
        fitToView   : true,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        'overlayColor'  : '#1C5093',
        'overlayOpacity': 0.9

    }); 
```

谁能帮我吗。如果可能的话，我想保留我自己的“蓝色按钮”类，然后用 id 调用 Fancybox。

顺便说一句，我正在学习 jQuery（慢慢地）并拥有可视化的快速入门指南，但我显然才刚刚开始。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:36:28.087

您正在尝试为您的`<a>`元素设置两个格式不正确的类

```
<a href="mypage.html" class="callback" class="blue-button" data-fancybox-type="iframe" >Request Call back</a> 
```

在同一`class`属性中设置两个类（用空格分隔每个新类名），例如：

```
<a href="mypage.html" class="callback blue-button" data-fancybox-type="iframe" >Request Call back</a> 
```

# c++ - 处理用于创建算法的多个版本的#ifdef

> ID：15644747
> 
> 赞同：5
> 
> 时间：2013-03-26T18:30:37.813
> 
> 标签：c++, configuration, c-preprocessor

我正在尝试对用 C++ 编写的算法的许多（大约 25 个）变体进行基准测试。

我使用三种方法的组合来实现这些变体：

1.  复制代码并对复制的版本进行细微更改

2.  子类化基本算法类

3.  使用`#ifdef`s 在代码片段之间切换

选项 1 和 2 产生的变体是可以的，因为我可以选择算法的哪个变体在配置文件中运行。然后我可以遍历不同的配置文件并记录“配置：结果”对 - 保存这些记录对我的工作非常重要。

我目前遇到了`#ifdef`s 的问题，因为我必须编译多个版本的代码才能访问这些变体，这使得运行自动化实验脚本和保持准确的结果记录变得更加困难。然而`#ifdef`，s 非常有用，因为如果我在一个代码副本中发现错误，那么我不必记住在多个副本中更正这个错误。

*`#ifdef`s 扩展了我通过复制代码和子类创建的六个变体，总共有 24 个变体（每个基本变体 4 个变体）。*

这是一个示例 - 主要是我使用`#ifdef`s 来避免复制太多代码：

```
 ....

    double lasso_gam=*gamma;
    *lasso_idx=-1;
    for(int aj=0;aj<(int)a_idx.size();aj++){
        int j=a_idx[aj];
        assert(j<=C*L);
        double inc=wa[aj]*(*gamma)*signs[aj];
        if( (beta_sp(j)>0 && beta_sp(j)+inc<0)
#ifdef ALLOW_NEG_LARS
            || (beta_sp(j)<0 && beta_sp(j)+inc>0)
#else
            || (beta_sp(j)==0 && beta_sp(j)+inc<0)
#endif
            ){
            double tmp_gam=-beta_sp(j)/wa[aj]*signs[aj];

            if(tmp_gam>=0 && tmp_gam<lasso_gam) {
                *lasso_idx=aj;
                *next_active=j;
                lasso_gam=tmp_gam;
            }
        }
    }

    if(lasso_idx>=0){
        *gamma=lasso_gam;
    }

    .... 
```

**问题：**在给定配置文件的情况下，允许运行当前由`#ifdef`s 指定的算法的多个变体的最佳方法是什么，该配置文件指定要运行算法的哪个变体。

理想情况下，我只想编译一次代码，并在运行时使用配置文件选择算法变体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:48:42.470

您可以使用（可能是附加的）模板参数来增强您的算法，如下所示：

```
enum class algorithm_type
{
    type_a,
    type_b,
    type_c
};

template <algorithm_type AlgorithmType>
void foo(int usual, double args)
{
    std::cout << "common code" << std::endl;

    if (AlgorithmType == algorithm_type::type_a)
    {
        std::cout << "doing type a..." << usual << ", " << args << std::endl;
    }
    else if (AlgorithmType == algorithm_type::type_b)
    {
        std::cout << "doing type b..." << usual << ", " << args << std::endl;
    }
    else if (AlgorithmType == algorithm_type::type_c)
    {
        std::cout << "doing type c..." << usual << ", " << args << std::endl;
    }

    std::cout << "more common code" << std::endl;
} 
```

现在您可以通过此模板参数选择您的行为：

```
foo<algorithm_type::type_a>(11, 0.1605);
foo<algorithm_type::type_b>(11, 0.1605);
foo<algorithm_type::type_c>(11, 0.1605); 
```

该类型是一个常量表达式，产生一个编译时决定的分支（即，其他已知为死代码并被删除）。事实上，你的编译器应该警告你这一点（你如何处理这取决于你）。

但是您仍然可以很好地发送运行时值：

```
#include <stdexcept>

void foo_with_runtime_switch(algorithm_type algorithmType,
                             int usual, double args)
{
    switch (algorithmType)
    {
    case algorithm_type::type_a:
        return foo<algorithm_type::type_a>(usual, args);
    case algorithm_type::type_b:
        return foo<algorithm_type::type_b>(usual, args);
    case algorithm_type::type_c:
        return foo<algorithm_type::type_c>(usual, args);
    default:
        throw std::runtime_error("wat");
    }
}

foo_with_runtime_switch(algorithm_type::type_a, 11, 0.1605);
foo_with_runtime_switch(algorithm_type::type_b, 11, 0.1605);
foo_with_runtime_switch(algorithm_type::type_c, 11, 0.1605); 
```

算法的内部结构保持不变（消除了死分支，相同的优化），只是你到达那里的方式发生了变化。（请注意，可以概括枚举的想法，以便自动生成此开关；如果您发现自己有很多变体，这可能会很好学。）

当然，您仍然可以`#define`将特定算法作为默认算法：

```
#define FOO_ALGORITHM algorithm_type::type_a

void foo_with_define(int usual, double args)
{
    return foo<FOO_ALGORITHM>(usual, args);
}

foo_with_define(11, 0.1605); 
```

所有这些一起为您提供了这三个方面的优势，无需重复。

在实践中，您可以将所有三个作为重载：一个用于知道在编译时使用哪种算法的用户，需要在运行时选择它的用户，以及只需要默认值的用户（您可以通过项目覆盖它-宽`#define`）：

```
// foo.hpp

enum class algorithm_type
{
    type_a,
    type_b,
    type_c
};

// for those who know which algorithm to use
template <algorithm_type AlgorithmType>
void foo(int usual, double args)
{
    std::cout << "common code" << std::endl;

    if (AlgorithmType == algorithm_type::type_a)
    {
        std::cout << "doing type a..." << usual << ", " << args << std::endl;
    }
    else if (AlgorithmType == algorithm_type::type_b)
    {
        std::cout << "doing type b..." << usual << ", " << args << std::endl;
    }
    else if (AlgorithmType == algorithm_type::type_c)
    {
        std::cout << "doing type c..." << usual << ", " << args << std::endl;
    }

    std::cout << "more common code" << std::endl;
}

// for those who will know at runtime
void foo(algorithm_type algorithmType, int usual, double args)
{
    switch (algorithmType)
    {
    case algorithm_type::type_a:
        return foo<algorithm_type::type_a>(usual, args);
    case algorithm_type::type_b:
        return foo<algorithm_type::type_b>(usual, args);
    case algorithm_type::type_c:
        return foo<algorithm_type::type_c>(usual, args);
    default:
        throw std::runtime_error("wat");
    }
}

#ifndef FOO_ALGORITHM
    // chosen to be the best default by profiling
    #define FOO_ALGORITHM algorithm_type::type_b
#endif

// for those who just want a good default
void foo(int usual, double args)
{
    return foo<FOO_ALGORITHM>(usual, args);
} 
```

当然，如果某些实现类型总是比其他实现类型更差，那就去掉它。但是，如果您发现有两个有用的实现，那么以这种方式保留两者并没有什么坏处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T19:02:45.807

如果您有多个带有`#ifdef`s 的版本，通常最好构建多个可执行文件并让您的配置脚本决定在基准测试时运行哪些可执行文件。然后，您的 Makefile 中有规则来构建各种配置：

```
%-FOO.o: %.cc
        $(CXX) -c $(CFLAGS) -DFOO -o $@ $<

%-BAR.o: %.cc
        $(CXX) -c $(CFLAGS) -DBAR -o $@ $<

test-FOO: $(SRCS:%.cc=%-FOO.o)
        $(CXX) $(LDFLAGS) -DFOO -o $@ $^ $(LDLIBS) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:39:50.820

如果您`#if`的 s 分散在各处并在这里或那里更改一行代码，然后根据传递给要运行变体的函数的枚举将所有`#if`s 转换为s，并希望编译器在优化方面做得很好。`if`希望它会生成与多次定义函数几乎相同的代码，除了使用单个运行时条件来决定运行哪个。没有承诺。

如果您`#if`在算法中使用代码块，则将算法拆分为更小的函数，整个算法的不同实现可以调用这些函数。`#if`如果您的 s 非常具有侵入性，以至于您最终会得到 50 个函数，这显然是不切实际的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T19:14:18.907

一种方法是不要在可执行文件中包含预处理器指令，并这样做：

```
#define METHOD METHOD1
int Method1() { return whatever(); };
#undef METHOD

#define METHOD METHOD2
int Method2() { return whatever(); };
#undef METHOD 
```

假设`whatever`依赖于`METHOD`那么这些会产生不同的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T18:40:04.597

如果将算法本身放在具有相同接口的类中，则可以将它们作为模板参数传递给使用算法的地方。

```
class foo {
public:
  void do_something() {
    std::cout << "foo!" << std::endl;
  }
}

class bar {
public:
  void do_something() {
    std::cout << "bar!" << std::endl;
}

template <class meh>
void something() {
  meh algorithm;
  meh.do_something();
}

int main() {
  std::vector<std::string> config_values = get_config_values_from_somewhere();
  for (const austo& config : config_values) { // c++11 for short notation
    switch (config) {
      case "foo":
        something<foo>();
        break;
      case "bar":
        something<bar>();
        break;
      default:
        std::cout << "undefined behaviour" << std::endl;
    }
  }
} 
```

这样，您可以同时使用不同的行为，并通过它们的名称来区分它们。此外，如果您不使用其中之一，优化器将在编译时将其删除（但不在您的问题中）。

读取配置文件时，您只需要一个工厂（或类似的）在使用算法之前创建应该使用算法的对象/函数的正确实例。

编辑：添加基本开关。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T18:42:24.193

你没有提到你正在使用什么编译器，但是你可以在命令行上为它们中的任何一个设置#defines。在 gcc 中，您只需要添加`-D MYTESTFOO`以定义 MYTESTFOO。这将使#defines 成为可行的方法 - 无需更改要传播的代码，当然，每个测试都会有不同的编译代码，但它应该很容易自动化。

# loadrunner - LoadRunner Referer 选项，它是做什么用的？

> ID：15644748
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:46.853
> 
> 标签：loadrunner

为什么“Referer=myurl.com”出现在 web_submit_data() 或 web_url() 函数中？

这是某种 base-url 的东西来告诉 LoadRunner 你站在哪里，比如说：

web_url("某事", "URL=iamgoingtothisurl",

这个“推荐人”的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:15:09.627

referer 元素不是由 HP、Mercury 或 LoadRunner 本身定义的，而是由 HTTP 和 HTML 的相关 RFC 定义的，

[http://en.wikipedia.org/wiki/HTTP_referer](http://en.wikipedia.org/wiki/HTTP_referer)

# java - 一串数字中的逗号分隔符

> ID：15644749
> 
> 赞同：0
> 
> 时间：2013-03-26T18:30:50.120
> 
> 标签：java, arrays, separator

有一个字符串`data`：

```
{4,15,26,7} 
```

逗号分隔符用于分隔数字。

```
this.points=new ArrayList<Integer>();
    for (int i = 0; i < data.length(); i++) {
            this.points.add(Character.getNumericValue(data.charAt(i)));
    } 
```

如何修改此代码以跳过逗号分隔符并仅保存数字`this.points`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:35:13.687

尝试这个，

```
String data="{4,15,26,7}";
data=data.substring(1,data.length-1);
String[] digits=data.split(",");
his.points=new ArrayList<Integer>();
    for (int i = 0; i < digits.length; i++) {
            this.points.add(Integer.parseInt(digits[i]));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:39:48.963

这并不难。这是我的资料来源：http: [//javarevisited.blogspot.nl/2011/09/string-split-example-in-java-tutorial.html](http://javarevisited.blogspot.nl/2011/09/string-split-example-in-java-tutorial.html)

[确定字符串是否是Java中的整数](https://stackoverflow.com/questions/5439529/determine-if-a-string-is-an-integer-in-java)

所以你想要做的是：

```
points = new ArrayList<Integer>;
String foo = "4,15,10,100";
String[] splits = foo.split(",");

for(String temp : splits){
if(Character.digit(temp)) points.add(Integer.parseInt(temp);
} 
```

# smartcard - 通过命令行安装设备驱动程序 inf

> ID：15644753
> 
> 赞同：1
> 
> 时间：2013-03-26T18:31:02.470
> 
> 标签：smartcard, hid, inf, sccm

我正在努力将智能卡部署到我们的环境中，制造商提供的驱动程序是 3 个文件，一个 CAT、DLL 和 INF。如果我右键单击 INF 并选择安装它就可以了。我需要为 SCCM 打包这个，所以我尝试通过命令行安装，但每次都安装失败。下面是INF

```
 ; 
 ; HID Global Smartcard Minidriver inf for x64
 ;
 ;

 [Version]
 Signature="$Windows NT$"
 Provider=%VendorName%
 DriverVer=07/12/2007,1.0.0.14
 DriverPackageDisplayName="HID Global Minidriver"
 CatalogFile=hidcrdmx.cat
 Class="Smart Cards"
 ClassGuid={990A2BD7-E738-46c7-B26F-1CF8FB9F1391}

 [Manufacturer]
 %VendorName%=HIDGlobal,NTamd64

 [HIDGlobal.NTamd64]
 %HIDGlobalDeviceName%=HIDGlobal_Install,UMDF\ATR_3BFA1800FF8131FE454A434F5034314332303074  

 [DefaultInstall]
 AddReg=Minidriver_RegistryAdd
 CopyFiles=@hidcrdmx.dll
 CopyFiles=Syswow64_CopyFiles

 [HIDGlobal_Install]
 CopyFiles=@hidcrdmx.dll
 CopyFiles=Syswow64_CopyFiles

 [Syswow64_CopyFiles]
 hidcrdm.dll

 [SourceDisksNames]
 1=%MediaDescription%

 [SourceDisksFiles]
 hidcrdmx.dll=1
 hidcrdm.dll=1

 [Strings]
 VendorName="HID Global"
 MediaDescription="HID Global Smart Card Minidriver Installation Disk"
 CardKey="SOFTWARE\Microsoft\Cryptography\Calais\SmartCards\HID Crescendo C200"
 CardKey64="SOFTWARE\Wow6432Node\Microsoft\Cryptography\Calais\SmartCards\HID Crescendo C200"
 HIDGlobalDeviceName="HID Crescendo C200"

 [Minidriver_RegistryAdd]
 HKLM, %CardKey%,"80000001",0x0,"hidcrdmx.dll"
 HKLM,%CardKey%,ATR,0x00000001,3B,FA,18,00,FF,81,31,FE,45,4A,43,4F,50,34,31,43,32,30,30,74
 HKLM, %CardKey%,ATRMask,0x00000001,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff  
 HKLM, %CardKey%,"Crypto Provider",0x0,"Microsoft Base Smart Card Crypto Provider"
 HKLM, %CardKey%,"Smart Card Key Storage Provider",0x0,"Microsoft Smart Card Key Storage Provider"
 HKLM, %CardKey64%,"80000001",0x0,"hidcrdm.dll"
 HKLM, %CardKey64%,ATR,0x00000001,3B,FA,18,00,FF,81,31,FE,45,4A,43,4F,50,34,31,43,32,30,30,74
 HKLM, %CardKey64%,ATRMask,0x00000001,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff,ff  
 HKLM, %CardKey64%,"Crypto Provider",0x0,"Microsoft Base Smart Card Crypto Provider"
 HKLM, %CardKey64%,"Smart Card Key Storage Provider",0x0,"Microsoft Smart Card Key Storage Provider"

 [DestinationDirs]
 DefaultDestDir = 11 ; dirid = \system32 on WinNT platforms
 Syswow64_CopyFiles=10,syswow64 ; %windir%\syswow64 on x64 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-22T12:38:56.687

我处于同样的情况，就我而言， dpinst 返回代码 0x100 *"No matching devices found"*。

我终于找到了解决方案，使用以下命令行：

```
RUNDLL32.EXE SETUPAPI.DLL,InstallHinfSection DefaultInstall 132 .\hidcrdmx.inf 
```

C200 现在完全被 Windows 识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:52:59.593

使用[dpinst 从命令行](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544842%28v=vs.85%29.aspx)安装驱动程序。即使您没有在环境中使用 Windows 8，您也可以通过下载 Windows 8 SDK 来获得此功能。有单独的 x64 和 x86 dpinst 可执行文件。这是`dpinst /?`输出：

```
 C:\Program Files (x86)\Windows Kits\8.0\redist\DIFx\dpinst\EngMui\x64\dpinst.exe
: installs and uninstalls driver packages.
By default, the tool searches the current directory and tries to install all dri
ver packages found.

Usage: C:\Program Files (x86)\Windows Kits\8.0\redist\DIFx\dpinst\EngMui\x64\dpi
nst.exe [/U INF-file][/S | /Q][/LM][/P][/F][/SH][/SA][/A][/PATH Path][/EL][/L La
nguageID][/C][/D][/LogTitle Title][/SW][/? | /h | /help]

  /U INF-file    Uninstall a driver package (INF-file).
  /S | /Q        Silent (Quiet) mode. Suppresses the Device Installation Wizard
and any dialogs popped-up by the operating system.
  /LM    Legacy mode. Accepts unsigned driver packages and packages with missing
 files. These packages won't install on the latest version of Windows.
  /P     Prompt if the driver package to be installed is not better than the cur
rent one.
  /F     Force install if the driver package is not better than the current one.

  /SH    Scans hardware for matching devices and only copies and installs those
drivers for which a device is present. Only valid for Plug and Play drivers.
  /SA    Suppress the Add/Remove Programs entry normally created for each driver
 package.
  /A     Install all or none.
  /PATH Path     Search for driver packages under the given path.
  /EL    Enables all languages not explicitly listed in the XML file.
  /L LanguageID          Tries to use the given language in all UI. Useful for l
ocalization tests.
  /SE    Suppress the EULA.
  /C     Dump logging output to attached Console (Windows XP and above).
  /D     Delete driver binaries on uninstall.
  /SW    Suppresses the Device Installation Wizard, the operating system might s
till pop-up user dialogs.
  /? | /h | /help        Shows this help. 
```

如果您需要在安装驱动程序之前安装发布者证书，可以使用`certmgr.exe`，然后将证书安装到`trusted publishers`商店。这样，驱动程序安装不会失败或提示继续，它将真正无人看管。

# javascript - js隐藏功能

> ID：15644756
> 
> 赞同：0
> 
> 时间：2013-03-26T18:31:10.237
> 
> 标签：javascript, jquery

当页面加载（第一个下拉列表（div StatusID）是从 mysql db 动态填充）或用户从第一个下拉框中选择 Unused - EI 时，div status_sub_6 显示第二个选择语句。

我的 .hide .show 函数在更改时激活良好，但即使第一个选择（StatusID）的动态填充值符合比较条件，该函数也会在页面加载时隐藏第二个下拉列表。

我确定我需要一个覆盖以下 .js 代码的 onload 函数，但非常感谢在编写附加代码时提供一些帮助。

**JavaScript：**

```
$(document).ready(function(){
    $('#status_sub_6').hide();

     $('#StatusID').change(function () {
        if ($('#StatusID option:selected').text() == "Unemployed - EI"){
            $('#status_sub_6').show();
        }
         else { 
              $('#status_sub_6').hide();
         }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:37:00.190

您可以通过在加载后*立即触发*更改事件来做到这一点。

```
$(document).ready(function(){
    ...
    // your current code
    ...
    $('#StatusID').trigger('change'); // trigger a change
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:45:41.483

你也可以这样做：

```
$(document).ready(function(){
    if ($('#StatusID option:selected').text() == "Unemployed - EI"){
        $('#status_sub_6').hide();
    }

     $('#StatusID').change(function () {
        if ($('#StatusID option:selected').text() == "Unemployed - EI"){
            $('#status_sub_6').show();
        }
         else { 
              $('#status_sub_6').hide();
         }
    });
}); 
```

或更优雅的解决方案：

```
$(document).ready(function () {
    toggleSub();

    $('#StatusID').change(function () {
        toggleSub();
    });
});

function toggleSub() {
    if ($('#StatusID option:selected').text() == "Unemployed - EI") {
        $('#status_sub_6').hide();
    }
    else {
        $('#status_sub_6').show();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:33:05.773

尝试：

```
$(function() {
   $('#status_sub_6').hide();
   $(document).on('change', '#StatusID', function () {
      if ($('#StatusID option:selected').text() == "Unemployed - EI"){
        $('#status_sub_6').show();
      }
      else { 
        $('#status_sub_6').hide();
      }
   });

   $('#StatusID').change();
}); 
```

# ios - 目标 - c - 指针以及将数组分配给另一个数组时真正发生的情况

> ID：15644757
> 
> 赞同：0
> 
> 时间：2013-03-26T18:31:12.793
> 
> 标签：ios, objective-c, nsmutablearray, nsarray

所以我想知道当我这样做时会发生什么

```
NSMutableArray *arr1 = [[NSMutableArray alloc] init];
NSMutableArray *arr2 = [[NSMutableArray alloc] init];

[arr1 addobject:ob1];

arr2 = arr1;

[self changeValue:[arr2 objectAtIndex:2]]; //function that will modify what is sent to it 
```

1) 我什至可以在 nsmutablearrays 之间做 = 吗？
2) 如果我要访问 arr1 中的对象，它会被修改吗？
3) 它有多深？- 如果我要从其他地方访问该对象，它会被修改吗？
4) 我假设使用 mutableCopy 会返回一个全新的数组。
5）反正有模拟这种深度链接/连接吗？例如，如果我想将同一个对象分配给 2 个不同的数组，那么如果我修改一个，它会改变两个数组中的那个对象？
6) 代表这个的词是什么？我不认为它是链接/连接。

非常感谢
-詹姆斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:40:11.900

我认为您混淆了对象和变量。您不会将一个对象分配给另一个对象；您将对象分配给变量。变量只是保持对象视线的一种方式，否则它会漂浮在程序内存空间的某个地方。两个变量可以指向同一个对象，当这种情况发生时，是的，你会通过这两个变量看到对象的变化，因为*它是同一个对象*。

当你这样做时`arr2 = arr1`，你让 arr2 指向同一个数组 arr1 。所以如果你在 arr1 中改变了一些东西，你会在 arr2 中看到它吗？是的，因为**arr2*是*arr1**。它是同一个对象，只是叫了两个不同的名字。

如果相反`arr2 = [arr1 mutableCopy]`，是的，那将创建一个新的数组对象，因此这两个变量将指向不同的对象。如果您将一个对象添加到一个数组中，它不会神奇地添加到另一个数组中。但这提出了一个问题：如果 arr1 包含一堆 NSMutableStrings 怎么办？更改 arr1 中的一个字符串是否也会更改 arr2 中的相应字符串？是的，因为即使数组本身是不同的对象，它仍然包含与原始数组相同的对象。

所以考虑这个问题的方法不是两个数组以某种方式链接或连接。您需要问的唯一问题是，“我在两个地方与之交互的这些对象是同一个对象还是不同的对象？”

# html - 是否有在 HTML 中存储 Adob e XMP 的定义方法？

> ID：15644759
> 
> 赞同：1
> 
> 时间：2013-03-26T18:31:16.627
> 
> 标签：html, xmp

Adobe 已经定义了在各种文件格式（包括 PDF、TIFF、JPEG、GIF、SWF、MP3、MP4 等）中存储 XMP 元数据的标准方法。但是，我找不到任何定义将 XMP 存储在HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-02T14:59:03.283

注意我注意到了`XMP`，但我在 adobe 的规范中发现了这一点，也许它有帮助：

所有引用自[XMP 规范第 3 部分](http://www.adobe.com/content/dam/Adobe/en/devnet/xmp/pdfs/XMPSpecificationPart3.pdf)（第 41 页）：

**2.5.1 HTML**

`XMP`嵌入`HTML`应符合 W3C 对嵌入的建议`XML`之一`HTML`。有关参考信息，请参阅 1998 年 5 月 W3C 会议的会议报告：http: [//www.w3.org/TR/NOTE-xh](http://www.w3.org/TR/NOTE-xh)

`XML`可以嵌入到`SCRIPT`或`XML`元素中，放置在任何合法位置；建议的位置是`HEAD`元素的末尾。`SCRIPT`or`XML`元素的内容就是`XMP`数据包。浏览器必须识别`SCRIPT`or`XML`元素，以便表示 RDF 属性值的文本不会显示为页面内容。`XML`除非已知与旧软件不兼容，否则首选使用该元素；如果是这样，该`SCRIPT`元素很可能被识别。

**2.5.1.1`XML`嵌入`HTML`**

有三种嵌入方法`XML`，`HTML`如下面的示例所示。两个使用`SCRIPT`元素，第三个使用`XML`元素。

**2.5.1.1.1 使用`SCRIPT`元素和`LANGUAGE`属性**

```
 <html>
    <head>
      <SCRIPT LANGUAGE="XML">
        <?xpacket begin='' id='W5M0MpCehiHzreSzNTczkc9d'?>
        <!-- The serialized RDF goes here. It is removed for brevity. -->
        <?xpacket end='w'?>
      </SCRIPT>
    </head>
    <body>
    </body>
  </html> 
```

**注意**：Adobe 注意到在 Microsoft Windows XP 下运行的 Microsoft Word 2000 中使用`SCRIPT`元素和`LANGUAGE`属性的问题：无法显示正文内容

**2.5.1.1.2 使用`SCRIPT`元素和`TYPE`属性**

```
<html>
  <head>
    <SCRIPT TYPE="text/xml">
      <?xpacket begin='' id='W5M0MpCehiHzreSzNTczkc9d'?>
      <!-- The serialized RDF goes here. It is removed for brevity. -->
      <?xpacket end='w'?>
    </SCRIPT>
  </head>
  <body>
  </body>
</html> 
```

**2.5.1.1.3 使用`XML`元素**

```
<html>
  <head>
    <XML>
      <?xpacket begin='' id='W5M0MpCehiHzreSzNTczkc9d'?>
      <!-- The serialized RDF goes here. It is removed for brevity. -->
      <?xpacket end='w'?>
    </XML>
  </head>
  <body>
  </body>
</html> 
```

# python - 需要帮助了解将 N*N 矩阵原位旋转 90 度的解决方案如何工作

> ID：15644761
> 
> 赞同：1
> 
> 时间：2013-03-26T18:31:23.757
> 
> 标签：python, arrays, algorithm

我试图了解将 N*N 阵列旋转 90 度的解决方案。这是对先前提出但现在已关闭的问题的参考 - [链接][如何在不使用任何额外空间的情况下将矩阵旋转 90 度？](https://stackoverflow.com/questions/3488691/how-to-rotate-a-matrix-90-degrees-without-using-any-extra-space) 最佳投票的答案看起来很整洁，但我无法理解它，有人可以解释这些步骤吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:51:03.757

它使用了Python 中不需要的[XOR 交换技巧，因为您可以在一个表达式中一次交换所有四个元素：](http://en.wikipedia.org/wiki/XOR_swap_algorithm)

```
def rot2(a):
    n = len(a)
    for x in range((n + 1) / 2):
        for y in range(n / 2):
            a[x][y], a[n-1-y][x], a[y][n-1-x], a[n-1-x][n-1-y] = (
                                                      a[y][n-1-x],
                                                      a[x][y], 
                                                      a[n-1-x][n-1-y],
                                                      a[n-1-y][x],
                                                 ) 
```

**N×N 矩阵，N = 3：**

```
1 2 3
4 5 6
7 8 9 
```

`N / 2 = 1`, `(N + 1)/2 = 2`.

`x = [0, 2)`(0 或 1), `y = [0, 1)`(0)。

角落：

```
 1 2 | 3
_____|
 4 5   6
 7 8   9 
```

互换：`1 ← 3 ← 7 ← 9 (← 1)`;`2 ← 6 ← 8 ← 4 (← 2)`

**5×5矩阵：**

```
a b c d e
f g h i j
k l m n o
p q r s t
u v w x y 
```

`N / 2 = 2`, `(N + 1)/2 = 3`.

`x = [0, 3)`（0 或 1 或 2），`y = [0, 2)`（0 或 1）。

角落：

```
a b c | d e
f g h | i j
______|
k l m   n o
p q r   s t
u v w   x y 
```

掉期：

```
a ← e ← y ← u
f ← d ← t ← v
b ← j ← x ← p
g ← i ← s ← q
c ← o ← w ← k
h ← n ← r ← l 
```

# ruby-on-rails - 设置数据-* 属性

> ID：15644762
> 
> 赞同：2
> 
> 时间：2013-03-26T18:31:27.400
> 
> 标签：ruby-on-rails, html, slim-lang

我有一种情况，我需要在 div 上动态设置“data-*”的值。我实际使用的代码是这个：

```
 = tag('div', { class: 'agile-carousel',\
                 data: { carousel_list: url_for(format: :json) } }, true)
  = "</div>".html_safe 
```

这太可怕了。rails 也以一种`<div />`方式关闭了 div，这是 chrome 和其他浏览器绝对不喜欢的（造成一些灾难）。

所以我的解决方案就是那个。我想问是否有其他方法可以做到这一点。

**更新1：**

我有一个小问题，这段代码：

```
span class==I18n.locale == locale_used ? "inactive" : nil
  = link_to(I18n.t('locale_name', locale: locale_used),\
            url_for(locale: locale_used)) 
```

如果我删除 link_to 它可以工作。请注意，如果我插入类似`| text`的内容，则会返回错误：`syntax error, unexpected keyword_ensure, expecting $end`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:34:54.387

您可以使用`content_tag`代替`tag`来生成 a`<div></div>`而不是 a `<div>`，但您不应该这样做。

您正在使用[Slim](http://slim-lang.com/)，因此*请使用 Slim*：

```
.agile-carouesel data-carousel_list=url_for(format: :json) 
```

输出：

```
<div class="agile-carouesel" data-carousel_list="some URL"></div> 
```

Slim 和 HAML 的全部意义在于，您可以使用这种非常简洁的语法来编写标签。您应该使用它，而不是在不需要时求助于 Rails 的标签助手。通过使用它们，您将重新引入它们应该删除的所有标点符号混乱。

# php - PHP Reward 指向排行榜并计算平局

> ID：15644763
> 
> 赞同：3
> 
> 时间：2013-03-26T18:31:29.840
> 
> 标签：php, arrays, multidimensional-array, leaderboard, reward-system

好吧，我一直在努力解决这个问题，谷歌搜索试图找到任何可以引导我朝着正确方向前进的东西，但无济于事。

所以我有一个排名排行榜数组，如下所示：

```
[1] = array('points' => '99', 'rank' => '1');
[2] = array('points' => '90', 'rank' => '2');
[3] = array('points' => '90', 'rank' => '2');
[4] = array('points' => '80', 'rank' => '4');
[5] = array('points' => '70', 'rank' => '5');
[6] = array('points' => '70', 'rank' => '5'); 
```

然后我有一个带有预定义数组的奖励积分系统，可以根据排名奖励积分：

```
[1]=10;
[2]=9;
[3]=8;
[4]=7;
[5]=6;
[6]=5; 
```

如果不是因为平局，我只会匹配两个数组并根据数组键奖励积分。但是，由于我允许绑定，因此我试图在所有绑定用户之间分配绑定奖励积分。因此，根据上述提到的玩家 2 和 3 并列第 2 名，他们将平分奖励点 9 和 8……所以两人都将获得 8.5 分。

所以我在合并两个数组时要寻找的最终结果是：

```
[1] = array('points' => '99', 'rank' => '1', 'reward' => '10');
[2] = array('points' => '90', 'rank' => '2', 'reward' => '8.5');
[3] = array('points' => '90', 'rank' => '2', 'reward' => '8.5');
[4] = array('points' => '80', 'rank' => '4', 'reward' => '7');
[5] = array('points' => '70', 'rank' => '5', 'reward' => '5.5');
[6] = array('points' => '70', 'rank' => '5', 'reward' => '5.5'); 
```

排行榜可以不断变化，直到一天结束，所以我尽量不要让它太复杂。我只是想知道是否有人可以向我指出他们看到的可以帮助我的东西，或者他们是否有任何实施想法。

我在尝试中最挣扎的部分是循环遍历排行榜数组并不断期待“排名”相同，然后知道我需要总结和拆分什么，同时也知道我可以跳过数组，而不是对我刚刚在前瞻中经历的下一个项目执行相同的测试。对不起，如果我感到困惑，但我显然很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:39:23.330

这可能是你想要的：

**代码**

```
$persons = array(
    array('points' => '99', 'rank' => '1'),
    array('points' => '90', 'rank' => '2'),
    array('points' => '90', 'rank' => '2'),
    array('points' => '80', 'rank' => '4'),
    array('points' => '70', 'rank' => '5'),
    array('points' => '70', 'rank' => '5')
);

$ranks = array(
    1 => 10,
    2 => 9,
    3 => 8,
    4 => 7,
    5 => 6,
    6 => 5
);

foreach($persons as $person => $prop) {
    $reward = $ranks[$prop['rank']];

    if (isset($persons[$person+1])) {
        if ($persons[$person+1]['rank'] == $prop['rank']) {
            $reward = $reward - 0.5;
        }
    }

    if (isset($persons[$person-1])) {
        if ($persons[$person-1]['rank'] == $prop['rank']) {
            $reward = $reward - 0.5;
        }
    }

    $persons[$person]['reward'] = $reward;
}

echo '<pre>';
print_r($persons);
echo '<pre>'; 
```

这里发生的是您创建奖励键并根据`$ranks`数组中的索引用人的等级填充它。这个例子并不安全。您可能需要先检查该键是否存在于`$ranks`数组中。

这个例子非常“原始”，并且可能没有不同排名的缺陷，因此您必须自己进行最终测试。

**输出**

```
Array
(
    [0] => Array
        (
            [points] => 99
            [rank] => 1
            [reward] => 10
        )

    [1] => Array
        (
            [points] => 90
            [rank] => 2
            [reward] => 8.5
        )

    [2] => Array
        (
            [points] => 90
            [rank] => 2
            [reward] => 8.5
        )

    [3] => Array
        (
            [points] => 80
            [rank] => 4
            [reward] => 7
        )

    [4] => Array
        (
            [points] => 70
            [rank] => 5
            [reward] => 5.5
        )

    [5] => Array
        (
            [points] => 70
            [rank] => 5
            [reward] => 5.5
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:16:18.067

如果超过 2 人可以有相同的等级

```
$persons = array(
    array('points' => '99', 'rank' => '1'),
    array('points' => '90', 'rank' => '2'), // <---
    array('points' => '90', 'rank' => '2'), // <---
    array('points' => '90', 'rank' => '2'), // <---
    array('points' => '70', 'rank' => '5'),
    array('points' => '70', 'rank' => '5')
); 
```

那么这个@Allendar 算法会给你错误的结果（会给上面输入中排名第 2 的人 8.5 分而不是 8 分和 8.5 分的奖励）。

如果总是有相同的人数和定义的排名数（在这种情况下为 6），您可以使用如下内容：

```
$persons = array(
    array('points' => '99', 'rank' => '1'),
    array('points' => '90', 'rank' => '2'),
    array('points' => '90', 'rank' => '2'),
    array('points' => '90', 'rank' => '2'),
    array('points' => '70', 'rank' => '5'),
    array('points' => '70', 'rank' => '5')
);

$ranks = array(
    1 => 10,
    2 => 9,
    3 => 8,
    4 => 7,
    5 => 6,
    6 => 5
);

$current_ranks = $ranks;
$rank_pool = array();
$rank_counter = array();

$i = 1; // person counter, start with 1 because $ranks start with 1

// distribute reword equally for all ranks
foreach($persons as $person => $prop) {
  if(!isset($ranks[$i])){
    exit("no reword for this much persons [$i]");
  }

  $rank = $prop['rank'];
  if(!isset($rank_pool[$rank])){
    $rank_pool[$rank] = 0;
  }
  $rank_pool[$rank] += $ranks[$i];
  if(!isset($rank_counter[$rank])){
    $rank_counter[$rank] = 0;
  }
  $rank_counter[$rank]++;

  $i++;
}

// set reword according to equally distributed reword
// points for all ranks
foreach($persons as $person => $prop) {
  $rank = $prop['rank'];
  if(!isset($rank_pool[$rank]) || !isset($rank_counter[$rank])){
    exit('something is wrong!');
  }
  $persons[$person]['reword'] = $rank_pool[$rank]/$rank_counter[$rank];
}

echo '<pre>';
print_r($rank_counter);
print_r($rank_pool);
print_r($persons);
echo '<pre>'; 
```

并通过上述输入，您将获得：

```
$rank_counter=
Array
(
  [1] => 1// --- 1 with rank 1
  [2] => 3// --- 3 with rank 2
  [5] => 2// --- 2 with rank 5
)

$rank_pool
Array
(
  [1] => 10// --- 10 points for persons with rank 1
  [2] => 24// --- 24 points for persons with rank 2
  [5] => 11// --- 11 points for persons with rank 5
) 
```

并且您通过简单划分每个等级的总分和每个等级的计数来获得每人的改写分数

```
10/1 = 10 points for each person with rank 1
24/3 = 8 points for each person with rank 2
and
11/2 = 5.5 points for each person with rank 5 
```

# xcode - iOS 非仿射变换

> ID：15644765
> 
> 赞同：2
> 
> 时间：2013-03-26T18:31:35.190
> 
> 标签：xcode, ios6, core-graphics, cgaffinetransform

是否可以在核心图形中进行非仿射变换？

我想要一个透视变换，似乎在文档中找不到任何类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:42:56.407

非仿射变换由 Core Animation 管理，而不是 Core Graphics。请参阅[核心动画函数](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreAnimation_functions/Reference/reference.html)参考`CATransform3D`。

简而言之，为了应用透视，您通常需要从`UIView`到`CALayer`。

# c++ - 从父级调用子虚函数

> ID：15644775
> 
> 赞同：-4
> 
> 时间：2013-03-26T18:32:04.910
> 
> 标签：c++

请帮帮我。我真的不擅长多态。我必须从另一个继承一个类。

编辑：对不起，完全是我的错误。甚至我已经过了大约 2 个小时才找到问题所在。有兴趣的人（谢谢大家的帮助）

```
if (type.compare("TEST1") == 0) result = new Test(ID, database);
if (type.compare("TEST2") == 0) result = new Test(ID, database);
if (type.compare("TOR") == 0) result = new Tor(ID, database); 
```

“==0”完全不见了。

```
class A {
public:
    void go() {do();}
    virtual void do() {printf('A');}
}

class B:public A {
    virtual void do() {printf('B');}
}

int main {
    A* obj = new B();
    obj->go();
} 
```

结果是“A”而不是“B”。我怎样才能使它成为'B'？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:38:34.967

代码没有按原样编译，但经过多次修改，我似乎获得了预期的结果：

```
#include <cstdio>

class A {
public:
    void go() 
    {
       do1();
       };
    virtual void do1() {printf("a");}
};

class B:public A {
    virtual void do1() {printf("b");}
};

int main() {
    A* obj = new B;
    obj->go();
} 
```

首先`do`是一个[保留字](http://en.cppreference.com/w/cpp/keyword)，`main`没有正确声明并`printf`采用`char *`：

```
int printf(const char *format, ...); 
```

`char`所以你试图从to进行无效转换`char *`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T18:46:42.597

在我整理了一些东西以使其编译之后：

```
#include <stdio.h>

class A {
public:
    virtual void DO() {printf("A");}
    void go() {DO();}
};

class B:public A {
    virtual void DO() {printf("B");}
};

int main() {
    A* obj = new B();
    obj->go();
    return 0;
} 
```

(`do`是一个关键字，`printf`接受一个 char* 而不是一个 char，`main`需要括号，并返回一个整数)

`B`无论我设置的优化级别如何，它总是为我生成：

```
$ g++ inherit.cpp -o inherit && ./inherit
B
$ g++ inherit.cpp -O1 -o inherit && ./inherit
B
$ g++ inherit.cpp -O2 -o inherit && ./inherit
B
$ g++ inherit.cpp -O3 -o inherit && ./inherit
B
$ g++ inherit.cpp -O4 -o inherit && ./inherit
B
$ g++ inherit.cpp -O5 -o inherit && ./inherit
B 
```

但是，您可能在编译器中遇到了边缘情况，它决定将您的调用内联到`do()`inside `go()`。

# java - 如何将 HashMap 保存到文件并加载它

> ID：15644791
> 
> 赞同：1
> 
> 时间：2013-03-26T18:33:14.853
> 
> 标签：java, android, file, save

我遇到了一个大问题。我想将 HashMap（我将其称为“map”或“hm”）保存到运行应用程序的 android 设备上的文件中。我确实想将其保存在内部存储中。

我知道这样的问题以前被问过 100 个，我尝试了大约 25 个，但没有一个有效。

我有 3 个类，一个扩展“Activity”的主类和另外两个类，一个称为“util”。我想写两个方法，保存和加载 HashMap，这两个方法都应该在 'util' 类中。在主类中，我编写了几个方法来加载 HashMap，在其中放入一些内容，然后再次保存。

到这里解决我的问题应该不难，但我想在除主类之外的其他类中使用“保存”和“加载”方法。

我不知道如何获取其他类中的Context对象作为主类，所以不知道如何调用`openFileOutput()`方法。

总之：我想保存和加载一个 HashMap 到/从我想在内部存储上创建的文件中。我使用的方法应该位于“util”类中，并且应该可供所有其他类访问，最好以静态方式访问。我尝试了许多不同的可能性，但我总是得到一个“FileNotFoundException”。我希望你能帮助我。

我使用的一些方法：

```
 try {
        FileOutputStream fos = c.openFileOutput(s, Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(hm);
        oos.flush();
        oos.close();
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

在这种方法我必须使用上下文，我不知道如何在其他类中获取它。我也得到一个'FileNotFoundException'......

```
String file = The path where my file should be located (I don't know how it should be given, but "data/data/[packagename]/[file]" does not work)

        try {
        FileOutputStream fos = new FileOutputStream(file);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(hm);
        oos.flush();
        oos.close();
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

这种方法也不起作用，我真的不知道我得到了哪个异常。

最后：如果您想帮助我，请描述如何获取您使用的每个对象（好吧，除了字符串等基本内容之外）并粘贴您的整个解决方案。如果之前有人问过这个问题，我真的很抱歉，我找不到它。

**编辑**

我尝试使用 'this.getApplicationContext().getFilesDir()' 方法，但仍然得到 'FileNotFoundException' ......不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:01:09.340

如果您总是`Util`从可以访问 a 的类中调用 -methods `Activity`，只需在方法调用中添加`Context`作为参数即可。

否则，您可以创建一个全局[`Application`](http://developer.android.com/reference/android/app/Application.html)对象，您可以从中获取上下文。这个特定的上下文不支持创建视图和其他依赖于 Activity 的选项，但是`openFileOutput()`/ -`openFileInput()`方法应该没问题，因为目录位于应用程序级别。

为此，您将创建一个 Application 的子类，并对其自身进行静态引用：

```
//In the Application subclass:
static MyApplication instance;
onCreate(){
    super.onCreate();
    instance = this;
}
public static final MyApplication getInstance(){
    return instance;
} 
```

然后你可以打电话`MyApplication.getInstance();`来获取一个上下文。

您还必须在清单中添加您的应用程序类（在应用程序标签下使用名称属性）。

相关阅读： [Android 中的 Singletons 与 ApplicationContext](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)

# jquery - Shopify Jquery 更改产品价格

> ID：15644793
> 
> 赞同：1
> 
> 时间：2013-03-26T18:33:29.967
> 
> 标签：jquery, shopify

嘿，我是 shopify 的新手，我正在尝试找出他们的 API 我正在尝试添加一堆复选框，这些复选框将改变产品的总量。我有一个代码将 json 类 json_product.price 更改为 20.00 美元。我在 product_variants.liquid 文件中执行此操作。这是到目前为止的代码

```
{{ 'option_selection.js' | shopify_asset_url | script_tag }}
<script>
var json_product = {{ product | json }};
console.log(json_product);
$('.colorBlue').click(function(){
  calDollars = 30;
  $(".price").text('$'+calDollars+'.00 USD'),
  json_product.price_max = 2000,
  json_product.price = 2000;
  console.log(json_product);
});
</script> 
```

它似乎正在更改 json 文件上的价格，我让它改变了产品页面上显示的价格，但是当我单击添加到购物车时，它保持在原来的 0.00 美元价格。关于如何让它工作的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:39:20.387

您不能使用客户端代码更改定价。如果您想为产品展示不同的价格，请让客户选择不同的变体。

您可以创建对自己创建的应用程序的回调，并使用该应用程序，您可以更改产品的价格。请注意，如果您这样做，您的所有客户都会看到更改后的价格。

# c - 使用 makefile 找不到 SHA1 库链接

> ID：15644794
> 
> 赞同：0
> 
> 时间：2013-03-26T18:33:30.090
> 
> 标签：c, makefile, sha1

我在编译时无法将 sha 库与我的 makefile 链接起来。

这是我的生成文件：

```
CFLAGS= -g -Wall -Werror -std=c99 -pedantic 
LDFLAGS=-lssl -lcrypto
CC = gcc
LD = gcc
OBJS = dhtnode.o
PROG = dhtnode

.c.o:
gcc $< -o $@ $(CFLAGS)

all: $(PROG)

$(PROG): $(OBJS)
$(LD) $(LDFLAGS) $(OBJS) -o $(PROG)

dhtnode.o: dhtnode.c dhtpackettypes.h
$(CC) $(CFLAGS) $(LDFLAGS) dhtnode.c

clean:
/bin/rm -f *.o dhtnode 
```

我使用 lcrypto 库的函数在这里：

```
#include <openssl/sha.h>
#include <stdlib.h>
#include <stdin.h>
//there are other includes but not concerning this part of the code

char sha() {
char *ibuf = malloc(sizeof(char));
ibuf ="172.0.0.1:11112";
char *obuf = malloc(SHA_DIGEST_LENGTH);

SHA1((unsigned char*)ibuf, strlen(ibuf), (unsigned char*)obuf);
int i;
for (i = 0; i < 20; i++) {
    printf("%x" , (unsigned char)obuf[i]);
    }
printf("\n");

return *ibuf;
} 
```

这是我在使用 Eclipse 构建时遇到的错误：

```
C/p2p/dhtnode.c:107: undefined reference to `SHA1' 
```

谁能告诉我我的makefile或可能的eclipse设置有什么问题？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:38:23.387

编译目标文件时，不需要`LDFLAGS`. 您还需要`-c`编译器标志来生成目标文件，而不是链接二进制文件：

```
dhtnode.o: dhtnode.c dhtpackettypes.h
    $(CC) $(CFLAGS) -c dhtnode.c 
```

进行此更改后，程序为我成功编译和链接。

# delphi - 使用 GetProductInfo 的 Windows 版本

> ID：15644799
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:33:51.573
> 
> 标签：delphi

我正在尝试按照[`GetProductInfo`](http://msdn.microsoft.com/library/windows/desktop/ms724358)一位高级成员的建议，使用 Delphi XE2 中的功能显示 Vista 及以上操作系统的 Windows 版本和产品详细信息。我已经定义了以下代码，但我无法编译它。我的代码如下：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Edit1: TEdit;
    Edit2: TEdit;
    Edit3: TEdit;
    Edit4: TEdit;
    Edit5: TEdit;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
type
TGetProductInfoAPI = function(dwOSMajorVersion, dwOSMinorVersion,
dwSpMajorVersion, dwSpMinorVersion: DWORD; pdwReturnedProductType:
PDWORD): BOOL stdcall;
begin
  Edit1.Text:=IntToStr(dwOSMajorVersion);
  Edit2.Text:=IntToStr(dwOSMinorVersion);
  Edit3.Text:=IntToStr(dwSpMajorVersion);
  Edit4.Text:=IntToStr(dwSpMinorVersion);
  Edit5.Text:=TGetProductInfoAPI.pdwReturnedProductType;
end;

end. 
```

我想我在做一些错误，但我找不到它。请告诉我我在哪里犯错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:38:42.947

使用[这个函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724358%28v=vs.85%29.aspx)的正确方法`kernel32.dll`是写

```
function GetProductInfo(dwOSMajorVersion, dwOSMinorVersion, dwSpMajorVersion,
  dwSpMinorVersion: DWORD; out pdwReturnedProductType: DWORD): BOOL stdcall;
  external kernel32 delayed; 
```

在某个单元中（在任何过程、类型声明等之外）

例如，

```
function GetProductInfo(dwOSMajorVersion, dwOSMinorVersion, dwSpMajorVersion,
  dwSpMinorVersion: DWORD; out pdwReturnedProductType: DWORD): BOOL stdcall;
  external kernel32 delayed;

const
  PRODUCT_HOME_PREMIUM = $00000003;

procedure TForm1.Button1Click(Sender: TObject);
var
  rpt: cardinal;
begin
  if GetProductInfo(6, 1, 0, 0, rpt) then
    if rpt and PRODUCT_HOME_PREMIUM <> 0 then
      ShowMessage('Yeah, you''re running Home Premium.');
end; 
```

如果您只想查看返回值，那么，只需显示它！

```
procedure TForm1.Button2Click(Sender: TObject);
var
  rpt: cardinal;
begin
  if GetProductInfo(6, 1, 0, 0, rpt) then
    ShowMessage(IntToStr(rpt));
end; 
```

另外，为了清楚起见：这个函数的前四个参数（显然）是用于*input*，而不是用于*output*。如果您想获取操作系统的版本，您可以使用或简单地[`GetVersionEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724451%28v=vs.85%29.aspx)查看.`Win32MajorVersion``SysUtils`

# python - insertmany 到内存中的 sqllite db - SQLite Date 类型只接受 Python 日期对象作为输入

> ID：15644808
> 
> 赞同：1
> 
> 时间：2013-03-26T18:34:12.977
> 
> 标签：python, sqlite, insert, sqlalchemy, runtime-error

我有一个表，我试图使用 dict 对象插入许多表。

```
engine = create_engine('sqlite:///:memory:', echo=True)
metadata = MetaData()
hockey= Table('hockey', metadata, 
    Column('team', String(16), primary_key=True),
    Column('jersey_colour', String(16)),
    Column('stadium', String(32)),
    Column('goals', Integer),
    Column('date', Date, primary_key=True),
    Column('assists', Integer))

>>>data[0]
{'jersey_colour': u'Blue',
 'team': u'Toronto Maple Leafs',
 'stadium': u'Air Canada Center',
 'date': '2013-03-25',
 'assists': 301,
 'goals': 151}

>>>data[1]
{'jersey_colour': u'Red',
 'team': u'Calgary Flames',
 'stadium': u'PenWest',
 'date': '2013-03-25',
 'assists': 254,
 'goals': 147}

conn = engine.connect()
conn.execute(ins, data) 
```

> StatementError: SQLite Date 类型只接受 Python 日期对象作为输入。（原始原因：TypeError：SQLite Date 类型只接受 Python 日期对象作为输入。）'INSERT INTO "hockey" (team, jersey_colour, Stadium, goal, date, assistants) VALUES (?, ?, ?, ?, ?, ? )' [{'jersey_colour': 'Blue', 'team': 'Toronto Maple Leafs', 'stadium': u'Air Canada Centre', 'date': '2013-03-25', 'assists': 301 , '目标': 151}

1.  第一个问题 - 将参数馈送到“？”的顺序是什么？事情。如您所见，字段显示如下：

    ```
    team
    jersey_colour
    stadium
    goals
    date
    assists 
    ```

    但是，字典顺序是任意的：

    ```
    jersey_colour
    team
    stadium
    date
    assists
    goals 
    ```

    这是 sqlite 或 mysql 的问题吗？理论上提供了密钥，因此它应该能够确定数据的存储位置，但我不确定。对于生产，我将使用 mysql 数据库，但对于测试，我使用 inmemory sqlite db。

2.  第二个问题，错误：

    ```
    StatementError: SQLite Date type only accepts Python date objects as input 
    ```

    我发现以下内容（[https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/EeZbkePPb38](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/EeZbkePPb38)），上面写着：

    > SQLite 没有专门的 DATE 类型。SQLAlchemy 的 Date() 类型需要 Python 日期时间，即“import datetime; date = datetime.date(year, month day)”。

    与 data 键配对的值是由 Python datetime.date 命令根据上面评论员所说的创建的。

    ```
    >>>today_date = datetime.date.today() 
    ```

所以我不确定为什么会发生错误。感谢您对问题 #1 和 #2 的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:39:12.027

1.  SQLAlchemy 负责绑定参数和排序。没有必要为此担心。

2.  您在 SQLAlchemy ORM 元数据定义中指定您正在处理日期列。SQLAlchemy 然后将翻译处理为后端数据库的正确形式。错误来自 SQLAlchemy，*而不是*SQLLite；SA 为您翻译日期对象。

    这是*双向的*；即使在使用 SQLLite 时，您也可以放入日期对象，而在查询时，您又可以取出日期*对象*。

对您链接到的帖子的回复在那里谈到了同样的事情；`String()`如果您想将日期存储为字符串，请使用列，如果您将列声明为 type ，请使用`datetime.date()`or实例。`datetime.datetime()``Date()`

你的`date`键是一个字符串；使用`datetime.date()`对象来避免错误：

```
{'jersey_colour': u'Blue',
 'team': u'Toronto Maple Leafs',
 'stadium': u'Air Canada Center',
 'date': datetime.date(2013, 3, 25),
 'assists': 301,
 'goals': 151} 
```

# python - Django URL 模式

> ID：15644809
> 
> 赞同：1
> 
> 时间：2013-03-26T18:34:15.700
> 
> 标签：python, django, url, url-pattern

我创建了一个非常简单的博客，但遇到了几个 URL 问题。对于我的标签和特定帖子视图，我遇到了以下问题。

**具体的帖子视图示例**
这两个站点呈现相同的内容，并希望第二个站点呈现 404。
website.com/post/1/hello-world
website.com/post/1/hello-world/non-sense （应该渲染 404)

**标记查看**
website.com/tag/python：这将呈现所有标记为 python 的帖子，很棒。但是...
website.com/tag/python/party：这将呈现所有标记为“python/party”的帖子，而不是呈现 404。

这是我的 URL 模式设置，因此您可以查看。

```
url(r'^post/(?P<pk>\d+)/(?P<post_title>)', DetailView.as_view(
                        model = post,
                        template_name = "post.html")),
url(r'^post/$', ListView.as_view(
                        queryset = post.objects.all().order_by("-date"),
                        template_name = "archives.html")),
url(r'^archives/$', ListView.as_view(
                        queryset = post.objects.all().order_by("-date"),
                        template_name = "archives.html")),
url(r'^tag/(?P<tag>[\w|\W]+)', 'tags'), 
```

 **标签的**更新解决方案：****

 **```
url(r'^tag/(?P<tag>[\w]+)\W*/$', 'tags'), 
```

帖子解决方案：

```
url(r'^post/(?P<pk>\d+)/(?P<post_url>[\w-]+)/$', DetailView.as_view(
                        model = post,
                        template_name = "post.html")), 
```

**感谢 Huckleberry Finn 和 krakax 的所有帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:39:34.650

你**的帖子** `URLconf`正则表达式

```
url(r'^post/(?P<pk>\d+)/(?P<post_title>)', DetailView.as_view(
                    model = post,
                    template_name = "post.html")), 
```

应该改为

```
url(r'^post/(?P<pk>\d+)/(?P<post_title>[-\w]+)/$', DetailView.as_view(
                    model = post,
                    template_name = "post.html")), 
```

表示`URLconf`以斜杠结尾

无论如何，尝试`DetailView` `URLconf`在 post 之后定义你`ListView`。在我看来，如果您将列表视图和详细视图更改为`posts/`，`post/`您的问题将得到解决。问题的解决方案是相同的`tags` `URLconf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:47:53.997

你的正则表达式

```
r'^tag/(?P<tag>[\w|\W]+)' 
```

表示组标签将包含“标签/”之后的所有字符。[\w|\W] 表示“所有字母数字”或“除了字母数字之外的所有”。这相当于“所有字符”。

应该改为

```
r'^tag/(?P<tag>[\w]+)\W*' 
```

这将首先阻止您的组非字母数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:09:52.457

当然，现在我看到了两种方法。

首先，改为：

```
r'^tag/(?P<tag>\w+)(?P<end>\W.*)' 
```

（顺便说一句，在您的情况下，[] 不是必需的）这样，您将名为“end”的组作为标签控制器的参数，您可以对其进行测试并重定向到您的 404 自定义页面或生成 404 经典错误。

第二种可能性是：添加另一个 url 钩子和控制器：

```
url(r'^tag/(?P<tag>\w+)\W*', 'tags404'),

url(r'^tag/(?P<tag>\w+)$', 'tags'), 
```

这样，您就禁止在“tag/”之后包含除字母数字以外的其他字符的任何 url。

如果你想在最后只允许一个可选的'/'，你可以写来代替你的新钩子：

```
url(r'^tag/(?P<tag>\w+)/?$', 'tags'), 
```**

# ruby-on-rails - 创建新的 Rails 应用程序会转储根目录中的所有信息

> ID：15644815
> 
> 赞同：1
> 
> 时间：2013-03-26T18:34:32.483
> 
> 标签：ruby-on-rails

所以我有一个奇怪的问题。当我做 rails new ~ 时，它创建的所有文件都会将它们放在我在 OSX 的根目录中。即使我指定在不同的目录中启动，它也总是将其全部放在那里。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:47:13.923

你是在字面上输入：

```
rails new ~ whatever 
```

rails 命令的用法如下： rails new APP_PATH [options]

所以在我看来，你正试图在你的主目录中创建一个新的 rails 应用程序。尝试：

```
rails new whatever 
```

# python - 在异步 PyQt 类中包装 Python 类

> ID：15644828
> 
> 赞同：0
> 
> 时间：2013-03-26T18:35:14.160
> 
> 标签：python, qt, pyqt

我正在开发我的宠物项目。这是一个从 Facebook 下载我的收件箱文件夹的小应用程序。我希望它在 CLI 和 GUI（在 PyQt 中）模式下都可用。我的想法是先写一个交流类，然后是前端。我知道下载过程被阻塞，这在 CLI 模式下不是问题，但它在 GUI 中。我知道有，`QNetworkAccessManager`但我必须重新实现我已经编写的类，然后同时维护两个类。

我搜索了一段时间，我想出了一个解决方案，我将子类`QObject`和我的`FB`类，实现信号，而不是创建一个`QThread`对象并使用可以的`moveToThread()`方法，但我必须注意创建和停止胎面。

是否可以将我的 Python 类包装成某种东西以使其表现得像`QNetworkAccessManager`？所以方法会立即返回，并且当数据准备好时对象会发出信号。

**更新** 谢谢你的意见。我有2个主要课程。第一个被称为`SimpleGraph`只是隐藏`urllib2.urlopen()`。它准备查询并返回从 Facebook 获取的解码 json。实际工作发生在`FBMDown`课堂上：

```
class FBMDown(object):
    def __init__(self, token):
        self.graph = SimpleGraph(token)
        self.last_msg_count = 0

    def _message_count(self, thread_id):
        #TODO: Sanitize thread_id
        p = {'q': 'SELECT message_count FROM thread WHERE thread_id = {0} LIMIT 1'.format(thread_id)}
        self.last_msg_count = int(self.graph.call(params=p, path='fql')['data'][0]['message_count'])
        return self.last_msg_count 
```

因此，当`_message_count`被调用时，它返回给定线程 id 的消息数。此方法在 CLI 模式下效果很好，在那里阻塞不是问题。我想将这个类包装成一个类（如果可能的话），它像异步一样工作`QNetworkAccessManager`，所以它不会阻塞 GUI，但它会在数据准备好时发出信号。我现在知道的唯一技术是子类化`QObject`​​ . 它看起来像这样：

```
class QFBMDown(QtCore.QObject):
    msg_count_signal = QtCore.pyqtSignal(int)

    def __init__(self, parent=None):
        QtCore.QObject.__init__(self, parent)

    def get_msg_count(self):
        #Here happens the IO
        time.sleep(2)
        self.msg_count_signal.emit(1) 
```

这是我的 Windows 课程：

```
class Window(QtGui.QMainWindow):
    def __init__(self):
        super(Window, self).__init__()
        self.centralwidget = QtGui.QWidget(self)
        self.button_getmsgcount = QtGui.QPushButton(self.centralwidget)
        self.setCentralWidget(self.centralwidget)

        self.i = 0
        self.timer = QtCore.QTimer()
        self.timer.timeout.connect(self.block_indicator)
        self.timer.start(20)

        #self.worker = QtCore.QThread()
        self.fbobj = QFBMDown()
        #self.fbobj.moveToThread(self.worker)
        #self.worker.start()

        self.button_getmsgcount.clicked.connect(self.fbobj.get_msg_count)
        self.fbobj.msg_count_signal.connect(self.show_msg_count)

    def block_indicator(self):
        self.button_getmsgcount.setText(str(self.i))
        self.i += 1

    def show_msg_count(self, data):
        print 'Got {0} msgs in the thread'.format(data) 
```

现在，当我按下按钮时，GUI 会阻塞。如果我取消注释第 13、15、16 行（我在其中创建一个线程，移入`fbobj`该线程然后启动它）它不会阻塞，它几乎可以按我的意愿工作，但我每次都必须手动完成所有操作，我有照顾关闭线程（现在我实现了在退出前关闭线程`QMainWindow`的 `closeEvent`方法，但我确信这不是正确的方法）。

我想做什么甚至可能吗？我不想实现一个新类，然后维护两个做同样事情的类。我坚持这样做的原因是为了让我的应用程序在没有 Qt 的情况下工作，但为那些不想键入命令行参数的人提供一个很好的 gui。

# android - 在 Android 上访问 Google Drive (OAuth)

> ID：15644830
> 
> 赞同：2
> 
> 时间：2013-03-26T18:35:40.140
> 
> 标签：android, google-drive-api

我有一个 Android 应用程序（使用 HTML、CSS、JS 制作）。使用 Phonegap，我导出了签名应用程序。我获得文件 .keystore 和 .apk

我在 Google Console API -> 已安装的应用程序 -> Android 上创建 google 帐户。我使用证书 SHA-1 生成一个 client_id 以验证我的应用程序。

在我的应用程序中，当我想登录 Google Drive 时运行 .apk，我不能。我收到此错误：

> “来源的无效参数值：缺少权限：file：//”

我做错了什么？

# php - 分类网站中的下一个和上一个广告功能

> ID：15644836
> 
> 赞同：1
> 
> 时间：2013-03-26T18:35:51.730
> 
> 标签：php, mysql, next

```
<script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/lt_LT/all.js#xfbml=1";fjs.parentNode.insertBefore(js, fjs);}(document,'script', 'facebook-jssdk'));</script>
<script type="text/javascript">  window.___gcfg = {lang: 'lt'}; (function() { var po = document.createElement('script');po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s =document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);  })();</script> 
```

分类系统 ed_classified 中的下一个和上一个广告？

你好，

我是 Drupal 的新手，我正在尝试建立分类网站。现在我正在测试 ed_classifieds 项目，它缺少一个（在我看来）大功能：链接（或按钮）到同一类别中的下一个和上一个广告。

例如：

1.  分类广告按类别分类（汽车、宠物、动物、求职、服务、电器等）
2.  类别内部可以有其他子类别（汽车摩托车>>汽车，宠物动物>>狗，求职>>城市名称等），甚至更深，不限制深度。
3.  当访问者点击广告列表中的广告链接并被重定向到广告查看页面时，他/她可以看到“下一个广告”和“上一个广告”链接/按钮的所有信息。理想情况下，还应该有一些额外的信息（如广告标题、国家/城市等）。

[我在这个网站http://www.parduodu-perku.lt](http://www.parduodu-perku.lt)看到了这个功能，我在一些 joomla 论坛上找到了这个功能，我真的很喜欢这个功能，并希望将它实现到我的新网站中。有人能帮我吗？

# grails - 示例 Grails 2.14 应用程序无法在 Tomcat 中运行

> ID：15644837
> 
> 赞同：0
> 
> 时间：2013-03-26T18:35:53.060
> 
> 标签：grails, grails-plugin

```
Grails 2.1.4
Tomcat 7.0.37
Java 1.7
Window 7 
```

我在 Eclipse 中创建了示例 Grails 应用程序，我使用 run-app 运行。它工作正常，也可以在浏览器中打开。

但是对于相同的应用程序，我使用 grails:maven-install 构建 .war 文件。我正在尝试部署，但出现以下错误：

2013 年 3 月 26 日晚上 11:56:26 org.apache.catalina.core.StandardContext startInternal SEVERE: Context [/HelloGrails-0.1] 由于以前的错误而启动失败 2013 年 3 月 26 日晚上 11:56:26 org.apache.catalina .loader.WebappClassLoader checkThreadLocalMapForLeaks 严重：Web 应用程序 [/HelloGrails-0.1] 创建了一个 ThreadLocal，其键类型为 [org.codehaus.groovy.runtime.GroovyCategorySupport.MyThreadLocal]（值 [org.codehaus.groovy.runtime.GroovyCategorySupport$MyThreadLocal @644aa32b]）和类型为 [java.lang.ref.SoftReference] 的值（值 [java.lang.ref.SoftReference@601e8f7d]），但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2013 年 3 月 26 日晚上 11:56:26 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks 严重：Web 应用程序 [/HelloGrails-0.1] 创建了一个 ThreadLocal，其键类型为 [org.codehaus.groovy.reflection.ClassInfo.ThreadLocalMapHandler]（值 [org.codehaus.groovy.reflection.ClassInfo$ThreadLocalMapHandler@639ca35]）和一个值[java.lang.ref.SoftReference] 类型（值 [java.lang.ref.SoftReference@3c0a60c4]）但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。

请帮我..............

谢谢，拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:58:01.140

在 WEB-INF/classes 中创建一个名为 logging.properties 的文件，其内容如下：

```
org.apache.catalina.core.ContainerBase.[Catalina].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler 
```

重新启动 apache 并查看堆栈跟踪

# postgresql - postgres：本地主机未连接

> ID：15644845
> 
> 赞同：4
> 
> 时间：2013-03-26T18:36:15.150
> 
> 标签：postgresql, postgresql-9.1

我的`postgreSQL.conf`样子

```
# - Connection Settings -

listen_addresses = '*'          # what IP address(es) to listen on;
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost', '*' = all
                                        # (change requires restart)
port = 5432                             # (change requires restart) 
```

而且我也知道 postgres 正在运行

```
air:data postgres$ ps -aef | grep postgres
  504 16474 16473   0 11:34AM ??         0:00.00 postgres: logger process
  504 16476 16473   0 11:34AM ??         0:00.00 postgres: writer process
  504 16477 16473   0 11:34AM ??         0:00.00 postgres: wal writer process
  504 16478 16473   0 11:34AM ??         0:00.00 postgres: autovacuum launcher process
  504 16479 16473   0 11:34AM ??         0:00.00 postgres: stats collector process
    0 16087 16078   0 10:54AM ttys001    0:00.03 su - postgres
  504 16473     1   0 11:34AM ttys001    0:00.22 /Library/PostgreSQL/9.1/bin/postgres -D/Library/PostgreSQL/9.1/data
  504 16484 16088   0 11:34AM ttys001    0:00.00 grep postgres 
```

但我无法连接

```
 psql -Uuser -W
Password for user user:
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

另外，当我运行以下

```
 lsof -i tcp:5432
 ✘ me@air11:37:13 ⮀ ~ ⮀ netstat -a | grep postgres
tcp6       0      0  *.postgres             *.*                    LISTEN
tcp4       0      0  *.postgresql           *.*                    LISTEN 
```

它什么也没说`port 5432` 我错过了什么？

**更新**

我的`pg_hba.conf`样子

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     md5
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:22:28.433

在 pg_hba.conf 中：

```
host    all             all             127.0.0.1/32            trust 
```

最后一列更改为`trust`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:23:08.577

不知道为什么会这样，但我发现[postgresapp.com](http://postgresapp.com)很好用

我在[http://www.pgadmin.org/](http://www.pgadmin.org/)上使用它，到目前为止我运行得很顺利

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:16:14.847

您需要使用`psql`您安装的 PostgreSQL 软件包随附的程序，而不是Apple 系统`psql`的`/usr/bin`一部分目录中的程序。

例如，如果使用[postgres.app](http://postgresapp.com/)，他们在[文档](http://postgresapp.com/documentation#toc_1)中说：

> Mac OS 10.7 附带旧版本的 PostgreSQL，可以使用以下命令启动：
> 
> $ psql -h localhost PostgreSQL 附带了一系列有用的二进制文件，例如 pg_dump 或 pg_restore，您可能会想要使用它们。继续将 Postgres.app 附带的 /bin 目录添加到您的 PATH 中（最好在 .profile、.bashrc、.zshrc 等中，以确保为每个终端会话设置此内容）：
> 
> PATH="/Applications/Postgres.app/Contents/MacOS/bin:$PATH"
> 正确设置路径后，您应该能够在没有主机的情况下运行 psql。（如果没有，请通过执行 which psql 检查是否在 PATH 中加载了正确的版本）

如果使用另一个预打包的 postgresql 源，则使用不同的路径是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T07:33:14.610

您可以尝试停止服务并重新启动服务。重新加载配置文件后。在它是否工作时再次检查。

# java - 为什么在实例中创建非静态实例时会发生堆栈溢出错误？

> ID：15644846
> 
> 赞同：-2
> 
> 时间：2013-03-26T18:36:19.870
> 
> 标签：java, stack-overflow

为什么在同一类的实例中创建非静态实例时会发生堆栈溢出错误？

```
public class ObjectTest {
    ObjectTest instanceObj = new ObjectTest("Outside");

    public ObjectTest(String s) {
        System.out.println(s);
    }

    public static void main(String[] args) {
        ObjectTest localObj = new ObjectTest("Inside");
    }
} 
```

但问题通过以下修改得到解决：

```
static ObjectTest instanceObj = new ObjectTest("Outside"); 
```

据了解，循环依赖在第一种情况下发生，同时将新对象分配给`instanceObj`引用

任何人都可以澄清整个事情吗？为什么静态引用不会发生循环依赖？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:38:14.937

当`instanceObj`是非静态的，构造函数`ObjectTest`创建另一个`ObjectTest`创建另一个`ObjectTest`，依此*类推*。当它是静态的时，只`instanceObj`为整个`ObjectTest`类创建一个……毕竟它*是静态的。*:) 当 instanceObj 是静态的并且它`ObjectTest`被创建时，它已经拥有静态的 instanceObj，它就是它自己。这确实需要一些时间来适应，这可能有助于在纸上解决它并确保您清楚`static`关键字的含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:38:26.290

因为它在对象内部创建对象，并在对象内部创建对象。当两个镜子保持在对方面前时，这就像无限的镜像。

关于静态对象，它不是类的实例。静态对象是在类级别创建的。

我们在设计 SingleTon 类时使用了同一个类的这样的静态对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:44:42.650

因为你暴露的代码几乎是一样的：

```
public class ObjectTest {
    ObjectTest instanceObj;

    public ObjectTest(String s) {
        instanceObj = new ObjectTest("Outside"); // creating another object executing this constructor again
        System.out.println(s);
    }

    public static void main(String[] args) {
        ObjectTest localObj = new ObjectTest("Inside");
    }

} 
```

当您将字段修改为静态字段时，您可以执行以下操作：

```
public class ObjectTest {
    static ObjectTest instanceObj;

    static {
        instanceObj = new ObjectTest("Outside");
    }    

    public ObjectTest(String s) {
        System.out.println(s);
    }

    public static void main(String[] args) {
        ObjectTest localObj = new ObjectTest("Inside");
    }

} 
```

只执行一次构造函数。

# methods - 重复的任务——产生新的进程还是连续运行？

> ID：15644848
> 
> 赞同：1
> 
> 时间：2013-03-26T18:36:31.793
> 
> 标签：methods, process, long-integer

我们有大约 10 个不同的 Python 脚本，它们从 Web 下载数据、从数据库读取数据并将数据写回该数据库。他们每 10 秒重复一次（或最后一个任务完成后 10 秒）。

问题是，运行这些任务的最佳方法是什么？我可以想到几个方法：

1.  a while True 运行任务然后休眠一段时间。它可以由像 supervisord 这样的看门狗保护，确保它始终处于运行状态。

2.  让脚本只执行一次任务，并由另一个进程每 10 秒从外部调用一次脚本。

3.  让脚本执行任务让我们说 1 小时（每 10 秒一小时），并让看门狗确保该任务在一个小时结束后再次运行。

我想避免实际上做某事的长时间运行的进程，因为我不想长时间处理内存问题等。

**附加信息**

1.  这些脚本是不同的，因为它们每个都从不同的源检索数据，并查询、计算和插入不同的数据到数据库中。

2.  这些任务每 10 秒执行一次，因为正在检索的数据是实时的，我们不仅需要保持非常频繁的更新，还要将所有历史数据保存在数据库中。

3.  脚本使用了很多资源 - MySQL 连接、HTTP 连接、Redis 连接等。我们之前遇到过使用长时间运行方法的问题，特别是 MySQL 连接（MySQL 服务器之类的东西已经消失，甚至尽管所有连接都已关闭）。因此，倾向于让脚本在更短的时间内运行。

在这方面有哪些常见的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:51:55.767

除非您的脚本以某种方式泄漏内存（不太可能），否则它们应该都是相同的。因此，为了简单起见（*您的*时间编程/调试比机器时间的几毫秒要昂贵得多，甚至每 10 秒！）我会选择每 10 秒检查一次的单个脚本。

OTOH，每 10 秒检查一次听起来很忙。您不能进行设置，以便您监控的任何内容都会在发生变化时告诉您吗？或者将记录批量化，这样您就可以一次检索一天的价值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:56:03.320

如果您在 linux 上运行，则 cron 的粒度为一分钟。我们有不断运行的流程。脚本不会监视它们，而是会打开一个信号量，该信号量会在程序正常完成与否时释放。这样，如果它运行很长时间并且被 cron 再次调用，则副本将在无法获得锁时退出。这样，您可以根据需要经常调用它，而不会踩到可能仍在运行的副本。

# linux - 在 bash 中验证一些参数

> ID：15644849
> 
> 赞同：2
> 
> 时间：2013-03-26T18:36:37.310
> 
> 标签：linux, bash

我正在 BASH 中进行验证

```
if [ !( ( -e $f ) || ($# -lt 2) || ( -d $f ) ) ]; then
    exit 0
fi 
```

我正在尝试查看该文件是否存在，或者它是否是一个目录，或者是否通过终端传递了足够的参数。我可以这样做还是必须以其他方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:44:40.060

看起来你在这里至少有一些问题。

*   您的测试语法将需要更现代的双`[[`命令而不是传统的单`[`命令。

*   你`fi`最后错过了一个。（我为你编辑了这个，感谢修改它的人。）

*   你*可能会*觉得你的测试颠倒了，但我不确定。这取决于脚本的其余部分是什么样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:22:58.653

我从你的问题中收集到你想拒绝任何不是普通文件的东西。在这种情况下，如果使用 -f 而不是 -e，则对目录的测试是多余的。

```
if [[  ! -f "$f" || $# -lt 2 ]]; then
    exit 0
fi 
```

顺便说一句，如果这是一个错误退出，你应该退出 0 以外的东西 - 0 在大多数情况下表示成功；出口1会更好。

# asp.net - 在 .NET 项目中在哪里复制引用的程序集？

> ID：15644853
> 
> 赞同：3
> 
> 时间：2013-03-26T18:36:44.313
> 
> 标签：asp.net, .net, visual-studio

我有一堆程序集 (DLL) 我想在我当前的 .NET 4.5 项目中引用。但是，现在它们都位于我硬盘驱动器的某个本地文件夹中。当有人在同一个项目上工作时，这些引用程序集显然不在同一个本地文件夹中。我的计划是将这些程序集复制到我项目中的某个文件夹中，并将其放入源代码管理中。

这是一个好计划吗？这些东西通常放在哪个文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:59:23.353

NuGet 是首选方法；但是，某些程序集不在 NuGet 中。所以这里是 nopCommerce 的一个例子。

1.  创建一个 Dependencies 文件夹（在您的项目文件夹内）
2.  将所有第三方程序集保存在其中。

![在此处输入图像描述](../Images/683d73711508a160645436682d0ff2f5.png)

![在此处输入图像描述](../Images/980172adf348958a1d174f881bf877a8.png)

![在此处输入图像描述](../Images/914c5d2d104008294973be78730bdd53.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:39:04.633

绝对是个好主意。通常我会在解决方案的顶层有一个“依赖项”目录（或者如果你有一个更高的目录），其中包含项目使用的所有 DLL。这些都在源代码控制中，因此当您检查代码时，它会按原样工作，因为 DLL 都与项目相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:40:38.170

NuGet 是使用外部库的最常用方法，它将依赖项放置在解决方案文件夹根目录下名为 Packages 的文件夹中。您可以为非 nuget 依赖项创建一个名为 dependencies 的文件夹。通过将此文件夹放在解决方案的根目录中，您可以进行相对引用，以便对每个人都有效。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-26T18:39:04.167

GAC 所有 DLL 程序集的更好方法。

[http://msdn.microsoft.com/en-us/library/ex0ss12c(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ex0ss12c(v=vs.80).aspx)

```
gacutil -i "DLL File Path" 
```

# python - 如何在 Python 中读取大文件的特定部分

> ID：15644859
> 
> 赞同：15
> 
> 时间：2013-03-26T18:36:57.110
> 
> 标签：python, parsing

给定一个大文件（数百 MB），我将如何使用 Python 快速读取文件中特定开始和结束索引之间的内容？

本质上，我正在寻找一种更有效的方法：

```
open(filename).read()[start_index:end_index] 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-26T18:38:56.977

您可以`seek`将文件放入文件中，然后从那里读取一定数量的文件。Seek 允许您获取文件中的特定偏移量，然后您可以将读取限制为仅该范围内的字节数。

```
with open(filename) as fin:
    fin.seek(start_index)
    data = fin.read(end_index - start_index) 
```

那只会读取您正在寻找的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-28T14:05:08.873

这是我使用可变宽度编码的解决方案。我的 CSV 文件包含一个字典，其中每一行都是一个新项目。

```
def get_stuff(filename, count, start_index):
    with open(filename, 'r') as infile:
             reader = csv.reader(infile)
             num = 0 
             for idx, row in enumerate(reader):
                 if idx >= start_index-1:
                     if num >= count:
                         return
                 else:
                     yield row 
                     num += 1 
```

# sql-server-2008 - 除了 NULL 之外，处理未知日期时间值的好策略是什么？

> ID：15644861
> 
> 赞同：1
> 
> 时间：2013-03-26T18:37:22.227
> 
> 标签：sql-server-2008, relational-database, database-normalization

我的数据库有 3 个表：组织、用户和组织用户连接。OrganizationUserJunction 表跟踪用户所属的组织、他们何时成为该组织的成员以及何时离开该组织。MemberFrom 字段填充了一个已知日期，但 MemberTo 日期一开始是未知的。我不喜欢在我的表中有 NULL 值。

当我处理一个字符串字段时，我可以用“未知”而不是 NULL 填充它们。我想对日期时间列做类似的事情。除了空值之外，还有什么好的策略来处理具有未知值的 SQL Server 日期时间列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:30:03.080

以您描述的示例为例。当前成员没有 MemberTo 日期，因此在成员资格表中您不需要 MemberTo 日期。将 MemberTo 日期放在前成员的表中（该表将包含此属性以及与前成员相关的其他属性，但不适用于当前成员）。不需要空值来执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T10:36:12.207

没有其他人提到的另一种方法是为两个日期列使用单独的表。（在重新阅读时，我看到无与伦比的@sqlvogel 确实提到了这一点。我将代码作为示例。如果@sqlvogel 想将它合并到我刚刚赞成的答案中，那对我来说很好。我会之后删除我的答案。）

```
create table org_users (
  org_id integer not null references organizations (org_id),
  user_id integer not null references users (user_id), 
  member_from date not null default current_date,
  primary key (org_id, user_id, member_from)
);

create table org_users_member_to (
  org_id integer not null, 
  user_id integer not null,
  member_from date not null,
  member_to date not null default current_date
    check (member_to > member_from),
  primary key (org_id, user_id, member_from),
  foreign key (org_id, user_id, member_from) 
    references org_users (org_id, user_id, member_from)
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T06:49:40.160

这是一个合理的问题，我不确定你为什么被否决。

至少根据 Joe Celko 的说法，正确答案是使用 9999-12-31 作为您的结束日期。这是根据 ISO 8601 的官方“时间结束”。

您还可以考虑使用为此目的而设计的第 6 范式（又名 Anchor Modeling）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T18:58:12.940

有什么问题`NULL`？如果它的实际原因很`NULL`重要（例如，心率是`NULL`因为他死了，或者因为我们还没有捕获它），请在单独的列中跟踪它（可能是一个`tinyint`FK 到一个名为`dbo.DateIsNULLReasons`table 的查找表）。

对此的所有解决方法（“魔术”日期值，对所有日期使用 INT 来查找必须具有`NULL`有效列或在其中存储魔术日期的不同表）对我来说似乎是黑客行为。

我认为你应该克服你对`NULL`s的厌恶。它们的存在是有原因的，例如指定值为`unknown`，无论您喜欢与否，以及无论原因如何。

通过存储`UNKNOWN`而不是存储可以获得什么`NULL`？您知道在表和任何二级索引中花费了多少额外空间吗？您现在必须为某些查询过滤掉该场景，您不觉得烦人吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T19:30:01.293

使用默认日期进行会员审核怎么样？加入5年后再说。

或者，如果我们正在与一个商业组织打交道并且您捕获 DOB 和性别，那么您可以计算退休年龄。

我个人认为 NULL 没有问题。在 MemberTo date 的上下文中，IS NULL = 仍然是成员。它与默认值的用途完全相同，并且远没有填充的默认日期值复杂。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-15T18:58:47.703

我知道这是一个旧线程，但我偶然发现了它。

这是一个`null`应该避免的好点，尤其是对于`DateTime`.

**原因**：SQL 服务器默认`null`为`1/1/1900`. 如果您有类似的用例`dateOfCasuality`，则需要包含特殊逻辑来处理 DOB 相关规则。

**可能的解决方案**：使用`ForeignKey`与另一个包含日期的表的关系。但这会增加模式的复杂性。但是，我永远不会尝试将其转换为字符串，因为这会导致编码噩梦。

# oracle - Oracle 共享内存领域不存在

> ID：15644862
> 
> 赞同：2
> 
> 时间：2013-03-26T18:37:26.700
> 
> 标签：oracle, oracle11g

我在 Windows 7 机器上运行 Oracle 11。从今天早上开始，我遇到了这个奇怪的问题。当我尝试连接到数据库时，它说“共享内存领域不存在”。但是，当我使用数据库配置助手时，选择一个数据库并单击下一步，它会“检索数据库信息”。在此期间，当我连接到数据库时，它会显示“Oracle 正在关闭”消息。一旦完成“检索数据库信息”（并且我不会超出数据库配置助手中的该步骤），我就可以毫无问题地连接到数据库。

我比较了工作前后运行的环境变量和windows服务，都一样。

问题是，数据库配置助手中的“检索数据库信息”如何解决“共享内存领域不存在”问题？

任何的意见都将会有帮助。

PS我在stackoverflow中检查了与这个主题相关的其他问题，没有发现任何有用的东西，或者我没有正确理解它。所以请不要将这个问题作为重复而关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:50:36.577

多谢你们

我通过执行以下操作解决了这个问题。

*   1) 选择开始 > 程序 > Oracle - HOME_NAME > 配置和迁移工具 > Administration Assistant for Windows。

*   2) 右键单击​​ SID。

*   3) 选择启动/关闭选项。

*   4) 选择 Oracle 实例选项卡。

选择在服务启动时启动实例、在服务停止时关闭实例，或同时选择两者。

我重新启动了机器，它工作了。

# php - 无法修复选择/删除功能。PHP/MySQL/JavaScript

> ID：15644864
> 
> 赞同：0
> 
> 时间：2013-03-26T18:37:38.067
> 
> 标签：php, javascript, mysql

伙计们，我有以下脚本用于在 mysql 中添加、编辑和删除内容，并在 index.php 文件中显示它。所以这是我的 index.php 文件：

```
<script>function goDel() 
{ 
    var recslen =  document.forms[0].length; 
    var checkboxes="" 
    for(i=1;i<recslen;i++) 
    { 
        if(document.forms[0].elements[i].checked==true) 
        checkboxes+= " " + document.forms[0].elements[i].name 
    } 

    if(checkboxes.length>0) 
    { 
        var con=confirm("Are you sure you want to delete"); 
        if(con) 
        { 
            document.forms[0].action="delete.php?recsno="+checkboxes 
            document.forms[0].submit() 
        } 
    } 
    else 
    { 
        alert("No record is selected.") 
    } 
} 

function selectall() 
{ 
//        var formname=document.getElementById(formname); 

        var recslen = document.forms[0].length; 

        if(document.forms[0].topcheckbox.checked==true) 
            { 
                for(i=1;i<recslen;i++) { 
                document.forms[0].elements[i].checked=true; 
                } 
    } 
    else 
    { 
        for(i=1;i<recslen;i++) 
        document.forms[0].elements[i].checked=false; 
    } 
} 
</script>
<style type="text/css"> 
<!-- 
.style1 {color: #FFFFFF} 
--> 
</style> 
</head> 

<body> 
<table width="775" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF"> 
  <tr> 
    <td><hr size="1" noshade></td> 
  </tr> 
  <tr> 
    <td> 
      <form action="" method="post" name="" id=""> 
        <table width="600" border="1" align="center" cellpadding="2" cellspacing="2"> 
          <tr> 
            <td><input name="topcheckbox" type="checkbox" class="check" id="topcheckbox" onClick="selectall();" value="ON"> 
Select All    </td> 
            <td colspan="3" align="center"><a href="form.php?mode=add">Add New Branch </a></td> 
          </tr> 
          <tr> 
            <td><strong><a href="javascript:goDel()">Delete</a></strong></td> 
            <td><strong>Branch Name </strong></td> 
            <td><strong>Short Name </strong></td> 
            <td><strong>Update</strong></td> 
          </tr> 
          <? 
          include("conn.php"); 
          $sql="select sn,branchname,shortname from $branch order by sn"; 
          $result=mysql_query($sql,$connection) or die(mysql_error()); 
          while($row=mysql_fetch_array($result)) { 
          ?> 
          <tr> 
            <td><input name="<? echo $row['sn']; ?>" type="checkbox" class="check"></td> 
            <td><? echo $row['branchname']; ?></td> 
            <td><? echo $row['shortname']; ?></td> 
            <td><a href="<? echo "form.php?sn=".$row['sn']."&mode=update"; ?>">Update</a></td> 
          </tr> 
          <? } ?> 
        </table> 
    </form></td> 
  </tr> 
</table> 
```

这是我的 delete.php 文件：

```
<?php 
include("conn.php"); 
$recsno=$_GET["recsno"]; 
$data=trim($recsno); 
$ex=explode(" ",$data); 
$size=sizeof($ex); 
for($i=0;$i<$size;$i++) { 
    $id=trim($ex[$i]); 
    $sql="delete from $branch where sn='$id'"; 
    $result=mysql_query($sql,$connection) or die(mysql_error()); 

} 
header("location: index.php"); 
?> 
```

问题是当我检查 1 行并单击删除时，它正在删除所有行，就像我单击全选（我没有这样做）一样。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:41:31.620

似乎删除查询没有获得 的值`$id`，您必须将值存储在`$id`.

只是获取`id`值

```
$id = $_REQUEST["sn"]; 
```

那么你的`delete query`

```
$sql="delete from $branch where sn='$id'"; 
```

# git - 获取与上次 'git pull' 的差异更改的电子邮件

> ID：15644867
> 
> 赞同：1
> 
> 时间：2013-03-26T18:37:58.353
> 
> 标签：git, jenkins

我想收到一封电子邮件，其中将显示 git 所做的最后更改。它的格式应该与 github 类似（+ 为绿色，- 为红色）。

这是我到目前为止所做的：

1.  将 Jenkins 配置为每 5 分钟检查一次更改、拉取更改并发送电子邮件。
2.  安装了“Jenkins 电子邮件扩展插件”，将其配置为使用自定义“果冻”模板，该模板还将控制台输出发送到电子邮件。
3.  我在构建中添加了一个脚本，它运行“git show”。

这样，如果代码在这段时间内更改，我每 5 分钟将“git show”的输出发送到电子邮件。

缺少的内容如下：

1.  如果在 5 分钟内发生了两次提交，它将仅显示最后一次提交的差异。我想这就是 git show 所做的。我需要当前代码的所有更改，而不是上次提交的所有更改。
2.  它没有很好地格式化。它只是一个纯文本。

我很感激这里的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:45:13.357

`git diff --color @{yesterday}`（或者无论何时完成最后一次拉动/感兴趣的差异）对我来说效果很好......

# javascript - 根据 2 个下拉选择显示特定的文本输出

> ID：15644869
> 
> 赞同：0
> 
> 时间：2013-03-26T18:38:06.993
> 
> 标签：javascript, jquery, drop-down-menu

我想根据用户从两个下拉列表中的选择显示两个文本字符串。

所以有两个下拉选项： ![在此处输入图像描述](../Images/45c15c2506c66b7e429e89fe246af93c.png)

对于每个月选项，我希望有一个相应的值。因此，对于一月选项，该值将是“一月名称”。对于每个颜色选项，也有一个对应的值。所以对于绿色选项，值为“绿色名称”。

一旦用户选择了两个选项（月份和颜色），我希望输出显示一个包含两个值连接的文本。

例如，如果我选择一月和绿色，输出将是：

![在此处输入图像描述](../Images/d05b0a28ecab857ed840c5d321470adb.png)

如果我将月份更改为其他月份，名称将相应更新。

我整理了一些 html/css 代码作为开始[http://jsfiddle.net/baumdexterous/ys3GS/](http://jsfiddle.net/baumdexterous/ys3GS/)。如果有人能阐明我如何使用 jquery 完成这项任务，我将不胜感激！另外-如何使文本输出淡入？太感谢了！！！

```
 <body> 

    <h2>Find your Animal Name</h2>

<p>Select your birth month and your favorite color and find your animal name.</p>

<form>
        <select id="month">
            <option value="">- birth month -</option>
            <option value="January">January</option>
            <option value="February">February</option>
            <option value="March">March</option>
            <option value="April">April</option>
            <option value="May">May</option>
            <option value="June">June</option>
            <option value="July">July</option>
            <option value="August">August</option>
            <option value="September">September</option>
            <option value="October">October</option>
            <option value="November">November</option>
            <option value="December">December</option>
        </select>  
        <label class="January" for="January">January Name</label>
        <label class="February" for="February">February Name</label>
        <label class="March" for="March">March Name</label>
        <label class="April" for="April">April Name</label>        
        <label class="May" for="May">May Name</label>
        <label class="June" for="June">June Name</label>        
        <label class="July" for="July">July Name</label>
        <label class="August" for="August">August Name</label>
        <label class="September" for="September">September Name</label>
        <label class="October" for="October">October Name</label>
        <label class="November" for="November">November Name</label>
        <label class="December" for="December">December Name</label>

        <select id="color">
            <option value="">- favorite color -</option>
            <option value="Green">Green</option>
            <option value="Blue">Blue</option>
            <option value="Red">Red</option>
        </select>  
        <label class="Green" for="Green">Green Name</label>
        <label class="Blue" for="Blue">Blue Name</label>
        <label class="Red" for="Red">Red Name</label>
    </form>

  <!--  <p class="output">YOUR ANIMAL NAME IS JANUARY NAME GREEN NAME</p> -->

</body> 
```

顺便说一句-我还想设置选择字段的样式...那么将这些写为列表项（li，ul）是否更有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:47:32.307

```
$("#month, #color").change(function () {
    var month = $("#month").val();
    var color = $("#color").val();
    var content = '';
    if (month && color) {
        var monthlabel = $("label[for="+month+"]").text();
        var colorlabel = $("label[for="+color+"]").text();
        content = 'Your animal name is ' + monthlabel + ' ' + colorlabel;
    }
    $("#output").text(content).fadeIn();
}); 
```

[小提琴](http://jsfiddle.net/barmar/ys3GS/2/)

# ios - 以编程方式关闭 VoiceProcessingIO AGC

> ID：15644871
> 
> 赞同：4
> 
> 时间：2013-03-26T18:38:12.960
> 
> 标签：ios, audio, core-audio

我正在使用 Apple 的 CoreAudio 框架来录制我的麦克风信号。自动增益控制似乎默认启用：[https ://developer.apple.com/library/mac/#documentation/AudioUnit/Reference/AudioUnitPropertiesReference/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/AudioUnit/Reference/AudioUnitPropertiesReference/Reference/reference.html)

```
kAUVoiceIOProperty_VoiceProcessingEnableAGC
Indicates whether automatic gain control is enabled (any nonzero value) or disabled (a value of 0). Automatic gain control is enabled by default.
Value is a read/write UInt32 valid on the global audio unit scope.
Available in OS X v10.7 and later.
Declared in AudioUnitProperties.h. 
```

如何以编程方式关闭 CoreAudio 中的 AGC？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:29:51.800

假设您使用的是名为 AUVoiceProcessor 音频单元`voiceProcessor`

```
UInt32 turnOff = 0;
AudioUnitSetProperty(voiceProcessor,
                     kAUVoiceIOProperty_VoiceProcessingEnableAGC,
                     kAudioUnitScope_Global,
                     0,
                     &turnOff,
                     sizeof(turnOff)); 
```

快速解释：这样做是将音频单元上的*属性*设置为 0，在这种情况下禁用 AGC。音频单元通常有两组可控值，称为*属性*和*参数*。您可以相应地使用`AudioUnitSetProperty()`/`AudioUnitGetProperty()`和`AudioUnitSetParameter()`/设置/获取这些值`AudioUnitGetParameter()`。

注意：您可能应该检查返回的`OSStatus`代码（如果没有错误`AudioUnitSetProperty()`，它将等于）。`noErr`

# c# - 通过 jquery ajax 将对象传递给 WebMethod

> ID：15644878
> 
> 赞同：2
> 
> 时间：2013-03-26T18:38:35.317
> 
> 标签：c#, asp.net, ajax, jquery, webmethod

我正在尝试将对象传递给定义的页面方法。我正在尝试将从三个文本框中收集的数据传递给它。

**页面方法**

```
 [System.Web.Services.WebMethod]
    public static string saveDataToServer(object csObj)
    {
        // Function Body.
    } 
```

**Javascript/jQuery**

```
 $("#osmSendMsg").click(function () {
            debugger;
            var cntDetails = {
                 cntName : $("#osmContactName").val(),
                 cntEmail : $("#osmContactEmail").val(),
                 cntMsg : $("#osmContactMessage").val()
            }
            PostDataToServer(cntDetails,"Please wait...","/ContactUs.aspx/saveDataToServer","csObj");
        }); 
```

**PostDataToServer**

```
// Post data to server (ajax call).
function PostDataToServer(dataToSend, strMessagetoShow, strMethodToCall, jsonObjectName) {
    debugger;
    /*
    dataToSend          Contains the JSON Object.
    submitType          1 == Normal Submit; 2 == Submit and Print.
    strMessagetoShow    Text that is displayed in the Please Wait Window.
    */
    var tempurl = strMethodToCall;
    var tempdata;
    $.ajax({
        url: tempurl,
        type: "POST",
        async: false,
        dataType: "json",
        data: "{" + jsonObjectName + ":" + JSON.stringify(dataToSend) + "}",
        //timeout: 30000,
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            tempdata = data;
        },
        error: function (result) {            
            tempdata = null;
        }
    });  //end of the ajax call
    return tempdata;
} //End of the post Data 
```

现在调用到达 web 方法。没问题。我也得到了对象。但是如何处理对象？

![对象内的数据](../Images/9f380f8bda8b38ed3ade4962e562c101.png)

正如你所看到的，这就是我得到的。我还尝试声明一个类并将其作为参数传递..但它的所有属性都是空的。如果您注意到数据显示为键值对。我可以将其转换为字典，但我相信这是一个复杂的解决方案。

![键值对](../Images/02e33a058bae73a3defa5f61b13d2e93.png)

欢迎使用更简单的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:32:13.393

您的结果集合将在成功方法的“数据”参数中返回。您可以像 data[0].cntName 一样直接处理这个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T06:53:37.027

当您能够访问您的 webmethod 时，您需要修改您的 webmethod 以从对象中读取数据，如下所示：

```
 [System.Web.Services.WebMethod]
    public static string saveDataToServer(Dictionary<string, string> csObj)
     {
            try
            {
                 string Name = csObj["cntName"].ToString();
                 string Email = csObj["cntEmail"].ToString();
                 //you can read values like this and can do your operation
                 return "";//return your value
            }
            catch(Exception ex)
            {
                  throw new Exception(Ex.Message);
            }
     } 
```

# python - Python Pexpect: TypeError: %: 'int' 和 'dict' 不支持的操作数类型

> ID：15644881
> 
> 赞同：0
> 
> 时间：2013-03-26T18:38:45.913
> 
> 标签：python, string, pexpect

当我尝试运行以下 pexpect 命令时，出现错误： T `ypeError: unsupported operand type(s) for %: 'int' and 'dict'`。我真的不明白为什么我会收到这个错误。当我打印字符串时，我输出的结果是我所期望的。

**我的代码：**

```
p.sendline("sudo date -s \"%(easterndate)s\"") % locals() 
```

**打印相同字符串的测试：**

```
print "string ouput: " + "sudo date -s \"%(easterndate)s\"" % locals()
    output: sudo date -s "Tue Mar 26 14:25:51 EDT 2013" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:41:27.783

它应该是：

```
p.sendline("sudo date -s \"%(easterndate)s\"" % locals()) 
```

否则将`%`应用于`sendline`调用结果。

# c++ - 'SDL_main' : 必须返回一个值

> ID：15644883
> 
> 赞同：0
> 
> 时间：2013-03-26T18:38:46.220
> 
> 标签：c++, visual-studio, sdl

我正在尝试在 c++ usind SDL 中检索 websice 的内容，但它给了我这个错误：

> 'SDL_main' : 必须返回一个值

我的代码是：

```
#include <iostream>
#include "SDL.h"
#include "SDL_net.h"
#include <cstring>

int main(int argc,char** argv)
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDLNet_Init();

    IPaddress ip;
    SDLNet_ResolveHost(&ip,"www.linux.org",80);

    const char* http="GET / HTTP/1.1\nHost: www.linux.org\n\n";

    TCPsocket client=SDLNet_TCP_Open(&ip);

    SDLNet_TCP_Send(client,http,strlen(http)+1);

    char text[10000];

    while(SDLNet_TCP_Recv(client,text,10000))
        std::cout << text;

    SDLNet_TCP_Close(client);

    SDLNet_Quit();
    SDL_Quit();
} 
```

当我把 return 0; 最后，它构建了项目，但之后立即完成（我使用的是 vs2012）

**更新**

```
cout<<"Some message"; 
```

不打印任何东西，是否有可能我的导入配置错误？这些额外的依赖关系对吗？

> SDL.lib;SDL_net.lib;SDLmain.lib

我不知道还有什么问题...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:42:13.303

这是因为 SDL 定义了这样的宏：

```
#define main SDL_main 
```

所以你写的函数实际上是被调用的`SDL_main`，就像任何其他不是实际`main`函数的函数一样，如果它不返回`void`，你必须给它一个`return`声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:02:31.067

因为您的代码不会永远循环，它只会在第一次通过后返回 0，所以您需要进行如下循环：

```
while(1){
sdl_events event;    

switch(event){
//handle events, drawings and so on
...
...
...
case SDL_QUIT:
 exit (0);
 break;
}

} 
```

[http://sdl.beuc.net/sdl.wiki/OpenGL_Full_Example](http://sdl.beuc.net/sdl.wiki/OpenGL_Full_Example)

**更新**
您在连接到主机时可能还会遇到一些问题，因此您可以像这样检查连接是否成功：

```
#define MAXLEN 1024
int result;
char msg[MAXLEN];

result = SDLNet_TCP_Recv(sock,msg,MAXLEN-1);
if(result <= 0) {
    // TCP Connection is broken. (because of error or closure)
    SDLNet_TCP_Close(sock);
    exit(1);
}
else {
    msg[result] = 0;
    printf("Received: \"%s\"\n",msg);
} 
```

**更新2**
改变了这一点：

```
while(SDLNet_TCP_Recv(client,text,10000))
        std::cout << text; 
```

对此：

```
while(SDLNet_TCP_Recv(client,text,9999))
        std::cout << text; 
```

**更新 3**
试试这个，把你的接收部分放在这个 if 语句中

```
if(SDLNet_SocketReady(client) == 1)
{
  while(SDLNet_TCP_Recv(client,text,9999))
       std::cout << text;
} 
```

如果这仍然不起作用，我建议使用 QT 套接字或 Boost asio，既异步又更直观

# iis - IIS 7.5 强制 http 标头 CacheControl 为 Private

> ID：15644889
> 
> 赞同：0
> 
> 时间：2013-03-26T18:39:05.103
> 
> 标签：iis, http-headers, iis-7.5, cache-control, integrated-pipeline-mode

在我的 .NET 代码中，我有一个处理 Http 请求的自定义处理程序，并且在 ProcessRequest 方法中调用一个自定义 HttpModule 来设置 Http 缓存标头。

HttpModule 使用以下代码在 PreSendRequestHeaders 方法中设置标头

```
HttpCachePolicy cache = response.Cache;
if (cache != null)
{
  cache.SetCacheability(HttpCacheability.Public);
  cache.SetMaxAge(TimeSpan.FromSeconds(varnishDuration));
  response.AppendHeader("Edge-control", String.Concat("!no-store, max-age=", akamaiDuration, "s dca=noop"));
} 
```

在 IIS 7.5 中，池处于集成模式时，CacheControl 被强制为私有。这是我得到的：

```
curl -IXGET -H "Host:myHostName" "http://myServer/mypage"
HTTP/1.1 200 OK
Cache-Control: private
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
Edge-control: !no-store, max-age=300s dca=noop
[...] 
```

我不明白为什么 IIS 将 CacheControl 更改为私有。

这是我的 web.config 中的网络服务器部分：

```
<pre>
<system.webServer>
    <handlers accessPolicy="Read, Script">
      <add name="OxygenHandler" verb="*" path="*" type="com.eurosport.oxygen.server.modules.OxygenHandlerFactory, OxygenServerModules" />
    </handlers>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="WebServiceCachingModule" type="com.eurosport.toolkit.WebServiceCachingModule, Eurosport.Toolkit" />
    </modules>
  </system.webServer>
</pre> 
```

我尝试添加此处提到的[SetSlidingExpiration Cache.SetMaxAge 在 IIS 下无法正常工作，在 VS Dev Srv 下可以正常工作，](https://stackoverflow.com/questions/4626780/cache-setmaxage-not-working-under-iis-works-fine-under-vs-dev-srv/5276292#5276292)但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:07:58.837

我已经设法让它在我的模块中使用以下代码：

```
response.Headers.Remove("Cache-Control");
response.AppendHeader("Cache-Control", "public, max-age=" + varnishDuration.ToString()+", s-max-age=" + varnishDuration.ToString()); 
```

它看起来很脏，但似乎 response.CacheControl 和 response.Cache 属性没有被 IIS 在集成模式下使用（或者被某些模块覆盖......）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-04-12T07:08:36.817

默认值在 中指定[`System.Web.HttpResponse.CacheControl`](https://referencesource.microsoft.com/#System.Web/HttpResponse.cs,3174)：

```
 /// <devdoc>
        ///    <para>
        ///       Provided for ASP compatiblility. Use the <see cref='System.Web.HttpResponse.Cache'/>
        ///       property instead.
        ///    </para>
        /// </devdoc>
        public string CacheControl {
            get {
                if (_cacheControl == null) {
                    // the default
                    return "private";
                }

                return _cacheControl;
            } 
```

虽然您可以通过（全局）过滤器覆盖标头，但这不适用于由身份验证/授权引起的错误页面。~~幸运的是，每个请求都有一个很好的入口点，允许您覆盖这个默认值：~~

```
// In Global.asax.cs:
        protected void Application_BeginRequest()
        {
            Context.Response.CacheControl = "no-cache";
        } 
```

**更新：**根据上述设置缓存控制将禁用捆绑包的缓存。我现在正在使用以下解决方法。它仅在未显式设置时更改页面的可缓存性。'6' 的默认值来自[这里](https://referencesource.microsoft.com/#System.Web/HttpCachePolicy.cs,178967c007df05f6,references)：

```
// In Global.asax.cs:
        protected void Application_EndRequest()
        {
            if ((int)Response.Cache.GetCacheability() == ((int)HttpCacheability.ServerAndPrivate) + 1)
                Response.Cache.SetCacheability(HttpCacheability.NoCache);
        } 
```

此外，当出现错误并通过 呈现 YSOD（黄色错误页面）时[`ReportRuntimeError`](https://referencesource.microsoft.com/#System.Web/HttpResponse.cs,e2e577ee77deb33f,references)，框架将调用[`ClearHeaders`](https://referencesource.microsoft.com/#System.Web/HttpResponse.cs,1398)并且您的自定义缓存控制设置将被覆盖。我还没有找到解决方案。

# javascript - 如何以相反的方向旋转 [在同一画布上] 的两个图像？

> ID：15644891
> 
> 赞同：0
> 
> 时间：2013-03-26T18:39:10.567
> 
> 标签：javascript

我无法使用画布 state() 和 restore() 函数以相反的方向旋转两个图像。任何解决方案都非常感谢，谢谢！

这是我的代码：

```
program.ctxT.globalCompositeOperation = 'destination-over';
program.ctxT.save();

program.ctxT.clearRect(x - 1, 0 - 1, 72, 62);
program.ctxT.translate(x + 35, 0 + 25);
program.ctxT.rotate(Math.PI / 135);
program.ctxT.translate(-(x + 35), -(0 + 25));
program.ctxT.drawImage(program.imgBody, x, 0);
program.ctxT.restore();

program.ctxT.globalCompositeOperation = 'destination-over';
program.ctxT.save();

program.ctxT.translate(x + 35, 0 + 25);
program.ctxT.rotate(Math.PI / -135);
program.ctxT.translate(-(x + 35), -(0 + 25));
program.ctxT.drawImage(program.imgHead, x, 0);
program.ctxT.restore(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:10:53.503

很抱歉造成误解，我对实际在 Stack Exchange 上发帖还是很陌生。我的问题不是完全理解 save() 和 restore() 是如何工作的（当然），但这是我最好的解释；执行您希望稍后应用的转换/状态更改并保存（）那些，然后将自己与先前的状态更改分开并执行一组不同的状态更改以应用于您的下一个图像/形状，继续执行此操作直到您达到您想要独立转换的最后一个项目（作为注释，对于最后一个项目，您不必保存，只需绘制您想要的项目）。现在所有的转换都完成并保存了，你已经绘制了你的第一个项目，你使用 restore() 然后绘制你想要绘制的下一个项目，对你想要绘制的所有项目继续这个。需要注意的一件重要事情是 globalCompositeOperation 属性，请搜索它，因为它决定了图像的堆叠方式。希望这个解释是合理的，我很抱歉没有早点这样做。

```
function update() {
   //Merely clearing the canvas in the area our image was previously in.
   program.ctxT.clearRect(x - 35, 0 - 18, 108, 81);

   //Rotate canvas and save this state, this will be applied to the body or underlying element.
   rotCentre(35, 25, Math.PI / -135);
   program.ctxT.save();

   //This keeps track of the body rotation.
   rot++;

   //Applies the same rotation as earlier to move the head with the body.
   program(35, 25, Math.PI / -135);

   /* Although the head moves with the body, it should not changes its facing, so compensation. 
   The title says two images moving in opposite directions, but this only kind of does that, 
   if you do want them to be visually moving in opposite directions, just multiply the rot by
   a number greater than one.*/
   program(8, 8, rot * Math.PI / 135);

   //Draw the overlaying image (head).
   program.ctxT.drawImage(program.imgHead, x, 0);

   //Moving onto the lower layer, restore the transformations we are using for it and draw.
   program.ctxT.restore();
   program.ctxT.drawImage(program.imgBody, x - 35, -17.3);
}   

function rotCentre(centreX, centreY, angle) {
   //This allows the head to be overlayed.
   program.ctxT.globalCompositeOperation = 'destination-over';

   //First translate the context so that it will rotate around the image's centre.
   program.ctxT.translate(x + centreX, 0 + centreY);
   program.ctxT.rotate(angle);

   //Remember to put the context back to its original position!
   program.ctxT.translate(-(x + centreX), -(0 + centreY));
} 
```

# c# - 在 C# 中，如何使用集合中的键/值初始化对象

> ID：15644893
> 
> 赞同：-3
> 
> 时间：2013-03-26T18:39:12.577
> 
> 标签：c#

我懒得输入对象的所有属性，所以不要这样：

```
myObj.property1 = value1;
myObj.property2 = value2;
myObj.property3 = value3;
myObj.property4 = value4;
myObj.property5 = value5;
... 
```

有没有办法做到这一点？

```
Object myObj = new Object();
foreach (string curProperty in myCollection.AllKeys) {
    var curValue = collection[curProperty];
    myObj[curProperty] = curValue;   // ??????????????

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:42:18.333

是的，您需要使用`System.Reflection`来完成工作：

```
for (int i = 1; i < 6; i++)
{
    PropertyInfo prop = myObj.GetType().GetProperty(string.Format("property{0}", i);
    if (prop == null) { continue; }
    prop.SetValue(myObj, collection[prop.Name], null);
} 
```

在此示例中，我假设`collection`属性名称上有一个字符串索引器（您可能需要以不同的方式恢复它）。我还假设只有 5 个属性 ( `i < 6`)，您需要相应地进行设置。但你明白了。

* * *

本着 Jim Mischel 的评论精神，序列化也是一种选择。我不打算在这里举一个例子，因为我不是 100% 了解代码，但考虑 Web 服务。Web 服务通过（反）序列化完成所有工作。

因此，您可以在技术上将 XML 文件反序列化为对象，并且您将获得反序列化的所有好处——而且还有很多。我能想到的一个是在设置属性值之前***没有创建***对象的新实例——我不确定框架是如何做到的——但我知道它已经完成了，因为我追逐一次像这样的*错误*！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:53:25.157

使用 System.Reflection，代码如下所示：

```
Object myObj = new Object();
foreach (string curProperty in myCollection.AllKeys) {
    var property= typeof(Object).GetProperty(curProperty);
    property.SetValue(myObj, curValue, null);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:43:32.370

您可以通过反射来做到这一点，但请记住，这将比正确执行要慢得多。

它应该是这样的：

```
var prop = typeof(SomeType).GetProperty(propertyName);
prop.SetValue(myObj, newValue, null); 
```

这假定该属性存在并且可以访问。

[您可以使用表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)并将新创建的 lambdas 保存在内存中来显着提高性能，但编写起来有点复杂。

总的来说，我会说“不要这样做”，除非您只是将其用作学习如何使用反射的练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T18:50:16.987

I know it is not exactly what you are asking for and reflection solves the specific question you are asking; but the Expando object is great if you are lazy and you already have a key/value collection. This way you don't even need to declare a class at all!!!

[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)

# reporting-services - SSRS 中过滤器表达式的类型问题

> ID：15644894
> 
> 赞同：2
> 
> 时间：2013-03-26T18:39:13.570
> 
> 标签：reporting-services, filter, row-number

SQL Server 2008 R2，使用 BIDS 设计报表。

我有一张桌子，我试图只显示某一行。也许有更好的方法可以做到这一点，但是我遇到了过滤器表达式的错误，无论我如何完成我的初始任务，我都想了解过滤。

我从过滤器表达式开始（设置为“整数”）：

```
RowNumber(Nothing) = 1 
```

这给出了错误：

```
Cannot compare data of types System.String and System.Int32. 
```

我发现解决方案是将 1 更改为“=1”，因为 1 被评估为字符串。

所以我有：

```
RowNumber(Nothing) = =1 
```

这没有改变，我得到了同样的错误。

然后我尝试对表达式的第一部分执行此操作：

```
=RowNumber(Nothing) = =1 
```

这将错误更改为部署问题（仍在构建，令人沮丧）：

```
Error pvInvalidDefinition : The definition of the report '/ReportName' is invalid. 
```

然后我尝试在 RowNumber 上使用 CInt：CInt(RowNumber(Nothing) = =1

然后我可以部署它，但错误只是变回第一个：

```
Cannot compare data of types System.String and System.Int32. 
```

似乎无论我在这里尝试什么，我要么无法部署报告，要么收到错误，我正在将字符串与 int 进行比较。

RowNumber 返回一个整数，所以看起来应该可以。我尝试使用数据集的名称代替“Nothing”，但这并没有改变我所看到的。

我意识到有很多方法可以解决我最初的问题，但我很好奇为什么过滤器表达式无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:07:42.857

最好隐藏具有可见性属性的行。只需单击任何文本框并转到可见选项卡。您现在可以单击 show 或 hode 并转到表达式。

默认为 Hide 。所以在那里写一个表达式来隐藏该行。=IIf(NOT(RowNumber = 1),TRUE,FALSE)

如果您有任何错误，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:26:50.683

RowNumber 不可在 Tablix 筛选器中使用。

使用`RowNumber(Nothing) <> 1`作为 Row 可见性属性解决了这个问题。

使用 BIDS，您不会收到任何指示问题所在的错误，但是将报告导入到 Report Builder 并从那里部署它会给出一个更具描述性的错误，最终帮助我解决了我的问题。

# javascript - 从中继器行触发时，模式弹出不起作用

> ID：15644897
> 
> 赞同：0
> 
> 时间：2013-03-26T18:39:27.747
> 
> 标签：javascript, jquery, asp.net

我将以下代码添加到转发器...

```
<input type="image" style="border-width:0" alt="Edit Reviewer Group" 
                               title="Edit Reviewer Group" tabindex="0" 
                               src='<%=ResolveUrl("~/css/images/icon_edit.png") %>' 
                               onclick='showNewRevewerGroupModalPanelNew(<%#DataBinder.Eval(Container.DataItem,"Id")%>, 
                                                                         <%#HttpUtility.HtmlEncode((string)DataBinder.Eval(Container.DataItem, "Name"))%>);
                                                                          return false;' /> 
```

在上述添加之后...编辑按钮不再弹出弹出框...我将其隔离到“名称”列。在对 showNewRevewerGroupModalPanelNew 的调用中包含 Name 列后，当在转发器行中按下编辑图标时，模式弹出窗口停止触发....感谢您的帮助！

```
 function showNewRevewerGroupModalPanelNew(Id, Name) 
            {
                alert(Id);
                //$find('RevListModalPopupBehavior').show();
            }

        </script>

    <asp:Repeater ID="rptReviewerList" runat="server" OnItemCommand="_Command">
                        <HeaderTemplate>
                            <ul class="standardList">
                                <li class="listHeader">
                                    <p class="revListTitle">Name</p>
                                    <p class="number">Number of Reviewers</p>
                                    <p class="date">Last Modified</p>
                                    <p class="edit">&nbsp;</p>
                                </li>
                        </HeaderTemplate>
                        <ItemTemplate>
                            <li <%#Container.ItemIndex%2==0? "class='bg1'" : "" %>>
                            <p class="revListTitle"><%#HttpUtility.HtmlEncode((string)DataBinder.Eval(Container.DataItem,"Name"))%></p>
                            <p class="number"><%#DataBinder.Eval(Container.DataItem,"ReviewerCount")%></p>
                            <p class="date"><%#String.Format("{0:d}",DataBinder.Eval(Container.DataItem, "Modified"))%></p>
                            <p class="edit">
                            <asp:ImageButton ID="imgBtnUpdate" runat="server" ImageUrl="~/css/images/icon_update.png"  
                                             Tooltip="Update Reviewer List" AlternateText="Update Reviewer List"  
                                             CommandName="UpdateRevList" 
                                             CommandArgument='<%#DataBinder.Eval(Container.DataItem,"Id") %>'/>

                            <input type="image" style="border-width:0" alt="Edit Reviewer Group" 
                                   title="Edit Reviewer Group" tabindex="0" 
                                   src='<%=ResolveUrl("~/css/images/icon_edit.png") %>' 
                                   onclick='showNewRevewerGroupModalPanelNew(<%#DataBinder.Eval(Container.DataItem,"Id")%>, 
                                                                             <%#HttpUtility.HtmlEncode((string)DataBinder.Eval(Container.DataItem, "Name"))%>);
                                                                              return false;' />              

                            <asp:ImageButton ID="imgBtDelete" runat="server" ImageUrl="~/css/images/icon_remove.png" Tooltip="Remove Reviewer List" AlternateText="Remove Reviewer List" CommandName="DeleteRevList" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "Id")%>' />
                            <cc1:ConfirmButtonExtender ID="cbxDelete" runat="server" TargetControlID="imgBtDelete" ConfirmText='<%# makeDeleteText(DataBinder.Eval(Container.DataItem, "Name").ToString()) %>'/>
                            </p>
                            </li>
                        </ItemTemplate>
                        <FooterTemplate>
                        </ul>
                        </FooterTemplate>
    </asp:Repeater>
    </ContentTemplate>
    <Triggers>
    <asp:PostBackTrigger ControlID="ibtOK"/>
    <asp:PostBackTrigger ControlID="importBtn"/>
    <asp:PostBackTrigger ControlID="editBtn"/>
    </Triggers>
    </asp:UpdatePanel> 
```

这是 Firebug 告诉我的 ReferenceError：“ABCD”未定义。但 ABCD 是中继器行中“名称”的值。中继器中输入块的运行时间值为：

```
<input type="image" style="border-width:0" alt="Edit Reviewer Group" 
                               title="Edit Reviewer Group" tabindex="0" 
                               src='/css/images/icon_edit.png' 
                               onclick='showNewRevewerGroupModalPanelNew(4, 
                                                                         ABCD);
                                                                          return false;' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:02:28.577

鉴于您指出的错误，我会说您的 .Net 代码正在转储“名称”变量而没有任何类型的引号来表明它是一个字符串，因此 javascript 将它解释为一个变量名。

```
onclick='showNewRevewerGroupModalPanelNew(
    <%#DataBinder.Eval(Container.DataItem,"Id")%>,
    <%#HttpUtility.HtmlEncode((string)DataBinder.Eval(Container.DataItem, "Name"))%>);
    return false;' /> 
```

此代码可能正在评估为

```
onclick='ShowNewRevewerGroupModalPanelNew(someId, someName); return false;' 
```

您要做的是更改外部的引号并在内部添加单打：

```
onclick="showNewRevewerGroupModalPanelNew(
    <%#DataBinder.Eval(Container.DataItem,"Id")%>,
    '<%#HttpUtility.HtmlEncode((string)DataBinder.Eval(Container.DataItem, "Name"))%>');
    return false;" /> 
```

这应该会产生更接近于：

```
onclick="ShowNewRevewerGroupModalPanelNew(someId, 'someName'); return false;" 
```

当您尝试用双引号将这样的数据绑定括起来时，.Net 会抱怨。

# javascript - 语法错误 - 意外的keyword_ensure，需要')'

> ID：15644904
> 
> 赞同：0
> 
> 时间：2013-03-26T18:39:46.097
> 
> 标签：javascript, ruby-on-rails

我正在通过 Javascript 响应控制器操作。我想渲染一个部分。根据购物车是空的还是上面已经有物品，我有不同的选择器来附加部分。

一般标记如下：

```
<div id="expresscart">
  <ul id="expresslist">
    <li class="expressitem">..</li>
    <li class="expressitem">..</li>
  </ul>
</div> 
```

出于某种原因，在另一个“li.expressitem”之后附加 li 没有问题。

但是，当我想将第一个*li*插入*ul*时，我会收到以下错误：

> 语法错误，意外的keyword_ensure，需要')'

响应动作的 JS 如下：

```
$('.linktocart a').html('<%= escape_javascript link_to_cart %>');
<% if current_order.empty? %>
  $("#expresslist").append("<%= escape_javascript render :partial => 'spree/line_items/express', :locals => {:line_item => @line_item} %>");
<% else %>
  $(".expressitem:last").after("<%= escape_javascript render :partial => 'spree/line_items/express', :locals => {:line_item => @line_item} %>");
<% end %> 
```

要渲染的 Partial 如下：

```
%li.expressitem{"data-expresslineid" => line_item.id}
  %div.expressimage
    - if line_item.variant.images.any?
      %figure
        = image_tag line_item.variant.images.last.attachment.url(:sideline)
  .expressdescription
    %h1
      = line_item.variant.product.name
      %span.expressprice
        = line_item.money
    %p.expressitemdesc.clearfix
      = line_item.item_options
    - if line_item.subscription_line
      %p.expressautoship
        = t(:autoship_every, :month => pluralize(line_item.subscription.interval, 'month'))

  %div.expressitemoptions
    %ul.inline
      %li.expressremove
        = link_to(t(:remove), '#') 
```

我只是想知道，我在这里错过了什么？

# java - 连接管理器准备语句语法

> ID：15644905
> 
> 赞同：0
> 
> 时间：2013-03-26T18:39:48.230
> 
> 标签：java, oracle

当我在 SQL 开发人员中运行该语句时，它运行良好，但是，当我尝试像这样通过连接管理器运行它时，我不断收到“找不到表或视图”。我想知道这是否是因为连接管理器可能有不同的语法规则或什么？有没有人知道问题可能是什么？谢谢。

```
ps = con.prepareStatement("select receipts.ordernumber, receipts.part, receipts.location, receipts.site, 
                           receipts.orderqty,  receipts.supplier, receipts.mfr, receipts.mfrpart, 
                           receipts.ponumber, orders.poline, orders.porelease, orders.price, 
                           orders.uom, orders.currency_r, orders.datecreated, orders.datelate, 
                           orders.approval_time, orders.userid, orders.buyer, orders.note_r, 
                           orders.qtyopen, orders.orderstate, supplier.accountnumber, 
                           delivery.method, 
                           CASE WHEN delivery.method = 'EDI' and delivery.process = 'ORDER' THEN 'YES' ELSE 'NO' END AS EDI, 
                           receipts.userid " +
"from receipts, orders, supplier, delivery " + 
"where receipts.customerix=43 and 
       orders.wip_order = 1 and supplier.suppliercode = orders.supplier and 
       supplier.customerix = orders.customerix and 
       delivery.supplierix = supplier.supplierix and 
       receipts.consigned = '1' and 
       orders.custordernumber(+) = receipts.ordernumber AND 
       orders.CUSTOMERIX(+) = receipts.CUSTOMERIX and 
       receipts.exported=0 and 
       receipts.export_active=1 
       order by receipts.ordernumber");

            statement = update.prepareStatement(" update receipts set export_active = 1 where receiptix in " +
                "(SELECT receipts.receiptix FROM pours.receipts, pours.orders, pours.supplier " +
                "WHERE receipts.customerix =7021 AND orders.wip_order = 1 AND supplier.suppliercode = orders.supplier " +
                "AND supplier.customerix = orders.customerix " +
                "AND receipts.consigned = '1' AND orders.custordernumber(+) = receipts.ordernumber " +
                "AND orders.CUSTOMERIX(+) = receipts.CUSTOMERIX AND receipts.exported = 0)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:47:56.810

看看这里： [http ://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

此外，尝试进行更简单的查询以查看是否可以访问表中的数据；

问候！/托马斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:00:51.607

`I Think you went wrong with the DBName, for the connection..`为连接提供正确的数据库后检查

当您的数据库没有此表时，您只会收到此错误

```
DB_DRIVER = "oracle.jdbc.driver.OracleDriver";
DB_CONNECTION = "jdbc:oracle:thin:@localhost:1521:DBName";
DB_USER = "user";
DB_PASSWORD = "password"; 
```

# angularjs - 在角度 e2e 测试中获取浏览器路径会导致异常

> ID：15644908
> 
> 赞同：7
> 
> 时间：2013-03-26T18:39:51.970
> 
> 标签：angularjs

我有一个简单的 e2e 测试来验证路由重定向是否有效

### 亚军.html

```
<!doctype html>
<html lang="en">
  <head>
    <title>End2end Test Runner</title>
    <script src="../client/components/angular-scenario/angular-scenario.js" ng-autotest></script>
    <script src="e2e/scenarios.js"></script>
  </head>
  <body>
  </body>
</html> 
```

### 场景.js

```
'use strict';

describe('e2e', function() {

  beforeEach(function() {
    browser().navigateTo('../../client/index.html');
  });

  it('should redirect to the main application home page with / is accessed', function() {
    browser().navigateTo('#!/');
    expect(browser().location().path()).toBe('/app');
  });
}); 
```

### 业力.conf.js

```
*snip*
files = [
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
 './test/e2e/**/*.js',
];
*snip* 
```

当它运行时， browser().location().path() 将引发异常：

```
TypeError: 'undefined' is not a function (evaluating '$document.injector()') 
```

我已经确定是最后的 .path() 导致了问题，因为如果我这样做 browser().location() 不会引发异常。

但是，在浏览器控制台中，这将按预期返回 angular.scenario.Future。

为什么会引发异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T02:38:19.907

在我看来，这是 AngularJS E2E 测试不起作用的主要原因

1.  AngularJS E2E 测试需要您在应用程序的 HTML 中定义 ng-app。如果您手动引导它，您需要自己添加它 - [Google Groups Discussion](https://groups.google.com/forum/#!msg/angular/yslVnZh9Yjk/MLi3VGXZLeMJ)
2.  确保您的代理已正确定义，并确保您可以直接导航到它。在 browser.navigateTo() 之后的测试中添加 pause() 并确保应用程序实际加载到浏览器的 AngularJS Scenario Runner 中。
3.  调试的最后一步，在获得浏览器位置之前添加 2 到 3 秒的睡眠。可能是 angularJS 注入器无法与您的 AngularJS 应用程序正确通信，这导致它无法等待所需的时间。

希望其中一个对您有用！

# web-audio-api - 停止 Web Audio API 中的所有声音

> ID：15644922
> 
> 赞同：3
> 
> 时间：2013-03-26T18:40:32.967
> 
> 标签：web-audio-api

我同时使用网络音频 api 加载并播放了多个声音。有什么办法可以停止所有声音？

例如：现在停止所有声音的按钮。

由于我同时播放了 10 多个声音，我不想为每个声源手动使用 noteOff(0) （或 stop(0) ）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T23:42:37.953

然后，实现所需效果的最简单方法是将它们全部连接（）到一个增益节点，然后连接到目标，并设置 gain.gain.value = 0。

当然，它实际上不会阻止他们，但会让他们沉默。

# ruby-on-rails - Rails 4：获取生产环境中 Sprockets 生成的图像完整 url（在 rake 任务中）

> ID：15644930
> 
> 赞同：3
> 
> 时间：2013-03-26T18:41:04.647
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, ruby-on-rails-4

试图在邮件程序呈现的视图中获取图像的完整 URL。

Rails 3+ 中是否有适当的方法来获取 Sprockets 生成的完整 url？

我知道请求对象 hack，但由于邮件程序是**在 rake 任务**中调用的，因此请求数据显然不可用。

我正在运行 Rails 4 beta1（边缘）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:43:04.947

在 Rails 4 中，您需要在 production.rb 中包含以下内容

```
config.action_controller.asset_host = 'yourdomain.com'
config.action_mailer.asset_host = 'http://yourdomain.com' 
```

有一个协议（http）和一个没有协议是故意的。也许在 Rails 4 推出 beta 版之前会有所不同，但如果你在 action_controller.asset_host 中有协议，那么你会得到类似的 url `http://http://yourdomain.com`，如果你在 action_mailer.asset_host 中没有协议，则它不会被识别为有效的 URL因为它没有针对内部 Rails 正则表达式进行正确验证。

然后，您可以在邮件模板中使用以下内容：

```
<%= image_url('mail/awesome.gif', only_path: false) %> 
```

# android - 获得致命异常

> ID：15644935
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:41:29.057
> 
> 标签：android, android-camera

嗨，单击按钮时，我的应用程序崩溃并显示以下错误消息::

```
 W/dalvikvm(15165): threadid=1: thread exiting with uncaught exception (group=0x40018578)
 E/AndroidRuntime(15165): FATAL EXCEPTION: main
 E/AndroidRuntime(15165): java.lang.NullPointerException
 E/AndroidRuntime(15165):   at android.app.WallpaperManager.setBitmap(WallpaperManager.java:501)
 E/AndroidRuntime(15165):   at android.app.ContextImpl.setWallpaper(ContextImpl.java:616)
 E/AndroidRuntime(15165):   at android.content.ContextWrapper.setWallpaper(ContextWrapper.java:243)
 E/AndroidRuntime(15165):   at com.thenewboston.travis.Camera.onClick(Camera.java:47)
 E/AndroidRuntime(15165):   at android.view.View.performClick(View.java:2485)
 E/AndroidRuntime(15165):   at android.view.View$PerformClick.run(View.java:9080)
 E/AndroidRuntime(15165):   at android.os.Handler.handleCallback(Handler.java:587)
 E/AndroidRuntime(15165):   at android.os.Handler.dispatchMessage(Handler.java:92)
 E/AndroidRuntime(15165):   at android.os.Looper.loop(Looper.java:130)
 E/AndroidRuntime(15165):   at android.app.ActivityThread.main(ActivityThread.java:3687)
 E/AndroidRuntime(15165):   at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(15165):   at java.lang.reflect.Method.invoke(Method.java:507)
 E/AndroidRuntime(15165):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
 E/AndroidRuntime(15165):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
 E/AndroidRuntime(15165):   at dalvik.system.NativeStart.main(Native Method) 
```

和**Camera.java** 包com.thenewboston.travis；

```
import java.io.IOException;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;

public class Camera extends Activity implements View.OnClickListener{

    ImageButton ib;
    ImageView iv;
    Button b;
    Intent i;
    Bitmap bmp;
    final static int cameraData = 0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photo);
        initialize();
    }
    private void initialize() {
        // TODO Auto-generated method stub

        ib = (ImageButton)findViewById(R.id.imageButton1);
        iv = (ImageView)findViewById(R.id.imageButton1);
        b = (Button)findViewById(R.id.button1);

        b.setOnClickListener(this);
        ib.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId())
        {
        case R.id.imageButton1 :
            try {
                getApplicationContext().setWallpaper(bmp);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            break;
        case R.id.button1:
            i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i,cameraData);
            break;

        }
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == RESULT_OK){
            Bundle ext = data.getExtras();
            bmp = (Bitmap)ext.get("data");
            iv.setImageBitmap(bmp);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:49:36.870

The LogCat shows that `bmp` is null in:

```
getApplicationContext().setWallpaper(bmp); 
```

It looks like you clicked `ib` before `b`. The only place that you instantiate `bmp` is in `onActivityResult()` and only then if the user selected an image. You can change the `ib` Button's visibility in `onActivityResult()` to only be shown when there is a valid Bitmap to use.

Also please read [Pragnani's answer](https://stackoverflow.com/a/15644961/1267661) he has a great observation, though it might not cause this exception since ImageButton is a subclass of ImageView.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:42:54.373

> 您正在尝试获取具有相同 ID 的 ImageView 和 ImageButton

IE

```
 ib = (ImageButton)findViewById(R.id.imageButton1);
 iv = (ImageView)findViewById(R.id.imageButton1); 
```

两者具有相同的ID`R.id.imageButton1`

所以你会得到你的imageview NULL，这会导致NullPoinerException。

尝试更改imageview的ID

# c++ - “Instantiation of ... required from here”是什么意思？

> ID：15644938
> 
> 赞同：17
> 
> 时间：2013-03-26T18:41:32.633
> 
> 标签：c++, templates

我收到以下编译器¹消息

```
main.cpp: In instantiation of ‘void fkt(Foo) [with Foo = int]’:
main.cpp:5:7:   required from here 
```

无论如何都会创建二进制文件，因此这不是错误。但它也没有被标记为警告。这是什么消息，为什么我会收到它？

我将代码简化为以下示例

```
template <typename Foo>
void fkt(Foo f) {}

int main() {
  fkt(1);
  return 0;
} 
```

¹ [gcc 4.7.2]

*编辑：*这里重现的步骤：

```
% cat main.cpp
template <typename Foo>
void fkt(Foo f) {}

int main() {
  fkt(1);
  return 0;
}
% g++ -Wall  -Wextra main.cpp
main.cpp: In instantiation of ‘void fkt(Foo) [with Foo = int]’:
main.cpp:5:7:   required from here
main.cpp:2:6: warning: unused parameter ‘f’ [-Wunused-parameter] 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T18:50:06.393

```
main.cpp: In instantiation of ‘void fkt(Foo) [with Foo = int]’:
main.cpp:5:7:   required from here
main.cpp:2:6: warning: unused parameter ‘f’ [-Wunused-parameter] 
```

This is all one warning. You are getting a 3 line warning about an unused parameter. The first two lines are the compiler attempting to help you identify the cause of the warning. Here's an English translation:

> In the instantiation of `fkt` with template argument `Foo` as `int` which was required by line 5 column 7, you have an unused parameter called `f`.

`fkt` is a function template. Templates have to be instantiated with the given template arguments. For example, if you use `fkt<int>`, the `fkt` function template is instantiated with `Foo` as `int`. If you use `fkt<float>`, the `fkt` function template is instantiated with `Foo` as `float`.

In particular, this first line of this message is telling you that the warning occurs inside `fkt` which was instantiated with `Foo` as `int`. The second line of the warning tells you that instantiation occurred on line 5\. That corresponds to this line:

```
fkt(1); 
```

This is instantiating `fkt` with `Foo` as `int` because the template argument `Foo` is being deduced from the type of the argument you're giving. Since you're passing `1`, `Foo` is deduced to be `int`.

# iphone - iOS - 选择图像区域的最佳方式

> ID：15644940
> 
> 赞同：0
> 
> 时间：2013-03-26T18:41:44.877
> 
> 标签：iphone, ios, image

我正在寻找选择图像区域的最佳方法。事实上，我想加载一些 jpg，并让用户缩放或移动它并获取图像中心预绘制正方形的图像上的坐标。最好的方法是什么？有没有人知道的 github 库？提前谢谢再见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:48:47.260

最好的方法是使用`UIImagePickerController`类。

你这样调用它：

```
-(void) choosePhotoFromLibrary{

    UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    // Shows the controls for moving & scaling pictures 
    // To instead hide the controls, use NO.
    cameraUI.allowsEditing = YES;
    cameraUI.delegate = self;

    [self presentViewController:cameraUI animated:YES completion:nil];

} 
```

然后以这种方式获取编辑后的图像：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    UIImage * original = info[@"UIImagePickerControllerEditedImage"];
    //Do whatever you want with the image

    [self dismissViewControllerAnimated:YES completion:nil];

} 
```

# android - 我的通知消息没有显示在通知栏中，只有标题？

> ID：15644943
> 
> 赞同：0
> 
> 时间：2013-03-26T18:41:49.943
> 
> 标签：android

我尝试在通知消息中显示数据库内容（只有两个单词），但只显示标题，为什么？第二个问题：我使用 AlarmManager 每 1 分钟触发一次 intentservice 类（包含此代码的类），但如果 data ==null 它会在我的情况下通知我，这一定不会发生

```
 ShowTimeDB RetrieverDB =new ShowTimeDB(this);
    RetrieverDB.open();
    String data = RetrieverDB.getShowNotify();
    RetrieverDB.close();

    if (data!=null){

        nm=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

        Intent intent=new Intent(this,TodayShow.class);
        PendingIntent pi= PendingIntent.getActivity(this, 0, intent, 0);
        CharSequence x=(CharSequence) data;
        Notification n=new Notification(R.drawable.ic_launcher,"YOU HAVE SHOw" ,System.currentTimeMillis());
        n.setLatestEventInfo(this, "ShowTime", x, pi);
        n.defaults=Notification.DEFAULT_ALL;

        nm.notify(uniqueID,n); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:53:41.250

尝试使用 Notification.Builder 而不是 Notification。使用 new Notification() 构建通知对象已被弃用，取而代之的是使用 Notification.Builder 类。还有一个 NotificationCompat.Builder 用于兼容回溯到 1.6 的版本。

我不确定你的第二个问题是什么意思。

# iphone - annotationView中的不同callOut

> ID：15644945
> 
> 赞同：0
> 
> 时间：2013-03-26T18:41:58.890
> 
> 标签：iphone, xcode, map, annotations

我正在使用 Map iOS6，我遇到了一些麻烦：如下图，当前位置和 placeMark 的注释也有 callOut 按钮，但我需要按钮执行不同的任务，我该怎么做？这意味着在当前位置，我需要此任务的 callOut 按钮，而在 placeMark 中，callout 按钮执行另一项任务。
请访问此页面查看图片
[http://upanh.com/listing/?s=c3f4954854a30fe50e3e15f9ae064ba2](http://upanh.com/listing/?s=c3f4954854a30fe50e3e15f9ae064ba2)
我没有足够的声誉在此处发布图片。
我试过这段代码：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view
calloutAccessoryControlTapped:(UIControl *)control
{
    if ([(UIButton*)control buttonType] == UIButtonTypeDetailDisclosure)
    {
       ...
       locationSheet.cancelButtonIndex = locationSheet.numberOfButtons - 1;
    }else if ([(UIButton*)control buttonType] == UIButtonTypeInfoLight)
    {
       ...
       locationSheet.cancelButtonIndex = locationSheet.numberOfButtons - 1;
    }
} 
```

和

```
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex {
    // 1
    if (buttonIndex != actionSheet.cancelButtonIndex)
    {
        if (buttonIndex == 0)
        {
        }
    }
} 
```

如何在 actionSheet 中的两个按钮之间执行不同的任务？很难解释我的情况，希望大家理解我上面的表现，感谢您的帮助。感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:59:55.740

我无法获取您的图像 - 但如果您有实际按钮 (UIButton) 而不是 MKAnnotations，那么为什么不为您的按钮指定一个标签（当然，每个标签都有不同的标签），将它们指向相同的功能，然后根据标签区分？所以（这不仅可以用于任何按钮`UIButtonTypeCustom`，而且`UIView`实际上可以用于任何按钮 - 它们都支持`tag`）：

```
 UIButton *firstButton = [UIButton buttonWithType:UIButtonTypeCustom];
 UIButton *secondButton = [UIButton buttonWithType:UIButtonTypeCustom];

 firstButton.tag = 100;
 secondButton.tag = 200;

 [firstButton addTarget:self selector:@selector(doSomething:)];
 [secondButton addTarget:self selector:@selector(doSomething:)];

 - (void)doSomething:(id)sender {
 UIButton *pressedButton = (UIButton*)sender;

 if (pressedButton.tag == 100) {
 //First button
 }
 else if (pressedButton.tag == 200) {
 //Second button
 } 
```

# java - Java Rijndael解密方法的VB.Net等价物

> ID：15644948
> 
> 赞同：0
> 
> 时间：2013-03-26T18:42:06.267
> 
> 标签：java, vb.net, rijndael

我有一个可用的 java 解密函数，如下所示。RijndaelAlgorithm 的 Java 源代码是您在互联网上看到的标准代码 - 例如：

[http://www.opensymphony.com/oscore/api/com/opensymphony/module/random/Rijndael_Algorithm.html](http://www.opensymphony.com/oscore/api/com/opensymphony/module/random/Rijndael_Algorithm.html)

我正在尝试使用 VB.Net 重现此功能。我知道 .Net 支持 Rijndael，但我还没有找到与下面的 java 代码产生相同解密密码的组合。看起来像这样一个简单的任务，但我已经花了几天时间研究这个。

谁能告诉我或指导我在 VB.Net 中生成与 java 函数等效的函数的示例代码？

这是我的论点：

```
t = f8d44...cf22f8a     32 total characters 
keyArray = [113,64,51,102,120...98,98,108,115]  32 total bytes
keySize = 32
blockSize = 16 
```

这是我的工作java函数：

```
public static String decrypt(String t, byte[] keyArray, int keySize, int blockSize)  
{
        StringBuffer plain = new StringBuffer(t.length());
        byte[] textBytes = RijndaelAlgorithm.getBytes(t);
        int cipherLen = textBytes.length;

        Object key = RijndaelAlgorithm.makeKey(setKeyLength(keyArray, keySize), keySize);

        for (int offset = 0; offset < cipherLen; offset += blockSize)
        {
              byte[] plainBytes = RijndaelAlgorithm.blockDecrypt(textBytes, offset, key, blockSize);

              plain.append(new String(plainBytes));
        }
        return plain.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:48:41.950

您可能会从这里的源代码中得到一些提示： [http ://www.tamirgal.com/blog/page/SharpSSH.aspx](http://www.tamirgal.com/blog/page/SharpSSH.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:56:09.840

我在 VB.NET 中使用了这两个函数，希望对你有帮助

这就是我使用这些功能的方式

```
_ConnectionString = RijndaelSimple.Decrypt(_ConnectionString, RijndaelPhrase, CurrentSession.ApplicationSession.Application.ApplicationGuid.ToString.ToLower, "SHA1", 2, RijndaelVector, 128)

Imports System.Text.RegularExpressions
Imports System.Data.SqlClient
Imports System.Security.Cryptography
Imports System.Text
Imports System.IO

' <summary>
' This class uses a symmetric key algorithm (Rijndael/AES) to encrypt and 
' decrypt data. As long as encryption and decryption routines use the same 
' parameters to generate the keys, the keys are guaranteed to be the same.
' The class uses static functions with duplicate code to make it easier to 
' demonstrate encryption and decryption logic. In a real-life application, 
' this may not be the most efficient way of handling encryption, so - as 
' soon as you feel comfortable with it - you may want to redesign this class.
' </summary>

Public Class RijndaelSimple

' <summary>
' Encrypts specified plaintext using Rijndael symmetric key algorithm
' and returns a base64-encoded result.
' </summary>
' <param name="plainText">
' Plaintext value to be encrypted.
' </param>
' <param name="passPhrase">
' Passphrase from which a pseudo-random password will be derived. The 
' derived password will be used to generate the encryption key. 
' Passphrase can be any string. In this example we assume that this 
' passphrase is an ASCII string.
' </param>
' <param name="saltValue">
' Salt value used along with passphrase to generate password. Salt can 
' be any string. In this example we assume that salt is an ASCII string.
' </param>
' <param name="hashAlgorithm">
' Hash algorithm used to generate password. Allowed values are: "MD5" and
' "SHA1". SHA1 hashes are a bit slower, but more secure than MD5 hashes.
' </param>
' <param name="passwordIterations">
' Number of iterations used to generate password. One or two iterations
' should be enough.
' </param>
' <param name="initVector">
' Initialization vector (or IV). This value is required to encrypt the 
' first block of plaintext data. For RijndaelManaged class IV must be 
' exactly 16 ASCII characters long.
' </param>
' <param name="keySize">
' Size of encryption key in bits. Allowed values are: 128, 192, and 256\. 
' Longer keys are more secure than shorter keys.
' </param>
' <returns>
' Encrypted value formatted as a base64-encoded string.
' </returns>
Public Shared Function Encrypt(ByVal plainText As String, _
                               ByVal passPhrase As String, _
                               ByVal saltValue As String, _
                               ByVal hashAlgorithm As String, _
                               ByVal passwordIterations As Integer, _
                               ByVal initVector As String, _
                               ByVal keySize As Integer) _
                       As String

    ' Convert strings into byte arrays.
    ' Let us assume that strings only contain ASCII codes.
    ' If strings include Unicode characters, use Unicode, UTF7, or UTF8 
    ' encoding.
    Dim initVectorBytes As Byte()
    initVectorBytes = Encoding.ASCII.GetBytes(initVector)

    Dim saltValueBytes As Byte()
    saltValueBytes = Encoding.ASCII.GetBytes(saltValue)

    ' Convert our plaintext into a byte array.
    ' Let us assume that plaintext contains UTF8-encoded characters.
    Dim plainTextBytes As Byte()
    plainTextBytes = Encoding.UTF8.GetBytes(plainText)

    ' First, we must create a password, from which the key will be derived.
    ' This password will be generated from the specified passphrase and 
    ' salt value. The password will be created using the specified hash 
    ' algorithm. Password creation can be done in several iterations.
    Dim password As PasswordDeriveBytes
    password = New PasswordDeriveBytes(passPhrase, _
                                       saltValueBytes, _
                                       hashAlgorithm, _
                                       passwordIterations)

    ' Use the password to generate pseudo-random bytes for the encryption
    ' key. Specify the size of the key in bytes (instead of bits).
    Dim keyBytes As Byte()
    keyBytes = password.GetBytes(keySize / 8)

    'Dim keyBytes2 As Byte()
    'keyBytes2 = password.Rfc2898DeriveBytes

    ' Create uninitialized Rijndael encryption object.
    Dim symmetricKey As RijndaelManaged
    symmetricKey = New RijndaelManaged()

    ' It is reasonable to set encryption mode to Cipher Block Chaining
    ' (CBC). Use default options for other symmetric key parameters.
    symmetricKey.Mode = CipherMode.CBC

    ' Generate encryptor from the existing key bytes and initialization 
    ' vector. Key size will be defined based on the number of the key 
    ' bytes.
    Dim encryptor As ICryptoTransform
    encryptor = symmetricKey.CreateEncryptor(keyBytes, initVectorBytes)

    ' Define memory stream which will be used to hold encrypted data.
    Dim memoryStream As MemoryStream
    memoryStream = New MemoryStream()

    ' Define cryptographic stream (always use Write mode for encryption).
    Dim cryptoStream As CryptoStream
    cryptoStream = New CryptoStream(memoryStream, _
                                    encryptor, _
                                    CryptoStreamMode.Write)
    ' Start encrypting.
    cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length)

    ' Finish encrypting.
    cryptoStream.FlushFinalBlock()

    ' Convert our encrypted data from a memory stream into a byte array.
    Dim cipherTextBytes As Byte()
    cipherTextBytes = memoryStream.ToArray()

    ' Close both streams.
    memoryStream.Close()
    cryptoStream.Close()

    ' Convert encrypted data into a base64-encoded string.
    Dim cipherText As String
    cipherText = Convert.ToBase64String(cipherTextBytes)

    ' Return encrypted string.
    Encrypt = cipherText
End Function

' <summary>
' Decrypts specified ciphertext using Rijndael symmetric key algorithm.
' </summary>
' <param name="cipherText">
' Base64-formatted ciphertext value.
' </param>
' <param name="passPhrase">
' Passphrase from which a pseudo-random password will be derived. The 
' derived password will be used to generate the encryption key. 
' Passphrase can be any string. In this example we assume that this 
' passphrase is an ASCII string.
' </param>
' <param name="saltValue">
' Salt value used along with passphrase to generate password. Salt can 
' be any string. In this example we assume that salt is an ASCII string.
' </param>
' <param name="hashAlgorithm">
' Hash algorithm used to generate password. Allowed values are: "MD5" and
' "SHA1". SHA1 hashes are a bit slower, but more secure than MD5 hashes.
' </param>
' <param name="passwordIterations">
' Number of iterations used to generate password. One or two iterations
' should be enough.
' </param>
' <param name="initVector">
' Initialization vector (or IV). This value is required to encrypt the 
' first block of plaintext data. For RijndaelManaged class IV must be 
' exactly 16 ASCII characters long.
' </param>
' <param name="keySize">
' Size of encryption key in bits. Allowed values are: 128, 192, and 256\. 
' Longer keys are more secure than shorter keys.
' </param>
' <returns>
' Decrypted string value.
' </returns>
' <remarks>
' Most of the logic in this function is similar to the Encrypt 
' logic. In order for decryption to work, all parameters of this function
' - except cipherText value - must match the corresponding parameters of 
' the Encrypt function which was called to generate the 
' ciphertext.
' </remarks>
Public Shared Function Decrypt(ByVal cipherText As String, _
                               ByVal passPhrase As String, _
                               ByVal saltValue As String, _
                               ByVal hashAlgorithm As String, _
                               ByVal passwordIterations As Integer, _
                               ByVal initVector As String, _
                               ByVal keySize As Integer) _
                       As String

    ' Convert strings defining encryption key characteristics into byte
    ' arrays. Let us assume that strings only contain ASCII codes.
    ' If strings include Unicode characters, use Unicode, UTF7, or UTF8
    ' encoding.
    Dim initVectorBytes As Byte()
    initVectorBytes = Encoding.ASCII.GetBytes(initVector)

    Dim saltValueBytes As Byte()
    saltValueBytes = Encoding.ASCII.GetBytes(saltValue)

    ' Convert our ciphertext into a byte array.
    Dim cipherTextBytes As Byte()
    cipherTextBytes = Convert.FromBase64String(cipherText)

    ' First, we must create a password, from which the key will be 
    ' derived. This password will be generated from the specified 
    ' passphrase and salt value. The password will be created using
    ' the specified hash algorithm. Password creation can be done in
    ' several iterations.
    Dim password As PasswordDeriveBytes
    password = New PasswordDeriveBytes(passPhrase, _
                                       saltValueBytes, _
                                       hashAlgorithm, _
                                       passwordIterations)

    ' Use the password to generate pseudo-random bytes for the encryption
    ' key. Specify the size of the key in bytes (instead of bits).
    Dim keyBytes As Byte()
    keyBytes = password.GetBytes(keySize / 8)

    ' Create uninitialized Rijndael encryption object.
    Dim symmetricKey As RijndaelManaged
    symmetricKey = New RijndaelManaged()

    ' It is reasonable to set encryption mode to Cipher Block Chaining
    ' (CBC). Use default options for other symmetric key parameters.
    symmetricKey.Mode = CipherMode.CBC

    ' Generate decryptor from the existing key bytes and initialization 
    ' vector. Key size will be defined based on the number of the key 
    ' bytes.
    Dim decryptor As ICryptoTransform
    decryptor = symmetricKey.CreateDecryptor(keyBytes, initVectorBytes)

    ' Define memory stream which will be used to hold encrypted data.
    Dim memoryStream As MemoryStream
    memoryStream = New MemoryStream(cipherTextBytes)

    ' Define memory stream which will be used to hold encrypted data.
    Dim cryptoStream As CryptoStream
    cryptoStream = New CryptoStream(memoryStream, _
                                    decryptor, _
                                    CryptoStreamMode.Read)

    ' Since at this point we don't know what the size of decrypted data
    ' will be, allocate the buffer long enough to hold ciphertext;
    ' plaintext is never longer than ciphertext.
    Dim plainTextBytes As Byte()
    ReDim plainTextBytes(cipherTextBytes.Length)

    ' Start decrypting.
    Dim decryptedByteCount As Integer
    decryptedByteCount = cryptoStream.Read(plainTextBytes, _
                                           0, _
                                           plainTextBytes.Length)

    ' Close both streams.
    memoryStream.Close()
    cryptoStream.Close()

    ' Convert decrypted data into a string. 
    ' Let us assume that the original plaintext string was UTF8-encoded.
    Dim plainText As String
    plainText = Encoding.UTF8.GetString(plainTextBytes, _
                                        0, _
                                        decryptedByteCount)

    ' Return decrypted string.
    Decrypt = plainText
End Function 
```

结束类

# matlab - Matlab：如何合法地关闭程序？

> ID：15644949
> 
> 赞同：2
> 
> 时间：2013-03-26T18:42:11.410
> 
> 标签：matlab, function, handle

我有一个运行脚本，其中包含许多图形句柄，我在代码中到处更新。我的目标是，当我粗暴地关闭程序时（使用 X 按钮或 Ctrl C）正确关闭它。

我已经覆盖了默认的关闭功能，但是有时在按下它或按下 Ctrl+C 时我仍然会得到“无效的对象句柄”。

我在代码中有很多句柄，应该检查每个句柄还是有另一种正确关闭图形和代码的方法？（类似于“退出”但没有关闭 matlab IDE）。

谢了，兄弟们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:57:13.107

您可以检查 a 的有效性`handle`with `isvalid`。你应该遍历你的句柄，检查它们的有效性，如果有效则关闭它们；您可能还应该`try...catch`在其中插入一个以防万一。就像是：

```
function figure1_DeleteFcn(hObject, eventdata, handles)
    errList = [];
    for nHndl = 1:length(handles.myHandles)
        if isvalid(handles.myHandles(nHndl))
            try
                delete(handles.myHandles(nHndl));
            catch err
                errList = [errList err];
            end
        end
    end

    if length(errList) == 1
        error([mfilename ':ErrorClosingUI'], 'Error closing UI : %s', errList.message);
    elseif length(errList) > 1
        % Should probably do something smarter with the error messages here
        error([mfilename ':ErrorClosingUI'], 'Multiple errors occurred closing UI');
    end 
```

# c# - ASP下拉列表不改变值

> ID：15644952
> 
> 赞同：0
> 
> 时间：2013-03-26T18:42:15.247
> 
> 标签：c#, asp.net

首先，我仍然在我的 web 开发腿下。我梳理了成堆的 SO 帖子、博客、新闻组和文章，但似乎无法解决我的问题。它与我看过的至少 10 个不同的帖子非常相似。

我有一个 ASP gridview，它充当显示和选择列。当您单击选择时，它会将数据扔到详细信息视图中。我有一个字段需要是一个下拉框，但是每当我更改值并单击更新时，发送到命令的值就是原始值。

页面标记：

```
 <asp:TemplateField HeaderText="Planner Name">
                        <ItemTemplate>
                        </ItemTemplate>
                        <EditItemTemplate>
                        <asp:DropDownList ID="cboCurrentPlanner" runat="server" DataSourceID="plannerDataSource" 
                        DataTextField="planner_name" DataValueField="planner_id" SelectedValue='<%# Eval("planner_id") %>' AutoPostBack="true" ></asp:DropDownList>
                        </EditItemTemplate>
                    </asp:TemplateField>
                <asp:CommandField ShowEditButton="True" />
            </Fields>

            <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
            <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
        </asp:DetailsView> 
```

sql数据源：

```
 SelectCommand="SELECT vendor_key, vendor, planner_name, street, city, state_country, planner_id, country FROM V_MAP_MarkerInfo WHERE (vendor_key = @vendor_key)" 
            UpdateCommand="MAP_usp_webUpdatePlanToVendor" 
            UpdateCommandType="StoredProcedure" onupdating="mapDetailSource_Updating" >
            <SelectParameters>
                <asp:ControlParameter ControlID="GridView1" Name="vendor_key" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
            <UpdateParameters>
                <asp:Parameter Name="vendor_key" Type="String" />
                <asp:Parameter Name="planner_id" Type="Int32" />
                <asp:Parameter Name = "vendor" Type="String" />
            </UpdateParameters>
        </asp:SqlDataSource>

        <asp:SqlDataSource ID="plannerDataSource" runat="server" 
            ConnectionString="<%$ ConnectionStrings:vendor_mapConnectionString %>" 
            SelectCommand="SELECT [planner_id], [planner_name] FROM [MAP_planners]" 
            OldValuesParameterFormatString="original_{0}">
        </asp:SqlDataSource> 
```

我不会发布存储过程代码，我知道这是有效的。原始值是唯一使其成为参数的值。

我尝试了各种`<%# Bind/Eval() %>`回发组合，但找不到合适的组合。

当我单击选择时，我希望在下拉列表中选择当前计划器。当我选择一个新的规划器并单击更新时，我希望规划器更新。我不知道为什么这会如此困难，或者我搞砸了什么让它变得困难，但我已经束手无策了。如果可能的话，我想解释一下正在发生的事情，而不仅仅是让它工作的神奇代码行。

目瞪口呆是轻描淡写。

编辑：`ViewStateEnbabled="true"`添加到下拉列表中，`selectedIndexChanged`事件正在触发。

再次编辑：将 planner_id 更改为`<asp:ControlParameter>`添加监视器，`DetailsView1_OnDataBind`并且`MapDataSource1_updating`值无处不在。但我看不到它在哪里被重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:49:23.570

所以我是个白痴，`DetailsView DataKeyNames`属性设置不正确。我不小心添加了“planner_id”作为向导的键。

代码一直都很好。感谢大家的努力，但我是一个失败的事业！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:59:31.633

你有`EnableViewState="false"`设置`@Control`或`@Page`设置吗？如果未启用视图状态，则控件将始终将默认值作为选定值。这可以在 aspx 级别或 ascx 级别设置。

[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# forms - 如何在 Symfony2 的表单模板中自定义 form_label 块？

> ID：15644957
> 
> 赞同：6
> 
> 时间：2013-03-26T18:42:26.403
> 
> 标签：forms, symfony, label

我正在尝试在已经扩展了一个模板的模板中自定义 form_label。

我在[Symfony2 文档](http://symfony.com/doc/current/cookbook/form/form_customization.html#adding-a-required-asterisk-to-field-labels)中使用示例：

```
{% use 'form_div_layout.html.twig' with form_label as base_form_label %}

{% block form_label %}
    {{ block('base_form_label') }}

    {% if required %}
        <span class="required" title="This field is required">*</span>
    {% endif %}
{% endblock %} 
```

但没有任何改变！

你能帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-08T17:50:37.460

这是我的解决方案。

在我的 form.html.twig 文件顶部：

```
{% form_theme form with 'MyBundle:Activity:Form/fields.html.twig' %} 
```

现在进入fields.html.twig，我自定义了form_label：

```
{% extends 'form_div_layout.html.twig' %}

{% block form_label %}
{% spaceless %}
    {% if not compound %}
        {% set label_attr = label_attr|merge({'for': id}) %}
    {% endif %}
    {% if required %}
        {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
    {% endif %}
    {% if label is empty %}
        {% set label = name|humanize %}
    {% endif %}

    <label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>{{ label|trans({}, translation_domain) }}{% if attr.note is defined %} <span style="font: 11px normal; font-family: arial;">({{ attr.note }})</span>{% endif %}</label>
{% endspaceless %}
{% endblock form_label %} 
```

# javascript - 如何将 javascript 内联代码转换为 jQuery？

> ID：15644958
> 
> 赞同：1
> 
> 时间：2013-03-26T18:42:28.467
> 
> 标签：javascript, jquery

我有这个工作的 jQuery + 内联 javascript，这会导致与现有 jQuery 的冲突。

```
<script>
var jq=jQuery.noConflict(); 
function goto(id, t){   
    jq(".contentbox-wrapper").animate({"left": -(jq(id).position().left)}, 600);
    jq('#slide a').removeClass('active');
    jq(t).addClass('active');   
}
</script> 
```

```
<a class="active" href="#" onClick="goto('#kr', this); return false">
```

```
<a class="active" href="#" onClick="goto('#en', this); return false">
```

（如您所见，我试图解决冲突，但我相信冲突是由内联 javascript 引起的。）

如何转换此内联 javascript？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:44:01.840

你可以像这样绑定它：

```
<script>
//var jq=jQuery.noConflict();   
function goto1(id, t){   
    ...
    return false; // return false to prevent the link's default action
}

// means once your DOM is ready, and a.active is available to be bound
$(document).ready(function() { 

    // bind all clicks on a.active to the function 'goto1'
    $('a.active').click(goto1);
});
</script> 
```

像这样的变量名`goto`可能是以后混淆的潜在原因。上面改成`goto1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:48:45.837

内联 JS（嵌入 HTML）很难维护，我建议：

HTML：

```
<div id="parent"> <!-- or any other parent el. -->
    <a href="#">Anchor</a>
</div> 
```

jQuery：

```
(function($){ // remap $ to jQuery

  $(function(){ // DOM ready

    $('#parent').on('click', 'a', function( ev ){
       ev.preventDefault();
       var krPos = $('#kr').position().left;
       $(".contentbox-wrapper").animate({"left": -krPos }, 600);
       $('#slide a').removeClass('active');
       $(this).addClass('active'); 
    });

  });

})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:34:08.300

```
$('.active').on('click', function() {
var $this = $(this);        
var id = $this.attr('href');
$(".contentbox-wrapper").animate({"left": -($(id).position().left)}, 600);
$('#slide a').removeClass('active');
$this.addClass('active');
return false;
 }); 
```

黄教为我解答。 [https://stackoverflow.com/users/1058134/huangism](https://stackoverflow.com/users/1058134/huangism)

# python - Python 进度条和下载

> ID：15644964
> 
> 赞同：94
> 
> 时间：2013-03-26T18:43:06.907
> 
> 标签：python, download, progress-bar

我有一个 Python 脚本，它启动一个可下载文件的 URL。有没有办法让 Python 显示下载进度而不是启动浏览器？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-03-26T18:50:52.853

我刚刚为此编写了一个超级简单（有点hacky）的方法，用于从某个站点上抓取PDF。请注意，它只能在基于 Unix 的系统（Linux、mac os）上正常工作，因为 PowerShell 无法处理`"\r"`：

```
import sys
import requests

link = "http://indy/abcde1245"
file_name = "download.data"
with open(file_name, "wb") as f:
    print("Downloading %s" % file_name)
    response = requests.get(link, stream=True)
    total_length = response.headers.get('content-length')

    if total_length is None: # no content length header
        f.write(response.content)
    else:
        dl = 0
        total_length = int(total_length)
        for data in response.iter_content(chunk_size=4096):
            dl += len(data)
            f.write(data)
            done = int(50 * dl / total_length)
            sys.stdout.write("\r[%s%s]" % ('=' * done, ' ' * (50-done)) )    
            sys.stdout.flush() 
```

它使用[requests 库](https://requests.readthedocs.io/en/master/)，因此您需要安装它。这会在您的控制台中输出如下内容：

> >下载download.data
> 
> >[==============]

进度条在脚本中是 52 个字符宽（2`[]`个字符就是进度的 50 个字符）。每个`=`代表 2% 的下载量。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2014-01-06T05:19:15.107

您可以使用“ [clint](https://github.com/kennethreitz/clint) ”包（由与“requests”相同的作者编写）为您的下载添加一个简单的进度条，如下所示：

```
from clint.textui import progress

r = requests.get(url, stream=True)
path = '/some/path/for/file.txt'
with open(path, 'wb') as f:
    total_length = int(r.headers.get('content-length'))
    for chunk in progress.bar(r.iter_content(chunk_size=1024), expected_size=(total_length/1024) + 1): 
        if chunk:
            f.write(chunk)
            f.flush() 
```

这将为您提供如下所示的动态输出：

```
[################################] 5210/5210 - 00:00:01 
```

它也应该适用于多个平台！您[还可以](https://github.com/kennethreitz/clint/blob/master/examples/progressbar.py)使用 .dots 和 .mill 而不是 .bar 将条形图更改为点或微调器。

享受！

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2018-12-20T23:44:13.303

**带有 TQDM 的 Python 3**

这是[TQDM 文档](https://github.com/tqdm/tqdm#hooks-and-callbacks)中建议的技术。

```
import urllib.request

from tqdm import tqdm

class DownloadProgressBar(tqdm):
    def update_to(self, b=1, bsize=1, tsize=None):
        if tsize is not None:
            self.total = tsize
        self.update(b * bsize - self.n)

def download_url(url, output_path):
    with DownloadProgressBar(unit='B', unit_scale=True,
                             miniters=1, desc=url.split('/')[-1]) as t:
        urllib.request.urlretrieve(url, filename=output_path, reporthook=t.update_to) 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2020-05-31T08:06:48.107

[requests](https://pypi.org/project/requests/)和[tq​​dm](https://pypi.org/project/tqdm/)有一个答案。

```
import requests
from tqdm import tqdm

def download(url: str, fname: str):
    resp = requests.get(url, stream=True)
    total = int(resp.headers.get('content-length', 0))
    with open(fname, 'wb') as file, tqdm(
        desc=fname,
        total=total,
        unit='iB',
        unit_scale=True,
        unit_divisor=1024,
    ) as bar:
        for data in resp.iter_content(chunk_size=1024):
            size = file.write(data)
            bar.update(size) 
```

要点：[https ://gist.github.com/yanqd0/c13ed29e29432e3cf3e7c38467f42f51](https://gist.github.com/yanqd0/c13ed29e29432e3cf3e7c38467f42f51)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-06-23T14:50:18.437

您也可以使用[click](http://click.pocoo.org/5/utils/#showing-progress-bars)。它有一个很好的进度条库：

```
import click

with click.progressbar(length=total_size, label='Downloading files') as bar:
    for file in files:
        download(file)
        bar.update(file.size) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-05-03T14:05:08.227

抱歉回复晚了；刚刚更新了`tqdm`文档：

[https://github.com/tqdm/tqdm/#hooks-and-callbacks](https://github.com/tqdm/tqdm/#hooks-and-callbacks)

使用`urllib.urlretrieve`和 OOP：

```
import urllib
from tqdm.auto import tqdm

class TqdmUpTo(tqdm):
    """Provides `update_to(n)` which uses `tqdm.update(delta_n)`."""
    def update_to(self, b=1, bsize=1, tsize=None):
        """
        b  : Blocks transferred so far
        bsize  : Size of each block
        tsize  : Total size
        """
        if tsize is not None:
            self.total = tsize
        self.update(b * bsize - self.n)  # will also set self.n = b * bsize

eg_link = "https://github.com/tqdm/tqdm/releases/download/v4.46.0/tqdm-4.46.0-py2.py3-none-any.whl"
eg_file = eg_link.split('/')[-1]
with TqdmUpTo(unit='B', unit_scale=True, unit_divisor=1024, miniters=1,
              desc=eg_file) as t:  # all optional kwargs
    urllib.urlretrieve(
        eg_link, filename=eg_file, reporthook=t.update_to, data=None)
    t.total = t.n 
```

或使用`requests.get`和文件包装器：

```
import requests
from tqdm.auto import tqdm

eg_link = "https://github.com/tqdm/tqdm/releases/download/v4.46.0/tqdm-4.46.0-py2.py3-none-any.whl"
eg_file = eg_link.split('/')[-1]
response = requests.get(eg_link, stream=True)
with tqdm.wrapattr(open(eg_file, "wb"), "write", miniters=1,
                   total=int(response.headers.get('content-length', 0)),
                   desc=eg_file) as fout:
    for chunk in response.iter_content(chunk_size=4096):
        fout.write(chunk) 
```

你当然可以混搭技术。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-03-31T23:09:18.763

另一个不错的选择是`wget`：

```
import wget
wget.download('http://download.geonames.org/export/zip/US.zip') 
```

输出将如下所示：

```
11% [........                                     ] 73728 / 633847 
```

来源：[https ://medium.com/@petehouston/download-files-with-progress-in-python-96f14f6417a2](https://medium.com/@petehouston/download-files-with-progress-in-python-96f14f6417a2)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-09-10T13:54:33.397

该[`tqdm`](https://tqdm.github.io/)软件包现在包含一个旨在处理这种情况的函数：[`wrapattr`](https://tqdm.github.io/docs/tqdm/#wrapattr). 您只需包装对象的`read`（或`write`）属性，其余的由 tqdm 处理。这是一个简单的下载功能，将所有内容与`requests`：

```
def download(url, filename):
    import functools
    import pathlib
    import shutil
    import requests
    import tqdm

    r = requests.get(url, stream=True, allow_redirects=True)
    if r.status_code != 200:
        r.raise_for_status()  # Will only raise for 4xx codes, so...
        raise RuntimeError(f"Request to {url} returned status code {r.status_code}")
    file_size = int(r.headers.get('Content-Length', 0))

    path = pathlib.Path(filename).expanduser().resolve()
    path.parent.mkdir(parents=True, exist_ok=True)

    desc = "(Unknown total file size)" if file_size == 0 else ""
    r.raw.read = functools.partial(r.raw.read, decode_content=True)  # Decompress if needed
    with tqdm.tqdm.wrapattr(r.raw, "read", total=file_size, desc=desc) as r_raw:
        with path.open("wb") as f:
            shutil.copyfileobj(r_raw, f)

    return path 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-04-18T19:40:23.590

**# 定义进度条函数**

```
def print_progressbar(total, current, barsize=60):
    progress = int(current*barsize/total)
    completed = str(int(current*100/total)) + '%'
    print('[', chr(9608)*progress, ' ', completed, '.'*(barsize-progress), '] ', str(i)+'/'+str(total), sep='', end='\r', flush=True) 
```

**# 示例代码**

```
total = 6000
barsize = 60
print_frequency = max(min(total//barsize, 100), 1)
print("Start Task..", flush=True)
for i in range(1, total+1):
  if i%print_frequency == 0 or i == 1:
    print_progressbar(total, i, barsize)
print("\nFinished", flush=True) 
```

**# 进度条截图：**

下面的行仅用于说明。在命令提示符下，您将看到显示增量进度的单个进度条。

```
[ 0%............................................................] 1/6000

[██████████ 16%..................................................] 1000/6000

[████████████████████ 33%........................................] 2000/6000

[██████████████████████████████ 50%..............................] 3000/6000

[████████████████████████████████████████ 66%....................] 4000/6000

[██████████████████████████████████████████████████ 83%..........] 5000/6000

[████████████████████████████████████████████████████████████ 100%] 6000/6000 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-10T16:50:22.303

只是对@rich-jones 答案的一些改进

```
 import re
 import request
 from clint.textui import progress

 def get_filename(cd):
    """
    Get filename from content-disposition
    """
    if not cd:
        return None
    fname = re.findall('filename=(.+)', cd)
    if len(fname) == 0:
        return None
    return fname[0].replace('"', "")

def stream_download_file(url, output, chunk_size=1024, session=None, verbose=False):

    if session:
        file = session.get(url, stream=True)
    else:
        file = requests.get(url, stream=True)

    file_name = get_filename(file.headers.get('content-disposition'))
    filepath = "{}/{}".format(output, file_name)

    if verbose: 
        print ("Downloading {}".format(file_name))

    with open(filepath, 'wb') as f:
        total_length = int(file.headers.get('content-length'))
        for chunk in progress.bar(file.iter_content(chunk_size=chunk_size), expected_size=(total_length/chunk_size) + 1): 
            if chunk:
                f.write(chunk)
                f.flush()
    if verbose: 
        print ("Finished") 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-10-22T06:36:41.483

您可以在此处流式传输下载 ->[流式下载](http://docs.python-requests.org/en/latest/user/quickstart/?highlight=download#raw-response-content)。

您也可以[Stream Uploads](http://docs.python-requests.org/en/latest/user/advanced/?highlight=Uploads#streaming-uploads)。

除非您尝试仅使用 2 行访问 response.content ，否则最重要的流式请求已完成

```
for line in r.iter_lines():    
    if line:
        print(line) 
```

[流请求](http://docs.python-requests.org/en/latest/user/advanced/?highlight=#streaming-requests)

# ftp - F# FTP 在 C# 成功的地方失败

> ID：15644969
> 
> 赞同：1
> 
> 时间：2013-03-26T18:43:19.703
> 
> 标签：ftp, f#

我有一个使用此代码用 C# (.Net 3.5) 编写的应用程序。

```
using System;
using System.Net;

string strURI = String.Format("ftp://x{0}ftp/%2F'{1}'", parm1, parm2);
FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create(strURI);
ftp.Proxy = null;
ftp.KeepAlive = true;
ftp.UsePassive = false;
ftp.UseBinary = false;
ftp.Credentials = new NetworkCredential("uid", "pass");
ftp.Method = WebRequestMethods.Ftp.DownloadFile;
FtpWebResponse response = (FtpWebResponse)ftp.GetResponse();
... 
```

我已将其翻译成 F# (.Net 4.0) 以在我的应用程序中使用。

```
open System.Net

let uri = sprintf "ftp://x%sftp/%%2F'%s'" parm1 parm2
let ftp = FtpWebRequest.Create(uri) :?> FtpWebRequest
ftp.Credentials <- new NetworkCredential("uid", "pass")
ftp.Method <- WebRequestMethods.Ftp.DownloadFile
ftp.Proxy <- null
let response = ftp.GetResponse() :?> FtpWebResponse
... 
```

在这一点上，FSI 抱怨。

> System.Net.WebException：远程服务器返回错误：（550）文件不可用（例如，找不到文件，无法访问）。

然而，C# 应用程序运行并成功下载了该文件。我在 F# 中缺少什么（除了 4.0 中没有的属性，即 KeepAlive、UsePassive 和 UseBinary）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T18:46:55.497

代码可能有错误，我现在没有 F# 编译器。

```
open System
open System.Reflection
open System.Net

let switch_to_legacy_mode _ =
  let wtype = typeof<FtpWebRequest>
  let mfield = wtype.GetField("m_MethodInfo", BindingFlags.NonPublic ||| BindingFlags.Instance)
  let mtype = mfield.FieldType
  let knfield = mtype.GetField("KnownMethodInfo", BindingFlags.Static ||| BindingFlags.NonPublic)
  let knarr = knfield.GetValue(null) :?> Array
  let flags = mtype.GetField("Flags", BindingFlags.NonPublic ||| BindingFlags.Instance)
  let flag_val = 0x100
  for f in knarr do
    let mutable ff = flags.GetValue(f) :?> int
    ff <- ff ||| flag_val
    flags.SetValue(f, ff)

let uri = sprintf "ftp://x%sftp/%%2F'%s'" parm1 parm2
do switch_to_legacy_mode () // Call it once before making first FTP request
let ftp = FtpWebRequest.Create(uri) :?> FtpWebRequest
ftp.Credentials <- new NetworkCredential("uid", "pass")
ftp.Method <- WebRequestMethods.Ftp.DownloadFile
ftp.Proxy <- null
let response = ftp.GetResponse() :?> FtpWebResponse 
```

来源： http: [//support.microsoft.com/kb/2134299](http://support.microsoft.com/kb/2134299)

> 此问题的原因是由于 .Net Framework 4 中 System.Net.FtpWebRequest 类的行为更改。 System.Net.FtpWebRequest 类已从 .Net Framework 3.5 更改为 .Net Framework 4 到简化 CWD 协议命令的使用。System.Net.FtpWebRequest 类的新实现防止在发出用户请求的实际命令之前发送额外的 CWD 命令，而是直接发送请求的命令。对于完全符合 RFC 的 FTP 服务器，这应该不是问题，但是对于不完全符合 RFC 的服务器，您会看到这些类型的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:09:14.500

试试这个：

```
open System
open System.Net

let parm1 = "test"
let parm2 = "othertest"

let uri = String.Format("ftp://x{0}ftp/%2F'{1}'", parm1, parm2)
let ftp = FtpWebRequest.Create(uri) :?> FtpWebRequest;; 
```

我必须添加一个虚拟的 parm1 和 parm2，但我假设您已经在实际代码中定义了 parm1 和 parm2。我猜想无论问题是什么，它都存在于 uri 字符串中。也就是说，我认为您可以通过将 uri 与已知良好的 uri 字符串进行比较来发现问题。

# c# - Winrt 应用程序中 BDD 样式单元测试的 MSpec 替换

> ID：15644971
> 
> 赞同：8
> 
> 时间：2013-03-26T18:43:24.307
> 
> 标签：c#, unit-testing, windows-runtime, bdd, portable-class-library

有什么好的工具，我可以在 winrt 应用程序中使用 BDD 样式单元测试而不是 MSpec 吗？

我们知道，MSpec 没有移植到 PCL[机器规范 - 问题 120](https://github.com/machine/machine.specifications/issues/120)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T08:44:10.117

根据您要完成的工作，有几种解决方案： 如果您需要在 PCL 中测试代码，您可以创建一个普通的旧 .NET（测试）类并引用 PCL 库。

如果您正在尝试测试，我发现[以下](https://github.com/TestStack/TestStack.BDDfy/issues/154)关于使用 BDDfy 使用 BDDfy 测试 win81 和 WP81 应用程序的线程。

# entity-framework - 如何首先使用实体 框架和代码处理多层次的抽象？

> ID：15644979
> 
> 赞同：1
> 
> 时间：2013-03-26T18:43:37.193
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.1

我有一个具有多个继承级别的现有模型，其中几个中间类是抽象的。该模型看起来不错，但是在尝试创建数据库时出现错误：

> 从第 13、20 行开始映射片段的问题：具有不同键的两个实体映射到同一行。确保这两个映射片段不会将具有不同键的两组实体映射到同一组行。

这是我可以编写的用于重现错误的最简单的代码。如果我做`Pet`混凝土，问题就消失了。我可以做些什么来允许我的层次结构中有多个抽象类？

```
public abstract class Animal
        {
            public int Id { get; set; }
        }
public abstract class Pet : Animal
{
    public string Name { get; set; }
}

public class Fish : Pet
{
    public bool IsFreshwater { get; set; }
}

public class Dog : Pet
{
    public bool IsNeutered { get; set; }
}

public class Person : Animal
{
    public Pet MyPet { get; set; }
}

public class PersonContext : DbContext
{
    public DbSet<Person> People { get; set; }
}

[TestFixture]
public class AnimalTests
{
    [Test]
    public void CanCreateDatabase()
    {
        Database.SetInitializer(new DropCreateDatabaseAlways<PersonContext>());
        using (var context = new PersonContext())
        {
            Assert.AreEqual(0, context.People.Count());//fails here
        }
    }
} 
```

更新。这是生成的 .edmx 文件中差异的 KDiff 快照。左边的文件是我失败的原始代码，右边是我`DbSet<Pet>`在 DbContext 中包含 a 时生成的文件。
![edmx 差异的 KDiff](../Images/0f81c53b87f331f5e7b22f367be86007.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:58:20.837

您需要将 Pets 添加到您的上下文中：

```
// Table-per-class (TPC)
public class PersonContext : DbContext
{
    public PersonContext()
    {
    }

    public DbSet<Person> People { get; set; }
    public DbSet<Pet> Pets { get; set; }
} 
```

编辑：我刚刚看到你的评论，你说你想要按层次结构继承的表格。那么，您的问题是您的 DbSet 类型不正确 - 您想要使用基本类型的单个 DbSet：

```
// Table-per-hierarchy (TPH)
public class PersonContext : DbContext
{
    public PersonContext()
    {
    }

    public DbSet<Animal> Animals { get; set; }
} 
```

# java - 请求-回复数据库模型

> ID：15644981
> 
> 赞同：2
> 
> 时间：2013-03-26T18:43:48.993
> 
> 标签：java, mysql, sql, hibernate

我想知道基于请求和回复交互的简单数据库模型。一个请求只能有一个答案。可以根据先前的答案提出另一个请求。需要能够迭代所有历史记录——从第一个请求到最后一个回复。我做了一个示例模型：

```
Requests:            Reply:
| int id       |     | int id      |
| int parentID |     | String text |
| String text  |
| int answerID | 
```

我怎样才能改进它并使它更有用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:12:08.920

我假设一个请求可以生成多个回复。

```
Request
-------
Request ID
Request timestamp
Request text 
```

请求 ID 是主（集群）键。它是一个自动递增的整数或长整数。

您还可以在请求时间戳上定义一个非唯一索引，降序。

```
Reply
-----
Reply ID
Request ID
Reply timestamp
Reply text 
```

回复 ID 是主（集群）键。它是一个自动递增的整数或长整数。

您还可以在（请求 ID、回复时间戳降序）上定义非唯一索引。您还可以在（回复时间戳降序，请求 ID）上定义非唯一索引。第一个索引用于请求的所有回复。第二个索引是针对某个时间段（周、月）内的所有回复。

# information-retrieval - 模糊匹配大文本中的段落

> ID：15644984
> 
> 赞同：4
> 
> 时间：2013-03-26T18:43:59.880
> 
> 标签：information-retrieval, fuzzy-search, plagiarism-detection

我需要对短语进行非常复杂的匹配。我的文件中有大量文本，每个文件超过 1000 个单词。

我正在搜索的短语（搜索短语）是这样的：

> 投资并不意味着： i. 仅因以下原因产生的债权： 1\. 一方的国民或企业向另一方境内的企业销售商品或服务的商业合同，或 2\. 与商业交易，例如贸易融资，而不是先前涵盖的贷款或货币债权。

我想知道该短语是否出现在我拥有的每个文件中。但是，这些文件不会包含与该短语完全相同的内容。相反，文件（文本文件）将是一个带有如下段落的大文档：

> 但投资并不意味着对仅来自专门为缔约一方领土内的国民或法人向缔约另一方领土内的国民或法人销售商品或服务而设计的商业交易而获得的金钱的债权，为贸易融资等商业交易融资的信贷，以及期限少于三年的其他信贷，以及授予国家或国有企业的信贷。

如您所见，searchphrase 在实际含义上与文本文件中的这一段非常相似。关键词也有相当大的重叠。因此，我应该得到一场比赛。

我应该尝试使用哪种算法来编写代码？在任何地方都可以使用预编码模块吗？

# c# - 伪调试字符串的存在如何导致功能上的差异？

> ID：15644987
> 
> 赞同：0
> 
> 时间：2013-03-26T18:44:08.020
> 
> 标签：c#, compact-framework, windows-ce, messagebox, formatexception

如果我在我的代码中散布了这些：

```
MessageBox.Show("See a format exception yet? #1");//todo: remove 
```

（其中有7个，从1..7开始编号，大部分显示（1,2,5,6,7））

我最终得到一个错误消息（“*异常：找不到表 0 位置：frmFunction.SetPlatypus* ”）

如果我注释掉所有这些，我最终会得到一个不同的错误消息（“*异常：FormatException Location frmFunction.getDuckbillRecord* ”）

这怎么可能？这样的信息 msg 的存在/显示不应该对代码执行的方式/它所采用的路径等没有影响吗？

注意：getDuckbillRecord() 是所有 MessageBox 所在的位置。

## 更新

以 RT 的建议为动力，我想出了这个：

```
public static StringBuilder LogMsgs = new StringBuilder();

    public static void ExceptionHandler(Exception ex, string location)
    {
        try
        {
            LogMsgs.Append(string.Format("{0}\r\n", ex.Message)); //TODO: Comment out before deploying?
            DateTime dt = DateTime.Now;
            string timeAsStr = string.Format("{0}_{1}_{2}_{3}.txt", dt.Hour, dt.Minute, dt.Second, dt.Millisecond);
            using (StreamWriter file = new StreamWriter(timeAsStr))
            {
                file.WriteLine(LogMsgs.ToString());
            }
            . . .

//in the problematic code, replacing the MessageBox.Show() calls:

    TTBT.LogMsgs.Append("Made it to location 1 in frmOverFunction.GetDuckbillRecord()\r\n"); 
```

...而且它确实有帮助 - 在 7 个“代码航路点”中的第一个之后就出现了异常，所以显然在那个特定的丹麦有些东西已经腐烂了。

## 更新 2

在能够运行应用程序而不会在某处崩溃的罕见经验之后，我意识到我还需要在主窗体的 OnClosing() 事件中编写文件代码——在全局异常处理程序中已经工作了一段时间——我没想到我猜，该应用程序的干净终止将再次发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:11:42.447

我强烈建议您*不要*用于`MessageBox.Show(...)`记录/跟踪/调试错误，因为弹出对话框会引入许多细微的错误以及行为、焦点等方面的变化，尤其是当您的 UI 流/状态很重要时。

相反，`System.Diagnostics.Trace`用于编写跟踪代码（您可以选择将其编译到生产/发布代码`System.Diagnostics.Debug`中）或编写在构建发布版本时被删除的调试消息。

例如：

```
public void DoSomething(int a, int b)
{
    Trace.TraceInformation("Starting to do something: a = {0}, b = {1}",
        a, b);

    try 
    {
        int c = a / b;
    }
    catch (DivideByZeroException e)
    {
        Debug.WriteLine("OH NO ... 'b' WAS ZERO!!!! RUN AWAY!!!!");
        throw e;
    }

    Trace.TraceInformation("Done doing something");
} 
```

在上面的示例中，调试输出将在调试版本中可用，但将在发布版本中删除。跟踪输出将在调试和零售错误中可用（除非您关闭 TRACE 构建参数）但不会引入可测量的性能影响，除非您连接侦听器并开始将跟踪输出写入慢速介质，如旋转磁盘、自动收报机打印机， ETC。 ;）

当您在 Visual Studio 中使用 Trace 和/或使用调试消息运行代码时，这些消息将写入“输出”窗格，以便您可以在应用运行时观察应用内部发生的情况。

如果您愿意，您还可以编写一个独立的跟踪侦听器来侦听跟踪和/或调试消息并将它们记录到文件/数据库中或在控制台窗口中显示它们（或 GUI，如果您想花哨的话）。

您还可以使用[log4net](http://logging.apache.org/log4net/)之类的工具，它使您能够将日志/跟踪消息写入各种文件格式、数据库等。

# .net - 有什么办法可以减少这个 ado.net 代码？

> ID：15644989
> 
> 赞同：1
> 
> 时间：2013-03-26T18:44:15.117
> 
> 标签：.net, ado.net, sqlparameter

我需要显着减少这段代码，有没有办法创建一个描述其方向的sql参数？这是代码：

```
 Dim Oparam1 As SqlParameter = New SqlParameter("@ROJO", SqlDbType.Int)
    Dim Oparam2 As SqlParameter = New SqlParameter("@AMBAR", SqlDbType.Int)
    Dim Oparam3 As SqlParameter = New SqlParameter("@AMARILLO", SqlDbType.Int)
    Dim Oparam4 As SqlParameter = New SqlParameter("@VERDE", SqlDbType.Int)
    Oparam1.Direction = ParameterDirection.Output
    Oparam2.Direction = ParameterDirection.Output
    Oparam3.Direction = ParameterDirection.Output
    Oparam4.Direction = ParameterDirection.Output
    command.Parameters.Add(Oparam1)
    command.Parameters.Add(Oparam2)
    command.Parameters.Add(Oparam3)
    command.Parameters.Add(Oparam4) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:50:02.817

For each parameter you could use

C#

```
command.Parameters.Add(new SqlParameter("@name", SqlDbType.Int)
    {Direction = ParameterDirection.Output}); 
```

VB.NET

```
command.Parameters.Add(New SqlParameter("@name", SqlDbType.Int) With { _
    .Direction = ParameterDirection.Output _
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:52:10.607

尝试：

```
command.Parameters.Add(new SqlParameter("@ROJO", SqlDbType.Int) With {.Direction = ParameterDirection.Output}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:00:21.027

有一个[包含方向的构造函数的重载](http://msdn.microsoft.com/en-us/library/5a10hy4y.aspx)，但是你必须指定很多其他参数，所以代码毕竟不会更短。

你可以做一个扩展方法：

```
Imports System.Runtime.CompilerServices

Module SqlExtensions

  <Extension()>
  Public Function SetOutput(parameter As SqlParameter) As SqlParameter
    parameter.Direction = ParameterDirection.Output
    Return parameter
  End Function

End Module 
```

现在您可以在参数上使用它：

```
command.Parameters.Add(New SqlParameter("@ROJO", SqlDbType.Int).SetOutput())
command.Parameters.Add(New SqlParameter("@AMBAR", SqlDbType.Int).SetOutput())
command.Parameters.Add(New SqlParameter("@AMARILLO", SqlDbType.Int).SetOutput())
command.Parameters.Add(New SqlParameter("@VERDE", SqlDbType.Int).SetOutput()) 
```

# bash - 在并行 bash 脚本中运行多个脚本

> ID：15644991
> 
> 赞同：58
> 
> 时间：2013-03-26T18:44:31.530
> 
> 标签：bash, parallel-processing

我有一个 bash 脚本，其中包含其他串联运行的脚本。但是，运行它们需要相当长的时间。有没有办法并行运行这些脚本以提高整体性能？它们彼此独立。

它看起来类似于：

```
#!/bin/bash

#some code here
cppcheck.sh
churn.sh
run.sh 
```

* * *

**更新：**

```
**git log --pretty=format: --numstat | perl -ane'$c{$F[2]} += abs($F[0]+$F[1]) 
if $F[2];END {print "$_\t$c{$_}\n" for sort keys %c}' > ${OUTPUT_DIR}/churn.txt**
sed -i -e '/deps/d;/build/d;/translations/d;/tests/d' -e 30q ${OUTPUT_DIR}/churn.txt
sort -r -n -t$'\t' -k2 ${OUTPUT_DIR}/churn.txt -o ${OUTPUT_DIR}/churn.txt
echo "set term canvas size 1200, 800; set output '${OUTPUT_DIR}/output.html'; 
unset key; set bmargin at screen 0.4; set xtics rotate by -90 scale 0,0; 
set ylabel 'Number of lines changed (total)'; set title 'Files with high churn 
level';set boxwidth 0.7; set style fill solid; set noborder; 
plot '${OUTPUT_DIR}/churn.txt' using 2:xticlabels(1) with boxes" | gnuplot
echo "finished running churn.sh!" 
```

这是 churn.sh 中的代码。粗体命令需要 40 秒左右来实现。如果在主脚本中我在 churn.sh & 后面加上 &，它会抛出一个错误，说 sed 无法读取 churn.txt 文件（因为它尚未创建）。似乎它不会等到输出保存在文件中。我在该命令之后插入了等待，但它没有帮助。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-03-26T18:45:36.890

使用`&`在后台运行它就可以了

```
cppcheck.sh &
churn.sh &
run.sh &

wait
echo "All 3 complete" 
```

它将为他们每个人分叉一个新的过程。

如评论中所述， bash[`wait`](http://ss64.com/bash/wait.html)也将派上用场，如果您在父脚本上运行某些内容，则**在**这三个完成后。

如果没有参数，它将等待所有子进程完成，然后继续执行父脚本。

* * *

您面临的问题似乎与此直接相关。变量集仅对[定义它们的子 shell](https://unix.stackexchange.com/questions/27555/what-scopes-can-shell-variables-have)可见。所以，如果你`OUT_DIR`在父脚本中指定了，当它分叉时它对子脚本是不可见的。在这种情况下，正确的做法是`export`将变量作为环境变量。

# javascript - 显示来自 SVG onclick 事件的 ajax 工具提示

> ID：15644995
> 
> 赞同：0
> 
> 时间：2013-03-26T18:44:51.937
> 
> 标签：javascript, ajax, svg

我有一个带有此代码的 SVG，用于某些形状（它是一张地图）

```
onclick="top.traeDatos(evt.target.id);" 
```

在我的 html 文件中：

```
function traeDatos(region){
    alert(region);
} 
```

所以，我点击一个区域，我有一个带有区域名称和 html 文件中的变量的警报窗口。那太棒了

现在我希望地图上的单击显示一个弹出窗口，其中包含更多信息，我将通过一个名为“getDetails.php”的文件从多个数据库中使用 ajax。

我是 js 和 ajax 的新手，我知道如何在 ajax 中进行标准调用以获取给定 id（或在这种情况下为名称）的一些信息，我知道如何将文本字段的值更改为我得到的文本ajax 调用...但我不明白如何调用 ajax 并显示来自 SVG 或 html 中的那个 javascript 代码的工具提示。

我也不确定要使用什么收费提示，但当时有一个问题；）

能不能给我一点启示。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:34:57.453

这是一个开始：

```
function traeDatos(region){
    var domn = document.domain;
    document.domain = domn;
    var detURL = "http://" + domn + "/getDetails.php";
    $.ajax({
        url: detURL,
        type: 'POST',
        data: {
            region: region
        },
        cache: false,
        success: function(json){
            var data = jQuery.parseJSON(json);
            //using PHP's json_encode() you can return an array
            //in the example below 'info' is an item in the array
            $('#insert_place').val(data.info);
        }
    });
} 
```

如果您对此有任何问题，请告诉我。