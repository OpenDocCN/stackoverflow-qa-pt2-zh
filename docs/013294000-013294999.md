# StackOverflow 问答 13294000-13294999

# android - 如何更改添加到列表视图的最后一项的背景颜色？

> ID：13294002
> 
> 赞同：0
> 
> 时间：2012-11-08T17:04:41.567
> 
> 标签：android, listview, background-color

我对列表列表视图感到很困惑。我想在列表中最后添加的行中添加特定的颜色，我该怎么做？我已经用谷歌搜索了所有的互联网和 stackoverflow 2 天，但我不知道怎么做？？

我努力了

```
lv.getChildAt(lv.getLastVisiblePosition()). setBackgroundColor(Color.RED); 
```

但到目前为止还没有成功。我得到了随机行的颜色。但我只想为最近添加的项目着色。

有人可以给我建议吗。

任何评论都非常感谢。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:09:57.503

出于效率原因，适配器有一个视图回收器，所以这就是“随机性”的来源......
无论如何，只需创建一个自定义适配器来跟踪添加的最后一行的索引并`getView()`检查当前索引是否与最后一个索引匹配：

*   **如果是这样，**请更改背景颜色
*   **如果不** *恢复*原来的背景颜色。

在 Google Talks 上观看 Android 的 Romain Guy[解释视图回收器。](http://www.youtube.com/watch?v=N6YdwzAvwOA)

* * *

这是一个扩展 ArrayAdapter 的示例：

```
public class MyArrayAdapter<T> extends ArrayAdapter<T> {
    private int lastAdded;
    public MyArrayAdapter(Context context, int textViewResourceId, List<T> objects) {
        super(context, textViewResourceId, objects);
        lastAdded = objects.size() - 1;
    }

    @Override
    public void add(T object) {
        lastAdded = getCount();
        super.add(object);
    };

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        if(position == lastAdded) // Red 
            view.setBackgroundColor(0xffff0000);
        else // Transparent
            view.setBackgroundColor(0x00000000);
        return view;
    }

    @Override
    public void insert(T object, int index) {
        lastAdded = index;
        super.insert(object, index);
    };
} 
```

注意：这并不全面。根据您使用适配器的方式，还有其他方法可以添加您可能想要或不想覆盖的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:24:58.297

您可以为此使用 customadapter 并覆盖 getView() 可以帮助您完成任务。

```
public View getView (int position, View convertView, ViewGroup parent){

  // some task
   if(position == last) // once even try position == getCount() 
      {
      set background color to the view
      }
    return convertView;
} 
```

最后是您将膨胀到列表视图的最后一项（可能是数组列表或数组或其他适合您要求的项目）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:18:30.607

通过该电话，`lv.getChildAt(lv.getLastVisiblePosition())`您将获得最后一个可见且当前在屏幕上的孩子。

如果您想更改列表最后一项上的任何内容，则必须在`getView`适配器内部进行检查`if(position == getCount()-1){ }`并在那里对其进行处理。

# database - 数据库设计 - 我应该使用 30 列还是 1 列来包含 JSON/XML 形式的所有数据？

> ID：13294003
> 
> 赞同：4
> 
> 时间：2012-11-08T17:04:42.957
> 
> 标签：database, postgresql, database-design

我正在做一个项目，需要为业务逻辑存储 30 个不同的字段，稍后将用于为每个字段生成报告

30 个不同的字段不是一次写的，业务逻辑有这么多事务，它会是这样的：

```
Transaction 1, update field 1-4
Transaction 2, update field 3,5,9
Transaction 3, update field 8,12, 20-30
...
... 
```

注意每笔交易（都属于一个业务逻辑）将更新任意数量的字段而不是按任何特定顺序。

我想知道我的数据库设计是最好的：

1.  在 postgres 数据库中有 30 列代表这 30 个不同的字段。

2.  以 xml 或 json 的形式存储 30 个文件，并将其存储在 postgres 的一列中。

1或2哪个更好？

如果我选择 1>：

我知道从编程角度来看更容易因为这样我不需要读取整个 xml/json 并且只更新几个字段然后写回数据库，我只能更新每个事务所需的几列。

如果我选择 2>：

我可能会将该表通用地重用于其他东西，因为 blob 列中的内容只是 xml。但是，仅仅因为它有一个存储 xml 的 blob 列就使用泛型表来存储与业务逻辑完全无关的东西是错误的吗？这确实有可能节省创建几个新表的工作量。但是这种重用表的通用想法在 RDBMS 中是错误的吗？

另外，通过选择 2>，我似乎能够处理潜在的变化，比如更改某些字段/添加更多字段？至少看起来我不需要更改数据库表。但我仍然需要更改 c++ 和 c# 代码以在内部处理更改，不确定这是否有任何优势。

我在数据库设计方面没有足够的经验，所以我无法决定选择哪一个。任何输入表示赞赏。

注意，我很有可能暂时不需要对这 30 个列进行索引或搜索，如果我选择 2>，则会在额外的列上创建主键。但我不确定以后是否需要我根据这些列/字段中的任何一个进行搜索。

基本上我的所有字段都是从需求文档中预定义的，它们通常喜欢简单的字段：

```
field1: value(max len 10)
field2: value(max len 20)
...
field20: value((max len 2) 
```

没有嵌套字段。是否值得为每个字段创建 20 列（有些是字符串，如日期/时间，有些是字符串，有些是整数等）。

2> 将不同的业务逻辑放在共享表中是一个糟糕的设计理念吗？如果因为它们共享相同的结构而仅将其放入共享表中？例如，它们都有日期时间列、主键和内部具有不同业务逻辑的 xml 列？这样我们就可以安全地创建新表……这种节省的努力值得吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:28:01.177

始终将您的 XML/JSON 字段作为单独的字段存储在关系数据库中。这样做您将保持您的数据库规范化，允许数据库使用查询/索引等来完成它的工作。您将让其他开发人员免于解读您的 XML/JSON 字段的麻烦。

从 XML/JSON 中提取字段并在需要添加字段时进行维护可能需要更多的工作，但是一旦您创建了一个或多个类来这样做，就会消除障碍，而且不仅仅是为神秘的 blob 字段做准备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T01:27:21.717

通常，明智的做法是将 JSON 或 XML 文档拆分出来并将其存储为单独的列。这使您能够在列上设置约束以进行验证和检查、索引列、为每个字段使用适当的数据类型，并且通常使用数据库的功能。

将其映射到对象/从对象映射通常不太难，因为有很多工具可以做到这一点。例如，Java 提供 JAXB 和 JPA。

当您事先不知道 JSON 或 XML 文档的字段将是什么或将有多少字段时，将其拆分不是一个好主意的主要时间。在这种情况下，您实际上只有两个选择 - 使用[类似 EAV 的数据模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)，或者将文档直接存储为数据库字段。

在这种情况下（仅在这种情况下），我会考虑将文档直接存储在数据库中。[PostgreSQL 的 SQL/XML 支持](http://www.postgresql.org/docs/current/static/functions-xml.html)意味着您仍然可以在表达式上创建表达式索引`xpath`，并且可以使用触发器进行某些验证。

这不是一个好的选择，只是 EAV 通常是一个更糟糕的选择。

如果文档是“扁平的”——即没有嵌套的单级键和值——考虑将其存储为[`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)相反，因为`hstore`数据类型更强大。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T17:19:24.107

(1) 更标准，有充分的理由。使数据库能够对一件事的搜索和索引等事情进行繁重的工作。

# c# - 正则表达式不匹配模式中最后一个字符的第一个实例

> ID：13294007
> 
> 赞同：0
> 
> 时间：2012-11-08T17:04:57.183
> 
> 标签：c#, regex, parsing, webserver

抱歉标题令人困惑，但我不确定如何更好地解释它。

我正在为一个必须解析自定义脚本语言的学校项目构建一个简单的 Web 服务器。我有一条看起来像这样的线：

```
<p>Here's the date: <% pr date() %></p><p>Here's the date again: <% pr date() %></p> 
```

我正在使用以下正则表达式来尝试提取 <% ... %> 东西...

```
<% *(.*) *%> 
```

问题是它是从第一个打开标签匹配到最后一个结束标签，而不是从第一个打开标签到第一个结束标签。所以结果匹配是这样的：

```
<% pr date() %></p><p>Here's the date again: <% pr date() %> 
```

...代替：

```
<% pr date() %> 
```

我以为我可以通过使用这样的东西来解决它，但它似乎不起作用：

```
<% *([^(<%)]*) *%> 
```

...但它似乎不起作用。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:07:25.897

> 问题是它从第一个打开标签匹配到最后一个结束标签

您需要一个非贪婪匹配，它在第一次识别匹配时停止：

```
.*  --> greedy ("maximum munch")
.*? --> non-greedy ("minimal munch") 
```

非贪心量词当然可以应用于大多数其他模式。

但是，我建议不要使用正则表达式。元模式`OPEN-TOKEN CONTENT CLOSE-TOKEN`对于手写解析器/扫描器来说足够简单。然后，您也可以更轻松地识别您的标签何时在评论中（可能还有其他情况是您不想要匹配）：

```
<!-- <% xyz %> --> 
```

您可能不鼓励使用上述代码，但您必须考虑到这一点。

* * *

*脚注：*每次你`(write a parser|fire a regular expression)`，你已经在监狱里有一条腿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:08:10.743

您正在使用`.*`哪个是贪婪的量词

使用`.*?`代替`.*`which 是一个惰性量词

即使用正则表达式`<%(.*?)%>`

* * *

所以，`<%(.*)%>`会匹配到它找到的**最后一个** `%>`

`<%(.*?)%>`将匹配到它找到的**第一个** `%>`

# php - 检查安装程序上的序列号

> ID：13294008
> 
> 赞同：1
> 
> 时间：2012-11-08T17:04:59.650
> 
> 标签：php, ajax, json, installation, serial-number

我有一个网络应用程序，我想通过一个序列号系统来保护它。这一切都通过 woocommerce 和软件插件处理，API 文档在[这里](http://wcdocs.woothemes.com/user-guide/extensions/software-add-on/)。然后在购买脚本时生成一个序列号。

唯一的问题是我如何从网络安装程序中检查这个？

> 示例代码 使用 Software Add On 的 WooCommerce 支持的商店正在通过设置为 software-api 的 wc-api 请求侦听 API 请求。所有 API 请求都可以这样调用：
> 
> $data = wp_remote_get('http://localhost/woocommerce/?wc-api=software-api&request=request_key&...'); 所有参数都可以添加到 URL。API 返回的数据将存储在 $data 变量中，并采用 JSON 格式。
> 
> 激活 激活 API 调用用于激活许可证的单次使用。呼叫必须包含许可证的电子邮件地址、许可证的密钥和链接到许可证的产品 ID。
> 
> 所需参数：
> 
> 请求 = '激活' 电子邮件 license_key product_id

我不明白的是如何将其合并到表单上的文本输入中，并使用 ajax（也许？）来检查安装中的这一步？该示例用于使用 Wordpress 功能`wp_remote_get`，但安装程序没有此功能。

# objective-c - 在 Interface Builder 中创建的 UIBarButtonItem 不起作用 - 困惑

> ID：13294014
> 
> 赞同：2
> 
> 时间：2012-11-08T17:05:17.027
> 
> 标签：objective-c, interface-builder, uibarbuttonitem

我试图通过在工具栏中整合各种东西来整理我的 UI，我完全感到困惑。我正在使用 Interface Builder 而不是以编程方式构建控件，因为我的 UI 相当简单而且不是特别动态。

到目前为止我做了什么：

1.  添加了一个空的工具栏。
2.  将两个先前存在且正在工作的按钮拖到工具栏上。他们将他们的类从 UIButton 更改为 UIBarButtonItem，检查器现在显示它们没有发送操作或引用插座，但视图控制器中的前一个操作和插座 - 响应点击，设置按钮的标签 - 仍然有效。
3.  直接在工具栏中创建了一个新按钮。以正常方式通过 ctrl-drag 连接其动作和出口。检查器将此按钮的操作和插座显示为已连接，这很好，但遗憾的是它们都不起作用。单击按钮不会调用操作；设置按钮的标签不会导致屏幕上发生任何事情，即使在我尝试使用 setNeedsDisplay 刺激工具栏之后也是如此。

我不确定下一步该尝试什么。谷歌搜索告诉我，我不是唯一一个发现通过 Interface Bulder 使用 UIToolBar 困难和困惑的人，但我还没有找到解决我确切问题的方法。

我不想仅仅为了整理几个按钮而以编程方式创建我的整个 GUI。在工具栏外的 Interface Builder 中创建所有控件，将它们连接起来并工作，然后将它们移动到工具栏中也可能会起作用 - 但这将是一个杂项，如果出现任何问题，我仍然不会更明智之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:13:30.760

您是否应该尝试使用 UIBarButtonItem 而不是 UIButton？这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T13:25:32.990

我有一个类似的问题。您是否为根视图创建了额外的 UITapGestureRecognizer ？也许像 > 当点击 UITextView 以外的其他地方时，所有 UITextViews 的 resignFirstResponder ！

就我而言，在 7.1 上，额外的 UITapGestureRecognizer 阻止了将事件传输到 UIToolBar 内的 UIBarButtonItem 的 IBAction。IBAction 是通过 Ctrl+Drag 在 Storyboard 上制作的。在 8.1 上它正在工作。不在 7.1 上

阅读一些建议以创建额外的 UIView 并将所有视觉元素放入该额外的 UIView 中，除了 UIToolBar

# initialization - BirdWatching 应用程序“初始化不兼容的指针类型”

> ID：13294017
> 
> 赞同：1
> 
> 时间：2012-11-08T17:05:20.630
> 
> 标签：initialization, incompatibility

我刚开始编码，当我关注 Apple 的文章['Your Second iOS App:Storyboard'](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CodeListings/CodeListings.html)时，我收到了一条警告，上面写着“使用 NSString * 类型的表达式初始化 Birdsighting *__strong 的不兼容指针类型”来自以下代码：

```
detailViewController.sighting = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:07:56.120

好吧，您想说的是（看起来）：

NSString *stringInCurrentTableViewRow = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row]; BirdSighting *yourObject = stringInCurrentTableViewRow;

* * *

您确定 dataController 不包含字符串；）

# android - 具有自定义布局的 DialogFragment 导致我的应用程序崩溃

> ID：13294030
> 
> 赞同：9
> 
> 时间：2012-11-08T17:06:21.847
> 
> 标签：android, android-dialogfragment

我有`Dialog`片段问题。带有我的自定义布局的简单对话框工作正常。但是我想在显示对话框时启动控件。我正在尝试在 method 中执行此操作`onActivityCreated`。但是`getView()`返回 null，所以我认为我必须将自定义视图设置为`onCreateView`而不是`onCreateDialog`. 这里发生了错误。当我使用 onCreateView 时，我的应用程序崩溃了。这是我的代码：

```
class StatisticDialog extends DialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder .setPositiveButton(getString(android.R.string.ok), new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // FIRE ZE MISSILES!
                   }
               });
        // Create the AlertDialog object and return it
        return builder.create();
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.statistics, container, true);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }
} 
```

我在按钮单击活动时打开此对话框：

```
StatisticDialog dlg = new StatisticDialog(); 
dlg.show(getSupportFragmentManager(), "missiles"); 
```

和错误：

```
11-08 18:05:14.470: E/AndroidRuntime(1075): FATAL EXCEPTION: main
11-08 18:05:14.470: E/AndroidRuntime(1075): android.util.AndroidRuntimeException: requestFeature() must be called before adding content
11-08 18:05:14.470: E/AndroidRuntime(1075):     at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:215)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at com.android.internal.app.AlertController.installContent(AlertController.java:234)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.app.AlertDialog.onCreate(AlertDialog.java:336)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.app.Dialog.dispatchOnCreate(Dialog.java:351)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.app.Dialog.show(Dialog.java:256)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.support.v4.app.DialogFragment.onStart(DialogFragment.java:385)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.support.v4.app.Fragment.performStart(Fragment.java:1336)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:907)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.os.Handler.handleCallback(Handler.java:615)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.os.Looper.loop(Looper.java:137)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at java.lang.reflect.Method.invokeNative(Native Method)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at java.lang.reflect.Method.invoke(Method.java:511)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-08 18:05:14.470: E/AndroidRuntime(1075):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T17:12:29.377

尝试这个：

```
class StatisticDialog extends DialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        LayoutInflater inflater = getActivity().getLayoutInflater();
        View view = inflater.inflate(R.layout.statistics, null);
        builder.setView(view);
        builder.setPositiveButton(getString(android.R.string.ok), new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // FIRE ZE MISSILES!
            }
        });
        // Create the AlertDialog object and return it
        return builder.create();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-08T08:10:24.263

避免请求功能崩溃：

```
public class MyCombinedFragment extends DialogFragment
{
    private boolean isModal = false;

    public static MyCombinedFragment newInstance()
    {
        MyCombinedFragment frag = new MyCombinedFragment();
        frag.isModal = true; // WHEN FRAGMENT IS CALLED AS A DIALOG SET FLAG
        return frag;
    }

    public MyCombinedFragment()
    {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        if(isModal) // AVOID REQUEST FEATURE CRASH
        {
        return super.onCreateView(inflater, container, savedInstanceState);
        }
        else
        {
        View view = inflater.inflate(R.layout.fragment_layout, container, false);
        setupUI(view);
        return view;
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        AlertDialog.Builder alertDialogBuilder = null;
        alertDialogBuilder = new AlertDialog.Builder(getActivity());
        View view = getActivity().getLayoutInflater().inflate(R.layout.fragment_layout, null);
        alertDialogBuilder.setView(view);
        alertDialogBuilder.setTitle(“Modal Dialog“);
        alertDialogBuilder.setPositiveButton("Cancel", new DialogInterface.OnClickListener()
        {
            @Override
            public void onClick(DialogInterface dialog, int which)
            {
                dialog.dismiss();
            }
        });
        setupUI(view);
        return alertDialogBuilder.create();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-17T07:28:50.340

您应该使用灵活的 DialogFragment 将其设置为任何布局。你应该按照这个步骤。也许它很复杂，但非常强大和灵活。更重要的是您的活动从 Dialogfragment 获取日期。

1-创建一个实例类来监听并从您的活动中获取对话片段的日期。我将其命名为 OnMFDialogFragmentDoneListener.java。

2-创建您的 DialogFragment 并在 onCreateView 方法中定义您的布局，以及 3-在您的活动中使用您的类和新方法

我创建了一个 DialogFragment 来获取用户名和密码表单用户并将此日期传递给活动。对话框片段包含一个文本视图、两个 EditText 和两个按钮（登录和取消。但你可以使用任何东西。

第 1 步：OnMFDialogFragmentDoneListener.java

```
public interface OnMFDialogFragmentDoneListener {

public void onMFDialogFragmentDone(String tag,boolean cancelled,
                               CharSequence username,
                               CharSequence password);
} 
```

必须在 DialogFragment 类中定义 onMFDialogFragmentDone 方法以将信息发送到您的活动并在您的活动中获取信息。（信息=用户在 DialogFragmetn 中键入的日期，如 txt 或其他）。

step2 设计您的 DialogFragment 类。

```
 public class MFDialogFragment extends DialogFragment
    implements View.OnClickListener{

private EditText editTextusername,editTextpassword;

public static MFDialogFragment newInstance(String title){
    MFDialogFragment mfDialogFragment=new MFDialogFragment();

    Bundle bundle =new Bundle();
    bundle.putString("title",title);
    mfDialogFragment.setArguments(bundle);
    return mfDialogFragment;
}

@Override
public void onAttach(Activity act){

    try{
        OnMFDialogFragmentDoneListener
                test= (OnMFDialogFragmentDoneListener) act;
    }catch (ClassCastException cce){
        ////...activity !!!! not listen to me
    }
        super.onAttach(act);
}

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    this.setCancelable(true);
    int style = DialogFragment.STYLE_NORMAL, theme = 0;
    setStyle(style, theme);
}

public View onCreateView(LayoutInflater inflater,
                         ViewGroup container, Bundle bundle) {

        View v = inflater.inflate(R.layout.mfdialogfragmentlayout, container,
                false);

        TextView tvtitle = (TextView) v.findViewById(R.id.tv_dialogfragmentuserpass_title);
        tvtitle.setText(getArguments().getString("title"));

        editTextusername = (EditText) v.findViewById(R.id.et_dialogfragmentuserpass_username);
        editTextpassword = (EditText) v.findViewById(R.id.et_dialogfragmentuserpass_password);

        Button btnlogin = (Button) v.findViewById(R.id.btn_dialogfragmentuserpass_login);
        btnlogin.setOnClickListener(this);
        Button btncancel = (Button) v.findViewById(R.id.btn_dialogfragmentuserpass_cancel);
        btncancel.setOnClickListener(this);

    if(bundle!=null) {
        editTextpassword.setText(bundle.getCharSequence("SaveInstanceStatepassword"));
        editTextusername.setText(bundle.getCharSequence("SaveInstanceStateusername"));
    }

    return v;
}

@Override
public void onSaveInstanceState(Bundle icicle) {
    super.onSaveInstanceState(icicle);
    icicle.putCharSequence("SaveInstanceStatepassword", editTextpassword.getText());
    icicle.putCharSequence("SaveInstanceStateusername", editTextusername.getText());

}

public void onClick(View v)
{
    OnMFDialogFragmentDoneListener act = (OnMFDialogFragmentDoneListener)getActivity();
    if (v.getId() == R.id.btn_dialogfragmentuserpass_login)
    {

        act.onMFDialogFragmentDone(this.getTag(), false,
                editTextusername.getText(),editTextpassword.getText());
        dismiss();
        return;
    }
    if (v.getId() == R.id.btn_dialogfragmentuserpass_cancel)
    {
        act.onMFDialogFragmentDone(this.getTag(), true, "nousername", "nopass");
        dismiss();
        return;
    }

}
} 
```

第 3 步-首先在活动中使用 DialogFragment，将代码“implements OnMFDialogFragmentDoneListener”添加到活动类中，例如

```
public class MainActivity extends Activity
    implements OnMFDialogFragmentDoneListener 
```

第二

```
public static final String 
PROMPT_MFDIALOGFRAGMENT_TAG="PROMPT_MFDIALOGFRAGMENT_TAG"; 
```

第三

定义获取输入到 Dialogfragment 的数据的方法

```
public  void  onMFDialogFragmentDone(String tag, boolean cancelled,
                                     CharSequence username,
                                     CharSequence password){
    String total;

    total=username.toString()+"...."+password.toString();
    Toast.makeText(this,total,Toast.LengthShort).show();
} 
```

你的日期是用户名和密码接下来是定义一个简单的方法来调用你的对话框

```
public void MFDialogFragmentShow(){
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    MFDialogFragment mfDialogFragment =
            MFDialogFragment.newInstance("Login to your account");
    mfDialogFragment.show(ft, PROMPT_MFDIALOGFRAGMENT_TAG);

} 
```

完成。你的片段布局 mfdialogfragmentlayout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Title"
    android:id="@+id/tv_dialogfragmentuserpass_title"/>
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="User Name"

    android:id="@+id/et_dialogfragmentuserpass_username"/>
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="Password"
    android:password="true"
    android:id="@+id/et_dialogfragmentuserpass_password"/>
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Login"
        android:id="@+id/btn_dialogfragmentuserpass_login"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Cancel"
        android:id="@+id/btn_dialogfragmentuserpass_cancel"/>

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-15T07:44:46.627

DialogFragment 类中存在 getShowDialog() 方法。这是一个解释：[developer.android.com](http://developer.android.com/reference/android/support/v4/app/DialogFragment.html#setShowsDialog(boolean))

```
 if (!getShowsDialog()) {
            View rootView = inflater.inflate(R.layout.fr_layout, container, false);
            initViews(rootView);
            return rootView;
        } else {
            return super.onCreateView(inflater, container, savedInstanceState);
        }
    } 
```

# javascript - 如何在 kineticjs v4.0.5 中显示图像周围的边框

> ID：13294038
> 
> 赞同：2
> 
> 时间：2012-11-08T17:06:39.363
> 
> 标签：javascript, kineticjs

默认情况下，Kineticjsv4.0.5 不支持图像边框，因此`.showBorder()`会`.hideBorder()`导致错误提示

> 未捕获的类型错误：对象 # 没有方法“showBorder”

但是当我包含 Image Plugin v1.0.1 javascript 文件时，我的游戏根本没有出现，而 FireBug 根本没有报告任何错误。

我也在github上开始了一个[问题。](https://github.com/ericdrowell/KineticJS/issues/147)

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:59:39.467

试试这个代码

```
<!DOCTYPE HTML>
<html>
  <head>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.5.js"></script>

    <script>
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 578,
          height: 200
        });
        var layer = new Kinetic.Layer();

        var imageObj = new Image();
        imageObj.onload = function() {
            var yoda = new Kinetic.Image({
            x: 140,
            y: stage.getHeight() / 2 - 59,
            image: imageObj,
            width: 106,
            height: 118,
            stroke:"Red",
            strokeWidth:5
          });

          // add the shape to the layer
          layer.add(yoda);         

          // add the layer to the stage
          stage.add(layer);
          yoda.on('mouseover', function() {
                yoda.setStrokeWidth("Transparent");
                yoda.setStroke(0);
                layer.draw();
            });
        };
        imageObj.src = "http://www.html5canvastutorials.com/demos/assets/yoda.jpg";
      };    
    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</html> 
```

# javascript - Onclick使用标签更改颜色+文本

> ID：13294045
> 
> 赞同：2
> 
> 时间：2012-11-08T17:07:00.347
> 
> 标签：javascript, html

```
<script language="javascript">

    function changecolor (i)
    {
        if(document.getElementById)
            document.getElementById(i).color = "green";
        else if(document.all)
            document.all[i].color = "red";

        return false;
    }

</script>

<h1>Edit Status: 
    <a href="#" onClick="return changecolor('item1')" class="a">
        <font style="color: #f00;">
            <font id=item1>Disabled</font>
    </a>
</h1><br></font> 
```

我有上面的文本换色器，现在我想用红色创建禁用，当你点击它时，文本改变并且颜色变成绿色，如果你再次点击它会返回..

那我该怎么做呢？该代码仅在我单击一次时才有效，并且不会更改文本..

感谢你们所有人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:29:02.360

您使用`<font>`了 HTML 标签，不推荐使用。您应该使用 CSS 来设置 HTML 标签的样式。

您可以在此处阅读有关 CSS 的信息：[W3schools - CSS](http://www.w3schools.com/css/)

我认为这个 HTML 对你有好处：

```
<h1>Edit Status: 
    <a href="#" onClick="return changecolor(this)" style="color: red;">Disabled</a>
</h1> 
```

使用此脚本更改文本和颜色：

```
<script type="text/javascript">

function changecolor(element){
    if (element.innerHTML == "Disabled"){
        element.innerHTML = "Enabled";
        element.style.color = "green";
    } else {
        element.innerHTML = "Disabled";
        element.style.color = "red";
    }
    return false;
}

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:14:42.467

让我们看看您的 HTML 元素的嵌套：

```
<h1>Edit Status: 
    <a href="#" onClick="return changecolor('item1')" class="a">
        <font style="color: #f00;">
            <font id=item1>Disabled</font>
        </a>   <----- bad
    </h1>      <----- bad
    <br>
</font>        <----- bad 
```

我建议：

1.  删除所有`<font>`标签，因为这不是 1997 年。:) 使用 CSS
2.  修复元素的嵌套
3.  用您的固定代码更新您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:15:20.853

你的支票很奇怪。我看不到您无法使用的场景`document.getelementById`。

你想要的东西更像：

```
function changecolor (controlID)
{
    var obj = document.getElementById(controlID);

    //switch color and change text conditionally:
    if(obj.color === "green"){
        obj.color = "red";
        obj.innerText = "Disabled";
    } else {
        obj.color = "green";
        obj.innerText = "Enabled";
    }
} 
```

但除此之外，您的 HTML 格式不正确，因此您也应该真正寻求纠正。

# symfony - 如何使用 KnpSnappyBundle 设置方向 = 横向？

> ID：13294053
> 
> 赞同：8
> 
> 时间：2012-11-08T17:07:31.297
> 
> 标签：symfony, wkhtmltopdf

我正在使用 Snappy Bundle 和 Symfony 2.1。

我有一些在此捆绑包的文档中没有找到的问题：

*   如何设置方向？
*   有没有办法显示页码？

这是我的 config.yml 包：

```
knp_snappy:
    pdf:
        enabled:    true
        binary:     /home/wkhtmltopdf-i386
        options:    [] 
```

这是我生成pdf的控制器之一：

```
public function exampleAction() {
    $html = $this->renderView('MyBundle:Example:test.pdf.twig', $this->param);  
    return new Response($this->get('knp_snappy.pdf')->getOutputFromHtml($html),200, array(
    'Content-Type'          => 'application/pdf',
    'Content-Disposition'   => 'attachment; filename="Test.pdf"'));

} 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-08T19:16:48.313

```
$pdf = $this->get('knp_snappy.pdf')->getOutputFromHtml($html,
                                   array('orientation'=>'Landscape',
                                         'default-header'=>true)); 
```

# linux - 保留通过“更少”或“更多”管道传输的文本颜色

> ID：13294059
> 
> 赞同：45
> 
> 时间：2012-11-08T17:08:02.983
> 
> 标签：linux

为了便于阅读，某些命令会生成彩色文本。

我正在使用 Linux。例如，当我使用`rak`或`hg diff` 输出为彩色以提高可读性时。

但是，当我通过管道输出`less`

```
hg diff | less 
```

颜色消失了。

如何保持颜色？

谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-03-23T16:59:04.460

我相信一些命令足够聪明，如果它们检测到它们正在写入管道或文件而不是控制台，则不会输出颜色，因为这可能会破坏管道中下一个程序对其输出的解析。

您可以尝试强制程序使用它们各自的标志（例如`--color`或其他）输出颜色，但最终取决于它们是否会满足您的请求。

`less`例如，GNU grep 2.27即使传递给它也不会输出颜色`--color`。但是，如果您将`--color=always`其传递并通过管道输入`less`，您将能够通过`less`. 然后，使用`-R`标志将`less`解释颜色转义码。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-08T17:09:39.267

尝试`less -r`或（更安全）`less -R`。[请参阅手册](http://linux.die.net/man/1/less)。

由于您可能不想一直指定：

```
export LESS=-R # Put that in a startup script like .bashrc.local
hg diff | less 
```

对于 Mercurial，您还可以使用[寻呼机扩展](http://mercurial.selenic.com/wiki/PagerExtension)。

# linux - UTF-8 文件名在 linux 终端中返回 Not Found

> ID：13294060
> 
> 赞同：9
> 
> 时间：2012-11-08T17:08:04.237
> 
> 标签：linux, file, utf-8, terminal

我对 linux (Ubuntu) 终端中的某些文件有疑问，名称中有重音符号。例如：

```
$ ls dir/
criação.png 
```

所以，终端返回那个文件，所以它存在。现在让我们看看文件是否存在，使用这个简单的命令：

```
$ [ -f criação.png ] &&  echo "File Exist" || echo "Not Exist"
Not Exist 
```

如您所见，“不存在”。现在，我在 OSX 上有相同的文件夹和文件，然后我运行相同的命令并返回：

```
$ [ -f criação.png ] &&  echo "File Exist" || echo "Not Exist"
File Exist 
```

*我对locale*了解一点：

```
$ locale
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE=en_US.UTF-8
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8" 
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

在 linux 上，“不存在”，在 OSX 上，“文件存在”......有人知道如何解决这个问题吗？

也许这些可以帮助： http:
[//nedbatchelder.com/blog/201106/filenames_with_accents.html](http://nedbatchelder.com/blog/201106/filenames_with_accents.html)
[http://www.ruby-forum.com/topic/279105](http://www.ruby-forum.com/topic/279105)

**更新 - 解决方案**

我终于找到了解决这个问题的方法。您需要将文件从 NFD 重命名为 NFC，这是修复所有文件的命令：

```
cd dir/
convmv -r -i -f utf8 -t utf8 --nfc --notest . 
```

来源：[http ://blog.hbis.fr/2010/08/30/macox-utf8_filenames_normalization/](http://blog.hbis.fr/2010/08/30/macox-utf8_filenames_normalization/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:24:19.210

原因之一可能是文件名使用的字符的 unicode 规范化形式与用于键入名称的组合标记不同。请参阅[Unicode 等效项](http://en.wikipedia.org/wiki/Unicode_equivalence)。

# c++ - 如何在 C++ 中将字符串转换为 char 数组？

> ID：13294067
> 
> 赞同：124
> 
> 时间：2012-11-08T17:08:26.710
> 
> 标签：c++, string, type-conversion

我想转换`string`为`char`数组，但不是`char*`。我知道如何将字符串转换为`char*`（通过使用`malloc`或我在代码中发布它的方式）——但这不是我想要的。我只是想转换`string`为`char[size]`数组。是否可以？

```
#include <iostream>
#include <string>
#include <stdio.h>
using namespace std;

int main()
{
    // char to string
    char tab[4];
    tab[0] = 'c';
    tab[1] = 'a';
    tab[2] = 't';
    tab[3] = '\0';
    string tmp(tab);
    cout << tmp << "\n";

    // string to char* - but thats not what I want

    char *c = const_cast<char*>(tmp.c_str());
    cout << c << "\n";

    //string to char
    char tab2[1024];
    // ?

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-11-08T17:11:34.327

我能想到的最简单的方法是：

```
string temp = "cat";
char tab2[1024];
strcpy(tab2, temp.c_str()); 
```

为了安全起见，您可能更喜欢：

```
string temp = "cat";
char tab2[1024];
strncpy(tab2, temp.c_str(), sizeof(tab2));
tab2[sizeof(tab2) - 1] = 0; 
```

或者可以是这种方式：

```
string temp = "cat";
char * tab2 = new char [temp.length()+1];
strcpy (tab2, temp.c_str()); 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2015-03-05T07:55:20.500

好的，我很震惊没有人真正给出一个好的答案，现在轮到我了。有两种情况；

1.  一个**常量 char 数组**对你来说已经足够好了，所以你可以使用，

    ```
    const char *array = tmp.c_str(); 
    ```

2.  或者你**需要修改**char 数组，所以常量不行，然后就用这个

    ```
    char *array = &tmp[0]; 
    ```

它们都**只是分配操作**，大多数时候这正是您所需要的，如果您真的需要一个新副本，那么请关注其他伙伴的答案。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-12-27T02:46:43.550

```
str.copy(cstr, str.length()+1); // since C++11
cstr[str.copy(cstr, str.length())] = '\0';  // before C++11
cstr[str.copy(cstr, sizeof(cstr)-1)] = '\0';  // before C++11 (safe) 
```

在 C++ 中避免使用 C 是一种更好的做法，因此应该选择**std::string::copy而不是****strcpy**。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-01-10T16:12:15.733

最简单的方法是这样

```
std::string myWord = "myWord";
char myArray[myWord.size()+1];//as 1 char space for null is also required
strcpy(myArray, myWord.c_str()); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-08T17:11:02.023

只需将字符串复制到数组中`strcpy`。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-19T11:47:04.487

尝试这种方式应该可以工作。

```
string line="hello world";
char * data = new char[line.size() + 1];
copy(line.begin(), line.end(), data);
data[line.size()] = '\0'; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-08T17:11:27.640

试试 strcpy()，但正如 Fred 所说，这是 C++，而不是 C

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-08T17:12:25.540

你可以`strcpy()`像这样使用：

```
strcpy(tab2, tmp.c_str()); 
```

注意缓冲区溢出。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-10-10T08:55:58.850

如果事先不知道字符串的大小，可以动态分配数组：

```
auto tab2 = std::make_unique<char[]>(temp.size() + 1);
std::strcpy(tab2.get(), temp.c_str()); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-25T04:48:07.180

如果您使用的是 C++11 或更高版本，我建议您使用`std::snprintf`over`std::strcpy`或`std::strncpy`因为它的安全性（即，您确定可以将多少个字符写入缓冲区）并且因为它会为您终止字符串（所以你不必担心它）。它会是这样的：

```
#include <string>
#include <cstdio>

std::string tmp = "cat";
char tab2[1024];
std::snprintf(tab2, sizeof(tab2), "%s", tmp.c_str()); 
```

* * *

在 C++17 中，您有以下选择：

```
#include <string>
#include <cstdio>
#include <iterator>

std::string tmp = "cat";
char tab2[1024];
std::snprintf(tab2, std::size(tab2), "%s", tmp.c_str()); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-04-02T16:14:28.077

~~好吧，我知道这可能比~~简单而且愚蠢，但是我认为它应该可以工作：

```
string n;
cin>> n;
char b[200];
for (int i = 0; i < sizeof(n); i++)
{
    b[i] = n[i];
    cout<< b[i]<< " ";
} 
```

# eclipse - 什么取决于 EGit 中的 HOME 变量？

> ID：13294072
> 
> 赞同：0
> 
> 时间：2012-11-08T17:08:43.163
> 
> 标签：eclipse, git, configuration, repository, egit

如果未设置 home 环境变量，EGit 会显示如下消息

![在此处输入图像描述](../Images/3ea12812b2c2408d62de1fad81df07ba.png)

我不想设置我的 HOME 变量，但希望 Git 将它的数据存储在特殊目录中。

我`Default repository folder`在 Eclipse 的 Git 配置选项卡中设置。

在这种情况下，还有哪些其他内容会进入默认 HOME？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:53:13.477

不要以为还有什么。（我也只在 EGit 首选项中设置了“默认存储库文件夹”）

# mongodb - 维护mongodb集合的顺序

> ID：13294073
> 
> 赞同：1
> 
> 时间：2012-11-08T17:08:44.977
> 
> 标签：mongodb, mongoid

我有一个包含许多文档（可能数百万）的集合。当用户插入一个新文档时，我希望有一个字段来维护我可以索引的数据的“顺序”。例如，如果一个字段是时间，格式为“1352392957.46516”，如果我有三个文档，第一个是时间：1352392957.46516，第二个是时间：1352392957.48516（20 毫秒后），第三个是 1352392957.49516（10 毫秒后）喜欢有另一个字段，其中第一个文档为 0，第二个为 1，第三个为 2，依此类推。

我想要这个的原因是我可以索引该字段，然后当我进行查找时，我可以执行有效的 $mod 操作来对数据进行下采样。因此，例如，如果我有一百万个文档，并且我只希望其中 1000 个均匀分布，我可以在整数字段上执行 $mod [1000, 0] 。

我不能在时间字段上这样做的原因是因为它们可能没有完美间隔，或者可能都是偶数或奇数，因此 mod 无法工作。因此，单独的整数字段将以线性增加的方式保持顺序。

此外，您应该能够在集合中的任何位置插入文档，因此所有后续字段都需要更新。

有没有办法自动做到这一点？还是我必须实施这个？或者有没有更有效的方法来做我所描述的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:13:56.307

It is well beyond "slower inserts" if you are updating several million documents for a single insert - this approach makes your entire collection the active working set. Similarly, in order to do the `$mod` comparison with a key value, you will have to compare every key value in the index.

Given your requirement for a sorted sampling order, I'm not sure there is a more efficient [preaggregation](http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/) approach you can take.

I would use [`skip()` and `limit()`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bskip%28%29%7D%7D) to fetch a random document. The `skip()` command will be scanning from the beginning of the index to skip over unwanted documents each time, but if you have enough RAM to keep the index in memory the performance should be acceptable:

```
// Add an index on time field
db.data.ensureIndex({'time':1})

// Count number of documents
var dc = db.data.count()

// Iterate and sample every 1000 docs
var i = 0; var sampleSize = 1000; var results = [];
while (i < dc) {
    results.push(db.data.find().sort({time:1}).skip(i).limit(1)[0]);
    i += sampleSize;
}

// Result array of sampled docs
printjson(results); 
```

# jquery - 嵌入在可点击订单项中的电子邮件链接

> ID：13294074
> 
> 赞同：0
> 
> 时间：2012-11-08T17:08:47.367
> 
> 标签：jquery, knockout.js

我有一个行项目，单击它会调用一个函数，将我引导到另一个页面，但行项目中有一个电子邮件地址链接。但是当我点击电子邮件链接时，它会重定向我，就好像我点击了订单项的任何其他部分一样。我该如何更改此设置，以便电子邮件链接将打开电子邮件客户端，但订单项的其余部分将重定向？

```
<li data-bind="click: $parent.UserInfo">
    <table>
        <tr class="colleague">
            <td>
                <img src="./images/default.gif"/>
            </td>
            <td>
            <table width="100%">                            
                <tr><td><span class="firstname_" data-bind="text: firstname"></span>&nbsp;<span data-bind="text: lastname"></span></td></tr>
                <tr><td><a data-bind="text: email, attr: { href: 'mailto:'+email} "></a></td></tr>
                <tr><td><span data-bind="text: phone"></span></td></tr>
                <tr><td><span>Location: </span><span data-bind="text: location"></span></td></tr>
            </table>
        </td>
    </tr>
</table>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:16:06.487

Knockout 提供了两个概念可以帮助您解决这一问题。

如果您有一个`click`（或通过绑定的特定事件`event`），那么您可以包含一个附加选项，事件名称后跟`Bubble`并将其设置为 false。所以，你可以这样做：

```
data-bind="click: someAction, clickBubble: false" 
```

其次，如果您`true`从`click`绑定（或`event`绑定）调用的处理程序返回，那么它将允许执行默认操作。

因此，一种选择是添加一个`click`带有返回内部链接的函数的绑定，`true`然后还添加一个`clickBubble: false`. 所以，像：

```
<td><a data-bind="text: email, attr: { href: 'mailto:'+email}, click: alwaysTrue, clickBubble: false"></a></td> 
```

这假设您有一个`alwaysTrue`返回的函数`true`。

示例：http: [//jsfiddle.net/rniemeyer/UDHAp/](http://jsfiddle.net/rniemeyer/UDHAp/)

为了简化，您甚至可以编写一个自定义绑定来为您执行此操作。这是一个包装点击绑定的示例（如果您愿意，请选择一个短名称）：

```
ko.bindingHandlers.preventBubbleButAllowDefaultAction = {
    init: function(element, valueAccessor) {
        if (ko.utils.unwrapObservable(valueAccessor())) {
            ko.applyBindingsToNode(element, { click: function() { return true; }, clickBubble: false });
        }

    }        
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/gyJsd/](http://jsfiddle.net/rniemeyer/gyJsd/)

或者在不包装现有绑定的情况下更高效地做我们想做的事情：

```
ko.bindingHandlers.preventBubbleButAllowDefaultAction = {
    init: function(element, valueAccessor) {
        if (ko.utils.unwrapObservable(valueAccessor())) {
            ko.utils.registerEventHandler(element, "click", function() {
                event.cancelBubble = true;
                if (event.stopPropagation) {
                    event.stopPropagation(); 
                }              
            });
        }  
    }        
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/gyJsd/2/](http://jsfiddle.net/rniemeyer/gyJsd/2/)

# c# - 如何在服务器上传递驱动程序路径？

> ID：13294076
> 
> 赞同：1
> 
> 时间：2012-11-08T17:08:50.843
> 
> 标签：c#, asp.net, selenium

```
IWebDriver driver1 = new InternetExplorerDriver(" '+ Server.MapPath("~\\IEDriverServer_Win32_2.25.2\\IEDriverServer.exe") +' "); 
```

找不到驱动程序错误？我正在使用 ASP.NET，C#。任何帮助..

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:14:59.667

你可以尝试这样的事情： -

```
 private const string URL = "http://url";
    private const string IE_DRIVER_PATH = @"C:\PathTo\IEDriverServer";

    [TestMethod]
    public void Test()
    {
        var options = new InternetExplorerOptions()
        {
            InitialBrowserUrl = URL,
            IntroduceInstabilityByIgnoringProtectedModeSettings = true
        };
        var driver = new InternetExplorerDriver(IE_DRIVER_PATH, options);
        driver.Navigate();
        driver.Close(); 
        driver.Quit(); 
    } 
```

你必须包括`Microsoft.VisualStudio.TestTools.UnitTesting`和

```
OpenQA.Selenium.IE namespace 
```

# cordova - 我可以从 PhoneGap 中的路径创建 MediaFile 吗？

> ID：13294086
> 
> 赞同：1
> 
> 时间：2012-11-08T17:09:22.800
> 
> 标签：cordova

在我的 PhoneGap 应用程序中，我允许用户使用 Camera.getPicture() 方法从他们的设备上传视频，该方法运行良好。如果视频超过 30 秒，我希望能够拒绝上传。

我可以在使用 capture.captureVideo 捕获视频时执行此操作，因为成功函数接收 mediaFile 作为输入参数。

有没有办法从路径创建一个 mediaFile 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:58:35.720

是的，你可以做到。这是一些示例代码。您必须从完整路径中确定文件名，并可能正确设置 mime 类型。

```
var medFile = new MediaFile("VID_20121108_134716.mp4",
                            "file:///mnt/sdcard/DCIM/Camera/VID_20121108_134716.mp4",
                            "video/mp4");
medFile.getFormatData(function(metadata) {
    console.log("width = " + metadata.width);
    console.log("height = " + metadata.height);
    console.log("duration = " + metadata.duration);
}, function() {
    console.log("fail");
}); 
```

我刚刚签入了 2.3.0 的修复程序，因此不需要 mimeType。

# c# - 在我需要它们之前获取我将在后台线程上需要的下一个值

> ID：13294088
> 
> 赞同：1
> 
> 时间：2012-11-08T17:09:34.177
> 
> 标签：c#, multithreading

我希望在需要之前找到一些关于实现获取一堆 id 值（如数据库标识值）的最佳方法的建议。我有许多需要唯一 id（int）的类，我想做的是获取下一个可用的 id（每个类，每个服务器）并将其缓存在本地准备就绪。当一个 id 被拿走时，我想让下一个准备好，等等。

我已经制作了一些代码来演示我正在尝试做的事情。代码很糟糕（它应该包含锁等），但我认为它明白了这一点。丢失奇数 ID 不是问题 - 重复 ID 是（问题）。我对 GetNextIdAsync 的胆量很满意——它调用了一个 proc

```
this.Database.SqlQuery<int>("EXEC EntityNextIdentityValue @Key", 
            new SqlParameter("Key", key))).First(); 
```

在 SQL Server 上使用 sp_getapplock 确保每个返回值都是唯一的（并且是增量的）。

```
static class ClassId
{
    static private Dictionary<string, int> _ids = new Dictionary<string,int>();
    static private Dictionary<string, Thread> _threads = new Dictionary<string,Thread>();

    static ClassId()
    {
        //get the first NextId for all known classes
        StartGetNextId("Class1");
        StartGetNextId("Class2");
        StartGetNextId("Class3");
    }

    static public int NextId(string key)
    {
        //wait for a current call for nextId to finish
        while (_threads.ContainsKey(key)) { }
        //get the current nextId
        int nextId = _ids[key];
        //start the call for the next nextId
        StartGetNextId(key);
        //return the current nextId
        return nextId;
    }

    static private void StartGetNextId(string key)
    {
        _threads.Add(key, new Thread(() => GetNextIdAsync(key)));
        _threads[key].Start();
    }

    static private void GetNextIdAsync(string key)
    {
        //call the long running task to get the next available value
        Thread.Sleep(1000);
        if (_ids.ContainsKey(key)) _ids[key] += 1;
        else _ids.Add(key, 1);
        _threads.Remove(key);
    }
} 
```

我的问题是 - 在我需要它之前始终拥有我需要的下一个价值的最佳方法是什么？班级应该如何安排，锁应该在哪里？例如，GetNextIdAsync() 中的锁添加新线程但不启动它并将 StartGetNextId() 更改为调用 .Start()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:21:05.283

您应该通过适当地标记该列来让您的数据库生成标识值。[您可以使用SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/ms190315.aspx)或类似方法检索该值。

您的实现的主要失败是 NextId 中的繁忙等待以及从多个线程同时访问 Dictionary 。最简单的解决方案是使用像 ohadsc 下面建议的 BlockingCollection。您需要预测数据库出现故障并且无法获得更多 id 的情况——您不想让应用程序死锁。因此，您需要使用接受 ConcellationToken 的 Take() 重载，以在访问数据库失败时通知它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:33:42.403

这似乎是生产者-消费者模式的一个很好的应用。

我在想类似的事情：

```
private ConcurrentDictionary<string, int> _ids;
private ConcurrentDictionary<string, Thread> _threads;
private Task _producer;
private Task _consumer;
private CancellationTokenSource _cancellation;

private void StartProducer()
{
    _producer = Task.Factory.StartNew(() => 
       while (_cancellation.Token.IsCancellationRequested == false)
       {
           _ids.Add(GetNextKeyValuePair());
       }
   )
}

private void StartConsumer()
{
    _consumer = Task.Factory.StartNew(() => 
       while (_cancellation.Token.IsCancellationRequested == false)
       {
           UseNextId(id);
           _ids.Remove(id);
       }
   )
} 
```

有几点要指出...

首先，您可能已经知道这一点，使用像`ConcurrentDictionary`or之类的线程安全集合`BlockingCollection`而不是普通的`Dictonary`or是非常重要的`List`。如果你不这样做，坏事就会发生，人会死，婴儿会哭。

其次，您可能需要一些比 basic 更少笨拙的东西`CancellationTokenSource`，这正是我在服务编程中所习惯的。关键是有一些方法可以取消这些事情，这样你就可以优雅地关闭它们。

第三，考虑将`sleep`s 扔进去以防止它对处理器造成太大的冲击。

这方面的细节将根据您生成这些东西的速度而不是消耗它们的速度而有所不同。如果消费者以比生产者高得多的速度运行，我的代码绝对不能保证在消费者请求之前您将拥有所需的 ID。然而，这是一种体面的，尽管是同时组织准备此类数据的基本方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:48:04.873

您可以`BlockingCollection`为此使用 a 。基本上，您将有一个线程将新 ID 泵入缓冲区：

```
BlockingCollection<int> _queue = new BlockingCollection<int>(BufferSize);

void Init()
{
    Task.Factory.StartNew(PopulateIdBuffer, TaskCreationOptions.LongRunning);
}

void PopulateIdBuffer()
{
    int id = 0;
    while (true)
    {
        Thread.Sleep(1000); //Simulate long retrieval
        _queue.Add(id++);
    }
}

void SomeMethodThatNeedsId()
{
    var nextId = _queue.Take();
    ....
} 
```

# xml-signature - 根命名空间被添加到

> ID：13294090
> 
> 赞同：2
> 
> 时间：2012-11-08T17:09:47.450
> 
> 标签：xml-signature, xades4j

库：apache Santuario + xades4j。

使用 xpath 选择元素并对其进行签名。

如果我尝试对没有命名空间的简单 XML 进行签名并验证签名，则效果很好，但如果 XML 定义了命名空间，例如以下 XML：

```
<ClinicalDocument xmlns="urn:hl7-org:v3">
    <element1tobesigned.../>
    <element2tobesigned.../>
</ClinicalDocument> 
```

并且在验证签名时发现异常

```
    858 WARN [main] org.apache.xml.security.signature.Reference - URI“#xmldsig-5fb20abe-b14c-4d84-a908-e22e776cd6f1-signedprops”的验证失败
    858 WARN [main] org.apache.xml.security.signature.Reference - 预期摘要：q0WnWFf9j0kcT46t5cXmcPnVvu5o51oAcmej/SjCazQ=
    858 WARN [main] org.apache.xml.security.signature.Reference - 实际摘要：41zXKVkRCsxUYpNZXW5b9KkZlTC9LM9WA8O7WHQz1Rg=

    xades4j.verification.ReferenceValueException：无法验证参考“#xmldsig-5fb20abe-b14c-4d84-a908-e22e776cd6f1-signedprops”

```

原因是 XML 命名空间 (urn:hl7-org:v3) 被添加到 xades:SignedProperties 然后摘要变得不同。

```
858  DEBUG [main] org.apache.xml.security.utils.DigesterOutputStream     - Pre-digested input
858  DEBUG [main] org.apache.xml.security.utils.DigesterOutputStream   - <xades:SignedProperties xmlns="urn:hl7-org:v3" ........./> 
```

这是签名生成代码

```
    XadesTSigningProfile 配置文件 = 新 XadesTSigningProfile(keyProvider);
    profile.withTimeStampTokenProvider(TestTimeStampTokenProvider.class)
    .withAlgorithmsProviderEx(ExclusiveC14nForTimeStampsAlgorithmsProvider.class);  

    XadesSigner 签名者 = profile.newSigner();   

    DataObjectDesc obj1 = new DataObjectReference("")
    .withTransform(new ExclusiveCanonicalXMLWithoutComments())
    .withTransform(新的 XPathTransform(xPath);

    SignedDataObjects dataObjs = new SignedDataObjects().withSignedDataObject(obj1);

更改 2012-11-20 开始

// signer.sign(dataObjs, docToSign.getDocumentElement() );
       新信封（签名者）.sign（docToSign.getDocumentElement（））；

更改 2012-11-20 结束

```

这是验证码

```
NodeList signatureNodeList = getSigElement(getDocument("my/my-document.signed.bes.countersign.xml"));

for (int i = 0; i < signatureNodeList.getLength(); i++) {
    Element signatureNode = (Element) signatureNodeList.item(i);
    verifySignature(signatureNode, new XadesVerificationProfile(VerifierTestBase.validationProviderMySigs));
    log.info("successful validation");          
}

public static XAdESForm verifySignature(Element sigElem,
            XadesVerificationProfile p) throws Exception {
        XAdESVerificationResult res = p.newVerifier().verify(sigElem, null);

        return res.getSignatureForm();
    } 
```

Apache Santuario FAQ 中似乎有关于此问题的文档，

```
2.6\. I sign a document and when I try to verify using the same key, it fails
After you have created the XMLSignature object, before you sign the document, you must embed the signature element in the owning document (using a call to XMLSignature.getElement() to retrieve the newly created Element node from the signature) before calling the XMLSignature.sign() method,

During canonicalisation of the SignedInfo element, the library looks at the parent and ancestor nodes of the Signature element to find any namespaces that the SignedInfo node has inherited. Any that are found are embedded in the canonical form of the SignedInfo. (This is not true when Exclusive Canonicalisation is used, but it is still good practice to insert the element node prior to the sign() method being called).

If you have not embedded the signature node in the document, it will not have any parent or ancestor nodes, so it will not inherit their namespaces. If you then embed it in the document and call verify(), the namespaces will be found and the canonical form of SignedInfo will be different to that generated during sign(). 
```

还有一个关于这个问题的文件如下

[https://stackoverflow.com/a/12759909/1809884](https://stackoverflow.com/a/12759909/1809884)

看起来不是xades4j的bug，而是xml签名的问题。

--添加 2012-11-15

```
here is how to get the docToSign . in fact , i just reused the code in class  SignatureServicesTestBase . so i am sure that it is namespaceaware. 
static
    {
           DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);
           db = dbf.newDocumentBuilder();
    }
 public static Document getDocument(String fileName) throws Exception
    {
        String path = toPlatformSpecificXMLDirFilePath(fileName);
        Document doc = db.parse(new FileInputStream(path));
        // Apache Santuario now uses Document.getElementById; use this convention for tests.
        Element elem = doc.getDocumentElement();
        DOMHelper.useIdAsXmlId(elem);
        return doc;
    }

and docToSign  is return by calling SignatureServicesTestBase.getDocument()

Document docToSign = SignatureServicesTestBase.getDocument("my/cdamessage.xml"); 
```

和 SignedProperties 元素如下

```
<xades:SignedSignatureProperties>
<xades:SigningTime>2012-11-15T13:58:26.167+09:00</xades:SigningTime>
<xades:SigningCertificate>
<xades:Cert>
<xades:CertDigest>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
<ds:DigestValue>4btVb5gQ5cdcNhGpvDSWQZabPQrR9jf1x8e3YF9Ajss=</ds:DigestValue>
</xades:CertDigest>
<xades:IssuerSerial>
<ds:X509IssuerName>CN=Itermediate,OU=CC,O=ISEL,C=PT</ds:X509IssuerName>
<ds:X509SerialNumber>-119284162484605703133798696662099777223</ds:X509SerialNumber>
</xades:IssuerSerial>
</xades:Cert>
<xades:Cert>
<xades:CertDigest>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
<ds:DigestValue>vm5QpbblsWV7fCYXotPhNTeCt4nk8cLFuF36L5RJ4Ok=</ds:DigestValue>
</xades:CertDigest>
<xades:IssuerSerial>
<ds:X509IssuerName>CN=TestCA,OU=CC,O=ISEL,C=PT</ds:X509IssuerName>
<ds:X509SerialNumber>-46248926895392336918291885380930606289</ds:X509SerialNumber>
</xades:IssuerSerial>
</xades:Cert>
<xades:Cert>
<xades:CertDigest>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
<ds:DigestValue>AUaN+IdhKQqxIVmEOrFwq+Dn22ebTkXJqD3BoOP/x8E=</ds:DigestValue>
</xades:CertDigest>
<xades:IssuerSerial>
<ds:X509IssuerName>CN=TestCA,OU=CC,O=ISEL,C=PT</ds:X509IssuerName>
<ds:X509SerialNumber>-99704378678639105802976522062798066869</ds:X509SerialNumber>
</xades:IssuerSerial>
</xades:Cert>
</xades:SigningCertificate>
</xades:SignedSignatureProperties>
</xades:SignedProperties> 
```

另外，我使用 xpath 来获取要签名的元素，并将命名空间（xmlns="urn:hl7-org:v3"）也添加到结果中。

```
543  DEBUG [main] org.apache.xml.security.utils.ElementProxy     - setElement("ds:Transform", "null")
544  DEBUG [main] org.apache.xml.security.utils.ElementProxy     - setElement("dsig-xpath:XPath", "null")
658  DEBUG [main] org.apache.xml.security.utils.DigesterOutputStream     - Pre-digested input:
658  DEBUG [main] org.apache.xml.security.utils.DigesterOutputStream     - <component xmlns="urn:hl7-org:v3" Id="ES" contextConductionInd="true" typeCode="COMP">
        <section classCode="DOCSECT" moodCode="EVN">
          <code code="ES" codeSystem="2.16.840.1.113883.6.1" codeSystemName="SectionCode" codeSystemVersion="1.0" displayName="english"></code>
          <text>english</text>
        </section>
      </component> 
```

xpath 有什么问题吗？xpath 快把我逼疯了。我想我必须从现在开始学习 xpath。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:35:25.110

您正在创建一个[封装签名](http://www.w3.org/TR/xmldsig-core/#sec-Overview)，但缺少封装签名转换！由于正在对整个文档进行签名，因此必须排除签名节点本身，因为签名计算后它的某些内容会发生变化。

真不敢相信在你提到 Enveloped 类之前我没有看到它。顺便说一句，这个类只是一个用于简单、直接的封装签名的实用程序类。它甚至不应该在那里。您可以自己添加转换：

```
DataObjectDesc obj1 = new DataObjectReference("")
.withTransform(new EnvelopedSignatureTransform())
.withTransform(new ExclusiveCanonicalXMLWithoutComments())
... 
```

# c# - 在 ASP.Net 中继器中使用来自 2 个列表的数据

> ID：13294095
> 
> 赞同：1
> 
> 时间：2012-11-08T17:10:04.423
> 
> 标签：c#, asp.net, data-binding, repeater

是否可以将两个列表绑定到一个中继器（创建一个表），以使用两个列表中的数据？
我有一个包含操作的列表和一个包含用户的列表。我想显示一些关于动作的信息，以及关于发出动作的用户的信息。我可以将有关操作的信息与有关用户的信息结合起来吗？

这是一张桌子的草图，它应该是这样的：

身份证 | 时间 | 行动信息 | 用户名 | 全名 |用户信息

乔皮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:14:35.580

与其绑定两个数据源并尝试对其进行`Repeater`排序，您需要做的是在将数据绑定到转发器*之前将其组合成一个项目。*

至于你如何做到这一点，这将取决于你的数据的结构。

如果两个列表的相同索引处的项目是“属于一起”的项目，那么您可以只使用`Zip`.

```
var query = actions.Zip(users, (a,b)=> new CombinedStructure(a,b)); 
```

您可以创建一个新的自定义类型来存储需要在每个显示行中的数据，或者使用匿名类型并手动分配每个字段。

如果索引不对应，那么您可能需要加入

```
var query = from action in actions
            join user in users
            on user.ID = action.UserID
            select ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:14:25.127

不，但您可以使用 LINQ 加入他们：

*   [在 LINQ 中加入两组](https://stackoverflow.com/questions/2867567/joining-two-sets-in-linq)
*   [http://geekswithblogs.net/JustinGreenwood/archive/2012/03/15/how-to-join-two-collections-with-linq.aspx](http://geekswithblogs.net/JustinGreenwood/archive/2012/03/15/how-to-join-two-collections-with-linq.aspx)

并绑定结果。

# jquery - jquery onscroll 用视频平滑替换 div

> ID：13294097
> 
> 赞同：0
> 
> 时间：2012-11-08T17:10:11.253
> 
> 标签：jquery, jquery-plugins

这是一个在谷歌上半小时无法帮助我的查询。我喜欢 jquery-images-ondemand ......如何以最流畅的方式修改类似的内容以处理视频。不像我想的那么简单：

我在页面底部有一个图像，当用户滚动到图像的 100 像素以内时，它会转换为视频（不确定我将如何嵌入/加载它，但那是另一天的事了）。

在页面上的其他地方滚动时，视频可以继续、停止或简单地恢复为图像。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:54:13.803

我从这里找到了一个名为 的简单函数`isScrolledIntoView`，用于检查元素是否在视口视图中：

```
function isScrolledIntoView(elem) {
    var $window = $(window),
        docViewTop = $window.scrollTop(),
        docViewBottom = docViewTop + $window.height(),
        elemTop = $(elem).offset().top,
        elemBottom = elemTop + $(elem).outerHeight();
    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
} 
```

您可以像这样实现上面的功能：

```
$(window).on("scroll", function() {
    $('div.video').each(function() {
        // Change the div element into a video when reached the visible area
        if (isScrolledIntoView(this)) {
            $(this).replaceWith('<iframe class="video" src="' + $(this).data('video') + '"></iframe>');
        }
    });
});​ 
```

**演示：http:** [//jsfiddle.net/tovic/vVaat/11/](http://jsfiddle.net/tovic/vVaat/11/)

# linux - 通过特定的击键从 GUI 启动选择菜单（BASH 脚本）

> ID：13294098
> 
> 赞同：1
> 
> 时间：2012-11-08T17:10:21.757
> 
> 标签：linux, bash, shell, user-interface

我已经将一个 shell 脚本与从命令行启动的选择菜单放在一起。你们有什么想法我可以通过某个按键从 GUI 启动它吗？

我正在考虑找到一种在切换到其中一个虚拟终端后立即启动脚本的方法。(ctr-alt-f1)。这样的事情可能吗？

GUI Shell 脚本选项似乎非常有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:30:59.747

在 LXDE 中，您可以将操作绑定到组合键。请参阅Openbox 帮助中的[绑定](http://openbox.org/wiki/Help%3aBindings)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:35:22.547

如果你想使用虚拟终端（没有 LXDE），你可以编辑`/etc/init/tty6.conf`和更改`exec`脚本末尾的行。

```
# tty6 - getty
#
# This service maintains a getty on tty6 from the point the system is
# started until it is shut down again.

start on runlevel [23] and not-container

stop on runlevel [!23]

respawn
exec /path/to/your/script 
```

# asp.net-mvc - MVC4。设置ValidationMessage的默认值和成功值

> ID：13294101
> 
> 赞同：1
> 
> 时间：2012-11-08T17:10:40.070
> 
> 标签：asp.net-mvc, validation, razor, asp.net-mvc-4

我使用这条线来表示我的模型验证消息：

@Html.ValidationMessageFor(Model => Model.Email, "")

它的工作方式是当属性无效时，将其设置为正确的错误消息。我想扩展它，所以它首先显示一条默认消息，然后如果属性“电子邮件”有效，则显示一条成功消息。

所以..

默认值：请在此处输入您的电子邮件。!Valid：电子邮件无效（工作中） Valid：谢谢，完成注册后您会收到一封电子邮件。

有没有办法添加默认和成功的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:30:24.173

您可以使用 jQuery 来实现这一点，在邮件输入[模糊事件](http://api.jquery.com/blur/)上触发验证并更改消息。

# java - Apache Karaf 2.3.0 中的 javax.servlet.http 包

> ID：13294105
> 
> 赞同：1
> 
> 时间：2012-11-08T17:10:44.813
> 
> 标签：java, osgi, cxf, apache-karaf, osgi-bundle

我已经安装了**Apache Karaf 2.3.0**。我需要安装的包之一使用`javax.servlet.http`包中的类。当我尝试安装捆绑包时，它给了我错误消息：

```
karaf@root> ERROR: Bundle com.groupgti.esb.purge [207] Error starting mvn:com.groupgti.esb/esb.purge/1.0.0 (org.osgi.framework.BundleException: Unresolved constraint in b
undle com.groupgti.esb.purge [207]: Unable to resolve 207.0: missing requirement [207.0] osgi.wiring.package; (osgi.wiring.package=com.groupgti.esb.cxf.interceptors) [cau
sed by: Unable to resolve 212.0: missing requirement [212.0] osgi.wiring.package; (&(osgi.wiring.package=javax.servlet.http)(version>=2.6.0)(!(version>=3.0.0)))])
org.osgi.framework.BundleException: Unresolved constraint in bundle com.groupgti.esb.purge [207]: Unable to resolve 207.0: missing requirement [207.0] osgi.wiring.package
; (osgi.wiring.package=com.groupgti.esb.cxf.interceptors) [caused by: Unable to resolve 212.0: missing requirement [212.0] osgi.wiring.package; (&(osgi.wiring.package=jav
ax.servlet.http)(version>=2.6.0)(!(version>=3.0.0)))]
        at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3826)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1868)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)
        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)
        at java.lang.Thread.run(Thread.java:662) 
```

`javax.servlet.http`包是从：**mvn:org.apache.geronimo.specs/geronimo-servlet_2.5_spec/1.1.2**系统包导出的。问题是它的版本是**2.5**但我的包至少需要**2.6.0**。是否有解决方法或将**geronimo-servlet**更新到与我的包兼容的更高版本？（这是系统捆绑包）。

**附加信息：**

```
CXF Version: 2.7.0
Camel Version 2.10.2 
```

**编辑：**

我忘了说重要的事情。我还将**CXF**更新到**2.7.0**版本，CXF 是引入 Servlet 3.0 依赖关系的版本。这是来自依赖树的图：

![在此处输入图像描述](../Images/89f75cbd9026d7d3b08ff15c6d7245ff.png)

也许会给你一些关于如何解决这个问题的想法？我唯一能想到的就是回到**CXF 2.6.x**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:43:19.327

如果你的包真的需要比 2.5 更新的东西，你可能会在 Karaf 2.3.0 上运行它时遇到问题。Karaf 2.3 使用基于 Servlet 2.5 的 Jetty 7.6.7。它不支持任何新的基于 Servlet 3 的 API 等。您可以升级 servlet-api 包，它可能会工作，但如果您的包/应用程序使用任何 Servlet 3 功能，它可能无法工作。

Karaf 3 将升级到支持 Servlet 3 的 Jetty 8.1。Karaf 社区将非常感谢任何帮助测试和解决这个问题。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:37:35.053

您真的需要使用 geronimo servlet 规范吗？尝试用这个替换它：

```
 <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
    </dependency> 
```

# c++ - MFC C++ 使用静态成员和编译问题

> ID：13294111
> 
> 赞同：-4
> 
> 时间：2012-11-08T17:11:26.650
> 
> 标签：c++, oop, mfc, encapsulation

我有一个类 Rules()，它有一个名为 m_String 的静态公共成员。
我使用适当的 CString 在类中定义该成员。
当我想从全局函数中使用该成员时，我
在编译时使用“Rules::m_String”，我收到以下错误：

> Rules.obj：错误 LNK2001：未解析的外部符号“公共：静态类 ATL::CStringT > > 规则::m_String”(?m_String@Rules@@2V?$CStringT@DV?$StrTraitMFC_DLL@DV?$ChTraitsCRT@D@ ATL@@@@@ATL@@A)

也许这意味着设置 m_String 的规则中的函数也应该是静态的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:27:28.477

很可能您在编译单元中没有`Rules::m_String`定义（**未声明**）和初始化的实例。`Rules.cpp`

您的`Rules.cpp`外部任何函数定义中是否有类似以下的行？

```
CString Rules::m_String = CString("Whatever initial value required"); 
```

如果没有显示更多代码，其他任何事情都很难说。

# google-maps - 带有地名的google maps api

> ID：13294113
> 
> 赞同：2
> 
> 时间：2012-11-08T17:11:33.327
> 
> 标签：google-maps

我正在尝试使用 Google 地图网络服务。

当我直接在我的浏览器中输入这个 [URI](http://maps.googleapis.com/maps/api/geocode/json?address=cookoo%2012%20rue%20de%20Rieux%2044000%20Nantes%20France&sensor=false)时 ，我得到一个 LOCATION_TYPE，它与“formatted_address”是近似的：“44000 Nantes, France”，

如果我输入 [这个](http://maps.googleapis.com/maps/api/geocode/json?address=12%20rue%20de%20Rieux%2044000%20Nantes%20France&sensor=false) ，我会得到一个位置类型的好结果：屋顶......

但是当我在谷歌地图（maps.google.com）Cookoo，12 Rue de Rieux，Nantes 中输入相同的地址时，谷歌地图没有问题找到没有问题的地方......

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:56:48.147

我认为 Google Maps API 中的地理编码器仅用于地址，因此当您添加诸如“Cookoo”之类的公司名称时，它会有点偏离。要搜索企业，您可以尝试使用[Google Places API](https://developers.google.com/places/documentation/)来查找此信息。

另一方面，谷歌地图网站是结合了很多服务的产品，因此它可以进行业务搜索以及处理地址。

也许您的工作流程可能是地址 --> 地理编码器 --> 纬度/经度 --> 地点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:52:57.637

条目“Cookoo, 12 Rue de Rieux 44000 Nantes France”在 Places 数据库中，但不在 Geocoder 数据库中；您可以通过查询[Places API来获得该结果](https://developers.google.com/places/)

[在此测试页](http://www.geocodezip.com/v3_GoogleEx_places-searchboxB.html)的搜索框中输入上述字符串

# java - javax.usb ：连接设备的数量始终为零

> ID：13294117
> 
> 赞同：1
> 
> 时间：2012-11-08T17:11:49.443
> 
> 标签：java, usb

我已经搜索和搜索了 SO、Google 等，并且在任何地方我得到的代码都与下面的代码大致相似。例如，我试过[这个](https://github.com/Synesso/Monci)。我尝试使用 root 和其他方式运行它。但是，附加设备的数量始终为零。你能告诉我为什么会发生这种情况吗？

这是在 32 位的 Ubuntu-12.04 上。

Java代码：

```
 package com.me.test;

    import java.io.UnsupportedEncodingException;
    import java.util.List;
    import javax.usb.UsbDevice;
    import javax.usb.UsbDisconnectedException;
    import javax.usb.UsbException;
    import javax.usb.UsbHostManager;
    import javax.usb.UsbHub;
    import javax.usb.UsbServices;

    public class ListUsbDevices {
        public static void main(String[] args) throws SecurityException, UsbException, UnsupportedEncodingException, UsbDisconnectedException {
            UsbServices services = UsbHostManager.getUsbServices();
            UsbHub rootHub = services.getRootUsbHub();

            List<UsbDevice> devices = rootHub.getAttachedUsbDevices();
            if (devices.size()>0) {
                System.out.println("USB devices found.");
            } else {
                System.out.println("No USB devices found.");
            }

            for (UsbDevice device : devices) {
                System.out.println("\tProduct String " + device.getProductString());
                System.out.println("\tManufacturer String " + device.getManufacturerString());
                System.out.println("\tSerial Number " + device.getSerialNumberString());
            }

        }
    } 
```

lsusb 输出：

```
 user@host:~$ sudo lsusb
    Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
    Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
    Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
    Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
    Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
    Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
    Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
    Bus 004 Device 010: ID 03eb:2013 Atmel Corp. 
    user@host:~$ sudo lsusb -s 4:10 -v
    Bus 004 Device 010: ID 03eb:2013 Atmel Corp. 
    Device Descriptor:
      bLength                18
      bDescriptorType         1
      bcdUSB               2.00
      bDeviceClass            0 (Defined at Interface level)
      bDeviceSubClass         0 
      bDeviceProtocol         0 
      bMaxPacketSize0        32
      idVendor           0x03eb Atmel Corp.
      idProduct          0x2013 
      bcdDevice           10.00
      iManufacturer           1 AppliedSensor
      iProduct                2 iAQ Stick
      iSerial                 0 
      bNumConfigurations      1
      Configuration Descriptor:
        bLength                 9
        bDescriptorType         2
        wTotalLength           41
        bNumInterfaces          1
        bConfigurationValue     1
        iConfiguration          0 
        bmAttributes         0x80
          (Bus Powered)
        MaxPower              100mA
        Interface Descriptor:
          bLength                 9
          bDescriptorType         4
          bInterfaceNumber        0
          bAlternateSetting       0
          bNumEndpoints           2
          bInterfaceClass         3 Human Interface Device
          bInterfaceSubClass      0 No Subclass
          bInterfaceProtocol      0 None
          iInterface              0 
            HID Device Descriptor:
              bLength                 9
              bDescriptorType        33
              bcdHID               1.11
              bCountryCode            0 Not supported
              bNumDescriptors         1
              bDescriptorType        34 Report
              wDescriptorLength      53
             Report Descriptors: 
               ** UNAVAILABLE **
          Endpoint Descriptor:
            bLength                 7
            bDescriptorType         5
            bEndpointAddress     0x81  EP 1 IN
            bmAttributes            3
              Transfer Type            Interrupt
              Synch Type               None
              Usage Type               Data
            wMaxPacketSize     0x0010  1x 16 bytes
            bInterval              10
          Endpoint Descriptor:
            bLength                 7
            bDescriptorType         5
            bEndpointAddress     0x02  EP 2 OUT
            bmAttributes            3
              Transfer Type            Interrupt
              Synch Type               None
              Usage Type               Data
            wMaxPacketSize     0x0010  1x 16 bytes
            bInterval              10
    Device Status:     0x0000
      (Bus Powered) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:32:13.193

javax.usb 的内容很大程度上取决于您正在运行的 linux 的风格，以及您机器的一般配置。

您应该尝试在您的机器上下载并运行[sourceforge](http://javax-usb.cvs.sourceforge.net/javax-usb/javax-usb-example/)上的示例程序。如果这些不起作用，那么您应该假设您需要更改机器的配置或有关您的运行时的某些内容。

我在使用这个库时遇到了一些问题，并得到[了以下建议](http://bytes.com/topic/java/answers/16736-jusb)。这些信息可能已经过时了，但它可能有助于为您指明正确的方向：

> 下载并构建后，您需要确保 libjusb.so 被复制到 $JAVA_HOME/jre/lib/i386，并且它具有您的用户的读取和执行权限。还要确保您安装了 usbdevfs 虚拟设备，并且您的用户对它具有适当的 R/W 访问权限。
> 
> 最后，根据您要与之通信的 USB 设备，您*可能* 需要禁用热插拔（或至少将任何可能尝试与您的设备通信的已安装模块列入黑名单）。如果设备已经在 Linux 中获得支持，hotplug 将加载它的关联模块并为其提供独占 I/O 访问权限，然后您才能从 jUSB 获取设备。

上面引用的文字来自 Brad Barclay。希望这可以帮助。

# c++ - Objective-C 类实现 C++ 接口

> ID：13294124
> 
> 赞同：2
> 
> 时间：2012-11-08T17:12:18.223
> 
> 标签：c++, objective-c, interface

有一种 Objective-C 类实现 C++ 接口的方法吗？

* * *

例如，我在 C++ IInter 中有一个接口：

```
class IInter {
public:
    virtual void doSomething() = 0;
} 
```

我有一个 C++ 类，它需要一个 IInter 实例：

```
class MyClass {
public:
    MyClass(IInter delegate);
} 
```

我需要在 Objective-C 类上使用 MyClass 实例，我该怎么做？

```
@interface MyObjcClass : NSObject <UIInter> ... ?? 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:39:24.250

如果您想在`objective C`项目中混合 C++ 类，最好的办法似乎是用`Objective-C`等价物包装您的 C++ 类型和函数。这在这篇[文章](http://philjordan.eu/article/mixing-objective-c-c++-and-objective-c++)和[这里](http://robnapier.net/blog/wrapping-cppfinal-edition-759)得到了很好的解释。请注意，如果您正在使用，您可以在您的`clang`中声明您的 C++ ，这可能是最干净的方式。`ivar``class extension`

# scala - 在 Play 框架中，将数组传递给视图的语法是什么？

> ID：13294126
> 
> 赞同：4
> 
> 时间：2012-11-08T17:12:23.867
> 
> 标签：scala, playframework

传递非字符串参数时，我使用以下第一行标记视图：

```
@(name: String,country: String) 
```

向框架发出两个参数应该传递给它的信号。

如何表示我正在等待 String[] 参数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T17:15:44.360

在 scala 中，这是写`Array[String]`的，而不是`String[]`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T17:19:45.107

```
@(name: Array[String]) 
```

这应该可以，在 Play 中你使用 scala 模板系统

# servicestack - 如何将 NLog Config 与 ServiceStack 日志记录一起使用？

> ID：13294131
> 
> 赞同：10
> 
> 时间：2012-11-08T17:12:38.157
> 
> 标签：servicestack, nlog

基本连线似乎很简单，但是我很难理解如何像往常一样配置 NLog。鉴于以下设置，我将如何设置配置以便将文本文件转储到文件夹中？

**应用主机：**

```
LogManager.LogFactory = new NLogFactory(); 
```

**在应用逻辑中：**

```
ILog log = LogManager.GetLogger(GetType());

log.InfoFormat("Something happened"); 
```

**一个配置文件，如：**

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
<targets>
<target name="console" xsi:type="ColoredConsole"
 layout="${date:format=HH\:mm\:ss}|${level}|${stacktrace}|${message}" />
<target name="file" xsi:type="File" fileName="${specialfolder:folder=ApplicationData}/logs/App.log"
 layout="${date}: ${message}" />
<target name="eventlog" xsi:type="EventLog" source="My App" log="Application"
layout="${date}: ${message} ${stacktrace}" />
</targets>
<rules>
<logger name="*" minlevel="Info" writeTo="file" />
<logger name="*" minlevel="Fatal" writeTo="eventlog" />
</rules> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T17:39:11.490

理想情况下，应该在 AppHost 初始化之前指定日志记录，因此 ServiceStack 中所有类的所有静态初始化器都使用配置的记录器，例如：

```
LogManager.LogFactory = new NLogFactory();
var appHost = new AppHost();
appHost.Init(); 
```

# linq-to-sql - SQL 函数的主键值

> ID：13294133
> 
> 赞同：2
> 
> 时间：2012-11-08T17:12:43.280
> 
> 标签：linq-to-sql

我在 SQL 中编写了一个用户定义的函数来生成用作主键的随机整数：

```
CREATE VIEW [dbo].[GetNewID]
AS
SELECT ABS(CAST(CAST(NEWID() AS VARBINARY) AS INT)) AS new_id;

CREATE FUNCTION [dbo].[RandomID] ()
RETURNS INT
AS
BEGIN
    DECLARE @new_id AS INT
    SET @new_id = (SELECT new_id FROM GetNewID)

    IF (SELECT COUNT(*) FROM Foo WHERE FooID = @new_id) != 0
        SELECT @new_id = [dbo].[RandomID]()

    RETURN @new_id
END; 
```

使用下表：

```
CREATE TABLE [dbo].[Foo] (
    [FooID] [int] PRIMARY KEY DEFAULT([dbo].[RandomID]()),
    [val] [varchar](32)
); 
```

使用 SQL 插入记录按预期工作。

但是，当尝试使用 LINQ 创建新记录时，出现以下错误：

> 无法将值 Null 插入列 id，列不允许空值

在我的 LINQ to SQL 模型`FooID`中，具有以下列属性：

```
[ColumnAttribute(Storage="_FooID", AutoSync=AutoSync.OnInsert, DbType="Int NOT NULL", IsPrimaryKey=true, IsDbGenerated=true)] 
```

如果我检查 LINQ 生成的 SQL，问题就很清楚了：

```
INSERT INTO [dbo].[Foo]([val])
VALUES (@p0)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [Testing] 
```

LINQ 正在尝试从将返回 null 的标识插入中获取最后一个值。

所以我想问题归结为：**我可以在 LINQ 中拥有一个不**使用基础 SQL 中的标识列的自动生成的主键属性吗？我可以采取另一种方法来产生相同的结果吗？

注意：我想避免更改应用程序代码。理想情况下，当我将现有表从使用线性增量主键更改为随机生成的表时，这应该可以正常*工作。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:54:57.977

在 DBML 设计器中，将该列的`Auto Generated Value`属性设置`true`为。这应该够了吧。

检查[这个帖子](http://www.intrepidstudios.com/blog/2009/2/6/using-default-values-in-linq-to-sql.aspx)，以及[MSDN 论坛中的这个线程](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/06bc58e9-5078-41a2-8c55-edff8467ba70/)

# c# - C# - 通过 FTP 写入文件 - 如何设置权限？

> ID：13294134
> 
> 赞同：0
> 
> 时间：2012-11-08T17:12:43.403
> 
> 标签：c#, unix, ftp

我编写了一个 .net C# 应用程序，它将文本文件写入 unix 机器，应用程序读取它。我的应用程序将文件很好地写入目标文件夹，但是 unix 应用程序抛出一个错误，说它没有读取文件的权限。
当我使用 WinSCP 发送文件时，我可以看到权限是 rwxrwxrwx。
当我的应用程序发送文件时，权限是 rw-r-----。
我想这就是原因。

这是我的代码：

```
public override void WriteFile(string directoryName, string fileName, string text) {
     sshExec.RunCommand(@"echo """ + text + @""" > " + directoryName + "/" + fileName);
} 
```

如何设置权限以便其他应用程序可以读取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:24:49.217

这不是 FTP，这是 SSH shell 的用法。您应该在您的命令中附加类似 "& chmod 777 " + directoryName + "/" + fileName 的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T17:29:43.627

您应该创建该文件，以便阅读用户帐户对该文件具有读取权限（因此阅读应用程序在该帐户下运行）。由于您没有指定更多详细信息，因此只能猜测需要什么。所以试试这个：

*   将文件创建为由创建文件的用户拥有
*   将文件创建为属于两个用户都属于的组，创建和读取用户帐户
*   创建具有权限的文件`rw-rw-r--`

最好的方法是让两个帐户都成为某个组的成员，并将该组作为主要组的创建用户。然后将该用户帐户`umask`设置为所需的权限掩码值。这样，如果需要，“阅读”应用程序也可以删除文件。当然，这只是一般的经验法则，因为您根本没有指定足够的详细信息来满足您的真正需求。

# javascript - 如何防止完整的模板重新渲染

> ID：13294135
> 
> 赞同：0
> 
> 时间：2012-11-08T17:12:45.723
> 
> 标签：javascript, mvvm, knockout.js

我在视图模型上使用此方法在普通模板和表格行的可编辑模板之间切换：

```
contactsViewModel.templateToUse = function (contact) {
         return contactsViewModel.selectedItem() === contact ? 'contacts-editTmpl' : 'contacts-itemsTmpl';
}; 
```

所以我调用这个方法而不是模板名称：

```
<tbody data-bind="template: { name: templateToUse, foreach: filterItems }"></tbody> 
```

它有效，但我非常担心每次我点击编辑时都会再次渲染整个列表：

```
contactsViewModel.edit = function (contact) {
       contactsViewModel.selectedItem(contact);
}; 
```

我希望它只更改 selectedItem 的模板，而不是其余的，但不知道如何去做。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:59:10.590

一种选择是仅`foreach`在您的上使用`filteredItems`，然后将`template`每行上的绑定与行级模板一起使用。

就像是：

```
<tbody data-bind="foreach: items">
    <tr data-bind="template: { name: $root.templateToUse }"></tr>
</tbody> 
```

视图模型如：

```
var ViewModel = function() {
    this.items = ko.observableArray([
        { name: ko.observable("one") },
        { name: ko.observable("two") },
        { name: ko.observable("three") }
    ]);

    this.selectedItem = ko.observable();

    this.templateToUse = function(item) {
        return item === this.selectedItem() ? "edit" : "view";   
    }.bind(this);
};

ko.applyBindings(new ViewModel());​ 
```

示例：http: [//jsfiddle.net/rniemeyer/3rvTA/](http://jsfiddle.net/rniemeyer/3rvTA/)

另一种选择是将“选定的”可观察对象移动到项目本身。如果您希望能够将多行置于编辑模式，这将很有效。

# cakephp - cakephp：由于使用“组”而无法进行分页

> ID：13294140
> 
> 赞同：0
> 
> 时间：2012-11-08T17:13:02.947
> 
> 标签：cakephp

我想通过使用“组”进行分页：

```
var $paginate = array(
        'Student'=>array(
                    'limit' => 20,
                    'fields'=>array('Student.id','Student.firstname','Student.lastname'),
                    'order' =>array('Student.id'=>'desc'),
                    //'group' => array('Student.type_id'),
                ),
        ); 
```

当我注释行“'group' => array('Student.type_id')”时，分页会很好，但是当我解锁这一行时，我只能从数据库中获取 20 个项目（与限制数相同），并且没有分页。

那么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:30:30.157

更新到 CakePHP 2.3（目前是测试版）并已修复。在此之前，您必须创建一些[书中详述的](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)自定义函数。

# mysql - 在 GWT 项目中，无法访问 mysql 中的本地数据库以及 Cloud SQL 上的数据库

> ID：13294145
> 
> 赞同：0
> 
> 时间：2012-11-08T17:13:13.240
> 
> 标签：mysql, gwt, access-denied

我正在做一个项目，我需要将数据从本地 mysql 数据库上传到 Cloud SQL 上的数据库。但是，当我运行我的 jsp 代码时，它会抛出一个异常，说访问被拒绝。如何在 GWT 中启用此类连接？

堆栈跟踪如下：

java.security.AccessControlException：在 java.security.AccessControlContext.checkPermission(AccessControlContext.java:374) 在 java.security.AccessController.checkPermission(AccessController.java: 546) 在 java.lang.SecurityManager.checkPermission(SecurityManager.java:532) 在 com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289) 在 java.lang.SecurityManager.checkPackageAccess(SecurityManager .java:1512) 在 org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:114) 在 org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66) 在 java.lang.Class。 java.sql.DriverManager 的 java.lang.Class.forName(Class.java:247) 的 forName0(Native Method)。getCallerClass(DriverManager.java:477) at java.sql.DriverManager.getConnection(DriverManager.java:576) at java.sql.DriverManager.getConnection(DriverManager.java:185) at org.apache.jsp.medcareDaemon_jsp._jspService(medcareDaemon_jsp .java:74) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.jasper.servlet。 JspServletWrapper.service(JspServletWrapper.java:377) at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) at com .google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23) 在 com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59) 在 java.security.AccessController.doPrivileged(Native Method) at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org. mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 在 com.google.appengine.api.socket.dev。 DevSocketFilter.doFilter(DevSocketFilter.java:74) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java: 123）在 com.google.appengine.tools.development 的 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)。HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter. java:61) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay .jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain .doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97）在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security .SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94) 在 org.mortbay.jetty.handler.HandlerWrapper。 org.mortbay.jetty.handler 的 com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383) 的句柄（HandlerWrapper.java:152）。HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty .HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547) 在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) 在 org. mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java: 582) 2012 年 11 月 8 日晚上 10:09:32 com.google.apphosting.utils.jetty.JettyLogger 警告HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547) 在 org.mortbay .jetty.HttpParser.parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 2012 年 11 月 8 日晚上 10:09:32 com.google.apphosting.utils.jetty.JettyLogger 警告HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547) 在 org.mortbay .jetty.HttpParser.parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 2012 年 11 月 8 日晚上 10:09:32 com.google.apphosting.utils.jetty.JettyLogger 警告parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在 org.mortbay.thread .QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 2012 年 11 月 8 日晚上 10:09:32 com.google.apphosting.utils.jetty.JettyLogger 警告parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在 org.mortbay.thread .QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 2012 年 11 月 8 日晚上 10:09:32 com.google.apphosting.utils.jetty.JettyLogger 警告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:53:59.567

您的项目中似乎也启用了 appengine sdk。在 appengine 上，您不能自己打开套接字，但有一些服务可以做到这一点。这就是为什么 sdk 会检查您的代码是否违反应用引擎规则并让它在开发过程中失败。

如果您打算在应用程序引擎上运行，您将需要找到另一种方式（http 服务）。否则，只需在您的项目中禁用应用引擎 sdk。这是一篇关于如何做到这一点的博客文章：http: [//mangigo.wordpress.com/2010/06/19/gwt-remove-app-engine-when-you-dont-use-it/](http://mangigo.wordpress.com/2010/06/19/gwt-remove-app-engine-when-you-dont-use-it/)

# asp.net-mvc - 如何覆盖实体框架验证错误消息

> ID：13294151
> 
> 赞同：0
> 
> 时间：2012-11-08T17:13:31.170
> 
> 标签：asp.net-mvc, entity-framework-4, viewmodel, modelmetadata, data-annotations

我有一个支持多个 ASP.NET MVC Web 应用程序的实体框架 4.1 模型。我使用 DataAnnotations 来定义和本地化标签文本和验证规则以及错误消息。

对于某些应用程序，我需要某些字段的标签文本不同于标准的模型定义文本。对于标签本身来说，这很容易实现：我从与视图关联的本地资源文件中检索我需要的文本。但是，标签文本也用于验证错误消息，例如“{fieldname} 的最大长度必须为 50 个字符”。

在不更改模型类上的注释的情况下更改验证消息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:55:15.460

尝试针对特定情况重新定义控制器中的错误消息，如下所示：

模型：

```
public class Company
    {
        [Required(ErrorMessage = "The field is required")]
        public string CompanyName { get; set; }
        public string Address { get; set; }
    } 
```

控制器：

```
 [HttpPost]
        public ActionResult Index(Company company)
        {
            if(ModelState.IsValid)
            {
                //your code
            }

            // your custom validation message here
            if (ModelState["CompanyName"].Errors.Any())
                ModelState["CompanyName"].Errors[0] = new ModelError("custom error message");

            return View();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:18:50.980

您已将验证与实体模型相结合。避免这种情况的方法是从您的实体创建视图模型并对其进行验证。

示例：如果您有实体...

```
public class Product
{
    public string Name {get; set;}
} 
```

您可以创建两个不同的视图模型：

```
public class ProductPageViewModel1
{
    [Required]
    public string Name {get; set;}
}

public class ProductPageViewModel2
{
    [DisplayName("Foo")]
    public string Name {get; set;} 
```

}

将实体映射到视图模型并在您的视图中使用它们。

# debian - Qemu 不会在 x86_64 上为 PPC 启动 debian 压缩

> ID：13294153
> 
> 赞同：2
> 
> 时间：2012-11-08T17:13:34.870
> 
> 标签：debian, emulation, qemu, powerpc

我已经为 ppc 下载了 qemu，我还从[http://people.debian.org/~aurel32/qemu/powerpc/](http://people.debian.org/~aurel32/qemu/powerpc/)下载了一个用于 ppc 的 debian sqeeze 映像。

根据该页面，当我尝试使用

```
qemu-system-ppc -hda debian_squeeze_powerpc_desktop.qcow2 
```

它给了我以下错误： qemu: could not load PowerPC bios '/c/Program Files/Qemu/ppc_rom.bin'

然后我添加了 -L 选项以指向包含我之前从 takeda toshiya qemu powerpc 网页下载的 bios 的目录（使用“takeda toshiya qemu powerpc”进行快速谷歌搜索将其作为第一个链接）

该 zip 文件在解压缩时会创建一个包含内核和 ppc BIOS 的文件夹。

然后我 cd 到该文件夹​​并执行： ./qemu-system-ppc.exe -L 。-hda ../debian_squeeze_powerpc_standard.qcow2

它会启动一个新窗口（基本上是一个外壳），在其中我看到有很多错误，如这个 PNG 图像所示（因为我不能只抓取文本）： [https ://docs.google.com/ open?id=0B8b-P7UIzX09QTNSeGJ6OHhRdk0](https://docs.google.com/open?id=0B8b-P7UIzX09QTNSeGJ6OHhRdk0)

然后当我关闭窗口时，我看到无效/不受支持的操作码：00 - 00 - 00 (00000000) 0x004f4000 1

请让我知道我做错了什么。

# java - 在网格上查找四边形相交的算法

> ID：13294154
> 
> 赞同：1
> 
> 时间：2012-11-08T17:13:35.847
> 
> 标签：java, algorithm

这是我的问题。

我的游戏，为了高效的渲染和碰撞被划分为区域。每个区域中都会有许多动态移动的对象。当他们移动时，我需要一种方法来快速确定他们所在的区域。

一个对象永远不能比一个区域更长或更宽。因此，它永远不能同时出现在超过 4 个区域中。

棘手的部分是对象的矩形是使用 2D 中的分离轴定理的定向边界框，因此它们可以旋转。

我想到的主要方法是确定每个点的区域：

```
static public int colFromPos(float startX,float width, float x)
{
    x -= startX;
    return (int)Math.floor(x / width);

}

static public int rowFromPos(float startY,float height, float y)
{
    y -= startY;
    return (int)Math.floor(y / height);

} 
```

这似乎相当快。

我想到了几种方法来做到这一点：

> 1.  我生成 OBB 的边界矩形并找到该矩形的 4 个区域。这里的缺点是必须进行进一步的测试以确定对象是否真的在其中。
> 2.  我确定 OBB 的每个角和每个中点的区域。

有没有更好、更快的方法来解决这个问题？我的任何一个解决方案都是好主意吗？

谢谢

![在此处输入图像描述](../Images/21430e64431956193d2883250994ac37.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:16:49.360

确定包含 OBB 的每个顶点的区域。

如果所有四个都在同一区域，则返回该区域。

如果所有四个都在共享 X 坐标或共享 Y 坐标的一对区域中，则返回该对区域。

如果它们位于四个不同的区域，则返回该组的四个区域。

如果这些条件都不适用，则您有两个不同的区域 X 坐标和两个不同的区域 Y 坐标，定义了在单个顶点 V 处相遇的一组四个区域。

如果 V 在 OBB 内，则返回所有四个区域。

如果 V 在 OBB 之外，并且 OBB 顶点位于三个不同的区域中，则返回这三个区域。

剩下的情况是一对对角相邻的区域包含OBB的顶点，V在OBB之外。选择连接不在同一区域中的顶点的 OBB 的一侧。返回两个包含顶点的区域，以及该线穿过的第三个区域。

我还没有解决例如 V 完全站在 OBB 一边的问题。这些情况的处理取决于程序约定。

# php - PHP 构建层次结构集，然后从第二个表中插入数据

> ID：13294155
> 
> 赞同：0
> 
> 时间：2012-11-08T17:13:36.347
> 
> 标签：php, mysql

两个月以来，我一直试图解决这个问题，但没有找到解决方案。我可以找到大量使用递归函数为我的类型表构建数据的信息，但对于我的实际数据表却没有。我可能使用了错误的术语。我想补充的是，这不是为了构建菜单，而是为了将动态表单构建到部分中。

如果我删除父列，我可以让事情正常工作，但我需要额外的级别。

这些是测试表

```
types
=====
id  name        parent
1   module1     0
2   module2     0
3   component1  1
4   component2  1
5   component3  2
6   component4  2

items
=====
id  name        type_id
1   item1       3
2   item2       3
3   item3       4
4   item4       4
5   item5       5
6   item6       5
7   item7       6
8   item8       6 
```

我试图达到的结果

```
desired output
==============

module1
    component1
        item1
        item2
    component2
        item3
        item4
module2
    component3
        item5
        item6
    component4
        item7
        item8 
```

这种问题有什么解决办法吗？表更改、链接或示例？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:50:05.580

您可以使用[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)来表示层次结构。这样，您就可以取消递归调用。

您可以做的另一件事是创建一个额外的表来处理具有传递闭包的“is-a-child”关系，即您拥有节点之间的*所有* `is-a-descendant-of`关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:51:38.327

以下查询不起作用还是我误解了您的问题？

```
SELECT
    t2.`name` AS 'module',t1.`name` AS 'component',i.`name` AS 'item'
FROM (SELECT * FROM `types` WHERE `parent`>0)  t1
INNER JOIN `types` t2 ON t1.`parent`=t2.`id`
LEFT OUTER JOIN  `items` i ON i.`type_id`=t1.`id` 
```

**编辑：**更改`WHERE `parent`!=0`为`WHERE `parent`>0`，因为默认情况下 id 将大于 0（并且通常 - 除非明确设置 - 负整数是无效的 id）。

# android - 在 Android 应用上使用 Foursquare API

> ID：13294160
> 
> 赞同：1
> 
> 时间：2012-11-08T17:13:49.993
> 
> 标签：android, foursquare

我想在他们登录我的应用程序后获取用户的数据（签到、朋友等）。

我使用的[代码](https://github.com/foursquare/android-oauth-example/tree/master/workspace/android-oauth-example/src/com/foursquare/android/oauth) 与我的应用程序或多或少相同。

我不明白一些事情：

1.  回调地址是什么？我可以选择任何网站吗？
2.  我可以获取访问令牌，现在如何获取用户数据？
3.  保存这些数据的最佳选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:54:17.567

您引用的示例代码用于使用[令牌流连](https://developer.foursquare.com/overview/auth)接到foursquare 。它用于没有自己的服务器的应用程序，因此您不需要拥有自己控制的网站。您注册的重定向 URI 可以是假 URL，用户将在 web 视图中重定向到该 URL，此时您可以从 URL 中提取访问令牌。

如果您确实拥有自己控制的网站，则首选的连接方法是访问代码流。在这种情况下，回调 url 必须是您控制的网站。此流程的优点是您的客户端密码不需要与您的应用程序一起分发，因此攻击者无法从应用程序中提取您的密码并使用它来验证用户身份。

获得令牌后，您将能够使用[api 端点](https://developer.foursquare.com/docs/)以及访问令牌代表用户发出请求。

# asp.net-mvc - 带有 WebAPI 的 OAuth / OpenId MVC 4 应用程序

> ID：13294162
> 
> 赞同：0
> 
> 时间：2012-11-08T17:14:00.540
> 
> 标签：asp.net-mvc, asp.net-web-api, oauth-2.0

我一直在查看 DotNetOpenAuth 示例并阅读有关该主题的内容，但对于保护我的特定环境的实际要求仍然有些模糊。我看过的许多示例也会引发异常，从而使代码运行变得有点偶然。

我有一个使用 WebSecurity 和 OAuthWebSecurity 类的 MVC Web 应用程序，这为应用程序提供了使用本地帐户或 OpenID 提供程序帐户的登录名。该系统还有一个单独的网站和解决方案中的 WebAPI。

该系统有两个数据库，一个用于安全，一个用于数据。MVC Web 应用程序仅与安全数据库有直接链接，而 Api 与安全数据库和数据数据库有连接。与数据数据库的所有交互都将通过 WebApi 进行。

我想做的是保护 Api。

我不确定与 OAuth 相关的术语来描述 Api。是资源服务器授权/身份验证服务器合二为一吗？有时它似乎也将成为依赖方。

Api 也将由 3rd 方应用程序代表用户使用，因此我还需要一个 API 密钥来进行应用程序身份验证。用户和应用程序将完全由 Api 登录。

任何关于需要做什么的澄清将不胜感激。

# sql - 如何从庞大的用户群中有效地跟踪登录用户的数量

> ID：13294164
> 
> 赞同：0
> 
> 时间：2012-11-08T17:14:03.933
> 
> 标签：sql, database

如果您拥有一百万用户的游戏用户群，但只希望有十几个用户同时登录，那么如何最好地构建事物以便您可以在您的网站上显示活跃用户的数量？你不想（我认为）做一个幼稚的`SELECT count(*) FROM users WHERE logged_in = 1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:18:10.643

我会维护一个`logins`表，每当用户登录时添加到该表中，当用户注销时，删除该条目。该表也可能有一个到期时间，因此您可以考虑登录超时和查询，例如：

```
SELECT COUNT(*) FROM dbo.Logins WHERE LoginExpiry < GETDATE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:18:34.780

两件事情。**首先，在logged_in**列上放置一个索引。其次，我假设这只是一个错字（缺少选择列），如果您只需要一个计数，这就是您的查询：

```
select count(*) from users were logged_in = 1 
```

您**可以**保留一个单独的统计表来跟踪您想要快速访问的任意数量的聚合。这根本不是一个坏主意。但是，添加索引应该让这个特定的查询非常快。一旦您开始需要定期报告其他汇总用户统计信息，请为此目的构建统计信息表。

请记住，如果/当您走这条路时，您的统计数据表通常会非常简单：

```
stat_id : int
name : varchar
int_value : int
float_value : float 
```

然后，每次登录只需要...

```
update stats set int_value += 1 where name = 'logged_in_users'; 
```

并且每次注销都需要...

```
update stats set int_value -= 1 where name = 'logged_in_users'; 
```

并且可能是一项自动注销用户并定期“重建”统计数据表的工作。

# jquery - 通过jquery ajax提交传递复选框

> ID：13294165
> 
> 赞同：3
> 
> 时间：2012-11-08T17:14:07.723
> 
> 标签：jquery, ajax, checkbox

**问题解决了**

我已经搜索了几个信息来源来寻找此类问题。但是没有确切的解决方案。问题是我无法使用 ajax 将复选框值传递给 div id。它一直在父窗口中打开。这是我的代码。

**Javascript：**

```
<script type="text/javascript">
$(document).ready(function() {  
    $("#villa_submit").click(function() {   
        var action = $("#villa_choose").attr('action');
//var form_data = { 'vid[]' : []};$("input:checked").each(function() {data['vid[]'].push($(this).val());});
var form_data = $('#villa_choose').serialize();  //suggested by Kev Price 
        $.ajax({
            type: "POST",
            url: action,
            data: form_data,
            beforeSend:function(){
                $('#villa_result').html('<center><img src="/images/loading.gif" alt="Loading..." align="absmiddle"/> loading...</center>');
              },
            success: function(data){
                  $('#test_result').html(data);
            }
        });     
        return false;
    }); 
});
</script> 
```

**HTML：**

```
<form name="villa_choose" id="villa_choose" method="post" action="">
<input type="checkbox" name="vid[]" id="vid1" value="1" />
<input type="checkbox" name="vid[]" id="vid2" value="2" />
<input type="checkbox" name="vid[]" id="vid3" value="3" />
<input type="checkbox" name="vid[]" id="vid4" value="4" />
<input type="checkbox" name="vid[]" id="vid5" value="5" />
</form>

<div id="test_result"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:16:48.100

您有多个`<input>`具有相同`id`属性的元素。这是不允许的，`id`在文档中必须是唯一的。修复它，然后重试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T17:23:43.573

一旦你解决了 Madbreaks 建议的问题，你可以在你的 jquery 中将复选框值放入这样的数组中

```
`var values = $("input[type='checkbox']:checked").map(function () {
    return this.value;
}).get();` 
```

 ```values` will be an array that you can pass with ajax like this

```
var data = 'checkbox="'+values+'"';
$.ajax({
    url: "process.php",
    type: "GET",
    data: data,
    cache: false,
    success: function (html) {
        ... // change html on return
    }

});

```` 

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-04T09:48:14.820

var data = $("#villa_choose").serializeArray();

$.ajax({

网址：“process.php”，

类型：“获取”，

数据：数据，

缓存：假，

成功：函数（html）{

})

});`

# url - 将搜索链接添加到 Google 站点地图

> ID：13294174
> 
> 赞同：0
> 
> 时间：2012-11-08T17:14:35.750
> 
> 标签：url, seo, sitemap

我们的 CMS 有这样的标签系统 URL： .../articles/category?tag=186

对SEO不友好...

而不是将它们破解成对 SEO 友好的 URL (/tag/politics/) ...

我有一个想法：

1）不允许：/articles/category？（机器人.txt）

2) 将搜索 URL 添加到我们的站点地图：

.../search?query=politics [与 tag=politics 几乎相同]

我不是在询问 URL 中的参数 (query=politics)，我知道这并不理想。

但除此之外，这是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:02:07.800

我不建议将搜索 URL 添加到站点地图；您正在打开一个低价值和重复内容的潘多拉魔盒。我之前在各种网站上已经多次看到这种情况。G 明确建议您只向站点地图添加干净、完整（即不是可变/动态搜索/过滤结果）。

如果 G 蜘蛛看到这种形式的 URL 被明确要求编入索引，它们可能会开始编入您最初不想要的大量它们的索引，这会使您的问题变得更糟，而不是更好。

老实说，您最好通过一些 mod_rewrite 和 httpd.conf 工作（如果您使用的是 Apache）来修改 URL，即使在初始阶段需要更多的努力。

# php - 在选项值组合框中张贴撇号导致截断

> ID：13294175
> 
> 赞同：0
> 
> 时间：2012-11-08T17:14:38.310
> 
> 标签：php, post, apostrophe

如果选项值组合框中的已发布值包含撇号，我会遇到问题。该值在撇号处被截断。这些值来自一个带有撇号的数据库。

我理解为什么会发生这种情况，但我不知道如何解决它。有任何想法吗？提前致谢。

```
echo "<tr><td>Location:</td>";
while($row = mysql_fetch_assoc($result)) {
  $dropdown_location .= "\r\n<option value='{$row['location']}'>{$row['location']}</option>";
}

$dropdown_location .= "\r\n</select>";
echo "<td>" . $dropdown_location . "</td> </tr>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:39:43.307

您可以使用 php heredoc 来混合 html、字符串、php 变量等：

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
$content .= <<< END
 <tr><td>Location:</td>
END;

while($row = mysql_fetch_assoc($result)) {

$dropdown_location .= <<< END
     <option value="$row[location]">$row[location]</option>
END;
}

$content .= <<< END

 <td><select name="location">$dropdown_location</select></td></tr>

END;

echo $content; 
```

请注意，在包含 END 和 END 的行之后，建议不要有任何空闲空间；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:19:02.733

您的代码非常混乱，并且您不清楚您的问题是否在发布或检索数据时遇到问题，在将数据`mysqli_real_escape_string()`发布到数据库之前，始终使用转义引号，并清理您的数据，此外停止使用`mysql_()`，使用`mysqli_()`或`PDO`因为`mysql_()`不再由 PHP 社区维护..

[**在这里**](http://www.php.net/manual/en/function.mysql-affected-rows.php)阅读大红框[](http://www.php.net/manual/en/function.mysql-affected-rows.php)

 **而是使用这些[mysqli_()](http://www.php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:16:27.173

你可以试试 htmlspecialchars 吗？这应该让你做你想做的事。

[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)**

# c# - 数据包嗅探和修改

> ID：13294179
> 
> 赞同：0
> 
> 时间：2012-11-08T17:14:45.360
> 
> 标签：c#, packet, winpcap

首先，我为什么需要它？我有 Wifi 网络。我希望每个刚连接到 wifi 的人首先重定向到登录页面，然后如果登录成功 - 重定向到请求的页面。我想用 PCap 来做到这一点。但由于 WinPCap 只允许监视数据包，我无法阻止数据包被发送到目标主机。所以问题是我如何嗅探数据包并更改它的内容？一开始我只想从指定的网络适配器捕获 HTTP 数据包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:20:29.950

这真的很难按照您描述的方式进行 - 在“数据包级别”上执行此操作会出现几个问题（其中包括性能问题！）。

为了实现你想要的，你有几个更简单、更合适的选择：

*   使用处理认证部分的代理

*   建立一个代理（参见[C](https://stackoverflow.com/a/8113066/847363) # 源代码等）

对于基于代理的选项，您只需要以所有出站流量都必须使用该代理的方式配置网络...

# c# - C# 中的 java.lang.Long

> ID：13294181
> 
> 赞同：0
> 
> 时间：2012-11-08T17:14:46.857
> 
> 标签：c#, java, types

我正在开发一个从 Android 应用程序接收数据的 WCF JSON Web 服务。

某些数据可能为空。在 Android 上我使用[java.lang.Long](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html)，可能是`null`.

在 C#side 上，我正在使用`long`that could't be `null`.

`java.lang.Long`C#中有类型吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T17:16:00.040

听起来你想要一个`Nullable<long>`or `long?`。

```
long? myLongVar = null;
if (myLongVar == null) // or !myLongVar.HasValue, if you prefer
{
    myLongVar = 5L;
    long noLongerNullable = myLongVar.Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:16:13.443

`Nullable`在 C# 中使用类型

```
Long? x;//by default x is now null..you can now assign null to it 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:16:49.400

你应该使用`long?`aka`Nullable<long>`

# entity-framework - 使用 EF 插入和更新合并

> ID：13294183
> 
> 赞同：1
> 
> 时间：2012-11-08T17:14:56.423
> 
> 标签：entity-framework, entity-framework-4

我正在使用 sql azure 作为存储。

我有一个包含新旧记录的数据集（实体列表）。我无法确定要更新或插入的记录。我需要一种使用 EF 将整个内容发送到 db 的方法，使用一些语句来确定如何处理它（意味着更新或插入）

我已经能够使用对象上下文找到合并，但它不符合我的目的。

如果有什么不清楚的，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:14:02.497

这里有几个选项，但在所有选项中，EF 必须以某种方式知道哪些实体是新的，哪些是旧的。

*   让 EF 进行更改跟踪。也就是说，从同一个上下文实例中查询和保存。这是显而易见的答案，我不会说太多，因为我假设您的架构不允许这样做，或者您不会问这个问题。
*   具有实体的某些特征，可以让您知道它是旧的还是新的。如果您不能使用 EF 更改跟踪，这是迄今为止最常见的做法。通常这是使用主键值来完成的——对于新实体来说是零/负数/null，对于旧实体来说是其他所有值。
*   查询每个实体的数据库以查看它是否存在。

# python - PyYAML 可以解析 iso8601 日期吗？

> ID：13294186
> 
> 赞同：6
> 
> 时间：2012-11-08T17:15:10.607
> 
> 标签：python, timezone, iso, pyyaml

[根据 YAML 规范，应识别带时区的 iso8601 日期](http://yaml.org/type/timestamp.html)。但是，在尝试使用 PyYAML 3.10（在 Windows 7 上使用 ActivePython 2.7.2.5）解析它们时，我得到了天真的日期：

```
In [7]: yaml.load("2001-12-14t21:59:43.10-05:00")
Out[7]: datetime.datetime(2001, 12, 15, 2, 59, 43, 100000)

In [8]: yaml.load("2001-12-14 21:59:43.10 -5")
Out[8]: datetime.datetime(2001, 12, 15, 2, 59, 43, 100000) 
```

（第一种格式是严格的 iso8601，第二种是“宽松”格式；示例直接取自 YAML 规范。）

这是预期的行为，还是我的 PyYaml 无法正常工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T18:46:15.437

如果您不喜欢默认行为（天真 utc 日期时间、utc 偏移量丢失），您可以提供自己的构造函数：

```
import dateutil.parser
import yaml

def timestamp_constructor(loader, node):
    return dateutil.parser.parse(node.value)
yaml.add_constructor(u'tag:yaml.org,2002:timestamp', timestamp_constructor)

print(repr(yaml.load("2001-12-14T21:59:43.10-05:00")))
# -> datetime.datetime(2001, 12, 14, 21, 59, 43, 100000, tzinfo=tzoffset(None, -18000)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-17T12:51:31.777

这是从 pyyaml 5.3 ( [Github Pull Request](https://github.com/yaml/pyyaml/pull/163) )开始修复的

```
>>> yaml.safe_load('2020-12-17t14:40:00+02:00')
datetime.datetime(2020, 12, 17, 14, 40, tzinfo=datetime.timezone(datetime.timedelta(seconds=7200))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-08T19:45:15.847

从 YAML 文件加载数据库设备时，这也会影响 Django。有一个特定于 Django 的解决方法；请参阅：[Loaddata 未正确处理时间戳和时区](https://stackoverflow.com/questions/12462634/loaddata-not-dealing-with-timestamps-and-timezones-properly)

# ruby-on-rails - Rails：如何安全地存储邮件密码？

> ID：13294194
> 
> 赞同：24
> 
> 时间：2012-11-08T17:15:41.027
> 
> 标签：ruby-on-rails

嗨，我在 heroku 和 github 上有我的 rails 应用程序，目前在我的应用程序中使用邮件程序：

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :user_name            => "myemail@gmail.com",
  :password             => "PasswordShouldGoHere",
  :authentication       => "plain",
  :enable_starttls_auto => true
} 
```

我不希望我的电子邮件和密码在我的 github 帐户上可见，因为人们可以登录并窃取我的信息。但是，如果我输入了一个假密码，那么当邮件程序应该发送时，我的应用程序会在 heroku 上给我一个错误。我知道我可以先将真实的电子邮件和密码推送到 heroku，然后对其进行编辑并将假密码放在我的 github 帐户中，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-08T19:22:24.103

就像其他人说的那样，您可以通过使用`ENV`变量来实现这种安全性。这是如何做到的：

```
config.action_mailer.smtp_settings = {
  user_name: ENV["MAILER_EMAIL"],
  password: ENV["MAILER_PASSWORD"]
} 
```

现在，在**生产**环境（Heroku）中，您所要做的就是[遵循本指南](https://devcenter.heroku.com/articles/config-vars#setting-up-config-vars-for-a-deployed-application)。它基本上相当于打开您的控制台并输入以下内容：

```
heroku config:set MAILER_EMAIL=email@example.com MAILER_PASSWORD=password 
```

在**开发**中，您可以在 config/initializers 文件夹中创建一个文件，其名称为`app_env_vars.rb`. 在其中放置以下内容：

```
ENV['MAILER_EMAIL'] = 'email@example.com'
ENV['MAILER_PASSWORD'] = 'password' 
```

为了防止这个新创建的文件被推送到您的源代码管理中，您应该将它添加到您的`.gitignore`：

```
/config/initializers/app_env_vars.rb 
```

但是，有一个问题，因为初始化文件只在环境之后加载，所以还有最后一件事要做。转到您的文件并在**之前**`environment.rb`添加以下内容：**`Yourapp::Application.initialize!`**

 **```
# Load the app's custom environment variables here, before environments/*.rb
app_env_vars = File.join(Rails.root, 'config', 'initializers', 'app_env_vars.rb')
load(app_env_vars) if File.exists?(app_env_vars) 
```

你完成了！

但是，如果您觉得所有这些配置都很麻烦，那么我建议您使用[Figaro gem](https://github.com/laserlemon/figaro)。它完成了我所描述的一切，甚至更多！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T17:32:34.183

我建议使用[figaro gem](https://github.com/laserlemon/figaro)来管理配置设置。它用于`ENV`存储设置，这正是 Heroku 上的应用程序的配置方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:40:55.200

看看这个[Rails 应用程序教程](http://railsapps.github.com/tutorial-rails-devise-rspec-cucumber.html)。

“使用 Gmail 帐户”部分显示了此示例配置：

```
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  domain: "example.com",
  authentication: "plain",
  enable_starttls_auto: true,
  user_name: ENV["GMAIL_USERNAME"],
  password: ENV["GMAIL_PASSWORD"]
} 
```

`~/.bashrc`并建议在您的服务器上设置变量：

```
export GMAIL_USERNAME="myname@gmail.com"
export GMAIL_PASSWORD="secret*" 
```

如果应用服务器没有从`~/.bashrc`. 这在很大程度上取决于您的应用服务器是什么。**

# html - 图像下推无序列表

> ID：13294195
> 
> 赞同：-1
> 
> 时间：2012-11-08T17:15:43.957
> 
> 标签：html, css

我正在努力实现这一目标：

![我得到了什么](../Images/c5d52815f6ba3ff53e59709e7a9d4732.png)

但我得到了这个：

这是我的代码：

```
<ul id="quicklinks-main">
<li>Quick Access to Your Pharmacy Needs:</li>
<img id="refillBttle" src="images/prescription-refill-bottle.png" alt="prescription pills" />
<li><a id="quicklinks-refill-icon" href="#">Prescription Refills</a></li>
<li><a id="quicklinks-drug-center-icon" href="#"><span>Drug Information Center</span></a></li>
</ul> 
```

当我添加图像时，它会将列表的其余部分向下推并弄乱。我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:19:18.243

尝试将 img 包裹在一个新的 li 中

你可以在这里看到一个例子： [http ://www.cvs.com/](http://www.cvs.com/)

# c++ - 替换无效*

> ID：13294197
> 
> 赞同：5
> 
> 时间：2012-11-08T17:15:55.157
> 
> 标签：c++

我有真正的消息类，例如

```
class Specific1Message {
   //various functions to get different types of data
};

class Specific2Message {
   //various functions to get different types of data
}; 
```

这是我无法改变的。

我正在重新编写一个对这些消息进行编码和解码的软件工具。它决定在运行时解码/编码哪些消息。

从文本文件中检索到大量特定消息，以便重播以模仿真实系统。消息临时存储在 std::list 中。为了使新/删除生命周期更加健壮，我被要求使用智能指针。

我对消息的第一个想法是做这样的事情：-

```
class proto_msg : public ref_type {
 public:

} 
```

//ref_type 是一个智能指针类

```
class Specific1msg : public proto_msg {
   public:

  Specific1Message m_msg;  //instance of specific 1 message - composition
}; 
```

但是我的工具中有函数，它以 proto_msg* 作为参数。所以我在想，要获得 Specific1Message （例如）我会这样做：

```
int SpecificMessageHandler::EncodeMsg(proto_msg* msg, unsigned char* buffer, int size) 
```

但是那么如何检索一个 Specific1Message 呢？msg->GetMsg() - 但是如何定义这个方法呢？它会返回什么？

我需要在基类中定义 GetMsg()。但是返回类型是什么？这是我想不通的？或者也许我需要重新考虑。

编辑感谢您的所有回复。我了解了多次调度等等。

最后我决定这样做：-

```
class realproto {
public:
   const char* getName() const { return "realproto"; }
}; 

class real2ndproto {
public:
   const char* get2Name() const { return "real2ndproto"; }
}; 

template<typename T>
class ProtoWrapper : public ref_type {
public:
   ProtoWrapper(T* real) : m_msg(real) {}
   ~ProtoWrapper() { delete m_msg; }  //cannot have smart ptr on real_proto - so do this way

   T* getMsg() { return m_msg; }

private:
   T* m_msg;
}; 
```

然后像这样调用

```
 ref_ptr<ProtoWrapper <realproto> > msg2 = new ProtoWrapper<realproto>(new realproto);

  realproto* pr1 = msg2->getMsg(); //if need underlying protocol 
```

这有望让我以最少的代码更改来删除 void* 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:25:45.597

我能想到的唯一选择是模板+双重调度

```
class proto_msg : public  ref_type{
   public:
      virtual int call_encode (SpecificMessageHandler*, unsigned char* buffer, int size) = 0;
};

template <class M>
class SpecificMesssageTpl : public  proto_msg
 {
   public:
      int call_encode (SpecificMessageHandler* handler, unsigned char* buffer, int size)
      {
          return handler->EncodeMsgSpecific (m_msg, buffer, size);
      }

private:
  M m_msg;  //instance of specific 1 message - composition
};

class SpecificMessageHandler
{
public:
    int SpecificMessageHandler::EncodeMsg(proto_msg* msg, unsigned char* buffer, int size)
   {
        return msg->call_encoder (this, buffer, size);
   }

   int SpecificMessageHandler::EncodeMsgSpecific(Specific1Message * msg, unsigned char* buffer, int size)
   {
    // encode Specific1Message 
   }

   int SpecificMessageHandler::EncodeMsgSpecific(Specific2Message * msg, unsigned char* buffer, int size)
   {
     // encode Specific2Message 
   }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:45:18.100

没有一大堆干净、简单的方法可以做到这一点。但是有一些可能性，如果你愿意在稍微不优雅的代码上妥协的话。

`proto_msg`好吧，像这样更新怎么样：

```
class proto_msg : public ref_type
{
public:
    virtual int message_type() = 0;
} 
```

它的子类更新如下：

```
class Specific1msg : public proto_msg
{
public:
    static const int message_id = 1;
    virtual int message_type() { return message_id; }
    Specific1Message m_msg;  //instance of specific 1 message - composition
}; 
```

然后您可以使用 if 语句来选择处理程序：

```
// proto_msg a_message;

if (a_message.message_type() == Specific1msg::message_id)
{
    Specific1msg specific_message = (Specific1msg)a_message;
    // do something with specific_message.msg
} 
```

事实上，C++ 确实以运行时类型信息或 RTTI 的形式支持一些简单的自省功能。默认情况下，这不一定会编译到您的二进制文件中；它可能需要额外的编译器标志（`-frtti`在 GNU 领域）。RTTI 让您可以`dynamic_cast`用来执行类型转换操作，在该操作中可以优雅地处理故障。

```
// proto_msg* a_message

Specific1Message* specific_message = dynamic_cast<Specific1Msg*>(a_message));

if (message != nullptr)
{
    // Do something with specific_message.msg
} 
```

等等。还有很多其他方法可以做到这一点，我认为总的来说我更喜欢 Aleguna 的双重调度模板魔法，但这种机制应该非常简单明了，任何人都可以掌握！

未经测试、未编译、E&OE 等的代码；-)

# drupal - 我可以使用 chef 作为 PaaS 部署协调器来部署多个 drupal 站点吗？

> ID：13294198
> 
> 赞同：1
> 
> 时间：2012-11-08T17:15:58.840
> 
> 标签：drupal, deployment, chef-infra, cookbook

*“在问这个愚蠢的问题之前，我确实道歉”*

所以，我的想法是：

*   厨师服务员
*   N 个节点

在每个节点上；我将定义一个基本角色；像“NodeRole”，它将有 apache、php、mysql

然后，我希望能够部署“à la demande”多个虚拟主机，每个虚拟主机都包含完整的drupal 安装。

所以这个新角色将具有一些属性，例如：

```
"username"
"password"
"URL" 
```

当“部署”这个时；它会 ：

```
- Add an entry to apache virtual host configuration
- Create a user account with provided password
- Create a database user with provided password
- Install drupal with the provided credentials 
```

我怎样才能“动态地”做到这一点，而不必每次我想部署一个新站点时都创建一个 txt 文件。

是否可以与厨师服务器 api 交互并说出类似“部署 www.example.com john mypassword”的内容？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:35:57.637

Chef 是一个拉模型，由客户请求他们的配置。如果您想推动，则必须注入其他东西才能做到这一点。一个命令调度程序，可以在需要时调用客户端与服务器联系。

如果你想一遍又一遍地做同样的事情，感觉就像创建一个 LWRP [http://wiki.opscode.com/display/chef/Lightweight+Resources+and+Providers+(LWRP](http://wiki.opscode.com/display/chef/Lightweight+Resources+and+Providers+(LWRP) ) 可能是你最好的选择。然后，您可以将您拥有的变量传递给它，这样代码就不需要复制 X 次。

如果您不想为每次安装创建新配方，另一种选择是在属性对象中使用 JSON 混搭功能并循环通过创建安装的对象集合。这种方式是数据驱动的，但我个人希望每次安装使用不同的配方，因为它可能对查看运行列表的人更透明。

使用属性 mash 的示例如下所示。您也可以使用数据包来实现这一点。在这种情况下，您可以更新文件中的 JSON 表示并使用刀上传或在 UI 中进行更改。我再次推荐每个站点的食谱以提高透明度，但这会导致代码/更新运行列表等

您的属性 json 对象看起来有点像这样或类似

```
"drupal_Sites" : {
    "site1": { "username": "dave", "password" :"password123", "URL":"www.madeup.com" },
    "site2": { "username": "dave2", "password" :"password12", "URL":"www.madeup2.com" }
} 
```

然后在你的食谱中会是这样的

```
node["drupal_sites"].each do | site | 

Install = yourdrupalcookbook_InstallResource "#{site['URL']}" do
    username site['username']
    password site['password']
    deploy site['URL']
    action :nothing 
    provider "yourdrupalcookbook_InstallProvider"
end

Install.run_action(:create) 
```

结尾

# javascript - 在jQuery中选择带有变量的元素

> ID：13294200
> 
> 赞同：-2
> 
> 时间：2012-11-08T17:16:02.503
> 
> 标签：javascript, jquery, variables

我想知道如何使用变量选择元素。我认为可行的是：

```
var class = "help-hu" // this value can change to "help-en" and "help-de" as well
$("."+class).fadeIn('slow'); 
```

但它不起作用。任何解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:19:31.733

不要`class`用作变量名——它是一个保留字。使用`cls`, 或`klass`, 或任何不是保留字的东西。

您*应该*在调试控制台中看到错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:21:21.873

如果你检查你的`browser`控制台，你会看到：

> 未捕获的 SyntaxError：意外的保留字

这意味着您不必使用这种词，因为它们是`reserved`！

您可以尝试另一个并使用与此相同的逻辑...

**例子：**

```
var clazz = 'help-hu';
$('.' + clazz).fadeIn('slow'); 
```

这将毫无问题地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:29:12.110

如前所述，您的代码有效，但 class 是保留字。阅读保留字，因为它是有用的信息。

我做了一个快速演示来展示[这里](http://jsfiddle.net/YSzTx/)的代码，代码是：

```
var help = "help-hu"
$("." + help).html('hello, is it me you\'re looking for?');​ 
```

# php - 如何将 $_POST 值放入 javascript 确认框中

> ID：13294202
> 
> 赞同：3
> 
> 时间：2012-11-08T17:16:04.797
> 
> 标签：php, javascript

我希望能够在确认框中包含考试名称，目前它不显示考试名称。有谁知道为什么？考试名称来自应发布的文本输入。

以下是包含考试名称文本输入的表单：

```
<?php

$newassessment = (isset($_POST['Assessmentnew'])) ? $_POST['Assessmentnew'] : '';

$editsession = "<form action=".htmlentities($_SERVER['PHP_SELF'])." method='post' id='updateForm'>

    <table>
    <tr>
    <th>Assessment:</th>
    <td><input type='text' id='newAssessment' name='Assessmentnew' readonly='readonly' value='' /> </td>
    </tr>
    </table>

    <p><input id='updateSubmit' type='submit' value='Update Date/Start Time' name='updateSubmit' onClick='myClickHandler(); return false;'/></p>

    </form>
";

echo $editsession;

}

?> 
```

下面是确认框：

```
<script type="text/javascript">

        function showConfirm(){

         var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " <?php echo  $newassessment ?> );

         if (confirmMsg==true)
         {
         submitform();   
     }
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:19:13.297

您需要在引号内输出字符串，否则将其作为变量：

```
var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: <?php echo  $newassessment ?>" ); 
```

例如，如果 的值为`$newassessment`“foo”，您的代码最终将如下所示：

```
var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " foo ); 
```

这是无效的，因为`+`运算符丢失并且`foo`（可能）未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:20:34.480

我假设 JavaScript 应该在页面实际发布之前运行。即，它是对实际的 JavaScript 确认，因此`POST`不会`$_POST`填充数组。那是对的吗？如果是这样，您需要执行以下操作：

```
var formval = document.getElementById('newAssessment').value;
var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + formval ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:21:10.250

此代码是否在接收发布请求的脚本中？如果 , 那么应该发生的是，您检查 $_POST 中的值是否设置的条件正在评估为 false，因为您的值未发布并将 '' 分配给变量 $newassessment。使用 chrome 或 safari 的 Web 检查器仔细检查该值是否已发布且名称正确。

** 在连接 javascript 中的变量值之前，您还错过了一个 + 号。还要用引号将您的串联括起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T17:23:23.727

在表单发布后，您的 $_POST 数组才会被填充，并且由于您的 javascript 确认对话框是 POST 的前身，因此您的模板变量仍未设置，因此等于 ''。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T17:25:12.603

PHP 在页面加载到浏览器之前运行，这意味着如果您查看源代码，您的 javascript 代码将不包含变量。

尝试在您的确认声明之前包含此内容：

```
var formInput = document.getElementById('newAssessment').value; 
```

让你的另一条线

```
var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + formInput ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T10:59:28.327

试试这个，希望对你有帮助

```
 //hold your $_POST['Assessmentnew'] value into a hidden field like this,

<input type="hidden" name='hid1' id="hid1" value="<?php echo $_POST['Assessmentnew'];?>"> 
```

```
function showConfirm()
{
      var session_value=document.getElementById('hid1').value;
      var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: "+session_value);
     if (confirmMsg==true)
     {
        submitform();   
     }
 }
</script> 
```

# c# - 如何将组件 Oracle.DataAccess 的 app.config 从版本“2.112.2.0”重新映射到“2.112.3.0”

> ID：13294206
> 
> 赞同：2
> 
> 时间：2012-11-08T17:16:15.033
> 
> 标签：c#, oracle, gac, odp.net

我是 C# 新手。

我编写了一个 C# 控制台应用程序，它使用 ODP 使用 Oracle.DataAccess.Client 命名空间连接 Oracle 数据库。我的开发机器使用 Oracle.DataAccess 2.112.2.0 版，开发服务器也使用 Oracle.DataAccess 2.112.2.0 版，程序运行良好。使用更高版本的 Oracle.DataAccess 版本 2.112.3.0 的 prod 服务器并且程序无法运行，我得到以下异常。

```
Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f
429c47342' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342'
   at OPSegmentTDs.Programu.Main(String[] args)

I tried installing ODAC for Oracle client 11.2.0.3.0 on my dev machine and added the higher ver of Oracle.DataAccess reference 2.112.3.0 in my application and when I built it I got this warning but the program built successfully.

Consider app.config remapping of assembly "Oracle.DataAccess, Culture=neutral, PublicKeyToken=89b483f429c47342" from Version "2.112.2.0" [] to Version "2.112.3.0" [C:\Oracle\OraODP1123\product\11.2.0\client_2\ODP.NET\bin\2.x\Oracle.DataAccess.dll] to solve conflict and get rid of warning.
c:\WINDOWS\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets : warning MSB3247: Found conflicts between different versions of the same dependent assembly.
C:\WINDOWS\Microsoft.NET\Framework\v3.5\Csc.exe /noconfig /nowarn:1701,1702 /platform:AnyCPU /errorreport:prompt /warn:4 /define:DEBUG;TRACE /reference:C:\Work\Build\GOLD\GIS2002\GISLib\bin\Debug\GIS.dll /reference:C:\Work\Build\09072012\Linde.Niche.DB\bin\Debug\Linde.Niche.DB.dll /reference:C:\Work\Build\09072012\Linde.Niche.DB.OP\bin\Debug\Linde.Niche.DB.OP.dll /reference:C:\Work\Build\09072012\Linde.Niche\bin\Debug\Linde.Niche.dll /reference:C:\Work\Build\09072012\OPLib\OPLib\bin\Debug\OPLib.dll /reference:C:\Oracle\OraODP1123\product\11.2.0\client_2\ODP.NET\bin\2.x\Oracle.DataAccess.dll /reference:"c:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Core.dll" /reference:"c:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Data.DataSetExtensions.dll" /reference:C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Data.dll /reference:C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.dll /reference:C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll /reference:"c:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Xml.Linq.dll" /debug+ /debug:full /filealign:512 /optimize- /out:obj\Debug\OPSegmentTDs.exe /target:exe Program.cs Properties\AssemblyInfo.cs 
```

当我尝试在我的产品服务器上运行新版本时，应用程序崩溃并出现相同的错误

```
Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f
429c47342' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342'
   at OPSegmentTDs.Programu.Main(String[] args) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:46:36.177

尝试在应用程序的 bin/setup 文件夹下复制正确版本的 Oracle DLL（来自 ODAC112030Xcopy_32bit.zip 或 ODAC112030Xcopy_x64.zip），并将以下内容添加到应用程序的 app.config 中：

```
<system.data>
    <DbProviderFactories>
        <remove invariant="Oracle.DataAccess.Client" />
        <add name="Oracle Data Provider for .NET"
            invariant="Oracle.DataAccess.Client"
            description="Oracle Data Provider for .NET"
            type="Oracle.DataAccess.Client.OracleClientFactory, Oracle.DataAccess, Version=2.112.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342"/>
    </DbProviderFactories>
</system.data> 
```

# iphone - 在情节提要中隐藏部分标题“原型单元”

> ID：13294207
> 
> 赞同：3
> 
> 时间：2012-11-08T17:16:20.430
> 
> 标签：iphone, ios, xcode, uitableview

我已经用 Google 搜索过，但没有运气......我试图隐藏使用 Storyboard 将 UITableView 添加到 UIView 时出现的“原型单元”部分标题。

![在此处输入图像描述](../Images/31353f367a5e8f4aae5c2f9f5f494a6a.png)

这是令人沮丧的，因为很难将单元格调整到屏幕大小，因为当您运行程序时它会消失。任何想法将不胜感激！谢谢，如果这是一个简单的问题，我很抱歉，我是新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-26T20:12:42.280

这实际上是出现在节开头的自动生成的节标题。在 XCode 5 中，当您拥有 UITableView 时，单击 Table View Section -Header Title。单击属性段。

![在此处输入图像描述](../Images/4a46df1ae9e7cbcd2550aa26e4b0c36a.png)

![在此处输入图像描述](../Images/5841131e0e8271a803f1ee35c0cfad27.png)

我删除了标题“标题标题”中的文本，这应该删除节标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:08:13.707

您必须在*Attributes Inspector中更改**Prototype Cells*编号。在下面的示例中，我在 UIView 中使用了 UITableView。但就像其他评论所说的那样，它不会真正影响您的代码。这只是为了将它隐藏在故事板中。

 *![原型细胞：5](../Images/000b2e4d1a225f0ad3cbf901bc3a68d9.png) ![原型细胞：0](../Images/0e134444e7f84d81d1f5f8f620a7d0f6.png)*

# asp.net-mvc - MVC4 动作返回 JsonResult 而没有 null

> ID：13294211
> 
> 赞同：8
> 
> 时间：2012-11-08T17:16:27.760
> 
> 标签：asp.net-mvc, json, asp.net-mvc-4

我有一个为特定类的对象返回 JsonResult 的操作。我用一些属性修饰了这个类的属性以避免空字段。类定义是：

```
 private class GanttEvent
    {
        public String name { get; set; }

        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        public String desc { get; set; }

        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        public List<GanttValue> values { get; set; }
    } 
```

在我的行动中，我使用了一个对象

```
 var res = new List<GanttEvent>(); 
```

我使用以下方法返回：

```
 return Json(res, JsonRequestBehavior.AllowGet); 
```

不幸的是，我仍然在输出中收到空值：

```
 [{"name":"1.1 PREVIOS AL INICIO ","desc":null,"values":null},{"name":"F04-PGA-S10","desc":"Acta preconstrucción","values":null},{"name":"F37-PGA-S10","desc":"Plan de inversión del anticipo","values":null},{"name":"F09-PGA-S10","desc":"Acta de vecindad","values":null},{"name":"F05-PGA-S10","desc":"Acta de inicio","values":null},{"name":"F01-PGA-S10","desc":"Desembolso de anticipo","values":null}] 
```

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T09:35:45.307

正如 Brad Christie 所说，MVC4 仍然使用 JavaScriptSerializer，因此为了让您的对象被 Json.Net 序列化，您必须执行几个步骤。

首先，从 JsonResult 继承一个新的类 JsonNetResult 如下（基于 [此解决方案](https://stackoverflow.com/questions/6883204/change-default-json-serializer-used-in-asp-mvc3)）：

```
public class JsonNetResult : JsonResult
{
    public JsonNetResult()
    {
        this.ContentType = "application/json";
    }

    public JsonNetResult(object data, string contentType, Encoding contentEncoding, JsonRequestBehavior jsonRequestBehavior)
    {
        this.ContentEncoding = contentEncoding;
        this.ContentType = !string.IsNullOrWhiteSpace(contentType) ? contentType : "application/json";
        this.Data = data;
        this.JsonRequestBehavior = jsonRequestBehavior;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
            throw new ArgumentNullException("context");

        var response = context.HttpContext.Response;

        response.ContentType = !String.IsNullOrEmpty(ContentType) ? ContentType : "application/json";

        if (ContentEncoding != null)
            response.ContentEncoding = ContentEncoding;

        if (Data == null)
            return;

        // If you need special handling, you can call another form of SerializeObject below
        var serializedObject = JsonConvert.SerializeObject(Data, Formatting.None);
        response.Write(serializedObject);
    }
} 
```

然后，在您的控制器中，覆盖 Json 方法以使用新类：

```
protected override JsonResult Json(object data, string contentType, Encoding contentEncoding, JsonRequestBehavior behavior)
{
    return new JsonNetResult(data, contentType, contentEncoding, behavior);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:09:37.897

[`Controller.Json`](http://msdn.microsoft.com/en-us/library/dd470587%28v=vs.98%29.aspx)使用[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer%28v=vs.98%29.aspx)不是[Newtonsoft Json 库](https://github.com/ayoung/Newtonsoft.Json)（这是它的[`JsonPropertyAttribute`](https://github.com/ayoung/Newtonsoft.Json/blob/master/Newtonsoft.Json/JsonPropertyAttribute.cs)来源）。

您要么需要使用 Newtonsoft 库并以这种方式返回序列化结果，要么继续调用`Json`并编写一个将忽略空值的[转换器。](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptconverter.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:07:46.197

我的建议是看看如果你只是将一个 GanttEvent 对象序列化为 JSON 会发生什么。还要检查您对 Json 的调用是否合适。

# linux - bash 命令检查变量名是否有效

> ID：13294215
> 
> 赞同：5
> 
> 时间：2012-11-08T17:16:39.320
> 
> 标签：linux, shell, naming-conventions, variable-names

```
#check if the name is valid
function myfunc()
{
    #check "${1}"
    #echo "valid/invalid"
}

#these should return valid
myfunc "my_number"
myfunc "my_number1"

#these should return ivalid 
myfunc "1my_number"
myfunc "1my _number"
myfunc "my number"
myfunc "my_number?" 
```

依此类推，变量名只能有字母、数字（但不能在开头）、.. 和 java 的所有规则一样......

有什么我可以使用的功能吗？我不想重新发明轮子...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T17:24:49.093

将变量名称与正则表达式匹配，如下所示：

```
myfunc() {
    if [[ "$1" =~ ^[a-z][a-zA-Z0-9_]*$ ]]
    then
        echo "$1: valid"
    else
        echo "$1: invalid"
    fi
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-15T01:13:12.623

[对于 bash 变量的上下文， dogbane 的答案](https://stackoverflow.com/a/13294345/2305676)几乎是完整的，但尚未更新以反映包含完整工作验证器的最终评论。根据他对他的回答的评论，这是有意的。此答案提供了一个函数，该函数对所有有效名称的计算结果都为真，并且可以用作条件，而不是返回一个必须与某物进行比较的值。另外，它可以跨多个 shell 使用。

功能：

```
isValidVarName() {
    echo "$1" | grep -q '^[_[:alpha:]][_[:alpha:][:digit:]]*$' && return || return 1
} 
```

bash 中的示例用法：

```
key=...
value=...

if isValidVarName "$key"; then
    eval "$key=\"$value\""
fi

# or it might simply look like this

isValidVarName "$key" && eval "$key=\"$value\"" 
```

# javascript - 将 Backbone.js 集合导出为硬盘上的纯文本并重新导入

> ID：13294216
> 
> 赞同：2
> 
> 时间：2012-11-08T17:16:39.990
> 
> 标签：javascript, json, backbone.js

一段时间以来，我一直在修补 Backbone.js。我一直在使用 localStorage 来存储我的大部分应用数据。我想知道是否可以将我的收藏导出为纯文本并再次导入。即我想创建一种备份类型的功能，当导出数据时，会显示一个 HTML 文本框，其中包含我的集合的“纯文本”版本，当我需要导入数据时，我只需将其粘贴到一个空文本框中并重新创建集合。

这可能吗，关于如何实现这一点的任何提示？我正在考虑将其导出为 JSON 格式并将其导入回来。这可行吗？

ps 我知道这里没有代码，但任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:33:05.930

您可以使用`toJSON`来序列化集合。（实际上[Backbone.js 提到这](http://backbonejs.org/#Collection-toJSON)是 的主要用途`collection.toJSON()`）。用于`JSON.stringify`将 JSON 对象转换为字符串。

```
var json = myCollection.toJSON();
var serializedString = JSON.stringify(json); 
```

要恢复集合，请反转步骤：

1.  `JSON.parse`将原始字符串转换为 JSON 对象
2.  [`collection.reset`](http://backbonejs.org/#Collection-reset)将 JSON 对象转换为集合

[这是一个工作示例。](http://jsfiddle.net/c7kSh/1/)

```
// setup test collection
var collection = new Backbone.Collection();
collection.add(new Backbone.Model({ hello: "world" }));

// serialize it to a string
var json = collection.toJSON();
var serialized = JSON.stringify(json);
console.log(serialized);

// get it back
var json2 = JSON.parse(serialized);
var collection2 = new Backbone.Collection();
var restored = collection2.reset(json2);

// check that it worked
console.log(restored.at(0).get("hello")); 
```

​</p>

# java - 如何升级/更新现有 Selenium Java 项目的 Selenium 版本？

> ID：13294218
> 
> 赞同：0
> 
> 时间：2012-11-08T17:16:41.893
> 
> 标签：java, eclipse, selenium, selenium-webdriver

我在 Ubuntu 11 操作系统上有一个带有 eclipse IDE 的 Selenium WebDriver 项目。我想将 java 客户端驱动程序从 2.24 升级到 2.25。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:16:41.893

我从 selenium 网站 (2.25.0) [http://seleniumhq.org/download/](http://seleniumhq.org/download/)下载了 java 客户端驱动程序。将 zip 文件解压缩到您选择的目录。

启动 eclipse 并选择您正在处理的项目。通过转到 Properties->Java Build Path->Add External JARs（选择 selenium jar）将最新的 selenium jar 添加到引用的 lib。为了以干净的方式做事，我删除了对与旧 selenium (2.24) 一起存在的其他库的引用，并用新版本替换它们。您可以在 selenium-2.25.0/libs 文件夹下找到新的 jar。以与添加 selenium-2.25.0.jar 相同的方式添加它们。

注意：如果您没有正确添加 jar 文件，这将破坏您的项目，因此您可能需要创建项目的备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-13T14:04:05.590

对于仍然来这里的每个人...

[您可以尝试将WebDriverManager](https://github.com/bonigarcia/webdrivermanager)库集成到您的项目中。

它可以轻松地让您自动化不同 WebDriver 实现（二进制文件）的安装过程。

例如，对于 ChromeDriver：

```
ChromeDriverManager.getInstance().setup(); //downloading and installing ChromeDriver
WebDriver driver = new ChromeDriver(); //initializing ChromeDriver 
```

如果您使用 Maven，请将它的依赖项添加到您的 pom.xml 文件中：

```
<dependency>
   <groupId>io.github.bonigarcia</groupId>
   <artifactId>webdrivermanager</artifactId>
   <version>1.3.1</version>
</dependency> 
```

# python - 在有限尝试游戏中猜我的号码

> ID：13294225
> 
> 赞同：4
> 
> 时间：2012-11-08T17:17:08.137
> 
> 标签：python, if-statement, python-3.x, while-loop

作为我大学课程的一部分，我正在学习 python 一个任务，我一直在尝试（重新）编写这个猜数字游戏，如果用户在 5 次尝试内未能正确猜到，则终止游戏：

```
 # Guess My Number Mod 5 tries or bust

import random  

print("\nI'm thinking of a number between 1 and 100.")
print("Try to guess it in five tries or less")

my_number = random.randint(1, 100)
guess = int(input("Go on, Take a guess, I dare ya "))
tries = 1

while guess != my_number:
    if guess > my_number:
        print("Lower...")
    else:
        print("Higher...")
guess = int(input("Go on, Take a guess, I dare ya "))
tries += 1
if tries==5:
        input("You failed to guess the number was it that hard?\n Press any key to exit!)"

print("Well done you guessed correctly!The number was", my_number)
print("And it only took you", tries, "tries!\n")

input("\n\nPress the enter key to exit.") 
```

我假设终止原因不起作用，因为我的 if 语句在 while 循环之外，我无法让它生效。

还有一些无效的语法，因为我很累并且无法发现它。

如果可能的话，你们能否给我一些关于如何解决我想做的事情的提示，因为我更有可能以这种方式学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:19:44.670

您希望在达到特定条件时**[打破循环。](http://docs.python.org/2/tutorial/controlflow.html)**

```
if condition:
            # do something
            break # brings you out of the loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T12:52:22.817

如果有人在 2020 年搜索这个：

```
import random

n = random.randint(1, 10)

guess_count = 0

guess_limit = 2      #actual try count will be 3

while guess_count <= guess_limit :

    guess = int(input("Enter an integer from 1 to 10: "))

    guess_count += 1

    if guess == n:

        print("you guessed it in ", guess_count,"Guesses")

        break

else:

    print ("Sorry, the correct number is", n) 
```

# php - ORM：友谊/好友关系

> ID：13294227
> 
> 赞同：4
> 
> 时间：2012-11-08T17:17:18.803
> 
> 标签：php, orm, relationship, laravel, eloquent

我第一次尝试使用 ORM，我已经定义了这样的模型：

**用户型号：**

```
class User extends Eloquent
{
    public function friends()
    {
       return $this->has_many_and_belongs_to('User', 'friends', 'user1_id', 'user2_id');
    }    
} 
```

**朋友型号：**

```
class Friend extends Eloquent
{
    public function friend()
    {
        return $this->belongs_to('User', 'user_id');
    }    
} 
```

**朋友mysql表：**

`id (pkey) # user1_id (references users.user_id) # user2_id (references users.user_id)`

现在通过使用`$user->friends`我得到一个单边列表，因为朋友数据库参数可以是任何顺序（user1 是user2 的朋友**或**user2 是 user1 的朋友）。如果我尝试使用追随者/追随者方法，这将是可以的，但我希望它是互惠的。

做这种事情的最佳方法是什么？在数据库上插入重复的 user1/user2 和 user2/user1 听起来不是一个好方法，我什至不知道如何将其转换为 ORM。此外，似乎 Friend 模型根本没有被使用/被调用。

我在邀请朋友系统上也会遇到类似的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:25:48.980

您正在寻找用户之间的多对多关系！[在 Doctrine: Doctrine - Many to Many Self Referencing](http://docs.doctrine-project.org/en/2.1/reference/association-mapping.html#many-to-many-self-referencing)中查看如何做到这一点。教义示例可能会帮助您入门。

这个想法是你有一个实体，用户，他们可以互相成为朋友。

# c# - 从 Win 应用程序调用 Web 服务时如何捕获 XML

> ID：13294230
> 
> 赞同：0
> 
> 时间：2012-11-08T17:17:31.053
> 
> 标签：c#, xml, capture, webservice-client

在我的解决方案中，我有三个项目。一个是 Web 服务 (ASMX)，另一个是我调用 Web 服务的 win 表单应用程序。另一个类库，其中类已设计扩展 SoapExtension 类。

我的目标是在我从我的 win 表单应用程序调用 Web 服务时捕获响应和请求 xml。当我尝试捕获 xml 时，我得到**对象引用未设置错误。**

## 这是我的类库源代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.IO;
using System.Net;
using System.Xml;

namespace SoapLogger
{
public class TraceExtension : SoapExtension
{
    private Stream oldStream;
    private Stream newStream;

    private static XmlDocument xmlRequest;
    /// <summary>
    /// Gets the outgoing XML request sent to PayPal
    /// </summary>
    public static XmlDocument XmlRequest
    {
        get { return xmlRequest; }
    }

    private static XmlDocument xmlResponse;
    /// <summary>
    /// Gets the incoming XML response sent from PayPal
    /// </summary>
    public static XmlDocument XmlResponse
    {
        get { return xmlResponse; }
    }

    /// <summary>
    /// Save the Stream representing the SOAP request
    /// or SOAP response into a local memory buffer.
    /// </summary>
    /// <param name="stream">
    /// <returns></returns>
    public override Stream ChainStream(Stream stream)
    {
        oldStream = stream;
        newStream = new MemoryStream();
        return newStream;
    }

    /// <summary>
    /// If the SoapMessageStage is such that the SoapRequest or
    /// SoapResponse is still in the SOAP format to be sent or received,
    /// save it to the xmlRequest or xmlResponse property.
    /// </summary>
    /// <param name="message">
    public override void ProcessMessage(SoapMessage message)
    {
        switch (message.Stage)
        {
            case SoapMessageStage.BeforeSerialize:
                break;
            case SoapMessageStage.AfterSerialize:
                xmlRequest = GetSoapEnvelope(newStream);
                CopyStream(newStream, oldStream);
                break;
            case SoapMessageStage.BeforeDeserialize:
                CopyStream(oldStream, newStream);
                xmlResponse = GetSoapEnvelope(newStream);
                break;
            case SoapMessageStage.AfterDeserialize:
                break;
        }
    }

    /// <summary>
    /// Returns the XML representation of the Soap Envelope in the supplied stream.
    /// Resets the position of stream to zero.
    /// </summary>
    /// <param name="stream">
    /// <returns></returns>
    private XmlDocument GetSoapEnvelope(Stream stream)
    {
        XmlDocument xml = new XmlDocument();
        stream.Position = 0;
        StreamReader reader = new StreamReader(stream);
        xml.LoadXml(reader.ReadToEnd());
        stream.Position = 0;
        return xml;
    }

    /// <summary>
    /// Copies a stream.
    /// </summary>
    /// <param name="from">
    /// <param name="to">
    private void CopyStream(Stream from, Stream to)
    {
        TextReader reader = new StreamReader(from);
        TextWriter writer = new StreamWriter(to);
        writer.WriteLine(reader.ReadToEnd());
        writer.Flush();
    }
    #region NoOp
    /// <summary>
    /// Included only because it must be implemented.
    /// </summary>
    /// <param name="methodInfo">
    /// <param name="attribute">
    /// <returns></returns>
    public override object GetInitializer(LogicalMethodInfo methodInfo,
        SoapExtensionAttribute attribute)
    {
        return null;
    }

    /// <summary>
    /// Included only because it must be implemented.
    /// </summary>
    /// <param name="WebServiceType">
    /// <returns></returns>
    public override object GetInitializer(Type WebServiceType)
    {
        return null;
    }

    /// <summary>
    /// Included only because it must be implemented.
    /// </summary>
    /// <param name="initializer">
    public override void Initialize(object initializer)
    {
    }
    #endregion NoOp
}
} 
```

## 在这里，我将展示我如何从 win 应用程序调用 Web 服务

```
 private void button1_Click(object sender, EventArgs e)
    {

        using (ServiceRef.TestServiceSoapClient oService = new ServiceRef.TestServiceSoapClient())
        {
            textBox1.Text = oService.HelloWorld("Sudip");
            var soapRequest = SoapLogger.TraceExtension.XmlRequest.InnerXml;
            var soapResponse = SoapLogger.TraceExtension.XmlResponse.InnerXml;
        }
    } 
```

这两行给出了对象引用错误

```
 var soapRequest = SoapLogger.TraceExtension.XmlRequest.InnerXml;
            var soapResponse = SoapLogger.TraceExtension.XmlResponse.InnerXml; 
```

我只是不知道为什么我会出错。

在 win 形式的应用程序中有一个 app.config，我在其中注册我的类库程序集以捕获 xml。这是我的 app.config 详细信息

```
<?xml version="1.0"?>
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="TestServiceSoap"/>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:6804/Service1.asmx" binding="basicHttpBinding" bindingConfiguration="TestServiceSoap" contract="ServiceRef.TestServiceSoap" name="TestServiceSoap"/>
    </client>
</system.serviceModel>

<system.web>
<compilation debug="true" targetFramework="4.0" />
<webServices>
  <soapExtensionTypes>
    <add type="SoapLogger.TraceExtension,SoapLogger" priority="1" group="0" />
  </soapExtensionTypes>
</webServices>
</system.web>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/> </startup>    
</configuration> 
```

当我搜索谷歌只是为了知道如何捕获请求/响应 xml 时，我得到了很多这样的文章。我关注了很多，但没有任何效果。

我遵循这个网址来完成工作 [http://jramirezdev.net/blog/c-tip-capturar-los-mensajes-soap-de-un-servicio-asmx-que-hemos-referenciado](http://jramirezdev.net/blog/c-tip-capturar-los-mensajes-soap-de-un-servicio-asmx-que-hemos-referenciado)

我犯了什么样的错误并不清楚。我在类库方法中的每个方法处都设置了断点，但是当 Web 服务调用时，类库中没有执行任何方法。我不想使用像wireshark、fiddler这样的工具来捕获请求/响应xml，而是想以编程方式做同样的事情。

所以请指导我我的错误是什么。为什么我得到对象引用未设置错误。请查看我的代码或转到 url 链接并告诉我我的方法有什么问题。

# linux - 由于我将 gitattributes 设置为处理 crlf，因此我在使用中央 git 存档时遇到了问题

> ID：13294231
> 
> 赞同：0
> 
> 时间：2012-11-08T17:17:46.280
> 
> 标签：linux, windows, macos, git, newline

这与[git repo 和工作副本中的 Force LF eol有关](https://stackoverflow.com/questions/9976986/force-lf-eol-in-git-repo-and-working-copy)

当我执行 git clone，然后执行 git pull 时，会有增量，IMO 不应该在那里进行正确操作。这始于我添加了一个 gitattributes 文件，我添加该文件是因为一个文件有 2 种行尾。我们使用的系统是 windows 和 Mac 客户端和一个 linux 服务器，从中提取和推送 git 的东西。你有什么建议吗？origin 应该总是在 HEAD，不是吗？中央 git 档案使用结帐和强制向网络服务器提供数据也可能是相关的。

```
$ git pull
remote: Counting objects: 469, done.
remote: Compressing objects: 100% (391/391), done.
remote: Total 392 (delta 282), reused 0 (delta 0)
Receiving objects: 100% (392/392), 94.48 KiB, done.
Resolving deltas: 100% (282/282), completed with 46 local objects. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:57:52.200

不使用 .gitattribute 解决的问题

# websocket - 如何在 Yaws 中获取 WebSocket 客户端的句柄？

> ID：13294232
> 
> 赞同：0
> 
> 时间：2012-11-08T17:17:46.997
> 
> 标签：websocket, yaws

有没有办法在使用`handle_message/1`回调时为客户端获取“句柄”（例如 Pid）？所以我可以向特定的客户端发送消息，并使用客户端列表作为参数（例如，游戏/聊天会话）为特定的客户端组生成进程。

或者我有什么其他方法可以用 Yaws 解决这个问题吗？我在 Yaws 网站上的任何文档或示例中都没有找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:40:10.847

在您`out/1`返回`{websocket, CallbackModule, Options}`升级到 WebSocket 的连接的函数中，您可以设置该`Options`值以指示您的回调模块是一个高级回调模块，这使您还可以指定一个初始状态值，该值在每次 Yaws 调用时传递给您的回调模块. 如果在初始 HTTP 请求中发送了特定于客户端的信息，您的`out/1`函数将在其`#arg{}`参数中接收该信息，因此您可以从那里检索它并将其作为初始状态的一部分返回。

# jquery - 试图学习 .ajax() - 我的 json 不断抛出错误：“未定义” - 我在做什么？

> ID：13294233
> 
> 赞同：0
> 
> 时间：2012-11-08T17:17:57.717
> 
> 标签：jquery, getjson

我不知道为什么我的 json 对象返回未定义。我在我的 JSON 工具中没有看到任何语法错误，但我觉得我的结构一定有问题。

我想开始制作僵尸游戏，但对我来说第一步是了解如何将我创建的数据传递到前端。这是我一直希望为类实现 ajax 的地方，但我的控制台向我发送了一个错误：“未定义”

```
$(document).ready(function(){
                $.ajax({
                    url: 'dummy_json.json',
                    data : { load : true},
                    type: 'GET',
                    dataType: 'json',
                    timeout: 1000,
                    error: function(jqXHR, textStatus, errorThrown){
                        console.log("HOLY SHIT ZOMBIES!");
                        console.log(textStatus + " is " + errorThrown);
                    },
                    success: function(data){
                        $("body").append(data); // really basic append, more to come.
                    }
                });
            }); 
```

以下是 dummy_json.json 文件的内容，其中包含我手写的僵尸任务数据。我想从头开始这样做，以便我可以很好地学习 json。最终，我将编写从 db 中提取并转换为 json 以供视图使用的 php：

```
 { id : 0, bulletinquest : {
    items : [{
        zombie0 : {
            "regionoforigin" : "JKL",
            "zombiename" : " - Black",
            "genomeid" : "4778931",
            "reward" : "100",
            "imageName" : "4778931.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie1 : {
            "regionoforigin" : "JKL",
            "zombiename" : " - White",
            "genomeid" : "4779436",
            "reward" : "100",
            "imageName" : "4779436.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie2 : {
            "regionoforigin" : "JKL",
            "zombiename" : " II - Gray",
            "genomeid" : "6900326",
            "reward" : "45",
            "imageName" : "6900326.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie3 : {
            "regionoforigin" : "JKL",
            "zombiename" : " II - White",
            "genomeid" : "7009803",
            "reward" : "45",
            "imageName" : "7009803.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie4 : {
            "regionoforigin" : "JKL",
            "zombiename" : " III - Red",
            "genomeid" : "5715837",
            "reward" : "100",
            "imageName" : "5715837.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie5 : {
            "regionoforigin" : "GHI",
            "zombiename" : " II - Gray",
            "genomeid" : "6941414",
            "reward" : "45",
            "imageName" : "6941414.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie6 : {
            "regionoforigin" : "GHI",
            "zombiename" : " II - White",
            "genomeid" : "6930804",
            "reward" : "45",
            "imageName" : "6930804.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie7 : {
            "regionoforigin" : "DEF",
            "zombiename" : " - Blue",
            "genomeid" : "5597904",
            "reward" : "200",
            "imageName" : "5597904.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie8 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Slow Walker) - Blue",
            "genomeid" : "5715212",
            "reward" : "45",
            "imageName" : "5715212.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie9 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Slow Walker) - White",
            "genomeid" : "5715328",
            "reward" : "45",
            "imageName" : "5715328.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie10 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Fast Walker) - White",
            "genomeid" : "6209005",
            "reward" : "200",
            "imageName" : "6209005.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie11 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Fast Walker) - Blue",
            "genomeid" : "6209286",
            "reward" : "200",
            "imageName" : "6209286.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie12 : {
            "regionoforigin" : "DEF",
            "zombiename" : " II - Gray",
            "genomeid" : "6958754",
            "reward" : "300",
            "imageName" : "6958754.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie13 : {
            "regionoforigin" : "DEF",
            "zombiename" : " II - White",
            "genomeid" : "6958772",
            "reward" : "300",
            "imageName" : "6958772.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie14 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III - Amber Brown",
            "genomeid" : "6901339",
            "reward" : "45",
            "imageName" : "6901339.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie15 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III - Black",
            "genomeid" : "6901302",
            "reward" : "45",
            "imageName" : "6901302.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie16 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Slow Walker) - White",
            "genomeid" : "5715328",
            "reward" : "45",
            "imageName" : "5715328.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie17 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Slow Walker) - White",
            "genomeid" : "5716681",
            "reward" : "45",
            "imageName" : "5716681.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie18 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Slow Walker) - Blue",
            "genomeid" : "5717547",
            "reward" : "45",
            "imageName" : "5717547.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie19 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Fast Walker) - White",
            "genomeid" : "5717574",
            "reward" : "200",
            "imageName" : "5717574.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie20 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Fast Walker) - Blue",
            "genomeid" : "5717583",
            "reward" : "200",
            "imageName" : "5717583.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        }
    }],
    bulletinquestType : "iHaveNoIdea",
    bulletinquestAmmount : "500",
    bulletinquestName : "Please help save the animal shelter from being overrun!"
}, id : 1, bulletinquest : {
    name : "FROGGA FETT PROMO WILL EAT YOU",
    items : [{
        zombie0 : {
            "regionoforigin" : "JKL",
            "zombiename" : " - Black",
            "genomeid" : "4778931",
            "reward" : "100",
            "imageName" : "4778931.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie1 : {
            "regionoforigin" : "JKL",
            "zombiename" : " - White",
            "genomeid" : "4779436",
            "reward" : "100",
            "imageName" : "4779436.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie2 : {
            "regionoforigin" : "JKL",
            "zombiename" : " II - Gray",
            "genomeid" : "6900326",
            "reward" : "45",
            "imageName" : "6900326.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie3 : {
            "regionoforigin" : "JKL",
            "zombiename" : " II - White",
            "genomeid" : "7009803",
            "reward" : "45",
            "imageName" : "7009803.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie4 : {
            "regionoforigin" : "JKL",
            "zombiename" : " III - Red",
            "genomeid" : "5715837",
            "reward" : "100",
            "imageName" : "5715837.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie5 : {
            "regionoforigin" : "GHI",
            "zombiename" : " II - Gray",
            "genomeid" : "6941414",
            "reward" : "45",
            "imageName" : "6941414.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie6 : {
            "regionoforigin" : "GHI",
            "zombiename" : " II - White",
            "genomeid" : "6930804",
            "reward" : "45",
            "imageName" : "6930804.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie7 : {
            "regionoforigin" : "DEF",
            "zombiename" : " - Blue",
            "genomeid" : "5597904",
            "reward" : "200",
            "imageName" : "5597904.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie8 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Slow Walker) - Blue",
            "genomeid" : "5715212",
            "reward" : "45",
            "imageName" : "5715212.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie9 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Slow Walker) - White",
            "genomeid" : "5715328",
            "reward" : "45",
            "imageName" : "5715328.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie10 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Fast Walker) - White",
            "genomeid" : "6209005",
            "reward" : "200",
            "imageName" : "6209005.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie11 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Fast Walker) - Blue",
            "genomeid" : "6209286",
            "reward" : "200",
            "imageName" : "6209286.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie12 : {
            "regionoforigin" : "DEF",
            "zombiename" : " II - Gray",
            "genomeid" : "6958754",
            "reward" : "300",
            "imageName" : "6958754.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie13 : {
            "regionoforigin" : "DEF",
            "zombiename" : " II - White",
            "genomeid" : "6958772",
            "reward" : "300",
            "imageName" : "6958772.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie14 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III - Amber Brown",
            "genomeid" : "6901339",
            "reward" : "45",
            "imageName" : "6901339.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie15 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III - Black",
            "genomeid" : "6901302",
            "reward" : "45",
            "imageName" : "6901302.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie16 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Slow Walker) - White",
            "genomeid" : "5715328",
            "reward" : "45",
            "imageName" : "5715328.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie17 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Slow Walker) - White",
            "genomeid" : "5716681",
            "reward" : "45",
            "imageName" : "5716681.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie18 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Slow Walker) - Blue",
            "genomeid" : "5717547",
            "reward" : "45",
            "imageName" : "5717547.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie19 : {
            "regionoforigin" : "ABC",
            "zombiename" : " III (Fast Walker) - White",
            "genomeid" : "5717574",
            "reward" : "200",
            "imageName" : "5717574.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        },
        zombie20 : {
            "regionoforigin" : "DEF",
            "zombiename" : " III (Fast Walker) - Blue",
            "genomeid" : "5717583",
            "reward" : "200",
            "imageName" : "5717583.png",
            "moreinfo" : "To kill a zombie you must destroy the brain."
        }
    }],
    bulletinquestType : "savior",
    bulletinquestAmmount : "Over 9000",
    bulletinquestName : "Clear the brooklyn tunnel"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:24:18.003

这是无效的 JSON。您需要将整个内容放在方括号中以使其成为数组：

```
[ { id : 0, ... }, 
  { id: 1, ... },
  ...
] 
```

请注意，要检查 JSON 是否有效，有很多在线工具可以提供帮助（例如[JSONLint](http://jsonlint.com/)）。（您会看到有效的 JSON 在技术上要求将键（`id`等）用双引号括起来。）

# c# - 如何为我使用过的 WCF HTTP 客户端清除 PooledBufferManager？

> ID：13294238
> 
> 赞同：3
> 
> 时间：2012-11-08T17:18:17.743
> 
> 标签：c#, .net, wcf, buffer-manager

我有一个 WCF 客户端应用程序，它发出一个具有非常大响应 (1GB) 的服务调用。我发现进行此服务调用会使用大量内存（500MB），即使我的代码不再引用响应对象，这些内存似乎也永远不会被回收。

我使用内存分析器查看了大部分内存使用情况是由 PooledBufferManager 实例创建的字节数组。

我使用的代理/客户端是由 Visual Studio 自动生成的，所以它是一个派生自 System.ServiceModel.ClientBase<TChannel> 的类。

我正在使用具有以下配置的自定义绑定：

```
 <customBinding>
    <binding name="foo"
             closeTimeout="00:01:00"
             openTimeout="00:01:00"
             receiveTimeout="00:01:00"
             sendTimeout="00:01:00">
      <transactionFlow/>
      <reliableSession ordered="true" inactivityTimeout="00:02:00"/>
      <security authenticationMode="SecureConversation" messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10">
        <secureConversationBootstrap messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10">
          <localClientSettings maxClockSkew="23:59:00"/>
        </secureConversationBootstrap>
        <localClientSettings maxClockSkew="23:59:00"/>
      </security>
      <mtomMessageEncoding>
        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
      </mtomMessageEncoding>
      <httpTransport maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"/>
    </binding>
  </customBinding> 
```

阅读周围的人谈论一些解决方案：

*   切换到流式响应模式而不是缓冲，但我相信这是用于 TCP WCF 连接，而不是像我这样的 HTTP。
*   将 maxBufferPoolSize 设置为零以禁用缓冲池。在 httpTransport 元素中设置它似乎对我没有任何影响。
*   在适当的 BufferManager/PooledBufferManager 上调用 Clear()。我无法从我拥有的 ClientBase 派生实例的上下文中找到要调用它的对象。我确实设法使用调试器找到了合适的 PooledBufferManager 实例，并深入挖掘了许多级别到私有 innerChannelFactory 字段，但这对于从代码中与之交互没有用处。
*   手动调用 GC.Collect() 似乎回收了剩余的 500MB 中的大约 50MB。

尽可能多地回收此一次性服务调用所使用的内存的最佳方法是什么？我即将在一个专用进程中进行服务调用，此时我可以杀死以回收内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-08T05:22:32.767

> *   切换到流式响应模式而不是缓冲，但我相信这是用于 TCP WCF 连接，而不是像我这样的 HTTP。

即使使用 http，您实际上也可以像我对[https](https://stackoverflow.com/a/7253103/709537)所做的那样切换到流式传输模式，但**http**也可以[正常](https://stackoverflow.com/questions/4043683/wcf-httptransport-streamed-vs-buffered-transfermode)**[工作](http://msdn.microsoft.com/en-us/library/ms789010%28v=vs.110%29.aspx)**。

只需为您的元素添加一个`transferMode="Streamed"`属性。`httpTransport`由于您关心客户，因此您需要在客户中执行此操作`app.config`。（您也可以在服务器的 web.config 中独立完成，如果您还想将服务器更改为`streamed`模式。但无需更改客户端和服务器，传输模式不会更改线路上的字节）

> *   将 maxBufferPoolSize 设置为零以禁用缓冲池。在 httpTransport 元素中设置它似乎对我没有任何影响。

这正是[本文](http://obsessivelycurious.blogspot.ru/2008/04/wcf-memory-buffer-management.html)声称应该起作用的：

 *> *如果 maxBufferPoolSize = 0，则创建一个 GCBufferManager，否则你将获得一个 PooledBufferManager。前者是微不足道的，实际上并没有真正做任何管理，只是为任何请求分配一个新的缓冲区，并让垃圾收集器负责处理它。*

即`GC.Collect()`在这种情况下，手册实际上可以解决问题。

> *   在适当的 BufferManager/PooledBufferManager 上调用 Clear()。我无法从我拥有的 ClientBase 派生实例的上下文中找到要调用它的对象。

当我尝试访问时，我也无法访问该 BufferManager 实例。

> *   手动调用 GC.Collect() 似乎回收了剩余的 500MB 中的大约 50MB。

不适用于池化缓冲区管理器，因为它一旦创建就永远不会释放缓冲区，除非您调用`Clear()`缺少指向实例的指针，但您不能这样做。*

# delphi - 转换从非零值开始的 C 枚举时，是否真的需要手动填充值？

> ID：13294239
> 
> 赞同：3
> 
> 时间：2012-11-08T17:18:21.023
> 
> 标签：delphi

在[JEDI Windows API](http://sourceforge.net/projects/jedi-apilib/)`JwaNtSecApi.pas`中，C [SECURITY_LOGON_TYPE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380129%28v=vs.85%29.aspx)被翻译成 Delphi 如下：`enum`

```
SECURITY_LOGON_TYPE = (
  seltFiller0,
  seltFiller1,
  Interactive,
  Network,
  Batch,
  Service,
  Proxy,
  Unlock,
  NetworkCleartext,
  NewCredentials,
  RemoteInteractive,
  CachedInteractive,
  CachedRemoteInteractive,
  CachedUnlock
);
PSECURITY_LOGON_TYPE = ^SECURITY_LOGON_TYPE; 
```

转换从非零值开始的 C 枚举时，手动填充值是否真的必要？

手动填充值是否只是旧 Delphi 编译器的一种解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:32:23.473

> 转换从非零值开始的 C 枚举时，是否真的需要手动填充值？

不，它们不是必需的。如果您使用 Delphi 6 或更高版本进行编译，您可以这样编写：

```
SECURITY_LOGON_TYPE = (
  Interactive = 2,
  Network,
  ... 
```

事实上，我相信在 Delphi 6 中引入此功能的原因是为了更容易编写 C 标头翻译。这与 Delphi 6 开发阶段有关，因为它与 Kylix 的第一个版本密切相关，当然与 Linux C 库有很多交互。

# jquery - 使用 jQuery 触发 RadMenu 下拉动作

> ID：13294243
> 
> 赞同：4
> 
> 时间：2012-11-08T17:18:30.397
> 
> 标签：jquery, telerik, radmenu

我有一个带有下拉菜单的基于动态的 Radmenu。

我希望用户单击站点上的图像（而不是菜单），然后它会自动触发下拉菜单从带有 jQ​​uery 的 Telerik 菜单中出现。这可能吗？

加载站点后的客户端 HTML：

```
<div id="ctl00_RadMenu1" class="RadMenu RadMenu_Hay rmSized" style="width: 960px; left: 0px; top: 0px; z-index: 10000; ">
    <ul class="rmRootGroup rmHorizontal">
        <li class="rmItem rmFirst">
            <a href="http://test.com" class="rmLink rmRootLink"><span class="rmText rmExpandDown">Test Dropdown 1</span></a>
            <div class="rmSlide">
                <ul class="rmVertical rmGroup rmLevel1">
                    <li class="rmItem rmFirst">
                        <a href="http://test.com" class="rmLink"><span class="rmText">Dropdown Item 1</span></a>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:41:55.353

我想你正在寻找这个......

```
$('#theImage').click(function(){
    var menu = $find("<%= RadMenu1.ClientID %>");
    var item = menu.findItemByText('Test Dropdown 1');
    if (item) {
        item.open();
    } else {
        alert('the item ' + text + ' was not found');
    }
}); 
```

您可以在这里阅读更多相关信息：[http ://www.telerik.com/help/aspnet-ajax/menu-client-side-basics.html](http://www.telerik.com/help/aspnet-ajax/menu-client-side-basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T06:31:31.320

您可以尝试触发 jquery [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

```
 $(".rmLink").trigger('click'); 
```

# ruby-on-rails - 如何在 Ruby 应用程序中使用 CMU Sphinx 语音识别？

> ID：13294252
> 
> 赞同：7
> 
> 时间：2012-11-08T17:18:51.233
> 
> 标签：ruby-on-rails, ruby, cmusphinx

我正在寻找如何将 CMU Sphinx 与 Ruby (Rails) 应用程序一起使用。我需要非常简单的任务 - 我有一个 mp3 文件，我想把它转录成文本。

我怎样才能实现这个最简单的方法？我不知道 C/C++，而且我的任务并不是为它学习 C/C++ :)

感谢帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T12:23:07.057

CMUSphinx 提供了几个接口，您可以使用它们来利用语音识别功能。其中一些可能更适合您，一些则更少：

1.  使用命令行工具并将它们作为 Rails 应用程序的外部二进制文件执行以获得所需的结果。要执行的工具是*pocketsphinx_continuous*。有关如何从 Rails 调用二进制文件的更多信息，请参阅问题： [如何在 heroku 上执行二进制文件？](https://stackoverflow.com/questions/5979704/how-to-execute-binary-on-heroku)

2.  您可以使用 JVM 从 JRuby 调用 Sphinx4 框架，例如如何从[JRuby](http://jruby.org/)使用 Sphinx4 ：[http ://cmusphinx.sourceforge.net/wiki/tutorialsphinx4#writing_scripts](http://cmusphinx.sourceforge.net/wiki/tutorialsphinx4#writing_scripts)

3.  [您可以使用SWIG](http://swig.org/)实现 pocketsphinx 绑定。简单的部分是 Python 的 swig 包装器已经作为 pocketsphinx 的一部分存在，你只需要使用 SWIG 来生成 Ruby 包装器：[https ://sourceforge.net/p/cmusphinx/code/11643/tree/trunk/口袋狮身人面像/痛饮/](https://sourceforge.net/p/cmusphinx/code/11643/tree/trunk/pocketsphinx/swig/)

4.  最后，您可以使用 Java REST 框架实现 REST Web，以使用 CMUSphinx 工具将音频转换为文本，并从您的 Ruby 代码中调用服务。有关更多信息，请参阅如何使用[Rails 中的 REST](http://www.ibm.com/developerworks/java/library/j-cb08016/) 这种方式可以使您的系统真正具有可扩展性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-21T17:49:48.010

我最近为此创建了一个 gem：

[https://github.com/watsonbox/pocketsphinx-ruby](https://github.com/watsonbox/pocketsphinx-ruby)

它使用 Ruby 外部函数接口 (FFI) 直接与 libpocketsphinx 交互。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T22:40:11.410

也许看看这个使用 PocketSphinx 的基于 Ruby 的语音识别网络服务：

[https://github.com/alumae/ruby-pocketsphinx-server](https://github.com/alumae/ruby-pocketsphinx-server)

# python - 用 scipy.sparse 计数

> ID：13294254
> 
> 赞同：6
> 
> 时间：2012-11-08T17:18:56.510
> 
> 标签：python, nlp, scipy, sparse-matrix, scikit-learn

我正在使用 Python sklearn 库。我有 150,000 多个句子。

我需要一个类似数组的对象，其中每一行代表一个句子，每一列对应一个单词，每个元素是该句子中单词的数量。

例如：如果这两个句子是“The dog ran”和“The boy ran”，我需要

```
[ [1, 1, 1, 0]
, [0, 1, 1, 1] ] 
```

（列的顺序无关紧要，取决于哪个列分配给哪个单词）

我的数组将是稀疏的（每个句子都有一小部分可能的单词），所以我使用的是 scipy.sparse。

```
def word_counts(texts, word_map):
    w_counts = sp.???_matrix((len(texts),len(word_map)))

    for n in range(0,len(texts)-1):
        for word in re.findall(r"[\w']+", texts[n]):
            index = word_map.get(word)
            if index != None:
                w_counts[n,index] += 1
    return w_counts

...
nb = MultinomialNB() #from sklearn
words = features.word_list(texts)
nb.fit(features.word_counts(texts,words), classes) 
```

我想知道什么稀疏矩阵最好。

我尝试使用 coo_matrix 但出现错误：

> TypeError：“coo_matrix”对象没有属性“__getitem__”

我查看了COO的[文档，但](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html#scipy.sparse.coo_matrix)**对以下内容感到非常困惑**：

> 稀疏矩阵可用于算术运算……
> COO格式的缺点……不直接支持：算术运算

我使用了 dok_matrix，效果很好，但我不知道这在这种情况下是否表现最好。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T17:22:07.920

尝试`lil_matrix`要么`dok_matrix`; 这些很容易构建和检查（但在 的情况下`lil_matrix`，可能会非常慢，因为每次插入都需要线性时间）。接受稀疏矩阵的 Scikit-learn 估计器将接受任何格式并在内部将它们转换为有效的格式（通常`csr_matrix`）。您也可以使用矩阵上的方法`tocoo`、`todok`等自己进行转换。`tocsr``scipy.sparse`

或者，只需使用scikit-learn 提供的[`CountVectorizer`](http://scikit-learn.org/dev/modules/feature_extraction.html#common-vectorizer-usage)or类来实现此目的。将整个文档作为输入：[`DictVectorizer`](http://scikit-learn.org/dev/modules/feature_extraction.html#loading-features-from-dicts)`CountVectorizer`

```
>>> from sklearn.feature_extraction.text import CountVectorizer
>>> documents = ["The dog ran", "The boy ran"]
>>> vectorizer = CountVectorizer(min_df=0)
>>> vectorizer = CountVectorizer(min_df=0, stop_words=[])
>>> X = CountVectorizer.fit_transform(documents)
>>> X = vectorizer.fit_transform(documents)
>>> X.toarray()
array([[0, 1, 1, 1],
       [1, 0, 1, 1]]) 
```

...虽然`DictVectorizer`假设您已经完成了标记化和计数，结果在`dict`每个样本中：

```
>>> from sklearn.feature_extraction import DictVectorizer
>>> documents = [{"the":1, "boy":1, "ran":1}, {"the":1, "dog":1, "ran":1}]
>>> X = vectorizer.fit_transform(documents)
>>> X.toarray()
array([[ 1.,  0.,  1.,  1.],
       [ 0.,  1.,  1.,  1.]])
>>> vectorizer.inverse_transform(X[0])
[{'ran': 1.0, 'boy': 1.0, 'the': 1.0}] 
```

（`min_df`参数 to`CountVectorizer`是在几个版本前添加的。如果您使用的是旧版本，请忽略它，或者更确切地说，升级。）

**编辑**根据常见问题解答，我*必须*公开我的从属关系，所以这里是：我`DictVectorizer`是`CountVectorizer`.

# android - Android AppWidgetManager 方法 getAppWidgetIds 返回空数组

> ID：13294264
> 
> 赞同：6
> 
> 时间：2012-11-08T17:19:45.537
> 
> 标签：android, android-appwidget

我的应用程序在服务中更新，首先这样做是为了获取小部件的 id：

```
AppWidgetManager widgetManager = AppWidgetManager.getInstance(this);
int[] widgetIds = widgetManager.getAppWidgetIds(new ComponentName(this, WidgetReceiver.class)); 
```

有时，即使小部件仍在主屏幕上，此方法也会返回一个空数组。我四处寻找，找不到任何关于此的信息。问题是它并不总是会发生，只是有时会发生（尽管一旦发生它似乎在随后的更新尝试中不会成功）。

有没有人遇到过这个问题，并且更好地找到了解决方案？非常感激。

# r - for循环和填充导致R中的空矩阵

> ID：13294266
> 
> 赞同：1
> 
> 时间：2012-11-08T17:20:02.813
> 
> 标签：r, for-loop, matrix

我试图用从 for 循环计算的结果填充一个空矩阵。我不知道如何在我的 for 循环中指定索引，即，现在我的 for 循环代码不起作用，我无法将结果放入我的矩阵中。

这是我的数据的一个子集：

```
> dput(eg)
structure(list(month = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("7", 
"8", "9", "10", "11"), class = "factor"), LONG = c(980.744064583783, 
983.838644208237, 978.459941419921, 984.841644157878, 968.200358699171, 
967.552217901586, 981.077638048121, 975.435563330951, 982.123246960536, 
975.383981047645, 978.181377755365, 975.001205420472, 980.410452250835, 
971.112535576725, 980.744064583783, 981.789215313314, 982.835292295612, 
975.435563330951, 982.457239633824, 976.095788761194, 977.468633236679, 
983.50423264086, 985.221850881562, 983.838644208237, 980.410452250835, 
970.785922305654, 983.838644208237, 981.789215313314, 975.435563330951, 
968.457651588967, 981.744668260738, 976.807567823793, 975.765695304413, 
977.850367309317, 967.487216377624, 967.487216377624, 981.121035207435, 
970.785922305654, 981.455144719747, 976.372538872237, 947.785924542022, 
949.961077537064, 953.277469897636, 956.588193000174, 954.107424886471, 
969.362874319781, 967.61505086351, 986.40950486552, 989.671406838413, 
914.2401235585), LAT = c(7497.04118692311, 7488.13522468594, 
7485.26645510239, 7482.63600422376, 7489.1136371139, 7492.78277930456, 
7495.20802780153, 7497.97375736711, 7493.50450717453, 7494.17837952228, 
7490.89595766574, 7492.21670554412, 7498.87433550932, 7493.41424827727, 
7497.04118692311, 7495.33760219375, 7493.63434928842, 7497.97375736711, 
7491.67140156528, 7494.30641015495, 7490.76739320858, 7489.96827686286, 
7484.59949728804, 7488.13522468594, 7498.87433550932, 7495.2484410159, 
7488.13522468594, 7495.33760219375, 7497.97375736711, 7483.48377437677, 
7491.5416779275, 7494.4346337625, 7496.14008888173, 7492.72950917327, 
7488.98777760417, 7488.98777760417, 7499.00376048698, 7495.2484410159, 
7497.17068662916, 7488.67706076623, 7444.0453546661, 7444.40653631031, 
7446.84930605798, 7449.2962767147, 7450.76636540362, 7494.995420297, 
7496.57764523632, 7465.87604399919, 7468.36476722201, 7434.9359208897
)), .Names = c("month", "LONG", "LAT"), row.names = c(740L, 741L, 
742L, 743L, 751L, 762L, 773L, 784L, 795L, 806L, 817L, 828L, 744L, 
745L, 746L, 747L, 748L, 749L, 750L, 752L, 753L, 754L, 755L, 756L, 
757L, 758L, 759L, 760L, 761L, 763L, 764L, 765L, 766L, 767L, 768L, 
769L, 770L, 771L, 772L, 774L, 775L, 776L, 777L, 778L, 779L, 780L, 
781L, 782L, 783L, 785L), class = "data.frame") 
```

这是我到目前为止所做的：

```
# CREATE AN EMPRTY MATRIX FOR RESULTS
    nrow<-3 #there are 3 results calculated for each ncol
    ncol<-length(unique(eg$month))
    total<-matrix(0,nrow=nrow,ncol=ncol)

    month<-unique(eg$month)
    library(spatstat) #need spatstat for calculating the window & nndist
    W2<-ripras(eg$LONG,eg$LAT) #defining the window

    # FOR LOOP TO CALCULATE NNDIST < & > 1KM & == 0KM FOR EACH MONTHLY POINT PATTERN 

    for(i in month){
      m<-subset(eg, month==i) #subsetting my data for each month
      mp<-ppp(m$LONG,m$LAT,window=W2) #creating a point pattern
      nnd<-nndist(mp) #calculating the nearest neighbour in a point pattern
      total[1,i]<-length(nnd[which(nnd>1)]) #Filling up the matrix with results 1
      total[2,i]<-length(nnd[which(nnd==0)]) 
      total[3,i]<-length(nnd[which(nnd<1)])
    } 
```

我收到此错误消息：

```
Error in total[1, i] <- length(nnd[which(nnd > 1)]) : 
  no 'dimnames' attribute for array 
```

**编辑：**

谢谢@SvenHohenstein，我需要使用 for(i in seq_along(month)) 或 for (i in 1:length(month))，但问题是我的月份是“7”和“8”级别的因素。

在运行循环之前，我必须先重命名我的因子级别（现在可以工作了！）。但是，是否有另一种方法可以在不重命名因子的情况下做到这一点？

```
levels(eg$month)<-c(1:2) 
for(i in 1:length(month)){
  m<-subset(DF, month==i) #subsetting my data for each month
  mp<-ppp(m$LONG,m$LAT,window=W2) #creating a point pattern
  nnd<-nndist(mp) #calculating the nearest neighbour in a point pattern
  total[1,i]<-length(nnd[nnd>1]) #Filling up the matrix with results 1
  total[2,i]<-length(nnd[nnd==0]) 
  total[3,i]<-length(nnd[nnd<1])
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:44:05.593

这应该有效：

```
for(i in 1:length(month)){
  mo <- month[i]
  m<-subset(eg, month==mo) #subsetting my data for each month
  mp<-ppp(m$LONG,m$LAT,window=W2) #creating a point pattern
  nnd<-nndist(mp) #calculating the nearest neighbour in a point pattern
  total[1,i]<-length(nnd[nnd>1]) #Filling up the matrix with results 1
  total[2,i]<-length(nnd[nnd==0]) 
  total[3,i]<-length(nnd[nnd<1])
} 
```

作为替代方案（没有`for`循环）：

```
library(spatstat)
W2 <- ripras(eg$LONG, eg$LAT)

dat <- setNames(rep(0, 3), c(1, 0, -1))

do.call(cbind,
        lapply(split(eg, eg$month, drop = TRUE),
               function(m) {
                 tab <- rev(table(sign(nndist(ppp(m$LONG, m$LAT, window = W2)))))
                 dat[match(names(tab), names(dat))] <- tab
                 return(dat)
               })) 
```

# vim - 如何检查 vim 编译时使用了哪些选项？

> ID：13294267
> 
> 赞同：100
> 
> 时间：2012-11-08T17:20:02.450
> 
> 标签：vim

我想知道我的 Vim 二进制文件使用了哪些编译选项。有没有办法查询这个？

具体来说，我感兴趣的是它是否启用了 Python 支持。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-11-08T17:37:47.513

您可以通过执行查看 vim 编译的所有内容

```
:version 
```

要查询像 python 这样的确切功能，您可以使用该`has()`功能与您正在寻找的功能。下面的代码如果具有该功能将返回 1，如果没有，则返回 0。

```
:echo has('python') 
```

有关功能列表，请参阅`:h +feature-list`

有关更多信息，请参阅：

```
:h :version
:h has(
:h feature-list 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-08T17:27:53.567

使用`vim --version`. 我的显示：

```
$ vim --version
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Jun 20 2012 13:16:02)
Compiled by root@apple.com
Normal version without GUI.  Features included (+) or not (-):
-arabic +autocmd -balloon_eval -browse +builtin_terms +byte_offset +cindent 
-clientserver -clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments 
-conceal +cryptv +cscope +cursorbind +cursorshape +dialog_con +diff +digraphs 
-dnd -ebcdic -emacs_tags +eval +ex_extra +extra_search -farsi +file_in_path 
+find_in_path +float +folding -footer +fork() -gettext -hangul_input +iconv 
+insert_expand +jumplist -keymap -langmap +libcall +linebreak +lispindent 
+listcmds +localmap -lua +menu +mksession +modify_fname +mouse -mouseshape 
-mouse_dec -mouse_gpm -mouse_jsbterm -mouse_netterm -mouse_sysmouse 
+mouse_xterm +multi_byte +multi_lang -mzscheme +netbeans_intg -osfiletype 
+path_extra -perl +persistent_undo +postscript +printer -profile +python/dyn 
-python3 +quickfix +reltime -rightleft +ruby/dyn +scrollbind +signs 
+smartindent -sniff +startuptime +statusline -sun_workshop +syntax +tag_binary 
+tag_old_static -tag_any_white -tcl +terminfo +termresponse +textobjects +title
-toolbar +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo 
+vreplace +wildignore +wildmenu +windows +writebackup -X11 -xfontset -xim -xsmp
-xterm_clipboard -xterm_save 
  system vimrc file: "$VIM/vimrc"
    user vimrc file: "$HOME/.vimrc"
     user exrc file: "$HOME/.exrc"
 fall-back for $VIM: "/usr/share/vim"
Compilation: gcc -c -I. -D_FORTIFY_SOURCE=0 -Iproto -DHAVE_CONFIG_H -arch i386 -arch x86_64 -g -Os -pipe
Linking: gcc -arch i386 -arch x86_64 -o vim -lncurses 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-08T17:27:15.890

使用`vi --version`，它显示编译选项和编译器命令。

# jboss5.x - Jboss 5 根据不同的 URL 路径监听不同的 ip 地址

> ID：13294269
> 
> 赞同：0
> 
> 时间：2012-11-08T17:20:04.857
> 
> 标签：jboss5.x

我们想要强化我们的 Jboss 服务器。我们有一个 Web 应用程序，这个 Web 应用程序中有两种类型的资源 'https://myserver:8443/myapp/local/' 'https://myserver:8443/myapp/intranet/'

我们只希望 /myapp/local 能够从 localhost 127.0.0.1 访问，而 /myapp/intranet/ 可以从内部网络的另一个地址访问，例如 192.168.12.12。我们有什么办法可以配置它吗？谢谢！

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:45:21.910

我自己找到了答案。希望这对有一天遇到这种情况的人有所帮助。这是解决方案 [https://community.jboss.org/wiki/LimitAccessToCertainClients](https://community.jboss.org/wiki/LimitAccessToCertainClients)

# python - 在 python 烧瓶中为 neo4j + sql 制作 ORM 的最干净方法？一个模型超过 2 个数据库

> ID：13294276
> 
> 赞同：4
> 
> 时间：2012-11-08T17:20:41.110
> 
> 标签：python, orm, flask, neo4j, flask-sqlalchemy

如何在 Flask 中创建一个与两个数据库对话的模型，其中一个是 sqlite，另一个是 neo4j？

我想在传统数据库中有登录名和密码的东西，并在 neo4j 中保留其他图形信息。有人告诉我 neo4j 不适合需要大图遍历的东西。也许我需要这个是错误的，但我有一个实例，我想说......“ `return a dict(person.x,person.y,person.z) from all nodes where type==person`”，然后将其输入到我的索引页面的视图中。

我已经看到有关 ORM 与 neo4j 的相关问题： [ORM with Graph-Databases like Neo4j in Python](https://stackoverflow.com/questions/8356626/orm-with-graph-databases-like-neo4j-in-python)

...关于 Flask 中的多个数据库： [http ://packages.python.org/Flask-SQLAlchemy/binds.html](http://packages.python.org/Flask-SQLAlchemy/binds.html)

具体来说，我看到这采取了我的 create 语句写入 sqlite db 连接的形式，然后从那里写入一个密钥到 neo4j 中的其他关系信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T10:01:58.360

我最近为 py2neo ( [http://book.py2neo.org/en/latest/ogm.html](http://book.py2neo.org/en/latest/ogm.html) ) 发布了一个 OGM (Object-Graph Mapping) 模块。这可能有助于您尝试做的事情。

否则，您还可以查看 neomodel ( [https://github.com/robinedwards/neomodel](https://github.com/robinedwards/neomodel) )。它是为 Django 编写的，但也应该可以在 Flask 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T18:48:30.033

我不了解混合后端模型，但我认为根据您的用户数量，您也可以为您的用户使用 neo4j。如果将用户节点放入索引中，则无需搜索图即可获取所有用户。

如果您发现这实际上是一个瓶颈，那么将其迁移到拆分存储应该不会太困难。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-21T08:18:45.290

使用 neo4j-driver 和 py2neo 并不难。烧瓶登录。我已经使用 py2neo 并且运行良好，但现在迁移到 neo4j-driver 缺点是我没有设法让它与例如 SQLalchemy 等一起工作。使用双后端解决方案不是问题，在我使用过的早期项目中SQLalchemy 与 SQLite3 和 PostgreSQL、Neo4j 和 redis 一起使用。使用它，除了一些设计问题外，我没有发现任何问题。

# java - 如何避免在递归类中设置全局变量

> ID：13294278
> 
> 赞同：-2
> 
> 时间：2012-11-08T17:20:53.943
> 
> 标签：java

我在递归类中有一个全局变量，每次调用它时，都会创建变量。开始的变量是：int count = 0，然后在我的方法中增加：count++，问题是当再次调用类时，变量被重置为零。我需要变量“计数”保持在 1 中，以便在每次调用中再次增加到 2、3、4 .... 等

我尝试这样做：`private static int count = 0;`但不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:36:53.073

在代码中搜索对您的`count`变量的所有引用。最有可能的是，您以某种方式重新设置为 0。例如：

```
private class MyClass {

    private static int count = 0;

    public MyClass() {
        count = 0; //Bad line
    }

    public void incrementCount() {
        count++;
    }

} 
```

如果您有类似的东西，那么每次创建新对象时，您都会将**所有 MyClass objects**`MyClass`重置`count`为 0 。

 **但是您确实需要将您的课程代码添加到您的问题中。否则我们无能为力。**

# xml - 在 .XML 中的 URL 链接中使用 & 符号

> ID：13294289
> 
> 赞同：0
> 
> 时间：2012-11-08T17:21:23.050
> 
> 标签：xml, url

我正在尝试在 xml 中使用包含 & 符号的 URL。有任何想法吗？

```
> <data> <event   start="Nov 25 2012 12:00AM"  end="Dec 31 2012 12:00AM"
> link="getfile.php?table=dbo_MPD_Library_Active
> filename=CompStat-**&**Holiday Presence
> Presentation.pdf**&**field=file key1=2"    title="2012 Holiday
> presents"></event> </data> 
```

如果我删除 & 符号并留下空格，则 url 会转到空白页，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:21:57.880

`&`指示XML 中[字符或实体引用的开始。](http://www.w3.org/TR/xml/#dt-charref)如果你想要一个 & 作为数据，你必须使用一个字符或实体引用来表示它：`&amp;`.

# vbscript - 如何运行命令以使用系统帐户从 vbs 脚本中设置凭据？

> ID：13294291
> 
> 赞同：0
> 
> 时间：2012-11-08T17:21:35.163
> 
> 标签：vbscript, hmail-server

救命！
在我的服务器上，我正在运行 hMailServer，并且该服务使用本地系统帐户。

我需要将文件复制到另一台机器。所以我有一个脚本，它将使用 cmdkey.exe 保存凭据，然后复制文件。

如果我在登录服务器时自己运行此功能（在独立的 vbs 文件中），它可以工作，但我是管理员。但是，如果我让 hMailServer 服务运行此函数，该函数运行，但它总是说目标不存在。

请注意，我已注释掉凭据的删除。如果我去服务器并运行，`cmdkey /list`我会看到从未设置凭据，这意味着命令失败。这意味着凭据的第一次设置也可能失败，这就是为什么“objFSO”找不到目录的原因。

同样，如果我将所有这些放在一个单独的文件中并`test.vbs`通过双击该文件来运行它，它就可以工作。但是如果我在 hMailServer 中使用它，它就会失败。

我想这意味着 hMailServer （本地系统帐户）无权设置凭据？我怎样才能让它工作？

```
option explicit

dim SPcopyMessage
SPcopyMessage = CopyFileToRemoteMachine("SERVER", "mydomain\username", "password", "c:\test2.txt", "\\SERVER\somefolder\otherfolder")
MsgBox SPcopyMessage

function CopyFileToRemoteMachine(whatMachine, whatUsername, whatPassword, whatSourceFile, whatDestination)
    dim errormessage, CredentialCreate, CredentialDelete
    errormessage    = "Sharepoint Mail Delivered"
    CredentialCreate = "cmd.exe /c cmdkey /add:" & whatMachine & " /user:" & whatUsername & " /pass:" & whatPassword

    Dim objShell, objFSO
    Set objShell = CreateObject("WScript.Shell")
    Set objFSO = CreateObject("Scripting.FileSystemObject")

    CALL objShell.Run(CredentialCreate, 0, True)        'add username to the credentials list

    If objFSO.FileExists(whatSourceFile) Then
          If objFSO.FolderExists(whatDestination) Then
            If Right(whatDestination, 1) <> "\" Then
                  whatDestination = whatDestination & "\"
            End If        
            objFSO.CopyFile whatSourceFile, whatDestination, True
          Else
                errormessage = "Destination does not exist: " & whatDestination
          End If
    Else
          errormessage = "Source file does not exist: " & whatSourceFile
    End If

    'CredentialDelete = "cmd.exe /c cmdkey /delete:" & whatMachine
    'CALL objShell.Run(CredentialDelete, 0, True)

    set objFSO = nothing
    set objShell = nothing

    CopyFileToRemoteMachine = errormessage
end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:35:43.463

想了个办法！首先，我确保将目的地共享给 machine2 上的正确用户帐户。然后在 machine1 上制作脚本来映射网络驱动器，然后复制文件。只要 N 驱动器从未用于该机器上的其他任何东西，这将起作用。

这是代码是否对任何人有帮助！

```
function CopyFileToRemoteMachine(whatMachine, whatUsername, whatPassword, whatSourceFile, whatDestination)
    dim errormessage, mdrive
    errormessage    = "File successfully copied"

    mdrive = "N:"

    Dim objFSO, objNetwork
    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objNetwork = CreateObject("Wscript.Network")

    If not objFSO.FileExists(mdrive)  Then
        objNetwork.MapNetworkDrive mdrive, whatDestination, False, whatUsername, whatPassword
    End If

    If Right(whatDestination, 1) <> "\" Then
          whatDestination = whatDestination & "\"
    End If  
    If objFSO.FileExists(whatSourceFile) Then
          If objFSO.FolderExists(whatDestination) Then  
            objFSO.CopyFile whatSourceFile, whatDestination, True
          Else
                errormessage = "Destination does not exist: " & whatDestination
          End If
    Else
          errormessage = "Source file does not exist: " & whatSourceFile
    End If

    objNetwork.RemoveNetworkDrive mdrive,TRUE,TRUE

    set objFSO = nothing
    set objNetwork = nothing

    CopyFileToRemoteMachine = errormessage
end function 
```

# php - CodeIgniter：是否有一个字符串包含函数？

> ID：13294292
> 
> 赞同：1
> 
> 时间：2012-11-08T17:21:43.737
> 
> 标签：php, string, codeigniter

页面上的表格：

```
<div>
<?php echo form_open('add/player');
    echo form_label('First Name','playerFirstName');
    echo form_input('playerFirstName','test');
    echo "<br />";
    echo form_label('Last Name','playerLastName');
    echo form_input('playerLastName','test');
    echo "<br />";
    echo form_submit('addPlayer','Add Player');
    echo form_close(); ?>
</div> 
```

被称为控制器：

```
class Add extends CI_Controller
{
    public function index()
    {
        $this->load->view('header');
        $this->load->view('add');
        $this->load->view('footer');
    }

    public function Player()
    {
        if(strtoupper($_SERVER['REQUEST_METHOD']) == 'POST')
        {
            if(basename($_SERVER['HTTP_REFERER']) == basename($_SERVER['PHP_SELF']))
            {
                $this->load->model('players');
                $returnMessage = $this->players->add_player($this->input->post('playerFirstName'), $this->input-post('playerLastName'));
            }
        }
        $this->load->view('header');
        $this->load->view('addplayer');
        $this->load->view('footer');
    }
} 
```

当谈到 PHP、CodeIgniter 和 MySQL（或一般的 Web 编码）时，我是一个非常绿色的新手，所以如果你看到任何建议，请不要犹豫（尽管信用将给予那些谁谁回答我的问题，而不是让我的代码工作得最好）。但是，至于我的问题，有没有办法查看一个字符串是否在另一个字符串中？我的`$returnMessage`，如果成功的话，里面会有这个词`successfully`。我想要做的是*，如果*没有添加播放器，我想重新加载表单中的值并将它们放回去。这就是棘手的地方。

名称保存在表中`people_names`。在`players`表中，我将`nameid`与该名称关联的名称保存在`people_names`表中。在我的`add_player`函数中，我检查名称是否在表中，如果不是，我添加它们，然后我将播放器添加到`players`具有适当 ID 的表中。因此，我不确定`form_validation`是否可以使用。如果是，请告诉我。

所以我想要做的是检查`$returnMessage`，如果它不包含`successfully`，那么我想将值添加回字段。但是，我没有找到可以查看字符串是否在另一个字符串中的函数。我看到字符串比较和子字符串函数，但没有字符串包含。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:24:11.013

使用原生 PHP `strpos`： http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:27:51.507

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

```
if (strpos($returnMessage,'successfully') !== false) {
 echo 'true';
} 
```

# ios - 我应该如何在 CoreData 中为键/值对建模？

> ID：13294303
> 
> 赞同：0
> 
> 时间：2012-11-08T17:22:29.470
> 
> 标签：ios, core-data, data-modeling

我正在使用 CoreData 来存储以下类：

```
@interface TripSegment : NSManagedObject

@property (nonatomic, retain) NSString * details;
@property (nonatomic, retain) NSDate * endsOn;
@property (nonatomic, retain) NSString * segmentCategory;
@property (nonatomic, retain) NSDate * startsOn;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * tripSegmentId;
@property (nonatomic, retain) ContextCard *contextCard;
@property (nonatomic, retain) Location *endsAt;
@property (nonatomic, retain) Location *startsAt;
@property (nonatomic, retain) Trip *trip;

@end 
```

对于某些 TripSegments（例如航班），我会返回一些额外的数据，例如确认号码或座位分配。我想以灵活的方式存储这些数据，这样当我发现更多有用的东西要呈现在 UI 中时，我可以将其包含在服务中并开始使用它，而无需迁移模型或处理复杂的类层次结构.

如何将键/值添加到 CoreData 存储中持久的对象？或者我是否必须创建特定的类来表示航班或酒店住宿，并通过关系将它们分开保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:46:43.313

在我看来，您有几个选择。

1.  您可以将 Binary Data 属性添加到您的`TripSegment`类中，并使用 a`NSKeyedArchiver`将`NSDictionary`存储额外的属性转换为`NSData`
2.  `TripSegment`您可以实现自己的通用键/值对核心数据对象，并在您和该类之间建立一对多的关系。
3.  您可以将您的额外数据与 JSON 相互转换`NSJSONSerialization`，并将其作为 String 属性存储在您的`TripSegment`类中。

我认为这真的取决于你想如何使用你得到的额外数据。如果您需要能够独立于 查询属性`TripSegment`（例如，获取所有已分配的座位分配），那么最好有一个单独的键/值样式类。如果您需要 CD 数据将二进制信息存储为接收到的额外信息的一部分，那么 JSON 序列化可能不是最佳选择，因为数据大小可能会随着 base64 转换而爆炸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:11:48.473

正如我在@rickerbh 的回答中指出的那样，如果您确实需要在运行时添加自定义属性，我会选择选项#2——我认为您不需要

我知道您只是不想很好地迁移...只需将您的妈妈变成妈妈并对其进行版本化。只要您只是在模型中添加或重命名属性，coredata 就可以透明地迁移 => 对您没有用 :)

这是最干净的IMO

# task - openmp任务最终

> ID：13294306
> 
> 赞同：0
> 
> 时间：2012-11-08T17:22:46.323
> 
> 标签：task, openmp, final

关于任务概念的最后一个子句，我有一点问题。下面的代码与 if-else 语句一起工作正常，该语句确保任务在递归快速排序实现的长度少于 100 个元素时中止。现在我想用最后一个子句来实现它，但我不工作。它比 if-else 语句慢得多

```
//if ( length > 100 ){
   #pragma omp task untied final(length < 100) mergeable
   do_something(a,c);
   #pragma omp task untied final(length < 100) mergeable
   do_something(b,c);
//}else{
//      do_something(a,c);
//      do_something(b,c);
//} 
```

# android - Android 登录表单 UI

> ID：13294307
> 
> 赞同：0
> 
> 时间：2012-11-08T17:23:07.923
> 
> 标签：android, user-interface

有谁知道如何在 Android 上创建带有弯曲编辑文本的登录表单？

比如像IOS：

![图像](../Images/8eed52eda52eeb5e0092ec461bae0314.png)

有什么好的 UI 教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:25:24.937

创建一个 9-patch 可绘制对象并将其定义为每个文本视图的背景。

但请记住，从不同平台复制 UI 元素不仅在任何平台上都是一种普遍的不良做法，而且不推荐，而是官方的 Android 设计指南。

[http://developer.android.com/design/patterns/pure-android.html](http://developer.android.com/design/patterns/pure-android.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:38:28.313

只需创建一个可绘制资源，指定 EditText 的绘制方式：

```
<?xml version="1.0" encoding="utf-8"?>
<!--  res/drawable/rounded_edittext.xml -->
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" android:padding="10dp">
<solid android:color="#FFFFFF"/>
<corners
 android:bottomRightRadius="15dp"
 android:bottomLeftRadius="15dp"
 android:topLeftRadius="15dp"
 android:topRightRadius="15dp"/>
</shape> 
```

然后，只需在您的布局中引用此可绘制对象：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<EditText  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:padding="5dip"
android:background="@drawable/rounded_edittext" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:33:43.697

我不隶属于他们，但它是一个非常棒的 UI 框架： http: [//kivy.org](http://kivy.org)

它适用于 Android [1]（和许多其他）并且是开源的（您可以在 Github 上找到它）

[1] [http://kivy.org/docs/guide/android.html](http://kivy.org/docs/guide/android.html)

# objective-c - Xcode Like 使用 NSTextView 的日志

> ID：13294310
> 
> 赞同：0
> 
> 时间：2012-11-08T17:23:21.797
> 
> 标签：objective-c, xcode, cocoa, nstextview

我正在尝试在 Xcode（或几乎任何其他可用的 IDE）中设置 NSTextView 之类的控制台。由于用户无法编辑 NSTextView，但是他们可以在适当的时候输入一个字符，我正在尝试设置相同的功能。不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:56:50.580

您可以简单地执行一个操作，将包含换行符、时间戳和所需文本的格式化字符串附加到文本视图。这是一个例子：

```
- (void)addToLog:(NSString *)input
{
    [[self.myTextView textStorage] appendAttributedString:[[NSAttributedString alloc] initWithString:[NSString stringWithFormat:@"\n%@: %@",[NSDate date],input]]];
} 
```

因此，`NSLog(@"some text");`您可以调用而不是使用`[self addToLog:@"some text"];`它，它将被添加到文本视图中的新行中。

# haskell - 不能使用带有haskell的glade xml文件

> ID：13294311
> 
> 赞同：7
> 
> 时间：2012-11-08T17:23:22.150
> 
> 标签：haskell, glade, gtk2hs

我不确定我是否应该打个招呼，这是我在这里的第一篇文章。

无论如何，我正在关注[gtk2hs 网站上](http://projects.haskell.org/gtk2hs/docs/tutorial/glade/)的 glade 教程。代码编译正确，但是当我尝试执行它时出现此错误。

```
(hellogtk2hs:8670): libglade-WARNING **: Expected <glade-interface>.  Got <interface>.
(hellogtk2hs:8670): libglade-WARNING **: did not finish in PARSER_FINISH state
hellogtk2hs: user error (Pattern match failure in do expression at HelloGtk2Hs.hs:8:8-15) 
```

这是我的林间空地文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window1">
    <property name="can_focus">False</property>
    <child>
      <object class="GtkBox" id="box1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="orientation">vertical</property>
        <property name="homogeneous">True</property>
        <child>
          <object class="GtkLabel" id="label1">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">Write your name here: </property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkEntry" id="entry1">
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="invisible_char">●&lt;/property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">1</property>
          </packing>
        </child>
        <child>
          <object class="GtkBox" id="box2">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="homogeneous">True</property>
            <child>
              <object class="GtkButton" id="button1">
                <property name="label">gtk-apply</property>
                <property name="visible">True</property>
                <property name="can_focus">True</property>
                <property name="receives_default">True</property>
                <property name="use_stock">True</property>
                <property name="always_show_image">True</property>
              </object>
              <packing>
                <property name="expand">False</property>
                <property name="fill">True</property>
                <property name="position">0</property>
              </packing>
            </child>
            <child>
              <object class="GtkButton" id="button2">
                <property name="label">gtk-close</property>
                <property name="visible">True</property>
                <property name="can_focus">True</property>
                <property name="receives_default">True</property>
                <property name="use_stock">True</property>
                <property name="always_show_image">True</property>
              </object>
              <packing>
                <property name="expand">False</property>
                <property name="fill">True</property>
                <property name="position">1</property>    
              </packing>
            </child>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">2</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

林间空地文件与我的源代码位于同一目录中。源代码与教程中的源代码完全相同。我以前从未与 glade 合作过，所以我不知道出了什么问题。

我不得不将 ghc 从 7.6 降级到 7.4.2。我正在使用 glade 3.14.1，所有其他软件包都是通过 cabal 安装的，因此它们使用的是当前版本。

如果我用*glade-interface切换**界面*，在开始和结束时它仍然会抱怨。

 *```
(hellogtk2hs:9636): libglade-WARNING **: Unexpected element <object> inside <glade-interface>.
hellogtk2hs: user error (glade.xmlGetWidget: no object named "window1" in the glade file) 
```

如果用*小部件更改所有**对象*标签，我会得到这个

 *```
(hellogtk2hs:9668): GLib-GObject-ERROR **: cannot create instance of abstract (non-instantiatable) type `GtkBox'
`trap' para punto de parada/seguimiento 
```

这样做我得到的错误更少，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T01:25:31.407

问题是 gtk2hs 不支持 gtk3，而我创建的文件是 gtk3 的。

Glade 可以生成 libglade 文件或 gtkbuilder 文件。两者都是xml文件，主要区别是前者以.`<glade-interface>`开头，后者以.开头`<interface>`。同样在 gtkbuilder 文件中，`<object>`使用标签而不是`<widget>`标签。

该`Graphics.UI.Gtk.Glade`软件包使用 libglade 文件，问题是这些文件已过时且已弃用。

在[Glade 下载页面](http://glade.gnome.org/sources.html)有两个版本可用。其中较新的版本会生成与 gtk3 一起使用的 gtkbuilder，但由于 gtk2hs 不支持 gtk3，因此您必须下载 3.8 版，它会为 gtk2 生成 libglade 和 gtkbuilder 文件。

最好的办法是停止使用 libglade 文件并改用 gtkbuilder 文件。为此，您必须导入`Graphics.UI.Gtk.Builder`而不是`Graphics.UI.Gtk.Glade`

我发现[本教程](http://rickardlindberg.me/writing/reflections-on-programming/2012-02-11-hello-world-haskell-gtk)使用 gtkbuilder 而不是 libglade。

该程序创建一个带有按钮的窗口，每次单击该按钮时，您都会在终端上看到一个“hello world”，直到窗口关闭。

```
import Graphics.UI.Gtk
import Graphics.UI.Gtk.Builder

main = do
    initGUI
    builder <- builderNew
    builderAddFromFile builder "windowbuilder.glade"
    mainWindow <- builderGetObject builder castToWindow "main_window"
    onDestroy mainWindow mainQuit
    helloWorldButton <- builderGetObject builder castToButton "hello_world_button"
    onClicked helloWorldButton (putStrLn "Hello, World!")
    widgetShowAll mainWindow
    mainGUI 
```

这是从 windowbuilder.glade 文件中提取 gui。我使用 glade-3 创建了该文件。这里是。

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <requires lib="gtk+" version="2.24"/>
  <!-- interface-naming-policy project-wide -->
  <object class="GtkWindow" id="main_window">
    <property name="width_request">210</property>
    <property name="can_focus">False</property>
    <property name="title" translatable="yes">This is a window</property>
    <property name="resizable">False</property>
    <child>
      <object class="GtkVBox" id="vbox1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <child>
          <object class="GtkLabel" id="label1">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">Click the button!!</property>
          </object>
          <packing>
            <property name="expand">True</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkButton" id="hello_world_button">
            <property name="label">gtk-ok</property>
            <property name="use_action_appearance">False</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
            <property name="border_width">7</property>
            <property name="use_stock">True</property>
          </object>
          <packing>
            <property name="expand">True</property>
            <property name="fill">True</property>
            <property name="padding">5</property>
            <property name="position">1</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

切换到 gtkbuilder 文件的另一个很好的理由是，haskell glade 包无法使用 ghc >= 7.6 进行编译。**

# c# - 如何在 asp.net C# 中创建从 URL 获取参数的 SQL 查询

> ID：13294314
> 
> 赞同：0
> 
> 时间：2012-11-08T17:23:21.817
> 
> 标签：c#, asp.net, sql-server

我的链接就像

```
http://localhost/default.aspx?phone=9057897874&order=124556 
```

这是我从 ASP.net 在 URL 中传递参数的基本页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs"     Inherits="WebApplication2._Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Untitled Page</title>
</head>
<body>
<form method="get" action="default.aspx">

<label>Phone No</label>
<input type="text" name="phone" />
<br />
<label>Order No</label>
<input type="text" name="order" />
<br />
<input type="submit" value="submit" />
<br />
</form> 
```

我可以将参数存储在变量中的 c# 文件

```
namespace WebApplication2
 {
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string strQuery;

        string phone = Request.QueryString["phone"];
        if (phone != null)
        {
            Response.Write("phone no is ");
            Response.Write(phone);
        }
        else

        {
            Response.Write("You phone number is not correct");
        }

        string order_no = Request.QueryString["order"];
        if (order_no != null)
        {
            Response.Write("Order No is ");
            Response.Write(order_no);
        }
        else
        {
            Response.Write("You Order number is not correct");
        }

//How I can Connect to Mysql Server

        strQuery = "SELECT order_status where orde01=''" + order_no + "'' and phone01=''" + phone + "''";

        Response.Write(strQuery);
}
} 
```

我正在尝试做这样的事情，但它只给我整个查询作为字符串。我是这个话题的新手。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:33:36.730

首先，根据用户可以更改的输入连接一条 sql 语句，特别是当存储为字符串时，这是 SQL 注入漏洞的创建方式。不要成为那个人。

至于对查询字符串进行标记，请使用命名参数。假设这是您的查询字符串

```
?orderid=777&phone=777-777-7777

Response.QueryString["orderid"] 
```

将返回 '777' 和

```
Response.QueryString["phone"] 
```

将返回“777-777-7777”

至于你的 sql 注入问题，你有几个选择。一种是参数化的 sql 语句，请参见此处的 C# 示例：[http](http://rosettacode.org/wiki/Parametrized_SQL_statement) ://rosettacode.org/wiki/Parametrized_SQL_statement 或使用带参数的存储过程。最不理想但最低限度可接受的选择是严格验证您的输入参数，特别是杀死像 '=;% 之类的字符 - 以及其他一些字符。

编辑：既然我有时间制作一个样本，请检查一下。此示例需要针对您的数据库进行定制，但它在我的带有测试表的 mysql 数据库上工作。您需要安装[MySQLConnector](http://dev.mysql.com/downloads/connector/net/)包并添加对“MySql.Data”的项目引用，然后代码才能正确编译。

```
namespace WebApplication2
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e) {
            //define some regex patterns for validating our data.
            const string PHONEREGEX = @"((\(\d{3}\))|(\d{3}-))\d{3}-\d{4}";
            const string ORDERNUMREGEX = @"\d*";

            bool isValid = true;

            string phone = Request.QueryString["phone"]; //read phone from querystring.

            //validate that arg was provided, and matches our regular expression. this means it contains only numbers and single hyphens
            if(!string.IsNullOrWhiteSpace(phone) && System.Text.RegularExpressions.Regex.IsMatch(phone, PHONEREGEX)){
                Response.Write(HttpUtility.HtmlEncode(string.Format("The phone number is {0}", phone))); //HTML Encode the value before output, to prevent any toxic markup.
            } else {
                Response.Write("Phone number not provided.");
                isValid = false;
            }

            string orderStr = Request.QueryString["order"]; //read ordernum from querystring
            long order = long.MinValue;

            //validate that order was provided and matches the regex meaning it is only numbers. then it parses the value into 'long order'.
            if(!string.IsNullOrWhiteSpace(orderStr) && System.Text.RegularExpressions.Regex.IsMatch(orderStr, ORDERNUMREGEX) && long.TryParse(orderStr, out order)){
                Response.Write(HttpUtility.HtmlEncode(string.Format("The order number is {0}", order))); //use 'long order' instead of orderStr.
            } else {
                Response.Write("Order number not provided.");
                isValid = false;
            }

            //if all arguments are valid, query the DB.
            if (isValid) {
                Response.Write(GetOrderStatus( phone, order));
            }

        }

        private static string GetOrderStatus(string phone, long order) {
            string status = "";

            //create a connection object
            string connstring = "SERVER=<YOUR MYSQL SERVER>;DATABASE=<YOUR DATABASE>;UID=<YOUR USER>;PASSWORD=<YOUR PASSWORD>-";//this is a connection string for mysql. customize it to your needs.
            MySql.Data.MySqlClient.MySqlConnection conn = new MySql.Data.MySqlClient.MySqlConnection(connstring); //put your connection string in this constructor call 

            //create a SQL command object
            using (MySql.Data.MySqlClient.MySqlCommand cmd = new MySql.Data.MySqlClient.MySqlCommand()) { //use a using clause so resources are always released when done.
                cmd.Connection = conn;
                cmd.CommandText = "SELECT `Order_Status` FROM `<YOUR TABLE>` WHERE `Order` = @order AND `Phone` = @phone"; //this needs a From statement 

                //add parameters for your command. they fill in the @order and @phone in the sql statement above. customize these to match the data types in your database.
                cmd.Parameters.Add("order", MySql.Data.MySqlClient.MySqlDbType.Int64,11).Value = order; //do not use @ sign in parameter name
                cmd.Parameters.Add("phone", MySql.Data.MySqlClient.MySqlDbType.VarChar, 50).Value = phone;

                //execute the command, read the results from the query.
                cmd.Connection.Open();
                using (MySql.Data.MySqlClient.MySqlDataReader reader = cmd.ExecuteReader()) {
                    while (reader.Read()) {
                        status = reader.GetString("Order_Status");
                    }
                    cmd.Connection.Close();
                }

            }
            return status;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:27:08.120

你应该使用

```
Request.Form["phone"]
Request.Form["order"] 
```

代替

```
Request.QueryString["phone"]
Request.QueryString["order"] 
```

这样做的原因是，您正在进行回发并且永远不会重定向到将这些值设置为查询字符串的 url

但是，您的问题标题会建议您有一个包含类似

[http://yourdomain.com?phone=0123456789&order=17](http://yourdomain.com?phone=0123456789&order=17)

# mysql - SQL查询以特定条件分组计数

> ID：13294317
> 
> 赞同：1
> 
> 时间：2012-11-08T17:23:26.380
> 
> 标签：mysql, sql, database

我的表格数据：

```
id      fieldId  Name   Text
----    ------  -----   ----
1        101    name1   a1
2        102    name2   a2
3        101    name1   a1
4        103    name3   a2
5        102    name2   a3
6        101    name1   c1
7        101    name1   a3
8        102    name2   
9        101    name1   b2
10       103    name3   c1 
```

我需要像这样的输出

```
Name    Count(fieldId)  Count_id_text_is_either_a1_or_a2_a3
------      ------        -------
name1   4                   2
name2   3                   2
name3   2                   1 
```

*   `Name`= 我需要按 fieldId 分组。
*   `Count(fieldId)`= 统计每组记录。
*   `Count_id_text_is_either_a1_or_a2_a3`= 这是我想要组记录计数的列，仅当`Text like 'a1-%' or 'a2-%' or 'a3-%'`.

这可以通过单个查询来完成吗？如果是，请解释如何？如果没有，那么最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:24:56.237

```
select Name, 
    count(*) as CountAll, 
    count(case when Text like 'a1-%' or Text like 'a2-%' or Text like 'a3-%' then 1 end) as CountA1A2A3
from MyTable
group by Name 
```

如果您愿意，也可以使用 RegEx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:59:00.743

这里。

```
SELECT
    `Name`,
    COUNT(*) AS 'fieldId',
    COUNT(IF(`Text` REGEXP '^a[1-3]',1,NULL)) AS 'a1a2a3'
FROM (SELECT * FROM `items` GROUP BY `Name`,`Text`) t1
GROUP BY `Name`; 
```

# magento - Magento 收藏问题。在迭代中确定顺序

> ID：13294323
> 
> 赞同：0
> 
> 时间：2012-11-08T17:24:03.820
> 
> 标签：magento, iteration

我有一个名为“前 100 种产品”的类别，目前，该系列工作正常。但我想做的是动态确定每个产品是什么，与列出的 100 个产品相关。换句话说，如果列出了产品一，我可以获取该值，以便在产品标题旁边添加“#1”。

当产品#74 列出时，它会动态显示“#74”。我可以使用 getSize 函数计算列表的总数，但我不知道如何使用该变量来吐出每个列出的产品的正确“序列”数。我使用 getSize 的原因是可以通过分页保留计数。

要了解代码，请参考 /catalog/product/list.phtml 模板。在列表或网格模式下，您将看到以下内容：

编辑。我无法在此处发布此代码。真让人抓狂。只需要知道如何获得一个 while 循环来围绕“foreach”产品控制器循环，这样我就可以使用 while (x) < variable_with_total_products_counted 并让 x++ 驻留在产品控制器 for 循环中。每次我尝试这样做时，都会出现语法错误。好像它不会让产品控制器循环（for each 循环）驻留在我的 while 循环中，该循环从 0 --> 99（前 100 个产品）迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:45:59.640

像这样的东西怎么样：

```
$count = $collection->getSize();
$counter = 1;
foreach($collection as $item) {
    // Process item
    echo '<p>' . $item->getName . ' (' . $counter . ')</p>';
    $counter++;
} 
```

为确保该编号是持久的，您可以将其分配给产品，并且它将在脚本/页面的持续时间内保持分配：

```
$count = $collection->getSize();
$counter = 1;
foreach($collection as $item) {
    $item->setData('tmp_number', $counter);
    $counter++;
}
// Work with products 
```

# python - 如何在 Python 中将参数列表转换为单个字符串命令行？

> ID：13294324
> 
> 赞同：4
> 
> 时间：2012-11-08T17:24:03.783
> 
> 标签：python, escaping, argv

> **可能重复：**
> [shlex.split 的反面是什么？](https://stackoverflow.com/questions/4748344/whats-the-reverse-of-shlex-split)

如何将命令行参数列表转换为命令行`argv`的单个字符串？

`" ".join(argv)`不是正确的解决方案，因为它不会正确地转义带有空格的字符串。

例子：`./test.py -v --simulate --action removePage --title "AAA BBB"`

如果你尝试这个，最后一个参数是`AAA BBB`不带引号的，但如果我尝试用 join 重建命令行，我会得到错误的结果。

注意：我知道我可以将命令行作为字符串获取，但就我而言，我不能依赖它，我需要一个将参数列表转换为正确命令行的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:36:14.227

使用 Python 3.3，您可以尝试使用[`shlex.quote`](http://docs.python.org/3.3/library/shlex.html#shlex.quote)（抱歉，我无法检查）：

```
' '.join(shlex.quote(arg) for arg in argv) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:26:36.767

我想如果你不介意无偿引用：

```
" ".join('"%s"'%x.strip().replace('"',r'\"') for x in lst) 
```

# python - 尝试解析网络共享上的 XML 数据时权限被拒绝

> ID：13294330
> 
> 赞同：1
> 
> 时间：2012-11-08T17:24:12.387
> 
> 标签：python, windows, xml-parsing, minidom

我在 Python 中使用 minidom 来解析网络目录中的一些日志文件。我可以很好地打印文件名列表，但会出现错误：
`IOError: [Errno 13] Permission denied: '\\\\10.10.10.80\\logs'`
每当我尝试解析时。这是我的代码：

```
import xml.dom.minidom as xml
import os

for filename in os.walk('\\\\10.10.10.80\logs\\'):
    print filename
    doc = xml.parse('\\\\10.10.10.80\logs', filename)

    queue = doc.Element.getElementsByTagName('QueueEntry')

    print queue 
```

关于它为什么将我拒之门外的任何想法？尝试从本地目录解析文件时，我也会遇到同样的错误，因此它一定与网络无关。谢谢！

**更新：**

按照@inspectorG4dget 的建议进行了尝试`chmod()`，但仍然出现错误。我在 Win7 上访问 Windows Server 2008 机器上的文件目录。这些文件与所有人共享，我可以通过 Windows 资源管理器打开、读取和写入。这是我的`chmod()`代码，它返回了相同的错误和`subproccess`我尝试的另一个片段：

```
import xml.dom.minidom as xml
import os, glob, sys, stat

for filename in os.walk('\\\\10.10.10.80\\logs\\'):
    print filename
    os.chmod('\\\\10.10.10.80\\logs\\', stat.S_IRWXO)
    #Also tried other modes, all with the same error
    doc = xml.parse('\\\\10.10.10.80\\logs', filename)
    queue = doc.Element.getElementsByTagName('QueueEntry')
    print queue 
```

```
import xml.dom.minidom as xml
import os, sys, stat, subprocess

for filename in os.walk('\\\\10.10.10.80\\logs\\'):
    subprocess.call(['chmod', '-R', '+w', '\\\\10.10.10.80\\logs'])
    print filename
    doc = xml.parse('\\\\10.10.10.80\\logs', filename)
    queue = doc.Element.getElementsByTagName('QueueEntry')
    print queue 
```

这将返回错误：
`WindowsError: [Error 2] The system cannot find the file specified`

# css - SCSS / SASS 背景图片 url 改变

> ID：13294340
> 
> 赞同：1
> 
> 时间：2012-11-08T17:24:34.697
> 
> 标签：css, background, sass

我在 SCSS 中有这个：

```
@include background(image-url("test.jpg") no-repeat center top); 
```

我怎样才能更改图像网址。现在图像 url 给出 /img/。我怎样才能改变那条路？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:47:21.720

您可以使用变量更改路径`images_dir`，该变量位于 compass 项目根文件夹的 config.rb 文件中。

前任。

```
# Default
images_dir = "img"
# Customized
images_dir = "pictures" 
```

[指南针文档](http://compass-style.org/reference/compass/helpers/urls/)中的更多信息

# php - 插入记录时创建 slug 以包含 id 和标题 - php MySQL

> ID：13294341
> 
> 赞同：4
> 
> 时间：2012-11-08T17:24:34.477
> 
> 标签：php, mysql, url

> **可能重复：**
> [在 INSERT INTO 语句期间访问自动增量值](https://stackoverflow.com/questions/6932339/access-auto-increment-value-during-insert-into-statement)

我想在创建要存储在数据库中的页面时为我的 URL 生成 slug。蛞蝓应该是`title-id`（例如`titlename-234`）。我已经有了剥离标题的功能，但是如何在插入记录之前获取 id？

提前谢谢了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:34:16.610

您应该创建一个触发器，如下所示：

```
CREATE TRIGGER trigger_name BEFORE INSERT ON table
FOR EACH ROW SET slug = CONCAT(NEW.title, "-", NEW.id); 
```

我不确定您是否能够在将 ID 列写入数据库之前访问它（当然，除非您自己生成 ID，而不是使用自动增量）。

如果您使用数据库的自动增量（并且应该使用），请尝试在插入后创建触发器，并更新触发器中的行。这样，即使您在插入后更新它，它仍然会在您运行任何其他查询（如 SELECT）之前运行。

[这里](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)是关于触发器的文档。

* * *

我错了。显然，您无法更新要插入的表（使用 AFTER INSERT 触发器），它会引发异常。因此，单独使用 SQL 有两种可能的方法：

丑陋的方式：

```
DELIMITER $$
CREATE TRIGGER `create_slug` BEFORE INSERT
    ON `events`
    FOR EACH ROW
BEGIN
    SET new.id = (SELECT MAX(id) FROM events) + 1;
    SET new.slug = CONCAT(new.menu_name, "-", new.id);
END$$
DELIMITER ; 
```

它会覆盖数据库的 AUTOINCREMENT。真的，不要那样做。

或者，您可以创建一个过程：

```
DELIMITER $$

CREATE PROCEDURE insert_event(MenuName VARCHAR(30), Content TEXT, PhotoName TEXT)
BEGIN
    INSERT INTO events (menu_name, content, photo_name) VALUES (MenuName, Content, PhotoName);
    SET @id = LAST_INSERT_ID();
    UPDATE events SET slug = CONCAT(menu_name, "-", @id) WHERE id = @id;
END$$

DELIMITER ; 
```

而且，而不是打电话（正如你打电话）：

```
$query = mysql_query("INSERT INTO events (menu_name, content, photo_name) VALUES ('{$menu_name}', '{$content}', '{$photo_name}');", $connection); 
```

打电话

```
$result = mysql_query("CALL insert_event('{$menu_name}', '{$content}', '{$photo_name}');",$connection ); 
```

同样，我强烈建议不要使用 mysql_query。它已经过时、停产且不安全。您应该检查 mysqli 或 PDO。

# ruby-on-rails - 当凭据不正确时如何使用 format.js 并在凭据正确时重定向？

> ID：13294342
> 
> 赞同：0
> 
> 时间：2012-11-08T17:24:38.467
> 
> 标签：ruby-on-rails, authlogic

我正在使用 Authlogic gem 进行用户会话。

登录表单以模式显示，因此如果用户凭据不正确，我想在模式上显示错误消息，这就是我使用`remote: true`.

```
<%= form_for @user_session, url: user_session_path, ***remote: true do |f| %> 
```

当user_session有错误时我想respond_to format.js，当user_session正确保存时我想redirect_back_or_default root_path

我遇到的问题是，如果凭据正确，则**不会**重定向页面。

以下是具有正确凭据的请求的结果请求的屏幕截图： ![要求](../Images/4c9967525e6cf18daf56f2dc0d4cbca9.png)

### user_sessions_controller.rb

```
class UserSessionsController < ApplicationController
  before_filter :require_no_user, :only => [:new, :create]
  before_filter :require_user, :only => :destroy

  def new
    @user_session = UserSession.new
    if @user_session.save
      redirect_back_or_default root_path
    else
      format.js
    end
  end

  def create
    @user_session = UserSession.new(params[:user_session])
    if @user_session.save
      flash[:notice] = "Login successful!"
      redirect_back_or_default root_path
    else
      render :action => :new
    end
  end

  def destroy
    current_user_session.destroy
    flash[:notice] = "Logout successful!"
    redirect_to authentications_path
  end
end 
```

### 新的.js.erb

```
(function($){
  <% if @user_session.errors.any? %>
    $errorsContainer = $("#login-errors").empty();
    <% @user_session.errors.full_messages.each do |msg| %>
      $errorsContainer.append('<div class="alert alert-error"><%= msg %></div>');
    <% end %>
  <% end %>
})(jQuery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:37:47.767

尝试以下技巧而不是重定向：

```
render :js => "window.location = '/index/'" 
```

用你的根 url 替换 /index 。似乎 Rails 正在为这两种情况寻找 javascript 类型响应，因为您使用了 ajax

# asp.net-mvc - c# asp.net mvc session start 被多次调用

> ID：13294346
> 
> 赞同：0
> 
> 时间：2012-11-08T17:24:51.277
> 
> 标签：asp.net-mvc, session, global-asax

我有一个网站。我在 global.ascx 中使用会话开始，在调试时我注意到它被调用了几次，并且从一行跳到另一行似乎是不同的线程。这正常吗？我必须在这里使用 lock 语句吗？

# tomcat - 将应用程序升级到 Grails 2 后 JBoss 部署错误

> ID：13294348
> 
> 赞同：1
> 
> 时间：2012-11-08T17:24:53.150
> 
> 标签：tomcat, grails, jboss, catalina

我已将 Grails 应用程序从 1.3.6 升级到 2.1.1。经过一些修复和整理后，run-app 可以工作（在大多数情况下，仍然需要处理一些已弃用的问题）。圣杯战争也没有错误地构建。

但是，当我部署到 JBoss (4.2.2) 中时，与为 grails 1.3.6 战争所做的相同，我收到此错误：

```
Caused by: javax.management.ReflectionException: Cannot find setter method setLoader StandardContext[null]
        at org.apache.tomcat.util.modeler.ManagedBean.getSetter(ManagedBean.java:560)
        at org.apache.tomcat.util.modeler.BaseModelMBean.setAttribute(BaseModelMBean.java:407)
        at org.jboss.mx.server.RawDynamicInvoker.setAttribute(RawDynamicInvoker.java:70)
        at org.jboss.mx.server.MBeanServerImpl.setAttribute(MBeanServerImpl.java:608)
        at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:212)
        at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:104)
        at org.jboss.web.AbstractWebDeployer.start(AbstractWebDeployer.java:375)
        ... 112 more
Caused by: java.lang.NoSuchMethodException: org.apache.catalina.core.StandardContext.setLoader(org.apache.catalina.Loader)
        at java.lang.Class.getMethod(Class.java:1605)
        at org.apache.tomcat.util.modeler.ManagedBean.getSetter(ManagedBean.java:553)
        ... 118 more
2012-11-08 16:09:51,604 INFO  [org.jboss.web.tomcat.service.TomcatDeployer] deploy, ctxPath=/jmx-console, warUrl=.../deploy/jmx-console.war/
2012-11-08 16:09:51,664 ERROR [org.jboss.deployment.scanner.URLDeploymentScanner] Incomplete Deployment listing:

--- Incompletely deployed packages ---
org.jboss.deployment.DeploymentInfo@5cc18807 { url=file:/usr/local/JBoss/jboss-4.2.2.GA/server/default/deploy/xxxxx-1.0.war }
  deployer: MBeanProxyExt[jboss.web:service=WebServer]
  status: Deployment FAILED reason: Error during deploy; - nested throwable: (javax.management.ReflectionException: Cannot find setter method setLoader StandardContext[null])
  state: FAILED
  watch: file:/usr/local/JBoss/jboss-4.2.2.GA/server/default/deploy/xxxxx-1.0.war
  altDD: null
  lastDeployed: 1352390987263
  lastModified: 1352390987000
  mbeans:

--- MBeans waiting for other MBeans ---
ObjectName: jboss.web.deployment:war=xxxxx-1.0.war,id=1556187143
  State: FAILED
  Reason: org.jboss.deployment.DeploymentException: Error during deploy; - nested throwable: (javax.management.ReflectionException: Cannot find setter method setLoader StandardContext[null])

--- MBEANS THAT ARE THE ROOT CAUSE OF THE PROBLEM ---
ObjectName: jboss.web.deployment:war=xxxxx-1.0.war,id=1556187143
  State: FAILED
  Reason: org.jboss.deployment.DeploymentException: Error during deploy; - nested throwable: (javax.management.ReflectionException: Cannot find setter method setLoader StandardContext[null]) 
```

所以我认为这是战争中 lib 中的 catalina 类和已经在 jboss 中的类之间的冲突？因为它在 1.3.6 时工作正常，它是否已添加到 2.1.1 grails tomcat 插件中，是否可以从 grails 插件中排除子依赖项？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:30:47.180

找到“解决方案”，以防其他人正在寻找。

如果我将插件的声明从 application.properties 移动到 BuildConfig.groovy，错误就会消失。我不确定它是否真的“修复”了它，或者它是否导致清理/重新安装可能已经清除它的 tomcat 插件，但它消除了部署时的错误。

在此之后我遇到了另一个错误，JBoss hibernate 库比 Grails 2.1.1 依赖项中的库更旧：

```
Caused by: java.lang.NoSuchMethodException: org.hibernate.validator.ClassValidator.   
(java.lang.Class, java.util.ResourceBundle, org.hibernate.validator.MessageInterpolator, 
java.util.Map, org.hibernate.annotations.common.reflection.ReflectionManager) 
```

通过按照[此处](http://grails.1312388.n4.nabble.com/Grails-2-fails-to-deploy-on-Jboss-5-td4307341.html "这里")的说明告诉 JBoss 使用应用程序的库而不是它自己的库来解决这个问题。

# javascript - 使用“this”，当函数和选择器不在一起时

> ID：13294350
> 
> 赞同：2
> 
> 时间：2012-11-08T17:24:55.817
> 
> 标签：javascript, jquery

有了这个

**示例 1**

```
$("#my_div").on("click", function () {
    alert( $(this).attr("id") )
}); 
```

我们得到正确的结果，但如果我使用这个：

**示例 2**

```
function thisId () {
    alert( $(this).attr("id") )
}

$("#my_div").on("click", function () {
    thisId();
}); 
```

现在结果是不确定的。请告诉我如何使用`this`选择器和功能使用`this`，如不同的表达式，如**例2所示**？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T17:26:17.950

要让 jQuery 将元素引用传递给函数，您必须提供该函数作为引用。试试这个：

```
$("#my_div").on("click", thisId); 
```

**@bot 更新**

```
function thisId (event) {
    alert( $(this).attr("id") )
    alert(event.type);
}

$("#my_div").on("click", thisId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:39:50.017

@RoryMcCrossan 的答案是正确的，原因如下：JS 确定`this`引用*ad hoc*的内容，即：调用函数时，它会查看调用上下文：

```
myObject.property = function(){console.log(this)}
myObject.property();
  /\          ||
  ||who called |
  |_____________ 
```

`thisId`如果该函数没有像您`this`对`window`. 您可以使用and
以编程方式确定调用上下文，这是 jQuery 在幕后所做的：`functionName.call(context)``functionName.apply(context,[arguments]);`

```
$.fn.on(evt,callback)//simplified
{//jQ sets up its own event handler that looks like this:
    //here, this point to $("#my_div") in your case, so:
    var jQhandler = function(e)
    {
        callback.apply(this,[e]);//passes the event as an argument
    };
    this.addEventListener(evt,jQhandler,false);//<-- passes its handler by reference
} 
```

因此，您可以使用 apply 中的任何一种，这 - 在您的情况下 - 需要另一个匿名。要创建的函数对象，或者将函数作为回调直接传递给 jQuery。后者效率更高：更少的冗长和更少的函数对象需要。

简而言之，这就是为什么@RoryMcCrossan 是正确的，以及为什么有些人认为 JS 是世界上最容易被误解的语言：使用它的大部分人并不真正了解 JS 如何确定上下文。

* * *

顺便说一句：ECMA5 允许您使用该`.bind`方法将函数绑定到上下文，但这会使我们偏离主题......

# git - 使用“干净”过滤器从 git 存储库重新签出的文件最终状态为已修改

> ID：13294354
> 
> 赞同：2
> 
> 时间：2012-11-08T17:25:01.610
> 
> 标签：git, filter

我正在尝试为 git 实现 rcs 关键字替换。要求是在进入 git repo 之前必须过滤工作副本。因此，在提交后，我的工作树中的更改与 repo 中的更改相同。

我尝试使用过滤器来实现它，希望在提交后脚本中重新签出文件。它通常可以工作，但是......在删除文件并检查它之后，它会获得“修改”状态。并且存在真正的区别，例如日期或提交 ID。所以，我迷路了。此外，它与“ident”没有任何问题

所以，这是我所做的快照：

```
.gitattribute --> *hpp filter=rcs-kwdsubst
.git/config --> [filter "rcs-kwdsubst"] clean=my-filter
%> git commit file.hpp -m "blah"
%> rm file.hpp
%> git checkout file.hpp
%> git status
    ... modified file.hpp ... 
```

为什么？？？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:08:11.193

至少部分回答我自己的问题。看起来 git 中的过滤器不仅在提交/签出时运行，而且在“差异”时运行，并且可能在合并时运行。这是一团糟。

我假设最初的想法是通过在提交之前将文件“清理”到存储库中的“标准”状态来避免与版本相关的一些合并问题，这样版本字符串中的合并冲突自然会消失。它只会修改签出文件中的版本。

好吧，它产生了一个不同的问题，破坏了版本控制系统的想法：

1.  团队中的每个人都有*不同*版本的文件。
2.  无法返回到特定的过去版本，因为结帐时文件会有所不同。

我不知道是否有办法在不使用自己的每次提交脚本的情况下绕过它。过滤器和钩子都不起作用，因此无法对文件进行版本控制。

# php - SagePay 的直接集成或 Cyber Source 的 SOAP API 方法！！我应该被 PCI 投诉吗？

> ID：13294355
> 
> 赞同：0
> 
> 时间：2012-11-08T17:25:04.850
> 
> 标签：php, security, payment-gateway, pci-dss, pci-compliance

我目前正在将支付网关集成到我们的商家页面。我们预计每月在我们的网站上进行大约 100000 到 50 万次交易。我们的付款页面上有 SSL 证书。SagePay 和 Cyber​​Source 等价于最大支付页面定制是 Direct 和 SOAP API，这让我可以在我的服务器上托管支付页面来收集支付信息。

我唯一担心的是我将这些支付信息发布到我的服务器，然后再将其发送到相应的支付网关。我没有将它存储在会话或数据库中。我们所有的帖子 URL 都经过 SSL 认证。

根据 PCI 合规性，如果我从我的服务器传输支付数据，我应该每年进行 PCI 审计，安全评估员将进行远程测试和内部测试。

显然，这将是昂贵的。

如果我遵循 SagePay Direct 集成或 Cyber​​Source SOAP API 文档，是否需要 PCI 合规性？

很抱歉成为害虫。我知道这个问题存在于整个社区。但是对于我的特定集成方法，我看不到令人信服的答案。

从专业的支付安全顾问那里得到答案将是惊人的。

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:44:08.997

也许您想查看 Cyber​​Source 的 Secure Acceptance Silent Order Post：

[http://www.cybersource.com/developers/develop/integration_methods/secure_acceptance/](http://www.cybersource.com/developers/develop/integration_methods/secure_acceptance/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:44:41.117

无论您使用的是 Sagepay 还是 Cyber​​source，都没有关系 - 如果信用卡号码完全触及您的服务器，则您符合 PCI-DSS 合规性。如果您不将它们存储在数据库或会话中，则无关紧要。如果您的服务器在毫秒内看到信用卡号和/或 CVV 代码，则您符合 PCI-DSS 合规性。您的集成方法根本不重要，重要的是您的服务器正在处理信用卡号码。

# excel - 使用 VBA 从 Excel 生成 VCard

> ID：13294356
> 
> 赞同：4
> 
> 时间：2012-11-08T17:25:09.373
> 
> 标签：excel, automation, contacts, vcf-vcard, vba

我正在考虑创建一个 excel 文件，我将在其中手动填写多个联系人信息，以便我可以将联系人（一个接一个）或全部导出到指定目录中的单个 vcf 文件。我想最好的方法是通过 VBA，但我不是很了解，需要一点推动。

请参阅下面带有联系人字段的 excel 文件的屏幕截图。

![在此处输入图像描述](../Images/72b1ead22fec3494bbc5192511e6d98d.png)

任何指导将不胜感激。

好的，所以我最初是从解决将每一行导出到单个 vcard 的问题开始的。我遵循以下策略：

1.  创建临时新工作表 (tmp)
2.  粘贴标题：BEGIN:VCARD 版本：3.0
3.  根据我的图像复制粘贴第 4 行，以便它包含 VCARD 的 ID 以及我尝试导出的行（在第一种情况下为第 6 行）。我将它们粘贴到工作表 tmp。

我在这个阶段卡住了，因为 vcard 用于某些字段的方式是用“；”分隔它们。他们处于不同的位置。我不知道如何通过查看第 4 行的字段在 VBA 中生成这些。即：N1 和 N2 应该为我创建以下行：N:Stuart;Carol。ADR 领域也是如此。

一旦生成了完整的代码，我就有了生成 VCARD 文件的代码。

在这一点上的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:02:45.383

这就是我将如何做到的。使用这些属性的 getter 和 setter 创建一个名为 CContact 的类。

```
Private mlContactID As Long
Private msLastName As String
Private msFirstName As String
Private msJobTitle As String
Private msCompany As String
Private msDepartment As String
Private msEmail As String
Private msBusinessPhone As String
Private msCellPhone As String
Private msPager As String
Private msFax As String 
```

创建一个 CContacts 类来保存所有 CContact 实例。在 CContacts 中，创建一个 FillFromRange 方法来加载所有联系人。

```
Public Sub FillFromRange(rRng As Range)

    Dim vaValues As Variant
    Dim i As Long
    Dim clsContact As CContact

    vaValues = rRng.Value

    For i = LBound(vaValues, 1) To UBound(vaValues, 1)
        Set clsContact = New CContact
        With clsContact
            .ContactID = vaValues(i, 1)
            .LastName = vaValues(i, 2)
            .FirstName = vaValues(i, 3)
            .JobTitle = vaValues(i, 4)
            .Company = vaValues(i, 5)
            .Department = vaValues(i, 6)
            .Email = vaValues(i, 7)
            .BusinessPhone = vaValues(i, 8)
            .CellPhone = vaValues(i, 9)
            .Pager = vaValues(i, 10)
            .Fax = vaValues(i, 11)
        End With
        Me.Add clsContact
    Next i

End Sub 
```

创建过程来填充类，像这样

```
Public Sub Auto_Open()

    Initialize

End Sub

Public Sub Initialize()

    Set gclsContacts = New CContacts

    gclsContacts.FillFromRange Sheet1.Range("C6").CurrentRegion

End Sub 
```

对于此示例，我使用的是双击事件。双击联系人时，将创建电子名片。您需要修改以使用按钮。获取单击以确定行的按钮的 TopLeftCell 属性。

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)

    Dim lContactID As Long

    lContactID = Me.Cells(Target.Row, 3).Value

    If gclsContacts Is Nothing Then Initialize

    If lContactID <> 0 Then
        gclsContacts.Contact(CStr(lContactID)).CreateVCardFile
    End If

End Sub 
```

这从 C 列获取 ID 并调用 CreateVCardFile 方法来写出文件。

```
Public Sub CreateVCardFile()

    Dim sFile As String, lFile As Long
    Dim aOutput(1 To 12) As String

    lFile = FreeFile
    sFile = ThisWorkbook.Path & Application.PathSeparator & Me.VCardFileName

    Open sFile For Output As lFile

    aOutput(1) = gsBEGIN
    aOutput(2) = gsLASTNAME & Me.LastName
    aOutput(3) = gsFIRSTNAME & Me.FirstName
    aOutput(4) = gsTITLE & Me.JobTitle
    aOutput(5) = gsCOMPANY & Me.Company
    aOutput(6) = gsDEPARTMENT & Me.Department
    aOutput(7) = gsEMAIL & Me.Email
    aOutput(8) = gsBUSINESSPHONE & Me.BusinessPhone
    aOutput(9) = gsCELLPHONE & Me.CellPhone
    aOutput(10) = gsPAGER & Me.Pager
    aOutput(11) = gsFAX & Me.Fax
    aOutput(12) = gsEND

    Print #lFile, Join(aOutput, vbNewLine)

    Close lFile

End Sub 
```

那只是构建一个字符串并写入文件。此示例不符合 VCard 规范，因此您必须弄清楚这些细节。对于此方法，您需要一些常量和一个创建文件名的属性。

```
Public Const gsBEGIN As String = "BEGIN:VCARD VERSSION: 3.0"
Public Const gsEND As String = "END"
Public Const gsLASTNAME As String = "N1;"
Public Const gsFIRSTNAME As String = "N2;"
Public Const gsTITLE As String = "TITLE;"
Public Const gsCOMPANY As String = "ORG1;"
Public Const gsDEPARTMENT As String = "ORG2;"
Public Const gsEMAIL As String = "EMAIL,TYPE=WORK;"
Public Const gsBUSINESSPHONE As String = "TEL,TYPE=WORK;"
Public Const gsCELLPHONE As String = "TEL,TYPE=CELL;"
Public Const gsPAGER As String = "TEL,TYPE=PAGER;"
Public Const gsFAX As String = "TEL,TYPE=WORK,TYPE=FAX;" 
```

和文件名属性

```
Public Property Get VCardFileName() As String

    VCardFileName = Me.LastName & "_" & Me.FirstName & ".vcf"

End Property 
```

您可以通过下载此文件查看省略的详细信息以及它们如何协同工作。

[http://dailydoseofexcel.com/excel/VCardCreator.zip](http://dailydoseofexcel.com/excel/VCardCreator.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:10:15.557

EDIT: Had you admitted you have practically no useful knowledge of the Visual Basic language, and in fact you needed a SOLUTION, not merely a hint or "push" as you call it. A solution is not to be confused with simple "help". I would have come up with a much shorter code to accomplish the goal of your excel worksheet, exporting it to whatever format, provided you mentioned the specific result you intended (and I mean an example of a vCard code) in a very much shorter time and without requiring any more help from your side. But you're acting like a professional who just needs a push... if there is such a thing. Again, this is not about pride, nor (I hope) am I being offensive, I'm just criticizing the act to drop a hint regarding the limits of this particular site.

Your question is rather general, and I think the purpose of this website is to find answers to specific issues and not giving solutions to problems of the complexity of an application. This being my first try, maybe I'm wrong, but I this question seems to be eligible for a down vote per the description "this question does not show any research effort. it is unclear or not useful".

However, if all you need is a push indeed, then you can find information on the VCard file format on Wikipedia (with examples) - it says the latest version of the format is XML, so it should be easy if you know how to manipulate strings in Visual Basic and access Excel cell contents from a script. [http://en.wikipedia.org/wiki/VCard](http://en.wikipedia.org/wiki/VCard)

If you don't, you can learn by practice on a per-needed basis at websites such as [http://www.excel-vba-easy.com/](http://www.excel-vba-easy.com/)

Try, and return with a more specific issue. I would've simply commented on the question instead of "answering", but I haven't found a way to that.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-09T12:43:19.757

我有一个样本 excel 表和与之对应的 VBA 代码。 [样品Excel表](https://i.stack.imgur.com/Ilogz.png)

这是将其转换为 vcf 类型的相应 VBA 代码。

```
Private Sub Create_VCF()
'Open a File in Specific Path in Output or Append mode
Dim FileNum As Integer
Dim iRow As Integer
Dim FirstName As String
Dim LastName As String
Dim FullName As String
Dim EmailAddress As String
Dim PhoneHome As String
Dim PhoneWork As String
Dim Organization As String
Dim JobTitle As String

iRow = 3
FileNum = FreeFile
OutFilePath = "C:\output.VCF"
Open OutFilePath For Output As FileNum

'Loop through Excel Sheet each row and write it to VCF File
While VBA.Trim(Sheets("Sheet1").Cells(iRow, 1)) <> ""

    FirstName = VBA.Trim(Sheets("Sheet1").Cells(iRow, 1))
    LastName = VBA.Trim(Sheets("Sheet1").Cells(iRow, 2))
    FullName = VBA.Trim(Sheets("Sheet1").Cells(iRow, 3))
    EmailAddress = VBA.Trim(Sheets("Sheet1").Cells(iRow, 4))
    PhoneWork = VBA.Trim(Sheets("Sheet1").Cells(iRow, 5))
    PhoneHome = VBA.Trim(Sheets("Sheet1").Cells(iRow, 6))
    Organization = VBA.Trim(Sheets("Sheet1").Cells(iRow, 7))
    JobTitle = VBA.Trim(Sheets("Sheet1").Cells(iRow, 8))

    Print #FileNum, "BEGIN:VCARD"
    Print #FileNum, "VERSION:3.0"

    Print #FileNum, "N:" & FirstName & ";" & LastName & ";;;"
    Print #FileNum, "FN:" & FullName
    Print #FileNum, "ORG:" & Organization
    Print #FileNum, "TITLE:" & JobTitle
    Print #FileNum, "TEL;TYPE=HOME,VOICE:" & PhoneHome
    Print #FileNum, "TEL;TYPE=WORK,VOICE:" & PhoneWork
    Print #FileNum, "EMAIL:" & EmailAddress

    Print #FileNum, "END:VCARD"
    iRow = iRow + 1
Wend

'Close The File
Close #FileNum
MsgBox "Contacts Converted to Saved To: " & OutFilePath & " 
End Sub 
```

谢谢，我希望这会有所帮助。

# javascript - 当文本框为空时隐藏 div - 主干，javascript

> ID：13294359
> 
> 赞同：0
> 
> 时间：2012-11-08T17:25:15.723
> 
> 标签：javascript, backbone.js

我想根据文本框的长度显示/隐藏一个 div。我使用的是骨干结构，所以不知道在哪里放置代码..

但这是我的代码；

```
<input type="text" id="txtUsername" placeholder="username"><br> <input
type="text" id="txtPassword" placeholder="password">

<div id="results">
  // text here
</div> 
```

js

```
$('#chooseScan').addClass('hide');
        if ($('txtUsername').length > 0 && $('txtPassword').length > 0) {
            $('#results').removeClass('hide');
            $('#results').addClass('show');
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:23:41.607

您可以`keyup`像这样将事件链接到您的文本框： [**DEMO**](http://jsfiddle.net/xC4fQ/)

```
$(document).ready(function() {    
    $('#txtUsername').bind('keyup', showHideDiv);
    $('#txtPassword').bind('keyup', showHideDiv);    
});

function showHideDiv(){
    if ($('#txtUsername').val().length > 0 && $('#txtPassword').val().length > 0) {
        $('#results').removeClass('hide');
        $('#results').addClass('show');
    }
    else {
        $('#results').removeClass('show');
        $('#results').addClass('hide');

    }   
} 
```

此外，您的代码几乎没有问题：

1.  用于`$('#InputTagId')`通过 ID 访问它们
2.  用于`$('#InputTagId').val().length`获取其值的长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:38:35.623

您的代码中几乎没有我之前没有看到的错误。

1.  需要在id前面使用#。
2.  使用 $('#txtUsername').val().length 获取长度。
3.  需要放jquery文件参考。（不知道放不放）
4.  $('#chooseScan').addClass('hide');（是chooseScan还是results？）

下面是工作代码。

```
<html>
<head>
 <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
<style type="text/css">
.hide { 
    visibility: hidden;
}
.show {
    visibility: visible;
}
</style>
<script type="text/javascript">
$(document).ready(function() {

     $('#results').addClass('hide');
     $('#txtUsername').bind('input', function() { 

        if ($('#txtUsername').val().length > 0 && $('#txtPassword').val().length > 0) {
            $('#results').removeClass('hide');
            $('#results').addClass('show');
        }
} );

 });

</script>

</head>
<input type="text" id="txtUsername" placeholder="username"><br> 
<input type="text" id="txtPassword" placeholder="password">
<div  id="results">

  // text here</div>

</html> 
```

# postgis - 使用 pgrouting 创建一致的拓扑

> ID：13294361
> 
> 赞同：0
> 
> 时间：2012-11-08T17:25:17.573
> 
> 标签：postgis, openstreetmap, pgrouting

我正在开发一个需要某些城市的路线信息的应用程序。[首先，我下载了一个 openstreetmap 数据文件 (*.osm)，然后使用 osm2pgrouting 工具 ( http://workshop.pgrouting.org/chapters/installation.html](http://workshop.pgrouting.org/chapters/installation.html) )将其导入到 postgreSQL 数据库中。在此之后，我有以下表格：

*   节点：包含简单的位置点
*   方式：包含涉及一些节点的方式
*   vertices_tmp：存储可用于pgrouting功能的节点，如Djistra、A*...等。

我会使用不在“vertices_tmp”表中的节点来计算节点之间的距离吗？或者我只会对存储在“vertices_tmp”中的节点进行操作？

在方式表中有一个名为“the_geom”的字段，它封装了不同的位置点（节点）。例如：

`"MULTILINESTRING((1.5897786 42.5600441,1.5898376 42.5601455,1.589992 42.5605438,1.590095 42.5606795,1.5901782 42.5608026,1.5902238 42.561018,1.5902912 42.5616808,1.5903685 42.561899,1.5904008 42.5620563,1.5903836 42.5624117,1.5904265 42.5627151,1.5904947 42.5628368,1.5905981 42.5629553,1.5906926 42.5631007,1.590802 42.5633238,1.5908604 42.5634883,1.5909501 42.5637139,1.5910869 42.5638755,1.5913053 42.5639639,1.5914994 42.5640237,1.591648 42.5640261,1.5919232 42.5640145,1.5921124 42.5640363,1.5923292 42.5640953,1.592804 42.5643306))"`

我可以使用中间节点还是仅使用源/目标节点进行路由？

我的目标是能够在不同的节点或 POI 之间进行路由，这取决于它的舒适标签，不仅是行驶距离，还有步行距离。此外，我需要计算源/目标节点的最短路径。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:47:49.840

您不能使用节点表的元素。

如果您想规划从一个 POI 到另一个 POI 的路线，首先您必须根据所选算法找到最近的顶点/边（流星需要边，其他使用顶点）。在此之后，您可以进行路由，只需从[THIS SITE中选择一个算法](http://workshop.pgrouting.org/chapters/shortest_path.html)

你会发现有一个关于不同路由解决方案的很好的教程和一些详细使用的帮助（包括如何确定最近的方式）。

# jquery-mobile - 添加具有增强内容的动态弹出窗口

> ID：13294362
> 
> 赞同：2
> 
> 时间：2012-11-08T17:25:20.363
> 
> 标签：jquery-mobile

我正在尝试向我的页面动态添加一个弹出窗口，其中包含漂亮的 JQM 内容（按钮等）。弹出窗口已添加，但未应用任何样式。

这是代码（它不是很长，所以我在这里复制）：

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  </head>
  <body>
    <div id='page' data-role='page'>

      <div data-role='header'>
        <h1> Header </h1>
      </div>

      <div data-role='content'>
        <p>Code sample</p>
        <a id='add' data-role='button'> Add popup </a>
        <a href='#popup' data-role='button' data-rel='popup'> Show dynamic popup </a>
        <a href='#popup2' data-role='button' data-rel='popup'> Show static popup </a>

      </div>
      <div id="popup2" data-role='popup'>
        <div data-role="header"> 
          <h1>Popup Header</h1> 
        </div>
        <div data-role="content"> 
          <p>Some content</p> 
        </div>
      </div>

    </div>
    <script>
      $(document).ready( function(){
        $('#add').bind( 'click', function(ev){
          var
            page = $('#page');
          var 
              popup = $('<div id="popup" data-role="popup"></div>').appendTo( page )
            , header = $('<div data-role="header"> <h1>Popup Header</h1> </div>').appendTo( popup )
            , content = $('<div data-role="content"> <p>Some content</p> </div>').appendTo( popup );
          popup.popup();
        });
      });
    </script>
  </body>
</html> 
```

有一个[JsBin](http://jsbin.com/orehuv/1/)版本，可以使用它。

因此，如果我单击**Show static popup**它会很好地显示标题，但是如果我单击**Add popup ，而不是使用****Show dynamic popup**显示这个新添加的弹出窗口，弹出窗口的内容看起来会有所不同。（使用 chrome ）

所以问题是：如何增强动态添加的弹出内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-06T02:28:59.730

我找到了解决方案，您可以将弹出窗口插入与内容相同的级别，例如。

```
<div data-role="page" >
  <div data-role="content" ></div>
  <div data-role="popup"></div>
</div> 
```

用这种方式弹出功能很好，但是当您从 ajax 请求插入代码时，您必须在页面中插入弹出窗口并调用组件的弹出方法。

ajax 调用中的 ex .js 文件（响应只是弹出的代码）：

```
$('#page').append(response).trigger('create');

$("#popup").popup(); 
```

请记住，当您在主页面中声明一些弹出窗口时，它与内容的级别不同。JQM 会自动将弹出窗口放在此位置，并且不会产生问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:34:02.970

您必须重新绘制动态添加的内容。为此，请`page.page('destroy').page();`在`popup.popup();`.

工作示例：http: [//jsbin.com/orehuv/3/](http://jsbin.com/orehuv/3/)

# selenium - 如何提高我的 Selenium 脚本的健壮性？

> ID：13294363
> 
> 赞同：0
> 
> 时间：2012-11-08T17:25:21.060
> 
> 标签：selenium, internet-explorer-8, web, element, robustness

我正在连续运行大约 30 个脚本测试用例（每个测试用例都是一个脚本），并且经常出现故障，包括：无法识别指定的元素，元素不​​存在。

我已经添加了很多不同的方法来等待元素出现。有时当它明显存在时，我猜 Selenium 很难找到元素的 id ？

我已经包括了几个

```
do{
    if(selenium.isElementPresent("id=resultTable_0_0"){
    selenium.click("viewResultForm:refresh_button");
    }
}while (!selenium.isElementPresent("id=resultTable_0_0")); 
```

和

```
if(selenium.isElementPresent("id=resultTable_0_0"))
        selenium.isVisible("id=resultTable_0_0"); 
```

和

```
if(selenium.isElementPresent("id=resultTable_0_0_1_to"))
    selenium.click("resultTable_0_0_1_to"); 
```

在做某事之前总是检查一个元素是否存在。这可能会对性能产生巨大影响，但现在我只希望我的脚本运行无错误、完全健壮。我有这段代码：

```
do{
    if(selenium.isElementPresent("id=resultTable_0_0")){
    selenium.click("viewResultForm:refresh_button");
    }
}while (!selenium.isElementPresent("id=resultTable_0_0"));

        if(selenium.isElementPresent("id=resultTable_0_0"))
            selenium.isVisible("id=resultTable_0_0");
        if(selenium.isElementPresent("id=viewResultForm:currentDetailViewType"))
            selenium.isVisible("id=viewResultForm:currentDetailViewType");
        if(selenium.isElementPresent("id=viewResultForm:currentSearchDateType"))
            selenium.isVisible("id=viewResultForm:currentSearchDateType");
        if(selenium.isElementPresent("id=viewResultForm:currentLegalEntity"))
            selenium.isVisible("id=viewResultForm:currentLegalEntity");
        if(selenium.isElementPresent("id=viewResultForm:currentRollupBy"))
            selenium.isVisible("id=viewResultForm:currentRollupBy");
        if(selenium.isElementPresent("id=viewResultForm:currentSecurityAltId"))
            selenium.isVisible("id=viewResultForm:currentSecurityAltId");
        if(selenium.isElementPresent("id=viewResultForm:currentSecurityAltIdType"))
            selenium.isVisible("id=viewResultForm:currentSecurityAltIdType");
        if(selenium.isElementPresent("id=viewResultForm:currentDepoViewType"))
            selenium.isVisible("id=viewResultForm:currentDepoViewType");
        if(selenium.isElementPresent("id=viewResultForm:currentBusinessDate"))
            selenium.isVisible("id=viewResultForm:currentBusinessDate");

        System.out.println("Success T13001");
        selenium.stop(); 
```

即使这样也会出错！！！它不会失败以达到 selenium.stop 和“假”成功。我可以做些什么来构建脚本的健壮性？任何帮助，将不胜感激。

我在 IE 8 上使用 Selenium 2.20.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:44:35.780

根据您的问题，如果找不到定位器的 id 的问题，请尝试使用其他定位器，如**css 和 xpath。**

当您移动到新页面或打开 url 时应用**selenium.waitforpagetoload 。**

如果您正在开发基于 ajax 的应用程序，那么**selenium.waitforcondition**对您来说会很有趣。

无论您认为定位器在某些操作后可能需要一些时间才能出现，**使用适当的等待这些元素。**

# javascript - 如何表示依赖于其他表单的表单选项

> ID：13294367
> 
> 赞同：5
> 
> 时间：2012-11-08T17:25:40.010
> 
> 标签：javascript, forms, dependencies

我有一个表格可以帮助用户在最后选择一个特定的东西，但是当用户填写第一个选项时，下面的其他选项会发生变化。像这样的东西：

```
Type:
{
    t1:{
        Number of X:{
            1:{...}
            2:{...}
        }
        Number of Y:{...}
    }
    t2:{
        Number of X:{
            100:{...}
            200:{...}
        }
        Number of Y:{...}
    }
} 
```

用户有字段 Type 有选项 t1 和 t2，当他们选择 t1 时，字段“X 的数量”将填充 1 和 2，如果他们选择 t2，则字段“X 的数量”将填充 100和 200，依此类推。一些选择取决于多个字段，它不是直接依赖（例如，如果用户选择“X 数”= 100 那么 Foo 是“A”，否则，Foo 可以是“A”、“B”或“C”，但 Foo 不低于“X 数”）。

我尝试了一个非常幼稚的实现，我将在每个字段上设置事件侦听器并查看它们的更改，但最终代码开始失控，我有一堆`$("#foo").change(function(){...});`并且它并不立即明显地听这个的字段是`bar`而不是`fbar`.

我也尝试过 JSON（如上面的示例），但是有很多重复，树越深，可能性越多，我必须一次又一次地编写相同的字段。有时选择`t1`会直接改变一个选项，即使它不是直接在它下面，即使它通常完全依赖于另一个字段，这在 JSON 中是更多的重复。

我该如何解决这个问题？有可读的解决方案吗？代码太多不是问题，只要能看懂代码，理解依赖关系和作用。

一个代码示例（有点像我现在的代码）：

HTML：

```
<select id="type">
<option value=1>a</option>
<option value=2>b</option>
</select>
<select id="numOfX">
</select>
<select id="numOfY">
</select> 
```

js：

```
$("#type").change(function()
{
    if($("#type").val() == 1)
    {
        $("#numOfX").append(new Option(1, "1", false, false));
        $("#numOfX").append(new Option(2, "2", false, false));
    }
    else if($("#type").val() == 2)
    {
        $("#numOfX").append(new Option(1, "100", false, false));
        $("#numOfX").append(new Option(2, "200", false, false));
    }
});

$("#numOfX").change(function()
{
    ...
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:24:18.190

**更新 - 添加示例**

你尝试过backbone.js 库吗？通过添加模型和结构，它将使 Javascript 代码更易于管理。虽然有一个学习曲线，但它真的很棒。学习 Backbone 后，您可以使用[Backbone Forms](https://github.com/powmedia/backbone-forms)插件，这将有助于下拉管理。以下是演示链接和示例代码：

[示例 1](http://jsfiddle.net/thehung111/p8JJj/4/)

```
$(function() {
var cities = {
    'UK': ['London', 'Manchester', 'Brighton', 'Bristol'],
    'USA': ['London', 'Los Angeles', 'Austin', 'New York']
};

var subAreas = {
    'London' : ['L1', 'L2', 'L3', 'L4'],
    'Manchester' : ['M1', 'M2', 'M3', 'M4'],
    'Brighton' : ['B1', 'B2', 'B3', 'B4'],
    'Bristol' : ['BR1', 'BR2', 'BR3', 'BR4'],
    'Los Angeles' : ['LA1', 'LA2', 'LA3', 'LA4'],
    'Austin' : ['A1', 'A2', 'A3', 'A4'],
    'New York' : ['NY1', 'NY2', 'NY3', 'NY4']
};

//The form
var form = new Backbone.Form({
    schema: {
        country: { type: 'Select', options: ['UK', 'USA'] },
        city: { type: 'Select', options: cities.UK },
        subArea: { type: 'Select', options: subAreas[cities.UK[0] ] }
    }
}).render();

form.on('country:change', function(form, countryEditor) {
    var country = countryEditor.getValue(),
        newOptions = cities[country];

    form.fields.city.editor.setOptions(newOptions);

    var city = newOptions[0],
        areaOptions = subAreas[city];

    form.fields.subArea.editor.setOptions(areaOptions);

});

form.on('city:change', function(form, cityEditor) {
    var city = cityEditor.getValue(),
        newOptions = subAreas[city];

    form.fields.subArea.editor.setOptions(newOptions);
});

//Add it to the page
$('body').append(form.el); 
```

});​</p>

[示例 2](http://jsfiddle.net/thehung111/qSGzE/6/)

```
$(function() {
var cities = {
    'UK': ['London', 'Manchester', 'Brighton', 'Bristol'],
    'USA': ['London', 'Los Angeles', 'Austin', 'New York']
};

var subAreas = {
    'UK.London' : ['L1', 'L2'],
    'USA.London' : ['L3', 'L4'],
    'UK.Manchester' : ['M1', 'M2', 'M3', 'M4'],
    'UK.Brighton' : ['B1', 'B2', 'B3', 'B4'],
    'UK.Bristol' : ['BR1', 'BR2', 'BR3', 'BR4'],
    'USA.Los Angeles' : ['LA1', 'LA2', 'LA3', 'LA4'],
    'USA.Austin' : ['A1', 'A2', 'A3', 'A4'],
    'USA.New York' : ['NY1', 'NY2', 'NY3', 'NY4']
};

var hashFunc = function(country, city){
    return country + "." + city;
};

//The form
var form = new Backbone.Form({
    schema: {
        country: { type: 'Select', options: ['UK', 'USA'] },
        city: { type: 'Select', options: cities.UK },
        subArea: { type: 'Select', options: subAreas[ 'UK.London' ] }
    }
}).render();

form.on('country:change', function(form, countryEditor) {
    var country = countryEditor.getValue(),
        newOptions = cities[country];

    form.fields.city.editor.setOptions(newOptions);

    var city = newOptions[0],
        areaOptions = subAreas[hashFunc(country, city) ];

    form.fields.subArea.editor.setOptions(areaOptions);

});

form.on('city:change', function(form, cityEditor) {

    var city = cityEditor.getValue(),
        newOptions = subAreas[hashFunc(form.getValue().country, city)];

    form.fields.subArea.editor.setOptions(newOptions);
});

//Add it to the page
$('body').append(form.el);
});​ 
```

由于您还为移动开发（可能是 Phonegap），您也可以尝试使用 ZeptoJS 作为 jQuery 的替代品。它将大大提高速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:55:42.770

由于依赖关系，概述的任务很复杂，因此您必须考虑定义依赖关系的方法。这是我会做的一种方法：

*   定义处理数据的模型。
*   定义依赖关系。
*   管理依赖项。

下面你可以看到一个概念模型，我如何看待这一切（在我的回答结束时，我描述了这个*伪*代码中没有提供的东西）：

> ```
> //data/model structure for Type.
> var type = {
>     //list all values.
>     values: [
>         { id: 1, text: 't1', visible: true },
>         { Id: 2, text: 't2', visible: true }
>     ],
> 
>     //evaluates visibility of item using dependencies.
>     //depends on nothing, so takes no arguments except item.
>     evaluate: function(item) {
>         return; //depends on nothing.
>     },
> 
>     // this event fires when selected item changes.
>     onChange: event
> 
> };
> 
> //data/model structure for number of X.
> var numberOfX = {
>     //list all values.
>     values: [
>         { id: 1, text: '1', visible: true },
>         { id: 2, text: '2', visible: true },
>         { id: 3, text: '100', visible: true },
>         { id: 4, text: '200', visible: true }
>     ],
> 
>     //evaluates visibility of item using dependencies.
>     //since numberOfX depends on Type, it takes type as second argument.
>     //it would take more arguments if it depended on other things too.
>     evaluate: function(item, type) {
>         // next line will fire onChange event.
>         item.visible = 
>         ( [1,2].indexOf(item.id) >=0 && type.id == 1 ) ||
>         ( [3,4].indexOf(item.id) >=0 && type.id == 2 );
>     },
> 
>     // this event fires when selected item changes.
>     onChange: event
> };
> 
> //data/model structure for number of Y.
> var numberOfY = { /* omitted. This is similar to the previous ones */ }
> 
> //numberOfX depends on Type.
> //if it depended on more objects, then we would pass them as additional arguments.
> register_dependency(numberOfX, type);
> //numberOfY depends on Type.
> register_dependency(numberOfY, type);
> //... etc: define other dependencies. 
> ```

**JavaScript 中没有**事件机制，但实现一个并不难。**您也可以为此使用一些框架。**

 **`register_dependency`函数只需通过注册事件来构建依赖关系图，如下所述（**管理依赖关系**）：

当`onChange`事件在任何模型上触发时，`evaluate`会为依赖树中的每个项目调用。例如，发生`type.onChange`火灾时，我们拥有`numberOfX`和`numberOfY`对象。它们的`values`数组在循环中枚举并`evaluate`为每个项目调用（传递`item`和`type`作为参数）。

结论：虽然这段代码看起来很复杂，但它仍然更具自我描述性，并允许在页面上的多个对象之间建立依赖关系图。此外，所有的复杂性都在于工具包/框架级别，只需实施一次即可轻松重用。

**编辑：**忘记概述您需要有一些机制来绑定到这种模型并将其显示在页面上，这也是微不足道的。例如，看看[knockout.js](http://knockoutjs.com/)。**

# android - 如何在视图中实现放大方法？

> ID：13294370
> 
> 赞同：0
> 
> 时间：2012-11-08T17:25:45.183
> 
> 标签：android, surfaceview, ondraw, gesturedetector

我创建了一个包含地图的指导应用程序。该地图是使用数据库中的数据动态绘制的。[矩形坐标] 为了绘制地图，我使用了 View 类并覆盖了 Ondraw 方法。

问题是我找不到实现放大功能的方法。我已经使用 Gesture Detector 类来处理 OnLongPress 和 OnTouchEvent 方法。我正在考虑捏合放大功能，但不知道该怎么做。

期待一些伟大的想法。谢谢！

类扩展

*   看法
*   手势检测器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:46:38.333

你能告诉我们更多关于你是如何绘制这张动态地图的信息吗？现在，我将做一个假设并运行它。如果您在画布上绘制形状，您可以将画布指向位图以进行绘制：

```
Bitmap myDynamicMapBitmap = new Bitmap(MAP_WIDTH, MAP_HEIGHT, Bitmap.Config.ARGB_8888);
mapCanvas.setBitmap(myDynamicMapBitmap);
// Draw your map on the canvas here 
```

现在您有了地图的位图表示，您可以利用这个开源项目，它基本上是对内置 Android 照片库应用程序的改编，允许用户平移和缩放图像：

[GitHub 上的 ImageViewZoom](https://github.com/sephiroth74/ImageViewZoom)

我之前曾将该项目用于应用程序，并且效果非常好。您可能需要对其进行一些调整以获得您想要的行为（例如禁用平移，因为您没有说您想要那样）。

那么你真正需要做的就是：

```
imageViewZoomInstance.setImageBitmap(myDynamicMapBitmap); 
```

该视图包括内置的捏缩放。您可能希望将它与您创建的当前视图合并。

# java - 使用 getCharacterStream API 读取 Clob 对象会导致“java.sql.SQLException：无法重置阅读器”

> ID：13294373
> 
> 赞同：2
> 
> 时间：2012-11-08T17:25:52.743
> 
> 标签：java, hibernate, clob

我正在使用 Hibernate 3.6.10 版本并在保存记录后尝试读取 Clob 数据类型（学生）。它抛出错误“无法重置阅读器”

```
 public class Student implements java.io.Serializable {

    private long studentId;
    private String studentName;
    private Address studentAddress;
    private Clob searchProfileText; 
```

测试时...首先我保存学生记录，然后尝试再次从该记录中获取 searchProfileText，如下所示

```
1        student1.setSearchProfileText(clob);
2       session.save(student1);
3        System.out.println("Reading Clob : " + student1.getSearchProfileText().getCharacterStream()); 
```

第 3 行，我收到以下异常

```
java.sql.SQLException: could not reset reader
at org.hibernate.engine.jdbc.ClobProxy.resetIfNeeded(ClobProxy.java:178) 
```

我尝试`session.flush();`然后使用以下代码重新加载数据，仍然是同样的错误：

```
session.flush();
session.get(Student.class, student1.getStudentId());
System.out.println("Reading Clob : " + student1.getSearchProfileText().getCharacterStream()); 
```

观察 2：

即使我使用 Hibernate 条件获取包含 CLOB 数据的记录并对 CLOB 列进行限制，在获取记录后我也无法访问 CLOB 数据。我认为，这是 3.6.10 Final 中的一个 BUG ！！！

请帮助摆脱这个错误。我已经尝试了所有相关的主题，但还没有成功:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:34:23.693

由于您正在从 读取`getSearchProfileText`对象，因此`same object instance`它无法这样做，因为指针在设置值后位于末尾。我认为您需要在阅读之前重新加载对象，例如

```
 Serializable  id = session.save(student1);
    //commit the transaction
    Student student = session.get(Student.class, id);
    System.out.println("Reading Clob :: " 
                           + student.getSearchProfileText().getCharacterStream()); 
```

# node.js - 在亚马逊 EC2 上托管 nodeJS/mongoose Web 应用程序

> ID：13294374
> 
> 赞同：16
> 
> 时间：2012-11-08T17:25:54.460
> 
> 标签：node.js, mongodb, amazon-ec2, amazon-web-services, mongoose

我想在云中托管一个 nodeJS/mongoose/mongodb 应用程序，并且由于 EC2 有一个免费 1 年的 MicroInstance，我的问题是：**是否有任何分步教程如何启动和运行 nodejs/ Amazon EC2 中的猫鼬应用程序？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T11:21:05.023

我使用了一些指南，它们真正帮助我在 Amazon EC2 上放置 Node.js 应用程序。

第一个指导您完成实例的创建和在该实例上安装 Node.js

[如何在 Amazon EC2 上设置 Node.js - 完整指南](http://iconof.com/blog/how-to-install-setup-node-js-on-amazon-aws-ec2-complete-guide/)

然后还有一个对你也有帮助的，它有一些关于如何通过调整 iptables 将其转发到端口 8080 来使 Node.js 应用程序在端口 80 上可用的更多细节

[我如何让 Node.js 在 Amazon EC2 上运行](http://www.bennadel.com/blog/2321-How-I-Got-Node-js-Running-On-A-Linux-Micro-Instance-Using-Amazon-EC2.htm)

对于 MongoDB，官方网站上有一个在 Amazon EC2 上设置的官方指南

[Amazon EC2 上的 MongoDB](http://api.mongodb.org/wiki/current/Amazon%20EC2.html)

如果您只是对应用程序进行原型设计，您还可以考虑使用[MongoLab](https://mongolab.com)上的免费套餐 (500 MB) 轻松创建 MongoDB 实例，这也将节省运行 Node.js 应用程序的 EC2 微型实例的一些资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:36:40.620

我推荐使用亚马逊的 AMI

为您的 js 应用程序创建一个新贵脚本

以下文件可以进入 /etc/init

# nodeapp.conf

```
description "node app"

start on runlevel [23]
stop on runlevel [016]

console owner

exec /bin/bash -l -c 'cd /path/to/app; /usr/bin/node server.js -p 9001'

respawn 
```

从这里您想使用 nginx 或 apache 代理到您的节点应用程序

nginx可以通过安装`yum install nginx`

对于 nginx，以下块将在您的 http {} 配置块中工作

```
upstream app_cluster_1 {
server 127.0.0.1:9001;
}
server {
listen 80;
server_name domain.com;
location / {
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $http_host;
proxy_set_header X-NginX-Proxy true;
proxy_pass http://app_cluster_1/;
proxy_redirect off;
}
} 
```

然后你可以启动你的应用程序和 nginx

`start nodeapp`

和

`service nginx start/restart`

如果您在本地托管 mongo-db，请确保也启动它。我相信它附带了一个 init.d 脚本

`service mongod start`

自动运行 nginx 和 mongo

`chkconfig nginx on`

`chkconfig mongod on`

如果 mongo 不作为包提供，请按照以下步骤操作

[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-c​​entos-or-fedora-linux/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-05T13:32:52.360

我已经一步一步写下了如何在我遵循的 EC2 实例中设置 node.js 应用程序，按照这些步骤在 EC2 中设置服务器只需要半小时

```
Step1: Create EC2 Instance with ubuntu, eligible for a free tier

Step2: click on connect button after successfully creating the instance.

step3: then follow the steps- In your terminal
       chmod 400 yourpemfile.pem
       after this copy, the line shown in the example and paste it into your terminal. 
```

现在您已成功登录到您的 EC2 实例。

```
Step4: install all dependencies listed below.
       Nodejs
       npm
       mongodb
       git - this will be already installed in your instance, try typing git.
       pm2 
```

现在我们已经安装了 node.js 应用程序运行所需的所有依赖项

```
step5: clone your project
       Go to your latest branch

       Install dependencies (npm install) or simply type yarn 
```

现在，如果您将 .env 文件的副本保留为 env.example 或与之相关的内容，则键入此内容以复制您的文件 cp .env.example .env 以复制并创建 .env 文件

```
here I am copying .env.example file and creating a new file named .env

Step6: Now go on running instance scroll down and find security group.
       Here you will find launch wizard, click on it.
       Now click on inbound rules, and then click on edit button.
       Now click on add rule.
       select custom tcp.
       enter the port number which your node.js app is using.
       Select range anywhere, so that you can access from anywhere you want to. 
```

现在来到您已连接到 EC2 实例的终端。

```
Step7: Build your project

Step8: create server.sh file out from your project which you cloned.
       Here type cd path-from-where-you-would-do-yarn-start/node index.js 
```

创建 server.sh 文件类型 nano server.sh 这将打开文本编辑器。开始输入，如步骤 8 所示要退出此按 ctrl+o 然后按 enter 然后按 ctrl+x 现在您已成功创建 server.sh 文件

```
step9: Now where your server.sh file is located, here type
       pm2 start server.sh --name=name-you-like 
```

现在您的 Node.js 服务器已启动并运行，祝您有美好的一天。

> 提示

```
Tips: 
Form next time.

  To see your list of a servers running type pm2 list.

  To stop your server type pm2 stop name-of-server-you-want-to-stop.

  To start pm2 start name-of-server-you-want-to-start.

  To restart pm2 restart name-of-server-you-want-to-restart 
```

如果这有帮助，请投票。谢谢

# linux - 为什么如果 [假]; 然后回显“确定”；菲; 打印好吗？

> ID：13294388
> 
> 赞同：7
> 
> 时间：2012-11-08T17:27:03.780
> 
> 标签：linux, bash

为什么当我输入 bash:结果`if [ false ]; then echo 'ok'; fi;`得到`ok`字符串？使用变量时我也可以获得类似的结果：`ok=false; if [ $ok ]; then echo 'ok'; fi;`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T17:31:33.943

`if [ false ]`相当于`if [ -n "false" ]`- 它正在测试字符串的长度。如果您正在尝试测试 的退出代码`/bin/false`，请使用`if false`(no `[`，对于许多但不是全部，现代 shell 是一个内置的 shell，大致相当于`/usr/bin/[`or `/usr/bin/test`)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T17:34:57.230

`true`并且`false`不是 bash 中布尔值的内置关键字，它们与其他编程语言的方式相同

您可以模拟一个变量的真/假条件的测试，如下所示：

```
cond1="true"
cond2="false"

if [ "$cond1" = "true" ]; then
    echo "First condition is true"
fi

if [ "$cond2" = "false" ]; then
    echo "Second condition is false"
fi 
```

当你在做：

```
if [ false ] 
```

它隐式转换为

```
if [ -n "false" ] 
```

其中`-n`表示“测试它的长度是否大于 0：如果是，则逻辑为真，否则为逻辑假”

抛开 -`true`并`false`实际做一些事情，但它们是命令：

```
man true
man false 
```

阅读更多关于他们的信息。

# c# - 递归搜索文件/文件夹结构

> ID：13294390
> 
> 赞同：3
> 
> 时间：2012-11-08T17:27:09.463
> 
> 标签：c#, .net, recursion

我正在尝试为返回文件和文件夹列表的 Web 服务构建递归搜索功能。我创建了这两种方法，因此它们充当递归搜索，它首先获取顶级内容，然后将任何文件添加到 fileList，并将任何子文件夹添加到 subFoldersList。我们传入访问级别（在我们的例子中是 root），然后是您想要获取信息的路径。如果找到任何文件夹，则会删除顶部文件夹，因为它已开始搜索该文件夹。然后它调用 processDirectories 方法，该方法将新的路径位置传递回 getFiles 重新开始该过程。现在测试我的文件夹结构如下。当它将第二个文件（profilepic.png）添加到列表中时。我收到错误“集合已修改；枚举操作可能无法执行。”

```
Photos
    picture1.png
    TestFolder
        profilepic.png 
```

我的代码：

```
 public static List<string> fileList = new List<string>();
    public static List<string> subFolderList = new List<string>();

    static void processDirectories(string access, string Folder)
    {
        getFiles(access, Folder);
    }

    static void getFiles(string access, string Folder)
    {
        var accessToken = new OAuthToken(token, secret);
        var api = new DssAPI(ConsumerKey, ConsumerSecret, accessToken);
        var folder = api.GetContents(access, Folder);//Get list from WebService

        foreach (var item in folder.Contents)//Contents is an IEnumerable
        {
            if (item.IsDirectory == true)
                subFolderList.Add(item.Path);
            else
                fileList.Add(item.Path);
        }

        foreach (var subFolder in subFolderList)
        {
            subFolderList.RemoveAt(0);
            processDirectories(root, subFolder);
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:31:35.877

假设您不是将其编写为学术练习，则可以使用[Directory.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd383571.aspx)并避免自己实现。

```
foreach(var png in Directory.EnumerateFiles(sourceDirectory, "*.png", SearchOption.AllDirectories))
{
   // do something with the png file
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:31:49.963

改变：

```
foreach (var subFolder in subFolderList)
{
    subFolderList.RemoveAt(0);
    processDirectories(root, subFolder);
} 
```

到：

```
while (subFolderList.Count > 0)
{
    var subFolder = subFolderList[0];
    subFolderList.RemoveAt(0);
    processDirectories(root, subFolder);
} 
```

一个集合在迭代时不能被修改，所以当你在迭代中对它进行 foreach 并从中删除项目时，它会引起麻烦。解决方法通常是使用 for 循环并适当地操作循环变量，但在您的情况下，while 循环更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T17:31:19.013

问题就在这里

```
 foreach (var subFolder in subFolderList)
    {
        subFolderList.RemoveAt(0);
        processDirectories(root, subFolder);
    } 
```

您正在迭代`subFilderList`，并且同时从中删除项目。机器不知道如何处理。

在这种情况下，我的建议可能是做一个常规的`for`循环

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T17:31:57.490

试试这个，

```
Public static void GetFilesLocal( string path)
{
    foreach (string f in Directory.GetFiles( path))
    {
        // Add to subFolderList.
    }
    foreach (string d in Directory.GetDirectories( path))
    {
        GetFilesLocal( d ); 
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T17:32:59.430

如错误消息所述，您无法查看该集合并对其进行修改。例如，较低的 foreach 正在迭代 subFolderList，然后您删除第一项。之后迭代器无效。

如果要修改集合，则应该使用 for 循环，但是如果删除第一项等，则必须记住减少索引器变量。

# c# - 在gridview中单击编辑时出错

> ID：13294391
> 
> 赞同：1
> 
> 时间：2012-11-08T17:27:12.627
> 
> 标签：c#, asp.net, gridview, checkbox, edit

错误信息：

> 变量名称“@Bitnet”已被声明。变量名称在查询批处理或存储过程中必须是唯一的。尝试编辑 gridview 时。

我希望能够更新复选框字段。此网格视图基于表连接。

```
<asp:Content ID="Content4" runat="server" contentplaceholderid="ContentPlaceHolder2">
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"   DataKeyNames="INST_ID,BITNET" DataSourceID="SqlDataSource1" AllowPaging="True" OnSelectedIndexChanged="GridView1_SelectedIndexChanged">
    <Columns>
        <asp:CommandField ShowEditButton="True" />
        <asp:BoundField DataField="INST_ID" HeaderText="INST_ID" ReadOnly="True" SortExpression="INST_ID" />
        <asp:BoundField DataField="FirstName" HeaderText="FirstName" SortExpression="FirstName" />
        <asp:BoundField DataField="LastName" HeaderText="LastName" SortExpression="LastName" />
        <asp:BoundField DataField="Prefix" HeaderText="Prefix" SortExpression="Prefix" />
        <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
        <asp:BoundField DataField="Address1" HeaderText="Address1" SortExpression="Address1" />
        <asp:BoundField DataField="City" HeaderText="City" SortExpression="City" />
        <asp:BoundField DataField="State" HeaderText="State" SortExpression="State" />
        <asp:BoundField DataField="Zip" HeaderText="Zip" SortExpression="Zip" />
        <asp:BoundField DataField="Country" HeaderText="Country" SortExpression="Country" />
        <asp:BoundField DataField="Phone" HeaderText="Phone" SortExpression="Phone" />
        <asp:BoundField DataField="Fax" HeaderText="Fax" SortExpression="Fax" />
        <asp:BoundField DataField="BITNET" HeaderText="BITNET" ReadOnly="True" SortExpression="BITNET" />
        <asp:TemplateField HeaderText="Active">
            <ItemTemplate>
                <asp:CheckBox ID="Active" runat="server" Checked='<%# Eval("Active").ToString() == "1" ? true:false %>' Enabled="false" />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:CheckBox ID="Active" runat="server" Checked="true" Enabled="false" />
            </EditItemTemplate>
        </asp:TemplateField>

    </Columns>
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ASPLOGINConnectionString %>" SelectCommand="SELECT IALO.INST_ID, IALO.FirstName, IALO.LastName, IALO.Prefix, IALO.Title, IALO.Address1, IALO.City, IALO.State, IALO.Zip, IALO.Country, IALO.Phone, IALO.Fax, IALO.BITNET, IALO.Active FROM CEOTable INNER JOIN IALO ON CEOTable.Inst_ID = IALO.INST_ID WHERE (CEOTable.Bitnet = @Bitnet)">
     </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:46:07.153

我解决了我自己的问题是我没有首先清除我的参数 protected void Page_Load(object sender, EventArgs e) { SqlDataSource1.SelectParameters.Clear(); }

这解决了它现在工作正常的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:12:24.767

您必须先声明参数。那么只有你可以使用它。它应该是这样的

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ASPLOGINConnectionString %>" SelectCommand="SELECT IALO.INST_ID, IALO.FirstName, IALO.LastName, IALO.Prefix, IALO.Title, IALO.Address1, IALO.City, IALO.State, IALO.Zip, IALO.Country, IALO.Phone, IALO.Fax, IALO.BITNET, IALO.Active FROM CEOTable INNER JOIN IALO ON CEOTable.Inst_ID = IALO.INST_ID WHERE (CEOTable.Bitnet = @Bitnet)">
<SelectParameters>
    <asp:Parameter Name="Bitnet" Type="Int32" DefaultValue="0" />
</SelectParameters>
<UpdateParameters>
    <asp:Parameter Name="Bitnet" Type="Int32" DefaultValue="0" />
</UpdateParameters>
             </asp:SqlDataSource> 
```

# macos - IOHIDSystem 游标更新过期。重发

> ID：13294392
> 
> 赞同：3
> 
> 时间：2012-11-08T17:27:14.300
> 
> 标签：macos

我花了数周时间试图解决我的 MacPro 的一个重要的核心问题。在正常使用过程中，鼠标、键盘和一般功能会暂停几秒钟，并且我的控制台会显示以下错误：

> > kernel[0]: IOHIDSystem 游标更新过期。重发。

这个问题现在几乎每分钟发生一次，在此期间鼠标和键盘输入停止（下降）。一般功能锁定约 1-3 秒。

我有一台 MacPro（2 x 2.8 Quad-Core Xeon）：

*   14GB DDR2 内存
*   ATI Radeon HD 5770 (1024MB)
*   Mac OSX 10.8.2

以下是我在网上阅读并试图解决的一些问题：

*   我只使用直接插入 MacPro 的有线 USB 鼠标和键盘（蓝牙鼠标/键盘可能存在问题）
*   我已将操作系统迁移到不同的硬盘驱动器（故障驱动器可能存在问题）。SATA 和 SSD 驱动器。
*   我已重置 PRAM
*   卸下第二台显示器
*   我已移除所有其他 USB 设备
*   卸载的 Adob​​e Flash
*   在 Finder 之外不运行任何其他应用程序时，即使重新启动后仍存在问题
*   全新安装 Mac OS X

这个问题在 Mac OSX 的早期版本（10.7 到现在）中已经存在，但越来越严重。

我已经广泛搜索并尝试了所有各种修复（上面列出），但无济于事。有没有人在使用他们的 MacPro 时遇到过这个问题并找到了解决方案？

# graphics - Swing 格式问题

> ID：13294394
> 
> 赞同：1
> 
> 时间：2012-11-08T17:27:17.090
> 
> 标签：graphics, jframe

在尝试创建棋盘格类型的网格时，我发现自己很沮丧。编码很容易，但结果并不完全正确。我知道我的代码是正确的，因为我什至有其他人的程序员比我检查它好得多。问题是前两行虽然是交替的，但从相同的颜色开始。我什至尝试忽略它，并对它进行硬编码，但是每当我对这两行使用 Color.white 时，它​​就会变成黑色。我正在寻找有关如何解决此问题的建议。或者，如果我确实犯了一个逻辑错误，而我或我的朋友都没有发现它，我希望你们中的一个人能做到。

```
public class Checkers1 extends JFrame {
public void paint(Graphics g){
    //checker-board
    for(int x=0, t=0; x<8 && t>=0; x++,t++){
        for(int y=0; y<8; y++, t++){
            if(t%2==0|| t==0){
                g.fillRect(x*80, y*80, 80, 80);
                g.setColor(Color.black);
            }
            else{
                g.fillRect(x*80, y*80, 80, 80);
                g.setColor(Color.white);
            }
        }
    }
}
public Checkers1(){
    setSize(640,640);
    setVisible(true);
    setResizable(false);
}
public static void main(String[] args) {
    Checkers1 b=new Checkers1();
} 
```

}

# python - 从文件导入对象而不运行该文件的导入

> ID：13294395
> 
> 赞同：1
> 
> 时间：2012-11-08T17:27:16.027
> 
> 标签：python

不确定这是否可能，但想知道是否有任何建议。

假设我有一个文件 foo.py 看起来像

```
import doesnotexist

bar = "Hello, World!" 
```

我想做一个`from foo import bar`，但由于导入不存在于这个新文件的范围内，这将失败。

这样做的一种方法是放入`bar`一个名为的新文件`bar.py`并`foo.py`导入它，但如果可能的话想跳过它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:48:39.767

没有办法只导入模块的一部分——Python 会在拉取你要求的部分之前加载整个模块。

如评论中所述，您可以捕获模块内部的导入错误并忽略它。如果您尝试使用未导入的模块，您的代码将生成错误。

```
try:
    import doesnotexist
except ImportError:
    pass

bar = "Hello, World!" 
```

# sql - SQL Server 可用性组问题 - 从主要和次要解决问题中删除

> ID：13294401
> 
> 赞同：2
> 
> 时间：2012-11-08T17:27:24.317
> 
> 标签：sql

我有一个在主服务器上删除的可用性组。辅助服务器在解析状态下具有此可用性。

当我尝试删除可用性组时，我无法删除可用性组“名称”，因为它不存在或者您没有权限（我是管理员）。

我尝试通过发出以下命令来删除数据库：

```
ALTER DATABASE [DATABASE NAME] SET HADR OFF 
```

我得到：

> 可用性组“组 guid”和/或其本地可用性副本不存在。验证指定的可用性组名称是否正确，并且本地可用性副本已加入可用性组，然后重试该操作。

任何人都知道如何永久删除此可用性组？无法对其中的 2 个数据库执行任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:32:11.673

重新启动 SQL 服务即可解决此问题。完成后，已删除的可用性组在辅助服务上消失

# actionscript-3 - AS3 - 更好的 AIR 文件选择窗口？

> ID：13294409
> 
> 赞同：1
> 
> 时间：2012-11-08T17:27:39.650
> 
> 标签：actionscript-3, windows-7, air, dialog

在使用`browseForOpen`,`browseForOpenMultiple`和`browseForSave`Adob​​e AIR 时，出现的对话框有点过时，看起来像 Windows XP 对话框，尽管我运行的是 Windows 7。它有 Windows 7 边框，但我的意思是按钮等看起来有点像Windows XP。所以我想知道，有没有办法让它看起来更“现代”？

这就是我的意思。基本上，我得到了这个：

![空中对话 1](../Images/51dae29f086155d728a54d28da99bbc1.png)

但我想得到更像这样的东西：

![空中对话 2](../Images/2a321595e66294330d6543d509bf50b8.png)

这不是绝对必要的，但它一直困扰着我一段时间，我只是想知道它是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:49:03.303

FileReference.browse() 唯一可用的参数是 typeFilter，所以我假设您不能：P
它可能与在本机操作系统上实现该方法有关。也许本机扩展可以解决此问题。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:52:33.803

我最近意识到这只会在调试应用程序时发生。当您实际安装应用程序并浏览文件时，窗口会按应有的方式显示。

我不确定这是否一直如此，我现在才注意到它，或者可能是 AIR 更新改变了这一点。

# python - Python -- time.sleep() 按代码持续时间偏移

> ID：13294411
> 
> 赞同：8
> 
> 时间：2012-11-08T17:27:40.533
> 
> 标签：python, time, mud

我有一个函数可以为我的游戏服务器中的所有玩家和对象运行 tick()。我通过每 0.1 秒循环一组来做到这一点。我需要它是一个坚实的.1。很多时间和数学取决于这个暂停尽可能精确到 0.1 秒。为此，我将其添加到刻度线：

```
start_time = time.time()

# loops and code and stuff for tick thread in here...

time_lapsed = time.time() - start_time # get the time it took to run the above code
if 0.1 - time_lapsed > 0:
    time.sleep(0.1 - time_lapsed)
else:
    print "Server is overloaded!"
    # server lag is greater that .1, so don't sleep, and just eat it on this run. 
    # the goal is to never see this. 
```

我的问题是，这是最好的方法吗？如果我的循环持续时间是 0.01，那么 time_lapsed == 0.01 ... 然后睡眠时间应该只有 0.09。我问，因为它似乎不起作用。前几天我开始收到服务器超载的消息，服务器绝对没有超载。关于“动态”控制睡眠的好方法有什么想法吗？也许有另一种方法可以在不睡觉的情况下每十分之一秒运行一次代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:50:56.133

最好将您的“时间和数学”基于自最后一次滴答（）以来实际经过的时间量。在最好的情况下，取决于“非常准确”的时间安排是脆弱的。

更新：我的意思是，您的 tick() 方法将采用自上次调用以来经过的时间的参数，例如“t”。然后，要进行运动，您将存储每个事物的位置（例如以像素为单位）和速度（以“像素/秒”为单位），因此调用 tick() 时它的运动幅度变为“速度 * t”。

这具有将物理模拟与帧速率解耦的额外好处。

我看到下面提到的 pygame：他们的“pygame.time.Clock.tick()”方法就是这样使用的，因为它返回自上次调用以来的秒数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:57:07.370

其他 Python 线程可能会在这之间运行，从而减少您的线程时间。也`time.time()`受制于系统时间调整；它可以被设置回来。

pygame 中有一个类似的函数[Clock.tick()](http://www.pygame.org/docs/ref/time.html#pygame.time.Clock)。其目的是限制最大帧速率。

为避免外部影响，您可以保留一个独立的基于帧/回合的计数器来测量游戏时间。

# css - CSS3：子样式的差异

> ID：13294413
> 
> 赞同：0
> 
> 时间：2012-11-08T17:27:46.717
> 
> 标签：css, web

我不确定我的问题标题是否准确地显示了我要问的内容，但这几乎是我第一次接触 CSS3，并且一直在探索人们为了获得一些实践经验而做过的各种项目。

在搜索这些项目时，我发现了一些我难以理解的东西。以下两行之间究竟有什么区别：

```
#random_ID > ul > li > a { ... }

#random_ID ul li a { ... } 
```

这只是写同一件事的两种方式吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:30:39.443

大于符号将查找限制为仅*第一级*后代：左侧选择器的子代。没有符号，它可以是任何级别的任何后代。

所以第一个例子是“random_ID with a child ul with a child li with a child a”，第二个例子是“random_ID with any descendant ul with any descendent li with any descendent a”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:32:19.697

`>`意思是“直接孩子”。仅当元素（右侧的一个`>`）是父元素（左侧的一个）的直接子`>`元素时，才会设置它的样式

所以说如果我有以下布局：

```
<div>
  <ul>
    <li></li>
    <li></li>
  </ul>
</div> 
```

`div > li { background: red; }`不会工作，因为`li`不是它的直接孩子，而`div > ul > li>`or`div li`会工作。

应该注意的是，并不是每个浏览器都支持直接子标签，特别是旧版本的 Internet Explorer，所以不要依赖它，或者如果你确实使用它有一些后备。

# php - MYSQL：如果不存在则插入列

> ID：13294419
> 
> 赞同：4
> 
> 时间：2012-11-08T17:28:08.070
> 
> 标签：php, mysql

我试图通过检查它是否存在来添加一列。如果不是，它应该通过下面的代码给出它已经存在的消息。

```
$prefix = 'vm_';
$col_name = 'checking';

$col = "SELECT ".$col_name." FROM ".$prefix."users";

if (!$col){
    $insert_col = "ALTER TABLE ".$table." ADD ".$col_name." DATETIME NOT NULL";

    mysql_query($insert_col);

    echo $col_name.' has been added to the database';
} else {
    echo $col_name.' is already exists';
} 
```

但它不添加任何列，而是直接显示该列已存在的消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T17:30:47.860

你永远不会执行你的查询，你的条件是你的查询字符串：

```
if (!$col) { //always false, since a nonempty string is always truthy 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T17:35:16.680

这是最终的代码。有一个愚蠢的错误；我没有`mysql_query`用于`$col`

```
$prefix = 'vm_';
$col_name = 'checking';

$col = mysql_query("SELECT ".$col_name." FROM ".$prefix."users");

if (!$col){
    //$insert_col = "ALTER TABLE ".$table." ADD ".$col_name." DATETIME NOT NULL";

    mysql_query("ALTER TABLE ".$prefix."users ADD ".$col_name." DATETIME NOT NULL");

    echo $col_name.' has been added to the database';
} else {
    echo $col_name.' is already exists';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T02:23:45.880

在检查语句之前，您必须运行查询。就像您不打开盒子（即运行查询）就看不到盒子是否为空（即查询的结果）

用这个替换你的第 04 行

```
$col = mysql_query("SELECT ".$col_name." FROM ".$prefix."users"); 
```

那么你的问题就迎刃而解了

> 有关mysqli的更多信息，请阅读[这篇文章](https://stackoverflow.com/a/8891836/1609555)

您也可以考虑继续使用 PDO 语句。

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T17:48:34.380

你还没有执行你的查询。首先执行您的查询，然后检查它的条件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-10T08:56:43.593

这就是我所做的并且有效：

```
$db= new mysqli('host','user','password','db');
$query = "SHOW COLUMNS FROM tablename LIKE 'columnname'";
$db->query($query);
if(empty(empty($db->num_rows)) { 
   $alter = "ALTER TABLE tablename ADD columnname varchar(50) NOT NULL"; 
   $db->query($alter); 
} else { 
   echo 'column exists';
} 
```

# objective-c - 如何从 swizzled 调用原始方法？

> ID：13294420
> 
> 赞同：6
> 
> 时间：2012-11-08T17:28:08.263
> 
> 标签：objective-c

如何从 swizzled 调用原始方法？

原来的方法换成代码：

```
[[UIWindow class] jr_swizzleMethod:@selector(originalMethod) withMethod:@selector(swizzledMethod) error:nil]; 
```

以下代码`swizzledMethod`进行递归！

```
[self originalMethod]; 
```

如何解决这个问题呢？

我使用以下库进行调配：

```
// JRSwizzle.h semver:1.0
//   Copyright (c) 2007-2011 Jonathan 'Wolf' Rentzsch: http://rentzsch.com
//   Some rights reserved: http://opensource.org/licenses/MIT
//   https://github.com/rentzsch/jrswizzle

#import <Foundation/Foundation.h>

@interface NSObject (JRSwizzle)

+ (BOOL)jr_swizzleMethod:(SEL)origSel_ withMethod:(SEL)altSel_ error:(NSError**)error_;
+ (BOOL)jr_swizzleClassMethod:(SEL)origSel_ withClassMethod:(SEL)altSel_ error:(NSError**)error_;

@end 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-08T17:42:10.350

答案很有趣：

```
[self swizzledMethod]; // will call originalMethod 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T00:13:03.340

我经历了为 iOS 5 创建方法 swizzling

我在这里做了一个解释。

[iOS 5 中的方法 Swizzling？](https://stackoverflow.com/questions/7720947/method-swizzling-in-ios-5/10825961#10825961)

基本上每个对原始方法的调用都是由你调用的。因此，对您的方法的每次调用都应该被引导回原来的方法。（如果调酒器设置正确）

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:08:11.700

调用您自己的方法...您调整了指针，但没有调整名称。例如

originalFunc=$123 我的Func=$321

调酒=>

originalFunc=$321 我的Func=$123

所以要调用原来的 123 美元，我们现在调用 myFunc

# unit-testing - 单元测试：Quartz.net Fire 按需触发

> ID：13294421
> 
> 赞同：0
> 
> 时间：2012-11-08T17:28:11.350
> 
> 标签：unit-testing, quartz.net-2.0

我正在为预定的工作进行单元测试，我正在使用 Quartz.net，我是这个库的新手。

我需要强制触发器按需触发，以便执行作业并且我可以检索测试结果。我正在使用`SimpleTriggerImpl`，并且我尝试通过设置来触发触发器`trigger.StartTimeUtc = DateTime.UtcNow`，但是没有调用作业 Execute 方法。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:48:51.757

获取调度器实例并调用 IScheduler.TriggerJob(JobKey jobKey) 方法。需要确保有另一个实例正在执行作业 (IScheduler.Start())。

您使用什么作业商店进行单元测试？

# sql-server - 创建一个名为“master”的模式

> ID：13294422
> 
> 赞同：0
> 
> 时间：2012-11-08T17:28:17.950
> 
> 标签：sql-server

我在 SS2008 中创建了一个名为 master 的模式，但是每次我输入单词时，它的格式都是蓝色的，而不是黑色的。我应该担心吗？我检查了保留字列表，它似乎不在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:32:09.020

它可能认为您指的是名为`master`. 我认为 Master 是一个保留关键字。这是各种颜色含义的[链接。](http://msdn.microsoft.com/en-us/library/ms173443%28v=sql.90%29.aspx)

```
Red - Character string

Dark Green - Comment

Black, Silver Background - SQLCMD command 

Magenta - System function

Green - System table

Blue - Keyword

Teal - Line numbers or template parameter

Maroon - SQL Server stored procedure

Dark Grey - Operators 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:31:10.020

它以蓝色突出显示，因为 master 是 sql server 中的四个系统数据库之一 - master、model、msdb 和 tempdb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:44:18.117

Master 是系统数据库之一，为了减少混淆，应该修改清楚。此外，SQL 解析器可能会在意识到您引用您的架构之前先查看系统主数据库。我知道这适用于命名对象时使用“sys”的情况。

# php - CURL HTTP/1.1 403 禁止日期

> ID：13294424
> 
> 赞同：1
> 
> 时间：2012-11-08T17:28:29.790
> 
> 标签：php, curl, http-status-code-403

```
$url = "http://search.aol.com/aol/search?q=hello";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');   
$html = curl_exec($ch);
curl_close($ch);
echo $html; 
```

这个回报：

```
HTTP/1.1 403 Forbidden

Forbidden

You don't have permission to access /aol/search on this server. 
```

任何可以获取结果的 curl 设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:38:07.950

许多服务器会仔细检查请求标头，以确认是人发出请求（最好来自浏览器代理），而不是自动过程。除了关于未经授权访问其资源的所有警告之外，您可以添加一些 Accept 标头以获得 200 响应。在这种情况下，我只使用一个额外的标头就能够获得 200 响应：

```
curl -i \
-H 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11' \
http://search.aol.com/aol/search?q=hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:31:15.107

看起来 AOL 不希望任何人在他们的引擎上运行自动搜索。

大流士

# jquery - 使用 IE9 的带有 AJAX 内容的 JQuery UI 选项卡非常慢

> ID：13294425
> 
> 赞同：2
> 
> 时间：2012-11-08T17:28:31.333
> 
> 标签：jquery, jquery-ui, datatables, jquery-ui-tabs

我正在使用带有 AJAX 内容的[JQuery UI 选项卡。](http://jqueryui.com/tabs/#ajax)

加载的数据是一个[DataTables](http://datatables.net/)元素，大约有 100 行和 10 列。

FF、Chrome、Safari 和 Opera 一切正常，**但 IE9 加载的表格非常慢。**

我尝试在 IE9 中加载 DataTable 使用 .load() 方法，这很好，但使用 JQueryUI 选项卡确实不是。我试过 JQueryUI 1.8.22 和 1.9.1 但行为是一样的。

有人已经处理过这样的问题吗？

**编辑**

实际上，问题与 DataTables 无关，而是由于通过 AJAX 将“大”内容加载到选项卡中。此外，加载的 JS 代码、滚动甚至 CSS :hover 真的不是反应式的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:39:15.033

当表格隐藏/不可见时，IE 渲染表格的速度特别慢。这是一个记录在案的问题。最好的办法是：

```
$('#yourTabs').tabs({
    "select": function(ev, ui){
        if(ui.index == whateverIndexYourTableIsIn) {
            dtYourTable.fnAddData(yourData);
        }
    }
}); 
```

这只会在表格变得可见时呈现表格（数据），因此在 IE 中几乎不会减慢速度……尽管在这方面 IE 总体上仍然比其他新浏览器慢。

关于IE“隐藏的innerHTML慢”的讨论

[http://datatables.net/forums/discussion/1389/x#Item_8](http://datatables.net/forums/discussion/1389/x#Item_8)

[http://datatables.net/forums/discussion/11701/why-does-datatable-run-so-slow-in-ie89-etc../p1](http://datatables.net/forums/discussion/11701/why-does-datatable-run-so-slow-in-ie89-etc../p1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:23:44.443

我使用了固定标签内容高度。我不明白为什么，这会大大减慢 IE（8 和 9）中的浏览器渲染速度。

为了解决这个问题，我用 CSS 属性替换了修复选项卡内容高度，`height:90%`并在`datatable` `sScrollY": "1000px // 90% of the tab content height`. 我设置了一个窗口事件以使用正确的值`resize`重新绘制`datatable`以适合窗口大小。

我希望能帮助所有面临同样 IE 问题的人。

# iphone - 为什么 UIPopoverController 这么高？

> ID：13294429
> 
> 赞同：0
> 
> 时间：2012-11-08T17:29:01.297
> 
> 标签：iphone, objective-c, ios, xcode, uipopovercontroller

我有以下代码来打开一个 320px x 320px `UIPopoverController`，但由于某种原因，弹出框比它应该高得多 - 大约是我指定的高度（320px）的两倍。

出了什么问题？

```
 colorPicker = [[RSColorPickerView alloc] initWithFrame:CGRectMake(20.0, 20.0, 320.0, 320.0)];
    [colorPicker setDelegate:self];
    [colorPicker setBrightness:1.0];
    [colorPicker setCropToCircle:YES];
    [colorPicker setBrightness:1.0];
    [colorPicker setBackgroundColor:[UIColor clearColor]];

    UIColor * aColor = [UIColor colorWithRed:0.803 green:0.4 blue:0.144 alpha:1];
    [colorPicker setSelectionColor:aColor];

    UIView *newview = [[UIView alloc] initWithFrame:CGRectMake(20.0, 20.0, 320.0, 320.0)];
    [newview addSubview:colorPicker];

    UIViewController *newviewcontroller = [[UIViewController alloc] init];
    [newviewcontroller setView:newview];

    UIPopoverController *newpopover =
    [[UIPopoverController alloc] initWithContentViewController:newviewcontroller];

    newpopover.delegate = self;
    [self.colourController setPopoverContentSize:CGSizeMake(320, 320)];
    self.colourController = newpopover;

    [self.colourController presentPopoverFromRect:CGRectMake(149, 540, 1, 1) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:32:58.863

您需要`popoverContentSize`在弹出窗口中显示的视图控制器上设置 。您将其设置在错误的视图控制器上。

```
newpopover.delegate = self;
self.colourController = newpopover;
[self.colourController setPopoverContentSize:CGSizeMake(320, 320)]; 
```

你在做这最后两行的时候是乱序的。

# javascript - 诊断 body.onload 未被调用

> ID：13294433
> 
> 赞同：3
> 
> 时间：2012-11-08T17:29:23.510
> 
> 标签：javascript, html, dom

我有一些网页依赖`body.onload`（或等效`window.onload`地）来正确设置它们。有时`onload`不被调用。

某些网络浏览器（最好是 Chrome，这显然最常发生这种情况）是否有一个技巧可以告诉我**究竟是什么阻止了页面**成功加载？

提示：当我按 F5 重新加载整个页面时，这种情况很少（甚至可能永远不会）发生，但更普遍的是，如果通过单击链接或将 url 粘贴到地址栏中到达页面，就会发生这种情况。有没有`onload`可能让我绊倒的语义怪癖？

注意脚本本身不会在控制台中产生任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:30:32.463

我想你想要`window.onload`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:10:08.423

我已经测试过这种情况，以下都不起作用：

```
var callback = function() { alert("Body loaded"); };
$("body").load(callback);
document.body.addEventListener("load",callback,false); 
```

但是，`document.body.onload`似乎工作正常。确保`body`正确命名空间：

```
document.body //<body>
body //Reference error 
```

如果你在谈论：

```
<body onload="callback();"></body> 
```

然后返回并查看您的代码，因为它应该可以工作。

* * *

就个人而言，我建议使用`load`窗口对象的事件或框架的就绪事件。

```
//Execute when the window is loaded
var callback = function() {
     //Your code goes here...
};
if (window.addEventListener) window.addEventListener("load",callback,false);
else window.attachEvent("load",callback); 
```

使用 jQuery，您只需要以下内容：

```
$(window).load(callback); 
```

jQuery的ready事件如下：

```
$(document).ready(callback);
//Or just:
$(callback); 
```

MooTools 使用这个：

```
window.addEvent("domready",callback); 
```

不同的图书馆都有自己的方式。

# proxy - javafx2.2 webengine和webscarab之间的连接失败

> ID：13294436
> 
> 赞同：0
> 
> 时间：2012-11-08T17:29:48.210
> 
> 标签：proxy, javafx-2

这是交易。我想在我的 javaFX2.2 Web 引擎浏览器中将 WebScarab 设置为内部代理。[我尝试了此处](https://stackoverflow.com/questions/12477256/if-javas-http-proxy-is-down-it-reverts-to-non-proxy)描述的解决方案，还查看了同一页面中的链接，但在 Web 视图中出现错误。这是我的代码示例：

```
 public WebBrowser() {

        System.setProperty("http.proxyHost", "localhost");
        System.setProperty("http.proxyPort", "8008");
        //ProxySelector.setDefault(new AlwaysProxySelector());

        WebView view;
        final WebEngine eng;    
        view = new WebView();
        view.setMinSize(10, 10);
        view.setPrefSize(500, 400);
        eng = view.getEngine();           
        eng.load("http://www.google.gr");
    } 
```

如您所见，我也尝试使用 AlwaysProxySelector 类的替代解决方案。

Web Scarab 有一个代理，默认在 localhost 的 8008 端口运行。首先我运行网络圣甲虫，然后是我的 JavaFX 应用程序。这就是问题所在。应用程序不会在输出屏幕中引发任何异常。但是在网络视图中，我要加载的页面永远不会出现，并且来自网络圣甲虫的消息在网络视图中加载如下： ![在此处输入图像描述](../Images/8b6f15b1ba6fc2ffa5b45ab3ffd4c1f6.png) WebScarab 尝试检索时遇到错误

获取[http://www.google.gr:80/HTTP/1.1](http://www.google.gr:80/) _

接受语言：en-us,en;q=0.5

接受编码：gzip

接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.7

用户代理：Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/535.14 (KHTML, like Gecko) JavaFX/2.2 Safari/535.14

接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8

缓存控制：无缓存

Pragma：无缓存

主机：www.google.gr

代理连接：保持活动状态

错误是：

连接被拒绝：连接

```
at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)

at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)

at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)

at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)

at java.net.AbstractPlainSocketImpl.connect(Unknown Source)

at java.net.PlainSocketImpl.connect(Unknown Source)

at java.net.SocksSocketImpl.connect(Unknown Source)

at java.net.Socket.connect(Unknown Source)

at org.owasp.webscarab.httpclient.URLFetcher.connect(URLFetcher.java:363)

at org.owasp.webscarab.httpclient.URLFetcher.fetchResponse(URLFetcher.java:224)

at org.owasp.webscarab.plugin.saml.SamlHTTPClient.fetchResponse(SamlHTTPClient.java:84)

at org.owasp.webscarab.plugin.proxy.CookieTracker$Plugin.fetchResponse(CookieTracker.java:130)

at org.owasp.webscarab.plugin.proxy.BrowserCache$Plugin.fetchResponse(BrowserCache.java:101)

at org.owasp.webscarab.plugin.proxy.RevealHidden$Plugin.fetchResponse(RevealHidden.java:100)

at org.owasp.webscarab.plugin.proxy.BeanShell$Plugin.fetchResponse(BeanShell.java:229)

at org.owasp.webscarab.plugin.proxy.ManualEdit$Plugin.fetchResponse(ManualEdit.java:243)

at org.owasp.webscarab.plugin.proxy.ConnectionHandler.run(ConnectionHandler.java:228)

at java.lang.Thread.run(Unknown Source) 
```

从错误中我可以理解，似乎网络圣甲虫成功连接到页面，但无法将页面检索回 webview。每个页面都会出现同样的问题，不仅仅是谷歌。我不想使用任何其他代理，而只想使用网络圣甲虫来获得使用其插件的优势。感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:03:06.597

出于某种原因，WebScarab 无法访问相关站点。这显然与 WebView 无关，因此我们可以从等式中消除它。

最可能的问题是 WebScarab 本身配置了一个代理，WebScarab 无法访问。要检查这一点，请转到工具 -> 代理，并确保没有配置代理（除非您需要上游代理才能正常访问站点，在这种情况下，请确保已正确配置。）

# android - getDrawable from resource 与位图大小不同

> ID：13294437
> 
> 赞同：0
> 
> 时间：2012-11-08T17:29:48.597
> 
> 标签：android, drawable

我像这样从资源图像 png 加载可绘制对象： getResources().getDrawable(R.drawable.somepng); 磁盘上的 png 文件大小为 102x59，但接收到的 drawable 已经是 204x118。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:36:41.807

可以取决于您的屏幕分辨率密度：[看看这个](http://developer.android.com/guide/practices/screens_support.html#DesigningResources)外观，就像您提供 mdpi 图像并在 xdpi 设备上进行测试一样。

# perfmon - 如何在 Perfmon 中获取平均 %User Time

> ID：13294439
> 
> 赞同：0
> 
> 时间：2012-11-08T17:29:58.580
> 
> 标签：perfmon

我也知道我也可以通过使用创建性能计数器以编程方式使用它`System.Diagnostics.PerformanceCounter`，并使用 NextValue() 方法获取计数器值。

```
Process p = Process.GetProcessById(10204);
            PerformanceCounter ramCounter = new PerformanceCounter("Process", "Working Set - Private", p.ProcessName);
            PerformanceCounter cpuCounter = new PerformanceCounter("Process", "% User Time", p.ProcessName);
                while (true)
                {
                    Thread.Sleep(1000);
                    double ram = ramCounter.NextValue();
                    double cpu = cpuCounter.NextValue();
                    Console.WriteLine("RAM: " + (ram / 1024 / 1024) + "MB");
                    Console.WriteLine("CPU: " + (cpu) + " %");
                } 
```

我在网上找到了这段代码，在这里我更感兴趣的是在这个测试结束时计算平均 CPU 和平均 RAM，并将其存储在 Var 中以将其与另一个变量进行比较。任何好主意

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:13:50.243

```
using System;
using System.Diagnostics;
using System.Threading;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            double totalRam = 0.0d;
            double cpu = 0.0d;

            Process p = Process.GetProcessById(1188);
            var ramCounter = new PerformanceCounter("Process", "Working Set - Private", p.ProcessName);
            var cpuCounter = new PerformanceCounter("Process", "% User Time", p.ProcessName);
            int n = 0;
            while (n < 20)
            {
                Thread.Sleep(1000);
                double ram = ramCounter.NextValue();
                cpu += cpuCounter.NextValue();
                totalRam += (ram / 1024 / 1024);
                n++;
            }

            double avgRam = totalRam/n;
            double avgCpu = cpu/n;
            Console.WriteLine("Average Ram is {0} ", avgRam);
            Console.WriteLine("Average Cpu is {0} ", avgCpu);
            Console.ReadLine();
        }
    }
} 
```

# asp.net - 如何更改“html”标签属性？

> ID：13294440
> 
> 赞同：1
> 
> 时间：2012-11-08T17:30:04.157
> 
> 标签：asp.net, html, css

我在 Site.css 中有：

```
html { height:200px; } 
```

我想从 javascript 做同样的事情。所以我尝试了：`html.style...`但`document.style...`它们不起作用。*它是*如何完成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:31:33.267

`<html>`元素`document.documentElement`是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:32:53.830

尝试这个：

使用**javascript**：

```
var html = document.getElementsByTagName('html')[0];
html.style.height = 200px; 
```

使用**jQuery**：

```
$("html").css("height","200px"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:41:55.597

使用 jquery，选择 html 标签并通过在 css 函数中传递键和值来更改它的 css

```
 $(document).ready(function() {
   $('html').css('height','200px');
 }) 
```

# vb.net - 通过网络服务保存图像

> ID：13294442
> 
> 赞同：1
> 
> 时间：2012-11-08T17:30:12.527
> 
> 标签：vb.net, web-services, gdi+

好吧，长话短说。我正在开发类似于 UPS 送货潜水员使用的设备的软件。我们必须设法获得交货证明（POD）。第一个是签名，第二个是相机拍摄的照片。

现在，捕获这些图像的设备将它们发送到我们拥有的 Web 服务，然后将它们保存在服务器上。设备将这两种保存为不同的文件类型，png 用于签名，jpg 用于图片，但 Web 服务将它们保存为 jpg 文件。目前签名正在工作，但图片不断抛出异常“发生通用异常 gdi+”。

我不明白为什么一个人会保存得很好，但另一个人总是抛出错误消息。特别是因为它们在服务器端时都使用相同的代码。

我已经搜索过抛出堆栈溢出并且没有找到任何可以解决我的问题的东西，并且我用谷歌搜索无济于事。有人对如何保存图片有任何建议吗？

将图像转换为字符串的设备逻辑，以便可以将其发送到 Web 服务。

```
**Picture from camera logic**
Using MS As New System.IO.MemoryStream(), BM As New Bitmap(ImagePath)
     BM.Save(MS, System.Drawing.Imaging.ImageFormat.Jpeg)
     ImageString = Convert.ToBase64String(MS.ToArray())
End Using

**Signature logic**
Using MS As New System.IO.MemoryStream(), BM As New Bitmap(ImagePath)
     BM.Save(MS, System.Drawing.Imaging.ImageFormat.png)
     ImageString = Convert.ToBase64String(MS.ToArray())
End Using 
```

Web 服务逻辑将图像转换回字符串，然后将其保存为 jpeg。

```
Dim Image As Drawing.Bitmap = Nothing
Dim ByteImage As Byte()

If ImageString.IsNullOrEmpty = False Then
    ByteImage = Convert.FromBase64String(ImageString)

    Using stream As New MemoryStream(ByteImage, 0, ByteImage.Length)    
         stream.Write(ByteImage, 0, ByteImage.Length)
         Image = CType(Drawing.Bitmap.FromStream(stream, True), Drawing.Bitmap)
    End Using
    Image.Save(FileLocation,Drawing.Imaging.ImageFormat.Jpeg)
End If 
```

Image.Save 是引发异常的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:19:18.463

看来您将图像保存到手机上的某些媒体中，然后再次阅读并发送。不要那样做。只需保存它，base 64 编码整个文件，发送 base 64 编码字符串。

# java - Sencha GXT XTemplate tpl for inside tpl for

> ID：13294443
> 
> 赞同：0
> 
> 时间：2012-11-08T17:30:15.367
> 
> 标签：java, templates, for-loop, extjs, gxt

我正在尝试使用 GXT 3.0 的 XTemplates（类似于 EXT），这里有 2 个简单的 java 对象，它们具有以下关系：

```
class A {
   String name;
   public String getName() {
       return name;
   }
}

class B {
   String name;

   public String getValue(A a) {
       return a.getName();
   }
} 
```

我想为以下模板应用带有 2 个参数（List<< A>> aList、List<< B>> bList）的 XTemplate：

```
<tpl for="aList">
    <tpl for="bList">
         ////// Questions? How to call function B.getValue(A) ???
         /////  this does not work for me:  {this.getValue(parent)}
    </tpl>
</tpl> 
```

有任何机构熟悉这种请求吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:58:22.120

有一个特殊的命名对象可以帮助您处理这个调用`parent`- this 访问外部范围。

```
<tpl for="aList">
    <tpl for="bList">
         Name of inner item, i.e. b.getName() is {name} <br />
         Name of outer item, i.e. a.getName() is {parent.name}
    </tpl>
</tpl> 
```

如果有第三个循环，您可以将调用链接到 parent 以进一步退出 - `parent.parent.name`。

如果 A 有一个`getPhone()`方法，但 B 没有，那么 the`parent`是可选的，因为显然你不能指的是不存在的`b.getPhone()`。

[此示例](http://www.sencha.com/examples/#ExamplePlace%3atemplates)中使用了相同的原则，其中每个孩子都打印了他们的详细信息以及父母的详细信息。查看文件的来源，了解在这种情况下`template.html`如何`parent`使用。

# android - 拍照，裁剪，然后将图像作为电子邮件发送

> ID：13294444
> 
> 赞同：0
> 
> 时间：2012-11-08T17:30:20.973
> 
> 标签：android, android-intent

我已经在这里呆了 3 天了，但仍然没有运气。我正在尝试拍照，裁剪它，然后通过 Android 上的意图发送电子邮件。

到目前为止，我可以拍照并裁剪它。但是，当我尝试设置电子邮件部分时，只要我拍照，电子邮件意图就会立即弹出并且不允许我裁剪。（如果我点击 gmail，裁剪在后台）。

到目前为止，我已经尝试过：

```
 @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {

        //Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);   

        OutputStream imageFileOS;
        try {
            imageFileOS = getContentResolver().openOutputStream(uriTarget);
            imageFileOS.write(arg0);
            imageFileOS.flush();
            imageFileOS.close();

            Toast.makeText(DigitalSignature.this, 
                    "Image saved: " + uriTarget.toString(), 
                    Toast.LENGTH_LONG).show();

            String[] recipients = new String[]{"digital.signature@lads.jetdelivery.com", "",};

            Intent intent = new Intent("com.android.camera.action.CROP");
            // this will open all images in the Galery
            intent.setDataAndType(uriTarget, "image/jpeg");
            intent.putExtra("crop", "true");
            // this defines the aspect ration
            intent.putExtra("aspectX", 20);
            intent.putExtra("aspectY", 0);
            // this defines the output bitmap size
            //intent.putExtra("outputX", 256);
            //intent.putExtra("outputY", 256);

            // true to return a Bitmap, false to directly save the cropped iamge
            intent.putExtra("return-data", false);
            //save output image in uri
            intent.putExtra(MediaStore.EXTRA_OUTPUT, uriTarget);
            startActivity(intent);

            Intent intent2 = new Intent(Intent.ACTION_SEND);
            intent2.setType("image/jpeg");
            intent2.putExtra(Intent.EXTRA_EMAIL, recipients);
            intent2.putExtra(Intent.EXTRA_SUBJECT, job);
            intent.putExtra(Intent.EXTRA_STREAM, uriTarget.getPath()); // Attaches image to Gmail

              //File shareImg =  new File(uriTarget);
              //intent.putExtra(Intent.EXTRA_STREAM, uriTarget.fromFile(shareImg));

            try {
                startActivity(intent2);

            } catch (android.content.ActivityNotFoundException ex) {

                Toast.makeText(DigitalSignature.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            } 
```

请问有人能帮助我朝着正确的方向前进吗？

谢谢，约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:35:41.780

您必须`startActivityForResult`根据 CROP 意图并在收到结果后通过电子邮件发送它。

# r - ggplot2 - 在同一个图上绘制多个模型

> ID：13294445
> 
> 赞同：4
> 
> 时间：2012-11-08T17:30:21.397
> 
> 标签：r, ggplot2

我有一个线性和非线性模型列表，这些模型来自不同的数据集，测量相同的两个变量`x`，`y`我想使用`stat_smooth`. 这是为了能够轻松地比较数据集之间`x`和`y`跨数据集的关系形状。

我试图找出最有效的方法来做到这一点。现在我正在考虑创建一个空的 ggplot 对象，然后使用某种循环或`lapply`按顺序添加到该对象，但事实证明这比我想象的要困难。当然，简单地提供模型是最简单的，`ggplot`但据我所知，这是不可能的。有什么想法吗？

这是一个简单的示例数据集，仅使用两个模型，一个线性模型和一个指数模型：

```
df1=data.frame(x=rnorm(10),y=rnorm(10))
df2=data.frame(x=rnorm(15),y=rnorm(15))

df.list=list(lm(y~x,df1),nls(y~exp(a+b*x),start=list(a=1,b=1),df2)) 
```

还有两个单独的示例图：

```
ggplot(df1,aes(x,y))+stat_smooth(method=lm,se=F)
ggplot(df2,aes(x,y))+stat_smooth(method=nls,formula=y~exp(a+b*x),start=list(a=1,b=1),se=F) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T17:34:34.930

**编辑：请注意，在发布此答案后，OP 更改了问题**

将数据组合成一个单独的数据框，新列表示模型，然后用于`ggplot`区分模型：

```
df1=data.frame(x=rnorm(10),y=rnorm(10))
df2=data.frame(x=rnorm(10),y=rnorm(10))

df1$model <- "A"
df2$model <- "B"

dfc <- rbind(df1, df2)

library(ggplot2)
ggplot(dfc, aes(x, y, group=model)) + geom_point() + stat_smooth(aes(col=model)) 
```

这会产生：

![在此处输入图像描述](../Images/8a8eee7bd167cede0eeee3928e878427.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T21:12:24.867

我认为这里的答案是得到一个你想要运行的 X 和 Y 的共同范围，然后从那里开始。您可以使用 predict 从每个模型中拉出一条曲线，并使用 l_ply 将图层添加到 ggplot。

d

```
f1=data.frame(x=rnorm(10),y=rnorm(10))
df2=data.frame(x=rnorm(15),y=rnorm(15))

df.list=list(lm(y~x,df1),nls(y~exp(a+b*x),start=list(a=1,b=1),df2))

a<-ggplot()

#get the range of x you want to look at
x<-seq(min(c(df1$x, df2$x)), max(c(df1$x, df2$x)), .01)

#use l_ply to keep adding layers
l_ply(df.list, function(amod){

  #a data frame for predictors and response
  ndf <- data.frame(x=x)

  #get the response using predict - you can even get a CI here
  ndf$y <- predict(amod, ndf)

  #now add this new layer to the plot
  a<<- a+geom_line(ndf, mapping=(aes(x=x, y=y)))

} )

a 
```

或者，如果您想要一个带有型号或其他内容的漂亮颜色键：

```
names(df.list) <- 1:length(df.list)
modFits <- ldply(df.list, function(amod){
  ndf <- data.frame(x=x)

  #get the response using predict - you can even get a CI here
  ndf$y <- predict(amod, ndf)

  ndf

  })

qplot(x, y, geom="line", colour=.id, data=modFits) 
```

# jquery - 重新加载基础设施网格

> ID：13294447
> 
> 赞同：2
> 
> 时间：2012-11-08T17:30:25.163
> 
> 标签：jquery, infragistics, ignite-ui, iggrid

我有一个需要通过 Jquery 重新加载的 Infragistics 网格。他们目前在使用网格中的值/文本下拉更新/插入行时存在错误，因此我需要手动重新加载它。

`$("#grid1").igGrid("databind");`不起作用。如何通过 Jquery 重新加载整个网格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-01T15:04:35.367

您需要调用方法“dataBind”（只是一个错字）

```
$("#grid1").igGrid("dataBind"); 
```

希望这至少对某人有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T13:39:00.413

如果您想重新加载整个网格，您可以随时尝试使用 UpdatePanel 并将触发器设置为 RowUpdated 和 RowAdded 事件；您只需要将网格从事件处理程序重新绑定到数据源。我认为您可以使用客户端事件和 jQuery 来完成这项工作，但我只尝试从后面的代码重新绑定。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T10:49:54.233

他们没有提供任何可以提供帮助的方法，但您可以尝试下面的代码，效果很好。

这里第一次 igGrid 在 DOM 上加载，第二次在调用 igGridUpdate() 之后加载，效果非常好。我使用了来自我的应用程序 URL 的数据，它为我提供了您直接传递数据源的 json 数据。

```
 $(document).ready(function() {
    var data  = "/orders/open_orders.json";
    igGridLoading(data);

  });

  function igGridUpdate()
  {

    $.ajax( {
     type : 'GET',
     url : '/orders/open_orders.json',
     dataType : 'json',
     success : function(data) {
          igGridLoading (data);
     },

  error: function(XMLHttpRequest, testStatus, errorThrown) {
     alert('Error!');
   }

   }); 
```

}

```
 function igGridLoading(data)
  {
        $("#open_order_list").igGrid({
          columns: [
              { headerText: "Order ID", key: "id", dataType: "string", hidden:true },
              { headerText: "Order no", key: "order_number", dataType: "number" },
              { headerText: "Customer name", key: "customer_name", dataType: "string", align: "center" }, 
              { headerText: "Reseller name", key: "reseller_name", dataType: "string" },
              { headerText: "Created date", key: "created_at", dataType: "date" },
              { headerText: "Time", key: "created_time", dataType: "string" },
              { headerText: "Updated date", key: "updated_at", dataType: "date" },
              { headerText: "Time", key: "updated_time", dataType: "string" },
              { headerText: "Order status", key: "order_status_name", dataType: "string" },
              { headerText: "Updated by", key: "updated_by", dataType: "string" }
          ],
          dataSourceType: 'json',
          dataSourceUrl: "/orders/open_orders_grid",
          dataSource: data,
          primaryKey: "id",
          autoGenerateColumns: false,
          width: "900px",
          responseDataKey: "results",

              features: [
              {
                  name: "Tooltips",
                  style: Modernizr.touch ? "popover" : "tooltip",
                  visibility: "always"
              },
              {
                  name: 'Paging',
                  type: "local",
                  pageSize: 10
              },
              {
                  name: "Filtering",
                  type: "local",
                  mode: "advanced",
                  filterDialogContainment: "window"
              },
              {
                  name: "Resizing"
              },
              {
                  name: "Selection",
                  mode: 'row',
                  multipleSelection: true
              },
              {
                  name: "Sorting",
                  type: "local",
                  mode: "multi",
                  sortingDialogContainment: "window"
              },
              {
                  name: "Hiding"
              },
              {
                  name: "ColumnMoving",
                  columnMovingDialogContainment: "window"
              }
          ]
    });
  } 
```

如果您需要任何帮助，请告诉我

# node.js - express.js 中的“会话”未定义

> ID：13294455
> 
> 赞同：1
> 
> 时间：2012-11-08T17:30:52.820
> 
> 标签：node.js, session, express

我在我的快递应用程序中使用*express.session()*所以我创建了一个中间件用于身份验证用户，然后再将它们发送到“/”我的代码是：

```
var express = require('express');

app.configure(function(){
  app.use(express.cookieParser('keyboard cat'));
  app.use(express.session( {secret : "my secret"}));
  app.use(app.router);
});

var accessChecker= function(req,res,next){
    if (req.session.user.name && req.session.auth){
    next(); 
    }else{
    res.redirect('/login');
    }
   }
app.get('/',accessChecker(), routes.index); 
```

当我运行此代码时，我收到此消息：

```
if (req.session.user.name && req.session.auth){
       ^
TypeError: Cannot read property 'session' of undefined 
```

我尝试将***accessChecker***函数 放在***app.configure***之前，并在***accessChecker***函数 中使用***express.cookieParser()***和***express.session()***但总是得到相同的消息！

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:52:01.290

您正在调用该`accessChecker`函数，而不是传递一个指向该函数的指针。这将解决问题：

```
app.get('/', accessChecker, routes.index); 
```

有关更多示例，请参阅[文档](http://expressjs.com/api.html#app.VERB)。如果您想进行身份验证，我还建议您查看[护照。](http://passportjs.org/)*

# python - 将 dict 值转换为集合，同时保留 dict

> ID：13294461
> 
> 赞同：3
> 
> 时间：2012-11-08T17:31:14.037
> 
> 标签：python, dictionary, set

我有一个这样的字典：

（100002：“苹果”，100004：“香蕉”，100005：“胡萝卜”）

我正在尝试使我的 dict 具有键的整数（就像现在一样），但具有值的集合（而不是现在的字符串。）我的目标是能够从 .csv 文件中读取一列键（一个int，它是项目ID号），然后是大小、形状和颜色等列。我想将此信息添加到我的字典中，以便仅添加字典中已有键的信息。

我的目标字典可能如下所示：

```
(100002: set(['APPLE','MEDIUM','ROUND','RED']), 100004: set(['Banana','MEDIUM','LONG','YELLOW']), 100005: set(['CARROT','MEDIUM','LONG','ORANGE']) 
```

从我的项目名称的键 + 字符串开始，我尝试使用这样的代码从 .csv 文件中读取额外信息：

```
infile = open('FileWithTheData.csv', 'r')
for line in infile.readlines():
    spl_line = line.split(',')
    if int(spl_line[0]) in MyDict.keys():
        MyDict[int(spl_line[0])].update(spl_line[1:]) 
```

不幸的是，这个错误说出来了`AttributeError: 'str' object has no attribute 'update'`。我尝试将字典的值更改为集合，以便我可以 .update 它们产生如下结果：`(100002: set(['A','P','L','E']), 100004: set(['B','A','N']), 100005: set(['C','A','R','O','T']))` 我想将值转换为集合，以便当前值的字符串将成为集合中的第一个字符串而不是而不是将字符串分解成字母并制作一组这些字母。

当我通过将两个列表压缩在一起来创建字典时，我还尝试将这些值设置为一组，但它似乎没有任何区别。像这样的东西 MyDict = dict(zip(listofkeys, set(listofnames))) 仍然使整个 listofnames 列表成为一个集合，但它没有实现我的目标，即使 MyDict 中的每个值与 listofnames 中的相应字符串成一个集合为集合中的第一个字符串。

如何将 MyDict 中的值设置为一个集合，以便我可以向该集合添加其他字符串，而无需将当前作为 dict 中值的字符串转换为一组单独的字母？

编辑：我目前通过使用一个函数生成项目ID列表（它们是键）和另一个查找这些项目ID以生成相应项目名称列表的函数来制作MyDict（使用两列.csv文件作为数据源）然后我`zip`将它们放在一起。

回答：使用这里的建议，我想出了这个解决方案。我发现有 set()).update 的部分可以很容易地更改为 list()).append 以产生一个列表而不是一个集合（以便保留顺序。）我还发现通过 .通过将包含名称的列添加到 FileWithTheData.csv 来创建 csv 数据输入文件，这样我就不必费心制作 dict，将值转换为集合，然后添加更多数据。我本节的代码现在如下所示：

```
MyDict = {}
infile = open('FileWithTheData.csv', 'r')
for line in infile.readlines():
    spl_line = line.split(',')
    if int(spl_line[0]) in itemidlist: #note that this is the list I was formerly zipping together with a corresponding list of names to make my dict
        MyDict.setdefault(int(spl_line[0]), list()).append(spl_line[1:])
print MyDict 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:34:51.487

您的错误是因为最初您的`MyDict`变量将整数映射到字符串。当您尝试更新它时，您将值视为`set,`字符串时的值。

您可以为此使用[defaultdict ：](http://docs.python.org/2/library/collections.html#collections.defaultdict)

```
combined_dict = defaultdict(set)

# first add all the values from MyDict
for key, value in MyDict.iteritems():
    combined_dict[int(key)].add(value)

# then add the values from the file
infile = open('FileWithTheData.csv', 'r')
for line in infile.readlines():
    spl_line = line.split(',')
    combined_dict[int(sp_line[0])].update(spl_line[1:]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:38:17.573

您的问题在于您的初始化方式`MyDict`，请尝试将其更改为以下内容：

```
MyDict = dict(zip(listofkeys, [set([name]) for name in listofnames])) 
```

这是差异的一个简单示例：

```
>>> listofkeys = [100002, 100004, 100005]
>>> listofnames = ['APPLE', 'BANANA', 'CARROT']
>>> dict(zip(listofkeys, set(listofnames)))
{100002: 'CARROT', 100004: 'APPLE', 100005: 'BANANA'}
>>> dict(zip(listofkeys, [set([name]) for name in listofnames]))
{100002: set(['APPLE']), 100004: set(['BANANA']), 100005: set(['CARROT'])} 
```

`set(listofnames)`只是要将您的列表变成一个集合，唯一可能产生的效果是重新排序值，如上所示。您实际上想要获取列表中的每个字符串值，并将其转换为一个元素集，这就是列表推导所做的。

进行此更改后，您当前的代码应该可以正常工作，尽管您可以直接对字典进行包含检查，而不是显式检查键（`key in MyDict`与 相同`key in MyDict.keys()`）。

# xcode - 表视图取消行上的警报窗口

> ID：13294466
> 
> 赞同：0
> 
> 时间：2012-11-08T17:31:21.870
> 
> 标签：xcode, nstableview, nsalert

我有一个连接到数组控制器的 NSTableView，我希望当用户单击该行的取消按钮时，会出现一个警告窗口，要求在删除之前进行确认。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:30:43.220

```
 // [_window makeKeyAndOrderFront:nil];

NSAlert *myAlert = [NSAlert alertWithMessageText:@"A message from the bottle"
                                   defaultButton:@"No"
                                 alternateButton:@"Yes"
                                     otherButton:@""
                       informativeTextWithFormat:@"Blah Blah\n\Blah!\nProceed?\n"
                    ];

switch ([myAlert runModal]) {

    case 0: // alternateButton
        NSBeep();
        break;

    case  1: // defaultButton
        NSBeep();
        break;

    default:
        break;
} 
```

# sql - 更改 SQL Server 中的列

> ID：13294468
> 
> 赞同：29
> 
> 时间：2012-11-08T17:31:26.913
> 
> 标签：sql, sql-server-2008

`ALTER`将默认值添加到现有列的语句的正确语法是什么？

我可以添加没有错误的新列：

```
ALTER TABLE tb_TableName ADD Record_Status varchar(20) 
```

但是，如果我尝试使用以下语句更改现有列以应用默认值：

```
ALTER TABLE tb_TableName 
ALTER COLUMN Record_Status VARCHAR(20) NOT NULL DEFAULT '' 
```

或者

```
ALTER TABLE tb_TableName 
ALTER Record_Status VARCHAR(20) NOT NULL DEFAULT '' 
```

我收到一个错误：

> “Record_Status”附近的语法不正确。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-08T17:35:08.150

我想你想要这个语法：

```
ALTER TABLE tb_TableName  
add constraint cnt_Record_Status Default '' for Record_Status 
```

根据您的一些评论，我猜测`null`您的表中可能已经有值导致列的更改`not null`失败。如果是这种情况，那么您应该`UPDATE`先运行。您的脚本将是：

```
update tb_TableName
set Record_Status  = ''
where Record_Status is null

ALTER TABLE tb_TableName
ALTER COLUMN Record_Status VARCHAR(20) NOT NULL

ALTER TABLE tb_TableName
ADD CONSTRAINT DEF_Name DEFAULT '' FOR Record_Status 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!18/d7797/1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T17:48:49.713

试试这个。

```
ALTER TABLE tb_TableName
ALTER COLUMN Record_Status VARCHAR(20) NOT NULL

ALTER TABLE tb_TableName
ADD CONSTRAINT DEF_Name DEFAULT '' FOR Record_Status 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T09:26:19.033

要将默认值设置为列，请尝试以下操作：

```
ALTER TABLE tb_TableName
ALTER COLUMN Record_Status SET DEFAULT 'default value' 
```

# c++ - 如何在不破坏现有代码的情况下向函数添加输出参数？

> ID：13294477
> 
> 赞同：5
> 
> 时间：2012-11-08T17:31:55.847
> 
> 标签：c++, function, parameters

我假设该函数已经有一个返回值，因此无法添加。

我想出解决这个问题的是添加额外的指针参数，默认为 nullptr。

前：

```
bool fun(double a, std::vector<std::randomexample> const & b) 
```

后：

```
bool fun(double a, std::vector<std::randomexample> const & b, int* extraoutput = nullptr) 
```

并像这样使用它

```
if(extraoutput)
  *extraoutput = whatever; 
```

但这正是我想出的。我想知道是否有更好的方法来做到这一点。请注意，“whatever”已经在函数中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:37:17.207

如果由于某种原因您需要二进制以及（大部分）源兼容性[*]：

前：

```
bool fun(double a, std::vector<std::randomexample> const & b) {
    // do stuff
    return true;
} 
```

后：

```
bool fun(double a, std::vector<std::randomexample> const & b, int* extraoutput) {
    // do stuff
    if(extraoutput)
        *extraoutput = whatever;
    return true;
}
bool fun(double a, std::vector<std::randomexample> const & b) {
    return fun(a, b, nullptr);
} 
```

如果您不希望函数重载（例如，如果`fun`是`extern "C"`接口的一部分），那么您实际上不必调用新函数`fun`。也可以`fun2`。

[*] 正如 AndreyT 所指出的，您的解决方案的源代码兼容性是有限的。对旧函数的调用将正常调用新函数，但您可能对旧函数执行的其他一些操作将无法正常工作（因为您已更改其类型）。

我的代码中实际上也存在源不兼容问题。`void(*foo)() = (void(*)()) fun;`在添加重载之前是允许的，但之后它是模棱两可的。如果您想支持执行此操作的代码，那么这是不希望函数重载的第二个原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:40:53.037

通常，我*添加*一个带有额外参数的方法，并使用前一种方法的默认值调用该方法：

```
//foo v1
void foo( S s ) {
   ... stuff with s;
};

//codeA_v1:
S s;
foo(s);

//codeB_v1
S s2;
foo(s2); 
```

然后，我添加了一个带有额外参数的方法：

```
void foo(S s){ foo(s, default_value_for_T); }
void foo(S s, T t){
   ... stuff with s and t
}

//codeA_v1 == codeA_v2
S s;
foo(s);

//codeB_v2
S s;
T t;
foo(s,t); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T17:51:11.150

这是一个扩展评论。正如其他人所建议的那样，您最好重载该函数以提供源代码和二进制兼容性。这样做的原因是，通过在函数签名中引入更改，您还可以更改损坏的符号名称，例如 from `_Z3fundRKSt6vectorISt13randomexampleSaIS0_EE`to `_Z3fundRKSt6vectorISt13randomexampleSaIS0_EEPi`。`fun()`这将破坏与通过其旧名称调用的所有其他对象的二进制兼容性。如果`fun()`它是动态链接库的一部分，它将破坏链接到它的所有现有二进制文件，因为动态链接器将不再能够解析`_Z3fundRKSt6vectorISt13randomexampleSaIS0_EE`符号引用。如果您使用重载函数版本，旧的损坏符号将仍然存在，并且将保留二进制兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T17:37:15.050

正如其他人所说，这将是您的最终产品。

```
bool fun(double a, std::vector<std::randomexample> const & b){
    return fun(a,b,0);
}
bool fun(double a, std::vector<std::randomexample> const & b, int* extraoutput = 0){
    // have fun!
    if(extraoutput) *extraoutput = whatever;
    return true;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-08T17:35:37.300

您可以尝试实现通用的观察者模式。这是一个喜欢：http: [//sourcemaking.com/design_patterns/observer](http://sourcemaking.com/design_patterns/observer)

当您想要添加更多参数时，将来会更好。如果您不能派生，那么作为参数传递也将是解决方案。

据我了解，您必须在此功能中执行此操作，否则是的，重载是一个很好的解决方案。

它不会破坏其他解决方案的二进制兼容性。

# image - 如何剪辑图像或剪切不需要的部分？

> ID：13294479
> 
> 赞同：1
> 
> 时间：2012-11-08T17:32:01.850
> 
> 标签：image, wrapper, smalltalk, cut, clipping

如何在 Smalltalk 中做到这一点？我试图用 BoundedWrapper 来做，但图像没有出现。Image 可以使用 BoundedWrapper 吗？或者：是一种无需包装即可剪切图像的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:24:45.013

如果您使用自定义视图，则可以使用 displayOn:at: 在控件边界内的偏移处显示图像。VisualWorks 应该会自动裁剪图像。

# javascript - 创建指向在页面上运行 Javascript 函数的网页的链接

> ID：13294483
> 
> 赞同：2
> 
> 时间：2012-11-08T17:32:11.273
> 
> 标签：javascript, html, bookmarklet

使用 HTML 和 Javascript，是否可以创建一个指向网页的链接，该链接会在网页上自动运行特定的 Javascript 功能（例如，书签）？我有一个小书签，它突出显示正则表达式的所有匹配项，我想创建一个指向[http://en.wikipedia.org](http://en.wikipedia.org)的超链接，它会自动在[http://en.wikipedia.org](http://en.wikipedia.org)上运行小书签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:36:55.740

这几乎是跨站点脚本的教科书定义，所以不，通常这不是您可以做的事情。用户必须运行小书签。您可以研究的是为浏览器制作插件或扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:56:31.707

您可以使用[GreaseMonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)之类的东西或类似的东西来浏览您的浏览器。

# r - 我想使用 RNetLogo 包从 NetLogo 中提取坐标数据

> ID：13294484
> 
> 赞同：3
> 
> 时间：2012-11-08T17:32:10.807
> 
> 标签：r, coordinates, netlogo

如果有人熟悉，我将使用示例植绒代码作为示例

```
NLCommand("set population 1")
NLCommand("setup")
nruns <- 10
timedata <- list()
for(i in 1:nruns) {
NLCommand("go")
timedata[[i]] <- NLGetAgentSet(c("who","xcor","ycor"),"turtles",
as.data.frame=T,df.col.names=c("who","xcor","ycor")) }
timedata 
```

问题在于它会为每个模型迭代生成新的标头。所以我得到以下而不是标题只出现一次：

```
[[1]]
 who     xcor      ycor
1   0 34.56833 -26.47777

[[2]]
 who     xcor      ycor
1   0 35.19765 -25.70063 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T15:16:47.843

在[http://groups.yahoo.com/neo/groups/netlogo-users/conversations/topics/15551](http://groups.yahoo.com/neo/groups/netlogo-users/conversations/topics/15551)有很好的讨论和答案（OP问了同样的问题）。NetLogo 的 R 扩展的作者 Jan Thiele 写道：

> 如果你真的想在 R 中拥有所有海龟坐标，更合适的函数是 NLGetAgentSet 并在刻度上循环执行它。我写了一个 RNetLogo 软件包附带的教程（请参阅您的 RNetLogo 安装目录）。第 11.5 章（时间滑动可视化）中有一个示例，其中做了类似的事情。使其适应植绒模型，它可能看起来像这样：[...]

# vim - 让 Vim 只做软换行，不做硬换行

> ID：13294489
> 
> 赞同：18
> 
> 时间：2012-11-08T17:32:24.300
> 
> 标签：vim, macvim

我已经使用 Vim 一个星期了。我注意到了一些事情。

我有 textwidth 未设置，我有 wrap 设置。现在，我的问题是。目前，每当我行长于 120 个字符（窗口宽度）时，它都会占用最后一个字符，就像这样，将它换行。所以如果它在一个单词的中间，它看起来像这样：

```
This is a very long sen|
tence, this looks very |
strange, don't you thin|
k?                     | 
```

顺便说一句，`|`代表文本限制，在这种情况下很短，以证明我的观点。所以这说明了我的问题是什么，我想要一个简单的解决方案，只要我不丢失任何屏幕空间。

当然，理想的解决方案会输出以下内容，不修改文本，只输出，文本保持在一行，但似乎分布在几行：

```
This is a very long    |
sentence, this looks   |
very strange, don't you|
think?                 | 
```

感谢您的任何帮助，您可以提供。:)

额外信息：

*   操作系统：Mac OSX 山狮
*   使用 MacVim

我尝试了以下方法：

```
set textwidth=120

set wrap
set linebreak

set fo=1 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-08T17:41:19.897

```
set linebreak 
```

足够。但是，它在打开时不起作用`list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:07:36.933

我对这个问题的解决方案是[这个 Vim wiki](http://vim.wikia.com/wiki/Word_wrap_without_line_breaks)页面。感谢@romainl 说服我不要使用`list`.

# javascript - 如何为多个表单创建确认框

> ID：13294491
> 
> 赞同：0
> 
> 时间：2012-11-08T17:32:38.910
> 
> 标签：javascript, forms, events

我有一个 foreach 循环，它显示了许多这样的形式：

```
<form action="cree-new-user.php"  method="post" class="formButtonForm">                                                      
    <input type="hidden" name="ent" value="<?php echo $corp->id;?>" />
    <input type="hidden" name="action" value="delete" />
    <input type="submit" class="submit redform" value="delete" />
</form> 
```

当我单击“删除”按钮时，它会删除我数据库中的对象。我想创建一个弹出框来确认我是否“真的”想要删除它。

我用 Javascript 编码：

```
function Validate(event) {

  var thereturn = confirm("Voulez vous vraiment effacer cette entreprise ?");
    if (event) {
      if (!thereturn) {
         event.preventDefault();
      }
     } else {
   return thereturn;
   }
}

window.onload = function () {                                                          
 document.getElementByName("deleteEntreprise").onclick = Validate;                
} 
```

它应该显示一个警报弹出窗口，但没有弹出...你们有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:39:27.903

尝试这种方法，使用`onsubmit`代替`onclick`：

HTML：

```
<form action="cree-new-user.php"  method="post" class="formButtonForm" id="delete-form">                                                      
    <input type="hidden" name="ent" value="<?php echo $corp->id;?>" />
    <input type="hidden" name="action" value="delete" />
    <input type="submit" class="submit redform" value="delete" />
</form> 
```

JavaScript：

```
function Validate(event) {
    var thereturn = confirm("Voulez vous vraiment effacer cette entreprise?");
    if (event) {
        if (!thereturn) {
            event.preventDefault();
        }
    } else {
        return thereturn;
    }
}

window.onload = function() {                                                          
    document.getElementById('delete-form').onsubmit = Validate;                
}; 
```

**[代码示例](http://jsfiddle.net/U7DCd/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:40:09.797

即使您正确获得了按钮，您也应该在提交事件的表单中进行验证。

```
<form action="cree-new-user.php"  method="post" class="formButtonForm" onSubmit="return Validate();"> 
```

如果您`false`在函数中返回，它将不会提交表单。

# c# - 将 SizeF 用于用户控件尺寸

> ID：13294492
> 
> 赞同：2
> 
> 时间：2012-11-08T17:32:39.230
> 
> 标签：c#

正如标题所说，我正在寻找一种使用 SizeF 而不是普通 Size 来设置和获取 Control 尺寸的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:46:04.810

控件在内部使用整数值，并且大小和位置不能设置为浮点数。

`SizeF`有`ToSize`方法

```
Size size = sizeF.ToSize(); 
```

或者

```
myControl.Size = sizeF.ToSize(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:35:53.963

控件由 Windows API 支持，它使用基于整数（像素）的大小。因此，`SizeF`这将是不合适的或没有任何影响。您始终可以使用 a ，然后在设置值时`SizeF`映射到 a 。`Size`

请注意，在 WPF 中，所有位置和大小类型现在都使用双精度，并且允许进行小于每像素的调整，因为它们是使用 DirectX 而不是作为窗口句柄呈现的。

# windows-8 - Windows 8 Live SDK 可以使用当前用户以外的其他 Microsoft 帐户吗？

> ID：13294496
> 
> 赞同：1
> 
> 时间：2012-11-08T17:32:55.820
> 
> 标签：windows-8, live

使用 Windows 8 Live SDK，您可以让用户授予您对其 Microsoft 帐户的权限。有了这个，你可以得到他们的名字和照片等等。但使用 Live SDK 似乎要求应用用户使用与登录到当前 Windows 8 会话的用户相同的 Microsoft 帐户。

在某些情况下，使用不同的帐户是非常合法的。

我有简单的登录工作就像一个魅力！这使用相同的帐户。

我找不到使用其他方法的方法。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:56:44.437

您可以在 Init 之后和 LoginUser 之前调用 Logout。

这是javascript的代码：

```
function LiveLogin(){
   WL.init("<<Your clientID goes here>>");

   if (WL.canLogout()) {
       WL.logout(function () {Callback(callback);});
   }
   else{
       Callback(callback);
   }
}

function Callback(){
WL.login({ scope: ["wl.signin", "wl.basic", "wl.emails"] }, function () {
        var session = WL.getSession();
        // do stuff with your session
    });
} 
```

这是针对 C# 的：

```
LiveAuthClient liveAuthClient = new LiveAuthClient();
List<string> scopes = new List<string>();
scopes.Add("wl.signin");
scopes.Add("wl.basic");
scopes.Add("wl.emails");
LiveLoginResult loginResult = await liveAuthClient.InitializeAsync();
if (liveAuthClient.CanLogout)
{
    liveAuthClient.Logout();
}

loginResult = await liveAuthClient.LoginAsync(scopes); 
```

它对我有用。我希望这就是你要找的。

# c# - 从 C# 中的 OpenFileDialog 获取相对路径

> ID：13294503
> 
> 赞同：1
> 
> 时间：2012-11-08T17:33:10.500
> 
> 标签：c#, relative-path, openfiledialog

我是编程的初学者，我正在编写我的第二个 Prog。我有一个关于如何获取我的应用程序启动路径的相对路径的问题。该程序读取一个 .xml 文件，其中存储了一个 .jpg 的路径。它为每个路径创建一个图片框并加载相应的图像。我遇到的问题是，我的 Dropbox 中有图像，以便能够在任何具有 Dropbox 的 PC 上使用该程序。当我在我的主 PC 上使用 OpenFileDialog 并将 .jpg 的路径保存到 xml 时，它将无法在我的笔记本电脑上运行，因为 Dropbox 文件夹与我的主 PC 一样位于另一个驱动器上。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:38:15.253

为了解决您的问题，这将获取您的应用程序的当前位置

```
Directory.GetCurrentDirectory() 
```

您可以对路径进行简单的替换。

例子 ：

```
String JPG_Path_Relative = openFileDialog1.FileName.Replace(Directory.GetCurrentDirectory(),"") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:52:37.543

当保管箱文件夹位于默认位置（用户文件夹）时，您可以使用它来获取您的路径：

```
string userFolderPath= Environment.GetFolderPath(Environment.SpecialFolder.UserProfile); 
```

这将给出 C:\Users\USERNAME （驱动器可能不同）。然后只需将路径的其余部分添加到您的图像文件夹。

```
string imageFolderPath = userFolderPath + @"\Dropbox\Imagefolder"; 
```

# c++ - C++ Sqlite3 代码似乎在准备语句时出现问题

> ID：13294504
> 
> 赞同：0
> 
> 时间：2012-11-08T17:33:13.730
> 
> 标签：c++, sqlite, prepared-statement

我试图只查询一些输入以确保正确插入内容。

我正在做以下事情：

```
//open database into 'db'
sqlite3_stmt *statement;
string query = "select * from A;";
if(sqlite3_prepare_v2(db, query.c_str(), -1, &statement, 0)==SQLITE_OK){
  //...
}else{
  cout << "Error prepping statement" << endl;
} 
```

我正在关注 dreamincode 的演示： [http](http://www.dreamincode.net/forums/topic/122300-sqlite-in-c/) ://www.dreamincode.net/forums/topic/122300-sqlite-in-c/ 我只是不知道我做错了什么。我使用了错误的准备方法，还是定义了错误的东西？

**编辑：** 返回的错误代码为 1：SQL 错误或缺少数据库。我做错了 SQL 语句吗？我三次检查以确保数据库确实是打开的

**编辑：** 已解决我下载了数据库，用 sqlite3 阅读器打开它......并注意到我应该被告知的一些事情。在没有将文档发送给整个开发团队的情况下，架构在我不知情的情况下发生了变化。我正在向我的同事发送一封非常好的电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:19:57.027

在没有文档或告诉开发团队任何人的情况下更改了架构。我不得不 dl 数据库并用 sqlite3 阅读器打开它。

我要和他谈谈这件事。

# mercurial - 将变更集合并到匿名分支

> ID：13294506
> 
> 赞同：1
> 
> 时间：2012-11-08T17:33:23.260
> 
> 标签：mercurial, tortoisehg

我在 HG 回购中有一个分支（顺其自然`default`）。我在某个时候开始了一个匿名分支，以进行一些测试（并添加了一个功能，尽管我还不确定如果使用 TortoiseHg，拥有一个功能有什么大的好处）。到目前为止，一切都很好。

现在，该`default`分支得到了一些错误修正。我的匿名分支也需要它们。

合并或处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:42:52.180

要将更改从主`default`分支复制到匿名分支，您需要将默认分支合并到匿名分支中。

这样做的问题是您会丢失额外的分支，因此`default`如果您不希望匿名分支在主分支中进行更改，则需要记下主分支的当前负责人。为此，您可以`default`在合并之前标记主分支的头部。

另一种选择是在合并之前用书签标记它。

然后，如果您需要在永久合并两个分支之前对主分支进行进一步更改，您将首先更新到标签或书签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:39:50.177

如果您只想在从主线分歧点到匿名分支头之后集成*一些变更集*，您可以（取决于树）

*   变基--保持
*   接枝

就像命名分支一样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T03:06:47.043

你可以合并。当您在合并后提交时，您的匿名分支将继续，直到您准备好推送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:10:39.523

我只是从默认分支导出变更集并将它们导入匿名分支。

# javascript - AngularJS 指令中的两种数据绑定方式

> ID：13294507
> 
> 赞同：30
> 
> 时间：2012-11-08T17:33:25.467
> 
> 标签：javascript, data-binding, frameworks, angularjs

我一直在尝试定义指令，以便可以在表单中显示不同的“小部件”，具体取决于存储在数据库中的字段类型及其参数。我需要对不同类型的场景做出反应，因此需要指令来处理布局。

在玩一些示例时，我想出了一个 *kinda* 工作的代码：

## HTML

```
<input type="text" ng-model="myModel" style="width: 90%"/>  
<div class="zippy" zippy-title="myModel"></div> 
```

## 指示

```
myApp.directive('zippy', function(){
    return {
      restrict: 'C',
      // This HTML will replace the zippy directive.
      transclude: true,
      scope: { title:'=zippyTitle' },
      template: '<input type="text" value="{{title}}"style="width: 90%"/>',
      // The linking function will add behavior to the template
      link: function(scope, element, attrs) {
            // Title element
            element.bind('blur keyup change', function() {
                scope.$apply(read);
            });

            var input = element.children();

            function read() {
                scope.title = input.val();
            }
        }
    }
}); 
```

这似乎有效（尽管明显比 *proper* angularJS 变量绑定慢），但我认为必须有更好的方法来做到这一点。任何人都可以对此事有所了解吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-08T20:30:48.193

我不知道您为什么要`$apply`手动触发该方法，因为您实际上并不需要它。

我从 Angular 页面编辑了您使用的示例并包含了输入。它对我有用：http: [//jsfiddle.net/6HcGS/2/](http://jsfiddle.net/6HcGS/2/)

**HTML**

```
<div ng-app="zippyModule">
  <div ng-controller="Ctrl3">
    Title: <input ng-model="title">
    <hr>
    <div class="zippy" zippy-title="title"></div>
  </div>
</div>​ 
```

**JS**

```
function Ctrl3($scope) {
  $scope.title = 'Lorem Ipsum';
}

angular.module('zippyModule', [])
  .directive('zippy', function(){
    return {
      restrict: 'C',
      replace: true,
      transclude: true,
      scope: { title:'=zippyTitle' },
      template: '<input type="text" value="{{title}}"style="width: 90%"/>',
      link: function(scope, element, attrs) {
        // Your controller
      }
    }
  }); 
```

**UPDATE** maxisam 是正确的，您必须使用`ng-model`而不是将变量与值绑定，如下所示：

```
<input type="text" ng-model="title" style="width: 90%"/> 
```

这是工作版本：http: [//jsfiddle.net/6HcGS/3/](http://jsfiddle.net/6HcGS/3/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T01:52:26.477

你的意思是**[这样](http://jsfiddle.net/maxisam/QpUdA/)**的？

我基本上使用@Flek 的例子。
唯一的区别是`ng-model='title'`

进行双向绑定的技巧是 ng-model，它在[文档](http://docs.angularjs.org/api/ng.directive:ngModel)中声明：

> **ngModel 是告诉 Angular 进行双向数据绑定的指令。** 它与输入、选择、文本区域一起工作。您也可以轻松编写自己的指令来使用 ngModel。

```
<input type="text" ng-model="title" style="width: 90%"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-17T20:00:56.750

这是一种在指令中传递给回调参数的方法。控制器模板：

```
 <component-paging-select-directive
            page-item-limit="{{pageItemLimit}}"
            page-change-handler="pageChangeHandler(paramPulledOutOffThinAir)"
            ></component-paging-select-directive> 
```

指令：

```
angular.module('component')
    .directive('componentPagingSelectDirective', [
        function( ) {
            return {
                restrict: 'E',
                scope: { 
                    // using the '=' for two way doesn't work
                    pageItemLimit:  '@', // the '@' is one way from controller
                    pageChangeHandler: '&'
                },
                controller: function($scope) {   
                    // pass value from this scope to controller method. 
                    // controller method will update the var in controller scope
                    $scope.pageChangeHandler({
                        paramPulledOutOffThinAir: $scope.pageItemLimit
                    })

                }, ... 
```

在控制器中：

```
angular.module('...').controller(...
        $scope.pageItemLimit = 0; // initial value for controller scoped var

        // complete the data update by setting the var in controller scope 
        // to the one from the directive
        $scope.pageChangeHandler = function(paramPulledOutOffThinAir) {
            $scope.pageItemLimit = paramPulledOutOffThinAir;
        } 
```

请注意指令（以参数作为键的对象）、模板（指令中参数对象的“未包装”键）和控制器定义的函数参数的差异。

# c - 这个双重声明在 C 中是什么意思？

> ID：13294508
> 
> 赞同：0
> 
> 时间：2012-11-08T17:33:25.633
> 
> 标签：c, global, local

> **可能重复：**
> [在 C 中允许重定义，但在 C++ 中不允许？](https://stackoverflow.com/questions/5337370/redefinition-allowed-in-c-but-not-in-c)

```
#include<stdio.h>
int i;
int i;
int main()
{
        // int i;
        // int i;
        printf("%d\n",i);
        return 0;
}
~ 
```

上面的代码运行没有给出任何错误`gcc -Wall -Werror demo.c -o demo`

但是当我取消注释`local` `i`变量时`global` `i`，它会给我错误。

```
In function ‘main’:
demo.c:7:6: error: redeclaration of ‘i’ with no linkage
demo.c:6:6: note: previous declaration of ‘i’ was here 
```

这里的本地全局概念是什么？，任何人都请解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:51:05.927

在 C99 中（更具体地参见第 6.2 节），全局声明默认具有外部链接（6.2.2§5）。在那种情况下（6.2.2§2）， i 的两个声明都引用同一个对象。相反，局部变量没有链接（6.2.2§6），因此应该引用唯一标识符（同样是 6.2.2§2）：因此，您最终会在相同的范围，这是不允许的（6.2.1§5：*由相同标识符指定的不同实体要么具有不同的范围，要么位于不同的名称空间中*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:43:29.293

如果所有定义都同意（都具有相同的类型）并且变量在不超过一个位置初始化，则您可以在全局范围内拥有多个变量定义。

> J.5.11 多个外部定义
> 
> 一个对象的标识符可能有多个外部定义，无论是否显式使用关键字 extern；如果定义不一致，或者不止一个被初始化，则行为未定义（6.9.2）。

# ios - Xcode 4.5 - 无法通过 iTunes 安装开发者 .ipa 文件

> ID：13294510
> 
> 赞同：5
> 
> 时间：2012-11-08T17:33:31.077
> 
> 标签：ios, iphone, xcode

我曾多次为测试目的制作开发人员构建，并且一切正常。曾是！将我的 Xcode 更新到 4.5 版后，我无法通过 iTunes 安装我的开发人员版本。这种情况在我在配置文件中拥有的每台设备上都是一样的。

我所拥有的以及我与其他开发人员两次检​​查的内容以避免个人错误：1）开发人员证书 2）添加了正确设备的开发人员配置文件 3）正确的构建过程

在成功构建应用程序后，我和其他开发人员尝试通过 iTunnes (10.7) 安装它，但只出现同步失败的错误对话框。

**非常重要的信息是，我可以在 xCode 4.2 中构建可运行的应用程序并通过 iTunnes 安装它，而无需使用相同的证书和配置文件**

**如果我通过 Xcode 运行应用程序，我可以直接在设备上运行它**

检查了所有苹果的建议，我没问题：[https ://developer.apple.com/library/ios/#technotes/tn2009/tn2242.html](https://developer.apple.com/library/ios/#technotes/tn2009/tn2242.html)

检查了很多有类似问题的论坛，我已经做了很多步骤来尝试减少这个问题，从撤销所有证书开始，使用特定设备制作新的开发人员配置文件，清理 Xcode 中的 tmp 文件夹以及构建目录。我已经从 KeyChain 中删除了所有证书、密钥并导入了新的。删除设备上的所有配置文件并安装新配置文件。清理项目，更改构建架构“armv”，基础 SDK - 最新 iOS 6。

**非常感谢您的回复！！！**

这是设备日志文件的一部分（iPhone5 iOS 6.1）

```
Nov  7 23:31:04  lockdownd[29] <Notice>: 016ca000 __copy_itunes_value_block_invoke_0: com.apple.mobile.iTunes.store/PurchaseTypes -> (null)

Nov  7 23:31:09  installd[31] <Error>: 0x343000 handle_install: Install of "/var/mobile/Media/PublicStaging/denik4.ipa" requested by itunesstored

Nov  7 23:31:09  installd[31] <Error>: 0x343000 MobileInstallationInstall_Server: Installing app cz.newslab.denik
>
Nov  7 23:31:09  installd[31] <Error>: profile not valid: 0xe8008012
>
Nov  7 23:31:09  installd[31] <Error>: 0x343000 install_embedded_profile: Could not install embedded profile: 0xe8008012
>
Nov  7 23:31:09  installd[31] <Error>: Nov  7 23:31:09  SecTrustEvaluate  [leaf CriticalExtensions IssuerCommonName]
>
Nov  7 23:31:09  mobile_assertion_agent[94] <Notice>: service_one_connection: Connection closed for client iTunes.
>
Nov  7 23:31:10  installd[31] <Error>: entitlement 'keychain-access-groups' has value not permitted by a provisioning profile
>
Nov  7 23:31:10  installd[31] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
>
Nov  7 23:31:10  installd[31] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
>
Nov  7 23:31:10  installd[31] <Error>: 0x343000 verify_signer_identity: MISValidateSignatureAndCopyInfo failed for /var/tmp/install_staging.yDZPNm/foo_extracted/Payload/denik.app/denik: 0xe8008016
>
Nov  7 23:31:10  installd[31] <Error>: 0x343000 do_preflight_verification: Could not verify executable at /var/tmp/install_staging.yDZPNm/foo_extracted/Payload/denik.app
>
Nov  7 23:31:10  installd[31] <Error>: 0x343000 install_application: Could not preflight application install
>
Nov  7 23:31:10  itunesstored[66] <Error>: 0x1786000 MobileInstallationInstall: failed with -1
>
Nov  7 23:31:10  installd[31] <Error>: 0x343000 handle_install: API failed 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:07:47.257

重要的一行是这一行：

已安装 [31]：配置文件无效：0xe8008012

我最近在我们的一个 IPA 中看到了这个错误。通过从 iOS 配置门户重新发布配置文件（只需进行简单的更改，撤消它，然后提交 - 这应该重新生成配置文件），更新 Xcode 代码签名身份以使用新配置文件，重新启动设备，解决了这个问题，然后再试一次。然后它似乎安装得很好。

我们无法找到问题的根本原因，但是一旦我们完成了这些步骤，我们就再也没有看到它了。

# java - 自动调整大小（JTextArea 和 JTabbedPane）而不是固定布局

> ID：13294516
> 
> 赞同：0
> 
> 时间：2012-11-08T17:33:50.610
> 
> 标签：java, jtextarea, jtabbedpane

我在 Java 和 Swing GUI 中迈出了第一步。我的计划是制作一个带有 JTextArea 的小 GUI 来填充一些文本和两个选项卡式 JPanel。但问题是，当我在 JTextArea 中填写一些文本并单击选项卡“包含”（或其他选项卡“功能”）时，它会调整选项卡菜单的大小（它应该具有固定的 50:50 视图）。

下面是一些图片以便更好地理解：

![在此处输入图像描述](../Images/ee55f271651e49267eee044910c4ae75.png) ![在此处输入图像描述](../Images/5ed7c56c5a7dcb2dbcf6bf2700b172ec.png) ![在此处输入图像描述](../Images/368db02c36a63a64bda5f9ec7d02d4ca.png)

这是Java代码：

```
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTextArea;

public class Editor extends JFrame {
    private static final long serialVersionUID = 1L;

    public static void main(String[] args) {
        Editor editor = new Editor();
    }

    private JTextArea guiEdit = new JTextArea();
    private JScrollPane utilScrollbar = new JScrollPane(guiEdit);
    private JTabbedPane guiOverviewTabPanel = new JTabbedPane();
    private JPanel guiOverviewTabIncludes = new JPanel();
    private JPanel guiOverviewTabFunctions = new JPanel();

    public Editor() {
        // Set layout
        GridBagLayout gridbag = new GridBagLayout();
        GridBagConstraints c = new GridBagConstraints();
        setLayout(gridbag);

        // Add the textfield
        c.fill = GridBagConstraints.BOTH;
        c.gridx = 0;
        c.gridy = 0;
        c.gridheight = 1;
        c.weightx = 1.0;
        c.weighty = 1.0;
        c.anchor = GridBagConstraints.WEST;
        add(utilScrollbar, c);

        // Add tabs to the JTabbedPane
        guiOverviewTabPanel.add("Includes", guiOverviewTabIncludes);
        guiOverviewTabPanel.add("Functions", guiOverviewTabFunctions);

        // Add the JTabbedPane
        c.fill = GridBagConstraints.BOTH;
        c.gridx = 1;
        c.gridy = 0;
        c.gridheight = 1;
        c.weightx = 1.0;
        c.weighty = 1.0;
        c.anchor = GridBagConstraints.EAST;
        add(guiOverviewTabPanel, c);

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setExtendedState(getExtendedState() | JFrame.MAXIMIZED_BOTH);
        this.setMinimumSize(new Dimension(800, 400));

        setVisible(true);
    }
} 
```

有谁知道解决这个观点的方法/解决方案。实际比例是 5:2（5 部分 JTextArea 和 2 部分 JTabbedPane - 这只是为了更好地理解，所以我不能使用 GridLayout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:52:57.767

JSplitPane 用于这种 GUI 显示。

我修改了您的代码以使用 JSplitPane。

```
import java.awt.Dimension;
import java.awt.event.HierarchyEvent;
import java.awt.event.HierarchyListener;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;
import javax.swing.JTextArea;

public class Editor extends JFrame {
    private static final long serialVersionUID = 1L;

    public static void main(String[] args) {
        new Editor();
    }

    private JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
    private JTextArea guiEdit = new JTextArea();
    private JScrollPane utilScrollbar = new JScrollPane(guiEdit);
    private JTabbedPane guiOverviewTabPanel = new JTabbedPane();
    private JPanel guiOverviewTabIncludes = new JPanel();
    private JPanel guiOverviewTabFunctions = new JPanel();

    public Editor() {
        HierarchyListener hierarchyListener = new HierarchyListener() {
            @Override
            public void hierarchyChanged(HierarchyEvent event) {
                long flags = event.getChangeFlags();
                if ((flags & HierarchyEvent.SHOWING_CHANGED) == 
                        HierarchyEvent.SHOWING_CHANGED) {
                    splitPane.setDividerLocation(0.50D);
                }
            }

        };

//      guiEdit.setLineWrap(true);
//      guiEdit.setWrapStyleWord(true);

        splitPane.setLeftComponent(utilScrollbar);

        // Add tabs to the JTabbedPane
        guiOverviewTabPanel.add("Includes", guiOverviewTabIncludes);
        guiOverviewTabPanel.add("Functions", guiOverviewTabFunctions);

        splitPane.setRightComponent(guiOverviewTabPanel);

        splitPane.addHierarchyListener(hierarchyListener);
        add(splitPane);

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setExtendedState(getExtendedState() | JFrame.MAXIMIZED_BOTH);
        this.setMinimumSize(new Dimension(800, 400));

        setVisible(true);
    }
} 
```

# c++ - boost::mem_fn 的正确类型是什么？

> ID：13294517
> 
> 赞同：0
> 
> 时间：2012-11-08T17:33:49.930
> 
> 标签：c++, boost

我可以在 C++ 中实现以下功能吗？我想`myInstance`在调用回调方法之前保持变量未指定，而不是将其包含在`boost::bind`实例中。

```
MyClass *myInstance;

void call(/* boost::mem_fn */ callback)
{
    // Somewhere in this function, the operator()() method
    // is called on the callback instance

    callback(myInstance);
}

call(boost::mem_fn(&MyClass::myMethod)); 
```

我知道这`boost::mem_fn`是一个返回特定对象的函数，但我不确定它的类型。文档说*未指定*作为其返回类型。其中一个`boost::bind`构造函数将此类型作为参数，但我无法在其实现中找到实际声明。另外，我什至可以存储我自己的这种特定类型的实例，还是严格供 boost 函数使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:42:58.880

这是编译器似乎在做一些非常神奇的事情的情况之一。

没有真正定义好的类型的原因是从 bosst::mem_fn 返回的类型总是被假定为它传递给的函数的模板参数。让我给你看一个例子：

std::for_each 有这样的签名：

```
template <class InputIterator, class Function>
Function for_each (InputIterator first, InputIterator last, Function f); 
```

这个小魔法片有两个模板参数，一个 InputIterator 和一个 Function。这些可以被称为任何东西，但是给它们的名称描述了它们将如何被使用，实际上，比真正的类型更像是自我记录的名称。InputIterator 的类型可能类似于`std::vector<foo>::iterator`- 关键是编译器将在编译时自动解析“InputIterator”是什么。它可以为您找出这种类型。

函数也是如此。只要你传递给它一些可以被调用的东西——也就是说，它的版本`operator()`与被调用的东西兼容`for_each`，那么你永远不需要知道 Function 是什么。

所以简短的回答是，让你的`call`函数接受一个模板参数：

```
template<typename SomeSortOfFunction>
void call(SomeSortOfFunction callback) 
```

然后编译器应该解析`SomeSortOfFunction`为从返回的任何类型`boost::mem_fn`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T17:54:23.147

的返回类型`boost::mem_fn`未*指定*。您应该使用 Matt 的方法（即作为模板传递），或者如果单独编译对您很重要，请使用类型擦除：

```
MyClass *myInstance;

void call(boost::function<void(MyClass*)> callback)
{
    callback(myInstance);
}

call(boost::mem_fn(&MyClass::myMethod)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:05:00.520

的返回类型`mem_fn`不是你应该明确输入或存储的东西。它是在编译时通过参数的类型生成的。

但是，它可以通过`std::function`（或`boost::function`）存储。

的`operator()`签名`men_fn`是原始方法参数，`const`前面可能带有指向类的指针，并且返回值类型相同。只需使用该签名创建一个`std::function`，它就可以获取`men_fn`类型并存储它。

简而言之，如果您有一个零参数方法，请`class foo`尝试`void`将 men_fun 存储在`std::function<void(foo *)>`.

# .net - 如何从一大堆丑陋的字符串中提取特定字符串的一部分？

> ID：13294520
> 
> 赞同：-1
> 
> 时间：2012-11-08T17:34:03.843
> 
> 标签：.net, regex

我有一个包含网页所有数据源的变量。它是一个包含大量单词、字符串、特殊字符等的大字符串。

我想通过这个变量并提取票号。这是在tickets/之后和.json之前。在以下情况下，我的列表将只有 1，即值 15。

```
https://company.zendesk.com/api/v2/tickets/15.json 
```

此网页将在大量文本之间包含多个此链接。在以下情况下，我的列表将有 2 个项目，值 19 和 20。

```
https://company.zendesk.com/api/v2/tickets/19.json blahblahblajlkdfjfaiofjd3289239lkdj
2398283j;lkjfe89j2pefj2efljefkj
https://company.zendesk.com/api/v2/tickets/20.json blah blhahblbahlhkaldk 
```

我将如何从这个巨大文件中的这些链接中提取票号并将它们放入列表中？

我会使用正则表达式吗？我不确定我会如何处理这个问题。

顺便说一句，这个页面没有格式。它不像是 XML 文档或任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:37:22.633

这样的事情应该让你开始工作

```
 string pattern = @"https://company.zendesk.com/api/v2/tickets/\d+.json";
        Regex regex = new Regex(pattern);
        MatchCollection mc = regex.Matches("input string here");

        foreach(Match m in mc)
        {
            Console.Write(m.Value);
        } 
```

**@** “https://company.zendesk.com/api/v2/tickets/\d+.json **”**；

注意粗体部分。**@**表示它是一个文字字符串，因此您不必双重转义您的`\`. **\d**是任何数字的替代。**+**表示前一个字符出现 1 次或多次。 `*`将意味着它发生**0**次或更多次。

这是有关如何进一步自定义模式的参考 [http://msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

要仅获取票号，您可以将`"\d+"`括号括起来
`https://company.zendesk.com/api/v2/tickets/(\d+).json"`

然后您的比赛将有一个名为`Groups`您的票号的属性将是这些组之一

```
 Console.Write(m.Groups[i].Value); 
```

此时，您可以使用许多启发式方法（包括但限于字符串长度）从票证数量中过滤出完整的匹配组，或者您可以使用另一个正则表达式。

# xcode - XCode 4.5.2 工作问题

> ID：13294521
> 
> 赞同：2
> 
> 时间：2012-11-08T17:34:14.187
> 
> 标签：xcode, xcode4, xcode4.5

我最近下载了 Xcode 更新 4.5.2，它似乎运行缓慢。我尝试了其他应用程序，一切都运行良好。我目前正在开发一个应用程序，它的执行速度很慢，以至于我无法编辑 UIlabel 框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:25:19.413

以防万一：删除“~/Library/Developer/Xcode/DerivedData”文件夹中的内容，看看它是否仍然停止。我曾经有一个缓慢的 Xcode，这有帮助。

# android - 用于 android 的嵌入式 bonjour mdnsresponder 无法正常工作（错误 -65563；守护程序未运行）

> ID：13294526
> 
> 赞同：0
> 
> 时间：2012-11-08T17:34:37.700
> 
> 标签：android, android-ndk, bonjour, mdns

由于 jmDNS 不支持按子类型浏览服务，因此我选择了交叉编译 bonjour for android，并按照以下步骤操作。

1.  交叉编译了 android 的 mdnsresponder
2.  使用具有 2 个 jni 函数的上述共享库编写了带有 jni 包装器的 dns-sd 客户端：
    1.  一种用于调用主循环

    2.  另一个用于浏览服务
3.  我用 wifi MulticastLock 编写了一个 java 应用程序

但是当我调用 DNSServiceBrowse 时，我得到的错误响应是`DNS service call failed -65563`“后台守护程序未运行”。

通常在 linux 上运行时，我们会启动 mdns 守护进程。

我该如何解决这个问题？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:04:43.673

> 但是当我调用 DNSServiceBrowse 时，我得到的错误响应是 DNS 服务调用失败 -65563，“后台守护程序未运行”。

您不能在 Android 中运行守护程序。请参阅：[Android 守护进程](https://stackoverflow.com/questions/2801584/android-daemon-process)

为了在嵌入式实现中使用 mdnsresponder，您必须直接与 mDNSCore 通信。请参阅本自述文件的“工作原理”部分，位于 [1]。

> 我该如何解决这个问题？

查看 [2] 中 mDNSEmbedded.h 中的“注意”部分 基本上，您需要使用 [3] 中的 dnssd_clientshim.c，而不是通过守护进程进行通信。这使您可以`"still use the preferred dns_sd.h APIs by linking in "dnssd_clientshim.c", which implements the standard "dns_sd.h" API calls, allocates any required storage using malloc(), and then calls through to the low-level malloc-free mDNSCore routines"`

注意：似乎 dnssd_clientshim.c 有一些拼写错误和缺少参考，这将阻止编译，因此您需要在构建时执行补丁（参见 [4] 和 [5]）。看来您仍然需要在编译时包含 dnssd_clientlib.c ，否则您将在 TXTRecord 函数引用中遇到构建错误。

[ [1](http://www.opensource.apple.com/source/mDNSResponder/mDNSResponder-320.5/mDNSPosix/ReadMe.txt) ][ [2](http://www.opensource.apple.com/source/mDNSResponder/mDNSResponder-320.5/mDNSCore/mDNSEmbeddedAPI.h) ][ [3](http://www.opensource.apple.com/source/mDNSResponder/mDNSResponder-320.5/mDNSShared/dnssd_clientshim.c) ][ [4](https://github.com/tklab-tud/umundo/blob/master/contrib/archives/mDNSResponder-333.10.umundo.patch) ][ [5](http://web.archiveorange.com/archive/v/egfi8o07nr29CL3JkuvX) ]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T21:59:38.397

这意味着当您收到“DNS 服务调用失败 -65563”时，您还没有启动该服务。

在 mdnsresponder 包中有一个 DNSSDEmbeddedDaemon 类，你需要先使用这个 java 类来启动 daemon 服务，然后你可以调用 browse() 找到你想要的网络服务。

顺便说一句，您需要为守护进程获取/释放多播锁。

这是您可能需要的一段示例代码，这是您在浏览网络服务之前启动的服务。

```
public class DNSSDEmbeddedDaemon extends Service {
    private static final String TAG = DNSSDEmbeddedDaemon.class.getName();

    public IBinder onBind(Intent paramIntent) {
        return null;
    }

    public void onCreate() {
        super.onCreate();

        DNSSDEmbedded.listeners.clear();
        DNSSDEmbedded.init(new DNSSDEmbedded.Listener() {

            @Override
            public void onStart() {
                Log.d(TAG, "EmbededMDNS onStart");
            }

            @Override
            public void onEnd() {
                Log.d(TAG, "EmbededMDNS onEnd");
                DNSSDEmbedded.listeners.clear();
            }

            @Override
            public void onError() {
                Log.d(TAG, "EmbededMDNS onError");
            }
        });

    }

    public void onDestroy() {
        super.onDestroy();

        Log.d(TAG, "EmbededMDNS Exit() is called");

        DNSSDEmbedded.Exit();
    }
} 
```

# javascript - Javascript通过“页面”初始化函数

> ID：13294530
> 
> 赞同：3
> 
> 时间：2012-11-08T17:34:45.307
> 
> 标签：javascript, jquery, web-applications

也许我有点困惑但是..你如何处理以下情况：

带有大量 Javascript (JQuery) 的 Web 应用程序（没有 PHP，只有 JS/HTMLCSS）。我有一个名为“application.js”的大文件，它包含在每一页中。

我想在不同的页面上触发不同的功能，例如：

[http://mysite.de/index](http://mysite.de/index)被称为火：index.init();

[http://mysite.de/about](http://mysite.de/about)被称为火：about.init();

我认为它类似于 MVC 中的控制器，嗯？我的解决方案就像在每个页面上使用 switch 和 stativ "var = pageName"，但我确信有更好的方法吗？还是设计问题？

我知道 Require.js 之类的库，但这对我来说就太多了。

更具体地定义问题：这是实现 JS 的“好”方式吗？我知道我可以访问 windows.location 或通过标题或其他方式识别！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:44:42.860

你为什么不做

```
<script type="text/javascript">
index.init();
</script> 
```

在索引页？然后在每个页面上调用不同的函数？

我知道动态方式会很酷，但有时你可以过度设计这么简单的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:44:01.393

您可以检查`document.URL`并围绕它构建一个案例陈述。

```
var url = document.URL;
switch (url) {
case "http://mysite.de/index":
  index.init();
  break;
case "http://mysite.de/about":
  about.init();
  break;
} 
```

或者，如果这开始变得复杂，您可以使用诸如骨干网之类的东西。

# android - Android GCM 重复通知

> ID：13294541
> 
> 赞同：1
> 
> 时间：2012-11-08T17:35:12.467
> 
> 标签：android, node.js, cordova, google-cloud-messaging

我在[GCM-Cordova](https://github.com/marknutter/GCM-Cordova)使用 GCM 的 cordova 插件。在服务器端，我使用的是[ToothlessGear 的节点模块](https://github.com/ToothlessGear/node-gcm)。

我想我不会使用“可折叠”密钥，因为我需要将有效负载发送到客户端。我面临的问题是消息在大约 30 秒的间隔后不断到达。为什么谷歌服务器没有意识到已经收到消息？我是否必须明确地做一些事情来停止重复通知？

触发 push 的 node-gcm 代码：

```
gcm = require('node-gcm');

message = new gcm.Message();

sender = new gcm.Sender(app.settings.gcm.server_key);

registrationId = [];

registrationId.push(regid);

message.addData('title', 'Payment Request');

message.addData('message', JSON.stringify(someObj));

message.delayWhileIdle = true;

message.timeToLive = 3;

sender.send(message, registrationId, 1, function(result) {
  return console.log(result);
}); 
```

# ruby - Ruby Motion：从对象空间中完全移除一个 Ruby 类

> ID：13294542
> 
> 赞同：3
> 
> 时间：2012-11-08T17:35:14.903
> 
> 标签：ruby, testing, rubymotion

我遇到了砖墙测试类重新定义，只是不知道如何处理它。这是我正在测试的场景（这不是核心数据）：

*   应用程序使用版本 1 中的模型运行
*   热切的程序员通过添加/删除/重新定义列来修改模型
*   应用程序与版本 2 中的模型一起运行

我遇到问题的地方是模拟从内存中实际删除应用程序并从头开始重建它。这很重要，因为在包含模块时会设置许多特定于模型的东西`MotionModel::Model`，并且只会发生一次：当模块包含在类中时。以下是我认为可能有效的方法：

```
 it "column removal" do
      class Removeable
        include MotionModel::Model
        columns       :name => :string, :desc => :string
      end

      @foo = Removeable.create(:name=> 'Bob', :desc => 'who cares anyway?')

      Removeable.serialize_to_file('test.dat')

      @foo.should.respond_to :desc

      Object.send(:remove_const, :Removeable)  # Should remove all traces of Removeable
      class Removeable
        include MotionModel::model             # Should include this again instead
        columns       :name => :string,        # of just reopening the old Removeable
                      :address => :string      # class
      end

      Removeable.deserialize_from_file # Deserialize old data into new model

      Removeable.length.should == 1
      @bar = Removeable.first
      @bar.should.respond_to :name
      @bar.should.respond_to :address      
      @bar.should.not.respond_to :desc

      @bar.name.should == 'Bob'
      @bar.address.should == nil
    end
  end 
```

不幸的是，`Object.send(:remove_const, :Removeable)`它并没有像我希望的那样做，Ruby 只是认为它可以重新打开`Removeable`而不运行模块的`self.included()`方法`MotionModel::Model`。

关于如何在规范示例的上下文中从头开始模拟创建此类的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:30:25.963

我会尝试使用匿名类（你必须告诉 MotionModel 表名）。

虚构示例：

```
model_before_update = Class.new do
  # This tells MotionModel the name of the class (don't know if that actually exists)
  table_name "SomeTable"
  include MotionModel::Model
  columns       :name => :string, :desc => :string
end 
```

您根本没有删除该类，您只需定义另一个具有相同表名的（匿名）类。

```
model_after_update = Class.new do
  table_name "SomeTable"
  include MotionModel::model
  columns       :name => :string,
                :address => :string
end 
```

想想看，如果有像上面这样的 table_name 设置器，你甚至不需要使用匿名类，以防 RubyMotion 不起作用。

# android - 检索手机信号塔信息

> ID：13294545
> 
> 赞同：24
> 
> 时间：2012-11-08T17:35:20.610
> 
> 标签：android

有谁知道如何在 Android 上检索 GSM 和 CDMA 上的手机信号塔列表。

我一直在尝试使用 Google Maps Locations API： [https ://developers.google.com/maps/documentation/business/geolocation/](https://developers.google.com/maps/documentation/business/geolocation/)

我想通过以下字段获取手机信号塔信息：

*   cellId：单元格的唯一标识符。在 GSM 上，这是 Cell ID (CID)；CDMA 网络使用基站 ID (BID)。
*   locationAreaCode：GSM 网络的位置区域代码 (LAC)；CDMA 网络使用网络 ID (NID)。
*   mobileCountryCode：手机信号塔的移动国家代码 (MCC)。
*   mobileNetworkCode：手机信号塔的移动网络代码。这是 GSM 的 MNC，或 CDMA 的系统 ID (SID)。
*   年龄：自该单元成为主单元以来的毫秒数。如果年龄为 0，则 cellId 表示当前测量值。
*   signalStrength：以 dBm 为单位测量的无线电信号强度。
*   timingAdvance：定时提前值。

* * *

此代码并没有特别获取手机信号塔信息。

```
TelephonyManager tel = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

// Type of the network
int phoneTypeInt = tel.getPhoneType();
String phoneType = null;
phoneType = phoneTypeInt == TelephonyManager.PHONE_TYPE_GSM ? "gsm" : phoneType;
phoneType = phoneTypeInt == TelephonyManager.PHONE_TYPE_CDMA ? "cdma" : phoneType;
try {
  if (phoneType != null) {
    params.put("radioType", phoneType);
  }
} catch (Exception e) {}

/*
 * The below code doesn't work I think.
 */
JSONArray cellList = new JSONArray();
List<NeighboringCellInfo> neighCells = tel.getNeighboringCellInfo();
for (int i = 0; i < neighCells.size(); i++) {
  try {
    JSONObject cellObj = new JSONObject();
    NeighboringCellInfo thisCell = neighCells.get(i);
    cellObj.put("cellId", thisCell.getCid());
    cellList.put(cellObj);
  } catch (Exception e) {}
}
if (cellList.length() > 0) {
  try {
    params.put("cellTowers", cellList);
  } catch (JSONException e) {}
} 
```

我设置这样的权限：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_UPDATES"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-09-15T06:42:59.300

我最近遇到了这个问题，结果是这样的

> 获取邻接细胞信息

从 API 23 起已弃用。要解决此问题，请使用以下内容（真的很烦人）：

```
public static JSONArray getCellInfo(Context ctx){
        TelephonyManager tel = (TelephonyManager) ctx.getSystemService(Context.TELEPHONY_SERVICE);

        JSONArray cellList = new JSONArray();

// Type of the network
        int phoneTypeInt = tel.getPhoneType();
        String phoneType = null;
        phoneType = phoneTypeInt == TelephonyManager.PHONE_TYPE_GSM ? "gsm" : phoneType;
        phoneType = phoneTypeInt == TelephonyManager.PHONE_TYPE_CDMA ? "cdma" : phoneType;

        //from Android M up must use getAllCellInfo
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {

            List<NeighboringCellInfo> neighCells = tel.getNeighboringCellInfo();
            for (int i = 0; i < neighCells.size(); i++) {
                try {
                    JSONObject cellObj = new JSONObject();
                    NeighboringCellInfo thisCell = neighCells.get(i);
                    cellObj.put("cellId", thisCell.getCid());
                    cellObj.put("lac", thisCell.getLac());
                    cellObj.put("rssi", thisCell.getRssi());
                    cellList.put(cellObj);
                } catch (Exception e) {
                }
            }

        } else {
            List<CellInfo> infos = tel.getAllCellInfo();
            for (int i = 0; i<infos.size(); ++i) {
                try {
                    JSONObject cellObj = new JSONObject();
                    CellInfo info = infos.get(i);
                    if (info instanceof CellInfoGsm){
                        CellSignalStrengthGsm gsm = ((CellInfoGsm) info).getCellSignalStrength();
                        CellIdentityGsm identityGsm = ((CellInfoGsm) info).getCellIdentity();
                        cellObj.put("cellId", identityGsm.getCid());
                        cellObj.put("lac", identityGsm.getLac());
                        cellObj.put("dbm", gsm.getDbm());
                        cellList.put(cellObj);
                    } else if (info instanceof CellInfoLte) {
                        CellSignalStrengthLte lte = ((CellInfoLte) info).getCellSignalStrength();
                        CellIdentityLte identityLte = ((CellInfoLte) info).getCellIdentity();
                        cellObj.put("cellId", identityLte.getCi());
                        cellObj.put("tac", identityLte.getTac());
                        cellObj.put("dbm", lte.getDbm());
                        cellList.put(cellObj);
                    }

                } catch (Exception ex) {

                }
            }
        }

        return cellList;
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T19:40:13.087

您的手机可能不支持此功能。

看到这个：[http ://code.google.com/p/android/issues/detail?id=24136](http://code.google.com/p/android/issues/detail?id=24136)

还有这个：[哪些 Android 手机型号支持 getNeighboringCellInfo()？](https://stackoverflow.com/questions/8025557/which-android-phone-models-support-getneighboringcellinfo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T10:37:22.460

这不是您的手机，它不支持此信息，它纯粹是用于提供这些 API 调用的 RIL 相关 C 和 Java 的糟糕实现，从而阻止了这种情况。如果您设法进入`Service Mode`菜单（因手机而异），您将可以完全且即时地访问 RSSI 和大量其他类型的信号。您应该责怪 Google（或您的 OEM）没有解决这些问题并提供对 RF 相关变量的更好访问。

# aix - AIX 进程内存随着循环中的 malloc free 调用而增加

> ID：13294552
> 
> 赞同：3
> 
> 时间：2012-11-08T17:35:49.937
> 
> 标签：aix

我在 AIX 6.1 上运行此代码

```
while(true)
{
    int a = rand(); //generate a random integer value
    void* test = malloc(a*a); //allocate large chunk of memory block
    usleep(3000000); //sleep for 3 sec 
    free(test); // release memory block
} 
```

使用 MALLOCTYPE=buckets 我的观察是常驻集大小（实际内存）和进程的数据段大小不断增加。这是通过命令 ps v *PID* pg sp 值在 topas 中显示的进程缓慢增加的检查。

有人可以证明这种行为是正当的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:20:07.980

在空闲时，内存不会释放给 AIX 操作系统，而是保留以供重用。使用 MALLOCOPTIONS=disclaim，free 将内存释放回 AIX 操作系统，并且它们不会增加内存利用率。但是使用 MALLOCOPTIONS=disclaim，CPU 利用率几乎提高了 2-3 倍。

# bash - 如何在管道中使用 GNU Time

> ID：13294554
> 
> 赞同：18
> 
> 时间：2012-11-08T17:35:57.067
> 
> 标签：bash, time, gnu, pipeline

我想测量一些 SQL 查询在 postgresql 中的运行时间。使用 BASH 内置时间，我可以执行以下操作：

```
$ time (echo "SELECT * FROM sometable" | psql) 
```

我喜欢 GNU time，它提供了更多的格式。但是我不知道如何使用管道来做到这一点。为简单起见，我`ls | wc`在以下示例中使用：

```
$ /usr/bin/time -f "%es" (ls | wc)                                                      
-bash: syntax error near unexpected token `('

$ /usr/bin/time -f "%es" "ls | wc"                                                  
/usr/bin/time: cannot run ls | wc: No such file or directory 
```

如果我不以任何方式对管道进行分组，它不会抱怨：

```
$ /usr/bin/time -f "%es" ls | wc       
0.00s 
```

但显然，这仅测量管道的第一部分，如下一个示例所示

```
$ /usr/bin/time -f "%es" ls | sleep 20                                                  
0.00s 
```

所以问题是使用管道的 GNU Time 的正确语法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T17:40:11.357

从以下位置调用外壳`time`：

```
/usr/bin/time -f "%es" bash -c "ls | wc" 
```

当然，这也包括 shell 的启动时间；它不应该太多，但是如果您在一个具有轻量级外壳的系统上`dash`（并且足以满足您的需要），那么您可以使用它来最小化启动时间开销：

```
/usr/bin/time -f "%es" dash -c "ls | wc" 
```

另一种选择是对您真正感兴趣的命令进行计时，即`psql`命令。`time`会将其标准输入传递给正在执行的程序，因此您可以仅在管道的一个组件上运行它：

```
echo "SELECT * FROM sometable" | /usr/bin/time -f "%es" psql 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T17:42:34.193

创建一个调用您的管道的脚本。然后

```
/usr/bin/time -f '%es' script.sh 
```

# matlab - 二等分法（数值分析）

> ID：13294555
> 
> 赞同：1
> 
> 时间：2012-11-08T17:36:05.177
> 
> 标签：matlab, analysis, numerical, newtons-method, bisection

在找到每个根之前进行了多少次递归？另外，哪些是根？

这是我的代码：

```
e=0.000001; 
f1=@(x) 14.*x.*exp(x-2)-12.*exp(x-2)-7.*x.^3+20.*x.^2-26.*x+12;

a=0; 
c=3; 
while abs(c-a)>e 
    b=(c+a)/2; 
    if f1(a)*f1(b)<0 
        c=b; 
    else
        a=b;
    end    
    disp(b);  
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:18:32.453

二分法的工作原理是取某个初始区间的端点`[a,b]`并找出区间的哪一半必须包含根（它评估中点，并确定哪一半有符号变化）。然后二等分在已识别的一半上重复该过程。

二分法仅收敛于**一个**可能的根，如果您的函数内部有多个根`[a,b]`，则通常很难预测它将收敛到哪个特定根。（注意：由于二分法是一个完全确定的算法，如果你给它相同的初始间隔，它总是会收敛到完全相同的根。）迭代只是细化你找到的根的近似值，它们不会找到多个根。

要直接回答您的问题，二分法**不会**在内部发现函数的所有三个根`[0,3]`。它只会找到一个根，这由二分代码的最终迭代来识别。二等分迭代输出的所有值都简单地显示了算法朝着它最终找到的一个根所取得的进展（并且这些值应该是收敛于最终值的序列）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T15:15:07.473

二分法的算法是这样的，它只能在定义的区间之间找到一个根。在您的问题中，无法找到所有三个根，但是如果您定义不同的间隔来找出各个根，您可能会成功。您可以通过具有完整理论背景和示例[的 Matlab 中的二分法示例程序。](http://www.codewithc.com/bisection-method-matlab-program)

# mongodb - 使用 where 条件聚合查询

> ID：13294556
> 
> 赞同：15
> 
> 时间：2012-11-08T17:36:06.037
> 
> 标签：mongodb, datetime, aggregation-framework

如何为 Mongo 转换以下 SQL 查询：

```
SELECT KeyID, SUM(Qty)
FROM Table
WHERE Date <= '1998-12-01' 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-08T18:04:24.737

就像是：

```
db.myTable.aggregate([
  { $match: { mydate: { $lte: new Date('12/01/1998') } } },
  { $group: {
    _id: "$keyid",
    totalqty: { $sum: "$qty" }
  }}
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-16T05:47:50.113

可以用这个——

```
db.schoolexamregistration.aggregate([
    { $match: {"exam_session_id":"1523850138707"} },{
     $lookup:
       {
         from: "student",
         localField: "nic_ppt",
         foreignField: "nic_ppt",
         as: "student_detail"
       }
    }
  ]) 
```

# r - 如何以编程方式从 R 中的 UCI 数据存储库中获取数据集的标头信息

> ID：13294560
> 
> 赞同：3
> 
> 时间：2012-11-08T17:36:21.013
> 
> 标签：r, dataset

我正在尝试从**R**[的 UCI 存储库](http://archive.ics.uci.edu/ml/datasets.html)中收集公开可用的数据集。我知道有很多数据集已经可以用于几个**R**包，例如但是我仍然需要来自 UCI 存储库的几个数据集。****`mlbench.`****

 ****这是我学到的一个技巧

```
url="http://archive.ics.uci.edu/ml/machine-learning-databases/credit-screening/crx.data"
credit<-read.csv(url, header=F) 
```

但这并没有得到标题（变量名）信息。该信息以文本格式保存在[*.names文件中。](http://archive.ics.uci.edu/ml/machine-learning-databases/credit-screening/crx.names)知道如何以编程方式获取标题信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:23:01.267

我怀疑您必须使用正则表达式来完成此操作。这是一个丑陋但通用的解决方案，它应该适用于各种 *.names 文件，假设它们的格式与您发布的格式相似。

```
names.file.url <-'http://archive.ics.uci.edu/ml/machine-learning-databases/credit-screening/crx.names' 
names.file.lines <- readLines(names.file.url)

# get run lengths of consecutive lines containing a colon.
# then find the position of the subgrouping that has a run length 
# equal to the number of columns in credit and sum the run lengths up 
# to that value to get the index of the last line in the names block.
end.of.names <- with(rle(grepl(':', names.file.lines)), 
                       sum(lengths[1:match(ncol(credit), lengths)]))

# extract those lines
names.lines <- names.file.lines[(end.of.names - ncol(credit) + 1):end.of.names]

# extract the names from those lines
names <- regmatches(names.lines, regexpr('(\\w)+(?=:)', names.lines, perl=TRUE))

# [1] "A1"  "A2"  "A3"  "A4"  "A5"  "A6"  "A7"  "A8"  "A9"  "A10" "A11"
# [12] "A12" "A13" "A14" "A15" "A16" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:19:31.130

我猜这`Attribute Information`一定是您指向的特定文件中的名称。这是一个非常非常肮脏的解决方案。我使用了一个事实，即有一个模式 - 你的名字后面跟着，所以我们使用`:`分隔字符串，然后从原始向量中获取名称：`:``scan`

```
url="http://archive.ics.uci.edu/ml/machine-learning-databases/credit-screening/crx.data"
credit<-read.csv(url, header=F)
url.names="http://archive.ics.uci.edu/ml/machine-learning-databases/credit-screening/crx.names"
mess <- scan(url.names, what="character", sep=":")
#your names are located from 31 to 61, every second place in the vector
mess.names <- mess[seq(31,61,2)]
names(credit) <- mess.names 
```****

# bash - Bash 重定向到文件

> ID：13294561
> 
> 赞同：0
> 
> 时间：2012-11-08T17:36:24.333
> 
> 标签：bash

我正在尝试将命令的输出重定向到文件。我使用的命令 (zypper) 从 Internet 下载包。我正在使用的命令是

zypper -x -n in geany >> log.txt

该命令逐渐将输出打印到控制台。我面临的问题是，上面的命令在命令执行完成后一次将命令输出全部写入。如何将 bash 输出重定向到终端，而不是在最后写入所有命令输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:39:38.603

不是 bash 本身，而是通过`tee`命令：

```
zipper -x -n in geany | tee log.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:39:40.353

&>>文件命令

将 COMMAND 的输出附加到 FILE

在你的情况下

```
&>>log.txt zypper -x -n in geany 
```

如果要通过过滤器传递命令，则必须确保命令输出到标准输出（文件描述符 1）——如果它输出到标准错误（文件描述符 2），则必须在执行之前将 2 重定向到 1管道。考虑到只有标准输出通过管道。

所以你必须这样做：

```
2>&1 COMMAND | FILTER 
```

如果您想 grep 输出并同时将其保存到日志文件中，则必须使用 复制它`tee`，并使用类似的过滤器 `... | tee log-file | grep options`

# rspec - RSPEC 中是否存在可以执行 'string.should eql("value" OR "value_2")' 的匹配器？

> ID：13294571
> 
> 赞同：1
> 
> 时间：2012-11-08T17:37:08.343
> 
> 标签：rspec

在 RSPEC 中有一些匹配器可以执行以下操作：

```
string.should eql("value" OR "value_2") 
```

比较字符串是否等于“value”或“value_2”的匹配器？

谢谢你的时间！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:14:51.640

好。我用另一种方法解决了这个问题。

首先，使用可能的值创建一个数组：

```
possible_values_of_string["value", "value_2"] 
```

然后：

```
possible_values_of_string.should include(string_to_evaluate) 
```

# spring - Spring 数据库集成测试，何时刷新或？

> ID：13294575
> 
> 赞同：2
> 
> 时间：2012-11-08T17:37:19.153
> 
> 标签：spring, hibernate, integration-testing

我对spring很陌生，并且正在做一些集成测试。使用 Hibernate、MySql 和 Spring 数据 JPA。我正在使用事务支持，并且在每次测试结束时一切都会回滚。

例如：

```
@Test (expected=DataIntegrityViolationException.class)
public void findAndDelete() {
    UUID uuid = UUID.fromString(TESTID);
    User user= iUserService.findOne(uuid);
    iUserService.delete(cashBox);

    iUserService.flush();                

    assertNull(iUserService.findOne(uuid));
} 
```

在上面的代码中，我调用了 iUserService.flush()，以便将 sql 发送到 DB，并且发生预期的 DataIntegrityViolationException，因为存在从 User 到另一个表的外键（不允许级联，无）。到目前为止一切都很好。

现在，如果我删除 iUserService.flush() 则不会发生预期的异常，因为 sql 没有发送到数据库。

我尝试将 flush() 添加到拆卸 @After 方法中，但这不起作用，因为测试没有看到测试方法之外的异常。

有什么方法可以避免在测试方法中调用刷新？

如果我团队中的开发人员根本不必在他们的测试代码中使用 flush 方法，那就更好了

编辑：我尝试添加以下内容

```
 @Before
public void before() {
    Session session = entityManagerFactory.createEntityManager().unwrap(Session.class);
    session.setFlushMode(FlushMode.ALWAYS);

} 
```

但它似乎确实在每次查询之前刷新了 sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:43:04.933

在我看来，这比你团队的开发人员知道他们在做什么要好。

它包括默认配置的内容及其后果。

请看一下为什么[在测试 ORM 代码时需要避免误报](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#testcontext-tx-false-positives)

# tsql - 基于同一记录集中的 2 个条件的 TSQL 组

> ID：13294578
> 
> 赞同：1
> 
> 时间：2012-11-08T17:37:28.820
> 
> 标签：tsql, group-by, multiple-columns

我有一个问题让我困惑了 2 天。这是问题所在。我有一个看起来像这样的表：

![在此处输入图像描述](../Images/e4086a6e781400a8a8d8f47093a0540c.png)

我想做的是必须对最终出现在同一张表中的分组。对于上面的示例，我最终会得到以下结果：

![在此处输入图像描述](../Images/4c50da1942de74b4d61a0535a4d0c578.png)

这样的事情可以实现吗？如您所见，我们按不同的列进行分组。这不必通过一个查询来完成，但是，它必须以一个表/数据集结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:49:29.843

我会独立总结每个集合，然后使用 a 连接在一起`full outer join`，因为看起来你可能有多年的销售，但没有多年的收入，反之亦然......

```
SELECT
    ISNULL(PeriodEarnedYear, [Sale Year]) AS [Year],
    Earned,
    Sale
FROM
(
    SELECT
        PeriodEarnedYear,
        SUM(PeriodEarned) AS Earned
    FROM YourTable
    GROUP BY PeriodEarnedYear
) p FULL OUTER JOIN
(
    SELECT
        [Sale Year],
        SUM(Sale) AS Sale
    FROM YourTable
    GROUP BY [Sale Year]
) s ON p.PeriodEarnedYear = s.[Sale Year] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:47:15.743

好像你需要这个：

```
select PeriodEarnedYear,
    sum(PeriodEarned) Earned,
    Sale
from yourtable
group by PeriodEarnedYear, Sale 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:53:56.717

```
SELECT SaleYear year, 
  0 earned, 
  sum(Sale) sale
FROM yourtable
group by saleyear
UNION
Select PeriodEarnedYear,
    sum(PeriodEarned) Earned,
    Sale
from yourtable
group by PeriodEarnedYear 
```

但这做了一些假设。

# c - 不熟悉的错误

> ID：13294582
> 
> 赞同：0
> 
> 时间：2012-11-08T17:37:45.987
> 
> 标签：c, multithreading, unix, ceil

我正在编写一个程序来处理我几乎完全可以工作的线程。不幸的是，我遇到了一个我不熟悉的语法错误（重复 4 次）。这是我的编译命令的快速截图，以及以下错误：

```
 gcc -o threads threads.cpp -pthread<br>
/tmp/ccy8maS0.o: In function `tenPercentA()':
threads.cpp:(.text+0xde): undefined reference to `ceil'
/tmp/ccy8maS0.o: In function `tenPercentB()':
threads.cpp:(.text+0x1c6): undefined reference to `ceil'
/tmp/ccy8maS0.o: In function `fiftPercentC()':
threads.cpp:(.text+0x2ae): undefined reference to `ceil'
/tmp/ccy8maS0.o: In function `fiftPercentD()':
threads.cpp:(.text+0x396): undefined reference to `ceil'
/tmp/ccy8maS0.o:(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status 
```

我已经在我的程序中包含了 math.h 库，并且我使用了正确的调用语法：

```
ceil(tempA); 
```

其中 tempA 是一个 double 值，我需要四舍五入。有什么建议么？我已经尝试用 Google 搜索这些错误，但与大多数错误一样，很难找到与您的模式相同的特定示例。

编辑：我已经解决了所有与 ceil 相关的错误（在命令行上使用 -lm）但是最后一个错误仍然存​​在，我不知道它是什么意思，或者如何修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:41:51.927

将未定义的引用引用到`ceil()`：

您似乎缺少链接到`libm`.

`-lm`在您的呼叫中添加选项`gcc`应该可以解决此问题。

* * *

`#include`ing`math.h`是为了让编译器了解`ceil()`' 的定义。链接器随后需要知道`ceil()`的实现实际驻留在哪里，即在`libm`.

# postgresql - 使用 LIMIT 子句与简单地获取 N 个结果有何不同？

> ID：13294585
> 
> 赞同：5
> 
> 时间：2012-11-08T17:37:46.410
> 
> 标签：postgresql, rdbms

在我的应用程序中，我有一个对某个主题的响应表。结构大致如下：

```
CREATE TABLE responses (
    id INT NOT NULL PRIMARY KEY,
    topic_id INT NOT NULL,
    author_id INT NOT NULL,
    response TEXT
); 
```

`id`是一个自动增量字段，`topic_id`并且`author_id`是外键，有适当的索引等。

我总是想按插入时间排序，通常是最近的。在大多数情况下，我将按`topic_id`. 一个典型的查询如下所示：

```
SELECT * FROM responses WHERE topic_id=123 ORDER BY id DESC LIMIT 20;
-- or, for pagination:
SELECT * FROM responses WHERE topic_id=123 AND id < 456789 ORDER BY id DESC LIMIT 20; 
```

我想实现一个阻止列表 - 每个用户都有一个`author_id`他们不想看到的列表。我需要检索前 20 个结果，不包括那些*回复它们*`author_id`的 s和响应。

 *确定是否应排除某行非常复杂，虽然可能可以在数据库中执行此操作（在 PL/SQL 中或通过预处理），但我希望将逻辑保留在应用程序中。所以我可以做以下两件事之一：

1.  忘记 LIMIT 子句，让查询不受限制。吃行直到我计算出 20 个有效结果，然后关闭查询。
2.  应用分块 - 指定 LIMIT 40 并希望它足以获得 20 个“好”结果。如果没有，则获取下一个 40，依此类推。

两者之间的实际区别是什么？特别是。在许多同时用户的性能方面。

我在 PostgreSQL 中这样做，但我愿意切换到不同的 RDBMS。（我不想失去参照完整性，所以我不研究 NoSQL 解决方案）也许我必须调整数据库的一些参数（例如预取大小），以充分利用无界查询案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:55:48.027

我不能谈论 Postgres 的细节，但查询优化器可能会使用 LIMIT 子句作为各种不同执行计划成本计算的一部分。

如果你 ...

```
select ... from ... where ... limit n 
```

那么优化器知道你只会检索 n 行，但是对于...

```
select ... from ... where ... 
```

优化器可能假设您想要整个结果集，估计可能有几千行。

特别是，我希望 RDBMS 支持应用 LIMIT 子句的基于索引的访问方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:45:36.070

在 SQL 中添加阻止列表并不困难。

```
SELECT * FROM responses 
WHERE topic_id=123 
    AND author_id NOT IN (SELECT author_id FROM blocked WHERE user_id = X)
ORDER BY id DESC LIMIT 20; 
```

只需在 WHERE 子句中添加 NOT IN 即可。

如果你有某种原因不能这样做，那么你的块想法是最好的。您不希望没有限制，因为这样数据库会将所有内容返回给查询它的客户端或服务器。*

# jquery - 将锚标记属性传递给jquery mobile中的href页面？

> ID：13294586
> 
> 赞同：0
> 
> 时间：2012-11-08T17:37:48.857
> 
> 标签：jquery, html, jquery-mobile

example.html 包含：

```
<a href="mypage.html" data-str="foo">Test</a> 
```

是否可以访问`data-str`inside的值`mypage.html`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:40:44.273

不，这些值是 example.html 上 html 的一部分。

您必须将其作为查询字符串传递才能访问此值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:48:10.437

如果您想拥有一个动态数据属性，但保持引用 url 相同，您可以执行以下操作：

html

```
<a href="mypage.html" data-str="foo" class="data-to-query">Test</a> 
```

jQuery

```
$('.data-to-query').click(function(){
  window.open($(this).attr('href') + '?str=' + $(this).data('str'),'_self');
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:44:17.947

这是不可能的，正如@Kami 所写......

> 这些值是 example.html 上 html 的一部分

那是绝对正确的，现在我认为您有**两种**选择来实现您所需要的...

**1.**使用`querystring`

**2.**存储`data-str`在一个`cookie`（在客户端使用创建`jQuery`）以在您的其他页面中使用它`site`。

* * *

我更喜欢选项**2**，这个例子会帮助你......

* * *

## 使用 cookie...

使用这个插件：*jquery.cookie*

[https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js](https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js)

`data-str`从...创建一个 cookie

```
//get data attribute
var str = $('.data-to-query').data('str');
//create a cookie called 'data-str' with 'str' variable value
$.cookie('data-str', str); 
```

然后在其他`html`页面中使用以下方法获取 cookie：

```
var str = $.cookie('data-str');

//then you can do other things like this...
if(str != null) {
  //do something when cookie value is defined
} 
```

而且，如果您想删除 cookie，只需在`html`您所在的任何页面上执行此操作：

```
$.cookie('data-str', null); 
```

只是要知道，很明显该`jquery.cookie`插件也`jQuery`必须在您的所有`html`页面中导入。

* * *

就这样。希望这可以帮助 ：-）

# html - 使用 iOS6 在 UIWebView 上第二次查看 HTML5 时出现黑屏

> ID：13294589
> 
> 赞同：1
> 
> 时间：2012-11-08T17:37:52.740
> 
> 标签：html, uiwebview, ios6

我在我的 iPad 应用程序上显示两个 HTML5 文档，在 iOS 6.0.1 上使用 UIWebView。
其中一个没有问题，我可以随心所欲地打开和关闭 webview。另一个可以显示一次，然后当我关闭我的 web 视图并想再次重新打开文档时，webview 显示黑屏。

我自己没有准备好 HTML5 文档，而且我对 HTML5 了解不多，所以我无法区分导致这种行为的它们之间的区别。

以下是我创建 web 视图以及加载 HTML5 的方式：

```
UIWebView *theWebView = [[UIWebView alloc] init];

theWebView.scalesPageToFit = YES;
theWebView.clearsContextBeforeDrawing = YES;
theWebView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

//adjust frame and add to view controller's view here

NSURL *url = [NSURL URLWithString:@"http://www.handypdf.net/davsan"];
[theWebView loadRequest:[NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60.0]]; 
```

每次打开 HTML5 文档时，我都会重新创建 Web 视图。所以我不会重复使用它。

为了解决这个问题，我尝试清理缓存、cookie 等。在[这些](https://stackoverflow.com/questions/10686748/how-to-clear-webview-cache-in-ipad)SO 答案中进行了解释，但它没有用。

以下是有问题和没有问题的 HTML 文档的链接：

[这个](https://s3-eu-west-1.amazonaws.com/gskprodg/PRO13D22D.zip)工作正常。 [这个](https://s3-eu-west-1.amazonaws.com/gskprodg/PRO14598D.zip)第二次就不行了。

此外，如果您想在线查看这些 HTML5 页面，请点击以下链接：

[这个](http://www.handypdf.net/davsan2/AU_MIDAS_HTML5/)工作正常。 [这个](http://www.handypdf.net/davsan/)第二次就不行了。

这个问题在 iOS 5.x 上不会发生。它也可以使用 iOS 模拟器进行复制。你会建议什么来解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:26:50.990

不是一个令人满意的答案，但这是我在这个问题上的进展：

这几天我无法解决这个问题。然后我删除了我所有的代码并从头开始重新编写了功能，然后它就解决了。我无法理解确切的原因，因为我在第二次尝试时没有写任何花哨的东西，所以不幸的是我不知道它是如何解决的:(

这是我刚刚做的：

创建一次 web 视图，并缓存它：

```
+(UIWebView *)getTheWebView {
    if (theWebView) return theWebView;

    theWebView = [[UIWebView alloc] init];
    theWebView.scalesPageToFit = YES;
    theWebView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
    return theWebView;
} 
```

然后，当我想显示网络视图时：

```
UIWebView *theWebView = [HTML5Manager getTheWebView];
theWebView.frame = self.view.frame;

[self.view addSubview:theWebView]; 
```

这是我加载 URL 的方式：

```
[theWebView loadRequest:[NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.0]]; 
```

这就是它，它有效。我知道这没有意义，但我也希望它对你有帮助......

# java - Android webview不显示在html中链接的图像

> ID：13294591
> 
> 赞同：0
> 
> 时间：2012-11-08T17:38:02.070
> 
> 标签：java, android, android-layout, android-webview, android-sdcard

我正在使用 Android 中的 WebView 来显示 .htm 文件。我将文件存储在我的 SD 卡中的一个文件夹中。htm 文件是指指向 Web 位置的图像。前任：

```
<td colspan="2"><img src="http://www.abc.com/abc.png"/></td> 
```

我正在加载 webview 如下

```
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl("file://"+sdcardlocation+"ABC.htm"); 
```

该文件正确打开，但当我打开 Webview 时，图像没有在模拟器上打开。请问有什么办法可以解决这个问题吗？

提前致谢。

# sql - 根据 SQL Server 中的模式从字符串中修剪空格

> ID：13294593
> 
> 赞同：2
> 
> 时间：2012-11-08T17:38:05.237
> 
> 标签：sql, sql-server

我有一个 varchar(max) 字段，其中包含 XML 数据。我需要通过删除标签之间的空格来清理它。例如：

```
</tns:time_changed>   <tns:changed_properties> 
```

应清洁为

```
</tns:time_changed><tns:changed_properties> 
```

我需要在单个查询中执行此操作，并且我不能使用替换所有空格，因为内容中还有其他相关空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:01:43.420

试试这样：

```
UPDATE table
SET xmlColumnName = REPLACE ( xmlColumnName , '>   <' , '><' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:06:48.970

转换为 XML 类型并自动处理空格。更换了

```
<?xml version="1.0"?> 
```

从带有空白的字段中删除，它消除了我收到“文本/xmldecl 不在输入开头”的错误。

# java - 从外部 Jar 文件中读取文件？

> ID：13294594
> 
> 赞同：3
> 
> 时间：2012-11-08T17:38:05.097
> 
> 标签：java, file, jar, external

我正在尝试使用 java 从外部 jar 中读取文件。例如，我有两个 jar 文件。一个是“foo.jar”，另一个是“bar.jar”。“bar.jar”内部是文件“foo-bar.txt”。如何使用“foo.jar”中的代码从“bar.jar”中读取文件“foo-bar.txt”...？这甚至可能..？我知道我可以使用 foo.jar 的 iside 读取文件

```
this.getClass().getClassLoader().getResourceAsStream("foo-bar.txt"); 
```

但我不知道如何从外部罐子里做到这一点..有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T17:43:30.157

使用jar url打开连接示例代码

```
InputStream in = null;
String inputFile = "jar:file:/c:/path/to/my.jar!/myfile.txt";
if (inputFile.startsWith("jar:")){
  try {
    inputURL = new URL(inputFile);
    JarURLConnection conn = (JarURLConnection)inputURL.openConnection();
    in = conn.getInputStream();
  } catch (MalformedURLException e1) {
    System.err.println("Malformed input URL: "+inputURL);
    return;
  } catch (IOException e1) {
    System.err.println("IO error open connection");
    return;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T17:42:57.167

如果 jar 在您的类路径中，那么`getResourceAsStream`它将起作用，但请注意，它会在您的类路径中找到第*一个*实例。如果 foo.jar 和 bar.jar 都包含这个文件，那么它将返回类路径中的第一个 jar。

要从 jar 中读取它，请使用[`JarFile.getEntry`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html#getEntry%28java.lang.String%29)和[`JarFile.getInputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html#getInputStream%28java.util.zip.ZipEntry%29)

# java - 休眠复合ID作为其他复合ID的一部分

> ID：13294598
> 
> 赞同：0
> 
> 时间：2012-11-08T17:38:18.780
> 
> 标签：java, hibernate, composite-primary-key, composite-id

我尝试将映射写入表。我决定 id 和 versionId - 用于表测试的复合 ID。但在表 test_question 中，我的复合 ID 由 question_id、test_id 和 versionId 组成。我无法理解，因为我可以使用一个复合 ID id-versionId 作为其他复合 ID 的一部分。

我有脚本的下一个和平。

```
 Create Table Test
(

  id int unsigned not null,
  versionId int unsigned not null,
  test_text varchar(200) not null,
  subject_id int unsigned not null,
  primary key (id, versionId),
  Foreign key (subject_id) REferences Subject(id)
  On delete cascade on update cascade
)
Engine InnoDB CHARACTER SET utf8;

Create Table Question
(
  id varchar(36) not null,
  question_text varchar(200) not null,
  primary key(id)
)
Engine InnoDB CHARACTER SET utf8;

Create table Test_Question
(
  test_id int unsigned not null,
  question_id varchar(36) not null,
  versionId int unsigned not null,
  primary key(test_id, question_id, versionId),
  Foreign key(test_id,versionId) References Test(id, versionId),
  Foreign key(question_id) References Question(id)
)
Engine InnoDB CHARACTER SET utf8; 
```

还有我的映射

测试.hbm.xml

```
<hibernate-mapping>
    <class name="by.bsuir.testapp.model.Test" table="TEST">
        <composite-id>
            <key-property name="testId" type="long" column="TEST_ID" />
            <key-property name="versionId" type="long" column="VERSION_ID" />
            <generator class="assigned"/>
        </composite-id>

        <property name="testName" type="string">
            <column name="TESTNAME" />
        </property>
        <many-to-one name="subject" class="by.bsuir.testapp.model.Subject"
            fetch="join">
            <column name="SUBJECT_ID" />
        </many-to-one>
    </class>
</hibernate-mapping> 
```

对于 TestQuestion.hbm.xml

```
<hibernate-mapping>
    <class name="by.bsuir.testapp.model.TestQuestion" table="TEST_QUESTION">
        <composite-id>
            <key-property name="test" type="long" column="TEST_ID" />
            <key-property name="question" type="long" column="QUESTION_ID" />
            <generator class="assigned" />
        </composite-id>
    </class>
</hibernate-mapping> 
```

表 TestQuestion 中的 id 应该是什么？我的意思是 QUESTION_ID-TEST_ID-VERSION_ID 是整个复合 ID。

# html - 是否可以在浏览器上播放 HTTP Live 视频？2012

> ID：13294605
> 
> 赞同：1
> 
> 时间：2012-11-08T17:38:32.930
> 
> 标签：html, http, http-streaming

我想知道是否可以流式传输给用户 HTTP Live 视频。不是视频文件。现场视频。使用任何技术。Flash 或 HTML5。我做了一些研究，发现大多数播放器都支持直播，但其中大多数是类似 youtube 风格的流媒体，您可以在视频中进一步点击并加载视频。我说的是实时视频，发生在用户观看视频的同时。

我收到了传入的 HTTP 数据包，存储在一个名为“current_frame.h264”的文件中。这些文件会随着数据包的进来而更新。它的大小不会增长，只会更新。（保持在 17-20kb 左右）。现在我想获取这个文件并在浏览器上显示它。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:50:03.803

苹果不久前开发了类似的东西：[https ://developer.apple.com/streaming/](https://developer.apple.com/streaming/)

您只需要一个网络服务器和一个支持 HTML5 的网页。

使用这项技术，您还可以根据连接（例如移动使用）流式传输不同质量的文件

[https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html)

# coffeescript - `npm 安装 ` 或 `npm pack` 不安装依赖项

> ID：13294607
> 
> 赞同：2
> 
> 时间：2012-11-08T17:38:41.057
> 
> 标签：coffeescript, npm

我有一个使用 coffeescript 源的 npm 包，我想在`pack`or之前预编译它`publish`。但是，我的 prepublish 脚本依赖于 coffee-script 作为 devDependency，但是 npm 在运行 prepublish 操作之前没有安装它。我必须先`npm install`单独运行，这似乎是错误的。如果我尝试`npm install`将源文件夹放入不同的项目，也会存在同样的问题。

我怀疑我“做错了”，但我看到的唯一其他指导是在安装时编译而不是发布。我宁愿不这样做，所以我希望有一些我可以参考的预发布编译示例。

# sbt - 如何使用 Sbt 找出哪些文件已更改

> ID：13294608
> 
> 赞同：5
> 
> 时间：2012-11-08T17:38:40.637
> 
> 标签：sbt, watch

Sbt 可以在某些监视文件发生更改时重新运行任务（~task）。如何找出哪些文件已更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:09:18.537

您可以将其添加到您的 build.sbt 以查看观看了哪些文件：

```
watchSources ~= { files =>
  println(files.mkString("\n")+"\n\n\n")
  files//here you can add files or filter out
} 
```

它可能会帮助您测试特定的测试类：ins sbt（交互模式）：

```
~test-only full.path.test.ClassName 
```

要跟踪一般的文件更改，您可以使用[Java 7 WatchService](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)或 [Apache VFS](http://commons.apache.org/vfs/) for Java 6。

来源：[Java 6 的 WatchService](https://stackoverflow.com/questions/7968488/watchservice-for-java-6)

# c# - 带有foreach循环的MVC4嵌套手风琴

> ID：13294611
> 
> 赞同：1
> 
> 时间：2012-11-08T17:38:57.763
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, jquery-ui-accordion

我正在尝试使用嵌套的手风琴创建一个视图，但到目前为止我没有取得太大的成功。我需要顶级手风琴是一个类别，它将列出第二个手风琴的名称。

另一个问题是我正在尝试使用 foreach 为每个不同的类别类型创建一个类别手风琴，然后在该手风琴中，为表中的每个名称创建一个手风琴。

这是一个例子：

```
Historical(accordion)-> museum(accordion)-> description, state

Sports(accordion)->soccer(accordion)-> description, state

             ->baseball(accordion)-> description, state 
```

这是我目前拥有的，但我不确定这是否是最好的方法：

```
<div id="accordioncat">
@foreach (var item in Model)
{

    <h3>@item.category</h3>
    <div>
        <h3>@item.name</h3>
            <div>
                <p>@item.description</p>
                <p>@item.state</p>
            </div>
     </div>
}

</div> 
```

对于我的模型，我使用一个 int for category 将它加入到我的类别表中的类别 ID 中，并且与状态相同。这是我的模型（这可能也需要更改）：

```
public class t_records
{
    [Key]
    public int ID { get; set; }

    [Display(Name="Name")]
    public string name { get; set; }

    [Display(Name="Description")]
    public string description { get; set; }

    public int state { get; set; }

    public int category { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:42:19.873

了解数据模型会有所帮助。模型中的所有项目是否都作为一个列表并且尚未分类？这将是开始的第一件事，为每个类别获取单独的列表，然后迭代类别，然后迭代其中的项目。

# google-closure-compiler - Closure Compiler - 在命令行上用 Javascript 解析而不从磁盘读取它？

> ID：13294614
> 
> 赞同：3
> 
> 时间：2012-11-08T17:39:05.097
> 
> 标签：google-closure-compiler

我从脚本内部调用 Closure Compiler (closurecompiler.jar)。该脚本还生成了一些 Closure Compiler 需要编译的 javascript。有没有办法将此 javascript 解析为 Closure 编译器，而无需将其写入磁盘并使用`--js`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T19:26:01.257

如果不指定 --js 参数，编译器将从标准输入中读取。这将完全取决于您使用的操作系统和脚本语言，但您应该能够打开通往子进程的管道并写入它。例如，如果您在 Linux/Mac/Unix 上使用 PHP：

```
<?php
$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
   1 => array("pipe", "w")   // stdout is a pipe that the child will write to
);

$process = proc_open('/path/to/java -jar compiler.jar', $descriptorspec, $pipes);

// Write the source script to the compiler
fwrite($pipes[0], $string_that_contains_your_script);
fclose($pipes[0]);

// Get the results
$compiled_script = stream_get_contents($pipes[1]);
fclose($pipes[1]);

$return_value = proc_close($process); 
```

您应该能够使其适应几乎任何语言。

# jquery-mobile - 在 jQuery Mobile 中删除动态父元素

> ID：13294622
> 
> 赞同：1
> 
> 时间：2012-11-08T17:39:44.167
> 
> 标签：jquery-mobile

我正在使用与我的数据库对话的 PHP 代码填充一个表。PHP 回显的代码作为单独的行返回到表中。每行都有一个删除按钮，我想让该删除按钮从 DOM 中删除该行。

```
echo "<tr><td data-creator='$creator'>{$comment}<a class='deleteComment' 
data-role='button' data-icon='delete' data-iconpos='notext';></a></td></tr>"; 
```

// php代码结束

```
<script type='javascript'>

$(".deleteComment").click(function () {
$(this).parent().remove();
});
</script> 
```

这行不通。当我将 console.log 语句放入 .deleteComment 函数时，当我单击一行中的删除按钮时，控制台不会打印任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:20:12.377

我建立了一个[简单的例子](http://jsfiddle.net/Y9PBd/)。对我来说就像一个魅力。我看不出有什么错误。一个更完整的代码示例会很好。

你试过这样记录吗？它会显示什么？

```
$(".deleteComment").click(function (err) {
    console.log(err);
});​ 
```

# android - Android TimerTask 只运行一次，但有时更频繁一些

> ID：13294628
> 
> 赞同：0
> 
> 时间：2012-11-08T17:40:05.293
> 
> 标签：android, service, timer, timertask

我在 Android 中的 TimerTask 大部分时间只运行一次，有时它会更频繁地启动然后停止。

基本上我想要一个应用程序来跟踪设备的传感器数据。

我有一个 MainActivity 和 2 个用于传感和记录的服务。

这是日志记录部分：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    if (!started) {
        started = true;
    }
    logfile = new File(Environment.getExternalStorageDirectory() + File.separator + "log.csv");
    if (!logfile.exists()) {
        try {
            logfile.createNewFile();
            //FileWriter fw = new FileWriter(logfile, true);
            //fw.write("Modell;GPS-Zeit[Millis];Lat;Lon;Alt;Speed;AccX;AccY;AccZ;LinAccX;LinAccY;LinAccZ\n");
            //fw.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    myTimer = new Timer();
    myTimer.schedule(pingTimerTask, 1000, 1000);
    myTimer.schedule(logTimerTask, 500,500);
    Toast.makeText(this, "LogService started", Toast.LENGTH_SHORT).show();
    Log.i(T, "LogService started");
    return super.onStartCommand(intent, flags, startId);
} 
```

这是 TimerTask：

```
TimerTask logTimerTask = new TimerTask() {
    @Override
    public void run() {
        try {
            logData();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}; 
```

日志数据（）

```
private void logData() {
        currentMsg = createMsg();
        try {
            FileWriter fw = new FileWriter(logfile, true);
            fw.write(currentMsg + "\n");
            fw.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        logSize+=currentMsg.length();
        for (Listener l : listener) {
            l.logged(logfile.toString(), logSize);
        }
    } 
```

谁能告诉我定时器有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:47:35.633

很可能是因为您在 onStartCommand 上返回默认值：

```
return super.onStartCommand(intent, flags, startId); 
```

应替换为：

```
return START_STICKY; 
```

这使得服务继续运行直到它被明确停止，所以你必须在其他地方手动停止它，不要让它永远运行。

# java - 如何在 Java 中扩展最终类

> ID：13294629
> 
> 赞同：24
> 
> 时间：2012-11-08T17:40:05.000
> 
> 标签：java, static, final

这是我现在面临的问题。我有一个类，假设`Foo`这个类定义了一个`getBar`返回`Bar`实例的方法。该类`Bar`在内部定义`Foo`并声明`public static final`。我想做的是定义一个`MyFoo`扩展的类，但`Foo`我也想通过添加我自己的功能（方法、属性等）来扩展。我也想回来。`Bar``MyBar``getBar``MyBar`

问题`Bar`是最终的。这是我想要做的说明：

```
public class Foo {

  Bar bar = new Bar();

  public Bar getBar(){
      return bar;
  } 

   ....

   public static final class Bar {

    } 
} 
```

我想做的是：

```
public class MyFoo extends Foo {

   public MyBar getBar(){ // here I want to return an instance of MyBar

   }

  public static final class MyBar extends Bar { // That's impossible since Bar is final

  } 
} 
```

我怎样才能做到这一点？

[编辑] 我正在为我的问题添加更多细节。我实际上正在为 Jenkins 开发一个插件，在搜索之后，我意识到有一个插件可以提供我想要做的基本功能，`Foo`并且`Bar`. 我想自定义`Foo`and `Bar`，所以它可以满足我的需求。Foo 是插件的主类，并扩展了一个名为 Builder 的类。Foo 定义了一个名为的方法`perform`，该方法包含执行构建的所有操作。 `Bar`包含用于配置目的的操作，Foo 需要 Bar 来获取这些信息。

所以我想做的是用 Foo 扩展`MyFoo`并添加一些配置`MyBar`。如您所见，`MyFoo`需要通过调用来获取这些配置`getBar();`

第二件事是我无法控制`MyFoo`和`MyBar`

阻碍我的是，我无法扩展 Bar。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-08T17:42:11.220

你不能，基本上。看起来开发人员的设计`Bar`意图是不要扩展它——所以你不能扩展它。您将需要寻找一种不同的设计——可能是一种不太使用继承的设计……当然，假设您无法更改现有代码。

（如果不了解这里的真正目标——整个系统的设计，就很难给出更具体的建议。）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-08T18:43:37.213

您不能扩展已声明的类`final`。但是，您可以创建一个中间类，称为`Wrapper`. 这个 Wrapper 基本上将包含原始类的一个实例，并提供替代方法来根据您想要做的修改对象的状态。

当然这不会访问`final`类的私有和受保护字段，但是您可以使用它的 getter 和 setter 方法，结合您在`Wrapper`类中声明的新方法和字段来获得您想要的结果，或者相对的东西关。

`final`如果没有正当理由，另一种解决方案是不声明一个类。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-08T22:32:25.827

你不能扩展一个`final`类——这就是`final`关键字的目的。

但是，（至少）有两种解决方法：

1.  该类在Jenkins项目中，该项目是开源的，因此您只需下载该项目，对类进行所需的更改并重新构建jar即可
2.  有点hack，但是您可以使用[Javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)之类的库来替换内存中类的实现

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-08T17:42:49.453

您不能扩展 final 类，这就是声明类 final 的重点。您可以定义最终类继承自的接口和将调用委托给包装的最终类的包装类。那么问题是为什么要把课程放在第一位。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-18T21:10:37.500

可能您想要的是代理。这很容易实现。这是一篇很棒的文章：[http ://blog.frankel.ch/the-power-of-proxies-in-java](http://blog.frankel.ch/the-power-of-proxies-in-java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-09T08:13:20.153

例如，我们不能在 TreeSet 集合中添加 StringBuffer，因为 TreeSet 不是接口 Comparable 的子级：

```
public class Main(){
public static void main(String[] args){
   TreeSet treeSetSB = new TreeSet();
   treeSetSB.add(new StringBuffer("A"));  //error, Comparable is not implemented
} 
```

但是我们可以使用包装器来实现 Comparable：

```
class myWrap implements Comparable{
    TreeSet treeset;
    public myWrap() {
        this.treeset=new TreeSet<>();

    }
    public TreeSet getTreeset() {
        return treeset;
    }
    public void setTreeset(TreeSet treeset) {
        this.treeset = treeset;
    }
}

public class Main(){
public static void main(String[] args){

   myWrap myWrap =new myWrap();
   TreeSet myTrs  =myWrap.getTreeset();
   myTrs.add("b");   // no error anymore
   myTrs.add("a");
   myTrs.add("A");
   System.out.println(myTrs);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-08T13:04:00.717

如果它实现了一些接口，[装饰器设计模式](https://sourcemaking.com/design_patterns/decorator)可以解决这个问题。

# php - API Instagram 有点奇怪，“foreach() 提供的参数无效”

> ID：13294633
> 
> 赞同：1
> 
> 时间：2012-11-08T17:40:16.933
> 
> 标签：php, api, foreach, instagram

> **可能重复：**
> [为 foreach() 提供的参数无效](https://stackoverflow.com/questions/2630013/invalid-argument-supplied-for-foreach)

好吧，代码运行良好，直到今天我注意到这个错误“ `Warning: Invalid argument supplied for foreach() in /home/.../www/wp-content/themes/.../functions.php on line 93`”并且不知道可能是什么，我认为 Instagram 已经改变了他们的 API 中的某些内容，或者没有。

我尝试更改访问密钥但失败了。

按照代码

```
function get_instagram($user_id=-ID-,$count=15,$width=45,$height=45){

        $url = 'https://api.instagram.com/v1/users/'.$user_id.'/media/recent/?access_token=-ACCESS-TOKEN-&count='.$count;

        //salva em cache 1h
        $cache = 'temp/instagram.json';
        if(file_exists($cache) && filemtime($cache) > time() - 60*60){

            $jsonData = json_decode(file_get_contents($cache));
        } else {
            $jsonData = json_decode((file_get_contents($url)));
            file_put_contents($cache,json_encode($jsonData));
        }

        $result = '<ul id="instagram-list">'.PHP_EOL;
        foreach ($jsonData->data as $key=>$value) {
            $result .= "\t".'<li><a href="'.$value->link.'" target="_blank" >
                              <img src="'.$value->images->low_resolution->url.'" width="'.$width.'" height="'.$height.'" />
                              </a> </li>'.PHP_EOL;
        }
        $result .= '</ul>'.PHP_EOL;
        return $result;
    } 
```

对不起我的英语不好

# python - 相同的错误但不同的错误报告。为什么？

> ID：13294637
> 
> 赞同：9
> 
> 时间：2012-11-08T17:40:39.080
> 
> 标签：python, error-reporting

为什么 Python 出于相同的原因报告不同的错误，即具有 1 行和 2 行代码的程序？

我是说：

```
print(1 
```

给

```
Error: unexpected EOF while parsing 
```

但

```
a = 1+1
print(1 
```

给

```
Error: invalid syntax 
```

同样的问题 - 但错误信息不同 - 原因？

sys.version_info(major=3,minor=2,micro=0,releaselevel='final',serial=0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:37:21.213

在您的第一种情况下，python 正在“寻找”它的第一行/命令。一个程序的最小值是至少一个语句。所以它抱怨提前终止。

所以第一个错误 EOF (end of File) 的意思是：'嘿，我期待至少一个命令，但突然该行结束了......''你确定程序完成了吗？

前一个错误已运行，因此编译器“知道”这是一个程序。

错误是不同的，但这意味着：

'嘿，我现在这个位置有一个错误，你能修复你的 sintaxe' 吗？

我希望我的非学术方式不会分散你的注意力:)

# .htaccess - 将 codeigniter 项目移至新的托管服务提供商 - .htaccess 和 index.php

> ID：13294640
> 
> 赞同：1
> 
> 时间：2012-11-08T17:40:45.913
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我刚刚将我的功能性 codeigniter 项目转移到了一个新的网络托管服务提供商，现在我遇到了使用标准 .htaccess mod-rewrite 从 URL 中删除 index.php 的挑战。这是运行良好的 .htaccess ：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

我发现[了这个](https://stackoverflow.com/questions/5479103/moving-codeigniter-project-to-amazon-ec2-htaccess-and-modrewrite-problems)讨论，但我没有对 apache 服务器的 root 访问权限来进行建议的配置更改。

使用上面提供的 .htaccess 文件，

*   工作正常： [http ://www.mysite.com/index.php/plans](http://www.mysite.com/index.php/plans)
*   不起作用： [http ://www.mysite.com/plans](http://www.mysite.com/plans)

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:43:44.513

如果你真的必须同时接受这两种形式的 URL，那么你需要两个 RewriteRules。一旦接受带有“index.php”部分的变体和一个没有的变体。

像这样的东西：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^index\.php/(.*)$ index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:00:40.383

您的问题不是很清楚，但是像这样的 mod_rewrite 规则的一个常见问题是某些服务器需要将请求作为查询传递。即您需要将最后一行更改为：

```
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# cakephp - CakePHP 分页。保持模特肥胖

> ID：13294645
> 
> 赞同：0
> 
> 时间：2012-11-08T17:40:58.277
> 
> 标签：cakephp, pagination, cakephp-model

我目前在我的模型（参考模型）中有这个：

```
public function getReferers($type = 'today') {
    if ($type == 'this_month') {
        return $this->_getThisMonthsReferers();
    } elseif ($type == 'today') {
        return $this->_getTodaysPageReferers();
    }      
}

private function _getThisMonthsReferers() {
    $today = new DateTime();

    return $this->Visitor->find('all', array(
        'fields' => array(
            'Referer.url',
            'COUNT(UserRequest.visitor_id) as request_count',
            'COUNT(DISTINCT(Visitor.id)) as visitor_count',
            'COUNT(UserRequest.visitor_id) / COUNT(DISTINCT(Visitor.id)) as pages_per_visit',
            'COUNT(DISTINCT(Visitor.id)) / COUNT(UserRequest.visitor_id) * 100 as percent_new_visit'
        ),
        'joins' => array(
            array(
                'table' => 'user_requests',
                'alias' => 'UserRequest',
                'type'  => 'RIGHT',
                'conditions' => array(
                    'UserRequest.visitor_id = Visitor.id'
                )
            )
        ),
        'conditions' => array(
            'Visitor.site_id' => $this->Site->id,
            'MONTH(UserRequest.created)' => $today->format('m'),
            'YEAR(UserRequest.created)' => $today->format('Y')
        ),
        'group' => array(
            'url'
        )
    ));
} 
```

问题是我将如何分页。如果只是将我的代码从模型中复制到控制器中，那就太容易了。问题是我希望将查询保留在我的模型中。

这应该如何在 CakePHP 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:43:39.423

自定义查找类型是一种方法。您可以在此处找到更多信息：http: [//book.cakephp.org/2.0/en/core-libraries/components/pagination.html#custom-query-pagination](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#custom-query-pagination)

要将您`_getThisMonthsReferers`变成自定义查找，请按照此[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types)

例如：

```
// model
protected function _findThisMonthsReferers($state, $query, $results = array()) {
    if ($state === 'before') {
        $query['fields'] = ....
        $query['joins'] = ....
        return $query;
    }
    return $results;
}

// controller
public $paginate = array('findType' => 'thisMonthsReferers') 
```

编辑：

我认为应该是：

```
public $paginate = array('thisMonthsReferers'); 
```

但是，我使用的从这个答案派生的解决方案是将其添加到我正在使用的方法中

```
$this->paginate = array('thisMonthsReferers'); 
```

因为我不希望我用在我所有的行动中。然后像这样对模型进行分页。

```
$this->paginate('Visitor); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:27:55.480

而不是返回查找的结果，只需返回它的选项数组：

```
return array(
    'fields' => array(
    //...etc 
```

然后使用这些选项在控制器中进行分页。关于这个类似问题的答案的更多详细信息： [Paginate from within a model in CakePHP](https://stackoverflow.com/questions/6501849/paginate-from-within-a-model-in-cakephp)

它仍然保持模型肥大（使用任何可能改变条件、连​​接、字段等的逻辑）和控制器瘦，它只使用返回的数组作为分页选项。

# php - 将 json 对象发送到 google maps 来自 php 脚本的 vai ajax 响应

> ID：13294646
> 
> 赞同：0
> 
> 时间：2012-11-08T17:41:01.343
> 
> 标签：php, jquery, google-maps-api-3

我难住了。我不确定为什么我的回调函数没有解析我的 JSON 对象。我在控制台日志中收到以下错误：

TypeError: data is undefined for (var i = 0, len = data.features.length; i < len; i++) {

非常感谢您的帮助！

ajax代码：

```
$.ajax({
        type : 'POST',
        url  : 'timezone.php',
        dataType : 'json',
        data     : { "func" : "getFirstAndNext", epochTime : browserUTC },
        success  : function( data ) {
                console.log( data.first );
                console.log( data.next );
                sector_callback( data.first );

            // do something with data.myObject.memberVariable

        },
        error : function ( XMLHttpRequest, textStatus, errorThrown ) {
            // didn't work!
        }
    }); 
```

PHP 脚本：

```
 <?php
    //header('Content-Type: application/json; charset=utf-8');
    function getFileStamp($type) {
        $timeInterval = 15; // minutes
        $now = round($_POST['epochTime'] / 1000);
        $now = round(1352324181061 /1000 ); // 3:36:21
        //$now = round(1352238011.067);
        $offsetInSeconds = $timeInterval * 60;
        $offsetInMillis  = $timeInterval * 60 * 1000;

        $currentFileTime = $now - $now % ($timeInterval * 60);
        //$currentFileTime = ($now - ($now  % $offsetInMillis))/1000.0;  // this returns epoch time in $timeInterval minutes.
        $nextFileTime = $currentFileTime + $offsetInSeconds;  // next epoch time for file;
        return ($type == 0) ? $currentFileTime : $nextFileTime;
    }

        $currentFileTime = getFileStamp(0) . '.json';
        $nextFileTime = getFileStamp(1) . '.json';

        $res = array();
        $res['file1'] = file_get_contents($currentFileTime);
        $res['file2'] = file_get_contents($nextFileTime);
        echo json_encode(array("first"=>$res['file1'],"next"=>$res['file1'])); //takes contents and converts it to json object
    ?> 
```

扇区回调函数：

```
 var allPolygons = [];
    function sector_callback() {
        //console.log(data);
        var bounds = new google.maps.LatLngBounds();        
        for (var i = 0, len = data.features.length; i < len; i++) {
            var coords = data.features[i].geometry.coordinates[0];
            siteNames = data.features[i].properties.Name; // added for site names
            var path = [];
        for ( var j = 0, len2 = coords.length; j < len2; j++ ){ // pull out each     set of coords and create a map object
            var pt = new google.maps.LatLng(coords[j][1], coords[j][0])
            bounds.extend(pt);
            path.push(pt);

        }

        var polygons = new google.maps.Polygon({
        path: path,
            strokeColor: "#000000",
            strokeOpacity: 0.8,
            strokeWeight: 1,
            fillColor: "#000000",
            fillOpacity: 0.35,
        map: map
        });
        createClickablePoly(polygons, siteNames);

        google.maps.event.addListener(polygons, 'mouseover', function() {
        var currentPolygon = this;

        currentPolygon.setOptions({ 
            fillOpacity: 0.45,
            fillColor: "#FF0000"
            })
        });

        google.maps.event.addListener(polygons, 'mouseout', function() {
        var currentPolygon = this;
        currentPolygon.setOptions({ 
            fillOpacity: 0.35,
            fillColor: "#000000"
            })
        });

        allPolygons.push(polygons);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:53:24.000

仅关闭我在这里可以看到的内容，我看不到您的扇区回调（）无论如何都可以访问数据。当 jQuery 传入数据时，如果一切正常，您的控制台应该会很好地记录这些属性。但是，当您将其中一些数据传递给您的扇区回调（）时，它就会丢失。原因是您的ector_callback() 要么需要读取arguments[] 数组来获取它，要么您需要将函数签名更改为sector_callback(data)。

在您的 jQuery 块中，传递数据而不是 data.features：

```
sector_callback( data ); 
```

并更改您自己的回调签名：

```
function sector_callback(data) {
    console.log(data); // will log the whole chunk of the server data returned

 ...

} 
```

这是因为数据在返回到您的 jQuery 回调时处于闭包中。即使您在该闭包之外的某个地方声明了它，它也会保留本地范围，并且除非您明确传递它，否则您的其他函数不能访问它。

希望我在这里理解了问题的症结，这很有帮助......

# asp.net - 如何将本地报告导出为 pdf 和 excel 文件？

> ID：13294648
> 
> 赞同：0
> 
> 时间：2012-11-08T17:41:01.553
> 
> 标签：asp.net, rdlc

我有两个网页，page1.aspx 和 page2.aspx。在page1中，有一个按钮；在第 2 页中，有一个本地报告 (rdlc)。当我点击按钮时，它会弹出 page2，并将报告导出为 pdf 和 excel 文件。如果报表是水晶报表，在page2的page_load中，我可以调用函数ExportToDisk(ExportFormatType, FileName)将报表导出为pdf/excel。但现在我正在使用本地报告 (rdlc)，我想知道如何将其导出为 pdf/excel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:43:25.243

[http://weblogs.asp.net/rajbk/archive/2006/03/02/How-to-render-client-report-definition-files-_28002E00_rdlc_2900_-directly-to-the-Response-stream-without-preview。 aspx](http://weblogs.asp.net/rajbk/archive/2006/03/02/How-to-render-client-report-definition-files-_28002E00_rdlc_2900_-directly-to-the-Response-stream-without-preview.aspx)

```
/// <summary>
/// References:
/// </summary>
private void RenderReport() {
    LocalReport localReport = new LocalReport();
    localReport.ReportPath = Server.MapPath("~/Report.rdlc"); 

    //A method that returns a collection for our report
    //Note: A report can have multiple data sources
    List<Employee> employeeCollection = GetData();

    //Give the collection a name (EmployeeCollection) so that we can reference it in our report designer
    ReportDataSource reportDataSource = new ReportDataSource("EmployeeCollection", employeeCollection);
    localReport.DataSources.Add(reportDataSource);

    string reportType = "PDF";
    string mimeType;
    string encoding;
    string fileNameExtension;

    //The DeviceInfo settings should be changed based on the reportType
    //http://msdn2.microsoft.com/en-us/library/ms155397.aspx
    string deviceInfo =
    "<DeviceInfo>" +
    "  <OutputFormat>PDF</OutputFormat>" +
    "  <PageWidth>8.5in</PageWidth>" +
    "  <PageHeight>11in</PageHeight>" +
    "  <MarginTop>0.5in</MarginTop>" +
    "  <MarginLeft>1in</MarginLeft>" +
    "  <MarginRight>1in</MarginRight>" +
    "  <MarginBottom>0.5in</MarginBottom>" +
    "</DeviceInfo>";

    Warning[] warnings;
    string[] streams;
    byte[] renderedBytes;

    //Render the report
    renderedBytes = localReport.Render(
        reportType,
        deviceInfo,
        out mimeType,
        out encoding,
        out fileNameExtension,
        out streams,
        out warnings);

    //Clear the response stream and write the bytes to the outputstream
    //Set content-disposition to "attachment" so that user is prompted to take an action
    //on the file (open or save)
    Response.Clear();
    Response.ContentType = mimeType;
    Response.AddHeader("content-disposition", "attachment; filename=foo." + fileNameExtension);
    Response.BinaryWrite(renderedBytes);
    Response.End();

} 
```

# string - 如何在 Go 中解析毫秒以来的时间戳字符串？

> ID：13294649
> 
> 赞同：20
> 
> 时间：2012-11-08T17:41:08.557
> 
> 标签：string, datetime, go

自纪元以来，我有一个毫秒的字符串（它最初来自一个`java.lang.System.currentTimeMillis()`电话）。在 Go 中将此字符串转换为人类可读的时间戳字符串的正确方法是什么？

查看[时间包](http://golang.org/pkg/time/)，我看到了该`Parse`功能，但布局似乎都是基于时区的正常时间。进入 Time 对象后，我可以使用它[`Format(Time.Stamp)`](http://golang.org/pkg/time/#Time.Format)来获取我想要的输出，但我不清楚如何将字符串放入 Time 对象中。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-08T18:13:02.313

格式字符串自纪元以来不支持毫秒，因此需要手动解析。例如：

```
func msToTime(ms string) (time.Time, error) {
    msInt, err := strconv.ParseInt(ms, 10, 64)
    if err != nil {
        return time.Time{}, err
    }

    return time.Unix(0, msInt*int64(time.Millisecond)), nil
} 
```

查看[http://play.golang.org/p/M1dWGLT8XE](http://play.golang.org/p/M1dWGLT8XE)以现场玩示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-10-07T13:10:39.617

2021 更新：您可以使用[`UnixMilli`](https://pkg.go.dev/time#UnixMilli)从整数解析。这将改善接受的答案：

```
 func msToTime(ms string) (time.Time, error) {
    msInt, err := strconv.ParseInt(ms, 10, 64)
    if err != nil {
        return time.Time{}, err
    }

    return time.UnixMilli(msInt), nil
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-29T03:15:22.373

接受的[答案](https://stackoverflow.com/a/13295158)不适用于某些日期范围，无论是在未来太远还是在过去太远，因为只能使用 64 位（从 Epoch 起正负 300 年）来描述有限的日期范围。

这将适用于毫秒描述的整个范围：

```
var Epoch = time.Unix(0, 0)

func ParseMillisecondUnixTimestamp(s string) (time.Time, error) {
    ts, err := strconv.Atoi(s)
    if err != nil {
        return time.Time{}, err
    }

    return Epoch.Add(time.Duration(ts) * time.Millisecond), nil
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-30T20:23:14.900

使用`time.Unix(ms/1000, 0)`就可以了。

首先使用众所周知的关系将 ms-timestamp 转换为 unix-timestamp `1 s = 1000 ms`，然后将结果用作`time.Unix`函数的第一个参数

# javascript - 抛出错误（'msg'）与抛出新错误（'msg'）

> ID：13294658
> 
> 赞同：213
> 
> 时间：2012-11-08T17:42:04.483
> 
> 标签：javascript, exception

```
var err1 = Error('message');
var err2 = new Error('message'); 
```

有什么不同？在 chrome 控制台中查看它们，它们看起来相同。对象上的相同属性和相同的`__proto__`链。几乎看起来`Error`就像一个工厂。

哪一个是正确的，为什么？

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2012-11-08T17:43:22.373

两者都很好；[这在规范](https://es5.github.io/#x15.11.1)中明确说明：

> ...因此，函数调用`Error(…)`等效于`new Error(…)`具有相同参数的对象创建表达式。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-08T17:46:16.513

`Error`确实像工厂一样，像其他一些本机构造函数一样：`Array`,`Object`等都检查类似`if (!(this instanceof Array)) { return new Array(arguments); }`. （但请注意`String(x)`and`new String(x)`非常不同，对于 and 也是如此`Number`。`Boolean`）

也就是说，如果发生错误，甚至不需要抛出一个`Error`对象......`throw 'Bad things happened';`也可以工作
您甚至可以抛出一个对象文字进行调试：

```
throw {message:"You've been a naughty boy",
       context: this,
       args: arguments,
       more:'More custom info here'}; 
```

# c# - PropertyChangedEventHandler 如何获取值？

> ID：13294662
> 
> 赞同：6
> 
> 时间：2012-11-08T17:42:11.130
> 
> 标签：c#, inotifypropertychanged

所以我已经将事件设置为一个类

```
 void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
    } 
```

当类的属性发生更改时它会被触发，但是我想在类似的类中进行相同的更改。以此为例

```
class A: INotifyPropertyChanged
{
   //event handler declaration

   string PhoneNumber;

   string _name;
   Public string Name {
     get { return _name;}
     set { _name = value; PropertyChanged("Name");}
   }
}

class B
{
   string Name;
   int age;
} 
```

以及 A 类的事件绑定；

```
 void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
    } 
```

我想要的是复制 A 的 Name 属性的内容并将其分配给 B 的实例。

这样做的优雅方法是什么？我的问题是知道 A 的哪个值发生了变化（在我的班级中，它不仅是名称，而且还有更多）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T17:46:06.027

使用 PropertyChangeEventArgs 的[PropertyName 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertychangedeventargs.aspx)来确定修改了哪个属性，然后使用一些逻辑将该属性设置为我正在调用的`boundItems`.

如果需要，您也可以使用 sender 对象并将其转换为适当的类型，这样可以提供更多的灵活性。Using将允许您通过仅使用 的值`Reflection`来获取和设置属性，而无需涉及真正的手工劳动，但它的开销要大得多，所以如果您经常这样做，我建议您不要这样做。 `String``PropertyName`

```
void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    switch(e.PropertyName)
    {
        case "Name":
            //You Code
            boundItem.Name = (sender as A).Name;
            break;
    } 
} 
```

或者，您可以使用反射来设置属性，而不是构建开关盒。

```
void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    //Untested Reflection example. Probably needs some modifying. 
    PropertyInfo prop = typeof(A).GetType()
              .GetProperty(e.PropertyName, BindingFlags.Public | BindingFlags.Instance);
    PropertyInfo boundProp = typeof(B).GetType()
              .GetProperty(e.PropertyName, BindingFlags.Public | BindingFlags.Instance);
    boundProp.SetValue (boundItem, prop.GetValue((sender as A),0), null);
} 
```

但是，您最好的选择是创建具有这些关系的类，这些关系内置到对象的属性中。修改属性的`get`and`set`以同时设置受影响的属性和`boundItems`属性。看起来像这样：

```
class A: INotifyPropertyChanged
{
   string PhoneNumber;
   string _name;
   B BoundItem = null;
   Public string Name {
     get { return _name;}
     set 
     { 
         _name = value; 
         if(BoundItem != null)
              BoundItem.Name = value;
     }
}

class B
{
   string Name;
   int age;
}

class Main
{
     public Main()
     {
         A item = new A();
         B boundItem = new B();
         item.BoundItem = boundItem;
         item.Name = "TEST";
         Console.WriteLine("Item Name: " + item.Name);
         Console.WriteLine("BoundItem Name: " + boundItem.Name);

         // Result:
         // Item Name: TEST
         // BoundItem Name: TEST
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-17T11:07:28.987

您必须使用反射，示例代码将如下所示

```
public class SomeClass : INotifyPropertyChanged
{

    public void OnPropertyChanged(string propertyName , object before, object after)
    {
        Type type = this.GetType();
        var val = type.GetProperty(propertyName, BindingFlags.Public | BindingFlags.Static | BindingFlags.NonPublic | BindingFlags.Instance)?.GetValue(this, null); //Contains changed value 
        if (propertyName == "Name) {
           //Do whatever you want to do with value for "Name"
        }
    }
} 
```

# mule - 骡子配置中Web服务端点中的主机名？

> ID：13294665
> 
> 赞同：1
> 
> 时间：2012-11-08T17:42:21.940
> 
> 标签：mule

我有一个骡子应用程序，需要部署在不同的服务器上。我对设置基于 HTTP 的端点地址的主机名有疑问

主机名是否应该来自属性文件，在构建时根据构建应用程序的环境替换它——

```
 Example --
    http:inbound-endpoint address="http://${host.name}:61005/my/service" exchange-pattern="request-response" 
```

或者是否可以使用主机名作为 localhost 构建可部署的应用程序并在部署时替换它

```
 Example --
    http:inbound-endpoint address="http://localhost:61005/my/service" exchange-pattern="request-response" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T01:00:42.253

您可以使用 0.0.0.0 作为主机，它将侦听服务器的每个网络接口：

```
<http:inbound-endpoint address="http://0.0.0.0:61005/my/service" exchange-pattern="request-response" /> 
```

这意味着，例如，如果您的服务器的 IP 为 192.168.0.1，它将自动在`http://192.168.0.1:61005/my/service/`

它将使您免于配置部署文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:03:36.377

属性文件可以正常工作，但请记住 Spring 的 Property Placeholder Resolver 也可以从 Java 系统属性中获取值，因此您可以`${host.name}`在启动时提供值：

```
mule -M-Dhost.name=$HOSTNAME 
```

# android - 加载第一个列表项时在第二个片段中加载项

> ID：13294666
> 
> 赞同：1
> 
> 时间：2012-11-08T17:42:28.070
> 
> 标签：android, android-listview, android-fragments

我正在尝试构建类似于[Android Fragments 教程](https://developer.android.com/guide/components/fragments.html)的内容：左侧有一个 ListView 片段，右侧有一个可以显示项目的片段。

现在，我试图通过 SimpleCursorAdapter（我通过 LoaderManager 使用）加载列表中的第一项（或不久之后）——所有这些都使用 Android 支持库。

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mAdapter = new SimpleCursorAdapter(/* options */);
    setListAdapter(mAdapter);
}

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    CursorLoader cl = new CursorLoader(getActivity());
    /* setProjection, etc */
    return cl;
}

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    mAdapter.swapCursor(data);
}

public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);
} 
```

我检查了各种示例实现，它们似乎都太简单了，或者根本没有在加载时填充右侧的片段，而只是在单击时填充。

无论如何我都需要实现`onLoadFinished`，但这对我来说太晚了，因为我正在加载一个长长的列表。所以我在想`onItemLoadedListener`我只会在第一次调用它时使用它。但似乎没有这样的东西存在，所以我很困惑。

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:47:16.910

你有什么反对太简单了？

```
 public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
     data.moveToFirst();
     Bundle b = new Bundle();
     // get info from that first item and put into the bundle
     ...

     ContentFrag f = new ContentFrag();
     f.setArguments(b);
     getSupportFragmentManager().beginTransaction().replace(R.id.contentLayout, f).commit();

     // instantiate and set your adapter
     ...
 } 
```

简单的！就像任何其他片段事务一样。

# wcf - WCF：如何从 ServiceHost (WCF 4.5) 获取创建实例的引用

> ID：13294667
> 
> 赞同：6
> 
> 时间：2012-11-08T17:42:27.487
> 
> 标签：wcf, instance, servicehost

在我的服务器端控制台程序中，创建了多个 ServiceHost 对象并在 PerSession 模式下工作，而不是单例。因此，当新会话开始时，将创建一个新的服务器端对象。

问题是：我如何知道哪个是与新创建的服务器端对象链接的正确 ServiceHost 对象？我确实需要此链接信息以进行进一步操作。

我可以从新创建的服务器端对象中获取 ServiceHost 信息吗？通过将其转换为另一个接口或类？或者，我可以挂钩ServiceHost的实例创建过程吗？

任何的想法？

非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T18:08:43.403

试试`OperationContext`- 它有一个`.Host`属性：

```
var host = OperationContext.Current.Host; 
```

有关详细信息，请参阅[MSDN 文档。](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.host.aspx)

# python - 使用 matplotlib 的 pcolormesh 时指定颜色

> ID：13294673
> 
> 赞同：7
> 
> 时间：2012-11-08T17:42:57.690
> 
> 标签：python, matplotlib

使用 matplotlib，我希望能够使用 pcolormesh 指定确切的颜色。这是我尝试过的

```
import numpy as np
from matplotlib import pyplot as plt 
```

顶部的进口

```
X = np.linspace(0,1,100)
Y = np.linspace(0,1,100)
X,Y = np.meshgrid(X,Y)
Z = (X**2 + Y**2) < 1.
Z = Z.astype(int)
Z += (X**2 + Y**2) < .5 
```

设置一堆假数据。`Z`只有`0`s、`1`s 和`2`s（这就像我真正的问题）。

```
plt.pcolormesh(X,Y,Z,color=[(1,1,0),(0,0,1),(1,0,1)]) 
```

徒劳地调用`pcolormesh`一个`color`参数，试图得到一个黄色、蓝色和洋红色的情节。事实上，我得到了默认颜色！

![彩色网格](../Images/247ccd5347f145954160086bab9cac21.png)

我的问题是：如何调用`pcolormesh`以使第一个区域为黄色、第二个蓝色和第三个洋红色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T18:14:31.420

一种方法是使用自定义颜色图：

```
import numpy as np
from matplotlib import pyplot as plt
from matplotlib import colors as c

X = np.linspace(0,1,100)
Y = np.linspace(0,1,100)
X,Y = np.meshgrid(X,Y)
Z = (X**2 + Y**2) < 1.
Z = Z.astype(int)
Z += (X**2 + Y**2) < .5

cMap = c.ListedColormap(['y','b','m'])

plt.pcolormesh(X,Y,Z,cmap=cMap)
plt.show() 
```

![显示带有黄色、蓝色、洋红色的自定义颜色图的绘图](../Images/86d88c7be133377a31939ec82531e7f6.png)

# php - 马金托！在 OnePageController 或 Success.php 上或之前或周围调用 DAL 服务器

> ID：13294676
> 
> 赞同：0
> 
> 时间：2012-11-08T17:43:00.747
> 
> 标签：php, magento, activerecord, checkout, cart

### 好的，所以我自定义了 Mage_Checkout_OnepageController

1.  我需要能够连接到 DAL 服务器并在那里保存某些东西。我得到了一切正确。它是 RESTful 的，所以我正在发送一个 POST 请求。这一切都很好。但是除了quoteData，项目详细信息等之外，我还需要发送一件事，另一件事是*magento orderId*。

2.  我知道 Magento 尚未在**Mage_Checkout_OnepageController**上创建订单 ID ，它在**Mage_Checkout_Block_Onepage_Success**上生成它。我有自己的**X_Request_Block_Checkout_Success**。在此文件中，以下代码；

    ```
    $order = Mage::getModel('sales/order')->loadByIncrementId(Mage::getSingleton('checkout/session')->getLastRealOrderId());
    $orderInfo['orderId'] = $order->getIncrementId(); 
    ```

但是在这个 Success.php 中，这次我无法获取到**Mage_Checkout_OnepageController**中得到的数据，即如下；（任何报价数据、送货地址等）

```
$jobSiteAddress = Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress()->toArray();
$quote = Mage::getSingleton('checkout/session')->getQuote();
$cartItems = $quote->getAllVisibleItems(); 
```

和其他一些事情，我希望你明白。

### 大问题

所以我的问题；有没有办法在**Mage_Checkout_Block_Onepage_Success**或我的**Mage_Checkout_OnepageController中获取***magento orderId*和所有购物车数据

****我试过了

在我的 OnePageController 我有；

```
$this->getOnepage()->getQuote()->save(); 
```

我尝试在此行之后获取 magento 订单 ID，但没有运气

如果我没有解释清楚，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:12:28.620

所以，要清楚，在magento真正生成它之前你需要一个orderId吗？你能解释一下为什么需要它吗？为什么不在订单真正生成后执行此调用（magento 销售/订单事件可以清楚地执行此操作）

无论如何，我似乎很难获得下一个 orderId（如果 10 个客户同时下单，您无法确定下一个 increment_id，如果用户尚未付款，我认为您不想创建订单）但是您应该能够确定下一个 OrderIncrementId，因为它与客户历史记录相关联...****

# maven-plugin - 使用没有压缩的 Maven 插件将多个（js）文件聚合/组装成一个（js）文件的最简单方法是什么？

> ID：13294677
> 
> 赞同：4
> 
> 时间：2012-11-08T17:43:04.570
> 
> 标签：maven-plugin, maven-assembly-plugin, yui-compressor

我想将多个 js 文件聚合/组装成一个，而不使用 maven 插件缩小或混淆它们。我已经在使用 yui 插件将一些 js 文件混淆为一个：

```
 <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>yuicompressor-maven-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <id>obfuscate</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>compress</goal>
                    </goals>
                    <configuration>
                        <nosuffix>true</nosuffix>
                        <linebreakpos>-1</linebreakpos>
                        <aggregations>
                            <aggregation>
                                <removeIncluded>true</removeIncluded>
                                <insertNewLine>false</insertNewLine>
                                <output>${project.build.directory}/${project.build.finalName}/all.js</output>
                                <includes>
                                    <include>**/*.js</include>
                                </includes>
                                <excludes>
                                    <exclude>**/include/*.js</exclude>
                                </excludes>
                            </aggregation>
                        </aggregations>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

现在**我希望在 allForDev.js 文件中聚合相同的 js 文件，而无需缩小或混淆**。目标是拥有一个用于开发的文件和一个用于生产的文件。在开发人员工具中调试时查看整个脚本会很有用。如果我找不到这样做的方法，我将被迫放置很多脚本标签来加载所有这些脚本（这不是世界末日:)，但我想以更清洁的方式来做）。

我可以看到 assemble 插件具有以下格式：

> zip tar.gz tar.bz2 jar dir war 和 ArchiveManager 配置的任何其他格式

**有没有办法可以使用 assemble maven 插件来做到这一点？**尽管我看起来有很多示例来创建 zips jars 和 wars，但没有一个与我想要做的相匹配。还是我错过了什么？

**我可以使用另一个插件吗？**

*作为旁注，我尝试使用 yui 插件的第二次执行来创建第二个 js 文件，但我没有创建 2 个文件的运气。我还尝试提供 2 个 yui 插件，但再次没有运气。我认为这也不可能。*

干杯，
暴君

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:22:58.497

答案就在 wro4j 库中。有关更精确的设置，请参见：

[Javascript 和 CSS 文件在 Maven 构建中组合，无需压缩、缩小等](https://stackoverflow.com/questions/12213998/javascript-and-css-files-combining-in-maven-build-without-compression-minificat/14103119#14103119)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T20:50:18.297

如果您不想像我一样使用 wro4j 插件（来自@despot 的回答）并想快速制作原型，您实际上可以使用`maven-antrun-plugin`具有类似配置的旧插件，如下所示：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.8</version>
    <executions>
        <execution>
            <phase>generate-sources</phase>
            <configuration>
                <target>
                    <property name="root" location=""/>
                    <property name="jsRoot" location="${root}/src/main/webapp/js"/>
                    <property name="jsAggregated" location="${root}/src/main/webapp/all.js"/>
                    <echo message="Aggregating js files from ${jsRoot} into ${jsAggregated}"/>
                    <concat destfile="${jsAggregated}" encoding="UTF-8" >
                        <fileset dir="${jsRoot}" includes="*.*"/>
                        <filelist dir="${jsRoot}/.." files="client.js"/>
                    </concat>
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

这一个连接文件夹中的所有文件`<module>/src/main/webapp/js/*.*`（但不是子文件夹中的文件）。然后它添加`client.js`到最后以确保所有东西都可用（AFAIK`<fileset>`有未定义的顺序）。

生成的连接文件然后驻留在`<module>/src/main/webapp/all.js`.

*我知道 Maven 阶段、路径和其他东西可能不是“正确的”——这只是一个简单的例子，展示了另一种非侵入性的方法。*

# python - 如何使用 python 抓取任何网站的“下载页面”

> ID：13294679
> 
> 赞同：-3
> 
> 时间：2012-11-08T17:43:13.210
> 
> 标签：python, web-scraping, beautifulsoup

我想使用 python 抓取任何站点的下载页面以提取有关版本的信息及其下载链接。我正在学习python，想用beautifulsoup 来做，但是这些页面非常复杂，而且看起来很难找到这些东西。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:48:19.060

欢迎来到堆栈溢出！--我猜你的意思是“scrape”，因为“scrap”的意思是“扔掉”。

首先，您必须使用 urllib2 创建要抓取的页面的文件对象。阅读[本文](https://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python)以了解如何操作。

然后，您必须通过检查页面的 html 内容来确定要从页面本身获取哪些信息。

最后，您将文件对象传递给 beautiful soup 的解析器，并浏览 HTML 以返回您想要获取的信息。

为了将来参考，BeautifulSoup 有*漂亮的*文档。如果你想精通编程，你必须学习如何阅读文档——从这里开始真的只会变得更难。

# java - 使用 NameValuePair 传递参数

> ID：13294684
> 
> 赞同：0
> 
> 时间：2012-11-08T17:43:23.110
> 
> 标签：java, android

我有应用程序来拍摄照片并将其发送到服务器。拍照和服务器（接受图像）完美分开运行。当我在拍照后尝试使用以下代码发送服务器时，会导致强制关闭应用程序。这是代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){
   if (resultCode == RESULT_OK){
      Uri imageUri=data.getData();
      List<NameValuePair> params = new ArrayList<NameValuePair>(1);
      params.add(new BasicNameValuePair("image", imageUri.getPath()));
      post("http://myserver-address",params);
   }
} 
```

[post 方法与使用 Http Post 发送图像](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)相同

日志猫 说：

```
java.lang.RuntimeException: Unable to resume activity
{com.john.smith/com.john.smith.Activity}: java.lang.RuntimeException:
Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null}
to activity {com.john.smith/com.john.smith.Activity}:
   java.lang.NullPointerException 
```

我认为，将参数传递给发送函数有问题。因为，我尝试禁用发送功能中的所有行，但仍然面临错误。此错误会导致强制关闭应用程序。

我该如何解决这个问题？如何将照片传递给`send`我以外的其他功能？

**更新：**

我的相机捕获代码与 [http://code.google.com/p/crw-cmu/source/browse/luis/PhotoIntentActivity/src/com/example/android/photobyintent/PhotoIntentActivity.java?r=734相同](http://code.google.com/p/crw-cmu/source/browse/luis/PhotoIntentActivity/src/com/example/android/photobyintent/PhotoIntentActivity.java?r=734)

我这样称呼它

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data){

        switch (requestCode) {
        case ACTION_TAKE_PHOTO_B: {
            if (resultCode == RESULT_OK) {
            handleBigCameraPhoto();
          Uri imageUri=data.getData();
          List<NameValuePair> params = new ArrayList<NameValuePair>(1);
          params.add(new BasicNameValuePair("image", imageUri.getPath()));
          post("http://myserver-address",params);
        }
            }
            break;
        } // ACTION_TAKE_PHOTO_B

    } // switch
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:49:03.820

日志显示`data=null`因此`Uri imageUri=data.getData();`导致 NPE。

我建议添加一些`if( requestCode == ...) {`或`switch( requestCode )`因为并非在所有情况下都设置数据。

为避免崩溃，您应该在取消引用之前检查 null`data`和`imageUri`. 在`else`子句中添加一些日志。

互联网搜索提供结果：

*   [http://www.coderzheaven.com/2011/04/25/android-upload-an-image-to-a-server](http://www.coderzheaven.com/2011/04/25/android-upload-an-image-to-a-server)（好）
*   [将图片发送到 Web 服务器](https://stackoverflow.com/questions/5415390/sending-pictures-to-a-web-server)
*   [使用 Http Post 发送图像](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)（最佳）
*   [将图片从安卓设备发送到服务器](https://stackoverflow.com/questions/6850325/sending-pictures-from-android-device-to-server)

# database - 区别概念架构和逻辑视图

> ID：13294694
> 
> 赞同：2
> 
> 时间：2012-11-08T17:43:55.217
> 
> 标签：database, database-schema

数据库的概念模式和它的逻辑视图有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:46:24.883

`Conceptual`- 捕获需要存储的基本数据以及元素之间关系的模型

`Logical view`由表的名称、它包含的属性、它们的类型、对属性的约束（如果有）组成。

看看这个：- [http://www.inf.puc-rio.br/~casanova/Publications/Papers/2007-Papers/2007-Computer.pdf](http://www.inf.puc-rio.br/~casanova/Publications/Papers/2007-Papers/2007-Computer.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-28T07:12:41.937

逻辑模式是由表表示的数据库的最终用户视图

概念模式表示计算机查看的数据，例如 sql 命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T17:08:41.320

**逻辑级别**- 是独立于 dbms 实现 **概念级别**的数据库的用户视图 -是独立于 s/w 或 h/w 实现的实体及其属性的表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-08T12:52:36.770

概念模式表示独立于实现级别的信息，通常使用图形符号

逻辑模式根据实现语言或系统的数据模型表示信息

# objective-c - 在包含 @ 字符的键的 NSDictionary 中获取 valueForKey 时出错

> ID：13294696
> 
> 赞同：6
> 
> 时间：2012-11-08T17:44:04.917
> 
> 标签：objective-c, ios, cocoa-touch, nsstring, nsdictionary

我正在尝试在以下名为“robotDesign”的 NSDictionary 中获取“@type”键的值

```
robotDesign : {
    "@id" = "2";
    "@type" = "piggyDash";
    turnAngle = "-90";
    width = "90.0";
} 
```

这是我使用的 JSON 对象的一部分

```
[NSJSONSerialization JSONObjectWithData: options: error:]; 
```

我正在使用以下代码提取@type 值

```
NSString * robot_type = (NSString*)[robotDesign valueForKey:@"@type"]; 
```

但收到以下错误：

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<__NSCFDictionary 0x71de9e0> valueForUndefinedKey:]：此类不符合键类型的键值编码。”

**注意：**请注意字典中的其他对象，如“turnAngle”和“width”，可以使用上面给出的相同代码轻松提取，但使用它们各自的键。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T17:46:56.100

尝试

```
NSString * robot_type = [robotDesign objectForKey:@"@type"]; 
```

或删除前导`@`

[来自文档：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-BBCIBCDJ)

> `valueForKey:`
> 返回与给定键关联的值。
> 
> `- (id)valueForKey:(NSString *)key`
> **参数**key 要为其返回相应值的键。请注意，使用键值编码时，键必须是字符串（请参阅“键值编码基础”）。
> 
> **返回值**
> 与键关联的值。
> 
> **讨论**如果 key 不以“@”开头，则调用 objectForKey:。如果键确实以“@”开头，则去掉“@”并使用键的其余部分调用 [super valueForKey:]。

`@`导致调用`valueForKey:`NSDictionary的超类的实现。但是 NSObject 对 key 一无所知`type`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T17:52:14.943

这是完美记录的行为。来自[NSDictionary 的类参考：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

> NSDictionary 覆盖了 'valueForKey:' 方法。如果键以“@”字符开头，则调用 super，否则调用 objectForKey：

因此，除非您有正当理由不这样做，否则您应该使用`- objectForKey:`.

# javascript - 在javascript中模拟/伪造按键

> ID：13294702
> 
> 赞同：3
> 
> 时间：2012-11-08T17:44:24.777
> 
> 标签：javascript, jquery, keypress, simulate

> **可能重复：**
> [模拟 JavaScript 键事件](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)

- 编辑 -

长话短说，我在页面上有一个 swiffy 对象，我可以使用不同的按键“控制”它，其中一个是按“P”.. 现在，如果我实际按下 P，它会执行给定的动画......下面的代码不起作用，因为该动画在 2 秒后没有发生......（我添加了警报进行测试并且它会触发，但实际的按键模拟不起作用......

如果您好奇，这纯粹是出于动画目的......我正在构建一个快速原型......也许我应该问如何控制一个快速的对象（就像字母 P 一样）而不是问如何假字母P出版社？哦

无论如何，这甚至可能吗？

- 编辑 -

提醒：我对 jQuery 和 JavaScript 很陌生，所以我为这个问题道歉。我已经在网站上搜索了我的问题并找到了一个封闭的线程，但由于我无法使其工作，我正在打开这个新线程。

所以基本上我想模拟/伪造字母 P 的按键。从那个封闭的线程看起来这是可能的，这就是我得到的：

```
setTimeout(function() { triggerP() }, 2000);
function triggerP()
{
     var evP = jQuery.Event("keypress");
     evP.which = 112;
     $(this).trigger(evP);
} 
```

我也有这个（只是想确保我有一个允许这个的正确版本）：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

上面的代码有什么问题吗？它不工作！

谢谢！

# objective-c - 在目标 c 运行时使用 objc_getClassList

> ID：13294708
> 
> 赞同：0
> 
> 时间：2012-11-08T17:44:44.340
> 
> 标签：objective-c, ios, xcode, runtime

在苹果的开源运行时文档（可在此处获取：http://opensource.apple.com/source/objc4/objc4-208/runtime/objc-runtime.h）中，苹果提供了获取应用程序中所有类的示例方法。它看起来像这样：

```
int numClasses = 0, newNumClasses = objc_getClassList(NULL, 0);
Class *classes = NULL;
while (numClasses < newNumClasses) {
    numClasses = newNumClasses;
    classes = realloc(classes, sizeof(Class) * numClasses);
    newNumClasses = objc_getClassList(classes, numClasses);
}
// now, can use the classes list; if NULL, there are no classes
free(classes); 
```

抱歉，如果这是一个蹩脚的问题，但是如果我们只是在下一行将 numClasses 设置为 newNumClasses，那么在其中使用该 while 语句的目的是什么？似乎一段时间内的块无论如何都会被执行一次，但我可能在这里完全遗漏了一些东西。有人对此有任何见解吗？

谢谢！

# installation - 将 msiexec 命令行参数传递给 msiexec 启动的子进程

> ID：13294709
> 
> 赞同：2
> 
> 时间：2012-11-08T17:44:45.760
> 
> 标签：installation, wix, command-line-arguments

由于某种原因，我需要使用命令行提供的参数更新配置文件，该文件没有被更新，所以我在 c# 中编写了一个小型实用程序应用程序，由 msiexec 启动。目的是获取此应用程序的命令行参数，以便在安装过程中打开配置文件并更新它。

我的应用程序执行得很好，但是当尝试读取父进程（msiexec）命令行参数时，我得到`C:\windows\msiexec /V`的不是我在 msiexec 命令行上指定的（我什至没有使用`/V`）

关于可能是什么问题的任何想法？如果您有更好的方法来处理此问题，请提出建议。

谢谢。

**更新：**
对不起，我正在使用 WiX 安装程序，并在命令行上启动 WiX 生成的 .msi，如下所示。

```
C:\> msiexec /I foo.msi ARG1="v1" ARG2="v2" 
```

`ARG1`并`ARG2`在 Wix 安装程序脚本中定义。

我正在查看的是一种访问命令行 params 的方法`ARG1="v1"`， `ARG2="V"`通过将由 msiexec 启动的小应用程序（该应用程序在 Wix 安装程序脚本中指定为自定义操作）。

理想情况下，当我使用`xmlFile`（也尝试`xmlConfig`过）时，我的 WiX 安装程序脚本应该能够使用 更新我的配置文件`v1`，`v2`但它没有发生，所以编写了一个应该能够读取和写入配置文件的应用`v1`程序`v2`。

使用`xmlFile`我得到以下错误：

> ExecXmlFile：错误 0x8007006e：无法加载 XML 文件：错误 25531。无法打开 XML 文件，系统错误：-2147024786 MSI (s) (E4!54) [18:11:36:714]：产品：- 错误 25531 . XML文件打开失败，系统错误：-2147024786 –</p>

没有得到任何有意义的信息。我使用 msiexec 参数`/l*v`来生成日志记录。

* * *

日志摘录：

实际上`xmlFile`应该满足我的要求，但是在使用它时出现以下错误。对此的任何帮助将不胜感激。

```
MSI (s) (E4:00) [18:11:32:110]: Executing op: ActionStart(Name=ExecXmlFile,,) Action 18:11:32: ExecXmlFile.
MSI (s) (E4:00) [18:11:32:111]: Executing op: CustomActionSchedule(Action=ExecXmlFile,ActionType=3073,Source=BinaryData,Target=ExecXmlFile,CustomActionData=1030//cloudRecognition/connectiontype130//cloudRecognition/connectionaddress192.168.128.59;192.168.128.261030//cloudRecognition/connectionport50001;50001)
MSI (s) (E4:DC) [18:11:32:113]: Invoking remote custom action. DLL: C:\Windows\Installer\MSIA419.tmp, Entrypoint: ExecXmlFile
MSI (s) (E4:EC) [18:11:32:113]: Generating random cookie.
MSI (s) (E4:EC) [18:11:32:115]: Created Custom Action Server with PID 10104 (0x2778).
MSI (s) (E4:68) [18:11:32:402]: Running as a service.
MSI (s) (E4:68) [18:11:32:403]: Hello, I'm your 32bit Elevated custom action server.
ExecXmlFile:  Error 0x8007006e: failed to load XML file:
Error 25531\. Failed to open XML file , system error: -2147024786
MSI (s) (E4!54) [18:11:36:714]: Product:  -- Error 25531\. Failed to open XML file , system error: -2147024786 
```

CustomAction`ExecXmlFile`返回实际错误代码 1603（请注意，如果翻译发生在沙箱内，这可能不是 100% 准确）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:16:56.153

在我看来，您需要在安装过程中添加一个 CustomAction。您可能需要两者或只需要一个，具体取决于您的请求。

1.  要更新配置文件，您可以使用[XmlFile CustomAction](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlfile.htm)来更改修改任何 XML 文件。
2.  启动[安静执行](http://wix.sourceforge.net/manual-wix3/qtexec.htm)CustomAction

我相信这将允许您在安装期间更改配置文件的值。[您可以在此处](http://wix.sourceforge.net/manual-wix3/qtexec.htm)找到有关 CustomAction 及其类型的精彩介绍。看看类型 2 CustomAction。

编辑回答部分中的以下问题：

CA 计划在安装过程中何时启动？
你有安装的日志文件吗？

重新编辑

如果没有代码或有关安装过程的更多信息，我真的无能为力。

有用的信息是：

1.  您的 CA 在安装顺序中的哪个位置启动？
2.  您使用什么 WiX Element 来更改文件中的值。
3.  您是否尝试创建一个仅执行您遇到问题的部分的安装程序，以隔离行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:16:08.627

您是否将参数作为 MSI 属性传递？如果是，那么您可以从 MSI 数据库中读取它们。检查这个：

[http://www.alteridem.net/2008/05/20/read-properties-from-an-msi-file/](http://www.alteridem.net/2008/05/20/read-properties-from-an-msi-file/)

我猜你正在为配置文件设置环境特定的应用程序属性？如果是这样，为什么不在配置文件中定义所有属性并使应用程序足够智能以读取正确的属性（通过检查环境）？我会那样做。

以上评论仅基于您提供的有限信息。你会有自己的理由这样做:)

# android - 切换标签时保持 VideoView (Android ICS+) 播放

> ID：13294712
> 
> 赞同：0
> 
> 时间：2012-11-08T17:45:11.020
> 
> 标签：android, android-videoview

手机只支持 Android 4.0+，没有其他第三方库。

应用程序使用 ActionBar 的导航选项卡。其中一个选项卡包含来自源的 ICS 流式直播视频的股票 VideoView 控件。当用户切换选项卡以查看信息（称为 InformationView）时，我想让 VideoView 继续播放。

在平板电脑上，我没有这个问题，因为屏幕尺寸更大，我让 VideoView 总是在屏幕上。在手机上，屏幕较小，因此必须使用选项卡。

我了解 VideoView 可能依赖于可见表面才能绘制视频帧。当用户切换选项卡时，该表面对 VideoView 不可用，因此它会自动停止。

我可以通过使用包含 InformationView 和 VideoView 的大滚动视图来解决这个问题。

有什么方法可以强制它继续播放（可能是通过绘制到不可见的表面）或者是否有第三方库通过使用巨大的滚动视图来模仿“标签”行为，这样我就不必编写更多代码？

请注意，这与此处描述的多个 VideoViews 问题不同：[一个视频视图被另一个视频视图阻止](https://stackoverflow.com/questions/5681830/one-videoview-blocked-by-another-videoview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:58:17.397

好的，解决方案是在切换选项卡时隐藏包含 VideoView 的片段，因此总是有一个“表面”视频视图可以绘制到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:39:58.080

这个概念的一个更好的实现是不使用 stock`VideoView`小部件，它实际上只是 a`SurfaceView`和 a 的结合`MediaPlayer`，而是将这两者分开并单独使用它们。如果您的应用程序`MediaPlayer`直接控制，即使在表面消失后也可以继续播放音轨。

将您的`Activity`或`Fragment`其中一个`SurfaceHolder.Callback`实例附加到`SurfaceView`将使您知道该表面何时可用于绘图或不可用于绘图。这些`MediaPlayer`方法`setDisplay()`和`setSurface()`然后将在您的应用程序中用于在每个回调在视图层次结构中可用时附加和分离视频表面。

您还可以在提出实现类似目标的自己的实现时找到`VideoView`有用的来源（[链接）。](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/VideoView.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:27:58.840

您可以自定义 VideoView 相同的默认值，但不同的是您应该控制支架表面、oncreatSurface、onchangeSurface()。

# c - 为什么我的快速排序在大输入时会崩溃？

> ID：13294715
> 
> 赞同：2
> 
> 时间：2012-11-08T17:45:26.403
> 
> 标签：c, quicksort, cilk, cilk-plus

我创建了一个中位数为 3 的标准快速排序实现，它对大量随机整数进行排序。我想增加到至少 1 亿个元素，但最好是 10 亿个。为了提高速度，我尝试在 Cilk++ 中并行化算法。该算法使用双递归，我生成 Cilk 任务来执行每个递归排序。

我的算法适用于最大为 10 000 000 的数组。没有 Cilk 关键字，我的顺序算法可以轻松处理 1 亿个元素，但是当我尝试使用 Cilk 时，程序崩溃到桌面。我现在想找出原因。我是否太快地生成了太多 Cilk 任务？

我正在使用 Windows 7 64 位、Intel++ 编译器和集成在 Visual Studio 2010 中的 Intel Parallel Studio XE 2013。该程序被编译为 32 位应用程序。存储随机数据的内存被分配为对 malloc 的单个调用，并检查指针。在中值计算中，在计算中间元素时也要注意整数溢出。

这很可能是缓冲区溢出问题。

这是我的分区：

```
int pivotvalue = medianOf3(data, low, high);
// pivot is placed next to the last element

int left = low;
int right = high - 1;
while (left < right) {
    while (data[left] < pivotvalue) {
        left++;
        if (left > high) {
            break;
        }
    }
    while (data[right] >= pivotvalue) {
        right--;
        if (right < low) {
            break;
        }
    }

    if (left < right) {
        swap(data, left, right);
    }
}

// restore pivot
swap(data, left, high - 1);
return left; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:39:10.963

我不知道 Cilk 是如何工作的，但我记得需要在嵌入式平台上修复一个快速排序实现，该实现可能会通过递归溢出堆栈。解决方法是对较小的“一半”数据使用递归调用，并在函数内部处理较大的“一半”（即尾递归）。排序（或反向排序）列表总是会触发溢出，因为调用图的深度等于列表中元素的数量。

您可以使用调试器找出导致崩溃的原因吗？您能否将数据转储到每个条目的日志文件中`swap()`，然后查看崩溃前函数调用的样子？是否可以在每次调用时转储堆栈的大小？ **每个 Cilk 任务是否都有自己的堆栈，可能小于非 Cilk 版本中使用的堆栈？**

`swap()`您可以通过向堆栈地址添加参数来跟踪堆栈使用情况。第一次调用和任何新的 Cilk 线程都使用 NULL。如果不是 NULL，则每个递归调用都使用该参数，或者使用其局部变量之一的地址来确定其堆栈的位置。转储地址差异，或在全局中跟踪它，仅在超过之前的最大值时才报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:08:23.567

英特尔 Cilk Plus（cilk++ 是不支持的不同产品）对 1024 的生成深度有限制。完全有可能溢出双端队列，这会导致崩溃。

决定在递归树中产生多深是一种平衡行为。您希望有足够的生成以允许工作被盗，但使用太多会增加开销。cilk_spawn 很便宜，但它不是免费的。如果要排序的元素数量低于某个阈值，最好在快速排序中添加一个检查，并且不要产生递归调用。

cilk_for 的好处之一是它可以根据您运行的工人数量优化产卵深度。

```
- Barry Tannenbaum
  Intel Cilk Plus Runtime Development 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T16:39:21.540

对两个子问题递归的 N 个项目的快速排序具有（最坏情况）递归深度 O(N)。通常的解决方法是“tomlogic”建议的解决方法：递归较小的子问题，迭代较大的子问题。这将递归深度减少到 O(lg N)。

该修复程序延续到并行版本。如果串行程序占用堆栈空间 S，Cilk Plus 版本最多占用堆栈空间 PS。（这个属性不适用于许多其他并行框架。）因此产生较小的子问题并迭代较大的子问题应该使总堆栈空间保持在 O(P lg N) 内。

我是*Structured Parallel Programming*一书的作者之一，该书讨论了在 Cilk Plus 和 TBB 中 Quicksort 的并行实现。快速排序的示例（完全递归和半递归）可以从[http://parallelbook.com/student](http://parallelbook.com/student)免费下载。

```
Arch D. Robison
Intel Corporation 
```

# php - 使用 php 在 web 应用程序中使用动态数组

> ID：13294718
> 
> 赞同：0
> 
> 时间：2012-11-08T17:45:46.850
> 
> 标签：php, jquery, arrays, codeigniter

我的网站依赖于用户输入提供的独特内容。

因此，他们输入“体育”，他们将收到基于体育的内容。这很简单。但是，一旦我开始向其中添加更多关键字，它就会变得有点复杂，至少在我这样做的方式上是这样。

我需要开始不断检查用户输入的数据是否为数组，并以不同的方式操作数据。

我目前正在使用 Codeigniter 的会话类存储用户的选择，然后根据其值检索和操作数据。

所以他们提交表单，我的 JS 运行：

```
$('#topics_form').submit(function() {
    var topic = document.getElementById('topics_filter').value
    $.ajax({
        type: "POST",
        url: 'ajax/update_session_topic',
        dataType: 'json', 
        data: { topic: topic },
            success: function(){
                load_custom_topics()
            }
    });
    return false;
}); 
```

然后 update_session_topic 在我的 AJAX 模型中运行

```
public function update_session_topic()
{
    if ($this->session->userdata('active_topic') == FALSE) 
    {
        $array['active_topic'] = $this->input->post('topic');
        $this->session->set_userdata($array);
        return true;
    } else {
        $this->page_model->add_session_topic($this->input->post('topic'));
        return true;
    }
} 
```

当只有 1 个值时，没什么大不了的。

但是，当尝试添加第二个值时......我不得不检查它是否是一个数组，或者让它成为一个数组。

```
 public function add_session_topic($current_filter)
    {
        $session = $this->session->userdata('active_topic');
        if (is_array($session) == false)
        {
            $session = array($this->session->userdata('active_topic'));
        } 
        foreach ($session as $keyword)
        {
            if ($keyword == $current_filter)
            {
                return false;
            }
        }
        $session[] = $current_filter;
        $active['active_topic'] = $session;
        $this->session->set_userdata($active);
        return true;
    } 
```

这也发生在我的观点中。

这有点烦人，我希望有更好的方法来做到这一点。我对 PHP/codeigniter 还是新手，所以我对任何事情都持开放态度。

谢谢！

# jquery - jQuery 动画是否在现代浏览器上使用 css3 过渡？

> ID：13294720
> 
> 赞同：5
> 
> 时间：2012-11-08T17:45:50.287
> 
> 标签：jquery, css, animation, jquery-animate, css-transitions

我正在使用 1.8+ 版本。

由于 css 过渡是硬件加速的，我想知道幕后 jQuery 的动画功能是否依赖于 css3 过渡（对于现代浏览器）。

[我在动画文档http://api.jquery.com/animate/](http://api.jquery.com/animate/)上没有看到任何提及

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:53:26.480

不，它会一步一步地快速改变内联样式属性的值，给人以动画的印象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T01:08:58.147

jQuery 尚未使用 CSS 3 可能是因为浏览器之间在实现特殊用例方面存在一些小问题。到目前为止，并非一切都是一致的，有时有些错误很难解决。

然而，有一些插件，例如 jQuery Transit，确实使用 CSS 3 动画/过渡/等。使用 Transit，您可以回退到`.animate()`像这样使用：

```
// Delegate .transition() calls to .animate()
// if the browser can't do CSS transitions.
if (!$.support.transition)
  $.fn.transition = $.fn.animate; 
```

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:55:33.397

您可以从[源代码](http://code.jquery.com/jquery-latest.js)中看到它没有使用任何 CSS3（尚未）用于动画。（要查看动画代码，请搜索“函数动画”。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T12:42:20.113

没有[jQuery](http://jquery.com/)不使用 css 过渡，但[Zepto](http://zeptojs.com/)（jQuery 兼容）对其所有动画都使用 CSS 过渡，并且比[jQuery](http://jquery.com/)执行得更好。

# selenium - 存储 selenium assertElementPresent 的结果值

> ID：13294721
> 
> 赞同：1
> 
> 时间：2012-11-08T17:45:52.750
> 
> 标签：selenium, automated-tests

我正在尝试使用以下 Selenese 语法将`assertElementPresent`方法的结果值（真或假）存储在变量中：`A`

```
storeEval | var b=assertElementPresent(//table[1]//tr[${i}]/td[1]/input[1]) | A 
```

语法不正确。我将使用什么语法来使此语句起作用？

# php - 致命错误：方法名称必须是字符串

> ID：13294723
> 
> 赞同：0
> 
> 时间：2012-11-08T17:45:58.790
> 
> 标签：php, oop, fatal-error

我收到错误：

> 致命错误：方法名称必须是第 15 行 C:\xampp\htdocs\index.php 中的字符串

第 15 行：

```
$obj = new $url[0](); 
```

代码：

```
<?php
error_reporting(E_ALL ^ E_NOTICE);

$url = $_GET['url'];
$url = explode('/', $url);

if (!file_exists('controllers/' . $url[0] . '.php')) {
    $url[0] = 'error';   // error kontroleris 
}    
require 'controllers/' . $url[0] . '.php';

$obj = new $url[0]();
$obj->$url[1](); 
```

顺便说一句：脚本还没有完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:48:30.980

实际上，这个语法：

```
$urls = array('DOMDocument');
$dom = new $urls[0]('');
var_dump( $dom ); 
```

... 即使在 PHP 5.2 中也有效（[证明](http://codepad.org/R4Dls2Wz)）。但是这条线...

```
$obj->$url[1](); 
```

... 非常有能力（另一个[证明](http://codepad.org/sUeOkpFf)）抛出与您展示的完全相同的错误，因为您不会`url`在代码中的任何地方检查数组长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:50:39.093

```
$_GET['url'] = 'foo/bar'; // temp set $_GET
$url = $_GET['url'];
$url = explode('/', $url);

if (file_exists('controllers/' . $url[0] . '.php')){
    require 'controllers/' . $url[0] . '.php';
}else{
    $url[0] = 'error'; 
}

$obj = new URL;
if(method_exists($obj,$url[0])){ // test that method exists
    echo $obj->$url[0](); // or whatever your handling may be
}

class URL{
    public function error(){
        $return = 'this is for the error handling';
        return $return;
    }
} 
```

# jquery - 来自动态 dom 的目标 .each

> ID：13294725
> 
> 赞同：-1
> 
> 时间：2012-11-08T17:46:04.417
> 
> 标签：jquery

`.each`
我有一些动态 DOM 元素，当我延迟加载元素时，我想使用这些元素，但`.each`似乎并没有发现它。
我怎样才能使这项工作？

```
setTimeout(function(){ 
    $('body').append('<div id="nav">'+
        '<ul>'+
            '<li><a>button 1</a></li>'+
            '<li><a>button 2</a></li>'+
            '<li><a>button 3</a></li>'+
        '</ul>'+
    '</div>');
}, 1000);

$("#nav ul li").each(function (index) {
    $(this).delegate('a', 'click', function(){
        alert(index); //NOTHING HAPPENS
        return false;
    });
}); 
```

谢谢苏珊斯继承我的小提琴：http: [//jsfiddle.net/nalagg/rN9tJ/1/](http://jsfiddle.net/nalagg/rN9tJ/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:48:54.817

看起来就像`the #nav is not a static parent`在关联点击事件时它仍然没有插入到 DOM 中。

所以`attach it to a higher static parent`。

另外，您首先不需要循环..

**将活动委托**给`body`

```
$('body').delegate('#nav ul li a', 'click', function(){
        alert(index); 
        return false;
 }); 
```

.delegate() 也在最新版本中被弃用.. 使用 .on() 代替..

```
$('body').on('click', '#nav ul li a', function(){
       alert(index); 
       return false;
 }); 
```

# uitableview - 带有 sectionNameKeyPath 的 NSFetchedResultsController

> ID：13294732
> 
> 赞同：0
> 
> 时间：2012-11-08T17:46:25.353
> 
> 标签：uitableview, core-data, nsfetchedresultscontroller

我目前正在开发一个项目，我使用 UITableView 和 NSFetchedResultsController 来存储我的数据。我面临的问题是使用部分不起作用。

我想显示为表格的实体具有以下特征：

*   频道（字符串）
*   服务器（字符串）
*   名称（字符串）

我希望有基于服务器的部分，每个部分中的行是频道。布局将如下所示：

*   服务器
    1 通道 1 通道
    2
*   Server2
    Channel3
    Channel4
    等。

但问题是，当我尝试在 NSFetchedResultsController 中插入/删除/更改元素时，应用程序会收到如下异常：

> CoreData：错误：严重的应用程序错误。在调用 -controllerDidChangeContent: 期间，从 NSFetchedResultsController 的委托中捕获了一个异常。无效更新：无效的节数。更新后表视图中包含的节数（3）必须等于更新前表视图中包含的节数（2），加上或减去插入或删除的节数（0插入，0已删除）。与用户信息（空）

我做了一些研究，人们说这是因为 UITableViewController 委托首先触发并尝试显示当时不存在的元素/部分。我还没有找到解决方案，这就是我在这里的原因。

这是我的 NSFetchedResultsController 委托方法

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}  

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
   atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
  newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;
    NSLog(@"--- Core Data noticed change");
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}  

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
} 
```

非常感谢
罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:41:42.720

您还必须实施

```
 controller:didChangeSection:atIndex:forChangeType: 
```

委托函数，否则表格视图将不会被通知核心数据存储中插入或删除的部分。

[您可以在NSFetchedResultsControllerDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)中找到一个示例实现。

# javascript - 寻找一个简单的 javascript 标准计算器

> ID：13294733
> 
> 赞同：0
> 
> 时间：2012-11-08T17:46:27.077
> 
> 标签：javascript, calculator

我正在寻找一个现有的功能齐全、简单的标准计算器。我在网上看过几个，但没有什么能真正满足我的需求。

我需要它只是 javascript（没有 Flash，但我不在乎它使用什么 javascript 库，如 jQuery、prototype 等），外观中规中矩，具有您从普通手持计算器获得的功能（就像在[这里](http://delimiter.com.au/wp-content/uploads/2011/04/calculator.jpg)找到的一样）。

基本上，它只需要 0-9 位数字、小数点、+-*/=、清除和 (+/-) 键。平方根和（M）内存不是必需的，但没关系。

我能找到的最接近的是 Keith Wood 的[jQuery 计算器](http://keith-wood.name/calculator.html)，但它有点让人头疼，而且它更适用于即时弹出计算。我正在寻找独立的东西，没有时髦的行为，与页面没有关系，只是看起来和行为像计算器的东西。

我可以在一两天内自己建立一个，但我真的没有时间。

它不一定是免费的——我们愿意为一个像样的工具付费。

考虑到所有这些，有人有什么想法吗？谷歌没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:50:17.270

看看这个：[https ://github.com/rcoelros/jquery-blackCalculator](https://github.com/rcoelros/jquery-blackCalculator)

这是一个[演示](http://blackhauz.com.br/blog/wp-content/examples/black_calculator/)

# assembly - MIPS 中用于无符号数减法的溢出条件

> ID：13294736
> 
> 赞同：0
> 
> 时间：2012-11-08T17:46:33.603
> 
> 标签：assembly, mips, unsigned

MIPS 中的无符号数减法何时发生溢出？

我在谷歌上找不到答案。我设计了无符号数加法溢出的算法，但无法弄清楚无符号减法..

谁能告诉我？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:52:35.453

当减数大于被减数时，你会得到溢出。

```
a - b, if b > a then set overflow 
```

# windows - 如何在 Visual Studio 中使用安装项目安装 Windows 服务

> ID：13294742
> 
> 赞同：0
> 
> 时间：2012-11-08T17:46:48.757
> 
> 标签：windows, service

我想使用单个 setup.msi 将 Windows 服务与另一个桌面应用程序一起安装。可能吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:56:55.527

是的，在安装项目中，右键单击项目并选择`Add/Project Ouput`选择您的 Windows 服务项目。然后转到`Custom Action Editor`，对于每个操作，右键单击它并选择`Add Custom Action`，将显示一个弹出窗口，在其中选择 Windows 服务输出。对所有自定义操作执行此操作，您就完成了。

# html - 可以将 select 放入图例中

> ID：13294746
> 
> 赞同：1
> 
> 时间：2012-11-08T17:47:07.440
> 
> 标签：html, css

`select`将菜单放在 a 中是否可以接受 html 语法`legend`？

```
<fieldset>
    <legend>
        <select id="leg_sel">
           <option>asdf</option>    
           <option>asdf</option>  
           <option>asdf</option>  
        </select>     
    </legend>
    Name: <input type="text"><br>
    Email: <input type="text"><br>
    Date of birth: <input type="text">
</fieldset>​ 
```

[http://jsfiddle.net/loren_hibbard/xFpkp/](http://jsfiddle.net/loren_hibbard/xFpkp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:58:33.197

是的，语法允许。[从 HTML 4.01 规范](http://www.w3.org/TR/html4/interact/forms.html#edef-LEGEND)：

```
<!ELEMENT LEGEND - - (%inline;)*       -- fieldset legend --> 
```

这意味着允许任何内联内容，并且内联内容包括表单字段。

它是否有用或语义正确是另一个问题。该`legend`元素被定义为封闭的标题`fieldset`。

# javascript - 基于触摸事件（android、手机间隙）更新后 DOM 未重新渲染

> ID：13294747
> 
> 赞同：1
> 
> 时间：2012-11-08T17:47:10.610
> 
> 标签：javascript, android, cordova

我注意到 Android 的 webview 存在问题。我在 xperia nxt 上运行 Android 4.0.4。我不确定这个问题是否会出现在其他 Android 设备上。

问题是，我使用的是 iScroll4，当滚动结束时，我更新了 DOM。问题是，Android 设备不会重绘视图。如果我点击屏幕（不需要点击），视图会随着我的更改而更新。起初我以为 iScroll4 没有注册我的 touchend 事件，所以我在 scrollend 上使用 console.log。果然，iScroll 毫无问题地调用了我的函数。我真的不知道是什么原因造成的。当设备开始有点滞后时似乎会发生这种情况（也许它正在后台执行某些过程？）

更奇怪的是，如果我将我的函数设置为 400 毫秒（有时更低的错误），视图会毫无问题地更新。

无论哪种方式，任何帮助都将不胜感激。

谢谢，

凯尔

*   编辑 -

此处的解决方案：[Android WebView 呈现空白/白色，视图不会在 css 更改或 HTML 更改时更新，动画不连贯](https://stackoverflow.com/questions/13500452/android-webview-renders-blank-white-view-doesnt-update-on-css-changes-or-html)

# java - 游戏编程ai：爬墙寻找玩家？

> ID：13294752
> 
> 赞同：7
> 
> 时间：2012-11-08T17:47:32.527
> 
> 标签：java, game-ai

我一直在研究这种人工智能方法。`int`如果一堵墙挡住了通往玩家的道路，它基本上有一个敌人可以去的每个方向。这在大多数情况下不起作用。有时敌人会穿过它无法穿过的裂缝。其他时候，它会卡在有明显缝隙的墙上。我将附上我的代码，但如果它看起来效率太低或者不是解决它的方法，我不反对完全改变我的方法。我只是想知道这些事情是如何正常完成的，以便我可以以更好（并且有效！）的方式实现它。

我的代码：

```
 public void update(ArrayList<Wall> walls, Player p){

    findPlayer(p.getX(), p.getY());

    boolean isCollision = false;
    System.out.println(isCollision);
    //if movement straight towards the player is blocked, move along the walls
    for(Wall w : walls){
        if(Helper.isBoundingBoxCollision((int)(x + vectorToPlayer.getDX() * SPEED), (int)(y + vectorToPlayer.getDY() * SPEED), width, height, w.getX(), w.getY(), w.width, w.height)){
            isCollision = true;

            if(Math.abs(vectorToPlayer.getDX()) > Math.abs(vectorToPlayer.getDY())){
                if(vectorToPlayer.getDX() > 0)
                    WALL_COLLISION = 3;
                else
                    WALL_COLLISION = 1;
            }
            else if(Math.abs(vectorToPlayer.getDX()) <     Math.abs(vectorToPlayer.getDY())){
                if(vectorToPlayer.getDY() > 0)
                    WALL_COLLISION = 0;
                else
                    WALL_COLLISION = 2;
            }

        }
    }
    //System.out.println(isCollision);
    //set the direction to the straight on vector, to be reset if there is a collision on this path
    direction = vectorToPlayer;

    if(isCollision){
        //reset the variable, don't mind that what this is named is completely opposite = PIMPIN'
        isCollision = false;

        //scale dem walls son, and see when the path is clear
        for(Wall w : walls){
            if(WALL_COLLISION == 0 && !Helper.isBoundingBoxCollision(x + SPEED, y, width, height, w.getX(), w.getY(), w.width, w.height)){
                WALL_COLLISION = 3;
                isCollision = true;
            }
            else if(WALL_COLLISION == 1 && !Helper.isBoundingBoxCollision(x, y + SPEED, width, height, w.getX(), w.getY(), w.width, w.height)){
                WALL_COLLISION--;
                isCollision = true;
            }
            else if(WALL_COLLISION == 2 && !Helper.isBoundingBoxCollision(x - SPEED, y, width, height, w.getX(), w.getY(), w.width, w.height)){
                WALL_COLLISION--;
                isCollision = true;
            }
            else if(WALL_COLLISION == 3 && !Helper.isBoundingBoxCollision(x, y - SPEED, width, height, w.getX(), w.getY(), w.width, w.height)){
                WALL_COLLISION--;
                isCollision = true;
            }
        }

        //if there is NOT a wall on the designated side, set the vector accoridingly
        if(isCollision){
            if(WALL_COLLISION == 0)
                direction = new NVector(0, 1);
            else if(WALL_COLLISION == 1)
                direction = new NVector(1, 0);
            else if(WALL_COLLISION == 2)
                direction = new NVector(0, -1);
            else if(WALL_COLLISION == 3)
                direction = new NVector(-1, 0);
        }
    }
    x += Math.round(direction.getDX()*SPEED);
    y += Math.round(direction.getDY()*SPEED);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:53:17.347

您当前尝试实现的似乎是 Steering，但通常完成这些事情的方式是[Pathfinding](http://en.wikipedia.org/wiki/Pathfinding)。您决定使用哪个取决于您的应用程序。转向是通过向目标移动但如果有障碍物改变方向来完成的，并且不能保证到达目的地。寻路通常是通过构建一个“可步行”的路点或区域图，然后使用[诸如 Dijkstra 之类的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)来遍历它来完成的。

# android - 项目长按上的 Android 4.0+ 列表选择器 - 需要持久 - 不工作

> ID：13294755
> 
> 赞同：4
> 
> 时间：2012-11-08T17:47:48.943
> 
> 标签：android, listview, android-4.0-ice-cream-sandwich

我看过很多关于这个问题的帖子，但似乎没有一个有效。所以这里。

我正在 ICS / JB 中测试我的 Android 应用程序。我有一个项目列表，长按该列表上的一个项目，我将显示一个上下文操作栏。

一旦操作栏弹出，列表选择器就会丢失。只要操作栏保持不变，我希望它保持持久。

我使用了选择器。1 用于列表选择器，另一个用于列表项选择器。我也尝试过激活状态。

唯一最终起作用的是当我手动更改项目单击侦听器的背景时。但是，跟踪选择了哪些项目以及没有选择哪些项目并根据它们的状态重置它们变得太复杂了。

当在其上下文中执行操作时，是否有一种直接的方式可以突出显示列表项。

请指教。我对这个问题发疯了。

回应 Al：在其中一种排列中，选择确实出现但不会消失。

如果我关闭上下文操作栏或选择栏中的菜单项，它会保留。如果我再次选择相同的项目，它会保留。

唯一的方法是单击列表中的另一个项目，然后选择转移到新项目。

项目选择：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
           <item 
    android:state_selected="true" 
    android:drawable="@android:color/black" />
            <item 
    android:state_activated="true" 
    android:drawable="@android:color/holo_blue_bright" />  
           <item 
    android:state_activated="true" android:state_focused="false"
    android:drawable="@android:color/holo_orange_light" />   
           <item 
    android:state_focused="true" 
    android:drawable="@drawable/selectedrow" />
      <item 
    android:state_pressed="true" 
    android:drawable="@android:color/holo_green_dark" />
       <item android:state_focused="false"
    android:drawable="@android:drawable/btn_radio" />
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:09:00.213

如果您的选择器设置正确，则将 onItemLongClick 上收到的视图设置为 selected 应该这样做

```
public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    arg1.setSelected(true);
    return true;
} 
```

# java - 在 Libgdx 中使用对象池

> ID：13294757
> 
> 赞同：2
> 
> 时间：2012-11-08T17:48:02.527
> 
> 标签：java, android, libgdx

我正在创建一个使用 Entity 对象类的 android 游戏，然后将其扩展为许多不同的类型（即敌人、子弹等）。有没有办法创建一个实体类型的池，然后将获得的实体对象转换为我在运行时需要的任何东西（比如子弹类型）？将实体作为参数传递给构造函数只会破坏池的目的，对吗？下面是一个例子：

```
public class EntityPool extends Pool<Entity> { 

public EntityPool (int initialCapacity, int max) {
    super(initialCapacity, max);
}

protected PooledEntity newObject () {
    return new PooledEntity();
}

public Entity obtain (int objectType) {
    Entity ent = super.obtain();
    if (objectType==SOME_OBJECT_TYPE)
                //Do something to make ent into that object type
    return ent;
}

public class PooledEntity extends Entity {
    PooledEntity () {
        super(null, 0, 0);
    }

    public void free () {
        EntityPool.this.free(this);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:03:35.477

对象池的重点通常是避免系统分配和释放开销，并要求您知道要分配的每种实体类型的数量的“最坏情况”限制。因此，假设您的实体在生命周期和使用方面有很大不同，您可能希望为每个实体拥有单独的池。（您绝对可以像@zaske 的回答那样改善游泳池。）

另一方面，如果你真的想要一个单一的`Entity`池，并且你想在运行时自定义这些实体，你可以从使用实体子类更改为：

```
class Entity {
   EntityCustomizer custom;
   ...
} 
```

然后，当`Entity`从池中取出一个时，您传入一个`Bullet`或`Ship`任何定制器对象：

```
public Entity obtain (int objectType) {
  Entity ent = super.obtain();
  if (objectType==SOME_OBJECT_TYPE)
    ent.custom = EntityCustomizer.SOME_OBJECT_TYPE_IMPL;
  return ent;
} 
```

（我很确定这是一个众所周知的模式，我应该使用适当的语言来识别部件......）

总而言之，我认为每种实体类型的单独池是可行的方法，因为我的解决方法非常hacky（你正在交易一堆编译时类型检查以获得一些运行时灵活性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:11:18.450

使用您当前的代码，您的池可以存储作为实体或实体子类的任何对象。因此，您只能使用`instanceof`, 或 downcast 来获取具体对象的类型。

如果您希望每种类型有不同的池，可以考虑将池的声明更改为：

```
public class EntityPool<T> extends Pool<T extends Entity> 
```

然后例如有：

```
EntityPool<Bullet> bulletsPool = new EntityPool<Bullet>(); //only objects of Bullet of sub classes can be added 
```

# cgal - 在 cgal 的精确内核中使用像 uint64_t 这样的数据类型

> ID：13294759
> 
> 赞同：2
> 
> 时间：2012-11-08T17:48:07.023
> 
> 标签：cgal

我从 CGAL 开始。我想做的是创建坐标为数字〜2 ^ 51的点。

```
typedef CGAL::Exact_predicates_exact_constructions_kernel K;

typedef K::Point_2 P;

uint_64 x,y;
//init them somehow
    P sp0(x,y); 
```

然后我得到一个很长的模板错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:52:58.683

CGAL Number 类型仅被记录为与 int 和 double 互操作。我最近添加了一些代码，以便我们可以从 long 构造更多数字（Eigen 需要），并且您的代码将在 uint64_t 为 unsigned int 或 unsigned long 的平台上的 CGAL 的下一个版本中工作（除了您输入错误的 uint64_t）（不是窗户）。对于 long long 的支持，由于我们的许多数字类型都基于其他库 (GMP)，这些库本身还不支持 long long，因此可能需要稍等片刻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:28:05.317

我猜你意识到改变内核可能会对你的程序产生其他影响。

关于您最初的问题，如果您的整数值小于 2^51，那么它们完全适合双精度数（带有 53 位尾数），因此一个简单的选择是将它们转换为双精度数，如：

```
P sp0((double)x,(double)y); 
```

否则， Exact_predicates_exact_construction_kernel 的主要数字类型应该能够读取您的 uint64 值（如果在您的平台上可以，可以将它们转换为 unsigned long long ）：

```
typedef K::FT FT;

P sp0((FT)x,(FT)y); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T18:15:32.357

好的。我认为我找到了解决方案。问题是我使用了只支持双精度的精确内核，切换到不精确的内核解决了这个问题。也可以只使用双倍。（其中一项要求是使用支持高达 2^48 的整数的数据类型）。

# google-apps-script - 获取所有 http 标头

> ID：13294764
> 
> 赞同：1
> 
> 时间：2012-11-08T17:48:20.677
> 
> 标签：google-apps-script

[HTTPResponse.getHeaders()](https://developers.google.com/apps-script/class_httpresponse#getHeaders)返回一个键值映射。问题是当有多个具有相同名称的标头时（例如，通常有多个“set-cookie”标头），因为您只能访问最后定义的一个。

如何访问所有同名标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:09:01.623

尝试`getAllHeaders()`为每个键返回一个值数组（正是因为这个原因）。

# css - JavaFX CSS：无法找到单独文件夹中的图像

> ID：13294779
> 
> 赞同：1
> 
> 时间：2012-11-08T17:49:10.353
> 
> 标签：css, png, javafx-2, filepath

我正在尝试使用 javaFX 库制作一个 java 小程序，但我遇到了一个不寻常的问题。我有使用 png 图像的 CSS 格式的切换按钮，但是当我将图像放入图像文件夹时，程序无法找到它们。问题线是：

```
-fx-border-image-source: url("left-btn.png");

// versus

-fx-border-image-source: url("images/left-btn.png");
// or
-fx-border-image-source: url("./images/left-btn.png"); 
```

只要图像与使用它们的 java 类位于同一文件夹中，它就可以正常工作，但是一旦将它们移动到图像文件夹中，类就找不到它们。CSS 文件可以移动并且仍然可以找到，但图像不能。上面的后两行以及我能够想出的它们的任何变体都无法找到 png 文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T14:19:37.170

正确的语法是（当图像是 1 级并在文件夹“图像”内）：

```
.image-background {
     -fx-background-image: url("../images/background.jpg");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:29:20.100

万一因为它还没有回答：

-fx-border-image-source: url("../images/left-btn.png");

当图像文件夹与您的课程文件夹位于同一级别时

# c# - EF 5 Code First DbMigration 自动化

> ID：13294780
> 
> 赞同：0
> 
> 时间：2012-11-08T17:49:10.370
> 
> 标签：c#, .net, entity-framework, ef-code-first

我将 EF 5 与代码优先方法一起使用。

我无法将`DateTime`列的默认值设置为`(getdateutc())`

我想要做的是让 EF 设置具有指定此值的表，并且我发现它可能的唯一方法是使用`DbMigrations`（Up 和 Down 方法）。还有其他方法吗？

我有一个看起来像这样的基类

```
 public abstract class BASE_AUDITED : BASE
 {              
      [IgnoreDataMember, IgnoreMap]
      public DateTime Created { get; set; }

      [IgnoreDataMember, IgnoreMap]
      public DateTime Modified { get; set; }

      [MaxLength(50)]
      [IgnoreDataMember, IgnoreMap]
      public string CreatedBy { get; set; }

      [MaxLength(50)]
      [IgnoreDataMember, IgnoreMap]
      public string ModifiedBy { get; set; }
 }

 public abstract class BASE 
 {
      [IgnoreMap]
      public int id { get; set; }
 } 
```

还有一堆继承自它的类。我想做的是能够`fluentAPI`在 DBMigrations Up 方法中访问模型（用于映射），并在那里编写一个循环来处理所有继承自的对象`Base_audited`

换句话说，我试图避免为我添加的每个对象编写以下代码，

```
AlterColumn("T70_AccountService.CONTACT", "TestClmn", c => c.DateTime(nullable: false, defaultValueSql: "(getutcdate())")); 
```

而是有这样的东西

```
 var types = ReflectionHelper.TypesImplementingInterface(typeof (BASE_AUDITED));
            foreach (var type in types)
            {
               var tableName = Context.FindTableNameFor(type);
               AlterColumn(tableName , "Created", c => c.DateTime(nullable: false, defaultValueSql: "(getutcdate())"));
               AlterColumn(tableName , "Modified", c => c.DateTime(nullable: false, defaultValueSql: "(getutcdate())"));

            } 
```

简而言之 - 我在 DbMigrations Up 方法中找不到对象映射到哪个表。

```
 var tableName = Context.FindTableNameFor(type); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:32:43.733

我已经实现的解决方案，并且似乎在一些开销（重新创建约束）的情况下工作正常，是使用`Seed`迁移配置的“”方法：

```
 protected override void Seed(AccountServiceEntities context)
        {
            //  This method will be called after migrating to the latest version.

            #region SET Defaults for Audit Fields

            var types = ReflectionHelper.GetEnumerableOfType<BASE_AUDITED>();
            foreach (var type in types)
            {
                var method = typeof(ContextExtensions).GetMethod("GetTableName");
                var generic = method.MakeGenericMethod(type.GetType());
                var table = generic.Invoke(this, new object[] { context });

                var constraintName = string.Format("DF__{0}__", type.GetType().Name);

                CreateDefaultCronstraint(context, table, constraintName, "Created");
                CreateDefaultCronstraint(context, table, constraintName, "Modified");

            }

            #endregion... 
```

这是修改后的 Context 扩展类，它从 Context public static class ContextExtensions {

```
 public static string GetTableName<T>(this DbContext context) where T : class
    {
        var objectContext = ((IObjectContextAdapter)context).ObjectContext;
        return objectContext.GetTableName2<T>();
    }

    public static string GetTableName2<T>(this ObjectContext context) where T : class
    {
        var sql = context.CreateObjectSet<T>().ToTraceString();
        var regex = new Regex("FROM (?<table>.*) AS");
        var match = regex.Match(sql);

        var table = match.Groups["table"].Value;
        return table;
    }
} 
```

# image - 从 MJPG 数据包到 Java 中的 jpeg 文件的有效方法

> ID：13294782
> 
> 赞同：2
> 
> 时间：2012-11-08T17:49:22.307
> 
> 标签：image, udp, mjpeg

专业摄像机通过 UDP 和 RTP 向我发送数据包，其中包含 YUV422 像素格式 (RFC 2435) 的 MJPG 数据。通过使用 DatagramSocket 和 DatagramPacket 类，我能够接收数据包。现在我正在寻找一种有效的方法来获取：

大约 80 * RTP_socket.receive(rtpPacket) ---> 1 jpg-File on my Harddisk (with 25 fps)

否则我很快就会丢失相对多的数据包，因为根据 UDP 标准，数据包是由相机连续发送的（偶尔丢失一个包并不是最糟糕的，因为我不需要每一帧）。

现在我正在使用 ByteBuffer 顺序存储数据包（使用 put (.. int offset...) 切断标头，直到我得到一帧的最终数据包。

但不幸的是，我似乎需要使用 ImageIO.write 函数来获取必要的 jpg-Header，对吗？因为它不能直接处理 ByteBuffer...

如果我会在另一个线程（尚未实现）中对图像进行一些后处理，那么 DirectByteBuffer 是否有意义？

希望你明白我在问什么：）。如果没有，请不要犹豫，问

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T22:30:37.243

你可以移植这个 C# 实现，它很容易实现超过 100 FPS :)

[https://net7mma.codeplex.com/SourceControl/latest#Rtp/RFC2435Frame.cs](https://net7mma.codeplex.com/SourceControl/latest#Rtp/RFC2435Frame.cs)

我是作者，如果您需要移植帮助，请告诉我！

# jquery - jQuery：Accordian Toggle - 当兄弟姐妹打开时关闭 Div

> ID：13294783
> 
> 赞同：2
> 
> 时间：2012-11-08T17:49:23.773
> 
> 标签：jquery, toggle

我有一个手风琴开关，目前工作正常，但我想要它，所以一次只能展开一个项目。当您打开一个项目并打开另一个项目时，我希望原始项目关闭。

关于我应该添加到我的代码中以使其正常工作的任何想法？

这是代码：

```
$(document).ready(function() {

$('.internal').hide();

$('.slider').click(function() {

    $(this).next('.internal').slideToggle();
}).toggle(function() {
    $(this).children("span").html("minus sign");
}, function() {
    $(this).children("span").html("plus sign");
});

}); 
```

我在这里设置了一个小提琴：http: [//jsfiddle.net/Lg9Mn/17/](http://jsfiddle.net/Lg9Mn/17/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:53:44.130

在显示正确的元素之前，只需使用类`internal`（使用）隐藏所有元素：`slideUp`

```
$(document).ready(function() {

    $('.internal').hide();

    $('.slider').click(function() {
        $('.internal').slideUp();
        $('.slider').not($(this)).children("span").html("plus sign");
        if($(this).next('.internal').css("display") == "none"){
            $(this).next('.internal').slideDown();
            $(this).children("span").html("minus sign");
        }else{
            $(this).next('.internal').slideUp();
            $(this).children("span").html("plus sign");
        }
    })
}); 
```

[http://jsfiddle.net/Lg9Mn/30/](http://jsfiddle.net/Lg9Mn/30/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:57:00.517

试试这个代码

```
$(document).ready(function() {

    $('.internal').hide();

    $('.slider').click(function() {
        $('.internal').not($(this).next('.internal')).hide();
        $('.slider').not($(this)).children("span").html("plus sign");

        if( $(this).next('.internal').is(':visible')){
            $(this).children("span").html("plus sign");
        }
        else{
            $(this).children("span").html("minus sign");
        }
        $(this).next('.internal').slideToggle();
    });
}); 
```

需要将此添加到您的点击事件中

```
$('.internal').not($(this).next('.internal')).hide(); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/Lg9Mn/32/)**

# ios - IOS分配的对象在这个执行路径后面没有被引用retain count +1

> ID：13294784
> 
> 赞同：7
> 
> 时间：2012-11-08T17:49:26.983
> 
> 标签：ios, sdk, memory-leaks, instance-variables, self

在我的 appDelegate.h 文件中，我这样做：

```
CLLocationManager       *locationManager; 
```

和

```
@property (nonatomic, retain) CLLocationManager *locationManager; 
```

然后在 .m 文件中：

```
...

@synthesize locationManager;
...
if ([CLLocationManager locationServicesEnabled])
{

    [myGizmoClass setLocationManagerDisabled:FALSE];

    self.locationManager = [[CLLocationManager alloc] init];

    self.locationManager.delegate = self;

    [self.locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

    [self.locationManager setDistanceFilter:kCLDistanceFilterNone];

    [self.locationManager startUpdatingLocation];

... 
```

然而我在 XCode 4.5 中得到了以下内容（见附图）

![对象泄露：此代码执行路径后面未引用分配的对象](../Images/68d6434f2e92e49dc1704da451885ae5.png)

（对象泄露：此代码执行路径后面没有引用分配的对象）

有没有搞错？我在该行之后立即引用它。

我没有看到这个问题。PS：没有崩溃，或任何东西。让我说清楚。这**是**按原样工作的。我只是讨厌这个错误。我很确定我错过了一些愚蠢的东西。任何人都可以帮忙吗？

*请不要发布任何关于“你不必再做@property”等的内容了。这段代码是为 xcode 3.5-4~ish 写回的，我更喜欢具体一点，因为我讨厌必须在两者之间来回切换XCode 4.5 允许的简写以及旧项目需要什么（并且仍然在其源代码中）。所以我仍然使用 .h 文件中的完整定义。我认为编程风格的重大变化将伴随着应用程序的下一次重大更新。（感谢您的理解）*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T17:54:32.550

## 问题

如果这不是 ARC（我认为是），那么请考虑一下它是如何工作的：

```
self.locationManager = [[CLLocationManager alloc] init];
    ^                                        ^
    Retains on setting                       |
                                             Retains when allocating 
```

## 为什么在我设置属性时会保留它？

```
@property (nonatomic, retain) CLLocationManager *locationManager;
                         ^
                    This is why 
```

当您合成一个属性时，您正在生成一个 getter 和 setter（在大多数情况下）。和关键字为合成提供提示`nonatomic`；包装设置并进入以确保一次只有一个线程对其进行操作，并告诉设置器保留您输入的任何值。**需要注意的是（对于旧版本的 Xcode 无论如何，不​​是 4.5），如果你不合成，那么这些将不会生效**`retain``nonatomic``@synchronized(self)``retain`

 *** * *

就您而言，您保留了两次。因此，如果任何地方都没有释放，那么内存就会泄漏。修复很简单，只需使用：

```
self.locationManager = [[[CLLocationManager alloc] init] autorelease]; 
```

## 为什么会这样？

如果没有，那么从方法返回的自动释放对象将无法正确保留！

## 替代解决方案

如果您不喜欢添加自动释放，只需分配给底层实例变量即可。

```
locationManager = [[CLLocationManager alloc] init]; 
```

## 在所有情况下...

确保在最合适的时间释放你拥有的东西，这些不会自动释放。对于保留的属性，`self.locationManager = nil`就足够了。对于替代解决方案，您需要执行`[locationManager release];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:54:10.540

被`@property`定义为`retain`。因此以下行：

```
self.locationManager = ... 
```

这在语义上等同于：

```
[self setLocationManager:...] 
```

保留右侧的任何内容。但是您在右侧提供的是拥有参考。所以：

```
[[CLLocationManager alloc] init] // gives an owning reference

self.locationManager = ...       // retains your owning reference; you've now
                                 // incremented the reference count twice 
```

您的位置管理器将被泄露。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T17:54:45.643

检查此代码：

```
CLLocationManager *location = [[CLLocationManager alloc] init];

self.locationManager = location;

[location release]; 
```

或者你需要这样做：

```
self.locationManager = [[[CLLocationManager alloc] init] autorelease]; 
```

`[[CLLocationManager alloc] init]`使到`retainCount`1。

`self.locationManager`使`retainCount`to 增加 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T17:57:24.487

在@property 中，我看到您已表明您希望 locationManager 保留。因此，为 self.locationManager 分配一些东西会将保留计数增加到 1。但是，由于您还调用了 alloc，因此现在将保留计数增加到 2（这将导致泄漏）。

**解决方案**：从 alloc 语句中删除 self：

> locationManager = [[CLLocationManager alloc] init];**

# php - Magento，使用 SQL 以编程方式将类别添加到脚本中的产品

> ID：13294786
> 
> 赞同：5
> 
> 时间：2012-11-08T17:49:35.247
> 
> 标签：php, sql, magento

我正在确定以编程方式将类别添加到产品的最佳方式。类别是从 magento 安装之外的第三方数据获得的，然后我解析这些数据并想要更新 magento:“catalog_category_product”表，将找到的类别与其各自的产品相关联。

在“catalog_category_product”中将类别添加到产品关联作为测试后，该类别未出现在 magento 前端站点上。经过更多搜索后，我在“catalog_category_product_index”表中添加了一个条目，该产品现在显示在前端站点上的正确类别中。

这就是所有必要的吗？恐怕还有与产品和类别相关的额外 magento 事件挂钩，它们可能正在更新我不知道的其他表。

我可以使用 SQL 将行添加到这两个表中而不会发生意外，还是我需要加载 magento 应用程序并通过 EAV 产品和类别模型执行此操作？我在正确的轨道上吗？

**更新**

我实际上并没有“导入”任何新数据。产品和类别已经在系统中就位。我也没有添加任何自定义观察者，并且正在使用香草产品和类别模型。

我正在解析文本文件以获取正确的值，然后使用普通的 SQL UPDATE 语句。

我只是想确保通过这条路线，我需要以编程方式更新的唯一表是“catalog_category_product”和“catalog_category_product_index”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:26:19.763

我个人不建议您使用纯 SQL，而是使用 API，例如：

```
define('MAGENTO', realpath(dirname(__FILE__)));
require_once MAGENTO . '/app/Mage.php';
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

// Load products 
$products = Mage::getModel('catalog/product')
            ->setStoreId(Mage_Core_Model_App::ADMIN_STORE_ID)
            ->getAll();

// Load categories
$category = Mage::getModel('catalog/category');
            ->setStoreId(Mage_Core_Model_App::ADMIN_STORE_ID);
$categories = $category->getAll();
foreach($products as $product) {
    // Get relevant category 
    $product->setCategoryIds(array($category->getId()));
    $product->save();
} 
```

上面的代码是一个非常粗略的示例，但只需稍加调整即可完成工作。如果您使用纯 SQL，您可能会破坏您的数据或关系，但使用 API Magento 应该适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:02:54.323

您如何链接您的类别和产品？您是否编写了特定的代码？如果是：显示一些代码。

无论如何，magento 提供了许多方法来满足您在 STANDARD 中的需要。在菜单中查看后台：系统/导入-导出

magento 有两种不同的方法：

*   数据流配置文件：它适用于模型并且非常慢（但是通过在所有模型上调用 ->save() 和 ->load() ，它可以确保您添加的任何观察者都会被调用！！）

*   新的 Imports/Exports 配置文件：它适用于纯 SQL 查询并且速度非常快（但它是硬编码的，所以......对您添加的任何加载/保存自定义观察者说再见）

就像你说的，Magento 获得了与产品和类别（以及所有其他模型）相关联的事件挂钩。例如，在产品和类别的保存后回调中，magento 将重新索引所有关联的 INDEXES，例如您尝试手动添加的 catalog_category_index。

所以 ：

*   不要自己这样做，使用 magento 导入/导出配置文件、数据流配置文件或 API。
*   根据您拥有的产品/类别的数量，选择要使用的正确导入（见上文，差异）。数据流较慢但使用模型..

# java - eclipse.ini 非标准选项

> ID：13294787
> 
> 赞同：1
> 
> 时间：2012-11-08T17:49:43.773
> 
> 标签：java, eclipse, swing, jvm-arguments

我有内存不足错误，并且通常使用窗口构建器运行非常慢的 Eclipse 并处理一些大型可视类，所以经过一些研究后，我意识到增加堆 java 大小可以解决问题......而且它确实......

（在 eclipse.ini 上）
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522- 1813
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
1024M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
1024m
--launcher.defaultAction
openFile
-vmargs
-Dosgi。 requiredJavaVersion=1.6
-Dhelp.lucene.tokenizer=标准
-Xms120m
-Xmx512m
-XX:MaxPermSize=1024m

现在我不明白为什么增加堆大小会伤害我，所以每次我尝试穿上

-Xmx1024m

它给了我“无法创建 Java 虚拟机”

为什么我不能这样做，它会帮助我处理视觉类的缓慢处理和渲染吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:59:11.717

查看这篇相关文章，它提供了许多解决“无法创建 Java 虚拟机”问题的解决方案： [Eclipse 错误：“无法创建 Java 虚拟机”](https://stackoverflow.com/questions/7302604/eclipse-error-failed-to-create-the-java-virtual-machine)

除了增加你的堆，大多数时候，它还有助于通过使用`-XX:MaxPermSize`参数来增加你的 PermGen 空间。将此设置为 128m 甚至 256m 可能会加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T11:09:05.017

查看这篇相关文章，它提供了许多解决“无法创建 Java 虚拟机”问题的解决方案：Eclipse 错误：无法创建 Java 虚拟机

# ruby - 如何在事务中发生 DataMapper 回调？

> ID：13294788
> 
> 赞同：1
> 
> 时间：2012-11-08T17:49:51.137
> 
> 标签：ruby, transactions, callback, datamapper

我希望能够在 DataMapper 中定义一个回调，并在交易中发生这种情况以及伴随的更新。例如：

```
class Comment
  include DataMapper::Resource

  has n, :updates

  property :id,   Serial
  property :text, String

  after :update do
    self.updates.create(:text => self.text)
  end
end 
```

我认为上面的代码试图做什么很清楚：任何时候`Comment`更新 a ，也创建一个相应的`Update`记录。现在，一种可能的情况是，您可以更新帖子，但无论出于何种原因，创建更新都会失败，因此会丢失一些历史记录。所以我真的很希望这种操作发生在一个事务中。

这可能吗？我可以想到一些解决方法（例如，定义自定义`update`方法）；但我很想知道是否有“正确”的方法，或者其他人是否可以想到优雅的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:49:09.070

为了使用可测试和可扩展的设计进行归档，我建议使用这样的服务对象：

```
class CommentUpdate

  private_class_method :new

  # Run comment update within transaction
  def self.run(*args)
    Comment.transaction do
      new(*args)
    end
  end

  # Initialize object
  #
  # @param [Comment]
  #   the comment to update
  # @param [String]
  #   the text to set
  # 
  def initialize(comment, text)
    @comment, @text = comment, text
    run
  end

  # Test if update was successful
  def successful?
    @comment.saved?
  end

private

  # Run update
  def run
    @comment.text = @text
    if @comment.save
      @comment.updates.create(:text => @text)
    end
  end
end

# usage
comment = Comment.first
update = CommentUpdate.run(comment, "Some new cool text")
update.successful? # Use this to steer your control flow... 
```

# c# - 有没有办法使用给定的循环更改在表单编辑器中创建的按钮？

> ID：13294789
> 
> 赞同：0
> 
> 时间：2012-11-08T17:50:00.900
> 
> 标签：c#, loops, button

我的表单由一个 3x3 数组和 9 个使用表单编辑器创建的按钮组成；每个按钮都有一个标识符，例如 btn1、btn2，一直到 btn9。DisableButton 和 EnableButton 方法将按钮作为参数。有什么方法可以使用下面的 for 循环将所有按钮传递给一种方法或另一种方法？

```
 for (int r = 0; r < myArray.GetLength(0); r++)
        {
            for (int c = 0; c < myArray.GetLength(1); c++)
            {
                if (numericUpDown.Value > myArray[r, c] || myArray[r, c] == 0)
                    DisableButton(btn1);// new button parameter on each repeat
                else
                    EnableButton(btn1);                    
            }
        } 
```

对于下一次重复，我希望 btn1 更改为 btn2，然后将 btn2 更改为 btn3，依此类推，直到每个按钮都打开或关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:53:16.753

我建议将所有按钮放入数组（或列表）中，然后遍历它们：

```
Button[] buttons =  { btn1, btn2/*, ...*/ };

// then you can do something like this
for(int i = 0; i < buttons.Length; i++)
{
    EnableButton(buttons[i]);
}
// or
foreach(Button btn in buttons)
{
    EnableButton(btn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:53:07.297

请按照以下步骤操作。

1.  获取所有按钮控件。
2.  遍历那些。
3.  根据您的逻辑添加条件。
4.  通过传递循环的当前元素调用 EnableButton()。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:54:06.500

您可以很容易地自己创建数组：

```
Button[,] buttons = new Button[3, 3]
    { 
        { button1, button1, button1 }, 
        { button1, button1, button1 }, 
        { button1, button1, button1 }
    }; 
```

# wpf - ColorAnimationUsingKeyFrames 改变画笔

> ID：13294791
> 
> 赞同：0
> 
> 时间：2012-11-08T17:50:04.017
> 
> 标签：wpf, xaml, blend, visualstates

好吧，嗨，我是 WPF 的新手，这是我第一次尝试更改 WPF 控件的样式。多亏了 Expression Blend，在我做出这种风格之前，一切都比预期的要好。

```
 <Style TargetType="{x:Type TextBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBox}">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PART_ContentHost">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="0.5"/>
                                    </DoubleAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="Background">
                                        <EasingColorKeyFrame KeyTime="0" Value="Red"/>
                                    </ColorAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Stroke).(SolidColorBrush.Color)" Storyboard.TargetName="Background">
                                        <EasingColorKeyFrame KeyTime="0" Value="Yellow"/>
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="ReadOnly"/>
                            <VisualState x:Name="MouseOver"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Rectangle x:Name="Background" Fill="{StaticResource ControlBackgroundBrush}" Stroke="{StaticResource NormalBrush}" RadiusX="2" RadiusY="2"/>
                    <ScrollViewer x:Name="PART_ContentHost" Margin="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" FontFamily="{TemplateBinding FontFamily}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Foreground" Value="Black"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
</Style> 
```

这两个刷子在这里：

```
 <Color x:Key="MainColor">#FF595959</Color>
<Color x:Key="ControlBackgroundColor">#FF333333</Color>

<SolidColorBrush x:Key="NormalBrush" Color="{DynamicResource MainColor}"/>
<SolidColorBrush x:Key="ControlBackgroundBrush" Color="{StaticResource ControlBackgroundColor}" /> 
```

好吧，有什么问题。禁用 TextBox 应该改变 TextBox 的 BorderColor 和 Background 但它也会改变所有使用的颜色`NormalBrush`。我只想为所有控件提供几个通用的画笔，以便轻松修改主题。还有一件事我通常在其他样式中使用它们作为静态资源。您的建议和帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:06:17.357

根据定义，StaticResource 是 STATIC（共享），因此为 STATIC 资源的属性设置动画将影响在其范围内使用 StaticResource 的所有元素。通过将 x:Shared 属性标记为 FALSE，WPF 将为使用它的每个元素创建一个实例，而不是一个静态资源：

```
<SolidColorBrush x:Key="OniiNormalBrush" x:Shared="False" Color="{StaticResource MainColor}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:13:53.750

好吧，我从来没有发现为什么一种颜色会随处改变而第二种颜色不会。正如评论中所建议的那样，我改变了这种风格以使用触发器而不是 visualStates 并且一切正常。

```
<Style TargetType="{x:Type TextBox}">
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type TextBox}">
            <Grid>
                <Rectangle x:Name="Background" Fill="{StaticResource ControlBackgroundBrush}" Stroke="{StaticResource NormalBrush}" RadiusX="2" RadiusY="2"/>
                <ScrollViewer x:Name="PART_ContentHost" Margin="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" FontFamily="{TemplateBinding FontFamily}"/>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Fill" TargetName="Background" Value="Red" />
                    <Setter Property="Stroke" TargetName="Background" Value="Green" />
                    <Setter Property="Foreground" Value="Blue" />
                </Trigger>
            </ControlTemplate.Triggers>
         </ControlTemplate>
</Setter.Value>
</Setter>
<Setter Property="Foreground" Value="Black"/>
<Setter Property="SnapsToDevicePixels" Value="True"/> 
```

**编辑**

一切都是由`NormalBrush`颜色所在的定义引起的`DynamicResource`

# core-plot - Coreplot Xcode 4.5 链接器错误

> ID：13294794
> 
> 赞同：1
> 
> 时间：2012-11-08T17:50:07.447
> 
> 标签：core-plot, linker-errors, xcode4.5

任何人都可以帮忙吗？我已经广泛搜索了这个问题的解决方案......

我最近将 Xcode 从 4.2 升级到 4.5，下载了最新的 Coreplot (1.0) 并尝试安装依赖项目并使用 Coreplot wiki 注释尝试了静态库，但得到以下链接器错误：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Werror -Wmissing-field-initializers -Wmissing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wmissing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wsign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wnewline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -mios-simulator-version-min=6.0 -iquote /Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-generated-files.hmap -I/Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-own-target-headers.hmap -I/Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-all-target-headers.hmap -iquote /Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-project-headers.hmap -I/Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/DerivedSources/i386 -I/Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/DerivedSources -F/Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Products/Debug-iphonesimulator -lstdc++ -falign-loops=16 -MMD -MT dependencies -MF /Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTPlot.d --serialize-diagnostics /Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTPlot.dia -c /Users/carl_evs/Documents/CorePlot_1.0/Source/framework/Source/CPTPlot.m -o /Users/carl_evs/Library/Developer/Xcode/DerivedData/Money_Monthly-eyszohglwcbclrfhrqobwkdwqdzo/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTPlot.o 
```

clang：错误：-Z-reserved-lib-stdc++：存在“-c”时未使用“链接器”输入 命令/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败退出代码 1

# java - 获取 ArrayList 对象中的字段值（java）

> ID：13294795
> 
> 赞同：-1
> 
> 时间：2012-11-08T17:50:08.817
> 
> 标签：java, arraylist

我有一个 ArrayList（类库），其中有两个“书”对象。每本书内有 4 个字段：作者、发布日期、价格#1 和价格#2。

我想总结所有书籍的价格#1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:52:32.743

我建议您编写以下代码：

```
int sum = 0;
for (Book book: books) {
  sum = sum + book.getPrice1();
} 
```

我当然会建议考虑检查书籍是否不为空（即 - 将上述代码放在“if”块中，看起来像 -

```
if (books != null) {
....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:53:30.793

```
public double getSumOfBooks(List<Book> books) {
  double sum = 0;
  for( Book b : books ) {
    sum += b.getprice1();
  }
  return sum;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:52:21.333

```
int sum=0;
for(Book book : arrayList) {
  sum+=book.getPrice1();
}
return sum; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:03:45.770

如果您使用[lambdaj](http://code.google.com/p/lambdaj/)库，它是单行的。

使用[`Lambda.sumFrom`](http://lambdaj.googlecode.com/svn/trunk/html/apidocs/ch/lambdaj/Lambda.html#sumFrom%28java.lang.Iterable%29)：

```
List<Book> books = ...;
int totalPrice = sumFrom(books).getPrice1(); 
```

# jquery - jquery ui 工具提示修改为单击时仅打开和关闭一次

> ID：13294800
> 
> 赞同：4
> 
> 时间：2012-11-08T17:50:49.613
> 
> 标签：jquery, jquery-ui, tooltip, jquery-ui-tooltip

jQuery：1.8.2
jQuery 用户界面：1.9.1

我修改了实现 jquery ui 工具提示的默认方式，因此它可以在单击而不是悬停时工作。

“a”标签是您单击以激活工具提示的东西，但未定义为工具提示。工具提示和工具提示内容放置在“a”标签之后并用 css 隐藏，因此您无法悬停或查看内容。

```
<a class="tooltip-click" id="tt3">asdf</a><span class="tooltip-tick" title="">&nbsp;</span>
<div class="tooltip-content">3</div> 
```

在工具提示实现中，我使用“内容：”属性来获取工具提示定义旁边的 div 的内容，而不是使用“标题”

我在工具提示定义中还有一个函数，如果您单击工具提示内容，它会关闭工具提示。

```
$('.tooltip-tick').tooltip({
        position: { 
            my: "left+15 center", 
            at: "right center",
            using: function( position, feedback ) {
                        $( this ).css( position );
                        //function to close tooltip when content is touched                            
                        $('.ui-tooltip-content').click(function(){
                            $(".tooltip-tick").tooltip("close");
                        });   
        }},
        //the content of the div next to the tooltip instead of using title
        content: function(){
            return $(this).next().html();
        }   
    }); 
```

单击 A 标签时，它首先关闭所有打开的工具提示，然后打开必要的工具提示：

```
$('.tooltip-click').click(function () {
        //first i close open tooltips
        if($(".ui-tooltip").length) $(".tooltip-tick").tooltip("close");
        //then open the tooltip next to the a tag                
        $($(this).next('.tooltip-tick')).tooltip('open');
    }); 
```

**一切正常，但只有一次。** [http://jsfiddle.net/Js8g6/](http://jsfiddle.net/Js8g6/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T14:00:22.043

关闭工具提示后尝试设置“.tooltip-tick”的标题属性：

```
$(".tooltip-tick").attr("title", ""); 
```

打开工具提示需要标题，但关闭后会以某种方式将其删除。

这只是一个小变通办法；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:05:38.557

这是我找到的最佳解决方案。具有抑制标题默认悬停的额外好处。

```
 $(".help").tooltip({ 

         position: { 

             my: "left-1 top+20", at: "right top" 

         },  

         open: function( event, ui ) {

            $('.ui-tooltip').hide();

            $('.help').click(function() {

                   $('.ui-tooltip').fadeIn();

           });
        }
    }); 
```

# sql - SQL View + foreach 没有循环遍历结果

> ID：13294801
> 
> 赞同：1
> 
> 时间：2012-11-08T17:50:50.747
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-3, foreach

我有一个从 SQL 数据库返回结果集 LEFT OUTER JOIN 的视图。我正在使用 MVC 3 根据结果集显示部分视图。但....

```
@foreach (var category in Model.FeeScheduleRates().Distinct())
{
     <tr><td colspan="2">@category.Category</td></tr>
     foreach (var item in Model.FeeScheduleRates()
                               .Where(i=>i.Cat_ID == category.Cat_ID))
     {                               
         <tr> 
             <td>@item.Fee_Title - @item.Description</td>
             <td>@item.Amount</td>                                        
         </tr>
     }                                   
} 
```

该视图没有循环通过第二个 foreach 循环。相反，它重复第一个条目的次数与匹配记录的次数一样多。因此，它应该为每个类别创建一个包含两列的行的表，然后显示该类别中的项目（标题、描述和金额。

为什么第二个 foreach 循环不起作用？

编辑：按要求查看

```
SELECT  TOP (100) PERCENT a.Cat_ID, a.Fee_Title, a.Description, a.Amount, b.Category
FROM     dbo.Fee_Schedule AS a LEFT OUTER JOIN
           dbo.Fee_Categories AS b ON a.Cat_ID = b.Cat_ID
ORDER BY a.Cat_ID 
```

# php - PHP 使用选择标签

> ID：13294811
> 
> 赞同：0
> 
> 时间：2012-11-08T17:51:24.963
> 
> 标签：php, function, select

我想帮我做作业。
我需要使用一个选择菜单，然后将选择标签的选择放入一个函数中。现在，当我尝试这样做时，我得到一个未定义的错误（这很奇怪，因为我确实定义了它）我试图做完整的 if 系统。但我很快就放弃了，因为这只是做很多工作的方式，而可能有更好的方法来做这件事。这是我的代码：

```
<form action=<?php echo $_SERVER['PHP_SELF'];?>>
            Vertrek:
            <select name="vertrek">
                <option value="amsterdam">Amsterdam</option>
                <option value="utrecht">Utrecht</option>
                <option value="denhaag">Den Haag</option>
                <option value="rotterdam">Rotterdam</option>
            </select>
            Aankomst:
            <select name="aankomst">
                <option value="amsterdam2">Amsterdam</option>
                <option value="utrecht2">Utrecht</option>
                <option value="denhaag2">Den Haag</option>
                <option value="rotterdam2">Rotterdam</option>
            </select>
            <br/><br/>
            <input type="submit" value="Berekenen">
            <p>------</p>
            De berekende reiskosten zijn:
            <?php 
                reiskosten(isset($_POST['vertrek']), isset($_POST['aankomst']));            
            ?> Euros's 
```

和“reiskosten”功能：

```
<?php
            function reiskosten($vertrek, $bestemming)
            {
                $reiskosten = array();
                $reiskosten[1] = array();
                $reiskosten[2] = array();
                $reiskosten[3] = array();
                $reiskosten[4] = array();

                //Amsterdam naar iets
                $reiskosten[1][1] = 0;
                $reiskosten[1][2] = 30;
                $reiskosten[1][3] = 60;
                $reiskosten[1][4] = 90;

                //Utrecht naar iets
                $reiskosten[2][1] = 30;
                $reiskosten[2][2] = 0;
                $reiskosten[2][3] = 40;
                $reiskosten[2][4] = 20;

                //Den Haag naar iets
                $reiskosten[3][1] = 60;
                $reiskosten[3][2] = 40;
                $reiskosten[3][3] = 0;
                $reiskosten[3][4] = 10;

                //Rotterdam naar iets
                $reiskosten[4][1] = 90;
                $reiskosten[4][2] = 20;
                $reiskosten[4][3] = 10;
                $reiskosten[4][4] = 0;

                echo($reiskosten[$vertrek][$bestemming] . " Euro's ");
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:54:44.330

您的值是字符串，没有整数。 `$reiskosten[$vertrek][$bestemming]`没有定义，因为它的 ie。`$reiskosten['rotterdam']['rotterdam2']`没有定义。您可能希望将数组键更改为字符串或将选项值更改为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:56:36.480

你的表格是`GET`。您正在检查 `POST`变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T17:59:47.380

您要解决的第一件事是使用错误的参数调用 reiskosten() 函数。您的意思是将表单值传递给该函数，但如果您仔细观察，您会发现您正在传递 isset() 函数的返回值，每个都将是一个布尔值 (TRUE/ FALSE) 值，而不是来自表单元素本身的值。也就是说，一旦你解决了这个问题，你就会意识到即使是表单元素的值也不是你想要的。此时，您将调整 value="" 属性包含的内容，或重新评估您在后端索引事物的方式。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T18:03:13.060

你的表格应该是：

```
<form action=<?php echo $_SERVER['PHP_SELF'];?>>
        Vertrek:
        <select name="vertrek">
            <option value="1">Amsterdam</option>
            <option value="2">Utrecht</option>
            <option value="3">Den Haag</option>
            <option value="4">Rotterdam</option>
        </select>
        Aankomst:
        <select name="aankomst">
            <option value="1">Amsterdam</option>
            <option value="2">Utrecht</option>
            <option value="3">Den Haag</option>
            <option value="4">Rotterdam</option>
        </select>
        <br/><br/>
        <input type="submit" value="Berekenen">
        <p>------</p>
        De berekende reiskosten zijn:
        <?php 
            $reiskosten = reiskosten($_POST['vertrek'], $_POST['aankomst']);
            echo $reiskosten . "Euros's";
        ?> 
```

1.  选项值应该（在这种情况下）是整数。
2.  删除 isset() 因为这仅检查它们是否已设置并且实际上并不返回它们的值。
3.  创建一个新变量 ($reiskosten)，它将作为函数的返回结果，并将其回显。

你的 PHP 应该是：

```
<?php
        function reiskosten($vertrek, $bestemming)
        {
            $reiskosten = array();
            $reiskosten[1] = array();
            $reiskosten[2] = array();
            $reiskosten[3] = array();
            $reiskosten[4] = array();

            //Amsterdam naar iets
            $reiskosten[1][1] = 0;
            $reiskosten[1][2] = 30;
            $reiskosten[1][3] = 60;
            $reiskosten[1][4] = 90;

            //Utrecht naar iets
            $reiskosten[2][1] = 30;
            $reiskosten[2][2] = 0;
            $reiskosten[2][3] = 40;
            $reiskosten[2][4] = 20;

            //Den Haag naar iets
            $reiskosten[3][1] = 60;
            $reiskosten[3][2] = 40;
            $reiskosten[3][3] = 0;
            $reiskosten[3][4] = 10;

            //Rotterdam naar iets
            $reiskosten[4][1] = 90;
            $reiskosten[4][2] = 20;
            $reiskosten[4][3] = 10;
            $reiskosten[4][4] = 0;

            $return = $reiskosten[$vertrek][$bestemming];

            return $return;
        }
    ?> 
```

此处无需回显，只需返回值即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T18:05:24.283

该`isset()`函数返回`true`or `false`，因此以下行不正确，因为您似乎希望通过以下方式发送值：

```
reiskosten(isset($_POST['vertrek']), isset($_POST['aankomst'])); 
```

将其更改为：

```
if( isset($_POST['vertrek']) && isset($_POST['aankomst']) ) {
  reiskosten($_POST['vertrek'], $_POST['aankomst']);
} 
```

`vertrek`此外，和的值`aankomst`将是`value`HTML 中的任何字段`option`，因此它将是名称，而不是数字。

您可以使用关联数组来解决它，例如：

```
$reiskosten = array();
$reiskosten['amsterdam'] = array();
$reiskosten['utrecht'] = array();
$reiskosten['denhaag'] = array();
$reiskosten['rotterdam'] = array(); 
```

对于您设置价格的子数组定义也是如此。

# iphone - PopUp view in another view

> ID：13294814
> 
> 赞同：1
> 
> 时间：2012-11-08T17:51:41.327
> 
> 标签：iphone, objective-c, ios, popup

I've searched on the web with no succsess. I actually just found some popups with html or just text. I would like to make a view that pops up. In the view, should be some content, a button and maybe an imageview. I've found some apps, which are using this popup views so far. The popup displaying is animated. Here I've some pictures:

1. ![enter image description here](../Images/65ddd2409de68af4b58cff0b3ce61d22.png)

and then it grown up till it fits:

![enter image description here](../Images/8ce1094b1e972757fec5cb5e87b5ae14.png)

does anybody know how to do this? It would be awesome if someone has a code snipped for me to present this view in portrait mode.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:57:22.953

[CocoaControls](http://www.cocoacontrols.com) has some things like this. Take a look at these:

*   [KGModal for iOS](http://www.cocoacontrols.com/platforms/ios/controls/kgmodal)

*   [MJPopupViewController for iOS](http://www.cocoacontrols.com/platforms/ios/controls/mjpopupviewcontroller)

*   [UAModalPanel for iOS](http://www.cocoacontrols.com/platforms/ios/controls/uamodalpanel)

*   [RNBlurModalView for iOS](http://www.cocoacontrols.com/platforms/ios/controls/rnblurmodalview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:08:45.253

You can do this by presenting a modalView with **Presentation Style** `UIModalPresentationFormSheet`.

It'll look like:

![UIModalPresentationFormSheet](../Images/f580c4b25b4603510db5976315183ee6.png)

You need to change the height and width according to your need also you can customize the appearance. Please refer.

1.  [UIModalPresentationStyle](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/c/tdef/UIModalPresentationStyle)
2.  [ModalViewControllers](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

If you need it in iPhone use [FPPopover](http://www.50pixels.com/blog/labs/open-library-fppopover-ipad-like-popovers-for-iphone/) or [Modal View in Iphone](http://doganberktas.com/2010/05/18/adding-transparent-modal-view-programatically-iphone/)

# javascript - 使用 SQLitePlugin 查询返回空结果

> ID：13294815
> 
> 赞同：2
> 
> 时间：2012-11-08T17:51:46.397
> 
> 标签：javascript, ios, sqlite, cordova, phonegap-plugins

我正在开发一个最初为最近升级到 2.2.0 的 PhoneGap 1.0.0 编写的 iOS 应用程序，因此我可以将[SQLitePlugin](https://github.com/chbrody/Cordova-SQLitePlugin "PhoneGap 的 SQLitePlugin")与[SQLCipher](http://sqlcipher.net/ "适用于 iOS 的 SQLCipher")一起使用。`SELECT`即使我知道那里有数据，我也遇到了从不返回结果的语句的问题。

这是纲要：

1.  使用以下代码创建数据库：

```
 THDatabase.DatabaseConnection = sqlitePlugin.openDatabase(THDatabase.name, THDatabase.currentVersion, THDatabase.displayName, THDatabase.size);

    THDatabase.DatabaseConnection.transaction(THDatabase.CreateUsersTable, THDatabase.FatalErrorCallback);
    THDatabase.DatabaseConnection.transaction(THDatabase.CreateCentersTable, THDatabase.FatalErrorCallback);
    ... 
```

1.  一旦用户注册，Centers 和 Users 表就会插入数据。
2.  当登录屏幕加载时，会在数据库中查询中心和用户。

```
 /* Centers */
    LoadCenters: function LoadCenters() {
        console.log("LoadCenters");
       THDatabase.DatabaseConnection.transaction(THDatabase.LoadCentersImpl, THDatabase.FatalErrorCallback);
        console.log('THDB.LoadCenters called from: ' + arguments.callee.caller.name);
    },

    LoadCentersImpl: function(tx) {
        console.log("Loading centers.");
        tx.executeSql('SELECT * FROM Centers', [], THDatabase.LoadCentersParse, THDatabase.RecoverableErrorCallback);
    },

    LoadCentersParse: function(tx, results) {
        console.log('parsing centers');
        var dataArray = [];
        var len = results.rows.length;
        ...
    },

    /* Users */
    LoadUsers: function LoadUsers() {
        console.info("THDB.LoadUsers");
    THDatabase.DatabaseConnection.transaction(THDatabase.LoadUsersImpl, THDatabase.FatalErrorCallback);
    },

    LoadUsersImpl: function (tx) {
        console.info("Loading users...");
    tx.executeSql('SELECT * FROM Users', [], THDatabase.LoadUsersParse, THDatabase.RecoverableErrorCallback);
    },

    LoadUsersParse: function (tx, results) {
        console.info('parsing users...');
        var dataArray = [];
        var len = results.rows.length;
        console.log(len);
        ...
    }
    ... 
```

我遇到的问题是，`LoadUsersImpl()`运行后，`LoadUsersParse()`永远不会得到`SELECT`语句的结果。console.log 在“正在加载用户...”处停止。我仍然可以登录应用程序，但没有其他需要从数据库中读取的内容。

我尝试将调用包装`LoadUsersParse()`在一个匿名函数中，传递`tx, results`，这是行不通的。如果我*只* `results`通过，那么调用的结果会显示在控制台日志中，但它会在“解析用户...”出现后立即停止。

如果没有在 PhoneGap 中安装 SQLitePlugin，同样的代码也可以正常工作，但我无法弄清楚它可能导致问题的位置。

在“正在加载用户...”之后打开 DEBUG 会立即记录：

```
SQLitePlugin.backgroundExecuteSqlBatch: {"executes":[{"query":["BEGIN"],"path":"ThinkHealthDBs.db","callback":"cb55"},{"query":["SELECT * FROM Users"],"path":"ThinkHealthDBs.db","callback":"cb56"}]} 
```

这是使用和不使用 SQLCipher 以及在 PhoneGap/Cordova 2.1.0 上的问题。

# c++ - 为什么基于指针交换两个值在函数范围之外不起作用？

> ID：13294823
> 
> 赞同：10
> 
> 时间：2012-11-08T17:52:14.447
> 
> 标签：c++, pointers, swap

我已经很多年没有用 C++ 编程了，所以我决定用指针来刷新我的记忆。

在两个数字之间交换的经典示例中，示例是

```
void swapPointersClassic(double *num1, double *num2) 
{
  double temp;
  temp = *num1;
  *num1 = *num2;
  *num2 = temp;
} 
```

这允许我们像调用函数一样进行函数调用`swapPointersClassic(&foo, &bar);`，因为我们传入了变量 foo 和 bar 的内存地址，函数将检索值并进行交换。但是我开始怀疑，为什么我不能执行以下操作？

```
void swapPointers(double *num1, double *num2)
{
  double *temp;
  temp = num1;
  num1 = num2;
  num2 = temp;
} 
```

这对我来说似乎更有意义，因为我们只需要创建足够的临时存储空间来存储内存地址 num1（而不是完整的临时存储空间来存储双精度值 *num1）。但是，函数范围似乎限制了指针交换的效果。拨打电话后`swapPointers(&foo, &bar);`，我可以看到在函数 swapPointers 中，foo & bar 确实被交换了。一旦我们退出 swapPointers 函数， foo 和 bar 就不再交换了。谁能帮我理解为什么会这样？这种行为让我想起了典型的按值传递方法，但我们在这里通过指针传递。所以这意味着我们只能触摸那些指针指向的值，而不能触摸指针本身？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T17:58:25.297

实际上，您并没有真正通过指针传递。您按值传递两个指针。仅传递指针本身是不够的 - 您必须取消引用它们。取消引用（副本）指针的行为使魔术发生，它是实现范围遍历的实际位置。

修改函数的参数对函数来说是本地的，即使参数本身是指针。您*必须取消引用*它们才能访问它们指向的内存（同样，“通过指针传递”不仅仅是传递指针 - 它正在传递指针**并**正确使用它们）。

另外，请考虑以下事项。如果您的第二种方法有效，并且交换了两个指针，那么这意味着**交换了变量的地址。**这完全没有意义。

顺便说一句，在 C++ 中，我们有一个真正的按引用传递调用约定，所以 *没有必要*搞乱指针：

```
void swap(double &a, double &b)
{
    double temp = a;
    a = b;
    b = temp;
}

float a = 1, b = 2;
swap(a, b); 
```

（这只是一个实现问题，编译器很可能会通过实际使用指针来实现这种行为，但至少你不会头疼。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T17:55:36.377

如果要交换指针而不是它们的值，则需要传递指针的指针：

```
void swapPointers(double** num1, double** num2)
{
  double* temp = *num1;
  *num1 = *num2;
  *num2 = temp;
} 
```

您可以在以下位置查看示例：http: [//ideone.com/iklCta](http://ideone.com/iklCta)

您甚至可以使用参考：

```
void swapPointers(double*& num1, double*& num2) {
  double* temp = num1;
  num1 = num2;
  num2 = temp;
} 
```

示例：http: [//ideone.com/w4k9mV](http://ideone.com/w4k9mV)

当您使用大型对象（例如：图像数据）并且您不想移动大量内存而只想移动引用时，这很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T18:30:44.033

这是一个很好的问题，但是一旦你弄清楚了，请使用[`std::swap`](http://en.cppreference.com/w/cpp/algorithm/swap)or[`std::iter_swap`](http://en.cppreference.com/w/cpp/algorithm/iter_swap)而不是自己编写。

如果`foo`和`bar`是指针，调用将在两个指针之间`std::swap(foo, bar)`交换*地址。*调用`std::swap(*foo, *bar)`或`std::iter_swap(foo, bar)`将取消引用指针并交换指针指向的*对象*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T17:56:23.333

您正在按值传递指针本身；`num1`并且`num2`是调用者用来调用函数的指针的*本地副本。*因此，当函数退出时，调用站点上的交换是不可见的，因为只对函数本地的变量进行了修改。

相反，更改函数以引用指针，您的交换代码将按预期工作。

```
void swapPointers(double*& num1, double*& num2) { ... } 
```

现在，您的函数参数是调用者传递给函数的指针的别名，无论您对它们做什么，都会影响调用者上下文中的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T17:56:53.267

你打电话时

```
swapPointersClassic(&foo, &bar) 
```

**您正在获取堆栈**上两项的地址。这些值作为临时值传入**并按 value 复制**。在您的函数体中，您交换这些临时对象指向的位置，但不要移动 foo 和 bar 指向的位置。

最重要的是， foo 和 bar 存在于**stack**中。在 C++ 中，您无法更改变量在堆栈中的位置。一个值被映射到堆栈上的一个点并存在于那里。您可以获得指向该值所在位置的指针以进行传递指针（类似于传递引用），但只需更改临时指针指向的位置，您不会更改指向对象所在的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T17:57:53.590

当你传入`double *num1`一个函数时，你是按值传入一个指针。这会在函数范围内创建一个变量，该变量包含一个 double 的地址。当您分配给它时，您正在更改函数范围内指针的值。

就像你必须传递一个指向双精度的指针，取消引用它，并分配交换一个双精度，你必须传递一个指向指针的指针，取消引用它，然后赋值交换一个指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T18:04:52.320

指针 101：指针是一张纸，上面有房子的地址。

通过写 &bar，你将把名为 bar 的房子写在一张匿名的便条纸上。

然后，您使用该指针作为参数调用一个函数。这里发生的情况是该函数制作了另一张纸的副本。

然后，您的交换函数获取两个这样的本地副本并交换写入它们的地址。

所以这在函数之外没有任何作用。清除？

现在基本上即使地址的功能内没有副本，您正在使用的只是带有家庭地址的废纸。对此类文件的任何更改实际上都不能移动存储在 house bar 或 foo 中的数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-15T15:10:39.633

由于这个问题的正确答案已经发布，我只想说清楚一些事情。

使用引用交换两个变量的值通常是不好的做法，应该避免。原因是不应该重新分配引用。看下面的代码：

```
1\. void swap(double &a, double &b)
2\. {
3\.    double temp = a;
4\.    a = b;  //Not what you think
5\.    b = temp;
6\. }
7.
8\. float a = 1, b = 2;
9\. swap(a, b); 
```

在第 4 行和第 5 行，您显然违反了通用规则 - “永远不要重新分配引用”。

如果你真的需要改变变量的值，总是更喜欢“通过指针”而不是“通过引用”。以下代码是有意义的，也是 IMO 的良好实践。

```
1\.  void swapPointersClassic(double *num1, double *num2) 
2\.  {
3\.   double temp;
4\.   temp = *num1;
5\.   *num1 = *num2;
6\.   *num2 = temp;
7\.  }    
8.
9\.  float a = 1, b = 2;
10\. swap(&a, &b); 
```

同意引用更清晰，更易于使用，并且它们在隐藏信息方面做得更好，正如您在第一个示例中看到的那样。但是，不能重新分配引用。如果您需要先指向一个对象，然后再指向另一个对象，则必须使用指针。

**经验法则：**

*   如果引用有效，请不要使用指针。
*   不要尝试重新分配对不同变量的引用。你不能。

# ios - 如何接受通过应用程序中的 iPhone 配置实用程序添加到 iOS 设备的可信证书

> ID：13294829
> 
> 赞同：1
> 
> 时间：2012-11-08T17:52:48.097
> 
> 标签：ios, ssl, ios6, nsurlconnection, nsurlconnectiondelegate

我希望我的应用程序能够接受使用 iPhone 配置实用程序添加到 iOS 设备的受信任根证书。

我使用 iPhone 配置实用程序将可信证书添加到 iOS 设备，并通过向我的服务器发送 https 请求确认 Safari 接受我的自签名证书。但是，当我制作一个使用 NSURLConnection 使用 HTTPS 向我的服务器发出 GET 请求的简单测试应用程序时，我收到以下错误消息：

" 错误 - 此服务器的证书无效。您可能正在连接到服务器，请在此处输入伪装成“myserver”的代码，这可能会使您的机密信息面临风险。"

我想我的 iOS 应用程序是沙盒的，默认情况下不接受自签名证书。我尝试在 willSendRequestForAuthenticationChallenge 中操作代码以接受自签名证书但没有成功。我希望其他人已经弄清楚如何做到这一点。我不想接受所有自签名证书。我只想接受已在设备上配置为受信任的自签名证书。

# c# - Java 包与 c# 程序集

> ID：13294831
> 
> 赞同：5
> 
> 时间：2012-11-08T17:52:53.773
> 
> 标签：c#, java, assemblies, packages

> **可能重复：**
> [Java 包是否等同于 .Net 程序集？](https://stackoverflow.com/questions/3629291/is-a-java-package-the-equivalent-of-a-net-assembly)

我在比较 Java 和 C# 中的访问修饰符。

在 java 中，默认访问允许访问正在修改的类，访问该类所在的包中的所有内容。在 C# 中，内部访问修饰符允许访问正在修改的类，以及该类所在的程序集中的所有内容。

Java 包是否与 C# 程序集相同，如果不是，有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:56:31.940

不，它们不一样。正如[Thread](https://stackoverflow.com/questions/3629291/is-a-java-package-the-equivalent-of-a-net-assembly)中提到的那样。最好的比较是使用 Java ARchive (Jar) 文件。Java 使用包来控制命名空间，与 C# 的命名空间非常相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:56:51.003

最好将 C# 程序集视为密封的 jar 或 OSGI 包。Java`package`更接近于 C# `namespace`，尽管这些概念都不能完美地映射两种语言。

# javascript - javascript - 为什么 DOM 包装器方法不一致地使用第一个元素和整个元素列表？

> ID：13294834
> 
> 赞同：1
> 
> 时间：2012-11-08T17:53:04.193
> 
> 标签：javascript, dom, language-design, libraries

我见过的库有 DOM 包装器，在某些情况下只包含处理列表的第一个元素，例如：

```
return this[0].innerHTML 
```

并在其他一些中使用整个列表，例如：

```
for( var i=0, l=this.length; ++i<l; ) this[i].className = cls;
return this 
```

为什么这种方法被接受？

我认为挑出第一个元素违背了在列表的其余部分应用相同事物的方法的目的。有可疑的功能不是很糟糕吗？我知道它适合很多人..但感觉不一致，我对为什么它被如此广泛地接受很感兴趣。

以编辑为例：

[jQuery.html()](http://api.jquery.com/html/)

> 如果选择器表达式匹配多个元素，则只有第一个匹配项才会返回其 HTML 内容。

为什么不是全部？

bonzo 中的[hide()](https://github.com/ded/bonzo/blob/master/bonzo.js#L628)方法，来自 Dustin Diaz

```
//...
hide: function () {
  return this.each(function (el) {
     el.style.display = 'none'
  })
} 
```

为什么不只是第一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:16:16.413

jQuery 中的访问器方法返回单个值，因为它更简单且更普遍有用。如果`.html()`API 要为所有元素返回值`innerHTML`，那意味着它必须返回一个数组。反过来，这意味着在想要单个元素的内容的最常见情况下，您必须添加数组访问。还有一个问题是要准确知道哪个返回值与哪个选定元素对应。换句话说，如果`.html()`返回一个元素内容数组：

```
var contentList = $('.someClass, span, .hidden .container').html(); 
```

如果“contentList”只是一个简单的数组，那它有什么用呢？代码如何知道每个元素来自哪个 DOM 节点？当然有解决方案，但是为了支持罕见的一般情况，简单的情况再次变得复杂。

当然，您也可以自己获取列表`.map()`。我认为这只是一个聪明、实用、务实的 API 设计问题。

# actionscript-3 - 使用 MXML 组件通过数组设置图像

> ID：13294836
> 
> 赞同：0
> 
> 时间：2012-11-08T17:53:08.323
> 
> 标签：actionscript-3, apache-flex, components, mxml

我正在尝试在舞台上设置卡片图像。卡片套装和价值存储在一个数组中，我需要使用一个组件来设置图像。这是我遇到问题的说明部分：“在函数 makeCard 中，使用花色和值输入来构造用于此卡正面的文件名。将 frontFile 属性设置为此文件名。您可能还想要设置backFile，对所有卡片都是一样的。”

这是主要的 MXML 文件代码：

```
<fx:Script>
        <![CDATA[

            import spark.components.Image;

            public var suits:Array = ['clubs', 'diamond', 'heart', 'spade'];
            private var values:Array = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'jack', 'queen', 'king', 'ace'];

            private function init():void
            {
                for each (var suit:String in suits) {

                    for each (var value:String in values) {

                        var card:Card = new Card();
                        card.makeCard(suit, value);
                        card.turnDown();
                        card.addEventListener(MouseEvent.CLICK, flipCard);
                        playGrp.addElement(card);

                    }
                }
            }

            private function flipCard(e:MouseEvent):void
            {
                var card:Card = Card(e.currentTarget);
                card.turnOver();
            }

        ]]>
    </fx:Script>

    <s:TileGroup id="playGrp" requestedRowCount="4"
                 horizontalCenter="0" verticalCenter="0"/> 
```

这是我到目前为止的组件代码：

```
<fx:Script>
        <![CDATA[

            //create variables for the front and back
            public var frontFile:String;
            public var backFile:String;

            //create function for making the car
            public function makeCard():void {

                frontFile = "asset/Cards_deck_" + + ".jpg";
                backFile =  "asset/Cards_back_" + + ".jpg";

            }

            //create function for turning the card over
            public function turnUp():void {

            }

            //create function for turning card over
            public function turnOver():void {

            }

            //create function for turning card down
            public function turnDown():void {

            }
        ]]>
    </fx:Script> 
```

编辑：这里是卡片组件的方向？对于每张卡片，我们希望能够显示卡片的正面或背面。这意味着每张卡都应该有一个位置来存储有关显示为正面的文件以及显示为背面的文件的信息。

为此，请在 Card 组件中创建两个变量来存储文件名。您可以将这些变量称为frontFile 和backFile。

现在让我们考虑一下我们的卡片需要的方法。再看一下应用程序文件。请注意，该应用假定它可以调用名为

```
makeCard(), passing it Strings to specify the suit and the value for this card
turnUp()
turnOver() 
```

这意味着您需要为每个调用定义公共函数。当您使用它时，请继续定义一个名为 turnDown 的函数。

在函数 makeCard 中，使用花色和数值输入来构造文件名以用于这张卡片的正面。将 frontFile 属性设置为此文件名。您可能还想设置 backFile，这对所有卡片都是相同的。

在函数 turnUp 中，只需将卡片的源属性设置为存储在其 frontFile 属性中的任何字符串。

在函数 turnDown 中，将卡片的源属性设置为存储在其 backFile 属性中的任何字符串。

在 turnOver 中，您需要查看显示的是哪个文件，并更改源以显示卡片的另一面。

# opengl - 使用 Glut/OpenGL 检测水平鼠标运动

> ID：13294842
> 
> 赞同：0
> 
> 时间：2012-11-08T17:53:28.137
> 
> 标签：opengl, mouse, glut, motion

我正在尝试使用 OpenGL 检测水平鼠标运动，因此，当检测到时，执行 glutPostRedisplay()。问题是场景也会在鼠标垂直移动时重绘。

这是注册回调的代码（注意 mouse_inix 和 mouse_iniy 是全局（双）变量）：

```
void mouse(int button, int state, int x, int y)
{
    if (state == GLUT_DOWN)  {
            mouse_inix = (double)x;
            mouse_iniy = (double)y;
    }
}

void motion(int x, int y)
{

    if (((double)x) != mouse_inix) {
            angle += 20.0;
            glutPostRedisplay();
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:56:51.433

Are you sure? It doesn't look like from the code you've posted that vertical mouse movement will trigger the glutPostRedisplay() call.

BUT, you've defined "horizontal mouse movement" very narrowly here. If you move the mouse up and down, you're almost sure to get a few pixels of horizontal movement. Maybe you could put a dead zone around the mouse to keep it from moving on every pixel. Something like:

```
void motion(int x, int y)
{
    if ((abs(x - (int)mouse_inix) > 10) {
        angle += 20.0;
        glutPostRedisplay();
    } 
} 
```

That's one thing that's going on here. Another is the use of "double". Since glut is returning mouse coordinates as ints, you're better off sticking with that. Trying to compare "(double)x != mouse_inix" will almost certainly be true because of the precision issues with doubles. You generally don't want to compare for *exactly* equal to or not equal to using floating point numbers. The use of the dead zone will negate that issue, but still, why convert to doubles if you don't need them?

I don't know if "20" is degrees or radians, but it could result in some pretty jumpy moves either way. Consider scaling the size of the move to the size of the mouse move:

```
void motion(int x, int y)
{
    int deltaX = (abs(x - (int)mouse_inix);
    if (deltaX > 10) {
        angle += (double)deltaX;  // or "deltaX/scaleFactor" to make it move more/less
        glutPostRedisplay();
    } 
} 
```

It will still only rotate one way. If you used the sign of "deltaX", you would be able to rotated both directions depending on how you moved the mouse.

# tfs - tfs 结帐/以编程方式签入

> ID：13294843
> 
> 赞同：2
> 
> 时间：2012-11-08T17:53:29.587
> 
> 标签：tfs

我正在构建一个 VS2010 插件。此插件仅适用于我们的自定义项目类型，并创建一个菜单项，将输出程序集从当前解决方案复制到另一个解决方案。两者都在 TFS 控制之下。

我有以下代码：

```
var tfs = new TeamFoundationServer(address);
var version = (VersionControlServer)tfs.GetService(typeof(VersionControlServer));
var workspace = version.GetWorkspace(System.Net.Dns.GetHostName().ToString(), version.AuthorizedUser);

workspace.PendEdit(dest);
System.IO.File.Copy(source, dest, true); 
```

现在我想检查更改。问题是我不知道如何只选择我刚刚签出的那个文件？我在同一个项目和其他项目中还有其他待定更改。这会签入我签出的所有内容吗？我可以更有选择性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:31:05.497

```
PendingChange[] pendingChange = workSpace.GetPendingChanges(dest);
workSpace.CheckIn(pendingChange, comments); 
```

> **Workspace.GetPendingChanges 方法（字符串）**
> 
> [http://msdn.microsoft.com/en-us/library/bb139277(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb139277(v=vs.100).aspx)
> 
> 参数
> 
> item：正在查询的项目的本地或服务器路径。

和

> **Workspace.CheckIn 方法**
> 
> [http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workspace.checkin(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workspace.checkin(v=vs.100).aspx)
> 
> 参数
> 
> changes 要签入的挂起更改集。*如果不指定此参数，则将签入工作区中的所有更改。*
> 
> 评论 要与此签入关联的评论。可能为空。

# ruby - Rails3：一个控制器，用于表单数据提交的多个部分

> ID：13294846
> 
> 赞同：1
> 
> 时间：2012-11-08T17:53:55.643
> 
> 标签：ruby, ruby-on-rails-3, controller

我不确定这是否是最好的方法，但我有一个控制器，最初我打算控制一个显示索引，该索引在其上呈现许多部分（一个标题部分，然后有一些魔法来根据步骤呈现不同的部分用户正在填写表格......一个表格在几个页面上有很多部分）。我认为最终 ajax 是要走的路，但我什至还没有到那一点。我不确定这是不是正确的方法，所以我想这就是我要问的……一个控制器的许多不同部分是这样的吗？还是必须将表单数据的每个“页面”分解为自己的控制器？允许用户填写表格（复选框，评论部分）并单击“下一步”传递他们正在填写的数据模型并将该模型保存在每个下一步中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:10:57.750

U 可能不需要多个控制器，但 1 个具有某些操作的控制器可能是一个好的开始。=)

然后每个动作应该只加载它需要的部分。就像你可以给局部动作名称一样，很容易知道要渲染哪个局部。

或者也许你可以尝试使用[wicked](https://github.com/schneems/wicked/)。

它有一个[railscasts](http://railscasts.com/episodes/346-wizard-forms-with-wicked?view=asciicast)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:22:30.657

好吧，您可以使用一种方法来决定要渲染哪个部分。使用这个例子或做一些元编程。

```
 class YourController < ApplicationController
       def index
          render :partial => partial_selector(param)
       end

       private
       def partial_selector param
          #logic to decide what partial do render
          #returns the partial name
       end
 end 
```

# java - 迷宫求解器陷入死胡同

> ID：13294848
> 
> 赞同：1
> 
> 时间：2012-11-08T17:53:57.330
> 
> 标签：java, maze

我正在使用迷宫求解器算法，一切正常，直到它遇到死胡同并陷入循环，[就像这样](http://i.imgur.com/NYtCY.png)。问题似乎是，当它想转身时，那里没有足够的空间容纳它，所以它会再次转身，因为它面对前面的墙壁，因此陷入了无限循环。

这是我正在使用的两个代码，但第一个是最相关的。

`SimpleWindow`是绘制所有内容等的主窗口，类是生成迷宫和值的文件，`maze`例如`wallAtLeft`，，（这些都是布尔值）`wallInFront``atExit`

```
import se.lth.cs.ptdc.window.SimpleWindow;
import se.lth.cs.ptdc.maze.*;

public class MazeTurtle extends Turtle {
protected int Maze;

public MazeTurtle(SimpleWindow w, int x, int y) {
    super(w, x, y);
}

public void walk(Maze maze) {
    Maze m = new Maze(4);
    Turtle t = new Turtle(w, m.getXEntry(), m.getYEntry());
    int x1 = m.getXEntry();
    int y1 = m.getYEntry();
    int dir = t.getDirection();
    t.penDown();

    while ((m.atExit(x1, y1)) == false) {
        if (m.wallAtLeft(dir, x1, y1) == true) {
            t.forward(1);
            SimpleWindow.delay(10);
        }

        else if (m.wallAtLeft(dir, x1, y1) == false) {
            t.left(90);
            t.forward(1);
            SimpleWindow.delay(10);
        }

        if (m.wallInFront(dir, x1, y1) == true) {
            t.left(-90);
            t.forward(1);
            SimpleWindow.delay(10);
        }

        x1 = t.getX();
        y1 = t.getY();
        dir = t.getDirection();
        System.out.println("X: " + x1 + "Y: " + y1);
    }

}

} 
```

这是绘制所有内容的程序：

```
import se.lth.cs.ptdc.window.SimpleWindow;
import se.lth.cs.ptdc.maze.*;

public class MazeTest {

public static void main(String args[]) {

    Maze m = new Maze(4);
    SimpleWindow w = new SimpleWindow(600, 600, "MazeTest");
    MazeTurtle t = new MazeTurtle(w, m.getXEntry(), m.getYEntry());
    t.penDown();
    m.draw(w);
    t.walk(m);
}

} 
```

如果需要，带有描述的迷宫类。请注意，只需要其中的一些方法。[http://pastebin.com/gxSecEc2U](http://pastebin.com/gxSeEc2U)

这是我正在使用的海龟类：http: [//pastebin.com/0RqbVudn](http://pastebin.com/0RqbVudn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:59:43.250

我认为你不应该`t.forward(1);`在下面的部分打电话，**因为改变方向后可能会再次出现墙。**

```
 if (m.wallInFront(dir, x1, y1) == true) {
        t.left(-90);
        //t.forward(1);
        SimpleWindow.delay(10);
    } 
```

我只是假设`forward(1)`尝试移动一步，如果没有空间（前面的墙）可能会导致问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:02:52.013

而不是使用

```
if (m.wallInFront(dir, x1, y1) == true) {
        t.left(-90);
        SimpleWindow.delay(10); 
```

我用这个代替了它：

```
if (m.wallInFront(dir, x1, y1) && m.wallAtLeft(dir, x1, y1) == true) {
            t.left(-90);
            SimpleWindow.delay(10);
        } 
```

现在，它不是一次检查一件事，而是检查是否有 CORNER，而不仅仅是一堵墙。

谢谢大家一路上的帮助：）

# javascript - Impress.js：文本和图像看起来很模糊

> ID：13294849
> 
> 赞同：7
> 
> 时间：2012-11-08T17:54:04.080
> 
> 标签：javascript, html, css, blurry, impress.js

使用[Impress.js](https://github.com/bartaz/impress.js)，我的文本和图像看起来很模糊。

请参阅下一个禁用 CSS 但启用 Impress.js 的屏幕截图：

![在此处输入图像描述](../Images/f3705c10a5f0b562aa7df548a68386c3.png)

现在查看下一个禁用 Impress.js 和 CSS 的屏幕截图：

![在此处输入图像描述](../Images/797c7ee3d5c57fe2ece9eeeb92be193d.png)

为什么它们是模糊的？

这是我的配置：

```
<div id="Model-2" class="step" data-x="117000" data-rotate="20">
    <h2>Backbone.Model</h2>
    <p>On peut préciser des valeurs par défaut</p>
    <img src="img/18.png">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:17:02.207

发生这种情况是因为 impress.js 使用 translate3d 并且别名将自动禁用以提高性能，不幸的是没有快速修复。

# google-maps - 从 WebGL 中的 Globe 获取经度和纬度

> ID：13294851
> 
> 赞同：1
> 
> 时间：2012-11-08T17:54:04.267
> 
> 标签：google-maps, math, astronomy, webgl-globe

我正在使用来自[http://workshop.chromeexperiments.com/globe/](http://workshop.chromeexperiments.com/globe/)的 WebGL 地球仪。如果单击地球上的任何一点，我需要获取该点的经度和纬度。这些参数将被传递给 Google Maps 的 2D 地图。

怎么才能长。和纬度。来自 webgl 地球？

通过这个函数，我得到了双击点，通过这个点，我找到了 long。和纬度。但结果并不正确。似乎点击的点没有正确确定。

```
function onDoubleClick(event) {
        event.preventDefault();

        var vector = new THREE.Vector3(
            ( event.clientX / window.innerWidth ) * 2 - 1,
            -( event.clientY / window.innerHeight ) * 2 + 1,
            0.5
        );

        projector.unprojectVector(vector, camera);

        var ray = new THREE.Ray(camera.position, vector.subSelf(camera.position).normalize());

        var intersects = ray.intersectObject(globe3d);

        if (intersects.length > 0) {

            object = intersects[ 0 ];

            console.log(object);
            r = object.object.boundRadius;
            x = object.point.x;
            y = object.point.y;
            z = object.point.z;
            console.log(Math.sqrt(x * x + y * y + z * z));

            lat = 90 - (Math.acos(y / r)) * 180 / Math.PI;
            lon = ((270 + (Math.atan2(x, z)) * 180 / Math.PI) % 360) - 180;

            console.log(lat);
            console.log(lon);

        }
    } 
```

在此处获取 WebGL Globe [https://github.com/dataarts/webgl-globe/archive/master.zip](https://github.com/dataarts/webgl-globe/archive/master.zip) 您可以直接在 Mozilla 上打开它，如果您在 Chrome 中打开它，它适用于由于 Cross-Origin 而缺少地球表面图像资源共享政策。它需要放在虚拟主机中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:54:50.610

尝试以这种方式使用该功能

```
 function onDoubleClick(event) {
        event.preventDefault();

        var canvas = renderer.domElement;
        var vector = new THREE.Vector3( ( (event.offsetX) / canvas.width ) * 2 - 1, - ( (event.offsetY) / canvas.height) * 2 + 1,
0.5 );

        projector.unprojectVector( vector, camera );

        var ray = new THREE.Ray(camera.position, vector.subSelf(camera.position).normalize());

        var intersects = ray.intersectObject(globe3d);

        if (intersects.length > 0) {

            object = intersects[0];

            r = object.object.boundRadius;
            x = object.point.x;
            y = object.point.y;
            z = object.point.z;

            lat = 90 - (Math.acos(y / r)) * 180 / Math.PI;
            lon = ((270 + (Math.atan2(x, z)) * 180 / Math.PI) % 360) - 180;

            lat = Math.round(lat * 100000) / 100000;
            lon = Math.round(lon * 100000) / 100000;
            window.location.href = 'gmaps?lat='+lat+'&lon='+lon;

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T11:13:51.107

我使用了您共享的代码并稍作修正，效果很好。

让它正常工作的方法是准确理解你传递给新的 THREE.Vector3 的内容。

这个函数需要三个参数 (x, y, z)

在我们/您的情况下，z 被雕刻为 0.5，没关系

x 和 y 必须是介于 -1 和 1 之间的数字，因此，要获得此值，您需要捕获画布上的点击坐标，然后使用此公式将它们减少到此范围内的值（-1... 0...1);

```
var vectorX = ((p_coord_X / canvas.width ) * 2 - 1);
var vectorY = -((p_coord_Y / canvas.height ) * 2 - 1); 
```

其中 p_coord_X 和 p_coord_Y 是单击的坐标（指画布的左上角），而画布是 webgl 地球所在的画布区域。

问题是如何以像素为单位获取点击 X 和 Y 坐标，因为这取决于您的画布在 HTML 环境中的放置方式。对于我的情况，在不合适的原因提出的解决方案总是返回错误的结果；所以我构建了一个解决方案，以便在我单击它时准确地获取画布区域的 x 和 y 坐标（我的情况也必须插入一个 scrollY 页面更正）。

现在想象将您的画布区域划分为 4 个正方形，单击 NW 象限将返回例如 -0.8、-05 x 和 y 值，单击 SE 即返回几个 0.6、0.4 值。

接下来的 ray.intersectObject() 函数使用我们的点击矢量转换数据来了解我们的点击是否与地球相交，如果匹配，则正确返回坐标纬度和经度。

# knockout.js - 从淘汰赛 observableArray 中删除项目导致 jquery-validation 异常

> ID：13294857
> 
> 赞同：1
> 
> 时间：2012-11-08T17:54:15.393
> 
> 标签：knockout.js, jquery-validate

我正在尝试将 jquery 验证与 knockoutjs 结合使用。我绑定到 observableArray 并使用模板中的复选框。当未选中该复选框时，该项目将从 observableArray 中删除。发生这种情况后，会发生来自 jquery 验证的异常“未捕获的类型错误：无法读取 null 的属性 'nodeName'”。要查看此异常，您可以使用 chrome 开发人员工具进行观看。

这是我的代码的 jsfiddle：http: [//jsfiddle.net/dgHS3/28/](http://jsfiddle.net/dgHS3/28/)

这是html

```
<form id="myForm">
<table>
    <thead>
        <tr>
            <th>Use</th>
            <th>Caption</th>
        </tr>
    </thead>

    <tbody data-bind="foreach: selectedFields">
        <tr > 
            <td><input type="checkbox" data-bind="checked: IsSelected, uniqueName: true, click: $root.addRemoveField" /></td>
            <td><input class="required" data-bind="value: Caption, enable: IsSelected, uniqueName: true" /></td>
        </tr>
    </tbody> 
```

这是javascript：

```
function FieldData(data) {
    var self = this;
    self.Caption = ko.observable(data.Caption);
    self.IsSelected = ko.observable(data.IsSelected);
}

function myViewModel() {
    var self = this;

    self.selectedFields = ko.observableArray([]);

    init = function () {
        var data = new Object();

        data.Caption = "cap1";
        data.IsSelected = true;

        var flds = [];
        var fld = new FieldData(data);
        flds.push(fld);

        self.selectedFields(flds);

    }();

    self.addRemoveField = function (field) {
        if (field.IsSelected()) {
            self.selectedFields.push(field);
        }
        else {
            self.selectedFields.remove(field);
        }

        return true;
    };

}

var vm = new myViewModel();
ko.applyBindings(vm); 
```

# opengl - 是否应该将同一个 VAO 用于多个程序？

> ID：13294858
> 
> 赞同：6
> 
> 时间：2012-11-08T17:54:17.353
> 
> 标签：opengl

假设我们将顶点属性位置绑定到两个程序上的相同值。这两个程序用同一个顶点数组对象绘制是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:09:28.987

定义“正确”。

如果两个程序对象使用兼容的属性位置，那么它们使用相同的属性位置。VAO 依赖于属性位置，因此与其中一个一起工作的 VAO 将与另一个一起工作。所以这会起作用。

通常，您是否真正利用这一点是性能问题。避免更改顶点数组状态通常是一个好主意，但目前尚不清楚这相对于其他状态更改有多重要。无论如何，您都在更改程序，因此在更改程序时不更改 VAO 在最坏的情况下不会变慢，并且可以显着提高性能。

但是，尚不清楚您应该做多少工作来最小化顶点数组状态更改。如果您可以将模型打包到具有相同格式的相同缓冲区对象中，则可以使用类似`glDrawArrays`或的函数来渲染所有模型而无需更改 VAO [`glDrawElementsBaseVertex`](http://www.opengl.org/wiki/GLAPI/glDrawElementsBaseVertex)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T19:06:53.783

我尝试过使用具有不同着色器的相同 VAO，并且可以看到视觉伪影。（属性的 ID 确实匹配）解决方案是为每个单独的程序使用一个新的 VAO。

# syntax - 在 Mongoid 中使用 AND 和 OR 的组合

> ID：13294860
> 
> 赞同：5
> 
> 时间：2012-11-08T17:54:29.357
> 
> 标签：syntax, mongoid, multiple-conditions

我想构造一个表单的查询：

```
select * from some_table
where 
  (field1 = 'x' or field2 = 'y') 
  and 
  (field3 = 'z' or field4 = 'w') 
```

通过阅读文档，我认为它应该看起来像这样`Mongoid`：

```
SomeTable.or({:field1 => 'x'}, {:field2 => 'y'})
         .and  #  or is it .intersect?
         .or({:field3 => 'z'}, {:field4 => 'w'}) 
```

但这不起作用 - mongo 选择器只是所有字段的“$or”。这样做的正确方法是什么？谢谢。

我也很欣赏相反的情况，例如 - 如何执行此查询：

```
select * from some_table
where 
  (field1 = 'x' and field2 = 'y') 
  or
  (field3 = 'z' and field4 = 'w') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T04:39:24.607

看来我需要结合使用`mongo`和`Mongoid`语法（`$something`运算符）：

```
SomeTable.and( :$or => [ { :field1 => 'x' }, { :field2 => 'y' } ])
         .and( :$or => [ { :field3 => 'z' }, { :field4 => 'w' } ]) 
```

与之相反的只是替换运算符：

```
SomeTable.or( :$and => [ { :field1 => 'x' }, { :field2 => 'y' } ])
         .or( :$and => [ { :field3 => 'z' }, { :field4 => 'w' } ]) 
```

希望这可以帮助某人:)

# gnuplot - GNUPLOT 图中的空白区域

> ID：13294862
> 
> 赞同：3
> 
> 时间：2012-11-08T17:54:33.613
> 
> 标签：gnuplot

我在我的 gnuplot 脚本上遇到了奇怪的行为。此脚本的目标是读取文件并使用文件的第一行作为系列标题绘制一组特定的行（基于文件中给定起点的 3 个连续行）。

虽然该情节在概念上有效，但我在左侧的图像中遇到了一个大插入，就好像读取了一个空行并将其绘制为 0（没有标题）

输入文件：

```
Level,Filter,Type,Set1,Set2,Set3
Level1,Filter1,Type1,112,186,90
Level1,Filter1,Type2,233,335,159
Level1,Filter1,Type3,224,332,157 
```

代码：

```
set terminal postscript color
set output '| epstopdf --filter --outfile=output.pdf'

set boxwidth 0.5
set style fill solid
set style data histograms

set datafile separator "," 

LINE1 = 1 + 3 * COUNT
LINE2 = LINE1 + 1
LINE3 = LINE1 + 2

plot '../test.csv' \
u ( ( int($0) == LINE1 || int($0) == LINE2 || int($0) == LINE3)? $4 : 1/0) ti col,'' \
u ( ( int($0) == LINE1 || int($0) == LINE2 || int($0) == LINE3)? $5 : 1/0) ti col,'' \
u ( ( int($0) == LINE1 || int($0) == LINE2 || int($0) == LINE3)? $6 : 1/0) ti col 
```

命令行调用

```
>gnuplot -e "COUNT=0" test.plot 
```

我怎样才能摆脱导致正确转变的空白字段？

我的 gnuplot 版本是 4.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:27:31.950

由于您已经在使用管道和 unix-ish 工具，我也会`sed`在这里使用：

```
set term post color
set output 'foo.ps'

set style data histograms 
set style histogram clustered 

set datafile separator ","     

set boxwidth 0.5
set style fill solid

SED_CMD = sprintf('< sed -n -e 1p -e %d,%dp test.csv',COUNT*3+2,COUNT*3+4)

plot for [COL=4:6] SED_CMD u COL ti col 
```

当我试图弄清楚你的脚本在做什么时，我已经简化了很多事情——我使用了情节迭代（在 gnuplot 4.3 中引入）。最初我认为这`plot '...' every ...`会起作用，但直方图似乎卡住了`every`，我（还没有！）明白为什么。

下面是对该`sed`命令的解释：

```
-e 1p      #print first line in file
-e %d,%dp  #print n'th line through m'th line (inclusive) where n=COUNT*3+2 and m=COUNT*3+4 
```

如果您担心 shell 注入，这似乎也是安全的：

```
gnuplot -e 'COUNT=";echo hi"' -persist test.gp
"test.gp", line 10: Non-numeric string found where a numeric expression was expected 
```

Gnuplot 只会将数字写入您的命令字符串。

# android - 在 ListFragment 中使用 CursorLoader 查询未返回任何数据

> ID：13294874
> 
> 赞同：0
> 
> 时间：2012-11-08T17:55:23.767
> 
> 标签：android, android-cursorloader

我继续努力让查询与 ListFragment 中的 CursorLoader 一起工作。我怀疑我的部分问题是我不确定某些细节。我有一个 xml 文件 myfragment.xml，它定义了我的应用程序中的两个片段。第一个片段，我的 ListFragment，由以下内容标识：

```
android:id="@+id/frag_mylist" 
```

当我在 ListFragment 类中调用 SimpleCursorAdapter 时，我相信我应该这样做：

```
String[] dataColumns = { "fieldname", "_id" };
    int[] viewIDs = { R.id.frag_mylist };
    mAdapter = new SimpleCursorAdapter(getActivity(), R.layout.myfragment, null, dataColumns, viewIDs, 0);
    setListAdapter(mAdapter);
    getLoaderManager().initLoader(0, info, (LoaderCallbacks<Cursor>) this); 
```

其中 info 是我从以前的活动中传递的 Bundle。那正确吗？此外，我还看到了一些示例，其中 0 作为 SimpleCursorAdapter 的最后一个参数，其他示例使用 CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER。有什么不同？最后，[此页面](http://developer.android.com/training/load-data-background/setup-loader.html) *可能*表明我必须在我的代码中检索 LoaderManager，如下所示：

```
private LoaderManager mLoaderManager;
public void onCreate(savedInstanceState) {
super.onCreate(savedInstanceState);
mLoaderManager = this.getSupportLoaderManager(); 
```

}

但这是我见过的唯一地方。这是必要的吗？我希望获得这些问题的答案将帮助我深入了解为什么我的查询没有返回任何结果。我相当有信心此时正在创建和填充我的数据库。非常感谢！

按照下面的要求，这里是我的 LoaderManager.LoaderCallbacks 接口的三个方法：

```
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection = "level='" + args.getString("Level") + "'";
    return (Loader<Cursor>) new CursorLoader(getActivity(), MY_URI,
            PROJECTION, selection, null, null); 
}
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    switch (loader.getId()) {
      case LOADER_ID:
        mAdapter.swapCursor((android.database.Cursor) cursor);
        break;
    }

}
public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);

} 
```

让我补充一下，我已经通过调试器验证了 onCreateLoader 方法中的 args.GetString("Level") 是“Beginning”，它应该是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:38:38.653

交换光标后，在 onLoadFinished 中添加这一行

```
mAdapter.notifyDataSetChanged() 
```

# xcode - 电弧误差？？unsafe_unretained 属性的现有 ivar 委托

> ID：13294875
> 
> 赞同：1
> 
> 时间：2012-11-08T17:55:25.093
> 
> 标签：xcode, automatic-ref-counting

我目前正在关注一本在 Xcode 中使用 arc 之前编写的书中的教程。我有与这里所说的完全相同的问题：

[unsafe_unretained 属性 'delegate' 的现有 ivar 'delegate' 必须是 __unsafe_unretained](https://stackoverflow.com/questions/8138902/existing-ivar-delegate-for-unsafe-unretained-property-delegate-must-be-un)

该问题已得到解答，但尚未明确说明为什么会这样。

书中的代码指出我使用此代码来声明成员变量：

```
the.h File
___________
#import <Cocoa/Cocoa.h>
@interface TestProgramDelegate : NSObject <NSApplicationDelegate> {
     NSWindow *window;
     NSTextField *message;
}

@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSTextField *message;
@property (assign) IBOutlet NSTextField *inputText;
@end

the.m file
__________
#import "the.h" //File

@implementation theHFileAppDelegate

@synthesize window
@synthesize message
@synthesize inputText 
```

当我在我的 .m 文件中合成变量时，我收到以下错误消息：具有分配属性的属性 'window' 的现有 ivar 'window' 必须是 __unsafe_unretaied。

但是，当我像书中所述删除成员变量的声明时，一切正常，并且我没有收到错误。

```
the.h File
___________
#import <Cocoa/Cocoa.h>
@interface TestProgramDelegate : NSObject <NSApplicationDelegate> {
     NSWindow *window;
     NSTextField *message;
}

@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSTextField *message;
@property (assign) IBOutlet NSTextField *inputText;
@end

the.m file
__________
#import "the.h" //File

@implementation theHFileAppDelegate

@synthesize window
@synthesize message
@synthesize inputText 
```

我的程序有效，但我想了解为什么这会导致麻烦。非常感谢。

# php - 指向简单 XML 的按钮链接

> ID：13294877
> 
> 赞同：0
> 
> 时间：2012-11-08T17:55:28.463
> 
> 标签：php, xml

好的，我有一个简单的 xml 调用，它通过 api 检索数据，请参见下面的代码：

```
 $file = 'http://mywebsite.com/computers.xml?apikey=88888&cid=api&limit=5&page=1 '     ;
      if(!$xml = simplexml_load_file($file))
      exit('Failed to open '.$file); 

      $total_pages = $xml->results->attributes()->totalPages;
      $current_page = $xml->results->attributes()->currentPage;
      $total_results = $xml->results->attributes()->totalResults;

      foreach($xml->computer as $computer){
  echo $computer['name']; 
```

这一切都完美无缺，并分解了页面总数、结果和当前页面。使用 if else 语句，我可以生成下一个和上一个按钮，但是如果我包含指向 api 的链接，当我单击它时，它只会调用页面并将结果显示为 xml 格式。

当我想要实现的是你提供一个简单地调用这些结果的第二页的按钮，即

```
 $file = 'http://mywebsite.com/computers.xml?apikey=88888&cid=api&limit=5&page=2 
```

但是，只需单击此链接即可显示 xml 格式的页面，所以我需要做的是单击一个按钮并通过简单的 xml 函数检索信息，但是我不知道这是否可能或如何去做.

因此，我们将不胜感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:59:01.007

您需要呈现一个链接到它自己的 url 的按钮，以及一个查询参数。

```
// get the param
$pageNum = $_GET['page'];
// modify your api call query string
$file = '...8888&cid=api&limit=5&page=' . $pageNum; 
```

然后你的下一个按钮将链接到

```
...href='ownpage.php?page=' . &pageNum + 1 
```

和上一个

```
...href='ownpage.php?page=' . &pageNum - 1 
```

我想在未提供 page 参数的情况下您的默认页面，您将默认 $pageNum 为 1。

# sql - 让查询的一部分基于另一部分进行更新

> ID：13294882
> 
> 赞同：-1
> 
> 时间：2012-11-08T17:55:41.753
> 
> 标签：sql, sql-server, tsql

我不是在寻找一个问题的具体答案，而是在做进一步研究时寻找一个大致方向。我有一个非常有用的查询，并且在某个方面，`mytable.column1`我经常更改。根据`mytable.column1`具体情况，表中还有一个我想更改的别名。因此，如果`mytable.column1`是 1，则别名需要类似于`aliasFor1`，如果是 2，则别名需要是`aliasFor2`。做这样的事情的命名法是什么，有什么好的资源来阅读它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:05:23.190

我认为您正在寻找[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)（如果我是对的）。此处还介绍[了 - 创建表](http://msdn.microsoft.com/en-us/library/ms174979%28v=sql.105%29.aspx)

```
create table computed
(
    column1 int, 
    descr as 'aliasFor'+CAST(column1 as varchar))
) 
```

每次更新`column1`时，另一列也会更新。

## [看到它发生在 SQL Fiddle](http://sqlfiddle.com/#!3/0cc93/1)

# java - 将 org.w3c.dom.Node 转换为 Document

> ID：13294884
> 
> 赞同：19
> 
> 时间：2012-11-08T17:55:47.077
> 
> 标签：java, domdocument, xmlnode

我有一个`Node`从一个`Document`。我想把`Node`它变成一个新的根节点`Document`。

我能想到的唯一方法是：

```
Node node = someChildNodeFromDifferentDocument;

DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setNamespaceAware(true);

DocumentBuilder builder = factory.newDocumentBuilder();

Document newDocument = builder.newDocument();
newDocument.importNode(node);
newDocument.appendChild(node); 
```

这行得通，但我觉得它相当烦人。有没有我没有看到的更简洁/更直接的方式，还是我必须这样做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-14T08:39:03.400

该代码对我不起作用-但是通过对此[相关问题](https://stackoverflow.com/questions/3184268/org-w3c-dom-domexception-wrong-document-err-a-node-is-used-in-a-different-docu)的一些更改，我可以使其工作如下：

```
Node node = someChildNodeFromDifferentDocument;
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setNamespaceAware(true);
DocumentBuilder builder = factory.newDocumentBuilder();
Document newDocument = builder.newDocument();
Node importedNode = newDocument.importNode(node, true);
newDocument.appendChild(importedNode); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T18:10:39.013

That looks about right to me. While it does look *generally* verbose, it certainly doesn't look significantly more verbose than other code using the DOM API. It's just an annoying API, unfortunately.

Of course, it's simpler if you've already got a `DocumentBuilder` from elsewhere - that would get rid of quite a lot of your code.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-28T08:19:31.443

来自节点的文档

```
Document document = node.getOwnerDocument(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-20T05:06:08.087

您可以简单地使用克隆旧文档`cloneNode`，然后将其类型转换为`Document`如下所示：

```
Document newDocument = (Document) node.cloneNode(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-03T08:13:09.327

也许您可以使用以下代码：

```
String xmlResult = XMLHelper.nodeToXMLString(node);
Document docDataItem = DOMHelper.stringToDOM(xmlResult); 
```

# java - Java设计模式：多个类的相同方法

> ID：13294886
> 
> 赞同：1
> 
> 时间：2012-11-08T17:55:49.087
> 
> 标签：java, android

我正在创建一个 Android 应用程序。我需要`draw`在许多 UI 类上重写该方法以创建自定义外观。这些类都是子类`View`。我想知道最好的方法是什么。我希望能够尽可能多地重用代码，所以我正在寻求组织方面的帮助。正如我现在所看到的，我有两个选择：

**选项 1 - 将一切子类化**

如果我想使用`LinearLayout`，我创建`CustomLinearLayout`. 如果我想使用`ImageView`，我创建`CustomImageView`. 在这些自定义类中的每一个上，我都以`draw`完全相同的方式覆盖。这似乎效率不高，因为我重复代码并扩展了许多几乎什么都不做的类。

**选项 2 - 超类的子类**

我最初的想法是扩展`View`和创建`CustomView`，因为它已经是我想要使用的所有类的超类。但是，这不起作用，因为我要使用的所有现有子类仍在扩展`View`，而不是`CustomView`.

有一个更好的方法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:07:45.153

一种可能的解决方案是将您的绘图逻辑提取到一个单独的类`DrawingCode`中。这可以包含一个静态方法，或者您甚至可以使用 的实例`DrawingCode`来使用其他参数自定义您的绘图代码。当然，您仍然需要覆盖该`draw()`方法，但只需编写一行代码即可调用`DrawingCode.draw(param1, param2)`. 通过这种方式，您可以将绘图代码存储在一个中心位置，而不必重复自己。

# dependency-injection - EJB3：如何在 Junit 测试期间将 DataSource 作为原始 POJO 注入 EJB3

> ID：13294887
> 
> 赞同：0
> 
> 时间：2012-11-08T17:55:50.977
> 
> 标签：dependency-injection, junit, ejb-3.0

关于在（EJB 3.0）EJB 集成测试期间通过其原始 POJO API 使用 junit 注入替代数据源的快速问题。

我一直在将原始 POJO 服务转换为 EJB3 会话 bean。这样做实际上意味着直接注释 POJO。这些服务还伴随着现有的 junit 集成测试（检查查询真实测试数据库的方法的结果）。

其中一些服务需要直接的 java.sql.Connection，因此我打算通过注入的 DataSource 来配置它。这样做的目的是让我可以将 bean 直接部署到应用程序服务器（WLS，就像它发生的那样）。但是，我也希望现有的集成测试能够继续工作。这些测试针对他们自己的测试数据库运行，因此我需要能够在运行集成测试时注入测试配置（在 POJO/非容器环境中）。

问题是：

> 一旦我设置了我的 EJB，有没有办法在不操作容器的情况下覆盖注入的 bean？
> 
> 换句话说，在运行原始 POJO 集成测试时是否没有直接的方法来注入新的 JNDI 配置？

示例服务类似于以下内容：

```
@Stateless(mappedName="MyInterface")
public class MyClassImpl implements MyInterface {
    ... 
    @Resource(name="jdbc/MyAppServerDataSourceJNDIName")
    DataSource ds;
    Connection conn;
...
} 
```

*注意我不打算将 DataSource 和 Connection 留在服务中，我只是想在有机地重构它之前得到一些合理的工作。*

**我正在考虑的解决方案：**

1.  我的一个（非常糟糕的）想法是只在包私有的服务中的 Connection 上提供一个设置器。这样，我的 junit 测试可以在执行之前设置连接。然后，在应用服务器环境中，将使用注入的 DS。虽然不漂亮。
2.  我已经查看了 ejb3unit (BaseSessionBeanFixture) 并正在考虑这一点。
3.  我也明白我可以在 junit 中创建一个 EJB 容器并在容器中运行。问题是，我想使用简单的 junit 测试并针对 POJO（而不是 EJB）来测试基本功能。
4.  我知道这可以在春天完成（我有点 EJB 新手），并且正在考虑使用 spring 配置连接 EJB。

那里有很多信息，但没有具体信息（主要是 JPA）。不过，在其他地方有一些关于 SO 的好指针。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:44:47.563

我的建议：

1.  删除该`conn`字段，并始终使用`ds.getConnection()`(and )。`conn.close()`在您的单元测试环境中，您可以模拟 DataSource/Connection（或以其他方式提供获取并提供连接到测试数据库的“真实”对象）。
2.  向 EJB 类添加一个 setter。事实上，你可以对注入的方法进行注解，这样你的容器和单元测试环境就更接近了。您说添加 setter 会“非常糟糕”，但我不知道为什么；setter 非常符合依赖注入的精神。我同意将 setter 添加到业务接口是没有意义的，但是在 bean 类中添加一个似乎很好。

#2 的例子：

```
@Resource(name="jdbc/MyAppServerDataSourceJNDIName")
public void setDataSource(DataSource ds) {
    this.ds = ds;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T09:45:04.173

这是为您的服务提供可注入连接（仅包私有）的附加样板的骨架，以便 EJB 可用作应用程序容器中的 EJB，也可用作 POJO，用于使用本地可配置连接进行 junit 测试。请注意，还有额外的样板，我们依靠调用 #closeConnection 的测试来正确管理它。

该解决方案可以追溯到原始问题和 bkail 的回答：

```
@Stateless(mappedName = "MyClass")
...
public class MyClass {

  // DataSource as configured for app-server environment
  @Resource(name="app-dataSource")
  private DataSource appDataSource;

  private Connection conn;

  /**
   * Injectable {@code Connection} for injection by unit tests.
   */
  /*package-private*/ void setConnection(Connection conn) {
      this.conn = conn;
  }

  /**
   * Get {@code Connection}. Use injected Connection if supplied, otherwise
   * obtain one from the datasource. Client is responsible for closing this
   * through call to #closeConnection (only!).
   */
  final Connection getConnection() {
    if (this.conn != null) {
      return this.conn;
    } else {
      //Needs exception handling
      //
      return getDataSource().getConnection)
    }
  }

  /*package-private*/ final void closeConnection(Connection conn) {
    if (conn != null && conn != this.conn) {
      try{
        conn.close();
      } catch ... {}
    }
  }

  /*
   * Accessor for the {@code DataSource}.
   * @return the DataSource
   */
  private DataSource getDataSource() {
    if (ds == null) {
      ...
      ds = (DataSource) ctx.lookup(jndiName);
      ...
    }
    return ds;
  }

  ...
}

public class TestMyClass {
  private Connection conn = null;

  @BeforeClass
  public void setUpBeforeClass() throws Exception {
    ...
    conn = DriverManager.getConnection(...);
  }

  @Test
  public void testMyMethod {
    MyClass mc = new MyClass();
    mc.setConnection(conn);           // Set our own connection

    // do test stuff
    ...
  }
  ...
} 
```

# .net - 如何在.Net上处理不同的屏幕分辨率

> ID：13294888
> 
> 赞同：3
> 
> 时间：2012-11-08T17:55:52.703
> 
> 标签：.net, compact-framework, resolution, screen-resolution

我需要在我的软件上添加一个分辨率与以前不同的新显示器，但我仍然需要两者的支持。

我正在考虑在每个 FORM LOAD 事件中包含一个开关盒，然后根据屏幕分辨率更改表单中包含的所有按钮、表单和对象的大小。

```
Select case Resolution
    case 800x480
        resizes my controls...
    case 1024x768
        resizes my controls...
end select 
```

该应用程序将在具有紧凑框架 3.5 的 Windows ce 6 上运行

问题是：

有没有更聪明的方法来处理 .NET 中的不同分辨率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:00:10.867

是的，尽管这取决于您使用的用户界面框架。

目标是设计您的界面以在不同的分辨率下合理扩展。这可以在 Windows 窗体中完成，例如，通过利用[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)和[Dock](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)属性，而不是使用绝对定位和大小调整。这允许项目随着窗口大小的变化而适当地“移动”和“缩放”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:33:53.800

如果 Anchor 和 Dock 对您有用，请按照 Reed 的建议使用。

话虽如此，如果您的屏幕真的很复杂，或者您处理的设备外形截然不同，以至于简单地调整控件的大小是不够的，我建议您构建您的解决方案/代码，以便您可以为每个表单开发单独的屏幕因素并将它们放置在运行时加载的卫星程序集中。您的逻辑必须位于表单之外才能执行此操作，但无论如何它确实应该这样做。

# c# - 如何以编程方式添加程序集引用？

> ID：13294889
> 
> 赞同：6
> 
> 时间：2012-11-08T17:55:57.120
> 
> 标签：c#, .net, visual-studio, t4, visual-studio-sdk

我正在使用 VSPackage 中的 T4 TextTemplating 服务：

```
var t4 = this.GetService(typeof(STextTemplating)) as ITextTemplating; 
```

通常，如果模板引用外部程序集中的类型，您可以使用该`assembly`指令。但是，直到运行时我才知道程序集，所以无论如何以编程方式将程序集引用添加到 T4 引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:08:33.867

我认为以下可能是一个解决方案......

编写自定义主机，见[http://msdn.microsoft.com/en-us/library/bb126519.aspx](http://msdn.microsoft.com/en-us/library/bb126519.aspx)

在该自定义主机中运行引擎之前，使用 LoadFrom 加载所需的程序集，有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/1009fa28.aspx](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)。

# java - 避免在基于网格的碰撞检测中重复？

> ID：13294890
> 
> 赞同：0
> 
> 时间：2012-11-08T17:55:58.290
> 
> 标签：java, algorithm

这是我的问题。

我的游戏，为了高效的渲染和碰撞被划分为区域。每个区域中都会有许多动态移动的对象。当他们移动时，我确定他们在哪些区域。

这意味着和对象可以在多个区域中。

如果我知道对象 A 在区域 1 和 2 中并且对象 B 也在区域 1 和 2 中，那么会发生什么我会做：

```
for each object in region 1 and 2
if A collides with B... 
```

我会有效地检查同一对两次。

我该怎么做才能只检查一次？是否有我应该使用的数据结构或算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:11:46.280

如果您可以**对 objects 进行排序**，那么您只需要检查`a < b`排序所在的对。可以是任何东西：数组中的索引、指针（对于允许指针值访问的语言来说是这样）。

```
for(Object a : list) {
    for(Object b : list) {
        if (a.compare(b) < 0) { 
```

非常简单，实际上可以解决问题。

如果你有*整数索引存储*，你可以这样做

```
for(int i = 0; i < list.length; i++) {
    for(int j = i + 1; j < list.length; j++) { 
```

你不会得到重复的。这适用于任意类型，`ArrayList`但可能不适用于任意类型。您也许可以克隆*一些*迭代器，但我不会打赌...

```
for(Iterator<Object> iter = list.iterator(); iter.hasNext(); ) {
    Object a = iter.next();
    Iterator<Object> iter2 = iter.clone();
    for(;iter2.hasNext();) {
        Object b = iter.next(); 
```

但说真的，这是一个黑客。如果它适用于所有 java 集合，我会感到惊讶。使用 Java 迭代器的一种更可靠但同样骇人听闻的解决方法：

```
for(Object a : list) {
    Iterator<Object> biter = list.iter();
    while(biter.next() != a) { };
    for(; biter.hasNext(); ) {
        Object b = biter.next(); 
```

一般来说，java foreach 语法`for(Clazz object : iterable) {`是“可爱的”，但远不如s**强大。**`Iterator`事实上，上面的旧整数 for 循环也很有魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:40:10.270

不，可能是您的网格太小了。边界框在碰撞检测方面也不是很好，您可以避免空白区域，但要以插入和删除为代价。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:59:35.260

为什么不存储以前计算的结果？

实际上，它将变为：

```
for each object in region 1 and 2
    if results doesn't contain (A collides with B)
       ...
       results = result of (A collides with B) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:07:06.430

Instead of a regular spaced grid you could use a quadtree ( [http://en.wikipedia.org/wiki/Quadtree](http://en.wikipedia.org/wiki/Quadtree) ), which lends itself better to index objects of varying size. Instead of having to pick a single cell size (which might be too big for some objects and too small for others), you can let the quadtree determine the appropriate cell size.

However, even then you can't prevent a single object from occuring in multiple tree nodes, but this shouldn't be a goal that you should try to achieve - the only thing you should prevent is that every object occurs in tens or hundreds of cells or Quadtree nodes, because that *does* hurt performance.

Hence, if all your objects are about the same size, a regular grid might still be the best choice as long as the cells are at least as large (or maybe twice as large?) as your objects.

# google-chrome - Chrome 扩展 - 工具栏中带有图标的应用

> ID：13294892
> 
> 赞同：1
> 
> 时间：2012-11-08T17:56:07.983
> 
> 标签：google-chrome, google-chrome-extension

所以我制作了扩展应用程序，您只能从新选项卡 -> 应用程序页面启动。

大多数人可以正常启动我的分机，但有些人使用覆盖此页面的快速拨号分机。对于他们，我想在工具栏上放置启动应用程序的图标。

但不知何故，除了“browser_action”或“page_action”之外，我还没有找到任何方法来做到这一点。

这真的不可能吗？

**更新：**

好的，所以这个不能做。但是对于使用快速拨号分机的用户有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:20:25.923

不，你不能

[请参阅https://developer.chrome.com/extensions/manifest.html](https://developer.chrome.com/extensions/manifest.html)中的文档

您一次只能选择一种类型

```
 // Pick one (or none)
      "browser_action": {...},
      "page_action": {...},
      "theme": {...},
      "app": {...}, 
```

该文档可帮助您选择

[https://developers.google.com/chrome/web-store/docs/choosing](https://developers.google.com/chrome/web-store/docs/choosing)

# networking - 使用 nc (netcat) 广播消息

> ID：13294893
> 
> 赞同：25
> 
> 时间：2012-11-08T17:56:07.667
> 
> 标签：networking, udp

我正在尝试使用 netcat 发送广播消息。

我打开了防火墙并发送这样的常规消息对我有用：

```
 host: nc -l 192.168.1.121 12101
  client: echo "hello" | nc 192.168.1.121 12100 
```

但我无法让这样的事情发挥作用。

```
 host: nc -lu 0.0.0.0 12101
  client: echo "hello" | nc -u 255.255.255.255 12100 
```

我使用了正确的标志吗？请注意，主机在 Mac 上，客户端在 Linux 上。你能给我一个适用于广播消息的例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-24T18:21:02.220

GNU 版本的 netcat 可能已损坏。（无论如何我都无法在 0.7.1 下工作。）请参阅[http://sourceforge.net/p/netcat/bugs/8/](http://sourceforge.net/p/netcat/bugs/8/)

我已经让 socat 工作了。下面的代码将 UDP 广播到端口 24000。

```
socat - UDP-DATAGRAM:255.255.255.255:24000,broadcast 
```

（在 socat 世界中，“-”的意思是“标准输入”。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-02T21:58:53.960

您并不是说要广播，这是使用/`-b`选项完成的。`nc``netcat`

```
nc -h 2>&1 | grep -- -b
-b          allow broadcasts 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-02T13:18:23.540

一个适用于 Ubuntu 的简单示例。中的所有信息都在其他答案中，但我必须将它们拼凑在一起，所以我想我会分享结果。

服务器

```
nc -luk 12101 
```

客户

```
echo -n "test data" | nc -u -b 255.255.255.255 12101 
```

客户端将挂起，直到您执行 Ctrl-C

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-09T00:56:22.567

对不起，如果我假设错了，但你提到你的防火墙设置正确，所以我猜主机和客户端不在同一个子网上？？？

如果是这种情况，并且该防火墙还充当路由器（或者如果数据包必须通过路由器），那么它将处理该数据包，但不会将其转发到其他接口。如果您希望这种情况发生，那么您需要发送定向广播。例如; 对于子网 192.168.1.0/24，定向广播将是 192.168.1.255，即子网中的最后一个 IP。然后防火墙，假设它有一个到 192.168.1.0/24 的路由并且它被设置为转发定向广播，就会将该广播转发到目的地或下一跳。将您的设备配置为转发定向广播...您需要参考其文档。对于 Cisco IOS，您可以在界面下键入“ip 定向广播”。

255.255.255.255 是有限广播，无论如何都不会通过您的路由器，它仅用于它所在的第 2 层链路。

至于netcat是如何设置的：

-l 0.0.0.0 12101，告诉 netcat 在所有启动并分配 IP 地址的接口上侦听端口 12101。-u 不需要，因为它告诉 netcat 侦听 unix 域套接字，google IPC :) （这是您的方案不起作用的最大原因。）

下面应该可以通过 netcat 将广播转发到另一个网络：

```
服务器：nc -l 0.0.0.0 12101
主持人：回声“你好” | 数控 192.168.1.255 12101

```

希望对您有所帮助，对不起，如果那是冗长的或与您正在寻找的东西不符:)

# sharepoint - 从 Sharepoint 列表修改传入过滤器值的简单方法？

> ID：13294897
> 
> 赞同：0
> 
> 时间：2012-11-08T17:56:29.850
> 
> 标签：sharepoint, sharepoint-2010, performancepoint

有人对此有快速而肮脏的解决方案吗？

我有一个 Sharepoint 列表过滤器，其值如下：

**信息技术**

**会计**

**人力资源**

等等

筛选值需要发送到 Sharepoint 列表 Web 部件和性能点图表。SP 列表 Web 部件可以按原样获取值，并过滤列表，但 PPS 需要将包含多个单词的值括起来，例如**[Information Technology]**和**[Human Resources]**。

关于如何将传入值修改为 PPS 图表的建议？或者更光滑的东西？

谢谢！

马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:50:37.390

抱歉，如果我误解了您的问题，但我最近做了类似的事情，在 SharePoint 列表中添加了一个额外的列，其中“[Member]”作为值，“Member”作为键，然后将值列发送到 PPS 报告.

# scala - 自动提升scala中的表达式以实现并发

> ID：13294902
> 
> 赞同：1
> 
> 时间：2012-11-08T17:56:36.900
> 
> 标签：scala, expression, future, lifting

我想以透明的方式并行评估任何函数的参数（没有任何源级别更改）。

例如 -
    `c = f(a, b)`应该导致：
    `a`并被`b`并行评估，然后调用`f`.

一种方法是将上述表达式转换为：

```
a' = future { a }
b' = future { b }
f' = lift f 
```

（这样`f: a -> b -> c`就变成了`f: Future<a> -> Future<b> -> Future<c>`）这样`c' = f'(a', b')`

这可以在scala中做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:22:22.670

假设您可以使用 Scala 2.10（尚未发布，但直到 Release Candidate 2）并且乐于使用实验性功能，使用 Scala 的[宏系统](http://scalamacros.org)应该很容易实现。

# python - 编写 XML 文件 - 基于变量的多个标签

> ID：13294905
> 
> 赞同：2
> 
> 时间：2012-11-08T17:56:40.130
> 
> 标签：python, xml

我在 Python 中使用 minidom（以及其他）从目录中提取文件列表，获取它们的修改时间，其他杂项。数据，然后将该数据写入 XML 文件。数据打印得很好，但是当我尝试将数据写入文件时，我只获取目录中一个文件的 XML。这是我的代码（为了可读性/空间，我删除了大量的`createElement`和`appendChild`方法以及任何不相关的变量）：

```
for filename in os.listdir((os.path.join('\\\\10.10.10.80\Jobs\success'))):

    doc = Document()
    modTime = datetime.datetime.fromtimestamp(os.path.getmtime('\\\\10.10.10.80\Jobs\success\\'+filename)).strftime('%I:%M:%S %p')
    done = doc.createElement('Printed Orders')
    doc.appendChild(done)
    ordernum = doc.createElement(filename)
    done.appendChild(ordernum)
    #This is where other child elements have been removed

    print doc.toprettyxml(indent='  ')
    xmlData = open(day_path, 'w')
    xmlData.write(doc.toprettyxml(indent='  ')) 
```

希望这足以了解发生了什么。由于`print`返回我期望的值，我认为 write 函数是我出错的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:06:16.653

如果我明白你的意思

您不能为每个文件创建一个不同的文档，因此您必须将文档的创建和 xml 文件的编写放在循环之外

```
from xml.dom.minidom import Document 
import os,datetime
path = "/tmp/"
day_path ="today.xml"
doc = Document()
done = doc.createElement('Printed Orders')

for filename in os.listdir((os.path.join(path))):

    print "here"
    modTime = datetime.datetime.fromtimestamp(os.path.getmtime(path+filename)).strftime('%I:%M:%S %p')
    doc.appendChild(done)
    ordernum = doc.createElement(filename)
    done.appendChild(ordernum)
    #This is where other child elements have been removed

print doc.toprettyxml(indent='  ')
xmlData = open(day_path, 'w')
xmlData.write(doc.toprettyxml(indent='  ')) 
```

**编辑**：对于 HierarchyRequestErr 错误，您还必须将根元素的创建放在循环之外

# ajax - 灯箱中的“添加到购物车” – Shopify

> ID：13294909
> 
> 赞同：0
> 
> 时间：2012-11-08T17:56:48.447
> 
> 标签：ajax, shopify

这是我商店的 URL：http: [//nibblesofnirvana.myshopify.com](http://nibblesofnirvana.myshopify.com)

（密码是nibblesofnirvana）

我想要做的是当人们点击“添加到购物车”时为他们提供两个选项。如果你现在在网站上“添加到购物车”，你会看到我已经有一个灯箱出现了。

我想要一个指向常规结帐页面的选项，然后是另一个指向我尚未创建的新结帐页面的选项。

但我无法让购物车工作。我想“立即购买”将人们正在查看的商品添加到购物车，而我显示的另一个选项只是链接到另一个页面。

我假设这与 Ajax API 有关，但 shopify 的文档并没有被证明是有帮助的......如果有人能指出我正确的方向，那将非常有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:06:01.710

你可以这样做：

单击`add to cart`--> 弹出[highslide js](http://highslide.com/)的小窗口，在此弹出窗口中，您可以放置​​两个选项.. 我是否按照您的想法？

# c# - 从 mvc 控制器设置一个 javascript 变量

> ID：13294914
> 
> 赞同：5
> 
> 时间：2012-11-08T17:56:54.450
> 
> 标签：c#, javascript, asp.net-mvc, controller

是否可以从 ac# 控制器设置 javascript 变量？我们有一种情况，我们用一个不需要用户登录的愚蠢版本覆盖我们的母版页。但是，我们的 javascript 超时计时器仍在运行。我想在覆盖主控的控制器方法中，将超时覆盖到一些巨大的东西。

```
public dumbDownController()
{
     ViewData["MasterPageOverride"] = "~/Views/Shared/_NoLogin.cshtml";

     //Somehow reset that timer below from 20 to like 9999\. To simulate no timeout.

     return View("Cities", model);
} 
```

然后我们的javascript文件就有了。

```
tb.sessionTimer = (function () {
   var SESSION_TIMEOUT = 20;
   var currentTimeoutCounter = SESSION_TIMEOUT * 60;
 ...
 lots more irrelevant to question
 ...
 } 
```

大型应用程序，因此希望几乎不更改 javascript。想从控制器处理它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T18:05:54.640

## 简短的回答：

```
<script>
    var xyz = @ViewData["MasterPageOverride"];
</script> 
```

## 更长的答案：

您不能在 Controller 中直接分配 JavaScript 变量，但在 View 中您可以输出可以执行相同操作的 JavaScript。

您需要以某种方式将变量传递给视图。对于这个例子，我将使用`ViewData`对象字典。您可以在 Controller 中设置元素：

```
public ActionResult SomeAction()
{
    ViewData["aNumber"] = 24;
} 
```

然后在视图中可以将其用作：

```
<script>
    var xyz = @ViewData["aNumber"];
</script> 
```

它将被发送到客户端浏览器：

```
<script>
    var xyz = 24;
</script> 
```

**字符串**需要更多注意，因为您需要将它们括在`''`or之间`""`：

```
<script>
    var xyz = "@ViewData["aString"]";
</script> 
```

正如@Graham 在评论中提到的那样，如果字符串恰好是有效的**JSON**（或任何[对象文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)，但[创建 JSON 非常容易](https://stackoverflow.com/questions/1056121/how-to-create-json-string-in-c-sharp)），并且您想将其用作 JavaScript 对象，您可以：

```
<script>
    var xyz = @ViewData["aJsonString"];
</script> 
```

只需确保输出是有效的 JavaScript。

在脚注中，请注意特殊的 HTML 字符，例如`<`它们会自动进行[HTML 编码](https://stackoverflow.com/questions/1812473/difference-between-url-encode-and-html-encode)以防止 XSS 攻击，并且由于您输出的是 JavaScript 而不是 HTML，这可能会搞砸。为了防止这种情况，您可以使用[`Html.Raw()`](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.118%29.aspx)如下：

```
<script>
    var xyz = @Html.Raw(ViewData["aJsonString"]);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:00:43.217

如果`tb`在您的控制器范围内，请考虑仅覆盖 sessionTimer 函数：

```
public dumbDownController(){
   ...
   tb.sessionTimer = function(){return false;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:08:48.690

你有两个选择（据我所知）：

从 viewbag、data、tempdata 创建变量，如下所示：

```
var SESSION_TIMEOUT = @ViewData["MasterPageOverride"];
var SESSION_TIMEOUT = @ViewBag["MasterPageOverride"];
var SESSION_TIMEOUT = @TempData["MasterPageOverride"]; 
```

或者，通过 jQuery AJAX 来实现：

```
$.ajax({
                url: '/YourController/YourAction',
                type: 'post',
                data: { id: id },
                dataType: 'json',
                success: function (result) {
                    // setVar

                }
            }); 
```

# javascript - XMLHttpRequest 上传属性的好处究竟是什么？

> ID：13294917
> 
> 赞同：5
> 
> 时间：2012-11-08T17:57:02.530
> 
> 标签：javascript, upload, xmlhttprequest, progress, addeventlistener

我试图弄清楚上传属性在`XMLHttpRequest`对象中的作用。在我看来，不管有没有它，`xhr`进度的事件监听器都会监控一个`xhr.send(file)`.

我查看了 W3C，发现：“上传属性必须返回关联的 XMLHttpRequestUpload 对象。”。

但我不明白这与 using 的关系如何，`xhr.upload.addEventListener("progress", progressFunction, false);`因为`xhr.addEventListener("progress", progressFunction, false);`会做同样的事情。

我问是因为我正在寻找为上传进度创建自定义图形......我**不会**使用 HTML5 进度元素或 jquery。严格的 Javascript 用于客户端。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T18:41:49.940

如果您将事件附加到`xhr`自身，那么它只会`"progress"`在上传完成后更新。

`xhr`对象与明确用于上传的对象之间存在差异。

# python - 您可以将图像“流式传输”到 ffmpeg 以构建视频，而不是将它们保存到磁盘吗？

> ID：13294919
> 
> 赞同：55
> 
> 时间：2012-11-08T17:57:14.003
> 
> 标签：python, image, stream, ffmpeg, python-imaging-library

我最近的工作涉及以编程方式制作视频。在 python 中，典型的工作流程如下所示：

```
import subprocess, Image, ImageDraw

for i in range(frames_per_second * video_duration_seconds):
    img = createFrame(i)
    img.save("%07d.png" % i)

subprocess.call(["ffmpeg","-y","-r",str(frames_per_second),"-i", "%07d.png","-vcodec","mpeg4", "-qscale","5", "-r", str(frames_per_second), "video.avi"]) 
```

此工作流程为视频中的每一帧创建一个图像并将其保存到磁盘。保存所有图像后，调用 ffmpeg 从所有图像构建视频。

将图像保存到磁盘（不是在内存中创建图像）消耗了这里的大部分周期，并且似乎没有必要。有没有办法执行相同的功能，但不将图像保存到磁盘？因此，将调用 ffmpeg 并在构建后立即构建图像并将其馈送到 ffmpeg。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-08T21:58:29.567

好的，我让它工作了。感谢 LordNeckbeard 建议使用 image2pipe。我不得不使用 jpg 编码而不是[png，因为带有 png 的 image2pipe 在我的 ffmpeg 版本上不起作用](https://ffmpeg.org/trac/ffmpeg/ticket/1272)。第一个脚本与您的问题代码基本相同，除了我实现了一个简单的图像创建，它只创建从黑色到红色的图像。我还添加了一些代码来计时执行。

**串行执行**

```
import subprocess, Image

fps, duration = 24, 100
for i in range(fps * duration):
    im = Image.new("RGB", (300, 300), (i, 1, 1))
    im.save("%07d.jpg" % i)
subprocess.call(["ffmpeg","-y","-r",str(fps),"-i", "%07d.jpg","-vcodec","mpeg4", "-qscale","5", "-r", str(fps), "video.avi"]) 
```

**并行执行（没有图像保存到磁盘）**

```
import Image
from subprocess import Popen, PIPE

fps, duration = 24, 100
p = Popen(['ffmpeg', '-y', '-f', 'image2pipe', '-vcodec', 'mjpeg', '-r', '24', '-i', '-', '-vcodec', 'mpeg4', '-qscale', '5', '-r', '24', 'video.avi'], stdin=PIPE)
for i in range(fps * duration):
    im = Image.new("RGB", (300, 300), (i, 1, 1))
    im.save(p.stdin, 'JPEG')
p.stdin.close()
p.wait() 
```

结果很有趣，我运行每个脚本 3 次来比较性能： **串行：**

```
12.9062321186
12.8965060711
12.9360799789 
```

**平行线：**

```
8.67797684669
8.57139396667
8.38926696777 
```

所以看起来并行版本快了大约 1.5 倍。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-29T14:06:08.860

[imageio](https://imageio.readthedocs.io/en/stable/examples.html#writing-videos-with-ffmpeg-and-vaapi)直接支持这一点。它使用 FFMPEG 和[Video Acceleration API](https://en.wikipedia.org/wiki/Video_Acceleration_API)，速度非常快：

```
import imageio

writer = imageio.get_writer('video.avi', fps=fps)
for i in range(frames_per_second * video_duration_seconds):
    img = createFrame(i)
    writer.append_data(img)
writer.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-30T03:04:30.150

我有点晚了，但是[**`VidGear`**](https://github.com/abhiTronix/vidgear)Python 库的[WriteGear API可以通过](https://abhitronix.github.io/vidgear/latest/gears/writegear/introduction/) **[硬件编码器支持](https://abhitronix.github.io/vidgear/latest/gears/writegear/compression/usage/#using-compression-mode-with-hardware-encoders)****在任何平台上实时将 OpenCV 帧流水线化到 FFmpeg 的过程自动化，**同时*提供相同的 opencv-python 语法*。这是一个基本的python示例：

```
# import libraries
from vidgear.gears import WriteGear
import cv2

output_params = {"-vcodec":"libx264", "-crf": 0, "-preset": "fast"} #define (Codec,CRF,preset) FFmpeg tweak parameters for writer

stream = cv2.VideoCapture(0) #Open live webcam video stream on first index(i.e. 0) device

writer = WriteGear(output_filename = 'Output.mp4', compression_mode = True, logging = True, **output_params) #Define writer with output filename 'Output.mp4' 

# infinite loop
while True:

    (grabbed, frame) = stream.read()
    # read frames

    # check if frame empty
    if not is grabbed:
        #if True break the infinite loop
        break

    # {do something with frame here}
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

    # write a modified frame to writer
    writer.write(gray) 

    # Show output window
    cv2.imshow("Output Frame", frame)

    key = cv2.waitKey(1) & 0xFF
    # check for 'q' key-press
    if key == ord("q"):
        #if 'q' key-pressed break out
        break

cv2.destroyAllWindows()
# close output window

stream.release()
# safely close video stream
writer.close()
# safely close writer 
```

来源：[https ://abhitronix.github.io/vidgear/latest/gears/writegear/compression/usage/#using-compression-mode-with-opencv](https://abhitronix.github.io/vidgear/latest/gears/writegear/compression/usage/#using-compression-mode-with-opencv)

您可以查看[VidGear Docs](https://abhitronix.github.io/vidgear)以获得更高级的应用程序和功能。

# c# - DNN 单个包上的多个模块

> ID：13294920
> 
> 赞同：3
> 
> 时间：2012-11-08T17:57:18.240
> 
> 标签：c#, asp.net, module, dotnetnuke, manifest

是否可以创建包含多个模块的 dotnetnuke (v5) 包？我的意思是：清单上有一个“moduleDefinitions”元素，看起来支持多个模块，但是向它添加另一个子元素不会产生任何影响。

dnn 清单如下所示：

```
<dotnetnuke type="Package" version="5.0">
<packages>
    <package name="MyModuleName" type="Module" version="01.00.00">
        <friendlyName>MyModuleName</friendlyName>
        <components>
            <component type="Module">
                <desktopModule>
                    <moduleName>MyModuleName</moduleName>
                    <foldername>MyModuleName</foldername>
                    <supportedFeatures />
                    <businessControllerClass />
                    <moduleDefinitions>
                        <moduleDefinition>...</moduleDefinition>
                        <!-- this one is ignored -->
                        <moduleDefinition>...</moduleDefinition>
                    <moduleDefinitions> 
```

无论如何，我需要在同一个包中打包两个或多个模块。可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T19:05:53.217

多个模块定义元素应该可以正常工作。如果一个模块中有多个定义，当您将模块添加到页面时，将添加每个定义的实例。扩展列表中仍然只有一个条目。

如果你想要两个独立的模块，你将需要两个`<package>`元素（在 a中有两个元素是行不通的*）*。`<component type="Module">``<package>`

# r - Hadoop 和 R 入门

> ID：13294924
> 
> 赞同：3
> 
> 时间：2012-11-08T17:57:28.443
> 
> 标签：r, mongodb, hadoop

我正在尝试学习“大数据”，并认为唯一的开始方法就是直接深入研究。值得注意的是，我将使用家里的一台机器。对于上下文，我有大约 700 个文本文件，总计大约 300 GB 的数据。每个文件都包含上个月从 Twitter 的消防站捕获的 JSON 响应。

我喜欢 R，并最终喜欢用它来研究我的数据集，但我知道我需要一种“存储”数据的方法。我听到了很多关于 Hadoop 和 HDFS 的信息，但无法理解它。我是否可以简单地将文本文件“复制”到本地计算机上的 HDFS 并使用`RHadoop`编写 Map/Reduce 语句来创建数据集？

最后，我已经启动并运行了 MongoDB，并且正在考虑将数据存储在那里，但我不确定我是否会获得分析性能提升，尽管我知道有一个适用于 Haddop 的适配器。

我的问题：成功捕获数据后，存储数据的最佳方式是什么，以便我可以使用 R（和其他工具）来分析数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:55:09.000

你绝对不应该使用 MongoDB。它不是为批量分析而设计的，也不会为此目的而发挥作用。

您将文件简单地复制到 HDFS 并使用 RHadoop 的想法通常是一个不错的想法，但仅使用一台机器并不是理想的情况。它肯定会很好地利用您的一台机器拥有的多个内核，并且可以很好地处理所有内容而不会溢出内存，但它可能不是完成这项工作的理想工具。

我不太了解那里的 R 库，但我猜可能会有更好的用于处理大型数据集的库，但不会大到需要多台机器。地狱，即使只是将您的数据放在更传统的分析数据库中也可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:35:26.830

如果您不想进行大量批处理并对推文进行实时查询，那么像 MongoDB 这样的非关系数据库将非常适合您的需求。因此，对于实时查询，请查看 MongoDB 的聚合框架。

所以它归结为：你真正想用数据做什么？查找地点周围的推文并显示平均关注者数量？还是长期趋势分析？

这是一篇 ruby​​/mongodb 帖子，有人如何抓取 300 万条推文：[how-i-scraped-and-stored-over-3-million-tweets](http://rawkes.com/articles/how-i-scraped-and-stored-over-3-million-tweets)

# bulletphysics - 如何在 Irrlicht 中进行物理模拟？

> ID：13294929
> 
> 赞同：0
> 
> 时间：2012-11-08T17:58:07.943
> 
> 标签：bulletphysics, irrlicht

Irrlicht 有良好的物理模拟吗？我看到它有碰撞检测，但它可以为物体设置动画，让它们翻倒、相互碰撞等等吗？

如果没有，除了 Irrlicht 之外，您能否使用诸如子弹之类的物理引擎，而不会失去便携性和性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:36:54.917

Bullet Physics 应该适合大多数 3D 物理模拟。

它针对大多数平台进行了优化。

这个[WIKI](http://www.irrlicht3d.org/wiki/index.php?n=Main.GettingStartedWithBullet)应该是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:11:53.243

Irrlicht 只是一个 3D 引擎，因此不包括开箱即用的物理引擎。但是，对于 Bullet、Physx、Havok 和 Irrlicht 的其他物理引擎，有许多包装器。您可能必须包含这些插件才能将 irrlicht 和您选择的物理引擎组合在一起。

# google-apps-script - 从 UI 输入框中替换模板上的文本

> ID：13294931
> 
> 赞同：0
> 
> 时间：2012-11-08T17:58:16.913
> 
> 标签：google-apps-script

我基本上修改了 UI google 文档中的 UI 以使其适应我的需要。我有一个从用户那里获取信息的面板，然后它应该替换模板中的一些单词，最后发送一封电子邮件。这是我到目前为止所写的。一切都很好，只是它使替换不起作用的部分不起作用 which(var Time = setValue(e.parameter.userName) 但我不确定是否正确或者我应该使用不同的东西。我尝试使用 var Time = emailTemplate。 replace("TIME",e.parameter.userName)); 但我收到参考错误，e 未定义且未运行。任何帮助，将不胜感激。

```
 function onOpen() {
var subMenus = [{name:"test", functionName: "doGet"}];
           SpreadsheetApp.getActiveSpreadsheet().addMenu("texts", subMenus);}

    function doGet() {
  var doc = SpreadsheetApp.openById("SP ID");
  var app = UiApp.createApplication().setTitle('TITLE1');
  var grid = app.createGrid(10, 10);
  grid.setWidget(0, 0, app.createLabel('Time PST'));

   grid.setWidget(0, 1, app.createTextBox().setName('Time'));
  grid.setWidget(1, 0, app.createLabel('Minutes have passed'));

  grid.setWidget(1, 1, app.createTextBox().setName('Minutes'));
  grid.setWidget(2, 0, app.createLabel('Enter Name'));
  grid.setWidget(2, 1, app.createTextBox().setName('Name'));
  // Create a vertical panel..
  var panel = app.createVerticalPanel();

  // ...and add the grid to the panel
  panel.add(grid);

  var button = app.createButton('Submit');
  var handler = app.createServerHandler('b');
  handler.addCallbackElement(grid);
  button.addClickHandler(handler);

  // Add the button to the panel and the panel to the application, then display the                      application app
    panel.add(button);
    app.add(panel);
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.show(app);
  }

  function b() {

    var doc = SpreadsheetApp.openById("SP ID");
    var emailTemplate =                              SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A1").getValue() ;
    var address = "albdominguez25@gmail.com";
    var Time = setValue(e.parameter.Time);
    var emailSubject = "Subject";
    emailTemplate = emailTemplate.replace("TIME",Time);  

    MailApp.sendEmail(address, emailSubject, emailTemplate);
    Browser.msgBox("Your Email has been sent!");

    // Clean up - get the UiInstance object, close it, and return
    var app = UiApp.getActiveApplication();
    app.close();
    // The following line is REQUIRED for the widget to actually close.
    var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.show(app);
  }​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:29:21.993

看起来你在正确的轨道上，Srik 的答案是正确的，但听起来你不需要或不想做第二部分。但是您确实需要`setID("Time")`在 TextBox 上才能获取其中的数据 usign `e.parameter.Time`。

你应该改变

```
var Time = setValue(e.parameter.Time); 
```

至

```
var Time = e.parameter.Time; 
```

这应该对你有用，虽然我会采取完全不同的方式，将 HTMLService 与模板文件一起使用，并将脚本作为独立应用程序发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:15:54.113

我假设您想在单击按钮时更改 TextBox 'Time' 中的文本。

首先，你需要在文本框上设置一个id

```
function doGet(){
  ...
  grid.setWidget(0, 1, app.createTextBox().setName('Time').setid('Time');
  ...
} 
```

然后，您需要在 TextBox 上使用 setText() 来更改值

```
function b(e){ // Note the argument 'e'
  ...
  var Time = app.getElementById('Time').setText(e.parameter.Time);
  ...
} 
```

# .net - Visual Studio 2012 4 个项目中的 1 个未加载

> ID：13294932
> 
> 赞同：2
> 
> 时间：2012-11-08T17:58:17.570
> 
> 标签：.net, visual-studio-2012, projects-and-solutions

*   视觉工作室 2012、TFS、Windows 7

我们有一个包含 4 个项目的 C# 解决方案。其中一个项目无法加载。加载解决方案时，我收到错误消息“解决方案中的一个或多个项目未正确加载。有关详细信息，请参阅输出窗口。” 为简洁起见，输出窗口显示“$devpath\Remits\Business\Admin.Portal\Remits\Business\Admin.Portal\Remits.Business.Admin.Portal.csproj”，其中 $devpath 代表本地 src 路径。

如果我尝试重新加载项目，我会收到一条错误消息，指出“项目文件 '$devpath\Remits\Business\Admin.Portal\Remits\Business\Admin.Portal\Remits.Business.Admin.Portal.csproj' 已被移动，重命名或不在您的计算机上。”

项目的路径是 $devpath\Remits\Business\Admin.Portal\Remits.Business.Admin.Portal.csproj。您会注意到路径中有一个部分被不必要地重复。我使用 notepad++ 查看 .sln 和 .csproj，但我对这些字段的了解不够，无法解决问题。

我已经寻找可能的解决方案，但还没有找到解决办法。我看过的一些网站建议删除 .suo 文件，但这并没有解决问题。如果需要查看 .sln 和 .csproj 中的某些字段，我将很乐意提供它们。感谢您的任何帮助，您可以提供。

[http://tzuhsun.wordpress.com/2012/07/20/the-project-file-0-has-been-moved-renamed-or-is-not-on-your-computer/](http://tzuhsun.wordpress.com/2012/07/20/the-project-file-0-has-been-moved-renamed-or-is-not-on-your-computer/)

[http://codingcramp.blogspot.com/2011/03/project-file-has-been-moved-renamed-or.html](http://codingcramp.blogspot.com/2011/03/project-file-has-been-moved-renamed-or.html)

较旧： [http ://social.msdn.microsoft.com/Forums/en-HK/tfsgeneral/thread/a4c3f944-f36b-4a8d-9cb5-a1133f717ce5](http://social.msdn.microsoft.com/Forums/en-HK/tfsgeneral/thread/a4c3f944-f36b-4a8d-9cb5-a1133f717ce5)

解决方案文件信息：

```
 Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Remits.Business.Admin.Portal", "Remits.Business.Admin.Portal.csproj", "{2D08EC70-FAC0-4360-910C-0435FD4BE6E6}"
    Global
        GlobalSection(TeamFoundationVersionControl) = preSolution
            SccNumberOfProjects = 4
            SccProjectUniqueName0 = Remits.Business.Admin.Portal.csproj
            SccProjectName0 = .
            SccAuxPath0 = http://someTFSserver:8080/tfs/defaultcollection
            SccLocalPath0 = .
            SccProvider0 = {4CA58AB2-18FA-4F8D-95D4-32DDF27D184C}
                   ..snip..
        GlobalSection(TeamFoundationVersionControl) = preSolution
            SccNumberOfProjects = 4
            SccEnterpriseProvider = {4CA58AB2-18FA-4F8D-95D4-32DDF27D184C}
            SccTeamFoundationServer = http://someTFSserver:8080/tfs/defaultcollection       
            SccProjectUniqueName0 = Remits.Business.Admin.Portal.csproj
            SccProjectName0 = Remits/Business/Admin.Portal
            SccLocalPath0 = Admin.Portal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:06:23.707

如果您不熟悉解决方案文件结构，我建议您：

1.  制作卸载项目的额外副本
2.  从您的解决方案中删除卸载项目，并确保它已从文件系统中删除，除了您制作的额外副本
3.  添加一个新项目以将卸载项目重新创建到您的解决方案中
4.  一旦您的解决方案加载正常，您就可以删除额外的备份

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T21:00:33.293

我在一个 Web 项目中遇到了这个问题，结果证明它与损坏的 IIS Express 配置有关。

我手动删除了 IIS Express 配置和工具中的项目绑定；

在我的 .csproj 文件中。希望这可以帮助其他在这里找到方式的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T05:01:24.217

我也出现了同样的问题！不需要做上面的那些事情！检查：如果您在上次保存时更改了任何文件夹名称或文件夹结构。检查所有文件是否都在正确的位置并正确命名？

而已！你会准备好你的解决方案，因为我明白了！

# python - 为 Dynatree 创建嵌套的 Python 字典

> ID：13294933
> 
> 赞同：0
> 
> 时间：2012-11-08T17:58:22.137
> 
> 标签：python, data-structures, dynatree

dynatree jquery 树元素可以从以下格式读取：

```
{'title':'a','children':[{'title':'b','children':[{'title':'c','children':[]}]}]} 
```

我有一条路径 a:b:c。

如何生成上面给出的嵌套python字典，它将使用给定的路径？

我有很多不同的路径，其中一些重复'a：b：c：d'，添加新元素，一些

他们完全不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:22:48.177

拆分路径`:`并从最后一个元素开始，将每个元素封装到其容器中：

```
def path_to_tree(p):
    elems = p.split(':')
    head = None
    for elem in reversed(elems):
        head = {'title': elem, 'children': [] if head is None else [head]}
    return head 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:24:00.593

```
tree = {'title':'a','children':[{'title':'b','children':[{'title':'c','children':[]}]}]}
print tree['a']['b']['c'] 
```

# visual-c++ - tfs 没有“模拟调试”配置

> ID：13294934
> 
> 赞同：0
> 
> 时间：2012-11-08T17:58:24.603
> 
> 标签：visual-c++, tfs

我正在尝试构建一个包含 3 个项目的解决方案。解决方案配置为Debug| 赢32。在解决方案配置属性上，对于项目：项目配置平台第一个项目：模拟调试 Win32 第二个项目：调试 Win32 和第三个相同。由于第一个项目配置模拟调试，构建失败。错误抛出 LINK : fatal error LNK1104: cannot open file $(Configuration).... 当我在 VS2012 上构建时，它构建得很好。它创建一个文件夹“Mock Debug”并将库放在那里。VS可以找到lib。没问题，编译成功。但在 tfs 中，我无法指定配置“模拟调试”，因此它不会创建文件夹“模拟调试”，也不会放置 .lib。那里。我无法更改任何解决方案配置或项目属性。有没有办法为 tfs 构建定义中的解决方案下构建的各个项目指定确切的配置。我知道我可以在 build definito 中传递 MsBuild Argument，但我不确定这是否可行。我尝试在“要构建的项目”和“要构建的配置”下手动指定“模拟调试”配置。但它没有找到“模拟调试”配置。我发现团队构建确实覆盖了项目中指定的 $OutDir 并将所有二进制文件放在其他地方，因此它找不到 .lib 文件。但问题是 $(Configuration) "Mock Debug" 指定的文件夹未创建。我想我在这里遗漏了一些东西......任何建议。我知道我可以在 build definito 中传递 MsBuild Argument，但我不确定这是否可行。我尝试在“要构建的项目”和“要构建的配置”下手动指定“模拟调试”配置。但它没有找到“模拟调试”配置。我发现团队构建确实覆盖了项目中指定的 $OutDir 并将所有二进制文件放在其他地方，因此它找不到 .lib 文件。但问题是 $(Configuration) "Mock Debug" 指定的文件夹未创建。我想我在这里遗漏了一些东西......任何建议。我知道我可以在 build definito 中传递 MsBuild Argument，但我不确定这是否可行。我尝试在“要构建的项目”和“要构建的配置”下手动指定“模拟调试”配置。但它没有找到“模拟调试”配置。我发现团队构建确实覆盖了项目中指定的 $OutDir 并将所有二进制文件放在其他地方，因此它找不到 .lib 文件。但问题是 $(Configuration) "Mock Debug" 指定的文件夹未创建。我想我在这里遗漏了一些东西......任何建议。配置。我发现团队构建确实覆盖了项目中指定的 $OutDir 并将所有二进制文件放在其他地方，因此它找不到 .lib 文件。但问题是 $(Configuration) "Mock Debug" 指定的文件夹未创建。我想我在这里遗漏了一些东西......任何建议。配置。我发现团队构建确实覆盖了项目中指定的 $OutDir 并将所有二进制文件放在其他地方，因此它找不到 .lib 文件。但问题是 $(Configuration) "Mock Debug" 指定的文件夹未创建。我想我在这里遗漏了一些东西......任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:24:17.817

把这样的配置或者dll放在建机上的如下路径就行了

*“C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies”*

**注意**：您需要更换浴缸取决于您使用的 VS 版本。

# java - 在 Spring 3.1 mvc webservice 中设置响应的内容类型

> ID：13294936
> 
> 赞同：2
> 
> 时间：2012-11-08T17:58:28.050
> 
> 标签：java, web-services, spring, model-view-controller, content-type

我正在尝试设置一个将返回 xml 的 spring 3.1 mvc webservice。我有一个方法将 xml 作为已经调用 getxmlforparam() 的字符串返回。下面是我到目前为止的代码片段，它总是返回正确的内容，但内容类型 = text/html.

除了我在下面尝试过的 RequestMapping 生成和 response.addHeader 技术之外，还有其他方法可以设置内容类型吗？

```
@Service
@RequestMapping(value="endpointname")
public class XmlRetriever {

  //set up variables here
  @RequestMapping(method = RequestMethod.GET, produces = "application/xml")
  @ResponseBody
  public String getXml(
    @RequestParam(value = "param1") final String param1,
    /*final HttpServletResponse response*/){

    String result = null;
    result = getxmlforparam(param1);

    /*response.addHeader("Content-Type", "application/xml");*/
    return result;
} 
```

谢谢。

编辑：通过以下 MikeN 的建议直接写入响应对象的解决方案：

```
@Service
@RequestMapping(value="endpointname")
public class XmlRetriever {

  //set up variables here
  @RequestMapping(method = RequestMethod.GET, produces = "application/xml")
  @ResponseBody
  public String getXml(
    @RequestParam(value = "param1") final String param1,
    final HttpServletResponse response){

    String result = null;
    result = getxmlforparam(param1);

    response.setContentType("application/xml");
    try{
     PrintWriter writer = response.getWriter();
     writer.write(result);
    }
    catch(IOException ioex){
      log.error("IO Exception thrown when trying to write response", ioex.getMessage());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:47:00.097

您应该注册自己的 HttpMessageConvertor（它现在应该使用 StringHttpMessageConverter，它输出文本/纯文本，请参阅[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http /converter/StringHttpMessageConverter.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/converter/StringHttpMessageConverter.html)），或者您应该自己处理整个请求。

后者可能是最简单的，但 Spring-MVC'ish 最少。您只需返回 null，并使用响应对象来写入结果。

Spring-MVC 方法是在 HttpMessageConverter 中实现从内部对象到 XML 的映射，并从 MVC 控制器函数返回内部对象和 @ResponseBody。

# jquery - 使用 jqGrid getChangedCell 方法时出错

> ID：13294937
> 
> 赞同：1
> 
> 时间：2012-11-08T17:58:28.270
> 
> 标签：jquery, jqgrid, struts2

我正在使用包含 grid.base.js 的 jqGrid 4.3.2；jquery.fmatter.js；网格.custom.js; 网格.common.js；grid.jqueryui.js 模块。

调用方法 getChangedCells 时

```
var modified = $("tableau").jqGrid('getChangedCells', 'all'); 
```

我有这个错误：

> 未捕获的 jqGrid - 没有这样的方法：getChangedCells

我是否需要其他模块才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:29:46.163

我不确定我是否理解你的所作所为。如果您有错误，`"No such method"`您应该按照您使用的确切顺序包含 JavaScript 文件的*完整列表。*[getChangedCells](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#methods)方法在`grid.celledit.js`模块中定义（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.celledit.js#L459)）。看来您没有加载该模块。

# javascript - TinyMCE 自定义文本渲染

> ID：13294939
> 
> 赞同：1
> 
> 时间：2012-11-08T17:58:32.813
> 
> 标签：javascript, tinymce

我希望能够设置这样的内容：

```
<p>Here is an image: <img src="{filedir_1}/foo.jpg"></p> 
```

当 WYSIWYG 呈现它时，我希望能够用基本 url 替换那个 {filedir_1} 。但我不想“替换”内容本身，这意味着当我点击保存时，我希望 {filedir_1} 仍然存在。

知道我能不能做到这一点？(TinyMCE 3)

# c# - Clearquest 查询

> ID：13294940
> 
> 赞同：4
> 
> 时间：2012-11-08T17:58:33.373
> 
> 标签：c#, .net, clearquest

我一直在寻找一段时间，找不到一个例子......

使用 C# 和 Clearquest API 我想做一些像运行查询一样简单的事情（例如按所有者获取 CR 的列表）

如何以编程方式创建 CQ 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:36:04.573

取自[http://www.ibm.com/developerworks/forums/thread.jspa?threadID=78133](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=78133)

```
SessionClass cqSession = new SessionClass();
cqSession.UserLogon("user", "pass", "dbname", 2,
"");

OAdQuerydef queryDef = (OAdQuerydef)
cqSession.BuildQuery("Issue");
queryDef.BuildField("id");
queryDef.BuildField("summary");

OADQUERYFILTERNODE qfn = (OADQUERYFILTERNODE)
queryDef.BuildFilterOperator(CQConstants.AD_BOOL_OP_AND);
qfn.BuildFilter("description",
CQConstants.AD_COMP_OP_LIKE, "foobar");

OAdResultset rs = (OAdResultset)
cqSession.BuildResultSet(queryDef);
rs.Execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T21:13:47.667

除了上面给出的答案，请注意 ClearQuest 提供了一个文件 clearquest.bas，其中包含所有常量定义。为了在 C# 中使用它，您将创建一个新文件并将这些常量定义复制到一个名为 CQConstants 的新类中。

请参阅 [https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000002903065](https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000002903065)

如果您提出增强请求，ClearQuest 团队可能会考虑添加一个可用于常量定义的 C# 类。

# url - 301 重定向与相对 = 规范

> ID：13294948
> 
> 赞同：1
> 
> 时间：2012-11-08T17:59:24.410
> 
> 标签：url, seo, http-status-code-301, canonical-link

在我们的网站上，可以跨域访问特定于区域设置的 URL。

假设我们有两个 URL：（`dog.aspx`英语）和`hund.aspx`（德语）。

以下 URL 有效：

*   `www.example.com/hund.aspx`（显示英文内容，不是德文，但网址是德文）
*   `www.example.de/hund.aspx`（正确的网址）

为了解决这个问题，我们有两个选择：

*   `www.example.com/hund.aspx`重定向到`www.example.com/dog.aspx`

*   有`canonical`网址`www.example.com/hund.aspx`_`www.example.com/dog.aspx`

什么更可取？**301重定向还是`canonical`URL？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:53:36.633

301 重定向比`canonical`声明更可取。

用户代理不能绕过重定向，而`canonical`这只是一个建议，a）并非所有用户代理都支持，b）即使支持它的用户代理也不必*遵循*它。

RFC 6596也[建议](https://www.rfc-editor.org/rfc/rfc6596#section-5)这样做：

> 在添加规范链接关系之前，建议验证以下内容：
> 
> 1.  […]
>     
>     
> 2.  对于 HTTP，永久 HTTP 重定向（[RFC2616] 的第 10.3.2 节）是 IRI 内容已被永久移动的传统强指示符，无法代替规范链接关系实施。
>     
>     
> 3.  […]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:21:14.020

使用 301 重定向，它比规范传递更多的链接汁。这是具有不同URL的重复内容，重定向将完美解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T05:35:56.543

Cananical URL 仅在内容相同的情况下使用，以避免来自 google 的任何重复内容处罚。由于内容使用不同的语言，因此不完全相同，因此这不是问题。

听起来您所追求的是 hreflang 标签。[您可以在此处](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077)阅读有关如何实现它的更多信息

基本上你会使用这样的东西：

```
<link rel="alternate" hreflang="de" href="www.abc.de/hund.aspx" /> 
```

`<link rel="alternate" hreflang="en-us" href="www.abc.com/hund.aspx" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T02:24:10.543

我建议同时使用 301 重定向和 hreflang 标签，这不是内容问题，因为相同的内容使用不同的语言，但重定向会有所帮助。因为内容是德语和英语，所以有一个 hreflang 标记很重要。

# vba - 关闭 Word 时禁用保存提示

> ID：13294950
> 
> 赞同：3
> 
> 时间：2012-11-08T17:59:32.803
> 
> 标签：vba, ms-word

我正在尝试使当用户单击 WORD 文档右上角的“X”时，提示“您要保存更改吗？” 没有出现并且文档没有被保存。我找到了许多[Excel](https://stackoverflow.com/questions/12643164/how-to-disable-saveas-in-ms-word-in-vb-net)的解决方案，但我没有成功尝试将它们应用于 Word...

提前感谢您的帮助！

**编辑：**我希望这仅适用于一个文件。.docm 设置为 ReadOnly（允许 Kill-ing 本身）；它有 2 个按钮，1 个用于保存为 .pdf 表单以供保留，1 个用于保存为修订而不是完整的表单。当有人使用“X”强制保存的修订跟踪时，我想禁用提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T19:28:32.430

把它放在你的`ThisDocument`对象中，`MicrosoftWordObjects`用于有问题的文件。

*确保它没有进入该`Normal`部分*

```
Private Sub Document_Close()
    Me.Saved = True
End Sub 
```

将其放在该`Normal`部分将关闭您在 Word 实例上打开的所有文档的“另存为”功能。

# r - 左对齐两个图形边缘（ggplot）

> ID：13294952
> 
> 赞同：108
> 
> 时间：2012-11-08T17:59:36.657
> 
> 标签：r, ggplot2, gridextra, gtable

我正在使用 ggplot 并有两个要显示在彼此之上的图表。我用`grid.arrange`gridExtra 来堆叠它们。问题是我希望图表的左边缘和右边缘对齐，而不管轴标签如何。（出现问题是因为一个图的标签很短，而另一个图的标签很长）。

**问题：**
我该怎么做？我没有嫁给 grid.arrange 但 ggplot2 是必须的。

**我尝试过的：**
我尝试使用宽度和高度以及 ncol 和 nrow 来制作 2 x 2 网格并将视觉效果放在对角，然后使用宽度，但我无法在对角获得视觉效果.

```
require(ggplot2);require(gridExtra)
A <- ggplot(CO2, aes(x=Plant)) + geom_bar() +coord_flip() 
B <- ggplot(CO2, aes(x=Type)) + geom_bar() +coord_flip() 
grid.arrange(A, B, ncol=1) 
```

![在此处输入图像描述](../Images/ca69a8b74d3403bcf2fc7f376ee70209.png)

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-11-08T19:00:15.410

尝试这个，

```
 gA <- ggplotGrob(A)
 gB <- ggplotGrob(B)
 maxWidth = grid::unit.pmax(gA$widths[2:5], gB$widths[2:5])
 gA$widths[2:5] <- as.list(maxWidth)
 gB$widths[2:5] <- as.list(maxWidth)
 grid.arrange(gA, gB, ncol=1) 
```

*编辑*

这是一个更通用的解决方案（适用于任意数量的图），使用`rbind.gtable`包含的修改版本`gridExtra`

```
gA <- ggplotGrob(A)
gB <- ggplotGrob(B)
grid::grid.newpage()
grid::grid.draw(rbind(gA, gB)) 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-10-11T14:50:57.550

我想将这一点推广到任意数量的地块。这是使用 Baptiste 方法的分步解决方案：

```
plots <- list(A, B, C, D)
grobs <- list()
widths <- list() 
```

收集每个地块的每个 grob 的宽度

```
for (i in 1:length(plots)){
    grobs[[i]] <- ggplotGrob(plots[[i]])
    widths[[i]] <- grobs[[i]]$widths[2:5]
} 
```

使用 do.call 获取最大宽度

```
maxwidth <- do.call(grid::unit.pmax, widths) 
```

为每个 grob 分配最大宽度

```
for (i in 1:length(grobs)){
     grobs[[i]]$widths[2:5] <- as.list(maxwidth)
} 
```

阴谋

```
do.call("grid.arrange", c(grobs, ncol = 1)) 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-10-01T07:45:01.723

使用[cowplot](https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html)包：

```
A <- ggplot(CO2, aes(x=Plant)) + geom_bar() +coord_flip() 
B <- ggplot(CO2, aes(x=Type)) + geom_bar() +coord_flip() 

library(cowplot)
plot_grid(A, B, ncol=1, align="v") 
```

[![在此处输入图像描述](../Images/6625eaef26982e88b249a2b2e8792f66.png)](https://i.stack.imgur.com/kE3vf.jpg)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-04-10T10:06:55.933

在[http://rpubs.com/MarkusLoew/13295](http://rpubs.com/MarkusLoew/13295)上是一个非常简单的解决方案（最后一项）适用于这个问题：

```
require(ggplot2);require(gridExtra)
A <- ggplot(CO2, aes(x=Plant)) + geom_bar() +coord_flip() 
B <- ggplot(CO2, aes(x=Type)) + geom_bar() +coord_flip() 
grid.draw(rbind(ggplotGrob(A), ggplotGrob(B), size="first")) 
```

您也可以将其用于宽度和高度：

```
require(ggplot2);require(gridExtra)
A <- ggplot(CO2, aes(x=Plant)) + geom_bar() +coord_flip() 
B <- ggplot(CO2, aes(x=Type)) + geom_bar() +coord_flip() 
C <- ggplot(CO2, aes(x=conc)) + geom_bar() +coord_flip()
D <- ggplot(CO2, aes(x=uptake)) + geom_bar() +coord_flip() 
grid.draw(cbind(
            rbind(ggplotGrob(A), ggplotGrob(B), size="first"),
            rbind(ggplotGrob(C), ggplotGrob(D), size="first"),
            size='first')) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-06-13T00:24:49.687

该`egg`包将 ggplot 对象包装到一个标准化的`3x3`gtable 中，使绘图面板能够在任意 ggplots 之间对齐，包括多面的。

```
library(egg) # devtools::install_github('baptiste/egg')
library(ggplot2)

p1 <- ggplot(mtcars, aes(mpg, wt, colour = factor(cyl))) +
  geom_point() 

p2 <- ggplot(mtcars, aes(mpg, wt, colour = factor(cyl))) +
  geom_point() + facet_wrap( ~ cyl, ncol=2, scales = "free") +
  guides(colour="none") +
  theme()

ggarrange(p1, p2) 
```

[![在此处输入图像描述](../Images/acce73cfd4a116e351880172f2ab1e6c.png)](https://i.stack.imgur.com/fmuf5.png)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-11-08T20:52:39.150

这是使用`melt`reshape2 包的另一种可能的解决方案，并且`facet_wrap`：

```
library(ggplot2)
library(reshape2)

dat = CO2[, c(1, 2)]
dat$id = seq(nrow(dat))
mdat = melt(dat, id.vars="id")

head(mdat)
#   id variable value
# 1  1    Plant   Qn1
# 2  2    Plant   Qn1
# 3  3    Plant   Qn1
# 4  4    Plant   Qn1
# 5  5    Plant   Qn1
# 6  6    Plant   Qn1

plot_1 = ggplot(mdat, aes(x=value)) + 
         geom_bar() + 
         coord_flip() +
         facet_wrap(~ variable, nrow=2, scales="free", drop=TRUE)

ggsave(plot=plot_1, filename="plot_1.png", height=4, width=6) 
```

![在此处输入图像描述](../Images/e8308fb1e071d158e4b1f4681ffa5fcb.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-12-08T19:25:20.353

[patchwork](https://patchwork.data-imaginist.com/articles/patchwork.html)包默认处理这个问题：

```
library(ggplot2)
library(patchwork)

A <- ggplot(CO2, aes(x = Plant)) + geom_bar() + coord_flip() 
B <- ggplot(CO2, aes(x = Type)) + geom_bar() + coord_flip() 

A / B 
```

![](../Images/a810ea282fd2b83f523dec047ba89d86.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019 年 12 月 8 日创建)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-11T16:35:05.140

我知道这是一篇旧帖子，并且已经得到了回答，但我可以建议将@baptiste 的方法与`purrr`使其看起来更好看：

```
library(purrr)
list(A, B) %>% 
  map(ggplotGrob) %>% 
  do.call(gridExtra::gtable_rbind, .) %>% 
  grid::grid.draw() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-08T18:14:27.333

充其量这是一个黑客：

```
library(wq)
layOut(list(A, 1, 2:16),  list(B, 2:3, 1:16)) 
```

不过感觉真的不对。

# ruby - 使用 Eclipse 突出显示 Vagrantfiles 的语法：Ruby 开发工具

> ID：13294953
> 
> 赞同：1
> 
> 时间：2012-11-08T17:59:37.537
> 
> 标签：ruby, eclipse, chef-infra, vagrant

有谁知道是否可以让 Eclipse: Ruby Development Tools 将没有 .rb 扩展名的文件识别为 ruby​​ 并相​​应地突出显示它。我正在使用 Eclipse 4.2.1 和 RDT 4.0.0。

我的用例专门针对使用 ruby​​ 作为语法的 Chef 食谱和 Vagrantfile 定义。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:11:17.350

这可能会奏效，您只需将其调整为使用 Ruby。[Eclipse 语法突出显示：尝试为新文件扩展名指定它，但它不起作用](https://stackoverflow.com/questions/5524366/eclipse-syntax-highlighting-trying-to-specify-it-for-a-new-file-extension-and)

# c# - 拖动时比较 WinForms 控件位置

> ID：13294955
> 
> 赞同：2
> 
> 时间：2012-11-08T17:59:43.467
> 
> 标签：c#, .net, winforms, visual-studio-2010, drag-and-drop

我有一个小程序，其中包含一个名为的按钮`button1`和一个名为的面板`panel1`，其颜色为绿色。到目前为止，该程序允许您`button1`在表单中拖动。我正在尝试扩展此程序，因此当`button1`将其放在面板上时，面板将颜色变为红色。

表格：

![在此处输入图像描述](../Images/6d8f7a53b0fbc630f90cfde18ba3a10e.png)

到目前为止的代码：

```
System.Drawing.Point OldPosition; 

public Form1()
{
    InitializeComponent();
}

private void button1_MouseDown(object sender, MouseEventArgs e)
{
    //Only prepare if the button click down is the left button  
    if (e.Button == MouseButtons.Left)
    {
        //Store the current mouse location  
        OldPosition = e.Location;
        //Change the mouse cursor if you want  
        button1.Cursor = Cursors.Hand;
    }  
}

private void button1_MouseMove(object sender, MouseEventArgs e)
{
    //Only move if the left button still down  
    if (e.Button == MouseButtons.Left)
    {
        button1.Location = new Point(button1.Location.X + (e.X - OldPosition.X), button1.Location.Y + (e.Y - OldPosition.Y));
    } 
}

private void Form1_Load(object sender, EventArgs e)
{
    panel1.BackColor = Color.Green;        
}

private void panel1_MouseEnter(object sender, EventArgs e)
{
    if (button1.Location == panel1.Location)
        panel1.BackColor = Color.Red; //im not sure how to do this part
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:49:05.183

试试下面的代码：

```
private void button1_MouseMove(object sender, MouseEventArgs e)
{
    //Only move if the left button still down  
    if (e.Button == MouseButtons.Left)
    {
        button1.Location = new Point(button1.Location.X + (e.X - OldPosition.X), button1.Location.Y + (e.Y - OldPosition.Y));

        //CHECK IF NEW LOCATION IS WITHIN PANEL BOUNDS
        if (panel1.Bounds.Contains(button1.Location))
           panel1.BackColor = Color.Red;
        else
           panel1.BackColor = Color.Green;
    }
} 
```

同样在设计器中，您可能需要“发送回”`panel1`控件，否则如果按钮越过面板，按钮将不可见。

# java - java在循环for中超出范围

> ID：13294957
> 
> 赞同：3
> 
> 时间：2012-11-08T17:59:50.790
> 
> 标签：java

这段代码有效但丑陋：

```
for ( int i = 0, l=1; i < word.length() && l < word.length(); i++, l++) {  
    char c = word.charAt(i);
    j = (int) c;
    char nextRank = word.charAt(l);
    k = (int) nextRank;
} 
```

我想把他改成这样：

```
for (int i = 0; i < word.length(); i++) {  
    char c = word.charAt(i);
    j = (int) c;
    char nextRank = word.charAt(i+1);
    k = (int) nextRank;
} 
```

这个返回一个错误：`String index out of range`。我明白为什么：当谈到最后一个字母时，“char nextRank = word.charAt(i+1);” 无事可做。

但我不知道如何解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:02:01.120

`i`从开始`1`

```
for (int i = 1; i < word.length(); i++) {  
        char c = word.charAt(i-1);
        j = (int) c;
        char nextRank = word.charAt(i);
        k = (int) nextRank;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:04:20.763

怎么样

```
for (int i = 0; i < word.length() - 1; i++) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T18:01:51.047

**患者：** “在那种情况下我这样做会很痛”

**医生：** “嗯，那如果符合条件，就不要那样做”

```
if(i+1 < word.length)
{
    char nextRank = word.charAt(i+1);
    ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T18:02:08.173

```
int length = word.length() - 1;
for (int i = 0; i < length; i++) {
    char c = word.charAt(i);
    j = (int) c;
    char nextRank = word.charAt(i + 1);
    k = (int) nextRank;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T18:02:58.890

只需将 i 的限制减少 1

```
for (int i = 0; i < word.length()-1; i++) {  
            char c = word.charAt(i);
            j = (int) c;
            char nextRank = word.charAt(i+1);
            k = (int) nextRank;
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T18:03:22.950

您只需要从 0 循环到 word.length() -1。

```
 for (int i = 0; i < word.length() - 1; i++) {  
            char c = word.charAt(i);
            j = (int) c;
            char nextRank = word.charAt(i+1);
            k = (int) nextRank;
        } 
```

# java - JFrames 中的 Java 搜索

> ID：13294959
> 
> 赞同：0
> 
> 时间：2012-11-08T17:59:56.067
> 
> 标签：java, jframe

我有以下Java代码：

```
JFrame frame = new JFrame();
frame.setTitle("Sudoku");
frame.setLocationRelativeTo(null);
frame.setSize(500, 500);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
frame.getContentPane().add(ruudustik.peaRuudustik()); //returns JPanel with textfields inside
frame.setVisible(true); 
```

ruudustik.peaRuudustik 功能：

```
public static JPanel peaRuudustik() {
    JPanel panel = new JPanel();
    for (int i = 0; i < 81; i++) {
        final JTextField ruut = new JTextField();
        ruut.setHorizontalAlignment(JTextField.CENTER);
        ruut.setSize(30, 30);
        ruut.setColumns(1);
        ruut.setName(Integer.toString(i));
        panel.add(ruut);
    }
    return panel;
} 
```

我如何更改特定的文本字段值。每个文本字段都有唯一的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:24:40.577

您可以迭代面板子组件，但我推荐另一种方法 - 使用 a `Map`，例如：

```
Map<Integer, JComponent> textFields = new HashMap<Integer, JTextField>();
...
textFields.put(i, ruut);
ruut.setName(Integer.toString(i));
panel.add(ruut); 
```

然后，只需通过`textFields.get(id);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:42:07.913

由于`JTextField`名称是基于整数的字符串，因此访问它们的最简单方法是使用字段数组，如下所示：

```
JTextField[] myTextFields = new JTextField[81];
for (int i = 0; i < myTextFields.length; i++) {
   myTextFields[i] = new JTextField();
   myTextFields[i].setName(Integer.toString(i));
   ...
} 
```

# c++ - ARMv5tejl 中用于 C++ 的良好内存泄漏工具

> ID：13294960
> 
> 赞同：4
> 
> 时间：2012-11-08T17:59:59.063
> 
> 标签：c++, linux, arm

我一直试图了解我的应用程序中的任何内存泄漏，该应用程序在带有 armv5 的 Freescale MX28 板上运行。

我试图探索 valgrind 但了解到它不支持 armv5 而不是 armv7。

我正在寻找任何可以继续使用的好工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:24:49.157

看看这篇（相当古老但希望有用的）Linux 期刊文章：[嵌入式系统中的内存泄漏检测](http://www.linuxjournal.com/article/6059)

它列出的一些工具：[mtrace](http://en.wikipedia.org/wiki/Mtrace)、[memwatch](http://www.linkdata.se/sourcecode/memwatch/)、[dmalloc](http://dmalloc.com)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T22:52:38.823

如果可以从您的系统将输出发送到网络，那么有一个 C/C++ 库，您可以编译并链接到您的代码，它使您可以基于 Web 浏览器运行时查看系统中内存的使用情况。Egtotal 当前使用的内存，内存是否被损坏、双重删除、不匹配的 new[]/delete、泄漏等。

您的系统是否有可发送输出的以太网/tcp/ip/socket 堆栈或 RS232 串行端口？如果你有串口，有一些小工具可以进行 RS232<->TCP/IP 双向通信。您还可以使用带有串行端口的 linux 机器和一些在以太网和 RS232 之间代理的软件。

如果您有兴趣在 linux/bsd/mac/windows 机器上看到这项工作，请告诉我，然后再在您的嵌入式系统上进行尝试。包含具有典型内存错误的示例 C++ 错误代码，因此本质上它是“解压缩”文件，执行“制作”并在桌面/智能手机浏览器中观看操作。您的飞思卡尔 MX28 开发板运行什么操作系统？

# mysql - Sql 查询以检查特定模式中的名称

> ID：13294961
> 
> 赞同：0
> 
> 时间：2012-11-08T17:59:59.623
> 
> 标签：mysql, sql

如何有效地找到不遵循名字，姓氏模式的名字？我使用我的 SQL id 是主键。

```
select name 
    from  Person where name not like '%,%' 
```

这包括像 firstname 这样有效的模式。我如何摆脱这些结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:06:13.127

```
select name 
from Person 
where instr(name, ',') = 0 
```

# cocoa - 如何绑定到 Cocoa 中 NSDictionary 子词典的值？

> ID：13294964
> 
> 赞同：0
> 
> 时间：2012-11-08T18:00:13.333
> 
> 标签：cocoa, nsdictionary, cocoa-bindings

我有一个具有两个属性的类：NSString *fileName 和 NSDictionary *frames，如下所示。

*   NSDictionary *帧
    *   键：NSString
    *   值：字段字典的实例
*   NSDictionary *字段
    *   键：NSNumber（C++ 枚举值）
    *   值：NSValue（C++ 对象指针）

我想创建一个包含每个文件的 NSTableView 的主从视图。第一列中的文件名，这很容易绑定，但我不知道如何将任何列或详细视图中的字段绑定到字段子字典中的值。

我想我无论如何都不能绑定到 C++ 对象方法。我想我需要一个自定义控制器来处理字段子字典中的值。是否可以让自定义控制器遵循 KVC，以便我可以通过枚举键访问字段值，调用适合于我正在使用的 C++ 库中枚举定义的类型的方法？

或者，我应该将每个字段的数据存储为字段字典中的值吗？修改 GUI 中的值后，无论如何我都必须运行一个方法来处理字典，此时我可以重建 C++ 字段对象并调用适当的方法。

无论如何，我的挑战是找出嵌套字典的绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:57:56.450

继承 NSController 和朋友可能不是最好的方法。

没有办法解决它：键/值编码，所有绑定所基于的 API 依赖于键/键路径是 NSStrings，而不是 NSNumbers（或任何其他类型）。如果您从使用 NSNumber 键切换到使用 NSString 键，您可能会发现这更容易。到达那里可能就像使用在字符串和枚举值之间来回转换的 switch 语句实现两个函数一样简单。

您已经意识到绑定指向 C++ 对象的指针是没有希望的，因此下面的讨论假设您已经将值放入字典中。如果由于某种原因，您无法切换到在字段字典中使用 NSString 键，您还可以继承 NS[Mutable]Dictionary 并覆盖`-valueForUndefinedKey:`并`-setValue:forUndefinedKey:`执行此转换。子类化 NS[Mutable]Dictionary 不适合胆小的人，因为这些类由类集群支持。文档清楚地列举了子类的所有要求，所以我不会在这里介绍。此外，在您的实现中，您需要确保为与使用 NSNumber 键所做的修改相对应的字符串键`-setObject:forKey:`发送`-willChangeValueForKey:`和通知。`-didChangeValueForKey:`

假设您最终希望将所有这些存储在一个`std::hash_map<enum, ptr>`或其他一些 C++ 类/结构中，桥接到 Objective-C 的逻辑方法是创建一个新模型类，该类包装 STL hash_map 并使用 NSString 键提供 KVC/KVO 语义, 处理翻译类似于上面描述的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T00:31:09.690

我最终将每个字段的数据存储为“字段”子字典中的值。我没有意识到我可以指定一个键路径来绑定到该值。

例如，我有一个类，其成员 NSArray “tracks”包含一组对象，每个对象都有成员 NSDictionary “frames”，如我的问题中所述。“tracks”在我的 GUI 中用一个 NSArrayController 表示，它绑定了一个 NSTableView。

在 NSTableView 中，我可以使用模型键路径“objectValue.frames.key1.key2”将表格单元格的静态文本绑定到表格单元格视图。

同样，在主-细节视图的细节部分，我可以将文本字段单元格绑定到 NSArrayController，其中“选择”作为控制器键，“frames.key1.key2”作为模型键路径。

# ssis - SSIS 平面文件值在数据流中被不当更改

> ID：13294966
> 
> 赞同：2
> 
> 时间：2012-11-08T18:00:27.103
> 
> 标签：ssis

我从管道分隔文件中提取并插入到 SQL Server 2008 R2 数据库表中。我的整数列之一在它进入表时不包含正确的值。

我可以在我的第一个对象（平面文件源）之后立即将数据查看器添加到数据流中，并将数据与在记事本中打开的源文件并排比较。我的字符串列都可以，但是这些唯一的七位整数被三个值之一替换（但原始文件中有 16K 唯一行）。新值看起来像它们正在替换的值，相同的格式和范围，但它们不会出现在源文件中。它们实际上看起来好像被缓存在某个地方。

更多信息：源中的外部列是 50 字符字符串，输出列是 4 字节 int。文件源的连接字符串由一个表达式设置，该表达式基于一个早期脚本设置的变量，该脚本在导入目录中查找候选文件。之前或之后没有其他任务可以转换或以其他方式修改数据；这个包纯粹是另一个处理数据的过程的提取过程。被替换的值不会出现在包文件的 XML 中（我搜索了它以防我们留下了一些与数据混淆的旧代码）。

我可以重新创建任务，一切似乎都可以正常工作，但我没有看到可以解释这一点的属性有任何差异，然后我担心它会再次中断。我真的很想了解这里出了什么问题。

有什么想法可以“破坏”这样的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:19:49.270

这听起来可能是代码页问题。我建议2个选项

1.  将连接管理器中的数据类型从 char 50 更改为 integer
2.  为什么不将它作为原始的 50 字符字符串导入，然后通过数据转换转换运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:52:44.843

抱歉我不能早点回复。我尝试了源和外部数据类型的各种组合以及转换，但没有成功。有时该列只是空的或我提到的三个垃圾值之一。有趣的是，经过一番挖掘，一位同事注意到这三个十六进制值是 4d0000、4e0000 和 4f0000。不知道该读什么，但值本身似乎没有多大意义，某种颜色代码；我希望它们是一个秘密的错误代码。无论如何，似乎有效的是完全删除该列并将它们添加回 8 字节整数（外部和输出）。我会在接下来的几天里再次检查它并研究代码页的想法，如果我发现任何其他内容，我会更新这个问题。谢谢！

# python - 检查包含的内存有效方法

> ID：13294968
> 
> 赞同：2
> 
> 时间：2012-11-08T18:00:36.397
> 
> 标签：python, large-data

如果不是因为我需要存储比我的 4 GB RAM 容量更多的数据，我可以使用 dict 来完成这项任务。我还在同一个程序中做其他需要内存的东西，所以内存要求越低越好。

我只想

1.  存储*许多*字符串

2.  检查集合中是否包含字符串

有没有一种 Python 方法可以做到这一点？我使用的是 3.3，所以 berkelydbs 出来了。

它还需要给出准确的答案，所以没有布隆过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:11:23.277

使用[sqlite3](http://docs.python.org/3/library/sqlite3.html)它完全符合您的需求

如果您绝对需要快速查找，您可以使用 marisa 树，请参阅[http://kmike.ru/python-data-structures/](http://kmike.ru/python-data-structures/)但首先您必须确认它是您应用程序中的瓶颈。尤其是缓存可以用磁盘数据库做奇妙的事情。不要过早优化。轮廓。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:14:19.910

如果数据不适合您的内存，那么您将别无选择，您将不得不将其中一些数据临时存储在外部存储器（您的磁盘）中。正如您正确猜测的那样，文件访问既昂贵又缓慢，因此要做的就是将磁盘操作保持在最低限度。

由于您似乎需要一个键值存储（因为您有一个 dict），所以最好将其拆分，以便相关数据位于类似的位置，然后您可以快速读取块-明智地进入内存进行计算。

但是如何做到这一点完全取决于您实际在做什么，如果没有进一步的信息，我们无法真正帮助您。

顺便提一句。正如您提到的 Berkeley DB，实际上有Python 3.2 的[绑定](http://pypi.python.org/pypi/bsddb3/)，如果它们也适用于 Python 3.3，我不会感到惊讶。否则 3.3 仍然是相当新的，所以可能会更新。如果您正在寻找替代的键值存储数据库，不妨试试[redis 。](http://redis.io/)我还没有尝试过[Python 绑定](https://github.com/andymccurdy/redis-py)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T18:06:09.133

好吧，如果您只需要存储它，为什么要将它保存在内存中，使用某种数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T18:15:24.243

只需使用标准[`shelve`](http://docs.python.org/3/library/shelve.html#module-shelve)模块创建一个持久字典。

# java - 更好的 for 循环，没有中断；

> ID：13294974
> 
> 赞同：0
> 
> 时间：2012-11-08T18:00:58.573
> 
> 标签：java, if-statement, for-loop, break

我想知道是否有比使用这个中断实现更好的选择。我正在努力提高我的能力，以下确实有效。只是我不断听到有关 Break 的消息；作为一种简单的出路，并产生潜在的意大利面条代码，这在这里还没有发生，但仍然存在。

```
public void getWoodSoldRecently(){
    Calendar cal = Calendar.getInstance();
    cal.add(Calendar.WEEK_OF_YEAR, -2);
    for(Tree t : theTrees){
        if(t.getSimpleDateSold().getTime().after(cal.getTime()) && t.getHasBeenSold()==true){
            treesSold.add(t);
            System.out.println(t.getTreeId() + " " + t.getTreeType());
        }
        else{
            System.out.println("Nothing sold in the last 2 weeks");
            break; //Stop the above
        }
    }
} 
```

如果没有中断，“过去 2 周内没有售出”将输出存储在数组中的数量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T18:05:07.217

我怀疑你实际上并不想在这里休息。当然，您只想继续使用其余的树 - 仅仅因为您发现*一棵*与您的状况不符的树（例如，它没有被出售），这是否真的意味着您以后不会有任何匹配的树收藏？

无论如何，您的方法显然很奇怪，因为它是`get`一种不*返回*任何内容但将值添加到现有集合的方法。*这是*我要改变的第一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:05:00.167

既然你在休息后什么都不做，如果它发生的话。您也可以将其替换为 return。

```
public void getWoodSoldRecently(){
Calendar cal = Calendar.getInstance();
cal.add(Calendar.WEEK_OF_YEAR, -2);
for(Tree t : theTrees){
    if(t.getSimpleDateSold().getTime().after(cal.getTime()) && t.getHasBeenSold()==true){
        treesSold.add(t);
        System.out.println(t.getTreeId() + " " + t.getTreeType());
    }
    else{
        System.out.println("Nothing sold in the last 2 weeks");
        return; //Exit function
    }
} 
```

}

我个人对中断没有问题，但是 return 迫使你将代码封装成更多的函数，这**总是**好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:04:14.707

根据定义，Break 并不坏——它可以被滥用，但你使用它的方式是允许的。你可以考虑用return代替break。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:04:35.190

我不会`break`在您的示例中使用此方法会导致任何问题。仍然发布一种可能的解决方法（避免中断）：

```
 boolean bContinue = true;
   int iSize = theTrees.size();
   for(int indx=0; indx < iSize && bContinue; indx++){
    Tree t  = theTrees.get(indx);
    if(t.getSimpleDateSold().getTime().after(cal.getTime()) 
        && t.getHasBeenSold()==true){
        treesSold.add(t);
        System.out.println(t.getTreeId() + " " + t.getTreeType());
    }
    else{
        System.out.println("Nothing sold in the last 2 weeks");
        bContinue = false;//This will stop the loop
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T18:06:42.597

问题是您使用的 foreach 循环不允许您使用条件参数。如果你将它转换成一个 for 循环，你会更好：

```
boolean loopContinue = true;

for(int i = 0; i < theTrees.size() && loopContinue; i++) {
        Tree t = theTrees.get(i);
        if(t.getSimpleDateSold().getTime().after(cal.getTime()) && t.getHasBeenSold()==true){
            treesSold.add(t);
            System.out.println(t.getTreeId() + " " + t.getTreeType());
        }
        else{
            System.out.println("Nothing sold in the last 2 weeks");
            loopContinue = false; //Stop the above
        }
    }
} 
```

编辑和澄清：我说“更好”意味着您将更好地控制您的循环。正如其他人所说，使用`break`本质上并不坏。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-08T18:11:44.477

使用迭代器：

```
public void getWoodSoldRecently(){
Calendar cal = Calendar.getInstance();
cal.add(Calendar.WEEK_OF_YEAR, -2);
Iterator itr = theTrees.iterator();
boolen b = true;
while (itr.hasNext() && b == true) {
        if(t.getSimpleDateSold().getTime().after(cal.getTime()) && t.getHasBeenSold()==true){
            treesSold.add(t);
            System.out.println(t.getTreeId() + " " + t.getTreeType());
        }
        else{
            System.out.println("Nothing sold in the last 2 weeks");
            b = false;
        }
    }
} 
```

# javascript - 如何捕获 Web 浏览器远程访问网站的屏幕截图？

> ID：13294976
> 
> 赞同：2
> 
> 时间：2012-11-08T18:01:15.403
> 
> 标签：javascript, screenshot

我有一个设计问题似乎适用于我 100% 测试过设计渲染的每个人，但对于少数访问者来说，渲染已关闭。我很好奇是否有一种方法可以使用 JavaScript 或其他选项来选择性地捕获屏幕截图，因为用户的浏览器在他们访问网站时呈现它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T14:38:03.350

特别是如果涉及针对单一浏览器版本（如 IE8、..）的渲染问题，基于画布的渲染解决方案效果不佳。

[Usersnap](http://usersnap.com)为您的场景提供高质量的浏览器屏幕截图。添加它就像安装谷歌分析一样简单，您将获得准确的浏览器屏幕截图。

全面披露：我是联合创始人之一，所以如果您有任何其他问题，请随时提问。

# objective-c - 如何在 Objective-C 编译器上取消警告？

> ID：13294980
> 
> 赞同：-1
> 
> 时间：2012-11-08T18:01:43.103
> 
> 标签：objective-c, xcode

如何抑制 Objective-C 编译器上的警告？

```
...
[[UIWebDocumentView class] jr_swizzleMethod:@selector(canPerformAction:withSender:) withMethod:@selector(myCanPerformAction:withSender:) error:nil]; // warning here
... 
```

NSObject 有这个方法（作为类别）。但是编译器认为 UIWebDocumentView 没有。这是编译器的问题。是否有任何指令可以禁止代码块上的警告？

警告：

> Receiver 'UIWebDocumentView' 是一个转发类，对应的@interface 可能不存在

PS`UIWebDocumentView`是一个私有 API - 所以不能使用`performSelector`方法 tu 抑制警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:17:17.280

通常，您可以忽略单行代码的警告，如下所示：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
[foo bar];
#pragma clang diagnostic pop 
```

替换`-Warc-performSelector-leaks`为实际警告。

由于您没有发布确切的警告，因此您必须自己弄清楚 -WarnLevel 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:55:57.107

解决这个问题的最简单方法就是让课程采用不同的方式：

```
[NSClassFromString(@"UIWebDocumentView") jr_swizzleMethod:@selector(canPerformAction:withSender:) withMethod:@selector(myCanPerformAction:withSender:) error:nil]; // warning here 
```

# python - 在尝试使用对象的特定属性时引发 AttributeError 的猴子补丁

> ID：13294981
> 
> 赞同：5
> 
> 时间：2012-11-08T18:01:44.687
> 
> 标签：python

我有一个 python 类的实例。

```
class Fum(object):
  foo = Foo()
  bar = Bar()

fum = Fum() 
```

出于我不想进入的充分理由，我想修补这个对象，以便它的一个属性在某个用例中是禁止的。我希望如果我或其他开发人员尝试使用猴子修补对象上的属性，则会引发一个有用的异常来解释这种情况。我试图用一个属性来实现它，但没有运气。

例如，

```
def raiser():
  raise AttributeError("Don't use this attribute on this object. Its disabled for X reason.")

fum.bar = property(raiser)

>>> fum.bar
>>> <property object at 0xb0b8b33f> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:10:34.303

You cannot monkeypatch properties directly onto instances of an object. `descriptors` are a class-level concept and must be in an instance's class hierarchy. There is a trick that works, however:

```
class Fum(object):
    foo = Foo()
    bar = Bar()

fum = Fum()

class DerivedFum(fum.__class__):
    bar = property(raiser)

fum.__class__ = DerivedFum

fum.bar # --> raise AttributeError 
```

# wxpython - 有没有办法将 wxPython 的 GIFAnimationCtrl 与 img2py 生成的图像一起使用？

> ID：13294983
> 
> 赞同：0
> 
> 时间：2012-11-08T18:01:45.973
> 
> 标签：wxpython

有没有办法将 wxPython 的[GIFAnimationCtrl](http://www.wxpython.org/docs/api/wx.animate.GIFAnimationCtrl-class.html)（需要文件名，而不是文件）与[img2py](http://www.wxpython.org/docs/api/wx.tools.img2py-module.html)生成的图像一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:03:09.580

我不知道 PyEmbeddedImage 和 img2py.py，但这是我发现的一种将动画嵌入到 python 源代码中的方法。

```
gif_img_base64 = (
  "R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL"
  "6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
  ...
  "PAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhR"
  "A8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA=="
  )

a = wx.animate.GIFAnimationCtrl(self, -1, '') # The control

a2 = wx.animate.Animation() # The data
data = base64.b64decode(gif_img_base64)
a2.Load(cStringIO.StringIO(data))
a.SetAnimation(a2) # Bind the data and the control

a.GetPlayer().UseBackgroundColour(True)
a.Play() 
```

变量 gif_img_base64 是带有动画的 GIF 文件的 base64 编码内容。用于创建代码的帮助程序：

```
import sys, base64
data = sys.stdin.read()
s = base64.b64encode(data)
print 'gif_img_base64 = ('
while s:
  print '  "' + s[:62] + '"'
  s = s[62:]
print '  )' 
```

# c++ - ABI 错位名称中的 C++ 模板参数依赖 decltype

> ID：13294985
> 
> 赞同：15
> 
> 时间：2012-11-08T18:01:52.573
> 
> 标签：c++, templates, c++11, name-mangling

考虑以下函数：

```
template <typename A, typename B>
auto Min(A&& a, B&& b)
        -> decltype(a < b ? std::forward<A>(a) : std::forward<B>(b))
{
    return a < b ? std::forward<A>(a) : std::forward<B>(b);
} 
```

该片段`Min(0, 1)`导致模板被实例化为`Min<int, int>`. 奇怪的`Min`是，我的代码的 g++ 和 clang 的名称是`_Z3MinIiiEDTqultfp_fp0_cl7forwardIT_Efp_Ecl7forwardIT0_Efp0_EEOS0_OS1_` （又名：）`decltype (({parm#1}<{parm#2})?((forward<int>)({parm#1})) : ((forward<int>)({parm#2}))) Min<int, int>(int&&, int&&)`。换句话说，*用于推导返回类型的表达式是损坏的名称的一部分*。就个人而言，我预计会稍微更理智一些：（`_Z3MinIiiET_OS0_OT0_`又名：）`int Min<int, int>(int&&, int&&)`。**为什么不是这样？**

* * *

似乎 g++ 只`decltype`在实际需要的情况下使用表达式，因为这些形式都是`_Z3Maxii`：

*   `auto Max(int x, int y) -> int`
*   `auto Max(int x, int y) -> decltype(0)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T19:12:08.413

gcc 正在使用[“Italium C++ ABI”进行 mangling](http://mentorembedded.github.com/cxx-abi/abi.html#mangling)，它指定

> 如果 的操作数表达式`decltype`不*依赖于实例化，*则直接对结果类型进行编码。例如：
> 
> ```
>  int x;
>       template<class T> auto f(T p)->decltype(x);
>         // The return type in the mangling of the template signature
>         // is encoded as "i".
>       template<class T> auto f(T p)->decltype(p);
>         // The return type in the mangling of the template signature
>         // is encoded as "Dtfp_E".
>       void g(int);
>       template<class T> auto f(T p)->decltype(g(p));
>         // The return type in the mangling of the template signature
>         // is encoded as "DTcl1gfp_E". 
> ```

第三个示例是 OP 的简化版本，它也直接对整个表达式进行编码，因为它依赖于实例化。[*与实例化相关*的定义为](http://mentorembedded.github.com/cxx-abi/abi.html#instantiation-dependent)：

> 如果表达式依赖于类型或依赖于值，或者它具有依赖于类型或依赖于值的子表达式，则表达式依赖于*实例化。*例如，如果`p`是一个依赖于类型的标识符，则表达式`sizeof(sizeof(p))`既不依赖于类型，也不依赖于值，但它依赖于实例化（如果在替换模板参数后`p`发现不完整，则可能会变为无效类型）。类似地，如果源形式包含*依赖于实例化的*表达式，则在源代码中表达的类型是依赖于实例化的。例如，类型形式`double[sizeof(sizeof(p))]`（具有`p`类型相关标识符）是*实例化相关的*。

关键是依赖于实例化的表达式“在替换后可能会变得无效”，这可能是它们在修改中以未评估形式保留的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T19:51:54.813

如果重载函数模板，这些函数模板生成的函数（称为函数模板特化）需要不同。因此，C++ 标准规定函数模板特化的签名包括生成特化的函数模板的签名。

否则，如果两个模板都实例化具有相同函数类型的函数，它们就会发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-22T10:09:04.510

我被[https://stackoverflow.com/a/13296666/53974](https://stackoverflow.com/a/13296666/53974)弄糊涂了，所以我做了一些实验，证实了答案。

只要两个模板不同，即使重载决议无法在它们之间进行选择，它们的特化也可以共存；所以损坏的名称包括模板签名。

由于无法选择重载决议，因此范围内最新的相关声明似乎会影响早期的声明。在下面的示例中，这是可见的两次 -`notfun1`并且`notfun`具有相同的源但调用不同的专业化，并`template void fun<long>(long);`在两个实例中引用不同的模板。（我已经通过检查此来源及其变体的反汇编来确认这两者）。

```
template<typename T> T var = {};
template long var<long>;
// long var; // Error

void fun(long) {}

template<typename T> void fun(T) {}
template void fun<long>(long); // void fun<long>(long)

void notfun1() {
  fun(1L);
  fun<long>(2); // Calls void fun<long>(long)
}

template<typename T> struct identity { using type = T; };
template<typename T> void fun(typename identity<T>::type);
template void fun<long>(long); // Generates void fun<long>(identity<long>::type)
//template void fun<long>(typename identity<long>::type); //Ditto, can't write both

void notfun() {
  fun(1L);
  fun<long>(2); // Calls void fun<long>(identity<long>::type)

}

template<typename T> void fun(typename identity<T>::type) {}

int main() {} 
```

下面，为方便起见，Mac x86_64 上的反汇编；如果你确实看，你会想要专注于`callq`目标。

```
$ c++filt __Z3funIlEvN8identityIT_E4typeE
void fun<long>(identity<long>::type)

$ c++filt __Z3funIlEvT_
void fun<long>(long)

$ g++ -fvisibility=hidden -std=c++17 spec.cpp -o spec; objdump -C --disassemble spec

spec:   file format Mach-O 64-bit x86-64

Disassembly of section __TEXT,__text:

0000000100003f40 fun(long):
100003f40: 55                           pushq   %rbp
100003f41: 48 89 e5                     movq    %rsp, %rbp
100003f44: 48 89 7d f8                  movq    %rdi, -8(%rbp)
100003f48: 5d                           popq    %rbp
100003f49: c3                           retq
100003f4a: 66 0f 1f 44 00 00            nopw    (%rax,%rax)

0000000100003f50 void fun<long>(long):
100003f50: 55                           pushq   %rbp
100003f51: 48 89 e5                     movq    %rsp, %rbp
100003f54: 48 89 7d f8                  movq    %rdi, -8(%rbp)
100003f58: 5d                           popq    %rbp
100003f59: c3                           retq
100003f5a: 66 0f 1f 44 00 00            nopw    (%rax,%rax)

0000000100003f60 notfun1():
100003f60: 55                           pushq   %rbp
100003f61: 48 89 e5                     movq    %rsp, %rbp
100003f64: bf 01 00 00 00               movl    $1, %edi
100003f69: e8 d2 ff ff ff               callq   -46 <__Z3funl>
100003f6e: bf 02 00 00 00               movl    $2, %edi
100003f73: e8 d8 ff ff ff               callq   -40 <__Z3funIlEvT_>
100003f78: 5d                           popq    %rbp
100003f79: c3                           retq
100003f7a: 66 0f 1f 44 00 00            nopw    (%rax,%rax)

0000000100003f80 notfun():
100003f80: 55                           pushq   %rbp
100003f81: 48 89 e5                     movq    %rsp, %rbp
100003f84: bf 01 00 00 00               movl    $1, %edi
100003f89: e8 b2 ff ff ff               callq   -78 <__Z3funl>
100003f8e: bf 02 00 00 00               movl    $2, %edi
100003f93: e8 08 00 00 00               callq   8 <__Z3funIlEvN8identityIT_E4typeE>
100003f98: 5d                           popq    %rbp
100003f99: c3                           retq
100003f9a: 66 0f 1f 44 00 00            nopw    (%rax,%rax)

0000000100003fa0 void fun<long>(identity<long>::type):
100003fa0: 55                           pushq   %rbp
100003fa1: 48 89 e5                     movq    %rsp, %rbp
100003fa4: 48 89 7d f8                  movq    %rdi, -8(%rbp)
100003fa8: 5d                           popq    %rbp
100003fa9: c3                           retq
100003faa: 66 0f 1f 44 00 00            nopw    (%rax,%rax)

0000000100003fb0 _main:
100003fb0: 55                           pushq   %rbp
100003fb1: 48 89 e5                     movq    %rsp, %rbp
100003fb4: 31 c0                        xorl    %eax, %eax
100003fb6: 5d                           popq    %rbp
100003fb7: c3                           retq 
```

# java - EclipseLink JPA Transaction.commit() 不返回

> ID：13294988
> 
> 赞同：0
> 
> 时间：2012-11-08T18:02:00.830
> 
> 标签：java, jpa, persistence, jpa-2.0, eclipselink

我在使用 JPA（使用 EclipseLink 4.2.1）时遇到了一个奇怪的问题。

代码的相关部分：

```
l.debug("creating EM");
em = factory.createEntityManager();
int id = Integer.parseInt(idString);
l.debug("parsed");
em.getTransaction().begin();
SomeClass g = em.find(SomeClass.class, id);
l.debug("found");
em.remove(g);
l.debug("removed");
em.getTransaction().commit();
l.debug("Returning..."); 
```

输出是：

```
DEBUG - creating EM
DEBUG - parsed
DEBUG - found
DEBUG - removed 
```

如您所见，最后一行没有显示（commit() 没有返回）。它不会抛出任何异常。但是，该对象将从数据库中删除。

在应用程序的任何其他点都没有这样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:10:57.253

通常挂起事务的根本原因可能是与其他并发事务的死锁

# actionscript-3 - 没有网格的寻星路径

> ID：13294989
> 
> 赞同：4
> 
> 时间：2012-11-08T18:02:01.760
> 
> 标签：actionscript-3, flash, apache-flex

有谁知道节点不是网格的任何[A*实现？](http://www.heyes-jones.com/astar.html)假设您有一张地图，其中只有道路可以步行。如果我使用网格，算法将搜索网格的所有字段，只为其中的 1/3 找到路径。如果是一个大网格....

那么，网络上有没有没有网格实现 A* 的示例？我在网上找到了这个[http://lab.polygonal.de/?p=185](http://lab.polygonal.de/?p=185)，这实际上是我正在寻找的（向下滚动查看 A*），但这与其他内容结合在一起。

我只是想知道是否有比这更简单的解决方案？谢谢。

# perl - 具有相同属性名称的 Moose Parent 和 Child

> ID：13294996
> 
> 赞同：3
> 
> 时间：2012-11-08T18:02:22.183
> 
> 标签：perl, inheritance, moose

这个问题是关于 Perl 和 Moose 继承的。

假设我有一个父类和一个婴儿类。婴儿“扩展”父母。如果两个类都具有“name”属性，那么 Baby 如何在不获取自己的名字的情况下访问父母的名字？

```
package Baby;
use Moose;
extends 'Parent';

has 'name', is => 'ro', isa => 'Str', default => 'Baby'; 
```

注意：父类本质上与名称 default => 'Parent' 相同。

所以问题是，在我的程序中，我将如何访问父母的姓名？

例如：

```
...
$baby = Baby->new();
say "my name is " . $baby->name();
say "my Parent's name is " . ???? 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:38:33.647

你没有。您还没有创建新属性；您刚刚覆盖了父类中的那个。您为示例类选择的名称真的很不幸，因为在现实世界中，婴儿“拥有”父母，但通过使用继承，您创建了婴儿“是”父母的情况。

# actionscript-3 - AS3 遍历类变量

> ID：13294997
> 
> 赞同：2
> 
> 时间：2012-11-08T18:02:23.243
> 
> 标签：actionscript-3

我如何遍历类实例的所有变量？它似乎适用于常规物体......

编辑：这会做到的=）

```
var test:anyClass=new anyClass();
var someObject:Object={val1:"object string",val2:111,val3:new Date()};
var xmlList:XMLList=describeType(anyClass)..variable;
for each(var key:* in someObject)
    trace(String(key));
for each(var item:XML in xmlList)
    trace(String(test[item.@name])); 
```

输出：对象字符串 111 Thu Nov 8 11:19:27 GMT-0700 2012 类字符串 222 Thu Nov 8 11:19:27 GMT-0700 2012

```
public class anyClass
{
    public var val1:String="class string";
    public var val2:int=222;
    public var val3:Date=new Date();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:09:38.003

我认为最简单的方法是使用`flash.utils.describeType()`

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#describeType](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#describeType) ()

这将返回一个描述类的所有细节的 XML 文档，然后您可以使用普通的 E4X 对其进行攻击。这是我测试过的一个例子：

```
import flash.display.Sprite;
import flash.utils.describeType;

var test:String = "TEST";

function DescribeTypeExample():void {
    var child:Sprite = new Sprite();
    var description:XML = describeType(this);
    var variables:XMLList = description..variable;
    for each(var variable:XML in variables) {
        trace("VARIABLE: " + variable.@name);
        trace("VALUE: " + this[variable.@name]);
    }
}

this.DescribeTypeExample();

// Output:

// VARIABLE: test
// VALUE: TEST 
```