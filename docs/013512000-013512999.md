# StackOverflow 问答 13512000-13512999

# jquery - jqplot - yaxis 仅显示 2 个字符

> ID：13512000
> 
> 赞同：0
> 
> 时间：2012-11-22T11:39:09.637
> 
> 标签：jquery, jqplot

我有一个情节，它的 yaxis 需要有可能从 0 渲染到 150M 但是我有一个小地方可以将它放在我的网站（130X70）中，我的问题是 yaxis 数字（最有可能是百万）是占用我所有的空间和情节，它是我想要的大小的 1/3……我怎样才能“渲染”它，所以我只会看到 2 个字符？（对于 Ex 20,000,000 将变为 20。）

谢谢，对不起我的英语不好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:51:13.943

几个月前我问了一个相关的问题。

看看：[JqPlot：为不包括 y 轴标签的图形区域设置固定高度值](https://stackoverflow.com/questions/11229577/jqplot-set-a-fix-height-value-for-the-graph-area-not-including-y-axe-labels)

想法是在创建后重置图表高度和宽度，然后重新绘制

```
var w = parseInt($(".jqplot-yaxis").width(), 10) + parseInt($("#chart").width(), 10);
var h = parseInt($(".jqplot-title").height(), 10) + parseInt($(".jqplot-xaxis").height(), 10) + parseInt($("#chart").height(), 10);
$("#chart").width(w).height(h);
plot.replot(); 
```

# python - 我不明白为什么其中一个有效而另一个无效。请解释我如何错误地处理这个字符串

> ID：13512002
> 
> 赞同：3
> 
> 时间：2012-11-22T11:39:21.307
> 
> 标签：python, sql, command, db2, ibm-midrange

我是 Python 新手，我想通过写入 DB2 数据库来尝试一下。Python 是 2.7，在 iSeries 上运行。对于我的待办事项清单上的各种事情，我喜欢 Python 而不是 RPG 或 CL 的想法，所以我从第一原则开始......但是我遇到了一个问题 - 我似乎不明白 Python 是如何处理字符串。这是一个例子：

请解释原因：

```
db2cursor.execute('insert into trickledb.trickledb values(?, ?, ?, ?, ?, ?, ?, ?)',
        ('01100158059642','1055','2012-09-12','13:30:05','0700','1','1','28010')) 
```

完全没问题，（这些值被插入到我的数据库中）但是：

```
sql="'insert into trickledb.trickledb values(?, ?, ?, ?, ?, ?, ?, ?)',
    ('01100158059642','1055','2012-09-12','13:30:05','0700','1','1','28010')"
db2cursor.execute(sql) 
```

给出错误：

```
db2cursor.execute(sql)
db2.Error: SQLState: 42601, Error code: -104
Token 'insert into trickledb.trickle was not valid.
Valid tokens: ( END GET SET CALL DROP FREE HOLD. 
```

我的脑袋疼！

这是我的完整脚本 - 我正在从 XML 文件中提取数据：

```
#!/usr/bin/env python
# (Be in -*- python -*- mode.)
import db2
from xml.dom import minidom
db2connection = db2.connect()
db2cursor = db2connection.cursor()
xmldoc = minidom.parse('test.XML')
itemlist = xmldoc.getElementsByTagName('PluSale') 
for s in itemlist :
    print s.attributes['PluCode'].value, s.attributes['TicketNumber'].value, s.attributes['Time'].value, s.attributes['Date'].value, s.attributes['StoreNumber'].value, s.attributes['PosNo'].value, s.attributes['Qty'].value, s.attributes['SequenceNbr'].value
    PluCode = s.attributes['PluCode'].value
    TicketNumber = s.attributes['TicketNumber'].value
    Time = s.attributes['Time'].value
    Date = s.attributes['Date'].value
    StoreNumber = s.attributes['StoreNumber'].value
    PosNo = s.attributes['PosNo'].value
    Qty = s.attributes['Qty'].value
    SequenceNbr = s.attributes['SequenceNbr'].value
    string = "%s,%s,%s,%s,%s,%s,%s,%s" %(PluCode,TicketNumber,Date,Time,StoreNumber,PosNo,Qty,SequenceNbr)
    list = [PluCode,TicketNumber,Date,Time,StoreNumber,PosNo,Qty,SequenceNbr]
    tuple = (PluCode,TicketNumber,Date,Time,StoreNumber,PosNo,Qty,SequenceNbr)
    print string
    print list
    print tuple
    db2cursor.execute ('insert into trickledb.trickledb values(?, ?, ?, ?, ?, ?, ?, ?)', tuple)
db2connection.commit()
db2cursor.close()
db2connection.close() 
```

我一直在 .execute 语句参数位中用带有列表的字符串替换元组，没有任何喜悦。我确定这很简单，我不完全理解。这是我真正想克服的绊脚石，因为我喜欢在 iSeries 上使用 Python 的想法……与 RPG 或 CL 相比，它太强大了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:44:09.453

你正在尝试的是这样的：

```
def foo(x, y=None): print x, y

foo(1, 2)

args = '1, 2'
foo(args) 
```

在第二种情况下，您最终将`foo`使用单个字符串参数 ( `args`) 进行调用，该参数将绑定到`x`，并`y`以默认值结束。的内容`args`看起来像您在第一个实例中传递的参数这一事实无关紧要。Python（以及大多数编程语言，就此而言）只是不能那样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:45:30.360

在您的第一个示例中，您正在传递查询字符串和参数，在您的第二个示例中，两者都作为一个大字符串传递（这没有任何意义）..

比较这两个：

```
>>> a = '("1", "2", "3")'
>>> print len(a)
15
>>> b = ('1', '2', '3')
>>> print len(b)
3 
```

`a`只是一个字符串，`b`是`tuple`3 个元素...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:00:43.487

感谢上面的 Jon 和 Marcelo，我意识到我正在将一种使用 SQL 的方式从一个环境转移到另一个不适合的环境。

在此资源的帮助下： [http](http://www.ibm.com/developerworks/data/tutorials/db2pylnx/db2pylnx-pdf.pdf) ://www.ibm.com/developerworks/data/tutorials/db2pylnx/db2pylnx-pdf.pdf 在上面 Jon 的评论中，我了解到 SQL 语句中的问号是语句后面的元组中的值。一个非常简单的例子是

```
tuple = ('SOMEVALUE', 'SOME OTHER VALUE')
'SELECT * FROM WHEREEVER WHERE COLUMN1 = '?' AND COLUMN2 = '?', (TUPLE)' 
```

我剩下的问题是我自己造成的。我正在从 minidom 创建的列表中提取值。该列表包含 UNICODE，因为它是原始 XML 文件的组成部分。

错误是“_db2.Error: Param 0: String expected.” 我误解了假设 db2 参数应该是一个字符串。它应该是一个元组（当我将它更改为一个字符串时，我得到：“_db2.Error：参数必须是一个元组或列表。”

**db2 期望的元组应该包含 ASCII 字符串。不是 unicode**所以我修改了代码以使用 ascii 而不是 unicode 加载我的字符串：

```
PluCode = str(s.attributes['PluCode'].value)
TicketNumber = str(s.attributes['TicketNumber'].value)
Time = str(s.attributes['Time'].value)
Date = str(s.attributes['Date'].value)
StoreNumber = str(s.attributes['StoreNumber'].value)
PosNo = str(s.attributes['PosNo'].value)
Qty = str(s.attributes['Qty'].value)
SequenceNbr = str(s.attributes['SequenceNbr'].value) 
```

这使得“打印元组”从：

```
(u'01100158059642', u'1055', u'2012-09-12', u'13:30:05', u'0700', u'1', u'1', u'28010') 
```

至：

```
('01100158059642', '1055', '2012-09-12', '13:30:05', '0700', '1', '1', '28010') 
```

我的数据库也更新了！

```
db2 "select * from trickledb.trickledb" 
PLUCOD         TICKETNO  DATE       TIME     STORENO  POSNO  QTY  SEQNO
-------------- --------- ---------- -------- -------- ------ ---- -----
01100158059642 1055      2012-09-12 13:30:05 0700     1      1    28010 
```

非常感谢 - 我觉得我的 Python 学习曲线现在并不完全垂直！

# ios - 设备未连接

> ID：13512003
> 
> 赞同：0
> 
> 时间：2012-11-22T11:39:30.687
> 
> 标签：ios, xcode, organizer

我们的 sdk 版本是 XCode 4.3.2，在升级到我们的 IOS(iPhone 3) 到 4.2.1 之前；设备已正确连接，我们能够调试应用程序，但升级 ios 版本并单击从 XCode 运行时，我们遇到以下错误消息：

“没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。”

而且，在管理器中，我们的设备也显示为黄色状态。

# visual-studio-2012 - 非 Windows 8 机器上的 Visual Studio 2012 和 EF5 开发

> ID：13512004
> 
> 赞同：0
> 
> 时间：2012-11-22T11:39:33.340
> 
> 标签：visual-studio-2012, ef-model-first

我正在尝试在工作中创建一个 EF5 Model First 项目。

在我创建模型并单击从模型生成数据库后，起初它并没有创建背后的代码。稍微看了一下，我发现代码生成策略设置为无。我将其设置为默认值（想知道为什么没有默认值，而不是默认值）并重新生成数据库。

现在它确实创建了代码，但它不会编译。错误读取 - 部分声明不得指定不同的基类。只有这个错误出现在生成的代码中，在容器类中。

我还注意到 SQLce 文件没有突出显示，并且右键菜单上没有执行脚本选项，根据[http://msdn.microsoft.com/en-us/data/jj205424.aspx](http://msdn.microsoft.com/en-us/data/jj205424.aspx)上的视频，Wich应该。

有谁知道如何解决这些问题？

**更新：**所以我在 Win8 机器上安装了 VS2012，这是正确的 - 回到我原来的机器（Win7）我卸载并再次安装，问题仍然存在。我想这是 Win7 的某种限制 - 就像 Win7 上没有 win8 应用程序开发一样。

但与 Win8 Apps 不同，应该没有理由不能在 Win7 上开发 DB 应用程序，所以我的问题应该改写为：我可以安装一些东西来使用针对 VS2012 的完整 DB 工具吗？赢7？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:22:31.630

好吧，我找到了一半的答案。通过安装[Viual Studio 2012 的 SQL Server 数据工具（12 月更新）](http://msdn.microsoft.com/en-us/jj650015)，我得到了一组 SQL 编辑器——这意味着我得到了 SQL 突出显示

它仅适用于 SQL 文件，但不适用于 SQLCE 文件（天知道为什么），我仍然无法对数据库执行 SQL。

有人有更好的解决方案吗？直到有人找到一个这是我找到的最佳答案

**编辑：**实际上，现在我可以对数据库执行 SQL - 我打开并选择了源代码 - 现在它总是有执行选项。SQLCE 虽然，仍然没有变化 - 没有突出显示，也没有执行选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:08:28.763

在我创建模型并单击从模型生成数据库后，起初它并没有创建背后的代码。

> > 当您创建模型时，有一个框询问您是否要将代码放在单独的文件中.. 那是它将在后面创建代码，否则它将把代码和 asp 放在同一个文件中..

稍微看了一下，我发现代码生成策略设置为无

> > 不要更改设置，它与这个问题无关。它会弄乱生成的代码。

# python - 生成器类的实例（递归）

> ID：13512007
> 
> 赞同：2
> 
> 时间：2012-11-22T11:39:39.173
> 
> 标签：python, recursion, generator

假设我们有这个递归函数（生成器）

```
data = [1,[21, 22, [231, 232, 233]], [31, 32, 33]]

def listgen(data):
    for each in data:
        if type(each) is int:
            yield str(each)
        elif type(each) is list:
            g = listgen(each)
            for i in g:
                yield i
        else:
            continue
gen = listgen(data)
print ' '.join(gen) 
```

输出是：

```
1 21 22 231 232 233 31 32 33 
```

现在......我怎么能把它写成一个类，因为我需要为那个生成器定义 .close() 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:35:38.343

当您调用`close`生成器时，它会`GeneratorExit`在当前暂停执行的位置引发 a。您可以在重新引发异常之前捕获该异常并在`except`块中进行清理（不允许您忽略它）。

递归生成器稍微复杂一些，因为您需要手动将异常向上传播到递归堆栈。但即使这样也不是太难。这是您的生成器的一个版本，当它关闭时，会在其执行的每个级别上打印“清理”。如果在它从示例数据集中产生 231 后立即关闭它，您将获得 3 次，列表中的每一层嵌套一次。在您的实际用例中，您可以将其替换为关闭数据库连接的代码，或者执行您必须执行的任何其他清理工作。

```
def closable_listgen(data):
    try:
        for each in data:
            if type(each) is int:
                yield str(each)
            elif type(each) is list:
                g = closable_listgen(each)
                try:
                    for i in g:
                        yield i
                except GeneratorExit:
                    g.close()
                    raise
            else:
                continue
    except GeneratorExit:
        print("cleaning up")
        raise 
```

Python 3.3 使这更简单一些，因为新`yield from`语法会自动为我们将调用传播到`close`生成器链的上游：

```
def closable_listgen33(data):
    try:
        for each in data:
            if type(each) is int:
                yield str(each)
            elif type(each) is list:
                g = closable_listgen33(each)
                yield from g
            else:
                continue
    except GeneratorExit:
        print("cleaning up")
        raise 
```

为了更好地衡量，以下是您如何将生成器实现为一个类（这是您最初要求的）：

```
class list_gen_class(object):
    def __init__(self, data):
        self.iterator = iter(data)
        self.child = None

    def __iter__(self):
        return self

    def __next__(self):
        while True:
            if self.child:
                try:
                    return next(self.child)
                except StopIteration:
                    self.child = None

            value = next(self.iterator)
            if isinstance(value, int):
                return str(value)
            elif isinstance(value, list):
                self.child = list_gen_class(value)

    def close(self):
        if self.child:
            self.child.close()

        print("cleaning up") 
```

# javascript - 如何在 IE 中使用 javascript 从客户端获取文件大小？

> ID：13512009
> 
> 赞同：9
> 
> 时间：2012-11-22T11:39:44.303
> 
> 标签：javascript, jquery, internet-explorer, file-upload

我使用了以下方法

**HTML**

```
<input type="file" id="loadfile" /> 
```

**JavaScript**

```
var file = document.getElementById('loadfile').files[0];
alert( "name " +  file.name + "Size " +  file.size ); 
```

它在 IE 以外的其他浏览器上运行良好 :( 如何进入 IE ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:41:18.377

恐怕 IE 不提供文件大小信息。您也许可以将 HTML5 File API 与 IE10 一起使用，请参见此处：-

[在 Internet Explorer 中上传之前检查文件大小的 Javascript](https://stackoverflow.com/questions/7279055/javascript-to-check-filesize-before-upload-in-internet-explorer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T05:45:51.830

```
document.getElementById('loadfile').addEventListener('change', checkFile, false);

function checkFile(e) {
    var file_list = e.target.files;
    for (var i = 0, file; file = file_list[i]; i++) {
        var fileExtension = file.name.split('.')[file.name.split('.').length - 1].toLowerCase();
        var iConvert = (file.size / 1024).toFixed(2);

        txt = "File type : " +fileExtension + "\n";
        if(file.size > (1024 * 1024)){
            txt += "Size: " + (file.size / (1024*1024)).toFixed(2) + " MB \n";
        } else {
        txt += "Size: " + (file.size / 1024).toFixed(2) + " KB \n";
        }
        alert(txt);
    }
} 
```

见[田](http://jsfiddle.net/har1236/aHebc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:43:08.887

你可以使用 activeX 来做到这一点

```
function getSize()
{
 var myFSO = new ActiveXObject("Scripting.FileSystemObject");
 var filepath = document.upload.file.value;
 var thefile = myFSO.getFile(filepath);
 var size = thefile.size;
 alert(size + " bytes");
} 
```

请参阅此处了解更多详细信息；

[如何在客户端使用 HTML 和 Javascript 验证文件大小](https://stackoverflow.com/questions/1832415/how-validate-file-size-using-html-and-javascript-on-client-side)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:48:25.050

IE 不支持文件 API

来源：[https ://github.com/blueimp/jQuery-File-Upload/issues/147](https://github.com/blueimp/jQuery-File-Upload/issues/147)

必须使用 ActiveX 控件来执行此操作

```
function getSize()
{
 var myFSO = new ActiveXObject("Scripting.FileSystemObject");
 var filepath = document.upload.file.value;
 var thefile = myFSO.getFile(filepath);
 var size = thefile.size;
 alert(size + " bytes");
} 
```

来源：[http ://www.sencha.com/forum/showthread.php?196859-File-Upload-Field-IE-Safari-Opera-fileInput-error.&s=b124834725ae363759158268d91ac32c](http://www.sencha.com/forum/showthread.php?196859-File-Upload-Field-IE-Safari-Opera-fileInput-error.&s=b124834725ae363759158268d91ac32c)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T11:42:10.573

最高版本 9 的 IE 不支持获取文件大小所需的[文件 API 。](http://caniuse.com/fileapi)IE10 不支持文件大小。

# python - 从需要文件而不将文件写入磁盘的python调用shell脚本

> ID：13512016
> 
> 赞同：1
> 
> 时间：2012-11-22T11:40:17.127
> 
> 标签：python, pipe, popen

为简化起见，假设 shell 脚本是`cat`命令。在 shell 中，它通常会这样调用：

```
$ cat /some/path/myfile.txt 
```

现在该文件将被动态创建并将其写入磁盘将是一个主要的性能损失，存在安全问题并增加多用户环境中的文件管理开销。该脚本无法修改，也无法从标准输入读取（`cat`只是一个工作示例）。

我试过这个：

```
import os
pin, pout = os.pipe()
pin, pout = os.fdopen(pin, 'r'), os.fdopen(pout,'w')

from subprocess import Popen
pout.write("test")
pout.flush()
p = Popen('cat /proc/self/fd/%s' % pout.fileno(), shell=True) 
```

即使我关闭`pout` `p.poll()`仍然没有返回任何内容，表明该命令仍在等待来自管道的更多输入。

我怎样才能告诉命令没有更多的数据来自管道？有没有其他方法可以解决这个问题？

**编辑**

在 bash 中，如果文件内容是由名为`prog1`this 的程序生成的，将通过以下方式解决：

```
$ cat <(prog1) 
```

**编辑 2**

如果您不需要外壳，那么 Alfe 提到的另一个选项会更好，尽管问题仍然存在（即读取文件内容后进程未完成）

```
#...same as before
p = Popen(['cat', '/dev/stdin'], stdin=pout) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:01:14.637

这就是我最后所做的，但并不好。

因为我正在开发 CentOS 并且遇到了问题（我在这里询问过：[Python Popen can't open bash shell in CentOS/Red Hat](https://stackoverflow.com/questions/13511422/python-popen-cant-open-bash-shell-in-centos-red-hat)）我无法使用`execute='/bin/bash'`这就是解决方案看起来有点不同的原因比问题。

我使用bash进程替换和here-documents将一些配置传递给进程：

```
file_contents = '...'
p = Popen(['/bin/bash', '-c', "cat <(cat<<'EOF_CFG'\n%s\nEOF_CFG\n)" % file_contents]) 
```

我现在正在考虑使用 tmpfs 在其上创建命名管道。我认为首先启动脚本然后写入管道应该可以工作......如果我成功了，我也会在这里写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:56:55.460

摆弄了一下，似乎关闭一侧的管道不会在子进程的关联伪文件 /proc/self/fd/<#> 上生成 eof。您是否尝试过使用 /dev/stdin 并将您的输入简单地通过管道传输到子进程的标准输入？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:32:50.777

尝试为此使用命名管道。在其上，EOF 被正确传播：

```
$ mkfifo bla
$ python
from subprocess import Popen
p = Popen('cat bla', shell=True)
with file('bla', 'w') as f:
  f.write('test') 
```

您也可以从 Python 动态创建命名管道，当然，只需使用`os.mkfifo()`.

# sql - SQL 将 'DDMMYY' 转换为日期时间

> ID：13512019
> 
> 赞同：6
> 
> 时间：2012-11-22T11:40:33.170
> 
> 标签：sql, sql-server

我正在尝试将日期从`DDMMYY`格式转换为`datetime`SQL Server 中的日期。

我正在使用`convert`如下命令

```
select convert (datetime, '311012', <style>) 
```

我尝试在 msdn 上查找支持的样式，但没有找到完全匹配的。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T11:53:23.907

```
select convert (datetime,  Stuff(Stuff('311012',5,0,'.'),3,0,'.'), 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:54:44.940

试试这样：-

```
declare  @val1 varchar(30)
select @val1=SUBSTRING('311012',1 ,2)+'/'+SUBSTRING('311012',3 ,2)+'/'+'20'+SUBSTRING('311012',5 ,2)
SELECT CONVERT(datetime,@val1,103) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-22T12:58:44.063

```
select CAST('121031' AS datetime)  as d -- For YYMMDD 
```

# c# - 向 Bing 地图添加新图钉时如何提高 WPF 应用程序的性能？

> ID：13512021
> 
> 赞同：0
> 
> 时间：2012-11-22T11:40:48.593
> 
> 标签：c#, wpf, performance

现在我的应用程序读取带有纬度和经度节点（7k 个位置）的 XML。使用滑块，用户可以选择他想在地图上显示的节点。现在，每次 ValueChanged 都会执行以下代码：

```
foreach (HueDataClass dataClass in plotThumbList)
{
    Pushpin Lamp = new Pushpin();                  
    Lamp.Location = new Microsoft.Maps.MapControl.WPF.Location(dataClass.Lat, dataClass.Lon);
    hueMap.Children.Add(Lamp);
} 
```

有时应用程序会冻结一秒钟，然后显示所有图钉。我怎样才能提高性能？

亲切的问候，尼尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:53:24.110

[您应该使用MapItemsControl](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.wpf.mapitemscontrol.aspx)并将其[ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性绑定到数据项的[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx) ，而不是手动将图钉添加到 MapLayer 。

```
<Window.Resources>
    <DataTemplate x:Key="MapItemDataTemplate">
        <m:Pushpin Location="{Binding ...}" ... />
    </DataTemplate>
    <local:DataItemsCollection x:Key="DataItems"/>
</Window.Resources>
<m:Map ... >
    <map:MapItemsControl
        ItemTemplate="{StaticResource MapItemDataTemplate}"
        ItemsSource="{Binding Source={StaticResource DataItems}}"/>
</m:Map> 
```

[另请参阅ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)中的示例部分以及其中的链接以了解如何绑定到集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:49:18.120

我认为您应该尝试线程化您的应用程序。在单独的线程中执行添加图钉的代码。

这里有一些资源： http: [//msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)
[http://msdn.microsoft.com/en-us/library/dd235678.aspx](http://msdn.microsoft.com/en-us/library/dd235678.aspx)

您将不得不处理无法从另一个线程更新 UI 线程的事实。我知道你必须在 WinForms 中使用 InvokeRequired，但我不知道 WPF。

# jquery - 自定义 ValidationSummary 模板（不会破坏客户端验证）

> ID：13512023
> 
> 赞同：2
> 
> 时间：2012-11-22T11:40:50.947
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-validate, client-side-validation

之前已经问过一个类似的问题（[Custom ValidationSummary template Asp.net MVC 3](https://stackoverflow.com/questions/5857851/custom-validationsummary-template-asp-net-mvc-3)），但没有一个答案满足我的额外要求，即解决方案不会破坏客户端验证。

那么，有谁知道获得这样的功能的方法：

```
@if (!ViewData.ModelState.IsValid)
{
    <div class="form-errors">
        <p>Please have another look at the fields highlighted below</p>
        @Html.ValidationSummary()
    </div>
} 
```

与客户端验证一起使用吗？

当客户端验证关闭时，这正是我想要的，即如果模型有效则排除整个 div，如果有任何错误则显示它。但是，条件的意思是当评估为假时，第一次渲染表单时，整个部分都没有渲染，所以 jquery.validate 找不到任何地方插入验证摘要。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:00:08.940

帮手：

```
 public static MvcHtmlString MyValidationSummary(this HtmlHelper helper, bool excludePropertyErrors = false)
    {
        string html = "";

        html += helper.ViewData.ModelState.IsValid ? "<div class='form-errors' style='display:none;'>" : "<div class='form-errors'>";

        html += "<p>Please have another look at the fields highlighted below</p>";
        html += helper.ValidationSummary(excludePropertyErrors);
        html += "</div>";

        return new MvcHtmlString(html);
    } 
```

看法：

```
@using (Html.BeginForm("Index", "Home",FormMethod.Post, new {id="myform"}))
{
    @Html.MyValidationSummary()
    ...
    <input type="button" id="submitbutton" value="Submit" />
} 
```

JS：

```
$("#submitbutton").click(function () {
    $("#myform").validate();

    if (!$("#myform").valid()) {
        $("#myform .form-errors").show();
    }
    else {
        $("#myform").submit();
    }
}); 
```

**更新：**

如果您想使用局部视图

Shared/_MyValidationSummary.cshtml

```
@if (!ViewData.ModelState.IsValid)
{
    <div class="form-errors">
        <p>Please have another look at the fields highlighted below</p>
        @Html.ValidationSummary()
    </div>
}
else
{
    <div class="form-errors" style="display:none;">
        <p>Please have another look at the fields highlighted below</p>
        @Html.ValidationSummary()
    </div>
} 
```

看法：

```
@using (Html.BeginForm("Index", "Home",FormMethod.Post, new {id="myform"}))
{
    @Html.Partial("_MyValidationSummary")
    ...
    <input type="button" id="submitbutton" value="Submit" />
} 
```

# playframework-2.0 - 如何从视图访问全局对象？

> ID：13512025
> 
> 赞同：1
> 
> 时间：2012-11-22T11:40:57.523
> 
> 标签：playframework-2.0

我知道我可以将视图传递给 Global 对象实例，但这似乎很愚蠢，因为我想访问一个静态字段。

# email - 如何在不解密的情况下检查加密的 S/MIME 消息是否也被签名

> ID：13512026
> 
> 赞同：8
> 
> 时间：2012-11-22T11:40:58.027
> 
> 标签：email, encryption, digital-signature, smime

当加密邮件时，判断 s/mime 电子邮件是否使用附加签名进行签名的最简单方法是什么（就计算资源而言）？

如果消息只是签名，那很容易。它有点像：

附加签名

```
 Content-Type: application/x-pkcs7-mime; smime-type=signed-data;
    name="smime.p7m" 
```

或者：

用于分离签名

```
 Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
    micalg=SHA1; boundary="----=_NextPart_000_00D2_01CD5850.61030BF0" 
```

在它的标题中。

但是当消息被加密时，您无法判断它是否也被签名，因为 Content-Type 标头对于两种情况都是相同的（只是加密和加密/签名）：

```
 Content-Type: application/x-pkcs7-mime;
    smime-type=enveloped-data;
    boundary="----=_NextPart_000_000D_01CDC82B.98454D80";
    name="smime.p7m" 
```

这是否意味着我必须解密该消息才能知道它是否也已签名？目前，似乎我什至无法判断我的消息在解密之前是否已签名（因为签名在加密数据中）。或者，也许 S/MIME 加密和签名数据仍然有一些模式，可以让我区分加密/签名和加密/未签名数据而无需解密（如果我没有解密证书，这甚至可能）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-12T16:40:35.820

S/MIME 灵活；您可以以任何您想要的组合进行签名和/或加密。然而，电子邮件客户端通常都以相同的方式运行：Outlook 2010、Apple 的 Mail 和 Thunderbird 17 都签名然后加密。这 3 个的结果几乎相同。它们在消息标头中包含以下 3 个标头：

```
Content-Type: application/pkcs7-mime; smime-type=enveloped-data;
    name="smime.p7m"
Content-Disposition: attachment; filename="smime.p7m"
Content-Transfer-Encoding: base64 
```

它们对整个消息正文进行加密和 base64 编码。

要回答您的问题：

> 当加密邮件时，判断 s/mime 电子邮件是否使用附加签名进行签名的最简单方法是什么（就计算资源而言）？

唯一的办法就是解密。

> 这是否意味着我必须解密该消息才能知道它是否也已签名？

是的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T15:52:31.380

如果目标是确保：

1.  只有收件人才能解密消息，并且
2.  收件人知道谁写的消息，

那么正确的顺序是*签名*、*加密*，然后*再次签名*。否则无论如何你都不能相信它。这就是为什么。

**签名和加密消息：** *发送者首先对消息进行签名，然后对其进行加密。*
在这里，接收者可以解密消息，然后用完整的签名重新加密它，然后将其发送给第三方（带有欺骗的标头）。该第三方将相信原始作者直接将消息发送给他，而该消息实际上是由原始收件人转发的。

**加密和签名消息：** *发送者首先对消息进行加密，然后对其进行签名。*
任何攻击者都可以删除签名，将其替换为自己的签名，并在不知道其内容的情况下声明消息的作者身份。

**加密、签名和加密消息：** *发送者对消息进行加密和签名，然后再次加密。*
在这里，内部加密确保只有预期的收件人才能阅读邮件。签名意味着作者知道内容并打算将其提供给收件人。外部加密可防止攻击者知道或篡改消息。

*   在这种情况下，收件人在解密之前不会知道邮件已签名。

*   两次加密消息更重要

*   [更糟糕的是，已知](http://www.iacr.org/cryptodb/data/paper.php?pubkey=968)加密然后签名容易受到攻击。

**签名、加密和签名消息：** *发件人对消息进行签名和加密，然后再次签名。*
在这里，内部签名意味着作者知道内容。加密确保只有收件人可以解密它。外部签名意味着作者打算将消息发送给收件人。

*   如果攻击者试图通过删除外部签名并用他自己的替换它来声明所有权，那么（替换的）外部签名将与内部签名不匹配。

*   如果收件人将消息解密并转发给第三方，他必须要么保持最里面的签名完好无损，要么用自己的签名替换它。在任何一种情况下，原作者均不对信息承担责任。

**结论**

*尽管有当前（损坏的）标准，但只有*在最后一步中签名后，您才能验证邮件的发件人。因此，您不必担心先签名*然后*加密的消息，因为您不能相信所谓的签名者将消息发送给您。

例如，想象一下从总统那里收到一封签名然后加密的消息，邀请你去白宫吃饭。事实上，总统确实写了那条信息，但他实际上把它发送给了一个决定开你玩笑的人。

# ejb-3.0 - Glassfish 2.1 EJB 3.0 将本地 EJB 暴露给在同一域/jvm 中运行的其他应用程序

> ID：13512028
> 
> 赞同：7
> 
> 时间：2012-11-22T11:41:07.573
> 
> 标签：ejb-3.0, glassfish-2.x

我有一个需要配置不同的现有项目。这需要在没有重大代码更改的情况下发生。我实际上希望我只能通过配置以某种方式做到这一点。在过去的 2 到 3 天里，我一直在阅读我能找到的关于这个问题的所有内容。我了解 glassfish 类加载器，以及我可以使用什么。

我有一个当前的示例项目，它有一个 EJB，它定义了一个 @Local 接口。ejb 部署在 ejb-module 内，作为 glassfish 域中的 ejb-module。现在我正在尝试为另一个应用程序找到一种方法，该应用程序作为一个耳朵部署到同一域中，以便能够通过它的本地接口访问该 EJB。

我已阅读文档说这是不可能的。然后我在 StackOverflow 上看到了帖子，网上也有其他人说这是可能的。但是，我找不到实际的解决方案。

通过调查，我意识到@Local EJB 不会将自己注册到 jndi（至少根据日志），如果我使用 glassfish JNDI 浏览器，我也看不到它。所以这对我来说是有道理的，要么是不可能的，要么是 EJB 项目的部署有问题，我需要以某种方式公开它。

@Remote 是一种可能性，如果它可以通过引用进行，并且没有性能开销。但是允许@Local EJB 访问的首选方法确实是最终需要。

有谁知道我需要做什么才能将@Local EJB 暴露给另一个应用程序？或者这显然是不可能的？

我正在使用带有 EJB 3.0 的 Glassfish 2.1

如果 Glassfish 2.1 可以处理 EJB 3.1，如果它提供了这种能力，我愿意转向它，但我怀疑它是否那么容易。

请协助。谢谢你。

我正在添加赏金。要完成赏金，需要在同一个域中运行 2 个 ear 应用程序，其中 A.ear 包含一个 @Local EJB，B.ear 中的应用程序也使用该 EJB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:23:41.077

@Peter 给你的链接几乎可以解决你的问题。（[链接](https://stackoverflow.com/questions/5681197/access-a-local-session-bean-from-another-ear)）

解决@Xavier 的问题需要做的一个技巧是为两个耳朵提供相同版本的 common.jar（由相同的类加载器加载）。如果这样做，将不会抛出类转换异常，并且您将能够使用具有本地接口的 ejb。

为此，您需要将 common.jar 放入 glassfish/domains/domain1/lib 文件夹（用您的域名替换 domain1）。这样，这个 jar 将由 Glassfish 的共享类加载器加载。

我用 Eclipse 和 Glassfish 3 做了一个快速测试，结构如下：

```
package com.example;

JarShared
 - @Local class Server

EarServer
 - EjbServer
    - @Stateless class ServerBean implements Server

EarClient
 - EjbClient
    - @Stateless @LocalBean class ClientBean 
```

从 ClientBean 查找：

```
InitialContext ic = new InitialContext();
Server server = (Server) ic.
    lookup("java:global/EarServer/EjbServer/ServerBean!com.example.Server"); 
```

我没有得到 ClassCastException，我可以从 ServerBean 调用示例方法。

重要笔记：

*   EarServer 和 EarClient 都不应在 lib 文件夹中包含 JarShared，它们应重用位于 domain lib 文件夹中的 JarShared
*   记得添加 JarShared 后重新启动 Glassfish。
*   要使两个 ejb 项目都编译，您必须将 JarShared 添加到它们的构建路径中，但仅此而已

如果您有任何疑问，请发表评论。

# .net - 是否可以在 Github 上提供 ClickOnce 安装程序？

> ID：13512029
> 
> 赞同：18
> 
> 时间：2012-11-22T11:41:09.353
> 
> 标签：.net, github, clickonce

我想知道您是否可以为项目创建 ClickOnce 安装程序，然后在 GitHub 上托管安装文件夹（通过下载页面）？

我猜默认情况下 ClickOnce 会将安装文件发布到我认为 Github 下载页面不支持的子文件夹，但也许还有另一种方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-30T16:33:43.757

是的你可以。

实际上，我认为与 FTP 相比，这是一种更方便的方式。

1.  确保您的 Git 设置为“按原样提交”，这样您就可以避免一些签名问题。
2.  将 ClickOnce 应用程序发布到 git 存储库中的目录（您可能需要另一个分支），并将 Github 上的 raw url 作为下载/更新 url。例如对于存储库“xxx”，分支“master”，用户“vilic”的目录“clickonce”，url 应该是“https://raw.github.com/vilic/xxx/master/clickonce/”
3.  提交并推送您的应用程序。

顺便说一句，您将能够下载 exe 文件，并且应用程序能够检查和下载更新，因为您直接使用 raw.github.com。但是，您可能无法从浏览器打开 xml 文件，因为 xml 文件的 MIME 类型将是“text/plain”。但我认为你可以尝试使用 Github Pages 来构建这个服务器，它应该以正确的 MIME 类型响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T07:12:19.613

当我开始尝试这样做时，@VILIC 回答的这个问题是有帮助的事情之一。这是我的博客文章，详细介绍了 ClickOnce 到 GitHub 页面是如何实现自动化的 -

[http://flickrdownloadr.com/blogs/blog/2013/01/15/single-click-deployment-of-wpf-application-to-github-pages/](http://flickrdownloadr.com/blogs/blog/2013/01/15/single-click-deployment-of-wpf-application-to-github-pages/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-20T21:20:32.213

所有这些对我都不起作用：rawgithub.com、raw.github.com、raw.githubusercontent.com。

RawGit 确实有效，因为它提供了正确的 application/x-ms-application Content-Type 标头。

例子：

[https://cdn.rawgit.com/Microsoft/RESX-Unused-Finder/master/publish/ResxUnusedFinder.application](https://cdn.rawgit.com/Microsoft/RESX-Unused-Finder/master/publish/ResxUnusedFinder.application)

还遵循[本指南](https://refactorsaurusrex.com/post/2015/how-to-host-a-clickonce-installer-on-github/)并添加了一个 .gitattributes 文件：

```
*.manifest binary
*.application binary
*.deploy binary 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-24T04:59:28.897

从 raw.github.com 提供的大多数内容都具有 text/plain 内容类型，并使用 X-Content-Type-Options: nosniff 标头提供。

您可以将您的 url 从 raw.github.com 更改为 rawgithub.com，这解决了 VILIC VANE 答案中的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-21T07:34:47.720

是的，绝对可以！您可以使用原始 GitHub 免费托管您的 .NET 应用程序。

**请按照以下步骤操作：（**
我还在这里创建了一个说明性视频：[https](https://youtu.be/iMEGtrjMXPU) ://youtu.be/iMEGtrjMXPU ）

1.  如果您的项目不在 GitHub 上，请创建一个存储库并将您的代码推送到那里。它必须是公开的。
2.  在您的计算机上，在存储库的根目录下创建一个名为“published”的文件夹。确保在 .gitignore 中没有忽略此文件夹
3.  在此 /published 文件夹中创建一个名为 .gitattributes 的文件。添加以下内容

```
*.manifest binary
*.application binary
*.deploy binary
*  -text 
```

4.  现在提交并推送到 Github 存储库。导航到存储库中的此文件，单击 RAW 按钮。将 URL 地址复制到“/publish/”。它看起来像这样
    `https://raw.githubusercontent.com/{your-account-name}/{your-repo-name}/{branch}/published/`
5.  在 ClickOnce 安装程序中输入以下路径
    1.  **发布路径：** `{repo-path}/pubhished`
    2.  **安装路径：** `https://raw.githubusercontent.com/{your-account-name}/{your-repo-name}/{branch}/published/` 这是安装程序安装应用程序的服务器地址。
    3.  **更新路径：** `https://raw.githubusercontent.com/{your-account-name}/{your-repo-name}/{branch}/published/` 这是安装程序检查更新的服务器地址。
        **注意：**使用此链接浏览 clickonce 安装程序：
        [https](https://docs.microsoft.com/en-us/visualstudio/deployment/quickstart-deploy-using-clickonce-folder?view=vs-2022) ://docs.microsoft.com/en-us/visualstudio/deployment/quickstart-deploy-using-clickonce-folder?view=vs-2022 。
        确保在发布之前选中“创建桌面快捷方式”选项。现在提交并推送您的代码。
6.  现在在 /published 文件夹中单击 setup 以安装应用程序。这将连接 GitHub 服务器以在您的计算机上下载并安装所需文件的目录`C:\Users\vib28\AppData\Local\Apps\2.0`。
7.  要发布应用程序的更新，请执行以下步骤
    1.  对您的 c# 应用程序进行更改。
    2.  再次发布应用程序（到同一文件夹 /published）。修订号应该会增加，并且应该有一个新文件夹添加到该位置`/published/Application Files`
    3.  提交代码并将其推送到 GitHub。现在原始文件已更新。所以每当客户端运行他的应用程序时，它会自动提示下载更新。

# ajax - 传递由 servlet 动态添加到 jsp 的选定单选按钮的值

> ID：13512030
> 
> 赞同：0
> 
> 时间：2012-11-22T11:41:10.637
> 
> 标签：ajax, jsp, servlets

我在jsp页面中动态添加了一些单选按钮。现在我需要使用所选单选按钮的唯一 ID，将其传递给其他一些 servlet 来处理它？怎么做到呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T11:46:40.650

将所有单选按钮放在提交给 servlet 的表单中。确保您的每个单选按钮名称属性都设置为相同的值。还将每个单选按钮的 value 属性设置为其各自的 id。当您的表单提交时，它会将所选单选按钮的值传递给 servlet。然后，您可以使用 检索该值`request.getParameter()`。

有关更多信息，请查看本教程。[http://www.roseindia.net/jsp/radio-button-jsp.shtml](http://www.roseindia.net/jsp/radio-button-jsp.shtml)

# node.js - 将域代理到在不同端口上运行的多个节点服务器更好，还是让一个节点服务器具有类似虚拟主机的设置？

> ID：13512031
> 
> 赞同：0
> 
> 时间：2012-11-22T11:41:12.540
> 
> 标签：node.js

假设您有 3 个域，foo.com、bar.com 和 blah.com。您想为每个运行一个 nodejs 应用程序。

使用 http-proxy 将它们代理到 3 个不同端口上的 3 个单独的节点应用程序更好，还是更好地拥有一个使用 express.vhost() 来 require() 每个主机所需的任何代码的单节点应用程序？两种情况的利弊？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:34:53.210

每个 node.js 进程只使用一个 CPU。如果您的服务器只有一个核心，那么最好只运行一个节点实例以避免尽可能多的上下文切换。

但是，如果您拥有多核（和超线程），那么运行与拥有的核一样多的节点实例是有意义的。请记住，您的前端代理也会占用处理时间。

因此，对于四核服务器和 3 个域，运行 4 个进程非常有意义——前端代理和 3 个节点实例。

另外，不要忘记您的数据库也可能配置为启动多个线程。

# windows-phone-7 - 折叠惰性列表框时出现 WP7 错误

> ID：13512036
> 
> 赞同：0
> 
> 时间：2012-11-22T11:41:20.740
> 
> 标签：windows-phone-7, listbox, lazy-loading, visibility

我正在使用来自[Peter Torr](http://blogs.msdn.com/b/ptorr/archive/2010/10/12/procrastination-ftw-lazylistbox-should-improve-your-scrolling-performance-and-responsiveness.aspx)的非常流行的 LazyListBox 。在我将其设置`Visibility`为**Collapsed之前它工作正常**

```
<lazy:LazyListBox Visibility="Collapsed"> // cause error
    <lazy:LazyListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Number}"></TextBlock>
        </DataTemplate>
    </lazy:LazyListBox.ItemTemplate>
    <lazy:LazyListBox.LoadedItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Number}"></TextBlock>
                <Image Source="{Binding ImageUri}"></Image>
            </StackPanel>
        </DataTemplate>
    </lazy:LazyListBox.LoadedItemTemplate>
</lazy:LazyListBox> 
```

在 Visual Studio 设计器中，我收到

```
System.NullReferenceException
Object reference not set to an instance of an object.
at LazyListBox.LazyListBox.ComputeVisibleItems() in D:\VSProjects\LazyListBoxProject\LazyListBox.cs:line 428 
```

当我运行它时应用程序崩溃

但是，当我在代码中折叠它时，它工作得很好。

如何解决这个问题？在代码中设置它`Visibility`不符合我的要求

# java - 在 try 块中返回一个字符串

> ID：13512042
> 
> 赞同：0
> 
> 时间：2012-11-22T11:41:40.503
> 
> 标签：java, return, try-catch

我一般是编程新手，必须为我的课程用 Java 创建一个 IP 扫描仪，而我目前遇到了障碍。在朋友的帮助下，我能够从 jFrame 中获取 IP 地址并将其转换为 IP 号码。从那里我将它传递到一个公共字符串中，该字符串扫描地址。它目前可以毫无问题地遍历地址，但是我不知道如何将结果从 try 块中取出以显示在文本块中，就像您期望 IP 扫描程序那样。这是我的代码：

```
private void jBtnPSScanActionPerformed(java.awt.event.ActionEvent evt) {                                           
        // TODO add your handling code here:

        //Get text from text boxes
        String pingSSIP1 = jTxtPSSIPOne.getText();
        String pingSSIP2 = jTxtPSSIPTwo.getText();
        String pingSSIP3 = jTxtPSSIPThree.getText();
        String pingSSIP4 = jTxtPSSIPFour.getText();
        String pingSEIP1 = jTxtPSEIPOne.getText();
        String pingSEIP2 = jTxtPSEIPTwo.getText();
        String pingSEIP3 = jTxtPSEIPThree.getText();
        String pingSEIP4 = jTxtPSEIPFour.getText();

        //Convert text into IP Numbers      
        long ipNumberS = 0;
        ipNumberS = ipNumberS + (Long.parseLong(pingSSIP1)*256*256*256) ;
        ipNumberS = ipNumberS + (Long.parseLong(pingSSIP2)*256*256) ;
        ipNumberS = ipNumberS + (Long.parseLong(pingSSIP3)*256) ;
        ipNumberS = ipNumberS + (Long.parseLong(pingSSIP4)) ;
        System.out.println (ipNumberS);
        long ipNumberE = 0;
        ipNumberE = ipNumberE + (Long.parseLong(pingSEIP1)*256*256*256) ;
        ipNumberE = ipNumberE + (Long.parseLong(pingSEIP2)*256*256) ;
        ipNumberE = ipNumberE + (Long.parseLong(pingSEIP3)*256) ;
        ipNumberE = ipNumberE + (Long.parseLong(pingSEIP4)) ;
        System.out.println (ipNumberE);

        String startAddress = Long.toString(ipNumberS);
        String endAddress = Long.toString(ipNumberE);

        String returnIP = pingSweep(startAddress, endAddress, ipNumberS, ipNumberE);

        System.out.println(returnIP);

        //Update jTxtBlock with returnIP and result

    } 
```

和：

```
public String pingSweep (String startAddress, String endAddress, long ipNumberS, long ipNumberE) 
{
    String ip = "";

    for (long currIP = ipNumberS; currIP < ipNumberE; currIP++)
    {
        try {
            ip = Long.toString(currIP) ;
            System.out.println(currIP);
            InetAddress host = InetAddress.getByName(ip);
            System.out.println("Host Reachable? " + host.isReachable(4000));
            System.out.println(currIP);
            System.out.println(ip);
            ip = ip + " " + currIP + " " + host.isReachable(4000);
        }
        catch (UnknownHostException ex) {
            System.err.println(ex);
            break;
        }
        catch (IOException ex) {
            System.err.println(ex);
            break;
        }

    }
    return ip;
} 
```

提前致谢！

马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:49:12.750

所以这就是你所拥有的。要在 JFrame 上显示的字符串？是吗 ？

您可以在 JFrame 上添加标签并将字符串传递给该标签

详情请参阅[如何标注](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

PS：使用标签只是显示只读文本的建议，如果你想使用 inputText、textArea 或任何你喜欢和要求的东西

**更新**

OP 确认他正在使用 TextArea

提示：当您的 ping 收到响应时，jTextArea.append(host.isRechable) 方法将新值附加到 jTextArea。

# javascript - 替换 Facebook 上的 textarea 内容有效，但表面上

> ID：13512048
> 
> 赞同：0
> 
> 时间：2012-11-22T11:42:09.920
> 
> 标签：javascript, jquery, facebook, replace, textarea

我正在尝试处理 textarea 中的文本 [在“您的”Facebook 页面上，人们可以在其中编写状态更新等]并将其替换为新文本。到目前为止我尝试了什么：打电话

```
document.body.innerHTML.replace 
```

或者像这样使用[改进的发送键：](http://bililite.com/blog/2011/01/23/improved-sendkeys/)

```
$('#'+textarea.id).focus();
$('#'+textarea.id).val('');
$('#'+textarea.id).sendkeys("replacement");
$('#'+textarea.id).sendkeys('{enter}');
$('#'+textarea.id).focus();
$('#'+textarea.id).trigger('keypress'); 
```

模拟输入文本区域。使用上述方法（或其变体）会导致以下情况：

*   Textarea 读取：“初始文本”（无论用户输入什么内容）；
*   用上述任一方法替换 textarea 内容；
*   Textarea 内容为：“替换文本”；
*   按下“发布”按钮；
*   发布的是：“初始文本”；

但是，如果用户返回到 textarea 并添加任何仅移动插入符号的字符（它也适用于其他更简单的 textarea），则该过程有效。检查 html 表明有一些元素存储了 textarea 的内容，但抓取 textarea 内容的机制让我无法理解。*我不知道这是否有所作为，但它是 chrome 扩展的内容脚本的一部分*

# javascript - 响应式设计流体图像理念

> ID：13512050
> 
> 赞同：1
> 
> 时间：2012-11-22T11:42:13.197
> 
> 标签：javascript, css, responsive-design

我正在尝试创建一个页面，其中要加载的适当图像由 javascript 根据浏览器大小确定。例如：

```
<img src="image1.jpg" /> 
```

javascript会将其更改为：

```
<img src="image1_800px.jpg" /> 
```

并加载 800px 宽的图像版本。

这样做不是问题。当我尝试对没有 javascript 的浏览器执行相同操作时，就会出现问题。基本思想是最初隐藏图像并在 NOSCRIPT 标记中使用样式显示它们。因此，支持 javascript 的浏览器将更改图像 url 并使这些图像可见，而不支持 javascript 的浏览器将简单地通过 css 取消隐藏这些图像。问题是带有 display:none 的图像是由浏览器加载的。除了 src 属性之外，将图像 url 添加到任何内容中都不是一个选项，因为这样的图像将依赖 javascript 来设置其 src。

那么，如果有可能使这项工作成为可能，有什么想法吗？

例如：我可以在 domready 上重写图像 src 属性，并希望浏览器不会设法开始从旧 src 加载图像，但会是这样吗？如果是这样 - 是否总是如此，或者某些浏览器会以不同的方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:51:02.620

我认为您正在寻找的是[http://adaptive-images.com/](http://adaptive-images.com/) - 它使用 Javascript 来确定图像大小，但如果用户没有启用仍然提供调整大小的图像的 Javascript，它还有一个备份选项（有警告，请阅读文档）。

# php - PHP MySql 进度条

> ID：13512054
> 
> 赞同：0
> 
> 时间：2012-11-22T11:42:44.693
> 
> 标签：php, mysql, sql, database, exp

> **可能重复：**
> [使用 CSS 和 HTML 的进度条布局](https://stackoverflow.com/questions/5865825/progress-bar-layout-using-css-and-html)

我正在制作一个涉及能量、经验、等级、任务等的游戏。嗯，当你执行任务时，它会消耗能量，一旦你完成任务，你就会收到现金和经验。嗯，它需要经验来升级。升级工作，但我想添加一个进度条来显示你有多接近升级。一个例子是 Exp: 26,175/27,100。每次升级时，max_exp 都会提高 250，但希望在文本后面有一个栏来显示它们与升级的距离有多近，而不仅仅是看到文本。这是下面的练级代码..

```
<?php
if ($exp >= $max_exp)
    {
    $sql = "UPDATE users SET level=(level + 1) , max_exp=(max_exp + 250) WHERE id='".$id."' LIMIT 1";
    $res = mysql_query($sql);
if ($exp >= $max_exp)
        echo '';
    }
    else
    {
    } 
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:01:37.023

您可以将您的比率作为内联 css 回显。

一个例子：

CSS：

```
div#value
{
    display: block; 
    z-index: 2;
    height: 10px;
} 
```

php/html:

```
$value = 35;

//this line will give you "width: 35%"
<div id="value" style="width:<?php echo $value; ?>%;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:45:02.917

这只是一个 HTML/CSS 问题：制作一个只有一行和两列的表格（比如一个全绿色，一个白色），然后根据您的值移动两列的宽度比

# windowbuilder - 如何在 WindowBuilder Pro 中打开私人课程？

> ID：13512057
> 
> 赞同：0
> 
> 时间：2012-11-22T11:42:47.720
> 
> 标签：windowbuilder

我开发 JFace 向导对话框。[WindowBuilder](https://developers.google.com/java-dev-tools/wbpro/)允许编辑[向导页面](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/wizard/WizardPage.html)，但我不想将我的页面放入单独的文件中。如何指示 WindowBuilder 解析器允许编辑私有类？我已经尝试过`@wbp.parser.preferredRoot`如下`@wbp.parser.entryPoint`标记，但不起作用。

```
public class ResetPasswordDialog extends Wizard {
    ...

    @Override
    public void addPages() {
        Page1 p = new Page1(); // @wbp.parser.preferredRoot
        addPage(p);
        addPage(new Page2());
        addPage(new Page3());
    }

}

class Page1 extends WizardPage {
   /**
    * @wbp.parser.entryPoint
    */
   @Override
   public void createControl(Composite parent) {
       ...
   }
}

class Page2 extends WizardPage {
}

class Page3 extends WizardPage {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:04:44.350

WindowBuilder 不适用于私有组件或内部类。这是故意的，不会改变。如果要使用 WindowBuilder，则必须将每个类提取到单独的文件中。

# performance - 使用 EPPlus 与 Spreadsheet Gear 读取/写入许多文件时的性能差异

> ID：13512069
> 
> 赞同：4
> 
> 时间：2012-11-22T11:43:19.887
> 
> 标签：performance, excel, epplus, spreadsheetgear

我在 EPPlus 和 Spreadsheet Gear 之间进行了简单的性能测试，看看是否有任何显着差异可以证明购买 Spreadsheet Gear 是合理的。

我不是这两个应用程序的专家，因此测试可能不是以最有效的方式编写的。

测试执行以下操作： 1\. 打开一个包含 1000 行和 3 列的现有 Excel 文件。将三个值保存到保存到 List<> 中的实体中。2\. 打开一个新的 Excel 对象 3\. 用每列的标题创建一个标题行（粗体）。4\. 写回 1000 个实体。5\. 保存新的 Excel 文件。

如果我在 EPPlus 获胜后运行此测试（大约时间是 EPPlus = 280ms，SG = 500ms）。如果我连续运行 10 次测试（for 循环打开、复制、保存 10 次单独的时间），Spreadsheet Gear 会更快（每个文件大约时间：EPPlus = 165ms，SG = 95ms）。对于 20 次测试，大约时间是 EPPlus = 160 毫秒 / 文件和 SG = 60 毫秒 / 文件。

我创建的文件越多，Spreadsheet Gears 似乎（至少在某种程度上）变得越来越快。谁能解释为什么 EPPlus 在运行连续测试时速度较慢？我可以更改代码来改变它吗？

EPPlus 测试功能：

```
var timer = new Stopwatch();
  timer.Start();
  var data = new List<Item>();
  using (var excelIn = new ExcelPackage(new FileInfo(folder + fileIn)))
  {
    var sheet = excelIn.Workbook.Worksheets[1];
    var row = 2;
    while (sheet.Cells[row, 1].Value != null)
    {
      data.Add(new Item()
        {
          Id = int.Parse(sheet.Cells[row, 1].Text),
          Title =  sheet.Cells[row, 2].Text,
          Value = int.Parse(sheet.Cells[row, 3].Text)
        });

      row++;
    }
  }

  using (var excelOut = new ExcelPackage())
  {
    var sheet = excelOut.Workbook.Worksheets.Add("Out");
    sheet.Cells.LoadFromCollection(data);
    sheet.InsertRow(1, 1);
    sheet.Cells[1, 1, 1, 3].Style.Font.Bold = true;
    sheet.Cells[1, 1].Value = "Id";
    sheet.Cells[1, 2].Value = "Title";
    sheet.Cells[1, 3].Value = "Value";

    excelOut.SaveAs(new FileInfo(folder + "EPPlus_" + Guid.NewGuid() + ".xlsx"));
  }

  timer.Stop();
  return timer.ElapsedMilliseconds; 
```

电子表格齿轮：

```
var timer = new Stopwatch();
  timer.Start();

  var data = new List<Item>();
  var excelIn = Factory.GetWorkbook(folder + fileIn);
  var sheetIn = excelIn.Worksheets[0];
  var rowIn = 1;
  while (sheetIn.Cells[rowIn, 0].Value != null)
  {
    data.Add(new Item()
    {
      Id = int.Parse(sheetIn.Cells[rowIn, 0].Text),
      Title = sheetIn.Cells[rowIn, 1].Text,
      Value = int.Parse(sheetIn.Cells[rowIn, 2].Text)
    });

    rowIn++;
  }
  excelIn.Close();

  var excelOut = Factory.GetWorkbook();
  var sheetOut = excelOut.Worksheets.Add();
  sheetOut.Name = "Out";
  var rowOut = 0;
  sheetOut.Cells[rowOut, 0, rowOut, 2].Font.Bold = true;
  sheetOut.Cells[rowOut, 0].Value = "Id";
  sheetOut.Cells[rowOut, 1].Value = "Title";
  sheetOut.Cells[rowOut++, 2].Value = "Value";

  foreach (var item in data)
  {
    sheetOut.Cells[rowOut, 0].Value = item.Id;
    sheetOut.Cells[rowOut, 1].Value = item.Title;
    sheetOut.Cells[rowOut++, 2].Value = item.Value;
  }

  excelOut.SaveAs(folder + "SpreadsheetGear_" + Guid.NewGuid() + ".xlsx", FileFormat.OpenXMLWorkbook);
  excelOut.Close();

  timer.Stop();
  return timer.ElapsedMilliseconds; 
```

主功能

```
var runs = 1;
  var testerG = new TestSpreadsheetGear();
  var testerE = new TestEpPlus();
  var msE = 0.0;
  var msG = 0.0;
  var i = 0;
  for (i = 0; i < runs; ++i)
  {
    msG += new TestSpreadsheetGear().Run(folder, originalFile);
  }

  for(i = 0; i < runs; ++i)
  {
    msE += new TestEpPlus().Run(folder, originalFile);
  }

  Console.WriteLine("Spreadsheet time: " + msG + ". Per file: " + msG / runs);
  Console.WriteLine("EP Plus time: " + msE + ". Per file: " + msE / runs);
  Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:59:54.663

我相信您看到结果的原因是在第一次运行时 .NET CLR 必须 JIT 代码。由于 SpreadsheetGear 是一个完整的电子表格引擎（与读/写库相反），因此 JIT 的代码更多 - 因此 SpreadsheetGear 的第一次运行比 EPPlus 需要更长的时间（我在这里推测但有很多经验在过去 10 年中对 .NET 代码进行基准测试）。

我没有安装 EPPlus，但我确实写了一个测试来尝试做你正在做的同样的事情。使用 SpreadsheetGear 2012 由于我没有您的起始工作簿，因此我首先构建了工作簿。然后，我使用了更优化的 SpreadsheetGear API。我第一次运行时，SpreadsheetGear 2012 运行时间为 141 毫秒。第一次运行后，在运行 Win7 x86 的超频 Core i7-980x 上每次运行我得到 9 或 10 毫秒，并且在没有调试器的情况下运行发布版本。

我在下面粘贴了我的代码（只需将其粘贴到 .NET 4.0 C# 控制台应用程序中）。

我的另一个想法是这是一个非常小的测试用例。要真正了解 SpreadsheetGear 2012 的性能，请尝试使用 100,000 行甚至 100 万行。

免责声明：我拥有 SpreadsheetGear LLC

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using SpreadsheetGear;

namespace SGvsEPPlus
{
    class Program
    {
        internal struct Item
        {
            internal Item(int id, string title, int value)
            {
                Id = id;
                Title = title;
                Value = value;
            }

            internal int Id;
            internal string Title;
            internal int Value;
        }

        static void Test(int rows)
        {
            string filename = @"C:\tmp\MyWorkbook.xlsx";
            Console.Write("Test({0})...", rows);
            var timer = new Stopwatch();
            // Create workbook since we don't have poster's original workbook.
            timer.Restart();
            var workbook = Factory.GetWorkbook();
            var values = (SpreadsheetGear.Advanced.Cells.IValues)workbook.Worksheets[0];
            for (int row = 1; row <= rows; row++)
            {
                values.SetNumber(row, 0, row);
                values.SetText(row, 1, "Title " + row);
                values.SetNumber(row, 2, row * 10);
            }
            Console.Write("Create workbook={0:0}...", timer.Elapsed.TotalMilliseconds);
            // Save workbook
            timer.Restart();
            workbook.SaveAs(filename, FileFormat.OpenXMLWorkbook);
            Console.Write("Save workbook={0:0}...", timer.Elapsed.TotalMilliseconds);
            // Track total time of original test.
            var totalTimer = Stopwatch.StartNew();
            // Open workbook
            timer.Restart();
            var excelIn = Factory.GetWorkbook(filename);
            Console.Write("Open excelIn={0:0}...", timer.Elapsed.TotalMilliseconds);
            // Copy workbook to list
            timer.Restart();
            var sheetIn = excelIn.Worksheets[0];
            var valuesIn = (SpreadsheetGear.Advanced.Cells.IValues)sheetIn;
            var rowIn = 1;
            var data = new List<Item>(rows);
            while (valuesIn[rowIn, 0] != null)
            {
                data.Add(new Item(
                    (int)valuesIn[rowIn, 0].Number,
                    valuesIn[rowIn, 1].Text,
                    (int)valuesIn[rowIn, 2].Number));
                rowIn++;
            }
            excelIn.Close(); // Not necessary but left for consistency.
            Console.Write("excelIn->data={0:0}...", timer.Elapsed.TotalMilliseconds);
            timer.Restart();
            var excelOut = Factory.GetWorkbook();
            var sheetOut = excelOut.Worksheets[0];
            var valuesOut = (SpreadsheetGear.Advanced.Cells.IValues)sheetOut;
            sheetOut.Name = "Out";
            var rowOut = 0;
            sheetOut.Cells[rowOut, 0, rowOut, 2].Font.Bold = true;
            sheetOut.Cells[rowOut, 0].Value = "Id";
            sheetOut.Cells[rowOut, 1].Value = "Title";
            sheetOut.Cells[rowOut++, 2].Value = "Value";
            foreach (var item in data)
            {
                valuesOut.SetNumber(rowOut, 0, item.Id);
                valuesOut.SetText(rowOut, 1, item.Title);
                valuesOut.SetNumber(rowOut, 2, item.Value);
                rowOut++;
            }
            Console.Write("data->excelOut={0:0}...", timer.Elapsed.TotalMilliseconds);
            timer.Restart();
            excelOut.SaveAs(@"C:\tmp\SpreadsheetGear_" + Guid.NewGuid() + ".xlsx", FileFormat.OpenXMLWorkbook);
            excelOut.Close(); // Again - not necessary.
            Console.WriteLine("Save excelOut={0:0}...", timer.Elapsed.TotalMilliseconds);
            Console.WriteLine("    Total={0:0}", totalTimer.Elapsed.TotalMilliseconds);
        }
        static void Main(string[] args)
        {
            // Do it three times with 1000 rows. Note that the first
            // time takes longer because code must be JITted.
            Test(1000);
            Test(1000);
            Test(1000);
        }
    }
} 
```

# javascript - 将 ruby on rails 表中的数据分配给 javascript 变量

> ID：13512070
> 
> 赞同：0
> 
> 时间：2012-11-22T11:43:22.497
> 
> 标签：javascript, ruby-on-rails

我正在尝试从 ror 分配一个 javascript 变量数据。我已经进行了查询，它给了我想要的东西（一个整数），但我不能将它分配给 js 变量。这是我正在使用的 js 脚本：

```
<script type="text/javascript">
  $(function() {
    var number_of_products = '<%= Post.where(:id => 1).select(:amount).pluck(:amount)[0] %>';  
    $(document).ready(function(){
      for (i=1; i <=number_of_products; i++) $('#itemsAmount').append('<img src="images/box.svg"/>');
    })
  })
</script> 
```

但我似乎无法将 ror 值（`<%= Post.where(:id => 1).select(:amount).pluck(:amount)[0] %>`）传递给 js 变量（`number_of_products`）

有任何想法吗？

谢谢，

谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:53:22.930

看来您的问题不在于将值输入 javascript，它只是错误的类型尝试将您的代码更改为以下

```
<script type="text/javascript">
  $(function() {
    var number_of_products = <%= Post.where(:id => 1).select(:amount).pluck(:amount)[0] %>;  
    $(document).ready(function(){
      for (i=1; i <=number_of_products; i++) $('#itemsAmount').append('<img src="images/box.svg"/>');
    })
  })
</script> 
```

**编辑：**

你`#itemsAmount`的页面上有吗？

[工作小提琴 http://jsfiddle.net/DeMd2/](http://jsfiddle.net/DeMd2/)

# awk - 从 awk 文件执行另一个 awk

> ID：13512072
> 
> 赞同：7
> 
> 时间：2012-11-22T11:43:23.473
> 
> 标签：awk

是否可以从 awk 文件执行另一个 awk 文件？使用 awk 文件我需要执行当前文件夹中的所有 awk 文件。是否可以在 awk 中进行此类操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T12:58:17.847

是的你可以。您需要使用该`system()`功能。我假设您只想运行这些脚本一次。如果是这样，您可以将它们添加到`BEGIN`包装脚本的块中：

```
BEGIN {
    system("awk -f ./script1.awk")
    system("awk -f ./script2.awk")
    system("awk -f ./script3.awk")
} 
```

如果有大量脚本需要执行，可以使用`for`循环。请确保您的包装脚本与`awk`您要执行的所有其他脚本不在同一目录中，否则它将包含在`awk`脚本全局中...

```
BEGIN {
    system("for i in *.awk; do awk -f \"$i\"; done")
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T15:34:24.463

1) 是的。2）不要。

awk 是一个处理文本的工具。shell（或在你的操作系统上传递给它的任何东西）是一个用于调用命令和操作文件和进程的工具。

猜猜你应该使用哪一个来执行文件系统中的所有 awk 命令？

如果您告诉我们您的更大问题是什么以及您的操作系统，我们可以为您提供指导。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T11:50:00.490

建议使用`system`函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-10T01:03:36.620

system 的一个常见用途是使用它来处理刚刚由 awk 脚本创建的输出文件。除非您在调用系统之前先关闭（输出文件），否则它可能无法正常工作。

# linux-kernel - 为新板定制 linux 内核

> ID：13512076
> 
> 赞同：2
> 
> 时间：2012-11-22T11:43:39.840
> 
> 标签：linux-kernel, kernel, embedded-linux

我正在为我们的主板移植/定制 linux 内核。我将基于atmel进化板配置，我需要覆盖一些启动例程并添加我们的驱动程序。

是否有任何文档、链接、论坛可以让我获得如何以 Linux 方式制作的信息？我可以覆盖哪些文件，我应该从头开始创建哪些文件？这是板级支持包问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:33:03.470

我怀疑您的问题是否有简短的答案。要完成这项任务，您应该或多或少地了解 Linux 作为发行版（内核 + 引导脚本 + 用户空间软件）一起工作，以及如何让它们成为朋友。

我可以向您推荐这本书，作为嵌入式 Linux 工程师，我发现这本书非常有用： [嵌入式 Linux 入门：实用的真实世界方法（第 2 版）](https://rads.stackoverflow.com/amzn/click/com/0137017839)我非常有信心它会回答您的大部分问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:05:40.970

我想就是这样。简短，漂亮，新鲜：

[http://free-electrons.com/blog/elce-2012-slides-porting-linux-to-new-arm-soc/](http://free-electrons.com/blog/elce-2012-slides-porting-linux-to-new-arm-soc/)

# java - GWT：ListEditor 错误地尝试验证从列表中删除的实体

> ID：13512080
> 
> 赞同：4
> 
> 时间：2012-11-22T11:44:03.680
> 
> 标签：java, gwt, bean-validation, requestfactory, gwt-editors

问题是删除的 ContactDocuments`editor.getList().remove(index)`仍然通过验证，因此无法保存已编辑的联系人。例如`requestContext.save()`，如果我添加新的 ContactDocument 并`editor.getList().add()`由于某些字段上的 @NotNull 违规而立即将其删除，则会因 onConstraintViolation 失败。

我有简单的关系：联系人有很多 ContactDocuments。我正在尝试使用请求工厂和编辑器框架编辑联系人。ContactDocuments 使用 JSR-303 进行注释以进行基本验证。

我的 ContactDocuments 集合的 ListEditor：

```
public class ContactDocumentListEditor extends Composite implements IsEditor<ListEditor<ContactDocumentProxy, ContactDocumentEditor>>, HasRequestContext<List<ContactDocumentProxy>> {
private RequestContext requestContext;

interface ViewUiBinder extends UiBinder<Widget, ContactDocumentListEditor> {}
private final static ViewUiBinder uiBinder = GWT.create(ViewUiBinder.class);

private final ListEditor<ContactDocumentProxy, ContactDocumentEditor> editor = ListEditor.of(new DocumentEditorSource());

@UiField
VerticalPanel container;
@UiField
Button addContactDocumentButton;

@UiHandler("addContactDocumentButton")
void addContactDocumentButtonClick(ClickEvent event) {
    addNewContactDocument();
}

public ContactDocumentListEditor() {
    initWidget(uiBinder.createAndBindUi(this));
}

private class DocumentEditorSource extends EditorSource<ContactDocumentEditor> {
    @Override
    public ContactDocumentEditor create(final int index) {
        final ContactDocumentEditor documentEditor = new ContactDocumentEditor();
        documentEditor.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                removeDocumentEditor(index);
            }
        });
        container.insert(documentEditor, index);
        return documentEditor;
    }

    @Override
    public void dispose(ContactDocumentEditor subEditor) {
        container.remove(subEditor);
    }

    @Override
    public void setIndex(ContactDocumentEditor subEditor, int index) {
        container.insert(subEditor, index);
    }
}

@Override
public ListEditor<ContactDocumentProxy, ContactDocumentEditor> asEditor() {
    return editor;
}

@Override
public void setRequestContext(RequestContext ctx) {
    requestContext = ctx;
}

private void addNewContactDocument() {
    ContactDocumentProxy newDocument = requestContext.create(ContactDocumentProxy.class);
    editor.getList().add(newDocument);
}

private void removeDocumentEditor(int index) {
    editor.getList().remove(index);
}
} 
```

我的演示者来驱动它：

```
 final ContactRequestContext contactRequestContext =  contactRequestContextProvider.get();
    contactRequestContext.save(contact);
    driver.edit(contact, contactRequestContext);
    driver.flush().fire(new Receiver<Void>() {
        @Override
        public void onSuccess(Void response) {
            // success 
        }

        @Override
        public void onConstraintViolation(Set<ConstraintViolation<?>> violations) {
            for (ConstraintViolation violation : violations) {
                logger.info("Contact constraint violation: " + violation.getPropertyPath() + " = " + violation.getMessage());
            }
            driver.setConstraintViolations(violations);
        }
    }); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:27:33.870

~~要么使用*双重*延迟创建*真正的*代理（创建一个实现代理接口的类，创建该类的实例而不是 RF 代理，并在*刷新*时或之后创建真正的代理来替换*假*的代理；那方式你永远不会创建一个不会发送到服务器的代理）。~~

 ***或者，如果可能，仅将您的对象作为其他对象的一部分进行验证，而不是单独验证（不要单独验证 a `ContactDocument`，仅作为验证 a 的一部分，在包含 s 的属性上`Contact`使用）：这可以使用覆盖方法来完成，可能与一个或两个类上的a 以及使用除.`@Valid``ContactDocument``ServiceLayerDecorator``validate``@GroupSequence``ServiceLayerDecorator``Default`

相关问题：[无法从 RequestContext 编辑上下文中删除代理](https://code.google.com/p/google-web-toolkit/issues/detail?id=6685)***

# java - 从tomcat服务器中的war文件运行java类

> ID：13512081
> 
> 赞同：0
> 
> 时间：2012-11-22T11:44:04.647
> 
> 标签：java, mysql, tomcat, webserver

我已经在远程tomcat服务器上上传了一个war文件。这里我必须解压缩war文件。这里我必须在我的浏览器上运行**Demo** java类。我该怎么办？？？？

这是Demo.java的保存路径：

**/var/lib/tomcat7/webapps/Example/WEB-INF/classes/com/testprops/ws**

在这里我必须运行这些意味着 URL [http://xx.xx.xx.xxx:8080/Example/](http://xx.xx.xx.xxx:8080/Example/)意味着我正在成功获取这些页面。请检查：[http ://screencast.com/t/DKZW1t9Z1](http://screencast.com/t/DKZW1t9Z1)

这是我的 Demo.java：

```
 public class Demo {
 public String customerData(){
 String customerInfo = "";
 int a=10;
 customerInfo = customerInfo + a;
  try{
  Class.forName("com.mysql.jdbc.Driver");
   Connection con =  DriverManager.getConnection("jdbc:mysql://localhost:3306/android","androiduser","AN124@7#7");
  //Find customer information where the customer ID is maximum
   PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers");
   ResultSet result = statement.executeQuery();
   while(result.next()){
   customerInfo = customerInfo + a + "&" + result.getString("login") + "&" + result.getString("password") + "&"+result.getString("firstname") + "&"+result.getString("email");
   //Here "&"s are added to the return string. This is help to split the string in Android application
    }
      }
    catch(Exception exc){
    System.out.println(exc.getMessage());
     }  
    return customerInfo;
    }
    } 
```

如何在我的浏览器上运行 Demo.java 类。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:47:50.673

那是因为您需要编写一个运行代码的 servlet。基本上，当您向上述给定链接发出请求时，它会调用`Demo.java`类并给出输出。

建议先学习一点关于 servlet 的基础知识。那应该有帮助。

所以有一个简单的servlet

```
public void doGet(HttpServeletRequest r, HttpServletResponse s){
 Demo demo = new Demo();
 demo.run();//your Demo.java is invalid as all that try catch code needs to be inside a method
 } 
```

# sql - 收到错误错误：SQL 问题：不一致的数据类型：预期的 NUMBER 得到了 CHAR

> ID：13512083
> 
> 赞同：1
> 
> 时间：2012-11-22T11:44:11.997
> 
> 标签：sql, oracle11g

我写了一个查询。问题是如果我删除case语句然后错误消失但是如果我使用case语句然后错误来了并且case语句是必要的。这是查询

```
Select
b.branch_name AS "BRANCHES",                         --varchar2(100 byte)
(
    Select count(temp.loan_acct_no)                  --varchar2(30 byte)
    From
        (
            Select *
            From
                Losa_app app
            inner join
                losa_cust lc
            on
                (lc.app_ref_no = app.app_ref_no )   --varchar2(20 byte)
            and
                lc.app_joint_T= 'P'                 --varchar2(10 byte)
            inner join
                losa_facilities lf
            on
                (lf.app_ref_no = app.app_ref_no)    --varchar2(20 byte)
        )
        temp
    where
        temp.attend_branch = b.branch_id            --NUMBER(10, 0)
) AS "No.of Account"
From
    code_branch b
where
    b.branch_code1                                  --varchar2(16 byte)
like
    case :inputChannel
        when 'AIBB' Then '0347%'                    --AIBB or ABB (varchar2(10 byte))
        When 'ABB'  Then '0232%' 
    end 
```

在这种情况下会出现错误，但如果我删除这些行

```
where
    b.branch_code1
like
    case :inputChannel
        when 'AIBB' Then '0347%'    
        When 'ABB'  Then '0232%' 
    end 
```

然后错误消失了。我认为错误即将到来，因为我的 case 语句正在返回 char 数据。如何将我的 case 语句转换为返回 number 而不是 char ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:01:30.253

完毕。我请求管理员将此问题移至 iReport 部分。因为查询是正确的，但是我在将这个查询放入 iReport 时做错了。实际上，在 oracle 中，当我们想要输入时，我们会像`:inputChannel`. 对于 iReport 中的相同内容，我们定义参数，例如`$P{inputChannel}`. 所以我做错的是，当我定义参数时`$P{inputChannel}`，我没有设置它`Default value expression`应该是`""`。执行此错误后，iReport 中消失了。

我不知道如何将它移到 iReport 部分，否则我自己做。对不起，但我想可能是我的查询做错了，对不起:(

# maven - 如何在 NSIS 中使用字符串替换

> ID：13512085
> 
> 赞同：2
> 
> 时间：2012-11-22T11:44:13.690
> 
> 标签：maven, nsis

我使用 maven，我有一个版本为 XYZ-SNAPSHOT 的 maven-project，我使用[maven-nsis-plugin](http://mojo.codehaus.org/nsis-maven-plugin/)。因为版本的格式是 XYZ-SNAPSHOT，所以我必须删除这个后缀并用 0 替换它。

maven插件[maven-nsis-plugin](http://mojo.codehaus.org/nsis-maven-plugin/)生成一个project.nsh：

```
!define PROJECT_VERSION "4.23.9-SNAPSHOT" 
```

在我的 setup.nsi 中使用：

```
!include target\project.nsh

Section VersionReplace
    Push "${PROJECT_VERSION}"
    Push "-SNAPSHOT"
    Push "0"
    Call StrRep
    Pop $0

    !define VERSION_SHORT $0
SectionEnd

Name "Installer ${VERSION_SHORT}"

(...)

VIProductVersion ${VERSION_SHORT} 
```

**问题**：在控制台中我可以看到：

```
Name: "Installer $0"
(...)
VIAddVersionKey: "ProductVersion" "$0" 
```

所以 $0 不会被替换。**我究竟做错了什么？**

使用的替换函数：[StrRep](http://nsis.sourceforge.net/StrRep)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:33:17.173

这可以使用[!searchreplace](http://nsis.sourceforge.net/Docs/Chapter5.html#5.4.14)命令完成，该命令在编译时运行

```
!searchreplace PROJECT_VERSION_SHORT ${PROJECT_VERSION} "-SNAPSHOT" ".0" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:13:56.723

`Name`和`VIProductVersion`是在创建 .exe 时在编译时考虑的安装程序属性

该`StrRep`函数将在运行时在传递到该部分时调用，并且更改或`VersionReplace`已来不及。`Name``VIProductVersion`

顺便说一句：如果您想在运行时定义一些值，例如在您的`!define VERSION_SHORT $0`语句中，请使用该语句创建一个变量`Var`并修改该变量（使用`StrCpy`）。A`!define`是在编译期间定义的无法更改的字符串替换。您实际编写的`VERSION_SHORT`是`$0`.

# python - 在文件计数上使用 len (\n)

> ID：13512086
> 
> 赞同：1
> 
> 时间：2012-11-22T11:44:17.520
> 
> 标签：python

我需要编写一个程序来计算文件中行的 len 并将行数 >= 返回到用户要求的 len 大小。问题是 len() 计数 (\n)，我不能假设在最后一行之后有 (\n)。我如何告诉 len() 在每一行的末尾不计算 (\n) ？

```
def count_long_lines(filename, size):

        f=open(filename,'r')
        count_line=0
        for line in f:
                if len(line)-1>=size:
                    count_line +=1

        print count_line
        f.close() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T11:46:04.927

用于`.rstrip('\n')`从行中删除任何换行符：

```
len(line.rstrip('\n')) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T11:47:05.587

您可以使用（注意，`.rstrip()`删除尾随换行符）

```
with open(filename) as f:
    print sum(1 for line in f if len(line.rstrip('\n')) >= size) 
```

# ios - 弹出框不显示 iPad 照片库

> ID：13512088
> 
> 赞同：1
> 
> 时间：2012-11-22T11:44:21.183
> 
> 标签：ios, ipad, uiimagepickercontroller, uipopovercontroller, photolibrary

我正在尝试编写一个允许用户从 iPad 上的照片库中选择图像的应用程序。我完全按照网上的消息来源说应该这样做，但是当我单击按钮时，屏幕上只显示箭头，没有其他内容。应该与图像一起显示的弹出框不显示。谁能告诉我为什么会这样？这是我的代码：

```
 UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        [picker setDelegate:self];

        [picker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [picker setAllowsEditing:YES];

        popoverController = [[UIPopoverController alloc] initWithContentViewController:picker];
        [popoverController presentPopoverFromRect:self.view.frame inView:[self view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T16:46:27.077

我知道现在回答为时已晚，但如果您已经对此感兴趣，这可能对您有用：

**在 .h 文件中，给出这个代表：**

```
@interface ViewController : UIViewController <UIPopoverControllerDelegate, UINavigationControllerDelegate,  UIImagePickerControllerDelegate> 
```

**将弹出框创建为属性：**

```
@property (nonatomic, strong) UIPopoverController *popoverController; 
```

**最后在 .m 文件中：**

```
-(IBAction)showPhotoLibray:(id)sender
{
    BOOL hasGellery = [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary];
    UIImagePickerController* picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = hasGellery ? UIImagePickerControllerSourceTypePhotoLibrary :    UIImagePickerControllerSourceTypePhotoLibrary;
    if (self.popoverController != nil)
    {
        [self.popoverController dismissPopoverAnimated:YES];
        self.popoverController=nil;
    }

    self.popoverController = [[UIPopoverController alloc] initWithContentViewController:picker];
    CGRect popoverRect = [self.view convertRect:[self.theViewObject frame]
                                       fromView:[self.theViewObject superview]];
    popoverRect.size.width = MIN(popoverRect.size.width, 300) ;
    popoverRect.origin.x = popoverRect.origin.x;
    [self.popoverController
     presentPopoverFromRect:popoverRect
     inView:self.view
     permittedArrowDirections:UIPopoverArrowDirectionAny
     animated:YES];
} 
```

self.theViewObject 是调用该方法的对象视图控制器的出口，例如 UIButton

# android - 从 Google Play 下载动态应用

> ID：13512089
> 
> 赞同：1
> 
> 时间：2012-11-22T11:44:21.180
> 
> 标签：android, google-play, google-play-services

我在 Google Play 上有一个名为 App-1 的 Android 应用程序。基本上，我想为我的用户创建一个应用内购买。购买In App Purchase后，我想下载app-2。

就像应用程序“MY CASINO GAME”下载了“POKER GAME”一样。我可以在没有用户对话框的情况下动态执行吗？我有 Google Play 的用户名/密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T16:04:48.910

我不认为这是可能的。一个人认为要容易得多的是，只需有意地从 app-1 打开 app-2 并使 app-2 成为付费应用程序。那么你就不需要应用内购买，也不需要对用户名/密码做任何事情。你不想要那个。

# c# - 将标签内部文本设置为空时向 XML 文件添加空格？如何将 null 传递给 XML 文件或从 XML 文件中删除子节点？

> ID：13512093
> 
> 赞同：1
> 
> 时间：2012-11-22T11:44:46.707
> 
> 标签：c#, xml, null

在我的项目中，我加载了一个 XML 文件并通过填充内部文本来填充其标签。我没有填充所有节点并留下一些空值。

在我保存 XML 文件后，那些设置为 null 的子节点内部文本被写为 5 个空格？

如何将节点的值设置为空？

另一种方法是如何从我的 XML 文件中删除子节点？

这是我填充节点内部文本的方式，我能做的最好的事情是 1 个空格，但我希望没有。

* * *

```
XmlDocument xmlDoc = new XmlDocument();
                    xmlDoc.Load(MapPath(tempFolderPathAlt + "dvforms" + "\\XmlDataTemplate.xml"));

XmlNodeList dataNodes = xmlDoc.SelectNodes("//FieldData");
foreach (XmlNode node in dataNodes)
   {
      int Count = 0;
      foreach (XmlNode childNode in node.ChildNodes) //For each child node in FieldData
        {
           if (PropInfo[Count].TagName == childNode.Name)
              {
                if (PropInfo[Count].TagValue != null)
                   {
                    node.SelectSingleNode(PropInfo[Count].TagName).InnerText = PropInfo[Count].TagValue;
                   }
                   else
                   {
                     //node.RemoveChild(childNode);
                     //xmlDoc.
                     // xmlDoc.RemoveChild(childNode);
                     //node.RemoveChild(PropInfo[Count].TagName);
                     node.SelectSingleNode(PropInfo[Count].TagName).InnerText = " ";
                   }
                     PropInfo[Count].TagMod = childNode.Attributes.Item(0).InnerText;
                     PropInfo[Count].TagIncludeInPdf = childNode.Attributes.Item(1).InnerText;
               }
               Count = Count + 1;
         }
    } 
```

目前我已将所有空值设置为一个空格，我希望它们为空值还是删除它们？

* * *

我的 XML 文件的外观

```
<?xml version="1.0"?>
<FormData Platform="Android" PlatformVersion="89" Version="360" DataVersion="1" Description="New Investec - Residential" FormId="9fe48133-ebec-415c-8581-22ba1bfcb237" FileId="d204b364-6b3f-46e0-beed-3f3b2783b8f3" EncryptionVerification="" CreatedBy="Johanc" EditedBy="Johanc" TrackingNum="FormMobi19e9ba3a-2c70-4a5a-a881-44cba4a031c5">
  <FieldData>
    <request_details_lightstone_report Mod="20010101010101" IncludeInPDFExport="Yes"> </request_details_lightstone_report>
    <request_details_export_template Mod="20010101010101" IncludeInPDFExport="Yes"> </request_details_export_template>
    <request_details_reason_for_valuatio Mod="20010101010101" IncludeInPDFExport="Yes"> </request_details_reason_for_valuatio>
    <request_details_valuation_job_numbe Mod="20010101010101" IncludeInPDFExport="Yes"> </request_details_valuation_job_numbe>

    <property_details_gps_location_lat Mod="20010101010101" IncludeInPDFExport="Yes">-29.965495</property_details_gps_location_lat>
    <property_details_gps_location_long Mod="20010101010101" IncludeInPDFExport="Yes">30.838881</property_details_gps_location_long>
    <property_details_address_address1 Mod="20010101010101" IncludeInPDFExport="Yes">8 LETHUBUHLE</property_details_address_address1>
    <property_details_address_address2 Mod="20010101010101" IncludeInPDFExport="Yes">UMLAZI SOUTH</property_details_address_address2>
    <property_details_address_city Mod="20010101010101" IncludeInPDFExport="Yes">ETHEKWINI</property_details_address_city>
    <property_details_address_state Mod="20010101010101" IncludeInPDFExport="Yes">KWAZULU NATAL</property_details_address_state>
    <property_details_address_zip Mod="20010101010101" IncludeInPDFExport="Yes"> </property_details_address_zip>
    <property_details_locality_map Mod="20010101010101" IncludeInPDFExport="Yes">a8267608-6693-40d4-a3e6-d46dfd888037.jpg</property_details_locality_map>
    <property_details_type_of_ownership Mod="20010101010101" IncludeInPDFExport="Yes">Freehold</property_details_type_of_ownership>
    <property_details_text_box Mod="20010101010101" IncludeInPDFExport="Yes"> </property_details_text_box>
    <property_details_text_box_1 Mod="20010101010101" IncludeInPDFExport="Yes"> </property_details_text_box_1>
    <property_details_area_of_site Mod="20010101010101" IncludeInPDFExport="Yes">840</property_details_area_of_site>
    <field_group Mod="20010101010101" IncludeInPDFExport="Yes"> </field_group>
    <property_description_erf_number Mod="20010101010101" IncludeInPDFExport="Yes">532</property_description_erf_number>
    <property_description_portion_number Mod="20010101010101" IncludeInPDFExport="Yes">0</property_description_portion_number>
    <Property_description_township_name Mod="20010101010101" IncludeInPDFExport="Yes">UMLAZI DD</Property_description_township_name>
    <property_description_sectional_titl Mod="20010101010101" IncludeInPDFExport="Yes">
    </property_description_sectional_titl>
    <property_description_section_number Mod="20010101010101" IncludeInPDFExport="Yes"></property_description_section_number>
    <title_deed__municipal_information_text_box Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information_text_box>
    <title_deed__municipal_information_text_box_1 Mod="20010101010101" IncludeInPDFExport="Yes">, ETHEKWINI MUNICIPALITY</title_deed__municipal_information_text_box_1>
    <title_deed__municipal_information_text_box_2 Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information_text_box_2>
    <title_deed__municipal_information__2 Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information__2>
    <title_deed__municipal_information_text_box_3 Mod="20010101010101" IncludeInPDFExport="Yes">
    </title_deed__municipal_information_text_box_3>
    <title_deed__municipal_information_text_area Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information_text_area>
    <title_deed__municipal_information__1 Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information__1>
    <title_deed__municipal_information_text_area_1 Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information_text_area_1>
    <title_deed__municipal_information_text_box_4 Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information_text_box_4>
    <title_deed__municipal_information_text_area_2 Mod="20010101010101" IncludeInPDFExport="Yes"> </title_deed__municipal_information_text_area_2>
    <main_dwelling_text_box Mod="20010101010101" IncludeInPDFExport="Yes"> </main_dwelling_text_box>
    <main_dwelling_text_box_1 Mod="20010101010101" IncludeInPDFExport="Yes"> </main_dwelling_text_box_1>
    <main_dwelling_text_box_2 Mod="20010101010101" IncludeInPDFExport="Yes"> </main_dwelling_text_box_2>
    <main_dwelling_text_box_3 Mod="20010101010101" IncludeInPDFExport="Yes"> </main_dwelling_text_box_3>
    <valuation_certificate_signature_1 Mod="20010101010101" IncludeInPDFExport="Yes"> </valuation_certificate_signature_1>
    <valuation_certificate_professional_ Mod="20010101010101" IncludeInPDFExport="Yes"> </valuation_certificate_professional_>
  </FieldData>
  <Photos Mod="20010101010101" />
  <VoiceNotes />
  <Drawings Mod="20010101010101" />
  <FieldNotes />
</FormData> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:13:48.760

如果值为 NULL，请尝试将内部文本设置为 string.empty。这只是一个猜测

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:21:43.547

干脆不写这一行

```
node.SelectSingleNode(PropInfo[Count].TagName).InnerText = " "; 
```

这不会设置值，但节点会在那里。

或者

```
node.SelectSingleNode(PropInfo[Count].TagName).InnerText = String.Empty; 
```

那应该行得通。

米林德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T22:23:04.923

node.RemoveAll(); 如果“节点”中包含的唯一内容是 InnerText，则将去掉多余的空格。

# jquery - 单击时启动 CSS3 过渡 - Wilto Image 滑块

> ID：13512094
> 
> 赞同：1
> 
> 时间：2012-11-22T11:44:56.240
> 
> 标签：jquery, css, slider

我正在使用内容滑块：[https ://github.com/Wilto/Dynamic-Carousel/](https://github.com/Wilto/Dynamic-Carousel/)

当我单击下一个/上一个按钮（或单击分页时）时，我想控制每个滑块的内容如何使用 CSS3 过渡进行动画输入/输出。

我想要的只是一些非常基本的过渡，所以图标在一秒钟内或在文本之前滑动，并带有一些缓动。我相信我可以做 CSS 位，它只是在每张幻灯片上播放它，点击。我对 jquery 不是很好。

我该怎么做呢？

到目前为止，这是我的滑块：http: [//jsfiddle.net/sVKQM/](http://jsfiddle.net/sVKQM/)

```
// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:01:44.007

在我看来，纯 CSS 解决方案是不可能的，因为您使用的是 500% 的容器，并且只是移动它。因此，您可以在容器上应用翻译，当左右移动它时，您会很好地看到它，但是容器内的内容不会被修改。

所以没有办法只用 CSS 来做，因为图像和文本没有被“修改”，只有容器，但是 id，正如已经说过的，不会将它传播到图像和文本。

PS：随时证明我错了；）

# vb.net - 拖放 - 区分文件和文件夹

> ID：13512097
> 
> 赞同：0
> 
> 时间：2012-11-22T11:45:18.260
> 
> 标签：vb.net, visual-studio, drag-and-drop

我试图在用户删除文件夹或文件时有所不同，但出现错误。

更新

错误是：

```
Conversion from string "C:\Users\Administrador\Desktop\W" to type 'Long' is not valid. 
```

（注意路径不完整）

IDE 突出显示此错误行：

```
If ((attributes And FileAttributes.Directory) = FileAttributes.Directory) Then 
```

我不知道问题是在转换中还是什么，但是如果我在有问题的错误行之前使用 msgbox，我可以看到路径是正确的：

```
MessageBox.Show(Objetos(0))
If ((attributes And FileAttributes.Directory) = FileAttributes.Directory) Then 
```

![在此处输入图像描述](../Images/e7afc82a734fe2468d8b9e802c008e35.png)

这是子：

```
Private Sub TextBox1_DragDrop(ByVal sender As Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles foldertextbox.DragDrop
    If e.Data.GetDataPresent(DataFormats.FileDrop) Then
        Dim Objetos As String() = e.Data.GetData(DataFormats.FileDrop)

        Dim attributes = Objetos(0)
        If ((attributes And FileAttributes.Directory) = FileAttributes.Directory) Then
            MsgBox("it's a dir")
        Else
            MsgBox("it's a file")
        End If

        foldertextbox.Text = Objetos(0)
        userSelectedFolderPath = Objetos(0)
        My.Settings.folderpath = Objetos(0)
        My.Settings.Save()
        playerargs = Nothing
        updatecheckboxes()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:46:21.873

您的`attributes`变量实际上包含文件/目录名称/路径，如果您想测试它是否是一个目录，您可以尝试：

```
System.IO.Directory.Exists(attributes) 
```

像这样：

```
If System.IO.Directory.Exists(attributes) Then
    MsgBox("it's a dir")
ElseIf System.IO.File.Exists(attributes) Then
    MsgBox("it's a file")
End If 
```

**更新**

检查这个答案，有更好的检查，也许是你正在寻找的： [.NET 如何检查路径是否是文件而不是目录？](https://stackoverflow.com/questions/439447/net-how-to-check-if-path-is-a-file-and-not-a-directory)

```
Dim isDir As Boolean = (System.IO.File.GetAttributes(path) And 
        System.IO.FileAttributes.Directory) = FileAttributes.Directory 
```

# c# - DI 与不同 DLL 中的存储库和服务，保持关注点分离

> ID：13512098
> 
> 赞同：2
> 
> 时间：2012-11-22T11:45:20.687
> 
> 标签：c#, architecture, dependency-injection, unity-container, repository-pattern

我有一个包含以下项目的分层应用程序：

*   DAL（将 EntityFramework 与存储库一起使用）
*   DAL.Model（包含实体，并被所有其他实体引用）
*   服务
*   用户界面（在 wpf 中）

基本存储库如下所示：

```
public abstract class RepositoryBase<T> where T : class
{
    private readonly MyContext context;
    private readonly IDbSet<T> dbSet;

    protected RepositoryBase(MyContext dataContext)
    {
        context = dataContext;
        dbSet = context.Set<T>();
    }

    protected MyContext Context
    {
        get { return context; }
    }

    **And a series of virtual methods for Add, Delete, etc.
} 
```

所有存储库都扩展了这个，例如：

```
public class MarketRepository : RepositoryBase<Market>
{
    public MarketRepository(MyContext dataContext) : base(dataContext)
    {

    }

    public IEnumerable<Market> GetAllMarkets()
    {
        return this.Context.Markets.ToList<Market>();
    }
} 
```

服务如下所示：

```
public class MarketService
{
    IMarketRepository _marketRepository;

    public MarketService(IMarketRepository marketRepository)
    {
        _marketRepository = marketRepository;
    }

    public IEnumerable<Market> GetAllMarkets()
    {
        return _marketRepository.GetAllMarkets();
    }
} 
```

我想要实现的是 UI 层只有对服务层的引用，服务层只有 DAL 层（并且所有这些都到模型，实体所在的模型）使用 DI（现在我使用统一）。

问题是，在我的 UI 容器中，我只想这样做

```
unity.RegisterType<IMarketService, MarketService>(); 
```

并且不必对存储库也这样做，因为这样 UI 层将依赖于 DAL 层。

我考虑向服务类添加一个无参数构造函数，例如：

```
public MarketService() : this(new MarketRepository(*What would I put here?)) { } 
```

但是后来我失去了接口提供的抽象，而且我不知道如何处理存储库需要作为参数的 MyContext ；如果我通过一个新的，那么我需要参考 DAL。

我应该更改我的存储库以在构造函数中创建一个新的 MyContext，而不是将其作为参数获取吗？

如何重构我的架构以使其正常工作并具有最小的依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:52:51.833

好吧，我相信在更高级别的应用程序中配置依赖项取决于引导程序。因为它通常是 UI 项目，如果它需要引用其他程序集，就这样吧。如果你不喜欢你的 UI 项目管理它，那么创建一个引导程序项目来负责让你的应用程序运行并将你的 UI 类分离到另一个中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:42:10.343

配置 DI 时，您应该遵循相同的模式 - UI 引导程序初始化服务，服务初始化 DAL。（使用 autofac 或 ninject，您可以使用模块来实现这一点。使用统一，您应该模拟模块）。

在伪代码中类似于

```
//ui
void UILayer.ConfigureUnity(unity)
{
    ServiceLayer.ConfigureUnity(unity)
}
//services
void ServiceLayer.ConfigureUnity(unity)
{
    DAL.ConfigureUnity(unity)
    unity.RegisterType<IMarketService, MarketService>();

}
//dal
void DAL.ConfigureUnity(unity)
{
    unity.RegisterType<IMarketRepository, MarketRespository>();
    unity.RegisterType<MyContext, MyContext>(); //not sure exact syntax - just register type for 'new Type()' activator.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:54:52.617

您的 IoC 容器应该支持使用来自外部配置文件的字符串进行依赖注入。这样您就不会对映射进行硬编码。Structuremap 在这方面做得很好，所以我相信其他 IoC 也会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:04:22.513

在创建实例时添加外部依赖项作为参数是可行的方法。
我认为您应该让自己更熟悉配置 Unity 的不同方法，以便解决依赖关系。
您能否详细说明在使用依赖注入框架时为什么要创建存储库？

# android - 如何将设置活动合并到主要活动？

> ID：13512101
> 
> 赞同：3
> 
> 时间：2012-11-22T11:45:26.423
> 
> 标签：android, android-activity, fragment

首先我不想合并布局，因为主要活动是渲染 3D 场景，所以没有空间去做。

我想合并这两个活动的原因是当我调用设置活动时，主要活动将进入睡眠状态。当我完成设置并唤醒主要活动时，上下文会丢失，它必须重新创建表面。由于场景数据很大，所以会浪费很多时间。所以我想要的是保持主要活动没有运行`onPause`并完成设置。

顺便说一句，设置是关于设置距离和投影大小的值。它需要一些复选框和搜索栏。

如果您认为`PreferenceFragment`是解决此问题的方法，请教我如何在 menuoptions 中使用它？

我是安卓新手。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:09:37.347

合并布局并不排除您尝试执行的操作。您可以通过创建具有两个子级（布局本身）的更高级别的 FrameLayout 来合并它们。然后，您的代码确保一次只能看到这两个孩子中的一个。

例如...

```
<FrameLayout android:id="@+id/NewRootLayout" ...>
    <LinearLayout android:id="@+id/MyPreferencesLayout" android:visibility="gone" ...>
        ....
    </LinearLayout>

    <WhateverLayout android:id="@+id/MyPrimaryLayout" android:visibility="visible" ...>
        ....
    </WhateverLayout>
</FrameLayout> 
```

现在在代码中，当您想要从一种布局切换到另一种布局的错觉时，您只需执行以下操作：

```
MyPreferencesLayout.setVisibility(View.VISIBLE);
MyPrimaryLayout.setVisibility(View.GONE); 
```

（从 UI 线程中）。

# android - ProgressDialog 并不总是出现

> ID：13512104
> 
> 赞同：0
> 
> 时间：2012-11-22T11:45:33.540
> 
> 标签：android

我的应用程序作为蓝牙服务器工作，几乎与`BluetoothChat example`. 我面临一个奇怪的问题。在我开始从蓝牙套接字读取输入的运行方法中，我想向处理程序发布一条消息。此处理程序位于单独的类中，以避免可能的内存泄漏。

```
public void run() {
    Log.i("", "BEGIN ReadInputThread");
    final byte[] buffer = new byte[1024];
    int bytesread;

    Message msg = handler.obtainMessage();
    msg.obj = "0";
    handler.sendMessage(msg);
    ...... snip ..... 
```

当我在我的处理程序中收到字符串“0”时，我想显示一个progressDialog，通知用户应用程序有一个传入文件。在我的处理程序中，这是我处理它的方式：

```
public class MessageHandler extends Handler {

    @Override
    public void handleMessage(Message m) {

        Vibrator v = (Vibrator) c.getSystemService(Context.VIBRATOR_SERVICE);
        String message = (String) m.obj;

        //Getting files
        if (message.equals("0")) {

            folder.appendToLogFile(new Date().toString(), "Incoming File From: " + deviceName); 
            v.vibrate(1500);
            pd = new ProgressDialog(c);
            pd.setTitle("Please Wait..");
            pd.setMessage("Retrieving file from " + deviceName);
            pd.setCancelable(false);
            pd.show();
        }
} 
```

第一次，当我打开我的 Activity 时，它将启动这个线程，progressDialog 将显示。传输完成后，我导航到一个新的 Activity，然后返回到上一个 Activity。当我现在尝试传输文件时，它会成功，但屏幕上没有显示 ProgressDialog。

我做了一些检查，以确定 ProgressDialog 是否“可见”，方法是在`pd.show() statement`

```
if(pd.isShowing())
    Log.w("Handler: ", "inside the handler, and the progressdialog is showing"); 
```

这也出现在 LogCat 中，即使 ProgressDialog 没有显示！

任何人都可以给我一个提示，或解决这个令人沮丧的问题吗？

提前致谢！

* * *

**只是为了澄清一点**

我的 ProgressDialog 是在一个不扩展 Activity 的类中创建的，它不扩展任何类。我做的第一件事是在我的`run() method`. 当我知道我已从套接字接收到最后一个字节包时，我向处理程序发送另一条消息：

```
if(lastPacket) {
    msg = handler.obtainMessage();
    msg.obj = "1";  
    handler.sendMessage(msg);                                                    
} 
```

在我的处理程序中：

```
@Override
    public void handleMessage(Message m) {

        Vibrator v = (Vibrator) c.getSystemService(Context.VIBRATOR_SERVICE);
        String message = (String) m.obj;

        //Getting files
        if (message.equals("0")) {

            folder.appendToLogFile(new Date().toString(), "Incoming File From: " + deviceName); 
            v.vibrate(1500);
            pd = new ProgressDialog(c);
            pd.setTitle("Please Wait..");
            pd.setMessage("Retrieving file from " + deviceName);
            pd.setCancelable(false);
            pd.show();
            if(pd.isShowing())
                Log.w("Handler: ", "inside the handler, and the progressdialog is showing");

        }

        //File complete 
        if(message.equals("1")) {

            Toast.makeText(c, "File Received from: " + deviceName, Toast.LENGTH_LONG).show();
            folder.appendToLogFile(new Date().toString(), "File Received"); 
            pd.setMessage(c.getResources().getString(R.string.createCase));

            GenerateCase caseGenerator = new GenerateCase(c, pd, lastCases, nextPCN);
            caseGenerator.execute("");
        }
    } 
```

如您所见，我将 ProgressDialog 传递给 AsyncTask。在我的`onPostExecute`方法中，我忽略了这个`ProgressDialog`

## 解决方案

如果有人好奇。我对线程感到困惑。当我离开我的活动时，我忘记终止我正在运行的线程，这将导致当我恢复我的活动时 ProgressDialog 在不同的线程中启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:11:09.860

通过广播关闭您的进度对话框`Intent`；

```
onPostExecute(){
sendBroadcastIntent(new Intent("ACTION_CLOSE_DIALOG"):
}

BroadCastReceiver receiver = new BroadCastReceiver(){
@Override
    public void onReceive(Context context, Intent intent) {
               if(pd.isShowing()){  
                pd.dismiss();
               }else{
                    pd.show()
                }
             }
        } 
```

在这里调用广播：

```
pd.show();// call broadcast instead pd.show() use sendBroadcastIntent(new Intent("ACTION_CLOSE_DIALOG") 
```

# c# - 查询数据集以使用 LINQ 过滤数据，而无需在动态填充的数据集中指定特定列

> ID：13512105
> 
> 赞同：0
> 
> 时间：2012-11-22T11:45:36.023
> 
> 标签：c#, linq, linq-to-entities, dataset, linq-to-dataset

**情况1**

```
 DataSet oDsParent = new DataSet();
     DataTable odt = new DataTable();

     odt.Columns.Add(new DataColumn("DOC_GENO_KEY", typeof(int)));
     odt.Columns.Add(new DataColumn("RESOURCE_TYPE", typeof(string)));
     odt.Columns.Add(new DataColumn("ROUTING_SUB_ID", typeof(int)));

     odt.Rows.Add(2, "TEST1", 2);
     odt.Rows.Add(4, "ADMIN", 2);
     odt.Rows.Add(7, "TEST2", 2);

     oDsParent.Tables.Add(odt);
     oDsParent.AcceptChanges();

    string sTemp =new string ();
     sTemp = "(DOC_GENO_KEY = 4 OR DOC_GENO_KEY = 2) AND (RESOURCE_TYPE = 'TEST1' OR DOC_GENO_KEY = 2 OR ROUTING_SUB_ID = 2)"; 
```

**案例2**

```
 oDsParent = new DataSet();
     odt = new DataTable();
     odt.Columns.Add(new DataColumn("DOCUMENT_ATTACHED", typeof(string)));
     odt.Columns.Add(new DataColumn("ATTACHMENT TYPE", typeof(int)));

     odt.Rows.Add("DOC1", 2);
     odt.Rows.Add("DOC2", 1);
     odt.Rows.Add("DOC3", 0);

     oDsParent.Tables.Add(odt);
     oDsParent.AcceptChanges();

    sTemp = "(DOCUMENT_ATTACHED = 2 OR DOCUMENT_ATTACHED = 1 )"; 
```

数据集 oDsParent 是动态形成的，在案例 1 中有 3 列及其各自的数据，在案例 2 中，有 2 列包含数据。这些列是根据同一数据集（oDsParent）中的条件动态填充的，因此每次形成的列都不同。我需要根据下面的字符串（sTemp）查询数据集，该数据集也会根据条件根据数据表进行更改。我不能在查询中使用 Field("Column name") 因为没有固定的列并且它们动态变化。我需要一个通常可用于过滤数据集的 LINQ，无论根据它们各自的字符串创建哪些列。我创建了一个数据集和字符串的演示，以更好地理解我的问题。

# django - Django - django-registration 激活电子邮件中的额外上下文

> ID：13512106
> 
> 赞同：0
> 
> 时间：2012-11-22T11:45:38.300
> 
> 标签：django, django-registration, django-context

我正在使用我[`django-registration`](https://github.com/nathanborror/django-registration)的一个项目。

我想在用于电子邮件激活的模板中添加一些额外的上下文数据。

查看[注册视图源](https://github.com/nathanborror/django-registration/blob/master/registration/views.py#L95)，我不知道该怎么做。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:35:22.787

据我记得，您需要编写[自己的注册后端对象](https://github.com/nathanborror/django-registration/blob/master/registration/backends/default/__init__.py)（听起来更容易）以及您[自己的配置文件模型，该模型继承自`RegistrationProfile`](https://github.com/nathanborror/django-registration/blob/master/registration/models.py#L150)您的自定义并让后端使用您的自定义`RegistrationProfile`（此模型是电子邮件模板的呈现位置和那里没有办法扩展上下文，所以需要覆盖）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T21:43:50.977

一个简单的解决方案是重写`send_activation_email` So 而不是

```
registration_profile.send_activation_email(site) 
```

我在我的用户模型中写了这个

```
def send_activation_email(self, registration_profile):
    ctx_dict = {
        'activation_key': registration_profile.activation_key,
        'expiration_days': settings.ACCOUNT_ACTIVATION_DAYS,
        'OTHER_CONTEXT': 'your own context'
    }
    subject = render_to_string('registration/activation_email_subject.txt',
                               ctx_dict)
    subject = ''.join(subject.splitlines())
    message = render_to_string('registration/activation_email.txt',
                               ctx_dict)
    self.email_user(subject, message, settings.DEFAULT_FROM_EMAIL) 
```

我这样称呼它

```
user.send_activation_email(registration_profile) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T12:36:41.650

我不明白你的问题是什么，但参数只是在你链接的代码中（最后一个）：

```
def register(request, backend, success_url=None, form_class=None,
         disallowed_url='registration_disallowed',
         template_name='registration/registration_form.html',
         extra_context=None) 
```

这意味着您可以从调用该方法的任何位置执行此操作。假设您的 urls.py：

```
from registration.views import register

(...)

url(r'/registration/^$', register(extra_context={'value-1':'foo', 'value-2':'boo'})), name='registration_access') 
```

那是在 urls.py 中，通常人们会问更多，但是，当然，它可能来自您调用该方法的任何其他文件。

# hibernate - 将参数数组设置为休眠查询语言

> ID：13512109
> 
> 赞同：11
> 
> 时间：2012-11-22T11:45:41.290
> 
> 标签：hibernate, hql

目前，查询采用单个 reportID 来返回结果。现在，如果我想传递多个报告 ID 并在 1 次调用中返回 o/p 到数据库，我该怎么做？

```
String queryText = "from com.abc.domain.bcd.Report report  where report.reportID in :reportId";

    Query query = SessionFactory.getCurrentSession().createQuery(queryText.toString());

    query.setParameter("reportID", reportId);

    query.list(); 
```

我尝试作为 arrayList 传递，但没有运气。得到下面的错误

```
List<String> reportID= new ArrayList<String>();
    reportID.add("aaa");
    reportID.add("bbb"); 
```

java.util.ArrayList 与 java.lang.String 不兼容

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T13:08:54.597

试试这个

```
 query.setParameterList("reportID", new Object[]{"aaa","bbb"}); 
```

# php - 需要在 PHP 中单击按钮时从数据库中获取文本框中的值

> ID：13512111
> 
> 赞同：1
> 
> 时间：2012-11-22T11:45:46.177
> 
> 标签：php, javascript, html, onclick

我需要使用 PHP 和 Javascript 在按钮单击时在文本框中获取数据库的值。例如，我从数据库表中获取 HTML 表中的值。当用户单击`add0`按钮时，我需要在文本框中获取相应的值。

这是我的代码：

```
<form method="post" action="">
  <input type="text" name="tb1" />
  <input type="text" name="tb2" />
  <input type="submit" name="btn" value="Find" />
</form>
<?php
  include "conn.php";
  $show = "SELECT * FROM data";
  $rs = mysql_query($show) or die(mysql_error());
  $add_to_textbox = "<input type='button' name='btn' value='add0' />";
  #****results in Grid****
  echo "<table width='360px' border='1' cellpadding='2'>";
  while($row = mysql_fetch_array($rs)) {
    echo "<tr>";
    echo "<td width='130px'>$row[Name]</td>";
    echo "<td width='230px'><a href = '$row[Link]'>$row[Link]</a></td>";
    echo "<td width='130px'>$add_to_textbox</td>";
    echo "</tr>";
  }
  echo "</table>";
  #**********************
  mysql_free_result($rs);
?> 
```

我需要更多关于按钮点击的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:55:09.293

~~恕我直言，您可以[在 Jquery 中使用 Ajax 进行内联编辑](http://www.iwebux.com/inline-edit-using-ajax-in-jquery/)~~

这是它的[演示](http://www.iwebux.com/demos/ajax/)

~~它可以让您在表格本身中编辑显示的内容..~~

**更新：**

```
<form method="post" action="">
  <input type="text" name="tb1" id="tb1" />
  <input type="text" name="tb2" id ="tb2" />
  <input type="submit" name="btn" value="Find" />
</form>
<?php
  include "conn.php";
  $show = "SELECT * FROM data";
  $rs = mysql_query($show) or die(mysql_error());
  $add_to_textbox = "<input type='button' name='btn' value='add0' />";
  #****results in Grid****
  echo "<table width='360px' border='1' cellpadding='2'>";
  $rowID=1;
  while($row = mysql_fetch_array($rs)) {
    echo "<tr>";
    echo "<td width='130px' id='name".$rowID."'>$row[Name]</td>";
    echo "<td width='230px' id='link".$rowID."'><a href = '$row[Link]'>$row[Link]</a></td>";
    echo "<td width='130px' onclick='txtValDisp($rowID);'>$add_to_textbox</td>";
    echo "</tr>";
    $rowID++;
  }
  echo "</table>";
  #**********************
  mysql_free_result($rs);
?>
<script type="text/javascript">
function txtValDisp(rowID){
    var linkVal = document.getElementById('link'+rowID+'').innerHTML.replace(/<\/?[^>]+(>|$)/g, "\n");
    document.getElementById("tb1").value = document.getElementById('name'+rowID+'').innerHTML;
    document.getElementById("tb2").value = linkVal; 
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:10:53.227

使用从数据库中获取的默认值重新创建表单。

```
<form method="post" action="">
<input type="text" name="tb1" />
<input type="text" name="tb2" />
<input type="submit" name="btn" value="Find" />
</form>
<?php
 include "conn.php";
 $show = "SELECT * FROM data";
 $rs = mysql_query($show) or die(mysql_error());
 $add_to_textbox = "<input type='button' name='btn' value='add0' />";
  #****results in Grid****
 echo "<table width='360px' border='1' cellpadding='2'>";
 while($row = mysql_fetch_array($rs)) {
echo "<tr>";
echo "<td><input name ='INSERT_HERE' type=text value='"$row[Name]"'></td>";
echo "</tr>";
}
echo "</table>";
#**********************
mysql_free_result($rs);
?> 
```

您只需要根据某物的任何计数器更改对象的名称...

# iphone - 静态方法变量问题

> ID：13512117
> 
> 赞同：0
> 
> 时间：2012-11-22T11:46:25.320
> 
> 标签：iphone, xcode, static-methods

我创建了处理声音的类。但我有问题停止声音？我无法将变量从 playSound 发送到 stopSound AudioServicesDisposeSystemSoundID(soundID)。如何处理？我真的不想实例化它还是我必须实例化它？

```
@implementation SoundPlayer
+(void)playSound:(NSString *)filename ofType:(NSString *)extension {
    SystemSoundID soundID;
    NSString *soundFile = [[NSBundle mainBundle] pathForResource:filename ofType:extension];
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath:soundFile], &soundID);
    AudioServicesPlaySystemSound(soundID); // error - soundID is undeclared
}

+(void)stopSound
{
    AudioServicesDisposeSystemSoundID(soundID);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:21:32.913

您必须将 id 传递给 stopSound（与播放声音时相同），或者如果您的音频播放器一次只播放 1 个声音，则在播放时将 soundID 作为静态参数存储在类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:21:57.093

您可以将 soundID 创建为 ivar，例如：

```
@interface SoundPlayer(){
     SystemSoundID soundID;
}
@end 
```

其他方式将其用作全局变量

# c# - 简单的 async await tcp 服务器设计

> ID：13512119
> 
> 赞同：3
> 
> 时间：2012-11-22T11:46:35.603
> 
> 标签：c#, asynchronous, tcp, nonblocking, async-await

我正在使用 async-await 方法设计一个异步 TCP 服务器，该方法利用具有以下功能的事件驱动的 .NET 环境：

1.  请求和响应功能。
2.  服务器端发起的事件。

这种服务器设计在异步等待方法方面是否正确？
下面的代码仅涵盖判断我是否缺少某些东西的基本功能。
服务器使用 COM 类型库，这是 PRMasterAutomation 类的来源。

```
public class AsyncServer {
    private const int BufferSize = 4096;
    private static bool ServerRunning = true;       
    private List<TcpClient> clients = new List<TcpClient>();
    private PRMasterAutomation automation;

    public AsyncServer()
    {            
        InitializeComponent();
        automation = new PRMasterAutomation();
        automation.OnMonitoringEvent += automation_OnMonitoringEvent;

        if (!automation.Login("ADMIN", "")) 
            return;            

        if (automation.GetPRMasterState() == PRMasterStateEnum.StateIdle)
            automation.StartMonitoring();

        var tcpServer = new TcpListener(IPAddress.Any, 9001);
        tcpServer.Start();
        ListenForClients(tcpServer);                       
    }

    private async void ListenForClients(TcpListener tcpServer)
    {
        while (ServerRunning)
        {
            TcpClient tcpClient = await tcpServer.AcceptTcpClientAsync();
            clients.Add(tcpClient);
            ProcessClient(tcpClient);
        }
    }

    private async void ProcessClient(TcpClient tcpClient)
    {
        var stream = tcpClient.GetStream();
        var buffer = new byte[BufferSize];
        int amountRead;
        string xml;
        while (ServerRunning)            
        {
            if ((amountRead = await stream.ReadAsync(buffer, 0, BufferSize)) > 0)
            {
                var message = Encoding.ASCII.GetString(buffer, 0, amountRead);
                xml = "";
                if (message.Equals("get_users"))
                {
                    xml = automation.GetUsersXml();                                               
                }
                else if (message.Equals("get_events"))
                {
                    xml = automation.GetEventsHistoryXml("");
                }

                if (xml.Length > 0)
                {
                    xml += "\r\n"; 
                    await stream.WriteAsync(Encoding.ASCII.GetBytes(xml), 0, xml.Length);
                }
            }
        }
    }

    async void automation_OnMonitoringEvent(DateTime date, DateTime time, int networkID, int readerID, int userID, int groupID, int eventCode, int zoneID, int TandAID, string strEvent, string strAccessPoint, string strUserSource, string strGroup, string strNetwork, string strZone, string strTandAMode)
    {
        foreach (var c in clients)
        {
            if (c != null && c.Connected)
            {
                var stream = c.GetStream();
                StringBuilder sb = new StringBuilder();
                sb.Append(date.ToString() + ";" + time.ToString() + ";" + networkID.ToString() + ";" + userID.ToString() + "\r\n");
                await stream.WriteAsync(Encoding.ASCII.GetBytes(sb.ToString()), 0, sb.Length);
            }   
        }            
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:53:33.740

> 这种服务器设计在异步等待方法方面是否正确？

是的，但不是在套接字方面。`ReadAsync`将返回 1 到无穷大之间的任意字节数，它不会返回消息。

> [Stream.ReadAsync()](http://msdn.microsoft.com/en-us/library/hh137813.aspx)：如果当前可用的字节数小于请求的数量，则结果值可以小于请求的字节数，或者如果已到达流的末尾，则结果值可以为 0（零）。

您必须创建一个缓冲区并继续读取并添加到该缓冲区，直到您知道您收到了整条消息。这意味着检查`\r\n`您的情况。如果遇到这样的分隔符，可以从缓冲区中提取消息并开始接收新消息。

# twitter-bootstrap - Twitter Bootstrap 弹出框不适用于 IE9

> ID：13512123
> 
> 赞同：2
> 
> 时间：2012-11-22T11:46:58.867
> 
> 标签：twitter-bootstrap, internet-explorer-9, popover

我对 twitter 引导弹出框有疑问。我已经下载并安装了最新的包（`twitter-bootstrap-v2.2.0-2-g3b3dd3a`）我做了一个简单的 html 页面：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Twitter Bootstrap Popover with placement option Example</title>
    <meta name="description" content="Creating Modal Window with Twitter Bootstrap">
    <link href="twitter-bootstrap/docs/assets/css/bootstrap.css" rel="stylesheet">
    <style> a { margin-left : 400px; } </style>
  </head>
  <body>
    <div class="container">
      <h2>Example of creating Popover with Twitter Bootstrap with placement option</h2>
      <div class="well">
        <a href="#" id="example" class="btn btn-success" rel="popover" data-content="It's so simple to create a tooltip for my website!" data-original-title="Twitter Bootstrap Popover">hover for popover</a>
      </div>
      <div class="well">
        <a href="#" id="example_left" class="btn btn-success" rel="popover" data-content="It's so simple to create a tooltop for my website!" data-original-title="Twitter Bootstrap Popover">hover for popover</a>
      </div>
      <div class="well"> <a href="#" id="example_top" class="btn btn-success" rel="popover" data-content="It's so simple to create a tooltop for my website!" data-original-title="Twitter Bootstrap Popover">hover for popover</a> </div>
      <div class="well"> <a href="#" id="example_bottom" class="btn btn-success" rel="popover" data-content="It's so simple to create a tooltop for my website!" data-original-title="Twitter Bootstrap Popover">hover for popover</a> </div>
    </div>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="twitter-bootstrap/js/bootstrap-tooltip.js"></script>
    <script type="text/javascript" src="twitter-bootstrap/js/bootstrap-popover.js"></script>
    <script type="text/javascript"> $(function () { $("#example").popover(); $("#example_left").popover({placement:'left'}); $("#example_top").popover({placement:'top'}); $("#example_bottom").popover({placement:'bottom'}); });
    </script>
  </body>
</html> 
```

问题是，使用 IE9，按钮的格式不正确，而在 Chrome 中它们看起来很好

以下是它们在 IE9 中的显示方式： ![在此处输入图像描述](../Images/fd6d30c44bb3fb78f964a0cbda860091.png)

在 Chrome 中： ![在此处输入图像描述](../Images/9b352e6ebc7ad88776cc476ce5105598.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:36:59.523

这与弹出框无关，但与糟糕的浏览器标准合规性有关。IE9 本身并不支持 Bootstrap 使用的所有 CSS 属性。我在使用 CSS3PIE 来帮助解决这个问题上取得了一些成功。[http://css3pie.com](http://css3pie.com)

好消息是 IE10 似乎非常符合标准，它可以很好地呈现文本和图像以启动。再过 2-3 年的 IE 地狱，我们将进入一个新的黄金时代。

# afnetworking - AFNetworking 下载后文件存在

> ID：13512125
> 
> 赞同：1
> 
> 时间：2012-11-22T11:47:03.890
> 
> 标签：afnetworking, nsfilemanager

使用 AFNetworking 下载文件后，我在查找文件时遇到了一些问题......下载本身很好，但是当我之后检查文件是否存在时，我找不到它......所以我希望有人可以帮帮我...

在我的代码中，我下载了文件，并在完成块中检查了是否存在（这只是因为我在找到它时遇到问题，之后会被删除）...

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"url to file removed"]];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"filename removed"];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:@"filename removed" append:NO];

//Track the progress
[operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead)
{
    if (totalBytesExpectedToRead > 0)
    {
        dispatch_async(dispatch_get_main_queue(), ^{
            NSString *progress = [NSString stringWithFormat:@"Downloaded %lld of %lld bytes",
                               totalBytesRead,
                               totalBytesExpectedToRead];

            NSLog(@"%@", progress);
        });
    }
}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
{
    NSLog(@"File downloaded to %@", path);

    //Check for existence
    NSFileManager *filemgr = [NSFileManager defaultManager];

    if([filemgr fileExistsAtPath:path])
    {
        NSLog(@"File found");
    } else
    {
        NSLog(@"File not found");
    }
} failure:^(AFHTTPRequestOperation *operation, NSError *error)
{
    NSLog(@"Error: %@", error);
}];

[operation start]; 
```

有什么想法可能会出错吗？随着下载本身的顺利进行，问题必须在于在iOS中保存文件/文件系统......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T15:37:32.440

您尝试写入的目录是否存在？如果不是，您可能会发现`[NSOutputStream outputStreamToFileAtPath:@"filename removed" append:NO]`正在返回`nil`。

尝试先创建目录：

```
NSFileManager *fm = [NSFileManager defaultManager];
NSString *folder = [@"filename removed" stringByDeletingLastPathComponent];
if (![fm fileExistsAtPath:folder]) {
    [fm createDirectoryAtPath:folder
  withIntermediateDirectories:YES
                   attributes:nil
                        error:nil];
} 
```

我希望这会有所帮助。

# sql-server - DB2 列“用于 BIT 数据的 Char()”的 SQL Server 数据类型

> ID：13512127
> 
> 赞同：0
> 
> 时间：2012-11-22T11:47:04.947
> 
> 标签：sql-server, char, db2, column-types

我用谷歌搜索但未能找到以下问题的答案。

我有一个数据类型为“Char(100) for BIT Data”的**DB2**数据库列。它存储员工 ID 的加密值。我需要将此数据存储在**SQL Server**中。

1.  `datatype`SQL Server 中的该列应该是什么？
2.  在插入 SQL Server 之前是否需要任何格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:21:47.780

DB2 表中的列是一个普通字符串，除了该`for BIT Data`部分告诉 DB2 将该字符串视为任意二进制数据，而不是文本。这主要用于排序和比较。DB2（按照正常配置）将按字母顺序对字符串进行排序和比较。大写字母 A 将出现在小写字母 b 之前。但是`for BIT Data`字符串是通过字符的基础数值进行比较的。大写 A 将出现在小写 z 之后。

在 SQL Server 中，有一个`BINARY`数据类型，所以你可能会使用`BINARY(100)`. 不需要格式化，因为您可能希望原始二进制数据的值保持完全相同。

# c# - C#：基类中的静态成员

> ID：13512128
> 
> 赞同：3
> 
> 时间：2012-11-22T11:47:13.343
> 
> 标签：c#, design-patterns

我有跨派生类的不同实例的公共数据。因此，为了共享公共数据属性，我在基类中将它们设为静态。但是静态公共属性不能在接口中声明。如果我们尝试，我们会得到错误：

> “无法实现接口成员，因为它是静态的。”

对于这种要求，是否有任何已知的设计模式或最佳实践？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T11:48:18.007

你最好改用抽象基类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:54:32.067

接口只是定义了一个接口。只要你有任何“真实”的东西，无论是方法实现还是共享数据，你都需要一个类，在这种情况下是一个抽象类。

另一种方法是保留接口，但添加单例来保存与实现接口的类相关的数据。如果您需要使用接口，那么我认为这就是要走的路。只需将单例命名为，很明显它在逻辑上链接到接口和文档，接口的实现应该使用它。

在您的情况下，带有数据的静态类可能就足够了，而不是完整的单例实现，但我不会在这里讨论，整个“静态类与单例”有点争议。

# iphone - popViewController 和 pushViewController 动画

> ID：13512132
> 
> 赞同：0
> 
> 时间：2012-11-22T11:47:33.733
> 
> 标签：iphone, ios, pushviewcontroller, popviewcontroller

我想用 pushViewController 动画 popViewController。有没有办法做到这一点？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:51:51.037

有一个技巧你可以:)

获取要在弹出后可见的视图控制器。

pop 2x 没有动画

推送 targetviewcontroller 动画，你有控制器和推送动画:)

我希望它有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-09T10:14:03.543

工作 100 %

> list=[[List_ViewController alloc]initWithNibName:@"List_ViewControlleripad" bundle:nil]; CATransition *transition = [CATransition 动画]; 过渡时间= 0.45；transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]; transition.type = kCATransitionFromLeft; [过渡集类型：kCATransitionMoveIn]；transition.subtype = kCATransitionFromLeft; transition.delegate = self; [self.navigationController.view.layer addAnimation:transition forKey:nil]; self.navigationController.navigationBarHidden = 否；[self.navigationController pushViewController:list animated:NO];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:56:24.373

```
[UIView beginAnimations:nil context:nil];
 TargetViewCointroller *obj = [[TargetViewCointroller alloc]initWithNibName:@"TargetViewCointroller" bundle:nil];
  [self.navigationController pushViewController:obj animated:YES];

   [UIView setAnimationDuration:1.0];
    [UIView setAnimationBeginsFromCurrentState:YES];
     [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
    [UIView commitAnimations];
     [obj_ release]; 
```

让我知道它是否工作......快乐编码！！！！

# php - 以不同的方式为 WP_Query 中的第一篇文章设置样式

> ID：13512134
> 
> 赞同：0
> 
> 时间：2012-11-22T11:47:34.917
> 
> 标签：php, wordpress

我有一个 WP_Query 循环，可以拉出 4 个最近的帖子：

```
 <?php
    $featuredPosts = new WP_Query();
    $featuredPosts->query('showposts=4');
    while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>
    <div class="recentpost">

    <?php echo get_the_post_thumbnail ($_post->ID, 'small'); ?>

    <div class="titlerecent">
    <h1><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h1>
    </div>

    </div>
    <?php endwhile; ?> 
```

我想要做的是修改它并使循环中的第一个帖子的样式不同。我不只是想给它添加一个 CSS 类，我想把它包装在一个完全不同的`<div>`.

所以我希望第一个帖子被包裹起来`<div class="homefirstpost">`，然后剩下的 3 个帖子如上所述，在`<div class="recentpost">`.

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:55:25.033

我会这样做：

```
<?php
$isfirst = false;

$featuredPosts = new WP_Query();
$featuredPosts->query('showposts=4');
while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>

    <?php if ( ! $isfirst ): ?>
    <div class="homefirstpost">
        <?php $isfirst = true; ?>
    <?php else: ?>
    <div class="recentpost">
    <?php endif; ?>

    <?php echo get_the_post_thumbnail ($_post->ID, 'small'); ?>

    <div class="titlerecent">
    <h1><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h1>
</div>
<?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:53:20.087

当您的帖子被包装在另一个容器中时，您可以将`:first-child`选择器用于第一个帖子。有关详细信息，请参阅[选择器](http://www.w3.org/TR/CSS2/selector.html#first-child)。

当您的 HTML 看起来像这样时：

```
<div id="featuredPosts">
    <div>First Post ...</div>
    <div>Next Post ...</div>
    <div>Next Post ...</div>
    <div>Next Post ...</div>
</div> 
```

您可以按照以下方式使用 CSS：

```
div#featuredPosts > div:first-child {
some special styles;
} 
```

# iphone - CoreGraphics - 如何在平面上一个一个地绘制矩形？

> ID：13512135
> 
> 赞同：0
> 
> 时间：2012-11-22T11:47:46.307
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

我有一种进度条，它实际上是一本书阅读内容的视觉表示。该条是一条水平线，在阅读书籍的区域填充。例如，如果它是一本 100 页的书，并且用户只阅读了第 1 页到第 10 页和第 90 页到第 100 页，进度条将显示最左边的 10% 区域和最右边的 10% 区域填充颜色.

我目前正在使用此代码为一个阅读会话绘制矩形：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGRect innerRect = CGRectInset(rect, 5, 5);
CGRect ProgressIndicator = CGRectMake(innerRect.origin.x, innerRect.origin.y, 20, innerRect.size.height);
CGContextSetStrokeColorWithColor(context, [[UIColor blueColor] CGColor]);
CGContextSetLineWidth(context, 5);
CGContextMoveToPoint(context, CGRectGetMinX(ProgressIndicator), CGRectGetMinY(ProgressIndicator));
CGContextAddLineToPoint(context, CGRectGetMaxX(ProgressIndicator), CGRectGetMinY(ProgressIndicator));
CGContextAddLineToPoint(context, CGRectGetMaxX(ProgressIndicator), CGRectGetMaxY(ProgressIndicator));
CGContextAddLineToPoint(context, CGRectGetMinX(ProgressIndicator), CGRectGetMaxY(ProgressIndicator));
CGContextClosePath(context);
CGContextStrokePath(context);
CGContextSetFillColorWithColor(context, [[UIColor blueColor]CGColor]);
CGContextFillRect(context, ProgressIndicator); 
```

现在，这仅适用于一个阅读会话，并且仅绘制一个矩形作为条形上的矩形“阅读”部分。如果我有多个矩形（比如在一个数组中）要在栏上绘制，我该如何管理绘图。恐怕一旦我画另一个矩形，我会丢失当前的图形。

如何使用“for”循环绘制多个矩形？

我知道这可能是一个非常愚蠢的问题，但我尝试找到解决方法但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:05:09.507

我将建议以不同的方式考虑这个问题；跟踪任意数量的“阅读会话”可能是一种非常低效的表示。

在这种情况下，而不是连接来自“阅读会话”的每次数据，我建议稀疏表示可能会使您的绘图更容易 - 只需跟踪已读取的页面，周期，数组或字典或自定义对象.

然后，您的绘图代码可以简单地循环存储并以一种颜色为“已读”而不是绘制，或者为“未读”绘制另一种颜色等。

# iphone - TextView 结束编辑时发送的通知是什么？

> ID：13512136
> 
> 赞同：0
> 
> 时间：2012-11-22T11:47:47.357
> 
> 标签：iphone, objective-c, xcode, notifications, uitextview

TextView 结束编辑时发送的通知是什么？我试过 ：

```
 - (void)TextViewDidEndEditing:(UITextView *)textView 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:54:26.137

将调用此通知

```
- (BOOL)textViewShouldEndEditing:(UITextView *)textView 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:00:56.317

通知是 UITextViewTextDidEndEditingNotification

试试这个，因为确实加载了

```
NSNotificationCenter *defaultCenter = [NSNotificationCenter defaultCenter];

    [defaultCenter addObserver:self
        selector:@selector(centerViewOnKeyboardDismissal:)
        name:UITextFieldTextDidEndEditingNotification object:nil]; 
```

或者

更改方法名称

```
- (void)TextViewDidEndEditing:(UITextView *)textView 
to 
- (void)textViewDidEndEditing:(UITextView *)textView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:05:30.270

TextView 结束编辑时的委托方法是：

```
- (void)textViewDidEndEditing:(UITextView *)textView 
```

您的委托的问题是您以大写字母开头的方法名称。这就是为什么它不起作用。

请参考[UITextViewDelegate_Protocol 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html)

# wordpress - 如何在wordpress中按自定义分类法对帖子进行排序？

> ID：13512137
> 
> 赞同：2
> 
> 时间：2012-11-22T11:47:46.213
> 
> 标签：wordpress, term

我在 WordPress 中创建了名为“job_listing”的自定义帖子。

所有帖子都存储在“job_listing”下，对于工作，我们有工作类型的信息，例如。永久，兼职等

此 job_type 存储在术语中，我想按 job_type 搜索和排序所有工作/帖子。

任何人有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:50:37.563

尝试这样的事情。它将首先获取`job_type`分类的所有非空术语，然后循环它们，输出相关的帖子。

我假设您希望它按字母顺序排序（按工作类型和工作列表），但您可以根据需要进行更改。

```
/** Get all terms from the 'job_type' Taxonomy */
$terms = get_terms('job_type', 'orderby=slug&hide_empty=1');    

/** Loop through each term one by one and output the posts that are assoiated to it */
if(!empty($terms)) : foreach($terms as $term) :

        /** Set the term name */
        $term_name = $term->slug;

        /** Set the query arguments and run the query*/
        $args = array(
            'job_type' => $term_name,
            'orderby' => 'title',
            'order' => ASC,
            'post_type' => 'job_listing',
            'posts_per_page' => -1
        );
        $term_posts = new WP_Query($args);

        /** Do something with all of the posts */
        if($term_posts->have_posts()) : while ($term_posts->have_posts()) : $term_posts->the_post();

                the_title();
                the_content();

            endwhile;
        endif;

        /** Reset the postdata, just because it's neat and tidy to do so, even if you don't need it again */
        wp_reset_postdata();

    endforeach;
endif; 
```

# google-maps - 谷歌地图旋转多边形

> ID：13512141
> 
> 赞同：5
> 
> 时间：2012-11-22T11:47:51.883
> 
> 标签：google-maps, google-maps-api-3, rotation

在地图上绘制多边形形状后。当通过围绕多边形的一个点旋转来刷新地图时，我想改变多边形指向的方向。例如，将多边形指向围绕我的第一个多边形点旋转 90 度的方向（代码如下所示）。任何人都可以提供此工作的任何代码示例吗？我看过一些类似的帖子，但是给出的示例似乎过于复杂。

```
poly = new google.maps.Polygon({
  strokeWeight: 3,
  fillColor: '#5555FF'
});
poly.setMap(map);
poly.setPaths(new google.maps.MVCArray([path]));

  var triangleCoords = [
  new google.maps.LatLng(51.5087, -0.1277),
  new google.maps.LatLng(51.5387, -0.1077),
  new google.maps.LatLng(51.5387, -0.1477),
  new google.maps.LatLng(51.5087, -0.1277)
];

// Construct the polygon
triangle = new google.maps.Polygon({
  paths: triangleCoords,
  strokeColor: "#FF0000",
  strokeOpacity: 0.8,
  strokeWeight: 2,
  fillColor: "#FF0000",
  fillOpacity: 0.8
});
triangle.setMap(map);

google.maps.event.addListener(map, 'click', triangle);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-30T18:21:42.697

以下示例演示如何旋转多边形

> 注意：围绕第一个点进行旋转

```
function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 5,
    center: {lat: 24.886, lng: -70.268},
    mapTypeId: google.maps.MapTypeId.TERRAIN
  });

  // Define the LatLng coordinates for the polygon's path.
  var triangleCoords = [
    {lat: 25.774, lng: -80.190},
    {lat: 18.466, lng: -66.118},
    {lat: 32.321, lng: -64.757},
    {lat: 25.774, lng: -80.190}
  ];

  // Construct the polygon.
  var bermudaTriangle = new google.maps.Polygon({
    paths: triangleCoords,
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.35
  });
  bermudaTriangle.setMap(map);

  //rotate a polygon
  document.getElementById('btnRotate').onclick = function() {
        rotatePolygon(bermudaTriangle, 90);
  };
}

function rotatePolygon(polygon,angle) {
    var map = polygon.getMap();
    var prj = map.getProjection();
    var origin = prj.fromLatLngToPoint(polygon.getPath().getAt(0)); //rotate around first point

    var coords = polygon.getPath().getArray().map(function(latLng){
       var point = prj.fromLatLngToPoint(latLng);
       var rotatedLatLng =  prj.fromPointToLatLng(rotatePoint(point,origin,angle));
       return {lat: rotatedLatLng.lat(), lng: rotatedLatLng.lng()};
    });
    polygon.setPath(coords);
}

function rotatePoint(point, origin, angle) {
    var angleRad = angle * Math.PI / 180.0;
    return {
        x: Math.cos(angleRad) * (point.x - origin.x) - Math.sin(angleRad) * (point.y - origin.y) + origin.x,
        y: Math.sin(angleRad) * (point.x - origin.x) + Math.cos(angleRad) * (point.y - origin.y) + origin.y
    };
}
```

```
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

#map {
    height: 100%;
}

#floating-panel {
  position: absolute;
  top: 10px;
  left: 25%;
  z-index: 5;
  background-color: #fff;
  padding: 5px;
  border: 1px solid #999;
  text-align: center;
  font-family: 'Roboto','sans-serif';
  line-height: 30px;
  padding-left: 10px;
}
```

```
<div id="floating-panel">
  <input type="button" id="btnRotate" value="Rotate 90"></div>
<div id="map"></div>
<script async defer src="https://maps.googleapis.com/maps/api/js?callback=initMap"></script>
```

[**JSFiddle**](https://jsfiddle.net/vgrem/70sL1kg6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:20:44.627

你可能想看看 Mike Williams 的[eshapes library](http://econym.org.uk/gmap/eshapes.htm)之类的东西。它最初是为 Google Maps API v2 编写的，但此[页面](http://www.geocodezip.com/v3_MW_example_eshapes.html)演示了我移植到 Google Maps API v3 的版本。

[例子](http://www.geocodezip.com/v3_example_eshapes_triangle_rotate.html)

[概念证明小提琴](http://jsfiddle.net/geocodezip/bp67j9nc/)

**代码片段；**

```
var map = null;
var triangle, angle, point;

function initMap() {
  point = new google.maps.LatLng(44, -80);

  var myOptions = {
    zoom: 8,
    center: point,
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"),
    myOptions);

  angle = 0;
  // === Triangle ===
  triangle = google.maps.Polyline.RegularPoly(point, 30000, 3, angle, "#ff0000", 8, 1);
  triangle.setMap(map);
  google.maps.event.addListener(triangle, "click", rotateTriangle);
}
google.maps.event.addDomListener(window, 'load', initMap);

function rotateTriangle() {
  triangle.setMap(null);
  angle += 90;
  if (angle >= 360) angle -= 360;
  triangle = google.maps.Polyline.RegularPoly(point, 30000, 3, angle, "#ff0000", 8, 1);
  triangle.setMap(map);
  google.maps.event.addListener(triangle, "click", rotateTriangle);
}

// This Javascript is based on code provided by the
// Community Church Javascript Team
// http://www.bisphamchurch.org.uk/   
// http://econym.org.uk/gmap/

// From v3_eshapes.js:
// EShapes.js
//
// Based on an idea, and some lines of code, by "thetoy" 
//
//   This Javascript is provided by Mike Williams
//   Community Church Javascript Team
//   http://www.bisphamchurch.org.uk/   
//   http://econym.org.uk/gmap/
//
//   This work is licenced under a Creative Commons Licence
//   http://creativecommons.org/licenses/by/2.0/uk/
//
// Version 0.0 04/Apr/2008 Not quite finished yet
// Version 1.0 10/Apr/2008 Initial release
// Version 3.0 12/Oct/2011 Ported to v3 by Lawrence Ross

google.maps.Polyline.RegularPoly = function(point, radius, vertexCount, rotation, colour, weight, opacity, opts) {
  rotation = rotation || 0;
  var tilt = !(vertexCount & 1);
  return google.maps.Polyline.Shape(point, radius, radius, radius, radius, rotation, vertexCount, colour, weight, opacity, opts, tilt)
}
google.maps.Polyline.Shape = function(point, r1, r2, r3, r4, rotation, vertexCount, colour, weight, opacity, opts, tilt) {
  if (!colour) {
    colour = "#0000FF";
  }
  if (!weight) {
    weight = 4;
  }
  if (!opacity) {
    opacity = 0.45;
  }
  var rot = -rotation * Math.PI / 180;
  var points = [];
  var latConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat() + 0.1, point.lng())) * 10;
  var lngConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat(), point.lng() + 0.1)) * 10;
  var step = (360 / vertexCount) || 10;

  var flop = -1;
  if (tilt) {
    var I1 = 180 / vertexCount;
  } else {
    var I1 = 0;
  }
  for (var i = I1; i <= 360.001 + I1; i += step) {
    var r1a = flop ? r1 : r3;
    var r2a = flop ? r2 : r4;
    flop = -1 - flop;
    var y = r1a * Math.cos(i * Math.PI / 180);
    var x = r2a * Math.sin(i * Math.PI / 180);
    var lng = (x * Math.cos(rot) - y * Math.sin(rot)) / lngConv;
    var lat = (y * Math.cos(rot) + x * Math.sin(rot)) / latConv;

    points.push(new google.maps.LatLng(point.lat() + lat, point.lng() + lng));
  }
  return (new google.maps.Polyline({
    path: points,
    strokeColor: colour,
    strokeWeight: weight,
    strokeOpacity: opacity
  }))
}
```

```
html,
body,
#map {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<b>Click triangle's border to rotate it.</b>
<div id="map"></div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T17:35:43.687

我有同样的问题，我想旋转一个符号或多边形。**旋转**属性定义了对象的旋转，仅此而已。试试看。

**路径定义多边形的形状**并使用 SVG 表示法，如 (x,y) 坐标。

```
 function init_nuevo_mapa(){
        var mapOptions = {
        zoom: 13
        center: new google.maps.LatLng(-33.5351136,-70.5876618)
        };

        var new_map = new google.maps.Map(document.getElementById('new-map'), mapOptions);
        var myLatLng = new google.maps.LatLng(-33.5351136,-70.5876618)
        var image = {
                         path: 'M 0,0 -10,-30 10,-30 z',
                         rotation: 10, //10º clockwise
                         fillColor: "red",
                         fillOpacity: 0.5,
                         scale: 1,
                         strokeColor: "red",
                         strokeWeight: 4
                     };
        var marker = new google.maps.Marker({
                         position: myLatLng,
                         map: map,
                         icon: image,
                         zIndex: zIndex,
                         title: location[2]
                     }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-23T00:31:58.140

您可以使用新的 Google 地图符号对象轻松完成此操作。只需看看[https://developers.google.com/maps/documentation/javascript/reference#Symbol](https://developers.google.com/maps/documentation/javascript/reference#Symbol)。

警告：当你有很多标记时，这在 IE 9 上效果很差。

祝你好运！

# groovy - Groovy xml根据父模式属性选择子节点属性

> ID：13512145
> 
> 赞同：0
> 
> 时间：2012-11-22T11:48:03.563
> 
> 标签：groovy, xml-parsing

我有一个这样的xml结构

```
<JJJ version="2.0" >
<Data >
 <Object class="classX">
  <k name="constname1">variable1</p>
  <k name="constname2">variable2</p>
  <k name="constname3">variable3</p>
</Object>
 <Object class="classY">
  <k name="constname1">variable11</p>
  <k name="constname2">variable12</p>
  <k name="constname3">variable13</p>
</Object> 
```

我需要选择 ClassX 节点并在包含 constname1 的属性值中（即 variable1

```
def parser = new XmlSlurper()
def mymo=records.'Data'.'Object';
def mytest =  mymo.findAll{it.@class.text()=="ClassX"};
mytest.each{
it.'p'.each{
  println  it.@name.text() +'-'+ it.text() }
 } 
```

这是有效的。但是，我需要做这样的事情，而不是循环中的comapring文本

```
def testme= mytest.'k'.find{ it.@name.text()=="constname1"} 
```

这我不正确

但是下面是正确的

```
 println mymo.'k'.find{it.@name.text()=="constname1"} 
```

但我想将选择限制为 classX 的节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:55:48.853

更正您的 xml 使其有效，给出：

```
def xml = '''<JJJ version="2.0" >
            |  <Data >
            |    <Object class="classX">
            |      <k name="constname1">variable1</k>
            |      <k name="constname2">variable2</k>
            |      <k name="constname3">variable3</k>
            |    </Object>
            |    <Object class="classY">
            |      <k name="constname1">variable14</k>
            |      <k name="constname2">variable15</k>
            |      <k name="constname3">variable16</k>
            |    </Object>
            |    <Object class="classX">
            |      <k name="constname1">variable7</k>
            |      <k name="constname2">variable8</k>
            |      <k name="constname3">variable9</k>
            |    </Object>
            |  </Data>
            |</JJJ>'''.stripMargin()

List var = new XmlSlurper().parseText( xml ).'**'.grep { 
  it.@name == 'constname1' && it.parent().@class == 'classX'
}

assert var == [ 'variable1', 'variable7' ] 
```

那是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:34:17.883

我想正确的方法是

mytest.'k'.find{ it.['@name']=="constname1"}

对其他一些 xml 链接做了类似的事情——> [GPath Groovy](http://groovy.codehaus.org/GPath)

# opengl - openGL 镶嵌问题

> ID：13512146
> 
> 赞同：2
> 
> 时间：2012-11-22T11:48:09.513
> 
> 标签：opengl, tessellation

![??](../Images/c47b6458cf9e5fba43a8112d8de3e50e.png)

我正在尝试对茶壶进行镶嵌，镶嵌在这些出现的三角形内工作正常，但模型不起作用。

镶嵌着色器和顶点着色器与本网站上使用的相同。 [http://prideout.net/blog/?p=48](http://prideout.net/blog/?p=48)

唯一的例外是转换顶点是在顶点着色器中完成的。

这里有人发生过这种情况吗？会不会是其他顶点不形成三角形？

模型是从 obj 文件加载的。

# ios - ios - tableView 函数的 cellForRowAtIndex 方法很奇怪

> ID：13512150
> 
> 赞同：0
> 
> 时间：2012-11-22T11:48:22.770
> 
> 标签：ios

我的问题如下：在我的应用程序第一次启动时，该`cellforRowAtIndex`方法不会加载数组的所有项目，尽管该`numberOfRowsInSection`方法给出了正确的项目数，exp:`numberOfRowsInSection`方法给出了 4 个项目，但该`cellforRowAtIndex`方法只加载了其中的 2 个项目。

但是在第二次启动时正确加载了所有项目，我没有找到这个问题的原因，它太烦人了。

我已将 SSL Encrypted 中的所有对象加载`HTTPConnection`到数组中。我已经用断点调试了几次，但没有找到。该数组已经加载了所有对象，但无法通过`cellforRowAtIndex`某种方法加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:27:00.960

尝试确保在数组结束加载后更新表。

或者`[UITableView ReloadData];`在您的阵列完全加载后调用。

# python - 在 Nginx 和 UWSGI 中使用 GeoIP 模块

> ID：13512153
> 
> 赞同：1
> 
> 时间：2012-11-22T11:48:24.450
> 
> 标签：python, nginx, flask, uwsgi, geoip

我正在尝试集成此模块，但它有点超出我的能力：

[http://wiki.nginx.org/HttpGeoipModule](http://wiki.nginx.org/HttpGeoipModule)

在我的 nginx 配置中，我有这个：

```
geoip_country /usr/share/GeoIP/GeoIP.dat; 
```

我将它添加到构建选项中并包含在使用它所需的库中，这一切似乎都很好。我正在使用在 Nginx 和 UWSGI 上运行的 Python，我不知道下一步要在我的页面上实际检索 geoip 的结果。

我在 nginx 留言板上发布了这个没有运气所以如果有人可以给我任何帮助，我将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:07:05.727

现在您可以设置 nginx 通过自定义 HTTP 标头将 GeoIP 数据传递到您的 CGI 应用程序，例如：

```
proxy_set_header X-GeoIP-Country $geoip_country_name;
proxy_set_header X-GeoIP-City    $geoip_city; 
```

CGI 应用程序将接收这些自定义标头以及客户端提供的标准 HTTP 标头。

# c# - 如何通过 valuemember c# 从列表框中获取 DisplayMemeber 值？

> ID：13512155
> 
> 赞同：0
> 
> 时间：2012-11-22T11:48:49.463
> 
> 标签：c#, winforms, listbox

我有一个列表框，如下所示：

ID 客户名称

1.  迈克尔
2.  史蒂夫
3.  史密斯

现在，我知道了客户端的 ID，我如何获得它的 DisplayMember？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T12:03:55.947

Cast into `DataRowView`and convert 按索引选择客户名称列，即 1。

```
String ClientName = (((DataRowView) listBox1.SelectedItem).Row[1]).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:47:39.670

```
var t = from list in USStates where te.ShortName == textBox1.Text select te.LongName.ToString();     

foreach(String st in t)
 {
   MessageBox.Show(st);   
} 
```

其中 USStates 是通用列表，TextBox1.text 包含 id 的值。考虑到您的列表框使用通用列表作为数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:10:01.547

你可以试试这段代码。如果是`DataSource`，则编写示例，但如果是其他内容，请尝试查看 的in Items 属性是什么类型。`Listbox``DataTable``object``ListBox`

（请注意，我不喜欢使用`break`语句，但这是最快的方法）

```
string str = string.Empty;
foreach (DataRowView drv in listBox1.Items)
{
       int lvID = int.Parse(drv.Row[listBox1.ValueMember].ToString());
       if (lvID == 5)
       {
             str = drv.Row[listBox1.DisplayMember].ToString();
             break;
       }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T03:57:40.537

有一个更简单的解决方案。特别是如果您正在构建数据源，填充它，然后释放源。使用 Items 列表创建当前所选项目的 DataRowView。然后只需拉出正确的索引。0 将给您“价值成员”，1 将给您“显示成员”。

```
DataRowView thisLine = cbTrackerFormList.Items[cbTrackerFormList.SelectedIndex] as DataRowView; 
```

# sql - 在单个查询中使用“排序依据”两次

> ID：13512161
> 
> 赞同：3
> 
> 时间：2012-11-22T11:49:06.120
> 
> 标签：sql, sql-server, tsql

我有一个有 2 列的表。 `Date_Réserv`e（日期类型），`Heure_Réserve`（时间类型）

我想要做的是选择由 排序的结果`Date_Réserve`，然后我得到的结果是由 排序的`Heure_Réserve`。

这是我尝试过的查询：

```
select * from (select Date_Réserve,Heure_Réserve from réserve order by Date_Réserve)t order by Heure_Réserve 
```

但它给了我这个错误：

> ORDER BY 子句在视图、内联函数、派生表和子查询中无效，除非还指定了 TOP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:50:49.713

您不需要`ORDER BY`在子查询中使用 - 它在那里毫无意义。

对于主要/次要排序，您使用单个`ORDER BY`：

```
SELECT Date_Réserve,Heure_Réserve 
FROM réserve 
ORDER BY Date_Réserve, Heure_Réserve 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T11:51:20.993

列出用逗号分隔的所需列：

```
select Date_Réserve, Heure_Réserve from réserve
order by Date_Réserve, Heure_Réserve 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T11:52:29.187

试试这个：

```
SELECT Date_Réserve, Heure_Réserve FROMréserve ORDER BY Date_Réserve ASC, Heure_Réserve ASC 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T11:52:33.970

如果您想按多列排序：

```
select Date_Réserve,Heure_Réserve
from réserve
order by Date_Réserve, Heure_Réserve 
```

如果不是，则子查询中的顺序是无用的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T11:52:18.510

一个条款，两个部分

```
select 
            Date_Réserve,
            Heure_Réserve 
    from 
            réserve 
    order by 
             Date_Réserve, 
             Heure_Réserve 
```

--

如果这只是一个示例，并且您确实需要按在您可以执行的外部查询中不可用的列对结果进行排序，

```
select 
            Date_Réserve,
            Heure_Réserve 
    from 
        (
            select 
                    (ROWNUMBER() OVER ORDER BY Date_Réserve) do,
                    Date_Réserve,
                    Heure_Réserve 
                from
                    réserve 
        )
    order by 
             do, 
             Heure_Réserve 
```

但是，正如您所看到的，这在您的场景中是没有意义和不合适的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T12:46:37.683

使用 TOP 语句时，可以在子查询中使用 order by。

```
select * from 
(select TOP 100 PERCENT Date_Réserve,Heure_Réserve from réserve order by Date_Réserve) t order by Heure_Réserve 
```

# c++ - 如何创建版本化的 dll

> ID：13512166
> 
> 赞同：0
> 
> 时间：2012-11-22T11:49:23.493
> 
> 标签：c++, windows, dll, versioning

有人可以帮我编写或举例说明版本化的 DLL 吗？我想创建一个在编译期间的函数 - 设置 DLL 的所有细节，但我不知道该怎么做，甚至不知道如何开始或从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:13:10.713

涉及的三个步骤是：

1.  创建[版本资源脚本](http://en.wikibooks.org/wiki/Windows_Programming/Resource_Script_Reference#Version_Information)。
2.  [使用资源编译器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381042%28v=vs.85%29.aspx)编译版本资源脚本。
3.  将编译好的资源文件（后缀`.res`）链接到 DLL 中。

例子：

*   主文件

    ```
    #include <windows.h>
    BOOL APIENTRY DllMain(HMODULE, DWORD, LPVOID) { return TRUE; } 
    ```

*   版本.rc

    ```
    #define APSTUDIO_READONLY_SYMBOLS
    #include "windows.h"
    #undef APSTUDIO_READONLY_SYMBOLS

    LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_UK
    #pragma code_page(1252)

    VS_VERSION_INFO VERSIONINFO
     FILEVERSION 1,9,1,7
     PRODUCTVERSION 2,2,2,2
     FILEFLAGSMASK 0x3fL
     FILEFLAGS 0x0L
     FILEOS 0x40004L
     FILETYPE 0x1L
     FILESUBTYPE 0x0L
    BEGIN
        BLOCK "StringFileInfo"
        BEGIN
            BLOCK "080904b0"
            BEGIN
                VALUE "CompanyName", "My Company.\0"
                VALUE "FileDescription", "My File\0"
                VALUE "FileVersion", "1.9.1.7\0"
                VALUE "InternalName", "my-real-file\0"
                VALUE "LegalCopyright", "Copyright © 2012 My Company Ltd.\0"
                VALUE "OriginalFilename", "my.dll\0"
                VALUE "PrivateBuild", "820\0"
                VALUE "ProductName", "My Company: my dll\0"
                VALUE "ProductVersion", "2.2.2.2\0"
            END
        END
        BLOCK "VarFileInfo"
        BEGIN
            VALUE "Translation", 0x809, 1200
        END
    END 
    ```

从命令行：

```
> rc 版本.rc

> cl /nologo /LD main.cpp 版本.RES
主文件

```

这将创建一个`main.dll`带有*版本*选项卡的选项卡。

*警告：自从我看到这个并且已经忘记了 version.rc 脚本中的所有内容是什么意思以来已经有一段时间了。*

# php - opencart中的购物车问题

> ID：13512169
> 
> 赞同：1
> 
> 时间：2012-11-22T11:49:25.263
> 
> 标签：php, mysql, opencart

我在理解一个概念时遇到问题。假设您已登录并将一些商品添加到您的购物车，但没有签出您已注销。下次您登录时，您将找到包含您之前添加的物品的购物车。我想知道这个概念是如何工作的？经过一番研究，我知道它正在使用缓存文件。但是这个缓存文件是如何工作的？这个缓存文件与后端数据库有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:05:51.547

OpenCart 使用`customer`表中的字段将购物车项目存储为序列化的数据数组。该字段称为`cart`。类似地，愿望清单使用相同的技术并在表中`wishlist`再次称为 。`customer`要实际加载缓存的内容，使用此代码在`login()`方法 in中加载值`/system/library/customer.php`

```
 if ($customer_query->row['cart'] && is_string($customer_query->row['cart'])) {
            $cart = unserialize($customer_query->row['cart']);

            foreach ($cart as $key => $value) {
                if (!array_key_exists($key, $this->session->data['cart'])) {
                    $this->session->data['cart'][$key] = $value;
                } else {
                    $this->session->data['cart'][$key] += $value;
                }
            }           
        } 
```

此代码实际上将商品添加到当前购物车中，因此如果您的购物篮中已有商品，它会将它们合并

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:13:54.640

当您提出更多问题时 - 一个与购物车和物品存储相关，以及一两个与缓存相关的问题，正如**Jay Gilford**回答与购物车相关的部分一样，这里是缓存的答案：

Opencart 缓存您在每次页面加载时使用最多的数据：货币、语言、类别、产品、类别产品计数、重量等级、税收等级等。在模型中（现在让我们谈谈前端/目录）当获取data OpenCart 在查询数据库之前查找缓存的数据。如果发现缓存数据，它们将被提取和反序列化（它们使用 PHP 的函数存储在纯文本文件中`serialize()`）并返回到控制器**而不**查询数据库 - 因此提取应该更快¹。如果没有缓存数据，则查询数据库，然后将获取的数据库数据序列化（使用 PHP 的函数`serilizae()`）并保存到相应的缓存文件中。

这是可能发生的一个小问题 - 在您直接在数据库中编辑数据之后（使用 phpMyAdmin，可能是因为这个原因），前端不存在更改。这是因为有缓存的旧数据在被要求时被提取。如果您必须进行此类编辑，请不要忘记手动删除相应的缓存文件。

这导致我们进入模型的管理（后端）部分 - 在数据成功存储到数据库后编辑或添加数据（类别、产品、货币、重量等级等）时，相应的缓存文件会立即删除，因此它可以在包含最新数据的前端重新创建。

缓存文件可以在`/system/cache/`文件夹中找到。

**编辑**：缓存被实例化并在其中注册`index.php`，然后在控制器和模型中都可以作为`$this->cache`while 方法访问`set()`，`get()`并且`delete()`是可调用的。缓存类本身可以在以下位置找到，`system/library/cache.php`并且非常简单明了。

这样的答案是否足够？

¹我看到一个服务器的 PHP-MySQL 通信速度非常快，而文件系统访问速度很慢......

# c++ - 在 VC++ 和 Qt 应用程序之间使用共享内存进行通信

> ID：13512170
> 
> 赞同：0
> 
> 时间：2012-11-22T11:49:30.393
> 
> 标签：c++, qt, visual-c++, shared-memory, file-mapping

我正在使用 FileMapping 在 C++ windows 窗体应用程序中实现共享内存概念，并在 Qt 应用程序中实现 QSharedMemory。

我想在使用 QsharedMemory 的 Qt 应用程序中使用 FileMapping 技术读取由 C++ 表单应用程序编写的数据。

可能吗？如果不是，请建议适当的方法来实现此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:12:19.090

我不太确定您的实现细节，但是我建议更好更统一的方法是使用`boost::InterProcess`- 它提供可以在两个进程中使用的机制，然后使用公共代码。

[http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/sharedmemorybetweenprocesses.html](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/sharedmemorybetweenprocesses.html)

另一个原因是该库提供了同步机制和其他 IPC 机制，这些机制在未来可能会有用。

[http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html)

# jquery - jquery自动完成在VS2012中不起作用，但在VS2010中工作正常

> ID：13512174
> 
> 赞同：0
> 
> 时间：2012-11-22T11:49:50.423
> 
> 标签：jquery, jquery-ui, visual-studio-2012, jquery-autocomplete

我试图使用自动完成，但它在 VS2012 中不起作用。因此，我从 jQuery（[http://jqueryui.com/autocomplete/#default](http://jqueryui.com/autocomplete/#default)）中提取了一个样本，并将其粘贴到 VS2012 和 VS2010 中。它在 2010 年运行良好，但在 2012 年抛出异常。

知道为什么会这样吗？

为了避免任何插件或脚本不匹配的情况，我使用了 jquery 站点给出的 cdn 引用。

这是我使用的源代码。这是唯一的内容，VS2012和VS2010中没有添加其他内容

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
</head>
<body>

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</body>
</html> 
```

编辑：我观察到在 VS2012 中，如果没有提及，它会附加默认布局。同样，如果我们删除 "@RenderSection("scripts", false);" 在 layout.cshtml 文件中，事情将开始工作。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:24:35.747

我懂了。

我所做的唯一更改是将 _Layout.cshtml 中的以下代码从底部移动到头部。

"@Scripts.Render("~/bundles/jquery")"

：） 现在开心。在这上面浪费了将近一天的时间。

# elasticsearch - 弹性搜索无法找到 SqlServer Jdbc 驱动程序

> ID：13512177
> 
> 赞同：0
> 
> 时间：2012-11-22T11:50:07.513
> 
> 标签：elasticsearch, sqljdbc

[我已经使用此处](https://github.com/rgl/elasticsearch-setup/downloads)提供的设置在 AMazon Ec2 Windows 实例（Windows Server 2008 x64）上安装了 Elastic Search

我使用[这篇博文](http://nitschinger.at/Elastic-Search-and-SQL-Server-are-sitting-in-a-tree)作为参考。我能够成功安装弹性搜索并与之通信。现在我正在尝试实现一条河流，以便我可以从 Sql Server db 获取数据。我下载并解压了 Microsoft Sql Server Jdbc 驱动程序并将 sqljdbc4.jar 复制到 ElasticSearch 的 lib 文件夹中。

但是河流没有运行，我在日志/控制台中得到以下异常

```
[2012-11-22 16:27:03,165][ERROR][river.jdbc               ] com.microsoft.sqlserver.jdbc.SqlServerDriver
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SqlServerDriver
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.elasticsearch.river.jdbc.SQLService.getConnection(SQLService.java:102)
    at org.elasticsearch.river.jdbc.JDBCRiver$JDBCConnector.run(JDBCRiver.java:194)
    at java.lang.Thread.run(Unknown Source) 
```

这真的很令人沮丧，因为 jar 文件位于 lib 目录中。事实上，我专门将 sqljdbc.jar 添加到 ES_CLASSPATH 并且类路径确实有目录，但我仍然得到错误。我不知道如何进一步调试，也没有在网上找到任何解决方案。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:48:19.667

在配置河流时，给出的类名是

com.microsoft.sqlserver.jdbc.SqlServerDriver

它应该在哪里

com.microsoft.sqlserver.jdbc.SQLServerDriver

# c# - 如何在 Windows8 上以编程方式更新 liveTile？

> ID：13512179
> 
> 赞同：1
> 
> 时间：2012-11-22T11:50:20.663
> 
> 标签：c#, windows-8, microsoft-metro

我想在应用程序进入后台时更新我的​​ liveTile。我该怎么办？

这是我更新 liveTile 的代码。

```
 private static TileUpdater updater;        

public static void updateLiveTile(string text)
        {
            if (updater == null)
            {
                updater = TileUpdateManager.CreateTileUpdaterForApplication();
            }
            else
                updater.Clear();

            updater.EnableNotificationQueue(true);

            var tile = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideImageAndText01);
            tile.GetElementsByTagName("text")[0].InnerText = text;
            XmlNodeList tileImageAttributes = tile.GetElementsByTagName("image");
            ((XmlElement)tileImageAttributes[0]).SetAttribute("src", "ms-appdata:///local/MyShop_Image.png");
            ((XmlElement)tileImageAttributes[0]).SetAttribute("alt", "red graphic");

            updater.Update(new TileNotification(tile));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:08:48.910

使用后台任务有用资源中的[应用程序磁贴和徽章示例](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148) 和[磁贴更新。](http://code.msdn.microsoft.com/windowsapps/Tile-updates-from-2f6a854c)

# android - 当用户返回后台应用程序时如何触发功能？

> ID：13512180
> 
> 赞同：2
> 
> 时间：2012-11-22T11:50:21.183
> 
> 标签：android, ios, android-homebutton, home-button

例如，用户打开应用程序，按下主页按钮，然后再次返回应用程序。

当用户导航回应用程序时，有什么方法可以触发某些功能？例如当用户返回应用程序时自动加载视图对象。

这个问题适用于 Android 和 iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:58:02.523

对于 android，您可以在 onResume 函数中纠正您的代码，该函数在后台应用程序出现时调用。但请记住 android 生命周期是

onCreate-->onResume。

所以 onResume 总是被调用，即使应用程序第一次运行或来自后台。但 onCreate 仅在第一次创建 Activity 时调用。

您可以在应用程序进入后台时调用的 onPause 方法上设置一些变量

当您获得该变量“true”并调用 onResume 时，您可以执行您的任务。

请享用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:53:37.700

在项目文件中根据自己的喜好使用以下内容`AppDelegate.m`（仅限 iOS）

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:56:47.807

在 onPause() 方法中编写此代码以了解您的应用程序已进入后台。

```
public void onPause()
{
 ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
Boolean flag=false;     

List<RunningTaskInfo> tasks = am.getRunningTasks(1);
        if (!tasks.isEmpty()) {
          ComponentName topActivity = tasks.get(0).topActivity;
          if (!topActivity.getPackageName().equals(context.getPackageName())) {
            flag=true;
          }
        }
if(flag)
{
//App went to background...
}

} 
```

在 onResume() 中使用上述**标志**来知道您的应用程序已恢复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:59:14.100

尝试在活动的两种方法 onKeyDown 和 onPause 中使用布尔变量。

```
boolean backFromBackground = false;

onCreate(){
 //whatever you want
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {     

    if(keyCode == KeyEvent.KEYCODE_HOME)
    {

       backFromBackground = true;
    }
}
onPause(){
 if(backFromBackground){
  //do what ever you want
 }
} 
```

# javascript - 如何使用 JavaScript 解析来自不同 URL 的 html？

> ID：13512183
> 
> 赞同：0
> 
> 时间：2012-11-22T11:50:31.217
> 
> 标签：javascript, html, parsing

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

请帮助.. 主要是我想使用 JavaScript 解析来自不同 URL 的 HTML，以便我可以在那里找到一个类是否存在，如果它存在或不存在，我可以在我的页面上显示结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:54:29.590

我不知道你的环境，但它看起来像一个 jsonp :)

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

1）您避免使用[同源](http://en.wikipedia.org/wiki/Same_origin_policy)策略，因为您使用脚本标签的 src 属性。

2）您可以将所有内容直接发送到您的回调函数中。

# java - 使用 Java 在 POST 请求中设置标头

> ID：13512188
> 
> 赞同：3
> 
> 时间：2012-11-22T11:50:52.830
> 
> 标签：java, http, post

我使用 Robotium 来测试 Android 应用程序。在测试过程中，我需要向服务器创建 POST 请求给用户一些钱，然后验证更改是否反映在 UI 中。

请求看起来像：

> www.testserver.com/userAddMoney?user_id=1&amount=999

但是要在服务器上授权，我需要将特殊参数传递给请求的标头：

> 标头：X-Testing-Auth-Secret：kI7wGju76kjhJHGklk76

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:01:06.713

您可以查看[Apache HC](http://hc.apache.org/)包：

```
HttpPost post = new HttpPost( "http://wwww.testserver.com/userAddMoney" );
...
post.addHeader( "X-Testing-Auth-Secret" , "kI7wGju76kjhJHGklk76" );
... 
```

干杯，

# android - ListView 操作根据 android 版本而有所不同

> ID：13512198
> 
> 赞同：0
> 
> 时间：2012-11-22T11:51:21.677
> 
> 标签：android, android-listview, android-adapter, android-version

我遇到了一些奇怪的问题，其中一些如何处理 android OS 版本。我的问题是以下给定的代码在 android 版本 4 中可以正常工作，但相同的程序在 android 版本 2.3 中以相反的方式工作

公共类FeturesList扩展活动{

```
ImageView               imgFeture;
ListView                listview;
ArrayList<String>               values;
CustomListAdapter   adapter;
public static boolean itemOnView = false;

int tempPos;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fetures_list);

    listview    = (ListView) findViewById(R.id.listView1);
    values=new ArrayList<String>();
    values.add(" ESSENTIAL      ");
    values.add(" EMERGENCY     ");
    values.add(" ENTERTAINMENT  ");
    values.add(" VIDEO CALL     ");
    values.add(" DOCTORS     ");
    values.add(" SOCIETY      ");
    values.add(" FAMILY      ");
    values.add(" OTHERS      ");
    values.add(" WHAT'S NEW     ");

    imgFeture   = (ImageView) findViewById(R.id.imageFeatures);

    adapter     = new CustomListAdapter(this, values);
    listview.setAdapter(adapter);
    listview.setSelection(0);

    listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View v,
                int position, long id) {
            imgFeture.setBackgroundDrawable(getResources().getDrawable(getResources().getIdentifier("drawable/feature_"+position,"drawable",getPackageName())));

            tempPos = position;
            for(int i = 0; i < arg0.getChildCount(); i++){
                if(i == position){
                    arg0.getChildAt(i).setBackgroundColor(Color.WHITE);
                    TextView text = (TextView) v.findViewById(R.id.rowListTextView);
                    text.setTextColor(Color.BLACK);

                    adapter.notifyDataSetChanged();
                }else{

                    arg0.getChildAt(i).setBackgroundColor(Color.MAGENTA);

                }
            }

        }

    });

}

public class CustomListAdapter extends ArrayAdapter<String>
{
    Activity context;
    ArrayList<String> row=null;
    LayoutInflater inflator=null;
    public CustomListAdapter(Activity context,ArrayList<String> row)
    {
        super(context,R.layout.listrow,row);
        this.context=context;
        this.row=row;

    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View rowView=convertView;
        /*FilterItem item = (FilterItem)this.getItem(position);*/
        if(convertView==null)
        {
            inflator=context.getLayoutInflater();
            final ViewHolder holder=new ViewHolder();
            rowView=inflator.inflate(R.layout.listrow, null);
            holder.rowText=(TextView)rowView.findViewById(R.id.rowListTextView);
            rowView.setTag(holder);

        }
        final ViewHolder hold=(ViewHolder)rowView.getTag();
        hold.rowText.setText(row.get(position));

        if(tempPos != position){
            hold.rowText.setTextColor(Color.WHITE);
        }
        return rowView;
    }

}

static class ViewHolder
{
    TextView rowText;
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_fetures_list, menu);
    return false;
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);
    this.finish();
} 
```

在 android 4.0 中，setOnItemClickListener() 的变量“位置”工作正常，即如果我点击 0 或 1 或 2，而不是分别显示正确的位置为 0、1 或 2，但同样的事情在 android 2.3 中反向工作位置 0 它的位置为 8，如 0-8、1-7、2-5、4-4、5-4 等等......请建议我如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:17:12.150

```
public View getView(final int position, View convertView, ViewGroup parent){

                ViewHolder holder = null;
                View rowView = convertView;

                if (rowView == null) {

                    LayoutInflater inflater = context.getLayoutInflater();
                //here give your xml name...
                    rowView = inflater.inflate(R.layout.case_row, null, true);

                    holder = new ViewHolder();
                    //here get your ids...
                    holder.caseType=(TextView) rowView.findViewById(R.id.caseType);

                    rowView.setTag(holder);
                }
                else
                {
                    holder = (ViewHolder) rowView.getTag();
                }

                //If you want to do some functions with your views do here...
                //example...
                holder.caseType.setText("hello android");

                rowView.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        //Handle the listview click event here...

                        }
                });

                return rowView;

            }

             class ViewHolder {
                 TextView caseType; 
            } 
```

检查上面的代码。

# android - 倒计时服务

> ID：13512201
> 
> 赞同：1
> 
> 时间：2012-11-22T11:51:27.263
> 
> 标签：android, service, countdown

我想制作包含倒计时的程序。即使应用程序关闭，我也希望倒计时继续运行。我知道我应该使用 getter 和 setter。

编辑：每次按下按钮时，都会出现错误。有谁知道我该如何解决这个问题？

启动服务：

```
 public void onClick(View arg0) {                            //countdown starts by preesing a button
            // TODO Auto-generated method stub
            ssf = Integer.parseInt(essf.getText().toString());
            Intent openCountDownService = new Intent("julian.mangelberger.ultravioletobservation.COUNTDOWNSERVICE");
            startService(openCountDownService);
        } 
```

服务：

```
import julian.mangelberger.ultravioletobservation.TabMainActivity;
import android.app.IntentService;
import android.content.Intent;

public class CountDownService extends IntentService {

public CountDownService(String name) {
    super(name);
    // TODO Auto-generated constructor stub
}

@Override
protected void onHandleIntent(Intent intent) {
    while (TabMainActivity.progressBarStatus <= 100) {
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        TabMainActivity.progressBarStatus++;
        TabMainActivity.progressbar1.setProgress(TabMainActivity.progressBarStatus);

    }
}

} 
```

# google-plus - Google+ api 中的错误代码 403

> ID：13512203
> 
> 赞同：10
> 
> 时间：2012-11-22T11:51:37.893
> 
> 标签：google-plus, google-api-objc-client

我收到“错误”：`{ "errors": [ { "domain": "usageLimits", "reason": "dailyLimitExceededUnreg", "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.", "extendedHelp": "https://code.google.com/apis/console" } ], "code": 403, "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup." }` 当我尝试通过[https://www.googleapis.com/plus/v1/people/me](https://www.googleapis.com/plus/v1/people/me) URL 字符串获取 Google+ api 中的用户配置文件时。如果有人有任何建议，请尽快告诉我。在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T17:28:18.400

该消息表明您尚未设置 Google API 控制台项目。

1.  创建[Google API 控制台项目](https://code.google.com/apis/console)
2.  在“[服务”窗格上](https://code.google.com/apis/console#:services)，启用您的项目所需的所有 API。
3.  在[API 访问窗格](https://code.google.com/apis/console#:access)中，单击**创建 OAuth 2.0 客户端 ID**。将打开一个对话框。填写您的项目信息。单击**下一步**
4.  选择适当的应用程序类型。根据您在这篇文章中使用的标签，我猜这是一个 iOS 项目，所以选择**Installed application**。
5.  输入您的捆绑包 ID。在您的应用程序在此处列出之前，您无需输入 App Store ID。
6.  单击**创建客户 ID**。

您将看到客户端 ID 和客户端密码值。您将使用这些值来启用与您的项目和 Google API 的通信。

如果您尚未使用它，请参阅[Google+ iOS SDK 和文档](https://developers.google.com/+/mobile/ios/)以进行完整的演练。名为“编写时刻”的任务在实现上类似，它演示了如何在使用 SDK 的 iOS 项目中连接和使用 Google+ REST API。

您需要指定 plus.me 的范围以获取配置文件信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T19:07:33.243

我只想在这里添加一些信息，以防万一有人遇到这个问题。

我有一个组织（ORG）。我用一些播放列表创建了第二个频道 (SC)，其中引用了 ORG 的视频。

我错误地假设因为 ORG 拥有 SC，我可以使用来自 ORG 的相同 oauth 凭据来访问两者。我错了。

当我可以访问播放列表但不能访问视频时，我切换了凭据并且感到困惑。同样，我需要分别为每一个凭据访问相应频道上的资源。

蹩脚的，但事情就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-20T19:26:25.953

除了 BrettJ 提到的，重要的是发送请求的授权标头以在 google+ API 中获取 UserProfile。

例如，添加以下标头键： 授权值：Bearer ya29.Ci-cA_CywoVdVG#######

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-07T10:59:09.497

我遇到了同样的错误，经过大量搜索后，我发现在我的情况下，未设置带有访问令牌的授权标头。**在每个**Google API 调用`Authorization: "Bearer <YOUR_ACCESS_TOKEN>"`的请求标头中设置。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-02T18:34:14.217

BrettJ 的回答将涵盖大部分基础。但是，如果未正确设置*范围*，即使您的凭据已正确验证，您也会收到此错误。我会检查您的 OAuth 舞蹈中的范围设置。确保您的用户被允许做您的代码试图帮助他们做的事情。**

# javascript - 在 Dojox DialogWidget 中显示元素

> ID：13512208
> 
> 赞同：2
> 
> 时间：2012-11-22T11:51:42.410
> 
> 标签：javascript, dojo

我在正确显示我的 dojox DialogWidget 内容时遇到问题。我创建了两个工具栏和一个 ContentPane。这个想法是将一个工具栏固定在顶部宽度固定大小，另一个工具栏在底部，ContentPane 在中心。在我的情况下，我只看到顶部工具栏和 ContentPane，它们在剩余空间上延伸，因此看不到底部工具栏。内容在不同的浏览器中也显示不同。我在下面弹出我的代码。

```
<!DOCTYPE html> 
```

```
<head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="main-demo.css" media="screen" />
    <link rel="stylesheet" href="medview.css" media="screen" />
    <link rel="stylesheet" href="main.css" media="screen" />

    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/widget/Dialog/Dialog.css" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojo/dojo.xd.js" djConfig="async:true, parseOnLoad: true"></script>

    <script type="text/javascript">

        dojo.require("dojo.parser");
        dojo.require("dijit.layout.BorderContainer");
        dojo.require("dijit.layout.ContentPane");
        dojo.require("dijit.Toolbar");
        dojo.require("dijit.form.Button");
        dojo.require("dijit.form.VerticalSlider");
        dojo.require("dijit.form.VerticalRuleLabels");
        dojo.require("dijit.form.VerticalRule");
        dojo.require("dijit.TooltipDialog");
        dojo.require("dojox.widget.Dialog"
            );

            dialog = null;

            dojo.addOnLoad(function() 
            { 

                container = dojo.create("div", {
                    class : "test",
                    id : "viewer"
                }, dojo.body());
                console.debug("Container ID: " + container);

                var appLayout = new dijit.layout.BorderContainer({
                    design : "headline",
                    style:'width:100%;height:100%',
                }, container.id);

                content = new dijit.layout.ContentPane({
                    region:"center",
                    title : "Viewports",
                    class : "dhMedViewViewport"
                });

                appLayout.addChild(content);

                viewportContainer = content.domNode;

                var imgToolbar_zgoraj = new dijit.Toolbar({
                    region:"top",
                }, "dhmv-toolbar");

                imgToolbar_zgoraj.addChild(new dijit.form.Button({
                    label : "Reset",
                    showLabel : true
                }));

                var imgToolbar_spodaj = new dijit.Toolbar({

                    region:"bottom",

                }, "dhmv-toolbar");

                imgToolbar_spodaj.addChild(new dijit.form.Button({
                    label : "Reset",
                    showLabel : true
                }));

                appLayout.addChild(imgToolbar_zgoraj);
                appLayout.addChild(imgToolbar_spodaj);

                appLayout.startup();

                dialog = new dojox.widget.Dialog({

                    sizeToViewport: true,
                    content : container
                });

            });

            function showDialogTwo() {
                dialog.startup();
                dialog.show();
            }

     </script>
</head>

<body class="claro">
    <p>
        Test dialogBox
    </p>
    <button id="buttonTwo" dojoType="dijit.form.Button" type="button">
        Show me!
        <script type="dojo/method" event="onClick" args="evt">
            showDialogTwo();
        </script>            
    </button>

</body> 
```

# php - 如何通过csv文件只更新sql表的一列

> ID：13512209
> 
> 赞同：0
> 
> 时间：2012-11-22T11:51:41.263
> 
> 标签：php, mysql, sql, database

我有一个包含一些数据的 csv 文件。在我的 Sql 数据库中，我有一个具有多个列名的表。现在我想通过 csv 文件只更新一列。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:08:00.850

你可以这样尝试：

```
-Import the csv file to a temp table
-Update your main table by joining with a temp table. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:14:43.040

如[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)所述，您可以执行此操作

```
LOAD DATA INFILE 'mycsvdata.csv'
INTO TABLE mytable
( @csvfield1, @csvfield2 )
SET myTabField = @csvfield2; 
```

# php - 使用 DOM 文档和 SimpleXML 格式化 xml。啊啊啊

> ID：13512210
> 
> 赞同：0
> 
> 时间：2012-11-22T11:51:44.613
> 
> 标签：php, xml, simplexml, domdocument

> **可能重复：**
> [PHP simpleXML 如何以格式化的方式保存文件？](https://stackoverflow.com/questions/798967/php-simplexml-how-to-save-the-file-in-a-formatted-way)

是否可以同时使用 SimpleXML 和 DOM 文档？

我正在使用 SimpleXML 来获取文件更新并保存它，但 xml 被格式化为一行。

如何在脚本中使用 DOM Document 来格式化输出？是否必须在 SimpleXML 位完成写入文件后完成，还是可以在之前完成？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:11:16.433

```
//Get the wordpress postID
$postID = get_the_ID();

$postData = get_post($postID);

// echo $postID.'<br />'.$postData->post_title.'<br />'.$postData->post_date_gmt.'<br />';

$xmlFile = '/Applications/MAMP/htdocs/giraffetest/test.xml';

// load the document
$xml = simplexml_load_file($xmlFile);

// Check to see if the post id is already in the xml file - has it already been set?
$nodeExists = $xml->xpath("//post[@id=".$postID."]");

//Count the results
$countNodeExists = count($nodeExists);

if($countNodeExists > 0) { // If the ID is already in the file

        // echo 'ID already here';

        // get the correct node
        $result = $xml->xpath("//post[@id=".$postID."]/postviews");

        // heres the trick - the first result of xpath, and the node value (stored in [0])
        $result[0][0] = $result[0][0]+1;

} else { // If the ID isn;'t there, add a new entry in the xml file for the post

        //echo 'ID added';

        $postNode = $xml->addChild('post'); // adding a new <post> to the top level node
    $postNode->addAttribute('id', $postID); // adding a <postid> inside the new <post>
    $postNode->addChild('postviews', 1); // adding a postviews inside the new <post>
}

// save the updated document

//$xml->asXML($xmlFile);
$dom = new DOMDocument('1.0');
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;
$dom->loadXML($xml->asXML());
$dom->save($xmlFile); 
```

# javascript - 在visualSearchjs中用户输入时从搜索框中获取值

> ID：13512216
> 
> 赞同：0
> 
> 时间：2012-11-22T11:52:06.077
> 
> 标签：javascript, jquery, jquery-autocomplete

我一直在使用`visualSearch.js`插件`autocomplete`。它是使用开发的`backbone.js`，

我将添加一个 wrking 模型来显示我已经到达的位置以及我想要实现的目标。[http://jsfiddle.net/HRuAP/50/](http://jsfiddle.net/HRuAP/50/)解释一下，

我正在尝试添加构面搜索选项，并希望获取用户输入的字母值以进行构面匹配。

我试图让输入的字符`$(".ui-autocomplete-input").val()` 返回第一次试用时输入的字符，当我们尝试输入第二个方面时，它返回空字符串。我们可以使用查看`console.log`值`firebug`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:16:05.813

`keydown`您可以使用事件获取字符：

```
var input = '';
$('body').keydown(function(event) {
    if(event.keyCode == 8){
        input = input.slice(0,-1);
    }else{
        input += String.fromCharCode(event.keyCode);
    }
    console.log(input, input.split(' '));
});​ 
```

唯一的问题是这似乎只返回大写字符。

# android - Android从浏览器返回到应用程序

> ID：13512222
> 
> 赞同：4
> 
> 时间：2012-11-22T11:52:26.873
> 
> 标签：android, browser

我可以在我的应用程序中选择启动浏览器并加载 imdb 网站。我为此使用 ActionView。

```
 Intent intent1 = new Intent(android.content.Intent.ACTION_VIEW,
                Uri.parse(website));

        try {
            activity.startActivity(intent1);
        } catch (Exception e) {
            Toast.makeText(activity, R.string.no_imdb, Toast.LENGTH_SHORT)
                    .show();
        } 
```

当我点击后退按钮时会出现问题。启动默认浏览器应用程序时，一切正常。当 Opera Mini 应用程序启动时，当我点击后退按钮时，我的应用程序似乎收到了两个后退操作，并完成了我当前的活动。

如何防止这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T11:54:34.470

尝试在新任务中启动意图：

```
intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

或者

```
intent1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-26T05:07:10.193

请将此代码添加到您需要返回的活动的 android 清单中

```
 <activity
        android:name="YourActivityName"
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="schemas.your_package.YourActivityName" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.ALTERNATIVE" />

        </intent-filter>
    </activity> 
```

并将其添加到您的网页

```
<a href="intent:#Intent;action=schemas.your_package.YourActivityName;end">click to load app</a>
```

因为你手机上只有一个app有这个动作名称（schemas.your_package.YourActivityName），网页直接返回app

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-01T07:10:46.813

您也可以使用[Airbnb DeepLink lib](https://github.com/airbnb/DeepLinkDispatch)

**例子**

这是一个示例，我们注册 SampleActivity 以从例如 example://example.com/deepLink/123 之类的深层链接中提取 ID。我们用@DeepLink 注释并指定将有一个我们将用id 标识的参数。

```
@DeepLink("example://example.com/deepLink/{id}")
public class SampleActivity extends Activity {
  @Override protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = getIntent();
    if (intent.getBooleanExtra(DeepLink.IS_DEEP_LINK, false)) {
      Bundle parameters = intent.getExtras();
      String idString = parameters.getString("id");
      // Do something with idString
    }
  }
} 
```

# zend-framework - Zend Session 保存在正确的路径中，但 gc 尝试在其他地方清理

> ID：13512225
> 
> 赞同：0
> 
> 时间：2012-11-22T11:52:37.933
> 
> 标签：zend-framework, zend-session

我的项目在 ZF 1.11 下运行，它随机抛出此错误：

```
Fatal error: Uncaught exception 'Zend_Session_Exception' with message 'Zend_Session::start() - /home/user/www/MyProject/library/Zend/Session.php(Line:469): Error #8 session_start() [<a href='function.session-start'>function.session-start</a>]: ps_files_cleanup_dir: opendir(/tmp) failed: Permission denied (13) Array' in /home/user/www/MyProject/library/Zend/Session.php:482 Stack trace: 
#0 /home/user/www/MyProject/library/Zend/Session/Namespace.php(143): Zend_Session::start(true) 
#1 /home/user/www/MyProject/library/Dlx/Acl/Permissao.php(8): Zend_Session_Namespace->__construct('user_info') 
#2 /home/user/www/MyProject/application/Bootstrap.php(72): Dlx_Acl_Permissao->__construct(Object(Zend_Db_Adapter_Pdo_Mysql)) 
#3 /home/user/www/MyProject/library/Zend/Application/Bootstrap/BootstrapAbstract.php(669): Bootstrap->_initLoaders() 
#4 /home/user/www/MyProject/library/Zend/Application/Bootstrap/BootstrapAbstract.php(622): Zend_Application_Bootstrap_BootstrapAbstract->_executeResource('loaders') 
#5 /home/user/ in /home/user/www/MyProject/library/Zend/Session.php on line 482 
```

如您所见，它尝试清除 /tmp 目录中的会话，但在我的 application.ini 中，配置将 session.save_path 设置为 APPLICATION_PATH "/../data/session"（ZF 默认配置），并保存会话在这个路径中，但是当 gc 运行时，它会尝试清理错误的目录

这是我的 application.ini 会话配置：

[http://codepad.org/mJUyipG0](http://codepad.org/mJUyipG0)

顺便说一句，/data 和 /data/session 权限设置为 777

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:58:40.817

检查您的 php.ini`/tmp`似乎是 php 会话保存的默认目录。虽然在我的安装中保存路径行被注释掉了。`;session.save_path = "/tmp"`

您还可以通过转储`Zend_Session::getOptions();`（*它是一种静态方法*）进行调试，以确保您的参数设置正确。

这可能是异常的原因：

> **string save_path** - 正确的值取决于系统，并且应该由开发人员使用**PHP 进程可读写**的目录 的**绝对路径**提供。如果没有提供可写路径，那么 Zend_Session 将在启动时抛出异常（即，当 start() 被调用时）。

 **希望就这么简单，只需提供绝对路径并检查权限即可。

路径中的`..`可能是问题所在。`APPLICATION_PATH "/../data/session"`**

# sql-server - 从 T-Sql 中的字符串中修剪前导 0

> ID：13512229
> 
> 赞同：0
> 
> 时间：2012-11-22T11:52:46.910
> 
> 标签：sql-server, sql-server-2008, tsql

> **可能重复：**
> [从 SQL 语句中的字段中删除前导零](https://stackoverflow.com/questions/92093/removing-leading-zeroes-from-a-field-in-a-sql-statement)

在 SQL Server 2008 数据库中，我有一个字符串列，我需要选择它并删除前导“0”。例如`0023AFF`应该返回为`23AFF`. 这在 T-Sql 中是否可行，如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:59:16.033

采用[`PatIndex`](http://msdn.microsoft.com/en-us/library/ms188395%28v=sql.100%29.aspx)

```
declare @s varchar(20)='0023aff'

select substring(@s,PATINDEX('%[^0]%',@s),LEN(@s)) 
```

# sql - 我可以从 asp.net mvc 中的 SQL 查询中获取未知类型吗？

> ID：13512235
> 
> 赞同：1
> 
> 时间：2012-11-22T11:53:10.147
> 
> 标签：sql, asp.net-mvc

我们必须在 ASP.NET MVC 的 SQL 查询中使用类型吗？

我想得到一个之前没有定义类型的结果。比方说：

```
select TABLE1.X, TABLE2.Y from TABLE1,TABLE2 
```

我怎样才能得到这个查询的结果？和有类`TABLE1`，`TABLE2`但没有结果类。我有必要构造一个适合结果的对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:55:04.100

如果您使用 a`DataReader`您可以根据需要使用每个字段。

```
DataTable dt;
using(SqlDataReader reader = command.ExecuteReader())
{
  dt = new DataTable();
  dt.Load(dr);
} 
```

而且您不必创建任何对象。

# loadrunner - 消息 ID：MERR-26612

> ID：13512243
> 
> 赞同：0
> 
> 时间：2012-11-22T11:53:35.180
> 
> 标签：loadrunner

在 vugen 中重放我的脚本时出现错误：错误 -26612: HTTP Status-Code=500 (Internal Server Error) for "and some url" [MsgId: MER-26612]]

我可以说我们在录制时在 loadrunner vugen 脚本中使用了一个安全字符串，并且这个 url 在登录到 webapp 时会发生变化（我们这样做是为了避免 opensso 问题，它还没有实现） .

谁能告诉我这个错误信息是什么意思？

干杯马格纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:51:47.020

马格努斯，

此错误消息正是它所说的“内部服务器错误”。这是应用程序不喜欢您的查询的问题。我建议您手动执行此操作，然后找出您的 LoadRunner 请求有何不同。

请记住，您只是将 LoadRunner 用作模拟 HTTP 请求的工具。如果您的请求不正确，那么无论是手动还是使用工具，您都会收到此错误。

我建议您花一些时间使用[Firebug](http://getfirebug.com/)、[HTTP Watch](http://www.httpwatch.com/)或[Fiddler](http://www.fiddler2.com/fiddler2/)，看看通过浏览器发出的请求与通过 LoadRunner 发出的请求有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:37:32.663

很简单，您传递的数据要么系统不知道如何处理，要么在给定前一个请求/响应对的上下文中不合适。以下是典型的原因

*   未处理/处理不当 与会话、状态、时间或业务流程数据相关的动态数据
*   不检查每个请求/响应集的预期结果，然后在出现意外响应集时适当地分支代码。无需检查，只要页面本身显示 HTTP 200，即使页面内容完全失焦，业务流程也无法继续，那么脚本将继续到下一页。在这种情况下，您很可能在 next 或 Next ++ 上获得 HTTP 500。

简而言之，除非在负载条件下出现奇怪的情况，否则这一切都与糟糕的脚本开发实践直接相关。

# c# - onselectedindexchanged 在同一项目的下拉列表中仅称为客户端？

> ID：13512249
> 
> 赞同：0
> 
> 时间：2012-11-22T11:53:56.547
> 
> 标签：c#, .net, ajax, updatepanel

我有一个更新面板：

```
<asp:UpdatePanel ID="upAppartiene" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:DropDownList ID="ddAppartiene" runat="server" AutoPostBack="true" onselectedindexchanged="ddAppartiene_SelectedIndexChanged">
            <asp:ListItem Text="---" Value="0"></asp:ListItem>
            <asp:ListItem Text="Value 1" Value="1"></asp:ListItem>
            <asp:ListItem Text="Value 2" Value="2"></asp:ListItem>
        </asp:DropDownList>
    </ContentTemplate>
</asp:UpdatePanel> 
```

当我每次选择不同的值时，一切正常：它调用服务器端的上下文、页面加载和 ddAppartiene_SelectedIndexChanged() 方法。

但是，如果我单击一个值，而不是重新单击相同的值，它会调用服务器（调用页面加载），但不会调用 ddAppartiene_SelectedIndexChanged() 方法。

那么，onselectedindexchanged 在客户端工作，但在服务器端不行？我不这么认为...

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:03:02.103

我只是一个新手，但 onselectedindexchanged 事件不会仅在所选索引实际更改时触发？如果您重新单击相同的值，则不会发生任何变化，因此不会触发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:07:31.847

就像事件名称说“SelectedIndexChanged”一样，索引需要在触发之前更改。当您两次单击同一个项目时，索引仍然与前一个相同，因此没有更改。在这一点上，我认为它只是一个点击而不是改变。

我要避免这种情况实际上是提供一个确定按钮。每当您单击按钮时，始终会选择、更改或不选择所选值。

# memory - 在“杀死 9”的进程上使用地块

> ID：13512252
> 
> 赞同：2
> 
> 时间：2012-11-22T11:54:07.577
> 
> 标签：memory, valgrind, massif

我正在尝试对消耗过多内存并被操作系统（FreeBSD）以 9 信号杀死的程序进行内存分析。这发生在某些特定数据上，因此在另一个（例如较小的）数据集上对其进行分析不会有太大帮助。当程序被杀死时 9 地块根本不会产生任何输出。在这种情况下可以做些什么来获得内存分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:14:24.757

如果你有最新的 Valgrind 版本（>= 3.7.0），Valgrind 有一个嵌入式 gdbserver，因此它可以与 gdb 一起使用。

在您的应用程序开始在 Valgrind 下运行之前，您可以放置​​断点。当遇到断点时，GDB 监视器命令可用于调用 Valgrind 工具的特定功能。例如，使用 Massif，您可以触发生成报告。使用 Memcheck，您可以进行泄漏搜索，检查有效性位，...

也可以从 shell 命令行触发这些监控命令（使用 Valgrind vgdb 实用程序）

# jsf - faces-config.xml 中定义的托管属性解析为 null

> ID：13512253
> 
> 赞同：0
> 
> 时间：2012-11-22T11:54:21.193
> 
> 标签：jsf, faces-config

我正在用 Spring 开发一个 JSF 应用程序。这是我的`faces-config.xml`文件。

```
<managed-bean>
  <managed-bean-name>loginBean</managed-bean-name>
  <managed-bean-class>com.abc.LoginBean</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
    <property-name>userHelper</property-name>
    <property-class>com.abc.MyHelper</property-class>
    <value>#{userHelper}</value>
  </managed-property>
</managed-bean> 
```

在`LoginBean`我有一个属性的 setter 和 getter 方法`userHelper`。但每当我试图访问我的属性`userHelper`时`LoginBean`，我都会得到`null`. 是什么原因，我该如何解决？

下面是堆栈跟踪

```
17:43:54,325 WARNING [lifecycle] #{loginBean.login}: java.lang.NullPointerException
javax.faces.FacesException: #{loginBean.login}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:619)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 27 more
Caused by: java.lang.NullPointerException
    at com.abc.LoginBean.login(LoginBean.java:101)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:170)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 28 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:05:46.007

如果它`#{userHelper}`本身绝对不是`null`，那么只有当你试图在 的**构造函数**中访问它时才会发生这种情况`LoginBean`。对于 JSF（和所有其他依赖注入机制），在调用构造函数*之前*，不可能使用托管属性值调用 setter 。所以属性*总是*在`null`构造函数中。

最早的接入点将是一种`@PostConstruct`方法。

```
@PostConstruct
public void init() { 
    System.out.println(userHelper); // Look, it should not be null.
} 
```

在那里而不是在构造函数中完成所需的工作。

* * *

**与具体问题无关**，托管属性不需要吸气剂。我建议将其删除以防止在视图中意外使用此 getter。

# objective-c - name of the picked image xcode

> ID：13512260
> 
> 赞同：1
> 
> 时间：2012-11-22T11:54:38.543
> 
> 标签：objective-c, ios, xcode, uiimagepickercontroller

I want to get the name of the image picked from the library or newly clicked in -

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

I am using this code:

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        AppDelegate *del = [[UIApplication sharedApplication]delegate];
        [self dismissModalViewControllerAnimated:YES];
        image = [info objectForKey:UIImagePickerControllerOriginalImage];

        NSLog(@"imagekbgfg=====>%@",image);
        [self.imageView setImage:image];

        imgName = [info objectForKey:UIImagePickerControllerOriginalImage];

        del.mainImgName = imgName;
        del.imageData = UIImageJPEGRepresentation(image, 1.0);
        del.imageApp = image;
    }

    if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    {
       image = [info objectForKey:UIImagePickerControllerOriginalImage];
    }
} 
```

How can I do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:05:18.973

Using the code bellow you will get path like:`assets-library://asset/asset.JPG?id=79450962-C0FD-484C-808B-83E045F40972&ext=JPG` when your picking image from photo album. This path is valid. It contains the asset ID and asset type.

```
// Firstly get the picked image's file URL.
NSURL *imageFileURL = [info objectForKey:UIImagePickerControllerReferenceURL];

// Then get the file name.
NSString *imageName = [imageFileURL lastPathComponent];
NSLog(@"image name is %@", imageName); 
```

If you want to get image user picked again using the path you get using `UIImagePickerController`.(Here maybe you want to save the path so that you can read that image back without asking user to pick that image again) You will need the `ALAssetsLibrary` otherwise you don't need it.

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
__block UIImage *returnValue = nil;
[library assetForURL:imageFileURL resultBlock:^(ALAsset *asset) {
    returnValue = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]];
} failureBlock:^(NSError *error) {
    NSLog(@"error : %@", error);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:07:34.790

Take a look at the UIImagePickerControllerDelegate Protocol. The string **UIImagePickerControllerReferenceURL** contains an URL of your file. You could use it to construct the filename from it.

Other than that there seems to be no built-in way to get the file name from an UIImage or UIImageView object.

Reference: [Stackoverflow answer](https://stackoverflow.com/questions/8242935/how-to-obtain-the-original-file-name-of-the-image-picked-by-uiimagepickercontrol)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T06:37:09.757

You can get the file name using below code:

```
NSURL *assetURL = [imageDic objectForKey:UIImagePickerControllerReferenceURL];

 __block NSString *originalFileName = nil;

 ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
 [library assetForURL:assetURL resultBlock:^(ALAsset *asset){
             originalFileName = [[asset defaultRepresentation] filename];
} 
```

originalFileName give the original file name of resource.

# mysql - 将此 MySQL 转换为 Sybase

> ID：13512262
> 
> 赞同：0
> 
> 时间：2012-11-22T11:54:44.547
> 
> 标签：mysql, sql, sap-ase

我有以下 MySQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when perm = ''',
      perm,
      ''' then 1 else 0 end) AS ',
      perm
    )
  ) INTO @sql
FROM perms;

SET @sql = CONCAT('SELECT role, ', @sql, ' 
                  FROM perms 
                   GROUP BY role');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

但是，我必须使用 Sybase 12，有人知道如何转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:59:07.477

试试这个：

```
declare cur_perm cursor for 
select perm from perms
go
declare @sql  varchar(4000) 
declare @perm varchar(4000) 

set @sql = ' '

open cur_perm
fetch cur_perm into @perm
while @@sqlstatus=0 begin
  select @sql = @sql+'sum(case when perm = '''+@perm+''' then 1 else 0 end) AS '''+@perm+''', '
  fetch cur_perm into @perm
end
close cur_perm
deallocate cursor cur_perm

select @sql = 'SELECT '+ @sql+' role 
                  FROM perms 
                   GROUP BY role'

exec(@sql) 
```

# django - Django 在多租户数据库上运行迁移

> ID：13512270
> 
> 赞同：0
> 
> 时间：2012-11-22T11:55:23.647
> 
> 标签：django, django-south, multi-tenant, database-migration

在具有一些自制（但接近可用的插件方法）多租户实现的 Django 应用程序上，我想使用 South 运行可以应用于所有模式的迁移（这次是一个简单的 add_column）。我有一个非常接近[这个](https://stackoverflow.com/a/7194998/1504046)的配置。

如果可能，我想跳过任何纯 SQL 查询。我可以正确地从 ORM 中获取模式名称列表，但是我想知道我是否有可能以某种适当的方式从各种模式中访问表。

我有一个钩子可以在某种程度上通过参数更改 DB_HOST 和 DB_SCHEMA，但我认为在 South 的前向迁移方法中不能以这种方式干净地循环。

这个问题相当高级，但我主要想知道是否有人必须面对同样的问题，我很想知道是否有一些聪明的方法来处理它！

问候， 马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:29:54.170

这是一个解决方案的大纲，发布在 South 邮件列表中。措辞的问题与列表中发布的问题略有不同：在那里，还提到了在单独的模式中在所有租户之间共享的“公共”表。Rmatt 自己的回答将此称为*公共*模式。

我的解决方案的基本思想：在架构中保存每个数据库（架构）的迁移历史记录。为此，我们需要使用一些数据库和 Django 技巧。

这意味着公共架构上应用程序迁移的历史记录保存在公共架构中，而租户应用程序迁移的历史记录保存在租户架构中——有效地对迁移历史表进行分片。Django 并不真正支持这种分片；按实例内容设置写入很容易，但无法设置读取。

所以我建议为每个租户创建一个“租户助手”模式，其中包含一个名为的视图，`south_migrationhistory`它是`south_migrationhistory`来自公共模式和租户模式的表的联合。然后，为 South MigrationHistory 模型设置一个数据库路由器，指示它：

*   同步到公共和租户模式
*   总是从租户助手模式中读取
*   根据迁移所属的应用程序写入公共或租户架构

结果允许正确处理从租户应用程序迁移到公共应用程序迁移的依赖关系；这意味着您需要做的所有事情，向前迁移，就是循环`migrate --all`（或`syncdb --migrate`）命令——无需伪造向后迁移。公共模式的迁移将与循环中第一个租户的迁移一起运行，所有其他租户将“看到”它们。

作为事后的想法，也有可能在没有帮助模式的情况下执行此操作 - 通过重命名`south_migrationhistory`租户模式中的表，并在模式中安装具有该名称的视图，该视图在查询时返回上述联合，并且具有“而不是插入”触发器写入重命名的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:28:04.040

好吧，似乎没有多少人有经验或关心这个非常具体的问题。我在这里和那里尝试了一些东西，我还从南方邮件列表中获得了一些支持，帮助我理解了一些观点。

基本上，我实施的解决方案如下：

我有一个通过 South 的*schemamigration*自动生成的非常正常的迁移文件。**但我已将add_column**和**delete_column**的表名更改为`schema.table_name`. 通过导入多租户中间件提供模式。

仅当架构未针对*公共*架构运行时，才会应用迁移。它实际上并不意味着独立运行，或者仅与数据库和模式 kwargs 一起运行，而是来自一个新的 django 命令的迁移运行器。

不幸的是，跑步者不得不在外部调用迁移，以便每次再次通过中间件。另一个技巧是我们必须获取先前的迁移状态，以便在每次租户迁移后将其**伪造**回南部的先前状态。

这是我的片段：

```
from subprocess import call
import os
from django.core.management.base import BaseCommand    
from south.models import MigrationHistory
from myapp.models import MyModel

class Command(BaseCommand):

    def handle(self, *args, **options):
        #the only allowed arg is the prefix version and it should have a length of 4 (i.e. 0002)
        applied = MigrationHistory.objects.filter(app_name='myapp').latest('applied')
        current_version = applied.migration[:4]
        call_args = ['python', os.path.join('bin', 'manage.py'), 'migrate', 'myorderbird.app.backups']
        if len(args) == 1 and len(args[0]) == 4:
            call_args.append(args[0])

        obje_call_args = None
        for obje in MyModel.objects.all():
            if obje.schema_exists:
                # fake the migration of the previous venue back to the current version
                if obje_call_args:
                    obje_call_args = obje_call_args[:4] + [current_version, '--fake'] + obje_call_args[len(obje_call_args)-3:]
                    call(obje_call_args)
                # migrate the venue in the loop
                obje_call_args = list(call_args)
                obje_call_args.extend(['--database={}'.format(obje.db), '--schema={}'.format(obje.schema)])
                call(venue_call_args) 
```

# c# - 在服务器上搜索文件名

> ID：13512274
> 
> 赞同：2
> 
> 时间：2012-11-22T11:55:39.197
> 
> 标签：c#, asp.net, .net

我正在创建一个网站，可以在其中上传 Excel 文件并从中提取数据。在我的代码中，我将 excel 文件上传到服务器上的**Uploade**文件夹中的应用程序，并从中提取数据。

我将文件名重命名为带有日期和时间的字符串，所以我删除了与我得到的字符串不匹配的文件，`DateTime.Now`因为我不想用 excel 文件填充我的服务器。

所以我想检查我服务器上**Uploade**文件夹中的现有文件，如果有旧的 excel 文件，我想删除它们。

如何从我的服务器获取文件夹内容？

我的代码：

```
protected void uploadButton_Click(object sender, EventArgs e)
{
    if (fileUpload.HasFile)
    {
        string fileuploaded = Server.MapPath("Upload") + "\\" + DateTime.Now.ToString("yyyyMMddHHmmss") + "excel" + Path.GetExtension(fileUpload.FileName);
        fileUpload.SaveAs(fileuploaded);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:02:27.970

```
string folder = Server.MapPath("Upload");
foreach (var item in Directory.GetFiles(folder))
{
    FileInfo fi = new FileInfo(item);
    DateTime creationDate = fi.CreationTime;
    //TODO: check creation date and delete files you want...

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:09:40.533

您可以为此使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/ms143316.aspx)方法：

```
string folder = Server.MapPath("Upload");
foreach (var filePath in Directory.GetFiles(folder, "*excel*"), SearchOption.TopDirectoryOnly)
{
    FileInfo fi = new FileInfo(filePath);
    if ((DateTime.Now - fi.CreationTime).TotalDays > 30)
    {
        File.Delete(filePath);
    }
} 
```

您还可以使用[DateTime.ParseExact()](http://msdn.microsoft.com/en-us/library/7ee1y0t7.aspx)从文件名中解析创建日期。

# android - Android 应用中的 CC BY-SA 3.0 归因

> ID：13512275
> 
> 赞同：6
> 
> 时间：2012-11-22T11:55:39.977
> 
> 标签：android, api, licensing, wiktionary

我正在开发一个使用[Wiktionary API](http://en.wiktionary.org/w/api.php)从 Wiktionary 检索一些文章的移动应用程序。此应用程序将商业化。我读过维基词典资料可在[Creative Commons Attribution-ShareAlike 3.0 Unported License 下获得](http://creativecommons.org/licenses/by-sa/3.0/)。我还阅读了维基词典中的下一条声明：

> 请注意，这些许可**确实允许将**您的贡献用于商业用途，只要此类用途符合条款。

所以我的问题是：我究竟如何在我的应用程序中实施“CC BY-SA 3.0”许可证？我的意思是：我应该在我的应用程序中放入什么（链接、名称或其他内容）和位置（弹出窗口或菜单项）以满足此许可证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:52:01.120

实际上，CC 上有非商业许可，例如[Attribution-NonCommercial-ShareAlike 3.0 Unported (CC BY-NC-SA 3.0)](http://creativecommons.org/licenses/by-nc-sa/3.0/)，它有额外的非商业限制。所以，我认为在商业上使用[CC BY-SA 3.0](http://creativecommons.org/licenses/by-sa/3.0/)材料是安全的。

要实现它，您只需按照要求进行操作：

*   署名：您必须以作者或许可人指定的方式对作品进行署名（但不得以任何方式表明他们认可您或您对作品的使用）。

*   以相同方式共享：如果您更改、转换或构建本作品，您只能在与本作品相同或相似的许可下分发生成的作品。

或者更容易理解的是，状态

*   您应用程序中的材料来自哪里（即维基词典），以及

*   共享材料的许可证（即 CC BY-SA）

# ruby-on-rails - 通过套接字将字符串从客户端发送到服务器

> ID：13512276
> 
> 赞同：1
> 
> 时间：2012-11-22T11:55:39.997
> 
> 标签：ruby-on-rails, sockets

我想通过套接字将字符串从客户端发送到服务器。我尝试了三种方式（写入、放置和打印）

```
hostname = 'localhost'
port = 3000
s = TCPSocket.new(hostname, port)

s.write("hello")
s.puts("hello")
s.print("hello")

s.close 
```

但它给了我一个错误（错误没有出现在浏览器上，而是出现在终端上） `ERROR bad Request-Line 'hello'`：。

是否可以将字符串从客户端发送到服务器，还是仅从服务器发送到客户端？

我正在使用 Ruby 1.8.7 和 Rails 3.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:05:25.347

看起来服务器不喜欢你的`Hello`线路。你提到 Ruby 和 Rails，我猜你想和`WEBrick`HTTP 服务器对话——那你为什么不说 HTTP 呢？

如果要实现 HTTP 客户端，请查看[http://www.tutorialspoint.com/ruby/ruby_socket_programming.htm](http://www.tutorialspoint.com/ruby/ruby_socket_programming.htm)

在`A Tiny Web Browser`部分下，您将找到一个使用的 HTTP 客户端`TCPSocket`，以及[Net::HTTP](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/index.html)示例。

如果 HTTP 是您所需要的，`Net::HTTP`那么就是要走的路，那么实现 HTTP 听起来就像是在重新发明轮子。

# orchardcms - 如何从 Orchard 的命令行设置小部件上 ContentPartRecord 的值？

> ID：13512283
> 
> 赞同：1
> 
> 时间：2012-11-22T11:56:09.040
> 
> 标签：orchardcms

我在 Orchard CMS 中创建了一个自定义模块。该模块包含几个小部件。其中一个小部件（我们称之为WinnersFeedWidget）包含几个自定义的Contant Part Records（我们称之为NumberOfWinnersToShow 和SkinName）。

我可以使用以下命令将 WinnersFeedWidget 添加到区域

```
widget create WinnersFeedWidget /Title:"Recent Winners" /Zone:"AsideSecond" /Position:"2" /Layer:"Default" /Identity:"WinnersContainerWidget" /RenderTitle:true 
```

但我也希望能够从命令行设置 NumberOfWinnersToShow 和 SkinName 的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:37:39.753

为了任何寻求此问题答案的人的利益-

因为我正在创建一个配方，所以我可以通过将以下 XML 添加到配方的元素中来实现相同的效果：

```
<WinnersFeedWidget Id="/Identifier=WinnersFeed" Status="Published">
  <WinnersFeedPart NumberOfWinnersToShow="15" SkinName="Blue"/>
  <CommonPart Owner="/User.UserName=OrchardAdmin" Container="/Layer.LayerName=Default" CreatedUtc="2012-11-20T17:08:00Z" PublishedUtc="2012-11-20T17:08:00Z" ModifiedUtc="2012-11-20T17:08:00Z" />
  <WidgetPart Title="Recent Winners" Position="2" Zone="AsideSecond" RenderTitle="true" />
</WinnersFeedWidget> 
```

在本例中，WinnersFeedPart 是小部件上部件的名称。

我还必须使用导入和导出的覆盖来更新我的驱动程序类（以允许导出功能能够正确生成所需的 XML）：

```
 protected override void Exporting(WinnersFeedPart part, ExportContentContext context)
    {
        context.Element(part.PartDefinition.Name).SetAttributeValue("NumberOfWinnersToShow", part.NumberOfWinnersToShow);
        context.Element(part.PartDefinition.Name).SetAttributeValue("SkinName", part.SkinName);
    }

    protected override void Importing(WinnersFeedPart part, ImportContentContext context)
    {
        part.NumberOfWinnersToShow= GetIntegerValue(part, context, "NumberOfWinnersToShow");
        part.SkinName= context.Attribute(part.PartDefinition.Name, "SkinName");
    } 
```

（GetIntegerValue 是一个辅助方法，将导入器提供的值转换为 int）

对于这个工作的一个很好的例子，我建议从 Gallery 下载 Featured Item Slider 模块，并查看他们的 Driver 类。

# iphone - corona sdk iphone 4s 5.1.1 没有声音

> ID：13512284
> 
> 赞同：1
> 
> 时间：2012-11-22T11:56:15.983
> 
> 标签：iphone, coronasdk

我在 iphone 4s 5.1.1 上的应用程序中没有声音

从示例代码中测试了我的应用程序 + 2 个（未修改）示例

即使我发送通知 - 我得到振动（如果有声音） - 没有声音我没有得到振动，但在这两种情况下声音都不会播放。不是通知不在应用程序中

帮助！

我尝试使用 Glitched Games 的 ggmusic 和 ggsound 库。两个女巫都实现了新的音频 api。

这是一些代码，所以我符合质量标准

local supportedAudio = { ["Simulator"] = { extensions = { ".aac", ".aif", ".caf", ".wav", ".mp3", ".ogg" } }, ["IOS" ] = { extensions = { ".aac", ".aif", ".caf", ".wav", ".mp3" } }, ["Android"] = { extensions = { ".wav", ". mp3", ".ogg" } }, }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:44:57.710

好的，问题是 - 你应该检查右侧关闭声音的开关。您的媒体播放将通过扬声器播放，但声音不会。打开声音并修复它。我是跛脚的苹果用户。

干杯!

# entity-framework - 如何将这个 F# 代码改进为更惯用？

> ID：13512285
> 
> 赞同：4
> 
> 时间：2012-11-22T11:56:20.100
> 
> 标签：entity-framework, f#, windows-services, functional-programming

我有一个 Windows 服务，它使用 Entity Framework 5 从数据库中的队列中读取电子邮件，然后使用 System.Net.Mail.SmtpClient 将它们发送到 SMTP 服务器

这是我第一次尝试编写 F# 应用程序，我来自 C# 背景。如何改进它以提供更多功能和/或更充分地利用 F# 的特性？你能解释一下做出这些改变有什么好处吗？

worker 由服务宿主构建，服务启动时调用它的工作函数，服务停止时将 ContinueWorking 设置为 false。

```
namespace EmailService

open log4net

open System
open System.Linq
open System.Net.Mail

open EmailService.Context

type Worker(contextFactory: EmailContextFactory, mailClient: ISmtpClient, logger: ILog) =

    let MapToMessage(email : Email) =
        let message = new MailMessage()
        message.Sender <- new MailAddress(email.From)
        message.From <- new MailAddress(email.From)
        message.Subject <- email.Subject
        message.Body <- email.Body
        message.IsBodyHtml <- email.IsBodyHtml
        message.To.Add(email.To)
        (email, message)

    member val ContinueWorking = true with get, set
    member this.Work() = 
        logger.Info "Starting work"

        let mutable unsentEmails = Array.empty<Email>
        while this.ContinueWorking do

            use context = contextFactory.GetEntities()
            while this.ContinueWorking && Array.isEmpty unsentEmails do
                System.Threading.Thread.Sleep(1000)
                unsentEmails <- query { for q in context.QueueItems do
                                           where (q.Error = null)
                                           select q.Email }
                                |> query.Take(10)
                                |> query.toArray

            Array.map MapToMessage unsentEmails
                |> Array.iter (fun (email, message) -> 
                    try
                        mailClient.SendMail(message)
                        email.DateSent <- new Nullable<DateTime>(DateTime.UtcNow)
                        context.QueueItems.Remove(email.QueueItem) |> ignore
                    with
                        | ex -> 
                            logger.Error(ex)
                            email.QueueItem.Error <- ex.ToString())

            context.SaveChanges() |> ignore
            logger.Info (sprintf "Sent %d emails" unsentEmails.Length)

        logger.Info "Work complete" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T12:54:53.643

该`Work`方法创建了一个最终需要停止的长时间运行的进程。在 F# 中表示这一点的更好方法是使用异步工作流 - 可以在不阻塞线程的情况下暂停异步工作流（因此您不需要`Thread.Sleep`），并且可以使用`CancellationToken`.

否则，您的代码对我来说看起来不错。我做了一些小的改动（比如`take`在 F# 查询语法中的使用，这是一个不错的小功能）。

我也不太明白为什么你的代码有两个嵌套`while`循环。那有必要吗？如果不是，我认为您可以编写如下内容：

```
member this.Work() = async {
    logger.Info "Starting work"
    while true do
        do! Async.Sleep(1000)
        use context = contextFactory.GetEntities()
        let unsentEmails =
          query { for q in context.QueueItems do
                  where (q.Error = null)
                  select q.Email 
                  take 10 }
        unsentEmails
        |> Array.map MapToMessage 
        |> Array.iter (fun (email, message) -> 
                try
                    mailClient.SendMail(message)
                    email.DateSent <- new Nullable<DateTime>(DateTime.UtcNow)
                    context.QueueItems.Remove(email.QueueItem) |> ignore
                with ex ->
                     logger.Error(ex)
                     email.QueueItem.Error <- ex.ToString())
        context.SaveChanges() |> ignore
        logger.Info (sprintf "Sent %d emails" unsentEmails.Length)
    logger.Info "Work complete" } 
```

要启动该过程（并稍后停止），您可以编写如下内容：

```
// Start the work
let cts = new CancellationTokenSource()
Async.Start(worker.Work(), cts.Token)

// Stop the worker
cts.Cancel() 
```

# php - 使用 jquery 和 php 进行页面转换

> ID：13512287
> 
> 赞同：0
> 
> 时间：2012-11-22T11:56:24.460
> 
> 标签：php, javascript, jquery

我正在使用 php 开发应用程序，并且正在使用类似的东西来更改页面

```
<?php
            if (!isset($_GET["p"])){
                $p = 'home';
            } else{
                $p = $_GET["p"];
            }
            include "$p.php";
?> 
```

我想知道的是，当我更改页面时，是否有办法使用 JQuery 放置一些效果

诸如加载图标之类的东西或使浏览器在从一个页面转到另一个页面时不显示该白页的任何东西，您能理解我想要什么吗？

起初我使用隐藏`divs`和显示/隐藏，但这通常会使其中的 JQuery 效果`divs`变得一团糟，所以我改为`php include`.

我需要的是人们不会觉得离开页面去接触另一个页面，我希望他们觉得他们只是在改变内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:05:31.967

在此处阅读有关标准页面过渡效果的信息：http: [//www.boogiejack.com/transition_effects.html](http://www.boogiejack.com/transition_effects.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:02:07.440

如果您只是为每个页面创建链接，我认为这是不可能的。

您可以做的是通过 ajax 进行页面更改。像这样的东西：

```
<body>
  <div id="content"></div>
</body>

$("#home").click(function() {
  $.ajax("index.php?p=home")
    .done(function(pageHtml) {
      $("#content").html(pageHtml);
    });
}); 
```

到主页的链接具有`id="home"`并替换`$("#content").html(pageHtml);`为效果的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:15:44.783

使用 ajax 加载页面并使用 jquery 产生效果。这可以满足您的要求。

```
<script>
$("#home").click(function() {
  $.ajax("index.php?p=home").done(function(pageHtml) {
      $("#body").html();
    });
});
</script>
<body id="body">
  <a id="home">Home</a>
</body> 
```

# android - 为 Android 构建 Botan 库

> ID：13512294
> 
> 赞同：2
> 
> 时间：2012-11-22T11:56:49.917
> 
> 标签：android, security, botan

如何为 Android构建密码库**Botan ？**我正在使用 M`ac OS 10.7`和`Eclipse IDE`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:01:49.413

请看一下[http://marc.info/?l=botan-devel&m=132094503031485](http://marc.info/?l=botan-devel&m=132094503031485)。其中描述了 botan_all.cpp/botan_all.h 是什么以及如何生成它们。本质上，它们在一个文件中包含了 Botan 库的所有功能。它们可以通过运行来创建： ./configure.py --cpu=arm --gen-amalgamation

在下一步中，[当使用 JNI 访问我的共享库时，根据“未定义的引用”调整 Android.mk 的设置](https://stackoverflow.com/questions/5205886/undefined-reference-when-accessing-my-shared-library-using-jni)

我不确定从那以后程序是否发生了变化。但是，我希望这对您有所帮助！

# android - 打开 Android 数据库时出错

> ID：13512295
> 
> 赞同：0
> 
> 时间：2012-11-22T11:56:57.593
> 
> 标签：android, sqlite

我正在创建一个 Android 应用程序。我放了一个按钮来创建数据库，当我第二次尝试按下同一个按钮打开数据库时出现错误

> “故障1（表列表已存在）”

这是按钮的代码：

```
public void onClick(View arg0) {
                // TODO Auto-generated method stub

                try{
                    SQLiteDatabase ldb = openOrCreateDatabase(dbName, Context.MODE_PRIVATE, null);
                    ldb.execSQL(TableStructure);
                    ContentValues cv = new ContentValues();
                    cv.put("task", text);
                    cv.put("checkbox", 1);
                    ldb.insert(tableName, null, cv);
                    ldb.close();
                }catch(Exception e){
                    Toast.makeText(List.this, "Failed", Toast.LENGTH_LONG).show();
                }

                    Intent in = new Intent(List.this, DsTest2Activity.class);
                    startActivity(in);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:00:56.457

你没有把整个代码，但我假设`TableStructure`是`String`用一个 SQL 语句来创建表。正如错误已经告诉你的那样：

```
table List already exists 
```

表已由先前执行此方法创建。

您首先需要检查数据库是否已经创建，只有在没有创建时才执行创建 SQL 语句。或者正如*user1810737*正确建议的那样，使用`CREATE TABLE IF NOT EXISTS`而不是普通的`CREATE TABLE`

# windows-phone-7 - 在主机上使用无线适配器时无法将 Windows Phone 模拟器连接到 Internet

> ID：13512298
> 
> 赞同：5
> 
> 时间：2012-11-22T11:57:10.957
> 
> 标签：windows-phone-7, emulation

我正在使用 VS2012 在带有 Win8 pro 的戴尔 XPS 15 笔记本电脑上开发 Windows Phone 应用程序。我在这里阅读了很多故障排除文章（特别是[Windows Phone 8 模拟器无法连接到互联网](https://stackoverflow.com/questions/13159947/windows-phone-8-emulator-cant-connect-to-the-internet)）和网络上的其他地方并没有设法解决了这个问题（见主题）。请注意，我的笔记本电脑在两个适配器（无线和有线）上都使用 DHCP 成功获取了 IP，并且路由器上没有设置 MAC 过滤。这是故事：

1）**不起作用：**启动WP模拟器时，它没有从路由器（DHCP）获取IP

2）**作品：**

*   重新开始（在 Hyper-v 中删除虚拟交换机和机器）
*   禁用无线适配器
*   用电缆将有线适配器连接到路由器
*   启动模拟器（它创建机器和开关）
*   获取 IP 并且可以访问 Internet

3）**不工作：**

*   重新开始（在 Hyper-v 中删除虚拟交换机和机器）
*   禁用有线适配器 - Windows 控制面板显示：蓝牙和无线启用和有线禁用 - 没有其他
*   启动模拟器（它创建机器和开关）
*   结果：
*   a) 路由器日志显示“DHCP 服务器收到请求”</li>
*   b) 在我看到的主机上 (ipconfig) 虚拟交换机获取 IP (vEthernet (Intel(R) Centrino(R) Wireless-N 1030 Virtual Switch)) – 它在虚拟机设置中选择为“Windows Phone Emulator External”
*   c) 在“其他工具”窗口的仿真器网络选项卡中，我看到默认 IP 169 的适配器。*

3)**部分有效：**

*   删除虚拟交换机
*   禁用有线适配器 - Windows 控制面板显示：蓝牙和无线启用和有线禁用 - 没有其他
*   在hyper-v中创建名为“Windows Phone Emulator Internal Switch”的内部开关，并在虚拟机的内部网络适配器中选择它
*   在无线适配器中启用共享（在控制面板中）
*   使用 xde.exe 以独立方式启动模拟器（从 VS 开始将不会使用已部署的应用程序的正确快照）并且不允许它连接到网络 - 加载需要更多时间，之后，操作系统正在加载并且模拟器显示错误对话框“一些功能可能会禁用”</li>
*   可以在 Internet 上使用模拟器，但设备按钮不起作用 - 使用键盘快捷键（[http://devatheart.azurewebsites.net/2011/06/04/windows-phone-7-emulator-and-physical-keyboard-shortcuts /](http://devatheart.azurewebsites.net/2011/06/04/windows-phone-7-emulator-and-physical-keyboard-shortcuts/) )
*   它不能用于调试——它只适用于在公共场合展示应用程序；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T15:00:23.740

您已经回答了您的问题，但这可能会有所帮助。在 CMD 中使用 netsh 与您的无线网络主机连接无线连接。另一种方法是创建一个内部交换机，与您的局域网适配器共享您的连接，您也可以使用 connectify 来做到这一点。现在，您的 PC 应该显示您已连接到无线和局域网。从visual studio运行模拟器，你就可以连接了。

# vb.net - VB 聊天界面 - 显示用户

> ID：13512299
> 
> 赞同：1
> 
> 时间：2012-11-22T11:57:15.543
> 
> 标签：vb.net

我是 Visual Basic 的新手，正在尝试为聊天界面开发一个好的 gui。我可以理解这种语言，因为我很长一段时间以来一直在使用 php 和 java。

**要求**

基本上我正在尝试开发一个界面，该界面将显示用户列表并显示状态（在线/离线）。我的用户将驻留在 mysql 数据库中。单击用户时，我希望发生一些操作。

**问题**

我看到有数据网格、列表视图、列表框，但不确定要使用哪一个。通过直接查询 mysql 数据库或访问运行少量查询并提供数据的 php 脚本来显示用户也是一个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:18:20.957

ListBox 控件不是一个很好的选择，因为它不容易支持多列。详细信息视图中的 ListView 控件是一个不错的选择。我认为它看起来和工作起来都比 DataGrid 更好，但它本身并不支持多行项目。如果您需要多行项目，DataGrid 控件可能是您的最佳选择。另一个可以为您提供更大灵活性的选项是使用 LayoutPanel 控件来显示您自己的 UserControl 的垂直列表。您可以根据需要设计 UserControl，这意味着您可以完全控制列表中每个项目的大小、外观和布局，而不受列表控件的限制。

至于获取数据，这取决于。如果数据库始终在 LAN 上并且性能很重要，那么每个客户端都应该直接访问数据库。否则，从 php 脚本、Web 服务或 WCF 服务获取数据将是更好的选择。

与其使用 TableLayoutPanel，我建议使用 FlowLayoutPanel 并将 FlowDirection 属性设置为 TopDown 并将 AutoScroll 属性设置为 True。然后，要动态添加控件，您可以执行以下操作：

```
Dim item As New MyUserControl()
' Set properties of user control
FlowLayouPanel1.Controls.Add(item) 
```

# json - Json动态字符串列表

> ID：13512303
> 
> 赞同：0
> 
> 时间：2012-11-22T11:57:43.720
> 
> 标签：json, serialization, asp.net-mvc-4

我想将验证错误列表从我的 mvc 应用程序返回到客户端，以便我可以使用[jquery 验证 showError](http://docs.jquery.com/Plugins/Validation/Validator/showErrors) s，它需要一个对象

我可以以最适合的任何方式获取字段列表和适用于它们的错误。

我已经尝试了几种格式，字典和这些格式都没有按照验证库的要求序列化为正确的结构。

IE。

```
{"fieldname":"some error for fieldname", "fieldname2": "some error for fieldname2"} 
```

我所有的例子似乎都变成了类似的东西

```
{"Key": "fieldname", "Value" : "some error for fieldname"} 
```

返回数据的最佳方式是什么？如何以我需要的正确方式对其进行序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:27:18.673

我建议您使用[Json.NET](http://json.codeplex.com/)（它也是 ASP.NET MVC 4 的默认 JSON 序列化程序）及其`JsonWriter`：

```
StringWriter errorsStringWriter = new StringWriter();
JsonWriter errorsJsonWriter = new JsonWriter(jsonStringWriter);
errorsJsonWriter.WriteStartObject();
errorsJsonWriter.WritePropertyName("fieldname"); 
errorsJsonWriter.WriteValue("some error for fieldname");
errorsJsonWriter.WritePropertyName("fieldname2"); 
errorsJsonWriter.WriteValue("some error for fieldname2");
...
errorsJsonWriter.WriteEndObject();
errorsJsonWriter.Flush(); 
```

您可以使用以下方式返回以这种方式生成的 JSON `ContentResult`：

```
return Content(errorsStringWriter.GetStringBuilder().ToString(), "application/json"); 
```

**更新**

[Json.NET](http://json.codeplex.com/)还通过`JObject`. 在这种情况下，您的代码可能如下所示：

```
var jsonObject = new JObject();
jsonObject.Add("fieldname", "some error for fieldname");
jsonObject.Add("fieldname2", "some error for fieldname2");
... 
```

在这种情况下创建`ContentResult`可能如下所示：

```
 return Content(jsonObject.ToString(Newtonsoft.Json.Formatting.None), "application/json"); 
```

# php - PHP 两个系统日志；

> ID：13512305
> 
> 赞同：1
> 
> 时间：2012-11-22T11:57:48.283
> 
> 标签：php, apache, xampp, error-logging, syslog

我正在尝试使用这样的功能做一个功能：
我有一个自定义错误处理程序，但我想将它设置为与默认服务器合作`syslogger`。我正在使用`Xampp`.
所以我需要同时向两个发送数据`syslogs`。
有可能`PHP`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:08:04.417

由于缺少传递给 syslog() 的日志句柄，您必须对[openlog()和打开/关闭日志之间的每个切换使用不同的工具](http://php.net/manual/en/function.openlog.php)

# c++ - 使用 C++ 无均值和标准差的高斯分布

> ID：13512306
> 
> 赞同：0
> 
> 时间：2012-11-22T11:57:51.430
> 
> 标签：c++, random, normal-distribution

我已经统一生成了随机数。现在我想使用高斯（正态）分布生成随机数。我不知道平均值和标准差。我读过这篇文章：[http](http://www.johndcook.com/cpp_TR1_random.html#normal) ://www.johndcook.com/cpp_TR1_random.html#normal ，但它需要一个平均值和标准差！我也知道 Box-Muller 变换是常用的。这正确地产生具有正态分布的值。但同样我不知道平均值和标准偏差。请不要提升。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:12:20.007

当您生成均匀分布（在一个段中）的随机数时，您需要两个参数：段的下边界和段的上边界。通常，它们分别为 0 和 1，因此您可以从`[0..1]`范围中获取数字。

现在，要生成正态分布的数字，您还需要两个参数：均值和标准差。然而，它们有不同的含义。平均值是您生成的数字将围绕的一个数字：如果您指定 15，您可能会看到 11、17、13、21、9、12、14、11 等，但（通常）不是 290或-562。标准差（sigma）基本上决定了生成的数字可能偏离平均值多远。严格来说，可能会产生任何数量级：即使您指定平均值 0 和 sigma `1e-6`，您仍然可能得到 1000 - 但不太可能。

根据经验，几乎所有生成的数字都在`[mean - 3 * sigma .. mean + 3 * sigma]`范围内，我敢打赌，你不会`[mean - 5 * sigma .. mean + 5 * sigma]`在生活中看到超出范围的任何东西。

有一个“标准”正态分布的概念：mean = 0，sigma = 1。这意味着您将获得大部分`[-3..3]`范围内的数字。

我希望它有所帮助！

# ruby-on-rails - 在控制器 RoR 中定义类型

> ID：13512307
> 
> 赞同：0
> 
> 时间：2012-11-22T11:57:52.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, object, controller

我试图为我的控制器找到一种方法来定义一个对象，因为`@jobs`只有当作业类型等于“创意”时——一旦我正确定义了这个，我就应该能够在我的视图中调用 @jobs 的实例。

目前我有

```
def creative
  @creative = Job.where(params[:type] == 'creative')
  @jobs = @creative.where('created_at > ?', 30.days.ago).reverse
end 
```

我确信对此有一个非常简单快捷的答案，但我似乎找不到正确的方法来定义它。

任何帮助真的将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:05:08.160

也许您想在模型中定义一个范围：

```
class Job < ...
  scope :creative, where(type: 'creative')
end 
```

然后在你的控制器中：

```
@jobs = Job.creative.where(...) 
```

# android - 如何在listview中获取膨胀xml的元素ID？

> ID：13512313
> 
> 赞同：1
> 
> 时间：2012-11-22T11:58:26.790
> 
> 标签：android

我有一个自定义列表视图。我想获取特定行中使用的小部件的 ID。因为我想在文本视图单击上设置值，该值存在于同一个 xml 中。

如何获取特定行的元素ID

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:06:04.937

请参阅答案：[如何获取列表视图选定行的小部件 ID](https://stackoverflow.com/questions/13513596/how-to-get-widget-ids-of-selected-row-of-listview#comment18497991_13513596)

当您想在同一行中获取 textview 时，您可以执行以下操作。

使用单击的文本视图获取其父视图，然后使用父视图，您可以搜索您的文本视图：

```
View parent = (View) textViewThatWasClicked.getParent();
        if (parent != null) {
            TextView textViewThatYouWantToChange = parent.findViewById(R.id.textViewThatYouWantToChange);
            textViewThatYouWantToChange.setText(...);
        } 
```

您需要将要查找的 id 更改为其他 textview 的 id。如果您需要设置一个 id，您可以在您使用的 xml 布局文件中执行此操作。

我不能很好地遵循你的代码来实际给你代码，但这应该足以让你朝着正确的方向前进。

# powershell - 如何使用变量作为 Get-Content 的部分路径名？

> ID：13512316
> 
> 赞同：2
> 
> 时间：2012-11-22T11:58:45.563
> 
> 标签：powershell

如何将 UNC 路径 $data 变量用作 Get-Content 路径的一部分？

```
$data = "\\MyServer\MyShare"
$OU = Get-Content $data + "ou.txt"
$OU 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:01:25.007

尝试

```
$data = "\\MyServer\MyShare"
$OU = Get-Content ( JOIN-PATH $data  "ou.txt" ) 
```

# iphone - iPhone应用程序中的视图是否有限制？

> ID：13512318
> 
> 赞同：-8
> 
> 时间：2012-11-22T11:58:56.903
> 
> 标签：iphone, ios, xcode

标题说明了一切。

我有观看次数限制吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:15:25.360

在问这些类型的问题之前阅读一些文档。

无论如何，iphone 应用程序不受其中页面/视图/控件数量的限制。

但该应用程序受到 2GB 大小的限制。而且大小超过 50MB 的应用程序也不会通过蜂窝网络下载

# jquery - jQuery Datatables 在列上搜索失败

> ID：13512320
> 
> 赞同：1
> 
> 时间：2012-11-22T11:59:01.203
> 
> 标签：jquery, datatables

我有一个使用 jQuery Datatables 的网站（http://datatables.net/）

除了搜索其中一列之外，一切都在工作。我没有对这个专栏做任何具体的事情，所以它应该可以正常工作，不是吗？

这是我正在使用的 javascript

```
if(('.data-tables').length > 0) {
var source = $('.data-tables').attr('data-dtjson');

$('.data-tables').dataTable({
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": source,
    "aoColumns": [
      { "mData": "2" },
      { "mData": "6" },
      { "mData": "start_date_formatted" },
      { "mData": "actions" }
  ]
});
$.extend( $.fn.dataTableExt.oStdClasses, {
    "sSortAsc": "header headerSortDown",
    "sSortDesc": "header headerSortUp",
    "sSortable": "header"
});
} 
```

该列的问题是 mData：“6”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:17:06.770

事实证明，这段代码很好，这与我拉出的列有关。它似乎不喜欢我拉出我没有在表格中使用的列。

# ios - 触摸并拖动一个 UIButton，但松开手指时不要触发它

> ID：13512322
> 
> 赞同：4
> 
> 时间：2012-11-22T11:59:04.967
> 
> 标签：ios, objective-c, uitouch, touchesbegan

我试图让`UIButton`我的一个视图上的一些实例被触摸并在屏幕上拖动（最终有动力，但那是以后的事了！）。我有一个非常简单的形式，如下所示，但问题是通过触摸按钮开始拖动它，它附着在手指上，并且通过抬起手指，触发“Touch Up Inside”事件，这是我在实际点击按钮时要执行的代码。

简而言之：我如何区分轻击和拖动/释放？我是否需要将点击更改为短点击手势识别器或类似的？代码：

在 viewDidLoad 中：

```
[firstButton addTarget: self action: @selector(wasDragged: withEvent:) forControlEvents: UIControlEventTouchDragInside]; 
```

而我的 wasDragged 方法：

```
- (void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{
    if (button == letter1Button) {
        UITouch *touch = [[event touchesForView:button] anyObject];

        CGPoint previousLocation = [touch previousLocationInView:button];
        CGPoint location = [touch locationInView:button];
        CGFloat delta_x = location.x - previousLocation.x;
        CGFloat delta_y = location.y - previousLocation.y;

        button.center = CGPointMake(button.center.x + delta_x, button.center.y + delta_y);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T12:22:29.380

您可以使用 a`UIPanGestureRecognizer`并告诉它取消视图中的触摸...

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIPanGestureRecognizer *panRecognizer;
    panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                            action:@selector(wasDragged:)];
    // cancel touches so that touchUpInside touches are ignored
    panRecognizer.cancelsTouchesInView = YES;
    [[self draggableButton] addGestureRecognizer:panRecognizer];

}

- (void)wasDragged:(UIPanGestureRecognizer *)recognizer {
    UIButton *button = (UIButton *)recognizer.view;
    CGPoint translation = [recognizer translationInView:button];

    button.center = CGPointMake(button.center.x + translation.x, button.center.y + translation.y);
    [recognizer setTranslation:CGPointZero inView:button];
}

- (IBAction)buttonWasTapped:(id)sender {
    NSLog(@"%s - button tapped",__FUNCTION__);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-09T15:14:31.973

对于像我这样的初学者，我`UIPanGestureRecognizer`按照上面的建议进行了尝试，但没有奏效。所以，这是我的简单解决方案：首先，按照 Baig 的建议添加事件侦听器：

```
// add drag listener
[button addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
// add tap listener
[button addTarget:self action:@selector(wasTapped:) forControlEvents:UIControlEventTouchUpInside]; 
```

拖动和点击都会触发`UIControlEventTouchUpInside`，因此添加一个标志，`wasDragged:withEvent:`如下所示：

```
-(IBAction)wasDragged: (id)sender withEvent: (UIEvent *) event {
    was_dragged = YES;
    UIButton *selected = (UIButton *)sender;
    selected.center = [[[event allTouches] anyObject] locationInView:self.view];
}

- (IBAction)buttonWasTapped:(id)sender {
    if(!was_dragged)
        NSLog(@"button tapped");
    else{
        was_dragged = NO;
        NSLog(@"button dragged");
    }
} 
```

瞧。完毕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T14:15:54.533

使用 UIButton 的 UIControlEventTouchDragInside 和 UIControlEventTouchUpInside 事件，例如

```
// add drag listener
[button addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
// add tap listener
[button addTarget:self action:@selector(wasTapped:) forControlEvents:UIControlEventTouchUpInside]; 
```

您可以使用[HBDraggableButton](https://github.com/hilalbaig/HBDraggableButton)控件..

# sql-server - 在 IIS 应用程序上使用集成安全性时，Sql 连接失败

> ID：13512328
> 
> 赞同：3
> 
> 时间：2012-11-22T11:59:23.340
> 
> 标签：sql-server, authentication, iis, connection-string

在 IIS 7.0 上的 Web 应用程序中，我想与 Sql 数据库服务器建立连接，我的用户被授予 Windows 身份验证权限。（集成安全=SSPI）

用户 'DOMAIN\COMPUTER_NAME$' 登录失败，但是我仍然可以通过 Sql Server Management Studio 的连接窗口（使用 DOMAIN\USER_NAME）连接到数据库。

如何通过我的 Web 应用程序连接到 Sql Server？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T15:50:17.720

我找到了解决方案。

在 IIS 上，打开应用程序池设置。

对于身份选项，选择“自定义帐户”。

输入您的用户名 (DOMAIN\USERNAME) 和密码。

完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T07:59:24.247

我的问题是我必须为 SQL Server 中的应用程序池帐户分配 db_owner 角色。我觉得许可太多了，但这是唯一有效的方法。我的书说要给它 db_datareader 和 db_datawriter 角色，但这不起作用。

我在同一台机器上使用带有 Windows 身份验证的 SQL Server、带有 IIS 的 Windows 7 Home Premium。

也许其他人会搜索这个问题并发现我的答案很有用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-13T12:57:14.753

能够连接到数据库本身就是一种特权

您可能仍需要执行此类操作以授予 IIS 服务帐户访问权限

```
USE [<database name>]

GRANT CONNECT TO '<DOMAIN\COMPUTER_NAME$>' 
```

# android - 将一个 Android JSON 应用程序迁移到 Android 中的一个简单应用程序

> ID：13512329
> 
> 赞同：3
> 
> 时间：2012-11-22T11:59:26.557
> 
> 标签：android, xml, json, android-layout, android-activity

我为 android 创建了 2 个基于 java 的应用程序，它们都独立工作。

第一个，一个简单的应用程序，带有几个文本字段和带有 onClick 功能的框，可以在页面之间切换，

第二个 JSON 列表（是的，这就是应用程序中的所有内容）

我试图将 JSON 列表应用程序放在第一个应用程序的中间，但是当我单击针对我的 JSON.java 页面的 onClick 按钮时，它崩溃了，但是当我从它自己的应用程序运行 JSON.java 页面时，它运行良好。

抱歉，我将大量代码倾倒在其中，但我是 android 新手，对它了解不多，所以不确定哪些部分是/不相关的。

**主页.Java**

```
package com.example.assent.app;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class HomePage extends Activity {

public void SelectClient(View view) 
{
    Intent intent = new Intent(HomePage.this, AndroidJSONParsingActivity.class);
    startActivity(intent);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home_page);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_home_page, menu);
    return true;
}
} 
```

**布局 - activity_home_page.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="top"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_gravity="center_horizontal"
    android:layout_weight="0.08"
    android:text="@string/Home_Text1"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="@string/Home_Text2"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/editText3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPersonName" />

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.06" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>
</TableLayout>

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="@string/Home_Text3"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="@string/Home_Text4"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPassword" />

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.09" >

    <TableRow
        android:id="@+id/TableRow02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/TableRow01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/TableRow04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/TableRow03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>
</TableLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="SelectClient"
    android:text="@string/Home_Button1" />

</LinearLayout> 
```

**菜单 - activity_home_page.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" />
</menu> 
```

**JSON JAVA - AndroidJSONParsingActivity.java**

```
package com.example.assent.app;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AndroidJSONParsingActivity extends ListActivity {

// url to make request
private static String url = "http://dcc.assentbc.co.uk/GetClients.aspx?SecureID=*******";

// JSON Node names
private static final String TAG_CONTACTS = "Clients";
private static final String TAG_NAME = "CompanyName";

// contacts JSONArray
JSONArray Clients = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        Clients = json.getJSONArray(TAG_CONTACTS);

        // looping through All Contacts
        for(int i = 0; i < Clients.length(); i++){
            JSONObject c = Clients.getJSONObject(i);

            // Storing each json item in variable
            String name = c.getString(TAG_NAME);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_NAME, name);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_NAME }, new int[] {
                    R.id.name });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView)     view.findViewById(R.id.name)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),     SingleMenuItemActivity.class);
            in.putExtra(TAG_NAME, name);
            startActivity(in);
        }
    });
}

} 
```

**JSON 解析器 JAVA - JSONParser.java**

```
package com.example.assent.app;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

**JSON 项目 - SingleMenuItemActivity.java**

```
package com.example.assent.app;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class SingleMenuItemActivity  extends Activity {

// JSON node keys
private static final String TAG_NAME = "CompanyName";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get JSON values from previous intent
    String name = in.getStringExtra(TAG_NAME);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);

    lblName.setText(name);
}
} 
```

**布局列表项目 - list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#43bd00"
        android:textSize="16sp"
        android:textStyle="bold"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />

    </LinearLayout> 
```

**主要布局 - main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<!-- Main ListView 
     Always give id value as list(@android:id/list)
-->
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

**单项布局 - single_item_list.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent">
<!-- Name Label -->
<TextView android:id="@+id/name_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25dip"
        android:textStyle="bold"
        android:paddingTop="10dip"
        android:paddingBottom="10dip"
        android:textColor="#43bd00"/>
<!-- Description Label -->
<TextView android:id="@+id/email_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"/>
<!-- Price Label -->
<TextView android:id="@+id/mobile_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"/>
</LinearLayout> 
```

**我的清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.assent.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".HomePage"
        android:label="@string/title_activity_home_page" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.HomePage" />
    </activity>
    <activity
        android:name=".Photos"
        android:label="@string/title_activity_photos" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".AudioNotes"
        android:label="@string/title_activity_audio_notes" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".Notes"
        android:label="@string/title_activity_notes" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".Documents"
        android:label="@string/title_activity_documents" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".PhotosSuccess"
        android:label="@string/title_activity_photos_success" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".PhotosActivity"
        android:label="@string/title_activity_photos" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".Photos_Upload"
        android:label="@string/title_activity_photos__upload" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".ImageUpload"
        android:label="@string/title_activity_image_upload" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".Notes_Upload"
        android:label="@string/title_activity_notes__upload" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.MainActivity" />
    </activity>
    <activity
        android:name=".SelectClient"
        android:label="@string/title_activity_select_client" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.assent.app.HomePage" />
    </activity>
    <activity
        android:label="@string/app_name"
        android:name=".AndroidJSONParsingActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!-- Single List Item View -->
    <activity
        android:label="Single Menu Item"
        android:name=".SingleMenuItemActivity" >
    </activity>
</application>

<uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

**我的日食日志**

```
11-22 12:10:56.638: D/dalvikvm(381): GC_FOR_ALLOC freed 88K, 3% free 6478K/6663K, paused 56ms
11-22 12:10:56.648: I/dalvikvm-heap(381): Grow heap (frag case) to 6.872MB for 513744-byte allocation
11-22 12:10:56.738: D/dalvikvm(381): GC_FOR_ALLOC freed 2K, 3% free 6977K/7175K, paused 53ms
11-22 12:10:56.868: D/dalvikvm(381): GC_CONCURRENT freed <1K, 3% free 6977K/7175K, paused 4ms+22ms
11-22 12:10:56.938: D/AndroidRuntime(381): Shutting down VM
11-22 12:10:56.938: W/dalvikvm(381): threadid=1: thread exiting with uncaught exception (group=0x40014760)
11-22 12:10:56.958: E/AndroidRuntime(381): FATAL EXCEPTION: main
11-22 12:10:56.958: E/AndroidRuntime(381): java.lang.RuntimeException: Unable to start activity          ComponentInfo{com.example.assent.app/com.example.assent.app.AndroidJSONParsingActivity}: android.os.NetworkOnMainThreadException
11-22 12:10:56.958: E/AndroidRuntime(381):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.os.Looper.loop(Looper.java:132)
11-22 12:10:56.958: E/AndroidRuntime(381):  at     android.app.ActivityThread.main(ActivityThread.java:4123)
11-22 12:10:56.958: E/AndroidRuntime(381):  at java.lang.reflect.Method.invokeNative(Native Method)
11-22 12:10:56.958: E/AndroidRuntime(381):  at java.lang.reflect.Method.invoke(Method.java:491)
11-22 12:10:56.958: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
11-22 12:10:56.958: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
11-22 12:10:56.958: E/AndroidRuntime(381):  at dalvik.system.NativeStart.main(Native Method)
11-22 12:10:56.958: E/AndroidRuntime(381): Caused by: android.os.NetworkOnMainThreadException
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
11-22 12:10:56.958: E/AndroidRuntime(381):  at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
11-22 12:10:56.958: E/AndroidRuntime(381):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
11-22 12:10:56.958: E/AndroidRuntime(381):  at java.net.InetAddress.getAllByName(InetAddress.java:249)
11-22 12:10:56.958: E/AndroidRuntime(381):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
11-22 12:10:56.958: E/AndroidRuntime(381):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-22 12:10:56.958: E/AndroidRuntime(381):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-22 12:10:56.958: E/AndroidRuntime(381):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-22 12:10:56.958: E/AndroidRuntime(381):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
11-22 12:10:56.958: E/AndroidRuntime(381):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-22 12:10:56.958: E/AndroidRuntime(381):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
11-22 12:10:56.958: E/AndroidRuntime(381):  at com.example.assent.app.JSONParser.getJSONFromUrl(JSONParser.java:38)
11-22 12:10:56.958: E/AndroidRuntime(381):  at com.example.assent.app.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:46)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.app.Activity.performCreate(Activity.java:4397)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
11-22 12:10:56.958: E/AndroidRuntime(381):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
11-22 12:10:56.958: E/AndroidRuntime(381):  ... 11 more
11-22 12:11:00.760: I/Process(381): Sending signal. PID: 381 SIG: 9 
```

再次抱歉代码转储，希望有人能指出我正确的方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:48:32.677

推荐使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)进行网络操作。在 Honey Comb 之前它不会给出任何错误，但是从 HoneyComb 版本开始，主 UI 线程上的网络操作将导致 NetworkOnUIthread 异常。

所以打电话给你： JSONObject json = jParser.getJSONFromUrl(url); 异步任务的 doInBackGround() 方法并使用 OnPostExecute 方法中的结果更新您的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:30:03.913

从你的日志猫

```
11-22 12:10:56.958: E/AndroidRuntime(381): java.lang.RuntimeException: Unable to start activity          ComponentInfo{com.example.assent.app/com.example.assent.app.AndroidJSONParsingActivity}: android.os.NetworkOnMainThreadException 
```

您正在主线程上下载您的 json，在 Android 3.0+ 上抛出和异常。

具体线路是这样的：`JSONObject json = jParser.getJSONFromUrl(url);`。将其移至另一个线程，它应该可以解决您的问题。

考虑使用，或[在此处](http://developer.android.com/training/articles/perf-anr.html)[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)查看其他选项

# android - 在 Android 上的 WebView 中缩放 Google 地图

> ID：13512335
> 
> 赞同：1
> 
> 时间：2012-11-22T11:59:41.137
> 
> 标签：android, google-maps, webview

我创建了一个 WebView 来显示带有标记等的谷歌地图。这很好用，在我的设备（HTC Sensation）上我可以毫无问题地放大/缩小地图，但在其他设备上有时会发生缩放是不可能的. 我已经尝试过 setSupportZoom(true) 和 setBuiltInZoomControls(true) 但这不起作用。而不是缩放地图，它只是缩放内容（如放大图片）。

所以我的问题是如何在所有设备上启用缩放地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:46:54.093

如果你想控制放大 - 缩小然后不要使用默认的放大控制。在您的 xml 文件集中..

```
<ZoomControls android:id="@+id/zoomctrl"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="top|center_horizontal"
/> 
```

现在。在您的活动中声明并初始化 ZoomControls zc；

```
class CurOverlay extends Overlay {
    private GeoPoint pointToDraw;

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public OnTouchListener mMapTouch = new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.v("TAG", "inside onTouch");
            zoomlvl = curmapView.getZoomLevel();
            if (zoomlvl == 19)
                zc.setIsZoomInEnabled(false);
            else if (zoomlvl == 1)
                zc.setIsZoomOutEnabled(false);
            else {
                zc.setIsZoomInEnabled(true);
                zc.setIsZoomOutEnabled(true);
            }
            return false;
        }
    };
            ...
            ....

} 
```

对于放大和缩小的点击事件是..

```
zc.setOnZoomInClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    zc.setIsZoomOutEnabled(true);
                    curmapController.zoomIn();
                    if (curmapView.getZoomLevel() == 19)
                        zc.setIsZoomInEnabled(false);

                }
            });
            zc.setOnZoomOutClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    zc.setIsZoomInEnabled(true);
                    curmapController.zoomOut();
                    if (curmapView.getZoomLevel() == 1)
                        zc.setIsZoomOutEnabled(false);
                }
            }); 
```

希望这张地图对你有帮助

# java - 尝试保存时出现休眠错误

> ID：13512342
> 
> 赞同：0
> 
> 时间：2012-11-22T12:00:08.627
> 
> 标签：java, sql-server, hibernate

在这里发布之前我已经在网上搜索过，但是我在一个重要的项目中，我没有更多的时间来浪费这个。好吧，这是交易：

我在数据库（*SqlServer*）中的表是由*Hibernate*自动创建的。因此，我有一个实体，并且该实体之前已使用 Id 注释进行映射，如下所示：

```
 @Id
    @GeneratedValue(strategy= GenerationType.AUTO)
    private int id; 
```

Hibernate在*sqlServer*中创建了一个表**dbo.Parcela**，但是我们不得不改变生成 id 的方式，因为有时我们会收到 id 号并且我们希望将该 id 保存在我们的数据库中。所以我们的Entity现在是这样的：

 *```
@Id
private Integer id; 
```

当我们第一次运行程序时一切正常，但是我们有一些客户已经使用旧的 Id 映射创建了他们的数据库，我们无法使用新的 Id 映射创建新表。因此，当我尝试插入新记录时，会收到以下消息：

```
SEVERE: Cannot insert explicit value for identity column
in table 'Parcela' when IDENTITY_INSERT is set to OFF. 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:35:49.760

So you want your surrogate keys generated by the database, except when they were already generated by the customer. How are you going to avoid collisions, if the database wants to set id=12345, but a customer-imported entry with that id already exists?

The short answer to your question is: don't do this. I don't want to go into the old natural key vs surrogate key debate, this has been done already [for example here](https://stackoverflow.com/questions/63090/surrogate-vs-natural-business-keys). And google "codd surrogate keys" to learn [how to properly use them](http://sqlblogcasts.com/blogs/tonyrogerson/archive/2010/03/13/database-design-surrogate-keys-part-1-of-many-rules-for-surrogate-keys-e-f-codd-and-c-j-date-research-and-problems-they-solve.aspx). All i want to say is: if you use surrogate keys, then have your database generate them, and treat everything from outside as additional lookup key. That's the sane way.

The long answer is: if you really want to do this, and if you really know what you're doing, you can implement your own IdGenerator class. In JPA for example, you could annotate your id:

```
@Id
@GenericGenerator(name = "customId", strategy = "com.example.CustomIdGenerator", parameters = { @Parameter(name = "sequence", value = "SEQ_IDGENERATOR") })
@GeneratedValue(generator = "customId")
@Column(name = "ID", unique = true, nullable = false)
private Integer id; 
```

Your customIdGenerator would then extend SequenceGenerator:

```
public class CustomIdGenerator extends SequenceGenerator {

  public Serializable generate(SessionImplementor session, Object obj) {
    // return o.getId() if obj.getId() is not null
    // newId = SEQ_IDGENERATOR.nextval
    // while (newId is already in db) newId = SEQ_IDGENERATOR.nextval
    // return newId
  }
} 
```

and your database would provide SEQ_IDGENERATOR. Id would no longer be an autogenerated field but simply

```
create table foo( id integer not null primary key, ...); 
```

But again: you **don't want to do this**. You want your surrogate keys to be irrelevant to the outside world and handled by the database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:11:56.907

你是如何让 Hibernate 为数据库创建模式的？如果您使用 hbm2ddl 可能会添加

```
<property name="hibernate.hbm2ddl.auto" value="update"/> 
```

到您的 persistence.xml 或设置`hbm2ddl.auto`为`"update"`可能让 Hibernate 在重新部署时自动更新数据库模式，让它修复插入问题。

当然，当您尝试插入已经存在的 id 时，它对您没有帮助，但我想您知道 :)*

# java - 为什么在 Ebean 中使用 java.util.List 而不是 java.util.Set 来处理关系

> ID：13512343
> 
> 赞同：3
> 
> 时间：2012-11-22T12:00:10.637
> 
> 标签：java, jpa, orm, ebean

我看到许多示例将 List 用于“许多”关系，但是，Set 似乎更好地发挥了作用，因为查找可以在 O(1) 中发生，而列表搜索为 O(N/2)。有什么理由为什么 List 是首选使用的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:26:37.413

重复只有在多对多关系的情况下才重要，在其他情况下，ORM 也处理 List 中的重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:02:30.543

这取决于您使用的情况。

1.  [Set](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)不包含重复项，而您可以在列表中保存重复项。
2.  [列表](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)以插入的顺序存储项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:01:33.213

`List`并且`Set`在语义上是不同的。仅查看查找时间是一个坏主意，并且可能会导致进一步的严重问题。

`List`可以有重复，`Set`不能。
`List`还保证按索引访问，而`Set`s 不保证。（尽管某些`Set`实现当然可能。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T12:06:46.437

检查自己，Ebean 的作者已经在文章中详细回答了它：

[列表集地图或集合？](https://archive-avaje-org.github.io/manydatatypes.html)

您会在此处找到每种类型的摘要描述以及所选类型之间的比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T12:03:55.773

我一直认为 List 保留了对底层数据库的查询结果的任何顺序。

# vb.net - Do While 循环和 If 语句 - 放置位置

> ID：13512346
> 
> 赞同：0
> 
> 时间：2012-11-22T12:00:25.167
> 
> 标签：vb.net

在我的另一个问题之前，我现在有另一个项目需要用我的**Do while/if statements**来解决。

```
strSQL = "exec sp_CoursesStartingSoon"
    objConn = New SqlConnection(strConnection)
    objConn.Open()
    objCmd = New SqlCommand(strSQL, objConn)
    rsData = objCmd.ExecuteReader(0)

    While rsData.Read()

        If (rsData("subject") = "F23") Then

            html += "<h1>Access to HE</h1>"
            html += "<p>" & rsData("name") & "</p>"
            html += "<p>" & rsData("level") & "</p>"

        ElseIf (rsData("subject") = "F06") Then

            html += "<h1>Art and Design</h1>"
            html += "<p>" & rsData("name") & "</p>"
            html += "<p>" & rsData("level") & "</p>"

        End If

    End While 
```

现在我遇到的问题是我需要**H1**标题只出现一次，目前它们在**While**循环中，所以在每一行上循环。谁能提供有关如何执行此操作的建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:04:54.743

假设：

*   您的存储过程返回按`subject`字段排序的项目
*   你有很多主题= F23和主题= F06的项目
*   你需要建立一个按主题分组的相同项目的列表

    ```
    Dim titleF23 as String = "<h1>Access to HE</h1>"
    Dim titleF06 as String = "<h1>Art and Design</h1>"

    While rsData.Read()

        If (rsData("subject") = "F23") Then
            if titleF23.Length > 0 then 
                 html += titleF23
                 titleF23 = ""
            end if
            html += "<p>" & rsData("name") & "</p>"
            html += "<p>" & rsData("level") & "</p>"

        ElseIf (rsData("subject") = "F06") Then
            if titleF06.Length > 0 then 
                 html += titleF06
                 titleF06 = ""
            end if
            html += "<p>" & rsData("name") & "</p>"
            html += "<p>" & rsData("level") & "</p>"
        End If

     End While 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:05:11.050

您可以为 h1 标题创建另一个 if ，这样如果您已经打印过它，就不会再次打印。它有点贵，但它会是一个快速的解决方案。

# android - 哪里可以得到类似appygeek的gridviewitem翻转效果动画？

> ID：13512353
> 
> 赞同：5
> 
> 时间：2012-11-22T12:00:46.737
> 
> 标签：android, gridview, android-animation, layout-animation

我正在为我的 gridview 寻找一种布局动画。

该动画看起来类似于 Windows 7 平铺动画。

该动画用于市场上可用的 appy geek 应用程序 - [Google play 链接](http://play.google.com/store/apps/details?id=com.mobilesrepublic.appygeek)

如果您能确定动画的名称或者如果您有动画的链接，请分享。

appy geek 应用程序中的一些示例图像动画。

![网格加载](../Images/17845ebcddcc510f3bee658b581e7e77.png)

![加载时的网格布局动画](../Images/05a14978b867565944e9dd85c46960ff.png)

# spring - Spring：导入具有指定环境的模块

> ID：13512355
> 
> 赞同：1
> 
> 时间：2012-11-22T12:00:51.967
> 
> 标签：spring

有什么可以达到以下等效的：

```
<import resource="a.xml">
    <prop name="key" value="a"/>
</import>

<import resource="a.xml">
    <prop name="key" value="b"/>
</import> 
```

这样在资源 a 中定义的 bean 会看到具有两个不同值的属性键吗？目的是这将用于命名导入中的 bean，以便出现资源 a.xml：

```
<bean id="${key}"/> 
```

因此，应用程序将有两个命名的 bean `a`，`b`现在可以使用相同的定义但作为不同的实例。我知道原型范围；不是出于这个原因，将创建许多具有实际上不是原型的相互依赖关系的对象。目前我只是复制 a.xml，创建 b.xml 并使用等效的`sed`命令重命名所有 bean。我觉得必须有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:57:43.337

我想 PropertyPlaceholderConfigurers 在每个容器的基础上工作，所以你不能通过 xml 导入来实现这一点。

回覆`The application would have two beans named a and b now available with the same definition but as distinct instances`

我认为您应该考虑使用当前应用程序上下文作为父应用程序上下文手动创建其他应用程序上下文（例如 ClassPathXmlApplicationContext）。因此，您的`many objects created with interdependencies`集合将分别驻留在自己的容器中。

但是，在这种情况下，您将无法`b`从 -container 引用 -beans `a`。

**更新您可以通过注册**[BeanDefinitionRegistryPostProcessor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionRegistryPostProcessor.html)专用 bean手动后处理 bean 定义（添加新定义） ，但这个解决方案似乎也并不容易。

好的，这是我手动导入 xml 文件的粗略尝试：

免责声明：我实际上是非常糟糕的 java io 程序员，所以请仔细检查资源相关代码:-)

```
public class CustomXmlImporter implements BeanDefinitionRegistryPostProcessor {

    @Override
    public void postProcessBeanFactory(
            ConfigurableListableBeanFactory beanFactory) throws BeansException {
    }

    private Map<String, String> properties;

    public void setProperties(Map<String, String> properties) {
        this.properties = properties;
    }

    public Map<String, String> getProperties() {
        return properties;
    }

    private void readXml(XmlBeanDefinitionReader reader) {
        InputStream inputStream;
        try {
            inputStream = new ClassPathResource(this.classpathXmlLocation).getInputStream();
        } catch (IOException e1) {
            throw new AssertionError();
        }
        try {

            Scanner sc = new Scanner(inputStream);
            try {
                sc.useDelimiter("\\A");
                if (!sc.hasNext())
                    throw new AssertionError();
                String entireXml = sc.next();

                PropertyPlaceholderHelper helper = new PropertyPlaceholderHelper("${",
                        "}", null, false);
                Properties props = new Properties();
                props.putAll(this.properties);
                String newXml = helper.replacePlaceholders(entireXml, props);
                reader.loadBeanDefinitions(new ByteArrayResource(newXml.getBytes()));

            } finally {
                sc.close();
            }

        } finally {
            try {
                inputStream.close();
            } catch (IOException e) {
                throw new AssertionError();
            }
        }
    }

    private String classpathXmlLocation;

    public void setClassPathXmlLocation(String classpathXmlLocation) {
        this.classpathXmlLocation = classpathXmlLocation;
    }

    public String getClassPathXmlLocation() {
        return this.classpathXmlLocation;
    }

    @Override
    public void postProcessBeanDefinitionRegistry(
            BeanDefinitionRegistry registry) throws BeansException {
        XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(registry);
        readXml(reader);
    }
} 
```

XML配置：

```
<bean class="CustomXmlImporter">
    <property name="classPathXmlLocation" value="a.xml" />
    <property name="properties">
        <map>
            <entry key="key" value="a" />
        </map>
    </property>
</bean>
<bean class="CustomXmlImporter">
    <property name="classPathXmlLocation" value="a.xml" />
    <property name="properties">
        <map>
            <entry key="key" value="b" />
        </map>
    </property>
</bean> 
```

此代码从类路径加载资源。在做这样的事情之前我会三思而后行，无论如何，你可以以此为起点。

# jquery - jQuery AJAX post 在 IE 中失败，在其他浏览器中有效

> ID：13512358
> 
> 赞同：0
> 
> 时间：2012-11-22T12:01:03.110
> 
> 标签：jquery, ajax, internet-explorer

我正在为我的登录表单使用 jQuery/AJAX。以下脚本适用于最新版本的 Firefox、Opera 和 Google Chrome，但在 bot IE6 和 IE9 上失败。无论我输入的密码是正确的还是错误的，都会使用“readystate=0, status=0, statusText="Error: Invalid argument." 调用我的错误函数。

```
$(function() {
  $(document).ready(function(){
    $("form").submit(function(){
      var thistarget = this.target;
      jQuery.ajax({
        data: $(this).serialize(),
        url: this.action,
        type: this.method,
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        error: function(xhr, textStatus, errorThrown) {
          if (typeof xhr.responseText !== "undefined") {
            $('strong.message').text(xhr.responseText);
          } else {
            $('strong.message').text("Bad username and/or password");
          }
          $('div.alert').show();
        },
        success: function(response) {
          document.location.href='/';
        }
      });
      return false;
    });
  });
}); 
```

# firefox - 保存到 Foursquare 按钮在 Firefox 中不起作用

> ID：13512359
> 
> 赞同：1
> 
> 时间：2012-11-22T12:01:05.787
> 
> 标签：firefox, foursquare

选择保存按钮会导致网页变暗，但不会显示 Foursquare 登录弹出窗口。

[在Foursquare](https://foursquare.com/buttons/savetofoursquare)上提到的多个网站上进行了尝试。

这是一个例子[。](http://timeoutboston.com/thelists/124365/best-coffee-shops)

使用 Firefox 16 和 17（Windows 7）观察

# shell - 使用 shell 脚本，将十进制格式转换为四个八位字节格式

> ID：13512367
> 
> 赞同：0
> 
> 时间：2012-11-22T12:01:56.740
> 
> 标签：shell

我想将十进制格式数字转换为四个八位字节格式数字。例如十进制数字 xxxxxxxxxxxxx 转换为四个八位字节数字 yy.yy.yy.yyy（如 ip 地址格式）。如何使用 shell 脚本进行转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:05:36.217

好吧，假设您的点分八位字节格式确实意味着您想要一个 32 位整数的每个 8 位部分的十进制数，那么这并不难做到。想一想数字的各种表示形式，即可以表达相同值的不同基数，以及*八位位组*到底是什么，然后考虑如何在 shell 脚本中进行此类转换。

首先，您可以将整数从十进制转换为十六进制。

然后将十六进制值分解为两个字符组，并将它们中的每一个转换回十进制。

最后，您将使用连接点组装您的字符串。

该`bc`程序在进行基本转换时很方便，但更简单的可能是`printf`命令（甚至可能内置到您的 shell 中）。现代 shell 还支持扩展修饰符`%`, `%%`, `#`, 并`##`允许您表达模式，以便可以以受控方式拆分变量值。

所以，如果我们把所有这些放在一起，我们就有：

```
hx=$(printf '%08x\n' $integer)
hx1=${hx#??????}
tm=${hx%??}
hx2=${tm#????}
tm=${tm%??}
hx3=${tm#??}
hx4=${tm%??}
printf '%d.%d.%d.%d\n' 0x$hx4 0x$hx3 0x$hx2 0x$hx1 
```

您可以在 AWK 等中编写大致相同的内容，然后从 shell 中调用它，但我所展示的内容是纯的`sh`（特别是如果`printf`是内置的）。如果您有一长串要转换的值（特别是如果*不是*`printf`内置的），AWK 可能会更有效。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:45:44.597

```
$ N=6473673
$ echo "obase=2; $N" | bc | sed ":r /.\{32\}$/ { s:........:&;:g ; /^/ s::ibase=2;obase=10000;:; q } ; /^/ s::0:; tr " | bc | sed 'H ; $ {x;s:\n::; s:\n:.:g;q} ;d'
0.62.C7.C9
$ 
```

我转换为十六进制。如果您想转换为其他基础，只需告诉我修改调用即可。*

# c# - Windows phone 7：提醒用户事件然后报警的其他方法？

> ID：13512369
> 
> 赞同：2
> 
> 时间：2012-11-22T12:02:01.667
> 
> 标签：c#, .net, visual-studio-2010, windows-phone-7, c#-4.0

我在 Windows 7 中制作了一个 medreminder 应用程序。我想向用户发送警报，以防他错过吃药。为此，我使用警报来提醒用户。

但是我希望用户通过发送自动短信或电子邮件来获得警报，这在代码中似乎是不可能的，因为会出现一个弹出窗口，直到用户按下发送，邮件或短信才会发送。

所以我的问题是，除了警报之外，还有哪些可能的方法可以通过手机本身提醒用户。

我在[http://thesociablegeek.com/windows-phone-7/windows-phone-alerts-and-reminders/上进行了搜索](http://thesociablegeek.com/windows-phone-7/windows-phone-alerts-and-reminders/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:54:35.180

You can't send an SMS directly from the program, you can only compose a message but the user would still have to click "Send". The same applies to sending an email.

You can use an existing (or set up your own one) web service to do both of those things for you and just call the service from your wp7 app.

If it's just alerts you want though, I had good success implementing my alerts through Twitter using [TweetSharp](https://github.com/danielcrenna/tweetsharp#using-windows-phone-7) . The app would post a little note under a set up twitter account and the guy receiving the alerts can subscribe to that account and have the alerts pushed to him with minimal latency. The functionality doesn't require any user activity (like clicking "send") and can even be fired from a background task.

# powershell - 远程桌面会话 - 跟踪/获取用户的当前位置

> ID：13512372
> 
> 赞同：0
> 
> 时间：2012-11-22T12:02:16.397
> 
> 标签：powershell, terminal, windows-server-2008-r2, remote-desktop

我一直在玩 PSTermninalServices 一段时间，我想知道是否可以跟踪或获取持有用户的当前位置、工作目录、远程桌面 sessoin？例如，打开了哪些文件夹以及用户打开了哪些文件。这可以通过像 PowerShell 这样的脚本来实现吗？

操作系统：Windows Server 2008 R2

最好的祝福。达。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:21:51.993

我不知道如何使用 PS，但您可以使用 psfile（Mark Russinovich出色的[pstools套件的一部分）](http://technet.microsoft.com/en-us/sysinternals/bb896649.aspx)

```
psfile.exe [\\RemoteComputer [-u Username [-p Password]]] [[Id | path] [-c]]
     -u        Specifies optional user name for login to
               remote computer.
     -p        Specifies password for user name.
     Id        Id of file to print information for or close.
     Path      Full or partial path of files to match.
     -c        Closes file identified by file Id.
Omitting a file identifier has PsFile list all files opened remotely. 
```

# iphone - iPhone 设备方向 - 主 UI 线程如何受到影响？

> ID：13512374
> 
> 赞同：0
> 
> 时间：2012-11-22T12:02:22.823
> 
> 标签：iphone

我正在 iphone OS 6.0 中开发一个 hello world 应用程序。每当呈现屏幕时，都会对服务器进行 Web 服务调用。但是，我在同一个主线程中进行 Web 服务调用，而不是在单独的线程中启动。

但是，每当我将设备旋转到横向模式时，Web 服务调用就会停止。当我再次将设备旋转到纵向模式时，网络服务调用开始。

关于为什么会发生这种情况的任何想法......在此先感谢。

编辑我使用 iOS 仪器（网络监视器）测试了应用程序。我了解设备方向并没有停止网络操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:22:28.987

以下链接帮助我找到了解决方案。

[在 iOS 上，您能否发出同步网络请求（但不在主线程上）并仍然获得进度回调（在单独的非主线程上）？](https://stackoverflow.com/questions/11471896/on-ios-can-you-make-a-synchronous-network-request-but-not-on-the-main-thread) [http://tewha.net/2012/06/networking-using-nsurlconnection/](http://tewha.net/2012/06/networking-using-nsurlconnection/)

我知道在 Iphone 中，UI 渲染发生在主线程中。因此，我可以控制与 android OS 类似的设备方向的应用程序行为。

除此之外，我不需要以异步模式执行网络代码。我可以在单独的线程中执行同步网络操作。这解决了我的问题。

谢谢大家...

# vb.net - LINQ to Entities .contains 忽略 NULL 的结果

> ID：13512375
> 
> 赞同：2
> 
> 时间：2012-11-22T12:02:22.947
> 
> 标签：vb.net, linq, entity-framework

我是实体框架的新手，并且正在努力解决我希望是一个基本问题。我的代码在这里：

```
 Dim accounts As List(Of STUDENT) =
        (From a In SA.STUDENTs
         Where (a.MATRIC_NO.Contains(matric) And a.FIRST_NAME.Contains(firstName) And a.MIDDLE_NAMES.Contains(middleName) And a.SURNAME.Contains(lastName) And a.PREFERRED_NAME.Contains(preferredName))
         Select a).ToList 
```

查询运行良好，直到数据库中的搜索字段之一为 NULL。例如，如果在 seach 界面中输入了一个矩阵数字，但中间名留空，如果中间名在数据库中为 NULL，则查询将不会返回任何记录。如果中间名是数据库中的空格，那么它将返回记录。

任何人都可以提供任何指示吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:53:36.133

试试这样..

```
 Dim get_rmf_2 = From rmf In t_rmf _
          Where Not IsDBNull(rmf!NIVP) AndAlso rmf!NIVP = nivp_rap 
```

这是在VB中我认为这很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:12:35.867

您可以在查询中添加额外的检查。例如：

```
public function filterList(IEnumerable list, string name)
{
    var filtered_list = list.Where(x=> x.Name.Contains(name) || string.IsNullorWhitespace(name)).ToList();

    return filtered_list;
} 
```

所以你可以看到，如果`name`变量为空，所有元素都会返回true，所以所有元素都会返回（没有应用真正的过滤器）。

所以基本上，你可以从

```
something.Contains(anotherthing) 
```

至

```
something.Contains(anotherthing) || string.IsnullOrWhitespace(anotherthing) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:34:13.917

我设法使用不同的方法解决了这个问题。如果没有为特定字段输入值，请将其排除在查询之外。我使用谓词完成了这一点，如下所示：

```
 'create the base query
    Dim accounts =
        (From a In SA.STUDENTs
         Select a)

    'create predicates for each condition required in the query
    If matric <> "" Then
        accounts = accounts.Where(Function(m) m.MATRIC_NO.Contains(matric))
    End If

    If firstName <> "" Then
        accounts = accounts.Where(Function(f) f.FIRST_NAME.Contains(firstName))
    End If

    If middleName <> "" Then
        accounts = accounts.Where(Function(mn) mn.MIDDLE_NAMES.Contains(middleName))
    End If

    If lastName <> "" Then
        accounts = accounts.Where(Function(l) l.SURNAME.Contains(lastName))
    End If

    If preferredName <> "" Then
        accounts = accounts.Where(Function(p) p.PREFERRED_NAME.Contains(preferredName))
    End If

    'execute the query
    Dim accountlist = accounts.ToList

    'return the results
    Return accountlist 
```

如果有人能看出这有什么问题，或者有任何我不知道的问题，请告诉我！我对 LINQ to Entities 和一般的 LINQ 非常陌生！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:13:32.353

```
(From a In SA.STUDENTs
         Where isnull(a.MATRIC_NO.Contains(matric) And a.FIRST_NAME.Contains(firstName) And a.MIDDLE_NAMES.Contains(middleName) And a.SURNAME.Contains(lastName) And a.PREFERRED_NAME.Contains(preferredName))
         Select a).ToList 
```

像这样 `:select * from tbl where statusid = isnull(@statusid,statusid)

# firefox - Firefox 17 中的 FCK 编辑器 2.3.2 错误 - TypeError：FCKeditorAPI 未定义

> ID：13512376
> 
> 赞同：3
> 
> 时间：2012-11-22T12:02:25.790
> 
> 标签：firefox, fckeditor

嗨，我在新的 firefox 17 中使用旧的 FCK 编辑器 2.3.2 有问题，出现 js 错误：“TypeError：FCKeditorAPI 未定义”。我已经尝试使用 FCKeditor_IsCompatibleBrowser 的解决方案返回始终为真，但它不起作用，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:04:18.560

遇到了同样的问题，但在 Bugzilla 上找到了修复程序。请参阅注释 8 并确保粘贴到该行中的正确位置。为我工作。

[https://bugzilla.mozilla.org/show_bug.cgi?id=814019](https://bugzilla.mozilla.org/show_bug.cgi?id=814019)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T20:07:44.470

在文件**fckeditor\fckeditor_php5.php**中，替换`return ($iVersion >= 20030210) ;`为`return true ;`

```
function FCKeditor_IsCompatibleBrowser()
{
    [...]
    else if ( strpos($sAgent, 'Gecko/') !== false )
    {
        $iVersion = (int)substr($sAgent, strpos($sAgent, 'Gecko/') + 6, 8) ;
        return true ;
        //return ($iVersion >= 20030210) ;

    }
   [...]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:56:34.190

解决方案是下载 CKEditor [http://ckeditor.com/download](http://ckeditor.com/download)。

然后，把代码：

```
<script type="text/javascript" src="ckeditor/ckeditor.js"></script> 
```

和 textareas 中的 class="ckeditor"。

前任 ：

```
<textarea cols="80" class="ckeditor" id="editeur" name="editeur" rows="10"></textarea> 
```

它会起作用的，你会很高兴的！:)

# windows - 修改 Powershell 脚本以修改所选目录中子文件夹的“上次修改日期”

> ID：13512380
> 
> 赞同：0
> 
> 时间：2012-11-22T12:02:43.260
> 
> 标签：windows, powershell

我创建了以下脚本，该脚本已经过测试并成功运行，以修改所选文件夹中包含的所有文件的“上次修改日期”。

```
$a = Get-Date "22/11/2012 10:00 AM"

$b = Get-ChildItem "C:\MyFiles"

foreach ($i in $b)
{
    $i.LastWriteTime = $a
    $a = $a.AddMinutes(1)    
}

$b 
```

我只是在寻找一些帮助来修改此脚本以包含所选文件夹中的所有子文件夹/文件，因为我目前必须手动修改它以更改“C:\MyFiles”的子文件夹中的日期。例如“C:\MyFiles\A”、“C:\MyFiles\B”.. 等等。

另外..我还想知道如何删除“$a = Get-Date”22/11/2012 10:00 AM”行，以便它自动将日期设置为今天，而我不必输入手动日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:09:17.370

像这样？

```
 $a = get-date
    $b = Get-ChildItem "C:\MyFiles" -recurse | ? { !$_.psiscontainer }
    foreach ($i in $b)
    {
        $i.LastWriteTime = $a 
        $a = $a.AddMinutes(1)    
    }

    $b 
```

或者如果您不需要在每个文件后添加一分钟：

```
 $dir = read-host "Insert path"
     $b = Get-ChildItem $dir -recurse | ? { !$_.psiscontainer }
    foreach ($i in $b)
    {
        $i.LastWriteTime = get-date               
    }

    $b 
```

# ios - OpenEars 动态词典

> ID：13512382
> 
> 赞同：0
> 
> 时间：2012-11-22T12:02:58.457
> 
> 标签：ios, openears

我正在设计一个新的 iPhone/iPad 应用程序，我将使用 OpenEars 包含一些语音识别功能，而且我是 OpenEars 的新手。

该应用程序应该从自定义动态词典中识别一些单词（命令），我的意思是根据用户操作，它应该能够识别一些新单词并忽略其他单词。

粗略地说，我需要在字典中添加和删除单词。

是电话吗

[languageModelGenerator generateLanguageModelFromArray:]

用新的词组正确的方法？

由于 generateLanguageModelFromArray 创建了一些文件，我认为它可能会影响应用程序的性能，有什么经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:15:44.783

您可以查看有关 LanguageModelGenerator 的更多详细信息，并将您的问题发布[到](http://www.politepix.com/openears/#LanguageModelGenerator_Class_Reference)[**politepix.com/openears/**](http://www.politepix.com/openears/#LanguageModelGenerator_Class_Reference)

不过我要回答。

是的。你说的对。

从他们的网站信息中，在您要创建语言模型的方法中，添加以下方法调用

它将在您的文档目录中生成新的语言模型文件（它将覆盖旧文件）

```
NSArray *words = [NSArray arrayWithObjects:@"YOUR FIRST SENTENCE", @"YOUR SECOND SENTENCE", @"YOUR THIRD SENTENCE", nil];

NSString *name = @"NameIWantForMyLanguageModelFiles";
NSError *err = [lmGenerator generateLanguageModelFromArray:words withFilesNamed:name];

NSDictionary *languageGeneratorResults = nil;

NSString *lmPath = nil;
NSString *dicPath = nil;

if([err code] == noErr) {

    languageGeneratorResults = [err userInfo];

    lmPath = [languageGeneratorResults objectForKey:@"LMPath"];
    dicPath = [languageGeneratorResults objectForKey:@"DictionaryPath"];

} else {
    NSLog(@"Error: %@",[err localizedDescription]);
} 
```

# regex - 正则表达式允许除

> ID：13512390
> 
> 赞同：0
> 
> 时间：2012-11-22T12:03:47.847
> 
> 标签：regex, latin

我有一个表格和描述，我喜欢停止使用“www、http、//、@、.com、co.uk...”之类的词。

我想停止这种形式的所有电子邮件和域，但**允许**所有类型的字符空格、逗号和带有标点符号的拉丁字符，如“ç、ã、á、à...”

我有这样的事情

```
<code>
$().ready(function() {
// validate the description form when it is submitted
$("#descriptionform").validate();
});

$(document).ready(function(){
$.validator.addMethod("regex", function(value, element) {
return this.optional(element) || /^[a-z0-9 \_,.]+$/i.test(value);
}, "Description field can not include e-mail and/or urls.");
$("#regForm").validate();
});
</code> 
```

请问你能帮帮我吗？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:23:05.250

*如果输入不*包含要停止的字符序列，则这是一个匹配的正则表达式：

```
^(?!.*www)(?!.*http)(?!.*//)(?!.*@)(?!.*\.com)(?!.*co\.uk).+ 
```

# python - 要数没有。调用函数的次数？

> ID：13512391
> 
> 赞同：0
> 
> 时间：2012-11-22T12:03:49.860
> 
> 标签：python

有什么方法可以计算一个函数在python中被调用多少次？我在 GUI 中使用复选按钮。我已经为该 checkbutton 命令编写了一个函数，我需要根据 checkbutton 状态执行一些操作，我的意思是基于它是否被勾选。我的检查按钮和按钮语法是这样的

```
All = Checkbutton (text='All', command=Get_File_Name2,padx =48, justify = LEFT)
submit = Button (text='submit', command=execute_File,padx =48, justify = LEFT) 
```

所以我认为没有。调用命令函数的次数，根据它的值我可以决定它是否被勾选。请帮忙

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T12:09:46.310

您可以编写装饰器，在函数调用后增加特殊变量：

```
from functools import wraps

def counter(func):
    @wraps(func)
    def tmp(*args, **kwargs):
        tmp.count += 1
        return func(*args, **kwargs)
    tmp.count = 0
    return tmp

@counter
def foo():
    print 'foo'

@counter
def bar():
    print 'bar'

print foo.count, bar.count  # (0, 0)
foo()
print foo.count, bar.count  # (1, 0)
foo()
bar()
print foo.count, bar.count  # (2, 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:07:04.110

如果检查检查按钮是否被勾选是您唯一需要做的事情，为什么不直接做`checkbutton.ticked = true`呢？

实现这一点的一种方法是从 Checkbutton 中创建一个子类（或者 - 如果可以的话 - 编辑现有的 Checkbutton 类）并为其添加 self.ticked 属性。

```
class CheckbuttonPlus(Checkbutton):
    def __init__(self, text, command, padx, justify, ticked=False):
        super().__init__(text, command, padx, justify)
        self.ticked = ticked 
```

并编辑您的函数，以便将您的 CheckbuttonPlus -object 的勾选更改为`not ticked`.

我不知道你的类是如何构造的，但你应该从 Checkbutton 类中找到激活函数的方法，然后在 CheckbuttonPlus -class 中覆盖它（如果你不能编辑现有的 Checkbutton 类，在这种情况下，你不要'甚至根本不需要 CheckbuttonPlus 类）。

**编辑：**如果您使用的是 Tkinter Checkbutton（看起来很像），您可能想检查一下： [Getting Tkinter Check Box State](https://stackoverflow.com/questions/4236910/getting-tkinter-check-box-state)

# html - 具有最小高度和溢出的 IE8 错误：隐藏？

> ID：13512393
> 
> 赞同：1
> 
> 时间：2012-11-22T12:03:59.457
> 
> 标签：html, css, internet-explorer-8

查看以下内容：

[http://jsfiddle.net/symposion/P8KBe/7/](http://jsfiddle.net/symposion/P8KBe/7/)

在 IE8 中，然后是 Chrome/Firefox/IE9+。您会注意到，在 IE8 中，内部蓝色 div 在最外层 div 的边缘被切掉`#slicer`，尽管事实上它`#outer`只是`overflow:hidden`. 如果我将`min-height`on #outer 更改为显式`height`，问题就会消失。

这个例子可能看起来是做作的，但这只是因为我在这里简化了它。我在一个真实的项目中遇到过这个问题，这让我很头疼，因为我改变正在使用的布局原则的范围有限——还有太多其他依赖项。我在这里寻找两件事：

1.  这是某处列出的已知错误吗？这个问题最简单的陈述是什么？我仍然不觉得我真正理解导致 IE8 出错的潜在错误；它仍然不是一个特别简单的测试用例。

2.  是否有不涉及更改`#outer`and样式的解决方法`#slicer`？在我的真实世界示例中，这些是较大页面框架的一部分，我将难以更改，而该`#inner`位更容易在我的控制之下。

（更新）原始示例非常做作，力求最小化。我在这里创建了一个新的 JSFiddle：http: [//jsfiddle.net/symposion/NDa6U/](http://jsfiddle.net/symposion/NDa6U/)，它可以更好地了解现实世界的问题。如果您在 IE8 中调整 html 窗格的大小，您会注意到最终绿色的内部内容部分开始被错误地截断。我正在寻找的是让这部分保持它所包含的 div 高度的 100%，理想情况下不必对`#innerContainer`. 但老实说，我会对任何保留基本布局原则的解决方案感兴趣（底部部分从定义的像素位置扩展到距页面底部的定义距离，但具有最小高度）在 IE8 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:44:51.580

[http://jsfiddle.net/thirtydot/NDa6U/22/](http://jsfiddle.net/thirtydot/NDa6U/22/)怎么样？

```
#innerContainer {
    padding-bottom: 9999px;
    margin-bottom: -9999px;
}​ 
```

以下是有关此技术的一些（相对）旧背景信息：[http ://www.positioniseverything.net/articles/onetruelayout/combined](http://www.positioniseverything.net/articles/onetruelayout/combined)

根据个人经验，它可以在所有现代浏览器中正常工作。

# javascript - jQuery AJAX & XML 获取节点值

> ID：13512394
> 
> 赞同：2
> 
> 时间：2012-11-22T12:03:59.937
> 
> 标签：javascript, jquery, xml

我有以下代码可以获取 xml 节点中的文本

```
$(xml).find('entry').each(function(){
     alert($(this).find('author').text());
}); 
```

这将提醒每个文本中发生了什么`<name>`

我正在努力在一个看起来像这样的节点中获取文本值 -

```
<im:name> 
```

将我的代码更改为如下所示 -

```
$(xml).find('entry').each(function(){
     alert($(this).find('im:name').text());
}); 
```

不起作用，请有人指出我正确的方向。

我尝试过搜索，但不知道如何调用这种格式的节点！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:05:09.347

你可以逃脱`:`.

```
alert($(this).find('im\\:name').text()); 
```

[http://jsfiddle.net/6Y2ff/](http://jsfiddle.net/6Y2ff/)

# rest - 使用 Jersey 的 RESTful 服务

> ID：13512398
> 
> 赞同：0
> 
> 时间：2012-11-22T12:04:22.280
> 
> 标签：rest, jersey

请找到以下代码。

`Service:DataResource.java`

```
 package com.mypack.pack2;

    import java.io.IOException;

    import javax.servlet.http.HttpServletResponse;
    import javax.ws.rs.Consumes;
    import javax.ws.rs.FormParam;
    import javax.ws.rs.GET;
    import javax.ws.rs.POST;
    import javax.ws.rs.Path;
    import javax.ws.rs.PathParam;
    import javax.ws.rs.Produces;
    import javax.ws.rs.core.Context;
    import javax.ws.rs.core.MediaType;
    import com.mypack.pack1.DataClass;

    @Path("data")
    public class DataResource {
        //Just retrieves the data members of the class
         //i.e., 10 Ram
         // Able to retrieve successfully.
        @GET
        @Produces("text/plain")
        public String display()
        {
            DataClass obj1=new DataClass();
            return obj1.getId()+obj1.getName(); 
        }

        @POST
          @Path("/{id}/{name}") 
          @Produces("text/plain")
          @Consumes("text/plain")

        public void newData(@PathParam("id") int no,
                            @PathParam("name") String name) {
            DataClass obj= new DataClass();
            obj.setData(name,no);
            System.out.println("Success");
            System.out.println("Data after changes"+obj.getId()+obj.getName());

            }
            //TodoDao.instance.getModel().put(id, todo);
         } 
```

`DataClass.java`

```
 package com.mypack.pack1;

    public class DataClass {

        private String ename="Ram";
        private int eno=10;

        public void setData(String name,int no)
        {
            this.ename=name;
            this.eno=no;
        }
        public int getId()
        {
            return eno; 
        }

        public String getName()
        {
            return ename;
        }

    } 
```

`Web.xml:`

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
      id="WebApp_ID" version="2.5">
      <display-name>de.vogella.jersey.jaxb</display-name>
      <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
          <param-name>com.sun.jersey.config.property.packages</param-name>
          <param-value>com.mypack.pack2</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
      </servlet>
      <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
      </servlet-mapping>
    </web-app> 
```

我无法更改班级成员`ename`和`eno`. `DataClass`谁能告诉我为什么它没有改变？是因为我以错误的方式尝试代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:21:24.350

您如何调用 POST URI (localhost:8080/JerseyProject/rest/data/11/John)？确保你没有从浏览器调用它，因为这样你会调用动词 GET o 没有实现的 /data/{id}/{name}。这可以解释为什么你会得到状态 405。

通常 CREATE 操作是在集合 URI 上使用 HTTP VERB POST 使用的，其参数在有效负载中而不是在路径上。在这种情况下，在 /data 而不是 /data/{id}/{name} 上使用 POST。

# tags - Pyrocms 在使用标签时避免 0

> ID：13512399
> 
> 赞同：0
> 
> 时间：2012-11-22T12:04:23.433
> 
> 标签：tags, pyrocms

我正在通过查询获取结果，并使用插件和标签在控制面板构建的页面上显示数据。我需要显示每个产品的总查看次数。默认情况下它是 0。如果计数大于 0，它会正常显示，但如果没有视图计数意味着如果计数为 0，它不会显示任何内容。我已经尝试过条件，但它们也不起作用。如何使用标签显示从查询中获取的 0？

编辑：

这是我想要做的。这是查询

```
SELECT 
    ldc.id,
    ldc.product_name,
    ldc.product_viewed,
FROM default_products AS ldc 
```

这里 product_viewed 是一个整数字段，其中包含用户的查看次数。新产品的默认值为 0（由管理员上传）。

这是我用来显示 product_viewed 的标签

```
<table>
{{ Products:getProductsDetail }}
    <tr>
        <td>Product Name</td>
        <td><h2>{{ product_name }}</h2></td>
        <td>Hits</td>
        <td>{{ product_viewed }}</td>
    </tr>
{{ /Products:getProductsDetail }}
</table> 
```

除了 {{ product_viewed }} 之外，一切都工作正常，因为它包含 0。我已经测试了查询并且它工作正常，可以按预期获取结果，但使用 Lex Parser 标记它什么也不显示。我在这里简化了我的查询是图像结果

[http://imageshack.us/photo/my-images/138/testmy.png/](http://imageshack.us/photo/my-images/138/testmy.png/)

您可以看到 Hits: display nothing 。这就是我所面临的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:15:57.940

我已经解决了这个问题。我正在使用旧版本。使用最新版本不会遇到这个问题。

# character - OCR 重新识别奇怪的字符。为什么？

> ID：13512402
> 
> 赞同：1
> 
> 时间：2012-11-22T12:04:33.107
> 
> 标签：character, ocr

我正在使用 OCR 开发一个使用`Tesseract Libs`, 和`tess-two`项目的 Android 应用程序，正如我在这里看到的：http: [//gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract/)

该应用程序运行良好，但我正在修复与照片内容一起返回的字符串，有时会带有陌生人字符。示例：我正在阅读此内容：`www.caelum.com.br`并收到类似以下内容：`r ' . ,wlñzf . 94' kzl 5\. vsmNs/.caelumcombr`
搜索，我已配置此内容：`baseApi.setVariable("tessedit_char_whitelist", "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");`
但我认为这变得最糟糕。

我想阅读葡萄牙语和英语的文本。所以，我下载了每种语言的训练数据并按照我的意愿使用它，但是这些陌生人字符与编码项目有关吗？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:45:40.627

Tesseract 仅识别包含文本且仅包含文本的图像的文本。仅包含文本的图像将被它准确识别，并且您也可以获得良好的准确性。然而，Tesseract 为图像+文本识别提供了乱码输出。我没有在这个识别上工作，所以无法进一步帮助。

所以你的问题应该是如何裁剪图像部分，以便只从图像中获取文本部分。就像 Tesseract 可以很好地识别并在输出中提供所需的文本。

谢谢。

# python - Python解析shell反引号字符串

> ID：13512403
> 
> 赞同：0
> 
> 时间：2012-11-22T12:04:34.020
> 
> 标签：python, shell

如何在 python 中解析（shell）反引号字符串？

说，我有字符串`"`cat /etc/hosts | grep hostname`"`，我想得到它的 shell 解释，例如：“0.0.0.0 主机名\n”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:06:10.050

使用[`shlex.split()`](http://docs.python.org/2/library/shlex.html#shlex.split)：

```
>>> import shlex
>>> shlex.split('cat /etc/hosts | grep hostname')
['cat', '/etc/hosts', '|', 'grep', 'hostname'] 
```

但是，如果您在反引号中查找命令的*输出*，则需要改用该[`subprocess`模块](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)：

```
>>> import subprocess
>>> subprocess.check_output('cat /etc/hosts | grep dahn', shell=True)
'127.0.0.1\tdahnlocal.internal.int\n' 
```

请注意，我设置`shell`为`True`让 shell 为我解释它。

# .net - Windbg 中的 WaitForMultipleObjects 是否表明 .NET 应用程序中的事件存在问题？

> ID：13512407
> 
> 赞同：2
> 
> 时间：2012-11-22T12:04:44.443
> 
> 标签：.net, windbg

目前，我正在修复.NET 应用程序中的应用程序挂起。经过一些研究，我发现 windbg 可以提供有关应用程序挂起时发生的情况的见解。

在应用程序挂在用户系统上之后，我使用 windbg 收集了更多信息。

首先，我确定了 GUI/STA 线程（寻找 CorExeMain）

```
0:011> ~*
   0  Id: 1488.314 Suspend: 1 Teb: 7ffdf000 Unfrozen
      Start: mscoree!_CorExeMain_Exported (79004ddb) 
      Priority: 0  Priority class: 32  Affinity: 3 
```

我注意到以下内容：

```
0:000> k
ChildEBP RetAddr  
0012eb2c 7c90df2c ntdll!KiFastSystemCallRet
0012eb30 7c809574 ntdll!NtWaitForMultipleObjects+0xc
0012ebcc 7e4195f9 KERNEL32!WaitForMultipleObjectsEx+0x12c
0012ec28 7752ebd6 USER32!RealMsgWaitForMultipleObjectsEx+0x13e
0012ec50 77557237 ole32!CCliModalLoop::BlockFn+0x80
0012ecc4 79f9e14d ole32!CoWaitForMultipleHandles+0xcf
0012ece4 79f9e0b4 mscorwks!NT5WaitRoutine+0x51
0012ed50 79f9e018 mscorwks!MsgWaitHelper+0xa5
0012ed70 79f4c664 mscorwks!Thread::DoAppropriateAptStateWait+0x28
0012edf4 79f4c6f9 mscorwks!Thread::DoAppropriateWaitWorker+0x13c
0012ee44 79f15a68 mscorwks!Thread::DoAppropriateWait+0x40 
```

我对windbg 的经验是有限的，但是从我进行的研究中我得到的印象是WaitForMultipleObjects 表明它可能正在等待一个事件。谁能告诉我这是否是可能的原因？

我收到了一些警告，这让我怀疑我是否没有正确设置环境：

```
0012ee44 79f15a68 mscorwks!Thread::DoAppropriateWait+0x40
*** WARNING: Unable to verify checksum for C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\6d667f19d687361886990f3ca0f49816\mscorlib.ni.dll
0012ef48 792b68af mscorwks!WaitHandleNative::CorWaitOneNative+0x156 
```

和

```
0012f2ac 03af4dea USER32!DispatchMessageW+0xf
WARNING: Frame IP not in any known module. Following frames may be wrong.
0012f2c8 7b1d8d2e 0x3af4dea 
```

任何人都可以建议我认为应用程序等待事件是否有任何理由，或者是否有人对可能的原因或可能值得调查的领域有任何直接的想法？

我也想知道是否值得跟进罢工之子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:12:47.997

您正在查看*托管*线程的*本机*调用堆栈。这种等待是 .NET 内部结构的一部分。您可能会深入挖掘以弄清楚发生了什么，但您真正关心的是应用程序的*托管*状态。

 **您可以通过将 sos 扩展加载到 windbg 中来做到这一点。它弥合了 windbg 的原生特性和 .NET 之间的差距。

加载此扩展的命令在 .NET 框架的版本之间是不同的，但它会类似于：

```
.loadby sos clr 
```

……或者可能……

```
.loadby sos mscorwks 
```

从那里，您可以使用导出的 sos 为您提供调试 .NET 应用程序。作为起点，您将需要托管调用堆栈。这应该指出您的代码中发生挂起的位置。

```
!clrstack 
```

MSDN 对 sos 扩展提供的内容有很好的参考。 [http://msdn.microsoft.com/en-us/library/bb190764.aspx](http://msdn.microsoft.com/en-us/library/bb190764.aspx)**

# javascript - 加载 nivo 滑块后如何运行砌体？

> ID：13512410
> 
> 赞同：0
> 
> 时间：2012-11-22T12:04:57.843
> 
> 标签：javascript, jquery, nivo-slider

我尝试在 nivo 滑块加载后运行砌体，以便砌体调整滑块中图像下方的图像标题。

我试过这段代码，但是当我添加时砖石会破裂`container.masonry();`

```
var container = $('#container');
$('.slider').nivoSlider({
  effect: 'sliceDown',
  directionNav: false,
  pauseTime: 7000,
  afterLoad: function() {
      container.masonry();
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:01:09.443

检查这个，

[http://www.metaphorcreations.com/nivo-slider-and-custom-links/](http://www.metaphorcreations.com/nivo-slider-and-custom-links/)

```
$("body").live("hover",function(){
    container.masonry();
}); 
```

`masonry`在正文或页面顶部父元素内部运行`hover function`..这是一个小技巧，它将解决这个问题

# android - android在应用程序运行时不时在后台运行服务

> ID：13512425
> 
> 赞同：1
> 
> 时间：2012-11-22T12:05:47.520
> 
> 标签：android, service, cron, alarmmanager, schedule

我正在构建一个 android 应用程序，当它运行时，如果用户连接到某个网络，我需要每分钟调用一次我的 Web 服务器。

我计划使用服务来拨打电话，但我如何每分钟拨打电话？我想我需要使用警报管理器，但我在哪里初始化它？在我的开始活动中？我只需要在我的应用程序运行时执行服务。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:11:32.040

如果您只想在应用程序正在运行时调用服务器，则无需使用警报管理器。还有其他选择，例如

倒数计时器

线

在那种情况下，我更喜欢 CoundownTimer，你可以像这样使用

```
CountDownTimer countDownTimer = new CountDownTimer(1000000, 60 * 1000) {

    @Override
    public void onTick(long millisUntilFinished) {
            // Do something on a tick.
    }

    @Override
    public void onFinish() {
        // Do something, maybe?

        this.start();
    }
};
countDownTimer.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:14:59.097

试试这个 ：：

您可以在您想要的活动中调用此计时器

```
private Timer autoUpdate;
@Override
public void onResume() {
    super.onResume();
    autoUpdate = new Timer();
    autoUpdate.schedule(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                public void run() {
                    //call your service from here
                }
            });
        }
    }, 0, 60000);//set time interval according to your requirement
} 
```

如果您有任何疑问，请随时询问:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:42:58.553

在活动中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   TestAlarmMessageReceiver almesr = new TestAlarmMessageReceiver(this, time);
} 
```

广播接收器：

```
public class TestAlarmMessageReceiver extends BroadcastReceiver {

    public TestAlarmMessageReceiver() {
    }

    public TestAlarmMessageReceiver(Context context, int timeout) { //timeout in seconds
        AlarmManager alarmMgr = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, TestAlarmMessageReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 
                PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar time = Calendar.getInstance();
        time.setTimeInMillis(System.currentTimeMillis());

        alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(), 
                timeout*60*1000, pendingIntent);
    }

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        arg0.startService(new Intent(arg0, TestMessageService.class));
    }

} 
```

服务：

```
public class TestMessageService extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        messageUpdateTask();
        return super.onStartCommand(intent, flags, startId);
    }

    private void messageUpdateTask(){
        GetMessagesUpdateAsyncTak getMessUpd = new GetMessagesUpdateAsyncTak();
        getMessUpd.execute(this);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T12:12:19.250

使用 AsynTask [http://developer.android.com/reference/android/os/AsyncTask.html调用您的 Web 服务器](http://developer.android.com/reference/android/os/AsyncTask.html)

在**AsynTask类的****onPost**方法中等待一分钟，然后调用 AsynTask。

 **您可以使用以下代码调用 AsynTask：

```
 BLSyncingProcedure objSyncingProcedure=new BLSyncingProcedure();
        objSyncingProcedure.execute(HomeScreen.this); 
```

**BLSyncingProcedure**是您的 AsynTask 类名。**

# c# - 如何使用 C# 从今天的日期和当前时间获取准确的 3 个月前的日期和时间

> ID：13512433
> 
> 赞同：4
> 
> 时间：2012-11-22T12:06:13.287
> 
> 标签：c#, asp.net

我想从过去 3 个月保存的数据库中获取数据，因为我有当前日期和时间，但是如何计算 3 个月的自我日期和时间，所以我可以在查询中传递这两个日期并获取数据在这些日期之间保存

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T12:07:44.643

使用[`AddMonths`方法](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)：

```
DateTime ago = DateTime.Now.AddMonths(-3); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T12:07:42.560

试试这个：

```
DateTime.Now.AddMonths(-3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:07:51.270

在方法中`-3`用作参数[`AddMonths`](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)

```
DateTime dtPreviousDate = DateTime.Now.AddMonths(-3); 
```

[DateTime.AddMonths 方法](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)

> 数月。月份参数可以是负数或正数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T12:08:00.943

你可以试试这个`DateTime.Now.AddMonths(-3)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T12:11:01.933

[`AddMonths`](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)可以是负数。

```
DataTable tblResult = new DataTable();
string sql = "SELECT * FROM dbo.TableName WHERE Date BETWEEN @startDate AND @endData";
using (var con = new SqlConnection(connectionString))
using (var cmd = new SqlCommand(sql, con))
using (var da = new SqlDataAdapter(cmd))
{
    // asuming that your startdate is three months ago and your enddate is now
    cmd.Parameters.AddWithValue("@startDate", DateTime.Now.AddMonths(-3));
    cmd.Parameters.AddWithValue("@endDate", DateTime.Now);
    da.Fill(tblResult);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-12T13:28:01.223

现在日期时间 = 日期时间。现在；
DateTime olddate = new DateTime(now.Year, now.Month - 3, now.Day);

# .net - 在 .net 的主机应用程序中运行单元测试

> ID：13512435
> 
> 赞同：0
> 
> 时间：2012-11-22T12:06:17.473
> 
> 标签：.net, unit-testing, nunit, autocad

我正在为 AutoCAD 开发一个插件来处理 DWG。现在，我想为我的代码运行单元测试。

问题是如果没有运行的 AutoCAD 控制台实例，我无法加载 AutoCAD api。我的 DLL 有一个自定义入口点方法，所以问题是如何从该方法执行我的单元测试（最好将我的结果返回到 Visual Studio）。是否有任何单元测试框架（VS、NUnit（带有 Resharper））让我有可能自定义测试运行器的执行方式？

这意味着设置自定义可执行文件以编程方式运行并启动我的单元测试

```
public void MyEntryPoint()
{
   run_unit_tests();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:18:32.423

作为 VS2012 的一部分，您现在可以创建自定义测试运行程序以使用 VS2012 chrome，我知道 xunit 和 nunit 有客户运行程序，VS2012 测试运行程序的插件，您应该能够添加编写自己的运行程序，您可以在[这里查看](http://xunit.codeplex.com/SourceControl/ListDownloadableCommits.aspx)xunit 项目中的代码

# c# - 是否可以在 .net 程序中使用 TOR 网络？

> ID：13512441
> 
> 赞同：5
> 
> 时间：2012-11-22T12:06:57.793
> 
> 标签：c#, privacy, tor

我有一个通过 Internet 使用客户端/服务器方法的程序。我想为我的客户提供通过 TOR 网络隧道的选项，以实现完全保密并防止追踪服务器源。这可能吗？有没有图书馆可以做到这一点？假设它不是一个可行的选择，还有其他建议吗？

参考： [http://en.wikipedia.org/wiki/Tor_(anonymity_network)](http://en.wikipedia.org/wiki/Tor_(anonymity_network))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:38:37.170

假设客户端安装了 Privoxy，那么是的。

```
request.Proxy = new WebProxy("127.0.0.1:8118");  // Default port for privoxy 
```

然后这些请求将通过 Tor。

# python - Python 2.7 UnicodeDecodeError：“ascii”编解码器无法解码字节

> ID：13512443
> 
> 赞同：4
> 
> 时间：2012-11-22T12:07:02.920
> 
> 标签：python, unicode

我一直在用特殊字符（捷克字母）解析一些 docx 文件（UTF-8 编码的 XML）。当我尝试输出到标准输出时，一切都很顺利，但我无法将数据输出到文件中，

> 回溯（最近一次调用）：
> 文件“./test.py”，第 360 行，in
> ofile.write(u'\t\t\t\t\t\n')
> UnicodeEncodeError: 'ascii' codec can't在位置 37 编码字符 u'\xed'：序数不在范围内（128）

尽管我将`word`变量显式转换为 unicode 类型（`type(word)`返回的 unicode），但我尝试对其进行编码，但`.encode('utf-8)`仍然遇到此错误。

这是现在看起来的代码示例：

```
for word in word_list:
    word = unicode(word)
    #...
    ofile.write(u'\t\t\t\t\t<feat att="writtenForm" val="'+word+u'"/>\n')
    #... 
```

我还尝试了以下方法：

```
for word in word_list:
    word = word.encode('utf-8')
    #...
    ofile.write(u'\t\t\t\t\t<feat att="writtenForm" val="'+word+u'"/>\n')
    #... 
```

甚至这两者的结合：

```
word = unicode(word)
word = word.encode('utf-8') 
```

我有点绝望，所以我什至尝试在`ofile.write()`

```
ofile.write(u'\t\t\t\t\t<feat att="writtenForm" val="'+word.encode('utf-8')+u'"/>\n') 
```

我会很感激任何关于我做错了什么的提示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T12:13:41.807

`ofile`是一个字节流，您正在向其写入字符串。因此，它尝试通过编码为字节字符串来处理您的错误。这通常只对 ASCII 字符是安全的。由于`word`包含非 ASCII 字符，因此失败：

```
>>> open('/dev/null', 'wb').write(u'ä')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 0:
                    ordinal not in range(128) 
```

通过使用、 模式和显式编码`ofile`打开文件来创建文本流：[`io.open`](http://docs.python.org/2/library/io.html#io.open)`'wt'`

```
>>> import io
>>> io.open('/dev/null', 'wt', encoding='utf-8').write(u'ä')
1L 
```

或者，您也可以使用[`codecs.open`](http://docs.python.org/2/library/codecs.html#codecs.open)几乎相同的界面，或者使用[`encode`](http://docs.python.org/2/library/stdtypes.html#str.encode).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:32:59.453

菲哈格的回答是正确的。我只是想建议使用显式编码手动将 unicode 转换为字节字符串：

```
ofile.write((u'\t\t\t\t\t<feat att="writtenForm" val="' +
             word + u'"/>\n').encode('utf-8')) 
```

（也许你想知道它是如何使用基本机制而不是高级巫术和黑魔法来完成的`io.open`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-30T20:49:28.253

在写入 word 文档 (.docx) 时，我遇到了类似的错误。特别是欧元符号 (€)。

```
x = "€".encode() 
```

这给出了错误：

UnicodeDecodeError：“ascii”编解码器无法解码位置 0 的字节 0xe2：序数不在范围内（128）

我是如何解决的：

```
x = "€".decode() 
```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-14T12:59:54.627

我在stackoverflow中找到的最佳解决方案是在这篇文章中： [如何修复：“UnicodeDecodeError：'ascii'编解码器无法解码字节”](https://stackoverflow.com/questions/21129020/how-to-fix-unicodedecodeerror-ascii-codec-cant-decode-byte?answertab=votes#tab-top) 放在代码的开头，默认编码将是utf8

```
# encoding=utf8
import sys
reload(sys)
sys.setdefaultencoding('utf8') 
```

# crash - 应用程序在 iOS6 上使用 MapKit 崩溃

> ID：13512446
> 
> 赞同：6
> 
> 时间：2012-11-22T12:07:20.053
> 
> 标签：crash, ios6, mapkit, scrollview, ios6-maps

我的 iPad 专用应用程序（使用 iOS6）中的谷歌地图有一个奇怪的问题。我做了一个水平滚动视图，里面有两个视图。一个是详细信息视图（一些文本，没什么特别的），第二个视图是带有谷歌地图的视图控制器。这是我的应用程序中的通用方案（从两个视图构建的滚动视图）用于几个不同的目的。当我开始在带有 iOS6 的真实 iPad 上测试应用程序时，就会出现问题。应用程序在应该查看滚动视图时崩溃。但不是马上。开始时，可​​以正确查看滚动视图。然后我想用新数据构建一个新的滚动视图。它也很好，并且可以正确查看滚动视图。经过一些这样的操作后，我开始收到越来越多的错误日志，如下所示：

`failed to make complete framebuffer object 8cdd`

运行几次 scrollView 后，应用程序崩溃而没有任何其他错误。代码编辑器指向 main.m 文件，以及以下行：

`int retVal = UIApplicationMain(argc, argv, nil, nil);`

请指导我找出我做错了什么。我的视图控制器中负责查看谷歌地图的 viewDidLoad 方法在哪里：

```
-(void)viewDidLoad {
mapView.mapType = MKMapTypeSatellite;
mapView.showsUserLocation = YES; 

/* ANNOTATION (pin) */

CLLocationCoordinate2D annotationCoord;

annotationCoord.latitude = [self.restaurant.latitude doubleValue];
annotationCoord.longitude = [self.restaurant.longitude doubleValue];

// a pin with the info. 

MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];

annotationPoint.coordinate = annotationCoord;
annotationPoint.title = self.restaurant.name;

// add annotation to the map

    [mapView performSelectorOnMainThread:@selector(addAnnotation:)
                                  withObject:annotationPoint
                                  waitUntilDone:YES];

[annotationPoint release];  

MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance (annotationCoord, 500, 500); 
[self.mapView setRegion:region animated:YES];

[super viewDidLoad];
} 
```

并且无论我如何将带有谷歌地图的视图控制器推送到视图。它总是使我的应用程序崩溃:(。我试过这样：

```
[scrollView addSubview:self.googleMapViewController.view]; 
```

或者那个：

```
[[self navigationController] pushViewController:self.googleMapViewController animated:YES]; 
```

当我在模拟器上运行应用程序时，一切正常。我正在使用 XCode 4.5.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:07:04.073

我在我的一个项目中遇到了同样的问题。它是由内存泄漏引起的。如果您不删除它们，地图视图会消耗大量内存。它不会出现在模拟器上，因为计算机可以使用更多内存。只要确保在您不再需要地图视图时摆脱它们即可。我还建议使用 Instruments (Leaks) 运行应用程序——在这种情况下，它是一个非常有用的工具。

# javascript - 如何使用 onmouseover 在不同位置更改图像以恢复为网站上的默认图像？

> ID：13512449
> 
> 赞同：3
> 
> 时间：2012-11-22T12:07:40.943
> 
> 标签：javascript, image, src, onmouseover, onmouseout

我不是这方面的专家，所以如果这是非常基本的但我找不到答案，请原谅。

所以我想在页面左侧有带有类别的导航部分。每个类别都是不同的站点，每个站点都有自己独特的图像。前任。category1.htm 有 defaultpic1.jpg，category 2.htm 有 defaultpic2.jpg，....

当我将鼠标悬停在导航部分中指向 category2 的链接上时，我希望他们将当前站点上的默认图像更改为 category2 上的默认图像，然后在 onmouseout 上我希望它返回到默认图像。

另请注意，我的图像具有不同的尺寸、不同的高度值。

基本上我知道我可以更改每个页面上的 defaultpic 源，但我想使用相同的脚本，它总是知道要查找默认路径并使用它，而无需更改每个类别中的行。

抱歉，如果我不是很清楚，但我会尽力而为。

我有这个（删除了其他所有内容，所以我只粘贴了我需要帮助的内容）：

```
<html>
<head>
<script type="text/javascript">
          function mouseOverImage2()
{
    document.getElementById("catPic").src='images/defaultpic2.jpg'; document.images['catPic'].style.width='280px'; document.images['catPic'].style.height='420px';;
}  function mouseOverImage3()
{
    document.getElementById("catPic").src='images/defaultpic3.jpg'; document.images['catPic'].style.width='280px'; document.images['catPic'].style.height='266px';;
}
function mouseOutImage()
{
    document.getElementById("catPic").src='???'; //here's what I don't know what to put
}
</script>
</head>
<body>
<div class="nav">
          <ul>
              <li><a href="subcategory2.htm" onmouseover="mouseOverImage2()"
    onmouseout="mouseOutImage()">Subcategory One</a></li>
              <li><a href="subcategory3.htm" onmouseover="mouseOverImage3()"
    onmouseout="mouseOutImage()">Subcategory 2</a></li></ul>
</div>
<div>
              <img id="catPic" src="images/defaultpic1.jpg" width="280" height="420" alt="">
            </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:18:04.813

您需要将旧图像 src 存储在临时变量或某处的元素中，例如，使用全局：

```
var originalImage;
function mouseOverImage2()
{
    originalImage = document.getElementById("catPic").src; 
    ... 
```

然后在鼠标上恢复它：

```
document.getElementById("catPic").src=originalImage; 
```

**编辑**

您可以以几乎相同的方式缓存其他属性（高度、宽度）。需要注意的一件事是不要将老式 html`height`和`width`属性与样式高度和宽度混合在一起——这会导致混淆。

我在[这里更新了小提琴](http://jsfiddle.net/JJj4Z/32/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:37:37.437

我会隐藏*data-**属性中的所有值，这样我就可以重用相同的函数。例如，

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Cats</title>
        <script type="text/javascript">
function mouseOverImage(elm) {
    var img = document.getElementById("catPic");
    img.src = elm.getAttribute('data-cat-image');
    img.style.width = elm.getAttribute('data-cat-width');
    img.style.height = elm.getAttribute('data-cat-height');
}
function mouseOutImage() {
    var img = document.getElementById("catPic");
    img.src = img.getAttribute('data-default-image');
    img.style.width = img.getAttribute('data-default-width');
    img.style.height = img.getAttribute('data-default-height');
}
        </script>
    </head>
    <body>
        <div class="nav">
            <ul>
                <li><a href="subcategory2.htm"
                       data-cat-image="images/defaultpic2.jpg" data-cat-width="280px" data-cat-height="420px"
                       onmouseover="mouseOverImage(this)" onmouseout="mouseOutImage()"
                      >Subcategory One</a></li>
                <li><a href="subcategory3.htm"
                       data-cat-image="images/defaultpic3.jpg" data-cat-width="280px" data-cat-height="226px"
                       onmouseover="mouseOverImage(this)" onmouseout="mouseOutImage()"
                      >Subcategory 2</a></li>
            </ul>
        </div>
        <div>
            <img id="catPic" src="images/defaultpic1.jpg" alt=""
                 data-default-image="images/defaultpic1.jpg" data-default-width="280px" data-default-height="420px"
                 width="280" height="420"
                />
        </div>
    </body>
</html> 
```

您还应该考虑在 JavaScript 中附加侦听器，而不是使用*on**属性，因为这意味着您可以将 JavaScript 与 HTML 完全分开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:15:51.010

您可以在 mousein 中隐藏默认图像源，然后在 mouseout 中恢复它

```
<script type="text/javascript">
function mouseOverImage2()
{
    if(typeof(document.getElementById("catPic").defaultSrc) == "undefined")
        document.getElementById("catPic").defaultSrc = document.getElementById("catPic").src;
    document.getElementById("catPic").src='images/defaultpic2.jpg'; document.images['catPic'].style.width='280px'; document.images['catPic'].style.height='420px';;
}  
function mouseOverImage3()
{
    if(typeof(document.getElementById("catPic").defaultSrc) == "undefined")
        document.getElementById("catPic").defaultSrc = document.getElementById("catPic").src;
    document.getElementById("catPic").src='images/defaultpic3.jpg'; document.images['catPic'].style.width='280px'; document.images['catPic'].style.height='266px';;
}
function mouseOutImage(e)
{
    if(typeof(document.getElementById("catPic").defaultSrc) != "undefined")
        document.getElementById("catPic").src= document.getElementById("catPic").defaultSrc;
}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T12:22:04.197

除了上述之外，从长远来看，只使用一个函数并将元素 no 作为参数传递可能会更容易。沿着这些方向

```
<html>
    <head>
    <script type="text/javascript">
        function mouseOverImage(elementNo){
document.getElementById("catPic").src='images/defaultpic'+elementNo+'.jpg';document.images['catPic'].style.width='280px';     document.images['catPic'].style.height='420px';;
    }  

    function mouseOutImage(elementNo){
        document.getElementById("catPic").src='images/defaultpic'+elementNo+'.jpg'; //here's what I don't know what to put
    }
</script>
</head>
<body>
<div class="nav">
          <ul>
              <li><a href="subcategory2.htm" onmouseover="mouseOverImage(2)"
onmouseout="mouseOutImage(1)">Subcategory One</a></li>
              <li><a href="subcategory3.htm" onmouseover="mouseOverImage(3)"
onmouseout="mouseOutImage(1)">Subcategory 2</a></li></ul>
</div>
<div>
       <img id="catPic" src="images/defaultpic1.jpg" width="280" height="420" alt="">
        </div>

 </body>
 </html> 
```

# ruby - 为什么 Rails 应用程序运行垃圾收集器？

> ID：13512459
> 
> 赞同：0
> 
> 时间：2012-11-22T12:08:06.777
> 
> 标签：ruby, garbage-collection, rack, application-server, preemption

我很确定，所有[Rack应用程序服务器（我对](http://rack.github.com/)[Unicorn](http://unicorn.bogomips.org/)和[Passenger](https://www.phusionpassenger.com/)有一些经验）在创建时为每个工作人员创建单个进程，并且它的状态是“冻结”的。

每当应用服务器收到要处理的请求时，它都会从主进程分叉，并且对分叉进程的所有进一步更改都与原始进程分开。它们受益于写时复制优化，并且可以安全地被处理请求“损坏”。对环境的所有更改仅影响将被抢占的单个进程。

如果我对 RoR 应用程序堆栈的看法是正确的，那么几乎不需要垃圾收集，除非服务单个请求会占用大量时间和内存（通常情况并非如此）。

另一方面，[关于使用 NewRelic 完成的 GC 测量](https://stackoverflow.com/questions/13387664/ruby-gc-execution-exceeding-250-320ms-per-request)的问题及其答案让我得出结论，我一定是完全错误的。

有人可以澄清这个过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:03:07.607

机架应用服务器**不会**在每次请求时分叉，仅在初始化期间：

1.  一、环境在一个进程中加载
2.  然后，服务器分叉几个工人
3.  然后所有请求都分布在这些进程中

这就是垃圾收集器用于保持每个进程内存清洁和稳定的原因。

# jquery - 动态单页 Drupal 站点

> ID：13512462
> 
> 赞同：1
> 
> 时间：2012-11-22T12:08:29.163
> 
> 标签：jquery, drupal, history.js, singlepage

我正在寻找一些关于如何实施以下内容的建议。在这一点上，我根本没有与任何一种解决方案（模块）结婚。也就是说，我几乎肯定会使用`Views / Chaos Tools`and `StateHandler / History.js`。我愿意使用`Panels`or `Blocks`，事实上我真的很想使用 Panels。任何帮助将不胜感激！

我需要创建一个只有一页的站点，并将节点内容动态（使用`AJAX`）加载到视图上方的页面中。内容也必须可以从节点访问，`URLs (node/1)`在视口中加载带有节点内容“前端和中心”的完整站点页面。

如果我能澄清一下，请告诉我，并在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:20:16.403

像这样的工作：[http ://drupal.org/project/views_load_more](http://drupal.org/project/views_load_more)

没用过这个模块，所以什么都不懂，最近才发现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T12:32:15.377

jquery.ajaxit 可能会做你想做的事。

它不是最简洁的解决方案，因为它会加载整个页面，然后仅使用您感兴趣的部分通过 Ajax 加载到页面中，但它易于使用，您可以将其与一些自定义主题结合以减少开销。

有一个[Drupal 6 模块](http://drupal.org/project/ajaxit)可以使用，我已经[启动了一个 Drupal 7 端口](http://drupal.org/node/1226014)。

由于检查时 jQuery 插件目录已损坏，因此我在[https://github.com/sDaniel/ajaxit创建了一个副本](https://github.com/sDaniel/ajaxit)

以下是使用中的插件示例：[http ://www.lamp83.de](http://www.lamp83.de)

# css - 图像未从 CSS 背景属性加载到 chrome 中

> ID：13512464
> 
> 赞同：0
> 
> 时间：2012-11-22T12:08:36.283
> 
> 标签：css, google-chrome

我正在使用“背景：#BDBDBD url(image.png) top left no-repeat”这个css属性用于两个设置了宽度和高度的div元素。在单击按钮时，我通过在 setInterval() 的帮助下使函数连续运行来动态更改嵌套 div 的宽度。该图像未在 chrome 中加载，但在 Firefox 和 IE 中运行良好。许多搜索表明在 chrome 中使用背景图像不起作用，但这些解决方案似乎都不起作用。

```
<div id="boxes">
          <div id="dialog" class="window" style="overflow: auto">

              <div id="progressBar" class="meter-wrap" style="display: block;position: relative; margin: auto;">
                 <div class="meter-value" style="background-color: #05C; width: 40%">
                    <div class="meter-text">
                       Loading... 
                     </div>
                 </div>
              </div>
              <div class="meter-text-message">
                        Loading...
              </div>
  </div> 
```

CSS：

```
.meter-wrap, .meter-value, .meter-text {
        width: 155px; height: 30px;
}

.meter-wrap, .meter-value {
    background: #bdbdbd url('/sf-images/tracker/inline_progress_bar.png') top left no-repeat;
} 
```

js代码：

```
function setProgressBar() {
    var pgBar = jQuery("#progressBar");
    pgBar.show();
    running = true;
    var inter = null;

    function run() {
        pgBar.find(".meter-value").css("width", progress + "%");
        pgBar.find(".meter-text").text(progress + "%");
        if (progress == 100) {
            jQuery(".meter-text-message").html("Complete");
            clearInterval(inter);
            running = false;
        }
    }
    inter = setInterval(run, 50);
} 
```

第一次发现图像没有加载，我通过另一种方法使 div 元素以图像为背景可见。之后，当我执行上述 js 方法时，图像正确加载。

# c - 在C中将字符串存储在文件中

> ID：13512471
> 
> 赞同：4
> 
> 时间：2012-11-22T12:09:25.703
> 
> 标签：c, file-handling

我创建了一个小程序来将一些记录输入到文件中。

```
#include<stdio.h>

int main(void)
{
    FILE *fp;
    //opening a file to write
    fp = fopen("try.rec","w");
    if(fp == NULL)
    {
        printf("\nSorry! Couldn't Create File");
        exit(-1);
    }
    int id = 1;
    char name[300] = "Cipher", address[300] = "Virtual Street", phone[20] = "223322212";
    fprintf(fp,"%d, %s, %s, %s", id, name, address, phone);
    fclose(fp);
    return 0;
} 
```

现在，它做得很好，这没有错误。但我也做了一个小程序来读取该记录：

```
#include<stdio.h>

int main(void)
{
    FILE *fp;
    fp = fopen("try.rec","r");
    if (fp == NULL)
    {
        printf("Could not Access File. :(");
        return -1;
    }
    int id;
    char name[300], add[300], phone[20];
    fscanf(fp, "%d , %s , %s , %s",&id, &name, &add, &phone);
    fclose(fp);
    printf("\nDetails from File try.rec\n---------------------------\nID: %d \nName: %s \nAddress: %s \nPhone: %s \n", id, name, add, phone);
    return 0;
} 
```

但是在打印第三个字符串时，它会打印垃圾值。我挖得更深，发现当我在我的第一个程序中替换`"Cipher"`为`"Cipher "`（最后有一个额外的空间）并运行它时，第二个程序中的第三个字符串只输出`Virtual`（空格后没有任何内容）然后第四个字符串又是垃圾.

那么，有没有其他好的替代方法可以在 C 中从文件中放置和获取字符串。或者我在我的任何一个程序中都做错了什么？

期待您的帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:20:09.837

问题是`%s`格式告诉`fscanf`读取所有非空白字符，所以

```
fscanf(fp, "%d , %s , %s , %s",&id, &name, &add, &phone); 
```

将读`"Cipher,"`入`name`（除此之外：正确的参数应该是`name`而不是`&name`），然后下一次转换失败，因为`fscanf`找不到`','`.

后面有空格，找到空格后`"Cipher "`扫描停止，然后下一次扫描在`"Virtual"`和之间的空格处停止`"Street"`，然后再次没有`','`格式要求，进一步转换失败。

您应该检查返回值`fscanf`以验证是否完成了适当数量的转换，如果成功的次数太少，则相应地处理这种情况。

在这里，您可以使用 tha`%[^,]`字符集格式来扫描您的字符串，

```
fscanf(fp, " %d , %[^,] , %[^,] , %s", &id, name, add, phone); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:20:49.010

查看 的返回值`fscanf`，返回成功转换的次数。此外，您告诉`fscanf`函数在空格（格式字符串中的空格）上分隔标记，因此包含空格（如`"Virtual Street"`）的字符串被视为两个标记。

我建议您阅读整行`fgets`，然后使用[`strtok`](http://en.cppreference.com/w/c/string/byte/strtok)逗号分隔字符串。

# regex - 在 Perl 中，if (s/^\+//) 是什么意思？

> ID：13512472
> 
> 赞同：2
> 
> 时间：2012-11-22T12:09:35.167
> 
> 标签：regex, perl, perltk

在 Perl/Tk 代码中，我发现了如下条件语句

```
if (s/^\+//)
{
   #do something
}
elsif (/^-/)
{
   #do another thing
} 
```

似乎已经完成了一些模式匹配。但我无法理解。谁能帮我理解这种模式匹配？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T12:16:28.077

它们都是正则表达式。您可以在[perlre](http://perldoc.perl.org/perlre.html)和[perlretut](http://perldoc.perl.org/perlretut.html)阅读它们。您可以在[http://www.rubular.com](http://www.rubular.com/r/CEtqZ3YUIi)上玩弄它们。

他们都隐含地用`$_`. 您的代码行中可能有一个`while`或`foreach`周围没有循环变量。在这种情况下，`$_`成为那个循环变量。例如，它可能包含正在读取的文件的当前行。

1.  如果 的当前值`$_`包含一个`+`（加号）作为字符串开头的第一个字符，则`#do somehting`.
2.  否则，如果它包含一个`-`（减号）符号，`#do another thing`.

在案例 1 中，它也会用`+`任何内容替换该符号（即删除它）。它不会删除`-`2\. 但是。

* * *

让我们看一下[YAPE::Regex::Explain](https://metacpan.org/module/YAPE%3a%3aRegex%3a%3aExplain)的解释。

```
use YAPE::Regex::Explain;
print YAPE::Regex::Explain->new(qr/^\+/)->explain(); 
```

这里是。在我们的案例中并没有真正的帮助，但仍然是一个不错的工具。请注意，`(?-imsx`和`)`部分是 Perl 所暗示的默认内容。除非您更改它们，否则它们始终存在。

```
The regular expression:

(?-imsx:^\+)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  \+                       '+'
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

**更新**：正如 Mikko L 在评论中指出的那样，您也许应该重构/更改这段代码。虽然它可能会做它应该做的事情，但我相信让它更具可读性是一个好主意。写它的人显然并不关心你作为后来的维护者。我建议你这样做。您可以将其更改为：

```
# look at the content of $_ (current line?)
if ( s/^\+// )
{
  # the line starts with a + sign,
  # which we remove!

  #do something
}
elsif ( m/^-/ )
{
  # the line starts witha - sign
  # we do NOT remove the - sign!

   #do another thing
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T12:16:34.550

这些是正则表达式，用于模式匹配和替换。

你应该阅读这个概念，但至于你的问题：

```
s/^\+// 
```

如果字符串以加号开头，则删除该加号（“s”表示“替换”），并返回 true。

```
/^-/ 
```

如果字符串以减号开头，则为真。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T12:18:48.057

这段代码相当于

```
if ($_ =~ s/^\+//) {  # s/// modifies $_ by default
   #do something
}
elsif ($_ =~ m/^-/) {  # m// searches $_ by default
   #do another thing
} 
```

`s///`并且`m//`是 regexp 类似引号的运算符。[您可以在perlop](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)中了解它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T15:34:32.933

其他答案总结了代码的工作原理，但并没有说明原因。这是一个简单的例子，说明为什么人们可能会使用这种逻辑。

```
#!/usr/bin/env perl

use strict;
use warnings;

my $args = {};

for ( @ARGV ) {
  if ( s/^no// ) {
    $args->{$_} = 0;
  } else {
    $args->{$_} = 1;
  }
}

use Data::Dumper;
print Dumper $args; 
```

当你调用脚本时

```
./test.pl hi nobye 
```

你得到

```
$VAR1 = {
          'hi' => 1,
          'bye' => 0
        }; 
```

键是字符串，但是如果它在前面，`no`则将其删除（以获取有问题的键）并将值设置为`0`.

OP 的示例涉及更多一点，但遵循相同的逻辑。

*   如果密钥以 a 开头`+`，请将其删除并执行某些操作
*   如果密钥以 a 开头`-`，请不要删除它并执行其他操作

# php - 最简单的内容管理框架

> ID：13512481
> 
> 赞同：4
> 
> 时间：2012-11-22T12:10:03.250
> 
> 标签：php, content-management-system

我从未使用过内容管理框架。据我了解，CMF 可以更轻松地管理数据库表、概念、实体。还可以查看带有分页等的列表。

哪个是最简单的 CMF 启动/到期（在 PHP 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:17:01.703

当我开始学习 CMF/CMS 时，我发现[这个网站](http://www.phpframeworks.com)非常有帮助。那里有很多框架，其中大多数通常会满足您的需求。但是当涉及到 CMF/CMS 时，有大约一千种方法可以走，这应该适合你的编码风格。尤其是当您不是真正喜欢 MVC 编码时，您可能不得不对您将使用的框架做出妥协。最简单的当然是 wordpress，但这可能是对您可能计划的轻描淡写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:14:00.940

我发现[MODx](http://modx.com/)是一个很棒的、易于学习的 CMF。

# c++ - 覆盖 Direct3D 接口？

> ID：13512482
> 
> 赞同：2
> 
> 时间：2012-11-22T12:10:12.717
> 
> 标签：c++, interface, overriding, virtual, direct3d

我的项目启动了一个目标进程，向其中注入了一个库，用于挂钩 Direct3D 函数。我过去成功地做到了这一点，但决定将库重写为更接近 Direct3D 接口的规范。这里的想法是创建一组我自己的 1:1 包装类，每个类都继承一个 DirectX 接口（即 ，`class CD3D8 : IDirect3D8`等等`class CD3DDevice8 : IDirect3DDevice8`）。由于每个底层 DirectX COM 接口的所有成员都是纯虚拟方法，我想我可以轻松地覆盖它们......

因此，当我的库挂钩时`Direct3DCreate8`，我返回一个指向 my`CDirect3D8`而不是标准的指针`IDirect3D8`。然后我的库使用该指针的虚拟表来挂钩方法 #15，即`IDirect3D8::CreateDevice`. 一旦被调用，我返回一个指向而`CDirect3DDevice8`不是`IDirect3DDevice8`. 一切似乎都很好，除了注入的应用程序没有调用任何覆盖的函数！不知何故，该应用程序似乎正在调用原始接口函数而不是我自己的。我在这里错过了某种概念吗？例如，我是否需要手动将虚拟表指针重新映射到自定义包装类中的指针？

这是我到目前为止得到的（仅显示 d3d8）：

D3D.h

```
#pragma once

#define STDM(method)        COM_DECLSPEC_NOTHROW HRESULT STDMETHODCALLTYPE method
#define STDM_(type,method)  COM_DECLSPEC_NOTHROW type STDMETHODCALLTYPE method

template<class IDirect3D8>
class CD3D : public IDirect3D8
{
public:
    CD3D();
    ~CD3D();

    /*** IUnknown methods ***/
    STDM(QueryInterface)(THIS_ REFIID riid, void** ppvObj);
    STDM_(ULONG,AddRef)(THIS);
    STDM_(ULONG,Release)(THIS);

    /*** IDirect3D8 methods ***/
    STDM(RegisterSoftwareDevice)(THIS_ void* pInitializeFunction);
    STDM_(UINT, GetAdapterCount)(THIS);
    STDM(GetAdapterIdentifier)(THIS_ UINT Adapter,DWORD Flags,D3DADAPTER_IDENTIFIER8* pIdentifier);
    STDM_(UINT, GetAdapterModeCount)(THIS_ UINT Adapter);
    STDM(EnumAdapterModes)(THIS_ UINT Adapter,UINT Mode,D3DDISPLAYMODE* pMode);
    STDM(GetAdapterDisplayMode)(THIS_ UINT Adapter,D3DDISPLAYMODE* pMode);
    STDM(CheckDeviceType)(THIS_ UINT Adapter,D3DDEVTYPE CheckType,D3DFORMAT DisplayFormat,D3DFORMAT BackBufferFormat,BOOL Windowed);
    STDM(CheckDeviceFormat)(THIS_ UINT Adapter,D3DDEVTYPE DeviceType,D3DFORMAT AdapterFormat,DWORD Usage,D3DRESOURCETYPE RType,D3DFORMAT CheckFormat);
    STDM(CheckDeviceMultiSampleType)(THIS_ UINT Adapter,D3DDEVTYPE DeviceType,D3DFORMAT SurfaceFormat,BOOL Windowed,D3DMULTISAMPLE_TYPE MultiSampleType);
    STDM(CheckDepthStencilMatch)(THIS_ UINT Adapter,D3DDEVTYPE DeviceType,D3DFORMAT AdapterFormat,D3DFORMAT RenderTargetFormat,D3DFORMAT DepthStencilFormat);
    STDM(GetDeviceCaps)(THIS_ UINT Adapter,D3DDEVTYPE DeviceType,D3DCAPS8* pCaps);
    STDM_(HMONITOR, GetAdapterMonitor)(THIS_ UINT Adapter);
    STDM(CreateDevice)(THIS_ UINT Adapter,D3DDEVTYPE DeviceType,HWND hFocusWindow,DWORD BehaviorFlags,D3DPRESENT_PARAMETERS* pPresentationParameters,IDirect3DDevice8** ppReturnedDeviceInterface);
}; 
```

D3D.cpp

```
#include "stdafx.h"

#define STDIMP(iface, method, ...) COM_DECLSPEC_NOTHROW HRESULT STDMETHODCALLTYPE CD3D<iface>::method(__VA_ARGS__)
#define STDIMP_(iface, type, method, ...) COM_DECLSPEC_NOTHROW type STDMETHODCALLTYPE CD3D<iface>::method(__VA_ARGS__)
#define STDIMP8(method, ...) STDIMP(IDirect3D8, method, __VA_ARGS__)
#define STDIMP8_(type, method, ...)  STDIMP_(IDirect3D8, type, method, __VA_ARGS__)

CD3D<IDirect3D8>::CD3D()
{
}

CD3D<IDirect3D8>::~CD3D()
{
}

STDIMP8(QueryInterface, THIS_ REFIID riid, void** ppvObj) {
    return QueryInterface( riid, ppvObj );
}

STDIMP8_(ULONG, AddRef, THIS) {
    return AddRef();
}

STDIMP8_(ULONG, Release, THIS) {
    return Release();
}

STDIMP8(RegisterSoftwareDevice, THIS_ void* pInitializeFunction) {
    return RegisterSoftwareDevice( pInitializeFunction );
}

STDIMP8_(UINT, GetAdapterCount, THIS) {
    return GetAdapterCount();
}

STDIMP8(GetAdapterIdentifier, THIS_ UINT Adapter, DWORD Flags, D3DADAPTER_IDENTIFIER8* pIdentifier) {
    return GetAdapterIdentifier( Adapter, Flags, pIdentifier );
}

STDIMP8_(UINT, GetAdapterModeCount, THIS_ UINT Adapter) {
    return GetAdapterModeCount( Adapter );
}

STDIMP8(EnumAdapterModes, THIS_ UINT Adapter, UINT Mode, D3DDISPLAYMODE* pMode) {
    return EnumAdapterModes( Adapter, Mode, pMode );
}

STDIMP8(GetAdapterDisplayMode, THIS_ UINT Adapter, D3DDISPLAYMODE* pMode) {
    return GetAdapterDisplayMode( Adapter, pMode );
}

STDIMP8(CheckDeviceType, THIS_ UINT Adapter, D3DDEVTYPE CheckType, D3DFORMAT DisplayFormat, D3DFORMAT BackBufferFormat, BOOL Windowed) {
    return CheckDeviceType( Adapter, CheckType, DisplayFormat, BackBufferFormat, Windowed );
}

STDIMP8(CheckDeviceFormat, THIS_ UINT Adapter, D3DDEVTYPE DeviceType, D3DFORMAT AdapterFormat, DWORD Usage, D3DRESOURCETYPE RType, D3DFORMAT CheckFormat) {
    return CheckDeviceFormat( Adapter, DeviceType, AdapterFormat, Usage, RType, CheckFormat );
}

STDIMP8(CheckDeviceMultiSampleType, THIS_ UINT Adapter, D3DDEVTYPE DeviceType, D3DFORMAT SurfaceFormat, BOOL Windowed, D3DMULTISAMPLE_TYPE MultiSampleType) {
    return CheckDeviceMultiSampleType( Adapter, DeviceType, SurfaceFormat, Windowed, MultiSampleType );
}

STDIMP8(CheckDepthStencilMatch, THIS_ UINT Adapter, D3DDEVTYPE DeviceType, D3DFORMAT AdapterFormat, D3DFORMAT RenderTargetFormat, D3DFORMAT DepthStencilFormat) {
    return CheckDepthStencilMatch( Adapter, DeviceType, AdapterFormat, RenderTargetFormat, DepthStencilFormat );
}

STDIMP8(GetDeviceCaps, THIS_ UINT Adapter, D3DDEVTYPE DeviceType, D3DCAPS8* pCaps) {
    return GetDeviceCaps( Adapter, DeviceType, pCaps );
}

STDIMP8_(HMONITOR, GetAdapterMonitor, THIS_ UINT Adapter) {
    return GetAdapterMonitor( Adapter );
}

STDIMP8(CreateDevice, THIS_ UINT Adapter, D3DDEVTYPE DeviceType, HWND hFocusWindow, DWORD BehaviorFlags, D3DPRESENT_PARAMETERS* pPresentationParameters, IDirect3DDevice8** ppReturnedDeviceInterface) {
    return CreateDevice( Adapter, DeviceType, hFocusWindow, BehaviorFlags, pPresentationParameters, ppReturnedDeviceInterface );
} 
```

Main.cpp（使用[Microsoft Detours 3.0](http://research.microsoft.com/en-us/downloads/d36340fb-4d3c-4ddd-bf5b-1db25d03713d/default.aspx)）：

```
#include <detours.h>
#include "D3D.h"

typedef HMODULE (WINAPI * HookLoadLibraryA)( LPCSTR lpFileName );
typedef IDirect3D8 *(WINAPI * HookDirect3DCreate8)( UINT SdkVersion );
typedef HRESULT (WINAPI * HookCreateDevice8)( IDirect3DDevice8* pInterface, UINT Adapter, D3DDEVTYPE DeviceType, HWND hFocusWindow, DWORD BehaviorFlags, D3DPRESENT_PARAMETERS* pPresentationParameters, IDirect3DDevice8** ppReturnedDeviceInterface );
HookLoadLibraryA RealLoadLibraryA;
HookDirect3DCreate8 RealDirect3DCreate8;
HookCreateDevice8 RealCreateDevice8;
//...
CD3D<IDirect3D8> *m_d3d8;
CD3DDevice<IDirect3D8> *m_d3dDev8;
//...
RealLoadLibraryA = (HookLoadLibraryA)GetProcAddress(GetModuleHandleA("kernel32.dll"), "LoadLibraryA");
DetourTransactionBegin();
DetourUpdateThread(GetCurrentThread());
DetourAttach(&(PVOID&)RealLoadLibraryA, FakeLoadLibraryA);
DetourTransactionCommit();
//...

VOID VirtualHook( PVOID pInterface, PVOID pHookProc, PVOID pOldProc, int iIndex )
{
    // Hook a procedure within an interface's virtual table
    PDWORD pVtable = (PDWORD)*((PDWORD)pInterface);
    DWORD lpflOldProtect;

    VirtualProtect( (PVOID)&pVtable[iIndex], sizeof(DWORD), PAGE_READWRITE, &lpflOldProtect );
    if( pOldProc ) *(DWORD*)pOldProc = pVtable[iIndex];
    pVtable[iIndex] = (DWORD)pHookProc;
    VirtualProtect( pVtable, sizeof(DWORD), lpflOldProtect, &lpflOldProtect );
}

HRESULT WINAPI FakeCreateDevice8( IDirect3DDevice8* pInterface, UINT Adapter, D3DDEVTYPE DeviceType, HWND hFocusWindow, DWORD BehaviorFlags, D3DPRESENT_PARAMETERS* pPresentationParameters, IDirect3DDevice8** ppReturnedDeviceInterface )
{
    HRESULT ret = RealCreateDevice8( pInterface, Adapter, DeviceType, hFocusWindow, BehaviorFlags, pPresentationParameters, ppReturnedDeviceInterface );
    // Save the registers
    __asm pushad
    if(*ppReturnedDeviceInterface != NULL)
        m_d3dDev8 = reinterpret_cast<CD3DDevice<IDirect3D8> *>(*ppReturnedDeviceInterface);
    // Restore the registers
    __asm popad
    return ret;
}

IDirect3D8 *WINAPI FakeDirect3DCreate8( UINT SdkVersion )
{
    m_d3d8 = reinterpret_cast<CD3D<IDirect3D8> *>(RealDirect3DCreate8( SdkVersion ));
    if( m_d3d8 ) {
        // Hook CreateDevice (vftable index #15)
        VirtualHook( m_d3d8, &FakeCreateDevice8, &RealCreateDevice8, 15 );
    }
    return m_d3d8;
}

HMODULE WINAPI FakeLoadLibraryA( LPCSTR lpFileName )
{
    CStringA strFileName( lpFileName );
    int i = strFileName.ReverseFind('\\');
    if(i != -1) strFileName = strFileName.Right(i + 1);
    if( strFileName.CompareNoCase("d3d8.dll") == 0 )
    {
        // Hook Direct3DCreate8
        HMODULE m_hD3D = RealLoadLibraryA( lpFileName );
        RealDirect3DCreate8 = (HookDirect3DCreate8)GetProcAddress(m_hD3D, "Direct3DCreate8");
        DetourTransactionBegin();
        DetourUpdateThread( GetCurrentThread() );
        DetourAttach(&(PVOID&)RealDirect3DCreate8, FakeDirect3DCreate8);
        DetourTransactionCommit();
        return m_hD3D;
    }
} 
```

...钩子函数被调用，但我的包装函数都没有，注入的应用程序像往常一样运行。为什么是这样？当然，我可以为每个 DirectX 接口（针对每个 Direct3D 版本）中找到的每个函数手动设置挂钩，但这样做的目的是尽量避免这样做，并使其保持清洁。那么有没有办法让它按我的预期工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:10:18.033

您正在使用`reinterpret_cast`，它不会做太多事情，因为底层对象仍然有一个指向“真实”`IDirect3D8`或`IDirect3DDevice8`COM vtable 的指针，它将用于调用。

Instead, instantiate your custom `CD3D` or `CD3DDevice` by passing it the original object instance. Then modify all your calls to call back the correct method on the original object -- your class effectively acting as a transparent proxy.

I mean something such as:

```
STDIMP8_(ULONG, AddRef, THIS) {
    return realObject->AddRef();
} 
```

with `realObject` being the original `IDirect3D8*`.

# c++ - g++ vs Visual Studio

> ID：13512483
> 
> 赞同：1
> 
> 时间：2012-11-22T12:10:18.070
> 
> 标签：c++, g++

你能告诉我为什么 Visual Studio 编译这段代码（在消息的末尾）就好了，但是 g++ 给了我一个错误：

```
chapter8_1.cpp:97:50: error: macro "minor" passed 3 arguments, but takes just 1
chapter8_1.cpp:136:36: error: macro "minor" passed 3 arguments, but takes just 1
chapter8_1.cpp:97:11: error: function definition does not declare parameters
chapter8_1.cpp: In member function ‘double Matrices::determinant(double**, int)’:
chapter8_1.cpp:136:17: error: ‘minor’ was not declared in this scope 
```

现在这两个函数在 a 中`struct`，但如果我在 no 中编译它们`struct`（只是独立的函数），那么 g++ 不会给我任何错误，并且程序可以正常工作。该程序旨在计算任何方阵的行列式。

代码：

```
struct Matrices
{  
.......

    double **minor(double **matrix, int dim, int row)  // row stands for the number of column that we are expanding by
    {
        int dim2 =--dim;
        double **minor2;
        minor2=new double*[dim2];                            // creates minor matrix 
        for(int i=0; i<dim2; ++i)
            minor2[i]=new double[dim2];

        for(int hhh=0; hhh<dim2; ++hhh)
            {   
                int bbb=0;
                for(int aaa=0; aaa<dim2+1; ++aaa)                  // initializing the minor matrix
                    {

                    if (aaa==row)
                        continue;
                    else
                        {
                            minor2[hhh][bbb]=matrix[hhh+1][aaa];
                            ++bbb;
                        }
                    }
                }
        return minor2;
    }

    double determinant(double **mat, int dim)
    { 
    double det=0;
    if(dim==1)
    det=mat[0][0];
    if(dim==2)
    det=mat[0][0]*mat[1][1]-mat[0][1]*mat[1][0];
    else
    {
    double ***setOFmat;                                      // pointer that points to minors
    setOFmat=new double**[dim];
    for (int ddd=0; ddd<dim; ++ddd)                         // ddd represents here the number of column we are expanding by
        setOFmat[ddd]=minor(mat, dim, ddd);
    for (int ddd=0; ddd<dim; ++ddd)                         // ddd srepresents the same here
    {

        det= det + pow(-1.0,ddd)*mat[0][ddd]*determinant(setOFmat[ddd], dim-1);    // actual formula that calculates the determinant

    }
    }
    return det;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T08:04:23.200

您应该更仔细地阅读错误消息:-)

> Chapter8_1.cpp:97:50：错误：***宏***“次要”传递了 3 个参数，但只需要 1 个

这意味着`gcc`认为这`minor`是某种描述的宏，因此该行的预处理：

```
double **minor(double **matrix, int dim, int row) 
```

很可能很麻烦。

我会编译它`gcc -E`以获得预处理器输出，这样你就可以知道：

*   它是如何破坏你的生产线的；和
*   希望在哪里`minor`定义宏。

# couchdb - 在 couchdb 视图中删除的文档

> ID：13512484
> 
> 赞同：1
> 
> 时间：2012-11-22T12:10:20.190
> 
> 标签：couchdb

如何删除couchdb中已删除的文档

当临时视图在 couchdb 蒲团上运行时。我也收到删除的文件。

```
 if(!doc._deleted) and if(!_deleted_conflicts) 
```

上述条件用于临时视图。但是问题又来了。

请任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:36:20.327

在您的视图中添加一个条件，例如，

```
function(doc){
   if(!doc._deleted){
       emit(null,doc);
   }
} 
```

那么您可以避免在查看结果中删除文档。

# python - 通过`echo t | ` 作为 `subprocess.check_output` 中的 arg

> ID：13512486
> 
> 赞同：4
> 
> 时间：2012-11-22T12:10:31.740
> 
> 标签：python, batch-file, subprocess

我是 Python 新手。我对以下问题感到震惊。

我使用 python 脚本中的 subprocess.check_output 调用了一个 exe。

```
res = subprocess.check_output(["svn.exe", "list", "Https://127.0.0.1:443/svn/Repos"], stderr=subprocess.STDOUT) 
```

在命令提示符下执行脚本时，我会收到一条提示消息以输入输入，

```
(R)eject, accept (t)emporarily or accept (p)ermanently? 
```

但是当我从批处理文件执行脚本时，我没有收到此消息，默认情况下调用`check_output`失败。
有什么方法可以在调用时传递输入`subprocess.check_output`，以便我可以批量运行脚本。

嗨，我更新了我的问题：我尝试使用以下命令从命令提示符运行 svn，

```
echo t | svn.exe list Https://127.0.0.1:443/svn/Repos 
```

我得到了没有任何用户输入的输出。

但我无法通过`echo t |`。`subprocess.check_output`有没有办法做到这一点？

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:15:04.143

我想这不是标题中问题的答案，但是您是否尝试`svn`过运行`--non-interactive --trust-server-cert`？这不是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:15:34.313

您收到的消息看起来与我的证书有关。因此，与其增加将输入传递给命令的复杂性，不如修复证书问题或将[标志`--trust-server-cert`传递](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html#svn.ref.svn.sw)给 SVN 命令。

```
res = subprocess.check_output(["svn.exe", "--trust-server-cert", "list", "url"], stderr=subprocess.STDOUT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:53:38.843

我为我的问题找到了两种解决方案，

1.从这个链接[http://desipenguin.com/techblog/2009/01/13/fun-with-python-subprocessstdin/找到这个灵魂](http://desipenguin.com/techblog/2009/01/13/fun-with-python-subprocessstdin/)

```
proc = subprocess.Popen((["svn.exe", "list", "Https://127.0.0.1:443/svn/Repos"], stdin=subprocess.PIPE, stdout=subprocess.PIPE)
print proc.communicate(‘t\n’)[0] 
```

这解决了向进程提供关键输入“t”的问题。但我无法读取输出。所以，我遵循了第二个解决方案。

2.使用两个子流程：

```
p = subprocess.Popen("echo t |", shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
p1 = subprocess.Popen(["svn.exe", "list", "Https://127.0.0.1:443/svn/Repos"], shell=True, **stdin=p.stdout**, stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()
output = p1[0] 
```

这里进程 1 的输出作为进程 2 的输入给出。所以这等于`echo t | svnmucc mkdir d:\temp`。

谢谢。

# magento - 自定义期权价格计算

> ID：13512489
> 
> 赞同：1
> 
> 时间：2012-11-22T12:10:54.840
> 
> 标签：magento, options, custom-attributes

自定义期权价格计算如何适用于固定价格和百分比价格。

我想将百分比计算功能从基价更改为总价。目前它的计算价格是从基础价格开始的。如何将其从基价更改为总价？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:59:36.480

这是在

`Mage_Catalog_Model_Product_Type_Price::_applyOptionsPrice`

如果这仅适用于特殊产品，您可能希望使用客户价格处理程序创建自己的产品类型。

# c++ - 如何禁用编辑控件对对话框首次启动的关注？

> ID：13512493
> 
> 赞同：3
> 
> 时间：2012-11-22T12:11:23.713
> 
> 标签：c++, winapi, focus, controls, edit

大家好，阅读本文。在此先感谢您的时间。

问题之前的一件事：我既不使用 MFC 也不使用 Windows 窗体，只使用 C++ 中的 WinApi。

好吧，我正在用 Visual C++ 制作一个多项式计算器。我向它添加了一个对话框，它是`.rc`使用拖放方法在资源（文件）中创建的。`CreateWindowEx`我想如果我用（但我不想）创建我的对话框，就不会有这样的问题。

我的对话框有一些编辑控件。一切都很好，除了当对话框启动时，**编辑控件之一获得焦点**以准备接受键盘输入。

我已经包含了`EN_KILLFOCUS`（编辑由于选择另一个控件而失去焦点时将其发送给父级）的管理。

在这里，我从控件读取到`wstring`（宽字符的字符串 -`_UNICODE`已定义），使用某种解析器来验证这一点`wstring`并删除坏字符，然后将正确的字符串放入同一个编辑控件中。它工作正常，但这是**我的问题的根源**：

当没有输入时，解析器返回`string "0"`（不是`NULL`，字符串只是设置为“0”），就好像控制有焦点，然后在我单击对话框中的任何内容之前失去它。

由于这一点，以及**其他一些事情**（这是我必须弄清楚的），在 Dialog 启动解析器中将其`string "0"`进行编辑。

我想让我的编辑无法从键盘输入，直到我单击其中一个编辑（包括这个）。如果不可能，我想在对话框的开头清除整个文本（能够输入不是问题，我只是想防止解析器`string "0"`在开头输入）我的代码：

在 DlgProc 我有：

```
//up here is switch to manage all controls
    case MyEditID:                // here is ID of one of my edits from resources
        switch (HIWORD(wParam))
        {
        case EN_KILLFOCUS:        // edit lost focus - another control selected

            if (LOWORD(wParam)==MyEditID)  //necessary to determine if
                                          // one of allowed Edits sent this message
                                          // because I have also other Edits
            {
                GetDlgItemText(hPanel, LOWORD(wParam), MyTempWcharArray, 100);
                MyTempString.assign(MyTempWcharArray);

                w1 = polynomial(MyTempWcharArray); // parser takes the string
                     // and removes bad chars in constructor
                     // polynomial is my class - you don't have to care of it
                     // w1 is declared before as object of polynomial class

                MyTempString = w1.ConversionToString();
                SetDlgItemText(hDialog, LOWORD(wParam), sw1);
            }
            break;
        }
        break; 
```

为Edit的ID设置什么整数有关系吗？

我知道`SetFocus()`，和`WM_SETFOCUS`消息。在这种情况下，我无法正常工作。

如果我没有包括一些重要的东西让你明白我的观点，请告诉我。对不起，我只是`WinAPI`世界上的新手。

编辑：对于那些有类似问题的人：**不要这样做：** 我做了一个解决方法，将全局变量 ProcessKillFocus 设置为 false，表示不应处理消息管理中的指令，除了最后（就在休息之前；）我正在改变它是真的，所以下次和以后它将被处理：

```
case EN_KILLFOCUS:
           if (ProcessKillFocus && LOWORD(wParam)==MyEditID)
           {
                // first time global ProcessKillFocus is false so all this is skipped
                // 2nd time and later do all the stuff
           }
           ProcessKillFocus = true;
           break; 
```

非常感谢 Sheyros Adikari 让我的问题易于理解！！！非常感谢 patriiice 对一个巨大的混乱问题的简单回答！！！

**答案：** 顺便说一句：patriiice，我试过这个：

```
case WM_INITDIALOG:
        SetFocus(GetDlgItem(hDialog, Desired_Control_ID));
        return (INT_PTR)FALSE;
        break; 
```

它只是工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:24:01.740

您必须将 FALSE 返回到[WM_INITDIALOG](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645428%28v=vs.85%29.aspx)消息并自行设置正确的焦点。

# java - 基于休眠注释的查询执行错误？

> ID：13512494
> 
> 赞同：1
> 
> 时间：2012-11-22T12:11:24.917
> 
> 标签：java, hibernate, jpa, annotations, hql

实际上，在我的基于 Hibernate Annotation 的应用程序中有 ValueObject 类（Bean 类），这些是..

```
public Class CourseVO{
       @Column(name="NAME")
    private String name;
    } 
```

技能组VO类

```
public Class SkillsetVO{
@ManyToOne
@JoinColumn(name="COURSE_ID", insertable=false, updatable=false)
private CourseVO courseSID;
@ManyToMany(cascade = {CascadeType.ALL}, fetch=FetchType.EAGER)
    @JoinTable(name="SKILLSET_COURSE",joinColumns={@JoinColumn(name="SKILLSET_ID",referencedColumnName="S_ID")},inverseJoinColumns={@JoinColumn(name="S_ID")})
  private Set<CourseVO> course;} 
```

时间表VO类

```
public class TimetableVO{
@ManyToOne
    @JoinColumn(name="SKILLSET_ID", insertable=false, updatable=false)
    private SkillsetVO skillsetSID;
} 
```

**注意**上面称为 S_ID 的代码 Primarikey 包含另一个名为 AbstractVO 的类，所以我的所有类都扩展了这个 AbstractVO 类，所以主键创建没有问题......现在在我的业务逻辑中我写了一个查询：

```
select tt from TimetableVO tt join tt.skillsetSID.course c where c.name in (:courseNames) 
```

然后我给出 :courseName like 'java' 然后给出 是的，这是正确的，我只根据 ValueObjects 创建三个表...但是休眠可以做到这一点..请帮我写查询... **`error`** `SKILLSET_COURSE table not exist`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:17:30.637

使用`hbm2ddl`属性 to`create`或`update`。或者手动打开控制台并发出`CREATE`语句。

# php - 我将如何检测两个时间段的不重叠？

> ID：13512501
> 
> 赞同：-1
> 
> 时间：2012-11-22T12:12:07.257
> 
> 标签：php, algorithm

我有一个用户输入表单，其中用户选择（YYYY-mm-dd）格式的日期，（H：i）的开始时间和（H：i）格式的结束时间，或者假设我有三个具有以下值的变量.

```
$date      = '2012-11-22';
$startTime = '1:00';
$endTime   = '4:00'; 
```

我现在必须将此值与现有的值数组进行比较。我现有的数组看起来像这样。

```
Array
(
    [0] => Array
        (
            [id] => 1
            [start_datetime] => 2012-11-22 02:30:00
            [end_datetime] => 2012-11-22 05:00:00
        )

    [1] => Array
        (
            [id] => 2
            [start_datetime] => 2012-11-22 00:00:00
            [end_datetime] => 2012-11-22 02:30:00
        )

    [2] => Array
        (
            [id] => 3
            [start_datetime] => 2012-11-22 05:00:00
            [end_datetime] => 2012-11-22 08:00:00
        )

    [3] => Array
        (
            [id] => 4
            [start_datetime] => 2012-11-22 08:00:00
            [end_datetime] => 2012-11-22 11:00:00
        )

    [4] => Array
        (
            [id] => 5
            [start_datetime] => 2012-11-22 11:00:00
            [end_datetime] => 2012-11-22 17:00:00
        )

) 
```

我必须检查选择的用户输入**[日期、开始时间和结束时间]**是否在给定的时隙数组中已经预订了任何时隙。从我看到的解决方案是首先拆分并匹配日期，如果它与日期匹配，则需要相应地匹配时间。我对如何使用它感到困惑。我希望从你们那里得到一些简单的解决方案:)

谢谢你。

**更新：** 我试过这样做。

```
$arenaSurfaceBooking = array(
    array(
        'id' => 1,
        'start_datetime' => '2012-11-22 02:30:00',
        'end_datetime' => '2012-11-22 05:00:00',
    ),
    array(
        'id' => 2,
        'start_datetime' => '2012-11-22 00:00:00',
        'end_datetime' => '2012-11-22 02:30:00',
    ),
    array(
        'id' => 3,
        'start_datetime' => '2012-11-22 05:00:00',
        'end_datetime' => '2012-11-22 08:00:00',
    ),
    array(
        'id' => 4,
        'start_datetime' => '2012-11-22 08:00:00',
        'end_datetime' => '2012-11-22 11:00:00',
    ),
    array(
        'id' => 5,
        'start_datetime' => '2012-11-22 11:00:00',
        'end_datetime' => '2012-11-22 17:00:00',
    )
);

foreach($arenaSurfaceBooking as $booking) {
    $bookedDateTimestamp = strtotime(date('Y-m-d', strtotime($booking['start_datetime'])));
    $inputDateTimestamp  = strtotime($context['date']);
    $bookedStartTime     = strtotime(date('H:i', strtotime($booking['start_datetime'])));
    $bookedEndTime       = strtotime(date('H:i', strtotime($booking['end_datetime'])));
    $userStartTime       = strtotime(date('H:i', strtotime($context['start_datetime'])));
    $userEndTime         = strtotime(date('H:i', strtotime($context['end_datetime'])));
    if( $bookedDateTimestamp == $inputDateTimestamp) {
        if( $userEndTime <= $bookedStartTime || $userStartTime >= $bookedEndTime) {
            echo 'i am booked';
        }
    }
} 
```

它不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:47:27.260

假设用户日期/时间的格式如下：

```
$date      = '2012-11-22';
$startTime = '01:00'; // note the extra '0' in front
$endTime   = '04:00';

$userStartTime = "$date $startTime";
$userEndTime = "$date $endTime"; 
```

以这种方式查找重叠：

```
$overlaps = 0;
foreach ($block as $block) {
    if ($userStartTime < $block['end_datetime'] && $userEndTime > $block['start_datetime']) {
        ++$overlaps;
    }
}

// if $overlaps > 0 -> there's a booking in the way 
```

这基本上采取了这样的非重叠条件：

```
$userEndTime <= $block['start_datetime'] || $userStartTime >= $block['end_datetime'] 
```

并简单地交换条件。

这也可以很容易地写入 SQL，以减少数据库和应用程序之间的网络开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:34:05.817

检查一下...并根据您的要求对其进行修改以匹配所有现有时间...我只为您匹配了一个...

```
$date = '2012-11-22';
$startTime = '2:30';
$endTime = '4:00';

$existing[] = 
        array
        (
            'id' => 1,
            'start_datetime' => '2012-11-22 02:30:00',
            'end_datetime' => '2012-11-22 05:00:00'
        );

$UserStartTime = strtotime($date." ".$startTime);
$UserEndTime = strtotime($date." ".$endTime);

$ExistingStartTime = strtotime($existing[0]['start_datetime']);
$ExistingEndTime = strtotime($existing[0]['end_datetime']);

if($UserStartTime >= $ExistingStartTime && $UserEndTime <= $ExistingEndTime)
{
    echo "BOOKED";
}
else
{
    echo "NOT BOOKED";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:31:06.750

由于现有数组来自 SQL 查询：

```
$date      = '2012-11-22';
$startTime = '1:00'; 
$endTime   = '4:00';

if(strlen($startTime==4)){$startTime="0".$startTime;}
if(strlen($endTime==4)){$endTime="0".$startTime;}

$query="SELECT id FROM table WHERE start_datetime='$date $startTime:00' OR end_datetime='$date $endtimeTime:00'"; 
```

如果查询返回某些内容，则`id`返回已预订！

如果您想知道任何数据库信息是否与两个日期时间匹配，只需将 替换`OR`为`AND`.

如果您想知道用户时间段是否在数据库的任何条目之间：

```
$query="SELECT id FROM table WHERE (start_datetime>='$date $startTime:00' AND start_datetime<='$date $endTime:00') OR (end_datetime<='$date $starttimeTime:00' AND end_datetime>='$date $endtimeTime:00') OR (start_datetime<='$date $startTime:00' AND end_datetime>='$date $starttimeTime:00')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:39:16.047

这可能会帮助你

```
$date = '2012-11-22';
$startTime= '1:00:00'; // padded two zero
$endTime = '4:00:00'; // padded two zero

$start_datetime = $date. " ".(strlen(intval(substr($startTime,0,2))) > 1 ? $startTime : "0".$startTime);

$end_datetime = $date. " ".(strlen(intval(substr($endTime,0,2))) > 1? $endTime : "0".$endTime);
for($i = 0;$i<count($your_array);$i++)
{
    if($your_array[$i]['start_datetime'] == $start_datetime)
    {
        // Start date Found
    }
    if($your_array[$i]['end_datetime'] == $end_datetime)
    {
        // Start end Found
    }
} 
```

# asp.net - GridView 额外的标题或合并的单元格会破坏编辑更新

> ID：13512502
> 
> 赞同：0
> 
> 时间：2012-11-22T12:12:10.173
> 
> 标签：asp.net, gridview, header, cells

我需要在我的 gridview 中添加一个包含合并单元格的额外标题，这很容易做到。

问题是一旦 GridView 中存在额外的标题，Edit- **Update**就不再起作用了。准确地说是**更新。**当我按更新时，所有列都变为空，并且额外标题的行消失了。

任何人都可以添加额外的标题行但更新有效？

# wordpress - Wordpress：使用自定义存档显示类别和分类法

> ID：13512503
> 
> 赞同：0
> 
> 时间：2012-11-22T12:12:11.937
> 
> 标签：wordpress

我想显示

*   类别*新闻*（仅包含标准帖子）与`archive.php`

和

*   类别*X*（仅包含自定义帖子类型）或分类*Y*`archive-custom.php`

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:18:29.510

如果您查看模板层次结构，我相信这是可能的：

[http://codex.wordpress.org/images/1/18/Template_Hierarchy.png](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)

遵循层次结构约定，它应该是：

*   `category-x.php`-> 自动用于该类别
*   `taxonomy-y.php`-> 自动用于该分类
*   `archive.php`如果没有更具体的模板可用，将用于新闻。

# objective-c - nslog 可以打印变量，但变量不保存值？

> ID：13512504
> 
> 赞同：1
> 
> 时间：2012-11-22T12:12:16.210
> 
> 标签：objective-c, ios, xcode

我有这个：

```
 NSUserDefaults *defauts = [NSUserDefaults standardUserDefaults];
    NSString *namestr = [defauts objectForKey:@"savednamestring"];

    NSLog(@"%@",namestr);
    [unusedtext setText:namestr];
    NSLog(@"%@",unusedtext); 
    NSLog(@"%@",unusedtext.text); 
```

现在，首先`nslog`打印出 的内容`namestr`，例如“Jack”。

但是第二个`nslog`和第三个`nslog`都给出`null`。

当我尝试传递`namestr`给实体时，它给了我一个`unrecognized selector sent to instance`错误，我知道这是因为 `namestr`没有将任何东西传递给实体，而是首先如何`nslog`打印出来`namestr`。我是否需要将其转换为某种格式才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:21:21.067

`unusedText`可能没有初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:34:55.283

我假设未使用的文本是 UILabel。

有几个问题：

*   您使用的是 Interface Builder 还是 Storyboard？如果是，您是否将 var 与组件相关联？
*   如果您不使用 IB 或 Storyboard，是否已初始化此“未使用文本”？
*   你在用ARC吗？如果不是，是不是未使用的文本自动释放？还是在你的代码之前发布？
*   如果您使用 ARC，未使用的文本是否标记为 STRONG？

希望有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:25:06.017

那是因为你还没有初始化 usedtext 变量。

如果是 NSString 则执行此操作

```
NSUserDefaults *defauts = [NSUserDefaults standardUserDefaults];
NSString *namestr = [defauts objectForKey:@"savednamestring"];

NSLog(@"%@",namestr);
unusedtext = [NSString stringWithString:namestr];
NSLog(@"%@",unusedtext); 
NSLog(@"%@",unusedtext.text); 
```

如果它是一个 UITextView 或 UITextfield 比这样做，而不是！

```
NSUserDefaults *defauts = [NSUserDefaults standardUserDefaults];
NSString *namestr = [defauts objectForKey:@"savednamestring"];

NSLog(@"%@",namestr);
UITextField *unusedtext = [[UITextField alloc] init];
[unusedtext setText:namestr];
NSLog(@"%@",unusedtext); 
NSLog(@"%@",unusedtext.text); 
```

希望有帮助！

# python - 如何从python中的测试方法中提取测试方法名称

> ID：13512508
> 
> 赞同：1
> 
> 时间：2012-11-22T12:13:05.537
> 
> 标签：python, unit-testing, test-suite

我有各种 python unitttest 方法打包为一个TestSuite，一个特定的测试方法看起来像例如

```
<input.MyTest testMethod=test_simple> 
```

看起来这是一个类（这个东西的类型是`input.MyTest`），但有一个额外的属性（？）测试方法。

如何`test_simple`从属性中提取名称`testMethod`（或其他任何名称）？

测试代码 (MyTest.py)

```
class MyTest(unittest.TestCase):
   def test_simple(self):
       pass 
```

套件代码

```
from input import MyTest
suite = test.TestSuite()
suite.addTest(MyTest("test_simple"))
print suite._tests[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:32:47.963

通过快速阅读文档，您可能想从[`test.id()`](http://docs.python.org/3/library/unittest.html#unittest.TestCase.id)

> ID（）
> 
> 返回标识特定测试用例的字符串。这通常是测试方法的全名，包括模块和类名。

# android - 没有收到来自 Zxing 条码扫描器的 Intent

> ID：13512509
> 
> 赞同：1
> 
> 时间：2012-11-22T12:13:06.660
> 
> 标签：android, android-intent, zxing

我知道其他一些人遇到了这个问题，但我已经遵循了解决方案，但它仍然对我不起作用。

我创建了一个新应用程序，它有 1 个活动，其中有 1 个按钮（扫描按钮）和 2 个文本视图（它们将输出 Zxing 目前返回的格式名称和内容）。

我已按照 ScanningViaIntent 教程进行操作，但似乎没有成功`onActivityResult`

下面是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final IntentIntegrator integrator = new IntentIntegrator(this);
    Button btnScan = (Button) findViewById(R.id.button1);
    btnScan.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            integrator.initiateScan();
        }
    });
}

public void OnActivityResult(int requestCode, int resultCode, Intent intent)
{
    Log.i("result", "hit line");
    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);

    TextView tv1 = (TextView) findViewById(R.id.textView1);
    TextView tv2 = (TextView) findViewById(R.id.textView2);

    if(scanResult != null)
    {
        System.out.println("format: " + scanResult.getFormatName());
        System.out.println("contents: " + scanResult.getContents());

        tv1.setText(scanResult.getFormatName());
        tv2.setText(scanResult.getContents());
    }
    else
    {
        tv1.setText("ERROR");
    }
} 
```

TextView1 从不说“错误”，因此 scanResult 似乎不是 null 并且我的 Log.i() 行从未被击中，所以我认为它`onActivityResult`甚至没有被击中。

这可能与`final`为 OnClick() 方法制作 IntentIntegrator 有关吗？当我在 OnClick() 中创建 IntentIntegrator 时，我使用 getParent() 将 Activity 传递给构造函数，但这强制关闭了我的应用程序，并在 IntentItegrator 中出现 NullReferenceException。

我是否正确使用图书馆？

谢谢你的时间，

雨披

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:26:54.980

您实际上并没有覆盖该方法`onActivityResult()`，因为您已经实现了`OnActivityResult()`. 结果没有调用您的方法。其他一切看起来都不错。

如果您使用注释，这就是您捕捉到的那种东西`@Override`——好习惯，因为它会捕捉到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:49:50.270

你在哪里打电话`startActivityForResult(..)`？你可能想使用这样的东西：

```
Intent intentScan = new Intent(BS_PACKAGE + ".SCAN");
intentScan.addCategory(Intent.CATEGORY_DEFAULT);

// check which types of codes to scan for
if (desiredBarcodeFormats != null) {
  // set the desired barcode types
  StringBuilder joinedByComma = new StringBuilder();
  for (String format : desiredBarcodeFormats) {
    if (joinedByComma.length() > 0) {
      joinedByComma.append(',');
    }
    joinedByComma.append(format);
  }
  intentScan.putExtra("SCAN_FORMATS", joinedByComma.toString());
}

String targetAppPackage = findTargetAppPackage(intentScan);
if (targetAppPackage == null) {
  return showDownloadDialog();
}
intentScan.setPackage(targetAppPackage);
intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
attachMoreExtras(intentScan);
startActivityForResult(intentScan, REQUEST_CODE); 
```

**findTargetAppPackage**：

```
 private String findTargetAppPackage(Intent intent) {
    PackageManager pm = activity.getPackageManager();
    List<ResolveInfo> availableApps = pm.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    if (availableApps != null) {
      for (ResolveInfo availableApp : availableApps) {
        String packageName = availableApp.activityInfo.packageName;
        if (targetApplications.contains(packageName)) {
          return packageName;
        }
      }
    }
    return null;
  } 
```

要查看更完整的示例，请转到[此处](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T23:40:27.743

您需要从存储库 [https://github.com/zxing/zxing/tree/master/android-integration/src/main/java/com/google/zxing/integration/android获取最新的类](https://github.com/zxing/zxing/tree/master/android-integration/src/main/java/com/google/zxing/integration/android)

请参阅该类的 javadoc 以了解如何使用它。首先添加代码来调用 Intent：

```
IntentIntegrator integrator = new IntentIntegrator(yourActivity);
integrator.initiateScan(); 
```

其次，将此添加到您的 Activity 以处理结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode,      intent);
    if (scanResult != null) {
        // handle scan result
    }
    // else continue with any other code you need in the method
} 
```

更多信息在这里[https://github.com/zxing/zxing/wiki/Scanning-Via-Intent](https://github.com/zxing/zxing/wiki/Scanning-Via-Intent)

# iphone - 无法实例化名为 UICollectionView 的类

> ID：13512513
> 
> 赞同：0
> 
> 时间：2012-11-22T12:13:31.293
> 
> 标签：iphone, ios, xcode, ios6, uicollectionview

” `Could not instantiate class named UICollectionView`“我是iOS6的新手请解释为什么会出现上述错误？

当我尝试使用此[示例将](http://yashesh87.wordpress.com/2012/09/12/uicollectionview-sample-code/)[UIViewCollection](http://www.raywenderlich.com/22417/beginning-uicollectionview-in-ios-6-part-22)`StoryBoard`的项目转换 为 nib时出现此错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T13:57:52.793

您可能正在使用低于 6.0 的 iOS 版本运行您的应用程序 - 升级您的设备或使用适当的 iOS 模拟器版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:57:04.130

我正在使用ios5模拟器，当我将模拟器更改为iOS6时它可以工作。很久以前就更正了，忘记更新stackOverflow。无论如何感谢您的回答。+1 为用户 1034669。

# google-chrome - 如何使用 selenium webdriver 在 chrome 多功能框/地址栏中输入内容？

> ID：13512516
> 
> 赞同：3
> 
> 时间：2012-11-22T12:13:36.060
> 
> 标签：google-chrome, selenium-webdriver

我想使用 Selenium webdriver 在 chrome 多功能框（地址栏）中输入内容，以检查是否有目标扩展。我知道如何使用 selenium 发送密钥，但不知道如何将它们发送到多功能框。我已经在谷歌上搜索了一段时间，但我不知道该怎么做。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:48:27.770

事实证明，由于它超出了 Selenium 的范围，因此无法输入多功能框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:27:01.823

I'm not 100% positive but from my understanding of Selenium I would be surprised if you can do that, since Selenium is for automating the web and web elements etc. and what your trying to do is automate the browser application.

# jsf - 使用 PrimeFaces 在 subTable 中创建 subTable

> ID：13512517
> 
> 赞同：1
> 
> 时间：2012-11-22T12:13:38.097
> 
> 标签：jsf, xhtml, primefaces

我需要知道如何在 PrimeFaces 中创建如下表。我已经尝试在 subTree 中使用 subTree，但在 PrimeFaces 中是不允许的。

为此，我有 3 个类： 产品：名称，包含项目数组 项目：名称，包含内容数组 内容：名称

我还需要执行 for 循环，但它似乎在 panelGrid 中是允许的。

科尔1......科尔2.......科尔3

* * *

产品1......项目1.......内容1

.....................内容 2

.....................内容 3

................... 项目 2....... 内容 5

.....................内容 6

* * *

产品2......项目3.......内容9

.....................内容 10

.....................第 4 项.......内容 15

................................内容 17

# jquery - 动态删除动态添加的脚本

> ID：13512518
> 
> 赞同：1
> 
> 时间：2012-11-22T12:13:38.300
> 
> 标签：jquery

我有以下内容，可在需要时将 javascript 和/或 jquery 脚本动态添加到我的页面：

```
var script = document.createElement( 'script' );
script.type = 'text/javascript';
script.src = url;
$("#someElement").append( script ); 
```

是否可以删除已动态添加的多个脚本之一？即如果`$("#someElement")`是`.remove`ed，那也会删除其中的脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:19:47.677

请在此处查看第一个遮阳篷，我自己无法更好地解释它； [通过 JQuery 加载和卸载 JS 文件的最佳方法](https://stackoverflow.com/questions/6738380/best-way-to-load-and-unload-js-file-via-jquery)

基本上，你不能，但你*可以*通过卸载细节（删除事件、清除变量等）来解决这个问题。有关更多信息，请参阅链接。

# f# - F#中的枚举器和配置

> ID：13512519
> 
> 赞同：4
> 
> 时间：2012-11-22T12:13:38.593
> 
> 标签：f#, ienumerable, idisposable

我试图从我简化的示例中吸取以下行为的教训：

```
let groupedEnum  (input: 'a seq) =
   using (input.GetEnumerator()) (fun en ->
   Seq.unfold(fun _ -> 
                  if en.MoveNext() then 
                     Some(en.Current, ())
                  else None) ()
   )

//WORKS    
let c = groupedEnum    ("11111122334569999"   |>  List.ofSeq ) |>  List.ofSeq 

//BOOM !!  System.NullReferenceException
let c = groupedEnum    ("11111122334569999"                  ) |>  List.ofSeq 
```

*   枚举数“en”是否独立于被捕获而被处理？[（我想是的，但是在资源库上的这个 msdn 文档](http://msdn.microsoft.com/en-us/library/dd233240.aspx)旁边，有什么要说的/要阅读的关于这种行为的材料）

*   如果先将序列转换为列表，为什么它会起作用？

**编辑：**这只是一个说明行为的玩具示例，请勿遵循。直接操作枚举数的充分理由很少。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T12:35:05.673

`using`一旦 lambda 函数返回，该函数就会释放枚举数。但是，lambda 函数使用创建一个惰性序列，`Seq.unfold`并且该惰性序列*在*从`groupedEnum`.

您可以完全评估内部的整个序列`using`（通过添加`List.ofSeq`那里），或者您需要在`Dispose`到达生成序列的末尾时调用：

```
let groupedEnum  (input: 'a seq) =
   let en = input.GetEnumerator()
   Seq.unfold(fun _ -> 
       if en.MoveNext() then 
           Some(en.Current, ())
       else 
           en.Dispose()
           None) 
```

在这种情况下，异常处理变得非常困难，但我想一种方法是将主体包裹起来`try .. with`并在发生异常时调用`Dispose`（然后返回`None`）。

如果您改用序列表达式，则含义会`use`发生变化，并且它会在到达序列结束后自动处理枚举数（而不是在返回惰性序列时）。因此，使用序列表达式可能是更好的选择，因为已经为您完成了艰苦的工作：

```
let groupedEnum  (input: 'a seq) = seq {
   use en = input.GetEnumerator()
   let rec loop () = seq {
      if en.MoveNext() then 
         yield en.Current
         yield! loop () }
   yield! loop () } 
```

**编辑**为什么它在你的第一个例子中起作用？F# list 类型返回的枚举器只是忽略`Dispose`并继续工作，而如果您调用`Dispose`由 a 返回`string`的枚举器，则无法再次使用该枚举器。（这可以说是 F# 列表类型的有点奇怪的行为。）

# ant - 如何在 ant 中获取 flattenmapper 结果？

> ID：13512529
> 
> 赞同：4
> 
> 时间：2012-11-22T12:14:03.827
> 
> 标签：ant

请从我的 ant 文件中找到以下几个目标：

```
<fileset id="test-dep-jars" dir="o:/java">
    <include name="junit-4.10.jar"/>
    <include name="easymock-3.1\easymock-3.1.jar"/>
    <include name="easymockclassextension-3.1\easymockclassextension-3.1.jar"/>
</fileset>

<target name="copy-test-deps">
    <mkdir dir="${deploy.dir}"/>
    <copy todir="${deploy.dir}">
        <fileset refid="test-dep-jars"/>
        <flattenmapper/>
    </copy>
</target>

<target name="jar" depends="copy-test-deps">
    <jar destfile="${deploy.dir}/test-${ant.project.name}.jar" basedir="${test.classes.dir}" 
         includes="**/*.class" filesetmanifest="skip">
        <manifest>
            <attribute name="Class-Path"
                       value="${ant.project.name}.jar junit-4.10.jar easymock-3.1.jar easymockclassextension-3.1.jar"/>
        </manifest>
    </jar>
</target> 
```

我的问题是我必须两次声明测试依赖项 jar - 一次是在定义 test-dep-jars 文件集时，第二次是在指定生成的 jar 的 Class-Path 清单属性时。

如果我只能掌握 flattenmapper 结果，那么我就可以在 Class-Path 中按原样使用它。

我怎样才能掌握 flattenmapper 结果？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:03:29.510

如果你想使用 flattenmapper，你可以使用以下...

```
<pathconvert property="mf.classpath" pathsep=" ">
    <path refid="build.class.path" />
    <flattenmapper />
</pathconvert>

<manifest>
            <attribute name="Class-Path"
                       value="${ant.project.name}.jar ${mf.classpath}"/>
        </manifest> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T18:50:30.340

我建议改用[manifestclasspath](http://ant.apache.org/manual/Tasks/manifestclasspath.html)任务：

```
<manifestclasspath property="jar.classpath" jarfile="${jar.file}">
    <classpath>
        <fileset dir="${deploy.dir}" includes="*.jar"/>
    </classpath>
</manifestclasspath>

<jar destfile="${jar.file}" basedir="${classes.dir}">
    <manifest>
        <attribute name="Main-Class" value="${jar.main.class}" />
        <attribute name="Class-Path" value="${jar.classpath}" />
    </manifest>
</jar> 
```

它将生成正确的类路径属性定义，甚至可以使用相对路径（例如，如果您要将依赖 jar 放在子目录中）。

# jquery - telerik RadHTMLPlaceHolder 自定义 jquery 工具提示部分可见

> ID：13512533
> 
> 赞同：1
> 
> 时间：2012-11-22T12:14:25.457
> 
> 标签：jquery, silverlight, telerik, tiptip

我正在使用`RadHTMLPlaceHolder`in silverlight 浏览器外应用程序。问题是，由于其他网格元素，我的[jquery 工具提示](http://code.drewwilson.com/entry/tiptip-jquery-plugin)被使用并通过 html 源传递到`RadHTMLPlaceHolder`只能部分看到。

```
<Border Grid.Row="6" Grid.ColumnSpan="2" Width="auto"  Height="auto" 
           BorderBrush="#000000" BorderThickness="1" CornerRadius="5">
     <telerik:RadHtmlPlaceholder  VerticalAlignment="Stretch" 
           HorizontalAlignment="Stretch" x:Name="htmlSource" />
</Border> 
```

有什么解决办法？`Canvas.zindex`也不工作。

# android - 以编程方式在表格布局中的按钮之间留出空间

> ID：13512538
> 
> 赞同：1
> 
> 时间：2012-11-22T12:14:38.437
> 
> 标签：android, android-tablelayout

我有这样的活动。

![图片][1]

这里开始、完成和交付是按钮`.how to give space between buttons.?`

下面是我的代码。

我设计了一个表格布局`.xml`，因为它的数据是动态的，所以我以编程方式添加行。

```
/*** xml code ****/

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFF"
    android:orientation="vertical" >

     <ImageView         android:id="@+id/title_image"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/timg"/>

    <TextView   android:id="@+id/title"
                        android:layout_width="fill_parent"
                        android:layout_height="63dp"
                        android:text="Alpha Restaurant"
                        android:gravity="center_horizontal"
                        android:layout_toRightOf="@+id/title_image"
                        android:background="#ED4040"
                        android:typeface="serif"
                        android:textColor="#FFF"
                        android:textStyle="bold"
                        android:textSize="35sp"/>

      <TextView         android:id="@+id/tbno"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/title"
                        android:text="Kitchen Dashboard  :"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="20dp"
                        android:typeface="serif"
                        android:textColor="#05539C"
                        android:textStyle="bold"
                        android:textSize="18sp"/>

     <TextView  android:id="@+id/tvtbno"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/title"
                        android:layout_toRightOf="@+id/tbno"
                        android:text="KIT01"
                        android:layout_marginLeft="10dp"
                        android:layout_marginTop="20dp"
                        android:typeface="serif"
                        android:textColor="#05539C"
                        android:textStyle="bold"
                        android:textSize="18sp"/>

     <TextView  android:id="@+id/time"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/title"
                        android:text="Time :"
                        android:layout_toRightOf="@+id/tvtbno"
                        android:layout_marginLeft="60dp"
                        android:layout_marginTop="20dp"
                        android:typeface="serif"
                        android:textColor="#05539C"
                        android:textStyle="bold"
                        android:textSize="18sp"/>

     <TextView  android:id="@+id/tvtime"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/title"
                        android:layout_toRightOf="@+id/time"
                        android:text="KIT01"
                        android:layout_marginLeft="10dp"
                        android:layout_marginTop="20dp"
                        android:typeface="serif"
                        android:textColor="#05539C"
                        android:textStyle="bold"
                        android:textSize="18sp"/>

     <TextView  android:id="@+id/date"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/title"
                        android:text="Date :"
                        android:layout_toRightOf="@+id/tvtime"
                        android:layout_marginLeft="60dp"
                        android:layout_marginTop="20dp"
                        android:typeface="serif"
                        android:textColor="#05539C"
                        android:textStyle="bold"
                        android:textSize="18sp"/>

     <TextView  android:id="@+id/tvdate"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/title"
                        android:layout_toRightOf="@+id/date"
                        android:text="KIT01"
                        android:layout_marginLeft="10dp"
                        android:layout_marginTop="20dp"
                        android:typeface="serif"
                        android:textColor="#05539C"
                        android:textStyle="bold"
                        android:textSize="18sp"/>

     <ScrollView        android:layout_width="fill_parent"
                                android:layout_height="370dp"
                                android:id="@+id/sc" android:layout_below="@+id/tvdate">

    <TableLayout  android:id="@+id/tableLayout1"
                          android:layout_below="@+id/tbno"
                          android:layout_marginTop="20dp"
                  android:layout_width="wrap_content"  
                  android:layout_height="550dp"  
                  android:shrinkColumns="*"  
                  android:stretchColumns="*">  

    <TableRow  
                  android:id="@+id/tableRow1"  
                  android:background="#A9D0F5"
                  android:layout_height="wrap_content"  
                  android:layout_width="match_parent">  

    <TextView  
                  android:id="@+id/tv1"  
                  android:text="Lot No"
                  android:layout_marginLeft="15dp"
                  android:textSize="20dp"
                  android:textStyle="bold"
                  android:textColor="#190710"
                  android:typeface="serif"/>
    <TextView  
                  android:id="@+id/tv2"  
                  android:text="Item"
                  android:layout_marginLeft="40dp"
                  android:textSize="20dp"
                  android:textStyle="bold"  
                  android:textColor="#190710"
                  android:typeface="serif"/>  

    <TextView  
                  android:id="@+id/tv3"  
                  android:text="Quantity"
                  android:layout_marginLeft="40dp"
                  android:textSize="20dp"
                  android:textStyle="bold"  
                  android:textColor="#190710"
                  android:typeface="serif"/>

    <TextView  
                  android:id="@+id/tv4"  
                  android:text="Order"
                  android:layout_marginLeft="40dp"
                  android:textSize="20dp"
                  android:textStyle="bold"  
                  android:textColor="#190710"
                  android:typeface="serif"/>
    <TextView  
                  android:id="@+id/tv5"  
                  android:text="Notes"
                  android:layout_marginLeft="40dp"
                  android:textSize="20dp"
                  android:textStyle="bold"  
                  android:textColor="#190710"
                  android:typeface="serif"/>

    <TextView  
                  android:id="@+id/tv6"  
                  android:text="Start"
                  android:layout_marginLeft="40dp"
                  android:textSize="20dp"
                  android:textStyle="bold"  
                  android:textColor="#190710"
                  android:typeface="serif"/>

    <TextView  
                  android:id="@+id/tv7"  
                  android:text="Completed"
                  android:layout_marginLeft="40dp"
                  android:textSize="20dp"
                  android:textStyle="bold"  
                  android:textColor="#190710"
                  android:typeface="serif"/>

    <TextView  
                  android:id="@+id/tv8"  
                  android:text="Delivered"
                  android:layout_marginLeft="40dp"
                  android:textSize="20dp"
                  android:textStyle="bold"  
                  android:textColor="#190710"
                  android:typeface="serif"/>
    </TableRow>  

    </TableLayout>
    </ScrollView>
    <!-- <TextView      android:id="@+id/total"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Total : "
                        android:textSize="22sp"
                        android:typeface="serif"
                        android:textStyle="bold"
                        android:layout_marginLeft="230dp"
                        android:layout_below="@+id/tableLayout1"/>

    <TextView   android:id="@+id/tvtotal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="500 Rs"
                        android:textSize="22sp"
                        android:typeface="serif"
                        android:textStyle="bold"
                        android:layout_toRightOf="@+id/total"
                        android:layout_below="@+id/tableLayout1"/>-->

    <Button     android:id="@+id/refresh"
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="Refresh"
                        android:textStyle="bold"
                        android:layout_marginTop="20dp"
                        android:layout_marginLeft="340dp"
                        android:layout_below="@+id/sc"/>

     <Button    android:id="@+id/home"
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="Home"
                        android:layout_marginLeft="20dp"
                        android:textStyle="bold"
                        android:layout_marginTop="20dp"
                        android:layout_toRightOf="@+id/refresh"
                        android:layout_below="@+id/sc"/>  

</RelativeLayout>

/**** java code ****/

@Override
                protected void onPostExecute(Boolean a) {
                        // TODO Auto-generated method stub
                        super.onPostExecute(a);
                        progressDialog.dismiss();
                        int count= 0;

                        try{
                        allarray = new JSONArray(result);
                        System.out.println("array is " +allarray.length());
                        JSONObject json_data=null;
                                for(int j=0;j<allarray.length();j++){
                                json_data = allarray.getJSONObject(j);
                                json_data.getString("PreparationLot");
                                json_data.getString("Prep_MenuItem");
                                json_data.getString("Prep_Quantity");
                                json_data.getString("Prep_Order_Number");
                                json_data.getString("Prep_Notes");

                                TableLayout tl = (TableLayout) findViewById(R.id.tableLayout1);

                        TableRow tr = new TableRow(DashBoard.this);
                        if(count%2!=0) {
                                tr.setBackgroundColor(Color.rgb(222, 219, 219));
                        }else{
                                tr.setBackgroundColor(Color.rgb(255, 255, 255));
                        }
                        tr.setId(20);
                        tr.setLayoutParams(new LayoutParams());

                        final TextView lotno = new TextView(DashBoard.this);
                        lotno.setId(200+count);// define id that must be unique
                        lotno.setText(""+json_data.getString("PreparationLot")); // set the text for the header
                        lotno.setTextColor(Color.BLACK); // set the color
                        lotno.setPadding(10, 10, 0, 10); // set the padding (if required)
                        lotno.setTextSize(14);
                                tr.addView(lotno);

                                final TextView itemname = new TextView(DashBoard.this);
                                itemname.setId(200+count);// define id that must be unique
                                itemname.setText(""+json_data.getString("Prep_MenuItem")); // set the text for the header
                                itemname.setTextColor(Color.BLACK); // set the color
                                itemname.setMaxLines(3);
                                itemname.setPadding(10, 10, 0, 10); // set the padding (if required)
                                itemname.setTextSize(14);
                                tr.addView(itemname);

                                TextView qty = new TextView(DashBoard.this);
                                qty.setId(200+count);// define id that must be unique
                                qty.setText(""+json_data.getString("Prep_Quantity")); // set the text for the header
                                qty.setTextColor(Color.BLACK); // set the color
                                qty.setPadding(50, 10, 0, 10); // set the padding (if required)
                                qty.setTextSize(14);
                                tr.addView(qty);

                                TextView order = new TextView(DashBoard.this);
                                order.setId(200+count);// define id that must be unique
                                order.setText(""+json_data.getString("Prep_Order_Number")); // set the text for the header
                                order.setTextColor(Color.BLACK); // set the color
                                order.setPadding(40, 10, 0, 10); // set the padding (if required)
                                order.setTextSize(14);
                                tr.addView(order);

                                TextView notes = new TextView(DashBoard.this);
                                notes.setId(200+count);// define id that must be unique
                                notes.setText(""+json_data.getString("Prep_Notes")); // set the text for the header
                                notes.setTextColor(Color.BLACK); // set the color
                                notes.setPadding(40, 10, 0, 10); // set the padding (if required)
                                notes.setTextSize(14);
                                tr.addView(notes);

                            final Button start = new Button(DashBoard.this);
                            start.setText("Start");
                            start.setMaxWidth(10);
                            start.setTextSize(16);
                            start.setTypeface(null, Typeface.BOLD);
                            start.setBackgroundColor(Color.RED);
                        tr.addView(start);

                        final Button complete = new Button(DashBoard.this);
                        complete.setText("Complete");
                        complete.setMaxWidth(10);
                        complete.setTextSize(16);
                        complete.setTypeface(null, Typeface.BOLD);
                        complete.setBackgroundColor(Color.BLUE);
                        tr.addView(complete);

                        final Button delivered = new Button(DashBoard.this);
                        delivered.setText("Delivered");
                        delivered.setMaxWidth(10);
                        delivered.setTextSize(16);
                        delivered.setTypeface(null, Typeface.BOLD);
                        delivered.setBackgroundColor(Color.BLUE);
                        tr.addView(delivered);

                                tl.addView(tr, new TableLayout.LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));

               count++;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:20:11.893

使用以下代码添加按钮，如果要增加空间，请将 leftMargin 从 10 增加到 15 或 20。

```
 final Button start = new Button(DashBoard.this);
            ViewGroup.MarginLayoutParams lpButton = (ViewGroup.MarginLayoutParams) start.getLayoutParams();
            lpButton.setMargins(10, 0, 0, 0);
                start.setText("Start");
                start.setMaxWidth(10);
                start.setTextSize(16);
                start.setTypeface(null, Typeface.BOLD);
                start.setBackgroundColor(Color.RED);
                start.setLayoutParams(lpButton);
                tr.addView(start);

            final Button complete = new Button(DashBoard.this);
            complete.setText("Complete");
            complete.setMaxWidth(10);
            complete.setTextSize(16);
            complete.setTypeface(null, Typeface.BOLD);
            complete.setBackgroundColor(Color.BLUE);
            complete.setLayoutParams(lpButton);
            tr.addView(complete);

            final Button delivered = new Button(DashBoard.this);
            delivered.setText("Delivered");
            delivered.setMaxWidth(10);
            delivered.setTextSize(16);
            delivered.setTypeface(null, Typeface.BOLD);
            delivered.setBackgroundColor(Color.BLUE);
            delivered.setLayoutParams(lpButton);
            tr.addView(delivered); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:18:24.577

尝试将 paddingLeft 或 paddingRight 赋予按钮。此外，您可以为包装它们的布局提供填充。

# json - 在 Windows Phone 上解析 CSV

> ID：13512548
> 
> 赞同：-1
> 
> 时间：2012-11-22T12:15:21.773
> 
> 标签：json, windows-phone-7

嗨，我想解析我从网站获得的 CSV 响应。原始格式应该是 UTF-8 Json，但我认为它不是有效的 Json，可以解析为 CSV。我需要一个解析器或解决方案来帮助我解析我打算保存在隔离存储中的响应。

响应示例如下。（*我也希望忽略第一行*）

[4，“1.0”，1353586383652]

> [1、《米尔本大道》、《U3》、1353586717000]
> 
> [1、《米尔本大道》、《U1》、1353587185000]
> 
> [1、《米尔本大道》、《U5》、1353587151000]
> 
> [1、《米尔本大道》、《U3》、1353587716000]
> 
> [1、《米尔本大道》、《U3》、1353587530000]

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:19:27.130

无论如何，csv不只是文本吗？您可以只使用字符串函数（拆分等？）

看到这个 SO 问题，可能有用：[WP7 - 从 CSV 文件中读取？或者如何处理数据？](https://stackoverflow.com/questions/4681023/wp7-read-from-csv-file-or-what-to-do-with-the-data)

# c# - 套接字操作遇到死网络

> ID：13512555
> 
> 赞同：1
> 
> 时间：2012-11-22T12:15:38.533
> 
> 标签：c#, sockets, exception, compact-framework

我的 WinCE 设备（C#、CF 3.5）通过套接字与 SERVER 通信。

当它工作超过 12 小时时，它会断开连接并发生这种`Exception`情况：`A socket operation encountered a dead network`.

对于我所阅读的内容，可能是公共 IP 发生了变化。但是在我的代码中，我重新连接到新的 IP，所以我不知道为什么会抛出这个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:49:22.650

服务器应该有一个**静态**IP 地址。如果它具有**动态**IP 地址，则每当为您的服务器分配新的 IP 地址时，您都可能会遇到此问题。

如果是这种情况，那么您可以/应该编写您的应用程序来捕获这种特定类型的异常（`SocketException`也许？），处理该异常（可能是一个让用户知道发生了什么的消息框），并让您的代码重新- 使用新的服务器 ID 地址输入例程。

您可能需要重新初始化套接字连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:56:09.413

如果您使用的是移动设备，我会说是设备的 IP 地址发生了变化。

甚至更多：网络提供商可能每 12 小时关闭并重新启动连接设备的整个网络。

如果收到`WSAENETDOWN`，您应该重新启动应用程序的整个 IP 客户端部分。

# javascript - 如何使用 javascript 关闭顶级 Safari 浏览器？

> ID：13512561
> 
> 赞同：2
> 
> 时间：2012-11-22T12:15:54.430
> 
> 标签：javascript

我试图通过以下方式关闭*Safari*浏览器：

```
window.navigate("javascript:top.close()"); 
```

或者

```
function closeBrowser(){
    top.close();
} 
```

它们在*IE*中运行良好，但在*Safari*中却不行。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:19:49.617

如果您的意思是“顶部”打开的当前“选项卡”，那么您根本无法在 javascript 中为 chrome 执行此操作。虽然有一个解决方案可以在 Firefox 中关闭浏览器

```
var answer = confirm("Do you wnat to close this window ?"); if (answer){
 netscape.security.PrivilegeManager.enablePrivilege('UniversalBrowserWrite');
 top.close(); 
} else{ stop; } 
```

# android - 安卓 EditText 的本地化

> ID：13512562
> 
> 赞同：0
> 
> 时间：2012-11-22T12:15:58.173
> 
> 标签：android, localization

> **可能重复：**
> [更改 Android 键盘语言](https://stackoverflow.com/questions/5715072/change-android-keyboard-language)

Android 支持从应用程序本地化，请在此处找到示例代码

```
Locale locale = new Locale("en"); 
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;
getBaseContext().getResources().updateConfiguration(config, null); 
```

我的应用程序包含具有一个editText 的活动。但是在从应用程序更改区域设置后，当我单击 editText 进行写入时，android 键盘启动并且它不会在键盘的 OK 按钮上显示任何区域设置更改。

EditText 语言环境有什么解决方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:24:54.063

我认为尽管您可以更改应用程序的区域设置，以便它使用不同的资源，但键盘仍将使用用户在系统设置中选择的系统区域设置。

# anonymous-function - S-Function builder 不提供输出）

> ID：13512565
> 
> 赞同：1
> 
> 时间：2012-11-22T12:16:16.070
> 
> 标签：anonymous-function, simulink

我对编程和`sfunctions builder (simulink)`. 如果我没有提供正确/必需/相关信息，请原谅我。

我已经将我的 C 代码从`lustre`语言编译为`PID controller`. 我应该将`PID controller`C 代码实现到`sfunction builder`in 中`simulink`。我编译了`sfunction` 构建器，它编译成功，但根本没有给出输出。

出了什么问题？我还可以提供哪些信息来帮助您解决问题。

# asp.net-mvc - 升级到 SignalR 1-alpha2 后无法调试我的 Hub 方法

> ID：13512566
> 
> 赞同：0
> 
> 时间：2012-11-22T12:16:18.780
> 
> 标签：asp.net-mvc, signalr

我刚刚升级到 SignalR 1.0.0-Alpha2。完成后，我无法调试我的集线器方法。它永远不会到达断点。

**这是代码**

参考：

```
 <script src="../../Scripts/jquery.signalR-1.0.0-alpha2.min.js" type="text/javascript"></script>
<script src="<%:Url.Content("~/signalr/hubs")%>" type="text/javascript"></script> 
```

客户：

```
$(document).ready(function () {
    con = $.connection.messagingHub;

    $.connection.hub.start(function () {
        var myClientId = $.connection.hub.id;

        con.connectToHub('<%:ViewBag.rid%>', myClientId); // Breakpoint never reaches to this method on the hub.

        con.getWaitingOrdersCount('<%:ViewBag.rid%>').done(function (data) {
            console.log(data);
        });
    }); 
```

集线器代码：

```
public void ConnectToHub(Int32 rId, string connectionId)
    {
        var res = new HubConnection();
        res.ConnectionId = connectionId;
        res.RestaurantId = rId;

        dc.HubConnection.AddObject(res);
        dc.SaveChanges();
    } 
```

可能出了什么问题？有什么帮助吗？？

编辑：

萤火虫 说：

```
TypeError: con is undefined 

con.connectToHub('36', myClientId); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:37:22.087

您必须至少具有 1 个客户端功能（在开始之前）才能与集线器通信。又名 con.client.foo = 函数....

其次，确保您的中心名称是以下之一：

```
public class messagingHub

public class MessagingHub

HubName("messagingHub")
public class foo 
```

第三，在服务器端调用函数时，必须使用 .server 方法。又名

```
con.server.connectToHub(...my arguments...); 
```

# sql - 抑制 SQL Server 2008 中的错误消息

> ID：13512569
> 
> 赞同：1
> 
> 时间：2012-11-22T12:16:31.230
> 
> 标签：sql, sql-server, sql-server-2008

我有以下代码。执行时打印

> *消息 8120，级别 16，状态 1，过程测试，第 17
> 行列“@t.Country”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。错误'*

但我只想`'ERROR'`被打印出来。有没有办法抑制错误消息？

谢谢 Satyaprakash J

```
CREATE PROCEDURE Test
AS
    DECLARE @t TABLE
        (ID INT IDENTITY(1,1)
        ,Country NVARCHAR(50)
        ,Year INT
        ,PopulationInMillions INT
        )

    INSERT @t (Country, Year, PopulationInMillions)
    VALUES ('US', 2000, 20),
           ('US', 2001, 22) 

    SELECT Country, MAX(PopulationInMillions)
    FROM @t       
GO

BEGIN TRY
    EXEC Test
END TRY
BEGIN CATCH
    PRINT 'ERROR'
END CATCH 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:04:14.467

如果错误确实*发生*在`TRY`块内部，那么是的，您可以 - 正如您所展示的那样：

```
BEGIN TRY
    RAISERROR('Hello!',16,1)
END TRY
BEGIN CATCH
    PRINT 'ERROR'
END CATCH 
```

只是打印`ERROR`。相似地：

```
create procedure P
AS
    RAISERROR('World!',16,1)
GO
BEGIN TRY
    EXEC P
END TRY
BEGIN CATCH
    PRINT 'ERROR'
END CATCH 
```

也只是打印`ERROR`。

但是，正如其他人试图告诉您的那样，如果错误在输入之前发生，您如何构建`TRY`/并不重要。`CATCH`并且没有简单的方法可以在/中*创建*过程。`TRY``CATCH`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:27:53.400

像上面那样修复存储过程创建语句是抑制错误消息的唯一方法。

由于语法错误，create procedure 语句引发了错误。存储过程永远不会在数据库中创建。开始尝试没有执行存储过程，因为该过程不存在。您可以将 EXEC {anything} 放在尝试中以显示文本错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:19:39.930

> 有没有办法抑制错误消息？

**就在这里。**

修复您的查询：

```
SELECT Country, MAX(PopulationInMillions)
FROM @t 
```

像这样：

*   `GROUP BY country`像这样添加：

    ```
    SELECT Country, MAX(PopulationInMillions)
    FROM @t 
    GROUP BY Country; 
    ```

    或者，

*   使用聚合函数`Country`：

    ```
    SELECT Max(Country), MAX(PopulationInMillions)
    FROM @t 
    ```

    或者，

*   从列表中删除`Country`字段`SELECT`：

    ```
    SELECT MAX(PopulationInMillions)
    FROM @t 
    ```

我认为您需要阅读有关该[**`GROUP BY`**](http://msdn.microsoft.com/en-us/library/ms177673%28v=sql.100%29.aspx)条款如何工作的更多信息。了解分组在 SQL 中的工作原理至关重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T04:57:21.983

这里有两个问题。

[正如马丁史密斯](https://stackoverflow.com/users/73226/martin-smith)指出的那样，主要问题是您的错误来自`create procedure`声明。不是从`exec`。进一步详细说明，这是一个**解析和编译**错误，表明您无法选择一个列和一个聚合函数，而没有 group by(ing) 它。做这个。

```
SELECT Country, MAX(PopulationInMillions)
    FROM @t
    GROUP BY Country --add this line 
```

但即使你（尝试）做

```
begin try
    DECLARE @t TABLE
        (ID INT IDENTITY(1,1)
        ,Country NVARCHAR(50)
        ,Year INT
        ,PopulationInMillions INT
        )

    INSERT @t (Country, Year, PopulationInMillions)
    VALUES ('US', 2000, 20),
           ('US', 2001, 22) 

    print N'Before error';

    SELECT Country, MAX(PopulationInMillions)
    FROM @t
    --GROUP BY Country    --comment in attempt to cause error

    print N'After error';

end try
begin catch
    print N'Caught error';
end catch 
```

你甚至不会得到`print N'Before error';`因为错误消息 8120 是在解析和编译时返回的**致命错误。**整个批次甚至没有被执行。

这是一篇关于如何处理查询的好文章[http://rusanu.com/2013/08/01/understanding-how-sql-server-executes-a-query/](http://rusanu.com/2013/08/01/understanding-how-sql-server-executes-a-query/)

这是一篇不错的文章，当时还没有 TRY...CATCH。但这是了解致命/非致命 sql 错误的好来源。[http://www.sqlteam.com/article/handling-errors-in-stored-procedures](http://www.sqlteam.com/article/handling-errors-in-stored-procedures)

# jquery - 如何使用 jQuery 实现这种轮播效果（挑战.. 对我来说）

> ID：13512571
> 
> 赞同：0
> 
> 时间：2012-11-22T12:16:57.637
> 
> 标签：jquery, html, css

我正在尝试创建一个 jquery carousel 来调整 html 内容的大小（标注是背景图像）或者如果有一种方法可以在调整 div 大小的同时调整 HTML 中的文本大小，那也很棒。这将在单击导航箭头时发生。为了更好地了解轮播的工作原理，它位于本网站页面的底部：

www.lightmaker.com（如下所示）

![在此处输入图像描述](../Images/c27e6ba8da3fa3289029c92edeae6a23.png)

![大喊](../Images/709429082f3ee44bd3eb34c37a682894.png)

唯一的区别是，旋转木马向上移动。

有人可以推荐一个插件来实现这种效果吗？或者为此编写插件的最佳方式。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:56:19.527

你也可以看看[Caroufredsel](http://caroufredsel.dev7studios.com/)

# php - 通过 PHP 将 XML 数据存储到 JavaScript 变量

> ID：13512573
> 
> 赞同：1
> 
> 时间：2012-11-22T12:16:58.497
> 
> 标签：php, javascript, xml

我正在调用 PHP 文件来获取请求的 XML 文件并将其数据存储到 JavaScript 变量中。这是代码：

```
var albumXML = null;
<?php $fname = "folder/" . $_GET['getFile'];
    $contents = file_get_contents($fname);
    echo 'albumXML = "' . $contents . '";';
?> 
```

但是控制台显示错误：`Uncaught SyntaxError: Unexpected token <`

我认为这是`$contents`第一个标签开始的开始。我怎样才能存储这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:19:57.027

```
<?php
    $fname = "folder/" . $_GET['getFile'];
    $contents = file_get_contents($fname);
?>
var albumXML = '<?php echo addslashes(preg_replace('@(\n|\r|\r\n)+@', ' ', $contents)); ?>'; 
```

# php - 表单要求指示器的drupal位置

> ID：13512574
> 
> 赞同：0
> 
> 时间：2012-11-22T12:16:59.320
> 
> 标签：php, drupal, drupal-7, drupal-fapi

在 drual 7 我的表格是这样输出的

```
<label for="edit-panes-billing-billing-first-name"><span class="form-required">(*)</span> First name</label> 
```

需要表单的指示器的问题出现在前面。我找不到钩子。我需要要么

我需要更改 html 顺序或在文本部分周围环绕一个跨度，以便输出为

```
<label for="edit-panes-billing-billing-first-name"><span class="form-required">(*)</span> <span class="mytitle">First name</span></label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:20:11.483

使用[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7) () 来改变这个字段的`#required`属性。

代码将类似于：

```
$form['panes_billing_billing_first_name']['#required'] = FALSE; 
```

# django - Django Crispy Forms - 布局助手 - 设置 Div Id

> ID：13512577
> 
> 赞同：2
> 
> 时间：2012-11-22T12:17:01.523
> 
> 标签：django, django-forms, django-crispy-forms

就像`css_class`我可以在布局助手中传递给 a 的属性一样``Div()`，我也需要设置`id`...

```
 self.helper.layout = Layout(              
            Div('attr1', css_class="myclass")
         ) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:17:01.523

好吧，通过反复试验，我找到了解决方案！我认为它很难通过谷歌找到......

您可以使用`css_id`：

```
 self.helper.layout = Layout(              
            Div('attr1', css_class="myclass", css_id="myid")
         ) 
```

# eclipse - 将 Helios 的 XML 编辑器安装到基于 Helios 的 Eclipse 中失败

> ID：13512580
> 
> 赞同：1
> 
> 时间：2012-11-22T12:17:07.093
> 
> 标签：eclipse, installation, p2, rft

我正在使用基于 Eclipse 3.6 (Helios) 的 IBM Rational Function Tester 8.3。我想安装 XML 支持，所以我启用了 Helios 更新站点并选择*Eclipse XML Editors and Tools 3.2.3*进行安装。我被提示获得许可协议，然后按预期开始安装。一段时间后，Eclipse 向我显示了一个错误。

```
An error occurred while collecting items to be installed
session context was:(profile=bootProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,org.eclipse.core.resources,3.6.2.R36x_v20110628-1020 
```

我还尝试了*Eclipse XML Editors 和 Tools 3.2.2*，结果相同。我验证了 org.eclipse.core.resources_3.6.2.R36x_v20110628-1020 位于安装的插件文件夹中，并且已加载到插件注册表中。所需的插件可用且处于活动状态。

我不知道为什么会这样。请有人可以阐明这个问题。什么可能导致这个问题？谢谢你。

# visual-studio-2010 - 在 Visual Studio 2010 上共享已安装扩展的列表

> ID：13512589
> 
> 赞同：6
> 
> 时间：2012-11-22T12:17:42.367
> 
> 标签：visual-studio-2010

是否有任何方法或插件可以导出 Visual Studio 2010 中已安装扩展的列表？

我只想导出插件的名称。

导出列表的目的是与其他开发人员共享。有时列表很广泛，并且打印不是一种非常快速的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-26T07:57:00.010

就在这里。

您可以使用此 Visual Studio 2010 扩展，它允许您在多个实例之间同步和自动更新 Visual Studio 扩展。

[https://visualstudiogallery.msdn.microsoft.com/dbaf0ac9-fb7b-4fb3-b34d-ea2269276d3c](https://visualstudiogallery.msdn.microsoft.com/dbaf0ac9-fb7b-4fb3-b34d-ea2269276d3c)

希望这是您正在寻找的。

# java - 使用 snakeYaml 更新 yaml 文件中的值

> ID：13512591
> 
> 赞同：3
> 
> 时间：2012-11-22T12:17:55.970
> 
> 标签：java, struts2, yaml, struts2-jquery

有什么方法可以使用 java.xml**编辑/删除**YAMLfile 中的值。

我正在使用 struts2-jquery-grid 从 YAML 文件中填充数据。现在，如果我编辑字段，它应该保存在 YAML 文件中。我能够分别使用*yaml.load() 和 yaml.dump()*从 YAML 格式的文件中读取值并将值写入文件。但是，我不知道要编辑和删除特定字段。

我浏览了[http://code.google.com/p/snakeyaml/wiki/Documentation#Dumping_YAML](http://code.google.com/p/snakeyaml/wiki/Documentation#Dumping_YAML)链接，在那里我读到我们可以使用*模板处理器*和其他选项，例如*定义 java bean 属性的顺序、注释以简化.yaml* _ 但所有这些对我来说都没有任何意义。

这是我在此处**序列化**称为*假设*的对象列表的代码。在**gridModel.add(假设);** ，我将类 Assumption（带有 fetters 和 setter 的 bean 类）的值存储到*gridModel*的列表中。

```
 gridModel.add(assumption);

       try {

        FileWriter pr=new FileWriter("D:/yaml.yaml");

        DumperOptions options = new DumperOptions();

         options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);

        Yaml yaml = new Yaml(options);
        String output=yaml.dump(gridModel);//,Tag.MAP, null);
        pr.write(output);
        System.out.print(pr.toString());
        System.out.println();

        pr.close();
        }catch(Exception e){
            e.printStackTrace();
        } 
```

***我在一个名为 yaml.yaml 的文件中得到的输出为：***

*   !!com.example.Assumption column1: '1' column2: Balwant column3: SPJ column4: rerer column5: null
*   !!com.example.Assumption column1: '' column2: Vikas column3: RNC column4: erer column5: null
*   !!com.example.Assumption column1: '3' column2: '' column3: PNBE column4: erer column5: null
*   !!com.example.Assumption column1: '4' column2: Diwakar column3: BGP column4: rerer column5: null
*   !!com.example.Assumption column1: '5' column2: Ajay column3: Godda column4: '' column5: null

对于**反序列化**，代码为：

```
 InputStream input = new FileInputStream(new File("D:/yaml.yaml"));
    Yaml yaml = new Yaml();
    for (Object data : yaml.loadAll(input))
        System.out.println("Data:"+data); 
```

***控制台的输出是：***

数据：[假设[column1=1，column2=Balwant，column3=SPJ，column4=rerer，column5=null]，假设[column1=，column2=Vikas，column3=RNC，column4=erer，column5=null]，假设[ column1=3, column2=, column3=PNBE, column4=erer, column5=null], 假设 [column1=4, column2=Diwakar, column3=BGP, column4=rerer, column5=null], 假设 [column1=5, column2 =Ajay, column3=Godda, column4=, column5=null]]

我是 yaml 和 struts2 的新手。所以，请回答一个干净的解决方案。纠正我，如果我在描述要求时错了。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:14:04.707

我认为编辑的唯一方法是覆盖现有的 yaml。我们需要从网格中获取值并将 ti 覆盖到现有的值。

# autohotkey - 如何在不触发分配给该密钥的任何代码的情况下发送密钥？

> ID：13512592
> 
> 赞同：1
> 
> 时间：2012-11-22T12:18:03.083
> 
> 标签：autohotkey

所以我有

```
`::
` Up::
    IfEqual, A_ThisHotkey, %A_PriorHotkey%,   return
    Send ^!i
Return 
```

和

```
^'::` 
```

但它不起作用，因为按下`^' (ctrl+')`它时不会发送 ` 而是执行`^!i`。我怎么做只是发送字符`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:26:08.880

您想防止一个热键的输出触发另一个。像这样添加一个 $ 符号。

```
$':: 
```

[http://www.autohotkey.com/docs/Hotkeys.htm#prefixdollar](http://www.autohotkey.com/docs/Hotkeys.htm#prefixdollar)

# java - gwt Cookies 未设置或获取

> ID：13512610
> 
> 赞同：2
> 
> 时间：2012-11-22T12:19:02.167
> 
> 标签：java, gwt, session-cookies

**环境**

*   Eclipse Juno 服务版本 1
*   总重量 2.5
*   带有 GWT 开发者插件的 Google Chrome
*   使用“运行应用程序”作为 Google Web 应用程序在 Jetty 服务器上运行 GWT

我正在尝试使用以下代码使用 gwt 设置 2 个 cookie：

```
if(result.getStatus() == ServerResponse.SUCCESS) {
    System.out.println("I will now set cookies: " + result.getMessage() + " and " + Integer.toString(result.getValue().getId()));
    Cookies.setCookie("opsession", result.getMessage(), new Date(System.currentTimeMillis() + ClientUser.SESSION_EXPIRY_TIME_IN_MINUTES));
    Cookies.setCookie("opuser", Integer.toString(result.getValue().getId()), new Date(System.currentTimeMillis() + ClientUser.SESSION_EXPIRY_TIME_IN_MINUTES));
    System.out.println("Cookie set: session: " + Cookies.getCookie("opsession"));
    main.checkLoginAndRedirect();
    System.out.println("Redirected.");
} else if(result.getStatus() == ServerResponse.FAILURE){
    new MessageBox(result.getShortTitle(), result.getMessage()).show();
} 
```

它似乎不起作用。println 用于调试，这里是输出：

```
I will now set cookies: 1er1qmaly9ker and 1
Cookie set: session: null
nullnull
Redirected. 
```

`ClientUser.SESSION_EXPIRY_TIME_IN_MINUTES`是（是一个 int）返回 20 的 long。

**更新**

使用

```
if(Cookies.getCookie("opsession") == null) {
    System.out.println("opsession: cookie not found at all.");
} 
```

我已经确认 cookie 根本没有放置，并且没有“null”字符串值。

我也变 `ClientUser.SESSION_EXPIRY_TIME_IN_MINUTES`长了。

**更新**

Fiddler 确认 cookie 数据已发送：

`Response sent 30 bytes of Cookie data: Set-Cookie: JSESSIONID=4kr11hs48gvq;Path=/`

但只有当我使用较长版本的 setCookie 时：

```
Cookies.setCookie("opuser", Integer.toString(result.getValue().getId()), new Date(System.currentTimeMillis() + ClientUser.SESSION_EXPIRY_TIME_IN_MINUTES), null, "/", false); 
```

如果我使用该`String, String, long`变体，提琴手不会注意到任何 cookie 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:10:28.027

应该

```
new Date(System.currentTimeMillis()
+ (ClientUser.SESSION_EXPIRY_TIME_IN_MINUTES * 60000))) 
```

将到期时间转换为毫秒。

# api - 如何使用完整的 Web 前端扩展 heroku-buildpack-core-data

> ID：13512611
> 
> 赞同：3
> 
> 时间：2012-11-22T12:19:10.243
> 
> 标签：api, core-data, heroku

我对 Heroku 最近添加的 @mattt 的 heroku-buildpack-core-data 印象深刻（[这里](http://mobile.heroku.com/?utm_source=feedburner&utm_medium=twitter&utm_campaign=Feed%3a%20hnycombinator%20%28HN%20-%20hnycombinator%29)有更多信息），它有助于为支持核心数据的 iOS 应用程序构建 Web API。我想将它扩展为也有一个 Web 前端。我看到它里面有一个 Sinatra+Sequel 应用程序。

添加此功能的 Heroku 友好方式是哪种？我是否必须分叉和扩展 buildpack？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:38:23.303

[您可以在Core Data Buildpack Repository](https://github.com/heroku/heroku-buildpack-core-data)上找到有关如何使用 Rack::CoreData 扩展此功能的说明：

> **Core Data Buildpack 旨在鼓励快速原型设计，但不应在生产应用程序中单独使用。**
> 
> 相反，我们鼓励您直接使用 Rack::CoreData 创建应用程序，这允许您使用 Rack 应用程序（例如 Rails 或 Sinatra）和中间件扩展 Core Data 脚手架。这是一个示例 config.ru 文件：

### 配置.ru

```
require 'bundler'
Bundler.require

DB = Sequel.connect(ENV['DATABASE_URL'])

run Rack::CoreData('./Example.xcdatamodeld') 
```

# java - 浏览图像文件并使用 Java Swing 显示它

> ID：13512612
> 
> 赞同：10
> 
> 时间：2012-11-22T12:19:12.940
> 
> 标签：java, eclipse, image, swing, jfilechooser

我的问题是，单击`Browse`按钮后，它会显示要选择的目录中的所有文件，然后选择的图像会正确显示在 GUI 中。但是当我第二次单击浏览按钮时，它只显示旧图像而不是显示新图像。请帮助我。

作为参考，我上传了 UI。

![](../Images/618ac3a9864fdaf930f453afc9fa89dc.png)

```
package GUI;

import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Graphics2D;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JLabel;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;

@SuppressWarnings("serial")
public class MainAppFrame extends JFrame {

    private JPanel contentPane;
    File targetFile;
    BufferedImage targetImg;
    public JPanel panel,panel_1;
    private static final int baseSize = 128;
    private static final String basePath =
            "C:\\Documents and Settings\\Administrator\\Desktop\\Images";

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MainAppFrame frame = new MainAppFrame();
                    frame.setVisible(true);
                    frame.setResizable(false);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public MainAppFrame() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 550, 400);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(new BorderLayout(0, 0));

        panel = new JPanel();
        panel.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));
        contentPane.add(panel, BorderLayout.WEST);

        JButton btnBrowse = new JButton("Browse");
        btnBrowse.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                browseButtonActionPerformed(e);
            }
        });

        JLabel lblSelectTargetPicture = new JLabel("Select target picture..");

        JButton btnDetect = new JButton("Detect");
        btnDetect.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });

        JButton btnAddDigit = new JButton("Add Digit");
        btnAddDigit.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });

        JButton button = new JButton("Recognize");
        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });

        panel_1 = new JPanel();
        panel_1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));

        GroupLayout gl_panel = new GroupLayout(panel);
        gl_panel.setHorizontalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(6)
                    .addGroup(gl_panel.createParallelGroup(Alignment.LEADING)
                        .addGroup(gl_panel.createSequentialGroup()
                            .addComponent(lblSelectTargetPicture)
                            .addGap(6)
                            .addComponent(btnBrowse))
                        .addGroup(gl_panel.createSequentialGroup()
                            .addGap(10)
                            .addComponent(btnDetect)
                            .addGap(18)
                            .addComponent(btnAddDigit))))
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(50)
                    .addComponent(button))
                .addGroup(gl_panel.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(panel_1, GroupLayout.PREFERRED_SIZE, 182, GroupLayout.PREFERRED_SIZE))
        );
        gl_panel.setVerticalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGroup(gl_panel.createParallelGroup(Alignment.LEADING)
                        .addGroup(gl_panel.createSequentialGroup()
                            .addGap(7)
                            .addComponent(lblSelectTargetPicture))
                        .addGroup(gl_panel.createSequentialGroup()
                            .addGap(3)
                            .addComponent(btnBrowse)))
                    .addGap(18)
                    .addComponent(panel_1, GroupLayout.PREFERRED_SIZE, 199, GroupLayout.PREFERRED_SIZE)
                    .addGap(22)
                    .addGroup(gl_panel.createParallelGroup(Alignment.BASELINE)
                        .addComponent(btnDetect)
                        .addComponent(btnAddDigit))
                    .addGap(18)
                    .addComponent(button)
                    .addContainerGap())
        );

        panel.setLayout(gl_panel);
    }
    public BufferedImage rescale(BufferedImage originalImage)
    {
        BufferedImage resizedImage = new BufferedImage(baseSize, baseSize, BufferedImage.TYPE_INT_RGB);
        Graphics2D g = resizedImage.createGraphics();
        g.drawImage(originalImage, 0, 0, baseSize, baseSize, null);
        g.dispose();
        return resizedImage;
    }
    public void setTarget(File reference)
    {
        try {
            targetFile = reference;
            targetImg = rescale(ImageIO.read(reference));
        } catch (IOException ex) {
            Logger.getLogger(MainAppFrame.class.getName()).log(Level.SEVERE, null, ex);
        }

        panel_1.setLayout(new BorderLayout(0, 0));
        panel_1.add(new JLabel(new ImageIcon(targetImg))); 
        setVisible(true);
    }
    private void browseButtonActionPerformed(java.awt.event.ActionEvent evt) {
        JFileChooser fc = new JFileChooser(basePath);
        fc.setFileFilter(new JPEGImageFileFilter());
        int res = fc.showOpenDialog(null);
        // We have an image!
        try {
            if (res == JFileChooser.APPROVE_OPTION) {
                File file = fc.getSelectedFile();
                setTarget(file);
            } // Oops!
            else {
                JOptionPane.showMessageDialog(null,
                        "You must select one image to be the reference.", "Aborting...",
                        JOptionPane.WARNING_MESSAGE);
            }
        } catch (Exception iOException) {
        }

    }
}

//JPEGImageFileFilter.java

package GUI;

import java.io.File;

import javax.swing.filechooser.FileFilter;

/*
* This class implements a generic file name filter that allows the listing/selection
* of JPEG files.
*/
public class JPEGImageFileFilter extends FileFilter implements java.io.FileFilter
 {
 public boolean accept(File f)
   {
   if (f.getName().toLowerCase().endsWith(".jpeg")) return true;
   if (f.getName().toLowerCase().endsWith(".jpg")) return true;
   if(f.isDirectory())return true;
   return false;
  }
 public String getDescription()
   {
   return "JPEG files";
   }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:29:14.520

每次选择新图像时，您都会在此处不必要地创建组件并且错误：

```
public void setTarget(File reference) {
    //....
    panel_1.setLayout(new BorderLayout(0, 0));
    panel_1.add(new JLabel(new ImageIcon(targetImg))); 
    setVisible(true); 
```

相反，我建议您在选择任何文件/图像之前从一开始就创建所有这些组件，然后在这个方法中，从图像创建一个 ImageIcon，然后简单地使用这个 Icon 来设置 Icon一个已经存在的 JLabel 而不是一个新的 JLabel。这只需调用即可完成`myLabel.setIcon(new ImageIcon(targetImg));`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T12:32:33.417

创建一个`ImageViewer`类似的方法`ImageViewer.setImage(Image)`，在`JLabel`.

## 图像查看器

![许多（OK 3）图像](../Images/9087d2d94f3f77169e73b6a6dc3f587e.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.util.Random;

public class ImageViewer {

    JPanel gui;
    /** Displays the image. */
    JLabel imageCanvas;

    /** Set the image as icon of the image canvas (display it). */
    public void setImage(Image image) {
        imageCanvas.setIcon(new ImageIcon(image));
    }

    public void initComponents() {
        if (gui==null) { 
            gui = new JPanel(new BorderLayout());
            gui.setBorder(new EmptyBorder(5,5,5,5));
            imageCanvas = new JLabel();

            JPanel imageCenter = new JPanel(new GridBagLayout());
            imageCenter.add(imageCanvas);
            JScrollPane imageScroll = new JScrollPane(imageCenter);
            imageScroll.setPreferredSize(new Dimension(300,100));
            gui.add(imageScroll, BorderLayout.CENTER);
        }
    }

    public Container getGui() {
        initComponents();
        return gui;
    }

    public static Image getRandomImage(Random random) {
        int w = 100 + random.nextInt(400);
        int h = 50 + random.nextInt(200);
        BufferedImage bi = new BufferedImage(
                w,h,BufferedImage.TYPE_INT_RGB);

        return bi;
    }

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame("Image Viewer");
                // TODO Fix kludge to kill the Timer
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                final ImageViewer viewer = new ImageViewer();
                f.setContentPane(viewer.getGui());

                f.pack();
                f.setLocationByPlatform(true);
                f.setVisible(true);

                ActionListener animate = new ActionListener() {

                    Random random = new Random();

                    @Override
                    public void actionPerformed(ActionEvent arg0) {
                        viewer.setImage(getRandomImage(random));
                    }
                };
                Timer timer = new Timer(1500,animate);
                timer.start();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T15:24:24.977

我修改了您的代码，希望它能满足您的要求。我使用 MigLayout（它是一个布局管理器）来安排组件。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.BoxLayout;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import net.miginfocom.swing.MigLayout;

public class MyFileChooser
{

JFrame frame; 
JPanel panel;
JButton btnBrowse;
JButton change;
JLabel imglabel;

File targetFile;
BufferedImage targetImg;
private static final int baseSize = 128;
private static final String basePath ="/images/fimage";
JPanel panel_1;
ImageIcon icon;
public MyFileChooser() 
{
    // TODO Auto-generated constructor stub
    frame =new JFrame();
    frame.setLayout(new MigLayout());

    frame.setSize(300, 300);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

     panel=new JPanel(new MigLayout());
     panel_1 = new JPanel();
     panel_1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(5, 5, 5), 1, true));

     panel_1.setBackground(Color.pink);

     btnBrowse=new JButton("browse");
     btnBrowse.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            browseButtonActionPerformed(e);
        }
    });

    change=new JButton("Delete");
    change.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) 
        {
            // TODO Auto-generated method stub
            changeButtonActionPerformed(e);

        }

        private void changeButtonActionPerformed(ActionEvent e) 
        {
            // TODO Auto-generated method stub

               imglabel.revalidate(); //ADD THIS AS WELL
               imglabel.repaint();  //ADD THIS AS WELL
               imglabel.setIcon(null);
               System.out.println("delete button activated");

        }
    });

    imglabel=new JLabel("Image");
    imglabel.setSize(100, 100);
    imglabel.setBackground(Color.yellow);
    frame.add(panel_1,"span,pushx,pushy,growx,growy");
    frame.add(btnBrowse);
    frame.add(change,"");

    //frame.pack();

}

protected void browseButtonActionPerformed(ActionEvent e) 
{

    JFileChooser fc = new JFileChooser(basePath);
    fc.setFileFilter(new JPEGImageFileFilter());
    int res = fc.showOpenDialog(null);
    // We have an image!
    try {
        if (res == JFileChooser.APPROVE_OPTION) {
            File file = fc.getSelectedFile();
            imglabel.setIcon(null);
           setTarget(file);
        } // Oops!
        else {
            JOptionPane.showMessageDialog(null,
                    "You must select one image to be the reference.", "Aborting...",
                    JOptionPane.WARNING_MESSAGE);
        }
    } catch (Exception iOException) {
    }

}

public BufferedImage rescale(BufferedImage originalImage)
{
    BufferedImage resizedImage = new BufferedImage(baseSize, baseSize, BufferedImage.TYPE_INT_RGB);
    Graphics2D g = resizedImage.createGraphics();
    g.drawImage(originalImage, 0, 0, baseSize, baseSize, null);
    g.dispose();
    return resizedImage;
}
public void setTarget(File reference)
{

    try {
        targetFile = reference;
        targetImg = rescale(ImageIO.read(reference));
    } catch (IOException ex) {
       // Logger.getLogger(MainAppFrame.class.getName()).log(Level.SEVERE, null, ex);
    }

    panel_1.setLayout(new BorderLayout(0, 0));

    icon=new ImageIcon(targetImg);
    imglabel=new JLabel(icon);
    panel_1.add(imglabel); 

    frame.setVisible(true);
}
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub

            new MyFileChooser();

        }
    });
} 
```

}

**JPEGImageFileFilter 类，你可以把这个类放在同一个包中**

```
import java.io.File;

import javax.swing.filechooser.FileFilter;

public class JPEGImageFileFilter extends FileFilter implements    FileFilter           
{
public boolean accept(File f)
{
  if (f.getName().toLowerCase().endsWith(".jpeg")) return true;
  if (f.getName().toLowerCase().endsWith(".jpg")) return true;
 if(f.isDirectory())return true;
 return false;
}
public String getDescription()
{
  return "JPEG files";
}

} 
```

[![输出](../Images/0d2e88df5a8855c24abb415fc9c32b72.png)](https://i.stack.imgur.com/PfYdo.jpg)

# mysql - MySQL 评级与权重

> ID：13512613
> 
> 赞同：2
> 
> 时间：2012-11-22T12:19:16.043
> 
> 标签：mysql, select, sql-order-by, rating

我想根据票数创建一个权重的评级。所以，1 票 5 票不会好于 4 票票 4 票。

我找到了这个数学表格：

`bayesian = ( (avg_num_votes * avg_rating) + (this_num_votes * this_rating) ) / (avg_num_votes + this_num_votes)`

如何进行 MySQL SELECT 以获得最佳评级图像的 ID。

我有一张 IMAGE 表和一张 VOTING 表

## 表决：

```
id
imageID
totalVotes
avgVote 
```

我想我必须在 SELECT 中使用 SELECT 来执行此操作，但是如何操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:30:34.233

第一步是计算`avg_num_votes`和`avg_rating`：

```
SELECT
  SUM(totalVotes)/COUNT(*) AS avg_num_votes,
  SUM(avgVote)/COUNT(*) AS avg_rating
FROM voting; 
```

如果您可以忍受一个小错误，那么偶尔计算一次可能就足够了。

现在使用您的公式和上面的值，您可以运行称重查询。作为一个小的优化，我预先计算`avg_num_votes * avg_rating`并调用它`avg_summand`

```
SELECT
  voting.*, -- or whatever fields you need
  ($avg_summand+totalVotes*avgVote)/($avg_num_votes+totalVotes) AS bayesian
FROM voting
ORDER BY  bayesian DESC
LIMIT 1; 
```

**编辑**

您可以将其作为连接运行：

```
SELECT
  voting.*, -- or whatever fields you need
  (avg_num_votes*avg_rating+totalVotes*avgVote)/(avg_num_votes+totalVotes) AS bayesian
FROM voting,
(
  SELECT
    SUM(totalVotes)/COUNT(*) AS avg_num_votes,
    SUM(avgVote)/COUNT(*) AS avg_rating
  FROM voting AS iv
) AS avg
ORDER BY  bayesian DESC
LIMIT 1; 
```

但这将计算每个查询的总和和平均值——称之为性能炸弹。

# javascript - 用于 subdmomain 的 Google 分析历史 API

> ID：13512614
> 
> 赞同：0
> 
> 时间：2012-11-22T12:19:19.023
> 
> 标签：javascript, api, google-analytics

我有个问题。我需要从谷歌分析中获取特定子域的访问者历史记录。通过他们的 API。我在文档中找不到它。

你有没有解决它并解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:19:37.817

您需要按主机名过滤

过滤器=ga:hostname=~subdomain.domain.com

这是维度参考中的文档[https://developers.google.com/analytics/devguides/reporting/core/dimsmets/pagetracking#ga:hostname](https://developers.google.com/analytics/devguides/reporting/core/dimsmets/pagetracking#ga:hostname)

# jquery - 如何选择外层 周围场地？

> ID：13512631
> 
> 赞同：5
> 
> 时间：2012-11-22T12:20:25.650
> 
> 标签：jquery, jquery-selectors

我正在使用 jQuery 做我的第一步，需要帮助来为我的问题选择合适的选择器。我在 Django 模板中有以下 HTML：

```
{% for field in form %}

    <div class="control-group">

        <label class="control-label" for="{{ field.label }}">{{ field.label }}</label>

        <div class="controls">

            {% if field.html_name == "field_1" %}

                <input class="input-xlarge" id="{{ field.label }}" type="text" name="{{ field.html_name }}" />

            {% elif field.html_name == "field_2" %}

                <input class="input-mini" id="{{ field.label }}" type="text" name="{{ field.html_name }}" />

            {% endif %}

        </div>

    </div>

{% endfor %} 
```

我需要对`<input />`具有以下选择器的字段做一些事情：

```
var $inputField1 = $('input[name="field_1"]');
var $inputField2 = $('input[name="field_2"]'); 
```

我现在的问题是我需要能够`<div class="control-group"></div>`为特定`<input />`字段选择 a 才能更改 this 的类`<div>`。我怎么做？我需要[父选择器](http://api.jquery.com/parent-selector/)吗？我有点困惑。请帮忙。非常感谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T12:23:08.577

你不能只用一个选择器来做到这一点。您将需要像当前一样选择输入元素，然后使用该[`.closest()`方法](http://api.jquery.com/closest/)获取祖先`div`：

```
var controlGroup = $('input[name="field_1"]').closest('.control-group'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T12:23:47.853

您可以使用 .closest()：

```
var $inputField1 = $('input[name="field_1"]');
var $targetDiv = $inputField1.closest('.control-group'); 
```

或使用父母（）：

```
var $inputField1 = $('input[name="field_1"]');
var $targetDiv = $inputField1.parents('.control-group:eq(0)'); 
```

.closest() 更好，因为它不会遍历所有 DOM

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T12:26:48.390

查看 jQuery .closest()：

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

...如果您想要更具体的答案，请告诉我们您想用您的输入做什么:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:23:36.927

您可以使用

```
$('input[name="field_1"]').parents('.control-group:first') 
```

# java - Google Drive SDK File.getFileSize() NullPointerException

> ID：13512632
> 
> 赞同：1
> 
> 时间：2012-11-22T12:20:27.653
> 
> 标签：java, google-drive-api

**重现步骤：**

*   使用最新的 Google 云端硬盘`SDK v2-rev25-1.12.0`

*   `API`使用LIST 检索文件列表`Google Drive`

*   你现在应该有一个`List<File>`

*   通过列表循环读取文件大小`File.getFileSize()`

*   带有扩展名的文件夹和文件可以正常工作，您可以获得文件大小`0`或其他内容`> 0`

*   调用存储`getFileSize`在`GoogleDocs`Google Drive 中的文件会生成一个`NullPointerException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:53:33.120

谷歌原生文档的文件大小对最终用户没有真正的意义，因为他永远不会下载具有谷歌文档原生格式的文件。您可能使用 File 的 quotaBytesUsed 属性了解用户驱动器上占用的空间。

顺便说一句，当您调用 file.getFileSize() 或在其他方法中使用此调用的结果时，您确定会得到 NPE 吗？因为这样的调用应该返回`null`但不应该抛出`Exception`

# go - 如何在 golang 中关闭 bufio.Reader/Writer？

> ID：13512634
> 
> 赞同：16
> 
> 时间：2012-11-22T12:20:30.707
> 
> 标签：go

我怎样才能关闭`bufio.Reader`或`bufio.Writer`在 golang 中？

```
func init(){
    file,_ := os.Create("result.txt")
    writer = bufio.NewWriter(file)
} 
```

我应该关闭`Writer`吗？或者只是使用`file.Close()`会`Writer`关闭？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T12:26:10.463

据我所知，您无法关闭`bufio.Writer`.

你要做的是`Flush()`对`bufio.Writer`然后`Close()`是`os.Writer`：

```
writer.Flush()
file.Close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T00:58:03.343

我认为以下是规范的：

```
func doSomething(filename string){
    file, err := os.Create(filename)
    // check err
    defer file.Close()
    writer = bufio.NewWriter(file)
    defer writer.Flush()

    // use writer here
} 
```

# vba - 基于合并单元格内容的 VBA 条件格式

> ID：13512635
> 
> 赞同：0
> 
> 时间：2012-11-22T12:20:36.873
> 
> 标签：vba, merge, excel-2003, conditional-formatting

我有一个这样的电子表格：

```
1   Basic Rota  09:00   13:00
2   Absence           S 
```

如果您想象列标签从“基本轮换”上方开始为 A、B 和 C。缺席单元格 (B2:C2) 是一个合并单元格，可以包含“H”、“S”、“T”、“SC”或者它可以是空的。根据该单元格的内容，B1 和 C1 应该改变颜色。我有一些 VBA 可以完成这项工作。

```
Option Compare Text 'A=a, B=b, ... Z=z
Option Explicit

Private Sub Worksheet_Change(ByVal Selection As Range)

        Select Case Target.Value

    Case "S"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 53
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 53
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 53
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 53

    Case "H"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 50
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 50
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 50
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 50

    Case "T"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 44
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 44
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 44
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 44

    Case "SC"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 42
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 42
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 42
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 42

    Case Else

        Target.Offset(-1, 0).Interior.ColorIndex = xlNone 'No Fill
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = xlNone

End Select

End Sub 
```

但是，如果合并单元格 (B2:C2) 的内容被删除，我会在 'Case "S" ' 行收到错误（运行时错误 '13': Type Mistmatch）。我可以通过“On Error GoTo”行绕过它，但这意味着已被条件格式化的单元格不会返回“no fill”。如果它是在未合并的单元格上完成的，这不是问题，所以我可能需要停止一起使用合并的单元格 - 但是，为了用户友好，保留它会很好（而不是制作例如，用户在 B2 和 C2 中输入“H”两次）。作为参考，这适用于 Excel 2003。我应该补充一点，通过查看该工作表的代码将宏添加到工作表中，并且基于 worksheet_change。

如果有人可以在这方面提供帮助，将不胜感激！

编辑：根据@Philip A Barnes 的回答在下面回答。

```
 Private Sub Worksheet_Change(ByVal Target As Range)

  Select Case Target.Columns(1).Value

  Case Empty

    Target.Columns(1).MergeArea.Offset(-1, 0).Interior.ColorIndex = xlNone 'No Fill
    Target.Columns(1).MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = xlNone

Case "S"

    Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 53
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 53
    Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 53
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 53

Case "H"

    Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 50
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 50
    Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 50
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 50

Case "T"

    Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 44
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 44
    Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 44
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 44

Case "SC"

    Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 42
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 42
    Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 42
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 42

Case Else

    Target.Offset(-1, 0).Interior.ColorIndex = xlNone 'No Fill
    Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = xlNone

End Select

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:00:53.823

这是因为当单元格中没有数据时，目标引用返回“空”。您需要扩展您的案例陈述以检查这一点：

```
Private Sub Worksheet_Change(ByVal Target As Range)

Select Case Target.Columns(1).Value

    Case Empty

        Target.Offset(-1, 0).Interior.ColorIndex = xlNone 'No Fill
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = xlNone

    Case "S"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 53
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 53
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 53
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 53

    Case "H"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 50
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 50
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 50
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 50

    Case "T"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 44
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 44
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 44
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 44

    Case "SC"

        Target.MergeArea.Offset(-1, 0).Interior.ColorIndex = 42
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = 42
        Target.MergeArea.Offset(-1, 0).Font.ColorIndex = 42
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Font.ColorIndex = 42

    Case Else

        Target.Offset(-1, 0).Interior.ColorIndex = xlNone 'No Fill
        Target.MergeArea.Offset(-1, 1).Offset(0, -1).Interior.ColorIndex = xlNone

End Select

End Sub 
```

确保这是您进行的第一次检查。此外，我建议您查看内置条件格式的 Excel，您可以使用 VBA 进行操作。

# sql - SQL 存储过程变量空值检查

> ID：13512636
> 
> 赞同：7
> 
> 时间：2012-11-22T12:20:45.610
> 
> 标签：sql, stored-procedures

下面是我拥有的存储过程的一部分，如果您能指出我为什么即使`@DefaultID`在执行 select 语句后为 null 时它也不会进入 if 条件，那将有很大帮助，是否有不同的方法我必须按照`@DefaultID`为它分配值以使其可用于空检查。

先感谢您。

```
DECLARE @DefaultID varchar(25)
DECLARE @ISDefault varchar(1)

SELECT @DefaultID = (SELECT TABLE1.DEFID as DEFID
                     FROM TABLE1
                     WHERE TABLE1.ID = '123')

IF (@DefaultID = '')
    SET @ISDefault = '1'
ELSE
    SET @ISDefault = '0' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T12:23:18.150

采用

```
IF @DefaultID IS NULL 
```

代替`IF @DefaultID =''`

`NULL`和`''`是两个不同的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T12:21:58.943

请检查使用

`IF ISNULL(@DefaultID, '') = ''`代替`IF(@DefaultID = '')`

我猜你正在使用 MS Sql 服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T12:23:38.760

只需使用它：-

```
 IF(@DefaultID is NULL) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:25:50.540

```
IF(len(@DefaultID) > 0)
 SET @ISDefault = '1'
ELSE
    SET @ISDefault = '0' 
```

# c++ - 素数的布尔函数

> ID：13512638
> 
> 赞同：2
> 
> 时间：2012-11-22T12:20:47.770
> 
> 标签：c++, math

我有以下代码用于使用 bool 函数检查前 20 个正数是否为素数。

```
#include <iostream>
#include <cmath>
using namespace std;

bool prime(int);
/* 
function to evaluate whether a positive integer is prime (true)
or not prime (false)
*/
int main()
{
    for(int x=1; x<=20; x++)
    {
        cout <<  x << " a prime ? (1 yes, 0 no) "
             << prime(x) << endl;
    }
    return 0;
}

bool prime(int x)
{
    for(int i=2; i<= sqrt(x); i++)
    {
        if ((x%i) != 0)
            return true;
        else
            return false;
    }
} 
```

它适用于所有数字`1 to 20`，除了`2 and 3`输出的位置`0`而不是`1`. 我想我知道为什么。因为在循环`x = 2 and 3`中没有这样or 。`i``for``i<=sqrt(2)``i<=sqrt(3)`

我如何修改代码以便它也适用于这些值？

还有一条错误消息`"Control may reach end of non-void function"`。为什么是这样？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T12:24:03.933

将您的主要功能修改为以下

```
bool prime(int x)
{
  if (x < 2) return false;
  for(int i=2; i<= sqrt(x); i++) {
    if ((x%i) == 0) return false;
  }
  return true;
} 
```

错误消息告诉您，您的`Control may reach end of non-void function`主要函数不会在所有情况下返回（当您传递`1`给您的函数时，它不会进入 for 循环，因此在没有显式返回任何内容的情况下退出，这可能导致未定义的行为）。通常，您希望在任何条件结构之外都有一个返回指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T12:24:29.197

您在`prime`函数中返回错误的位置。

```
bool prime(int x) {
    for(int i=2; i<= sqrt(x); i++) {
        if ((x%i) == 0)
            return false;
    }
    return true;
} 
```

在您现有的功能中，您只测试第一个`i`. 编译器警告指的是如果循环结束而不返回（尽管我们很容易看到它永远不会返回），那么控制将如何到达结束`prime`而不返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:34:31.927

从循环中提取返回真实结果！

```
bool prime( int _x )
{
    double x = sqrt( _x );
    for( int i = 2; i <= x; ++i )
        if ( !( _x % i ) )
            return false;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T08:10:28.667

你也可以使用它而不需要 sqrt 函数，它就是

```
bool prime (int num){
int i,temp;
for (i=2; i<=num/2) && temp; i++)
if (num%i==0)
temp = 0;
return temp;} 
```

# flash - 在 Flash 播放器上播放流畅的流媒体

> ID：13512640
> 
> 赞同：0
> 
> 时间：2012-11-22T12:20:52.810
> 
> 标签：flash, playback, smooth-streaming

有没有关于在 Flash 播放器上播放流畅的流媒体内容的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:06:32.913

不久前，微软[宣布了一个用于](http://www.streamingmedia.com/Articles/News/Online-Video-News/Two-Worlds-Collide-Smooth-Streaming-Meets-Flash-Player-86841.aspx)[OSMF](http://www.opensourcemediaframework.com/)播放器的 SmoothStreaming 插件。您可以从以下网址下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=36057](http://www.microsoft.com/en-us/download/details.aspx?id=36057)

有关更多信息，您可以参考[OSMF 论坛线程的 Smooth Streaming 插件](http://forums.iis.net/p/1193755/2037281.aspx/1?Smooth%20Streaming%20plugin%20for%20OSMF%20Announcement%20amp%20Feedback)

# azure - 查询天蓝色表不返回任何数据

> ID：13512642
> 
> 赞同：2
> 
> 时间：2012-11-22T12:20:59.897
> 
> 标签：azure, azure-storage, azure-table-storage

以下是用于从 azure 表中获取数据的代码：

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);
 CloudTableClient tableClient = storageAccount.CreateCloudTableClient();
 TableServiceContext serviceContext = tableClient.GetDataServiceContext();
 CloudTableQuery<Customer> partitionQuery =
                (from e in serviceContext.CreateQuery<Customer>("Customer")
                 select e).AsTableServiceQuery<Customer>();

// Loop through the results, displaying information about the entity
   foreach (Customer entity in partitionQuery)
   {
        CustomerList.Add(entity);
   } 
```

一切正常。突然我观察到，上面的调用没有返回任何东西。它能够获取ServiceContext。我尝试使用`"Fidler"`工具进行故障排除。实际上数据来自云表（我在 Fidler 的查询响应中看到）。但是当我迭代`"partitionQuery"`对象时，它返回时没有数据。相同的代码适用于其他机器。在其他机器上使用的 Azure SDK 也是一样的。有人可以帮忙吗？谢谢。

**更新：**现在我正在使用新版本的 Azure SDK。（2012 年 10 月）这可能是个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:04:11.820

我遇到过同样的问题。当我指定分区键（或任何其他查询）时，它工作得很好。

```
rangeQuery = new TableQuery<PhotoEvent>().Where(TableQuery.GenerateFilterConditionForBool("active", QueryComparisons.Equal, true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:09:55.977

如果您使用的是 2012 年 10 月的 Azure SDK，您想要更改：

```
TableServiceContext serviceContext = tableClient.GetDataServiceContext();

CloudTableQuery<Customer> partitionQuery = (from e in serviceContext.CreateQuery<Customer>("Customer")
select e).AsTableServiceQuery<Customer>(); 
```

至

```
TableServiceContext serviceContext = tableClient.GetTableServiceContext();

TableServiceQuery<Customer > partitionQuery = (from e in serviceContext.CreateQuery<Customer>(“Customer”)
                                                               select e).AsTableServiceQuery(serviceContext); 
```

注意：请参阅[更详细的重大更改列表](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-breaking-changes-amp-migration-guide.aspx)。

另外，请确保您已包含`Microsoft.WindowsAzure.Storage.Table.DataServices`命名空间。

如果您仍然观察到意外行为，请提供提琴手跟踪（通过电子邮件），以便我们可以进一步调查。

# vbscript - 从数组中删除重复项

> ID：13512646
> 
> 赞同：0
> 
> 时间：2012-11-22T12:21:15.157
> 
> 标签：vbscript

如何从 vbscript 中的数组中删除重复项？

代码：

```
 dim XObj(100),xObjXml
      for s=0 to xObjXml.length-1      
      XObj(s)=xObjXml(s).getAttribute("xsx")
      next 
```

请为此提出一个更好的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:42:17.073

使用[Dictionary](http://msdn.microsoft.com/en-us/library/x4k5wbx4%28v=vs.84%29.aspx)收集数组的唯一项：

```
>> a = Array(1, 2, 3, 1, 2, 3)
>> WScript.Echo Join(a)
>> Set d = CreateObject("Scripting.Dictionary")
>> For i = 0 To UBound(a)
>>     d(a(i)) = d(a(i)) + 1
>> Next
>> WScript.Echo Join(d.Keys())
>>
1 2 3 1 2 3
1 2 3
>> 
```

（顺便说一句：VBScript 数组没有 .length 属性）

**添加：**

字典的 .Keys() 方法返回一个（唯一）键的数组：

```
>> b = d.Keys()
>> WScript.Echo Join(b), "or:", b(2), b(1), b(0)
>>
1 2 3 or: 3 2 1 
```

**补充二：（航空代码！）**

尝试获取 XML 集合中对象的唯一属性：

```
Dim xObjXml  : Set xObjXml  = ... get some collection of XML objects ...
Dim dicAttrs : Set dicAttrs = CreateObject("Scripting.Dictionary")
Dim i
For i = 0 To xObjXml.length - 1                 
    Dim a : a = xObjXml(i).getAttribute("xsx")  
    dicAttrs(a) = dicAttrs(a) + 1
Next
Dim aAttrs : aAttrs = dicAttrs.Keys() 
```

**添加了 III（对不起！）：**

.Keys() 是一种方法，因此应该这样调用它：

```
Dim aAttrs : aAttrs = dicAttrs.Keys() 
```

**补充四：**

有关工作示例，请参见[此处](https://stackoverflow.com/a/13515105/603855)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T01:32:35.007

如果您不想要 Dictionary 您可以使用以下内容将数组中的每个元素与其自身进行比较。

```
Info = Array("Arup","John","Mike","John","Lisa","Arup")

x = 0
z = ubound(Info)
Do
x = x + 1
Do
z = z - 1
If x = z Then
Info(x) = Info(z)
ElseIf Info(x) = Info(z) Then
Info(x) = ""
End If
Loop Until z=0
z = ubound(Info)
Loop Until x = ubound(Info)
For each x in Info 
If x <> "" Then
Unique = Unique & Chr(13) & x
End If
Next

MsgBox Unique 
```

# php - 将 facebook 评论日期转换为 unix

> ID：13512648
> 
> 赞同：-2
> 
> 时间：2012-11-22T12:21:30.900
> 
> 标签：php, facebook

一直在尝试转换这个 facebook 输出：

```
 Thursday, 22 November 2012 at 12:51 
```

到 PHP 中的 unixtimestamp ... :) 尝试了这个论坛的各种版本，srttime ...从来没有得到真正的答案。

谢谢你的时间！

市场

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:24:58.530

[`strtotime`](http://php.net/strtotime)可以处理得很好：

```
$fbd = 'Thursday, 22 November 2012 at 12:51';
echo strtotime(str_replace($fbd, ' at ', ' ')); // 1353585060 
```

或者，[`DateTime::createFromFormat`](http://php.net/manual/en/datetime.createfromformat.php)与 结合使用[`DateTime::getTimestamp`](http://php.net/manual/en/datetime.gettimestamp.php)：

```
$fbd = 'Thursday, 22 November 2012 at 12:51';
echo DateTime::createFromFormat('l, j F Y * H:i', $fbd)->getTimestamp(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:31:13.337

```
$fb = 'Thursday, 22 November 2012 at 12:51';
$stamp = strtotime( str_replace(' at ', ' ', $fb );
echo "${stamp}\n";
echo date("l, d F Y, H:i", $stamp ); 
```

将产生：

```
1353585060
Thursday, 22 November 2012, 12:51 
```

# c# - 为什么两个多重绑定中只有一个有效？

> ID：13512652
> 
> 赞同：3
> 
> 时间：2012-11-22T12:21:44.580
> 
> 标签：c#, wpf, binding, multibinding

我`MultiBinding`在我的 XAML 中使用了两个不同的点。这是代码：

```
<StatusBarItem>
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="X " />
        <TextBlock>
            <TextBlock.Text>
                <MultiBinding Converter="{StaticResource CoordinateToStringConverter}" TargetNullValue="-">
                    <Binding Path="ChartMouseX" />
                    <Binding Path="AxisSettingsViewModel.XAxisSettings.LabelFormat" />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
        <TextBlock Text=" Y " />
        <TextBlock>
            <TextBlock.Text>
                <MultiBinding Converter="{StaticResource CoordinateToStringConverter}" TargetNullValue="-">
                    <Binding Path="ChartMouseY" />
                    <Binding Path="AxisSettingsViewModel.YAxisSettings.LabelFormat" />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
    </StackPanel>
</StatusBarItem> 
```

我面临一个奇怪的问题。第一个`MultiBinding`完美运行，但第二个从未被调用。如果我注释掉第一个`MultiBinding`，第二个开始按预期工作。

这是 WPF 中的某种限制吗？或者我错过了关于多重绑定的一些东西？

PS：`RaisePropertyChanged`正确调用。但是，在第二个绑定中，转换器根本不会被调用。

**编辑**

这是转换器的代码：

```
using System;
using System.Globalization;
using System.Windows.Data;

namespace LogViewer.Converters
{
   public class CoordinateToStringConverter : IMultiValueConverter
   {
      #region IMultiValueConverter members

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if (values != null && values.Length == 2)
        {
              object value = values[0];
              string format = values[1].ToString();

              if (value is DateTime)
                  return ((DateTime)value).ToString(format);

              if (value is TimeSpan)
                  return ((TimeSpan)value).ToString();

              if (value is double)
                  return ((double)value).ToString(format);
          }

          return null;
      }

       public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
       {
          throw new NotImplementedException();

       #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:57:18.793

我分析了你的问题。这对我来说很好。多重绑定没有错。你有没有检查过带断点的转换器是否被调用了两次。否则你的问题出在 ChartMouseY 和 ChartMouseX 上。![在此处输入图像描述](../Images/9694a7efcf746d9950d0db75807d4cba.png)

# c++ - 隐藏自由功能

> ID：13512653
> 
> 赞同：3
> 
> 时间：2012-11-22T12:21:47.790
> 
> 标签：c++, unit-testing, tdd, c++98

假设我有一堆自由函数，在一个特定的命名空间中，它们被单元测试覆盖。假设我看到了一些可以移出到单独的免费功能中的常见功能。我该怎么做才能隐藏这个新功能？换句话说，这个函数应该只被前面提到的自由函数使用，而不是其他地方。我应该将它添加到自由函数命名空间下的命名空间吗？如果是这样，我应该如何称呼命名空间 - 是否有命名约定？

我还应该指出，这个新函数没有经过单元测试，因为它被其他经过单元测试的函数在内部使用。也许我很懒惰，这个问题的解决方案是我也简单地对这个函数进行单元测试，然后人们可以根据需要使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:33:51.650

您可以将其隐藏：使其成为类的私有静态成员函数，然后显式地为每个内联函数添加好友。实施可以在线或离线，访问控制仍然有效。

除非您*需要*限制访问，否则我会遵循 Boost 约定并将其放在名为`detail`（或类似名称）的嵌套命名空间中。这只是为了证明它是一个实现细节，而不是一个稳定的公共接口（当然也是为了避免污染命名空间）。

这也避免了将每个空闲函数显式列为好友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:31:27.933

您可以将帮助函数作为类的私有部分中的静态函数，然后只与允许使用它的函数成为朋友。

```
class Foo
{
    static int helper() {return 0;}
    friend void baz();
};

void baz()
{
    Foo::helper(); //compiles
}

void buz()
{
    Foo::helper(); //doesn't compile
} 
```

# iphone - UIView removeFromSuperview 调用 viewWillDisappear

> ID：13512656
> 
> 赞同：1
> 
> 时间：2012-11-22T12:21:54.273
> 
> 标签：iphone, ios, xcode, uiview

我有一个自定义`navigation`实现，但我有一个问题。

在我弹出一个之后`UIViewController`，我手动调用`viewWillDisappear`，但由于某种原因，当我调用它时它又被调用`removeFromSuperview`了`UIViewController's` `UIView`。

我怎样才能阻止这种情况发生？发生这种情况`iOS 6`，我确定它不会发生`iOS 4`，我还没有测试 iOS 5。我已经在使用：

```
 - (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers {
     return NO;
} 
```

但这无济于事。

我没有使用`dismissViewControllerAnimated`. 我已经实现了一个自定义导航控制器，我使用我自己的堆栈，并通过在屏幕上和屏幕外动画它们的视图来“推送”和“弹出”UIViewControllers，然后我`viewWillAppear`手动`viewWillDisappear`调用。问题是，在我“弹出”`UIViewController`屏幕外后，当我调用`[currentViewController.view removeFromSuperView]`该`viewWillDisappear`方法时，我不希望这样，因为我已经调用了它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:47:13.320

好的，我找到了解决方案。问题是我正在调用`[controller.view removeFromSuperview]`并且我在调用的调用堆栈中注意到了`[UIViewcontroller _setViewState:animated]`。所以我做了一个小技巧：

```
UIView *view = controller.view;
controller.view = nil;
[view removeFromSuperView];
[controller release]; 
```

现在，调用 [view removeFromSuperview] 时不再调用 viewWillDisappear。希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:25:55.050

```
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

尝试使用这个....

# javascript - 在正则表达式中转义 carret 符号'^'

> ID：13512661
> 
> 赞同：0
> 
> 时间：2012-11-22T12:22:10.913
> 
> 标签：javascript, regex

在表单中有一个文本字段，我想在其中限制“^”符号。我试图在正则表达式中转义 carret 符号 '^'。例如

`"abcdef".match([^])`正在返回 true

请提供建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:25:48.280

要匹配行开头：

```
> 'abcdef'.match(/^/)
[ '', index: 0, input: 'abcdef' ] 
```

要匹配 literal `^`，请将其转义：

```
> 'abcdef'.match(/\^/)
null 
```

要匹配`^`一类字符中的文字，请将其放在除第一个以外的任何位置：

```
> 'abcdef'.match(/[xyz^]/)
null
> 'abcdef'.match(/[def^]/)
[ 'd', index: 3, input: 'abcdef' ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:27:06.097

使用`.search(/\^/)`.Backslash '\' 将删除 '^' 的功能。这样你可以限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:25:31.587

语法错误。正则表达式*必须*包含`/`在 JS 中，所以它应该是

```
"abcdef".match("/[^]/"); //gives null 
```

此外，您不需要将其包含在`/`a`[]`中，您可以使用以下命令将其转义`\`：

```
"abcdef".match("/\^/"); //gives null 
```

有关详细信息，请参阅[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:26:50.777

如果您只想检查字符串是否包含插入符号，请尝试

```
/\^/.test( "abcdef" ); // => false
/\^/.test( "^abcdef" ); // => true
/[^\^]/.test( "aslkfdjfs" ); // =>true as caret does not exist in string 
```

# c# - 如何从列表中选择动态列

> ID：13512664
> 
> 赞同：6
> 
> 时间：2012-11-22T12:22:25.183
> 
> 标签：c#, linq

我想从`List`以下动态选择列。那么最好的方法是什么？

```
//a objects list
List<DashBoard> dashboardlist = (List<DashBoard>)objList;  
string strColumns = "RecDate,ModifiedDate";
objList = (from obj in dashboardlist select new { strColumns }).ToList(); 
```

//////////// 好的，忘记对象列表说我有数据库表，其中包含列 ID、名称、年龄、性别等的数量 ..然后我有 columnList 要显示，而 columnList 是根据情况改变。所以我列出了人；并列出列模板；所以现在我想根据模板选择列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T05:55:15.583

感谢您为我的问题提供想法。在 Google 上花了几个小时我找到了[解决方案](http://www.codeproject.com/Questions/141367/Dynamic-Columns-from-List-using-LINQ)。

```
public void Test() {
    var data = new[] {
        new TestData { X = 1, Y = 2, Z = 3 }
    ,   new TestData { X = 2, Y = 4, Z = 6 }
    };
    var strColumns = "X,Z".Split(',');
    foreach (var item in data.Select(a => Projection(a, strColumns))) {
        Console.WriteLine("{0} {1}", item.X, item.Z);
    }
}
private static dynamic Projection(object a, IEnumerable<string> props) {
    if (a == null) {
        return null;
    }
    IDictionary<string,object> res = new ExpandoObject();
    var type = a.GetType();
    foreach (var pair in props.Select(n => new {
        Name = n
    ,   Property = type.GetProperty(n)})) {
        res[pair.Name] = pair.Property.GetValue(a, new object[0]);
    }
    return res;
}
class TestData {
    public int X { get; set; }
    public int Y { get; set; }
    public int Z { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:34:14.020

我假设列的列表可能来自外部资源并发生变化，我建议：

通过反射，您可以生成与每个 Column 对应的 FieldInfo 列表，然后遍历列表中的每个项目和每个 FieldInfo 并在数据对象上调用 GetValue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:42:35.970

这是解决方案： [使用 LINQ 动态选择列？](https://stackoverflow.com/questions/2717039/select-a-column-dynamically-using-linq) 并查看动态 Linq：[http ://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:59:41.070

假设您只有 2 个模板。您可以为每个模板创建一个方法，该方法仅返回您需要的列。像这样的东西：

```
// method for template 1 - returns only 3 columns/properties
private DashBoard CreateDashBoardXxxxxxx(DashBoard item)
{
    return new DashBoard {
        Property1 = item.Property1,
        Property4 = item.Property2,
        Property3 = item.Property3
    };
}

// method for template 2 - returns N columns/properties
private DashBoard CreateDashBoardYyyyyyyy(DashBoard item)
{
    return new DashBoard {
        Property1 = item.Property1,
        Property4 = item.Property2,

        // Other properties
        // .....

        PropertyN = item.PropertyN
    };
} 
```

然后，您可以像这样使用这些方法：

```
List<DashBoard> dashboardlist = (List<DashBoard>)objList; 

// using template 1
var list = dashboardlist.Select(CreateDashBoardXxxxxxx);

// using template 2
var list2 = dashboardlist.Select(CreateDashBoardYyyyyyyy); 
```

你只需要做一些代码来决定应该使用哪个模板。

我希望这有帮助！！

# ios - 我在 facebooksdk.framework 3.1 中找不到 facebook.m 文件

> ID：13512669
> 
> 赞同：1
> 
> 时间：2012-11-22T12:22:35.513
> 
> 标签：ios, facebook, cordova

我正在使用 phonegap facebook 插件。

当我尝试从我的应用程序登录时，fbAppAuth 对话框和 safariAuth 同时出现。

所以，虽然我完成了 safariAuth ，但出现了 fbAppAuth 对话框。我需要关闭其中一个

并从以下链接找到解决方案。

[如何使用新的 Facebook Connect iOS API 通过 DIALOG 授权用户？](https://stackoverflow.com/questions/5559061/how-to-authorize-user-through-a-dialog-with-the-new-facebook-connect-ios-api)

但是，我需要修改我没有的 facebook.m 文件。我正在使用 facebooksdk.framework 3.1

并且只有 facebook.h 文件，但没有 facebook.m 文件。

如何从我的项目中找到 facebook.m 文件？或者....是我应该下载的东西吗？

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:53:39.350

在 FBSession.h 中，枚举`FBSessionLoginBehavior`是您正在寻找的。
将所有出现的其他值替换`FBSessionLoginBehaviorForcingWebView`为强制 FB 打开 WebView。

这花了我几个小时才弄清楚。我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:50:52.313

新的 FacebookSdk.framwork 采用静态库的形式，您无法更新或更改，您必须按原样使用。

但是，如果您想更新 facebook.m，那么您可以从 github 下载 sdk 源代码，您可以在其中找到 sdk 的源文件，您可以在其中更新任何您想要的文件。我在下面提供链接，您可以从中下载源代码。

[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

可选：-（如果您在使用 iOS 6.x 时遇到错误）一旦您下载源代码，然后打开 Facebook-ios-sdk 项目文件并使用 armv7 和 armv7s 架构构建文件，如果您想在 iOS 6.x 中使用 sdk

# javascript - JavaScript 平板电脑检测

> ID：13512677
> 
> 赞同：2
> 
> 时间：2012-11-22T12:23:02.847
> 
> 标签：javascript, jquery, tablet

**要求 - 使用 JavaScript 检测平板电脑**

我不允许使用任何插件或库（jQuery 是一个例外）并且希望将代码保持在最低限度。

我已经阅读了很多关于这个主题的帖子并提出了这个解决方案（检查屏幕分辨率和触摸）：

```
var _w = Math.max($(window).width(), $(window).height());
var _h = Math.min($(window).width(), $(window).height());

var tabletView = (_w >= 1000 && _h >= 600);

var is_touch_device = 'ontouchstart' in document.documentElement;

if (tabletView && is_touch_device) {
    alert('tablet');
}
else {
    alert('Not a Tablet');
}​ 
```

**问题**：这段代码足够可靠吗？如果不是更好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:31:08.737

这也将使具有更大屏幕分辨率的手机成为平板电脑。

除此之外，这段代码是可靠的，如果没有库或手动解析用户代理，您实际上无法检测手机和平板电脑之间的差异。

# php - 从数组数组中创建要放入 IN 语句的字符串

> ID：13512679
> 
> 赞同：0
> 
> 时间：2012-11-22T12:23:05.717
> 
> 标签：php, arrays, iteration

我有一个如下所示的数组数组：

```
array(40) {
  [0]=>
    array(2) {
    ["id"]=>
    string(2) "ta"
    ["size"]=>
    int(2)
  [1]=>
    array(2) {
    ["id"]=>
    string(2) "tq"
    ["size"]=>
    int(4)
.... 
```

我希望能够以一种可以进行如下查询的方式获取所有尺寸：

```
IN (2,4) 
```

所以...对于每个数组，获取大小键： IN (size,size,size...)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:29:15.480

干得好：

```
$a = array("id"=>"ta","size"=>2);
$b = array("id"=>"tq","size"=>4);
$c = array($a,$b);

$in = array();
foreach ($c as $key=>$value) {
    if(array_key_exists("size", $value)){
        $in[] = $value["size"];
    }
}

echo implode(",", $in); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:29:23.410

你可以做这样的事情： -

```
$sizes = implode(',', array_map(function($v) { return $v['size']; }, $array)); 
```

然后只需传递`$sizes`给您的`IN`查询

**编辑**

针对您在下面的评论，您可以使用[`array_unique`](http://php.net/manual/en/function.array-unique.php)删除重复的尺寸，例如：

```
$sizes = implode(',', array_unique(array_map(function($v) { return $v['size']; }, $array))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:29:08.473

```
$sizes = array();
foreach($array as $value) {
  $sizes[] = $value['size'];
}
$query = implode(',', $sizes); 
```

查询`" IN ($query) "`……

# android - 如何提高具有多个类的 AIR for Android 应用程序的加载速度/发布速度？

> ID：13512680
> 
> 赞同：5
> 
> 时间：2012-11-22T12:23:05.010
> 
> 标签：android, actionscript-3, air, flash-cs5

我有以下情况：

一款适用于拥有数百个课程的 Android 设备的应用程序。我正在使用 Flash CS5.5，在 AS3 中使用 AIR for Android 进行开发。

该应用程序是一款益智游戏，每个类都代表谜题中的一个元素。每个类都是基类的派生类，仅包含一些特定信息，例如唯一名称、类别、拼图位置。每个班级还附加了一个 80 x 80 像素的图像。但是，大约有 300 个这样的课程。

应用程序在加载后运行非常顺利，因为应用程序需要很长时间才能发布，然后才能在移动设备上运行。我对导出/发布时间很长以及在移动设备上的安装时间很长没有任何问题。但是每次我从移动设备上运行应用程序时，它需要大约 2 分钟才能加载，这异常高，即使是高端 3d FPS 游戏也加载不了那么长时间。测试是在运行 Android 4.0 和随后的 4.1 的 HTC Sensation 上完成的。

我的问题是，我能做些什么来帮助减少这个初始启动时间？我再次提到，该应用程序在加载后运行流畅，因为它实际上并没有那么复杂，也没有使用大量图形，除了每个类附加的许多 80x80 JPG 图像。在早期的测试中，当我只实现了 20-30 个类时，一切都很顺利。当我在游戏逻辑完成后添加游戏所需的所有元素时，一切都加载缓慢。

感谢您的任何回答/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:10:54.420

如果您想加快 Flash CS5.5 中 AS3 项目的编译时间，请进入 .fla 的 Actionscript 3 设置并关闭“警告模式”。警告模式有一点开销，因为它试图在将代码从 AS2 迁移到 AS3 时为您提供有用的警告。如果您知道自己在做什么，则可以将其关闭并节省大量时间。

1) 文件 > 发布设置。2) 单击“Actionscript 3.0”旁边的扳手图标 3) 取消选中“警告模式”

这大大减少了我在一个大项目上的编译时间。另一件有帮助的事情是将您的资产分成更小的 swfs/swcs，这些 swfs/swcs 只是在运行时引入的。

只是部分答案，我不确定如何修复 Android 设备上的缓慢加载时间。祝你好运！

# entity-framework - EntityFramework 继承 - 忽略不可为空的列

> ID：13512684
> 
> 赞同：1
> 
> 时间：2012-11-22T12:23:17.283
> 
> 标签：entity-framework, inheritance, orm

我的 edmx 模型中有一个 one 实体，它具有一个可以包含大量 XML 数据的属性。

基本上我想在没有这个属性（列）的情况下加载这个实体 /* 大量数据加载 */ 。并且仅在严格需要时才加载此列。

我试图创建一个包含此属性的继承实体并从基础实体（原始实体）中删除此属性。我已经完成了映射。此时我有问题，在编译过程中出现错误，该基本实体无法插入和更新自身，因为属性不可为空

我正在寻找如何解决这种情况的最佳方法（解决方案）。

我正在附上我的 emdx 设计师的剪纸（包含我当前和所需的情况）

![实体框架视图](../Images/5c4fd27bc62b2dfd08d3ca63f0457043.png)

**更新：**

我将尝试编写一个我尝试过的过程：我将函数映射到我的自定义函数。对于没有 XML 列（属性）的实体 TRP_TechReport_T。然后我只是将实体 TRP_TechReport_T 函数映射到我的自定义函数（包含 XML 列）。

然后我在实体 TRP_TechReport_T 上设置映射条件：When TRP_XML = Empty.String

TechReport_T 映射： ![技术报告映射](../Images/afce4eba7a4ace3b3999ce3bfe952418.png)

TechReport_T 功能： ![在此处输入图像描述](../Images/8bc80f82c91443c5a4482ad898d4e2d9.png)

TechReportFull_T 映射： ![实体 TechReportFull_T 映射](../Images/d7bb1521bd319599ae1570ae48e7af32.png)

TechReportFull_T 函数： ![TechReportFull_T 函数](../Images/0a9081b117aa96292b5c5d840de91d83.png)

此时我收到错误：

> 错误 2 错误 3032：从第 3754 行开始映射片段时出现问题：条件成员 'TRP_TechReport_T.TRP_XML' 的条件不是 'IsNull=False' 被映射。删除 TRP_TechReport_T.TRP_XML 上的条件或将其从映射中删除。

该列在数据库中不能为空，也不能为空。

我可以将 XML 属性硬设置为可为空，但在从数据库更新模型的情况下，信息将丢失。

目前，这是我唯一能想到的。

# int - Android：从一个字节中获取整数值

> ID：13512688
> 
> 赞同：0
> 
> 时间：2012-11-22T12:23:38.077
> 
> 标签：int, byte

我正在一个 Android 应用程序中录制一些音频，现在我想知道这就是我得到的样本的价值。由于记录以字节为单位，我想将其转换为整数或浮点数，以便更轻松地比较信号电平。

我正在尝试使用此脚本执行此操作，但它不起作用：

```
 byte data[] = new byte[bufferSize];

                    read = recorder.read(data, 0, bufferSize);

                    int dataInt[]= new int[bufferSize];//To convert into int

                    for (int j=0; j<bufferSize ; j++)
                    {
                        dataInt[j]=data[j].intValue();

                    } 
```

谁能告诉我我做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:08:19.040

您正在对原始字节值调用 intValue() ！为什么你不能做

```
dataInt[j]=data[j]; 
```

# windows-phone-7 - 在 WP7.1 上使用 MvvmCross 将参数从 VM 发送到设备上的 VM 时出现异常

> ID：13512689
> 
> 赞同：1
> 
> 时间：2012-11-22T12:23:43.693
> 
> 标签：windows-phone-7, mvvmcross

我在 ViewModel 上有一个命令，用于导航到详细信息页面

```
public class InstalledMetersListViewModel : MvxViewModel
    , IMvxServiceConsumer<IInstallMeterRepository>
{
    public List<InstalledMeterListItemViewModel> List { get; set; } 

    public InstalledMetersListViewModel()
    {
        List = new List<InstalledMeterListItemViewModel>();
        foreach (var meter in this.GetService<IInstallMeterRepository>().GetInstalledMeters())
        {
            List.Add(new InstalledMeterListItemViewModel { Serial = meter.Serial, Description = meter.Description });
        }
    }

    public IMvxCommand ShowDetailsCommand
    {
        get
        {
            return new MvxRelayCommand<InstalledMeterListItemViewModel>(type => RequestNavigate<InstalledMeterListItemViewModel>(new {serial = type.Serial.ToString()}));
        }
    }
} 
```

有了这个视图

```
<ListBox ItemsSource="{Binding List}" x:Name="TheListBox">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border BorderThickness="5,5,5,5" BorderBrush="White">
                <Grid Width="auto" HorizontalAlignment="Stretch" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <TextBlock Text="S/N"/>
                    <TextBlock Text=" : " Grid.Column="1"/>
                    <TextBlock Text="{Binding Serial}" Grid.Column="2"/>

                    <TextBlock Text="Description" Grid.Row="1"/>
                    <TextBlock Text=" : " Grid.Column="1" Grid.Row="1"/>
                    <TextBlock Text="{Binding Description}" Grid.Column="2" Grid.Row="1"/>

                    <Button Content="Details" Grid.Column="3" Grid.RowSpan="2" Command="{Binding Path=DataContext.ShowDetailsCommand, ElementName=TheListBox}" CommandParameter="{Binding}"/>
                </Grid>
            </Border>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我导航到的 ViewModel 是

```
public class InstalledMeterListItemViewModel : MvxViewModel,
    IMvxServiceConsumer<IInstallMeterRepository>
{

    public InstalledMeterListItemViewModel(string serial)
    {
        IInstalledMeter meter = this.GetService<IInstallMeterRepository>().GetMeter(Convert.ToDouble(serial));
        Description = meter.Description;
        Serial = meter.Serial;
    }

    public InstalledMeterListItemViewModel()
    {

    } 
```

> 访问对象时出现问题 - 这很可能是由作为内部生成的匿名对象引起的 - 请参阅[匿名类型和获取 WP7.1 上的访问器？](https://stackoverflow.com/questions/8273399/anonymous-types-and-get-accessors-on-wp7-1)

但我不使用任何内部类，所以我看不出如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:24:06.113

这一行：

```
return new MvxRelayCommand<InstalledMeterListItemViewModel>(
         vm => RequestNavigate<InstalledMeterListItemViewModel>(
              new {serial = type.Serial.ToString()})); 
```

创建一个匿名类的实例

该匿名类是由编译器生成的（使用Reflector之类的工具来查看）

编译器将其生成为`internal`

即编译器创建一个类有点像

```
 internal class Anonymous_Mangled_Name_1223345tHER
 {
     public string serial { get; set; }
 } 
```

然后将您的代码重写为：

```
return new MvxRelayCommand<InstalledMeterListItemViewModel>(
         vm => RequestNavigate<InstalledMeterListItemViewModel>(
              new Anonymous_Mangled_Name_1223345tHER
              {
                  serial = type.Serial.ToString()
              })); 
```

* * *

为了反映和使用这个类，Cirrious.MvvmCross 中的代码需要访问它......

这就是你需要的原因`InternalsVisibleTo`- [http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

有关要添加的行的示例，请参见[Conference-AssemblyInfo.cs的最后一行。](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.Core/Properties/AssemblyInfo.cs)

```
[assembly: InternalsVisibleTo("Cirrious.MvvmCross")] 
```

注意：对于旧的“master”分支，这是：

```
[assembly: InternalsVisibleTo("Cirrious.MvvmCross.WindowsPhone")] 
// should really also add Cirrious.MvvmCross.Touch - but mono runtime doesn't care 
// should really also add Cirrious.MvvmCross.Droid - but mono runtime doesn't care 
```

# asp.net-mvc - 如何在 Windows Phone 8 模拟器（来自 Visual Studio）中启动 ASP.NET MVC 4 Web 应用程序？

> ID：13512691
> 
> 赞同：2
> 
> 时间：2012-11-22T12:23:49.683
> 
> 标签：asp.net-mvc, mobile, asp.net-mvc-4, windows-phone-8, windows-phone-8-emulator

可能是我忽略了显而易见的问题，但是如何在 Windows Phone 8 模拟器中启动在 Visual Studio 2012 中开发的 ASP.NET MVC 4 应用程序？我已经安装了 WP8 SDK，并且能够在 Visual Studio 的 WP8 模拟器中调试 Windows Phone 应用程序，但是没有从 MVC 项目启动模拟器的选项。我也无法直接启动模拟器，因为当我在 Windows 8 Metro 屏幕中搜索“模拟器”时它没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:48:26.090

我在这一点上的猜测是，没有办法直接从 Visual Studio 2012 在 WP8 模拟器中启动 Web 应用程序。不过，关于如何从 Windows 8（即不通过 Visual Studio）启动模拟器应用程序，陪审团仍然没有定论：(

我目前能够启动 WP8 模拟器的唯一方法是从 Visual Studio 2012 在其中启动一个 WP8 应用程序。

我发现的解决方法是通过 Visual Studio 在模拟器中调试 WP8 应用程序，在不关闭模拟器的情况下停止调试，在 Visual Studio 中打开 Web 应用程序项目，启动它并在 WP8 模拟器中导航到它。

请注意，您必须向浏览器提供计算机的 IP 地址，因为模拟的 WP8 在网络上作为单独的主机运行。因此，您还必须配置 IIS Express 以允许通过所述 IP 地址进行访问，还必须配置防火墙以允许相关端口上的 HTTP 流量通过。

# java - JAR 文件逐渐增大用户文件夹的大小

> ID：13512693
> 
> 赞同：0
> 
> 时间：2012-11-22T12:23:53.107
> 
> 标签：java, firefox, selenium, webdriver, profile

嗨，我在 Windows 上的 selenium 中创建测试后正在运行 jar 文件。每次我运行它时，用户文件夹的大小都会增加
为什么

> C:\文档和设置\我的用户名

运行前

> 8.79 GB（9,438,803,475 字节）
> 8.84 GB（9,497,837,568 字节）

运行

> 8.81 GB（9,470,489,146 字节）
> 
> 8.87 GB（9,529,806,848 字节）

停止

> 8.79 GB（9,441,708,575 字节）
> 
> 8.84 GB（9,500,758,016 字节）

当它停止时，它会留下一些字节。因此，如果这样做，我的硬盘驱动器将已满。
如何将其停止为“左字节”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:30:04.370

可能有任何具体情况。

> 您正在拍摄失败的测试用例的屏幕截图并将它们保存在同一目录中。
> 
> 您正在生成测试用例执行日志并将它们存储在目录中。

以及您项目的任何其他特定内容。看看它们。java 和 selenium 都没有这样做的倾向。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:31:08.593

每当创建 selenium 会话时，都会在 temp 文件夹中创建一个临时配置文件

在较新版本的 selenium 中，据我所知（**高于 2.17/更高版本**），关闭浏览器时会自动删除临时配置文件。

我不确定旧版本，因为我**只使用了 2.13 、 2.17 、 2.25**

# drupal - Drupal Commons 包还是普通包？

> ID：13512694
> 
> 赞同：0
> 
> 时间：2012-11-22T12:23:58.047
> 
> 标签：drupal, social-media

我必须创建一个具有社交网络功能的网站，如果我使用普通的 Drupal 核心包，我有一个问题：创建一个社交网络特色网站是否舒适。我听说过 Drupal Commons；这比这更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:21:44.833

您可以使用 Drupal 中提供的各种模块来实现这一点。

以下是模块列表，我需要制作一个社交网站：

```
-guestbook ( equivalent to comments on profile or scraps )
-image, inline, shazamgaller: to be able to add images inline and create photo gallaries.
-invite ( allows to become member by invitation only )
-OG ( gives you groups or communities )
-cck ( let you make any type of content )
-private message ( and chat, if you want )
-mysite
-nodeprofiles (http://groups.drupal.org/profiles-as-nodes)
-event
-buddylist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T13:28:04.833

我想建议 Drupal Commons - [https://www.acquia.com/products-services/drupal-commons-social-business-software/benefits](https://www.acquia.com/products-services/drupal-commons-social-business-software/benefits)。它是用于社交网站的经过验证的 Drupal 发行版。Drupal commons 具有以下列出的社交网络功能的最佳实现：

*   群组消息
*   状态
*   问题
*   用户资料
*   民意调查
*   团体
*   活动
*   电子邮件通知
*   团体订阅
*   还有很多

使用 Commons 的最大好处是您没有花费任何时间（开发和测试）基本社交网络功能。分布相当稳定，因为它由 Acquia 维护。

# jasper-reports - jasper 报告中的字段值无法在空条件下显示

> ID：13512696
> 
> 赞同：-1
> 
> 时间：2012-11-22T12:24:02.473
> 
> 标签：jasper-reports, ireport

我在使用条件检查报告中的空值时遇到问题。我的条件是

```
$F{BILANGAN4}==0 ? "-" : "" 
```

字段的值不会出现，只是出现“-”。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:13:19.793

我不确定`$F{BILANGAN4}==0 ? "-" : ""`会编译成什么。您是否查看过为您的报告生成的 .java 代码？`java.lang.Long` *可能*为空，所以你想这样检查：

```
( ( null == $F{BILANGAN4} || $F{BILANGAN4} == 0 ) ? "-" : "" ) 
```

我通常会明确地添加`.longValue()`到这样的调用中，只是为了明确：如果类型不正确，我会遇到编译器失败，并且我知道我需要调整一些东西，并且可能重新考虑代码。

请注意，上面的代码（例如作为文本字段值）将仅显示“-”或不显示任何内容。如果您希望`$F`实际显示 的值，则必须将其放在那里。我很确定这实际上是您想要的：

```
( ( null == $F{BILANGAN4} || $F{BILANGAN4} == 0 ) ? "-" : $F{BILANGAN4} ) 
```

# android - android上电池放电的剩余时间

> ID：13512698
> 
> 赞同：2
> 
> 时间：2012-11-22T12:24:03.470
> 
> 标签：android, battery

我正在寻找一个代码来估计/猜测在 android 手机电池完全放电之前剩余的时间。我的搜索结果充满了可用的应用程序，还有一个普遍的评论是计算它几乎没用。但是我需要代码。任何帮助，即使是粗略的片段，都可以帮助您入门。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:28:55.373

您无法准确猜测电池放电剩余多少时间，因为可能有不同的应用程序或服务消耗电池。因此它可能会有所不同。

但是，您可以通过为操作 Intent.ACTION_BATTERY_CHANGED 注册接收器来借助广播接收器获得电池寿命。我的回答很关键，从 Android Developers 网站获取信息。

通过在具有上述 Intent 操作的 BroadcastReceiver 的 onReceive() 方法中使用以下语句，您将获得当前可用的电池电量（例如，50%、60% 等）。但是您无法估计剩余时间，因为某些应用程序可能会消耗更多电量。所以我认为电池电量到剩余时间的转换不会给出正确的结果。

```
battery_level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1); 
```

我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:27:06.797

```
@Override
public void onCreate() {
    BroadcastReceiver batteryReceiver = new BroadcastReceiver() {
        int scale = -1;
        int level = -1;
        int voltage = -1;
        int temp = -1;
        @Override
        public void onReceive(Context context, Intent intent) {
            level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
            temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);
            voltage = intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);
            Log.e("BatteryManager", "level is "+level+"/"+scale+", temp is "+temp+", voltage is "+voltage);
        }
    };
    IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    registerReceiver(batteryReceiver, filter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-04T11:43:41.850

任何人几乎不可能计算出任何人的确切时间。第一个问题：我们不知道电池的型号和它到目前为止所经历的循环，这就是电池的健康状况。我们不知道哪个应用程序消耗更多或更少的电量。因此，您需要至少运行该应用程序 10 天才能获取所有这些数据，并且您需要定期修改数据，然后才能正确估计。所以它是一个高级应用程序。

# c# - 在 C# 中保护用户指定的表名免受 SQL 注入

> ID：13512702
> 
> 赞同：1
> 
> 时间：2012-11-22T12:24:32.007
> 
> 标签：c#, mysql, escaping, sql-injection, mysql-connector

作为[如何在 C# 中保护用户指定的表名免受 SQL 注入的扩展，使用 MySQL](https://stackoverflow.com/q/13495968/1380710)，我试图弄清楚如何保护用户指定的表查询免受 SQL 注入：

```
string createEventSQL = "INSERT INTO " + TableNameFromUser +
        " (" + TableColumnNames + ") " +
        "VALUES(" + ParametrizedTableColumnParams + ")"; 
```

需要明确的是：我很想**使用预定义的库来参数化 input**，但我**找不到一个**。

我不希望额外的查询（例如`SHOW TABLES LIKE @TableNameFromUser;`）来保护这一点，因为性能是一个问题。

在我看来，许多人声称[不可能做出 100% 安全的解决方案](https://stackoverflow.com/q/1800013/1380710#comment1688148_1800125)，但这对我来说没有意义，因为诉诸参数化应该与自己完成所有工作一样“不安全” . 本质上，我只想复制[MySQL 连接器](http://dev.mysql.com/downloads/connector/net/)会做的事情，如果它支持参数化的表名。

我对 SQL 还不是很有经验，但到目前为止，我发现我需要：

*   转义/禁用所有[可转义字符](http://dev.mysql.com/doc/refman/5.6/en/string-literals.html#character-escape-sequences)。
*   [禁用“--”](https://stackoverflow.com/a/1800125/1380710)

还有什么可以防止 SQL 注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:40:06.790

您可以而且应该参数化您的数据值。你知道的。

您不能使用 SQL 的预准备语句功能参数化您的表名和列名。但是，您应该对用户提供的表名和列名中的内容建立和实施约束。例如，您可以坚持表名和列名都以字母开头，并且由一组字母、数字和下划线中的 3 到 15 个字符组成。您可以轻松编写一个检查器函数，该函数将为打破约束的用户提供的名称抛出异常，并在编写查询时始终使用该函数检查名称。

出于性能考虑，您已排除根据 dbms 中的模式检查表和列名。您可能需要重新考虑该决定：这些查询并不像您想象的那么慢。MySQL 信息模式允许您执行如下查询：

```
SELECT COLUMN_NAME
  FROM information_schema.COLUMNS
 WHERE TABLE_SCHEMA = 'zip'
   AND TABLE_NAME= 'zip' 
```

这将为您提供您指定的表中的一个很好的列列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:38:47.387

MySQL Ado 连接器支持参数 on `MySqlCommand`- [here](http://dev.mysql.com/doc/refman/5.5/en/connector-net-tutorials-intro.html#connector-net-tutorials-parameters)。正如您所确定的，通常，您应该始终传递参数而不是修改即席 SQL。

不幸的是，这不会参数化表名，根据这个 SO 帖子：[MySqlParameter as TableName](https://stackoverflow.com/questions/6041496/mysqlparameter-as-tablename)。

所以看起来你需要验证和清理表名。

您可以将表名与白名单进行比较吗？或者可能在数据库的其他地方保留一个有效表名的列​​表？

# javascript - JavaScript 中的验证码在查看源代码中显示代码

> ID：13512709
> 
> 赞同：0
> 
> 时间：2012-11-22T12:24:56.887
> 
> 标签：javascript, jsp, captcha

我在 JavaScript 中创建了一个带有验证码的 JSP 页面，但问题是当我通过右键单击 JSP 页面单击“查看源代码”选项时可以查看脚本。即使我阻止了右键单击选项，仍然可以通过编辑菜单中的“查看源代码”查看代码。

关于如何解决这个问题的任何想法？我对 JSP 和 servlet 很陌生...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:48:39.620

JavaScript 在客户端执行，因此**必须**在用户的浏览器中下载，没有办法阻止。

但是，您可以查看[minification](http://en.wikipedia.org/wiki/Minification_%28programming%29)和/或[obfuscation](http://en.wikipedia.org/wiki/Obfuscation)，但这**不会**阻止用户查看您的脚本，只会使其更难阅读和理解。

至于验证码，这通常是您想要在服务器端（例如在 servlet 中）而不是在客户端（在 JavaScript 代码中）处理的事情。

# regex - 如何在 Matlab 中打印带有千位分隔符的整数？

> ID：13512710
> 
> 赞同：12
> 
> 时间：2012-11-22T12:24:56.310
> 
> 标签：regex, matlab

我想使用逗号作为千位分隔符将数字转换为字符串。就像是：

```
x = 120501231.21;
str = sprintf('%0.0f', x); 
```

但随着效果

```
str = '120,501,231.21' 
```

如果内置`fprintf`/`sprintf`不能做到这一点，我想可以使用正则表达式来制作很酷的解决方案，也许通过调用 Java（我假设它有一些基于语言环境的格式化程序），或者使用基本的字符串插入操作。但是，我不是 Matlab 正则表达式或从 Matlab 调用 Java 方面的专家。

*相关问题：* [如何在**Python**](https://stackoverflow.com/questions/13082620/how-can-i-print-a-float-with-thousands-separators)中打印带有数千个分隔符的浮点数？

**在Matlab**中是否有任何既定的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T12:44:28.130

使用千位分隔符格式化数字的一种方法是调用 Java 语言环境感知格式化程序。“未记录的 Matlab”博客中的“[格式化数字](http://undocumentedmatlab.com/blog/formatting-numbers/)”文章解释了如何执行此操作：

```
>> nf = java.text.DecimalFormat;
>> str = char(nf.format(1234567.890123))

str =

1,234,567.89 
```

其中`char(…)`将 Java 字符串转换为 Matlab 字符串。

瞧！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T13:43:14.217

这是使用正则表达式的解决方案：

```
%# 1\. create your formated string 
x = 12345678;
str = sprintf('%.4f',x)

str =
12345678.0000

%# 2\. use regexprep to add commas
%#    flip the string to start counting from the back
%#    and make use of the fact that Matlab regexp don't overlap
%#    The three parts of the regex are
%#    (\d+\.)? - looks for any number of digits followed by a dot
%#               before starting the match (or nothing at all)
%#    (\d{3})  - a packet of three digits that we want to match
%#    (?=\S+)   - requires that theres at least one non-whitespace character
%#               after the match to avoid results like ",123.00"

str = fliplr(regexprep(fliplr(str), '(\d+\.)?(\d{3})(?=\S+)', '$1$2,'))

str =
12,345,678.0000 
```

# mysql - 在 MySQL 中删除连续重复行的有效方法

> ID：13512717
> 
> 赞同：1
> 
> 时间：2012-11-22T12:25:18.213
> 
> 标签：mysql, sql, duplicate-removal

我有一个表，`(PROPERTY_ID, GPSTIME, STATION_ID, PROPERTY_TYPE, VALUE)`其中 PROPERTY_ID 是主键，STATION_ID 是外键。

该表记录状态变化；每行代表给定时间某个站点的属性值。但是，它的数据是从每个属性都是一列（如`(STATION_ID, GPSTIME, PROPERTY1, PROPERTY2, PROPERTY3, ...)`）的旧表转换而来的。因为通常一次只有一个属性发生了变化，所以我有很多重复项。

我需要删除所有具有相同值的**连续**行。

例子。旧表包含的值如

```
time  stn   prop1  prop2
100   7     red    large
101   7     red    small
102   7     blue   small
103   7     red    small 
```

转换后的表是

```
(order by time,type)          (order by type,time)
time  stn type  value         time  stn type value
100   7   1     red           100   7   1    red
100   7   2     large         101   7   1    red
101   7   1     red           102   7   1    blue
101   7   2     small         103   7   1    red
102   7   1     blue          100   7   2    large
102   7   2     small         101   7   2    small
103   7   1     red           102   7   2    small
103   7   2     small         103   7   2    small 
```

应该改为

```
time  stn type  value
100   7   1     red
100   7   2     large
101   7   2     small
102   7   1     blue
103   7   1     red 
```

该表包含大约 2200 万行。

我目前的方法是使用过程来遍历表并删除重复项：

```
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE id INT;
    DECLARE psid,nsid INT DEFAULT null;
    DECLARE ptype,ntype INT DEFAULT null;
    DECLARE pvalue,nvalue VARCHAR(50) DEFAULT null;
    DECLARE cur CURSOR FOR 
        SELECT station_property_id,station_id,property_type,value 
        FROM station_property 
        ORDER BY station_id,property_type,gpstime;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    OPEN cur;
    read_loop: LOOP
        FETCH cur INTO id,nsid,ntype,nvalue;
        IF done THEN 
            LEAVE read_loop;
        END IF;        
        IF (psid = nsid and ptype = ntype and pvalue = nvalue) THEN
            delete from station_property where station_property_id=id;
        END IF;
        SET psid = nsid;
        SET ptype = ntype;
        SET pvalue = nvalue;
    END LOOP;
    CLOSE cur;
END 
```

但是，它太慢了。在具有 20000 行的测试表上，它会在 6 分钟内删除 10000 个重复项。有没有办法优化程序？

PS 我的旧表仍然完好无损，所以最好尝试在没有重复项的情况下对其进行转换，而不是在转换后处理重复项。

**更新。**

澄清我想允许哪些重复项，哪些不允许。

1.  如果属性更改，然后更改回来，我希望保存所有 3 条记录，即使第一个和最后一个包含相同的 station_id、类型和值。
2.  如果有多个具有相同 station_id、类型和值的连续（通过 GPSTIME）记录，我希望只保存第一个（表示对该值的更改）。

总之，`a -> b -> b -> a -> a`应该优化到`a -> b -> a`.

**解决方案**

正如@Kickstart 建议的那样，我创建了新表，填充了过滤数据。为了参考前几行，我使用了与[此问题](https://stackoverflow.com/questions/5085849/mysql-remove-consecutive-duplicate-values)中使用的方法类似的方法。

```
rename table station_property to station_property_old;
create table station_property like station_property_old;

set @lastsid=-1;
set @lasttype=-1;
set @lastvalue='';

INSERT INTO station_property(station_id,gpstime,property_type,value)
select newsid as station_id,gpstime,newtype as type,newvalue as value from
-- this subquery adds columns with previous values
    (select station_property_id,gpstime,@lastsid as lastsid,@lastsid:=station_id as newsid,
    @lasttype as lasttype,@lasttype:=property_type as newtype,
    @lastvalue as lastvalue,@lastvalue:=value as newvalue
    from station_property_old
    order by newsid,newtype,gpstime) sub
-- we filter the data, removing unnecessary duplicates
where lastvalue != newvalue or lastsid != newsid or lasttype != newtype;

drop table station_property_old; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:39:37.010

可能创建一个新表，使用 GROUP BY 从现有表中进行选择填充。像这样的东西（未经测试，请原谅任何错别字）：-

```
INSERT INTO station_property_new
SELECT station_property_id, station_id, property_type, value 
FROM (SELECT station_property_id, station_id, property_type, value, COUNT(*) FROM station_property GROUP BY station_property_id, station_id, property_type, value) Sub1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:07:49.537

关于链接属性，您不能设置唯一约束以确保站/类型/值列的组合是唯一的。这样，您将无法将其更改为会导致重复的值。

# c# - 具有时间跨度的 Kendo ui 排序列不起作用

> ID：13512721
> 
> 赞同：1
> 
> 时间：2012-11-22T12:25:28.483
> 
> 标签：c#, kendo-ui

我的网格中有一个列，我在其中打印 timeSpan 类型的值（使用格式化 "kendo.format('{0:00}:{1:00}:{2:00} ..." 正确打印数据。） .不幸的是，按此列排序不起作用，而按其他列排序则起作用。有人知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:42:22.347

不工作是什么意思？

如果它不允许您单击该列，那么您很可能正在使用模板列并且模板列不可排序。

如果您将列绑定到 TimeSpan 变量并且您正在使用服务器排序，那么排序应该可以正常工作。例如

```
columns.Bound(c => c.TimeSpanFieldName) 
```

如果您将列绑定到 TimeSpan 变量并且您正在使用 dataSource 的 ServerOperation 选项，那么排序将无法正常工作。而且您可能需要将该列绑定到 TimeSpan 属性而不是 TimeSpan 的 Ticks 属性

例如

```
columns.Bound(c => c.TimeSpanFieldName.Ticks) 
```

# c# - 无法使用 ReadXml 数据集方法读取 XML 文件

> ID：13512725
> 
> 赞同：0
> 
> 时间：2012-11-22T12:25:40.383
> 
> 标签：c#, asp.net, xml, dataset, filenotfoundexception

我有以下方法：

```
public static DataSet BringProducts()
{
    DataSet dataSet = new DataSet();
    var dir = @"ProductsCookieData.xml";
    if (File.Exists(dir))    //without File.Exists, same problem.
    {
        dataSet.ReadXml(dir);
    }
    return dataSet;
} 
```

该文件存在，但该方法永远看不到它。该文件位于 C:\ 中，我在其他位置尝试过，同样发生了。也尝试不使用静态。

如果我不使用`File.Exists()`， FileNotFoundException 正在抛出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:59:33.173

使用您声明文件的方式

```
var dir = @"ProductsCookieData.xml"; 
```

您的文件必须与您的代码/当前网页位于同一目录中，而不是在 C: 中。您可以授予 C:\ 权限并将您的代码更改为

```
var dir = @"C:\ProductsCookieData.xml"; 
```

有时，可以将文件复制到您的应用程序文件夹、根目录或特殊文件夹，并使用 Server.MapPath 访问

```
var dir = Server.MapPath("~/ProductsCookieData.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:58:55.537

您需要指定文件的完整路径。目前，您只提供一个相对路径，该路径将相对于当前工作目录进行解析。

如果您的文件位于 C:\ 的根目录中，则将代码更改为：

```
string dir = @"C:\ProductsCookieData.xml"; 
```

# json - 使用 Web 服务使两个系统之间的集成安全

> ID：13512736
> 
> 赞同：0
> 
> 时间：2012-11-22T12:26:02.770
> 
> 标签：json, web-services, api, security

我有两个应用程序，一个是业务流程管理 (BPM)，另一个是文档管理系统 (DMS)，两个系统都公开 Web 服务以实现与其他系统的集成。两个系统都提供主登录用户名和密码来提供 JSON API 身份验证。例如在 BPM 中启动一个流程（“process1”）；DMS 可以发送以下 API 调用

```
/jw/web/json/workflow/process/start/process1?master_username=BPMadmin&master_password=982716171717&loginAS=currentusername 
```

同样适用于调用 DMS Web 服务。

![在此处输入图像描述](../Images/ea2304568d24d2bb60bf663a449f1bc9.png)

这种安全方法的限制是我无法使用 JavaScript 调用任何 DMS 或 BPM Web 服务并使用 javaScript 使用返回的 JSON，因为如果我遵循 javaScript 方法，我将暴露 master_username 和 master_password 到最后用户，他们可以手动将 LoginAs 参数修改为其他用户名并执行他们无权执行的操作。

所以我的问题是：-

1.  我可以使用 JavaScript 使 Web 服务调用安全吗？

2.  第二个问题我可以遵循哪些其他安全方法来使用 JavaScript 使 Web 服务调用安全？请记住，我可以将 Web 服务安全性修改为其他方法，而不是使用主登录用户名和密码，但这可能需要我方面更多的时间和精力？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:38:35.590

首先，JS 是客户端，不包含任何特殊的安全/魔法/不可逆功能，如浏览器辅助加密引擎、用于密钥生成的高速率 SPRNG 等。长话短说，你用 js 做的任何事情都不安全，它可以被混淆，但它不会安全。这就是你已经提出的观点。另一种方法是将您的服务器用作“代理”。因此，假设您正在设计一个 JS 辅助 gui 并显示一些文档，然后您向您的应用服务器（不是 BPM 或 DMS）发出 AJAX 请求，它充当代理，将对 DMS 进行身份验证并调用 WS，然后将结果返回给您的 JS :) 所以您的设置看起来像 JS (session)-> App (ws auth)-> DMS -> App (sesion)-> JS（我假设您有经过身份验证的用户，我们将使用用户会话作为 JS <-> 服务器安全通道，如果不是，您将不得不合并一些其他的 js 身份验证机制，也许是一次通过或其他东西，但它会很容易，因为它是您的系统）。瞧。唯一的安全考虑是不允许任何人调用您的服务器代理站点:)

# javascript - 随机淡入匹配集合的每个元素？

> ID：13512739
> 
> 赞同：2
> 
> 时间：2012-11-22T12:26:16.783
> 
> 标签：javascript, jquery

我试图淡入每个元素，以便它们随机出现而不是 0,1,2,3 ...

我想生成一个随机数组，然后尝试像这样进行淡入淡出，但这显然行不通。谁能建议这样做的最佳方法？

我在想从一个随机数组中挑选出来是最好的，因为不能选择两次相同的索引号？

我目前的尝试：

JS

```
var testArray = [3,2,6,4,0,1,5];
var $li = $('li').hide();

$li.each(function(i){

    var $this = $(this);

    $this.eq(testArray[i]).fadeIn(i*100);    

});​ 
```

JS 小提琴：http: [//jsfiddle.net/YGC9f/2/](http://jsfiddle.net/YGC9f/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:28:48.430

这将同时淡入所有块：

```
var testArray = [3, 2, 6, 4, 0, 1, 5];
var $li = $('li').hide();

for (var i = 0; i < testArray.length; i++) {
    $li.eq(testArray[i]).fadeIn(i * 1000);
}​ 
```

**演示：http:** [//jsfiddle.net/YGC9f/3/](http://jsfiddle.net/YGC9f/3/)

* * *

这将一个一个地消失在块中：

```
var testArray = [3, 2, 6, 4, 0, 1, 5];
var $li = $('li').hide();

for (var i = 0; i < testArray.length; i++) {
    (function(i) {
        setTimeout(function() {
            $li.eq(testArray[i]).fadeIn(1000);
        }, i * 1000);
    })(i);
}​ 
```

**演示：http:** [//jsfiddle.net/YGC9f/6/](http://jsfiddle.net/YGC9f/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:35:12.387

你可以试试这个

```
var testArray = [3,2,6,4,0,1,5];
$('li').hide();
$('li').each(function(i){
    $('li').eq(testArray[i]).fadeIn(i*1000);  
}); 
```

jsFiddle在这里：http: [//jsfiddle.net/Claudius/776eV/1/](http://jsfiddle.net/Claudius/776eV/1/)

**更新**

* * *

这是一个更好的版本，它是真正随机的（使用 John Resig 数组删除方法）：

[http://jsfiddle.net/Claudius/cUge9/3/](http://jsfiddle.net/Claudius/cUge9/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:34:37.470

使用 VisioN 的答案作为起始材料，您可以像这样创建一个随机数组：http: [//jsfiddle.net/YGC9f/7/](http://jsfiddle.net/YGC9f/7/)

```
var testArray = [0,1,2,3,4,5,6];
var tmp, current, top = testArray.length;
  if(top) while(--top) {
    current = Math.floor(Math.random() * (top + 1));
    tmp = testArray [current];
    testArray [current] = testArray [top];
    testArray [top] = tmp;
  }
var $li = $('li').hide();

for (var i = 0; i < testArray.length; i++) {
    $li.eq(testArray[i]).fadeIn(i * 1000);
}​ 
```

# git - 通过 GIT 获取变更集列表

> ID：13512740
> 
> 赞同：0
> 
> 时间：2012-11-22T12:26:18.047
> 
> 标签：git

我们最近移动了新的版本控制 GIT（之前我们曾经在 TFS 2008 上工作），我们有 .net 实用程序，用于与 TFS 通信并用于提供更改集列表（输入参数是实用程序的数据时间）和导出到一个文本文件。

我想要 GIT 中的等效/类似命令，我在下面的命令中找到

**git diff --name-status `git log --reverse --since="2012-11-13" --until="1012-11-15" --format=format:%H | sed -n '1p;$p**

上面的命令将给出对存储库所做的整体更改（例如对 xyz 文件夹所做的更改），我想要的是如果 GIT 下的存储库中有子文件夹，我需要传递路径（文件夹或子文件夹）所以我将获取特定目录的变更集，而不是获取 xyz 的所有详细信息。

谢谢， 切坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:44:23.637

你想用 sed 做什么？这是你想要的吗？

*git log --name-status --since="2012-11-1" --until="2012-11-15" --format="format:%H" **wp-content*** （其中 wp-content 是子目录读书'）

# php - 带有无用条目的 CakePhp 可包含查询

> ID：13512741
> 
> 赞同：2
> 
> 时间：2012-11-22T12:26:32.853
> 
> 标签：php, cakephp, contains

我被困在使用可包含行为的 CakePhp 查询中。所以我有 - 模型订单 HABTM 产品

我想接受特定州的订单以及在特定餐厅至少有一种产品的订单。

为了让您更好地理解，这看起来像架构

```
(int) 110 => array(
    'Order' => array(
        'id' => '10',
        'customer_id' => '3',
        'state_id' => '6',
        'payment_id' => '3',
        'created' => '2012-11-10 12:23:03',
        'user_id' => '10',
        'date_delivery' => '2012-10-12 20:30:00',
        'km' => '2.76'
    ),
    'Product' => array(
        (int) 0 => array(
            'id' => '51',
            'category_id' => '2',
            'restaurant_id' => '10001',
            'title' => 'aaa',
            'description' => 'aaa',
            'price' => '8.2',
            'tva_id' => '2',
            'img' => 'aaa',
            'maj_img' => '2012-10-24 15:38:56',
            'ProductsOrder' => array(
                'id' => '57',
                'product_id' => '51',
                'order_id' => '10',
                'quantity' => '1',
                'price' => '8.2',
                'tva_id' => '2',
                'meal' => null
            )
))) 
```

（ProductsOrder 是连接表）

所以，我正在使用可包含的行为，这是我的查询：

```
$q = $this->Order->find('all', array(
        'conditions' => array(
            'Order.date_delivery BETWEEN ? AND ?' => array($dateDebut->format('Y-m-d H:i:s'), $dateFin->format('Y-m-d H:i:s')),
            'Order.state_id' => array(6, 8)),
        'order' => 'Order.date_delivery',
        'contain' => array(
            'Product' => array(
                'conditions' => array('Product.restaurant_id' => $id),
            )
        )
            )); 
```

问题是查询的结果返回了一些我不想要的条目。这是一个示例，它是结果查询的一部分，并且假设不存在。 **请注意，Product 是一个空数组。**

```
109 => array(
    'Order' => array(
        'id' => '179',
        'customer_id' => '139',
        'state_id' => '6',
        'payment_id' => '3',
        'created' => '2012-11-18 22:29:16',
        'user_id' => '10',
        'date_delivery' => '2012-10-12 20:00:00',
        'coursier_id' => '19',
        'comment' => '',
        'km' => '10.7'
    ),
    'Product' => array() 
```

如果您知道如何解决这个问题，您可以救我...谢谢

**编辑**转储 SQL

`count`从中选择计数（*）`live_resto_manager`。在`restaurants`哪里。= 10001`Restaurant``Restaurant``id`

选择`Order`。`id`, `Order`. `customer_id`, `Order`. `state_id`, `Order`. `payment_id`, `Order`. `created`, `Order`. `user_id`, `Order`. `date_delivery`, `Order`. `coursier_id`, `Order`. `comment`, `Order`. `km`从`live_resto_manager`。在`orders`哪里。在 '2012-10-01 00:00:00' 和 '2012-10-31 23:59:00' 和 之间。在 (6, 8) 中排序。ASC`Order``Order``date_delivery``Order``state_id``Order``date_delivery`

选择`Product`。`id`, `Product`. `category_id`, `Product`. `restaurant_id`, `Product`. `title`, `Product`. `description`, `Product`. `price`, `Product`. `tva_id`, `Product`. `img`, `Product`. `maj_img`, `ProductsOrder`. `id`, `ProductsOrder`. `product_id`, `ProductsOrder`. `order_id`, `ProductsOrder`. `quantity`, `ProductsOrder`. `price`, `ProductsOrder`. `tva_id`, `ProductsOrder`. `meal`从`live_resto_manager`。`products`作为`Product`加入`live_resto_manager`。`products_orders`如`ProductsOrder`开 ( `ProductsOrder`.`order_id`IN (99, 100, 102, 105, 101, 103, 104, 1, 58, 3, 106, 108, 2, 31, 107, 109, 110, 111, 59, 112, 114, 115, 117, 118, 61, 113, 33, 116, 60, 119, 120, 121, 122, 4, 62, 34, 123, 63, 124, 125, 5, 6, 126, 129, 127, 128, 130, 131, 133, 132, 134, 135, 138, 137, 139, 140, 141, 64, 136, 142, 143, 35, 36, 37, 144, 145, 146, 147, 149, 148, 150, 151, 152, 153, 7, 154, 155, 65, 156, 158, 159, 161, 8, 157, 162, 160, 163, 9, 165, 166, 66, 164, 168, 38, 167, 169, 39, 170, 171, 172, 173, 67, 174, 175, 68, 69, 176, 177, 178, 179, 10, 40, 180, 181, 182, 192, 183, 184, 186, 187, 70, 185, 189, 190, 12, 188, 191, 193, 13, 14, 41, 194, 11, 195, 15, 71, 196, 197, 200, 201, 72, 198, 199, 202, 16, 73, 203, 42, 204, 205、74、206、207、208、209、43、210、212、44、211、45、17、76、213、214、215、75、77、216、78、217、218、219、79、 220、221、222、223、80、224、46、225、81、18、229、233、226、227、228、230、231、232、234、47、236、235、237、238、239、19、242、243、244、48、49、50、240、241、245、 20, 51, 246, 247, 248, 250, 251, 253, 254, 256, 257, 258, 260, 262, 252, 255, 82, 249, 259, 261, 263, 265, 264, 266, 267, 83, 84, 269, 85, 268, 270, 271, 86, 272, 21, 87, 274, 273, 275, 90, 276, 277, 88, 89, 278, 279, 280, 281, 282, 284, 285、287、288、283、91、22、286、289、290、294、298、24、291、292、295、296、297、25、52、92、93、23、299、300、301、 302, 53, 32, 303, 304, 305, 306, 309, 307, 308, 54, 94, 293, 55, 310, 312, 311, 313, 314, 316, 315, 317, 318, 319, 95, 320, 321, 96, 56, 26, 322, 325, 323, 324, 326, 328, 329, 330, 327, 97, 27, 28, 29, 30, 98, 331, 333, 332, 334, 335, 57、336、337、338）和246、247、248、250、251、253、254、256、257、258、260、262、252、255、82、249、259、261、263、265、264、266、267、83、84、 269、85、268、270、271、86、272、21、87、274、273、275、90、276、277、88、89、278、279、280、281、282、284、285、287、 288、283、91、22、286、289、290、294、298、24、291、292、295、296、297、25、52、92、93、23、299、300、301、302、53、 32, 303, 304, 305, 306, 309, 307, 308, 54, 94, 293, 55, 310, 312, 311, 313, 314, 316, 315, 317, 318, 319, 95, 320, 321, 96, 56, 26, 322, 325, 323, 324, 326, 328, 329, 330, 327, 97, 27, 28, 29, 30, 98, 331, 333, 332, 334, 335, 57, 336, 337, 338) 和246、247、248、250、251、253、254、256、257、258、260、262、252、255、82、249、259、261、263、265、264、266、267、83、84、 269、85、268、270、271、86、272、21、87、274、273、275、90、276、277、88、89、278、279、280、281、282、284、285、287、 288、283、91、22、286、289、290、294、298、24、291、292、295、296、297、25、52、92、93、23、299、300、301、302、53、 32, 303, 304, 305, 306, 309, 307, 308, 54, 94, 293, 55, 310, 312, 311, 313, 314, 316, 315, 317, 318, 319, 95, 320, 321, 96, 56, 26, 322, 325, 323, 324, 326, 328, 329, 330, 327, 97, 27, 28, 29, 30, 98, 331, 333, 332, 334, 335, 57, 336, 337, 338) 和22、286、289、290、294、298、24、291、292、295、296、297、25、52、92、93、23、299、300、301、302、53、32、303、304、 305, 306, 309, 307, 308, 54, 94, 293, 55, 310, 312, 311, 313, 314, 316, 315, 317, 318, 319, 95, 320, 321, 96, 56, 26, 322, 325, 323, 324, 326, 328, 329, 330, 327, 97, 27, 28, 29, 30, 98, 331, 333, 332, 334, 335, 57, 336, 337, 338) 和22、286、289、290、294、298、24、291、292、295、296、297、25、52、92、93、23、299、300、301、302、53、32、303、304、 305, 306, 309, 307, 308, 54, 94, 293, 55, 310, 312, 311, 313, 314, 316, 315, 317, 318, 319, 95, 320, 321, 96, 56, 26, 322, 325, 323, 324, 326, 328, 329, 330, 327, 97, 27, 28, 29, 30, 98, 331, 333, 332, 334, 335, 57, 336, 337, 338) 和`ProductsOrder`. `product_id`= `Product`。`id`) 在哪里`Product`。`restaurant_id`= 10001

哇哦，这太丑了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:46:53.930

我将发表我的评论作为答案并详细说明。首先，空 Product 数组是 Containable 行为的预期结果。当相关数据库表没有结果时，Containable 为包含模型返回一个空数组是标准的。

找到订单是因为它的 a`state_id`为 6 并且`date_delivery`在请求的范围内。

您希望按关联的 HABTM 模型进行过滤，以便在没有附加任何产品时不返回订单。使用 Containable 时，这意味着您必须手动过滤具有空 Product 数组的订单。可包含只是“包含”返回的关联模型数据的数量，它不会根据关联模型的条件排除父模型。

您也可以忽略适用于相关模型的自动蛋糕并使用调用的`joins`参数，如[本问题](https://stackoverflow.com/questions/1751686/conditions-in-associated-models-using-model-find-cakephp)`find`的接受答案中所述。还有一个技巧，在[此线程](https://stackoverflow.com/questions/1463296/cakephp-pagination-with-habtm-models/2946029#2946029)的 anwser 部分中有详细说明。`bindModel`

还有一个 Linkable[行为](https://github.com/rafaelbandeira3/linkable)，它共享 Containable 的结构，但实际上执行连接。请注意，代码已经很久没有更新了，所以它可能无法在 CakePHP 2.* 中正常工作（有 2.0 的分支，[比如这个](https://github.com/dereuromark/linkable)，但我不能说更新后的代码库的质量如何）。

# octave - 显示结构字段而不乱

> ID：13512743
> 
> 赞同：14
> 
> 时间：2012-11-22T12:26:42.600
> 
> 标签：octave

我在 Octave 中有一个包含一些大数组的结构。

我想知道这个结构中字段的名称，而不必查看所有这些大数组。

例如，如果我有：

```
x.a=1;
x.b=rand(3);
x.c=1; 
```

了解结构的明显方法如下：

```
octave:12> x
x =

  scalar structure containing the fields:

    a =  1
    b =

       0.7195967   0.9026158   0.8946427   
       0.4647287   0.9561791   0.5932929   
       0.3013618   0.2243270   0.5308220   

    c =  1 
```

在 Matlab 中，这看起来更简洁：

```
 >> x
 x = 
    a: 1
    b: [3x3 double]
    c: 1 
```

如何在不查看所有这些大数组的情况下查看字段/字段名称？

有没有办法在 Octave 中显示简洁的概述（如 Matlab 的）？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T14:51:13.637

您可能想看看[Basic Usage & Examples](http://www.gnu.org/software/octave/doc/interpreter/Basic-Usage-and-Examples.html)。提到的几个功能听起来像是它们将控制终端中的显示。

*   `struct_levels_to_print`
*   `print_struct_array_contents`

这两个功能听起来像是在做你想做的事。我都尝试了，但无法让第二个工作。第一个函数改变了终端输出，如下所示：

```
octave:1> x.a=1;
octave:2> x.b=rand(3);
octave:3> x.c=1;
octave:4> struct_levels_to_print
ans =  2
octave:5> x
x =
{
  a =  1
  b =

     0.153420   0.587895   0.290646
     0.050167   0.381663   0.330054
     0.026161   0.036876   0.818034

  c =  1
}

octave:6> struct_levels_to_print(0)
octave:7> x
x =
{
  1x1 struct array containing the fields:

    a: 1x1 scalar
    b: 3x3 matrix
    c: 1x1 scalar
} 
```

我正在运行旧版本的 Octave。

```
octave:8> version
ans = 3.2.4 
```

如果我有机会，我会检查其他功能，`print_struct_array_contents`看看它是否符合您的要求。Octave 3.6.2[看起来是](http://www.gnu.org/software/octave/download.html)截至 11/2012 的最新版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T16:13:54.437

利用`fieldnames ()`

```
octave:33> x.a = 1;
octave:34> x.b = rand(3);
octave:35> x.c = 1;
octave:36> fieldnames (x)
ans = 
{
  [1,1] = a
  [2,1] = b
  [3,1] = c
} 
```

或者您希望它是递归的，请将以下内容添加到您的`.octaverc`文件中（您可能需要根据自己的喜好进行调整）

```
function displayfields (x, indent = "")
  if (isempty (indent))
    printf ("%s: ", inputname (1))
  endif
  if (isstruct (x))
    printf ("structure containing the fields:\n");
    indent = [indent "  "];
    nn = fieldnames (x);
    for ii = 1:numel(nn)
      if (isstruct (x.(nn{ii})))
        printf ("%s %s: ", indent, nn{ii});
        displayfields (x.(nn{ii}), indent)
      else
        printf ("%s %s\n", indent, nn{ii})
      endif
    endfor
  else
    display ("not a structure");
  endif
endfunction 
```

然后，您可以通过以下方式使用它：

```
octave> x.a=1;
octave> x.b=rand(3);
octave> x.c.stuff = {2, 3, 45};
octave> x.c.stuff2 = {"some", "other"};
octave> x.d=1;
octave> displayfields (x)
x: structure containing the fields:
   a
   b
   c: structure containing the fields:
     stuff
     stuff2
   d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T13:36:13.813

在 Octave 中，为“x86_64-pc-linux-gnu”配置了 4.0.0 版。（Ubuntu 16.04）我在命令行上这样做了：

```
print_struct_array_contents(true)
sampleFactorList    % example, my nested structure array 
```

输出：（缩短）：

```
sampleFactorList =

  scalar structure containing the fields:

    sampleFactorList =

      1x6 struct array containing the fields:

        var =
        {
          [1,1] =  1
          [1,2] =   
             2   1   3  
        }

        card =
        {
          [1,1] =  3
          [1,2] =
             3   3   3    
        } 
```

禁用/恢复旧行为

```
print_struct_array_contents(false)
sampleFactorList
sampleFactorList =

  scalar structure containing the fields:

    sampleFactorList =

      1x6 struct array containing the fields:

        var
        card
        val 
```

我也把它`print_struct_array_contents(true)`放到了`.octaverc`文件中。

# android-emulator - 如何解决 OutOfMemoryError ？

> ID：13512744
> 
> 赞同：1
> 
> 时间：2012-11-22T12:26:44.087
> 
> 标签：android-emulator

我刚刚在 Google Play 商店发布了一款名为“Bad Piggies Full Guide”的应用。今天一位用户发布了一个错误，错误说：

“ Bitmap.nativeCreate() 中的OutOfMemoryError ”

完整的堆栈跟踪是：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ashutos.cool/com.ashutos.cool.MainActivity}: android.view.InflateException: Binary XML file line #414: Error inflating class <unknown>
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2705)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2721)
at android.app.ActivityThread.access$2300(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4669)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #414: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:513)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:203)
at android.app.Activity.setContentView(Activity.java:1656)
at com.ashutos.cool.MainActivity.onCreate(MainActivity.java:19)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
... 11 more
Caused by: java.lang.reflect.InvocationTargetException
at android.widget.ImageView.<init>(ImageView.java:108)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
at android.view.LayoutInflater.createView(LayoutInflater.java:500)
... 23 more
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
at android.content.res.Resources.loadDrawable(Resources.java:1709)
at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
at android.widget.ImageView.<init>(ImageView.java:118)
... 27 more 
```

任何人都可以解决这个错误吗？

# ado.net - Oracle 的 ADO.NET 提供程序也可以连接 peoplesoft DB 吗？

> ID：13512750
> 
> 赞同：0
> 
> 时间：2012-11-22T12:27:06.873
> 
> 标签：ado.net, sync, microsoft-sync-framework, peoplesoft

有为。`ADO.NET` `provider/adapter`_ `Oracle`我也可以使用相同的连接`peoplesoft db`吗？
我想将它与`Microsoft Sync services`.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:37:34.740

如果底层的 PeopleSoft RDBMS 是 Oracle，那么你可以......但我认为更大的问题将是理解数据库模式......

# visual-studio-2010 - TFS - 在没有 VS 2010 更改源代码控制功能的情况下从外部删除项目绑定

> ID：13512754
> 
> 赞同：3
> 
> 时间：2012-11-22T12:27:22.120
> 
> 标签：visual-studio-2010, tfs

我有一个通过 GetLatest 从 TFS 获取的项目，我具有只读访问权限，因此能够获取最新代码。现在我没有该项目的结帐访问权限，因此我希望断开该项目的连接，并且可以修改一些文件。

我正在尝试通过 Visual Studio 2010 --> File --> Source Control --> Change Source Control 来做到这一点，但也存在无法访问的错误。项目文件对它们显示锁定图标，表明它们以只读模式连接到 TFS。

在使用 SVN 时，我曾经采取删除创建的 .SVN 文件夹的方法（通过搜索 .svn 文件夹并将它们全部删除）。在 TFS 中是否有任何类似的方法适用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:57:21.100

我能够通过以下方式做到这一点：

1.  删除“Visual Studio 源代码管理项目元数据文件”类型的所有文件
2.  编辑解决方案和项目文件并删除一些与 TFS 相关的内容：

    在解决方案文件中删除该部分

    ```
    GlobalSection(TeamFoundationVersionControl) = preSolution
       SccNumberOfProjects = 
       SccEnterpriseProvider = 
       SccTeamFoundationServer = 
       SccProjectUniqueName0 = 
       SccProjectName0 = 
       SccAuxPath0 = 
       SccLocalPath0 = 
       SccProvider0 = 
    EndGlobalSection 
    ```

在项目文件中，我删除了一些条目：

```
<SccProjectName></SccProjectName>
<SccLocalPath></SccLocalPath>
<SccAuxPath></SccAuxPath>
<SccProvider></SccProvider> 
```

希望它也适用于其他人。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:35:11.480

我使用这个工具来解除绑定：http: [//github.com/ralbu/UnbindTFS](http://github.com/ralbu/UnbindTFS) 它有忽略文件夹的选项，如果你有一个 git 存储库，这很有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T10:31:12.060

来自[https://stackoverflow.com/a/359145/127434](https://stackoverflow.com/a/359145/127434)

“文件 -> 源代码管理 -> 更改源代码管理，然后取消绑定和/或断开所有项目和解决方案。”

# java - 如何像 swing JTable 一样设置和获取 JavaFX Table 的单元格值

> ID：13512755
> 
> 赞同：4
> 
> 时间：2012-11-22T12:27:22.303
> 
> 标签：java, javafx-2

我是新手`JavaFX`，想知道如何设置和获取`JavaFX`Table的单元格值`Swing` `JTable`。即表中`setValueAt()`&`getValueAt`的替代方案。`Swing` `JTable``JavaFX`

```
//would like to get the index of column by Name    
int index_RunnableQueueItem = tableQueue.getColumns().indexOf("RunnableQueueItem");
//would like to get the selected row
int row = tableQueue.getSelectionModel().getSelectedIndex();
if (index_RunnableQueueItem != -1 && row != -1) {
// would like to get the value at index of row and column.

//Update that value and set back to cell. 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T18:45:53.930

**从 JavaFx TableView 单元中检索一个简单的值**

您可以使用其他帖子中列出的侦听器，但如果您只想从单元格中获取一个简单的值，您可以使用更简单的方法

```
Example:

// Get the row index where your value is stored
    int rowIndex = tableView.getSelectionModel().getSelectedIndex();

// Since you can't get the value directly from the table like the 
// getValueAt method in JTable, you need to retrieve the entire row in
// FXCollections ObservableList object
    ObservableList rowList = 
        (ObservableList) tableViewModelos.getItems().get(rowIndex);

// Now you have an ObservableList object where you can retrieve any value
// you have stored using the columnIndex you now your value is, starting
// indexes at 0;

// In my case, I want to retrieve the first value corresponding to the first column           //index, and I know it is an Integer Value so I'll cast the object.
int columnIndex = 0;
int value = Integer.parseInt(rowList.get(columnIndex).toString()); 
```

希望这个例子对你有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T20:31:03.107

TableView 确实不支持这种方法。

这是使用反射做你想做的事的一种有点脆弱的方法。不过，这完全取决于您在单元格值工厂中使用 PropertyValueFactory，因此它可以查找属性名称。

```
class MyItem
{
    SimpleStringProperty nameProperty = new SimpleStringProperty("name");
    public MyItem(String name) {
        nameProperty.set(name);
    }
    public String getName() { return nameProperty.get(); }
    public void setName(String name) { nameProperty.set(name); }
    public SimpleStringProperty getNameProperty() { return nameProperty; }
}

...

TableView<MyItem> t = new TableView<MyItem>();
TableColumn col = new TableColumn("Name Header");
col.setCellValueFactory(new PropertyValueFactory<MyItem, String>("name"));
t.getColumns().addAll(t);

...

public void setValue(int row, int col, Object val)
{
    final MyItem selectedRow = t.getItems().get(row);
    final TableColumn<MyItem,?> selectedColumn = t.getColumns().get(col);
    // Lookup the propery name for this column
    final String propertyName =   ((PropertyValueFactory)selectedColumn.getCellValueFactory()).getProperty();
    try 
    {
        // Use reflection to get the property
        final Field f = MyItem.class.getField(propertyName);
        final Object o = f.get(selectedRow);

        // Modify the value based on the type of property
        if (o instanceof SimpleStringProperty)
        {
            ((SimpleStringProperty)o).setValue(val.toString());
        }
        else if (o instanceof SimpleIntegerProperty)
        {
            ...
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

# amazon-ec2 - 与 Amazon EC2 实例的客户端通信

> ID：13512757
> 
> 赞同：1
> 
> 时间：2012-11-22T12:27:29.200
> 
> 标签：amazon-ec2

Amazon EC2 实例能否处理来自外部客户端（可能是浏览器或非浏览器应用程序）的请求并将结果返回给外部客户端？（我知道 EC2 实例需要 IP 地址，并且必须能够创建套接字并绑定到端口才能执行此操作。）

我正在考虑使用 Amazon EC2 实例，因为服务器应用程序不是用 PHP、Ruby 或任何其他常规 Web 托管服务默认支持的语言编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:44:45.827

当然会的。只需以正确的方式设置安全组以允许您的客户端连接。

查看本指南：[Amazon Elastic Compute Cloud - 安全组](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html)

另请记住：创建 EC2 实例后无法更改策略组。此功能仅适用于 VPC 实例。有关更多信息，请参阅[http://aws.amazon.com/vpc/faqs/#S2](http://aws.amazon.com/vpc/faqs/#S2)。

# tridion - Tridion 2011 SP1 CD API - 检索用关键字标记的内容

> ID：13512759
> 
> 赞同：3
> 
> 时间：2012-11-22T12:27:35.130
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在为我们想要通过基于关键字字段的 CD API 检索的内容设计模式。从 API 的角度来看，我想知道如果这个字段是 Content 字段还是 Metadata 字段是否会有所不同：

查看[API 文档](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=TaxonomyKeywordCriteria.xml&docid=concept_897F8B16081F47579A37A9EB4FDB5B4F&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDocconcept_897F8B16081F47579A37A9EB4FDB5B4F)，有一个**TaxonomyKeywordCriteria可用于查询与我可以传递给****Query**对象的特定关键字相关的所有内容。

*   这仅适用于自定义元数据中的关键字字段，对吗？

还有一个**TaxonomyRelationManager**类，它有一个**GetTaxonomyContent**方法以及**ComponentPresentationFactory**类中的**GetTaxonomyComponentPresentations**方法。

 ***   这些是否适用于内容或自定义元数据中的关键字字段？

要注意的 API 调用之间是否存在性能差异？

从编辑的角度来看，关键字字段很重要，因此我倾向于将其创建为内容字段，而不是将其“隐藏”在元数据选项卡下。

干杯

**编辑**

初始（又快又脏！）测试显示 TaxonomyRelationManager 比 ComponentPresentationFactory 快 10 倍，后者比 Query 快 1.5 倍。

但是 ComponentPresentationFactory 包含实际内容而不仅仅是 TCM ID，这在我的场景中可能更有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:23:29.377

普通内容字段不会自动发布到代理。关键字字段是个例外：关键字字段自动成为元数据，即使它位于内容选项卡上。

我看到您已经自己回答了问题的性能部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:10:51.537

据我所知，只有元数据字段会发布到代理，内容字段不会。因此，如果您需要查询关键字字段，则它需要是元数据字段。**

# linux - 使用 SOCAT 记录在端口上接收到的消息

> ID：13512760
> 
> 赞同：14
> 
> 时间：2012-11-22T12:27:36.110
> 
> 标签：linux, bash, tcp, port, socat

我有一个开放端口的服务器，每秒接收 50 到 1000 条消息。消息是指发送一行文本。

本质上，我们希望将这些消息记录在一个文件中，该文件将每小时（或 x 分钟）处理一次。

我创建了一个在后台运行的 bash 脚本（见下文），它可以工作，除非我终止 socat 进程（这样我可以将文件进行处理，它可以启动一个新文件），我们会收到一条消息的一部分，加上我确信我们在 socat 宕机的那一瞬间丢失了消息。

```
DELAY="3600"
while true
do  
    NEXT_STOP=`date +%s --date "$DELAY second"`
    (
        while [ "$(date +%s)" -lt "$NEXT_STOP" ]
        do
            killall socat
            socat -u TCP-LISTEN:6116,reuseaddr,keepalive,rcvbuf=131071,reuseaddr OPEN:/var/ais/out_v4.txt,creat,append
        done
    ) & sleep $DELAY ; killall socat

    mv /var/ais/out_v4.txt "/var/ais/_socat_received/"$(date +"%Y-%m-%d-%T")"__out_v4.txt"
done 
```

有没有办法：

1.  让 socat 在不终止进程的情况下旋转其输出文件
2.  或者我们可以在 SOCAT 写入文件的同时清除文件的内容。例如，将前 10000 行剪切到另一个文件中，所以输出文件的大小仍然可以管理？

提前谢谢了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T13:19:33.803

对于任何感兴趣的人，最终解决方案如下所示，与下面的 Nicholas 解决方案的主要区别在于我需要 grep socat 进程的 PID 而不是使用 $?：

```
#!/bin/bash
DELAY=600
SOCAT_PID=$(/bin/ps -eo pid,args | grep "socat -u TCP-LISTEN:12456" | grep -v grep | awk '{ print $1 }')

while `kill -0 $SOCAT_PID`
do  
  touch /var/ais/out.txt
  NEXT_STOP=`date +%s --date "$DELAY second"`
  while  `kill -0 $SOCAT_PID` && [ "$(date +%s)" -lt "$NEXT_STOP" ]
  do
    head -q - >> /var/ais/out.txt
  done
  mv /var/ais/out.txt "/var/ais/_socat_received/"$(date +"%Y-%m-%d-%T")"__out.txt"
done 
```

此外，在无限循环中添加启动脚本，以便当客户端断开连接时，我们重新启动 socat 并等待下一次连接尝试：

```
while true
do
socat -u TCP-LISTEN:12456,keepalive,reuseaddr,rcvbuf=131071 STDOUT | /var/ais/socat_write.sh
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T11:22:51.380

您可以使用[rotatelogs](http://httpd.apache.org/docs/current/programs/rotatelogs.html)或[multilog](http://cr.yp.to/daemontools/multilog.html)，而不是重新发明轮子，它们都可以读取 std 输入上的日志消息，并将它们写入具有非常灵活的轮换配置的日志文件。

[甚至更高一级，您描述的功能与rsyslogd](http://www.rsyslog.com/)之类的功能非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:00:47.350

没那么明显！socat 没有任何选项可以在中途更改它对连接的作用。这意味着你必须有点偷偷摸摸。使用 socat 并将输出作为 STDOUT，并通过管道传输到此脚本：

```
#!/bin/bash
rv=0
while [ $rv -lt 1 ]
do  
  NEXT_STOP=`date +%s --date "$DELAY second"`
  while [ "$(date +%s)" -lt "$NEXT_STOP" ] && [ $rv -lt 1 ]
  do
    head -q - >> /var/ais/out_v4.txt
    rv=$?
  done
  mv /var/ais/out_v4.txt "/var/ais/_socat_received/"$(date +"%Y-%m-%d-%T")"__out_v4.txt"
done 
```

完全未经测试，但看起来合理？

```
socat -u TCP-LISTEN:6116,reuseaddr,keepalive,rcvbuf=131071,reuseaddr STDOUT | ./thescript.sh 
```

# pdf - 使用 Trigger.io 应用内浏览器打开 pdf 文件？

> ID：13512761
> 
> 赞同：1
> 
> 时间：2012-11-22T12:27:36.190
> 
> 标签：pdf, trigger.io

我有一个基于 Trigger.io 构建的混合移动应用程序，默认情况下会[在应用程序内子浏览器](http://docs.trigger.io/en/latest/modules/tabs.html)（模块）中打开链接（其中一些是用户生成的内容） 。`forge.tabs`尝试打开 .pdf 文档时，屏幕将保持空白（已在 Android 和 iOS 上测试）。

这是我正在使用的代码的精简版本：

```
$(document).on('click', 'a', function() {
  window.forge.tabs.open( $(this).attr('href') );
  return false;
}); 
```

我希望要么在应用内浏览器中查看文档，要么能够将其下载到设备上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:38:05.297

Assuming your PDFs are local, you'll need to do a "getURL" first.

Here's a function that works just fine for me:

```
function showPDF (pdfName) {
    forge.tools.getURL(pdfName, function (myPDF ) { forge.tabs.open(myPDF); });
} 
```

Then just call showPDF with a relative or absolute url i.e.

```
<button class="btn" type="button" onclick="showPDF('assets/pdf/sample.pdf');"> 
```

# binary - 在 Verilog 中将数字变为负数

> ID：13512762
> 
> 赞同：1
> 
> 时间：2012-11-22T12:27:42.333
> 
> 标签：binary, verilog

当你有一个`binary number`,`A = 5'b00100`并且你得到它的否定`version`时, `B`.

```
 reg signed [4:0] A, B;
 B = -A; 
```

这是做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:49:52.427

它将创建数字的二进制补码：翻转位并加一！

*   [https://en.wikipedia.org/wiki/Two%27s_complement](https://en.wikipedia.org/wiki/Two%27s_complement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-24T19:06:37.443

in the above case if both A/B are declared as 'signed', then the simple logic of B = -A should work and i tried in a simple case and it works. Verilog already does everything in 2's complement.

# objective-c - 垂直 UIToolBar 及其 UIBarButtonItem

> ID：13512764
> 
> 赞同：1
> 
> 时间：2012-11-22T12:27:46.153
> 
> 标签：objective-c, ios, ipad, cocoa-touch, uitoolbar

在我的应用程序中，我有一个 UIToolBar。在纵向模式下，此工具栏位于顶部且水平，但当设备旋转时，此工具栏应转换为垂直工具栏并应放置在左侧。此外，它的子视图，即 5 个 UIBarButtonItems 也应相应放置。

有谁知道这个的解决方案？

我已阅读[此](https://stackoverflow.com/questions/4570940/how-can-i-make-a-vertical-uitoolbar)内容以供参考，但我的工具栏应根据方向自行对齐。我正在使用 iOS 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:02:55.627

There is no built-in vertical menu feature (yet). There are 2 parts in your question:

Vertical **UIToolbar**:

You may restrict the device orientation and the toolbar will remain at the same location

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

(this will affect all views)

Or you can listen for orientation changes and rotate your toolbar accordingly using its transform property, e.g.

```
toolbar.transform = CGAffineTransformRotate(CGAffineTransformIdentity, M_PI/2); 
```

Rotated **UIBarButtonItem**:

If you have rotated the toolbar (case 2 above), items will rotate too. If not, you need to rotate your items. Several post shows how to deal with the fact that as UIBarButtonItem does not extend UIView, it has no transform property ([see here](https://stackoverflow.com/questions/4115417/rotate-uibarbuttonitem)). In the end you will have again to listen for orientation changes and rotate the subviews of your toolbar, e.g.

```
for (UIView *view in toolbar.subviews) {
    view.transform = CGAffineTransformRotate(CGAffineTransformIdentity, M_PI/2);
} 
```

Of course apply the rotation related to your orientation (M_PI/2 or -M_PI/2).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T11:00:37.863

我遇到了同样的问题，所以我将其子类化`UIToolbar`并使其成为我想要的样子。这是 GitHub 链接：[https ://github.com/fennelouski/NKFToolbar](https://github.com/fennelouski/NKFToolbar)

# php - 根据 Javascript Result 删除 db 行

> ID：13512765
> 
> 赞同：1
> 
> 时间：2012-11-22T12:27:47.330
> 
> 标签：php, javascript

确认错误结果时如何停止`php`代码块。`JS`我的php代码是这样的；

```
<?php
function func($msg){
 echo '<script type="text/javascript">
        var r = confirm('$msg');
        if(r==false){
           return false;
        }else{
           return true; 
        }
       </script>';
}

.
.

case "update":
func("Do you want to delete?");
mysql_query("UPDATE.....");
break; 

?> 
```

当`func()`结果`false`为时，不处理`mysql_query()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:36:55.583

使用这种方法是无法做到的。 `Javascript`并且`PhP`是不同的东西。`Javascript`在客户端执行，但 php 是服务器端。您必须考虑到 Ajax 的强大功能。看看类似的东西

[如何使用 Ajax 和 jQuery 删除 MySQL 行](http://www.ehow.com/how_10043457_delete-mysql-rows-ajax-jquery.html)

[带确认的简单 JQUERY AJAX 删除](http://www.digitalbart.com/blog/simple-jquery-ajax-delete-with-confirmation/#)

# c# - 等待运算符后如何阻止调用者线程

> ID：13512766
> 
> 赞同：0
> 
> 时间：2012-11-22T12:27:51.380
> 
> 标签：c#, wpf, .net-4.5

我正在使用新的 HttpClient 类将一些数据上传到服务器，所以我不得不使用新的操作符，比如 await/async。我有以下问题：如何阻止调用者线程等到第一个文件被上传，然后移动到下一个文件。

```
 public async Task Upload(string filename)
    {
        HttpRequestMessage message = new HttpRequestMessage();

        StreamContent streamContent = new StreamContent(new FileStream(filename, FileMode.Open));
        message.Method = HttpMethod.Put;
        message.Content = streamContent;
        message.RequestUri = new Uri(webURI);

        HttpResponseMessage response = await httpClient.SendAsync(message);

        //I want to reach this point untill I will start to upload next file
        if (response.IsSuccessStatusCode)
        {
            //do something
        }

    }

    void uploadFiles()
    {
        foreach (string filename in filenames)
        {
            Upload(filename);
        }
    } 
```

感谢您对我的问题的任何关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:30:33.613

`await`在您上传下一个文件之前上传已完成：

```
async void uploadFiles()
{
    foreach (string filename in filenames)
    {
        await Upload(filename);
    }
} 
```

# ckeditor - 更改ckeditor显示块边框的颜色

> ID：13512767
> 
> 赞同：0
> 
> 时间：2012-11-22T12:27:52.363
> 
> 标签：ckeditor

网站内容区域的 ckeditor 编辑器窗口具有与网站匹配的蓝色背景，以便客户在添加内容时看到网站的真实表示。

When "show blocks" is selected the blocks border displayed is barely visible on the blue background. 那么，在哪里可以将显示块边框的颜色更改为较深的颜色呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:50:08.787

不幸的是，块显示的边框颜色不可自定义。样式化它们的 CSS 是由 JS 生成的。你可以在这里找到它[http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/showblocks/plugin.js#L28](http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/showblocks/plugin.js#L28)

我猜你正在使用 CKEditor 的编译版本，所以源代码被缩小了。您必须打开`ckeditor.js`文件并找到此片段并手动更改它。

或者您可以尝试克隆 CKEditor 4（下周二发布的新版本），在此处更改此值[https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/showblocks/plugin.js#L48](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/showblocks/plugin.js#L48)然后编译你的 CKEditor 版本（你可以在这里找到说明[https://github.com/ckeditor/ckeditor-dev](https://github.com/ckeditor/ckeditor-dev)）。但要做到这一点，您需要 Mac 或 Linux，因为构建脚本是用 Bash 编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:35:32.917

CKEDITOR.replace('textarea_id', { uiColor: '#14B8C4' });

更新 ：-

检查示例网址：[ckeditor](http://nightly.ckeditor.com/3983/samples/uicolor.html)

# php - 如何从 PDO 语句中回显结果数组

> ID：13512776
> 
> 赞同：0
> 
> 时间：2012-11-22T12:28:48.597
> 
> 标签：php, mysql, pdo

我有这个代码：

```
 $pages = $conn->prepare('SELECT * FROM pages WHERE slug = startpage');

    $pages->execute();

    $resultarray = array();

      while($row = $pages->fetch(PDO::FETCH_ASSOC)){
        $resultarray[] = $row;
      } 
```

我正在尝试这样做，因为我想在整个文档中使用该数组，而不仅仅是在一段时间内。请参见下面的示例：

```
 //Somewhere outside of the while loop    
    <h1><?php echo $resultarray['header']?></h1> 
```

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:30:23.493

```
/* instead of the 'while' loop you can use 'fetchAll' */
/* you can use 'while' if the values need to be processed */
$rows = $pages->fetchAll(PDO::FETCH_ASSOC);

/* the final variable will contain all rows */
echo $rows[0]['header']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:31:15.340

```
<h1><?php echo $resultarray[$i]['header']?></h1> 
```

这`$i`是`$resultarray`数组的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:33:06.483

不要忘记你有多维数组，所以对于第一行你可以访问值：

```
$resultarray[0]['header'] 
```

# c# - 更改字典最快的方法是什么 ?

> ID：13512777
> 
> 赞同：0
> 
> 时间：2012-11-22T12:28:53.637
> 
> 标签：c#, .net, algorithm

这是一个算法问题。

我有`Dictionary<object,Queue<object>>`。每个队列都包含一个或多个元素。我想从字典中删除只有一个元素的所有队列。最快的方法是什么？

伪代码：`foreach(item in dict) if(item.Length==1) dict.Remove(item);`

在循环中很容易做到（当然不是 foreach），但我想知道哪种方法在这里最快。

为什么我想要它：我使用该字典在大量对象中查找重复元素。字典中的键是对象的散列，值是找到具有相同散列的所有对象的队列。由于我只想要重复项，因此我需要删除关联队列中只有一个对象的所有项目。

**更新：**

重要的是要知道，在常规情况下，一大组对象中只有几个重复项。我们假设 1% 或更少。因此，保留字典原样并从 scatch 创建一个新的字典可能会更快，只使用第一个字典中的选定元素......然后完全删除第一个字典。我认为这取决于特定算法中使用的计算 Dictionary 类方法的复杂性。

我真的很想在理论上看到这个问题，因为作为一名老师，我想和学生讨论这个问题。我自己没有提供任何具体的解决方案，因为我认为这很容易做到。问题是哪种方法最好、最快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:32:37.623

```
var itemsWithOneEntry = dict.Where(x => x.Value.Count == 1)
                            .Select(x => x.Key)
                            .ToList();

foreach (var item in itemsWithOneEntry) {
    dict.Remove(item));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:50:40.013

它不是尝试优化集合的遍历，如何优化集合的内容以使其仅包含重复项？这将需要将您的收集算法更改为类似这样

```
var duplicates = new Dictionary<object,Queue<object>>;
var possibleDuplicates = new Dictionary<object,object>();
foreach(var item in original){
    if(possibleDuplicates.ContainsKey(item)){
       duplicates.Add(item, new Queue<object>{possibleDuplicates[item],item});
       possibleDuplicates.Remove(item);
    } else if(duplicates.ContainsKey(item)){
       duplicates[item].Add(item);
    } else {
       possibleDuplicates.Add(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:47:12.537

请注意，在您费心使代码变得比实际需要的更复杂之前，您可能应该在实际场景中测量这对性能的影响。大多数想象中的性能问题实际上并不是导致代码缓慢的真正原因。

但是假设您确实发现可以通过避免对长度为 1 的队列进行线性搜索来获得速度优势，那么您可以使用一种称为*indexing*的技术来解决这个问题。

除了包含所有队列的字典外，您还维护一个仅包含长度为 1 的队列的索引容器（可能是另一个字典），因此当您需要它们时，它们已经可以单独使用。

为此，您需要增强所有修改队列长度的操作，以便它们具有更新索引容器的副作用。

一种方法是定义一个类`ObservableQueue`。这将是一个瘦包装器，`Queue`除了它还有一个`ContentsChanged`在队列中的项目数量发生变化时触发的事件。`ObservableQueue`到处使用而不是普通的`Queue`.

然后，当您创建一个新队列时，为其事件登记`ContentsChanged`一个处理程序，该处理程序检查队列是否只有一个项目。基于此，您可以从索引容器中插入或删除它。

# unix - sed 中的 N 命令

> ID：13512788
> 
> 赞同：0
> 
> 时间：2012-11-22T12:29:35.777
> 
> 标签：unix, sed, aix

sed 中的“N”命令与 Cygwin 的 sed（我认为是 GNU sed）和 AIX 的 sed 的工作方式不同。

```
$cat > input
Apple
$cat input
Apple
$sed 'N' input
$cat > input
Apple
Orange
$sed 'N' input
Apple
Orange
$ 
```

如上所示，第一个`sed 'N' input`命令没有为 AIX 的 sed 打印任何内容，因为没有新的输入行。然而，Cygwin 的 sed 打印`Apple`相同。一些 unix/sed 大师可以对此有所了解吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:47:22.600

FWIW，我刚刚发现这里记录了这种行为：http: [//sed.sourceforge.net/sedfaq6.html#s6.7.5](http://sed.sourceforge.net/sedfaq6.html#s6.7.5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:45:55.403

根据 POSIX 标准（我的斜体），看起来 AIX 的行为是正确的：

> [2地址] **N**
> 
> 将下一行输入（减去其终止 < newline >）附加到模式空间，使用嵌入的 < newline > 将附加材料与原始材料分开。请注意，当前行号会发生变化。
> 
> *如果没有可用的下一行输入，则 N 命令动词应分支到脚本的末尾并退出，而无需开始新的循环或将模式空间复制到标准输出。*

这是来自[http://pubs.opengroup.org/onlinepubs/009695399/utilities/sed.html](http://pubs.opengroup.org/onlinepubs/009695399/utilities/sed.html)。

因此，您可能在 GNU sed 中发现了一个错误（或至少与 POSIX 不符）。

# windows-phone-7 - 可手动部署到 Windows Phone 的最大应用数

> ID：13512789
> 
> 赞同：2
> 
> 时间：2012-11-22T12:29:42.203
> 
> 标签：windows-phone-7

我有 Windows 开发帐户，所以我在 Windows 开发中心注册了我的 WP 设备诺基亚 Lumia 710 以测试我目前正在构建的应用程序......我有 Windows Phone sdk 7.1。有些网站可以直接下载已知应用程序的 xap 文件，这些应用程序在 Windows 手机应用商店中是免费的。由于移动 GPRS 的高速率（斯里兰卡 1 美元 300Mb，而这里的价格非常高）我决定手动下载应用程序并使用 Windows Phone sdk 中的“应用程序部署”进行部署。

我可以在我的设备上部署大约 10 个应用程序，但在那之后给我一个错误，提示“已达到此手机上的开发人员应用程序的最大数量”作为解决方案，它建议删除开发人员应用程序并重试。

这是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:39:10.883

原因是为了防止你正在做的事情。解锁手机时，您应该只部署自己开发的应用程序。在这种情况下，不太可能达到 10 个应用程序的限制。

现在，您可以争辩说部署免费应用程序不会伤害任何人，我同意（除了您没有获得自动更新）。但是，如果您可以部署免费应用程序，您也可以部署付费应用程序。所以我认为微软实施这一限制主要是为了防止盗版。

顺便说一句，如果您想避免使用移动套餐，您可以使用 Zune 直接从台式 PC 下载和安装应用程序。这样，您仍然可以使用 Marketplace，并且部署的应用程序的数量不受限制。

# c# - extjs/c# 是保存到数据库

> ID：13512790
> 
> 赞同：0
> 
> 时间：2012-11-22T12:29:43.010
> 
> 标签：c#, extjs, ext.net

我有一个简单的问题。

我有一个带有保存按钮的 FormView。单击按钮时，它会保存到数据库。

我添加了一个 EXT 消息框来确认用户是否要保存数据。当他在消息框是按钮上单击是时，它应该保存数据。

我找不到在 ext 中写“是”按钮逻辑的地方。

这是我的代码：

```
 <asp:FormView ID="myform" runat="server" DataSourceID="mydatasource" DefaultMode="Edit"  DataKeyNames="Id" >

      <EditItemTemplate>                                              
       <asp:TextBox ID="myText" runat="server" TextMode="MultiLine" ClientIDMode="Static"
        Text='<%#Bind("xx") %>' />                                                  
       <ext:Button ID="btn_Update" runat="server" AutoPostBack="false" CausesValidation="false"  CommandName="Update" Text="Speichern" StyleSpec="float: left; margin-left:10px;">                                                                               <DirectEvents>
<Click OnEvent="btnUpdateClick"></Click>
 </DirectEvents>
                                                              </ext:Button> 

    <script type="text/javascript">

    function showResult(btn) 
    {
            Ext.example.msg('Button Click', 'You clicked the {0} button', btn);
        };
        function showResultText(btn, text) 
        {
            Ext.example.msg('Button Click', 'You clicked the {0} button and entered the text "{1}".', btn, text);
        }

        var showResult = function (btn) {
            Ext.Msg.notify("Button Click", "You clicked the " + btn + " button");
        };

        var showResultText = function (btn, text) {
            Ext.Msg.notify("Button Click", "You clicked the " + btn + 'button and entered the text "' + text + '".');
        };

</script>

protected void btnUpdateClick(object sender, DirectEventArgs e)
        {
           X.Msg.Confirm("Confirm", "Are you sure you want to save?", new JFunction { Fn = "showResult" }).Show();

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:52:52.533

我猜你正在寻找这个：（可以放在 Sencha API 的任何 Demo-Box 中）

**编辑 2**

我已经完全监督您正在使用 Direct。你应该提到这样的事情。使用 DirectEvent 有什么理由吗？我无法测试它，但是这个怎么样*（包装函数可能是不必要的，但是普通的 ExtJS 处理程序将按钮引用作为第一个参数）*：

```
<form runat="server">
        <ext:ResourceManager runat="server" />

        <script runat="server">
            [DirectMethod]
            public void SetTimeStamp(string field)
            {
                // do your saving
            }
        </script>
        <ext:TextField ID="TextField" runat="server" FieldLabel="Label"/>
        <ext:Button ID="Button" runat="server" Text="Click Me" Icon="Lightning">
            <Listeners>
                <Click Handler="function() {Ext.Msg.show({title: 'Save?', msg: 'Do you want to save the data?:', buttons: Ext.Msg.YESNO,fn: function(btn){ if(btn == 'yes') {App.direct.SetTimeStamp(#{TextField}.getValue());}}})}" />
            </Listeners>
        </ext:Button>
</form> 
```

**编辑 1**只需使用**[Ext.Ajax.request()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request)**

```
Ext.Msg.show({
        title: 'Save?', 
        msg: 'Do you want to save the data?:', 
        buttons: Ext.Msg.YESNO,
        fn: function(btn, text){
              Ext.Ajax.request({
                url: 'yourUrl',
                method: 'POST',
                params: {
                    // your params
                },
                success: function() {
                    console.log('success');
                },
                failure: function() {
                    console.log('woops');
                }
            });
        }
}); 
```

*已删除表单示例*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:41:31.377

谢谢大家的支持，我通过你的答案找到了我的方法，我会把它放在这里，也许它对某人有用。

一、按钮代码，需要有Isupload="true"

```
ext:Button ID="btn_Update" runat="server" AutoPostBack="false" CausesValidation="false"
CommandName="Update" Text="Save" StyleSpec="float: left; margin-left: 10px;"
AutoScroll="False">
<DirectEvents>
<Click OnEvent="btnUpdateClick" IsUpload="true" AutoDataBind="true">
</Click>
</DirectEvents>
</ext:Button> 
```

在 aspx 的按钮事件中：

```
protected void btnUpdateClick(object sender, DirectEventArgs e)
{
        MessageBoxButtonConfig buttonYes = new MessageBoxButtonConfig();
        buttonYes.Text = "Yes";
        buttonYes.Handler = "Ext.net.DirectMethods.ClickedYES();";

        MessageBoxButtonConfig buttonNo = new MessageBoxButtonConfig();
        buttonNo.Text = "NO";
        //  buttonNo.Handler = "Ext.net.DirectMethods.ClickedNO();";

        MessageBoxButtonsConfig yesNoButtons = new MessageBoxButtonsConfig();
        yesNoButtons.Yes = buttonYes;
        yesNoButtons.No = buttonNo;

        X.Msg.Confirm("Save Changes", "Would you like to Save?", yesNoButtons).Show();
 } 
```

最后是将保存到数据库的方法：

```
[DirectMethod]
public void ClickedYES()
{
      Formview.UpdateItem(false);
      Formview.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:38:05.780

我建议不要连接对话框的“是”按钮来执行回发。您应该等待消息框关闭，然后在用户单击“是”时调用回发功能。

例如：

```
Ext.Msg.prompt('SaveChange', 'Would you like to save the changes?:', function(btn, text){
    if (btn == 'yes'){
         __doPostBack('btnSubmit','OnClick');
    }
}); 
```

将 btnSubmit 替换为您的按钮名称。

尽管上述解决方案是我推荐的方法，但您也可以通过以下方式使用 jquery：

```
$('btnSubmit').trigger('click'); 
```

来源：[http ://dev.sencha.com/playpen/docs/output/Ext.MessageBox.html](http://dev.sencha.com/playpen/docs/output/Ext.MessageBox.html)

# sql - 如何从db2中选择CLOB数据类型数据

> ID：13512796
> 
> 赞同：7
> 
> 时间：2012-11-22T12:30:22.257
> 
> 标签：sql, xml, db2

```
SELECT  CAST (ATTCH_BODY AS CLOB(30720))
INTO :WS-ATTCH-BODY
FROM NBASRDOCUM 05  WS-ATTCH-BODY  SQL TYPE IS CLOB(32K). 
```

当我尝试`clob`使用上述查询选择数据时，它会在变量中显示全零 (0)。

请推荐我如何选择`clob`数据类型。实际上，我已经从 GUI 中插入了一个 2k 大小的文本文件到该变量 ( `ATTCH_BODY`) 中。我需要使用 XML 字符串将其发送回 GUI。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-12-10T15:10:23.800

我做了类似以下的事情。

```
select cast(CLOBCOLUMN as varchar(32000)) 
  from TABLENAME where cast(TABLENAME.CLOBCOLUMN as      
   varchar(32000)) like '%AString%' for read only; 
```

# android - 3.0 操作系统中不显示菜单按钮

> ID：13512798
> 
> 赞同：0
> 
> 时间：2012-11-22T12:30:28.743
> 
> 标签：android, android-menu

我创建了具有书签和主页按钮两个功能的菜单按钮。这在所有没有 android 3.0 的 android 版本中运行良好

这里有什么办法吗？所以我的菜单按钮也将在所有版本的 android 3.0 中显示。

我的代码：-

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
        case R.id.menu_bookmark:
            db.updateContact(new Contact(itemN,imageStatus));  
              return true;
        case R.id.home_page:
            Intent i = new Intent(imageTouchs.this, Comics.class);
            startActivity(i); 
              return true;
              default:
            return super.onOptionsItemSelected(item);
        }
    }    

   @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.layout.menu, menu);
         return true;
    } 
```

和我的 androidmanifest.xml :-

```
 <uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" /> 
```

菜单.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@+id/menu_bookmark"
     android:title="Bookmark"
     android:showAsAction="ifRoom|withText"  />
<item android:id="@+id/home_page"
     android:title="Home" 
    android:showAsAction="ifRoom|withText"  />
</menu> 
```

操作栏中不显示任何菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:53:08.053

如果您在谈论图标，据我所知，使用标准[Android 支持库](http://developer.android.com/tools/extras/support-library.html)`OverFlowMenu`无法实现（**强制**） 。

如果你必须有一个`OverFlowMenu`( **forced** )，你将需要使用[ActionBarSherlock](http://actionbarsherlock.com/)库。通过我的几个答案，我有一些关于如何实现这一目标的相当详细的建议：

1.  [https://stackoverflow.com/a/13307583/450534](https://stackoverflow.com/a/13307583/450534)

2.  [https://stackoverflow.com/a/13180285/450534](https://stackoverflow.com/a/13180285/450534)

**注意：**正如我在上面链接的两个答案中已经提到的，不建议这样做以确保用户在他们的设备上获得无缝的 UI。而且，如果您必须绝对强制使用`OverFlowMenu`，您将需要使用**旧版本的 ABS**，同样不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:36:33.447

“溢出”按钮仅在设备上没有物理菜单按钮时才会显示。这是 ActionBar 的标准行为。

在配置图像时，您实际上可以将 AVD 的值设置为没有菜单按钮。

这是一个解决同样问题的 SO 问题：[未显示操作栏溢出](https://stackoverflow.com/questions/10905974/action-bar-overflow-not-displayed)

# c++ - 英特尔 Inspector XE 2012 警告 #12367 - 对传递给 vector::erase() 的迭代器参数进行切片

> ID：13512802
> 
> 赞同：1
> 
> 时间：2012-11-22T12:30:47.057
> 
> 标签：c++, intel-inspector

我收到警告`#12367 when running Build | Build Solution for Intel Static Analysis`，但我的代码看不到问题。任何人的想法？

> 警告 #12367：由于隐式类型转换，在调用“std::_Vector_iterator > > std::vector >::erase(std::_Vector_const_iterator > >)”中对作为实际参数 2 传递的对象进行切片

```
 pragma warning(suppress: 4995)
    #include <vector>

    class __declspec(dllexport) MxPluginLib //nothing special here, not derived class etc
    {
    public:
      // ...
    private:
     //  ... nothing special here

    };

    class __declspec(dllexport) MxPluginManager 
    {
    public:
       //...
    private:
    #pragma warning(suppress: 4251)
        std::vector<MxPluginLib *> _Libs;

    };

    bool MxPluginManager::DeleteNextUnselected()
    {
        bool erased = false;
        size_t cnt = _Libs.size();
        if (cnt > 0 )
        {
            for (size_t x = 0; x < cnt; x++)
            {
                if (_Libs[x]->GetSelection() == false)
                {
                    delete  _Libs[x];
                    _Libs[x] = '\0';
                    _Libs.erase(_Libs.begin()+x);  //THIS IS WHERE THE WARNING IS GENERATED
                    erased = true;
                    break;
                }
            }
        }
        return erased;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:32:13.260

这条线

```
_Libs.erase(_Libs.begin()+x); 
```

正在将 a 传递`vector::iterator`给期望 a 的函数`vector::const_iterator`。这没关系，并且需要工作（但标准并没有确切*说明*它是如何工作的，只是 a`iterator`可以转换为 a `const_iterator`）。

在您的实现中，似乎`iterator`派生自`const_iterator`并传递参数将通过“切片”派生部分将其转换为基类。

在这种情况下，这不是错误，可以忽略警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:02:02.190

在我看来，唯一奇怪的线是

```
_Libs[x] = '\0'; 
```

它可能会使分析器认为您存储的是字符而不是指针。由于您无论如何都在擦除元素，因此您并不真正需要它——删除它，看看它是否能解决您的问题。

# unit-testing - 单元测试 Angular 服务和指令

> ID：13512809
> 
> 赞同：3
> 
> 时间：2012-11-22T12:31:17.167
> 
> 标签：unit-testing, service, autocomplete, angularjs, directive

作为 Angular 的新手（说实话，JS 本身），我正在努力对服务和指令进行孤立的单元测试。我试图从互联网上找到的不同示例中编译解决方案，但失败了。

我有一个服务：

```
angular.module('myApp.services', [])
.factory('autoCmpltDataSvc', function ($http) {
    return {
        source: function (request, response) {
            $http({
                method: 'jsonp',
                url: 'http://ws.geonames.org/searchJSON?callback=JSON_CALLBACK',
                params: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                }
            }).success(function (data, status) {
                response($.map(data.geonames, function (item) {
                    return {
                        label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                        value: item.name,
                        geonameId: item.geonameId
                    }
                }));
            });
        }
    }
}); 
```

我想伪造与传递预定义数组的实际 Web 服务的交互，并检查它在传递不同的 request.term 值时是否返回正确的响应。

另一个任务是对指令进行单元测试（围绕 jquery 自动完成的包装器）

```
angular.module('myApp.directives', [])
.directive('autocomplete', function (autoCmpltDataSvc) {
      return {
          restrict: 'E',
          replace: true,
          transclude: true,
          template: '<input id="DstnSlctr" ng-model="autocomplete" type="text"/>',
          link: function (scope, element, attrs) {
              scope.$watch(autoCmpltDataSvc, function () {
                  element.autocomplete({
                      source: autoCmpltDataSvc.source,
                      select: function (event, ui) {
                          scope[attrs.selection] = ui.item.value;
                          scope[attrs.selectionid] = ui.item.geonameId;
                          scope.$apply();
                      }
                  });
              });
          }
      }
  }); 
```

我想用一些预定义的数组来伪造对服务的调用，并检查范围是否被正确修改。

是否可以单独测试那些，或者我应该只使用 e2e 测试来完成这项任务？

提前感谢您的回复！克塞尼亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:07:00.483

对于该服务，基本上您想要做的是在单元测试中使用 $httpBackend。Angular 的作用是它使用了一个 $httpBackend（在 $http 后面）。但是当你将它注入到单元测试中时，它会神奇地知道并拦截调用。

根据[文档](http://docs.angularjs.org/api/ngMock.%24httpBackend)，您需要做的是通过在 beforeEach 中提供真实的 url（以及您将在单元测试中传递的参数）来暂存您的 http 请求，并添加一个 afterEach。注意：我相信 doc 有错字

```
var $http; //  and should probably be: var $httpBackend 
```

对于指令，这取决于。如果您已经创建了整个指令，那么单元测试可能是一条更容易的道路。包装插件时，您可能会考虑几件事。首先，编写 e2e 测试可能是很好的第一步。其次，看看您自己的代码（在指令中）是否可以放入辅助方法中，并且该部分可能是可单元测试的。

# iphone - 为什么图像没有从 iphone 中的本地 XMl 文件加载

> ID：13512810
> 
> 赞同：0
> 
> 时间：2012-11-22T12:31:19.570
> 
> 标签：iphone, ios

像这样从本地 XML 文件加载图像时，

```
<?xml version="1.0" encoding="UTF-8"?>
<Books>
<book id="1">
<img>/Users/admin/imagefolder/Main_pic.png</img>
</book>
</Books> 
```

正在解析文件并从文件中解析图像。我可以在 NSLog 输出中看到

```
<UIImage: 0x71883d0> 
```

但是当我在 iphone 中以 UIImage 视图查看它时，没有显示任何图像。我已经像这样在 viewDidLoad 方法中设置了图像，

```
- (void)viewDidLoad{
        [super viewDidLoad];
        app = [[UIApplication sharedApplication]delegate];
        UIImage *image = [UIImage imageWithContentsOfFile:@"/Users/admin/imagefolder/Main_pic.png"];
       [theLists setImg:image];
   } 
```

哪里做错了？如何在iphone的UIImageView中获取图像作为输出

**编辑：**

“theLists”是我定义了 UIImage 对象的文件的对象说我有一个像这样的文件“list.h”，我在其中定义图像

```
@interface list : NSObject
@property(nonatomic,retain) UIImage *img; 
```

现在在 appdelegate.m 文件中导入“list.h”并像这样使用，

```
@property(nonatomic,retain) list *theLists; 
```

这个“thelists”用于 viewDidLoad()

**编辑-2**

我的解析代码在这里，

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"sample.xml"];
NSData *data = [[NSData alloc] initWithContentsOfFile:path];
 NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:data];
 egsParser *theParser =[[egsParser alloc] initParser];
[xmlParser setDelegate:theParser]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:01:33.130

如果您的图像存储在数组中，您应该使用如下代码：

```
UIImage *image = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@",(((list *)[yourImagesArray objectAtIndex:i]).img)]]; 
```

如果您将数据存储为`NSString`. **数组中的 i 个图像数**

或者

```
 UIImage *image = (((list *)[yourImagesArray objectAtIndex:i]).img); 
```

如果你得到它喜欢`UIImage`

# javascript - 将单引号附加到字符

> ID：13512814
> 
> 赞同：3
> 
> 时间：2012-11-22T12:31:38.630
> 
> 标签：javascript

我有一个字符串

```
var test = "1,2,3,4"; 
```

我需要将单引号 ( `' '`) 附加到此字符串的所有字符，如下所示：

```
var NewString = " '1','2','3','4' "; 
```

请给我任何建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T12:34:09.173

首先，我会将字符串拆分为一个数组，这样可以更轻松地操作为您想要的任何形式。然后，你可以用任何你想要的胶水把它重新粘在一起（在这种情况下`','`）。剩下要做的唯一事情是确保它正确地开始和结束（在这种情况下使用`'`）。

```
var test = "1,2,3,4";

var formatted = "'" + test.split(',').join("','") + "'" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T12:35:32.553

```
var newString = test.replace(/(\d)/g, "'$1'"); 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/Tmthn/)（请打开您的 JavaScript/开发人员控制台以查看输出）。

对于多位数字：

```
var newString = test.replace(/(\d+)/g, "'$1'"); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Tmthn/1/)。

参考：

*   [正则表达式（在 Mozilla 开发者网络）](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:38:59.727

一个简短而具体的解决方案：

```
"1,2,3,4".replace(/(\d+)/g, "'$1'") 
```

一个更完整的解决方案，它引用任何元素并处理分隔符周围的空间：

```
"1,2,3,4".split(/\s*,\s*/).map(function (x) { return "'" + x + "'"; }).join(",") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T12:39:37.670

更简单

```
test = test.replace(/\b/g, "'"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T12:37:05.860

使用正则表达式：

```
var NewString = test.replace(/(\d+)/g, "'$1'"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T12:39:11.530

字符串实际上就像一个数组，所以你可以这样做：

```
var test = "1,2,3,4";
var testOut = "";
for(var i; i<test.length; i++){
   testOut += "'" + test[i] + "'";
} 
```

这当然是通过附加到每个字符（包括任何逗号等）来从字面上回答您的问题。

如果您需要保留逗号，只需`test.split(',')`事先使用并在之后添加。（如果不清楚，可根据要求提供进一步解释）。

# highrise - 通过 Highrise API 从 Highrise 获取人员，其标签为：tag1 OR tag2

> ID：13512816
> 
> 赞同：1
> 
> 时间：2012-11-22T12:31:48.323
> 
> 标签：highrise

我的意思是我需要来自 Highrise 的带有标签的人的信息：tag1 或 tag2

“或”非常重要。

例如：

```
GET people.xml?tag_id=2123123 //how i get people w tag1
GET people.xml?tag_id=5656622 //how i get people w tag2 
```

但是有些人同时拥有两个标签，而我在合并到 xml 文件后不复制它们。

# php - __get 在 PHP 中的资源“不能使用 stdClass 类型的对象作为数组”

> ID：13512817
> 
> 赞同：5
> 
> 时间：2012-11-22T12:32:07.957
> 
> 标签：php, arrays, object, hash, resources

我正在尝试如何在 PHP 中存储字符串资源的配方，但我似乎无法让它工作。我有点不确定 __get 函数是如何与数组和对象相关的。

错误消息：“致命错误：无法在第 34 行的 /var/www/html/workspace/srclistv2/Resource.php 中使用 stdClass 类型的对象作为数组”

我究竟做错了什么？

```
/**
 * Stores the res file-array to be used as a partt of the resource object.
 */
class Resource
{
    var $resource;
    var $storage = array();

    public function __construct($resource)
    {
        $this->resource = $resource;
        $this->load();
    }

    private function load()
    {
        $location = $this->resource . '.php';

        if(file_exists($location))
        {
             require_once $location;
             if(isset($res))
             {
                 $this->storage = (object)$res;
                 unset($res);
             }
        }
    }

    public function __get($root)
    {
        return isset($this->storage[$root]) ? $this->storage[$root] : null;
    }
} 
```

这是名为 QueryGenerator.res.php 的资源文件：

```
$res = array(
    'query' => array(
        'print' => 'select * from source prints',
        'web'  => 'select * from source web',
    )
); 
```

这里是我试图称呼它的地方：

```
 $resource = new Resource("QueryGenerator.res");

    $query = $resource->query->print; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:39:58.167

确实，您`$storage`在类中定义为数组，但随后在`load`方法 ( `$this->storage = (object)$res;`) 中将对象分配给它。

可以使用以下语法访问类的字段：`$object->fieldName`. 所以在你的[`__get`](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)方法中你应该这样做：

```
public function __get($root)
{
    if (is_array($this->storage)) //You re-assign $storage in a condition so it may be array.
        return isset($this->storage[$root]) ? $this->storage[$root] : null;
    else
        return isset($this->storage->{$root}) ? $this->storage->{$root} : null;
} 
```

# iis-7 - 短 url 的 IIS7 URL 重写

> ID：13512819
> 
> 赞同：1
> 
> 时间：2012-11-22T12:32:10.297
> 
> 标签：iis-7, url-rewriting

我一直在研究一个小型链接长度抑制器站点，但似乎无法在 IIS7 上弄清楚。我习惯于使用 isapi rewrite 和 mod_rewrite。

以下场景处于活动状态：
假设我有 test.com，这是主域。域应该正常处理所有文件。但是当`/.*`它既不是目录也不是文件时，它应该将它发送到`redirect.asp?text=(.*)`.

这就是我的 web.config 的样子

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <rewrite>
    <rules>
        <rule name="YOURLS 1" stopProcessing="true">
            <match url="^([0-9A-Za-z-]+)$" ignoreCase="false" />
            <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            </conditions>
            <action type="Rewrite" url="redirect.asp?test={R:1}" appendQueryString="false" />
        </rule>
    </rules>
    </rewrite>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:10:06.610

看不出你的规则有什么问题，除了你可能使用`test`（带有's'）作为你的查询字符串参数，`web.config`但在你的文本中你说它应该是`text`. 一个错字，或者这可能是它不起作用的原因？

```
 <action type="Rewrite" url="redirect.asp?text={R:1}" appendQueryString="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:37:46.270

这似乎与 URL 重写器的错误版本有关。我安装了最新的 2.0 并修复了！

# python - 无法解决创建将从点列表中初始化线段的类

> ID：13512823
> 
> 赞同：1
> 
> 时间：2012-11-22T12:32:20.273
> 
> 标签：python, class, matplotlib, line, segment

我有很多麻烦。我有一个大约 6 小时后到期的 python 作业，但我无法理解它。我必须创建一个类，该类将初始化一个基于一长串点的索引创建线段的方法。所以它将由`def __init__`, `def getstartsegment`,组成`def getendsegment`。然后我必须创建一个测试器，它实际上将使用 matplotlib 和 pyplot 在图表上绘制我们已经在列表中的点。我只是被搞砸了，突然我再也看不到逻辑了。我知道最终我将不得不创建一个绘图向量方法，只是很困惑。

```
class LineSegment:

    def __init__(self, start, end):
                self.start = start
                self.end = end
    def __str__(self):
                return "["+self.start.__str__()+"],["+self.end.__str__()+"]"
    def getstartseg(self, _allPoints):
        indices = []
        idx = -1
        while True:
           try:
              idx = _allPoints.index(self, idx+1)
              indices.append(idx)
           except ValueError:
               break
        return indices

    def getendseg(self, _allPoints):
        indices = []
        idx = 0
        while True:
            try:
                idx = _allPoints.index(self, idx+1)
                indices.append(idx)
            except ValueError:
                break
        return indices 
```

这是我到目前为止所拥有的，但并没有真正回答任何问题。只是尝试任何没有结构的功能

# ios - 在 Macosx 上使用 ANT 运行 MonkeyTalk 脚本

> ID：13512825
> 
> 赞同：0
> 
> 时间：2012-11-22T12:32:26.733
> 
> 标签：ios, testing, ant, monkey

我正在尝试从命令行为我的 iOS 应用程序运行 MonkeyTalk 脚本。该脚本在 MonkeyTalkIDE 中成功运行并在模拟器上执行。

我在test.mt的同一目录中有*build.xml*和*Monkey-tal.jar**文件*

build.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="TEST3" xmlns:monkeytalk="antlib:com.gorillalogic.monkeytalk.ant">
  <target name="myScript">
    <monkeytalk:run agent="iOS" script="test.mt" />
  </target>
</project> 
```

我正在运行命令：

```
 ant -lib monkeytalk-ant.jar test.mt 
```

我收到错误消息：

```
MacBook-Pro-2948:TEST3 Developer$ ant -lib monkeytalk-ant.jar test.mt 
Buildfile: /Users/Developer/Downloads/monkeytalk 2/MonkeyTalkIDE/MonkeyTalkIDE.app/Contents/MacOS/workspace/TEST3/build.xml

BUILD FAILED
Target "test.mt" does not exist in the project "TEST3". 
```

总时间：0秒

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:00:33.610

我在启动脚本的方式中发现了错误。

```
ant -lib monkeytalk-ant.jar myScript 
```

# linux - 关于 Uboot 中的 BOOTCMD

> ID：13512829
> 
> 赞同：1
> 
> 时间：2012-11-22T12:32:38.230
> 
> 标签：linux, arm, u-boot

我的板子是S3C6410，当我阅读uboot的源代码时。有事困扰我。

`#define CONFIG_BOOTCOMMAND "nand read 0xc0008000 0x100000 0x500000;bootm 0xc0008000"`

这是什么意思 ？它从 nand 地址读取数据：0x100000，大小为：0x500000。到0xc0008000（SD-RAM），是吗？..但是SD-RAM的起始地址是：0x50000000，0xc0008000的地址如何有意义？...超出范围？谢谢。

我的 sdram 大小：256M ... nand boot ..

有一些关于它的配置。

```
#define MEMORY_BASE_ADDRESS 0x50000000
#define CONFIG_NR_DRAM_BANKS    1      /* we have 2 bank of DRAM */
#define PHYS_SDRAM_1        MEMORY_BASE_ADDRESS /* SDRAM Bank #1 */
//#define PHYS_SDRAM_1_SIZE 0x08000000 /* 64 MB */
#define PHYS_SDRAM_1_SIZE   0x10000000

#define CFG_FLASH_BASE      0x00000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:58:15.557

看起来你没看错。0xc0008000 的地址将是从 nand 读取的目标。

我建议您停止板启动以获取 U-Boot 命令提示符。然后执行 printenv，这可能会在您的目标设置中显示一些覆盖您显示的源的内容。也可以手动尝试该命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T04:52:23.297

这意味着 0x100000 地址和 0x500000 大小的 nand 应写入地址 0xc0008000。

# javascript - CKEditor "insertHtml" 适用于 FF 但不适用于 IE8

> ID：13512830
> 
> 赞同：1
> 
> 时间：2012-11-22T12:32:46.020
> 
> 标签：javascript, asp.net, firefox, internet-explorer-8, ckeditor

我想在 ckeditor 内容中附加一个新的 HTML 标记。波纹管代码对 FF 工作正常，但它没有在 IE8 中插入标签。

`setData()`对我不起作用。我认为它正在用新的 HTML 标记替换所有内容。

```
var idVal = 123; 
var attrib2Val = "some value";
var NewHtmlTag = "<CustTag id=\"c" + idVal + "\" attrib2=\"" + attrib2Val + "\"></CustTag> some extra text ";

EditorInstance.insertHtml(NewHtmlTag); 
```

我需要 IE8+ 的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:53:45.000

我猜您正在尝试使用自定义标签名称（非标准）插入元素。检查我对类似问题的回答[IE lost custom tag while sethtml](https://stackoverflow.com/questions/12967695/ie-browser-losing-ckeditor-element-sethtmluserdefinedtags-userdefinedtags/12969485#12969485)

如果不是这种情况，那么请给我们更多关于`NewHtmlTag`value 内容的细节。它是什么？

# google-bigquery - 使用 php 脚本的 Google Big Query，无法将 api 托管到网络上

> ID：13512833
> 
> 赞同：1
> 
> 时间：2012-11-22T12:32:49.167
> 
> 标签：google-bigquery, google-api-php-client

我试图实现 by`localhost`和之间的连接`bigquery api`，使用`google-api-php-client`，它工作得很好，但后来我试图将它托管到一个网站上，我收到一个致命错误说，

```
Fatal error: Class 'Google_ServiceResource' not found in /home/XXXXX/public_html/api/src/contrib/Google_BigqueryService.php on line 25

Fatal error: Class 'Google_Client' not found in /home/XXXXX/public_html/api/sample.php on line 9 
```

我无法找出问题所在`localhost`，当我`api`在我的“”文件夹中使用`localhost`它时它工作得非常好，但在网络上它给出了一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:35:42.960

此错误通常是由于 PHP 脚本路径错误造成的。尝试使用该`__DIR__`变量来提供 PHP 脚本正在运行的路径，并使用它来构建库的位置。Stack Overflow 上有*很多*关于这个的信息，这里有[一个例子](https://stackoverflow.com/a/5371875/336505)。

此外，请查看 Google API PHP 客户端库的文档，了解[如何包含](http://code.google.com/p/google-api-php-client/wiki/GettingStarted#What_to_do_with_the_files)客户端库文件。

# scala - 在scala中使用mockito返回java.util.List的模拟方法

> ID：13512840
> 
> 赞同：3
> 
> 时间：2012-11-22T12:33:22.887
> 
> 标签：scala, mockito

我想返回 java.util.List

```
 val cacheManager = mock(classOf[CacheManager])
  val cache = mock(classOf[Cache])

  when(cacheManager.getCache(anyString)).thenReturn(cache)
  when(cache.getKeys.asInstanceOf[List[String]]).thenReturn(List("some_key")) 
```

它编译，但抛出：

```
 java.lang.NullPointerException
  at net.sf.ehcache.Cache.checkStatus(Cache.java:2722)
  at net.sf.ehcache.Cache.getKeys(Cache.java:1912)
  at (last line of code) 
```

我该如何解决？我尝试了几种方法，但没有成功。

方法签名：

```
 public final java.util.List getKeys() throws java.lang.IllegalStateException, net.sf.ehcache.CacheException { /* compiled code */ } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:21:31.917

PowerMock 是 Mockito 和其他的扩展，但是可以模拟最终方法。[http://code.google.com/p/powermock/wiki/MockFinal](http://code.google.com/p/powermock/wiki/MockFinal)

此外，在引用 java.util.List 时，您可能希望使用全名，而不仅仅是 List，通常是 scala.collection.immutable.List。

# extjs - 检查extjs中的复选框后如何显示弹出表单

> ID：13512841
> 
> 赞同：0
> 
> 时间：2012-11-22T12:33:23.583
> 
> 标签：extjs

有谁知道如何创建一个简单的 ExtJS '弹出表单'，这意味着用户在网格上选中一个复选框（网格有几个复选框，每个复选框都会弹出不同的表单字段），屏幕上会出现一个弹出窗口来询问对于用户的某些输入，该信息将显示在网格上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:41:22.357

像这样

```
{
    boxLabel  : 'Anchovies',
    name      : 'topping',
    inputValue: '1',
    id        : 'checkbox1',
    listeners: {
        change: function(cb, newValue, oldValue, eOpts) {
            if(newValue === true)
                Ext.Msg.alert('Notify', newValue);
        }
    }
} 
```

# c# - 您可以在运行时使用 C# 实例化模板类吗

> ID：13512842
> 
> 赞同：5
> 
> 时间：2012-11-22T12:33:24.507
> 
> 标签：c#, templates, generics, runtime

是否可以在运行时实例化模板类，例如：

```
Type type = Type.GetType("iTry.Workflow.Person");
WorkflowPropertyViewModel<type> propViewModel = new WorkflowPropertyViewModel<type>(); 
```

这显然是行不通的。还有其他方法吗？

Generic 类如下所示：

```
public class WorkflowPropertyViewModel<T> : IProperty<T>  
{
    public Task<T> ValueAsync
    {
        get;
        set;
    }

    public T Value
    {
        get;
        set;
    }

    public IQueryable<T> PossibleItems
    {
        get;
        set;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:39:30.930

给定 Type 对象，您可以创建任何类型的对象：

```
object o = Activator.CreateInstance(type); 
```

这假定该类型具有默认构造函数。传递构造函数参数还有其他 Activator 方法：

[http://msdn.microsoft.com/en-us/library/wccyzw83.aspx](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)

为了获得特定的泛型类型，您可以在泛型类型定义上调用 MakeGenericType

[http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)

所以总而言之，它看起来像：

```
var type = Type.GetType("iTry.Workflow.Person");
var genericType = typeof(WorkflowPropertyViewModel<>).MakeGenericType(type);
var o = Activator.CreateInstance(genericType); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:42:50.237

试试这个：

```
object o = Activator.CreateInstance(typeof(WorkflowPropertyViewModel<>).MakeGenericType(new Type[] {type})); 
```

请注意，在代码中您不能轻易引用该类型，除非它实现了另一个非泛型接口 - 因此您必须使用 object 代替或使用更多反射。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T12:45:13.200

是的，您可以使用仅在运行时知道的类型来实例化泛型类，例如：

```
public class A { }
public class U<T> {
    public T X { get; set; }
}

static void Main(string[] args) {
    Type a = typeof(A);
    Type u = typeof(U<>);
    dynamic uOfA = Activator.CreateInstance(u.MakeGenericType(a));
    uOfA.X = new A();
    Console.WriteLine(uOfA.GetType());
    Console.WriteLine(uOfA.X.GetType());
} 
```

但是，此代码段使用反射和动态类型，这两者都可能导致很多维护问题，因此您最好谨慎使用它们或找到更简单的解决方案。

# sql - 在 Windows 7 中启动 db2sampl 时出现 sql1205n

> ID：13512844
> 
> 赞同：2
> 
> 时间：2012-11-22T12:33:37.967
> 
> 标签：sql, db2

我的`error`样子是这样的：

```
SQL1205N  The code page "1208" and/or territory code "0" that has been 
specified is not valid. 
```

我已经安装`db2 express c 10.1v` 并且`windows 7 32bit`正在尝试开始`db2sampl`，因为我想开始使用`db2`. 如何解决此错误？有没有类似的经历？
感谢帮助。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:47:56.210

检查您的区域设置是否正确，否则您可以在`db2cmd`

```
db2set DB2CODEPAGE=1208   
db2set DB2TERRITORY=1  
db2set DB2COUNTRY=1  
db2 terminate 
```

根据此[SQL1205N 代码页，这些应该可以解决您的问题](http://www-01.ibm.com/support/docview.wss?uid=swg21508099)

# objective-c - ProgressView 用于在 Object-C 中下载一些文件

> ID：13512846
> 
> 赞同：0
> 
> 时间：2012-11-22T12:33:40.077
> 
> 标签：objective-c, progress-bar, uiprogressview, download

我的问题是这样的：

我想显示 ProgressView 用于文件下载。由于某种原因，ProgressView 逐渐上升，显示已经下载了多少文件，当文件仍未下载时立即填满！我需要修复什么或如何实施它？

这是我的源代码：

```
- (IBAction)download:(id)sender {

    // Determile cache file path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    progressSlider.progress = 0.0;

    for (i=0;i<=7;i++) {

        //Updating progressView and progressLabel
        progressLabel.text = [NSString stringWithFormat:@"Загружено: %d из 7",i];
        progressView.progress = (float)i/(float)7;

        NSString *filePath = [NSString stringWithFormat:@"%@/avto-0-%d.html", [paths objectAtIndex:0],i];

        // Download and write to file
        NSString *mustUrl = [NSString stringWithFormat:@"http://www.mosgortrans.org/pass3/shedule.php?type=avto&%@", [listOfAvtoUrl objectAtIndex:i]];
        NSURL *url = [NSURL URLWithString:mustUrl];
        NSData *urlData = [NSData dataWithContentsOfURL:url];

        [urlData writeToFile:filePath atomically:YES];
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:47:32.037

我认为它与线程以及主线程如何刷新视图有关。

可能出现两种情况：

调用此方法时您在主线程上

在这种情况下，您不允许主线程执行刷新例程。使用 GCD 将所有这些下载移动到后台队列，并按照 pt.2 中的说明回调主线程。

要将所有内容放在后台队列中，您可以调用：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^ {
        // your download code goes here

    }); 
```

或者，您已经在后台线程上，然后使用以下行回调主线程：

```
dispatch_async(dispatch_get_main_queue(), ^ {
            progressView.progress = (float)i/(float)7;
        }); 
```

最终答案：

```
- (IBAction)download:(id)sender {

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^ {
    // Determile cache file path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    progressSlider.progress = 0.0;

    for (i=0;i<=7;i++) {

        //Updating progressView and progressLabel
        progressLabel.text = [NSString stringWithFormat:@"Загружено: %d из 7",i];
dispatch_async(dispatch_get_main_queue(), ^ {
        progressView.progress = (float)i/(float)7;
});

        NSString *filePath = [NSString stringWithFormat:@"%@/avto-0-%d.html", [paths objectAtIndex:0],i];

        // Download and write to file
        NSString *mustUrl = [NSString stringWithFormat:@"http://www.mosgortrans.org/pass3/shedule.php?type=avto&%@", [listOfAvtoUrl objectAtIndex:i]];
        NSURL *url = [NSURL URLWithString:mustUrl];
        NSData *urlData = [NSData dataWithContentsOfURL:url];

        [urlData writeToFile:filePath atomically:YES];
    }
});
 } 
```

# android - 如何可靠地从 AttributeSet 中获取颜色？

> ID：13512850
> 
> 赞同：9
> 
> 时间：2012-11-22T12:33:59.827
> 
> 标签：android, xml, parsing, colors

我想创建一个自定义类，当在 Android XML 文件中布局时，该类将颜色作为其属性之一。但是，颜色可以是一种资源，也可以是许多直接颜色规范之一（例如十六进制值）。是否有用于`AttributeSet`检索颜色的简单首选方法，因为表示颜色的整数可以引用资源值或 ARGB 值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-22T12:58:52.410

假设您已经像这样定义了自定义颜色属性：

```
<declare-styleable name="color_view">
    <attr name="my_color" format="color" />
</declare-styleable> 
```

然后在视图的构造函数中，您可以像这样检索颜色：

```
public ColorView(Context context, AttributeSet attrs) {
   super(context, attrs);

   TypedArray a = context.obtainStyledAttributes(attrs,R.styleable.color_view);
   try {
       int color = a.getColor(R.styleable.color_view_my_color, 0);
       setBackgroundColor(color);
   } finally {
       a.recycle();
   }
} 
```

您实际上不必担心如何填充颜色属性，就像这样

```
<com.test.ColorView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:my_color="#F00"
    /> 
```

或像这样：

```
<com.test.ColorView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:my_color="@color/red"
    /> 
```

在任何情况下，该`getColor`方法都会返回一个颜色值。

# c++ - WinHttpGetDefaultProxyConfiguration 返回错误的代理信息

> ID：13512852
> 
> 赞同：1
> 
> 时间：2012-11-22T12:34:06.343
> 
> 标签：c++, windows, winapi

我想检索默认代理设置。为此，我使用下一个代码：

```
WINHTTP_PROXY_INFO ProxyInfo;
ZeroMemory( &ProxyInfo, sizeof(ProxyInfo) );

BOOL result = WinHttpGetDefaultProxyConfiguration(&ProxyInfo);

if (result)
{
    //...
} 
```

该函数返回 TRUE，但在 ProxyInfo 中我有：`WINHTTP_ACCESS_TYPE_NO_PROXY`并且`lpszProxy == NULL`无论我通过 ProxyCfg.exe->Connections->LAN Settings->Proxy Server 设置什么设置。你知道我在这里做错了什么吗？

我在 Win7 64 位机器上测试了这段代码，但我需要它在所有 WinXP+ 版本中工作。

我检查了 libproxy 项目，并从注册表中检索了代理设置。这种方法可靠吗？所有 Windows 版本中代理配置的注册表路径是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:07:32.480

我试过 Chrome 中使用的方法，效果很好。它还应该在多个 Windows 版本中进行测试。

```
WINHTTP_CURRENT_USER_IE_PROXY_CONFIG ProxyInfo;
BOOL result = WinHttpGetIEProxyConfigForCurrentUser(&ProxyInfo); 
```

# ios - 如何在一个文件中保存和检索多个 NSDictionaries

> ID：13512856
> 
> 赞同：0
> 
> 时间：2012-11-22T12:34:22.387
> 
> 标签：ios, nsdictionary, nsfilemanager

我想将我的数据存储在多个字典中的文档目录中。

有没有办法在单个文件中分别存储和检索它们，并且是否可以更新文件的一部分？

目前，我将它们整体保存在一个数组下并进行整体检索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:40:55.387

> **有没有办法在一个文件中分别存储和检索它们**

当然。创建`NSDictionary`实例字典并将其写入文件。

> **是否可以更新部分文件？**

如果您致力于以这种方式持久化您的对象模型，那么您将不得不读入您的数据集。修改它，然后将其写回磁盘。这可能是可取的，也可能不是，这取决于您的数据集有多大以及其他因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:48:24.240

要将您的字典作为单个文件中的单个实体存储和检索，您需要重新发明一些通常内置于数据库中的概念。如果这确实是一个要求，请查看将您的字典保存到 sqlite 中的表行或将它们转换为自定义对象并使用 Core Data。

# php - 嵌套 if 中的语法错误

> ID：13512864
> 
> 赞同：1
> 
> 时间：2012-11-22T12:34:58.623
> 
> 标签：php

我确定我的代码中有一个简单的语法错误，但我找不到它。这部分代码的工作方式是系统检查用户ID 是否存在，是否存在，或者如果该字段为空，则会产生错误。如果没问题，它会转到下一个字段 userName 并执行相同的检查。他们都报告了相应的值是否以前被使用过，但他们都没有报告该字段是否为空。

```
if($userID != ""){
    $sql = "SELECT * FROM tbl_access WHERE userID = '$userID'";
    $result = mysql_query($sql) or die(mysql_error());
    $num_rows = mysql_num_rows($result);
        if($num_rows == 0){
            $error = "User ID not found, please enter your user ID";
        }
}
else if($userID == ""){
    $error = "Please enter your User ID";
}
else if($username != ""){
    $sql = "SELECT * FROM tbl_access WHERE userName = '$username'";
    $result = mysql_query($sql) or die(mysql_error());
        if(!empty($result)){
            $error = "Username already in use, please select a different username";
        }
}
else if($username == ""){
    $error = "Please enter a username";
} 
```

该脚本在检查用户 ID 部分时工作正常，但它完全忽略了用户名部分。我确信这一定是我的一个简单的语法错误，但我已经盯着同一部分代码好几个小时了，所以任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:38:28.470

在编写嵌套 if-else 语句以在多个备选方案之间进行选择时，请使用一些一致的布局，例如：

```
if ( condition1 )
statement1 ;
else if ( condition2 )
statement2 ;
. . .
else if ( condition-n )
statement-n ;
else 
```

## 声明-e;

```
if($userID != ""){
        statements
       if($num_rows == 0){
            $error = "User ID not found, please enter your user ID";
        }
}
else($userID == ""){
    $error = "Please enter your User ID";
}
 if($username != ""){
           statements
           if(!empty($result)){
            $error = "Username already in use, please select a different username";
        }
}
else($username == ""){
    $error = "Please enter a username";
} 
```

试试这个 ........

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:55:07.777

您试图在一个 if 语句中做太多事情。请记住，如果您陷入 if 或 else if 语句中的任何一个，那么整个 if 语句就结束了。您应该将其分解为较小的语句以实现您的期望。

```
if($userID != "")
{
    $sql = "SELECT * FROM tbl_access WHERE userID = '$userID'";
    $result = mysql_query($sql) or die(mysql_error());
    $num_rows = mysql_num_rows($result);

    if($num_rows == 0)
    {
        $error = "User ID not found, please enter your user ID";
    }
}
else
{
    $error = "Please enter your User ID";
}

if($username != "")
{
    $sql = "SELECT * FROM tbl_access WHERE userName = '$username'";
    $result = mysql_query($sql) or die(mysql_error());

    if(!empty($result))
    {
        $error = "Username already in use, please select a different username";
    }
}
else
{
   $error = "Please enter a username";
} 
```

如果你做类似上述陈述的事情，那么你应该没问题。这将验证这两个变量，并在需要时单独对其中任何一个执行操作。您可以通过执行以下操作进一步缩短此时间：

```
If(is_null($userID) || is_null($username))
{
    //output your error message here
} else
{
    //you know that both are populated, run your queries now
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:39:11.117

删除第三个 if 之前的 else：

```
if($userID != ""){
    $sql = "SELECT * FROM tbl_access WHERE userID = '$userID'";
    $result = mysql_query($sql) or die(mysql_error());
    $num_rows = mysql_num_rows($result);
        if($num_rows == 0){
            $error = "User ID not found, please enter your user ID";
        }
}
else if($userID == ""){
    $error = "Please enter your User ID";
}
if($username != ""){
    $sql = "SELECT * FROM tbl_access WHERE userName = '$username'";
    $result = mysql_query($sql) or die(mysql_error());
        if(!empty($result)){
            $error = "Username already in use, please select a different username";
        }
}
else if($username == ""){
    $error = "Please enter a username";
} 
```

# php - OpenCart 在控制器外部加载模型

> ID：13512865
> 
> 赞同：16
> 
> 时间：2012-11-22T12:34:58.653
> 
> 标签：php, opencart

我正在开发一个需要大量定制的 OpenCart 项目。对于我的项目，我必须更改购物车库（system/library/cart.php）中的某些内容。

我将不得不调用在产品模型 (catalog/model/catalog/product.php) 中定义的自定义函数。

在控制器中，加载模型并使用其功能很容易：

```
 $this->load->model("catalog/product");
    $this->model_catalog_product->customFunction(); 
```

但是如何在控制器之外加载模型呢？您不能创建模型的新实例，我已经尝试过：

```
 require_once("catalog/model/catalog/product.php");
    $a_model = new ModelCatalogProduct(); 
```

这显然不起作用，因为模型不打算以这种方式使用。

我还尝试使用范围解析运算符（ModelCatalogProduct::customFunction()）它也不起作用。

我可以将所有必需的信息作为参数传递，但我宁愿在购物车库类中使用模型，因为更改将是全局的。

甚至可以在 OpenCart 的控制器之外加载模型吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-22T13:03:44.480

如果它只是您需要复制的一种方法，则最好将方法添加到`Cart`类本身。该类`Cart`将使用`$this->db->query()`已`$db`分配给它的调用，即使它不是控制器/模型

# 编辑

如果您希望这样做，您可以执行类似于以下的操作

```
public function test() {
    global $loader, $registry;
    $loader->model('catalog/product');
    $model = $registry->get('model_catalog_product');
    $result = $model->getProduct(123);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T16:22:42.767

您可以在受控之外加载模型。

如果您需要在另一个模型中加载模型，您可以使用相同的方式加载它`$this->load->model('my_module/my_model');`。

如果您需要在模板文件或其他自定义 PHP 脚本中加载模型，请查看实例化的`index.php`文件`Registry`- 您需要以相同的方式实例化它。所以您的自定义代码可能如下所示：

```
$registry = new Registry();
$my_model = $registry->load->model('my_module/my_model');
$my_model->customFunction(); 
```

无论如何，我强烈建议不要编辑/更改核心库文件，除非您确定没有其他方法可以实现/执行您需要的操作。

正如**Jay Gilford**提议的那样，我将实现该功能或它对 的调用`catalog/checkout/cart.php`，可能`confirm`或`success`取决于您想要实现的范围和功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:29:34.573

在 OpenCart 中，模型层的部分依赖于库。一个例子是需要当前客户（前端）或当前用户（后端）的 ID。

为了保持结构清晰整洁并减少代码重复，您不应该在另一个方向上引入依赖关系。如果一个模型依赖于类用户，而类用户又依赖于模型，那么就形成了一个恶性循环。

我建议将函数移动到库层并在模型层中删除它们的实现。为了尽量减少影响，您可以将函数调用包装在模型中。

**图书馆/我的班级**

```
function getValue($id){ 
 $sql = "select ..."; 
 $query = $this->db->query($sql); 
 return $query->rows;
} 
```

**管理员/模型/目录/myModel**

```
function getValue($id){
 return $this->myClass->getValue();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-03T06:47:22.537

在函数 add() 中的文件“cart.php”中调用函数“getProduct”以这种方式使用：

```
$this->load->model('catalog/product');
$product_info = $this->model_catalog_product->getProduct($product_id); 
```

因此，在任何其他部分使用相同的方式，例如函数 index() 中的文件是可能的并且可以工作。

例如，如果输入的数量超过库存，则会发出警告。使用上述访问数量。

# php - 在另一个 $variable 中使用 $variable？

> ID：13512867
> 
> 赞同：1
> 
> 时间：2012-11-22T12:35:01.980
> 
> 标签：php, mysql

我试图弄清楚如何做到这一点：

```
$var_name = 'name';

$results = mysql_query ("SELECT * FROM users WHERE id = 1") or die (mysql_error ());
$row = mysql_fetch_assoc ($results);

$username = $row[$$var_name]; 
```

如何在这个 mysql 结果中使用 $ 变量？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:11:36.490

我认为你可以使用类似的东西

```
${$var_name} 
```

但这不是最好的方法......如果 $var_name 来自请求，您可能会产生严重的泄漏！

在您的示例中，它应该是：

```
$var_name = 'name';
$username = $row[${$var_name}];  // same as : $username = $row[$name]; 
```

再一次：不推荐！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:05:42.130

我从中得到的是，您正在尝试将查询结果分配给一个变量以供以后使用？类似用户名、密码、地址、城市、州、邮编等。为此，您需要执行以下操作。

```
$sql = SELECT * FROM users WHERE id = 1
$result = mysql_query($sql) or die(mysql_error())

//now assign the variables
for($row = 0; $row = mysql_fetch_array($result, MYSQLI_ASSOC); $row++)
{
    //assign variables
    $username = $row['username'];
    $password = $row['password'];
    $city = $row['city'];
    $state = $row['state'];
    $zip = $row['zip'];

    //etc...
} 
```

请记住，这是一个循环，因此如果您最终从查询中得到两个结果，那么每个循环的变量都会有所不同。这种类型的设置适用于显示多行数据。您可以使用其他方法来设置需要使用的变量。

# asp.net - 我需要一个标签控件

> ID：13512870
> 
> 赞同：0
> 
> 时间：2012-11-22T12:35:05.487
> 
> 标签：asp.net, user-controls

阅读此问题的每个人都必须了解 stackoverflow 如何让您为问题添加标签。

我正在构建一个应用程序，它允许用户从多项选择中选择多个选项，如下所示

```
<select multiple="multiple">
about 200 options are present here
</select> 
```

很难将该列表用于大约 200 个选项，因为垂直滚动的空间只有大约 100 像素。

有谁知道像堆栈溢出标签这样的现成控件。

注意：用户不能添加自己的选项。

* * *

**如果无法控制，那么欢迎任何关于我应该如何以用户友好的方式向用户显示 200 个选项的建议。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:42:14.583

我认为您可以使用任何自动完成控件（[来自 Ajax Control Toolkit](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)的控件）并手动验证用户的输入以仅允许输入现有选项。工具包中的控件提供了许多 UI 自定义选项，您可以设置任何完成列表标记。

# ruby-on-rails - Nanoc 在 github 中部署页面时更改基本路径

> ID：13512871
> 
> 赞同：2
> 
> 时间：2012-11-22T12:35:11.070
> 
> 标签：ruby-on-rails, ruby, github, nanoc, github-pages

我有一个使用 nanoc 构建的简单静态页面应用程序，我想将其部署为 github 页面。

除了资产（如 css、javascripts）和所有链接通常都指向 repo 的根目录外，一切都很顺利：

喜欢

> /css/style.css

而不是成为

> /docs/css/style.css

一切在本地主机上运行良好，但在发布时失败。

我正在使用 rake publish 将其推送到 gh-pages。

这是我的 Rakefile

```
require 'nanoc3/tasks'

BASE_URL = "http://darko1002001.github.com/docs/"

desc "Compile the site"
task :compile do
  `nanoc compile`
end

desc "Publish to http://documentation.getchute.com"
task :publish => [:clean] do
  FileUtils.rm_r('output') if File.exist?('output')

  sh "nanoc compile"

  ENV['GIT_DIR'] = File.expand_path(`git rev-parse --git-dir`.chomp)
  old_sha = `git rev-parse refs/remotes/origin/gh-pages`.chomp
  Dir.chdir('output') do
    ENV['GIT_INDEX_FILE'] = gif = '/tmp/dev.gh.i'
    ENV['GIT_WORK_TREE'] = Dir.pwd
    File.unlink(gif) if File.file?(gif)
    `git add -A`
    tsha = `git write-tree`.strip
    puts "Created tree   #{tsha}"
    if old_sha.size == 40
      csha = `echo 'boom' | git commit-tree #{tsha} -p #{old_sha}`.strip
    else
      csha = `echo 'boom' | git commit-tree #{tsha}`.strip
    end
    puts "Created commit #{csha}"
    puts `git show #{csha} --stat`
    puts "Updating gh-pages from #{old_sha}"
    `git update-ref refs/heads/gh-pages #{csha}`
    `git push origin gh-pages`
  end
end 
```

规则

```
compile '/static/*' do
end

compile '/CNAME/' do
end

compile '/feed/' do
  filter :erb
  filter :kramdown, :toc_levels => [2]
end

%w(v3 */).each do |version|
  compile "/changes/#{version}" do
    filter :erb
    filter :kramdown, :toc_levels => [2]
    filter :colorize_syntax,
      :colorizers => {:javascript => :pygmentsrb}
    layout 'changes' if version[0] == '*'
    layout 'default'
  end
end

compile '*' do
  filter :erb
  filter :kramdown, :toc_levels => [2]
  filter :colorize_syntax,
    :colorizers => {:javascript => :pygmentsrb}
  layout 'default'
end

route '/static/*' do
  item.identifier[7..-2]
end

route '/CNAME/' do
  '/CNAME'
end

route '/feed' do
  '/changes.atom'
end

route '*' do
  item.identifier + 'index.html'
end

layout '*', :erb 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T13:35:13.530

nanoc 默认生成绝对 URL，但您可以使用`relativize_paths`过滤器使所有 URL 相对。对于 HTML，使用`filter :relativize_paths, :type => :html`. 对于 CSS，使用`:css`而不是`:html`.

干杯

丹尼斯

# wordpress - Wordpress 元框使用自定义帖子类型填充复选框组

> ID：13512875
> 
> 赞同：0
> 
> 时间：2012-11-22T12:35:14.850
> 
> 标签：wordpress, custom-post-type, meta-boxes

我正在创建一个带有复选框组的元框，并且我想用自定义帖子类型填充复选框。

我正在使用本文中的代码：[Reusable Custom Meta Boxes Part 2](http://wp.tutsplus.com/tutorials/reusable-custom-meta-boxes-part-2-advanced-fields/)

现在对于复选框组，我将值硬编码：

```
 array (  
    'label' => 'Sponsors',  
    'desc'  => 'Sponsors for this exercise.',  
    'id'    => $prefix.'sponsors',  
    'type'  => 'checkbox_group',  
    'options' => array (  
        'one' => array (  
            'label' => 'Option One',  
            'value' => 'one'  
        ),  
        'two' => array (  
            'label' => 'Option Two',  
            'value' => 'two'  
        ),  
        'three' => array (  
            'label' => 'Option Three',  
            'value' => 'three'  
        ),  
        'four' => array (  
            'label' => 'Option Four',  
            'value' => 'four'  
        )  
    )  
) 
```

此代码保存数据：

```
case 'checkbox_group':  
foreach ($field['options'] as $option) {  
    echo '<input type="checkbox" value="'.$option['value'].'" name="'.$field['id'].'[]" id="'.$option['value'].'"',$meta && in_array($option['value'], $meta) ? ' checked="checked"' : '',' /> 
            <label for="'.$option['value'].'">'.$option['label'].'</label><br />';  
} 
```

休息;

我想使用自定义帖子类型来加载复选框：

```
function get_sponsors()
{
    $args = array(
    'numberposts' = -1,
    'post_type' = 'px_sponsor',
    'orderby' = 'post_title',
    'order' = 'ASC'
    );

    $my_sponsors = get_posts( $args );

    return $my_sponsors;
} 
```

如何修改它以显示我的自定义帖子类型值而不是硬编码的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:28:48.560

解决了！

我更改了函数 get_sponsors() 以返回一个包含帖子的数组：

```
function get_sponsors()
{
    $args = array(
    'numberposts' => -1,
    'post_type' => 'movies'
    );

    $my_movies = get_posts($args);

    $options = array();
    foreach($my_movies as $m)
        $options[$m->ID] = array(
            'label' => $m->post_title,
            'value' => $m->ID
        );

    return $options;
} 
```

Mridul Aggarwal 在此[帖子中回复的解决方案的学分](https://wordpress.stackexchange.com/questions/73612/populate-array-with-posts/)

# php - 使用 XPath 获取节点名称

> ID：13512876
> 
> 赞同：2
> 
> 时间：2012-11-22T12:35:18.500
> 
> 标签：php, xml, xpath, simplexml

我有这个 XML 并希望在节点“ObjectDetails”中获取第二个元素的名称。名字叫“库普”

```
$xml = '
    <ObjectenLijst TimeStamp="17-07-2012 09:14:46" Versie="12">
        <Object>
            <ObjectDetails>
                <Adres>Niebergweg 1</Adres>
                <Koop>
                    <Prijsvoorvoegsel>vraagprijs</Prijsvoorvoegsel>
                    <Koopprijs>31000</Koopprijs>
                    <KoopConditie>kosten koper</KoopConditie>
                </Koop>
            </ObjectDetails>
        </Object>
    <ObjectenLijst>' ; 
```

当我使用这个 XPath 时，会返回一个空数组：

```
$xml = simplexml_load_string($xml);
$result =  $xml->xpath('name(//Object/ObjectDetails/*[2])'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:40:34.470

据我所知，[`SimpleXMLElement::xpath`](http://www.php.net/manual/simplexmlelement.xpath.php)只能返回一个`SimpleXMLElement`节点数组，所以你试图做的事情是无效的。但是，您可以通过以下方式获取节点的名称：

```
$result =  $xml->xpath('/ObjectenLijst/Object/ObjectDetails/*[2]');
$name = $result[0]->getName(); // Koop 
```

# php - 自定义 wordpress 以构建 CMS

> ID：13512880
> 
> 赞同：0
> 
> 时间：2012-11-22T12:35:23.790
> 
> 标签：php, wordpress, zend-framework, cakephp, content-management-system

我正在构建一个 CMS，用户可以在其中控制他想要使用的所有组件，而不使用任何模板。他将拥有一个仪表板和一个控制面板，其中包括菜单、画廊、文本框等组件.他将有一个易于使用的拖放 UI 在他的网站上工作。
现在我正在研究使用像**Cake/Zend**这样的框架或自定义 wordpress 来实现目标。
想请**高手指点一下，哪个比较可行**？定制wordpress，这是一种基于主题的简单方法（**简单我的意思是可以在相当长的时间内实现**）还是使用框架从头开始构建它？
如果我想到 wordpress 它使用结构化模板，这使我们可以轻松更改主题。现在我想绕过这个并允许用户只使用拖放方法来构建网站。主题不会出现在我们的图片中场景，所以我可以消除它们吗？
**但我不确定 wordpress 是否允许这样做，因为它完全基于结构化主题/模板**。
（这个想法很原始，如果听起来很奇怪，请饶了我。工作正在进行中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:28:36.983

从头开始构建了大量的 WordPress 网站和几个完全定制的内容管理系统，我可以说我们总是倾向于低估构建自己的 CMS 所需的时间。

它非常激烈，特别是如果您对安全性、跨浏览器兼容性和用户体验非常重视。

话虽这么说，WordPress 很棒，但是如果您要认真改变它存在的目的，听起来像您，完全在 WordPress 之外构建管理模块，那么我不确定 WP 将如何实际提供帮助.

尽管有关您要完成的工作的更多详细信息会很好，但我个人会推荐 ExpressionEngine。它不是免费的，这是有原因的。它既流畅又强大，而且听起来比 WordPress 更符合您想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:53:05.190

你考虑过使用 Joomla 吗？可能比 Wordpress 更好。

[http://www.joomla.org/](http://www.joomla.org/)

不过老实说，我认为你的想法有点缺陷。您想构建一个易于使用的 CMS，用户可以将组件拖放到页面上以创建他们的网站，是吗？但是没有人会想要建立一个没有主题、没有样式的网站。所以现在你又回到了模板/主题的想法。

否则，您也要求用户成为设计师，他们会为他们的网站设计样式。但是除非我遗漏了什么，否则重点是他们可以在没有网络开发知识的情况下做到这一点（否则，如果他们已经知道如何设计网站，为什么还要使用您的 CMS？）。

即使您确实让他们通过易于使用的 UI（颜色选择器等）为网站设计主题，我保证如果您为您的 CMS 建立了关注者，每个人都会想要主题支持，因为当其他人拥有创建了好看的主题，为什么不允许他们分享？有些人不会设计，并且更愿意使用他们从别人那里找到的一个不错的设计。Wordpress 拥有一个非常受欢迎的模板社区是有原因的，这也是普通非开发人员喜欢使用它们制作网站的主要原因之一。

如果您真的在谈论零模板支持，那么我假设您的所有组件都被设置为您的 CMS 提供的某种默认值。人们很快就会抱怨无法改变他们网站的外观。

无论如何，回到关于从哪里开始构建 CMS 的问题，您可以尝试为 CakePHP 构建 CMS。我相信以前曾尝试过，但我所知道的还没有一个好的或完成的。这可能是有原因的。

我认为您会尝试重新发明轮子，并且我怀疑您的 CMS 甚至会接近 Joomla 甚至是 Wordpress，因为它们已经开发了很长时间，并且得到了来自世界各地如此多的人的贡献，以及数以百万计的社区。

从头开始开发 CMS 是一项艰巨的任务，在制作对任何人都易于访问和用户友好的产品方面，可能有成千上万的事情您没有正确考虑。跨平台、安全性、丰富功能、高可定制性等很多大问题。更不用说你要求绕过的东西，比如模板（我不知道这是否包括开发组件/模块）。

考虑到所有因素，我认为您最好还是使用 Joomla 并尝试开发拖放编辑器之类的东西。不过，我认为在 Wordpress 中会稍微容易一些，因为它是一个更简单的系统。

祝你好运。

# java - 如何在 WSS4J Spring Security 中使用加密密码

> ID：13512883
> 
> 赞同：2
> 
> 时间：2012-11-22T12:35:33.083
> 
> 标签：java, encryption, spring-ws

我通过 WSS4JSecurityInterceptor 使用 Spring WS Security。但是，在验证签名时，我需要读取密钥库密码。

密钥库密码将被加密。在验证签名之前，您能告诉我如何解密它吗？

我的配置如下：

```
<bean id="wsSecurityInterceptor" class="org.springframework.ws.soap.security.wss4j.Wss4jSecurityInterceptor">
    <property name="validationActions" value="Signature"/>
    <property name="validationSignatureCrypto">
        <bean class="org.springframework.ws.soap.security.wss4j.support.CryptoFactoryBean">
            <property name="keyStorePassword" value="123456"/>
            <property name="keyStoreLocation" value="classpath:/keystore.jks"/>
        </bean>
    </property>
</bean> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:51:54.197

使用 Spring 进行签名 - Ws WSS4JSecurityInterceptor

生成的 Keytool 使用：

```
keytool -genkey -alias signFiles -keypass kpi135 -keystore akulastore.jks -storepass ab987c 
```

为 Keytool 生成证书：

```
keytool -certreq -alias signFiles -keystore akulastore.jks -file cert.csr 
```

将 Keytool、证书放在客户端。

将 Keytool 放在服务器端

并将配置设置为：

```
Server Side Interceptor

<bean id="wsDigCerSecurityInterceptor" 
   class="org.springframework.ws.soap.security.wss4j.Wss4jSecurityInterceptor">
<property name="validationActions" value="Signature"/>
<property name="validationSignatureCrypto">
<bean
   class="org.springframework.ws.soap.security.wss4j.support.CryptoFactoryBean">
<property name="keyStorePassword" value="ab987c"/>
<property name="keyStoreLocation" value="classpath:/akulastore.jks"/>
</bean>
</property>
</bean>

Client Side Interceptor

<bean id="wsDigCerSecurityInterceptor"
   class="org.springframework.ws.soap.security.wss4j.Wss4jSecurityInterceptor">
<property name="securementActions" value="Signature"/>
<property name="securementUsername" value="signFiles"/>
<property name="securementPassword" value="kpi135"/>
<property name="securementSignatureCrypto">
<bean 
   class="org.springframework.ws.soap.security.wss4j.support.CryptoFactoryBean">
<property name="keyStorePassword" value="ab987c"/>
<property name="keyStoreLocation" value="classpath:/akulastore.jks"/>
</bean>
</property>
</bean> 
```

# iphone - 如何仅指定与 iPhone 的兼容性 - 而不是 iPad 或 iPod？

> ID：13512888
> 
> 赞同：3
> 
> 时间：2012-11-22T12:35:53.430
> 
> 标签：iphone, ios, itunes

我刚刚让一个有 iPad 的人购买了我的应用程序（第一个案例 1 年后），但没有 iPhone。

坏事是我的应用程序通过短信或电话进行通信，所以它只能在 iPhone 上运行。

我什至在“目标设备系列”中专门设置了它——但我想这对 iTunes 无关紧要——在 iTunes 中的要求中说仍然是 iPhone、iPad 或 iPod。

iTunes上是否有类似Android的过滤逻辑，可以避免用户在iPad上获取应用程序？

当然，我在描述中清楚地写了这一点——我宁愿避免向购买了该应用程序但没有 iPhone 的用户解释这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:38:40.920

[`UIRequiredDeviceCapabilities`](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)不，但您可以使用字典指定设备需要具备的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:43:30.737

`telephony`您可以在 plist 下添加一个键`UIRequiredDeviceCapabilities`

更多详情请参考：

[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:42:19.677

除了 Djan 建议之外，您还可以在 didFinishLaunching 中通过 UIDevice 检查设备系列，如果它不属于 iPhone，只需重定向到带有错误消息或任何您想要的其他页面。

# php - joomla和另一个php网站的通用登录

> ID：13512894
> 
> 赞同：1
> 
> 时间：2012-11-22T12:36:36.630
> 
> 标签：php, joomla1.5

我正在学习 joomla，对此我有疑问。我在 php 中开发了一个网站说**www.xyz.com/php_website/**并且它的 CMS 是在 Joomla 中创建的说**www.xyz.com/joomla_website/**这意味着两者都在同一台服务器上，但都有不同的登录系统。所以我想做的是如果管理员登录php_website，他也可以在joomla_website自动登录，基本上我想要这些网站之间的共同登录.....请任何人都可以为我的问题提供解决方案......谢谢提前。

# wxpython - willdcard wxfiledialog

> ID：13512898
> 
> 赞同：0
> 
> 时间：2012-11-22T12:36:46.223
> 
> 标签：wxpython

我正在使用 wxFileDialog 让用户选择一个文件。我设置了一个通配符，以便用户只能选择“.hed”文件，这是我项目的头文件，“.hed”文件可以用于不同的数据文件，一个“.hed”文件可以是多个数据文件的头文件. 文件对话框应该只允许一种类型的数据文件。

例如，如果我有文件 test1.hed、test2.hed、test1.ab1、test1.ab2、test2.ab2。我只想要“ab1”类型的数据文件，对话框应该只查看 test1.hed。

我知道简单的解决方案是为“ab1”设置通配符并让用户选择 test1.ab1，但为了使其更加用户友好，我想知道其他解决方案是否可行以及如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:26:07.997

您只需将通配符参数设置为仅使用一种类型。我在以下教程中有一个示例：

[http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)

在该教程中，我将通配符参数设置为以下内容：

```
wildcard = "Python source (*.py)|*.py|" \
        "All files (*.*)|*.*" 
```

这允许用户仅选择 Python 文件，或者他们可以更改下拉列表以包含所有文件。我想你可以把它改成

```
wildcard = "Python source (*.py)|*.py" 
```

这会将其限制为仅 Python 文件。在你的情况下，你会想要类似的东西

```
wildcard = "Header files (*.hed)|*.hed" 
```

# sql-server - 首先在实体框架代码中将位映射到整数

> ID：13512901
> 
> 赞同：0
> 
> 时间：2012-11-22T12:36:57.360
> 
> 标签：sql-server, entity-framework, mapping, code-first

首先使用代码，sqlserver 和 oracle。

我的问题是：

我有一个 SqlServer 数据库，其中包含一些字段类型为“位”的表。

当首先使用实体​​框架代码时，位映射非常适合布尔值。

我正在尝试将“位”字段映射到 c# 中的“Int32”属性。

执行此操作时出现异常，并且 ColumnAttribute 属性在这种情况下似乎不起作用。

可以做这个映射吗？

（我知道希望将 bit 映射到 int32 而不是 bool 听起来很奇怪，但由于 Oracle 在代码中对这个区域的限制，我发现它是最舒适的方式来使用两种数据库的通用方式）。

谢谢！力博

# python - 使用python插入列表

> ID：13512902
> 
> 赞同：0
> 
> 时间：2012-11-22T12:37:00.250
> 
> 标签：python, list, map, interpolation

我已经设置了 x 和 y 的列表，例如

```
x=[1,2,3,4,5,6]
y=[1,4,9,16,25,36] 
```

我需要找到定义为的一组 u 的 y 值

```
u = [[2,3,1],[4,2,1],[6,3,2],[2,4,5],[2,3,6]] 
```

我正在使用[这个插值模块](http://proj.badc.rl.ac.uk/svn/dcip/ddp/branches/ddp-dev/tasks/ddp12/interp.py)。它类似于 numpy 插值

目前，我关注：

```
v = [interp(x,y,u[i]) for i in range(len(k))] 
```

有没有办法绕过 for 循环，因为它增加了我的计算时间。我宁愿节省我的记忆而不是时间。我的列表很大！我希望可以使用内置的地图功能，但不知道如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:40:13.707

`map()`也在内部循环 - 它只是在 C 端执行它更快。但是，您已经在使用[列表](http://www.youtube.com/watch?v=pShL9DCSIUw)推导，它也卸载到 C 并且可能会比`map()`.

也就是说，有机会通过更改循环来获得速度和可读性：

```
v = [interp(x, y, i) for i in u] 
```

在 Python 中，我们循环遍历迭代器，而不是索引。通过像你一样间接循环，你会显着减慢你的循环速度。它也使它的可读性大大降低。

至于 using `map()`，可以使用 using[`functools.partial()`](http://docs.python.org/3/library/functools.html#functools.partial)创建一个调用`interp()`with`x`并`y`预填充的函数：

```
import functools
f = functools.partial(interp, x, y)
v = list(map(f, u)) 
```

但是，正如我之前所说，这可能会更慢，并且可读性要差得多。

（假设您使用的是 CPython，我在此答案中使用术语 C 端，但在任何其他实现中，它也将更有效地实现，使用任何可用的较低级别选项）。

# javascript - 在不使用 document.write 的情况下插入到 head 标签中的特定位置

> ID：13512903
> 
> 赞同：1
> 
> 时间：2012-11-22T12:36:58.683
> 
> 标签：javascript, jquery, sinemacula

这可能是不可能的，但值得一问。我正在将脚本标签动态插入`head`我的页面部分。目前我正在使用`document.write`你们中的许多人会皱眉头，但它确实做得很好。

但是，出于[此处](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)概述的原因，我想找到`document.write`.

因此，我需要一个可以执行此操作的函数：

```
<!-- The document.write writes the new script here synchronously so it will block other scripts -->

<script type="text/javascript">
    // Code here that uses the code from the dynamically inserted script
</script> 
```

任何人都可以建议任何使用 jQuery 或纯 javascript 将在页面上插入元素的东西，但也符合这些要求：

1.  将元素放置在调用函数的位置。例如，脚本标签被放置在调用它的脚本标签之后
2.  脚本同步加载，因此会阻塞其他脚本，直到它完成

**谷歌用他们的`Google.load()`方法做到这一点，他们使用 document.write 吗？肯定不是...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:42:23.200

您可以查看这篇文章 - [http://www.phpied.com/non-onload-blocking-async-js/](http://www.phpied.com/non-onload-blocking-async-js/) facebook 使用类似的脚本来异步加载他们的 SDK。

它是跨浏览器的，即使页面上的 html 无效（即使缺少 head/body 标签）也可以异步加载脚本。

这是直接来自 facebook 的 SDK 的示例：

```
 (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false)); 
```

您必须进行一些修改，因为它允许您只加载一次脚本（因为`if (d.getElementById(id)) {return;}`）。

如果我们仔细查看脚本，我们可以看到许多好处：

*   在您的页面上，您只需要一个`script`标签（因为用于异步加载的脚本），这就是它获取第一个脚本元素的原因
*   它寻找已经添加的 SDK
*   它创建具有指定 id 的新脚本元素
*   它设置脚本的`src`
*   它在特定位置插入脚本元素
*   它异步加载脚本，以防止页面阻塞
*   自调用函数为文档对象创建短别名。这使脚本更加紧凑​​。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:42:36.490

你可以用不同的方式来做。正如[链接](https://stackoverflow.com/questions/8753182/cant-insert-js-programmatically-if-it-uses-document-write?rq=1)中的各种答案所述。但我使用以下

```
var load_js = function(data, callback)
            {
                    var head = document.getElementsByTagName("head")[0];

                    var script = document.createElement("script");
                    script.type = "text/javascript";
                    script.src = data;
                    head.appendChild(script);

                    if(callback != undefined)
                            callback();
            }

            load_js("http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"); 
```

# c# - 触发了asp页面的Sql调度程序

> ID：13512904
> 
> 赞同：0
> 
> 时间：2012-11-22T12:37:03.523
> 
> 标签：c#, asp.net, sql, scheduler

如果问题如此简单，请原谅我。因为我是新手，所以我不知道该怎么做。我需要创建一个 sql 调度程序，它将每 15 天触发一次 asp 页面，并将设计页面作为电子邮件发送到提到的电子邮件 ID。如果问题不清楚，请原谅我。请提供任何示例或链接。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:45:29.033

使用 SQL Server 代理创建作业，并使用以下命令创建类型为“操作系统 (CmdExec)”的单个步骤。

```
"C:\Program Files\Internet Explorer\iexplore.exe" "http://yoursite.com/yourpage.aspx" 
```

或 64 位操作系统

```
"C:\Program Files (x86)\Internet Explorer\iexplore.exe" "http://yoursite.com/yourpage.aspx" 
```

# salesforce - 获取选定查找项的 id

> ID：13512907
> 
> 赞同：0
> 
> 时间：2012-11-22T12:37:18.777
> 
> 标签：salesforce, visualforce

我正在构建一个需要填写表单的 Visualforce 页面。在表单中有一个查找字段来查找帐户。完成此操作后，应进行 AJAX 调用以更新其他内容。必须将所选项目的 id 传递给此 JS 函数。

的代码`inputField`如下所示：

```
<apex:inputField value="{!Account}" id="acct" onchange="doSomething(this.value);" /> 
```

所以在上面的代码中，`doSomething()`必须获取 id 作为参数。在当前表单中，`this.value`包含所选项目的名称。我可以得到身份证，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:52:13.457

使用 Firebug 或类似工具检查生成的标记。每个查找字段由几个输入字段组成（一个可见，其余为隐藏）。

![例子](../Images/e8000c34f7c6083a02a0c36ade009e55.png)

（在我的示例中，我已经明确地将`id`属性放在顶部的所有标签上（顶点：页面、表单块、部分，最后是输入字段。如果你不这样做，你会得到自动生成的名称）。

所以你需要做的：

1.  从`this`转到父标签（`this.parentNode`应该在普通 DOM 中工作，当然[总是建议使用 jQuery ；）](http://www.doxdesk.com/img/updates/20091116-so-large.gif)）
2.  并获取以 Id 结尾的子输入字段`acct_lkold`

可能“ [previousSibling](http://www.w3schools.com/dom/prop_element_previoussibling.asp) ”也会起作用？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:17:07.590

Try this:

```
<script>
function doThis(obj)
{
    alert(obj.id);
}
</script>

<apex:form>
    <apex:inputField value="{!acc.name}" id="myID" onchange="doThis(this);"/>
</apex:form> 
```

If You need the selected object id - use actionSupport:

```
<script>
function doThis(param)
{
    alert(param);
}
</script>

<apex:inputField value="{!MyObject__c.AnotherObject__c}">
    <apex:actionSupport event="onchange"
                        oncomplete="doThis('{!MyObject__c.AnotherObject__c}');"
                        reRender="none"/>
</apex:inputField> 
```

And finally if you can not (!) use actionSupport - use actionFunction instead:

```
<script>
function doThis(param)
{
    alert(param);
}
</script>

<apex:actionFunction name="preSend"
                     oncomplete="doThis('{!MyObject__c.AnotherObject__c}');"
                     reRender="none"/>

<apex:inputField value="{!MyObject__c.AnotherObject__c}" onchange="preSend()"/> 
```

# opencv - 视频采集设备 OpenCV 兼容吗？

> ID：13512911
> 
> 赞同：-2
> 
> 时间：2012-11-22T12:37:42.460
> 
> 标签：opencv, firewire

我可以购买哪些支持 mac os 和 win xp 的外部视频捕获设备（svideo 或 rca）？我的软件是用 OpenCV/JavaCV 开发的

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:42:02.373

如果我没记错的话，OpenCV 只适用于 USB 连接。如果我理解您的问题，您认为可以使用 Svideo 或 RCA 进行通信，好吗？OpenCV 使用 USB 连接来捕获视频/帧。Svideo 或 Rca 连接用于电视或捕获视频硬件。

# java - 在 log cat android 中打印数组

> ID：13512912
> 
> 赞同：38
> 
> 时间：2012-11-22T12:37:41.983
> 
> 标签：java, android, eclipse, android-logcat

如何在日志中打印 arr 变量以查看数组的结果谢谢，

```
 public void onClick(View v) {
     if(v.getId()==R.id.buttonone)
     {
          genrandom grandom =new genrandom();
          int[] arr=new int[50];
          arr = new  gen_random_number().genrandom(arr, yourXvalue);
     }
 } 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-11-22T12:42:39.363

您可以使用[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)

```
Log.d("this is my array", "arr: " + Arrays.toString(arr));
// or
System.out.println("arr: " + Arrays.toString(arr)); 
```

或者，如果您的数组是多维的，请使用[Arrays.deepToString()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5b%5d%29)

```
String[][] x = new String[][] {
    new String[] { "foo", "bar" },
    new String[] { "bazz" }
};
Log.d("this is my deep array", "deep arr: " + Arrays.deepToString(x));
// or
System.out.println("deep arr: " + Arrays.deepToString(x));
// will output: [[foo, bar], [bazz]] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T12:42:48.257

非常简单地使用每个**循环**比正常的（增量）循环快得多。

```
for(String log : array)
{
  Log.v("Tag",log);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:41:33.500

您可以使用每个循环

```
for(int x: arr){
Log.d(tag,"x:"+x);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:41:56.463

试试这个方法：

```
for (int i =0 ;i<arr.length;i++)
{
   Log.v("Array Value","Array Value"+arr[i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T12:42:26.447

尝试这个 ：

```
for (int i = 0; i < arr.length; i++) {
   Log.d(TAG, arr[i]);
} 
```

我们在这里所做的是使用 for 循环遍历数组以打印 logcat。可以使用`Log.d(..)`、`Log.v(..)`或`Log.i(..)`来完成 Log cat 输出`Log.e(..)`。[在这里](http://developer.android.com/reference/android/util/Log.html)查看更多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T12:42:37.900

你也可以试试纯旧的

```
 System.out.println() 
```

# java - Java 数组队列

> ID：13512913
> 
> 赞同：0
> 
> 时间：2012-11-22T12:37:48.330
> 
> 标签：java, queue

像这样创建 2 个队列时：

```
 ArrayQueue q1 = new ArrayQueue();
    ArrayQueue q2 = new ArrayQueue();
    for (int i = 0; i < 5; i++) {
        q1.enqueue(new Integer(i));
    }
    for (int i = 5; i < 10; i++) {
        q2.enqueue(new Integer(i));
    }
    System.out.println("q1: " + q1);
    System.out.println("q2: " + q2); 
```

它输出：`q1: 4,3,2,1,0`和`q2: 9,8,7,6,5`。

我需要一种将队列合并`q2`到`q1`具有交错元素的队列的方法。因此，如果`println`'d 再次将输出：`q1: 0,5,1,6,2,7,3,8,4,9`和`q2: 9,8,7,6,5`.

我的类包含所有适当的方法`enqueue`, `dequeue`, `peek`, `isEmpty`, `size`, `doubleSize`... 我的方法名称是：

```
 public void mergedQs(ArrayQueue q) {
    } 
```

基本上我想将对象添加到两个队列中，然后**将**第二个队列合并到第一个队列中（不仅仅是添加它们）。理想情况下，我想避免投射它们或使用 ArrayList，因为我希望它们保持队列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:51:13.963

您可能会发现这很有用。它合并任意数量的队列。

```
public static <T> Queue<T> mergeQs(Queue<T> ... qs) {
    Queue<T> ret = new ConcurrentLinkedQueue<T>();
    boolean more;
    do {
        more = false;
        for (Queue<T> q : qs) 
            if (!q.isEmpty()) {
                ret.add(q.remove());
                more = true;
            }
    } while(more);
    return ret;
} 
```

# sharepoint - 在 SharePoint 2010 中更改保存文件夹的位置

> ID：13512916
> 
> 赞同：0
> 
> 时间：2012-11-22T12:38:04.363
> 
> 标签：sharepoint, sharepoint-2010

我对 SharePoint 还很陌生，我编写了一个应用程序，当我单击按钮时会下载文档，但是当我下载文档时，它会自动保存在 bin 文件夹中，如何更改文档的保存位置？

任何帮助将不胜感激！

这是我的代码：

```
private void button11_Click(object sender, EventArgs e)
{
    using (var site = new SPSite(SiteUrl))
    {
        var web = site.RootWeb;
        var docLibFileUrl = "http://foo/demo/SharePointTest/Test.docx";
        var localFileName = "Test.docx";

        SPFile spFile = web.GetFile(docLibFileUrl);
        FileStream outStream = new FileStream(localFileName, FileMode.Create);
        byte[] fileData = spFile.OpenBinary();
        outStream.Write(fileData, 0, fileData.Count());
        outStream.Close();        
    }

    listBox1.Items.Add("Document downloaded");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:32:33.573

您可以添加如下代码

```
string tempPath = "C:\\TempFolder";

Byte[] tempFile = file.OpenBinary();

if (tempFile.Length>=0)
{
  FileStream fs = new FileStream(tempPath, FileMode.OpenOrCreate, FileAccess.Write);
  fs.Write(tempFile, 0, tempFile.Length);
  fs.Close();
} 
```

或者您可以使用此[链接](http://social.msdn.microsoft.com/Forums/en/sharepointdevelopmentlegacy/thread/62803eb3-430e-4ede-b649-bc9de4dbdd69)中的方法。

# c - 什么是静态 int ** volatile ptr？

> ID：13512921
> 
> 赞同：-1
> 
> 时间：2012-11-22T12:38:14.510
> 
> 标签：c, pointers

帮助我理解这句话：

```
static int  ** volatile ptr 
```

请让我知道如何分析这个指针语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:49:01.477

`static`意味着这是静态变量——函数中的局部变量在源代码中只有一个副本，而不是在全局模块之间共享。

`int **ptr`表示 ptr 是指向`int`.

`volatile`右侧`*`表示指针本身是易失的，而不是指向的值。volatile 意味着对该变量的所有访问都必须是实际的内存操作，并且不允许大多数优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:06:11.367

要在插入标记后处理标题文本： 4(static int 3( * 2( * 1(volatile ptr)))。由内而外：

1：由于程序可能不知道的原因，在运行时可以自由更改的变量。常见的原因是其他线程、信号或其他事件，以及指向真正是硬件控制器的“内存”的指针等。阻止编译器/优化器发出在此类更改下可能失败的代码。

2：指向该内存的易失性指针。所指向的*不是*易变的。

3：指向指针的指针，或指针数组。想想 char **argv; 再次，不是易变的。

4：静态：这取决于在声明中的位置：

*   在任何函数之外：ptr 值仅具有编译范围。
*   在函数内部：内存将由函数的所有调用和/或线程共享。在编译时只分配一次。

有趣： const volatile 表示外部影响可以改变指针，但您的软件不能这样做。

# episerver - Episerver 升级 6 到 Episerver 7 错误

> ID：13512930
> 
> 赞同：1
> 
> 时间：2012-11-22T12:38:42.037
> 
> 标签：episerver, episerver-6

您好我正在尝试通过 EPiSERVER 部署中心将 EPiSERVER 6 网站升级到 EPiSERVER 7。我不断收到此错误，希望有人能在这里帮助我。

**错误 - 方法调用失败，因为 [System.String] 不包含名为“get_Attributes”的方法。**

细节：

在 C:\Program Files (x86)\EPiServer\CMS\7.0.586.1\Upgrade\System Scripts\Upgrade Site To 7 (SqlServer).ps1:258 char:89 + foreach ($attribute in $webConfigDoc.configuration.episerver. virtualPath.get_Attributes <<<< ()) System.Management.Automation.ParentContainsErrorRecordException：方法调用失败，因为 [System.String] 不包含名为“get_Attributes”的方法。

# php - 在 PHP 中接受带小数和千位分隔符的国际数字

> ID：13512936
> 
> 赞同：4
> 
> 时间：2012-11-22T12:38:55.063
> 
> 标签：php, number-formatting, setlocale

对于用户可以输入能量来计算相应费用的在线计算器，我需要 PHP 脚本来接受各种用户输入。“200万又四分之一焦耳”的值可以输入为：

2000000.25（默认符号）

2,000,000.25（带千位分隔符）

2000000,25（逗号作为小数点）

2.000.000,25（逗号作为小数点，用千位分隔符）

2'000'000.25（替代格式）

2 000 000,25（法国符号）

我怎样才能让脚本意识到这些差异？

我的第一次尝试是用默认字符替换 str_replace 替代字符，但句点 (.) 可能是小数或千位分隔符。我尝试使用 sscanf 但如何确保它正确读取数字？

大多数用户只会提供小数点后两位，但是有什么方法可以区分1.234（1点234，句点作为小数分隔符）和1.234（一千二百三十四，句点作为千位分隔符）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:46:37.963

没有办法知道是什么`1.234`意思。

*   决定小数点分隔符
*   替换最后一个`,`或`.`用该分隔符
*   只允许一个分隔符
*   将输入限制为数值，`,`以及`.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T16:40:25.867

由于我无法通过一些内置的 PHP 函数找到简单的解决方案，我编写了两个函数来（1）检查输入的字符串是否可能是一个数字，以及（2）它是否格式正确，取决于使用的分隔符。

我将可能的分隔符限制为句点 ( `.`)、逗号 ( `,`)、空格 ( `) 和撇号 ( `'`) 作为千位分隔符。小数点可能只是前两个选项之一。两组分隔符都可以编辑以允许更多或限制现有的分隔符。`

 `我实际上正在做的是通过使用几个简单的`preg_match_all`调用来查找所有数字列和所有分隔符。

完整的代码如下所示，应该是不言自明的，因为我在抛出`false`. 我敢肯定，这可以以某种方式简化，但它现在可以工作并过滤许多错误，同时甚至允许一些奇怪的组合，例如`2 000 000.25`or `2'000'000,25`。

```
 function check_number($number) {
        if ((int) substr($number,0,1) == 0) {
            return false; // not starting with a digit greater than 0
        }
        if ((string) substr($number,-1) != "0" && (int) substr($number,-1) == 0) {
            return false; // not ending with a digit
        }
        preg_match_all('/([^0-9]{2,})/', $number, $sep, PREG_PATTERN_ORDER);
        if (isset($sep[0][0])) {
            return false; // more than one consecutive non-digit character
        }
        preg_match_all('/([^0-9]{1})/', $number, $sep, PREG_PATTERN_ORDER);
        if (count($sep[0]) > 2 && count(array_unique($sep[0])) > 2) {
            return false; // more than 2 different separators
        }
        elseif (count($sep[0]) > 2) {
            $last_sep = array_pop($sep[0]);
            if (!in_array($last_sep,array(".",","))) {
                return false; // separator not allowed as last one
            }
            $sep_unique = array_unique($sep[0]);
            if (count($sep_unique) > 1) {
                return false; // not all separators (except last one) are identical 
            }
            elseif (!in_array($sep_unique[0],array("'",".",","," "))) {
                return false; // separator not allowed
            }
        }
        return true;
    }

    function convert_number($number) {
        preg_match_all('/([0-9]+)/', $number, $num, PREG_PATTERN_ORDER);
        preg_match_all('/([^0-9]{1})/', $number, $sep, PREG_PATTERN_ORDER);
        if (count($sep[0]) == 0) {
            // no separator, integer
            return (int) $num[0][0];
        }
        elseif (count($sep[0]) == 1) {
            // one separator, look for last number column
            if (strlen($num[0][1]) == 3) {
                if (strlen($num[0][0]) <= 3) {
                    // treat as thousands seperator
                    return (int) ($num[0][0] * 1000 + $num[0][1]);
                }
                elseif (strlen($num[0][0]) > 3) {
                    // must be decimal point
                    return (float) ($num[0][0] + $num[0][1] / 1000);
                }
            }
            else {
                // must be decimal point
                return (float) ($num[0][0] + $num[0][1] / pow(10,strlen($num[0][1])));
            }
        }
        else {
            // multiple separators, check first an last
            if ($sep[0][0] == end($sep[0])) {
                // same character, only thousands separators, check well-formed nums
                $value = 0;
                foreach($num[0] AS $p => $n) {
                    if ($p == 0 && strlen($n) > 3) {
                        return -1; // malformed number, incorrect thousands grouping
                    }
                    elseif ($p > 0 && strlen($n) != 3) {
                        return -1; // malformed number, incorrect thousands grouping
                    }
                    $value += $n * pow(10, 3 * (count($num[0]) - 1 - $p));
                }
                return (int) $value;
            }
            else {
                // mixed characters, thousands separators and decimal point
                $decimal_part = array_pop($num[0]);
                $value = 0;
                foreach($num[0] AS $p => $n) {
                    if ($p == 0 && strlen($n) > 3) {
                        return -1; // malformed number, incorrect thousands grouping
                    }
                    elseif ($p > 0 && strlen($n) != 3) {
                        return -1; // malformed number, incorrect thousands grouping
                    }
                    $value += $n * pow(10, 3 * (count($num[0]) - 1 - $p));
                }
                return (float) ($value + $decimal_part / pow(10,strlen($decimal_part)));
            }
        }
    } 
```

我知道这组函数有一个缺陷：`1.234`或者`1,234`将始终被视为整数`1234`，因为如果单个分隔符前面的位数少于 4，该函数假定分隔符必须是千位分隔符。`

# smtp - 使用 gmail 配置 Jenkins 电子邮件通知

> ID：13512948
> 
> 赞同：20
> 
> 时间：2012-11-22T12:39:24.720
> 
> 标签：smtp, jenkins, gmail, port

我尝试将 jenkins 配置为使用 gmail 作为 POP 提供商发送电子邮件通知，但我无法成功

```
SMTP server - pop.gmail.com
Default user e-mail suffix - @gmail.com
Sender E-mail Address - Foobar CI <your.email@gmail.com>

Use SMTP Authentication - yes
User Name - your.email
Password - p******d

Use SSL - yes
SMTP Port - 995
Reply-To Address - noreply@gmail.com
Charset - UTF-8 
```

测试失败：连接被拒绝

javax.mail.MessagingException：无法连接到 SMTP 主机：pop.gmail.com，端口：995；嵌套异常是：java.net.ConnectException：连接被拒绝：连接

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-23T07:00:08.970

Google SMTP 服务器的主机名是 smtp.gmail.com，如果您使用 SSL，那么正确的端口是 465。

POP 服务器通常只用于接收邮件，而不是发送邮件。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-03-08T08:56:50.337

以下是更新的 gmail SMTP 服务器配置：

```
Gmail SMTP server address: smtp.gmail.com
Gmail SMTP user name: Your full Gmail address (e.g. example@gmail.com)
Gmail SMTP password: Your Gmail password
Gmail SMTP port: 465
Gmail SMTP TLS/SSL required: yes 
```

这种配置对我来说很好用。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-03-23T08:01:07.327

由于谷歌增加了安全措施，上述配置不起作用。需要在触发邮件的 Gmail 帐户中进行额外配置。此步骤授权 Jenkins 等应用使用 Gmail 帐户。

[https://support.google.com/accounts/answer/6010255](https://support.google.com/accounts/answer/6010255)

转到“我的帐户”中的“不太安全的应用程序”部分。在“访问安全性较低的应用”旁边，选择开启。（G Suite 用户请注意：如果您的管理员锁定了不太安全的应用帐户访问权限，则此设置会隐藏。）

成功触发此电子邮件后。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2018-03-01T10:56:44.487

1.  **获取应用程序专用密码**

    *   登录 gmail 帐户 >> 导航到设置 >> 隐私和安全设置

    *   设置两步验证设置（因为没有两步验证我们无法生成应用程序专用密码）

    *   在 gmail 帐户中设置两步验证设置后，导航回安全和隐私设置

    *   单击应用程序特定密码>>在下拉列表中将应用程序的名称指定为 Jenkins *（谷歌默认情况下没有针对 Jenkins 的任何特定应用程序密码设置）* >>这将生成密码记下生成的密码

**注意**：*由于密码对您的 gmail 帐户具有全面控制权，因此泄露可能会导致严重后果*

2.  **设置 SMTP 配置以发送 gmail**

    *   登录后从仪表板导航到以下路径管理`Jenkins`>> `configure system`>>`scroll down to email notification section`

    *   输入以下参数

        ```
        smtp server : smtp.gmail.com
        default user email suffix : @gmail.com 
        ```

    *   选择高级

    *   检查 smtp 身份验证

        ```
        username : (Your gmail id)
        password : (application specific password generated from previous step) 
        ```

    *   检查使用 SSL

        ```
        SMTP port : 465
        Reply to address : noreply@gmail.com(optional)
        Charset : UTF-8 (by default it is UTF-8) 
        ```

    *   选择测试配置邮件

        ```
        Test e-mail recipient : <enter recipient email id > 
        ```

单击测试配置，它将向收件人电子邮件 ID 发送测试邮件

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-09-20T23:07:33.377

以下屏幕截图说明了从 GMail 发送电子邮件所需的电子邮件配置。

[![以下屏幕截图说明了从 GMail 发送电子邮件所需的电子邮件配置。](../Images/a776c046e2e53814ce7c7b9a20378877.png)](https://i.stack.imgur.com/NkbPD.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-20T16:30:42.947

**注意**

最新的**mailer 插件**版本 1.24 有一个错误，即使您有正确的配置，也会导致测试配置失败（需要身份验证）。从官网下载1.23（.hpi文件）版本，然后从manage plugin->advanced上传。重新启动jenkins，它应该可以正常工作。

只需要开启安全性较低的应用访问，无需开启两步验证。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-25T04:40:50.527

我在[Zapier](https://zapier.com)的免费套餐上成功地做到了这一点（无需在 gmail 中打开“不太安全的应用程序”

1.  [安装 Jenkins 通知插件](https://wiki.jenkins.io/display/JENKINS/Notification+Plugin)。您可能需要重新启动 Jenkins
2.  转到 Zapier 并创建一个 Jenkins 触发器
3.  在你的项目下的Jenkins中：Configure -> Job Notifications，填写选项。使用 JSON 似乎对我有用。
4.  在 Zapier 中添加 Gmail 操作。您应该可以在您的 gmail 帐户中通过单点登录进行设置。

PS。除了它对我有用之外，我没有理由推荐 Zapier，并且有一个解决方案不会损害我的 gmail 帐户。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-18T07:02:07.227

以下设置对我来说工作正常。

> Jenkis 版本：2.204.1
> Mailer 插件版本：1.30
> 
> SMTP 设置：
> 
> SMTP 服务器 - smtp.gmail.com
> 使用 SMTP 身份验证 - 检查
> 用户名 - your-gmail-username@gmail.com
> 密码 - your-gmail-password for the above账号>

**注意：在您的谷歌帐户设置中，必须关闭 2 因素身份验证，并且必须打开不太安全的应用程序访问权限**

> 使用 SSL - 检查
> SMTP 端口 - 465
> 字符集 - UTF-8
> 测试连接 - 提供收件人电子邮件地址

# javascript - 为什么要使用发布/订阅模式（在 JS/jQuery 中）？

> ID：13512949
> 
> 赞同：105
> 
> 时间：2012-11-22T12:39:29.937
> 
> 标签：javascript, jquery, design-patterns, publish-subscribe

因此，一位同事向我介绍了发布/订阅模式（在 JS/jQuery 中），但我很难理解*为什么*人们会在“普通”JavaScript/jQuery 上使用这种模式。

例如，以前我有以下代码......

```
$container.on('click', '.remove_order', function(event) {
    event.preventDefault();
    var orders = $(this).parents('form:first').find('div.order');
    if (orders.length > 2) {
        orders.last().remove();
    }
}); 
```

我可以看到这样做的好处，例如......

```
removeOrder = function(orders) {
    if (orders.length > 2) {
        orders.last().remove();
    }
}

$container.on('click', '.remove_order', function(event) {
    event.preventDefault();
    removeOrder($(this).parents('form:first').find('div.order'));
}); 
```

`removeOrder`因为它引入了对不同事件等重用功能的能力。

但是，如果它做同样的事情，你为什么要决定实现发布/订阅模式并达到以下长度？（仅供参考，我使用[了 jQuery tiny pub/sub](https://gist.github.com/661855)）

```
removeOrder = function(e, orders) {
    if (orders.length > 2) {
        orders.last().remove();
    }
}

$.subscribe('iquery/action/remove-order', removeOrder);

$container.on('click', '.remove_order', function(event) {
    event.preventDefault();
    $.publish('iquery/action/remove-order', $(this).parents('form:first').find('div.order'));
}); 
```

我肯定读过这个模式，但我无法想象为什么这会是必要的。我看到的解释*如何*实现这种模式的教程只涵盖了和我自己一样的基本示例。

我想 pub/sub 的用处会在更复杂的应用程序中表现出来，但我无法想象。恐怕我完全没有抓住重点；但如果有的话，我想知道这一点！

您能否**简要**解释一下为什么以及在什么情况下这种模式是有利的？像我上面的例子这样的代码片段是否值得使用 pub/sub 模式？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-11-22T13:38:33.317

这都是关于松散耦合和单一职责的，这与过去几年非常现代的 JavaScript 中的 MV* (MVC/MVP/MVVM) 模式密切相关。

[松散耦合](https://en.wikipedia.org/wiki/Loose_coupling)是一种面向对象的原则，其中系统的每个组件都知道自己的职责并且不关心其他组件（或至少尽量不关心它们）。松耦合是一件好事，因为您可以轻松地重用不同的模块。您没有与其他模块的接口耦合。使用发布/订阅，您只需要与发布/订阅接口相结合，这并不是什么大问题——只有两种方法。因此，如果您决定在不同的项目中重用一个模块，您只需复制并粘贴它，它可能会工作，或者至少您不需要太多努力就可以使其工作。

在谈到松耦合时，我们应该提到[关注点分离](https://en.wikipedia.org/wiki/Separation_of_concerns). 如果您正在使用 MV* 架构模式构建应用程序，那么您总是有一个模型和一个视图。模型是应用程序的业务部分。您可以在不同的应用程序中重用它，因此将它与要显示它的单个应用程序的视图结合起来并不是一个好主意，因为通常在不同的应用程序中您有不同的视图。因此，使用发布/订阅进行模型视图通信是一个好主意。当您的模型发生更改时，它会发布一个事件，视图会捕获它并自行更新。您没有任何来自发布/订阅的开销，它可以帮助您解耦。以同样的方式，您可以将应用程序逻辑保留在控制器中（例如，MVVM、MVP，它不完全是控制器），并使视图尽可能简单。当你的 View 改变（或者用户点击某个东西，例如）它只是发布一个新事件，Controller 捕获它并决定做什么。如果你熟悉[MVC](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式或Microsoft 技术（WPF/Silverlight）中的[MVVM ，您可以将发布/订阅](https://en.wikipedia.org/wiki/MVVM)[视为观察者模式](https://en.wikipedia.org/wiki/Observer_pattern)。这种方法用于 Backbone.js、Knockout.js (MVVM) 等框架。

这是一个例子：

```
//Model
function Book(name, isbn) {
    this.name = name;
    this.isbn = isbn;
}

function BookCollection(books) {
    this.books = books;
}

BookCollection.prototype.addBook = function (book) {
    this.books.push(book);
    $.publish('book-added', book);
    return book;
}

BookCollection.prototype.removeBook = function (book) {
   var removed;
   if (typeof book === 'number') {
       removed = this.books.splice(book, 1);
   }
   for (var i = 0; i < this.books.length; i += 1) {
      if (this.books[i] === book) {
          removed = this.books.splice(i, 1);
      }
   }
   $.publish('book-removed', removed);
   return removed;
}

//View
var BookListView = (function () {

   function removeBook(book) {
      $('#' + book.isbn).remove();
   }

   function addBook(book) {
      $('#bookList').append('<div id="' + book.isbn + '">' + book.name + '</div>');
   }

   return {
      init: function () {
         $.subscribe('book-removed', removeBook);
         $.subscribe('book-aded', addBook);
      }
   }
}()); 
```

另一个例子。如果您不喜欢 MV* 方法，您可以使用一些不同的方法（我将在接下来描述的方法和最后提到的方法之间存在交叉点）。只需在不同的模块中构建您的应用程序。例如看看推特。

![推特模块](../Images/5c27bccbdbfd9b5498de650a23c06ae8.png)

如果您查看界面，您只是有不同的框。您可以将每个框视为不同的模块。例如，您可以发布推文。此操作需要更新一些模块。首先，它必须更新您的个人资料数据（左上框），但它还必须更新您的时间线。当然，您可以保留对这两个模块的引用并使用它们的公共接口分别更新它们，但仅发布事件更容易（也更好）。由于更松散的耦合，这将使您的应用程序的修改更容易。如果您开发依赖于新推文的新模块，您只需订阅“发布推文”事件并处理它。这种方法非常有用，可以使您的应用程序非常解耦。您可以非常轻松地重用您的模块。

这是最后一种方法的基本示例（这不是原始的 twitter 代码，它只是我的一个示例）：

```
var Twitter.Timeline = (function () {
   var tweets = [];
   function publishTweet(tweet) {
      tweets.push(tweet);
      //publishing the tweet
   };
   return {
      init: function () {
         $.subscribe('tweet-posted', function (data) {
             publishTweet(data);
         });
      }
   };
}());

var Twitter.TweetPoster = (function () {
   return {
       init: function () {
           $('#postTweet').bind('click', function () {
               var tweet = $('#tweetInput').val();
               $.publish('tweet-posted', tweet);
           });
       }
   };
}()); 
```

对于这种方法，[Nicholas Zakas](http://www.nczonline.net/)发表了精彩的演讲。对于 MV* 方法，我所知道的最好的文章和书籍是由[Addy Osmani](http://addyosmani.com/blog/)出版的。

缺点：你必须小心过度使用发布/订阅。如果您有数百个事件，那么管理所有事件可能会变得非常混乱。如果您没有使用命名空间（或没有以正确的方式使用它），您也可能会发生冲突。可以在此处找到类似于发布/订阅的 Mediator 的高级实现[https://github.com/ajacksified/Mediator.js](https://github.com/ajacksified/Mediator.js)。它具有命名空间和事件“冒泡”等功能，当然可以中断。发布/订阅的另一个缺点是难以进行单元测试，可能难以隔离模块中的不同功能并独立测试它们。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-22T13:29:46.517

主要目标是减少代码之间的耦合。这是一种基于事件的思维方式，但“事件”并不与特定对象相关联。

我将在下面用一些看起来有点像 JavaScript 的伪代码写出一个大例子。

假设我们有一个 Radio 类和一个 Relay 类：

```
class Relay {
    function RelaySignal(signal) {
        //do something we don't care about right now
    }
}

class Radio {
    function ReceiveSignal(signal) {
        //how do I send this signal to other relays?
    }
} 
```

每当无线电接收到信号时，我们都希望有多个中继器以某种方式中继消息。继电器的数量和类型可以不同。我们可以这样做：

```
class Radio {
    var relayList = [];

    function AddRelay(relay) {
        relayList.add(relay);
    }

    function ReceiveSignal(signal) {
        for(relay in relayList) {
            relay.Relay(signal);
        }
    }

} 
```

这工作正常。但现在想象一下，我们想要一个不同的组件也接收 Radio 类接收的部分信号，即 Speakers：

（对不起，如果类比不是一流的......）

```
class Speakers {
    function PlaySignal(signal) {
        //do something with the signal to create sounds
    }
} 
```

我们可以再次重复该模式：

```
class Radio {
    var relayList = [];
    var speakerList = [];

    function AddRelay(relay) {
        relayList.add(relay);
    }

    function AddSpeaker(speaker) {
        speakerList.add(speaker)
    }

    function ReceiveSignal(signal) {

        for(relay in relayList) {
            relay.Relay(signal);
        }

        for(speaker in speakerList) {
            speaker.PlaySignal(signal);
        }

    }

} 
```

我们可以通过创建一个接口（例如“SignalListener”）来使这一点变得更好，这样我们只需要 Radio 类中的一个列表，并且总是可以在我们想要收听信号的任何对象上调用相同的函数。但这仍然会在我们决定的任何接口/基类/等与 Radio 类之间产生耦合。基本上，每当您更改 Radio、Signal 或 Relay 类之一时，您都必须考虑它可能如何影响其他两个类。

现在让我们尝试一些不同的东西。让我们创建一个名为 RadioMast 的第四个类：

```
class RadioMast {

    var receivers = [];

    //this is the "subscribe"
    function RegisterReceivers(signaltype, receiverMethod) {
        //if no list for this type of signal exits, create it
        if(receivers[signaltype] == null) {
            receivers[signaltype] = [];
        }
        //add a subscriber to this signal type
        receivers[signaltype].add(receiverMethod);
    }

    //this is the "publish"
    function Broadcast(signaltype, signal) {
        //loop through all receivers for this type of signal
        //and call them with the signal
        for(receiverMethod in receivers[signaltype]) {
            receiverMethod(signal);
        }
    }
} 
```

现在我们有了一个我们知道的*模式*，我们可以将它用于任意数量和类型的类，只要它们：

*   知道 RadioMast（处理所有消息传递的类）
*   知道发送/接收消息的方法签名

因此，我们将 Radio 类更改为其最终的简单形式：

```
class Radio {
    function ReceiveSignal(signal) {
        RadioMast.Broadcast("specialradiosignal", signal);
    }
} 
```

我们将扬声器和继电器添加到 RadioMast 的此类信号的接收器列表中：

```
RadioMast.RegisterReceivers("specialradiosignal", speakers.PlaySignal);
RadioMast.RegisterReceivers("specialradiosignal", relay.RelaySignal); 
```

现在 Speakers 和 Relay 类除了有一个可以接收信号的方法外，对任何事情的了解都是零，而作为发布者的 Radio 类知道它向其发布信号的 RadioMast。这就是使用像发布/订阅这样的消息传递系统的重点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-24T21:06:25.600

其他答案在展示模式如何工作方面做得很好。我想解决隐含的问题“***旧方式有什么问题？*** ”因为我最近一直在使用这种模式，我发现它涉及到我的思维转变。

想象一下，我们订阅了一份经济公报。该公告发布了一个标题：“*将道琼斯指数降低 200 点*”。这将是一个奇怪且有点不负责任的信息。但是，如果它发布了：“*安然今天早上申请了第 11 章破产保护*”，那么这是一个更有用的信息。请注意，该消息可能会*导致*道琼斯指数下跌 200 点，但这是另一回事。

发送命令和通知刚刚发生的事情是有区别的。考虑到这一点，请使用原始版本的 pub/sub 模式，暂时忽略处理程序：

```
$.subscribe('iquery/action/remove-order', removeOrder);

$container.on('click', '.remove_order', function(event) {
    event.preventDefault();
    $.publish('iquery/action/remove-order', $(this).parents('form:first').find('div.order'));
}); 
```

在用户操作（点击）和系统响应（订单被删除）之间已经存在隐含的强耦合。在您的示例中有效地，该操作正在发出命令。考虑这个版本：

```
$.subscribe('iquery/action/remove-order-requested', handleRemoveOrderRequest);

$container.on('click', '.remove_order', function(event) {
    event.preventDefault();
    $.publish('iquery/action/remove-order-requested', $(this).parents('form:first').find('div.order'));
}); 
```

现在，处理程序正在响应已发生的感兴趣的事情，但没有义务删除订单。事实上，处理程序可以做各种与删除订单不直接相关但仍可能与调用操作相关的事情。例如：

```
handleRemoveOrderRequest = function(e, orders) {
    logAction(e, "remove order requested");
    if( !isUserLoggedIn()) {
        adviseUser("You need to be logged in to remove orders");
    } else if (isOkToRemoveOrders(orders)) {
        orders.last().remove();
        adviseUser("Your last order has been removed");
        logAction(e, "order removed OK");
    } else {
        adviseUser("Your order was not removed");
        logAction(e, "order not removed");
    }
    remindUserToFloss();
    increaseProgrammerBrowniePoints();
    //etc...
} 
```

命令和通知之间的区别是用这种模式做出的有用区别，IMO。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T12:50:21.027

这样您就不必对方法/函数调用进行硬编码，您只需发布事件而不关心谁在听。这使得发布者独立于订阅者，减少了应用程序的两个不同部分之间的依赖关系（或耦合，无论您喜欢什么术语）。

[以下是维基百科](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)提到的耦合的一些缺点

> 紧耦合系统往往表现出以下发展特征，这些特征通常被视为缺点：
> 
> 1.  一个模块的更改通常会导致其他模块的更改产生连锁反应。
> 2.  由于模块间依赖性增加，模块的组装可能需要更多的努力和/或时间。
> 3.  一个特定的模块可能更难重用和/或测试，因为必须包含依赖模块。

考虑类似封装业务数据的对象。每当设置年龄时，它都有硬编码的方法调用来更新页面：

```
var person = {
    name: "John",
    age: 23,

    setAge: function( age ) {
        this.age = age;
        showAge( age );
    }
};

//Different module

function showAge( age ) {
    $("#age").text( age );
} 
```

`showAge`现在，如果不包含该功能，我将无法测试 person 对象。此外，如果我还需要在其他一些 GUI 模块中显示年龄，我需要对该方法调用进行硬编码， `.setAge`现在 person 对象中存在 2 个不相关模块的依赖关系。当你看到这些调用被调用并且它们甚至不在同一个文件中时，它也很难维护。

请注意，在同一个模块中，您当然可以有直接的方法调用。但是按照任何合理的标准，业务数据和表面的 gui 行为不应该驻留在同一个模块中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-23T17:41:20.403

PubSub 实现通常出现在以下位置 -

1.  有一个类似于 portlet 的实现，其中有多个 portlet 在事件总线的帮助下进行通信。这有助于在 aync 架构中创建。
2.  在一个因紧密耦合而受损的系统中，pubsub 是一种有助于在各个模块之间进行通信的机制。

示例代码 -

```
var pubSub = {};
(function(q) {

  var messages = [];

  q.subscribe = function(message, fn) {
    if (!messages[message]) {
      messages[message] = [];
    }
    messages[message].push(fn);
  }

  q.publish = function(message) {
    /* fetch all the subscribers and execute*/
    if (!messages[message]) {
      return false;
    } else {
      for (var message in messages) {
        for (var idx = 0; idx < messages[message].length; idx++) {
          if (messages[message][idx])
            messages[message][idx]();
        }
      }
    }
  }
})(pubSub);

pubSub.subscribe("event-A", function() {
  console.log('this is A');
});

pubSub.subscribe("event-A", function() {
  console.log('booyeah A');
});

pubSub.publish("event-A"); //executes the methods. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-30T19:09:16.447

论文[“发布/订阅的许多方面”](http://members.unine.ch/pascal.felber/publications/CS-03.pdf)是一本很好的读物，他们强调的一件事是在三个“维度”上解耦。这是我的粗略总结，但也请参考论文。

1.  **空间解耦。**交互的各方不需要相互认识。发布者不知道谁在听，有多少人在听，或者他们在做什么。订阅者不知道是谁在生产这些事件，有多少生产者等等。
2.  **时间脱钩。**在交互过程中，交互方不需要同时处于活动状态。例如，当发布者发布一些事件时，订阅者可能会断开连接，但它可以在它上线时做出反应。
3.  **同步解耦。**发布者在生成事件时不会被阻塞，订阅者可以在订阅的事件到达时通过回调异步通知。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-24T07:27:40.857

**简单** 的答案 最初的问题是寻找一个简单的答案。这是我的尝试。

Javascript 没有为代码对象提供任何机制来创建自己的事件。所以你需要一种事件机制。发布/订阅模式将满足这一需求，您可以选择最适合您自己需求的机制。

现在我们可以看到对 pub/sub 模式的需求，那么您是否愿意以不同于处理 pub/sub 事件的方式来处理 DOM 事件？为了降低复杂性和其他概念，例如关注点分离 (SoC)，您可能会看到一切统一的好处。

因此自相矛盾的是，更多的代码可以更好地分离关注点，这可以很好地扩展到非常复杂的网页。

我希望有人认为这是一个足够好的讨论，而不需要详细说明。

# ios - iOS：通过网络应用程序的 RTSP 播放器

> ID：13512951
> 
> 赞同：1
> 
> 时间：2012-11-22T12:39:35.627
> 
> 标签：ios, web-applications, stream, rtsp

我知道这个问题已经被问过很多次了，我又来了。我想创建一个应用程序通过 RTSP 在 iPhone 上流式传输视频。我的研究表明，应用商店中有使用 RTSP 的应用，但没有教程或简单的方法可以做到这一点。如果有请告诉我。

我遇到了使用像 Sencha 这样的框架为移动设备构建 webapps 的想法。我想为什么不使用 html5 来构建我的应用程序。但由于我在该领域没有特别的经验，我想问问专家，看看是否真的有可能。我可以使用 Sencha 或任何其他类似框架为 iPhone 构建我的 RTSP 播放器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:39:25.363

我不熟悉 Senha，但我们确实使用 rtsp 构建应用程序，我们有框架和教程。我想说的是，如果不是所有应用商店中充当 rtsp 客户端的应用程序，大多数应用程序都使用 ffmpeg 一个开源流媒体库。

播放器是使用我们的框架构建的 [http://www.streammore.tv](http://www.streammore.tv)

直播555 [http://www.livemedia.com](http://www.livemedia.com)

开放式简历，[http://www.opencv.org](http://www.opencv.org)

这是一个帮助您入门的小教程

[http://sol3.typepad.com/exotic_particles/](http://sol3.typepad.com/exotic_particles/)

# mysql - 使用 MAX(column) 时，其他列的值不匹配

> ID：13512953
> 
> 赞同：1
> 
> 时间：2012-11-22T12:39:36.107
> 
> 标签：mysql, sql

我想用下表中的相应 REVID 检索每个 NID 的最后一个“版本”：

```
+------+-------+-----+---------+----------+
| RHID | REVID | NID | VERSION |  ACTION  |
+------+-------+-----+---------+----------+ 
| 1    |   1   |  1  |    1    |  CREATE  |
+------+-------+-----+---------+----------+  
| 2    |   2   |  2  |    1    |  CREATE  |
+------+-------+-----+---------+----------+  
| 3    |   3   |  1  |    2    |  UPDATE  |
+------+-------+-----+---------+----------+  
| 4    |   4   |  1  |    3    |  UPDATE  |
+------+-------+-----+---------+----------+  
| 16   |   3   |  1  |    4    | ROLLBACK |
+------+-------+-----+---------+----------+ 
```

当我运行时：

```
SELECT a.nid, a.revID, MAX(a.version)
FROM `revision_history` a
GROUP BY a.nid; 
```

我希望结果是：

```
+-----+-------+---------+
| NID | REVID | VERSION |
+-----+-------+---------+
|  1  |   3   |    4    |
+-----+-------+---------+
|  2  |   2   |    1    |
+-----+-------+---------+ 
```

相反，结果是：

```
+-----+-------+---------+
| NID | REVID | VERSION |
+-----+-------+---------+
|  1  |   3   |    4    |
+-----+-------+---------+
|  2  |   2   |    4    |
+-----+-------+---------+ 
```

* * *

**问：获得预期结果的适当查询是什么？**

笔记：

这是为了构建一个视图（在 MySQL 中，它不支持子查询）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:42:19.787

试试这个：

```
select a.nid ,a.revID ,a.version
from   `revision_history` a
JOIN
      (SELECT nid,  MAX(version) as version
        FROM `revision_history` 
        GROUP BY nid)b
ON    a.nid=b.nid
AND   a.version=b.version 
```

### [SQL小提琴演示](http://www.sqlfiddle.com/#!2/f920b/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:50:30.000

我总是喜欢假设`GROUP BY`取第一个值`FROM`：

```
SELECT nid ,revID ,version
FROM (  SELECT nid, revID, version
        FROM `revision_history`
        ORDER BY version DESC) AS h
GROUP BY nid 
```

如果您知道行为并且永远不会超过1个案例，则该方法非常简短，易于理解和编辑。如果您出于某种原因在同一版本上有 2 个相同的版本`nid`，则结果可能是错误的。

# python - pygame：如何使图像的矩形透明或与背景颜色相同？

> ID：13512955
> 
> 赞同：0
> 
> 时间：2012-11-22T12:39:41.623
> 
> 标签：python, pygame

今天刚开始用pygame，遇到了点小麻烦。我旋转了汽车图像，但似乎矩形区域不适合图像（如图所示，白色区域比我旋转的图像大）。

您可以使矩形区域的颜色透明或与背景相同，以使图像看起来更好吗？

谢谢

![汽车图像](../Images/adf963abef0e12d2c3b426efdfbe9e63.png)

您好，这是我的相关代码（来自 Richard Jones 的“Rapid Game Development in Python”）：

```
class CarSprite(pygame.sprite.Sprite):
    MAX_FORWARD_SPEED = 10
    MAX_REVERSE_SPEED = 10
    ACCELERATION = 2
    TURN_SPEED = 5

    def __init__(self, image, position):
        pygame.sprite.Sprite.__init__(self)
        self.src_image = pygame.image.load(image)
        self.src_image = self.src_image.convert()
        self.position = position
        self.speed = self.direction = 0
        self.k_left = self.k_right = self.k_down = self.k_up = 0
        self.rect = self.src_image.get_rect()
        self.rect.center = position

    def update(self, deltat):
        # SIMULATION
        self.speed += (self.k_up + self.k_down)
        if self.speed > self.MAX_FORWARD_SPEED:
            self.speed = self.MAX_FORWARD_SPEED
        if self.speed <-self.MAX_REVERSE_SPEED:
            self.speed = -self.MAX_REVERSE_SPEED
        self.direction += (self.k_right + self.k_left)
        x, y = self.position
        rad = self.direction * math.pi / 180
        x += -self.speed*math.sin(rad)
        y += -self.speed*math.cos(rad)
        self.position = (x, y)
        self.image = pygame.transform.rotate(self.src_image, self.direction)
        self.rect = self.image.get_rect()
        self.rect.center = self.position

    def draw(self,screen):
        self.image.set_alpha(150)
        screen.blit(self.image, self.rect) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:07:34.050

由于某种原因我看不到图像，但我认为您想要的是

`Surface.set_colorkey(Color, flags=0)`

如果您输入背景的颜色，它（背景）将变得透明。另一个很酷的事情是，如果你在旋转汽车之前设置了颜色键，背景会自动变成你设置颜色键的颜色。

小心点。如果您从外部源导入图像，请确保`image=image.convert()`在设置 colorkey 之前执行此操作。

# .net - WCF 强制服务超时和限制

> ID：13512958
> 
> 赞同：2
> 
> 时间：2012-11-22T12:40:07.373
> 
> 标签：.net, wcf, throttling

我有一个需要很长时间才能运行的 WCF 服务方法。为了便于解释，假设有时需要 0.5 秒，有时需要 5 秒。处理每个请求的时间从 0.5 到 5 秒不等。有一个业务条件是，如果服务不能在 2 秒内处理请求，客户端会认为它失败，并考虑将请求发送到另一个服务器。

假设服务有 10 个并发请求，其中 4 个成功，因为服务设法在不到 2 秒的时间内执行它们，其余 6 个失败。我面临的问题是剩下的 6 个正在做一些客户不会消费的事情。由于这 6 个请求会消耗服务器资源，因此新的传入请求会延迟。随着时间的推移，您会看到越来越多的请求被视为失败，这仅仅是因为 WCF 将一旦处理后没人会使用的请求排队。

如果 WCF 限制/超时未能在收到请求后的 3 秒内执行 Web 方法/请求，我该如何指示它终止当前请求。这不应该是客户端设置。我想像这样指示服务“如果你不能在 4 秒内处理请求，就忘记它并停止处理该请求，因为没有人会使用你的最终结果”。

我玩过 ServiceThrottlingBehavior 和 (CloseTimeout,OpenTimeout,SendTimeout,ReceiveTimeout) 但没有任何帮助告诉服务在一定时间后停止处理。

# sharepoint - 如何获取“数据表视图中的自定义列表”应用程序的“修改者”值？

> ID：13512959
> 
> 赞同：0
> 
> 时间：2012-11-22T12:40:08.290
> 
> 标签：sharepoint, sharepoint-api

我们为上传到 SharePoint Online 中的文档库的所有文件获取“修改者”属性。但是，我无法获取“数据表视图中的自定义列表”和“日历”应用程序的字段。我正在使用 SiteData 网络服务的 GetListItems() API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:49:29.400

也许[这篇](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/e52978d3-f40f-4b6d-a24b-bdb7dcb4c1a9/)文章可以帮助解决您的问题？

安德鲁

# java - XPages Java 损坏问题

> ID：13512961
> 
> 赞同：3
> 
> 时间：2012-11-22T12:40:26.637
> 
> 标签：java, lotus-notes, xpages, lotus-domino

我注意到在 8.5.3 中执行设计刷新时，Java 类经常被损坏，这会导致我的 XPage 使用 Java 代码出现问题（我通常会收到找不到/无法识别包的错误）。有没有其他人注意到 Java 类和 XPage 的类似问题？由于设计刷新频率和模板位于不同的服务器上，目前无法进行设计替换。我也不确定设计替换是否能解决我的问题。

任何提示、建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T13:41:01.750

你可能会被我被击中的情况所击中。

您的应用程序是否使用扩展库中的任何类（openNTF 版本或 IBM 版本 - Update Pack 1）？

如果是这样，则问题可能是由于在 Domino Designer 中打开设计的所有计算机上都没有安装扩展库。我遇到了这个问题，发现只是打开设计“触及”了 Java 类（即编译它们或至少对它们签名）。这是由于 Domino Designer 中“项目”下的默认设置为“自动构建”。因此，只需在没有扩展库的情况下从另一台计算机打开 Domino Designer 来调整例如表单或@-formula 代理，Java 类就被破坏了！

我们花了一点时间才弄清楚为什么会发生这种情况。通过禁用“自动构建”选项，我们可以通过在 Designer 中打开数据库来避免损坏代码。但是，更好的方法是在所有 Domino Designer 客户端上安装扩展库。

但是要小心，因为这个问题仍然会损害您的应用程序，因为元素是由最后一个打开设计的用户签名的...... :-(

/约翰

# sharepoint - SharePoint 使用当前页面查询字符串中的变量创建超链接

> ID：13512964
> 
> 赞同：0
> 
> 时间：2012-11-22T12:40:46.920
> 
> 标签：sharepoint

试图让它在 SharePoint 2010 中工作。我在页面 A 上有一个超链接，它转到页面 B 并传递一个查询字符串值。我想要的是在页面 B 上创建一个新的超链接，该超链接使用当前的查询字符串值传递给页面 C。这可能吗？我该怎么做呢。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:47:09.990

javascript代码：

```
document.location = 
    document.location.href.split('?')[0].replace('pageB','pageC') + 
    document.location.href.split('?')[1]; 
```

或者

```
document.location = 
    document.location.host + '/pathToPage/pageC.htm' +                 
    document.search; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:50:22.230

您可以使用 ASP.NET 创建动态超链接控件

例如，您的 URL 中有一个链接参数

```
// http://localhost/home.aspx?link=http://www.google.com 
```

然后你请求你的参数

```
if (Request.QueryString["link"] != null){    
string myhyperlink = Request.QueryString["link"]; 
```

现在您需要向您的页面添加一个超链接控件

```
HyperLink hyp = new HyperLink();
    hyp.ID = "hypABD";
    hyp.NavigateUrl = myhyperlink;
    Page.Controls.Add(hyp); 
```

希望这可以帮助

# apache - 拒绝从我们自己的域以外的域直接访问所有 .php 文件

> ID：13512968
> 
> 赞同：0
> 
> 时间：2012-11-22T12:40:59.490
> 
> 标签：apache, .htaccess

我正在尝试使用 htaccess 拒绝从我们的域以外的任何域直接访问所有 .php 文件。所以我在下面的规则中添加了 php。但这是正确的方法吗？或者有没有其他“正确的方法来做到这一点”

```
#No Hotlinking
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://mydomain\.com/.*$ [NC]
RewriteRule \.(gif|jpe?g|png|js|css|php)$ - [F] 
```

所以：

```
http://www.mydomain.com/page.php -> OK. Display the page.
http://www.evildomain.com/page.php -> Deny! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:02:43.043

这对我来说似乎很好，除非您宁愿使用 $_SERVER['HTTP_REFERER'] 直接检查您的 PHP 页面：

```
<?php
if ($_SERVER['HTTP_REFERER'] != 'mydomain.com') {
header("Location: goaway.php");
} 
```

# java - 如何在从 jasper 生成 pdf 时添加 OpenWith 和 SaveAs 对话框

> ID：13512971
> 
> 赞同：0
> 
> 时间：2012-11-22T12:41:22.707
> 
> 标签：java, pdf, jasper-reports

嗨伙计们！！！我生成了一个简单的参数化 jasper 报告，用于将数据导出为 pdf 格式。现在，根据我的代码，pdf 文件正在通过自动下载生成和打开，而我需要 Saveas 对话框来询问 openwith 或 saveas ...任何建议将不胜感激.. .Thanx提前..这是我的代码...

```
ServletOutputStream servletOutputStream = response.getOutputStream();
InputStream reportStream = getServletConfig().getServletContext().getResourceAsStream("para.jasper");
try {
    String name = request.getParameter("name");
    System.out.println(name);
    String query = "Select * from vikas where vikas.name='" + name + "'";
    System.out.println(query);
    Class.forName("com.mysql.jdbc.Driver");
    connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/techsoft?user=root&password=techsoft");
    statement = connection.createStatement();
    resultSet = statement.executeQuery(query);
    JRResultSetDataSource resultSetDataSource = new JRResultSetDataSource(resultSet);
    JasperRunManager.runReportToPdfStream(reportStream, servletOutputStream, new HashMap(), resultSetDataSource);
    resultSet.close();
    statement.close();
    connection.close();
    servletOutputStream.flush();
    servletOutputStream.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:49:19.183

您应该添加[`Content-Disposition`http 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)。同时添加`Content-Type`

```
response.setHeader("Content-Type", "application/pdf");
response.setHeader("Content-Disposition", "inline; filename=\"" + getFileName() + "\""); 
```

# jsf - 如何将库控件打包到 jar 中

> ID：13512973
> 
> 赞同：0
> 
> 时间：2012-11-22T12:41:49.410
> 
> 标签：jsf, xpages

我在 Java 中构建了一些库控件来扩展一些 (JSF) 控件，如编辑框、组合框等。我想将我的控件（只有 java 代码）打包到一个 JAR 文件中，但是每次我用我的 jar 替换 java 文件时都会出错。

有人知道我为什么会收到此错误吗？我无法创建插件，因为扩展控件应该只在一个 NSF 中可用。

> 错误 500
> HTTP Web 服务器：命令未处理异常

这是日志文件中的完整错误：

```
<CommonBaseEvent creationTime="2012-11-22T12:28:27.960+01:00" globalInstanceId="ELc0a8643600013b27e0473d00000000" msg="CLFAD0131E: Unable to push data because: Could not open the document" severity="50" version="1.0.1">
    <extendedDataElements name="CommonBaseEventLogRecord:level" type="noValue">
        <children name="CommonBaseEventLogRecord:name" type="string"> 
            <values>SCHWERWIEGEND</values>
        </children>
    </extendedDataElements>
    <extendedDataElements name="CommonBaseEventLogRecord:sourceClassName" type="string">
        <values>com.ibm.commons.log.AbstractLogMgr</values>
    </extendedDataElements>
    <extendedDataElements name="CommonBaseEventLogRecord:sourceMethodName" type="string">
        <values>log</values>
    </extendedDataElements>
    <extendedDataElements name="CommonBaseEventLogRecord:Exception" type="string">
        <values>com.ibm.xsp.FacesExceptionEx: Could not open the document&#xD;&#xA;&#x9;at com.ibm.xsp.model.domino.DominoDocumentData.doOpenDocument(DominoDocumentData.java:505)&#xD;&#xA;&#x9;at com.ibm.xsp.model.AbstractDocumentDataSource.openDocument(AbstractDocumentDataSource.java:148)&#xD;&#xA;&#x9;at com.ibm.xsp.model.AbstractDocumentDataSource.load(AbstractDocumentDataSource.java:100)&#xD;&#xA;&#x9;at com.ibm.xsp.model.AbstractDataSource.getDataContainer(AbstractDataSource.java:474)&#xD;&#xA;&#x9;at com.ibm.xsp.model.domino.DominoDocumentData.getDataObject(DominoDocumentData.java:146)&#xD;&#xA;&#x9;at com.ibm.xsp.model.AbstractDataSource.pushData(AbstractDataSource.java:576)&#xD;&#xA;&#x9;at com.ibm.xsp.util.DataPublisher.publishControlData(DataPublisher.java:181)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIDataPanelBase.publishControlData(UIDataPanelBase.java:310)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIDataPanelBase.initBeforeContents(UIDataPanelBase.java:451)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIIncludeComposite.</values>
        <values>initBeforePageContents(UIIncludeComposite.java:668)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:339)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.addComponent(AbstractCompiledPage.java:389)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIIncludeComposite.buildContents(UIIncludeComposite.java:453)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildFacet(CompiledComponentBuilder.java:205)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UICallback.buildContents(UICallback.java:180)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildChildren(CompiledComponentBuilder.java:123)&#xD;&#xA;&#x9;a</values>
        <values>t com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildAll(CompiledComponentBuilder.java:84)&#xD;&#xA;&#x9;at com.ibm.xsp.extlib.component.layout.UIVarPublisherBase.buildContents(UIVarPublisherBase.java:97)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildChildren(CompiledComponentBuilder.java:123)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildAll(CompiledComponentBuilder.java:84)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIIncludeComposite.buildPageContents(UIIncludeComposite.java:692)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:340)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.addComponent(AbstractCompiledPage.java:389)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIIncludeCo</values>
        <values>mposite.buildContents(UIIncludeComposite.java:453)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildChildren(CompiledComponentBuilder.java:123)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildAll(CompiledComponentBuilder.java:84)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIViewRootEx.buildContents(UIViewRootEx.java:1649)&#xD;&#xA;&#x9;at com.ibm.xsp.component.UIViewRootEx2.buildContents(UIViewRootEx2.java:246)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)&#xD;&#xA;&#x9;at com.ibm.xsp.page.compiled.AbstractCompiledPage.createViewRoot(AbstractCompiledPage.java:167)&#xD;&#xA;&#x9;at com.ibm.xsp.application.ViewHandlerExImpl._createViewRoot(ViewHandlerExImpl.java:511)&#xD;&#xA;&#x9;at com.ibm.xsp</values>
        <values>.application.ViewHandlerExImpl.createViewRoot(ViewHandlerExImpl.java:557)&#xD;&#xA;&#x9;at com.ibm.xsp.application.ViewHandlerExImpl.doCreateView(ViewHandlerExImpl.java:141)&#xD;&#xA;&#x9;at com.ibm.xsp.application.ViewHandlerEx.createView(ViewHandlerEx.java:90)&#xD;&#xA;&#x9;at com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:238)&#xD;&#xA;&#x9;at com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:200)&#xD;&#xA;&#x9;at com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)&#xD;&#xA;&#x9;at com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137)&#xD;&#xA;&#x9;at com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)&#xD;&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)&#xD;&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1267)&#xD;&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(Compo</values>
        <values>nentModule.java:847)&#xD;&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)&#xD;&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)&#xD;&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1251)&#xD;&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:598)&#xD;&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:421)&#xD;&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)&#xD;&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)&#xD;&#xA;&#x9;at com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)&#xD;&#xA;Caused by: com.ibm.xsp.exception.EvaluationExceptionEx: Error while executing JavaScript computed expression&#xD;&#xA;&#x9;at com.ibm.xsp.binding.javascript.</values>
        <values>JavaScriptValueBinding.getValue(JavaScriptValueBinding.java:132)&#xD;&#xA;&#x9;at com.ibm.xsp.model.domino.DominoDocumentData.getComputeWithForm(DominoDocumentData.java:206)&#xD;&#xA;&#x9;at com.ibm.xsp.model.domino.DominoDocumentData.doOpenDocument(DominoDocumentData.java:493)&#xD;&#xA;&#x9;... 56 more&#xD;&#xA;Caused by: java.lang.NullPointerException&#xD;&#xA;&#x9;at java.lang.Class.isAssignableFrom(Native Method)&#xD;&#xA;&#x9;at com.ibm.jscript.types.JavaAccessObject$ClassInfoCache.&lt;init&gt;(JavaAccessObject.java:1050)&#xD;&#xA;&#x9;at com.ibm.jscript.types.JavaAccessObject.getClassInfoCache(JavaAccessObject.java:963)&#xD;&#xA;&#x9;at com.ibm.jscript.types.JavaAccessObject.construct(JavaAccessObject.java:240)&#xD;&#xA;&#x9;at com.ibm.jscript.types.JavaWrapperObject.construct(JavaWrapperObject.java:1)&#xD;&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTNew.interpret(ASTNew.java:109)&#xD;&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTVariableDecl.interpret(ASTVariableDecl.java:82)&#xD;&#xA;&#x9;at com.ibm.jscript.ASTTr</values>
        <values>ee.ASTBlock.interpret(ASTBlock.java:100)&#xD;&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTIf.interpret(ASTIf.java:85)&#xD;&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTProgram.interpret(ASTProgram.java:119)&#xD;&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTProgram.interpretEx(ASTProgram.java:139)&#xD;&#xA;&#x9;at com.ibm.jscript.JSExpression._interpretExpression(JSExpression.java:435)&#xD;&#xA;&#x9;at com.ibm.jscript.JSExpression.access$1(JSExpression.java:424)&#xD;&#xA;&#x9;at com.ibm.jscript.JSExpression$2.run(JSExpression.java:414)&#xD;&#xA;&#x9;at java.security.AccessController.doPrivileged(AccessController.java:284)&#xD;&#xA;&#x9;at com.ibm.jscript.JSExpression.interpretExpression(JSExpression.java:410)&#xD;&#xA;&#x9;at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:251)&#xD;&#xA;&#x9;at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:234)&#xD;&#xA;&#x9;at com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:221)&#xD;&#xA;&#x9;at com.ibm.xsp.javascript.JavaScriptInte</values>
        <values>rpreter.interpret(JavaScriptInterpreter.java:193)&#xD;&#xA;&#x9;at com.ibm.xsp.binding.javascript.JavaScriptValueBinding.getValue(JavaScriptValueBinding.java:78)&#xD;&#xA;&#x9;... 58 more&#xD;&#xA;</values>
    </extendedDataElements>
    <sourceComponentId component="Expeditor 6.2" componentIdType="ProductName" instanceId="" location="Christian-PC" locationType="Hostname" subComponent="" threadId="0" componentType="http://www.w3.org/2001/XMLSchema-instance"/>
    <situation categoryName="ReportSituation">
        <situationType xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ReportSituation" reasoningScope="INTERNAL" reportCategory="LOG"/>
    </situation>
</CommonBaseEvent> 
```

这是可读的堆栈跟踪部分：

```
com.ibm.xsp.FacesExceptionEx: Could not open the document
    at com.ibm.xsp.model.domino.DominoDocumentData.doOpenDocument(DominoDocumentData.java:505)
    at com.ibm.xsp.model.AbstractDocumentDataSource.openDocument(AbstractDocumentDataSource.java:148)
    at com.ibm.xsp.model.AbstractDocumentDataSource.load(AbstractDocumentDataSource.java:100)
    at com.ibm.xsp.model.AbstractDataSource.getDataContainer(AbstractDataSource.java:474)
    at com.ibm.xsp.model.domino.DominoDocumentData.getDataObject(DominoDocumentData.java:146)
    at com.ibm.xsp.model.AbstractDataSource.pushData(AbstractDataSource.java:576)
    at com.ibm.xsp.util.DataPublisher.publishControlData(DataPublisher.java:181)
    at com.ibm.xsp.component.UIDataPanelBase.publishControlData(UIDataPanelBase.java:310)
    at com.ibm.xsp.component.UIDataPanelBase.initBeforeContents(UIDataPanelBase.java:451)
    at com.ibm.xsp.component.UIIncludeComposite.initBeforePageContents(UIIncludeComposite.java:668)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:339)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.addComponent(AbstractCompiledPage.java:389)
    at com.ibm.xsp.component.UIIncludeComposite.buildContents(UIIncludeComposite.java:453)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildFacet(CompiledComponentBuilder.java:205)
    at com.ibm.xsp.component.UICallback.buildContents(UICallback.java:180)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildChildren(CompiledComponentBuilder.java:123)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildAll(CompiledComponentBuilder.java:84)
    at com.ibm.xsp.extlib.component.layout.UIVarPublisherBase.buildContents(UIVarPublisherBase.java:97)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildChildren(CompiledComponentBuilder.java:123)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildAll(CompiledComponentBuilder.java:84)
    at com.ibm.xsp.component.UIIncludeComposite.buildPageContents(UIIncludeComposite.java:692)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:340)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.addComponent(AbstractCompiledPage.java:389)
    at com.ibm.xsp.component.UIIncludeComposite.buildContents(UIIncludeComposite.java:453)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildChildren(CompiledComponentBuilder.java:123)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildAll(CompiledComponentBuilder.java:84)
    at com.ibm.xsp.component.UIViewRootEx.buildContents(UIViewRootEx.java:1649)
    at com.ibm.xsp.component.UIViewRootEx2.buildContents(UIViewRootEx2.java:246)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.createViewRoot(AbstractCompiledPage.java:167)
    at com.ibm.xsp.application.ViewHandlerExImpl._createViewRoot(ViewHandlerExImpl.java:511)
    at com.ibm.xsp.application.ViewHandlerExImpl.createViewRoot(ViewHandlerExImpl.java:557)
    at com.ibm.xsp.application.ViewHandlerExImpl.doCreateView(ViewHandlerExImpl.java:141)
    at com.ibm.xsp.application.ViewHandlerEx.createView(ViewHandlerEx.java:90)
    at com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:238)
    at com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:200)
    at com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
    at com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137)
    at com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
    at com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1267)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
    at com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1251)
    at com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:598)
    at com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:421)
    at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
    at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
    at com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)
Caused by: com.ibm.xsp.exception.EvaluationExceptionEx: Error while executing JavaScript computed expression
    at com.ibm.xsp.binding.javascript.JavaScriptValueBinding.getValue(JavaScriptValueBinding.java:132)
    at com.ibm.xsp.model.domino.DominoDocumentData.getComputeWithForm(DominoDocumentData.java:206)
    at com.ibm.xsp.model.domino.DominoDocumentData.doOpenDocument(DominoDocumentData.java:493)
    ... 56 more
Caused by: java.lang.NullPointerException
    at java.lang.Class.isAssignableFrom(Native Method)
    at com.ibm.jscript.types.JavaAccessObject$ClassInfoCache.<init>(JavaAccessObject.java:1050)
    at com.ibm.jscript.types.JavaAccessObject.getClassInfoCache(JavaAccessObject.java:963)
    at com.ibm.jscript.types.JavaAccessObject.construct(JavaAccessObject.java:240)
    at com.ibm.jscript.types.JavaWrapperObject.construct(JavaWrapperObject.java:1)
    at com.ibm.jscript.ASTTree.ASTNew.interpret(ASTNew.java:109)
    at com.ibm.jscript.ASTTree.ASTVariableDecl.interpret(ASTVariableDecl.java:82)
    at com.ibm.jscript.ASTTree.ASTBlock.interpret(ASTBlock.java:100)
    at com.ibm.jscript.ASTTree.ASTIf.interpret(ASTIf.java:85)
    at com.ibm.jscript.ASTTree.ASTProgram.interpret(ASTProgram.java:119)
    at com.ibm.jscript.ASTTree.ASTProgram.interpretEx(ASTProgram.java:139)
    at com.ibm.jscript.JSExpression._interpretExpression(JSExpression.java:435)
    at com.ibm.jscript.JSExpression.access$1(JSExpression.java:424)
    at com.ibm.jscript.JSExpression$2.run(JSExpression.java:414)
    at java.security.AccessController.doPrivileged(AccessController.java:284)
    at com.ibm.jscript.JSExpression.interpretExpression(JSExpression.java:410)
    at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:251)
    at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:234)
    at com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:221)
    at com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:193)
    at com.ibm.xsp.binding.javascript.JavaScriptValueBinding.getValue(JavaScriptValueBinding.java:78)
    ... 58 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:42:09.620

我认为你在某处有一个空值

原因：com.ibm.jscript.types.JavaAccessObject$ClassInfoCache.(JavaAccessObject.java:1050) 处的 java.lang.Class.isAssignableFrom(Native Method) 处的 java.lang.NullPointerException

并且可能在 SSJS 语句中或在 SSJS 调用的 java 类中

原因：com.ibm.xsp.exception.EvaluationExceptionEx：在 com.ibm.xsp.binding.javascript 处执行 JavaScript 计算表达式时出错。com.ibm.xsp.model.domino.DominoDocumentData.getComputeWithForm(DominoDocumentData.java:206) 上的 JavaScriptValueBinding.getValue(JavaScriptValueBinding.java:132)

至于将您的 java 源代码导出到 jar 文件。我假设你在eclipse中工作。右键单击要导出的 Eclipse 插件并选择“导出”，然后在出现的对话框中选择“插件开发\可部署插件和片段”。在下一个对话框中，选择要将插件导出到的路径（大概是 %Domino_Program%\data\domino\workspace\applications\eclipse 文件夹）。然后执行“重新启动任务 http”（您必须使用它，因为它还会重新启动 JVM）并且您的插件应该可供服务器使用。

由于您也在开发组件，我假设您希望这些组件在设计器中可用。由于我不确定您如何进行设计器设置（即通过更新站点或通过放置插件的链接目录安装），我需要更多信息。如果您正在使用更新站点，请使用 google 查找如何从 eclipse 构建更新站点。

# .net - Form.Load 和 Form.New 上 VS2012 调试行为的解决方法

> ID：13512977
> 
> 赞同：1
> 
> 时间：2012-11-22T12:42:03.593
> 
> 标签：.net, vb.net, exception, visual-studio-2012

感谢对我之前[问题](https://stackoverflow.com/questions/13403487/vs-2012-vb-net-is-ignoring-unhandled-exceptions-on-windows-7-64bit)的回答，我在这方面取得了一些进展。原来那是[这里](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a)已经涵盖的东西的重复表现。TLDR 版本：Win64 中的调试在 Form_Load 事件中表现“奇怪”。

我现在要做的是找到处理这个问题的最佳方法，让 VS 正常工作，这样我就可以真正开始编程/调试了。在不同的地方有如此多的设置，很难跟踪它们。我对这些的每一种组合都做了一整套测试：

**一个。**构建平台：任何 CPU 或 x64

**湾。**“首选 32 位”（选择 x64 时不适用）

**C。**只是我的代码（启用/禁用）

**d。**中断所有抛出的异常（不仅仅是用户未处理的异常）

**e.** 在 Form.Load 或 Form.New 中抛出异常

保持不变：启用应用程序框架；启动对象是 Form1，因此从这个非用户代码中调用：

```
Protected Overrides Sub OnCreateMainForm()
   Me.MainForm = Global.TheNameOfMyApplication.Form1
End Sub 
```

无法在此处发布完整结果，因为它很长，而且我找不到在这些帖子中制作表格的方法。但结论是我从 VS 调试器中看到了 4 种不同的行为。从好到坏到严重丑陋的顺序：

**1.**中断导致异常的实际行。一切都好：这是“正确”的行为。

**2.**在 OnCreateMainForm（上图）中换行。内在的例外给污垢。没有办法让它在抛出异常的过程中中断（例如，看看实际发生了什么）。

**3.**在空白（无代码）窗口上中断。在顶部它说“没有可用的源：调用堆栈只包含外部代码”。

**4.**不休息。吞下异常。抛出异常的过程就被放弃了；throw 之后的行不被执行。节目继续，吹着快乐的曲子，希望我没有注意到。

显然我想要行为**1**。这是我发现的。

*   构建平台和“首选 32 位”设置在此测试中完全没有区别。
*   对抛出的异常启用 Break（在 Debug/Exceptions 对话框中）使一切正常工作（良好行为**1**）。
*   如果不启用此功能，Form.Load 中的代码总是会导致丑陋的行为**4**（吞下异常）。
*   如果不启用此功能，Form.New 中的代码会做两件事中的任何一件。如果启用了 JustMyCode，我会得到 Bad behavior **3**（“No source available”）。如果不是，我会得到 Bad behavior **2**（中断创建表单的调用 - 无法进入 New 构造函数以查看发生了什么）。

我希望在 Form.New 而不是 Form.Load 中的编码（如在回答我之前的问题中所建议的那样）将是一种解决方法。事实证明不是。除非我遗漏了什么，否则我可以让调试工作的唯一方法是启用 Break on Thrown Exceptions。我真的不想这样做；除其他外，我确实想捕获并有选择地处理异常，并且打破所有抛出的异常使这成为一个完全可以使用的 PITA。

（请记住，在我遇到这个问题之前，这个项目只是稍微超过了 Hello World 阶段——我还没有做任何时髦的事情，我真的不想让 PITA 调试器行为挂在我的脖子上。 ）。

实际上，我必须勾选所有“抛出异常中断”框，以替代我真正想要的选项：

![请好好工作](../Images/db31302a1efde63627e21eb6d2630a40.png)

我还安装了之前答案中提到的修补程序，并尝试在 Sub Main 过程中设置异常处理程序，但这似乎也没有解决问题。抛出异常中断是我的最佳选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:27:17.270

最简单的解决方法：使用 Win8 ...

Form_Load 中除以零异常，用 VS2012 (VB) 测试：

Win7x64

```
AnyCPU : Swallow
x86 : Swallow
x64 : App dies without notice 
```

Win8x64

```
AnyCPU : Break into debugger
x86 : Break into debugger
x64 : App dies without notice 
```

所以如果你只是想让它***工作，你可以考虑用Win8测试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T06:55:38.363

我怀疑这发生在，`Form.New`但我确认这发生在`Form.Load`.

**根本原因：** `Form.Load`与常规 Form 事件在不同的线程上运行，因此错误处理在那里有不同的行为。

**建议：**避免`Form.Load`，将代码移至`Form.New`和`Form.Show`。使用是从[vba](/questions/tagged/vba "显示标记为“vba”的问题")到[vb.net](/questions/tagged/vb.net "显示标记为“vb.net”的问题")`Form.Load`的程序员的一种习惯，但在后者中，它具有许多程序员所不知道的完全不同的行为（Windows 原生）。

**了解更多：** [开始的好地方](https://stackoverflow.com/a/28783285/2392157)

# .htaccess - 使用 htaccess 在 URL 末尾添加可能缺少的斜杠？

> ID：13512978
> 
> 赞同：-1
> 
> 时间：2012-11-22T12:42:09.160
> 
> 标签：.htaccess, url-rewriting

我正在使用 htaccess 进行 URL 重写以通过这种方式转换 URL：

```
www.url.com/product.php?id=3 
```

进入

```
www.url.com/laptops/ 
```

我发现当斜线 / 最后存在或不存在时，相对链接的调用方式不同（css文件或图片）。

**我在Apple网站上发现，如果您删除“www.apple.com/mac/”末尾的斜杠并按回车，斜杠将自动重新添加，这就是我想做的。**

我尝试了几种我找到的解决方案，例如

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

但是用这个解决方案，如果我把最后的斜线去掉并按回车，导航器将“重写”FTP服务器中的确切文件夹位置，导致“找不到文件”错误。

预先感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:50:13.160

!-f 检查文件是否存在，据我从你的例子中可以看出，它并不存在，但我认为你重写的其余部分很好。

```
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

但是，在您提供的示例中，您将 products.php?id=3 重定向到笔记本电脑，这是一个非常具体的重写，这意味着您必须为每个 url 进行唯一的重写，但是上面的那个会为您添加斜杠然后您需要对该确切页面进行内部重写，以将其从笔记本电脑转换为 products.php?id=3。

# android - 我可以在 Android 中引用渐变资源吗？

> ID：13512981
> 
> 赞同：2
> 
> 时间：2012-11-22T12:42:14.853
> 
> 标签：android, android-layout, gradient

我希望能够定义一个渐变可绘制对象，然后在其他形状可绘制对象中引用此渐变。沿着这些路线有可能吗，还是我必须重新指定每个形状资源中的渐变？

在文件 my_gradient.xml

```
<gradient
    android:angle="180"
    android:endColor="@color/Gradient2Light"
    android:startColor="@color/Gradient2Dark" >
</gradient> 
```

然后就拥有

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<gradient id="@drawable/my_gradient" />

<stroke
    android:width="1dp"
    android:color="#2f6699" />

<corners android:radius="3dp" /> 
```

这样的事情是否可能，如果是，那么如何？

# c - 迭代时浮点数不精确

> ID：13512986
> 
> 赞同：3
> 
> 时间：2012-11-22T12:42:20.283
> 
> 标签：c, floating-point, floating-accuracy

我有一个函数可以根据 range 中的值计算 3d 中的点`[0, 1]`。*我面临的问题是，二进制浮点数不能完全表示 1。*

在函数中计算的数学表达式能够计算 的值`t=1.0`，但该值永远不会被函数接受，因为它会在计算之前检查是否为范围。

```
curves_error curves_bezier(curves_PointList* list, curves_Point* dest, curves_float t) {
    /* ... */
    if (t < 0 || t > 1)
        return curves_invalid_args;
    /* ... */
    return curves_no_error;
} 
```

我怎样才能用这个函数计算 3d 点`t=1.0`？`ELLIPSIS`前段时间我听说过一些事情，我认为与这样的问题有关，但我不确定。

谢谢

**编辑**：好的，对不起。由于我面临的问题，我假设浮点数不能完全代表 1。问题可能是因为我正在做这样的迭代：

```
for (t=0; t <= 1.0; t += 0.1) {
    curves_error error = curves_bezier(points, point, t);
    if (error != curves_no_error)
        printf("Error with t = %f.\n", t);
    else
        printf("t = %f is ok.\n", t);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T12:56:13.223

```
for (t=0; t <= 1.0; t += 0.1) { 
```

您的问题是二进制浮点数不能准确表示`0.1`.

最接近的 32 位单精度 IEEE754 浮点数是 0.100000001490116119384765625，最接近的 64 位双精度浮点数是 0.1000000000000000055511151231257827021181583404541015625。如果严格按照 32 位精度进行算术运算，则`0.1f`0 加 10 次的结果为

```
1.00000011920928955078125 
```

如果以更高的精度执行中间计算`float`，则可能会导致精确`1.0`或什至略小的数字。

要解决您的问题，在这种情况下，您可以使用

```
for(k = 0; k <= 10; ++k) {
    t = k*0.1; 
```

因为`10 * 0.1f`正是`1.0`。

另一种选择是在你的`curves_bezier`函数中使用一个小的公差，

```
if (t > 1 && t < 1 + epsilon) {
    t = 1;
} 
```

对于适当小的 epsilon，也许`float epsilon = 1e-6;`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T12:55:09.273

> 二进制浮点数不能完全表示 1

[证明可以在这里找到](http://www.binaryconvert.com/result_float.html?decimal=049046048)。

> 最准确的表示 = 1.0E0

可能有问题

1.  以 2 为基数的具有无限小数位的小数
2.  数字太小而无法准确表示而不会丢失精度
3.  太大而无法在不损失精度的情况下表示的数字。

但是**`1.0`**没有一个！

**但是，** [这](http://www.binaryconvert.com/result_float.html?decimal=048046049)***`0.1`***是一个问题案例，违反了第 1 点，请看：

> 最准确的表示 = 1.00000001490116119384765625E-1

因此，如果将 0.1 相加十次，您将得到`1.00000001490116119384765625E-0`大于`1.0`.

（示例为 IEEE754 单精度 32 位浮点数）

## 可能的解决方案：

```
int i;
for (i=0; i <= 10; i++) {
    t=i/10.0;
    curves_error error = curves_bezier(points, point, t);
    if (error != curves_no_error) {
        printf("Error with t = %f.\n", t);
    }
    else {
        printf("t = %f is ok.\n", t);
    }
} 
```

这样，二进制格式的错误就不会被总结！

（**注意：**`if`我在and语句中使用了额外的花括号`else`。这样做，有一天你会感谢自己的。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T13:00:01.690

在比较浮点数时，您应该检查它们是否足够接近而不完全相等，原因在其他答案中提到，例如：

```
#define EPSILON 0.000001f
#define FEQUAL(a,b) (fabs((a) - (b)) < EPSILON) 
```

# algorithm - 检查组合模式是否被破坏

> ID：13512988
> 
> 赞同：0
> 
> 时间：2012-11-22T12:42:23.043
> 
> 标签：algorithm

所以我遇到了这样的问题 - 我有一些 k 元组，每个元组由 1 到 10 的一些整数组成，均匀分布到两个“子数组”（所以 1 2 3 4 5 <=> 6 7 8 9 10，对于例子）。我想要做的是在第一行中查找是否存在这样的一对（2元素组合，排列无关紧要）它总是一起出现（*在同一侧，是否相邻无关紧要*）在后面的行中（例如，在上面的示例中，如果我们还有 3 4 2 8 1 <=> 5 6 7 9 10 作为第二个输入行，则条件为真，因为 (1,2) 总是一起出现，所以也是(3,4) 依此类推 - 但是，这样的一对就足够了。此外，第二行打破了 (4,5) 婚姻，因为 5 在 4 的另一侧。

创建初始组合数组不应该太费时间，但是有没有更快的方法来检查是否有任何“对”被破坏（在一侧没有找到）而不是构建一个“跨数组”2元素组合表每个传入的行，然后将其中的每个元素与已经构建的初始对进行比较？这听起来真的很慢，至少可以说 n^2。有人有什么想法吗？我想不出任何其他方式。

**编辑和修复：**好的，我很抱歉，因为我的非正式描述似乎是，轻描淡写，令人困惑:) 这里有一些更正式的东西，然后 - 我希望现在问题的问题很清楚：

我们有 l 行 k 个整数，每行作为输入。每行由 {1, 2, ..., k} 序列的一些排列组成。我们将每行中的前 k/2 个整数视为“左侧”，将其他整数视为“右侧”。是否有任何整数 x, y 使得对于任何选定的线，它们总是位于同一侧（左侧或右侧），但不必从上到下位于同一侧（即 1 2 - 3 4, 3 4 - 1 2 完成了婚姻，因为 1 2 和 3 4 总是在一起 - 一次在左边，一次在右边）。

**第 2 次编辑**在我的头脑更加清醒之后，蛮力比较组合的想法似乎完全没有意义。假设我们有 k=100,000 - 那么，我们只需要在第一行输入之后管理近 25 亿个元素 - 然后，想象为第二行构建一个类似数量级的数组，并进行所有与交叉的比较-在第二行之后绝对没有结婚的那些。这需要非常长的时间，不是吗？

我想过以某种方式对双方的列求和，但这使得算法依赖于侧（即 1 2 - 3 4 与 4 3 - 2 1 不同，但事实并非如此）......事实上，我所有的想法都结束了向上依赖。可以用它做什么？

# php - 日历打不开

> ID：13512993
> 
> 赞同：2
> 
> 时间：2012-11-22T12:42:35.133
> 
> 标签：php, javascript

我有这个代码：

```
 <link href="http://www.eyecon.ro/bootstrap-datepicker/css/datepicker.css" rel="stylesheet">
 <script src="http://www.eyecon.ro/bootstrap-datepicker/js/jquery.js"></script>
    <script src="http://www.worldservice.ua/shared/con1//bootstrap-datepicker.js"></script>
    <script>
        $(function(){
            $('#ar').datepicker();
            $('#de').datepicker();
        });
    </script>
<div class="datepicker dropdown-menu"><div class="datepicker-days" style="display: block; "><table class=" table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">February 2012</th><th class="next">›&lt;/th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">29</td><td class="day old">30</td><td class="day old">31</td><td class="day">1</td><td class="day">2</td><td class="day">3</td><td class="day">4</td></tr><tr><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td><td class="day">11</td></tr><tr><td class="day">12</td><td class="day">13</td><td class="day">14</td><td class="day">15</td><td class="day active">16</td><td class="day">17</td><td class="day">18</td></tr><tr><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td><td class="day">25</td></tr><tr><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td></tr><tr><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td><td class="day new">8</td><td class="day new">9</td><td class="day new">10</td></tr></tbody></table></div><div class="datepicker-months" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2012</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="month">Jan</span><span class="month active">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span></td></tr></tbody></table></div><div class="datepicker-years" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2010-2019</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="year old">2009</span><span class="year">2010</span><span class="year">2011</span><span class="year active">2012</span><span class="year">2013</span><span class="year">2014</span><span class="year">2015</span><span class="year">2016</span><span class="year">2017</span><span class="year">2018</span><span class="year">2019</span><span class="year old">2020</span></td></tr></tbody></table></div></div><div class="datepicker dropdown-menu"><div class="datepicker-days" style="display: block; "><table class=" table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">February 2012</th><th class="next">›&lt;/th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">29</td><td class="day old">30</td><td class="day old">31</td><td class="day">1</td><td class="day">2</td><td class="day">3</td><td class="day">4</td></tr><tr><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td><td class="day">11</td></tr><tr><td class="day">12</td><td class="day">13</td><td class="day">14</td><td class="day">15</td><td class="day active">16</td><td class="day">17</td><td class="day">18</td></tr><tr><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td><td class="day">25</td></tr><tr><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td></tr><tr><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td><td class="day new">8</td><td class="day new">9</td><td class="day new">10</td></tr></tbody></table></div><div class="datepicker-months" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2012</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="month">Jan</span><span class="month active">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span></td></tr></tbody></table></div><div class="datepicker-years" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2010-2019</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="year old">2009</span><span class="year">2010</span><span class="year">2011</span><span class="year active">2012</span><span class="year">2013</span><span class="year">2014</span><span class="year">2015</span><span class="year">2016</span><span class="year">2017</span><span class="year">2018</span><span class="year">2019</span><span class="year old">2020</span></td></tr></tbody></table></div></div><div class="datepicker dropdown-menu"><div class="datepicker-days" style="display: block; "><table class=" table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">February 2012</th><th class="next">›&lt;/th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">29</td><td class="day old">30</td><td class="day old">31</td><td class="day">1</td><td class="day">2</td><td class="day">3</td><td class="day">4</td></tr><tr><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td><td class="day">11</td></tr><tr><td class="day active">12</td><td class="day">13</td><td class="day">14</td><td class="day">15</td><td class="day">16</td><td class="day">17</td><td class="day">18</td></tr><tr><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td><td class="day">25</td></tr><tr><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td></tr><tr><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td><td class="day new">8</td><td class="day new">9</td><td class="day new">10</td></tr></tbody></table></div><div class="datepicker-months" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2012</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="month">Jan</span><span class="month active">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span></td></tr></tbody></table></div><div class="datepicker-years" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2010-2019</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="year old">2009</span><span class="year">2010</span><span class="year">2011</span><span class="year active">2012</span><span class="year">2013</span><span class="year">2014</span><span class="year">2015</span><span class="year">2016</span><span class="year">2017</span><span class="year">2018</span><span class="year">2019</span><span class="year old">2020</span></td></tr></tbody></table></div></div><div class="datepicker dropdown-menu"><div class="datepicker-days" style="display: none; "><table class=" table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">February 2012</th><th class="next">›&lt;/th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">29</td><td class="day old">30</td><td class="day old">31</td><td class="day">1</td><td class="day">2</td><td class="day">3</td><td class="day">4</td></tr><tr><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td><td class="day">11</td></tr><tr><td class="day active">12</td><td class="day">13</td><td class="day">14</td><td class="day">15</td><td class="day">16</td><td class="day">17</td><td class="day">18</td></tr><tr><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td><td class="day">25</td></tr><tr><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td></tr><tr><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td><td class="day new">8</td><td class="day new">9</td><td class="day new">10</td></tr></tbody></table></div><div class="datepicker-months" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2012</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="month">Jan</span><span class="month active">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span></td></tr></tbody></table></div><div class="datepicker-years" style="display: block; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2010-2019</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="year old">2009</span><span class="year">2010</span><span class="year">2011</span><span class="year active">2012</span><span class="year">2013</span><span class="year">2014</span><span class="year">2015</span><span class="year">2016</span><span class="year">2017</span><span class="year">2018</span><span class="year">2019</span><span class="year old">2020</span></td></tr></tbody></table></div></div><div class="datepicker dropdown-menu"><div class="datepicker-days" style="display: none; "><table class=" table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">June 2012</th><th class="next">›&lt;/th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">27</td><td class="day old">28</td><td class="day old">29</td><td class="day old">30</td><td class="day old">31</td><td class="day active">1</td><td class="day">2</td></tr><tr><td class="day">3</td><td class="day">4</td><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td></tr><tr><td class="day">10</td><td class="day">11</td><td class="day">12</td><td class="day">13</td><td class="day">14</td><td class="day">15</td><td class="day">16</td></tr><tr><td class="day">17</td><td class="day">18</td><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td></tr><tr><td class="day">24</td><td class="day">25</td><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day">30</td></tr><tr><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td></tr></tbody></table></div><div class="datepicker-months" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2012</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="month">Jan</span><span class="month">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month active">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span></td></tr></tbody></table></div><div class="datepicker-years" style="display: block; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2010-2019</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="year old">2009</span><span class="year">2010</span><span class="year">2011</span><span class="year active">2012</span><span class="year">2013</span><span class="year">2014</span><span class="year">2015</span><span class="year">2016</span><span class="year">2017</span><span class="year">2018</span><span class="year">2019</span><span class="year old">2020</span></td></tr></tbody></table></div></div><div class="datepicker dropdown-menu"><div class="datepicker-days" style="display: block; "><table class=" table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">February 2012</th><th class="next">›&lt;/th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">29</td><td class="day old">30</td><td class="day old">31</td><td class="day">1</td><td class="day">2</td><td class="day">3</td><td class="day">4</td></tr><tr><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td><td class="day">11</td></tr><tr><td class="day">12</td><td class="day">13</td><td class="day">14</td><td class="day">15</td><td class="day">16</td><td class="day">17</td><td class="day">18</td></tr><tr><td class="day">19</td><td class="day active">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td><td class="day">25</td></tr><tr><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td></tr><tr><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td><td class="day new">8</td><td class="day new">9</td><td class="day new">10</td></tr></tbody></table></div><div class="datepicker-months" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2012</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="month">Jan</span><span class="month active">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span></td></tr></tbody></table></div><div class="datepicker-years" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2010-2019</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="year old">2009</span><span class="year">2010</span><span class="year">2011</span><span class="year active">2012</span><span class="year">2013</span><span class="year">2014</span><span class="year">2015</span><span class="year">2016</span><span class="year">2017</span><span class="year">2018</span><span class="year">2019</span><span class="year old">2020</span></td></tr></tbody></table></div></div><div class="datepicker dropdown-menu"><div class="datepicker-days" style="display: block; "><table class=" table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">February 2012</th><th class="next">›&lt;/th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">29</td><td class="day old">30</td><td class="day old">31</td><td class="day">1</td><td class="day">2</td><td class="day">3</td><td class="day">4</td></tr><tr><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td><td class="day">11</td></tr><tr><td class="day">12</td><td class="day">13</td><td class="day">14</td><td class="day">15</td><td class="day">16</td><td class="day">17</td><td class="day">18</td></tr><tr><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td><td class="day active">25</td></tr><tr><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td></tr><tr><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td><td class="day new">8</td><td class="day new">9</td><td class="day new">10</td></tr></tbody></table></div><div class="datepicker-months" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2012</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="month">Jan</span><span class="month active">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span></td></tr></tbody></table></div><div class="datepicker-years" style="display: none; "><table class="table-condensed"><thead><tr><th class="prev">‹&lt;/th><th colspan="5" class="switch">2010-2019</th><th class="next">›&lt;/th></tr></thead><tbody><tr><td colspan="7"><span class="year old">2009</span><span class="year">2010</span><span class="year">2011</span><span class="year active">2012</span><span class="year">2013</span><span class="year">2014</span><span class="year">2015</span><span class="year">2016</span><span class="year">2017</span><span class="year">2018</span><span class="year">2019</span><span class="year old">2020</span></td></tr></tbody></table></div></div>
 <script src="http://www.eyecon.ro/bootstrap-datepicker/js/jquery.js"></script>
    <script src="http://www.worldservice.ua/shared/con1//bootstrap-datepicker.js"></script>
    <script>
        $(function(){
            $('#ar').datepicker();
            $('#de').datepicker();
        });
    </script>
<?

/* Соединяемся с базой данных */
$hostname = "localhost"; // название/путь сервера, с MySQL
$username = "1"; // имя пользователя (в Denwer`е по умолчанию "root")
$password = "1"; // пароль пользователя (в Denwer`е по умолчанию пароль отсутствует, этот параметр можно оставить пустым)
$dbName = "1"; // название базы данных

/* Таблица MySQL, в которой хранятся данные */
$table = "confer_2";

if(isset($_POST['update'])){
    $update=$_POST['update'];
}
if(isset($_POST['fam1'])){
    $fam1=$_POST['fam1'];
}
if(isset($_POST['name1'])){
    $name1=$_POST['name1'];
}
if(isset($_POST['phone1'])){
    $phone1=$_POST['phone1'];
}
if(isset($_POST['email1'])){
    $email1=$_POST['email1'];
}
if(isset($_POST['job1'])){
    $job1=$_POST['job1'];
}
if(isset($_POST['state1'])){
    $state1=$_POST['state1'];
}
if(isset($_POST['city1'])){
    $city1=$_POST['city1'];
}
if(isset($_POST['addr1'])){
    $addr1=$_POST['addr1'];
}
if(isset($_POST['hotel1'])){
    $hotel1=$_POST['hotel1'];
}
if(isset($_POST['room1'])){
    $room1=$_POST['room1'];
}
if(isset($_POST['arr1'])){
    $arr1=$_POST['arr1'];
}
if(isset($_POST['dep1'])){
    $dep1=$_POST['dep1'];
}

/* Создаем соединение */
mysql_connect($hostname, $username, $password) or die ("Не могу создать соединение");
mysql_query("set collation_connection = 'cp1251_general_ci'");
mysql_query("set character_set_client='cp1251'");
mysql_query("set character_set_results='cp1251'");
mysql_query("set character_set_system='cp1251'");
mysql_query("SET NAMES UTF8");
/* Выбираем базу данных. Если произойдет ошибка - вывести ее */
mysql_select_db($dbName) or die (mysql_error());

/* Если была нажата кнопка редактирования, вносим изменения */
if(isset($_POST['submit_edit'])) {
$query = "UPDATE $table SET fam='$fam1', name='$name1', phone='$phone1', email='$email1', job='$job1', state='$state1', city='$city1', addr='$addr1', hotel='$hotel1', room='$room1', arr='$arr1', dep='$dep1' WHERE id='$update'";
/* Выполняем запрос. Если произойдет ошибка - вывести ее. */
mysql_query($query) or die (mysql_error());
}

/* Заносим в переменную $res всю базу данных */
$query = "SELECT * FROM $table ORDER BY fam";
/* Выполняем запрос. Если произойдет ошибка - вывести ее. */
$res = mysql_query($query) or die(mysql_error());
/* Узнаем количество записей в базе данных */
$row = mysql_num_rows($res);

/* Выводим данные из таблицы */
echo ("

");

/* Цикл вывода данных из базы конкретных полей */
while ($row = mysql_fetch_array($res)) {
    echo "<form action=\"?q=node/4\" method=\"post\" name=\"edit_form\">\n";
    echo "<input type=\"hidden\" name=\"update\" value=\"".$row["id"]."\" />\n";
    echo "<table class=\"table table-striped\">\n";
    echo "<tr height=\"2\">\n";
    echo "<td><b>#".$row["id"]."  ".$row['data']."</b></td>\n";
    echo "</tr><tr>\n";
    echo "<td>Фамилия:</td><td><input type=\"text\" value=\"".$row['fam']."\" name=\"fam1\" /></td>\n";
    echo "<td>Имя/Отчество:</td><td><input type=\"text\" value=\"".$row['name']."\" name=\"name1\" /></td>\n";
    echo "<td>Телефон:</td><td><input type=\"text\" value=\"".$row['phone']."\" name=\"phone1\" /></td>\n";
    echo "<td>Email:</td><td><input type=\"text\" value=\"".$row['email']."\" name=\"email1\" /></td>\n";
    echo "</tr><tr>\n";
    echo "<td>Место работы:</td><td><input type=\"text\" value=\"".$row['job']."\" name=\"job1\" /></td>\n";

    echo "<td>Должность:</td><td><input type=\"text\" value=\"".$row['state']."\" name=\"state1\" /></td>\n";

    echo "<td>Город:</td><td><input type=\"text\" value=\"".$row['city']."\" name=\"city1\" /></td>\n";

    echo "<td>Адрес:</td><td><input type=\"text\" value=\"".$row['addr']."\" name=\"addr1\" /></td>\n";
   echo "</tr><tr>\n";
echo "<td>Отель:</td><td><input type=\"text\" value=\"".$row['hotel']."\" name=\"hotel1\" /></td>\n";
echo "<td>Номер:</td><td><input type=\"text\" value=\"".$row['room']."\" name=\"room1\" /></td>\n";
echo "<td>Заезд:</td><td><input type=\"text\" class=\"span2\" value=\"".$row['arr']."\" data-date-format=\"dd/mm/yy\" name=\"arr1\" id=\"ar\"></td>\n";
echo "<td>Выезд:</td><td><input type=\"text\" class=\"span2\" value=\"".$row['dep']."\" data-date-format=\"dd/mm/yy\" name=\"dep1\" id=\"de\"></td>\n";
    echo "</tr><tr>\n";
    echo "<td colspan=\"8\" colspan=\"8\" align=\"center\" class=\"table table-bordered\"><input type=\"submit\" name=\"submit_edit\" class=\"btn btn-success\" value=\"Сохранить изменения\" /></td>\n";
    echo "</tr></table></form>\n\n";
}

/* Закрываем соединение */
mysql_close();

/* Выводим ссылку возврата */
/* echo ("<div style=\"text-align: center; margin-top: 10px;\"><a href=\"index.html\">Вернуться назад</a></div>"); */

?> 
```

但是日历仅在输入的第一个“块”中打开。在下一个“块”中，当我单击日历输入时，不会调用 javascript。我需要在哪里进行更改？

截屏：

![在此处输入图像描述](../Images/2a59bdbae2d73b110ca749d19b87fd95.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:49:35.687

我认为您具有相同的 ID，每个返回的行（在本例中为 106、157）具有相同的 ID（ar、de）

有两种选择：

**a) 当你调用 datepicker 时，使用类选择器**

```
<script>
$(function(){
  $('.date').datepicker();
});
</script>

<input type="text" class="date" /> 
```

**b) 用行 id 重命名 id**

您必须在脚本函数中指定每个行 ID 并制作不同的输入 ID，例如

```
echo '<input type="text" id="ar_'.$row['id'].'" />';
echo '<input type="text" id="de_'.$row['id'].'" />'; 
```

# c++ - 从 shell 命令 Linux 中读取值

> ID：13512998
> 
> 赞同：0
> 
> 时间：2012-11-22T12:42:41.703
> 
> 标签：c++, c, linux, shell

有没有更简单的方法来读取 Linux Shell 命令的输出，例如

```
ifconfig | grep "inet Adresse" | grep -v 127.0.0.1 | awk '{print $2}' | awk -F":" '{print $2}' 
```

比使用`popen()`

```
fp = popen(command, "r");

while(fgets(line, PATH_MAX, fp)!=NULL)
{
      //someoperations
}

pclose(fp); 
```

在某些操作之前和之后，我需要两次获取我的信息。

因为我的输出只有一条线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:33:46.490

我现在用过`popen()`，是最简单的方法谢谢@pce

```
fp = popen(fullCommand, "r");
while(fgets(line, PATH_MAX, fp) != NULL);
pclose(fp); 
```

线是类型

```
char line[PATH_MAX]; 
```

谢谢大家。