# StackOverflow 问答 16139000-16139999

# java - 基于 Spring mvc 注释的控制器 RequestMappingHandlerMapping 有什么问题？

> ID：16139008
> 
> 赞同：2
> 
> 时间：2013-04-22T03:33:51.140
> 
> 标签：java, spring, spring-mvc

我正在将我的一个应用程序从 Spring 工具套装 IDE 移植到纯 Eclipse Java EE IDE。在这个过程中，我正在重命名一些包并更改为基于 Maven。然后所有的控制器都不再工作了。

我认为注释控制器发现似乎坏了。没有使用 Spring 注册映射 url。

有谁知道问题是什么？

我从我的 STS（工作）中收集旧日志，它可以工作并且喜欢

```
> 2013-04-21 22:43:05,622 [Thread-1] DEBUG
> org.springframework.beans.factory.support.DefaultListableBeanFactory -
> Finished creating instance of bean
> 'org.springframework.web.servlet.handler.MappedInterceptor#2'
> 2013-04-21 22:43:05,623 [Thread-1] DEBUG
> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
> - Looking for request mappings in application context: WebApplicationContext for namespace 'HelloSpringroo2-servlet': startup
> date [Sun Apr 21 22:43:05 EDT 2013]; parent: Root
> WebApplicationContext 2013-04-21 22:43:05,653 [Thread-1] INFO 
> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
> - Mapped "{[/account/create],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}"
> onto public java.lang.String
> com.hellospringroo.controllers.AccountController.createAccountActionDisplay(org.springframework.ui.Model)
> 2013-04-21 22:43:05,653 [Thread-1] INFO 
> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
> - Mapped "{[/account/view/{account_Id}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}"
> onto public java.lang.String
> com.hellospringroo.controllers.AccountController.viewAccountActionDisplay(int,org.springframework.ui.Model)
> throws java.lang.Exception 
```

然后我从 Eclipse 收集日志（问题一）

```
> 2013-04-21 22:48:04,900 [http-bio-8080-exec-3] DEBUG
> org.springframework.web.servlet.DispatcherServlet - DispatcherServlet
> with name 'Education' processing GET request for [/Education/]
> 2013-04-21 22:48:04,901 [http-bio-8080-exec-3] DEBUG
> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
> - Looking up handler method for path / 2013-04-21 22:48:04,901 [http-bio-8080-exec-3] DEBUG
> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
> - Did not find handler method for [/] 2013-04-21 22:48:04,904 [http-bio-8080-exec-3] DEBUG
> org.springframework.web.servlet.handler.SimpleUrlHandlerMapping -
> Mapping [/] to HandlerExecutionChain with handler
> [org.springframework.web.servlet.mvc.ParameterizableViewController@54bbb2d0]
> and 1 interceptor 2013-04-21 22:48:04,905 [http-bio-8080-exec-3] DEBUG
> org.springframework.web.servlet.DispatcherServlet - Last-Modified
> value for [/Education/] is: -1 2013-04-21 22:48:04,914
> [http-bio-8080-exec-3] DEBUG
> org.springframework.beans.factory.support.DefaultListableBeanFactory -
> Invoking afterPropertiesSet() on bean with name 'index' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:45:39.050

您的：

```
<context:component-scan base-package="old.package.name" /> 
```

现在应该是

```
<context:component-scan base-package="new.package.name" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:26:02.623

您有没有将 Spring jar 的版本从 3.0 更改为 3.2 或从 3.2.M1 从 3.2.2 等更改？

我有类似的问题（不确切），但这对我有用。

旧版本 `@Controller("\abc")`带有处理程序 Method `@RequestMapping("\pqr")`。处理的网址是`\abc\pqr`

对于不起作用的新版本，我必须将其更改为 `@Controller @RequestMapping ("\abc")`然后处理程序方法映射与上述相同。或者在处理程序方法上使用完整的 url 映射，而不是在控制器级别，例如`@RequestMapping("\abc\pqr")`在方法级别。

# python - ssh 使用 python 和 paramiko 模块

> ID：16139012
> 
> 赞同：0
> 
> 时间：2013-04-22T03:34:26.877
> 
> 标签：python, paramiko

这是我的第一篇文章，我对 python 和 paramiko 非常陌生。我的要求是：

*   ssh server1.com
*   从 server1 SSH 到 server2.com
*   ssh 从 server2 到 server3.com
*   在 server3.com 上运行多个 UNIX 命令，例如 declog、decrypt、scp、grep 等......最后创建 .tgz 文件
*   将 .tgz 文件从 server3 移动到 server2 到 server1 到本地

我做了谷歌，发现带有 paramiko 模块的 python 脚本可以完成这项工作。我能够 ssh 到 server1，但不知道如何 ssh server2 和 server3。

代码：

```
 ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.load_host_keys("/cygwin/home/skhome/.ssh/known_hosts")
    privkey = paramiko.RSAKey.from_private_key_file ("/cygwin/home/skhome/.ssh/id_rsa")
    ssh.connect('server1.com', username='sk000g',pkey=privkey )
    # Not sure how to connect sever2, server3 and execute UNIX commands 
```

谢谢，沙阿

# jquery - 无限滚动搜索查询

> ID：16139018
> 
> 赞同：0
> 
> 时间：2013-04-22T03:35:54.960
> 
> 标签：jquery

我刚刚从一个网站下载了这段代码。它用于无限滚动。我正在尝试将其用于搜索查询，但没有按预期工作。

```
<script type="text/javascript">
function loadData(pageLimit){
     $(".flash").show();
     $(".flash").fadeIn(400).html
            ('Loading <img src="image/ajax-loading.gif" />');
     var dataString = 'pageLimit='+ pageLimit;
     $.ajax({
             type: "POST",
             url: "pageData.php",
            data: dataString,
            cache: false,
            success: function(result){ 
            $(".flash").hide();
            $(".load_more_link").addClass('noneLink');
            $("#pageData").append(result);
      }
  });
}
  loadData('0');
</script> 
```

我是这样想的。

```
var dataString = 'pageLimit='+ pageLimit + 'search='+ SearchString; 
```

并且该**搜索**将被传递给 pageData.php 但它没有返回任何值。

这里可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:41:22.890

您的数据字符串错误，不同的参数必须由`&`.

```
var dataString = 'pageLimit='+ pageLimit + '&search='+ SearchString; 
```

但我建议将参数作为对象传递给`ajax()`

```
$.ajax({
    type: "POST",
    url: "pageData.php",
    data: {
        pageLimit: pageLimit,
        search: SearchString
    },
    cache: false,
    success: function(result){ 
        $(".flash").hide();
        $(".load_more_link").addClass('noneLink');
        $("#pageData").append(result);
    }
}) 
```

# php - 如何为目录中的任何 HTTP 请求加载我的 PHP 文件？

> ID：16139022
> 
> 赞同：0
> 
> 时间：2013-04-22T03:36:26.150
> 
> 标签：php, apache, mod-rewrite, proxy

我有一个代理，我用 PHP 编写了一段时间。

现在，`www.mysite.com/proxy/?folder/page.html`在我的服务器上请求一个 url 将返回页面`www.theirsite.com/folder/page.html`。

我基本上让我的`index.php`文件使用过去`/proxy/?`的所有内容作为`www.theirsite.com`. 任何图像都会复制到文件夹中，并且标签`/proxy/images/`的 src 属性也会相应更改。`<img>`这一切都很好。

现在我想改变我的脚本，这样我就不再需要`?`了。但是，该 url`www.mysite.com/proxy/folder/page.html`会导致一个 HTTP 请求`page.html`，该请求在我的服务器上不存在。

这不是我想要的。我需要`index.php`被加载，所以它可以返回页面`www.theirsite.com/folder/page.html`。为此，我想我需要使用 Apache 的 mod_rewrite，它与我的 WordPress 安装一起使用。

我需要在我的 .htaccess 文件中正确执行此操作，同时仍允许访问目录中存在的`/proxy/images/`文件？这会影响`$_SERVER['REQUEST_URI']`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:25:05.860

```
RewriteEngine on
RewriteRule   ^/$  /index.php  [R] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:44:22.897

好吧，我让它按我想要的方式工作。这是我的 .htaccess 文件的全部内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /proxy/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /proxy/index.php [L]
</IfModule> 
```

现在对于 url `www.mysite.com/proxy/folder/page.html`，`index.php`已加载并`$_SERVER['REQUEST_URI']`返回`/proxy/folder/page.html`。文件夹或任何子文件夹中实际存在的`/proxy/`文件不会重写为`index.php`，这是我想要的。

# c - 在代码的一部分中包含/或不包含 ++i。K&R 最长线示例

> ID：16139026
> 
> 赞同：0
> 
> 时间：2013-04-22T03:36:43.810
> 
> 标签：c

```
int getline(char s[], int lim) 
{
    int c, i;

    for(i=0; i<lim-1 && (c=getchar())!=EOF && c!='\n'; ++i)
        s[i] = c;
    if(c=='\n'){
        s[i] = c;
        ++i;
    }
    s[i] = '\0';

return i;
} 
```

这个例子来自 K&R 关于 C 的书，第 1.9 章关于数组。我不明白的是为什么我们必须接受`++i`内部`if`声明？在外面写应该做同样的工作。

```
 if(c=='\n')
        s[i] = c;
    ++i;
    s[i] = '\0'
return 0;
} 
```

如果包含`i`程序按预期工作，但在第二种情况下（我认为它应该做同样的工作，这就是我编辑该部分的原因）它没有。我通过调试器运行它并观察`i`在这两种情况下都正确计算并返回。但是，如果不包含，程序仍然无法运行`++i`。我没有从`printf`语句中得到我的打印，而且 Ctrl+D 在终端或 XTerm 中不起作用（彻底的 CodeBlocks）我不知道为什么。请问有什么提示吗？我错过了一些合乎逻辑的步骤吗？这是一个完整的代码：

```
//Program that reads lines and prints the longest
/*----------------------------------------------------------------------------*/

#include <stdio.h>
#define MAXLINE 1000

int getline(char currentline[], int maxlinelenght);
void copy(char saveto[], char copyfrom[]);
/*----------------------------------------------------------------------------*/

int main(void)
{
    int len, max;
    char line[MAXLINE], longest[MAXLINE];

    max = 0;
    while( (len = getline(line, MAXLINE)) > 0 )
        if(len > max){
            max = len;
            copy(longest, line);
        }
    if(max > 0)
        printf("StrLength:%d\nString:%s", max, longest);

return 0;
}
/*----------------------------------------------------------------------------*/

int getline(char s[], int lim) 
{
    int c, i;

    for(i=0; i<lim-1 && (c=getchar())!=EOF && c!='\n'; ++i)
        s[i] = c;
    if(c=='\n'){
        s[i] = c;
        ++i;
    }
    s[i] = '\0';

return i;
}
/*----------------------------------------------------------------------------*/

void copy(char to[], char from[])
{
    int i;

    i = 0;
    while( (to[i]=from[i]) != '\0')
        ++i;
}
/*----------------------------------------------------------------------------*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:43:53.890

该行
`if(c == '\n')` 相当于
`if(c != EOF)`

这是否有助于解释为什么会发生拥抱？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:22:08.163

指定的索引`i`是当该行没有更多输入时应放置终止空值的位置。索引之前的位置`i`包含字符串中的最后一个有效字符。

请记住，读取数据的循环可能会因读取字符`stdin`以外的原因而终止。`\n`

如果你有这个构造：

```
if(c=='\n')
    s[i] = c;
++i; 
```

然后，如果从中读取的最后一个字符`stdin`不是换行符，您将索引加一，而无需将任何内容写入`i`. 您将有效地在结果中添加一个未指定的字符。

更糟糕的是（？），如果`for`循环由于`i<lim-1`条件而终止，您最终会在数组的指定结尾之后写入终止的空字符，从而导致未定义的行为（内存损坏）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T03:41:46.877

那里有一个逻辑：

```
if(c=='\n'){
    s[i] = c;
    ++i;
} 
```

这意味着只有当您阅读额外的换行符时，您才需要再增加`i`一个以保留`\0`字符空间。如果你放在块`++i`外`if`。这意味着即使没有，它也总是会`i` 增加，在这种情况下，由于已经在 中增加，因此已经有 的空间，因此，再次将是错误的。您可以打印 的值并查看它是如何工作的。`1``newline input``i``for loop``\0``++i``i`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T03:41:27.713

`++i`is 在语句中，因为如果我们不将字符放在当前索引中，我们`if`不想增加；这将导致在输入的最后一个字符和字符串的末尾之间留下一个索引。`i``\n``\0`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T03:46:20.863

由于 3 个条件，for 循环可以退出 1\. 达到读取字符限制或遇到 EOF 2\. 遇到新行

对于第一种情况，我们需要将 Null 存储到字符串 s 中，因为 i 指向最后读取的有效字符的下一个位置，因此无需增加 i。但是对于第二种情况，当 i 指向最后读取的有效字符的下一个位置时，我们现在在该位置存储换行符，然后递增 i 以存储 NULL 字符。

这就是为什么我们需要在第二种情况下而不是在第一种情况下增加 i 。

```
 if(c=='\n'){
            s[i] = c;
            ++i;
        } 
```

# java - Java RGB 值代码机器人类

> ID：16139030
> 
> 赞同：0
> 
> 时间：2013-04-22T03:37:20.910
> 
> 标签：java, class, rgb, awtrobot

我的代码在这里：

```
package RGBValues;

import java.awt.Color;
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.PointerInfo;
import java.awt.Robot;

public class RGBValues {

    public static void main(String[] args) throws Exception {
        PointerInfo pointer;
        pointer = MouseInfo.getPointerInfo();
        Point coord = pointer.getLocation();

        Robot robot = new Robot();
        robot.delay(2000);

        while(true) {
            coord = MouseInfo.getPointerInfo().getLocation()…
            Color color = robot.getPixelColor((int)coord.getX(), (int)coord.getY());
            if( color.getGreen() == 255 &&
                color.getBlue() == 255 &&
                color.getRed() == 255
            ) {
                System.out.println("WHITE");
            }
            robot.delay(1000);
        }
    }
} 
```

我一直坚持如何制作它，以便鼠标指向屏幕上的任何位置，它都会向我显示指针下方该像素的 RGB 值。有人可以帮忙吗？我对java很陌生，所以我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:20:44.587

除了可能让线程有点狂野之外，我看不出你的代码不能工作的任何原因......

![在此处输入图像描述](https://i.stack.imgur.com/WVGlR.png)

```
import java.awt.AWTException;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.HeadlessException;
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.PointerInfo;
import java.awt.Robot;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class WhatsMyColor {

    public static void main(String[] args) {
        new WhatsMyColor();
    }

    public WhatsMyColor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            Thread thread = new Thread(new BackgroundMonitor());
            thread.setDaemon(true);
            thread.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            Color color = getBackground();
            String text = color.getRed() + "x" + color.getGreen() + "x" + color.getBlue();
            FontMetrics fm = g.getFontMetrics();
            int x = (getWidth() - fm.stringWidth(text)) / 2;
            int y = ((getHeight() - fm.getHeight()) / 2) + fm.getAscent();
            g.drawString(text, x, y);
        }

        public class BackgroundMonitor implements Runnable {

            @Override
            public void run() {
                try {
                    Robot robot = new Robot();

                    Color previous = null;
                    while (true) {
                        Point coord = MouseInfo.getPointerInfo().getLocation();
                        Color color = robot.getPixelColor((int) coord.getX(), (int) coord.getY());
                        if (previous == null || !previous.equals(color)) {
                            SwingUtilities.invokeLater(new UpdateBackgroud(color));
                        }
                        try {
                            Thread.sleep(250);
                        } catch (InterruptedException ex) {
                        }
                    }
                } catch (AWTException | HeadlessException exp) {
                    exp.printStackTrace();
                }
            }
        }

        public class UpdateBackgroud implements Runnable {

            private Color color;

            public UpdateBackgroud(Color color) {
                this.color = color;
            }

            @Override
            public void run() {
                setBackground(color);
            }

        }
    }
} 
```

# .net - 如何使 MCR 启动时间快

> ID：16139033
> 
> 赞同：5
> 
> 时间：2013-04-22T03:37:41.970
> 
> 标签：.net, matlab, dll, matlab-deployment

我将我的 matlab 程序转换为 .net 程序集，即 dll 文件。我制作了一个控制台 C# 应用程序，添加了 dll 文件并从 php 调用它。每次调用 .exe 时都会调用 MCR。我怎样才能让 MCR 在服务器启动时初始化，而不是每次都关闭，即使 exe 在一定时间后被调用？如果有任何其他方法可以加快这个过程，请建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T05:41:53.913

你不能直接在这里做很多事情。MCR架构启动成本高；对于反复调用的短期运行程序来说，这不是很好。

您可以通过以下方式使其更快：

*   确保 MCR 在每台运行它的机器上本地安装
*   为已编译的 Matlab 程序预扩展 CTF 存档
*   在每台运行它的机器上本地部署你的编译程序
*   购买固态硬盘
*   定期在后台虚拟运行您的程序，以确保其文件在磁盘缓存中保持“温暖”。

但这些可能不会让你超快；几乎可以肯定对于合理的页面加载时间不够快。

为了真正快速地获得它，您可能需要将您的程序架构更改为客户端/服务器架构，在其中启动一个持久服务器进程，其中运行您的 MCR 代码，并为您的 PHP 客户端提供请求。您需要进行额外的编码以确保在“干净”的上下文中为请求提供服务。

您还可以将 MCR dll 加载到您的 Web 服务器中，以便它在服务器生命周期内持续存在。这将是一个更简单的设置，但您可能会受到单线程 Matlab 会话的限制，并且必须处理为每个请求获取一个干净的起点。

MathWorks 的解决方案是新的[Matlab 生产服务器](http://www.mathworks.com/products/matlab-production-server/)，它可以将已编译的 MCR 代码加载到工作池中，并为来自预热的预加载 Matlab 工作实例的客户端 M 代码请求提供服务。它正好解决了 MCR 应用程序的这个问题。*这种或 DIY 客户端/服务器方法的要点是在客户端请求发生之前*在 Matlab 会话中“启动”您的 MCR 代码，因此您的客户永远不会看到高昂的 MCR 启动成本。

编辑：有一个关于将 MCR 组件部署到 Web 的完整 MathWorks 指南，即[MATLAB 应用程序部署 Web 示例指南](http://www.mathworks.com/help/pdf_doc/compiler/example_guide.pdf)，它不仅仅使用 Matlab 生产服务器。看起来他们大多说去客户端/服务器，但您也可以直接在 Web 服务器中加载 MCR 组件以实现低负载水平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-02T10:57:24.797

[作为上述答案](https://stackoverflow.com/a/16140157/553909)中所有内容的补充，我可以建议设置 RAM 驱动器，并将`MCR_CACHE_ROOT`系统变量设置为 RAM 驱动器上的目录。

这将显着改善进一步的启动时间。

如果有人在桌面上使用此方案，请确保您的 RAM 驱动器在重新启动期间保持不变。

# iphone - 如何访问secureTextEntry以供进一步使用？

> ID：16139040
> 
> 赞同：1
> 
> 时间：2013-04-22T03:38:12.630
> 
> 标签：iphone, ios, objective-c, ios5, ios4

您好我正在使用下面的代码，其中包括包含 UserID 和 Password 字段的 alertView。

这些 UserID 和 Password 是文本字段，我将密码字段设置为安全的，但是当我稍后想要访问在密码字段中输入的数据时，它在密码字段中显示没有值..

我的代码是

```
 self.loginPassword = [[ UIAlertView alloc] initWithTitle:@"Please Login" message:@"Enter Valid UserID and Password\n\n\n\n" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Cancel", nil];
    //[self.loginPassword setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];

    self.userIDText = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 80.0, 260.0, 25.0)];
    self.userIDText.text=@"";
    [self.userIDText setBackgroundColor:[UIColor whiteColor]];
    [self.userIDText setKeyboardAppearance:UIKeyboardAppearanceAlert];
    [self.userIDText setAutocorrectionType:UITextAutocorrectionTypeNo];
    [self.userIDText setTextAlignment:UITextAlignmentLeft];

    self.passwordField = [[UITextField alloc] initWithFrame:CGRectMake(12.0,115.0, 260.0, 25.0)];
    self.passwordField.text=@"";
    [self.passwordField setBackgroundColor:[UIColor whiteColor]];
    [self.passwordField setKeyboardAppearance:UIKeyboardAppearanceAlert];
    [self.passwordField setAutocorrectionType:UITextAutocorrectionTypeNo];
    [self.passwordField setTextAlignment:UITextAlignmentLeft];

    [self.loginPassword addSubview:self.userIDText];
    [self.loginPassword addSubview:self.passwordField];
    self.passwordField.secureTextEntry = YES;
    [self.loginPassword setTag:2];
    [self.loginPassword show];
    [self.loginPassword release]; 
```

请给我一些解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:58:09.427

创建和内置`UIAlertView`

```
UIAlertView *alert = [[UIAlertView alloc] init];
// Define Alertview Type to Login&Password
[alert setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
// Set Delegate to access Input Value
[alert setDelegate:self];
// show it
[alert show]; 
```

`Delegate`在你`interface`（.h 文件）中设置在你的（.m 文件）`UIAlertViewDelegate` 中实现这个委托方法`implementation`

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // Access your Username & Password from alertview and store them for further use.
    NSString *username = [[alertView textFieldAtIndex:0] text];
    NSString *password = [[alertView textFieldAtIndex:1] text];

    NSLog(@"Username : %@ , Password : %@",username, password);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:01:22.967

这可能会对您有所帮助。只需看一下代码。

[https://github.com/josecastillo/EGOTextFieldAlertView](https://github.com/josecastillo/EGOTextFieldAlertView)

# jquery - Jquery Mobile 固定范围滑块

> ID：16139042
> 
> 赞同：0
> 
> 时间：2013-04-22T03:38:35.333
> 
> 标签：jquery, html, jquery-mobile

我浏览了移动 Jquery 网站以及文档和 API，但找不到任何适合我要求的信息

我想要这个链接[http://jquerymobile.com/demos/1.3.0-rc.1/docs/demos/widgets/sliders/rangeslider.html中的滑块之类的东西](http://jquerymobile.com/demos/1.3.0-rc.1/docs/demos/widgets/sliders/rangeslider.html)

但是，我想要固定面额，例如以 100、500、1000、1500 等开头。滑块应首先停在 100，然后移动到 500 或 1000 或 1500。

我不想要他们之间的教派。

我搜索了很多但从来没有运气，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:54:08.147

您可以`step`为此使用该属性。

`<input type="range" name="slider-1" id="slider-1" value="100" min="100" max="1500" step="500" />`

[在此页面](http://api.jquerymobile.com/slider/)上搜索“步骤” 。尽管给出的示例标记似乎缺少实际`step`属性。查看工作示例的页面源代码确实揭示了这一点。

# macos - 哪个文件丢失？“i686-apple-darwin11-llvm-g++-4.2：没有这样的文件或目录”

> ID：16139044
> 
> 赞同：1
> 
> 时间：2013-04-22T03:38:41.407
> 
> 标签：macos, g++

我的编译器出现以下错误：

```
g++ -c -m32 tracecone.cpp -I/usr/X11R6/include -I/usr/X11/include/GL -I/Users/owner/Documents/raytrace/Graphics -I../RayTrace -I/Users/owner/Documents/raytrace/Graphics -I/Users/owner/Documents/raytrace/VrMath -I/Users/owner/Documents/raytrace/OpenglRender -I/Users/owner/Documents/raytrace/RaytraceMgr 
g++ -o -m32 tracecone  ../RayTrace/RayTraceData.o tracecone.o  /Users/owner/Documents/raytrace/OpenglRender/GlutRenderer.o /Users/owner/Documents/raytrace/RaytraceMgr/SceneDescription.o  -L/usr/X11/lib -L/usr/X11R6/lib -L/Users/owner/Documents/raytrace/Graphics -L/Users/owner/Documents/raytrace/VrMath -lglut -lGLU -lGL -lX11 -lXext -lXmu -lXext -lXmu -lXt -lXi -lSM -lICE -lraygraph -lvrmath
i686-apple-darwin11-llvm-g++-4.2: tracecone: No such file or directory
make: *** [tracecone] Error 1 
```

但是，我不确定它所说的哪个文件不存在。这是什么意思`tracecone`？或库文件之一？不管怎样，看起来一切都在它应该在的地方。

什么可能导致此错误？

这是我的制作文件：

```
PROG    = tracecone
RBASE= /Users/owner/Documents/raytrace
GDIR=$(RBASE)/Graphics
MDIR=$(RBASE)/VrMath
ODIR=$(RBASE)/OpenglRender
MANDIR=$(RBASE)/RaytraceMgr

CFLAGS  = -w -s -O2 -ansi -DSHM 
XLIBS   = -lX11 -lXext -lXmu -lXext -lXmu -lXt -lXi -lSM -lICE
LIBS    = -lglut -lGLU -lGL
RAYLIBS = -lraygraph -lvrmath
INCLS   = -I/usr/X11R6/include -I/usr/X11/include/GL
INCL1   = -I$(GDIR) -I../RayTrace -I$(GDIR) -I$(MDIR) -I$(ODIR) -I$(MANDIR) 
LIBDIR  = -L/usr/X11/lib -L/usr/X11R6/lib -L$(GDIR) -L$(MDIR)
#source codes
SRCS = $(PROG).cpp 

#substitute .cpp by .o to obtain object filenames
OBJS = $(SRCS:.cpp=.o)
#in ../Graphics
OBJOD = $(ODIR)/GlutRenderer.o
OBJO = GlutRenderer.o
OBJMAND = $(MANDIR)/SceneDescription.o
OBJMAN = SceneDescription.o
OBJ_temp = ../RayTrace/RayTraceData.o

#$< evaluates to the target's dependencies, 
#$@ evaluates to the target

$(PROG): $(OBJS)  
    g++ -o -m32 $@  $(OBJ_temp) $(OBJS)  $(OBJOD) $(OBJMAND)  $(LIBDIR) $(LIBS) $(XLIBS) $(RAYLIBS)

$(OBJS): 
    g++ -c -m32 $*.cpp $(INCLS) $(INCL1)

$(OBJ1):
    cd $(GDIR); g++ -m32 -c $*.cpp $(INCLS)

$(OBJM):
    cd $(MDIR); g++ -m32 -c $*.cpp $(INCLS)

$(OBJO):
    cd $(ODIR); g++ -m32 -c $*.cpp $(INCLS)

$(OBJMAN):
    cd $(MANDIR); g++ -m32 -c $*.cpp $(INCLS)
clean:
    rm $(OBJS) 

clean1:
    rm $(OBJD1) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:40:30.257

您应该将目标放在 -o 标志之后： `g++ -o $@ -m32 ...`
标志 -o 表示输出，如果`g++ -o tracecone ...`您指定`tracecone`为输出，但如果`g++ -o -m32 tracecone ...`您指定`-m32`为输出和`tracecone`目标文件之一。而 g++ 说没有这样的目标文件，因为实际上没有这样的文件。

# sql-server - 在 sql server 2012 中导出数据

> ID：16139048
> 
> 赞同：0
> 
> 时间：2013-04-22T03:39:09.027
> 
> 标签：sql-server, export-to-excel

我正在尝试从我在 SQL Server 2012 中创建的数据库中导出数据，以便我可以将其带到学校并将其全部复制到那里的主服务器。我在计算机实验室的校园里看到了如何做到这一点，但是每当我右键单击表格并选择任务>导出时，任务都没有选项。我也不能只生成我必须右键单击表的脚本，脚本表为>创建到>新查询。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:08:04.987

右键单击 SSMS 对象资源管理器中的数据库节点（您可能正在右键单击没有“导出”的表节点）（我假设您正在谈论 SQL Server Management Studio）

这是一个屏幕截图（Microsoft SQL Server Management Studio 10.0.2531.0）：

![在此处输入图像描述](https://i.stack.imgur.com/qih75.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:30:15.473

右键单击数据库->单击攻击->选择您的数据库...

确保应该从该系统进行数据库备份......然后只有它才能工作..如果你从其他系统复制意味着它不会工作..

# java - Java 7 Try-With-Resources (AutoCloseable) 实现

> ID：16139051
> 
> 赞同：3
> 
> 时间：2013-04-22T03:39:13.797
> 
> 标签：java, stream, try-catch, java-7

我的问题更多是*Why*类型而不是*How*。

我知道在 Java 7 中以下工作：

```
 try (
            FileInputStream in = new FileInputStream(source);
            FileOutputStream out = new FileOutputStream(target);
    ) {
        .....................
      } catch (......) {
       ...............
      } 
```

以下给出了语法错误：

```
 FileInputStream in;
    FileOutputStream out;
    try (
            in = new FileInputStream(source);
            out = new FileOutputStream(target);
    ) {
        .....................
      } catch (......) {
       ...............
      } 
```

我很好奇为什么`Closable`/`Autoclosable`引用在块的**本地**`try`如此重要？*如果我们不拥有它，那么关闭它是危险*的逻辑吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T04:05:27.170

对于这种语言设计决策，我没有参考资料，但我认为问题在于允许自动关闭非局部变量会很危险——也就是说，它会允许许多不安全的编码风格。来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.3)：

> 如果在 ResourceSpecification 中声明的资源未显式声明为 final，则它被隐式声明为 final（第 4.12.4 节）。

如果资源不是`final`，那么在`try`块内它们可能会被重新分配，从而导致资源泄漏。由于它们是（隐式或显式）`final`，因此编译器将不得不做很多额外的工作来确保在输入资源规范时[绝对未分配变量。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)`try`它可能还需要更改 的编译器语义，因为在块退出`final`后变量确实不应该具有有效值；当然不是资源规范`try`中分配给它们的值。`try`最干净的（也许是唯一的）事情是在`try`块退出时使变量超出范围。

# python - 基本 Python 列表

> ID：16139054
> 
> 赞同：0
> 
> 时间：2013-04-22T03:39:24.407
> 
> 标签：python

我需要有关如何找到哪个测试的数字最低的帮助。这段代码将有助于解释。

```
test_list=[]
numbers_list=[]

while True:
    test=raw_input("Enter test or (exit to end): ")
    if test=="exit":
        break
    else:
        test_numbers=input("Enter number: ")
        test_list.append(test)
        numbers_list.append(test_numbers) 
```

如果`test_list=['Test1','Test2','Test3']`和`numbers_list=[2,1,3]`

我将如何打印 Test2 的数字最小？因为Test2 = 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:42:27.687

1.  找到与最小元素对应 `i`的索引：`numbers_list`
    *   [Python：在浮动列表中查找最小项目的索引](https://stackoverflow.com/q/13300962/139010)
    *   [Python查找列表中最大值的索引](https://stackoverflow.com/q/11530799/139010)
    *   [获取长向量中最小值索引的有效方法，python](https://stackoverflow.com/q/6044645/139010)
    *   [如何在列表中找到最大值的所有位置？](https://stackoverflow.com/q/3989016/139010)
2.  取回`test_list[i]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T03:51:24.107

您可以使用`zip`将它们压缩在一起：

```
>>> zip(numbers_list, test_list)
[(2, 'Test1'), (1, 'Test2'), (3, 'Test3')] 
```

然后使用`min`找到最小的对：

```
>>> min(zip(numbers_list, test_list))
(1, 'Test2') 
```

最后，您可以拆分这对：

```
>>> number, test = min(zip(numbers_list, test_list))
>>> number      
1
>>> test
'Test2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:18:41.057

我相信您会希望使用字典。它看起来像这样..

```
aDict = {'1':'meh','2':'foo'}

sortedDict = sorted(aDict)

lowestValue = sortedDict[0]

print lowestValue 
```

# vb.net - 从数据表中查找重复列并将它们添加到另一个数据表

> ID：16139055
> 
> 赞同：0
> 
> 时间：2013-04-22T03:39:37.643
> 
> 标签：vb.net, datatable, duplicates

我有一个六行多列的数据表。列命名为 Operation1、folder1、quantity1、OPeration2、folder2、quantity2 等... 代码如下：

```
 Dim dt As New DataTable

    'adding columns to the datatble
    For i = 1 To 60
        dt.Columns.Add("Operation" & i)
        dt.Columns.Add("folder" & i)
        dt.Columns.Add("quantity" & i)
    Next

    'adding datarows
    Dim dr1 As DataRow = dt.NewRow
    Dim dr2 As DataRow = dt.NewRow
    Dim dr3 As DataRow = dt.NewRow
    Dim dr4 As DataRow = dt.NewRow
    Dim dr5 As DataRow = dt.NewRow
    Dim dr6 As DataRow = dt.NewRow

    For i = 1 To 10
        dr1("Operation" & i) = GroupBox1.Controls("l1ob" & i)
        dr1("Folder" & i) = GroupBox1.Controls("l1f" & i)
        dr1("Quantity" & i) = GroupBox1.Controls("l1Qty" & i)
        dr2("Operation" & i) = GroupBox2.Controls("l2ob" & i)
        dr2("Folder" & i) = GroupBox2.Controls("l2f" & i)
        dr2("Quantity" & i) = GroupBox2.Controls("l2Qty" & i)
        dr3("Operation" & i) = GroupBox3.Controls("l3ob" & i)
        dr3("Folder" & i) = GroupBox3.Controls("l3f" & i)
        dr3("Quantity" & i) = GroupBox3.Controls("l3Qty" & i)
        dr4("Operation" & i) = GroupBox4.Controls("l5ob" & i)
        dr4("Folder" & i) = GroupBox4.Controls("l5f" & i)
        dr4("Quantity" & i) = GroupBox4.Controls("l5Qty" & i)
        dr5("Operation" & i) = GroupBox5.Controls("l6ob" & i)
        dr5("Folder" & i) = GroupBox5.Controls("l6f" & i)
        dr5("Quantity" & i) = GroupBox5.Controls("l6Qty" & i)
        dr6("Operation" & i) = GroupBox6.Controls("l4ob" & i)
        dr6("Folder" & i) = GroupBox6.Controls("l4f" & i)
        dr6("Quantity" & i) = GroupBox6.Controls("l4Qty" & i)
    Next

    'adding the rows to the datatble
    dt.Rows.Add(dr1)
    dt.Rows.Add(dr2)
    dt.Rows.Add(dr3)
    dt.Rows.Add(dr4)
    dt.Rows.Add(dr5)
    dt.Rows.Add(dr6) 
```

我现在需要做的是在六行中的任何一行中找到重复的文件夹列，并总结相应的数量列并存储文件夹名称和总量以供以后检索......有没有办法实现这一点？请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:14:44.453

这是从 DataColumn 中检索列名的方法：

```
dt.Columns(1).ColumnName 
```

要获取 DataTable 中所有 DataColumns 的名称：

```
Dim name(dt.Columns.Count) As String
Dim i As Integer = 0
For Each column As DataColumn In DT.Columns
  name(i) = column.ColumnName
  i += 1
Next 
```

您可以对名称数组执行搜索以查找匹配的列名并添加数量。

# cocoa - 将 NSGradient 转换为 NSColor

> ID：16139065
> 
> 赞同：1
> 
> 时间：2013-04-22T03:40:50.743
> 
> 标签：cocoa, nscolor, nsgradient

是否可以将 NSGradient 转换为 NSColor

```
- (void) viewWillDraw {
    NSGradient *grad = [[NSGradient alloc] initWithStartingColor:[NSColor lightGrayColor]    endingColor:[NSColor darkGrayColor]];
    [super setBackgroundColor:*gradient*;
} 
```

这是我的方法，我希望能够将 NSGradient 作为 NSColor 传递，显然我不能，有没有办法将它转换为一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:57:13.753

在 10.8 上，您可以按以下顺序创建：

1.  一个可以随心所欲地绘制渐变的块。
2.  [由块支持的图像。](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/occ/clm/NSImage/imageWithSize%3aflipped%3adrawingHandler%3a)
3.  [将图像重复为图案的颜色。](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSColor_Class/Reference/Reference.html#//apple_ref/occ/clm/NSColor/colorWithPatternImage%3a)

通过这种方式，您可以创建一种看起来像任何东西的颜色，包括渐变。

也就是说，如果您尝试让渐变适应背景的大小（通过使用传递给块的矩形）并且背景是滚动视图中的文本视图，则这可能无法正确调整窗口大小。（当我不久前尝试它时，图案并没有重新绘制块；它只是平铺，至少在一个维度上看起来很奇怪。）如果你的渐变或窗口的大小是固定的，那么你就不会遇到这个问题.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:07:04.200

**NSGradient 不能转换为 NSColor。**

> NSGradient 类支持绘制渐变填充颜色，也称为 Quartz 中的阴影。此类为绘制矩形和 NSBezierPath 对象的径向或线性（轴向）渐变提供了方便的方法。

当您想将 viewBackground 设置为效果（渐变效果）时，您需要执行以下操作：

```
[grad drawInRect:<the rect of your view> angle:270]; //angle is upto your requirement, 
```

# php - Highcharts 库的简单、开源 PHP 包装器

> ID：16139068
> 
> 赞同：1
> 
> 时间：2013-04-22T03:40:57.373
> 
> 标签：php, highcharts

我是 Highcharts Library 的忠实粉丝。

随着 Phantomjs 的存在，我正在尝试在后端报告生成过程中使用 Highcharts。（只是为了获取图表图像为 jpg/png）

我想知道是否有任何用于 Highchart 的 PHP 包装器，它具有预定义的 php 类，因此可以通过 json_encode 轻松将其转换为 json 对象。

（以便将其存储在 .json 文件中并传递给 phantomjs 以生成图表图像。）

前几天，我自己写了一个，但它非常静态，我的时间不多了。所以我想知道是否有任何稳定的包装器可以使用。

谢谢阅读

-丹尼·C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:28:26.610

请熟悉包含 PHP 包装器的[http://www.highcharts.com/download 。](http://www.highcharts.com/download)

# c++ - 具有模板化和非模板化形式的 C++ 类

> ID：16139074
> 
> 赞同：2
> 
> 时间：2013-04-22T03:41:43.847
> 
> 标签：c++, class, templates

我很好奇是否可以有一个同时具有模板和非模板形式的类。就像是：

```
SomeClass foo;
SomeClass<int> bar;

foo.do_something();
bar.do_something(5); 
```

我可以多次定义所有内容，但我不知道是否可以使用相同的类名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T03:44:51.190

简短的回答：不，这是不允许的。您的编译器给您的确切错误消息会有所不同，但您应该会收到一条错误消息。

但是，您可以为模板提供默认参数，因此您可以仅使用 实例化它`<>`，例如：

```
template <class T=int>
class X {};

int main(){ 
    X<long> a;
    X<>     b; // used default, so equivalent to "X<int> b;"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:53:23.473

通过使用默认模板参数，您可以得到一些接近的东西：

```
template <class T = char>
class SomeClass{};

SomeClass<> foo;     // char type
SomeClass<int> bar;  // int type 
```

如果您希望默认类型的成员函数具有不同的行为，请使用特化。

# asp.net - 在 iis 中部署后如何使 printdocument 类工作？

> ID：16139082
> 
> 赞同：0
> 
> 时间：2013-04-22T03:43:03.950
> 
> 标签：asp.net, iis, printdocument

我在 asp.net 中有一个打印账单的项目。我已经让我自己的打印类继承表单 PrintDocument 表单 System.Drawing.Printing 并且它在 Visual Studio 开发服务器中运行良好。但是在 IIS 中部署后它不起作用。经过大量研究后，我发现 System.Drawing.Printing 不适用于 asp.net。有什么方法可以使用相同的类进行一些调整来打印......或者可能的选项是什么（除了javascript）？打印将在本身托管 IIS 服务器的本地计算机中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:02:05.743

我相信您可以使用`System.Printing.PrintQueue`.

`System.Printing.PrintServer("PrintServerName").PrintQueueCollection`会给你所有可用`PrintQueue`的s。这是来自 MSDN 的一些示例代码：

```
// Create a PrintServer 
// "theServer" must be a print server to which the user has full print access.
PrintServer myPrintServer = new PrintServer(@"\\theServer");

// List the print server's queues
PrintQueueCollection myPrintQueues = myPrintServer.GetPrintQueues();
String printQueueNames = "My Print Queues:\n\n";
foreach (PrintQueue pq in myPrintQueues)
{
    printQueueNames += "\t" + pq.Name + "\n";
}
Console.WriteLine(printQueueNames); 
```

这是关于s背后概念的[一个很好的参考](http://msdn.microsoft.com/en-us/library/ee380735.aspx)`PrintQueue`

# svn - 如何通过SVN访问GitHub（Dreamweaver CS6）

> ID：16139089
> 
> 赞同：2
> 
> 时间：2013-04-22T03:44:08.373
> 
> 标签：svn, github, dreamweaver

所以我对 GitHub 比较陌生，我正在尝试与一个开源团队一起使用它来开发一个简单的 Web 应用程序。提交文件后，系统会提示我“文件必须存储在主干/或分支/子目录下”的错误消息。

有没有办法可以附加我的 GitHub URL 以仅访问主干？目前我在 Dreamweaver CS6 中的设置如下...

服务器地址：github.com

存储库路径：/username/RepoName.git

服务器端口：443

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:33:39.940

1.  Git 和 Subversion 使用不同的 URL 来访问存储库
2.  在开始工作之前，您**必须从 Github 签出整个存储库**
3.  您必须为存储库使用正确的 URL

> 有没有办法可以附加我的 GitHub URL 以仅访问主干？

不。Git-URL 不是基于路径的，同一 URL 下的单个 repo 具有**所有分支**

补充阅读：

*   [改进的 Subversion 客户端支持](https://github.com/blog/966-improved-subversion-client-support)
*   [在 GitHub 上与 Subversion 协作](https://github.com/blog/1178-collaborating-on-github-with-subversion)

当我使用第一篇文章中的提示时，我通过 svn 客户端从 Github 签出了我的 Git-repo。对于`https://github.com/lazybadger/Fiver-l10n.git`Git 仓库

`svn co https://github.com/lazybadger/Fiver-l10n`

签出整个存储库树

```
>dir /B /S /AD
z:\Fiver-l10n
z:\Fiver-l10n\.svn
z:\Fiver-l10n\branches
z:\Fiver-l10n\trunk 
```

# c# - 获取最后（即结尾）3 位小数（.NET）

> ID：16139091
> 
> 赞同：6
> 
> 时间：2013-04-22T03:44:14.287
> 
> 标签：c#, .net

我可能用数学来作恶……但是，在一个写成 0.7000123 的数字中，我需要得到“123”——也就是说，我需要提取数字小数部分的最后 3 位数字。最不重要的数字，前几个是大多数人需要的。

例子：

```
0.7500123 -> 123  
0.5150111 -> 111 
```

它总是从数字 5 开始。是的，我将秘密信息存储在这个数字中，在不会影响数字使用方式的小数部分 - 这是潜在的邪恶部分。但这仍然是解决我遇到的某个问题的最佳方法。

我想知道数学或字符串操作是否是最不狡猾的方法。

性能根本不是问题，因为我只调用过一次。

任何人都可以看到一种简单的数学方法吗？例如 .NET 中的数学函数组合（我错过了）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T03:50:17.620

可以肯定的是，这是一个奇怪的要求。但是获取最后 3 位的 int 值的一种方法是：

```
int x = (int)((yourNumber * 10000000) % 1000); 
```

我猜想有一种更好的方法可以让您寻找更清洁的信息，但是鉴于您的要求，这应该可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T04:22:35.323

首先将您的号码转换为字符串。

```
string s = num.ToString();

string s1 =  s.Substring(s.Length - 3, 3); 
```

现在 s1 包含数字的最后 3 位数字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T03:48:17.533

使用模数将为您提供最后 3 位数字：

```
var d = 0.7000123m;
d = d * 10000000 % 1000; 
```

d 现在将保持值 123。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T04:26:38.247

尝试这个：

```
 string value= "0.1234567";
    string lastthreedigit= value.Substring(value.Length - 3); 
```

# javascript - 如何配置 express.js 的 `app.use(express.static(...)`？

> ID：16139093
> 
> 赞同：0
> 
> 时间：2013-04-22T03:44:25.803
> 
> 标签：javascript, node.js, express

我正在使用 express.js`app.use(express.static(...))`来提供我的文件。我想配置一些受限文件并进行路由（例如将请求重定向`.png`到特定文件夹）。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:17:37.670

你不能从 express.static 中间件中得到你需要的东西，但是其中大部分都很容易实现。
要设置受限文件，只需在 express.static 中间件上方放置一个中间件，要点如下：

```
app.use(function(req,res,next){
  if (req.url == "/path/to/bad/file") res.send(403)
  else next();
}) 
```

要设置重定向（使用相同类型的中间件），您有两个选择，要么执行 res.redirect("real path")，要么使用 res.sendFile("path") 自己发送文件，这或多或少是表达的。静态的。

# python - 在 C-SPAN 上使用 OCR（pytesser），结果好坏参半

> ID：16139094
> 
> 赞同：1
> 
> 时间：2013-04-22T03:44:33.617
> 
> 标签：python, python-2.7, ocr, tesseract

我正在使用 pytesser 从 C-SPAN 中提取投票信息，但我几乎是一个 OCR 新手。

我现在从一个屏幕截图开始。我首先将图像变成黑白，反转颜色，然后最大化对比度。以下是图像处理前后的链接：http: [//imgur.com/a/jnKRZ](http://imgur.com/a/jnKRZ)

现在我运行 pytesser：

```
from pytesser import *
image = Image.open('cspantest1.tif')  # Open image object using PIL
print image_to_string(image)     # Run tesseract.exe on image 
```

结果好坏参半：

```
ON BROUN O~F~GE0R~GIA'T.;,v I
MOTION TO INSTRUCT  
CONFEREES ; ij h;~J I
~   I       IF
I II, [I; I
H n Iaaae
I I I I` 4*4
, '   I *~ -'~YEA ^-NWY,PRE5 NV
RERUBLICAN I; 82 145  15\. II
DEM`OC~F}7\EpF "` ;`1~78-V 4~ ~*v12
_;'~ INDEPENDENT S! It I 2
~YI`a.a:1i- > *-},,5
TOTAL`S 82 323   27
TIME REMAINING 0:00 ..
"W.. .. g I
. "f'    z-;A         
I . 
```

关键数据、所有数字和计时器都在那里，但我认为必须有更好的方法来做到这一点。为训练文件构建每个单独字符的库？限制允许字符的范围？

最终，我想自动化整个图像处理和 OCR 过程。如果有人有清理此问题的提示，我将不胜感激。

# recursion - 以下递归代码的时间复杂度（大 O 表示法）？

> ID：16139098
> 
> 赞同：0
> 
> 时间：2013-04-22T03:44:49.063
> 
> 标签：recursion, big-o, time-complexity

以下递归代码的 `Big-O`时间复杂度（ ）是多少？`O`

```
public static int abc(int n) {
    if (n <= 2) {
        return n;
    }
    int sum = 0;
    for (int j = 1; j < n; j *= 2) {
        sum += j;
    }
    for (int k = n; k > 1; k /= 2) {
        sum += k;
    }
    return abc(n - 1) + sum;
} 
```

我的回答是`O(n log(n))`。这是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:35:50.903

我坐在哪里......我认为运行时间是**O(n log n)**。这就是为什么。

*   您正在对该函数进行*n*次调用。该函数肯定依赖于*n*进行以下两个操作的次数：

    *   您最多循环 2*log(n) 值以增加总和。

在最坏的情况下，*n*非常大，但整体运行时间不会改变。最好的情况是*n* <= 2，这样只完成一个操作（不会发生循环）。

# c - C在函数中返回数组

> ID：16139101
> 
> 赞同：2
> 
> 时间：2013-04-22T03:45:03.807
> 
> 标签：c, arrays, pointers

我对 C 比较了解，我习惯于用 Java 编程，所以我发现 C 在涉及数组的方面有点困难。我仍然对这种情况感到困惑：

```
int a [];
int* a;
int *a; 
```

在java中，我会做这样的事情来在函数中返回一个数组：

```
int [] returnArr(int [] a){
... modify a ...
return a;
}

int [] a = {...};
int [] b = returnArr(a); ## 
```

我如何在 C 中做同样的事情，特别是带有## 的部分。

编辑：我有这个功能：

```
float *normalizeValues(float *v, float maxY){

    int size = sizeof(v) / sizeof(float);
    float max = findMax(v);
    float ratio = maxY / max;
    int i;
    for(i = 0; i < size ; ++i){
        v[i] = v[i] * ratio;
    }
    return v;
} 
```

我正在做以下事情：

```
float vert [] = {306, 319, 360, 357, 375, 374, 387, 391, 391, 70, 82, 94, 91, 108, 114, 125, 127, 131};
int i = 0;
float *vert2;
vert2 = normalizeValues(vert, 0.7);

for(i = 0; i < sizeof(vert2) / sizeof(float); ++i){
    fprintf(stdout,": %f\n",vert2[i]);
} 
```

并且输出只有 1 个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:51:58.800

你不能。当函数返回时，堆栈帧将被清除（通常），并且您生成的数组将被破坏。但是，您可以编辑函数原型以接受指向要修改的数组的指针。这种函数参数称为“输出参数”。例子：

```
void function func(int a, int b, int[2] to_modify)
{
  to_modify[0] = a;
  to_modify[1] = b;
}
int main()
{
   int foo[2];
   func(1, 2, foo);
   printf("Result: foo[0] = %d, foo[1] = %d\n", foo[0], foo[1]);
   return 0; 
} 
```

这将打印“结果：foo[0] = 1，foo[1] = 2”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:52:38.740

编辑：要直接回答您更新的问题：您必须传入数组的大小。C 没有像 Java 那样存储数组大小的机制。如果编译器知道数组的大小，因为数组是全局或局部变量，不是动态分配的，那么您可以使用 sizeof() 运算符。否则，您必须单独知道大小，或者在数组中使用标记值（例如末尾的 0.0 或 NULL）。

至于一般的数组、指针和参数，请参见下文：

您将返回一个指向数组的指针，该指针用 '*' 语法表示：

```
int *returnArr(int[] a) {
    // modify a...
    return a;
}

int a[] = { ... };
int *b;
b = returnArr(a); 
```

需要注意的几点：

*   您不能在涉及非常量表达式（例如，函数调用）的变量声明中进行赋值。不过，这可能在 C99 中有所改变。
*   括号跟*在*变量名之后，不像在 Java 中它们是类型的一部分。尽管 Java 的语法更加一致，但它在 C 中并不十分有意义，因为您经常在变量声明的括号中给出数组大小：

    `int a[3] = { ... };`

*   没有办法指定一个函数返回一个数组而不是一个普通的指针。在 C 中，数组引用衰减为指针（尽管指针和数组不是一回事，正如通常所声称的那样）。这意味着每当您传递一个数组时，C 只提供一种方法来传递一个指向该数组的指针。整个数组实际上并没有被复制。碰巧，数组的名称也是指向数组第一个元素的指针。

另请注意 user268396 在他们的回答中所说的内容。如果您打算创建一个新数组并返回它，则需要动态分配数组，或者传入一个指向已分配数组的指针（无论如何，这似乎是您正在做的事情） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T03:59:12.370

希望这可以帮助

```
 #include<stdio.h>

    void change(int *c)/*Pointer c now has the first location of the array a[]*/
    {
      *(c+0) = 0;/*assign values to the array by adding step-size to the first array position*/
      *(c+1) = 1;
      *(c+2) = 2;
      *(c+3) = 3;
      *(c+4) = 4;
    }

    main()
    {
      int a[5]={10,20,30,40,50}; /* Declare and Assign an array a[] of size 5.*/
      int *b = a; /*Declare and assign a Pointer to the location of the array.*/
      change(b); /*pass the pointer(which is now pointing to first position of array) to the change() function.*/
      printf("%d,%d,%d,%d,%d,",a[0],a[1],a[2],a[3],a[4]);/*Print the changed value.*/
    } 
```

输出：0,1,2,3,4,

从 Java 的角度来看，指针只是（不完全是）对象引用。

```
Object O;

O = New SomeClassName(); 
```

就像对象引用 O 指向 SomeClassName 类型的一些实际对象一样，C 中的指针也是如此：

```
int *b;
b = &a; 
```

变量 b 只是指向 a 的地址位置。深入研究数组概念：

```
int a[5];
int *b = a; 
```

这里我们只是说像**Mr.*b**指向组**a**的第一个位置，即**a[0]**。

现在 C 中的 power 指针是从现在开始的，在此之后：

```
*b means a[0]
*(b+1) means a[1]
*(b+2) means a[2]
*(b+3) means a[3]
*(b+4) means a[4] 
```

这意味着你改变了 *(b+4)，你正在改变 a[4]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T03:54:09.867

```
int* returnArr(int a[]){
    //modify a
    return a;
} 
```

需要提及的是，当您在函数的参数列表中使用数组时，它将被转换为指针。所以在 main(...) 的声明中，`char *argv[]`实际上`char **argv`是相同的。在这种情况下，`int a[]`和`int*`a 是相同的。但是数组和指针不是一回事。

以下面的代码为例：

```
int a[10];
int main(){
    int *p = a;
    p[5] = 4;
    return p[5];
} 
```

p是一个指针，当我们访问p[i]时，注意p的地址不是a的地址，p的内容是a的地址。然后代码将：

1.  访问内存得到p的内容，即a的地址。
2.  根据 i 和指针（int）的类型计算偏移量。
3.  访问内存以获得结果。

a是一个int数组，如果我们访问a[i]，a的地址就是a[0]的地址，代码会：

1.  根据 i 和 int 类型计算偏移量。
2.  访问内存。

指针和数组是不同的类型。因此，如果您在一个文件中声明 int *p 并在该文件中使用它，但将 p 定义为另一个文件中的数组，则会导致问题。

您可能还想知道 int *p = a，在 ANSI 中，如果您使用数组（其名称）作为表达式，编译器会将其转换为指针，指向数组的第一个元素。

**根据 Jim Balter 的评论**更新：****

 **如果您使用数组（其名称）作为表达式，编译器**不会总是**将其转换为指针，指向数组的第一个元素。例如，在 sizeof(p->q->a) 中，p->q->a 是一个表达式，但如果 a 是一个数组，它不会转换为指针。

> "除非它是 sizeof 运算符或一元 & 运算符的操作数，或者是用于初始化数组的字符串字面量，否则类型为 ''array of type'' 的表达式将转换为类型为 ''pointer 的表达式键入指向数组对象的初始元素的''。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T03:59:07.713

在 C 中，您只能在函数中返回数组的指针。例如，如果您想在函数中返回一个字符串（char 数组），您可以返回一个指向以 null 结尾的字符串的指针。如果要返回其他类型的数组（int，用户定义的结构等），可以分配一些内存来存储数组，并返回数组的指针，在参数中返回数组的大小。例子：

```
int *function(int *size)
{
    *size = 10;
    int *intP = (int *)malloc((*size)*sizeof(int));

    return intP;
} 
```**

# sitecore - Sitecore 中的马尔代夫之谜并在不受支持的语言上返回 404

> ID：16139102
> 
> 赞同：0
> 
> 时间：2013-04-22T03:45:23.847
> 
> 标签：sitecore

我目前正在处理的一个网站目前正在响应[http://www.mysite.com/dv](http://www.mysite.com/dv)上的请求 301，我原本预计会出现 404。

我的站点没有名为 DV 的内容项，站点中没有与“DV”对应的任何内容，我不明白为什么我会看到这个。我最初在查看 Google Webmaster Tools 时发现了这些 /DV/ URL。

然后我用Fiddler分析请求，发现

```
Response sent 26 bytes of Cookie data:
    Set-Cookie: wwwwebsite#lang=DV; path=/ 
```

这似乎对应于马尔代夫语言。我没有启用这种语言，它没有出现在 /system/Languages 下。

然后我注意到我还可以导航到[http://www.mysite.com/de-CH](http://www.mysite.com/de-CH)，这也不是我网站上启用的语言，这让我相信对于每种未启用的语言，我都会得到这样的结果。

有没有办法为 Sitecore 中不支持的语言返回 404？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:36:16.597

尝试查看 web.config 中的“languageEmbedding”值设置为什么。

可以设置如下： asNeeded | 总是 | 绝不

我通常会将其设置为“从不”，除非您有一个以多版语言设置的站点，然后将其设置为“始终”。默认是“asNeeded”，坦率地说，我觉得有点傻:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:33:20.817

您遇到的问题听起来类似于[http://sdn.sitecore.net/Forum/ShowPost.aspx?postid=51681](http://sdn.sitecore.net/Forum/ShowPost.aspx?postid=51681)但我`DV`在`LanguageDefinitions.config`. 我也能够复制您的错误，因此我认为它不是特定于您的实施的环境。建议您联系 Sitecore 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:55:34.583

我不相信这实际上与语言有关。如果您要添加任何随机字符来代替 DV，您仍然会得到 302 重定向到 404。尽管可能没有语言 cookie。

您应该按照此处的说明打开服务器端错误页面重定向。

[http://herskind.co.uk/blog/2012/03/sitecore-404-without-302](http://herskind.co.uk/blog/2012/03/sitecore-404-without-302)

# android - android中的活动流程A->B->C->A

> ID：16139104
> 
> 赞同：1
> 
> 时间：2013-04-22T03:45:32.637
> 
> 标签：android, android-intent, navigation

**假设我有 3 个活动：A、B 和 C。**

*   A：家庭活动
*   B：信息收集活动
*   C：信息展示Activity

**我想要的流程如下：**

*   A 触发 B 收集信息。
*   当B结束时，C会得到信息并显示。
*   A->B->C->A。
*   当 C 结束时，它应该回到 A。（这从来都不是问题，因为我会 B：finish()）

* * *

**我的第一次尝试：（**失败，因为我不想在 B 之后看到 A，即使是几毫秒）

1.  A 触发 B 收集信息。(startActivityAsResult)
2.  B 将结果传递给 A 和 B : `finish()`。(onActivityResult)
3.  然后A触发C显示。(开始活动)

**我的第二次尝试：（**成功但我在想有没有更好的方法尽管如此？）

1.  A 触发 B 收集信息。(开始活动)
2.  B 触发 C 和 B : `finish()`。(开始活动)

* * *

**问题：**

有没有其他方法（更简单/直接）来定义导航流程的*顺序*，就像我在 API 中看到`taskBuilder`的`nextIntent()`那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:25:34.833

在后退按钮上的 Activity C 中，按清除 backstack 并导航到 A

```
 @Override 
 public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
    onBackPressed();

}

return super.onKeyDown(keyCode, event);
   }

    public void onBackPressed() {
Intent myIntent = new Intent(C.this,A.class);
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);// clear the backstack
startActivity(myIntent);
finish();
return;
   } 
```

A到B到C

在您的活动返回堆栈中，您将在顶部有 C，下一个 B 和下一个 A。

当您按下 C 中的后退按钮时，活动 C 从堆栈中弹出、销毁，并且前一个活动 B 获得焦点。因此，如果您希望从 C 导航到 A，请清除返回堆栈，导航到 A 并完成当前活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T03:56:17.977

如果我理解正确，您只是想让用户无法使用后退按钮进入已经“用完”的活动，是吗？尝试使用以下内容修改 AndroidManifest.xml 中的活动标签：

```
<activity
    android:name="yourpackagename.yourappname.YourActivity"
    android:label="@string/your_app_title"
    android:noHistory="true" > 
```

添加`noHistory`属性后，相关活动将从活动历史记录中删除，并且您将能够强制用户仅按照您的意图描述前进。

# php - 创建“离开”表时出现 Sql 语法错误

> ID：16139106
> 
> 赞同：-3
> 
> 时间：2013-04-22T03:45:49.483
> 
> 标签：php, mysql

我在我的 wamp 服务器（版本 2.2.22）和 php（版本 5.3.13）中创建表时遇到问题。下面给出的错误...

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'leave( lid INT AUTO_INCREMENT, empname VARCHAR(255), username VARCHAR(255), ' 附近使用正确的语法

在这里我的代码。请帮助我..

```
create table leave(
lid INT AUTO_INCREMENT,
empname VARCHAR(255),
username VARCHAR(255),
nod INT,
sdate DATE,
edate DATE,
reason VARCHAR(255),
PRIMARY KEY(lid),
FOREIGN KEY(empID) REFERENCES users(empID)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:49:01.713

[`LEAVE`是 MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)。用backtics包围它。

```
CREATE TABLE `leave` ( 
```

# sql - 插入错误：“@signupDate”附近的语法不正确

> ID：16139109
> 
> 赞同：1
> 
> 时间：2013-04-22T03:46:19.573
> 
> 标签：sql, parameters, insert

我在注册页面中不断收到此错误。当我调试我的系统时，所有参数都给出了..当进入for循环时它也可以工作..但它进入catch内部并给我那个错误..

这是我的代码..请帮助...

```
private void ExecuteInsert(int MerchanttID, int ResellermID, string CompanyName, int AddID,
string streetAdr, string city, string state, int countryID, string zipCode, string TelNum,
string FaxNum, string Url, int IndustryID, Boolean isActive, Boolean isDeleted, 
DateTime DateCreated)
        {
            SqlConnection connectionString = new SqlConnection(GetConnectString());

            string merchantQuery = "Insert INTO Merchant_Master (MerchantTypeID,
     ResellerMasterID, CompanyName, AddressID, Url, IndustryID, IsActive, IsDeleted,
     DateCreated) VALUES (@merchantTID, @resellerMID , @CompanyName, @AddID, @website,
     @IDindustry, @Isactive, @IsDeleted, @signupDate"; 

            string addressQuery = "Insert into Address (StreetAdd, City, State, CountryID,
     ZipCode, TelNum, FaxNum) VALUES (@stAd, @CityAdr, @StateAdr, @IDcountry,
     @zCode ,@Tnumb ,@Fnumb)";                                  

            try
            {
                connectionString.Open();

                // Insert Merchant_Master
                SqlCommand merchantCmd = new SqlCommand(merchantQuery, connectionString);
                SqlParameter[] merchant = new SqlParameter[9];

                merchant[0] = new SqlParameter("@merchantTID", SqlDbType.VarChar, 100);
                merchant[1] = new SqlParameter("@resellerMID", SqlDbType.VarChar, 100);
                merchant[2] = new SqlParameter("@CompanyName", SqlDbType.VarChar, 100);
                merchant[3] = new SqlParameter("@AddID", SqlDbType.Int, 100);
                merchant[4] = new SqlParameter("@website", SqlDbType.VarChar, 100);
                merchant[5] = new SqlParameter("@IDindustry", SqlDbType.Int, 100);
                merchant[6] = new SqlParameter("@Isactive", SqlDbType.Bit, 100);
                merchant[7] = new SqlParameter("@IsDeleted", SqlDbType.Bit, 100);
                merchant[8] = new SqlParameter("@signupDate", SqlDbType.DateTime, 0);

                merchant[0].Value = MerchanttID;
                merchant[1].Value = ResellermID;
                merchant[2].Value = CompanyName;
                merchant[3].Value = AddID;
                merchant[4].Value = Url;
                merchant[5].Value = IndustryID;
                merchant[6].Value = isActive;
                merchant[7].Value = isDeleted;
                merchant[8].Value = DateTime.Now;

                for (int i = 0; i < merchant.Length; i++)
                {
                    merchantCmd.Parameters.Add(merchant[i]);
                }
                merchantCmd.CommandType = CommandType.Text;
                merchantCmd.ExecuteNonQuery();

                // Insert Address
                SqlCommand addressCmd = new SqlCommand(addressQuery, connectionString);
                SqlParameter[] address = new SqlParameter[7];

                address[0] = new SqlParameter("@stAd", SqlDbType.VarChar, 100);
                address[1] = new SqlParameter("@CityAdr", SqlDbType.VarChar, 100);
                address[2] = new SqlParameter("@StateAdr", SqlDbType.VarChar, 100);
                address[3] = new SqlParameter("@IDcountry", SqlDbType.Int, 100);
                address[4] = new SqlParameter("@zCode", SqlDbType.VarChar, 100);
                address[5] = new SqlParameter("@Tnumb", SqlDbType.VarChar, 100);
                address[6] = new SqlParameter("@Fnumb", SqlDbType.VarChar, 100);

                address[0].Value = streetAdr;
                address[1].Value = city;
                address[2].Value = state;
                address[3].Value = countryID;
                address[4].Value = zipCode;
                address[5].Value = TelNum;
                address[6].Value = FaxNum;

                for (int i = 0; i < address.Length; i++)
                {
                    addressCmd.Parameters.Add(address[i]);
                }
                addressCmd.CommandType = CommandType.Text;
                addressCmd.ExecuteNonQuery();
            }

            catch (Exception ex)
            {
                string errorMsg = "Insert Error:";
                errorMsg += ex.Message;
                throw new Exception(errorMsg);
            }
            finally 
            {
                connectionString.Close();
            }
        }

        protected void Submitbtn_Click(object sender, EventArgs e)
        {
            int AdrID = 0;
            Boolean isactive = true;
            Boolean isdeleted = false;

            ExecuteInsert ( int.Parse(drpR.SelectedValue),
                            int.Parse(drpT.SelectedValue),
                            CompanyName.Text,
                            AdrID,
                            stADR.Text,
                            City.Text,
                            State.Text,
                            int.Parse(drpC.SelectedValue),
                            Zcode.Text,
                            TNumber.Text,
                            FNumber.Text,
                            Url.Text,
                            int.Parse(drpI.SelectedValue),
                            isactive,
                            isdeleted,
                            DateTime.Now); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:00:57.020

您的 MercerQuery 字符串似乎缺少右括号。

# php - 在 HTML 中最多允许 2 个连续的换行符

> ID：16139110
> 
> 赞同：0
> 
> 时间：2013-04-22T03:46:20.023
> 
> 标签：php, regex

例如：

```
StackOverflow<br>
<br>
<br>
<br>
<br>
is
<br>
<br>
<br>
<br>
a
<br>
community. 
```

至：

```
StackOverflow
<br>
<br>
is
<br>
<br>
a
<br>
community. 
```

如果一个字符串中超过 2`<br>`个，它应该删除所有的`<br>`并只保留两个。到目前为止的代码：

```
$txt_unclean = trim(nl2br($_POST['txt_content']));
$txt_content = strip_tags($txt_unclean, '<br>'); 
```

你下一步怎么做？我如何允许不超过 2 `<br>`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:51:32.543

如果您的标记是这样控制的，您可以使用`preg_replace`匹配两个以上的连续`<br>`：

```
$txt_content = preg_replace('/(<br>\s*){3,}/', '$1$1', $txt_content); 
```

还要匹配自闭合标签：

```
$txt_content = preg_replace('/(<br\s*/>\s*){3,}/', '$1$1', $txt_content); 
```

否则，我会考虑使用 DOM 解析器来完成这项工作；话虽如此，这并不容易:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T02:25:01.363

由于您可以在换行符转换为 s 之前访问该字符串`<br>`，因此我将这样做：

```
<?php
$string = <<<END
1
2

3

4

5
END;
$string = trim(nl2br(preg_replace('/(\r?\n){3,}/', '$1$1', $string)));
echo $string; 
```

输出：

```
1<br />
2<br />
<br />
3<br />
<br />
4<br />
<br />
5 
```

[**[演示]**](http://viper-7.com/RPeQyA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T03:55:07.480

以下代码[`in action`](http://ideone.com/KtQGpe)：

```
<?php
$str = <<<STR
StackOverflow<br>
<br>
<br>
<br>
<br>
is
<br>
<br>
<br>
<br>
a
<br>
community.
STR;
echo preg_replace("!(<br(?:\s?/)?>\s*){2,}!s", "<br />\n<br />\n", $str); 
```

# iphone - UICollectionView 或 UITableView 大于屏幕大小

> ID：16139111
> 
> 赞同：0
> 
> 时间：2013-04-22T03:46:20.410
> 
> 标签：iphone, ios, xcode, uicollectionview

我需要显示一个数据表；行和列。我认为 UICollectionView 会解决我的问题并求助于它，而不是使用 UITableView。UICollectionView 的 flowLayout（开箱即用的布局）确实显示不止一列数据。但是我可以让它显示超过一个屏幕宽度的内容吗？说，我想让 UICollectionView 显示 3 个屏幕宽度的数据（例如，对于 iPhone，它是 320*3=960px）？默认情况下，UICollectionView 的 FlowLayout 似乎会在屏幕宽度处中断数据显示并继续在下一行显示其余部分。现在，我不希望它在页面宽度的末尾中断，而是在 (3 * page-width) 的末尾。

我尝试了什么：我将 CollectionView 放在 UIScrollView 中，并将滚动视图的宽度设置为 3*page-width，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/Wqu4e.png)

```
[self.scrollView setContentSize:CGSizeMake([[UIScreen mainScreen] bounds].width*3.0, [[UIScreen mainScreen] bounds].size.height)]; 
```

当我运行应用程序时，页面确实显示了 3*page-width 的宽度。我能够很好地水平滚动。但是，UICollectionView 数据仍然在一个页面宽度处中断并继续显示下一行（这意味着它不将滚动视图的宽度视为其宽度；而是继续将页面宽度视为其宽度）。

请提供您的建议/意见。会有很大帮助的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:17:53.267

您应该能够只更改滚动方向，以便流布局将水平滚动而不是垂直滚动：

```
UICollectionViewFlowLayout *layout = (UICollectionViewFlowLayout *)self.collectionView.collectionViewLayout;
layout.scrollDirection = UICollectionViewScrollDirectionHorizontal; 
```

您也可以直接在 Interface Builder 中进行设置。

# ruby - Ruby 如何评估双引号（又名“”）与 String.new？

> ID：16139116
> 
> 赞同：8
> 
> 时间：2013-04-22T03:47:08.973
> 
> 标签：ruby

`""`Ruby 用双引号 ( ) 与.初始化新字符串的方式有什么区别`String.new`？出于好奇和实验的目的，我覆盖了`String#initialize`：

```
class String
  def initialize
    puts "I <3 bananas" # they're delicious!
  end
end 
```

我想弄清楚的是：为什么这两个例子不同？

```
# Calling the String class directly, I can declare banana love!
irb(main):054:0> String.new
I <3 bananas
=> ""

# Using double quotes, this string is not as tasty :(
irb(main):055:0> ""
=> "" 
```

这对研究来说很烦人，因为每个谷歌结果似乎都集中在基本的 Ruby 语法上，而我在 Ruby 文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T04:09:36.177

根据[马茨](http://www.ruby-forum.com/topic/1893190#1004250)：

> 文字的字符串对象已经在编译时创建，这远在您重新定义初始化方法之前。文字中的单个字符串对象只是已分配和初始化对象的副本。顾名思义，initialize 方法的全部目的是初始化新创建的对象。我觉得没有必要为在编译时已经初始化的字符串文字调用（重新定义的）初始化方法。

# ms-access - access 2010 编写SQL语句

> ID：16139120
> 
> 赞同：0
> 
> 时间：2013-04-22T03:47:34.673
> 
> 标签：ms-access, ms-access-2010

我正在为我的作业在 Access 2010 中编写 SQL 语句。我想做的是`Display the Client Number, Client Name, Bookkeeper Number, First Name, and Last Name for all clients. Sort the records in ascending order by bookkeeper number and client number`. 这就是问题要问我的。但是当我去写语句时，我收到一个错误，说簿记员编号可以引用 from 子句中的多个表。我怎么能解决这个问题？

这是我到目前为止尝试过的

```
select C.[client number], C.[client name], C.[bookkeeper number], B.[firstname]
from [client] C, [bookkeeper] B
order by [bookkeeper number], [client number] ASC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:51:20.767

要解决该错误，只需添加一个这样`B.`的： 。`order by``B.[bookkeeper number]`

但是，要获得正确的结果，您还必须在两个表之间添加一个 INNER JOIN 子句。

# silverlight - 在silverlight中打开mvvm时子窗口的数据不刷新

> ID：16139122
> 
> 赞同：0
> 
> 时间：2013-04-22T03:47:50.723
> 
> 标签：silverlight, mvvm, childwindow

我有一个子窗口，当我选择一行 gridview 时，有一个 radgrid 视图和文本框显示 radgridview 项目！我正在使用 mvvm 模式。

当我打开子窗口时，默认情况下它会自动将最后一行的数据显示为选定行，但是当我选择另一行时，尽管我的绑定模型已更改，但子窗口打开时文本框中的数据不会更改！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:26:43.103

您可以尝试像下面提到的代码那样绑定，它可能对您有所帮助。

```
 <cmd:EventToCommand Command="{Binding  DataContext.FDE.EfileReturnedChecked,RelativeSource={RelativeSource AncestorType=controls:ChildWindow}, Mode=TwoWay}" CommandParameter="{Binding}"/> 
```

# asp.net-mvc - 检索记录时出错

> ID：16139123
> 
> 赞同：1
> 
> 时间：2013-04-22T03:47:50.903
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我是 ASP.NET MVC 的初学者。尝试从数据库中检索记录时出现错误。

> “System.Collections.Generic.List”不包含“CategoryName”的定义

**LINQ to SQL 类：** ![在此处输入图像描述](https://i.stack.imgur.com/DwKtO.jpg)

**模型：**

```
namespace MvcApplication1.Models
{
    public class CategoryRepository
    {
        private BusDataClassesDataContext dc = new BusDataClassesDataContext();

        public List<tblCategory> GetAllCategory()
        {
            return dc.tblCategories.ToList();
        }
    }
} 
```

**控制器：**

```
 public class CategoryController : Controller
 {
        //
        // GET: /Category/
        CategoryRepository cat = new CategoryRepository();

        public ActionResult ViewCategory()
        {
            var category = cat.GetAllCategory().ToList();
            return View("ViewCategory", category);
        }

  } 
```

**看法：**

```
<p>
Category Name:<%=Html.Encode(Model.CategoryName)%>
</p>
<p>
Description:<%= Html.Encode(Model.Description)%>
</p> 
```

**更新：**

![在此处输入图像描述](https://i.stack.imgur.com/BEbcO.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:45:26.683

用这个：：

**`<% foreach (var category in Model)`**

比 ::

**`@foreach (var category in Model)`**

在视图中。

像这样

```
<% foreach (var category in Model)
   { %>
<p>
    Category Name :<%=Html.Encode(category.CategoryName)%></p>
<p> 
    Description :<%=Html.Encode(category.Description)%></p>
<% } %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T03:52:28.407

您正在传递`List<tblCategory>`视图。因此`Model`这里将是`generic list`. 这就是您收到错误消息的原因：-

`'System.Collections.Generic.List' does not contain a definition for 'CategoryName'`

您打算通过 tblCategory 还是打算迭代模型以获取每个 tblCategory？

你可以这样做

```
<% foreach(var category in Model)
{%>
<p>
Category Name:<%=Html.Encode(category.CategoryName)%>
</p>
<p>
Description:<%= Html.Encode(category.Description)%>
</p>
<% } %> 
```

有点不同。您已经在方法中将类型返回为 GenericList。

```
 public List<tblCategory> GetAllCategory()
        {
            return dc.tblCategories.ToList();
        } 
```

您无需再次执行模棱两可的`.ToList()`转换。

```
var category = cat.GetAllCategory().ToList(); 
```

# exchangewebservices - EWS 预约 ID。独特的？

> ID：16139126
> 
> 赞同：4
> 
> 时间：2013-04-22T03:48:31.140
> 
> 标签：exchangewebservices, ews-managed-api

Appointment.Id 属性或 Appointment.Id.UniqueId 真的是唯一的吗？

我有最简单的方法，使用 ExchangeService.FindAppointments 检索约会。我的结果显示了一些约会主题不同但 Appointment.Id.UniqueId 相同！

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:24:11.790

They are definitely unique. However, they are generated to be sequential, or close to sequential, so appointments created close together are likely to have very similar unique IDs. It's also worth noting that they are case sensitive. Are you sure that you're making a case-sensitive comparison? See the comment next to the ID property at [http://msdn.microsoft.com/en-us/library/aa580234.aspx](http://msdn.microsoft.com/en-us/library/aa580234.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-15T03:17:35.423

正如 agt 所说，它们是唯一的，但它们可能会发生变化。

如果一个`Appointment`（或从 继承的任何东西`Item`）被移动到另一个文件夹/邮箱，则`UniqueId`遗嘱会改变，遗嘱也会改变`ChangeKey`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T08:41:40.487

完全无视我评论的第一个版本。对于像我一样愚蠢的每个人：他们真的区分大小写。除了它们的情况外，它们可以是相同的。不要信任 Powershell（默认情况下它不进行区分大小写的比较），不要信任您的编辑器（默认情况下它很可能也不进行区分大小写的搜索），如果您不信任您的 mysql 数据库将排序规则设置为以 _ci 结尾的任何内容。

# vb.net - 发送电子邮件问题 VB.net

> ID：16139127
> 
> 赞同：0
> 
> 时间：2013-04-22T03:48:40.723
> 
> 标签：vb.net

我有发送电子邮件的命令行应用程序，问题是当我打开控制台并输入所有参数（`SendEmail.exe`收件人主题消息发件人发件人密码）时，电子邮件通过 OK，但是当我从其他应用程序执行此操作时

```
Dim p As New ProcessStartInfo
Dim Tsubject As String = "TEST "
p.FileName = "SendEmail.exe"

p.Arguments = EmailReceivers & " " & subject & " " & " Message " & EmailSender & " " &  SenderPass
p.WindowStyle = ProcessWindowStyle.Normal
Process.Start(p) 
```

然后我没有收到任何错误，但我`SendEmail.exe`什么`Email Successfully Sent`也没收到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:55:32.027

也许字符编码混乱。特别是“@”字符可能会搞砸。编写批处理应用程序回显您的参数将显示给您，如果您可以排除它。

您是否已将主题括在引号中？否则，空格可能会弄乱论点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-22T04:33:44.407

因为您在电子邮件中附加了一个可执行文件（.exe），所以目标电子邮件服务器可能会将您的邮件过滤为邮件软件或危险的东西，并可能伤害接收者。

# windows - 批量游戏退出而不是进入下一行

> ID：16139129
> 
> 赞同：2
> 
> 时间：2013-04-22T03:48:49.610
> 
> 标签：windows, if-statement, batch-file, cmd, set

每次我尝试播放时，它都会退出，而不是当我点击进入时移动到下一行；它工作正常，直到你输入你的名字，然后它跳到问题 1，然后它退出。我不是这方面的专家，所以我想知道我做错了什么以及如何解决它。如果您发现任何其他错误，请随时指出。谢谢！:)

```
@echo off
color F0
cls
echo.
echo True or False
pause
echo Welcome! May I ask your name before we begin?
echo.
set /p name=
echo.
echo Hello %name%, nice to meet you!
echo.
echo My name is Myst.
echo.
cls
echo.
echo Let us begin!
:start
color FC
cls
echo.
echo QUESTION 1
pause
echo.
echo Though hard, you can start a fire by rubbing 2 cool ranch
   doritos together  for a long time.
echo.
echo TRUE or FALSE
echo.
set /p variable=
echo.
if %variable% equ TRUE goto question2 if %variable% equ FALSE goto
   answer1
if %variable% neq TRUE goto start
:answer1
cls
echo.
echo Wrong! Though it is very hard, it is possible.
goto start
:question2
color F3
cls
echo QUESTION 2
pause
echo.
echo Singing in the shower lowers your cholesterol, heart rate, &
   risk of cancer  and heart disease.
echo.
echo TRUE or FALSE
echo.
set /p variable=
echo.
if %variable% equ TRUE goto answer2
if %variable% equ FALSE goto question3
if %variable% neq TRUE goto question2
:answer2
cls
echo.
echo Wrong!
echo.
echo Here is a fast fact for you %name%. Dark chocolate doesn't
   either.
goto start
:question3
color F5
cls
echo QUESTION 3
pause
echo.
exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:23:11.373

您遇到了一些语法错误和各种问题。试试这个作为示例：它进行了一些更改和编辑以使其更加健壮。

```
@echo off
color F0
cls
echo.
echo True or False
echo.
set /p "name=Welcome! May I ask your name before we begin? "
echo.
echo Hello %name%, nice to meet you!
echo.
echo My name is Myst.
echo.
echo.
ping -n 3 localhost >nul
echo Let us begin!
pause
:start
color FC
cls
echo.
echo QUESTION 1
echo.
echo Though hard, you can start a fire by rubbing 2 cool ranch
echo doritos together for a long time.
echo.
echo. 
set /p "variable=TRUE or FALSE: "
echo.
if /i "%variable%" equ "TRUE" (
echo Right!
pause
goto :question2
)
cls
echo.
echo Wrong! Though it is very hard, it is possible.
pause
:question2
color F3
cls
echo QUESTION 2
echo.
echo Singing in the shower lowers your cholesterol, heart rate, &
echo risk of cancer and heart disease.
echo.
set /p "variable=TRUE or FALSE: "
echo.
if /i "%variable%" equ "FALSE" (
echo Right!
pause
goto :question3
)
echo 
cls
echo.
echo Wrong!
echo.
echo Here is a fast fact for you %name%. Dark chocolate doesn't
echo either.
pause
:question3
color F5
cls
echo QUESTION 3
pause
echo.
exit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T04:31:20.960

尝试这个：

```
if "%variable%" equ "TRUE" goto :question2
if "%variable%" equ "FALSE" goto :answer1
goto :start 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T04:43:06.627

```
echo Hello %name%, nice to meet you!
echo.
echo My name is Myst.
echo. 
```

> cls

```
echo.
echo Let us begin! 
```

The CLS command makes to clean the window, so you can read nothing. Also you need to stop the execution of the script (with a pause).

You are using the cls command too many times without pausing the code.

Also you need to try to don't make a intelligible code like that, you need to make indentations, make empty lines, to let us understand the code.

And no need to use string recognitions like "true or false?" because exist a type of variable called "Boolean" and that is only True/False, you can use boolean questions with the Choice command.

Really you need to rewrite it all the code again because you can see things like this:

```
if %variable% equ TRUE goto answer2
if %variable% equ FALSE goto question3
if %variable% neq TRUE goto question2 
```

if variable only can be "true" and "False" then the third conditional never will be processed, no need to be a pro to understand it, is logical.

And think about what happens if the user type "true" or "TrUe" or any variant?

Then you will need to use the /I parameter of "IF" statement.

```
If /I EQU "True" (Goto...) ELSE (Goto...) 
```

And you are using the operator "&" to print a string using echo command, but you can't print operators without using double-quoues or escaping the character:

```
Echo "&"
Echo ^& 
```

Too many thing more for explain but the big problem of your code is that you've missed like 10 "pause" needed to read the strings.

PS: Sorry for my english.

Here is the corrected code:

```
@Echo off
Color F0

Echo+
Echo: True or False | MORE
Pause & CLS

Echo+
Echo: Welcome! May I ask your name before we begin? | MORE
set /p "name=" & CLS

Echo+
Echo: Hello %name%, nice to meet you! | MORE
Echo: My name is Myst.                | MORE
Pause & CLS

Echo+
Echo: Let us begin!
Pause & CLS

:start
color FC
Echo+
Echo: QUESTION 1
Pause
Echo+
Echo: TRUE or FALSE | MORE
Choice /C TF /M "Though hard, you can start a fire by rubbing 2 cool ranch doritos together for a long time."
if %ERRORLEVEL% EQU 1 (Goto Question2) ELSE (goto Answer1)

:answer1
cls
Echo+
Echo: Wrong! Though it is very hard, it is possible.
Pause & CLS
Goto :start

:question2
color F3
cls
Echo: QUESTION 2
pause
Echo+
Echo: TRUE or FALSE | MORE
Choice /C TF /M "Singing in the shower lowers your cholesterol, heart rate, & risk of cancer and heart disease."
if %ERRORLEVEL% EQU 1 (Goto answer2) ELSE (goto question3)

:answer2
cls
Echo+
Echo: Wrong! | MORE
Echo: Here is a fast fact for you %name%. Dark chocolate doesn't either.
Pause & CLS
goto start

:question3
...
...
... 
```

# objective-c - 旋转、改变颜色并从 NSImage 获取 RGB565 数据

> ID：16139135
> 
> 赞同：1
> 
> 时间：2013-04-22T03:50:05.693
> 
> 标签：objective-c, macos, cocoa, nsimage

我发现自己有几个 NSImage 对象需要旋转 90 度，将一种颜色的像素颜色更改为另一种颜色，然后将 RGB565 数据表示为 NSData 对象。

我在 Accelerate 框架中找到了 vImageConvert_ARGB8888toRGB565 函数，所以它应该能够进行 RGB565 输出。

我在 StackOverflow 上找到了一些 UIImage 旋转，但我无法将它们转换为 NSImage，因为看起来我必须使用 NSGraphicsContext 而不是 CGContextRef？

理想情况下，我希望这些在 NSImage 类别中，所以我可以打电话。

```
NSImage *rotated = [inputImage rotateByDegrees:90];
NSImage *colored = [rotated changeColorFrom:[NSColor redColor] toColor:[NSColor blackColor]];
NSData *rgb565 = [colored rgb565Data]; 
```

我只是不知道从哪里开始，因为图像处理对我来说是新的。

我很感激我能得到的任何帮助。

**编辑 (22/04/2013)**

我设法将这段代码拼凑在一起以生成 RGB565 数据，它会颠倒生成它并带有一些小伪像，我认为第一个是由于使用了不同的坐标系，第二个可能是由于我从 PNG 到 BMP。我将使用 BMP 和非透明 PNG 进行更多测试。

```
- (NSData *)RGB565Data
{
    CGContextRef cgctx = CreateARGBBitmapContext(self.CGImage);
    if (cgctx == NULL)
        return nil;

    size_t w = CGImageGetWidth(self.CGImage);
    size_t h = CGImageGetHeight(self.CGImage);
    CGRect rect = {{0,0},{w,h}};
    CGContextDrawImage(cgctx, rect, self.CGImage);

    void *data = CGBitmapContextGetData (cgctx);
    CGContextRelease(cgctx);

    if (!data)
        return nil;

    vImage_Buffer src;
    src.data = data;
    src.width = w;
    src.height = h;
    src.rowBytes = (w * 4);

    void* destData = malloc((w * 2) * h);

    vImage_Buffer dst;
    dst.data = destData;
    dst.width = w;
    dst.height = h;
    dst.rowBytes = (w * 2);

    vImageConvert_ARGB8888toRGB565(&src, &dst, 0);

    size_t dataSize = 2 * w * h; // RGB565 = 2 5-bit components and 1 6-bit (16 bits/2 bytes)
    NSData *RGB565Data = [NSData dataWithBytes:dst.data length:dataSize];

    free(destData);

    return RGB565Data;
}

- (CGImageRef)CGImage
{
    return [self CGImageForProposedRect:NULL context:[NSGraphicsContext currentContext] hints:nil];
}

CGContextRef CreateARGBBitmapContext (CGImageRef inImage)
{
    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    void *          bitmapData;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    size_t pixelsWide = CGImageGetWidth(inImage);
    size_t pixelsHigh = CGImageGetHeight(inImage);
    bitmapBytesPerRow   = (int)(pixelsWide * 4);
    bitmapByteCount     = (int)(bitmapBytesPerRow * pixelsHigh);

    colorSpace = CGColorSpaceCreateDeviceRGB();
    if (colorSpace == NULL)
        return nil;

    bitmapData = malloc( bitmapByteCount );
    if (bitmapData == NULL)
    {
        CGColorSpaceRelease( colorSpace );
        return nil;
    }
    context = CGBitmapContextCreate (bitmapData,
                                 pixelsWide,
                                 pixelsHigh,
                                 8,
                                 bitmapBytesPerRow,
                                 colorSpace,
                                 kCGImageAlphaPremultipliedFirst);
    if (context == NULL)
    {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
    }
    CGColorSpaceRelease( colorSpace );

    return context;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:10:15.133

在大多数情况下，您将需要使用 Core Image。

您可以使用 CIAffineTransform 过滤器进行旋转。这需要一个 NSAffineTransform 对象。您之前可能已经使用过该课程。（您*可以*使用 NSImage 本身进行旋转，但使用 Core Image 更容易，并且您可能需要在下一步使用它。）

我不知道您所说的“将一种颜色的像素颜色更改为另一种颜色”是什么意思；这可能意味着很多不同的事情。不过，有可能有一个过滤器。

我也不知道你为什么特别需要 565 数据，但假设你真的需要它，那么你会涉及到这个功能是正确的。使用[CIContext 的最低级渲染方法获得 8-bit-per-component ARGB 输出](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/Reference/Reference.html#//apple_ref/occ/instm/CIContext/render%3atoBitmap%3arowBytes%3abounds%3aformat%3acolorSpace%3a)，然后使用该 vImage 函数将其转换为 565 RGB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:49:58.893

我已经设法通过使用 NSBitmapImageRep 获得了我想要的东西（通过一些 hack 访问它）。如果有人知道这样做的更好方法，请分享。

- (NSBitmapImageRep)bitmap 方法是我的 hack。NSImage 开始时只有一个 NSBitmapImageRep，但是在旋转方法之后添加了一个 CIImageRep，它优先于破坏颜色代码的 NSBitmapImageRep（因为 NSImage 呈现不着色的 CIImageRep）。

**BitmapImage.m（NSImage 的子类）**

```
CGContextRef CreateARGBBitmapContext (CGImageRef inImage)
{
    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    void *          bitmapData;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    size_t pixelsWide = CGImageGetWidth(inImage);
    size_t pixelsHigh = CGImageGetHeight(inImage);
    bitmapBytesPerRow   = (int)(pixelsWide * 4);
    bitmapByteCount     = (int)(bitmapBytesPerRow * pixelsHigh);

    colorSpace = CGColorSpaceCreateDeviceRGB();
    if (colorSpace == NULL)
        return nil;

    bitmapData = malloc( bitmapByteCount );
    if (bitmapData == NULL)
    {
        CGColorSpaceRelease( colorSpace );
        return nil;
    }
    context = CGBitmapContextCreate (bitmapData,
                                     pixelsWide,
                                     pixelsHigh,
                                     8,
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaPremultipliedFirst);
    if (context == NULL)
    {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
    }
    CGColorSpaceRelease( colorSpace );

    return context;
}

- (NSData *)RGB565Data
{
    CGContextRef cgctx = CreateARGBBitmapContext(self.CGImage);
    if (cgctx == NULL)
        return nil;

    size_t w = CGImageGetWidth(self.CGImage);
    size_t h = CGImageGetHeight(self.CGImage);
    CGRect rect = {{0,0},{w,h}};
    CGContextDrawImage(cgctx, rect, self.CGImage);

    void *data = CGBitmapContextGetData (cgctx);
    CGContextRelease(cgctx);

    if (!data)
        return nil;

    vImage_Buffer src;
    src.data = data;
    src.width = w;
    src.height = h;
    src.rowBytes = (w * 4);

    void* destData = malloc((w * 2) * h);

    vImage_Buffer dst;
    dst.data = destData;
    dst.width = w;
    dst.height = h;
    dst.rowBytes = (w * 2);

    vImageConvert_ARGB8888toRGB565(&src, &dst, 0);

    size_t dataSize = 2 * w * h; // RGB565 = 2 5-bit components and 1 6-bit (16 bits/2 bytes)
    NSData *RGB565Data = [NSData dataWithBytes:dst.data length:dataSize];

    free(destData);

    return RGB565Data;
}

- (NSBitmapImageRep*)bitmap
{
    NSBitmapImageRep *bitmap = nil;

    NSMutableArray *repsToRemove = [NSMutableArray array];

    // Iterate through the representations that back the NSImage
    for (NSImageRep *rep in self.representations)
    {
        // If the representation is a bitmap
        if ([rep isKindOfClass:[NSBitmapImageRep class]])
        {
            bitmap = [(NSBitmapImageRep*)rep retain];
            break;
        }
        else
        {
            [repsToRemove addObject:rep];
        }
    }

    // If no bitmap representation was found, we create one (this shouldn't occur)
    if (bitmap == nil)
    {
        bitmap = [[[NSBitmapImageRep alloc] initWithCGImage:self.CGImage] retain];
        [self addRepresentation:bitmap];
    }

    for (NSImageRep *rep2 in repsToRemove)
    {
        [self removeRepresentation:rep2];
    }

    return [bitmap autorelease];
}

- (NSColor*)colorAtX:(NSInteger)x y:(NSInteger)y
{
    return [self.bitmap colorAtX:x y:y];
}

- (void)setColor:(NSColor*)color atX:(NSInteger)x y:(NSInteger)y
{
    [self.bitmap setColor:color atX:x y:y];
} 
```

**NSImage+Extra.m（NSImage 类别）**

```
- (CGImageRef)CGImage
{
    return [self CGImageForProposedRect:NULL context:[NSGraphicsContext currentContext] hints:nil];
} 
```

**用法**

```
- (IBAction)load:(id)sender
{
    NSOpenPanel* openDlg = [NSOpenPanel openPanel];

    [openDlg setCanChooseFiles:YES];

    [openDlg setCanChooseDirectories:YES];

    if ( [openDlg runModalForDirectory:nil file:nil] == NSOKButton )
    {
        NSArray* files = [openDlg filenames];

        for( int i = 0; i < [files count]; i++ )
        {
            NSString* fileName = [files objectAtIndex:i];
            BitmapImage *image = [[BitmapImage alloc] initWithContentsOfFile:fileName];

            imageView.image = image;
        }
    }
}

- (IBAction)colorize:(id)sender
{
    float width = imageView.image.size.width;
    float height = imageView.image.size.height;

    BitmapImage *img = (BitmapImage*)imageView.image;

    NSColor *newColor = [img colorAtX:1 y:1];

    for (int x = 0; x <= width; x++)
    {
        for (int y = 0; y <= height; y++)
        {
            if ([img colorAtX:x y:y] == newColor)
            {
                [img setColor:[NSColor redColor] atX:x y:y];
            }
        }
    }
    [imageView setNeedsDisplay:YES];
}

- (IBAction)rotate:(id)sender
{
    BitmapImage *img = (BitmapImage*)imageView.image;
    BitmapImage *newImg = [img rotate90DegreesClockwise:NO];
    imageView.image = newImg;
} 
```

**编辑（2013 年 4 月 24 日）**

我更改了以下代码：

```
- (RGBColor)colorAtX:(NSInteger)x y:(NSInteger)y
{
    NSUInteger components[4];
    [self.bitmap getPixel:components atX:x y:y];
    //NSLog(@"R: %ld, G:%ld, B:%ld", components[0], components[1], components[2]);

    RGBColor color = {components[0], components[1], components[2]};

    return color;
}

- (BOOL)color:(RGBColor)a isEqualToColor:(RGBColor)b
{
    return ((a.red == b.red) && (a.green == b.green) && (a.blue == b.blue));
}

- (void)setColor:(RGBColor)color atX:(NSUInteger)x y:(NSUInteger)y
{
    NSUInteger components[4] = {(NSUInteger)color.red, (NSUInteger)color.green, (NSUInteger)color.blue, 255};

    //NSLog(@"R: %ld, G: %ld, B: %ld", components[0], components[1], components[2]);

    [self.bitmap setPixel:components atX:x y:y];
}

- (IBAction)colorize:(id)sender
{
    float width = imageView.image.size.width;
    float height = imageView.image.size.height;

    BitmapImage *img = (BitmapImage*)imageView.image;

    RGBColor oldColor = [img colorAtX:0 y:0];
    RGBColor newColor;// = {255, 0, 0};
    newColor.red = 255;
    newColor.green = 0;
    newColor.blue = 0;

    for (int x = 0; x <= width; x++)
    {
        for (int y = 0; y <= height; y++)
        {
            if ([img color:[img colorAtX:x y:y] isEqualToColor:oldColor])
            {
                [img setColor:newColor atX:x y:y];
            }
        }
    }
    [imageView setNeedsDisplay:YES];
} 
```

但现在它在第一次调用 colorize 方法时将像素变为红色，然后变为蓝色。

**编辑 2 (24/04/2013)**

下面的代码修复了它。这是因为旋转代码为 NSBitmapImageRep 添加了一个 alpha 通道。

```
- (RGBColor)colorAtX:(NSInteger)x y:(NSInteger)y
{
    if (self.bitmap.hasAlpha)
    {
        NSUInteger components[4];
        [self.bitmap getPixel:components atX:x y:y];
        RGBColor color = {components[1], components[2], components[3]};
        return color;
    }
    else
    {
        NSUInteger components[3];
        [self.bitmap getPixel:components atX:x y:y];
        RGBColor color = {components[0], components[1], components[2]};
        return color;
    }
}

- (void)setColor:(RGBColor)color atX:(NSUInteger)x y:(NSUInteger)y
{
    if (self.bitmap.hasAlpha)
    {
        NSUInteger components[4] = {255, (NSUInteger)color.red, (NSUInteger)color.green, (NSUInteger)color.blue};
        [self.bitmap setPixel:components atX:x y:y];
    }
    else
    {
        NSUInteger components[3] = {color.red, color.green, color.blue};
        [self.bitmap setPixel:components atX:x y:y];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:20:32.590

好的，我决定花一天时间研究 Peter 关于使用 CoreImage 的建议。我之前做过一些研究，并认为这太难了，但经过一整天的研究，我终于找到了我需要做的事情，令人惊讶的是，这再简单不过了。

早些时候，我决定 Apple ChromaKey Core Image 示例将是一个很好的起点，但示例代码由于 3 维颜色立方体而吓坏了我。在观看了 Core Image 上的 WWDC 2012 视频并在 github ( [https://github.com/vhbit/ColorCubeSample](https://github.com/vhbit/ColorCubeSample) ) 上找到了一些示例代码后，我决定加入并试一试。

这是工作代码的重要部分，我还没有包含 RGB565Data 方法，因为我还没有编写它，但是使用 Peter 建议的方法应该很容易：

**CIImage+Extras.h**

```
- (NSImage*) NSImage;
- (CIImage*) imageRotated90DegreesClockwise:(BOOL)clockwise;
- (CIImage*) imageWithChromaColor:(NSColor*)chromaColor BackgroundColor:(NSColor*)backColor;
- (NSColor*) colorAtX:(NSUInteger)x y:(NSUInteger)y; 
```

**CIImage+Extras.m**

```
- (NSImage*) NSImage
{
    CGContextRef cg = [[NSGraphicsContext currentContext] graphicsPort];
    CIContext *context = [CIContext contextWithCGContext:cg options:nil];
    CGImageRef cgImage = [context createCGImage:self fromRect:self.extent];

    NSImage *image = [[NSImage alloc] initWithCGImage:cgImage size:NSZeroSize];

    return [image autorelease];
}

- (CIImage*) imageRotated90DegreesClockwise:(BOOL)clockwise
{
    CIImage *im = self;
    CIFilter *f = [CIFilter filterWithName:@"CIAffineTransform"];
    NSAffineTransform *t = [NSAffineTransform transform];
    [t rotateByDegrees:clockwise ? -90 : 90];
    [f setValue:t forKey:@"inputTransform"];
    [f setValue:im forKey:@"inputImage"];
    im = [f valueForKey:@"outputImage"];

    CGRect extent = [im extent];
    f = [CIFilter filterWithName:@"CIAffineTransform"];
    t = [NSAffineTransform transform];
    [t translateXBy:-extent.origin.x
                yBy:-extent.origin.y];
    [f setValue:t forKey:@"inputTransform"];
    [f setValue:im forKey:@"inputImage"];
    im = [f valueForKey:@"outputImage"];

    return im;
}

- (CIImage*) imageWithChromaColor:(NSColor*)chromaColor BackgroundColor:(NSColor*)backColor
{
    CIImage *im = self;

    CIColor *backCIColor = [[CIColor alloc] initWithColor:backColor];
    CIImage *backImage = [CIImage imageWithColor:backCIColor];
    backImage = [backImage imageByCroppingToRect:self.extent];
    [backCIColor release];
    float chroma[3];

    chroma[0] = chromaColor.redComponent;
    chroma[1] = chromaColor.greenComponent;
    chroma[2] = chromaColor.blueComponent;

    // Allocate memory
    const unsigned int size = 64;
    const unsigned int cubeDataSize = size * size * size * sizeof (float) * 4;
    float *cubeData = (float *)malloc (cubeDataSize);
    float rgb[3];//, *c = cubeData;

    // Populate cube with a simple gradient going from 0 to 1
    size_t offset = 0;
    for (int z = 0; z < size; z++){
        rgb[2] = ((double)z)/(size-1); // Blue value
        for (int y = 0; y < size; y++){
            rgb[1] = ((double)y)/(size-1); // Green value
            for (int x = 0; x < size; x ++){
                rgb[0] = ((double)x)/(size-1); // Red value
                float alpha = ((rgb[0] == chroma[0]) && (rgb[1] == chroma[1]) && (rgb[2] == chroma[2])) ? 0.0 : 1.0;

                cubeData[offset]   = rgb[0] * alpha;
                cubeData[offset+1] = rgb[1] * alpha;
                cubeData[offset+2] = rgb[2] * alpha;
                cubeData[offset+3] = alpha;

                offset += 4;
            }
        }
    }

    // Create memory with the cube data
    NSData *data = [NSData dataWithBytesNoCopy:cubeData
                                        length:cubeDataSize
                                  freeWhenDone:YES];
    CIFilter *colorCube = [CIFilter filterWithName:@"CIColorCube"];
    [colorCube setValue:[NSNumber numberWithInt:size] forKey:@"inputCubeDimension"];
    // Set data for cube
    [colorCube setValue:data forKey:@"inputCubeData"];

    [colorCube setValue:im forKey:@"inputImage"];
    im = [colorCube valueForKey:@"outputImage"];

    CIFilter *sourceOver = [CIFilter filterWithName:@"CISourceOverCompositing"];
    [sourceOver setValue:im forKey:@"inputImage"];
    [sourceOver setValue:backImage forKey:@"inputBackgroundImage"];

    im = [sourceOver valueForKey:@"outputImage"];

    return im;
}

- (NSColor*)colorAtX:(NSUInteger)x y:(NSUInteger)y
{
    NSBitmapImageRep* bitmap = [[NSBitmapImageRep alloc] initWithCIImage:self];
    NSColor *color = [bitmap colorAtX:x y:y];
    [bitmap release];
    return color;
} 
```

# sql - 如何从此查询中获得所需的结果？

> ID：16139138
> 
> 赞同：1
> 
> 时间：2013-04-22T03:50:54.783
> 
> 标签：sql, sql-server-2008

我有类似于我的这个问题的问题： [sql server 2008 case statement in where clause not working](https://stackoverflow.com/questions/16118306/sql-server-2008-case-statement-in-where-clause-not-working)

我有相同的文档、SR 和事件表。

我的文档表结构是这样的：

```
documentid int, 
documenttype nvarchar(50),
relationid int,
document image,
docdate date 
```

和 SR 表结构：

```
SRId int,
CustomerId int, ( related to customer table)
SRdetail,
SRDate 
```

和事件表：

```
EventId int,
SRId int, (related to SR table)
Event,
EventDate 
```

我用这个查询正确地得到了所有的行：

```
Select * 
from documents d 
left join SR s on d.relationid = s.SRId 
left join Events e on d.relationid = e.EventId 
```

但我也必须进行过滤。就像我需要按客户显示所有文件。

所以我正在执行这样的查询：

```
 Select * 
 from documents d 
 left join SR s on d.relationid = s.SRId 
 left join Events e on d.relationid = e.EventId 
 where (s.CustomerId = 123 or 
        e.SRId in (select SRId from SR where CustomerId = 123)) 
```

但它没有给我适当的输出。它显示了一些差异客户事件和该客户的 SR 的记录。意味着它没有正确过滤。

我确实尝试使用'and'而不是'or'，但使用'and'它只显示一些记录。

我在查询的某个地方错了吗？

谁能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:07:35.917

我认为当你想过滤数据时，你只需要将左连接更改为内连接，左连接过滤不会做任何事情

```
Select * 
from documents d 
left join SR s on d.relationid = s.SRId and d.documenttype = 'sr'
left join Events e on d.relationid = e.EventId and d.documenttype = 'event'
where s.CustomerId = 123 or 
      e.SRId in (select SRId from SR where CustomerId = 123) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:32:21.393

> 并且 e.SRID=s.SRID cond 将始终匹配

在上面的评论中，我猜是：

```
Select * from documents d 
left join SR s on d.relationid = s.SRId 
left join Events e 
on d.relationid = e.EventId 
where 
(s.CustomerId = 123 AND e.SRID=s.SRID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:11:28.017

尝试：

```
Select * 
from documents d 
left join SR s on d.relationid = s.SRId and s.CustomerId = 123
left join Events e 
     join SR se on e.SRId = se.SRId and se.CustomerId = 123
on d.relationid = e.EventId 
where coalesce(s.CustomerId, se.CustomerId) = 123 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:20:23.197

我的问题得到了解决。

我使用所有 3 个表和此查询创建一个视图：

```
 Select * from documents d left join SR s on d.relationid = s.SRId left join Events e on d.relationid = e.EventId 
```

而不是我在该视图上使用 where 条件来按客户过滤数据。

非常感谢大家帮助我。非常感谢。

# c# - 如何根据 C# DataGridView 的变化更新 db？

> ID：16139140
> 
> 赞同：0
> 
> 时间：2013-04-22T03:51:08.207
> 
> 标签：c#, database, datagridview

我的一个表单上有一个 DataGridView 和一个保存按钮。用户可以在 gridview 中编辑数据（数据来自数据库），我想在保存按钮单击用户编辑的数据时更新数据库。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:05:13.290

在您的保存按钮单击事件上

```
 private void SaveButton_Click(object sender, EventArgs e)
    { 
     System.Data.DataTable dsnew = ((DataView)gridView1.DataSource).Table;
    } 
```

这将使您的gridview进入数据集

在数据集中获取数据后，您可以执行必要的**更新**或**插入**查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T19:02:21.803

此外，请记住终止用户正在进行的任何当前编辑。

```
gridView1.EndEdit();
((DataRowView)gridView1.CurrentRow.DataBoundItem).EndEdit(); 
```

第一行通常就足够了，但是当您将 DataGridView 对象绑定到 DataView 时，您需要第二行来强制更新底层 DataTable。

# c# - DI、实体框架和延迟执行

> ID：16139143
> 
> 赞同：1
> 
> 时间：2013-04-22T03:51:21.490
> 
> 标签：c#, .net, asp.net-mvc, dependency-injection, ninject

我在我的项目上设置了 DI 注入，它注入了一个 IUnitOfWork 的实现，它有我的存储库和一个 Commit() 方法。我将它注入我的业务层，一切都很好。

```
public Business(IUnitOfWork context) {
    this.Context = context;
}

public IEnumerable<User> ExpiredUsers() {
    return this.Context.Users.Query().Where(u => u.Expired == true);
} 
```

这个业务类被注入到我的控制器中

```
public class UsersController : Controller {
    public UsersController(Business business) {
        this.Business = business;
    }

    public ActionResult Home() {
        return View(new HomeViewModel(business.ExpiredUsers());
    }
} 
```

用户是一个 IQueryable，我的业务方法使用实体框架很好地转换为 SQL。我的问题/担心是在执行此方法后，查询用户对象的属性导致延迟执行。在我的例子中，假设视图中的某些内容进入了每个用户的 address.State.Cities 或其他导致延迟执行和查询数据库 n 次的属性。

我已经使用 Ninject 将 DI 设置为每个请求一次的数据库上下文 (IUnitOfWork)。由于数据库上下文仍处于打开状态，我不知道如何防止这种情况发生。我宁愿视图抛出异常；这样我就可以及早发现这些问题。为了完整起见，这是我的模块。

```
public class Module : NinjectModule
{
    public override void Load()
    {
        this.Bind<IUnitOfWork>().To<SqlUnitOfWork>().InRequestScope();
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T03:55:57.597

通过调用 ToList() 强制 ExpiredUsers 枚举列表：

```
return this.Context.Users.Query().Where(u => u.Expired == true).ToList(); 
```

# python - 有条件地组合熊猫数据框中的列

> ID：16139147
> 
> 赞同：1
> 
> 时间：2013-04-22T03:51:55.793
> 
> 标签：python, pandas

我有一个看起来像这样的 DataFrame：

```
 x1  x2 
0   4   1 
1   0   2 
2   5   1 
3   0   3 
4   4   2 
```

现在我想创建另一个列，它取列的平均值，`x1`如果是，则`x2`返回：`0``x1``0`

```
 x1  x2  ave
0   4   1  2.5 
1   0   2  0
2   5   1  3 
3   0   3  0
4   4   2  3 
```

这也不是

```
data['ave'] = (data['x1'] + data['x2'])/2 if data['x1'] > 0 else 0 
```

也不是这个

```
data['ave'] = (data['x1'] != 0)*(data['x1'] + data['x2'])/2 
```

出于明显的原因（系列不能用于这些操作）。

我知道这很容易使用循环来完成，但是有没有一种速记的pythonic方式呢？

正确的python数据如下：

```
data = pd.DataFrame({'x1': (4,0,5,0,4), 'x2': (1,2,1,3,2)}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:03:14.543

你很亲密。您的两种方法都应该只需要一两次调整即可。方法#1：

```
>>> df = pd.DataFrame({'x1': (4,0,5,0,4), 'x2': (1,2,1,3,2)})
>>> df["ave"] = (df["x1"] != 0) * (df["x1"] + df["x2"])/2.
>>> df
   x1  x2  ave
0   4   1  2.5
1   0   2  0.0
2   5   1  3.0
3   0   3  0.0
4   4   2  3.0 
```

如果您省略`.`in`2.`并且您的列是整数，则由于整数除法，您可能无法获得预期的结果，但`Series`可以毫无问题地使用。

方法#2：

```
df["ave"] = df.apply(lambda r: (r["x1"] + r["x2"])/2\. if r["x1"] > 0 else 0, axis=1) 
```

将函数传递给`apply`并指定`axis=1`.

方法#3a、3b：

```
df["ave"] = df.mean(axis=1) * (df["x1"] != 0) 
```

或者

```
df["ave"] = df[["x1", "x2"]].mean(axis=1)
df["ave"][df["x1"] == 0] = 0 
```

等等。

# python - 语法错误：关键字 arg 之后的非关键字 arg - OpenErp

> ID：16139152
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:52:40.967
> 
> 标签：python, syntax, module, field, openerp

我收到了这个错误

```
Client Traceback (most recent call last):
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\http.py", line 203, in dispatch
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\controllers\main.py", line 1410, in load
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 43, in proxy
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 31, in proxy_method
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 104, in send

Server Traceback (most recent call last):
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 90, in send
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\netsvc.py", line 293, in dispatch_rpc
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\service\web_services.py", line 622, in dispatch
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\service\security.py", line 40, in check
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\pooler.py", line 49, in get_pool
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\pooler.py", line 33, in get_db_and_pool
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\registry.py", line 192, in get
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\registry.py", line 218, in new
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 344, in load_modules
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 259, in load_marked_modules
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 162, in load_module_graph
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\module.py", line 405, in load_openerp_module
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\module.py", line 133, in load_module
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\certificados\__init__.py", line 1, in <module>
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\certificados\certificados.py", line 37
'Valor_En_Divisas' : fields.function(multi_a_b, type='integer', 'Valor En Divisas'),
SyntaxError: non-keyword arg after keyword arg 
```

这是我 module.py 中的代码

```
 _columns = {
    'Codigo_Arancelario' : fields.integer('Codigo Arancelario'),
    'product_id' : fields.many2one('product.product', 'Material'),
    'Descripcion_Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
    'Especificaciones_Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
    'Cantidad' : fields.float('Cantidad'), 'Unidad_de_Medida': fields.many2one('product.uom', 'Unidad de Medida'),
    'Precio_Unitario_Declarado' : fields.float('Precio Unitario Declarado'), 'Moneda' : fields.many2one('res.currency', 'Moneda'),
    'Valor_En_Divisas' : fields.function(multi_a_b, type='integer', 'Valor En Divisas'),
    'requisicion_id' : fields.many2one('certificados.certificados', 'Certificados de No Produccion', ondelete='cascade'),
    'Cantidad_Consumida' : fields.float('Cantidad Consumida'), 'Cantidad_Disponible' : fields.float('Cantidad Disponible'),

} 
```

作为“Valor_En_Divisas”的错误语法，但我不知道究竟是什么给了我这个错误？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T03:55:00.713

您有一个非关键字参数：

```
fields.function(multi_a_b, type='integer', 'Valor En Divisas'),
                                           ^^^^^^^^^^^^^^^^^^ 
```

在关键字参数之后：

```
fields.function(multi_a_b, type='integer', 'Valor En Divisas'),
                           ^^^^^^^^^^^^^^ 
```

要修复它，请将最后一个作为关键字参数：

```
fields.function(multi_a_b, type='integer', string='Valor En Divisas'), 
```

# php - android模拟器中不显示消息框

> ID：16139153
> 
> 赞同：0
> 
> 时间：2013-04-22T03:52:52.433
> 
> 标签：php, android, messagebox

我是 android 应用程序开发的新手。我做了一个编码，用于将数据存储在 android.it 的 wamp 服务器数据库中。它运行良好。但我没有从 PHP 到 android.我收到成功消息。我不知道我犯了什么错误。这是我的编码 .java 文件

```
package com.example.loga;

import android.os.Bundle;

import android.app.Activity;
import android.app.AlertDialog;

import android.view.Menu;
import android.widget.Button;

import java.util.ArrayList;
import java.util.List;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.app.ProgressDialog;

import android.os.AsyncTask;
import android.util.Log;
import android.view.View;
import android.widget.EditText;

public class MainActivity1 extends Activity {

     private ProgressDialog pDialog;

     JSONParser jsonParser = new JSONParser();
        EditText inputuserid;
        EditText inputserverid;

        private static String url_register = "http://10.0.2.2/android_connect/register.php";
        // JSON Node names
        private static final String TAG_SUCCESS = "success";

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_activity1);
         // Edit Text
        inputuserid = (EditText) findViewById(R.id.editText1);
        inputserverid= (EditText) findViewById(R.id.editText2);
        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view) {
                // creating new product in background thread
                new add().execute();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main_activity1, menu);
        return true;
    }
    class add extends AsyncTask<String, String,String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity1.this);
            pDialog.setMessage("your Registration is processing..wait for few sec..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String userid = inputuserid.getText().toString();
            String serverid = inputserverid.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("userid",userid));
            params.add(new BasicNameValuePair("serverid", serverid));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_register,
                    "POST", params);
            // check log cat for response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    AlertDialog alertDialog;
                    alertDialog = new AlertDialog.Builder(MainActivity1.this).create();
                    alertDialog.setTitle("password verification..");
                    alertDialog.setMessage("success.!!");
                    alertDialog.show();

                    finish();
                } else {
                    // failed to create product
                }
             }
            catch (Exception e) {
                e.printStackTrace();
            }

            return null;

        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }

} 
```

我的 PHP 编码是

```
<?php
 $response = array();
 // check for required fields
if (isset($_POST['userid']) && isset($_POST['serverid']))
{

    $userid = $_POST['userid'];
    $serverid= $_POST['serverid'];
       // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO opass(User_ID, Server_ID ) VALUES('$userid', '$serverid')");

    // check if row inserted or not
    if ($result) 
{
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = " Registered successfully";

        // echoing JSON response
        echo json_encode($response);
    }
 else 
{
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
}
 else 
{
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}

?> 
```

我想在数据库中存储数据后在模拟器中显示一个消息框。帮助我。谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:01:34.527

无法在 doInBackground(String... args) 方法中进行 UI 修改。将创建和显示对话框的逻辑移动到 onPostExecute(String file_url) 方法中。

从 doInBackground() 返回一个布尔状态并检查 onPostExecute() 中的状态并相应地显示对话框。

# ios - 用两根手指画直线

> ID：16139157
> 
> 赞同：3
> 
> 时间：2013-04-22T03:53:25.893
> 
> 标签：ios, xcode, core-graphics

如何在用户仍在进行拖动或触摸时用 2 个手指绘制/绘制一条直线，并且这条线是可见的？我已经尝试过使用 coregraphics 进行简单的绘画，但这对我来说似乎有点复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:45:27.153

就贾斯汀而言，只需处理`touchesBegan`and `touchesMoved`。

因此，如果您子类`UIView`化，CoreGraphics 实现可能如下所示：

```
@interface CustomView ()

@property (nonatomic, strong) NSMutableArray *paths;
@property (nonatomic, strong) UIBezierPath *currentPath;

@end

@implementation CustomView

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self setMultipleTouchEnabled:YES];
    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (!self.currentPath)
    {
        if (!self.paths)
            self.paths = [NSMutableArray array];

        self.currentPath = [UIBezierPath bezierPath];
        self.currentPath.lineWidth = 3.0;

        [self.paths addObject:self.currentPath];

        [self touchesMoved:touches withEvent:event];
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([touches count] != 2)
        return;

    [self.currentPath removeAllPoints];

    __block NSInteger i = 0;
    [touches enumerateObjectsUsingBlock:^(UITouch *touch, BOOL *stop) {
        CGPoint location = [touch locationInView:self];

        if (i++ == 0)
            [self.currentPath moveToPoint:location];
        else
            [self.currentPath addLineToPoint:location];
    }];

    [self setNeedsDisplay];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.currentPath = nil;
}

- (void)drawRect:(CGRect)rect
{
    [[UIColor redColor] setStroke];
    [[UIColor clearColor] setFill];

    for (UIBezierPath *path in self.paths)
    {
        [path stroke];
    }
}

- (void)reset
{
    self.paths = nil;
    [self setNeedsDisplay];
}

@end 
```

或者，您也可以使用 Quartz 2D 并定义自己的`CAShapeLayer`对象，然后您的视图子类或视图控制器可以执行类似的操作（不用说，这是视图控制器实现；视图实现应该很明显）：

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

@property (nonatomic, weak) CAShapeLayer *currentLayer;
@property (nonatomic, strong) UIBezierPath *currentPath;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.view setMultipleTouchEnabled:YES];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (!self.currentLayer)
    {
        CAShapeLayer *layer = [CAShapeLayer layer];
        layer.lineWidth = 3.0;
        layer.strokeColor = [[UIColor redColor] CGColor];
        layer.fillColor = [[UIColor clearColor] CGColor];
        [self.view.layer addSublayer:layer];
        self.currentLayer = layer;

        self.currentPath = [UIBezierPath bezierPath];

        [self touchesMoved:touches withEvent:event];
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([touches count] != 2)
        return;

    [self.currentPath removeAllPoints];

    __block NSInteger i = 0;
    [touches enumerateObjectsUsingBlock:^(UITouch *touch, BOOL *stop) {
        CGPoint location = [touch locationInView:self.view];

        if (i++ == 0)
            [self.currentPath moveToPoint:location];
        else
            [self.currentPath addLineToPoint:location];
    }];

    self.currentLayer.path = [self.currentPath CGPath];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.currentPath = nil;
    self.currentLayer = nil;
}

- (IBAction)didTouchUpInsideClearButton:(id)sender
{
    for (NSInteger i = [self.view.layer.sublayers count] - 1; i >= 0; i--)
    {
        if ([self.view.layer.sublayers[i] isKindOfClass:[CAShapeLayer class]])
            [self.view.layer.sublayers[i] removeFromSuperlayer];
    }
}

@end 
```

对于后一种方法，您需要[将 QuartzCore.framework 添加到您的项目](http://developer.apple.com/library/mac/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)中。

# .htaccess - .htaccess 重写旧的内容链接

> ID：16139168
> 
> 赞同：0
> 
> 时间：2013-04-22T03:54:10.297
> 
> 标签：.htaccess, redirect

我有一个正在开发的 Wordpress 网站`http://domain/dev`，现在它已经准备好了，我把它移到了`http://domain`. 问题是，仍有一些`img`标签等指向`http://domain/dev/wp-content/and-so-on`. 我将如何重写这些？我已经试过了`RewriteRule ^/dev/(.*)$ /$1 [R=301]`。行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:59:04.003

> 您的重写规则：`RewriteRule ^/dev/(.*)$ /$1 [R=301]`

`^/`在重写规则中测试的 URI 路径中不存在前导斜杠。因此，也不能在正则表达式中。

`domain/dev`在目录中的一个 .htaccess 文件中尝试此操作。

```
RewriteEngine On
RewriteRule ^(.*) /$1 [NC,L] 
```

由于此时没有 WP 安装，`domain/dev`这是放置带有此代码的 .htaccess 文件的最佳位置。您可以删除其他所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:00:55.077

它可能就像你缺少这条线一样简单：

```
RewriteEngine on 
```

...在您的 .htaccess 文件的顶部：

# python - 如何确定用户当前是否在 Django 中处于活动状态

> ID：16139169
> 
> 赞同：0
> 
> 时间：2013-04-22T03:54:10.280
> 
> 标签：python, django

有没有办法查看用户当前是否在网站上登录并处于活动状态？

例如，我知道您可以检查用户的身份验证令牌，看看他是否仍然“积极登录”，但这并不能告诉我太多，因为从技术上讲，用户可以登录两周，尽管只是积极在该网站上停留一分钟。last_login 同样没有帮助。

在 django 中检查用户当前是否处于活动状态的好方法是什么？我已经在 Google Analytics 中完成了这项工作，但我想知道如何才能完全采用 django 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:35:06.200

有几种方法可以确定用户活动：

1）使用javascript向服务器发送定期请求。

+：您将能够确定用户活动，尽管他积极地在现场工作或只是保持打开窗口。

-：请求太多。

2）使用django中间件

-：如果他只保持打开窗口，则无法确定用户活动

3）使用异步框架来保持长连接。例如龙卷风。

这是最干净的方式，但也是最费力的。

# powershell - 通过 Windows 命令行和 Powershell 对页面进行基准测试

> ID：16139173
> 
> 赞同：0
> 
> 时间：2013-04-22T03:54:54.120
> 
> 标签：powershell, cmd, benchmarking

我想对站点的响应时间进行基准测试，并通过 Windows 命令行 (WIN+R) 模拟负载

这可能吗？

这个linux命令的windows等价物是什么：

```
$ ab -n 1000 -c 5 http://yourpage.com 
```

Powershell 3 等效项的额外积分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:22:59.023

没有等效的内置 PowerShell cmdlet 可以执行此操作。我从 ab 的[手册页](http://linux.die.net/man/1/ab)中看到，您的命令向 Web 服务器发送了 1000 个请求，一次 5 个。[`System.Net.WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)您可以使用或类在 PowerShell 中推出自己的解决方案[`System.Net.HttpwebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)，并使用 PowerShell 作业、并行 for-loop 工作流或异步管道实现并发，但是已经有为此任务预先构建的解决方案，例如[jmeter](http://jmeter.apache.org/)。

# java - 为什么，如果搜索的插入点在元素 2，返回的实际插入点将是 -3？

> ID：16139177
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:55:07.713
> 
> 标签：java

我在“不成功的搜索返回一个表示插入点的 int 索引中不理解这一点`Collection` 。插入点是集合/数组中将插入元素以保持集合/数组正确排序的位置。因为正返回值和 0 表示搜索成功，该`binarySearch()` 方法使用负数表示插入点。由于**0 是成功搜索的有效结果，所以第一个可用的插入点为 -1。因此，实际插入点表示为 (-(insertion point) -1). 例如，如果搜索的插入点位于元素 2，则返回的实际插入点将为 -3。** "

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:26:59.780

api 使用范围 [0, intinity) 来表示 FOUND 结果 - 因此返回 0 意味着它实际上在索引 0（集合/数组的第一个索引）中找到了您要查找的内容。

这意味着可用于返回 NOT_FOUND 结果的范围是负数 - (-inf, -1]

那么，在这种约束下，您如何传达结果“未找到请求的元素，但应在索引 0 处插入”？

您不能返回 -0，因为这与 +0 相同并且会指示 FOUND 结果。所以你给你的负数加上一个偏移量。这样“应该在索引 0”变成 -1，“应该在索引 1”变成 -2 等等。

# python - 从 python 正则表达式中取消设置标志

> ID：16139179
> 
> 赞同：3
> 
> 时间：2013-04-22T03:55:21.877
> 
> 标签：python, regex

我有大量的正则表达式，我使用一些标志来应用它们，例如：

```
re.search(aRegex,aString,flags=re.IGNORECASE | re.UNICODE) 
```

不幸的是，有一两个我不想忽略大小写。Python 提供了一种方便的方法来从正则表达式中设置标志（例如：`r'(?iu)...'`设置`re.IGNORECASE`和`re.UNICODE`标志）。

有没有办法可以从表达式中**取消设置标志？**也许是这样的：

```
r'(?i-)...' 
```

或者

```
r'(?I)...' 
```

强制区分大小写。（顺便说一句：这些都不起作用..）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:00:10.433

在 Python`re`模块中设置标志（在正则表达式或函数中）后，就无法取消设置标志。（也没有办法为正则表达式的一部分设置标志）。

[`regex`](https://pypi.python.org/pypi/regex)如果您需要此类功能，请考虑使用包。

# atmosphere - 在 Nettosphere 初始化之前为 null BroadcasterFactory

> ID：16139186
> 
> 赞同：1
> 
> 时间：2013-04-22T03:56:03.157
> 
> 标签：atmosphere

在通过它的构建器构建我的 Nettosphere 之前，我想将 BroadcasterFactory 注入到 Publisher 样式的类中。但是对 BroadcasterFactory.getDefault() 的调用在通过构建我的 Nettosphere 进行初始化之前返回 null。我想我可以先自己构建一个 BroadcasterFactory，但这似乎与 Nettosphere 构建过程相混淆。

在较高级别上，我希望从后端访问广播器（每个连接 1 个），以便将单个消息推送到客户端。

我可以制作自己的广播公司地图，但广播公司已经这样做了，我真的不想管理 2 家广播公司商店。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:48:17.787

您使用的是哪个版本的大气？

刚刚用 2.0.0-SNAPSHOT 进行了测试，它工作正常。

我怀疑它们以前是一种回归。

# iphone - 所有单元格的 UITableViewCell BackgroundImage

> ID：16139189
> 
> 赞同：1
> 
> 时间：2013-04-22T03:57:01.913
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我`UITableViewCell`在下面的代码中将所有的背景图像设置为相同的模式：

```
- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.backgroundView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"SelectAnAlbumTableViewCellBackground"]] autorelease];
} 
```

哪个有效，除了任何空单元格。我想知道如何设置 ALL 的背景`UITableViewCell`，而不仅仅是那些有数据的背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:06:36.990

问题是方法
`

```
- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

仅对非空单元格调用。

所以你可以在这个方法中增加单元格的数量

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

当您在带有数据的单元格中时，您可以添加标签或您想要的内容，但是当您在空单元格中时，您什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:19:35.573

为表格视图设置该单元格图像。

```
 TableView.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"Cellimage.png"]]; 
```

这是我的手机图片：

![在此处输入图像描述](https://i.stack.imgur.com/KZUJs.png)

这是我的表格视图：

![在此处输入图像描述](https://i.stack.imgur.com/BNEGV.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:27:28.150

如果您需要为`Cell`只需使用以下行设置背景图像：

```
UIImageView *myImgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cellImage.png"]];
myImgView.frame = CGRectMake(0, 0, 300, 50);
[cell.contentView addSubview:myImgView]; 
```

通过使用此代码，您将获得获取数据原因的图像，因为只有在获取数据时才会调用。

如果你想这样做，那么你必须设置表格背景颜色。

希望这会有所帮助。

# perl - 如何计算perl中2个unix时间戳之间的天数？

> ID：16139193
> 
> 赞同：2
> 
> 时间：2013-04-22T03:58:03.583
> 
> 标签：perl, unix-timestamp

有任何简单的方法可以计算 perl 中两个 unix 时间戳之间的天数，例如 $time1= 1366601846 和 $time2 = 1366431011，因此输出为 2 天。

即使两个unix时间戳之间的差异只有两秒，也应该被视为1天的差异。

之前谢谢。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:53:20.903

在欧洲/巴黎，这两个时间戳是

```
2013/04/20 06:10:11
2013/04/22 05:37:26 
```

不清楚你想要什么。

在欧洲/巴黎，时差为 1 天 23 小时 15 分钟。凑整，就是2天。如果这是你想要的，你可以使用

```
use DateTime qw( );

my $dt1 = DateTime->from_epoch( epoch => 1366601846, time_zone => 'local' );
my $dt2 = DateTime->from_epoch( epoch => 1366431011, time_zone => 'local' );

my ($days, $minutes, $ns) = ($dt1 - $dt2)->in_units(qw( days minutes nanoseconds ));
++$days if $minutes || $ns;

print("$days\n"); 
```

在欧洲/巴黎，日历日期相差 2 天。如果这是你想要的，你可以使用

```
use DateTime qw( );

my $dt1 = DateTime->from_epoch( epoch => 1366601846, time_zone => 'local' );
my $dt2 = DateTime->from_epoch( epoch => 1366431011, time_zone => 'local' );

my $days = $dt1->delta_days($dt2)->in_units('days');

print("$days\n"); 
```

除以 24*60*60 并不总是有效，无论您的意思是什么。在这两种情况下，答案都取决于您指定的时区。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-22T04:19:42.597

要获得两个 unix（纪元）日期之间天数差异的浮点数，请尝试以下操作：

`$days = abs ($time1 - $time2) / 86400;`

Unix 时间戳（或纪元时间戳）是自 1970 年 1 月 1 日 12AM UTC 以来的秒数的度量，因此原始差异是以秒为单位的差异。86400 是一天中的总秒数（60 分钟 * 60 秒 * 24 小时），上面的结果是天数的差异。

但是，仅此一项就会给您留下一个长浮点数，您可能希望使用 Posix 模块中的 ceil() 或 floor() 来修剪它，或者简单地使用 printf 或 sprintf 来更改变量值本身：

`printf("%.0f", $days);`

`$days = sprintf("%.0f", $days);`

# jquery - jquery用变量分配和调用ID

> ID：16139196
> 
> 赞同：3
> 
> 时间：2013-04-22T03:58:13.197
> 
> 标签：jquery, variables, selector

假设我有以下代码：

```
 textInput = $('#outputTextInput').val();

   $('#outputAdd').click(function(){

       $('#status_table tr:last').after('<tr id="output_newrow_"+textInput><td>1</td><td id="type_row_"+textInput>lala</td><td id="num_row_"+textInput>num row '+textInput+'</td><td><img class="image" src="static/OffLamp-icon.png" style="height:64px; width=64px"/></td></tr>');

    });
   $('#outputRemove').click(function(){

        $('#status_table').find("#output_newrow_"+textInput).remove();

   }); 
```

然后我想用 ID "output_newrow_"+textInput 或 "type_row_"+textInput 调用那个选择器，这样......

```
$('#how_should_i_write_it_here').append(textInput) 
```

我不知道我应该如何称呼那个选择器......

提前感谢所有帮助:)

更新！这是[小提琴](http://jsfiddle.net/yvonnezoe/KGcrf/1/)链接。我现在的问题是，当我添加和删除几次时，我无法显示变量“textInput”并且索引号很乱。例如，我键入“1,2,3”，它将在桌子上显示索引 2,3,4。但是当我输入 3 并单击删除时，它会删除索引 2（假设链接到 1）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:27:00.407

您的代码中的字符串连接是错误的，在您的代码`index`中也是`undefined`.

```
$('#outputAdd').click(function(){
   var textInput = $('#outputTextInput').val();
   var str = '<tr id="output_newrow_' +textInput + '">'
               + '<td>1</td><td id="type_row_' + textInput '">lala</td>'
               + '<td id="num_row_' + textInput + '">num row ' + textInput + '</td>'
               + '<td><img class="image" src="static/OffLamp-icon.png" style="height:64px; width=64px"/></td>'
          +  '</tr>';
   $('#status_table tr:last').after(str);

});
$('#outputRemove').click(function(){
    $("#output_newrow_"+textInput).remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:59:37.217

您的字符串连接错误

```
$('#outputAdd').click(function(){
    var textInput = $('#outputTextInput').val();

    $('#status_table tr:last').after('<tr id="output_newrow_'+textInput+'"><td>1</td><td id="type_row_"+textInput>lala</td><td id="num_row_"+textInput>num row '+index+'</td><td><img class="image" src="static/OffLamp-icon.png" style="height:64px; width=64px"/></td></tr>');

});
$('#outputRemove').click(function(){
    $('#status_table').find("#output_newrow_"+textInput).remove();    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:03:30.130

几乎与您分配它的方式相同。像这样：

```
$("#output_newrow_" + textInput).appen(textInput); 
```

# grails - Grails远程分页正在刷新整个页面而不是div

> ID：16139205
> 
> 赞同：4
> 
> 时间：2013-04-22T03:59:28.903
> 
> 标签：grails, plugins, pagination

我在使用 grails 插件远程分页时遇到问题。我创建了一个新项目并复制粘贴了插件的示例代码。有一个书籍类，它有一个列表视图和一个表格模板。分页应该只更新 div 'filteredList' 中的数据，但页面只用布局视图_filtered.gsp 刷新。下面是代码：

控制器：

```
class BookController {
def scaffold = true

def list = {
    [bookInstanceList: Book.list(max:10,offset: 0), bookInstanceTotal: Book.count()]
}

def filter = {
    params.max = Math.min(params.max ? params.int('max') : 10, 100)
    render(template: 'filter', model: [bookInstanceList: Book.list(params), bookInstanceTotal: Book.count()])
} 
```

}

list.gsp - 查看：

```
<%@ page import="com.intelligrape.Book" %>
    <html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="layout" content="main"/>
    <g:set var="entityName" value="${message(code: 'book.label', default: 'Book')}"/>
    <title><g:message code="default.list.label" args="[entityName]"/></title>
</head>

<body>
<div class="nav">
    <span class="menuButton"><a class="home" href="${createLink(uri: '/')}"><g:message code="default.home.label"/></a>
    </span>
    <span class="menuButton"><g:link class="create" action="create"><g:message code="default.new.label" args="[entityName]"/></g:link></span>
</div>

<div class="body">
    <h1><g:message code="default.list.label" args="[entityName]"/></h1>
    <g:if test="${flash.message}">
        <div class="message">${flash.message}</div>
    </g:if>
    <div id="filteredList">
        <g:render template="filter"/>
    </div>
</div>
</body>
</html> 
```

_filtered.gsp - 书表模板

```
 <div>
<div class="list">
<table>
    <thead>
    <tr>

        <util:remoteSortableColumn property="id" title="${message(code: 'book.id.label', default: 'Id')}" update="filteredList" action="filter"/>

        <util:remoteSortableColumn property="author" title="${message(code: 'book.author.label', default: 'Author')}" update="filteredList" action="filter"/>

        <util:remoteSortableColumn property="name" title="${message(code: 'book.name.label', default: 'Name')}" update="filteredList" action="filter" max="5"/>

        <util:remoteSortableColumn property="price" title="${message(code: 'book.price.label', default: 'Price')}" update="filteredList" action="filter"/>

    </tr>
    </thead>
    <tbody>
    <g:each in="${bookInstanceList}" status="i" var="bookInstance">
        <tr class="${(i % 2) == 0 ? 'odd' : 'even'}">

            <td><g:link action="show" id="${bookInstance.id}">${fieldValue(bean: bookInstance, field: "id")}</g:link></td>

            <td>${fieldValue(bean: bookInstance, field: "author")}</td>

            <td>${fieldValue(bean: bookInstance, field: "name")}</td>

            <td>${fieldValue(bean: bookInstance, field: "price")}</td>

        </tr>
    </g:each>
    </tbody>
</table>
</div>
<div class="paginateButtons">
    <util:remotePaginate total="${bookInstanceTotal}" update="filteredList"     action="filter" pageSizes="[5: '5 on Page',10:'10 on Page',15:'15 on Page']" max="5" />
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:02:20.113

我只需要在 list.gsp 页面的标题部分添加 javascript 库标记：

```
<g:javascript library="jquery" /> 
```

# iphone - 使用 OpenGL ES 对简单多边形进行纹理映射？

> ID：16139206
> 
> 赞同：0
> 
> 时间：2013-04-22T03:59:29.220
> 
> 标签：iphone, opengl-es, opengl-es-2.0, texture-mapping

简介：我是 OpenGL 的新手。我首先在我的 PC 上熟悉 OpenGL 上的纹理映射和基本转换/翻译。现在看来我基本上是在重新学习一切，因为我试图使用 GLKit（GLKView 项目模板帮助很大）创建一个带有 PNG 纹理的简单多边形（四边形）。

事情是这样的：使用 GLKBasicEffect 渲染方式，使用项目模板的开箱即用实现，我实际上能够非常快速地启动和运行。但是，我在过去 24 小时内阅读了很多关于忽略这条路线并采用“OpenGL ES2”方式的建议。我对此的一般想法基本上是：固定流水线与可编程流水线。任何。

问题：使用“ES2”方法时，我可以看到我的四边形，但我无法在其上应用纹理。

> 问题：有人知道我可以遵循的简单教程/示例吗？或者更好的是，有人能弄清楚我做错了什么吗？
> 
> *** 插入更新评论 ***
> 
> > 我发现由于我的 openGL 设置中的两件事而引发了 glError：我正在调用 glEnable(GL_TEXTURE_2D) 和 glEnableClientState(GL_TEXTURE_COORD_ARRAY)。如果没有这些，我该如何启用纹理映射？或者也许某个地方有更大的错误？仅供参考，我正在使用 Opengl ES2。
> 
> *** 更新插入结束 ***

我的 ViewController 文件在下面。

```
#define BUFFER_OFFSET(i) ((char *)NULL + (i))

// Uniform index.
enum
{
    UNIFORM_MODELVIEWPROJECTION_MATRIX,
    UNIFORM_NORMAL_MATRIX,
    NUM_UNIFORMS
};
GLint uniforms[NUM_UNIFORMS];

// Attribute index.
enum
{
    ATTRIB_VERTEX,
    ATTRIB_NORMAL,
    NUM_ATTRIBUTES
};

BOOL updateRotate = FALSE;
VertexData *p_meshVertexData = nil;
int g_numFaces = 0;
GLuint g_textures[2]; // 0: photo, 1: picture frame.

const int DataSize = 48;
GLfloat PortraitVertexData[DataSize] =
{
    // CCW
    -0.5f, 0.5f, 0.0f,          0.0f, 0.0f, 1.0f,   0,1,
    -0.5f, -0.5f, 0.0f,         0.0f, 0.0f, 1.0f,   0,0,
    0.5f, -0.5f, 0.0f,         0.0f, 0.0f, 1.0f,   1,0,

    -0.5f, 0.5f, 0.0f,          0.0f, 0.0f, 1.0f,   0,1,
    0.5f, -0.5f, 0.0f,         0.0f, 0.0f, 1.0f,   1,0,
    0.5f, 0.5f, 0.0f,         0.0f, 0.0f, 1.0f,   1,1,

};

@interface ViewController () {
    GLuint _program;

    GLKMatrix4 _modelViewProjectionMatrix;
    GLKMatrix3 _normalMatrix;
    float _rotation;

    GLuint _vertexArray;
    GLuint _vertexBuffer;
}
@property (strong, nonatomic) EAGLContext *context;
//@property (strong, nonatomic) GLKBaseEffect *effect;
@property (strong, nonatomic) GLKTextureInfo *texture;
@property (nonatomic, retain) CaptureEngine *engine;

- (void)setupGL;
- (void)tearDownGL;
- (BOOL)loadShaders;
- (BOOL)compileShader:(GLuint *)shader type:(GLenum)type file:(NSString *)file;
- (BOOL)linkProgram:(GLuint)prog;
- (BOOL)validateProgram:(GLuint)prog;
@end

@implementation ViewController

@synthesize context = _context;
//@synthesize effect = _effect;
@synthesize texture = _texture;
@synthesize engine;

/// View did load.
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    [self initEngine];
    [self setupGL];
}

/// Initialize engine object.
- (void) initEngine
{
    self.engine = [[CaptureEngine alloc] init];

    g_numFaces = DataSize / 8;
    p_meshVertexData = (VertexData *)malloc(g_numFaces * sizeof(VertexData));

    int numIndex = 0;
    for (int i = 0; i < DataSize; i += 8)
    {
        float x = PortraitVertexData[i];
        float y = PortraitVertexData[i + 1];
        float z = PortraitVertexData[i + 2];

        float nx = PortraitVertexData[i + 3];
        float ny = PortraitVertexData[i + 4];
        float nz = PortraitVertexData[i + 5];

        float tx = PortraitVertexData[i + 6];
        float ty = PortraitVertexData[i + 7];

        VertexData data;
        data.vertex.x = x;
        data.vertex.y = y;
        data.vertex.z = z;
        data.normal.x = nx;
        data.normal.y = ny;
        data.normal.z = nz;
        data.textureCoord.x = tx;
        data.textureCoord.y = ty;

        p_meshVertexData[numIndex++] = data;
    }

   // UIImage *testImage = [UIImage imageNamed:@"frame.png"];
   // self.previewImage.image = [ImageLoader ConvertToGrayedImage:testImage];
}

// Dealloc.
- (void)dealloc
{    
    [self tearDownGL];

    if ([EAGLContext currentContext] == self.context) {
        [EAGLContext setCurrentContext:nil];
    }
}

// Memory warning.
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    if ([self isViewLoaded] && ([[self view] window] == nil)) {
        self.view = nil;

        [self tearDownGL];

        if ([EAGLContext currentContext] == self.context) {
            [EAGLContext setCurrentContext:nil];
        }
        self.context = nil;
    }

    // Dispose of any resources that can be recreated.
}

// Setup OpenlGL.
- (void)setupGL
{
    [EAGLContext setCurrentContext:self.context];

    [self loadShaders];

    /*
    self.effect = [[GLKBaseEffect alloc] init];
    self.effect.light0.enabled = GL_TRUE;
    self.effect.light0.diffuseColor = GLKVector4Make(1.0f, 1.0f, 1.0f, 0.5f);
    self.effect.lightingType = GLKLightingTypePerPixel;
    */

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glEnable(GL_TEXTURE_2D);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(VertexData) * g_numFaces, p_meshVertexData, GL_STATIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), 0);

    glEnableVertexAttribArray(GLKVertexAttribNormal);
    glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), (char *)12);

    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(VertexData), (char *)24);

    //// texture sample
  /*
    glActiveTexture(GL_TEXTURE0);
    NSString *path = [[NSBundle mainBundle] pathForResource:@"frame" ofType:@"png"];

    NSError *error;
    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
                                                        forKey:GLKTextureLoaderOriginBottomLeft];

    self.texture = [GLKTextureLoader textureWithContentsOfFile:path
                                                       options:options error:&error];
    if (self.texture == nil)
        NSLog(@"Error loading texture: %@", [error localizedDescription]);

    */
    /*
    GLKEffectPropertyTexture *tex = [[GLKEffectPropertyTexture alloc] init];
    tex.enabled = YES;
    tex.envMode = GLKTextureEnvModeDecal;
    tex.name = self.texture.name;

    self.effect.texture2d0.name = tex.name;
    */

    UIImage *textureImage = [UIImage imageNamed:@"frame.png"];
    [self ApplyTexture: textureImage];

    //// end of texture sample

    glBindVertexArrayOES(0);
}

// Dealloc OpenlGL.
- (void)tearDownGL
{
    [EAGLContext setCurrentContext:self.context];

    glDeleteBuffers(1, &_vertexBuffer);
    glDeleteVertexArraysOES(1, &_vertexArray);

    //self.effect = nil;

    if (_program)
    {
        glDeleteProgram(_program);
        _program = 0;
    }
}

#pragma mark - GLKView and GLKViewController delegate methods

// Update process.
- (void)update
{
    /// Default OpenGL project template (2 cubes) ///

    float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
    GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(60.0f), aspect, 0.1f, 100.0f);

    //self.effect.transform.projectionMatrix = projectionMatrix;

    GLKMatrix4 baseModelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -2.0f);
    baseModelViewMatrix = GLKMatrix4Rotate(baseModelViewMatrix, _rotation, 0.0f, 1.0f, 0.0f);

    /*
    // Compute the model view matrix for the object rendered with GLKit
    GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, 0.0f);
    modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, _rotation, 0, 1.0f, 0);
    modelViewMatrix = GLKMatrix4Multiply(baseModelViewMatrix, modelViewMatrix);

    self.effect.transform.modelviewMatrix = modelViewMatrix;
    */

    // Compute the model view matrix for the object rendered with ES2

    GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0, 0, 0);
    modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, _rotation, 0, 1.0f, 0);
    modelViewMatrix = GLKMatrix4Multiply(baseModelViewMatrix, modelViewMatrix);
    _normalMatrix = GLKMatrix3InvertAndTranspose(GLKMatrix4GetMatrix3(modelViewMatrix), NULL);
    _modelViewProjectionMatrix = GLKMatrix4Multiply(projectionMatrix, modelViewMatrix);

    if (updateRotate)
    {
        _rotation += self.timeSinceLastUpdate * 0.5f;
    }
}

// Render process.
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(1, 1, 1, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBindVertexArrayOES(_vertexArray);

    /*
    // Render the object with GLKit
    [self.effect prepareToDraw];
    glDrawArrays(GL_TRIANGLES, 0, g_numFaces);
    */

    // Render the object again with ES2
    glUseProgram(_program);

    glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
    glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

    glDrawArrays(GL_TRIANGLES, 0, g_numFaces);

}

- (int) ApplyTexture:(UIImage *)image
{
    // 1
    CGImageRef spriteImage = image.CGImage;
    if (!spriteImage)
    {
        NSLog(@"Failed to apply texture.");
        return -1;
    }

    // 2
    size_t width = CGImageGetWidth(spriteImage);
    size_t height = CGImageGetHeight(spriteImage);
    GLubyte * spriteData = (GLubyte *) calloc(width * width * 4, sizeof(GLubyte));

    CGContextRef spriteContext = CGBitmapContextCreate(spriteData,
                                                       width,
                                                       width,
                                                       8,
                                                       width * 4,
                                                       CGImageGetColorSpace(spriteImage),
                                                       kCGImageAlphaPremultipliedLast);

    // 3
    CGContextDrawImage(spriteContext, CGRectMake(0, 0, width, height), spriteImage);
    CGContextRelease(spriteContext);

    // 4
    glGenTextures(1, &g_textures[0]);
    glBindTexture(GL_TEXTURE_2D, g_textures[0]);

    // glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
   // glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, spriteData);
   // glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(spriteImage));
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, width, 0, GL_RGBA,
                 GL_UNSIGNED_BYTE, CFDataGetBytePtr(data));

    free(spriteData);
    return 0;
}

#pragma mark -  OpenGL ES 2 shader compilation

- (BOOL)loadShaders
{
    GLuint vertShader, fragShader;
    NSString *vertShaderPathname, *fragShaderPathname;

    // Create shader program.
    _program = glCreateProgram();

    // Create and compile vertex shader.
    vertShaderPathname = [[NSBundle mainBundle] pathForResource:@"Shader" ofType:@"vsh"];
    if (![self compileShader:&vertShader type:GL_VERTEX_SHADER file:vertShaderPathname]) {
        NSLog(@"Failed to compile vertex shader");
        return NO;
    }

    // Create and compile fragment shader.
    fragShaderPathname = [[NSBundle mainBundle] pathForResource:@"Shader" ofType:@"fsh"];
    if (![self compileShader:&fragShader type:GL_FRAGMENT_SHADER file:fragShaderPathname]) {
        NSLog(@"Failed to compile fragment shader");
        return NO;
    }

    // Attach vertex shader to program.
    glAttachShader(_program, vertShader);

    // Attach fragment shader to program.
    glAttachShader(_program, fragShader);

    // Bind attribute locations.
    // This needs to be done prior to linking.
    glBindAttribLocation(_program, GLKVertexAttribPosition, "position");
    glBindAttribLocation(_program, GLKVertexAttribNormal, "normal");

    // Link program.
    if (![self linkProgram:_program]) {
        NSLog(@"Failed to link program: %d", _program);

        if (vertShader) {
            glDeleteShader(vertShader);
            vertShader = 0;
        }
        if (fragShader) {
            glDeleteShader(fragShader);
            fragShader = 0;
        }
        if (_program) {
            glDeleteProgram(_program);
            _program = 0;
        }

        return NO;
    }

    // Get uniform locations.
    uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX] = glGetUniformLocation(_program, "modelViewProjectionMatrix");
    uniforms[UNIFORM_NORMAL_MATRIX] = glGetUniformLocation(_program, "normalMatrix");

    // Release vertex and fragment shaders.
    if (vertShader) {
        glDetachShader(_program, vertShader);
        glDeleteShader(vertShader);
    }
    if (fragShader) {
        glDetachShader(_program, fragShader);
        glDeleteShader(fragShader);
    }

    return YES;
}

- (BOOL)compileShader:(GLuint *)shader type:(GLenum)type file:(NSString *)file
{
    GLint status;
    const GLchar *source;

    source = (GLchar *)[[NSString stringWithContentsOfFile:file encoding:NSUTF8StringEncoding error:nil] UTF8String];
    if (!source) {
        NSLog(@"Failed to load vertex shader");
        return NO;
    }

    *shader = glCreateShader(type);
    glShaderSource(*shader, 1, &source, NULL);
    glCompileShader(*shader);

#if defined(DEBUG)
    GLint logLength;
    glGetShaderiv(*shader, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetShaderInfoLog(*shader, logLength, &logLength, log);
        NSLog(@"Shader compile log:\n%s", log);
        free(log);
    }
#endif

    glGetShaderiv(*shader, GL_COMPILE_STATUS, &status);
    if (status == 0) {
        glDeleteShader(*shader);
        return NO;
    }

    return YES;
}

- (BOOL)linkProgram:(GLuint)prog
{
    GLint status;
    glLinkProgram(prog);

#if defined(DEBUG)
    GLint logLength;
    glGetProgramiv(prog, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetProgramInfoLog(prog, logLength, &logLength, log);
        NSLog(@"Program link log:\n%s", log);
        free(log);
    }
#endif

    glGetProgramiv(prog, GL_LINK_STATUS, &status);
    if (status == 0) {
        return NO;
    }

    return YES;
}

- (BOOL)validateProgram:(GLuint)prog
{
    GLint logLength, status;

    glValidateProgram(prog);
    glGetProgramiv(prog, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetProgramInfoLog(prog, logLength, &logLength, log);
        NSLog(@"Program validate log:\n%s", log);
        free(log);
    }

    glGetProgramiv(prog, GL_VALIDATE_STATUS, &status);
    if (status == 0) {
        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:25:43.180

哇。看起来纹理映射的 glEnable 已被弃用。 [https://gamedev.stackexchange.com/questions/20656/is-glenable-obsolete-unneeded-in-opengl-es-2](https://gamedev.stackexchange.com/questions/20656/is-glenable-obsolete-unneeded-in-opengl-es-2)

啊。我想我别无选择，只能学习这个像素/片段着色器火箭手术。

# java - 如何有效地在帧之间存储 VolatileImage 的内容？

> ID：16139209
> 
> 赞同：0
> 
> 时间：2013-04-22T03:59:52.927
> 
> 标签：java, performance, java-2d

我正在用 Java 制作游戏并享受[VolatileImage](http://docs.oracle.com/javase/6/docs/api/java/awt/image/VolatileImage.html)提供的加速。我想在我的游戏中加入一种效果，使物体在移开后停留在原来的位置并淡出，就像[这个视频](http://www.youtube.com/watch?v=FnGY4yV9Keo)中描述的运动模糊模仿一样。该视频中涉及的方法涉及将屏幕清除（每帧发生）从不透明更改为部分透明。这种方法是完美的，只是它不适用于 VolatileImages，因为它们的内存内容可能随时丢失。

使用 VolatileImage。[getSnapshot()](http://docs.oracle.com/javase/6/docs/api/java/awt/image/VolatileImage.html#getSnapshot%28%29)解决了这个问题，因为您可以在帧之间保存图像内容以防丢失。但这意味着每帧都会创建一个新图像，如果我们假设分辨率为 1920x1080，那么每帧大约需要 8 MB 的内存分配。我希望有一种方法可以解决这个问题，或者通过某种方式将快照写入预分配的内存，或者通过其他方式实现这种效果。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:48:46.037

我通过创建一个加速的 BufferedImage 解决了我的问题，如下所示：

```
private static BufferedImage renderImg = device.getDefaultConfiguration().
        createCompatibleImage(
                    device.getDisplayMode().getWidth(),
                    device.getDisplayMode().getHeight());
static {
    renderImg.setAccelerationPriority(1);
} 
```

# wpf - WPF 应用程序运行时字体大小更改

> ID：16139211
> 
> 赞同：1
> 
> 时间：2013-04-22T04:00:10.543
> 
> 标签：wpf

我有个问题。我正在 WPF 中创建一个具有 6-7 页和主窗口的应用程序。我已将 WPF app.xaml 中的应用程序字体大小全局设置为 16 CODE：

```
<Style TargetType="{x:Type Page}">
        <Setter Property="FontFamily" Value="Comic Sans MS" />
        <Setter Property="FontSize"  Value="16"/>
        <Setter Property="Height" Value="550"/>
        <Setter Property="Width" Value="700"/>
</Style> 
```

虽然在设计中它看起来不错，并且这种字体大小的变化也反映在应用程序中。但是当我运行该应用程序时，它会更改为其他字体大小，例如 10 或 12 我认为，它变得太小而无法看到。我已经检查并删除了任何本地字体大小定义，但它仍然无法正常工作。

使用 Snoop 我检查了。字体大小保持不变，直到主窗口的框架。但是当页面加载到框架中时，在那个框架中有一个边框（我没有添加或可以看到）会将其更改为 11 大小。如何更改我尚未创建的控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:27:06.820

在你的项目的 app.cs 中添加这个

```
 public App()
    {
        this.InitializeComponent();
        ///add these lines
        FrameworkElement.StyleProperty.OverrideMetadata(typeof(Page), new FrameworkPropertyMetadata
        {
            DefaultValue = FindResource(typeof(Page))
        });

        this.Suspending += OnSuspending;
    } 
```

# javascript - 单击提交按钮后的评分测验

> ID：16139219
> 
> 赞同：0
> 
> 时间：2013-04-22T04:01:06.447
> 
> 标签：javascript

我正在尝试写一个简单的十题测验。但是，我遇到了问题；单击提交按钮后，我无法运行评分代码。有人可以帮忙吗？

HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Quiz #1</title>

<link href="quiz.css" rel="stylesheet" type="text/css" />
<link href="reset.css" rel="stylesheet" type="text/css" />

<script src="quiz.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
type="text/javascript"></script>

</head>

<body>

<div class="center">

<div id="questionContainer">

<div id="header">
    <h1>State Capitol Quiz</h1>
</div>

<div id="left">

<form action="quiz.html" class="container">
<div class="blank">
<br />
    <br />
        <p id="one">1.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Michigan?<br />
            <div class="tab">
                <input type="radio" name="question" value="A" />&nbsp;Lansing<br />
                <input type="radio" name="question" value="B" />&nbsp;Richmond<br />
                <input type="radio" name="question" value="C" />&nbsp;Austin<br />
                <input type="radio" name="question" value="D" />&nbsp;Columbus<br />
            </div>
        </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="two">2.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Virginia?<br />
       <div class="tab">
            <input type="radio" name="question" value="A" />&nbsp;Lansing<br />
            <input type="radio" name="question" value="B" />&nbsp;Richmond<br />
            <input type="radio" name="question" value="C" />&nbsp;Lincoln<br />
            <input type="radio" name="question" value="D" />&nbsp;Reno<br />
      </div>
   </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="three">3.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Arkansas?<br />
        <div class="tab">  
            <input type="radio" name="question" value="A" />&nbsp;Dallas<br />
            <input type="radio" name="question" value="B" />&nbsp;Lincoln<br />
            <input type="radio" name="question" value="C" />&nbsp;Little Rock<br />
            <input type="radio" name="question" value="D" />&nbsp;Cheyene<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="four">4.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Arizona?<br />
        <div class="tab"> 
            <input type="radio" name="question" value="A" />&nbsp;Juneau<br />
            <input type="radio" name="question" value="B" />&nbsp;Honolulu<br />
            <input type="radio" name="question" value="C" />&nbsp;Pheonix<br />
            <input type="radio" name="question" value="D" />&nbsp;Toledo<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="five">5.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Florida?<br /> 
        <div class="tab"> 
            <input type="radio" name="question" value="A" />&nbsp;Oakland<br />
            <input type="radio" name="question" value="B" />&nbsp;Kansas City<br />
            <input type="radio" name="question" value="C" />&nbsp;Tallahassee<br />
            <input type="radio" name="question" value="D" />&nbsp;Miami<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="six">6.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Nebraska?<br />
        <div class="tab">  
            <input type="radio" name="question" value="A" />&nbsp;Omaha<br />
            <input type="radio" name="question" value="B" />&nbsp;Lincoln<br />
            <input type="radio" name="question" value="C" />&nbsp;Sacramento<br />
        <input type="radio" name="question" value="D" />&nbsp;Sab Diego<br />
        </div>
    </p>
</div>
</form>
</div>

<div id="right">
<form action="quiz.html" class="container">
<br />
<br />
<div class="blank">
    <p id="seven">7.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Texas?<br />
        <div class="tab">    
            <input type="radio" name="question" value="A" />&nbsp;Fortworth<br />
            <input type="radio" name="question" value="B" />&nbsp;Richmond<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
            <input type="radio" name="question" value="D" />&nbsp;Las Vegas<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
    <p id="eight">8.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Alaska?<br />
        <div class="tab">   
            <input type="radio" name="question" value="A" />&nbsp;Tulsa<br />
            <input type="radio" name="question" value="B" />&nbsp;Oaklahoma City<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
        <input type="radio" name="question" value="D" />&nbsp;Juneau<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
    <p id="nine">9.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Hawaii?<br /> 
        <div class="tab"> 
            <input type="radio" name="question" value="A" />&nbsp;Paris<br />
            <input type="radio" name="question" value="B" />&nbsp;Honolulu<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
            <input type="radio" name="question" value="D" />&nbsp;Cadilac<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
    <p id="ten">10.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Ohio?<br />
        <div class="tab">   
            <input type="radio" name="question" value="A" />&nbsp;Cleveland<br />
            <input type="radio" name="question" value="B" />&nbsp;Green Bay<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
            <input type="radio" name="question" value="D" />&nbsp;Columbus<br />
        </div>
    </p>
</div>
</form>

<div id="button">        
    <input type="submit" value="submit" />
</div>

</div>

</div>

</div>

</body>
</html> 
```

Javascript：

```
$(document).ready(function(){

 $("#button").click(function(){

var numQues= 10;
var numChoices= 4;
var answers = new Array(10);

answers[0] = "Lansing";
answers[1] = "Richmond";
answers[2] = "Little Rock";
answers[3] = "Pheonix";
answers[4] = "Tallahassee";
answers[5] = "Lincoln";
answers[6] = "Austin";
answers[7] = "Juneau";
answers[8] = "Honolulu";
answers[9] = "Columbus";

function getScore(form){
    var score = 0;
    var currElt;
    var currSelection;
    for(i = 0; i<numQues; i++){
        currElt = i * numChoi;
        for(j = 0; j<numChoi; j++){
            currSelection = form.elements[currElt + j];
            if(currSelection.checked){
                if(currSelection.value == answers[i]){
                score++;
                break;
                }
            }
        }
    }

    score = math.round(score/numQues * 100);
    form.precentage.value = score + "&#37;";
    var corrAnswers = "";
    for(i = 1; i <numQues; i++){
        corrAnswers += i + "." + answers [i - 1] + "\r\n;"
    }
    form.solutions.value = corrAnswers/numQues * 100 + "%";}
});
}); 
```

还有一个补充：我应该为分数结果创建另一个页面还是现在应该看起来如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:03:17.890

改变这个

```
<div id="button">        
    <input type="submit" value="submit" />
</div> 
```

至

```
<div id="buttondiv">        
    <input type="button" id="button" value="submit" />
</div> 
```

看看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:03:52.260

使用类型按钮而不是提交。提交会将表单发送回服务器，这将阻止 JavaScript 运行

```
<input id="myButton" type="button" value="submit" />

$("#myButton").click(function(){}); 
```

# json - Jackson多态反序列化空JSON对象

> ID：16139226
> 
> 赞同：1
> 
> 时间：2013-04-22T04:02:00.513
> 
> 标签：json, jackson

我有一个杰克逊多态问题。我想将 JSON 数据反序列化为多态类型。阅读 Jackson 文档，我可以将 JSON 数据反序列化为多态类型。但是，我有一个特殊情况。我有一个类结构如下：

```
class Supreme {
    private String type;
}
class Foo extends Supreme {
   public String label;
}
class Bar extends Supreme {
} 
```

注意：类 Bar 除了继承的“类型”字段之外没有任何其他成员变量。

我已将该结构转换为：

```
@JsonTypeInfo(use =     JsonTypeInfo.Id.NAME,include = JsonTypeInfo.As.PROPERTY,property ="type")
@JsonSubTypes({@Type(value = Foo.class, name = "Foo"),@Type(value = Bar.class, name = "Bar") })
class Supreme {
}
class Foo extends Supreme {
    public String label;
}
class Bar extends Supreme {
}

String data=
"[{
   "type": "Foo",
   "label": "abc"
},
{
   "type": "Bar"
}]" 
```

如果我传入上面的 json 数据，例如： `new ObjectMapper().readValue(data, new TypeReference<List<Supreme>>());`

我得到类似“无法从 END_TOKEN 反序列化类 Bar”。我相信这是因为 JsonTypeInfo 和 JsonSubTypes 注释已经解析了“类型”属性并发现数组中的第二个实体应该映射到 Bar 类；但是它试图在该 2 实体中的 type 属性之后找到“某物”。换句话说，Jackson 认为它是一个空的 JSON 对象。

*（注意：数组中没有第二个条目的上述数据可以正常工作。换句话说，我们可以反序列化为包含 Foo 对象的列表，因为它至少具有“类型”以外的属性）*

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:57:55.433

错误地，我使用的是 Jackson 1.5，我碰到了 Jackson 1.9，异常消失了。所以杰克逊 1.5 中存在一个错误

# php - silverlight URI 未提交 url 变量

> ID：16139229
> 
> 赞同：0
> 
> 时间：2013-04-22T04:02:26.083
> 
> 标签：php, .net, silverlight, uri

我有一个这样的URI...

```
the_song.Source = new Uri('index.php?song=blah'); 
```

它被设置为媒体元素的来源。

但是，它无法加载，并且根据我的 apache 日志（和 Firebug 给我一个网络错误），silverlight 只是尝试在没有查询的情况下加载 index.php，这是至关重要的。

为什么会这样，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:13:16.460

尝试使 Uri 为

```
the_song.Source = new Uri('index.php?song=blah', UriKind.Relative); 
```

这可能是工作。

# c++ - 使用向量

> ID：16139232
> 
> 赞同：0
> 
> 时间：2013-04-22T04:03:09.633
> 
> 标签：c++, vector

我是一名学生，还没有学过向量，但我现在需要使用它们。我正在尝试制作一个结构向量。struct 是汇编代码的标签。每次我想添加标签时，我都会调整向量的大小，但是，当我尝试从标签中检索信息时，它们都是相同的。不幸的是，我实际上无法分享我的代码，但我会展示我认为有助于我解决这个问题的必要行。那么，我做错了什么？如果您需要查看更多代码，请告诉我。

全球宣布：

```
vector<Label> labeldir; 
```

调整向量大小并添加信息，label 是汇编代码文件中的标签名称：

```
labeldir.resize(labelnum + 1);
labeldir[labelnum].name = label; 
```

注意：它在while循环中运行，每次找到标签时都会增加labelnum。

访问每个标签名称的示例：

```
for (int i = 0; i < labeldir.size(); i++){
    cout << "Label entry " << i << " name : " << labeldir[i].name << endl;
} 
```

相应的输出，注意问题（上面的代码在一个while循环中，这是它的3次迭代）：

```
Label entry 0 name : start
Label entry 0 name : done
Label entry 1 name : done
Label entry 0 name : five
Label entry 1 name : five
Label entry 2 name : five 
```

汇编代码中的前 3 个标签，在第一个和第二个标签之间会有一行，但它们是常规指令。：

```
start   add 1   2   1   decrement reg1
done    halt                end of program
five    .fill   5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:18:08.753

很难确切地看到你做错了什么，但让我猜一下：

您加载向量的代码应该如下所示：

```
#include <string>

struct Label
{
    Label(const std::string& N) : Name(N)
    {}

    Label()
    {}

    std::string Name;
};

int main()
{
    std::vector<Label> labeldir;

    labeldir.push_back(Label("one"));
    labeldir.push_back(Label("two"));
    labeldir.push_back(Label("three"));
    labeldir.push_back(Label("four"));

    int i = 0;
    for(auto l : labeldir)
    {
        std::cout << "Label entry " << i++ << " name : " << l.Name << "\n";
    }

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T04:18:40.270

我几乎敢打赌，`name`您的`Label`结构成员是`char *`. 这意味着不是为每个标签创建一个单独的字符串，而是只创建单独的指针——但它们都指向同一个地方。

当您尝试打印内容时，它们都指向同一个缓冲区，因此每个标签都显示最近读入该缓冲区的名称。

治愈：使用`std::string`代替`char *`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:44:57.900

根据您提供的信息，我假设您在将标签名称添加到矢量 labeldir 时遇到问题。

每当您找到标签时，您都可以通过以下方式添加：

```
vector<Label> laberdir;
//As you fill the struct label with the name
Label label1;
label1.name = "start";
labeldir.pushback(label1);
labelNum = labelNum + 1; 
```

并且当您悲伤时，Label 的结构类型为

```
struct Label
{
     std::string name;
}; 
```

# java - Java 中的 BufferedReader 和 BufferedWriter null

> ID：16139233
> 
> 赞同：0
> 
> 时间：2013-04-22T04:03:11.883
> 
> 标签：java, bufferedreader

**客户端.java**

```
try {
    try {
        br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        received = br.readLine();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("In-Cmd = " + received);

} finally {
    try {
        br.close();
    } catch (Exception e) {}
} 
```

**服务器.java**

```
BufferedWriter bw = null;
try {
    bw = new BufferedWriter(new OutputStreamWriter(connectionSocket.getOutputStream()));
    System.out.println("Out-Cmd = STOP");
    bw.write("stop");
    bw.newLine();
} finally {
    try {
        bw.close();
    } catch (Exception exp) {}
} 
```

所以，我有这个 GUI，客户端可以将文件从本地硬盘上传到服务器，然后我们将复制文件并将它们存储在服务器中。

我可以将 BufferWriter 从客户端发送到服务器完全没有问题，但是当我想从服务器发送到客户端时，我总是收到`null`

难道我做错了什么？

# python - Python rrdtool.create()

> ID：16139234
> 
> 赞同：1
> 
> 时间：2013-04-22T04:03:14.477
> 
> 标签：python, rrdtool, rrd

我有一个我正在尝试创建的 RRD 数据库，并且我编写了几个循环来构建命令，它工作正常，并产生预期的输出。当我实际尝试在 Python 中运行 rrdtool.create 命令时，问题就出现了。这个循环产生一个字符串，我们称之为它`rrdStr`，包含以下内容：

```
'"0x04.rrd", "--step","5",
"DS:TEMP:GAUGE:10:0:100",
"DS:HUMIDITY:GAUGE:10:0:100",
"DS:LIGHT:GAUGE:10:0:1024",
"DS:POT:GAUGE:10:0:1024",
"RRA:AVERAGE:0.5:1:17142",
"RRA:MIN:0.5:1:17142",
"RRA:MAX:0.5:1:17142",
"RRA:AVERAGE:0.5:12:7200",
"RRA:MIN:0.5:12:7200",
"RRA:MAX:0.5:12:7200",
"RRA:AVERAGE:0.5:60:8640",
"RRA:MIN:0.5:60:8640",
"RRA:MAX:0.5:60:8640",
"RRA:AVERAGE:0.5:360:17532",
"RRA:MIN:0.5:360:17532",
"RRA:MAX:0.5:360:17532"' 
```

据我所知，所有引号和换行符都已正确转义。

如果我像这样传递`rrdtool.create`字符串变量：`rrdtool.create(rrdStr)`，我得到输出

```
rrdtool.error: you must define at least one Round Robin Archive 
```

但是，如果我将上面的输出直接复制并粘贴到`rrdtool.create()`函数中，它会像预期的那样工作，并创建数据库。

知道是什么原因造成的以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T02:20:50.627

所以我终于想通了。您必须创建一个列表，而不是创建一个包含正确格式的所有命令的长字符串，在生成命令时将 rrd 命令的每一行添加到列表中。

上面的命令变成：

```
rrdStr = ["0x04.rrd", "--step","5"]
rrdStr += ["DS:TEMP:GAUGE:10:0:100"]
rrdStr += ["DS:HUMIDITY:GAUGE:10:0:100"]
rrdStr += ["DS:LIGHT:GAUGE:10:0:1024"]
rrdStr += ["DS:POT:GAUGE:10:0:1024"]
rrdStr += ["RRA:AVERAGE:0.5:1:17142"]
rrdStr += ["RRA:MIN:0.5:1:17142"]
rrdStr += ["RRA:MAX:0.5:1:17142"]
rrdStr += ["RRA:AVERAGE:0.5:12:7200"]
rrdStr += ["RRA:MIN:0.5:12:7200"]
rrdStr += ["RRA:MAX:0.5:12:7200"]
rrdStr += ["RRA:AVERAGE:0.5:60:8640"]
rrdStr += ["RRA:MIN:0.5:60:8640"]
rrdStr += ["RRA:MAX:0.5:60:8640"]
rrdStr += ["RRA:AVERAGE:0.5:360:17532"]
rrdStr += ["RRA:MIN:0.5:360:17532"]
rrdStr += ["RRA:MAX:0.5:360:17532"] 
```

然后您可以将列表作为唯一命令传递`rrdtool.create(rrdStr)`之前失败的相同命令将成功运行

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-22T08:17:30.480

在 python2.6 rrdtool-python-1.3.8-6.el6.x86_64 上使用 rrdtool.create(*rrdStr)

# eclipse - 在 Eclipse 4 中编辑多个文件时仅显示最近修改的选项卡

> ID：16139237
> 
> 赞同：1
> 
> 时间：2013-04-22T04:03:23.813
> 
> 标签：eclipse, ide

在 Eclipse 3.x 中，如果您同时处理 60 个文件，但在特定会话中只编辑 4 个，那么这四个的选项卡往往会始终显示。例如：如果我编辑标签 1，然后编辑标签 60，标签 1 仍然会显示，我可以快速切换回它。

但是在 Eclipse 4.x 中，显示的选项卡似乎与编辑历史无关。例如：如果我编辑选项卡 1，然后编辑选项卡 60，则不会显示选项卡 1：我将不得不使用下拉菜单重新选择它。

有没有办法恢复 Eclipse 3.x 的功能，在文档之间切换时，最近或会话选项卡保持显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:03:23.813

这是 Eclipse 4 的新 Windows 7 样式的预期行为：请参阅[Eclipse 错误 389169](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389169)。

*您可以通过在General > Appearance中选择**Classic*主题来恢复以前的行为 - 以及以前的样式。

# c# - 我无法反序列化以前成功序列化的数据

> ID：16139241
> 
> 赞同：2
> 
> 时间：2013-04-22T04:03:35.510
> 
> 标签：c#, protobuf-net

我在 Google 中随机输入“最快的序列化 c#”，结果得到了 protobuf.net。我试过了，我认为我可以正确序列化，但由于我无法反序列化，现在无法判断是否存在？！

当试图去序列化时，我得到：

```
A first chance exception of type 'ProtoBuf.ProtoException' occurred in protobuf-net.dll 
```

凉爽的。

**要序列化的数据：**

```
[ProtoContract]
public struct Cow
{
    [ProtoMember(1)]
    public float Weight{ get; private set; }
    [ProtoMember(2)]
    public bool[] HadCowlings{ get; private set; }

    public Cow(float weight, bool[] babies)
        : this()
    {
        this.Weight = weight;
        this.HadCowlings= (bool[])babies.Clone();
    }
...
}

[ProtoContract]
public class Pasture
{
    [ProtoMember(1)]
    public Point Position { get; private set; }
    [ProtoMember(2)]
    public Cow[] Cows { get; private set; }

    public static int HerdSize { get; private set; }

    public static float BoundWidth { get; private set;}
    public static float BoundHeight { get; private set; }

    public Pasture(Cow[] Cows, Point farmPosition)
    {
        this.Cows = (Cow[])Cows.Clone();
        Position = farmPosition;
    }
...
}

[ProtoContract]
public class Farm
{
    [ProtoMember(1)]
    public Point FarmIDCoordinates{ get; private set; }
    [ProtoMember(2)]
    public List<Pasture> Pastures{ get; private set; }

    public static float BoundWidth { get; private set; }
    public static float BoundHeight { get; private set; }

    public static int FarmSize { get; private set; }

    public Farm(int x, int y, FarmType fType)
    {
        if (fType == RegionType.STANDARD)
            Pastures = new List<Pasture>(//make a farm!);
        else
            Pastures = new List<Pasture>(//What he said);

        FarmIDCoordinates = new Point(x, y);
    }
...
} 
```

**如何：**

*放：*

```
 using (ObjectSerializer serializer = new ObjectSerializer())
{
     serializer.ProtoSerialize<Farm>(farm.ToString() + ".bin", aFarm)
} 
```

*得到：*

```
using (ObjectSerializer serializer = new ObjectSerializer())
{
   try
   {
      farmsIOwn.Add(serializer.ProtoDeserialize<Farm>(
                  farmLat.X.ToString() + "_" + farmLong.Y.ToString() + ".bin"));
   }
   catch
   {
      // make me a dummy farm, crashing is for dummies
   }
} 
```

*对象序列化器：*

```
public void ProtoSerialize<T>(string fileName, T objectGraph)
{

   using (var stream = File.Open(fileName, FileMode.Create))
   {
       Serializer.Serialize<T>(stream, objectGraph);
   }
}

public T ProtoDeserialize<T>(string fileName)
{
    T objectGraph;

    using (var stream = File.Open(fileName, FileMode.Open))
    {
       objectGraph = Serializer.Deserialize<T>(stream);
    }

    return objectGraph;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:03:35.510

protobuf-net 的要求之一是提供默认构造函数。因为 Farm 和 Pasture 对象的构造函数都包含参数。不再有默认构造函数。您必须提供一份。

添加一个以获取您的数据。

```
Farm() {}

Pastures() {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:26:06.377

protobuf-net 可以通过多种不同的方式进行配置。默认情况下，它通过无参数构造函数创建对象，因为*该选项适用于所有框架*。在这种用法中，它有点像`XmlSerializer`. 因为您的类型没有构造函数，所以这种用法不起作用。最简单的选择是*添加无参数构造函数*。对于在完整框架上使用，这不需要`public`- 所以`private`/ `protected`etc 构造函数很好 - 但请注意，这个 ( `private`/ `protected`) 不适用于 Silverlight 等。

下一个选项是完全跳过构造函数——很像`DataContractSerializer`. 这可以通过属性或类型模型的运行时配置来完成。为了说明第一个：

```
[ProtoContract(SkipConstructor = true)]
public class Foo {...} 
```

再一次 - 这在大多数框架上都很好用，但也有一些它不起作用（框架实用程序方法根本不存在）。

最后，您可以提供自己的工厂方法；每个类型的全局。这个工厂方法是一个`static`返回 vanilla 实例的方法（可选地接受诸如序列化上下文、请求类型等）。除了提供对构造的完全控制之外，如果您想提供对象池等，这也很有用。此选项适用于所有框架，但需要您编写额外的代码和配置。

# wpf - 使用 MVVM 对 Listbox 的静态项进行命令

> ID：16139243
> 
> 赞同：2
> 
> 时间：2013-04-22T04:03:37.867
> 
> 标签：wpf, xaml, mvvm, listbox, selecteditem

我的视图中有一个包含三个静态项目（姓名、年龄、性别）的列表框，我希望我的 ViewModel 在选择列表框中的项目时执行某些操作。我想使用 MVVM 模式在没有任何代码隐藏的情况下执行此操作。

我的目标是在选择一个项目时导航到一个页面，上述项目也不是来自可观察列表，它在我的 XAML 中是硬编码的。我该怎么做？请教我。如果您不介意发送样品，那将是一个很大的帮助。提前非常感谢。

```
<ListBox x:Name="lbviewlist">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged" >
            <Command:EventToCommand Command ="{Binding ViewCommand}"
                PassEventArgsToCommand="True"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <ListBox.Items>
        <StackPanel  x:Name="lbiview1" Orientation="Vertical">
            <ListBoxItem Content="Name" FontSize="35" Margin="10,0,0,0"
                Foreground="OrangeRed"/>
            <TextBlock TextWrapping="Wrap" Text="View name of the patient"  
                FontSize="25"  Margin="10,0,0,0" Foreground="White"/>
        </StackPanel>
        <StackPanel x:Name="lbiview2" Orientation="Vertical">
            <ListBoxItem Content="Age"  FontSize="35" Margin="10,20,0,0"
                Foreground="OrangeRed"/>
            <TextBlock TextWrapping="Wrap" Text="View age of the patient"  
                FontSize="25"  Margin="10,0,0,0" Foreground="White"/>
        </StackPanel>
        <StackPanel x:Name="lbiview3"  Orientation="Vertical">
            <ListBoxItem Content="Gender" FontSize="35" Margin="10,20,0,0"
                Foreground="OrangeRed"/>
            <TextBlock TextWrapping="Wrap" Text="View the gender of the patient"
                FontSize="25" Margin="10,0,0,0" Foreground="White"/>
        </StackPanel>
    </ListBox.Items>                    
</ListBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:10:04.920

您可以使用数据绑定将 的 绑定到`SelectedItem`视图`ListBox`模型上的属性。然后，在视图模型属性的设置器中，您可以在所选项目更改时运行所需的逻辑。

```
<ListBox SelectedItem="{Binding MySelectedItem}" ... /> 
```

**更新**

好的，首先我强烈建议（不坚持）您使用 MVVM 框架。[如果你在做 MVVM，那么你需要使用一个框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)。

接下来，这些列表项没有理由不能出现在您的视图模型上。它肯定会让你的视野更清晰。

然后你可以设置你`ListBox` `ItemsSource`的绑定到你的视图模型集合，然后在你的视图中使用数据模板来一致地呈现列表中的每个项目。

例如，您的视图最终可能类似于：

```
<ListBox ItemsSource="{Binding MyItems}" SelectedItem="{Binding MySelectedItem}">
   <ListBox.ItemTemplate>
      <DataTemplate>
          <StackPanel>
             <TextBlock Text="{Binding Value}"  ... />
             <TextBlock Text="{Binding Description}" ... />
          </StackPanel>
      </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

更干净，我想你会同意的。

# javascript - Durandal 激活函数多次调用

> ID：16139245
> 
> 赞同：1
> 
> 时间：2013-04-22T04:03:58.573
> 
> 标签：javascript, jquery, viewmodel, durandal

以下代码导致 taginfos 视图模型的激活函数中的两次调用，为什么？

```
$(oTag).fancybox({
   'overlayShow'       : true,
   'width'             : 800,
   'height'            : 500,
   'autoScale'         : true,
   'transitionIn'      : 'elastic',
   'transitionOut'     : 'elastic',
   'type'              : 'iframe',
   'scrolling'         : 'no',
   'href'              : 'http://localhost:1135/#/taginfos/' + item.tagId
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T02:24:34.253

您不能在 activate 函数中使用 jquery 插件。DOM 还没有准备好，jquery 选择器可能找不到任何东西可以提供给fancybox。将所有 jquery 插件调用放在 veiwActivated 函数中。这可能不是您问题的直接答案

这是一个示例：（查看问题部分） [Fancybox v2 不适用于 Durandal](https://stackoverflow.com/questions/16387023/fancybox-v2-not-working-with-durandal/16391041#16391041)

# jquery - jQuery：如果值等于 0，则停止递减文本框值

> ID：16139247
> 
> 赞同：1
> 
> 时间：2013-04-22T04:04:13.427
> 
> 标签：jquery, function, increment, decrement

# 我有的：

我有一个只读文本框和两个链接。第一个链接将文本框的值增加 1，而第二个链接将值减少 1。

# 我需要的：

我需要文本框值在零处停止递减（我不想要负数）。

# 我的代码：

**jQuery：**

```
jQuery(".increment").on('click',function(){
    jQuery(this).next(".amount input").val(parseInt(jQuery(this).next(".amount input").val())+1);
});

jQuery(".decrement").on('click',function(){
    jQuery(this).prev(".amount input").val(parseInt(jQuery(this).prev(".amount input").val())-1);
}); 
```

*注意：使用 .next 和 .prev 是因为我有多个文本框。*

**HTML：**

```
<!--This block of code is occurs more than once.-->
<td class="amount">
    <a href="#" class="increment"></a>
    <input type="text" readonly="readonly" value="0" />
    <a href="#" class="decrement"></a>
</td> 
```

# 一个松散的猜测：

...关于递减...

```
// open onclick code here

    if (jQuery(this).prev(".amount input").val != "0"){

        // decrement code here

    }

// close onclick code here 
```

# 资源：

我的工作代码仿照这个 Stack Overflow 答案：[https ://stackoverflow.com/a/12209831/835950](https://stackoverflow.com/a/12209831/835950)

...为方便起见，存在小提琴：http: [//jsfiddle.net/iMaverick/S3PLG/2/](http://jsfiddle.net/iMaverick/S3PLG/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:08:14.057

[演示](http://jsfiddle.net/4pWXQ/)

```
$("#down").on('click',function(){
    var value = (parseInt($("#incdec input").val() , 10) - 1);
    $("#incdec input").val((value-1) < 0 ? 0 :(value -1));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:09:06.747

几乎：

```
$(document).ready(function() {
    var $textbox = $("#incdec input");

    $("#up").click(function(){
        var value = parseInt($textbox.val(), 10);

        $textbox.val(value + 1);
    });

    $("#down").click(function(){
        var value = parseInt($textbox.val(), 10);

        if (value > 0) {
            $textbox.val(value - 1);
        }
    });
}); 
```

HTML5 还包括一个`<input type="number">`元素：

```
<input type="number" min="0" value="1" /> 
```

# c++ - 测试一个简单的链表，但它坚持向后迭代

> ID：16139252
> 
> 赞同：1
> 
> 时间：2013-04-22T04:04:30.533
> 
> 标签：c++, linked-list

我做了一个简单的链表，看看我是否完全理解它们，我目前正在尝试验证所有数据点是否都在正确的位置。他们不是，但我不知道为什么。我认为问题出在两个方面之一。要么是列表构造错误，要么是我尝试输出数据的方式有问题。

```
//////////////
//linkedlist.h
#ifndef LINKEDLIST_H
#define LINKEDLIST_H
namespace LinkedListMagno
{
    class LinkList
    {
    public:
        LinkList(int theData, LinkList* thePoint) : data(theData), point(thePoint){};
        int getData() {return data;}
        void setData(int theData) {data = theData;}
        LinkList* getLink() {return point;}
        void setLink(LinkList* thePoint) {point = thePoint;}
    private:
        int data;
        LinkList* point;
    };
}//LinkedListMagno
#endif

    ////////////
    //source.cpp
    #include<iostream>
    #include "linkedlist.h"
    using LinkedListMagno::LinkList;
    using std::cin;
    using std::cout;
    using std::endl;

    LinkList* getListPtr(int data[], int lenOfData);
    //precondition: passed an array of integers and the length of the same array
    //postcondition: returns a pointer to a linked list containing the integers from data[] in the given order

    int main()
    {
        LinkList *head, *point;
        int data[] = {0,1,2,3,4,5,6,7,8,9};//these numbers will go into the list in ascending order
        int len = 10;

        head = getListPtr(data, len);
        point = head;

        for(int i=0; i<len; i++)//Pretty sure the problem is here. How on earth is it iterating backwards through the list?
        {
            cout << point->getData();
            point = point->getLink();
        }

        system("PAUSE");
        return 0;
    }

    LinkList* getListPtr(int data[], int lenOfData)
    {
        LinkList *head, *newPoint; //two pointers. One for the head, the other to add nodes

        for(int i=0; i<lenOfData; i++)
        {
            if(i == 0)
            {
                head = new LinkList(data[i], NULL);//create new linklist object using the first data point
                cout << "New Node: " << data[i] << endl;
                newPoint = head;//for the first node, set newPoint equal to the head
            }
            else if(i>0 && i<lenOfData)
            {
                newPoint->setLink(new LinkList(data[i], newPoint->getLink()));
                cout << "New Node: " << data[i] << endl;
                //newPoint = newPoint->getLink(); Derp. Forgot to add this line.
                //for each item in data[], add a new node and move newPoint* to the new location
            }
        }

        return head;
    } 
```

预期输出：

```
New Node: 0
New Node: 1
New Node: 2
New Node: 3
New Node: 4
New Node: 5
New Node: 6
New Node: 7
New Node: 8
New Node: 9
0123456789Press any key to continue . . . 
```

实际输出：

```
New Node: 0
New Node: 1
New Node: 2
New Node: 3
New Node: 4
New Node: 5
New Node: 6
New Node: 7
New Node: 8
New Node: 9
0987654321Press any key to continue . . . (WTF?) 
```

我不明白。它不能在列表中向后迭代，可以吗？单链表不是这样工作的。我唯一能想到的是链接本身是乱序的，但我没有看到我使用的方法有任何问题。你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:12:57.263

通过快速浏览代码，您不会在 getListPtr 中添加新节点时移动 newPoint 指针。因此，每个新节点都直接添加到 head 之后，因为 newPoint 被初始化为 head 并保留在那里。

# database - Web 服务器和数据库服务器如何协同工作？

> ID：16139253
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:04:31.317
> 
> 标签：database, webserver

Web 服务器和数据库服务器如何协同工作以向客户端的 Web 浏览器提供必要的服务和信息？

本来我以为数据库和web服务器是一体的（也就是我以为数据库在web服务器上）；但显然它们是独立的实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:16:00.643

您的问题是开放式的，但我认为您会发现以下内容很有帮助。为此，我将使用 PHP 和 MySQL 参考，但那里有很多。

首先是您的第二个问题：它们是单独的服务，可以但不必在同一硬件上。如果您在 Linux 上，这通常称为[LAMP 堆栈](https://www.google.com/search?q=LAMP%20stack&aq=f&oq=LAMP%20stack&aqs=chrome.0.57j5j0l2j62l2.2570j0&sourceid=chrome&ie=UTF-8)（Linux Apache MySQL PHP）

就实际集成而言，这是通过[使用 PHP 运行](http://php.net/manual/en/book.mysql.php)的 SQL 查询完成的。然后同样使用 PHP 对这些查询的结果进行解析和格式化。然后使用 HTML 将该结果传递给您的 Web 浏览器。

就像我说的，非常开放的结局，但这应该给你一个开始的地方。

# objective-c - “强”属性的问题

> ID：16139257
> 
> 赞同：0
> 
> 时间：2013-04-22T04:04:54.057
> 
> 标签：objective-c

我正在尝试学习Objective-C。所以我刚刚实现了一个 ProfileViewController，这是我的头文件：

```
#import <UIKit/UIKit.h>

@interface ProfileViewController : UIViewController

@property (strong, nonatomic) UIScrollView *scrollView;//strong is not colored by XCode

@end 
```

但是我有以下错误，`@property`我完全坚持它：

```
No 'assign', 'retain' or 'copy' attribute is specified - 'assign' is assumed
Default property 'assign' not appropriate for non-gc object 
```

在我的`ProfileViewController.m`我有以下警告：`Property 'scrollView' needs`setScrollView`need to be defined`

```
Developer Information:

  Version:  4.1 (4B110)
  Location: /Developer
  Applications:
  Xcode:    4.1 (516)
  Instruments:  4.1 (4138)
  Dashcode: 3.0.2 (336)
  SDKs:
  Mac OS X:
  10,6: (10J567)
  10,7: (11A511a)
  iPhone OS:
  4,3:  (8H7)
  iPhone Simulator:
  4,3:  (8H7) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T04:26:07.507

强大的属性是自 Xcode 4.2（LLVM 编译器 3.0）以来可用的 ARC（自动引用计数）的一个特性，比较[https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html](https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:34:22.333

你真的在使用 ARC 吗？您在创建项目时是否勾选了“使用自动引用计数”复选框？如果您使用旧版本的 XCode，那么您将不会获得这样的选项，因为它不支持 ARC。在这种情况下，要么更新您的 xcode，要么继续使用手动内存管理和关键字（例如“分配/非分配”而不是“强/弱”）而不使用 ARC...

# php - Ajax 将内容从 json 数组加载到 div

> ID：16139258
> 
> 赞同：0
> 
> 时间：2013-04-22T04:04:59.790
> 
> 标签：php, javascript, json, jquery

我的网页应该以随机顺序生成一系列问题。每个问题都是一个带有图片和多个选项的单独 HTML 页面。在页面加载时，应该有一个默认问题，然后单击下一个新页面会加载。我目前：

1.  使用 html 页面的名称创建一个 php 数组并将其改组。
2.  将此数组转换为 json 数组以在 Javascript 中访问。
3.  试图 ajax 加载页面。

我被困在第三步；你如何在ajax调用中发送一个json数组元素，即

```
$.ajax({
  url: name+".html",
  success: function(html){
    $("#container").empty().append(html);
  }
}); 
```

其中 name 是存储在 json 数组中的网页的名称，而 container 是我当前 php 页面上的 div。如果有更简单的方法来完成上述任务，我也愿意接受。

谢谢！

编辑步骤 2：

```
 var xdata = <?php echo json_encode($testArray); ?>; 
```

其中 $testArray 是 php 洗牌的网页数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:21:54.410

```
$.ajax({ url: name+".html", success: function(html)     
                $("#container").empty().append(html);                           
                }                                      
                }); 
```

有 1 '{' 和 2 '}' 尝试

```
$.ajax({ url: name+".html", success: function(html){     
                $("#container").empty().append(html);                           
                }                                      
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:22:07.190

使用[jQuery 加载函数](http://api.jquery.com/load/)。

```
var pageToLoadIntoContainer = 'Test1.html';

$('#container').load( pageToLoadIntoContainer ); 
```

扩展此答案以尝试解决您的所有元素...

```
<?php

$pageArray = shuffle(array(
  'Test1' ,
  'Test2' ,
  'Test3'
));

....

?>
<script>

var pageArray = <?php echo json_encode( $pageArray ); ?>;

....

$('#container1').load( pageArray[0] );
$('#container2').load( pageArray[1] );
$('#container3').load( pageArray[2] );

</script> 
```

# android - 以编程方式更改 ActionBar 选项卡下划线颜色

> ID：16139259
> 
> 赞同：22
> 
> 时间：2013-04-22T04:05:00.187
> 
> 标签：android, android-actionbar, android-tabs

我创建了操作栏

```
ActionBar actionbar = getActionBar() 
```

操作栏的背景由

```
actionbar.setBackgroundDrawable(actionBarBackgroundImage); 
```

现在我需要以编程方式更改操作栏选项卡的下划线颜色。有什么方法可以更改操作栏选项卡的下划线颜色吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-03T10:59:04.990

或者，您可以使用[Android 操作栏样式生成器](http://jgilfelt.github.io/android-actionbarstylegenerator/)轻松为您的操作栏和选项卡设置主题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-14T02:16:18.070

这是一个更简单的方法。我知道您正在寻找程序化更改，但这确实很容易。

我已经为此苦苦挣扎了好几天，但终于找到了解决方案。我正在使用 AppCompat。您可以`colorAccent`在主题中进行设置，这将更改 ActionBar 上的突出显示颜色。像这样：

```
<item name="colorAccent">@color/highlightcolor</item> 
```

这是在上下文中：

```
<style name="LightTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <item name="colorPrimary">@color/darkgrey</item>
    <item name="colorPrimaryDark">@color/black</item>
    <item name="colorAccent">@color/highlightcolor</item>
</style> 
```

我最初发布这个答案的地方：[Android Tab underline color not changed](https://stackoverflow.com/questions/18430109/android-tab-underline-color-not-changing/29618035#29618035)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-22T05:33:27.757

**我建议你使用[ActionBarSherlock](http://actionbarsherlock.com/)。库中有一个名为“Style ActionBar”的示例。（这是您更改 ActionBar 选项卡下划线颜色的唯一方法）**

如果您自定义了 ActionBar，那么您必须在 ActionBar Style 中添加此样式

或者这里是如何做到这一点的方法

![在此处输入图像描述](https://i.stack.imgur.com/qmxIS.png)

创建如下样式（这里我使用 ActionBarShareLock 如果您不想使用，则使用**android-support-v4.jar**支持所有 Android OS 版本）

```
<style name="Theme.AndroidDevelopers" parent="Theme.Sherlock.Light">
        <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
        <item name="actionBarTabStyle">@style/MyActionBarTabStyle</item>
    </style>

    <!-- style for the tabs -->
    <style name="MyActionBarTabStyle" parent="Widget.Sherlock.Light.ActionBar.TabBar">
        <item name="android:background">@drawable/actionbar_tab_bg</item>
        <item name="android:paddingLeft">32dp</item>
        <item name="android:paddingRight">32dp</item> 
```

actionbar_tab_bg.xml

```
<item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/ad_tab_unselected_holo" />
<item android:state_focused="false" android:state_selected="true"  android:state_pressed="false" android:drawable="@drawable/ad_tab_selected_holo" />
<item android:state_selected="false" android:state_pressed="true" android:drawable="@drawable/ad_tab_selected_pressed_holo" />
<item android:state_selected="true"  android:state_pressed="true" android:drawable="@drawable/ad_tab_selected_pressed_holo" /> 
```

在您的 android 清单文件中的活动中应用此样式

```
<activity
            android:name="com.example.tabstyle.MainActivity"
            android:label="@string/app_name"
            android:theme="@style/Theme.AndroidDevelopers" > 
```

有关更多详细信息，请查看此[答案](https://stackoverflow.com/a/15787170/1168654)和[本文](http://developer.android.com/guide/topics/ui/actionbar.html#Style)。

* * *

**编辑：29-09-2015**

**ActionBarSherlock**已被弃用，因此您也可以将 android`design`支持库和 android 应用程序`appcompat`库用于 TOOLBAR（不推荐使用 Action-Bar 等等）和 TABS。

`TabLayout`像下面这样使用

```
<android.support.design.widget.TabLayout
            android:id="@+id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:tabGravity="center"
            app:tabMode="scrollable"
            app:tabSelectedTextColor="@color/white"
            app:tabIndicatorColor="@color/colorPrimary"
            app:tabIndicatorHeight="2dip"
            app:tabTextAppearance="?android:attr/textAppearanceMedium"
            app:tabTextColor="@color/colorAccent" /> 
```

[这是带有选项卡的 android 设计支持库的示例](https://github.com/dhaval0122/DJ-Android-)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-22T04:34:48.397

参考[这个](http://developer.android.com/guide/topics/ui/actionbar.html)，自定义操作栏，

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- the theme applied to the application or activity -->
    <style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
        <item name="android:actionBarStyle">@style/MyActionBar</item>
        <!-- other activity and action bar styles here -->
    </style>

    <!-- style for the action bar backgrounds -->
    <style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar">
        <item name="android:background">@drawable/ab_background</item>
        <item name="android:backgroundStacked">@drawable/ab_background</item>
        <item name="android:backgroundSplit">@drawable/ab_split_background</item>
    </style>
</resources> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-28T22:56:10.520

我尝试了这里和其他地方发布的许多建议，但都没有运气。但我想我设法拼凑出一个（尽管不是完美的）解决方案。

TabWidget 正在使用选择器。本质上，它根据选项卡的状态（选择、按下等）显示不同的 9 个补丁图像。我终于发现您可以通过编程方式生成选择器。我从[http://android-holo-colors.com/](http://android-holo-colors.com/)生成的 9 个补丁开始（颜色：#727272，TabWidget：是）。

最大的问题是设置颜色。设置滤色器没有任何作用。因此，我最终在一个循环内更改了 9 个补丁图像的每个像素的颜色。

```
...    
/**
 * <code>NinePatchDrawableUtility</code> utility class for manipulating nine patch resources.
 * 
 * @author amossman
 *
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class NinePatchDrawableUtility {

    // Matches the colors in the supported drawables
    private static final int TAB_UNDERLINE_HIGHLIGHT_COLOR = 1417247097;
    private static final int TAB_UNDERLINE_COLOR = -8882056;
    private static final int TAB_PRESSED_COLOR = -2122745479;

    private Resources resources;

    public NinePatchDrawableUtility(Resources resources) {
        this.resources = resources;
    }

    /**
     * Create a <code>StateListDrawable</code> that can be used as a background for the {@link android.widget.TabWidget}</br></br>
     * 
     * <code>
     * FragmentTabHost tabHost = ...</br>
     * NinePatchUtility ninePatchUtility = new NinePatchUtility(getResources());</br>
     * TabWidget tabWidget =  tabHost.getTabWidget();</br>
     * for (int i = 0; i < tabWidget.getChildCount(); i++) {</br>
     * &nbsp;&nbsp;&nbsp;tabWidget.getChildAt(i).setBackground(ninePatchUtility.getTabStateListDrawable(titleColor));</br>
     * }
     * </code>
     * 
     * @param tintColor The color to tint the <code>StateListDrawable</code>
     * @return A new <code>StateListDrawable</code> that has been tinted to the given color
     */
    public StateListDrawable getTabStateListDrawable(int tintColor) {
        StateListDrawable states = new StateListDrawable();
        states.addState(new int[] {android.R.attr.state_pressed},
            changeTabNinePatchColor(resources, R.drawable.cc_tab_selected_pressed_holo, tintColor));
        states.addState(new int[] {android.R.attr.state_focused},
            changeTabNinePatchColor(resources, R.drawable.cc_tab_selected_focused_holo, tintColor));
        states.addState(new int[] {android.R.attr.state_selected},
            changeTabNinePatchColor(resources, R.drawable.cc_tab_selected_holo, tintColor));
        states.addState(new int[] { },
            changeTabNinePatchColor(resources, R.drawable.cc_tab_unselected_holo, tintColor));
        return states;
    }

    /**
     * Change the color of the tab indicator.</br></br>
     * 
     * Supports only the following drawables:</br></br>
     * 
     * R.drawable.cc_tab_selected_pressed_holo</br>
     * R.drawable.cc_tab_selected_focused_holo</br>
     * R.drawable.cc_tab_selected_holo</br>
     * R.drawable.cc_tab_unselected_holo</br></br>
     * 
     * Note: This method is not efficient for large <code>Drawable</code> sizes.
     * 
     * @param resources Contains display metrics and image data
     * @param drawable The nine patch <code>Drawable</code> for the tab
     * @param tintColor The color to tint the <code>Drawable</code>
     * @return A new <code>NinePatchDrawable</code> tinted to the given color
     */
    public NinePatchDrawable changeTabNinePatchColor(Resources resources, int drawable, int tintColor) {

        int a = Color.alpha(tintColor);
        int r = Color.red(tintColor);
        int g = Color.green(tintColor);
        int b = Color.blue(tintColor);
        BitmapFactory.Options opt = new BitmapFactory.Options();
        opt.inMutable = true;
        Bitmap bitmap = BitmapFactory.decodeResource(resources, drawable, opt);
        for (int x = 0; x < bitmap.getWidth(); x++) {
            for (int y = 0; y < bitmap.getHeight(); y++) {
                int color = bitmap.getPixel(x, y);
                if (color == TAB_PRESSED_COLOR) {
                    bitmap.setPixel(x, y, Color.argb((int)(a * 0.5), r, g, b));
                } else if (color == TAB_UNDERLINE_HIGHLIGHT_COLOR) {
                    bitmap.setPixel(x, y, Color.argb((int)(a * 0.9), r, g, b));
                } else if (color == TAB_UNDERLINE_COLOR) {
                    bitmap.setPixel(x, y, tintColor);
                }
            }
        }
        return new NinePatchDrawable(resources, bitmap, bitmap.getNinePatchChunk(), new Rect(), null);
    }

} 
```

使用示例：

```
/**
 * Theme the tab widget with the defined background color and title color set
 * in the TabManager
 * @param tabWidget
 */
@SuppressWarnings("deprecation")
@SuppressLint("NewApi")
public void theme(TabWidget tabWidget) {
    ColorDrawable backgroundDrawable = new ColorDrawable(backgroundColor);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
        tabWidget.setBackground(backgroundDrawable);
        tabWidget.setAlpha(0.95f);
    } else {
        backgroundDrawable.setAlpha(242);
        tabWidget.setBackgroundDrawable(backgroundDrawable);
    }
    NinePatchDrawableUtility ninePatchUtility = new NinePatchDrawableUtility(resources);
    for (int i = 0; i < tabWidget.getChildCount(); i++) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
            tabWidget.getChildAt(i).setBackground(ninePatchUtility.getTabStateListDrawable(titleColor));
        } else {
            tabWidget.getChildAt(i).setBackgroundDrawable(ninePatchUtility.getTabStateListDrawable(titleColor));
        }
        View tabView = tabWidget.getChildTabViewAt(i);
        tabView.setPadding(0, 0, 0, 0);
        TextView tv = (TextView) tabView.findViewById(android.R.id.title);
        tv.setSingleLine(); // set the texts on the tabs to be single line
        tv.setTextColor(titleColor);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-21T07:01:18.377

经过 1 天漫长的搜索后，获得了更改标签突出显示颜色的解决方案。只需 2 行代码即可完美完成这项工作！

转到**values/styles.xml**并在 ActionBar Theme 中添加以下代码

`<item name="colorAccent">@color/Tab_Highlighter</item>`

现在在 colors.xml 中为 Tab_Highlighter 提供**颜色**

```
<color name="Tab_Highlighter">#ffffff</color> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-29T10:07:12.693

尝试跟随。

在 res/drawable 中写入 tabs_selector_green.xml。

```
 <!-- Non focused states -->
<item android:drawable="@android:color/transparent" android:state_focused="false" android:state_pressed="false" android:state_selected="false"/>
<item android:drawable="@drawable/layer_bg_selected_tabs_green" android:state_focused="false" android:state_pressed="false" android:state_selected="true"/>

<!-- Focused states -->
<item android:drawable="@android:color/transparent" android:state_focused="true" android:state_pressed="false" android:state_selected="false"/>
<item android:drawable="@drawable/layer_bg_selected_tabs_green" android:state_focused="true" android:state_pressed="false" android:state_selected="true"/>

<!-- Pressed -->
<!-- Non focused states -->
<item android:drawable="@android:color/transparent" android:state_focused="false" android:state_pressed="true" android:state_selected="false"/>
<item android:drawable="@drawable/layer_bg_selected_tabs_green" android:state_focused="false" android:state_pressed="true" android:state_selected="true"/>

<!-- Focused states -->
<item android:drawable="@android:color/transparent" android:state_focused="true" android:state_pressed="true" android:state_selected="false"/>
<item android:drawable="@drawable/layer_bg_selected_tabs_green" android:state_focused="true" android:state_pressed="true" android:state_selected="true"/> 
```

在 res/drawable 文件夹中写入 layer_bg_selected_tabs_green.xml。

```
<item>
    <shape android:shape="rectangle" >
        <solid android:color="@color/tab_green" />

        <padding android:bottom="5dp" />
    </shape>
</item>
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#FFFFFF" />
    </shape>
</item> 
```

并在java代码中写这个。

```
private static final int[] TABS_BACKGROUND = {
        R.drawable.tabs_selector_orange, R.drawable.tabs_selector_green,
        R.drawable.tabs_selector_red, R.drawable.tabs_selector_blue,
        R.drawable.tabs_selector_yellow };
/*
BLA BLA BLA
*/
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub
    RelativeLayout tabLayout = (RelativeLayout) tab.getCustomView();
    tabLayout.setBackgroundResource(TABS_BACKGROUND[tab.getPosition()]);
    tab.setCustomView(tabLayout);
/* ... */
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-01-10T09:38:35.910

您可以使用以下代码：

`actionBar.setStackedBackgroundDrawable(new ColorDrawable(yourColor));`

# jpa - 通过 em.clear() 重用实体管理器还是创建一个新的实体管理器？

> ID：16139262
> 
> 赞同：11
> 
> 时间：2013-04-22T04:05:21.820
> 
> 标签：jpa, jpa-2.0, entitymanager

在我的应用程序管理事务的情况下，我必须选择：

1.  在每个新事务之前使用一个`EntityManager`并调用。`clear()`分享`EntityManager`使用`ThreadLocal`.
2.  `EntityManager`为每笔交易创建一个新的。

我对JPA没有太多经验。我的问题是哪一个在性能方面更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T13:02:04.440

我建议为每个事务创建一个新的 EntityManager。这就是 JPA 的设计方式。EntityManager 不应该是一个昂贵的创建对象。（虽然 EntityManagerFactory 非常昂贵，所以请确保您只有其中一个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-10T09:16:43.457

okwap 提供的链接非常有帮助。为了确保它不会漏掉，并遵守董事会规则，我在此处放了一份副本：

```
- EntityManager 包含一个持久性上下文，它将跟踪
  一切都通过它读取，所以为了避免臃肿的内存，你应该
  获得一个新的，或在某个时候清除它
- 如果你通过两个不同的 EntityManager 读取同一个对象
  会得到不同的对象，所以对象身份也会丢失，这
  是要考虑的事情

```

基于此，我将补充说，如果同时其他人执行了数据库事务，那么读取两个不同的 EntityManager 甚至可能会给出具有不同内容的对象。但是如果通过同一个实体管理器重复读取，第二次读取只会从实体管理器缓存中获取对象，因此更新的状态将不可见。

# mysql - Mysql 触发器将另一个表的数量更新 1

> ID：16139263
> 
> 赞同：0
> 
> 时间：2013-04-22T04:05:25.123
> 
> 标签：mysql

您好我正在尝试创建一个触发器，该触发器将 1 添加到保存 id 代码的帮助表中的插入 id 的数量。这是我的 2 张桌子。

```
 Animal
   ----------
   AnimalId
   Breedcode

   Breed_codes
  ------------
   Breedcode
   breed
   Quantity

     CREATE TRIGGER `updater` AFTER INSERT ON `Animal`
     FOR EACH ROW UPDATE breed_codes
     SET Quantity = Quantity + 1
     WHERE Breedcode = Animal.Breedcode 
```

但是它指出找不到动物品种代码。谁能帮我修理我的触发器。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:42:41.513

In your UPDATE query you can use:

1.  Column names from the table(s) you are updating,
2.  Column names from the table you define trigger for with NEW.column (insert and update triggers) or OLD.column (update and delete triggers).

In your case instead of `Animal.Breedcode` you should use `New.Breedcode`.

# php - 无法创建 zip 存档

> ID：16139264
> 
> 赞同：2
> 
> 时间：2013-04-22T04:05:25.153
> 
> 标签：php, boolean-logic, ziparchive

我正在尝试调试[此脚本](http://davidwalsh.name/create-zip-php)以在 localhost 上运行。return ，根据[手册](http://www.php.net/manual/en/zip.constants.php)，这意味着“没有错误”，但仍然`$zip->status`返回false。`0``file_exists()`

我手动检查，该文件实际上不存在。我在本地主机上运行 WAMP。

为什么会这样？我该如何解决？

这是我的确切代码：

```
$destination = "C:\wamp\www\temp\temp.zip";
$zip = new ZipArchive();
echo var_dump($zip);
echo "<br />";
$zzz = $zip->open($destination, ZipArchive::CREATE);
if($zzz === true) {
    echo "created archive<br />";
}else{
    //Var dump says it's true.. is that not a contradiction??
    echo var_dump($zzz)."<br />Couldn't create zipArchive<br />";
}
//add the files
foreach($_SESSION['images'] as $file) {
    $zip->addFile($file);
}

echo "Files ".$zip->numFiles."<br />Status ".$zip->status."<br />";

$zip->close();

if(!file_exists($destination)){
    echo "destination doesnt exist";        
} 
```

这是该页面的输出..

```
object(ZipArchive)[1]
  public 'status' => int 0
  public 'statusSys' => int 0
  public 'numFiles' => int 0
  public 'filename' => string '' (length=0)
  public 'comment' => string '' (length=0)

created archive
Files 16
Status 0
destination doesnt exist 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:08:59.767

更新：我们在聊天中进行了一些讨论后发现，它`$_SESSION['images']`包含`http://`url，但`ZipArchive`它本身不支持从远程源添加文件。如果要添加远程图像，则必须先下载它们。因此，我们将`addFile()`相关部分更改为：

```
//add the files
foreach($images as $file) {
    $tmpname = tempnam(sys_get_temp_dir(), 'test');
    file_put_contents($tmpname, file_get_contents($file));
    $zip->addFile($tmpname, basename($file));
    unlink($tmpname);
} 
```

* * *

还有一个逻辑错误，或者更好的是，一个错字。代替

```
$zzz = $zip->open($destination, ZipArchive::CREATE);
if($zzz !== true) {
    echo "created archive<br />";
} ... 
```

经过

```
$zzz = $zip->open($destination, ZipArchive::CREATE);
if($zzz === true) {
    echo "created archive<br />";
} ... 
```

* * *

进一步注意，zip 是在内存中创建的，直到调用[`ZipArchive::close()`](http://de1.php.net/manual/en/ziparchive.close.php). 检查手册页上的第一条评论：

> 如果您创建了一个 zip 文件并在其中添加了一个文件且没有错误，但 ZipArchive::close 调用失败（带有 ER_TMPOPEN：“无法创建临时文件”）并且未创建 zip 文件，请检查您的 ZipArchive ::open 调用指定包含不存在目录的路径名。如果您希望包含一个或多个目录的层次结构，则必须在使用 ZipArchive 之前自己创建它们。您可以编写一个简单的函数来使用 dirname 进行递归以查找每个父目录，并在离开递归时使用 mkdir 创建那些不存在的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:12:06.817

可能是因为你有`if($zzz !== true)`它应该在的时候`if($zzz === true)`。xD

# asp.net-mvc - Mvc：Linq OrderBy 自定义参数

> ID：16139266
> 
> 赞同：0
> 
> 时间：2013-04-22T04:05:28.827
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, asp.net-mvc-4, linq-to-entities

我有下一个 linq 查询

```
public IEnumerable<Table> GetTablePage(int pageNumber, int pageSize, string searchCriteria)
{
    Entities db = new Entities();

    if (pageNumber < 1)
    {
        pageNumber = 1;
    }

    return entities.Table.OrderBy(searchCriteria).Skip((pageNumber - 1) * pageSize).Take(pageSize).ToList();
} 
```

它工作正常，但我有一些表字段，我需要在其中进行一些连接以检索信息，这是因为在我的表中我只有代码并且我真的需要名称。 **示例**-> customerId 是表中的外键，我想获取 customerName，但实际上我不能，因为`entities.Table`只有 customerId，不丢失返回信息的最佳方法是 `Table.OrderBy(searchCriteria)... properties` 什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:07:35.377

我想您正在使用 Dynamic Linq 将字符串传递给您的 orderBy。如何使用 OrderBy 过滤结果？我想您尝试使用您的 searchCriteria 进行过滤？

现在某种答案可能是......

如果您在查询中包含子表，则子表将成为您的 Table 对象的一部分。

```
entities.Table.Include("Customer").OrderBy(.... 
```

# asp.net-mvc-4 - MVC 4 - 带空格的 EF 模型

> ID：16139267
> 
> 赞同：5
> 
> 时间：2013-04-22T04:05:46.913
> 
> 标签：asp.net-mvc-4, entity-framework-5

我正在用 C#/ASP.NET MVC 4/EF5 开发一个项目。现有数据库的列名中有空格，我从未遇到过，无权更改并且不知道如何解决。

我已经尝试了很多东西来读取列名，包括下面，但无法弄清楚。这是代码的简化版本，其中包含我尝试过但不起作用的代码（如果需要，我很乐意提供更多代码）：

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;
using System.Data.Linq.Mapping;

namespace Domain.Entities
{
    public class TheTable
    {
        public int id { get; set; }

        [Column(Name="The Column Name")]
        public int TheColumnName { get; set; } 
    }
} 
```

结果我总是得到这个：

> 列名“TheColumnName”无效。

顺便说一句，我可以成功连接到所有没有空格的列。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:54:02.147

感谢 Kirill，以下是未来遇到此问题的人的答案：

```
modelBuilder.Entity<TheTable>().Property(p => p.TheColumnName).HasColumnName("The Column Name"); 
```

# ios - 在 iOS 中捕获崩溃和异常

> ID：16139268
> 
> 赞同：3
> 
> 时间：2013-04-22T04:05:51.280
> 
> 标签：ios

我想要的是自己捕获所有崩溃和异常并添加其他信息（例如用户）来保存它。现在，我的想法是将 try-catch 块包装在 didFinishLaunchingWithOptions 中。在 catch 块中，我记录异常和附加信息，然后重新抛出它。这是实现它的正确方法吗？提前致谢。

更新代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
@try {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    self.loginViewController = [[LoginViewController alloc] init];
    self.window.rootViewController = self.loginViewController;
    [self.window makeKeyAndVisible];
}
@catch (NSException *exception) {
    // Save the exception description and additional info here
    ...
    // And re-throw it.
    [exception raise];
}
    return YES;

} 
```

进一步更新：我自己尝试过上面的代码，它无法捕捉到其他地方发生的异常。我知道谷歌分析 iOS SDK 有“sendUncaughtExceptions”属性来做类似的事情。我认为如果我自己实现类似的功能可以提供更大的灵活性，因为我们有自己的错误服务器（我会将错误日志上传到我们的服务器）。任何建议表示赞赏。

解决方案：最后，我从这个博客中得到了一个解决方案：http: [//www.cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html](http://www.cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:22:41.560

您是否查看过 TestFlight API？它非常容易实现，免费，听起来它会完成你想要的。它具有内置的远程异常处理和远程日志记录（您只需像使用 NSLog 一样使用 TFLog）。您可以记录 UDID 并跟踪用户以进行测试版或企业分发，但请注意 Apple 不允许您在应用商店应用中收集 UDID，因此您必须在该版本中禁用它——您仍然会崩溃日志和其他指标，它们只是匿名的。

[www.testflightapp.com](https://testflightapp.com)

# vb.net - 图片框位置每秒更改 20 次而不重绘

> ID：16139275
> 
> 赞同：1
> 
> 时间：2013-04-22T04:06:56.347
> 
> 标签：vb.net, visual-studio-2012, panel, picturebox, repaint

我正在尝试制作一些图像来做我见过很多 Microsoft 应用程序使用的漂亮的滑动的东西。运动开始缓慢的地方在中途加速，然后在它的新位置缓慢停止。我已经弄清楚了所有的计算，获取和设置图片框位置，使用`console.writeline`图像位置正确的确认，甚至以简化格式运行的测试运行。

但在完整版本中，它不会重新绘制图像。事实上，在脚本运行时，似乎什么都没有发生。我试过`Me.Refresh()`, `Invalidate()`,`Timer.Enabled = True/False`和`Me.Update()`. 这些都没有奏效。最后一步是最令人沮丧的：我在最后调用我的`SetPanelLocation()`方法以确保面板最终位于最终位置，无论移动是否有效。此调用也没有任何反应，即使在此例程失败后我可以立即从另一个用户事件中调用相同的方法，并且它再次开始工作，就像没有任何问题一样。

我正在创建自己的 PictureBox 类，该类`clsFeedImageBox`继承`PictureBox`了包含此功能（以及其他功能）的内容。每张图像只有 300x225 像素，因此它们不是需要大量时间重绘的大型图像。这个类的每个实例都在一个共同的`Forms.SplitterPanel`. 我出于习惯使用了很多评论，所以我把它们留在这里，也许它们会增加一些亮点。

```
Public Class clsFeedImgBox
  Inherits PictureBox

  Private iRank As Integer 'rank in whatever feed this file gets put in
  Private iRankTarget As Integer 'rank to move to when rank feed event starts
  Private iTopStart As Integer 'starting top location before feed event
  Private iTopTarget As Integer 'final Top location after feed event
  Private WithEvents tMyTimer As New System.Timers.Timer
  Private WithEvents oParent As FeedBase 'splitter panel, all location info comes from the parent

  Public Sub New(ByRef sender As FeedBase, ByVal rank as Integer)
    'set objects
    oParent = sender
    'set .Image property to pre-made thumbnail
    Image.FromFile(ThumbPath) 'ThumbPath is a property which is set by this point (some code has been removed)
    'setup initial position
    setPanelLocation(rank)
    'set autosize
    Me.SizeMode = PictureBoxSizeMode.StretchImage
    'set Image Scroll timer interval to 20 fps (1000 / 20 = 50)
    tMyTimer.Interval = 50
  End Sub

  Public Sub scroll(ByVal newRank As Integer)
    'setPanelLocation(newRank) <== this works, timed movements don't
    iRankTarget = newRank
    iTopStart = Me.Top
    iTopTarget = oParent.ImgTop(newRank) 'gets an integer for the new Top location
    tMyTimer.Start()
  End Sub

  Private Sub myScrollStep() Handles tMyTimer.Elapsed
    'tMyTimer.Enabled = False 'this idea with the enabled = True at the end didn't work
    iTickCount += 1
    Dim iScrollPerc As Integer 'scroll % between Start and End * 100
    iScrollPerc = oParent.ScrollStep(iTickCount, Rank) 'this part works
    Console.WriteLine(strThumbName & " scrollPerc: " & iScrollPerc.ToString)
    If iScrollPerc >= 100 Then
        'scroll event complete
        Console.WriteLine(strThumbName & " SetFinalLocation")
        Me.setPanelLocation(iRankTarget)  '<== This line doesn't work here, but works when called by other means
        'stop Feed updates
        tMyTimer.Stop()
        'reset iTickCount for next movement
        iTickCount = 0
    Else
        'scrolling still going
        Dim newTop As Integer
        newTop = Math.Round(iTopTarget - (((100 - iScrollPerc) * (iTopTarget - iTopStart)) / 100)) 'this part works
        'Console.WriteLine(strThumbName & " TopTarget: " & newTop)
        Me.Top = newTop 'Nothing happens here
    End If
    'Me.Left = oParent.ImgLeft
    'Me.Width = oParent.ImgWidth
    'Me.Height = oParent.ImgHeight 'that didn't work
    'Me.Refresh() 'this didn't work
    'Invalidate() 'this didn't do much good either
    'Me.Update() 'Aaaaand no cigar, time for StackOverflow
    'tMyTimer.Enabled = True
  End Sub

  Public Sub setPanelLocation(ByVal rank As Integer)
    iRank = rank
    Me.MyRePaint()
  End Sub

  Public Sub MyRePaint()
    'repaint image box with everything in it's current rank
    Me.Left = oParent.ImgLeft
    Me.Top = oParent.ImgTop(iRank)
    Me.Width = oParent.ImgWidth
    Me.Height = oParent.ImgHeight
  End Sub
End Class 
```

是什么赋予了？VB.NET 必须有一些内部工作原理可以帮助我弄清楚这一点。我正在使用 VS 2012 和 Win8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:21:58.360

您可以制作[WPF](http://msdn.microsoft.com/en-gb/library/ms754130.aspx)应用程序并使用[Slider](http://msdn.microsoft.com/en-us/library/system.windows.controls.slider.aspx)控件，而不是“手动”制作带有平面、图片框等的滑块。

# java - 动作监听器 java

> ID：16139277
> 
> 赞同：1
> 
> 时间：2013-04-22T04:07:16.983
> 
> 标签：java, actionlistener

对于我的课程，我需要使用我的 ActionListener。我无法将我的 ActionListener 添加到我的按钮。我必须像 this.buttons 一样使用“this”这个词来添加我的 ActionListener，但我在这样做时遇到了麻烦。稍后我将介绍我的 actionPerformed 方法，但我的主要问题是我的 ActionListener。

```
public class TextButtonsHW extends JFrame implements ActionListener {
private JButton[] buttons;  //Do not change
private JTextArea textArea; //Do not change
//Assign values for these constants in the constructor
private final int ENTER;    //Index of Enter button in buttons
private final int SPACE;    //Index of Space button in buttons
private final int CLEAR;    //Index of Clear button in buttons

/**
 * Set up this frame and its contents.
 * @param title Title to appear in JFrame title bar
 */
public TextButtonsHW(String title) {

    super(title); //call parent JFrame constructor to set the title

    buttons = new JButton[] { new JButton("A"), new JButton("B"), new JButton("C"),
                  new JButton("1"), new JButton("2"), new JButton("3"),
                  new JButton("X"), new JButton("Y"), new JButton("Z"),
                  new JButton("Enter"), new JButton("Space"), new JButton("Clear")};

    ENTER = buttons.length-3;
    SPACE = buttons.length-2;
    CLEAR = buttons.length-1;

    textArea = new JTextArea(15, 5);
    textArea.setEditable(false);

    this.buttons[0].addActionListener(I dont know what to put right here);

    //TODO: instantiate all JButtons, add them to the buttons array,
    //  and register "this" as the ActionListener for each button.
    //DONE
    //TODO: assign values to ENTER, SPACE, and CLEAR constants to
    //  indicate the indexes of those buttons in the buttons array
    //DONE
    //TODO: create the JTextArea textArea
    //TODO: set its "editable" property to false
    //DONE
    //Create a TextButtonsHWPanel to display the buttons and textArea

    TextButtonsHWPanel mainPanel = new TextButtonsHWPanel(buttons, textArea);
    this.getContentPane().add(mainPanel);
    this.pack();
}

public void actionPerformed(ActionEvent e) {

    //TODO: update the text of textArea according to which
    //  button generated the ActionEvent.

}

public static void main(String[] args) {
    final TextButtonsHW f = new TextButtonsHW("Text Buttons");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setLocationRelativeTo(null); //centers frame on screen
    f.setVisible(true);
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T04:09:50.500

```
buttons[0].addActionListener(this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T04:47:04.690

由于您有 12 个按钮，您还可以使用 for 循环将 ActionListener 添加到所有按钮，即

```
for(int i=0; i<12; i++)
{
    buttons[i].addActionListener(this);
} 
```

而不是长代码，即

```
buttons[0].addActionListener(this);
buttons[1].addActionListener(this);
........................ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:02:30.887

虽然`buttons[0].addActionListener(this);`效果很好，但从设计的角度来看，我建议使用单独的类（可能是内部类）来实现`ActionListner`并将其对象引用传递给方法。

面向对象编程的重点是将不同的职责委托给不同的对象（类），因此代码变得更加可维护和可重用。

# python - Python看门狗脚本：异步加载url

> ID：16139278
> 
> 赞同：1
> 
> 时间：2013-04-22T04:07:30.710
> 
> 标签：python, linux, networking, asynchronous

我有一个简单的 Python 脚本，可以检查几个 url：

```
f = urllib2.urlopen(urllib2.Request(url)) 
```

因为我将套接字超时设置为 5 秒，所以有时会费心等待 5 秒 * 结果中的 url 数。

是否有任何简单的标准化方法可以异步运行这些 url 检查而无需大量开销。脚本必须在 vanilla ubuntu 发行版上使用标准 python 组件（无需额外安装）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:48:38.123

我很久以前写了一个叫做[multibench的东西。](https://svn.upfronthosting.co.za/svn/izak/benchtools/multibench.py)我将它用于您在这里想要做的几乎相同的事情，即调用 wget 的多个并发实例并查看完成所需的时间。它是一个粗略的负载测试和性能监控工具。您将需要对此进行一些调整，因为它会运行相同的命令 n 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:39:27.050

安装附加软件。仅仅因为其他人做出的一些包装决定而重新发明某些东西是浪费时间。

# xcode - 向朋友发送 xCode 项目/分享 xCode 项目

> ID：16139279
> 
> 赞同：1
> 
> 时间：2013-04-22T04:07:45.637
> 
> 标签：xcode, bundle, nib, sharing

我目前正在尝试与朋友共享一个 xCode 项目，我想知道与他共享该项目的最简单方法。我想和他分享的主要原因是，因为我想在课堂上运行它，但我有一个桌面。他目前收到错误消息：

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“ViewController”

我真的希望能够在 ios 模拟器上运行应用程序，所以如果有更简单的方法来抓取应用程序或其他方式来呈现应用程序。

# java - java - 使用注解级联保存对象

> ID：16139280
> 
> 赞同：0
> 
> 时间：2013-04-22T04:07:46.850
> 
> 标签：java, oop

我有一个基类 Record，它代表数据库中的记录。我有扩展记录的客户和工作类。我以前从未使用过注释，但我想我想做的是创建一个自定义注释并在我的 Customer 类中标记一个返回其 Jobs 对象的方法，这样我就知道在保存 Customer 时将 Jobs 对象保存到数据库.

像这样的东西

```
class Record{

    private int id;

    public void save(){

        //look up all methods in the current object that are marked as @alsoSaveList,
        //call those methods, and save them as well. 

        //look up all methods in the current object that are marked as @alsoSaveRecord,
        //call those methods, and save the returned Record.
    }
}

class Customer extends Record{

    @alsoSaveList
    public List<Job> jobs(){
        return list of all of customers jobs objects;
    }
}

class Job extends Record{

    @alsoSaveRecord
    public Customer customer(){
        return its customer object;
    }
} 
```

这可能吗？有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:35:30.733

我同意，通常如果您使用 ORM，那么您可以让 JPA 或 Hibernate 处理这个问题。但是，如果您想要像您提到的那样的程序化响应，这里有一个简单的示例：

**定义你的注解：** AlsoSaveRecord.class

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface AlsoSaveRecord { 
   // The record class type
   Class<?> value();
} 
```

**查找要调用的方法的**代码：您可以添加到上面的类示例中的代码

```
public void save() {
  List<Method> toSaveRecords = findMethodsAnnotatedWith(AlsoSaveRecord.class, obj);
  for (Method rec : toSaveRecords) {
    AlsoSaveRecord anno = rec.getAnnotation(AlsoSaveRecord.class);
    Class<?> recordType = anno.value();
    Object objToSave = rec.invoke(obj);
  }
}

List<Method> findMethodsAnnotatedWith(Class<? extends Annotation> annotation, Object instance) 
{
  Method[] methods = instance.getClass().getDeclaredMethods();
  List<Method> result = new ArrayList<Method>();
  for (Method m : methods) {
    if (m.isAnnotationPresent(annotation)) {
      result.add(m);
    }
  }
  return result;
} 
```

以上将扫描手头对象中的 AlsoSaveRecord 注释并返回任何适用的方法。然后，您可以调用那些作为注释结果返回的方法。调用将返回您可以强制转换或执行某些操作的对象。

**根据要求编辑以**在注释中定义“记录类型”（即。@AlsoSaveRecord(MyRecord.class);

上面的方法现在可以获取注释时定义的类的记录类型

# bash - 忽略 sed 查找和替换命令中的斜杠

> ID：16139288
> 
> 赞同：3
> 
> 时间：2013-04-22T04:08:22.023
> 
> 标签：bash, sed

我正在尝试在终端中使用 sed 进行查找和替换。

在 apache 配置文件中，我试图替换：

`DocumentRoot /var/www`

和

`DocumentRoot /var/www/mysite.com/public_html`

从命令行，不使用编辑器。我想用 sed 来做这件事，我尝试了各种迭代：

`sudo sed -i 's/'DocumentRoot /var/www'/'DocumentRoot /var/www/mysite.com/public_html'/' /etc/apache2/sites-available/mysite.com`

但是，这样做时我收到此错误： `sed: -e expression #1, char 14: unterminated s command`

所以它在路径中的斜杠上出错。我该如何解决这个问题？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T04:11:04.577

没有必要`/`用作正则表达式分隔符。您可以使用`#`or`@`当您的正则表达式包含`/`您需要转义的内容时。

```
sed -i s#expr1#expr2# 
```

所以，它可能是：

```
sudo sed -i 's#DocumentRoot /var/www#DocumentRoot /var/www/mysite.com/public_html#' /etc/apache2/sites-available/mysite.com 
```

此外，由于您的替换参数本身包含空格，因此您需要将它们括在单引号中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T04:13:18.247

`/`在 中用作分隔符不是强制性的`sed`。`sed 's/hi/hey/`和`sed 's#hi#hey#'`

# ruby-on-rails - 如何在 Rails 上阻止错误的 CSRF 请求？

> ID：16139290
> 
> 赞同：0
> 
> 时间：2013-04-22T04:08:39.457
> 
> 标签：ruby-on-rails, csrf

当我使用错误的 CSRF 令牌向我的 Rails 应用程序发出请求时，我得到：

`WARNING: Can't verify CSRF token authenticity`

在日志中，但我想阻止这些请求，而不是收到警告。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:49:42.690

它以某种*方式*阻止了请求。在发出该警告后，Rails 会重置您的会话，从而阻止尝试的 CSRF 攻击。

您会发现恢复原始令牌不会恢复您的原始会话。

也就是说，如果你真的想改变这种行为，你可以通过编写自己的[`handle_unverified_request`](http://apidock.com/rails/ActionController/RequestForgeryProtection/handle_unverified_request)方法版本来输出授权错误。

# .net - 获取项目中表单的保存路径

> ID：16139295
> 
> 赞同：1
> 
> 时间：2013-04-22T04:09:06.130
> 
> 标签：.net, vb.net

是否可以获取项目中存在表单的路径？

我有一堆表格，我将它们排列在树视图中以帮助用户导航。目前，我有一个属性应用于表单的类，它告诉它在下面显示表单的路径。

为了让它们在项目中更有条理，我还创建了一个类似的文件夹结构并将表单保存在其中。

只是想通过简单地使用表单保存在项目中的路径来设置树视图中的层次结构来消除重复，但是谷歌搜索并浏览表单和表单类型的所有属性似乎没有帮助.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:56:33.537

**编辑** 我找到了一种方法，但请注意，这很丑陋。

你可以看看这个 gem（在 .NET 4.5 中可用）[CallerFilePath](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerfilepathattribute.aspx)：

```
Public Shared Function GetFilePath() As String
    Return GetFilePath2()
End Function

Private Shared Function GetFilePath2(
    <CallerFilePath> Optional sourcefilePath As String = Nothing)

    Return sourcefilePath

End Function 
```

私有函数返回导致调用的文件的物理路径。这就是公共函数包装私有函数的原因。

将这些添加到每个表单中，您将能够获得表单/类的物理文件路径。

我将函数设为 Shared，这样您就不必为了获取它的路径而实例化表单。不幸的是，您无法创建包含此方法的基类并从中继承所有表单，因为这将返回基类的路径。所以你需要在你的所有表单中创建这些函数......它很丑，但它可以满足你的需求。

再想一想：您可以将私有函数作为扩展方法放在辅助类中，因此您只需将公共函数放入每个表单中。

**旧答案**

Visual Studio 中解决方案的文件夹结构对应用程序不可用。

所以解决这个问题的唯一方法是自己输入结构，编写一些逻辑（宏？）来提取文件夹结构或保持命名空间同步。

**如果**命名空间反映了相同的结构，您可以简单地使用该类型的 FullName：

```
 Dim t As Type = GetType(Form1)
 Console.WriteLine("The full name of the form is {0}.", t.FullName) 
```

您可以使用`String.Split`将全名分解为命名空间的各个部分。

**编辑** （我将其移至注释，因为它与 VB 无关，但可能对寻找类似功能的 C# 用户有用）

**在 C# 中（不在 VB 中）**：当您在 Visual Studio 解决方案中创建文件夹结构时，您在这些文件夹中创建的类型将成为这些类型的命名空间。请注意，当您操作（重命名文件夹、移动文件）解决方案项时，不会更新命名空间。

# date - 使用 datetime 在 Python 中确定季节给定的时间戳

> ID：16139306
> 
> 赞同：9
> 
> 时间：2013-04-22T04:10:53.047
> 
> 标签：date, python-2.6

我想使用 datetime 模块（不是时间）仅从时间戳中提取月份和日期，然后根据至日的固定日期确定它是否属于给定季节（秋季、夏季、冬季、春季）和春分。

例如，如果日期介于 3 月 21 日和 6 月 20 日之间，则为春天。不分年份。我希望它只查看月份和日期而忽略此计算中的年份。

**[由于这个原因](https://stackoverflow.com/questions/5247582/python-datetime-strptime-month-specifier-doesnt-seem-to-work)，我没有从我的数据中[正确提取月份，因此](https://stackoverflow.com/questions/16140047/python-incorrectly-extracting-month-from-string)我在使用它时遇到了麻烦。**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-02-24T05:25:35.707

> 如果日期介于 3 月 21 日和 6 月 20 日之间，则为春天。不分年份。我希望它只查看月份和日期而忽略此计算中的年份。

```
#!/usr/bin/env python
from datetime import date, datetime

Y = 2000 # dummy leap year to allow input X-02-29 (leap day)
seasons = [('winter', (date(Y,  1,  1),  date(Y,  3, 20))),
           ('spring', (date(Y,  3, 21),  date(Y,  6, 20))),
           ('summer', (date(Y,  6, 21),  date(Y,  9, 22))),
           ('autumn', (date(Y,  9, 23),  date(Y, 12, 20))),
           ('winter', (date(Y, 12, 21),  date(Y, 12, 31)))]

def get_season(now):
    if isinstance(now, datetime):
        now = now.date()
    now = now.replace(year=Y)
    return next(season for season, (start, end) in seasons
                if start <= now <= end)

print(get_season(date.today())) 
```

它是[@Manuel G 答案](https://stackoverflow.com/a/28686747/4279)的扩展版本，可支持任何年份。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-07-05T03:08:12.793

仅使用年份参数可能更容易。它与您的方法没有太大不同，但可能比魔术数字更容易理解。

```
# get the current day of the year
doy = datetime.today().timetuple().tm_yday

# "day of year" ranges for the northern hemisphere
spring = range(80, 172)
summer = range(172, 264)
fall = range(264, 355)
# winter = everything else

if doy in spring:
  season = 'spring'
elif doy in summer:
  season = 'summer'
elif doy in fall:
  season = 'fall'
else:
  season = 'winter' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-12-09T17:02:08.857

我来到这里寻找如何将**日期**映射到**季节**，并基于[这个答案](https://stackoverflow.com/a/28686747/6188901)，我最终通过以下方式解决了它：

```
def season_of_date(date):
    year = str(date.year)
    seasons = {'spring': pd.date_range(start='21/03/'+year, end='20/06/'+year),
               'summer': pd.date_range(start='21/06/'+year, end='22/09/'+year),
               'autumn': pd.date_range(start='23/09/'+year, end='20/12/'+year)}
    if date in seasons['spring']:
        return 'spring'
    if date in seasons['summer']:
        return 'summer'
    if date in seasons['autumn']:
        return 'autumn'
    else:
        return 'winter'

# Assuming df has a date column of type `datetime`
df['season'] = df.date.map(season_of_date) 
```

所以原则上它适用于任何一年，给定一个`datetime`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-19T01:01:43.007

必须考虑您所在的半球。您必须自己使用地理定位来确定半球。

```
def season(self, HEMISPHERE):
    date = self.now()
    md = date.month * 100 + date.day

    if ((md > 320) and (md < 621)):
        s = 0 #spring
    elif ((md > 620) and (md < 923)):
        s = 1 #summer
    elif ((md > 922) and (md < 1223)):
        s = 2 #fall
    else:
        s = 3 #winter

    if not HEMISPHERE == 'north':
        s = (s + 2) % 3
    return s 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-07T05:20:32.450

我对评论太新了，我的编辑被拒绝了，所以这里是@adsf 响应的更正代码。

```
def season(date, hemisphere):
    ''' date is a datetime object
        hemisphere is either 'north' or 'south', dependent on long/lat.
    '''
    md = date.month * 100 + date.day

    if ((md > 320) and (md < 621)):
        s = 0 #spring
    elif ((md > 620) and (md < 923)):
        s = 1 #summer
    elif ((md > 922) and (md < 1223)):
        s = 2 #fall
    else:
        s = 3 #winter

    if hemisphere != 'north':
        if s < 2:
            s += 2 
        else:
            s -= 2

    return s 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-28T22:09:55.063

我想你可以用`pandas.Series.dt.quarter`吗？例如，

```
datetime = pd.Series(pd.to_datetime(['2010-09-30', '2010-04-25', '2010-01-25', '2010-10-29', '2010-12-25']))
seasons = datetime.dt.quarter

seasons:
0    3
1    2
2    1
3    4
4    4 
```

季节会是你想要的吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T05:18:51.537

这就是我最终解决它的方法。我怀疑这是最好的解决方案，但它确实有效。随时提供更好的解决方案。

```
import datetime

def get_season(date):
    """
    convert date to month and day as integer (md), e.g. 4/21 = 421, 11/17 = 1117, etc.
    """
    m = date.month * 100
    d = date.day
    md = m + d

    if ((md >= 301) and (md <= 531)):
        s = 0  # spring
    elif ((md > 531) and (md < 901)):
        s = 1  # summer
    elif ((md >= 901) and (md <= 1130)):
        s = 2  # fall
    elif ((md > 1130) and (md <= 0229)):
        s = 3  # winter
    else:
        raise IndexError("Invalid date")

    return s

season = get_season(dt.date()) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-24T01:24:55.627

这是我通常使用的：

```
seasons = {'Summer':(datetime(2014,6,21), datetime(2014,9,22)),
           'Autumn':(datetime(2014,9,23), datetime(2014,12,20)),
           'Spring':(datetime(2014,3,21), datetime(2014,6,20))}

def get_season(date):
    for season,(season_start, season_end) in seasons.items():
        if date>=season_start and date<= season_end:
            return season
    else:
        return 'Winter' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-25T08:28:38.373

使用 python 日期时间和简单的字典

```
import datetime
date = datetime.datetime.strptime('01/05/2015 01:30:00 PM', "%m/%d/%Y %H:%M:%S %p")

//using above created date for the code below
seasons = {1:[12,1,2],2:[3,4,5],3:[6,7,8],4:[9,10,11]}
ss={}
for k,v in seasons.items():
    for e in v:
        ss[e] = k
print(ss[date.month]) 
```

# c++ - 如何修复 turbo c++ 错误“无法打开包含文件：graphics.h：没有此类文件或导演”

> ID：16139308
> 
> 赞同：1
> 
> 时间：2013-04-22T04:11:07.133
> 
> 标签：c++, compiler-construction, turbo-c++

我一直在 windows xp 中使用 turbo c++ 编译器，但我昨天安装了 windows 7，现在我遇到了一个小问题，turbo c++ 在 windows 7 Ultimate 64bit 中不起作用。当我想包含头文件时，它说“无法打开包含文件：graphics.h：没有这样的文件或目录”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:16:22.850

检查您的包含目录设置并确保它们指的是正确的位置并且`graphics.h`位于该位置。我假设你正在使用

```
#include <graphics.h> 
```

而不是

```
 #include "graphics.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:42:34.547

我不确定代码是否需要更改（因为它可能在之前编译过），但您还需要向系统包含路径添加一些文件夹。

我也很好奇你为什么要使用 TurboC++。我仍在工作中使用 VC6，我认为这很古老！

# csv - 转换 csv 数据以进行分析和可视化

> ID：16139313
> 
> 赞同：1
> 
> 时间：2013-04-22T04:11:38.900
> 
> 标签：csv, google-sheets, google-docs, libreoffice, tableau-api

假设我有一个具有以下数据格式的 csv 文件：

```
ID, Name, Gender, Q1
1, ABC, Male, "A1;A2"
2, ACB, Male, "A2;A3;A4"
3, BAC, Female, "A1" 
```

我想将其转换为以下格式，以便我的数据虚拟化工具可以正确处理它：

```
ID, Name, Gender, Questions, Responses
1, ABC, Male, Q1, A1
1, ABC, Male, Q1, A2
2, ACB, Male, Q1, A2
2, ACB, Male, Q1, A3
2, ACB, Male, Q1, A4
3, BAC, Female, Q1, A1 
```

使用`Text to Columns`LibreOffice 中的功能，我可以轻松地将 Q1 列`A1;A2`分成不同的列，例如`A1, A2`，但我被困在转置和重复行上。

附加信息：

*   数据是通过谷歌表单收集的，不幸的是谷歌电子表格使用分号分隔符将多项选择问题响应存储在一个单元格中`A1;A2;A3...`，而我的可视化工具无法看到这个底层数据结构，只能将它们视为单个字符串，使得聚合/分组变得困难。

*   在实际数据（调查结果）中，我有大约 5000 个条目，每个条目都有多个需要此类处理的单元格，这将产生一个包含大约 100,000 个条目的表。需要一种自动化转换的方法。

*   我用来分析/可视化数据的工具是“ **Tableau Public** ”，他们有一个用于 Excel 的数据重塑器插件，可以半自动化[此类任务](http://kb.tableausoftware.com/articles/knowledgebase/preparing-excel-files-analysis)（请参阅*确保每行仅包含一个数据部分*），但没有 LibreOffice 替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:18:22.953

您可以使用 Google 电子表格上的 JavaScript 来转换数据，然后再导出到其他应用程序。这是我刚刚为您的示例数据编写的快速而肮脏的脚本：

```
function transformRows() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var rows = sheet.getDataRange();
  var numRows = rows.getNumRows();
  var values = rows.getValues();

  var newSheet = SpreadsheetApp.getActiveSpreadsheet().insertSheet("Result");
  var header = values[0].slice(0, values[0].length - 1);

  header.push("Question");
  header.push("Answer");
  newSheet.appendRow(header);

  var question = values[0][values[0].length - 1];

  // Note: Code below is inefficient and may exceed 6-minute timeout for sheets with 
  //       more than 1k rows. Change it to batch updating to speed up. 
  // Ref: https://developers.google.com/apps-script/reference/spreadsheet/range#setValues%28Object%29
  for (var i = 1; i <= numRows - 1; i++) {
    var row = values[i];
    var answers = row[row.length - 1].split(";");
    for (var ansi = 0; ansi < answers.length; ansi++) {
      var newRow = row.slice(0, row.length - 1);
      newRow.push(question);
      newRow.push(answers[ansi]);
      newSheet.appendRow(newRow);
    }
  }
}; 
```

要使用它：

1.  在打开的工作表中打开脚本编辑器（工具 -> 脚本编辑器...）
2.  为电子表格创建一个空项目
3.  将代码粘贴到编辑器中
4.  保存并运行它（运行-> transformRows）
5.  返回电子表格，将创建一个新工作表并填充转换后的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T03:31:51.693

我制作了@SAPikachu 答案的更通用版本。它可以转换任意数量的数据列，假设所有数据列都在所有非数据列的右侧。（不是最清晰的术语......）

```
function onOpen() {
  var ss = SpreadsheetApp.getActive();
  var items = [
    {name: 'Normalize Crosstab', functionName: 'normalizeCrosstab'},
  ];
  ss.addMenu('Normalize', items);
}

/* Converts crosstab format to normalized form. Given columns abcDE, the user puts the cursor somewhere in column D.
The result is a new sheet, NormalizedResult, like this:

a     b     c    Field Value
a1    b1    c1   D     D1
a1    b1    c1   E     E1
a2    b2    c2   D     D2
a2    b2    c2   E     E2
...

*/
function normalizeCrosstab() {
  var sheet = SpreadsheetApp.getActiveSheet(); 
  var rows = sheet.getDataRange();
  var numRows = rows.getNumRows();
  var values = rows.getValues();
  var firstDataCol = SpreadsheetApp.getActiveRange().getColumn();
  var dataCols = values[0].slice(firstDataCol-1);

  if (Browser.msgBox("This will create a new sheet, NormalizedResult. Place your cursor is in the first data column.\\n\\n" +
                     "These will be your data columns: " + dataCols,Browser.Buttons.OK_CANCEL) == "cancel") {
    return;
  }

  var resultssheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("NormalizedResult");
  if (resultssheet != null) {
    SpreadsheetApp.getActive().deleteSheet(resultssheet);
  }
  var newSheet = SpreadsheetApp.getActiveSpreadsheet().insertSheet("NormalizedResult");
  var header = values[0].slice(0, firstDataCol - 1);

  var newRows = [];

  header.push("Field");
  header.push("Value");
  newRows.push(header);

  for (var i = 1; i <= numRows - 1; i++) {
    var row = values[i];
    for (var datacol = 0; datacol < dataCols.length; datacol ++) {
      newRow = row.slice(0, firstDataCol - 1); // copy repeating portion of each row
      newRow.push(values[0][firstDataCol - 1 + datacol]); // field name
      newRow.push(values[i][firstDataCol - 1 + datacol]); // field value
      //newSheet.appendRow(newRow);
      newRows.push(newRow);
    }
  }
  var r = newSheet.getRange(1,1,newRows.length, header.length);
  r.setValues(newRows);
}; 
```

# android - 通过 rss 提要的 Android 推送通知

> ID：16139316
> 
> 赞同：2
> 
> 时间：2013-04-22T04:11:54.747
> 
> 标签：android, rss, push-notification, google-cloud-messaging

我为我的网站开发了一个小的 RSS 提要应用程序，所以基本上我的目标是如何用它实现推送通知。我的意思是每当我在我的网站上发布新帖子时，它都应该向应用程序发送推送通知。

# sql - 多个更新语句的匿名块 pl/sql 发生错误

> ID：16139321
> 
> 赞同：0
> 
> 时间：2013-04-22T04:12:45.353
> 
> 标签：sql, plsql, sql-update

我在关注 pl/sql 匿名时遇到问题。这是我的 pl/sql 块的缩小版本。我的代码有什么问题？

`WHENEVER SQLERROR EXIT sql.sqlcode ROLLBACK`

 ````
WHENEVER oserror EXIT FAILURE ROLLBACK
SET SERVEROUTPUT ON
SET ECHO OFF
SET DEFINE OFF
SET LINESIZE 120
SET AUTOCOMMIT OFF
BEGIN
update MYTABLE set GID = '12345' where MYTABLE.COLUMN1=456456 and MYTABLE.PARTY<>0 and MYTABLE.EXPIRY = to_date('17/05/2013','DD/MM/YYYY')
AND EXISTS (SELECT PARTIES.LABEL
        FROM PARTIES 
        WHERE PARTIES.m_id = MYTABLE.PARTY_ID and PARTIES.LABEL = 'PARTY_NAME');    
dbms_output.put_line( 'Rows Updated : ' || to_char(sql%rowcount));
END;
/ 
````  `这是我得到的输出

```
更新 MYTABLE 设置 GID = '12345' 其中 MYTABLE.COLUMN1=456456 和 MYTABLE.PARTY0 和 MYTABLE.EXPIRY = to_date('17/05/2013','DD/MM/YYYY')
       *
第 2 行的错误：
ORA-06550：第 2 行，第 8 列：
PL/SQL: ORA-06552: PL/SQL: 编译单元分析终止
ORA-06553: PLS-488: 无效的变量声明: 对象 'TIMESTAMP' 必须是类型或子类型
ORA-06550：第 2 行，第 1 列：
PL/SQL：忽略 SQL 语句

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:30:45.733

根据您报告的错误，我猜测您的 PL/SQL 块中的某处（您的问题中不存在该错误）您指的是名为`TIMESTAMP`. 不幸的是，这是 Oracle 中的保留字，因为它是一种列数据类型。我建议您将该列重命名为类似的名称`DATE_CREATED`，然后查看您的代码是否可以编译。`

# facebook - 如何使滚动条看起来像 delphi 中的 facebook 滚动条？

> ID：16139322
> 
> 赞同：1
> 
> 时间：2013-04-22T04:12:53.890
> 
> 标签：facebook, delphi, styles, scrollbar, customization

有一个关于 javascript 的 facebook 滚动条的问题：[hide scrollbar and show on hover like facebook's new chat sidebar](https://stackoverflow.com/questions/7125185/hide-scrollbar-and-show-on-hover-like-facebooks-new-chat-sidebar)还有这个问题我问自己一个很好的回答来自用户：[我们如何为 <div> 制作样式滚动条鼠标滚轮敏感](https://stackoverflow.com/questions/12301588/how-do-we-make-a-styled-scroll-bar-for-a-div-with-mouse-wheel-sensitive)

无论如何，有没有一种方法可以让我们的 delphi 程序在鼠标悬停时让这种滚动条更加时尚和生动，就像 facebook 的滚动条一样？

## 编辑1：

样式问题是可以通过更改表单样式来安排的。只是我们可以隐藏滚动条，然后在用户鼠标悬停时显示它们，这已经很棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:43:31.480

创建一个从 TListbox 派生的组件并处理 scollbar 的显示。示例代码就像插入的类一样。

外观可以通过设计和自己的风格进行调整（使用较新的 Delphi 版本）。

```
unit Unit3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TListBox = Class(StdCtrls.TListBox)
    Constructor Create(AOwner: TComponent); override;
  private
    FHiddenScrollbar: Boolean;
  protected
    procedure CreateParams(var Params: TCreateParams); override;
    procedure WMMouseMove(var Message: TWMMouseMove); message WM_MOUSEMOVE;
  published
  public
    Property HiddenScrollbar: Boolean Read FHiddenScrollbar;
  End;

  TForm3 = class(TForm)
    ListBox1: TListBox;
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form3: TForm3;

implementation

{$R *.dfm}
{ TListBox }

constructor TListBox.Create;
begin
  inherited;
  FHiddenScrollbar := true;
end;

procedure TListBox.CreateParams(var Params: TCreateParams);
VAR
  Style: Integer;
BEGIN
  inherited;
  if FHiddenScrollbar then
    Params.Style := Params.Style AND not WS_VSCROLL
  else
    Params.Style := Params.Style or WS_VSCROLL;
end;

procedure TListBox.WMMouseMove(var Message: TWMMouseMove);
var
  p: TPoint;
begin
  inherited;
  GetCursorPos(p);
  p := ScreenToClient(p);
  if p.X > (Width - 20) then
  begin
    if FHiddenScrollbar then
    begin
      FHiddenScrollbar := false;
      RecreateWnd;
    end;
  end
  else
  begin
    if not FHiddenScrollbar then
    begin
      FHiddenScrollbar := true;
      RecreateWnd;
    end;
  end;
end;

end. 
```

![在此处输入图像描述](https://i.stack.imgur.com/qoGlO.png)

# php - PHP 变量在 mySQL 查询中不起作用，我不知道为什么

> ID：16139325
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:13:21.533
> 
> 标签：php, mysql, wamp

当我回显该变量`$userz`时，它会在网页中写入好的用户名，当我在 mysql 查询中使用它时，它不起作用。为什么？

```
echo $userz; // write "Programmeur" on the web page 
$bdd->exec('UPDATE user SET status = \'registered\' WHERE username =' .$userz);// not working
$bdd->exec('UPDATE users SET status = \'registered\' WHERE username = $userz');// not working 
$bdd->exec('UPDATE users SET status = \'registered\' WHERE username = \'Programmeur\'');//work 
```

是因为我正在使用`wamp` 还是我只是错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:15:03.803

因为您`username`可能是 a`varchar`并且您没有在查询中引用它。

`$bdd->exec('UPDATE user SET status = \'registered\' WHERE username = "' .$userz . '"');// working`

诊断查询为什么不工作的最佳方法，打印`MySQL`错误（代码和消息），不要猜测出了什么问题。我认为你的`MySQL`包装可以做到这一点。我可以确定我是否知道您在这里使用`$bdd`的是什么（实例是什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:14:54.500

在 PHP 中，单引号内的内容不会被解析。

你可以使用这个：

```
$bdd->exec("UPDATE users SET status = 'registered' WHERE username = '$userz'"); 
```

请考虑 SQL 注入的风险。如有必要，使用准备好的语句。

*另外，你的数据库表名是什么？`user`还是`users`？*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:16:26.327

您没有将值包装在撇号中：

```
username = \'' . $userz . '\'' 
```

或者更容易

```
$bdd->exec("UPDATE user SET status = 'registered' WHERE username = '$userz'"); 
```

您真正应该做的是使用带有 PDO 或 mysqli 的正确参数化查询。然后，将自动为您添加引号，*并且*参数将被正确转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T04:16:35.873

```
$bdd->exec ( 'UPDATE user SET status = "registered" WHERE username = "'.$userz.'"' ); 
```

或者

```
$bdd->exec ( "UPDATE user SET status = 'registered' WHERE username = '{$userz}'" ); 
```

# git - Git post-receive 权限

> ID：16139326
> 
> 赞同：1
> 
> 时间：2013-04-22T04:13:58.757
> 
> 标签：git, githooks, mediatemple

我在媒体模板 gs 托管上有一个 git 存储库设置。当我推送到源时，我正在使用接收后挂钩来部署我的应用程序。钩子运行良好，但如果我尝试让它更新工作副本，它会由于权限错误而失败。这是我的接收后挂钩：

```
#!/bin/bash
GIT_WORK_TREE=/home/path/to/workingcopy/ git checkout -f 
```

当 git 挂钩运行时，它似乎以用户 'me%mydomain.com' 的身份运行，但我的工作文件的所有者是 'mydomain.com'

我试过设置 git config --global user.email "mydomain.com"。但它似乎并没有影响它。

是否可以让 git 钩子运行正确的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:01:38.657

啊，我发现了问题：我的远程`origin`设置为

```
me@mydomain.com@mydomain.com:/home/data/git/repo.git 
```

代替：

```
serveradmin@mydomain.com@mydomain.com:/home/data/git/repo.git 
```

`serveradmin`可以访问 MT 共享主机中的所有文件。此外，我可以在 MT 用户首选项中将
sub-ftp 权限应用于“ ”。`me@mydomain`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:13:13.330

[您可以采用与“通过 git/gitolite 权限错误部署网站/webapp](https://stackoverflow.com/questions/15407350/deploying-a-website-webapp-via-git-gitolite-permissions-error) ”中描述的方法类似的方法，并且：

*   将`git`用户添加到`sudoers`文件中。
*   做一个
    `sudo GIT_WORK_TREE=/home/path/to/workingcopy/ git checkout -f`

# drupal-7 - 在 Drupal 中组合条件

> ID：16139330
> 
> 赞同：0
> 
> 时间：2013-04-22T04:14:24.530
> 
> 标签：drupal-7

我正在制作一个项目，它有三种类型的用户。我的问题是我希望前 2 类用户能够访问信息，而对于第三种用户，我希望显示拒绝访问页面。我知道我必须在 Drupal 的配置页面下结合规则中的条件和事件，但我无法得到我想要的结果。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:19:12.340

如果您要拒绝访问的是*内容类型*，请检查此模块：[http ://drupal.org/project/content_access](http://drupal.org/project/content_access)

基本上，它为您的 Drupal 安装中的每种内容类型添加了自定义访问规则。`content type`您可以从 中的管理页面中选择角色和访问类型`admin/structure/type`。此外，它可以根据节点显示不同的访问选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:34:17.220

如果您想拒绝访问单个节点，则此模块[节点访问](http://drupal.org/project/node_access)“通过在单个节点上设置权限来覆盖给定内容类型的权限”。

# gwt - GWT：如何为 CellTable 捕获简单的 MouseOverEvent ？

> ID：16139331
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:14:29.210
> 
> 标签：gwt, handler, mouseover, celltable

每当用户将鼠标悬停在任何单元格上时，我发现了一个处理鼠标悬停事件的代码：

```
 table.addCellPreviewHandler(new Handler<List<String>>()
                    {

                        @Override
                        public void onCellPreview(
                            CellPreviewEvent<List<String>> event)
                        {
                            if ("mouseover".equals(event.getNativeEvent().getType())) {
                                Element cellElement = event.getNativeEvent().getEventTarget().cast();
                                // play with element
                                System.out.println(" message !!");
                            }
                        }
                    }); 
```

当用户将鼠标悬停在列标题上时，没有任何反应。鼠标悬停在边框上时也应该触发鼠标悬停事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:13:34.053

```
table.addDomHandler(new MouseOverHandler() {
   @Override
   public void onMouseOver(MouseOverEvent event) {
      // handle the event
   }
}, MouseOverEvent.getType()); 
```

# google-glass - 时间线中允许的 HTML 标签

> ID：16139333
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:14:38.153
> 
> 标签：google-glass, google-mirror-api

在测试 Timeline API 时，我注意到 Mirror API 不接受许多 HTML 标签，如果是，则从创建的时间轴中删除。我在 API 的任何地方都没有看到接受标签或拒绝标签的列表，而且未经身份验证的[游乐场](https://developers.google.com/glass/playground)具有误导性，因为它允许开发人员对时间轴中允许和不允许的内容做出错误的假设。

所以我的问题很简单：**哪些标签是允许的，哪些是不可用的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:20:41.003

在这里看到这篇文章：

[在“html”字段中使用 HTML 标签是否有任何限制？](https://stackoverflow.com/questions/16045816/are-there-any-restrictions-for-using-html-tags-in-html-field)

我们很快就会把它写进文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T00:36:13.327

根据[Mirror API Documentation](https://developers.google.com/glass/v1/reference/timeline#html)，允许以下内容：

此项目的 HTML 内容。如果同时为项目提供 和 ，`text`则将在时间轴中呈现。`html``html`

**允许的 HTML 元素**- 您可以在时间线卡片中使用这些元素。

*   标题：`h1`, `h2`, `h3`, `h4`, `h5`,`h6`
*   图片：`img`
*   列表：`li`, `ol`,`ul`
*   HTML5 语义：`article`, `aside`, `details`, `figure`, `figcaption`, `footer`, `header`, `nav`, `section`, `summary`,`time`
*   结构：`blockquote`, `br`, `div`, `hr`, `p`,`span`
*   款式: `b`, `big`, `center`, `em`, `i`, `u`, `s`, `small`, `strike`, `strong`, `style`, `sub`,`sup`
*   表：`table`, `tbody`, `td`, `tfoot`, `th`, `thead`,`tr`

**阻止的 HTML 元素：**这些元素及其内容已从 HTML 有效负载中删除。

*   文件头：`head`,`title`
*   嵌入：`audio`, `embed`, `object`, `source`,`video`
*   相框：`frame`,`frameset`
*   脚本：`applet`,`script`

**其他元素：**任何未列出的元素都将被删除，但它们的内容会被保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T07:26:00.063

[使用 Google Doc 嵌入文件](http://techtrace.net/how-to-embed-google-doc-files-in-web-page/)是 google doc 的另一个很酷的用途，我们甚至可以在任何可以使用的地方使用它。

# css - CSS将一个div定位在另一个浮动的div下：left

> ID：16139336
> 
> 赞同：5
> 
> 时间：2013-04-22T04:14:46.310
> 
> 标签：css, html, floating

我有这个：

```
<div class="listing-thumbnail"><a href="http://domain-name.com/thislisting/"><img 

class="wpbdmthumbs" src="http://domain-name.com/wp-

content/uploads/2013/04/dancegroup-300x300.jpg" style="max-width: 300px;"/></a>
</div>

<div class="listing-details">

    <div class="field-value wpbdp-field-endmonth meta"><span 

class="value">March</span></div>

    <div class="field-value wpbdp-field-enddaynumber meta"><span 

class="value">10</span></div>

    <div class="field-value wpbdp-field-citystatezip meta"><span 

class="value">Northampton, Massachusetts 01060</span></div>

</div> 
```

显示如下：

|图像....| 3 月 10 日马萨诸塞州北安普顿 01060
|.................|
|_______________|

但我希望它像这样显示：

|图像....| 3 月 10 日
|..................| 马萨诸塞州北安普顿 01060
|_______________|

所有字段都是从 WP 数据库条目中动态提取的。

目前，三月字段和它之前的其他日期相关字段的css，为了让它们排在同一行，每个字段都是这样的：

`#content .wpbdp-listing .wpbdp-field-endmonth .wpbdp-field-enddaynumber .value { float: left; }`

我的问题是，我可以应用什么 css 来导致`city-state-zip`div 以及跟随它的那些，从日期信息下方的下一行开始，而不是与日期信息在同一行？

请注意，`city-state-zip`div 后面的字段表现良好，并且都从自己的行开始。

我添加`float:left`了将日期字段全部放在同一行而不是列中。

这些 div 都在另一个 div 中，还有更多。照原样，没有我为日期元素添加的浮动，它们都在页面垂直向下排列，一个接一个。

每个跟随的 div`city-state-zip`都从新行开始。我想要`city-state-zip`一行中的元素。

请注意，`clear: left`并`clear: all`没有成功，因为这些 div 的左侧有一个图像，它将城市 div 推到下面，如下所示：

|图像....| 3 月 10 日
|..................|
|_______________|
马萨诸塞州北安普敦 01060

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T04:17:50.027

在`clear:both;`类字段值 wpbdp-field-citystatezip 中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:31:01.237

您可以在包含 city/state/zip 的元素上使用 display: block 以使其开始新行。确保只有您的日期字段有一个 float: left 。如果 city/state/zip 有一个 float: left 和 display: 块，那么它会尽可能地向左浮动，也就是日期字段的右侧。

为什么不能`<br />`在包含日期的 div 和城市/州/邮编之间放置一个？

# java - 带有扫描仪的 InputMismatchException

> ID：16139337
> 
> 赞同：2
> 
> 时间：2013-04-22T04:14:54.587
> 
> 标签：java, exception, exception-handling, java.util.scanner, inputmismatchexception

我有以下 Java 代码：

```
Scanner input = new Scanner(System.in);
    try {
        System.out.println("Enter your name>>");
        String name = input.next();
        System.out.println("Enter your year of birth>>");
        int age = input.nextInt();

        System.out.println("Name:  " + name);
        System.out.println("Year of Birth:  " + age);
        System.out.println("Age:  " + (2012 - age));

    } catch (InputMismatchException err) {
        System.out.println("Not a number");
    } 
```

当我输入一个带空格的名称（例如“James Peterson”）时，我会正确地得到下一行输出（输入您的出生年份），然后立即得到 InputMismatchException。该代码使用没有空格的单个名称。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:18:43.380

```
 System.out.println("Enter your name>>");
    String name = input.next();
    System.out.println("Enter your year of birth>>");
    int age = input.nextInt(); 
```

[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28%29)*使用分隔符模式将其输入分解为标记，*默认***情况下匹配空格。***

 **当您输入**"James Peterson"**时，[Scanner#next()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)将 "James" 作为令牌并将其分配给`String name`，然后您执行[Scanner#nextInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28%29)将 "Peterson" 作为下一个令牌，但这不是如果下一个标记与*正则表达式**不匹配*，或者超出范围，则可以[强制转换](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/InputMismatchException.html)为`int`InputMismatchException 。`nextInt()``InputMismatchException` *`Integer`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T23:58:09.533

实际上，*您的代码*中的问题已被明确指出。在您的情况下，有两种典型的方法可以实现这一目标：

### 一

使用[useDelimiter](https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#useDelimiter-java.lang.String-)方法来分隔输入，在每个输入之后，您需要**点击**.`Enter`

> 将此扫描仪的分隔模式设置为从指定字符串构造的模式。

在您的情况下，您需要

```
 Scanner sc = new Scanner(System.in);
    sc.setDelimiter("\\n");
    // hit the "Enter" after each input for the field; 
```

### 二

您也可以使用[readLine获得相同的结果](https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#nextLine--)

> 将此扫描器前进到当前行并返回被跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。

这样，你可以做到

```
 Scanner sc = new Scanner(System.in);

    System.out.println("Enter your name>>");
    String name = sc.nextLine();
    ...
    System.out.println("Enter your year of birth>>");
    int age = sc.nextInt(); 
```

### 附言

实际上，如果需要，您可以以更严格的方式实现它，使用[next(Pattern pattern)控制模式。](https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#next-java.util.regex.Pattern-)

```
 int age = sc.next(Pattern.compile("\\d+{1,3}")); 
```

在这种情况下，如果输入与**不**匹配，当输入是字符串时`pattern`，它将`InputMismatchException`像您尝试的那样抛出。`nextInt`

> 当我输入一个带空格的名字（例如“James Peterson”）时，我会正确地得到下一行输出（输入您的出生年份>>），然后立即出现 InputMismatchException。**

# jquery - jquery如何使用hover this关键字只显示当前选中的元素

> ID：16139339
> 
> 赞同：0
> 
> 时间：2013-04-22T04:14:55.593
> 
> 标签：jquery

悬停类 div.results 我想显示 span.prod_desc 以显示

我怎样才能做到这一点。

```
<div class="results" style="width: 600px;">

<div class="prod" style="width: 265px;border: 1px solid black;float: left;margin-right: 20px;margin-bottom: 5px;position: relative;">
<span class="prod_que" style="padding-top: 10px;padding-left: 5px;padding-bottom: 10px;">Question</span>
<span class="prod_desc" style="position: absolute;display:none;">Hello World</span>
</div>

<div class="prod" style="width: 265px;border: 1px solid black;float: left;margin-right: 20px;margin-bottom: 5px;position: relative;">
<span class="prod_que" style="padding-top: 10px;padding-left: 5px;padding-bottom: 10px;">Question</span>
<span class="prod_desc" style="position: absolute;display:none;">Hello World</span>
</div>

</div> 
```

我绑定了它，但它在悬停时显示所有内容，我只想显示当前悬停的元素。

```
 jQuery("div.results").hover(function()
{
    jQuery(this).find(".prod_desc").show();
    },
    function(){
    jQuery(this).find(".prod_desc").hide();

}); 
```

请提出一些建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:21:33.390

您将鼠标悬停在结果 div 上。并且所有描述跨度都是该 div 的子级。这就是为什么所有人都出现了。

试试这个

```
jQuery("div.results > .prod").hover(
function(){
    jQuery(this).find(".prod_desc").show();
},
function(){
    jQuery(this).find(".prod_desc").hide();

}); 
```

我希望这会有所帮助，它将显示当前悬停的 div 的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:29:39.583

检查这个： -`[Demo](http://jsfiddle.net/nFAve/)`

`[Refer Toggle](http://jqueryui.com/toggle/)`

这将`div.results`用作上下文元素。

```
 jQuery("div.prod", "div.results").hover(function () {
     jQuery(this).find(".prod_desc").toggle();
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:30:48.950

由于`.prod_desc`不是 的直接子级`.results`，因此您需要在应用之前先使用[children()](http://api.jquery.com/children/)查找所有`.prod`div `find`：

```
jQuery("div.results").hover(function()
{
    jQuery(this).children('.prod').find(".prod_desc").show();
    },
    function(){
    jQuery(this).children('.prod').find(".prod_desc").hide();

}); 
```

**[小提琴](http://jsfiddle.net/vBYFA/)**

# iphone - 导航栏中带有自定义按钮的 UITabBarcontroller 的 Facebook 类型幻灯片菜单

> ID：16139341
> 
> 赞同：0
> 
> 时间：2013-04-22T04:15:19.567
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller

我想为 UITabBarController 实现 Facebook 类型的滑动菜单，它有四个选项卡（屏幕），当我们单击`UIButton`每个屏幕顶部的自定义时，应该会出现这个侧菜单。我尝试了一些开源幻灯片菜单，如`ECSlidingViewController`、`PKRevealController`、`JTRevealSidebarDemo`和`SASlideMenu`，但没有一个没有**`UINavigationController`**. 谁能指导我如何实现上述目标。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:59:00.143

那些开源幻灯片菜单通常很复杂，而且构建得不好，或者是为旧版本构建的。这就是我所做的

创建一个自定义按钮，然后对其进行动画处理，使其从左向右或从右向左滑动，从屏幕上滑到屏幕上，使其看起来像在展开，等等。

希望这可以帮助

# java - 运算符 * 未定义参数类型 String, int

> ID：16139342
> 
> 赞同：0
> 
> 时间：2013-04-22T04:15:26.663
> 
> 标签：java, operators

问题：

我试图通过 sharedpreferences 提取布尔值，但是每次我尝试使用该值时，我都会收到一个编译器错误，指出该运算符对于参数类型是未定义的。我不确定为什么会发生这种情况 - 我相信我已经将时间布尔值转换为字符串 - 然后我应该能够将其用作乘以得到我的时间值的值：

资源：

```
 String PREF = "prefs";
    SharedPreferences prefs = getSharedPreferences(PREF, Context.MODE_PRIVATE); 
    boolean name = prefs.getBoolean("name", true); 
    boolean code = prefs.getBoolean("corename", true);
    boolean time = prefs.getBoolean("time", true);
    boolean ssid = prefs.getBoolean("restricted", true);

    String killtime = String.valueOf(time);

    Intent intent2 = new Intent(Rules.this, KillTimer.class);
    PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0, intent2,
            0);
    AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
            killtime * 1000, pintent2); // error is thrown here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:16:56.510

您正在尝试将 a`String`和a 相乘`int`。那没有意义。话又说回来，`String`如果强制转换成 an 的值是没有意义的`int`- 它要么是 1 要么是 0，这可以用三元语句更清楚地说明（很有趣）。

```
alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
        time ? 1000 : 0, pintent2); 
```

# iphone - iOS：存储行和列的表

> ID：16139343
> 
> 赞同：1
> 
> 时间：2013-04-22T04:15:27.313
> 
> 标签：iphone, ios, xcode

我只是在考虑什么是最好的方式，即存储具有多行和多列的数据的数据结构。我应该将其存储为： 1\. 数组数组？2\. NSDictionary？

或者在 iOS 中是否有任何类似网格的数据结构，我可以轻松地从数据结构中轻松获取任何行/列？例如，我必须能够获取第 5 行第 3 列中的值。目前，比如说，我将每一行存储为一个数组，并将这些数组存储在另一个数组中（比如数组数组），然后获取第 5 行第 3 列的值，我需要获取数组数组中的第 5 行，然后在结果数组中，我需要获取第 3 个对象。有一个更好的方法吗？请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:11:42.690

> 然后要获取第 5 行第 3 列中的值，我需要获取数组数组中的第 5 行，然后在结果数组中，我需要获取第 3 个对象。有一个更好的方法吗？

数组数组很适合实现，最近添加到 Objective-C 的集合下标使这更容易——你可以使用如下表达式

```
NSString *s = myData[m][n]; 
```

获取第 th 行`n`第 th 列的字符串`m`。

也就是说，为您的数据结构创建一个单独的类可能仍然是一个好主意，这样您的其余代码就不需要知道数据是如何存储的。这也将简化将实现从数组数组更改为 SQLite 表或其他东西的过程。

您的数据存储类不需要花哨或复杂。这是第一关：

```
@interface DataTable

- (id)objectAtRow:(NSInteger)row column:(NSInteger)column;
- (void)setObjectAtRow:(NSInteger)row column:(NSInteger)column;

@end 
```

我相信您可以看到如何根据数组数组来实现这些。当调用者尝试设置当前范围之外的值时，您必须做一些工作来添加行和/或列。您可能还想添加对诸如[快速枚举](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSFastEnumeration_protocol/Reference/NSFastEnumeration.html)以及写入和读取[属性列表之](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/PropertyLists/CreatePropListProgram/CreatePropListProgram.html#//apple_ref/doc/uid/10000048i-CH5-SW4)类的支持，但这可能会在以后出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T04:27:06.870

还有其他方法可以做到这一点，但是您使用的方法没有错。例如，您可以将 NSDictionary 与 NSIndexPath 类型的键一起使用，甚至可以使用“row,col”形式的字符串键，但除了稀疏矩阵之外，我没有看到任何优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T04:26:32.053

您可以使用数组数组，就像您正在做的那样，也可以使用字典数组。两者都可以，而且我认为其中一个没有任何偏好。这一切都取决于首先哪种方式最方便您设置数据结构。使用任一方法访问表视图的数据同样容易。

# ios - iOS按钮没有在按钮点击时播放音频文件

> ID：16139346
> 
> 赞同：0
> 
> 时间：2013-04-22T04:15:43.083
> 
> 标签：ios, iphone, objective-c, xcode, uibutton

这是一个新手问题。

我有一个非常简单的应用程序，它应该只在点击主视图上的按钮时播放音频文件。

我正在使用 XCode 4.6 版。

我在我的项目中添加了一个音频文件“audioclip.wav”。我已经添加了`AVFoundation.framework`.

我的项目只有`ViewController.h`和`ViewController.m`。

我使用助手编辑器双击并从情节提要中的按钮拖动到 .h 文件以创建我的`IBAction`连接。

我的 ViewController.h：

```
#import <UIKit/UIKit.h>
#import<AVFoundation/AVAudioPlayer.h>

@interface ViewController : UIViewController <AVAudioPlayerDelegate> {
}
- (IBAction)playAudio:(id)sender;

@end 
```

我的 ViewController.m：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)playAudio:(id)sender {
    AVAudioPlayer *audioPlayer;
    NSString *audioPath = [[NSBundle mainBundle] pathForResource:@"audioclip" ofType:@"wav" ];
    NSURL *audioURL = [NSURL fileURLWithPath:audioPath];
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:nil];
    [audioPlayer play];
}

@end 
```

无论出于何种原因（可能是我遗漏了一些愚蠢的事情）当我单击按钮时，audioclip.wav 文件都不会播放。我已经在 iPhone 6.1 模拟器和我的设备上进行了测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T05:11:38.430

我认为wav文件存在一些问题。有些人似乎可以让它工作，但我尝试了几个不同的文件，但没有一个可以播放。下面代码中注释掉的 mp3 和 m4a 文件运行良好。不需要对委托做任何事情，它是可选的。

```
 #import "ViewController.h"
    #import <AVFoundation/AVFoundation.h>

    @interface ViewController ()
    @property (strong,nonatomic) AVAudioPlayer *audioPlayer;
    @end

    @implementation ViewController

    - (IBAction)playAudio:(id)sender {
        //NSString *audioPath = [[NSBundle mainBundle] pathForResource:@"11 Prayer" ofType:@"mp3" ];
       //NSString *audioPath = [[NSBundle mainBundle] pathForResource:@"Sunshine" ofType:@"m4a" ];
        NSString *audioPath = [[NSBundle mainBundle] pathForResource:@"space" ofType:@"wav" ];
        NSURL *audioURL = [NSURL fileURLWithPath:audioPath];
        NSError *error;
        self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:&error];
        [self.audioPlayer play];
    } 
```

如果我记录错误，我会得到 wav 文件：

```
Error Domain=NSOSStatusErrorDomain Code=1685348671 "The operation couldn’t be completed. (OSStatus error 1685348671.)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:01:54.163

请尝试使用这个..

```
- (IBAction)playAudio:(id)sender
{
     NSURL *url=[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"audioclip" ofType:@"wav"]];
    NSData *data =[NSData dataWithContentsOfURL:url];
    audioPlayer  = [[AVAudioPlayer alloc] initWithData:data error:nil];
    audioPlayer.delegate = self;
    [audioPlayer setNumberOfLoops:0];

    [audioPlayer play];
} 
```

我希望这会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:20:26.993

试试这样

```
 NSString *audio=[[NSBundle mainBundle]pathForResource:@"audioclip" ofType:@"wav"];
    NSURL *url=[[NSURL alloc]initFileURLWithPath:audio];
    avPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:url error:nil];
    avPlayer.delegate = self;
    [avPlayer prepareToPlay];
    [avPlayer play]; 
```

并检查是否`IBOutlet`连接并检查带有断点的按钮操作方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T08:23:15.920

正如我所看到的，您已经使代码非常简单，所以它的制作方式确实要求它不是一个大的 wav 文件。

这样，您需要将音频文件减少到 10 秒以下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-29T08:49:53.983

遇到此问题时，我正在使用 .m4a。对我来说，不实现 AVAudioSession 是问题所在

```
var session = AVAudioSession.sharedInstance()
    do {
        session.setCategory(AVAudioSessionCategoryPlayAndRecord)
        try session.setActive(true)
    } catch {
        gf.displayAlert("problem encountered", userMessageTitle: "")
        self.navigationController?.popViewControllerAnimated(true)
    } 
```

# java - 内核线程定时器中断的优先级队列实现

> ID：16139350
> 
> 赞同：1
> 
> 时间：2013-04-22T04:15:59.370
> 
> 标签：java, algorithm, class, data-structures, operating-system

我正在优化 Nachos OS 中内核线程的定时器中断功能。

介绍[在这里](http://www.eecs.berkeley.edu/Pubs/TechRpts/1993/CSD-93-739.pdf)。

我有一个名为警报的课程：

```
public alarms(long wakeTime, KThread my_thread)
{
    wakeTime=wakeTime;
    thread = my_thread;
}

public long getWakeTime()
{
    return wakeTime;
}

public KThread get_my_thread()
{
    return thread;
} 
```

我还有一个基于最小堆的优先级队列：

```
Queue<alarms> my_alarms = new PriorityQueue<alarms>(); 
```

如何使优先级队列比较警报类的唤醒时间属性，并基于该属性生成最小堆。

在 C++ 中，我将重载 operator< 函数，如下所示：

```
bool operator<(alarms a, alarms b){return a.wakeTime < b.wakeTime ? true : false;} 
```

但我不确定如何在 java 中使用比较器。有人可以澄清一下我将如何比较java中的wakeTime属性吗？我是否需要让我的警报类实现比较器类，或者我将如何去做？

感谢您的时间！此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:25:06.567

这就是你的做法。。

```
public class Alarm implements Comparable<Alarm> {
   @Override 
    public int compareTo(Object o) {
        Alarm a = (Alarm) o; 
        return this.wakeTime - a.wakeTime ;
    }
} 
```

# python - 单元测试中未创建多对多帮助表

> ID：16139352
> 
> 赞同：0
> 
> 时间：2013-04-22T04:16:01.730
> 
> 标签：python, sqlalchemy, flask

我有一个使用 SQLAlchemy 的 Flask 应用程序，但我无法让我的多对多关系与我的单元测试一起工作。

在我的`setUp`方法中，我创建了我的应用程序并像这样初始化我的数据库：

```
from flask.ext.sqlalchemy import SQLAlchemy
db = SQLAlchemy()

def setUp(self):
    self.app = create_app(env='test')
    self.app.logger.disabled = True
    db.init_app(self.app)
    with self.app.app_context():
        db.create_all() 
```

在我的 models.py 中，我像这样定义我的多对多：

```
contact_buying_categories = db.Table('contact_buying_category',
    db.Column('contact_id', db.Integer, db.ForeignKey('contact.id')),
    db.Column('category_id', db.Integer, db.ForeignKey('buying_categories.id'))
)

class Contact(db.Model):

    __tablename__ = 'contact'
    __bind_key__ = 'db1'

    id = db.Column(db.Integer, primary_key=True)

    buying_categories = db.relationship('BuyingCategory',
                                        secondary=contact_buying_categories)

      ...

class BuyingCategory(db.Model):

    __tablename__ = 'buying_categories'
    __bind_key__ = 'db2'

    id = db.Column(db.Integer, primary_key=True)
    ... 
```

当我运行单元测试时，我收到以下错误：

```
OperationalError: (OperationalError) no such table: contact_buying_category 
u'SELECT buying_categories.id AS buying_categories_id, buying_categories.name AS 
buying_categories_name \nFROM buying_categories, contact_buying_category \nWHERE ? = 
contact_buying_category.contact_id AND buying_categories.id = 
contact_buying_category.category_id' (1,) 
```

`create_all()`如果我在调用后进入 IPDB`setUp`并执行 a `db.metadata.tables`，则它具有表定义：

```
'contact_buying_category': Table('contact_buying_category', MetaData(bind=None), 
Column('contact_id', Integer(), ForeignKey('contact.id'), table=
<contact_buying_category>), Column('category_id', Integer(), 
ForeignKey('buying_categories.id'), table=<contact_buying_category>), schema=None), 
```

我很困惑，为什么应用程序找不到`contact_buying_category`表？如何检查它是否真的被创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:13:38.117

我需要在我的多对多关系上设置一个 bind_key，以便 Flask-SQLAlchemy 在调用`db.create_all()`.

```
contact_buying_categories = db.Table('contact_buying_category',
    db.Column('contact_id', db.Integer, db.ForeignKey('contact.id')),
    db.Column('category_id', db.Integer, db.ForeignKey('buying_categories.id')),
    info={'bind_key': 'wdl'}
) 
```

# android - 在 android 中从 twitter 获取用户主页提要

> ID：16139353
> 
> 赞同：0
> 
> 时间：2013-04-22T04:16:09.950
> 
> 标签：android, twitter, twitter-feed

我想从 twitter 获取用户主页。

我想知道我们可以用来获取用户主页提要的 url 查询。目前使用 OAuth 库从 twitter 授权。完成 。

是否有任何查询 url 像搜索推文 [twitter 搜索提要 url 查询](http://search.twitter.com/search.json?q=android)

我们通过它获得主页和用户状态。

应该写什么查询来获取 twitter 主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:35:42.593

好吧，如果您成功通过 Twitter 进行身份验证，则无需查询 URL 即可获取登录用户的时间线。即使你可以，我也不知道。

话虽如此，我用它来获取时间轴：

```
ConfigurationBuilder builder = new ConfigurationBuilder();

// GET THE CONSUMER KEY AND SECRET KEY FROM THE STRINGS XML
String TWITTER_CONSUMER_KEY = getString(R.string.TWITTER_CONSUMER_KEY);
String TWITTER_CONSUMER_SECRET = getString(R.string.TWITTER_CONSUMER_SECRET);

// TWITTER ACCESS TOKEN
String twit_access_token = twitPrefs.getString(PREF_KEY_OAUTH_TOKEN, "");

// TWITTER ACCESS TOKEN SECRET
String twit_access_token_secret = twitPrefs.getString(PREF_KEY_OAUTH_SECRET, "");

builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
builder.setOAuthAccessToken(twit_access_token);
builder.setOAuthAccessTokenSecret(twit_access_token_secret);

AccessToken accessToken = new AccessToken(twit_access_token, twit_access_token_secret);
Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

Paging paging = new Paging(1, 20);
statuses = twitter.getHomeTimeline(paging);

// NOW LOOP THROUGH THE statuses AND FETCH INDIVIDUAL DETAILS
for (int i = 0; i < statuses.size(); i++) {
    String strTweetID = String.valueOf(statuses.get(i).getId());

    .... REST OF WHATEVER YOU NEED TO PULL OUT OF THE 
} 
```

*有关示例中使用的实例的一些信息：*

1：`statuses = twitter.getHomeTimeline(paging);`示例中使用的行：已声明为全局变量`statuses`的实例：`List<Status>`

```
List<Status> statuses = new ArrayList<Status>(); 
```

2：是我用来存储**OAuth Token**和**OAuth Secret Key**`twitPrefs`的一个实例。您将需要用您自己的检索数据的方法替换它。`SharePreferences`

 ****3：`String TWITTER_CONSUMER_KEY = getString(R.string.TWITTER_CONSUMER_KEY);`和`String TWITTER_CONSUMER_SECRET = getString(R.string.TWITTER_CONSUMER_SECRET);`是从 中拉出的`strings.xml`。与上面的第二点类似，使用您当前使用的任何方法来检索所述详细信息。

*替代解决方案：*

如果您希望获得**JSON**响应，请对上述代码进行以下更改：

```
builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
builder.setOAuthAccessToken(twit_access_token);
builder.setOAuthAccessTokenSecret(twit_access_token_secret);
builder.setJSONStoreEnabled(true);

try {
    Paging paging = new Paging(offSet, 5);
    statuses = twitter.getHomeTimeline(paging);

    try {
        String strInitialDataSet = DataObjectFactory.getRawJSON(statuses);
        JSONArray JATweets = new JSONArray(strInitialDataSet);

        for (int i = 0; i < JATweets.length(); i++) {
            JSONObject JOTweets = JATweets.getJSONObject(i);

            String tweetID = JOTweets.getString("id");

            .... OTHER DETAILS YOU NEED.
        }

    } catch (Exception e) {

    }

} catch (Exception e) {

} 
```****

# javascript - 未捕获的参考错误：未定义 stLight（仅在 Chrome 中）

> ID：16139354
> 
> 赞同：9
> 
> 时间：2013-04-22T04:16:18.107
> 
> 标签：javascript, django, google-chrome, cross-domain

我的网页就这样结束了：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">var switchTo5x=false;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">
stLight.options({publisher: "ur-24e62f76-1f66-e3aa-1190-c533b729ca11", doNotHash: true, doNotCopy: true, hashAddressBar: false});
</script>
<script type="text/javascript" src="/static/bootstrap/js/bootstrap.js"></script>  
</body>
</html> 
```

在 FireFox 和 Safari 中，它的行为。在 Chrome 中：

```
Uncaught ReferenceError: stLight is not defined nectar-tugg-art:229
(anonymous function) 
```

换句话说，w.sharethis.com/button/buttons.js 中的代码无法执行，因此无法定义 stLight 变量。

该页面是在远程服务器上运行的 Django Web 应用程序的一部分。将生成的 HTML 页面保存在本地，然后在 Chrome 中查看，可以正常工作。

在这一点上，我被困住了。与跨域安全模型有关吗？没有任何安全例外。

与其他 javascript 文件的一些奇怪的交互？

静态（生成）代码在[这里](https://dl.dropboxusercontent.com/u/767553/stlight-test.html)。但它不会从 Dropbox 运行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T04:35:00.710

好的，我想我可能已经找到了：该网站在 Chrome 的*隐身*（色情）模式下运行良好。所以我强烈怀疑我有某种扩展程序会干扰它（比如 Do Not Track 或其他东西）。

编辑这是共谋的“阻止已知跟踪站点”功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-28T07:43:38.277

就我而言，我发现它是一个名为“断开连接”的 Chrome 插件。感谢@SteveBennet 提供线索。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-07T05:30:31.683

就我而言，我更换了

```
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script> 
```

这由

```
<script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script> 
```

[分享这个](http://support.sharethis.com/customer/portal/articles/475097-ssl-support#sthash.bIavEhsp.dpbs)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-20T17:45:44.120

在 Magento stLight 中未定义：这可以通过以下方式解决： `<script type="text/javascript"> window.onload = function(){ stLight.options({publisher: "ur-24e62f76-1f66-e3aa-1190-c533b729ca11", doNotHash: true, doNotCopy: true, hashAddressBar: false});} </script>`

`http://w.sharethis.com/button/buttons.js`问题（我认为）是在该函数存在的脚本之后加载js 文件。所以我认为最简单的解决方案是window.onload，可能还有其他好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T23:08:29.047

除了其他答案中列出的扩展之外，这可能是由[Ghostery扩展引起的。](https://www.ghostery.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-23T09:46:26.497

如果您在您的网站上打开了 SSL，您可能想尝试重写您的 ShareThis 脚本：

```
<script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">
  stLight.options({
    publisher:'12345',
  });
</script> 
```

# cassandra - Cassandra 没有检索到正确的整数值

> ID：16139362
> 
> 赞同：3
> 
> 时间：2013-04-22T04:16:40.430
> 
> 标签：cassandra, phpcassa

我正在使用 cql 3.0.0

我已经执行了查询：

```
INSERT INTO emp (empID, deptID, first_name, last_name)
VALUES (104, 15, 'jane', 'smith') 
```

在检索此记录时，我得到以下值：

```
empid = h
deptid =  (blank value)
first_name = 'jane'
last_name = 'smith' 
```

在搜索它时，我发现 h 相当于 utf-8 字符 104。utf-8 中的 15 也是空白的。（参考链接：[http](http://www.utf8-chartable.de/unicode-utf8-table.pl?utf8=dec&unicodeinhtml=dec) ://www.utf8-chartable.de/unicode-utf8-table.pl?utf8=dec&unicodeinhtml=dec ）

我在创建表期间将列类型设置为 int，但在检索时我没有得到 int 值。

如何获取要检索的正确值。我不想要 utf-8 值。

谢谢

我正在使用 cassandra 1.2.4

以下是我用 phpcassa 编写的代码：

```
require_once(__DIR__.'/../lib/autoload.php');

use phpcassa\Connection\ConnectionPool;
use phpcassa\ColumnFamily;
use phpcassa\SystemManager;
use phpcassa\Schema\StrategyClass;
use cassandra\Compression;
use cassandra\ConsistencyLevel;

$pool = new ConnectionPool("prod",array('X.X.X.X','X.X.X.X'));

$raw = $pool->get();
$rows = $raw->client->set_cql_version("3.0.0");

$rows = $raw->client->execute_cql3_query('USE prod;', Compression::NONE,    ConsistencyLevel::ONE );
$rows = $raw->client->execute_cql3_query('CREATE TABLE emp (
  empID int,
  deptID int,
  first_name varchar,
  last_name varchar,
  PRIMARY KEY (empID, deptID));
  ', Compression::NONE, ConsistencyLevel::ONE );  

$rows = $raw->client->execute_cql3_query('INSERT INTO emp (empID, deptID, first_name,     last_name)
  VALUES (104, 15, \'jane\', \'smith\');
  ', Compression::NONE, ConsistencyLevel::ONE );  

$rows = $raw->client->execute_cql3_query('SELECT * FROM emp WHERE empID IN (2,104)     ORDER BY deptID ASC;', Compression::NONE, ConsistencyLevel::ONE );  

echo "<pre>";
print_r($rows);
echo "<pre>"; 
```

生成的输出是：

```
cassandra\CqlRow Object
               (
                [key] => 
                [columns] => Array
                    (
                        [0] => cassandra\Column Object
                            (
                                [name] => empid
                                [value] => h
                                [timestamp] => 
                                [ttl] => 
                            )

                        [1] => cassandra\Column Object
                            (
                                [name] => deptid
                                [value] => 
                                [timestamp] => 
                                [ttl] => 
                            )

                        [2] => cassandra\Column Object
                            (
                                [name] => first_name
                                [value] => jane
                                [timestamp] => 
                                [ttl] => 
                            )

                        [3] => cassandra\Column Object
                            (
                                [name] => last_name
                                [value] => smith
                                [timestamp] => 
                                [ttl] => 
                            )

                    )

            ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T17:16:43.260

虽然答案有点晚，但我在为 Yii 框架编写自己的 cassandra-wrapper 时拼命寻找解决方案。我想出了类似以下类的东西，它消除了 cassandra 中不同数据类型（包括整数类型）的不正确二进制问题：

```
Yii::import('ext.phpcassa.autoload');
require_once('protected/extensions/phpcassa/autoload.php');

use phpcassa\Connection\ConnectionPool;
use phpcassa\ColumnFamily;
use phpcassa\ColumnSlice;
use phpcassa\SystemManager;
use phpcassa\Schema\StrategyClass;
use phpcassa\Schema\DataType;

class ACassandraConnection extends CApplicationComponent {

    protected $_pool = null;
    public $keyspace = null;
    public $servers = null; 

    /**
     * Establish connection to cassandra cluster
     * @return object 
     */
    private function _get_raw() {
        if ($this->_pool === null) {
            $this->_pool = new ConnectionPool($this->keyspace, $this->servers);
        }
        return $this->_pool->get();
    }

    public function cql_query($query) {
        $raw = $this->_get_raw();
        $cql_result = $raw->client->execute_cql3_query($query, cassandra\Compression::NONE, cassandra\ConsistencyLevel::ONE);
        $this->_pool->return_connection($raw); 
        return $cql_result;
    }

    public function cql_get_rows($cql_result) {
        if ($cql_result->type == 1) { 
            $rows = array(); 
            foreach ($cql_result->rows as $rowIndex => $cqlRow) { 
                $cols = array(); 
                foreach ($cqlRow->columns as $colIndex => $column) {
                    $type = DataType::get_type_for($cql_result->schema->value_types[$column->name]);
                    $cols[$column->name] = $type->unpack($column->value);
                }
                $rows[] = $cols;
            }
            return $rows; 
        } else {
            return null;
        }
    }

    /**
     * Perform garbage collection 
     */
    public function __destruct() {
        if($this->_pool !== null) {
            $this->_pool->close();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:43:58.807

我会说请查看您的解决方案，我已经尝试了与您描述的问题完全相同的方法，但它对我来说工作正常。可能在创建时您已使用 utf-8 作为其类型。

**架构**

```
CREATE COLUMNFAMILY test(empID int, deptID int, first_name text, last_name text, PRIMARY KEY(empID)); 
```

**插入**

```
INSERT INTO emp (empID, deptID, first_name, last_name) VALUES (104, 15, 'jane', 'smith'); 
```

**取回**

```
SELECT * FROM test ;

empid  | deptid | first_name | last_name
-------+--------+------------+-----------
104    |     15 |       jane |     smith 
```

# adsense - 在 Durandal 中加载 Adsense

> ID：16139363
> 
> 赞同：1
> 
> 时间：2013-04-22T04:16:41.077
> 
> 标签：adsense, durandal

我正在使用 Durandal 制作单页应用程序。有没有办法将 Adsense 代码添加到视图/模型中？我目前正在使用 iframe 将广告添加到视图中。我担心这可能违反 Google 的条款和条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T14:49:53.173

您可以使用 Knockout 绑定脚本，但是您是否尝试过使用 Durandal 的 Composition 来包含 HTML 页面？

例子：

```
<div>
  <div data-bind="compose: 'views/adsense.html'"></div>
</div> 
```

灵感来自这里的文档：http: [//durandaljs.com/documentation/Using-Composition/](http://durandaljs.com/documentation/Using-Composition/)

# c# - 通过http发布数据，每次请求后在代理之间切换

> ID：16139364
> 
> 赞同：0
> 
> 时间：2013-04-22T04:16:41.693
> 
> 标签：c#, .net, proxy, http-post

我对 C# 比较陌生，尤其是在它的 Web 方面。

假设我有以下内容：

```
string URI = "http://www.domain.com/post.php";
string params = "param1=value1&param2=value2&param3=value3"; 
```

我知道我可以发布这样的数据：

```
using (WebClient wc = new WebClient())
{
    wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
    string HtmlResult = wc.UploadString(URI, params);
} 
```

但是在发布这些数据时如何使用代理？

我找到了这个[相关链接](https://stackoverflow.com/a/1939025/1328014)：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URI);
WebProxy myproxy = new WebProxy("1.1.1.1", 80);
myproxy.BypassProxyOnLocal = false;
request.Proxy = myproxy;
request.Method = "GET";
HttpWebResponse response = (HttpWebResponse) request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:22:24.760

[WebClient.Proxy](http://msdn.microsoft.com/en-US/library/system.net.webclient.proxy%28v=vs.80%29.aspx)是您正在寻找的属性：

```
WebProxy[] myproxies = new WebProxy[] { new WebProxy("1.1.1.1", 80), 
     new WebProxy("1.1.1.2", 80) };
var currentProxy = 0;

while (true)
{
   // set proxy to new one every iteration...
   currentProxy = (currentProxy + 1) % myproxies.Length;
   using (WebClient wc = new WebClient())
   {
     wc.Proxy = myproxies[currentProxy]; 
     wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
     string HtmlResult = wc.UploadString(URI, params);
   }
} 
```

# android - 我有一个主题对话框的活动，但在活动组类中它不可见

> ID：16139368
> 
> 赞同：1
> 
> 时间：2013-04-22T04:17:06.813
> 
> 标签：android, android-activity, dialog, themes

我的问题与此类似： [Android：对话框主题活动不可见](https://stackoverflow.com/questions/9963976/android-dialog-themed-activity-not-visible)

但我没有看到任何人回答它。

这是我的代码：

```
 public class QueryAct extends Activity implements OnFocusChangeListener ,          OnItemClickListener , OnResponseListener , OnStartListener
{
    oncreate(Bundle savedInstanceState)
    {
                super.onCreate(savedInstanceState);
        mAct = this ;
        setContentView(R.layout.activity_query) ;
        views = new QueryActViews(mAct) ; 
        searchThread = new SearchThread() ;
        searchThread.responseListener = this ;
        searchThread.startListener = this ;
        intialViews(views) ;

        HUtil.checkAppUpdate(this);
    }
} 
```

这是 HUtil 类中的方法

```
public static void checkAppUpdate(Context ctx)
    {
    SharedPreferences sp = ctx.getSharedPreferences(GContst.SP_NAME, Context.MODE_PRIVATE);

    boolean not_alarm_update = sp.getBoolean(GContst.NOT_ALARM_UPDATE, false);

        if(!not_alarm_update)
        {
            String update_url = sp.getString(GContst.UPDATE_URL, "");
            if(!"".equals(update_url))
            {
                ctx.startActivity(new Intent(ctx,UpdateDialog.class));
            }
        }
    } 
```

这是我的 manifest.xml。我只是这样设置活动 updateDialog 的主题：

```
<activity
        android:name=".UpdateDialog"
        android:launchMode="singleInstance"
        android:theme="@android:style/Theme.Dialog" /> 
```

# mysql - 希望使用 `users` 表中的 empID 到 `leave` 表

> ID：16139370
> 
> 赞同：0
> 
> 时间：2013-04-22T04:17:26.433
> 
> 标签：mysql

我是 phpmysql 的新手。我需要一些帮助...

我有两个表`users`和`leave`。在`users`表中我有以下列

1.  empID(int)
2.  用户名（varchar）
3.  密码（varchar）
4.  mac(varchar)
5.  ip(varchar)

在`leave`表中我有以下列

1.  盖子（整数）
2.  员工名（varchar）
3.  用户名（varchar）
4.  点头（int）
5.  日期（日期）
6.  日期（日期）
7.  原因（varchar）
8.  动作（varchar）

现在我想`empID`在`leave`表中使用。我该如何使用它。我不得不说我已经应用了一个代码但它不起作用。它给出了以下错误..

# 1072 - 表中不存在键列“empID”

和代码

```
create table `leave`(
lid INT NOT NULL AUTO_INCREMENT,
empname VARCHAR(255) NOT NULL,
username VARCHAR(255) NOT NULL,
nod INT NOT NULL,
sdate DATE,
edate DATE,
reason VARCHAR(255) NOT NULL,
PRIMARY KEY(lid),
FOREIGN KEY(empID) REFERENCES users(empID)
); 
```

所以怎么了...请帮帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:21:17.097

```
create table `leave`(
lid INT NOT NULL AUTO_INCREMENT,
empname VARCHAR(255) NOT NULL,
username VARCHAR(255) NOT NULL,
nod INT NOT NULL,
sdate DATE,
edate DATE,
reason VARCHAR(255) NOT NULL,
PRIMARY KEY(lid),
FOREIGN KEY(empID) REFERENCES users(empID)
); 
```

应该

```
create table `leave`(
lid INT NOT NULL AUTO_INCREMENT,
empID int, // here you need one like this
empname VARCHAR(255) NOT NULL,
username VARCHAR(255) NOT NULL,
nod INT NOT NULL,
sdate DATE,
edate DATE,
reason VARCHAR(255) NOT NULL,
PRIMARY KEY(lid),
FOREIGN KEY(empID) REFERENCES users(empID)
); 
```

您缺少一`empID`列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:14:16.127

您创建*离开*表的 SQL 包括创建外键关系的正确位：

```
FOREIGN KEY(empID) REFERENCES users(empID) 
```

但这只会根据 empID 列创建表之间的关系。它不会为您创建 empID 列！*您还需要上面的一行来定义请假*表中的 empID 列，如下所示：

```
create table `leave`(
lid INT NOT NULL AUTO_INCREMENT,
empID INT NOT NULL,
empname ...
... more lines ,
FOREIGN KEY(empID) REFERENCES users(empID) 
```

# asp.net-mvc - jQuery UI 自动完成下拉列表样式不正确

> ID：16139372
> 
> 赞同：2
> 
> 时间：2013-04-22T04:17:52.473
> 
> 标签：asp.net-mvc, jquery-ui, autocomplete

我在表单上有一个自动完成输入，但下拉列表的样式不正确，它看起来像一个普通的超链接项目符号列表。

这是自动完成创建的渲染隐藏列表：

```
<ul class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-1" tabindex="0" style="display: none; top: 253px; left: 20px; width: 162px;">
<li class="ui-menu-item" role="presentation">
<a id="ui-id-10" class="ui-corner-all" tabindex="-1">Austria</a>
</li>
<li class="ui-menu-item" role="presentation">
<a id="ui-id-11" class="ui-corner-all" tabindex="-1">Australia</a>
</li>
<li class="ui-menu-item" role="presentation">
<a id="ui-id-12" class="ui-corner-all" tabindex="-1">Aust-Timor</a>
</li>
<li class="ui-menu-item" role="presentation">
<a id="ui-id-13" class="ui-corner-all" tabindex="-1">Austur-Kongo</a>
</li>
</ul> 
```

所以看起来它有所有正确的样式类，但如果我查看 Chrome 中的 CSS，一些类没有被应用 - 即**ui-menu**

```
element.style {
display: none;
top: 253px;
left: 20px;
width: 162px;
}
Matched CSS Rules
.ui-corner-all, .ui-corner-bottom, .ui-corner-right, .ui-corner-br {
border-bottom-right-radius: 4px/*{cornerRadius}*/;
}
.ui-corner-all, .ui-corner-bottom, .ui-corner-left, .ui-corner-bl {
border-bottom-left-radius: 4px/*{cornerRadius}*/;
}
.ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr {
border-top-right-radius: 4px/*{cornerRadius}*/;
}
.ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl {
border-top-left-radius: 4px/*{cornerRadius}*/;
}
.ui-widget-content {
border: 1px solid #aaaaaa/*{borderColorContent}*/;
background: #ffffff/*{bgColorContent}*/ url(images/ui-bg_flat_75_ffffff_40x100.png)/*{bgImgUrlContent}*/ 50%/*{bgContentXPos}*/ 50%/*{bgContentYPos}*/ repeat-x/*{bgContentRepeat}*/;
color: #222222/*{fcContent}*/;
}
.ui-widget {
font-family: Verdana,Arial,sans-serif/*{ffDefault}*/;
font-size: 1.1em/*{fsDefault}*/;
}
.ui-autocomplete {
position: absolute;
top: 0;
left: 0;
cursor: default;
}
.ui-front {
z-index: 100;
}
user agent stylesheetul, menu, dir {
display: block;
list-style-type: disc;
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
-webkit-padding-start: 40px;
}
Inherited from body
body {
color: #333;
font-size: .85em;
font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
} 
```

我怎样才能找出为什么某些样式类没有被应用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:02:42.170

您是否包含了 JQuery UI javascript，然后设置了 AutoComplete 功能？

在我的网站上，需要将以下 jQuery javascript 添加到放置自动完成字段的页面底部：

```
$(document).ready(function () {
    $(":input[data-autocomplete]").each(function() { 
        $(this).autocomplete({ source: $(this).attr("data-autocomplete") });
    });
}); 
```

还要确保在加载 JQuery 和 JQuery UI JS 文件后执行此代码。

缺口

# java - 无法到达的声明？

> ID：16139376
> 
> 赞同：0
> 
> 时间：2013-04-22T04:18:14.560
> 
> 标签：java, methods, return

这是我的编码：由于某种原因，最后，当我试图返回 winscounter 和 losscounter 时，它说的是无法访问的语句，但不是针对 tiescounter 的。我不知道为什么！如果有人能回答这个问题，将不胜感激！！

```
public class RockPaperScissors {

    /**
     * @param args the command line arguments
     */

    static int value;  //computer's choice
    static int choice; //user choice
    static int tiescounter = 0;
    static int winscounter = 0;
    static int losscounter = 0;

    public static void main(String[] args) throws IOException {

        BufferedReader br = new BufferedReader (new InputStreamReader (System.in));// user input

        int repeat;

        do {
            System.out.println("ROCK PAPER SCISSORS"+
                    "\n===================");
            System.out.println("\n1=Rock" +
                    "\n2=Paper" +
                    "\n3=Scissors" +
                    "\n===========" +
                    "\nChoose:");

            choice = Integer.parseInt(br.readLine());

            if (choice !=1 && choice !=2 && choice !=3) {

                do{
                    System.out.println("\nError. Please choose Rock, Paper or Scissors.");
                    choice = Integer.parseInt(br.readLine());
                }
                while (choice !=1 && choice !=2 && choice !=3);
            }

            System.out.println();

            if (choice == 1){
                System.out.println("You have chosen Rock.");
            }
            else if (choice ==2){
                System.out.println("You have chosen Paper.");
            }
            else if(choice == 3){
                System.out.println("You have chosen Scissors.");
            }

            randomWholeNumber();

            if (value == 1){
                System.out.println("The computer has chosen Rock." );
            }
            else if (value == 2){
                System.out.println("The computer has chosen Paper." );
            }
            else if (value == 3){
                System.out.println("The computer has chosen Scissors." );
            }

            determineOutcome();
            System.out.println("Ties:"+ tiescounter);
            System.out.println("Wins: " + winscounter);
            System.out.println("Losses: " + losscounter);

            repeat = Integer.parseInt(br.readLine());

        }
        while (repeat==1);
    }

    public static int randomWholeNumber(){

        do{
            value=0;//resets random number
            //generates and returns a random number within user's range 
            value = (int) ((Math.random()*3)+1);
        } 
        while((value>3)||(value<1));
        return (value);
    }

    public static int determineOutcome(){

            if (value == choice){
                System.out.println("\nYOU'VE TIED");

                do{
                    tiescounter+=1;
                }
                while (tiescounter != tiescounter);
            }

            else if (value == 1){ //Rock
                if (choice == 2){ //Paper
                    System.out.println("\nYOU'VE WON");               
                    do{
                        winscounter +=1;
                    }
                    while (winscounter != winscounter);
                }
                else if (choice == 3){ //Scissors
                    System.out.println("\nYOU'VE LOST");
                    do{
                        losscounter+=1;
                    }
                    while(losscounter!=losscounter);
                }
            }

            else if (value == 2){ //Paper
                if (choice == 1){ //Rock
                    System.out.println("\nYOU'VE LOST");
                    do{
                        losscounter+=1;
                    }
                    while(losscounter!=losscounter);
                }
                else if (choice == 3){ //Scissors
                    System.out.println("\nYOU'VE WON");

                    do{
                        winscounter +=1;
                    }
                    while (winscounter != winscounter);
                }
            }

            else if (value == 3){ //Scissors
                if (choice == 1){ //Rock
                    System.out.println("\nYOU'VE WON");
                    do{
                        winscounter +=1;
                    }
                    while (winscounter != winscounter);                    
                }
                else if (choice == 2){ //Paper
                    System.out.println("\nYOU'VE LOST");
                    do{
                        losscounter+=1;
                    }
                    while(losscounter!=losscounter);
                }
            }

            return(tiescounter);
            return(winscounter);
            return(losscounter);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:22:44.850

一个函数只能返回一个值。一旦`return(tiescounter);`执行，函数就会退出。如果要返回所有三个值，则必须将它们包装在一个类中。

顺便说一下`return(tiescounter);`，可以写成`return tiescounter;` 不需要返回值周围的括号。两个语句将具有相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:24:48.077

您不能同时从一种方法返回 3 个不同的变量。在这种情况下，`return(tiescounter);`总是执行，然后在那里终止该方法。因此，接下来的 2 行变得无法访问。

将方法声明 `determineOutcome()`为 void ie `public static void determineOutcome()`，并删除其中的所有 return 语句。您的程序将起作用。

# authentication - 绕过谷歌两因素身份验证

> ID：16139380
> 
> 赞同：0
> 
> 时间：2013-04-22T04:18:30.113
> 
> 标签：authentication

我在我的网站中使用 Google 双重身份验证，但我希望用户能够检查“记住我”，而无需在下一个条目时输入密钥。是否可以通过“记住我”选项绕过身份验证。我知道潜在的危险，但我们需要这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T08:22:57.657

不知道这是否仍然有帮助，但我想我还是会回答。您尚未指定您使用的编程语言，这使得给您一个特定于语言的答案有点困难，因此我将根据我编写[C# ASP.NET MVC 两因素身份验证](http://satalketo.com/2013/09/mvc-two-factor-authentication/)实现的经验来回答，但该方法应该与语言无关。

没有什么可以阻止您实施“记住我”功能，该功能允许用户绕过整个身份验证步骤（用户名/密码 + TFA）。假设双因素身份验证已正确实​​施，它实际上与您将实施的任何其他“记住我”功能没有任何不同。

通过正确实施两因素身份验证，我的意思是您的登录应该是一个两步过程（您可以一次性完成，但它会降低可用性，为了解释起见，我将它们分开）

1.  用户指定他们的用户名和密码。如果他们提供了有效的用户名/密码组合，那么他们将被传递到第二步，但他们**尚未**经过身份验证！他们应该无法导航到需要用户登录的任何页面。
2.  用户指定他们的第二个因素。只有当用户提供正确的第二个因素时，他们才应该被认证并允许继续。

在我的代码中，我在第一步中有“记住我”复选框，然后如果用户提供了有效的用户名/密码组合，我将存储 UserProfile 对象以及是否在会话中选中了“记住我”并将用户重定向到第二个因素页面。

然后，如果用户为存储在会话中的用户提供了正确的第二个因素，那么您登录用户，如果他们选中“记住我”，则将到期日期添加到 cookie，否则将其保留为空的到期日期然后将在浏览器关闭时过期。

希望这能回答您的问题，我已尝试不从我的网站上复制整篇文章，所以如果您认为我遗漏了什么，请随时查看，如果您仍然没有答案，请告诉我，我会更新我的答案。

# android - Android 默认浏览器未在特定 URL 上加载

> ID：16139381
> 
> 赞同：0
> 
> 时间：2013-04-22T04:18:31.043
> 
> 标签：android, url, browser, uri

我正在使用monkeyrunner进行自动化。我正在执行的脚本需要在 Android 默认浏览器中加载 URL，但是当我尝试使用下面显示的 URL 时，浏览器没有加载，并且根本没有打开浏览器。

[http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://ark.com.ge/&ei=IDeoUIPUI-ik0AWa1oCIDg&usg=AFQjCNE1H_KILEGlt8o_ewzUszZUJfMV9A&sig2=Ygg8KJJJJfIiOWFfiziSKF](http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://ark.com.ge/&ei=IDeoUIPUI-ik0AWa1oCIDg&usg=AFQjCNE1H_KILEGlt8o_ewzUszZUJfMV9A&sig2=Ygg8NBvIiOWFfiziSKFJKA)

问题是，这个 URL 是什么，为什么浏览器不工作？长度？字符的组合？

顺便说一句，这个 URL 在桌面上工作。

下面显示的是运行此 URL 的代码部分

```
device.wake()
MonkeyRunner.sleep(2)
device.shell('am force-stop com.google.android.browser')
MonkeyRunner.sleep(2)
device.startActivity( component='com.google.android.browser/com.android.browser.BrowserActivity', uri=url)
MonkeyRunner.sleep(40) 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T06:05:13.997

使用此代码，它为我工作

```
Intent intent= new Intent(Intent.ACTION_VIEW,Uri.parse("http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://ark.com.ge/&ei=IDeoUIPUI-ik0AWa1oCIDg&usg=AFQjCNE1H_KILEGlt8o_ewzUszZUJfMV9A&sig2=Ygg8NBvIiOWFfiziSKFJKA"));
            startActivity(intent); 
```

# php - 如果文件没有更改，我如何让 Assetic 停止运行过滤器？

> ID：16139387
> 
> 赞同：1
> 
> 时间：2013-04-22T04:18:50.703
> 
> 标签：php, zend-framework2, assetic

我正在使用 Zend Framework 2，并在我的 Abstract 控制器中使用以下函数对模块中的所有资产进行分组，然后将它们写入/缩小到缓存文件，然后提供要写入页面的文件路径视图助手。

```
protected function prepareAssets() {

    // Prepare FilterManager with all filters that will be used
    $FilterManager = new FilterManager();
    $FilterManager->set('scss', new ScssphpFilter());
    $FilterManager->set('cssmin', new MinifyCssFilter());
    $FilterManager->set('jsmin', new JSMinFilter());

    $AssetManager = new AssetManager();
    // Prepare the AssetManager with all core assets
    $AssetManager->set('coreCss', new AssetCollection(array(
        new FileAsset('public/vendor/bootstrap/css/bootstrap.min.css'),
        new FileAsset('public/vendor/bootstrap/css/bootstrap-responsive.min.css'),
        new FileAsset('module/application/assets/css/fonts.css'),
        new FileAsset('module/application/assets/css/main.scss'),
    )));
    $AssetManager->set('coreJs', new AssetCollection(array(
        new FileAsset('public/vendor/modernizr/modernizr-2.6.2.js'),
        new FileAsset('public/vendor/respond/respond.min.js'),
        new FileAsset('public/vendor/jquery/jquery-1.9.1.min.js'),
        new FileAsset('public/vendor/bootstrap/js/bootstrap.min.js'),           
    )));

    // Add the controller specific assets
    $controllerCss = new AssetCollection();
    foreach ($this->assets['css'] as $file) {
        $controllerCss->add(new FileAsset($file));
    }
    $AssetManager->set('controllerCss', $controllerCss);
    $controllerJs = new AssetCollection();
    foreach ($this->assets['js'] as $file) {
        $controllerJs->add(new FileAsset($file));
    }
    $AssetManager->set('controllerJs', $controllerJs);

    // Setup factory to create the assets with cachebusting
    $factory = new AssetFactory('public/cache');
    $factory->setAssetManager($AssetManager);
    $factory->setFilterManager($FilterManager);
    //$factory->setDebug(true);
    $factory->addWorker(new CacheBustingWorker(CacheBustingWorker::STRATEGY_CONTENT));

    // Create the assets
    $coreCss = $factory->createAsset(array(
        '@coreCss',         
    ), array(
        'scss',
        '?cssmin',                  
    ));

    $controllerCss = $factory->createAsset(array(
        '@controllerCss',           
    ), array(
        'scss',
        '?cssmin',
    ));

    $coreJs = $factory->createAsset(array(
        '@coreJs',
    ), array(
        '?jsmin',
    ));

    $controllerJs = $factory->createAsset(array(
        '@controllerJs',            
    ), array(
        '?jsmin'
    ));

    // Write the assets to cache
    $writer = new AssetWriter('public/cache');
    $writer->writeAsset($coreCss);
    $writer->writeAsset($controllerCss);
    $writer->writeAsset($coreJs);
    $writer->writeAsset($controllerJs);

    // rename files with proper extensions to be served correctly
    $coreCssPath = $coreCss->getTargetPath(); rename(getcwd().'/public/cache/'.$coreCssPath, getcwd().'/public/cache/'.$coreCssPath.'.css');
    $controllerCssPath = $controllerCss->getTargetPath(); rename(getcwd().'/public/cache/'.$controllerCssPath, getcwd().'/public/cache/'.$controllerCssPath.'.css');
    $coreJsPath = $coreJs->getTargetPath(); rename(getcwd().'/public/cache/'.$coreJsPath, getcwd().'/public/cache/'.$coreJsPath.'.js');
    $controllerJsPath = $controllerJs->getTargetPath(); rename(getcwd().'/public/cache/'.$controllerJsPath, getcwd().'/public/cache/'.$controllerJsPath.'.js');

    // add paths to view model
    $view = $e->getParam('application')->getMvcEvent()->getViewModel();
    $view->coreCssPath = $coreCssPath.'.css';
    $view->controllerCssPath = $controllerCssPath.'.css';
    $view->coreJsPath = $coreJsPath.'.js';
    $view->controllerJsPath = $controllerJsPath.'.js';

} 
```

但是，在运行时，无论原始文件是否已更改，每次页面加载都需要几秒钟，这告诉我它每次都通过过滤器处理文件，尽管缓存文件本身没有被更新。

我是在使用 CacheBustingWorker 错误，还是我错过了其他东西？

# wpf - 将字符串的 ObservableCollection 绑定到模板化的 ListBox

> ID：16139389
> 
> 赞同：1
> 
> 时间：2013-04-22T04:19:12.110
> 
> 标签：wpf, templates, data-binding, listbox, observablecollection

我有这个收藏

```
ObservableCollection<string> Urls { get; set; } 
```

在我的数据上下文类中。我的列表框中有一个绑定：

```
<ListBox ItemsSource="{Binding Urls}">

    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBox Text="{Binding .}" />
        </DataTemplate>
    </ListBox.ItemTemplate>

</ListBox> 
```

数据显示在列表框中，两个相应的未显示的按钮以及添加和删除命令也可以工作，但是更改`TextBox`不会影响集合的内容。

我试过`Mode=TwoWay`绑定，但我认为它已经打开了。我尝试了其他一些选项，例如 Validate=OnPropertyChange，但是，仍然没有任何更新。

如何使`TextBox`模板化项目内部`ListBox`实际更新`Urls`数据上下文类的属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T04:38:11.217

你不能修改字符串；使用具有一个字符串属性的包装类，然后将其绑定`TextBox`到所述属性。这样，属性中的字符串可以替换为编辑过的字符串。

# javascript - 使组件在编辑盘中可拖动

> ID：16139390
> 
> 赞同：-2
> 
> 时间：2013-04-22T04:19:12.800
> 
> 标签：javascript, jquery, jsf

我创建了基于拖放的动态组件，例如按钮等。但是在放置区域中，我创建的哪些组件应该可以拖动以进行对齐，例如 dotnet 表单组件对齐。给点思路...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:20:48.040

看看[jQuery UI Draggable](http://jqueryui.com/draggable/)。

# android - 如何为特定设备构建 android 应用程序？

> ID：16139391
> 
> 赞同：-2
> 
> 时间：2013-04-22T04:19:17.673
> 
> 标签：android, build, device

我开发了一个 android 应用程序，我想把它交给测试人员进行测试，所以我想为每个测试人员制作几个特定的​​版本，可以在特定的测试设备上运行，而不是在任何设备上运行。

原因是当我将我的应用程序的构建提供给测试人员时，该应用程序只能在他的设备上运行，而不是其他设备，因此不能在任何其他设备上发布和运行！

***你怎么能保证测试人员不发布你的应用程序？！***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:35:15.477

为此，您可以从该测试仪获取设备的 IMEI 号码，并在您的应用程序中检查 IMEI 号码。

它当然有局限性。它只需要 gsm 手机（您可以使用 mac addess 代替）。

获取设备的 IMEI

```
TelephonyManager manager = (TelephonyManager) context
                    .getSystemService(Context.TELEPHONY_SERVICE);
            String IMEI = manager.getDeviceId() 
```

您将需要`READ_PHONE_STATE`许可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:36:30.173

你可以做以下

*   使用设备 Android ID
*   使用 Mac 地址

所有这些预计对于每台设备都是独一无二的。

因此，每次您运行应用程序时，您都会检查这些数字并进行匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:23:55.410

您说的是特定型号的设备，而不是特定的手机，例如我口袋里的三星 Galaxy 3 或桌上的 Nexus 7，与所有其他三星 Galaxy 3 和 Nexus 7 设备不同，是的?

尝试使用：

```
android.os.Build.MODEL; 
```

在你的活动中。此字段将为您提供手机的型号，如果手机型号错误，您可以分支以运行或不运行您的代码。

# java - 使用 schemaspy 时出现 Java 错误

> ID：16139393
> 
> 赞同：0
> 
> 时间：2013-04-22T04:19:33.320
> 
> 标签：java, schemaspy

我在 MSSQL 上有一个大数据库，但没有架构……在阅读[了通过对数据库进行逆向工程生成 ER 图](https://stackoverflow.com/questions/185967/generate-an-e-r-diagram-by-reverse-engineering-a-database)后，我决定尝试 schemaspy，但由于 Java，它不想启动： ![在此处输入图像描述](https://i.stack.imgur.com/l2uZb.png)

AFAIK 它是 java 版本的问题：我尝试过最新的 7u21，然后是旧的 6u43 和 6u31 ......同样的事情。我错过了什么？

![在此处输入图像描述](https://i.stack.imgur.com/w2YjA.png)

# java - 嵌套异常是 java.lang.ClassNotFoundException: org.springframework.web.servlet.view.json.JsonView

> ID：16139398
> 
> 赞同：1
> 
> 时间：2013-04-22T04:20:19.177
> 
> 标签：java, json, spring, spring-mvc

我有一个 spring web 应用程序，我需要在其中运行 json 服务。

下面是我的程序的调度程序-servlet。

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!--  SPECIFIC CONFIGURATIONS -->
    <import resource="springConfigurations/common-config.xml"/>
    <import resource="springConfigurations/mvc-config.xml"/>

    <!--  COMMON CONFIGURATIONS -->
    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

    <bean name="viewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
        <property name="location">
            <value>/WEB-INF/views.xml</value>
        </property>
        <property name="order">
            <value>1</value>
        </property>
    </bean>

</beans> 
```

这是views.xml 代码。

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

    <bean name="jsonView" class="org.springframework.web.servlet.view.json.JsonView"/>

</beans> 
```

我在问题标题中说明的控制台中收到以下错误。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'viewResolver' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.web.servlet.view.json.JsonView] for bean with name 'jsonView' defined in ServletContext resource [/WEB-INF/views.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.web.servlet.view.json.JsonView
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:652)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:600)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:666)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:519)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:460)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:421)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:245)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:694)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:193)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:913)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:584)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:341)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:164)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:161)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:92)
    at org.eclipse.jetty.server.Server.doStart(Server.java:232)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at com.jkcs.touchpos.server.jetty.JettyServer.start(JettyServer.java:19)
    at com.jkcs.touchpos.server.jetty.ServerRunner.<init>(ServerRunner.java:12)
    at com.jkcs.touchpos.server.jetty.JettyStart.startServer(JettyStart.java:22)
    at com.jkcs.touchpos.application.start.TouchPosApplication.main(TouchPosApplication.java:13)
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.web.servlet.view.json.JsonView] for bean with name 'jsonView' defined in ServletContext resource [/WEB-INF/views.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.web.servlet.view.json.JsonView
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1266)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1335)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:901)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.view.XmlViewResolver.initFactory(XmlViewResolver.java:143)
    at org.springframework.web.servlet.view.XmlViewResolver.afterPropertiesSet(XmlViewResolver.java:91)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 35 more
Caused by: java.lang.ClassNotFoundException: org.springframework.web.servlet.view.json.JsonView
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:316)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:269)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:260)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:416)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1258)
    ... 45 more
2013-04-22 09:44:09.028:INFO::Started SelectChannelConnector@0.0.0.0:9157 
```

我添加了所有必要的 JAR 文件，但仍然出现错误。请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:56:42.137

你没有所有必要的罐子。转到[这个 maven 页面](http://mvnrepository.com/artifact/net.sf.spring-json/spring-json/1.3.1)，下载 JAR 或使用`pom`依赖项。编译和运行应用程序时将 jar 添加到类路径中

# css - 一个元素的媒体查询被忽略，但另一个元素显示

> ID：16139404
> 
> 赞同：0
> 
> 时间：2013-04-22T04:21:41.190
> 
> 标签：css, media-queries

我正在使用媒体查询来定位 2 个屏幕尺寸：1366 像素和更小，以及 1367 像素 - 1920 像素。

现在下面是我的代码。

**问题**是浏览器可以很好地读取 #header 元素，但由于某种原因，#footer 元素仅显示**1366px 查询**的 css 规则，即使屏幕尺寸为 1920 px ......这是在 Chrome 和法郎。

为什么是这样？

```
@media screen and (max-width: 1920px) and (min-width: 1367px){
    #header{
        position: absolute;
        background: url('../images/back_1920_top.jpg') no-repeat left top;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
        height: 362px;
        width:100%;
        top:0;
        left:0;
        margin: 0 auto;
    }

    #footer{
        position:absolute;
        bottom:0;
        width:100%;
        height: 552px;
        background: url('../images/back_1920.jpg') no-repeat right bottom;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }
}

@media screen and (max-width: 1366px){
    #header{
        position: absolute;
        background: url('../images/back_1280_top.jpg') no-repeat left top;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
        height: 245px;
        width:100%;
        top:0;
        left:0;
        margin: 0 auto;
    }

    #footer{
        position:absolute;
        bottom:0;
        width:100%;
        height: 300px;
        background: url('../images/back_1280.jpg') no-repeat right bottom;
        -webkit-background-size: cover;
          -moz-background-size: cover;
          -o-background-size: cover;
          background-size: cover;
    }
} 
```

[这里](http://www.federalestene.co.za/)是我网站的链接

注意：您将在页眉和页脚背景图像中看到问题 - 1920 屏幕上的页眉背景图像显示**back_1920_top.jpg**图像，但页脚仍显示**back_1280.jpg**图像...假设显示back_1920.jpg**图片**...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:58:34.660

似乎您的 IE 唯一样式表正在覆盖您的其他样式，特别是因为它位于其他样式的底部/下方。

你的 CSS 是否包含正确的方法：使用链接标签：

```
<link href="style.css" rel="stylesheet" type="text/css" />

<!--[if lt IE 9]>
<link rel="stylesheet" href="ie8.css" type="text/css" media="screen" />
<![endif]--> 
```

我相信这会渲染得更好

# android - 构建 HoloEverywhere 时出现 Maven 依赖项错误

> ID：16139409
> 
> 赞同：0
> 
> 时间：2013-04-22T04:22:07.090
> 
> 标签：android, android-layout, maven, android-library

我正在尝试在 Android 应用程序中使用[HoloEverywhere](https://github.com/Prototik/HoloEverywhere)，但无法使其正常工作。每当我尝试导入库时，都会出现一些错误。谷歌搜索后，我已经能够删除这个错误：

> 容器“Maven 依赖项”引用了不存在的库“C:\Users\myself\.m2\repository\com\google\android\support-v4\r12\support-v4-r12.jar”

我在文件夹*“HoloEverywhere-master\support-library”*中有这个库，因为它包含在 HoloEverywhere 中。我对 Maven 一点也不熟悉，所以我不太确定它到底想做什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:28:44.750

检查 pom.xml 中的此依赖项，您可以将其作为依赖项与系统范围链接：

```
<dependency>
  <groupId>com.google.android</groupId>
  <artifactId>support-v4</artifactId>
  <version>r12</version>
  <scope>system</scope>
  <systemPath>${project.basedir}/external/something.jar</systemPath>
</dependency> 
```

然后只需正确的系统路径。这只是快速修复。更好的解决方案是使用以下命令将该 jar 库安装到本地存储库中：

```
mvn install:install-file -Dfile=<path-to-file> -DgroupId=<group-id> \
-DartifactId=<artifact-id> -Dversion=<version> -Dpackaging=<packaging> 
```

或者

查找包含给定库的 maven 存储库，例如： [http](http://mvnrepository.com/artifact/com.google.android/support-v4/r6) : //mvnrepository.com/artifact/com.google.android/support-v4/r6（注意这是 r6 版本，您可能需要 r12）

```
<repositories>
<repository>
  <id>my-alternate-repository</id>
  <url>http://myrepo.net/repo</url>
</repository> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:37:12.957

这真的是一个Maven问题吗？

您是否尝试过右键单击您的项目。

选择`Android Tools > Add Support Libraries...`

# php - 从 CSV 文件插入两个 1 到多个相关 MySQL 表的最佳方法

> ID：16139413
> 
> 赞同：0
> 
> 时间：2013-04-22T04:22:41.647
> 
> 标签：php, mysql, sql-insert

我正在使用 PHP 和 MySQL

我有 2 个具有以下布局的表格：（还有其他与此问题无关的字段）

`QUESTIONS Q_ID, int, auto incrementing, primary key Question, varchar(255)`

`ANSWERS A_ID, int, auto incrementing, primary key Q_ID, int Key, varchar(255) D1, varchar(255) D2, varchar(255) D3, varchar(255) D4, varchar(255)`

我有一个具有以下布局的 CSV 文件：

`NULL, Question, Key, D1, D2, D3, D4 -- The NULL is for the Q_ID autoincrement field.`

我想将 CSV 文件中的数据插入到 2 个相关表中，`Questions`并且`Answers`以一对多关系连接。请注意：NULL & Question 进入 Questions 表（1 行） Key、D1、D2、D3 和 D4 进入 Answers 表，但作为单独的记录，每个都有一个 Q_ID 链接回其匹配的问题。

我有一个文件，它读取 CSV 并创建一个`$array`正常工作的文件。

如果我循环创建带有复合子句`$array`的单个语句，那么我将所有问题插入到一个查询中，即`INSERT``VALUES`

```
INSERT INTO Questions 
    (Q_ID, Client_ID, Question, Key, D1, D2, D3, D4)
VALUES 
    ('$arr[0][1]', '$client_ID', '$arr[0][2]', '$arr[0][3]', '$arr[0][4]', '$arr[0][5]', '$arr[0][6]'' )
    ('$arr[1][1]', '$client_ID', '$arr[1][2]', '$arr[1][3]', '$arr[1][4]', '$arr[1][5]', '$arr[1][6]'' )
    ('$arr[2][1]', '$client_ID', '$arr[2][2]', '$arr[2][3]', '$arr[2][4]', '$arr[2][5]', '$arr[2][6]'' )
    ('$arr[n][1]', '$client_ID', '$arr[n][2]', '$arr[n][3]', '$arr[n][4]', '$arr[n][5]', '$arr[n][6]'' ); 
```

在多用户环境中，我可以指望`Q_ID`这些记录的自动增量字段是连续的，即使它们有很多？将其作为交易进行处理吗？如果我可以确定连续`Q_ID`的 s，我可以通过少得多的查询来提高效率。还是担心这种类型的性能会适得其反？

然后，我将能够通过在插入执行后从聚集`Q_ID`中减去插入的行数来计算第一个数字。在将s 创建到 Answers 表`last_insert_id`中时，我将使用它，为每个新行递增它。`INSERT`

我无法在我的单用户开发环境中对此进行测试。当然，那里的`Q_ID`s 总是连续的。

如果我不能指望 Q_ID 是连续的，看来我必须在“问题”中插入一个，获取`last_insert_id`，然后在 CSV 中的每一行的答案中执行一个多`VALUES`子句。`INSERT`

虽然我没有在这里展示它，但我将使用 mysql_real_escape_string 来清理这个用户在这两种方法中提交的数据。

或者，还有更好的方法？

arheops 在下面建议我创建一个临时表以避免使用许多查询。我理解这种推理，但不理解他对如何将`INSERT`Answers 中的多个记录为每个记录`INSERTed`转换为 Questions 的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:32:47.200

最好的方法是创建与 csv 文件相同的临时表，然后创建插入/选择语句来填充您的表。

请注意，serial(autoincrement) 值并不总是一对一的。在并发环境中可以是+2 或+3 的差异。

通常我喜欢这样：

1）在一张表中导入所有内容

2) 插入 table1(field1,field2,...fieldn) 从 temp_table 中选择 field1,field2,... fieldn;

3) 之后连接 table1 和 temp_table 以获取 ID 并为插入 table2 创建选择。

注意，为了加速连接需要在连接列上创建索引（问题文本？）

# ios - 自定义单元格类中未调用 prepareForReuse

> ID：16139419
> 
> 赞同：0
> 
> 时间：2013-04-22T04:23:27.467
> 
> 标签：ios, objective-c, uitableview

在我的自定义单元格（扩展`UITableViewCell`）中，我有该`prepareForReuse`方法并且在之后没有调用它

```
[self.tableView dequeueReusableCellWithIdentifier:CellIdentifierBody forIndexPath:indexPath]; 
```

然而

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated 
```

正在被调用。有什么建议我可能做错了吗？正在返回正确的类实例`dequeueReusableCellWithIdentifier`。

**`prepareForReuse`在初始单元创建/初始化时不调用EDIT **？**如果是这样，在初始创建/初始化时应该使用什么？我的自定义单元格内部有一个`UITextView`需要初始化/调整大小的单元格。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:34:06.023

当然，一旦我编辑了我记得的原始问题 `- (id)initWithCoder:(NSCoder *)decoder`。我认为这是在那里进行所有初始化的方法。**

# css - IE、FireFox 和 Safari 之间的图像不一致

> ID：16139422
> 
> 赞同：3
> 
> 时间：2013-04-22T04:23:53.197
> 
> 标签：css, cross-browser

我在输入字段后面有一个搜索按钮，指定如下：

```
<div class="sidebarsection">
    <input id="queryfield" placeholder="Search previews..."> 
    <button class="search-button" onclick="runSearch()"><img  src="images/search.png" /></button>
</div> 
```

相关的 CSS 是

```
#queryfield {
    width: 130px;
    box-sizing:border-box;
    -moz-box-sizing:border-box; /* Firefox */
}

.search-button {
    width: 26px;
    padding: 0px;
    vertical-align: top;
}

.search-button img {
    height: 16px;
    width: 16px;
} 
```

在 Firefox 中，这看起来是正确的，如下所示：

![火狐](https://i.stack.imgur.com/BsqlM.png)

在 IE 中，这看起来是错误的：图像在顶部附近偏移：

![IE](https://i.stack.imgur.com/ATKSn.png)

在 iPad 上的 Safari 中，这也是错误的：

![苹果浏览器](https://i.stack.imgur.com/uoU7b.png)

在 Chrome 中，这也是不对的：

![在此处输入图像描述](https://i.stack.imgur.com/7m0dy.png)

有没有办法让所有浏览器都像上面例子中的 FireFox 那样显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:31:33.820

习惯这种方式删除`img tag`并应用`background image`在你`button` **的像这样**

```
<button class="search-button" onclick="runSearch()"></button> 
```

**CSS**

```
.search-button{
background:url('../images/search.png') no-repeat center cetner;
width: 26px;
height:26px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T04:31:43.513

好吧，这个`vertical-align`规则有很多错误，如果你想完全控制多个浏览器的外观，应该避免使用：[http ://reference.sitepoint.com/css/vertical-align](http://reference.sitepoint.com/css/vertical-align)

为什么不使用定位来获得你想要的东西，或者将你的内部图像调整为你想要的按钮的确切高度和宽度。

# c++ - 如何在 C++ 中逻辑地组织源文件

> ID：16139424
> 
> 赞同：12
> 
> 时间：2013-04-22T04:23:59.333
> 
> 标签：c++, c++builder, organization

我的源文件窗格正在快速增长（就我项目中的文件数量而言），并且在任何给定时间快速找到我需要访问的特定源文件变得有点麻烦。我正在使用 Embarcadero 的 C++Builder，但我在其他 C++ IDE 中也遇​​到过这个问题。

在 Java 中，我经常使用包来创建源代码的逻辑划分，尤其是在处理单个项目中的大量源文件时。当然，这不是 Java 包的唯一用途，但它们在这方面非常方便。

有人对我如何在 C++ 中实现类似功能有任何想法吗？我应该将源文件分成物理文件夹吗？C++Builder 是否提供了某种我没有看到的虚拟文件夹/分组功能？任何想法表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T16:04:18.380

我通常建议**不要**（仅）使用 IDE 或语言语法来组织源代码。一方面，您将自己与环境联系在一起：在 IDE 中组织良好，文件无组织，然后有一天您可能想要使用*不同*的环境......

正因为如此，我通常同时使用这三种方式来组织我的源代码：我将我的源代码分成功能模块，即相关的类。每个模块都有自己的命名空间、物理文件夹和 IDE 文件夹。（在我的情况下，如果需要，使用[CMake](http://www.cmake.org)并`source_group()`生成 IDE 项目文件——个人更喜欢命令行、Vim 和“make”。）

因此，无论我是从 IDE、命令行还是编译器日志中查看项目，foo/some_class.hpp 是 foo/some_class.cpp 是 foo::some_class，从而最大限度地减少混乱。

实际上，我目前首选的设置将每个模块目录进一步细分为`<project>/<module>/<class>.hpp`或`<project>/<module>/src/<class>.hpp`取决于该类是否在其自己的模块之外使用`<project>/<module>/src/<class>.cpp`，和`<project>/<module>/test/<class>_tu.cpp`. 命名空间`<project>::<module>::<class>`当然是 。

```
project
|-- foo
|   |-- some_class.hpp
|   |-- src
|   |   |-- internal_class.hpp
|   |   |-- internal_class.cpp
|   |   `-- some_class.cpp
|   `-- test
|       |-- internal_class_tu.cpp
|       `-- some_class_tu.cpp
|-- bar
|   |-- ... 
```

这里的想法是每个模块（`foo`）的“外部”接口由该子文件夹中的标题记录，实现细节和测试“隐藏”在相应的子文件夹中。

但最终，这在很大程度上取决于——你的品味、你的合作开发者的品味以及你的项目范围。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-22T16:25:47.150

这是我的风格：

```
PROJECT_NAME
|-- build // This is DVCS ignored but has all the built intermediates and final binaries
|   |-- release // These are the different build profiles
|   |-- debug
|   |-- profile
|   `-- coverage
|-- bin // For binary source code
|   `-- hello_world
|       |-- doc
|       |-- inc
|       |-- src
|       |-- tests
|       `-- build_script  // Builds binary into the build folder
|-- include // Public headers for the library
|   `-- these
|       `-- folders
|           `-- represent
|               `-- namespaces
|                   `-- my_awesome_class.hpp
|-- lib // library source code
|   |-- these
|   |   `-- folders
|   |       `-- represent
|   |           `-- namespaces
|   |               |-- inc // Private headers
|   |               |   `-- my_private_class.hpp // internal class
|   |               |-- src // Source code for this namespace
|   |               |   |-- posix
|   |               |   |   `-- my_awesome_class.cpp // posix specific source code
|   |               |   |-- nt
|   |               |   |   `-- my_awesome_class.cpp // nt specific source code
|   |               |   |-- my_private_class.cpp // non-visibile class
|   |               |   `-- my_awesome_class.cpp // cross platform source code
|   |               |-- tests // Unit tests
|   |               |   `-- my_awesome_class.cpp // builds a test executable for the library
|   |               `-- doc // Documentation for this namespace
|   |                   `-- namespace.dox
|   `-- build_script  // Builds binary into the build folder
|-- doc // Documentation files
|   |-- main_page.dox
|   `-- namespace.dox
`-- build_script  // Builds the source code into the build folder 
```

这表示`these::folders::represent::namespaces::MyAwesomeClass`具有特定源代码（以及通用源代码）的类以及库内部使用的私有`posix`，标头不是公共的，并且类符号的[可见性是隐藏的。](http://gcc.gnu.org/wiki/Visibility)`NT``these::folders::represent::namespaces::MyPrivateClass`

这已经很好地扩展并提供了轻松定位文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:53:33.687

我制作项目是为了让我的所有文件都易于访问。这是最简单的组织方式，以及清晰的类/文件名。

# bash - 在bash中溢出这样的字符串的简单方法？

> ID：16139425
> 
> 赞同：1
> 
> 时间：2013-04-22T04:24:11.933
> 
> 标签：bash, shell

现在我的表格中有字符串，`"temp:10"`我用`temp=$(echo $str|awk '{split($0,array,":")} END{print array[1]}')`它来分割，这是过度杀伤和缓慢的......必须有一个更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:28:16.927

使用 bash 的参数扩展和后缀删除：

```
temp=${str%%:*} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:44:02.870

还有`read`命令：

```
$ str="temp:10"
$ IFS=: read before after <<< "$str"
$ echo "$before"
temp
$ echo "$after"
10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T04:26:53.843

如果我理解正确，则在此示例中，您需要 , 之前的`:`值`temp`。如果是这样，那么您可以使用以下`cut`命令：

```
cut -d':' -f1 
```

# java - 尝试获取新连接时可抛出：null：javax.resource.ResourceException：无法创建连接

> ID：16139427
> 
> 赞同：0
> 
> 时间：2013-04-22T04:24:28.043
> 
> 标签：java, jboss, ibatis

```
IJ000604: Throwable while attempting to get a new connection: null: javax.resource.ResourceException: Could not create connection
    at org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:277)
    at org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:235)
    at org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreArrayListManagedConnectionPool.createConnectionEventListener(SemaphoreArrayListManagedConnectionPool.java:758)
    at org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreArrayListManagedConnectionPool.getConnection(SemaphoreArrayListManagedConnectionPool.java:343)
    at org.jboss.jca.core.connectionmanager.pool.AbstractPool.getSimpleConnection(AbstractPool.java:400)
    at org.jboss.jca.core.connectionmanager.pool.AbstractPool.getConnection(AbstractPool.java:365)
    at org.jboss.jca.core.connectionmanager.AbstractConnectionManager.getManagedConnection(AbstractConnectionManager.java:329)
    at org.jboss.jca.core.connectionmanager.tx.TxConnectionManagerImpl.getManagedConnection(TxConnectionManagerImpl.java:368)
    at org.jboss.jca.core.connectionmanager.AbstractConnectionManager.allocateConnection(AbstractConnectionManager.java:464)
    at org.jboss.jca.adapters.jdbc.WrapperDataSource.getConnection(WrapperDataSource.java:129)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317) [spring-aop-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198) [spring-aop-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at $Proxy15.getConnection(Unknown Source)   at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) [spring-jdbc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy$TransactionAwareInvocationHandler.invoke(TransactionAwareDataSourceProxy.java:224) [spring-jdbc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at $Proxy16.prepareStatement(Unknown Source)    at com.ibatis.sqlmap.engine.execution.SqlExecutor.prepareStatement(SqlExecutor.java:497) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.execution.SqlExecutor.executeQuery(SqlExecutor.java:175) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.sqlExecuteQuery(MappedStatement.java:221) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryWithCallback(MappedStatement.java:189) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryForObject(MappedStatement.java:120) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForObject(SqlMapExecutorDelegate.java:518) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForObject(SqlMapExecutorDelegate.java:493) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForObject(SqlMapSessionImpl.java:106) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForObject(SqlMapSessionImpl.java:110) [ibatis-2.3.4.726.jar:]
    at com.ibatis.sqlmap.engine.impl.SqlMapClientImpl.queryForObject(SqlMapClientImpl.java:86) [ibatis-2.3.4.726.jar:]
    at com.aithent.ecm.dao.common.LoginDAO.getDatabaseVersion(LoginDAO.java:15) [classes:]
    at com.aithent.ecm.service.impl.DefaultLoginService.getDBVersion(DefaultLoginService.java:36) [classes:]
    at com.aithent.ecm.action.LoginAction.executeAction(LoginAction.java:37) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:270) [struts.jar:1.2.9]
    at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:187) [struts.jar:1.2.9]
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431) [struts.jar:1.2.9]
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236) [struts.jar:1.2.9]
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) [struts.jar:1.2.9]
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414) [struts.jar:1.2.9]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFi 
```

我的 jboss Standalone.xml 配置是：

```
<extensions>
    <extension module="org.jboss.as.clustering.infinispan"/>
    <extension module="org.jboss.as.configadmin"/>
    <extension module="org.jboss.as.connector"/>
    <extension module="org.jboss.as.deployment-scanner"/>
    <extension module="org.jboss.as.ee"/>
    <extension module="org.jboss.as.ejb3"/>
    <extension module="org.jboss.as.jaxrs"/>
    <extension module="org.jboss.as.jdr"/>
    <extension module="org.jboss.as.jmx"/>
    <extension module="org.jboss.as.jpa"/>
    <extension module="org.jboss.as.logging"/>
    <extension module="org.jboss.as.mail"/>
    <extension module="org.jboss.as.naming"/>
    <extension module="org.jboss.as.osgi"/>
    <extension module="org.jboss.as.pojo"/>
    <extension module="org.jboss.as.remoting"/>
    <extension module="org.jboss.as.sar"/>
    <extension module="org.jboss.as.security"/>
    <extension module="org.jboss.as.threads"/>
    <extension module="org.jboss.as.transactions"/>
    <extension module="org.jboss.as.web"/>
    <extension module="org.jboss.as.webservices"/>
    <extension module="org.jboss.as.weld"/>
</extensions>

<management>
    <security-realms>
        <security-realm name="ManagementRealm">
            <authentication>
                <properties path="mgmt-users.properties" relative-to="jboss.server.config.dir"/>
            </authentication>
        </security-realm>
        <security-realm name="ApplicationRealm">
            <authentication>
                <properties path="application-users.properties" relative-to="jboss.server.config.dir"/>
            </authentication>
        </security-realm>
    </security-realms>
    <management-interfaces>
        <native-interface security-realm="ManagementRealm">
            <socket-binding native="management-native"/>
        </native-interface>
        <http-interface security-realm="ManagementRealm">
            <socket-binding http="management-http"/>
        </http-interface>
    </management-interfaces>
</management>

<profile>
    <subsystem xmlns="urn:jboss:domain:logging:1.1">
        <console-handler name="CONSOLE">
            <level name="INFO"/>
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
        </console-handler>
        <periodic-rotating-file-handler name="FILE">
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
            <file relative-to="jboss.server.log.dir" path="server.log"/>
            <suffix value=".yyyy-MM-dd"/>
            <append value="true"/>
        </periodic-rotating-file-handler>
        <logger category="com.arjuna">
            <level name="WARN"/>
        </logger>
        <logger category="org.apache.tomcat.util.modeler">
            <level name="WARN"/>
        </logger>
        <logger category="sun.rmi">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb.config">
            <level name="ERROR"/>
        </logger>
        <root-logger>
            <level name="INFO"/>
            <handlers>
                <handler name="CONSOLE"/>
                <handler name="FILE"/>
            </handlers>
        </root-logger>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:configadmin:1.0"/>
    <subsystem xmlns="urn:jboss:domain:datasources:1.0">
        <datasources>
            <datasource jndi-name="java:jboss/datasources/ExampleDS" pool-name="ExampleDS" enabled="true" use-java-context="true">
                <connection-url>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1</connection-url>
                <driver>h2</driver>
                <security>
                    <user-name>sa</user-name>
                    <password>sa</password>
                </security>
            </datasource>
            <datasource jndi-name="java:/AFM" pool-name="AFM" enabled="true" use-java-context="true">
                <connection-url>jdbc:oracle:thin:@192.168.192.197:1521:afmqa</connection-url>
                <driver>oracle</driver>
                <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                <pool>
                    <prefill>true</prefill>
                    <use-strict-min>false</use-strict-min>
                    <flush-strategy>FailingConnectionOnly</flush-strategy>
                </pool>
                <security>
                    <user-name>tinker35</user-name>
                    <password>tinker35</password>
                </security>
            </datasource>
            <drivers>
                <driver name="h2" module="com.h2database.h2">
                    <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                </driver>
                <driver name="oracle" module="com.oracle.ojdbc6">
                    <xa-datasource-class>oracle.jdbc.OracleDriver</xa-datasource-class>
                </driver>
            </drivers>
        </datasources>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:deployment-scanner:1.1">
        <deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" auto-deploy-zipped="true" auto-deploy-exploded="false" deployment-timeout="5000"/>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:ee:1.0"/>
    <subsystem xmlns="urn:jboss:domain:ejb3:1.2">
        <session-bean>
            <stateless>
                <bean-instance-pool-ref pool-name="slsb-strict-max-pool"/>
            </stateless>
            <stateful default-access-timeout="5000" cache-ref="simple"/>
            <singleton default-access-timeout="5000"/>
        </session-bean>
        <mdb>
            <resource-adapter-ref resource-adapter-name="hornetq-ra"/>
            <bean-instance-pool-ref pool-name="mdb-strict-max-pool"/>
        </mdb>
        <pools>
            <bean-instance-pools>
                <strict-max-pool name="slsb-strict-max-pool" max-pool-size="20" instance-acquisition-timeout="5" instance-acquisition-timeout-unit="MINUTES"/>
                <strict-max-pool name="mdb-strict-max-pool" max-pool-size="20" instance-acquisition-timeout="5" instance-acquisition-timeout-unit="MINUTES"/>
            </bean-instance-pools>
        </pools>
        <caches>
            <cache name="simple" aliases="NoPassivationCache"/>
            <cache name="passivating" passivation-store-ref="file" aliases="SimpleStatefulCache"/>
        </caches>
        <passivation-stores>
            <file-passivation-store name="file"/>
        </passivation-stores>
        <async thread-pool-name="default"/>
        <timer-service thread-pool-name="default">
            <data-store path="timer-service-data" relative-to="jboss.server.data.dir"/>
        </timer-service>
        <remote connector-ref="remoting-connector" thread-pool-name="default"/>
        <thread-pools>
            <thread-pool name="default">
                <max-threads count="10"/>
                <keepalive-time time="100" unit="milliseconds"/>
            </thread-pool>
        </thread-pools>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:infinispan:1.1" default-cache-container="hibernate">
        <cache-container name="hibernate" default-cache="local-query">
            <local-cache name="entity">
                <transaction mode="NON_XA"/>
                <eviction strategy="LRU" max-entries="10000"/>
                <expiration max-idle="100000"/>
            </local-cache>
            <local-cache name="local-query">
                <eviction strategy="LRU" max-entries="10000"/>
                <expiration max-idle="100000"/>
            </local-cache>
            <local-cache name="timestamps">
                <eviction strategy="NONE"/>
            </local-cache>
        </cache-container>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:jaxrs:1.0"/>
    <subsystem xmlns="urn:jboss:domain:jca:1.1">
        <archive-validation enabled="true" fail-on-error="true" fail-on-warn="false"/>
        <bean-validation enabled="false"/>
        <default-workmanager>
            <short-running-threads>
                <core-threads count="50"/>
                <queue-length count="50"/>
                <max-threads count="50"/>
                <keepalive-time time="10" unit="seconds"/>
            </short-running-threads>
            <long-running-threads>
                <core-threads count="50"/>
                <queue-length count="50"/>
                <max-threads count="50"/>
                <keepalive-time time="10" unit="seconds"/>
            </long-running-threads>
        </default-workmanager>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:jdr:1.0"/>
    <subsystem xmlns="urn:jboss:domain:jmx:1.1">
        <show-model value="true"/>
        <remoting-connector/>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:jpa:1.0">
        <jpa default-datasource=""/>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:mail:1.0">
        <mail-session jndi-name="java:jboss/mail/Default">
            <smtp-server outbound-socket-binding-ref="mail-smtp"/>
        </mail-session>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:naming:1.1"/>
    <subsystem xmlns="urn:jboss:domain:osgi:1.2" activation="lazy">
        <properties>
            <property name="org.osgi.framework.startlevel.beginning">
                1
            </property>
        </properties>
        <capabilities>
            <capability name="javax.servlet.api:v25"/>
            <capability name="javax.transaction.api"/>
            <capability name="org.apache.felix.log" startlevel="1"/>
            <capability name="org.jboss.osgi.logging" startlevel="1"/>
            <capability name="org.apache.felix.configadmin" startlevel="1"/>
            <capability name="org.jboss.as.osgi.configadmin" startlevel="1"/>
        </capabilities>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:pojo:1.0"/>
    <subsystem xmlns="urn:jboss:domain:remoting:1.1">
        <connector name="remoting-connector" socket-binding="remoting" security-realm="ApplicationRealm"/>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:resource-adapters:1.0"/>
    <subsystem xmlns="urn:jboss:domain:sar:1.0"/>
    <subsystem xmlns="urn:jboss:domain:security:1.1">
        <security-domains>
            <security-domain name="other" cache-type="default">
                <authentication>
                    <login-module code="Remoting" flag="optional">
                        <module-option name="password-stacking" value="useFirstPass"/>
                    </login-module>
                    <login-module code="RealmUsersRoles" flag="required">
                        <module-option name="usersProperties" value="${jboss.server.config.dir}/application-users.properties"/>
                        <module-option name="rolesProperties" value="${jboss.server.config.dir}/application-roles.properties"/>
                        <module-option name="realm" value="ApplicationRealm"/>
                        <module-option name="password-stacking" value="useFirstPass"/>
                    </login-module>
                </authentication>
            </security-domain>
            <security-domain name="jboss-web-policy" cache-type="default">
                <authorization>
                    <policy-module code="Delegating" flag="required"/>
                </authorization>
            </security-domain>
            <security-domain name="jboss-ejb-policy" cache-type="default">
                <authorization>
                    <policy-module code="Delegating" flag="required"/>
                </authorization>
            </security-domain>
        </security-domains>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:threads:1.1"/>
    <subsystem xmlns="urn:jboss:domain:transactions:1.1">
        <core-environment>
            <process-id>
                <uuid/>
            </process-id>
        </core-environment>
        <recovery-environment socket-binding="txn-recovery-environment" status-socket-binding="txn-status-manager"/>
        <coordinator-environment default-timeout="300"/>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:web:1.1" native="false" default-virtual-server="default-host">
        <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
        <virtual-server name="default-host" enable-welcome-root="true">
            <alias name="192.168.192.38"/>
            <alias name="example.com"/>
        </virtual-server>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:webservices:1.1">
        <modify-wsdl-address>true</modify-wsdl-address>
        <wsdl-host>${jboss.bind.address:127.0.0.1}</wsdl-host>
        <endpoint-config name="Standard-Endpoint-Config"/>
        <endpoint-config name="Recording-Endpoint-Config">
            <pre-handler-chain name="recording-handlers" protocol-bindings="##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM">
                <handler name="RecordingHandler" class="org.jboss.ws.common.invocation.RecordingServerHandler"/>
            </pre-handler-chain>
        </endpoint-config>
    </subsystem>
    <subsystem xmlns="urn:jboss:domain:weld:1.0"/>
</profile>

<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:127.0.0.1}"/>
    </interface>
    <interface name="public">
        <inet-address value="${jboss.bind.address:127.0.0.1}"/>
    </interface>
</interfaces>

<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="8443"/>
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/>
    <socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/>
    <socket-binding name="osgi-http" interface="management" port="8090"/>
    <socket-binding name="remoting" port="4447"/>
    <socket-binding name="txn-recovery-environment" port="4712"/>
    <socket-binding name="txn-status-manager" port="4713"/>
    <outbound-socket-binding name="mail-smtp">
        <remote-destination host="localhost" port="25"/>
    </outbound-socket-binding>
</socket-binding-group> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T05:13:54.180

你没有更多关于你的问题的细节......

如果您有，请检查您的 jboss 模块文件夹：

*   com\oracle\ojdbc6\main 在使用 oracle 数据源的情况下
*   com\h2database\h2\main 在使用 h2 数据源的情况下（您可以使用物理 h2 数据库）

如果您使用的是正确的，请检查您的 persistence.xml 中的 jta-data-source：

```
<jta-data-source>java:jboss/datasources/m2aDS</jta-data-source> 
```

# iphone - 在 4 英寸 iphone 上查看时 UIImageView 正在向下移动

> ID：16139433
> 
> 赞同：0
> 
> 时间：2013-04-22T04:25:18.043
> 
> 标签：iphone, ios, xcode, cocoa-touch

我试图弄清楚下面 UIImageView 的哪些设置适用于所有设备尺寸。

我尝试过的每一种组合都没有运气。

这是.xib：

![在此处输入图像描述](https://i.stack.imgur.com/7e2eF.png)

当我在 4" 上运行它时，图像从顶部标签向下移动了很多，并且按钮保持不动。

我将顶部标签设置为顶部，也尝试了 Aspect Fit/Fill，没有改变任何东西。似乎是 UIImageView 的问题。还看到有人提到尝试剪辑子视图，选择它，在设备和模拟器上从 3.5" 到 4" iphone 来回切换时仍然无法保持相同的大小和方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:34:20.423

希望这会有所帮助，在您的情况下，您应该将其保留为默认设置，无需更改..

![在此处输入图像描述](https://i.stack.imgur.com/mofq7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:34:11.157

首先，如果从 XIB 关闭 Autolayout 设置。

现在在这里访问[我的答案](https://stackoverflow.com/questions/15246601/existing-custom-uibuttons-distort-when-adding-a-new-one/15246697#15246697)。

# c++ - 净化 c++ 二进制启动失败

> ID：16139434
> 
> 赞同：0
> 
> 时间：2013-04-22T04:25:28.600
> 
> 标签：c++

我正在尝试使用 Rational Purify 7 来分析我们的 C++ 应用程序之一，但在运行二进制文件时遇到了问题。为了缩小问题范围，我尝试分析一个非常简单的 C++ 程序，但我看到了同样的错误。我已经粘贴了使用 Purify 运行时得到的代码和输出：

```
// purify.cc
#include <iostream>

int main()
{
    int *i = new int[10];
    return 0;
} 
```

```
[上午 12 点 15 分]~/testPrograms$ purify -recursion-depth-limit=0 --best-effort --cache-dir=/home/deepakde/testPrograms g++ purify.cc

[上午 12 点 17 分]~/testPrograms$ ./a.out
净化：警告：无法打开文件以读取程序头信息
**** Purify Instrumented ./a.out (pid 10897 at Mon Apr 22 00:17:37 2013)
  * Purify 7.0.0.0-010 080125 Linux (64-bit) (C) 版权所有 IBM Corporation。1992, 2008 版权所有。
  * 联系信息类型：“purify -help”
  * 对于 Purify Viewer 输出，设置 DISPLAY 环境变量。
  * 选项设置：-g++=yes -purify -recursion-depth-limit=0 --best-effort \
    --cache-dir=/home/deepakde/testPrograms \
    -purify-home=/opt/purifyplus/7_fixpack3/releases/purify.i386_linux2.7.0.0.0-010 \
    -gcc3_path=/usr/bin/g++ -cache-dir=/home/deepakde/testPrograms
净化：警告：无法打开文件以读取程序头信息
净化：警告：无法打开文件以读取程序头信息
净化：警告：无法打开文件以读取程序头信息

**** 净化仪器 ./a.out (pid 10897) ****
MSE：内存段错误：
  * 这发生在线程 10897 中：
        *未知功能* [pc=0x2ba62329f4d0]
        *未知功能* [pc=0x3d2b20d3fa]
  * 访问跨越内存段边界的内存范围。
    寻址 0x2ba6236806a8 的 8 个字节以 0x2ba6236806b0 结尾，
    它既不在堆中也不在主堆栈中。

**** 净化仪器 ./a.out (pid 10897) ****
MSE：内存段错误：
  * 这发生在线程 10897 中：
        *未知功能* [pc=0x2ba62329f4fd]
        *未知功能* [pc=0x3d2b20d3fa]
  * 访问跨越内存段边界的内存范围。
    寻址 0x2ba6236806c0 的 8 个字节以 0x2ba6236806c8 结尾，
    它既不在堆中也不在主堆栈中。

```

有人可以帮我解决我在运行 Purify 时收到的错误消息吗？该程序甚至无法启动，只是出现此消息的错误。

我在 RedHat Linux 2.6 64 位上使用 Purify 7 Fixpack 3。

# ruby-on-rails - Rails 应用程序不保存嵌套表单模型数据

> ID：16139437
> 
> 赞同：1
> 
> 时间：2013-04-22T04:25:42.143
> 
> 标签：ruby-on-rails, model, nested-forms

当我保存申请模型时，它不会将嵌套模型数据保存到数据库中。我已经粘贴了我的控制器代码、模型代码和传递参数

我的参数是：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"5F8h7qG2pez9Rsutnq3JXYyXbPkbVJAlgfIfsE1bdUw=", "applicant"=>
{"job_id"=>"1", "first_name"=>"sanyam", "location"=>"", "email"=>"", "mob_no"=>"", "alternative_no"=>"", "last_name"=>"jain", "works_attributes"=>{"1366604495995"=>
{"title"=>"M Tech", "company_name"=>"", "start_month"=>"", "start_year"=>"", "end_month"=>"", "end_year"=>"", "description"=>"", "_destroy"=>"false"}, "1366604506595"=>
{"title"=>"B Tech", "company_name"=>"", "start_month"=>"", "start_year"=>"", "end_month"=>"", "end_year"=>"", "description"=>"", "_destroy"=>"false"}}, "linkedin"=>"", 
"twitter"=>"", "facebook"=>"", "message"=>""}, "submit"=>""} 
```

我的控制器代码是：

```
def createProfile
@applicant = Applicant.new(params[:applicant])
@applicant.save
end 
```

我的申请人模型是

```
class Applicant < ActiveRecord::Base
attr_accessible :first_name, :last_name, :location, :email, :mob_no, :alternative_no, :linkedin, :facebook, :twitter, :message, :resume, :job_id
has_many :works, :dependent => :destroy
has_many :educations, :dependent => :destroy
attr_accessible :works_attributes, :educations_attributes
accepts_nested_attributes_for :works, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true

accepts_nested_attributes_for :educations, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
end 
```

我的工作模式是

```
class Work < ActiveRecord::Base
attr_accessible :applicant_id, :company_name, :description, :end_month, :end_year, :start_month, :start_year, :title
belongs_to :applicant
validates_associated :applicant
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:29:19.390

您指定的 reject_if 表示当参数中没有 :content 时，它不应该保存子模型。因此，请确保您的参数具有包含值的内容属性。你的参数应该看起来像这样：

{"utf8"=>"✓", "authenticity_token"=>"5F8h7qG2pez9Rsutnq3JXYyXbPkbVJAlgfIfsE1bdUw=", "applicant"=> {"job_id"=>"1", "first_name"=>"sanyam", "location"=>" ", "email"=>"", "mob_no"=>"", "alternative_no"=>"", "last_name"=>"jain", "works_attributes"=>{"1366604495995"=> {"title" =>"M Tech", "company_name"=>"", "start_month"=>"", "start_year"=>"", "end_month"=>"", "end_year"=>"", "description" =>"", "内容"=>"一些内容", "_destroy"=>"false"}, "1366604506595"=> {"title"=>"B Tech", "company_name"=>"", "start_month"=>"", "start_year"=>"", " end_month"=>"", "end_year"=>"", "description"=>"", "content"=>"一些内容", "_destroy"=>"false"}}, "linkedin"=>" ", "推特"=>"", "facebook"=>"", "消息"=>""}, "提交"=>""}start_year"=>"", "end_month"=>"", "end_year"=>"", "description"=>"", "content"=>"一些内容", "_destroy"=>"false"} }, "linkedin"=>"", "twitter"=>"", "facebook"=>"", "message"=>""}, "submit"=>""}start_year"=>"", "end_month"=>"", "end_year"=>"", "description"=>"", "content"=>"一些内容", "_destroy"=>"false"} }, "linkedin"=>"", "twitter"=>"", "facebook"=>"", "message"=>""}, "submit"=>""}=>“”}=>“”}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T06:31:57.363

如果没有保存子表数据，请记住两个 attr_accessible

attr_accessible :first_name attr_accessible :works_attributes, :allow_destroy => true 接受_nested_attributes_for :works

# c# - 更改摩托罗拉设备的条码扫描蜂鸣音量

> ID：16139438
> 
> 赞同：1
> 
> 时间：2013-04-22T04:25:43.320
> 
> 标签：c#, compact-framework, motorola-emdk

我正在使用 c# 为运行 Windows Mobile 和 Windows CE 的各种摩托罗拉设备开发一些 .net 应用程序。其中包括 MC9190 和 WT41N0。在这两种型号上，扫描条码时会发出非常响亮的哔哔声。无论如何使用摩托罗拉 emdk 或通过更改注册表设置以使哔声更安静而不完全关闭哔声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-22T15:04:34.397

我不知道这是否适用于所有摩托罗拉设备，但您可以尝试包括`Symbol.Audio`：

```
using Symbol.Audio;
...
using (StandardAudio audio = new StandardAudio(Device.AvailableDevices[0]))
{
    audio.BeeperVolume = 1;
} 
```

您可以检查该`audio.BeeperVolumeLevels`属性以查看最大音量级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-24T03:22:45.137

在 Symbol 扫描仪术语中，这称为“反馈”，默认情况下，本地反馈设置会妨碍正确管理音频。

在您的应用程序中，创建阅读器后，以下设置对其进行控制：

```
 _BarcodeReader.Parameters.Feedback.Success.BeepFrequency = 2000
    _BarcodeReader.Parameters.Feedback.Success.BeepTime = 20 
```

_BarcodeReader 是阅读器对象。我将它设置为较低的频率，上面的时间较短。

如果您需要完全消除蜂鸣声：

```
_BarcodeReader.Parameters.Feedback.Success.BeepTime = 0 
```

您可能需要添加自己的波形文件：

```
_BarcodeReader.Parameters.Feedback.Success.WaveFile = "decode.wav" 
```

MC9xxx 和 MC3xxx 系列随附的 DataWedge 软件也是如此。如果您使用的是 DataWedge，请在“基本配置”下的“扫描仪”的反馈菜单下查找“本地反馈”。

扫描音频只能从反馈设置管理，音量控制等方法无效。似乎 Zebra（以前的摩托罗拉）在嘈杂的工业设置中使用了大音量默认设置，但希望他们考虑过一种更好的配置方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:52:58.527

我在我的扬声器上贴了一条透明胶带。

当我在办公桌前进行测试时，磁带可以抑制大部分噪音，但它很容易移除，因此他们可以在地板上听到它。

在外面或在我们的生产车间，他们需要很大的噪音。

如果这对您不起作用，在我们的 Datalogic Falcons 的设置中，有一个解码应用程序。那里的输入之一称为音频，可以让某人调低音量。

由于我没有 Datalogic Falcon 的 SDK，我只能发布一个低分辨率的手机剪辑。希望这可以帮助。

![手机夹](https://i.stack.imgur.com/iGRbt.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-01T18:31:38.163

摩托罗拉设备有一个配置实用程序。它是一个单独的 exe 文件，您可以将其放在您的设备上，然后您可以调整多项设置以及蜂鸣器音量。我查看了 support.symbol.com，但没有找到。我认为您可以从供应商支持处获得它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-04T13:36:26.607

音量可以通过按蓝色功能键，然后按 H 或 M 键来控制。显示亮度可以通过按蓝色功能键，然后按 D 或 I 键来控制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-15T16:23:24.557

在我们使用使用远程登录会话的摩托罗拉 MC9590 设备的情况下，在登录远程登录会话之前，需要调低设备左侧的音量控制。一旦用户登录到他们的 telnet 会话，音量级别将保持在既定设置。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-12T15:40:46.937

我让它沉默的方式是：*转到控制面板*->*所有控制面板项目*->*设备和打印机*。找到`Symbol bar code`并**右键单击**并*选择* `Keyboard settings`，`speed box`您将看到一个`Repeat delay icon`一直*向左***拖动**的按钮，声音应该消失。

# angularjs - 为什么 angularFire 示例会删除我所有的 Firebase 条目？

> ID：16139441
> 
> 赞同：1
> 
> 时间：2013-04-22T04:26:02.117
> 
> 标签：angularjs, firebase

我正在尝试让一个简单的[angularFire 示例](http://fiddle.jshell.net/PF32k/6/show/light/)正常工作，并且看到我添加到[同步的 Firebase 数据库](https://andreystest.firebaseio.com/items)中的任何内容都被立即删除。我希望输入框同步到 /items/foo 中的字符串。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T05:09:01.643

angularFire 在删除与预期数据类型不匹配的项目方面有点激进。如果您有兴趣，可以在 Github 上讨论修复此行为，但您可以通过使用第四个参数显式指定数据类型来解决它：

```
var url = 'https://andreystest.firebaseio.com/items';
angularFire(url, $scope, 'items', ''); 
```

第四个参数是一个空字符串，它告诉 angularFire 存储在 URL 中的任何内容都是一个字符串。默认模型类型是数组 ([])。

编辑：jsFiddle 和 Angular 似乎存在一些问题。您缺少 ng-app 和 ng-controller 指令，这意味着永远不会初始化 angular。但是，即使添加了这些标签，我也无法让它在 jsFiddle 中运行，但它确实可以在常规网页上运行。试试[http://misc.firebase.com/~anant/angular-test.html](http://misc.firebase.com/~anant/angular-test.html)！

# c# - VB6 到 C#：循环或索引问题？

> ID：16139442
> 
> 赞同：2
> 
> 时间：2013-04-22T04:26:06.937
> 
> 标签：c#, vb6, indexing, while-loop, vb6-migration

我有一个旧的 VB6 项目，我正在转换为 C#。我有一个字符串。我正在验证一次 1 个字符，它只包含`[E0-9.+-]`.

这是旧的 VB6 代码：

```
sepIndex = 1

Do While Mid(xyString, sepIndex, 1) Like "[E0-9.+-]"
    sepIndex = sepIndex + 1
Loop 
```

然后我使用索引号来计算同一字符串的**左侧**，并将其转换为双精度。使用**Right**，然后我将字符串剪切到我想要的字符串的剩余部分：

```
xFinal = CDbl(left(xyString, sepIndex - 1))
xyString = LTrim(right(xyString, Len(xyString) - sepIndex + 1)) 
```

这在 VB 中效果很好，我没有任何问题。在 C# 中是不同的。知道在 C# 中模拟**Left/Mid/Right**的唯一方法是创建自己的函数，我这样做了（我的 Utils 命名空间的一部分）：

```
public static string Mid(string param, int startIndex)
   {
       try
       {

           //start at the specified index and return all characters after it
           //and assign it to a variable
           string result = param.Substring(startIndex);
           //return the result of the operation
           return result;
       }
       catch
       {
           return string.Empty;
       }
   }

public static string Right(string param, int length)
   {
       try
       {
           //start at the index based on the lenght of the sting minus
           //the specified lenght and assign it a variable
           string result = param.Substring(param.Length - length, length);
           //return the result of the operation
           return result;
       }
       catch
       {
           return string.Empty;
       }
   }
public static string Left(string param, int length)
   {
       try
       {
           //we start at 0 since we want to get the characters starting from the
           //left and with the specified lenght and assign it to a variable
           string result = param.Substring(0, length);
           //return the result of the operation
           return result;
       }
       catch
       {
           return string.Empty;
       }
   } 
```

据我所知，我已将代码从 VB6 转换为 C#。问题是，当它最终设置时`xyString`，它会将字符串剪切到错误的位置，并且仍然留下我想要的尾随字符`xFinal`。

据我所知，这可能是索引问题（我知道在 C# 中，**子字符串**是基于 0 的，所以我`sepIndex`将值更改为 0），或者是循环结构错误的问题。

这是转换后的代码，我希望我能对这里发生的事情有所了解：

```
sepIndex = 0;

while (Regex.IsMatch(Utils.Mid(xyString, sepIndex, 1), "[E0-9.+-]"))
{
    sepIndex++;
}

xFinal = Convert.ToDouble(Utils.Left(xyString, sepIndex - 1)); // - 1
xyString = Utils.Right(xyString, xyString.Length - sepIndex + 1).TrimStart(' '); // + 1 
```

## **编辑**

这已经解决了。我只是从我的 Utils.Left 函数中删除了 +1 和 -1，它返回了正确的字符串。感谢您的投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:34:54.787

尝试使用以下

```
do{
   sepIndex++;
}while (Regex.IsMatch(Utils.Mid(xyString, sepIndex, 1), "[E0-9.+-]")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:51:27.133

为什么不导入[microsoft.visualbasic 命名空间](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.aspx)？

```
class Program
{
    static void Main(string[] args)
    {
        string t = Microsoft.VisualBasic.Strings.Mid("hello", 2);
    }
} 
```

你可以重复使用你以前拥有的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T04:31:37.103

似乎只是带有否定条件的正则表达式数学 - “[^E0-9.+-]”：

```
 var sepIndex = Regex.Match(xyString, @"[^E0-9\.+-]+").Index; 
```

如果您需要手动完成，获取单个字符的最简单方法是从字符串中获取单个字符而不进行修剪：

```
 // replace Utils.Mid(xyString, sepIndex, 1) with
  xyString[sepIndex] 
```

# ssl - 如何为 Apache2 和 Jetty 服务器启用 SSL

> ID：16139444
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:26:19.693
> 
> 标签：ssl, apache2, jetty

我是 SSL 新手。我运行了 apache2，它托管了我的个人网站，以及一个通过代理通行证 (ProxyPass /abc http://{local host}:8080/abc) 的码头服务器。

如何为 Apache2 和 Jetty 启用 SSL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:08:42.520

这是一个使用 https 配置 apache2 的好方法。[http://mrfoo.de/archiv/347-Howto-Apache2-SSL-Zertifikat-erstellen-und-aktivieren.html](http://mrfoo.de/archiv/347-Howto-Apache2-SSL-Zertifikat-erstellen-und-aktivieren.html)

Jetty 可以使用 http 运行（只要您使用防火墙从外部阻止 8080 端口。然后使用代理传递将请求传递到 http://:8080/

她是一个示例虚拟主机配置：

```
# Force HTTPS only (proxy to port 443)
<VirtualHost *:80>
    ServerName app.mydomain.lan
    RewriteEngine on
    ReWriteCond %{SERVER_PORT} !^443$
    RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L]
</VirtualHost>

# HTTPS requests Proxy to tomcat/jetty 
<VirtualHost *:443>
    ServerName app.mydomain.lan
    ServerSignature Off
    ProxyRequests Off
    SSLEngine On
    SSLCertificateKeyFile /etc/apache2/myssl/server.cert.key
    SSLCertificateFile /etc/apache2/myssl/server.cert.crt

    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    ProxyPass / http://127.0.0.1:8080/ retry=1
    ProxyPassReverse / http://127.0.0.1:8080/
    ProxyVia On
</VirtualHost> 
```

# c# - 需要将 LINQ Query 从 Normal JOIN 变成 RIGHT OUTER JOIN

> ID：16139445
> 
> 赞同：0
> 
> 时间：2013-04-22T04:26:28.557
> 
> 标签：c#, linq, entity-framework, linq-to-sql, linq-to-entities

我有以下查询：

```
var poll = entities.Polls.Join(entities.Descriptors, p => p.DescriptorID, q => q.ID, (p, q) => new
                {
                    Poll = p,
                    Descriptor = q
                }).Join(entities.Media1, p => p.Descriptor.MediaID, q => q.ID, (p, q) => new
                    {
                        Poll = p.Poll,
                        Descriptor = p.Descriptor,
                        Media = q

                    }).Join(entities.PollCommentSettings,p => p.Poll.ID,q => q.PollID,(p,q) => new
                        {
                            Poll = p.Poll,
                            Descriptor = p.Descriptor,
                            Media = p.Media,
                            CommentSettings = q
                        }).FirstOrDefault(p => p.Poll.ID == request.PollID); 
```

我遇到的问题是正在加入的两个表可能没有对象，但我不在乎，并且仍想创建我的顶级对象。

如果没有匹配，两个 PollCommentSettings 和 Media1 表会导致它不返回任何内容。我需要的是最后一个对象，如果没有找到它们，只需将它们设置为 null。我相信这是这两个表上的右外连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:06:02.473

我想我想出了如何通过在 LINQpad 中尝试一些东西来完成我需要的东西。我得到了以下查询，我相信它可以完成我正在寻找的内容。

```
from poll in Polls join descriptor in Descriptors on poll.DescriptorID equals descriptor.ID into pdj
from descriptor in pdj.DefaultIfEmpty()
join media in Media1 on descriptor.MediaID equals media.ID into dmj
from media in dmj.DefaultIfEmpty()
join commentSetting in PollCommentSettings on poll.ID equals commentSetting.PollID into  pcj
from commentSetting in pcj.DefaultIfEmpty()
where poll.ID == 28
select new
{
    poll,
    descriptor,
    media,
    commentSetting
} 
```

# jsoup - 有没有人可以告诉我为什么只有 8 项，虽然 html 中有 44 项？

> ID：16139449
> 
> 赞同：0
> 
> 时间：2013-04-22T04:26:45.917
> 
> 标签：jsoup

我想从网站中提取一些信息，但是 select 方法返回的 div 计数是 8，而不是实际的 44。为什么？这是我的程序：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

import cornerstone.util.URLUtils;

public class Temp {

    public static void main(String[] args) throws Exception {
        Document doc = Jsoup.parse(URLUtils.toURL("http://s.taobao.com/search?q=耳塞"), 3000);
        System.out.println(doc.select("div.col.item.icon-datalink").size());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:31:57.693

您的代码*本身*没有问题。它准确地计算了它看到的 HTML 中匹配元素的数量。浏览器中额外的 36 个元素是用 JavaScript 加载的。为了向自己证明这一点

*   查看纯 HTML 页面源代码（*不*使用浏览器的 DOM 检查器），或
*   加载禁用 JavaScript 的页面

# javascript - 如何在javascript中将大的负科学计数法数字转换为十进制字符串？

> ID：16139452
> 
> 赞同：7
> 
> 时间：2013-04-22T04:27:17.343
> 
> 标签：javascript

converter_scientific_notation_to_decimal_notation('1.34E-15') 或 converter_scientific_notation_to_decimal_notation(1.34E-15)

=> '0.00000000000000134'

converter_scientific_notation_to_decimal_notation('2.54E-20') 或 converter_scientific_notation_to_decimal_notation(2.54E-20)

=> '0.000000000000000000254'

Javascript中是否存在这样的功能？

parseFloat 不适用于大的负科学数。

```
parseFloat('1.34E-5') => 0.0000134
parseFloat('1.34E-15') => 1.34e-15 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T05:12:57.357

这适用于任何具有指数“E”的正数或负数，正数或负数**。**（可以通过前缀'+'将数字字符串转换为数字，或者使其成为字符串方法，或任何对象的方法，并调用字符串或数字。）

```
Number.prototype.noExponents= function(){
    var data= String(this).split(/[eE]/);
    if(data.length== 1) return data[0]; 

    var  z= '', sign= this<0? '-':'',
    str= data[0].replace('.', ''),
    mag= Number(data[1])+ 1;

    if(mag<0){
        z= sign + '0.';
        while(mag++) z += '0';
        return z + str.replace(/^\-/,'');
    }
    mag -= str.length;  
    while(mag--) z += '0';
    return str + z;
}

var n=2.54E-20;
n.noExponents(); 
```

返回值：

```
"0.0000000000000000000254" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T04:36:22.823

您可以使用 toFixed:`(1.34E-15).toFixed(18)` 返回`0.000000000000001340`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T22:47:09.387

您可以使用[from-exponential](https://github.com/shrpne/from-exponential)模块。它重量轻且经过全面测试。

它接受字符串和数字，因此在转换过程中不会丢失精度。

```
import fromExponential from 'from-exponential';

fromExponential('1.12345678901234567890e-10'); 
// '0.00000000011234567890123456789' 
```

# javascript - onclick 后功能不启动

> ID：16139453
> 
> 赞同：2
> 
> 时间：2013-04-22T04:27:21.543
> 
> 标签：javascript, onclick, getelementbyid

嗨，我试着为我的朋友做一个测验。我在我的编辑器中设置了功能并且它起作用了，当我将它移动到服务器时，按下按钮后没有任何反应。

我的html代码是：

```
<div align="center"><img src="../obrazki/logo/logo4.jpg" class="logo"/></div>
<form  method="post" name="Formularz">
<strong>1\. Question 1</strong><br>
<input  type="radio" name="a" value="5" />a) answer 1<br/>
<input  type="radio" name="a" value="3" />b) answer 2<br/>
<input  type="radio" name="a" value="1" />c) answer 3<br/>
<br/>
 .
 .
 .
<strong>15\. Question 15</strong><br> 
<input  type="radio" name="b" value="5" />a) answer 1 <br/>
<input  type="radio" name="b" value="3" />b) answer 2<br/>
<input  type="radio" name="b" value="1" />c) answer 3<br/>
<br/>
</form>
<form method="post" name="formularz2" >
<strong>16\. question16</strong><br> 
<input  type="radio" name="p" value="9" />a) answer 1<br/>
<input  type="radio" name="p" value="7" />b) answer 2<br/>
<input  type="radio" name="p" value="5" />c) answer 3<br/>
<input  type="radio" name="p" value="3" />d) answer 4<br/>
<input  type="radio" name="p" value="1" />e) answer 5<br/>
<br/>
.
.
.
<strong>20\. Question 20</strong><br> 
<input  type="radio" name="w" value="9" />answer 1<br/>
<input  type="radio" name="w" value="7" />answer 2<br/>
<input  type="radio" name="w" value="5" />answer 3<br/>
<input  type="radio" name="w" value="3" />d) answer 4<br/>
<input  type="radio" name="w" value="1" />e) answer 5<br/>
<br/>
</form>
<button  type="button" onclick="checkRadio()">test</button>
<a  href="../index.htm"><p  align="center">Strona Główna</p></a>
<div id="suma"></div>
<div  id="suma2"></div> 
```

我的脚本如下所示：

```
<script type="text/javascript">
 function checkRadio() {
alert("hello World");
var form = document.getElementById('Formularz');
var form2 = document.getElementById('Formularz2');
var suma = 0;
var suma2= 0;
for ( var i=0; i<form.elements.length; i++)
if (form.elements[i].checked) {
        suma=suma+parseInt(form.elements[i].value);
        document.getElementById("suma").innerHTML = suma;
}
alert(suma);
for ( var i=0; i<form2.elements.length; i++)
if (form2.elements[i].checked) {
        suma2=suma2+parseInt(form2.elements[i].value);
        document.getElementById("suma2").innerHTML = suma2;
}
alert(suma2);
if (suma<9){
    if (suma2<20) {window.location="spider_bushi.htm"};
    else if (suma2<30) {window.location="spider_courtier.htm"};
    else {window.location="spider_shugenja.htm"}; 
}
 else if (suma<17){
    if (suma2<10) {window.location="scorpion_ninja.htm"};
    else if (suma2<20) {window.location="scorpion_bushi.htm"};
    else if (suma2<30) {window.location="scorpion_courtier.htm"};
    else {window.location="scorpion_shugenja.htm"};
}
else if (suma<26){
        if (suma2<20) {window.location="crab_bushi.htm"};
    else if (suma2<30) {window.location="crab_courtier.htm"};
    else if (suma2<40) {window.location="crab_shugenja.htm"};
    else {window.location="crab_monk.htm"}; 
}
else if (suma<34){
    if (suma2<15) {window.location="mantis_bushi.htm"};
    else if (suma2<30) {window.location="mantis_courtier.htm"};
    else {window.location="mantis_shugenja.htm"}; 
}
else if (suma<42){
    if (suma2<15) {window.location="unicron_bushi.htm"}; 
    else if (suma2<30) {window.location="unicron_courtier.htm"}; 
    else {window.location="unicron_shugenja.htm"}; 
}
else if (suma<51){
    if (suma2<20) {window.location="dragon_bushi.htm"}; 
    else if (suma2<30) {window.location="dragon_courtier.htm"};
    else if (suma2<40) {window.location="dragon_shugenja.htm"};
    else {window.location="dragon_monk.htm"}; 
}
else if (suma<60){
    if (suma2<20) {window.location="phoenix_bushi.htm"}; 
    else if (suma2<30) {window.location="phoenix_courtier.htm"}; 
    else if (suma2<40) {window.location="phoenix_shugenja.htm"}; 
    else {window.location="phoenix_monk.htm"}; 
}
    else if (suma<68){
    if (suma2<16) {window.location="crane_bushi.htm"}; 
    else if (suma2<31) {window.location="crane_courtier.htm"};
    else {window.location="crane_shugenja.htm"}; 
}
    else if (suma<76){
    if (suma2<16) {window.location="lion_bushi.htm"}; 
    else if (suma2<31) {window.location="lion_courtier.htm"};
    else {window.location="lion_shugenja.htm"};
}
else { alert("brak") }
} 
</script> 
```

脚本正在工作，因为在页面加载时放置一个“hello World”可以工作。但是按钮根本没有启动 checkRadio 功能，它甚至没有进入“hello world”行。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:01:53.537

您的代码中几乎没有错误。

首先，您`;`在 if-else 块中不必要地使用。

```
if (suma2<20) {window.location="crab_bushi.htm"};
    else if (suma2<30) {window.location="crab_courtier.htm"};
    else if (suma2<40) {window.location="crab_shugenja.htm"};
    else {window.location="crab_monk.htm"}; 
```

声明 var form = document.getElementById('Formularz'); 是错的。因为没有称为 id 的表单`Formularz`。

我已经纠正了这些错误。

**HTML**：

```
<div align="center"><img src="../obrazki/logo/logo4.jpg" class="logo"/></div>
<form  method="post" name="Formularz" id="Formularz">
<strong>1\. Question 1</strong><br>
<input  type="radio" name="a" value="5" />a) answer 1<br/>
<input  type="radio" name="a" value="3" />b) answer 2<br/>
<input  type="radio" name="a" value="1" />c) answer 3<br/>
<br/>
 .
 .
 .
<strong>15\. Question 15</strong><br> 
<input  type="radio" name="b" value="5" />a) answer 1 <br/>
<input  type="radio" name="b" value="3" />b) answer 2<br/>
<input  type="radio" name="b" value="1" />c) answer 3<br/>
<br/>
</form>
<form method="post" name="formularz2" id="formularz2" >
<strong>16\. question16</strong><br> 
<input  type="radio" name="p" value="9" />a) answer 1<br/>
<input  type="radio" name="p" value="7" />b) answer 2<br/>
<input  type="radio" name="p" value="5" />c) answer 3<br/>
<input  type="radio" name="p" value="3" />d) answer 4<br/>
<input  type="radio" name="p" value="1" />e) answer 5<br/>
<br/>
.
.
.
<strong>20\. Question 20</strong><br> 
<input  type="radio" name="w" value="9" />answer 1<br/>
<input  type="radio" name="w" value="7" />answer 2<br/>
<input  type="radio" name="w" value="5" />answer 3<br/>
<input  type="radio" name="w" value="3" />d) answer 4<br/>
<input  type="radio" name="w" value="1" />e) answer 5<br/>
<br/>
</form>
<button  type="button" onclick="checkRadio()">test</button>
<a  href="../index.htm"><p  align="center">Strona Główna</p></a>
<div id="suma"></div>
<div  id="suma2"></div> 
```

**JS**：

```
function checkRadio() {
    alert("hello World");
    var form = document.getElementById('Formularz');
    var form2 = document.getElementById('Formularz2');
    var suma = 0;
    var suma2 = 0;
    for (var i = 0; i < form.elements.length; i++)
    if (form.elements[i].checked) {
        suma = suma + parseInt(form.elements[i].value,10);
        document.getElementById("suma").innerHTML = suma;
    }
    alert(suma);
    for ( i = 0; i < form2.elements.length; i++)
    if (form2.elements[i].checked) {
        suma2 = suma2 + parseInt(form2.elements[i].value,10);
        document.getElementById("suma2").innerHTML = suma2;
    }
    alert(suma2);
    if (suma < 9) {
        if (suma2 < 20) {
            window.location = "spider_bushi.htm";
        } else if (suma2 < 30) {
            window.location = "spider_courtier.htm";
        } else {
            window.location = "spider_shugenja.htm";
        }
    } else if (suma < 17) {
        if (suma2 < 10) {
            window.location = "scorpion_ninja.htm";
        } else if (suma2 < 20) {
            window.location = "scorpion_bushi.htm";
        } else if (suma2 < 30) {
            window.location = "scorpion_courtier.htm";
        } else {
            window.location = "scorpion_shugenja.htm";
        }
    } else if (suma < 26) {
        if (suma2 < 20) {
            window.location = "crab_bushi.htm";
        } else if (suma2 < 30) {
            window.location = "crab_courtier.htm";
        } else if (suma2 < 40) {
            window.location = "crab_shugenja.htm";
        } else {
            window.location = "crab_monk.htm";
        }
    } else if (suma < 34) {
        if (suma2 < 15) {
            window.location = "mantis_bushi.htm";
        } else if (suma2 < 30) {
            window.location = "mantis_courtier.htm";
        } else {
            window.location = "mantis_shugenja.htm";
        }
    } else if (suma < 42) {
        if (suma2 < 15) {
            window.location = "unicron_bushi.htm";
        } else if (suma2 < 30) {
            window.location = "unicron_courtier.htm";
        } else {
            window.location = "unicron_shugenja.htm";
        }
    } else if (suma < 51) {
        if (suma2 < 20) {
            window.location = "dragon_bushi.htm";
        } else if (suma2 < 30) {
            window.location = "dragon_courtier.htm";
        } else if (suma2 < 40) {
            window.location = "dragon_shugenja.htm";
        } else {
            window.location = "dragon_monk.htm";
        }
    } else if (suma < 60) {
        if (suma2 < 20) {
            window.location = "phoenix_bushi.htm";
        } else if (suma2 < 30) {
            window.location = "phoenix_courtier.htm";
        } else if (suma2 < 40) {
            window.location = "phoenix_shugenja.htm";
        } else {
            window.location = "phoenix_monk.htm";
        }
    } else if (suma < 68) {
        if (suma2 < 16) {
            window.location = "crane_bushi.htm";
        } else if (suma2 < 31) {
            window.location = "crane_courtier.htm";
        } else {
            window.location = "crane_shugenja.htm";
        }
    } else if (suma < 76) {
        if (suma2 < 16) {
            window.location = "lion_bushi.htm";
        } else if (suma2 < 31) {
            window.location = "lion_courtier.htm";
        } else {
            window.location = "lion_shugenja.htm";
        }
    } else {
        alert("brak");
    }
} 
```

即使现在代码也不能完美运行（如预期的那样）。原因是**您在同一页面中使用了两个表单**。在堆栈溢出的同一页面上处理多个表单已经有很多答案。

**JavaScript 代码调试建议**：

使用 Chrome 调试器或 Firebug 进行逐行 JS 代码调试。如果开发者控制台打开，执行将中断。它也适用于萤火虫。

**[关联](https://stackoverflow.com/questions/10050465/set-a-javascript-breakpoint-in-code-in-chrome)**

此外，您始终可以在**[JSFIDDLE](http://jsfiddle.net/)**测试您的 javascript 代码。JS Fiddle 是最好的 javascript 在线 IDE。它精确定位 JS 错误，甚至显示错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:39:32.517

试试下面的脚本，你放了不需要的分号：

```
 function checkRadio() {
    alert("hello World");
    var form = document.getElementById('Formularz');
    var form2 = document.getElementById('Formularz2');
    var suma = 0;
    var suma2 = 0;
    for (var i = 0; i < form.elements.length; i++)
        if (form.elements[i].checked) {
            suma = suma + parseInt(form.elements[i].value);
            document.getElementById("suma").innerHTML = suma;
        }
    alert(suma);
    for (var i = 0; i < form2.elements.length; i++)
        if (form2.elements[i].checked) {
            suma2 = suma2 + parseInt(form2.elements[i].value);
            document.getElementById("suma2").innerHTML = suma2;
        }
    alert(suma2);
    if (suma < 9) {
        if (suma2 < 20) {
            window.location = "spider_bushi.htm"
        }

    else
        if (suma2 < 30) {
            window.location = "spider_courtier.htm"
        }

    else
        {
            window.location = "spider_shugenja.htm"
        }

    }
    else if (suma < 17) {
        if (suma2 < 10) {
            window.location = "scorpion_ninja.htm"
        }

    else
        if (suma2 < 20) {
            window.location = "scorpion_bushi.htm"
        }

    else
        if (suma2 < 30) {
            window.location = "scorpion_courtier.htm"
        }

    else
        {
            window.location = "scorpion_shugenja.htm"
        }

    }
    else if (suma < 26) {
        if (suma2 < 20) {
            window.location = "crab_bushi.htm"
        }

    else
        if (suma2 < 30) {
            window.location = "crab_courtier.htm"
        }

    else
        if (suma2 < 40) {
            window.location = "crab_shugenja.htm"
        }

    else
        {
            window.location = "crab_monk.htm"
        }

    }
    else if (suma < 34) {
        if (suma2 < 15) {
            window.location = "mantis_bushi.htm"
        }

    else
        if (suma2 < 30) {
            window.location = "mantis_courtier.htm"
        }

    else
        {
            window.location = "mantis_shugenja.htm"
        }

    }
    else if (suma < 42) {
        if (suma2 < 15) {
            window.location = "unicron_bushi.htm"
        }

    else
        if (suma2 < 30) {
            window.location = "unicron_courtier.htm"
        }

    else
        {
            window.location = "unicron_shugenja.htm"
        }

    }
    else if (suma < 51) {
        if (suma2 < 20) {
            window.location = "dragon_bushi.htm"
        }

    else
        if (suma2 < 30) {
            window.location = "dragon_courtier.htm"
        }

    else
        if (suma2 < 40) {
            window.location = "dragon_shugenja.htm"
        }

    else
        {
            window.location = "dragon_monk.htm"
        }

    }
    else if (suma < 60) {
        if (suma2 < 20) {
            window.location = "phoenix_bushi.htm"
        }

    else
        if (suma2 < 30) {
            window.location = "phoenix_courtier.htm"
        }

    else
        if (suma2 < 40) {
            window.location = "phoenix_shugenja.htm"
        }

    else
        {
            window.location = "phoenix_monk.htm"
        }

    }
    else if (suma < 68) {
        if (suma2 < 16) {
            window.location = "crane_bushi.htm"
        }

    else
        if (suma2 < 31) {
            window.location = "crane_courtier.htm"
        }

    else
        {
            window.location = "crane_shugenja.htm"
        }

    }
    else if (suma < 76) {
        if (suma2 < 16) {
            window.location = "lion_bushi.htm"
        }

    else
        if (suma2 < 31) {
            window.location = "lion_courtier.htm"
        }

    else
        {
            window.location = "lion_shugenja.htm"
        }

    }
    else {
        alert("brak")
    }
} 
```

和html代码：

```
 <div align="center"><img src="../obrazki/logo/logo4.jpg" class="logo"/></div>
<form method="post" name="Formularz" id="Formularz">
    <strong>1\. Question 1</strong><br>
    <input type="radio" name="a" value="5"/>a) answer 1<br/>
    <input type="radio" name="a" value="3"/>b) answer 2<br/>
    <input type="radio" name="a" value="1"/>c) answer 3<br/>
    <br/>
    .
    .
    .
    <strong>15\. Question 15</strong><br>
    <input type="radio" name="b" value="5"/>a) answer 1 <br/>
    <input type="radio" name="b" value="3"/>b) answer 2<br/>
    <input type="radio" name="b" value="1"/>c) answer 3<br/>
    <br/>
</form>
<form method="post" name="formularz2" id="Formularz2">
    <strong>16\. question16</strong><br>
    <input type="radio" name="p" value="9"/>a) answer 1<br/>
    <input type="radio" name="p" value="7"/>b) answer 2<br/>
    <input type="radio" name="p" value="5"/>c) answer 3<br/>
    <input type="radio" name="p" value="3"/>d) answer 4<br/>
    <input type="radio" name="p" value="1"/>e) answer 5<br/>
    <br/>
    .
    .
    .
    <strong>20\. Question 20</strong><br>
    <input type="radio" name="w" value="9"/>answer 1<br/>
    <input type="radio" name="w" value="7"/>answer 2<br/>
    <input type="radio" name="w" value="5"/>answer 3<br/>
    <input type="radio" name="w" value="3"/>d) answer 4<br/>
    <input type="radio" name="w" value="1"/>e) answer 5<br/>
    <br/>
</form>
<button type="button" onclick="checkRadio()">test</button>
<a href="../index.htm"><p align="center">Strona G?ówna</p></a>
<div id="suma"></div>
<div id="suma2"></div> 
```

# haskell - GHC 扩展的语义允许对方法进行限制 (-XConstrainedClassMethods)

> ID：16139454
> 
> 赞同：6
> 
> 时间：2013-04-22T04:28:16.110
> 
> 标签：haskell, polymorphism, ghc, typeclass

以下引自 GHC 用户指南（Haskell Platform 2012.4.0.0）...

> ### 7.6.1.3。类方法类型
> 
> Haskell 98 禁止类方法类型提及对类类型变量的约束，因此：
> 
> ```
> class Seq s a where
>   fromList :: [a] -> s a
>   elem     :: Eq a => a -> s a -> Bool 
> ```
> 
> elem 的类型在 Haskell 98 中是非法的，因为它包含约束 Eq a，仅约束类类型变量（在本例中为 a）。GHC 解除了这个限制（标志 -XConstrainedClassMethods）。

但是，我没有看到任何关于这意味着什么的解释。我可以看到两种可能性...

1.  `Seq`类型类隐式地从中获得`Eq a`约束`elem`。
2.  在不是类成员的情况下（或者它是成员，但不知道在哪里使用） ，该`elem`方法不能用于类型类。`Seq``a``Eq``elem`

我强烈怀疑（2），因为它似乎可能有用，而（1）似乎没用。(2) 基本上允许为可以支持的情况定义方法，而不将类型类限制为仅针对这些情况进行实例化。

这个例子似乎正是激发了这一点——这个想法`elem`通常是对序列有用的操作，没有它就太有价值了，但我们也希望支持那些无法支持的序列`elem`，例如函数序列。

我是对的，还是我错过了什么？这个扩展的语义是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T05:51:28.613

**注意：**似乎[GHC >= 7 中存在一个错误，](http://hackage.haskell.org/trac/ghc/ticket/7854)即使在 Haskell 98 模式下，GHC 也可以接受受约束的类方法。

`MultiParamTypeClasses`此外，无论`ConstrainedMethodTypes`扩展是否打开（也可能是错误） ，启用时始终接受手册中的示例。

* * *

在类型`elem`：

```
elem     :: Eq a => a -> s a -> Bool 
```

`a`和`s`是类类型变量，并且`Eq a`是对类类型变量的约束`a`。正如手册所说，Haskell 98 禁止此类约束（FWIW，它也禁止多参数类型类）。因此，在 Haskell 98 模式下不应接受以下代码（我认为在 Haskell 2010 中也禁止使用）：

```
class Compare a where
  comp :: Eq a => a -> a -> Bool 
```

事实上，GHC 6.12.1 拒绝了它：

```
Prelude> :load Test.hs
[1 of 1] Compiling Main             ( Test.hs, interpreted )

Test.hs:3:0:
    All of the type variables in the constraint `Eq a'
    are already in scope (at least one must be universally quantified here)
        (Use -XFlexibleContexts to lift this restriction)
    When checking the class method: comp :: (Eq a) => a -> a -> Bool
    In the class declaration for `Compare'
Failed, modules loaded: none.
Prelude> :set -XConstrainedClassMethods
Prelude> :load Test.hs
[1 of 1] Compiling Main             ( Test.hs, interpreted )
Ok, modules loaded: Main. 
```

这个想法是应该使用超类约束：

```
class (Eq a) => Compare a where
  comp :: a -> a -> Bool 
```

关于语义，您可以使用以下代码轻松检查类方法约束是否隐式添加超类约束：

```
{-# LANGUAGE ConstrainedClassMethods #-}
module Main where

class Compare a where
  comp :: (Eq a) => a -> a -> Bool
  someMethod :: a -> a -> a

data A = A deriving Show
data B = B deriving (Show,Eq)

instance Compare A where
  comp = undefined
  someMethod A A = A

instance Compare B where
  comp = (==)
  someMethod B B = B 
```

使用 GHC 6.12.1 进行测试：

```
*Main> :load Test.hs
[1 of 1] Compiling Main             ( Test.hs, interpreted )
Ok, modules loaded: Main.
*Main> comp A

<interactive>:1:0:
    No instance for (Eq A)
      arising from a use of `comp' at <interactive>:1:0-5
    Possible fix: add an instance declaration for (Eq A)
    In the expression: comp A
    In the definition of `it': it = comp A
*Main> someMethod A A
A
*Main> comp B B
True 
```

答案：不，它没有。约束仅适用于具有约束类型的方法。所以你是对的，这是可能性 #2。

# php - 重建一个数组以在 PHP 中删除父级

> ID：16139458
> 
> 赞同：0
> 
> 时间：2013-04-22T04:28:45.283
> 
> 标签：php, arrays

我想重组我的数组，使其在 json 中看起来更好这是我当前变量的 print_r：

```
Array
(
    [0] => Array
        (
            [item_id] => 2
        )

    [1] => Array
        (
            [item_id] => 1
        )

    [2] => Array
        (
            [item_id] => 1
        )
) 
```

我想重建它是这样或类似的：

**编辑**

```
Array
(
    [item_id] = array([0]=>'2',[1]=>'1', [2]=>'1');
) 
```

对不起我糟糕的英语 m(_ _)m 我只希望 item_id 有多个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:41:30.463

## The hurdle

You actually can't in any way produce the output that you desire, since the key needs to be unique.

You can't use a key of `item_id` more than once, every time you try and set it, it will override what was in there last.

Think about it, how do you then look up the item with key of item_id, you can't, because three things would have that same key.

If the only reason is for cosmetics, I'd leave the output as you currently have it, although it may look a little messy in your JSON, it works.

## A different approach

The best you can hope, is to get an output of:

```
'item_id' => array(
    2,
    1,
    1
) 
```

You can do this with the help of the [array_map](http://php.net/manual/en/function.array-map.php) function:

```
$array = array('item_id' => array_map('current', $array)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:33:37.013

这可以使用此代码来完成。

```
$a['item_id'] = array();
foreach($arr as $key=>$val) {
     $a['item_id'][] = $val['item_id'];
}
print_r($a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:38:46.410

```
$array = array('item_id' => array_map('current', $array)); 
```

# regex - 删除每行的第一个字符并使用 Vim 追加

> ID：16139460
> 
> 赞同：2
> 
> 时间：2013-04-22T04:29:03.147
> 
> 标签：regex, vim

我有一个数据文件如下。

```
1,14.23,1.71,2.43,15.6,127,2.8,3.06,.28,2.29,5.64,1.04,3.92,1065
1,13.2,1.78,2.14,11.2,100,2.65,2.76,.26,1.28,4.38,1.05,3.4,1050
1,13.16,2.36,2.67,18.6,101,2.8,3.24,.3,2.81,5.68,1.03,3.17,1185
1,14.37,1.95,2.5,16.8,113,3.85,3.49,.24,2.18,7.8,.86,3.45,1480
1,13.24,2.59,2.87,21,118,2.8,2.69,.39,1.82,4.32,1.04,2.93,735 
```

使用 vim，我想从每一行中删除 1 并将它们附加到末尾。结果文件如下所示：

```
14.23,1.71,2.43,15.6,127,2.8,3.06,.28,2.29,5.64,1.04,3.92,1065,1
13.2,1.78,2.14,11.2,100,2.65,2.76,.26,1.28,4.38,1.05,3.4,1050,1
13.16,2.36,2.67,18.6,101,2.8,3.24,.3,2.81,5.68,1.03,3.17,1185,1
14.37,1.95,2.5,16.8,113,3.85,3.49,.24,2.18,7.8,.86,3.45,1480,1
13.24,2.59,2.87,21,118,2.8,2.69,.39,1.82,4.32,1.04,2.93,735,1 
```

我一直在寻找一种优雅的方式来做到这一点。

其实我试过了

```
:%s/$/,/g 
```

接着

```
:%s/$/^./g 
```

但我无法让它工作。

**编辑：**嗯，实际上我在我的问题中犯了一个错误。在数据文件中，第一个字符并不总是 1，它们是 1、2 和 3 的混合。所以，从这个问题的所有答案中，我想出了解决方案——

```
:%s/^\([1-3]\),\(.*\)/\2,\1/g 
```

它现在正在工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:43:33.040

一个不关心您使用的数字、数字或分隔符的正则表达式。也就是说，这适用于将两者都`1`作为第一个数字的行，或者`114`：

```
:%s/\([0-9]*\)\(.\)\(.*\)/\3\2\1/ 
```

**解释：**

```
:%s//           - Substitute every line (%)
\(<something>\) - Extract and store to \n
[0-9]*          - A number 0 or more times
.               - Every char, in this case,
.*              - Every char 0 or more times
\3\2\1          - Replace what is captured with \(\) 
```

**所以：**分别切`1` `,` `<the rest>`到和`\1`，然后重新排序。`\2``\3`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T04:45:43.797

这个

```
:%s/^1,//
:%s/$/,1/ 
```

可能更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T04:32:21.770

```
:%s/^1,\(.*\)/\1,1/ 
```

这将对文件中的每一行进行替换。`\1`替换由`(.*)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T04:38:48.383

```
:%s/1,\(.*$\)/\1,1/gc 
```

…………………………………………………………………………………………………………

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T07:27:31.263

您也可以使用宏来解决这个问题。首先，考虑如何`1,`从行首删除并附加到行尾：

```
0 go the the start of the line
df, delete everything to and including the first ,
A,<ESC> append a comma to the end of the line
p paste the thing you deleted with df,
x delete the trailing comma 
```

因此，总而言之，以下将转换一行：

```
0df,A,<ESC>px 
```

现在，如果您想将这组修改应用于所有行，您首先需要记录它们：

```
qj start recording into the 'j' register
0df,A,<ESC>px convert a single line
j go to the next line
q stop recording 
```

最后，您可以随时使用 执行宏`@j`，或转换整个文件`99@j`（如果行数超过 99，则使用大于 99 的数字）。

这是完整的版本：

```
qj0df,A,<ESC>pxjq99@j 
```

如果您不习惯正则表达式，这可能比其他解决方案更容易理解！

# python - 为什么这个 TFIDF 代码对所有单词输出 0 频率？

> ID：16139464
> 
> 赞同：2
> 
> 时间：2013-04-22T04:29:47.773
> 
> 标签：python, text, classification

我从 yebrahim 那里得到了这个[tfidf](https://github.com/yebrahim/TF-IDF-Generator/blob/master/tfidf.py)，不知何故，我的输出文档为结果产生了所有 0。这有什么问题吗？输出的例子是 hippo 0.0 hipper 0.0 hip 0.0 hint 0.0 后见之明 0.0 hill 0.0 hilarious 0.0

谢谢您的帮助

```
 # increment local count
    for word in doc_words:
        if word in terms_in_doc:
            terms_in_doc[word] += 1
        else:
            terms_in_doc[word]  = 1

    # increment global frequency
     for (word,freq) in terms_in_doc.items():
        if word in global_term_freq:
            global_term_freq[word] += 1
        else:
            global_term_freq[word]  = 1

     global_terms_in_doc[f] = terms_in_doc

print('working through documents.. ')
for f in all_files:

    writer = open(f + '_final', 'w')
    result = []
    # iterate over terms in f, calculate their tf-idf, put in new list
    max_freq = 0;
    for (term,freq) in global_terms_in_doc[f].items():
        if freq > max_freq:
            max_freq = freq
    for (term,freq) in global_terms_in_doc[f].items():
        idf = math.log(float(1 + num_docs) / float(1 + global_term_freq[term]))
        tfidf = float(freq) / float(max_freq) * float(idf)
        result.append([tfidf, term])

    # sort result on tfidf and write them in descending order
    result = sorted(result, reverse=True)
    for (tfidf, term) in result[:top_k]:
        if display_mode == 'both':
            writer.write(term + '\t' + str(tfidf) + '\n')
        else:
            writer.write(term + '\n') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:18:44.610

tf-idf 的输出显然取决于您正确计算术语。如果你弄错了，那么结果将出乎意料。您可能希望输出每个单词的原始计数来验证这一点。例如，单词“hipp”在当前文档和整个集合中出现了多少次？

其他一些指针：

*   不要使用显式浮点数进行除法，而是使用[`from __future__ import division`](http://www.python.org/dev/peps/pep-0238/). 它使您的代码更具可读性。
*   使用 collections.defaultdict 将字典与计数器结合起来。这避免了在增加它之前必须检查一个值是否已经存在。如果你不喜欢 defaultdict，那么使用 try-catch 块——它比使用 if 语句[更快。](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Initializing_Dictionary_Elements)
*   不要遍历`items()`字典。它创建了一个全新的（键、值）对列表，并带来了巨大的计算和存储复杂性损失。遍历字典的键 ( `for k in some_dictionary`) 并使用普通索引来访问值 ( `some_dictionary[k]`)。
*   [您不需要 for 循环](http://docs.python.org/2/library/functions.html#max)来计算 Python 中列表的最大值。

上述提示可能无法直接解决您的问题，但它们将使您的代码更易于阅读和理解（对于您和 SO 上的人），从而更容易定位和解决问题。

# c# - 如何将没有分隔符的文本文件行放入数组

> ID：16139468
> 
> 赞同：0
> 
> 时间：2013-04-22T04:30:29.070
> 
> 标签：c#

我有一个文本文件，我试图将它输入到一个名为列的数组中。文本文件中的每一行都属于我创建的子类中的不同属性。

例如，我的文本文件中的第 2 行是我想忽略的日期...我不想使用拆分，因为我没有分隔符，但我不知道替代方案。如果有人可以提供帮助，我不完全理解以下内容。当我尝试运行它时，它说 columns[1] 超出了它的范围......谢谢。

```
StreamReader textIn = 
    new StreamReader(
    new FileStream(path, FileMode.OpenOrCreate, FileAccess.Read));

//create the list
List<Event> events = new List<Event>();

while (textIn.Peek() != -1)
{
    string row = textIn.ReadLine();
    string[] columns = row.Split(' ');
    Event special = new Event();
    special.Day = Convert.ToInt32(columns[0]);
    special.Time = Convert.ToDateTime(columns[1]);
    special.Price = Convert.ToDouble(columns[2]);
    special.StrEvent = columns[3];
    special.Description = columns[4];
    events.Add(special);
} 
```

输入文件示例：

```
1
8:00 PM
25.00
贝多芬第九交响曲
聆听路德维希·范·贝多芬的第九部也是最后一部杰作。
2
下午 6:00
15.00
棒球比赛
快来观看冠军球队打他们的劲敌——保证不会停工。

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:06:31.813

好吧，一种方法（虽然它有点难看）是使用`File.ReadAllLines`，然后循环遍历数组，如下所示：

```
string[] lines = File.ReadAllLines(path);

int index = 0;

while (index < lines.Length)
{

    Event special = new Event();
    special.Day = Convert.ToInt32(lines[index]);
    special.Time = Convert.ToDateTime(lines[index + 1]);
    special.Price = Convert.ToDouble(lines[index + 2]);
    special.StrEvent = lines[index + 3];
    special.Description = lines[index + 4];
    events.Add(special);

    lines = lines + 5;
} 
```

这是非常脆弱的代码——很多东西都会破坏它。如果其中一个事件缺少一行怎么办？如果里面有多个空行怎么办？如果其中一个 Convert.Toxxx 方法抛出错误怎么办？

如果您可以选择更改文件的格式，我强烈建议您至少将其分隔。如果您无法更改格式，则需要使上面的代码示例更加健壮，以便它可以处理空行、转换失败、缺少行等。

使用分隔文件要容易得多。更容易使用 XML 或 JSON 文件。

**分隔文件 (CSV)**

假设您有相同的示例输入，但这次是 CSV 文件，如下所示：

```
1,8:00 PM，25.00，“贝多芬第九交响曲”，“聆听路德维希·范·贝多芬的第九首也是最后一首杰作。”
2,6:00 PM,15.00，“棒球比赛”，“来看看冠军球队打他们的劲敌——保证不会停工”

```

我在最后两项上加上引号，以防其中有逗号，它不会破坏解析。

对于 CSV 文件，我喜欢使用[Microsoft.VisualBasic.FileIO.TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类，尽管它的名称可以在 C# 中使用。不要忘记添加对 Microsoft.VisualBasic 的引用和 using 指令 ​​( `using Microsoft.VisualBasic.FileIO;`)。

以下代码将允许您解析上述 CSV 示例：

```
using (TextFieldParser parser = new TextFieldParser(path))
{

    parser.Delimiters = new string[] {","};
    parser.TextFieldType = Delimited;
    parser.HasFieldsEnclosedInQuotes = true;
    string[] parsedLine;

    while (!parser.EndOfData)
    {
        parsedLine = parser.ReadFields();

        Event special = new Event();
        special.Day = Convert.ToInt32(parsedLine[0]);
        special.Time = Convert.ToDateTime(parsedLine[1]);
        special.Price = Convert.ToDouble(parsedLine[2]);
        special.StrEvent = parsedLine[3];
        special.Description = parsedLine[4];
        events.Add(special);    
    }
} 
```

不过，这仍然存在一些问题 - 您需要处理缺少字段的情况，我建议使用`TryParse`方法而不是 Convert.Toxxx，但它比非定界示例更容易（我认为）。

**XML 文件（使用 LINQ to XML）**

现在让我们尝试使用 XML 文件并使用 LINQ to XML 获取数据：

```
<Events>
  <Event>
    <Day>1</Day>
    <Time>8:00 PM</Time>
    <Price>25.00</Price>
    <Title><![CDATA[Beethoven's 9th Symphone]]></Title>
    <Description><![CDATA[Listen to the ninth and final masterpiece by Ludwig van Beethoven.]]></Description>
  </Event>
  <Event>
    <Day>2</Day>
    <Time>6:00 PM</Time>
    <Price>15.00</Price>
    <Title><![CDATA[Baseball Game]]></Title>
    <Description><![CDATA[Come watch the championship team play their archrival--No work stoppages, guaranteed]]></Description>
  </Event>
</Events> 
```

我使用 CDATA 作为标题和描述，这样特殊字符就不会破坏 XML 解析。

这很容易通过以下代码解析到您的事件中：

```
XDocument doc = XDocument.Load(path);

List<Event> events = (from x in doc.Descendants("Event")
                     select new Event {
                                Day = Convert.ToInt32(x.Element("Day").Value),
                                Time = Convert.ToDateTime(x.Element("Time").Value),
                                Price = Convert.ToDouble(x.Element("Price").Value),
                                StrEvent = x.Element("Title").Value,
                                Description = x.Element("Description").Value
                     }).ToList(); 
```

当然，这仍然不是完美的，因为您仍然有可能转换失败或缺少元素。

**管道分隔文件示例**

根据我们在评论中的讨论，如果您想使用管道 ( `|`)，您需要将每个事件（全部）放在一行中，如下所示：

```
1|8:00 PM|25.00|贝多芬第九交响曲|聆听路德维希·凡·贝多芬的第九部也是最后一部杰作。
2|6:00 PM|15.00,|棒球比赛|来观看冠军球队打他们的劲敌--保证不会停工

```

如果您愿意，您仍然可以使用`TextFieldParser`上面的示例（只需将分隔符从 更改`,`为`|`，或者如果您愿意，您可以使用原始代码。

**最后的一些想法**

我还想解决原始代码并说明它为什么不起作用。主要原因是您一次读取一行，然后在“ ”上拆分。如果所有字段都在同一行上，这将是一个好的开始（尽管由于 Time、StrEvent 和 Description 字段中的空格仍然会出现问题），但事实并非如此。

因此，当您阅读第一行（即`1`）并在“ ”上拆分时，您会得到一个值（`1`）。当您尝试访问拆分数组的下一个元素时，您得到了索引超出范围错误，因为该行没有列 [1]。

本质上，您试图将每一行视为其中包含所有字段，而实际上每行一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:58:22.853

对于您给定的示例文件，例如

```
string[] lines = File.ReadAllLines(path);

for (int index = 4; index < lines.Length; index += 5)
{
    Event special = new Event();
    special.Day = Convert.ToInt32(lines[index - 4]);
    special.Time = Convert.ToDateTime(lines[index - 3]);
    special.Price = Convert.ToDouble(lines[index - 2]);
    special.StrEvent = lines[index - 1];
    special.Description = lines[index];
    events.Add(special);
} 
```

可以完成这项工作，但就像蒂姆已经提到的那样，您应该考虑更改文件格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:47:12.500

如果您的侧列值没有与字符相交或具有固定大小，则可以删除分隔符。通过这种情况，您可以读取文件并在其上拆分字段。
如果您想从文件中读取数据并将数据自动加载到变量中，我建议将变量序列化和反序列化到文件，但该文件不是文本文件！

# python - 正则表达式替换第一个和最后一个字符除外

> ID：16139471
> 
> 赞同：3
> 
> 时间：2013-04-22T04:31:19.510
> 
> 标签：python, regex, replace

什么是用转义反斜杠后跟双引号 (\") 替换字符串中的双引号 (") 的正则表达式，但字符串的第一个和最后一个字符除外。

示例 1：嵌入在字符串中的双引号

```
Input: "This is a "Test""
Expected Output: "This is a \"Test\"" 
```

示例 2：字符串中间没有双引号

```
Input: "This is a Test"
Expected Output: "This is a Test" 
```

当我在 python 中执行 `re.sub()`操作时，包括第一个和最后一个双引号字符在内的所有内容都将被替换。在我上面的示例中，输出字符串变为：\"This is a Test\"。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:14:08.390

我不了解你，但我会以简单的方式做到这一点：

```
'"{}"'.format(s[1:-1].replace('"',r'\"')) 
```

当然，这做了一大堆假设——最强的是第一个和最后一个字符总是双引号......

也许这会好一点：

```
'{0}{1}{2}'.format(s[0],s[1:-1].replace('"',r'\"'),s[-1]) 
```

它保留第一个和最后一个字符并转义中间的所有双引号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T05:11:03.867

正如@mgilson 所指出的，您可以将第一个和最后一个字符切掉，所以这个正则表达式基本上没有意义

```
>>> print re.sub(r'(?<!^)"(?!$)', '\\"', '"This is a "Test""')
"This is a \"Test\""
>>> print re.sub(r'(?<!^)"(?!$)', '\\"', '"This is a Test"')
"This is a Test" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T05:03:35.227

不幸的是，我认为你不能用一个正则表达式来做到这一点。不过，您可以使用三个正则表达式来伪造它。

```
>>> x = '"This is "what" it is"'
>>> print x
"This is "what" it is"
>>> x = re.sub(r'"',r'\\"',x)
>>> print x
\"This is \"what\" it is\"
>>> x = re.sub(r'^\\"','"',x)
>>> print x
"This is \"what\" it is\"
>>> x = re.sub(r'\\"$','"',x)
>>> print x
"This is \"what\" it is" 
```

第一个正则表达式将所有引号更改为转义引号。

第二个正则表达式将前导引号改回（如果不存在前导引号则无效）。

第三个正则表达式将尾随引号更改回来（如果不存在尾随引号则无效）。

# mysql - Mysql：将复制内容插入另一个表并从触发表中删除行后触发

> ID：16139476
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:31:36.180
> 
> 标签：mysql, triggers

在这里，我想将 X 表的内容复制到 Y 表中，并且在同一行上，我想从 X 表中删除该行。我按以下方式尝试了它，但它不起作用。

```
Drop trigger if exists myTrigger;

delimiter |
create trigger myTrigger 
after insert on X 
for each row
BEGIN
    IF STRCMP(NEW.SysLogTag,"kernel:") = 0 THEN
        INSERT INTO Y(logtime,moduleid,severity,messageid,message) values(NULL,1,1,100,NEW.Message);
    ELSEIF NEW.SysLogTag like 'ntpd[%]:' THEN
        INSERT INTO Y(logtime,moduleid,severity,messageid,message) values(NULL,6,1,100,NEW.Message);
    ELSE
         INSERT INTO Y(logtime,moduleid,severity,messageid,message) values(NULL,4,1,100,NEW.Message);
    END IF;
    delete from X where ID=NEW.ID; //Not working.
END;|
delimiter ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:25:54.183

来自[http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html#c8808](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html#c8808)：

我的解决方案是在要插入的表上创建一个唯一/主键（在本例中为 S_ID），然后如果我的完整性检查失败，我将 s_id 更改为 0。此方法只会创建一个带有s_id 为 0。显然你需要 INSERT 忽略！

```
CREATE TRIGGER sanityCheck
BEFORE INSERT ON my_table
FOR EACH ROW
BEGIN
IF something THEN
SET NEW.S_ID = 0 ;
END IF;
END; 
```

# c# - 如何使用 Asp.net 在树视图中动态添加根节点

> ID：16139479
> 
> 赞同：1
> 
> 时间：2013-04-22T04:31:43.640
> 
> 标签：c#, asp.net, datatable, treeview

我想将 DataTable 绑定到 TreeView。我编写了以下代码。它目前正在工作，意味着它显示了 DataTable 的所有数据但没有根节点。

```
 List<DocumentData> lstData = GetSPDocuments();
    gvDocuments.DataSource = lstData;
    gvDocuments.DataBind();

    DataTable dt = ConvertToDataTable(lstData);

    TreeNode node1 = new TreeNode("Root");

    foreach (DataRow r in dt.Rows)
    {
        int nodeLvl = int.Parse(r["ID"].ToString());
        string nodeParent = "Folders";
        string nodeName = r["Title"].ToString();

        TreeNode tNode = new TreeNode(nodeName);

        ht.Add(nodeLvl.ToString() + nodeName, tNode);

        if (tvDocs.Nodes.Count == 0)
            tvDocs.Nodes.Add(tNode);
        else
        {
            nodeLvl--;
            tvDocs.Nodes.Add(tNode);               
        }
    } 
```

如何在此处添加静态根节点？？？请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:40:48.877

Try this may be it can help you.

```
 protected void Page_Load(object sender, EventArgs e)
    {
        conStr = ConfigurationManager.ConnectionStrings["conString"].ConnectionString;
        conn = new OleDbConnection(conStr);
        BindTreeViewControl();
    }

    private void BindTreeViewControl()
    {
        try
        {
            DataSet ds = GetDataSet("Select ProductId,ProductName,ParentId from ProductTable");
            DataRow[] Rows = ds.Tables[0].Select("ParentId = 0"); 

            for (int i = 0; i < Rows.Length; i++)
            {
                TreeNode root = new TreeNode(Rows[i]["ProductName"].ToString(), Rows[i]["ProductId"].ToString());
                root.SelectAction = TreeNodeSelectAction.Expand;
                CreateNode(root, ds.Tables[0]);
                treeviwExample.Nodes.Add(root);
            }
        }
        catch (Exception Ex) { throw Ex; }
    }

    public void CreateNode(TreeNode node, DataTable Dt)
    {
        DataRow[] Rows = Dt.Select("ParentId =" + node.Value);
        if (Rows.Length == 0) { return; }
        for (int i = 0; i < Rows.Length; i++)
        {
            TreeNode Childnode = new TreeNode(Rows[i]["ProductName"].ToString(), Rows[i]["ProductId"].ToString());
            Childnode.SelectAction = TreeNodeSelectAction.Expand;
            node.ChildNodes.Add(Childnode);
            CreateNode(Childnode, Dt);
        }
    }
    private DataSet GetDataSet(string Query)
    {
        DataSet Ds = new DataSet();
        try
        {
            OleDbDataAdapter da = new OleDbDataAdapter(Query, conn);
            da.Fill(Ds);
        }
        catch (Exception dex) { }
        return Ds;
    } 
```

and database structure for this is

![enter image description here](https://i.stack.imgur.com/TIeME.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:55:16.543

```
// Suppress repainting the TreeView until all the objects have been created.
treeView1.BeginUpdate();

// Clear the TreeView each time the method is called.
treeView1.Nodes.Clear();

// create root node
TreeNode root = new TreeNode("Root");

// loop and add all child nodes to root node
foreach (DataRow r in dt.Rows)
{
    // create child node 
    // add to root node 
     root.Nodes.Add(child);
}

// add root node to tree view
treeView1.Nodes.Add(root);

// Begin repainting the TreeView.
treeView1.EndUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T19:59:14.700

你有没有得到这个答案？你快到了。

**TreeView**控件的名称是什么？既然您从未说过，我正在使用`treeView1`，并修改了您的代码以包含以下内容：

```
private TreeView treeView1;

private void TreeView_DataBind() {

  treeView1.Nodes.Clear();

  List<DocumentData> lstData = GetSPDocuments();
  gvDocuments.DataSource = lstData;
  gvDocuments.DataBind();

  DataTable dt = ConvertToDataTable(lstData);

  TreeNode node1 = new TreeNode("Root");

  treeView1.Nodes.Add(node1); // this is the step you missed

  foreach (DataRow r in dt.Rows)
  {
    int nodeLvl = int.Parse(r["ID"].ToString());
    string nodeParent = "Folders";
    string nodeName = r["Title"].ToString();

    TreeNode tNode = new TreeNode(nodeName);

    ht.Add(nodeLvl.ToString() + nodeName, tNode);

    if (tvDocs.Nodes.Count == 0)
      tvDocs.Nodes.Add(tNode);
    else
    {
      nodeLvl--;
      tvDocs.Nodes.Add(tNode);               
    }
  }

  node1.Expand();

} 
```

十分简单！

# ruby-on-rails - 我的参数中的反斜杠

> ID：16139481
> 
> 赞同：1
> 
> 时间：2013-04-22T04:32:19.410
> 
> 标签：ruby-on-rails, ruby

***更新：***我已将问题缩小到 cucumber-rails gem 做一些时髦的事情。它适用于版本 0.4.1，但除此之外，我得到下面提到的错误。仍然不知道为什么。我已经完成了 gem 的全新安装，但无济于事。

我的参数有问题，包括无关内容。

一个黄瓜测试提交表单，有隐藏字段

```
<% if @collection.new_record? && current_user.pseuds.size > 1 %>
  <dt><%= label_tag "owner_pseuds[]", ts("Owner Pseud(s):") %></dt>
  <dd><%= select_tag "owner_pseuds[]", options_from_collection_for_select(current_user.pseuds, :id, :name, current_user.default_pseud), :multiple => true %></dd>
<% else %>
  <p><%= hidden_field_tag "owner_pseuds[]", [current_user.default_pseud.id] %></p>
<% end %> 
```

当我使用“Rails.logger.debug”时，它显示我的 owner_pseud ID 为 5。但是当表单被 POST 时，它显示如下。

```
Started POST "/collections" for 127.0.0.1 at 2013-04-22 05:01:57 +0100
  Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"✓", "owner_pseuds"=>["[\"5\"]"], "collection"=>{"name"=>"collection1", ... 
```

我最终得到：找不到 ID=["5"] 的 Pseud (ActiveRecord::RecordNotFound)

我正在使用 cucumber-rails (v. 1.3.1) 和 Capybara (v1.1.4)。

这是我正在处理的分支：[https](https://github.com/scottsds/otwarchive/compare/upgrade_capybara_1_1_4) ://github.com/scottsds/otwarchive/compare/upgrade_capybara_1_1_4 。谢谢你提供的所有帮助！

default_pseud 返回：#< Pseud:0x0000000a224070 >，这是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:39:22.780

You're putting your [current_user.default_pseud.id] into an array. Try it without the brackets, like this:

```
<p><%= hidden_field_tag "owner_pseuds[]", current_user.default_pseud.id %></p> 
```

and currrent_user.default_pseud.id will be evaluated as a string, which seems like what you want.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:37:31.173

你为什么在括号中指定你的 pseud-id ？我认为这就是问题所在，因为 Rails 试图保留单字符串数组格式。

试试这个，伪 ID*不在*括号中：

```
<p><%= hidden_field_tag "owner_pseuds[]", current_user.default_pseud.id %></p> 
```

这假设 default_pseud.id 不会是一个数组，从查看您的代码来看，我认为这是一个正确的假设。

# javascript - 我如何从 jquery 中的“aaa-23-34”中获取类似“aaa-23”的字符串？

> ID：16139482
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:32:21.043
> 
> 标签：javascript

例如-1：我有像“aaa-23-34”这样的字符串，我想要这个字符串是“aaa-23”

例如-2：`var str = "aaa-44-34-12"`

输出应该是`"aaa-44-34"`

这意味着我想要最后一个连字符之前的字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T04:33:58.020

基本字符串操作：

```
> "aaa-44-34-12".split('-').slice(0, -1).join('-')
"aaa-44-34" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:45:41.127

尝试一个简单的正则表达式

```
"aaa-23-34".replace(/-\d+$/, ''); 
```

前任：

```
var str = "aaa-44-34-12";
var txt = str.replace(/-\d+$/, ''); 
```

# ipad - 带有 corePlot 库的项目无法在 iPad 中运行

> ID：16139498
> 
> 赞同：0
> 
> 时间：2013-04-22T04:34:03.393
> 
> 标签：ipad, ios6, core-plot, ios5.1

我必须继续另一个开发人员开发的项目。他使用`CorePlot`库来绘制图表。我可以在我的模拟器中运行这个项目而没有任何问题。但是当我尝试在 iPad 上运行它时，它给出了以下错误。

`ld：文件是通用的（3 个切片）但不包含一个（n）armv7s 切片：/Projects/iOS/iPad/HCM_IPAD_Original/21:4:2013mHCM_iPad_1_25/mHCM/libCorePlot-CocoaTouch.a 用于架构 armv7s collect2：ld 返回1 退出状态命令 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2 失败，退出代码为 1

我的 Xcode 是 4.5，iOS 6.0 我的 iPad 是 iPad 1 和 iOS 5.1.1

这是什么原因以及我该如何解决这个问题。请任何人都可以帮助我。

谢谢`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:39:27.740

最后我找到了解决方案。

[http://code-ninja.org/blog/2012/10/05/xcode-4-5-and-file-is-universal-2-slices-but-does-not-contain-an-armv7s-slice/](http://code-ninja.org/blog/2012/10/05/xcode-4-5-and-file-is-universal-2-slices-but-does-not-contain-an-armv7s-slice/)

# php - 使用 php 发送电子邮件的 Textarea 新行

> ID：16139499
> 
> 赞同：1
> 
> 时间：2013-04-22T04:34:09.360
> 
> 标签：php, email, textarea, phpmailer

我正在使用 PHPMailer 发送邮件，我有 textarea 作为邮件正文。所以当我写文本时我需要换行但是当我换行时它不起作用，当文本丰富到邮件时，它仍然只显示一个线。我的PHP代码如下：

```
<?php

if(isset($_POST['submit'])){
    require_once('class.phpmailer.php');        
    $mail  = new PHPMailer(); // defaults to using php "mail()" 
    $body = str_replace ('<br>' , '\r\n', $_POST['about']); // $_POST['about'] is the value text take from the body text area of mail
    //$body = $_POST['about'];
    $from  = $_POST['from'];    
    $mail->AddReplyTo($from,$from);     
    $mail->SetFrom($from, $from);       
    $mail->AddReplyTo($from,$from);

    $address = $_POST['email'];
    $mail->AddAddress($address, $address);      
    $mail->Subject  = $_POST['subject'];

    $mail->AltBody  = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test     
    $mail->MsgHTML($body);      
    if(!$mail->Send()) {
      echo "Mailer Error: " . $mail->ErrorInfo;
    } else {
      echo "Message envoy&eacute;!";
    }
}   
?> 
```

请哪位帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:15:14.333

查看 PHP 的 nl2br() 函数。我相信这就是您正在寻找的：

[http://ca3.php.net/manual/en/function.nl2br.php](http://ca3.php.net/manual/en/function.nl2br.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:22:58.517

我认为应该是

```
$body = str_replace ('\r\n' , '<br>' , $_POST['about']); 
```

`\r\n`应该替换为`<br>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:25:13.243

只需使用，

```
$body = nl2br ($_POST['about']); 
```

当然，您要将其保存到 mysql 数据库中，因此对于该用途，

```
$body = mysql_real_escape_string ( nl2br ($_POST['about']) ); 
```

这里请注意，`$body = nl2br ( mysql_real_escape_string ($_POST['about']) );`将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T20:19:57.567

为什么要让这比需要的更难？

```
//here is the pull from the form
$your_form_text = $_POST['your_form_text'];

 //line 1 fixes the line breaks - line 2 the slashes
$your_form_text = nl2br($your_form_text);
$your_form_text = stripslashes($your_form_text);

//email away
$message = "Comments: $your_form_text";
mail("destination_email@whatever.com", "Website Form Submission", $message, $headers); 
```

您显然需要标题并且可能有更多字段，但这是您的文本区域。

# asp.net-mvc-3 - ASP.NET MVC3 会话变量不可访问

> ID：16139501
> 
> 赞同：1
> 
> 时间：2013-04-22T04:34:13.810
> 
> 标签：asp.net-mvc-3, session

我有两个控制器`Login`和`Account`控制器。登录验证后，我将值设置为`Session["username"]`并使用 .重定向到`Account`控制器的索引页面`Response.Redirect("../Account")`。我需要访问Controller页面`Session["Username"]`上的值。我在视图上使用但未显示值。`index``Account``@Session["Username"]`

重定向是否会导致会话变量的处置？

```
 public void LoginVerify(UserModel usermodel)
    {

        var dbContext = new db_restproEntities(); //class derived from DbContext
        var usernames = from username in dbContext.tbl_login select username; //read data

        List<tbl_login> users = dbContext.tbl_login.ToList();
        bool active = false;
        foreach (var x in users)
        {
            if (x.username == usermodel.username && x.password == usermodel.password)
            {
                if (x.active == true)
                {
                    active = true;
                    Session["Message"] = "";
                    Session["session_username"] = x.username;
                    Session["status"] = "TRUE";
                    Session["userid"] = x.user_id;
                     Response.Redirect("../" + x.role);

                }

            }

        }
        Session["Message"] = "Invalid Login Details";
        Response.Redirect("../Login");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:20:44.660

根据我在此应用程序上的经验，重定向导致了问题。

我将登录验证方法的返回类型从 void 更改为操作结果，并将 Response.Redirect("../"+x.role) 替换为 return RedirectoAction("Index",x.role)

会话变量现在已创建并显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:51:42.027

使用下面的代码来显示

```
<span>
  @HttpContext.Current.Session["username"].ToString()
</span> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T06:36:30.693

> 重定向是否会导致会话变量的处置？

不。

# asp.net-mvc - 带有参数的 URL 路由在 MVC 中不起作用

> ID：16139503
> 
> 赞同：0
> 
> 时间：2013-04-22T04:34:23.730
> 
> 标签：asp.net-mvc, asp.net-mvc-4, url-rewriting

这是我的操作链接

```
 @Html.ActionLink(item1.TranslatedName,"Index","Properties",new { CategoryId=item1.CategoryId,CategoryName=item.CategoryName},null) 
```

当前生成的 url 是 [http://abc.com/Properties/?CategoryId=1&CategoryName=Banken](http://abc.com/Properties/?CategoryId=1&CategoryName=Banken) 它也不会调用控制器的索引视图。如果我手动将 url 更改为
[http://abc.com/Properties /Index?CategoryId=1&CategoryName=Banken](http://abc.com/Properties/Index?CategoryId=1&CategoryName=Banken) 有效

我为此定义的路线是

```
 routes.MapRoute(
            "Properties", // Route name
            "{controller}/{action}/{CategoryId}/{CategoryName}", // URL with parameters
                new { controller = "Properties", action = "Index" }, // Parameter defaults
            new { CategoryId = @"\d+", CategoryName = @"\d+" }
        ); 
```

谁能告诉我我做错了什么？

我需要显示的 URL 是 [http://abc.com/Properties/Banken](http://abc.com/Properties/Banken) 基本上我想隐藏类别 ID 并显示 categoryName

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:47:14.210

如果你想要它像 Properties/Banken，你应该将你的 index 动作重命名为 banken 动作，我也不确定你是否可以隐藏 id

# ruby-on-rails-3 - Rails 3 中的 belongs_to 和 has_many

> ID：16139518
> 
> 赞同：0
> 
> 时间：2013-04-22T04:35:54.387
> 
> 标签：ruby-on-rails-3, class

我需要一些帮助。我有 2 节课：

**共享信息**

```
class SharedInfo < ActiveRecord::Base
  attr_accessible :shared_info_type_id, :severity_id, :source_info_id, :created_date
  belongs_to :Severity, :foreign_key => :severity_id
  belongs_to :SharedInfoType, :foreign_key => :shared_info_type_id
  belongs_to :SourceInfo, :foreign_key => :source_info_id
end 
```

**严重性**

```
class Severity < ActiveRecord::Base  
  has_many :SharedInfo, :foreign_key => :severity_id  
end 
```

**问题是：**
我有一个 class`@sharedinfo`实例`SharedInfo`。当我调用以下语句时：

```
@sharedinfo.Severity 
```

它返回一个错误：“未定义”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:00:15.203

你已经使用了`camelized`类。您需要将它们替换为`underscore`.

```
belongs_to :severity, :foreign_key => :severity_id
belongs_to :shared_info_type, :foreign_key => :shared_info_type_id
belongs_to :source_info, :foreign_key => :source_info_id 
```

高温高压

# hibernate - 集合不知道 FetchMode

> ID：16139519
> 
> 赞同：0
> 
> 时间：2013-04-22T04:36:00.353
> 
> 标签：hibernate, grails, grails-orm, hibernate-criteria

我有以下域关系：

```
A hasMany = [bs: B]
B belongsTo = [a:A, c:C]
C hasMany = [bs: B] 
```

当我在 a `Thread.start {}`all 中执行以下查询时（我可以在以集合作为参数调用的方法中访问整个集合）：

```
def aList = A.withCriteria {
    fetchMode('bs', FetchMode.JOIN)
    fetchMode('bs.c', FetchMode.JOIN)
    isNotNull('property')
} 
```

但是，如果我像这样过滤`bs`集合：

```
def aList = A.withCriteria {
    fetchMode('bs', FetchMode.JOIN)
    fetchMode('bs.c', FetchMode.JOIN)
    isNotNull('property')
    bs {
        eq('property', C.get(1))
    }
} 
```

我`failed to lazily initialize a collection of role: A.bs, no session or session was closed`在尝试访问时得到`aList.bs`. 难道我做错了什么？在这两种情况下都会生成相同的 SQL...

# windows-7 - Windows 7 中 setx 命令的位置是什么？

> ID：16139520
> 
> 赞同：5
> 
> 时间：2013-04-22T04:36:02.870
> 
> 标签：windows-7, command-line, environment-variables

我不小心删除了 Windows 中的 Path 变量。但我有一份保存在文本文件中的副本。我无法从 Start->Computer->Properties->Advanced System Settings->Environment Variables 等修改 Path 变量，因为 Windows 找不到 systempropertiesadvanced.exe（因为路径为空）。所以我想使用 cmd.exe 中的 setx 命令设置路径。但是我收到 setx 不是可识别命令的错误（可能是因为路径为空）。那么 Windows 7 中的 setx 命令通常在哪里呢？另外，如果我在推理中遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T04:43:22.177

它位于`C:\Windows\System32`与 SystemPropertiesAdvanced.exe 相同的位置（在 64 位 Win7 上）。

# api - iTunes 搜索 API releaseDate 数据与 iTunes 商店中的曲目发布日期冲突

> ID：16139529
> 
> 赞同：2
> 
> 时间：2013-04-22T04:37:38.793
> 
> 标签：api, search, itunes

API 中有两个发布日期吗？我注意到 releaseDate 并不总是与 iTunes 中显示的内容匹配。

例如，10CC 在英国商店对 Dreadlock Holiday 进行 api 搜索，查看“Bloody Tourists”专辑显示发行日期为 2002-07-15T07:00:00Z，但商店显示 1978 年 9 月（后者是正确的）。

[https://itunes.apple.com/search?term=dreadlock+holiday&country=GB](https://itunes.apple.com/search?term=dreadlock+holiday&country=GB)

还有其他日期可以访问吗？

# css - 我可以更改 CSS 中颜色的单个参数吗？

> ID：16139530
> 
> 赞同：0
> 
> 时间：2013-04-22T04:37:40.667
> 
> 标签：css, colors, rgb, rgba, hsl

当我在 Adob​​e Illustrator 中设计东西时，我喜欢选择一种颜色，然后玩弄它的亮度或饱和度，让自己成为“同族”的相似颜色。

在CSS中，你可以用这样的值来定义颜色：RGB、RGBA、HSL……既然你可以同时定义所有三个参数，我一直在想：有没有办法改变单个参数那些？

例如，假设我将三个链接定义为具有非常“漂亮”的颜色#FF0000、#00FF00 和#0000FF。是否有可能创建一个单一的 CSS 规则，上面写着“在所有链接悬停时，无论它们的颜色如何，将它们的亮度/亮度降低 10%”？

我也很想对 RGBA 颜色的 alpha 参数做同样的事情。我知道不加选择地影响所有颜色的唯一通用方法是 opacity 属性，但如果我只想影响背景，这就会变成一个问题。

这样的事情（仅影响 H、S 或 L）听起来很简单：如果您可以重新定义整个颜色，您不能再次采用相同的颜色并更改其中一个值吗？但问题是：有人想过真正做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:43:46.173

我建议研究 SASS 和 LESS，它可以为您完成此任务以及更多。

[http://coding.smashingmagazine.com/2011/09/09/an-introduction-to-less-and-comparison-to-sass/](http://coding.smashingmagazine.com/2011/09/09/an-introduction-to-less-and-comparison-to-sass/)

或者您可以使用 jQuery 来完成此操作，如此问题中所回答：

[使用 jquery/javascript 点击时增加 CSS 亮度颜色？](https://stackoverflow.com/questions/5833624/increase-css-brightness-color-on-click-with-jquery-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:49:18.137

您可以使用 rgba 值并调整不透明度来获得类似的效果。例如：

`color: rgba(0, 0, 0, 1.0);`

这代表纯黑色。括号中的最后一位数字会影响不透明度。您可以将其从 调整`1.0`为`0.5`以获得较浅的颜色（假设文本后面有浅色背景）。

当我懒得获取灰色阴影的特定十六进制值时，我经常这样做（但它也适用于任何颜色）。

# internet-explorer - 什么是 IE 中的 Quirks 模式？我们何时以及为什么在 Internet Explorer 中使用 Quirks 模式？

> ID：16139531
> 
> 赞同：1
> 
> 时间：2013-04-22T04:37:43.500
> 
> 标签：internet-explorer

我在开发工具中看到了 Quirks Mode，但我不明白它的用途。我为此做了很多谷歌；但没有成功。

它显示损坏的 HTML。它是 HTML 验证器还是请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:09:03.630

“Quirks Mode”是指浏览器尝试在与旧浏览器版本的兼容模式下工作。如果浏览器检测到该站点已针对早期版本的浏览器进行编码/优化，则会启动 Quirks 模式。

你写了你用谷歌搜索它并可能点击这篇文章，但如果你没有： [http ://en.wikipedia.org/wiki/Quirks_mode](http://en.wikipedia.org/wiki/Quirks_mode)

“（...）一些网络浏览器使用的一种技术，用于保持与为旧浏览器设计的网页的向后兼容性（...）”

如果你想要测试，试试这个小家伙（在 Firefox 和 Internet Explorer -9- 中都可以使用）：

```
<HTML>
<meta http-equiv="X-UA-Compatible" content="IE=6" />
</HEAD>
<BODY>
<script>
window.alert('You are in ' + (document.compatMode==='CSS1Compat'?'Standards':'Quirks') + ' mode.')
</script>
</BODY>
</HTML> 
```

将上面的代码复制粘贴到一个空白文本文件中，保存并重命名为 [anything].html，然后拖放到您的浏览器。它会显示一个消息框，告诉您浏览器处于怪癖模式。如果您删除元标记，保存文件并刷新浏览器页面，您将看到浏览器切换回标准模式。

可能有很多原因说 HTML 已损坏，但在您的情况下，一个很好的原因可能是您强制兼容旧的浏览器版本，但在您的代码中使用后来发明的技术。例如使用“canvas”元素 (HTML5) 并强制 IE6 兼容（这是一个旧浏览器，不理解 HTML5 元素）。

# php - 渲染 javascript 文件，同时使其作为静态文件可用

> ID：16139532
> 
> 赞同：0
> 
> 时间：2013-04-22T04:37:55.090
> 
> 标签：php, javascript, yii, rendering

我有一个从像“/js/someFile.js”这样的url访问的javascript文件。但是我希望 Yii 在请求时呈现 javascript 文件，以便我可以在其中包含相关数据，例如来自数据库表的解析列表。

我知道一种解决方案是让文件保持静态，并在初始化时从服务器请求数据，但是我希望不要这样做。

有谁知道如何在不将 JS 内联到当前视图中的情况下实现这一点？或者为什么这是一个糟糕的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:48:54.073

您可以拥有一个名为 js 或 javascript 的特殊控制器并调用它而不是调用静态 js 文件：

```
class JsController extends Controller{
   public function init() {
       header('Content-Type: application/javascript');
   }

   public function actionSome_action(){
      $this->render('some_action_view_file');
   }
} 
```

你甚至可以为它定义一个重写规则，这样你的 url 就可以有 .js 扩展名。

接下来，从您的控制器中说：

```
class SiteController extends Controller {
   public function actionIndex() {
      // register the script
      Yii::app()->clientScript->registerScriptFile($this->createUrl('js/some_action'));
      // do other things here...
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:36:40.230

您*可以*呈现 Twisted1919 所示的视图。但我确实认为通过 Yii 渲染 javascript 不是一个好主意。您的问题已经暗示，javascript 文件几乎是静态的。所以把它当作一个静态文件，这样你的网络服务器就可以更快地提供它。而且在客户端缓存这个文件更容易。

然后正如您建议的那样尝试以某种方式编写它，您只需将动态部分作为参数传递给您的javascript。不过，您不必像您暗示的那样从服务器请求该数据。您可以将配置内联添加到您的页面：

```
<?php
$data = json_encode(array(
    'userId'    => Yii::app()->user->id,
    'whatever'  => $someThing,
));
Yii::app()->clientScript->registerScriptFile('my.js');
Yii::app()->clientScript->registerScript(
    'initJs',
    "myJs.init($data)", 
    CClientScript::POS_READY
);
?> 
```

# html - 使用 HTML5 地理定位时的 GPS 冷启动延迟

> ID：16139533
> 
> 赞同：2
> 
> 时间：2013-04-22T04:37:59.583
> 
> 标签：html, google-maps, google-maps-api-3, geolocation, gps

我们有一个基于 HTML5 的网络应用程序，它需要不定期（最多几天）的 GPS 位置。该应用程序在陆地上使用时可以快速获得位置，那里有固定的 wifi 热点，或者根据所使用的平台，手机信号塔。

无论离岸（经常使用该应用程序的地方），唯一的数据连接是通过移动 WIFI 热点。它在获取任何位置时都存在无法接受的延迟，大概是因为它是通过 GPS 卫星而不是通过数据连接来获取 GPS 历书的。

在相同的环境中，谷歌地图等专用应用程序只需短暂延迟即可提供位置。事实上，在激活谷歌地图应用程序之后运行我们的网页，它工作得很好！

这与此处的另一个问题类似，“ [Gps On App only works after Using Google Maps](https://stackoverflow.com/questions/12646477/gps-on-app-only-works-after-using-google-maps) ”，但建议的解决方案只能作为应用程序使用，而不是 HTML5

有什么建议么？

# xml - XML Schema 中的引用元素

> ID：16139536
> 
> 赞同：1
> 
> 时间：2013-04-22T04:38:14.567
> 
> 标签：xml, xsd

W3Schools 站点通过在模式定义的开头定义类型并稍后在其他 complexTypes 中引用这些类型来描述对基本 XML 模式布局的改进。这是一个例子：

```
<xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<!-- definition of simple elements -->
<xs:element name="orderperson" type="xs:string"/>
<xs:element name="name" type="xs:string"/>
<xs:element name="address" type="xs:string"/>
<xs:element name="city" type="xs:string"/>
<xs:element name="country" type="xs:string"/>
<xs:element name="title" type="xs:string"/>
<xs:element name="note" type="xs:string"/>
<xs:element name="quantity" type="xs:positiveInteger"/>
<xs:element name="price" type="xs:decimal"/>

<!-- definition of complex elements -->
<xs:element name="shipto">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="name"/>
      <xs:element ref="address"/>
      <xs:element ref="city"/>
      <xs:element ref="country"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>

</xs:schema> 
```

我的理解是，通过有一个共同的地方来定义简单的元素和属性，这简化了模式的结构。

我的问题是 - 这不允许将定义的元素作为顶级元素放置在有效的 XML 文件中吗？例如，以下代码段对于架构是否有效：

```
<name>Foo</name>
<name>Bar</name>
<shipto>
  <name>...</name>
  <address>...</address>
  ...
</shipto> 
```

这似乎是与在模式定义中定义和引用元素的目的无关的意外行为。

任何人都可以就处理这种情况的最佳实践添加任何评论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:00:26.403

这不是无意的行为，而是有意的。XSD 的哲学是，如果

```
<a><b><c/></b></a> 
```

是有效的，那么一般来说

```
<b><c/></b> 
```

也是有效的：在有效文档中，每个片段都是有效的。

这可能不是您想要的，但它是 XSD 设计者想要的。收件人的责任不是说“我希望文档有效”，而是“我希望文档对元素 a 的声明有效”。（遗憾的是，某些模式处理器的 API 实际上不允许您这样说。）

# java - 数组 contains() 方法行为不端

> ID：16139538
> 
> 赞同：0
> 
> 时间：2013-04-22T04:38:30.647
> 
> 标签：java, arrays, string, contains

我有以下Java方法：

```
public boolean zonesAllAccountable(String messyZones)
{
    ArrayList<String> zonesAndLMS = getArrayListOfZones(messyZones);
    ArrayList<String> lmss = getArrayListOfLMSs(zonesAndLMS);
    for (LMSEntity lms : registeredLMSs) {
        if(!Arrays.asList(lmss).contains(lms.getLmsid()))
        {
            return false;
        }
    }
    return true;
} 
```

我要做的是确保ArrayList中的**所有字符串都****等于****一个或任何 LMSEntity 对象上的属性**。`lmss`**`lmsid`**

我**认为**以上内容应该可以帮助我实现这一目标，但它失败了`.contains()`。当我调试时，它不应该返回 false，但它确实如此！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:40:33.677

直接使用[`.contains()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#contains%28java.lang.Object%29)方法就可以了`ArrayList`。您还可以显式返回布尔结果，而不需要`return true`or `return false`。

```
for (LMSEntity lms : registeredLMSs) {
    return !lmss.contains(lms.getLmsid());
} 
```

# matlab - Collecting loop result from each loop cycle

> ID：16139540
> 
> 赞同：0
> 
> 时间：2013-04-22T04:38:40.880
> 
> 标签：matlab

I am currently writing the code in order to collect the average value for centroids coordinate inside a while loop for each video frame. For each loop cycle there will be only one average value as the output for each single frame. My objective is to collect all the average values and plot it out.

```
for object = 1:length(centroid);

        centX = centroid(1,object); 
        centY = centroid(2,object);    
        vidIn = step(htextinsCent, vidIn, [centY centX], [centY-6 centX-9]); %this line is for coordinate display purpose on each frame

end   

for object =   length(centroid)>0;   

        columncentroid=centroid';
        average=mean(columncentroid);
end 
```

I am having difficulty to list all the average values from all the frames at the end of code run.The earlier average value is replaced by latest value after each loop. Kindly advice me for appropiate steps. Thank you in advanced.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:48:06.697

要保持所有平均值，您可以编写：

```
average = []; %init average as empty
for object = length(centroid):-1:1;   

    columncentroid=centroid';
    average= [average mean(columncentroid(:,object))]; %add new average to the end of average array
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:54:19.793

看来您已经有一个 2xN 的质心值数组；您所要做的就是展示它们。如果你想得到所有值的平均值，你可以

```
average = mean(centroid'); 
```

这取第一个维度的平均值 - 在转置之后是第一列中的所有 X 值和第二列中的 Y 值。`average`在此操作之后应该是一个 2 元素行向量。

```
display(average); 
```

会告诉你值是什么。

看来这就是您想要的，并且您做的一切都是正确的（除了围绕它的那个莫名其妙的循环......）*。*如果这不是您需要的，请在您的问题中更清楚地解释！

# php - How can I get the intersection of rows within a table?

> ID：16139553
> 
> 赞同：0
> 
> 时间：2013-04-22T04:40:00.830
> 
> 标签：php, mysql, sql

I have a table with the following columns:

```
User_id, Key, Value 
```

In this table are records such as:

```
1, "first name", "Bob"  
2, "first name", "Mike"  
1, "last name", "Jones"  
2, "last name", "Carter" 
```

I want to get the user_id for a specific first and last name pair. How can I get a query to do this? For example, I want to get 1 if I query for Bob Jones

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:43:20.910

将表连接到自身：

```
SELECT t1.User_id
FROM myTable t1
JOIN myTable t2 ON t1.User_Id = t2.UserId
WHERE t1.Key = 'first name' AND t2.Key = 'last name'
AND t1.Value = "Bob" AND t2.Value = "Jones" 
```

或具有以下*串联*条件：

```
SELECT t1.User_id
FROM myTable t1
JOIN myTable t2 ON t1.User_Id = t2.UserId
WHERE t1.Key = 'first name' AND t2.Key = 'last name'
AND (t1.Value + ' ' + t2.Value) = "Bob Jones" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:51:03.057

这里有 2 个任务 1) 得到不同值的名字和姓氏

2) 得到具有相同 id 和 first =your_first+ last=your_last 的行

简单查询将是：

```
 select user_id from tab1 
 where 
   key="first name" and value=your_first 
   and 
   user_id in (select  user_id from tab1 where key="last name" and value=your_last) 
```

但我担心这会被mysql优化得不好

考虑到您的 user_id 有索引，最好的查询将是

```
select a.user_id from (
 select user_id from tab1 where key="first name" and value=your_first )
)a left join 
 (select  user_id from tab1 where key="last name" and value=your_last) as b
 on a.user_id=b.user_id where b.user_id is not null; 
```

如果您无法在上层（php？）脚本中获得 your_first/your_last name，您可以将其替换为

```
 SUBSTRING_INDEX(name,' ',1)

   SUBSTRING_INDEX(name,' ',2) 
```

# python - 了解 Python 3 中的类和方法

> ID：16139556
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:40:11.410
> 
> 标签：python, class, function, methods, self

好吧，在观看了很多关于课程的教程视频后，我仍然无法理解这些我必须做的作业。

我需要编写一个基本上做高牌的程序，这意味着我需要两张牌来面对，一张是花色和排名的赢家。

2-14 排名 (11=jack, 12=queen, 13=king, 14=ace)

1-4 花色（梅花、方块、红心、黑桃）

这就是我到目前为止所拥有的

```
 class Card:
        def __init__(self, inRank, inSuit):
        self.__rank = inRank
        self.__suit = inSuit 
```

有人可以在这里指出我正确的方向吗？我正在为如何开始这一点画空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:52:02.283

只是一个快速的旁注。Python会破坏名称以两个下划线开头的[类和实例变量。](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)我建议使用一个下划线（或根本不使用）。

回到你原来的问题。我的下一步是创建一个`faceoff`接受另一个卡片实例的方法。此方法可以返回获胜的卡片，也可以返回一个布尔值，让您知道来电者是否获胜。

例如：

```
def faceoff(self, other):
    # Compare self against other
    # ...

    # if self beats other
        return True
    return False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:52:18.703

您的课程很好，尽管我会删除属性中的下划线，因为您尚未实现任何用于比较对象的方法。我会定义一个`face_off`-function 将`card`对象作为参数并返回获胜者。如果我理解正确，您只需比较`rank`两张卡的属性并返回较高的值。然后将整个东西包裹在一个`if __name__ == '__main__'`块中。

您实际上甚至不需要为此的类，卡片可以是`dict`or `tuple`，但是如果您想要一个类，那么您可以为您的类定义[丰富的比较方法](http://docs.python.org/2/reference/datamodel.html#basic-customization)，以便您可以比较对象而不是属性。然后你可以利用 python 的内置函数，你`faceoff`可以返回`max(card_object_one, card_object_two)`. 默认情况下，这适用于字典和元组。

# python - Read csv, then enumerate

> ID：16139558
> 
> 赞同：4
> 
> 时间：2013-04-22T04:40:15.860
> 
> 标签：python, csv, enumerate

At the moment, I have a list directly in my code and am using enumerate so I can use the list index numbers for the user to select one of the items. Looks like this (just header row included)

```
fmpList = [['Date', 'ID', 'Plot No', 'Modified', 'Lat', 'Long']......
for item in enumerate(fmpList[]):            
    print "[%d] %s" % item 
```

This works well but I don't want to put the list in the function but rather to read the csv from file. The alternative I used to do this is...

```
import csv
with open ('fmpList.csv', 'rU') as csvfile: 
        next (csvfile, None)
        plotlist = csv.reader(csvfile, delimiter=',', dialect=csv.excel_tab)
        for row in enumerate (plotlist):
            print '[%s]' %(item[2]) 
```

This also works but I can't seem to combine the 2... read the csv file in, then enumerate to be able to have a selection based on index. Help would be greatly appreciated

EDIT: So now I've got working code as I wanted...

```
import csv
with open ('fmpList.csv', 'rU') as csvfile: 
        next (csvfile, None)
        plotlist = csv.reader(csvfile, delimiter=',', dialect=csv.excel_tab)
        for row in enumerate (plotlist):
            print '[%s]' %(item[2]) 
```

But the last line is not giving me column 2 only displayed. In fact, I'm after column 0 (the index no) and 2 (the plot name). [0] gives the first column...cool, but any number greater than 1 gives IndexError: ..out of range. Tried every combo but nothing works

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:04:28.183

`enumerate(...)`适用于任何可迭代的

```
import csv
with open ('fmpList.csv', 'rU') as csvfile: 
    next(csvfile, None) # skip header
    plotlist = csv.reader(csvfile, delimiter=',', dialect=csv.excel_tab)
    for i, row in enumerate(plotlist):
        print "[%d] %s" % (i, row) 
```

# powershell - How to execute a Powershell Commands from my linux system?

> ID：16139559
> 
> 赞同：0
> 
> 时间：2013-04-22T04:40:31.397
> 
> 标签：powershell

I want to administrate my Windows AD server from a Linux system. Currently I am trying with winrm ruby gem to execute powershell command from Linux system and it's works. winrm gem supports plaintext, Kerberos/GSSAPI, or SSL authentication. But now I am not able to configure the authentication with SSL. Please help me. Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:22:56.737

有一个[PowerShell Server](http://www.powershellserver.com/)，它可以从 SSH 连接到 Powershell。它应该正是您所需要的。

# concrete5 - 判断用户是否从块登录到 Concrete5 中的编辑/仪表板

> ID：16139563
> 
> 赞同：5
> 
> 时间：2013-04-22T04:40:48.077
> 
> 标签：concrete5

我正在编写一个块，并希望能够在查看块时判断用户是否登录到仪表板。我想应该有类似 isAdminArea() 或 isEditing() 但到目前为止我自己还没有找到它！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:44:16.330

如果您使用的是 Concrete5.6.0 或更高版本，您可以这样做：

```
global $cp;
$canViewToolbar = (isset($cp) && is_object($cp) && $cp->canViewToolbar());
if ($canViewToolbar) {
    //do something...
} 
```

如果您在主题模板或块视图中执行此操作，则可以省去很多垃圾，然后执行以下操作：

```
global $cp;
if ($cp->canViewToolbar()) {
    //do something...
} 
```

但是，如果您在包控制器中或在系统事件期间执行此操作，您将需要使用我的第一个示例（以确保存在全局“集合权限”对象）。

如果您运行的 Concrete5 版本早于 5.6，请使用以下代码：

```
global $cp;
$canViewToolbar = (isset($cp) && ($cp->canWrite() || $cp->canAddSubContent() || $cp->canAdminPage() || $cp->canApproveCollection()));
if ($canViewToolbar) {
    //do something...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T07:22:07.447

为了改进上述内容：虽然`global`它是 PHP 中的有效构造，但确实应该避免使用它。这是懒惰和危险的。C5架构中访问主动权限模型的正确方法是

```
$cp = new Permissions(Page::getCurrentPage());

if ($cp->canViewToolbar()) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T21:58:46.383

应该是这个

```
$u = new User();
if($u->IsLoggedIn()){
  //logged in
} 
```

如果它不起作用，在顶部你可能需要

`global $u`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T05:25:05.983

如果您只是对编辑模式感兴趣，这将起作用：

```
 <?php 
 if ($c->isEditMode()) { ?>
    //do something
 <?php } ?> 
```

# .net - How to cleanly shut down a console app started with Process.Start?

> ID：16139571
> 
> 赞同：23
> 
> 时间：2013-04-22T04:41:50.293
> 
> 标签：.net, process, console-application, break

This is looking like an impossible task. Absolutely nothing I've found works. The question is how to cleanly close a console application started with Process.Start that has been started with no console window and without using shell execute: (`ProcessStartInfo.CreateNoWindow = true; ProcessStartInfo.UseShellExecute = false;`).

It is given that the application being started will shut down "cleanly" if it receives a ctrl-c or ctrl-break signal, but there seems to be no way to send it one that works (particularly GenerateConsoleCtrlEvent).

*   Process.Kill doesn't work. It leaves corrupt files behind due to abrupt killing of the process.
*   Process.CloseMainWindow doesn't work. There is no main window in this case, so the function returns false and does nothing.
*   Calling EnumThreadWindows on all threads for the process and sending a WM_CLOSE to every window does nothing, and there aren't any thread windows anyway.
*   GenerateConsoleCtrlEvent doesn't work. It's only useful for processes in the same group (which .NET gives you no control over), with an unwanted side effect of closing the calling process anyway. The function does not allow you to specify a process id.

Whoever can provide code that accepts a "Process" object started with the parameters above which results in a clean shutdown of the started process without affecting the calling process will be marked as the answer. Use 7z.exe (7-zip archiver) as an example console app, which begins compressing a large file, and will leave a corrupt, unfinished file behind if not terminated cleanly.

Until someone provides a functional example or code that leads to a functional example, this question is unanswered. I have seen dozens of people asking this question and dozens of answers online, and none of them work. .NET seems to provide no support for cleanly closing a console application given its process id, which is odd considering it's started with a .NET Process object. Part of the problem is the inability to create a process in a new process group, which makes using GenerateConsoleCtrlEvent useless. There has to be a solution to this.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-21T19:32:51.187

我花了几个小时试图自己弄清楚这一点。正如您所提到的，网络上充满了根本行不通的答案。很多人建议使用 GenerateConsoleCtrlEvent，但他们不提供任何上下文，他们只是提供无用的代码片段。下面的解决方案使用 GenerateConsoleCtrlEvent，但它可以工作。我已经测试过了。

请注意，这是一个 WinForms 应用程序，我正在启动和停止的进程是[FFmpeg](https://ffmpeg.org/)。我没有用其他任何东西测试过这个解决方案。我在这里使用 FFmpeg 录制视频并将输出保存到名为“video.mp4”的文件中。

下面的代码是我的 Form1.cs 文件的内容。这是 Visual Studio 在您创建 WinForms 解决方案时为您创建的文件。

```
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Threading;
using System.Windows.Forms;

namespace ConsoleProcessShutdownDemo {
    public partial class Form1 : Form {

    BackgroundWorker worker;
    Process currentProcess;

    public Form1() {
        InitializeComponent();
    }

    private void Worker_DoWork(object sender, DoWorkEventArgs e) {
        const string outFile = "video.mp4";

        var info = new ProcessStartInfo();
        info.UseShellExecute = false;
        info.CreateNoWindow = true;
        info.FileName = "ffmpeg.exe";
        info.Arguments = string.Format("-f gdigrab -framerate 60 -i desktop -crf 0 -pix_fmt yuv444p -preset ultrafast {0}", outFile);
        info.RedirectStandardInput = true;

        Process p = Process.Start(info);

        worker.ReportProgress(-1, p);
    }

    private void Worker_ProgressChanged(object sender, ProgressChangedEventArgs e) {
        currentProcess = (Process)e.UserState;
    }

    private void btnStart_Click(object sender, EventArgs e) {
        btnStart.Enabled = false;
        btnStop.Enabled = true;

        worker = new BackgroundWorker();

        worker.WorkerSupportsCancellation = true;
        worker.WorkerReportsProgress = true;
        worker.DoWork += Worker_DoWork;
        worker.ProgressChanged += Worker_ProgressChanged;

        worker.RunWorkerAsync();

    }

    private void btnStop_Click(object sender, EventArgs e) {
        btnStop.Enabled = false;
        btnStart.Enabled = true;

        if (currentProcess != null)
            StopProgram(currentProcess);
    }

    //MAGIC BEGINS

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern bool AttachConsole(uint dwProcessId);

    [DllImport("kernel32.dll", SetLastError = true, ExactSpelling = true)]
    static extern bool FreeConsole();

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool GenerateConsoleCtrlEvent(CtrlTypes dwCtrlEvent, uint dwProcessGroupId);

    [DllImport("Kernel32", SetLastError = true)]
    private static extern bool SetConsoleCtrlHandler(HandlerRoutine handler, bool add);

    enum CtrlTypes {
        CTRL_C_EVENT = 0,
        CTRL_BREAK_EVENT,
        CTRL_CLOSE_EVENT,
        CTRL_LOGOFF_EVENT = 5,
        CTRL_SHUTDOWN_EVENT
    }

    private delegate bool HandlerRoutine(CtrlTypes CtrlType);

    public void StopProgram(Process proc) {

        int pid = proc.Id;

        FreeConsole();

        if (AttachConsole((uint)pid)) {

            SetConsoleCtrlHandler(null, true);
            GenerateConsoleCtrlEvent(CtrlTypes.CTRL_C_EVENT, 0);

            Thread.Sleep(2000);

            FreeConsole();

            SetConsoleCtrlHandler(null, false);
        }

        proc.WaitForExit();

        proc.Close();
    }

    //MAGIC ENDS
} 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-23T11:35:27.757

这有点晚了，所以你可能不再使用它，但也许它会帮助其他人......

你多虑了。问题是您只能从共享同一控制台的进程中发出中断信号 - 解决方案应该相当明显。

创建一个控制台项目。该项目将以通常的方式启动目标应用程序：

```
var psi = new ProcessStartInfo();
psi.FileName = @"D:\Test\7z\7z.exe";
psi.WorkingDirectory = @"D:\Test\7z\";
psi.Arguments = "a output.7z input.bin";
psi.UseShellExecute = false;

var process = Process.Start(psi); 
```

`UseShellExecute`是重要的部分——这确保了两个应用程序将共享同一个控制台。

这允许您将中断发送到您的帮助应用程序，该应用程序也将传递给托管应用程序：

```
Console.CancelKeyPress += (s, e) => e.Cancel = true;
Thread.Sleep(1000);
GenerateConsoleCtrlEvent(ConsoleCtrlEvent.CTRL_C, 0); 
```

这将在启动后一秒钟破坏托管应用程序。轻松、安全。不是必需的`CancelKeyPress`- 我只是把它放在那里，以表明您可以破坏托管进程，并且仍然继续运行。在真正的助手应用程序中，这可以用于一些通知或类似的东西，但这并不是真正需要的。

现在您只需要一种方法来指示帮助应用程序发出中断命令 - 最简单的方法是只使用简单的控制台输入，但这可能会干扰托管应用程序。如果这不是你的选择，一个简单的互斥锁就可以了：

```
using (var mutex = Mutex.OpenExisting(args[0]))
using (var processWaitHandle = new SafeWaitHandle(process.Handle, false))
using (var processMre = new ManualResetEvent(false) { SafeWaitHandle = processWaitHandle })
{
    var which = WaitHandle.WaitAny(new WaitHandle[] { mutex, processMre });

    if (which == 0)
    {
        Console.WriteLine("Got signalled.");
        GenerateConsoleCtrlEvent(ConsoleCtrlEvent.CTRL_C, 0);
    }
    else if (which == 1)
    {
        Console.WriteLine("Exitted normally.");
    }
} 
```

这将等待互斥体上的信号或托管应用程序退出。要启动帮助应用程序，您需要做的就是：

```
var mutexName = Guid.NewGuid().ToString();
mutex = new Mutex(true, mutexName);

var process = Process.Start(@"TestBreak.exe", mutexName); 
```

要发出中断，只需释放互斥锁：

```
mutex.ReleaseMutex(); 
```

而已。如果您需要更严格的控制，使用命名管道之类的东西可能是更好的选择，但如果您只需要中断信号，互斥体就可以了。您需要传递的任何参数都可以作为参数传递给辅助应用程序，您甚至可以使用 shell 脚本来实现这一点（只需使用辅助应用程序来运行您需要运行和中断的任何内容）。

# php - database not taking the table

> ID：16139572
> 
> 赞同：0
> 
> 时间：2013-04-22T04:41:56.013
> 
> 标签：php, mysql

i am relatively new in phpmysql.i need some help...

i am using wamp server in windows7.server version is 2.2.22 and php version is 5.3.13.Name of my database is `db_attendance1`. I have two table namely `users` and `leave`.In users table i have following column

```
empID(int)
username(varchar)
password(varchar)
mac(varchar)
ip(varchar) 
```

and in leave table i have following column

```
lid(int)
empname(varchar)
username(varchar)
nod(int)
sdate(date)
edate(date)
reason(varchar)
action(varchar) 
```

Now i want to use empID in leave table.how can i use it.i have to say that i already apply a code but its not working.Its giving the following error..

# 1005 - Can't create table 'db_attendance1.leave' (errno: 150) (Details...)

and in details its showing the following..

InnoDB Documentation

Supports transactions, row-level locking, and foreign keys

[ Variables | Buffer Pool | InnoDB Status ]

and the code

```
create table `leave`(
lid INT NOT NULL AUTO_INCREMENT,
empID INT,
empname VARCHAR(255) NOT NULL,
username VARCHAR(255) NOT NULL,
nod INT NOT NULL,
sdate DATE,
edate DATE,
reason VARCHAR(255) NOT NULL,
PRIMARY KEY(lid),
FOREIGN KEY(empID) REFERENCES users(empID)
); 
```

so whats wrong...please help me..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:59:20.773

```
create table users(

empID INT,
PRIMARY KEY(empID) /*<<< ADD THIS */
);
create table `leave`(
lid INT NOT NULL AUTO_INCREMENT,
empID INT,
empname VARCHAR(255) NOT NULL,
username VARCHAR(255) NOT NULL,
nod INT NOT NULL,
sdate DATE,
edate DATE,
reason VARCHAR(255) NOT NULL,
PRIMARY KEY(lid),
FOREIGN KEY(empID) REFERENCES users(empID)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:00:22.727

`INDEX(empID)`在外键语句之前使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:01:09.007

试试这个来解决你的错误：

```
create table `leave`(
`lid` bigint(20) NOT NULL AUTO_INCREMENT,
`empID` INT(11),
`empname` VARCHAR(255) NOT NULL,
`username` VARCHAR(255) NOT NULL,
`nod` INT(11) NOT NULL,
`sdate` DATE,
`edate` DATE,
`reason` VARCHAR(255) NOT NULL,
PRIMARY KEY(`lid`),
FOREIGN KEY(`empID`) REFERENCES users(`empID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=311 ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T05:01:33.930

`errno: 150`是外键约束错误。`SHOW ENGINE INNODB STATUS`您可以通过在失败后立即在同一连接上发出查询来获取更多详细信息`CREATE TABLE`。

需要注意的事项：

1.  父表和属性是否存在？（users.empid 必须首先存在）
2.  父属性和子属性是否具有相同的确切数据类型？（在这种情况下签名为 INT）
3.  父表和子表中的属性是否都有索引（普通键、唯一键或主键）？

# php - 根据 PHP 中的值转换 JSON

> ID：16139576
> 
> 赞同：0
> 
> 时间：2013-04-22T04:42:53.830
> 
> 标签：php, arrays, json

我有一个如下的**JSON**

```
{"businessregistered":[
{"busiRegCount":"0","newdate":"2012-10-07"},{"busiRegCount":"0","newdate":"2012-10-08"},    
{"busiRegCount":"0","newdate":"2012-10-09"},{"busiRegCount":"0","newdate":"2012-10-10"},
{"busiRegCount":"3","newdate":"2012-10-11"},{"busiRegCount":"0","newdate":"2012-10-12"},
{"busiRegCount":"0","newdate":"2012-10-13"},{"busiRegCount":"0","newdate":"2012-10-14"},
{"busiRegCount":"0","newdate":"2012-10-15"},{"busiRegCount":"1","newdate":"2012-10-16"},
{"busiRegCount":"0","newdate":"2012-10-17"},{"busiRegCount":"0","newdate":"2012-10-18"},
{"busiRegCount":"0","newdate":"2012-10-19"},{"busiRegCount":"0","newdate":"2012-10-20"},
{"busiRegCount":"0","newdate":"2012-10-21"},{"busiRegCount":"0","newdate":"2012-10-22"}
],"businessactive":[],"resellerregistered":[],"reselleractive":[],"campaignregistered":
[],"campaignactive":[],"campaignexpiring":[],"revenuegenerated":[],"registrationpasscode":
[],"topuppasscode":[],"keywordmatched":[]} 
```

我**需要**的是

```
{"businessregistered":[
{"busiRegCount":"3","newdate":"2012-10-11"},{"busiRegCount":"0","newdate":"2012-10-12"},
{"busiRegCount":"0","newdate":"2012-10-13"},{"busiRegCount":"0","newdate":"2012-10-14"},
{"busiRegCount":"0","newdate":"2012-10-15"},{"busiRegCount":"1","newdate":"2012-10-16"},
{"busiRegCount":"0","newdate":"2012-10-17"},{"busiRegCount":"0","newdate":"2012-10-18"},
{"busiRegCount":"0","newdate":"2012-10-19"},{"busiRegCount":"0","newdate":"2012-10-20"},
{"busiRegCount":"0","newdate":"2012-10-21"},{"busiRegCount":"0","newdate":"2012-10-22"}
],"businessactive":[],"resellerregistered":[],"reselleractive":[],"campaignregistered":
[],"campaignactive":[],"campaignexpiring":[],"revenuegenerated":[],"registrationpasscode":
[],"topuppasscode":[],"keywordmatched":[]} 
```

我需要从我`busiRegCount > 0`在 PHP 中获得的地方开始 JSON ...

请**帮忙**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:49:24.967

您需要先解码 json，然后反复丢弃数据，然后将其返回到 json

```
$data = json_decode($json);

while(count($data->businessregistered) AND $data->businessregistered[0]->busiRegCount == 0) {
    array_shift($data->businessregistered);
}

$json = json_encode($data); 
```

（假设 $json 包含 json 数据）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:51:22.283

```
$array = json_decode($json, true);
$array['businessregistered'] = array_filter($array['businessregistered'], function ($i) {
    static $keep = false;
    return $keep = $keep || $i['busiRegCount'] > 0;
});
$json = json_encode($array); 
```

# javascript - Javascript嵌套原型方法范围

> ID：16139578
> 
> 赞同：0
> 
> 时间：2013-04-22T04:43:16.943
> 
> 标签：javascript, scope, prototype

这是我尝试执行的示例代码。

```
var Game = function(){
  this.state = 'yeah';
}

Game.prototype.call = function(){
  document.writeln(this.state);
  Game.prototype.say();
}

Game.prototype.say = function(){
  document.writeln(this.state);
}

game = new Game();
game.call(); 
```

结果是`yeah undefined`这意味着`call()`正常工作 而`say()`不是。我可以为`say()`函数做些什么才能从 Game 对象中获取 this.state？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:45:12.747

```
Game.prototype.call = function(){
  document.writeln(this.state);
  this.say();
} 
```

原型用于定义函数 - 不调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:48:34.370

永远，请永远不要覆盖本机方法（就像`call`在这种情况下）..

像这样的东西也可以

```
Game.prototype.call = function(){
  document.writeln(this.state);
  Game.prototype.say.apply(this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:55:01.237

看起来你想要的是：

```
Game.prototype.call = function(){
  document.writeln(this.state);
  this.say();
} 
```

但是，此版本将调用设置在的任何函数`this.say`，如果对象被继承，则可能会被覆盖：

```
var MyGame = function () {};
MyGame.prototype = new Game();
MyGame.prototype.say = function () {
    document.writeln('something else');
};
var m = new MyGame();
m.call(); //'something else' 
```

如果你想使用原始引用`Game.prototype.say`（没有继承），那么你需要在对象的上下文中调用函数：

```
Game.prototype.call = function(){
  document.writeln(this.state);
  Game.prototype.say.call(this);
}
var m = new MyGame();
m.call(); //'yeah' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T05:07:07.170

TGH给了你一个解决方案，但没有解释。你的问题在这里：

```
> Game.prototype.say(); 
```

您`say`作为 的方法调用`Game.prototype`，因此在函数中：

```
> Game.prototype.say = function(){
>   document.writeln(this.state); 
> } 
```

`this`是对原型对象的引用，而不是实例。您想将该函数称为：

```
 this.say(); 
```

以便将其作为实例的方法调用，从而设置`this`到`say`实例中。

# html - html5/css3 导航栏大小问题

> ID：16139582
> 
> 赞同：0
> 
> 时间：2013-04-22T04:43:36.080
> 
> 标签：html, css, nav

有一段时间没有做任何网页设计了，但是我的女朋友需要对她的网站进行大量更新，几年前我做了这些更新，并且一直在一点一点地添加，因此它有点不完整，所以我想我会研究所有较新的开发，并尝试对各种设备进行一些响应式设计的全面检修。

我只是对我正在构建的主模板页面有一个特定的问题 - 我在这里放了一个副本：

[http://massagecamden.co.uk/copy2/index.html](http://massagecamden.co.uk/copy2/index.html)

无论如何，我知道在不同大小的页面的媒体查询细节方面有很多事情需要处理，但我目前的问题是与桌面尺寸版本上导航栏的宽度有关。

我想它在一台显示器上看起来很棒，然后将它拖到一个更大的显示器上，你瞧，导航栏粘在 gridContainer div 的左侧。我在这里使用 Dreamweaver CS6 进行流体布局，导航栏本身位于名为导航的流体 div 内，其宽度设置为 100%。

现在，它上面的标题图像也在一个流体 div（称为标题）中，其宽度也设置为 100%。在我注意到导航问题之前，我遇到了图像居中问题，直到遇到一个问题（我认为在这里），这导致我找到了为 img 创建 display:block 规则然后使用 margin:auto 的解决方案将其居中的技巧。

但是，这（或我尝试过的其他任何东西）似乎不适用于导航栏。我承认我从网络上的许多教程中获取了大部分构造，但我对结果感到非常自豪 - 如果我能在扩展浏览器宽度时正确调整大小/位置？

理想情况下，我希望它保持与标题图像类似的静态大小，并且也可以类似地居中。如果这是可行的，那么我也希望能够在侧面看到更多的背景图像，就像在[http://massagecamden.co.uk/](http://massagecamden.co.uk/)的原始主页中一样，但我依赖 margin:auto on gridContainer 可能不会因为流体网格而做到这一点？

有人知道我哪里出错了吗？请？

非常感谢克雷格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:00:02.490

这将使导航居中。

```
#navigation {
    text-align: center;
} 
```

我不太确定你还想做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:12:47.857

我认为你必须这样做：

```
#navigation {
    width: 100%; /* You said you have done this already */
}

#header { /* Image is here */
    width: 1000px; /* For example */
    display: block;
    margin: auto;
} 
```

您必须设置#header 的宽度，否则它不会居中。

我不确定你的意思是这个，但希望这会有所帮助。

# ruby-on-rails - 以不同方式启动瘦 Web 服务器

> ID：16139584
> 
> 赞同：1
> 
> 时间：2013-04-22T04:43:51.173
> 
> 标签：ruby-on-rails, thin

我使用“瘦”网络服务器进行 Rails 应用程序开发。启动瘦服务器有不同的方法。想知道以以下每种方式启动服务器是否有任何区别： 是否有任何优点或缺点。

一个。`thin start` 我可以在启动期间提供各种瘦特定参数，例如 ssl 选项。但我不确定如何在以下其余方法中提供此类启动参数。

湾。`rails s`（注：thin 在 gem 文件中提供）

C。`rackup` 我发现`rackup`在端口 9292 启动服务器，而其他方法在 3000 启动服务器

d。从 IDE 开始瘦身。例如，像 Rubymine（我使用的）这样的 IDE 有一种方便的方式来启动具有不同配置（如运行/调试）的服务器。

我发现使用 IDE 启动服务器的一个明显优势是调试非常无缝。同时我不确定如何传递“瘦”启动特定参数，例如 ssl 选项。（这是 ruby​​mine 特定的。如果有人对此有想法会很高兴。谢谢！）

（猜猜这个问题适用于任何与 rails 一起使用的网络服务器。但我在“瘦”的背景下提出了这个问题，因为我目前正在使用它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:01:26.910

IMO，所有这些方法都是一样的。

一个。`thin start`如果您不使用基于 Rack 的框架，则可以使用该命令。

湾。`rails s`命令的代理`rackup`。[rails服务器源](https://github.com/rails/rails/blob/master/railties/lib/rails/commands/server.rb)

C。`rackup`是用于启动具有`config.ru`文件的基于机架的应用程序的命令。该文件通常包含服务器的配置。

d。我没有专门使用过 RubyMine，但我猜它类似于上述选项。

[TR;博士]

e. 还有一种方法（实际上，还有两种）：通过使用 Thin 作为 nginx 后面的后端服务器。此设置通常用于生产环境以获得更好的吞吐量。Nginx 服务器接收传入的请求并将其发送到运行在它后面的瘦实例。这同样有两种配置方式：

1.  普通 Thin + Nginx 配置，其中启动了几个瘦实例，它们直接接收来自 nginx 的请求。
2.  Thin + Nginx + Unix 套接字配置，其中 Nginx 服务器和每个 Thin 实例共享一个 unix 套接字。因此，请求的路径是：Interwebs -> Nginx -> Unix socket -> Thin 并且响应遵循类似的模式。

您可以在此处阅读有关 Thin 及其配置（和 nginx）的更多信息：[https ://github.com/macournoyer/thin](https://github.com/macournoyer/thin)

# c# - 如何处置 ToolStripDropDown？

> ID：16139585
> 
> 赞同：0
> 
> 时间：2013-04-22T04:43:54.590
> 
> 标签：c#, winforms, idisposable

我在我的 VS2012 项目上运行了代码分析选项，它发现了以下内容；

> CA1001 拥有一次性字段的类型应该是一次性在“DataGridViewColumnSelector”上实现 IDisposable，因为它会创建以下 IDisposable 类型的成员：“CheckedListBox”、“ToolStripDropDown”。如果“DataGridViewColumnSelector”之前已发布，则将实现 IDisposable 的新成员添加到此类型被视为对现有使用者的重大更改。DataGridColSelector DataGridViewColumnSelector.cs

我让我的类 DataGridViewColumnSelector 从 IDisposable 继承，我想知道在 dispose 方法中放什么

更新 ：

这是我的尝试。自从我把课程密封起来后，代码分析就不再抱怨了。我仍然不确定我是否“做对了”

```
 public sealed class DataGridViewColumnSelector  :IDisposable 
{
    private DataGridView mDataGridView = null;
    private CheckedListBox mCheckedListBox;
    private ToolStripDropDown mPopup;

    public delegate void CustomRightClickDelegate(object sender, MouseEventArgs e);

    public event CustomRightClickDelegate GridRightClickEvent;
    /// <summary>
    /// The max height of the popup
    /// </summary>
    public int MaxHeight = 300;
    /// <summary>
    /// The width of the popup
    /// </summary>
    public int Width = 200;

    public DataGridView DataGridView
    {
        get { return this.mDataGridView; }
        set
        {
            if (this.mDataGridView != null) this.mDataGridView.MouseDown -= this.mDataGridView_MouseDown;
            this.mDataGridView = value;
            if (this.mDataGridView != null) this.mDataGridView.MouseDown += this.mDataGridView_MouseDown;
        }
    }

    void mDataGridView_MouseDown(object sender, MouseEventArgs  e)
    {
        if (e.Button == MouseButtons.Right)
        { 

            if( this.mDataGridView.HitTest(e.X, e.Y).Type == DataGridViewHitTestType.ColumnHeader)
            {
                this.mCheckedListBox.Items.Clear();
                foreach (DataGridViewColumn c in this.mDataGridView.Columns)
                {
                    this.mCheckedListBox.Items.Add(c.HeaderText, c.Visible);
                }
                int PreferredHeight = (this.mCheckedListBox.Items.Count*20);
                this.mCheckedListBox.Height = (PreferredHeight < this.MaxHeight) ? PreferredHeight : this.MaxHeight;
                this.mCheckedListBox.Width = this.Width;
                this.mPopup.Show(this.mDataGridView.PointToScreen(new Point(e.X, e.Y)));
            }
            else
            {
                if (this.GridRightClickEvent != null)
                {
                    this.GridRightClickEvent.Invoke(sender, e);
                }

            }
        }
    }

    public DataGridViewColumnSelector()
    {
        this.mCheckedListBox = new CheckedListBox();
        this.mCheckedListBox.CheckOnClick = true;
        this.mCheckedListBox.ItemCheck += new ItemCheckEventHandler(this.mCheckedListBox_ItemCheck);

        ToolStripControlHost mControlHost = new ToolStripControlHost(this.mCheckedListBox);
        mControlHost.Padding = Padding.Empty;
        mControlHost.Margin = Padding.Empty;
        mControlHost.AutoSize = false;

        this.mPopup = new ToolStripDropDown();
        this.mPopup.Padding = Padding.Empty;
        this.mPopup.Items.Add(mControlHost);
    }

    public DataGridViewColumnSelector(DataGridView dgv)
        : this()
    {
        this.DataGridView = dgv;
    }

    void mCheckedListBox_ItemCheck(object sender, ItemCheckEventArgs e)
    {
        this.mDataGridView.Columns[e.Index].Visible = (e.NewValue == CheckState.Checked);
    }

    public void Dispose()
    {
        //http://stackoverflow.com/questions/6826958/c-toolstripdropdown-doesnt-dispose-destroyhandle
        // http://msdn.microsoft.com/en-au/library/b1yfkh5e%28v=vs.71%29.aspx 
        // Kirsten says I dont feel sure about what I am doing here.

        mCheckedListBox.Dispose(  );
        mPopup.Dispose(  );
        GC.SuppressFinalize(this);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:08:59.723

你应该调用 dispose 然后你的表单被处理。

还。您的实施`IDisposable`缺少一些重要的东西。

1）您应该确保没有订阅您的自定义事件的事件。这最终可能会给您的应用程序带来内存泄漏。

```
//in dispose
GridRightClickEvent = null 
```

2) [MSDN](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)有一个实现的最佳实践`IDisposable`

```
public sealed class DataGridViewColumnSelector  : IDisposable
{
  //removed: ~DataGridViewColumnSelector  (){ Dispose(false); /*destructor*/ }

  //class context omitted

  public void Dispose()
  {
     Dispose(true);
     GC.SuppressFinalize(this);
  }

  private void Dispose(bool disposing)
  {
    if(disposing)
    {
      //kill the reference - do not dispose the object. 
      //it was *not* created here, os it should *not* be disposed here
      mDataGridView = null; 

      //makes sure no outside object has a reference
      //to the event - thus keeping it alive when it should be garbagecollected
      GridRightClickEvent = null; 

      if(mCheckedListBox != null) mCheckedListBox.Dispose();

      if(mPopup != null) mPopup.Dispose();

      if(mControlHost  != null) mControlHost .Dispose();

    }
  }
} 
```

# php - 带有 php 的 HTML 选项表单

> ID：16139586
> 
> 赞同：0
> 
> 时间：2013-04-22T04:44:01.433
> 
> 标签：php, html

目前我有点卡在 PHP 和 HTML 上，我的老师要求我将代码更改为下拉选择，

到目前为止我有这个

```
$html .='<option value="Argentina" <?php if($_POST['YourCountry']=="Argentina") echo "selected=selected"; ?>>Argentina</option>'; 
```

我不确定为什么它不起作用。我试图得到它，以便当一个人选择框中的选项时，它将是插入查询中设置的值。这是我的输入之一，我的老师要求我更改为选项一我不知道选项一如何

```
$html .='<input type="text" name="userCountry" id="userCountry" value="'.htmlentities(stripcslashes($_POST['userCountry'])).'" /><br/>'."\n"; 
```

完整代码====================================>

```
<?php

class HomeView extends View {
    protected function displayContent() {
        $html .= '<div id="pageinfo">'."\n";
        $html .= '<h2>'.$this -> pageInfo['pageHeading'].'</h2>'."\n";
        $html .= '</div>'."\n";
            if($_POST['register'] == "Submit") {
            //validate the form

            $vresult = $this -> model -> validateRegisterUser();

            //Check ALL okay
                 if ($vresult['ok'] == true) {
                //Call database

                            if ($this -> model -> register()) {
                                $htmt .='<div id="space">'."\n";
                                $html .='<div id="userreg">'."\n";
                                $html .='<p> User registered successfully<p>'."\n";
                                $html .= '<p>Please login '.$_POST['userName'].'</p>'."\n";
                                $html .='<img src ="optimized/images/joined.jpg" alt="welcome new member"/>'."\n";

                                $html .='</div>'."\n";
                                $html .='</div>'."\n";
                                    } else {

                                $html .='<div id="space">'."\n";
                                $html .='<img src ="optimized/images/failed.jpg" alt="failed to create new member"/>'."\n";
                                $html .= '<p> User creation failed. Please try again <p>'."\n";
                                $html .='</div>'."\n";
                            }        
                        return $html;
                }   
            }
            $html .='<div id="register">'."\n";

                $html .='<img src="optimized/images/rg.jpg" alt="registerimage"/>'."\n";
                $html .='<form method="post" action="'.$_SERVER['REQUEST_URI'].'" onSubmit="return confirm("Are you sure?");">'."\n";
                    $html .='<fieldset>'."\n";
                        $html .='<legend>'.'New Members Form'.'</legend>'."\n";
                        $html .='<label for="username">Username: </label><br/>'."\n";
                        $html .='<input type="text" name="userName" id="userName" value="'.htmlentities(stripcslashes($_POST['userName'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userNameMsg'].'</div>'."\n";
                        $html .='<label for="userFName">Firstname: </label><br/>'."\n";
                        $html .='<input type="text" name="userFName" id="userFName1" value="'.htmlentities(stripcslashes($_POST['userFName'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userFNameMsg'].'</div>'."\n";
                        $html .='<label for="userLName">Surname: </label><br/>'."\n";
                        $html .='<input type="text" name="userLName" id="userLName" value="'.htmlentities(stripcslashes($_POST['userLName'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userLNameMsg'].'</div>'."\n";
                        $html .='<label for="userEmail">Email: </label><br/>'."\n";
                        $html .='<input type="text" name="userEmail" id="userEmail" value="'.htmlentities(stripcslashes($_POST['userEmail'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userEmailMsg'].'</div>'."\n";
                        $html .='<label for="userPassword">Password: </label><br/>'."\n";
                        $html .='<input type="password" name="userPassword" id="userPassword1" value="'.htmlentities(stripcslashes($_POST['userPassword'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userPasswordMsg'].'</div>'."\n";
                        $html .='<label for="userPassword">Re-Enter Password: </label><br/>'."\n";
                        $html .='<input type="password" name="userPassword2" id="userPassword2" value="'.htmlentities(stripcslashes($_POST['userPassword2'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userPrematchPass'].'</div>'."\n";

                        $html .='<label for="userPhone">Telephone: </label><br/>'."\n";
                        $html .='<input type="text" name="userPhone" id="userPhone" value="'.htmlentities(stripcslashes($_POST['userPhone'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userPhoneMsg'].'</div>'."\n";
                        $html .='<label for="userAddress">Address: </label><br/>'."\n";
                        $html .='<input type="text" name="userAddress" id="userAddress" value="'.htmlentities(stripcslashes($_POST['userAddress'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userAddressMsg'].'</div>'."\n";
                        $html .='<label for="userCity">City: </label><br/>'."\n";
                        $html .='<input type="text" name="userCity" id="userCity" value="'.htmlentities(stripcslashes($_POST['userCity'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userCityMsg'].'</div>'."\n";
                        $html .='<label for="userCountry">NewZealand: </label><br/>'."\n";
                         $html .='<select name="Location">'."\n";
$html .='<option value=""></option>'."\n";
$html .='<option value="North-Island">North-Island</option>';
$html .='<option value="South-Island">South-Island</option>';
$html .='<option value="Other">Other</option>';
 $html .='<option value="Argentina" <?php if($_POST['YourCountry']=="Argentina") echo "selected=selected"; ?>>Argentina</option>';

                        $html .='<input type="text" name="userCountry" id="userCountry" value="'.htmlentities(stripcslashes($_POST['userCountry'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userCountryMsg'].'</div>'."\n";
                        $html .='<label for="userPostcode">Post Code: </label><br/>'."\n";
                        $html .='<input type="text" name="userPostcode" id="userPostcode" value="'.htmlentities(stripcslashes($_POST['userPostcode'])).'" /><br/>'."\n";
                        $html .='<div class="error">'.$vresult['userPostcodeMsg'].'</div>'."\n";
                        $html .='<input type="submit" name="register" value="Submit" id="submit"/>'."\n";
                    $html .='</fieldset>'."\n";
                $html .='</form>'."\n";
            $html .=' </div>'."\n";
        return $html;
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:52:25.650

添加

```
</select> 
```

添加

```
<?php if($_POST['YourCountry']=="XXXXX") echo "selected=selected"; ?> 
```

在其他选项标签中

改变

```
<select name="Location"> to  <select name="YourCountry"> 
```

**

```
action="'.$_SERVER['REQUEST_URI'].'"  is not good for Xss 
```

# google-sheets - 如何在多种条件下“SUMIF”。（谷歌电子表格）

> ID：16139588
> 
> 赞同：1
> 
> 时间：2013-04-22T04:44:37.077
> 
> 标签：google-sheets

我想在多种情况下使用 SUMIF。我有两张床单。

sheet1 行有 SKU (UNIQ) , total_quantity

Sheet2 行有标志，SKU（与 sheet1 相关），数量

如果 sheet2 标志为真，我想在 total_quantity 中添加具有相同 SKU 的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:07:22.497

如果第一个 total_quantity 单元格是 Sheet1!B2，则在该单元格中：

`=SUM(IFERROR(FILTER(Sheet2!C$2:C;Sheet2!B$2:B=A2;Sheet2!A$2:A)))`

您可以手动填写；或者，这可以转换为将自动填充到列中的数组公式：

`=ArrayFormula(IF(LEN(A2:A);MMULT(A2:A=TRANSPOSE(Sheet2!B2:B);Sheet2!A2:A*Sheet2!C2:C);IFERROR(1/0)))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:03:49.627

DSUM - 有一些数据库风格的公式，看起来 DSUM 是你想要的[https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1368827](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1368827)

# php - 如何使用 PHP 删除 XML 元素及其所有多级子项？

> ID：16139595
> 
> 赞同：0
> 
> 时间：2013-04-22T04:45:35.980
> 
> 标签：php, xml, simplexml, removechild

我正在尝试删除 XML 结构中的特定节点。我希望能够删除包含我从表单字段中指定的特定用户名的 Employee 元素的所有子元素以及与之相关的所有子元素。我一直在使用 SimpleXML 加载所有数据，但我可以通过另一种方法重新加载数据。我想知道删除所有子元素的最佳方法是什么，无论元素的深度有多少。到目前为止，我遇到的所有解决方案都只有一个层次。我想删除用户名的用户`UserToDelete`。结构的一个例子如下。

```
<Employees>
  <Employee Status="Part-time">
     <First_Name>...</First_Name>
     <Last_Name>...</Last_Name>
     <Position>...</Position>
     <SSN>...</SSN>
     <Contact_Info>
         <Office_Phone>...</Office_Phone>
         <Email>...</Email>
         <Cell_Phone>...</Cell_Phone>
     </Contact_Info>
     <Access_Info level="admin">
         <Username>UserToDelete</Username>
         <Password>...</Password>
     </Access_Info>
     <Department>...</Department>
     <Date_Started>...</Date_Started>
     <Salary>...</Salary>
     <Years>5</Years>
     <Photo>...</Photo>
  </Employee>
  <Employee>  
     ....
  </Employee>
  ...
</Employees> 
```

因此，问题的关键是如何使用 PHP 删除整个 Employee，包括所有子项，包括`contact_info`and中的元素`access_info`。节点的深度是否重要，或者我可以执行以下操作吗？

```
foreach ($xml->Employee as $employee) {
    if($username == $employee->Access_Info->Username) {
        foreach ($family as $node) {
            $node->parentNode->removeChild($node);
        }
        echo $dom->saveXML('employees.xml');
        echo "<font color='red'>".$username." deleted. </font>";
    }

} 
```

**编辑：**

我没有在`echo "<font color='red'>".$username." deleted. </font>";`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:11:10.760

> 所以就问题而言，如何删除整个员工

xml.xml：

```
<?xml version="1.0"?>
<Employees>

<Employee>
  <Username>Joe</Username>
  <Password>...</Password>
</Employee>

<Employee>
    <Access_Info level="admin">
      <Username>Jane</Username>
      <Password>...</Password>
    </Access_Info>
</Employee>

<Employee Status="Part-time">
     <First_Name>...</First_Name>
     <Last_Name>...</Last_Name>
     <Position>...</Position>
     <SSN>...</SSN>
     <Contact_Info>
         <Office_Phone>...</Office_Phone>
         <Email>...</Email>
         <Cell_Phone>...</Cell_Phone>
     </Contact_Info>
     <Access_Info level="admin">
       <NestedOneMoreTime>
         <Username>EmployeeToDelete</Username>
         <Password>...</Password>
       </NestedOneMoreTime>
     </Access_Info>
     <Department>...</Department>
     <Date_Started>...</Date_Started>
     <Salary>...</Salary>
     <Years>5</Years>
     <Photo>...</Photo>
</Employee>

</Employees> 
```

php:

```
$xml = simplexml_load_file("xml.xml");

foreach ($xml->Employee as $employee)
{
    //Because the needed xpath feature is broken in SimpleXML, create
    //a new xml document containing only the current Employee:
    $employee_xml = simplexml_load_string($employee->asXML()); 

    //Get all Username elements in employee_xml(there
    //should only be one, which will be at position 0 in the returned array):
    $usernames_array = $employee_xml->xpath("//Username");

    if($usernames_array[0] == "UserToDelete")
    {
        unset($employee[0]); //The first element of an Element object
                             //is a reference to its DOM location
        break; //Important--you don't want to keep iterating over something
               //from which you've deleted elements.  If you need to delete
               //more than one element, save the references in an array
               //and unset() them after this loop has terminated.
    }
}

echo $xml->asXML(); 
```

# eclipse - Eclipse RCP 定义一种新的 Project

> ID：16139598
> 
> 赞同：2
> 
> 时间：2013-04-22T04:45:47.557
> 
> 标签：eclipse, eclipse-rcp

我想确定一种新的项目，它是与 *.X 文件捆绑在一起的，我将其命名为“X 项目”。怎么做？

首先，扩展一个项目类（eclipse.xxxx.internal.Project），但我记得“内部”包中的资源；我还看到了 org.eclipse.core.resources.Iproject，它的子类是否可以用于我的案例？

那么，该怎么做呢？请给我一个例子。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:19:37.457

您需要的是**Project Nature**。

eclipse中已经有你想要的类型的示例项目-

1.  转到新建 -> 插件项目
2.  输入名称并单击下一步
3.  ![从现有模板创建项目](https://i.stack.imgur.com/5Y3pM.png)

这将为您提供一个示例模板供您使用。你可以理解那里的模式。

更多信息可以在这里找到 -

[http://jawher.net/2009/09/26/howto-create-a-new-project-nature-in-eclipse/](http://jawher.net/2009/09/26/howto-create-a-new-project-nature-in-eclipse/)

# spring - Spring 3 Webflow 与 JSF 2 链接与 _eventId 不转换

> ID：16139599
> 
> 赞同：0
> 
> 时间：2013-04-22T04:46:24.483
> 
> 标签：spring, jsf-2, spring-webflow

我已经让 h:commandButton 和 h:commandLink 工作了，但是简单的 h:outputLink 不会。我正在尝试下面的 JSF 2（带有 facelets）代码：

```
<h:outputLink value="#{flowExecutionUrl}&amp;_eventId=displayBrief&amp;briefId=#{brief.briefId}">
    <h:outputText value="#{brief.eventName}"/>                                      
</h:outputLink> 
```

创建了正确的链接，但单击时，仍保留相同的页面。

# css - 带有 css 旋转标签页眉的横向标签页

> ID：16139604
> 
> 赞同：3
> 
> 时间：2013-04-22T04:47:19.417
> 
> 标签：css, css-transforms

我正在尝试用纯 html 和 css 制作一个选项卡式菜单。

选项卡菜单包含在页面的右侧，因此选项卡显示在菜单的左侧。我想我的那部分工作正常。

我正在努力使标签中的文本横向旋转，以免出现长得可笑的水平标签。

这个小提琴[http://jsfiddle.net/9gPXF/](http://jsfiddle.net/9gPXF/)这里显示了我到目前为止所拥有的。我正在努力解决的问题是让标签的宽度保持可管理。

相关的css代码是这个位：

```
 #RightMenu #Tabs > li
    {
        display: block;
        width: 3em;
        height: 4em;
        line-height: 4em;
        border-top: 1px solid #000000;
        border-bottom: 1px solid #000000;
        border-left: 1px solid #000000;
    }

        #RightMenu #Tabs > li > span
        {
            display: inline-block;
            line-height: 1em;
            -webkit-transform: rotate(-90deg);
            text-align: center;
        } 
```

`li`元素包含`span`我在 css 中旋转的a 。问题是实际宽度`li`必须足以容纳`span`或文本中断。这很烦人，因为我必须使标签既宽又高，足以容纳文本。

我应该如何修改样式以使其正常工作？

更新：

我可能完全错了。如果有人知道任何其他方式来完成这项工作，我也会把它作为答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:01:02.710

在摆弄了我的小提琴（很长一段时间）之后，我想我终于让它令人满意地工作了。 [小提琴在这里可用](http://jsfiddle.net/wTqE8/11/)

的HTML：

```
<div id="RightMenu">
<ul id="Tabs">
    <li><span>Menu 1</span>

    </li>
    <li><span>My really long menu</span>

    </li>
    <li><span>Menu 3</span>

    </li>
</ul>
<ul id="Menus">
    <li>
        <div>Menu 1 content</div>
    </li>
    <li>Menu 2 content</li>
    <li>Menu 3 content</li>
</ul>
</div>
<div id="Content">Content</div> 
```

的CSS：

```
#Content {
    width: 100%;
}
#RightMenu {
    position: absolute;
    height: 100%;
    right: 0;
    z-index: 10;
}
#RightMenu #Tabs, #RightMenu #Menus {
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
    list-style: none;
}
#RightMenu #Tabs {
    position: absolute;
    white-space: nowrap;
    top: 0;
    right: 100%;
    text-align: right;
    -webkit-transform-origin: 100% 100%;
    -webkit-transform: rotate(-90deg);
    transform-origin: 100% 100%;
    transform: rotate(-90deg);
}
#RightMenu #Tabs > li {
    display: inline-block;
    cursor: pointer;
    border: 1px solid black;
    border-bottom: none;
}

#RightMenu #Menus
{
    width: 200px;
}

#RightMenu #Menus li
{
    white-space: nowrap;
} 
```

附加js：

```
$(document).ready(function () {
    $('#RightMenu #Tabs > li').click(function () {
        $('#RightMenu #Menus').animate({
            width: 'toggle'
        }, 1000);
    });
}); 
```

这应该提供一个带有垂直标签的滑动右侧边栏。

感谢 Mark Ryan Sallee 的小提琴让我走上了正确的轨道来完成这项工作。

更新：

我已经更新了这个小提琴，以便它现在可以在所有主要浏览器中工作。

# asp.net - 哪个服务器最适合 asp.net Web 应用程序。MSSQL Server 或 SQL Server 或 mysql？

> ID：16139605
> 
> 赞同：0
> 
> 时间：2013-04-22T04:47:32.940
> 
> 标签：asp.net, mysql, sql, vb.net

我正在创建网站并想确认我必须使用哪个后端来存储数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:59:34.633

如果您不是专家/DBA，请获得 MS SQL - 它具有更好的默认配置。Mysql 服务器需要对任何上述琐碎查询进行一些调整（增加不同的缓冲区）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:08:12.153

无论服务器如何最好。但这取决于您在服务器上的最佳技能。最好的技能，最好的服务器数据库。也根据来自世界的网站排名。我们可以看到该[链接](http://www.serverwatch.com/article.php/3883441)显示了最好的服务器。您也可以尝试使用谷歌搜索查看哪个数据库服务器最好。当然，如果你没有技术，再好的数据库也根本不行

# jquery - jquery将悬停添加到动画

> ID：16139607
> 
> 赞同：0
> 
> 时间：2013-04-22T04:47:43.823
> 
> 标签：jquery, jquery-hover

我有一个 div，它使用以下代码在连续循环中进出动画：

```
$(document).ready(function() { 
setInterval(function () {
    $("#possum-animate").animate({
    bottom:"32"
    }, 3000 ).delay(10000).animate({
    bottom:"-70"
    }, 3000).delay(10000);
}, 10000);  
}); 
```

如何添加悬停功能，以便在悬停 div 时完成动画显示，然后在悬停时隐藏 div 并再次开始连续循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:38:44.143

你可以做这样的事情

 ````
$(document).ready(function() { 

    function timeFunction(){

        var timeInterval = setInterval(function () {        

        $("#possum-animate").animate({

         bottom:"32"

    }, 3000 ).delay(10000).animate({

        bottom:"-70"

    }, 3000).delay(10000);

  }, 10000);     

return timeInterval;

}

// Start animating on page load

var timeInterval = timeFunction();

$("#possum-animate").bind({

    mouseenter: function(e){

        e.preventDefault();

        clearTimeout(timeInterval);
        $("#possum-animate").clearQueue(); 
        $("#possum-animate").stop();

    },

    mouseleave: function(e){

        e.preventDefault();

        timeInterval = timeFunction();

    } 

});

}); 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:54:34.727

尝试

```
$(document).ready(function() {
    var flag = true;
    setInterval(function() {
                if (flag) {
                    $("#possum-animate").animate({
                                bottom : "32"
                            }, 3000).delay(10000).queue(function() {
                                $("#possum-animate").animate({
                                            bottom : "-70"
                                        }, 3000)
                            });
                }
            }, 10000);

    $("#possum-animate").hover(function() {
                flag = false;
                $(this).stop().animate({
                            bottom : "32"
                        }, 3000);
            }, function() {
                $(this).stop().animate({
                            bottom : "-70"
                        }, 3000);
                flag = true;
            });
}); 
````

# caching - 寻求 Akavache 文档或示例

> ID：16139610
> 
> 赞同：6
> 
> 时间：2013-04-22T04:48:18.853
> 
> 标签：caching, windows-8, windows-phone

我在周末发现了 Akavache，它看起来是一个很好的强烈推荐的解决方案，用于在 Win8 和 WP8 上缓存项目。

但是，我找不到任何有关如何使用它的实际示例或文档！

有没有人可以分享任何示例项目或文档？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T17:21:22.263

我是 Akavache 的作者。虽然除了自述文件之外没有任何正式文档，但有一些很好的示例说明如何使用它，我会阅读这些项目的 ViewModel 以了解它是如何工作的：

*   [https://github.com/play/play-windows](https://github.com/play/play-windows)
*   [https://github.com/xpaulbettsx/AkavacheExplorer](https://github.com/xpaulbettsx/AkavacheExplorer)

但是，我认为 API 是不言自明的，只需点击`BlobCache.LocalMachine.`并查看 Intellisense 揭示的内容 :)

如果您有任何问题，请通过 paul@github.com 联系我，我很乐意提供帮助。

# javascript - 使用CKEDITOR时如何获取原始源

> ID：16139611
> 
> 赞同：1
> 
> 时间：2013-04-22T04:48:21.677
> 
> 标签：javascript, html, ckeditor, wysiwyg

当我在我的 razor 视图表单 MVC 中使用这个插件时，网页向我显示了一条错误消息，上面写着：

```
A potentially dangerous Request.Form value was detected from the client 
```

我想知道是否有办法配置此插件以仅获取源代码而不是转换 HTML 代码。

我是说：

我得到了什么

```
<p>some text </p> 
```

我想要什么（非 html 生成）

```
some text 
```

有没有办法得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:19:38.627

尝试：

```
CKEDITOR.instances.yourEditorInstance.editable().getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T13:17:06.873

请在获取当前编辑器实例的 html 后尝试剥离 html 标签，如下所示：

```
CKEDITOR.instances.yourEditorInstance.getData().replace(/(<([^>]+)>)/ig,""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:44:48.530

请检查以下链接

[http://dev.ckeditor.com/ticket/849](http://dev.ckeditor.com/ticket/849)

它应该可以解决您的错误

# symfony - 从下拉列表中添加一个值到会话变量并在 Symfony 中检索它

> ID：16139619
> 
> 赞同：0
> 
> 时间：2013-04-22T04:49:28.917
> 
> 标签：symfony, symfony-forms

我一直在使用 symfony 框架，但遇到以下问题。我有一个生成员工详细信息的下拉列表。我创建了一个下拉列表，根据员工填充数字。我希望将该号码添加到会话中，并且我想在任何我想要的地方检索它。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:52:54.510

从控制器向会话添加值：

```
$phoneNumber = //....;
$session = this->container->get('session');
$session->set('phoneNumber', $phoneNumber); 
```

然后，您可以像这样检索电话号码：

```
$session->get('phoneNumber'); 
```

这里有一整章是关于会话管理[的](http://symfony.com/doc/master/components/http_foundation/sessions.html)。

# c# - 使用 cmd 或 C# 列出网络上的所有计算机

> ID：16139625
> 
> 赞同：3
> 
> 时间：2013-04-22T04:49:59.660
> 
> 标签：c#, networking, ip, psexec, subnet

我需要获取网络上所有计算机的列表

该网络分为两个本地网络。一个管理网络和一个教育网络，然后在每个管理和教育网络下都有每个校区的子网。所以每个校区都有一个管理员和一个教育域控制器。

我可以在每个子网上的命令提示符下运行“网络视图”以获取所有计算机的列表，但我希望能够在一台服务器上运行它，或者如果我需要两台服务器（一台用于管理网络一个用于教育网络）

我知道有像 nmap 这样的应用程序可以做到这一点，但我希望能够使用内置的 Windows 功能，如“网络视图”或自己编写一些东西。

附加细节：我有一个程序（由以前的开发人员编写）作为后台服务运行，在每台计算机上启动一个弹出窗口并在火警触发时播放一个 .mp3 文件。我想使用该程序并使用[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553 "执行程序")启动弹出窗口并播放消息，而不是在每台计算机上安装该服务。我有 PsExec 工作，但需要获取所有计算机的列表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-02T03:29:02.303

查找网络上所有活动/使用的 IP 地址 有一种非常简洁的方法，您可以很容易地找到网络上的所有活动/使用的 IP 地址，而无需任何第三方应用程序，或者更糟糕的是，手动 ping 每个 IP 地址。

打开命令提示符并输入以下内容：

FOR /L %i IN (1,1,254) DO ping -n 1 192.168.10.%i | FIND /i "回复">>c:\ipaddresses.txt

更改 192.168.10 以匹配您自己的网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:05:42.850

我不知道您使用的网络有多大，但您可以尝试查询 Active Directory。查看下面的链接以获取更多信息。

[Active Directory 中联机的计算机列表](https://stackoverflow.com/questions/3778623/list-of-computers-in-active-directory-that-are-online)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:56:56.190

你能试试这个吗？

代码 C#：

```
// Get host name from current network
String strHostName = Dns.GetHostName();
List<string> machinesName = new List<string>();    

// Find host by name
IPHostEntry iphostentry = Dns.GetHostByName(strHostName);

// Enumerate IP addresses from current network
int nIP = 0;
foreach(IPAddress ipaddress in iphostentry.AddressList)
{
    host = Dns.GetHostByAddress(ipaddress);//ip Address is to be specified machineName
    //Add machine name into the list        
    machinesName.Add(host.HostName);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-25T09:25:56.953

你可以试试这个：- 使用 C# 代码：- /* 必须包含这些库 */

```
using System.Net;
using System.Net.Sockets; 

 private void GetIP()
    {
        Process netUtility = new Process();

        netUtility.StartInfo.FileName = "net.exe";

        netUtility.StartInfo.CreateNoWindow = true;

        netUtility.StartInfo.Arguments = "view";

        netUtility.StartInfo.RedirectStandardOutput = true;

        netUtility.StartInfo.UseShellExecute = false;

        netUtility.StartInfo.RedirectStandardError = true;

        netUtility.Start();

        StreamReader streamReader = new StreamReader(netUtility.StandardOutput.BaseStream, netUtility.StandardOutput.CurrentEncoding);

        string line = "";

        while ((line = streamReader.ReadLine()) != null)
        {

            if (line.StartsWith("\\"))
            {

                listBox1.Items.Add(line.Substring(2).Substring(0, line.Substring(2).IndexOf(" ")).ToUpper());

            }

        }

        streamReader.Close();
        netUtility.WaitForExit(1000);

    } 
```

有关更多详细信息，我制作了一个 Windows 聊天应用程序，我正在使用此代码获取网络中的系统名称列表。你可以在那里检查它是如何工作的。链接是[https://github.com/akki9c/wifi-chating/blob/master/chatSample/chatSample/Form1.cs](https://github.com/akki9c/wifi-chating/blob/master/chatSample/chatSample/Form1.cs)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T04:54:12.463

您可以有一个批处理文件运行`Net View`并将其转储到文本文件中。从那里你可以对这些数据做任何你想做的事情。这可以作为计划任务每​​天运行，或者在添加新机器时手动运行。

# java - 将面板动态添加到 JFrame

> ID：16139628
> 
> 赞同：-1
> 
> 时间：2013-04-22T04:50:32.563
> 
> 标签：java, swing, jframe, jpanel

我正在处理表格。我在两个不同的文件中创建了以下框架。我想将面板添加到以下课程的框架中。但我得到以下异常：“线程“AWT-EventQueue-0”java.lang.Error中的异常：未解决的编译问题：addForm1无法解析为变量“

请帮忙。提前致谢。

```
File: frontPage.java

 import java.awt.Color;
    import java.util.Calendar;
    import javax.swing.*;

    import java.awt.event.*;

    public class frontPage extends JFrame implements ActionListener
    {

    //----------*******Variable Declarations*******-------------------  
        JPanel panelheaderImage, panelSideBar, panelTittle, panelTittleBar;

        JLabel labelheaderImage, labelDate, labelTime, labelTittle,
               labelBottomImage;

        JButton buttonAddRecord, buttonSearch;

        JTextField nameSearch;

        Calendar currentDate;

        String year, month, day;
        Object addform1=null;

    //--------******FRAME CONSTRUCTOR*********------------------------  
        frontPage( )
        {

        //------------frame initialization--------
        setBackground( Color.BLUE );
        setSize( 750, 850 );
        setVisible( true );
        setLayout( null );

    //------------frame initialization ENDS-----------------------------        

    //------------Panel Initialization Starts---------------------------

        framBottomImage frameimg = new framBottomImage();       
        frameBottom framebottom = new frameBottom();
        frameAddForm addform = new frameAddForm();
        addform1= addform;

        add( frameimg.panelBottomImage );
        add( framebottom.panelBottomText );

        panelheaderImage = new JPanel( );
        panelheaderImage.setBounds( 0, 0, 600, 80 );
        add( panelheaderImage );

        panelSideBar = new JPanel( );
        panelSideBar.setBounds( 520, 90, 200, 40);
        panelSideBar.setLayout(null);
        add( panelSideBar );

        panelTittle = new JPanel();
        panelTittle.setLayout(null);
        panelTittle.setBounds(0, 85, 550, 30);
        add ( panelTittle );

        panelTittleBar = new JPanel( );
        panelTittleBar.setBounds( 0, 150, 450, 40);
        panelTittleBar.setLayout(null);
        add( panelTittleBar );

    //------------Panel Initialization Ends---------------------------- 

        labelheaderImage = new JLabel( new ImageIcon
                                       ( "C:\\Users\\SUN\\Desktop\\img.jpg" ) );
        panelheaderImage.add( labelheaderImage );

        currentDate = Calendar.getInstance();
        year = "" + currentDate.get( Calendar.YEAR );
        month = "" + currentDate.get( Calendar.MONTH );
        day = "" + currentDate.get( Calendar.DAY_OF_MONTH );

        labelDate = new JLabel( "Date:" + day + "/" + month + "/" + year );
        labelDate.setBounds(0, 0, 90, 20);
        panelSideBar.add( labelDate );

        labelTime = new JLabel( "Time:" );
        labelTime.setBounds(0, 20, 50, 20);
        panelSideBar.add( labelTime );

        labelTittle = new JLabel( "Patient's Case Paper" );
        labelTittle.setBounds( 150, 0, 250, 25);
        panelTittle.add( labelTittle );

        buttonAddRecord = new JButton( "ADD RECORD" );
        buttonAddRecord.setBounds( 25, 0, 110, 25 );
        buttonAddRecord.addActionListener(this);
        panelTittleBar.add( buttonAddRecord );

        nameSearch = new JTextField( "" );
        nameSearch.setBounds( 170, 0, 110, 25 );
        panelTittleBar.add( nameSearch );

        buttonSearch = new JButton( "Search" );
        buttonSearch.setBounds( 320, 0, 100, 25 );
        panelTittleBar.add( buttonSearch );
        }

        public void actionPerformed( ActionEvent ae )
        {
            if(ae.getSource( ) == buttonAddRecord )
            {
                add( addForm1 );
            }
        }

    }

Another File:
frameAddForm.java

import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.swing.*;

public class frameAddForm 
{

    JPanel panelAddForm;

    JLabel labelName, labelFirstName, labelLastName, labelMiddleName;
    JTextField textFieldFirstName, textFieldMiddleName, textFieldLastName;

    frameAddForm()
    {

    panelAddForm = new JPanel();
    panelAddForm.setLayout(null);
    panelAddForm.setBounds(0, 220, 500, 600);

    labelName = new JLabel( "Name" );
    labelName.setBounds( 20, 30, 50, 20);
    panelAddForm.add(labelName);
//----------------------FNAME---------------------------------

    labelFirstName = new JLabel("First Name");
    labelFirstName.setBounds(100, 50, 80, 10);
    panelAddForm.add(labelFirstName);

    textFieldFirstName = new JTextField(  );
    textFieldFirstName.setBounds( 100, 30, 80, 20 );

    textFieldFirstName.addKeyListener( new KeyAdapter(  ) {
    public void keyTyped( KeyEvent e ) {
    String input = textFieldFirstName.getText(  );
    Pattern p = Pattern.compile( "[ 0-9,&%$#@!()*^,\t\n\f\r]" );
    Matcher m = p.matcher( input );
    if ( m.find(  ) ) {
        JOptionPane.showMessageDialog( null, "Please Enter Valid Name",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
    } );

    panelAddForm.add( textFieldFirstName );

//-------------------MNAME---------------------------------------------------

        labelMiddleName= new JLabel("Middle Name");
        labelMiddleName.setBounds( 190, 50, 80,  10);
        panelAddForm.add(labelMiddleName);

        textFieldMiddleName = new JTextField(  );
        textFieldMiddleName.setBounds( 190, 30, 80, 20 );

        textFieldMiddleName.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
            String input = textFieldMiddleName.getText(  );
            Pattern p = Pattern.compile( "[ 0-9,&%$#@!()*^]" );
            Matcher m = p.matcher( input );
            if ( m.find(  ) ) {
            JOptionPane.showMessageDialog( null, "Please Enter Valid Name",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
        } );

    panelAddForm.add( textFieldMiddleName );

//--------------------------labelName--------------------------------------

    labelLastName = new JLabel("Last Name");
    labelLastName.setBounds(280, 50, 80, 10);
    panelAddForm.add(labelLastName);

    textFieldLastName = new JTextField(  );
    textFieldLastName.setBounds( 280, 30, 80, 20 );

    textFieldLastName.addKeyListener( new KeyAdapter(  ) {
    public void keyTyped( KeyEvent e ) {
    String input = textFieldLastName.getText(  );
    Pattern p = Pattern.compile( "[ 0-9,&%$#@!()*^]" );
    Matcher m = p.matcher( input );
    if ( m.find(  ) ) {
            JOptionPane.showMessageDialog( null, "Please Enter Valid Name",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }
            }
    } );

    panelAddForm.add( textFieldLastName );

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:53:06.510

您将 addForm1 定义为对象。您不能将对象添加到 JFrame。您必须将 addForm1 定义为 Swing 组件，如 JPanel。

Java 类名以大写字母开头。

# jquery - Jquery 可以知道我的动画 gif 何时结束吗？

> ID：16139629
> 
> 赞同：7
> 
> 时间：2013-04-22T04:50:36.913
> 
> 标签：jquery, queue, gif, animated

我想知道是否可以播放动画 gif，然后在 gif 到达其动画结尾时通过 jquery 触发事件。一旦它这样做了，它就会循环回到队列的开头，并再次播放 gif then 事件。

如果你看看我的 jfiddle，我制作了一个人打字的小 gif。然后当他抬起头来得到一个想法时，我希望那个“想法”的 div 变成别的东西。我非常希望他头顶上的那个词是同步的，并在他的头弹出时立即改变。

[http://jsfiddle.net/mMVhK/1/](http://jsfiddle.net/mMVhK/1/)

```
<div id="thought">
    Amazing Idea
</div>

<div id="firstgif">
    <img src="http://i.imgur.com/pcc4DP5.gif"/>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:49:53.823

我对此的回答类似于[这个答案](https://stackoverflow.com/a/8172655/1676444)和[这个](https://stackoverflow.com/a/8171333/1676444)类似的stackoverflow问题。

如果您的 GIF 具有一定数量的帧且没有循环，您可以使用 javascript`setTimeout`来触发您的事件。但是，由于您正在玩一个猜谜游戏，GIF 的渲染是否会以与每次 javascript 执行相同的速度播放，所以它很有可能不同步。

一个更安全的选择是我链接的另一个答案所说的使用[精灵贴图](http://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29)模拟动画的方式。这是通过使用 javascript 更改元素中图像的背景位置来实现的。这样，您可以更好地控制动画的动画效果，更好地控制 javascript 事件和更好的时机，因为它与 javascript 执行速度相关/它只会在您告诉它的动画帧处。

我没有示例，但是如果您对此有一个不错的开端或有任何其他问题，我很乐意提供帮助。

[关于 CSS Sprites 的有用信息](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)

# php - 为什么php包含语句将空格作为ajax响应返回

> ID：16139630
> 
> 赞同：0
> 
> 时间：2013-04-22T04:50:46.923
> 
> 标签：php, ajax, whitespace, removing-whitespace

标题中我的问题示例演示了我遇到的问题。

[例子](http://wx2fly.com/test/cssPositioning.html)

抱歉不知道如何使用 jsfiddle。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:53:24.277

您的“空文件”似乎包含一个空行[http://wx2fly.com/test/emptyFile.php](http://wx2fly.com/test/emptyFile.php)，这意味着它不是空的！

我认为你可以通过让你的空（或不是）文件以 开头来解决你的问题`<?php`，并确保 php 标签在文件末尾没有关闭。

# jquery - chrome 在输入键按下和模糊事件后触发两次更改事件

> ID：16139631
> 
> 赞同：1
> 
> 时间：2013-04-22T04:50:59.533
> 
> 标签：jquery, google-chrome, onchange, blur

我有一个文本`<input>`，当它被归档时，我想触发 change 事件。通过以下方式触发更改事件： 1\. 在文本字段外部单击（使其失去焦点）或 2\. 按 Enter 键（使文本字段保持焦点）

我不希望文本字段集中，所以我`.blur()`为此使用 jQuery：

```
$(document).on("change", "input.quantity", function()
{   
    alert('Changed!');
    $(this).blur(); 
}); 
```

当我在 Firefox 中测试它时一切顺利，但是当我在 chrome 中测试它时，更改事件触发两次，我收到两个警报。

仅当按下回车键时才会发生。

如果我删除`$(this).blur();`更改事件只会触发一次。

代码在[这里](http://jsfiddle.net/rqFAH/)

这可能是一个 chrome 错误，但如果有人知道如何解决这个问题，那将是一个很大的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:51:15.067

请尝试使用此代码，这不是正确的解决方案，但可以解决您面临的问题：

```
$(document).on("change", "input.quantity", function(e)
{
    alert('Changed!');
    var $ele = $(this);
    setTimeout(function() {$ele.blur();}, 50);
}); 
```

更新小提琴：http: [//jsfiddle.net/rqFAH/1/](http://jsfiddle.net/rqFAH/1/)

# jquery - Nivo Slider 缩略图加载不正确的图像

> ID：16139633
> 
> 赞同：0
> 
> 时间：2013-04-22T04:51:20.830
> 
> 标签：jquery, jquery-plugins, nivo-slider

这是我正在处理的页面： [http ://symmetrypilates.net/studio/studio1.html](http://symmetrypilates.net/studio/studio1.html)

这是CSS：

[http://paste.ubuntu.com/5591635/](http://paste.ubuntu.com/5591635/)

问题性质：

图像将加载先前单击的图像，而不是立即单击的图像。

如何解决此问题以使单击的图像加载到更大的视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:21:59.067

查看您的源代码可能会出现问题，请在`$.document.ready()`.

```
<script type="text/javascript ">
$(document).ready(function() {

$('#slider').nivoSlider({
    effect: false,
        controlNavThumbs:true,
        controlNavThumbsFromRel:true,
 pauseOnHover: true, // Stop animation while hovering
        manualAdvance: true, // Force manual transitions
});

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:04:16.620

我认为css没有错误，错误在于您的页面本身。重新检查为缩略图设置的路径和相同缩略图的较大图像的路径。仅当存在冲突路径时才会出现此类问题。

# java - Spring MVC - REST Web 服务。Bean 验证消息

> ID：16139637
> 
> 赞同：0
> 
> 时间：2013-04-22T04:51:44.547
> 
> 标签：java, rest, spring-mvc, error-handling, bean-validation

我试图找出在我的 Spring MVC 应用程序中显示正确验证消息的方法。

这是示例 Bean：

```
@Entity
@Table(name="employees")
public class Person {

    private Integer person_id;
    private String name;
    private String name2;
    private String email;
    private double phone;
    private String desc;

    @Id
    @Max(value=500)
    @Column (name="id")
    public Integer getPerson_id() {
        return person_id;
    }

    public void setPerson_id(Integer person_id) {
        this.person_id = person_id;
    }

    @NotNull
    @NotEmpty
    @Column (name="fn")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Column(name="ln")
    public String getName2() {
        return name2;
    }
    public void setName2(String name2) {
        this.name2 = name2;
    }

    @Email
    @Column (name="em", unique = true)
    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }

    @Column(name="phone")
    public double getPhone() {
        return phone;
    }
    public void setPhone(double phone) {
        this.phone = phone;
    }

    @Column (name="de")
    public String getDesc() {
        return desc;
    }
    public void setDesc(String desc) {
        this.desc = desc;
    }

    public String toString() {
        return getName() + " - " + getName2() + " - " +  getEmail();
    }
} 
```

我的控制器方法：

```
 //POST
    @RequestMapping(value="/persons", method = RequestMethod.POST, headers="Accept=*/*", 
                    consumes="application/json")
public String getAllPersons(@RequestBody @javax.validation.Valid Person p, BindingResult br){
    System.out.println( br.getAllErrors());

    personService.savePerson(p);
    return "redirect:persons.htm"; // redirects to the method below.
}

 //GET
 @RequestMapping(value="/persons", method =  RequestMethod.GET, headers="Accept=*/*", 
                    produces="application/json")
 @ResponseBody
 public List<Person> getAllPersons(){
   List<Person> persons = personService.listPersons();
   for (Person person : persons) {
    System.out.println(person.getEmail());
   }

   if ( persons == null ) {
      return null;
   } 

    return persons;
 } 
```

这工作正常。但是当出现验证错误时。我只是得到简单的信息：

```
 validation failed for: com.springmvcsample.controller.Person 
```

它没有字段和失败的验证。

如何获取未通过验证的字段名称？我不认为我可以从`BindingResults`对象中获取归档名称。

我已经搜索了一个例子。但是我得到了各种各样的例子，但没有像我需要做的那样。

我的异常处理程序方法：

```
@ExceptionHandler(Exception.class)
@ResponseBody
public String handleException( Exception e ) {
    return e.getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:17:23.447

`getAllErrors()`返回一个`List<ObjectError>`。你应该迭代那些。

将您的方法更改为类似的方法

```
@RequestMapping(value="/persons", method = RequestMethod.POST, headers="Accept=*/*", 
                consumes="application/json")
public String getAllPersons(@RequestBody @javax.validation.Valid Person p, BindingResult br){
    if (br.hasErrors()) {
        List<ObjectError> errors = br.getAllErrors();
        for (ObjectError error : errors) { // iterate through all the errors
            System.out.println(error.getDefaultMessage()); // or log it somewhere else
        }
        return "redirect:error.htm"; // some error page
    } else {
        personService.savePerson(p);
        return "redirect:persons.htm";
    }
} 
```

一些约束，比如`@Max`有一个`message`字段，您可以使用它来设置上面使用的默认消息。

```
@Id
@Max(value=500, message = "The person id cannot be larger than 500.")
@Column (name="id")
public Integer getPerson_id() {
    return person_id;
} 
```

使用它来添加自定义消息。

该类`BindingResult`还有其他方法可用于查找导致验证错误的实际字段。[看看这里](http://static.springsource.org/autorepo/docs/spring/3.2.0.M1/api/org/springframework/validation/Errors.html#getFieldErrors%28%29)。

# apache - 重写平板电脑和智能手机的 url

> ID：16139638
> 
> 赞同：0
> 
> 时间：2013-04-22T04:51:54.613
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, url-rewrite-module

我正在使用 Apache 的重写 url。.htaccess 文件包含以下重定向规则。我的要求是，每当我点击 url`www.temp.com/card`时，它应该根据设备在内部调用该特定`.do`的 .

例如，如果我在智能手机`www.temp.com/card`内部输入，它应该调用 `www.temp.com/pa/spCard.do`.

我尝试了以下规则，但问题是某些平板电脑具有 android，因此在平板电脑中它总是进入 smarphone `.do`。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^card/?$ /pa/spCard.do?uri=$1 [QSA]

RewriteCond %{HTTP_USER_AGENT} "ipad" [NC]
RewriteRule ^card/?$ /pa/tabCard.do?uri=$1 [QSA]

RewriteRule ^card/?$ /pa/webCard.do?uri=$1 [QSA]
</IfModule> 
```

有什么方法可以区分 Android 手机和平板电脑（使用用户代理字符串）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:26:31.073

[`L`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)当您检测到设备时，您必须通过添加标志来停止进一步重写

```
RewriteRule ^card/?$ /pa/spCard.do?uri=$1 [L,QSA] 
```

而且您没有`$1`在重写规则中捕获任何地方。此外，URL 始终为`card`，因此您可以将规则简化为

```
RewriteRule ^card/?$ /pa/spCard.do [L] 
```

或者

```
RewriteRule ^card/?$ /pa/spCard.do?uri=$0 [L,QSA] 
```

如果你需要`uri`参数。

当然，与`tabCard.do`和相同。`webCard.do`

要区分 Android 手机和平板电脑，请参阅[Chrome for Android User-Agent](https://developers.google.com/chrome/mobile/docs/user-agent)。不幸的是，这不适用于所有平板电脑。`android.*mobile`但至少，您可以通过指定第一条规则和仅`android`使用第二条规则来淘汰一些平板电脑

```
RewriteCond %{HTTP_USER_AGENT} android.*mobile|blackberry|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile [NC]
RewriteRule ^card/?$ /pa/spCard.do?uri=$0 [L,QSA]

RewriteCond %{HTTP_USER_AGENT} android|ipad [NC]
RewriteRule ^card/?$ /pa/tabCard.do?uri=$0 [L,QSA] 
```

有了这些条件，您将知道您在第二条规则中有平板电脑，在第一条规则中有手机*或*平板电脑。

# c# - 我们什么时候应该在 C# 中使用事件

> ID：16139649
> 
> 赞同：1
> 
> 时间：2013-04-22T04:52:28.257
> 
> 标签：c#, wpf, event-handling, conceptual

我是 C# 和 WPF 的新手。我刚刚学习了 C# 中的异步编程。我们提出事件和一些我们捕捉到这个事件的地方。

这种方法的优点是我们不需要直接调用对象方法。示例我们从数据库加载数据，然后在加载数据方法完成后，它会引发事件`LoadDataSuccessfully` 然后主类捕获此事件并引发事件`UpdateGUIAfterLoadDataSuccessfully`，其他一些控件将捕获此事件并更新 GUI。

但现在我想可能是......我在我的项目中使用它太多了，可能是我过度使用它太多了。请给我一些建议，什么时候应该使用 Event，什么时候应该使用传统方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:30:07.697

当发起动作的代码不适合直接了解对该动作作出反应的代码时，应使用事件。

让我们借助示例进行解释

**问题**

在您的系统中，您收到了发送给您的数据对象，说您每分钟从外部系统发送 50 个数据对象。收到此数据后，您需要让另一个对象对其进行处理。

在这种情况下使用事件或简单的方法调用会更好吗？

**回答**

一方面，一个事件在这里听起来很合适，因为处理数据接收的代码不应该依赖于对所述数据执行某些操作的代码的实现。否则，数据接收代码现在负责两件事 - 接收数据*并*委托处理它。

另一方面，如果数据的特定处理与外部调用者发送数据的行为直接相关，则将其设为函数调用可能更有意义

看看[这个](http://www.claassen.net/geek/blog/2007/12/action-func-never-write-another.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:32:50.660

以下是对您上面所写内容的一些评论/答案

“这种方法的好处是我们不需要直接调用对象方法。” – 是的，但这并不意味着您应该为所有事情发生事件并完全避免显式方法调用。Kyle 提供的示例是一个很好的示例。另外——看看默认情况下.NET中事件是如何使用的——它们只使用if来异步事件（鼠标单击、鼠标悬停等）

“示例我们从数据库加载数据，然后在加载数据方法完成后，它会引发事件 LoadDataSuccessfully 然后主类捕获此事件并引发事件 UpdateGUIAfterLoadDataSuccessfully，其他一些控件将捕获此事件并更新 GUI。” – 如果数据需要不时刷新但我什至不确定，我只会使用这种方法。不使用事件以您在此处描述的方式加载数据是很常见的。请注意，您所写的内容意味着您有一个线程用于加载数据，另一个线程用于 GUI……</p>

“我在我的项目中使用它太多了，可能是我过度使用它。” - 你可能是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:27:40.907

简而言之，“事件”用于让其他对象决定应在事件触发器上执行哪些操作或代码，但我建议开始使用“命令”以获取更多信息[http://msdn.microsoft.com/en-IN /库/ms752308.aspx](http://msdn.microsoft.com/en-IN/library/ms752308.aspx)

# c++ - 从文件中读取绘图点然后缩放

> ID：16139653
> 
> 赞同：0
> 
> 时间：2013-04-22T04:53:00.377
> 
> 标签：c++, opengl

我正在尝试使用 OpenGL 用 C++ 编写一个程序，该程序从文件中读取数据并缩放然后绘制数据。

文件中的数据设置如下：

```
0.017453293\tab 2.01623406\par
0.087266463\tab 2.056771249\par
0.191986218\tab 2.045176705\par
0.27925268\tab 1.971733548\par

```

`\tab`表示 x 坐标和表示`\par`y 坐标。

我编写的代码似乎不起作用。

```
 #include "stdafx.h"
    #include <stdlib.h>
    #define _USE_MATH_DEFINES
    #include <math.h>
    #include "glut.h"
    #include <iostream>
    #include <string>
    #include <fstream>

    int _tmain(int argc, char **argv) {
        void myInit(void);
        void myDisplay(void);
        glutInit(&argc, argv);
        glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
        glutInitWindowSize(640, 480);
        glutInitWindowPosition(100, 150);
        glutCreateWindow("CMPS389 HW2");
        glutDisplayFunc(myDisplay);
        myInit();
        glutMainLoop();
    }

    void myInit(void) {
        glClearColor(0.0, 0.0, 0.0, 0.0);
        glColor3f(1.0, 1.0, 1.0);
        glPointSize(4.0);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluOrtho2D(0.0, 640.0, 0.0, 480.0);
    }

    void myDisplay(void) {
        glClear(GL_COLOR_BUFFER_BIT);
        std::string words = "";
        float locX;
        float locY;

        std::ifstream fileN("curveData.txt");

        while(fileN != NULL) {
            fileN>>words;

            if (words == "\par") {
                            fileN>>locX;
            }
            if (words == "\tab") {
                fileN>>locY;
                glBegin(GL_LINES);
                    glVertex2f(locX*300, locY*300);
                glEnd();
            }
        glFlush();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:27:56.643

你需要真正减少这个。我只关注文件解析部分。这是解决问题的一种方法。请注意，以下内容不检查 \tab 或 \par 后缀。如果你真的需要，你可以自己添加。

```
#include <fstream>
#include <iostream>
#include <string>
#include <iterator>

struct position
{
    double x;
    double y;
};

std::istream& operator>>(std::istream& in, position& p)
{
    std::string terminator;
    in >> p.x;
    in >> terminator;
    in >> p.y;
    in >> terminator;

    return in;
}

int main()
{
    std::fstream file("c:\\temp\\testinput.txt");
    std::vector<position> data((std::istream_iterator<position>(file)), std::istream_iterator<position>());

    for(auto p : data)
        std::cout << "X: " << p.x << " Y: " << p.y << "\n";
    system("PAUSE");
    return 0;
} 
```

# shell - shell脚本在多个文件中查找多个字符串，然后它们就像“字符串-文件名”

> ID：16139654
> 
> 赞同：0
> 
> 时间：2013-04-22T04:53:06.683
> 
> 标签：shell, solaris

我想编写一个 shell 脚本，它从文件中获取输入并在目录中的多个文件中搜索该字符串。我已经成功编写了一个脚本，显示文件名包含匹配的字符串。但我也想打印输入字符串名称。

输入.txt -

```
name1
name2
name3
name4 
```

目录 -`/a/b/`

输出 -

```
name1 : file1, file2
name2 : file1
name3 : no results found
name4 : file4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:52:50.423

许多在 Linux 上被视为理所当然的便利设施在 Solaris（至少 Solaris 10 和更早版本）上不可用。例如，`grep`命令不带`-r`选项，`find`不支持`+`代替`;`. 这让生活变得更加复杂。

我将假设您的文件名（以及搜索的名称）不包含空格或换行符（或其他会导致问题的字符）。我还将假设您使用`ksh`或`bash`不使用`/bin/sh`，以便使用`$(...)`而不是必须使用反引号。

您的要求分为三个部分：

1.  阅读要搜索的名称列表。
2.  查找包含这些名称的文件。
3.  格式化查找文件的结果。

这可以通过以下方式解决：

```
base="/a/b"
while read name
do
    list=$(find "$base" -type f -print | xargs grep -l "$name")
    if [ -z "$list" ]
    then echo "$name : no results found"
    else { echo "$name"
           echo "$list"
         } | awk 'NR == 1 { printf "%s : ", $1; next }
                          { printf "%s%s", pad, $1; pad = ", " }
                  END     { printf "\n" }'
    fi
done < input.txt 
```

如果您想要更巧妙的格式（`$base`例如，删除 中的前缀路径）或分割长行，您可以添加它。我会在`sed`处理输出的脚本中删除前缀`echo "$list"`；更聪明的格式需要更复杂的`awk`脚本。

`bash`在 Mac OS X 10.7.5 上用 etc 测试——不是 Solaris。鉴于文件名假设，唯一值得关注的轻微原因是`next`在`awk`脚本中的使用。如有必要，有一些方法可以解决这个问题，但替代脚本不如上面的版本干净（尽管它不是可怕的糟糕）。

# perl - 如何将输出文件保存在目录中并打印输出文件的名称？

> ID：16139655
> 
> 赞同：0
> 
> 时间：2013-04-22T04:53:07.937
> 
> 标签：perl, bash, unix, sudo, file-handling

我正在解析一个文件，然后从中创建多个输出文件。我想将输出文件保存在执行 perl 脚本的同一文件夹中的特殊目录中。如果该目录已经存在，则将文件放在该目录中。如果用户没有 sudo 权限，则在当前工作目录中创建文件。

```
use strict; use warnings;

sub main {
    my $directory = "pwd/test.pl_output";

    unless(mkdir $directory) {
        return 0; # unable to create directory (it either already exists
                      # or you don't have sudo privileges)  
    } else {
        return $directory
      }
}

if ( my $PATH = main() ){
    open(my $fh, '<', 'input.txt') or die $!;
    open(my $output, '+>', $PATH.'/output.txt') or die $!;
 } else {  # create the output file as usual
    open(my $fh, '<', 'input.txt') or die $!;
    open(my $output, '+>', 'output.txt') or die $!;
 }

 print "All done! Please look in \$output\n"; 
```

在脚本结束时，在我解析和处理文件后，我想将以下内容打印到 shell 提示符：

```
All done! Please look in 'output.txt' for the output. 
```

如果输出文件在新目录中，我想打印以下内容：

```
All done! Please look in 'output.txt' in the directory '~/path/to/output.txt' for the output. 
```

我的代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:35:27.457

您现有的代码存在几个严重的问题。一个是您`pwd`在双引号字符串内部的使用。那是行不通的。您*可以*在反引号内使用`pwd`并捕获输出，但不能在双引号文字内使用。

另一个问题是您的代码逻辑没有达到描述您希望如何优雅地降级目的地的复杂性。

以下代码片段将首先在可执行文件的目录中查找名为“special”的目录。如果它不存在，它将尝试创建它。如果创建失败（可能是因为权限问题），它接下来会在用户当前的工作目录中寻找一个名为“special”的目录。如果它不存在，它将尝试创建它。如果失败，它将以描述性消息结束。

如果它超过了这一点，那么“特殊”目录要么是预先存在的，要么是沿着允许的路径之一创建的。接下来，打开文件。如果打开输出文件失败，我们就死了。否则，继续并可能写入文件。然后关闭输入和输出文件。最后，打印可以找到输出文件的路径。

```
use strict;
use warnings;

use FindBin;
use File::Path qw( make_path );

my $special_dir = 'special';
my $filename    = 'my_file.txt';

my $bin = $FindBin::Bin;

my $path;

if( not defined( $path = get_path( "$bin/$special_dir", "./$special_dir" ) ) ) {
  die "Unable to find or create a suitable directory for output file.";
}

my $output_filename = "$path/$filename";

open my $in_fh, '<', 'input.txt' or die $!;
open my $out_fh, '+>', $output_filename or die $!;

# Do whatever it is you want to do with $in_fh and $out_fh....

close $out_fh or die  $!;
close $in_fh  or warn $!;

print "All done! Please look in $output_filename for the output.\n";

sub get_path {
  my @tries = @_;
  my $good_path;
  for my $try_path ( @tries ) {
    if( -e $try_path and -d _ and -w _ ) {          # Path exists. Done.
      $good_path = $try_path;
      last;
    }
    elsif( eval { make_path( $try_path ); 1; } ) {  # Try to create it.
      $good_path = $try_path;                       # Success, we're done.
      last;
    }
  }
                                                    # Failure; fall through to
                                                    # next iteration.  If no
                                                    # more options, loop ends
                                                    # with $path undefined.
  return $good_path;
} 
```

我正在使用 Perl 模块 FindBin 来定位可执行文件。File::Path 用于创建目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:33:22.060

过去有几次，我发现将 perl 脚本与 Shell 脚本一起用于此目的会更好。用于解析的 Perl 脚本和用于文件夹处理的 shell 脚本。并轻松地将 perl 脚本包含在 shell 脚本中。它会更容易和方便。

# php - 字符串中井号之前的特殊字符

> ID：16139658
> 
> 赞同：0
> 
> 时间：2013-04-22T04:53:27.873
> 
> 标签：php, cakephp, runtime-error

我正在开发一个具有在线购买功能的网站。购买成功后，系统会向用户发送确认邮件。邮件包含一个特殊字符。以及当我尝试插入数据库时​​它包含这些字符时。要存储在 mysql 数据类型中的课程名称的数据类型是 varchar(60)

> utf8_general_ci

我尝试了所有可用的重复解决方案，但它们似乎都没有工作..

> 40 节课（包括 5 节课，50 英镑）

我想删除Ã，Â。我怎么能删除它？我用 preg_replace 它似乎没有工作..

# javascript - AngularJS：在单页 应用程序中使用身份验证的基本示例

> ID：16139660
> 
> 赞同：101
> 
> 时间：2013-04-22T04:53:47.537
> 
> 标签：javascript, angularjs, authentication, login

我是[AngularJS](http://angularjs.org/)的新手，并且通过了他们的教程并对此有所了解。

我为我的项目准备了一个后端，每个`REST`端点都需要进行身份验证。

**我想要做什么**
a.) 我想为我的项目创建一个页面`http://myproject.com`。
b.) 一旦用户在浏览器中点击 URL，根据用户是否登录，他会在同一 url 下看到主页/视图或登录页面/视图`http://myproject.com`。
c.) 如果用户没有登录，它会填写表单并且服务器设置一个`USER_TOKEN`会话，因此所有对端点的进一步请求都将根据`USER_TOKEN`

**我的困惑**
a.) 如何使用 AngularJS 处理客户端身份验证？我在[这里](https://github.com/witoldsz/angular-http-auth)和[这里](https://github.com/angular-app/angular-app)看到了，但不明白如何使用它们
b.）如何根据用户是否登录或不在同一个 url 下向用户呈现不同的视图`http://myproject.com`

我是第一次使用 angular.js，对于如何开始真的很困惑。非常感谢任何建议和/或资源。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-10-05T09:20:07.330

我创建了一个 github 存储库，基本上总结了这篇文章：[https ://medium.com/opinionated-angularjs/techniques-for-authentication-in-angularjs-applications-7bbf0346acec](https://medium.com/opinionated-angularjs/techniques-for-authentication-in-angularjs-applications-7bbf0346acec)

[ng-login Github 仓库](https://github.com/alarv/ng-login)

[普朗克](http://embed.plnkr.co/Mvrte4/preview)

我会尽量解释清楚，希望对你们中的一些人有所帮助：

**(1) app.js：**在应用定义上创建认证常量

```
var loginApp = angular.module('loginApp', ['ui.router', 'ui.bootstrap'])
/*Constants regarding user login defined here*/
.constant('USER_ROLES', {
    all : '*',
    admin : 'admin',
    editor : 'editor',
    guest : 'guest'
}).constant('AUTH_EVENTS', {
    loginSuccess : 'auth-login-success',
    loginFailed : 'auth-login-failed',
    logoutSuccess : 'auth-logout-success',
    sessionTimeout : 'auth-session-timeout',
    notAuthenticated : 'auth-not-authenticated',
    notAuthorized : 'auth-not-authorized'
}) 
```

**(2) Auth Service：**以下所有功能均在 auth.js 服务中实现。$http 服务用于与服务器通信以进行身份​​验证过程。还包含授权功能，即是否允许用户执行特定操作。

```
angular.module('loginApp')
.factory('Auth', [ '$http', '$rootScope', '$window', 'Session', 'AUTH_EVENTS', 
function($http, $rootScope, $window, Session, AUTH_EVENTS) {

authService.login() = [...]
authService.isAuthenticated() = [...]
authService.isAuthorized() = [...]
authService.logout() = [...]

return authService;
} ]); 
```

**(3) Session：**保存用户数据的单例。这里的实现取决于你。

```
angular.module('loginApp').service('Session', function($rootScope, USER_ROLES) {

    this.create = function(user) {
        this.user = user;
        this.userRole = user.userRole;
    };
    this.destroy = function() {
        this.user = null;
        this.userRole = null;
    };
    return this;
}); 
```

**(4) 父控制器：**将其视为您应用程序的“主要”功能，所有控制器都继承自该控制器，它是该应用程序身份验证的支柱。

```
<body ng-controller="ParentController">
[...]
</body> 
```

**(5) 访问控制：**要拒绝某些路由的访问，必须执行 2 个步骤：

a）在ui路由器的$stateProvider服务上添加允许访问每个路由的角色数据，如下所示（同样适用于ngRoute）。

```
.config(function ($stateProvider, USER_ROLES) {
  $stateProvider.state('dashboard', {
    url: '/dashboard',
    templateUrl: 'dashboard/index.html',
    data: {
      authorizedRoles: [USER_ROLES.admin, USER_ROLES.editor]
    }
  });
}) 
```

b) 在 $rootScope.$on('$stateChangeStart') 上添加功能以防止用户未授权时状态更改。

```
$rootScope.$on('$stateChangeStart', function (event, next) {
    var authorizedRoles = next.data.authorizedRoles;
    if (!Auth.isAuthorized(authorizedRoles)) {
      event.preventDefault();
      if (Auth.isAuthenticated()) {
        // user is not allowed
        $rootScope.$broadcast(AUTH_EVENTS.notAuthorized);
      } else {
        // user is not logged in
        $rootScope.$broadcast(AUTH_EVENTS.notAuthenticated);
      }
    }
}); 
```

**(6) Auth拦截器：**这个实现了，但是不能在这段代码的范围内检查。在每个 $http 请求之后，此拦截器都会检查状态码，如果返回以下之一，则它会广播一个事件以强制用户再次登录。

```
angular.module('loginApp')
.factory('AuthInterceptor', [ '$rootScope', '$q', 'Session', 'AUTH_EVENTS',
function($rootScope, $q, Session, AUTH_EVENTS) {
    return {
        responseError : function(response) {
            $rootScope.$broadcast({
                401 : AUTH_EVENTS.notAuthenticated,
                403 : AUTH_EVENTS.notAuthorized,
                419 : AUTH_EVENTS.sessionTimeout,
                440 : AUTH_EVENTS.sessionTimeout
            }[response.status], response);
            return $q.reject(response);
        }
    };
} ]); 
```

**PS**通过添加包含在directives.js 中的指令，可以轻松避免第一篇文章中所述的表单数据自动填充错误。

**PS2**用户可以轻松调整此代码，以允许看到不同的路线，或显示不应该显示的内容。逻辑必须在服务器端实现，这只是在您的 ng-app 上正确显示内容的一种方式。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-25T22:11:40.240

我喜欢这种方法并在服务器端实现它，而无需在前端做任何与身份验证相关的事情

> 我最新应用程序的“技术”是..客户不关心身份验证。应用程序中的每一件事都需要先登录，因此服务器总是提供登录页面，除非在会话中检测到现有用户。如果找到 session.user，服务器只发送 index.html。巴姆：-o

查找“Andrew Joslin”的评论。

[https://groups.google.com/forum/?fromgroups=#!searchin/angular/authentication/angular/POXLTi_JUgg/VwStpoWCPUQJ](https://groups.google.com/forum/?fromgroups=#!searchin/angular/authentication/angular/POXLTi_JUgg/VwStpoWCPUQJ)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-17T13:40:49.797

我在这里回答了一个类似的问题：[AngularJS Authentication + RESTful API](https://stackoverflow.com/questions/18325324/angularjs-authentication-restful-api/20623813#20623813)

* * *

我为[UserApp编写了一个](https://www.userapp.io/)[AngularJS 模块](https://github.com/userapp-io/userapp-angular)，它支持受保护/公共路由、登录/注销时重新路由、用于状态检查的心跳、将会话令牌存储在 cookie 中、事件等。

您可以：

1.  修改模块并将其附加到您自己的 API，或者
2.  将该模块与[UserApp](https://www.userapp.io/)（基于云的用户管理 API）一起使用

[https://github.com/userapp-io/userapp-angular](https://github.com/userapp-io/userapp-angular)

如果您使用 UserApp，则不必为用户内容编写任何服务器端代码（不仅仅是验证令牌）。参加[Codecademy 上的课程](http://www.codecademy.com/courses/web-beginner-en-v2b3k)来尝试一下。

以下是它如何工作的一些示例：

*   **如何指定哪些路由应该是公开的，哪些路由是登录表单：**

    ```
    $routeProvider.when('/login', {templateUrl: 'partials/login.html', public: true, login: true});
    $routeProvider.when('/signup', {templateUrl: 'partials/signup.html', public: true});
    $routeProvider.when('/home', {templateUrl: 'partials/home.html'}); 
    ```

    `.otherwise()`路由应设置为您希望用户在登录后重定向的位置。例子：

    `$routeProvider.otherwise({redirectTo: '/home'});`

*   **带有错误处理的登录表单：**

    ```
    <form ua-login ua-error="error-msg">
        <input name="login" placeholder="Username"><br>
        <input name="password" placeholder="Password" type="password"><br>
        <button type="submit">Log in</button>
        <p id="error-msg"></p>
    </form> 
    ```

*   **带有错误处理的注册表单：**

    ```
    <form ua-signup ua-error="error-msg">
      <input name="first_name" placeholder="Your name"><br>
      <input name="login" ua-is-email placeholder="Email"><br>
      <input name="password" placeholder="Password" type="password"><br>
      <button type="submit">Create account</button>
      <p id="error-msg"></p>
    </form> 
    ```

*   **退出链接：**

    `<a href="#" ua-logout>Log Out</a>`

    （结束会话并重定向到登录路由）

*   **访问用户属性：**

    使用服务访问用户属性`user`，例如：`user.current.email`

    或者在模板中：`<span>{{ user.email }}</span>`

*   **隐藏仅在登录时才可见的元素：**

    `<div ng-show="user.authorized">Welcome {{ user.first_name }}!</div>`

*   **根据权限显示一个元素：**

    `<div ua-has-permission="admin">You are an admin</div>`

并且要对您的后端服务进行身份验证，只需使用`user.token()`获取会话令牌并将其与 AJAX 请求一起发送。在后端，使用[UserApp API](https://app.userapp.io/#/docs/)（如果您使用 UserApp）来检查令牌是否有效。

如果您需要任何帮助，请告诉我！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-25T11:52:52.410

在 angularjs 中，您可以创建 UI 部分、服务、指令以及 angularjs 中代表 UI 的所有部分。这是一项很好的技术。

作为任何刚接触这项技术并想要验证“用户”身份的人，我建议使用 c# web api 的强大功能。为此，您可以使用 OAuth 规范，该规范将帮助您建立强大的安全机制来验证用户身份。使用 OAuth 构建 WebApi 后，您需要调用该 api 以获得令牌：

```
var _login = function (loginData) {

        var data = "grant_type=password&username=" + loginData.userName + "&password=" + loginData.password;

        var deferred = $q.defer();

        $http.post(serviceBase + 'token', data, { headers: { 'Content-Type': 'application/x-www-form-urlencoded' } }).success(function (response) {

            localStorageService.set('authorizationData', { token: response.access_token, userName: loginData.userName });

            _authentication.isAuth = true;
            _authentication.userName = loginData.userName;

            deferred.resolve(response);

        }).error(function (err, status) {
            _logOut();
            deferred.reject(err);
        });

        return deferred.promise;

    }; 
```

一旦获得令牌，您就可以在 Token 的帮助下从 angularjs 请求资源，并使用 OAuth 规范访问在 web Api 中保持安全的资源。

请查看以下文章以获得更多帮助：-

[http://bitoftech.net/2014/06/09/angularjs-token-authentication-using-asp-net-web-api-2-owin-asp-net-identity/](http://bitoftech.net/2014/06/09/angularjs-token-authentication-using-asp-net-web-api-2-owin-asp-net-identity/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-17T12:19:44.843

> 我认为每个 JSON 响应都应该包含一个属性（例如 {authenticated: false}），并且客户端必须每次都对其进行测试：如果为 false，那么 Angular 控制器/服务将“重定向”到登录页面。

如果用户捕获 de JSON 并将 bool 更改为 True，会发生什么？

我认为你永远不应该依赖客户端来做这些事情。如果用户未通过身份验证，服务器应该只重定向到登录/错误页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-12T08:14:52.843

```
var _login = function (loginData) {

        var data = "grant_type=password&username=" + loginData.userName + "&password=" + loginData.password;

        var deferred = $q.defer();

        $http.post(serviceBase + 'token', data, { headers: { 'Content-Type': 'application/x-www-form-urlencoded' } }).success(function (response) {

            localStorageService.set('authorizationData', { token: response.access_token, userName: loginData.userName });

            _authentication.isAuth = true;
            _authentication.userName = loginData.userName;

            deferred.resolve(response);

        }).error(function (err, status) {
            _logOut();
            deferred.reject(err);
        });

        return deferred.promise;

    }; 
```

# grails - grails 1.3.7 中添加菜单和菜单项

> ID：16139664
> 
> 赞同：0
> 
> 时间：2013-04-22T04:54:12.733
> 
> 标签：grails

我想在登录到主页后重定向用户。在那里我需要添加菜单和子菜单以及菜单项。我必须使用 grails 1.3.7。但我不知道该怎么做。谁能建议我怎么做？任何代码示例，请提供任何链接。我非常非常需要它。

# jhtmlarea - JHTML 区域编辑器剪切、复制、粘贴在 Firefox 中不起作用。它在 IE 中工作

> ID：16139665
> 
> 赞同：3
> 
> 时间：2013-04-22T04:54:19.403
> 
> 标签：jhtmlarea

在我的网站应用程序中，我使用的是 Jhtml 区域编辑器。

在编辑器中剪切/复制/粘贴不起作用。

单击剪切/复制/粘贴时，会显示以下错误。

网站（url）获取属性 Clipboard.cutcopy 源文件的权限被拒绝

任何人都可以知道这个错误吗？

谢谢并恭祝安康

克里希南

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T12:32:25.183

你用什么浏览器？

您的安全首选项似乎阻止了网络浏览器访问剪贴板。更正安全首选项，一切都会好的。

# php - 函数中的空结果

> ID：16139669
> 
> 赞同：-3
> 
> 时间：2013-04-22T04:54:36.457
> 
> 标签：php, mysql

我正在建立一个分类网站，但每个类别都有自己的字段，当我生成字段时出现一个错误的添加页面

```
NULL
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /Applications/MAMP/htdocs/test.com/inc/db.inc.php on line 36 
```

这是我使用的功能

```
function getCategoryFieldsById($cid)
{
    $sql = "select * from fields where categoryID = $cid order by fi_order";
    $result = $this->query($sql);
    $no     = $this->getNumRows($result);

    if($no)
    {   return $result; }
    else
    {
        $pid = $this->getParentId($cid);
        if($pid)
            $this->getCategoryFieldsById($pid); 
        else
            return 0;
    } 
} 
```

问题是代表数据库行返回 NULL，我可以打印 $no 并看到有 14 行但是当进入 if() 时它看不到数字

```
select * from fields where categoryID = 35 order by fi_order
0
select * from fields where categoryID = 34 order by fi_order
0
select * from fields where categoryID = 1 order by fi_order
14
NULL
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /Applications/MAMP/htdocs/izomart.com/inc/db.inc.php on line 36 
```

这是我的 MySQL 函数

```
function query($query) {
    $this->theQuery = $query;
    $result=mysql_query($query) or print(mysql_error());
    return $result;
}

function getNumRows($result){
    return mysql_num_rows($result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:59:49.307

当您递归调用一个最终应该返回一个值的函数时，当您进行递归调用时，您需要返回该值并传递到链上。

基本上，你需要做的就是改变线路

```
$this->getCategoryFieldsById($pid); 
```

至

```
return $this->getCategoryFieldsById($pid); 
```

这将确保当找到值并返回到 THIS 调用时，THIS 调用将值返回到调用方法的原始位置。

# python - 使用 sqlite 的子进程、编码和日志记录问题

> ID：16139672
> 
> 赞同：1
> 
> 时间：2013-04-22T04:54:51.107
> 
> 标签：python, python-2.7, sqlite, subprocess, fuzzing

我已经搜索了很长一段时间来寻找这个问题的答案，我认为这在很大程度上与我不熟悉 subprocess 模块的工作原理有关。如果有人感兴趣，这是一个模糊测试程序。另外，我应该提到这一切都是在 Linux 中完成的（我认为这是相关的）我有一些这样的代码：

```
# open and run a process and log get return code and stderr information
process = subprocess.Popen([app, file_name], stdout=subprocess.PIPE,
                                             stderr=subprocess.PIPE)
return_code = process.wait()
err_msg = process.communicate()[1]

# insert results into an sqlite database log
log_cur.execute('''INSERT INTO log (return_code, error_msg) 
                   VALUES (?,?)''', [unicode(return_code), unicode(error_msg)])
log_db.commit() 
```

100 次中有 99 次都可以正常工作，但有时我会收到类似于以下内容的错误：

UnicodeDecodeError：“utf8”编解码器无法解码位置 43 中的字节 0xce：无效的继续字节

**编辑：全跟踪**

```
Traceback (most recent call last):
  File "openscadfuzzer.py", line 72, in <module>
    VALUES (?,?)''', [crashed, err_msg.decode('utf-8')])
  File "/home/username/workspace/GeneralPythonEnv/openscadfuzzer/lib/python2.7/encodings/utf_8.py",    line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xdb in position 881: invalid continuation byte 
```

这是子进程、我使用它运行的应用程序还是我的代码的问题？任何指针都会受到赞赏（尤其是当它与子进程 stdout 和 stderr 的正确使用有关时）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:32:23.300

我的猜测是问题出在这个电话上：

```
unicode(error_msg) 
```

error_msg 的类型是什么？我相当确定默认情况下，子进程 API 将返回子程序输出的原始字节，调用`unicode`尝试将字节转换为字符（代码点），假设某种编码（在本例中为 utf8）。

我的猜测是这些字节不是有效的 utf8，而是有效的 latin1。您可以指定要在字节和字符之间转换的编解码器：

```
error_msg.decode('latin1') 
```

这是一个示例，希望能证明问题和解决方法：

```
>>> b'h\xcello'.decode('utf8')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3.2/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xce in position 1: invalid continuation byte

>>> b'h\xcello'.decode('latin1')
'hÎllo' 
```

更好的解决方案可能是让您的子进程输出 utf8，但这取决于您的数据库也能够存储哪些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:33:39.270

您可以在这里找到非常好的 Subprocess 教程[http://pymotw.com/2/subprocess/](http://pymotw.com/2/subprocess/)及其官方文档：http: [//docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)，但是从您的错误're getting 已格式化，似乎不是您的代码，而是您的应用程序收到错误，而您只是看到它，因为您正在收集输出。为了确认这一点，您可以使用简单的循环在代码之外运行您的应用程序`bash`，以查看是否可以再次捕获错误，并在代码中检查应用程序的退出代码 - 当您看到错误时，它应该不同于`0`，如果应用程序正确提供了退出代码。

# javascript - 在嵌入式 javascript 中使用 Ant 变量

> ID：16139674
> 
> 赞同：0
> 
> 时间：2013-04-22T04:55:06.503
> 
> 标签：javascript, ant

我正在编写一些 Ant 脚本，并在我的脚本中使用 ant-contrib.jar 文件。我的 ant 脚本内容遵循代码块，但不能按照我的要求工作。

```
<if>
            <equals arg1="${require.html}" arg2="1"/>
            <then>
                <script language="javascript">
                <![CDATA[                       
                    println("<h3>Selected Project Directory: ${project.dir}</h3>");
                    println("<h3>Generated reports are at the location ${dir.report}</h3>");
                ]]>
                </script>
            </then>
        </if> 
```

我正在尝试在带有 Ant 脚本的嵌入式 JavaScript 中使用 ${project.dir} 变量。在这里使用脚本我正在尝试生成 html 文件。但浏览器上显示的输出如下：

```
Selected Project Directory: ${project.dir}
Generated reports are at the location ${dir.report} 
```

预期输出：

```
Selected Project Directory: C:\Project
Generated reports are at the location C:\Report 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:08:51.257

[文档说](http://ant.apache.org/manual/Tasks/script.html)，只要属性是有效的 JavaScript 标识符，您就可以直接引用它，就好像它是范围内的 var 一样。由于你的包含一个点，你不能这样做，但你仍然可以通过这种方式访问​​它们：

`println("<h3>Selected Project Directory: " + project.getProperty("project.dir") + "</h3>");`

# matlab - 如何使用 Matlab 将 .doc 文件转换为 PDF？

> ID：16139678
> 
> 赞同：0
> 
> 时间：2013-04-22T04:55:59.273
> 
> 标签：matlab

我正在使用 Matlab 编写代码，该代码执行一些计算并以 .doc 格式写出带有表格和结果的报告。我想将生成的 .doc 报告另存为 PDF 或不可编辑的 word 格式，以便报告未经编辑。我正在使用该`WritetoWordFromMatlab()`功能来写出文件。

我正在寻找一个`actxserver`可以将我的文件保存为 PDF 的命令。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:22:19.657

在 Office 2007 或 2010 中，您可以使用方法，作为参数`Document.ExportAsFixedFormat`传递。在 Matlab 中使用 Word 启动，让它打开你的 .doc 文件，然后用 .pdf 写出 .pdf 。或摆弄直接将其保存为PDF。`wdExportFormatPDF``ExportFormat``actxserver``ExportAsFixedFormat``writetowordfrommatlab`

这是有关文档：http `ExportAsFixedFormat`: [//msdn.microsoft.com/en-us/library/bb256835%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb256835%28v=office.12%29.aspx)。

这是一个示例：

```
filename = fullfile(pwd, 'myfile.docx');
pdf_filename = fullfile(pwd, 'myfile.pdf');

% Create COM server
actx_word = actxserver('Word.Application');
actx_word.Visible = true;
% Open existing document
word_handle = invoke(actx_word.Documents,'Open',filename);

% Save as PDF
invoke(word_handle,'ExportAsFixedFormat',pdf_filename,'wdExportFormatPDF');            

% Close the window
invoke(word_handle,'Close');            
% Quit Word
invoke(actx_word,'Quit');            
% Close Word and terminate ActiveX
delete(actx_word); 
```

# r - 如何在 R 中定义变量批次

> ID：16139691
> 
> 赞同：0
> 
> 时间：2013-04-22T04:57:37.240
> 
> 标签：r

我在R中有很多文件要作为变量读取。当然，我们可以一个一个地读取它们，例如：</p>

```
average<-read.csv("average.csv")
variance<-read.csv("variance.csv")
kurt<-read.csv("kurt.csv")
... 
```

但这样做是微不足道的。有没有一些有效的方法来实现这个目标？我想我们可以像下面这样循环地做：</p>

```
file_names<-c("average.csv","variance.csv","kurt.csv",...)
for(i in 1:n) # n is the number of files to read 
{
  *<-read.csv(file_names[i])
} 
```

问题是如何在“*”部分编写代码，以便我们可以将这些文件中的内容转换为这些变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:02:45.400

最惯用的 R 方法是使用列表

```
file_names <- c("average.csv","variance.csv","kurt.csv")

# you can get nice names by using tools::file_path_sans_ext
library(tools)
names(file_names) <- file_path_sans_ext(file_names)

dataList <- lapply(file_names, read.csv)

# if you really wanted to copy these to the global environment as objects

list2env(dataList, env = globalenv()) 
```

# php - 似乎无法找到 SQL 语句出错的地方

> ID：16139694
> 
> 赞同：0
> 
> 时间：2013-04-22T04:58:05.173
> 
> 标签：php, mysql

我可能只是太累了，错过了一些非常简单的东西，但我想不通。

尝试执行以下查询：

```
INSERT INTO chars (charName,charClass,charLevel,charLife,charES,charInt,charStr,charDex)
VALUES (mlkauschwitz,ranger,81,4500,50,50,300,250)
ON DUPLICATE KEY UPDATE charClass=ranger,charLevel=81,charLife=4500,charES=50,charInt=50,charStr=300,charDex=250; 
```

导致此错误：

```
"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'mlkauschwitz' in 'field list'" 
```

为什么它认为一个值是一个字段？

使用以下 PHP：

```
include "db.php";
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$char = array(
    'charClass'=>'ranger',
    'charDex'=>'250',
    'charES'=>'50',
    'charInt'=>'50',
    'charLevel'=>'81',
    'charLife'=>'4500',
    'charName'=>'mlkauschwitz',
    'charStr'=>'300',
);
$sql = 'INSERT INTO chars (charName,charClass,charLevel,charLife,charES,charInt,charStr,charDex) VALUES ('.$char["charName"].','.$char["charClass"].','.$char["charLevel"].','.$char["charLife"].','.$char["charES"].','.$char["charInt"].','.$char["charStr"].','.$char["charDex"].') ON DUPLICATE KEY UPDATE charClass='.$char["charClass"].',charLevel='.$char["charLevel"].',charLife='.$char["charLife"].',charES='.$char["charES"].',charInt='.$char["charInt"].',charStr='.$char["charStr"].',charDex='.$char["charDex"].';';
$stmt = $conn->prepare($sql);
$stmt->setFetchMode(PDO::FETCH_ASSOC);
if ($stmt) {
    try {
        $stmt->execute();
    }
    catch (PDOException $e) {
        var_dump($e);
    }
} 
```

charName 字段是唯一的/主要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T05:00:40.927

生成的 SQL 中的值需要被引用。使用 pdo，您应该执行以下操作：

```
$sql = 'INSERT INTO chars (charName,charClass,charLevel,charLife,charES,charInt,charStr,charDex) VALUES (?, ?, ?, ?, ?, ?, ?, ?) ON DUPLICATE KEY UPDATE charClass='.$char["charClass"].',charLevel='.$char["charLevel"].',charLife='.$char["charLife"].',charES='.$char["charES"].',charInt='.$char["charInt"].',charStr='.$char["charStr"].',charDex='.$char["charDex"].';';
$stmt = $conn->prepare($sql);
$stmt->setFetchMode(PDO::FETCH_ASSOC);
if ($stmt) {
    try {
        $stmt->execute(array($char["charName"],$char["charClass"],$char["charLevel"],$char["charLife"],$char["charES"],$char["charInt"],$char["charStr"],$char["charDex"]));
    }
    catch (PDOException $e) {
        var_dump($e);
    }
} 
```

不确定确切的语法，但您可以在手册中查找。这可确保 PDO 正确引用所有值，并避免 mysql 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:01:46.237

如果 mlkauschwitz 不是列而是值，则您已引用它

见 mysqli_escape_string()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:13:34.610

将您的查询更改为`INSERT INTO chars (charName,charClass,charLevel,charLife,charES,charInt,charStr,charDex) VALUES ('mlkauschwitz','ranger','81','4500','50','50','300','250') ON DUPLICATE KEY UPDATE charClass='ranger',charLevel='81',charLife='4500',charES='50',charInt='50',charStr='300',charDex='250';`

# c# - 无法重新安装windows服务

> ID：16139695
> 
> 赞同：0
> 
> 时间：2013-04-22T04:58:07.430
> 
> 标签：c#, windows-services

我已经使用**`InstallUtill.exe`**命令安装了 c# windows 服务。由于一些错误，服务被禁用。
所以我尝试启用服务，使用 service.msc将其**启动类型**更改为**“自动” 。**但它仍然没有被启用。所以我使用卸载服务**`InstallUtill.exe`**。服务被卸载后它仍然显示在`services.msc`. 所以我做的是，我打开**windows注册表**，删除了指定服务的条目。< BR/>然后我尝试重新安装服务。但是无法安装服务。消息是，**“指定的服务已被标记删除”**。当我再次检查 services.msc 时，服务仍在显示。但在描述选项卡中显示以下消息。**“未能读取描述错误代码：2”**。

有人可以帮我重新安装 Windows 服务吗？

# php - 将日期转换为Mysql日期格式php

> ID：16139696
> 
> 赞同：3
> 
> 时间：2013-04-22T04:58:09.010
> 
> 标签：php, mysql, date

我的数据库中有这种日期格式

```
19th April 2013 
```

我想把它转换成

```
2013-04-19 
```

我使用了 if,else 条件，但是它变得太长太复杂了。是否有任何内置函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T04:59:31.893

使用`PHP's` `date`功能

```
date("Y-m-d",strtotime("19th April 2013")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:06:29.990

是的，下面的代码更改日期格式

```
date("Y-m-d",strtotime("19th April 2013")); to get as 2013-04-19 
```

第二个

```
 date("Y/m/d",strtotime("17th April 2013")); to get as 2013-04-17 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T05:00:57.340

您仍然可以通过查询来做到这一点，这样您就不会进行任何转换`PHP`。由于该列的数据类型是字符串，因此您需要使用 将其转换为有效日期`STR_TO_DATE`。

```
SELECT DATE_FORMAT(STR_TO_DATE(columnname, '%D %M %Y'), '%Y-%m-%d') new_format
FROM   TableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7281e/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T05:03:57.830

以下 PHP 代码将日期转换为所需格式

```
 $date = '19th April 2013'
 echo date('Y-m-d', strtotime($date)); 
```

其他格式如下

```
April 22, 2013  date("F d, Y",strtotime($myrow['date']));
Monday, April 22, 2013  date("l, F d, Y",strtotime($myrow['date']));
Apr 22, 2013    date("M d, Y",strtotime($myrow['date']));
22 April 2013   date("d F Y",strtotime($myrow['date']));
22 Apr 2013 date("d M Y",strtotime($myrow['date']));
Mon, 22 Apr 2013    date("D, d M Y",strtotime($myrow['date']));
Monday, the 22nd of April, 2013 date("l",strtotime($myrow['date'])) . ", the " .   date("jS",strtotime($myrow['date'])) . " of " . date("F, Y",strtotime($myrow['date'])); 
```

# javascript - Javascript VAR 的问题

> ID：16139697
> 
> 赞同：0
> 
> 时间：2013-04-22T04:58:09.080
> 
> 标签：javascript

我在使用下面的代码时遇到问题。如果我删除`var user_id`and `var company_id`，则 javascript 可以正常工作。

为什么这不起作用？

```
var user_id = user_id;  
var company_id = company_id;

if (pageNum == 1)
    strActionPage = CurrentPath + "upload.php?act=store&user_id=" + user_id;

else

    strActionPage = CurrentPath + "upload.php?act=store&company_id" + company_id;

for(i=0;i<4;i++){
    if(document.getElementsByName("ImageType").item(i).checked == true){
        strImageType  = i + 1;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T05:01:56.797

该`var`语句在当前函数的范围内声明了一个变量，隐藏了更高范围内具有相同名称的任何变量。

您有问题的两行代码正在创建新变量`user_id`，并且`company_id`在此函数的整个持续时间内完全隐藏外部变量，然后将它们分配给自己。

因此，您将这些变量中的每一个设置为`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:04:59.940

我认为他们不需要重新分配像`user_id`and这样的用户变量`company_id`，它们来自任何地方，比如来自被调用的函数，所以它足以使用

```
if (pageNum == 1)
    strActionPage = CurrentPath + "upload.php?act=store&user_id=" + user_id;

else

    strActionPage = CurrentPath + "upload.php?act=store&company_id" + company_id;

for(i=0;i<4;i++){
    if(document.getElementsByName("ImageType").item(i).checked == true){
        strImageType  = i + 1;
        break;
    }
} 
```

没有

```
var user_id = user_id;  
var company_id = company_id; 
```

# java - JEdi torPane 使用 Google Docs 显示原始 HTML

> ID：16139702
> 
> 赞同：0
> 
> 时间：2013-04-22T04:58:49.913
> 
> 标签：java, css, url, jtextpane, jeditorpane

我正在尝试将已发布的 Google Doc 加载到`JEditorPane`.

这是文档：[**链接**](https://docs.google.com/document/d/1jG_rNCfVSD8yhHB9ZgA5YicXK_yDOl9T-fItIgmKa-o/pub)。

以下是 JEditorPane 的呈现方式：

![渲染](https://i.stack.imgur.com/pKigg.png)

我对图像的观察：

1.  正在正确获取 HTML。
2.  `JEditorPane`至少支持*一些*CSS（注意顶部的阴影条）。
3.  `JEditorPane``<style type="text/css">`在 HTML 源代码的第二个块中变得非常困惑。是因为`<style>`a 在里面`<div>`而不是在里面`<head>`？
4.  在代码中的某些空格处存在奇怪的伪影（U+00C2，十进制 194；带有抑扬符的拉丁大写字母 A），这些空格实际上是香草`U+0020`空格。这可能与字节顺序有关吗？（我已经验证了这些字符实际上是通过`println`ing 每一行来获取的。）

我已经阅读了有关该主题的[StackOverflow 帖子](https://stackoverflow.com/a/1790543/732016)并实施了它，但它并没有解决问题。

我还注意到，CSS 支持总体上是稀疏的（例如，渲染`http://www.stackoverflow.com`会产生带有大量蓝框的不良结果），但没有公开实际的 HTML 代码或工件。

使用 a`JTextPane`而不是 a`JEditorPane`会产生相同的结果。

将 DTD 添加到文档顶部（尝试了 XHTML 4.1 Transitional 和 HTML5's `<!DOCTYPE html>`）也不起作用。

关于为什么会发生这种情况以及如何解决它的任何想法？

为了尽快获得更好的帮助，这是我的 SSCCE：

```
public class GoogleDocSSCCE extends JPanel {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        GoogleDocSSCCE gdv = new GoogleDocSSCCE();
        gdv.docId = "1jG_rNCfVSD8yhHB9ZgA5YicXK_yDOl9T-fItIgmKa-o";
        gdv.refreshDocument();
        frame.setContentPane(gdv);
        frame.setSize(400, 400);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private final JEditorPane docPane;
    private String docId;
    private static final String PREFIX = "https://docs.google.com/document/d/";
    private static final String SUFFIX = "/pub";

    public GoogleDocSSCCE() {
        super(new BorderLayout());
        docPane = new JEditorPane();
        docPane.setEditable(false);
        docPane.setContentType("text/html");
        add(new JScrollPane(docPane), BorderLayout.CENTER);
        JButton btnRefresh = new JButton("Refresh Document");
        btnRefresh.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                refreshDocument();
            }
        });
        add(btnRefresh, BorderLayout.NORTH);
    }

    public void refreshDocument() {
        if (docId == null || docId.isEmpty()) {
            docPane.setText(new String());
            return;
        }
        docPane.setText("<html><body>Loading...</body></html>");

        new Thread(new Runnable() {
            @Override
            public void run() {
                boolean success = false;
                try {
                    URL u = new URL(PREFIX + docId + SUFFIX);
                    InputStream stream = u.openStream();
                    BufferedReader br = new BufferedReader(
                            new InputStreamReader(stream));
                    StringBuilder sbDocument = new StringBuilder();
                    String line = null;
                    while ((line = br.readLine()) != null) {
                        sbDocument.append(line);
                        sbDocument.append('\n');
                    }
                    docPane.setText(sbDocument.toString());
                    success = true;
                } catch (MalformedURLException e) {
                    JOptionPane.showMessageDialog(GoogleDocSSCCE.this,
                            "The given URL is malformed.",
                            "Error Reading Google Document",
                            JOptionPane.ERROR_MESSAGE);
                    e.printStackTrace();
                } catch (IOException e) {
                    JOptionPane.showMessageDialog(GoogleDocSSCCE.this,
                            "Unable to read the document.",
                            "Error Reading Google Document",
                            JOptionPane.ERROR_MESSAGE);
                    e.printStackTrace();
                } finally {
                    if (!success) {
                        // We failed.
                        docPane.setText(new String());
                    }
                }
            }
        }).start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:28:30.187

请参阅[LoboBrowser](http://lobobrowser.org/browser/api-info.jsp) api。

例子。

```
import org.lobobrowser.gui.*;
import org.lobobrowser.main.*;
import javax.swing.*;

public class Browser extends JFrame {

    public Browser(string docid)
    {
        FramePanel browser = new FramePanel();
        add(browser);
        browser.navigate("https://docs.google.com/document/d/" + docid + "/pub/");
    }

    public static void main(String[] args)
    {
        Browser b = new Browser("1jG_rNCfVSD8yhHB9ZgA5YicXK_yDOl9T-fItIgmKa-o");
        b.setSize(400, 400);
        b.setVisible(true);            
    }

} 
```

# c# - Given the following linq queries, which one is 'more performant'?

> ID：16139703
> 
> 赞同：3
> 
> 时间：2013-04-22T04:59:02.747
> 
> 标签：c#, .net, linq, parallel-processing

Given the following `for each` statement that has some linq in it, I need to iterate through the list as `Distinct`. So I have a number of places I can add the `Distict()` statement.

Can someone please explain which solution I should use and why? I'm very new to using `AsParallel()` so I'm not sure which solution to go with..

### Existing Code (which is missing and needs the `Distinct()`)

```
foreach (var phrase in (something != null 
    ? ListOne.AsParallel() 
    : ListTwo.AsParallel()))
{
 ... // irrelevant for this question 
} 
```

### Option 1: Distincting the entire result.

```
foreach (var phrase in (something != null 
    ? ListOne.AsParallel() 
    : ListTwo.AsParallel()).Distinct())
{
 ... // irrelevant for this question 
} 
```

I feel that this would return too much info back (initially).

### Option 2: Distinct each list, before Parallel

```
foreach (var phrase in (something != null 
    ? ListOne.Distinct().AsParallel() 
    : ListTwo.Distinct().AsParallel()))
{
 ... // irrelevant for this question 
} 
```

### Option 3: Distinct each list, after the Parallel

```
foreach (var phrase in (something != null 
    ? ListOne.AsParallel().Distinct() 
    : ListTwo.AsParallel().Distinct() ))
{
 ... // irrelevant for this question 
} 
```

Yes - I could create my own test code with stopwatches, etc.. but I'm not so much after the metrics, but more the theory (as to what I should do .. because of XXXXX).

** Before this turns into a subjective question and get closed down, please consider your answers. ** Secondly, I understand the perf here is tiny .. so just to iterate, I'm not so much worried about the -actual- perf difference, but the theoretical difference.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T05:12:04.337

Option 1 and 3 will result in the same execution paths. In both cases `Distinct` is called on the result of `AsParallel`. This means that the question really boils down to whether it is better to call Distinct before or after the `AsParallel()`.

Based on the actual implementation of [`ParallelEnumerable.Distinct()`](http://msdn.microsoft.com/en-us/library/dd383943.aspx) which simply uses the non-parallel `Enumerable.Distinct` I would say that it makes no difference at all in your case, because you don't actually have a query here. You are just distincting an existing list. You probably shouldn't be using `AsParallel` here at all.

In case you actually do have a query, it is potentially better to call `Distinct` last, because it won't be executed in parallel and be potentially faster if executed on a smaller set - which has been filtered down in parallel. But this part of the answer needs actual benchmarking to be verified.

# java - 取消以前的请求服务器端

> ID：16139704
> 
> 赞同：3
> 
> 时间：2013-04-22T04:59:05.997
> 
> 标签：java, spring, tomcat, web

在我们的 Web 应用程序中，我们有用户可以选择的不同选项。

如果用户执行不同的选择/选项，则每次选择/操作都会向服务器发送请求，并且响应会显示在 UI 中。如果用户按顺序执行多个操作，则所有请求将分别发送到服务器。当服务器端收到新请求时，我们想取消所有先前的请求。

目前我们正在为每个请求创建新线程，当收到新请求时，该特定用户的所有旧请求都将被取消。请让我们知道这是正确的方法还是有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:05:40.500

如果您试图取消对 tomcat 的请求，那可能会很困难。但是，如果您使用 ajax 向服务器提交请求，您将能够在客户端中止请求并发送新请求。这都是假设请求是幂等的。

# joomla2.5 - ReCaptcha - Joomla！“无法打开套接字”总是

> ID：16139711
> 
> 赞同：0
> 
> 时间：2013-04-22T04:59:44.210
> 
> 标签：joomla2.5, security, captcha, recaptcha

我为我的 Joomla 配置了 Re-Captcha！项目。但它总是显示“无法打开套接字”。我尝试了很多，如各种论坛中所述。Joomla 是否有任何错误/问题！2.5 和验证码？

是否有任何替代验证码（免费）可用？

我尝试成功安装“Tincaptcha”，但验证码图像和验证码刷新也没有显示和工作。

任何想法提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:44:28.947

您是否创建了验证码公钥/私钥？

[http://docs.joomla.org/How_do_you_use_Recaptcha_in_Joomla_2.5%3F](http://docs.joomla.org/How_do_you_use_Recaptcha_in_Joomla_2.5%3F)

法比奥@fcerullo

# php - 如何设计基于分层角色的访问控制系统

> ID：16139712
> 
> 赞同：41
> 
> 时间：2013-04-22T04:59:47.347
> 
> 标签：php, mysql, permissions, hierarchy, rbac

基本交易是，我们为我们的项目定制了一个“kickstart”。为此，我们正在考虑重做用户控件。我知道有很多关于一般 rbac 的问题，但我在分层 rbac 上找不到任何问题？

我们的要求是：

*   角色可以分配给组权限
*   如果角色没有权限条目，则自动拒绝
*   可以为用户授予覆盖权限
*   覆盖权限的用户是授予或拒绝
*   如果用户被明确拒绝权限，无论什么角色说“授予”，覆盖都会获胜。
*   用户可以有多个角色
*   角色可以有层次结构
*   角色可以从其他角色继承（例如“论坛超级版主”角色是“论坛版主”和“系统维护者”，而“论坛版主”角色已经继承自“论坛用户”角色）
*   从拒绝或授予权限的另一个角色继承的角色会覆盖其子权限
*   权限按“模块”分组（例如，“博客”模块可以有“编辑条目”权限，“论坛”模块可以有“编辑条目”权限，它们不会冲突）
*   有一个“Everything and Anything”权限，自动授予完全访问权限

因此，这些要求已经解决，这就是我的想法。

### 表：用户

```
id            | int     | unique id 
```

### 表：角色

```
id            | int     | unique id
--------------|---------------------------------------------
title         | varchar | human readable name 
```

### 表：权限

```
id            | int     | unique id
--------------|---------------------------------------------
module        | varchar | module name
--------------|---------------------------------------------
title         | varchar | human readable name
--------------|---------------------------------------------
key           | varchar | key name used in functions 
```

### 表：角色_用户

```
role_id       | int     | id from roles table
--------------|---------------------------------------------
user_id       | int     | id from users table 
```

### 表：Permission_Role

```
id            | int     | unique id
--------------|---------------------------------------------
permission_id | int     | id from permissions table
--------------|---------------------------------------------
role_id       | int     | id from roles table
--------------|---------------------------------------------
grant         | tinyint | 0 = deny, 1 = grant 
```

### 表：Permission_User

```
id            | int     | unique id
--------------|---------------------------------------------
permission_id | int     | id from permissions table
--------------|---------------------------------------------
user_id       | int     | id from users table
--------------|---------------------------------------------
grant         | tinyint | 0 = deny, 1 = grant 
```

好吧，实际上这是一半，我确定的那部分，我卡住的部分是等级角色。

那么，我该如何设计呢？我的想法是，为了保存数据库查询，我只是要在登录时构建权限矩阵并将其保存到会话中，这样查询就不必太简单，因为它们每次登录只运行一次。

我看到的问题是，我需要知道角色的层次结构，以便在解决继承问题之前解决继承的角色权限。

用户权限是容易的部分，每个用户的权限本质上是最终解决的组。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-22T05:51:35.697

有一种方法可以通过在 table 上使用递归关系来实现角色继承，方法`Roles`是让角色引用另一条记录：

![1:n 继承](https://i.stack.imgur.com/4Rkpe.png)

此关系将在记录中添加`1 : n`继承。`Roles`您可以使用此存储函数获得整个层次结构树：

```
CREATE FUNCTION `getHierarchy`(`aRole` BIGINT UNSIGNED)
RETURNS VARCHAR(1024)
NOT DETERMINISTIC
READS SQL DATA
BEGIN
DECLARE `aResult` VARCHAR(1024) DEFAULT NULL;
DECLARE `aParent` BIGINT UNSIGNED;

SET `aParent` = (SELECT `parent` FROM `Roles` WHERE `id` = `aRole`);

WHILE NOT `aParent` IS NULL DO

    SET `aResult` = CONCAT_WS(',', `aResult`, `aParent`);
    SET `aParent` = (SELECT `parent` FROM `Roles` WHERE `id` = `aParent`);

END WHILE;

RETURN IFNULL(`aResult`, '');
END 
```

然后，您可能会通过以下方式获得所有*授予*的权限：

```
SELECT
    `permission_id`
FROM
    `Permission_Role`
WHERE
    FIND_IN_SET(`role_id`, `getHierarchy`({$role}))
    AND
    grant; 
```

如果这还不够，那么你可以做另一个表进行继承：

![n:m 继承](https://i.stack.imgur.com/LcNya.png)

但是，在这种情况下，需要另一个层次获得算法。

* * *

要解决***最重要*** 的问题，您必须获得角色权限和用户权限。然后，将`user`权限`roles`写入`session`.

* * *

另外，我建议删除和中的`grant`列。无需为每个权限***映射***每个权限。足以使用查询：如果有记录，则授予权限，否则 - 不是。如果您需要检索所有权限和状态，您可以使用s.`Permission_Role``Permission_User`*`EXISTS``LEFT JOIN`*

# java - 在 JAVA 代码中生成 xml-schema 文件

> ID：16139716
> 
> 赞同：0
> 
> 时间：2013-04-22T05:00:09.153
> 
> 标签：java, xsd, database-schema

如果我输入了数据库设计，我想通过 java 代码生成一个 xml 模式。在下面的代码中，我从用户那里提取了输入数据库，我想生成给定数据库模式的 xml。

```
public class Table
{
private ArrayList<Column> columns;
private String NAME;
private static int count=0;
public Table() 
{
columns = new ArrayList<Column>();
NAME=new String();

this.NAME="Table"+count;
count++;
}

public void AddColumn(Column column)
{
for(Column c: columns)
{
   if(c.getname().equals(column.getname())){return;}
}

columns.add(column);

}

public void SaveToFile() throws IOException
{

FileWriter fw = new FileWriter("C:/Users/Ashad/Desktop/text.txt", true);
BufferedWriter bw = new BufferedWriter(fw);
 bw.write("\r\n");
 bw.write(this.NAME);
 bw.write("\r\n");

for(Column c: columns)
{
 bw.write("\r\n");
    bw.write(c.getname()+"  ");

    bw.write(c.getdatatype()+"  ");

 if(c.getPK()== true)
{
    bw.write("true"+"  ");

 }    
else
{   bw.write("false"+"  ");

}
if(c.getNN()== true)
{
bw.write("true"+"   ");

}     
else
{bw.write("false"+"  "); } 

}
bw.close();
}

public boolean DeleteColumn(String name)
{
for (Column c : columns)
{
    if (c.getname().equals(name)) {return columns.remove(c);}
}
return false;
}

public void viewColumns()
{
  System.out.append(NAME+"  ");

for(Column c: columns)
{
  System.out.append("\n");
  System.out.append(c.getname()+"  ");

  System.out.append( c.getdatatype()+"  ");

if(c.getPK()== true)
{
System.out.print(true);
}     
else
System.out.print(false);  
}
}

public String getNAME() {

return NAME;
}

}

 public class Column
{
 private String name;
 private String dataType;
 private boolean PK;
 private boolean NN;

 public Column()
{
 String name=new String();
 String dataType=new String();  
 boolean PK=false;
 boolean NN=false;
}  
  public String getname(){return name;}
 public String getdatatype(){return dataType;}
 public boolean getPK(){return PK;}
 public boolean getNN(){return NN;}

 public void setname(String n){name=n;}
 public void setdatatype(Object object){dataType=(String) object;}
 public void setPK(boolean p){PK=p;}
 public void setNN(boolean n){NN=n;}

} 
```

# c++ - 我应该明确范围变量吗？

> ID：16139720
> 
> 赞同：6
> 
> 时间：2013-04-22T05:00:53.373
> 
> 标签：c++, scope

这更像是一个风格问题，因为我知道在实践中大多数编译器可能会优化以提供相同的效果，但我一直在阅读，一般来说，您应该始终在使用它们的范围内声明/定义变量。因此，在我无法内联声明的情况下，例如以下代码段，我考虑将索引变量括在范围括号（大括号，在这种情况下不确定您如何称呼它们）中，以明确限制这些变量的范围。这是好习惯吗？如果是这样，你能解释一下为什么吗？

```
{
    size_t i = 0; // this variable has no use outside of the range-based for loop
    for (auto const input : input_vector)
    {
        neuron_sequence[i].ForceSignal(input);
        ++i;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T05:06:29.513

当然，这是一个很好的做法。它明确限制了可以使用该变量的位置。我经常这样做。像这样的作用域也用于强制一些对象析构函数运行。

例如：

```
std::vector<int> v;
v.resize( 10 ); // now holds memory for 10 ints 
```

你如何清理这个内存？没有可调用的函数或任何手动告诉向量`v`清理其内存的方法。一个解决方案是强制它超出范围（假设我正确使用了交换）：

```
std::vector<int> v;
v.resize( 10 ); // now holds memory for 10 ints
{
  std::vector<int> temp;
  temp.swap( v );
} // temp goes out of scope and clears the memory that v used to hold 
```

另一个常见的用法是在 switch case 中。很多时候我需要在开关中创建一个临时变量：

```
switch( val )
{
case constant:
  {
    int x = 10;
    // ... do stuff
  }
} 
```

我能记住的最后一个地方是为某种代码编写测试用例时。经常进行单元测试时，我只想尽可能快地编写测试代码，而不需要花费太多的开发时间。所以，我将一堆相关的测试放在一个函数中，但将局部变量包装在不同的范围内，以确保我不会遇到任何奇怪的错误（也许通过测试共享迭代器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T05:05:58.393

是的，您应该明确范围变量：

1.  作用域定义了局部变量的生命周期，因此适当地定义变量的作用域意味着变量只有在它们服务于它们所需的用途之前才是活动的，而不仅仅是活动和占用内存。
2.  在相同命名变量的情况下，局部变量隐藏或隐藏相同命名的全局变量。因此，明确范围可以提高读者的可读性。（*至少我是这么认为*的）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T05:06:17.663

对于像整数这样的小数据类型，你真的不需要担心，因为正如你所说，编译器会根据变量的**[活跃](http://en.wikipedia.org/wiki/Live_variable_analysis)**度以及它是否**[到达](http://en.wikipedia.org/wiki/Reaching_definition)**某个位置来优化代码。在这种情况下，它更多的是风格问题。而且我建议不要经常这样做，因为代码可读性和易于维护也与性能一样重要。

然而，对于复杂类型，限制这样的生命周期可能很有用。例如，对于内部分配大量内存的向量，如果其范围受到限制，则可以节省一些空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T05:49:08.580

*   当您发现自己担心对象的生命周期时，紧密的范围是好的 - 通常是因为使用的内存/资源，或者希望防止意外或促进故意重用相同的标识符
    *   例如，做一些重复的操作——甚至可能使用宏替换——需要一个临时的但更改名称没有特殊目的并且很乏味
*   你不能总是这样做：你会遇到很多情况，其中适合一个变量的最紧密的范围与另一个变量的范围重叠：例如，试图“范围`a`”`{ X a = 1; X b(a, 2); ++a; } ++b;`破坏`b`太早
*   在某些情况下，创建大量的小范围会使源代码变得相当臃肿，使其更难直观地接受和维护。需要花费一些精力来检查引入的范围是否没有控制 if/for/while 语句，并且很难一目了然地看到整个函数流程。当然，减少函数范围内的变量数量也可以减少脑力劳动 - 所以这是一种平衡行为。

总的来说 - 有选择性是很好的，但你会感觉到什么时候有必要。如果不确定，可能没关系。

# grails - grails 发布插件 3.0.0 未解决的错误

> ID：16139721
> 
> 赞同：0
> 
> 时间：2013-04-22T05:00:54.593
> 
> 标签：grails, plugins, maven-release-plugin

我试图运行 maven-install 将我的插件放在本地 maven 缓存中，但它给了我未解决的依赖项错误：#release;3.0.0: java.text.ParseException: 在' [http://中找到不一致的模块描述符文件plugins.grails.org/grails-release/tags/RELEASE_3_0_0/release-3.0.0.pom](http://plugins.grails.org/grails-release/tags/RELEASE_3_0_0/release-3.0.0.pom) '：坏组织：预期='' 找到='org.grails.plugins'; 我的环境有问题吗？我想最终将我的插件发布到公司远程存储库。我在 BuildConfig.groovy 中有这个：

```
grails.project.dependency.resolution = {
    inherits("global") {
    }
    repositories {
        grailsCentral()
        mavenLocal()
    }
    dependencies 
    build ":release:3.0.0"
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:40:54.613

如果要安装插件，请将其放在`plugins`部分中，而不是在`dependencies`部分中，因为`dependencies`是用于 jar 的。

但是`release`插件版本 3.0.0 需要 Grails 版本 2.3 或更高版本，并且尚未发布。请改用 2.2.1 版本，并确保不导出它或其依赖的 rest-client-builder 插件：

```
plugins {
   build ':release:2.2.1', ':rest-client-builder:1.0.3', {
      export = false
   }
} 
```

> ID：16139724
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# c - C - How to split a string by a substring

> ID：16139725
> 
> 赞同：1
> 
> 时间：2013-04-22T05:01:17.397
> 
> 标签：c, split, strtok

this might be some basic question, but I really can't find an answer: I need to split a string that has two numbers, into two strings in C.

Example:

1->2 into 1 and 2

I'm using strtok, but it takes a series of chars to split, you can't specify a sequence to be the divisor.

I can't use anything outside from ANSI C.

Any help will be appreciated!

How can you flag this as exact duplicate? It's not even close...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T05:04:06.330

使用“sscanf()”。不要让别人为你做这件事，因为如果你花几分钟时间来理解它就太容易了，尤其是它的格式说明符字符串细微差别。这里有一个链接就足够了：

[http://www.cplusplus.com/reference/cstdio/sscanf/](http://www.cplusplus.com/reference/cstdio/sscanf/)

**暗示 ：** `sscanf (source_string,"%d->%d",&num1,&num2);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:18:35.093

好吧，这里有一些东西可以帮助您入门：

```
const char *FindSubString( const char *sub, const char *src )
{
  // Loop through the source string
  while(*src++)
  {
    // Only check for matching character in beginning of sub sequence
    if(*src == *sub)
    {
      return src;
    }
  }
} 
```

这只是找到指向子序列中第一个匹配字符的指针和源字符串。我相信你可以在内部循环中收集一些东西，检查字符串是否与`sub`字符串中接下来的几个字符匹配`src`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:38:27.337

这是一种蛮力方法。只适合快速修复。

```
#include <stdlib.h>
#include <ctype.h>

void extract_2_numbers (char *str, int *a, int *b) {
  *a = atoi (str);
  while (isdigit(*str)) str++;
  while (!isdigit(*str)) str++;
  *b = atoi (str);
}

int main () {
  int x, y;
  char *string = "12--->24";

  extract_2_numbers (string, &x, &y);
  printf ("%d\t%d\n", x, y);
  return 0;
} 
```

打印此输出：

```
12    24 
```

# c++ - 请协助：C++中的“if”语句

> ID：16139734
> 
> 赞同：3
> 
> 时间：2013-04-22T05:02:07.970
> 
> 标签：c++, if-statement, conditional-statements

以下代码打印相同的结果 - 两次 (!)（使用 Microsoft Visual C++ 2010 IDE）。我还打印了每个变量的最终值以查看发生了什么，实际上有两组值满足`if`语句条件。

我的问题是，因为指令是`break;`如果条件评估为 TRUE，任何人都可以解释一下我是如何/为什么在我没有要求的情况下得到这两个结果的（不是说这是一件坏事，只是想理解）？这是`if`构造的一部分还是与循环有关？如果条件不止一次评估为 TRUE，似乎某些东西知道返回多个解决方案，我只是不明白当指令没有明确说明这样做时它是如何做到这一点的（除非有内置的东西-我不知道）。

基本上，为什么循环没有在`break;`满足条件后立即结束，或者我是否以错误的方式思考这个问题？

同样，如果有人知道或者我在这里遗漏了一些基本的东西，请告诉我！我是 C++ 新手，所以只是想学习，提前谢谢你。

这是代码：

```
#include "stdafx.h"
#include <iostream>     

int main()
{
    for (int a = 1; a < 500; ++a)
    {
        for (int b = 1; b < 500; ++b)
        {
            for (int c = 1; c < 500; ++c)
            {
                if ((a + b + c) == 1000 && ((a*a + b*b) == (c*c)))
                {
                 cout << "The product abc = " << a*b*c << endl << "a = " << a << ", b = " << b << ", c = " << c << endl;
                 break;
                }
            }
        }
    }
    cout << endl << "Loop terminated";

    char d;
    cin >> d;
    return 0;
} 
```

控制台输出如下：

> 产品 abc = 31875000
> 
> a = 200，b = 375，c = 425
> 
> 产品 abc = 31875000
> 
> a = 375，b = 200，c = 425
> 
> 循环终止

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T05:04:42.213

你`break`唯一的突破*内部*循环，所以外部循环继续执行。

一种可能性是将该代码移动到一个单独的函数中，并在您第一次找到匹配项时从该函数返回。然后（除非您再次调用该函数）该代码的执行将完全停止。

我也会`c`完全消除循环。唯一有意义的值`c`是`1000 - (a+b)`，因此您不妨直接计算它，而不是遍历 500 个不同的值来找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:21:47.637

正如许多人已经说过的那样，`break`只能突破最里面的循环。

某些语言提供了解决此问题的方法。Ada 肯定有一种方法来命名每个循环，它最接近的等价于 break, `exit when <condition>;`, 也可以写成`exit <loopname> when <condition>;`。IIRC C# 也可能对此有特殊的语法。

在 C++ 中，您的选择是...

1.  使用`goto`而不是`break`. 将目标标签放在最外层循环之后。

2.  `throw`跳出循环的异常，所有嵌套循环都嵌套在`try`块内。

3.  根本不要跳出循环。取而代之的是，有一个标志`done`或类似的东西来指示您何时完成。检查所有循环的条件。

4.  正如[Jerry Coffin](https://stackoverflow.com/a/16139761/180247)所说，使用将循环移动到一个单独的函数并使用`return`（不知道我怎么错过了那个！）。

纯粹主义者可能会更喜欢 3，并在 2 上有一个选项。特别是，唯一不违反结构化编程的“单出口原则”的选项是 (3)，但`break`无论如何也违反了该原则。就个人而言，我更喜欢 1 因为它产生的混乱更少（假设您使用它的功能很小，并且在`goto`视觉上很明显）它更具可读性。

`goto`通常避免使用，这是有充分理由的。很多人完全禁止它们，这是不合理的，但那些人可能会考虑`break`并`continue`成为“隐藏的 goto”并禁止它们（当然，除了`break`在`switch`声明中）。无论如何，结果，你甚至可能不知道这`goto`是可能的。

`goto` [这里](http://www.cprogramming.com/reference/goto.html)有语法的描述- 基本上`goto <labelname>;`和`labelname:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:07:38.737

所以 - 你听说这`break;`不是解决方案 - 但什么是解决方案？

如果您将每个循环的限制（当前为 500）设为变量，例如

```
int myLim = 500; 
```

并将每个`for`循环条件替换为

```
for (int a = 1; a < myLim; ++a)
    {
        for (int b = 1; b < myLim; ++b)
        {
            for (int c = 1; c < myLim; ++c)
            { 
```

然后，而不是`break`你说`myLim = -1`- 你会打破所有的循环。

`a=500`注意 - 一些编译器会在你设置和满足条件`b=500`时皱眉`if`，因为你正在修改循环变量；但如果你改变条件，没人会介意。它比添加标志更清洁，但仍然有点黑客。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T05:05:27.113

`break`语句只中断最里面的循环，您可能需要使用标志在中断的情况下退出其他循环

```
#include "stdafx.h"
#include <iostream>     

int main()
{
bool flag = false;
for (int a = 1; a < 500; ++a)
{
    for (int b = 1; b < 500; ++b)
    {

        for (int c = 1; c < 500; ++c)
        {
            if ((a + b + c) == 1000 && ((a*a + b*b) == (c*c)))
            {
             cout << "The product abc = " << a*b*c << endl << "a = " << a << ", b = " << b << ", c = " << c << endl;            
             flag = true;
             break;
            }
        }

        if(flag)
        { break; }
    }

    if(flag)
    { break; }
}
cout << endl << "Loop terminated";

char d;
cin >> d;
return 0; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T05:05:48.470

您使用的`break`只是打破了大多数内部`for`循环而不是所有循环。

使用标志及其`and`条件`for`：

```
bool found = false;
for (int a = 1; a < 500 && !found; ++a)
{
    for (int b = 1; b < 500 && !found; ++b)
    {
        for (int c = 1; c < 500 && !found; ++c)
        {
            if ((a + b + c) == 1000 && ((a*a + b*b) == (c*c)))
            {
             cout << "The product abc = " << ....
             found = true;
            }
        }
    }
} 
```

甚至你可以`goto` **礼貌地**使用！

```
for (int a = 1; a < 500; ++a)
{
    for (int b = 1; b < 500; ++b)
    {
        for (int c = 1; c < 500; ++c)
        {
            if ((a + b + c) == 1000 && ((a*a + b*b) == (c*c)))
            {
             cout << "The product abc = " << ...
             goto break_all;
            }
        }
    }
}
break_all: 
```

[*“这是使用 goto 的最后一个据点”*](https://stackoverflow.com/a/1257776/952747)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T05:14:41.957

在您的代码中，您只应用了一次中断。所以最里面的 for 循环将被打破，其他外部循环将继续。

所以你已经定义了标志变量来打破所有循环。

```
#include "stdafx.h"
#include <iostream>  
    int main()
    {
        bool flag = 0; //Set the flag
        for (int a = 1; a < 500 && !flag; ++a) //Check flag condition
        {
            for (int b = 1; b < 500  && !flag; ++b) //Check flag condition
            {
                for (int c = 1; c < 500 && !flag; ++c) //Check flag condition
                {
                    if ((a + b + c) == 1000 && ((a*a + b*b) == (c*c)))
                    {
                     cout << "The product abc = " << a*b*c << endl << "a = " << a << ", b = " << b << ", c = " << c << endl;
                     flag= 1; //Set the flag true
                     break;
                    }
                }
            }
        }
        cout << endl << "Loop terminated";

        char d;
        cin >> d;
        return 0;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-24T01:10:19.687

如果您尝试检查稍大的数字范围，您的代码将非常缓慢。您实际上尝试了从 1 到 500 的所有 c 值，并检查是否 a + b + c = 1000。很明显，如果 c = 1000 - a - b，总和仅为 1000。所以你可以写

```
int c = 1000 - a - b;
if ((c >= 1 && c < 500) && (a*a + b*b == c*c)) ... 
```

这将运行大约 500 倍的速度...

现在您不喜欢同时打印 a = 200, b = 375 和 a = 375, b = 200。您可能会考虑一个 break 语句，但这会引入一个错误：在很多情况下，有多个解决方案不是像这里这样简单连接的。

您想要的是避免打印 a > b 的解决方案，因为如果 (a, b, c) 是一个解决方案，那么 (b, a, c) 也是一个解决方案。一个简单的方法是写

```
for (int b = a; b < 500; ++b) ... 
```

当 a = 375 时，只检查值 375 到 499 的 b，从而避免打印 a = 375, b = 200。

# asp.net-mvc - Registering Multiple Routes in MVC asp.net

> ID：16139743
> 
> 赞同：3
> 
> 时间：2013-04-22T05:03:21.140
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, maproute

I want to map several routes in MVC that have the parameters in different orders:

```
localhost:1010/abcd/home/index
localhost:1010/home/index/abcd

id=abcd
controller=home
action=index 
```

I tried the code below, but it doesn't work.

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "ShoppingManagment",
        "{id}/{controller}/{action}",
        new { controller = "ShoppingManagment",
            action = "ShoppingManagment", id = UrlParameter.Optional });

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home",
            action = "Index", id = UrlParameter.Optional }
    );
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T05:31:27.430

它不起作用，因为两条路线具有相同的格式。

因此 MVC 路由引擎无法区分这两种 url 模式。

尝试将控制器直接写入 url 模式。

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
          "ShoppingManagment",
          "{id}/ShoppingManagment/{action}",
          new { controller="ShoppingManagment", action = "ShoppingManagment", id = UrlParameter.Optional });

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home",
             action = "Index", id = UrlParameter.Optional }
        );

    } 
```

# javascript - How can I find out the index number of an object that I pushed into an array?

> ID：16139752
> 
> 赞同：35
> 
> 时间：2013-04-22T05:04:00.077
> 
> 标签：javascript

I have the following:

```
var gridData = {};
var TestRow = {
   "name": "xx",
   "description": "xx",
   "subjectId": 15
                };
gridData.push(TestRow) 
```

How can I find out the index number of the new data that I just pushed into the gridData object?

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-22T05:07:53.720

首先，我假设它`gridData`是一个数组，而不是您在示例代码中显示的对象，因为对象没有`.push()`方法，但数组有。

用作`.length - 1`您推入数组的最后一项的索引，或保存返回的值，`.push()`该值是数组的新长度。这将是您刚刚推入数组的元素的索引，并且在您修改该索引之前的数组（在该索引之前添加或删除项目）之前一直有效。

```
var testRowIndex = gridData.push(TestRow) - 1;
// then you can access that item like this 
var item = gridData[testRowIndex]; 
```

但是，这并没有多大意义，因为您已经在`TestRow`. 像往常一样，如果您描述您真正想要解决的问题，我们可能会提供更有用的答案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T05:08:53.420

当您将项目推入数组时，您将获得数组的当前长度作为返回值。使用它来查找索引。

```
var gridData = [];
var TestRow = {
   "name": "xx",
   "description": "xx",
   "subjectId": 15
                };
var length=gridData.push(TestRow);
alert(length-1); 
```

> `**[Array.push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)**` 返回调用该方法的对象的新长度属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T05:41:55.463

首先，我会说它类似于[find-indexof-element-in-jquery-array](https://stackoverflow.com/questions/7768333/how-to-find-indexof-element-in-jquery-array)

无论如何，看到`@jfriend00`并`@PSCoder`出色地回答了它，我想向 Find Index 传达一些替代方案，

假设，您的数组为：-

```
var gridData = [];//{} Curly braces will define it as object type, push operations can take place with respect to Array's 
```

我有两个或更多的数据`Array`

```
var TestRow = {
        "name": "xx",
        "description": "xx",
        "subjectId": 15
    };
    var TestRow1 = {
        "name": "xx1",
        "description": "xx1",
        "subjectId": 151
    }; 
```

现在，我推送这两个数据，就像你所做的那样。要找到被推送元素的索引，我们可以使用，`.indexOf`和`.inArray`

```
var indexOfTestRow0 = gridData.indexOf(TestRow);// it returns the index of the element if it exists, and -1 if it doesn't.
    var indexOfTestRow1 = gridData.indexOf(TestRow1);// it returns the index of the element if it exists, and -1 if it doesn't.

    //Search for a specified value within an array and return its index (or -1 if not found).
    var indx1 = jQuery.inArray(TestRow, gridData);
    var indx2 = jQuery.inArray(TestRow1, gridData); 
```

考虑测试这些东西，所以我尝试了一些非常简单的方法，如下所示： -

```
<head>
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<script>
    $(document).ready(function () {
        var gridData = [];//{} Curly braces will define it as Boject type, push operations can take place with respect to Array's
        var TestRow = {
            "name": "xx",
            "description": "xx",
            "subjectId": 15
        };
        var TestRow1 = {
            "name": "xx1",
            "description": "xx1",
            "subjectId": 151
        };
        gridData.push(TestRow);
        gridData.push(TestRow1);
        console.log(gridData);

        var indexOfTestRow0 = gridData.indexOf(TestRow);// it returns the index of the element if it exists, and -1 if it doesn't.
        var indexOfTestRow1 = gridData.indexOf(TestRow1);// it returns the index of the element if it exists, and -1 if it doesn't.

        //Search for a specified value within an array and return its index (or -1 if not found).
        var indx1 = jQuery.inArray(TestRow, gridData);
        var indx2 = jQuery.inArray(TestRow1, gridData);

        console.log(indexOfTestRow0);
        console.log(indexOfTestRow1);

        console.log(indx1);
        console.log(indx2);
    });

</script> 
```

# python - 视图架构的无效 XML - OpenErp

> ID：16139754
> 
> 赞同：1
> 
> 时间：2013-04-22T05:04:08.953
> 
> 标签：python, xml, object, module, openerp

我得到了我的 module.py 的代码

```
class certificados(osv.osv):

_name = 'certificados.certificados'
_description="Certificados de No Produccion"
_inherit=['mail.thread', 'ir.needaction_mixin']

_columns = {
    'Registro_Numero' : fields.integer('Registro Numero'),
    'Fecha_de_Emision': fields.date('Fecha de Emision', required=True, select=True),
    'Fecha_de_Solicitud': fields.date('Fecha de Solicitud', required=True, select=True),
    'Fecha_del_Documento': fields.date('Fecha del Documento', required=True, select=True),
    'Vigencia' : fields.integer('Vigencia'), 'cert_ids' : fields.one2many('certificados.line','requisicion_id','Items del Certificado'),
    'descripcion' : fields.text('Descripcion'),
    'notas' : fields.text('Notas'),
}

class certificados_line(osv.osv):

_name = 'certificados.line'
_description="Certificados No Produccion"

def multi_a_b(self, cr, uid, ids, name, arg, context=None):
res = {}
for record in self.browse(cr, uid, ids,context):
    res[record.id] = record.Cantidad * record.Precio_Unitario_Declarado
return res

_columns = {
    'Codigo_Arancelario' : fields.integer('Codigo Arancelario'),
    'product_id' : fields.many2one('product.product', 'Material'),
    'Descripcion_Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
    'Especificaciones_Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
    'Cantidad' : fields.float('Cantidad'), 'Unidad_de_Medida': fields.many2one('product.uom', 'Unidad de Medida'),
    'Precio_Unitario_Declarado' : fields.float('Precio Unitario Declarado'), 'Moneda' : fields.many2one('res.currency', 'Moneda'),
    'Valor_En_Divisas' : fields.function(multi_a_b, type='integer', string='Valor En Divisas'),
    'requisicion_id' : fields.many2one('certificados.certificados', 'Certificados de No Produccion', ondelete='cascade'),
    'Cantidad_Consumida' : fields.float('Cantidad Consumida'), 'Cantidad_Disponible' : fields.float('Cantidad Disponible'),
    }

certificados_line() 
```

这是我的 module_view.xml 的代码

```
 <record id="student_certificados_form" model="ir.ui.view">
        <field name="name">certificados.result.form</field>
        <field name="model">certificados.certificados</field>
        <field name="arch" type="xml">
            <form string="Introducir los datos" version="7.0">
                <sheet>
                    <div class="oe_edit_only">
                        <label for="Registro_Numero" class="oe_inline"/>
                    </div>
                    <h1>
                        <field name="Registro_Numero" class="oe_inline"/>
                    </h1>
                    <group>
                        <group>
                            <field name="Fecha_de_Emision"/>
                            <field name="Fecha_de_Solicitud"/>
                        </group>
                        <group>
                            <field name="Fecha_del_Documento"/>
                            <field name="Vigencia"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Productos">
                            <field name="cert_ids">
                                <tree string="Productos">
                                    <field name="product_id"/>
                                    <field name="Codigo_Arancelario"/>
                                    <field name="Descripcion_Arancelaria"/>
                                    <field name="Especificaciones_Tecnicas"/>
                                    <field name="Cantidad"/>
                                    <field name="Precio_Unitario_Declarado"/>
                                    <field name="Valor_En_Divisas"/>
                                    <field name="Cantidad_Consumida"/>
                                </tree>
                            </field>
                            <separator string="Observaciones"/>
                            <field name="descripcion"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div> 
            </form>
        </field>
    </record>
<!-- Certification Action-->
<record id="view_certificados_tree" model="ir.ui.view">
    <field name="name">certificados.tree</field>
    <field name="model">certificados.certificados</field>
    <field name="type">tree</field>
    <field name="arch" type="xml">
        <tree string="Certificados" >
            <field name="Registro_Numero" />
            <field name="Fecha_de_Emision" />
            <field name="Fecha_de_Solicitud" />
            <field name="Fecha_del_Documento" />
            <field name="Vigencia" />
        </tree>
    </field>
</record>
<record model="ir.ui.view" id="certificados_search">
    <field name="name">certificados.search</field>
    <field name="model">certificados.certificados</field>
    <field name="type">search</field>
    <field name="arch" type="xml">
    <search string="Buscar Certificados" >
        <field name="Fecha_de_Emision" string="Fecha_de_Emision" />
        <field name="Registro_Numero" string="Registro_Numero" />
        <field name="Vigencia" string="Vigencia" />
    </search>
    </field>
</record>

<record id="action_certificados_certificados" model="ir.actions.act_window">
    <field name="requisicion_id">Certificados</field>
    <field name="res_model">certificados.certificados</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,form</field>
    </record> 
```

我确实在我的 module.py 中更改了一个名为“Valor_En_Divisas”的字段，从那以后我收到了这个错误，这通常是在 xml 中调用的对象未声明或不匹配之后出现的，问题是，我找不到错误在哪里...

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:19:05.293

您的所有记录必须在标签内。

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    </data>
</openerp> 
```

我想你忘记了。将您的 xml 代码放入此标记中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:40:19.150

检查您是否已将 python 文件包含在模块`__init__.py`文件中。这是我时不时会忘记的事情：）

乔斯

# javascript - 使 div 出现和消失

> ID：16139756
> 
> 赞同：4
> 
> 时间：2013-04-22T05:04:20.200
> 
> 标签：javascript, html, dom-events

我有 8 张缩略图，我想在单击其中一张时显示一个滑块。我几乎尝试了我所知道的一切，这里是：

HTML：

```
<div id="divThumbnails2" class="thumbnails2">
    <a href="#" id="Thumb5" >
        <img src="images/thumbnail_5.png" width="55" height="66" alt="" class="floatleft" /></a>
    <a href="#" id="Thumb6">
        <img src="images/thumbnail_6.png" width="56" height="67" alt="" class="floatleft"
                style="margin-left: 7px;" /></a>
    <a href="#" id="Thumb7">
        <img src="images/thumbnail_7.png" width="54" height="66" alt="" class="floatleft"
                style="margin-left: 7px;" /></a>
    <a href="#" id="Thumb8">
        <img src="images/thumbnail_8.png" width="57" height="68" alt="" class="floatleft"
                style="margin-left: 7px;" /></a>
</div>
<div id="divThumbnails" class="thumbnails">
    <div id="Thumb1" class="floatleft" >
        <a href="#">
            <img src="images/thumbnail_1.png" width="54" height="65" alt=""/></a>
    </div>
    <div id="Thumb2" class="floatleft" style="margin-left: 7px;" >
        <a href="#">
            <img src="images/thumbnail_2.png" width="56" height="66" alt="" /></a>
    </div>
    <div id="Thumb3" class="floatleft" style="margin-left: 7px;" >
        <a href="#">
            <img src="images/thumbnail_3.png" width="54" height="66" alt="" /></a>
    </div>
    <div class="floatleft" style="margin-left: 7px;" id="Thumb4">
        <a href="#">
            <img src="images/thumbnail_4.png" width="57" height="68" alt=""  /></a>
    </div> 
</div> 
```

还有幻灯片：

```
<div id="slides">
    <div class="slides_container" id="SlidesContainer">
        <a href="#"><img src="images/slides_1.png" width="408" height="266" alt="" /></a>
        <a href="#"><img src="images/slides_2.png" width="408" height="272" alt="" /></a>
        <a href="#"><img src="images/slides_3.png" width="408" height="275" alt="" /></a>
    </div>
    <a class="prev" href="#"><img width="28" height="27" alt="Arrow Prev" src="images/slides_left_arrow.png"/></a>
    <a class="next" href="#"><img width="28" height="27" alt="Arrow Next" src="images/slide_arrow_right.png"/></a>
    <div class="close_btn" id="Btn_Close"><a href="#"><img src="images/slide_close_btn.png" width="28" height="27" alt="Close" /></a></div>
</div> 
```

JavaScript：

```
<script type="text/javascript">

    var close = document.getElementById('Btn_Close');
    var slides = document.getElementById('slides');
    close.onclick = function () {

        slides.style.display = "none";
    };
</script>
<script type="text/javascript">

    var thumb1 = document.getElementById('Thumb1');
    var slides = document.getElementById('slides');
    thumb1.onclick = function () {

        slides.style.display = "block";
    };
</script>
<script type="text/javascript">
    var thumb2 = document.getElementById('Thumb2');
    var slides = document.getElementById('slides');
    thumb2.onclick = function () {

        slides.style.display = "block";
    };
</script>
<script type="text/javascript">
    var thumb3 = document.getElementById('Thumb3');
    var slides = document.getElementById('slides');
    thumb3.onclick = function () {

        slides.style.display = "block";
    };
</script>
<script type="text/javascript">
    var thumb4 = document.getElementById('Thumb4');
    var slides = document.getElementById('slides');
    thumb4.onclick = function () {

        slides.style.display = "block";
    };
</script>
<script type="text/javascript">
    var thumb5 = document.getElementById('Thumb5');
    var slides = document.getElementById('slides');
    thumb5.onclick = function () {

        slides.style.display = "block";
    };
</script>
<script type="text/javascript">
    var thumb6 = document.getElementById('Thumb6');
    var slides = document.getElementById('slides');
    thumb6.onclick = function () {

        slides.style.display = "block";
    };
</script>
<script type="text/javascript">
    var thumb7 = document.getElementById('Thumb7');
    var slides = document.getElementById('slides');
    thumb7.onclick = function () {

        slides.style.display = "block";
    };
</script>
<script type="text/javascript">
    var thumb8 = document.getElementById('Thumb8');
    var slides = document.getElementById('slides');
    thumb8.onclick = function () {

        slides.style.display = "block";
    };

</script> 
```

当我单击箭头时，slides_container 一切都很好，它会更改我的图片，但是我必须最初将其显示属性设置为“阻止”，并且我想将其设置为“无”，因为我希望它仅在单击其中一个时出现缩略图。

当我单击它时，它与关闭按钮一起使用，`slides_container`div 消失了（我想我做对了），但是当我单击其他按钮时，我似乎无法让它出现。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-15T02:55:29.667

此功能会将您的显示属性设置为与当前相反的状态（开与关）。将“切换”更改为要打开/关闭的元素 ID。

```
<script type="text/javascript">
    function toggle(){
        var off=document.getElementById('toggle');
        if (off.style.display == "none") {
            off.style.display = "block";
        } else {
            off.style.display = "none";
        }        
    }
</script> 
```

最后，如果你想切换更多元素，你总是可以创建额外的变量。如果您想要更多“开关”，则使用另一个 onclick 操作创建另一个元素，指向另一个切换附加元素 ID 的函数。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:18:56.563

尝试

```
<div id="slides" style="display: none"> <!-- set display to none -->
    <div class="slides_container" id="SlidesContainer">
        <a href="#"><img src="images/slides_1.png" width="408" height="266" alt="" /></a>
        <a href="#"><img src="images/slides_2.png" width="408" height="272" alt="" /></a>
        <a href="#"><img src="images/slides_3.png" width="408" height="275" alt="" /></a>
    </div>
    <a class="prev" href="#"><img width="28" height="27" alt="Arrow Prev" src="images/slides_left_arrow.png"/></a>
    <a class="next" href="#"><img width="28" height="27" alt="Arrow Next" src="images/slide_arrow_right.png"/></a>
    <div class="close_btn" id="Btn_Close"><a href="#"><img src="images/slide_close_btn.png" width="28" height="27" alt="Close" /></a></div>
</div> 
```

**更新** 您可以大大简化脚本

```
<script type="text/javascript">
    var slides = document.getElementById('slides');

    var close = document.getElementById('Btn_Close');
    close.onclick = function () {
        slides.style.display = "none";
    };

    function showSlide(){
        slides.style.display = "block";
    } 
```

`onclick`向`thumb`元素添加事件：

```
<div id="Thumb1" class="floatleft" onclick="showSlide()">
    <a href="#">
        <img src="images/thumbnail_1.png" width="54" height="65" alt=""/></a>
</div> 
```

# java - Java JtextArea 多个字母

> ID：16139757
> 
> 赞同：0
> 
> 时间：2013-04-22T05:04:26.927
> 
> 标签：java, swing, jtextarea

我创建了一个带有数字按钮（1-9）的 GUI，如果您单击 1，然后单击数字 9，它将在 JtextArea 上显示 19。我目前正在使用

```
for(int i = 0; i < buttons.length; i++){
        if(e.getSource() == buttons[i])
        textArea.(buttons[i].getText());
    } 
```

当我单击 9 时，它会替换我在 textArea 上已有的内容，而不是添加它。有没有不同的方法我应该这样做，所以它会将它们全部添加，所以我可以通过点击那些而不是我点击的最后一个按钮输入“192323”所以“3”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:07:52.823

```
 textArea.append(buttons[i].getText()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:07:51.200

附加所需的文本

```
textArea.setText(textArea.getText() + buttons[i].getText()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:08:49.427

你试过这样吗？：

```
textArea.setText(textArea.getText() + buttons[i].getText()); 
```

# recursion - 我正在尝试对用户输入的整数进行递归求和

> ID：16139763
> 
> 赞同：2
> 
> 时间：2013-04-22T05:04:46.207
> 
> 标签：recursion, scheme

我是计划的新手。今晚是我第一次玩它，除了在课堂上向我解释的幻灯片。我必须编写一个方案程序，该程序接受用户输入运算符，然后对它后面的数字执行该操作。（换句话说，实现我自己的方案版本，内置“+”、“*”等运算符）。问题是我必须使用递归。试图绕过这个方案语法让我很难弄清楚从哪里开始。

因此，我决定从一些至少递归总结用户输入的值的代码开始（不用担心识别用户输入了运算符和括号）。我只是无法弄清楚如何使它工作。这是我正在尝试的：

```
(define run (lambda (x)
(cond
  ((eqv? x "a") (display x) )
  (else (+ x (run(read))))
 )))

(run (read)) 
```

检查 x 是否等于“a”的条件旨在成为我现在打破递归的一种方式。在最终版本中，输入将在一组括号之间，但我想当我谈到它时我会越过那座桥。无论如何，代码只是不断地接受输入，并且永远不会停止。所以，我猜显示 x 的条件永远不会被调用。我知道我可能做错了一切，我真的很感激一些指示。

编辑：好的，我至少开始意识到有些事情没有意义。比如我显示的 x 实际上不会给出总和，因为我没有以任何方式将总和存储在 x 中。但是，我仍然不明白为什么当我输入字母 a 时代码至少没有停止。

编辑 2：我让它工作，但只有当条件等于 1 时。我怎样才能让它识别一个 char 的输入或更好的右括号，让它像它一样结束递归1？：

```
(define run (lambda (x)
(cond
  ((eq? x 1) 0)  
 (else (+ x (run(read))))
 )))

(run (read)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:17:19.060

End-Of-File (EOF) 标志着输入的结束。Scheme对此有一个程序`eof-object?`。您的代码基本上是正确的：

```
(define (run x)
  (if (eof-object? x)
      0
      (+ x (run (read))))) 
```

您使用 结束运行`Control-D`。如果由于某种原因您无法`eof-object?`使用特殊字符，例如`X`. 在这种情况下，您的测试将是`(eq? x #\X)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T12:54:10.770

```
(define (addition-loop)
 (let ((answer (read)))
      (if (number? answer)
          (+ answer (addition-loop))
          0))) 
```

一旦您输入不是数字的内容，这就会中断。

此外，如您所见，您可以拥有一个零参数的函数。

无论如何，您的代码的问题是当您进入读取时，它的值实际上是相同的 'a 或（引用 a），而不是“a”。

```
(eqv? 'a "a")

;Value: #f 
```

# html - a href not clickable in the right area

> ID：16139766
> 
> 赞同：0
> 
> 时间：2013-04-22T05:04:54.113
> 
> 标签：html, css, hyperlink

CSS:

```
body {
    background-image: url("../images/ITWorld.jpg");
    background-repeat: no-repeat;
    background-size: 150%;
    font-family: sans-serif;
}

p {
    font-size: 22px;
}

#navbar {
    display: inline;
    text-align: center;
    font-size: 25px;
}

a {
    text-decoration: none;
    font-family: sans-serif;
    color: black;
}

.listitem {
    padding: 7px;
    display: inline;
    border: 3px solid black;
}

a:hover {
    color: white;
}

.reference {
    font-size: 22px;
    padding-top: 50px;
    padding-bottom: 50px;
}

#overviewpara {
    width: 800px;
}

.referenceli {
    padding: 5px;
} 
```

HTML:

```
<ul>
    <li class="referenceli"><a class="reference" href="http://jobsearchtech.about.com/od/careersintechnology/p/ITDefinition.htm">http://jobsearchtech.about.com/od/careersintechnology/p/ITDefinition.htm</a></li>
    <li class="referenceli"><a class="reference" href="http://www.guardian.co.uk/higher-education-network/2011/sep/05/top-100-universities-world-computer-science-and-information-systems-2011">http://www.guardian.co.uk/higher-education-network/2011/sep/05/top-100-universities-world-computer-science-and-information-systems-2011</a></li>
</ul> 
```

My problem is that when i hover over my hyperlinks on my references page they do not react in the correct areas. For example I'll be link 5px above the link and it will not higligh or i will be right over the link, but it will not work. Sorry for messy html.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:10:15.270

你应该在你的标签上设置 5px 的填充，而不是你的列表项。

```
.referenceli {
    padding: 5px;
} 
```

应该

```
.reference {
    padding: 5px;
    text-decoration: none;
    font-family: sans-serif;
    color: black;
} 
```

还要从 a 标签中删除 50px 填充：您最好将该尺寸（50px）应用于列表项的边距：

```
.reference {
    font-size: 22px;
    padding-top: 50px;
    padding-bottom: 50px;
} 
```

应该

```
.reference {
    font-size: 22px;
    padding: 5px; /*So you will have a hover effect 5px below and above the link*/
}

.referenceli {

    margin: 50px 0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:19:45.383

将顶部和底部的填充更改为 5px：

```
.reference {
    font-size: 22px;
    padding-top: 5px;
    padding-bottom: 5px;
} 
```

**小提琴：http:** [//jsfiddle.net/uNpbk/](http://jsfiddle.net/uNpbk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:25:21.513

将顶部和底部的填充更改为 5px：

```
.reference 
{
    font-size: 22px;
    padding-top: 5px;
    padding-bottom: 5px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T05:25:50.823

试试这个。我认为您需要设置 div 而不是 li 标签的样式。我在参考和参考中添加了一些边框。将边框添加到您的代码中以查看您对样式的影响。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>
<style>
body {
    background-image: url("../images/ITWorld.jpg");
    background-repeat: no-repeat;
    background-size: 150%;
    font-family: sans-serif;
}

p {
    font-size: 22px;
}

#navbar {
    display: inline;
    text-align: center;
    font-size: 25px;
}

a {
    text-decoration: none;
    font-family: sans-serif;
    color: black;
}

.listitem {
    padding: 7px;
    display: inline;
    border: 3px solid black;
}

a:hover {
    color: red;
    font-weight:bold;
}

.reference {
    font-size: 22px;
    padding:10px 0 10px 0;
    border:green solid 1px;
}

#overviewpara {
    width: 800px;
}

div.referenceli{
   padding:20px 0 0 0;
   border:red 1px solid;
}
</style>
<ul>
  <div class="referenceli"><!--USE DIV TO FOCUS CSS -->
    <li><a class="reference" href="http://jobsearchtech.about.com/od/careersintechnology/p/ITDefinition.htm">http://jobsearchtech.about.com/od/careersintechnology/p/ITDefinition.htm
    </a></li><!-- END LI -->
  </div><!-- END REFERENCELI -->
  <div class="referenceli">
    <li><a class="reference" href="http://www.guardian.co.uk/higher-education-network/2011/sep/05/top-100-universities-world-computer-science-and-information-systems-2011">http://www.guardian.co.uk/higher-education-network/2011/sep/05/top-100-universities-world-computer-science-and-information-systems-2011
    </a></li><!-- END LI -->
  </div><!-- END REFERENCELI -->
</body>
</html> 
```

# xml - 当标签包含编码字符时，XML 通过 XSL 进行转换

> ID：16139767
> 
> 赞同：0
> 
> 时间：2013-04-22T05:04:54.740
> 
> 标签：xml, xslt

更新：失败案例

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<catalog>
    <cd>
        <title>Empire &amp; Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>   
</catalog> 
```

```
<catalog>
    <cd>
        <title>Empire & Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>   
</catalog> 
```

嗨，我有以下 XML

```
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>   
</catalog> 
```

下面的 XSL 来翻译上面的

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

到目前为止，翻译工作正常。但是，如果我将 XML 标记值更改为包含编码字符，`&`或者`&amp;`我没有得到结果

我怎样才能逃脱这些字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:24:53.043

您必须将 更改`&`为`&amp;`，这应该可以正常工作。因为看起来你已经尝试过了。您可以尝试分别对字符的十进制`&#38;`和十六进制 unicode 引用。`&#x26;``&`

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
<catalog> 
  <cd> 
    <title>Empire &#x26; or &#38; Burlesque</title> 
    <artist>Bob Dylan</artist> 
    <country>USA</country> 
    <company>Columbia</company> 
    <price>10.90</price> 
    <year>1985</year> 
  </cd>
</catalog> 
```

如果这不能解决问题，我可以知道哪个 XSLT 处理器用于生成输出吗？

# c# - 使用实体框架将实体拆分为 2 个表

> ID：16139785
> 
> 赞同：0
> 
> 时间：2013-04-22T05:06:19.630
> 
> 标签：c#, entity-framework, entity-framework-4, ef-code-first

我的数据库 (Oracle) 中有 2 个表，我想将它们合并到一个实体中。我正在使用 Entity Framework 4.1 代码优先方法（使用现有数据库），所以一切正常。

表结构：

表文档_元数据：

```
Item       NUMBER(2)   PK
Version    NUMBER(2)   PK 
DocDate    DATE        PK
RepType    NUMBER(2)   PK
ValueType  NUMBER(2)   PK
DocId      NUMBER(5)   NOT NULL FK -> Document table
User       VARCHAR2(5) NOT NULL
RowVersion DATE        NOT NULL 
```

表格文件：

```
ID         NUMBER(5)   PK
Doc        LONGRAW     
User       VARCHAR2(5) NOT NULL
RowVersion DATE        NOT NULL 
```

有没有办法做到这一点，如果是这样，我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:16:58.300

我不认为你能做到这一点。如果这是“一对一”关系，也许您可​​以使用每个类型继承的表，并从 Document 类继承 Document_Metadata 类。因此，两张表都有一个实体对象。但要使其正常工作，DocID 必须是 Document_Metadata 中的 PK，并且我认为两个表的主键列名必须相同（在 Document 表中将 ID 重命名为 DocID）。但这需要更改您的数据库模型。

# c# - 在服务器上创建一个文本文件，所有客户端用户都可以在 C# 中修改该文件

> ID：16139792
> 
> 赞同：-3
> 
> 时间：2013-04-22T05:06:56.847
> 
> 标签：c#

我想在服务器上创建一个日志文件来跟踪所有客户端登录的详细信息。为此我采用了 Web 服务路径

```
string p2 = System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath + "ServerLog.txt";
public void log(string logData)
    {
        lock (logLock)
        {
            fs = new FileStream(p2, FileMode.OpenOrCreate, FileAccess.Write);
            m_streamWriter = new StreamWriter(fs);
            m_streamWriter.BaseStream.Seek(0, SeekOrigin.End);
            m_streamWriter.WriteLine(" " + logData + "\n");
            m_streamWriter.Flush();
            m_streamWriter.Close();
        }
    } 
```

我已经在 WebService 中编写了上面的代码，并通过创建一个服务对象来访问它。并且能够修改它。但是一旦我的系统创建了该文件并且另一个用户尝试修改它，然后错误显示为：

> 由于内部错误，服务器无法处理请求。有关错误的更多信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为）以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志。

如果服务器中的文件被删除，第二个用户可以继续登录服务器。但除了第二个用户之外的任何人都可以进行日志记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:15:58.167

试试这个代码而不是你的。

```
using (StreamWriter streamWriter = new StreamWriter(fileName))
{
    streamWriter.WriteLine(" " + logData + "\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:18:26.830

您需要关闭流并且还可能使用“附加”模式。[File.AppendText](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)是满足您需求的方法。

```
var filename = p2;
using(var streamWriter = File.AppendText(filename))
{
   streamWriter.WriteLine(" " + logData + "\n");
} 
```

旁注：有许多现有的日志记录解决方案 - 请考虑使用它们而不是发明自己的......

# vba - VBA - 离开当前单元格

> ID：16139794
> 
> 赞同：2
> 
> 时间：2013-04-22T05:07:04.777
> 
> 标签：vba, excel

我有一些对双击有反应的代码。这个动作很好，我的问题虽然..填写由于双击动作弹出的表单后，表单被卸载，这里没问题，但用户在他双击的单元格内处于编辑模式。

现在通常在 Excel 中，您可以按 CTRL-Enter 并且单元格将被简单地选择并且您退出编辑模式。我如何在 VBA 中实现这一点？

我所能做的似乎就是将单元格向上移动一个，但实际上只是希望用户退出编辑模式并停留在当前单元格上，即他双击的那个单元格。

```
Private Sub Cancel_Click()
Cells(ActiveCell.Column, ActiveCell.Row - 1).Activate
Cells(ActiveCell.Column, ActiveCell.Row).Activate
Unload Term
End Sub 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:38:14.157

使用`BeforeDoubleClick`'`Cancel`参数，它...取消单击单元格：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
Cancel = True
UserForm1.Show
End Sub 
```

# wpf - 如何使用该数据网格的事件访问数据网格内的文本框？

> ID：16139797
> 
> 赞同：2
> 
> 时间：2013-04-22T05:07:20.517
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我在使用 xaml 设计的数据网格中有一个文本框。我可以使用数据网格的事件访问以前在代码文件中在 xaml 中设计的文本框吗？请帮我.....................

```
 <Window x:Class="GridTextBox.Test"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" WindowState="Maximized"
    Title="Test" Height="300" Width="300" Loaded="Window_Loaded">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="30"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="30"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width=".25*"/>

        <ColumnDefinition Width=".25*"/>
        <ColumnDefinition Width=".25*"/>
        <ColumnDefinition Width=".25*"/>
    </Grid.ColumnDefinitions>
    <DataGrid Grid.Row="1" Grid.Column="1"  Name="datagrid1" SelectionChanged="datagrid1_SelectionChanged" LoadingRowDetails="DataGrid_LoadingRowDetails"  Height="auto" Width="auto">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Name="txtEmpid" Text="hiiiiii"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:25:36.070

首先，您需要`ItemContainerGenerator`习惯从数据中获取正确的行（在您的 datagrid1_SelectionChanged 事件中）。

```
var row = (DataGridRow)datagrid1.ItemContainerGenerator.
                     ContainerFromItem(datagrid1.SelectedItem); 
```

然后像这样得到TextBlock：

```
var text = datagrid1.Columns[0].GetCellContent(row) as TextBlock; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T12:14:00.630

```
var cellInfo=dataGrid1.SelectedCells[0];
var txt=cellInfo.Column.GetCellContent(cellInfo.Item); 
```

或者还有另一种解决方案可以获取所有存在动态行的文本框的文本。

```
 DataRowView dataRow = (DataRowView)dataGrid1.SelectedItem;

int Columnindex = datagrid1.CurrentCell.Column.DisplayIndex;
 int iGridRowsCount      = ArgumentsDataGridforTestcasessTab.Items.Count;
for (int jRow = 0; jRow <= iGridRowsCount - 1; jRow++)
{

  DataGridCell cell = GetCell(jRow, Columnindex);
  ContentPresenter _contentPresenter = new ContentPresenter();
  _contentPresenter = (ContentPresenter)cell.Content;

  // get the attached control from the cell
  TextBox myTextBox = GetVisualChild<TextBox>(_contentPresenter);                 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T18:50:45.530

注意单元格是处于编辑模式，还是仅处于预览模式。如果它处于编辑模式（我的意思是你正在写入它，或者你只是写了一些东西并且没有移动到其他单元格）它不会转换为 TextBlock，而是转换为 Textbox。

当（仅）它处于预览模式时，它确实会转换为 TextBlock。

我遇到了同样的问题，并在将内容投射到文本框时通过 try-catch 序列解决了它。

做了类似的事情

```
try
{
   var myTextboxVariable=(Textbox) datagridcell.Content
   //extract the text out of myVariable.Text, do whatever you intend to the Textbox
}
catch(Exception ex)
{
  var myTextBlockVariable=(TextBlock) datagridcell.Content
  //extract the text out of myVariable.Text, do whatever you intend to the TextBlock
} 
```

我知道它看起来像一个粗略的解决方案，并且必须有一个更优雅的方式。但最终重要的是结果。时间是我们维度的坐标:)

# solr - 在 solr 中可以对双引号进行整个短语搜索

> ID：16139806
> 
> 赞同：0
> 
> 时间：2013-04-22T05:07:53.840
> 
> 标签：solr

我想在没有应用分析器的情况下在 solr 中进行短语搜索，例如 - 如果我搜索**“DelhiDareDevil”**（即 - 带引号），它应该搜索确切的文本，而不是在该字段上应用任何分析器或标记器但是如果我搜索**DelhiDareDevil**它应该使用标记器和分析器并将其拆分为类似**德里敢于魔鬼的东西**

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:17:12.473

不确定任何开箱即用的方法，您可以将内容复制到新字段而无需分析。
而且，您可以定义自己的查询解析器，并在字段上搜索查询而无需分析。

# magento - 如何在 Magento 中安装 Incho 特色产品

> ID：16139809
> 
> 赞同：0
> 
> 时间：2013-04-22T05:08:07.513
> 
> 标签：magento, installation, connect, product, featured

我正在尝试安装 Incho 特色产品。我已经准备好安装指南，但问题是特色产品的 Magento Connect 链接已被删除。那么如何获取扩展密钥呢？请帮助我，有没有办法在没有扩展密钥的情况下手动安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:23:39.070

您可以直接从 Github 获取最新版本：

[https://github.com/buric/Inchoo_FeaturedProducts](https://github.com/buric/Inchoo_FeaturedProducts)

单击顶部附近的 ZIP 按钮，它将通过 Zip 文件下载所有文件。只需解压到您的 Magento 安装并登录到管理员即可安装。

# scala - 使用 SHA1 密码加密的 squeryl ORM

> ID：16139816
> 
> 赞同：0
> 
> 时间：2013-04-22T05:08:53.767
> 
> 标签：scala, playframework, squeryl

我正在尝试使用 squeryl ORM 框架将用户名和加密密码对插入数据库表中。我的代码基本上如下所示：

```
 class SHA1(e: StringExpression[String], m:OutMapper[String]) extends FunctionNode[String]("sha1", Some(m), Seq(e)) with StringExpression[String]

      def sha1(e:StringExpression[String])(implicit m:OutMapper[String]) = new SHA1(e,m)
      transaction{
        val foo = TestUser.userTable insert User("test@domain.com", sha1("password"))
      } 
```

但这不起作用。我收到一条错误消息：

```
type mismatch; found : controllers.SHA1 required: String Error occurred in an application involving default arguments. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:43:00.877

Squeryl 在这里可以施展的魔法是有限度的。您的模型类接受一个字符串值作为密码，并且您正在向它传递一个 SHA1 类型的值（从 sha1 函数返回的值）。scala 编译器不允许这样做。这里有几个选项：

1.  在将密码发送到数据库之前对密码进行哈希处理
2.  使用密码为空值插入您的用户，然后使用通过您的函数散列的密码在同一事务中更新它
3.  如果您使用的是 Squeryl 0.9.6-SNAPSHOT，您可能会创建一个 SHAString 自定义类型，用于在将字符串发送到数据库时对其进行散列处理

要在插入密码之前对其进行哈希处理，请查看`java.security.MessageDigest`并查看[此答案](https://stackoverflow.com/questions/4895523/java-string-to-sha1)。

# linux - 搜索关键字，如果匹配，则选择除它之外的单词

> ID：16139821
> 
> 赞同：1
> 
> 时间：2013-04-22T05:09:35.013
> 
> 标签：linux, sed, awk

```
255.255.0.0(queue=banglore)    
255.255.0.10(queue=hyderabad)    
255.255.1.2(cal = 10) 
```

我的脚本是

```
command | awk '{print $3}' | sed '1,9d' 
```

我的输出几乎就像上面在linux终端中显示的那样..

通过使用 awk 和 sed 脚本，我删除了一些无用的东西。但是，现在我只想要不带大括号的队列名称（即只有单词`banglore`, `hyderabad`）。如何获得那个。（使用sed）并且该IP地址会迅速改变..提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:42:30.660

简单的`grep`解决方案：

```
$ grep -Po '(?<=queue=)[^)]*' file
banglore
hyderabad 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:27:44.023

```
perl -lne 'if(/queue=/){m/\(queue=(.*?)\)/g;print $1}' your_file 
```

测试如下：

```
> cat temp
255.255.0.0(queue=banglore)    
255.255.0.10(queue=hyderabad)    
255.255.1.2(cal = 10) 
>
>
> perl -lne 'if(/queue=/){m/\(queue=(.*?)\)/g;print $1}' temp
banglore
hyderabad
> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T09:34:55.770

awk 版本：

```
awk -F '\\(|\\)|=' '{if($3 !~/(^ )/)print $3}' temp 
```

临时文件：

```
255.255.0.0(queue=banglore)    
255.255.0.10(queue=hyderabad)    
255.255.1.2(cal = 10) 
```

输出：

```
banglore
hyderabad 
```

# ios - 核心情节无法画线

> ID：16139822
> 
> 赞同：1
> 
> 时间：2013-04-22T05:09:36.020
> 
> 标签：ios, cocoa-touch, ios6, core-plot

根据库中提供的**RealTime**`Core Plot`示例，我尝试在我的项目中重新实现它。

我可以更新`y axis`、添加符号、绘制标签等。但我完全无法画线。

`CPTMutableLineStyle`对象似乎已正确实例化并正确设置为`CPTGraph`对象，但未在图中呈现

这是我在图表中添加线条样式的方法

```
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle]; // [dataSourceLinePlot.dataLineStyle mutableCopy];
lineStyle.lineWidth              = 3.0;
lineStyle.lineColor              = [CPTColor greenColor];
dataSourceLinePlot.dataLineStyle = lineStyle; 
```

![在此处输入图像描述](https://i.stack.imgur.com/BO621.png)

这是完整的课程代码

```
#import "TUTSimpleScatterPlot.h"

const double kFrameRate         = 5.0;  // frames per second
const double kAlpha             = 0.15; // smoothing constant
const NSUInteger kMaxDataPoints = 21;
NSString *kPlotIdentifier       = @"Data Source Plot";

@implementation TUTSimpleScatterPlot

// Initialise the scatter plot in the provided hosting view with the provided data.
// The data array should contain NSValue objects each representing a CGPoint.
-(id)initWithHostingView:(CPTGraphHostingView *)hostingView andData:(NSMutableArray *)data
{
    self = [super init];

    if ( self != nil ) {
        self.hostingView = hostingView;
        self.graphData = data;
        self.graph = nil;
    }

    return self;
}

-(void)initialisePlot
{
    self.graphData = [NSMutableArray array];
    CGRect bounds = self.hostingView.bounds;

    CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:bounds] ;

    [self.hostingView setHostedGraph:graph];

    graph.title = @"Measure";
    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.color                = [CPTColor grayColor];
    textStyle.fontName             = @"Helvetica-Bold";
    textStyle.fontSize             = round(bounds.size.height / (CGFloat)20.0);
    graph.titleTextStyle           = textStyle;
    graph.titleDisplacement        = CGPointMake( 0.0f, round(bounds.size.height / (CGFloat)18.0) ); // Ensure that title displacement falls on an integral pixel
    graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;

    CGFloat boundsPadding = round(bounds.size.width / (CGFloat)20.0); // Ensure that padding falls on an integral pixel

    graph.paddingLeft = boundsPadding;

    if ( graph.titleDisplacement.y > 0.0 ) {
        graph.paddingTop = graph.titleDisplacement.y * 2;
    }
    else {
        graph.paddingTop = boundsPadding;
    }

    graph.paddingRight  = boundsPadding;
    graph.paddingBottom = boundsPadding;

    graph.plotAreaFrame.paddingTop    = 15.0;
    graph.plotAreaFrame.paddingRight  = 15.0;
    graph.plotAreaFrame.paddingBottom = 55.0;
    graph.plotAreaFrame.paddingLeft   = 55.0;

    // Grid line styles
    CPTMutableLineStyle *majorGridLineStyle = [CPTMutableLineStyle lineStyle];
    majorGridLineStyle.lineWidth = 0.75;
    majorGridLineStyle.lineColor = [[CPTColor colorWithGenericGray:0.2] colorWithAlphaComponent:0.75];

    CPTMutableLineStyle *minorGridLineStyle = [CPTMutableLineStyle lineStyle];
    minorGridLineStyle.lineWidth = 0.25;
    minorGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.1];

    // Axes
    // X axis
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *x          = axisSet.xAxis;
    x.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    x.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
    x.majorGridLineStyle          = majorGridLineStyle;
    x.minorGridLineStyle          = minorGridLineStyle;
    x.minorTicksPerInterval       = 9;
    x.title                       = @"X Axis";
    x.titleOffset                 = 35.0;
    NSNumberFormatter *labelFormatter = [[NSNumberFormatter alloc] init];
    labelFormatter.numberStyle = NSNumberFormatterNoStyle;
    x.labelFormatter           = labelFormatter;

    // Y axis
    CPTXYAxis *y = axisSet.yAxis;
    y.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    y.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
    y.majorGridLineStyle          = majorGridLineStyle;
    y.minorGridLineStyle          = minorGridLineStyle;
    y.minorTicksPerInterval       = 3;
    y.labelOffset                 = 5.0;
    y.title                       = @"Y Axis";
    y.titleOffset                 = 30.0;
    y.axisConstraints             = [CPTConstraints constraintWithLowerOffset:0.0];

    // Rotate the labels by 45 degrees, just to show it can be done.
    x.labelRotation = M_PI * 0.25;

    // Create the plot
    CPTScatterPlot *dataSourceLinePlot = [[CPTScatterPlot alloc] init];
    dataSourceLinePlot.identifier     = kPlotIdentifier;
    dataSourceLinePlot.cachePrecision = CPTPlotCachePrecisionDouble;
    //    dataSourceLinePlot.interpolation = CPTScatterPlotInterpolationCurved;

    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle]; // [dataSourceLinePlot.dataLineStyle mutableCopy];
    lineStyle.lineWidth              = 3.0;
    lineStyle.lineColor              = [CPTColor greenColor];
    dataSourceLinePlot.dataLineStyle = lineStyle;

    CPTMutableLineStyle *symbolLineStyle = [CPTMutableLineStyle lineStyle];
    symbolLineStyle.lineColor = [[CPTColor blackColor] colorWithAlphaComponent:0.5];
    CPTPlotSymbol *plotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    plotSymbol.fill               = [CPTFill fillWithColor:[[CPTColor blueColor] colorWithAlphaComponent:0.5]];
    plotSymbol.lineStyle          = symbolLineStyle;
    plotSymbol.size               = CGSizeMake(10.0, 10.0);
    dataSourceLinePlot.plotSymbol = plotSymbol;

    dataSourceLinePlot.dataSource = self;
    [graph addPlot:dataSourceLinePlot];

    // Plot space
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(kMaxDataPoints - 1)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(1)];

    self.graph = graph;

    self.dataTimer = [NSTimer timerWithTimeInterval:1.0 / kFrameRate
                                         target:self
                                       selector:@selector(newData:)
                                       userInfo:nil
                                        repeats:YES];
    [[NSRunLoop mainRunLoop] addTimer:self.dataTimer forMode:NSDefaultRunLoopMode];

}

#pragma mark -
#pragma mark Timer callback

-(void)newData:(NSTimer *)theTimer
{
    CPTGraph *theGraph = self.graph;
    CPTPlot *thePlot   = [theGraph plotWithIdentifier:kPlotIdentifier];

    if ( thePlot ) {
//        if ( self.graphData.count >= kMaxDataPoints - 5 ) {
//            [self.graphData removeObjectAtIndex:0];
//            [thePlot deleteDataInIndexRange:NSMakeRange(0, 1)];
//        }

        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)theGraph.defaultPlotSpace;
        NSUInteger location       = (_currentIndex >= kMaxDataPoints ? _currentIndex - kMaxDataPoints + 5 : 0);
        plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(location)
                                                        length:CPTDecimalFromUnsignedInteger(kMaxDataPoints - 1)];

        _currentIndex++;

        NSNumber * num;
        if (_currentIndex == 1) {

            num = [NSNumber numberWithDouble: 5 + (arc4random() % 15) ];
        } else {

            NSLog(@"lastVal: %d", [[self.graphData lastObject] intValue]);
            float low_bound = (1 - kAlpha) * [[self.graphData lastObject] floatValue];
            float high_bound = (1.01 + kAlpha) * [[self.graphData lastObject] floatValue];
            float random = (((float)arc4random()/0x100000000)*(high_bound-low_bound)+low_bound);

            NSLog(@"random: %f", random);
            num = [NSNumber numberWithDouble:random];
        }
        // Update y range if necessary
        if (_currentIndex < kMaxDataPoints) {
            int maxValue = -1;
            for (int i = self.graphData.count -1 ; (i >= 0); i--) {
                if ([[self.graphData objectAtIndex:i] intValue] > maxValue) {
                    maxValue = [[self.graphData objectAtIndex:i] intValue];
                }
            }
            plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(maxValue + 1)];
        } else if (_currentIndex >= kMaxDataPoints) {
            int maxValue = -1;
            for (int i = self.graphData.count -1 ; (i >= self.graphData.count - kMaxDataPoints + 2); i--) {
                if ([[self.graphData objectAtIndex:i] intValue] > maxValue) {
                    maxValue = [[self.graphData objectAtIndex:i] intValue];
                }
            }
            plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(maxValue + 1)];
        }

        [self.graphData addObject:num];
        [thePlot insertDataAtIndex:self.graphData.count - 1 numberOfRecords:1];

    }
}

#pragma mark -
#pragma mark Plot Data Source Methods

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    return [self.graphData count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    NSNumber *num = nil;

    switch ( fieldEnum ) {
        case CPTScatterPlotFieldX:
            num = [NSNumber numberWithUnsignedInteger:index + _currentIndex - self.graphData.count];
            break;

        case CPTScatterPlotFieldY:
            num = [self.graphData objectAtIndex:index];
            break;

        default:
            break;
    }

    return num;
}

@end 
```

有任何想法吗 ？提示 ？哈克？

**更新 1**

在我的项目中，我使用`1.2`了库的版本。我试图回归到`1.0`版本，现在显示行。关于如何将我的项目转换为使用最新版本的任何想法？

**更新 2***

`Podfile`从`pod 'CorePlot'`到更改`pod 'CorePlot', '~> 1.2'`似乎有所不同。我的线现在已正确绘制...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:33:02.750

`cocoapods`通过这种方式使用似乎有区别

```
pod 'CorePlot' 
```

或通过这种方式

```
pod 'CorePlot', '~> 1.2' 
```

然后通过执行重新安装库`pod install`

现在项目可以画线了

# mysql - django 中的运行时警告

> ID：16139824
> 
> 赞同：4
> 
> 时间：2013-04-22T05:09:49.433
> 
> 标签：mysql, django, django-models, django-timezone

我正在开发一个以 MySQL 为后端的 Django 项目，这个警告一直困扰着我，任何人都可以建议解决这个问题。提前致谢！！

```
/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.py:808: 
    RuntimeWarning: DateTimeField received a naive datetime (2013-04-22 10:34:44) 
    while time zone support is active. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T06:05:25.193

您必须进行以下更改：

在 settings.py 中，您需要添加以下行：

```
USE_TZ = True 
```

此外，在您的代码中，您应该创建`aware`日期时间对象：

例如：

代替

```
import datetime

now = datetime.datetime.now() 
```

你应该做：

```
from django.utils.timezone import now

now_time = now() 
```

这将使用 USE_TZ from`settings.py`并将创建`aware`datetime 对象而不是`native`.

您应该阅读[https://docs.djangoproject.com/en/dev/topics/i18n/timezones/](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)

# javascript - 使用 KnockoutJS 进行多字段验证的最佳实践

> ID：16139828
> 
> 赞同：-2
> 
> 时间：2013-04-22T05:10:15.577
> 
> 标签：javascript, html, validation, knockout.js

我正在寻找实践多字段验证的最佳实践。假设我有两个数字输入最小值和最大值。我在哪里以及如何实现逻辑检查 min must <= max ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:31:46.487

有几种方法可以做到这一点。第一个是 jquery 并编写自定义验证器，第二个是使用 koValidate 并编写自定义验证器。

# xml - 在 KML 文件中用文件夹标签包装地标标签

> ID：16139831
> 
> 赞同：2
> 
> 时间：2013-04-22T05:10:56.847
> 
> 标签：xml, awk, kml

我有一个包含数百个地标的 kml 文件，我需要将每个地标移动到它自己的文件夹中。在这个过程中，我需要能够通过地标名称来命名/重命名每个文件夹。这可以通过使用 awk、perl 或 sed 来完成吗？我不是 XML 专家。

kml 格式如下：

```
<Folder>
    <name>TEST</name>
    <open>1</open>
    <Placemark>
        <name>LOCATION ONE</name>
        [...]
    </Placemark>
    <Placemark>
        <name>LOCATION TWO</name>
        [...]
    </Placemark>
    <Placemark>
        <name>LOCATION ONE &amp; TWO</name>
        [...]
    </Placemark>
</Folder> 
```

它需要是这样的：

```
<Folder>
        <name>TEST</name>
        <open>1</open>
        <Folder>
        <name>LOCATION ONE</name>
        <Placemark>
                <name>LOCATION ONE</name>
                [...]
        </Placemark>
        </Folder>
        <Folder>
        <name>LOCATION TWO</name>
        <Placemark>
                <name>LOCATION TWO</name>
                [...]
        </Placemark>
        </Folder>
        <Folder>
        <name>LOCATION ONE &amp; TWO</name>
        <Placemark>
                <name>LOCATION ONE &amp; TWO</name>
                [...]
        </Placemark>
        </Folder>
</Folder> 
```

到目前为止，我设法使用以下 awk 命令`<placemark>`逐个`<folder>`标签包装每个标签，但我还需要能够通过其地标名称重命名每个文件夹：

```
awk '/<Placemark>/{system("cat file1");next}1' file.kml
awk '/<\/Placemark>/{system("cat file2");next}1' file.kml 
```

文件1：

```
<Folder>
<name>@@FOLDER@@</name>
<Placemark> 
```

文件2

```
</Placemark>
</Folder> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:21:40.737

该脚本应该可以帮助您：

```
# Expects the file in reverse 
# tac file.xml | awk -f parse_kml.awk | tac

/<\/Placemark>/ {   
    p_flag = 1          # Set flag if inside tag
    print "</Folder>"   # Print closing folder tag
    print $0            # Print current line
    next                # Skip to next line
}
/<Placemark>/ {
    print $0            # Print current line
    print line          # Print name tag
    print "<Folder>"    # Print folder tag
    next                # Skip to next line
}
p_flag && /<name>/ {
    line=$0             # Store the line
}
{
    print $0
} 
```

保存到文件，例如`parse_kml.awk`并运行行：

```
tac file.xml | awk -f parse_kml.awk | tac 
```

如果你有`xmllint`你可以使用这种格式的输出：

```
$ tac file.xml | awk -f parse_kml.awk | tac | xmllint --format - 
<?xml version="1.0"?>
<Folder>
  <name>TEST</name>
  <open>1</open>
  <Folder>
    <name>LOCATION ONE</name>
    <Placemark><name>LOCATION ONE</name>
        [...]
    </Placemark>
  </Folder>
  <Folder>
    <name>LOCATION TWO</name>
    <Placemark><name>LOCATION TWO</name>
        [...]
    </Placemark>
  </Folder>
  <Folder>
    <name>LOCATION ONE &amp; TWO</name>
    <Placemark><name>LOCATION ONE &amp; TWO</name>
        [...]
    </Placemark>
  </Folder>
</Folder> 
```

# sql - Django 和字段加密与数据库 ENCRYPTBYKEY 功能

> ID：16139836
> 
> 赞同：1
> 
> 时间：2013-04-22T05:11:20.347
> 
> 标签：sql, django, encryption

我正在将 Django 用于捕获一些敏感数据的应用程序，并且我需要在数据库中对这些数据进行加密。我必须使用数据库加密。

因此，为了保存我的字段，我使用：

```
query = """
    OPEN SYMMETRIC KEY MyKey
    DECRYPTION BY CERTIFICATE MyCertificate

    UPDATE mytable
    SET name = ENCRYPTBYKEY(KEY_GUID('MyKey'), %s)
    WHERE id = %s

    CLOSE SYMMETRIC KEY MyKey
"""
args = ["Test Name", data.id]

cursor = connection.cursor()
cursor.execute(query, args)
transaction.commit_unless_managed() 
```

该字段保存在数据库中，但是，当我解密保存在基础中的数据时，我得到`0x540065007300740020004E0061006D006500`了我应该得到的地方`0x54657374204E616D65`。

有人知道为什么在我的字符串中插入了一些 0x00 字节吗？

我尝试使用 connection.queries[-1] 获取查询字符串并直接在数据库中运行它，当我解密时数据是干净的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:07:06.060

显然，SQL Server 正在隐式地进行某种字符串转换。

我通过在加密之前将数据转换为 varchar 解决了我的问题：

```
query = """
    OPEN SYMMETRIC KEY MyKey
    DECRYPTION BY CERTIFICATE MyCertificate

    UPDATE mytable
    SET name = ENCRYPTBYKEY(KEY_GUID('MyKey'), CAST(%s AS VARCHAR(1023)))
    WHERE id = %s

    CLOSE SYMMETRIC KEY MyKey
"""
args = ["Test Name", data.id]

cursor = connection.cursor()
cursor.execute(query, args)
transaction.commit_unless_managed() 
```

# vb.net - 如何在鼠标单击时将 datagridview 中的图像加载到 vb.net 中的图片框中

> ID：16139837
> 
> 赞同：-1
> 
> 时间：2013-04-22T05:11:35.650
> 
> 标签：vb.net, datagridview, picturebox

我正在做一个项目，我有一个通过 datagridview 显示的图像列表。当在 datagridview 中单击特定图像时，我想将图像加载到图片框中。

我的代码

```
Private Sub DataGridView1_CellMouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.CellMouseClick
        sql.Open()

        cmd = New SqlCommand("select pic from detail4 where id='" & DataGridView1.CurrentRow.Cells(0).Value() & "'", sql)
        Dim imageData As Byte() = DirectCast(cmd.ExecuteScalar(), Byte())
        If Not imageData Is Nothing Then
            Using ms As New MemoryStream(imageData, 0, imageData.Length)
                ms.Write(imageData, 0, imageData.Length)
                PictureBox1.BackgroundImage = Image.FromStream(ms, True)
            End Using
        End If

    End Sub 
```

我得到内存不足异常..可能是什么问题。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T04:03:11.030

将 imagedata 声明为对象

```
Dim cmd As SqlCommand
cmd = New SqlCommand("select vchimage1  from producto where chrcodigoproducto='" & cCodProducto & "'", ClsCn.Cnx_Base)
Dim imagedata As Object
imagedata = cmd.ExecuteScalar()
'Dim imageData As Byte() = DirectCast(cmd.ExecuteScalar(), Byte())

If IsNothing(imagedata) Or IsDBNull(imagedata) Then

    ImgProducto.Visible = False
    mLoadPictureImage = False
Else
    Using ms As New MemoryStream(imagedata, 0, imagedata.Length)
        ms.Write(imagedata, 0, imagedata.Length)
        ImgProducto.BackgroundImage = Image.FromStream(ms, True)

        mLoadPictureImage = True
    End Using
End If 
```

www.jisoft-ingenieros.com

# php - phpunit 未在 wamp 中正确安装

> ID：16139838
> 
> 赞同：0
> 
> 时间：2013-04-22T05:11:37.637
> 
> 标签：php

我在 win 7 中使用 wamp 2.2 并尝试安装 phpunit

[1.我从https://github.com/sebastianbergmann/phpunit](https://github.com/sebastianbergmann/phpunit)下载 phpunit-master.zip 。2.我解压。3.我把它放在D:\wamp\bin\php\php5.3.10下，然后，我在php脚本下面运行；

```
<?php
//testsuite.wordcount.php
require_once 'PHPUnit/TextUI/TestRunner.php';
require_once "PHPUnit/Framework/TestSuite.php";
require_once "class.testwordcount.php";
$suite = new PHPUnit_Framework_TestSuite();
$suite->addTestSuite("TestWordCount");
PHPUnit_TextUI_TestRunner::run($suite);
?> 
```

输出为： *Warning: require_once(PHPUnit/TextUI/TestRunner.php) [function.require-once]: failed to open stream: No such file or directory in D:\wamp\www\oop\test.php on line 4*

看来我没有正确安装phpunit，所以可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T05:15:08.053

```
Run the following commands (they may take a while to update):

pear channel-update pear.php.net
pear upgrade-all
pear channel-discover pear.phpunit.de
pear channel-discover components.ez.no
pear channel-discover pear.symfony-project.com
pear update-channels   

 To install PHPUnit, run
    pear install --alldeps --force phpunit/PHPUnit

    To test that PHPUnit was successfully installed, run
    phpunit -v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:16:40.527

您不能只是将文件放在那里并希望它能够正常工作，您需要按照此处的安装说明进行操作：[https ://github.com/sebastianbergmann/phpunit#installation](https://github.com/sebastianbergmann/phpunit#installation)

对我来说，我发现安装它的最简单方法是通过 Pear，如果您愿意在系统范围内安装它，尽管这可能会因升级、不同版本等或基于每个项目而变得混乱可以通过作曲家安装（这是我的偏好）

# sql - sql statement with codeigniter active records

> ID：16139840
> 
> 赞同：0
> 
> 时间：2013-04-22T05:11:40.837
> 
> 标签：sql, codeigniter

I have a table "login_attempts" with the fields: `id`, `ip`, `login_name`, `time`.

I want to achieve this:

Count the number of occurrences for the last 10 minutes for a particular `login_name`.

I'd like to know the query statement in CodeIgniter's active records format?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:56:31.353

```
$this->db->select('COUNT(*) AS count', FALSE);
$this->db->from('login_attempts');
$this->db->where('login_name', $name);
$this->db->where('time > UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 10 MINUTE))', NULL, FALSE); 
```

That assumes your table is set up to use Unix timestamps. If that doesn't work, try:

```
$this->db->where('time > TIMESTAMP(DATE_SUB(NOW(), INTERVAL 10 MINUTE))', NULL, FALSE); 
```

or:

```
$this->db->where('time > DATE_SUB(NOW(), INTERVAL 10 MINUTE)', NULL, FALSE); 
```

Let me know if you have trouble.

# jquery - jQuery Mobile close page dialog

> ID：16139842
> 
> 赞同：5
> 
> 时间：2013-04-22T05:11:54.880
> 
> 标签：jquery, html, jquery-mobile

How do I close the dialog page in jQuery Mobile?

In my particular case, I call another page as the page loading and then after the process is finished I want to ajax page loading closed and appeared again with a dialog page contains all the data received callback ajax.

My code :

```
$("#login").click(function(e){
LoadingPanel();
e.preventDefault();
     $.ajax({
        url:'http://www.myurl.com/soap/login.php',
        dataType:'jsonp',
        timeout: 15000,
        cache: false,
        data: dataString,
        success:function(response){

            //Dialog page closed here

            for(var i=0; i<response.length; i++){
                    var str,str2,str3,str4,str5,str6,str7 = "";
                    str     = response[i].NE;
                    str2    = response[i].EMAIL;
                    str3    = response[i].TIPE;
                    str4    = response[i].NAMA;
                    str5    = response[i].TELP;
                    str6    = response[i].DN;
                    str7    = response[i].DESC_LOGIN;

                if(str=='-'){
                    alert('Data does not match')
                }else{
                var AllData = ""
                    AllData = 'Data1 : '+str+'\nData2 : '+str2+'\nData3 : '+str3+'\nData4 : '+str4+'\nData5 : '+str5
                    alert(AllData);
                    //How do I display this data into jquery mobile dialog?
                    } 
                }

            },
            error: function (xhr, ajaxOptions, thrownError) {
                if(thrownError==="timeout") {
                    alert("Cant connect");
                } else {
                    alert(t);
                }
            }
    });
  }); 
```

To the calling page loading :

```
function LoadingPanel(){
    $.mobile.changePage( "loading.html", { 
       role: "dialog" 
    });
} 
```

How do I display this data into jquery mobile dialog when my data successfully accepted -> alert(AllData) ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T07:51:45.707

Once you load `loading.html` using `$.mobile.changePage('loading.html', { role: 'dialog'});`, jQuery Mobile will give it a `data-role=dialog`. You can close it using the below.

```
$('[data-role=dialog]').dialog( "close" ); 
```

This will close the dialog, actually any open dialog, even if it doesn't have an `id`.

`.selector` means, `#id`, class `.class`, `data-role=something`...etc

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:58:14.100

You can also call the dialog's `close()` method to programmatically close dialogs.

```
$(document).bind('pageinit', function() {
    $("#bar").on('pagebeforeshow', function() {
        $("#btnClose").bind('click', function() {
            //alert('test');
            $("#bar").dialog('close');
        });

    });
}); 
```

**[DEMO](http://jsfiddle.net/maheshsapkal/pyCND/)**

# python - 在scrapy网络爬虫中出现错误

> ID：16139846
> 
> 赞同：4
> 
> 时间：2013-04-22T05:12:50.387
> 
> 标签：python, web-scraping, scrapy, web-crawler, scrapy-spider

嗨，我试图在我的代码中实现这一点。但我收到以下错误：`exceptions.NameError: global name 'Request' is not defined`。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector 
from bs4 import BeautifulSoup

class spider_aicte(BaseSpider):
    name = "Indian_Colleges"
    allowed_domains = ["http://www.domain.org"]
    start_urls = [
        "http://www.domain.org/appwebsite.html",
        ]

    def parse(self, response):
        filename = response.url.split("/")[-2]
        soup = BeautifulSoup(response.body)
        for link in soup.find_all('a'):
            download_link = link.get('href')
            if '.pdf' in download_link:
                pdf_link = "http://www.domain.org" + download_link
                print pdf_link
                class FileSpider(BaseSpider):
                    name = "fspider"
                    allowed_domains = ["www.domain.org"]
                    start_urls = [
                            pdf_link
                            ]
        for url in pdf_link:
            yield Request(url, callback=self.save_pdf)

    def save_pdf(self, response):
         path = self.get_path(response.url)
         with open(path, "wb") as f:
            f.write(response.body) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T06:56:08.453

您应该在使用之前导入[`Request`](http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request)：

```
from scrapy.http import Request 
```

* * *

或者，还有一个“快捷方式”导入：

```
from scrapy import Request 
```

或者，如果您有`import scrapy`线路，请使用`scrapy.Request`.

# c++ - kernel32.lib accidentally deleted - VS 2012 Fix

> ID：16139849
> 
> 赞同：-1
> 
> 时间：2013-04-22T05:12:59.043
> 
> 标签：c++, visual-studio, visual-studio-2012, linker, kernel32

I recently installed VS2012 on my home laptop to write some software for fun in my spare time. Here's the order in which the mishap happened:

1.  Accidentally installed VS2012 for Windows 8 Apps. Realized that I actually wanted the Windows Desktop version.

2.  Uninstall the above, install VS2012 for Windows Desktop.

3.  Start writing software, everything is fine and compiles.

4.  See random VS Folder that mentions Windows 8 on my start screen - permanently delete it from computer thinking it was related to #1\.

5.  My program no longer compiles, with the following common error:

error LNK1104: cannot open file 'kernel32.lib'

I searched my C-Drive to find the location of this file to try and diagnose the problem, except that it doesn't exist - I can't find it anywhere. I tried a fresh VS2012 install, and that was a bust - the same problem. I also tried to download the VS2012 SDK, but it won't install, insisting the VS2012 isn't installed, and that it's required.

What can I do!?

EDIT: I've tried to repair the install twice as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:13:39.773

您需要（重新）安装 Windows SDK。这包括开发 Windows 应用程序所需的一切，包括`lib`链接到系统 DLL 的文件。您可以在[此处](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)找到可供下载的 Windows 8 版本。

我不知道为什么重新安装 Visual Studio 对您不起作用。它应该包括 Windows SDK，但也许您安装了错误的版本。例如，不确定 Express 版本是否包含它。

请注意，*Windows* SDK 与*Visual Studio* SDK 不同。SDK 部分的意思是“软件开发工具包”，所以它们是相似的。但一种是为*Windows*开发软件，另一种是为*Visual Studio*开发软件（如插件和扩展等）。不过，Visual Studio SDK 不会包含`lib`系统 DLL 的文件，所以这就是它不起作用的原因。当然，它需要先安装 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:00:02.770

在多次重新安装、修复和 SDK 重新安装之后，唯一有效的方法是完整的系统还原。

# kendo-ui - Kendo UI - Click Grid Row to Populate Another Grid

> ID：16139850
> 
> 赞同：2
> 
> 时间：2013-04-22T05:13:05.153
> 
> 标签：kendo-ui, kendo-grid

I have a **Kendo** grid that when you click on a row, I would like it to update the contents of another grid on the page. How would you write a function to tell the grid to update the second grid? As an example, the first grid would be a list of states and the second grid would show all of the cities within the selected state.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:47:28.943

只需在第一个表的行上绑定 click 事件：

```
$("#states tbody").on("click", "tr", changeState); 
```

然后相应地更改第二个表的数据：

```
$("#cities").data("kendoGrid").dataSource.data(getListOfCities()); 
```

这里只是一些示例代码：[jsFiddle](http://jsfiddle.net/scaillerie/UbeXn/1/)

# python - Change Title Bar on a Tk window

> ID：16139856
> 
> 赞同：1
> 
> 时间：2013-04-22T05:13:44.780
> 
> 标签：python, tkinter, titlebar

Im trying to make the top bar of my Tk window say calculator instaed of Tk is there anyway to do that also can i change the little icon beside it to a differnt image if not the title would just be fine Thank you

Here is the code:

```
import math

def calculate():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 * num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!')
def calculate2():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 / num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!')
def calculate3():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 + num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!')
def calculate4():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 - num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!',fg="white")
def calculate5():
    try:
        num1 = float(enter1.get())
        result = num1**2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!',fg="white")
def calculate6():
    try:
        num1 = float(enter1.get())
        result = math.sqrt(num1)
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!',fg="white")

root = Tk()
root.configure(background='black')

label1 = Label(root, text='First Number:',bg="black", fg="white")
label1.grid(row=0, column=0,columnspan=2)
enter1 = Entry(root, bg='white')
enter1.grid(row=1, column=0,columnspan=2)

label2 = Label(root, text='Second Number:',bg="black", fg="white")
label2.grid(row=2, column=0,columnspan=2)
enter2 = Entry(root, bg='white')
enter2.grid(row=3, column=0, columnspan=2)

btn1 = Button(root, text='-Multiply-', command=calculate,               bg="black",activebackground="green", fg="white")
btn1.grid(row=4, column=0)
btn2 = Button(root, text='-Divide-', command=calculate2,     bg="black",activebackground="orange", fg="white")
btn2.grid(row=5, column=0)
btn3 = Button(root, text='-Add-', command=calculate3,  bg="black",activebackground="purple", fg="white")
btn3.grid(row=5, column=1)
btn4 = Button(root, text='-Subtract-', command=calculate4,  bg="black",activebackground="red", fg="white")
btn4.grid(row=4, column=1)
btn5 = Button(root, text='Square (Only First #)', command=calculate5,    bg="black",activebackground="cyan", fg="white")
btn5.grid(row=6, column=0, columnspan=2)
btn6 = Button(root, text='Square Root (only First #)', command=calculate6,  bg="black",activebackground="yellow", fg="white")
btn6.grid(row=7, column=0, columnspan=2,)
label3 = Label(root, bg="black")
label3.grid(row=8, column=0, columnspan=2)

enter1.focus()

enter1.bind('<Return>', func=lambda e:enter2.focus_set())

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:26:45.097

像这样：

```
root.title("My Application Title") 
```

更改图标的方法可以在[这个答案](https://stackoverflow.com/a/11180300/1142167)中找到。

# c# - 数据绑定到 asp.net 树视图

> ID：16139862
> 
> 赞同：0
> 
> 时间：2013-04-22T05:14:42.940
> 
> 标签：c#, asp.net, treeview

我的城市数据库显示如下，

```
City
-----
CityName
CountryName 
```

我想将此数据绑定到 asp.net 树视图

```
 <asp:TreeView ID="TreeView1" runat="server"></asp:TreeView> 
```

就像 ，

```
CountryName1 
    CityName1
    CityName2
    CityName3
CountryName2
    CityName4
    CityName5
    CityName6 
```

我使用`linq`数据源绑定数据，

```
TreeView1.DataSource = DB.Cities.ToList();
TreeView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:34:00.517

尝试从更容易的设计中进行编辑。在与数据源绑定后，单击`Edit Treenode data binding` 并通过指定适当的根节点和子节点将其分类为任何层次结构格式...

# java - 在 pop 方法上获取 NullPointerException

> ID：16139863
> 
> 赞同：-3
> 
> 时间：2013-04-22T05:14:48.100
> 
> 标签：java

我从链接堆栈开始，我想知道为什么这部分代码给了我一个 NullPointerException。我想在主驱动程序中做的一件事是继续添加书籍，直到出现提示时输入停止。push 方法似乎有效，因为在输出列表的顶部，您可以看到 Book - 2 位于顶部。我试图以其他方式接近它，但它一直给我那个确切的错误。*注意我已经阅读了写这篇文章时出现的类似问题，但我似乎找不到问题所在。*

**这是 push 和 pop 的代码：**

```
@Override
 public void push(T data)
 {
 Node<T> current = new Node<>(data, top);
 if(count == top.length)
 {
  expandCapacity();   
 }
 current.setNext(top);
 top[count++] = current;

 } 
```

*这是我遇到问题弹出方法的地方*

@覆盖

```
 public T pop()
 {
 T result;

 if(count == 0 || top == null )
 {
     System.out.println("List is empty");
 }

 result = top[count].getData();
 top =  top[count - 1].getNext();

 return result;
 } 
```

**这是 LinkedStack 的声明和构造函数**

```
public class LinkedStack<T> implements linkedInterface<T> {

 private int count;
 private Node<T> []top;
 private static final int size = 5;

 public LinkedStack()
 {
     top = (Node<T>[]) (new Node [size]);
     count = 0;

 } 
```

**这是Node类的代码**

```
public class Node<T> 
{

private T data; 
private Node []next;

public Node(T _data)
{
data = _data;
}
public Node(T _data, Node []_next)
{
data = _data;
next = _next;
}

public T getData()
{
return data;    
}

public void setData(T _data)
{
data = _data;    
}

public Node[] getNext()
{

return next;    

}

public void setNext(Node []_next)
{
 next = _next;   
}

} 
```

**输出**

```
Note to stop adding books enter: 'stop' when prompted.
Book-1
Enter title:
title1
author1
ISBN1
10

Do you wish stop adding books? N || stop
n
Book-2
Enter title:
title2
author2
ISBN2
20

Do you wish stop adding books? N || stop
stop
The books in list are:

Title:title2
Author/s: author2
ISBN: ISBN2
Exception in thread "main" java.lang.NullPointerException
Copies in stock: 20

    at node.LinkedStack.pop(LinkedStack.java:133)
    at node.BookDriver.main(BookDriver.java:85)
Java Result: 1
BUILD SUCCESSFUL (total time: 36 seconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:24:30.140

问题是您检查是否为`top`空，但不是通过返回来停止该方法，而是打印一个警告并继续执行，就好像它不为空一样。几行之后，您访问数组，如果它是 null ，kaboom。

尝试这样的事情：

```
 if(count == 0 || top == null )
 {
     System.out.println("List is empty");
     return null; // ADDED THIS LINE!
 } 
```

### 编辑

即使 top 不为 null，如果将 null 添加到列表中，您也将被淹没：

```
top[count].getData() 
```

`top[count]`如果其中存储了空值，将抛出 NPE 。

# c# - Can't connect to mysql 5.6 database

> ID：16139865
> 
> 赞同：0
> 
> 时间：2013-04-22T05:14:52.020
> 
> 标签：c#, mysql, localhost, database-connection

I have been trying to connect to a MySQL database but have been getting exception 0x80131904: The server was not found. I know the server is running and I can query it through the command line. I have also made sure skip networking is not enabled. What am I doing wrong?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Data.SqlClient;

class Program
    {
    static void Main(string[] args)
        {

        Console.WriteLine("Connecting to database...");

        SqlConnection sqlserver = new SqlConnection("user id=<removed>;" +
                                  "password=<removed>;server=localhost;" +
                                  "Trusted_Connection=yes;" +
                                  "database=ircbot; " +
                                  "connection timeout=5");

        try
            {
            sqlserver.Open();
            Console.ForegroundColor = ConsoleColor.Green;
            Console.WriteLine("Connected");
            Console.ResetColor();
            }
        catch (Exception e)
            {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine(e.ToString());
            Console.ResetColor();
            }

        Console.ReadLine();
        }    //end main

    }  //end class Program 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:25:54.713

`SqlConnection`仅用于连接 Microsoft SQL Server，您不能使用它连接任何其他 DBMS，如 MySQL *。*

为了能够从 C# 连接到 MySQL，您需要[MySQL Connector/Net](https://dev.mysql.com/doc/dev/connector-net/html/connector-net-x-devapi-reference.htm)。它带有一个`MySqlConnection`类和相应的数据读取器和参数类。

介绍可以在[这里](https://dev.mysql.com/doc/dev/connector-net/html/connector-net-x-devapi-getting-started.htm#!)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:29:43.813

```
MySql.Data.MySqlClient.MySqlConnection conn;
string myConnectionString;

myConnectionString = "server=127.0.0.1;uid=root;" +
"pwd=12345;database=test;";

try
{
conn = new MySql.Data.MySqlClient.MySqlConnection();
conn.ConnectionString = myConnectionString;
conn.Open();
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:19:26.433

尝试使用 127.0.0.1 而不是 'localhost' 作为您的服务器。

# sql-server - Searching employees by name shows all rows (T-SQL)

> ID：16139871
> 
> 赞同：0
> 
> 时间：2013-04-22T05:15:18.793
> 
> 标签：sql-server, tsql, stored-procedures, parameters

I have a stored procedure with a parameter @name nvarchar(50). Now the stored procedure itself looks like this:

```
CREATE PROCEDURE [dbo].[dcspFilterEmpList]
    @empName nvarchar   
AS
    SELECT 
        employee_id AS 'ID',
        name_1+' '+surname AS 'NAME'    
    FROM 
        Employees
    WHERE   
        'NAME' LIKE '%'+@empName+'%' 
```

I enter any part of a name that exists in the table, but, as a result, I get the whole table. Sometimes I get strange results, e.g. two rows, one of which matches criteria, the other one doesn't.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:21:29.763

```
SELECT
    emp_id AS ID, 
    emp_name+' '+ emp_surname AS NAME
FROM 
    Employees 
WHERE 
    emp_name LIKE '%' + @name+ '%' OR  emp_surname LIKE '%' + @name+ '%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:55:40.313

试试这个——

```
CREATE PROCEDURE [dbo].[dcspFilterEmpList]

    @empName NVARCHAR(500)   

AS BEGIN

    SELECT 
          ID = e.employee_id
        , NAME = e.name_1 + ' ' + e.surname    
    FROM dbo.Employees e
    WHERE e.name_1 + ' ' + e.surname LIKE '%'+ @empName + '%'

END 
```

**更新：**

```
CREATE PROCEDURE [dbo].[dcspFilterEmpList]

    @empName NVARCHAR(500)   

AS BEGIN

    SELECT 
          e2.ID
        , e2.NAME
    FROM (
        SELECT 
              ID = e.employee_id
            , NAME = e.name_1 + ' ' + e.surname -- + ' ' + e.first_name + ....  
        FROM dbo.Employees e
    ) e2
    WHERE e2.NAME LIKE '%'+ @empName + '%'

END 
```

# jquery - Jquery在第一次加载时计算宽度问题

> ID：16139873
> 
> 赞同：1
> 
> 时间：2013-04-22T05:15:35.873
> 
> 标签：jquery, width, banner

页面第一次加载时出现累积添加的图像。Jquery 不动态计算宽度，但正常出现第二次加载或页面刷新后。可能是什么原因？

Javascript：

```
$(function(){
    var imageWidth, totalWidth, sliderContent, $slider;
    $slider = $("#slider");
    sliderContent = $slider.html();
    $slider.html("<div id=\"slideWrapper\">" + sliderContent + "</div>");
    imageWidth = $slider.find("img").width();
    totalWidth = $slider.find("img").size() * imageWidth;
    $("#slider").css("width", imageWidth);
    $("#slideWrapper").css("width", totalWidth);

    $(".next-arr").click(function () {
        if (parseInt($("#slideWrapper").css("margin-left")) < 0 && !$("#slideWrapper").is(":animated")) {
            $("#slideWrapper").stop(true, true).animate({ marginLeft: "+=" + imageWidth + "px" }, 1600);
        }
    });

    $(".prev-arr").click(function () {
        if ((parseInt($("#slideWrapper").css("margin-left")) * -1) < (totalWidth - imageWidth) && !$("#slideWrapper").is(":animated")) {
            $("#slideWrapper").stop(true, true).animate({ marginLeft: "-=" + imageWidth + "px" }, 1600);
        }
    });
}); 
```

html:

```
<div id="slider">
    <a href="#" title="img">
        <img src="img.jpg" alt="img" /></a>
    <a href="#" title="img">
        <img src="img.jpg" alt="img" /></a>
    <a href="#" title="img">
        <img src="img.jpg" alt="img" /></a>
    <a href="#" title="img">
        <img src="img.jpg" alt="img" /></a>
</div> 
```

CSS：

```
#slider {
    overflow: hidden;
}

    #slider a, #slider img {
        float: left;
        overflow: auto;
        position: relative;
    }

    #slideWrapper {
        overflow: hidden;
    }

        #slideWrapper img {
            float: left;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:23:40.320

您可以使用的其他方式`$(window).load`，可能是您的函数在加载图像之前执行，因此图像第二次从缓存中出现，因此第一次加载图像不会从缓存中出现。

```
$(window).load(function(){
var imageWidth, totalWidth, sliderContent, $slider;
$slider = $("#slider");
sliderContent = $slider.html();
$slider.html("<div id=\"slideWrapper\">" + sliderContent + "</div>");
imageWidth = $slider.find("img").width();
totalWidth = $slider.find("img").size() * imageWidth;
$("#slider").css("width", imageWidth);
$("#slideWrapper").css("width", totalWidth);
// other code .....
}); 
```

希望这是有道理的

# solr - 哪一个用于提升 bq 或 q.alt

> ID：16139874
> 
> 赞同：0
> 
> 时间：2013-04-22T05:15:42.600
> 
> 标签：solr

正如标题所说，我需要使用哪一个来增强 solr。无论是 q.alt 还是 bq。我尝试了两者的提升，但我不清楚提升是如何工作的。因为在 q.alt 中，当我将提升值指定为 1000 时，我得到了正确的结果，同时我在 bq 中得到了相同的结果，提升值为 2

有人可以帮助我获得提升的最佳实践吗？

我的 SOLR 版本是 3.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:15:09.387

使用`qf`参数进行提升

[Dismax 查询解析器 Wiki](http://wiki.apache.org/solr/DisMaxQParserPlugin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:03:52.273

这取决于你想要提升什么。

使用[qf（查询字段）](http://wiki.apache.org/solr/DisMaxQParserPlugin#qf_.28Query_Fields.29) - 提升具有不同权重的各个搜索字段。

例如，对于文档标题的权重高于描述，那么您将使用`title^2 description^1`

`q.alt`只是在`q`指定 on 的情况下的备用查询因素。

使用[bq](http://wiki.apache.org/solr/DisMaxQParserPlugin#bq_.28Boost_Query.29)和[bf](http://wiki.apache.org/solr/DisMaxQParserPlugin#bf_.28Boost_Functions.29)来增强某些匹配、范围或需要对其应用某些功能时。这些通常是 extar 提升，而不是搜索提升的一部分。

例如，对于您将按日期或价格范围提升的最新文档，或者您想提升字段总和等...

# c# - .NET MVC4 - Running app inside of parent app

> ID：16139875
> 
> 赞同：0
> 
> 时间：2013-04-22T05:15:58.063
> 
> 标签：c#, jquery, asp.net-mvc-3, razor

I am trying to determine the best way to do this.

Basically, I have a child app that runs inside of a parent app in IIS. I want to be able to run this app inside of the parent app (using the same layout and functionality)

What is my my best bet for doing this? Running the app in an iFrame? Loading the app through jQuery into a div? Or should I create a web service that sends the parent app's layout to the child app?

Any guidance is appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:49:32.973

你在这里谈论的是作曲。您可以应用一大堆不同的构图模式，每种模式各有利弊。堆栈溢出并不是一个很好的地方来回答什么是“最佳”模式，但这里有一些我能想到的：

**服务器端组合模式**

*   **使用 MVC 共享布局文件**
    *   此方法使用两个站点共享的 DLL 中的布局文件来呈现所有页面
    *   它很容易实现，但意味着您需要在文件更改时释放两个站点
    *   这鼓励了站点之间的强耦合（这是不好的）
*   **基于子请求的渲染**
    *   在 Internet 上只有一个父站点，在运行时从子站点的内部 url 请求内容块
    *   在内容方面松耦合，但在 url 方面强耦合
    *   许多子站点可以被拉入并且彼此不耦合
    *   父/子站点可以独立发布

**客户端组成**

*   **框架**
    *   真的低保真，很容易实现
    *   在框架和父级之间有一堆非常可怕的东西要处理的 css 和 javascript
    *   开发人员通常认为这是一个坏主意（意见）
    *   仅通过 URL 耦合，站点可以独立发布
*   **内容中的 Ajax**
    *   在页面加载时对来自其他站点的组件执行 ajax 请求
    *   增加页面加载时间并在加载位时使 ui 闪烁
    *   很容易实施和管理
    *   仅通过 URL 耦合，站点可以独立发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:22:25.000

您可以在您的应用程序 iFrame 上使用[Area](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)，或者直接为您的子应用程序打开一个新的浏览器选项卡。

如果你想将你的项目包含在一个 dll 中，你可以将所有的视图编译成一个 dll 并在你的父应用程序中引用它，[这个](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)网站解释了如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:24:49.447

我建议您使用这种方式来制作子应用程序的空布局，并使用 JQuery 将其呈现到父应用程序的 div 中。IFrame 应该留在过去。

# c# - Does a SQL CLR stored procedure prevent injection?

> ID：16139879
> 
> 赞同：3
> 
> 时间：2013-04-22T05:16:25.930
> 
> 标签：c#, sql-injection, clrstoredprocedure

I have written a CLR stored procedure in C# like this

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void IsUserNameExists(string strUserName, out SqlBoolean returnValue)
{      
    using (SqlConnection connection = new SqlConnection("context connection=true"))
    {
        connection.Open();
        SqlCommand command = new SqlCommand("Select count(UserName) from [User] where UserName='" + strUserName + "'", connection);

        int nHowMany = int.Parse(command.ExecuteScalar().ToString());

        if (nHowMany > 0)
            returnValue = true;
        else
            returnValue = false;
    }
} 
```

Is it vulnerable to SQL injection? I am using `SqlParameter`. Any best practises?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:22:02.283

防止 sql 注入的唯一正确方法应该是使用参数化查询。您正在做的事情并不安全，因为您正在连接字符串。

在此处查看以供参考[参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)

为了清楚起见，为什么您的代码易受攻击：
就`SQLParameter`甚至类似的内容而言，这`'); DROP TABLE YourTable;--`将是一个有效的输入（因为它是一个字符串）。然后您将使用它来创建内部查询，这就是您的 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:31:50.253

> 它是否容易受到 SQL 注入的影响？

这是：

```
SomeType.IsUserNameExists("'; insert into [User](UserName) values ('Malefactor_Username'); select '1", out returnValue); 
```

> 有什么最佳做法吗？

始终使用参数化查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:40:48.287

默认情况下，CLR 存储过程不会阻止这种情况。您需要自己执行此操作，因为 CLR 不会自动执行此操作（我想这是您想知道的实际问题）

只需像这样更新您的代码，您应该一切都好。

```
 [Microsoft.SqlServer.Server.SqlProcedure]
    public static void IsUserNameExists(string strUserName, out SqlBoolean returnValue)
    {
        using (SqlConnection connection = new SqlConnection("context connection=true"))
        {
            connection.Open();
            SqlCommand command = new SqlCommand("Select count(UserName) from [User] where UserName=@UserName", connection);
            command.Parameters.Add(new SqlParameter("@UserName", strUserName));

            int nHowMany = int.Parse(command.ExecuteScalar().ToString());

            if (nHowMany > 0)
                returnValue = true;
            else
                returnValue = false;
        }
    } 
```

# ruby-on-rails - 设计路由问题

> ID：16139882
> 
> 赞同：0
> 
> 时间：2013-04-22T05:16:40.420
> 
> 标签：ruby-on-rails

我遇到了一个非常令人沮丧的错误，我认为这是一个简单的解决方法。在我的标题中，当我尝试包含一个名为“我的帐户”的链接，该链接路由到用户的个人资料时，我得到：

```
No route matches {:action=>"show", :controller=>"users"} 
```

其他一切都在注册/登录方面起作用，我可以在 localhost:3000/users/1 登录后进入用户个人资料页面

我在视图中的链接代码：

```
<%= link_to "My Account", user_path %> 
```

此外，在尝试路由到“edit_user_registration_path”处的编辑用户个人资料页面时，我得到了完全相同的错误：

```
<%= link_to "Edit Profile", edit_user_registration_path, class: "prof-btn" %> 
```

我也试过：

```
<%= link_to "Edit Profile", edit_user_registration_path(@user), class: "prof-btn" %> 
```

但同样的错误。

我的 routes.rb 文件：

根目录：'static_pages#home' ActiveAdmin.routes(self) devise_for :admin_users, ActiveAdmin::Devise.config devise_for :users 资源 :users

我的 users_controller.rb：

类用户控制器 < 应用控制器

```
def show
    @user = User.find(params[:id])
end

def create
    @user = User.create(params[:user])
end

def edit
    @user = User.find(params[:id])
end 
```

![在此处输入图像描述](https://i.stack.imgur.com/3ESan.png)

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:25:05.883

您必须将用户传递给路径助手。

```
<%= link_to "My Account", user_path(current_user) %> 
```

# ruby-on-rails - Ruby on Rails Tutorial Chapter 10

> ID：16139890
> 
> 赞同：0
> 
> 时间：2013-04-22T05:18:09.180
> 
> 标签：ruby-on-rails, ruby

I am having problems with my application being able to find my users table in my database.

rake db:test:prepare is not solving the problem for me. It doesn't do anything when I enter it.

```
Failures:

  1) Micropost
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::StatementInvalid:
       Could not find table 'users'
     # ./spec/models/micropost_spec.rb:5:in `block (2 levels) in <top (required)>'
     # ./spec/models/micropost_spec.rb:8:in `block (2 levels) in <top (required)>'

  2) Micropost
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::StatementInvalid:
       Could not find table 'users'
     # ./spec/models/micropost_spec.rb:5:in `block (2 levels) in <top (required)>'
     # ./spec/models/micropost_spec.rb:8:in `block (2 levels) in <top (required)>'

Finished in 0.00319 seconds
2 examples, 2 failures

Failed examples:

rspec ./spec/models/micropost_spec.rb:13 # Micropost
rspec ./spec/models/micropost_spec.rb:14 # Micropost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:41:26.087

假设您已经迁移了您的开发数据库，​​只需运行`rake db:test:clone`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:58:35.230

你必须运行`rake db:migrate` **并且** `rake db:test:prepare`喜欢：

```
rake db:migrate db:test:prepare 
```

# symfony - How to generate translation file (.po, .xliff, .yml,...) from a Symfony2/Silex project?

> ID：16139894
> 
> 赞同：6
> 
> 时间：2013-04-22T05:18:40.703
> 
> 标签：symfony, translation, silex, xliff

Im going to build a Silex/Symfony2 project and I have been looking around for a method to generate XLIFF/PO/YAML translation files based on texts-to-be-translated inside the project but not found any instruction or documentation on it.

My question is: **Is there an automated way to generate translation file(s) in specific format for a Symfony2/Silex project?**

If yes, please tell me how to generate the file then update the translation after that.

If no, please tell me how to create translation file(s) then adding up more text for my project? I am looking for an editor desktop based or web-based instead of using normal editor such as Transifex, GetLocalization (but they dont have option to create a new file or add more text)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T06:40:58.007

上网找了好久，找到了一个不错的：

[https://github.com/schmittjoh/JMSTranslationBundle](https://github.com/schmittjoh/JMSTranslationBundle)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-09T10:22:22.640

我看到你找到了一个转换器，但要回答你关于生成初始翻译文件的第一个问题 -

如果您的系统上安装了[Gettext](http://www.gnu.org/software/gettext/)，您可以从“项目内要翻译的文本”生成 PO 文件。命令行程序[`xgettext`](http://www.gnu.org/savannah-checkouts/gnu/gettext/manual/html_node/xgettext-Invocation.html)将扫描源文件以查找您正在使用的任何功能。

示例：
要扫描 PHP 文件以查找[此处所示](http://symfony.com/doc/current/book/translation.html)`trans`的方法调用实例，您可以使用以下命令 -

```
find . -name "*.php" | xargs xgettext --language=PHP --keyword=trans --output=messages.pot 
```

关于编辑器的问题：
您可以使用任何 PO 编辑器，例如[POEdit](http://www.poedit.net/)来管理您的翻译，但正如您所说，您最终需要将 PO 文件转换为 Symfony 的 XLIFF 或 YAML 语言包。

我看到你已经找到了一个转换器工具。你可能还想试试我为 Loco 写的那个。它支持[PO 到 YAML](http://localise.biz/free/converter/po-to-yaml)和[PO 到 XLIFF](http://localise.biz/free/converter/po-to-xliff)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-08T14:11:06.530

**忙碌人士的解决方法 (UNIX)**

您可以在终端中运行以下命令：

```
$ grep -rEo --no-filename "'.+'\|\btrans\b" templates/ > output.txt 
```

这将输出要翻译的消息列表：

```
'Please provide your email'|trans
'Phone'|trans
'Please provide your phone number'|trans
... 
```

我的意思是几乎......但你通常可以从这里做一些工作......

显然，您必须根据自己的喜好调整命令（`transchoice`双引号而不是单引号...）。

不理想但可以提供帮助！

**`grep`选项**

*   `grep -R, -r, --recursive`: 读取每个目录下的所有文件，递归这个相当于`-d`recurse选项。
*   `grep -E, --extended-regexp`: 将 PATTERN 解释为扩展的正则表达式。
*   `grep -o, --only-matching`：仅显示匹配 PATTERN 的匹配行部分。
*   `grep -h, --no-filename`：当搜索多个文件时，抑制输出文件名的前缀。

（[来源](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)）

# python - How to convert a list with a string of numbers into a list of intergers?

> ID：16139896
> 
> 赞同：1
> 
> 时间：2013-04-22T05:18:45.577
> 
> 标签：python, string, list

I have a list of lists and inside the lists are strings of multiple numbers. For example, `[['34,53,53,21'], ['43,65,12,53'], ['54,23,31,34']]`

and I want the result to look like: `[[34,53,53,21], [43,65,12,53], [54,23,31,34]]` with all integers inside. I've tried numerous code, but keep getting different error messages.

Also, what about if some of the interior numbers were a float? Such as: `[['34,53.09,53.56,21.98'], ['43,65.67,12.45,53.45'], ['54,23.34,31.23,34.76']]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:20:01.427

```
[[int(y) for y in x[0].split(',')] for x in lst] 
```

在 python 2.x 上，您可以使用：

```
[map(int,x[0].split(',')) for x in lst] 
```

在某些方面，拥有字符串的内部列表是不方便的。您可以使用`chain`删除它们：

```
from itertools import chain
[[int(y) for y in x.split(',')] for x in chain.from_iterable(lst)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T05:19:38.007

```
>>> L = [['34,53,53,21'], ['43,65,12,53'], ['54,23,31,34']]
>>> [[int(y) for y in x[0].split(',')] for x in L]
[[34, 53, 53, 21], [43, 65, 12, 53], [54, 23, 31, 34]] 
```

对于花车：

```
>>> L = [['34,53.09,53.56,21.98'], ['43,65.67,12.45,53.45'], ['54,23.34,31.23,34.76']]
>>> [[float(y) for y in x[0].split(',')] for x in L]
[[34.0, 53.09, 53.56, 21.98], [43.0, 65.67, 12.45, 53.45], [54.0, 23.34, 31.23, 34.76]] 
```

# android - 在两个不同的类中为 sqllite 创建两个表 - android

> ID：16139897
> 
> 赞同：1
> 
> 时间：2013-04-22T05:18:51.157
> 
> 标签：android, android-sqlite

我在同一个 sqlite 数据库中创建 2 个表（意味着两个表在两个类中都具有相同的数据库名称和助手名称）但是在两个不同的类中，当我第一次运行时，A 创建成功，B 创建失败，但是当我重新运行它时，即使 A 也失败了。在创建表方法中，我对 A 使用 version = 1，对 B 使用 version = 2。这是原因吗？我在两个类中使用相同的数据库名称和处理程序名称。请建议我哪里出错了！

# php - 创建自定义 Jquery 模式表单以上传数据

> ID：16139903
> 
> 赞同：-1
> 
> 时间：2013-04-22T05:19:29.363
> 
> 标签：php, javascript, mysql, jquery-ui

我是 jquery 的新手。我查看了各种演示，但找不到我要找的东西。

我有一个按钮。我想添加一个功能，其中按钮 Onclick 将打开一个模式表单，用户可以通过该表单上传有关特定项目的各种详细信息，例如名称、尺寸、颜色、品牌、成本、图像、描述。

填写详细信息后，这些不同的字段将使用 php 文件存储在 mysql 数据库中。

我想按照与 jquery 网站上的表单相同的原理制作这个自定义对话框表单。 [http://jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)

我尝试使用上述超链接中的示例制作自定义对话框表单，但无法创建一个..

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:32:40.197

您必须为此使用 UI 包，否则您可以通过创建 j 查询简单调用来做到这一点 1\. onclick 显示表单 2\. 在保存时发送 ajax 调用 3\. 保存记录后，您生成的函数用于从 db 调用中获取记录它，它将显示来自 db 的更新记录。我个人建议你把它变成你自己，以便更好地理解工作。如果你使用 UI，那么你必须根据需要对其进行更改，这也太容易了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:24:33.370

您链接的页面上的示例是使用 jQuery UI 创建的，如果您单击页面上的“查看源代码”链接，它将向您展示如何操作（它是如何在他们的页面中创建的）。

不过，我建议使用一种更容易为新用户实施的模式，例如[fancybox](http://fancyapps.com/fancybox/)，因为它有关于如何在他们的网站上实施的清晰示例，它会让你更快地启动和运行。

# ruby-on-rails - Authlogic - 登录后将用户返回到预期页面

> ID：16139910
> 
> 赞同：2
> 
> 时间：2013-04-22T05:20:12.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authlogic

您如何调整标准的 Authlogic 应用程序，而不是每次都使用主页，而是将用户引导到他们试图访问的任何链接？

**示例 1** - 标准登录按预期工作

```
User goes to app.com
Goes through 'login' process
Redirected to home_url 
```

**示例 2** - 用户尝试访问特定页面

```
User goes to app.com/specific_link
Redirected to login_url for authentication
Expects to be sent back to /special_link; instead sent to home_url 
```

如何在示例 2 中将用户返回到他们想要的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:19:33.740

登录时保存页面，然后用它在登录后将用户返回到该页面，例如

```
# redirect to the login page. Call this in the login action, when successful.
def redirect_away(*params)
  session[:original_uri] = request.request_uri
  redirect_to(*params)
end

# returns to the original url from a redirect_away or to a default url
def redirect_back(*params)
  uri = session[:original_uri]
  session[:original_uri] = nil
  if uri
    redirect_to uri
  else
    redirect_to(*params)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T01:04:00.533

迈克尔很接近，但请求对象没有“request_uri”方法。

Murifox 也很接近，但#referrer 没有给你你想要的信息。你可能想要#url。

试试这个（假设“认证”返回您的登录状态）：

```
before_filter :check_authentication
.
.
.
private

def check_authentication
  unless authenticated
    session[:intented_page] = request.url
    redirect_to login_page
  end
end 
```

然后在处理登录的控制器中，成功登录后，您只需执行以下操作：

```
redirect_to session[:intended_page] 
```

顺便说一句：#referrer 方法最初被错误拼写为#referer。现在有一个别名，所以两种拼写都可以，但是根据字典，“推荐人”是正确的。

（稍后编辑）：实际上#referrer 可能是您想要的。如果您在检查身份验证时位于目标 url 的控制器中（如此处的代码中所示），那么您需要#url。如果您在**从**目标控制器重定向的控制器中，那么您需要#referrer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:14:17.547

我认为`request.referer`为您保留了这些信息。因此，您检查`request`对象上是否存在此属性，如果存在，则重定向到它，而不是`home_url`.

```
if request.referer
  redirect_to request.referer
else
  redirect_to home_url
end 
```

像这样的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-20T22:28:35.380

虽然上述建议可行，但使用 session 并不是最佳选择，cookie 的最大大小为 4,096 字节。这并不多，如果您混合可能是相当长的 URL 可能会导致您的会话存储失败。

您应该改用 cookies 方法。这将创建一个单独的未加密（默认情况下）cookie，将您的会话数据分开。

```
cookies[:original_uri] = { value: request.request_uri, expires: 10.minutes.from_now } 
```

然后读取您使用的cookie

```
cookies[:original_uri] 
```

# c# - IAudioSessionControl2 出现问题，使 WebBrowser 控件静音

> ID：16139911
> 
> 赞同：2
> 
> 时间：2013-04-22T05:20:19.473
> 
> 标签：c#, browser, core-audio, mute

目标是使可以播放 Flash 视频的 WebBrowser 控件静音。所以我发现这段代码非常有用：[https ://stackoverflow.com/a/14322736/990618](https://stackoverflow.com/a/14322736/990618)

问题是，当您期望来自 的某种 id 时，一些枚举是空值`GetDisplayName`，我会得到 3-4 个空白和 2 个，就像“Mozilla Firefox”一样，`"@%SystemRoot%\System32\AudioSrv.Dll,-202"`这是系统声音。

所以继续尝试GetProcessId、GetSessionIdentifier 和GetSessionInstanceIdentifier。

`GetProcessId`将只返回零和一，`GetSessionIdentifier`与 相同的结果`GetDisplayName`，`GetSessionInstanceIdentifier`所有空白。

为什么这些空白和零和一？

这是修改后的`EnumerateApplications`：

```
public static IEnumerable<string> EnumerateApplications()
{
  // get the speakers (1st render + multimedia) device
  IMMDeviceEnumerator deviceEnumerator = (IMMDeviceEnumerator)(new MMDeviceEnumerator());
  IMMDevice speakers;
  deviceEnumerator.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia, out speakers);

  // activate the session manager. we need the enumerator
  Guid IID_IAudioSessionManager2 = typeof(IAudioSessionManager2).GUID;
  object o;
  speakers.Activate(ref IID_IAudioSessionManager2, 0, IntPtr.Zero, out o);
  IAudioSessionManager2 mgr = (IAudioSessionManager2)o;

  // enumerate sessions for on this device
  IAudioSessionEnumerator sessionEnumerator;
  mgr.GetSessionEnumerator(out sessionEnumerator);
  int count;
  sessionEnumerator.GetCount(out count);

  for (int i = 0; i < count; i++)
  {
    IAudioSessionControl ctl;
    IAudioSessionControl2 ctl2;

    sessionEnumerator.GetSession(i, out ctl);

    ctl2 = ctl as IAudioSessionControl2;

    string dn;

    UInt32 pid = 0;

    string sout = "";

    if (ctl2 != null)
      ctl2.GetSessionIdentifier(out sout);

    //ctl.GetDisplayName(out dn);
    //  ctl2.GetProcessId(out pid);

    //yield return pid.ToString();
    yield return sout;

    if (ctl != null)
      Marshal.ReleaseComObject(ctl);

    if (ctl2 != null)
      Marshal.ReleaseComObject(ctl2);
  }

  Marshal.ReleaseComObject(sessionEnumerator);
  Marshal.ReleaseComObject(mgr);
  Marshal.ReleaseComObject(speakers);
  Marshal.ReleaseComObject(deviceEnumerator);
}

[Guid("bfb7ff88-7239-4fc9-8fa2-07c950be9c6d"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
internal interface IAudioSessionControl2
{
  [PreserveSig]
  int GetProcessId([Out] [MarshalAs(UnmanagedType.U4)] out UInt32 processId);

  [PreserveSig]
  int GetSessionIdentifier([Out] [MarshalAs(UnmanagedType.LPWStr)] out string pRetVal);

  [PreserveSig]
  int GetSessionInstanceIdentifier([Out] [MarshalAs(UnmanagedType.LPWStr)] out string pRetVal);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:15:02.697

拥有正确的`CoreAudio`接口声明会让一切变得不同......

我使用了您的代码，但使用了[CoreAudioNET](http://whenimbored.xfx.net/2011/01/core-audio-for-net/)库中的接口声明，一切都按预期工作： ![输出](https://i.stack.imgur.com/lJtaO.png)

由于代码比较丰富，这里就不贴了，大家可以从这个链接下载：[Source Code](http://software.xfx.net/stackoverflow/Colin_CoreAudio.zip)

# php - 在单个查询中查找 mysql 表中某个条目的左侧和右侧的条目

> ID：16139913
> 
> 赞同：0
> 
> 时间：2013-04-22T05:20:31.780
> 
> 标签：php, mysql, sql, cakephp, cakephp-1.3

假设我在数据库中有一个表，比如[这个表](http://sqlfiddle.com/#!2/e1aaf/11)。假设我想获取主键等于 5（或任何其他主键）的条目左侧和右侧的条目。所以在我们的例子中，我想获取主键分别等于 4 和 6 的条目。会给我这样的结果的 SQL 查询是什么？你们能把 SQL 查询翻译成[find('all')](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#find-all) CakePHP 查询吗？

谢谢

**注意：ID 不一定是连续的，也就是说，它们不一定遵循 1、2、3、4、5、6、7、8 的顺序。我可以有 1、5、13、44、66、123 等**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:29:10.577

像这样尝试联合

```
 (SELECT * FROM employee WHERE id < 5 order by id DESC LIMIT 1)
 UNION
 (SELECT * FROM employee WHERE id >5  LIMIT 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:32:28.043

PHP

```
$id = 5;
SELECT * FROM Employee where id = $id-1 OR id = $id+1; 
```

MySQL

```
SET @id = 5;
SELECT * FROM Employee where id = @id-1 OR id = @id+1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:17:39.600

结帐[find('neighbors')](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-neighbors)。它返回您指定的记录之前和之后的记录，并且您的 id 在序列中可以有“洞”。

# javascript - 名为 Columnizer 的 Jquery 插件在 IE 上无法正常运行

> ID：16139914
> 
> 赞同：1
> 
> 时间：2013-04-22T05:20:39.960
> 
> 标签：javascript, jquery, css

我正在使用一个名为 Columnizer 的 Jquery 插件来布局我的文本，它可以在 Firefox 上完美运行，但如果不创建新列并静态放置它们，它可能无法在 IE 上运行。

[http://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)

使用 Firefox ，它会自动在列中排列元素

我们怎样才能让它也能在 IE 上运行呢？我真的很努力，只是没有工作

![在此处输入图像描述](https://i.stack.imgur.com/g00ei.jpg)

我的html

```
 <script type = "text/javascript" src ="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type = "text/javascript" src ="https://raw.github.com/adamwulf/Columnizer-jQuery-Plugin/master/src/jquery.columnizer.js"></script>

<script type="text/javascript">
$(function(){
    $('h1').addClass('dontend');
    $('.wide').columnize({
        width : 120,
        height : 400
    });
});
  </script>

   <script  style="display:none" type="text/javascript">var Mint=new Object();Mint.save=function()
  {var now=new Date();var debug=false;if(window.location.hash=='#Mint:Debug'){debug=true;};var path='http://welcome.totheinter.net/mint/?record&key=6a56784248357a3735323031363633316663796c526d';path=path.replace(/^https?:/,window.location.protocol);for(var developer in this)
  {for(var plugin in this[developer])
  {if(this[developer][plugin]&&this[developer][plugin].onsave)
  {path+=this[developer][plugin].onsave();};};};path+='&'+now.getTime();if(debug){window.open(path+'&debug&errors','MintLiveDebug'+now.getTime());return;};var ie=/*@cc_on!@*/0;if(!ie&&document.getElementsByTagName&&(document.createElementNS||document.createElement))
  {var tag=(document.createElementNS)?document.createElementNS('http://www.w3.org/1999/xhtml','script'):document.createElement('script');tag.type='text/javascript';tag.src=path+'&serve_js';document.getElementsByTagName('head')[0].appendChild(tag);}
  else if(document.write)
  {document.write('<'+'script type="text/javascript" src="'+path+'&amp;serve_js"><'+'/script>');};};if(!Mint.SI){Mint.SI=new Object();}
  Mint.SI.Referrer={onsave:function()
  {var encoded=0;if(typeof Mint_SI_DocumentTitle=='undefined'){Mint_SI_DocumentTitle=document.title;}
  else{encoded=1;};var referer=(window.decodeURI)?window.decodeURI(document.referrer):document.referrer;var resource=(window.decodeURI)?window.decodeURI(document.URL):document.URL;return '&referer='+escape(referer)+'&resource='+escape(resource)+'&resource_title='+escape(Mint_SI_DocumentTitle)+'&resource_title_encoded='+encoded;}};Mint.save();</script> 

  <meta charset="utf-8" />
  <link rel="stylesheet" href="f.css">

  <div class="container"> <div class="wide">

      <div class="block"> Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello </div><br>
      <div class="block"> Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello </div><br>
      <div class="block"> Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello </div><br>
      <div class="block"> Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello </div><br>
      <div class="block"> Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello </div><br>
      <div class="block"> Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello </div><br>

  </div></div> 
```

我的 CSS

```
 .container {
      background-color: #;
      height: 300px;
      width: 700px;

  }
  .block {
      width: 100px;
      height:150px;
      background-color: #;
      margin: 10px;
      margin-top: 5px;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:39:25.087

删除`<div class="block">`并仅将纯文本保留在`wide`课堂内。这应该可以工作，columnizer 插件将自动为每个块添加类。

例如：

```
<div class="container"> 
  <div class="wide">
     <p>Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
     <p>Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
  </div>
</div> 
```

Columnnizer 会自动将文本分成不同的列。如下图所示

```
<div class="wide" style="width: 2700px;">
  <div class="first column" style="width: 300px; float: left;">
  <div class="column" style="width: 300px; float: left;">
  <div class="column" style="width: 300px; float: left;">
</div> 
```

**新代码**（将此代码粘贴到文本编辑器上并将其保存为 HTML 页面并检查 IE8 和 IE7 上的 HTML 页面）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<head>
 <style>
.column *{ padding: 5px; }
</style> 
   <script type = "text/javascript" src ="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type = "text/javascript" src ="https://raw.github.com/adamwulf/Columnizer-jQuery-Plugin/master/src/jquery.columnizer.js"></script>
        <script type="text/javascript">
        $(function(){
            $('h1').addClass('dontend');
            $('.wide').columnize({
                width : 300,
                height : 200
            });
        });
        </script>

</head>
<body>
  <div id="wrapper"> 
    <div class="wide">
    <h1>Lorem ipsum ne justo</h1>
 <p>Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello HelloHello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello   hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
     <p>Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
     <p>Hello  hello HellHello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello o  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
     <p>Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  heHello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello llo Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
      <p>Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
     <p>Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello hello Hello  hello Hello  hello Hello  hello Hello  hello Hello  hello Hello </p>
    </div>
  </div>
 </body> 
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T09:32:40.680

我不明白为什么会这样，但它在 IE8 上对我有用：打开浏览器的控制台就可以了。

为此，请加载页面，单击 F12（打开开发人员工具），单击脚本选项卡，然后单击控制台选项卡。

重新加载页面：它有效。您现在可以关闭开发人员工具窗口，所有后续加载也将正常工作。

# regex - 将 CSV 文件与常见字符串的文本文件交叉引用的最简单方法

> ID：16139915
> 
> 赞同：1
> 
> 时间：2013-04-22T05:20:44.363
> 
> 标签：regex, string, excel, csv, cross-reference

我有一个 CSV 文件中的字符串列表，以及另一个我想搜索这些字符串的文本文件。CSV 文件只有我感兴趣的字符串，但文本文件有一堆其他文本散布在感兴趣的字符串中（我感兴趣的字符串是蛋白质数据库的 ID 号）。解决这个问题的最简单方法是什么？我想检查文本文件中是否存在 CSV 文件中的每个字符串。我在一所顶尖大学的研究实验室工作，所以你将帮助前沿研究！

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:51:16.940

我会为此使用 Python。要打印匹配的行，您可以这样做：

```
import csv
with open("strings.csv") as csvfile: 
    reader = csv.reader(csvfile)
    searchstrings = {row[0] for row in reader}   # Construct a set of keywords
with open("text.txt") as txtfile:
    for number, line in enumerate(txtfile):
        for needle in searchstrings:
            if needle in line: 
                print("Line {0}: {1}".format(number, line.strip()))
                break   # only necessary if there are several matches per line 
```

# php - 使用 item() 将数据插入 XML 文档

> ID：16139917
> 
> 赞同：0
> 
> 时间：2013-04-22T05:20:51.470
> 
> 标签：php, html, xml, dom

我正在尝试将数据插入我的 XML 文档到`content_set`我认为我必须使用的特定节点中，`item()`但是每次我提交表单时，数据都会在我的文档末尾但在关闭之前放入`content_sets`

PHP：

//这是我想我会根据我的html中select的值选择数据放入哪个节点的地方，0是doc_types，1是video_types

```
$file_type = $_POST['file_type'];
$doc = new DOMDocument();
$doc->load( 'myfile_files.xml' );

$doc->formatOutput = true;
$r = $doc->getElementsByTagname('content_sets')->item($file_type);

$b = $doc->createElement("article");

$titleName = $doc->createElement("doc_name");
$titleName->appendChild(
$doc->createTextNode( $Document_Array["name"] )
);

$b->appendChild( $titleName );

$r->appendChild( $b );

$doc->save("myfile_files.xml"); 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<content_sets>
    <doc_types>

        <article>
            <doc_name>Test Proposal</doc_name>
            <file_name>tes_prop.docx</file_name>
            <doc_description>Test Word document. Please remove when live.</doc_description>
            <doc_tags>word document,test,rfp template,template,rfp</doc_tags>
            <last_update>01/26/2013 23:07</last_update>
        </article>
    </doc_types>

    <video_types>
        <article>
            <doc_name>Test Video</doc_name>
            <file_name>test_video.avi</file_name>
            <doc_description>Test video. Please remove when live.</doc_description>
            <doc_tags>test video,video, avi,xvid,svid avi</doc_tags>
            <last_update>01/26/2013 23:07</last_update>
        </article>
    </video_types>
</content_sets> 
```

HTML：

```
 <p>Content Type:<br/>
<select name="file_type">
    <option value="0">Document</option>
    <option value="1">Video</option>
    <option value="2">Image</option>
</select></p> 
```

我试图包含脚本中最重要的部分，但如果需要，可以将其全部发布。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:24:05.567

1) 使用 XPath 找到您要更改的节点

2) 拥有节点后，只需为其分配一个新值。

3）完成后写入文件

查看这些链接了解更多详情：

*   [在 PHP 中更改 XML 节点元素值并保存文件](https://stackoverflow.com/questions/2956601/change-xml-node-element-value-in-php-and-save-file)

*   [http://quest4knowledge.wordpress.com/2010/09/04/php-xml-create-add-edit-modify-using-dom-simplexml-xpath/](http://quest4knowledge.wordpress.com/2010/09/04/php-xml-create-add-edit-modify-using-dom-simplexml-xpath/)

*   [http://www.ibm.com/developerworks/opensource/library/x-xpathphp/?ca=drs-](http://www.ibm.com/developerworks/opensource/library/x-xpathphp/?ca=drs-)

# android - ActionBarSherlock 选项卡寻呼机主题问题

> ID：16139918
> 
> 赞同：1
> 
> 时间：2013-04-22T05:20:52.167
> 
> 标签：android, tabs, actionbarsherlock

我使用[FragmentTabsPager](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock-samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)作为标签页。我只是删除行`setTheme(SampleList.THEME);` 但我有一个主题问题（标签高度和背景颜色）。是因为*SampleList.THEME*吗？

![在此处输入图像描述](https://i.stack.imgur.com/7ucGQ.png)

xml:

```
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T08:06:57.427

设置你的目标 sdk 版本

```
 <uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="10" /> 
```

# c# - 如何从数组中创建一个随机数

> ID：16139925
> 
> 赞同：5
> 
> 时间：2013-04-22T05:22:09.780
> 
> 标签：c#, random

我正在做一个 C# 编码。在我的编码中，我需要生成一个随机的数字列表。通常，如果我们创建一个随机数，我们需要选择数字的范围。但是对于我的情况，我需要从数组中创建一个随机数。任何想法？我正在使用 XAML 和 C#。

```
private void Submit_Click(object sender, RoutedEventArgs e)
    {         
        int[] numbers = new int[5] {32, 67, 88, 13, 50};
        Random rd = new Random();
        //int myNo = rd.Next(numbers[])?                    
    } 
```

**额外**：每次我单击提交按钮时，都会选择一个随机数*[]*。我怎样才能确保号码不重复。例如：第一次点击，myNo = 67；第二次点击，myNo = 50；第三次点击，myNo = 88；第 4 次点击，myNo = 32；第 5 次点击，myNo = 13。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T05:24:53.187

您可以创建一个随机数来表示数组中的索引。从该随机索引访问数组元素，您将获得您的数字，因为数组中的所有数字似乎都是不同的。

```
int[] numbers = new int[5] { 32, 67, 88, 13, 50 };
Random rd = new Random();
int randomIndex = rd.Next(0, 5);
int randomNumber = numbers[randomIndex]; 
```

编辑：（感谢[@Corak](https://stackoverflow.com/users/1336590/corak)）您可以根据数组长度生成随机索引，这将使其动态并适用于任何数组的长度。

```
int randomIndex = rd.Next(0, numbers.Length); 
```

**编辑2：（**对于问题的额外部分）。

您需要在类级别维护唯一索引号列表。所以你的代码会是这样的：

```
Random rd = new Random(); //At class level
List<int> uniqueIndices = new List<int>(); //At class level
private void Submit_Click(object sender, RoutedEventArgs e)
{         
    int[] numbers = new int[5] {32, 67, 88, 13, 50};
    int randomIndex = rd.Next(0, numbers.Length);
    while(list.Contains(randomIndex)) //check if the item exists in the list or not. 
    {
        randomIndex = rd.Next(0, numbers.Length);
    }
    list.Add(randomInex);
    //...rest of your code. 

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T05:27:03.060

```
Random r = new Random();
int index = r.Next(0, 5);

int randomNum = numbers[index]; 
```

这将为您提供 0 到 4 之间的随机数，可用于索引您的数组，进而从数组中提取随机值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T05:34:33.917

这是一种参数化方式：

```
randIndex = rd.Next(0, numbers.Length);
int myNo = numbers[randIndex]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T05:40:00.747

我将创建一个代表随机可枚举的类，然后使用扩展方法`First`生成您应该在数组中使用的第一个索引。它看起来像这样：

```
class Program
{
    static void Main(string[] args)
    {
        int[] numbers = new int[5] { 32, 67, 88, 13, 50 };
        var randomEnumerable = new RandomEnumerable(0, numbers.Length);
        int i = 0;
        while (i < numbers.Length)
        {
            var nextIndex = randomEnumerable.First();
            var number = numbers[nextIndex];
            Console.WriteLine(number);
            i++;
        }
        Console.ReadLine();
    }
}

class RandomEnumerable : IEnumerable<int>
{
    private readonly int _max;
    private readonly int _min;
    private Random _random;

    public RandomEnumerable(int min, int max)
    {
        _max = max;
        _min = min;
        _random = new Random();
    }

    public IEnumerator<int> GetEnumerator()
    {
        while (true)
        {
            yield return _random.Next(_min, _max);
        }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T05:24:29.097

只需像往常一样创建一个随机索引，并使用该值索引到数组中，而不是直接返回它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T05:24:31.413

您必须随机生成数组索引才能从数组中获取随机数。

只需应用随机函数来生成数组索引范围之间的数字（`0, array.length - 1)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T05:24:45.183

您可以创建一个随机数，然后使用 mod 运算符 % by 5 并将其用作数组的索引。

例如。 `modRd = rd % 5; randomNumber = numbers[modRd];`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T05:25:49.713

这将从数组中创建一个随机且唯一的数字

```
 public class Shuffler
 {
    Random randomNumber;
    public Shuffler()
    {
        randomNumber = new Random();
    }

    /// <summary>
    /// Shuffling the elements of Array
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="array"></param>
    public void Shuffle<T>(IList<T> array)
    {
        for (int n = array.Count; n > 1; )
        {
            int k = randomNumber.Next(n); //returning random number less than the value of 'n'
            --n; //decrease radom number generation area by 1 
             //swap the last and selected values
            T temp = array[n];
            array[n] = array[k];
            array[k] = temp;
        }
    }
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-22T05:35:31.813

您可以创建一个包含所有值组合的字符串，然后获取它的哈希码。然后可以使用此哈希码来播种随机数。

使用**HashCode**方法使**种子更依赖于**数组的数据。

```
 public static void Main()
    {
        int[] numbers = new int[5] { 32, 67, 88, 13, 50 };

        StringBuilder valuesToBeHashed = new StringBuilder();
        for (int i = 0; i < numbers.Length; i++)
        {
            valuesToBeHashed.Append(numbers[i] + ",");
        }

        Random rd = new Random(valuesToBeHashed.GetHashCode());
        Console.WriteLine("Hashcode of Array : {0} ",valuesToBeHashed.GetHashCode());
        Console.WriteLine("Random generated based on hashcode : {0}", rd.Next());
    } 
```

# python - Python 的猴子补丁是当前模块的本地补丁吗？

> ID：16139929
> 
> 赞同：2
> 
> 时间：2013-04-22T05:22:32.523
> 
> 标签：python, gevent, monkeypatching

在文件 a.py 中，我有以下几行：

```
 import gevent
gevent.monkey.patch_all()

import b
# etc, etc 

```

在文件 b.py 中是否有必要再次进行猴子补丁？猴子补丁多次有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:05:18.950

通常每个模块只有一个条目`sys.modules`。也就是说，同一个模块对象是共享的，所以只要它以相同的方式导入，它就会影响模块。

`sys.modules`如果导入方式不同，则可能在两个或多个条目中包含相同的模块。

# android - Android：AVD 管理器不会将 Byond B54 和 Micromax 手机检测为虚拟设备

> ID：16139931
> 
> 赞同：0
> 
> 时间：2013-04-22T05:22:43.500
> 
> 标签：android, android-emulator, eclipse-adt, avd

运行应用程序时，我需要将手机用作模拟器/目标/虚拟设备。我在设置中启用了 USB 调试。

我还需要做什么才能让 Eclipse AVD Manager 检测到我的 Byond B54 和 Micromax 设备？如何获取这些设备的 USB 驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:30:45.490

此[链接](http://developer.android.com/tools/extras/oem-usb.html)将帮助您列出所有提供 USB 驱动程序的公司及其链接。请注意，某些公司可能未在此列表中列出。在这种情况下，您可能必须访问公司的相应网站并搜索特定的设备驱动程序。

正如您所说，您已`USB debugging`在这些设备中启用了该模式。检查它们是否正确连接。打开命令提示符并键入：

> 亚行设备

结果将给出已连接设备的列表。如果可以在列表中看到该设备，那么您可以确定其连接正确。您可以通过输入以下内容直接在设备上安装应用程序：

> adb install path_of_the_apk_file/your_apk_file.apk

但请注意，您只能以这种方式安装应用程序，而不能对其进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:55:28.270

您需要为 Windows 安装驱动程序以检测这些设备。

如果相应制造商的这些设备的驱动程序不可用，您可以下载并使用[moborobo](http://www.moborobo.com/products/moborobo.html)。它适用于大多数设备。我已经将它用于 Byond 平板电脑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:46:25.647

在您的系统上安装 pda.net。该软件主要适用于所有设备。在谷歌上搜索 PDA.net 并在下载后安装。

# linux - 什么是 linux 脚本中的 start-stop-daemon？

> ID：16139940
> 
> 赞同：50
> 
> 时间：2013-04-22T05:23:28.550
> 
> 标签：linux, shell, init.d, start-stop-daemon

什么是 start-stop-daemon 以及应该如何使用它？

我正在尝试使特定程序自动运行。每当系统启动时，程序都应该运行。为此，我正在`/etc/init.d/`现场编写脚本。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-22T05:33:13.540

它是一个管理系统级后台进程（守护进程）启动和停止的程序。您可以通过为要启动的进程传入参数（例如要创建/检查的 pid 文件）和命令参数来使用它。

然后，您执行以下两项操作之一：

`start-stop-daemon -S [other arguments] something`

start `something`，如果`something`尚未运行。如果它正在运行，则什么也不做。

`start-stop-daemon -K [other arguments] something`

停下来`something`。如果`something`没有运行，什么也不做。

[手册页](http://man.he.net/man8/start-stop-daemon)提供了有关各种参数的更多信息。通常会提供一个模板，`/etc/init.d/`其中包含用于控制后台进程运行的 init 进程的其他命令。

* * *

### 这是什么意思？

> 启动-停止-守护进程 --start --background -m --oknodo --pidfile ${PIDFILE} --exec ${DAEMON} -- ${TARGETDIR}

*   `--background`= 作为后台进程启动
*   `-m`= 制作一个 PID 文件。这在您的进程不创建自己的 PID 文件时使用，并且与`--background`
*   `--oknodo`= return `0`，`1`如果守护程序没有采取任何操作，则不是
*   `--pidfile ${PIDFILE}`= 检查 PID 文件是否已创建
*   `--exec`=确保进程是这个可执行文件的实例（在你的情况下，`DAEMON`）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-22T05:31:50.447

复制`/etc/init.d/skeleton` [文件](http://paste.ubuntu.com/6918156/)（例如`/etc/init.d/rajeevdaemon`或其他好名字），这是一个带有很多注释的 shell 脚本，并根据您的需要对其进行编辑。然后从 eg`/etc/rc2.d/S98rajeevdaemon`和`/etc/rc2.d/K98rajeevdaemon`向它添加适当的符号链接。

阅读有关[运行级别](http://en.wikipedia.org/wiki/Runlevel)的更多信息。

最近（或未来）的 Linux 发行版正在使用越来越多的[systemd](http://en.wikipedia.org/wiki/Systemd)

# design-patterns - 事务脚本是反模式？

> ID：16139941
> 
> 赞同：35
> 
> 时间：2013-04-22T05:23:30.870
> 
> 标签：design-patterns, data-access-layer, data-access

好吧，关于 NoSQL 数据库的事务脚本有一个类似的主题，但这个主题是关于一般模式的。从我对事务脚本的发现来看，它根本不是面向对象的。尽管它可以在其代码的每一行中使用对象，但它基本上是程序代码。

更好的解决方案是使用域模型，结合活动记录或具有工作单元/身份映射/延迟加载/查询对象等的数据映射器。事务脚本可能很容易使用，但它实际上是过程式编程，因此应该被视为面向对象世界中的反模式。

你怎么看？你同意事务脚本是反模式吗？或者你真的有办法设计一个面向对象的事务脚本而不是变相的过程？我怀疑这是可能的。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-05-06T14:19:09.877

事务脚本绝对***不是***反模式。

> 从我对事务脚本的发现来看，它根本不是面向对象的。

你是对的，事实并非如此。然而，这一事实并不能使它成为反模式。尽管它是一种过程方法，但实际上，它在一系列业务逻辑架构模式中仍然占有一席之地——你只需要知道在哪种情况下使用它是最佳实践——而在哪种情况下不是。简单地说：如果您的问题域非常简单，那么在您的业务逻辑中使用更复杂的模式是不值得的。

或者——正如[福勒](http://www.informit.com/articles/article.aspx?p=1398617)所写：

> **何时使用它**
> 
> Transaction Script 的荣耀在于它的简单性。以这种方式组织逻辑对于只有少量逻辑的应用程序来说是很自然的，并且它在性能或理解方面的开销很小。

您可能会想到的反模式称为[***贫血域模型***](http://martinfowler.com/bliki/AnemicDomainModel.html)。当您*打算*并*认为*您正在构建域模型时就是这种情况 - 因为您的问题域已经足够复杂了 - 但实际上您*最终*会使用事务脚本 - 因为糟糕的代码组织/薄弱的 OO 技能。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-14T12:13:48.563

这**不是**反模式。事实上，大多数企业应用程序（我所见过的）都使用事务脚本而不是富域模型模式。

*您提到的活动记录*模式仅在您拥有相当简单的域实体到持久存储聚合（RDBMS 表）的一对一映射时才会派上用场。

*数据映射器*类似于 ORM（Hibernate 和朋友）。如果您的业务逻辑驻留在域实体中，则这些实体必须自行变异。在我看来，这将改变状态（使用 ORM 时固有的）与状态本身结合起来的逻辑。从外部查看您的域模型并将您的业务逻辑放入服务（事务脚本）中会更简单。此外，如果您的业务逻辑量很大，那么当它分散在域实体中时（就像将您的事务脚本混合在一起一样），很难找到相关代码。

但是您不必最终采用完全程序化的方法，因为您可以（并且应该）将您的服务分解为自包含的高度内聚的“程序容器”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-07T17:29:13.110

TS 不是 OO 或非 OO。您可以在域模型方法、服务方法或高级应用程序方法中使用它。这只是意味着您可以阅读程序的业务意图，而无需通过一百万个回调和“黑魔法”。

这就是微软引入 async/await 的原因。它将看起来晦涩难懂的 send-a-callback（委托）和 exit，process-the-callback-in-separate-method（必需）样式转换为可读的*事务脚本*。

GOTO 很糟糕，因为它们破坏了事务脚本的可读流程，使其成为一个糟糕的脚本。

a) 事务脚本出错是一种反模式。例如，一个巨大的方法，没有或很少的方法调用等，同一方法中的不同级别的操作（将它们重构为方法）。业务流程的离散步骤集中在一个方法中（将它们分解为方法或单独的类。很多业务对象？使用 DDD 服务模式）。

b) 不正确使用 TS 是一种反模式。例如大量的应用程序间消息传递、事件触发等，因此您无法通读并查看业务流程（技术应用程序的功能要求）。低层次的细节（技术）与功能性工作相结合。过度分离应该在一页上可见的业务活动。

TS 的使用应该是分形的，每次放大都会深入到更详细的 TS 样式逻辑。高级：您会看到方法调用和 DDD 服务使用。中等水平可能有点混合。下面主要是域对象方法/属性调用以及最精细的逻辑细节。

将 TS 扔到公共汽车下，因为它可能会被滥用，或者阻止它的使用，只会把罐子踢到路上 - 无法分组和分离并且不知道 SRP（单一责任）/凝聚力的开发人员会搞砸其他风格， 也。答案是对他们进行业务流程培训，并举例说明分组和分离——这应该通过业务/功能需求（垂直切片）而不是技术（水平切片）来完成。

1.  将只处理一个域对象或其类型的其他实例的逻辑放在 DO 中。不要从域对象（person.orders）中引用其他对象类型或将任何东西注入到域对象中。（其他 DO 或存储库等）。就这么简单，它违反了 SRP。[方法中的低级事务脚本]
2.  当你需要 person.orders 之类的东西，或者感觉需要注入一些东西时，创建一个 DDD 服务（不序列化，每次使用后没有持久属性）。注入例如一个人，以及其他集合（存储库或 IQueryable 等）。在那里工作。[此处为中级交易脚本]
3.  在 DDD 服务的“应用程序方法”类别中组合对域对象和 DDD svcs 的操作。
4.  从程序的最高级别构造和调用那些

在每个级别，它看起来像一个 TX 脚本，但要遵守规则。保持方法小。到时候你就可以阅读了！

注意：在另一个答案中提供的链接中，Fowler 告诉您如何使交易脚本正确与错误：

[https://www.informit.com/articles/article.aspx?p=1398617](https://www.informit.com/articles/article.aspx?p=1398617)

他也确实暗示它不是面向对象的。我认为您可以将它与 OO 混合并使用 TS 专业人士（可读性和一百个专业人士），以及数百名 OO 专业人士。也就是说，您可以将TS元素放在一个领域模型中，并在更高层次的TS中组合领域模型的使用。

还要考虑将事务脚本定义为单个数据库事务。由于您的域模型不应该注入存储库（将域对象注入存储库），因此您实际上可以像这样组织它，调用相关存储库以在最高级别（取消）持久化。但如果不是这样，关键是要有一个没有过度分离的可读代码流。

抨击 TS 的问题在于它使人们认为 SRP 完全是关于 SoC（关注点分离），而他们永远不必担心凝聚力（将相同的东西放在一起，这也意味着 SoC，但需要组织）。因此，好心的工程师只是将事物分成一百万个部分（因为越多越好），并且更难辨别逻辑。

# iphone - 从幻灯片视图加载 UIWebView

> ID：16139942
> 
> 赞同：1
> 
> 时间：2013-04-22T05:23:33.267
> 
> 标签：iphone, ios, objective-c, uiwebview

我有一个`UIViewController`看起来与此类似的。

![在此处输入图像描述](https://i.stack.imgur.com/XemCn.png)

左侧是`TableViewController`带有单元格的a，右侧是a `UIWebView`。单击单元格后，我想根据单击的单元格加载唯一的 URL。

`UIWebView`由于某种原因，当我单击单元格时，永远不会向加载网址发送请求。the`UIWebView`和 the`UITableViewDelegate`都在同一个`UIViewController`.

这是我的示例代码：

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {

 NSMutableURLRequest *request;

    if (indexPath.row == 0) {
        request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];
    }

    else if (indexPath.row == 1) {
        request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.yahoo.com/"]];
    }

    [webView loadRequest:request];
} 
```

为什么这不起作用？the`UIWebView`和 the`UITableView`都`IBOutlets`在`viewController`. 点击被识别，并且这个`webView`加载请求在放入`viewDidLoad`函数时有效，但是当点击时使用相同的代码时没有任何反应。

如果它对你有帮助，我正在使用这个 github api [https://github.com/mikefrederick/MFSideMenu](https://github.com/mikefrederick/MFSideMenu)

谢谢你的帮助，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:26:25.533

行后`[webView loadRequest:request];`只需添加此行...

```
[webView reload]; 
```

请参阅此文档... [UIWebView_Class](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html)

**例如：**

```
[webView loadRequest: [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.co.in"]]];
[webView reload]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:09:16.083

问题是我试图让 UIWebView 在不是委托的控制器中加载请求（在本例中为侧视图）。相反，我将 UIWebView 设置为侧视图中的属性，并设置了 uiWebViewController.webView.loadRequest:request 并且它起作用了。

感谢大家的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:08:07.310

你能加载`WebView`吗？如果是，则：

首先，您需要在 xib 文件中检查有关引用插座和代表的连接是否正确。

其次，如果连接正确，请执行以下操作：您已经采取了措施`NSMutableURLRequest`而`NSURLRequest`不是那个

看到这个：

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSURLRequest *request;
   if (indexPath.row == 0)
   {
      request =[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];
   }
   else if (indexPath.row == 1)
   {
      request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.yahoo.com"]];
   }
    [webView loadRequest:request];
} 
```

希望这会有所帮助。

# android - Air android / mobile：不同应用程序的相同共享对象？

> ID：16139947
> 
> 赞同：1
> 
> 时间：2013-04-22T05:23:44.623
> 
> 标签：android, flash, mobile, air, shared-objects

我有两个应用程序，一个是试用版，另一个是游戏的完整版，都是用 adobe air 制作的。虽然通过共享对象解决方案保存数据没有问题，但我想为两个应用程序使用“一个”保存游戏，以便用户在升级到完整版本时可以保持进度。我试了一下。但是像这样的代码......：

SharedObject.getLocal("myApp","/");

...不起作用。那么问题来了，有没有办法让两个 Air 应用程序使用同一个共享对象？或者，如果不使用，至少“读取”另一个 Air 应用程序的共享对象？

在此先感谢 ANB_Seth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T15:08:47.150

答案是肯定的，我实际上通过网络连接和 6 位哈希为 iOS 和 Android 制作了一个游戏传输系统，用户必须在新安装的应用程序中输入才能从服务器获取 SO。您可以使用本地存储在 SD 卡或其他本地存储设备上的简单文件来执行此操作。

```
/**
 * send this user's current save data to the server
 */
public function send():void{

    var ba:ByteArray = new ByteArray();

    // Main.sv.user - is the registerClassAlias object we write/read locally via SharedObject
    ba.writeObject(Main.sv.user);

    var name:String = Crypto.hash("Random Secrect Salt - typically user score, name, etc.");
    // create 6 digit hash
    var key:String = Crypto.hash(name).slice(0, 6).toUpperCase();

    var request:URLRequest = new URLRequest ( 'https://sharedobject.com/transfer/save/name/'+name+'/key/'+key );
    var loader: URLLoader = new URLLoader();
    request.contentType = 'application/octet-stream';
    request.method = URLRequestMethod.POST;
    request.data = ba;

    loader.addEventListener(IOErrorEvent.IO_ERROR, function (evt:Event) {
        trace("error - network");
        onSaveRestoreEvent(1);
    });

    loader.addEventListener(Event.COMPLETE, function (evt:Event) {
        addChild(new BaseDialog("Save Sent To Server", "Your data has been sent to the server. To get this data back from the server " +
            "you will need your secret key. Please write this six digit key down:\n"+name));
    });

    loader.load( request );
}

/**
 * create a GET SO dialog
 */
public function receive():void{
    var text:Sprite = new Sprite();
    var textInput:TextInput = new TextInput();
    textInput.width = Constants.SCREEN_WIDTH-100;
    textInput.y = -50;
    text.addChild(textInput);

    var dialog:BaseDialog = new BaseDialog("Enter Secret Save Key", "Please enter your six digit secret save key in the field below, then press \"Get\".\n\n",
        "Get", function():void{
            text.removeChildren();

            var url:String = "https://sharedobject.com/transfer/get/name/"+textInput.text; //servlet url
            var request:URLRequest = new URLRequest(url);

            //get rid of the cache issue:
            var urlVariables:URLVariables = new URLVariables();
            urlVariables.nocache = new Date().getTime();
            request.data = urlVariables;
            request.method = URLRequestMethod.GET;

            var loader:URLLoader = new URLLoader();
            loader.dataFormat = URLLoaderDataFormat.BINARY;

            loader.addEventListener(Event.COMPLETE, function (evt:Event) {
                var loader:URLLoader = URLLoader(evt.target);

                var bytes:ByteArray = loader.data as ByteArray;
                bytes.position = 0;
                if(bytes.length <= 10 || !(bytes.readObject() is User)){
                    onSaveRestoreEvent(2);
                }else{
                    try{
                        bytes.position = 0;
                        Main.sv.user = (bytes.readObject() as User);
                        Main.sv.save();
                        onSaveRestoreEvent(0);
                    }
                    catch( e : EOFError ){
                        onSaveRestoreEvent(3);
                    }

                }
            });

            loader.addEventListener(IOErrorEvent.IO_ERROR, function (evt:Event) {
                trace("error - network");
                onSaveRestoreEvent(1);
            });

            loader.load(request);

        },
        "Close", function():void{text.removeChildren();}, null, null, text);

    dispatchEvent(new CreateBaseDialogEvent(dialog));
}

/**
 * called after the restore save system is done
 * @param prompt int [0 = complete][1 = error network][2 = error key][3 = error EOF]
 */
private function onSaveRestoreEvent(prompt:int):void{
    var dialog:BaseDialog;
    if(prompt == 0){
        dialog = new BaseDialog("Restore Complete!", "All save data has been restored.");
    }else if(prompt == 1){
        dialog = new BaseDialog("Network Error!", "Please seek an internet connection and try again.");
    }else if(prompt == 2){
        dialog = new BaseDialog("Invalid Secret Key!", "The key you've entered seems to be invalid, or the save data has expired on the server. " +
            "Data only lasts on the server for 24 hours.");
    }else{
        dialog = new BaseDialog("Error!", "There was an issue getting the file from the server. Please try the transfer again.");
    }
    dispatchEvent(new CreateBaseDialogEvent(dialog));
} 
```

# jquery - 如何为 jQuery 做一个 switch case？

> ID：16139948
> 
> 赞同：14
> 
> 时间：2013-04-22T05:23:46.347
> 
> 标签：jquery, if-statement, switch-statement

我有这个 if-else 语句，它给了我奇怪的反应......每当我首先选择“输出”时，之后不会出现任何其他选择......仅供参考，我正在使用多选，所以我可以选择并显示尽可能多的我想要的.

```
 $('#outputText').hide();
    $('#armCB').hide();
    $('#outputCB').hide();
    $('#zoneText').hide();
    $('#counterText').hide();
    $('#flagText').hide();
    $('#sensorText').hide();

('#select-choice-1').change(function(){
        if ($('#output').is(':selected')){
            $('#outputText').show();
        }
        else if ($('#arm').is(':selected')){
            $('#armCB').show();
        }
        else if ($('#zone').is(':selected')){
            $('#zoneText').show();
        }
        else if ($('#counter').is(':selected')){
            $('#counterText').show();
        }
        else if ($('#flag').is(':selected')){
            $('#flagText').show();
        }
        else if ($('#sensor').is(':selected')){
            $('#sensorText').show();
        }
        else{
            $('#outputText').hide();
            $('#armCB').hide();
            $('#zoneText').hide();
            $('#counterText').hide();
            $('#flagText').hide();
            $('#sensorText').hide();

        } 
```

我的 if-else 语句有错误吗？还是我必须在这里使用 Switch case 语句？如果是这样，我该怎么做？

HTML：

```
<div id="display" style=" clear:both">
        <div class="left" style="float:left; width:48%">
        <div data-role="fieldcontain">
            <label for="select-choice-1" class="select">Select Category</label>
            <select name="select-choice-1" id="select-choice-1" data-native-menu="false" data-mini="true" multiple="multiple" size="2">

                <option value="arm" id="arm">Arm</option>
                <option value="zone" id="zone">Zone Input</option>
                <option value="output" id="output">Output</option>
                <option value="counter" id="counter">Counter</option>
                <option value="flag" id="flag">Flag</option>
                <option value="sensor" id="sensor">Sensor</option>
            </select>
        </div>

        </div>
        <div class="right" style=" float: right; width:48%">
             <div id="armCB">
                <fieldset data-role="controlgroup">
                    <legend>Unit</legend>
                    <input type="checkbox" class="CB" name="armCB_1" id="armCB_1" class="custom" data-mini="true" />
                    <label for="armCB_1">Arming Status</label>
                </fieldset>
             </div>

            <div id="outputText">
                <p> Please enter an Output number and press "Add" button: </p>
                <input style="background: white; color: black;" type="text" id="outputTextInput" value="">
                <input type="submit" id="outputAdd" value="Add"/>
                <input type="submit" id="outputRemove" value="Remove"/>
            </div>
            <div id="zoneText">
                <p> Please enter a Zone number and press "Add" button: </p>
                <input style="background: white; color: black;" type="text" id="zoneTextInput" value="">
                <input type="submit" id="zoneAdd" value="Add"/>
                <input type="submit" id="zoneRemove" value="Remove"/>
            </div>
            <div id="counterText">
                <p> Please enter a counter number and press "Add" button: </p>
                <input style="background: white; color: black;" type="text" id="counterTextInput" value="">
                <input type="submit" id="counterAdd" value="Add"/>
                <input type="submit" id="counterRemove" value="Remove"/>
            </div>
            <div id="flagText">
                <p> Please enter a Flag number and press "Add" button: </p>
                <input style="background: white; color: black;" type="text" id="flagTextInput" value="">
                <input type="submit" id="flagAdd" value="Add"/>
                <input type="submit" id="flagRemove" value="Remove"/>
            </div>
            <div id="sensorText">
                <p> Please enter a Sensor number and press "Add" button: </p>
                <input style="background: white; color: black;" type="text" id="sensorTextInput" value="">
                <input type="submit" id="sensorAdd" value="Add"/>
                <input type="submit" id="sensorRemove" value="Remove"/>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-22T05:26:06.417

那只是标准的javascript： [http ://www.w3schools.com/js/js_switch.asp](http://www.w3schools.com/js/js_switch.asp)

```
switch(n) {
 case 1:
  //execute code block 1
  break;
 case 2:
  //execute code block 2
  break;
 default:
 // code to be executed if n is different from case 1 and 2
} 
```

其中 switch 变量将是所选标签的名称

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T05:28:56.290

在这种情况下您不需要 switch 语句，您可以使用所选选项的当前值或 id 来选择目标元素：

```
$('#select-choice-1').change(function(){
    $('.elements').hide();
    $('#' + this.value + 'Text').show();
}); 
```

**更新：** 当您为 select 元素使用多个属性时，您可以使用 jQuery`val`方法，它返回一个所选选项的数组，然后您可以根据所选值创建一个选择器。

```
$('#select-choice-1').change(function(){
    $('div.right > div').hide();
    var selector = '#' + $(this).val().join('Text, #') + 'Text';
    $(selector).show();
}); 
```

[http://jsfiddle.net/3AbJq/](http://jsfiddle.net/3AbJq/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T05:26:16.840

没有**JQuery Switch**语句。如果你想使用 switch 语句，你可以参考 Javascript Switch。

`[Switch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)`

这将是我的方法。我将为#select-choice-1 中的每个选项添加一个data-section 属性，该属性将具有相应div 的id。

```
$('#select-choice-1').change(function(){
        $('#outputText').hide();
        $('#armCB').hide();
        $('#zoneText').hide();
        $('#counterText').hide();
        $('#flagText').hide();
        $('#sensorText').hide();

    //the above hide() methods can be removed if you can
    //add a class for all of these sections and say $('.sectionDivs').hide()
    var divId = $(':selected',this).data('section');
    $('#' + divId ).show();

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T05:35:38.197

如果是多选，请不要使用`else if`

```
$('#select-choice-1').change(function() {
    $('#outputText').hide();
    $('#armCB').hide();
    $('#zoneText').hide();
    $('#counterText').hide();
    $('#flagText').hide();
    $('#sensorText').hide();

    if ($('#output').is(':selected')) {
        $('#outputText').show();
    }
    if ($('#arm').is(':selected')) {
        $('#armCB').show();
    }
    if ($('#zone').is(':selected')) {
        $('#zoneText').show();
    }
    if ($('#counter').is(':selected')) {
        $('#counterText').show();
    }
    if ($('#flag').is(':selected')) {
        $('#flagText').show();
    }
    if ($('#sensor').is(':selected')) {
        $('#sensorText').show();
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/HNM2u/3/)

如果您可以对标记进行一些更改，您可以将其简化为如下所示

```
$(function(){

    var $ctitems = $('#select-choice-1-items');
    var $items = $('.item', $ctitems).hide();

    $('#select-choice-1').change(function(){
        $items.hide()
        $('option:selected',this).each(function(){
            var id = $(this).attr('id');
            $('#' + id + 'Item').show()
        });
    });
}); 
```

HTML

```
<div id="display" style=" clear:both">
    <div class="left" style="float:left; width:48%">
        <div data-role="fieldcontain">
            <label for="select-choice-1" class="select">Select Category</label>
            <select name="select-choice-1" id="select-choice-1" data-native-menu="false" data-mini="true" multiple="multiple" size="2">
                <option value="arm" id="arm">Arm</option>
                <option value="zone" id="zone">Zone Input</option>
                <option value="output" id="output">Output</option>
                <option value="counter" id="counter">Counter</option>
                <option value="flag" id="flag">Flag</option>
                <option value="sensor" id="sensor">Sensor</option>
            </select>
        </div>
    </div>

    <div id="select-choice-1-items" class="right" style=" float: right; width:48%">
        <div id="armItem" class="item">
            <fieldset data-role="controlgroup">
                <legend>Unit</legend>
                <input type="checkbox" class="CB" name="armCB_1" id="armCB_1" class="custom" data-mini="true" />
                <label for="armCB_1">Arming Status</label>
            </fieldset>
        </div>

        <div id="outputItem" class="item">
            <p> Please enter an Output number and press "Add" button: </p>
            <input style="background: white; color: black;" type="text" id="outputTextInput" value=""/>
            <input type="submit" id="outputAdd" value="Add"/>
            <input type="submit" id="outputRemove" value="Remove"/>
        </div>
        <div id="zoneItem" class="item">
            <p> Please enter a Zone number and press "Add" button: </p>
            <input style="background: white; color: black;" type="text" id="zoneTextInput" value=""/>
            <input type="submit" id="zoneAdd" value="Add"/>
            <input type="submit" id="zoneRemove" value="Remove"/>
        </div>
        <div id="counterItem" class="item">
            <p> Please enter a counter number and press "Add" button: </p>
            <input style="background: white; color: black;" type="text" id="counterTextInput" value=""/>
            <input type="submit" id="counterAdd" value="Add"/>
            <input type="submit" id="counterRemove" value="Remove"/>
        </div>
        <div id="flagItem" class="item">
            <p> Please enter a Flag number and press "Add" button: </p>
            <input style="background: white; color: black;" type="text" id="flagTextInput" value=""/>
            <input type="submit" id="flagAdd" value="Add"/>
            <input type="submit" id="flagRemove" value="Remove"/>
        </div>
        <div id="sensorItem" class="item">
            <p> Please enter a Sensor number and press "Add" button: </p>
            <input style="background: white; color: black;" type="text" id="sensorTextInput" value=""/>
            <input type="submit" id="sensorAdd" value="Add"/>
            <input type="submit" id="sensorRemove" value="Remove"/>
        </div>
    </div>
</div> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/HNM2u/2/)

# mysql - 为什么查询不起作用？

> ID：16139950
> 
> 赞同：-5
> 
> 时间：2013-04-22T05:24:01.070
> 
> 标签：mysql, sql, wordpress, sql-delete, sql-like

我在运行许多其他查询的 php 文件上运行此代码，但此代码不会删除我需要的内容。

你知道为什么吗？

```
$fivesdrafts = $wpdb->query( $wpdb->prepare("DELETE FROM $table_name WHERE urlrequested LIKE %s","'%rate=%'") ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:27:09.253

也许您需要将 %s 用单引号括起来...

```
....WHERE urlrequested LIKE '%s'... 
```

希望能帮助到你...

# blackberry - 没有在黑莓 9220 simualotr 上加载我的应用程序

> ID：16139955
> 
> 赞同：2
> 
> 时间：2013-04-22T05:24:19.020
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

有谁知道这个错误低于它没有在黑莓 7.1（9220）模拟器上加载我的应用程序。

![在此处输入图像描述](https://i.stack.imgur.com/z7Llu.png)

# jquery - 全年查看日历？

> ID：16139963
> 
> 赞同：8
> 
> 时间：2013-04-22T05:24:44.170
> 
> 标签：jquery, html, calendar, fullcalendar

我需要一个像 fullcalendar 这样的日历，但我需要一次显示全年的房间/地点预订。我也上传了图片。

```
$(function() {
  $("#datepicker").datepicker({
    numberOfMonths: 12,
    showButtonPanel: true
   });
 }); 
```

我用过这个，但日期选择器不能用于活动/预订。

![全年日历](https://i.stack.imgur.com/QtCKd.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-18T14:30:41.223

FullCalendar 有一个 fork 实现 yearview：

[https://github.com/tpruvot/fullcalendar/releases](https://github.com/tpruvot/fullcalendar/releases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:34:36.440

这是您要查找的日历：

[http://www.webappers.com/2010/06/08/wdcalendar-jquery-based-google-calendar-clone/](http://www.webappers.com/2010/06/08/wdcalendar-jquery-based-google-calendar-clone/)

# php - JS变量的下拉值

> ID：16139968
> 
> 赞同：0
> 
> 时间：2013-04-22T05:24:52.610
> 
> 标签：php, javascript, jquery

我有一个从数据库中填充的选择：

```
<?php
$query = mysql_query("SELECT * FROM users");
if(mysql_error())
{
print(mysql_error());
}
echo'<select id="dropdown2" id="user_id" name="user_id" data-placeholder="[Select]" class="select" style="width:350px;" tabindex="2")">';
echo'<option value=""></option>';
{
while($row = mysql_fetch_array($query))
echo'<option value="'.$row['user_id'].'">'.$row['user_name'].'</option>';
}
echo'</select>';                                                        
?> 
```

我需要在 js 变量上提交传递下拉值

我正在尝试这种方式，但变量为空白：

```
<script language="JavaScript">
var dropdown_value = $('#user_id option:selected').val();;
</script> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:35:48.167

您的 select 元素有两个 ID 属性：`<select id="dropdown2" id="user_id"`

这是无效的。您的浏览器可能正试图通过忽略第二个错误（这是您尝试访问的那个）来从错误中恢复。

[用验证器](http://validator.w3.org/)测试你的代码会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:30:09.387

您需要访问 的值，`<select>`并且需要确保只为其分配一个 id 属性，因为目前有两个：

```
var dropdown_value = $('#user_id').val(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T05:41:42.563

首先将第一个选项的值设置为 while 循环 0 之外，然后在 jquery 函数中 var dropdown = $('#dropdown2 option:selected').val();

# java - java中的数组初始化

> ID：16139977
> 
> 赞同：33
> 
> 时间：2013-04-22T05:25:29.737
> 
> 标签：java, arrays, int

顺便说一句，我注意到有人可以编写这样的代码，这很正常：

```
int arrays[] = {1, 2, 3};
for (int n : arrays)
   System.out.println(n); 
```

但我不明白以下内容是非法的：

```
for (int n : {1, 2, 3})
   System.out.println(n); 
```

从编译器作者的角度来看，这不会引入任何歧义，不是吗？可以预期数组的类型与先前声明的元素的类型相同。换句话说，`n`被声明为`int`，所以数组*必须*是`int[]`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-22T05:27:21.597

你需要这个语法：

```
for(int n : new int[]{1, 2, 3})
   System.out.println(n); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-22T05:33:47.093

来自 Java 语言规范，[§10.6 - Array Initializers](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)：

> 数组初始值设定项以逗号分隔的表达式列表形式编写，用大括号 { 和 } 括起来。
> 
> 尾随逗号可能出现在数组初始值设定项中的最后一个表达式之后并被忽略。
> 
> **每个变量初始化器必须与数组的组件类型赋值兼容（第 5.2 节），否则会发生编译时错误。**
> 
> **如果正在初始化的数组的组件类型不可具体化（第 4.7 节），则会出现编译时错误。**

数组初始化器是[数组创建表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)的一部分，它确实定义了您需要以下四种形式之一才能成功初始化数组：

> ```
> ArrayCreationExpression:
>     new PrimitiveType DimExprs Dimsopt
>     new ClassOrInterfaceType DimExprs Dimsopt
>     new PrimitiveType Dims ArrayInitializer 
>     new ClassOrInterfaceType Dims ArrayInitializer 
> ```

再次，从规格：

> 如果 ClassOrInterfaceType 不表示可具体化类型（第 4.7 节），则为编译**时错误。**否则，ClassOrInterfaceType 可以命名任何命名的引用类型，甚至是抽象类类型（§8.1.1.1）或接口类型（§9）。

这就是您需要语法的原因`new int[] {1, 2, 3}`。

**编辑**：要更多地了解您的问题的细微差别：

> 从编译器作者的角度来看，这不会引入任何歧义，不是吗？可以预期数组的类型与先前声明的元素的类型相同。换句话说，n被声明为int，所以数组必须是int[]

***不*，有歧义。** 例如，以下两个语句有什么区别？

```
int[] arr1 = new int[] {1, 2, 3};
short[] arr2 = new short[] {1, 2, 3}; 
```

主要区别在于它们在字节码中编译成的内容。一个明显是int，另一个明显是short。但是，如果无法判断哪种数据类型是哪种（数组中的值不超过`Short.MAX_VALUE`），就*不可能*断言这个数组毫无疑问是一个`int`. 回想一下 a`short`属于 a 的范围`int`，因此在使用它时您很容易陷入一些棘手/奇怪的场景。

它变得更有趣： **这是有效的代码。**

```
for(int i : arr2) {
    System.out.println(i);
} 
```

同样，只要`arr2`不超过中的元素`Short.MAX_VALUE`，您就可以摆脱和之间的这种模棱两可的`short`引用`int`。

这是编译器不能仅仅推断出你的意思的另一个原因`int`。你的意思*可能*`short`是.*

^(**：没有*多少人*会这样做*，但那只是以防万一。)

 ** * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-22T05:29:01.143

因为数组是对象，必须实例化。Java 不将 {} 本身识别为数组。但是，它确实允许您使用代码块（即 {..} 中的代码）来定义数组的初始元素。

上面的答案描述了您完成此操作的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:11:48.700

我认为每当我们创建一个变量时，编译器都会自动为其分配内存。创建的内存量取决于您使用的编译器的类型。在第一条语句中，您使用输入声明一个数组，编译器会自动为数组元素存在于数组中，但是当您在 for 循环中声明数组时，每次运行仅创建 2 个字节。

例如。

```
int x; // create 2 bytes of memory 
```

无论您是否在此空间中插入值，此空间都会永久分配给 int x。

```
int x = "123"; // This code also take 2 bytes of memory and contain value = 123 
```

相似地，

```
int a[] ={1,2,3} // create 6 byte of space in memory, 2 byte for each integer variable. 
```

另一方面，当您在 for 循环中声明数组而不使用新标识符时，编译器假定它是一个 int 变量并且只创建 2 个字节的内存空间并且程序会出错。

```
for (int n : {1, 2, 3}) // create only 2 bytes of memory 
```

因此，通过使用新的标识符，我们分配了一个新的内存空间并插入了花括号中给出的值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T10:22:16.397

老实说，我在您的解释中看到的唯一谬误是您如何告诉计算机通过不存在的对象/内存？

您必须先创建一些东西才能通过它，在这里，您什么都没有创建，并且逻辑谬误存在于您的脑海中，因为您的思考比Java本身的创建规则更深。

别担心，我发现自己遇到了像你这样的情况，但最重要的是首先要了解 Java 是如何编程的！*

# javascript - Javascript单选框简单

> ID：16139978
> 
> 赞同：0
> 
> 时间：2013-04-22T05:25:30.730
> 
> 标签：javascript, validation, radio-button

我有以下代码没有告诉用户必须单击复选框。任何帮助都会很棒！

```
function validate_form(){

valid=true;

var letters=/^[a-zA-Z]+$/;
var numbers=/^[0-9]+$/;
var email=document.order_form.user_email.value;
var invalid = [];

if (email.indexOf("@")<1 || email.lastIndexOf(".")<email.indexOf("@")+2 
|| email.lastIndexOf(".")+2>=email.length){
invalid.push("*Email")
}

if (document.order_form.address.value.search(letters)==-1){
invalid.push("*Address")
}

if (document.order_form.drop_down.selectedIndex==false){
invalid.push("*Age")
}

if (document.order_form.sex.checked==false){
invalid.push("*Sex")
} 
```

还有我的 HTML

```
<div class="titles">*Sex:</div>

                <p>
                Male <input type="radio" name="sex" value="male" /> 
                Female <input type="radio" name="sex" value="female" />
                </p>

            </div> 
```

这真的只是我想要验证的性部分！其他一切正常！！！

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:32:04.670

尝试这个：

```
if (document.order_form.sex[0].checked==false && 
      document.order_form.sex[1].checked==false){
    invalid.push("*Sex");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:36:26.817

你可以`document.querySelector`这样用

```
if (!(document.querySelector('input[name="sex"]:checked')||{}).value) { /*...*/} 
```

# .htaccess - 如何目录索引控制器路由？

> ID：16139996
> 
> 赞同：1
> 
> 时间：2013-04-22T05:26:52.440
> 
> 标签：.htaccess, symfony, apache2, directoryindex

使用我当前的配置，每次我键入 something.com 时，它都会显示 app_dev.php，因为我当前的重写规则是正确的。但我想要的是，如果用户输入 www.something.com，它将自动定向到 www.something.com/home

注意：“家”是我的一个捆绑包下的一条路线

**这是我目前的配置**

```
<VirtualHost *:80>
  # Admin email, Server Name (domain name), and any aliases
  ServerAdmin admin@something.com
  ServerName  www.something.com

  # Index file and Document Root (where the public files are located)
#  DirectoryIndex home    # I have already tried this, nothing happens
  DocumentRoot /home/user/public/something.com/web/symfony/web

  # Log file locations
  LogLevel warn
  ErrorLog  /home/user/public/something.com/log/error.log
  CustomLog /home/user/public/something.com/log/access.log combined
</VirtualHost> 
```

**Symfony/web 中的 .htaccess**

```
<IfModule mod_rewrite.c>
    RewriteRule ^$ app.php/home [L]

    Options +FollowSymlinks
    RewriteEngine On

    # Explicitly disable rewriting for front controllers
   RewriteRule ^app_dev.php - [L]
   RewriteRule ^app.php - [L]

    RewriteCond %{REQUEST_FILENAME} !-f

    # Change below before deploying to production
    RewriteRule ^(.*)$ app.php [QSA,L]
    #RewriteRule ^(.*)$ app_dev.php [QSA,L]

</IfModule> 
```

实际的 url 必须是 www.something.com/app.php/home （当前规则隐藏了 app.php）

编辑：根据给出的答案更新了 .htaccess 。但仍然无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:02:57.647

`RewriteRule`在顶部插入 a

```
RewriteRule ^$ home [L] 
```

这将重定向到`/home`，如果您希望客户端看到此 URL，您必须[`R`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)在规则中添加一个标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T06:54:03.943

在您的 .htaccess 或 VirtualHost 中，用于`mod_alias`获取临时重定向 (302)。您不必担心它与您的应用程序 URL 重写冲突。

```
Redirect / /home 
```

见[http://httpd.apache.org/docs/current/mod/mod_alias.html](http://httpd.apache.org/docs/current/mod/mod_alias.html)