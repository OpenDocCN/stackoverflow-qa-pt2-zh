# StackOverflow 问答 13654000-13654999

# jquery - jQuery加载和重定向根目录

> ID：13654000
> 
> 赞同：1
> 
> 时间：2012-11-30T22:17:30.830
> 
> 标签：jquery, html, css

我正在为类创建一个网站，并且正在使用 jQuery 的加载功能，加载工作正常。我正在将新页面加载到现有页面上的表格中，以使所有页面的导航菜单保持相同。

我遇到的问题是根目录没有改变，所以我的外部 css 文件和图像（位于子目录中）不会加载到我刚刚加载的页面上。有没有办法将根目录重定向到所有受支持的内容，以便正确加载，或者这是不可能的？我需要这个作业的目录结构。

这是我的目录结构。并且每个网站都使用css文件的根目录

/index.html /css/index.html

```
<a href="javascript:" onclick="load_content('CSS/index.html')">CSS</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:55:31.717

很难理解您要完成的工作。或许最好披露您正在尝试做的事情的总体目标？你的任务是什么？

不理解 100%：从纯粹的 Web 开发人员的角度来看，您有几个选择：

*   将您孩子的 CSS 向上移动到根应用程序的 CSS 以及所有其他相应的资产中。
*   在加载页面的 HTML 中包含 CSS 引用或顶部的部分。您需要确保您的子页面具有正确的资产路径引用。

通过充分利用 CSS 类和 ID 标签，您可以轻松解决很多问题。这使您可以对整个应用程序进行样式设置，并确保您的引用保持完整（无法找到图像）。此外，将所有样式声明放在一个部分中可以更容易管理。

# php - 如何从我的数据库中获取表？

> ID：13654002
> 
> 赞同：0
> 
> 时间：2012-11-30T22:17:34.383
> 
> 标签：php, mysql, database

我有一个学校任务：我需要创建一个用户数据库。

首先，我需要知道如何从数据库中的表中获取信息。然后我需要将用户名写入数据库。

让我们从第一个开始：

我正在与 MAMP 合作。我从老师那里得到了这个样本，我在那里添加了一些回声。

```
< ?php

$dbhost  = 'localhost';    // Unlikely to require changing
$dbname  = 'chrisdb';        // Modify these...
$dbuser  = 'root';        // ...variables according
$dbpass  = 'root';        // ...to your installation

$db_server=mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());
echo("1");
if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());
echo("2");
mysql_select_db($dbname)
    or die("Unable to select database: " . mysql_error());
echo("3");

?> 
```

所有的回声都被打印出来。这是否意味着我可以访问服务器？如何访问数据库中的表并获取它的值？

以及如何写入数据库？

我不是在寻找最好的代码，更像是最简单的代码。我很感激你能给我的所有帮助。如果你有帮助，请你解释一下你的代码是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:19:55.233

您通过发送语句写入数据库`INSERT`并使用语句读取`SELECT`。请参阅[文档](http://www.php.net/manual/en/function.mysql-query.php)

我个人讨厌 W3Schools，但[本文](http://www.w3schools.com/php/php_mysql_insert.asp)将让您开始了解如何将数据插入数据库。

您应该注意到`mysql_`函数已被弃用，您应该使用`mysqli_`or`PDO`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:23:10.643

您将在数据库上运行 sql 查询。

这是一个在数据库上运行 select 语句的简单示例（但如果您没有向数据库中插入任何内容，它将不会显示任何内容）

```
$sqlStatement = "SELECT * FROM tablename;
$result = mysql_query($sqlStatement,$db_server);

//this will calculate the number of rows in $result
 $rows=mysql_numrows($result);

$i=0;
//the loop below will extract each row in $result and put it in $variable. 
while ($i < $num) {
   $variable=mysql_result($result,$i,"column_name");
   $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:10:05.173

我认为您需要了解 MAMP 服务器的每个组件的作用。如果您到达第三个回声，那么前面的函数调用都没有失败。如果遇到问题，die() 函数将停止执行并显示 mysql_error() 文本。

为了与数据交互，假设您创建了一个名为 Students 的表，其结构如下：

```
StudentID   varchar(9)
FirstName   varchar(30)
LastName    varchar(30) 
```

以下是插入行的方法：

```
<?php
   $result = mysql_query("INSERT INTO Students (StudentID, FirstName, LastName) VALUES ('123456789', 'Michael', 'Hunt')");
   if (!$result) {
      die('query failed: ' . mysql_error());
   }
?> 
```

以下是检索所有行的方法：

```
<?php
   $result = mysql_query("SELECT * FROM Students");
   if (!$result) {
      die('query failed: ' . mysql_error());
   }
?> 
```

如果检索成功，下面是一个代码片段，可将您的结果放在表格中并显示它们：

```
<?php
   $numfields = mysql_num_fields($result);
   echo "<table>\n<tr>";
   for ($i=0; $i < $numfields; $i++)
      { echo '<th>'.mysql_field_name($result, $i).'</th>'; }
   echo "</tr>\n";
   while ($row = mysql_fetch_row($result))
      { echo '<tr><td>'.implode($row,'</td><td>')."</td></tr>\n"; }
   echo "</table>\n"
?> 
```

# java - 从可能有重复条目的数据库列中使用 AutoCompleteTextView

> ID：13654005
> 
> 赞同：1
> 
> 时间：2012-11-30T22:18:04.540
> 
> 标签：java, android, sqlite, autocomplete, textview

如何从数据库表中可能重复某些值的列中为 AutoCompleteTextView 提供建议？

[http://www.outofwhatbox.com/blog/2010/11/android-autocompletetextview-sqlite-and-dependent-fields/](http://www.outofwhatbox.com/blog/2010/11/android-autocompletetextview-sqlite-and-dependent-fields/)

[http://www.outofwhatbox.com/blog/2010/11/android-simpler-autocompletetextview-with-simplecursoradapter/](http://www.outofwhatbox.com/blog/2010/11/android-simpler-autocompletetextview-with-simplecursoradapter/)

在学习如何使用 AutoCompleteTextView 的过程中，我偶然发现了上面两篇博客文章。这些非常适合介绍，但并不能完全解决我的问题。我想提供数据库中列的不同值作为我的应用程序中 AutoCompleteTextView 的建议。当我实现上述两个示例中的代码时，我在列表中得到了重复的建议。尝试`DISTINCT`在我的查询中使用关键字不起作用，因为在返回的结果中`CursorAdapter`需要一个`_id`字段。由于每一行都有自己的`_id`，因此不会消除重复的值。

我正在考虑为这些值创建一个单独的查找表。这具有标准化我的数据以及提供对不同值的轻松访问以建议条目的好处。对于我的一个 AutoCompleteTextViews，我认为这会很好，因为很可能只有 4 或 5 个不同的值会被使用。另一方面，它可能效果不佳，因为我不确定大型数据集中会有多少不同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:27:05.730

如果你有一张桌子：

```
CREATE TABLE Foo(_id INTEGER PRIMARY KEY, bar TEXT); 
```

并且只想为您可以使用`_id`的每个不同选择一个：`bar`

```
SELECT _id, bar FROM Foo GROUP BY bar; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T22:27:57.213

当您执行 sqlite 选择查询时尝试使用 GROUP BY...并按列名分组...即

```
 SELECT keyword FROM mytable GROUP BY keyword 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T00:03:18.960

我希望这不是过度杀戮，但为什么不尝试子查询呢？

```
select _id, bar 
from Foo 
where bar in (
    select distinct bar
    from Foo
); 
```

内部查询将返回“bar”中的所有不同值，然后外部查询将所有这些值与相应的“_id”匹配。

# javascript - 在 Handlebars 模板中执行 javascript

> ID：13654009
> 
> 赞同：13
> 
> 时间：2012-11-30T22:18:29.957
> 
> 标签：javascript, template-engine, handlebars.js

我对 js 模板引擎完全陌生。车把似乎是流行的选择。我不喜欢执行条件、循环等的语法，但因为我完全有能力使用普通的旧 js 并且感觉更舒服，我不打算让任何不知道 js 的人接触我的模板，我在问 Handlebars 是否支持这一点。

当然，最受欢迎的选择并不总是最好的。我更像是一个 Mootools 人，而 jQuery 让我发疯（很棒的库，只是不适合我）。因此，如果 Handlebars 是模板引擎的 jQuery，那么 Mootools 会是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T00:12:24.890

[车把和小胡子](http://mustache.github.com/)背后的中心思想之一是它们在设计和意图上都是**[逻辑的。](https://stackoverflow.com/questions/3896730/whats-the-advantage-of-logic-less-template-such-as-mustache)**他们现在不能，也[不会](http://handlebarsjs.com/)允许或建议您在模板中嵌入原始 JS。有人说这是一个更好的设计。如果你想要嵌入 javascript，几乎所有其他传统的模板引擎，例如[_.template](http://underscorejs.org/#template)或[jam](http://jade-lang.com/)或[EJS](http://embeddedjs.com/)都是基于（或至少支持）嵌入 JS 代码片段的想法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-10T23:17:55.040

很抱歉在这里复活一个老问题。如果您必须使用把手或者更改模板库不可行，您可以使用把手库中的 Helpers。

[http://handlebarsjs.com/expressions.html#helpers](http://handlebarsjs.com/expressions.html#helpers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-07T02:27:47.530

在车把中注册一个助手可以帮助您了解您正在尝试做的事情。有关完整示例，请参阅此链接：[使用节点注册车把助手绝对没有任何作用](https://stackoverflow.com/questions/26089958/registering-handlebars-helpers-with-node-does-absolutely-nothing)

# joomla - 在弹出窗口中显示 Joomla 系统消息

> ID：13654013
> 
> 赞同：3
> 
> 时间：2012-11-30T22:18:50.270
> 
> 标签：joomla, popup, joomla2.5

我对 Joomla 不是很有经验。这就是为什么我需要你的建议。这个想法是在弹出窗口中显示系统消息。

解决方案：

1.我删除了文件libraries\joomla\document\html\renderer\message.php中的下一行，因为我不需要这个div

```
$buffer .= "\n<div id=\"system-message-container\">";
$buffer .= "\n</div>"; 
```

2.在index.php中我替换了

```
<jdoc:include type=”message” /> 
```

和

```
<?php if ($this->getBuffer('message')) : ?>
<?php
    $message = $this->getBuffer('message');
    $script  = '<div id="popup"><div id="popup-inner">'.$message.'</div></div><div id="popup-mask"></div>';
    echo $script;
?>
<?php endif; ?> 
```

div#popup 用于弹出本身， div#popup-mask 用于叠加

3\. 我在 CSS 中设置了 #popup 和 #popup-mask 的样式

```
#popup-mask {position: absolute; top: 0; left: 0; z-index: 9997; background: url(../images/bg-overlay.png);}
#popup {position: fixed; width: 400px; top: 40%; left: 50%; margin-left: -200px; z-index: 9999; background: #e6e6e6; border-radius: 10px; -webkit-border-radius: 10px; -moz-border-radius: 10px;} 
```

4.并添加了一些jQuery

```
jQuery.fn.showMask = function () {
    var maskHeight = jQuery(document).height();
    var maskWidth = jQuery(window).width();
    jQuery(this).css({'width':maskWidth,'height':maskHeight});
};
jQuery(document).ready(function() {
    if (jQuery('#popup-mask').length){
        jQuery('#popup-mask').showMask();
        jQuery('#popup-mask').click(function () {
            jQuery(this).hide();
            jQuery('#popup').hide();
        });
        jQuery(window).resize (function() {
           jQuery('#popup-mask').showMask();
        });
}
}); 
```

它有效，但正如我已经提到的，我对 Joomla 很陌生。

**所以，问题是：**

- 这个解决方案好吗？

- 如何改进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:05:55.283

我想建议您不要更改joomla的核心文件，除非您出于某些原因确实需要这样做。对于您的情况，您可以尝试一下它可能会对您有所帮助。

1.  如果需要，添加默认的 Joomla 系统消息代码如果这是您正在使用的现有模板，它可能已经有系统消息代码，它将显示 Joomla 的系统消息：

**代码：**

```
<jdoc:include type=”message” /> 
```

如果它不存在，您通常希望将其添加到此代码的正上方：

**代码：**

```
<jdoc:include type=”component” /> 
```

1.  加载 Mootools，它将创建动画弹出模式消息 在开始标记之后，添加以下代码：

> JHTML:: *('behavior.mootools'); JHTML::* ('behavior.modal');

**注意：**如果您收到 Mootools 冲突错误，您的站点可能已经在加载 Mootools。尝试删除这部分代码。

1.  添加 JavaScript 代码以自动“弹出”系统消息“在 CLOSING 标记之前添加此代码：

**脚本：**

```
<script type=”text/javascript”&gt;
window.addEvent(‘domready’, function(){
if( $(‘system-message’) ){
SqueezeBox.initialize();
SqueezeBox.open( $(‘system-message’), {
handler: ‘adopt’,
shadow: true,
overlayOpacity: 0.5,
size: {x: 600, y: 100},
onOpen: function(){
$(‘system-message’).setStyle(‘visibility’, ‘visible’);
}
});
}
});
</script> 
```

根据您的需要，您可以更改您的`JAVASCRIPT`和`CSS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:54:55.047

除非你真的需要，否则我不会推荐 hack。在这种情况下，我认为你不需要。相反，这应该适合你：

将您的系统消息包装在一个 DIV 中（在您的模板 index.php 文件中），如下所示：

```
<div d="systmsg" onclick="javascript:this.style.display='none';"><jdoc:include type="message" /></div> 
```

然后是一些CSS：

```
#systmsg {
position:absolute;
text-align:center;
width:100%;
top:300px (what you want)
}

#system-message {
display:block;
width:(what you want);
max-height:(what you want);
margin-left:auto;
margin-right:auto;
z-index: 100;
} 
```

可以在[此处](http://forum.joomla.org/viewtopic.php?f=469&t=471034)找到此示例的链接。

# javascript - JavaScript LastFM

> ID：13654016
> 
> 赞同：0
> 
> 时间：2012-11-30T22:19:03.147
> 
> 标签：javascript, last.fm

你好有以下功能：

```
function last()
{
    /* Create a cache object */
    var cache = new LastFMCache();
    alert("test");

    alert("test2");
    /* Load some artist info. */
    lastfm.artist.getInfo({artist: 'The Killers'}, {success: function(data){
        alert(data.bio);
        $('gallery').append(data.to_html('<p>${bio}</p>'));
    }, error: function(code, message){
        /* Show error message. */
    }});
} 
```

alert(data.bio) 显示为未定义。我将如何检查正在保存的数据以及如何在我的网页上正确使用和格式化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:53:16.760

> 我将如何检查正在保存的数据？

*   如果您没有 Firefox，请获取它。安装萤火虫。按 F12 调出 Firebug。单击控制台选项卡。放入`console.log(data);`您的成功回调函数。运行代码，并检查您心中的内容。我推荐 Firefox 比 Chrome 具有更好的对象浏览器，但您也可以...
*   获取铬。它的调试器是内置的。按 F12。单击控制台选项卡。做和我对 Firefox 说的一样的事情。

学到的知识！

# mips - MIPS 汇编程序 ERROR Exception 4 [地址错误 inst/data fetch]

> ID：13654021
> 
> 赞同：0
> 
> 时间：2012-11-30T22:19:23.030
> 
> 标签：mips

我正在尝试将 MIPS 代码转换为 ARM 代码，这不是问题，因为我遇到了一个棘手的异常，我希望有人能解释什么是错误的以及如何处理它。程序传递 a0，它是指向 mips 二进制指令表示的指针，它返回 $v0 创建的 ARM 指令的数量和 $v1 - 指向第一条 arm 指令的指针。test.s（ta 用来测试的代码）然后执行一些操作来测试程序是否成功。如果你愿意，我可以给你看 test.s。无论如何，我不断收到的错误如下......

```
 Exception occurred at PC=0x00400140
   Unaligned address in inst/data fetch: 0xfffffffb
   Exception 4  [Address error in inst/data fetch]  occurred and ignored
  Exception occurred at PC=0x00400144
   Unaligned address in inst/data fetch: 0xfffffff7
   Exception 4  [Address error in inst/data fetch]  occurred and ignored
  Read from unused memory-mapped IO address (0xfffffff4)

    .data
    .align 2
mipsArray:      .word 0
mipsToArm:      .word 0
branchTable:        .word 0
armArray:           .word 0
# endConditon:      .word 0xFFFFFFFF
    .text
#----------------------------------------------------------------------#
# Current Register list:
#   $t0 - is initially used as a pointer to the mipsArray
#   $a0 - holds the pointer to the first word of the mips array
#   $s1 - will hold the current word as we check for FFFFFFFF
#   $s8 - will hold the check value 0xFFFFFFFF
#----------------------------------------------------------------------#
MIPStoARM:
    addi        $sp, $sp, -4        # prep the frame
    sw      $fp, 0($sp)     # prep the frame
    move    $fp, $sp        # prep the frame
    addi        $sp, $sp, -36       # prep the frame
    sw      $ra, -4($fp)        # prep the frame
    sw      $s8, -8($fp)        # prep the frame
    sw      $s1, -12($fp)       # prep the frame
    sw      $s2, -16($fp)       
    sw      $s3, -20($fp)
    sw      $s4, -24($fp)
    sw      $s5, -28($fp)
    sw      $s6, -32($fp)
    sw      $s7, -36($fp)
    la      $t0, mipsArray      # store the pointer into data as a global   
    sw      $a0, 0($t0)
    li      $s8, 0xFFFFFFFF # this is the check value
    addi        $t1, $0, 1      # for now t1 is the counter = 1
    lw      $s1, 0($a0)
 countLoop:
    beq     $s1, $s8, allocateSpace # if word == FFFFFFFF then allocate the      space
    add     $a0, $a0, 4 # move to next word
    lw      $s1, 0($a0)
    addi        $t1, $t1, 1 # counter++
    j       countLoop
 allocateSpace:
    sll     $t1, $t1, 2 # count * 4 to get number of words
    li      $v0, 9
    add     $a0, $0, $t1
    syscall
    move        $t2, $v0        # t2 now holds the pointer to the beginning of the allocated space
    la      $t0, mipsToArm
    sw      $t2, 0($t0) # now mipstoarms first element is the pointer to the allocated space
    li      $v0, 9
    syscall
    move        $t2, $v0        # t2 now holds the pointer to the beginning of the allocated space
    la      $t0, branchTable
    sw      $t2, 0($t0) # now branchTable first element is the pointer to the allocated space
    sll     $t1, $t1, 1 # now multiply the counter by 2 to make enough space for armArray
    li      $v0, 9
    add     $a0, $0, $t1
    syscall
    move    $t2, $v0
    la      $t0, armArray
    sw      $t2, 0($t0) # now armArray first element is the pointer to the allocated space
 #--------------------------------------------------------------------#
 # from this point on should be the translation mips to arm 
 # first load the first word then
 # th e main switch case which checks opcode
 #
 # notes on current register usage:
 #  s1 - points to the mips binary data
 #  s2 - points to the mips to arm 
 #  s3 - points to the branch table
 #  s4 - points to the arm array 
 #  s5 - this boyo is gonna count how many arm instructions there are
 #  s8 - 0xFFFF FFFF
 #  t0 - is temp used to loading double pointers
 #  t2 - will hold the current word like a boss
 #---------------------------------------------------------------------#
wordSetup:
     la     $t0, mipsArray          #loads the address of mipsarray which first word conains the pointer
     lw     $s1, 0($t0)             # load the pointer
     la         $t0, mipsToArm
     lw     $s2, 0($t0)
     la     $t0, branchTable
     lw     $s3, 0($t0)
     la         $t0, armArray
     lw     $s4, 0($t0)
     lw     $t2, 0($s1)         # t2 should now hold the current word
     move   $s5, $0             # initialize the counter to 0
     move       $t3, $0             # initialize to 0
     beq        $t2, $s8, done          # this will have to be changed for Part2
     addi       $s5, $s5, 1         # counter++
     j      opcodeSwitch            # jump to the main switch
 nextWord:
     addi       $s1, $s1, 4         # sets the MIPS to point to next word
     lw     $t2, 0($s1)
     addi       $s2, $s2, 4         # points to next word in MIPStoARM
     addi       $s3, $s3, 4         # points to next word in branctable
     beq        $t2, $s8, done      # if the current word is 0xFFFFFFFF your done part 1
 opcodeSwitch:
     # first step here is to mask out the 6 most significant bits
     li     $t6 0xFC000000
     and        $t3, $t2, $t6           # mask out opcode save into t3
     beq        $t3, $0, zeroOpHandler  # checks if the opcode is 000000
     li     $t6, 0x04000000
     beq        $t3, $t6, oneOpHandler  # checks if the opcode is 000001
     li     $t6, 0x10000000
     beq        $t3, $t6, fourOpHandler # checks if the opcode is 000100
     li     $t6, 0x20000000
     beq        $t3, $t6, eightOpHandler    # checks if the opcode is 001000
     li         $t6, 0x30000000
     beq        $t3, $t6, cOpHandler    # checks if the opcode is 001100
     li     $t6, 0x34000000
     beq        $t3, $t6, dOpHandler    # checks if the opcode is 001101
 #---------------------------------------------------------------------#
 # ~~~zeroOpHandler:
 #---------------------------------------------------------------------#
 zeroOpHandler:
     li     $t6, 0x001FFFFF
     and        $t3, $t2, $t6
     li     $t6, 0x00000008
     beq        $t3, $t6, jRHandler
     andi       $t3, $t2, 0x7FF
     li     $t6, 0x024          # this should represent the AND func.
     beq        $t3, $t6, oaasHandler   # if it matches go to oaasHandler
     li     $t6, 0x025          # this should represent the OR func.
     beq        $t3, $t6, oaasHandler       # if it matches go to orHandler
     li     $t6, 0x020          # this should represent the ADD func.
     beq        $t3, $t6, oaasHandler   # if it matches go to oaasHandler   
     li     $t6, 0x022          # this should represent the SUB func.
     beq        $t3, $t6, oaasHandler   # if it matches go to oaasHandler
     li     $t6, 0x006          # this should represent the SRLV func.
     beq        $t3, $t6, srlvHandler   # if it matches go to srlvHandler
     li     $t6, 0x004          # this should represent the SLLV func.
     beq        $t3, $t6, sllvHandler   # if it matches go to sllvHandler   
     andi       $t3, $t2, 0x3F
     li     $t6, 0x03               # this should represent the SRA func.
     beq        $t3, $t6, sraHandler    # if it matches go to sraHandler
     li     $t6, 0x02               # this should represent the SRL func.
     beq        $t3, $t6, srlHandler    # if it matches go to srlHandler
     li     $t6, 0x00               # this should represent the SLL func.
     beq        $t3, $t6, sllHandler    # if it matches go to sllHandler    
 #---------------------------------------------------------------------#
 oneOpHandler:
 fourOpHandler:
 eightOpHandler:
 cOpHandler:
 dOpHandler:
 ######
 srlvHandler:
 sllHandler:
 sllvHandler:
 srlHandler:
 sraHandler:

#---------------------------------------------------------------------#
# ~~~AND HANDLER
#---------------------------------------------------------------------#
oaasHandler:
#this handles or, and, sub, add.
    li      $s6, 0xE0000000
    li      $t6, 0x03E00000
    and     $t3, $t6, $t2       # mask out s register   
    srl     $t3, $t3, 5     # move s into the corresponding spot for ARM
    li      $t6, 0x001D0000 # set t6= 29 in position
    bne     $t3, $t6, oRnSecCheck
    li      $s6, 0xE00D0000 # if it is == then set rn in arm to 13
    j       oaasRmReg           
 oRnSecCheck:
    li      $t6, 0x001F0000
    bne     $t3, $t6, oRnThirdCheck
    li      $s6, 0xE00E0000
    j       oaasRmReg
oRnThirdCheck:
     li     $t6, 0x000D0000
     slt        $t6, $t3, $t6
     bne        $t6,    $0, oRnNoRegTrans
     # set instruction to MOV R0 R0
     li     $s6, 0xE1B00000
     j      setTables
 oRnNoRegTrans:
     or     $s6, $s6, $t3
     j      oaasRmReg
 #-----------------------------------------------------------------#
 # this next part deals with the rm register
 #-----------------------------------------------------------------#
 oaasRmReg:
     li     $t6, 0x001F0000 # prepare the mask
     and        $t3, $t2, $t6       # mask out Rm
     srl        $t3, $t3, 16        # move s into position for arm 
     li     $t6, 0x0000001D # set t6= 29 in position
     bne        $t3, $t6, oRmSecCheck
     li     $t3, 0x0000000D # if it is == then set rn in arm to 13
     or     $s6, $s6, $t3       # set corresponding bits to 13
     j      oaasRdReg           
 oRmSecCheck:
     li     $t6, 0x0000001F
     bne        $t3, $t6, oRmThirdCheck
     li     $t3, 0x0000000E
     or     $s6, $s6, $t3       # set corresponding bits to 14
     j      oaasRdReg
 oRmThirdCheck:
     slti       $t6, $t3, 0x0000000D
     bne        $t6,    $0, oRmNoRegTrans
     # set instruction to MOV R0 R0
     li     $s6, 0xE1B00000
     j      setTables
 oRmNoRegTrans:
     or     $s6, $s6, $t3
     j      oaasRdReg
 #-----------------------------------------------------------------#
 # this next part deals with the rd register
 #-----------------------------------------------------------------#
 oaasRdReg:
     li     $t6, 0x0000F800 # prepare the mask
     and        $t3, $t2, $t6       # mask out Rm
     sll        $t3, $t3, 1     # move s into position for arm 
     li     $t6, 0x0001D000 # set t6= 29 in position
     bne        $t3, $t6, oRdSecCheck
     li     $t3, 0x0000D000 # if it is == then set rn in arm to 13
     or     $s6, $s6, $t3       # set corresponding bits to 13
     j      oaasSetOpCode           
 oRdSecCheck:
     li     $t6, 0x0001F000
     bne        $t3, $t6, oRdThirdCheck
     li     $t3, 0x0000F000
     or     $s6, $s6, $t3       # set corresponding bits to 14
     j      oaasSetOpCode
 oRdThirdCheck:
     li     $t6, 0x0000D000
     slt        $t6, $t3, $t6
     bne        $t6,    $0, oRdNoRegTrans
     # set instruction to MOV R0 R0
     li     $s6, 0xE1B00000
     j      setTables
oRdNoRegTrans:
    or      $s6, $s6, $t3
    j       oaasSetOpCode
 oaasSetOpCode:
    # this is a switch statement similar to the main switch to set opcode
    # for oaas cases
    andi        $t3, $t2, 0x7FF
    li      $t6, 0x024          # AND
    bne     $t6, $t3, oOROpCode 
    j       setTables               # go straight to setTables because opcode = 0000
 oOROpCode:
    li      $t6, 0x00000025
    bne     $t6, $t3, oADDOpCode    # OR opcode
    li      $t3, 0x01800000
    or      $s6, $s6, $t3           # place theopcode in the arm instruction
    j       setTables
 oADDOpCode:
     li     $t6, 0x00000020     # AND opcode
     bne        $t6, $t3, oSUBOpCode    
     li     $t3, 0x00800000
     or     $s6, $s6, $t3           # place theopcode in the arm instruction
      j     setTables
 oSUBOpCode:
     #li        $t6, 0x00000022
     # here we will probably want to add a bne and maybe branch to srlv or sllv
     # once we understand how to handle them
     li     $t3, 0x00400000
     or     $s6, $s6, $t3
     j      setTables

 #---------------------------------------------------------------------#
 # ~~~JR HANDLERctions that we will be needing are listed below.
 #---------------------------------------------------------------------#
 jRHandler:
     move       $s7, $0             # set the branch flag to 0 (off)
     li     $t6, 0x03E00000
     and        $t3, $t6, $t2           # mask out the s register
     srl        $t3, $t3, 21            # move it to least significant bits
     li     $t6, 0x0000001D     # here we check if the register is 13
     bne        $t3, $t6, secondCheck   # if it isnt move to next check
     li     $s6, 0xE12FFF1D     # if it is this is the ARM translation store in s6
     # now we have to put the word into the arm table and save the address in the 
     # mips to arm table and set the equivalent offset in the branchtable to 0
     j      setTables
 secondCheck:
     li     $t6, 0x0000001F     
     bne        $t3, $t6, thirdCheck    # if the register isnt 31 jump to noRegTrans
     li     $s6, 0xE12FFF1E     # else this is the ARM translation
     # now we have to put the word into the arm table and save the address in the 
     # mips to arm table and set the equivalent offset in the branchtable to 0
     j      setTables
 thirdCheck:
     slti       $t6, $t3, 0xD           # check if s < 13 t6 = 1 else t6 = 0
     bne        $t6, $0, noRegTrans
         li     $s6, 0xE1B00000
     j      setTables
 noRegTrans:
     li     $s6, 0xE12FFF10
     or     $s6, $s6, $t3           # or the register number into the format 
     j      setTables               # then jump to set Tables
 #-------------------------------------------------------------------#

 setTables:
     bne        $s7, $0, branchSetTables
     addi       $s4, $s4, 4
     addi       $s5, $s5, 1         # ARMcounter++
     sw     $s6, 0($s4)         # place the ARM instruction in the      ARM array
     sw     $s4, 0($s2)         # store the ARM tables address in miptoarm
     sw     $0, 0($s3)          # stores a 0 in the branch table
     j      nextWord
 branchSetTables:
 done:
    move        $v0, $s5
    la      $t0, armArray
    lw      $v1, 0($t0)
    lw  $ra, -4($fp)        # prep the frame
    lw  $s8, -8($fp)        # prep the frame
    lw  $s1, -12($fp)       # prep the frame
     lw $s2, -16($fp)       
     lw $s3, -20($fp)
     lw $s4, -24($fp)
     lw $s5, -28($fp)
     lw $s6, -32($fp)
     lw $s7, -36($fp)
     addu   $sp, $sp, 40        # pop 
     lw $fp, -4($sp)    
     jr     $ra 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:22:12.120

您正在读取或写入或分支到非 32 位对齐的位置。不正确的指令从地址 0x00400140 开始，这可能是距程序开头的 0x140 字节。[尝试在调试器](http://courses.missouristate.edu/kenvollmar/mars/help/MarsHelpDebugging.html)中运行您的代码，并在地址 0x00400140 处放置一个断点。

# javascript - 为鼠标事件问题提供替代解决方案

> ID：13654025
> 
> 赞同：-1
> 
> 时间：2012-11-30T22:20:03.333
> 
> 标签：javascript, jquery, html, clipboard

我正在研究剪贴板功能，但我面临一些与鼠标事件相关的问题。

在下面的代码片段中，我的剪贴板功能仅在我删除`label tag`和 `style="display:none" class="hide"`.

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Copy to Clipboard with ZeroClipboard, Flash 10 and jQuery</title>
    <link href="_assets/css/Style.css" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
    <script src="_assets/js/ZeroClipboard.js" type="text/javascript"></script>
    <script type="text/javascript">
        function myfunc2() {
            var selectedobj = document.getElementById('texter');
            if(selectedobj.className=='hide'){  //check if classname is hide 
                selectedobj.style.display = "block";
                selectedobj.readOnly=true;
                selectedobj.className ='show';
            } else {
                selectedobj.style.display = "none";
                selectedobj.className ='hide';
            }
        }
    </script>    
    <script type="text/javascript">
        jQuery(document).ready(function(){
            var clip = new ZeroClipboard.Client();
            clip.setText('');  
            jQuery('#copy-button').click(function(){
                clip.setText(jQuery('#texter').val());
            });
        });
        $(document).ready(function () {
            var clip = new ZeroClipboard.Client();
            clip.setText(''); // will be set later on mouseDown
            clip.addEventListener('mouseDown', function (client) {
                // set text to copy here
                clip.setText(jQuery('#texter').val());    
                // alert("mouse down"); 
            });
            clip.glue('copy-button');
        });
    </script>
</head>
<body>
    <label  onmouseover="myfunc2()">Click here</label> 
    <textarea name="texter" id="texter"  style="display:none" class="hide"   readonly>sdfdsfsdfgdfdfg</textarea>
    <input type="button" value="Copy to clipboard" id="copy-button" />
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:21:41.867

尝试

```
 $(document).ready(function () {
        var clip = new ZeroClipboard.Client();
        clip.setText('');  
        $('#copy-button').click(function(){
            clip.setText($('#texter').val());
        }); 

        clip.mousedown(function (client) {
            // set text to copy here
            clip.setText($('#texter').val());    
            // alert("mouse down"); 
        });
        clip.glue('copy-button');
    }); 
```

我已经耦合了两个 .ready 函数并删除了第二个 ZeroClipboard.Client() 实例，因为它不再需要了。我还以不同的方式绑定了 mousedown 事件，有关详细信息，请参阅 jQuery [mousedown() 文档](http://api.jquery.com/mousedown/)。

并引入更新版本的 jquery 来改变它；[http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js) 到； [http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js)

# c++ - 生成随机测试

> ID：13654028
> 
> 赞同：1
> 
> 时间：2012-11-30T22:20:15.560
> 
> 标签：c++, bash

我正在使用 ubuntu 10.10，我想用几个随机测试来测试我的 C++ 程序，所以我想生成它们。我写了生成器：

```
// gen.cpp
#include <iostream>
#include <cstdio>
#include <ctime>
#include <cstdlib>

using namespace std;

int main() {
  srand(time(NULL));
  int n=rand()%100;
  int k=rand()%n+1; 

  printf("%d %d\n", n,k);
  for(int i=0; i<n; i++) {
    int a = rand()%100;
    printf("%d\n", a);
  } 

  return 0;
} 
```

然后在终端输入：

```
for((i=0; i<10; i++)); do ./gen > $i.in; done 
```

但结果是所有 *.in 文件都包含相同的数字。当我输入：

```
./gen > 0.in
./gen > 1.in 
```

依此类推，然后一切正常 - 所有 *.in 文件都不同。但我不想每次需要它们时都手动创建它们。我想循环执行此操作。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:22:34.883

你需要在你的`bash`循环中放一个延迟，这样它就不会每次都使用相同的种子。因为您将`time()`其用作种子，所以同一秒内的所有执行都会为您提供相同的序列。

A`sleep`应该可以解决问题，例如：

```
for((i=0; i<10; i++)); do ./gen > $i.in; sleep 2; done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T22:25:29.020

这是因为当您从`time()`（整数秒）播种随机数时 - 如果您在同一秒内多次运行程序，您将获得相同的结果。

如果你想要不同的数字，你应该使用在运行之间不同的种子。

请注意，如果您只想生成一个随机数列表并且您在 linux 上，则设备`/dev/urandom`（非阻塞）或`/dev/random`（阻塞）可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T22:38:39.317

使用更高质量的新 C++11 版本更改旧 C 随机数生成器的使用：

```
// gen.cpp
#include <iostream>
#include <cstdio>
#include <random>

using namespace std;

int main() {
    std::random_device rd;
    std::mt19937 gen(rd());
    std::uniform_int_distribution<> dis;

    int n = dis(gen) %100;
    int k = dis(gen) % n + 1;

    printf("%d %d\n", n, k);
    for (int i = 0; i != n; ++i)
    {
        int a = dis(gen) % 100;
        printf("%d\n", a);
    }

    return 0;
} 
```

# android - 当列表视图位于线性布局内时，使列表视图中的每个项目出现

> ID：13654035
> 
> 赞同：0
> 
> 时间：2012-11-30T22:20:49.443
> 
> 标签：android, listview, android-listview

我有`ExpandableListView`几个月。每个月里面都有一天，每一天都有一个事件列表。这是描述应该如何显示每一天的 xml 文件：

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:id="@+id/expandlist_item_dias"
        android:gravity="center_vertical">

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:id="@+id/list_item_text_child"
              android:textSize="20sp"
              android:padding="10dp"
              android:layout_marginLeft="5dp"/>

    <ListView
        android:id="@+id/listaEventosDia"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        />
</LinearLayout> 
```

问题是只显示每天的第一个事件（不要介意重复的事件）：![在此处输入图像描述](../Images/365d21ca61b686f62b6b0ea45978f125.png)

我怎样才能使`ListView`身高足够展示每一个事件？编辑：

这是列表适配器`ExpandableListView`：

```
public class AdaptadorListaMeses extends BaseExpandableListAdapter {

    public ArrayList<Mes> meses;

    public Context context;

    public AdaptadorListaMeses(Context context, ArrayList<Mes> meses) {
        super();
        this.context = context;
        this.meses = meses;
    }

    @Override
    public Object getChild(int arg0, int arg1) {
        return meses.get(arg0).dias.get(arg1);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 100*groupPosition + childPosition;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view, ViewGroup parent) {
        Dia child = (Dia) getChild(groupPosition, childPosition);
        if (view == null) {
            LayoutInflater infalInflater = (LayoutInflater) context
                    .getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = infalInflater.inflate(R.layout.expandlist_item_dias, null);
        }

        TextView tv = (TextView) view.findViewById(R.id.list_item_text_child);
        tv.setText(child.nombre);
        tv.setTag(child.nombre);
        ListView lv = (ListView) view.findViewById(R.id.listaEventosDia);

        ArrayAdapter<Evento> adapter = new ArrayAdapter<Evento>(context, android.R.layout.simple_list_item_1, android.R.id.text1, child.eventos);

        lv.setAdapter(adapter); 

        return view;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return meses.get(groupPosition).dias.size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return meses.get(groupPosition);
    }

    @Override
    public int getGroupCount() {
        return meses.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View view, ViewGroup parent) {
        Mes group = (Mes) getGroup(groupPosition);
        if (view == null) {
            LayoutInflater inf = (LayoutInflater) context
                    .getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = inf.inflate(R.layout.expandlist_grupo_meses, null);
        }
        TextView tv = (TextView) view.findViewById(R.id.list_item_text_view);
        tv.setText(group.nombre);
        return view;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

} 
```

# android - 如何使用 Android Activity 修复“调用需要 API 级别 11”？

> ID：13654039
> 
> 赞同：8
> 
> 时间：2012-11-30T22:21:14.310
> 
> 标签：android, eclipse

我刚开始做 Android 开发，或多或少遵循[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)教程，有一件事一直困扰着我：我有两个类，均使用“Android Activity”创建向导创建：

```
public class PlacesActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_places);
        // I manually commented out the following line to get it to compile.
        // getActionBar().setDisplayHomeAsUpEnabled(true);
    }
    // ... other methods
} 
```

和

```
public class ShowOnePlace extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_show_one_place);
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
    // ... other methods
} 
```

Eclipse 不断给我以下错误：

> 调用需要 API 级别 11（当前最低为 8）：android.app.Activity#getActionBar
> 
> 调用需要 API 级别 11（当前最低为 8）：android.app.ActionBar#setDisplayHomeAsUpEnabled

直到我注释掉*其中*一行（如上所示）。现在，该应用程序*似乎*可以在我的 Android 设备上编译和运行而没有错误。（好吧，至少没有*那个*错误）。

所以：

*   为什么`getActionBar().setDisplayHomeAsUpEnabled(true);`在一个类中给出该错误，但在另一类中完全相同的行不是错误——甚至不是警告？
*   “Android Activity”创建向导中是否存在错误，并且不知何故该`getActionBar().setDisplayHomeAsUpEnabled(true);`语句在一个活动中是错误的，但在另一个活动中却完全没问题？
*   Eclipse Lint 中是否存在错误，并且该语句在两个活动中实际上都可以（或者在两个活动中可能都是错误的）？
*   我该怎么做才能在不将 minSdkVersion="8" 更改为 minSdkVersion="11" 的情况下解决此问题？我的印象是“android-support-v4.jar”文件是一个在版本 8 设备上运行的兼容性库，用于处理在版本 11 设备中本机处理的内容。
*   当我看到此错误时，真正正确的做法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-04-29T08:44:25.940

使用`getSupportActionBar()`而不是`getActionBar()`. 这将在低于 11 的 API 级别上提供[ActionBar功能。](http://developer.android.com/reference/android/app/ActionBar.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-30T23:01:58.530

简而言之，Action Bar 在旧版本的 Android 中不可用，并且 google 的支持库也不提供该功能。这就是 lint 抱怨的原因 - 您正在使用 API 版本 8 中不存在的代码，该版本设置为您的应用支持的最低 API 级别。如果你想在旧的 android 版本上使用操作栏，请使用名为“Action Bar Sherlock”的开源库。

现在来回答你的问题

1.  这应该是两个类中的错误。在其中一个类中它不是错误的原因实际上并不重要。
2.  不
3.  这两个活动都是错误的
4.  您必须使用在较旧的 android 版本上提供操作栏的开源库，即 ActionBar Sherlock 非常适合此目的
5.  真正正确的做法是打开 Android Developers 网站并阅读支持库的限制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-14T14:55:19.757

如果您使用 appcompat-v7 及更高版本，则不能使用 actionbarsherlock，因为两者都定义了相同的属性。所以这个库有资源冲突。

使用您需要的支持库来做到这一点：（我希望您已经下载并在您的项目中集成了支持库）

1.  您必须使用支持库中的 ActionBar，因此您必须使用正确的 ActionBarActivity 实现来扩展您的活动。

**进口：**

```
import android.support.v7.app.ActionBarActivity;
import android.support.v7.app.ActionBar; 
```

**活动：**

```
public class PlacesActivity extends ActionBarActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_places);
        // I manually commented out the following line to get it to compile.
        // getActionBar().setDisplayHomeAsUpEnabled(true);
    }
    // ... other methods
} 
```

因此您可以从旧版本支持的 Activity 中获取 actionBar 实现：

```
 ActionBar actionBar = activity.getSupportActionBar(); 
```

编写代码并玩得开心！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-02T21:32:01.560

我通常用“@TargetApi(12)”注释来修复它

```
 @TargetApi(11)
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_show_one_place);
      getActionBar().setDisplayHomeAsUpEnabled(true);
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T22:28:04.310

```
Why is "getActionBar().setDisplayHomeAsUpEnabled(true);" give that error in one class, but that exact same line is not an error -- not even a warning -- in the other class? 
```

只需编辑第二个文件并保存。会报错！

```
Is there a bug in the "Android Activity" creation wizard, and somehow that "getActionBar().setDisplayHomeAsUpEnabled(true);" statement is wrong in one activity, but perfectly fine in the other? 
```

或许

```
Is maybe there a bug in Eclipse Lint, and that statement is actually OK in both activities (or perhaps wrong in both activities)? 
```

在给定的上下文中都是错误的

```
What do I have to do so that I can fix this without changing minSdkVersion="8" to minSdkVersion="11"? I was under the impression that the "android-support-v4.jar" file was a compatibility library that ran on version 8 devices to handle stuff that's handled natively in version 11 devices. 
```

你需要改变`minSDK`我猜没有其他选择。如果你想使用`Functions`API 11

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-27T16:27:56.897

只需在 androidmanifest 中进行更改

作为

```
<uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="18" /> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-06-28T13:38:06.377

issue is when you create an android app in eclipsyou have asked to select min and max api support and by default eclips select 8 as min and 19 as max if you encounter above error means the function you are using is of version which is greater then 8
to resolve this issue i just go in AndroidManifest.xml file and change following

```
<uses-sdk
        android:minSdkVersion="19"
        android:targetSdkVersion="19" /> 
```

minsdkversion by default is 8

# php - 使用 PHP 读取 Wordpress 目录

> ID：13654042
> 
> 赞同：0
> 
> 时间：2012-11-30T22:21:25.357
> 
> 标签：php, wordpress, plugins, opendir

我正在编写 Wordpress 插件，但在读取目录中的文件时遇到问题。该脚本在 wordpress 之外运行良好，我不确定问题是什么。

```
$thumbPath = '../wp-content/uploads/images/thumbs'; 

//added for debugging
$link = $thumbPath . '/1.jpg';
echo " <a href='" . $link . "'>Link</a><br />";

if ($handle = opendir($thumbPath)) 
{  
    echo "here";
} 
```

该链接有效，并将我直接带到图像。我已经尝试了所有我能想到的路径。我[查看了使用 PHP 从目录中读取图像](https://stackoverflow.com/questions/3539978/read-images-from-a-directory-using-php)，从我所看到的一切来看，它应该可以工作！

有任何想法吗？

**编辑** 这是我所做的代码更改，试图解决这个问题：

```
$upload_dir = wp_upload_dir();
$thumbPath =  realpath($upload_dir['baseurl']) . "/images/thumbs";
echo " <img src='" . $thumbPath . "/1.jpg' /><br />";

if ($handle = opendir($thumbPath)) 
{  //if the directory exists open
    echo "here";
}
else
{
    echo "<br />The damn thing isn't working.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:25:51.090

试试这个：

```
if ($handle = opendir($thumbPath)) 
```

它可能会有所帮助。

**Edit:** (Some additional explanation) Variables in single quotes are treated as an ordinary text, and because of that, you're trying to open a directory called *$thumbPath*, which I suppose doesn't exist.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:14:13.667

I'm not sure what I did, but it's working now.

```
$path = "../blog/wp-content/uploads/images";
$thumbPath = $path . "/thumbs";
$fullPath = $path . "/full";

if ($handle = opendir($thumbPath)) 
```

I'd already tried that url, but maybe I had a missed typo.

# sql-server - 删除/重命名 app_offline.htm 导致 100% CPU 使用率

> ID：13654053
> 
> 赞同：3
> 
> 时间：2012-11-30T22:22:51.660
> 
> 标签：sql-server, performance

当我对站点进行更改时，我经常使用 app_offline.htm 向用户显示消息。我的工作流程是这样的：

1.  重命名 OFF_app_offline.htm -> app_offline.htm
2.  对网站进行更改
3.  重命名 app_offline.htm -> OFF_app_offline.htm

有时当我执行第 3 步时，网站重新上线，但服务器突然使用了 100% 的 CPU，因此运行速度非常慢，`iisreset.exe`需要运行才能使其再次正常运行。分别使用大约 50% CPU 的两个进程是`w3wp.exe`和`sqlservr.exe`。通常，服务器的 CPU 使用率约为 20%。

我没有运行我的 VPS 帐户的权利，`iisreset.exe`因此我必须联系我的托管服务提供商并让他们这样做。这很耗时，同时，我的网站用户对速度慢感到沮丧！

为什么会这样？我能做些什么来阻止它的发生？我可以建议服务器上是否有任何设置可以阻止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:38:58.163

删除 app_offline.htm 文件后，应用程序的下一个请求将导致 ASP.NET 再次加载应用程序和应用程序域，并且生活将照常继续。

它应该在一段时间内加热 cpu，但不要长时间加热。

尝试在 IIS 上为此应用程序增加此应用程序池的工作进程，这样不仅一个 w3wp.exe 进程会承担所有负载。

**编辑：**

尝试更改会话配置。我不知道您对会话状态使用什么存储选项（我猜是由于 sql server 进程负载而导致的 sql-state），但也许您可以尝试更改它：

检查以下链接：

[会话状态模式](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)

# php - 如何使用 PHP 基于数组值替换数组项？

> ID：13654058
> 
> 赞同：0
> 
> 时间：2012-11-30T22:23:08.760
> 
> 标签：php, arrays, sorting, multidimensional-array, conditional

我正在寻找一种在我的网站上显示社交媒体图标的方法。我的图标会根据社交媒体服务交替显示颜色。

1.  优先级 1 - 按交替颜色对数组项进行排序。
2.  优先级 2 - 按颜色组排序。

如果它可以有两个条件检查，我希望它。

首先尝试按交替颜色排序。但是，可能有 3 个银色图标而只有 1 个蓝色图标。

其次，如果交替颜色不起作用。如果它只是按颜色聚集图标，我会更喜欢。所以我可能首先有 1 个蓝色图标，然后是 3 个银色图标。

**这是我的图标数据数组：**

```
Array
(
    [0] => Array
        (
            [service] => twitter
            [url] => https://twitter.com/1/
            [color] => silver
        )

    [1] => Array
        (
            [service] => google_plus
            [url] => https://plus.google.com/2/posts
            [color] => silver
        )

    [2] => Array
        (
            [service] => facebook
            [url] => https://www.facebook.com/3/
            [color] => blue
        )

    [3] => Array
        (
            [service] => linkedin
            [url] => http://us.linkedin.com/company/4/
            [color] => blue
        )

    [4] => Array
        (
            [service] => youtube
            [url] => http://www.youtube.com/user/5/
            [color] => silver
        )

) 
```

我不一定要为我的问题寻找完整的代码解决方案。或多或少只是在寻找有关如何实现此目标或应该使用哪些功能的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:33:22.573

创建几个新的空数组，命名为您要查找的颜色。`foreach`通过原始数组并在正确的数组中输入原始数组的索引（如果是银色图标，请在`$silver`数组中输入）。

你应该最终得到类似的东西：

```
$silver = array(0, 1, 4);
$blue = array(2, 3); 
```

一旦你有了这些新数组，就对它们进行计数，如果一个与另一个的距离超过 1 位，则交替将不起作用。只需在另一个数组之前输出一个数组的索引。

如果图标可以交替，只需从较大的一个中输出一个条目，然后另一个，并交替直到两者都为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:44:44.017

你可以试试

```
$silver = array_filter($data,function($v){ return $v['color'] == "silver" ;});
$blue = array_filter($data,function($v){ return $v['color'] == "blue" ;});

foreach(array_map(null, $silver,$blue) as $set)
{
    foreach($set as $var)
    {
        printf("<a href=\"%s\" style=\"color:%s;\">%s</a> <br />",$var['url'],$var['color'],$var['service']);
    }
} 
```

# assembly - nand 2俄罗斯方块ASM“预期表达”

> ID：13654066
> 
> 赞同：3
> 
> 时间：2012-11-30T22:23:33.727
> 
> 标签：assembly, nand2tetris

我目前正在尝试完成*Nand 到俄罗斯方块*课程 ( `Fill.asm`) 第 4 章中的项目。但是，Assembler 给了我以下错误：

> “在第 3 行，预期表达式”

我不确定我做错了什么......但下面是我拥有的代码片段：

```
@i
M=1
@sum
M=8192
(END)
@END
0,JMP 
```

谁能告诉我为什么我在第 3 行 ( `@sum`) 上收到此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:52:21.103

我不知道为什么第 3 行会出现错误，但是您不能直接在第 4 行将值设置为内存地址。您可以像第 2 行一样强制将“1”从 ALU 中取出，但是没有先输入它就无法强制输入“8192”。您必须首先将“8192”的值分配给 A 寄存器，然后将 A 寄存器存储到 D 寄存器，然后选择内存地址，然后将 D 寄存器存储在那里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-16T04:34:52.410

您看到的错误是因为您不能将值“8192”直接放入@sum。

这是我为解决这个问题而编写的代码：

```
@8192  // number of pixels on a screen divided by 16-bit address (256 x 512 / 16)
D=A    // D = total number of pixels
@sum
M=D    // assigns sum with value of 8192 
```

# ruby - 非阻塞 ruby UNIXSocket

> ID：13654069
> 
> 赞同：1
> 
> 时间：2012-11-30T22:24:02.493
> 
> 标签：ruby, sockets, eventmachine, celluloid

*序言：显然，我太愚蠢了。*

我想`UNIXSocket`在 Ruby 中公开一个简单的命令，它接受来自连接客户端的单个命令，而不会在处理时阻塞进一步的连接，直到套接字关闭（STDLIB 套接字会这样做），包括在 X 秒内不发送任何命令的客户端超时。我还想要的是`Etc.getpwuid(socket.getpeereid.first).name`，或者：获取连接到该套接字的用户的用户名。

因为默认`UNIXSocket`阻止了所有进一步的连接，所以我尝试使用 EventMachine 和赛璐珞来做到这一点：

**EventMachine：** 多个连接就像一个魅力，但没有办法访问客户端的`UID`. 此外，即使您可以设置客户端超时，文档也没有说明何时实际触发。这种体验特别令人沮丧：`EventMachine`(like `get_peername`) 上的某些方法没有记录在任何 googleable API 文档中，因为它们隐藏在本机扩展中。`getpeereid`不幸的是，即使在 C 代码中，EventMachine 中也没有等价物，所以我最终放弃了这一点。

**赛璐珞：**我打开了一个常规的 UNIXSocket，然后将所有打开的连接传递给`async`赛璐珞监听器。这也一直在接受连接，但是当我尝试结束服务器进程时，赛璐珞线程无法关闭（ ） ，`Terminating X actors`即使我在我的方法（称为 via ）中做得正确。唯一能弥补这一点的是。因为赛璐珞的文档告诉我，我也尝试了[回声服务器示例](https://github.com/celluloid/celluloid-io/blob/master/examples/echo_unix_client.rb)，但这给了我需要的相同结果。`socket.close``Actor.current.terminate``listen``async.listen``kill -9`[`celluloid-io`](https://github.com/celluloid/celluloid-io/blob/master/examples/echo_unix_client.rb)`kill -9`

我一直在考虑启动我自己的处理程序线程解决方案，但这些解决方案缺少自动超时，我希望有人已经解决了这个看似基本的问题。

我希望我在这里遗漏了一些东西。到目前为止，我的印象是 Ruby 上的 Unix 套接字缺少最基本的成分：/

# javascript - Javascript 中的 Soundcloud 持久连接

> ID：13654071
> 
> 赞同：1
> 
> 时间：2012-11-30T22:24:17.960
> 
> 标签：javascript, api, authentication, persistence, soundcloud

我只是无法理解 SDK 文档，缺少太多内容。

我已经启动了一个连接，这很好，并且可以检索我的用户详细信息。但是，如果我刷新页面，我会失去连接。我想这是因为我没有以任何方式保持连接。我找不到任何有关如何执行此操作的文档。我是在 cookie 中存储一些东西，还是什么？

这是我的连接代码：

```
SC.initialize({
    client_id: "XXXX",
    redirect_uri: "YYY",
});

// initiate auth popup
function connectSC(){
SC.connect(function() {
  SC.get('/me', function(me) { 
      //get my favourites
          getFavourites();
  });
});
} 
```

有什么想法可以确保我的连接保持不变，这样如果我引用页面，我仍然可以调用 SC.get，而不必先执行 SC.connect？

任何帮助将非常感激

问候詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:29:53.460

您只需要`SC.isConnected()`在开始时检查。这是在页面之间持久存在的，应该可以解决问题。[https://github.com/soundcloud/soundcloud-javascript/blob/master/src/sc/connect.coffee#L52](https://github.com/soundcloud/soundcloud-javascript/blob/master/src/sc/connect.coffee#L52)

```
if (SC.isConnected()) {
  doCoolStuffWithTheAPI();
} else {
  SC.connect(function () {
    doCoolStuffWithTheAPI();
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:39:43.313

我对那个soundcloud api不太了解，但我怀疑它是否可以做你想做的事。

http-request 是自包含的，因此刷新页面会产生带有新渲染的新请求，并且您可能需要新的连接。

这就是 ajax 如此受欢迎的主要原因之一，您不需要刷新页面。

# database - GeoIP 查找——选项和数据持久性

> ID：13654073
> 
> 赞同：2
> 
> 时间：2012-11-30T22:24:51.387
> 
> 标签：database, rest, location, geoip

试图确定 GeoIP 查找的最佳解决方案。

选项似乎是：
1\. 下载高级数据库并进行查找
2\. 下载免费数据库并进行查找
3\. 使用免费的 Web API
4\. 使用付费的 Web API。

我们将不得不在用户登录时执行此操作，因此它会经常发生。

一个重要的问题是 IP 地址位置是否改变，如果改变，频率如何。例如，我们可以使用免费的 Web API 构建自己的数据库，存储它返回给我们的每个 IP 位置，但这只有在它们相对持久的情况下才可行。

此外，我们正在查看的付费数据库每月更新一次，这取决于这些更改是否/多久，可能还不够。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:27:30.297

无法保证某个位置的持久 IP 有多长。实际上有一些公司充当 IPv4 地址的经纪人，因为我们的 IPv4 地址已经开始不足。MIT 拥有的 18.0.0.0/8 可能已经在一个地方存在了 30 年。其他人可能已经移动了很多。

至于维护来自某种 Web API 的地址的本地缓存，我建议不要这样做。如果你做一个 1:1 IP->lat/long 表，那么你说的是总共 2^32 个条目，每个条目 50 个字节 = 200GB。显然，这些可以被压缩到子网等中，但现在你开始做 GeoIP 公司非常擅长的工作并且有一个重要的开端。Debian 附带的免费 IP->Country 数据库仅安装在我的机器上 5MB。

从程序员生产力的角度来看，很难在速度和可靠性方面击败具有客户端库的可下载数据库。

MaxMind 拥有 IP->Country 和 IP->City 的免费数据库，但您必须在您的网站/产品上注明“此产品包含 MaxMind 创建的 GeoLite 数据，可从[http://www.maxmind.com](http://www.maxmind.com)获得”与其说是技术决策，不如说是商业决策。

# php - 按值查找索引

> ID：13654076
> 
> 赞同：-1
> 
> 时间：2012-11-30T22:24:58.913
> 
> 标签：php, json, getjson

大家晚上好。

首先，我为这个问题的长度道歉。我想彻底，并确保所有信息都与我的意图一起出现。

我目前正在寻找一种简单的基于 Web 的方法来从我的一个桌面应用程序中收集统计信息。这样做的主要目的是进行故障排除，并通过更新给最终用户提供更多相关的修复和功能添加。

**细节**

*   我将使用 PHP 5.2.12，并利用`$_GET`从 URL 中获取参数并将它们分配给变量。
*   然后将这些变量`json_encode`写入文件（称为“statsfile”或“stats 文件”）。
*   其中一个参数/变量将是某种 GUID。这个 GUID 将由我的应用程序根据从硬件 ID 创建的单向哈希生成（尽管在代码示例中，这还没有表示出来）。

**问题**

我面临的问题与在我的 JSON 统计文件中查找特定的 GUID 有关。

这就是我想做的；

*   1) 在 statsfile 中找到提交的 GUID
*   2a) 如果不存在，则向数组添加新索引并填充里面的数据
*   2b）如果确实存在，则用提交的数据覆盖数组内的现有数据

重要的是，最后我留下了一个有效的 JSON 统计文件。脚本相对安全也很重要。

**布局和代码**

我的 JSON 的布局如下；

```
[
    {
        "guid": "spritchard",
        "api": "apichoice",
        "build": "2200",
        "temp1": "1",
        "temp2": "2",
        "temp3": "3"
    },
    {
        "guid": "helloworld",
        "api": "someapi",
        "build": "3500",
        "temp1": "4",
        "temp2": "5",
        "temp3": "6"
    }
] 
```

我正在使用的 PHP 代码如下；

```
<?php
$apikey=$_GET["apikey"];
if ($apikey=="apikey8634215")
  {
    $gpuapi=$_GET["api"];
    $buildno=$_GET["build"];
    $temp1=$_GET["temp1"];
    $temp2=$_GET["temp2"];
    $temp3=$_GET["temp3"];
    $guid=$_GET["guid"];

    $statsfile = "./api/application/StatsFile.json"; // Assign the stats file
    $fh = fopen($statsfile, 'a') // 'a' for append, 'w' for write
          or die("Stats File Unavailable");
    $sdata = array('guid' => $guid, 'api' => $gpuapi, 'build' => $buildno, 'temp1' => $temp1, 'temp2' => $temp2, 'temp3' => $temp3);
    fwrite($fh, json_encode($sdata));
    fclose($fh);
    echo json_encode($sdata);

    // reopen stats file to encode data as it should be
//    $cdata = fopen($statsfile, 'r') or die("Stats File Unavailable");
//    $encodedata = fread($cdata, filesize($statsfile));
//    $decodedata = json_decode($encodedata);
//    fclose($cdata);
//    $fh = fopen($statsfile, 'w') or die("Stats File Unavailable");
//    fwrite($fh, json_encode($encodedata));
//    fclose($fh);
  }
else
  {
    die("No Such Usage");
  }
?> 
```

您可以看到我已经`$apikey`习惯检查是否存在特定参数。如果不是，那么整个脚本就会死掉。目前这只是一个占位符设计，以在我开发系统时从基本层面防止滥用，我将在一个单独的问题中研究更合适的解决方案。

被注释掉的区域是我试图用新数据重写文件并使其成为有效 JSON 的代码。我不知道如何在数组中找到正确的 GUID，但我也在努力弄清楚如何重写数据以便将其正确编码为 JSON。取消注释该代码的最终结果是 JSON 中有很多斜杠，并且 JSON 本身无效。此外，我不相信我在这里展示的代码是安全的。无论如何，我可以使用一种`POST`方法，但目前，找出如何根据它的 GUID 更新特定索引是个问题。

**因此，为了澄清我的问题，我将如何从 JSON statsfile 中查找特定的 GUID、更新数据（如果存在）或使用提交的数据添加新的数组索引？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:59:21.067

```
$apikey=$_GET["apikey"];
if ($apikey=="apikey8634215") {
    $newObject = new stdClass();
    $newObject->guid = $_GET["guid"];
    $newObject->api = $_GET["api"];
    $newObject->build = $_GET["build"];
    $newObject->temp1 = $_GET["temp1"];
    $newObject->temp2 = $_GET["temp2"];
    $newObject->temp3 = $_GET["temp3"];
    $statsFile = "./api/application/StatsFile.json";
    $stats = file_exists($statsFile)
        ? json_decode(file_get_contents($statsFile))
        : array()
    ;
    $found = false;
    foreach ($stats as $key => $statItem) {
        if ($statItem->guid == $newObject->guid) {
            $stats[$key] = $newObject;
            $found = true;
            break;
        }
    }
    if (!found) {
        $stats[] = $newObject;
    }
    if (file_put_contents($statsFile, json_encode($stats)) === false) {
        die("Could not save stats");
    }
} else {
    die("No Such Usage");
} 
```

此代码缺少获取参数存在检查，您应该以某种方式验证输入。

# android - 安卓：使用 克隆布局，同时使用相同的 onClick 按钮功能

> ID：13654077
> 
> 赞同：0
> 
> 时间：2012-11-30T22:25:04.237
> 
> 标签：android, layout, include

我想使用一个“动作栏”，就像 Tapatalk 一样。当然，我不想一遍又一遍地复制所有按钮功能。

有没有快速的解决方案来做到这一点？

此外，如果我设置背景可绘制，我希望它在不同的布局中是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:36:20.130

我可以看到两种方法：

*   正如我在评论中所说，让您的所有活动都扩展您的实现 onClick 的基本活动。也许我不喜欢这种方法，因为它会迫使你扩展你的基本活动，如果你将来想要一个列表活动，你可能会遇到一些问题。

或（我认为这要好得多）

*   只需有一个辅助类，它接受活动作为构造函数参数，它将为您设置 onclicks。您必须记住实例化该类（如果您担心创建对象，则调用静态方法），这将为您完成这项工作。

    ```
    public class OnClickHelper implements View.OnClickListener {
       Activity mActivity;
       public OnClickHelper(Activity a){
           mActivity = a;
       }   

       public setClickListeners(){
           Button b = (Button) mActivity.findViewById(R.id.Button1);
           b.setOnClickListener(this);
       }

       @Override
       public void onClick(View view) {
          switch(view.getId()){
             case R.id.button1:

             break;
          }
       } 
    ```

    }

关于背景，选择风格。让所有你想拥有相同背景的活动使用相同的样式（你可以在清单中定义它）。

# tfs - 如何让我的新迭代显示在 Team Foundation Server 2010 的报告服务报告标准中？

> ID：13654080
> 
> 赞同：1
> 
> 时间：2012-11-30T22:25:22.290
> 
> 标签：tfs

我于 2012 年 11 月 23 日在我的团队基础服务器上创建了迭代“文件列表创建器 2.0.0.0”。然后我在它下面创建了一堆任务，并在接下来的一周内完成了它们。现在是 2012 年 11 月 30 日。下面是我的迭代树的图像：

![在此处输入图像描述](../Images/97bcb5f284befb99d5247aa115f1a204.png)

我进入 Team Foundation Server 报告服务查看我的燃尽图，我一周前创建的新迭代没有显示在列表中：

![在此处输入图像描述](../Images/20d0712c79f817f0ab3f33b56feef747.png)

我什至上服务器，通过 TFS Web 服务重新运行报表分析服务和仓库分析服务。它仍然没有显示。那么如何让它更新呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:50:34.987

由于某种原因，分析数据库似乎没有正确更新重建。如果通过 Web 服务完全重建，我会建议：

1) 最简单的方法是进入服务器并浏览到 Web 服务：`http://localhost:8080/tfs/TeamFoundation/Administration/v3.0/WarehouseControlService.asmx`

2) 点击“流程仓库”。

![不。 2](../Images/edf7cd2574cdd7873019300caec6cdf9.png)

3) 为参数“collectionName”写入“DefaulCollection”（或您的集合的名称），然后单击“Invoke”。

![不。 3](../Images/659c49a104c6aa7b81aa1c8137b7f7b7.png)

4）这是你应该看到的：

![不。 4](../Images/cf9d074327b94daf67f8677a8f6eaf46.png)

5) 返回：`http://localhost:8080/tfs/TeamFoundation/Administration/v3.0/WarehouseControlService.asm`x 并单击“ProcessAnalysisDatabase”。

![不。 5](../Images/bd1fbaa03142d80ad7f524100c3ee1de.png)

6) 对于参数“processingType:”，写入“Full”并单击“Invoke”。

![不。 6](../Images/9a48d25367684265602dd907f04ff074.png)

7）这是你应该看到的：

![不。 7](../Images/cf9d074327b94daf67f8677a8f6eaf46.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:59:32.370

另一种选择是所有其他人都用尽了，是直接“重新处理”分析数据库：

![在此处输入图像描述](../Images/fb6b4894ec7a85efc08fceabc853e31a.png)

# ios - 我们可以在 iOS 6 自动布局生成的帧上产生 CGRectIntegral 的效果吗？

> ID：13654083
> 
> 赞同：18
> 
> 时间：2012-11-30T22:25:29.957
> 
> 标签：ios, autolayout

iOS 6 自动布局非常方便。但是，自动生成的帧可能具有非整数值。如何使用自动布局强制最终帧位置和大小的整数输出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-06T14:28:03.667

AutoLayout 比你想象的更聪明。

虽然自动生成的帧确实可以具有小数值，但它们会四舍五入以匹配设备的像素比率。在配备 Retina 显示屏 (2x) 的设备上，允许使用 0.5 的分数。在较旧的设备上，似乎根本没有任何小数值。

**这意味着您将始终获得像素完美的布局。**

不过，我花了很长时间才弄清楚这一点。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T17:51:31.297

我无法回答您的问题，除非您接受***no***作为答案。

我在使用手动布局时遇到了类似的问题，而不是使用自动布局。我的解决方案可能对某人有用。

此代码会将坐标四舍五入到*屏幕比例*。换句话说，在标准显示上显示为整数，在 Retina 上显示为一半 (0.5; 1; 1.5; ...)。

```
CGFloat roundToScreen(CGFloat value) {
    CGFloat scale = [[UIScreen mainScreen] scale];
    CGFloat result = round(value * scale) / scale;
    // example value: 3.61
    // on standard display: 4
    // on Retina display: 3.5
    return result;
} 
```

以下是`CGRect`,`CGPoint`和的一些辅助函数`CGSize`：[Gist on GitHub](https://gist.github.com/iMartinKiss/5483361)

# jms - 用于测试的基于文件系统的 JMS 代理实现

> ID：13654089
> 
> 赞同：2
> 
> 时间：2012-11-30T22:26:13.600
> 
> 标签：jms, activemq

我有一个 java 应用程序，它从一个 JMS 队列中消费，做一些处理，然后发送到一个输出队列。

在我进行测试时，为输出队列提供基于文件系统的 JMS 实现会非常方便；这样发送给它的任何消息都会被写入磁盘上的目录。

有谁知道这是否存在？我考虑过切换到像 apache-camel 这样的集成框架，它具有基于文件的端点，但对于我现在需要的东西来说似乎有点矫枉过正。我正在使用 activemq，是否可以配置嵌入式代理来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:32:45.220

无论如何，我都会选择 apache camel。它还为您节省了相当多的样板代码来连接到 activemq。如果您也已经在使用 spring，那么只需添加一个简单的 routebuilder 和一些 xml 配置。罐子本身相当小，因此它的开销很小，以换取很大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:40:19.677

我认为这种测试 jms 相关客户端代码的方法会变得非常复杂。如果您需要监视从应用程序发送的消息，请考虑使用 QueueBrowser。

但是，接收消息的代码必须有某种副作用（否则，它不会有用）。我会根据这些断言而不是检查消息队列。这应该更容易，并且很可能会导致更好的测试。

# asp.net-mvc-3 - IIS 6.0 上的 MVC 3 应用程序：无法读取 AppSettings

> ID：13654094
> 
> 赞同：1
> 
> 时间：2012-11-30T22:26:52.457
> 
> 标签：asp.net-mvc-3, iis-6

我们已经在生产环境的 IIS 6.0 上部署了我们的 Asp.Net MVC 3 应用程序。我们使用以下文章配置了网站。 [http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

我们还尝试更新 dev.config 和 web.config 以将“构建操作”改为“无”而不是“内容”，但无济于事。

系统无法从 Web 应用程序中配置的文件中读取 AppSettings。它似乎只显示一个“WebPostTimeOut”appSettings（我不知道它来自哪里）。

***Web.config 片段：***

```
<appSettings file="dev.config"/>
<system.web>
    <identity impersonate="true" userName="domainname\_webuser" password="_webuser"/>
</system.web> 
```

***开发配置：***

```
<?xml version="1.0"?>
<appSettings>
  <add key="XcacheDataPath" value="c:\cf_web\xcache_datafiles\!eol"/>
  <add key="CacheExpiration" value="120"/>
  <add key="ClientValidationEnabled" value="false" />
  <add key="UnobtrusiveJavaScriptEnabled" value="false" />
</appSettings> 
```

关于我们可能做错什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:21:05.977

尝试运行 aspnet_iisreg。查看日志文件中是否有任何错误。纠正那些错误。您的进程 ID 没有文件的权限、文件不存在或网站的文件夹不存在。

# android - 将 facebook sdk 链接到 android 项目

> ID：13654095
> 
> 赞同：3
> 
> 时间：2012-11-30T22:26:56.827
> 
> 标签：android, facebook, eclipse

在 Eclipse 中创建我的 android 项目并导入 facebook sdk 后，我转到我的 android 应用程序的属性选择 android 并添加 facebook sdk 并单击 OK。然后，当我再次转到属性时，它会在该 facebook sdk 上显示红十字标记。如下图所示：

![在此处输入图像描述](../Images/a593d55307ac0663fb389118780bf2d8.png)

为什么 ？

编辑：我的文件路径位置是：我的 FacebookSDK 在 A:\Workspace\facebook-android-sdk-3.0.2.b\facebook 和我的 android 项目应用程序在 B:\USC\Academic\Web Tech\HWs\no9 \IMDB_Scrapper

将 Facebook sdk 移动到同一个驱动器删除了那个红十字的东西，但给出了新的错误，如下所示：你做到了。但现在出现了一个新错误。正是这个[http://msu-footprints.org/2011/Aditya/sanp1.jpg](http://msu-footprints.org/2011/Aditya/sanp1.jpg)

我应该删除哪个 android 支持 v4 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:40:50.173

在同一驱动器上移动您的 android 项目和 Facebook 库可以说`A:`

然后再次导入。现在您可以添加 facebook 库而不会出错。

# streaming - 在 OSX 上使用 AppleScript 从 iTunes 库中删除歌曲（URL）

> ID：13654096
> 
> 赞同：0
> 
> 时间：2012-11-30T22:27:03.983
> 
> 标签：streaming, applescript, itunes

我正在通过 AppleScript 控制 iTunes，并将 URL 添加到主库（通过`open location "http://..."`）。

有没有办法使用 AppleScript 从库中删除该条目？该 URL 非常独特，因此我不必担心删除用户的其他条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:48:09.280

尝试：

```
tell application "iTunes"
    set myUrls to get every URL track
    repeat with aUrl in myUrls
        if (aUrl's address as text) starts with "http://shiva.6o4.net:" then delete aUrl
    end repeat
end tell 
```

# c++ - 特化一个接受通用引用参数的函数模板

> ID：13654099
> 
> 赞同：10
> 
> 时间：2012-11-30T22:27:06.760
> 
> 标签：c++, templates, c++11, template-specialization, universal-reference

如何专门化采用通用引用参数的函数模板？

foo.hpp：

```
template<typename T>
void foo(T && t)    // universal reference parameter 
```

foo.cpp

```
template<>
void foo<Class>(Class && class) {
    // do something complicated
} 
```

在这里，`Class`不再是推导类型，因此是`Class`精确的；不可能`Class &`，所以参考折叠规则在这里对我没有帮助。我也许可以创建另一个接受`Class &`参数的专业化（我不确定），但这意味着`foo`为所有参数的每个可能的右值/左值引用组合复制其中包含的所有代码，这是通用引用应该避免的.

有没有办法做到这一点？

如果有更好的解决方法，请更具体地说明我的问题：

我有一个可以连接到多个游戏服务器的程序，并且每个服务器在大多数情况下都以相同的名称调用所有内容。但是，它们在某些方面的版本略有不同。这些东西可以有几个不同的类别：移动、项目等。我编写了一个通用的“移动字符串移动枚举”函数集供内部代码调用，我的服务器接口代码也有类似的职能。但是，有些服务器有自己的内部 ID 可以与之通信，有些使用字符串，有些则在不同的情况下使用两者。

现在我想做的是让它更通用一点。

我希望能够调用类似`ServerNamespace::server_cast<Destination>(source)`. 这将允许我从 a`Move`转换为 a `std::string`or `ServerMoveID`。在内部，我可能需要制作副本（或从中移出），因为某些服务器要求我保留已发送消息的历史记录。通用引用似乎是解决这个问题的明显方法。

我现在正在考虑的头文件将简单地公开以下内容：

```
namespace ServerNamespace {

template<typename Destination, typename Source>
Destination server_cast(Source && source);

} 
```

并且实现文件将所有合法转换定义为模板特化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:48:26.060

我认为最好的解决方案是使用标签调度系统，在该系统中重载标签而不是实际类型：

```
struct foo {
    struct tag {};
};

struct bar {
    struct tag {};
};

template<typename Destination, typename Source>
Destination server_cast(Source && source, foo::tag) {
    // foo
}

template<typename Destination, typename Source>
Destination server_cast(Source && source, bar::tag) {
    // bar
}

template<typename Destination, typename Source>
Destination server_cast(Source && source) {
    return server_cast<Destination>(std::forward<Source>(source), typename std::remove_reference<Source>::type::tag());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:02:21.983

最可扩展的事情是创建一个模板类专业化。

```
template< class X > struct Whatever {
    void f(){ ... }
};

template<> struct Whatever<UserType> {
    void f(){ ... }
}; 
```

我说这是最可扩展的原因是因为你可以在任何地方添加一个特化，无论是在定义什么的文件内部或外部。

这是对 Pubby 建议的标签调度解决方案的补充，而不是排他性。

# c - PThread 基础程序，好奇这段代码有什么问题

> ID：13654104
> 
> 赞同：0
> 
> 时间：2012-11-30T22:27:43.313
> 
> 标签：c, pthreads

为了编写这段代码，我检查并使用了一些教程，但我仍然失败了，考虑到只有 main 函数似乎工作并以代码 0 退出。我的踏板不是创建的吗？它们是但不知何故我未能将它们与我的“工作”功能联系起来？

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <math.h>

struct node { // std linked list node
    int value;
    int worker;
    struct node *next;
};
// pthread_t* w_thread;

int slots = 3; // only 3 threads are allowed to access the list
int availableCheck(){   // check if thread can acces the list
    if(slots < 3) return 0;
    else return -1;
}

pthread_mutex_t mutp = PTHREAD_MUTEX_INITIALIZER;   //condvar mutex
pthread_cond_t  condvar = PTHREAD_COND_INITIALIZER;   //condvar

void * worker( void *i ){
    long index = (long)i;
    printf( "    * I am worker  # %lu : \n",pthread_self() );
    // pthread_mutex_lock( &mutp );
    // if(availableCheck() < 0){
        // printf( " ^^^ List not available yet... \n" ); 
        // pthread_cond_wait( &condvar, &mutp );
    printf( "* Got data:  %lu \n", index ); 
    // pthread_cond_signal( &condvar ); // 
    // pthread_mutex_unlock( &mutp ); 

    return NULL;
    // }
}

int main( int argc, char *argv[] ){
    if ( argc != 3 ){
        printf( "Programm must be called with \n NR of elements and NR of workers! \n " );
        exit( 1 );
    }

    int i,listSize,workersSize;
    struct node *root;
    struct node *iterator;  

//prepare list for task
    listSize = atoi(argv[1]);
    root = malloc(sizeof( struct node) );

    root->value = rand() % 100;
    // printf(">>> %d\n", root->value );
    root->worker = 0;

    iterator = malloc(sizeof(struct node) );
    iterator = root;

    for( i=1; i<listSize; i++ ){
        iterator->next = malloc(sizeof(struct node));
        iterator = iterator->next;
        iterator->value = rand() % 100;
        iterator->worker = i;
        printf("node #%d worker: %d  value: %d\n", i, iterator->worker,iterator->value);
    }
    printf("? List got populated\n");

// Create all threads to parse the link list
    int ret;    
    pthread_t w_thread;
    int nrWorkers = atoi(argv[2]);
    pthread_t* w_threads = malloc(nrWorkers * sizeof(w_thread));
    for( i=0; i<listSize; i++ ){
        int *id = malloc(sizeof(int));
        *id = i;
         ret = pthread_create ( &w_threads[i], NULL, worker, (void *) &id );
         if( ret ) {
            perror("Thread creation fail");
            exit(2);    
        }
    } 
    int j;
    for (j = 0; i < nrWorkers; j++){
        pthread_join(w_threads[j],NULL);
    }       
} 
```

**Ps**一些注释函数/变量将被使用/实现，但在这一点上我希望线程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:37:46.163

我怀疑在你创建线程的 for 循环中你应该有：

```
 for( i=0; i<nWorkers; i++ ){ 
```

另外，我建议您为输入参数添加检查/打印。

还有一个问题：你将指针传递给worker()，所以你必须取消引用指针，如果它是指向int的指针，那么

```
void * worker( void *p_int ){
    assert(p_int != NULL)   
    int index = *(int*)p_ind; 
```

从 void* 投射要准确！

最后一件事。如果您知道 listSize，我不清楚您为什么要创建链接列表：

```
for( i=1; i<listSize; i++ ){
    iterator->next = malloc(sizeof(struct node));
    iterator = iterator->next;
    ... 
```

相反，您可以仅在一行代码中分配您的数组，而无需为**root**分配：

```
p_list = (struct node*)malloc(listSize*sizeof(struct node));
assert(p_list);
for( i=0; i<listSize; i++ ){
    p_list[i].value = ...
    ... 
```

如您所见，这里不需要**下一个**指针。

# python - scipy cobyla 不收敛

> ID：13654107
> 
> 赞同：0
> 
> 时间：2012-11-30T22:28:01.813
> 
> 标签：python, optimization, scipy

我在使用 fmin_cobyla 时遇到问题。我用它来进行参数拟合。由于某种原因，即使正确定义了问题，它似乎也陷入了无限循环。我打开 iprint 它正在循环以下消息。有谁知道这意味着什么？

```
RESMAX,MCON, M, ICON = 0.0000000 2 1 0
ICOUNT, OPTNEW, OPTOLD, 0 NAN 0.00000
*TOT,NACT, ICON = NAN 1 2
2\. VMULTD = NAN 0.000000
3\. VMULTD = NAN 0.00000
3\. VMULTC = 0.0000 
```

在此先感谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:52:48.483

我已经找到答案了。这样做的原因是因为我使用的 rhobeg 是一个函数。当rhobeg为负时，导致它进入死循环！！！

# nosql - Cassandra 更改比较器默认顺序

> ID：13654112
> 
> 赞同：0
> 
> 时间：2012-11-30T22:28:17.400
> 
> 标签：nosql, cassandra

我创建以下动态列：

```
CREATE COLUMN FAMILY messages with comparator=DateType and key_validation_class=UTF8Type and default_validation_class=UTF8Type; 
```

一切都很完美，但是当我列出所有消息时

```
list messages; 
```

或使用 Hector 获取它，我按升序获取它（最后显示的最新日期）。

创建该列族时，有什么方法可以更改比较器或时间戳顺序？

当我需要按降序列出结果（首先显示最新日期）时，我应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:40:42.030

您可以使用比较器创建列族：`ReversedType(DateType)`

在`RangeSliceQuery`中，在构建范围时，您应该将 reverse 参数指定为 true，这将按降序拉取结果。

# iphone - UITableView - 滚动到下一页后，多个部分会重复（使用 Parse）

> ID：13654113
> 
> 赞同：2
> 
> 时间：2012-11-30T22:28:23.610
> 
> 标签：iphone, objective-c, ios, uitableview, parse-platform

我正在使用带有自定义`UITableViewCell`显示四个图像的故事板`PFQueryTableViewController`（其中子类`UITableView`）。

当第一页加载时，它会正确显示前 24 个对象。当第二页加载时，它会重复第一页的前 24 个对象并附加下一批 24 个对象。在第三页上，它重复第一页的 24 个对象附加到第二页的 24 个对象以及第三页的 24 个对象。

对于我需要在代码中进行更改以获得正确的对象集以在滚动时显示在适当的页面上的任何帮助，我将不胜感激。

我正在使用`Parse`和这个子类`PFQueryTableViewController`。由于我每行显示四张照片（对象），我创建了一个名为的数组`groupedObjectIds`，其中包含包含四个对象的数组。

这是`.h`文件：

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import <Parse/Parse.h>
@interface TestTableViewController : PFQueryTableViewController <CLLocationManagerDelegate>

@property (strong, nonatomic) NSNumber *institutionID;
@property (nonatomic, retain) CLLocationManager *locationManager;

- (IBAction)insertCurrentLocation:(id)sender;
@end 
```

这是`.m`文件：

```
#import "TestTableViewController.h"

@interface TestTableViewController ()
@end

@implementation TestTableViewController
NSMutableArray *groupedObjectIds;
@synthesize locationManager = _locationManager;
@synthesize institutionID;

- (id)initWithCoder:(NSCoder *)aCoder    
{        
    self = [super initWithCoder:aCoder];

    if (self)            
    {        
        // Customize the table            
        // The className to query on            
        self.className = @"profilePhoto";

        // The key of the PFObject to display in the label of the default cell style            
        self.textKey = @"text";

        // Whether the built-in pull-to-refresh is enabled            
        self.pullToRefreshEnabled = YES;

        // Whether the built-in pagination is enabled            
        self.paginationEnabled = YES;

        // The number of objects to show per page            
        self.objectsPerPage = 24;

        //self.shouldReloadOnAppear = NO;            
    }        
    return self;        
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

   if (scrollView.contentSize.height - scrollView.contentOffset.y < (self.view.bounds.size.height)) {
      if (![self isLoading]) {
         NSLog(@"pulling next page");
         //groupedObjectIds = [[NSMutableArray alloc] init];
         [self loadNextPage];
      }
   }
}

#pragma mark - UIViewController
- (void)viewDidUnload
{
   [super viewDidUnload];
   [self setInstitutionID:nil];

   // Release any retained subviews of the main view.
   // e.g. self.myOutlet = nil;
}

#pragma mark - UIViewController

- (void)viewDidLoad {
   [super viewDidLoad];

   NSLog(@"entered viewdidload");
   groupedObjectIds = [[NSMutableArray alloc] init];
   if (![CLLocationManager locationServicesEnabled]) {            
   }

   //[[self locationManager] startUpdatingLocation];

   // Listen for annotation updates. Triggers a refresh whenever an annotation is dragged and dropped.
   //[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadObjects) name:@"geoPointAnnotiationUpdated" object:nil];
}

- (void)viewWillAppear:(BOOL)animated {
   [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated {
   [super viewDidAppear:animated];

   //if (self.shouldReloadOnAppear) {
   //    self.shouldReloadOnAppear = NO;
   //    [self loadObjects];
   //}
}

- (void)viewWillDisappear:(BOOL)animated {
   [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated {
   [super viewDidDisappear:animated];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {        
   if (indexPath.section == self.objects.count/4) {
      // this behavior is normally handled by PFQueryTableViewController, but we are using sections for each object and we must handle this ourselves
      UITableViewCell *cell = [self tableView:tableView cellForNextPageAtIndexPath:indexPath];
      return cell;
   }
   else{
      //NSLog(@"index path is: %@", indexPath);
      NSLog(@"indexpath.section is: %d", indexPath.section);
      // A date formatter for the creation date.    
      UITableViewCell *cell = (PFTableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"ImageCell"];

      if (cell == nil) {
          cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: @"ImageCell"];
          //[cell.photoButton addTarget:self action:@selector(didTapOnPhotoAction:) forControlEvents:UIControlEventTouchUpInside];
      }
      UIImageView *img1 = (UIImageView *)[cell viewWithTag:1000];
      UIImageView *img2 = (UIImageView *)[cell viewWithTag:1001];
      UIImageView *img3 = (UIImageView *)[cell viewWithTag:1002];
      UIImageView *img4 = (UIImageView *)[cell viewWithTag:1003];
      NSLog(@"groupedobjectids in cellforrow count is: %d", groupedObjectIds.count);
      //if([groupedObjectIds objectAtIndex:indexPath.row])
      //if(indexPath.row < groupedObjectIds.count)
      //{
      NSMutableArray *newArray = [[NSMutableArray alloc] init];
      [newArray  addObjectsFromArray:[groupedObjectIds objectAtIndex:indexPath.section]];
      //NSLog(@"newArray count is: %d", newArray.count);
      //NSLog(@"object at index 0 is: %@", [newArray objectAtIndex:0]);
      if([newArray objectAtIndex:0])
      {
         NSString *objectID = [newArray objectAtIndex:0];
         for(PFObject *object in self.objects)
         {
            if([objectID isEqualToString: [object objectId]])
            {
               PFFile *imageFile = [object objectForKey:@"thumbnail"];
               NSData *imageData = [imageFile getData];
               UIImage *selectedPhoto = [UIImage imageWithData: imageData];
               img1.image = selectedPhoto;
            }
         }
      }
      if([newArray objectAtIndex:1])
      {
         NSString *objectID = [newArray objectAtIndex:1];
         for(PFObject *object in self.objects)
         {
            if([objectID isEqualToString: [object objectId]])
            {
               PFFile *imageFile = [object objectForKey:@"thumbnail"];
               NSData *imageData = [imageFile getData];
               UIImage *selectedPhoto = [UIImage imageWithData: imageData];
               img2.image = selectedPhoto;
            }
         }
      }
      if([newArray objectAtIndex:2])
      {
         NSString *objectID = [newArray objectAtIndex:2];
         for(PFObject *object in self.objects)
         {
            if([objectID isEqualToString: [object objectId]])
            {
               PFFile *imageFile = [object objectForKey:@"thumbnail"];
               NSData *imageData = [imageFile getData];
               UIImage *selectedPhoto = [UIImage imageWithData: imageData];
               img3.image = selectedPhoto;
            }
         }
      }
      if([newArray objectAtIndex:3])
      {
         NSString *objectID = [newArray objectAtIndex:3];
         for(PFObject *object in self.objects)
         {
            if([objectID isEqualToString: [object objectId]])
            {
               PFFile *imageFile = [object objectForKey:@"thumbnail"];
               NSData *imageData = [imageFile getData];
               UIImage *selectedPhoto = [UIImage imageWithData: imageData];
               img4.image = selectedPhoto;
            }
         }
      }
      //}        
      return cell;
   }
}

#pragma mark - PFQueryTableViewController

- (void)objectsWillLoad {
   [super objectsWillLoad];

   // This method is called before a PFQuery is fired to get more objects
}    

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
   return 1;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {        
   int j = self.objects.count / 4;
   NSLog(@"number of sections in tableview: %d", j);
   return j;
}

- (void)objectsDidLoad:(NSError *)error {
   [super objectsDidLoad:error];
   //NSLog(@"inside objects did load");
   NSMutableArray *arrayOfFour = [[NSMutableArray alloc] init];

   int i = 1;
   NSLog(@"self objects count is: %d", self.objects.count);
   for (PFObject *eachObject in self.objects) {            
      NSLog(@"object ID is: %@", [eachObject objectId]);
      [arrayOfFour addObject:[eachObject objectId]];
      if(i%4==0)
      {
         //NSLog(@"mod 4 is 0");
         [groupedObjectIds addObject: arrayOfFour];
         //[arrayOfFour removeAllObjects];
         //arrayOfFour = nil;
         arrayOfFour = [[NSMutableArray alloc] init];
      }
      //NSLog(@"i is: %d", i);
      i++;
   }
   NSMutableArray *newArrayOfFour = [[NSMutableArray alloc] init];
   //[newArrayOfFour addObjectsFromArray:[groupedObjectIds objectAtIndex:0]];
   newArrayOfFour = [groupedObjectIds objectAtIndex:0];
   //NSLog(@"newarrayoffour count is: %d", newArrayOfFour.count);
   for(int i = 0; i<newArrayOfFour.count; i++)
   {
      //NSLog(@"object id here is: %@", [newArrayOfFour objectAtIndex:i]);
   }
   //NSLog(@"groupedObjectIds count in objectsdidload is: %d", groupedObjectIds.count);
   // This method is called every time objects are loaded from Parse via the PFQuery
}

- (PFQuery *)queryForTable {
   /*if (![PFUser currentUser]) {
      PFQuery *query = [PFQuery queryWithClassName:self.className];
      [query setLimit:0];
      return query;
   }*/
   PFQuery *query = [PFQuery queryWithClassName:@"profilePhoto"];        
   [query orderByAscending:@"createdAt"];        
   return query;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:52:44.707

似乎您有一个可重用的单元格标识符问题，尝试在 tableviewcontroller 方法`cellForRowAtIndexpath:(NSIndexpath*)indexPath`中为您使用情节提要创建的已分配自定义单元格设置它，以便控制器不必为列表中的每个对象分配一个单元格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T01:46:32.110

I had a similar issue. It turned out that when specifying query for table I used:

```
query.cachePolicy = PFCachePolicy.CacheThanNetwork 
```

instead use:

```
query.cachePolicy = PFCachePolicy.CacheElseNetwork 
```

And it was first loading objects from cache. I have run the code on one and the same device several times, so the objects were found and appended. After, the query requested new objects from Network and they were completely the same, and these objects were as well appended to the tableView. Maybe you are heaving the same problem.

# php - 仅从：m 表中选择剩余的记录？

> ID：13654117
> 
> 赞同：0
> 
> 时间：2012-11-30T22:28:59.540
> 
> 标签：php, mysql

我想选择所有不在 an:m 类型查询中的记录...

我有一张像这样的名为“艺术品”的桌子：

```
artwork_id  caption                              filename
---------------------------------------------------------------
1           Moonlight Front cover                3483490.jpg
2           Take it Inlay                        2984560.jpg
3           Moonlight Front Cover (UK Release)   gh893ed.jpg
4           CD ....                              86re956.jpg
5           CD 3 ...                             84wefg8.jpg 
```

我有一个名为“album_artwork”的：m 表，如下所示：

```
album_id  artwork_id  position
-------------------------------
1         1           1
23        1           1
8         2           5
1         2           2 
```

我有一个表单可以让用户为专辑选择艺术作品，但我不希望用户重复条目......所以我想向用户展示剩余的艺术作品......例如，对于专辑id 为 1，选择输入将显示以下选项

```
3 Moonlight Front Cover (UK Release)
4 CD ...
5 CD 3 ... 
```

artifact_id 1 和和artifacts_id 2 不会成为选择选项的一部分，因为album_id 1 的artifact_id 条目已经存在于n:m album_artwork 数据库中

我如何只选择其余的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:38:11.637

您可以使用 a`NOT EXISTS`过滤`artwork_id`已存在于中的内容`album_artwork`：

```
SELECT
  a.*
FROM 
  artwork a
WHERE
  NOT EXISTS (
    /* NOT EXISTS subquery returns artwork_id's from album_artwork already present */
    SELECT artwork_id FROM album_artwork aw 
    WHERE
      album_id = $your_album_id
      AND a.artwork_id = aw.artwork_id
  ) 
```

### [这是](http://sqlfiddle.com/#!2/2c809/1)SQLFiddle.com 上的演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:50:04.987

您可以使用`NOT IN`仅选择`artwork`不在`artwork`已知数组中的行`album`。

```
SELECT
 artwork_id,caption,filename
FROM 
 artwork
WHERE
 artwork_id
NOT IN
   (SELECT artwork_id FROM album_artwork WHERE album_id = $album_id) 
```

[sqlfiddle 示例](http://sqlfiddle.com/#!2/4289c/2)

# python - 如何让Python在windows中获取用户名，然后在脚本中实现

> ID：13654122
> 
> 赞同：37
> 
> 时间：2012-11-30T22:29:36.167
> 
> 标签：python

我知道使用 `getpass.getuser()`命令，我可以得到用户名，但是我怎样才能在下面的脚本中自动实现呢？所以我想让python找到用户名，然后在下面的脚本中实现它。

脚本：`os.path.join('..','Documents and Settings','USERNAME','Desktop'))`

（正在使用 Python 2.7 版）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-30T22:41:37.863

`os.getlogin()`返回正在执行的用户，所以它可以是：

`path = os.path.join('..','Documents and Settings',os.getlogin(),'Desktop')`

或者，使用 getpass.getuser()

`path = os.path.join('..','Documents and Settings',getpass.getuser(),'Desktop')`

如果我明白你的要求。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-03-19T20:08:59.000

os.getlogin() 对我来说不存在。然而，我取得了成功`os.getenv('username')`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-30T22:45:27.043

```
>>> os.path.join(os.path.expandvars("%userprofile%"),"Documents and Settings")
'C:\\Users\\USERNAME\\Documents and Settings' 
```

应该足够了...我认为这就是您的实际意思..

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-30T22:42:01.560

安装[`win32com`](http://sourceforge.net/projects/pywin32/)，然后：

```
from win32com.shell import shell, shellcon
print shell.SHGetFolderPath(0, shellcon.CSIDL_DESKTOP, None, 0) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-09-08T08:54:32.587

获取当前用户名：在代码中添加**导入操作系统**，然后使用：

```
print(os.getlogin()) 
```

**或者**

```
print(os.getenv('username')) 
```

如果您从 c 驱动器获得完整路径，请使用以下命令：

```
print(os.environ['USERPROFILE']) #C:\Users\username 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-23T09:01:28.613

如果你想要桌面目录，Windows 7 有一个环境变量`DESKTOP`：

```
>>> import os
>>> print os.environ['desktop']
C:\Users\KingMac\Desktop 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-24T11:34:46.640

要获取当前用户目录，您还可以使用以下命令：

```
from os.path import expanduser
home = expanduser("~\buildconf") 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-20T12:48:11.953

您也可以尝试以下方法：

```
 import os
print (os.environ['USERPROFILE']) 
```

这样做的好处是您可以直接获得如下输出：

```
C:\\用户\\用户名
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-24T17:34:46.220

`import os`随后使用 python 3.7`os.getlogin()`在 macOS**和**Windows 上工作

在此之后，您可以执行以下操作：

```
path = ''.join(('C:/Users/', os.getlogin(), '/Desktop/')) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-20T11:23:48.873

这也适用于**Python 3.***：

```
os.path.join(os.environ['HOME'] + "/Documents and Settings") 
```

# c - 全局数组不存储值

> ID：13654127
> 
> 赞同：-1
> 
> 时间：2012-11-30T22:30:04.530
> 
> 标签：c

我有以下名为`arr.c`..

```
unsigned long* arr[50];
unsigned long arrSizes[50];
unsigned short size = 0;

void add(unsigned long* x, int y){ 
  arr[size] = x;
  arrSizes[size] = y;
  size++;
}

void print() {
  int i,j;
  i=0;
  j=0;
  for(;i<size;i++){
     for(;j<arrSizes[i];j++)
        printf("%lu ",arr[i][j]);
     printf("\n");
  }
} 
```

它打印一个空行，它不打印 arr[2]。任何想法，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:36:48.587

在您的`print`方法`j`中从 0 开始，但应该为 i 的每次迭代重置它。为什么不按正常方式进行：

```
for(i = 0;i<size;i++){
 for(j = 0;j<arrSizes[i];j++) 
```

# macos - 自动同步 Git 到 SVN

> ID：13654129
> 
> 赞同：3
> 
> 时间：2012-11-30T22:30:13.390
> 
> 标签：macos, git, svn, sync

# 概括：

我想要完成的是定期将一个*裸*Git 存储库推送到 Subversion，以便其他人可以使用无人值守的脚本对其进行检查。我不需要相反的方向，SVN -> Git。

我希望有人能帮我完成这件事。我看到的其他线程与我需要的非常接近，但没有一个具有完整、合理的解决方案。[将现有的 git 存储库推送到 SVN](https://stackoverflow.com/questions/661018/pushing-an-existing-git-repository-to-svn)非常有帮助。

# 我的问题：

我的雇主维护着一个 Subversion 服务器，它具有异地备份、冗余，并且可以通过 Web 界面访问，因此我的同事和经理可以进行随意的审查。

我在 Git 下有六个项目。（我有多台机器，我做了很多推测性的分支，而且我经常提交。此外，Xcode 与 Git 配合得更好。我们的 SVN 管理员同意 Git 对我来说几乎是不可协商的。）我一直这样做是通过保持一个我的台式机（由我的雇主及其场所拥有）上的裸仓库，所有工作副本都跟踪。

我的雇主真的希望我不这样做；如果他能提供一个 IT 级的 Git 服务器，他会的。他的妥协是我找到了一种方法来获得一个`launchd`( `cron`) 任务，以将我桌面的裸 Git 存储库同步到 SVN 服务器上的并行存储库。

# 我提出的方法（可能不令人满意）：

我还没有找到任何将裸 Git 存储库克隆到 Subversion 的指南，更不用说无人看管了。我的猜测是我必须通过工作副本来完成所有工作，SVN 同步（但可能不是自动化）是一个已解决的问题。

我天真的过程是：

1.  从裸仓库克隆一个*从未*编辑过的工作副本。`/dont-touch`
2.  在 no-edits`/dont-touch`目录中时，`git svn init <svn-url> -s`
3.  做必要的`git svn fetch`和`git svn rebase`跳舞。
4.  每天晚上，根据 4.1触发`launchd`的脚本。 4.2\. 4.3.
    `cd /dont-touch`
    `git fetch`
    `git svn dcommit`

# 我看到的问题是：

## 我很无知

说够了。

这个类别包括所有我没有想到的东西。

## 互动性

我们希望我们可以设置它，让同步脚本每 24 小时触发一次，然后忘记它。

我假设 SVN 身份验证将被缓存并在第一次通过后自行处理，在手动 (1-3) 设置期间。Git 身份验证不会成为问题，因为`dont-touch`工作副本将由与裸存储库相同的用户拥有，并且可以通过`file:///`.

但是我对将 Git 同步到 SVN 的印象是它很脆弱，并且需要交互式 nips 和 tucks 以避免损坏 SVN 存储库，更不用说让它工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:04:33.207

你可以看看[SubGit](http://subgit.com)作为 git-svn 的替代品。从 2.0 开始，它允许将本地 Git 与远程 Subversion 存储库链接。你运行一次：

```
$ subgit configure --svn-url <URL_of_SVN_project_root> repos.git
# edit repos.git/subgit/config, repos.git/subgit/authors.txt, and repos.git/subgit/passwd

$ subgit install repos.git
# now just work with repos.git as with usual git repository, but prefer "git pull --rebase" rather that "git pull" and "git merge --no-ff" rather than "git merge" 
```

其中 URL_of_SVN_project_root 是包含 trunk/branches/tags 目录的 URL。

然后克隆存储库“repos.git”并从/向它推/拉（可选地以[这种方式](http://subgit.com/book/index.html#N2043D)设置工作副本 git config ）。'repos.git' 中的特殊 Git 钩子会将其与 SVN 同步。请注意，目前 SubGit 2.0 处于 eap 阶段，但我认为您描述的 git-svn 设置更可靠。

# java - 防止后退按钮在java servlet中重新提交表单数据

> ID：13654136
> 
> 赞同：1
> 
> 时间：2012-11-30T22:30:35.683
> 
> 标签：java, eclipse, jsp, tomcat, servlets

当提交表单，然后用户单击后退按钮时，如何防止数据被重新提交。我读过的很多内容表明，解决这个问题的方法是实施 PRG '模式'。

我找到了这个网页[PRG Pattern](http://theopentutorials.com/tutorials/java/design-patterns/post-redirect-get-prg-pattern-in-servlet-jsp/)，我想以此为例。

当我执行此代码时，我仍然可以单击后退按钮，然后重新单击提交按钮并让表单重新提交数据，即使它重定向。所以，我没有看到这应该如何防止重新提交表单数据。

那么，以这个页面为例，如何修改代码来防止这种行为呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:33:07.330

PRG 用于防止重新加载重新提交事件，您可以随时从浏览器返回页面并使用此提交表单

为了防止这种情况，您可以在呈现表单时发出令牌并在提交时将其发送到服务器并查看这是否是正确的令牌（通过将其放在会话中的某个位置）然后处理请求

更新：当您提供表单时，在会话中设置一些令牌

```
request.getSession().setAttribute("formToken", someCode); 
```

现在在提交表单时，将令牌发布回服务器，并将其与会话中的令牌匹配，如果两个匹配都允许请求，如果不匹配则意味着请求已经执行或有人正在尝试模拟表单发布并且在提交的数据中缺少表单令牌，

所以现在如果您已经提交过一次并且如果您使用浏览器按钮返回并再次重新提交，则代码将不匹配，它将阻止重新提交

使令牌检查事物同步以处理并行请求情况

# c++ - C 和 C++ 中的“通过引用传递”到底有什么区别？

> ID：13654138
> 
> 赞同：33
> 
> 时间：2012-11-30T22:30:43.107
> 
> 标签：c++, c, terminology, pass-by-reference, pass-by-value

C 和 C++ 开发人员都使用“按引用传递”这个短语，但它们似乎用于表示不同的东西。每种语言中这个模棱两可的短语之间到底有什么区别？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-30T22:30:43.107

有些问题已经处理了[按引用传递和按值传递之间的区别](https://stackoverflow.com/q/373419/150634)。本质上，将参数按值传递给函数意味着该函数将拥有自己的参数副本 - 它的*值*被复制。修改该副本不会修改原始对象。但是，当通过引用传递时，函数内部的参数*指*的是传入的同一个对象 - 函数内部的任何更改都会在外部看到。

不幸的是，有两种方式使用“按值传递”和“按引用传递”这两个短语，这可能会引起混淆。我相信这就是为什么新的 C++ 程序员很难采用指针和引用的部分原因，尤其是当他们有 C 的背景时。

# C

在 C 中，从技术意义上讲，一切都是按值传递的。也就是说，无论您作为函数的参数提供什么，它都会被复制到该函数中。例如，调用函数`void foo(int)`时`foo(x)`将 的值复制`x`为 的参数`foo`。这可以从一个简单的例子中看出：

```
void foo(int param) { param++; }

int main()
{
  int x = 5;
  foo(x);
  printf("%d\n",x); // x == 5
} 
```

的值`x`被复制到`foo`该副本中并且该副本递增。`x`in`main`继续具有其原始价值。

我相信您知道，对象可以是指针类型。例如，`int* p`定义`p`为指向`int`. 需要注意的是，以下代码引入了两个对象：

```
int x = 5;
int* p = &x; 
```

第一个是 type`int`并具有 value `5`。第二个是类型`int*`，它的值是第一个对象的地址。

当传递一个指向函数的指针时，你仍然是按值传递它。它包含的地址被复制到函数中。修改函数内部的*指针*不会改变函数外部的指针——但是，修改*它指向的对象*会改变函数外部的对象。但为什么？

由于具有相同值的两个指针总是指向同一个对象（它们包含相同的地址），因此可以通过两者访问和修改所指向的对象。这给出了通过引用传递指向对象的语义，尽管实际上不存在任何引用 - C 中根本没有引用。看看更改后的示例：

```
void foo(int* param) { (*param)++; }

int main()
{
  int x = 5;
  foo(&x);
  printf("%d\n",x); // x == 6
} 
```

我们可以说，当将 the 传递`int*`给函数时，`int`它指向的是“通过引用传递”，但实际上它`int`根本没有真正传递到任何地方——只有指针被复制到函数中。这给了我们“按值传递”和“按引用传递”的口语^(1含义。)

该术语的使用由标准中的术语支持。当你有一个指针类型时，它所指向的类型被称为它的*引用类型*。也就是说，被引用的类型`int*`是`int`。

> *指针类型*可以派生自函数类型、对象类型或不完整类型，称为引用*类型*。

虽然一元运算`*`符（如 in `*p`）在标准中称为间接，但通常也称为解引用指针。这进一步促进了 C 中“通过引用传递”的概念。

# C++

C++ 采用了 C 的许多原始语言特性。其中包括指针，因此这种“通过引用传递”的口语形式仍然可以使用 -`*p`仍然是解引用`p`。但是，使用该术语会令人困惑，因为 C++ 引入了 C 没有的特性：真正传递*引用*的能力。

后跟 & 符号的类型是*引用类型*²。例如，`int&`是对`int`. 将参数传递给采用引用类型的函数时，对象实际上是通过引用传递的。不涉及指针，不复制对象，什么都没有。函数内部的名称实际上指的是与传入的对象完全相同的对象。与上面的示例相比：

```
void foo(int& param) { param++; }

int main()
{
  int x = 5;
  foo(x);
  std::cout << x << std::endl; // x == 6
} 
```

现在该`foo`函数有一个参数是对`int`. 现在当传递`x`,`param`指的是完全相同的对象。递增`param`对 的值有明显的变化，`x`现在`x`的值为 6。

在此示例中，没有按值传递任何内容。没有任何东西被复制。与在 C 中按引用传递实际上只是按值传递指针不同，在 C++ 中我们可以真正按引用传递。

由于术语“按引用传递”中的这种潜在歧义，当您使用引用类型时，最好仅在 C++ 上下文中使用它。如果您传递的是指针，则不是通过引用传递，而是通过值传递指针（当然，除非您传递对指针的引用！例如`int*&`）。但是，当使用指针时，您可能会遇到“按引用传递”的用法，但现在至少您知道实际发生了什么。

* * *

## 其他语言

其他编程语言使事情进一步复杂化。在某些（例如 Java）中，您拥有的每个变量都称为对对象的引用（与 C++ 中的引用不同，更像是指针），但这些引用是按值传递的。因此，即使您似乎是通过引用传递给函数，但实际上您正在做的是将引用按值复制到函数中。当您将新对象分配给传入的引用时，会注意到 C++ 中通过引用传递的这种细微差别：

```
public void foo(Bar param) {
  param.something();
  param = new Bar();
} 
```

如果您要在 Java 中调用此函数，并传入一些 type 的对象`Bar`，则调用`param.something()`将在您传入的同一对象上调用。这是因为您传入了对对象的引用。但是，即使将 new`Bar`分配给`param`，函数外的对象仍然是同一个旧对象。从外面看不到新的。那是因为内部的引用`foo`被重新分配给一个新对象。对于 C++ 引用，这种重新分配引用是不可能的。

* * *

¹通过“口语化”，我并不是说“通过引用传递”的 C 含义比 C++ 含义更不真实，只是 C++ 确实具有引用类型，因此您是真正通过*引用*传递。C 的含义是对真正按值传递的内容的抽象。

²当然，这些是左值引用，我们现在在 C++11 中也有右值引用。

# php - 安全图像（JPG、PNG、动画 GIF）上传

> ID：13654142
> 
> 赞同：-1
> 
> 时间：2012-11-30T22:31:20.333
> 
> 标签：php, image, upload, gif, watermark

我正在寻找解决静态 jpg / png 和动画 gif 文件（如果文件是 gif 但不是'不是动画，让它成为一个png）。

奖励信息：我正在 Amazon EC2 服务器上用 PHP 执行上传脚本，并将图像上传到 Amazon S3 存储桶。如果这改变了什么，请告诉。

奖励信息 2：在我解决了这个问题之后，我想在图像下方添加一个类似 DAMNLOL 的水印（如下所示：[http](http://www.damnlol.com/i/916d72c17e572b14a14c283b2f96f997.jpg) ://www.damnlol.com/i/916d72c17e572b14a14c283b2f96f997.jpg ）。

**到目前为止我是如何解决这个问题的：**

1.  用户从 URL 中选择要以表单 / 上传的文件，继续使用 PHP 脚本（在用户中止时不会中止）。

2.  该脚本获取图像，进行一些检查：最大文件大小，`$_FILES['file']['type']`必须是“image/gif”、“image/png”、“image/jpg”。最大/最小宽度和高度检查。如果一切正常，请继续。

3.  *   如果用户从他的本地计算机上载图像，则使用临时名称将图像存储在服务器上。之后，php 脚本调用[http://regex.info/exif.cgi](http://regex.info/exif.cgi)并使用 CURL 和临时 url 作为输入。
    *   或者在提交 url 的情况下，php 脚本调用[http://regex.info/exif.cgi](http://regex.info/exif.cgi)并使用 CURL 和提交的 url 作为输入。
4.  Jeffrey（Jeffrey 代表 Jeffrey 的 Exif 查看器 (regex.info/exif.cgi)）给了我一个回应。如果它暗示图像确实是 PNG、JPG 或 GIF 类型，则脚本会下载文件（如果是提交的 url）或将文件（如果是上传的图像）移动到最终图像文件夹。成功！

如您所见，当您通过 URL 提交文件并且 URL 将 Jeffrey 重定向到有效图像但将我的服务器重定向到恶意代码时，该脚本很容易受到攻击。至少我是这么认为的。

在我看来，这个解决方案很慢，但相当安全。上传大约需要 2-5 秒，具体取决于文件大小。GIF 往往需要 4-10 秒。其他站点不需要那么长时间并且仍然安全。

* * *

**关于如何解决问题的想法：**

*   显然，Jeffrey 每次都能找出实际的文件类型。PHP中有这样的防弹方法吗？显然，通过文件名来决定文件类型是解决这个问题的一个非常糟糕的方法。

*   结合信息 2，我可以简单地获取提交的图像，获取宽度和高度信息，使用 (new_image_width = submit_image_width, new_image_height = submit_image_height + watermark_height) 创建一个新的空白图像，并将提交的图像与下面的水印一起存储。如果整个过程失败，则提交的图像不是 JPG / PNG / GIF 类型并且脚本中止。将水印添加到动画 GIF 时可能会有点棘手，但这显然是可能的（--> [http://forgifs.com/gallery/d/206365-1/Fitness-ball-roof-jump.gif](http://forgifs.com/gallery/d/206365-1/Fitness-ball-roof-jump.gif)）。

你觉得我的想法怎么样？您对这个特定问题有任何详细的解决方案吗？我很早就知道它并对该主题进行了多次研究，但我从未找到“最佳”解决方案。

*感谢您的时间。愿我们最终解决这个问题，并帮助我和成千上万在谷歌上日复一日地寻找这个问题的解决方案的人。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:32:13.693

我使用[http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/)的修改版本 至少您可以查看代码并了解有关制作文件上传过程的一些想法有点安全。

# git - 我如何获得控制台上 git 的最后更改的彩色差异？

> ID：13654144
> 
> 赞同：3
> 
> 时间：2012-11-30T22:31:23.750
> 
> 标签：git, console

我希望能够从控制台中查看 git 存储库中的最后更改。

是否有可能获得类似 GUI 的彩色输出，并排并且只有最后 10 次提交？

也许这也适用于debian： http: [//heipei.net/2009/01/29/git-full-length-side-by-side-diffs/](http://heipei.net/2009/01/29/git-full-length-side-by-side-diffs/)

![在此处输入图像描述](../Images/9a88afbdae48e063bb601c1e4dc30534.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:43:12.343

'git difftool' 允许你这样做。

你也可以通过 'git difftool --tool=vimdiff --no-prompt' 使用你最喜欢的 difftool

您可以像其他差异命令一样比较修订

'git difftool HEAD~10 HEAD'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:36:16.867

我衷心推荐[tig](http://jonas.nitro.dk/tig/)用于基于文本的 git UI。

# linux - ssh 带密码

> ID：13654145
> 
> 赞同：0
> 
> 时间：2012-11-30T22:31:50.130
> 
> 标签：linux, bash, shell, ssh, passwords

> **可能重复：**[使用密码在 shell scipt 中将密码](https://stackoverflow.com/questions/6191898/ssh-in-shell-scipt-with-password)
> [传递给 su/sudo/ssh SSH](https://stackoverflow.com/questions/233217/pass-password-to-su-sudo-ssh)

有没有可能我可以为 ssh 命令传递密码

```
ssh root@10.20.30.40 | echo "Password" (or)      
echo "Password" | ssh root@10.20.30.40 (or) a script like below  
pw1="Password"
ssh -t root@168.56.64.245 <<< EOF  
$pw1  
EOF 
```

任何解决方案都会有所帮助。

我在 Windows 上，我正在使用 putty 连接到 Linux 主机，然后从那个 Linux 连接到另一个 Linux 主机。问题是我不能在 Linux 主机上使用任何 3rd 方工具，我也不能添加 rsa-keys。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:37:44.273

我知道你不能添加，但看看是否安装了 sshpass

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:48:29.273

使用**expect**，这里是一个脚本示例：

```
#!/usr/bin/expect -f
    set timeout 20
    set IPaddress [lindex $argv 0]
    set Username "your_username"
    set Password "your_password"
    set Directory DIRECTORY_PATH

    log_file -a $Directory/session_$IPaddress.log
    send_log "### /START-TELNET-SESSION/ IP: $IPaddress @ [exec date] ###\r"

    spawn telnet $IPaddress
    expect "Username: "
    send "$Username\r"
    expect "Password: "
    send "$Password\r"
    interact
    send_log "\r### /END-TELNET-SESSION/ IP: $IPaddress @ [exec date] ###\r"
exit 
```

**来源**：[期待使用 telnet 和 SSH 自动登录的脚本](http://smacak.wordpress.com/2010/08/15/automatic-login-expect-scripts-telnet-and-ssh/)

**编辑**：如果您不想使用期望工具，您应该尝试使用 ssh 密钥交换登录

**EDIT2**：我读到你不想使用除了或密钥交换，但我不确定如果没有这些就可以完成。

检查这篇文章：

[SSH 自动登录](http://wp.uberdose.com/2006/10/16/ssh-automatic-login/)

另外的选择：

[http://sourceforge.net/projects/sshpass/](http://sourceforge.net/projects/sshpass/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:44:56.790

使用`expect`. 看[这里](http://bash.cyberciti.biz/security/expect-ssh-login-script/)

我在我的一个项目中使用了它。这真的很有帮助。实现起来有点长，但逻辑很简单——在 ssh“查询”之后，你只是“期望”在命令期望之后写的东西作为正则表达式。希望能帮助到你。

# ruby-on-rails - 在“new”和“create”之间将属性传递给 belongs_to Rails 对象

> ID：13654150
> 
> 赞同：0
> 
> 时间：2012-11-30T22:32:57.973
> 
> 标签：ruby-on-rails, ruby, database, activerecord, views

这是一个我确信很容易解决的问题，部分归因于我自己缺乏知识，但我做了一些搜索，无法找到解决我问题的正确方法。

在我的情况下，我有一个*Product*类，它有很多*Review*对象。评论也属于*用户*。假设我已经正确定义了我的模型，我很难弄清楚如何正确地将*:product_id*变量传递到评论中，以便在提交时将给定的评论与给定的产品联系起来。

到目前为止，我所拥有的是一个显示产品信息的*视图*以及`<%= link_to 'Review Product', new_review_path(:product_id => @product.id) %>`. 添加新评论的结果视图表单（旨在用于该产品）看起来至少有些正确，因为 URL 显示为*http://localhost:3000/reviews/new?product_id=1*。正如我所提到的，我已经完成了先前的搜索，并且已经提供了对我的问题的类似答案，但它并没有解决问题，因为当我显示`@review`实例变量的值时，每个属性都是 nil。

在我的*reviews_controller.rb*文件中，我可以分配这些变量——至少在*新*操作的表单中，通过执行类似于以下的操作：

`@review = Review.new(:product_id => params[:product_id])`

我还可以通过执行类似的操作并传递*current_user*变量（由设计 gem 处理）来分配*user_id变量。*我知道 Rails 使用的*创建*操作通常会根据我读过的所有内容创建变量的新实例。但是，这样做会导致数据丢失，但我在表单中输入的变量除外。从技术上讲，我应该可以在*create操作中传递**current_user*变量，但我无法传递（或不知道如何传递）product 变量。对于它的价值，我现在没有使用任何类型的嵌套路由，但我不知道这是否是一个直接的解决方案。

 ***如果有人对我可以做些什么来解决这个问题有更好的了解，我将不胜感激。我敢肯定，正如我所暗示的，这是一个业余错误。

PS如果问题措辞尴尬，我深表歉意，因为我不确定描述它的最佳方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:38:05.773

**嵌套资源路由**可能是最好的方法。
@PhilipHallstrom 的方式适用于`form`元素，但如果您正在寻找**Restful**方法：

```
# Add nested resource route 
# /config/routes.rb
resources :products do
    resources :reviews
end

# In your 'products/show.erb.html'; @product will be the instance you want to review
<%= link_to 'Review Product', new_product_review_path(@product) %> # gets you to ReviewController#new

# In your ReviewsController#new
@product = Product.find(params[:product_id])
@review = @product.reviews.new #this should have product_id

# In your 'reviews/new.erb.html'
<% form_for [ @product, @review ] %> # gets you to ReviewController#create

# In your ReviewsController#create
@product = Product.find(params[:product_id])
@review = @product.reviews.new(params[:review]) # params from the previous form
@review.user = current_user
@review.save 
```

就通过`current_user`或`@product`通过不起作用的表单参数而言。从技术上讲，您不能通过 HTTP 传递实际的 Ruby 对象。

`current_user`仍将存在于控制器中，因此没有意义，而且对安全性不利。

`@product`您将需要从控制器查询数据库，使用`product_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:57:25.277

如果您不使用 Qumara 建议的嵌套路由（我同意），那么您需要设置将以下内容添加到 app/views/reviews/new.html.erb 以便它可用于您的创建操作。

```
<%= r.hidden_field :product_id %> 
```

当然请记住，这意味着如果我知道产品 ID，我可以破解您的表单并将我的评论设置为我想要的任何产品。所以你可能想考虑一下...***

# c - GTK+、Glade 和 gtk_entry 双击

> ID：13654154
> 
> 赞同：0
> 
> 时间：2012-11-30T22:33:14.360
> 
> 标签：c, gtk, glade, gtkentry

```
Linux, libgtk2.0-cil-dev 2.12.10-2ubuntu4
Glade 3.12.1
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

我有通过 Glade 创建的 GTK GUI。我有入口和按钮。用户输入数字并按下按钮。条目长度限制为 4 个字符，大小限制为 4 个字符 按钮连接到信号。条目仅用于阅读：

```
char *eeprom_size_kb;
eeprom_size_kb = (char *) gtk_entry_get_text(GTK_ENTRY(GUI.size_entry_kb)); 
```

GUI.size_entry_kb 中的文本在 Glade 中设置为默认值：“256” 您可以双击条目，删除该值并输入，例如 512，一切正常。但是下次我单击条目（单击）时，它会变成垃圾，奇怪的符号，例如错误的编码。在控制台中同时出现警告：

```
Pango-CRITICAL **: pango_layout_get_cursor_pos: assertion `index >= 0 && index <= layout->length' failed 
```

如果继续点击，它将以

```
malloc(): smallbin double linked list corrupted: 0x00000000025b13d0 *** 
```

或者

```
Segmentation fault 
```

我没有为该条目设置任何内容，我无法得到它是我的错误还是它的错误

# jquery - 具有固定行问题的jquery ui可排序表列

> ID：13654155
> 
> 赞同：1
> 
> 时间：2012-11-30T22:33:16.450
> 
> 标签：jquery

有一个 jquery ui 可排序小部件[扩展](http://dbrink.github.com/sorttable/examples.html)，它使表格列可排序。根据示例页面，可以将行指定为不可下药。

```
 $(function () {
    $('#ex7').sorttable({
        placeholder: 'placeholder',
        helperCells: ':not(.footerrow td)'
    }).disableSelection();
    });​ 
```

我想以这种方式设置几个 colspanned 行。但是当我在表格中间设置固定行时会出现几个问题。第一个 - 固定行在拖放过程中不显示为拖动，第二个 - 在几次移动后表格损坏。

[jsfiddle 示例](http://jsfiddle.net/NyQPD/6/)

有什么办法可以纠正吗？

**更新：**

使用宽度=表格宽度的绝对定位 div 找到了解决方法，但实际上我不喜欢它

[jsfiddle 示例](http://jsfiddle.net/NyQPD/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:46:31.437

您遇到的问题是您将静态行的第一个单元格设置`colspan`为 4。

当您将该列移动到第二个位置时，带有 的单元格将`colspan`移动到第二个位置。

现在你最终得到第二列，它用`colspan`4 来包含单元格，这会抵消一切。如果您想在列中移动，
我会尽量避免在单元格中。`colspans`

您可以通过简单地添加空单元格而不是使用`colspan`.

替换这个：

```
<tr class="footerrow"><td colspan="4">unsortable  colspan row</td></tr> 
```

有了这个：

```
<tr class="footerrow"><td></td><td></td><td></td><td></td></tr> 
```

### [演示 - v1](http://jsfiddle.net/NyQPD/7/) - 使用单个空单元格而不是 colspan

此外，我可能会添加一些样式来隐藏该行的列边框。

**编辑**

我用这个玩了更长的时间，并且能够想出另一种选择。请注意，它不像您的那么平滑，并且也可以看到更多`hacky`。

我查看了可排序扩展的`start`和回调，想知道是否可以在 处添加 4 个单元格并再次替换它们。`stop``start``stop`

使用时，`start`您将在排序期间看到 4 个单元格，我不喜欢我认为您希望在拖放操作期间看到页脚的程度。

我注意到，当`stop`执行它时，它会在应用实际排序之前执行，这使得`start`我们的目的变得多余。

这意味着`stop`我们可以用 4 个单元格替换单个单元格，让它排序，添加一个小的时间延迟`window.setTimeout`，然后在一个小的延迟后再次用 1 个单元格替换 4 个单元格。这也意味着页脚在拖放过程中保持不变。

### [DEMO - v2](http://jsfiddle.net/NyQPD/14/) - 在排序前后使用 stop 重新绘制页脚

这似乎可行，但正如我所说，它不像你的那样平滑，因为我的重绘并导致一点闪烁。此外，我不确定`setTimout`当你有一张巨大的桌子时，100 毫秒的通话时间是否足够。

无论哪种方式，我都玩得很开心。我希望这至少会给你一些想法。

### 来自 DEMO v2 的代码

> **HTML**
> note 我`data-title`在`tr`存储标题文本中添加了一个属性，以便能够动态添加它们。请参阅下面的页脚 HTML，所有其他 HTML 保持不变。

```
<tr class="footerrow" data-title="Additional Features"><td></td><td></td><td></td><td></td></tr> 
```

> **脚本**
> 添加了启动回调。如果您有任何问题，请告诉我。

```
$(function() {
    $specialRows = $("#ex7 tr.footerrow");

    $('#ex7').sorttable({
        placeholder: 'placeholder',
        helperCells: ':not(.footerrow td)',
        stop: function(e, ui) {
            // This replaces the 1 cell with 4 and executes before the sorting actually occurs.
            buildFooterTemplates();

            // Adding a small timeout we rever to the single cell with colspan 4
            window.setTimeout(function() {
                buildFooterRows();
            }, 100);
        }
    }).disableSelection();

    var buildFooterTemplate = function(title) {
        return '<td></td><td></td><td></td><td></td>';
    };

    var buildFooterRow = function(title) {
        return '<td colspan="4" align=center>' + title + '</td>';
    };

    var buildFooterTemplates = function() {
        $specialRows.each(function() {
            var $row = $(this);
            var title = $row.attr("data-title");

            $row.empty().append(buildFooterTemplate());
        });
    };

    var buildFooterRows = function() {
        $specialRows.each(function() {
            var $row = $(this);
            var title = $row.attr("data-title");

            $row.empty().append(buildFooterRow(title));
        });
    };

    buildFooterRows();
});​ 
```

# facebook - 在 Facebook 上录制音频

> ID：13654161
> 
> 赞同：2
> 
> 时间：2012-11-30T22:33:36.513
> 
> 标签：facebook, audio, web, record

我想在粉丝页面上创建一个应用程序，允许 Facebook 用户使用他们的麦克风录制音频。这可能吗？

# c++ - 错误实现强类型枚举的语法？

> ID：13654163
> 
> 赞同：4
> 
> 时间：2012-11-30T22:33:45.907
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, ctp

我目前正在测试 Visual Studio 2012 的 11 月 CTP 并遇到了一个有趣的问题：标准是否规定强类型枚举的`enum`和`struct`/`class`关键字必须在同一行中，或者是实现中的错误应该向微软报告吗？

这编译：

```
enum struct name : type { ... 
```

这不是 (C2332)

```
enum
struct name : type { ... 
```

**编辑：**正如詹姆斯所说，这是实施中的一个错误，并已报告给[微软](https://connect.microsoft.com/VisualStudio/feedback/details/773118/bug-in-implementation-of-strongly-typed-enums)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T22:39:13.727

是的，这无疑是一个错误。预处理后换行符不重要。

Microsoft Connect 上的以下问题对此进行了跟踪（致 OP：感谢您打开此错误。）：

> [强类型枚举实现中的错误](https://connect.microsoft.com/VisualStudio/feedback/details/773118/bug-in-implementation-of-strongly-typed-enums)

如果此错误对您很重要，请在 Microsoft Connect 上投票。请注意，有一个简单的解决方法：不要在`enum`and`struct`关键字之间放置换行符。

# php - 关于如何使用我的 API 的想法

> ID：13654165
> 
> 赞同：0
> 
> 时间：2012-11-30T22:33:48.953
> 
> 标签：php, pdo

我了解 mysql_* 正在从未来的 PHP 版本中删除，可能不会有一段时间，但我想迁移我的网站。

我目前依靠 mysql 函数与我的数据库进行通信。

我想创建一组专用于 PDO 接口的函数（[PDO 接口手册](http://uk1.php.net/manual/en/book.pdo.php)）

我只是不知道从哪里开始，以及我的计划是否真的有效。

例子：

```
 <?php
  function PDOFetch($Var)
{
$sth = $dbh->prepare("$Var");
$sth->execute();
$result = $sth->fetchAll();
return $result; 
}

function PDONumb ($Var)
{
$Query = $dbh->prepare("{$Var}");
$Execute->execute();
$count = $Execute->rowCount();
return $count;
}
?> 
```

如果我有一行与函数的恒定连接例如：

```
<?php 
include "PHP/PDOFunctions.php"; 

$UserArray = PDOFetch("SELECT * FROM users WHERE username='$username'");
$Password = $UserArray['Password'];
$UniqueID = $UserArray['UID'];

$ContactInfo = PDOFetch("SELECT * FROM ContactInformation WHERE UID='{$UniqueID}'");
?> 
```

上述解决方案是否是在我的网络服务器上实施的有效且可靠的解决方案？

*我知道代码可能有错误，但我对 PDO API 完全陌生，想要一个好的脚本来处理我的整个查询*

提前致谢

达里尔·吉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:00:21.717

我有一个简单的 PDO 包装类，我已经使用了很长时间了，我刚刚把它扔到我的博客上，所以 [对我来说] 更容易复制/粘贴。

[http://sammitch.ca/2012/11/simple-php-pdo-wrapper-class/](http://sammitch.ca/2012/11/simple-php-pdo-wrapper-class/)

即使您想推出自己的解决方案，它也可以帮助您朝着正确的方向前进。

# c# - 从资源中将 rtf 文件添加到 RichEditControl

> ID：13654167
> 
> 赞同：0
> 
> 时间：2012-11-30T22:33:59.530
> 
> 标签：c#, winforms

我想加载一个 .rtf 文件，该文件位于 Resources 中。并将其添加到 RichEditControl

这是我试过的代码：

```
private void RetardPret_Load(object sender, EventArgs e)
{
  using (Stream stream = GetResourceStream("GestionBib.Properties.Resources.s.rtf"))
    {
      stream.Seek(0, SeekOrigin.Begin);
      richEditControl1.LoadDocument(stream, DocumentFormat.Rtf);
      stream.Close();
    }
}

static Stream GetResourceStream(string resourceName)
{
  return Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName);
} 
```

但我在这一行有一个错误`stream.Seek(0, SeekOrigin.Begin);`：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:46:11.340

我不熟悉您正在使用的第 3 方富文本控件，但这是仅适用于 Microsoft 的标准 RichTextBox 控件的示例（无错误检查）：

```
richTextBox1.Rtf = Properties.Resources.s; 
```

注意：直接引用资源时，扩展名会被丢弃。另外，我直接去了 Rtf 属性，而不是 LoadFile （或您的情况下的 LoadDocument ）。

# python - TypeError：无法将“int”对象隐式转换为str

> ID：13654168
> 
> 赞同：71
> 
> 时间：2012-11-30T22:34:05.630
> 
> 标签：python, string, int, implicit

我正在尝试编写一个文本游戏，但我在定义的函数中遇到了一个错误，它让你在制作角色后基本上可以花费你的技能点。起初，错误表明我试图在这部分代码中从整数中减去一个字符串：`balance - strength`. 显然那是错误的，所以我用`strength = int(strength)`...修复了它，但现在我遇到了这个我以前从未见过的错误（新程序员），我很难理解它到底想告诉我什么以及我如何修复它。

这是我的代码不起作用的部分功能：

```
def attributeSelection():
    balance = 25
    print("Your SP balance is currently 25.")
    strength = input("How much SP do you want to put into strength?")
    strength = int(strength)
    balanceAfterStrength = balance - strength
    if balanceAfterStrength == 0:
        print("Your SP balance is now 0.")
        attributeConfirmation()
    elif strength < 0:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif strength > balance:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif balanceAfterStrength > 0 and balanceAfterStrength < 26:
        print("Ok. You're balance is now at " + balanceAfterStrength + " skill points.")
    else:
        print("That is an invalid input. Restarting attribute selection.")
        attributeSelection() 
```

这是我在 shell 中访问这部分代码时遇到的错误：

```
 Your SP balance is currently 25.
How much SP do you want to put into strength?5
Traceback (most recent call last):
  File "C:\Python32\APOCALYPSE GAME LIBRARY\apocalypseGame.py", line 205, in <module>
    gender()
  File "C:\Python32\APOCALYPSE GAME LIBRARY\apocalypseGame.py", line 22, in gender
    customizationMan()
  File "C:\Python32\APOCALYPSE GAME LIBRARY\apocalypseGame.py", line 54, in customizationMan
    characterConfirmation()
  File "C:\Python32\APOCALYPSE GAME LIBRARY\apocalypseGame.py", line 93, in characterConfirmation
    characterConfirmation()
  File "C:\Python32\APOCALYPSE GAME LIBRARY\apocalypseGame.py", line 85, in characterConfirmation
    attributeSelection()
  File "C:\Python32\APOCALYPSE GAME LIBRARY\apocalypseGame.py", line 143, in attributeSelection
    print("Ok. You're balance is now at " + balanceAfterStrength + " skill points.")
TypeError: Can't convert 'int' object to str implicitly 
```

有谁知道如何解决这个问题？提前谢谢。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-11-30T22:36:25.903

您不能将 a`string`与连接起来`int`。您需要使用该函数将您的转换`int`为 a ，或用于格式化您的输出。`string``str``formatting`

改变： -

```
print("Ok. Your balance is now at " + balanceAfterStrength + " skill points.") 
```

到： -

```
print("Ok. Your balance is now at {} skill points.".format(balanceAfterStrength)) 
```

或者： -

```
print("Ok. Your balance is now at " + str(balanceAfterStrength) + " skill points.") 
```

或根据评论，用于`,`将不同的字符串传递给您的`print`函数，而不是使用连接`+`： -

```
print("Ok. Your balance is now at ", balanceAfterStrength, " skill points.") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-24T01:44:44.100

```
def attributeSelection():
balance = 25
print("Your SP balance is currently 25.")
strength = input("How much SP do you want to put into strength?")
balanceAfterStrength = balance - int(strength)
if balanceAfterStrength == 0:
    print("Your SP balance is now 0.")
    attributeConfirmation()
elif strength < 0:
    print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
    attributeSelection()
elif strength > balance:
    print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
    attributeSelection()
elif balanceAfterStrength > 0 and balanceAfterStrength < 26:
    print("Ok. You're balance is now at " + str(balanceAfterStrength) + " skill points.")
else:
    print("That is an invalid input. Restarting attribute selection.")
    attributeSelection() 
```

# java - GridBagLayout 坐标混乱

> ID：13654172
> 
> 赞同：0
> 
> 时间：2012-11-30T22:34:34.527
> 
> 标签：java, swing, gridbaglayout

您好，我是 jav 的初学者和 Java 中的地址簿编码，因为我正在使用 GridBagLayout。`JTextArea` 坐标见附图 `gridx=0`；`gridy=0` 并且对于`JButton1` `gridx=1;`和`gridy=0;`但我很困惑，`Jbutton2` 因为我确实尝试过`gridx=1`，`gridy=1`但是（也尝试过其他溶胶）但是没有绘制在正确的位置，如附图所示..请有人能澄清一下，我真的被困住了！我在油漆上画了这张照片，以展示我正在尝试做的事情，

![在此处输入图像描述](../Images/8ef76fecf26007e439285dc70e5f469a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:41:44.103

当您刚开始学习布局管理器时，GridBagLayout 并不是那么友好。您应该从更简单的布局管理器开始，例如 BoxLayout 甚至 GridLayout。

这[是布局管理器及其功能的出色视觉比较](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

例如，您可以为您的 JFrame 使用 BoxLayout (Vertical)，然后首先将您的 JFrame 分成 2 个 JPanel。我们将调用这 2 个 JPanel`top`和`bottom`：

*   `top`可以容纳JTextArea，JButton1,2,3
    *   `top`本身可以使用 BoxLayout (Horizo​​ntal) 在其内部管理/保存 2 个 JPanel：`top_left`和`top_right`
    *   `top_left`可以容纳 JTextArea，并且不需要布局管理器，因为它只有一个元素。
    *   `top_right`可以容纳 JButtons 1-3，并再次使用 BoxLayout（垂直）
*   `bottom`可以容纳 JButton4,5 和 JTextField

希望这足以向您展示如何分解 Java GUI 的分层概念。

# java - 创新 HTTP 客户端 - 如何设置 SSL 以接受所有服务器证书？

> ID：13654173
> 
> 赞同：1
> 
> 时间：2012-11-30T22:34:55.720
> 
> 标签：java, ssl, https, innovation

我计划使用创新 HTTP 客户端通过 HTTPS 连接到服务器。

我需要能够接受所有服务器 SSL 证书。

有一些使用 HttpsURLConnection 的[示例](https://stackoverflow.com/questions/6292799/basic-authentication-with-https?rq=1)，但我需要使用 Innovation 实现。

有没有人有任何[创新 HTTP 客户端](http://www.innovation.ch/java/HTTPClient/)的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:58:36.853

创新 HTTPClient 不直接支持 HTTPS。有关更多信息，请参见[创新网站上的此页面。](http://www.innovation.ch/java/HTTPClient/https.html)那里列出了许多可以实施的 3rd 方补丁和示例。设置证书接受取决于您选择的补丁实施。

**编辑/更新**

请注意，`JSSE SSL`正在使用实现，目的是定义 a`TrustedManager`并将其绑定到`SSLContext`to `HTTPConnection`。

假设您知道如何创建一个`TrustManager`，下面的代码是从[这个 Stackoverflow 页面](https://stackoverflow.com/questions/995514/https-connection-android#1000205)中选择的，它还显示了如何生成一个。

```
TrustManager[] trustAllCerts = new TrustManager[] { ... };

// Install the all-trusting trust manager
try {
    SSLContext sc = SSLContext.getInstance("TLS");
    sc.init(null, trustAllCerts, new java.security.SecureRandom()); 
```

根据我之前从创新网站链接的 JSSE SSL 下载中获得的 README 文件，您可以通过执行以下操作将其分配给 HTTPConnection：

```
 // Attach context to connection via socket factory
    HTTPConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

} catch (Exception e) { ... } 
```

# r - 如何从预格式化的 HTML 文本创建数据框

> ID：13654178
> 
> 赞同：1
> 
> 时间：2012-11-30T22:35:43.927
> 
> 标签：r, web-scraping

我想在 R 中分析一些地震数据。源 HTML 中的一个典型（许多）输出是

```
<pre>
Year,Month,Day,Time(hhmmss.mm)UTC,Latitude,Longitude,Magnitude,Depth,Catalog
2012, 01,   01,  003008.77,      12.008,    143.487,  5.1,      35,  PDE-W
.....
</pre> 
```

我已经设法将逗号分隔的数据转换为一个字符串，其中 \n 应该分隔行，但不清楚如何进一步进行 - 并且不确定这是最好的方法。

```
 library(XML)
 url <- "http://neic.usgs.gov/cgi-bin/epic/epic.cgi?SEARCHMETHOD=1&FILEFORMAT=6&SEARCHRANGE=HH&SYEAR=2012&SMONTH=01&SDAY=01&EYEAR=2012&EMONTH=1&EDAY=31&LMAG=4&UMAG=&NDEP1=&NDEP2=&IO1=&IO2=&CLAT=0.0&CLON=0.0&CRAD=0.0&SUBMIT=Submit+Search"
 data <- xpathSApply(basicInfo, "//*/pre/text()", xmlValue)
 str(data) #chr "\n Year,Month,Day, .... Catalog\n  2012, 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:00:54.573

```
data.df <- read.table(text = data, fill=TRUE, sep = ',',header=TRUE) 
```

你得到

```
head(data.df)
  Year Month Day Time.hhmmss.mm.UTC Latitude Longitude Magnitude Depth Catalog
1 2012     1   1            3008.77   12.008   143.487       5.1    35   PDE-W
2 2012     1   1            4342.77   12.014   143.536       4.4    35   PDE-W
3 2012     1   1            5008.04  -11.366   166.218       5.3    67   PDE-W
4 2012     1   1           12207.66   -6.747   130.007       4.2   145   PDE-W
5 2012     1   1           23521.11   23.472    91.834       4.6    27   PDE-W
6 2012     1   1           24036.40    6.677   -73.110       4.0   158   PDE-W 
```

# ruby-on-rails - '拦截' ActiveRecord::Relation 的 ARel 而不杀死一只小猫

> ID：13654185
> 
> 赞同：2
> 
> 时间：2012-11-30T22:37:00.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, arel

在我正在制作的 gem 中，我想允许开发人员以经典的 Devise 语法将我编写的类方法添加`interceptor`到模型中，我们称之为模型：

```
class User < ActiveRecord::Base
  has_interceptor
end 
```

这允许您调用`User.interceptor`，它返回一个`Interceptor`对象，该对象通过`Squeel`gem 查询数据库来做一些神奇的事情。都好。

但是，我想首先找到一种允许开发人员确定拦截器执行的查询范围的优雅方式。这可以通过允许`interceptor`接受`ActiveRecord::Relation`和链接`Squeel`来实现，否则会退回到模型上。此实现的工作原理如下：

```
# Builds on blank ARel from User:
User.interceptor.perform_magic
#=> "SELECT `users`.* FROM `users` WHERE interceptor magic"

# Build on scoped ARel from Relation:
User.interceptor( User.where('name LIKE (?)', 'chris') ).perform_magic
#=> "SELECT `users`.* FROM `users`  WHERE `users`.`name` LIKE 'chris' AND  interceptor magic" 
```

这是有效的，但丑陋的。我真正想要的是：

```
# Build on scoped ARel:
User.where('name LIKE (?)', 'chris').interceptor.perform_magic
#=> "SELECT `users`.* FROM `users`  WHERE `users`.`name` LIKE 'chris' AND  interceptor magic" 
```

本质上，我想“接入”`ActiveRecord::Relation`链并窃取它的 ARel，将其传递到我的`Interceptor`对象中以在我评估它之前对其进行修改。但是我能想到的每一种方法都涉及到如此可怕的代码，我知道如果我实现它，上帝会杀了一只小猫。我不需要我手上的血。帮我救一只小猫？

# 问题：

增加了我的并发症，

```
class User < ActiveRecord::Base
  has_interceptor :other_interceptor_name
end 
```

允许你调用`User.other_interceptor_name`，模型可以有多个拦截器。它运作良好，但使用`method_missing`比平常更糟糕的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:24:25.637

毕竟，我最终破解了`ActiveRecord::Relation`'s ，结果并没有变得太丑陋。`method_missing`这是从头到尾的完整过程。

我的 gem 定义了一个`Interceptor`类，旨在成为开发人员可以子类化的 DSL。该对象从 a或 a接收一些`root`ARel，并在渲染之前进一步操作查询。`Model``Relation`

```
# gem/app/interceptors/interceptor.rb
class Interceptor
  attr_accessor :name, :root, :model
  def initialize(name, root)
    self.name = name
    self.root = root
    self.model = root.respond_to?(:klass) ? root.klass : root
  end
  def render
    self.root.apply_dsl_methods.all.to_json
  end
  ...DSL methods...
end 
```

实施的：

```
# sample/app/interceptors/user_interceptor.rb
class UserInterceptor < Interceptor
  ...DSL...
end 
```

然后我给模型`has_interceptor`定义新拦截器并构建`interceptors`映射的方法：

```
# gem/lib/interceptors/model_additions.rb
module Interceptor::ModelAdditions

  def has_interceptor(name=:interceptor, klass=Interceptor)
    cattr_accessor :interceptors unless self.respond_to? :interceptors
    self.interceptors ||= {}
    if self.has_interceptor? name
      raise Interceptor::NameError,
        "#{self.name} already has a interceptor with the name '#{name}'. "\
        "Please supply a parameter to has_interceptor other than:"\
        "#{self.interceptors.join(', ')}"
    else
      self.interceptors[name] = klass
      cattr_accessor name
      # Creates new Interceptor that builds off the Model
      self.send("#{name}=", klass.new(name, self))
    end
  end

  def has_interceptor?(name=:interceptor)
    self.respond_to? :interceptors and self.interceptors.keys.include? name.to_s
  end

end

ActiveRecord::Base.extend Interceptor::ModelAdditions 
```

实施的：

```
# sample/app/models/user.rb
class User < ActiveRecord::Base
  # User.interceptor, uses default Interceptor Class
  has_interceptor
  # User.custom_interceptor, uses custom CustomInterceptor Class
  has_interceptor :custom_interceptor, CustomInterceptor

  # User.interceptors #show interceptor mappings
  #=> {
  #     interceptor: #<Class:Interceptor>,
  #     custom_interceptor: #<Class:CustomInterceptor>
  #   }
  # User.custom_interceptor #gets an instance
  #=> #<CustomInterceptor:0x005h3h234h33>
end 
```

仅凭这一点，您就可以调用 User.interceptor 并构建`Interceptor`一个干净的查询作为所有拦截器查询操作的根。但是，通过更多的努力，我们可以扩展`ActiveRecord::Relation`，以便您可以将拦截器方法作为范围链中的端点调用：

```
# gem/lib/interceptor/relation_additions.rb
module Interceptor::RelationAdditions

  delegate :has_interceptor?, to: :klass

  def respond_to?(method, include_private = false)
    self.has_interceptor? method
  end

protected

  def method_missing(method, *args, &block)
    if self.has_interceptor? method
      # Creates new Interceptor that builds off of a Relation
      self.klass.interceptors[method.to_s].new(method.to_s, self)
    else
      super
    end
  end

end

ActiveRecord::Relation.send :include, Interceptor::RelationAdditions 
```

现在，将在您在模型上构建的任何查询之上`User.where('created_at > (?)', Time.current - 2.weeks).custom_interceptor`应用 DSL 中设置的所有范围。`Interceptor`

# arrays - 地图中的 Python Pygame 2D 游戏时间

> ID：13654187
> 
> 赞同：-1
> 
> 时间：2012-11-30T22:37:12.960
> 
> 标签：arrays, map, pygame, tiles-game

好吧，我以前试过问这个，但我还没有真正到达任何地方。我希望我能解释我想做的足够好。我将通过我到目前为止的所有代码。

*   我试图创建一个 2D 游戏，就像练习更好地了解 pygame 和 python。
*   游戏将基本上像NES Zelda游戏（第一个）
*   现在我想重新创建一个自上而下的屏幕。网格上 16x16 像素的简单精灵。
*   现在在你们的大力帮助下，我已经了解了如何使用两个“for”语句（上图）在一个漂亮的紧凑 def 中创建网格。

    ```
    def drawMapArray(maparray):
    for x in range(0, xTile):
        for y in range(0, yTile):
            current_tile = tile_dict[maparray[x, y]]
            screen.blit(current_tile, (x*spritesize, y*spritesize)) 
    ```

*   现在我想做的是从另一个文件中获取地图，从 png 文件中绘制出网格上的图块。所以如果我的屏幕是 8 x 4 块：

    ```
     1 0 2 2 2 3 2 3
     3 0 0 0 0 1 0 0 
     4 4 4 4 4 1 1 1
     1 1 1 3 3 3 4 4

     1 = thing1.png
     2 = thing2.png
     3 = thing3.png
     4 = thing4.png 
    ```

*   因此，我可以以某种方式将其导入到 maparray 中，以便每个图块都有正确的 .png 文件显示在网格上。我将如何让这种情况发生？下面是我的代码。

    ```
    import numpy
    import pygame
    import sys
    from pygame.locals import *

    pygame.init()

    fpsClock = pygame.time.Clock()

    #print help(numpy)

    resmulti=3
    spritesize=16*resmulti
    resolution=(256*resmulti,224*resmulti)
    screen = pygame.display.set_mode((resolution[0], resolution[1]))
    pygame.display.set_caption("testing.")

    xTile = 2
    yTile = 2

    gameRunning = True
    groundArray = numpy.ones((xTile,yTile))
    ###################################
    ######### Image Manipulation ######
    ###################################
    def pngLoad(imgloc, size, flipx, flipy):
        img = pygame.image.load(imgloc).convert_alpha()
        if size > 1:
            #pygame.transform.scale(Surface, (width, height), DestSurface = None): return Surface
            img = pygame.transform.scale(img, (img.get_width()*size, img.get_height()*size))
        if flipx == 1:
            #pygame.transform.flip(Surface, xbool, ybool)
            img = pygame.transform.flip(img, True, False)
        if flipy == 1:
            img = pygame.transform.flip(img, False, True)

        return img

    ###################################
    ######### All Image Tiles #########
    ###################################
    tile_dict = {3 : pngLoad("link1.png", resmulti,0,0),
                 2 : pngLoad("shrub_01.png", resmulti,0,0),
                 1 : pngLoad("tanback.png", resmulti,0,0)
                }

    def drawMapArray(maparray):
        for x in range(0, xTile):
            for y in range(0, yTile):
                #Determines tile type.
                current_tile = tile_dict[maparray[x, y]]
                screen.blit(current_tile, (x*spritesize, y*spritesize))

    while gameRunning:
        drawMapArray(groundArray)

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                gameRunning = False
                break

        #Updates display and then sets FPS to 30 FPS.
        pygame.display.update()
        fpsClock.tick(30)

    pygame.quit() 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:07:18.780

这个例子使用 spritesheet 作为瓷砖，numpy 用于二维瓷砖数组。[https://stackoverflow.com/a/12665286/341744](https://stackoverflow.com/a/12665286/341744)

# grid - 在网站内移动页面

> ID：13654188
> 
> 赞同：0
> 
> 时间：2012-11-30T22:37:31.683
> 
> 标签：grid, containers, shift, fluid

我刚刚完成将所有内容添加到我网站的每个页面。然而，我注意到，当我在链接之间导航时，一些页面向右移动了大约 10 像素左右。这*非常*令人恼火。我的所有页面都使用流体网格包含在同一个容器中。但是，并非所有页面都具有相同数量的内容。我注意到当我在它们之间导航时，带有空 div 的页面不会移动。但是，如果我从有内容的页面导航到内容很少或没有内容的页面，我会看到这种转变。如果我的所有页面都使用相同的容器、相同的流体网格，是否会发生这种情况？这有意义吗？你能感觉到我的绝望吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:55:05.360

你看过你的浏览器垂直滚动吗？这可能是你的绝望;-)

# sql - 使用自联接优化 SQL 视图/查询

> ID：13654190
> 
> 赞同：0
> 
> 时间：2012-11-30T22:37:42.997
> 
> 标签：sql, sql-server-2005

我是一个运行 SQL SERVER 2005 的极端新手。我有两个表，我将它们放在一个视图中。第一个表只有 2 列进入视图。一列是 ID 号，另一列是名称。第二个表是所有数据所在的位置。该表中的列是 ID、日期、小时、价格类型、市场类型和价格。我的目标是有一个将 PriceType 过滤为固定值的视图，然后在 MarketType 为 DAM 时获取价格与 MarketType 为 RTM 的价格之间的差异。现在看起来像下面这样......

```
SELECT dbo.nodes.commonname,
       dbo.nodes.node_id,
       da.pricedate,
       da.hour,
       rt.price            AS rtm,
       da.price            AS dam,
       da.price - rt.price AS dart
FROM   dbo.pnodes
       INNER JOIN dbo.pnode_prices AS da
               ON dbo.pnodes.node_id = da.pnode_id
       INNER JOIN dbo.pnode_prices AS rt
               ON dbo.pnodes.node_id = rt.pnode_id
                  AND da.pricetype = rt.pricetype
                  AND da.pricedate = rt.pricedate
                  AND da.hour = rt.hour
WHERE  ( da.pricetype = 'LMP' )
       AND ( da.markettype = 'DAM' )
       AND ( rt.markettype = 'RTM' ) 
```

这种观点本身并不需要很长时间。有时我想更进一步，并在两个视图之间产生差异，我将在其中运行一个查询，加入上述视图并获取 Price 的差异`where view1.CommonName=abc and view2.CommonName=xyz`。当我运行该查询时，运行时间是单独运行简单视图所需时间的 10 倍。我假设如果我以最佳方式做事，它不会花费 10 倍的时间。我可以做些什么来改善这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:56:33.343

总体而言，您的查询看起来不错，但作为视图运行，显然不适合您。也就是说，我想对查询进行轻微的重组。将 WHERE 条件移动到 JOIN 组件中。

确保您在将应用过滤器的节点表上的 CommonName 上有一个索引。在 price_nodes 表上，在 ( node_id, markettype, pricetype ) 上有一个复合索引。

```
SELECT 
      N.commonname,
      N.node_id,
      da.pricedate,
      da.hour,
      rt.price            AS rtm,
      da.price            AS dam,
      da.price - rt.price AS dart
   FROM
      dbo.pnodes N

         INNER JOIN dbo.pnode_prices AS da
               ON N.node_id = da.pnode_id
              AND da.markettype = 'DAM'
              AND da.pricetype = 'LMP'

            INNER JOIN dbo.pnode_prices AS rt
               ON da.node_id = rt.pnode_id
              AND rt.markettype = 'RTM'
              AND da.pricetype = rt.pricetype
              AND da.pricedate = rt.pricedate
              AND da.hour = rt.hour 
```

这样，where 子句可以完全依赖于您公司 A 与 B 的情况。其余的联接基于它们的“node_id”。由于 node_id 已经从 pNodes 到 da.node_id，所以我还连接到从“da”链接的“rt”，所以使用 da.Node_id 到 rt.node_id。这可能是引擎卡住的一件事。

# c# - 使用自己的应用程序打开自定义文件

> ID：13654197
> 
> 赞同：5
> 
> 时间：2012-11-30T22:38:12.023
> 
> 标签：c#, visual-studio-2012

> **可能重复：**
> [如何将文件扩展名关联到 C# 中的当前可执行文件](https://stackoverflow.com/questions/69761/how-to-associate-a-file-extension-to-the-current-executable-in-c-sharp)

所以，我正在申请学校（最终项目）。

在这个应用程序中，我有一个`Project`-class。这可以保存为自定义文件，例如测试。**GPRS**。（.gpr 是扩展名）。

如何让 Windows/我的应用程序将 .gpr 文件与此应用程序相关联，以便如果我双击 .gpr 文件，我的应用程序会触发并打开文件（因此启动 OpenProject 方法 - 这会加载项目）。

我**不是**在问如何让 Windows 将文件类型与应用程序相关联，而是在问如何在 Visual Studio 2012 的代码中捕捉到这一点。

**更新：** 由于我的问题似乎不太清楚：

> atm，我什么都没做，所以我可以遵循最好的解决方案。我想要的只是双击.gpr，确保windows知道用我的应用程序打开它，并在我的应用程序中捕获文件路径。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T22:57:36.620

当您使用应用程序打开文件时，该文件的路径将作为第**一个命令行参数**传递。

在 C# 中，这是`args[0]`您的`Main`方法。

```
static void Main(string[] args)
{
    if(args.Length == 1) //make sure an argument is passed
    {
        FileInfo file = new FileInfo(args[0]);
        if(file.Exists) //make sure it's actually a file
        {
           //Do whatever
        }
    }

    //...
} 
```

* * *

# WPF

如果您的项目是 WPF 应用程序，请在您`App.xaml`添加`Startup`事件处理程序：

```
<Application x:Class="WpfApplication1.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml"
             Startup="Application_Startup"> <!--this line added-->
    <Application.Resources>

    </Application.Resources>
</Application> 
```

您的命令行参数现在将位于`e.Args`事件`Application_Startup`处理程序中：

```
private void Application_Startup(object sender, StartupEventArgs e)
{
    if(e.Args.Length == 1) //make sure an argument is passed
    {
        FileInfo file = new FileInfo(e.Args[0]);
        if(file.Exists) //make sure it's actually a file
        {
           //Do whatever
        }
    }
} 
```

# algorithm - 子集选择

> ID：13654199
> 
> 赞同：0
> 
> 时间：2012-11-30T22:38:25.133
> 
> 标签：algorithm, optimization

我有以下选择问题：给定 N 个项目的总体，每个项目具有 +ve 成本（C_i）并给定用户输入 k 和总成本 S。从 N 个项目的总体中找到最优的 k 个项目，使得 abs( S-sum(C_i)) 是最小值。

将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:00:56.040

您对 N 或 S 有限制吗？如果 N 很小，您可以尝试所有子集。如果 S 很小，您可以用背包解决它（查找 min sum(C_i)>=​​S 和 max sum(C_i)<=S）

# android - 后退按钮不会出现在 Honeycomb 上，但会出现在 Ice Cream Sandwich

> ID：13654204
> 
> 赞同：1
> 
> 时间：2012-11-30T22:38:45.110
> 
> 标签：android, android-actionbar, android-4.0-ice-cream-sandwich, android-3.0-honeycomb, android-theme

我在右上角有一个菜单并且左上角应该有后退按钮的应用程序中使用 ActionBar。我有两台 Xoom 平板电脑：一台运行 Honeycomb，另一台运行 ICS。ICS 数位板正确显示左上角的后退按钮，而蜂窝数位板则没有。有什么建议么？

我有一种感觉，这可能是一个主题问题。我有两个单独的 theme.xml 文件：一个用于蜂窝，一个用于 ICS。

蜂窝主题.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="custom_theme" parent="android:Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/content_direct_theme.ActionBar</item>
        <item name="android:homeAsUpIndicator">@drawable/logowithbackarrow</item>
        <item name="android:actionMenuTextColor">?android:attr/textColorPrimaryInverse</item>
        <item name="android:actionModeStyle">@style/ActionModeInverse</item>
        <item name="android:actionOverflowButtonStyle">@android:style/Widget.Holo.ActionButton.Overflow</item>
    </style>
    <style name="custom_alert_dialog" parent="android:Theme.Dialog">
        <item name="android:textColor">?android:attr/textColorPrimaryDisableOnly</item>
    </style>
    <style name="custom_theme.ActionBar" parent="@android:style/Widget.Holo.Light.ActionBar.Solid.Inverse">
        <item name="android:background">@drawable/dark_gradient</item>
    </style>
</resources> 
```

ICS 主题.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="custom_theme" parent="android:Theme.Holo.Light.DarkActionBar">
    </style>
    <style name="custom_dialog" parent="android:Theme.Dialog">
        <item name="android:textColor">?android:attr/textColorPrimaryDisableOnly</item>
    </style>
</resources> 
```

注意：我不能为 Honeycomb 使用 Theme.Holo.Light.DarkActionBar 主题，因为文本看起来很奇怪。

# tomcat - 在 Jenkins 的类路径中添加 catalina-ant.jar

> ID：13654205
> 
> 赞同：3
> 
> 时间：2012-11-30T22:38:49.847
> 
> 标签：tomcat, ant, jenkins, hudson, catalina

我想在 Jenkins 的类路径中添加 catalina-ant.jar 以便能够在我的 ant 脚本中使用任务定义，例如：

```
<taskdef name="start" classname="org.apache.catalina.ant.StartTask" /> 
```

我已经在 Tomcat 中部署了 jenkins 战争文件。我该如何添加它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:32:30.143

最好的办法是将这个 jar 添加到 Jenkins 中配置的 ANT 发行版中：

```
$ANT_HOME/lib 
```

或者在 jenkins 主目录下，如下所示：

```
$HOME/.ant/lib 
```

在 Debian 上，这将是：

```
/var/lib/jenkins/.ant/lib 
```

# internet-explorer-8 - twitter 引导程序：IE*8 错误，在 chrome 中看不到

> ID：13654207
> 
> 赞同：1
> 
> 时间：2012-11-30T22:38:53.800
> 
> 标签：internet-explorer-8, twitter-bootstrap

我正在尝试在我的网站中实现[https://github.com/jackilyn/bootstrap-contact/上的引导表单。](https://github.com/jackilyn/bootstrap-contact/)集成后它在 chrome 中运行良好，但在 IE8 中，我得到：

```
Couldn't load http://localhost/my_project/index.php/my_controller/assets/less/reset.less (404) 
```

在 IE8 中，CSS 似乎不起作用。有没有什么办法解决这一问题？

谢谢，

账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:10:06.127

你需要在你的 bootstrap.less 文件中包含这个文件（reset.less），然后重新编译 less。带有 .less 的文件是用来编译的，而不是由浏览器提供的。

如果您没有编译自己的 .less - 您也许可以将 .less 填充更改为普通的 .css 文件。

这是 bootstrap.less 文件的链接：
[https ://github.com/twitter/bootstrap/blob/master/less/bootstrap.less](https://github.com/twitter/bootstrap/blob/master/less/bootstrap.less)

# regex - 当引号不阻止消息时，关于 csv 正则表达式的建议

> ID：13654214
> 
> 赞同：0
> 
> 时间：2012-11-30T22:39:15.907
> 
> 标签：regex, csv, comma

我有一个已创建的 CSV，它不引用列中的文本注释并包含新行。

[带有逗号且没有引号的 csv 正则表达式](https://stackoverflow.com/questions/11469655/regular-expression-for-csv-with-commas-and-no-quotes)是一个类似的问题，但他没有另一行或其他列可以解析。

csv 中的一行文本可能如下所示：

```
 1, 15231, 123123, 1231, word word word, YYYY-MM-DD HH:mm:ss.sss, 13453, **This would be the section with any character for users to communicate and the db stores and 
new lines to record communication**, YYYY-MM-DD HH:mm:ss.sss, User name, 12412413, 01231231, 123,12,,*ASTERIX USED*, YYYY-MM-DD HH:mm:ss.sss 
```

然后另一条新线和类似的东西会解析，

到目前为止，我已经尝试过了

```
/(\d+?),(\d+?),(\d+?),(\d+?),(.+?),(.+?),(.+?),(.+?),(.+?),(.+?),(.+?),(.+?),(.+?),(.+?),(.+(?=,\d{4})), 
```

但是，如果 csv 的评论部分中有日期参考，我似乎无法超越这些实例。

对正则表达式来说非常新， (?=) 对我来说是新的，因为我必须超越简单的正则表达式模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:50:16.570

如果您知道应该有的确切字段数，则可以使用以下方法：

*   对于每个不包含逗号的“普通”字段，使用`[^,]*`
*   对于可能包含逗号的用户输入字段，请使用`.*`
*   用逗号分隔每个字段

例如，如果您有五个总字段并且第三个由用户输入，您将使用以下正则表达式：

```
([^,]*),([^,]*),(.*),([^,]*),([^,]*) 
```

示例：[http ://www.rubular.com/r/E6785bWW0R](http://www.rubular.com/r/E6785bWW0R)

如果用户输入的字段可能包含换行符，请确保启用该选项以`.`匹配换行符（通常是`s`，或类似的常量`DOTALL`，在某些语言中，您可以在正则表达式前加上`(?s)`）。或者，只需替换`.*`为`[\s\S]*`，无论使用何种选项，它都会匹配任何内容。

# html - 设置要运行的 html 链接默认操作

> ID：13654221
> 
> 赞同：0
> 
> 时间：2012-11-30T22:39:58.130
> 
> 标签：html, google-chrome

我们的网站上有指向 filename.exe 的链接。我们希望运行默认操作（是的，首先询问用户是否可以）。一个普通的链接会为 IE 做到这一点。但对于 Chrome，它总是会下载。

a 节点是否有一个属性告诉浏览器询问用户是否要运行应用程序？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:55:48.853

我非常怀疑是否可以这样做，因为它取决于浏览器的默认设置。我可能错了……？

# mysql - MySQL User() 只返回这么多字符

> ID：13654226
> 
> 赞同：0
> 
> 时间：2012-11-30T22:41:02.697
> 
> 标签：mysql, character

我正在使用 User() 来填充一个返回类似 (admin@localhost) 的表。

我将如何返回

1）只有@左边的项目（如果可能的话）

和

2) 只有前 10 个字符（如果像 AnnaMariaSmith@localhost，只返回 AnnaMariaS）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:43:19.453

大概是这样的？

```
SELECT LEFT(USER(), LOCATE('@',USER()) - 1) 
```

## [看到它在行动](http://sqlfiddle.com/#!2/d41d8/4459)

如果您只想要上面结果的前 10 个字符，只需另一个`LEFT`函数：

```
SELECT LEFT(LEFT(USER(), LOCATE('@',USER()) - 1), 10) 
```

# android - Android 蓝牙 socket.connect 失败；抛出 java IO 异常

> ID：13654227
> 
> 赞同：3
> 
> 时间：2012-11-30T22:41:04.773
> 
> 标签：android, io, bluetooth, java-io

我正在使用从 Android 开发者页面上的蓝牙教程派生的代码。我的应用程序尝试连接到 BT 秤并记录重量信息。

我的程序在尝试执行 BluetoothSocket.connect() 时抛出错误；该程序作为蓝牙客户端/从属设备运行，以便从 BT 设备接收数据。用户在屏幕上看到配对设备列表，然后单击特定设备以连接到它。

因此，当用户单击特定设备时，应用程序会尝试连接到它，因为该设备已经预先配对。

应用获取 BluetoothSocket 但无法执行 connect()

我试图与其他蓝牙设备建立连接，但我总是一遍又一遍地遇到同样的错误。

下面是connectThread的java代码：

```
private class ConnectThread extends Thread {

        private final BluetoothSocket mmSocket;
        private final BluetoothDevice mmDevice;

        public ConnectThread(BluetoothDevice device) {
            // Use a temporary object that is later assigned to mmSocket,
            // because mmSocket is final
            BluetoothSocket tmp = null;
            mmDevice = device;
            Log.i(tag, "construct");
            // Get a BluetoothSocket to connect with the given BluetoothDevice
            try {
                // MY_UUID is the app's UUID string, also used by the server code
                tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
            } catch (IOException e) { 
                Log.i(tag, "get socket failed");

            }
            mmSocket = tmp;
        }

        public void run() {
            // Cancel discovery because it will slow down the connection
            btAdapter.cancelDiscovery();
            Log.i(tag, "connect - run");
            try {
                // Connect the device through the socket. This will block
                // until it succeeds or throws an exception
                mmSocket.connect();
                Log.i(tag, "connect - succeeded");
            } catch (IOException connectException) {    Log.i(tag, "connect failed");
                // Unable to connect; close the socket and get out
                try {
                    mmSocket.close();
                } catch (IOException closeException) { }
                return;
            }

            // Do work to manage the connection (in a separate thread)

            mHandler.obtainMessage(SUCCESS_CONNECT, mmSocket).sendToTarget();
        } 
```

应用程序的完整代码可以在**[这里找到](http://pastebin.com/kaBthsYk)**

以下是我在运行应用程序时获得的日志：

```
01-01 01:46:00.359: I/ActivityManager(1553): Displayed com.test.bluetooth/.Main_Activity: +579ms
01-01 01:46:00.953: D/BluetoothService(1553): updateDeviceServiceChannelCache(00:10:C6:2E:CB:C3)
01-01 01:46:00.968: D/BluetoothService(1553): updateDeviceServiceChannelCache(00:19:15:66:C4:2D)
01-01 01:46:00.984: D/BluetoothService(1553): updateDeviceServiceChannelCache(00:1A:88:00:01:25)
01-01 01:46:01.000: D/BluetoothService(1553):   uuid(system): 00001105-0000-1000-8000-00805f9b34fb 1
01-01 01:46:04.421: I/debugging(2400): construct
01-01 01:46:04.421: D/BluetoothEventLoop(1553): Property Changed: Discovering : false
01-01 01:46:04.421: I/debugging(2400): in click listener
01-01 01:46:04.421: E/BluetoothService.cpp(1553): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
01-01 01:46:04.429: E/BluetoothService.cpp(1553): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
01-01 01:46:04.437: I/debugging(2400): connect - run
01-01 01:46:04.437: V/BluetoothDiscoveryReceiver(1864): Received: android.bluetooth.adapter.action.DISCOVERY_FINISHED
01-01 01:46:04.445: E/BluetoothEventLoop.cpp(1553): onCreateDeviceResult: D-Bus error: org.bluez.Error.AlreadyExists (Already Exists)
01-01 01:46:05.484: D/BluetoothEventLoop(1553): Device property changed: 00:10:C6:2E:CB:C3 property: Connected value: true
01-01 01:46:06.554: D/BluetoothService(1553): updateDeviceServiceChannelCache(00:10:C6:2E:CB:C3)
01-01 01:46:06.562: D/BluetoothService(1553):   uuid(application): 00001101-0000-1000-8000-00805f9b34fb 1
01-01 01:46:06.562: D/BluetoothService(1553): Making callback for 00001101-0000-1000-8000-00805f9b34fb with result 1
01-01 01:46:06.562: I/debugging(2400): connect failed
01-01 01:46:06.562: W/System.err(2400): java.io.IOException: Invalid argument
01-01 01:46:06.562: W/System.err(2400):     at android.bluetooth.BluetoothSocket.connectNative(Native Method)
01-01 01:46:06.562: W/System.err(2400):     at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:216)
01-01 01:46:06.562: W/System.err(2400):     at com.test.bluetooth.Main_Activity$ConnectThread.run(Main_Activity.java:326)
01-01 01:46:10.132: D/BluetoothEventLoop(1553): Device property changed: 00:10:C6:2E:CB:C3 property: Connected value: false
01-01 01:47:05.914: D/SurfaceFlinger(1311): About to give-up screen, flinger = 0x41876af0 
```

*非常感谢任何/所有帮助以建立基本的 BT 连接。*

*谢谢你。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:16:29.390

检查以确保您使用的 UUID 适合您尝试连接的设备类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-01T15:22:19.323

连接到手机以外的蓝牙设备时遇到同样的问题。更改 UUID 值对我有用。早些时候，我在[https://github.com/googlesamples/android-BluetoothChat/blob/master/Application/src/main/java/com/example/android/bluetoothchat/BluetoothChatService.java](https://github.com/googlesamples/android-BluetoothChat/blob/master/Application/src/main/java/com/example/android/bluetoothchat/BluetoothChatService.java)使用了 UUID 值， 但这是针对移动设备的蓝牙设备然后我用 00001101-0000-1000-8000-00805F9B34FB 更改了我的 UUID 并且它可以工作

# mysql - 带有连字符的 MySQL 存储过程

> ID：13654228
> 
> 赞同：0
> 
> 时间：2012-11-30T22:41:06.053
> 
> 标签：mysql, stored-procedures, hyphen

我有一个可以工作的存储过程，但是当我传递一个带有连字符的值时，它会出错。

我用 call create('server-v01',555); 之类的值调用我的过程 我收到以下错误：

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“-v01”附近使用正确的语法

我的程序如下：

```
DELIMITER $$
CREATE PROCEDURE ct(tname varchar(20), sessionsnum INT(11))
BEGIN
DECLARE maxnum INT;
SET @s = CONCAT('INSERT INTO sessions_poll (server_name,sessions_num)                VALUES(''',tname,''',',sessionsnum,')');
PREPARE stm FROM @s;
EXECUTE stm;
SET @s = CONCAT('DROP TABLE IF EXISTS ', tname);
PREPARE stm FROM @s;
EXECUTE stm;
SET @s = CONCAT('CREATE TABLE ', tname, ' (num INT, max INT)');
PREPARE stm FROM @s;
EXECUTE stm;
SELECT @maxnum:=max(sessions_num) INTO maxnum FROM sessions_poll WHERE server_name=tname AND DATE(ts)=CURDATE();
SET @s = CONCAT('INSERT INTO ', tname, ' (num,max) VALUES (', sessionsnum,',',maxnum,')');
PREPARE stm FROM @s;
EXECUTE stm;
END $$
DELIMITER ; 
```

我的问题是，如何处理带有连字符的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:45:00.567

您的问题不是如何处理带有破折号的变量，而是如何处理带有破折号的表格。您的过程尝试使用在 中指定的名称创建一个表`tname`。要创建（或删除）这样的表，您需要用反引号引用它。

```
DROP TABLE IF EXISTS `server-01`; 
```

特别是你需要

```
SET @s = CONCAT('DROP TABLE IF EXISTS `', tname, '`'); 
```

其他情况也是如此。

不过，这是否是您真正想做的事情是一个问题；-)

# c - C中的写入/读取文件性能问题

> ID：13654230
> 
> 赞同：0
> 
> 时间：2012-11-30T22:41:14.727
> 
> 标签：c, performance, file-io

我在用 C 读写文件时遇到性能问题。这是我的问题和解决方案，但速度很慢：

我有一个 ASCII 文件，我认为其中的每一行都是一条记录。我必须根据文件中某个位置存在的特定数字将此文件分成两个。例如，如果位置 10 的数字为 0，则记录转到 file1，如果为 1，则记录转到 file2。

我所做的是打开输入文件和其他两个用于输出文件的文件流。我从输入文件中读取一行，进行比较，然后该行转到 file1 或 file2，然后读取下一条记录。它工作正常，但速度很慢。请建议一种更快的方法。

以下是文件的读取方式：

```
bytes_read = readline(infile, (void*)buffer, line_size+1); 
```

fwrite 用于写入文件。文件大小约为 50 MB。读取整个输入文件后关闭文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:45:23.283

您几乎已经找到了最快的方法！

*   你有什么类型的IO？缓冲/无缓冲？
*   文件有多大？
*   您是打开/关闭每一行的输出文件，还是保持打开状态？
*   在输出文件中有任何搜索吗？
*   读哪一部分慢？写？两个都？

IO 是程序中较慢的部分之一。一些代码可以帮助我们发现任何明显的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:48:56.340

您可以尝试以块的形式读取文件，而不是一次读取一行。块读取可以比逐行读取快得多。如果你能把整件事读入记忆，那就太好了。如果没有，请阅读一个大块，处理它并继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:50:42.607

我认为您应该将所有文件读入一些数组并处理变量/数组，而不是直接在 IO 上。

当然，如果这是可能的（您的文件很少，而不是数百）。

如果有成百上千的这些文件 - 那么您应该考虑另一种数据存储方法。数据库就是为这样的事情而设计的。

另一种选择是带有 CSV 存储引擎的 MySQL。

[mysql.com 上的 CSV 存储引擎](http://dev.mysql.com/doc/refman/5.0/en/csv-storage-engine.html)

但最后可能会迫使您更改文件结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T22:51:27.877

您可以尝试减少读/写调用的数量。

1.  尝试一次读取 2k 字节而不是 getline()。如果您的文件不大，甚至可以读取整个文件一次。
2.  使用缓冲写入。并且不要在每次写入后关闭文件。只有在完成整个文件的写入后才关闭文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T23:37:00.223

如果您正在从文件中读取，那么最好使用 fgets。这会自动为下一个 fget 移动文件指针。

fseek 和 ftell 正在减慢代码中的速度。尝试这个。它应该快得多。

```
#include <stdio.h>
#include <stdlib.h>

int
main()
{
    char line[132];
    int line_num = 0;
    FILE *fp_r, *fp_w1, *fp_w2, *fp_w;

    fp_r = fopen("readfile", "r");
    if (fp_r == NULL) {
        printf("Could not open testfile\n");
        exit(0);
    }

    fp_w1 = fopen("writefile1", "w");
    if (fp_w1 == NULL) {
        printf("Could not open writefile1\n");
        exit(0);
    }

    fp_w2 = fopen("writefile2", "w");
    if (fp_w1 == NULL) {
        printf("Could not open writefile2\n");
        exit(0);
    }

    while (fgets(line, sizeof(line), fp_r) != NULL) {
        line_num++;

        if (*(line+9) == '0') {
            fp_w = fp_w1;
        }
        else if (*(line+9) == '1') {
            fp_w = fp_w2;
        }
        else {
            printf("Exiting - Error at line %d\n", line_num);
            exit(1);
        }

        fprintf(fp_w, line);
    }

    fclose(fp_r);
    fclose(fp_w1);
    fclose(fp_w2);

    exit(0);
} 
```

我使用的读取文件是

```
01234567 0 This is the line with 0 at position 10
01234567 1 This is the line with 1 at position 10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T23:12:51.623

在评论中讨论后，我认为您的问题没有简单的答案。

对数千个大尺寸的 CSV 文件进行有效的读写是非常困难的。

发明了具有更好存储引擎的数据库来避免此类性能问题。

也许你应该看看 CSV 引擎在一些开源数据库中是如何设计的。在那里你应该找到（非常复杂的）你的问题的答案：处理许多大 csv 文件的最佳方法是什么。

# spring - Spring集成-消息存储恢复/重发

> ID：13654231
> 
> 赞同：1
> 
> 时间：2012-11-30T22:41:16.430
> 
> 标签：spring, jms, integration, activemq, spring-jdbc

我对 jdbc 消息存储的行为有疑问。我注意到，如果发生故障，例如，如果遵循以下顺序： 1)inbound-channel-adapter - 创建消息有效负载并将其发送到通道 2) 通道由 jms:outbound-channel 轮询有效负载-adapter 在 JMS 队列中添加一个条目。我正在使用 ActiveMQ。

当我测试关闭 MOM 之类的情况时，我想将消息保留在消息存储中，但这不是默认行为。看起来 SI 处理通道中的有效负载，然后将其推出（将其从存储中删除）。我可以看到消息被插入到数据库的消息存储中。

我对消息存储功能的理解错了吗？我认为该消息会一直持续到成功运行。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:27:05.490

您需要为此设置持久订阅。我认为大多数 SI JMS 组件都支持这一点。

# spring - 无法从类路径资源中解析持久性单元

> ID：13654232
> 
> 赞同：0
> 
> 时间：2012-11-30T22:41:19.877
> 
> 标签：spring, hibernate, jpa

所以我在运行实现 JPA 的 Spring WS 应用程序时遇到了这个问题（或者应该实现..）我在运行 WS 时遇到了问题，看起来我的 Spring 上下文找不到文件`persistence.xml`，因为我做到了我手动创建的模板中没有生成`META-INF`文件夹（这是 Maven 项目模板`archetype org.springframework.ws`） 。 这是 HTTP 500：`META-INF`

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'caChainDao' defined in file [E:\STS\vfabric-tc-server-developer-2.7.2.RELEASE\zz\wtpwebapps\FCAWSv4\WEB-INF\classes\pl\famoc\test\ws\db\dao\caChainDao.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Cannot parse persistence unit from class path resource [persistence.xml]
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722) 
```

这是我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
    <persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

    <persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL" />

</persistence> 
```

这就是我要找的地方

```
<property name="persistenceXmlLocation" value="classpath:persistence.xml" /> 
```

这是我的类路径中此 xml 的路径：

`src/main/webapp/META-INF/persistence.xml`

谁能给我一个提示我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:09:25.277

检查您生成的 jar 和 war 文件。webapp 内部的内容将存储在 war 文件中。并且war文件的META-INF目录不在webapp的类路径中。将 META-INF 目录存放在 src/main/resources 下，使其最终存放在 webapp 的 WEB-INF/classes 目录中，或者存放在 WEB-INF/lib 中生成的 jar 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-25T07:22:02.037

您只在类路径之后添加 *，例如：

```
<property name="persistenceXmlLocation" value="classpath*:persistence.xml" /> 
```

# javascript - 我可以禁用 IE10 历史滑动手势吗？

> ID：13654238
> 
> 赞同：19
> 
> 时间：2012-11-30T22:41:42.077
> 
> 标签：javascript, css, internet-explorer-10

我有一个使用触摸平移的表面 Web 应用程序（容器 div 具有“溢出：自动”样式）并且我正在使用内置的分页滚动样式：

```
-ms-scroll-snap-points-x: snapInterval(0px, 1366px);
-ms-scroll-snap-type: mandatory; 
```

我的应用程序有一个 300% 宽度的子容器，导致 3 个页面在页面边界上对齐。

这对于高性能分页滚动非常有用，除非用户在第一页并且向右滑动，这会激活浏览器的内置后退手势，退出我的网络应用程序并进入用户的 IE10 历史记录。

我可以使用以下方法禁用后退手势：

```
-ms-touch-action: none; 
```

但这也会禁用触摸滚动，因此页面不再可拖动。如果我使用：

```
-ms-touch-action: pan-x; 
```

然后滚动再次起作用，但浏览器返回手势再次出现，这是一个非常烦人的用户体验。有没有办法允许平移但不允许历史手势？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T18:06:10.670

解决方案很简单，您只需要添加一个 CSS 样式，以防止滚动行为从已达到滚动限制的子元素冒泡到父元素（滚动最终变成顶级历史导航）。

文档 ( [http://msdn.microsoft.com/en-us/library/windows/apps/hh466007.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh466007.aspx) ) 声明默认值为：

```
-ms-scroll-chaining: none; 
```

然而，默认值似乎真的是：

```
-ms-scroll-chaining: chained; 
```

默认情况下，我将该样式设置为 none 并链接在我的轮播中真正应该链接的元素上，这在我的应用程序中禁用了历史导航手势：

```
* {
    -ms-scroll-chaining: none;
}

.carousel * {
    -ms-scroll-chaining: chained;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T16:52:28.143

您需要设置`-ms-touch-action: none;`所有元素。

这将改为向您的 JavaScript 处理程序触发事件（如果有的话），但会阻止所有新操作，包括：平移、缩放和滑动。如果您想定制您的应用程序如何利用触摸，这是最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T04:17:56.163

编辑：以下内容**不能**阻止在 Windows Phone 8.1 上滑动导致导航，尽管它确实阻止了我在 Windows 8.1 平板电脑上的滑动导航。在这里留下答案，因为它可能对某人部分有用。

如果您的页面大于视口（触摸平移），则以下 CSS 有效（编辑：仅适用于 8.1 平板电脑）：

```
html {
  -ms-scroll-chaining: none;
} 
```

如果您的页面小于视口（即页面不可滚动/可平移，例如缩小），则上述方法不起作用。

然而，类似于以下的代码对我有用（编辑：仅在 8.1 平板电脑上）：

CSS：

```
html.disable-ie-back-swipe {
    overflow: scroll;
    -ms-scroll-chaining: none;
} 
```

JavaScript：

```
if (navigator.msMaxTouchPoints) {
    if (/Windows Phone/.test(navigator.userAgent)) {
        document.documentElement.classList.add('disable-ie-back-swipe');
    } else {
        try {
            var metroTestElement = document.createElement('div');
            metroTestElement.style.cssText = 'position:absolute;z-index:-1;top:0;right:0;bottom:-10px;width:1px';
            document.body.appendChild(metroTestElement);
            if (Math.round(window.outerWidth - metroTestElement.offsetLeft) === 1) {
                document.documentElement.classList.add('disable-ie-back-swipe');
            }
            document.body.removeChild(metroTestElement);
        } catch (e) {   // window.outerWidth throws error if in IE showModalDialog
        }
    }
} 
```

JavaScript 注释：

*   测试`navigator.msMaxTouchPoints`检查这是 IE10/IE11 并且设备使用触摸。
*   编辑：检测 Windows Phone 并设置 disable-ie-back-swipe 但 CSS 实际上并未禁用 Windows Phone 8.1 ARRRGH 上的功能。
*   MetroTestElement 测试现代（现代没有滚动条，所以右边是 1 像素，而桌面有滚动条，所以右边是 18 像素左右，具体取决于滚动条的宽度）。
*   如果使用 IE11 和现代，该代码仅禁用向后滑动。
*   似乎 html 或 body 都可以用于 CSS 规则，我不确定哪个实际上更好（恕我直言，我通常认为 body 是页面而不是可滚动的，而 html 是视口/窗口，但实际上取决于IE 实现细节）。

编辑 2：此 IE 功能称为“向前翻转”。企业可以使用组策略禁用它 - 请参阅[http://www.thewindowsclub.com/enable-disable-flip-feature-internet-explorer-10](http://www.thewindowsclub.com/enable-disable-flip-feature-internet-explorer-10)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T00:53:19.863

不是一个理想或优雅的解决方案，但您可以使用`MSPointerDown`,`MSPointerMove`和`MSPointerUp`事件侦听器来检测滑动和 preventDefault 吗？

```
// Touch events
target.addEventListener('MSPointerDown', callback);
target.addEventListener('MSPointerMove', callback);
target.addEventListener('MSPointerUp', callback); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-18T15:47:20.113

在我正在从事的一个项目中，正是需要这个，但需要在某些区域滚动（不仅仅是一般滚动，而是溢出）。似乎以下确实有效，在 Lumia 930 上的 IE11（Metro）Surface 2 和 IE11 WinPhone 上进行了测试。也可以使用触摸鼠标进行水平滚动。

请在此处查看此演示：http: [//jsbin.com/fediha/1/edit ?html,css,output](http://jsbin.com/fediha/1/edit?html,css,output)

禁用历史回退/前进的技巧）似乎是在任何元素上禁用“pan-x”，除了您想要水平滚动的元素。摘自CSS：

```
 * {
      /* disallow pan-x! */
      touch-action: pan-y pinch-zoom double-tap-zoom;
      /* maybe add cross-slide-x cross-slide-y? */
    }
    .scroller-x,
    .scroller-x * {
      /* horizontal scrolling only */
      touch-action: pan-x;
    }
    .scroller-y,
    .scroller-y * {
      /* vertical scrolling only */
      touch-action: pan-y;
    } 
```

在极少数情况下，仍然会触发历史回溯，但这确实很少见（只能通过在平板电脑上疯狂轻弹来做到这一点，即使这样也不会只是有时会发生）。

`touch-action`仅是 IE11，在 IE10 上你需要`-ms-touch-action`，但 IE10 不再使用那么多，而且我没有测试设备。

# python - 从 redis pub/sub 中的断开连接中恢复

> ID：13654243
> 
> 赞同：9
> 
> 时间：2012-11-30T22:42:09.130
> 
> 标签：python, redis, redistogo

我正在运行连接到 redis 数据库的客户端。客户端在 WiFi 连接上，有时会断开连接。不幸的是，当这种情况发生时，程序只会继续运行而不会引发任何类型的警告。

```
r = redis.StrictRedis(host=XX, password=YY...)
ps = r.pubsub()
ps.subscribe("12345")
for items in ps.listen():
    if items['type'] == 'message':
       data = items['data'] 
```

理想情况下，我正在寻找的是在连接丢失时捕获事件，尝试重新建立连接，进行一些错误纠正，然后让事情恢复并运行。这应该在python程序中完成吗？我应该有一个外部看门狗吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T11:04:40.993

Unfortunately, one have to 'ping' Redis to check if it is available. If You try to put a value to Redis storage, it will raise an `ConnectionError` exception if connection is lost. But the listen() generator will not close automatically when connection is lost.

I think that hacking Redis' connection pool could help, give it a try.

P.S. In is very insecure to connect to redis in an untrusted network environment.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-03T19:30:57.170

这是一个古老的问题，但我将自己的一个问题与它联系起来，并且碰巧再次遇到它。事实证明，redis 库中存在一个错误，导致客户端进入无限循环，如果它与 redis 服务器的连接断开，则尝试重新连接。我调试了这个问题并[公关](https://github.com/andymccurdy/redis-py/pull/465)了这个变化。它是很久以前合并的。一旦浮出水面，维护者也知道有同样问题的第二个位置。

这个问题不应该再出现了。

为了完全回答这个问题，我不记得自从我修复了这个错误后给出了哪个错误，但现在返回了一个特定的错误，您可以捕获并重新连接。

# java - Spring Roo 错误与命令执行包

> ID：13654245
> 
> 赞同：2
> 
> 时间：2012-11-30T22:42:27.533
> 
> 标签：java, spring, spring-roo

我是 Java 和 Spring Framework 的新手，在 STS 3.1.0.RELEASE 和 Tomcat 7 中使用 Spring roo。

以下是log.roo：

```
 // Spring Roo 1.2.2.RELEASE [rev 7d75659] log opened at 2012-11-30 20:15:11
project --topLevelPackage com.tue3 --projectName pizza --java 6 --packaging WAR
// Spring Roo 1.2.2.RELEASE [rev 7d75659] log closed at 2012-11-30 20:15:51
// Spring Roo 1.2.2.RELEASE [rev 7d75659] log opened at 2012-11-30 20:16:02
mongo setup --databaseName pizzadb
entity mongo --class ~.domain.Person --testAutomatically
field string --fieldName name --notNull
repository mongo --interface ~.repository.PersonRepository --entity ~.domain.Person
web mvc setup
web mvc scaffold --class ~.domain.PersonController
perform package
perform package
// Spring Roo 1.2.2.RELEASE [rev 7d75659] log closed at 2012-11-30 21:46:42 
```

我收到以下错误：

```
 perform package
[INFO] Scanning for projects...
The command 'mvn.bat -DskipTests=true package' did not complete successfully
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building pizza 0.1.0.BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- aspectj-maven-plugin:1.2:compile (default) @ pizza ---
[ERROR] can't determine annotations of missing type javax.persistence.Entity
when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean$ApplicationConversionServiceFactoryBean_Roo_ConversionService$2
when weaving classes 
when weaving 
when batch building BuildConfig[null] #Files=10 AopXmls=#0
 [Xlint:cantFindType]
[ERROR] can't determine annotations of missing type javax.persistence.Entity
when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean$ApplicationConversionServiceFactoryBean_Roo_ConversionService$1
when weaving classes 
when weaving 
when batch building BuildConfig[null] #Files=10 AopXmls=#0
 [Xlint:cantFindType]
[ERROR] can't determine annotations of missing type javax.persistence.Entity
when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean$ApplicationConversionServiceFactoryBean_Roo_ConversionService$3
when weaving classes 
when weaving 
when batch building BuildConfig[null] #Files=10 AopXmls=#0
 [Xlint:cantFindType]
[ERROR] can't determine annotations of missing type javax.persistence.Entity
when weaving type com.tue3.domain.Person
when weaving classes 
when weaving 
when batch building BuildConfig[null] #Files=10 AopXmls=#0
 [Xlint:cantFindType]
[ERROR] can't determine annotations of missing type javax.persistence.Entity
when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean
when weaving classes 
when weaving 
when batch building BuildConfig[null] #Files=10 AopXmls=#0
 [Xlint:cantFindType]
[ERROR] can't determine annotations of missing type javax.persistence.Entity
when weaving type com.tue3.repository.PersonRepository
when weaving classes 
when weaving 
when batch building BuildConfig[null] #Files=10 AopXmls=#0
 [Xlint:cantFindType]
[ERROR] can't determine annotations of missing type javax.persistence.Entity
when weaving type com.tue3.domain.PersonController
when weaving classes 
when weaving 
when batch building BuildConfig[null] #Files=10 AopXmls=#0
 [Xlint:cantFindType]
[WARNING] advice defined in org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect has not been applied [Xlint:adviceDidNotMatch]
[WARNING] advice defined in org.springframework.scheduling.aspectj.AbstractAsyncExecutionAspect has not been applied [Xlint:adviceDidNotMatch]
[WARNING] advice defined in org.springframework.mock.staticmock.AnnotationDrivenStaticEntityMockingControl has not been applied [Xlint:adviceDidNotMatch]
[WARNING] advice defined in org.springframework.mock.staticmock.AbstractMethodMockingControl has not been applied [Xlint:adviceDidNotMatch]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 22.520s
[INFO] Finished at: Sat Dec 01 03:26:49 PKT 2012
[INFO] Final Memory: 6M/18M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:aspectj-maven-plugin:1.2:compile (default) on project pizza: Compiler errors :
[ERROR] error at (no source information available)
[ERROR] D:\springy\roo\pizza\src\main\java\com\tue3\domain\ApplicationConversionServiceFactoryBean_Roo_ConversionService.aj:0::0 can't determine annotations of missing type javax.persistence.Entity
[ERROR] when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean$ApplicationConversionServiceFactoryBean_Roo_ConversionService$2
[ERROR] when weaving classes
[ERROR] when weaving
[ERROR] when batch building BuildConfig[null] #Files=10 AopXmls=#0
[ERROR] [Xlint:cantFindType]
[ERROR] error at (no source information available)
[ERROR] D:\springy\roo\pizza\src\main\java\com\tue3\domain\ApplicationConversionServiceFactoryBean_Roo_ConversionService.aj:0::0 can't determine annotations of missing type javax.persistence.Entity
[ERROR] when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean$ApplicationConversionServiceFactoryBean_Roo_ConversionService$1
[ERROR] when weaving classes
[ERROR] when weaving
[ERROR] when batch building BuildConfig[null] #Files=10 AopXmls=#0
[ERROR] [Xlint:cantFindType]
[ERROR] error at (no source information available)
[ERROR] D:\springy\roo\pizza\src\main\java\com\tue3\domain\ApplicationConversionServiceFactoryBean_Roo_ConversionService.aj:0::0 can't determine annotations of missing type javax.persistence.Entity
[ERROR] when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean$ApplicationConversionServiceFactoryBean_Roo_ConversionService$3
[ERROR] when weaving classes
[ERROR] when weaving
[ERROR] when batch building BuildConfig[null] #Files=10 AopXmls=#0
[ERROR] [Xlint:cantFindType]
[ERROR] error at (no source information available)
[ERROR] D:\springy\roo\pizza\src\main\java\com\tue3\domain\Person.java:0::0 can't determine annotations of missing type javax.persistence.Entity
[ERROR] when weaving type com.tue3.domain.Person
[ERROR] when weaving classes
[ERROR] when weaving
[ERROR] when batch building BuildConfig[null] #Files=10 AopXmls=#0
[ERROR] [Xlint:cantFindType]
[ERROR] error at (no source information available)
[ERROR] D:\springy\roo\pizza\src\main\java\com\tue3\domain\ApplicationConversionServiceFactoryBean.java:0::0 can't determine annotations of missing type javax.persistence.Entity
[ERROR] when weaving type com.tue3.domain.ApplicationConversionServiceFactoryBean
[ERROR] when weaving classes
[ERROR] when weaving
[ERROR] when batch building BuildConfig[null] #Files=10 AopXmls=#0
[ERROR] [Xlint:cantFindType]
[ERROR] error at (no source information available)
[ERROR] D:\springy\roo\pizza\src\main\java\com\tue3\repository\PersonRepository.java:0::0 can't determine annotations of missing type javax.persistence.Entity
[ERROR] when weaving type com.tue3.repository.PersonRepository
[ERROR] when weaving classes
[ERROR] when weaving
[ERROR] when batch building BuildConfig[null] #Files=10 AopXmls=#0
[ERROR] [Xlint:cantFindType]
[ERROR] error at (no source information available)
[ERROR] D:\springy\roo\pizza\src\main\java\com\tue3\domain\PersonController.java:0::0 can't determine annotations of missing type javax.persistence.Entity
[ERROR] when weaving type com.tue3.domain.PersonController
[ERROR] when weaving classes
[ERROR] when weaving
[ERROR] when batch building BuildConfig[null] #Files=10 AopXmls=#0
[ERROR] [Xlint:cantFindType]
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

有人可以指导我，我做错了什么以及如何纠正。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:38:00.137

[https://jira.springsource.org/browse/SPR-6819](https://jira.springsource.org/browse/SPR-6819)

看起来 pom.xml 没有 javax.persistence.Entity 包的依赖项。

```
<dependency>
<groupId>javax.persistence</groupId>
<artifactId>persistence-api</artifactId>
<version>1.0</version>
<scope>provided</scope>
</dependency> 
```

# php - PHP表单验证提交

> ID：13654247
> 
> 赞同：1
> 
> 时间：2012-11-30T22:42:31.453
> 
> 标签：php, forms, validation, submit

此代码适用于验证，但我无法让它与提交一起使用，我不知道为什么。据我所知，问题出在 PHP 末尾的 if 语句中，从 if((strlen($valid_first_name) 开始，我浏览了许多教学网站但无法找出问题所在。我将不胜感激帮助或指导！谢谢！

```
<?php

if($_POST)
{
$first_name = $_POST['first_name']; 
$last_name = $_POST['last_name'];  
$phone = $_POST['phone'];
$email = $_POST['email'];
$year1 = $_POST['year1'];
$make1 = $_POST['make1']; 
$model1 = $_POST['model1'];  
$vehicle_type_id1 = $_POST['vehicle_type_id1']; 
$pickup_city = $_POST['pickup_city']; 
$pickup_state_code = $_POST['pickup_state_code'];
$dropoff_city = $_POST['dropoff_city']; 
$dropoff_state_code = $_POST['dropoff_state_code'];  
$vehicle_runs = $_POST['vehicle_runs'];
$ship_via_id = $_POST['ship_via_id'];
$estimated_ship_date = $_POST['estimated_ship_date'];

// First Name
if (preg_match("/^[A-Za-z -]{3,20}$/",$first_name))
 {
       $valid_first_name=$first_name;
 }
else
{  
    $error_first_name='Enter valid First Name.';  
}
// Last Name
if (preg_match("/^[A-Za-z -]{3,20}$/",$last_name))
 {
       $valid_last_name=$last_name;
 }
else
{  
    $error_last_name='Enter valid Last Name.';  
}
// Phone
if (preg_match("/^[0-9 -]{7,20}$/",$phone))
 {
       $valid_phone=$phone;
 }
else
{  
    $error_phone='Enter valid Phone Number.';  
}
// Email 
if (preg_match("/^[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.([a-zA-Z]{2,4})$/", $email))
 {
       $valid_email=$email; 
 }
else
{  
    $error_email='Enter valid Email.';  
}
// Year
if (preg_match("/^[0-9 -]{2,20}$/",$year1))
 {
       $valid_year1=$year1;
 }
else
{  $error_year1='Enter valid Vehicle Year.';  }

// Make

if (preg_match("/^[A-Za-z0-9 -]{2,25}$/",$make1))
 {
      $valid_make1=$make1;
 }
else
{  
    $error_make1='Enter valid Vehicle Make.';  
}
// Model

if (preg_match("/^[A-Za-z0-9 -]{2,25}$/",$model1))
 {
      $valid_model1=$model1;
 }
else
{  
    $error_model1='Enter valid Vehicle Model.';  
}

// Vehicle Type
if ($vehicle_type_id1==00)
 {
        $error_vehicle_type_id1='Select Vehicle Type'; 
 }
else
{  
$valid_vehicle_type_id1=$vehicle_type_id1;

}
// Pickup City
if (preg_match("/^[A-Za-z0-9 -]{3,20}$/",$pickup_city))
 {
       $valid_pickup_city=$pickup_city;
 }
else
{  
    $error_pickup_city='Enter valid Pickup City.';  
}
// Pickup state
if ($pickup_state_code==00)
 {
        $error_pickup_state_code='Select Pickup State.'; 
 }
else
{  
$valid_pickup_state_code=$pickup_state_code;

}
// Dropoff City
if (preg_match("/^[A-Za-z0-9 -]{3,20}$/",$dropoff_city))
 {
       $valid_dropoff_city=$dropoff_city;
 }
else
{  
    $error_dropoff_city='Enter valid Dropoff City.';  
}
// Dropoff state
if ($dropoff_state_code==00)
 {
        $error_dropoff_state_code='Select Dropoff State.'; 
 }
else
{  
$valid_dropoff_state_code=$dropoff_state_code;

}
// Vehicle Runs
if ($vehicle_runs==00)
 {
        $error_vehicle_runs='Does your vehicle run?'; 
 }
else
{  
$valid_vehicle_runs=$vehicle_runs;

}
// Ship Via
if ($ship_via_id==00)
 {
        $error_ship_via_id='Select how to ship.'; 
 }
else
{  
$valid_ship_via_id=$ship_via_id;

}
// Estimated Shipping Date
if (preg_match("/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/",$estimated_ship_date))
 {
       $valid_estimated_ship_date=$estimated_ship_date;
 }
else
{  
    $error_estimated_ship_date='Enter valid Shipping Date.';  
}

if((strlen($valid_first_name)>0)&&(strlen($valid_last_name)>0)&&(strlen($valid_phone)>0)&&(strlen($valid_email)>0)&&(strlen($valid_year1)>0)&&(strlen($valid_make1)>0)&&(strlen($valid_model1)>0)&&(strlen($valid_vehicle_type_id1)>0)&&(strlen($valid_pickup_city)>0)&&($valid_pickup_state_code>0)&&(strlen($valid_dropoff_city)>0)&&($valid_dropoff_state_code>0)&&($valid_vehicle_runs>0)&& ($valid_ship_via_id>0)&& strlen($valid_estimated_ship_date>0))
{
//mysql_query(' SQL insert statement');
header("Location: thanks.html");

}

}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Reg Form</title>

<!-- Meta Tags -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!-- CSS -->
<link rel="stylesheet" href="css/structure.css" type="text/css" />
<link rel="stylesheet" href="css/form.css" type="text/css" />

<!-- JavaScript -->
<script type="text/javascript" src="js/9lessons.js"></script>
<style type="text/css">
.err
{
font-size:11px;
padding-left:10px;
color:#CC0000;
float:left;

}
input
{
float:left;

}
</style>

</head>

<body id="public">
    <div style="height:30px"></div>

<div id="container">

<div style="height:30px"></div>

<form autocomplete="on"
    enctype="multipart/form-data" method="post" action=""  name="form">

<ul>

<li id="foli1"      class="   ">
    <label class="desc" id="title1" for="Field1">
        First Name          </label>
    <div>
        <input id="first_name"          name="first_name"           type="text"             class="field text medium"           value="<?php echo $valid_first_name; ?>"            maxlength="255"             tabindex="1"                        /><span class="err"> <?php echo $error_first_name; ?></span>
        </div>
    </li>
    <li id="foli2"      class="   ">
    <label class="desc" id="title1" for="Field2">
        Last Name           </label>
    <div>
        <input id="last_name"           name="last_name"            type="text"             class="field text medium"           value="<?php echo $valid_last_name; ?>"             maxlength="255"             tabindex="2"                        />
        </div>
        <div><span class="err"> <?php echo $error_last_name; ?></span>
        </div>
    </li>

<li id="foli3"      class="   ">
    <label class="desc" id="title3" for="Field3">
        Phone</label>
    <div>
        <input id="phone"           name="phone"            type="text"             class="field text medium"           value="<?php echo $valid_phone; ?>"             maxlength="255"             tabindex="3"                        /><span class="err"> <?php echo $error_phone; ?></span>
        </div>
    </li>

<li id="foli4"      class="   ">
    <label class="desc" id="title4" for="Field3">
        Email           </label>
    <div>
        <input id="email"           name="email"            type="text"             class="field text medium"           value="<?php echo $valid_email; ?>"             maxlength="255"             tabindex="4"  /><span class="err"> <?php echo $error_email; ?></span>
        </div>
    </li>

<li id="foli5"      class="   ">
    <label class="desc" id="title5" for="Field5">
        Year            </label>
    <div>
        <input id="year1"           name="year1"            type="text"             class="field text medium"           value="<?php echo $valid_year1; ?>"             maxlength="255"             tabindex="5"                        /><span class="err"> <?php echo $error_year1; ?></span>
        </div>
    </li>

    <li id="foli6"      class="   ">
    <label class="desc" id="title6" for="Field6">
        Make            </label>
    <div>
        <input id="make1"           name="make1"            type="text"             class="field text medium"           value="<?php echo $valid_make1; ?>"             maxlength="255"             tabindex="6"                        /><span class="err"> <?php echo $error_make1; ?></span>
        </div>
    </li>

    <li id="foli7"      class="   ">
    <label class="desc" id="title7" for="Field7">
        Model           </label>
    <div>
        <input id="model1"          name="model1"           type="text"             class="field text medium"           value="<?php echo $valid_model1; ?>"            maxlength="255"             tabindex="7"                        /><span class="err"> <?php echo $error_model1; ?></span>
        </div>
    </li>

<li id="foli8"      class="   ">
    <label class="desc" id="title8" for="Field8">
        Vehicle type        </label>
    <div>
        <select id="vehicle_type_id1"           name="vehicle_type_id1"             class="field select medium"             tabindex="8" style="float:left"> 
                        <option value="00">Gender</option><option value="1">Male</option><option value="2">Female</option>
          </select><span class="err"> <?php echo $error_vehicle_type_id1; ?></span>
    </div>
    </li>

    <li id="foli9"      class="   ">
    <label class="desc" id="title9" for="Field9">
        pickup city</label>
    <div>
        <input id="pickup_city"             name="pickup_city"          type="text"             class="field text medium"           value="<?php echo $valid_pickup_city; ?>"           maxlength="255"             tabindex="9"                        /><span class="err"> <?php echo $error_pickup_city; ?></span>
        </div>
    </li>

    <li id="foli10"         class="   ">
    <label class="desc" id="title10" for="Field10">
        pickup  state       </label>
    <div>
        <select id="pickup_state_code"          name="pickup_state_code"            class="field select medium"             tabindex="10" style="float:left"> 
                        <option value="00">Gender</option><option value="1">Male</option><option value="2">Female</option>
          </select><span class="err"> <?php echo $error_pickup_state_code; ?></span>
    </div>
    </li>

    <li id="foli11"         class="   ">
    <label class="desc" id="title11" for="Field11">
        Dropoff City        </label>
    <div>
        <input id="dropoff_city"            name="dropoff_city"             type="text"             class="field text medium"           value="<?php echo $valid_dropoff_city; ?>"          maxlength="255"             tabindex="11"                       /><span class="err"> <?php echo $error_dropoff_city; ?></span>
        </div>
    </li>

    <li id="foli12"         class="   ">
    <label class="desc" id="title12" for="Field12">
        Dropoff State       </label>
    <div>
        <select id="pickup_state_code"          name="pickup_state_code"            class="field select medium"             tabindex="12" style="float:left"> 
                        <option value="00">Gender</option><option value="1">Male</option><option value="2">Female</option>
          </select><span class="err"> <?php echo $error_pickup_state_code; ?></span>
    </div>
    </li>

    <li id="foli13"         class="   ">
    <label class="desc" id="title13" for="Field13">
        Runs?           </label>
    <div>
        <select id="vehicle_runs"           name="vehicle_runs"             class="field select medium"             tabindex="13" style="float:left"> 
                        <option value="00">Gender</option><option value="1">Male</option><option value="2">Female</option>
          </select><span class="err"> <?php echo $error_vehicle_runs; ?></span>
    </div>
    </li>

    <li id="foli14"         class="   ">
    <label class="desc" id="title14" for="Field14">
        Ship    Via?        </label>
    <div>
        <select id="ship_via_id"            name="ship_via_id"          class="field select medium"             tabindex="14" style="float:left"> 
                        <option value="00">Gender</option><option value="1">Male</option><option value="2">Female</option>
          </select><span class="err"> <?php echo $error_ship_via_id; ?></span>
    </div>
    </li>

     <li id="foli15"        class="   ">
    <label class="desc" id="title15" for="Field15">
        Ship    Date        </label>
    <div>
        <input id="estimated_ship_date"             name="estimated_ship_date"          type="text"             class="field text medium"           value="<?php echo $valid_estimated_ship_date; ?>"           maxlength="255"             tabindex="15"                       /><span class="err"> <?php echo $error_estimated_ship_date; ?></span>
        </div>
    </li>

<li id="foli15"         class="   "></li>

<li class="buttons">
                <input  type="submit" value="Submit" style=" background:#0060a1; color:#FFFFFF; font-size:14px; border:1px solid #0060a1"/>
      </li>

</ul>
</form>
<div style="height:20px"></div>
</div><!--container-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:48:31.380

是的，如果你的结局是这样的，你并没有关闭你的（永无止境的）最后一个：

```
... && strlen($valid_estimated_ship_date>0)) 
```

它应该是：

```
.. && (strlen($valid_estimated_ship_date)>0)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T22:49:42.857

你提到的最后一行代码有几个问题，试试这个：

```
if(strlen($valid_first_name) > 0 && strlen($valid_last_name) > 0 && strlen($valid_phone) > 0 && strlen($valid_email) > 0 && strlen($valid_year1) > 0 && strlen($valid_make1) > 0 && strlen($valid_model1) > 0 && strlen($valid_vehicle_type_id1) > 0 && strlen($valid_pickup_city) > 0 && strlen($valid_pickup_state_code) > 0 && strlen($valid_dropoff_city) > 0 && strlen($valid_dropoff_state_code) > 0 && strlen($valid_vehicle_runs) > 0 && strlen($valid_ship_via_id) > 0 && strlen($valid_estimated_ship_date) > 0) {
    //mysql_query(' SQL insert statement');
    header("Location: thanks.html");
} 
```

您缺少一些 strlen 功能。不过，您可能需要考虑整合该代码，这有点麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T23:10:52.087

当我们做这样的事情时，我们在顶部启动了一个变量，称为

```
$valid = true; 
```

在其他所有部分中

```
$valid = false; 
```

最后你可以问

```
if($valid)
    header("Location: thanks.html"); 
```

# c# - 索引超出范围错误

> ID：13654248
> 
> 赞同：0
> 
> 时间：2012-11-30T22:42:41.593
> 
> 标签：c#, linq, list

我的项目中有以下方法：

```
public double CalculateDailyProjectMaxPumpSpm(DateTime date, string start = null, string end = null)
{
    Log("Calculating Daily Pump stroke Max...");

    var spm = new List<double>();

    if (start == null)
    {
        for (var i = 0; i < _pumpOneSpm.Count; i++)
        {
            if (_date[i].Equals(date))
            {
                spm.Add(_pumpOneSpm[i]);
                spm.Add(_pumpTwoSpm[i]);
            }
        }
    }
    else
    {
        for (var i = 0; i < _pumpOneSpm.Count; i++)
        {
            if (_date[i].Equals(date) && 
                DateTime.Compare(_time[i], DateTime.Parse(start)) > 0 && 
                DateTime.Compare(_time[i], DateTime.Parse(end)) < 0)
            {
                spm.Add(_pumpOneSpm[i]);
                spm.Add(_pumpTwoSpm[i]);
            }
        }
    }

    return _dailyProjectMaxSpm = Math.Round(spm.Max(), 2, MidpointRounding.AwayFromZero);
} 
```

我正在尝试使该方法看起来不那么笨拙。我试过：

```
public double CalculateDailyProjectMaxPumpSpm(DateTime date, string start = null, string end = null)
{
    Log("Calculating Daily Pump stroke Max...");

    var spm = start == null ? _pumpOneSpm.Concat(_pumpTwoSpm).Where((t, i) => _date[i].Equals(date)).ToList()
                            : _pumpOneSpm.Concat(_pumpTwoSpm).Where((t, i) => _date[i].Equals(date) && 
                                                                              DateTime.Compare(_time[i], DateTime.Parse(start)) > 0 && 
                                                                              DateTime.Compare(_time[i], DateTime.Parse(end)) < 0).ToList();

    _dailyProjectMaxSpm = Math.Round(spm.Max(), 2, MidpointRounding.AwayFromZero);

    return _dailyProjectMaxSpm;
} 
```

但是当我运行程序时，我得到了一个`Index out of range. Must be non-negative and less than the size of the collection. Parameter name: index`错误。现在，我不在乎将元素添加到新列表中的顺序，只要满足条件，它们就会被添加。谁能帮我解决这个错误？谢谢。

**更新**

`_date`是从数据库中提取的日期列表，并且`_time`是从同一数据库中提取的时间戳列表。带有 的所有变量`_`都是从数据库中提取的列表。每个列表的`Count`总是等于`Count`其他列表的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:56:41.650

在原来的方法`i`是在范围从`0`到`_pumpOneSpm.Count`但现在从`0`到 `_pumpOneSpm.Count + _pumpTwoSpm.Count`

以下结果是`_pumpOneSpm.Count + _pumpTwoSpm.Count`项目列表：

```
_pumpOneSpm.Concat(_pumpTwoSpm).Where((t, i) => _date[i] 
```

而且我看不到 LINQ 模拟，这比使用`for`循环的第一个方法示例更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:12:40.133

就像 sil 说的那样，您将两个列表连接起来，从而产生一个具有更大索引范围的列表。这个解决方案怎么样，它使用[Enumerable.Range()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)生成索引，然后使用两个谓词的组合版本进行过滤，最后使用[SelectMany() 展](http://msdn.microsoft.com/en-us/library/bb534336.aspx)平列表：

```
public double CalculateDailyProjectMaxPumpSpm(DateTime date, string start = null, string end = null)
{
    Log("Calculating Daily Pump stroke Max...");

    var spm = Enumerable
         .Range(0, _pumpOneSpm.Count)
         .Where(x => _date[x].Equals(date) &&
                     (start == null ||
                      (DateTime.Compare(_time[x], DateTime.Parse(start)) > 0 && 
                       DateTime.Compare(_time[x], DateTime.Parse(end)) < 0)))
         .SelectMany(x => new [] { _pumpOneSpm[x], _pumpTwoSpm[x] });

    return _dailyProjectMaxSpm = Math.Round(spm.Max(), 2, MidpointRounding.AwayFromZero);
} 
```

# c# - 将 C# 中的子字符串与自定义格式相结合？

> ID：13654250
> 
> 赞同：0
> 
> 时间：2012-11-30T22:42:59.270
> 
> 标签：c#, substring

我在 C# 中创建的应用程序的一部分将字符串中的某些子字符串替换为方括号中的值，例如`[11]`. 通常之后可以有相同的值 - 所以我想通过将它们组合成一个来减少文本的数量`[11,numberOfSame]`

例如，如果字符串包含：
`blahblah[122][122][122]blahblahblahblah[18][18][18][18]blahblahblah`

所需的新字符串将是：
`blahblah[122,3]blahblahblahblah[18,4]blahblahblah`

有人知道我会怎么做吗？谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:49:18.263

```
Regex.Replace("blahblah[122][122][122]blahblahblahblah[18][18][18][18]blahblahblah",
    @"(\[([^]]+)])(\1)+",
    m => "[" + m.Groups[2].Value + "," + (m.Groups[3].Captures.Count + 1) + "]") 
```

回报：

```
blahblah[122,3]blahblahblahblah[18,4]blahblahblah 
```

正则表达式的解释：

```
(           Starts group 1
  \[        Matches [
  (         Starts group 2
    [^]]+   Matches 1 or more of anything but ]
  )         Ends group 2
  ]         Matches ]
)           Ends group 1
(           Starts group 3
  \1        Matches whatever was in group 1
)           Ends group 3
+           Matches one or more of group 3 
```

λ的解释：

```
m =>                                Accepts a Match object
"[" +                               A [
m.Groups[2].Value +                 Whatever was in group 2
"," +                               A ,
(m.Groups[3].Captures.Count + 1) +  The number of times group 3 matched + 1
"]"                                 A ] 
```

我正在使用[这个重载](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)，它接受一个委托来计算替换值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:18:48.270

```
string input = "[122][44][122]blah[18][18][18][18]blah[122][122]";
string output = Regex.Replace(input, @"((?<firstMatch>\[(.+?)\])(\k<firstMatch>)*)", m => "[" + m.Groups[2].Value + "," + (m.Groups[3].Captures.Count + 1) + "]"); 
```

回报：

```
[122,1][44,1][122,1]blah[18,4]blah[122,2] 
```

解释：

`(?<firstMatch>\[(.+?)\])`匹配 [123] 组，名称组 firstMatch

`\k<firstMatch>`匹配由 firstMatch 组匹配的任何文本，并添加 * 匹配它零次或多次，为我们提供在 lambda 中使用的计数。

我对任何正则表达式的参考：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# c# - 将对象转换为字典

> ID：13654258
> 
> 赞同：5
> 
> 时间：2012-11-30T22:43:52.970
> 
> 标签：c#, generics, dictionary

我在 C# 中有一个在通用字典上运行的函数：

```
public static string DoStuff<TKey, TValue>(Dictionary<TKey, TValue> dictionary)
{
    // ... stuff happens here
} 
```

我还有一个循环对象的函数。如果其中一个对象是 Dictionary<>，我需要将它传递给该通用函数。但是，我不知道在编译时键或值的类型是什么：

```
foreach (object o in Values)
{
    if (/*o is Dictionary<??,??>*/)
    {
        var dictionary = /* cast o to some sort of Dictionary<> */;
        DoStuff(dictionary);
    }
} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T23:00:17.217

假设您不能使您的方法在`Values`集合类型中通用，您可以使用动态：

```
foreach (object o in values)
{
    Type t = o.GetType();
    if (t.IsGenericType && t.GetGenericTypeDefinition() == typeof(Dictionary<,>))
    {
        string str = DoStuff((dynamic)o);
        Console.WriteLine(str);
    }
} 
```

或者，您可以使用反射：

```
foreach (object o in values)
{
    Type t = o.GetType();
    if (t.IsGenericType && t.GetGenericTypeDefinition() == typeof(Dictionary<,>))
    {
        var typeParams = t.GetGenericArguments();
        var method = typeof(ContainingType).GetMethod("DoStuff").MakeGenericMethod(typeParams);
        string str = (string)method.Invoke(null, new[] { o });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T22:49:19.353

如果您知道`Value`集合中的所有字典都是相同的，则也使您的函数具有通用性：

```
void DealWithIt<T,V>(IEnumerable Values)
{
foreach (object item in Values)
{
    var dictionary = item as Dictionary<T,V>;
    if (dictionary != null)
    {
        DoStuff<T,V>(dictionary);
    }
} 
```

否则，在深入研究严肃的反射代码之前，请考虑使用非泛型`IDictionary`传递给它。`DoStuff`

# web-services - Hibernate + Tomcat org/hibernate/exception/SQLGrammarException java.lang.reflect.InvocationTargetException

> ID：13654260
> 
> 赞同：0
> 
> 时间：2012-11-30T22:43:57.727
> 
> 标签：web-services, hibernate, tomcat, maven, axis

嗨，我正在尝试制作将使用部署在 tomcat/axis2 上的 web 服务进行一些 MySQL 查询并获取例如用户的应用程序。

在我将项目与休眠和数据库连接之前，一切正常。当我在没有tomcat的情况下进行sql查询时，一切正常。但是当我部署 webservice 时，调用 webservice 时出现此错误：

```
[ERROR] org/hibernate/exception/SQLGrammarException
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
    at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
    at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/exception/SQLGrammarException
    at org.mathew.ws.MyService.getUser(MyService.java:10)
    ... 29 more
Caused by: java.lang.ClassNotFoundException: Class Not found : org.hibernate.exception.SQLGrammarException
    at org.apache.axis2.deployment.DeploymentClassLoader.findClass(DeploymentClassLoader.java:96)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at org.apache.axis2.deployment.DeploymentClassLoader.loadClass(DeploymentClassLoader.java:277)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 30 more 
```

有人知道为什么吗？

这是我的 hibernate.cfg.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.username">xxx</property>
        <property name="hibernate.connection.password">xxx</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/carpool</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="show_sql">true</property>
        <mapping class="org.mathew.data.User"></mapping>
    </session-factory>
</hibernate-configuration> 
```

和文件 pom.xml 与 Maven 依赖项：

```
<!-- MySQL database driver -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.9</version>
</dependency>

<!-- Hibernate core -->
<dependency>
<groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>3.3.0.GA</version>
</dependency>

<dependency>
    <groupId>dom4j</groupId>
    <artifactId>dom4j</artifactId>
    <version>1.6.1</version>
</dependency>

<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
</dependency>

<dependency>
    <groupId>commons-collections</groupId>
    <artifactId>commons-collections</artifactId>
    <version>3.2.1</version>
</dependency>

<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2</version>
</dependency>

<dependency>
    <groupId>javassist</groupId>
    <artifactId>javassist</artifactId>
    <version>3.3.GA</version>
</dependency>

<dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.1</version>
</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.6.6</version>
</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.6.6</version>
</dependency>

<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency>

<!-- JAX-RS -->

<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-bundle-jaxrs</artifactId>
    <version>2.6.2</version>
</dependency> 
```

如果有人可以提供帮助，我将非常感激:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:17:41.307

我想你在不匹配的 jar 中遇到问题，因为你指定了太多的依赖项。

你只需要这个 Hibernate 依赖项：

```
<dependency>
    <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.0.GA</version>
    </dependency> 
```

其余的依赖项将被传递。

# jquery - 使用 jQuery 从简单字段生成查询字符串？

> ID：13654268
> 
> 赞同：2
> 
> 时间：2012-11-30T22:44:58.480
> 
> 标签：jquery

我有一些非常简单的字段，比如是/否的复选框和一些宽度/高度的文本输入等。

我想让用户选中一个功能框并定义他们的大小，所以如果他们选中，`<input type="checkbox" id="header" name="header" value="true" />`那么我想添加`&show_header=true`到查询字符串中。

我已经[设置了一个非常基本的小提琴](http://jsfiddle.net/demchak_alex/AYQyB/2/)，但我似乎无法让它正常工作。就像，如果您选中该框，然后填写值，但取消选中该框，它开始重复事情，我最终得到`&show_header=true&show_header=true&show_header=true&show_header=true&show_header=true`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:50:00.870

您可以简单地使用[`serialize()`](http://api.jquery.com/serialize/)方法：

```
function displayVals() {
    $("code").html(function(i, val) {
        var query = $("input").serialize();
        return "http://...?method=review_box&amp;" + query;
    });
} 
```

**演示：http:** [//jsfiddle.net/AYQyB/4/](http://jsfiddle.net/AYQyB/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:53:00.803

看起来您正在尝试重新发明[jQuery 的 .serialize()](http://api.jquery.com/serialize/)函数。

```
<form>
    <div><input type="text" name="a" value="1" id="a" /></div>
    <div><input type="text" name="b" value="2" id="b" /></div>
    <div><input type="hidden" name="c" value="3" id="c" /></div>
    <div>
        <textarea name="d" rows="8" cols="40">4</textarea>
    </div>
    <div><select name="e">
        <option value="5" selected="selected">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
    </select></div>
    <div>
        <input type="checkbox" name="f" value="8" id="f" />
    </div>
    <div>
        <input type="submit" name="g" value="Submit" id="g" />
    </div>
</form> 
```

jQuery：

```
$('form').submit(function() {
    alert($(this).serialize());
    return false;
}); 
```

产生：

```
a=1&b=2&c=3&d=4&e=5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:08:50.300

可能是这样？

```
<input class="my-vars" type="checkbox" name="rbshowheader" id="rbshowheader" value="true" />
<input class="my-vars" type="text" name="rbwidth" id="rbwidth_id" value="" />
<pre><code>http://yoursite.whirlocal.com?method=review_box</code><span id="query"></span></pre> 
```

和 JavaScript

```
$(function() {
  $('.my-vars').change( function() {
     var sQuery = $('.my-vars').serialize();
     $('#query').html('&'+sQuery);
   });
}); 
```

# javascript - JavaScript 加密库？

> ID：13654271
> 
> 赞同：7
> 
> 时间：2012-11-30T22:45:01.613
> 
> 标签：javascript, cryptography

JavaScript 有哪些安全/可靠的加密库？对于那些使用过它的人，您对它们有什么看法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T22:47:42.010

**谷歌关闭**

用了一段时间谷歌的闭包库相当成功

[https://developers.google.com/closure/library/](https://developers.google.com/closure/library/)

具体`crypt`文档在这里

[http://closure-library.googlecode.com/svn/docs/namespace_goog_crypt.html](http://closure-library.googlecode.com/svn/docs/namespace_goog_crypt.html)

**phpjs.org**

有时，对于更简单的任务，我还使用了自包含函数，例如phpjs.org[中的](http://phpjs.org/functions/)[md5](http://phpjs.org/functions/md5/)或[sha1](http://phpjs.org/functions/sha1/)

**加密js**

虽然没亲自用过，但是听说这个库很好

[http://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)

# asp.net - 有什么方法可以在 Visual Studio 2012 中调试我的托管应用程序

> ID：13654272
> 
> 赞同：0
> 
> 时间：2012-11-30T22:45:01.867
> 
> 标签：asp.net, debugging, visual-studio-2012, visual-studio-debugging

是否可以在服务器 sing VS 2012 上调试我托管的 Web 应用程序。

我尝试使用工具中的附加过程，但没有启用断点。

有什么工具或建议吗？

谢谢，

纳雷什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:46:19.533

尝试下载远程调试器：

[Visual Studio 2012 更新 1 的远程工具](http://www.microsoft.com/en-us/download/details.aspx?id=30674)

[如何：设置远程调试](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

# css - 差异 和本地和现场网站上的 CSS 样式

> ID：13654274
> 
> 赞同：1
> 
> 时间：2012-11-30T22:45:19.653
> 
> 标签：css, wordpress, styling

在我当地的 wamp 网站上，

> `<p>&nbsp;</p>`

给出单行空间。一旦我将网站上传到实时地址，它就会提供多行间距。

在 CSS 样式方面也发生了很多疯狂的事情。

即在我的本地站点上，文本是正常的，但在实时站点上，一些文本是粗体的（来自同一个 wordpress 小部件的文本）。然后我不得不输入更多的 css 来说明字体粗细等我仍然不必在本地机器上做的事情。

不，我猜如果我一开始就做到了 100% 正确，我不会有任何问题，但我不是 CSS 专家。

为什么会出现这些差异？

# android-layout - 如何在对话框中添加自定义动态布局？

> ID：13654276
> 
> 赞同：0
> 
> 时间：2012-11-30T22:45:25.697
> 
> 标签：android-layout

我是 android java 编程的新手。我正在向对话框添加自定义动态布局。我有 2 个类，Mainactivity.java 和 Getval.java Mainactivity.java 创建一个对话框，Getval 在运行时生成动态布局。一切都很好，但是当它试图调用 Getval.java 的方法时，它给出了一个异常。这是两个类的代码。g.setval(); 在 Mainactivity.java 中导致问题。

```
 :::::Mainactivity.java::::: 
```

公共类 MainActivity 扩展 Activity {

```
private Button button;
public Getval g=new Getval();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    button= (Button) findViewById(R.id.buttonShowCustomDialog);
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            //set up dialog

            g.setval();
            Dialog dialog = new Dialog(MainActivity.this);
            dialog.setContentView(R.layout.attributewin);
            dialog.setTitle("Attribute Window");
            dialog.setCancelable(true);
            dialog.show();

    }
});

                                   ::::Getval:::: 
```

公共类 Getval 扩展 Activity{

```
String names[]={"test","chaeck","kajsdhasj","dlasdig"};
String values[]={"test","chaeck","kajsdhasj","dlasdig"};
String test[]={"Attribut","Value"}; 
```

公共无效 setval(){

```
TableLayout tl = (TableLayout) findViewById(R.id.tly); 
```

按钮 b=新按钮（此）；

```
for (int i = 0; i < names.length; i++) {
//Row
    TableRow tr = new TableRow(this);
    tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
//TextViews
    TextView tv0 = new TextView(this);
    tv0.setText(names[i]);
    tv0.setMaxWidth(75);

    TextView tv1 = new TextView(this);
    tv1.setText(values[i]);
    tv1.setMaxWidth(150);

    View line = new View(this);
    line.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 1));
    line.setBackgroundColor(Color.BLACK);

//Setting Views
    tr.addView(tv0);
    tr.addView(tv1);
    tl.addView(tr);
    tl.addView(line);

}
//Button Row
    TableRow tr = new TableRow(this);
    tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
    tr.setGravity(0x11);
    b.setId(100);
    b.setText("Return");
    b.setGravity(0x11);
    tr.addView(b);
    tl.addView(tr); 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:24:40.380

在没有看到您的 xml 或完整代码（或抛出的异常）的情况下查看此内容，我很愿意猜测您正在尝试从它所在的活动之外的活动中膨胀/修改视图（R.id.tly）最初是从 (MainActivity) 膨胀的。

一般来说，如果不使用跨活动处理程序或其他方法进行一些技巧，您将无法做到这一点。也许更改您的代码以膨胀 MainActivity 中的视图（R.id.tly）（如果它在 R.layout.attributewin 内部，则在您的对话框中），在 Getval 中进行处理，将它们返回给 MainActivity，以便它可以填充视图.

但同样，这只是一个猜测，因为我没有看到您的 xml 或异常。

# c# - 使用列表加速算法 .Sort 和 IEnumerable

> ID：13654278
> 
> 赞同：6
> 
> 时间：2012-11-30T22:45:32.100
> 
> 标签：c#, performance, algorithm, ienumerable, icomparable

对于我的项目，我首先从文件中加载图像，并将每个像素放入二维`pixels[,]`数组中。然后，我想检查每个像素并根据它们的颜色将它们分成“箱”，然后对每个箱进行排序。所以我有一个`Bin`对象，它封装了 a `List<Pixel>`，并且我有一个`List<Bin>`包含（相对较少）数量的垃圾箱。

我的问题是，当我尝试从非常大的图像（例如 1920x1200 = 230 万像素）中填充这些 bin 时，我使用的算法比我想要的要慢，我已经将问题追溯到一些 C#语言特定的功能似乎比我预期的要花更长的时间。我想要一些关于如何更好地使用 C# 来消除这些瓶颈的建议。

加载图像后，我调用了一个名为“fillBinsFromSource”的函数，它获取一个可枚举的像素列表，找到它们属于哪个 bin，并将它们放在那里：

```
public void fillBinsFromSource(IEnumerable<Pixel> source)
    {
        Stopwatch s = new Stopwatch();
        foreach (Pixel p in source)
        {
            s.Start();
            // algorithm removed for brevity
            // involves a binary search of all Bins and a List.Add call
            s.Stop();
        }           
    } 
```

对于大图像，预计我的算法会花费一些时间，但是当我在函数调用之外放置一个 Stopwatch 时，结果发现它需要的时间大约是 accrued on 的两倍`s`，这意味着进行枚举使用`foreach`正在占用此功能的一半时间（对于 1920x1200 图像，大约 1.6 秒中的 800 毫秒）。

我需要传递一个可枚举列表的原因是因为有时用户只会添加图片的一小部分，而不是整个图片。耗时的调用传递了几个迭代器，首先来自图像列表，然后来自列表中的每个图像，如下所示（简化）：

```
class ImageList : IEnumerable<Pixel>
{
    private List<Image> imageList;
    public IEnumerator<Pixel> GetEnumerator()
    {
        foreach (Image i in imageList)
            foreach (Pixel p in i)
                yield return p;
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    } 

class Image : IEnumerable<Pixel>
{
    private Pixel[,] pixels; // all pixels in the image        
    private List<Pixel> selectedPixels;// all pixels in the user's selection

    public IEnumerator<Pixel> GetEnumerator()
    {
        if (selectedPixels == null)
            for (int i = 0; i < image.Width; i++)
                for (int j = 0; j < image.Height; j++)
                    yield return pixels[i, j];
        else
            for (int i = 0; i < selectedPixels.Count; i++)
                yield return selectedPixels[i];
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    } 
```

然后最后我称之为

```
ImageList list; // pretend it contains only 1 image, and it's large
fillBinsFromSource(list); 
```

问题 1）由于需要枚举 2D 像素数组和所选区域，这取决于用户选择的内容，因此枚举速度非常慢。我怎样才能加快速度？

然后，在用对象填充所有这些垃圾箱后`Pixel`，我对它们进行分类。我调用`List<Pixel>.Sort()`并依赖`IComparable`，如下所示：

```
ImageList list; // pretend it contains only 1 image, and it's large
fillBinsFromSource(list);
foreach(Bin b in allBins)
    b.Sort(); // calls List<Pixel>.Sort()

class Pixel : IComparable
{
    // store both HSV and RGB
    float h, s, v;
    byte r, g, b;

    // we sort by HSV's value property
    public int CompareTo(object obj)
    {
        // this is much faster than calling CompareTo on a float
        Pixel rhs = obj as Pixel;
        if (v < rhs.v)
            return -1;
        else if (v > rhs.v)
            return 1;
        return 0;
    } 
```

问题2）假设`allBins`有7个元素；对 7 个单独的列表进行排序，它们总共有 230 万个`Pixel`s 大约需要 2 秒。对一个包含 230 万个随机`int`s 的列表进行排序需要不到 200 毫秒。我可以理解使用原始类型有一定程度的加速，但是使用起来真的慢了 10 倍以上`IComparable`吗？这里有什么加速吗？

我为这个冗长的问题道歉，如果有人对我有任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:57:23.887

你真的需要分析你的代码，看看什么是慢的。

最明显的：

*   `Pixel`没有实现泛型`IComparable<Pixel>`，因此比较不得不做更多的工作。
*   **尝试**制作像素值类型。您很可能会看到性能下降，但可能不会。
*   `Pixel`如果您发现性能低于您认为可以接受的水平，请考虑传递二维范围（矩形）并直接通过索引而不是迭代器访问对象。迭代器很好，但不是免费的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:48:53.337

如果您想要原始金属性能，那么各种间接方式，例如访问者模式或虚拟继承，都是毒药。虚拟调用、分配、不可预知的分支对算法有很大的损害，这种算法有一个小而紧的内部循环，99.99% 的时间都花在了这个循环上。

为什么？因为 CPU 喜欢并行执行许多（数十条）指令。只有当它可以在指令流中窥视时，它才能做到这一点。上述事情阻止了这一点。

你真的需要把最里面的循环弄对。不要在那里分配，不要调用虚函数（或接口方法或委托）。

可能，您最里面的循环应该使用硬编码内核处理给定图像的矩形。不是按像素实现处理功能，而是按矩形实现。

相反，您如何提供图像流并不重要。随心所欲地使用 LINQ。这是一种低容量操作，因为每张图像有数百万像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T23:23:05.103

您可以使用访问者模式，而不是使用迭代器，甚至构建一个数组/像素列表。表示任意选择的图像、图像列表和其他对象都可以使用单个方法接受访问者类，`VisitPixel`并为对象表示的每个像素调用该方法。然后，访问者类将负责在访问所有像素时对它们进行分箱。

这可能消除将所有像素提取到单独数组中的需要。它还可能消除创建迭代器以支持简单`for`循环。

Alexei Levenkov 关于你的第二个问题有一些好的观点。使用`Sort` [带有](http://msdn.microsoft.com/en-us/library/234b841s.aspx)`IComparer<T>`. _

# .net - 如何基于客户端架构动态加载x86/x64版本的SQLite3.DLL？

> ID：13654280
> 
> 赞同：3
> 
> 时间：2012-11-30T22:45:38.483
> 
> 标签：.net, sqlite, pinvoke, devart

我试图在运行时动态加载 SQLite3.DLL 的适当 x86/x64 版本，以便与 Devart.SQLite.DLL 一起使用。我无法事先将适当版本的 DLL 安装到应用程序根目录，因此我必须以某种方式尝试从应用程序根目录的 /x86 或 /x64 子目录中获取正确的版本。

关于如何做到这一点的任何想法？诚然，我在这里完全迷失了。到目前为止，我的代码是：

```
Public Sub New()
    LoadAssembly("sqlite3.dll", True)
End Sub

Private Function GetAssemblyPath(ByVal assembly As String, ByVal version As String) As String
    Return Path.GetDirectoryName(Reflection.Assembly.GetExecutingAssembly().Location) & "\" & version & "\" & assembly
End Function ' GetAssemblyName

<Runtime.InteropServices.DllImportAttribute("kernel32.dll", EntryPoint:="LoadLibraryW")> _
Public Shared Function LoadLibraryW(<Runtime.InteropServices.InAttribute()> <Runtime.InteropServices.MarshalAsAttribute(Runtime.InteropServices.UnmanagedType.LPWStr)> lpLibFileName As String) As IntPtr
End Function

Private Sub LoadAssembly(ByVal myAssembly As String, Optional ByVal doLoadLibrary As Boolean = False)
    Dim an As AssemblyName
    Dim filename As String
    Dim version As String

    If UIntPtr.Size = 8 Then version = "x64" Else version = "x86"
    filename = GetAssemblyPath(myAssembly, version)

    Try
        If doLoadLibrary Then
            HostLog.WriteEntry(filename, EventLogEntryType.Information)
            Dim ptr As IntPtr = LoadLibraryW(filename)
            HostLog.WriteEntry(ptr.ToString(), EventLogEntryType.Information)
        Else
            an = AssemblyName.GetAssemblyName(filename)
            AppDomain.CurrentDomain.Load(an)
        End If
    Catch ex As Exception
        HostLog.WriteEntry(ex.Message, EventLogEntryType.Error)
    End Try
End Sub ' LoadAssembly 
```

**编辑** 正如评论中提到的，我没有指定我在尝试加载 sqlite3.dll 时收到的实际错误。事实证明，我的 App.Config 中缺少以下内容：

```
<system.data>
  <DbProviderFactories>
    <remove invariant="Devart.Data.SQLite" />
    <add name="dotConnect for SQLite" 
       invariant="Devart.Data.SQLite" 
       description="Devart dotConnect for SQLite" 
       type="Devart.Data.SQLite.SQLiteProviderFactory, Devart.Data.SQLite, Version=4.2.122.0, Culture=neutral, PublicKeyToken=09af7300eec23701" />
  </DbProviderFactories>
</system.data> 
```

将其添加到 App.Config 后，我之前的代码示例按预期工作。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:32:43.167

您可以创建一个具有两个实现的接口。一个 x86 实现和一个 x64 实现。一个可以说`[DllImport("x86version.dll")]Bob(string s);`一个可以说`[DllImport("x64version.dll")]Bob(string s);`

例子：

```
public interface ISQLite
{
    public void Foo();
}

public class SQLite32 : ISQLite
{
   [DllImport("x86/SQLite3.dll")]
    private void foo();
   public void Foo()
   {
       foo();
   }
}

public class SQLite64 : ISQLite
{
   [DllImport("x64/SQLite3.dll")]
    private void foo();
   public void Foo()
   {
      foo();
   }
}

public static class SQLiteLoader
{
   public static ISQLite GetSQLite()
   {
       if(System.Environment.Is64BitOperatingSystem)
          return new SQLite64();
       else
          return new SQLite32();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:06:41.957

事实证明，我的原始代码示例确实有效，但我未能在我的程序的 App.Config 中正确注册 SQLite 的 DBProviderFactory。我现在可以将 x86 和 x64 sqlite3.dll 从应用程序根目录捆绑到它们各自的 /x86 和 /x64 目录中，并在运行时加载正确的版本。对于那些寻求完整解决方案的人，请参见下文（感谢大家对代码的改进；它们已被合并）：

**应用程序配置**

```
<system.data>
  <DbProviderFactories>
    <remove invariant="Devart.Data.SQLite" />
    <add name="dotConnect for SQLite" 
       invariant="Devart.Data.SQLite" 
       description="Devart dotConnect for SQLite" 
       type="Devart.Data.SQLite.SQLiteProviderFactory, Devart.Data.SQLite, Version=4.2.122.0, Culture=neutral, PublicKeyToken=09af7300eec23701" />
  </DbProviderFactories>
</system.data> 
```

**程序集加载器.vb**

```
Imports System.IO
Imports System.Reflection
Imports System.Security

''' <summary>
''' Handles dynamically loading managed and unmanaged assemblies.
''' </summary>
Public Class AssemblyLoader

  ''' <summary>
  ''' Loads the appropriate x86/x64 version of an assembly based on its filename.
  ''' </summary>
  ''' <param name="myAssembly">The filename of the assembly.</param>
  ''' <param name="isManaged">True if the assembly is managed, otherwise False.</param>
  ''' <exception cref="ArgumentException">If myAssembly is invalid, such as an assembly with an invalid culture.</exception>
  ''' <exception cref="SecurityException">The caller does not have path discovery permission.</exception>
  ''' <exception cref="BadImageFormatException">Thrown if myAssembly is not a valid assembly. -or-Version 2.0 or later of the common language runtime is currently loaded and assemblyRef was compiled with a later version.</exception>
  ''' <exception cref="FileLoadException">An assembly or module was loaded twice with two different evidences.</exception>
  ''' <exception cref="AppDomainUnloadedException">The operation is attempted on an unloaded application domain.</exception>
  Public Shared Sub LoadByVersion(ByVal myAssembly As String, Optional ByVal isManaged As Boolean = True)
    Dim an As AssemblyName
    Dim filename As String
    Dim version As String
    If UIntPtr.Size = 8 Then version = "x64" Else version = "x86"
    filename = GetAssemblyPath(myAssembly, version)

    Try
        If Not File.Exists(filename) Then Exit Sub
        If isManaged Then
            an = AssemblyName.GetAssemblyName(filename)
            If Not IsNothing(an) Then AppDomain.CurrentDomain.Load(an)
        Else
            LoadLibraryW(filename)
        End If
    Catch ex As ArgumentException
        Throw
    Catch ex As SecurityException
        Throw
    Catch ex As BadImageFormatException
        Throw
    Catch ex As FileLoadException
        Throw
    Catch ex As AppDomainUnloadedException
        Throw
    End Try
  End Sub ' LoadAssembly

  ''' <summary>
  ''' Gets the absolute path of the dependant assembly.
  ''' </summary>
  ''' <param name="assembly">The filename (without path) of the dependent assembly.</param>
  ''' <param name="version">The subfolder containing the version of the assembly needed (e.g. "x86", "x64").</param>
  ''' <returns>The absolute path of the specific version of the assembly.</returns>
  Private Shared Function GetAssemblyPath(ByVal assembly As String, ByVal version As String) As String
    Return Path.Combine(Path.GetDirectoryName(Reflection.Assembly.GetExecutingAssembly().Location), version, assembly)
  End Function ' GetAssemblyName

  ''' Return Type: HMODULE->HINSTANCE->HINSTANCE__*
  '''lpLibFileName: LPCWSTR->WCHAR*
  <Runtime.InteropServices.DllImportAttribute("kernel32.dll", EntryPoint:="LoadLibraryW")> _
  Private Shared Function LoadLibraryW(<Runtime.InteropServices.InAttribute()> <Runtime.InteropServices.MarshalAsAttribute(Runtime.InteropServices.UnmanagedType.LPWStr)> lpLibFileName As String) As IntPtr
  End Function ' LoadLibraryW

End Class ' AssemblyLoader 
```

** 我的应用程序 **

```
<snip>
Public Sub New()
    Try
        AssemblyLoader.LoadByVersion("sqlite3.dll", False)
    Catch ex As Exception
        ' Error logging done here
    End Try
End Sub
</snip> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T14:46:43.373

另一个解决方案是在您的解决方案中包含适当命名的每种操作系统类型的 SQLite3 dll（例如 sqlite3-x86.dll 和 sqlite3-x64.dll），并设置为使用可执行文件复制到应用程序的输出目录（即将复制到输出目录设置为“始终”）。然后，当程序启动时，有一个函数会检查 .dll 是否存在，如果不存在，则确定正在使用的操作系统，然后相应地重命名所需的 .dll。然后只需执行一次即可命名正确的 .dll。不需要动态加载 .dll。这是我使用的代码：

```
public static bool checkForSQLite()
{
      string sqliteFileName = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), "sqlite3.dll");

            if (!File.Exists(sqliteFileName))
            {
                string version = "x86";

                if (IntPtr.Size == 8)
                {
                    version = "x64";
                }

                string resourceFileName = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), "sqlite3-" + version + ".dll");

                File.Move(resourceFileName, sqliteFileName);

                return true;
            }
            else
            {
                return false;
            }
        } 
```

# java - Android - 开始两个活动

> ID：13654283
> 
> 赞同：2
> 
> 时间：2012-11-30T22:46:16.470
> 
> 标签：java, android, xml, calendar

我在这里查看了一些问题，但从未找到我喜欢的答案。我什至可能不需要同时启动两个活动，但我想要实现的是，在按下按钮时，它会调出预先填充了提醒插件的日历，并将我的应用程序的视图移动到下一页。当他们确认提醒或取消提醒并返回时，他们会看到它。

所以真的，问题是，我如何将我的应用程序移动到一个新的活动，并用信息调出日历？我一直在尝试在一个按钮上执行此操作以使其超级简单，但是我不可能用两个按钮来完成...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:05:56.453

从 oncreate “下一页活动”中调用日历活动。“下一页活动”不会加载，但会在返回时出现。

如果您不想总是从该活动加载日历，您可以传递一个参数并检查它。

# cassandra - 在 VMWare 上的集群中启动 Cassandra 节点时，如何解决节点令牌冲突问题？

> ID：13654286
> 
> 赞同：3
> 
> 时间：2012-11-30T22:46:37.623
> 
> 标签：cassandra

在 VM 环境中将节点添加到集群时，是否存在有关 initial_token 冲突的任何已知问题？

我正在研究在 VM 上设置的 4 节点集群。当我们尝试将节点添加到集群时，我们遇到了问题。

在 cassandra.yaml 文件中，initial_token 留空。由于我们正在运行 > 1.0 的 cassandra，因此 auto_bootstrap 默认应该为 true。

据我了解，集群中的每个节点都应在启动时分配一个初始令牌。

这不是我们目前看到的。我们不想为每个节点手动设置 initial_token 的值（有点违背动态的目标。）我们还将分区器设置为随机：partitioner: org.apache.cassandra.dht.RandomPartitioner

我已经概述了我们遵循的步骤和我们在下面看到的结果。有人可以告知我们在这里缺少什么吗？

以下是我们正在采取的详细步骤：

1）杀死所有cassandra实例并删除每个节点上的数据和提交日志文件。

## 2）启动种子节点（SSSS）

启动良好。

## 3) 运行 nodetool -h WWWW ring 并查看：

```
Address         DC          Rack        Status State   Load            Effective-Ownership Token
S.S.S.S         datacenter1 rack1       Up     Normal  28.37 GB        100.00%             24360745721352799263907128727168388463 
```

## 4) XXXX 启动

```
 INFO [GossipStage:1] 2012-11-29 21:16:02,194 Gossiper.java (line 850) Node /X.X.X.X is now part of the cluster
 INFO [GossipStage:1] 2012-11-29 21:16:02,194 Gossiper.java (line 816) InetAddress /X.X.X.X is now UP
 INFO [GossipStage:1] 2012-11-29 21:16:02,195 StorageService.java (line 1138) Nodes /X.X.X.X and /Y.Y.Y.Y have the same token 113436792799830839333714191906879955254\.  /X.X.X.X is the new owner
 WARN [GossipStage:1] 2012-11-29 21:16:02,195 TokenMetadata.java (line 160) Token 113436792799830839333714191906879955254 changing ownership from /Y.Y.Y.Y to /X.X.X.X 
```

## 5) 运行 nodetool -h WWWW ring 并查看：

```
Address         DC          Rack        Status State   Load            Effective-Ownership Token
                                                                                           113436792799830839333714191906879955254
S.S.S.S         datacenter1 rack1       Up     Normal  28.37 GB        100.00%             24360745721352799263907128727168388463
W.W.W.W         datacenter1 rack1       Up     Normal  123.87 KB       100.00%             113436792799830839333714191906879955254 
```

## 6) YYYY 启动

```
 INFO [GossipStage:1] 2012-11-29 21:17:36,458 Gossiper.java (line 850) Node /Y.Y.Y.Y is now part of the cluster
 INFO [GossipStage:1] 2012-11-29 21:17:36,459 Gossiper.java (line 816) InetAddress /Y.Y.Y.Y is now UP
 INFO [GossipStage:1] 2012-11-29 21:17:36,459 StorageService.java (line 1138) Nodes /Y.Y.Y.Y and /X.X.X.X have the same token 113436792799830839333714191906879955254\.  /Y.Y.Y.Y is the new owner
 WARN [GossipStage:1] 2012-11-29 21:17:36,459 TokenMetadata.java (line 160) Token 113436792799830839333714191906879955254 changing ownership from /X.X.X.X to /Y.Y.Y.Y 
```

## 7) 运行 nodetool -h WWWW ring 并查看：

```
Address         DC          Rack        Status State   Load            Effective-Ownership Token
                                                                                           113436792799830839333714191906879955254
S.S.S.S         datacenter1 rack1       Up     Normal  28.37 GB        100.00%             24360745721352799263907128727168388463
Y.Y.Y.Y         datacenter1 rack1       Up     Normal  123.87 KB       100.00%             113436792799830839333714191906879955254 
```

## 8) ZZZZ 启动

```
 INFO [GossipStage:1] 2012-11-30 04:52:28,590 Gossiper.java (line 850) Node /Z.Z.Z.Z is now part of the cluster
 INFO [GossipStage:1] 2012-11-30 04:52:28,591 Gossiper.java (line 816) InetAddress /Z.Z.Z.Z is now UP
 INFO [GossipStage:1] 2012-11-30 04:52:28,591 StorageService.java (line 1138) Nodes /Z.Z.Z.Z and /Y.Y.Y.Y have the same token 113436792799830839333714191906879955254\.  /Z.Z.Z.Z is the new owner
 WARN [GossipStage:1] 2012-11-30 04:52:28,592 TokenMetadata.java (line 160) Token 113436792799830839333714191906879955254 changing ownership from /Y.Y.Y.Y to /Z.Z.Z.Z 
```

## 9) 运行 nodetool -h WWWW ring 并查看：

```
Address         DC          Rack        Status State   Load            Effective-Ownership Token
                                                                                           113436792799830839333714191906879955254
W.W.W.W         datacenter1 rack1       Up     Normal  28.37 GB        100.00%             24360745721352799263907128727168388463
S.S.S.S         datacenter1 rack1       Up     Normal  28.37 GB        100.00%             24360745721352799263907128727168388463
Z.Z.Z.Z         datacenter1 rack1       Up     Normal  123.87 KB       100.00%             113436792799830839333714191906879955254 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:58:45.813

显然，您的节点保留了一些过去在启动时使用的集群信息。确保删除 LocationInfo 目录，其中包含有关集群的数据。你有一个非常奇怪的令牌布局（例如，0 令牌在哪里？），所以如果你想要正确的所有权，你肯定需要重新分配它们。

它可能有助于解释令牌分配的工作原理，所以让我也解决这个问题。在一个全新的集群中，默认情况下第一个节点将获得分配的令牌 0，并将拥有 100% 的所有权。如果您没有为下一个节点指定令牌，Cassandra 将计算一个令牌，使得原始节点拥有较低的 50%，新节点拥有较高的 50%。

当您添加节点 3 时，它将在第一个和第二个之间插入令牌，因此您实际上最终会获得看起来像 25%、25%、50% 的所有权。这非常重要，因为这里要学习的教训是 Cassandra 永远不会自己重新分配令牌来平衡环。如果您希望正确平衡所有权，则必须分配自己的代币。这并不难做到，实际上提供了一个实用程序来做到这一点。

因此，Cassandra 的初始引导过程虽然是动态的，但可能无法产生所需的环平衡。您不能简单地允许新节点在没有一些干预的情况下随意加入，以确保您获得所需的结果。否则，您最终会遇到您在问题中提出的方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-30T08:11:34.900

这就是我为解决这个问题所做的：

1.  停止 Cassandra 服务
2.  `auto_bootstrap: false`在种子节点上设置。
3.  空数据和提交日志目录： `sudo rm -rf /var/lib/cassandra/data/* sudo rm -rf /var/lib/cassandra/commitlog/*`
4.  然后重启服务

我用 Cassandra 3.7 对此进行了测试。

# php - 使用 Cakephp，我如何在我的脚手架添加、编辑视图中为 hasMany 关系获取多选元素或复选框？

> ID：13654290
> 
> 赞同：2
> 
> 时间：2012-11-30T22:47:13.980
> 
> 标签：php, cakephp, has-many, scaffolding

我已经浏览了关于将模型链接在一起（创建关联）的 Cakephp 文档，并且我可以通过在一个模型中定义一个 $hasOne 成员和在另一个模型中定义一个相应的 $belongsTo 来在脚手架的添加和编辑视图中获得单个选择下拉列表。现在，对于 $hasMany 关系，我试图在我的脚手架添加和编辑视图中获取某种表单输入（多选下拉菜单或复选框......最好是复选框），让用户选择相关的广告对于给定的租金。但是使用下面的代码，我没有提到租赁添加和编辑视图中的广告 :'( 我错过了什么吗？这甚至可能吗？我已经在 RoR 和 Grails 中看到了这一点，但无法让它与 CakePHP 一起使用。 谢谢你的帮助！

租赁模型（app/Model/Rental.php）

```
<?php
class Rental extends AppModel {
    var $name = 'Rental';             
    var $belongsTo = array(
        'Agent' => array(
            'className'    => 'User',
            'foreignKey'    => 'agent_id'
        ),
        'Bedroom',
        'Landlord' => array(
            'className'    => 'Landlord',
            'foreignKey'    => 'landlord_id'
        )
    );  
    var $hasMany = array(
        'Advertisement' => array(
            'className'     => 'Advertisement',
            'foreignKey'    => 'rental_id',
            //'conditions'    => array('Comment.status' => '1'),
            'order'    => 'Advertisement.created DESC',
            'limit'        => '5',
            'dependent'=> false
        )
    );

    public $validate = array(
        'title' => array(
            'rule' => 'notEmpty'
        ),
        'description' => array(
            'rule' => 'notEmpty'
        )
    );

    public function isOwnedBy($rental, $user) {
        return $this->field('id', array('id' => $rental, 'user_id' => $user)) === $rental;
    }
} 
```

租赁控制器 (app/Controller/RentalsController.php)

```
<?php
class RentalsController extends AppController {
    public $scaffold;
} 
```

广告模型（app/Model/Advertisement.php）

```
<?php
class Advertisement extends AppModel {
    var $name = 'Advertisement';                   
    var $belongsTo = array(
        'Rental' => array(
            'className'    => 'Rental',
            'foreignKey'    => 'rental_id'
        ),
        'Author' => array(
            'className'    => 'User',
            'foreignKey'    => 'author_id'
        )
    ); 
} 
```

广告控制器 (app/Controller/AdvertiesementsController.php)

```
<?php
class AdvertisementsController extends AppController {
    public $scaffold;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:10:21.343

Cake 的脚手架视图没有从关系的 hasMany 方面显示任何内容。他们假设您想从具有 belongsTo 的模型中选择它。

坦率地说，恕我直言，对于这种关系来说，将其作为多项选择有点奇怪。多选通常用于 hasAndBelongsToMany 关系。如果你想这样做，你需要自己做，而不是使用 Cake 的脚手架。

# c# - 分离实体并在另一次尝试中保存上下文

> ID：13654296
> 
> 赞同：0
> 
> 时间：2012-11-30T22:47:53.157
> 
> 标签：c#, entity-framework-4, objectcontext

我正在尝试处理批量插入过程中可能存在具有相同主键的实体的情况，这当然会使**SaveChanges**抛出异常。

这是我所拥有的：

```
try
{
    _context.SaveChanges();
    _context.Dispose();
    _context = null;
    _context = SelectContext<T>();
    _commitCount = 0;
}
catch (System.Data.UpdateException updateEx)
{
    //Remove from _context all the entries that errored in the SaveChange() process...
    if (updateEx.StateEntries != null)
    {
        foreach (ObjectStateEntry stateEntry in updateEx.StateEntries)
        {

            if ((System.Data.EntityState)stateEntry.Entity.GetType().GetProperty("EntityState").GetValue(stateEntry.Entity, null) != System.Data.EntityState.Detached)
            {
                _context.Detach(stateEntry.Entity);
            }
         }

}

//Save context changes again this time without erroneous entries...
try
{
     _context.SaveChanges();
     _context.Dispose();
     _context = null;
     _context = SelectContext<T>();
     _commitCount = 0;
 }
 catch (Exception ex)
 {                  
   //Welp, at the point, I'm clueless...
 } 
```

如果我查看 ObjectStateManager，实体确实被删除了（计数随着 foreach 循环的迭代次数而下降。）

但它仍然在第二次尝试时抛出异常，抱怨欺骗 PK。

我认为分离一个实体是一样的，如果它从一开始就没有出现在上下文中。我需要做其他事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:05:33.200

`Deatch`不会完全撤消更改。根据 msdn 文档“仅删除实体；如果同一 ObjectStateManager 正在跟踪任何相关对象，则不会自动分离这些对象。”

仅删除您传递给分离的实体。其他更改将导致失败。你的分贝会有争用吗？如果这个应用程序是唯一对数据库进行更改的东西，那么您可以撤消更改，`context.Refresh(RefreshMode.StoreWins, object);`否则它会更复杂一些。

你必须做这样的事情；

```
 var entry = context.ObjectStateManager.GetObjectStateEntry(((IEntityWithKey)object).EntityKey);

  for (int i = 0; i < entry.OriginalValues.FieldCount; i++)

{

     entry.CurrentValues.SetValue(i, entry.OriginalValues[i]);

}

entry.AcceptChanges(); 
```

上面的代码使用 将`ObjectSateManager`所有修改的对象返回到它们的原始状态，之后`context.SaveChanges();`应该成功。

您可能还会发现这个有用[http://dotnetadventurer.blogspot.com/2010/09/discarding-changes-to-objectcontext-in.html](http://dotnetadventurer.blogspot.com/2010/09/discarding-changes-to-objectcontext-in.html)我没有尝试过他的代码，我通常以不同的方式初始化我的上下文，所以我不是确定它是否适用于您的示例，但它非常简单，所以如果可以，这就是我要走的路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:17:52.637

这就是我最终在我的情况下所做的：

```
_context.ObjectStateManager.ChangeObjectState(stateEntry.Entity, System.Data.EntityState.Unchanged);
_context.ApplyOriginalValues<T>(entityType, (T)stateEntry.Entity);
_context.Detach(stateEntry.Entity); 
```

之后，我可以保存上下文更改。

# java - 如何在 Java 中打印构建目标？

> ID：13654299
> 
> 赞同：1
> 
> 时间：2012-11-30T22:48:16.580
> 
> 标签：java, ant, build, build-process

假设我们有一个 PrintTarget 类，里面有 main()。

我们可以构建/编译这样，以某种方式我们应该能够在 main.js 中发送 build-target-name 。当 main() 被调用时，它将打印构建目标名称。

我不想要目标名称同时构建。我们都知道该怎么做。我希望生成的 JAR 记住目标名称。假设我们创建了 jar printTarget.jar 并执行了 jar #>java printTarget.jar 我希望这个调用打印目标名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T23:38:22.570

要将数据从构建时传递到运行时，您需要将数据写入存储在 JAR 中的文件中，例如

```
<jar destfile="printTarget.jar">
  <fileset dir="${classes.dir}" />
  <manifest>
    <attribute name="Main-Class" value="com.example.Main" />
  </manifest>
  <!-- This is just a way to create a zip entry from inline text in the build
       file without having to <echo> it to a real file on disk first -->
  <mappedresources>
    <mergemapper to="com/example/buildinfo.properties"/>
    <string encoding="ISO-8859-1"># this is a generated file, do not edit
      targetname=custom-build-1
    </string>
  </mappedresources>
</jar> 
```

然后你可以在你的主要方法中阅读

```
package com.example;
import java.io.*;
import java.util.Properties;

public class Main {
  public static void main(String[] args) throws Exception {
    Properties buildInfo = new Properties();
    InputStream is = Main.class.getResourceAsStream("buildinfo.properties");
    try {
      buildInfo.load(is);
    } finally {
      is.close();
    }

    System.out.println("Build target was " +
       buildInfo.getProperty("targetname", "<unknown>"));
  }
} 
```

这应该打印

```
Build target was custom-build-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:50:03.473

听起来很奇怪！

通常你用 ant 或 maven 构建。（或带有 exlipse）但这超出了您的 java 代码。

因此，您在 ant（或 maven）脚本中打印构建目标。

在蚂蚁中：

```
<target name="jar">
    <echo>Building target: ${target}</echo>

...
</target> 
```

还是您的意思是获取运行 main() 的 jar 文件的名称：

```
File jarFile = new File
(org.classes.main.class.getProtectionDomain()
.getCodeSource().getLocation().toURI());
System.out.println(jarFile.getName()); 
```

# jquery - 我想在我放下后立即禁用拖动 500 毫秒

> ID：13654306
> 
> 赞同：1
> 
> 时间：2012-11-30T22:49:08.543
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

因此，当我重新排序列表时，只要我放下项目，它就会将位置提交给我的后端代码，并在后端重新排序列表。但是，我遇到的情况是，如果我重新排序非常快，一段时间后前端和后端的列表不再同步。所以我想在我放下片刻后立即禁用拖动以避免竞争条件。

```
function reorder(panelId, type){
    $(escapeClientId(panelId)).sortable({
        start: function(event, ui){
            ui.item.startPos = ui.item.index();
        },
        stop: function(event, ui){
            //submit my start and end position to the server
            //change the cursor to wait
            $('body').css('cursor', 'wait');
            window.setTimeout(wait,600);                                    
        }
    });
    $(escapeClientId(panelId)).disableSelection();
}
function wait(){
    $('body').css('cursor', 'default');
} 
```

如您所见，我将光标更改为`wait`光标 600 毫秒，但是即使光标处于等待模式，它仍然允许用户拖动以重新排序。有没有办法在我放下后立即完全禁用拖动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:11:44.103

您可以尝试使用[禁用](http://api.jqueryui.com/sortable/#method-disable)和[启用](http://api.jqueryui.com/sortable/#method-enable)方法：

```
function reorder(panelId, type) {
    $(escapeClientId(panelId)).sortable({
        start: function (event, ui) {
            ui.item.startPos = ui.item.index();
        },
        stop: function (event, ui) {
            var panel = $(this), 
                body = $('body');

            panel.sortable("disable"); // Disable before submitting.
            body.css('cursor', 'wait');

            //submit my start and end position to the server
            //change the cursor to wait

            setTimeout(function () {
                body.css('cursor', 'default');
                panel.sortable("enable");
            }, 500); // Enable after 500 ms.
        }
    });
    $(escapeClientId(panelId)).disableSelection();
} 
```

# c++ - 模板函数可以比较两个类型名吗？

> ID：13654309
> 
> 赞同：12
> 
> 时间：2012-11-30T22:49:11.950
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中实现 is_same_type 类型特征的程序](https://stackoverflow.com/questions/2639557/program-to-implement-the-is-same-type-type-trait-in-c)

我希望我的模板函数根据两个类型名是否相等来做不同的事情：

```
template <typename T1, typename T2> f()
{
  if (T1==T2) ...;
  else ...;
} 
```

我知道“if(T1==T2)”是行不通的，但是，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T22:54:40.897

您可以在 C++11中检查[`boost::is_same`](http://www.boost.org/doc/libs/1_52_0/libs/type_traits/doc/html/boost_typetraits/reference/is_same.html)or 。[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)

所以，它会是这样的：

```
template <typename T1, typename T2> f()
{
  if (boost::is_same<T1,T2>::value) ...;
  else ...;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T23:52:01.263

```
#include <type_traits>

template <typename A, typename B> void f() {

    if ( std::is_same<A, B>::value ) {

        //

    }

} 
```

[`std::is_same``typedef`根据类型的相等性返回布尔值 (true, false)`A`和`B`]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T22:55:06.780

如果可以推断类型并且没有显式传递，则可以创建两个单独的函数：

```
template<typename SameType>
void f(SameType x, SameType y)
{
    // ...
}

template<typename T1, typename T2>
void f(T1 x, T2 y)
{
    // ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T22:52:34.343

专门化模板

```
template<typename T1, typename T2>
void f()
{
  //The else part goes here
}

template<typename T>
void f()
{
  //The if part goes here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T22:55:35.070

您可以比较`typeid`of`T1`和`T2`

```
#include <typeinfo>

template <typename T1, typename T2> void f()
{
    bool a;
    if (typeid(T1) == typeid(T2))
        a = true;
    else
        a = false;
} 
```

# c - 两个分叉和等待的使用

> ID：13654315
> 
> 赞同：2
> 
> 时间：2012-11-30T22:49:57.950
> 
> 标签：c, unix

目前正在做两个分叉来管道两个进程，但我认为我`wait(&status)`做错了，因为在命令之后我的 shell 只是挂起并且没有返回到我的提示符。我知道我的管道正在工作，因为如果我删除等待，我可以看到结果。

有小费吗？

```
pipe(mypipe);
pid1=fork();
if(pid1==0)
{       
    pid2=fork();
    if(pid2==0)
    {
        close(0);
        dup(mypipe[0]);
        close(mypipe[1]);
        execv(foundnode2->path_dir,arv2);
        exit(0);
    }
    close(1);
    dup(mypipe[1]);
    close(mypipe[0]);
    pid2 = wait(&status2);
    execv(foundnode1->path_dir,arv1);
    exit(0);
}
pid1 = wait(&status2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:05:49.617

如果它只是一个有两个进程的管道，我根本不会等待。只需在父母和孩子中分叉并执行 exec 即可。

```
int fd[2];
pipe(fd);
int pid = fork();
if (pid == -1) {
    /* error handling */
} else if (pid == 0) {
    dup2(fd[0], 0);
    close(fd[1]);
    execv(foundnode2->path_dir,arv2);
    /* error handling for failed exec */
    exit(1);
} else {
    dup2(fd[1], 1);
    close(fd[0]);
    execv(foundnode1->path_dir,arv1);
    /* error handling for failed exec */
    exit(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:07:43.317

经验法则：如果您使用`dup()`或`dup2()`将管道的一端映射到标准输入或标准输出，则应该`close()`使用管道本身的两端。你没有那样做；您的等待正在等待程序完成，但程序不会完成，因为仍然有一个管道打开的过程可以写入管道。此外，创建管道的进程需要关闭管道的两端，因为它本身不使用管道（子进程正在使用它）。另请参阅[C MiniShell — 添加管道](https://stackoverflow.com/questions/13636252/c-minishell-adding-pipelines/13640308#13640308)。

此外，您不应该等待第一个孩子完成后再启动第二个孩子（所以这`pid2 = wait(&status2);`条线是个坏主意）。管道的容量相当小；如果要传输的总数据太大，写子可能会阻塞等待读子读取，但是读子还没有开始，因为它正在等待写子退出（并且需要很长时间让这个僵局自行解决）。您会看到输出没有`wait()`调用，因为管道的第二部分执行并处理来自管道第一部分的数据，但它仍在等待来自 shell 的更多数据。

考虑到这些提示，您最终可能会得到：

```
pipe(mypipe);
pid1 = fork();
if (pid1 == 0)
{        
    pid2 = fork();
    if (pid2 == 0)
    {
        close(0);
        dup(mypipe[0]);
        close(mypipe[1]);
        close(mypipe[0]);
        execv(foundnode2->path_dir, arv2);
        fprintf(stderr, "Failed to exec %s\n", foundnode2->path_dir);
        exit(1);
    }
    close(1);
    dup(mypipe[1]);
    close(mypipe[0]);
    close(mypipe[1]);
    execv(foundnode1->path_dir, arv1);
    fprintf(stderr, "Failed to exec %s\n", foundnode1->path_dir);
    exit(1);
}
close(mypipe[0]);
close(mypipe[1]);
pid1 = wait(&status1); 
```

注意命令失败时向标准错误报告的错误`execv()`。此外，退出状态 0 应保留为成功；1 是一个方便的错误退出状态，或者您可以使用`EXIT_FAILURE`from `<stdlib.h>`。

仍然省略了很多错误检查；操作可能会`fork()`失败；可能会`pipe()`失败。一个后果是，如果第二个`fork()`失败，您仍然会启动第二个孩子（由 标识`foundnode1->path_dir`）。

而且我注意到，您可以通过将管道创建移动到第一个子进程中来节省一些工作（然后父进程不需要 - 实际上，不能 - 关闭管道）：

```
int pid1 = fork();
if (pid1 == 0)
{
    int mypipe[2];      
    pipe(mypipe);
    int pid2 = fork();
    if (pid2 == 0)
    {
        close(0);
        dup(mypipe[0]);
        close(mypipe[1]);
        close(mypipe[0]);
        execv(foundnode2->path_dir, arv2);
        fprintf(stderr, "Failed to exec %s\n", foundnode2->path_dir);
        exit(1);
    }
    close(1);
    dup(mypipe[1]);
    close(mypipe[0]);
    close(mypipe[1]);
    execv(foundnode1->path_dir, arv1);
    fprintf(stderr, "Failed to exec %s\n", foundnode1->path_dir);
    exit(1);
}
pid1 = wait(&status1); 
```

# java - PorterDuffXfermode DST_IN 未按预期工作

> ID：13654322
> 
> 赞同：6
> 
> 时间：2012-11-30T22:50:13.193
> 
> 标签：java, android, drawing, masking, porter-duff

所以我试图加快我们正在做的一些绘图（绘制具有 alpha 透明度的弧的一部分），并试图将整个弧缓存到一个单独的位图中，并使用 alpha 蒙版选择性地显示它。

根据我所做的研究（Android 的 Xfermodes API 演示、[此示例](http://www.ibm.com/developerworks/java/library/j-mer0918/)和[此工具](https://sites.google.com/site/drjohnbmatthews/composite)），如果我有以下两个图形：

![在此处输入图像描述](../Images/0ccd6efddfe5001be1eeb731722df31d.png)

![在此处输入图像描述](../Images/e6333a6c0fdd720ae7a8998ae9f0f597.png)

并使用以下内容进行绘制：

```
Xfermode DST_IN = new PorterDuffXfermode(PorterDuff.Mode.DST_IN);
Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

canvas.drawBitmap(circle, 0, 0, paint);
paint.setXfermode(DST_IN);
canvas.drawBitmap(arc, 0, 0, paint);
paint.setXfermode(null); 
```

我应该得到这个结果：

![在此处输入图像描述](../Images/1091decf6a77a81d25deb947cfdd86d3.png)

目标图像（圆圈）被剪裁到源图像（弧）绘制的区域。相反，我得到了完整的圆圈。如果我只是画圆弧，它会出现在正确的位置，如果我使用 DST_OUT 代替，我会得到预期结果的倒数（圆的其他三个象限）。

我还确保禁用此视图的硬件渲染，以防此 Xfermode 出现问题，但这并没有什么不同。

我以最简单的方式将它分解为一个单独的项目，试图让它工作，并使用以下代码，我仍然遇到同样的问题：

```
public class ClippedView extends View {
    private Xfermode DST_IN, DST_OUT;
    private Paint paint;

    public ClippedView(Context context) {
        super(context);
        init();
    }

    private void init() {
        setLayoutParams(new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
        this.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        DST_IN = new PorterDuffXfermode(PorterDuff.Mode.DST_IN);
        DST_OUT = new PorterDuffXfermode(PorterDuff.Mode.DST_OUT);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        paint.setColor(Color.GREEN);
        canvas.drawRect(0, 0, getWidth() / 2, getHeight() / 2, paint);
        paint.setColor(Color.BLACK);
        paint.setXfermode(DST_IN);
        canvas.drawCircle(getWidth() / 2, getHeight() / 2, getWidth() / 2, paint);
        paint.setXfermode(null);
    }
} 
```

我用错了吗？我只是错过了什么吗？我发现了一个错误吗？:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T00:44:16.203

有一种更便宜、更简单的方法可以实现这一点：使用剪辑。Canvas.clipRect() 就足够了。您的解决方案正在消耗大量的填充率。您可以通过使用 SRC_IN 而不是 DST_IN 来获得您想要的效果。但要小心：它只能在透明位图或图层中工作。当您直接在屏幕上绘制时，目标位置已经被窗口背景填充。

# remote-desktop - 不下载任何东西就可以远程控制桌面？join.me 是如何做到的？

> ID：13654324
> 
> 赞同：0
> 
> 时间：2012-11-30T22:50:29.980
> 
> 标签：remote-desktop, remote-access, webrtc

join.me 如何让与会者无需下载即可控制其他人的桌面？除非我们弄错了，否则似乎只需要组织者下载任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:48:18.117

我不具体知道 join.me 是如何进行桌面共享的，但有适用于客户端的仅限 JavaScript 的解决方案，例如[http://kanaka.github.com/noVNC/](http://kanaka.github.com/noVNC/)，因此您只需要组织者安装 VNC 客户端。SmartCode 有一个 VNC ActiveX 控件版本，几乎可以肯定它违反了 VNC GPL（[此处](http://www.s-code.com/products/serverx/)），但它可能是您想要在组织者方面查看的内容。

# php - JQuery 追加未按预期进行

> ID：13654326
> 
> 赞同：1
> 
> 时间：2012-11-30T22:50:37.193
> 
> 标签：php, jquery, html, mysql, append

我的 JQuery 脚本有问题。我正在做一个 2d 聊天，人们有自己的形象，比如 Habbo 酒店，但是假设移动这些形象的 JQuery 脚本有问题。

我认为更容易显示问题： [单击此处查看问题](http://imezzo.dk/hej/)

我正在使用以下脚本来更新数字：

```
function UpdateRoom() {
    var data = 'roomId='+roomId;

    $.ajax({
        type: "GET",  
        url: "chatfunctions/updateroom.php",
        dataType: 'json',
        data: data,
        success: function(data){

            $.each(data, function(i, data) {
                var temp = parseInt(data.field);
                $('#f' + temp).append('<div class="user" id="'+charId+'" />');
            });
        }
    }); 
} 
```

#f+temp 是图形应该放置的字段的 ID。charId 是图形的 id。

然后我每 500 毫秒调用一次脚本：

```
window.setInterval(function() {
    UpdateRoom();
}, 500 ); 
```

我不确定这是否足以让你们帮助我的代码和示例。如果没有，请告诉我是否需要为您提供更多帮助来帮助我。我的猜测是它是 .append(); 使用错误的函数，但我不是 JQuery 专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:59:30.427

你只是继续追加而不是替换任何东西。

尝试使用 .html() 或 .empty()。

```
$.each(data, function(i, data) {
    var temp = parseInt(data.field);
    $('#f' + temp).html('<div class="user" id="'+charId+'" />');
}); 
```

或者

```
$.each(data, function(i, data) {
    var temp = parseInt(data.field);
    $('#f' + temp).empty(); // clear out all content
    $('#f' + temp).append('<div class="user" id="'+charId+'" />');
}); 
```

不知道您的代码，您可能需要将调用移动到每个循环之外的 .empty() 。

# haskell - 在haskell中翻译while（x < SomeTreshold）

> ID：13654328
> 
> 赞同：2
> 
> 时间：2012-11-30T22:50:42.023
> 
> 标签：haskell

如果某个变量小于某个阈值，则在实现算法时会经常发生这种情况，您会在 while 循环的每次迭代中进行检查。

在命令式语言中，它看起来像：

```
 while ( x < TRESHOLD ) {
      x = usefullStuff();
 } 
```

当然，有用的东西会以某种方式影响 x...

您如何利用函数式编程范式将此构造转换为 haskell？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T23:33:13.060

尽管我不知道你的程序做了什么，但我有一种感觉，你会想要稍微不同地构建你的逻辑。[查看论文Why Functional Programming Mattes](http://www.cs.kent.ac.uk/people/staff/dat/miranda/whyfp90.pdf)的第 4 节- 了解一些想法。它处理类似的情况，涉及使用牛顿法找到方程的根。在那里，职责被划分，以便循环逻辑与逐次逼近的生成分离。

如果`usefulStuff`是一个单子 - 即一个有副作用的函数，你将不得不使用这样的东西：

```
whileLoop x
  | x < THRESHOLD = return x
  | otherwise     = do x <- usefulStuff
                       whileLoop x 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T23:33:32.473

来自 Control.Monad.Loops：

```
iterateWhile :: Monad m => (a -> Bool) -> m a -> m a
iterateWhile p x = do
    y <- x
    if p y
      then iterateWhile p x
      else return y 
```

然后，假设有用的东西有副作用：

```
iterateWhile (< threshold) usefullStuff 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T23:15:52.460

按照说明走

> 如果某个变量小于某个阈值，则在实现算法时会经常发生这种情况，您会在 while 循环的每次迭代中进行检查。

我希望您实际上并不是指无参数`usefullStuff`返回控件 value 的新值`x`，而是将转换`x`作为参数。

的直接翻译是

```
until (>= threshold) usefullStuff x 
```

但是，通常情况下，状态不仅仅是循环控制，所以会有类似的东西

```
until ((>= threshold) . getX) usefullStuff (someDataContaining x) 
```

哪里`usefullStuff :: RecordContainingX -> RecordContainingX`。

另一方面`usefullStuff`，如果真的意味着不带参数，如果它是纯的，它总是会产生相同的结果，所以你要么永远不会进入或永远不会离开循环。这不太有用。所以让我们假设`usefullStuff`一个`IO`-action 产生一个值。然后

```
while :: Ord a -> (a -> Bool) -> a -> IO a -> IO a
while test value action
    | test value = do
               newValue <- action
               while test newValue action
    | otherwise  = return value 
```

将捕获模式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-01T13:36:25.593

第一：在命令式语言中，您通常会编写一个`while`循环 who's body updates `x`。在 Haskell 中，这不可能发生。因此，我们需要稍微不同地构建我们的算法。

您通常会做的是将循环体转换为一个以参数为参数的*函数*`x`，并返回新`x`值作为其结果。然后，您可以使用`until`Prelude 中的函数反复应用该函数，直到满足某些条件。或者，您可以使用`iterate`生成所有结果的*无限列表*，然后使用`takeWhile`或一些类似的功能来扫描该列表以查找感兴趣的项目。

现在，如果你的循环体实际上更新*了几个*变量会发生什么？那么，在这种情况下，您可以将所有这些变量打包到一个数据结构中，然后应用上述过程。不用说，如果你有*很多*这些变量，这可能会变得相当复杂。尽量避免大而复杂的循环。（在任何语言中，不仅仅是 Haskell。）

你使用了“算法”这个词，这让我怀疑你在谈论诸如 Dijkstra 的分流算法、Barnes-Hut n 体模拟算法或其他一些“纯”算法之类的东西。另一方面，如果您的循环体需要对非常大的数据结构执行更新，或者需要执行实际的 I/O 操作（例如，网络服务器的主循环），那么我们需要在 monad 中运行。这通常意味着就地更新*是*可能的，您可以遵循更常用的命令式方法。

# html - 为什么我的 HTML5 矩形看起来被放大了？

> ID：13654333
> 
> 赞同：1
> 
> 时间：2012-11-30T22:50:53.833
> 
> 标签：html, graphics, canvas, image-scaling

在[http://www.html5canvastutorials.com/tutorials/html5-canvas-rectangles/](http://www.html5canvastutorials.com/tutorials/html5-canvas-rectangles/)之后，我在画布上并排绘制了一些矩形。问题是它们看起来被放大了很多。在 1.0 的缩放比例下，它们看起来大约是原始大小的五倍；它们以大约 0.16 的缩放比例显示为正确大小（如果边界模糊）。

我希望我可以通过使画布的像素尺寸更大并缩小来获得解决方法，但是在画布上获得 1:1 缩放的正确方法是什么？画布的宽度和高度设置为 100%，主体的边距为 0。手动将画布的宽度和高度设置为窗口的高度和宽度不会改变此行为。

TIA,

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T23:05:32.060

问题是，您为画布设置*样式*的宽度和高度。您需要设置宽度和高度属性，而不是 css 样式。所以像：

```
<canvas id='mycanvas' width='800' height='600'></canvas> 
```

类似问题中的更多信息：[使用 CSS 时画布被拉伸，但使用“宽度”/“高度”属性正常](https://stackoverflow.com/questions/2588181/canvas-is-stretch-when-using-css-but-normal-with-old-width-and-height-proper)

# sharepoint - SharePoint 发布网站 - 它与简单网站有何不同？

> ID：13654339
> 
> 赞同：0
> 
> 时间：2012-11-30T22:51:30.410
> 
> 标签：sharepoint, sharepoint-2010

这个问题可能听起来很傻，但是快速搜索并没有发现任何东西。

*   引入这种区别的主要目的是什么？
*   如何检查我的网站是否正在发布？
*   我可以打开和关闭此功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:49:37.263

内容发布功能、审批、签到签出等

# maven - 参数化POM文件（Maven）

> ID：13654342
> 
> 赞同：0
> 
> 时间：2012-11-30T22:51:50.323
> 
> 标签：maven, pom.xml

每当我想创建项目的新版本时，我都必须进入并编辑`<version>`POM 文件中的标签。

这些项目是相关的，因此大多数时候它们具有相同的版本。是否可以将新版本放在某个文件中，并在需要时重新生成 POM？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:56:42.040

在这种情况下，最好的办法是使用支持自动更改 pom 中的版本并在适当的 VCS 中创建标签/标签的[发布插件。](http://maven.apache.org/plugins/maven-release-plugin/)有两个步骤[release:prepare](http://maven.apache.org/plugins/maven-release-plugin/examples/prepare-release.html)和[release:perform](http://maven.apache.org/plugins/maven-release-plugin/examples/perform-release.html)可以简单地组合。

像这样的命令：

```
mvn release:prepare release:prepare 
```

将完成所有需要的步骤，例如在 VCS 中制作标签、更改 pom 的版本并将工件部署到您的存储库。但是前提条件是在您的 pom 的 SCM 区域中有正确的条目，正确配置了 distributionManagement 等。

如果项目包含多个具有相同版本的模块，这听起来像是使用多模块构建而不是单独的项目，这将解决手动更改版本的问题。

# matlab - matlab绘图？

> ID：13654343
> 
> 赞同：0
> 
> 时间：2012-11-30T22:51:54.913
> 
> 标签：matlab, octave

这里的这个 Matlab 代码应该绘制存储在向量 X 和 Y 中的值，这些值已经由用户填充，这里的问题是：当你点击复数和实数极点时，绘图结果是正确的点，而当只输入真正的极点，输出很奇怪。这就像x轴在y轴上，我不知道水平轴上到底是什么。

```
axis([-10,10,-10,10])
grid
[x,y] = ginput 

subplot(2,2,1)
axis([-10,10,-10,10])
grid

subplot(2,2,2)
axis([-10,10,-10,10])
hold all
grid

x = round (x)
y = round (y)

if( y > 0.5 | y < 0.5)
r1 = x + i*y
r2 = conj(r1)

plot (r1,'*')
hold all 
plot (r2,'*')

else

plot (x,y)

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:49:20.763

我不是 100% 确定你在说什么，但我相信你的问题出在 if 语句中，如下所示。具体来说，除非 y=.5，否则您永远不能输入第一个子句，这不太可能。我怀疑你想要`abs(y)<0.5`，在 [-0.5 0.5] 之间寻找。其次，您的两个图彼此不匹配，第一个绘制复数，第二个绘制 x 和 y 值。这似乎不正确，但我不确定你要做什么，所以我不知道如何解决它。

```
if( y > 0.5 | y < 0.5)

    r1 = x + i*y
    r2 = conj(r1)

    plot (r1,'*')
    hold all 
    plot (r2,'*')

else

    plot (x,y)

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:43:28.457

问题是 Y 应该在这个范围内： `if ( y > 0.5 | y < -0.5 )` 我错误地写了它：`if ( y > 0.5 | y < 0.5 )`

and why I want this range, because I have the Y-axis representing the Imaginary axis, and the X-axis representing the Real axis, whenever I attempt to enter a Real number, the y coordinate always has a value for example y = 0.001, meaning it's never equal to zero, that's why I needed this approximation to assure that if Y's value is larger than 0.5 or smaller than -0.5 then it's a complex number, otherwise it's real.

And finally, I used : `scatter (x,y,'filled')` instead of plot cause plot drew a line, not points.

thanks for everyone :)

# opengl - 曲面细分后的 Z-fighting

> ID：13654351
> 
> 赞同：0
> 
> 时间：2012-11-30T22:53:07.843
> 
> 标签：opengl, glsl, tessellation

![奇怪的文物](../Images/f0fff3bf28271e8b142348ca175f40eb.png)

我正在做opengl tessellation，这是我得到的图纸。如果我剔除背面，那些较暗的斑点往往会消失。这看起来像 Z-fighting，但我不知道应该在哪里解决这个问题（我尝试增加模型大小但未成功）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:20:58.403

近平面应尽可能远，远平面应尽可能近。在您的情况下，1000 太多了。

增加近平面会有所帮助，但在您的情况下，模型看起来已经非常接近了。

# highcharts - isNaN 检查后 y 轴上的 Highcharts NaN 值

> ID：13654352
> 
> 赞同：2
> 
> 时间：2012-11-30T22:53:20.933
> 
> 标签：highcharts

由于 NaN 值，我的一些系列图表未在某些区域呈现。我检查了从服务器返回的数据点，除了整数之外，我的所有点都没有返回。为什么工具提示中的某些百分比返回 NaN.N% 或 0.00% 似乎没有押韵或理由。我可以将鼠标悬停在一个点上，工具提示显示“0 (0.00%)”，然后将鼠标悬停在图表上稍远一点的点上，让它显示“5 (NaN.N%)”。我试图在格式化程序选项中插入一个 NaN 检查而不做任何更改。这是我的功能（作为 CoffeeScript）：

```
labels: {
  formatter: -> return (this.value > 0 ? '+' : '') + (isNaN(this.value) ? 0.00 : this.value) + '%'
} 
```

重申一下，工具提示渲染从来都不是问题，工具提示中的实际数字计数也不是问题，问题只是 y 轴线、工具提示中的百分比和系列线。以下是我所看到的几个示例：

[http://imgur.com/a/wLHay](http://imgur.com/a/wLHay)

# javascript - 为什么此警报被触发三次而不是一次

> ID：13654353
> 
> 赞同：0
> 
> 时间：2012-11-30T22:53:46.063
> 
> 标签：javascript, jquery

在这个 jsBin 文件中，一个警报（仅显示“已触发”）被调用了 3 次。

它应该只被调用一次，因为它刚刚添加到：

```
.data( "autocomplete" )._renderItem = function( ul, item ) { 
```

这是 bin 文件：http: [//jsbin.com/welcome/55641/edit](http://jsbin.com/welcome/55641/edit)

如何修改代码以便只触发一次警报？

整个代码：

```
<!doctype html>

<html lang="en">
<head>

 <style type="text/css">
        fieldset {width: 60%; margin: 0 auto;}
        div.row {clear: both;}
        div.row label {float: left; width: 60%;}
        div.row span {float: right; width: 35%;}
    </style>

    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Custom data and display</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />

    <style>
    #project-label {
        display: block;
        font-weight: bold;
        margin-bottom: 1em;
    }
    #project-icon {
        float: left;
        height: 32px;
        width: 32px;
    }
    #project-description {
        margin: 0;
        padding: 0;
    }
    </style>

    <script>
    $(function() {
        var projects = [
            {
                value: "jquery",
                label: "jQuery",
                desc: "the write less, do more, JavaScript library",
                icon: "jquery_32x32.png"
            },
            {
                value: "jquery-ui",
                label: "jQuery UI",
                desc: "the official user interface library for jQuery",
                icon: "jqueryui_32x32.png"
            },
            {
                value: "sizzlejs",
                label: "Sizzle JS",
                desc: "a pure-JavaScript CSS selector engine",
                icon: "sizzlejs_32x32.png"
            }
        ];

        $( "#project" ).autocomplete({
            minLength: 0,
            source: projects,
            focus: function( event, ui ) {
                $( "#project" ).val( ui.item.label );
                return false;
            },
            select: function( event, ui ) {
                $( "#project" ).val( ui.item.label );
                $( "#project-id" ).val( ui.item.value );
                $( "#project-description" ).html( ui.item.desc );
                $( "#project-icon" ).attr( "src", "images/" + ui.item.icon );

                return false;
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            alert('fired');
            return $("#suggestionsDiv").append("<div class='row'> <label for='first-field'>The first field</label><span><input type=text id='first-field' size='15' /></span></div>");
        };

    });

    </script>
</head>
<body>

<div id="project-label">Select a project (type "j" for a start):</div>
<img id="project-icon" src="images/transparent_1x1.png" class="ui-state-default" alt="" />
<input id="project" />
<input type="hidden" id="project-id" />
<p id="project-description"></p>

  <fieldset>

            <legend>Suggestions</legend>

  <div id ="suggestionsDiv">
            <div class="row">
                <label for="first-field">The first field</label>
                <span><input type="text" id="first-field" size="15" /></span>
            </div>
            <div class="row">
                <label for="second-field">The second field with a longer label</label>
                <span><input type="text" id="second-field" size="10" /></span>
            </div>
            <div class="row">
                <label for="third-field">The third field</label>
                <span><input type="text" id="third-field" size="5" /></span>
            </div>
   </div>
  </fieldset>

</body>
</html>
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:09:00.137

当您`j`按照建议在字段中键入时，将返回三个项目。对于每个项目，`_renderItem`都会调用该方法来呈现每个项目，从而产生三个警报。它按预期工作。

# java - 显示服务器时间而不是客户端时间的 Spring 应用程序

> ID：13654354
> 
> 赞同：5
> 
> 时间：2012-11-30T22:53:50.500
> 
> 标签：java, spring, datetime

这是我的代码：

```
@RequestMapping(value="/test", method=RequestMethod.GET)
public @ResponseBody String test(HttpServletRequest request) {
    Calendar calendar = new GregorianCalendar(request.getLocale());
    String currentTime = calendar.getTime().toString();
    return"Current Time: " + currentTime;
} 
```

这一次向我展示：

```
Current Time: Fri Nov 30 22:45:42 UTC 2012 
```

我在中央时区，所以它应该向我展示这个：

```
Current Time: Fri Nov 30 14:45:42 CST 2012 
```

为什么我得到的是服务器时间而不是客户端时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T22:55:06.990

无论您的客户端在哪里，您的代码都会在服务器上执行。在服务器上，您将为该机器设置时区，用于计算时间。当您调用`calendar.getTime()`此时区时，将使用该时区。

如果您想要客户端时区，则需要发送它并使用[SimpleDateFormat](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html)将服务器时间转换为客户端时区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T22:59:48.213

这段代码是正确的：

```
Calendar calendar = new GregorianCalendar(request.getLocale()); 
```

它基本上创建了一个`Calendar` [in a](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getLocale%28%29)的实例：

> 客户端将根据 Accept-Language 标头接受内容的首选语言环境

您的错误是转换`Calendar`为`Date`此处：

```
calendar.getTime() 
```

`java.util.Date`类与时区无关，并且始终其默认`toString()`实现始终使用系统（您的服务器）时区。如果要在客户端的时区中格式化当前服务器时间，请使用以下代码片段：

```
DateFormat df = DateFormat.getDateTimeInstance(
                  DateFormat.LONG, 
                  DateFormat.LONG, 
                  request.getLocale()
  );

df.format(new Date()); 
```

最后一点：这在使用客户端时区的服务器上显示时间。这不是浏览器（操作系统）中设置的客户端时间。为了弄清楚客户端上的时区是什么，您需要在 HTTP 请求中显式发送客户端的当前时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T01:17:48.423

我建议保留控制器代码以返回 UTC 时间。然后在视图层或（更好）在客户端浏览器上执行的 javascript 代码中转换为客户端时间。

# python - 我有大量相同性质的小文件。我可以在它们上构建字典，但单独压缩每个文件吗？

> ID：13654357
> 
> 赞同：1
> 
> 时间：2012-11-30T22:54:14.847
> 
> 标签：python, algorithm, compression, machine-learning, storage

语料库由字符串（文件名）及其校验和组成，所以我希望它的熵高于普通文本。此外，该集合太大而无法分析，因此我将对其进行采样以创建全局字典。我的任务有没有花哨的机器学习方法？

我应该使用哪种算法或者更好的库？

我正在使用 python 以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:57:24.403

我建议你使用[稀疏编码](http://en.wikipedia.org/wiki/Sparse_coding)。它允许您使用您的数据集来推断一个过度完整的字典，然后使用该字典对您的数据进行编码。如果您的数据确实具有相似的性质，那么这可能对您很有效。

# c# - 无法访问已处置的对象

> ID：13654358
> 
> 赞同：1
> 
> 时间：2012-11-30T22:54:17.003
> 
> 标签：c#, forms, object, dispose

我的程序有多种形式。第五个也是最后一个表单有一个按钮，单击该按钮时使用方法 Application.Exit() 关闭应用程序。但是，每次单击该按钮时，我都会在第一个表单上收到围绕此代码的错误“无法访问已处理的对象”：

```
 frm2 f2 = new frm2();
            this.Hide();
            f2.ShowDialog();
            this.Show(); 
```

编译器指示该语句`this.show()`是问题所在。有人可以解释为什么我会收到此错误以及如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:47:36.417

好的，编辑了我的答案，我复制了您的问题。如果要使用`Form.ShowDialog`，则应设置正在关闭应用程序的控件的 DialogResult。因此，在按钮属性中，您应该将对话框结果设置为某些内容，例如`Cancel`.

然后在按钮单击事件上，您将执行以下操作：

```
 private void btnClose_Click(object sender, EventArgs e)
    {
        if (this.DialogResult == DialogResult.Cancel)
        {
            Application.Exit();
        }
    } 
```

否则如果你不需要使用`Form.ShowDialog`，你可以只显示Form2。以上在我的测试中不会产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:18:50.717

In your code example, did `frm2` make a call to `Application.Exit`? If it did, then why are you trying to call `this.Show` again?

Anyway, you may have a problem related to how you started the application's message loop. Are you running `Application.Run()`, or `Application.Run(form1)`?

If you provided a form to `Application.Run()` when you started your message loop, then you should not be calling `Application.Exit` in order to exit the application. Instead, you should simply close your main window, that would cause the message loop to finish, the call to `Application.Run` to return, and your application will terminate cleanly.

# android - 日期时间类型的 SGS3 Android 输入值

> ID：13654365
> 
> 赞同：1
> 
> 时间：2012-11-30T22:55:21.787
> 
> 标签：android, jquery, input, selector

所以我已经尝试了一段时间，但我似乎无法找出问题所在。我有一个输入

```
<input type="datetime" class="nativedatetimepicker" placeholder="somestuff" name="datetime-la" id="datetime-la"/> 
```

我要做的就是为它设置值

```
$("#datetime-la").val(anytime); 
```

我在任何时候都尝试过各种不同的值，例如 new Date()、Date().toISOString()、Date().toString() 等。没有任何效果。但是，此代码适用于 iOS 以及所有其他设备上的 Android 2.33 - 4.04。

现在，如果我将其留空（这是不可取的），它可以使用 cordova 具有的任何内置函数设置日期和时间，并正确设置输入的值。我在这里错过了什么吗？为什么这个问题只出现在三星 Galaxy S3 上，而在 Atrix HD 等其他手机上没有。

更新：好吧，我试着在一个简单的网页中制作它，我相信这是设备的问题。这是我尝试过的代码，但它不起作用：

```
 <!DOCTYPE html>
    <html>
    <head>
    </head>
    <body onload="load()">
    </body>
    <script type="text/javascript">
        function load(){
            document.getElementById('datetime-la').value = "something";
        }
    </script>
    <input type="datetime" class="nativedatetimepicker" name="datetime-la" id="datetime-la" style="width:50%;height:200px;"/>
    </html> 
```

# ms-access - MsAccess 选择相似地址

> ID：13654370
> 
> 赞同：0
> 
> 时间：2012-11-30T22:55:33.963
> 
> 标签：ms-access

我有访问女士的查询，例如：

```
SELECT [tbl1].[StreetAd] FROM tbl1
GROUP BY [tbl1].[StreetAd]
HAVING (((Count(tbl1.Sort))>1 
```

它将选择相同的街道地址和唯一的排序。我需要同样的东西，但是 - 选择 SIMILAR 地址 - 如果前 4 个地址字符匹配。

当我做：

```
SELECT [tbl1].[StreetAd] FROM tbl1
GROUP BY Left([tbl1].[StreetAd], 4)
HAVING (((Count(tbl1.Sort))>1 
```

访问显示错误。

出了什么问题以及如何编写正确的查询？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:59:51.833

尝试这个：

```
SELECT Left([tbl1].[StreetAd], 4)
FROM tbl1
GROUP BY Left([tbl1].[StreetAd], 4)
HAVING Count(tbl1.Sort)>1 
```

然后要获取完整地址，您可以使用以下方法加入上一个查询`tbl1`：

```
SELECT Distinct [tbl1].[StreetAd]
FROM
  tbl1 INNER JOIN
  (SELECT Left([tbl1].[StreetAd], 4) as Left_Addr
  FROM tbl1
  GROUP BY Left([tbl1].[StreetAd], 4)
  HAVING Count(tbl1.Sort)>1) tbl1_b
  ON Left([tbl1].[StreetAd], 4) = tbl1_b.Left_Addr 
```

# ruby - 避免重复的respond_to？打电话

> ID：13654373
> 
> 赞同：0
> 
> 时间：2012-11-30T22:55:51.000
> 
> 标签：ruby, dry

我需要检查一个对象是否响应任意数量的方法。

我厌倦了这样做：

```
if a.respond_to?(:foo) && a.respond_to?(:bar) && a.respond_to?(:blah) 
```

什么是更“正确”的 DRY 方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:05:06.760

您始终可以将其包装在辅助方法中：

```
def has_methods?(obj, *methods)
   methods.all?{|method| obj.respond_to? method}
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:07:22.750

如果你对猴子补丁没有任何意见，试试这个：

```
class Object
  def respond_to_all? *meths
    meths.all? { |m| self.respond_to?(m) }
  end

  def respond_to_any? *meths
    meths.any? { |m| self.respond_to?(m) }
  end
end

p 'a'.respond_to_all? :upcase, :downcase, :capitalize
#=> true

p 'a'.respond_to_all? :upcase, :downcase, :blah
#=> false

p 'a'.respond_to_any? :upcase, :downcase, :blah
#=> true

p 'a'.respond_to_any? :upcaze, :downcaze, :blah
#=> false 
```

**更新：**使用`meths.all?`和`meths.any?`。@MarkThomas，感谢您提神醒脑。

**更新：**修正`responsd`错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:04:33.753

检查来自 的`Active Support`扩展名`Rails`。它有方法[try](http://edgeguides.rubyonrails.org/active_support_core_extensions.html#try)。由于缺乏上下文，很难说如何使用这种方法，可能是这样的：

```
if a.try(:foo) && a.try(:bar) && a.try(:blah) 
```

为了使用这种方法，你应该

```
require 'active_support/core_ext/object/try.rb' 
```

还要检查我的这个方法的版本[tryit](https://github.com/sevenmaxis/tryit)：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T23:04:53.277

“正确”的方式（或其中一种方式，无论如何）是告诉不要询问，这意味着如果您向对象发送消息，您希望它响应而不会抱怨。这也被称为鸭子打字（如果它会嘎嘎叫，那就是鸭子）。

我不能给你任何具体的建议，因为你还没有提出具体的问题。如果您正在测试三种不同的方法，您似乎不知道对象`a`是什么类型，这可能是一个有趣的案例。发布更多代码！

# java - 方法参数不匹配：需要双精度，未传递参数

> ID：13654374
> 
> 赞同：-2
> 
> 时间：2012-11-30T22:56:16.673
> 
> 标签：java, bluej

我几乎完成了，但是当我编译时出现错误“IncomeTax 类中的方法 getUserTax 不能应用于给定类型；需要双精度；发现：没有参数；原因：实际参数列表和正式参数列表的长度不同”多次编码，我找不到错误所在的位置。它位于“userTax = test.getUserTax(); 行代码的末尾附近。

```
import java.util.Scanner;  //Needed for the Scanner Class
/**
 * Write a description of class IncomeTax here.
 * 
 * @author CD
 * 11/30/2012
 * The IncomeTax class determines how much tax you owe based on taxable income.
 */
public class IncomeTax
{
    private int income;

    /** 
     * The constructor accepts an argument for the income field.
     */
    public IncomeTax(int i)
    {
        income = i;
    }
    /**
    * The setIncome method accepts an argument for the income field.
    */
    public void SetIncome(int i)
    {
        income = i;
    }
    /**
     * The getIncome method returns the income field.
     */
    public double getIncome()
    {
        return income;
    }
    /**
     * The getUserTax returns the tax for the income.
     */
    public static double getUserTax(double income)
    {
        double userTax = 0.10;
        if (income > 250000.0) {
            userTax = 0.35;
        } else if(income > 130000.0) {
            userTax = 0.33;
        } else if(income > 60000.0) {
            userTax = 0.28;
        } else if(income > 30000.0) {
            userTax = 0.25;
        } else if(income > 10000.0) {
            userTax = 0.15;
        }
    return userTax;
}
/**
 * This program uses the IncomeTax class to determine the Income tax for the user's 
income.
 */
public static void main(String [] args)
{
    int userIncome; //To hold taxable income
    double userTax; //To hold tax

    //Create a Scanner object to read input.
    Scanner keyboard = new Scanner(System.in);

    //Get the Personal Income.
    System.out.print("Enter your taxable income and" + "I will tell you the income tax:");
    userIncome = keyboard.nextInt();

    //Create an IncomeTax object with the numeric score.
    IncomeTax test = new IncomeTax(userIncome);

    //Get the income tax.
    userTax = test.getUserTax();

    //Display the income tax.
    System.out.print("Your income tax is" + test.getUserTax());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:57:53.717

```
userTax = test.getUserTax(); 
```

您需要将`double`值作为参数传递给此调用。您的`getUserTax`方法定义为`double`所需的类型参数。

```
public static double getUserTax(double income) 
```

例子：

`userTax = test.getUserTax(10.0);`//这里10.0只是举例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:59:14.907

只需更改此方法签名：-

```
public static double getUserTax(double income) 
```

至： -

```
public static double getUserTax() 
```

您不需要传递任何`income`参数，因为您已经在类中`income`作为实例属性。当您在实例`IncomeTax`上调用此方法时：-`IncomeTax`

```
test.getUserTax(); 
```

方法中`income`使用的只是`this.income`，它引用了实例属性。

# objective-c - 使用 atos 通过 dSYM 确定崩溃的方法名称

> ID：13654376
> 
> 赞同：11
> 
> 时间：2012-11-30T22:56:25.633
> 
> 标签：objective-c, xcode, debugging, stack-trace

我有一个来自用户的控制台堆栈（不是崩溃报告），我正在尝试确定我的应用程序中的哪个方法调用是最后一个站着的人。

我知道他们使用的是哪个版本的应用程序，并且我拥有该发布/调试版本的副本，以及存档副本的 dSYM 文件。

但是，当我尝试使用`atos`吐出内存地址时，它似乎没有帮助。（我`0x000000010e703bc0`从下面的堆栈中使用。）

```
craig-mbp:Desktop Craig$ atos -o MyApp.app_1.0.0.dSYM/Contents/Resources/DWARF/MyApp -arch x86_64
0x000000010e703bc0 (<- entered by me)
0x000000010e703bc0 (<- console output) 
```

我需要输入某种偏移量吗？或者某种内存地址数学来确定我的程序内存块内的实际位置，基于用户提供给我的地址？

这是我收到的堆栈跟踪的全部内容：

```
28/11/12 10:48:56.220 AM    MyApp[411]  (
    0   CoreFoundation                      0x00007fff8fee90a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8e94a3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8fee8e7c +[NSException raise:format:] + 204
    3   Foundation                          0x00007fff92b1ce5c -[NSPlaceholderString initWithString:] + 93
    4   Foundation                          0x00007fff92b1cde4 +[NSString stringWithString:] + 43
    5   MyApp                               0x000000010e703bc0 MyApp + 23488
    6   MyApp                               0x000000010e70a038 MyApp + 49208
    7   MyApp                               0x000000010e70b41a MyApp + 54298
    8   MyApp                               0x000000010e70bb92 MyApp + 56210
    9   Foundation                          0x00007fff92b22db5 __NSFireDelayedPerform + 358
    10  CoreFoundation                      0x00007fff8fea5da4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
    11  CoreFoundation                      0x00007fff8fea58bd __CFRunLoopDoTimer + 557
    12  CoreFoundation                      0x00007fff8fe8b099 __CFRunLoopRun + 1513
    13  CoreFoundation                      0x00007fff8fe8a6b2 CFRunLoopRunSpecific + 290
    14  HIToolbox                           0x00007fff8b31c0a4 RunCurrentEventLoopInMode + 209
    15  HIToolbox                           0x00007fff8b31be42 ReceiveNextEventCommon + 356
    16  HIToolbox                           0x00007fff8b31bcd3 BlockUntilNextEventMatchingListInMode + 62
    17  AppKit                              0x00007fff948e7613 _DPSNextEvent + 685
    18  AppKit                              0x00007fff948e6ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    19  AppKit                              0x00007fff948de283 -[NSApplication run] + 517
    20  AppKit                              0x00007fff94882cb6 NSApplicationMain + 869
    21  MyApp                               0x000000010e6ffab4 MyApp + 6836 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T12:50:35.510

它需要一个加载地址。你有没有尝试过：

```
atos -o MyApp.app_1.0.0.dSYM/Contents/Resources/DWARF/MyApp -arch x86_64 -l 0x000000010E6FE000 
```

我通过从 0x000000010e6ffab4 中减去 6836 (base10) 从您的示例中得到 0x000000010E6FE000 ... 或者您可以使用此处显示的任何其他数学项用于 MyApp 。

这是我最近一次崩溃的示例，其中 0x2d000 从崩溃日志中很明显。第一行是我在命令行中输入的。之后的每一行都是程序输出（人为地用 $ 或 $> 缩进我的输入......屏幕上没有这样的提示）。

```
$ atos -o /x/xcode/DerivedData/Xxxx/Build/Products/Debug-iphoneos/Xxxx.app.dSYM/Contents/Resources/DWARF/Xxxx -l 0x2d000
got symbolicator for /x/xcode/DerivedData/Xxxx/Build/Products/Debug-iphoneos/Xxxx.app.dSYM/Contents/Resources/DWARF/Xxxx, base address 1000
$> 0x0002f9a6
0x000039a6 (in Xxxx)
$> 0x0002f940
0x00003940 (in Xxxx)
$> 0x000c70f6
-[TFHTTPOperation connection:didReceiveData:] (in Xxxx) + 754 
```

# ruby-on-rails - 使用 has_many 关联保存模型

> ID：13654378
> 
> 赞同：2
> 
> 时间：2012-11-30T22:56:50.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在为学校建立一个审查申请。用户只有在登录后才能查看学校。

**你现在可以做什么：**

您可以撰写评论并添加 1 - 5 之间的评分。应用程序会保存评论。

**我想要它做什么：**

我想保存记录的 user_id。因此，评论属于用户和学校。

但我对如何做到这一点有点困惑。欢迎任何想法和指导方针=）

**审查模型：**

```
class Review < ActiveRecord::Base
  belongs_to :school
  belongs_to :user
  attr_accessible :content, :rating
end 
```

**学校型号：**

```
class School < ActiveRecord::Base
  has_many :reviews
  ..more code..
end 
```

**用户型号：**

```
class User < ActiveRecord::Base  
  has_many :reviews
  ...more code..
end 
```

**审核控制人：**

```
class ReviewsController < ApplicationController
    def create
        @school = School.find(params[:school_id])
        @review = @school.reviews.create!(params[:review])
        redirect_to @review.school, notice: "Review has been created."
    end
end 
```

**审查表**

```
<%= form_for [@school, Review.new] do |f| %>
        <h3>Write a review</h3>
        <div class="reviews_comments_container">
            <div class="review_box">
                <ol class="radio-rater">
                    <%= f.radio_button(:rating, 1) %>
                    <%= f.radio_button(:rating, 2) %>
                    <%= f.radio_button(:rating, 3) %>
                    <%= f.radio_button(:rating, 4) %>
                    <%= f.radio_button(:rating, 5) %>
                </ol>
            </div>
            <div class="review_box" id="review_textarea">
                <%= f.text_area :content, rows: 4, cols: 70 %>
            </div>
            <div class="review_box">
                <%= f.submit 'Save your review', :class => "btn" %>
            </div>
        </div>
    <% end %> 
```

**迁移文件：**

```
class CreateReviews < ActiveRecord::Migration
  def change
    create_table :reviews do |t|
      t.text :content
      t.integer :rating
      t.belongs_to :school
      t.belongs_to :user
      t.timestamps
    end
    add_index :reviews, [:school_id, :user_id]
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:48:19.850

有几种不同的方法可以做到这一点。您已经正确设置了关联，因此它归结为您的控制器。由于拨打电话的方式，您`:school_id`已经设置好了`create`：

```
@review = @school.reviews.create!(params[:review]) 
```

您可以`:user_id`手动设置：

```
params[:review][:user_id] = current_user.id
@review = @school.reviews.create!(params[:review]) 
```

这是假设您有`current_user`来自登录系统的方法，这是相当标准的。您的创建操作可能会有所改进。尝试这样的事情：

```
def create
    @school = School.find(params[:school_id])
    @review = @school.reviews.new(params[:review])

    #Assuming your authentication provides the current_user method
    @review.user_id = current_user.id

    if @review.save
        redirect_to @review.school, notice: "Review has been created."
    else
        render :new
    end
end 
```

如果验证失败或由于某种原因无法将记录保存到数据库，这具有更好地控制错误处理的额外好处。此外，您应该`new`在您的`reviews_controller`.

```
class ReviewsController < ApplicationController
    def new
        @school = School.find_by_id(params[:school_id])
        @review = Review.new
    end

    def create
        @school = School.find(params[:school_id])
        @review = @school.reviews.new(params[:review])

        #Assuming your authentication provides the current_user method
        @review.user_id = current_user.id

        if @review.save
            redirect_to @review.school, notice: "Review has been created."
        else
            render :new
        end
    end
end 
```

这样，在您的`form_for`通话中，您可以将`Review.new`通话更改为`@review`，这样会更好。

**更新：**

抱歉，是我的错。正如[这个 SO 答案所示](https://stackoverflow.com/questions/6823812/rails-3-create-a-new-post-while-i-am-at-the-show-view-of-a-particular-post)，放入标签是可以接受`Review.new`的。`form_for`这对我来说似乎有点骇人听闻，但我在几个地方证实了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:32:47.400

如果您使用 Devise 对用户进行身份验证，则 current_user 是对象，在身份验证后返回。在您的评论控制器中：

```
class ReviewsController < ApplicationController
  def create
    @school = School.find(params[:school_id])

    @review = @school.reviews.build(params[:review])
    @review.user_id = current_user

      if @review.save
    redirect_to @review.school, notice: "Review has been created."
       end
  end
end 
```

如果您必须在表 'reviews' 中包含一个名为 user_id 的新列，那么您应该创建一个新迁移，然后创建 'rake db:migrate'。（根据您的迁移，您似乎有此列）。

编辑：嵌套资源的路线：

```
resources :schools do
  resources :reviews do
end 
```

# windows-phone - 如何在 windows phone 8 中的页面之间传递非字符串参数？

> ID：13654379
> 
> 赞同：11
> 
> 时间：2012-11-30T22:57:05.340
> 
> 标签：windows-phone, windows-phone-8

我正在将 Windows 商店应用程序转换为 Windows Phone 8。对于 WinRT，您可以在调用 frame.navigate 时将任何对象作为参数传递。(frame.navigate(type sourcePageType, object 参数))

对于 windows phone，导航的工作方式似乎不同，您通过调用 uri 进行导航，例如：frame.navigate(new uri("mypage.xaml", UriKind.Relative))

Windows 文档指出，您可以通过将字符串添加到 uri 来将字符串作为参数传递。

是否有一种可接受的方式在我尚未找到的页面之间传递复杂对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-23T06:00:27.097

我最终扩展了 NavigationService 类，如下所示：

```
public static class NavigationExtensions
{
    private static object _navigationData = null;

    public static void Navigate(this NavigationService service, string page, object data)
    {
        _navigationData = data;
        service.Navigate(new Uri(page, UriKind.Relative));
    }

    public static object GetLastNavigationData(this NavigationService service)
    {
        object data = _navigationData;
        _navigationData = null;
        return data;
    }
} 
```

然后`NavigationService.Navigate("mypage.xaml", myParameter);`在源页面上调用，在目标页面调用的 OnNavigatedTo 方法中`var myParameter = NavigationService.GetLastNavigationData();`获取参数数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T10:43:10.790

我只想添加上面 Zik 提供的最佳答案的 VB.net 版本。一旦我弄清楚如何将他的代码翻译成 VB，我立即可以使用类似于 WinRT/Windows 8 方式的导航。

我使用以下代码创建了一个模块：

```
Module NavigationExtensionsModule

Sub New()
End Sub
Private _navigationData As Object = Nothing

<System.Runtime.CompilerServices.Extension> _
Public Sub Navigate(service As NavigationService, page As String, data As Object)
    _navigationData = data
    service.Navigate(New Uri(page, UriKind.Relative))
End Sub

<System.Runtime.CompilerServices.Extension> _
Public Function GetLastNavigationData(service As NavigationService) As Object
    Dim data As Object = _navigationData
    _navigationData = Nothing
    Return data
End Function
End Module 
```

然后像这样导航到另一个页面：

```
 NavigationService.Navigate("pagename.xaml", ObjectToPassToThePage) 
```

最后，要在我的另一个页面中获取该对象，在 OnNavigatedTo 子中：

```
ThisPageData = NavigationService.GetLastNavigationData()

Me.DataContext = ThisPageData 
```

归功于 Zik 的实际答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-29T05:10:28.970

如果您使用的是 MVVM 架构，那么您可以在使用 Messenger 注册后传递字符串或任何值。创建一个带有字符串（比如消息）变量的模型类（比如 PageMes​​sage）。您想将字符串从 homepage.xaml 传递给 newpage.xaml，然后在 homepage.xaml 中发送这样的消息

```
Messenger.Default.Send(new PageMessage{message="Hello World"}); 
```

在 newpage.xaml 中，您应该像这样注册信使，

```
Messenger.Default.Register<PageMessage>(this, (action) => ReceiveMessage(action));

 private object ReceiveMessage(PageMessage action)
 {
    string receivedMessage=action.message;
    return null;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T00:50:53.010

正如@gregstoll 所说，Windows Phone 中最好的方法是发送一个标识符，然后利用 App.ViewModel 中的数据来访问您想要的实际数据。QueryString 的长度是有限制的，在大多数情况下，你真的不想强调它的极限。

如果您能更多地了解您的项目场景，我们可以更好地帮助您确定最佳路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T23:07:10.440

我在我的应用程序中所做的是将某种标识符（索引、GUID 等）作为字符串传递，然后在要导航到的页面的 OnNavigatedTo() 方法中查找对象。所以对象将保持存储在 ViewModel（或任何地方）中，您只需传递一个字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-15T21:11:18.560

MSDN 概述了在页面之间传递非字符串参数的 3 种方法。其中包括：自定义导航扩展、静态属性和 JSON+隔离存储。取自[微软](http://code.msdn.microsoft.com/wpapps/Pass-non-string-parameters-62ea2cc8)的代码：

```
 /// <summary> 
   /// Custom Navigation Extensions. 
   /// </summary> 
   /// <param name="sender"></param> 
   /// <param name="e"></param> 
   private void btnMethod1_Click(object sender, RoutedEventArgs e) 
   { 
       NavigationService.Navigate("/Result.xaml?name=1", listString); 
   } 

   /// <summary> 
   /// Static properties 
   /// </summary> 
   /// <param name="sender"></param> 
   /// <param name="e"></param> 
   private void btnMethod2_Click(object sender, RoutedEventArgs e) 
   { 
       App.ObjectNavigationData = listString; 
       NavigationService.Navigate(new Uri("/Result.xaml?name=2", UriKind.Relative)); 
   } 

   /// <summary> 
   /// Json + IsolatedStorage 
   /// </summary> 
   /// <param name="sender"></param> 
   /// <param name="e"></param> 
   private void btnMethod3_Click(object sender, RoutedEventArgs e) 
   { 
       string filePath = "objectData"; 

       using (IsolatedStorageFile isolatedStorage = IsolatedStorageFile.GetUserStoreForApplication()) 
       { 
           if (isolatedStorage.FileExists(filePath)) 
           { 
               isolatedStorage.DeleteFile(filePath); 
           } 

           using (IsolatedStorageFileStream fileStream = isolatedStorage.OpenFile(filePath, FileMode.Create, FileAccess.Write)) 
           { 
               string writeDate = string.Empty; 

               // Json serialization. 
               using (MemoryStream ms = new MemoryStream()) 
               { 
                   var ser = new DataContractJsonSerializer(typeof(List<string>)); 
                   ser.WriteObject(ms, listString); 
                   ms.Seek(0, SeekOrigin.Begin); 
                   var reader = new StreamReader(ms); 
                   writeDate = reader.ReadToEnd(); 
               } 

               // Save to IsolatedStorage. 
               using (StreamWriter writer = new StreamWriter(fileStream)) 
               { 
                   writer.WriteLine(writeDate); 
               } 
           } 
       } 

       NavigationService.Navigate(new Uri("/Result.xaml?name=3", UriKind.Relative)); 
   } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-11T07:10:28.620

```
Yes there is a way to use a complex object in different pages in wp8 or wp7\. You can use complex objects between pages by IsolatedStorageSettings.

IsolatedStorageSettings AppSettings = IsolatedStorageSettings.ApplicationSettings;

// to save an object in isolatedstoragesettings
if (!AppSettings.Contains("ObjectKey"))
      AppSettings.Add("ObjectKey", Your object value);
else
      AppSettings["ObjectKey"] = Your object value;

// to retrieve value of an object from isolatedstoragesettings
if(AppSettings.Contains("ObjectKey"))
    {
    var objectValue = (Cast object to type)AppSettings["ObjectKey"];
    //Remove 
     AppSettings.Remove("ObjectKey");
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-03T07:00:30.623

无法发送不是字符串的导航参数。我通常使用 DataContractJsonSerializer 来序列化我需要传输的数据（但要注意 Uri 长度限制）。还要记住使用 Uri.EscapeDataString(parameter) 来转义查询字符串参数中的字符。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-03T04:55:14.523

我建议在两个视图模型之间使用服务代理。

首先，定义一个视图模型定位器。在 app.xaml 的资源字典中创建此类的实例。将每个页面的 DataContext 设置为视图模型定位器的属性。有关示例，请参见[John Papa 的博客。](http://www.johnpapa.net/simple-viewmodel-locator-for-mvvm-the-patients-have-left-the-asylum)

其次，使用 GetAllItems() 和 GetItem(string id) 等方法创建服务代理。在视图模型定位器中创建此服务代理的实例。将此引用传递给两个视图模型。

第三，通过将 DataContext 转换为视图模型类型，从第二个视图访问视图模型。将导航参数传递给视图模型，以便它可以调用 GetItem 并填充其属性。

# python - 使用 urllib2 解析包含 flash 的网页

> ID：13654383
> 
> 赞同：0
> 
> 时间：2012-11-30T22:57:26.147
> 
> 标签：python, parsing, web-scraping, urllib2

我正在尝试解析一些包含 Flash 播放器的网页并使用 urllib2 接收页面 HTML。

此网页使用 jwplayer，我需要从网页中获取的数据位于 Flash Object 标记中。看起来像这样：

```
<object width="100%" height="100%" type="application/x-shockwave-flash" data="https://salsalessons.tv/wp-content/themes/bstrap/js/jwplayer/player.swf" bgcolor="#000000" id="jwplayer-1" name="jwplayer-1" tabindex="0">
    <param name="allowfullscreen" value="true">
    <param name="allowscriptaccess" value="always">
    <param name="seamlesstabbing" value="true">
    <param name="wmode" value="opaque">
    <param name="flashvars" value="SomeValues">
</object> 
```

我需要的数据是这些参数标签之一的值。问题是 urllib2 下载页面，就好像它没有安装闪存一样，获取此代码而不是上面应该出现的地方：

```
<div id="jwplayer-1">
<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player</a> to watch this video.
</div> 
```

我该怎么做才能让 urllib2 像安装了 Flash Player 一样下载该页面？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:18:48.983

并不是没有安装 flash，而是 jwplayer javascript 没有运行并用播放器替换该 div。在您的浏览器中关闭 Javascript，您将获得相同的结果。

您需要模仿浏览器 - Selenium 是一种选择，尽管快速搜索 SO 会发现其他一些。

[用于 Javascript 的 Python Scraper？](https://stackoverflow.com/questions/2926338/python-scraper-for-javascript)

[使用 Python 抓取 javascript 生成的数据](https://stackoverflow.com/questions/10052465/scraping-javascript-generated-data-using-python)

# android - 'this' 、 'activityname.this' 和 getAplicationContext() 之间的区别

> ID：13654384
> 
> 赞同：4
> 
> 时间：2012-11-30T22:57:35.893
> 
> 标签：android, android-activity, android-context

我不知道它们之间的区别，我有时使用`this`，有时`activityame.this`，有时`getAplicationContext()`当android需要`context`通过时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T23:03:24.837

*   **this**指向当前对象。在这种情况下，一个`Activity`对象
*   **ActivityName.this**也指向当前的`Activity`Object，当你在使用动态内部类时使用它，例如实例化一个新的 onClickListener() {}。
*   **getApplicationContext()**获取`Context`整个应用程序的引用。`Activity`是一个 Context 子类，但某些事情可能在应用程序 Context 和 Activity 之间有所不同。不过，在大多数情况下，使用 Activity 作为上下文可以正常工作，我还没有编写任何需要 getApplicationContext() 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:05:36.727

**this** - 当你想引用你当前所在的对象时使用。例如，当你设置一个新类并且你想声明你的私有变量的初始值时，你可以这样做：

```
public class HelloWorld {
    private String messageToPrint;
    public HelloWorld(String message) {
        this.messageToPrint = message;
    }
} 
```

**getApplicationContext()** - 返回当前进程的单个全局应用程序对象的上下文。有些类不能调用它，而且我从未使用过它，如果我需要获取我所在的 Activity 的上下文，我将使用：

```
Context con = getContext(); 
```

我也永远不会使用 getApplicationContext(); 并将其转换为您的 Application 类，因为您不能保证它会匹配。

另一个我不太确定^^

# java - SoundPool 和 MediaPlayer 的并发性？

> ID：13654387
> 
> 赞同：1
> 
> 时间：2012-11-30T22:57:52.257
> 
> 标签：java, android, media-player, audio, soundpool

我不知道我的声音是否太安静，但现在我正在为 Android 编写一个节奏游戏，当你在 menuActivity 上打开它时（你可以按“播放”“选项”“关于”和“退出”），它会选择一首随机歌曲（如果有的话）并播放它，从一个文件（包含所有“tapObjects”）中获取 BPM 并将脉冲标志。

所以在这个 menuActivity 中，我有一个名为 mPlayer 的公共静态 MediaPlayer，它处理所有活动的所有背景音乐，如果需要更改歌曲，那么它将重置（），然后重新加载正常情况。

我的问题是，SoundPool 音效（我有大约 7 个，都小于 2 秒）是否在 MediaPlayer 的 BGM 之上叠加？

假设我在后台播放了一首名为 abc.mp3 的歌曲，播放时间为 60 秒，播放器获得“乘数”，并从 SoundPool 触发 SOUNDLEVELUP，它们会同时播放还是我需要不同的实现来实现工作？

问候，安妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:48:53.850

您的问题只是*我可以在 MediaPlayer 轨道上同时播放 SoundPool 声音吗？*

如果是这种情况，那么您可以，那么同时使用它们应该没有问题。

# c++ - 在 C++ 的构造函数中将字符串放入 *this

> ID：13654393
> 
> 赞同：-4
> 
> 时间：2012-11-30T22:58:26.543
> 
> 标签：c++, string, this

在类构造函数中，我正在创建一个字符串并希望将其存储到`*this`. 构造函数中的这段代码不起作用：

```
// Inside the class constructor
string str1 = "hello";
*this = str1; 
```

我应该使用其他数据类型来代替`string str1`吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:05:53.793

很高兴看到你的班级定义，但鉴于它不存在，让我做一个长镜头并尝试猜测问题所在。

当你声明一个类时，它最初是空的。您不能在构造函数中存储任何内容。

```
class Empty {
   Empty() { /* can't do much here */ }
} 
```

类由成员字段组成，这些字段可以为您存储数据。您可能想要做的是这样的事情：

```
class String {
    std::string member;
    String() {
        std::string str1 = "hello";
        member = str1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:01:03.547

`*this`它是您的类对象的实例。

你不能做`*this= str1;`，直到你的课不是`std::string`

# video - 使用 sitecatalysts 跟踪里程碑的最短视频长度

> ID：13654394
> 
> 赞同：0
> 
> 时间：2012-11-30T22:58:30.520
> 
> 标签：video, adobe-analytics

我们正在使用媒体插件跟踪视频，并将其配置为在开始时跟踪事件、25%、50%、75% 和 100%。这适用于我们较长的视频（2 分钟以上），但短视频（<30 秒）仅发送开始和 100%。找不到任何关于此的文档，PS 也没有帮助。有人遇到类似的问题吗？

编辑：设置以下参数

```
s.Media.autoTrack=false;
s.Media.trackWhilePlaying=true;
s.Media.trackVars="events,prop27,eVar23,eVar24,eVar25,eVar26";
s.Media.trackEvents="event21,event22,event23,event24,event25,event26,event27";
s.Media.trackMilestones="25,50,75";
s.Media.segmentByMilestones = true;
s.Media.trackUsingContextData = true; 
```

# javascript - 类切换 CSS 动画无法在 Chrome 中正确切换帧

> ID：13654395
> 
> 赞同：1
> 
> 时间：2012-11-30T22:58:35.483
> 
> 标签：javascript, google-chrome, web-applications, css-sprites, html-rendering

大约 3 年前，我在我的 iPod Touch 上使用 iFile 中的文本编辑器编写了 Flash 游戏 Chat Noir 的 HTML5/CSS3 重制版（对于短名称和混乱的代码，我深表歉意）。游戏可以在这里找到：

[http://geckojsc.com/misc/iChatNoir/](http://geckojsc.com/misc/iChatNoir/)

在过去的几个月里，我注意到动画（用 CSS 精灵制作）在 Chrome 中不再像预期的那样工作（在其他现代浏览器中也能正常工作）。

因为游戏是在六边形网格上进行的，所以 sprite 表中有三个方向：对角向下、对角向上和侧向（因此有 D、U 和 S 类的选择器）。DJ、UJ 和 SJ 类是相同的，但显示的是猫中跳。L 类表示猫指向左，R 类表示猫指向右（图像翻转）。

```
.D {background-position:0px 0px;}
.U {background-position:-50px 0px;}
.S {background-position:-98px 0px;}
.DJ {background-position:0px -50px;}
.UJ {background-position:-50px -50px;}
.SJ {background-position:-98px -50px;}
.L {
    -webkit-transform: scale(1,1);
    -moz-transform: scale(1,1);
    -o-transform: scale(1,1);
}
.R {
    -webkit-transform: scale(-1,1);
    -moz-transform: scale(-1,1);
    -o-transform: scale(-1,1);
} 
```

动画这些帧的 javascript 如下（cat 是一个 div 元素）：

```
if (catY%2) {
    if (catX<aim.x) catDir="R";
    else catDir="L";
} else {
    if (catX<=aim.x) catDir="R";
    else catDir="L";
}
if (aim.y>catY) catDir+=" D";
else if (aim.y<catY) catDir+=" U";
else catDir+= " S";

catX=aim.x; catY=aim.y;
updateCat();   // makes cat.className = catDir

// make the cat jump, then return to standing after 140 ms:
cat.className += "J";
setTimeout(function() {
    cat.className = cat.className.slice(0,-1);
},140); 
```

在 Chrome 中，猫会进入他的“跳跃”框架，但之后不会返回站立框架。我`cat.className`在程序运行时进行了检查，它*确实*在我所有的测试浏览器中都正确更改了，例如更改为`L DJ`，但是即使 className 为`L D`，猫仍会显示图形。`L DJ``L D`

这似乎是某种渲染问题。如果我更改页面缩放级别，或切换到另一个选项卡然后切换回来或执行任何其他重绘页面的操作，猫会显示正确的框架。希望有什么办法可以解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:32:05.253

我设法通过添加一个小的不可见边框并立即将其删除来解决问题，如下所示：

```
function forceRedraw(e) {
    e.style.border = 'solid 1px transparent';
    setTimeout(function() {
        e.style.border = 'solid 0px transparent';
    }, 0);
} 
```

（来自[Chrome/Mac 上的 Force DOM redraw/refresh](https://stackoverflow.com/questions/8840580/force-dom-redraw-refresh-on-chrome-mac)）

将显示样式设置为“无”，然后在 0 毫秒后将其恢复为“阻塞”也可以，但是它可能会导致元素轻微闪烁，这就是我选择此解决方案的原因。

# c - 我需要从我们不知道矩阵尺寸的文件中读取矩阵

> ID：13654397
> 
> 赞同：2
> 
> 时间：2012-11-30T22:58:45.153
> 
> 标签：c, matrix, malloc, fwrite, fread

我有一个这样的结构

```
struct Data {
    int ID;
double test_sample[2065][1];
int XX_row;
int XX_col
double **XX;                        //size=[2065][changing]
double **alpha_new;                 //size=[changing][1]
int alpha_new row;
int alpha_new_col;
double t3;
double kernel_par;

}person[20]; 
```

我已经使用以下命令将每个人（20 人）的这个结构写入 20 个文件`fwrite`：

```
fwrite(&person, sizeof( struct Data ), 1,Ptr ); 
```

现在我有 20 个二进制文件。每个文件都包含一个人的这些变量。现在一切都很好。

**问题：**我无法读取文件并将其分配给打击，因为在每个文件中，**XX 和 alpha_new Matrix 的维度是不同的**。（在文件 [2065][8] 中，其中一些 [2065][12]）

我需要使用`fread`（或不同）读取这些变量并输入到人脸识别程序......有没有办法在文件中单独读取变量，或者我也应该更改写入方法？

我不知道**如何在不使用结构的情况下将所有变量矩阵写入一个文件！**

我希望我能在这里解释我的问题，对不起我的英语不好，我等待你的帮助来完成我在 c 中的最终项目；*我正在使用视觉工作室 2012*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:48:30.093

对于如此复杂的结构，这是一项适度的重大任务。这是一个不太短的 SSCCE（[简短、独立、完整的示例](http://sscce.org/)）。真的有3个文件被撞成一个：

*   `stderr.h`— 错误报告函数的声明（前 10 行）
*   `serialize.c`— 序列化代码（中间不到 300 行）
*   `stderr.c`— 错误报告功能（底部 40 行）

我不打算解释错误报告功能。就格式化参数而言，它们的工作方式或多或少相似`printf()`，但它们写入标准错误，而不是标准输出，并且它们包括程序名称作为前缀，以及源自`errno`. 该`emalloc()`函数检查内存分配，如果分配失败则报告错误并退出。这种错误处理对于简单的程序来说已经足够了；如果存在内存问题、保存工作或其他任何事情，这对于需要恢复的复杂程序来说是不够的。

在真正的序列化代码中，有 4 组函数，加上`main()`编排。

1.  用于创建和初始化结构的分配和初始化函数。
2.  打印函数以转储结构。
3.  导出函数用于序列化数据以进行导出。
4.  用于反序列化导入数据的导入函数。

打印功能允许人们查看数据，您可以将输出保存到文件中，并将导出数据与导入数据进行比较，以确保它们相同。

如果您使用结构来描述所有二维数组，则代码会更简单，例如：

```
typedef struct Array_2D
{
    double **data;
    size_t   nrows;
    size_t   ncols;
} Array_2D; 
```

然后，您只需将其中 3 个嵌入到您的`struct Data`:

```
struct Data
{
    int       ID;
    double    t3;
    double    kernel_par;
    Array_2D  test_sample;
    Array_2D  XX;
    Array_2D  alpha_new;
}; 
```

我真的不清楚`double test_sample[2065][1];`与`double test_sample[2065];`. 我会观察到它会使代码比其他情况更复杂。我最终将它视为一个普通的一维数组，`double`作为`&data->test_sample[0][0]`起点。

进行序列化的方法不止一种。我选择了一个二维数组，由 N 个一维数组表示，每个一维数组都以`size_t`描述一维数组大小的前缀为前缀。这在文件中提供了一些冗余，这意味着有更好的错误检测。简单地输出二维数组的两个维度，后跟*行 x cols*值是可行的。事实上，在某个时刻，我有导入代码假设当导出代码使用另一种技术时 - 当数字被误解并且我得到调试输出和错误时，这并没有带来愉快的运行时间：

```
test_sample: 2.470328e-323, 1.000000e+00, 2.000000e+00, 3.000000e+00, 4.000000e+00
2D array size 4617315517961601024 x 5 = 4639833516098453504
serialize(46983) malloc: *** mmap(size=45035996273704960) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
./serialize: Out of memory (12: Cannot allocate memory) 
```

那是很多内存...... 2.470328e-323 也是麻烦的征兆。（所以不，我第一次运行代码时并没有完全正确。）

我用 SAMPLE_SIZE 在 5 和 NUM_PERSON 在 3 进行了大部分测试。

### `serialize.c`

```
/* stderr.h */
#ifndef STDERR_H_INCLUDED
#define STDERR_H_INCLUDED

static void err_setarg0(char const *argv0);
static void err_sysexit(char const *fmt, ...);
static void err_syswarn(char const *fmt, ...);

#endif /* STDERR_H_INCLUDED */

#include <stdio.h>
#include <stdlib.h>

enum { SAMPLE_SIZE = 20 }; /* 2065 in original */
enum { NUM_PERSON  = 10 }; /*   20 in original */

struct Data
{
    int ID;
    double test_sample[SAMPLE_SIZE][1]; //Why?
    size_t XX_row;
    size_t XX_col;
    double **XX;                        //size=[SAMPLE_SIZE][changing]
    double **alpha_new;                 //size=[changing][1]
    size_t alpha_new_row;
    size_t alpha_new_col;
    double t3;
    double kernel_par;
} person[NUM_PERSON];

typedef struct Data Data;

static void *emalloc(size_t nbytes)
{
    void *space = malloc(nbytes);
    if (space == 0)
        err_sysexit("Out of memory");
    return space;
}

static void free_data(Data *data)
{
    for (size_t i = 0; i < data->XX_row; i++)
        free(data->XX[i]);
    free(data->XX);

    for (size_t i = 0; i < data->alpha_new_row; i++)
        free(data->alpha_new[i]);
    free(data->alpha_new);

    data->ID = 0;
    data->t3 = 0.0;
    data->kernel_par = 0.0;
    data->XX = 0;
    data->XX_row = 0;
    data->XX_col = 0;
    data->alpha_new = 0;
    data->alpha_new_row = 0;
    data->alpha_new_col = 0;
}

static void free_array(Data *data, size_t nentries)
{
    for (size_t i = 0; i < nentries; i++)
        free_data(&data[i]);
}

static double **alloc_2D_double(size_t rows, size_t cols)
{
    double **data = emalloc(rows * sizeof(*data));
    for (size_t i = 0; i < rows; i++)
    {
        data[i] = emalloc(cols * sizeof(*data[i]));
    }
    return data;
}

static void populate_data(Data *data, size_t entry_num)
{
    /* entry_num serves as 'changing' size */
    data->ID = entry_num;
    data->t3 = entry_num * SAMPLE_SIZE;
    data->kernel_par = (1.0 * SAMPLE_SIZE) / entry_num;

    for (size_t i = 0; i < SAMPLE_SIZE; i++)
        data->test_sample[i][0] = i + entry_num;

    data->XX_row = SAMPLE_SIZE;
    data->XX_col = entry_num;
    data->XX = alloc_2D_double(data->XX_row, data->XX_col);

    for (size_t i = 0; i < data->XX_row; i++)
    {
        for (size_t j = 0; j < data->XX_col; j++)
            data->XX[i][j] = i * data->XX_col + j;
    }

    data->alpha_new_row = entry_num;
    data->alpha_new_col = 1;
    data->alpha_new = alloc_2D_double(data->alpha_new_row, data->alpha_new_col);

    for (size_t i = 0; i < data->alpha_new_row; i++)
    {
        for (size_t j = 0; j < data->alpha_new_col; j++)
            data->alpha_new[i][j] = i * data->alpha_new_col + j;
    }
}

static void populate_array(Data *data, size_t nentries)
{
    for (size_t i = 0; i < nentries; i++)
        populate_data(&data[i], i+1);
}

static void print_1D_double(FILE *fp, char const *tag, double const *values, size_t nvalues)
{
    char const *pad = "";
    fprintf(fp, "%s: ", tag);
    for (size_t i = 0; i < nvalues; i++)
    {
        fprintf(fp, "%s%e", pad, values[i]);
        pad = ", ";
    }
    putc('\n', fp);
}

static void print_2D_double(FILE *fp, char const *tag, double **values, size_t nrows, size_t ncols)
{
    fprintf(fp, "2D array %s[%zd][%zd]\n", tag, nrows, ncols);
    for (size_t i = 0; i < nrows; i++)
    {
        char buffer[32];
        snprintf(buffer, sizeof(buffer), "%s[%zd]", tag, i);
        print_1D_double(fp, buffer, values[i], ncols);
    }
}

static void print_data(FILE *fp, char const *tag, const Data *data)
{
    fprintf(fp, "Data: %s\n", tag);
    fprintf(fp, "ID = %d; t3 = %e; kernel_par = %e\n", data->ID, data->t3, data->kernel_par);
    print_1D_double(fp, "test_sample", &data->test_sample[0][0], sizeof(data->test_sample)/sizeof(data->test_sample[0][0]));
    print_2D_double(fp, "XX", data->XX, data->XX_row, data->XX_col);
    print_2D_double(fp, "Alpha New", data->alpha_new, data->alpha_new_row, data->alpha_new_col);
}

static void print_array(FILE *fp, char const *tag, const Data *data, size_t nentries)
{
    fprintf(fp, "Array: %s\n", tag);
    fprintf(fp, "Size: %zd\n", nentries);
    for (size_t i = 0; i < nentries; i++)
    {
        char buffer[32];
        snprintf(buffer, sizeof(buffer), "Row %zd", i);
        print_data(fp, buffer, &data[i]);
    }
    fprintf(fp, "End Array: %s\n\n", tag);
}

static void set_file_name(char *buffer, size_t buflen, size_t i)
{
    snprintf(buffer, buflen, "exp_data.%.3zd.exp", i);
}

static void export_1D_double(FILE *fp, double *data, size_t ncols)
{
    if (fwrite(&ncols, sizeof(ncols), 1, fp) != 1)
        err_sysexit("Failed to write number of columns");
    if (fwrite(data, sizeof(double), ncols, fp) != ncols)
        err_sysexit("Failed to write array of %zd doubles", ncols);
}

static void export_2D_double(FILE *fp, double **data, size_t nrows, size_t ncols)
{
    if (fwrite(&nrows, sizeof(nrows), 1, fp) != 1)
        err_sysexit("Failed to write number of rows");
    if (fwrite(&ncols, sizeof(ncols), 1, fp) != 1)
        err_sysexit("Failed to write number of columns");
    for (size_t i = 0; i < nrows; i++)
        export_1D_double(fp, data[i], ncols);
}

static void export_int(FILE *fp, int value)
{
    if (fwrite(&value, sizeof(value), 1, fp) != 1)
        err_sysexit("Failed to write int to file");
}

static void export_double(FILE *fp, double value)
{
    if (fwrite(&value, sizeof(value), 1, fp) != 1)
        err_sysexit("Failed to write double to file");
}

static void export_data(FILE *fp, Data *data)
{
    export_int(fp, data->ID);
    export_double(fp, data->t3);
    export_double(fp, data->kernel_par);
    export_1D_double(fp, &data->test_sample[0][0], sizeof(data->test_sample)/sizeof(data->test_sample[0]));
    export_2D_double(fp, data->XX, data->XX_row, data->XX_col);
    export_2D_double(fp, data->alpha_new, data->alpha_new_row, data->alpha_new_col);
}

static void export_array(Data *data, size_t nentries)
{
    for (size_t i = 0; i < nentries; i++)
    {
        char filename[30];
        set_file_name(filename, sizeof(filename), i);
        FILE *fp = fopen(filename, "w");
        if (fp == 0)
            err_sysexit("Failed to open file %s for writing", filename);
        printf("Export %zd to %s\n", i, filename);
        export_data(fp, &data[i]);
        fclose(fp);
    }
}

static int import_int(FILE *fp)
{
    int value;
    if (fread(&value, sizeof(value), 1, fp) != 1)
        err_sysexit("Failed to read int");
    return value;
}

static double import_double(FILE *fp)
{
    double value;
    if (fread(&value, sizeof(value), 1, fp) != 1)
        err_sysexit("Failed to read int");
    return value;
}

static size_t import_size_t(FILE *fp)
{
    size_t value;
    if (fread(&value, sizeof(value), 1, fp) != 1)
        err_sysexit("Failed to read size_t");
    return value;
}

static void import_1D_double(FILE *fp, double *data, size_t nvalues)
{
    size_t size = import_size_t(fp);
    if (size != nvalues)
        err_sysexit("Size mismatch (wanted %zd, actual %zd)\n", nvalues, size);
    if (fread(data, sizeof(data[0]), nvalues, fp) != nvalues)
        err_sysexit("Failed to read %zd doubles");
}

static void import_2D_double(FILE *fp, double ***data, size_t *nrows, size_t *ncols)
{
    *nrows = import_size_t(fp);
    *ncols = import_size_t(fp);
    *data  = alloc_2D_double(*nrows, *ncols);
    for (size_t i = 0; i < *nrows; i++)
        import_1D_double(fp, (*data)[i], *ncols);
}

static void import_data(FILE *fp, Data *data)
{
    data->ID = import_int(fp);
    data->t3 = import_double(fp);
    data->kernel_par = import_double(fp);

    import_1D_double(fp, &data->test_sample[0][0], sizeof(data->test_sample)/sizeof(data->test_sample[0][0]));
    import_2D_double(fp, &data->XX, &data->XX_row, &data->XX_col);
    import_2D_double(fp, &data->alpha_new, &data->alpha_new_row, &data->alpha_new_col);
}

static void import_array(Data *data, size_t nentries)
{
    for (size_t i = 0; i < nentries; i++)
    {
        char filename[30];
        set_file_name(filename, sizeof(filename), i);
        FILE *fp = fopen(filename, "r");
        if (fp == 0)
            err_sysexit("Failed to open file %s for reading", filename);
        printf("Import %zd from %s\n", i, filename);
        import_data(fp, &data[i]);
        fclose(fp);
    }
}

int main(int argc, char **argv)
{
    err_setarg0(argv[0]);
    if (argc != 1)
        err_syswarn("Ignoring %d irrelevant arguments", argc-1);
    populate_array(person, NUM_PERSON);
    print_array(stdout, "Freshly populated", person, NUM_PERSON);
    export_array(person, NUM_PERSON);
    printf("\n\nEXPORT COMPLETE\n\n");
    free_array(person, NUM_PERSON);
    import_array(person, NUM_PERSON);
    printf("\n\nIMPORT COMPLETE\n\n");
    print_array(stdout, "Freshly imported", person, NUM_PERSON);
    free_array(person, NUM_PERSON);
    return(0);
}

/* stderr.c */
/*#include "stderr.h"*/
#include <stdio.h>
#include <stdarg.h>
#include <errno.h>
#include <string.h>
#include <stdlib.h>

static char const *arg0 = "<undefined>";

static void err_setarg0(char const *argv0)
{
    arg0 = argv0;
}

static void err_vsyswarn(char const *fmt, va_list args)
{
    int errnum = errno;
    fprintf(stderr, "%s: ", arg0);
    vfprintf(stderr, fmt, args);
    if (errnum != 0)
        fprintf(stderr, " (%d: %s)", errnum, strerror(errnum));
    putc('\n', stderr);
}

static void err_syswarn(char const *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    err_vsyswarn(fmt, args);
    va_end(args);
}

static void err_sysexit(char const *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    err_vsyswarn(fmt, args);
    va_end(args);
    exit(1);
} 
```

当在 下运行时`valgrind`，它得到了一份干净的健康清单，没有内存泄漏。在我也可以安全地说出之前，我花了不止一次的时间（`valgrind`出现了一个通过目测结果没有发现的错误，尽管一旦检测到它就很明显了）。

* * *

### 回答评论中的问题

> 无论如何，这是在执行代码时发生的几个问题。
> 
> 第一个是`'snprintf': identifier not found`
> 
> 第二个是在它的行中，`"double **data = emalloc(rows * sizeof(*data));"`它说不能从`'void *'`to转换`'double **'`，这是有道理的，因为它`data`是 double 并且`emalloc`正在返回`void *`；在开始将其嵌入到我的原始程序之前，我该如何解决这些问题？

1.  不要使用 C++ 编译器来编译 C 代码
2.  更新到带有 C99 编译器的系统。

或者，因为您可能在 Windows 上并使用 MSVC：

1.  使用演员表`double **data = (double **)emalloc(rows * sizeof(*data));`
2.  在 MSDN 中查找`_snprintf()`等等。`snprintf_s()`当我需要知道 MSVC 的功能时，我会通过 Google 使用“site:microsoft.com snprintf”（用于“snprintf”的各种拼写）找到它。

在紧急情况下，使用`sprintf()`; 缓冲区的大小足够大，不应该有任何溢出的风险，这是`snprintf()`et al 所保护的。

* * *

> 顺便说一句，在我的程序中有一个名为`cernel_matrix(double **M1 ,double **M2)`的函数，一个采用两个二维矩阵的函数。我正在传递测试样本和`xx`这个函数，有时`xx`and `xx`，有时`test_sample`and `test_sample`，它取决于所以我不能制作`test_sample`一维；这只是函数的工作方式。否则我会得到这个错误：`cannot convert from 'double*' to 'double **'`。我希望我解释了为什么测试样本不能是一维的。

1.  该`cernel_matrix()`函数没有被告知矩阵有多大，所以我不知道它如何可靠地工作。
2.  我不相信传递`test_sample`给`cernel_matrix`是安全的；`double matrix[][1]`值不会转换为`double **`. 所以我不相信我理解为什么这样`test_sample`的矩阵。

我为此整理了一个微型测试用例：

```
extern void cernel_matrix(double **M1, double **M2);

extern void m(void);

void m(void)
{
    double **m0;
    double *m1[13];
    double m2[234][1];

    cernel_matrix(m0, m1);
    cernel_matrix(m1, m2);
} 
```

编译器告诉我：

```
x.c: In function ‘m’:
x.c:12:5: warning: passing argument 2 of ‘cernel_matrix’ from incompatible pointer type [enabled by default]
x.c:1:13: note: expected ‘double **’ but argument is of type ‘double (*)[1]’
x.c:11:18: warning: ‘m0’ is used uninitialized in this function [-Wuninitialized] 
```

'uninitialize' 警告是完全有效的，但问题是另一个警告及其注释。你应该从你的编译器中得到类似的东西。

* * *

> 我想我理解它的想法和功能，但是代码中仍然有很多我不理解的东西。我应该能够表达所有的台词，因为我要向老师们介绍。

当别人因为你没有展示任何东西而向你提供代码时，你冒着不理解他们做什么的风险。

由于您需要了解代码才能将其呈现给老师，因此您可能需要进行一些编程练习。请注意，我做的第一件事是将问题缩小到玩具大小（而不是 2065，我使用了 5 或 10 或 20）。你也应该这样做。从只包含固定大小元素的结构开始—— `id`、`t3`和。制作它以便您可以初始化和导出和导入它。您可以导入与导出变量不同的变量，然后比较这两个变量。您甚至可以在第一个版本中省略。`kernel_par``test_sample``test_sample`

完成该工作后，请添加一个数组及其维度成员。现在开始工作（尺寸为 4x5 或类似）。然后添加另一个数组（它应该是微不足道的）。当你这样做时，你应该看到我给出的示例中的各种函数做了什么，以及它们为什么在那里。在某种程度上，它们都是“必要的”。正如我在评论中提到的那样，我花了好几次（太多）尝试才把它做好。我正在使用严格的警告选项进行编译，但仍然`valgrind`对未初始化的数据感到困惑（正如我即将发布的那样）。但我最终发现了一段编辑不完整的复制粘贴代码。

请注意，如果您发布的代码在尝试导出数据方面做得很好，最好是在尝试导入数据方面做得很好，那么该代码可能已被修复。由于您没有发布任何有价值的代码，因此很难在不产生可测试的东西的情况下生成解决您真正问题的代码。我提供的代码是可测试的。测试可能会更全面——是的，毫无疑问。但是使代码可测试并对其进行测试是学习编程的重要部分。

顺便说一句，对于任何类型（如数组）的可变长度数据，导出过程中的关键点是确保在写入数据（数组）本身之前写入数据（数组）的大小。然后导入过程知道在读回数据（数组）之前要分配多少空间。

# java - 在 Java 中创建更高级的元素：Swing 或图像

> ID：13654398
> 
> 赞同：3
> 
> 时间：2012-11-30T22:58:49.757
> 
> 标签：java, swing, user-interface

使用 Swing 在 Java 中创建 GUI 时，应该如何创建更高级的“元素”？例如，考虑： ![在此处输入图像描述](../Images/906e5d0d5c5942795103494c0eb5807e.png)

这可以根据当前页面或状态使用**大约 10 个图像来完成。**我也确信可以以编程方式执行此操作，但是，考虑到我过去使用 Swing 的经验，我也确信**对于一些相对简单的**. 特别是考虑到这可以在 CSS 中使用最多约 40 行代码来完成。

在这种情况下，**是否有任何替代方法来创建这个“元素”？**如果不; 什么是首选：图像或 Swing？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T01:29:41.833

1.  您可以使用合适的 Unicode 字形，例如[✓—<code>CHECK MARK](http://www.fileformat.info/info/unicode/char/2713/index.htm)或任何数字，

    *   作为标签的文本，显示[在此处](https://sites.google.com/site/drjohnbmatthews/buttons)。

    *   作为一个，[这里](https://stackoverflow.com/a/13073196/230513)`GlyphVector`提到。

    *   作为渲染图像，如图[所示](https://stackoverflow.com/a/4151403/230513)。

2.  `Icon`您可以通过实现接口来获得一个有色、抗锯齿的圆圈；[`ColorIcon`](https://stackoverflow.com/a/3072979/230513)是一个例子。

3.  [您可以使用在这里](https://stackoverflow.com/a/7824225/230513)`BasciStroke`看到的各种实线和虚线。

4.  在库存[布局经理](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)中，`FlowLayout`可能就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T23:15:58.187

这将归结为要求。

如果您希望它具有可扩展性，那么 Swing 图形是您的最佳选择。如果没有，图像应该没问题。如果您希望它可重复使用（对于*n 个*可能的连接），那么 Swing 图形是更好的选择。如果您的连接数量有限且永远不会更改，则图像会很好。

您还需要考虑更改外观和感觉的难易程度。创建图像需要时间，但渲染器提供了更大的灵活性。

对我来说，我通常会使用两者的组合。渲染文本相对简单，但是像复选标记这样的东西会花费更多时间来创建。

您还必须考虑是否要生成单个图像并对其进行渲染，它为每个部分使用单独的组件。

我也会考虑导航之类的事情。您是否需要它，如果需要，是否更容易使用组件`MouseListeners`或将视图转换为模型以确定正在发生的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T23:09:28.950

如果您真的必须使用 Java（如您所说，使用 CSS 实现类似的东西要容易得多），我认为使用图像会更好。

可以实现生成图形元素的代码，但除了更难实现之外，它还不可维护：对设计进行任意简单的更改都可能需要很长时间才能实现。

与此相反，图像可以轻松替换，有时甚至无需重新编译应用程序（如果它们保持相同的大小、格式等）。

在性能方面，使用 swing 或其他库可以让您的应用程序大小增加几千字节，而使用图像可能会使您的应用程序在资源有限（移动应用程序、旧计算机）的情况下更具响应性

# c# - RSACryptoServiceProvider 用自己的公钥和私钥初始化

> ID：13654400
> 
> 赞同：13
> 
> 时间：2012-11-30T22:59:06.293
> 
> 标签：c#, cryptography, rsacryptoserviceprovider

我正在尝试使用我自己的公钥和私钥初始化 RSACryptoServiceProvider。

据我所知，这样做的方法是调用构造函数

```
RSACryptoServiceProvider RSAalg = new RSACryptoServiceProvider(cspParams); 
```

cspParams 如上图所示。但是，当我查看有关使用它的 msdn 示例时：http: [//msdn.microsoft.com/en-us/library/ca5htw4f.aspx](http://msdn.microsoft.com/en-us/library/ca5htw4f.aspx)

我没有看到他们设置私钥或公钥的任何地方。仅使用 KeyContainer。当我创建一个没有 cspParam 的 RSACryptoServiceProvider 时，它默认设置为仅使用公钥。当我检查类本身的 PublicOnly 变量时，我注意到了这一点，它是一个只读变量。

**我的问题是如何初始化这个类，然后设置我自己的私钥和公钥。服务器将使用私钥，客户端将拥有公钥。**

我发现创建一个 RSAParameter 对象并将其上的 .Exponent 和 .Modulus 参数分别设置为公共和私有变量。

但是我收到**“缺少私钥”**错误，因为我相信 RSACryptoServiceProvider 没有使用正确的构造函数进行初始化。

下面是我的一些代码。不用担心 BigInteger 类，这只是一个实验。无论我是否使用它，我都会得到同样的错误。

```
//Create a UnicodeEncoder to convert between byte array and string.
UnicodeEncoding ByteConverter = new UnicodeEncoding();

byte[] dataToEncrypt = ByteConverter.GetBytes(password);
byte[] encryptedData;
byte[] decryptedData;

//RSACryptoServiceProvider RSA = new RSACryptoServiceProvider();
RSAParameters rsap = new RSAParameters();

BigInteger n = new BigInteger("19579160939939334264971282204525611731944172893619019759209712156289528980860378672033164235760825723282900348193871051950190013953658941960463089031452404364269503721476236241284015792700835264262839734314564696723261501877759107784604657504350348081273959965406686529089170062268136253938904906635532824296510859016002105655690559115059267476786307037941751235763572931501055146976797606538425089134251611194500570922973015579287289778637105402129208324300035518642730384616767241853993887666288072512402523498267733725021939287517009966986976768028023180137546958580922532786773172365428677544232641888174470601681", 10);

BigInteger e = new BigInteger("65537", 10);

//rsap.Modulus = ByteConverter.GetBytes(publicKey);
rsap.Exponent = e.getBytes();
rsap.Modulus = n.getBytes();
  /*rsap.Exponent = ByteConverter.GetBytes(publicKey);
    rsap.D = ByteConverter.GetBytes(publicKey);
    rsap.DP = ByteConverter.GetBytes(publicKey);
    rsap.DQ = ByteConverter.GetBytes(publicKey);
    rsap.P = ByteConverter.GetBytes(publicKey);
    rsap.Q = ByteConverter.GetBytes(publicKey);
    rsap.InverseQ = ByteConverter.GetBytes(publicKey);*/

using (RSACryptoServiceProvider RSA = new RSACryptoServiceProvider())
{
    //RSA.PublicOnly = false;

    RSA.ImportParameters(rsap);

    Debug.Log ("PublicOnly: " + RSA.PublicOnly);

    Debug.Log (rsap.Modulus.Length);
    //Debug.Log (RSA.ToString());
        //Pass the data to ENCRYPT, the public key information  
        //(using RSACryptoServiceProvider.ExportParameters(false), 
        //and a boolean flag specifying no OAEP padding.
        //encryptedData = RSACSPSample.RSAEncrypt(dataToEncrypt, rsap, false);
        encryptedData = RSACSPSample.RSAEncrypt(dataToEncrypt, RSA.ExportParameters(false), false);

        Debug.Log ("encryptedData: " + encryptedData);
        //Display the decrypted plaintext to the console. 
        //Debug.Log("Decrypted plaintext: " + ByteConverter.GetString(""));

        //Pass the data to DECRYPT, the private key information  
        //(using RSACryptoServiceProvider.ExportParameters(true), 
        //and a boolean flag specifying no OAEP padding.
        decryptedData = RSACSPSample.RSADecrypt(encryptedData, RSA.ExportParameters(true), false);
}

//encryptedData = RSACSPSample.RSAEncrypt(dataToEncrypt, rsap, false);

//if (encryptedData != null) {
    password = ByteConverter.GetString(decryptedData);
//} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-30T23:07:56.950

这些字段的名字很可怕，这让你感到困惑。该`Exponent`字段实际上是公钥的*公共*指数。*私钥*的私钥是[`D`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsaparameters.d.aspx)字段。

MSDN 文档很烂不是你的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T12:10:59.623

您必须转换基数 64：

```
byte[] modulusBytes = Convert.FromBase64String(modulus);
byte[] exponentBytes = Convert.FromBase64String(exponent); 
```

# opengl - 为什么用模型视图矩阵的逆转置来转换法线？

> ID：13654401
> 
> 赞同：55
> 
> 时间：2012-11-30T22:59:08.893
> 
> 标签：opengl, glsl, game-engine, game-physics

我正在研究一些着色器，我需要转换法线。

我在一些教程中阅读了转换法线的方式是*将它们与模型视图矩阵的倒数的转置相乘*。但我找不到解释为什么会这样，这背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-30T23:29:50.557

It flows from the definition of a normal.

Suppose you have the normal, `N`, and a vector, `V`, a tangent vector at the same position on the object as the normal. Then by definition `N·V = 0`.

Tangent vectors run in the same direction as the surface of an object. So if your surface is planar then the tangent is the difference between two identifiable points on the object. So if `V = Q - R` where `Q` and `R` are points on the surface then if you transform the object by `B`:

```
V' = BQ - BR
   = B(Q - R)
   = BV 
```

The same logic applies for non-planar surfaces by considering limits.

In this case suppose you intend to transform the model by the matrix `B`. So `B` will be applied to the geometry. Then to figure out what to do to the normals you need to solve for the matrix, `A` so that:

```
(AN)·(BV) = 0 
```

Turning that into a row versus column thing to eliminate the explicit dot product:

```
[tranpose(AN)](BV) = 0 
```

Pull the transpose outside, eliminate the brackets:

```
transpose(N)*transpose(A)*B*V = 0 
```

So that's "the transpose of the normal" [product with] "the transpose of the known transformation matrix" [product with] "the transformation we're solving for" [product with] "the vector on the surface of the model" = 0

But we started by stating that `transpose(N)*V = 0`, since that's the same as saying that `N·V = 0`. So to satisfy our constraints we need the middle part of the expression — `transpose(A)*B` — to go away.

Hence we can conclude that:

```
 transpose(A)*B = identity
 => transpose(A) = identity*inverse(B)
 => transpose(A) = inverse(B)
 => A = transpose(inverse(B)) 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-10-21T01:40:43.523

我最喜欢的证明如下，其中 N 是法线，V 是切向量。由于它们是垂直的，它们的点积为零。M 是任何 3x3 可逆变换 (M ^(-1) * M = I)。N' 和 V' 是经过 M 变换的向量。

![在此处输入图像描述](../Images/2ae05b4921d5eeeae1954c3f6ae6afc7.png)

为了获得一些直觉，请考虑下面的剪切变换。

![在此处输入图像描述](../Images/3cb21f310c3dde155dd45829ee02b2d5.png)

请注意，这*不适*用于切向量。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-11-30T23:29:15.870

Take a look at this tutorial:

[https://paroj.github.io/gltut/Illumination/Tut09%20Normal%20Transformation.html](https://paroj.github.io/gltut/Illumination/Tut09%20Normal%20Transformation.html)

You can imagine that when the surface of a sphere stretches (so the sphere is scaled along one axis or something similar) the normals of that surface will all 'bend' towards each other. It turns out you need to invert the scale applied to the normals to achieve this. This is the same as transforming with the **Inverse Transpose Matrix**. The link above shows how to derive the inverse transpose matrix from this.

Also note that when the scale is uniform, you can simply pass the original matrix as normal matrix. Imagine the same sphere being scaled uniformly along all axes, the surface will not stretch or bend, nor will the normals.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-01T23:57:48.107

如果模型矩阵由平移、旋转和缩放组成，则不需要进行逆转置来计算法线矩阵。只需将法线除以平方比例并乘以模型矩阵，我们就完成了。您可以将其扩展到具有垂直轴的任何矩阵，只需计算您正在使用的矩阵的每个轴的平方比例。

我在我的博客中写了详细信息：[https ://lxjk.github.io/2017/10/01/Stop-Using-Normal-Matrix.html](https://lxjk.github.io/2017/10/01/Stop-Using-Normal-Matrix.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-03-14T23:59:47.663

不明白为什么在与模型矩阵相乘之前不将方向向量的第 4 个元素归零。不需要反转或转置。将方向向量视为两点之间的差。将这两个点与模型的其余部分一起移动 - 它们与模型的相对位置仍然相同。取两点之差得到新方向，第四个元素抵消为零。便宜很多。

# c++ - C++ ios::out 文件流标志：为什么会影响性能？

> ID：13654405
> 
> 赞同：2
> 
> 时间：2012-11-30T22:59:26.193
> 
> 标签：c++, ios, filestream, out

我的程序正在将大量（一次 250,000 个）uint16_t 写入文件。出于某种原因，设置 ios::out 标志（不必要，因为 VS2010 会自动设置它）会导致性能下降大约 10 倍。（见之前/之后）。知道设置可能导致如此巨大的性能差异的标志是什么吗？

前：

```
fileoutput.flags(ios::out); 
```

![前](../Images/bf2db4482fcadd55fca66b1c42d5e8ad.png)

后：

```
//fileoutput.flags(ios::out); 
```

![后](../Images/1ff36bb68010affa4a7e2c4fcd336a3b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T23:53:40.147

`flags`应该用来设置流的格式标志，例如输出是左对齐还是右对齐，或者布尔值应该打印为数字或字符串，所以你不能用它来设置流的打开模式，实际调用`fileoutput.flags(std::ios::out)`是一个调用有一个无效的论点。错误的可能原因是您的实现值`std::ios::out`等于`std::ios::unitbuf`导致每次插入的缓冲区刷新，这肯定会导致巨大的性能损失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T23:10:17.813

flags 函数不设置一个标志。它一次更改所有标志。要修改一个标志，您应该使用 setf/unsetf。

# scala - 在 Scala 中打印下 X 行

> ID：13654406
> 
> 赞同：2
> 
> 时间：2012-11-30T22:59:27.533
> 
> 标签：scala

尝试使用 Programming in Scala 这本书来学习 Scala，他们有一个非常基本的示例来从文件中读取行。我正在尝试对其进行扩展并逐行读取文件，查找某个短语，然后在找到该行后打印该行之后的接下来的 6 行。我可以用 java 或 Perl 之类的语言轻松编写脚本，但我不知道如何在 Scala 中编写脚本（可能是因为我还不太熟悉该语言......）

这是《Scala 编程》一书中的半改编示例代码，

```
import scala.io.Source

if(args.length>0) {
    val lines = Source.fromFile(args(0)).getLines().toList
        for(line<-lines) {
            if(line.contains("secretPhrase")) {
                println(line)
                        //How to get the next lines here?   
            }
        }
}
else
Console.err.println("Pleaseenterfilename") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T23:40:08.287

你可以像在java中那样做

```
if(args.length > 0) {
  val lines = Source.fromFile(args(0)).getLines.toList
  for(i <- 0 until lines.size) {
    if(lines(i).contains("secretPhrase")) {
      for(j <- i+1 to i+6) println(lines(j))
    }
  }
} 
```

或者你使用 scala 成语让它更短

```
if(args.length > 0) {
  val lines = Source.fromFile(args(0)).getLines
  lines.dropWhile(!_.contains("secretPhrase"))
       .drop(1).take(6).foreach(println)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:02:00.697

视图是使迭代列表在 Scala 中高效的秘诀。尝试这个：

```
val l = Source.fromFile(args(0)).getLines().toList

l.view.zipWithIndex.filter(_._1.contains("secretPhrase")).foreach { 
  case (s, i) => l.view(i+1, i+7).foreach(println(_))
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T23:36:07.453

您可以将 for 表达式替换为以下内容：

```
lines.sliding(7).filter(l => l(0).contains("secretPhrase")).foreach(println) 
```

请注意，如果它在最后 6 行中，由于滑动的工作方式，这将错过秘密短语（它在第一次遇到列表末尾时停止）。

您可以通过多种方式解决此问题，最简单的可能是在处理之前将六个虚拟行附加到列表中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T22:17:33.413

`for`在集合上使用仅引用该*元素*，这就是为什么您不能引用以下行的原因。如果您需要引用集合本身，有几种方法：

**1）使用内置方法**。合适的是`tails`. 例如，如果我们的集合是`List("a","b","c")`，

```
scala> List("a","b","c").tails foreach println
List(a, b, c)
List(b, c)
List(c)
List() 
```

这几乎是我们需要的，除了我们不想`List()`在最后检查空，所以我们可以 a) 检查列表是否为空：

```
lines.tails foreach { xs => 
  if (!xs.isEmpty && (xs.head contains "secretPhrase")) 
    xs take 6 foreach println
} 
```

或 b) 用于`init`获取除最后一个以外的所有元素：

```
lines.tails.toList.init foreach { xs => 
  if (xs.head contains "secretPhrase") 
    xs take 6 foreach println
} 
```

**2）while循环/递归**。

a）while循环：

```
var xs = lines
while (!xs.isEmpty) {
  if (xs.head contains "secretPhrase") 
    xs take 6 foreach println
  xs = xs.tail
} 
```

b) 等价递归

```
def print6(xs: List[String]): Unit = if (!xs.isEmpty) {
  if (xs.head contains "secretPhrase")
    xs take 6 foreach println
  print6(xs.tail)
}

print6(lines) 
```

# osx-mountain-lion - gfortran - 文件是为存档而构建的，它不是被链接的架构（x86_64）

> ID：13654407
> 
> 赞同：2
> 
> 时间：2012-11-30T22:59:27.497
> 
> 标签：osx-mountain-lion, ld, gfortran

对于我提出的任何类似问题，我都找不到有效的答案，所以我再次询问。

我的电脑是 Mac OSX 10.8 Mountain Lion。我正在尝试使用 gfortran 构建一个 Fortran 程序，但我遇到了这样的错误：

```
gfortran-mp-4.7 -O2 -c constants.f90
gfortran-mp-4.7 -O2 -c utils.F90
...(more source files)
ar -r libcamb.a constants.o utils.o ...(more source files)
/opt/local/bin/ranlib: file: libcamb.a(constants.o) has no symbols
gfortran-mp-4.7 -DMATRIX_SINGLE -O2 -I../camb -I../multinest -DDR71RG -DNOWMAP -c utils.F90
gfortran-mp-4.7 -DMATRIX_SINGLE -O2 -I../camb -I../multinest -DDR71RG -DNOWMAP -c ParamNames.f90
gfortran-mp-4.7 -DMATRIX_SINGLE -O2 -I../camb -I../multinest -DDR71RG -DNOWMAP -c Matrix_utils.F90
gfortran-mp-4.7 -DMATRIX_SINGLE -O2 -I../camb -I../multinest -DDR71RG -DNOWMAP -c settings.f90
gfortran-mp-4.7 -DMATRIX_SINGLE -O2 -I../camb -I../multinest -DDR71RG -DNOWMAP -c GetDist.f90
gfortran-mp-4.7 -o ../getdist utils.o ParamNames.o Matrix_utils.o settings.o GetDist.o -L../camb -lcamb -llapack -latlas -Wl,-framework -Wl,accelerate -L/opt/local/lib -lgsl -lgslcblas -DMATRIX_SINGLE -O2 -I../camb -I ../multinest -DDR71RG -DNOWMAP 
ld: warning: ignoring file ../camb/libcamb.a, file was built for archive which is not the architecture being linked (x86_64): ../camb/libcamb.a
Undefined symbols for architecture x86_64:
<<long list of undefined functions that are defined in the library that was ignored>>
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

`arch`返回 i386 并`uname -a`在最后显示 x86_64。

我刚刚构建了库并使用了相同的编译器，为什么它说它忽略了它，因为它是错误的架构？

# cassandra - Cassandra bin/sstable2json 导致 JSON 格式错误（随机产生连续逗号）

> ID：13654410
> 
> 赞同：1
> 
> 时间：2012-11-30T22:59:42.273
> 
> 标签：cassandra, datastax-enterprise

我目前正在使用 bin/sstable2json 并遇到转换过程的问题。成功转换的 SSTable 将生成包含以下内容的 JSON 文件：

["5665275509643149313","0b000100000010d...摩尔十六进制",1350706937228001]

但偶尔我会在输出中遇到这些类型的行：

["5665275509643153409","0b000100000010d36..., , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,

这些行没有右括号或结束长，并且序列化的十六进制字符串没有右引号。它们通常也以“9343300”结尾，但失败行中的序列化十六进制字符串将没有结束字节。

有没有人遇到过这个问题？

# python - 列表为空时列表推导引发异常

> ID：13654413
> 
> 赞同：3
> 
> 时间：2012-11-30T22:59:56.093
> 
> 标签：python, list, list-comprehension

如果列表项的日期是过去的（小于当前日期），我有一个过滤列表项的功能。

```
meetings = []
def clean_old():
    meetings = [meeting for meeting in meetings if time.mktime(meeting) >= time.localtime()] 
```

当列表为空时，此代码崩溃。

为什么会崩溃？它说`for meeting in meetings`，如果会议是空的，那么一切都应该没问题。

我该如何解决它，这种情况的解释是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T23:06:52.963

我假设您看到此异常：

```
UnboundLocalError: local variable 'meetings' referenced before assignment 
```

您在这里所经历的实际上与列表推导没有任何关系。发生此错误是因为您最初`meetings`在函数外部定义，但您试图在函数内部为其分配一个新值。

当 Python 看到一个变量在函数内被赋值时，它会将其视为一个新变量，*特定于该函数*。这可以防止函数从函数外部访问具有相同名称的任何变量。

在内部，Python 正在做类似这样的事情：

```
meetings_outside = []

def clean_old():
    meetings_inside = [meeting for meeting in meetings_inside if time.mktime(meeting) >= time.localtime()] 
```

您可以理解为什么这会失败：`meetings_inside`是根据自身定义的。当 Python 尝试查找 的值`meetings_inside`以开始迭代其内容时，它失败了，因为它还没有被赋值。

如何处理这取决于您使用的 Python 版本，并且`meetings`定义了初始值。

在 Python 3 中，您可以简单地添加`nonlocal meetings`到函数的顶部。这将告诉它您指的是一个名为 的现有变量`meetings`，而不是创建另一个变量。

但是，您可能正在使用没有`nonlocal`关键字的 Python 2。它*确实*有`global`关键字，它做同样的事情，但只有`meetings`在模块的顶层定义：在任何其他函数或类之外。

例如，如果您的文件中没有其他内容，这将在 Python 2 中工作：

进口时间

```
meetings = []

def clean_old():
    global meetings
    meetings = [meeting for meeting in meetings if time.mktime(meeting) >= time.localtime()]

clean_old()
print meetings 
```

```
[] 
```

然而这不会，因为`meetings`是在函数内部定义的：

```
import time

def main():
    meetings = []

    def clean_old():
        global meetings
        meetings = [meeting for meeting in meetings if time.mktime(meeting) >= time.localtime()]

    clean_old()
    print meetings

main() 
```

```
NameError: global name 'meetings' is not defined 
```

你需要解决这个问题。最简单的方法是将分配修改为：

```
 meetings[:] = [meeting for meeting in meetings if time.mktime(meeting) >= time.localtime()] 
```

这告诉 Python 您正在替换 中的所有值`meetings`，但没有创建新`list`对象。（该语法称为“切片”，[在 Python 教程中](http://docs.python.org/2/tutorial/introduction.html#lists)`:`有部分描述。）

# c# - MVC4 - 未记住路由值

> ID：13654414
> 
> 赞同：4
> 
> 时间：2012-11-30T22:59:59.540
> 
> 标签：c#, .net, razor, asp.net-mvc-4, asp.net-routing

这是我的路线设置：

```
routes.MapRoute(
    name: "MyRoute",
    url: "Secret/{source}/{display}/{sort}/{tags}/{filter}/{pageSize}/{page}",
    defaults: new { controller = "Secret", action = "Index", page = 1, filter = "-", tags = "-" },
    namespaces: new[] { "SomeProject.Controllers" }
    ); 
```

当我访问此 URL 时：

```
http://localhost:12345/Secret/SourceHere/Gallery/Score/-/-/26 
```

我的观点有这个标记：

```
<a href="@Url.Action("Index", new { tags = @tagInfo.Tag })"> 
```

那么链接中的结果 URL 是：

```
http://localhost:12345/Secret?tags=hello 
```

虽然我找不到它的官方文档，但我在 SO、Google 等网站上阅读的所有内容都表示应该保留路由值。好吧，我已经通过每次指定所有路由值来解决它，但这很糟糕。

为什么我的路线值没有被保留？

**编辑**我下面的答案不太正确。在另一种观点/情况下，那里的规则不适用。任何人都可以绝对确定地解释何时记住路由值的规则吗？

路线让我疯狂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:28:00.450

In turns out (thanks Robert Harvey) that making sure all route parameters have default values (of anything at all) meant the view would generate links remembering current route values.

I would like to point out that this is really confusing: the default values aren't used for anything, but they need to be specified so values are remembered!

The only thing is, it does only remember up to the first parameter whose value is being specified. Any parameters after that are lost (even those with a non-default value).

So the answer at present is: specify some (any!) default values for all route parameters, and remember to specify new values for the parameters you want, plus any coming after them in the route URL.

# javascript - 使用breathjs保存实体时出错（缺少ScriptAssemblyAttribute）

> ID：13654416
> 
> 赞同：0
> 
> 时间：2012-11-30T23:00:11.317
> 
> 标签：javascript, asp.net, asp.net-mvc-4, breeze, script#

**单击brewjs** nuget示例中的保存按钮时出现以下错误：

**无法从程序集“mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”加载类型“System.Runtime.CompilerServices.ScriptAssemblyAttribute”**

调用以下代码中的**SaveChanges**时出现错误：

```
[HttpPost]
public SaveResult SaveChanges(JObject saveBundle) {
   return _contextProvider.SaveChanges(saveBundle);
} 
```

实际上，当我在代码编辑器中查找**System.Runtime.CompilerServices**并且我的目标是 .NET 4.5时，智能感知中不存在**ScriptAssemblyAttribute 。**

 **我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:53:25.107

原来 Script# 与它有关。我卸载了它，错误消失了。**

# angularjs - 在angularjs中使用ui-date时如何将初始值设置为ng-model

> ID：13654420
> 
> 赞同：4
> 
> 时间：2012-11-30T23:00:34.563
> 
> 标签：angularjs, angular-ui

我的模型基于 JSON 对象，日期为 2012-12-13T00:00:00-07:00

我想使用日期选择器 ui-date。

我有以下有效的代码。

```
<input ng-model="course.startDate" value="{{item.startDate | date: 'MM/dd/yyyy'}}" ui-date ng-required="true"> 
```

但是，我认为我不应该使用该`value="{{item.startDate | date: 'MM/dd/yyyy'}}"`部件，但没有它，输入不会加载模型中的值。

当我选择一个日期时，该模型已绑定并正常运行，但在页面加载时它只是显示为空。

初始化此输入的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:26:12.863

使用`ui-date`and`ng-model`就足够了：

```
<div ng-controller="MyCtrl">
  <input ng-model="date" ui-date>
</div> 
```

前提`MyCtrl`是定义如下：

```
function MyCtrl($scope) {
    $scope.date= new Date();
}​ 
```

这是一个 jsFiddle：http: [//jsfiddle.net/MvGFF/2/](http://jsfiddle.net/MvGFF/2/)

您必须知道的是`ui-date` **期望模型值是 Date 的一个实例**，也许您正在传递一个字符串（或其他类型）值？

如果您的模型包含字符串值并且您仍想使用日期选择器，则需要添加`ui-date-format`如下示例中的指令：

```
<input ng-model="date" ui-date ui-date-format> 
```

控制器的定义如下：

```
function MyCtrl($scope) {
    $scope.date= "2012-12-13T00:00:00-07:00";
}​ 
```

这是一个 jsFiddle：http: [//jsfiddle.net/d4xz2/1/](http://jsfiddle.net/d4xz2/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T22:43:43.147

这很好用：

```
<input type="text" ng-model="nota.fechaPub" value="{{nota.fechaPub}}" ui-date ui-date-format> 
```

其中 $scope.nota.fechaPub 值为“2013-01-14T23:00:00.000Z”

文本框中显示的值为“01/15/2013”

# windows-8 - 如何分享获取的图像？

> ID：13654427
> 
> 赞同：0
> 
> 时间：2012-11-30T23:01:27.090
> 
> 标签：windows-8, windows-runtime, winjs

我使用“blob”的 responseType 进行 WinJS.xhr() 调用，result.response 是一个图像。我如何分享该图像？DataTransferManager 的 setBitmap 需要一个流引用。我是否需要将图像记录到临时文件然后执行`Windows.Storage.Streams.RandomAccessStreamReference.createFromFile()`？如果是这样，我如何将图像写入 StorageFile？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:12:47.860

你有两个选择：

1.  将文件写入磁盘。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/12225951/how-to-save-html5-canvas-as-an-image-file-in-window-8-metro-app/12230195#12230195)
2.  从 XHR 响应创建一个多用途 blob。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ie/hh673569%28v=vs.85%29.aspx)。

如果您只是临时共享文件，则第二个选项使您不必将文件写入磁盘，但它会通过一些内存管理来稍后撤销 blob。创建 URL 后，您只需将其分配给`img`标签`src`属性即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-25T20:59:18.530

这个老问题的替代答案，如果目标是共享图像而不保存它，

```
Windows.Storage.Streams.RandomAccessStreamReference.createFromUri(targetImageSrc); 
```

`uri`应该达到相同的结果，从而不是 a创建流`file`。

虽然，这个功能当时可能还没有。

# jquery - 调整有关浏览器窗口的图像大小而不失真

> ID：13654428
> 
> 赞同：0
> 
> 时间：2012-11-30T23:01:33.550
> 
> 标签：jquery, browser, resize, window, autoresize

我有一个 img 标签，我想根据浏览器窗口重新调整它的大小，而不会失真。

img 需要一个（宽度：100%），因此它的高度将大于浏览器窗口。当图像高度 <= 浏览器窗口时，它将停止调整大小，否则将重新调整大小。

所以; 它没有用！

这是我的代码：

```
<html>
<head>
<title>testawy</title>
</head>
<style type="text/css">
body
{
padding: 0;
margin: 0;
overflow: hidden;
}
</style>
<body>
<img id="str" src="stretch.jpg">
<script src="jquery.min.js"></script>
<script type="text/javascript">
$(function()
{
    $("#str").width($(window).width());
});

$(window).resize(function(){
    var x = $(window).height();
    var y = $("#str").height();

    if (y <= x)
    {
        $("#str").height('500px');
    }
    else
    {
        $("#str").width($(window).width());
    }
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:26:07.440

前段时间，我在一个项目中需要这个，**我在 SO 找到了很多关于这个主题的资源**（几乎可以肯定这是一个重复的问题），但我们开始吧：

### HTML

```
<img src="images/bg.jpg" id="bg" alt=""> 
```

### jQuery

```
$(window).load(function() {    

    var theWindow        = $(window),
        $bg              = $("#bg"),
        aspectRatio      = $bg.width() / $bg.height();

    function resizeBg() {

        if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
            $bg
                .removeClass()
                .addClass('bgheight');
        } else {
            $bg
                .removeClass()
                .addClass('bgwidth');
        }

    }

    theWindow.resize(resizeBg).trigger("resize");
}); 
```

### CSS：

```
#bg { position: fixed; top: 0; left: 0; }
.bgwidth { width: 100%; }
.bgheight { height: 100%; } 
```

**小提琴：http:** [//jsfiddle.net/7Qcfy/3/](http://jsfiddle.net/7Qcfy/3/)

*编辑：*你是对的，我的代码几乎没有问题，这是明确的答案......正是你正在寻找的：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:43:06.570

我相信这就是您所需要的...几乎只需检查浏览器窗口是否小于 500 像素。

```
function resizeIt() {

    var x = $(window).height();

    if ( x <= 500 ) {
        $("#str").attr('height', '500px').removeAttr('width');
    } else {
        $("#str").attr('width', '100%').removeAttr('height');
    }

}

resizeIt();

$(window).on('resize', resizeIt); 
```

# c# - 图像 .net 4.5 的自定义绘图部分

> ID：13654431
> 
> 赞同：3
> 
> 时间：2012-11-30T23:01:56.607
> 
> 标签：c#, .net-3.5, drawing, .net-4.5, system.windows.media

我自定义在屏幕上绘制两个放大图像，一个并排。他们每个人都占据了屏幕的一半。

我以前在.net 3.5（我认为）中通过覆盖 OnPaint() 完成了它：

```
 //using System.Drawing

    /// <summary>
    /// Custom drawing
    /// </summary>
    /// <param name="e"></param>
    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.DrawImage(Image, DestRectangle, SrcRectangle, GraphicsUnit);
    } 
```

DrawImage 方法的描述：“在指定位置以指定大小绘制指定Image的指定部分。” ( [MSDN](http://msdn.microsoft.com/en-us/library/ms142040.aspx) )

我正在尝试使用 .net 4.5 来实现相同的目标。我正在覆盖 OnRender 并使用 DrawingContext 对象来执行我的绘图。基本上这是我的循环：

```
 //using System.Windows.Media;

    /// <summary>
    /// Overide the OnRender to have access to a lower level of drawing.
    /// </summary>
    /// <param name="drawingContext"></param>
    protected override void OnRender(DrawingContext drawingContext)
    {
        drawingContext.DrawImage(BitmapImage_Left, Window_LeftHalf);
        drawingContext.DrawImage(BitmapImage_Right, Window_RightHalf);
    } 
```

如果我想显示拉伸的图片，它工作得很好。我想要的是显示（在 Window_LeftHalf 和 Window_RightHalf 中）图片的一部分（如放大）。基本上是 graphics.DrawImage （见上图），但使用的是 DrawingContext 对象。

我曾尝试查看 MSDN，但无法提取任何有趣的内容。也许创建一个稍后由 DrawingContext 使用的缓冲区？我几乎可以肯定需要一个中间对象来保存放大的图像。有任何想法吗？

更新：我使用鼠标浏览图像，所以性能*很*重要。例如：

```
 /// <summary>
    /// Handles the mouse move events.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private static void MouseMoveEventHandler(RoutedEventArgs e)
    {
        // The size of the crop is always the same
        // but the portion of the picture different.
        crop.X += mouseDelta.X;
        crop.Y += mouseDelta.Y;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T02:15:50.987

看看`CroppedBitmap`课堂。就像您过去可以使用 , 一样`e.Graphics.DrawImage()`，`CroppedBitmap`您可以只指定您感兴趣的图像部分。

这是一个例子：

```
protected override void OnRender(System.Windows.Media.DrawingContext dc)
{
    int halfWidth = (int)this.Width / 2;
    int height = (int)this.Height;
    BitmapImage leftImage = new BitmapImage(new Uri(@"C:\Users\Public\Pictures\Sample Pictures\Chrysanthemum.jpg"));
    BitmapImage rightImage = new BitmapImage(new Uri(@"C:\Users\Public\Pictures\Sample Pictures\Desert.jpg"));
    CroppedBitmap leftImageCropped = new CroppedBitmap(leftImage, new Int32Rect(0, 0, halfWidth, height));
    CroppedBitmap rightImageCropped = new CroppedBitmap(rightImage, new Int32Rect(0, 0, halfWidth, height));
    dc.DrawImage(leftImageCropped, new System.Windows.Rect(0, 0, leftImageCropped.Width, height));
    dc.DrawImage(rightImageCropped, new System.Windows.Rect(halfWidth, 0, halfWidth, height));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:04:25.707

**编辑**`ImageBrush.Viewbox`2 ：。 Viewbox 的`Rect`尺寸为 [0.0...1.0]，可让您控制原来的 SourceRect。我对此进行了测试，效果很好。我做了什么：

在我的窗口中：

```
 protected ImageBrush imgBrush = new ImageBrush(new ImageSource(new Uri("image.png")));
    protected Rect vBox = new Rect(0, 0, 1, 1);
    protected Point lastPosition = new Point(0, 0); 
```

我的容器是一个名为*tgtRect*的WPF 矩形，它`Rect.Fill`是*imgBrush*。缩放和滚动方法如下：

```
 protected void tgtRect_MouseWheel(object sender, MouseWheelEventArgs e)
    {
        // Zoom in when Delta is positive, Zoom out when negative
        double exp = -e.Delta / Math.Abs(e.Delta);
        double val = Math.Pow(1.1, exp);
        vBox.Scale(val, val);
        imgBrush.Viewbox = vBox;
    }

    void tgtRect_MouseMove(object sender, MouseEventArgs e)
    {
        Point thisPosition = e.GetPosition(tgtRect);
        if (e.RightButton == MouseButtonState.Pressed)
        {
            double w = tgtRect.ActualWidth;
            double h = tgtRect.ActualHeight;
            Vector offset = lastPosition - thisPosition;
            offset.X /= w;
            offset.Y /= h;
            vBox.Offset(offset);
            imgBrush.Viewbox = vBox;
        }
        lastPosition = thisPosition;
    } 
```

对于您的实施：

```
 protected override void OnRender(DrawingContext drawingContext)
    {
        drawingContext.DrawRectangle(imgBrush, null, DesRect);
    } 
```

您可能需要为要绘制的每个矩形维护一个单独的 imgBrush。`Rectangle.Fill`我在 WPF 窗口中尝试了上面的代码（不是 OnRender 覆盖），只有一个 Rectangle ，`ImageBrush`性能非常好。如果您有任何问题，我认为我们可以解决，但我认为 ImageBrush 最终会成为正确的实现。这是一个非常有趣的项目！谢谢你的问题。

**结束编辑 2**

您需要将`Rect`对象“Window_LeftHalf”和“Window_RightHalf”定义为您希望渲染图像的实际大小。例如，如果您缩放 200%，则`Rect.Width`and`Rect.Height`属性将需要是原始 ImageSource 大小的 2 倍。

**编辑**：

旧方法是：

```
protected override void OnPaint(PaintEventArgs e)
{
    e.Graphics.DrawImage(Image, DestRectangle, SrcRectangle, GraphicsUnit);
} 
```

使用 'BitmapImage.SourceRect` ：

```
protected override void OnRender(DrawingContext drawingContext)
{
    BitmapImage_Left.SourceRect = SrcRectangleLeft;
    drawingContext.DrawImage(BitmapImage_Left, Window_LeftHalf);
    BitmapImage_Right.SourceRect = SrcRectangleRight;
    drawingContext.DrawImage(BitmapImage_Right, Window_RightHalf);
} 
```

您的鼠标功能可以更改 SourceRect。例如：

```
private static void MouseMoveEventHandler(RoutedEventArgs e)
{
    // The size of the crop is always the same
    // but the portion of the picture different.
    SrcRectangleLeft = new Int32Rect(SrcRectangleLeft.X + mouseDelta.X, 
        SrcRectangleLeft.Y + mouseDelta.Y,
        SrcRectangleLeft.Width, SrcRectangleLeft.Height);
} 
```

不确定性能如何，但应该比每次更新时将位图的一部分映射到新对象上要好。

希望这有帮助。

# iphone - 苹果应用商店的更新审核流程是否比新应用更快？

> ID：13654433
> 
> 赞同：3
> 
> 时间：2012-11-30T23:01:58.573
> 
> 标签：iphone, app-store

想知道 Apple 应用商店的更新审核流程是否比新应用更快。如果我们想在某个日期之前进入商店并提供一组功能，那么将应用程序发送到应用程序进行审查是否有意义，然后在完成后发送更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T23:07:47.777

以我的经验，是的，审查更新的过程要快得多。

获得更新批准通常需要 30 分钟到 2 周，而新应用程序的批准过程通常需要 2 到 4 周，最少。

话虽如此，将您的应用程序发布到具有部分功能的商店可能不会比完整的应用程序更快地进行审查。苹果不会检查每一个角落。

*尽管在我看来，*您的应用程序启动的重点不应该是审核过程需要多长时间。这是一个抓包，大应用程序或小应用程序。而是专注于**您希望发布的方式。**有些人喜欢过多的 1.0.0 功能，有些人喜欢看到大的内容更新。考虑到这一点。

**编辑：**我的原始数据点来自于 2011 年初提交的申请。我刚刚有另一个申请（Mac）批准了 v1.0，大约花了 5 天，所以第一次的速度似乎有了很大的提高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:07:04.810

没有人知道幕后真正发生了什么。但以我个人的经验，不，这无济于事。

似乎瓶颈是让审阅者关注您的应用程序，并且实际审阅（在大多数情况下）进行得很快。

假设您的应用程序花费 7 天等待审核。如果更新需要 1 天的审核时间，或者新应用需要 2 天的审核时间，则不会对您的时间线产生巨大影响。

# youtube - YouTube API 的 most_popular feed 与 YouTube 网站不同

> ID：13654436
> 
> 赞同：1
> 
> 时间：2012-11-30T23:02:16.807
> 
> 标签：youtube, youtube-api

在我写这篇文章的时候，[YouTube 网站](http://www.youtube.com/charts/videos_views/music)（“YouTube 100”？）给了我本周“观看次数最多的视频”与 YouTube API 截然不同的结果，

[https://gdata.youtube.com/feeds/api/standardfeeds/most_popular_Music?time=this_week](https://gdata.youtube.com/feeds/api/standardfeeds/most_popular_Music?time=this_week)

如何通过 API 获取 YouTube 网站的版本？以前这里和其他地方的其他人的问题似乎没有得到 YouTube 支持的回复，所以我再次询问。

[是否有免费的无限 API 来获得 Youtube 音乐视频的前 100 名广告牌？](https://stackoverflow.com/questions/12189523/is-there-a-free-unilimited-api-to-get-the-top-100-billboard-with-youtube-music-v)

[https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/znCSaWqLTaQ](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/znCSaWqLTaQ)

[如何从 youtube.com/music 获取项目](https://stackoverflow.com/questions/6083081/how-to-get-the-items-from-youtube-com-music)

# .net - 为什么无限递归不会在 F# 中遇到堆栈溢出异常？

> ID：13654437
> 
> 赞同：6
> 
> 时间：2012-11-30T23:02:18.150
> 
> 标签：.net, f#, functional-programming

我知道这与人们在询问堆栈溢出问题时遇到的问题有些相反，但是如果我创建一个函数并按如下方式调用它，我永远不会收到任何错误，并且应用程序只会磨碎我的核心CPU，直到我强制退出它：

```
let rec recursionTest x =
    recursionTest x

recursionTest 1 
```

当然我可以改变它，所以它实际上是这样的：

```
let rec recursionTest (x: uint64) =
    recursionTest (x + 1UL)

recursionTest 0UL 
```

这样我可以偶尔在我的代码中放置一个断点，然后看到 x 的值上升得很快，但它仍然没有抱怨。F# 不介意无限递归吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T23:05:56.087

您的`recursionTest`函数是尾递归的，这意味着所有递归调用都发生在“尾位置”，即作为函数中的最后一个动作。这意味着 F# 编译器不需要为递归调用分配新的堆栈帧，因此不会发生堆栈溢出。

尾递归是尾调用的一种特殊情况，[尾](http://en.wikipedia.org/wiki/Tail_call)调用是对自身而不是其他函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T23:06:54.700

通常，F# 发出 .NET 尊重的尾调用指令：

[http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.tailcall(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.tailcall(v=vs.95).aspx)

在某些特定的简单情况下，例如您的情况，F# 将使用递归的程序重写为使用循环的等效程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T23:05:24.113

这是[尾调用优化](http://en.wikipedia.org/wiki/Tail_call)的一个示例，因此编译器将其优化为一个简单的循环。看到这个：[https ://devblogs.microsoft.com/fsharpteam/tail-calls-in-f/](https://devblogs.microsoft.com/fsharpteam/tail-calls-in-f/)

尝试这样的事情：

```
let rec recursionTest x =
    recursionTest x + recursionTest (x * 2) 
```

# eclipse - SWTBOT 如何运行基于 Eclipse 的自定义应用程序？我不知道如何指定我的目标应用程序

> ID：13654441
> 
> 赞同：1
> 
> 时间：2012-11-30T23:02:41.877
> 
> 标签：eclipse, eclipse-rcp, gui-testing, swtbot

我有一个基于 Eclipse 的应用程序。我听说过 swtbot，但是我很难理解这个工具究竟是如何运行我的应用程序的，以及我将如何指定它。这个基于 Eclipse 的应用程序有一个可执行文件和各种配置/插件/功能文件。我已经完成了关于 swtbot 的教程并且我已经成功地完成了它们，但是它们都只是创建了一个模板应用程序来进行测试。

这甚至可能吗？如果没有，你们对基于 Eclipse 的应用程序的 UI 自动化测试有任何替代方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:30:26.673

啊哈，看来我可能已经找到了答案。

从[http://swtbot.com/user-guide/download-and-install.html](http://swtbot.com/user-guide/download-and-install.html)：

默认情况下，Eclipse 被配置为使用自己作为目标平台，这使您的 RCP 插件可以访问 IDE 中加载的所有内容。这称为自托管。

自托管时，您安装所有必需的插件 SWTBot IDE Support、SWTBot Eclipse Features、SWTBot JUnit 4.x Headless Execution。仅在 IDE 中需要 SWTBot IDE 支持，而在目标平台中需要其他支持。因为目标平台与您需要安装的 IDE 相同！

如果您需要针对其他插件进行开发，则必须在目标平台中安装这些插件。这就是为什么 SWTBot Eclipse Features、SWTBot JUnit 4.x Headless Execution 安装在目标平台中，而 SWTBot IDE Support 仅安装在 IDE 中的原因。您可以使用 Window > Preferences... > Plug-in Development > Target Platform 访问 Target Platform Preference Page 来配置您的目标平台

我用我的应用程序尝试了它，添加了整个 eclipse 文件夹，还包括了依赖项和插件，瞧，它起作用了。我在一些 UI 组件上运行了几个单元测试，它响应迅速并通过了所有单元测试。

多谢你们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:24:36.203

我不确定 SWTBot，但[Jubula](http://www.eclipse.org/jubula/)可与独立应用程序一起使用（请参阅[http://jmhofer.johoop.de/?p=97](http://jmhofer.johoop.de/?p=97)并以“所以，Jubula 必须以某种方式将自己连接到我们的 RCP 应用程序”）和[WindowTester亲也一样](https://developers.google.com/java-dev-tools/wintester/html/gettingstarted/testing_deployed_app)。

# java - JRebel 可以单独重新部署一个 jar 来更新 maven 依赖项而不是整个耳朵

> ID：13654442
> 
> 赞同：3
> 
> 时间：2012-11-30T23:02:48.493
> 
> 标签：java, maven, jrebel, hotdeploy

我们有一个部署到 Weblogic 的耳朵，我们正在使用 JRebel 使用它的 eclipse 插件进行热部署。一切正常，只要文件被修改，它们就会正确更新到服务器。

然而，有时由另一个团队创建并在我们耳中使用的 jar 文件会重新发布到我们的内部 maven 存储库。为了拿起最新的罐子，我们重建了我们的耳朵。即使只重新加载了一个 jar，JRebel 也会更新 weblogic 中加载的每个类，这需要很多时间。有没有办法防止因为耳朵被重建而完全重新加载课程？此外，并非 jar 中的所有类都会更新，JRebel 是否能够仅更新 jar 中修改后的文件。

第二个团队在开发时不使用 JRebel。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T23:36:10.650

JRebel 仅适用于单个类文件，而不适用于 JAR。不幸的是，如果您更改依赖项，您将不得不重新部署应用程序。但是，有一些解决方法。

如果您可以将依赖项用作源，则可以为该模块生成专用的 rebel.xml，并将其作为项目的一部分使用。

如果您不能将依赖项用作源，还有另一种解决方法：将 rebel.xml 打包到该 JAR 中并将其映射到某个任意位置。然后将新版本 JAR 的类提取到该位置。

# php - 这个 preg_replace 做什么？(/[\xF0-\xF7].../)

> ID：13654443
> 
> 赞同：8
> 
> 时间：2012-11-30T23:02:48.860
> 
> 标签：php, mysql, regex, utf-8, sql-injection

显然 $data 是字符串，我们正在删除满足 reg 表达式的字符，但是 /[\xF0-\xF7].../ 指定了哪些字符？

```
 preg_replace('/[\xF0-\xF7].../', '', $data) 
```

另外这些字符被替换的意义是什么？

编辑赏金：具体来说，这是为了防止发生什么漏洞？这些数据后来用于mysql查询（非pdo），所以我推测这些字符可能涉及某种注入攻击？或不？我试图在我正在阅读的脚本中理解这行代码背后的逻辑。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-01-13T23:25:28.643

它从 unicode 字符串中删除 4 个字节序列。在这些第一个字节中总是`[\xF0-\xF7]`，三个点是其余 3 个字节。

根据[http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)：

> 名为 utf8 的字符集每个字符最多使用三个字节，并且仅包含 BMP 字符。

选择 utf8 编码的 MySQL 可能会在序列出现的位置截断文本，如果未设置错误报告，`strict_trans_tables`它可能会静默执行，而不是像`SQLSTATE[HY000]: General error: 1366 Incorrect string value:`.

请参阅这些以获取更多参考：

*   [http://fluxbb.org/development/core/tickets/485/](http://fluxbb.org/development/core/tickets/485/)
*   [https://core.trac.wordpress.org/ticket/13590](https://core.trac.wordpress.org/ticket/13590)
*   [http://wordpress.org/plugins/full-utf-8/](http://wordpress.org/plugins/full-utf-8/)

潜在的截断可能导致漏洞利用。

例如，有一个用户名为 的网站`admin`。网站允许任何人注册。使用截断的字符串，一个人可能能够插入另一个`admin`绕过唯一检查的不同电子邮件。然后暂停帐户并尝试使用恢复程序。它将发出一个查询`SELECT * FROM users WHERE name = 'admin'`，因为原始管理员是第一个记录，攻击者将恢复他的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T23:25:41.693

它匹配 8 个字节值之一，加上后面的任何 3 个字符，并删除 4 个字符的块。你说的那么多，你已经知道了。不幸的是，如果没有更多上下文，我们无法告诉您*为什么*这些特定的 8 个字节很重要。无论它们代表什么字符字形（字符编码），它们本身都是无害的。我最好的猜测是，*在应用程序中，这来自于*这 8 个字符作为某种标记具有一定的意义。0xF0 是 11110xxx，一个 32 位（4 字节）UTF-8 字符的第一个字节，所以也许是要删除所有 32 位 UTF-8 字符？16 位和 24 位字符（110xxxxx 和 1110xxxx 第一个字节）是否得到类似处理？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T17:09:17.967

`preg_replace('/[\xF0-\xF7].../', '', $data)`代替：

(xF0 到 xF7) + 后面三个字符和一个空字符串（+ 符号表示连接，而不是加法）

# python - 错误：分段错误（核心转储）

> ID：13654449
> 
> 赞同：52
> 
> 时间：2012-11-30T23:03:26.900
> 
> 标签：python

我是 python 新手，遇到一个奇怪的错误：

```
Segmentation fault (core dumped) 
```

当我执行以下代码时：

```
 class Workspace(QMainWindow, Ui_MainWindow):
    """ This class is for managing the whole GUI `Workspace'.
        Currently a Workspace is similar to a MainWindow
    """

    def __init__(self):
        #p= subprocess.Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/', shell=True, stdout=subprocess.PIPE, bufsize= 4024)
        try:
            from Queue import Queue, Empty
        except ImportError:
            while True:
    #from queue import Queue, Empty  # python 3.x
                print "error"

        ON_POSIX = 'posix' in sys.builtin_module_names

        def enqueue_output(out, queue):
            for line in iter(out.readline, b''):
                queue.put(line)
            out.close()

        p= Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/',stdout=PIPE, shell=True, bufsize= 4024)
        q = Queue()
        t = threading.Thread(target=enqueue_output, args=(p.stdout, q))
        #t = Thread(target=enqueue_output, args=(p.stdout, q))
        t.daemon = True # thread dies with the program
        t.start()

# ... do other things here
        def myfunc(q):
            while True:

                try: line = q.get_nowait()
         # or q.get(timeout=.1)
                except Empty:
                    print('Vacio')
                else: # got line
    # ... do something with line

                    print line  

        thread = threading.Thread(target=myfunc, args=(q,))
        thread.start() 
```

这部分代码是从程序的标准输出中读取的。当我 `myfunc`在线程外执行时，它可以工作！但是当我在线程fais中执行它时......有什么建议吗？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-30T23:06:51.460

`"Segmentation fault (core dumped)"`是当程序以`SIGSEGV`信号退出并且您启用了核心创建时 Linux 打印的字符串。这意味着*某些*程序已经崩溃。

如果您实际上是从运行 Python 中得到这个错误，这意味着 Python 解释器已经崩溃。发生这种情况的原因只有几个：

1.  您正在使用用 C 编写的第三方扩展模块，并且该扩展模块已崩溃。

2.  您正在（直接或间接）使用内置模块`ctypes`，并调用崩溃的外部代码。

3.  您的 Python 安装有问题。

4.  您在 Python 中发现了一个应该报告的错误。

第一个是迄今为止最常见的。如果您`q`是来自某个第三方扩展模块的某个对象的实例，您可能需要查看文档。

通常，当 C 模块崩溃时，这是因为您正在做一些无效的事情，或者至少是不常见且未经测试的事情。但是，从这个意义上说，这是否是你的“过错”——这并不重要。该模块*应该*引发一个可以调试的 Python 异常，而不是崩溃。因此，您可能应该向编写扩展程序的人报告错误。但与此同时，与其等待 6 个月来修复错误并发布新版本，不如弄清楚是什么导致了崩溃，以及是否有一些不同的方法来做你想做的事。或者切换到不同的库。

另一方面，由于您正在从其他地方读取和打印数据，因此您的 Python 解释器可能只是读取了该行`"Segmentation fault (core dumped)"`并忠实地打印了它读取的内容。在那种情况下，上游的其他一些程序可能崩溃了。（甚至有可能没有人崩溃——如果你从网上获取这个页面并打印出来，你会得到相同的行，对吗？）在你的情况下，根据你的评论，它可能是 Java 程序崩溃了。

如果您不确定是哪种情况（并且今天不想学习如何进行进程管理、核心文件检查或 C 级调试），有一个简单的测试方法：在`print line`添加一行`print "And I'm OK"`. 如果您在该行之后看到`Segmentation fault`，那么 Python 并没有崩溃，而是其他人崩溃了。如果你没有看到它，那么很可能是 Python 崩溃了。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2015-06-25T10:56:37.310

这种失败还有一个原因，当我失败时我才知道

*   您可能正在处理大量数据并且您的 RAM 已满

这可能不适用于这种情况，但它也会引发相同的错误，并且由于这个问题出现在这个错误的最前面，我在这里添加了这个答案。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-02-26T12:59:30.803

值得尝试 faulthandler 来识别导致问题的行或库，如此处所述[https://stackoverflow.com/a/58825725/2160809](https://stackoverflow.com/a/58825725/2160809)和 Karuhanga 的评论

```
import faulthandler

faulthandler.enable()
// bad code goes here 
```

或者

```
$ python3 -q -X faulthandler
>>> /// bad cod goes here 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-02T14:02:19.393

就我而言：我忘记**激活 virtualenv**

我在错误的 virtualenv 中安装了“pip install example”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-12T21:45:30.837

与问题轻微无关，但由于每当您搜索*“（核心转储）python”*时都会出现此页面，因此我可能会分享一个导致此错误的常见问题。

```
OpenCV cv2.imshow() sometimes raises this error on servers without graphical interfaces. 
```

希望我有所帮助。祝你有美好的一天！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-12T19:50:17.297

就我而言，我在与 db Mysql 一起使用的模块之前导入了 pyxlsd 模块。在我确实将 Mysql 模块放在首位（代码中的上部）之后，它就变得像时钟一样工作了。认为存在一些命名空间问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-14T19:42:38.150

就我而言，我在导入 mysql.connector 之前从 openpyxl 导入 load_workbook。我只是切换了顺序，它又开始工作了。

**分段错误（核心转储）错误**

```
from openpyxl import load_workbook
import mysql.connector 
```

**解决方案**

```
import mysql.connector
from openpyxl import load_workbook 
```

# arrays - cudamemcopy 的最佳数据结构

> ID：13654451
> 
> 赞同：0
> 
> 时间：2012-11-30T23:03:43.797
> 
> 标签：arrays, struct, cuda

是否有使用 cudamemcopy(... , devicetohost) 传输数据的最佳数据结构？我发现数组的工作速度比结构快得多。这是有原因的吗？是否有更优化的方法？

编辑 -

看来我的时间没有被正确记录。结构和数组的时间量应该大致相等。我将尝试使用 cuda events api 来记录时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:23:03.887

在内核中将数据从全局内存加载到共享/寄存器时，数组结构通常比结构数组好。但是，我认为在将数据从主机复制到主机或从设备复制数据时（在一个大的内存复制事务中），SoA 和 AoS 之间没有任何性能差异。毕竟数据量是一样的。

唯一的例外是如果在结构的末尾添加了一些额外的填充字节以实现 AoS 元素的某些内存对齐。

我认为您遇到性能差异可能还有其他原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:59:39.397

就个人而言，我怀疑性能差异是由于副本造成的。

也许您的数据结构正在以存在空白的方式对齐。

第二个原因可能是由于内存页面对齐处理。当您使用 malloc 获取内存时，它可能会像 Windows 文件系统的布局一样被碎片化。碎片化程度可以非常高，但可以说，如果你对 malloc 进行一次调用，你会得到连续对齐的内存，而如果你多次调用，你会得到有间隙的内存。

CUDA 的内存副本必须通过逐页检查页面并手动将它们移动到 GPU 来处理这种额外的开销。

* * *

解决问题的真正方法是`cudaMallocHost`分配 CPU 不必担心的内存。尝试这样做，看看它是否能解决您的问题。

# php - 使用 preg_replace 截断字符串的最有效方法？

> ID：13654452
> 
> 赞同：4
> 
> 时间：2012-11-30T23:04:00.020
> 
> 标签：php, regex, string, performance

我正在查看一些代码并开始考虑使用`preg_replace`.

首先 - 我意识到首先使用`preg_replace`这个任务可能是过度的，它可能不必要地昂贵，并且最好使用 PHP 的字符串友好函数来处理它，例如`substr`. 我知道这一点。

也就是说，考虑这两个不同的正则表达式：

```
$uri = '/one/cool/uri';    // Desired result '/one/cool'

// Using a back-reference
$parent = preg_replace('#(.*)/.*#', "$1", $uri);

// Using character class negation
$parent = preg_replace('#/[^/]+$#', '', $uri); 
```

默认情况下，我会假设在前一种情况下，创建反向引用会比不这样做更昂贵，因此第二个示例会更可取。但后来我开始想知道`[^/]`在第二个示例中使用是否可能比在第一个示例中的相应更昂贵`.`，如果是，要多多少？

从可读性的角度来看，我更喜欢第一个示例，并且由于我们分心，我倾向于在两者之间进行选择（毕竟，编写可读代码也很有价值）。可能只是我个人的喜好。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:28:09.727

I also would measure running time of both options. This information from the docs may help too:

[http://www.php.net/manual/en/regexp.reference.performance.php](http://www.php.net/manual/en/regexp.reference.performance.php)

> If you are using such a pattern with subject strings that do not contain newlines, the best performance is obtained by setting PCRE_DOTALL, or starting the pattern with ^.* to indicate explicit anchoring. That saves PCRE from having to scan along the subject looking for a newline to restart at.

So, `$parent = preg_replace('#^(.*)/.*#s', "$1", $uri);` may speed the first option. The second one would not need this setup:

> s (PCRE_DOTALL)
> 
> If this modifier is set, a dot metacharacter in the pattern matches all characters, including newlines. Without it, newlines are excluded. This modifier is equivalent to Perl's /s modifier. **A negative class such as [^a] always matches a newline character**, independent of the setting of this modifier.

# vb.net - 在 VB.NET 列表视图中插入控件

> ID：13654455
> 
> 赞同：2
> 
> 时间：2012-11-30T23:04:12.297
> 
> 标签：vb.net

您好，我在 VB.NET 中有一个 Listview，我想在其中插入一个名称和一个按钮，如下所示：名称应显示在 listview 的左侧，按钮显示在右侧（就像我在里面有一行一样listeview 和放置在该行左侧和右侧的两个控件）那么，在 VB.NET 中是否有可能，如果是这样的话怎么办？我希望我的问题很清楚。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:54:39.023

不容易。但是 DataGridView 可以轻松处理这个问题：

![在此处输入图像描述](../Images/b757a3d3267754797cff149636b36121.png)

```
 DataGridView1.Columns.AddRange(New DataGridViewColumn(1) _
                                    {New DataGridViewTextBoxColumn() With _
                                     {.AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill, .HeaderText = "Text"},
                                     New DataGridViewButtonColumn() With _
                                     {.AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill, .HeaderText = "Button"}})
    DataGridView1.Rows.Add({"row 1 text", "row 1 button"})
    DataGridView1.Rows.Add({"row 2 text", "row 2 button"}) 
```

这些属性可以从设计器中设置，您可能会绑定 datagridview 而不是手动添加行。

编辑删除按钮单击行，使用 CellContentClick 事件：

```
Private Sub DataGridView1_CellContentClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick
    'check it the button column being clicked, and check they are not clicking the column heading
    If e.ColumnIndex = 1 And e.RowIndex >= 0 Then
        DataGridView1.Rows.RemoveAt(e.RowIndex)
    End If
End Sub 
```

请注意，如果您确实使用数据绑定，则应从数据对象中删除该行，而不是从 datagridview

编辑将项目的所有列提取到列表中：

```
 Dim columnOneValues As New List(Of String)

 For Each row As DataGridViewRow In DataGridView1.Rows
        columnOneValues.Add(row.Cells(0).Value.ToString)
 Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:51:15.453

**简短的回答：**没有。

**更长的答案：**是的，但这是不平凡的，你不能用 stock 来做`ListView`。

您必须扩展类，自己处理控件的绘制，根据`ListViewItem`. 此外，如果用户对`ListView`列重新排序，则没有简单的方法可以获取新的列顺序。

有关自定义的示例，请参阅[此代码项目页面](http://www.codeproject.com/Articles/9188/Embedding-Controls-in-a-ListView)`ListView`。

# ruby - 有没有一种红宝石方法可以使日期和时间更具可读性？

> ID：13654457
> 
> 赞同：2
> 
> 时间：2012-11-30T23:04:40.550
> 
> 标签：ruby, date, datetime, gem, sinatra

我正在使用一个 API，其中返回的日期类似于：`2012-11-30 12:54:59 -0800`. 例如，我想知道是否有一个 Ruby 方法可以将其作为输入并返回“今天”。

其他首选输出是“大约一个小时前”、“刚刚”、“一个月前”。

我正在使用 Sinatra。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T23:12:56.020

有[克朗克宝石](https://github.com/xaviershay/kronic)：

```
Kronic.format(Time.now)
 => "Today" 
Kronic.format(Time.now - 500000)
 => "Last Saturday" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T23:08:03.940

这是一个标准`DateTime`对象。您可以通过属性获得它的所有部分。

例如：

```
d = Date.parse('3rd Feb 2001')
                             #=> #<Date: 2001-02-03 ...>
d.year                       #=> 2001
d.mon                        #=> 2
d.mday                       #=> 3
d.wday                       #=> 6 
```

您可以使用它们使其具有您希望的可读性。[红宝石日期时间](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)

# xslt - 选择元素时忽略 XML 命名空间前缀 - XSLT

> ID：13654466
> 
> 赞同：1
> 
> 时间：2012-11-30T23:05:28.010
> 
> 标签：xslt

XML 版本 1

```
<inboundData xmlns="urn:college:names:ws:docexchange">
<Root>
        <College Version="5.0" xmlns:cidx="urn:abc:names:specification:col:schema:all:5:0" xmlns="urn:abc:names:specification:col:schema:all:5:0">
           <Header>
              <Address>
                 <AddressLine1>4600 Big Tree Way</AddressLine1>
              </Address>
           </Header>
    </College>
</Root>
</inboundData> 
```

XML 版本 2

```
<inboundData xmlns="urn:college:names:ws:docexchange">
<Root>
        <ns1:College Version="5.0" xmlns:ns1="urn:abc:names:specification:col:schema:all:5:0">
           <ns1:Header>
              <ns1:Address>
                 <ns1:AddressLine1>4600 Big Tree Way</ns1:AddressLine1>
              </ns1:Address>
           </ns1:Header>
    </ns1:College>
</Root>
</inboundData> 
```

XSL 代码

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:a="urn:abc:names:specification:col:schema:all:5:0" xmlns:b="urn:college:names:ws:docexchange">
<xsl:template match="/">
    <xsl:copy-of select="b:inboundData/b:College/*"/>
</xsl:template>
</xsl:stylesheet> 
```

XSL 代码中的更正。（阅读汉森的回复后发现错误）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:a="urn:abc:names:specification:col:schema:all:5:0" xmlns:b="urn:college:names:ws:docexchange">
<xsl:template match="/">
    <xsl:copy-of select="b:inboundData/b:Root/*"/>
</xsl:template>
</xsl:stylesheet> 
```

XSL 代码适用于 XML 版本 1。由于额外的命名空间“ns1”，它不适用于类型 2。如何使 xsl 代码适用于这两个版本？请赐教！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T23:24:20.543

您可以按元素的本地名称匹配元素，例如

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:a="urn:abc:names:specification:col:schema:all:5:0" 
    xmlns:b="urn:college:names:ws:docexchange">
  <xsl:template match="/">
    <xsl:copy-of select="b:inboundData/*[local-name()='College']/*"/>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T01:09:49.187

**该`College`元素绑定到两个文档的相同命名空间。**

XML 文档是否使用命名空间前缀或者它们是否具有不同的前缀值是无关紧要的。它们被 XML 处理器“视为”为相同类型的元素，并且通过 XPath 以相同的方式寻址，因为它们绑定到相同的名称空间。

XPath 语句中使用的命名空间前缀不必与 XML 文档中的命名空间前缀匹配（因为无法预测某人可能选择使用哪些命名空间前缀）。但是，它绑定的命名空间必须匹配。

您的两个 XML 文档是等效的。无论元素是否具有命名空间前缀，元素都绑定到相同的命名空间。

如果您在第一个 XML 文档中查看它们是如何声明的以及它们映射到什么：

```
<College Version="5.0" 
 xmlns:cidx="urn:abc:names:specification:col:schema:all:5:0"
 xmlns="urn:abc:names:specification:col:schema:all:5:0"> 
```

声明一个`College`没有命名空间前缀的元素，该元素绑定到命名空间`urn:abc:names:specification:col:schema:all:5:0`，因为声明了没有命名空间前缀的命名空间`xmlns="urn:abc:names:specification:col:schema:all:5:0"`。

在第二个例子中：

```
<ns1:College Version="5.0" 
     xmlns:ns1="urn:abc:names:specification:col:schema:all:5:0"> 
```

`College`声明使用绑定到命名空间的命名空间前缀命名的元素`urn:abc:names:specification:col:schema:all:5:0`。

两个示例中这些`College`元素的后代元素都绑定到与`College`定义`ns1`第一个示例中的 namespace-prefix 或第二个示例文档中的 null namespace-prefix 的命名空间的元素相同的命名空间。

任何处理这些元素的 XSLT 和 XPath 都应该返回相同的结果。

XSLT 中的模板匹配不应该适用于任何一个文档，因为`College`它不是`inboundData`.

您要么需要将其调整为：

```
b:inboundData/b:Root/a:College/* 
```

或者

```
b:inboundData//a:College/* 
```

# command-line - 如何在批处理文件中制作两列？

> ID：13654471
> 
> 赞同：1
> 
> 时间：2012-11-30T23:05:41.007
> 
> 标签：command-line, batch-file

我有 1 列，它要求用户输入或他们想要观看的流，但一列不足以掌握所有频道。

这是它的外观截图。
![在此处输入图像描述](../Images/d0599e49b9f531baa839e9f079f95d55.png)

如何让它在第一列中显示 1 到 10，在第二列中显示 11 到 20。

这是我的代码..不包括流链接。

```
<br><br>
@echo off
rem mode con:cols=60 lines=16
mode con:cols=50 lines=40

:VRH
title HD Indian Channels By  
cls
COLOR 0E
echo       Install VLC Player & OctoShape: VLC Player
echo        Select Channel Number You Want To Watch!
echo.
echo             (1)  = Sahara Samay     +1
echo             (2)  = India TV         +2
echo             (3)  = NDTV Hindi       +3
echo             (4)  = Sahara Mumbai    +4
echo             (5)  = Times Now        +5
echo             (6)  = Saharah AP       +6
echo             (7)  = News X           +7
echo             (8)  = Punjabi          +8
echo             (9)  = Al Jazeera Sport +9
echo             (10) = Al Jazeera Sport +10
echo             (11) = Aaj Tak          +11
echo             (12) = Headlines Today  +12
echo             (13) = UTV Bindaas      +13
echo             (14) = HumTV            +14
echo             (15) = M Tunes          +15
echo             (16) = HumTV            +16
echo             (17) = Masalaa TV       +17
echo             (18) = Zee Cinema       +18
echo             (19) = B4u Music        +19
echo             (20) = Zing             +20
echo             (21) = Zee TV           +21
echo             (22) = ETV US           +22
echo             (23) = Zoom TV          +23
echo             (24) = Al Jazeera Eng   +24
echo             (25) = 9xm Jalwa        +25
echo             (26) = Headlines Today  +26
echo             (27) = UTV US Movies    +27
echo             (28) = UTV Bindaas      +28
echo             (29) = UTV Bindaas      +29
echo             (30) = UTV Bindaas      +30
echo.
echo                     (O)  = Izlaz

if exist C:\Progra~1\VideoLAN\VLC (set "vlc=C:\Progra~1\VideoLAN\VLC\vlc") 
if exist C:\Progra~2\VideoLAN\VLC (set "vlc=C:\Progra~2\VideoLAN\VLC\vlc")
if exist C:\Program Files\VideoLAN\VLC (set "C:\Program Files\VideoLAN\VLC\vlc")
if exist D:\Program Files\VideoLAN\VLC (set "D:\Program Files\VideoLAN\VLC\vlc")
if exist C:\Program Files (x86)\VideoLAN\VLC (set "C:\Program Files (x86)\VideoLAN\VLC\vlc")
if exist C:\Program Files(x86)\VideoLAN\VLC (set "C:\Program Files(x86)\VideoLAN\VLC\vlc")
if exist C:\Program Files (x64)\VideoLAN\VLC (set "C:\Program Files (x64)\VideoLAN\VLC\vlc")
if exist C:\Program Files(x64)\VideoLAN\VLC (set "C:\Program Files(x64)\VideoLAN\VLC\vlc")

set /p "Choice=>"

IF "%Choice%"=="0" GOTO 0
IF "%Choice%"=="1" GOTO 1
IF "%Choice%"=="2" GOTO 2
IF "%Choice%"=="3" GOTO 3
IF "%Choice%"=="4" GOTO 4
IF "%Choice%"=="5" GOTO 5
IF "%Choice%"=="6" GOTO 6
IF "%Choice%"=="7" GOTO 7
IF "%Choice%"=="8" GOTO 8
IF "%Choice%"=="9" GOTO 9
IF "%Choice%"=="10" GOTO 10
IF "%Choice%"=="11" GOTO 11
IF "%Choice%"=="12" GOTO 12
IF "%Choice%"=="13" GOTO 13
IF "%Choice%"=="14" GOTO 14
IF "%Choice%"=="15" GOTO 15
IF "%Choice%"=="16" GOTO 16
IF "%Choice%"=="17" GOTO 17
IF "%Choice%"=="18" GOTO 18
IF "%Choice%"=="19" GOTO 19
IF "%Choice%"=="20" GOTO 20
IF "%Choice%"=="21" GOTO 21
IF "%Choice%"=="22" GOTO 22
IF "%Choice%"=="23" GOTO 23
IF "%Choice%"=="24" GOTO 24
IF "%Choice%"=="25" GOTO 25
IF "%Choice%"=="26" GOTO 26
IF "%Choice%"=="27" GOTO 27
IF "%Choice%"=="28" GOTO 28
IF "%Choice%"=="29" GOTO 29
IF "%Choice%"=="30" GOTO 30

echo.
echo Odaberi od 1 do 10...
echo.
ping localhost -n 3 >nul
goto VRH 
```

如果选择不包括所有情况，我认为不需要..

```
:0
cls
echo Al Jazeera Sports in VLC by D3n1s
ping localhost -n 3 >nul
exit /b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:11:28.020

使用您的选项卡按钮。还要检查更多和更少的实用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:12:39.790

假设您正在尝试分页（显示几行，然后在用户按下键时暂停，然后显示下一组等等），那么您可以在每个您希望它等待的地方插入**暂停。**然后系统将暂停并要求用户按任意键继续，当用户这样做时，它将继续。

例如：

```
echo             (1)  = Sahara Samay     +1
echo             (2)  = India TV         +2
echo             (3)  = NDTV Hindi       +3
echo             (4)  = Sahara Mumbai    +4
echo             (5)  = Times Now        +5
echo             (6)  = Saharah AP       +6
echo             (7)  = News X           +7
echo             (8)  = Punjabi          +8
echo             (9)  = Al Jazeera Sport +9
echo             (10) = Al Jazeera Sport +10
pause
echo             (11) = Aaj Tak          +11
echo             (12) = Headlines Today  +12
echo             (13) = UTV Bindaas      +13
echo             (14) = HumTV            +14
echo             (15) = M Tunes          +15
echo             (16) = HumTV            +16
echo             (17) = Masalaa TV       +17
echo             (18) = Zee Cinema       +18
echo             (19) = B4u Music        +19
echo             (20) = Zing             +20
pause 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T07:26:41.790

如果要在屏幕的同一行显示*两列*`echo`，则必须在命令中组合所需的输出（两列）。为此，您必须有办法将两列*分开；*一种常用的方法是使用 TAB 字符。要在 Win-XP 中获取 TAB 字符，您可以使用以下代码：

```
for /F "skip=4 delims=pR tokens=1,2" %%a in (
       'reg query hkcu\environment /v temp' ) do set TAB=%%b 
```

要以您想要的方式显示输出（“在第一列中显示 1 到 10，在第二列中显示 11 到 20”），您可以使用以下代码：

```
@echo off
setlocal EnableDelayedExpansion
rem Get TAB character
for /F "skip=4 delims=pR tokens=1,2" %%a in (
       'reg query hkcu\environment /v temp' ) do set TAB=%%b

rem Show the desired output
echo             (1)  = Sahara Samay     +1!TAB!(11) = Aaj Tak          +11
echo             (2)  = India TV         +2!TAB!(12) = Headlines Today  +12
echo             (3)  = NDTV Hindi       +3!TAB!(13) = UTV Bindaas      +13
echo             (4)  = Sahara Mumbai    +4!TAB!(14) = HumTV            +14
echo             (5)  = Times Now        +5!TAB!(15) = M Tunes          +15
echo             (6)  = Saharah AP       +6!TAB!(16) = HumTV            +16
echo             (7)  = News X           +7!TAB!(17) = Masalaa TV       +17
echo             (8)  = Punjabi          +8!TAB!(18) = Zee Cinema       +18
echo             (9)  = Al Jazeera Sport +9!TAB!(19) = B4u Music        +19
echo             (10) = Al Jazeera Sport +10!TAB!(20) = Zing             +20 
```

*但是，我强烈建议您在数组*中管理此类数据。有关更多详细信息，请参阅[此链接](https://stackoverflow.com/questions/10166386/arrays-linked-lists-and-other-data-structures-in-cmd-exe-batch-script/10167990#10167990)。

[您可以在这篇文章](http://www.dostips.com/forum/viewtopic.php?f=3&t=3968)中查看显示两列数据的高级批处理程序

我希望它有帮助...

安东尼奥

# ios - 在情节提要中为 UIPopoverController 设计一个视图

> ID：13654472
> 
> 赞同：-1
> 
> 时间：2012-11-30T23:05:46.490
> 
> 标签：ios, xcode, ipad, popover

我是否可以为我将在 iPad 应用程序中使用的 UIPopoverController 设计一个新视图（以非标准尺寸，例如 300x300）并在主情节提要上进行设计？

我看不到任何自定义我在情节提要上创建的视图的方法。新的 ViewController 始终是 iPad 的全尺寸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T23:16:27.747

在属性检查器中，您可以将控制器的尺寸度量从“推断”更改为“自由形式”，然后单击视图并将其在尺寸检查器中的尺寸更改为您想要的。

# c# - 使用 Autofac 尝试在 WCF 中运行异步任务时释放的依赖项

> ID：13654482
> 
> 赞同：1
> 
> 时间：2012-11-30T23:06:19.227
> 
> 标签：c#, wcf, asynchronous, autofac, .net-4.5

我目前正在使用 WCF 服务，该服务应该生成一个新任务以在服务器上异步运行（需要进行数据库查询等）。有可能（并且很可能）在新任务完成保证客户端关闭之前将响应发送回客户端。此时，在创建任务期间可用的依赖项将不再可用。为了完成任务，我仍然需要一些依赖项。

我将如何确保新任务所需的依赖项仍然存在？

我包含了一些非常愚蠢的代码来给出一个基本的例子。

```
public string SubmitData(
            User user, Request request)
        {
            History history = m_history.CreateRequest(user);

            //New task which will do an import of data into the DB.
           Task.Factory.StartNew( () => 
               Import( user, request, history ) ); 

           /*Return some sort of response back to user so they're not waiting for 
           *the long process to complete           
           */
           return "Response";
        }

        private void Import(
            User user,
            Request request,
            History history)
        {
            var response = Import(
                user, request, history);
            m_history.Save(history, response );
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:12:39.017

您需要自己负责处理依赖项。由于您使用的是 autofac，因此可能会使用最简单的解决方案`Owned<T>`

请参阅文档：[拥有的实例](http://code.google.com/p/autofac/wiki/OwnedInstances)

`Owned<T>`尽管有很多可能性，但我大致会考虑使用您的代码：

```
 private Func<Owned<Importer>> importerFactory = //Constructor Injected.

    public string SubmitData(
        User user, Request request)
    {
        History history = m_history.CreateRequest(user);

        //New task which will do an import of data into the DB.
        Task.Factory.StartNew(() =>
            {
                using (var importer = importerFactory())
                {
                    importer.Value.Import(user, request, history);
                }
            });

        /*Return some sort of response back to user so they're not waiting for 
       *the long process to complete           
       */
        return "Response";
    }

    public class Importer
    {
        //m_history ...

        public void Import(
            User user,
            Request request,
            History history)
        {
            var response = Import(user, request, history);
            m_history.Save(history, response);
        }
    } 
```

从你的问题来看。您可能会受益于一些关于 Autofac、生命周期和确定性处置的额外阅读。

[实例范围](http://code.google.com/p/autofac/wiki/InstanceScope)

[终身入门](http://nblumhardt.com/2011/01/an-autofac-lifetime-primer/)

[确定性处置](http://code.google.com/p/autofac/wiki/DeterministicDisposal)

一旦您更深入地了解 autofac 的工作原理，您就会意识到您的问题实际上更普遍。即，如何确保正确处理任务中使用的共享对象。在我上面的代码中，我通过不共享对象和处理任务来解决问题。

# java - 设置有可嵌入的、可为空的属性

> ID：13654483
> 
> 赞同：1
> 
> 时间：2012-11-30T23:06:27.540
> 
> 标签：java, hibernate, annotations, set, embeddable

我有`Set<Reference>`像这样映射的可嵌入类。

```
@ElementCollection
@ForeignKey(name = "fk_object_org_ref")
@CollectionTable(name = "m_object_org_ref", joinColumns = {
    @JoinColumn(name = "object_oid", referencedColumnName = "oid"),
    @JoinColumn(name = "object_id", referencedColumnName = "id") })
@Cascade({ org.hibernate.annotations.CascadeType.ALL })
public Set<Reference> getParentOrgRef() {
    return parentOrgRef;
} 
```

参考映射如下：

```
@Embeddable
public class Reference implements Serializable {

    @Column(length = 36, insertable = true, updatable = true, nullable = true)
    public String getTargetOid() {
        return targetOid;
    }

    @Lob
    @Type(type = "org.hibernate.type.TextType")
    public String getDescription() {
        return description;
    }

    @Enumerated(EnumType.ORDINAL)
    public RContainerType getType() {
        return type;
    }

    @Lob
    @Type(type = "org.hibernate.type.TextType")
    public String getFilter() {
        return filter;
    }
    ...other methods/fields...
} 
```

当我尝试合并父实体（例如，我从集合中删除一个引用）时，hibernate 在合并期间将此 sql 生成为准备好的语句...

```
delete from reference where object_id=? and object_oid=? and description=? and filter=? and localPart=? and namespace=? and targetOid=? and type=? 
```

但是如果例如描述是`NULL`那么这个删除失败，更确切地说它不会删除记录，因为 where 子句不好（`description=null`正确的方法是`description is null`）。那么我怎么能告诉hiberate它应该创建“更好”的sql删除呢？

它仅在所有字段都具有非空值时才有效。

# javascript - IE：通过DOM元素属性绑定处理程序时触发onproperty更改

> ID：13654485
> 
> 赞同：2
> 
> 时间：2012-11-30T23:06:33.910
> 
> 标签：javascript, internet-explorer

这个问题是出于好奇。我正在开发一个插件，并在为其创建演示页面时遇到了这个问题。

我有`div`如下元素，

```
<div id="test">Test</div> 
```

和如下所示的处理函数，

```
function onPropChange () {
    alert('Property changed for ' + window.event.srcElement.nodeName + 
          ' event ' +  window.event.type);

} 
```

现在尝试像下面那样绑定处理程序，

```
document.getElementById('test').onpropertychange = onPropChange; 
```

在绑定时，这会触发“propertychange”事件，从而执行处理程序。

**演示：http:** [//jsfiddle.net/EEGcz/4/](http://jsfiddle.net/EEGcz/4/)

有谁知道为什么？**我正在使用 IE8**

同样适用于 attachEvent - [http://jsfiddle.net/maeRg/](http://jsfiddle.net/maeRg/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:38:49.707

查看 event.propertyName，您可以看到您的 className 是第二个示例中更改的属性，但第一个示例通过使用 test.onpropertychange 而不是 attachEvent 附加到它的行为来触发事件。所以在第一个例子中，propertyName 是“onpropertychange”。

试试这个修改，看看第一种类型的事件绑定实际上是如何触发事件本身的。

```
var i = 1;
function onPropertyChange() {
    alert('Property changed called ' + i++ + ' for ' + (window.event.propertyName));
    }
var test =  document.getElementById('test');
// play with commenting and uncommenting out the following two lines
//test.onpropertychange = onPropertyChange;
test.attachEvent("onpropertychange", onPropertyChange);

test.className = 'test2'; 
```

# javascript - 类型错误：document.getElementById() 为空

> ID：13654487
> 
> 赞同：0
> 
> 时间：2012-11-30T23:06:40.857
> 
> 标签：javascript, html, function

当我的一个功能被称为“switchTurn”时，我正在尝试更改图像的来源，但是它不起作用并且萤火虫一直说这是因为：

```
TypeError: document.getElementById("turns") is null

document.getElementById('turns').src = x; 
```

我不明白，我可以更改所有图像的来源，除了带有“turns”ID 的图像。谁能帮我解决这个问题？

HTML

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<head>
    <link rel="stylesheet" type="text/css" href="default.css" />
    <script language="Javascript" src="default.js" ></script>
</head>
<body onload="DisplayPlayed()" onmousedown="return false">
    <div id="wrapper" onmousedown="return false">
        <div id="Bcards" onmousedown="return false">
            <img src="turnedcard.png" id="Bcard01"/>
            <img src="turnedcard.png" id="Bcard02"/>
            <img src="turnedcard.png" id="Bcard03"/>
            <img src="turnedcard.png" id="Bcard04"/>
            <img src="invisiblecard.png" id="Bcard05"/>
            <img src="invisiblecard.png" id="Bcard06"/>
            <img src="invisiblecard.png" id="Bcard07"/>
        </div>
        <div id="Pcards">
            <img src="turnedcard.png" id="Pcard01"/>
            <img src="turnedcard.png" id="Pcard02"/>
            <img src="turnedcard.png" id="Pcard03"/>
            <img src="turnedcard.png" id="Pcard04"/>
            <img src="invisiblecard.png" id="Pcard05"/>
            <img src="invisiblecard.png" id="Pcard06"/>
            <img src="invisiblecard.png" id="Pcard07"/>
        </div>
            <img src="turnedcard.png" id="PlayedCards" onmousedown="return false"/>

            <img src="Down.png" id="turns" onmousedown="return false"/>
            <img src="Down.png" id="turns" onmousedown="return false"/>
    </div>
</body>
</html> 
```

JavaScript

```
var Deck = [];
generateDeck();
var Numbers = [], Drew = 0, turn = false;
generateNumber();

function generateNumber(){
    do{
        Numbers[Drew] = Math.floor(Math.random() * 55);
    }while(Deck[Numbers[Drew]] === "|");
    Drew++;
    Numbers[Drew - 1] = 44;
    if(Numbers[Drew - 1] === 44 || Numbers[Drew - 1] === 45 || Numbers[Drew - 1] === 46 || Numbers[Drew - 1] === 47){
        switchTurn();
    }
}

function generateDeck(){
    for(i = 0; i < 56; i++){
        Deck[i] = i.toString();
    }
}

function discard(){
    Deck[Numbers[Drew]] = "|";
}

function switchTurn(){
    if(turn === true){
        arrowTurn("Up.png");
        turn = false;
    }else if(turn === false){
        arrowTurn("Down.png");
        turn = true;
    }
}

function arrowTurn(x){
    document.getElementById('turns').src = x;
}

function DisplayPlayed(){
    document.getElementById("PlayedCards").src = Deck[Numbers[Drew - 1]] + ".png";
    discard();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T23:08:26.827

您的 JavaScript 文件包含在标记中的元素*上方。*`<body>`要解决这个问题，要么将脚本标签移动到其内部元素下的主体中，要么使用`window.onload`DOM-ready 方法的任何变体。

# python - 如何在 Python 中使用 scrypt 为密码和盐生成哈希

> ID：13654492
> 
> 赞同：10
> 
> 时间：2012-11-30T23:06:56.260
> 
> 标签：python, password-encryption, scrypt

我想使用 scrypt 为我的用户密码和盐创建一个哈希。我找到[了两个](http://aleccolocco.blogspot.com/2011/09/how-to-protect-passwords-with-python.html) [参考资料](http://kevinryan.me/using-scrypt-in-python-and-postgresql/)，但有些事情我不明白。

他们使用 scrypt 加密和解密功能。一个加密一个随机字符串，另一个加密盐（这看起来是错误的，因为只有密码而不是盐用于解密）。看起来解密功能正在用于验证密码/盐作为解密的副作用。

根据我的了解，我想要的是密钥派生函数（KDF）而不是加密/解密，并且 KDF 可能由 scrypt 生成并用于加密/解密。实际的 KDF 在幕后使用，我担心盲目地遵循这些示例会导致错误。如果使用 scrypt 加密/解密函数来生成和验证密码，我不明白被加密字符串的作用。它的内容或长度重要吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T20:17:21.693

你是对的 - 这两个链接正在使用的 scrypt 函数是 scrypt 文件加密实用程序，而不是底层的 kdf。我一直在慢慢地为 python 创建一个独立的基于 scrypt 的密码哈希，我自己也遇到了这个问题。

scrypt 文件实用程序执行以下操作：选择特定于您的系统的 scrypt 的 n/r/p 参数和“最小时间”参数。然后它生成一个 32 字节的盐，然后调用`scrypt(n,r,p,salt,pwd)`创建一个 64 字节的密钥。该工具返回的二进制字符串由以下部分组成： 1) 包含 n、r、p 值和二进制编码的 salt 的标头；2) 标头的 sha256 校验和；3) 校验和的 hmac-sha256 签名副本，使用密钥的前 32 个字节。之后，它使用密钥的剩余 32 个字节对输入数据进行 AES 加密。

我可以看到这有几个含义：

1.  输入数据是没有意义的，因为它实际上并不影响正在使用的盐，并且 encrypt() 每次都会生成一个新的盐。

2.  您不能手动配置 n,r,p 工作负载，或者除了笨拙的 min-time 参数之外的任何其他方式。这不是不安全的，而是控制工作因素的一种相当尴尬的方式。

3.  在解密调用重新生成密钥并将其与 hmac 进行比较之后，如果您的密码错误，它将拒绝那里的所有内容 - 但如果它是正确的，它*还将*继续解密数据包。这是攻击者不必执行的大量额外工作——他们甚至不必导出 64 个字节，只需检查签名所需的 32 个字节。这个问题并没有使它完全*不安全*，但是做你的攻击者没有做的工作永远是不可取的。

4.  无法配置盐键、派生键大小等。当前值还不错，但仍然不理想。

5.  解密实用程序的“最大时间”限制对于密码散列是错误的 - 每次调用解密时，它都会估计系统的速度，并就是否可以在最大时间内计算密钥进行一些“猜测” - 这会*增加*攻击者的开销不必这样做（请参阅＃3），但这也意味着解密可能会在系统负载较重的情况下开始拒绝密码。

6.  我不确定*为什么*Colin Percival 没有将 kdf 和参数选择代码作为公共 api 的一部分，但实际上它在源代码中明确标记为“私有”——甚至没有导出用于链接。这让我犹豫是否直接访问它而不进行更多研究。

总而言之，需要一种可以存储 scrypt 的良好哈希格式，以及公开底层 kdf 和参数选择算法的实现。我目前正在为[passlib](http://pypi.python.org/pypi/passlib)自己做这件事，但它并没有引起太多关注:(

*不过，最重要的是——那些网站的说明是“好的”，我只是使用一个空字符串作为文件内容，并注意额外的开销和问题。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-26T14:26:18.510

这两个参考都完全错误。不要搞砸`encrypt`and `decrypt`：只需使用`hash`

KDF 没有直接暴露，但`hash`足够接近。（事实上​​，在我看来更好，因为它混合了 PBKDF2 三明治的馅料。）

[此示例代码](https://gist.github.com/anonymous/6714578)适用于 python2.7 和 python3.2。它使用 PyCrypto、passlib 和 py-scrypt，但只*需要*py-scrypt。

您将需要使用恒定时间比较功能，例如`passlib.utils.consteq`减轻定时攻击。

您还需要仔细选择参数。默认值 logN=14,r=8,p=1 表示使用 16 MiB 内存进行 1 个“回合”。在服务器上，您可能需要更像 10、8、8 的东西——更少的 RAM，更多的 CPU。*您*应该在*您的*硬件上按预期负载计时。

# c# - 计算对数基数 2

> ID：13654499
> 
> 赞同：22
> 
> 时间：2012-11-30T23:07:31.587
> 
> 标签：c#, c#-4.0

让我们有以下代码

```
(float)Math.Log(3.83031869) 
```

我得到的输出是

```
1.342948 
```

但是当我使用许多在线计算器计算相同数字的 Log2 时，我得到了

```
 1.93746 
```

请问有什么插图吗？提前致谢。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-30T23:11:34.110

[`Math.Log(num)`](http://msdn.microsoft.com/en-us/library/x80ywz41%28v=vs.110%29.aspx)返回基数 e 的对数

[`Math.Log(num, base)`](http://msdn.microsoft.com/en-us/library/hd50b6h5(v=vs.110).aspx)可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T23:18:16.453

仅使用单个参数调用 Log 方法时，您将获得 Log 基数 e。如果你提供 2.0 的第二个参数，你会得到你期望的结果：

```
//Testing in LinqPad
void Main()
{
    Math.Log(3.83031869).Dump();
    Math.Log(3.83031869, 2.0).Dump();
} 
```

结果

```
1.34294800860817
1.93746443219072 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-30T23:11:23.053

可以在 MSDN [http://msdn.microsoft.com/en-us/library/x80ywz41.aspx中看到](http://msdn.microsoft.com/en-us/library/x80ywz41.aspx)

该`Math.Log`函数使用 base 计算对数`e`。

请参阅[http://msdn.microsoft.com/en-us/library/hd50b6h5.aspx](http://msdn.microsoft.com/en-us/library/hd50b6h5.aspx)了解您的需要。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-06T10:34:53.607

对于整数值：

```
 public static int Log2(UInt64 value) {
        int i;
        for (i = -1; value != 0; i++)
            value >>= 1;

        return (i == -1) ? 0 : i;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-20T12:21:27.137

C#有一个函数可以为你计算以2为底的log，看下面的代码：

整数；

双 logBase2 = Math.Log2(number);

如果要将数字四舍五入为 2 或 3 或逗号后的任何数字，可以使用以下代码：

double logBase2 = Math.Round(Math.Log2(number), 2);//逗号后2位

# c - 迭代打印反向链表

> ID：13654500
> 
> 赞同：6
> 
> 时间：2012-11-30T23:07:36.623
> 
> 标签：c, linked-list, nodes, iteration

我目前正在编写一个程序，该程序具有反向打印链表的功能。

我需要使用迭代方法打印此代码打印的相反内容。

编辑：它是一个单链表。

提前致谢。

```
void print_backward_iteration(NODE *ptr) {
    NODE *last, *current;

    last = NULL;

    printf("\n");

    while (ptr != last) {
        current = ptr;

        while (current -> next != last) {
            current= current -> next;
        }

        printf("%d  ", current -> data);
        last = current;
    }

    printf("\n");

} 
```

这是我的完整代码：

```
#include <stdio.h>
#include <stdlib.h>

/* declaration of structure */
typedef struct node {
    int data;
    struct node *next;
} NODE;

/* declaration of functions */
NODE* insert_node(NODE *ptr, NODE *new);
NODE* find_node(NODE *ptr, int n);
NODE* delete_node(NODE *ptr, int n, int *success_flag_ptr);
void print_backward_iteration(NODE *ptr);
void print_backward_recursion(NODE *ptr);

int main(int argc, char *argv[]) {
    int choice, x, flag_success;
    NODE *ptr, *new, *result;

    ptr = NULL;

    do {
        printf("\n1.\tInsert Integer into linked list\n");
        printf("2.\tFind integer in linked list\n");
        printf("3.\tDelete integer from linked list\n");
        printf("4.\tPrint out integers backward using the iterative strategy\n");
        printf("5.\tPrint out integers backward using the recursive strategy\n");
        printf("6.\tQuit\n");
        printf("\nEnter 1,2,3,4,5, or 6: ");
        scanf("%d", &choice);

        switch(choice) {
        case 1:
            printf("\nPlease enter an integer: ");
            scanf("%d", &x);
            new = (NODE *)malloc(sizeof(NODE));
            new->data = x;
            ptr = insert_node(ptr, new);
            printf("\nNode Inserted with value of %d.\n", ptr->data);
            break;

        case 2:
            printf("\nPlease enter an integer: ");
            scanf("%d", &x);
            result = find_node(ptr, x);

            if (result == NULL) {
                printf("\nValue could not be found.\n");
            } else {
                printf("\nValue %d was found.\n", x);
            }
            break;

        case 3:
            printf("\nPlease enter an integer: ");
            scanf("%d", &x);
            ptr = delete_node(ptr, x, &flag_success);

            if (result == NULL) {
                printf("\nValue could not be found.\n");
            } else {
                printf("\nValue %d was deleted.\n", x);
            }
            break;

        case 4:
            print_backward_iteration(ptr);
            break;

        case 5:
            printf("\n");
            print_backward_recursion(ptr);
            printf("\n");
            break;

        case 6:
            printf("\nThank you for using this program.\n");
            break;

        default:
            printf("\nInvalid Choice. Please try again.\n");
            break;
        }
    }
    while (choice != 6);

    printf("\n*** End of Program ***\n");
    return 0;
}

/* definition of function insert_node */
NODE* insert_node(NODE *ptr, NODE *new) {
    new -> next = ptr;
    return new;
}

/* definition of function find_node */
NODE* find_node(NODE *ptr, int n) {
    while (ptr != NULL) {
        if (ptr->data == n) {
            return ptr;
        } else {
            ptr = ptr->next;
        }
    }

    return NULL;
}

/* definition of function delete_node */
NODE* delete_node(NODE *ptr, int n, int *success_flag_ptr) {
    NODE *temp = NULL;

    if (ptr == NULL) {
        *success_flag_ptr = 0;
        return NULL;
    }

    if (ptr -> data == n) {     
        temp = ptr->next;  
        free(ptr);         
        *success_flag_ptr = 1;
        return temp;
    } else
        ptr->next = delete_node(ptr->next,n,success_flag_ptr); 

    return ptr;
}

/* definition of function print_backward_iteration */
void print_backward_iteration(NODE *ptr) {
    NODE *last, *current;

    last = NULL;

    printf("\n");

    while (ptr != last) {
        current = ptr;

        while (current != last) {
            current =  current -> next;
        }

        printf("%d  ", current -> data);
        last = current -> next;
    }

    printf("\n");
}

/* definition of function print_backward_recursion */
void print_backward_recursion(NODE *ptr) {
    NODE *last, *current;

    last = NULL;

    while (ptr != last) {
        current = ptr;
        printf("%d  ", current -> data);
        print_backward_recursion(current -> next);
        last = current;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T23:27:21.520

**更新**-我将下面的代码保留在希望使用所提供的任何方法实际反向打印链接列表无递归的人可能会从中获得*某种*用途。与此同时，OP的**真正**问题是：

> “我如何打印一个从头到尾的链表？”

谁看到了*它*的到来？反正，

```
void print_node_list(const NODE* p)
{
    printf("\n");
    for (;p;printf("%d ",p->data),p=p->next);
    printf("\n");
} 
```

是的，就是这么简单。

* * *

**现在几乎一文不值的反向打印讨论**

符合您对这是一个**迭代**解决方案的要求，更重要的是，*假设您的列表顺序在此操作完成后**保持不变***，您可以：

1.  在迭代中管理节点指针堆栈，在单次遍历列表时推送指针，然后从堆栈中弹出指针以打印反向。需要两次通过（一次通过列表，一次通过堆栈）。管理这样的堆栈有多种选择；下面介绍两个。

2.  执行简单的反转/打印/反转。需要 3 次通过（1 次用于反转，1 次用于打印，1 次用于撤消反转）。

前者提供了以管理堆栈所需的空间为代价保持列表不变（不进行节点反转）的优势。后者的好处是没有额外的空间要求，但代价是列表上的三遍，并且要求允许修改列表，尽管是暂时的。

你选择哪一个取决于你。

**本地堆栈实现**：（2 遍，2*N*sizeof(pointer) 空间）

```
void print_reverse_node_list(const NODE* head)
{
    struct stnode
    {
        struct stnode* next;
        const NODE* node;
    } *st = NULL;

    while (head)
    {
        struct stnode* p = malloc(sizeof(*p));
        if (p)
        {
            p->next = st;
            p->node = head;
            st = p;
            head = head->next;
        }
        else
        {
            perror("Could not allocate space for reverse-print.");
            exit(EXIT_FAILURE);
        }
    }

    // walks stack, popping off nodes and printing them.
    printf("\n");
    while (st)
    {
        struct stnode* p = st;
        st = st->next;
        printf("%d ", p->node->data);
        free(p);
    }
    printf("\n");
} 
```

**另一个本地堆栈实现**（2 遍，N*sizeof(pointer) 空间）

```
void print_reverse_node_list(const NODE* head)
{
    NODE const **ar = NULL;
    size_t i=0;
    while (head)
    {
        // reallocate pointer array
        NODE const **tmp = realloc(ar, ++i * sizeof(*tmp));
        if (tmp)
        {
            ar = tmp;           // remember new array
            ar[i-1] = head;     // last index gets the ptr
            head = head->next;  // advance to next node
        }
        else
        {
            perror("Could not allocate space for reverse-print.");
            exit(EXIT_FAILURE);
        }
    }

    // print nodes from [i-1] to [0]
    printf("\n");
    for (; i!=0; printf("%d ", ar[--i]->data));
    printf("\n");
    // don't forget to release the block (NULL is ok)
    free(ar);
} 
```

**反向/打印/反向实现**：（3遍，没有额外的空间）

```
// print a node list.
void print_node_list(const NODE* p)
{
    printf("\n");
    for (;p;printf("%d ",p->data),p=p->next);
    printf("\n");
}

// reverses a linked list in-place.
void reverse_node_list(NODE **headp)
{
    if (!headp || !*headp)
        return;

    NODE *ptr = *headp, *next = NULL, *prev = NULL;
    while (ptr)
    {
        next = ptr->next;      // remember next node (1)
        ptr->next = prev;      // wire next to prev
        prev = ptr;            // set prev to current
        ptr = next;            // move to remembered next (see 1)
    }

    *headp = prev;
}

void print_reverse_node_list(NODE* head)
{
    reverse_node_list(&head);
    print_node_list(head);
    reverse_node_list(&head);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T04:46:01.947

```
void print_Linked_List_iteration(NODE *ptr)
{

  printf("\n");

  while (ptr != NULL)
  {

      printf("%d  ", ptr->data);
      ptr = ptr->next;
  }

  printf("\n");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T23:14:18.477

答案取决于列表的性质：

*   如果这是一个双向链表，只需反向迭代。

*   如果这是一个单链表，您将不得不自己维护一个堆栈，基本上做递归解决方案会做的事情，但要迭代。这基本上与制作列表的反向副本（这可以迭代地完成）并打印副本相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T09:13:13.303

```
 void PrintBackwards (node * head)
     {
       if(head)
        {
          PrintBackwards(head->next);
          printf("%d",head->data);
        }
       return;
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T00:20:04.100

丑陋的做法，滥用函数调用堆栈：

```
void print_reverse_iteration(NODE *ptr)
{
    if (ptr != NULL) 
    {
        print_reverse_iteration( ptr->next);
        printf( "%d  ", ptr->data);
    }
}

print_reverse_iteration( head);
puts( ""); 
```

仅适用于不会溢出堆栈的短列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T23:24:19.267

我假设该列表是单独链接的，否则问题将是微不足道的。我会以相反的顺序制作一份清单，然后打印出来。基本上;

```
 void print_reverse_iteration(NODE *ptr)
 {
        NODE *previous = head;
        NODE *current = head;
        bool trailing = false; //used to ensure we're on head->next before we begin moving prev
        last = NULL;

        printf("\n");

        while (current->next != NULL)
        {
               current->next = previous;
               if (trailing)
                   previous = previous->next;
               else
               {
                   trailing = true;
                   current->next = NULL; // this is now the end of the list so we need to set it's next pointer to null to ensure we halt in other methods that rely on node->next == NULL
                }
               current = current->next
         }

         //the list is now in reverse order. print it with your regular print method.
         normalPrint(current);
        // current is the head of this temporary list so pass it current.    

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-25T04:35:09.513

使用堆栈的 Java 解决方案：

```
public void printReverseUsingStack(Node head){

    if(head == null){
        return;
    }
    Node current = head;
    Stack<Integer> s = new Stack<Integer>();

    while(current != null){
        s.push(current.data);
        current = current.next;
    }
    while(!s.isEmpty()){
        System.out.print(s.pop() + " -> ");
    }
} 
```

# php - PHP登录 - 结束重定向循环

> ID：13654508
> 
> 赞同：0
> 
> 时间：2012-11-30T23:07:54.253
> 
> 标签：php

我真的不太了解php，所以我的朋友帮我制作了登录页面。但是，如果登录信息正确，我最终会进入重定向循环。

这是我的代码：

> index.php - 页面

```
<?php
     if (!$_SESSION['ajslkajslkgjals'])
     header('Location: login.php');
?> 
```

> login.php - 页面

```
<?php

session_start();
require_once('config.php');

$query   = "SELECT * FROM admins";
$result  =  mysql_query($query);
$num     =  mysql_numrows($result);

mysql_close();

$i = 0;

while ($i < $num) {
    $admin_user = mysql_result($result, $i, "admin_username");
    $admin_pass = mysql_result($result, $i, "admin_password");
    $i++;
}

if(isset($_POST['login-form'])) {
    $admin_username = $_POST['username'];
    $admin_password = $_POST['password'];

    if($admin_username==$admin_user && $admin_password==$admin_pass) {
        $_SESSION['ajslkajslkgjals'] = $admin_user;
        header('Location: index.php');
        exit();

    } else {
        $status = "<script>
                    $.ajax({ 
                        url: '/',
                        data: {action: 'test'},
                        type: 'post',
                        success: function() {
                            notifyBox();
                        }
                    });
                   </script>";

    }
}

if(isset($_SESSION['ajslkajslkgjals'])) {
    header('Location: index.php');
    exit();
}
?> 
```

如果有人能给我一些关于我犯错的提示，我将不胜感激？我就是不明白！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:10:11.243

在 login.php 的末尾，您有一个指向 index.php 的重定向。在索引中，您不会启动会话，以便始终执行重定向。

# css - 为动态内容自动调整 div 的大小

> ID：13654509
> 
> 赞同：1
> 
> 时间：2012-11-30T23:07:56.170
> 
> 标签：css

我希望有人可以帮助我解决 CSS 问题。我正在使用 JavaScript 向工作正常的表中添加额外的行，但是当我添加新行时我的页面没有展开，这意味着内容在从页面上消失时变得不可见。

这是我的网页的简化版本：

```
<div class="wrapper" >
  <section id="main" class="column">
     Expanding table code here.
  </section>
</div> 
```

我还有以下 CSS：

```
.wrapper {
width:1200px; 
overflow:hidden; 
margin:0 auto; 
border:1px solid #999;
border-bottom:2px solid #999;
}

section#main {
width: 77%;
min-height: 500px;
float: left;
margin-top: -2px;
} 
```

我试过添加溢出：隐藏；到主要部分的 CSS，因为我认为这可能有效，但它没有。如果我删除主要部分，那么它工作正常，但我需要这个，因为我的包装 div 中有其他内容。

任何帮助将不胜感激，因为这让我发疯！！！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:15:48.230

*[编辑：在评论中向我指出，OP 已经在使用浮动清除方法。在这里留下我的答案，以防万一它可以帮助有类似问题但没有清除 css 的人。]*

这是因为你在漂浮`section#main`。浮动区域在它们之后需要一个清除 div（或浮动清除 css），因为它们本身实际上并不占用垂直空间。你可以这样做：

```
<div class="wrapper" >
  <section id="main" class="column">
     Expanding table code here.
  </section>
  <div style="clear: both;"></div>
</div> 
```

这`<div style="clear: both;"></div>`是执行此操作的传统方法，但您可能需要考虑此处描述的新方法：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

# php - 在 PHP 中添加日期的错误结果

> ID：13654513
> 
> 赞同：0
> 
> 时间：2012-11-30T23:08:24.450
> 
> 标签：php

嗨，我在将当前日期添加一周时遇到问题，所以当我这样做时：

```
 $date = date('Y-m-d');

 $OneWeek = strtotime(date("Y-m-d", strtotime($date)) . "+1 week");

 var_dump($OneWeek); 
```

所以我得到类似的东西：

```
 1354230000 
```

但我希望有这样的结果

```
2012/11/30 + 1 week =>   2012/12/07 
```

我不知道怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:12:10.237

使用它并学习这些功能..

[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)
[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

```
echo date("Y-m-d", strtotime($date . " +1 week")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:12:21.233

[strtotime](http://www.php.net/manual/en/function.strtotime.php) () 返回一个时间戳——一个整数。您只需将其转换为日期：

```
echo date('Y-m-d', strtotime('+1 week')); // 2012-12-07 
```

此外，您不需要当前时间戳，strtotime 在使用相对时间定义时使用当前时间（如“下周四”或“+1 周”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:22:37.817

strtotime() 返回一个 Unix 时间戳， date() 一个格式化的日期。

做你想做的事：

```
$date = strtotime('today'); 
echo date("Y-m-d", strtotime($date . " +1 week")); // '2012-12-07' 
```

请注意“+1 周”中的空格。

它使这两者之间有所不同：

```
strtotime("2012-01-01" . "+1 week") // strtotime("2012-01-01+1 week")
strtotime("2012-01-01" . " +1 week") // strtotime("2012-01-01 +1 week") 
```

# objective-c - 日期差异：currentCalendar 与 gregorianCalendar

> ID：13654515
> 
> 赞同：0
> 
> 时间：2012-11-30T23:08:29.543
> 
> 标签：objective-c, nsdatecomponents

```
NSDateComponents *components;
components = [[NSCalendar currentCalendar] components: NSDayCalendarUnit
                                             fromDate: startDate 
                                               toDate: endDate options: 0];
days = [components day]; 
```

该代码似乎在计算日期之间的确切差异时产生了一些问题：有可能吗？？？

我正在考虑改用公历……怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:43:30.367

首先，`components:fromDate:toDate`返回两个日期之间的*差值。*因此，从 2010 年 10 月 1 日到 2010 年 12 月 31 日的差异预计为 91 天，并且您必须*添加一天*以包括开始日期和结束日期。

**问题是**：为什么函数返回 90 天而不是 91？

问题在于日历使用的时区，因此也是日期组件使用的时区。默认情况下，使用本地时区。例如，让我们假设当地时区是“欧洲/柏林”。

那么开始日期是本地时区的“2010-10-01 02:00:00”，因为夏令时在 10 月初有效，结束日期是 2010-12-31 01:00:00在当地时区，因为夏令时在 12 月不活动。这两个日期之间的差异是 90 天和 23 小时，而不是 91 天！

要解决此问题，您可以

*   根据您当地的时区创建开始和结束日期，或
*   将时区设置为“GMT”以进行差异计算。

第二种解决方案的示例：

```
// Create start and end date as in your example:
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSDate *startDate = [dateFormatter dateFromString:@"2010-10-01"];
NSDate *endDate = [dateFormatter dateFromString:@"2010-12-31"];
NSLog(@"start=%@", startDate);
NSLog(@"end  =%@", endDate);
// Output:
// start=2010-10-01 00:00:00 +0000
// end  =2010-12-31 00:00:00 +0000

// Compute difference according to GMT:
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
NSDateComponents *components;
components = [gregorian components: NSDayCalendarUnit
                          fromDate: startDate
                            toDate: endDate
                           options: 0];
int days = [components day];
// --> days = 91 
```

# python - Django Admin 忽略 CharField max_length

> ID：13654516
> 
> 赞同：2
> 
> 时间：2012-11-30T23:08:36.457
> 
> 标签：python, django, django-admin

我有一个包含多个 CharField 和 SlugField 实例的模型，例如：

```
slug = models.SlugField(max_length=255, db_index=True, blank=False, null=False) 
```

但是当我在管理员中查看该字段时，它呈现为：

```
<input name="slug" value="some-arbitrary-value-much-longer-than-10-characters" maxlength="10" type="text" id="id_slug" size="200" /> 
```

并尝试编辑或保存触发 Django Admin 的内置 JS 表单字段验证，通知我只允许 10 个字符。

我在 admin.py 中做的唯一“奇怪”的事情是我使用 formfield_overrides 声明来增加所有 CharField 和 SlugFields 的长度，因为默认情况下它们很短。

所以我的 ModelAdmin 看起来像：

```
class MyAdmin(admin.ModelAdmin):

    formfield_overrides = {
        models.CharField:{
            'widget': TextInput(attrs={'size':'200',})
        },
    } 
```

如果我注释掉该行`'widget': TextInput(attrs={'size':'200',})`，问题就会消失。为什么是这样？

如何解决这个问题，同时增加ModelAdmin 中*所有*Char/SlugFields 的显示长度？

# java - 将 VTK 文件带到网络上？

> ID：13654520
> 
> 赞同：3
> 
> 时间：2012-11-30T23:09:00.603
> 
> 标签：java, jakarta-ee, vtk

有谁知道我如何将 VTK 文件（3D 渲染图形）带入网络/浏览器？支持拖放和缩放？也许已经有一个我没有找到的现有库？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:15:39.480

我没有机会深入研究它，它可能不是你想要的，但我在查找一些可视化技术时遇到了这个问题。

我相信这可能会满足您的需求，尽管我没有查看 API 以及您将如何实施它，但它看起来确实有很好的文档记录。

链接到[ParaViewWeb](http://www.paraview.org/Wiki/ParaViewWeb)

[演示](http://paraviewweb.kitware.com/PWStates/run.jsp?id=1)链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:11:55.827

您可以查看 XTK：[https](https://github.com/xtk/X#readme) ://github.com/xtk/X#readme - 我自己没有使用它，但它看起来不错。

# javascript - 使用各种尺寸的瓷砖填充区域最大间距

> ID：13654521
> 
> 赞同：-2
> 
> 时间：2012-11-30T23:09:00.963
> 
> 标签：javascript

如何将不同尺寸的瓷砖填充到使用最大空间的特定区域。瓷砖顺序并不重要。

我有像[http://vps.infira.ee/temp/before.html](http://vps.infira.ee/temp/before.html) 这样的[图块](http://vps.infira.ee/temp/after.html)

我想在javascript中使用这个算法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:13:33.130

您可能想查看 jQuery Masonry 插件 - [http://masonry.desandro.com/](http://masonry.desandro.com/)

# knockout.js - Knockout JS 淘汰验证插件

> ID：13654524
> 
> 赞同：2
> 
> 时间：2012-11-30T23:09:33.707
> 
> 标签：knockout.js

我有一个带有选择属性的 viewModel。该属性放置在一个`ko.validatedObservable({})`. 我将不同的视图与不同的`ko.validatedObservable()`部分分开。我的输入验证正常，除了选择是从页面加载验证，即使`init()`我有`messagesOnModified: true`（因为我不想在第一次加载页面时显示错误消息）。第一个选项有`value=""`. 我检查了标记并`data-orig-title="REQUIRED"`设置了，而其他输入控件将此属性设置`""`为应有的属性

有人可以指出为什么选择的行为不同吗？我还应该补充一点，我正在使用 razor 生成 Select`@Html.DropDownListFor(x=>x.dest_provincia, Model.Items, new { data_bind="dest_provincia"})` 这是验证示例

（在视图模型上）

```
self.dest_provincia = ko.observable().extend({ required: { message: "REQUIRED"} }); 
```

这被放置在里面：

```
self.userValidation = ko.validatedObservable({
        rem_provincia: this.rem_provincia
)}; 
```

我注意到由于触发了更改事件，因此在 select 上进行了验证，但我不知道是什么原因造成的..？更新：我尝试通过 razor 创建选择，通过在 ajax 调用中循环 $.each 并在 knoackout 中填充 observableArray。在任何情况下，更改事件都会在页面加载时触发......！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:45:59.530

我今天设法解决了这个问题。

剃刀引擎模板化选择选项，然后将选定元素的值绑定到 Knockout 之间存在问题。

尽管选择框中没有用户输入的值，但默认值“--select--”实际上包含一个值。就我而言，它是一个空字符串。因此，当我应用淘汰绑定时，我的 viewmodel 属性被“更新”为空字符串值，因此触发了验证。

为了解决这个问题，我将模型的默认值设置为空字符串。因此，当应用绑定时，不会在 Knockout observable 上触发 valueHasMutated 事件，因此不会进行验证。

# tomcat - Tomcat 7 与 ehCache 独立服务器 (Glassfish) 配置与 RESTful Web 服务

> ID：13654530
> 
> 赞同：1
> 
> 时间：2012-11-30T23:10:20.637
> 
> 标签：tomcat, soap, glassfish, tomcat7, ehcache

我的要求包括使用 ehCache 通过 RESTful Web 服务调用来发送和存储数据。数据可以存储在内存中或通过文件系统...

以前从未使用过 ehCache，所以我在决定使用哪个捆绑包时遇到了一些问题。

已下载以下捆绑包：

*   ehcache-2.6.2

*   ehcache-standalone-server-1.0.0

(1) 两者有什么区别？

似乎 ehcache-2.6.2 包含 src 和二进制文件，这基本上使人们能够将其与他们的 webapps 捆绑在一起（通过将编译的 jar 或二进制文件放在 webapp 的 WEB-INF/lib 文件夹中）。但它似乎不支持 Restful Web 服务。

而 ehcache-standalone-server-1.0.0（带有嵌入式 Glassfish 服务器并支持 REST 和 SOAP）可用作独立服务器运行。如果我对自己问题的回答是正确的，那么这意味着我应该只使用独立服务器吗？

(2) 我的要求是在 Tomcat 7 上设置 ehCache（支持 REST）。那么，如何在 Tomcat 7 上将 ehCache 设置为支持 REST 和 SOAP 的单独应用程序？

感谢您抽出时间来阅读...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:15:34.010

Prashanth 应该为此获得一些赞誉，但他没有将解决方案作为答案发布，而是作为评论发布。

要设置 tomcat，还需要做一些额外的事情：

*   从（不是从 ehcache.org/downloads - 该文件已损坏）下载 ehcache-server-1.0.0：

[http://sourceforge.net/projects/ehcache/files/ehcache-server/](http://sourceforge.net/projects/ehcache/files/ehcache-server/)

*   解压 zip 文件并将其重命名为 ehcache.war

*   解压缩 ehcache.war 文件并下载 slf4j-simple-1.5.8.jar（其中包含 impl）并将其放入：

ehcache/WEB-INF/lib/

*   移动 $CATALINA_HOME/webapps 下的 ehcache 目录

*   运行tomcat

使用示例 REST 调用之一来测试 ehcache，这是脚本的 URL：

[http://ehcache.org/documentation/2.5/modules/cache-server](http://ehcache.org/documentation/2.5/modules/cache-server)

# asp.net-mvc - IOC Container 在 MVC 中的使用和 codeproject 上的示例项目

> ID：13654532
> 
> 赞同：1
> 
> 时间：2012-11-30T23:10:26.727
> 
> 标签：asp.net-mvc, inversion-of-control, unity-container

我想知道使用 IOC 容器是否有比下面代码项目示例中建议的方式更优雅的模式。当然，可以使用 IOC 容器，以便当您拥有可靠的 IOC 流程时，控制器构造函数是无参数的。这也意味着当您的应用程序具有比 MVC 更多（例如 WEB-API 和其他任何东西）时，您正在为该技术构建相同类型的解决方案。这对我来说看起来并不干燥。是否有人使用一种很好的模式来“注册”容器，例如 IMyMagicControllerHat 并使用一些不错的 .net 系统库获得单例？很明显，如果你有一个 UI Depends on Core Depends on Model 类型的应用程序，你会关心构建依赖和静态调用。对 MVCApplication 的静态回调与我有关。我一直在寻找更好的方法。

CODEProject 链接.... [http://www.codeproject.com/Articles/99361/How-To-Use-Unity-Container-In-ASP-NET-MVC-Framewor](http://www.codeproject.com/Articles/99361/How-To-Use-Unity-Container-In-ASP-NET-MVC-Framewor)

总之相关代码....

```
public interface IContainerAccessor
{
    IUnityContainer Container { get; }
}
public class MvcApplication : HttpApplication, IContainerAccessor
{
    private static IUnityContainer _container;
    public static IUnityContainer Container
    {
        get { return _container;        }
    }
    public static IUnityContainer Container
    {
        get  {   return _container;    }
    } 
```

还有像 MS 这样的例子，它显示了一个自定义静态作为解决方案。[http://msdn.microsoft.com/en-us/library/vstudio/hh323691%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh323691%28v=vs.100%29.aspx) 我期待可能有一个完善的适配器模式或类似模式。我将对统一容器进行 100 次访问，因此正确使用模式看起来很重要。

即使是像这样完全有意义的博客，也没有显示您应该在应用程序中获得对原始容器实例的引用的深度。 [http://blog.ploeh.dk/2010/09/29/TheRegisterResolveReleasePattern.aspx](http://blog.ploeh.dk/2010/09/29/TheRegisterResolveReleasePattern.aspx)

我很欣赏任何关于解决问题的好方法的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:00:32.430

那篇 codeproject 文章基于 MVC1 于 2010 年发布。MVC3 现在包含一个 IDependencyResolver 实现，以便更好地与 IoC 集成。对于带有 Unity 的 MVC3，您可以查看[Unity.MVC3](http://unitymvc3.codeplex.com/)

如果你想避免构造函数注入，你总是可以将 Unity 注册为默认的 IServiceLocator：

```
ServiceLocator.SetLocatorProvider(() => new UnityServiceLocator(Container)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:40:35.193

如果有人感兴趣，在谷歌搜索期间：我结束了使用自定义全局类。1 静态调用开始事情。其余的作为接口/适配器模式。示例注册 Unity 和企业库。并记录经过身份验证的日志请求的重要细节。 **...这只是部分摘录...用于说明目的**

从 MVC 应用程序 Global.asax 调用

```
public class BosMasterWebApplication : System.Web.HttpApplication
{
    private bool IsBootStraped;

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();

        IsBootStraped = false;

    }
    public override void Init()
    {
        base.Init();
        // handlers managed by ASP.Net during Forms authentication
        AuthenticateRequest += new EventHandler(AuthHandler);
        PostAuthenticateRequest += new EventHandler(PostAuthHandler);

    }
    public void AuthHandler(object sender, EventArgs e)
    {
        // if you need to setup anything
    }
    public void PostAuthHandler(object sender, EventArgs e)
    {
        // called several times during the authentication process
        if (!IsBootStraped)
              BosGlobal.HttpBootStrap(this);
        if (Request.IsAuthenticated)
        {
            // did   FormsAuthentication.SetAuthCookie  was executed if we get here, so set username
            BosGlobal.BGA.IBosCurrentState.CurrentUser.SetFromEnvironment();
        }

    }
}

/// <summary>
/// Central adapter management. Dont abuse this class
/// </summary>
public static class BosGlobal
{
   public static IBosGlobalAdpater BGA { get; private set; }
    // set up the adapter
    static BosGlobal()
    {
         BGA = new BosGlobalAdapter( );
    }
  public static void HttpBootStrap(HttpApplication httpApplication)
    {
        BGA.BootStrap(httpApplication);
    }
    public static void LocalBootStrap(string machineName)
    { // the LOCAL WPF bootstrap alternative... no http request exists.
      BGA.BootStrap(machineName);
      }
}

public class BosGlobalAdapter : IBosGlobalAdpater
{
    public static bool IsBootStrapped { get; private set; }

    /// Unity Container with key dependencies registered
    public IUnityContainer IUnityContainer { get; private set; } //IOC Container 
    //Adapters

    public IBosLogAdapter ILogAdapter { get; private set; }
    public IBosExceptionManagerAdapter ExceptionManagerAdapter { get; private set; }
   public BosGlobalAdapter()
    {
      IsBootStrapped = false;
      IUnityContainer = new UnityContainer();// one container per work process. managing and resolving dependencies
    }

   public void BootStrap(HttpApplication httpApplication )
    {

        IBosCurrentState = new BosCurrentState(httpApplication);
      BootStrapEnterpriseLibrary();
        BootStrapAdapters();
       IsBootStrapped = true;
   }

    private void BootStrapAdapters()
    {
        ILogAdapter = new BosLogAdapter(IUnityContainer.Resolve<LogWriter>());
        ExceptionManagerAdapter = new BosExceptionManagerAdapter(IUnityContainer.Resolve<ExceptionManager>());
    }

    private void BootStrapEnterpriseLibrary()
    {   // now we tell unity about the container manager inside EntLib.
        // we dont want 2 containers, so we tell UNity look after EntLib as well please
        IUnityContainer.AddNewExtension<EnterpriseLibraryCoreExtension>();
    } 
```

# iphone - 确定向下移动的动画到达某个点所需的时间

> ID：13654533
> 
> 赞同：0
> 
> 时间：2012-11-30T23:10:32.250
> 
> 标签：iphone, objective-c, xcode

我已经动画了一个图像从屏幕顶部直接下降到底部，我希望能够确定图像到达屏幕上某个点所需的时间。通常，通过将所需点的 y 坐标乘以动画的持续时间，然后将其除以图像从开始到结束移动的“像素”总量，这很容易做到。然而，objective-c 动画开始缓慢，加速，然后在停止前减速——这意味着我无法使用这种方法来计算所花费的时间。那么有什么方法可以确定向下移动的动画到达某个位置所需的时间吗？

编辑：对于动画，据说在动画期间的任何时候都无法确定对象的点——您提供的唯一可用信息是起点和终点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:39:02.337

如果您正在使用 `animateWithDuration:delay:options:animations:completion:`，您可以将`options`参数设置为`UIViewAnimationOptionCurveLinear`. 默认有一个时髦的曲线，但`UIViewAnimationOptionCurveLinear`就是它听起来的样子；线性的。没有加速，没有减速。另外，是的，有一种方法可以访问动画视图的位置。您访问它的表示层（用于展示动画的层）并使用*它的*帧的位置。

编辑：这是一个基于块的动画示例，它使用勾股定理计算从视图到目的地的距离，并使用线性曲线将视图动画到目的地。

```
 UIView* view = [[UIView alloc] init];
    CGPoint destination = CGPointZero;
    [UIView animateWithDuration: sqrt(pow(view.frame.origin.x - destination.x, 2) + pow(view.frame.origin.y - destination.y, 2)) / pixelsPerSecondVelocity
                          delay: 0
                        options: UIViewAnimationOptionCurveLinear
                     animations:^(void) {
                         view.frame = CGRectMake(destination.x,destination.y,view.frame.size.width,view.frame.size.height);
                     }
                     completion:^(BOOL finished) {
                         // nothing
                     }]; 
```

如果您的目标是低于 iOS 4，您只需`begin`在`commit`.

```
[UIView setAnimationCurve:UIViewAnimationCurveLinear]; 
```

# iphone - Xcode 4.5.1 iOS5/5.1 IBAction 不工作。在iOS6中很好

> ID：13654534
> 
> 赞同：3
> 
> 时间：2012-11-30T23:10:38.997
> 
> 标签：iphone, objective-c, ios

在 iOS5/5.1 中测试我的应用程序时遇到了一些问题。按下按钮后我的 IBAction 根本没有被调用。我在某处读到可能是因为手势识别器。我有这段代码，当用户点击屏幕上的任意位置时，它会关闭键盘，我认为这可能是罪魁祸首。我在另一个屏幕上也有类似的代码，但我什至无法查看它是否有类似的错误。

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
[tapRecognizer setDelegate:(id)self];
[tapRecognizer setNumberOfTapsRequired:1];
[self.view addGestureRecognizer:tapRecognizer]; 
```

这是功能。

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer
{
    [self.searchBar resignFirstResponder];
} 
```

如何在不失去通过点击关闭键盘的能力的情况下防止这种故障发生？

问候，迈克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T23:40:23.507

手势识别器是否识别了点击并因此不将其传递给按钮，该按钮是手势识别器所附加的视图的子视图？`handleSingleTap`一旦被调用，您可以尝试删除手势识别器。

# node.js - 使用 nodejs child_process.exec 回调获取“rsync”输出

> ID：13654536
> 
> 赞同：0
> 
> 时间：2012-11-30T23:10:56.377
> 
> 标签：node.js, stdout, rsync, stderr

目前，当我使用如下代码段中的回调函数`rsync`调用 nodejs 时，我无法获取输出：`child_process.exec`

```
var sys = require('sys'),
exec = require('child_process').exec;

cmd = 'rsync -rpz test/test-files/one.txt jloos@test.mygnia.de:~/remote-test/a/b/'
exec(cmd, function(error, stdio, stderr) { 
  sys.print('s: ' + stdio + '\n');
  sys.print('e: ' + stderr + '\n'); 
}); 
```

我认为这是由`rsync`. `rsync`通过终端与其对应的通信。`rsync`那么，如果可能的话，我如何从中获取消息？

当我使用时，`cmd = 'ls -la'`我得到了预期的输出。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:47:21.367

当程序不在虚拟终端中运行时，通常会缓冲标准输出。许多语言都有一个 pty 模块，它会诱使程序表现得好像它在终端中运行一样。

这为 NodeJs 提供了该功能； [https://github.com/chjj/pty.js](https://github.com/chjj/pty.js)

请记住，rsync 可能会写入大量特殊字符或使用 ncurses 之类的东西来提供更新状态消息，这可能会使处理输出变得更加困难。

# ruby-on-rails - Rails：（简单）模型方法说明。我的属性前的“&”是什么？

> ID：13654546
> 
> 赞同：0
> 
> 时间：2012-11-30T23:12:05.407
> 
> 标签：ruby-on-rails

嗨，我目前正在阅读有关单元测试的教程。我有两个模型：`Song`和`Album`.

```
class Song < ActiveRecord::Base
  attr_accessible :title, :duration_in_seconds
  belongs_to :album
end

class Album < ActiveRecord::Base
  attr_accessible :artist, :title

  has_many :songs

  def duration
    songs.sum(&:duration_in_seconds)
  end

end 
```

这是应该通过的测试：

```
require 'test_helper'

class AlbumTest < ActiveSupport::TestCase
  test "should be able to report duration based on combined duration of its songs" do
    album = Album.create
    3.times do
      album.songs.create(:duration_in_seconds => 5)
    end
    assert_equal 15, album.duration
  end
end 
```

正如您在专辑模型中看到的，有一个名为`duration`. 我对此有两个问题。

1.  所以我们知道 Song 属于 Album。如果我在专辑的实例上执行一个方法，我可以像那样直接在该方法中访问该实例的歌曲吗？方法定义看起来很奇怪...... @album.duration 会返回 @album.songs.sum(&:duration_in_seconds)？假设我在相册方法中有这个方法：

`def name_of_album`

`title`

`end`

如果我打电话`@album.name_of_album`会是一样的`@album.title`吗？

1.  `&`持续时间中的方法是什么？是一样的`songs.sum(:duration_in_seconds)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:22:25.993

& 符号是 Ruby 的一部分，当它用在符号前面时，它会将其转换为`Proc`. 有关详细信息，请参阅[http://railscasts.com/episodes/6-shortcut-blocks-with-symbol-to-proc?view=asciicast 。](http://railscasts.com/episodes/6-shortcut-blocks-with-symbol-to-proc?view=asciicast)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:56:59.313

回答你的第一个问题#1（你的两个问题都有#1）：

您定义的所有（公共）方法`Class Album`都可以由该类的实例使用，例如`@album.your_method`（私有和受保护的方法`@album.send(:your_private_or_protected_method)`）。

所以是的，`@album.name_of_album`会给出与您的示例相同的结果`@album.title`。

如果我理解你的问题是正确的，那真的是你的问题，我建议你学习一下 Ruby。

你的第二个问题已经回答了，但我还是添加了这个。

```
songs.sum(&:duration_in_seconds) 
```

与例如相同

```
songs.sum { |song| song.duration_in_seconds } 
```

# vba - 使用 VBA 存储自动筛选行号

> ID：13654554
> 
> 赞同：1
> 
> 时间：2012-11-30T23:13:25.930
> 
> 标签：vba, excel

如何使用 VBA 存储和检索从自动筛选操作返回的**行号？**例如，我使用[此问题](https://stackoverflow.com/questions/13614997/delete-row-based-on-search-key-vba)中的@brettdj 代码（请参见下面的代码）删除 B 列下所有带有“X”的行。现在我需要使用 X 存储行号（B4、B6、B9 - 请参见下面的屏幕截图）因为我需要删除同一工作簿中其他工作表上的相同行。

![自动筛选之前](../Images/1d1e22eade571ca47b1599bd685abda0.png) ![自动筛选后](../Images/f97853c2c60fd8050cdb62ec12406b4b.png)

```
Sub QuickCull()
    Dim ws As Worksheet
    Dim rng1 As Range
    Set ws = Sheets("Sheet1")
    Set rng1 = ws.Range(ws.[b2], ws.Cells(Rows.Count, "B").End(xlUp))
    Application.ScreenUpdating = False
    With ActiveSheet
            .AutoFilterMode = False
            rng1.AutoFilter Field:=1, Criteria1:="X"
            rng1.Offset(1, 0).EntireRow.Delete
            .AutoFilterMode = False
        End With
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T01:47:31.770

使用代码[是否可以在不循环的情况下用符合特定条件的行号填充数组？](https://stackoverflow.com/questions/12921350/is-it-possible-to-fill-an-array-with-row-numbers-which-match-a-certain-criteria/13061123#13061123)您可以快速返回这些行，而无需`AutoFilter`

例如，此代码将返回在其中找到 X 的行范围`B2:B50000`

```
Sub GetEm()
Dim StrRng As String
StrRng = Join(Filter(Application.Transpose(Application.Evaluate("=IF(B2:B50000=""X"",""B""&ROW(B2:B50000),""X"")")), "X", False), ",")
If Len(StrRng) > 0 Then MsgBox Range(StrRng).EntireRow.Address & " could be deleted elsewhere"
End Sub 
```

# c# - 使用 post/sendmessage 进行鼠标点击不起作用

> ID：13654558
> 
> 赞同：2
> 
> 时间：2012-11-30T23:13:43.517
> 
> 标签：c#, sendmessage, postmessage, user32

> **可能重复：**
> [如何在 C# 中模拟鼠标单击？](https://stackoverflow.com/questions/2416748/how-to-simulate-mouse-click-in-c)

我努力了

```
Window = FindWindow(null, "untitled - Paint");
PostMessage(WindowToFind, WM_MOUSEMOVE, 0, location); 
PostMessage(WindowToFind, WM_LBUTTONDOWN, ((int)Keys.LButton), location); 
```

位置是`100 * 0x10000 + 100`等的`100x100`。我怀疑它错了。我试过用 交换，没有`((int)Keys.LButton)`用。`0`我尝试在和`thread.sleep`之间放置（好吧，postmessage 应该等待，但无论如何）我用于 mousemove 和左键常量。`lbuttondown``lbuttonup``thread.sleep``0x0200``0x0202`

不知道为什么它根本不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T23:37:11.350

这是正确的。[和函数从未打算合成鼠标（或键盘）`PostMessage`事件`SendMessage`](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx)。他们有时*可能会*为此工作，但这不是你应该依赖的东西，因为*大多数时候*他们不会工作。

相反，您应该使用该[`SendInput`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx)来正确合成鼠标事件。与其他 Win32 API 函数一样，您需要 P/Invoke 才能从 C# 调用它。该定义可以从文档中手动生成，也可以[在 Internet 的其他地方](https://stackoverflow.com/a/6833311/366904)轻松找到。唯一棘手的部分是您需要声明适当的结构以及函数本身。

除了作为合成鼠标事件的一种方式之外，该[`mouse_event`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260.aspx)`SendInput`还存在，但正如链接文档所表明的那样，该函数已被淘汰，取而代之的是`SendInput`. 您应该始终喜欢`SendInput`在新应用程序中使用。

唯一的问题是您似乎试图将这些鼠标事件发送到*不同*的应用程序。这会带来一些问题，因为`SendInput`只是将事件注入到键盘/鼠标流中。处理它们的应用程序将是具有前景窗口的应用程序。因此，您需要先将焦点设置到另一个窗口，并确保您不会与 UIPI 发生冲突。

但是，您拥有的代码在另一个层面上相对脆弱：一旦您使用不同的名称保存文档，画图窗口就会更改其名称。并且假设 Windows 9 不会将 Paint 重命名为其他名称 - 它以前发生过，该应用程序曾经被称为“Paintbrush”。希望这只是您想要完成的事情的一个示例。无论哪种方式，我都可能建议您研究更强大的自动化方法（例如，[Microsoft UI 自动化](http://msdn.microsoft.com/en-us/library/ms747327.aspx)框架），而不是盲目地注入输入。

# python - 如何线程化wxPython进度条

> ID：13654559
> 
> 赞同：1
> 
> 时间：2012-11-30T23:14:10.930
> 
> 标签：python, multithreading, wxpython

我正在尝试线程 wx.ProgressDialog。我有一个进度线程类

```
class Progress(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
    def run(self):
        max = 1000000

        dlg = wx.ProgressDialog("Progress dialog example",
                               "An informative message",
                               maximum = max,
                               parent=None,
                               style = wx.PD_CAN_ABORT
                                | wx.PD_APP_MODAL
                                | wx.PD_ELAPSED_TIME
                                | wx.PD_ESTIMATED_TIME
                                | wx.PD_REMAINING_TIME
                                )
        keepGoing = True
        count = 0

        while keepGoing and count < max:
            count += 1
            wx.MilliSleep(250)

            if count >= max / 2:
                (keepGoing, skip) = dlg.Update(count, "Half-time!")
            else:
                (keepGoing, skip) = dlg.Update(count)
        dlg.Destroy() 
```

当我按下按钮时会调用它

```
class MiPPanel ( wx.Panel ):
    [...]
    def runmiP(self, event):
        thread1 = Progress() 
        thread1.start() 
```

当我运行 thread1.start() 时，我收到了 100 条该类型的警告，`2012-12-01 00:31:19.215 Python[3235:8807] *** __NSAutoreleaseNoPool(): Object 0x11a88f300 of class NSConcreteAttributedString autoreleased with no pool in place - just leaking` 并且没有显示进度条。

如何使用 wxPython 的线程来制作进度条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:41:47.920

所有 wxPython 小部件和操作都应该在一个线程中。如果你想让一个对话框由另一个线程控制，那么你将不得不使用计时器和队列来从另一个线程向对话框发送消息。

我理解的另一种方式应该可以工作（我没有测试过），它可以在另一个线程中为您的对话框创建一个完全独立的 wxApp。您仍然必须以某种方式与主线程进行通信。

**编辑：** 这是更多信息的链接。它在底部有一些关于使用 wx.CallAfter 更新工作线程进度的信息。它还展示了如何在单独的线程中运行单个函数而不创建单独的类。

[wxPython线程](http://wiki.wxpython.org/LongRunningTasks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:19:06.987

看起来它在抱怨参数 4 不是 wxWindow （因此是`argument 4 of type 'wxWindow *'`错误的一部分）。

查看您的电话，参数 4 正在传递`parent=self`。那么，什么是`self`？换句话说，带有此代码的方法属于哪个类？它是`wx.Window`one 的子类或子类，还是不是类似于 an`Application`或 a 的东西`Progress`？

（实际上，鉴于您将`parent`作为关键字参数传递，巧合的是，它恰好在您对`wx.ProgressDialog`构造函数的调用中位于第 4 位，并且在对底层 C++ 函数的调用中位于第4 位，这只是巧合实际上是在抱怨。如果你切换`maximum`and `parent`，你会得到同样的错误，我认为它仍然会说`argument 4`而不是`argument 3`。）

要验证这一点，请尝试在失败的调用中取出`parent=self`，它应该可以工作，或者添加`parent=object()`到调用中`None`，它应该可以工作，它应该会失败。

当然，这并不能真正*解决*问题。但要做到这一点，你必须弄清楚你想要的`parent`是什么，并通过它而不是`self`.

PS，我不认为这个问题与你的线程有任何关系。

# c# - 将字符串数组从托管代码编组为本机代码

> ID：13654561
> 
> 赞同：6
> 
> 时间：2012-11-30T23:14:25.593
> 
> 标签：c#, c++, .net, interop, marshalling

我有一个带有以下声明（接口和实现）的托管函数：

```
[return: MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_BSTR)]
String[] ManagedFunction()
{
    String[] foo = new String[1];
    foo[0] = "bar";
    return foo;
} 
```

还有一个本地 C++ 接口，其方法与托管接口相同，在该接口内部，此方法具有以下声明：

```
void ManagedFunction(SAFEARRAY* foo); 
```

本机代码通过以下方式调用此函数：

```
void NativeFunction(ManagedBinding binding)
{
    CComSafeArray<BSTR> cComSafeArray;
    cComSafeArray.Create(); 
    LPSAFEARRAY safeArray = cComSafeArray.Detach();
    binding.comObject->ManagedFunction(safeArray); 
} 
```

我不确定我做错了什么，但是在调用我的托管函数之后，`safeArray`似乎有垃圾值，在将返回值编组回本机代码时出现了问题。在.Net interop 方面比我更有经验的人可以对此有所了解吗？`ValueType`此外，可能值得一提的是，我从托管函数返回 s 没有问题（`boolean`如果你好奇的话），关于返回`String`数组的一些事情会搞砸。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:03:29.373

1）您的函数返回 a `SAFEARRAY`，那么为什么在调用函数之前分配它？
2）`ManagedFunction`应该返回 a `SAFEARRAY`，所以它应该得到 a`SAFEARRAY*`才能返回它！所以你应该说：

```
LPSAFEARRAY lpsa;
binding.comObject->ManagedFunction(&lpsa);
CComSafeArray<BSTR> cComSafeArray;
cComSafeArray.Attach(lpsa); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:32:54.163

好吧，我终于让它工作了。我创建了一个`SAFEARRAY`被调用的托管表示`ManagedSafeArray`（从这里窃取：[http](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/6641abfc-3a9c-4976-a523-43890b2b79a2/) ://social.msdn.microsoft.com/Forums/en-US/clr/thread/6641abfc-3a9c-4976-a523-43890b2b79a2/ ）：

```
[StructLayout(LayoutKind.Sequential)]
struct ManagedSafeArray
{
    public ushort   dimensions;     // Count of dimensions in the SAFEARRAY
    public ushort   features;       // Flags to describe SAFEARRAY usage
    public uint     elementSize;    // Size of an array element
    public uint     locks;          // Number of times locked without unlocking
    public IntPtr   dataPtr;        // Pointer to the array data
    public uint     elementCount;   // Element count for first (only) dimension
    public int      lowerBound;     // Lower bound for first (only) dimension
} 
```

我将方法的签名更改为：

```
void ManagedMethod(ref ManagedSafeArray foo); 
```

在我的方法中，我`dataPtr`通过调用手动更新了字段`Marshal.AllocCoTaskMem(...)`，然后复制了我想要`SAFEARRAY`包含的字符串。

我不知道为什么 CLR 无法自动将参数编组到本机代码和从本机代码编组，如果有人可以尝试解释这一点，我仍然会很感激。

# ruby - 如何在 ruby 中将一个哈希与另一个哈希结合起来

> ID：13654562
> 
> 赞同：52
> 
> 时间：2012-11-30T23:14:33.880
> 
> 标签：ruby, hashmap

我有两个哈希...

```
a = {:a => 5}
b = {:b => 10} 
```

我想...

```
c = {:a => 5,:b => 10} 
```

如何创建哈希 c？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-30T23:16:54.910

如果您只是交错，这是一个非常简单的操作：

```
c = a.merge(b) 
```

如果您想实际将这些值相加，这会有点棘手，但并非不可能：

```
c = a.dup
b.each do |k, v|
  c[k] ||= 0
  c[k] += v
end 
```

的原因`a.dup`是为了避免破坏`a`散列中的值，但是如果您不在乎，可以跳过该部分。`||=`用于确保它以默认值`0`as开头`nil + 1`是无效的。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-12-15T11:57:53.857

*（TL；DR `hash1.merge(hash2)`：）*

正如大家所说，您可以使用合并方法来解决您的问题。但是，使用合并方法存在一些问题。这就是为什么。

```
person1 = {"name" => "MarkZuckerberg",  "company_name" => "Facebook", "job" => "CEO"}

person2 = {"name" => "BillGates",  "company_name" => "Microsoft", "position" => "Chairman"} 
```

看看这两个字段 name 和 company_name。这里的 name 和 company_name 在两个哈希中都是相同的（我的意思是键）。下一份工作和职位有不同的关键。

当您尝试合并两个哈希 person1 和 person2 如果 person1 和 person2 键相同？那么 person2 键值将覆盖 peron1 键值。在这里，第二个哈希将覆盖第一个哈希字段，因为两者是相同的。这里名称和公司名称相同。查看结果。

```
people  = person1.merge(person2)

 Output:  {"name"=>"BillGates", "company_name"=>"Microsoft", 
        "job"=>"CEO", "position"=>"Chairman"} 
```

但是，如果您不希望您的第二个哈希覆盖第一个哈希。你可以做这样的事情

```
 people  = person1.merge(person2) {|key, old, new| old}

  Output:   {"name"=>"MarkZuckerberg", "company_name"=>"Facebook", 
            "job"=>"CEO", "position"=>"Chairman"} 
```

这只是使用 merge() 时的快速说明

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-30T23:18:20.280

我想你想要

```
c = a.merge(b) 
```

[您可以在http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)查看文档

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T23:17:11.633

使用合并方法：

```
c = a.merge b 
```

# jquery - jQuery Easy 分页无需插件

> ID：13654563
> 
> 赞同：-1
> 
> 时间：2012-11-30T23:14:40.787
> 
> 标签：jquery, jquery-plugins, pagination, jquery-pagination

所以，我的问题如下。它遵循以前的[HERE](https://stackoverflow.com/questions/13504315/jquery-loop-clone-simply-why) & [HERE](https://stackoverflow.com/questions/13483052/jquery-xml-mystery-get-digits-not-letters)

我使用以下代码从 XML 动态添加表：

```
$.ajax({
    type: "GET",
    url: "../datas/_pizzas",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('row').each(function() {
            var getNom = $(this).find('nomp').text();
            var Prix1 = $(this).find('petit').text();
            var Prix2 = $(this).find('moyen').text();
            var Prix3 = $(this).find('grand').text();
            $('<table id="item"></table>').html('<tr><td id="test" onclick="afficher(\''+getNom +'\','+Prix1+','+Prix2+','+Prix3+');"><b>' + getNom + '</b></td></tr>').appendTo('#pizzas');
        });
    }
}); 
```

我需要限制页面上的数量。如果可能的话，有一个索引导航。我搜索了一个可以解决问题的分页插件，但我没有找到任何适合我的插件，太多无用的配置，或者对我来说不可读。

有人有代码或为我解释？？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T23:14:40.787

为后代：

```
//Easy pagination by bZezzz
//For Stackoverflow Community
//Fork Fork Fork Fork !
item = $('table'); //Any element you want
itemL = item.length; //Get the Item count
itNbr = 5; //Set the Item per page
pgNbr = 0; //Set the page count to 0

//Hide unwanted row
function start() {
  if (itemL > itNbr) { //If Items Count greater than Item per page
    item.hide(); //Hide All Items
    item.slice(0, itNbr).show(); //Show only the 0 to 'X'. X = Item per page
    pgNbr = Math.ceil(itemL / itNbr); //Get the page Number Item Count / Item per Page round to Greater
    thisPage = 1; //Set the Start Page
  }
}

//Get the pages Index
function indexer() {
  $('textarea').val(thisPage + ' / ' + pgNbr); //Sipmply set val.
}
//Bind the action
$('.pager').click(function() {
  //Create loop
  if (thisPage == pgNbr) { //If last page 
    start(); //Go 1st
    indexer(); //Get Index
  } else {
    var first = itNbr * thisPage; //Define the first visible item 'X'
    var last = (itNbr * thisPage) + itNbr; //Define the last visible item 'Y'
    item.hide(); //Hide All
    item.slice(first, last).show(); //Show only 'X' to 'Y'
    thisPage++; //Increment page number
    indexer(); //And get the index
  }

});

//Let's GO !
start();
indexer();
```

```
body {
  background-color: #00AAFF;
}

.container {
  width: 200px;
  margin: 0 auto;
  background-color: #fff;
  padding: 5px;
  text-align: center;
  margin-top: 50px;
}

.pager {
  width: 100%;
  height: 25px;
  background-color: #ddd;
  color: #999;
  padding-top: 5px;
}

table {
  width: 100%;
  text-align: center;
  margin: 5px 0 0 0;
  background-color: #eee;
  color: #999;
}

textarea {
  text-align: center;
  margin: 10px 0 0 0;
  resize: none;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="container">
  <div class="pager"><b>Click ME !</b></div>
  <table>
    <tr>
      <td>1</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>2</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>3</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>4</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>5</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>6</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>7</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>8</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>9</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>10</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>11</td>
    </tr>
  </table>
  <textarea rows="1"></textarea>
</div>
```

# jquery - 动态创建的 svg 元素不被看到

> ID：13654565
> 
> 赞同：0
> 
> 时间：2012-11-30T23:15:03.767
> 
> 标签：jquery, random, for-loop, svg, dynamically-generated

我刚刚开始了一个小项目，用 jQuery 用 svg 测试动画，并从动态创建 rect 开始。但是，下面的代码有问题，因为即使我可以在 Inspector 中看到创建的 svg 元素，它们也不会在浏览器中看到。

为什么会这样，我可以改变什么来使矩形被看到？我已经在 Chrome、Firefox 和 Safari 中尝试过代码。

jsFiddle：http: [//jsfiddle.net/JFACW/](http://jsfiddle.net/JFACW/)

**js：**

```
$(document).ready(function() {

    var NR_OF_FLAKES = 100,
               flake = $('.flake'),
                   x = flake.attr('x'),
                   y = flake.attr('y'),
                 svg = $('#svg');

    for(var i = 0; i < NR_OF_FLAKES; i++) {

        var xPos = randomize('width'),
            yPos = randomize('height');

        $('svg').append('<rect class="flake" width="5" height="5" x=' + xPos + ' y=' + yPos + '/>');
    }

    flake.attr('x');

    var height = $(window).height();

    function randomize(direction) {

        if (direction == 'width')
            direction = $(window).width();
        else
            direction = $(window).height();

        var rand = Math.floor((Math.random() * direction) + 1);

        return rand;
    }
}); 
```

**html:**

```
...
<body>
    <div id="box2">
        <svg id="svg" xmlns="http://www.w3.org/2000/svg" height="1600" version="1.1"></svg>
    </div>
</body>
... 
```

**CSS：**

```
rect.flake {
    fill: rgb(255,205,0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:58:05.713

只需抛弃 jQuery 并使用纯 JavaScript：

```
var NR_OF_FLAKES = 100,
             svg = document.querySelector('svg'),
           xmlns = "http://www.w3.org/2000/svg";

for(var i = 0; i < NR_OF_FLAKES; i++) {

   var xPos = Math.random()*window.innerWidth,
       yPos = Math.random()*window.innerHeight,
      flake = document.createElementNS(xmlns, "rect");

  flake.setAttribute("width", 5);
  flake.setAttribute("height", 5);
  flake.setAttribute("x", xPos);
  flake.setAttribute("y", yPos);
  flake.setAttribute("class", "flake");
  svg.appendChild(flake);
} 
```

​</p>

[http://jsfiddle.net/PAxyx/](http://jsfiddle.net/PAxyx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:33:41.607

这是[jquery 的 append 的副本，不适用于 svg 元素？](https://stackoverflow.com/questions/3642035/jquerys-append-not-working-with-svg-element)

SVG 没有`innerHTML`，因此`.append`不起作用。有关详细信息，请参阅链接的问题。

编辑：这可能不是全部真相。jQuery 似乎附加`rect`了不在 SVG 命名空间中的元素，但它们必须如此。

# php - PHP图像脚本需要是PNG

> ID：13654566
> 
> 赞同：-3
> 
> 时间：2012-11-30T23:15:06.577
> 
> 标签：php, image, png

我找到了一个用于显示照片和制作类别的脚本，但即使在编辑它之后，我也无法让它做我想做的一切。最大的问题是它只显示 JPEG 文件，我如何让它同时显示 PNG 和 GIF？此外，它使用我目录中的文件夹来创建类别，但我不知道如何允许用户选择它所在的类别。我该怎么做？

```
<body link="#622d15"><form name="newad" method="post" enctype="multipart/form-data"  
action="">
<?php
$title="HBCC Photo";

 // Logo for the site. Use HTML it can be a graphic.
$logo='';

//Thumbnail maker. Some servers don't like this. Defualt is to leave it on. If you have     trouble turn it off.
//0=off 1=on
$makethumbs=1;

//Thumbnail extension. You can change the thumbnail filename extesntion that is added  onto the end of the original filename.
//Thumbnail file name will be "OriginalFilename.jpg_thmb.jpg" Warning if you leave this blank you will overwrite your original files!
//If you change the extension it will create new thumbnail files, but not delete the old ones.
// default=_thmb.jpg
$thumbext='_thmb.jpg';

//Thumbnail size. The minimum width and height in pixels, that you would like the  thumbnails to be. Photos are scaled.
$twidth=150;
$theight=150;

//Photo size. The minimum width and height in pixels, that you would like you photos  scaled to when displayed.
$pwidth = 540;
$pheight = 540;

//The thumbnail gallery is displayed in a table. Please choose the number of rows and  columns you would like.
$rows=3;
$cols=3;

//If you would like the filename of the photo to be displayed under the thumbnail change this setting.
//0=off 1=on
$showfilename=1;
$showpathname=0;

//If you want the EXIF Comment information shown
//0=off 1=on
$showexifcomment=1;

//If you would like photo to up a new window when clicked change this setting.
//The defualt is to open the image up in the same browser window.
//0=off 1=on
$window=0;

//Use Javascript for new window
//0=off 1=on
$javascript=0;

//If you would like the thumb to link directly to the photo and not the script set this.
//This works best if you use the Javascript window. It pops open in a nice size.
//Default is to the script.
//0=off 1=on
$linktophoto=0;

//If you would like to use a custom header or footer please add the file names here and they will be included in the script.
//Otherwise the plain jane default will be used. The files should be in the same folder as the script, but if you provide an
//alternate path it will work as well. Example: header.html, header.php. 
$header="NULL";
$footer="NULL";

$divider=" | "; //divider between album names
$pagedivider=" | "; //divider between page numbers in thumbnail view 

//No need to mess with anything below here.
error_reporting(E_ALL & ~E_NOTICE);
//Part of this function comes from      http://www.php.net/manual/en/function.getimagesize.php
function thumb_maker($filename, $minwidth, $minheight) {
global $thumbext,$makethumbs;
if ($makethumbs==1) {
    if (file_exists($filename.$thumbext)) {
        $photosize = getimagesize($filename.$thumbext);
        if (max($minwidth,$minheight)!=max($photosize[0],$photosize[1])) {
        unlink($filename.$thumbext);
        }       
    }
    if (!file_exists($filename.$thumbext) && file_exists($filename)) {
        echo "<br/>One moment please....creating a thumbnail. Refresh the    page in a moment.";
        set_time_limit(60);
        $photosize = getimagesize($filename);
        // Get image size and scale ratio
        $scale = min($minwidth/$photosize[0], $minheight/$photosize[1]);
        if ($scale < 1) {
           $width = floor($scale*$photosize[0]);
           $height = floor($scale*$photosize[1]);
        }
        else {
           $width = $minwidth;
           $height = $minheight;
        }
        if ($photosize['mime']=="image/jpeg") {
            $resizedimage = imagecreatetruecolor($width, $height);
            $thumbimage = imagecreatefromjpeg($filename);
            imagecopyresampled($resizedimage, $thumbimage, 0, 0, 0, 0,    $width, $height, $photosize[0], $photosize[1]);
            imagejpeg($resizedimage,$filename.$thumbext,50);
            imageDestroy($resizedimage); 
            imageDestroy($thumbimage); 
        }
    }
}
}

//Part of this function comes from       http://www.php.net/manual/en/function.getimagesize.php
function gallery_sizer($photo,$minwidth,$minheight) {
if (file_exists($photo)) {
    $photosize = getimagesize("$photo");
    # Get image size and scale ratio
    $scale = min($minwidth/$photosize[0], $minheight/$photosize[1]);
    if ($scale <= 1) {
        $width = floor($scale*$photosize[0]);
        $height = floor($scale*$photosize[1]);
    }
    else {
        $width = floor($photosize[0]);
        $height = floor($photosize[1]);
    }
    return array($width,$height,$photosize[0],$photosize[1]);
}
}

function exif_comment($photo) {
$comment=NULL;
if (file_exists($photo) && function_exists('exif_read_data')) {
    $exif = exif_read_data($photo, 0, true);
if (array_key_exists('COMMENT', $exif)) {
        $comment=str_replace("\n", "<br />", strip_tags($exif['COMMENT']    [0]));
}
}
return $comment;
}

function getdirs($dir) {
$dirs=array();
chdir($dir);
if ($handle = opendir($dir)) {
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != ".."){
            if (is_dir($file)) {
                $dirs[] = $file;
            }
        }
    }
    closedir($handle);
}
sort($dirs);
return $dirs;
}

function getphotos($photodir) {
global $thumbext;
$photos=array();
if ($handle = opendir($photodir)) {
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != ".." && !eregi(".jpg".$thumbext."$",$file) &&   eregi(".jpg$",$file)){
                $photos[] = $file;
        }
    }
    closedir($handle);
}
sort($photos);
return $photos;
}

function thumb_gallery($photonum) {
global $photos, $photourl, $photodir, $twidth, $theight, $rows, $cols,   $showfilename,$showpathname,$showexifcomment,$linktophoto,$thumbext, $album, $window,  $javascript, $query, $pagedivider;
    if ($photonum>count($photos)-1) {
        $photonum=count($photos)-1;
    }
    if (($photonum)<=0) {
        $photonum=0;
    }

    if(isset($album)) { $query="&amp;album=".urlencode($album); }
    for ($tr = 1; $tr <= $rows; $tr++) {
        $photobody[]="<tr>";
        for ($td = 1; $td <= $cols; $td++) {
            $photobody[]="<td align=\"center\" valign=\"top\">";
            if (array_key_exists($photonum, $photos)) {
            if  (file_exists($photodir."/".$photos[$photonum].$thumbext)) {
                 $size=gallery_sizer($photodir."/".$photos[$photonum].$thumbext,$twidth,$theight);
                 $comment=exif_comment($photodir."/".$photos[$photonum]);
                 $jswindowsize=gallery_sizer($photodir."/".$photos[$photonum],1,1);
                $link = $photourl."/".$photos[$photonum].$thumbext;
                if ($linktophoto==1) {  $linktarget="http://".$_SERVER['HTTP_HOST'].$photourl."/".$photos[$photonum]; } else {  $linktarget="http://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']."? p=".urlencode($photos[$photonum]).$query; }
                if ($window==1) { if ($javascript==1) {  $linktarget='javascript:Popup(\''.$linktarget.'\',\''.($jswindowsize[2]+15).'\',\''. ($jswindowsize[3]+15).'\')';  } else { $target="_blank"; } } else { $target="_self"; }
                if ($photonum<=count($photos)-1) {

                if ($javascript==0) {
                    $photobody[]="<a href=\"$linktarget\"  target=\"$target\">";
                    }
                else {  $photobody[]="<a href=\"$linktarget\">"; }
                }
                    $photobody[]="<img src=\"$link\"  width=\"$size[2]\" height=\"$size[3]\" alt=\"$photos[$photonum]\" border=\"1\" /></a><br  />";
            }
            if ($photos[$photonum]) {
                if ($showexifcomment==1 && !is_null($comment)) {  $photobody[]='<p class="thmbcaption">'.$comment.'</p>'; }
                if ($showfilename==1) { $photobody[]='<p  class="thmbcaption">'.$photos[$photonum].'</p>'; }
                if ($showpathname==1) { $photobody[]='<p   class="thmbcaption">http://'.$_SERVER['HTTP_HOST'].$photourl.'/'.$photos[$photonum].'</p>';  }
            }
            }
            $photobody[]="</td>";
            $photonum++;
        }
        $photobody[]="</tr>";
    }
    unset($tr, $td);

    #this is down here for a reason don't move it and use array_unshift   instead. Trust me.
    if (($photonum-($rows*$cols))>0) { $prev="<a   href=\"".$_SERVER['PHP_SELF']."?pn=".($photonum-(($rows*$cols)*2)).$query."\">&lt;&lt;   Previous</a>"; } else { $prev=""; }
    if (($photonum)<(count($photos))) { $next="<a   href=\"".$_SERVER['PHP_SELF']."?pn=".$photonum.$query."\">Next&gt;&gt;</a>"; } else {   $next=""; }

    $photopage=array();
    $photopage[]="Pages: ";
    for ($pagelink=0, $pagenum=1; $pagelink<=count($photos); $pagelink+= ($rows*$cols), $pagenum++) {
        //thanks to DC for this addition.
    if ($pagenum > 1){
        $photopage[]=$pagedivider."<a href=\"$_SERVER[PHP_SELF]?pn=". ($pagelink).$query."\">$pagenum</a> ";
        }
        else {
       $photopage[]=" <a href=\"$_SERVER[PHP_SELF]?pn=". ($pagelink).$query."\">$pagenum</a>  ";
    }

    }
    unset($pagelink, $pagenum);
    $photopage=implode("", $photopage); 

    if ($photonum >= count($photos)) { $endnum=count($photos); } else {  $endnum=$photonum; }
    $photobody[]="<tr><td colspan=\"".$cols."\"><table width=\"100%\"   border=\"0\"><tr><td width=\"33%\"><div align=\"left\" class=\"caption\">".$prev."</div>  </td><td width=\"33%\"><div align=\"center\" class=\"caption\">Photos <strong>".($photonum-  (($rows*$cols)-1))."</strong> to <strong>".$endnum."</strong> of <strong>".count($photos)."  </strong><br />".$photopage."</div></td><td width=\"33%\"><div align=\"right\"   class=\"caption\">".$next."</div></td></tr></table></td></tr>";
    array_unshift($photobody, "<tr><td colspan=\"".$cols."\"><table   width=\"100%\" border=\"0\"><tr><td width=\"33%\"><div align=\"left\"   class=\"caption\">".$prev."</div></td><td width=\"33%\"><div align=\"center\"   class=\"caption\">Photos <strong>".($photonum-(($rows*$cols)-1))."</strong> to   <strong>".$endnum."</strong> of <strong>".count($photos)."</strong><br />".$photopage."  </div></td><td width=\"33%\"><div align=\"right\" class=\"caption\">".$next."</div></td>  </tr></table></td></tr>");

    #put the table tag at the top of the array.
    array_unshift($photobody, '<table width="100%" border="0" cellspacing="0"   cellpadding="3">');
    $photobody[]='</table>';

    if ($window==1 && $javascript==1) {
        array_unshift($photobody, '<SCRIPT language="JavaScript">function   Popup(url,width,height) { PopupWindow = window.open (\'\',  \'PopupWindow\',\'scrollbars=0,resizable=1,height=\'+height+\',width=\'+width+\',left=100,t op=20\'); PopupWindow.focus(); PopupWindow.location.href = url; }</SCRIPT>');
    }       

return $photobody;
}

function photo_gallery($photo) {
global $photodir, $photourl, $pwidth, $pheight, $thumbsurl, $window, $photos,    $album, $thumbext, $header,$showfilename,$showpathname,$showexifcomment;
$photobody=array();

if (isset($photo)) {

    if(isset($album)) { $query="&amp;album=".urlencode($album); }
foreach ($photos as $key => $value) {
     if($photo==$value) {
      if (array_key_exists($key+1, $photos)) {
        if($photos[$key+1]) {
          $nextphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."? p=".$photos[$key+1].$query."\">Next Photo &gt;</a>";
          $nextphotothumb="<a href=\"".$_SERVER['PHP_SELF']."? p=".$photos[$key+1].$query."\"><img alt=\"\"  src=\"".$photourl."/".$photos[$key+1].$thumbext."\" height=\"50\" border=\"1\" /></a>";
        }
      }
          else {
          $nextphoto=NULL;
          $nextphotothumb=NULL;
          }
      if (array_key_exists($key-1, $photos)) {
        if($photos[$key-1]) {
          $prevphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key- 1].$query."\">&lt; Previous Photo</a>";
          $prevphotothumb="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key- 1].$query."\"><img alt=\"\" src=\"".$photourl."/".$photos[$key-1].$thumbext."\"  height=\"50\" border=\"1\" /></a>";
        }
      }
          else {
          $prevphoto=NULL;
          $prevphotothumb=NULL;
          }
     }
}
    $size=gallery_sizer($photodir.'/'.$photo,$pwidth,$pheight);
    $comment=exif_comment($photodir.'/'.$photo);

    //close window or prev next menu section
    $photobody[]='<table width="100%" border="0" cellspacing="0"  cellpadding="3">';
    $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"></td><td align=\"center\" width=\"33%\"><div align=\"center\" class=\"caption\"></div></td><td align=\"right\" width=\"33%\"></td></tr>";

    if ($window==1) {
    $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"><a  href=\"javascript:window.close()\">Close Window</a></td><td align=\"center\" width=\"33%\"> <div align=\"center\" class=\"caption\">";
    $photobody[]="</div></td><td align=\"right\" width=\"33%\"></td></tr>";
    }
    else {

    $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"><div  align=\"left\" class=\"caption\">".$prevphotothumb.$prevphoto."</div></td><td align=\"center\" width=\"33%\"><div align=\"center\" class=\"caption\">";
    if ($header=="NULL") {
        if (isset($album)) { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."?album=".urlencode($album)."&amp;p=".$photo."&amp;slide=1\">Start Slideshow</a>\n"; }
        else { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."? p=".$photo."&amp;slide=1\">Start Slideshow</a>\n"; }
    }       
    $photobody[]="</div></td><td align=\"right\" width=\"33%\"><div  align=\"right\" class=\"caption\">".$nextphotothumb.$nextphoto."</div></td></tr>";
    }

    $photobody[]='<tr><td colspan="3" align="center">';
    $photobody[]='<img src="'.$photourl.'/'.$photo.'" width="'.$size[0].'"  height="'.$size[1].'" border="0" alt="" class="imageborder" />';

    if ($photo) {
        if ($showexifcomment==1) { $photobody[]='<p class="photocaption">'.$comment.'</p>'; }
        if ($showfilename==1) { $photobody[]='<p  class="photocaption">'.$photo.'</p>'; }
        if ($showpathname==1) { $photobody[]='<p   class="photocaption">http://'.$_SERVER['HTTP_HOST'].$photourl.'/'.$photo.'</p>'; }
    }               

    $photobody[]='</td></tr>';
    $photobody[]='</table>';
}
return $photobody;
}

function photo_slides($photo) {
global $photodir, $photourl, $pwidth, $pheight, $thumbsurl, $window, $photos,   $album, $thumbext, $header,$showfilename,$showpathname,$showexifcomment;
$photobody=array();

if (isset($photo)) {

    if(isset($album)) { $query="&amp;album=".urlencode($album); }

foreach ($photos as $key => $value) {

     if($photo==$value) {
      if (array_key_exists($key+1, $photos)) {
        if($photos[$key+1]) {
          $nextphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."? p=".$photos[$key+1].$query."\">Next Photo &gt;</a>";
          $nextphotothumb="<a href=\"".$_SERVER['PHP_SELF']."? p=".$photos[$key+1].$query."\"><img alt=\"\"  src=\"".$photourl."/".$photos[$key+1].$thumbext."\" height=\"50\" border=\"1\" /></a>";
        }
      }
          else {
          $nextphoto=NULL;
          $nextphotothumb=NULL;
          }
      if (array_key_exists($key-1, $photos)) {
        if($photos[$key-1]) {
          $prevphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key- 1].$query."\">&lt; Previous Photo</a>";
          $prevphotothumb="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key- 1].$query."\"><img alt=\"\" src=\"".$photourl."/".$photos[$key-1].$thumbext."\"  height=\"50\" border=\"1\" /></a>";
        }
      }
          else {
          $prevphoto=NULL;
          $prevphotothumb=NULL;
          }
     }
}
    $size=gallery_sizer($photodir.'/'.$photo,$pwidth,$pheight);
    $comment=exif_comment($photodir.'/'.$photo);
    $photobody[]='<table width="100%" border="0" cellspacing="0"  cellpadding="3">';

    $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"><div  align=\"left\" class=\"caption\">".$prevphotothumb.$prevphoto."</div></td><td  align=\"center\" width=\"33%\"><div align=\"center\" class=\"caption\">";
    if ($header=="NULL") {
    if (isset($album)) { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."? album=".urlencode($album)."&amp;p=".$photo."\">Stop Slideshow</a>\n"; }
    else { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photo."\">Stop  Slideshow</a>\n"; }    
    }
    $photobody[]="</div></td><td align=\"right\" width=\"33%\"><div  align=\"right\" class=\"caption\">".$nextphotothumb.$nextphoto."</div></td></tr>";

    //if ($window==1) { $target="<a href=\"javascript:window.close()\">Close  Window</a>"; } else { $target="<a href=\"".$_SERVER['HTTP_REFERER']."\">Back</a>"; }
    $photobody[]='<tr><td colspan="3" align="center">';
    $photobody[]='<img src="'.$photourl.'/'.$photo.'" width="'.$size[0].'"  height="'.$size[1].'" border="0" alt="" class="imageborder" />';
    if ($photo) {
        if ($showexifcomment==1) { $photobody[]='<p  class="photocaption">'.$comment.'</p>'; }
        if ($showfilename==1) { $photobody[]='<p  class="photocaption">'.$photo.'</p>'; }
        if ($showpathname==1) { $photobody[]='<p  class="photocaption">http://'.$_SERVER['HTTP_HOST'].$photourl.'/'.$photo.'</p>'; }
    }
    $photobody[]='</td></tr>';
    $photobody[]='</table>';
}
return $photobody;
}

function display($photobody) {
global $photodir;
getheader();
echo "<!--Created by LGR Computer Enterprises. www.lgr.ca-->\n";
albums(dirname($_SERVER['SCRIPT_FILENAME']));
echo "<div class=\"photobody\">";
foreach ($photobody as $value) {
   echo $value."\n";
}
echo "</div>";  
getfooter();
exit;
}

function albums($dir) {
//for now only one level of albums works.
global $album, $title, $photos, $divider, $logo, $photo;
$dirs=getdirs($dir);
if (isset($logo)) { echo $logo; }
if (isset($album)) { echo "<h1>".$album."</h1>"; } else { echo "<h1>".$title."</h1>  <p>Albums Available</p>"; }

echo "<div class=\"album\"><p>";
if (isset($album) || isset($photo)) { echo "<a   href=\"".$_SERVER['PHP_SELF']."\">$title Home</a>$divider\n"; }
else {  }
if (count($dirs)>0) {
    foreach ($dirs as $value) {
       echo "<a href=\"".$_SERVER['PHP_SELF']."?    album=".urlencode($value)."\">".$value."</a>$divider\n";
    }
}
echo "</p></div>";
}

//returns the header for the page. Checks for a user defined header.
function getheader() {
global $header, $title, $slide, $photodir, $photourl, $pwidth, $pheight,         $thumbsurl, $window,$photo, $photos, $album, $stylesheet;

if(isset($album)) { $query="&amp;album=".urlencode($album); }
if ($slide==1) { $query=$query."&amp;slide=1"; } 

foreach ($photos as $key => $value) {
 if($photo==$value) {
if (array_key_exists($key+1, $photos)) {
    if($photos[$key+1]) {
        $nextslide=$_SERVER['PHP_SELF']."?p=".$photos[$key+1].$query;
    }
}
    else {
        $slide=0;
}
}
}   

if (isset($header) && $header!="NULL" && is_file ($header)) {
    require("$header");
}
else {
echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"';
    echo "\n";
echo '"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">';
    echo "\n";
echo '<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >';
    echo "\n";
    echo '<head>';
    echo '<meta http-equiv="content-type" content="text/html; charset=iso-8859- 1" />';
    echo "\n";
    echo "<title>$title</title>\n";
    echo '<meta name="author" content="Lee Robertson"/>';
    if ($slide==1 && $header=="NULL") { echo "<META HTTP-EQUIV=refresh   CONTENT=\"4; URL=".$nextslide." \">"; }
    echo '<style type="text/css" media="all">@import "'.$stylesheet.'";    </style>';
    echo "\n";
    echo '</head>';
    echo "\n";
    echo '<body>';
    echo "\n";
}
}

//returns the footer for the page. Checks for a user defined footer.
function getfooter() {
global $footer;
if (isset($footer) && $footer!="NULL" && is_file ($footer)) {
    require("$footer");
}
else {
    echo '<div class="lgrfooter"><p>Powered by: <a  href="http://www.photogallery.lgr.ca">LGR Photo</a></p><p><a   href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-     xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p></div>';
    echo '</body></html>';
}
}

$photodir=dirname($_SERVER['SCRIPT_FILENAME']);
$photourl=dirname($_SERVER['PHP_SELF']);
$thumbsurl=dirname($_SERVER['PHP_SELF']);
$photobody=array();

if (isset($_GET['album'])) {
if (in_array($_GET['album'],getdirs(dirname($_SERVER['SCRIPT_FILENAME'])))==FALSE)     {
    $album = NULL;
}
else {
    $album = urldecode($_GET['album']);
}
$photodir=dirname(realpath($_SERVER['SCRIPT_FILENAME']))."/".$album;
$photourl=dirname($_SERVER['PHP_SELF'])."/".$album;
$thumbsurl=dirname($_SERVER['PHP_SELF'])."/".$album;
} 

//To make sure this works both on Linux and Win
$photodir = str_replace("\\", "/", $photodir);

//Get the jpegs from the folder.
$photos=getphotos($photodir);

//check to see if thumbnails are made if not it will make. Adds time to the processing of     the script.
for ($i=0; $i<=count($photos)-1; $i++) {
thumb_maker($photodir."/".$photos[$i], $twidth, $theight);
}

if (count($photos)<=0) {
$photobody[]="";
display($photobody);
exit;
}
if (isset($_GET['pn'])) {
$photonum = htmlentities(strip_tags($_GET['pn']));
$photobody=thumb_gallery($photonum);
}
elseif (isset($_GET['slide'])) {
$slide=$_GET['slide'];
$photo=htmlentities(strip_tags(urldecode($_GET['p'])));
if (file_exists($photodir.'/'.$photo)) {
    $photobody=photo_slides($photo,$pwidth,$pheight);
}
else {
    $photobody=thumb_gallery(0);
}

}
elseif (isset($_GET['p'])) {
$photo=htmlentities(strip_tags(urldecode($_GET['p'])));
if (file_exists($photodir.'/'.$photo)) {
    $photobody=photo_gallery($photo,$pwidth,$pheight);  
}
else {
    $photobody=thumb_gallery(0);
}

}
else {
$photobody=thumb_gallery(0);
}

//output it all to the browser.
display($photobody);
 exit;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:18:01.437

```
$thumbimage = imagecreatefromjpeg($filename); 
```

这条线是你的问题。它专门寻找JPEG。

试试这个技巧：

```
$thumbimage = imagecreatefromstring(file_get_contents($filename)); 
```

这将强制 GD 从文件内容中确定图像的类型。

# jquery - 动画 gif 无法使用 jquery FlexSlider 循环

> ID：13654572
> 
> 赞同：0
> 
> 时间：2012-11-30T23:15:53.160
> 
> 标签：jquery, animated-gif, flexslider

我有一个动画 gif，我懒惰地加载到[FlexSlider 幻灯片](http://www.woothemes.com/flexslider/)的最后一张幻灯片中。

```
var timeout = setTimeout(function() {$(".slides img:last").attr( 'src', '/animation.gif')}, 5000); 
```

使用 FlexSlider api 将幻灯片设置为在最后一张幻灯片上停止`animationLoop: false`

问题是 gif 显示一次动画然后停止。gif 图像被保存到循环中。我还尝试使用 FlexSlider`end`回调重新加载 gif

有没有办法让 gif 循环播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:33:11.047

我最终使用`start`幻灯片上的回调来加载图像并删除了`setTimeout`.

# perl - 验证 Hashref 失败

> ID：13654574
> 
> 赞同：1
> 
> 时间：2012-11-30T23:16:16.723
> 
> 标签：perl, moose, hashref, moosex-types

我正在部署我的软件（第一次在新环境中）并且几乎立即碰壁。

我有一个未通过 HashRef 验证的值，但是我能想到的每个测试都使它看起来应该是有效的。

> 属性（存储）没有通过类型约束，因为： 'HashRef' 的验证失败，值为 MyApp::CatalystAuthStore=HASH(0x7fa98fffa590)...

转储该值会产生一个看起来有效的 hashref：

```
bless( {
     'config' => {
                   'class' => '+MyApp::CatalystAuthStore',
                   'use_userdata_from_session' => 1
                 }
   }, 'MyApp::CatalystAuthStore' ) 
```

当我尝试使用 Scalar::Util::Reftype 进行自我验证时，它会为我的值返回“HASH”。

因此，如果有片刻，我们可以排除我的代码存在的问题，并且考虑到这是第一次在部署时发生，那么有什么好方法可以查看 Moose 的哪些部分在我的构建中无法正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:48:18.400

`HashRef`专门寻找未受祝福的哈希，但您的已受祝福（MyApp::CatalystAuthStore 对象）。也许`MyApp::CatalystAuthStore`会是更合适的类型？如果没有，您可以轻松创建一个同时接受祝福和未祝福哈希的类型。

```
subtype 'AnyHashRef'
   => as 'Defined'
   => where { Scalar::Util::reftype($_) eq 'HASH' }
   => inline_as { "( Scalar::Util::reftype($_[1]) eq 'HASH' )" }; 
```

# d3.js - 在添加之前删除标签

> ID：13654576
> 
> 赞同：0
> 
> 时间：2012-11-30T23:16:23.557
> 
> 标签：d3.js

我试图确保在添加元素之前将其删除。

这就是我的方式。

```
d3.select('.graph').remove();
d3.select('svg').append('line').attr('y',80).attr('x1',0).attr('x2',200).attr('class','graph'); 
```

所以如果我拿出第一条线，这条线就会画出来。
但是，如果我添加第一行，这条线永远不会被绘制。似乎即使应该删除然后添加序列，但不知何故，d3总是在绘制和删除。

我的代码中缺少什么？

# xaml - 如何为 XAML 窗口指定 ViewModel？

> ID：13654580
> 
> 赞同：0
> 
> 时间：2012-11-30T23:16:48.667
> 
> 标签：xaml, binding, dependency-injection

我正在尝试在 XAML 窗口之间共享 ViewModel。这对于允许对象实例的多个视图从 ViewModel 接收事件是必要的。

将 ViewModel 指定为 XAML 中的资源，然后在备用构造函数中覆盖它不起作用。绑定仍将是在默认构造函数中创建的默认实例，并且不会从正确的实例接收事件或更新正确的实例。

**这不起作用：**

MyWindow.xaml：

```
<Window x:Class="MyNamespace.MyWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyNamespace"
    Title="My Window"
    Width="700" Height="550">
<Window.Resources>
    <local:MyViewModel x:Key="MyModel"/>
</Window.Resources>
    <ContentPresenter Content="{StaticResource MyModel}"/>
</Window> 
```

MyWindow.xaml.cs

```
imports ...;

namespace MyNamespace {
    public partial class MyWindow {

        public MyWindow() {
            InitializeComponent();
        }

        public MyWindow(MyViewModel model)
                : this() {
            Resources["MyModel"] = model;
        }
    }
} 
```

**这也不会：**

MyWindow.xaml.cs

```
imports ...;

namespace MyNamespace {
    public partial class MyWindow {

        public MyWindow()
                : this(new MyViewModel()) { }

        public MyWindow(MyViewModel model) {
            Resources["MyModel"] = model; // Resources not yet initialized!
            InitializeComponent();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:01:39.423

如果您使用的是 Microsoft.Practices.Unity ，则可以使用[TransientLifetimeManager](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.transientlifetimemanager%28v=pandp.20%29.aspx)。它将确保仅创建视图模型的一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:16:48.667

MyThis 可以通过使用代码隐藏上的属性并使用 XAML 中的 Binding 标记而不是 StaticResource 来完成，如下所示：

MyWindow.xaml：

```
<Window x:Class="MyNamespace.MyWindow"
    x:Name="this"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyNamespace"
    Title="My Window"
    Width="700" Height="550">
    <ContentPresenter Content="{Binding MyModel, ElementName=this}"/>
</Window> 
```

MyWindow.xaml.cs

```
imports ...;

namespace MyNamespace {
    public partial class MyWindow {

        public MyViewModel MyModel { get; private set; }

        public MyWindow()
                : this(new MyViewModel()) { }

        public MyWindow(MyViewModel model) {
            MyModel = model;
            InitializeComponent();
        }
    }
} 
```

多个窗口（或其他组件）可以使用相同的模型实例。

*2012 年 12 月 6 日编辑：* XAML 不正确，绑定不起作用。将 x:Name 属性添加到根元素 (Window)，并将 ElementName 参数添加到绑定元素 (ContentPresenter) 的 Content 属性。

# ruby - 为什么 net-ssh-2.6.2 无法通过自己的单元测试？

> ID：13654583
> 
> 赞同：2
> 
> 时间：2012-11-30T23:16:59.650
> 
> 标签：ruby, macos, testunit, net-ssh, failing-tests

我已经在我的 Mac（运行 OSX 10.8.2）和 PC（运行 Windows 7）上安装了 ruby​​（1.9.3）。我已经安装（使用“gem install ...”）net-ssh、test-unit、mocha 和 echoe。安装看起来很干净（Mac 抱怨文档中有一些 unicode 垃圾，但我不在乎）。

当我运行发行版中包含的单元测试时，我遇到了失败和错误。它们在 Mac 和 PC 上是不同的。据我所知，我有必要的东西——ssh 正在工作，我的 .ssh 目录存在并且有一个 id_dsa 对和一个 id_rsa 对。

很长一段时间以来，我一直在使用 SSH（shell、sftp、scp 等）与我的 mac 进行连接，所以我认为我的 SSH 堆栈正在工作。

这是一个愚蠢的配置问题，还是 net-ssh/Ruby 中有问题？

在 Mac 上，我通过运行 net-ssh 测试套件得到以下结果：

```
tms-mac:test tms$ ruby -Ilib -Itest -rrubygems test_all.rb

*** Mocha deprecation warning: Change `require 'mocha'` to `require 'mocha/setup'`.

Loaded suite test_all
Started
...............................................................................
......................................F
===============================================================================
Failure:
test_for_should_load_all_files_and_translate_to_net_ssh_options(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:35:in `test_for_should_load_all_files_and_translate_to_net_ssh_options'
     32: 
     33:   def test_for_should_load_all_files_and_translate_to_net_ssh_options
     34:     config = Net::SSH::Config.for("test.host", [config(:exact_match), config(:wild_cards)])
  => 35:     assert_equal 1234, config[:port]
     36:     assert config[:compression]
     37:     assert config[:forward_agent]
     38:     assert_equal %w(~/.ssh/id_dsa), config[:keys]
<1234> expected but was
<nil>

diff:
? 1234
? nil 
===============================================================================
..F
===============================================================================
Failure: <nil> is not true.
test_load_should_parse_equal_sign_delimiters(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:65:in `test_load_should_parse_equal_sign_delimiters'
     62:   
     63:   def test_load_should_parse_equal_sign_delimiters
     64:     config = Net::SSH::Config.load(config(:eqsign), "test.test")
  => 65:     assert config['compression']
     66:     assert_equal 1234, config['port']
     67:   end
     68: 
===============================================================================
F
===============================================================================
Failure: <nil> is not true.
test_load_with_exact_host_match_should_load_that_section(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:19:in `test_load_with_exact_host_match_should_load_that_section'
     16: 
     17:   def test_load_with_exact_host_match_should_load_that_section
     18:     config = Net::SSH::Config.load(config(:exact_match), "test.host")
  => 19:     assert config['compression']
     20:     assert config['forwardagent']
     21:     assert_equal 1234, config['port']
     22:   end
===============================================================================
F
===============================================================================
Failure: <nil> is not true.
test_load_with_multiple_hosts(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:50:in `test_load_with_multiple_hosts'
     47:   
     48:   def test_load_with_multiple_hosts
     49:     config = Net::SSH::Config.load(config(:multihost), "test.host")
  => 50:     assert config['compression']
     51:     assert_equal '2G', config['rekeylimit']
     52:     assert_equal 1980, config['port']
     53:   end
===============================================================================
.F
===============================================================================
Failure:
test_load_with_no_host(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:44:in `test_load_with_no_host'
     41:   
     42:   def test_load_with_no_host
     43:     config = Net::SSH::Config.load(config(:nohost), "test.host")
  => 44:     assert_equal %w(~/.ssh/id_dsa ~/.ssh/id_rsa), config['identityfile']
     45:     assert_equal 1985, config['port']
     46:   end
     47:   
<["~/.ssh/id_dsa", "~/.ssh/id_rsa"]> expected but was
<nil>

diff:
? ["~/.ssh/id_dsa", "~/.ssh/id_rsa"]
? n         l                       
===============================================================================
F
===============================================================================
Failure: <nil> is not true.
test_load_with_numeric_host(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:110:in `test_load_with_numeric_host'
     107:   
     108:   def test_load_with_numeric_host
     109:     config = Net::SSH::Config.load(config(:numeric_host), "1234")
  => 110:     assert config['compression']
     111:     assert_equal '2G', config['rekeylimit']
     112:     assert_equal 1980, config['port']
     113:   end
===============================================================================
F
===============================================================================
Failure: <nil> is not true.
test_load_with_plus_sign_hosts(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:105:in `test_load_with_plus_sign_hosts'
     102:   
     103:   def test_load_with_plus_sign_hosts
     104:     config = Net::SSH::Config.load(config(:host_plus), "test.host")
  => 105:     assert config['compression']
     106:   end
     107:   
     108:   def test_load_with_numeric_host
===============================================================================
F
===============================================================================
Failure:
test_load_with_wild_card_matches_should_load_all_matches_with_first_match_taking_precedence(TestConfig)
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/test_config.rb:26:in `test_load_with_wild_card_matches_should_load_all_matches_with_first_match_taking_precedence'
     23: 
     24:   def test_load_with_wild_card_matches_should_load_all_matches_with_first_match_taking_precedence
     25:     config = Net::SSH::Config.load(config(:wild_cards), "test.host")
  => 26:     assert_equal 1234, config['port']
     27:     assert !config['compression']
     28:     assert config['forwardagent']
     29:     assert_equal %w(~/.ssh/id_dsa), config['identityfile']
<1234> expected but was
<nil>

diff:
? 1234
? nil 
===============================================================================
...............................................................................
...............................................................................
..............................E
===============================================================================
Error: test_authenticate_should_continue_if_method_disallowed(Authentication::TestSession)
  NameError: uninitialized constant Net::SSH::Authentication::Methods::None
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/authentication/test_session.rb:24:in `test_authenticate_should_continue_if_method_disallowed'
     21: 
     22:       Net::SSH::Authentication::Methods::Publickey.any_instance.expects(:authenticate).with("next service", "username", "password").raises(Net::SSH::Authentication::DisallowedMethod)
     23:       Net::SSH::Authentication::Methods::Hostbased.any_instance.expects(:authenticate).with("next service", "username", "password").returns(true)
  => 24:       Net::SSH::Authentication::Methods::None.any_instance.expects(:authenticate).with("next service", "username", "password").returns(false)
     25: 
     26:       assert session.authenticate("next service", "username", "password")
     27:     end
===============================================================================
.E
===============================================================================
Error: test_authenticate_should_return_false_if_all_auth_methods_fail(Authentication::TestSession)
  NameError: uninitialized constant Net::SSH::Authentication::Methods::None
/Users/tms/.rvm/gems/ruby-1.9.3-p327/gems/net-ssh-2.6.2/test/authentication/test_session.rb:50:in `test_authenticate_should_return_false_if_all_auth_methods_fail'
     47:       Net::SSH::Authentication::Methods::Hostbased.any_instance.expects(:authenticate).with("next service", "username", "password").returns(false)
     48:       Net::SSH::Authentication::Methods::Password.any_instance.expects(:authenticate).with("next service", "username", "password").returns(false)
     49:       Net::SSH::Authentication::Methods::KeyboardInteractive.any_instance.expects(:authenticate).with("next service", "username", "password").returns(false)
  => 50:       Net::SSH::Authentication::Methods::None.any_instance.expects(:authenticate).with("next service", "username", "password").returns(false)
     51:       
     52:       assert_equal false, session.authenticate("next service", "username", "password")
     53:     end
===============================================================================
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
...............................................................................
........................

Finished in 2.89621 seconds.

1923 tests, 6101 assertions, 8 failures, 2 errors, 0 pendings, 0 omissions, 0 notifications
99.48% passed

663.97 tests/s, 2106.55 assertions/s 
```

# math - 没有 if/then 逻辑的星/半星评级功能？

> ID：13654584
> 
> 赞同：0
> 
> 时间：2012-11-30T23:17:03.447
> 
> 标签：math, graphics, language-agnostic, quantization

问题是，是否有一种简单的机械方法可以在不使用条件逻辑的情况下知道要绘制哪些星星（金色、1/2 金色、灰色），例如使用基于简单数学函数结果的指向正确星星的指针在五星级显示中生成星级。

这个问题的重点不是评级系统，而是图形显示

我的评分值为 0-100，浮点数。

例如，在伪代码中：

```
bitmap1="http://myserver.com/goldstar.png"
bitmap2="http://myserver.com/halfstar.png"
bitmap3="http://myserver.com/greystar.png"
rating=89.003
possible=100
quantized=int(rating/possible)
imagearray=[bitmap1,bitmap2,bitmap3]

for i=0 to 4
    selector=<compute which star to draw based on available data>
    drawstars(25*i,100,imagearray[selector])
end for 
```

希望这会让您对我正在尝试做的事情有所了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:25:27.727

将显示视为一个比例，但以整数表示，因此以半星表示。例如，如果我们有 5 颗星，并且可以显示半颗星，那么我们的真实刻度是从 0 到 10。那么，我们需要做的是将原始刻度（0 到 100）除以得到 0 到 10。然后我们将整数除以 2。其商将为我们得出要绘制的完整星数，余数为要绘制的半星数（0 或 1）。

不过，您可能需要先进行一些舍入——否则，基本上不可能获得 5 星的评分（例如，即使输入分数为 99，也只能给出 4.5 星）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:35:08.847

嗯，如果我要试一试的话……

在 for 循环中，从 i=1 到 5。

```
if (rating > i*20){ draw a gold star }
else{
    if (rating > (i-1)*20 +10) {draw a half star }
    else {draw a grey star}
} 
```

这当然会给你最低评分

# php - Google PHP API - 是否每个用户都必须通过 API 控制台才能让您的应用程序运行？

> ID：13654593
> 
> 赞同：2
> 
> 时间：2012-11-30T23:17:58.503
> 
> 标签：php, api, oauth, calendar

这是一个很难问的问题，所以我希望我能说清楚！

我正在编写一个访问用户 Gmail 日历的 PHP 脚本。我首先使用 Zend 编写了它，它很棒，但发现我必须使用 Oauth 才能完成任务 - 因此我改写了 Oauth。

为了使用 Oauth，我必须转到我的 API 控制台并设置帐户，然后我就可以访问并且一切正常。这是我的问题：我不能要求每个用户都完成这个创建密钥的技术性步骤以及所有这些，以便我的应用程序可以与他们的 Gmail 一起使用。

Zend 真的很简单，用户给我他们的名字和密码，我就可以访问了。现在我看不到任何使用 Oauth 方法更改帐户的方法，所有凭据都用于单个 Gmail 帐户（据我所知）。

有没有办法在不让用户通过十五圈允许我访问的情况下做我想做的事情？我想注册我的应用程序并获取我的密钥，然后能够指向任何 Gmail 帐户，用户授予我访问权限，我就进入了。否则每个用户都必须在自己的 Gmail 中访问 API 控制台，创建品牌，创建一个密钥，然后创建一个服务器 ID，然后将所有这些提供给我，以便我可以插入它，然后将它们重定向回谷歌，这样他们就可以说“是的，我接受这个”。集成的步骤很多。

我希望这足够清楚:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:17:00.793

That's basically how OAuth works. ONLY the developer that wrote the app needs to register it, get the keys and add that to the configuration.

Users of the app simply get taken to a page (after signing into their Google account) where they will grant access to your app in a single click. Google will remember their decision and the next time will be even faster.

# django - Powerful Debuggers for Django

> ID：13654598
> 
> 赞同：-1
> 
> 时间：2012-11-30T23:18:34.840
> 
> 标签：django, debugging

The Django debugger is absolutely dreading and finding errors is a daunting task.

Are there any third party Django debuggers out there?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:22:41.003

I don't know about Django debuggers, but [PyCharm](https://www.jetbrains.com/pycharm/) by JetBrains is an awesome Python IDE with a built-in debugger. I've been using it for over 2 years (previously a decade long user of their awesome IntellJ Java IDE) for Django work and it's been worth every penny paid.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:34:56.660

[Pydevd](http://pydev.org/manual_adv_remote_debugger.html) plugin for eclipse supports debugging code run from outside the IDE. I find it works great with Django.

It's simple to use - start the debugger from eclipse, then add the line `import pydevd;pydevd.settrace()` and execution will break at that line, allowing you to step through etc from eclipse.

To debug code on a remote machine, include the ip address of the machine running eclipse as an argument to `settrace()` (ie `import pydevd;pydevd.settrace('10.0.0.68')`).

Obviously the pydevd module will neeed to be on your pythonpath.

For installation instructions check the [docs](http://pydev.org/manual_101_install.html).

# c++ - 从一系列图像创建 CvCapture

> ID：13654600
> 
> 赞同：1
> 
> 时间：2012-11-30T23:18:35.270
> 
> 标签：c++, c, opencv

该函数`cvCaptureFromAVI`分配并初始化一个`CvCapture`结构，以便从指定文件中读取视频流。该功能的`cvCaptureFromCAM`工作方式类似，但视频的来源是网络摄像头。一旦`CvCapture`结构被正确分配和初始化，每个帧的读取就使用函数来执行`cvQueryFrame`。

由于我有一系列帧作为图像保存在磁盘上，因此我将分配一个`CvCapture`结构来从指定的文件列表中读取图像流。我应该如何初始化`CvCapture`结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:55:35.640

既然您提到了 OpenCV 的**C** API，那么魔术就是由`cvCreateVideoWriter()`.

这是一个使用 Python[的演示。](https://stackoverflow.com/a/5782246/176769)

# java - 参考麻烦

> ID：13654601
> 
> 赞同：0
> 
> 时间：2012-11-30T23:18:38.170
> 
> 标签：java, reference, parameter-passing

我在使用以下代码时遇到问题。让我来看看代码正在做什么或打算做什么。该`createZoo`方法执行以下操作：

1.  `Cage`它创建一个对象数组
2.  向该数组的每个索引添加一个由两个动物对象组成的配对对象
3.  `newZoo.add(cage[i])`- 这会将笼子对象传递给`Zoo`类中的 add 方法。它被添加到`Zoo`类中的列表中。

当我在`Zoo`类中访问此列表以检索笼对象时，就会出现问题。检索到的笼子对象是不正确的。`cage[i]`很抱歉这里含糊不清，但我认为问题出在上面的第 3 点，当我通过要添加到课堂上的`List<Cage>`笼子的论点时`Zoo`。我应该传递一个索引吗？

谢谢。

```
 class algo{

    private int counter = 15;
    private Zoo newZoo = new Zoo();

    public void createZoo() {

        Cage[] cage = new Cage[counter];

        //initialize cage array with cage objects
        initializeCageArray(cage);

        while(counter>0) //outer while loop
        for(int i =0; i<counter; i++)
        {

            for(int x = 0,y = end of array;x<somecounter; x++, y--)
            {
                Animal animala = Animal.get(x)
                Animal animalb = Animal.get(y);

                cage[i].add(new MatingPair(animala, animalb));

            }

            //adds cage object to list container in zoo class
            //Am I passing the wrong thing here - maybe I need to pass an index?
             newZoo.add(cage[i]);        

            --counter;

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:09:06.507

***将REFERENCE***传递给 是完全`Cage`可以的，`Zoo`而且比将索引传递给`cages[]`.

现在想一想，如果班级想要对对象`Zoo`做某事（据说打开所有笼子！），那么他们将如何访问仅使用. 您还将以某种方式授予对.`Cage``Cage``index``cages[]``Zoo`

因此，如果您直接传递 的引用会更好`Cage`，因为无论如何**操作**笼子都需要对它的引用。

希望这是有道理的。

# javascript - xhr 状态结合循环

> ID：13654602
> 
> 赞同：0
> 
> 时间：2012-11-30T23:18:43.480
> 
> 标签：javascript, google-chrome, xmlhttprequest

我正在尝试在页面中写入有效`images`（存在的图像）的 url `html`。这是输入图像的列表，添加在变量中`urls`：网址是现有和不存在的谷歌产品图标的网址，例如

```
var urls = [
"https://www.google.com/images/icons/product/chart-32.png",
"https://www.google.com/images/icons/product/docs-32.png",
"https://www.google.com/images/icons/product/drive-32.png",
"https://www.google.com/images/icons/product/googlemail-32.png",
"https://www.google.com/images/icons/product/dropbox-32.png",
"https://www.google.com/images/icons/product/reader-32.png",
"https://www.google.com/images/icons/product/test-32.png",
"https://www.google.com/images/icons/product/microsoft-32.png",
"https://www.google.com/images/icons/product/chat-32.png",
"https://www.google.com/images/icons/product/hangouts-32.png",
"https://www.google.com/images/icons/product/maps-32.png",
"https://www.google.com/images/icons/product/map_maker-32.png",
"https://www.google.com/images/icons/product/apple-32.png",
"https://www.google.com/images/icons/product/latitude-32.png",
"https://www.google.com/images/icons/product/sketchup-32.png",
"https://www.google.com/images/icons/product/skymap-32.png",
"https://www.google.com/images/icons/product/google_favicon-32.png",
"https://www.google.com/images/icons/product/mobile_app-32.png",
"https://www.google.com/images/icons/product/mobileapp-32.png",
"https://www.google.com/images/icons/product/goggles-32.png"
]; 
```

要检查并记下文档的图像 url，我使用以下方法：当您有权访问[https://www.google.com/](https://www.google.com/)时，这完全可以正常工作， 因此当人们想要验证这一点时，请使用[https上的 js 控制台://www.google.com/](https://www.google.com/)

```
var xhr = {};
for(var i = urls.length; i-- ; i>0){
  xhr[i] = new XMLHttpRequest();
  xhr[i].open('GET',urls[i]);
  xhr[i].onload = write();
  function write() { 
       document.write(urls[i] + "<br>")
    }
  xhr[i].send(null);
  } 
```

现在只写有效的网址（包括png图标的网址。所以`chart-32.png`有效，但`dropbox-32.png`无效，我尝试了这段代码：

```
var xhr = {};
for(var i = urls.length; i-- ; i>0){
  xhr[i] = new XMLHttpRequest();
  xhr[i].open('GET',urls[i]);
  xhr[i].onload = write();
  function write() { 
    if(xhr[i].status != 404){
       document.write(urls[i] + "<br>")
       }
    }
  xhr[i].send(null);
  } 
```

但由于某种原因，只有当我将其限制为有效的 png 时，它才会在 chrome 中出现此错误：错误：InvalidStateError：DOM Exception 11

有谁知道我做错了什么？和/或如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:24:36.240

Ajax-sync 不需要“onload 回调”。

调整这条线：`xhr[i].open('GET',urls[i]);`

**修复：** `xhr[i].open('GET',urls[i], false);` --为了避免错误

或者替换`document.write`为`document.getElement*`（恰好想用`async-mode`）

同步模式 Ajax，例如：

```
var r = new XMLHttpRequest();
    r.open("GET", "http://www.example.com", false);//Sync mode
    r.send(null);
    if (r.readyState===4 && r.status===200) {
        document.write(**content**);
    } 
```

遵循这条规则（即使不是ajax）：

*   `document.write`与同步模式。
*   `document.getElement*`( `getElementById`, `getElementsByTagName`, `getElementsByClassName`...) 与异步模式。

# javascript - 用数组绘制 D3 简单折线图

> ID：13654609
> 
> 赞同：5
> 
> 时间：2012-11-30T23:19:58.493
> 
> 标签：javascript, json, d3.js

我正在尝试实现此代码：[http](http://bl.ocks.org/3883245) ://bl.ocks.org/3883245 ，但我不是加载 TSV 文件，而是从数组加载数据。这是数组的样子：

```
[["2012-10-02",2],["2012-10-09", 2], ["2012-10-12", 2]] 
```

然后我在它上面应用了这个函数来获取 CSV 格式：`var data = d3.csv.format(BigWordsDates2[ArrayIndex]);`

但仍然没有出现。

这是整个代码：我想我离得到它不远了，但我已经研究了 3 天，但仍然无法让它工作：

```
var margin = {top: 20, right: 20, bottom: 30, left: 50},
        width = 80 - margin.left - margin.right,
        height = 80 - margin.top - margin.bottom;

        var data = d3.csv.format(BigWordsDates2[ArrayIndex]);

        var parseDate = d3.time.format("%Y-%b-%d").parse;

        var x = d3.time.scale()
            .range([0, width]);

        var y = d3.scale.linear()
            .range([height, 0]);

        var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

        var line = d3.svg.line()
            .x(function(d) { return x(d.date); })
            .y(function(d) { return y(d.close); });

        var svg = d3.select("#Graph").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        d3.csv.parseRows(data, function(data) {
          data.forEach(function(d) {
            d.date = parseDate(d.date);
            d.close = parseInt(d.close);
          });

         x.domain(d3.extent(data, function(d) { return d.date; }));
         y.domain(d3.extent(data, function(d) { return d.close; }));

          svg.append("g")
              .attr("class", "x axis")
              .attr("transform", "translate(0," + height + ")")
              .call(xAxis);

          svg.append("g")
              .attr("class", "y axis")
              .call(yAxis)
            .append("text")
              .attr("transform", "rotate(-90)")
              .attr("y", 6)
              .attr("dy", ".71em")
              .style("text-anchor", "end")
              .text("Price ($)");

          svg.append("path")
              .datum(data)
              .attr("class", "line")
              .attr("d", line);
        });` 
```

我想我在 d.date 和 d.close 上也做错了，但我也想不通。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T00:48:10.063

该图表使用以下格式的数据

```
[{ date: '...', close: '...'},
 { date: '...', close: '...'}] 
```

所以，你需要解析你的数组：

```
// fix your data parser
var parseDate = d3.time.format("%Y-%m-%d").parse;

var arrData = [
  ["2012-10-02",200],
  ["2012-10-09", 300], 
  ["2012-10-12", 150]];

// create a new array that follows the format
var data = arrData.map(function(d) {
    return {
      date: parseDate(d[0]),
      close: d[1]
    };
}); 
```

这是工作版本：http: [//jsfiddle.net/jaimem/T546B/](http://jsfiddle.net/jaimem/T546B/)

pd：根据您可能需要修改`y`规模域的数据。

# python - 如何将多个文件添加到py2app？

> ID：13654610
> 
> 赞同：5
> 
> 时间：2012-11-30T23:20:04.587
> 
> 标签：python, import, package, py2app

我有一个制作 GUI 的 python 脚本。当在此 GUI 中按下“运行”按钮时，它会像这样从导入的包（我制作的）中运行一个函数

```
from predictmiP import predictor
class MiPFrame(wx.Frame):
    [...]
    def runmiP(self, event):
         predictor.runPrediction(self.uploadProtInterestField.GetValue(), self.uploadAllProteinsField.GetValue(), self.uploadPfamTextField.GetValue(), \
                   self.edit_eval_all.Value, self.edit_eval_small.Value, self.saveOutputField) 
```

当我直接从 python 运行 GUI 时，一切正常，程序编写了一个输出文件。然而，当我把它变成一个应用程序时，GUI 会启动，但是当我按下按钮时没有任何反应。predictmiP 确实包含在 build/bdist.macosx-10.3-fat/python2.7-standalone/app/collect/ 中，就像我正在使用的所有其他导入一样（虽然它是空的，但这与所有其他导入相同我有）。

如何获取多个 python 文件或导入的包以与 py2app 一起使用？

我的 setup.py：

""" 这是py2applet生成的setup.py脚本

用法：python setup.py py2app """

```
from setuptools import setup

APP = ['mip3.py']
DATA_FILES = []
OPTIONS = {'argv_emulation': True}

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
) 
```

* * *

编辑：

看起来它起作用了，但它只起作用了一点。从我的 GUI 我打电话

```
 blast.makeBLASTdb(self.uploadAllProteinsField.GetValue(), 'allDB')

 # to test if it's working
 dlg = wx.MessageDialog( self, "werkt"+self.saveOutputField, "werkt", wx.OK)
 dlg.ShowModal() # Show it
 dlg.Destroy() # finally destroy it when finished. 
```

blast.makeBLASTdb 看起来像这样：

```
def makeBLASTdb(proteins_file, database_name):  
    subprocess.call(['/.'+os.path.realpath(__file__).rstrip(__file__.split('/')[-1])+'blast/makeblastdb', '-in', proteins_file, '-dbtype', 'prot', '-out', database_name]) 
```

这个函数被调用，我通过子进程调用的 makeblastdb 确实输出了一个文件。然而，程序并没有继续，

```
dlg = wx.MessageDialog( self, "werkt"+self.saveOutputField, "werkt", wx.OK)
dlg.ShowModal() # Show it 
```

在接下来的几行中永远不会被执行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T10:17:35.830

py2app（或者更确切地说，setup.py）不会神奇地包含文件，只是因为您在应用程序代码中导入它们。

根据您的描述，我不太清楚 predictmiP.py 文件的位置、mip3.py 文件的位置、setup.py 文件的位置以及目录树的其余部分的外观。

因此，关于打包 Python 文件的一些一般说明（另请参见[http://docs.python.org/2.7/distutils/index.html](http://docs.python.org/2.7/distutils/index.html)）。如果你只有几个文件，你可以明确列出它们：

```
setup(
    py_modules=['file1', 'file2']
) 
```

这将包括`file1.py`和`file2.py`。如果你有很多文件，那当然会很乏味，所以你可以告诉 setup.py 包含它找到的所有 Python 文件，如下所示：

```
setup(
    package='example',
) 
```

这需要一个名为 的目录`example`，其中包含一个`__init__.py`，并将包含在那里找到的所有 Python 文件。

如果您有不同的目录布局，例如`src`包含 Python 文件的目录，请将其设置为：

```
setup(
    package='example',
    package_dir={'': 'src'}
) 
```

这需要一个目录`src/example`，并包含下面的 Python 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T23:01:27.257

由于您的 setup.py 没有提供，我猜它不像：

```
from setuptools import setup

OPTIONS = {'packages' : ['predictmiP']}

setup(app=someapp.py, options={'py2app' : OPTIONS},
      setup_requires=['py2app']) 
```

或者，也许你正在寻找`OPTIONS['includes']`？或者也许`OPTIONS['frameworks']`？

# c++ - 克鲁斯卡尔算法解释

> ID：13654613
> 
> 赞同：1
> 
> 时间：2012-11-30T23:20:58.297
> 
> 标签：c++, algorithm, greedy, kruskals-algorithm

我正在阅读 wikipeida 并发现 Kruskal 的伪代码如下：

```
KRUSKAL(G):    
    foreach v ∈ G.V:    
        MAKE_SET(v)    
    G.E = sort(G.E)    
    i = 0    
    while (i != |V|-1):      
        pick the next (u, v) edge from sorted list of edges G.E        
        if (FIND_SET(u) != FIND_SET(v)):          
            UNION(u, v)        
            i = i + 1 
```

我不确定是什么`FIND_SET()`，维基百科有以下描述：

> 如果该边连接两棵不同的树，则将其添加到森林中，将两棵树组合成一棵树。

所以我想它会检查是否连接了两棵不同的树，但这到底意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T23:26:47.637

最初，每个顶点都在一个集合中：`{v}`每个顶点都有一个单例集合`v`。在伪代码中，这些集合是`make_set(v)`.

对于给定的顶点`v`，该函数`find_set(v)`为您提供包含 的集合`v`。

该算法迭代地合并集合，因此如果`{u}`,`{v}`最初是单例集合并且存在一条边`(u, v)`，则该算法用它们的并集替换这两个集合`{u, v}`。现在两者都`find_set(u)`将`find_set(v)`返回该集合。

该算法在您添加`|V| - 1`非平凡边后终止，这正是树中的边数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:26:06.480

FIND_SET(x) 找到与边 x 关联的集合，因此比较：

```
FIND_SET(u) != FIND_SET(v) 
```

确保 u 和 v 没有连接到同一事物。一种有用的思考方式是它找到 u 和 v 的“值”，其中值本身就是集合。

关于合并森林的部分与 FIND_SET 无关，而是下一行：

```
UNION(u,v) 
```

这合并了两组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:28:20.800

这`find_set()`是一种称为Union-Find的数据结构的常见操作。这个数据结构的想法是有不相交的集合（在你的例子中是顶点）。

在这个算法中，我认为每个集合代表连接的顶点。

因此，当您调用`find_set()`传递顶点时，您将收到表示该连接顶点集的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T07:56:32.980

```
find_set(u)!=find_set(v) 
```

表示生成树的基本属性，即它不产生循环。如果它们相等，则表明图中存在循环。

我们基本上通过 Kruskal 算法制作了一个森林（具有最小边权重），并在每一步检查它是否在循环。

希望能帮助到你 ：）

# ruby - 如何在 RSpec 中检查 Nil 的变化

> ID：13654614
> 
> 赞同：17
> 
> 时间：2012-11-30T23:21:06.460
> 
> 标签：ruby, rspec, null

所以我很确定这会奏效......

```
expect { file.send(:on_io) {} }.to change{
  file.io.class
}.from( NilClass ).to( File ) 
```

但此消息失败...

```
result should have initially been NilClass, but was NilClass 
```

*胡?*

首先，为什么这会返回失败？`be_nil`其次，我知道通常您可以使用该`nil?`方法检查 nil 。`from().to()`在 RSpec 中是否有一些特殊的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-01T00:58:17.163

这应该有效：

```
expect { file.send(:on_io) {} }.to change{
  file.io
}.from(NilClass).to(File) 
```

rspec 将用于`===`比较 和 中的`from`值`to`。但是`===`不是可交换的，当在一个类上调用时，它会检查它的参数是否是该类的一个实例。所以：

```
NilClass === NilClass
#=> false 
```

因为 NilClass 不是 NilClass 的实例。另一方面，

```
NilClass === nil
#=> true
nil === nil
#=> true
nil === NilClass
#=> false 
```

因为 nil 是 NilClass 的一个实例，所以 nil 等于 nil，但 nil 不等于 NilClass。

你也可以这样写你的测试：

```
expect { file.send(:on_io) {} }.to change{
  file.io
}.from(nil).to(File) 
```

我认为这是最易读的。

# c++ - CvCapture 结构和 VideoCapture 结构有什么区别？

> ID：13654623
> 
> 赞同：7
> 
> 时间：2012-11-30T23:23:04.277
> 
> 标签：c++, c, opencv

OpenCV中的`CvCapture`结构和结构有什么区别吗？`VideoCapture`如果是这样，我应该何时使用`CvCapture`以及何时使用`VideoCapture`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T00:54:04.683

`VideoCapture`是来自新的 C++ 接口，`CvCapture`不再有公共接口可供使用。

使用 C++ API 时，`VideoCapture`应使用。您应该避免混合使用这两个接口。

如果您使用的是 C API，而不是 C++ API，有几个方法会返回一个`CvCapture`指针，例如`cvCaptureFromFile`.

# jsf-2 - 使用带有自定义 HTTP 标头的托管 Bean 生成 PDF

> ID：13654625
> 
> 赞同：0
> 
> 时间：2012-11-30T23:23:29.330
> 
> 标签：jsf-2, http-headers, reporting, jdeveloper, oracle-adf

# 背景

使用 ADF 任务流生成各种格式的报告（例如，PDF、分隔、HTML）。

# 问题

HTTP 标头被发送两次：一次由框架发送，一次由 bean 发送。

## 源代码

源代码包括：

*   按钮动作
*   托管豆
*   任务流

### 按钮动作

按钮动作：

```
<af:commandButton text="Report" id="submitReport" action="Execute" /> 
```

### 托管豆

托管 Bean 相当复杂。代码 to`responseComplete`被调用，但是它似乎没有被足够早地调用以防止应用程序框架编写 HTTP 标头。

*HTTP 响应标头覆盖*

```
/**
 * Sets the HTTP headers required to indicate to the browser that the
 * report is to be downloaded (rather than displayed in the current
 * window).
 */
protected void setDownloadHeaders() {
  HttpServletResponse response = getServletResponse();
  response.setHeader( "Content-Description", getContentDescription() );
  response.setHeader( "Content-Disposition", "attachment, filename="
    + getFilename() );
  response.setHeader( "Content-Type", getContentType() );
  response.setHeader( "Content-Transfer-Encoding",
    getContentTransferEncoding() );
} 
```

*问题响应完成*

```
getFacesContext().responseComplete(); 
```

*Bean 运行和配置*

```
public void run() {
  try {
    Report report = getReport();
    configure(report.getParameters());
    report.run();
  } catch (Exception e) {
    e.printStackTrace();
  }
}

private void configure(Parameters p) {
  p.put(ReportImpl.SYSTEM_REPORT_PROTOCOL, "http");
  p.put(ReportImpl.SYSTEM_REPORT_HOST, "localhost");
  p.put(ReportImpl.SYSTEM_REPORT_PORT, "7002");
  p.put(ReportImpl.SYSTEM_REPORT_PATH, "/reports/rwservlet");
  p.put(Parameters.PARAM_REPORT_FORMAT, "pdf");

  p.put("report_cmdkey", getReportName());
  p.put("report_ORACLE_1", getReportDestinationType());
  p.put("report_ORACLE_2", getReportDestinationFormat());
} 
```

### 任务流

任务流调用 Execute，它指的是 bean 的`run()`方法：

```
entry -> main -> Execute -> ReportBeanRun 
```

在哪里：

```
 <method-call id="ReportBeanRun">
    <description>Executes a report</description>
    <display-name>Execute Report</display-name>
    <method>#{reportBean.run}</method>
    <outcome>
      <fixed-outcome>success</fixed-outcome>
    </outcome>
  </method-call> 
```

bean 被分配给`request`范围，具有一些托管属性：

```
 <control-flow-rule id="__3">
    <from-activity-id>main</from-activity-id>
    <control-flow-case id="ExecuteReport">
      <from-outcome>Execute</from-outcome>
      <to-activity-id>ReportBeanRun</to-activity-id>
    </control-flow-case>
  </control-flow-rule>

  <managed-bean id="ReportBean">
    <description>Executes a report</description>
    <display-name>ReportBean</display-name>
    <managed-bean-scope>request</managed-bean-scope>
    ...
  </managed-bean> 
```

这`<fixed-outcome>success</fixed-outcome>`让我觉得不正确——我不希望方法调用返回到另一个任务。

# 限制

报表服务器以独占方式接收来自 Web 服务器的请求。出于安全原因，浏览器不能使用报表服务器 URL 直接下载。

# 错误信息

生成的错误消息：

> 从服务器收到重复的标头
> 
> 错误 349 (net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION)：收到多个不同的 Content-Disposition 标头。不允许这样做以防止 HTTP 响应拆分攻击。

然而，报告*正在*生成。阻止框架编写 HTTP 标头将解决此问题。

# 问题

在使用任务流通过调用托管 bean 生成 PDF 时，如何在 ADF 中设置 HTTP 标头？

# 想法

一些额外的想法：

*   覆盖页面生命周期阶段侦听器 ( `ADFPhaseListener`+ `PageLifecycle`)
*   在 Web 服务器上开发自定义 Servlet

# 相关链接

*   [http://www.oracle.com/technetwork/middleware/bi-publisher/adf-bip-ucm-integration-179699.pdf](http://www.oracle.com/technetwork/middleware/bi-publisher/adf-bip-ucm-integration-179699.pdf)
*   [http://www.slideshare.net/lucbors/reports-no-notes#btnNext](http://www.slideshare.net/lucbors/reports-no-notes#btnNext)
*   [http://www.techartifact.com/blogs/2012/03/calling-oracle-report-from-adf-applications.html?goback=%2Egde_4212375_member_102062735](http://www.techartifact.com/blogs/2012/03/calling-oracle-report-from-adf-applications.html?goback=%2Egde_4212375_member_102062735)
*   [http://docs.oracle.com/cd/E29049_01/web.1112/e16182/adf_lifecycle.htm#CIABEJFB](http://docs.oracle.com/cd/E29049_01/web.1112/e16182/adf_lifecycle.htm#CIABEJFB)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:45:07.287

问题是 RFC 2183 的错误实现：

```
response.setHeader( "Content-Disposition", "attachment; filename="
  + getFilename() ); 
```

`;`不能`,`是.

# prestashop - 在 Prestashop 中获取产品标签

> ID：13654626
> 
> 赞同：2
> 
> 时间：2012-11-30T23:23:46.100
> 
> 标签：prestashop

我是 Prestashop 的新手，我真的很挣扎。缺乏好的文档是一个真正的缺点，有时我喜欢尝试 Magento 或类似的东西。

无论如何，我试图让产品页面仅在该产品带有特定标签时才显示信息。我在互联网上搜索了大约 3 个小时，但找不到任何解决此问题的方法。

我该怎么做？有大佬能指点一下方向吗？

顺便说一句，我正在使用 1.5

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-21T14:56:09.503

if you use prestashop 1.5 you need

```
 //this is your prooduct id that you get it from your url
   $id_product=Tools::getValue('id_product');
   //the you use it to return all of your tags of this product with this id product
   //but this return two array for example: array(array(tags))
   $productTags =Tag::getProductTags($id_product);
   //add this code return array(tags) ;
   $productTags=$productTags[intval(Context::getContext()->cookie->id_lang)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:02:14.547

您可以查看 Product 类。例如： Tag::getProductTags($id_product) 函数

问候

# php - 电子邮件接收者未解析 ADF XML

> ID：13654627
> 
> 赞同：0
> 
> 时间：2012-11-30T23:23:47.473
> 
> 标签：php, xml, email

我使用 GravityForms（基于 Wordpress，但与 Wordpress 无关）构建了一个程序，该程序从潜在客户输入表单中获取数据并将表单的内容（包括各种隐藏字段等）输出到 ADF 格式的 XML。XML 由应该解析数据的电子邮件帐户接收。它正在工作。现在，六个月后，我无缘无故地弄清楚，事实并非如此。XML 结构完全相同。电子邮件的格式仍然相同（纯文本，非 HTML）。什么都没有改变，但现在它不起作用。

系统继续从其他来源接收 ADF / XML 潜在客户数据而不会出现故障，但由于某种原因不再使用我们的东西。以下是发送内容的示例：

```
<?XML VERSION=“1.0”?>
<?ADF VERSION="1.0"?>
<adf>
    <prospect>
        <requestdate>2012-11-30</requestdate>
        <vehicle>
            <year>2013</year>
            <make>Audi</make>
            <model>A4 2.0T</model>
        </vehicle>
        <customer>
            <contact>
                <name part="full">TESTING ADF LEAD FORM – XML STRUCTURE REVISED</name>
                <phone>(123)456-7890</phone> 
                <email>someonewho@isntme.com</email>
            </contact>
                <comments>Not Specified</comments>
        </customer>
        <vendor>
            <contact>
                <name part="full">VENDOR NAME</name> 
                <phone>123-456-7890</email>
                <email>test@autowebsite.com</phone>                                                                                                                       
            </contact> 
        </vendor> 
        <provider> 
            <name part="full">PROVIDER NAME</name> 
            <service>SERVICE</service>
            <url>http://somewhere.com/</url>
            <email>test@somewhere.com</email>
            <phone>123-456-7890</phone> 
        </provider>  
    </prospect> 
</adf> 
```

使用原生 Wordpress 邮件功能（也可以使用 PHPmailer，同样的概念），并格式化为文本。基本上以上述 XML 代码作为正文发送纯文本电子邮件。

注意：接收数据的 CRM 中没有任何变化。没有升级或修改。它只是停止工作，无法弄清楚为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T21:58:01.767

几天来我一直在为类似的问题苦苦挣扎，终于通过一些调整让它工作了。

```
<?xml version="1.0"?>
<prospect>
    <id source="Your_Company" sequence="1"></id>
    <requestdate>2012-11-30</requestdate>
    <vehicle status="" interest="buy">
        <year>2013</year>
        <make>Audi</make>
        <model>A4 2.0T</model>
    </vehicle>
    <customer>
        <contact>
            <name part="first">TEST_FIRSTNAME</name>
            <name part="last">TEST_LASTNAME</name>
            <email preferredcontact="1">someonewho@isntme.com</email>
            <phone type="voice">(123)456-7890</phone>
            <address>
                <street line="1">123 Main St</street>
                <city>SomeCity</city>
                <regioncode>MT</regioncode>
                <postalcode>12345</postalcode>
                <country>USA</country>
            </address>
        </contact>
        <timeframe>24 hours</timeframe>
        <comments>We put a disclaimer here.</comments>
    </customer>
    <vendor>
        <id source="Your_Company" sequence="1"></id>
        <vendorname>VendorName</vendorname>
        <contact>
            <name part="full">John Doe</name>
            <email>dealercontact@dealer.com</email>
            <phone type="voice">123-456-7890</phone>
            <address>
                <street line="1">123 Dealer St.</street>
                <city>DealerCity</city>
                <regioncode>MT</regioncode>
                <postalcode>12345</postalcode>
                <country>USA</country>
            </address>
        </contact>
    </vendor>
    <provider>
        <id source="Your_Company" sequence="1">Your_Company</id>
        <name part="full">Your_Company.com</name>
        <service>Your_Company.com</service>
    </provider>
</prospect> 
```

它与 ADF 文档并不真正内联，但它适用于我们在几个不同的 CRM 中。我知道这个话题有点老了，但我希望它有帮助！

# linux - 调用线程构造函数时的段错误

> ID：13654631
> 
> 赞同：2
> 
> 时间：2012-11-30T23:24:23.560
> 
> 标签：linux, multithreading, segmentation-fault

我被困住了，可以用一双新鲜的眼睛。

我有一个相对简单的 Linux 程序，我使用 CodeSourcery 工具链为 Variscite OMAP4 开发板进行了交叉编译。该程序只是创建一个线程，等待线程完成并存在。该线程只输出几个字符串，中间有睡眠。

我的问题是线程创建后线程中的程序分段错误。回溯表明该崩溃发生在标准共享库中。GDB 可以告诉我加载的库不是加载的 .so 文件的地址，所以我不知道哪个库崩溃以及库中的偏移量。

下面是代码、构建输出、程序输出和 GDB 输出。

任何人都有一些想法可以检查以帮助找到根本原因？

我的主程序

```
#include <thread>
#include <iostream>
using namespace std;

void MyThreadStart ();

int main ()
{
  cout << "main started." << endl;
  std::thread t2 (&MyThreadStart);
  cout << "thread CTOR invokved." << endl;
  t2.join();
  cout << "thread join completed." << endl;
  return 0;
} 
```

我的线程.cpp

```
#include <iostream>
using namespace std;
#ifdef __cplusplus
extern "C" {
#include <unistd.h>
}
#endif

void MyThreadStart ()
{
  cout << "thread started." << endl;
  int loops = 3;
  while (loops--)
  {
    cout << "thread going to sleep." << endl;
    sleep (2);
    cout << "thread woke up." << endl;
    sleep (1);
  }
} 
```

制作输出

```
16:51:39 **** Build of configuration Debug for project SegFaultTest ****
make all
Building file: ../MyMain.cpp
Invoking: ARM Sourcery Linux GCC C++ Compiler
arm-none-eabi-g++ -nostdinc -nostdinc++ -I/opt/arm/arm-none-linux-gnueabi/libc/usr/include -I/opt/arm/lib/gcc/arm-none-linux-gnueabi/4.7.2/include -I/opt/arm/arm-none-linux-gnueabi/include/c++/4.7.2 -I/opt/arm/arm-none-linux-gnueabi/include/c++/4.7.2/arm-none-linux-gnueabi -O0 -Wall -Wa,-adhlns="MyMain.o.lst" -fno-exceptions -fno-rtti -c -fmessage-length=0 -std=c++11  -mno-thumb-interwork -MMD -MP -MF"MyMain.d" -MT"MyMain.d" -mcpu=arm7 -g3 -gdwarf-2 -o "MyMain.o" "../MyMain.cpp"
Finished building: ../MyMain.cpp

Building file: ../MyThread.cpp
Invoking: ARM Sourcery Linux GCC C++ Compiler
arm-none-eabi-g++ -nostdinc -nostdinc++ -I/opt/arm/arm-none-linux-gnueabi/libc/usr/include -I/opt/arm/lib/gcc/arm-none-linux-gnueabi/4.7.2/include -I/opt/arm/arm-none-linux-gnueabi/include/c++/4.7.2 -I/opt/arm/arm-none-linux-gnueabi/include/c++/4.7.2/arm-none-linux-gnueabi -O0 -Wall -Wa,-adhlns="MyThread.o.lst" -fno-exceptions -fno-rtti -c -fmessage-length=0 -std=c++11  -mno-thumb-interwork -MMD -MP -MF"MyThread.d" -MT"MyThread.d" -mcpu=arm7 -g3 -gdwarf-2 -o "MyThread.o" "../MyThread.cpp"
Finished building: ../MyThread.cpp

Building target: SegFaultTest.elf
Invoking: ARM Sourcery Linux GCC C++ Linker
arm-none-eabi-g++ -Wl,-Map,SegFaultTest.map -mcpu=arm7 -g3 -gdwarf-2 -o "SegFaultTest.elf"  ./MyMain.o ./MyThread.o   -lpthread

Finished building target: SegFaultTest.elf 
```

程序输出

```
$ ./SegFaultTest.elf
main started.
thread CTOR invokved.
Segmentation fault (core dumped) 
```

GDB 输出

```
info shared
From        To          Syms Read   Shared Object Library
                        No          /lib/arm-linux-gnueabihf/libpthread.so.0
                        No          /usr/lib/arm-linux-gnueabihf/libstdc++.so.6
                        No          /lib/arm-linux-gnueabihf/libm.so.6
                        No          /lib/arm-linux-gnueabihf/libgcc_s.so.1
                        No          /lib/arm-linux-gnueabihf/libc.so.6
                        No          /lib/ld-linux.so.3
bt
#0  0xb6f5e3d0 in ?? ()
#1  0xb6fb8ed2 in ?? ()
Backtrace stopped: frame did not save the PC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:23:08.583

经过更多的调查和实验，我确定崩溃是由于我正在使用的 Variscite 板的 stdc++ 库中的缺陷而发生的。我在我的代码中启用了 2011 C++ 标准扩展，所以我可以使用线程类。当调用线程构造函数时，pthread 库 start_thread 函数调用了 stdc++ 库中的一些未知函数，并发生崩溃。我将代码更改为不使用 2011 C++ 扩展，而是使用 pthread 调用，然后我的简单代码就可以工作了。我已经通知 Variscite 这个缺陷。

# java - bash eval 未检测到 System.exit 返回代码

> ID：13654633
> 
> 赞同：5
> 
> 时间：2012-11-30T23:25:13.947
> 
> 标签：java, bash, error-handling

挣扎了一个小时...... java代码：

```
ULogger.info("throwing out 666!");
System.exit(666); 
```

bash 包装器：

```
eval ${COMMAND_TO_RUN}
ret_code=$?
printf "error code : [%d]" ${ret_code} 
```

输出：

```
[2012-11-30 15:20:12,971][INFO ] throwing out 666!
error code : [0] 
```

这是怎么回事？谢谢...

[编辑]

`${COMMAND_TO_RUN}`是_

```
((java -Xmx9000m -Dtoday_nix=20121128 -cp "/usr/lib/hadoop/conf" com.paypal.risk.ars.linking.task_fw.BaseRunnableProcess 3>&1 1>&2 2>&3) | tee /dev/tty) > batches_errors.log 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T01:19:57.790

你的问题出在你的`COMMAND_TO_RUN`：

```
((java -Xmx9000m -Dtoday_nix=20121128 -cp "/usr/lib/hadoop/conf" com.paypal.risk.ars.linking.task_fw.BaseRunnableProcess 3>&1 1>&2 2>&3) | tee /dev/tty) > batches_errors.log 
```

最后调用的程序是`tee`，它将以状态退出`0`，覆盖退出值`java`。

您可以使用`$PIPESTATUS`，它是管道中的返回值数组。

例如：

```
$ cat nonexistantFile | echo ; echo "e: $? p: ${PIPESTATUS[@]}" 
```

预期输出：

```
e: 0 p: 1 0 
```

`cat`将失败（退出代码 1），回显将成功（退出代码 0）。`$?`将`0`。 `${PIPESTATUS[0]}`将包含 ( ) 的退出代码`cat`和`1`echo `${PIPESTATUS[1]}`( `0`) 的退出代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-30T23:49:42.727

这是因为 $? 几乎可以肯定会给你返回码`eval`，在这里成功。你为什么把`eval`电话包括在内？只需调用`COMMAND_TO_RUN`

# php - 为 Wordpress 博客使用父站点的标题

> ID：13654636
> 
> 赞同：1
> 
> 时间：2012-11-30T23:25:29.070
> 
> 标签：php, database, wordpress, header, footer

我刚刚完成了一个客户的网站：[http ://wallstreetprep.com](http://wallstreetprep.com)

该站点使用三个独立的数据库——一个用于主站点，一个用于两个单独的 Wordpress 安装。使用网站的主导航来绘制地图：“IB 行业概览、IB 行业资源和 IB 薪资概览”都使用一个 Wordpress 安装。“访问 WSP 博客”使用另一个 Wordpress 安装。该站点的其余部分是一个非 Wordpress 数据库——我们称之为“父站点”。

我的问题：是否可以（简单？）为 Wordpress 安装使用父站点的页眉和页脚 php 文件。我的意思是使用相同的 php 文件而不是重复文件。在当前站点中，我不得不在其他两个数据库上复制父站点的页眉和页脚，因此导航对用户来说似乎是全局的。这显然是非常低效的，因为如果我必须更改页眉或页脚中的某些内容，我必须在 3 个不同的地方进行。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:58:35.810

You should be able to do this with simple php includes. Something like this:

```
<?php include '/path/to/header.php'; ?> 
```

and then the same thing for the footer.

# xml - 如何掌握如何在 magento 扩展开发中构建 config.xml？

> ID：13654637
> 
> 赞同：0
> 
> 时间：2012-11-30T23:25:49.037
> 
> 标签：xml, magento, config, core

> **可能重复：**
> [Magento XML 以简单的英语构建？](https://stackoverflow.com/questions/13461221/magento-xml-build-up-in-plain-english)

说真的，不是在开玩笑。我花了整整一周的时间试图找出 config.xml 中的节点以及它们与控制器、模型、集合、块、模板等的关系，但无济于事。

我熟悉 MVC 结构，并且大体上了解 magento 是如何向其中添加内容的。

我也明白，由于每个模块或扩展在本质上都是独一无二的，config.xml 也是独一无二的，因此很难创建涵盖它的文档。

所以问题是，你知道有什么好的资源可以对此有所帮助吗？您是如何牢牢掌握这个强大应用程序的开发的？

# c - 在功能有限的微控制器上加载和运行小脚本？

> ID：13654640
> 
> 赞同：3
> 
> 时间：2012-11-30T23:26:09.303
> 
> 标签：c, scripting, embedded, interpreter, microcontroller

我正在使用功能强大的 32 位微控制器 STM32F4（具有 192K RAM 和 1024K 闪存）做一个项目。我正在使用 C。我希望创建的系统由这个控制器（我称之为“主机”）和一个小模块（“客户端”）组成。

客户端只包含一个内存库和一个 LED 控制器，它们都使用相同的数据线 (I2C) 连接到主机。主机可以从内存中读取并发送命令来控制客户端上的 LED 输出。

我希望能够直接在客户端的内存上编写代码。然后在运行时，主机将从客户端拉取代码并运行它——代码将被限制为做两件事：

*   以任意方式操作变量
*   根据这些变量向 LED 驱动器发送命令。

我想要这些限制，以便任何人都可以为客户端编写代码，而不会对主机进行恶意操作。为此，我正在寻找一种在微控制器上运行脚本语言解释器的方法。然后，客户端上的代码将是文本格式，并将在主机上进行解释。

我已经研究过 eLua，但看起来它需要我将主机上的所有 C 代码实现为 Lua 库，我想避免这种情况。有谁知道一个解决方案，我可以只连接到 I2C 库并运行简单的脚本而不会太痛苦？

如果没有，有什么东西可以让我自己构建这个简单的解释器吗？

如果需要，我可以提供任何澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-04T09:48:14.470

您有两个变体在单个引擎上运行：字节码解释器。今天我发现了这个介绍视频：[http](http://www.youtube.com/watch?v=OjaAToVkoTw) ://www.youtube.com/watch?v= OjaAToVkoTw 从头开始​​制作 VM 的非常简单的教程。

还有两种变体：

1.  交叉/目标方案：在主机（Windows/Linux/...）上运行您自己编写的编译器（flex/bison 作为第一个候选者），并轻松将使用字节码图像传输到 Cortex-M 目标，或
2.  自托管编译器在目标 Cortex-M 上运行：(a) 以本机代码或 (b) 以字节码自身编写

作为一个最简单的变体，你可以实现 FORTH 系统——它的解析器需要唯一的词法分析器，你可以在一个小时内从头开始编写，或者通过 flex 生成。您可以找到很多 FORTH，其中一些适用于 (1) 方法：主机编译器和通过 UART 连接的目标字节码解释器。

# fonts - css line-height 在 IE、Safari 和 Chrome 中的渲染方式不同

> ID：13654642
> 
> 赞同：6
> 
> 时间：2012-11-30T23:26:23.323
> 
> 标签：fonts, css, cross-browser

前言：最初我只记住 Windows，但在 Mac Air 上测试了一段时间后，我意识到那里的情况更糟。尽管在实际代码中它不是那么麻烦，尽管存在一些不一致之处。

这是测试 [http://jsbin.com/ehegaj/6/edit](http://jsbin.com/ehegaj/6/edit)

简而言之，发生了什么事。我在应用`line-height`属性的地方有标题，这始终是一行标题，所以我锁定了高度只是为了适合字体。在不同的浏览器（和操作系统）中，您可以看到不同的文本布局。有什么想法可以解决吗？

UPD：这里[http://jsbin.com/uzucuf/1/edit](http://jsbin.com/uzucuf/1/edit)是我所做的真实工作的非常接近的例子，同样它并不像上面的示例测试那么糟糕，但仍然有移动像素。

UPD2：

做了更多的测试，主要集中在 Windows 7 上，并且包含带有不同行高的不同浏览器的测试屏幕截图的图像。您可以看到它们之间的视觉不一致。

![](../Images/f1d0930f4f17c55ab7d14d25e6f4ae87.png)

它大约是 1px，所以实际上我可以通过使用 line heeight 29px 并为 IE 提供不同的 line height 30px 来修复它。虽然我只是将其保留为 30px 行高并忽略 safari，所以在这一点上我很好。

所以只是好奇为什么会这样？这种渴望迫使花费几个小时浏览不同的资源：

[这家伙](https://stackoverflow.com/questions/4474636/is-it-possible-to-achieve-line-height-consistency-in-all-browsers)，看起来也有同样的问题，但只是摆脱了寻找问题的原因。

[其他人](https://makandracards.com/makandra/859-cross-browser-height-and-line-height)建议只使用偶数值，`line-height`在我看来这有点奇怪:) 如果我在这里做错了，请纠正我。

[其他一些](https://web.archive.org/web/20130331072943/http://www.giantisland.com:80/Resources/CSSLineHeightUnits.aspx)但有点不相关的话题只是很感兴趣继续阅读。

[最后](https://web.archive.org/web/20140705031318/http://www.webfonts.info:80/node/330)，看起来我找到了答案，它有点模糊但实际上是有道理的。

> **1\. 三组行距值**
> 由于根深蒂固的 TrueType 和 OpenType 字体格式的历史原因，每个 webfont 都带有三组行距值。
> 
> 在 System 7 中引入的“旧 Mac”集。在旧 Mac OS 中，如果字形到达“旧 Mac”行距线的上方或下方，则字形将被垂直挤压以适应。
> 
> 在 Windows 3.1 中引入的“旧 Windows”集，其中任何高于或低于“旧 Windows”上升线和下降线的轮廓部分都不会出现在屏幕上（因此字形会被裁剪）。一套“印刷版”，据说没有其他两组的限制。
> 
> 然而，问题是许多 Windows 应用程序仍然使用“旧 Windows”值。通常这样做是为了防止从旧应用程序创建的文档中回流。在 Mac OS X 上，挤压不会发生，但大多数应用程序仍使用“旧 Mac”值。
> 
> 这个包袱被带到了浏览器中。Mac OS X 上的 Chrome 使用与 Windows 上的 Chrome 不同的一组值；Windows 7 上的 Firefox 使用的值集与 Windows XP 上的 Firefox 不同，Windows 7 上的 Firefox 使用的值集与 Windows 7 上的 Chrome 不同。同一浏览器的 Mac 和 Windows 版本将使用不同的值集，而不同同一操作系统上的浏览器也可能使用不同的值！在理想的世界中，简单的解决方案是字体代工厂确保所有三组值导致相同的结果。但是许多现有的字体是在构思 webfonts 之前创建的，字体创建工具并不能让字体设计师轻松地使这些值“正确”。
> 
> 简而言之：有许多字体的行间距值会导致跨操作系统和跨浏览器的不一致。

但我仍然不是 100% 肯定是这样。可能有人做出更好的猜测并给出更明确的答案，就像对孩子的解释一样:)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:44:02.567

您使用相同字体遇到不同结果的原因似乎是因为您实际上并没有使用相同的字体。sans-serif 确实是一个变量，不同的浏览器对 sans-serif 使用不同的字体。如果您将其更改为 Arial，则在所有浏览器中都应该相同。

请参阅这篇文章：[CSS：Helvetica 是 Mac 上的默认“无衬线”字体，而 Arial 是 Windows 上的默认无衬线字体吗？](https://stackoverflow.com/questions/1631098/css-is-helvetica-the-default-sans-serif-font-on-mac-and-arial-the-default-san)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-05T16:27:08.733

> 简而言之：有许多字体的行间距值会导致跨操作系统和跨浏览器的不一致。

这是真的。许多字体的`vertical metrics`. 这种字体永远不会在浏览器之间正确对齐。使字体在浏览器中一致呈现的唯一方法是修复其垂直度量。

大多数字体提供商允许您在下载字体之前更新和修复字体的垂直指标。不过，他们可能会以不同的方式调用该选项。例如：Fontsquirrel 称之为`Auto-Adjust Vertical Metrics`，myFonts.com 称之为`Line Height Adjustments`。

更多信息：[字体：糟糕的垂直度量会导致跨浏览器的行高呈现不一致。解决方案？](https://stackoverflow.com/questions/33633992/font-poor-vertical-metrics-cause-inconsistent-line-height-rendering-across-brow/)

# character-encoding - 使用批处理脚本将包含西里尔文的文本文件复制到不同的目的地

> ID：13654647
> 
> 赞同：2
> 
> 时间：2012-11-30T23:27:49.323
> 
> 标签：character-encoding, batch-file

我有许多文本文件要发送到不同的目的地，具体取决于文件是否包含使用批处理脚本的西里尔字符。例如：

```
All Files are  located in C:\mydocs. The script will be monitoring this file.

File one: contains all English characters > copy to C:\mydocs\English\
File two: Contains some Cyrillic characters > copy to C\mydocs\Contains_Cyrillic\ 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:27:49.563

这取决于您的文本文件的编码方式。如果文件是 unicode，那么我不确定如何测试。

但是如果文件扩展为 ascii（每个字符 1 个字节），那么 bytes > decimal 127 的含义取决于代码页。您无法真正判断文件是否包含西里尔字母，但您可以判断它是否包含 >127 的字节，该字节可能是非英文字符。

以下脚本应该可以在 Windows XP 及更高版本上运行 - 无需下载任何内容。

它首先创建一个 >= 文件长度的文件，仅包含字符“A”。然后它使用 FC 进行二进制比较并将结果通过管道传输到查找值 >= 0x80 的 FINDSTR。如果找到，则返回 ERRORLEVEL 1，否则返回 ERRORLEVEL 0。

```
@echo off
call :HasExtendedASCII %1 && (echo English) || echo Not English
exit /b

:HasExtendedASCII
setlocal enableDelayedExpansion
set "tempFile=%temp%\dummyFile%random%.txt"
<nul set /p "=A" >"!tempFile!"
set /a dummySize=1
for /l %%N in (1 1 32) do if !dummySize! lss %~z1 (set /a dummySize*=2 & type "!tempFile!" >>"!tempFile!")
fc /b "!tempFile!" %1|findstr /re " [89ABCDEF][0123456789ABCDEF]" >nul&& set rtn=1 || set rtn=0
del "!tempFile!"
exit /b %rtn% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:40:15.033

# javascript - 以任意顺序检查包含 3 个连续字母和 2 个数字的字符串

> ID：13654651
> 
> 赞同：3
> 
> 时间：2012-11-30T23:27:54.970
> 
> 标签：javascript, regex

我似乎无法解决这个问题，并想在这里寻求帮助！

基本上我正在验证密码字段，要求如下：
- 必须包含 3 个连续字母
- 必须包含至少 2 个数字
- 可以是任何顺序（例如 1abc342、abc24g3、11abcsjf）

这是我到目前为止所拥有的，但我认为它需要一些调整：
/[az]{3}[0-9][0-9]/i

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:31:53.507

您描述的正则表达式可以这样写：

```
/(?=.*?[a-z]{3})(?=.*?\d.*?\d)/ 
```

第一个前瞻在任意位置连续搜索三个字母。第二个前瞻查找任何位置的数字，然后是更前面的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:30:32.593

您可能应该在两个单独的正则表达式中执行此操作：一个测试三个连续的字母，一个测试至少两个数字：

```
/[a-z]{3}/i
/\d.*d/ 
```

确保满足这两个条件。您可以使用前瞻将其组合成一个正则表达式，但我认为两个正则表达式是更清晰的代码和更好的解决方案。

但是，如果我可以就此事发表一些意见：除非您无法控制此（客户指定此），否则我强烈建议不要施加这样的密码限制。它们实际上使您的密码系统的安全性*大大降低*，而不是更安全。一些关于为什么的阅读：

[http://jimpravetz.com/blog/2011/06/cheap-gpus-are-rendering-strong-passwords-use/](http://jimpravetz.com/blog/2011/06/cheap-gpus-are-rendering-strong-passwords-use/)

[http://jimpravetz.com/blog/2012/02/stupid-password-rules/](http://jimpravetz.com/blog/2012/02/stupid-password-rules/)

# android - Android VM 在 Launch Mac 上崩溃

> ID：13654656
> 
> 赞同：18
> 
> 时间：2012-11-30T23:28:26.913
> 
> 标签：android, eclipse, macos, kernel

我有个问题。在过去的 4-5 周里，我一直在 Eclipse 中使用 Android，并且从未遇到过虚拟机问题（它们很慢，是的。但从未崩溃）。

现在，我相信从 4.2 开始，当我开始为 uni 开发一个新项目（下周截止日期）时，我的 4.2 VM 在启动时突然开始崩溃，因为“内核恐慌”（最后报告）。

我想问有什么我可以做的，也许下载一个修补程序或任何东西。API 和 Eclipse 几乎都是最新的，或者我的计算机可能有问题？（不知何故，即使是我的旧虚拟机（2.3.3、3.1 和 4.1）在 99% 的情况下都会在启动时崩溃）

任何建议将不胜感激。这里是崩溃日志的开头：

> 进程：emulator64-arm [1334] 路径：
> /Users/USER/*/emulator64-arm 标识符：emulator64-arm 版本：??? 代码类型：X86-64（本机）父进程：eclipse [1156] 用户 ID：501
> 
> 日期/时间：2012-12-01 00:25:27.469 +0100 操作系统版本：Mac OS X 10.8.2 (12C2034) 报告版本：10
> 
> 自上次报告以来的间隔：130686 秒自上次报告以来的崩溃：自上次报告以来的 96 次每个应用程序崩溃：32 匿名 UUID：ABE51F99-F7A9-2595-016E-C47FFD1F6C50
> 
> 崩溃的线程：0 调度队列：com.apple.main-thread
> 
> 异常类型：EXC_BAD_ACCESS (SIGSEGV) 异常代码：0x0000000000000000 处的 KERN_INVALID_ADDRESS
> 
> 靠近 0 的 VM 区域：--> __TEXT 0000000100000000-0000000100247000 [2332K] rx/rwx SM=COW /Users/USER/*
> 
> 线程 0 崩溃：：调度队列：com.apple.main-thread

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-02T10:06:32.570

你有两个屏幕吗？**如果是，您上次是否在辅助**屏幕上启动了 avd/vm ？如果是，则在以下位置检查配置 vm 文件：

```
cd ~/.android/avd/  
ls -la   => here you see all avds
cd [your_vm.avd]
joe emulator-user.ini => edit this config file and see value 
```

**window.x = 2054** - 这是愚蠢的值，原因说明在哪里显示模拟器窗口。设置值是因为模拟器窗口显示在 x 位置 2054 的第二个屏幕上，但正如我所说的，这是 avd 的错误。只需将其更改为更好的值以在主屏幕上显示窗口，就像我的情况一样：

```
window.x = 954
window.y = 199
uuid = 1342941165631 
```

保存配置文件，启动 eclipse，启动你的 avd/vm，一切都必须运行良好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-28T07:17:13.487

连接外接显示器时似乎会发生这种情况。尝试断开外接显示器，然后启动模拟器。您可以在模拟器启动后将其附加回来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-28T19:57:25.137

我有同样的问题。昨天它工作得很好。今天因 EXC_BAD_ACCESS 崩溃。然后我注意到启动 AVD 时我正在听的音频停止了半秒钟。我虽然这可能与它有关。我停止了我正在听的 iTunes，重新启动了 AVD，是的，成功了。没有崩溃，它启动得很好。

# sql - 如何对 PostgreSQL 主 id 列执行 LIKE 查询？

> ID：13654657
> 
> 赞同：4
> 
> 时间：2012-11-30T23:28:33.097
> 
> 标签：sql, ruby-on-rails, ruby, postgresql, activerecord

如果我有一个数字（例如 88）并且我想在 Rails 中对主要 ID 列执行 LIKE 查询，以返回在 ID 末尾包含该数字的所有记录（即：88、288 等），我该怎么做？这是生成结果的代码，在 SQLLite 中运行良好：

```
@item = Item.where("id like ?", "88").all 
```

在 PostgreSQL 中，我遇到了这个错误：

```
PG::Error: ERROR:  operator does not exist: integer ~~ unknown 
```

我该怎么做呢？我尝试将数字转换为字符串，但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-16T06:53:45.277

基于 Erwin 的回答：
这是一个非常古老的问题，但如果有人需要，有一个非常简单的答案，使用`::text`cast：

```
Item.where("(id::text LIKE ?)", "%#{numeric_variable}").all 
```

这样，您可以在字符串中的任何位置找到数字。仅当您希望数字位于字符串末尾时，才在左侧
使用通配符。如果您希望数字位于字符串中的任何位置，也可以在右侧 使用通配符。`%`
`%`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T23:38:07.900

## 简单案例

`LIKE`用于字符串/文本类型。由于您的主键是整数，因此您应该改用数学运算。

`id`当除以 100 时，使用模数得到余数。

```
Item.where("id % 100 = 88") 
```

这将返回`Item`其`id`列以`88`

```
1288
1488
1238872388
862388 
```

ETC...

## 匹配任意一组最后两位数字

如果您要动态执行此操作（例如，匹配任意两位数，但您知道它始终是两位数），您可以执行以下操作：

```
Item.where(["id % 100 = ?", last_two_digits) 
```

## 匹配任何一组或任意数量的最终数字

如果您想匹配任意数量的数字，只要它们**始终是最终数字**（与字段中其他地方出现的数字相反`id`），您可以在模型上添加自定义方法。就像是：

```
class Item < ActiveRecord

  ...

  def find_by_final_digits(num_digits, digit_pattern)
    # Where 'num_digits' is the number of final digits to match
    # and `digit_pattern` is the set of final digits you're looking fo

    Item.where(["id % ? = ?", 10**num_digits, digit_pattern])
  end

  ...

end 
```

使用此方法，您可以找到以 ,`id`结尾的值`88`：

```
Item.find_by_final_digits(2, 88) 
```

## 匹配任意长度的最终数字范围

假设您想查找以 和 之间的数字结尾的所有值**，**`id`无论出于何种原因。也许它们代表您正在查找的一些特殊范围的代码。为此，您可以执行另一种自定义方法来使用 Postgres查找范围。 **`09``12``BETWEEN`**

 **```
def find_by_final_digit_range(num_digits, start_of_range, end_of_range)
  Item.where(["id % ? BETWEEN ? AND ?", 10**num_digits, start_of_range, end_of_range)
end 
```

...并且可以使用以下方法调用：

```
Item.find_by_final_digit_range(2, 9, 12) 
```

...当然，这只是有点疯狂，而且可能矫枉过正。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T23:36:18.183

该[`LIKE`运算符](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-LIKE)仅适用于字符串类型。
使用[模运算符`%`](http://www.postgresql.org/docs/current/interactive/functions-math.html)来执行您要执行的操作：

```
@item = Item.where("(id % 100) = ?", "88").all 
```

我怀疑它在 SQLite 中“有效”，即使它将数字类型强制转换为字符串。没有引导`%`模式是行不通的。
-> [sqlfiddle 演示](http://www.sqlfiddle.com/#!5/b1698/4)

按您的预期投射`text`和使用*任意*长度：`LIKE`

 *```
@item = Item.where("(id::text LIKE ('%'::text || ?)", "'12345'").all 
```

或者，在数学上：

```
@item = Item.where("(id % 10^(length(?)) = ?", "'12345'", "12345").all 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-24T12:27:44.990

LIKE 运算符不适用于数字类型，而 id 是数字类型，因此您可以将其与 concat 一起使用

```
SELECT * FROM TABLE_NAME WHERE concat("id") LIKE '%ID%' 
```***

# d3.js - d3 axis tick alignment

> ID：13654658
> 
> 赞同：8
> 
> 时间：2012-11-30T23:28:36.267
> 
> 标签：d3.js

I have a d3 bar chart with, and the axis tick marks are centered below the bars (as I would expect). In this case, I would actually like to left align the axis ticks and have the ticks under the left edge of the bar. Is that possible?![enter image description here](../Images/e83768ed33e7e0af45091e7b97e73393.png)

EDIT: Javascript for constructing the axis

```
// note width is just the width of the chart
var xScale = d3.scale.ordinal().rangeRoundBands([0,width], .1); 
var xAxis = d3.svg.axis().scale(xScale).orient("bottom"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-29T18:18:27.270

这是一个左对齐刻度的示例。

[http://bl.ocks.org/mbostock/6186172](http://bl.ocks.org/mbostock/6186172)

这个想法是，在创建刻度后，您收集它们并对齐它们：

```
svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis)
  .selectAll("text")
    .attr("y", 6)
    .attr("x", 6)
    .style("text-anchor", "start"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:24:35.813

为什么不创造一个新的规模？

```
var padding = .1;

var axisScale = d3.scale.linear()
  .domain([0, n])
  .range([0 + padding, WIDTH + padding]); 
```

`n`直方图中的条数在哪里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-07T21:02:10.820

我认为当您将轴添加到图表时应该对此进行调整。

尝试（假设您的图表称为 svg）：

```
var bandSize = xScale.rangeBand();

svg.append("svg:g")
 .attr("transform", "translate(-" + bandSize + "," + h + ")")
 .call(xAxis)
 .selectAll("text")
   .style("text-anchor", "start")
   .attr("transform", "translate(" + bandSize + ", 0)"); 
```

在我的实验中，这会将刻度移动到每个波段的开头，并保留每个波段下方居中的文本。

# android - dual version of android support v4 lib facebook sdk eclipse android

> ID：13654659
> 
> 赞同：0
> 
> 时间：2012-11-30T23:28:37.860
> 
> 标签：android, facebook, eclipse

I had dual version of android supoort v4 library in facebook lib folder and my android lib folder. I deleted the one from my android and pasted facebook one. Now all my files in android application has resolve error. Like not finding R.layout.main_activity

What should i do ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:20:19.557

您的意思是“libs”文件夹吗，因为自 ADT 17 以来您应该将库放在此处，那么如果您手动导入项目属性中的 jar 并删除它们，Eclipse 也会自动拾取它们。看看这里有一个很好的解释[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

在你把所有东西都放好后，也可以尝试重新启动 eclipse。

# xcode - How Jar usage in iphone project?

> ID：13654660
> 
> 赞同：0
> 
> 时间：2012-11-30T23:28:47.047
> 
> 标签：xcode, jar

I have a jar file , that i need to include in my xcode project i.e. iphone project. How to do it & also please help me, then how to use it in objective-C code, as in java its used like: system.out.println("Res:"+objA.connect("",""")blahh, blahhhhh)

Thanks for ur Help!!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:03:55.437

iOS 不支持 Jar 文件等 Java 可执行文件，并且在未来的任何 iOS 发行版中都不太可能支持。

要执行与上述代码相同的功能，您只需使用以下代码。

```
NSLog(@"Res:%@%@", blahVariable, blahVariable); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:46:33.343

我假设您在 jar 文件中存储了某种资源并且您想要提取它。罐子是 zip 文件，所以你需要一个解压缩器，比如[https://github.com/samsoffes/ssziparchive](https://github.com/samsoffes/ssziparchive)

```
[SSZipArchive unzipFileAtPath:path toDestination:destination]; 
```

或[http://code.google.com/p/ziparchive/](http://code.google.com/p/ziparchive/)

```
ZipArchive *zip = [[ZipArchive alloc] init];
if ( [zip UnzipOpenFile:path] ) {
    [zip UnzipFileTo:destination overWrite:YES];
}
[zip UnzipCloseFile]; 
```

两者都使用 minizip 实现。现在您需要目标路径：

```
NSString *destination = NSTemporaryDirectory(); 
```

和你的 jar 文件的路径：

```
NSString* path = [[NSBundle mainBundle].resourcePath stringByAppendingPathComponent:@"archive.jar"]; 
```

# php - tmhOAuth oauth/request_token 返回 404

> ID：13654661
> 
> 赞同：1
> 
> 时间：2012-11-30T23:29:06.797
> 
> 标签：php, twitter, twitter-oauth

Twitter API 有问题。使用[tmhOAuth](https://github.com/themattharris/tmhOAuth)。不断收到以下404错误：

“抱歉，该页面不存在：34”

我可以 1/account/verify_credentials 和 1/statuses/update 非常好，但 oauth/request_token 返回 404。出于测试目的，我的应用设置中的回调 URL 设置为[https://google.com/ 。](https://google.com/)

```
 require_once('tmhOAuth/tmhOAuth.php');

            $connection = new tmhOAuth(array(
            'consumer_key' => '******',
            'consumer_secret' => '******',
            'user_token' => '******',
            'user_secret' => '******'
            ));

            $connection->request('POST',
                    $connection->url('oauth/request_token'),
                    array('oauth_callback' => 'oob')
                    );

            return $connection->response['code']; 
```

非常感谢任何帮助，画一个空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T12:20:25.710

我知道这是一个旧的，但对于其他人来说，你需要向 url() 添加一个额外的空字符串参数，就像这样..

```
$connection->request('POST',
    $connection->url('oauth/request_token', ''),
    array('oauth_callback' => 'oob')
); 
```

# http - How can I serve HTTP slowly?

> ID：13654663
> 
> 赞同：9
> 
> 时间：2012-11-30T23:29:16.133
> 
> 标签：http, load-testing

I'm working on an http client and I would like to test it on requests that take some time to finish. I could certainly come up with a python script to suit my needs, something about like:

```
def slow_server(environ, start_response):
    with getSomeFile(environ) as file_to_serve:
        block = file_to_serve.read(1024);
        while block:
            yield block
            time.sleep(1.0)
            block = file_to_serve.read(1024); 
```

but this feels like a problem others have already encountered. Is there an easy way to serve static files with an absurdly low bandwidth cap, short of a full scale server like apache or nginx.

I'm working on linux, and the way I've been testing so far is with `python -m SimpleHTTPServer 8000` in a directory full of files to serve. I'm equally interested in another simple command line server or a way to do bandwidth limiting with one or a few iptables commands on tcp port 8000 (or whatever would work).

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T05:48:21.783

我现在使用的解决方案使用“真正的”网络服务器，但配置起来更容易，即 lighttpd。我已将以下文件添加到我的路径中（在 中`~/bin`）

```
#! /usr/sbin/lighttpd -Df

server.document-root = "/dev/null"
server.modules = ("mod_proxy")
server.kbytes-per-second = env.LIGHTTPD_THROTTLE
server.port = env.LIGHTTPD_PORT
proxy.server  = ( "" => (( "host" => "127.0.0.1", "port" => env.LIGHTTPD_PROXY ))) 
```

这是一个 lighttpd 配置文件，充当 localhost 的反向代理；源和目标端口，以及服务器总最大带宽作为环境变量给出，因此可以像这样调用它：

```
$ cd /path/to/some/files
$ python -m SimpleHTTPServer 8000 &
$ LIGHTTPD_THROTTLE=60 LIGHTTPD_PORT=8001 LIGHTTPD_PROXY=8000 throttle.lighttpd 
```

在端口 8000 上代理 python 文件服务器，在端口 8001 上以每秒 60KB 的速度进行代理。显然，lighttpd 可用于提供文件本身，但这个小脚本可用于使*任何*http 服务器变慢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:03:03.640

在 Windows 上，您可以使用 Fiddler，它是一种 HTTP 代理调试工具来模拟非常慢的速度。也许在您使用的任何操作系统上都存在类似的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:58:31.497

我记得我曾经有过同样的问题，我的搜索出现了一个名为**[mod_bw](http://bwmod.sourceforge.ne)**（即 mod_bandwith）的 Apache2 模块。它对我的测试很有帮助。

# python - issues turning a dict element into a string to search w/ regex

> ID：13654664
> 
> 赞同：0
> 
> 时间：2012-11-30T23:29:29.993
> 
> 标签：python, dictionary

This one might best be summarized as "Python isn't letting me do something stupid," but I digress -- I have a bad habit of turning XML into strings so I can use regex to fetch something out of it, rather than actually being a good person and doing the Xpath thing.

I'm having an issue currently where I'm looping through a list of dicts (the dicts themselves being several levels deep, containing encoded XML). I'm trying to do re.findall(pattern, str(listitem)), which is giving me an "unhashable type: 'DictionaryElement'" error. Any ideas?

edit: this is pubmed API stuff using biopython:

```
handle = Entrez.efetch(db="pubmed", id=pmids, retmode="xml")
records = Entrez.read(handle)
records = list(records)

meshterms = {}
for y in records:
    meshterms[y] = re.findall(r'(?<=DescriptorName\'\:\sStringElement\(\').+?(?=\')',str(y)) 
```

y would include something that looks like:

`{u'MedlineCitation': DictElement({u'OtherID': [], u'OtherAbstract': [], u'CitationSubset': ['IM'], u'KeywordList': [], u'DateCreated': {u'Month': '11', u'Day': '20', u'Year': '2012'}, u'SpaceFlightMission': [], u'GeneralNote': [], u'Article': DictElement({u'ArticleDate': [], u'Pagination': {u'MedlinePgn': '140-54'}, u'AuthorList': ListElement([DictElement({u'LastName': 'Goupil', u'Initials': 'L', u'NameID': [], u'ForeName': 'Louise'}, attributes={u'ValidYN': u'Y'}), DictElement({u'LastName': 'Bekinschtein', u'Initials': 'T', u'NameID': [], u'ForeName': 'Tristan'}, attributes={u'ValidYN': u'Y'})], attributes={u'Type': u'authors', u'CompleteYN': u'Y'}), u'Language': ['eng'], u'PublicationTypeList': ['Journal Article'], u'Journal': {u'ISSN': StringElement('0003-9829', attributes={u'IssnType': u'Print'}), u'ISOAbbreviation': 'Arch Ital Biol', u'JournalIssue': DictElement({u'Volume': '150', u'Issue': '2-3', u'PubDate': {u'Month': 'Jun', u'Year': '2012'}}, attributes={u'CitedMedium': u'Print'}), u'Title': 'Archives italiennes de biologie'}, u'Affiliation': 'MRC Cognition and Brain Sciences Unit, 15 Chauces Road, CB2 7EF, Cambridge,UK Email: louisegoupil@hotmal.fr.', u'ArticleTitle': 'Cognitive processing during the transition to sleep.', u'ELocationID': [StringElement('10.4449/aib.v150i2.1247', attributes={u'ValidYN': u'Y', u'EIdType': u'doi'})], u'Abstract': {u'AbstractText': ['Several dramatic physiological and behaviourl changes occur during the transition from wakefulness to sleep. The process is regarded as a grey area of consciousness between attentive wakefulness and slow wave sleep. Although there is evidence of neurophysiological integration decay as signalled by sleep EEG elements, changes in power spectra and coherence, thalamocortical connectivity in fMRI, and single neuron changes in firing patterns, little is known about the cognitive and behavioural dynamics of these transitions. Hereby we revise the body and brain physiology, behaviour and phenomenology of these changes of consciousness and propose an experimental framework to integrate the two aspects of consciousness that interact in the transition, wakefulness and awareness.']}}, attributes={u'PubModel': u'Print'}), u'PMID': StringElement('23165874', attributes={u'Version': u'1'}), u'MedlineJournalInfo': {u'MedlineTA': 'Arch Ital Biol', u'Country': 'Italy', u'NlmUniqueID': '0372441', u'ISSNLinking': '0003-9829'}}, attributes={u'Owner': u'NLM', u'Status': u'In-Data-Review'}), u'PubmedData': {u'ArticleIdList': [StringElement('23165874', attributes={u'IdType': u'pubmed'})], u'PublicationStatus': 'ppublish', u'History': [DictElement({u'Month': '2', u'Day': '07', u'Year': '2012'}, attributes={u'PubStatus': u'accepted'}), DictElement({u'Minute': '0', u'Month': '11', u'Day': '21', u'Hour': '6', u'Year': '2012'}, attributes={u'PubStatus': u'entrez'}), DictElement({u'Minute': '0', u'Month': '11', u'Day': '21', u'Hour': '6', u'Year': '2012'}, attributes={u'PubStatus': u'pubmed'}), DictElement({u'Minute': '0', u'Month': '11', u'Day': '21', u'Hour': '6', u'Year': '2012'}, attributes={u'PubStatus': u'medline'})]}`

where my regex is trying to pull the contents of StringElement below DescriptorName (incidentally, not present in the above record, but you get the idea.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:17:48.857

well, this got really odd, but I was able to do it as follows:

```
scratch = open("mcs_scratch.txt","wb")
scratch.write(str(y))
scratch = open("mcs_scratch.txt","r")
y = str(scratch.read()) 
```

somehow I doubt this qualifies as good practice, but it works.

# mysql - 将两张临时表合并为一张表，但保留所有列名

> ID：13654670
> 
> 赞同：1
> 
> 时间：2012-11-30T23:30:43.667
> 
> 标签：mysql

我需要创建两个临时表，然后将它们连接到一个表中，并保留表和数据的所有列名。使用 Mysql

```
CREATE TEMPORARY TABLE tenant_invoices
    SELECT * FROM invoices

CREATE TEMPORARY TABLE tenant_payments
    SELECT * FROM payments 
```

我该如何使用 MYSQL 执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:00:29.473

创建两个临时表后，您可以使用 a`CROSS JOIN`将表连接在一起：

```
select ti.*, tp.*
from tenant_invoices ti
cross join tenant_payments tp 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/29ea4/2)

`CROSS JOIN`如果没有字段可以加入表格，则将起作用。如果您有要加入的字段，则可以使用`INNER JOIN`or `LEFT JOIN`：

```
select ti.*, tp.*
from tenant_invoices ti
inner join tenant_payments tp
  on ti.account_id = tp.account_id 
```

或者

```
select ti.*, tp.*
from tenant_invoices ti
left join tenant_payments tp
  on ti.account_id = tp.account_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/3036d/5)

# java - What is the method in the API for converting between bases?

> ID：13654671
> 
> 赞同：5
> 
> 时间：2012-11-30T23:31:02.910
> 
> 标签：java, api, integer, base

What is the method that you can use to convert between bases in Java? It is something like IntegerToBase (int, base), but I cannot remember.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T23:52:28.277

从字面上讲，整数值不会从一个基数转换为另一个基数。感谢 von Neumann，计算的先驱之一，他认为尝试在二进制电路上使用 base 10 算术的想法毫无意义，整数以二进制格式存储，我们并没有试图改变它:-) 我们是什么谈论的是将它们转换为以某个基数表示它们的字符串（除了默认的基数 10），并将字符串转换为基数（默认）基数 10 以外的整数。必要的工具是 Integer 类的静态方法。

*   Java 提供了[`Integer.toString(int i, int radix)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int,%20int%29)转换函数，它接受一个整数和一个基数（基数），并以该基数返回该整数的字符串表示形式。

    ```
    String hexRepr = Integer.toString(255, 16)  // returns "FF" 
    ```

*   反过来，即从代表不同基数的数字的字符串中有 [`Integer.parseInt(String s, int radix)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)

    ```
    int myNum = Integer.parseInt("FF", 16)  // returns 255 
    ```

*   要将表示为基本 radix1 字符串的数字转换为基本 radix2 字符串表示，必须将刚才提到的两种方法结合起来，如以下示例所示：

    ```
    int radix1 = 16;  // The input will be parsed assuming base 16 representation
    int radix2 = 4;   // The result will be output using a base 4 representation
    String input = "FF"; // which in base 16 represents the number 255 
    String converted = Integer.toString(Integer.parseInt(radix1Representation, radix1),radix2);  /// returns "3333"  which in base 4 is the number 255 
    ```

更多细节可以在 API 文档中找到。我在这里包含了一些内容，以确保读者在使用这些方法时也能看到他们需要注意的事项。

* * *

```
public static String toString(int i, int radix) 
```

此方法以第二个参数指定的基数返回第一个参数的字符串表示形式。

如果基数小于`Character.MIN_RADIX`或大于`Character.MAX_RADIX`，则使用基数 10 代替。

如果第一个参数为负，则结果的第一个元素是 ASCII 减号字符`'-'`( `'\u002D'`)。如果第一个参数不是负数，则结果中不会出现符号字符。

结果的其余字符表示第一个参数的大小。如果幅度为零，则由单个零字符`'0'`( `'\u0030'`) 表示；否则，幅度表示的第一个字符将不是零字符。以下 ASCII 字符用作数字：

```
0123456789abcdefghijklmnopqrstuvwxyz 
```

这些都是彻头彻尾`'\u0030'`的。如果 radix 为 N，则这些字符中的前 N ​​个字符按所示顺序用作 radix-N 位。因此，十六进制（基数 16）的数字是 0123456789abcdef。如果需要大写字母，可以在结果上调用该方法：`'\u0039'``'\u0061'``'\u007A'``String.toUpperCase()`

```
Integer.toString(n, 16).toUpperCase() 
```

来源：[http ://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int,%20int%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int,%20int%29)

* * *

```
public static int parseInt(String s, int radix) throws NumberFormatException 
```

此方法将字符串参数解析为第二个参数指定的基数中的有符号整数。字符串中的字符必须都是指定基数的数字（由是否`Character.digit(char, int)`返回非负值来决定），除了第一个字符可以是 ASCII 减号`'-'`（`'\u002D'`）表示负值或 ASCII 加号`'+'`（`'\u002B'`）表示负值表示正值。返回结果整数值。

如果发生以下任何一种情况，则会引发 NumberFormatException 类型的异常：

*   第一个参数是`null`或长度为零的字符串。

*   基数小于`Character.MIN_RADIX`或大于`Character.MAX_RADIX`。

*   字符串的任何字符都不是指定基数的数字，除非第一个字符可以是减号`'-'`( `'\u002D'`) 或加号`'+'`( `'\u002B'`)，前提是字符串的长度大于 1。

*   字符串表示的值不是 int 类型的值。

例子：

```
parseInt("0", 10)           // returns 0
parseInt("473", 10)         // returns 473
parseInt("+42", 10)         // returns 42
parseInt("-0", 10)          // returns 0
parseInt("-FF", 16)         // returns -255
parseInt("1100110", 2)      // returns 102
parseInt("2147483647", 10)  // returns 2147483647
parseInt("-2147483648", 10) // returns -2147483648
parseInt("2147483648", 10)  // throws NumberFormatException
parseInt("99", 8)           // throws NumberFormatException
parseInt("Kona", 10)        // throws NumberFormatException
parseInt("Kona", 27)        // returns 411787 
```

来源：[http ://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T23:35:31.013

该类`Integer`提供了两种提供此功能的实用方法，尽管字符串是转换的媒介：

*   [`Integer.parseInt(String s, int radix)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)从给定的基础解析
*   [`Integer.toString(int i, int radix)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int,%20int%29)转换为给定的基数

请注意，`Integer`内部以十进制形式存储值（以 10 为底）。

例如，要将 01000（八进制）转换为 512（十进制）并返回，您可以执行以下操作：

```
String octal = "01000";
int i = Integer.parseInt(octal, 8);
String decimal = Integer.toString(i, 10);
System.out.println(decimal); // prints 512 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T23:34:11.403

例如，您可以使用`Integer.parseInt("101", 2)`它，它会给您 5（对应的十进制数）。

> 当使用第二个参数给出的**基数**进行解析时，返回一个 Integer 对象，该对象包含从指定 String 中提取的值。第一个参数被解释为表示由第二个参数指定的基数中的有符号整数，就像将参数提供给 parseInt(java.lang.String, int) 方法一样。结果是一个表示字符串指定的整数值的 Integer 对象。换句话说，此方法返回一个等于以下值的 Integer 对象： ( [source](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html) )

```
new Integer(Integer.parseInt(s, radix)) 
```

从同一来源，您还拥有：

```
public static String toString(int i,int radix) 
```

以第二个参数指定的基数返回第一个参数的字符串表示形式。

**所以如果你想从二进制转换为十进制**：

```
Integer.parseInt(binary_number_in_string, 2); 
```

**如果你想从十进制到二进制**：

```
System.out.println(Integer.toString(2,2)); 
```

要从另一个基数转换为十进制数，反之亦然，您只需更改 radix 参数。

* * *

请注意，[Integer 类](http://download.java.net/jdk7/archive/b123/docs/api/java/lang/Integer.html#toBinaryString%28int%29)已经有一些默认的对话方法，例如：

```
public static String toBinaryString(int i) 
```

将整数参数的**字符串**表示形式返回为以 2 为底的无符号整数（ [source](http://download.java.net/jdk7/archive/b123/docs/api/java/lang/Integer.html#toBinaryString%28int%29)）。

```
public static String toHexString(int i) 
```

将整数参数的**字符串**表示形式返回为以 16 为底的无符号整数（ [source](http://download.java.net/jdk7/archive/b123/docs/api/java/lang/Integer.html#toHexString%28int%29)）。

```
public static String toOctalString(int i) 
```

将整数参数的**字符串**表示形式返回为以 8 为底的无符号整数（ [source](http://download.java.net/jdk7/archive/b123/docs/api/java/lang/Integer.html#toOctalString%28int%29)）。

从上述方法的返回类型可以看出，基数之间转换的不是整数。这些方法在整数传递的给定基数中返回字符串表示形式作为参数。

# iphone - Labels and images above TableView don't show up on device

> ID：13654673
> 
> 赞同：0
> 
> 时间：2012-11-30T23:31:42.733
> 
> 标签：iphone, uitableview, uiimageview, uilabel, uistoryboard

So, I've laid out a UITableViewController with two prototype cells, and a view in the TableView's header area. In the header area, there are two views that each hold an icon and a label, Friends and Groups.

It looks all good in the Storyboard Editor, but when the screen actually loads, the images and labels in question are gone. I'm fairly new to iOS, so I haven't run into this before. Here are a couple screen shots to illustrate:

In the storyboard editor:
![](../Images/f0d2dbaa54eaf9029e6bb1adcfe80f13.png)

On the simulator:
![](../Images/e0b3b0fca71d53db2cbc6c3a2a6d7f9b.png)

Any thoughts? Thanks in advance for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:17:56.897

You've implemented the data source methods in your view controller, correct?

If not, UITableView will call a method that its data source implements: `tableView:cellForRowAtIndexPath:` from the UITableViewDataSource protocol, where you would return the cell to use, in this case the cell with the Identifier that you specified in your Storyboard.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:51:36.433

我们发现这是因为 UITableView 的 tableHeaderView 在更新/重绘方面真的很奇怪。很难让它以任何预期的行为行事。

我们没有使用 UIImageViews，而是使用了 UIButtons。这些按钮似乎知道如何以及何时更新和重绘自己，所以这很有效。

# android - How compile c++ project via Android NDK

> ID：13654678
> 
> 赞同：4
> 
> 时间：2012-11-30T23:32:12.117
> 
> 标签：android, c++, mobile

I have small C++ library project with one class.

```
class Test
{
public:
Test(){};
~Test(){};
int SomeFunc() { return 5; }
} 
```

I can build this class via Android NDK. (Question 1). I can use .so file into Java application. How I can call SomeFunc method from Java code (Question 2).

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T01:01:28.257

以下是步骤：

1.) 在项目的“jni”文件夹中创建 Android.mk：

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := main_jni
LOCAL_CFLAGS := 
LOCAL_SRC_FILES := main.cpp
LOCAL_LDLIBS :=

include $(BUILD_SHARED_LIBRARY) 
```

2.) 在“jni”文件夹中创建 main.cpp：

```
#include <jni.h>
using namespace std;

#ifdef __cplusplus
extern "C" {
#endif

class Test {
public:
Test(){};
~Test(){};
int SomeFunc() { return 5; }
};

jint Java_com_example_activity_MainActivity_SomeFunc(JNIEnv *env, jobject thiz)
{
    Test *test = new Test();
    return test->SomeFunc();
}

#ifdef __cplusplus
}
#endif 
```

3.) 添加调用以在调用活动中加载库（本例中为 MainActivity.java）：

```
static {
    System.loadLibrary("main_jni");
} 
```

4.) 在调用活动中定义原生函数：

```
native int SomeFunc(); 
```

5.）从活动中调用它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView text = (TextView) this.findViewById(R.id.text);

    text.setText(String.valueOf(SomeFunc()));
} 
```

6.）从项目的根文件夹运行“ndk-build”命令（注意：在这一步之后在Eclipse中刷新项目）

7.) 重新构建并运行应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:49:20.480

我不确定我是否正确理解了这些问题，但[此链接可能对您有用。](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/) 除了非常基础的知识外，我个人对 C 的了解不多，但我期待通过 NDK 获得更多的 C。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T00:23:35.353

无论您在 c 中编写什么代码，都需要像**java_urpackagename_class_methodname**一样定义它，然后在使用此代码之前，您需要首先在 java 类中创建一个本地方法，例如**public native int ABC();** 告诉它您将使用此方法。要使用它，请根据您的需要创建一个 Android.mk 或 Application.mk。.so 将帮助您的 java 类知道您的 c 代码想要做什么。

# ruby - Spider Web Chart Ruby on Rails

> ID：13654679
> 
> 赞同：0
> 
> 时间：2012-11-30T23:32:13.207
> 
> 标签：ruby

I have a table of results and I would like to present my data using spider web charts. i have looked at the high charts online but can some one come up with an easy explanation on how to embed this in my rails application

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:36:34.743

这是一个高级概述：您查看的 Highcharts 库位于客户端。在 ruby​​ 方面，您需要设置某种端点，您可以从中获取数据。完成此操作后，您可以使用 jQuery 获取数据，然后在 Javascript 端使用 Highcharts 库。

# python - 让 gunicorn 运行的正确方法是什么？

> ID：13654688
> 
> 赞同：59
> 
> 时间：2012-11-30T23:33:27.600
> 
> 标签：python, nginx, flask, gunicorn

我想做一个 Flask+Nginx+Gunicorn 部署。我已经设置并运行了 Nginx，并且按照文档中的描述运行了 gunicorn：

```
gunicorn app:app 
```

但是当我注销服务器时，gunicorn 进程会退出吗？确保 Nginx 连接到它并在崩溃时重新启动的正确方法是什么？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2015-05-28T09:51:43.850

`--daemon`运行 gunicorn 时使用选项。例子：

`gunicorn grand56.wsgi:application --name grand56 --workers 3 --user=root --group=root --bind=127.0.0.1:1001 --daemon`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-10-25T06:44:06.113

使用 --daemon 来绑定 gunicorn 的命令。前任：

```
gunicorn --bind 0.0.0.0:8001 your_project.wsgi --daemon 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-12-01T00:09:01.420

我会研究类似的东西[Supervisor](http://supervisord.org/)。

非常有用的教程可以在这里找到[https://www.codingforentrepreneurs.com/blog/hello-linux-setup-gunicorn-and-supervisor/](https://www.codingforentrepreneurs.com/blog/hello-linux-setup-gunicorn-and-supervisor/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-01T03:03:16.237

需要注意的关键是，当您从命令行启动进程时，它是终端进程的子进程（即 的子进程`bash`）。当您注销服务器时，您的`bash`进程将被终止 - 它的所有子进程也是如此。

您将希望使用现有的任何系统来管理 nginx 以及管理 gunicorn（从`init.d`Upstart 脚本到专门的应用程序进程监视器，如 Monit、Supervisor、Bluepill、Foreman 等）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-01T00:02:43.920

尝试这个：

```
nohup gunicorn app:app & 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-17T23:21:40.200

注意肖恩。

但是，您可以像这样动态运行它：

`nohup gunicorn -c config.py </dev/null >/dev/null 2>&1`它将不再依赖于终端连接。如果你想保存任何输出，你可以`>/dev/null`用类似的东西替换。`>somelogfile`

但对于生产用途，最好将其集成到您用于管理流程的任何工具中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-24T22:01:52.230

`Supervisor`是一个伟大的跨平台流程管理解决方案。它的功能非常丰富，并且（在我看来）比一些普通的 Linux 替代品（upstart、sysv、systemd）需要更多的配置。您绝对应该使用类似的东西来启动、监控和（如果需要）重新启动您的流程。

无论您最终使用什么进程管理器，您仍然可以很容易地让 gunicorn “运行不正常”（即作为 root 用户）。我认为其他答案遗漏的一些重要细节是，您可能应该让一个（非 root）用户拥有 gunicorn 进程，该进程绑定到该用户和 nginx 组拥有并具有权限的 unix 套接字`770`。使用`gunicorn`，您指定一个掩码，因此反转`770`并`007`使用该`-m`标志。这样，只有 gunicorn 和 nginx 可以读/写/执行到套接字，不需要端口。您可以使用 and 指定 gunicorn 进程的用户和`-u`组`-g`标志，它将与这些所有者一起创建套接字。无论您最终使用进程 mgmt，对于 nginx/gunicorn，您可能希望在启动脚本中使用类似的内容：

```
exec gunicorn wsgi:app -u gunicorn -g nginx -m 007 -b gunicorn.sock >> /var/log/$<service_name>.sys.log 2>&1 
```

确保 gunicorn 用户对日志文件具有写入权限。然后，在您以前拥有 ip/port (ie `0.0.0.0:5000`) 的 nginx 中，您将路径放置到套接字 (ie `/usr/share/nginx/html/gunicorn.sock`)。请注意，我在这里没有使用`--daemon`标志，但我使用`exec`了 ，这假定一个进程管理器，它将作为子进程运行 gunicorn `exec`。

[你可以在这里](http://docs.gunicorn.org/en/stable/settings.html)找到所有不同的标志。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-11T08:00:12.117

像这样运行[拥抱](https://github.com/timothycrosley/hug)api。

*--daemon*是将进程保持在后台。

*--access-logfile*保存请求日志

*--bind=<ip>:<port>*提供 IP 将允许从其他系统访问（如果不需要代理）。

```
gunicorn <pyscirpt_name>:__hug_wsgi__ --name  caassist -w 4 --access-logfile /var/logs/gunicorn/gunicorn_access.log --daemon --bind=<ip>:<port> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-28T12:16:58.477

我尝试了 systemd 选项，它运行良好，下面的链接有我的完整答案和所有步骤，可以将您的应用程序作为 gunicorn 服务调用。

[https://askubuntu.com/questions/930589/running-upstart-script-on-17-04/1010398#1010398](https://askubuntu.com/questions/930589/running-upstart-script-on-17-04/1010398#1010398)

# html - 具有百分比宽度的 DIV 不起作用（无边框，无边距/填充）

> ID：13654696
> 
> 赞同：2
> 
> 时间：2012-11-30T23:34:54.447
> 
> 标签：html, css, width, percentage

我创建了自己的进度条并遇到了一些问题

我有一个完整的.box，宽度=90%

在那个盒子里我有宽度= 100的.progress div

在 .progress div 中，我得到了 .left-free div 10%、.progressbar 80%、.right-free 100%

在 .progressbar 我有 4 个 div .grey 30%、.violet 30%、.brown 30%、.blank 0%

问题是不知道为什么.grey、.violet、.brown 大小不一样！

编辑：（ .blank div 只是一个间隔。一切都很好。）

我不使用边距或填充或任何边框。.progressbar 周围的边框是用 box-shadow 实现的。

**我的html代码：**

```
<div id="box">

    <div id="progress">

        <div class="left-free">10% free</div>

        <div class="progressbar">
            <div class="grey" style="width:30%">30%</div>
            <div class="violet" style="width:30%">30%</div>
            <div class="brown" style="width:30%">30%</div>
            <div class="blank" style="width:0%">0%</div>
        </div>

        <div class="right-free">10% free</div>

    </div>

</div> 
```

**我的CSS代码：**

```
body
    {
        width:100%;
        background-color:#eee;
        padding:0;
        margin:0 auto;
    }
#box
    {
        width:90%;
        padding:0;
        margin:2% auto;
        background-color:#eee;
    }
#progress
    {
        width:100%;
        padding:0;
        margin-bottom:10%;
    }    
.left-free
    {          
        width:10%;
        float:left;
        box-shadow: inset -1px 0px 0px rgba(0, 0, 0, 1);         /* right */
    }
.progressbar
        {
            position:relative;
            width:80%;
            float:left;
            background-color:#ffffff;
            box-shadow: inset 0px 1px 0px rgba(0, 0, 0, 1),         /* top */
                        inset 0px -1px 0px rgba(0, 0, 0, 1);         /* bottom */
        }
.grey {background-color:grey;}
.violet  {background-color:violet;}
.brown  {background-color:brown;}
.blank {background-color:#ffffff;}

.grey,
.violet,
.brown,
.blank
    {
        height:100px;                                            
        float:left;
        margin-top:1px;
    }

.left-free,
.progressbar,
.right-free
    {
        height:102px;                                           
    }
.right-free
    {
        width:10%;
        float:left;
        box-shadow: inset 1px 0px 0px rgba(0, 0, 0, 1);         /* border left */
        text-align:right;
    } 
```

我创建了一个屏幕截图，并在所有 3 个框上放置了一个宽度相同的绿色条！在 .violet 和 .brown div 的右端有一个垫片（希望你能在图片上看到它）

![问题](../Images/b709fe867b648f788e859100437325f6.png)

这是为了更好看的作物

![裁剪](../Images/a2eb707118fb58eab25d4b2b4a11a435.png)

[你可以在jsfiddle](http://jsfiddle.net/B4Kvr/)上看到运行代码

第二个例子：[jsfiddle 2](http://jsfiddle.net/rryR6/)

有什么想法为什么盒子的尺寸不一样？

编辑：我将 html 上传到[pastebin](http://pastebin.com/raw.php?i=296HMu7y)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:30:01.737

**将灰色和棕色宽度更改为 30.1% 或仅删除边框进度条**

# python - 将 pandas 时间序列从 object dtype 重新索引为 datetime dtype

> ID：13654699
> 
> 赞同：31
> 
> 时间：2012-11-30T23:35:15.957
> 
> 标签：python, datetime, python-2.7, pandas

尽管被具有有效日期的标准 YYYY-MM-DD 字符串索引，但我有一个不被识别为 DatetimeIndex 的时间序列。将它们强制为有效的 DatetimeIndex 似乎不够优雅，让我认为我做错了什么。

我读入了包含无效日期时间值的（其他人的惰性格式）数据，并删除了这些无效的观察结果。

```
In [1]: df = pd.read_csv('data.csv',index_col=0)
In [2]: print df['2008-02-27':'2008-03-02']
Out[2]: 
             count
2008-02-27  20
2008-02-28   0
2008-02-29  27
2008-02-30   0
2008-02-31   0
2008-03-01   0
2008-03-02  17

In [3]: def clean_timestamps(df):
    # remove invalid dates like '2008-02-30' and '2009-04-31'
    to_drop = list()
    for d in df.index:
        try:
            datetime.date(int(d[0:4]),int(d[5:7]),int(d[8:10]))
        except ValueError:
            to_drop.append(d)
    df2 = df.drop(to_drop,axis=0)
    return df2

In [4]: df2 = clean_timestamps(df)
In [5] :print df2['2008-02-27':'2008-03-02']
Out[5]:
             count
2008-02-27  20
2008-02-28   0
2008-02-29  27
2008-03-01   0
2008-03-02  17 
```

这个新索引仍然只被识别为“对象”dtype，而不是 DatetimeIndex。

```
In [6]: df2.index
Out[6]: Index([2008-01-01, 2008-01-02, 2008-01-03, ..., 2012-11-27, 2012-11-28,
   2012-11-29], dtype=object) 
```

重新索引会产生 NaN，因为它们是不同的 dtype。

```
In [7]: i = pd.date_range(start=min(df2.index),end=max(df2.index))
In [8]: df3 = df2.reindex(index=i,columns=['count'])
In [9]: df3['2008-02-27':'2008-03-02']
Out[9]: 
            count
2008-02-27 NaN
2008-02-28 NaN
2008-02-29 NaN
2008-03-01 NaN
2008-03-02 NaN 
```

我用适当的索引创建一个新的数据框，将数据放到字典中，然后根据字典值填充新的数据框（跳过缺失值）。

```
In [10]: df3 = pd.DataFrame(columns=['count'],index=i)
In [11]: values = dict(df2['count'])
In [12]: for d in i:
    try:
        df3.set_value(index=d,col='count',value=values[d.isoformat()[0:10]])
    except KeyError:
        pass
In [13]: print df3['2008-02-27':'2008-03-02']
Out[13]: 

             count
2008-02-27  20
2008-02-28   0
2008-02-29  27
2008-03-01   0
2008-03-02  17

In [14]: df3.index
Out[14];
<class 'pandas.tseries.index.DatetimeIndex'>
[2008-01-01 00:00:00, ..., 2012-11-29 00:00:00]
Length: 1795, Freq: D, Timezone: None 
```

基于查找以字符串为键的字典设置值的最后一部分似乎特别hacky，让我觉得我错过了一些重要的东西。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-01T00:51:12.523

你可以使用`pd.to_datetime`：

```
In [1]: import pandas as pd

In [2]: pd.to_datetime('2008-02-27')
Out[2]: datetime.datetime(2008, 2, 27, 0, 0) 
```

这允许您通过将索引（或类似的列）应用于系列来“清理”索引（或类似的列）：

```
df.index = pd.to_datetime(df.index) 
```

或者

```
df['date_col'] = df['date_col'].apply(pd.to_datetime) 
```

# c# - 泛型问题

> ID：13654700
> 
> 赞同：2
> 
> 时间：2012-11-30T23:35:20.093
> 
> 标签：c#, asp.net, c#-4.0, generics, interface

我面临一个泛型问题：

```
public interface IEntity {}

public class User : IEntity {}

public class Experiments {
    private IList<IEntity> list;
    private IList<Action<IEntity>> actions;

    public Experiments(){
        list = new List<IEntity>();
        actions = new List<Action<IEntity>>();
    }

    public void Add<T>(T entity) where T : IEntity {
        list.Add(entity); // -> NO PROBLEM HERE
    }

    public void AddAction<T>(Action<T> handle) where T : IEntity {
        actions.Add(handle); // -> HERE I GET AN ERROR
    } 
```

为什么一旦我在方法的签名上指定 T 是 IEntity，我会得到*“无法从 'System.Action<T>' 转换为 'System.Action<IEntityCheck>...” ？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:50:01.710

尝试：

```
public void AddAction(Action<IEntity> handle) 
{
    actions.Add(handle);
} 
```

并且对于您的添加功能，无需添加类型参数，只需使用接口即可。

```
public void Add(IEntity entity)
{
    list.Add(entity);
} 
```

问题`public void AddAction<T>(T entity) where T : IEntity`是我可以（如果它有效）传入一个函数，就像`Foo(ConcreteEntity entity)`使用具体类上的成员一样，它没有在接口上定义，那么我将无法遍历列表`Actions<IEntity>`并调用它们其他一些实现`IEntity`并让它们都成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T23:53:10.227

我设法通过在类级别声明泛型类型来编译它。

```
public interface IEntity { }

public class User : IEntity { }

public class Experiments<T> where T : IEntity
{
    private IList<T> list;
    private IList<Action<T>> actions;

    public Experiments()
    {
        list = new List<T>();
        actions = new List<Action<T>>();
    }

    public void Add(T entity)
    {
        list.Add(entity);
    }

    public void AddAction(Action<T> handle)
    {
        actions.Add(handle);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T00:36:22.757

谢谢大家的回答，我找到了解决问题的方法。

我刚刚将动作*List<Action<T>> 更改为 List<Delegate>*现在一切正常......

```
...
private IList<IEntity> list;
private IList<Delegate> actions;

public void AddAction<T>(Action<T> handle) where T : IEntity {
    actions.Add(handle);
}
... 
```

谢谢。

# agile - SCRUM 中的“缺陷泄漏”指标有多重要？

> ID：13654703
> 
> 赞同：-2
> 
> 时间：2012-11-30T23:35:30.777
> 
> 标签：agile, scrum, metrics

我正在阅读有关 SCRUM 的必要指标，但我找不到其中列出的“缺陷泄漏”。即使是 Jeff Sutherland 发表的论文也是如此。

我想知道是否有任何理由不将其视为敏捷 SCRUM 中的重要指标。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:48:28.673

Scrum 是一个最小的流程改进框架。除了满足 sprint 目标之外，它非常刻意地不谈论*任何指标。*

如果您的团队发现缺陷泄漏是帮助他们改进的有用指标，那么他们当然可以使用它。如果 Scrum 团队以外的管理层发现缺陷泄漏是一个有用的指标——那么他们也可以完全自由地使用它。

Scrum 没有定义你应该使用的指标。它允许您使用任何您认为有效的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:24:28.703

SCRUM 中没有指标。这并不意味着你不能拥有指标，它只是意味着 SCRUM 没有强制要求它们，也没有告诉你在这种情况下你应该做什么，因此你为什么没有找到任何类似的东西。

由于我们谈论的是 SCRUM，因此一种常见的心态是问自己：

*   有用吗？这`<activity,metric,task>`有很大的价值吗？
*   我为什么要这样做？我会从中得到什么？

因此，我建议您自己回答，而不是寻找答案。

*（PS：我的老板要求我不是最大的激励答案）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T06:43:11.943

如果您查看[Scrum 指南](http://scrum.org/Scrum-Guides)，您会发现剩余工作只是作为 Scrum 框架的一部分强制执行的指标。只要您可以监控剩余工作，您至少正在为您的项目查看那个“恒温器”。

这是否意味着您不应该看其他任何东西？哎呀不......只要您持续监控您的指标使用情况并注意对团队和组织的负面影响，您就可以监控任何您喜欢的东西。一些团队需要为融资制定时间表，而另一些团队则喜欢监控平均解决时间或构建质量。尽管在查找“缺陷泄漏”之后，我会质疑它的用处。

ps Scrum 是名词而不是时代错误，因此不需要大写

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T15:57:27.100

不应将 Scrum 设置为糟糕代码或缺陷泄漏的借口。如果有泄漏，这意味着将有项目重新添加到您的积压和不满意的客户中。与我交谈过的大多数使用 scrum 的团队也尝试使用来自 xtreme 编程的技术，例如测试驱动开发、junit 测试、自动化回归测试脚本。无论使用何种工具，您都应该在团队中 100% 预订 QA 资源，他们最终对围绕问题管理的流程以及在每个 sprint 结束时部署的可交付成果的质量负责。

另一个想法：如果缺陷泄漏是企业期望的指标，您可以考虑将其视为 sprint 0 的用户故事的标准。但是，如果它对项目或整个企业不重要，您可能不会得到它在执行期间由团队提供，或者团队可能会在出现问题时以一种临时的、战术性的方式实施它。

# xcode - 试图结合两个 Xcode 项目，错误架构 i386

> ID：13654704
> 
> 赞同：1
> 
> 时间：2012-11-30T23:35:43.353
> 
> 标签：xcode, exit, i386

我试图结合两个 Xcode 项目。我从网上购买了这两个项目，我想创建一个新项目，其中包含我购买的两个项目的功能。问题是，一旦我尝试将 .h、.m 和 .xib（+frameworks）拖放到新项目中，它就不起作用了。它通常会给我错误架构 i386 和/或退出代码 1。有人知道如何组合两个现成的项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:42:39.340

听起来它正在寻找 i386 架构。您可能需要检查`Architectures`您的构建设置以查看您是否列出了 i386，如果没有，请添加它。

# django - manage.py 的 django 配置文件的格式是什么？

> ID：13654712
> 
> 赞同：0
> 
> 时间：2012-11-30T23:37:05.850
> 
> 标签：django, selenium, configuration, manage.py

我正在连接 selenose (selenium) 测试并在此过程中使用 liveserver。看来我自动开始遇到正在使用的端口的问题，因此希望将 liveserver 配置为使用多个端口。我看到如何通过命令行（--liveserver=localhost:8100-8110）做到这一点，但想使用配置文件。

我已经有一个用于鼻子的，并认为我可以重复使用它，但找不到任何支持这种信念的东西，我的测试运行表明它不起作用。我期待能够添加如下内容：

[???] liveserver=localhost:8100-8110

但替换'???' 带有实际标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:32:11.330

出于某种原因，django 为此使用了环境变量。如果需要，您可以在设置中进行设置

```
import os
os.environ['DJANGO_LIVE_TEST_SERVER_ADDRESS'] = 'localhost:8000-9000' 
```

# c# - 发出动画精灵 C#

> ID：13654713
> 
> 赞同：0
> 
> 时间：2012-11-30T23:37:08.243
> 
> 标签：c#, animation, sprite

我在活动中画了一幅`e.Graphics.DrawImage`图像`Form_Paint()`。我使用 a`Timer`来刷新表单。问题是动画闪烁。看来更新时间太长了`e`。我`PictureBox`在表格中有 2 个。

想法？

更新：

```
 public Bitmap Paint(int state, Graphics g)
    {
        this.state = state;

        Bitmap temp;
        Graphics tempGraphics;
        temp = new Bitmap(45, 47, g);
        tempGraphics = Graphics.FromImage(temp);

        switch (state)
        {
            case 0:
                tempGraphics.DrawImageUnscaled(img, x, y);
                break;

            case 1:
                tempGraphics.DrawImageUnscaled(img, x, y - 42);
                break;
        }
    } 
```

这会在将精灵添加到表单之前准备好精灵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:49:01.347

通常管理的方式是将更新绘制到内存中的位图。然后将位图绘制到屏幕上。过程较慢（因为还有更多工作要做），但看起来更快，因为没有闪烁。

但是，许多控件实际上会自动为您执行此操作。研究[双缓冲技术](http://blog.csharphelper.com/2010/07/20/use-double-buffering-to-reduce-flicker-on-a-single-picturebox-in-c.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:49:09.147

在大多数情况下，它是由于未正确设置样式而导致的，因此首先绘制背景（通常是白色）然后绘制图像。

如果仅绘制缓冲区不够快，还可以搜索/读取双缓冲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:15:42.900

我通过避免在表单本身上做任何动画来解决这个问题。如果您将控件添加到表单，然后为父级设置动画，则您过度执行 UI 线程。最好的解决方案是将所有动画保存在图片框中。

所以：你要么直接使用动画，`g.DrawImage()`要么坚持使用`PictureBox`.

# java - JAVA：从mysql表中获取单元格

> ID：13654715
> 
> 赞同：1
> 
> 时间：2012-11-30T23:37:14.957
> 
> 标签：java, sql, cell

我在我的函数中得到一个名为“id”的参数，并想打印这个 id 行名称的单元格。

例如：

这是我的桌子：

```
id     name        email
1      alon     alon@gmail.com 
```

我发送到我的函数：func(1)，所以我希望它打印“alon”。

这是我尝试过的：

```
static final String url = "jdbc:mysql://localhost:3306/database_alon";
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection(url, "root", "Admin");
String query_txt = "SELECT * FROM authors WHERE id = " + id;
Statement ps2 = con.createStatement();
ResultSet my_rs = ps2.executeQuery(query_txt);
System.out.println(my_rs.getString("name"));
con.close; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:39:23.723

一切都很好，但只有一个问题。在获取任何值之前，您需要将`ResultSet`光标移动到第一行：-

利用： -

```
ResultSet my_rs = ps2.executeQuery(query_txt);
while (my_rs.next()) {
    System.out.println(my_rs.getString("name"));
} 
```

* * *

作为旁注，请考虑使用`PreparedStatement`以避免受到 SQL 注入的攻击。

这是你如何使用它： -

```
PreparedStatement ps2 = con.prepareStatement("SELECT * FROM authors WHERE id = ?");
ps2.setInt(1, id);
ResultSet my_rs = ps2.executeQuery();

while (my_rs.next()) {
    System.out.println(my_rs.getString("name"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:39:36.553

您需要使用`ResultSet.next()`导航到返回的数据：

```
if (my_rs.next()) {
  System.out.println(my_rs.getString("name"));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T23:41:11.480

1.  调用 my_rs.next()，它将 ResultSet 光标移动到第一行（从中提取数据）。
2.  如果这是一个真实的应用程序，请使用 PreparedStatements 而不是通用语句。如果您计划在 SQL 查询中使用用户输入，这是一个极其重要的安全问题。

# sencha-touch - 在 app.js 中列出视图而不是在 sencha touch 中列出控制器有什么区别？

> ID：13654718
> 
> 赞同：1
> 
> 时间：2012-11-30T23:37:29.250
> 
> 标签：sencha-touch, sencha-touch-2

应用程序设置的视图对象中的列表视图有什么区别：

```
 Ext.application({
    models: [
...        
    ],
    views: [
        'Login',
        'Home       
    ], 
```

并将它们列在 sencha touch 控制器的配置对象中？

```
 config: {
        views: [
            'Login',
            'View'      
        ], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:54:15.547

从[依赖项和 MVC](http://docs.sencha.com/touch/2-0/#!/guide/mvc_dependencies-section-5)：

> 决定在哪里声明每个依赖项时的一般规则是让您的类完全独立。例如，如果您有一个包含多个其他视图的视图，您应该在视图类中声明这些依赖项，而不是在应用程序中

希望这可以帮助

# php - POST 405 不允许使用特定的 XMLHttpRequest 和 PHP

> ID：13654720
> 
> 赞同：1
> 
> 时间：2012-11-30T23:37:53.437
> 
> 标签：php, javascript, post, xmlhttprequest, http-status-code-405

我收到一个 POST [https://www.example.com/php/download.php](https://www.example.com/php/download.php) 405（不允许），这个 ajax 调用我的 php 脚本。它用于我编写的用于下载文件的 http 文件服务器...使用 php 在 Web 根目录之外获取它们。我的其他 PHP 脚本/ajax 调用适用于我的 http 文件服务器......我只是在这个特定的 ajax 调用/php 脚本中遇到了这个问题。我正在使用 Nginx。

同样，只是为了强调....在同一台服务器上，其他 ajax 调用和其他 php 脚本工作。所以，有点输了。

```
<?php

$path = "/trunk/";
$file = $_POST['filename'];
$file_ext = pathinfo($file, PATHINFO_EXTENSION);
$file_name = pathinfo($file, PATHINFO_BASENAME);
$file_full = $path . $file_name;

$finfo = new finfo(FILEINFO_MIME);

$ctype = $finfo -> file($file_full);
header('Content-Disposition: attachment; filename=\"$file_name\"');
header("Content-Type: " .$ctype);

readfile($file_full);

?>

187 
188 function downloadFile(event) {
189         var fname = event.target.getAttribute("href");
190         fname.replace("#","");
191         var form = new FormData();
192         form.append("filename", fname);
193         
194         var xhr = new XMLHttpRequest();
195         xhr.onreadystatechange = function () {
196 //              setTimeout(refresh, 500);
197         }
198         
199         xhr.open("POST", "php/download.php", true);
200         xhr.send(form);
201 } 
```

这是来自 Google 的 chrome 网络调试器：

```
Request URL:https://www.example.com/php/download.php
Request Method:POST
Status Code:405 Not Allowed
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:172
Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryNGHvOaUnlBV8ADWE
Host:www.example.com
Origin:https://www.example.com
Referer:https://www.example.com/index.php
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4
Request Payload
------WebKitFormBoundaryNGHvOaUnlBV8ADWE
Content-Disposition: form-data; name="filename"

CentOS-6.3-x86_64-minimal-EFI.iso
------WebKitFormBoundaryNGHvOaUnlBV8ADWE--
Response Headersview source
Connection:keep-alive
Content-Length:568
Content-Type:text/html
Date:Fri, 30 Nov 2012 23:59:59 GMT
Keep-Alive:timeout=300
Server:nginx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:45:26.893

你的 nginx 配置，检查一下。您的位置块不允许您访问该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:45:40.337

我忘记了在 nginx.conf 中，我在 location 块中分别指定了每个 php 文件。我忘了将 download.php 文件添加到其中。感谢 Jacob 和 Guilherme 提供的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:44:53.140

**使固定：**

```
header('Content-Disposition: attachment; filename="'.$file_name.'"'); 
```

**使固定：**

```
 xhr.onreadystatechange = function () {
        if (r.readyState===4 && r.status===200) {
           //setTimeout(refresh, 500);
        }
     } 
```

* * *

**[编辑]**

**尝试：**

```
xhr.open("POST", "php/download.php", true);
xhr.onreadystatechange = function () {
    ...
}
xhr.send(form); 
```

# iphone - NSRegularExpression 问题

> ID：13654722
> 
> 赞同：0
> 
> 时间：2012-11-30T23:37:55.653
> 
> 标签：iphone, objective-c, regex, twitter, hashtag

我正在使用 NSRegularExpression 阅读文本并找出主题标签。这是我在 regularExpressionWithPattern 中使用的 NSString。

```
- (NSString *)hashtagRegex
{
    return @"#((?:[A-Za-z0-9-_]*))";
    //return @"#{1}([A-Za-z0-9-_]{2,})";

} 
```

这是我的方法：

```
 // Handle Twitter Hashtags
  detector = [NSRegularExpression regularExpressionWithPattern:[self hashtagRegex] options:0 error:&error];
  links = [detector matchesInString:theText options:0 range:NSMakeRange(0, theText.length)];
  current = [NSMutableArray arrayWithArray:links];

    NSString *hashtagURL =   @"http://twitter.com/search?q=%23";
  //hashtagURL = [hashtagURL stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

  for ( int i = 0; i < [links count]; i++ ) {

    NSTextCheckingResult *cr = [current objectAtIndex:i];

    NSString *url = [theText substringWithRange:cr.range];

    NSString *nohashURL = [url stringByReplacingOccurrencesOfString:@"#" withString:@""];
    nohashURL = [nohashURL stringByReplacingOccurrencesOfString:@" " withString:@""];

    [theText replaceOccurrencesOfString:url 
                             withString:[NSString stringWithFormat:@"<a href=\"%@%@\">%@</a>", hashtagURL, nohashURL, url]
                                options:NSLiteralSearch 
                                  range:NSMakeRange(0, theText.length)];
    current = [NSMutableArray arrayWithArray:[detector matchesInString:theText options:0 range:NSMakeRange(0, theText.length)]];

  }

  [theText replaceOccurrencesOfString:@"\n" withString:@"<br />" options:NSLiteralSearch range:NSMakeRange(0, theText.length)];

  [_aWebView loadHTMLString:[self embedHTMLWithFontName:[self fontName] 
                                                   size:[self fontSize] 
                                                   text:theText]
                    baseURL:nil]; 
```

一切正常，但是当我使用这样的字符串时，它发现了一个小问题：

```
NSString * theText = @"#twitter #twitterapp #twittertag"; 
```

我的代码仅在每个单词上突出显示#twitter，而不是第二部分（#twitter #twitter(app) #twitter(tag)）。我希望有人能帮助我！

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:29:18.793

该声明

```
[theText replaceOccurrencesOfString:url 
                         withString:[NSString stringWithFormat:@"<a href=\"%@%@\">%@</a>", hashtagURL, nohashURL, url]
                            options:NSLiteralSearch 
                              range:NSMakeRange(0, theText.length)]; 
```

正在用替换字符串替换字符串的*所有*实例。`url`在您给出的示例中，第一次通过循环`url`is `@"#twitter"`，并且其中所有三个出现的字符串`theText`都被一次性替换。这就是当时的`theText`样子：

```
<a href="http://twitter.com/search?q=%23twitter">#twitter</a> <a href="http://twitter.com/search?q=%23twitter">#twitter</a>app <a href="http://twitter.com/search?q=%23twitter">#twitter</a>tag 
```

所以，当然，接下来的两次循环，结果并不完全是你所期望的......！

我认为解决方法是限制替换的范围：

```
[theText replaceOccurrencesOfString:url 
                         withString:[NSString stringWithFormat:@"<a href=\"%@%@\">%@</a>", hashtagURL, nohashURL, url]
                            options:NSLiteralSearch 
                              range:cr.range]; 
```

# mysql - 事务中的 MySQL 错误处理

> ID：13654726
> 
> 赞同：0
> 
> 时间：2012-11-30T23:38:47.277
> 
> 标签：mysql, error-handling, transactions

我有一个接受参数 UserID Varchar(10) 的过程。如果我输入的用户 ID 超过 10 个字符，我会收到以下消息：

调用 procedure1x('Thisismorethanten'); 错误 1406 (22001)：第 1 行的“用户 ID”列的数据太长。

我如何为这个错误创建一个错误处理程序，以便当它发生时，它不会显示上面的句子，而是说“再试一次。用户 ID 太长。”之类的其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:54:11.237

错误处理通常使用`TRY...CATCH`块来完成。MySQL 用于`DECLARE ... HANDLER`处理错误。该[文档](http://dev.mysql.com/doc/refman/5.1/en/declare-handler.html)有一些可以帮助您的示例块。

# google-cloud-storage - Google Storage Json Api - 从 api 访问“文件夹”失败？

> ID：13654731
> 
> 赞同：1
> 
> 时间：2012-11-30T23:39:15.433
> 
> 标签：google-cloud-storage

我在通过 api 访问使用斜杠的对象时遇到问题。例如，我有名称为“folder1/folder2/name”的对象。当我将它与 api 一起使用时，我收到 400 错误请求。Api还不支持吗？还是需要特殊字符？这对我来说在 API 资源管理器上也失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:26:06.053

这是一个 URL 编码问题。对象名称是单个 URL 路径部分，因此名称中的所有斜杠都需要进行 % 编码。（即，文件夹 1%2 文件夹 2%2 名称）

不幸的是，API 资源管理器在 storage.objects.get 中有一个已知问题（内部报告）。该方法返回实际的文件数据，API 资源管理器期待 JSON 元数据，事情从那里开始变得很糟糕。

# asp.net - 动态创建 ASP.NET 表单控件

> ID：13654732
> 
> 赞同：1
> 
> 时间：2012-11-30T23:39:16.483
> 
> 标签：asp.net, webforms, controls

我有一个表单，根据前一页中给出的答案，字段组合可以有大约 10 种不同的变化（大多数是相同的，但有几个变化）。我决定与其制作 10 个单独的页面，不如尝试使其具有动态性。最终这将从数据库中提取表单设置，但现在我只是想让动态部分工作。下面的代码有点工作，但它给了我一个奇怪的结果。

```
private void AddTestControls()
{
    var newbox = new TextBox();
    newbox.ID = "FirstBox";
    newbox.Text = "This is dynamic";
    newbox.CssClass = "stepHeader";
    DynamicDiv1.Controls.Add(newbox);

    var newlit = new Literal();
    newlit.ID = "FirstLit";
    newlit.Text = ".<br/>.";
    DynamicDiv1.Controls.Add(newlit);

    newbox.ID = "SecondBox";
    newbox.Text = "This is also dynamic";
    newbox.CssClass = "step";
    DynamicDiv1.Controls.Add(newbox);

} 
```

我已经完成了它并且所有属性都设置正确，但是当页面最终呈现时，只有`SecondBox`控件是可见的。没有踪迹`FirstBox`。如果我将其更改`SecondBox`为它自己的对象（`newebox2`例如），那么两者都是可见的，但是我认为我最终会从数据库中生成表单，这可能会使事情复杂化。我不明白为什么必须重新创建文本框对象才能将其添加到 Div 的控件集合中。我是不是把这一切都搞错了，或者只是在某个地方错过了一步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:44:33.920

您的“SecondBox”正在覆盖“FirstBox” `newbox`，因为它仍然持有对它的引用。`TextBox`为第二个框创建一个新框：

```
var newbox = new TextBox();
newbox.ID = "FirstBox";
newbox.Text = "This is dynamic";
newbox.CssClass = "stepHeader";
DynamicDiv1.Controls.Add(newbox);

var newlit = new Literal();
newlit.ID = "FirstLit";
newlit.Text = ".<br/>.";
DynamicDiv1.Controls.Add(newlit);

// Create a new TextBox
var secondBox = new TextBox();
secondBox.ID = "SecondBox";
secondBox.Text = "This is also dynamic";
secondBox.CssClass = "step";
DynamicDiv1.Controls.Add(secondBox); 
```

我不太清楚为什么这会使事情复杂化，但你可以做的是创建一个创建文本框的方法，如果这更容易的话：

```
TextBox CreateTextBox(string id, string text, string cssClass)
{
    var box = new TextBox();
    box.ID = id;
    box.Text = text;
    box.CssClass = cssClass;
    return box;
} 
```

进而

```
var newBox = CreateTextBox("FirstBox", "This is dynamic", "stepHeader");
DynamicDiv1.Controls.Add(newBox); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:46:43.997

它应该如何工作。`newbox1`是一个参考，所以在它第一次添加到`DynamicDiv1`之后，它就在那里，如果你改变它`Text`，那么`Text`就会改变。您可能会发现这[很有](https://stackoverflow.com/questions/343068/asp-net-survey-questionnaire-engine)用。这个[SO](https://stackoverflow.com/questions/2940007/saving-a-reference-to-a-int)演示了您遇到的相同问题。

# jquery - 带有图像切换的两个 div 之间的 jQuery 滑动

> ID：13654733
> 
> 赞同：1
> 
> 时间：2012-11-30T23:39:22.083
> 
> 标签：jquery, html, css

我有一个需要帮助的 jQuery 动画。

目标是在用户单击图像时向下滑动到后续 div (arrow-down.png)。当单击此图像并且页面滚动到下一个 div 时，图像 src 会更改（变为 arrow-up.png）并允许用户向上滑动到原始 div 再次将图像设置为其原始状态。

这是我的 HTML。

```
<div class="ninth panel">
 <div class="separator">
<img class="img-swap" src="images/arrow-down.png">
 </div>
 <div class="contact-form">
 <!-- code for form here -->
 </div>
 </div> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:00:25.437

在玩了一会儿之后，我设法得到了我想要的效果。由于我不是专家，因此很可能会优化此代码，但它可能会帮助某些人。

```
$("span.img-swap.down").on("click", function() {
    // Checks if class is set to down, initiates animation, stop animation, then toggles classess
    if ($('span.img-swap').is('.down')) {
        $('html, body').stop().animate({ scrollTop: $('div.ninth.panel').offset().top }, 2000 );
        $('span.img-swap').toggleClass('down up');
    } 
    // If class is not down, checks if class is set to up, initiates animation, stop animation, then toggles classess
    else if ($('span.img-swap').is('.up')) {
        $('html, body').stop().animate({ scrollTop: $('div.eighth.panel').offset().top }, 2000 );
        $('span.img-swap').toggleClass('up down');
    }
}); 
```

# python - Python ，我的对象声称无法访问方法

> ID：13654742
> 
> 赞同：2
> 
> 时间：2012-11-30T23:40:26.533
> 
> 标签：python, object, methods, call

我正在编写一些 Python 代码并有一个类如下

```
class GO:

    ##irrelevant code 
    def getCenter(self):
        xList = []
        yList = []

        # Put all the x and y coordinates from every GE
        # into separate lists
        for ge in self.GEList:
            for point in ge.pointList:
                xList.append(point[0])
                yList.append(point[1])

        # Return the point whose x and y values are halfway between
        # the left- and right-most points, and the top- and
        # bottom-most points.
       centerX = min(xList) + (max(xList) - min(xList)) / 2
       centerY = min(yList) + (max(yList) - min(yList)) / 2
       return (centerX, centerY)

    ###more irrelevant code
    def scale(self, factor):

        matrix = [[factor,0,0],[0,factor,0],[0,0,1]]
        for ge in self.GEList:
            fpt = []
            (Cx, Cy) = ge.getCenter()
            for pt in ge.pointList:
                newpt = [pt[0]-C[0],pt[1]-C[0],1]###OR USE TRANSLATE
                spt = matrixPointMultiply(matrix, newpt)
                finalpt = [spt[0]+C[0],spt[1]+C[0],1]
            fpt.append(finalpt)
        ge.pointList=fpt
        return 
```

每当我运行它时，它都会说：`AttributeError: circle instance has no attribute 'getCenter'`。如何让对象正确调用自身的函数？这是一个菜鸟问题，我正在学习，所以详细的建议会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:49:38.187

你检查过你的缩进以确保它是一致的吗？这是一个经典的 Python 初学者问题。您需要使用一致的空格（制表符或空格，大多数人更喜欢空格）和适量的空格。

例如，这可能看起来不错，但它不会达到您的预期：

```
class Dummy(object):

  def foo(self):
    print "foo!"

    def bar(self):
      print "bar!"

d = Dummy()
d.bar() 
```

这将返回：

```
AttributeError: 'Dummy' object has no attribute 'bar' 
```

如果不是这样，请尝试将您的代码削减到最低限度，然后发布它以及您如何调用它。就目前而言，一般形式对我来说看起来不错，除非我遗漏了什么。

# c++ - 堆栈和队列在 Dev-C++ 中给出错误

> ID：13654743
> 
> 赞同：0
> 
> 时间：2012-11-30T23:40:30.510
> 
> 标签：c++

我被分配开发一个手机模拟，部分要求包括我使用队列来存储来自 txt 文件的电话号码以模拟被呼叫。我一遍又一遍地审查并包括#include，但仍然出现告诉我“队列”未声明的错误消息。我正在使用 Bloodsehd Dev-C++，并且我已经包含了一个用于测试队列的示例，如果只是程序没有正确的信息，我们将不胜感激。我检查过其他网站，大多数人说添加#include 或#include 似乎都不能解决问题。

```
#include <queue>
#include <deque>
#include <iostream>
#include <fstream>
using namespace std;

class cell
{
    public:
        cell();
        ~cell();
        void upload( string item );//Insert in order
        void printnew();//Print call just recieved
        void printlater();//Print calls for later
        int Front(); //returns front element
        int Rear(); //returns rear element
        bool Empty();

    private:

};

int main()
{
    Queue Q;
    Q.Enqueue(54);
    cout << Q.front();

    system("Pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:54:22.243

要使用 STL 队列，您需要：

```
#include <queue>     // include necessary header

std::queue<int> q;   // initialize queue container with type int
q.push(54);          // add element to queue
std::cout << q.front() << std::endl; // access the head of queue 
```

结帐`std::queue`参考[http://en.cppreference.com/w/cpp/container/queue](http://en.cppreference.com/w/cpp/container/queue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:45:23.530

如果要使用 C++ 标准库[queue](http://www.cplusplus.com/reference/queue/queue/)，必须将其声明为

```
queue<int> Q;
Q.push(54);
cout << Q.front(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:44:24.760

queue 应该是小写的。

您可以在此处找到有关使用队列的信息： [http ://www.cplusplus.com/reference/queue/queue/queue/](http://www.cplusplus.com/reference/queue/queue/queue/)

# jquery - Jquery keyup 功能和大写文本

> ID：13654750
> 
> 赞同：0
> 
> 时间：2012-11-30T23:41:07.117
> 
> 标签：jquery

我正在尝试将文本框中的字符转换为大写。

但这似乎影响了我的光标位置。

JS小提琴如下：

```
$(this).val($(this).val().toUpperCase()); 
```

[http://jsfiddle.net/ZdRnZ/](http://jsfiddle.net/ZdRnZ/)

如果我在空白文本框中输入一切都很好......但是如果我尝试在文本之间输入，光标会立即转到单词的末尾。

我怎样才能防止它发生，我的光标应该在我停止输入的地方，而不是在文本的末尾。

在 Firefox 中运行良好，IE 搞砸了。我需要它在 IE 上工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T23:54:45.903

这也可以通过 CSS 实现：

```
<input style="text-transform: uppercase" type='text'></input> 
```

把它放在你的 HTML 页面中，文本框将强制所有文本输入为大写。还有额外的修饰符：

小写、大写、无、继承

当然，这可能取决于浏览器，但似乎大多数浏览器都支持。

我已经更新了您的示例，添加了文本转换样式并将 jquery 事件绑定从 keyup 切换为更改：http: [//jsfiddle.net/ZdRnZ/6/](http://jsfiddle.net/ZdRnZ/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T15:55:05.597

```
$('#txt').keyup(function (e) {
  var position, texto, code;
  texto=this.value;
  code=e.keyCode;   
  position=texto.slice(0, this.selectionStart).length;       
  if((code>=65 && code <=90 )|| code ==192 ){
    this.value=texto.toUpperCase();
    this.setSelectionRange(position,position);
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<input type="text" id="txt" style="width:100%" />
```

# java - 在 Java 中定义方法

> ID：13654752
> 
> 赞同：4
> 
> 时间：2012-11-30T23:41:34.713
> 
> 标签：java

我刚收到一个作业，由于以下方法定义而被标记为：

```
static String[] getDayData (int day) { 
```

有人告诉我：

> 你的函数应该*总是*有定义器 //`public`在其中。`private``protected`

尽管我不同意 Java 中的函数部分，但它[在这里](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)明确指出：

> 方法声明中唯一需要的元素是方法的返回类型、名称、一对括号、`()`和大括号之间的主体，`{}`。

那么谁对此有任何想法？我是否应该始终在方法的定义中包含修饰符？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T23:46:25.993

从表面上看，这种说法绝对是错误的。如果您要声明的是包私有方法，那么**这是唯一的方法**。该声明不可能在不改变其含义的情况下添加访问修饰符。

你的老师对他的评分标准到底有什么想法是一个单独的问题，但从我自己的教学经验来看，我不能同意这个评论。教授 Java 101 绝对包含**所有方法访问级别**。

顺便说一句，我也不同意他随意使用“函数”而不是官方术语“方法”。在我的书中，这只是糟糕的教学，根本原因是对 Java 的无知还是只是被误导的教学法，我们无法从我们掌握的信息中看出这一点。而且……他真的用过“定义者”这个词吗？这个术语甚至不存在——无论是在 Java 中还是在其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:49:47.960

在团队中编程时，并不是每个人都会始终熟悉您使用的语言。Java 语言规范不**要求**对类成员使用访问修饰符，但如果您明确声明，每个人都会清楚您打算做什么。当然，唯一的例外是 Marko Topolnik 提到的情况，您需要一个包私有方法。虽然，我相信很少有常见的设计模式可以利用这些。我什至想不出你需要它们的合乎逻辑的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T23:51:28.463

Java 字段和方法有四个可见性级别，每个级别都比上一个“更宽”：

1.  `private`- 仅在此类中可见
2.  “默认”（即无修饰符）- 对此类和同一包中的其他类可见
3.  `protected`- 对此类、同一包中的其他类以及其他包中的此类的子类可见
4.  `public`- 随处可见

所以有一个没有修饰符的方法是有效的。我见过的一些编码风格使包的可见性更加明确，评论如下

```
/* package-private */ static int foo() { ... } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T23:48:35.043

虽然这可能被认为是一个风格问题，并且您可以在此基础上进行评分，但使用默认可见性的方法和类可能很有价值。Java 中的默认可见性是包级别的可见性，请参阅 Java 教程的这一[部分](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。我倾向于在编写库时使用它。我想从库中的其他类中访问一些函数和一些字段，但仅供内部使用。在使用其他语言（例如 php）编写时，我发现自己缺少这种可见性级别，而是求助于声明为 public 的函数的注释，称它们是“仅限内部”。使用此默认级别，重要的是要注意子包被视为不同的包，并且无法看到具有此可见性级别的功能。

由于您可能打算将其用于包装之外，因此不太可能让您获得积分。

# c++ - SDL - 绘制“负面”圆圈（战争迷雾）

> ID：13654753
> 
> 赞同：8
> 
> 时间：2012-11-30T23:41:35.253
> 
> 标签：c++, sdl

我有这个 800x600square 我想画到屏幕上。我想在其中“切割”圆圈（其中 alpha 为 0）。基本上我在地图上绘制了整个矩形，所以在我绘制的这些“圆圈”中，你可以看到地图，否则你会看到灰色方块

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-01T18:03:54.763

所以，我假设您正试图在其中一款游戏中添加战争迷雾？

几周前我为当地的一所大学做了一个小演示来展示 A* 寻路，所以我想我可以为你添加战争迷雾。结果如下：

**初始地图**

首先，您从一张完整的地图开始，完全可见

![完整地图](../Images/2c252e1a10f6932a90fc9b47671281f1.png)

**多雾路段**

然后，我添加了一个表面来覆盖整个屏幕（请注意，我的地图比屏幕小，所以对于这种情况，我只是在屏幕上添加了战争迷雾，但如果你有滚动，请确保它覆盖了每个地图像素1:1)

```
mFogOfWar = SDL_CreateRGBSurface(SDL_HWSURFACE, in_Width, in_Height, 32, 0x00ff0000, 0x0000ff00, 0x000000ff, 0xff000000);
SDL_Rect screenRect = {0, 0, in_Width, in_Height};
SDL_FillRect(mFogOfWar, &screenRect, 0xFF202020); 
```

然后，你需要绘制它......我在绘制游戏对象之后和绘制 UI 之前添加了这个调用

```
DrawSurface(mFogOfWar, 0, 0); 
```

在哪里

```
void RenderingManager::DrawSurface(SDL_Surface* in_Surface, int in_X, int in_Y)
{
    SDL_Rect Dest = { in_X, in_Y, 0, 0 };
    SDL_BlitSurface(in_Surface, NULL, mScreen, &Dest);
} 
```

这应该会给你以下结果：

![一切都模糊了](../Images/7af4842a748de061b83f837bbb2bd2e6.png)

**“打孔表面”**

然后我创建了一个`.png`看起来像这样的 32 位（棋盘显示 alpha）

![冲床](../Images/92fa4287759f2372457c4e504b3fe2f8.png)

在渲染我的主角时，我添加了这个调用：

```
gRenderingManager.RemoveFogOfWar(int(mX) + SPRITE_X_OFFSET, int(mY) + SPRITE_Y_OFFSET); 
```

偏移量仅用于将冲头与精灵居中，基本上，我传递到`RemoveFogOfWar`的是我的精灵的中心。

**消除战争迷雾**

现在是战争迷雾的肉。我做了两个版本，一个是永久移除战争迷雾，一个是重置战争迷雾。我的战争迷雾重置依赖于我的`punch`表面具有重置 alpha 的轮廓`0`以及我的角色移动的像素少于每帧轮廓包含的像素的事实，否则我将保留`Rect`应用打孔的位置并重新填充在再次绘制新的拳头之前。

由于我找不到与 SDL 的“乘法”混合，我决定编写一个简单的函数，在冲压表面上迭代并更新战争迷雾表面上的 alpha。最重要的部分是确保您保持在表面的范围内，因此它占用了大部分代码......可能有一些裁剪功能，但我没有费心检查：

```
void RenderingManager::RemoveFogOfWar(int in_X, int in_Y)
{
    const int halfWidth = mFogOfWarPunch->w / 2;
    const int halfHeight = mFogOfWarPunch->h / 2;

    SDL_Rect sourceRect = { 0, 0, mFogOfWarPunch->w, mFogOfWarPunch->h };
    SDL_Rect destRect = { in_X - halfWidth, in_Y - halfHeight, mFogOfWarPunch->w, mFogOfWarPunch->h };

    // Make sure our rects stays within bounds
    if(destRect.x < 0)
    {
        sourceRect.x -= destRect.x; // remove the pixels outside of the surface
        sourceRect.w -= sourceRect.x; // shrink to the surface, not to offset fog
        destRect.x = 0;
        destRect.w -= sourceRect.x; // shrink the width to stay within bounds
    }
    if(destRect.y < 0)
    {
        sourceRect.y -= destRect.y; // remove the pixels outside
        sourceRect.h -= sourceRect.y; // shrink to the surface, not to offset fog
        destRect.y = 0;
        destRect.h -= sourceRect.y; // shrink the height to stay within bounds
    }

    int xDistanceFromEdge = (destRect.x + destRect.w) - mFogOfWar->w;
    if(xDistanceFromEdge > 0) // we're busting
    {
        sourceRect.w -= xDistanceFromEdge;
        destRect.w -= xDistanceFromEdge;
    }
    int yDistanceFromEdge = (destRect.y + destRect.h) - mFogOfWar->h;
    if(yDistanceFromEdge > 0) // we're busting
    {
        sourceRect.h -= yDistanceFromEdge;
        destRect.h -= yDistanceFromEdge;
    }

    SDL_LockSurface(mFogOfWar);

    Uint32* destPixels = (Uint32*)mFogOfWar->pixels;
    Uint32* srcPixels = (Uint32*)mFogOfWarPunch->pixels;

    static bool keepFogRemoved = false;

    for(int x = 0; x < destRect.w; ++x)
    {
        for(int y = 0; y < destRect.h; ++y)
        {
            Uint32* destPixel = destPixels + (y + destRect.y) * mFogOfWar->w + destRect.x + x;
            Uint32* srcPixel = srcPixels + (y + sourceRect.y) * mFogOfWarPunch->w + sourceRect.x + x;

            unsigned char* destAlpha = (unsigned char*)destPixel + 3; // fetch alpha channel
            unsigned char* srcAlpha = (unsigned char*)srcPixel + 3; // fetch alpha channel
            if(keepFogRemoved == true && *srcAlpha > 0)
            {
                continue; // skip this pixel
            }

            *destAlpha = *srcAlpha;
        }
    }

    SDL_UnlockSurface(mFogOfWar);
} 
```

`keepFogRemoved = false`即使在角色四处移动之后，它也给了我这个

![战争迷雾](../Images/ffcccb84026641563e3c65d24818aa6c.png)

而这与`keepFogRemoved = true`

![战争迷雾永久](../Images/0a01b75331619ab784f86d2a27b12c52.png)

**验证**

重要的部分实际上是确保您不会在像素缓冲区之外写入，因此请注意负偏移量或偏移量，它们会使您超出宽度或高度。为了验证我的代码，我在单击鼠标时添加了一个简单的调用，`RemoveFogOfWar`并尝试了角和边缘，以确保我没有“逐一”问题

```
case SDL_MOUSEBUTTONDOWN:
    {
        if(Event.button.button == SDL_BUTTON_LEFT)
        {
            gRenderingManager.RemoveFogOfWar(Event.button.x, Event.button.y);
        }
        break;
    } 
```

**笔记**

显然，“打孔”不需要 32 位纹理，但这是我能想到的向您展示如何做到这一点的最清晰的方法。它可以使用每像素 1 位（开/关）来完成。您还可以添加一些渐变，并更改

```
if(keepFogRemoved == true && *srcAlpha > 0)
{
    continue; // skip this pixel
} 
```

像这样的东西

```
if(*srcAlpha > *destAlpha)
{
    continue;
} 
```

要保持这样的平滑混合：

![在此处输入图像描述](../Images/21e516c1197c859a476a188896964827.png)

**3 战争迷雾**

我想我应该添加这个...我添加了一种创建 3 状态战争迷雾的方法`visible`：`seen`和`fogged`.

为此，我只需保留`SDL_Rect`上次“打”战争迷雾的位置，如果 alpha 低于某个值，我将其钳制在该值。

因此，只需添加

```
for(int x = 0; x < mLastFogOfWarPunchPosition.w; ++x)
{
    for(int y = 0; y < mLastFogOfWarPunchPosition.h; ++y)
    {
        Uint32* destPixel = destPixels + (y + mLastFogOfWarPunchPosition.y) * mFogOfWar->w + mLastFogOfWarPunchPosition.x + x;
        unsigned char* destAlpha = (unsigned char*)destPixel + 3;

        if(*destAlpha < 0x60)
        {
            *destAlpha = 0x60;
        }
    }
}
mLastFogOfWarPunchPosition = destRect; 
```

就在战争迷雾被“打”的循环之前，我得到了类似于星际争霸等游戏中的战争迷雾：

![3 状态](../Images/a38dc0a8a94eff1c77b6ba0101a735c0.png)

现在，由于“可见”的战争迷雾是半透明的，您将需要调整渲染方法以正确剪切可能在迷雾中的“敌人”，这样您就看不到它们但仍能看到地形。

希望这可以帮助！

# python - 我的 Mac OS X Mountain Lion 上有太多的蟒蛇

> ID：13654756
> 
> 赞同：3
> 
> 时间：2012-11-30T23:41:57.890
> 
> 标签：python, osx-mountain-lion

不久前我更新到 Mountain Lion，之前使用过 python，现在我的电脑上安装了 8 个（是的，8 个）版本的 python。

```
$ ls -l /System/Library/Frameworks/Python.framework/Versions/
total 8
drwxr-xr-x   6 root  wheel  204 Jun 20 16:23 2.3
drwxr-xr-x  11 root  wheel  374 Aug 22 13:32 2.5
drwxr-xr-x  11 root  wheel  374 Aug 22 13:32 2.6
drwxr-xr-x  11 root  wheel  374 Aug 22 13:32 2.7
lrwxr-xr-x   1 root  wheel    3 Jul 29 17:41 Current -> 2.7 
```

我很想擦除所有这些并清理所有内容，并且我更喜欢将所有路径设置为Mountain Lion 附带的**系统python。**我的目标是简单和清洁。几乎六个月来，我一直在尝试这样做，断断续续......网上有许多“解决方案”和脚本可以解决这个问题，但没有一个完全有效，甚至无法理解。谁能告诉我如何从我的 Mac 中获取这些不需要的 Python 版本，或者至少如何设置我的 Mac，以便一切都很好地融入 Mac 系统版本的 Python。我没有太多我特别需要使用的旧 Python 文件，但我注意到我在安装 Python 东西和运行 .py 脚本时遇到了麻烦，因为路径都被混淆了或类似的东西。

另外，我明白了：

```
$ echo $PATH
/Library/Frameworks/Python.framework/Versions/Current/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/Current/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/texbin:/usr/local/mysql/bin 
```

……有点吓人。

谢谢你的帮助。我熟悉 UNIX shell 脚本，并且对系统管理的东西有中等程度的了解……但不是高级的。我是 R 的程序员，所以我知道如何编程以及所有这些。感谢任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:51:55.487

您实际上有 5 个，是的 5 个版本，而不是 8 个，不是 8 个。这 5 个中的 4 个是操作系统的一部分，永远不应该被删除。所以你只有1个多余的，而不是7个。

```
ls -l /System/Library/Frameworks/Python.framework/Versions/
total 8
drwxr-xr-x   6 root  wheel  204 Jun 20 16:23 2.3
drwxr-xr-x  11 root  wheel  374 Aug 22 13:32 2.5
drwxr-xr-x  11 root  wheel  374 Aug 22 13:32 2.6
drwxr-xr-x  11 root  wheel  374 Aug 22 13:32 2.7
lrwxr-xr-x   1 root  wheel    3 Jul 29 17:41 Current -> 2.7 
```

那是 4。符号链接`Current -> 2.7`不是另一个版本，它又是同一个版本。这 4 个都随您的系统一起提供，并且可能被系统中的工具使用。你永远不应该摆脱它们，或者`/System`目录中的任何其他东西（或`/usr/bin`启动它们的快捷方式）。

同时，您的路径中有这些：

```
/Library/Frameworks/Python.framework/Versions/Current/bin:
/Library/Frameworks/Python.framework/Versions/2.7/bin
/Library/Frameworks/Python.framework/Versions/Current/bin 
```

这只是同一版本的三个副本，很可能是来自 python.org 的官方 Python 2.7。我的猜测是您运行了一次旧式安装程序，然后运行了一次较新的安装程序。

但他们如何到达那里并不重要（除非它是通过`Homebrew`，在这种情况下`brew unlink python`，你就完成了）。您可以按照 python.org 上的卸载说明摆脱它，然后您将再次拥有最少的 4 个。

经过快速检查，我在 python.org 上找不到曾经有简单卸载说明的页面，但基本上是这样的：

```
rm -rf /Library/Frameworks/Python.framework 
```

`ls -l /usr/local/bin | grep Python.framework`然后，您可以执行`rm`所有出现的操作。（您可以自动执行此操作，但最好准确查看要删除的内容。）

您可能还想找到将额外内容添加到 PATH 中的内容。可能要看的地方是`~/.bash_profile`（python.org 安装程序在哪里做），类似的文件，如`~/.bashrc`or `~/.profile`（其他人可能告诉你把它放在哪里），可能是`/etc/paths`or `/etc/paths.d`（你可能把它放在哪里使它与 GUI 应用程序一起工作） .

# mongodb - 在 MongoDB 中创建新元素时显示对象而不是 db-ref ObjectId

> ID：13654764
> 
> 赞同：3
> 
> 时间：2012-11-30T23:43:13.043
> 
> 标签：mongodb, mongoose

DB ref 在以下情况下工作：

```
Element.
      findOne({unit: unit_id,).
      populate('unit').
      exec(function(err, element) {
        console.log(element)
      } 
```

它会显示

```
{
  "unit": {
    "id": "10251179680282633",
    "__v": 0,
  },
  "_id": "50b92eec29921b2531000003",
  "__v": 0,
  "created_at": "2012-11-30T22:10:52.513Z"
} 
```

但是，如果我创建一个新单元并将我的单元放入我的元素中并保存，

```
unit = new Unit();
element = new Element()
element.unit = unit; 
```

当我做：

```
console.log(element) 
```

它返回：

```
{
  "unit": "50b9377d29921b2531000004",
  "_id": "50b9377d29921b2531000005",
  "created_at": "2012-11-30T22:47:25.361Z"
} 
```

这不是我所期望的，因为我希望将单元视为对象而不是 ID。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:45:32.237

这是预期的

在您的`console.log(element)`示例中，`element`包含对 ObjectID
It's Mongoose的引用，它根据存储在文档中的 ID 从它自己的集合`populate`中获取智能。`unit``element`

此页面更详细地解释了这一点
[http://mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

# ios - 将 UIGestureRecognizer 添加到 UILabel 的单个字母

> ID：13654766
> 
> 赞同：0
> 
> 时间：2012-11-30T23:43:29.563
> 
> 标签：ios, uilabel, uigesturerecognizer, uiswipegesturerecognizer

现在我正在制作一个 iOS 应用程序，我想通过简单地“删除字母”来实现删除 UILabel 中的字母的能力。我遇到问题的部分是将手势识别器添加到 UILabel 的各个字母中。我已经在网上搜索过这个并且什么都没有。为了清楚起见，我不是在整个标签中添加手势识别器，我只是想将它添加到单个字母中。任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:27:18.997

似乎最简单的方法是动态计算字母的位置。用这个：

```
CGSize textSize = [text sizeWithFont:[UIFont boldSystemFontOfSize:size]
                   constrainedToSize:constrainedSize
                       lineBreakMode:NSLineBreakByWordWrapping]; 
```

因此您可以获取每个标签使用的字体和大小中字母的大小，并使用`[stringInstance length]`属性和`[UILabel numberOfLines]`属性来获取标签中每个字母的大致中心，然后对每个标签使用简单的 tapGestureRecognizer 并在那里调用你的方法

```
- (NSString*)letterForPoint:(CGPoint)tapCenter inLabel:(UILabel*)label; 
```

在那里，您使用一切来计算每个字母的近似中心，并添加一个 selectableRange 用于错误并纠正用户响应为 x +- 20 像素和 y +- 20 像素。

Apple 表示，对于 40 像素的可选边界小于 40 像素的任何内容都会让用户感到非常恼火，因此您的字体大小实际上应该非常大，以方便用户交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:48:50.417

如果我理解正确，听起来 UILabel 的子类化是有道理的。

创建一个`LetterLabel: UILabel` 类并在 init 中设置你的 GestureRecognizer 。

然后，当您创建字母时，每个字母都会附加识别器

```
LetterLabel *firstLetter = [[LetterLabel alloc] init]
LetterLabel *secondLetter = [[LetterLabel alloc] init] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T00:04:17.603

UIGestureRecognizer 只能应用于 UIView 或其子类（例如，像 Adam 建议的 UILabel）。如果您担心性能，那么我认为您的下一步是：

1) 子类 UIView 以创建类似 UILabel 的视图的自定义实现。

2）在drawInRect:方法中画出自定义标签的字符串

3) 使用 touchesBegan:withEvent:、touchesMoved:withEvent: 和 touchesEnded:withEvent: 方法来跟踪手指位置，以便移动/重绘支持字符串的字符。

**编辑：**

或者，您可以在自定义标签上使用一个 UIPanGestureRecognizer 来跟踪手指位置，并在自定义标签的范围内移动子层（每个子层可以包含字符串中的一个字符）。这样，您可以更轻松地利用 Core Animation 为角色设置动画（即创建“掉落”效果）。

# java - SurfaceView，重新打开应用程序后黑屏

> ID：13654767
> 
> 赞同：2
> 
> 时间：2012-11-30T23:43:43.327
> 
> 标签：java, android, multithreading, android-activity, surfaceview

我有一个活动，它调用一个扩展 SurfaceView 并实现 Runnable 的类，并将活动类的 contentView() 设置为表面视图类的实例。最小化活动后，我暂停并销毁线程：

```
public void pause(){
    running = false;
    while(true){
        try{
            renderThread.join();
            break;
        }catch(InterruptedException e){
            //retry
        }
    }
} 
```

当活动恢复时，我重新创建线程：

```
 public void resume(){
    running = true;
    renderThread = new Thread(this);
    renderThread.start();
} 
```

请注意，这些是在 onPause() 和 onResume() 活动方法中调用的。

```
public void run(){
    while(running){//thred loop
            if(!holder.getSurface().isValid())
                continue;
                if(puzzleDrawn!=true)   {
                    canvas = holder.lockCanvas();
                    drawPuzzle(canvas);
                    holder.unlockCanvasAndPost(canvas);
                    }
    }
}
    public void drawPuzzle(canvas){
    //draws on canvas
    } 
```

当我尝试重新打开应用程序时，我看到一个黑屏。我只需要绘制一次 drawPuzzle(canvas) 方法。有小费吗？

如果您需要更多信息，请告诉我！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T14:14:44.113

在您的暂停方法中，您在错误的位置调用了 break。您应该做的是在 try 和 catch 括号之后的 while 循环结束时调用 break，并在循环范围之外和结束 pause 方法之前再次将线程设置为 null，如下所示：

```
public void pause(){
 running = false;
 while(true){
    try{
        renderThread.join();
    }catch(InterruptedException e){
        //retry
    }
      break;
 }
 renderThread = null;
} 
```

# java - 是否可以在 Servlet 3.0 环境中的外部 Jars 和 War 之间共享相同的 MVC？

> ID：13654768
> 
> 赞同：8
> 
> 时间：2012-11-30T23:43:54.287
> 
> 标签：java, spring, spring-mvc, servlet-3.0

我了解基于Can I service JSP from `Servlet 3.0`inside [a JAR in lib, 或者是否有解决方法？](https://stackoverflow.com/questions/5013917/can-i-serve-jsps-from-inside-a-jar-in-lib-or-is-there-a-workaround)`.jsp``.jar`

但是，我似乎无法将我的视图（jar WEB-INF/lib Tomcat 7 中的 jsp 和战争中的经典 spring MVC 上下文配置）与我的 Web 应用程序的模型和控制器连接起来。

有没有一种共享调度程序 Servlet 的好方法，或者可能创建一个`CustomViewResolver`可以扫描`.jsp`包含在 external 中`JAR`的 s，并实际上将 my`jar`插入到一个独特的 spring 上下文中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:01:53.320

使用 JSP，您会遇到编译问题。因此，您至少需要预编译它们，以包含它们。那么它应该是可能的，因为编译后的 JSP 基本上是一个 Servlet。

如果您要使用其他视图技术，如 Velocity、Freemarker 或基于 Facelets 的 JSF，您可以非常轻松地使用基于类路径的 ViewResolver。

# php - 需要帮助将 mysql 数据库内容显示到网页

> ID：13654770
> 
> 赞同：0
> 
> 时间：2012-11-30T23:44:03.367
> 
> 标签：php, mysql

我需要帮助将数据从 mysql 显示到网页，我正在用 php 编码。

我的数据库包含汽车产品（相同类型，例如雪佛兰），现在我有 2 行（如果我愿意，我可以添加更多），每辆汽车都包含图像路径和描述。

我可以显示一排（汽车），但我无法显示所有行。我知道我必须通过一个循环来从汽车数据库中获取所有数据，但我不确定如何实现它。

这就是我到目前为止所拥有的。假设我已经连接到我的数据库注释：我想在我的网站中显示图片的图像路径。

这就是我希望它在我的网页中显示的方式：

```
 $query = "SELECT * FROM cars where cars.carType = 'Chevy' AND \
    cars.active = 1";
    $numberOfFieds = mysqli_num_fields($result);
    $numberOfRows = mysqli_num_rows($result);

   /* Gets the contents */
   $row = mysqli_fetch_row($result);
   $rows = mysqli_fetch_assoc($result);
   $fieldcarssontable = array_keys($row);

  echo "<table>";

  while($row = mysqli_fetch_assoc($result)){
   echo "<th>" . $fieldcarssontable[imgPath] . "</th>";
   echo "<th>" . $fieldcarssontable[description] . "</th>";

  }

  echo "</tr>";

  echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:50:02.873

您在循环中拼错了 $numberOfFields，这意味着您在循环控制中使用了不同的变量。你的循环不起作用。

我建议打开错误报告，以便 PHP 可以为您捕获这些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:56:08.460

只需添加一个while循环。mysqli_fetch_assoc 返回一行并将内部指针移动到下一行，直到获取所有行，然后返回 false，while 循环将停止

伪语法理解 while

```
while ( this is true ) {
     execute this
} 
```

所以在你的情况下你可以说

```
while ( $row = mysqli_fetch_assoc( $result ) ) {
   // process/output $row
} 
```

mysqli_fetch_assoc 和 mysqli_fetch_row 字面上做同样的事情， assoc 为您提供带有结果字段名称的数组作为索引，因此访问起来更简单（使用 fetch_row 时 $row['name'] 而不是 $row[0] ）

玩得开心！:)

**编辑**

```
// connect to your database server
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');

// an error occured
if (!$link) {
    die('Connect Error (' . mysqli_connect_errno() . ') '
        . mysqli_connect_error());
}

// build your query
$query = "SELECT 
               *      # select actual fields instead of *
          FROM 
               cars
          WHERE
               cars.carType = 'Chevy'
          AND
               cars.active = 1";

// execute query
$result = mysqli_query($link, $query );

if ( !$result ) {
     die( 'no result' );
}

// number of fields
$numberOfFields = mysqli_num_fields($result);

// the field names
$fieldNames     = mysqli_fetch_fields($result);

// number of result rows
$numberOfRows = mysqli_num_rows($result);

// watch the content of fieldName and compare it with the table header in the output
print_r( $fieldName );

echo "<table>\n";

// table header, not neccessary to put this into a loop if the query isn't dynamic 
// so you actually know your field names - you can echo the header without any variable.
// for the sake of learning about loops I added this

foreach( $fieldNames as $index => $fieldName ) {
    echo "\t<th>field #" $index . ", name:" . $fieldName . "</th>\n";
}

// now it's time to walk through your result rows, since we only need to check for "true" a while loop does best

while ( $row = mysqli_fetch_assoc( $result ) ) {
    echo "\t<tr><td>" . $row['imgPath'] . "</td><td>" . $row['description'] . "</td></tr>\n";
}

echo "</table>\n";

// remove the result from memory
mysqli_free_result( $result );

mysqli_close( $link ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T00:06:11.267

**使用这个...只是while循环**

```
<?php
// Array
while($result = mysql_fetch_assoc($result)) {
        //show you fields
        echo $result["FieldName"];
    }
?> 
```

**或者正确使用这个**

```
<?php
// Edit it as per your query
$query = "SELECT * FROM cars"; 

if ($result = $mysqli->query($query)) {

    /* fetch associative array */
    while($row = $result->fetch_assoc()) {
        //show you fields
        echo $row["Name"];
    }

    /* free result set */
    $result->free();
}

/* close connection */
$mysqli->close();
?> 
```

# mysql - 如何在 MYSQL 中执行此查询

> ID：13654772
> 
> 赞同：0
> 
> 时间：2012-11-30T23:44:23.127
> 
> 标签：mysql

嗨，我有创建 SQL 的问题。我有这样的表格和数据：

```
id 月 年 id_type 数量
1 10 2012 1 5
2 10 2012 2 4
3 10 2012 3 3
4 10 2012 4 5
5 11 2012 1 1
6 11 2012 2 2
7 12 2012 1 3
8 12 2012 2 2

```

我想创建 SQL 来生成这样的数据

```
id_type 月 年 数量 month_b4 year_b4 qty_b4
  1 10 2012 5 9 2012 0
  2 10 2012 4 9 2012 0        
  3 10 2012 3 9 2012 0        
  4 10 2012 5 9 2012 0        
  1 11 2012 1 10 2012 5
  2 11 2012 2 10 2012 4
  1 12 2012 1 11 2012 1                
  2 12 2012 2 11 2012 2

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:51:08.527

此查询将执行此操作：

```
select 
  sales.id_type as id_type,
  sales.month as month,
  sales.year as year,
  sales.qty as qty,
  prev.month as month_b4,
  prev.year as year_b4,
  prev.qty as qty_b4
from 
  sales,
  sales as prev
where
  sales.id_type = prev.id_type and
  ((sales.month=1 and prev.month=12 and prev.year=sales.year-1) or 
     prev.month = sales.month - 1); 
```

我也把它放在一个小提琴上，您可以在其中进行试验： [http ://sqlfiddle.com/#!2/ed3af/14](http://sqlfiddle.com/#!2/ed3af/14)

# jquery - 像图片库一样打开灯箱

> ID：13654778
> 
> 赞同：0
> 
> 时间：2012-11-30T23:45:10.597
> 
> 标签：jquery

我正在尝试使用多个图像打开灯箱 onclick，例如我有一个显示产品条形码的 php 循环。所有条形码都有（下）多个图像。像某些条码有 3 个图像，一些 2 一些 5。当我单击条码灯箱弹出窗口打开时，我正在尝试，此条码下的所有图像都显示为一组。如果用户单击与该条形码相关的图像以外的其他条形码。我花了一个多小时，但我失败了，请帮助我。如果有灯箱的替代品，请告诉我。我如何得到这个'http://farm5.static.flickr.com/4044/4286199901_33844563eb.jpg'，）通过 php 链接我有条形码。我如何发送到 php 文件并获取图像链接并在此处显示示例链接的显示位置。

```
function opengallrey(val){
    $.fancybox([
            'http://farm5.static.flickr.com/4044/4286199901_33844563eb.jpg',
            'http://farm3.static.flickr.com/2687/4220681515_cc4f42d6b9.jpg',
            {
                'href'  : 'http://farm5.static.flickr.com/4005/4213562882_851e92f326.jpg',
                'title' : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit'
            }
        ], {
            'padding'           : 0,
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'type'              : 'image',
            'changeFade'        : 0
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:46:32.343

[http://fancybox.net/](http://fancybox.net/)

试试这个，它和灯箱一样工作

# java - Java servlet 返回 404 错误

> ID：13654779
> 
> 赞同：2
> 
> 时间：2012-11-30T23:45:21.967
> 
> 标签：java, exception, servlets

我有一个从昨晚开始工作的 java servlet。但是，现在每当我调用它时，它都会返回 HTTP 状态 404。它在关闭前的最后一晚工作。

自昨天上次工作以来，一切都没有改变。

servlet 映射在 web.xml 文件中。

奇怪的是，再也看不到任何 servlet - 都返回 404 错误。

我正在使用 Eclipse 并在本地主机上运行。

想法？

**编辑**

好的，现在它正在工作 - ！？不知道我做了什么，现在一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:53:43.767

由于某些原因，您的应用程序未完全部署。它的服务器错误...首先清除您的项目然后重新部署您的项目...仍然无法正常工作然后发布您的服务器名称和 web.xml

# python-3.x - pyuic4 导入错误

> ID：13654782
> 
> 赞同：0
> 
> 时间：2012-11-30T23:45:41.160
> 
> 标签：python-3.x

我在**Windows7 64 位**机器上使用**PyQt-Py3.3-x64-gbl-4.9.5-1**包。我只是想从 PyQt 开始，所以只是创建了一个简单的窗口，但是当我执行命令来创建代码时，我得到了这个错误。任何帮助将不胜感激。

 **```
c:\Python33\Lib\site-packages\PyQt4>pyuic4 -o FirstApp.py -x FirstApp.ui
Traceback (most recent call last):
File "C:\Python33\Lib\site-packages\PyQt4\uic\pyuic.py", line 31, in <module> from PyQt4 import QtCore
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:46:28.730

命令行的用法是（来自我的机器）：

```
C:\Python27\Lib\site-packages\PyQt4>pyuic4.bat inputfile.ui > output.py 
```

在上述步骤之后，将这些行添加到您的 output.py 文件中

```
if __name__=='__main__':
    import sys
    app=QtGui.QApplication(sys.argv)
    Form=QtGui.QWidget()
    ui=Ui_Form()
    ui.setupUi(Form)
    Form.show()
    sys.exit(app.exec_()) 
```**

# sencha-touch - 如何从其 xtype 创建视图并传递给导航视图的推送功能

> ID：13654783
> 
> 赞同：0
> 
> 时间：2012-11-30T23:46:01.640
> 
> 标签：sencha-touch, sencha-touch-2

我已经在 Sencha Touch 中看到了新 NavigationView 组件的示例。我将如何根据使用其 xtype 切换到另一个视图。API 文档似乎省略了显示最常见用法的有用示例（即使用 xtype 创建新视图）。还是我错过了什么？

在他们的例子中：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View)

他们正在使用参考“视图”来推送新视图。但我的问题是：

1) 如果最初导航到的视图是 xtype 加载的结果，如下所示：

```
Ext.Viewport.add({xtype:'testnavview'}); 
```

那么如果使用来自原始控制器的 xtype 隐式加载它，我如何获得对它的引用以将视图推送到它上？

2）然后我怎样才能使用 xtype 将视图推送到导航视图（见下文？）...

即我可以做这样的事情：

```
Ext.define('MyApp.view.TestNav', {
    extend: 'Ext.NavigationView',
    alias: 'widget.testnavview',
    config: {
        items: [
            {
                xtype: 'toolbar',
                docked: 'top',
                title: 'View 1',
                items: [
                {
                    xtype: "button",
                    text: "View1",
                    handler: function () {
                        console.log("handler view1");

                        this.push({ xtype: "View1" });

                    }
                },
                {
                    xtype: "button",
                    text: "View2"
                },
                 {
                     xtype: "button",
                     text: "View3"
                 },
                 {
                     xtype: "button",
                     text: "View4"
                 }

                ]
            }
        ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:39:55.393

您可以通过在控制器中添加对导航视图的引用来检索导航视图：

```
refs: {
  navigationView: 'navigationview'
} 
```

然后你可以像这样在你的控制器中的任何地方得到它：

```
this.getNavigationView().push({xtype: 'myPushedView'}); 
```

# android - NotificationManager 无法显示带有“通知：id 已损坏：发送 1，返回 0”警告的通知

> ID：13654786
> 
> 赞同：9
> 
> 时间：2012-11-30T23:46:13.317
> 
> 标签：android

在过去的几天里，我的应用程序中的 NotificationManager 出现了问题，我似乎还没有接近解决它。

我有一个非常简单的服务，目前什么都不做。它只是应该显示通知：

```
public class UpdateService extends Service {
private static final String TAG = "UpdateService";
private static int NOTIFICATION_ID = 1;
private UpdateServiceBinder binder = new UpdateServiceBinder();

@Override
public void onCreate() {
        Log.i(TAG, "Service created");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i(TAG, "Service started");

    sendNotification(100);

    return Service.START_NOT_STICKY;
}

private void sendNotification(int updatedItems) {
    NotificationCompat.Builder builder = new NotificationCompat.Builder(getApplicationContext())
            .setSmallIcon(R.drawable.icon)
            .setContentTitle("Sync")
            .setContentText("Updated " + updatedItems);

    Intent resultIntent = new Intent(getBaseContext(), MainActivity.class);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(getApplicationContext());
    stackBuilder.addParentStack(MainActivity.class);
    stackBuilder.addNextIntent(resultIntent);

    PendingIntent resultPendindIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

    builder.setContentIntent(resultPendindIntent);

    NotificationManager manager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);
    manager.notify(NOTIFICATION_ID, builder.build());
}

@Override
public IBinder onBind(Intent intent) {
    return binder;
}

@Override
public boolean onUnbind(Intent intent) {
    return true;
}

public class UpdateServiceBinder extends Binder {
    public UpdateService getService() {
        return UpdateService.this;
    }
} 
```

}

不幸的是，当服务启动并且应该显示通知时，什么也没有发生。该服务肯定是根据日志消息启动的。同时有来自NotificationManager的警告：

> 11-30 23:24:34.620: I/UpdateService(28356): 服务创建
> 
> 11-30 23:24:34.800：I/UpdateService(28356)：服务已启动
> 
> 11-30 23:24:34.808：W/NotificationManager(28356)：通知：id 损坏：发送 1，返回 0

我尝试使用与 1 不同的数字，但没有帮助。我不知道该怎么做。我使用的代码来自[这里](http://developer.android.com/reference/android/app/Service.html)的服务和通知[的](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)Android 文档。当我将代码隔离在单独的干净应用程序中时，该应用程序的设置方式与我正在处理的通知类似。以前有没有人遇到过这个问题或有任何想法？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T22:02:54.593

我遇到了这个问题，然后我记得我从“应用程序信息”中禁用了“显示通知”。我启用了它，通知又回来了。

1.  转到设置 > 应用程序（应用程序管理器）。
2.  点按您要停止的应用程序。
3.  点击以取消选中显示通知框。

仅供参考，它可能因一个 android 设备而异，但它们或多或少是相同的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-16T08:47:11.470

从 API 25 (Nougat) 开始，Android 设置了速率限制以阻止应用程序对通知栏进行 DDOS。可以在[此处查看](https://android.googlesource.com/platform/frameworks/base/+/a61f179c3d95e2b04b82dcc4ef824be1f6c4690a%5E!/)引入此更改的对 AOSP 的提交。

我在我身边看到了这些日志，因为我试图在循环中更新进度通知：

```
Observable.range(0, 100)
  .subscribe(progress -> updateProgressNotification(progress)); 
```

在每次发射之间添加 200 毫秒的延迟可以解决我的问题：

```
Observable.range(0, 100)
  .zipWith(Observable.interval(200, TimeUnit.MILLISECONDS), (progress, delay) -> progress)
  .subscribe(progress -> updateProgressNotification(progress)); 
```

您可以[在我的博客上阅读有关此问题的更多信息](http://saket.me/android-7-nougat-rate-limiting-notifications/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:07:55.033

我找到了解决这个问题的方法。我不得不将包名称从 com.gttn.sample 更改为 com.gttn.sample2。不太确定为什么我必须这样做，但通知显示正确并且警告消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T13:37:48.943

当您多次安装并重新安装应用程序时

取消选中“设置”>“应用程序管理器”>“您的应用”中的“显示通知”。

只需再次检查“显示通知”并感到高兴！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-14T13:09:50.947

我已经编写了下载歌曲并将下载进度更新为通知进度的代码。如果您在代码的第 6 行中看到，如果删除了该条件，则通知会非常快地更新，因为 while 循环现在从输入流中读取字节，这会导致通知的重复更新，这被认为是从 noughat 开始的问题保持通知更新速率限制的版本。希望您对此有所了解。

```
 int previousPercentage = 0;
 int currentPercentage = 0;
 while ((bytesRead = inputStream.read(bytes)) != -1) {
       totalbytes = totalbytes + bytesRead;
       currentPercentage = (totalbytes * 100) / length_of_file;
       if (previousPercentage != currentPercentage) {// line : 6
        updateProgressNotification(builder, notificationId, currentPercentage);
       }
       previousPercentage = currentPercentage;
       fileOutputStream.write(bytes, 0, bytesRead);
 } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-01T01:19:40.847

我不确定您为什么要使用 getBaseContext()，但我建议您改用 getApplicationContext()。另外，我不确定您为什么要绑定到服务。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-08T22:45:28.843

只是自己研究了这个问题。如果您的日志文件中没有其他行（应该在 5 行之后），可能会出现类似于“E/NotificationService(287): Suppressing notification from package by user request.”的消息。这是 ICS（可能是 JB）中的一项新设置，用于在每个应用程序的基础上禁用通知。转到设置 --> 应用程序 --> 并单击顶部附近的复选框“显示通知”。出于显而易见的原因，更改包名称将非常有效地绕过此设置。

# javascript - 在 Firefox 中使用 javascript/jQuery 事件处理程序

> ID：13654787
> 
> 赞同：1
> 
> 时间：2012-11-30T23:46:17.943
> 
> 标签：javascript, jquery, javascript-events

我有一个通过菜单导航功能提交表单的 jQuery 函数：

```
$(function () {
    $('#sidebarmenu1 a').on('click', function () {
        var url = $(this).attr('href');
        $('#myform').attr('action', url);
        $("#myform").submit();
        if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; }
    })
}); 
```

本节：

```
if (event.preventDefault) 
{ event.preventDefault(); } 
else 
{ event.returnValue = false; } 
```

防止侧边栏按钮的默认操作（我认为-对此仍然很陌生），即简单地导航到页面。

以这种方式编写是为了让 IE 满意，因为没有为 IE 定义 preventDefault（可能在那里使用了不正确的术语，但 IE 不喜欢 preventDefault。）

然而现在这在 Firefox 中引发了一个错误，因为（正如我在其他堆栈问题上所读到的）事件不是为 FF 全局定义的！我收到以下错误：

> ReferenceError：未定义事件

现在根据这个堆栈问题： [event is not defined in FireFox, but ok in Chrome and IE](https://stackoverflow.com/questions/2974601/event-is-not-defined-in-firefox-but-ok-in-chrome-and-ie)

> 在 IE 和 Chrome 中，事件解析为 window.event。Firefox 没有此属性，而是通过将事件作为参数传递给事件处理函数来提供事件。jQuery 通过在所有浏览器中提供事件对象参数为您抽象出这种差异。

但我以为我在这里使用的是 jQuery，但仍然遇到问题。

抱歉，如果我犯了基本错误，请自学 js 和 jQ。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:48:07.090

这应该做..

```
$(function() {
    $('#sidebarmenu1 a').on('click', function(e) {
        var evt = e || window.event;
        var url = $(this).attr('href');
        $('#myform').attr('action', url);
        $("#myform").submit();
        evt.preventDefault();
    })
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:49:16.560

如果您使用 jQuery 传递给事件处理程序的事件对象，您将不会遇到问题

```
$('#sidebarmenu1 a').on('click', function (event) {
    var url = $(this).attr('href');
    $('#myform').attr('action', url);
    $("#myform").submit();
    event.preventDefault();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T16:57:08.450

如果我有更多的观点，我会投票赞成第二个答案（传递 jQuery 'event' 参数）。

我在不知不觉中依赖于 Firefox 以外的浏览器定义的全局事件。我回顾了我的代码并确保我总是在所有点击事件上指定事件参数。

例如

```
 $('#situationTextInput')
                .val('')
                .fadeTo(1000, 1.0)
                .focus()
                .off('keydown')
                .on('keydown', function (event) {
                    VsUtils.handleSpanishTextKeydown(event);
                }); 
```

我也养成了在 .on 之前调用 .off 的习惯，因为我的大部分代码都使用单页，重用内容。如果没有 .off，我会在对话框的后续步骤中无意中堆积事件（即使它们是相同的回调）。

更改我的代码以将“事件”直接传递给处理程序的副作用是绑定到“this”。改变了。我选择重构代码来改变“这个”。对“event.currentTarget”的引用。

# c++ - 如何使用 avcodec 从 OpenCV::Mat 类型的 jpeg 图像创建视频？

> ID：13654789
> 
> 赞同：2
> 
> 时间：2012-11-30T23:46:27.587
> 
> 标签：c++, opencv, video, ffmpeg, libavcodec

我有彩色 jpeg`OpenCV::Mat`类型的图像，并使用`avcodec`. 我得到的视频是颠倒的，黑白的，每一帧的每一行都移动了，我得到了对角线。这种输出的原因可能是什么？按照[此](https://picasaweb.google.com/lh/photo/ZNQeoPw8YFBa-iFpzuYi4dMTjNZETYmyPJy0liipFm0?feat=directlink)链接观看我使用 avcodec 获得的视频。我正在使用`acpicture_fill`函数`avFrame`从`cv::Mat`框架创建！

PS 每个 cv::Mat cvFrame 的宽度 = 810，高度 = 610，步长 = 2432 我注意到 avFrame（由 acpicture_fill 填充）`linesize[0]=2430` 我尝试手动设置`avFrame->linesizep0]=2432`而不是 2430，但它仍然没有帮助。

**======== 代码 ========================================== =================**

```
AVCodec *encoder = avcodec_find_encoder(AV_CODEC_ID_H264);
AVStream *outStream = avformat_new_stream(outContainer, encoder);
avcodec_get_context_defaults3(outStream->codec, encoder);

outStream->codec->pix_fmt = AV_PIX_FMT_YUV420P;
outStream->codec->width = 810;
outStream->codec->height = 610;
//...

SwsContext *swsCtx = sws_getContext(outStream->codec->width, outStream->codec->height, PIX_FMT_RGB24,
                                    outStream->codec->width, outStream->codec->height,  outStream->codec->pix_fmt, SWS_BICUBIC, NULL, NULL, NULL);

for (uint i=0; i < frameNums; i++)
{
    // get frame at location I using OpenCV
    cv::Mat cvFrame;
    myReader.getFrame(cvFrame, i); 
    cv::Size frameSize = cvFrame.size();    
    //Each cv::Mat cvFrame has  width=810, height=610, step=2432

1\.  // create AVPicture from cv::Mat frame
2\.  avpicture_fill((AVPicture*)avFrame, cvFrame.data, PIX_FMT_RGB24, outStream->codec->width, outStream->codec->height);
3avFrame->width = frameSize.width;
4\.  avFrame->height = frameSize.height;

    // rescale to outStream format
    sws_scale(swsCtx, avFrame->data, avFrame->linesize, 0, outStream->codec->height, avFrameRescaledFrame->data, avFrameRescaledFrame ->linesize);
encoderRescaledFrame->pts=i;
avFrameRescaledFrame->width = frameSize.width;
    avFrameRescaledFrame->height = frameSize.height;

av_init_packet(&avEncodedPacket);
    avEncodedPacket.data = NULL;
    avEncodedPacket.size = 0;

    // encode rescaled frame
    if(avcodec_encode_video2(outStream->codec, &avEncodedPacket, avFrameRescaledFrame, &got_frame) < 0) exit(1);
    if(got_frame)
    {
        if (avEncodedPacket.pts != AV_NOPTS_VALUE)
            avEncodedPacket.pts =  av_rescale_q(avEncodedPacket.pts, outStream->codec->time_base, outStream->time_base);
        if (avEncodedPacket.dts != AV_NOPTS_VALUE)
            avEncodedPacket.dts = av_rescale_q(avEncodedPacket.dts, outStream->codec->time_base, outStream->time_base);

        // outContainer is "mp4"
        av_write_frame(outContainer, & avEncodedPacket);

        av_free_packet(&encodedPacket);
    }
} 
```

**更新**

正如@Alex 建议的那样，我用下面的代码更改了第 1-4 行

```
int width = frameSize.width, height = frameSize.height; 
avpicture_alloc((AVPicture*)avFrame, AV_PIX_FMT_RGB24, outStream->codec->width, outStream->codec->height);
for (int h = 0; h < height; h++)
{
     memcpy(&(avFrame->data[0][h*avFrame->linesize[0]]), &(cvFrame.data[h*cvFrame.step]), width*3);
} 
```

我现在得到的视频（[这里](https://picasaweb.google.com/103161760482140400348/2December201202#5817342583034854274)）几乎是完美的。它不是颠倒的，不是黑白的，但似乎缺少一个 RGB 组件。每个棕色/红色都变成蓝色（在原始图像中应该是相反的）。可能是什么问题呢？rescaling( `sws_scale`) to `AV_PIX_FMT_YUV420P`format 会导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:57:14.943

简而言之，问题是：`avpicture_fill()`期望行之间没有填充，即步幅（步长）等于`width*sizeof(pixel)`，即 810*3 = 2430。如您所说，cv::Mat 步长中数据的实际步幅是 2432，这是不同的，所以直接传递数据是行不通的。没有办法告诉`avpicture_fill()`输入数据使用不同的步幅；它不是 API 的一部分（你可能会说它应该是 :)

有两种可能的解决方案：

创建一个数组，其中输入数据是连续的，行之间没有填充。您必须将 cv::Mat 中的每一行内存复制到该数组中。然后将其传递给`avpicture_fill()`.

```
int width, height; // get from mat
uint8_t* buf = malloc(width * height * 3); // 3 bytes per pixel
for (int i = 0; i < height; i++)
{
    memcpy( &( buf[ i*width*3 ] ), &( mat->data[ i*mat->step ] ), width*3 );
}
avpicture_fill(..., buf, ...) 
```

顺便说一句，要垂直翻转视频，您可以这样做将最后一行复制到第一行，依此类推：

```
...
    memcpy( &( buf[ i*width*3 ] ), &( mat->data[ (height - i - 1)*mat->step ] ), width*3 );
... 
```

或者，自己填写 AVPicture：

```
AVPicture* pic = malloc(sizeof(AVPicture));
avpicture_alloc(pic, PIX_FMT_BGR24, width, height);
for (int i = 0; i < height; i++)
{
    memcpy( &( pic->data[0][ i*pic->linesize[0] ] ),  &( mat->data[ i*mat->step ] ), width*3);
} 
```

无需分配 pic->data[0] 或设置 pic->linesize[0]，avpicture_alloc() 应该这样做。也不需要填写data[1]或data[2]，应该为null。

**编辑：**删除了显示将 R、G、B 复制到单独平面的旧代码。PIX_FMT_BGR24 不是平面格式。

我对 OpenCV C++ API 不够熟悉，无法弄清楚如何获取宽度和高度（显然它不是 mat->width），但我想你知道我的意思。

PS顺便说一句，您的视频*实际上*并不是黑白的。只是每个连续的行偏移两个字节，因此颜色会旋转：红色变为绿色，绿色变为蓝色，等等。结果是灰度的，但如果你仔细观察，各个行都是彩色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:51:19.443

您是否考虑过使用[OpenCV 的功能](https://stackoverflow.com/a/5782246/176769)为您创建视频？由于您的数据已经存储在`cv::Mat`.

如果你想保持你的方法，你可以简单地[旋转`cv::Mat`](https://stackoverflow.com/a/7825243/176769).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T04:00:41.667

关于原帖UPDATE中的颜色问题。是不是因为，

OpenCV Mat 是 (BGR) -> FFmpeg AVFrame 是 (RGB) ？

如果是这样，请尝试，

```
cvtColor( cvFrame , cvFrame , CV_BGR2RGB ) ; 
```

在第 1 行之前。

# iphone - 愤怒除了第一个屏幕外，没有在任何屏幕上工作。

> ID：13654792
> 
> 赞同：0
> 
> 时间：2012-11-30T23:46:39.573
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我似乎对 irate 有这个问题，它只适用于第一个屏幕，而不适用于其他屏幕。关于我可能做错了什么的任何提示？

```
 [iRate sharedInstance].applicationBundleID = @"MOOO";
[iRate sharedInstance].onlyPromptIfLatestVersion = NO;

[iRate sharedInstance].previewMode =YES; 
```

它给了我这条消息“iRate 没有提示评分，因为该应用程序在不到 10 天前首次使用”但是一旦我为第一个屏幕实现该代码，它就会显示 irate。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:56:40.350

似乎iRate的正常使用会在用户每次打开应用程序时检查他们是否距离他们第一次获得应用程序至少10天，如果还没有至少10天，它不会要求他们评分。你有 previewMode = YES; 我假设它用于开发人员以确保正确实施 iRate 并在应用程序启动时显示，而不是等待 10 天。iRate 在应用程序启动时进行这些检查，因此如果它要弹出，它将在显示第一个屏幕时弹出。

# gwt - 如何处理自定义 gwt 小部件的点击事件

> ID：13654794
> 
> 赞同：1
> 
> 时间：2012-11-30T23:46:45.963
> 
> 标签：gwt, event-handling, uibinder, custom-widgets

我有一个我自己的小部件，它模拟一个多选列表框。它将有一个复选框列表。

```
 public class MultiListBox extends Composite implements IsWidget
  {
    private static MultiListBoxUiBinder uiBinder = GWT
        .create(MultiListBoxUiBinder.class);

    interface MultiListBoxUiBinder extends
        UiBinder<Widget, MultiListBox> {
    }

    public MultiListBox() {
       initWidget(uiBinder.createAndBindUi(this));
    }
    @UiField ScrollPanel scrollPanel;
    @UiField FlowPanel flowPanel;

    private final List<CheckBox> checkboxes = new ArrayList<CheckBox>();
    private final List<String> selectedValues = new  ArrayList<String>();

@Override
public void addItem(final String value, final String text){

    final CheckBox checkbox = new CheckBox(text);
    checkbox.setFormValue(value);

    checkbox.addClickHandler(new ClickHandler()
    {
        public void onClick(final ClickEvent event)
        {
            final CheckBox chkbox = (CheckBox)event.getSource();
            if(chkbox.getValue())
            {
                selectedValues.add(value);
            }
            else
            {
                selectedValues.remove(value);
            }
        }
    });

    flowPanel.add(checkbox);
    checkboxes.add(checkbox);
}

@Override
public List<String> getSelectedValues(){
    return selectedValues;
}

@Override
public void clear() {
    checkboxes.clear();
    selectedValues.clear();
    flowPanel.clear();
}

@Override
public int getItemCount() {
    return checkboxes.size();
}

  } 
```

我在我的观点中消费这个，比如

```
 <my:MultiListBox ui:field="myList"></my:MultiListBox> 
```

现在，我想在我的视图中为这个“myList”字段创建一个 onClick 处理程序，例如

```
 @UiHandler("myList")
    void onMyListCliced(ClickEvent e) {
         //TODO: handle it
    } 
```

任何人都可以指导如何实现它。

问候，斯里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:51:32.657

你`MultiListBox`必须实现接口`HasClickHandlers`（在点击事件的情况下）。如果您想通过 的形式允许使用其他事件，那么您必须在自定义小部件上实现这些`UiHandler`接口。`Has*Handlers`

# xcode - 如何从自动更新中禁用 Interface Builder 文档版本控制？

> ID：13654796
> 
> 赞同：38
> 
> 时间：2012-11-30T23:47:10.860
> 
> 标签：xcode, interface-builder, xib, nib, document-versioning

**这个问题仍然得到很多支持。所以看看Update3。** **[*一旦您投票，评论，回答，请提交雷达*](https://bugreport.apple.com)**

查看 nib / xib，修改文件，迫使我提交更改或撤消更改。这不是问题，直到出现合并冲突。

详细信息：我在一个由 5 名 iOS 开发人员组成的团队中工作，在 XCode 的最后几个版本中，我们遇到了一个问题，即当任何人打开文件（不做任何更改）时 .xib / nib 文件被触摸/修改。

如果一位开发人员认为“搞砸了，让我检查 xcode 所做的任何修改”并检查它，它不会就此停止。当另一个开发人员查看该 nib 时，将再次触摸/修改两台不同机器（具有相同版本的 XCode 和 MacOS）上的相同文件。

通常在 .xib 文件中被修改的是这个

```
 <key>com.apple.ibtool.document.version-history</key>
<dict>
    <key>interface-builder-version</key>
    <dict>
        <key>com.apple.InterfaceBuilderKit</key>
        <string>2844</string>
        <key>macosx.version</key>
        <string>12C60</string>
    </dict>
</dict>
<key>com.apple.ibtool.document.warnings</key>
<dict/> 
```

但除此之外，它还会修改或移动 .xib 文件中现有的键值对。

我在 SO 和 Google 上搜索了很多，我还没有看到很多关于这个问题的帖子。

当我升级所有笔尖以处理 iPhone5 屏幕时，我做了一个合并冲突的噩梦，这本身并不太复杂，但由于文档版本控制而产生了大量的合并冲突。

删除我不理解的代码，导致当我尝试打开 nib 时 xcode 崩溃。（我现在已经修复了这个问题，恢复到之前的状态）

任何有关如何避免此问题的建议，不胜感激！

更新：注意到这还没有解决，并且仍然经常得到支持。我只是好奇，是否有任何故事板项目遇到同样的问题？（我还没有在故事板上工作过）。

更新 2：对于所有遇到相同问题的人，即使您收到回复说存在现有雷达，也请提交雷达。它有助于将问题浮出水面，XCode 之神只会在那时解决它。

更新 3：我仍然在这个线程上看到不少赞成票，而且苹果错误报告仍然开放。所以，在赞成这个问题之后，**[*请提交一个雷达*](https://bugreport.apple.com)**，其中包含我在问题中提到的详细信息（和/或添加您自己的解释）

Update4：这个问题仍然得到很多人的支持。所以看看Update3。**[*一旦您投票，评论，回答，请提交雷达*](https://bugreport.apple.com)**

更新 5：根据 Apple Engineers 在 WWDC 2014 上的信息，此问题已在 Xcode6 中修复。一旦我确认此问题已得到修复，我将更新此问题（并可能关闭它）。

更新6：希望看到这个修复。将在 WWDC2015 上问这个问题（通过我认识的人去那里）。如果其他获得 WWDC 门票的幸运儿也能在 WWDC 2015 上做同样的事情，那就太好了

Update7：Xcode 7 在这里，这个 bug 也在这里 :( 原始雷达报告 (11533872) 仍然开放

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T10:56:13.633

Xcode 4.6.3 版解决了这个问题。但是，正如评论所述，你们都需要运行相同的版本。如果四个开发人员在 4.6.3 上，一个在以前的版本上，那么那个开发人员将遇到同样的问题。但是，如果他们不提交该更改，那么它不会影响其他人。

受影响的两个 Xib 键是：

```
<string key="IBDocument.AppKitVersion">1187.39</string>
<string key="IBDocument.SystemVersion">12E55</string> 
```

所以，最重要的是，让团队中的每个人都更新到 Xcode 4.6.3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:57:07.990

尝试更新 XIB 的“文档版本控制：开发”设置：

```
Xcode: File Inspector: Interface Builder Document: Document Versioning: Development 
```

至少到“Interface Builder 3.1”。

# c - IA32 到 Y86 汇编代码转换

> ID：13654809
> 
> 赞同：1
> 
> 时间：2012-11-30T23:48:35.247
> 
> 标签：c, assembly, instructions, y86

我的任务是将 IA32 代码转换为 Y86。原始程序是用 C 编写的，旨在获取一个整数数组，其中偶数定位值调用三个函数之一，奇数定位值在该函数内进行操作。这些函数包括数字的否定、数字的平方以及从 1 到提供的数字的总和。

大多数指令都可以轻松地从 IA32 转换为 Y86，但是有许多指令让我非常难受。

```
0000001e <negation>:
  1e:   55                      push   %ebp
  1f:   89 e5                   mov    %esp,%ebp
  21:   8b 45 08                mov    0x8(%ebp),%eax
  24:   f7 d8                   neg    %eax
  26:   5d                      pop    %ebp
  27:   c3                      ret 
```

neg 指令不是 Y86 中的有效指令。这就是我在 Y86 中所拥有的：

```
# int Negation(int x)
Negation:
    pushl %ebp
    pushl %esi
    rrmovl %esp,%ebp
    mrmovl 0x8(%ebp),%eax
    irmovl %esi,$0
    subl %eax, %esi
    rrmovl %esi, %eax
    popl %esi
    popl %ebp
    ret 
```

这是解决这个问题的正确方法吗？

另一个指令是我的平方函数中的 imul 指令：

```
00000028 <square>:
  28:   55                      push   %ebp
  29:   89 e5                   mov    %esp,%ebp
  2b:   8b 45 08                mov    0x8(%ebp),%eax
  2e:   0f af c0                imul   %eax,%eax
  31:   5d                      pop    %ebp
  32:   c3                      ret 
```

有谁知道在这种情况下如何转换“imul”指令？

谢谢您的帮助！任何有关 IA32/Y86 转换的提示也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:52:19.740

对于实现`imul`，您可能希望查看使用 shift 并添加例程来实现`mul`例程：

*   [http://en.wikipedia.org/wiki/Multiplication_algorithm#Peasant_or_binary_multiplication](http://en.wikipedia.org/wiki/Multiplication_algorithm#Peasant_or_binary_multiplication)

然后`imul`只需使用以下步骤：

*   找出结果应该有什么符号
*   将操作数转换为绝对值（使用您的否定例程）
*   `mul`用正值调用你的例程
*   必要时将结果转换为负数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:46:29.197

1) is mrmovl 0x4(%esp),%eax allowed?

```
 ixorl %eax, 0xffffffff  
  iaddl %eax, 1 
```

should be slightly more efficient (also ebp can be used as GPR -- no need to push esi)

2) for multiplication there are indeed shift and add-options,
but also a LUT based approach, exploiting the fact that `4*a*b = (a+b)^2 - (a-b)^2`. for each 8x8 bit or NxN bit multiplication.

For `a=h<<8+l, B=H<<8|L, aB = Ll + (hL+Hl)<<8 + hH<<16;`
could be handled using 3 different tables:
`s1[n] = n^2 >>2; s2[n]=n^2 << 6; s3[n]=n^2 << 14;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T02:22:13.100

对于否定，您反转了 irmovl 指令的操作数。

以下代码有效：

```
 #
 # Negate a number in %ebx by subtracting it from 0
 #
 Start: 
  irmovl $999, %eax    // Some random value to prove non-destructiveness
  irmovl Stack, %esp   // Set the stack
  pushl %eax           // Preserve 

 Go:
  irmovl $300, %ebx
  xorl %eax, %eax
  subl %ebx,%eax
  rrmovl %eax, %ebx

 Finish:
  popl %eax             // Restore 
  halt

 .pos 0x0100
 Stack: 
```

# cocos2d-iphone - EXC BAD ACCESS 使用适用于空白场景的 Cocos2d pushscene

> ID：13654811
> 
> 赞同：0
> 
> 时间：2012-11-30T23:48:41.077
> 
> 标签：cocos2d-iphone, exc-bad-access

所以我想用 pushscene/popscene 做一个升级屏幕。当它是一个空白场景时，pushscene 有效，但当它是我想要的场景时则无效。我的场景/图层完全加载，所有图像和文本都显示了它们完全正确的内容。在所有图像加载后，有一个 EXC BAD ACCESS 似乎没有链接到正在发送的任何特定消息。任何帮助或进一步的诊断测试将不胜感激。

我有一个版本，我注释掉了精灵和标签，但它仍然崩溃。我有什么大不了的吗？

**编辑：**我添加了`[self = [super init]]`and`[super onEnter]`方法，但仍然存在同样的问题。这是另一回事。有任何想法吗？

**编辑编辑：**我认为这与我正在使用的 optionsArray 有关，不确定需要保留哪些对象。该数组是一个 CCArray 并包含不同容量的 NSDictionaries

```
#import "LevelupLayer.h"
#import "GameManager.h"
@implementation LevelupLayer
@synthesize optionsArray,spritesArray;
@synthesize confirmLabel;
@synthesize counter;

 +(id) scene {
    CCScene *scene = [CCScene node];
    CCLayer* layer = [LevelupLayer node];
    [scene addChild:layer];

    return scene;
}

-(void)onEnter
{

counter = 1; // for debugging
//Detemine what levelups are possible
GameManager* gm = [GameManager sharedManager]; //GameManager is a helper that oversees communication between layers and plists
optionsArray = [gm possibleLevelups]; //Access plist and formats data into expected format
[optionsArray retain];
int numPossibilities = [optionsArray count];

//Build Levelup layer based on possible options
CGSize size = [[CCDirector sharedDirector] winSize];
//float positionIncrement = (size.width / numPossibilities) - ((size.width/numPossibilities) * 0.5);
float positionIncrement = (size.width / numPossibilities);
float stripWidth = size.width / numPossibilities;

for (int i = 0; i < numPossibilities; i++) {
    int slot = i+1;
    NSDictionary* optionDict = [optionsArray objectAtIndex:i];
    NSString* name = [optionDict objectForKey:@"name"];
    NSString* title = [optionDict objectForKey:@"title"];
    NSString* description = [optionDict objectForKey:@"description"];

    // Add the sprite
    CCSprite* optionSpite = [CCSprite spriteWithSpriteFrameName:[NSString stringWithFormat:@"%@.png",name]];
    [self addChild:optionSpite];
    [spritesArray addObject: optionSpite];
    optionSpite.position = CGPointMake(slot * positionIncrement, size.height*0.60);
    [optionSpite setAnchorPoint:CGPointMake(0.5f, 0.5f)];

    // Add the description
    CCLabelBMFont *optionDescription = [CCLabelBMFont labelWithString:description fntFile:@"bodyFont.fnt" width:stripWidth alignment:kCCTextAlignmentCenter];
    [self addChild:optionDescription];
    optionDescription.position = CGPointMake(slot * positionIncrement, size.height*0.30);
    [optionDescription setAnchorPoint:CGPointMake(0.5f, 0.5f)];

    // Add the title
    CCLabelBMFont *optionTitle = [CCLabelBMFont labelWithString:title fntFile:@"titleFont.fnt" width:stripWidth alignment:kCCTextAlignmentCenter];
    [self addChild:optionTitle];
    optionTitle.position = CGPointMake(slot * positionIncrement, size.height*0.90);
    [optionTitle setAnchorPoint:CGPointMake(0.5f, 0.5f)];

}
[self scheduleUpdate]; //Update only prints counter to see how many frames it lasts
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    return YES;
}

-(void) update:(ccTime)delta
{
    CCLOG(@"counter: %d",counter);
    counter++;
}

-(void) onExit
{
    [optionsArray release];
}

@end 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:06:45.247

我没有看到任何`[super onEnter];`类似`[super init]`的东西......那是你的问题

首先`[super onEnter]`在`onEnter`.

其次添加一个像这样的init方法：

```
-(id)init{
if (self=[super init]){}
} 
```

在方法`[super onExit]`末尾添加第三个`onExit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:15:37.783

我想通了，这与我发布的代码无关，对此感到抱歉。这只是对非保留数组的愚蠢发布调用。之前保留了阵列，它工作正常。抱歉哭狼

# spring - 哪些数据作为 http 响应的一部分发送

> ID：13654812
> 
> 赞同：0
> 
> 时间：2012-11-30T23:48:40.883
> 
> 标签：spring, http, rest, endpoints

在 http 请求响应中实际发送了什么？

在下面的简单弹簧控制器中，一个字符串被发送到客户端。但是这个字符串被包裹在浏览器理解的一些 html 元素中？这个响应是否总是相同但不同的框架只是提供不同的方便方法/注释以使过程更简单？

```
 @RequestMapping(value="myrequest", method = RequestMethod.GET)
  public String redirect(@RequestParam String param) {      

      return "test";

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:21:05.393

在[Spring MVC Framework](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html)中，HTTP 请求的生命周期是这样的：

1.  用户发出资源请求，Spring`DispatcherServlet`将该请求委托给特定的控制器方法（如`redirect`）。这是通过处理程序映射实现的，该处理程序映射可以使用 - 例如 - 控制器中的注释（如`@RequestMapping`）来选择合适的。

2.  通常，**Controller**方法返回 ModelAndViews 的实例，这些实例负责生成一些标记（HTML、JSON、XLS aka 视图）并在该视图（模型）中显示一些信息。控制器也有可能返回视图逻辑名称（如`test`），这些逻辑名称应该稍后由视图解析器在 ModelAndView 实例中解析。

3.  **视图解析器**根据控制器返回的逻辑名称选择合适的视图，然后视图生成发送到浏览器的标记。例如，JstlView 生成 HTML 标记，AbstractExcelView 生成 XLS 文件。

因此，要回答您的问题，您必须找到在应用程序上下文中配置的 View Resolver 并找到生成的标记。

# java - 使用 Java Swing 实现 5x5 到 50x50 棋盘游戏

> ID：13654813
> 
> 赞同：-1
> 
> 时间：2012-11-30T23:48:45.410
> 
> 标签：java, swing, user-interface, gomoku

使用 Java 和 Swing 实现可配置维度矩阵以表示带有单元格的 2d 棋盘游戏的最佳方法是什么？

网格布局？桌子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:53:02.237

板的模型应该与它的视图分开，这样如果您发现其中一个或另一个不能正常工作，您可以稍后改变主意。

# python - 当我调用 URL 函数时，我的模板找不到视图模块

> ID：13654827
> 
> 赞同：0
> 
> 时间：2012-11-30T23:49:44.083
> 
> 标签：python, django

Django noob 在这里试图让登录工作。我正在尝试加载我的 login.html 页面，但由于某种原因，我收到以下错误：

> /login/ 处的 ImportError 没有名为视图的模块

并将此代码显示为触发错误，错误位于 url 函数的第 5 行：

```
1   {% if form.errors %}
2   <p>Your username and password didn't match. Please try again.</p>
3   {% endif %}
4   
5   <form method="post" action="{% url 'django.contrib.auth.views.login' %}">
6   {% csrf_token %}
7   <table>
8   <tr>
9       <td>{{ form.username.label_tag }}</td>
10      <td>{{ form.username }}</td>
11  </tr>
12  <tr>
13      <td>{{ form.password.label_tag }}</td>
14      <td>{{ form.password }}</td>
15  </tr> 
```

知道发生了什么吗？我必须在某处导入视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:18:33.343

FIXED IT! Turns out I had screwed up my urls.py file and had a nonexistent view linked to in another url. I got rid of that and it worked

# c++ - 编译应用程序时出现c ++错误

> ID：13654829
> 
> 赞同：0
> 
> 时间：2012-11-30T23:49:56.933
> 
> 标签：c++, mysql, boost

我在用

我的应用程序中的 boost 和 mysql 连接器

当我尝试编译应用程序时

我得到这个错误

```
Error   4   error C2371: 'int8_t' : redefinition; different basic types 
```

在 config.h

```
#ifdef HAVE_STDINT_H
#include <stdint.h>
#endif

#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif

#if defined(_WIN32)
#ifndef CPPCONN_DONT_TYPEDEF_MS_TYPES_TO_C99_TYPES

#if !defined(HAVE_INT8_T) && defined(HAVE_MS_INT8)
typedef __int8          int8_t;
#endif 
```

我尝试了在谷歌上搜索时找到的所有解决方案，但没有成功

希望我在这里找到解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:22:04.720

旧版本`MSVC`没有`<stdint.h>`这样的解决方法，一些程序员以这种方式做事，但最简单的解决方法可以添加`HAVE_STDINT_H`到项目的定义中，或者只是在包含标题之前定义它

# c++ - 如何在C++中复制一个变量

> ID：13654833
> 
> 赞同：0
> 
> 时间：2012-11-30T23:50:17.320
> 
> 标签：c++, variables

```
#include <iostream>
#include <math.h>
using namespace std;

class polynomial{
    int degree;
    float *coefs;
public:
    polynomial(int d);
    float operator()(float x);
    void operator==(polynomial P);
    polynomial operator^(int k);
    float operator[](float x);
    float *getcoefs();
};

polynomial::polynomial(int d){
    int i;
    degree=d;
    if(d>=0){
        coefs=(float *)malloc((d+1)*sizeof(float));
        cout<<"Create a polynomial of degree "<<d<<"\n";
        for (i=d;i>0;i--){
            cout<<"The coefficient of x^"<<i<<" is : ";
            cin>>coefs[i];
            cout<<"\n";
        }
        cout<<"The constant is : ";
        cin>>coefs[0];
        cout<<"\n";
        cout<<"The polynomial is created\n";
    }
} 
```

这是 () 运算符的重载，因此 P(x) 返回多项式的值：

```
float polynomial::operator()(float x){
    float sum=0;
    int i,kstart;
    for(i=0;i<=degree;i++){
        if(coefs[i]!=0){
            kstart=i;
            break;            
        }                       
    }
    for(i=kstart;i<=degree;i++){
        sum+=coefs[i]*pow(x,i-kstart);                       
    }
    return sum;
} 
```

这是 == 的重载，将一个多项式的系数复制到另一个多项式：

```
void polynomial::operator==(polynomial P){
     coefs=P.coefs;
} 
```

这是 ^ 的重载，因此 P^k 返回 P 的第 k 个导数：

```
polynomial polynomial::operator^(int k){
    int i,j;
    polynomial G(-1);
    G.degree=this->degree;
    G==(*this);
    if(k>G.degree){
        for(i=0;i<=G.degree;i++){
            G.coefs[i]=0;
        }
    }
    else{
        for(i=0;i<k;i++){
            G.coefs[i]=0;
            for(j=i+1;j<=G.degree;j++){
                G.coefs[j]*=(j-i);                    
            }          
        }
    }
    return G;
}

float polynomial::operator[](float x){
    return (x-(*this)(x)/(((*this)^1)(x)));      
}

float *polynomial::getcoefs(){
      return coefs;
}

int main(){
    int i,d,maxiter,found;
    float seed,x1,x2,e;
    float *coefs;
    cout<<"The polynomial's degree is : ";
    cin>>d;
    cout<<"\n";
    polynomial P(d),temp(-1);
    cout<<"-------Solve P(x)=0--------\n";
    cout<<"Maxiterations = ";
    cin>>maxiter;
    cout<<"\n";
    cout<<"Tolerance = ";
    cin>>e;
    cout<<"\n";
    cout<<"Seed = ";
    cin>>seed;
    cout<<"\n";
    found=0;
    x1=seed;
    for(i=0;i<maxiter;i++){
        memcpy((void *)(&temp),(void *)(&P),sizeof(polynomial));
        x2=P[x1];
        if(fabs(x2-x1)<=e){
            found=1;
            break;                         
        }
        coefs=temp.getcoefs();
        cout<<coefs[0]<<"\n";
        cout<<coefs[1]<<"\n";
        cout<<coefs[2]<<"\n";
        x1=x2;
    }
    if(found==1){
        cout<<"A possible solution is x = "<<x2<<"\n";
    }
    else{
        cout<<"No solution found!\n"; 
    }
    system("PAUSE");
    return EXIT_SUCCESS;   
} 
```

在这些测试行中可以看到问题：

```
cout<<coefs[0]<<"\n";
cout<<coefs[1]<<"\n";
cout<<coefs[2]<<"\n"; 
```

系数应该保持不变，但现在它们改变了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:12:20.533

我通过以下方式解决了我的问题......我更改了我的构造函数并使其在类定义中看起来像这样：

```
polynomial(int d,int test=0); 
```

这是它的代码：

```
polynomial::polynomial(int d,int test){
    int i;
    degree=d;
    if(test==0){
        coefs=(float *)malloc((d+1)*sizeof(float));
        cout<<"Create a polynomial of degree "<<d<<"\n";
        for (i=d;i>0;i--){
            cout<<"The coefficient of x^"<<i<<" is : ";
            cin>>coefs[i];
            cout<<"\n";
        }
        cout<<"The constant is : ";
        cin>>coefs[0];
        cout<<"\n";
        cout<<"The polynomial is created\n";
    }
    else{
        coefs=(float *)malloc((d+1)*sizeof(float));
        for (i=d;i>=0;i--){
            coefs[i]=0;
        }
    }
} 
```

然后导致问题的功能变成了这样：

```
void polynomial::operator==(polynomial P){
     int i;
     for(i=0;i<=degree;i++){
         coefs[i]=P.coefs[i];
     }
} 
```

并相应地调整了我的代码的一小部分，我能够在不破坏多项式的情况下调用 P[x]。如果您有任何问题，请询问

# php - 基于 HTTP_REFERER 重定向用户

> ID：13654834
> 
> 赞同：1
> 
> 时间：2012-11-30T23:50:26.680
> 
> 标签：php, http-referer

我正在尝试重定向我网站上来自特定推荐网站的用户以获得特殊消息。我有这个：

```
<?php $REFERER = $_SERVER['HTTP_REFERER'];

  if ($REFERER == "http://www.url.com/") { 
?>

Content Goes Here

?>    
    }
?> 
```

他们没有得到消息

我做了一个测试，并从我的其他站点之一进行了测试，并回应了 `$_SERVER['HTTP_REFERER'];`输出的内容并更改了上面的代码以完全匹配它并且它有效，但我认为我遇到的问题是输出`$_SERVER['HTTP_REFERER'];`不完全相同。例如，如果他们在页面上`www.domain.com/page2/index.php`，推荐人将是`http://www.domain.com/page2/`

有没有办法让来自 www.domain.com 的人不管 / 之后是什么？！？

更新：

我尝试了所有前 2 个答案，但无法让它工作（可能是我的错），所以我从他们发送的内容中进行了一些研究并创建了这个：

```
<?php 
    $mystring = $_SERVER['HTTP_REFERER']; 
    $findme   = 'domain'; 
    $pos = strpos($mystring, $findme);

if ($pos === false) {
    } else {
    echo "content";
 ?> 
```

这个选项有什么问题吗，因为它似乎有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:54:30.543

您可以检查字符串是否以`http://www.url.com/`

```
if (strpos($REFERER, "http://www.url.com/") === 0) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:53:12.083

一个真正简单的方法是：

```
if (strpos($REFERER, "www.url.com") !== false) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:56:26.503

您可以使用php的`parse_url`功能：

```
<?php $REFERER =  parse_url($_SERVER['HTTP_REFERER'], PHP_URL_PATH);

    if ($REFERER['host'] == "www.url.com") { 
?> 
```

# ruby-on-rails - 在每个循环中创建动态 form_tag

> ID：13654835
> 
> 赞同：3
> 
> 时间：2012-11-30T23:50:32.587
> 
> 标签：ruby-on-rails, ruby, forms, loops, model

我有一个名为 assignment 的模型，它 has_many :questions 模型，而该模型又属于_toassigntment。问题有一个称为内容的字符串字段。在我的作业的 show.html.erb 中，我有一个循环遍历每个问题并显示它。

```
<b>questions:</b>
  <% @i=1 %>
  <% @assignment.questions.each do |q| %>
      <p>question <%= @i %><p/> 
      <%= q.content %>
       <%=#need to generate text_area forms here %>
      <% @i= @i+1%>
      <br/>
  <% end%> 
```

用户（具有_many: answersheets 模型的学生模型，而后者又属于_to :student）需要填写答案，然后点击提交。提交需要创建一个新的答案表对象（其中包含 student_id assignment_id 和 answer_responses 列作为字符串）。我需要以字符串的形式获取所有答案，将它们连接起来（中间有一个分隔符，例如“;”），并且需要将新创建的答案表模型的 answer_responses 设置为该字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:31:55.547

好的，这个问题有点开放式，但是这里......

首先，您可能只需要一种形式来实现这一目标。它可以包含许多字段，但最好将您想要的所有内容放在一个表单中（否则您将需要使用一些 javascript 恶作剧来将数据放在一起）。

所以现在我们的视图开始看起来像这样：

```
<b>questions:</b>
<%= form_tag do %>
  <% @i=1 %>
    <% @assignment.questions.each do |q| %>
        <p>question <%= @i %><p/> 
        <%= q.content %>
         <%=#need to generate text_area fields here %>
        <% @i= @i+1%>
        <br/>
    <% end %>
  <% end %> 
```

但是等等 -`@i`范围过大，它可能是简单`i`的，并且所有这些递增`@i`看起来都不是很红润......我们可以将它切换为使用[each_with_index](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)方法来清理它......

```
<%= form_for :answersheet do |f| %>
  <b>questions:</b>
  <% @assignment.questions.each_with_index do |question, index| %>
    <p>question <%= index %><p/> 
    <%= question.content %>
    <%=#need to generate text_area fields here %>
    <br/>
  <% end %>
<% end %> 
```

嗯，这有点好，但现在很明显，该循环内部的问题可以很容易地抽象成它自己的部分（可能`_question.html.erb`）：

```
<p>question <%= question_counter %><p/> 
<%= question.content %>
<%=#need to generate text_area fields here %>
<br/> 
```

留给我们：

```
<%= form_for :answersheet do |f| %>
  <b>questions:</b>
  <%= render @assignment.questions %>
<% end %> 
```

好的，很好，但是呢`<%=#need to generate text_area fields here %>`？在你的部分中这样的东西应该可以解决问题：

```
<p>question <%= question_counter %><p/> 
<%= question.content %>
<%= content_tag :textarea , '' , name: raw( "answers[#{ question_counter }]" ) %>
<br/> 
```

这将允许您在控制器中执行以下操作：

```
Answersheet.create( answer_responses: params[:answers].values.join(';') ) if params[:answers] 
```

目前，这将发布到与最初呈现页面相同的控制器/动作。您可能希望添加一个额外的路由来将其发送到它自己的控制器/动作 - 您可以将该路由作为参数提供给[form_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/form_tag)。此外，这没有考虑可能输入无效数据的可能性，在向用户显示错误消息时需要保留这些数据。它也不考虑重定向用户，或在成功提交时显示成功消息。如果您需要更多复杂性，您可以考虑切换到[form_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)并使用答案表的实际实例，以及更适当的宁静路线。在这个例子中，我故意没有使用 form_for，因为模型不能直接使用正在发送的数据。您可能会考虑在答案表上创建`answers`一个方法，该方法在`answer_responses`保存之前被输入，或者如果追求该路线（或者可能在提交时使用 javascript 进行，这感觉不是一个好主意）。就像我说的，有点开放。无论如何，这应该足以让你指出正确的方向——祝你好运！

# database - MS Access - 组合框不允许我选择一个项目

> ID：13654836
> 
> 赞同：0
> 
> 时间：2012-11-30T23:51:06.077
> 
> 标签：database, vba, ms-access-2007

Access 的新手，已经花了很多时间试图解决这个问题，所以这里是背景：

注意：已经看过这个：[ComboBox won't allow me to select an item](https://stackoverflow.com/questions/11456782/combobox-wont-allow-me-to-select-an-item)，但没有提供我需要的答案。

我有一个数据库，允许一个人通过表单输入和存储客户详细信息，目前我有 3 个具有以下关系的表：

**客户** - 客户 ID (PK) - 名字 - 姓氏

**流程** - ProcessID (PK) - 详细信息 - PartsUse -

**作业** - JobID (PK) - CustomerID (FK) - ProcessID (FK) - MachineDetail -

Customer 与 Job 有 1-M 关系，但通过扩展（不知道为什么） Process 也与 Job 有 1-M 关系。所以这里的目标是一个客户可以有很多工作，而一个工作应该只有一个进程（稍后需要修复它）。

现在这是我在 NewJob 表单中绑定 ComboBox 的代码 - 它的目标是在表单打开时使用客户的所有姓名填充 ComboBox，并且只允许用户在选择客户后输入工作详细信息：

```
Private Sub Form_Open(Cancel As Integer)

    Dim db As Database
    Dim recordSet As DAO.recordSet
    Dim sql As String

    sql = "SELECT [Customer].[CustomerID], [Customer].[FirstName] & [Customer].[LastName] FROM Customer ORDER BY [CustomerID];"

    'clear all fields
    ClearJobFormFields

    'disable all controls until a customer is selected
    DisableJobFormControls

    With cmbCustomer
        .ControlSource = "Customer"
        .RowSource = sql
        .ColumnCount = 2
        .ColumnWidths = "1cm; 3cm"
        .BoundColumn = 0
    End With

    cmbCustomer.ControlSource = "Customer"
    cmbCustomer.RowSource = sql

End Sub 
```

请注意，每个表单都是独立的 - 我没有使用子表单。这是在（NewJob）上的表单确实`AllowEdit`设置为yes，并且表单没有`RecordSource`绑定。

组合框确实填充正确，但每次我尝试选择一个项目时，我都会收到错误消息：“无法编辑控件，它绑定到未知字段客户”。

这就是它的全部。抱歉，如果这是一个常见/易于解决的问题，但它困扰了我好几天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:09:34.983

当您通过 VBA 设置 rowsource 属性时，您应该将其保留为未绑定控件并报废：

```
cmbCustomer.ControlSource = "Customer" 
```

您的打开表单子应该更像这样：

```
Private Sub Form_Open(Cancel As Integer)

Dim db As Database
Dim recordSet As DAO.recordSet
Dim sql As String

    sql = "SELECT [Customer].[CustomerID], [Customer].[FirstName] & [Customer].[LastName] FROM Customer ORDER BY [CustomerID];"

    'clear all fields
    ClearJobFormFields

    'disable all controls until a customer is selected
    DisableJobFormControls

    With cmbCustomer
        .RowSource = sql
        .ColumnCount = 2
        .ColumnWidths = "1cm; 3cm"
        .BoundColumn = 0
    End With

End Sub 
```

然后您可以使用此组合框的 after update 事件来确定是否启用作业详细信息字段：

```
Private Sub cmbCustomer_AfterUpdate()

    'Check it's populated and set fields as necessary
    If cmbCustomer & "" = "" Then
        txtJobDetails.Enabled = 0 'Change this fieldname as required
    Else
        txtJobDetails.Enabled = -1
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:18:39.497

如果您的表单没有 Recordsource，则您的控件不应该（不能）有 Controlsource。如果您在设计模式下转到表单的属性，您将看到 Customer 不是 Controlsource 属性中的有效选择。为什么你没有记录源。表单的目的不是输入 Job 数据吗？

# asp.net-mvc-4 - .NET MVC4 SimpleMembership 错误 - “找不到名为 xxx 的用户”

> ID：13654837
> 
> 赞同：6
> 
> 时间：2012-11-30T23:51:21.490
> 
> 标签：asp.net-mvc-4, simplemembership

我在我的 .NET MVC4 项目中使用 SimpleMembership。在开发过程中，在手动操作/重建数据库时，我遇到了一个在生产中不太可能出现的错误，但我想解决这个问题，但我找不到一种优雅的方式来处理它。

如果在登录应用程序后，您的用户名在数据库中被更改，或者您的用户记录被完全删除，用户将无法再访问应用程序的任何页面......包括允许匿名查看的公共页面，以及登录屏幕。相反，会引发异常 - “未找到名为“用户名”的用户”。

我的应用程序中的所有页面都显示一个部分视图，该视图呈现登录/注销控件。无论数据库中有什么，Request.IsAuthenticated 都会返回 true。应用程序似乎根据 cookie 中的信息认为用户仍在登录，但在数据库中找不到相应的记录。清除 auth cookie 可以解决这个问题，但这不是我想向可能遇到这种情况的用户提供的说明。

我当前的解决方案是在 Global.asax 中捕获该异常，清除 cookie，然后重定向到登录页面。这对我来说似乎完全是hacky。

有没有人对这种情况有更好的解决方案？我从未在使用旧的 .NET Membership 提供程序时遇到过这样的问题……我的期望是，这种情况应该开箱即用，我不应该考虑它……如果记录被更改/deleted 在数据库中，用户应该只是授权失败并自动重定向到登录页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T05:29:17.503

不确定您首先在哪里拥有身份验证逻辑，但这是我所做的：

在 Global.asax.cs 中：

```
 protected void Application_Error(object sender, EventArgs e)
    {
        Exception ex = Server.GetLastError();

        if (ex.Message.Contains("No user found was found that has the name"))
        {
            FormsAuthentication.SignOut();
            Response.Redirect(Request.RawUrl);
        }
    } 
```

由于抛出的异常只是一个`System.InvalidOperationException`，因此您无能为力。不是很聪明，但会做需要做的事情。此外，请确保在您重定向到的页面上没有类似的身份验证逻辑`IsUserInRole(...)`，如果是，那么您可能想要将其包装在`try{} catch(){}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:01:10.573

您能否在登录后检查数据库缓存或页面某处，用户记录的依赖关系，依赖关系，链删除或可能由于依赖注入而发生。

请检查它或请分享代码..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T10:30:11.610

我遇到了同样的问题，在我没有登录 MVC 4 站点时`IsAuthenticated`返回`true`，导致相同的错误消息。在我们的解决方案中，我有两个带有 SimpleMembership 的 MVC 4 站点，结果我在调试第二个站点时登录了第一个站点。我认为这与设置的 cookie 有关，因为两个站点都在`localhost`en 上的不同端口下运行，因此两者都将设置相同的身份验证 cookie。我可能需要更改身份验证 cookie 的设置方式。

我认为您可能有不同的问题，但也许我的“解决方案”可以帮助遇到此问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T09:30:25.567

覆盖 AuthorizeAttribute：

```
public sealed class AuthorizeAttribute : System.Web.Http.AuthorizeAttribute
{
  protected override bool IsAuthorized(HttpActionContext actionContext)
  {
    try
    {
      return base.IsAuthorized(actionContext);
    }
    catch
    {
      return false; // user name from cookie is no longer in db
    }
  }

  protected override void HandleUnauthorizedRequest(HttpActionContext actionContext)
  {
    // handle this exception by global exception filter for redirection to login
    throw new CustomAuthException(); 
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-25T14:16:38.410

我已添加到 Arman Bimatov 响应中，以便在将您重定向到当前页面之前将您注销。通过将您重定向到当前页面，returnURL 将被正确放入查询字符串中。

在 Global.asax.cs 中：

```
protected void Application_Error(object sender, EventArgs e)
    {
      异常 ex = Server.GetLastError();

      if (ex.Message.Contains("未找到具有该名称的用户"))
      {
        FormsAuthentication.SignOut();
        Response.Redirect(Request.RawUrl);
      }
    }

```

但是，除非您根据以下问题在 web.config 中有 CustomerErrors 部分，否则这将不起作用： [global.asax Application_Error not fire](https://stackoverflow.com/questions/3713939/global-asax-application-error-not-firing)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-03T14:17:04.223

这似乎是从您的开发环境切换到另一台主机时引起的。localhost 正在记住登录 cookie 并尝试将其用于新的简单成员数据库。

正如你所说，它不会发生在生产中。抱歉，我不知道在本地和生产数据库上使用相同登录名的更好方法。

# jsfiddle - 如何为 jsfiddle.net 代码片段赋予人类可读的名称？

> ID：13654840
> 
> 赞同：15
> 
> 时间：2012-11-30T23:51:47.790
> 
> 标签：jsfiddle

jsfiddle.net 中是否有一种方法可以为代码片段提供人类可读的名称？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-10-21T07:43:03.080

更改小提琴名称后，无需分叉您的小提琴。您可以使用顶部的 (Set As Base) 选项将其设置为基础。

1）使用小提琴选项更改名称。

2) 更新版本，使其成为最新版本。

3) 使用该选项将其设置为基础。

4）在仪表板中，您可以看到您提到的名称出现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-10T11:10:45.970

在侧边栏中的*小提琴选项*下，您可以为小提琴设置名称。

![在此处输入图像描述](../Images/681654ed6a50875084f630a26e93475b.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-19T21:03:22.380

一开始我也遇到了类似的麻烦。我更新了，但它仍然是随机字符，但是当我“分叉”编辑器时，它显示为正确的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-05T21:03:18.193

如果在第一次保存之前为项目提供了名称，它将在仪表板中显示该名称。否则，需要 fork 进程对其进行重命名。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-13T14:41:34.953

实际上你不需要分叉它。您可以将具有名称的版本设置为基本版本，该名称将显示在您的仪表板中。此处注意：[命名和配置 jsfiddle](https://stackoverflow.com/questions/12279579/naming-and-configuring-jsfiddle)

# c# - 在不使用“编辑 Web 部件”界面的情况下设置 Web 部件自定义属性

> ID：13654841
> 
> 赞同：1
> 
> 时间：2012-11-30T23:51:48.310
> 
> 标签：c#, sharepoint, settings, web-parts

我一直在寻找试图弄清楚这一点，但要么我没有使用正确的术语，要么我只是没有找到答案。如果在我为没有找到它而道歉之前已经提出并回答了这个问题 - 如果答案已经存在，我将不胜感激。

我有一个带有自定义属性（webpart 类和用户控件）的可视化 webpart——所有这些都用 WebBrowsable(true)、WebPartStorage(Storage.Shared) 等属性进行了适当的装饰。为了完整起见，我还尝试了 Personalizable(Personalization.Shared)。我想做的是，我不想在标准的“编辑 Web 部件”界面中编辑这些 Web 部件属性，而是想根据当前用户是否是站点管理员来显示它们的编辑控件。

这就是我的问题所在：当我从用户控件设置自定义属性时，设置没有被保存。我在 webpart 类的 setter 方法中设置了一个断点，并验证了确实传递了一个值，但是当 webpart 在页面上重新加载时，设置恢复为空字符串的默认值。

我觉得我错过了一些基本步骤来保存这些设置。下面是一些片段来演示我正在使用的代码。显然，这不是整个代码，而只是说明我所处位置的相关部分。

**SafetyTrackerControl.ascx.cs：**

```
public partial class SafetyTrackerControl : System.Web.UI.UserControl
{
    public string EmployeeComments { get; set; }
    public SafetyTrackerWebpart ParentWebPart { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        txtEmployeeComments.Text = EmployeeComments;
    }

    protected void btnSave_Click(object sender, EventArgs e)
    {
        ParentWebPart.EmployeeComments = txtEmployeeComments.Text;
    }
} 
```

**SafetyTrackerWebPart.cs**

```
[XmlRoot(Namespace = "SafetyTrackerSettings")]
public class SafetyTrackerWebPart : WebPart
{
    SafetyTrackerControl _SafetyTrackerControl;

    protected override void CreateChildControls()
    {
        base.CreateChildControls();
        _SafetyTrackerControl = (SafetyTrackerControl)Page.LoadControl("~/_ControlTemplates/SafetyTracker/SafetyTrackerControl.ascx");
        _SafetyTrackerControl.EmployeeComments = EmployeeComments;
        _SafetyTrackerControl.ParentWebPart = this;
    }

    internal string _employeeComments;
    [WebBrowsable(true),
    WebDisplayName("Additional Comments"),
    WebPartStorage(Storage.Shared)]
    public string EmployeeComments
    {
        get { return _employeeComments; }
        set { _employeeComments = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:57:29.803

如果您的 webpart 继承自[Microsoft.SharePoint.WebPartPages.Webpart](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webpartpages.webpart%28v=office.14%29.aspx)，您可以尝试使用[SPWebPartManager](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webpartpages.spwebpartmanager_members%28v=office.14%29.aspx)类并查看[SaveChanges](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webpartpages.spwebpartmanager.savechanges%28v=office.14%29.aspx)方法。

但我认为正确的方法是创建从[EditorPart](http://msdn.microsoft.com/EN-US/library/system.web.ui.webcontrols.webparts.editorpart%28v=vs.90%29)类继承的控件，并决定用户是否应该能够编辑以下属性，或者不能在编辑 webpart 面板中编辑。您还应该覆盖[CreateEditorParts](http://msdn.microsoft.com/EN-US/library/ms157354%28v=vs.90%29)方法以返回您的自定义编辑面板。哦，你还应该设置`WebBrowsable(false)`属性，这样就不会生成默认的编辑器文本框。

# java - 如何为抽象类创建对象数组？

> ID：13654844
> 
> 赞同：0
> 
> 时间：2012-11-30T23:51:59.980
> 
> 标签：java, arrays, object, abstract

我有一个抽象类，它也有 4 个子类，我想知道如何创建一个对象数组，所以当程序运行时，它会询问用户是否要下另一个订单并存储第一个订单在对象数组中，依此类推，直到用户不想再下订单。

```
double TP = b1.getTotal() + s1.getTotal() + d1.getTotal() + dr.getTotal();
System.out.print("Would you like to place another order?");
user = scan.nextInt();
scan.nextLine();
}
}while(user == 1); 
```

//这里是我想创建对象数组并将这些变量存储在其中的地方，

```
 b1.display();
    s1.display();
    d1.display();
    dr.display(); 
```

这是抽象类

```
import java.util.*;
public abstract class Order
{

protected String meal;
protected double price, total;
protected int  amount;
public Order()
{
setItem(meal);

}
public String getItem()
{
return meal;
}

public  void setItem(String i)
{
meal = i;
}
public double getPrice()
{
return price;
}

public  void setPrice(double p)
{
price = p;
}
public int getAmt()
{
return amount;
}

public  void setAmt(int a)
{
amount = a;
}
public double getTotal()
{
return total;
}

public abstract void display();

public abstract void setTotal(double p, int a);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:10:50.900

我假设你的`abstract`课是`Order`. 就像是

```
abstract class Order {
   public abstract void getSomething();
   public abstract void setSomething();
}

class Burger extends Order {
  // implement getSomething() and setSomething()
}

...
List<Order> orders = new ArrayList<Order>();
...
Burger b = new Burger();
b.setSomething(0);
orders.add(b);
...
for (Order o : orders) {
   o.getSomething();
} 
```

很可能是您正在寻找的东西。

# python - 在变量python中存储格式化文本

> ID：13654845
> 
> 赞同：1
> 
> 时间：2012-11-30T23:52:24.503
> 
> 标签：python, string, text, string-formatting

我正在尝试通过 Python 脚本编写脚本文件

为此，我定义了一个打开、写入和关闭文件的函数 `def funcToCreateScript(filename,filecontent)`

我有另一个函数，我正在调用`funcToCreateScript`它并试图通过变量传递它的 shell 脚本内容。问题是当我如下格式化文本时

```
def createfile():
    var = """#!/bin/sh
             echo ${test}
          """
    funcToCreateScript(filename,var) 
```

我得到脚本的输出为 -

```
#!/bin/sh
         echo ${test} 
```

因此，它采用函数的缩进并相应地编写它。有没有办法格式化它，使它看起来像

```
#!/bin/sh
echo ${test} 
```

例如 -

```
def main():
    var = """
        #!/bin/sh
        echo ${test}
        """
    print var

main()

 > test.py

                #!/bin/sh
                echo ${test} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:08:49.540

一种方法是使用[textwrap.dedent](http://docs.python.org/2/library/textwrap.html#textwrap.dedent)：

> **textwrap.dedent（***文本***）**
> 
> 从文本的每一行中删除任何常见的前导空格。
> 
> 这可用于使三引号字符串与显示的左边缘对齐，同时仍以缩进形式在源代码中显示它们。

```
import textwrap

def createfile():
    var = """\
          #!/bin/sh
          echo ${test}
          """
    var = textwrap.dedent(var)
    funcToCreateScript(filename, var) 
```

请注意，`\`在开始的三引号之后立即插入，以避免出现空行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:57:43.267

这里有两种解决方案，或者使用换行符（'\n'），所以它看起来像：

```
def createfile():
    var = """#!/bin/sh\necho ${test}"""
    funcToCreateScript(filename,var) 
```

请记住，如果您使用这种技术（这是一个非常讨厌的解决方案 - 请参阅下文以获得更好的替代方案），并且您希望看到您需要的输出`print()`（假设此处为 Python 3.0 标准）。

或者，只需执行以下操作：

```
def createfile():
    involved. 
    var = """#!/bin/sh
echo ${test}
          """
    return funcToCreateScript(filename,var) 
```

我不确定您是如何进行`funcToCreateScript`设置的，但这里有一些试用代码，因此您可以看到它的运行情况（复制并粘贴到交互式解释器或新的 python 文件中并运行）：

```
def createfile():
    var = """
#!/bin/sh
echo ${test}
          """
    return var

v = createfile() 
```

如果您想花哨但仍使其可读，则可以使用 lstrip(" ") 它将删除左侧的所有空白。

```
def createfile():
    var = """#!/bin/sh
             echo ${test}
          """
    script_txt = ""

    for line in var:
        script_txt += line.lstrip(" ")

    return script_txt

v = createfile() 
```

只是厌倦了最后一个解决方案，因为如果你有你打算在那里的空格，那么它会去掉它（我个人喜欢我列出的选项 2）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T00:11:44.477

如果变量的最后一行只包含空格，并且它的长度是应该从`var`除第一行之外的行的开头删除的空格数，请考虑如下代码：

```
v = var.split('\n')
s = len(v[-1])
var = v[0]+'\n'+'\n'.join(map(lambda x: x[s:], v[1:])) 
```

这`s`会从除第一行之外的行的前面去除多余的字符。如果使用制表符完成某些对齐，上述可能会导致问题；有人可能想要使用字符串替换而不是数组切片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T00:00:17.323

试试这个：

```
var = """#!/bin/sh\necho ${test}""" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T00:31:55.523

另一种选择 - 隐式连接：

```
def createfile():
    var = (
        "#!/bin/sh\n"
        "echo ${test}"
    ) 
```

# php - 将此 PHP 函数应用于插件？

> ID：13654847
> 
> 赞同：0
> 
> 时间：2012-11-30T23:52:30.210
> 
> 标签：php, function, wordpress

我发现在 WordPress 中可以做到这一点：

假设您在名为“news-sub”的子类别下发布了一些内容，而父类别是“news”。默认情况下，即使您只选择将其发布在新闻子类别下，wordpress 帖子也会发布在新闻和新闻子目录下。我找到了一种方法，当您选择将帖子仅发布在其子类别中时，该帖子仅发布在其子类别中。这是插入到functions.php中的代码：

```
add_action( 'pre_get_posts', 'my_post_queries' );
function my_post_queries( $query ) {
  // not an admin page and is the main query
  if (!is_admin() && $query->is_main_query()){
    if(is_category()){
      add_action('posts_where', 'current_category_only');
    }
  }
}

function current_category_only($where) {
  $current_cat = get_query_var('cat');
  if($current_cat){
    global $wpdb;
    return " AND ( $wpdb->term_relationships.term_taxonomy_id IN ($current_cat) ) 
    AND $wpdb->posts.post_type = 'post' AND ($wpdb->posts.post_status = 'publish'
    OR  $wpdb->posts.post_status = 'private')";
  }
  return $where;
} 
```

这段代码很棒。但是，它不适用于插件。例如...我有一个插件，可以为您选择的类别发布缩略图和标题。假设我选择它以仅显示“新闻”类别..如果我在“新闻子”类别下发布了一些内容，它仍然会通过插件显示，无论我之前提到的功能代码如何。我尝试将功能代码复制并粘贴到插件中，但它不起作用。:(

那么，如何让这个功能与显示类别的插件一起使用？我会修改它并将其保留在 functions.php 文件中，我会修改它并将其复制并粘贴到我的插件文件中，还是我将如何修改它？任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:31:42.623

您所描述的行为是绝对可以预期的。[类别是分层](https://codex.wordpress.org/WordPress_Semantics#Terminology_Related_to_Content)的，因此父类别应包含子类别*及其帖子*。

您的`posts_where`过滤器正在尝试将行为更改为更像标签。但是某些功能，例如`get_posts()` [不运行这些过滤器](https://codex.wordpress.org/Plugin_API/Filter_Reference/posts_where)：

> 某些检索帖子的函数不运行过滤器，因此您附加的 posts_where 过滤器函数不会修改查询。为了克服这个问题，在传递给函数的参数数组中将 suppress_filters 设置为 false。以下代码示例说明了这一点。

```
$posts = get_posts( array( 'suppress_filters' => FALSE ) ); 
```

是否观察到过滤器取决于您的插件代码，因此没有干净的方法来重写类别逻辑。您可能最好将标签用于您似乎需要的非分层语义。或者看看[自定义分类](https://codex.wordpress.org/Taxonomies)法

> 是以各种方式对各种项目进行分组的一种非常强大的方式。

# php - PHP 警告：会话处于活动状态。此时您无法在 /../ 中更改会话模块的 ini 设置

> ID：13654848
> 
> 赞同：1
> 
> 时间：2012-11-30T23:52:34.767
> 
> 标签：php, apache, session, memcached, orientdb

我创建了自定义 PHP 会话处理程序，有时会收到 PHP 警告：

```
PHP Warning:  curl_exec(): A session is active. You cannot change the session module's ini settings at this time in 
```

这似乎是一个随机问题，并且“curl_exe()”函数不是问题，因为该函数总是在发生错误时更改。

自定义会话处理程序将会话保存到 memcache 和 OrientDB 中，我确信 memcache 和 orientdb 在发生错误时没有问题，因为在警告之前和之后检索/保存数据时我没有错误。

我正在使用 Debian 6.0.6 stable，2.2.16-6+squeeze10（prefork）和 libapache2-mod-php5 5.3.3-7+squeeze14。我认为这是一个 PHP 错误，但我没有在 php 或 debian 错误数据库中找到它。有胶水吗？谢谢。

PS如果您需要会话处理程序PHP代码，我可以将它开源发布！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:03:17.327

我找到了问题的根源。如果您在 PHP 中使用 apache prefork，但您使用的是一个使用线程的 apache 模块（在我的例子中是 google 的 mod_spdy），您可能会遇到 PHP 问题。

**在 httpd.conf 中注释掉 mod_spdy （或在您的情况下使用线程的任何其他模块）似乎可以完全解决问题。**

# jquery - 保留 DataTable 但在重新填充后重新分页

> ID：13654849
> 
> 赞同：1
> 
> 时间：2012-11-30T23:52:51.470
> 
> 标签：jquery, jquery-datatables

我正在使用 DataTable 插件 (http://datatables.net) 对我正在从事的项目产生巨大影响，但我们需要它来完成它所做的事情以及更多的事情。在某些操作中，我们需要将 DataTable 保持在原处，但清空其数据行（TBODY 中的那些）并放入新行。现在，这部分实际上正在工作，但是一旦插入所有新行，它就会显示*所有*这些行，然后不会将它们分成页面。有没有办法只调用分页动作？

这是一个 JS Fiddle 类型的示例： http: [//live.datatables.net/itaven/7/edit](http://live.datatables.net/itaven/7/edit)

我同样想知道是否有一种方法可以调用重新排序（除了通过单击表标题进行排序的本机能力）并通过 jQuery 操作触发进入 DataTable 的不同页面。

# applescript - 从 iTunes 获取事件（通过 AppleScript？）

> ID：13654850
> 
> 赞同：0
> 
> 时间：2012-11-30T23:52:53.723
> 
> 标签：applescript, itunes

我正在通过 AppleScript 控制 iTunes（在 OSX 上），并且想知道用户何时更改音量或暂停歌曲等内容。除了通过 AppleScript 轮询外，知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:54:20.723

iTunes 会发出系统范围的通知，以便在发生更改时通知应用程序。Cocoa 应用程序可以注册以接收此通知，但标准的 applescript 不能。因此，您最好的选择是使用 ApplescriptObjC 或 Objective-c 在 Xcode 中开发您的应用程序。

仅供参考：如果您走到那一步，则通知称为“com.apple.iTunes.playerInfo”，并且您从 NSDistributedNotificationCenter 获得它。

所以基本上你唯一的选择是从 applescript 轮询 iTunes。

# c++ - cmake项目的CG运行时链接器错误（g ++）

> ID：13654852
> 
> 赞同：0
> 
> 时间：2012-11-30T23:53:06.107
> 
> 标签：c++, gcc, g++, cmake, cg

我收到这些链接器错误： /usr/bin/ld: 找不到 -lCg /usr/bin/ld: 找不到 -lCgGL

我在这里使用 FindCg.cmake：[http ://code.google.com/p/nvidia-texture-tools/source/browse/branches/2.0/cmake/FindCg.cmake?r=452](http://code.google.com/p/nvidia-texture-tools/source/browse/branches/2.0/cmake/FindCg.cmake?r=452)

然后使用 target_link_libraries 添加找到的库。

当我使用 VERBOSE=1（见下文）运行 make 时，它​​看起来像是通过了库的正确路径（/usr/lib64/libCgGL.so 和 /usr/lib64/libCg.so）

```
01- 0:30:09 loony@T-linux> make FightSpace VERBOSE=1
/usr/bin/cmake -H/home/loony/git/tengine -B/home/loony/git/tengine/build --check-build-system CMakeFiles/Makefile.cmake 0
make -f CMakeFiles/Makefile2 FightSpace
make[1]: Entering directory `/home/loony/git/tengine/build'
/usr/bin/cmake -H/home/loony/git/tengine -B/home/loony/git/tengine/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/loony/git/tengine/build/CMakeFiles 91
make -f CMakeFiles/Makefile2 Code/FightSpace/CMakeFiles/FightSpace.dir/all
make[2]: Entering directory `/home/loony/git/tengine/build'
make -f Code/TEPlatform/CMakeFiles/TEPlatform.dir/build.make Code/TEPlatform/CMakeFiles/TEPlatform.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEPlatform /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEPlatform /home/loony/git/tengine/build/Code/TEPlatform/CMakeFiles/TEPlatform.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEPlatform/CMakeFiles/TEPlatform.dir/build.make Code/TEPlatform/CMakeFiles/TEPlatform.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEPlatform/CMakeFiles/TEPlatform.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  57
[  1%] Built target TEPlatform
make -f Code/TECore/CMakeFiles/TECore.dir/build.make Code/TECore/CMakeFiles/TECore.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TECore /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TECore /home/loony/git/tengine/build/Code/TECore/CMakeFiles/TECore.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TECore/CMakeFiles/TECore.dir/build.make Code/TECore/CMakeFiles/TECore.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TECore/CMakeFiles/TECore.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
[ 40%] Built target TECore
make -f Code/TEngine/CMakeFiles/TEngine.dir/build.make Code/TEngine/CMakeFiles/TEngine.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEngine /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEngine /home/loony/git/tengine/build/Code/TEngine/CMakeFiles/TEngine.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEngine/CMakeFiles/TEngine.dir/build.make Code/TEngine/CMakeFiles/TEngine.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEngine/CMakeFiles/TEngine.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  82 83 84 85 86 87 88 89 90 91 92 93
[ 53%] Built target TEngine
make -f Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build.make Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEInputSystem /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEInputSystem /home/loony/git/tengine/build/Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build.make Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  47 48 49 50 51
[ 59%] Built target TEInputSystem
make -f Code/TEPhysics/CMakeFiles/TEPhysics.dir/build.make Code/TEPhysics/CMakeFiles/TEPhysics.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEPhysics /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEPhysics /home/loony/git/tengine/build/Code/TEPhysics/CMakeFiles/TEPhysics.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEPhysics/CMakeFiles/TEPhysics.dir/build.make Code/TEPhysics/CMakeFiles/TEPhysics.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEPhysics/CMakeFiles/TEPhysics.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  52 53 54 55
[ 63%] Built target TEPhysics
make -f Code/TERendering/CMakeFiles/TERendering.dir/build.make Code/TERendering/CMakeFiles/TERendering.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TERendering /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TERendering /home/loony/git/tengine/build/Code/TERendering/CMakeFiles/TERendering.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TERendering/CMakeFiles/TERendering.dir/build.make Code/TERendering/CMakeFiles/TERendering.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TERendering/CMakeFiles/TERendering.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78
[ 86%] Built target TERendering
make -f Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build.make Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEGraphicsSystem /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEGraphicsSystem /home/loony/git/tengine/build/Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build.make Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  41 42 43 44 45 46
[ 93%] Built target TEGraphicsSystem
make -f Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build.make Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TETransformSystem /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TETransformSystem /home/loony/git/tengine/build/Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build.make Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  79 80 81
[ 96%] Built target TETransformSystem
make -f Code/FightSpace/CMakeFiles/FightSpace.dir/build.make Code/FightSpace/CMakeFiles/FightSpace.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/FightSpace /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/FightSpace /home/loony/git/tengine/build/Code/FightSpace/CMakeFiles/FightSpace.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/FightSpace/CMakeFiles/FightSpace.dir/build.make Code/FightSpace/CMakeFiles/FightSpace.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
Linking CXX executable ../../../Executables/FightSpace
cd /home/loony/git/tengine/build/Code/FightSpace && /usr/bin/cmake -E cmake_link_script CMakeFiles/FightSpace.dir/link.txt --verbose=1
/usr/bin/c++       CMakeFiles/FightSpace.dir/main.cpp.o CMakeFiles/FightSpace.dir/FightSpaceGame.cpp.o CMakeFiles/FightSpace.dir/TEAssetImporter.cpp.o  -o ../../../Executables/FightSpace  -L/opt/boost/lib  -L/usr/lib64/libCg.so  -L/usr/lib64/libCgGL.so  -L/home/loony/git/tengine/Code/FightSpace  -L/home/loony/git/tengine/Code/TECore/Events  -L/home/loony/git/tengine/Code/TECore/Intersection  -L/home/loony/git/tengine/Code/TECore/Math  -L/home/loony/git/tengine/Code/TECore/Network  -L/home/loony/git/tengine/Code/TECore/Resources  -L/home/loony/git/tengine/Code/TECore/IO  -L/home/loony/git/tengine/Code/TECore/Images  -L/home/loony/git/tengine/Code/TECore/Utils  -L/home/loony/git/tengine/Code/TEPhysics/Collision  -L/home/loony/git/tengine/Code/TEPhysics/Physics  -L/home/loony/git/tengine/Code/TEngine/Engine  -L/home/loony/git/tengine/Code/TEPlatform  -L/home/loony/git/tengine/Code/TEPlatform/Win  -L/home/loony/git/tengine/Code/TEPlatform/Linux  -L/home/loony/git/tengine/Code/TEGraphicsSystem  -L/home/loony/git/tengine/Code/TETransformSystem  -L/home/loony/git/tengine/Code/TEInputSystem -rdynamic ../TECore/libTECore.a ../TEngine/libTEngine.a ../TEGraphicsSystem/libTEGraphicsSystem.a ../TEPhysics/libTEPhysics.a ../TETransformSystem/libTETransformSystem.a ../TEPlatform/libTEPlatform.a ../TEInputSystem/libTEInputSystem.a -lCg -lCgGL ../TERendering/libTERendering.a ../../../Externals/glew-1.7.0/lib/glew32.lib -lCg -lCgGL -lGLU -lGL -lSM -lICE -lX11 -lXext ../TEngine/libTEngine.a ../TECore/libTECore.a ../TEPlatform/libTEPlatform.a ../../../Externals/jsoncpp-src-0.5.0/buildscons/linux-gcc-4.7.2/src/lib_json/libjson_linux-gcc-4.7.2_libmt.a -Wl,-rpath,/opt/boost/lib:/usr/lib64/libCg.so:/usr/lib64/libCgGL.so:/home/loony/git/tengine/Code/FightSpace:/home/loony/git/tengine/Code/TECore/Events:/home/loony/git/tengine/Code/TECore/Intersection:/home/loony/git/tengine/Code/TECore/Math:/home/loony/git/tengine/Code/TECore/Network:/home/loony/git/tengine/Code/TECore/Resources:/home/loony/git/tengine/Code/TECore/IO:/home/loony/git/tengine/Code/TECore/Images:/home/loony/git/tengine/Code/TECore/Utils:/home/loony/git/tengine/Code/TEPhysics/Collision:/home/loony/git/tengine/Code/TEPhysics/Physics:/home/loony/git/tengine/Code/TEngine/Engine:/home/loony/git/tengine/Code/TEPlatform:/home/loony/git/tengine/Code/TEPlatform/Win:/home/loony/git/tengine/Code/TEPlatform/Linux:/home/loony/git/tengine/Code/TEGraphicsSystem:/home/loony/git/tengine/Code/TETransformSystem:/home/loony/git/tengine/Code/TEInputSystem
/usr/bin/ld: cannot find -lCg
/usr/bin/ld: cannot find -lCgGL
/usr/bin/ld: cannot find -lCg
/usr/bin/ld: cannot find -lCgGL
collect2: error: ld returned 1 exit status
make[3]: *** [../Executables/FightSpace] Error 1
make[3]: Leaving directory `/home/loony/git/tengine/build'
make[2]: *** [Code/FightSpace/CMakeFiles/FightSpace.dir/all] Error 2
make[2]: Leaving directory `/home/loony/git/tengine/build'
make[1]: *** [Code/FightSpace/CMakeFiles/FightSpace.dir/rule] Error 2
make[1]: Leaving directory `/home/loony/git/tengine/build'
make: *** [FightSpace] Error 2
~/git/tengine/build @ (git::master)
01- 0:30:21 loony@T-linux> 
```

# ===========================================

编辑：

在按照 Fraser 在下面回复中的建议删除 cmake 文件中的 link_directories 行后，我得到了这个输出

```
01- 1:58:59 loony@T-linux> make FightSpace VERBOSE=1
/usr/bin/cmake -H/home/loony/git/tengine -B/home/loony/git/tengine/build --check-build-system CMakeFiles/Makefile.cmake 0
make -f CMakeFiles/Makefile2 FightSpace
make[1]: Entering directory `/home/loony/git/tengine/build'
/usr/bin/cmake -H/home/loony/git/tengine -B/home/loony/git/tengine/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/loony/git/tengine/build/CMakeFiles 91
make -f CMakeFiles/Makefile2 Code/FightSpace/CMakeFiles/FightSpace.dir/all
make[2]: Entering directory `/home/loony/git/tengine/build'
make -f Code/TEPlatform/CMakeFiles/TEPlatform.dir/build.make Code/TEPlatform/CMakeFiles/TEPlatform.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEPlatform /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEPlatform /home/loony/git/tengine/build/Code/TEPlatform/CMakeFiles/TEPlatform.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEPlatform/CMakeFiles/TEPlatform.dir/build.make Code/TEPlatform/CMakeFiles/TEPlatform.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEPlatform/CMakeFiles/TEPlatform.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  57
[  1%] Built target TEPlatform
make -f Code/TECore/CMakeFiles/TECore.dir/build.make Code/TECore/CMakeFiles/TECore.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TECore /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TECore /home/loony/git/tengine/build/Code/TECore/CMakeFiles/TECore.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TECore/CMakeFiles/TECore.dir/build.make Code/TECore/CMakeFiles/TECore.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TECore/CMakeFiles/TECore.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
[ 40%] Built target TECore
make -f Code/TEngine/CMakeFiles/TEngine.dir/build.make Code/TEngine/CMakeFiles/TEngine.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEngine /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEngine /home/loony/git/tengine/build/Code/TEngine/CMakeFiles/TEngine.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEngine/CMakeFiles/TEngine.dir/build.make Code/TEngine/CMakeFiles/TEngine.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEngine/CMakeFiles/TEngine.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  82 83 84 85 86 87 88 89 90 91 92 93
[ 53%] Built target TEngine
make -f Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build.make Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TETransformSystem /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TETransformSystem /home/loony/git/tengine/build/Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build.make Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TETransformSystem/CMakeFiles/TETransformSystem.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  79 80 81
[ 57%] Built target TETransformSystem
make -f Code/TEPhysics/CMakeFiles/TEPhysics.dir/build.make Code/TEPhysics/CMakeFiles/TEPhysics.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEPhysics /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEPhysics /home/loony/git/tengine/build/Code/TEPhysics/CMakeFiles/TEPhysics.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEPhysics/CMakeFiles/TEPhysics.dir/build.make Code/TEPhysics/CMakeFiles/TEPhysics.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEPhysics/CMakeFiles/TEPhysics.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  52 53 54 55
[ 61%] Built target TEPhysics
make -f Code/TERendering/CMakeFiles/TERendering.dir/build.make Code/TERendering/CMakeFiles/TERendering.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TERendering /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TERendering /home/loony/git/tengine/build/Code/TERendering/CMakeFiles/TERendering.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TERendering/CMakeFiles/TERendering.dir/build.make Code/TERendering/CMakeFiles/TERendering.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TERendering/CMakeFiles/TERendering.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78
[ 84%] Built target TERendering
make -f Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build.make Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEGraphicsSystem /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEGraphicsSystem /home/loony/git/tengine/build/Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build.make Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEGraphicsSystem/CMakeFiles/TEGraphicsSystem.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  41 42 43 44 45 46
[ 91%] Built target TEGraphicsSystem
make -f Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build.make Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/TEInputSystem /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/TEInputSystem /home/loony/git/tengine/build/Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build.make Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
make[3]: Nothing to be done for `Code/TEInputSystem/CMakeFiles/TEInputSystem.dir/build'.
make[3]: Leaving directory `/home/loony/git/tengine/build'
/usr/bin/cmake -E cmake_progress_report /home/loony/git/tengine/build/CMakeFiles  47 48 49 50 51
[ 96%] Built target TEInputSystem
make -f Code/FightSpace/CMakeFiles/FightSpace.dir/build.make Code/FightSpace/CMakeFiles/FightSpace.dir/depend
make[3]: Entering directory `/home/loony/git/tengine/build'
cd /home/loony/git/tengine/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/loony/git/tengine /home/loony/git/tengine/Code/FightSpace /home/loony/git/tengine/build /home/loony/git/tengine/build/Code/FightSpace /home/loony/git/tengine/build/Code/FightSpace/CMakeFiles/FightSpace.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/loony/git/tengine/build'
make -f Code/FightSpace/CMakeFiles/FightSpace.dir/build.make Code/FightSpace/CMakeFiles/FightSpace.dir/build
make[3]: Entering directory `/home/loony/git/tengine/build'
Linking CXX executable ../../../Executables/FightSpace
cd /home/loony/git/tengine/build/Code/FightSpace && /usr/bin/cmake -E cmake_link_script CMakeFiles/FightSpace.dir/link.txt --verbose=1
/usr/bin/c++       CMakeFiles/FightSpace.dir/main.cpp.o CMakeFiles/FightSpace.dir/FightSpaceGame.cpp.o CMakeFiles/FightSpace.dir/TEAssetImporter.cpp.o  -o ../../../Executables/FightSpace  -L/opt/boost/lib  -L/home/loony/git/tengine/Code/FightSpace  -L/home/loony/git/tengine/Code/TECore/Events  -L/home/loony/git/tengine/Code/TECore/Intersection  -L/home/loony/git/tengine/Code/TECore/Math  -L/home/loony/git/tengine/Code/TECore/Network  -L/home/loony/git/tengine/Code/TECore/Resources  -L/home/loony/git/tengine/Code/TECore/IO  -L/home/loony/git/tengine/Code/TECore/Images  -L/home/loony/git/tengine/Code/TECore/Utils  -L/home/loony/git/tengine/Code/TEPhysics/Collision  -L/home/loony/git/tengine/Code/TEPhysics/Physics  -L/home/loony/git/tengine/Code/TEngine/Engine  -L/home/loony/git/tengine/Code/TEPlatform  -L/home/loony/git/tengine/Code/TEPlatform/Win  -L/home/loony/git/tengine/Code/TEPlatform/Linux  -L/home/loony/git/tengine/Code/TEGraphicsSystem  -L/home/loony/git/tengine/Code/TETransformSystem  -L/home/loony/git/tengine/Code/TEInputSystem -rdynamic ../TECore/libTECore.a ../TEngine/libTEngine.a ../TEGraphicsSystem/libTEGraphicsSystem.a ../TEPhysics/libTEPhysics.a ../TETransformSystem/libTETransformSystem.a ../TEPlatform/libTEPlatform.a ../TEInputSystem/libTEInputSystem.a -lCg -lCgGL ../TERendering/libTERendering.a ../../../Externals/glew-1.7.0/lib/glew32.lib -lCg -lCgGL -lGLU -lGL -lSM -lICE -lX11 -lXext ../TEngine/libTEngine.a ../TECore/libTECore.a ../TEPlatform/libTEPlatform.a ../../../Externals/jsoncpp-src-0.5.0/buildscons/linux-gcc-4.7.2/src/lib_json/libjson_linux-gcc-4.7.2_libmt.a -Wl,-rpath,/opt/boost/lib:/home/loony/git/tengine/Code/FightSpace:/home/loony/git/tengine/Code/TECore/Events:/home/loony/git/tengine/Code/TECore/Intersection:/home/loony/git/tengine/Code/TECore/Math:/home/loony/git/tengine/Code/TECore/Network:/home/loony/git/tengine/Code/TECore/Resources:/home/loony/git/tengine/Code/TECore/IO:/home/loony/git/tengine/Code/TECore/Images:/home/loony/git/tengine/Code/TECore/Utils:/home/loony/git/tengine/Code/TEPhysics/Collision:/home/loony/git/tengine/Code/TEPhysics/Physics:/home/loony/git/tengine/Code/TEngine/Engine:/home/loony/git/tengine/Code/TEPlatform:/home/loony/git/tengine/Code/TEPlatform/Win:/home/loony/git/tengine/Code/TEPlatform/Linux:/home/loony/git/tengine/Code/TEGraphicsSystem:/home/loony/git/tengine/Code/TETransformSystem:/home/loony/git/tengine/Code/TEInputSystem
/usr/bin/ld: cannot find -lCg
/usr/bin/ld: cannot find -lCgGL
/usr/bin/ld: cannot find -lCg
/usr/bin/ld: cannot find -lCgGL
collect2: error: ld returned 1 exit status
make[3]: *** [../Executables/FightSpace] Error 1
make[3]: Leaving directory `/home/loony/git/tengine/build'
make[2]: *** [Code/FightSpace/CMakeFiles/FightSpace.dir/all] Error 2
make[2]: Leaving directory `/home/loony/git/tengine/build'
make[1]: *** [Code/FightSpace/CMakeFiles/FightSpace.dir/rule] Error 2
make[1]: Leaving directory `/home/loony/git/tengine/build'
make: *** [FightSpace] Error 2
~/git/tengine/build @ (git::master)
01- 1:59:08 loony@T-linux> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:30:29.867

以下部分看起来很可疑：

> ```
> -L/usr/lib64/libCg.so  -L/usr/lib64/libCgGL.so 
> ```

`-L`后跟一个目录路径，链接器在查找通过 . 指定的后续库时将搜索该目录`-l`。

我希望这是`-L/usr/lib64`在这种情况下。

你确定你是在通话中加入`${CG_LIBRARY}`和而不是错误的通话吗？`${CG_GL_LIBRARY}`[`target_link_libraries`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3atarget_link_libraries)[`link_directories`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3alink_directories)

* * *

**编辑**

根据以下评论，您可以执行以下操作以使事情正常进行：

```
get_filename_component(CgLibPath ${CG_LIBRARY} PATH)
get_filename_component(CgGlLibPath ${CG_GL_LIBRARY} PATH)
link_directories(${CgLibPath} ${CgGlLibPath}) 
```

这应该可行，但请注意`link_directories`，即使在其自己的文档中也不建议使用。

# c - 接收 tcp 数据时写入串口

> ID：13654857
> 
> 赞同：1
> 
> 时间：2012-11-30T23:53:26.420
> 
> 标签：c, sockets, serial-port, posix

我正在编写一个程序，它应该接受来自 tcp/ip 端口和串行端口的信息。它也应该写入串行端口。我有两个程序（一个用于串行，一个用于 tcp/ip），但我试图将它们放入一个完整的程序中。我得到的结果是我只会在读取 tcp/ip 数据时读取串行数据。这不是什么问题。最大的问题是 write 函数似乎根本不起作用。有谁知道为什么？

这是执行串行功能的方法的代码。main 方法创建 tcp/ip 套接字并调用此方法：

```
 int work()
    {

      //set up the serial port
       int result = 0;
       int portID = -1;
       char *device = "/dev/ttyUSB1";
       int rate = convertRate("115200");
       char parity = convertParity("N");
       int databits = convertDatabits("8");
       int stopbits = convertStopbits("1");
       portID = posixComOpen(device,rate,parity,databits,stopbits);

      maxslot = listener;
      do
      {

        fd_set set;
        int i;

        FD_ZERO(&set);

        FD_SET(1,        &set);
        FD_SET(listener, &set);
        for(i=0; i < SLOTCOUNT; i++)
        {
          if(slots[i])
          {
            FD_SET(slots[i], &set);
          }
        }

        int koliko = select(maxslot+1, &set, NULL, NULL, NULL);
        if(koliko==-1)
          err(5, "select()");

        if(FD_ISSET(1, &set))
        {

          int size;
          if(ioctl(1, FIONREAD, &size) != -1){
            char *buf;

        //    printf("Reading %d bytes...\n", size);
            buf = malloc(size+1);
            read(1, buf, size);
            buf[size] = 0;
        //    printf("Received %s\n", buf);

            broadcast_message(0, buf);

            free(buf);
          }
          else
            err(7, "ioctl() stdio");

        }
        if(FD_ISSET(listener, &set))
        {
          int accepted = accept(listener, NULL, NULL);
          if(accepted == -1)
            err(6, "accept()");

          slots[accepted] = accepted;
          if(accepted > maxslot)
            maxslot = accepted;
        }

        for(i = 0; i < SLOTCOUNT; i++)
        {
          if(slots[i] && FD_ISSET(slots[i], &set))
          {
        //    printf("Received on %d\n", i);

            int size;

            if(ioctl(i, FIONREAD, &size) != -1){

              if(size > 0)
              {
                char *buf;

        //        printf("Reading %d bytes...\n", size);
                buf = malloc(size+1);
                read(i, buf, size);
                buf[size] = 0;
        //        printf("Received %s\n", buf);

                broadcast_message(i, buf);

                free(buf);
              }
              else
              {
                shutdown(i, SHUT_RDWR);
                close(i);

                slots[i] = 0;

        //        printf("Disconnect on %d\n", i);
              }
            }
            else
              err(8, "ioctl() net");

          }
        }
        //recieve and send data to serial
char input =0;

        while(posixComDataReady(portID) && posixComRead(portID, &input)) {
        printf("%c", input);
        //fflush(stdout);
          } //while

         /* Write character to Vex */
         if(posixComWrite(portID, 'x') < 0)
           printf("Error Writing char %c",'x');
         //end serial code

      } while(1);
      return 0;
    } 
```

EDiT：这里是 poxixComWrite() 方法：

```
char posixComWrite(int port, char src) {
return (write(port, &src, 1) == 1);
} //posixComWrite 
```

同样，除了 PosixComWrite() 方法之外，该程序正在运行。它不会抛出错误。它返回“1”。我让它写入一个不接收字符的微控制器。当从 tcp/ip 的上下文中取出时，这是有效的。这里发生了一些奇怪的事情吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-30T23:57:27.787

尝试暂停该进程，该进程在写入前写入几毫秒。它将上下文切换并消除一些问题。

# javascript - 为什么我的 javascript 电子邮件按钮不起作用？我究竟做错了什么？

> ID：13654859
> 
> 赞同：2
> 
> 时间：2012-11-30T23:53:36.017
> 
> 标签：javascript, asp.net, email

我的网站左栏中有一个 javascript 图片电子邮件按钮。这是一张信封的照片，显然意味着如果您想邮寄给我们，请单击此处。这是代码：

```
<td>
<input type="image" src="http://www.ussvision.com/images/button-email.jpg" 
id="btnEmail" 
onclick="parent.location='mailto: @.com?subject=Check out USS Vision'" 
value="Email" alt="Email this page" />
</td> 
```

但是当我点击它时，什么也没有发生。我不想使用像 addthis 这样的第 3 方。但我**希望**它在客户端上尽可能简单——如果它不必打开他们的默认电子邮件，那就太好了，因为这可以减少他们 RAM 的压力。

谁能告诉我我做错了什么，为什么电子邮件按钮甚至无法打开默认的电子邮件客户端？任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:42:16.250

您可能希望使用按钮元素而不是输入，因为这在语义上就是它的本质（执行操作，不提供输入或实际重定向到不同的 URL）。另外，尝试更改对 window.location.href 的调用（如前所述）。

Button 是一个更通用的元素，具有更宽松的 api。

使用锚定包装的 img 元素会起作用，但会使您更容易被垃圾邮件爬虫抓取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:50:58.030

这可能无法回答您的问题，但我不会为此使用 JavaScript。

```
<a title="Email this page" href="mailto:whoever@example.com?subject=Check%20out%20USS%20Vision">
  <img src="http://www.ussvision.com/images/button-email.jpg" />
</a> 
```

# android - 如何获取 android 应用程序窗口的大小而不是物理屏幕大小？

> ID：13654861
> 
> 赞同：11
> 
> 时间：2012-11-30T23:53:48.240
> 
> 标签：android, dimensions

在 Android 中，如何获取应用程序窗口的大小？我不是在寻找物理屏幕尺寸，而是屏幕上应用程序窗口的实际尺寸。例如，通常在您拿走通知栏、软触摸按钮等之后剩下的内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T00:04:35.080

如果您想要应用程序窗口的大小，您可以调用 yourview.getHeight() 和 yourview.getWidth(); 但是必须绘制视图才能使其起作用。

如果你想在绘制之前获得高度，你可以这样做：

[https://stackoverflow.com/a/10134260/1851478](https://stackoverflow.com/a/10134260/1851478)

虽然有很多不同的屏幕/视图测量情况，所以如果您可以更具体地了解“应用程序窗口的实际大小”，这是您的应用程序吗？还是主屏幕应用程序？，其他一些应用程序？

如果你想要可用空间减去装饰（状态栏/软按钮），你也可以反过来攻击它，例如测量实际屏幕尺寸（方法因 API 而异），然后减去状态栏的高度。

显示高度示例：

```
// Deprecated
((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getHeight(); 
```

状态栏高度：

```
Rect rectgle= new Rect();
Window window= getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
int StatusBarHeight= rectgle.top; 
```

或者

```
int statusBarHeight = Math.ceil(25 * context.getResources().getDisplayMetrics().density); 
```

许多不同的方法可以做到这一点。

当然需要您提供更多信息才能给出更准确的答案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-19T23:59:20.737

这也很容易：

```
Rect windowRect = new Rect();

yourView.getWindowVisibleDisplayFrame(windowRect);

int hWindow = windowRect.height();
int wWindow = windowRect.width(); 
```

# javascript - HTML，将 iframe src 设置为 javascript 变量

> ID：13654868
> 
> 赞同：2
> 
> 时间：2012-11-30T23:54:17.963
> 
> 标签：javascript, html, iframe, document.write

我想在我的另一个网页的网页中显示一个窗口，希望通过 iframe。我需要将 src 设置为 javascript 变量，代码如下：

```
<html>
<head><title>my webpage</title></head>
<SCRIPT language=JavaScript type=text/javascript>
function GoToURL(j) {
var URLis = document.URLframe.Dest.value
document.write("<center><iframe src=\"http://www.example.com\"/ width=1350 height=500     seamless></center>");
    }
</SCRIPT>
<FORM name=URLframe>
<TABLE align=center border=0>

<TBODY>
<TR>
<TD vAlign=center align=middle><BR><INPUT maxLength=50 size=50 
  name=Dest></TD></TR>
<TR>
<TD align=middle>
  <P><INPUT onclick=GoToURL(this) type=button value="                       Go to..                                " name="Go to"></P></TD></TR></TBODY></TABLE></FORM>
</html> 
```

简单地说，我需要将 iframe src 设置为变量 URLis。我在 html 和 javascript 方面都有点新手，所以请尽可能简单。对于将 iframe src 设置为 URLis 变量的方法，您有什么建议或想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:15:27.400

试试这个：

```
var URLis = document.URLframe.Dest.value;
document.write('<center><iframe src="' + URLis + '" width=1350 height=500 seamless></center>'); 
```

# mysql - 不是那么简单的按日期分组 2 数据集 mysql

> ID：13654869
> 
> 赞同：0
> 
> 时间：2012-11-30T23:54:21.380
> 
> 标签：mysql, sql

我的数据库中有一个`jobs`表。

工作所属行业
工作所属行业
工作所属地区

我想从表中选择工作并按`date_published`字段对`where`应用不同条件的另一组工作进行分组（计数）。

例如，我想选择 2012 年 1 月 1 日之后发布的工作，按月/年对它们进行分组以获取月度统计数据，并将总和与在 where 条件中指定了职业 ID 的另一组工作进行比较：

```
SELECT count(jobs.id),
       count(jobs2.id),
       DATE(jobs.date_published)
FROM jobs, jobs jobs2
WHERE jobs.date_published > '2010-01-01'
AND jobs.date_published = jobs2.date_published,
AND jobs2.profession_id IN (1, 2, 3)
GROUP BY 
    MONTH(jobs.date_published),
    YEAR(jobs.date_published)
ORDER BY 
    YEAR(jobs.date_published) DESC,
    MONTH(jobs.date_published) DESC 
```

但是上面的例子是错误的，因为它导致服务器没有响应并处理无穷大的查询。我该如何解决？

我相信这与`jobs.date_published = jobs2.date_published`声明有关。系统中有许多工作具有相同的`date_published`日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:10:43.773

在选择中选择日期列没有任何意义。您要么需要按日期分组，要么选择年份和月份部分。

这种模式应该更快。根据具体要求，您可以删除嵌套查询：

```
Select
  Year(date_published) Year,
  Month(date_published) Month,
  Sum(job_count_1) job_count_1,
  Sum(job_count_2) job_count_2
From (
    Select
      date_published,
      Sum(Case When profession_id In (1, 2, 3) Then 1 Else 0 End) as job_count_1,
      Count(*) as job_count_2
    From 
      jobs
    Where
      date_published > '2010-01-01'
    Group By 
      date_published
    Having
      Sum(Case When profession_id In (1, 2, 3) Then 1 Else 0 End) > 0
  ) a
Group By
  Year(date_published),
  Month(date_published)
Order By
  1 Desc,
  2 Desc 
```

在 (date_published,professional_id) 上有一个索引会加快速度，因为引擎应该能够仅使用索引来回答查询。

这是一个[例子](http://sqlfiddle.com/#!2/ff663/1)。有了这些数据，您希望答案是什么样的？

# ios - ios - 我已经成功地将故事板 UIWebView 连接到 iPhone 的控制器，但不能为 iPad 做

> ID：13654870
> 
> 赞同：0
> 
> 时间：2012-11-30T23:54:21.253
> 
> 标签：ios, ios5, uiwebview

我通过将 iPhone 故事板屏幕拖动到 .h 文件为 iPhone 屏幕创建了 UIWebView 属性，但我不确定如何将 iPad 屏幕连接到同一个控制器。

有没有办法他们可以重复使用我制作的相同财产？

这是创建的属性：

```
@property (weak, nonatomic) IBOutlet UIWebView *theWebView; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:03:13.263

要共享 View Controller，您需要在 iPad Story Board 中对其进行修改。

选择 iPad 故事板，然后选择要与 iPhone 共享的视图控制器，然后拉起`Identity Inspector` 右侧的（左起第三个图标）`Attributes Inspector` 您将看到一个`Class`选择。将其更改为使用与您的 iPhone 视图控制器和 UIWebView 正在使用的视图控制器相同的视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:03:55.637

我猜您没有用于 ipad 的单独的 .xib（或情节提要文件）文件？如果没有，为什么不制作一个，只需新建文件，然后选择 nib 文件（或故事板文件），并确保为 ipad 选择它。如果您创建一个新的，请确保您在 .xib（或故事板）文件上设置了正确的类。

如果您愿意，也可以有问题地添加 web 视图，如下所示：

```
[self.view addsubview:self.theWebView]; 
```

只需确保为 webview 提供适当的框架以将其放置在所需的位置并为其提供所需的大小。

# html - 如何专门对齐三个图像？

> ID：13654873
> 
> 赞同：-3
> 
> 时间：2012-11-30T23:54:36.777
> 
> 标签：html, css, alignment

我无法在页面中间对齐三个图像。

假设图像#1 高约 500 像素，宽约 500 像素。图片 #2 和 #3 高 250 像素，宽 500 倍。我希望图像#1 位于左侧，图像#2 和#3 位于图像#1 旁边。它们之间会有一些边距，这样它们就不会彼此相邻，但是现在，我需要找到一种方法来对齐它们。

```
------------------    -------------------
|                 |   |                 |
|                 |   |                 |
|                 |   |                 |
|                 |   |_________________|
|                 |   
|                 |   |-----------------|
|                 |   |                 |
|                 |   |                 |
-------------------   ------------------- 
```

那有意义吗...？

此外，它们不是按钮或任何东西。只是计划图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:59:02.783

像这样？[http://jsfiddle.net/chmHH/](http://jsfiddle.net/chmHH/)

在 Chrome 中工作，尚未检查其他浏览器。

HTML（我推荐使用类名）

```
<div>
    <img src="http://placekitten.com/200/200"/>
    <img src="http://placekitten.com/150/200"/>
    <img src="http://placekitten.com/150/200"/>
</div>​ 
```

CSS

```
div{
    text-align:center;
}
img{
    display:inline;
} 
```

更新：http: [//jsfiddle.net/chmHH/1/](http://jsfiddle.net/chmHH/1/)

HTML

```
<div>
    <img src="http://placekitten.com/200/200"/>
    <img src="http://placekitten.com/200/98" class="top"/>
    <img src="http://placekitten.com/200/98" class="bottom"/>
</div>​ 
```

CSS

```
div{
    text-align:center;
}
img{
    display:inline;
}
img.top{
    vertical-align:top;
}
img.bottom{
    vertical-align:baseline;
    margin-left:-204px;
}
​
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:04:34.903

**第一种方法。**

如果您可以稍微更改标记，最简单的方法是为图像添加一个额外的框，该框应该在列中呈现。然后，您将更改 box`display`属性，使其不会从新行开始。

```
.inline-block {
  display: inline-block;
}
.small {
  display: block;
}
```

```
<img src="https://picsum.photos/100/100/"/>
<div class="inline-block">
  <img class="small" src="https://picsum.photos/100/50/"/>
  <img class="small" src="https://picsum.photos/100/50/"/>  
</div>
```

**第二种方法。**

使用 CSS`float`属性。[您可能想知道的关于 float 的所有信息都在这个 css-tricks 的帖子](https://css-tricks.com/all-about-floats/)中。

这就是最终的结果。

```
#big {
    float:left;
    margin-right:2px;
}
.small {
  display: block;
}
```

```
<img id="big" src="https://picsum.photos/100/100/"/>
<img class="small" src="https://picsum.photos/100/50/"/>
<img class="small" src="https://picsum.photos/100/50/"/>
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-01T00:06:54.343

如果只有 3 张图片，并且使用 html，则尝试左、中和右对齐，如下所示：

```
<img src="whatever you want" align=left height="whatever" width="whatever">
<img src="whatever you want" align=right height="whatever" width="whatever">
<img src="whatever you want" position:absolute; left:"whatever%"; top:"whatever%; height:"whatever px"; width:"whatever px";> 
```

您还必须将宽度和高度设置为足够小的尺寸，以便所有内容都适合空间，具体取决于您的屏幕分辨率。只需尝试将图像尺寸缩小到一个小尺寸并且可能会起作用。

# javascript - 使用 jQuery 的跨域请求（在 Python 中工作）

> ID：13654875
> 
> 赞同：0
> 
> 时间：2012-11-30T23:54:52.470
> 
> 标签：javascript, jquery, python, ajax, json

此 Python 代码工作正常

```
print 'foo'
params = {'memberId': '1'}
data = urllib.urlencode(params)
url = 'http://aaa.bbb.com/ccc/'
req = urllib2.Request(url, data, {'Content-Type': 'application/json'})
f = urllib2.urlopen(req)
response = f.read()

print '===>', response

response = eval(response.decode('unicode-escape'))   
f.close() 
```

我想知道相应的javascript代码是什么？我试过这个，警告“错误”。目前我在 ddd.bbb.com。Web 服务位于 aaa.bbb.com。我无法为此设置相对路径。

请告知如何配置跨域。谢谢。

```
jQuery.ajax({
                        url: 'http://aaa.bbb.com/ccc',
                        type: 'GET',
                        contentType: "application/json",
                        dataType: "json",
                        data: {'memberId':'1'},
                        success: function (data) {
                            alert("ok");
                        },
                        error: function () {
                            alert("error");
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:26:36.130

关于 Javascript 的“同源策略”以及如何解决它，大约有 1 万亿（这是我的技术估计 ;-)）其他 Stack Overflow 问题。我强烈建议检查一下。

作为一个快速总结，您的基本选项是：

1.  使用 JSONP（仅当 aaa.bbb.com 支持 JSONP 时才有效）
2.  让 aaa.bbb.com 将 ddd.bbb.com 添加到它的“安全列表”中（有一个更好的术语，但我忘记了）；如果您控制 aaa.bbb.com，这可能是您最好的选择
3.  如果您不能执行上述任何一项，请设置代理服务（仅 Apache 可以处理）将 ddd.bbb.com/someUrl 转发到 aaa.bbb.com，以便浏览器认为您正在访问自己的域，但实际上内容来自其他地方。

只是为了让您了解核心问题，其要点是浏览器不会让 evildomain.com 的代码访问 yourbank.com，作为安全预防措施。但是，浏览器将允许您从 yourbank.com 检索脚本，无论您的来源是什么，因此您可以使用称为 JSONP 的东西来利用它……但要使 JSONP 工作，yourbank.com 的所有者必须支持它（他们必须为您量身定制他们的脚本）。

如果 yourbank.com 明确表示“如果 evildomain.com 与我们混淆，那就太酷了”，浏览器也会让您访问 yourbank.com。他们通过将特殊文件放在他们网站上的特殊位置来做到这一点（我忘记了细节，但它们很容易查找）。

如果你不能做到这两个，你可以让你的 evildomain.com 服务器为你访问 yourbank.com。服务器不受与浏览器相同的限制，因此它们可以访问任何他们想要的站点。当它这样做时，它可以将它在那里找到的内容发回给你，这就是所谓的“代理”（通过 evildomain.com 到 yourbank.com，这是做代理的终点）。

希望这能澄清一点。

# parsing - 从 .bash_aliases 迁移到 ~/.ssh/config

> ID：13654876
> 
> 赞同：2
> 
> 时间：2012-11-30T23:55:02.067
> 
> 标签：parsing, ssh, vi, bash

这是我在这里的第一篇文章，所以请多多包涵……

在完全配置了我的 .bash_aliases 文件后，我发现了 .ssh/config 的惊人功能，并且由于我对编程很蹩脚，我正在寻找一种很好的方法来将 bash_aliases 文件中的连接详细信息解析到 ~/ .ssh/配置文件。

所以，深入细节，我的 bash_aliases 看起来像这样：

```
alias serverA='ssh -i ~/.ssh/serverA.key -o $SRVR_ALV user@serverAhostname'
alias serverB='ssh -i ~/.ssh/serverB.key -o $SRVR_ALV user@serverBhostname'
.... 
```

我在 $SRVR_ALV 中为 ServerAliveInterval 定义了一个变量。

我的意图是解析这个条目，同时摆脱那个丑陋的变量

```
Host serverA
HostName serverAhostname
IdentityFile ~/.ssh/serverA.key

Host serverB
..... 
```

您认为执行此操作的最佳方法是什么？我正在寻找一个不错的 bash 脚本，或者可能使用 vi 功能。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:06:55.637

一些 Perl 怎么样？

```
perl -ne "/^alias (.*)='ssh -i (.*) -o (.*) (.*)\@(.*)'/ and 
    print qq{Host \$1\nHostName \$5\nIdentityFile \$2\n\n}" < \
 ~/.bash_aliases 
```

如果您喜欢所看到的，请将其重定向到附加到`>> ~/.ssh/config`

**[更新]** - 对非 Perl 用户的解释：

`perl -ne`:`-e`表示，*'下一个参数是 ( **e** ) 执行的脚本'*。-n `means, '*run the given script once per line*' - so`-ne `can sort-of emulate`sed`。

perl 代码：

```
/^alias (.*)='ssh -i (.*) -o (.*) (.*)\@(.*)'/ and 
print qq{Host \$1\nHostName \$5\nIdentityFile \$2\n\n} 
```

读取：仅对于与 regexp 匹配的行`/^alias ../`，打印一个字符串（与 Perl`qq{...}`中的相同`"..."`），并且插值变量`"\$1"`等`"\$4"`是在 regexp 中捕获的结果。

`perl -ne`期望*输入*，它来自`< ~/.bash_aliases`.

# java - 使用 google-voice-java 将所有收件箱项目标记为已读

> ID：13654877
> 
> 赞同：1
> 
> 时间：2012-11-30T23:55:10.443
> 
> 标签：java, google-voice

我想使用这个谷歌语音 API 将我的所有消息标记为已读。下面的代码不起作用，有什么想法吗？

```
import java.io.IOException;
import java.util.Collection;

import com.techventus.server.voice.Voice;
import com.techventus.server.voice.datatypes.records.SMSThread;

public class voiceApplication {

    public static void main(String[] args) throws IOException {

        Info info = new Info();
        String userName = info.getUsername();
        String pass = info.getPassword();

        Voice voice = new Voice(userName, pass);

        Collection<SMSThread> smsThreads = voice.getSMSThreads(voice.getUnreadSMS());
        for (SMSThread message : smsThreads)
        {
            voice.markAsRead(message.getId());
        }
    }

} 
```

# asp.net-mvc - 修改 ViewModel 后 MVC4 HTML TextBoxFor 不工作

> ID：13654879
> 
> 赞同：7
> 
> 时间：2012-11-30T23:55:52.707
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个我真的不明白的问题。我有一个非常简单的模型，它有一个 List 作为公共成员。每当我的控制器在回发时从模型中删除一个元素时，TextBoxFor() HTML 帮助程序似乎都不会接受这些更改。这些助手似乎正在缓存一些东西，但我不能指望它。

可以在此处找到演示/复制：http: [//broken.azurewebsites.net](http://broken.azurewebsites.net)

# 复制品

1.  导航到[http://broken.azurewebsites.net](http://broken.azurewebsites.net)
2.  请注意使用基于零的值填充的 4 列值
3.  点击“测试”按钮回发我删除列表中第一项的页面
4.  注意“真实”值是正确的，并且 0 元素已被删除，但是这里的问题在于通过 TextBoxFor() 呈现的值。我无法弄清楚为什么当该元素不再存在时它仍然呈现 0。

* * *

**楷模**

```
public class ItemViewModel
{
    public string Description { get; set; }
    public decimal? Amount { get; set; }
}

public class TestViewModel
{
    public TestViewModel()
    {
        Items = new List<ItemViewModel>();
    }

    public List<ItemViewModel> Items { get; set; }
} 
```

**控制器**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new TestViewModel();

        for (var i = 0; i < 4; i++)
        {
            model.Items.Add(new ItemViewModel { Description = i.ToString(), Amount = i });
        }

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(TestViewModel model)
    {
        model.Items.RemoveAt(0);

        return View(model);
    }

} 
```

**看法**

```
@model Demo.Models.TestViewModel
@using (Html.BeginForm())
{
    <table>
        <thead>
            <tr><td>Description</td><td>Amount</td><td>Real-Description</td><td>Real-Amount</td></tr>
        </thead>
        <tbody>
            @for (var i = 0; i < Model.Items.Count; i++)
            {
                var ii = i;
                <tr>
                    <td>@Html.TextBoxFor(m => m.Items[ii].Description)</td>
                    <td>@Html.TextBoxFor(m => m.Items[ii].Amount)</td>
                    <td>@Model.Items[ii].Description</td>
                    <td>@Model.Items[ii].Amount</td>
                </tr>
            } 
        </tbody>
    </table>
    <button>Test</button>
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T17:41:10.940

如下更改您的帖子索引方法以获得所需的行为：

```
 [HttpPost]
    public ActionResult Index(TestViewModel model)
    {
       ModelState.Clear();     

       model.Items.RemoveAt(0);

       return View(model);
    } 
```

原因如下：

TextBoxFor 绑定到**ModelState 中的 post 值，**而不是**模型值**。因此，在您的应用程序中，当您点击测试按钮时，文本框将绑定到它们已有的值，并且即使在模型值更改后也不会在回发时更新。例如，如果第一行中的文本框显示为 0，并且即使在回发后它们仍将绑定到该值，并且基础模型的值为 1。这种行为背后的原因是验证。如果您期望文本框中有一个 int 并且用户输入“SomeTextValue”，则模型绑定器将无法绑定到该 int 属性，它将处于验证错误状态。然后，您会希望用户看到一个错误，指出*“SomeTextValue”不是整数。请输入一个整数*因为您希望用户输入的值在那里。

Rick Strahl 在这篇博文中完美地解释了它

[http://www.west-wind.com/weblog/posts/2012/Apr/20/ASPNET-MVC-Postbacks-and-HtmlHelper-Controls-ignoring-Model-Changes](http://www.west-wind.com/weblog/posts/2012/Apr/20/ASPNET-MVC-Postbacks-and-HtmlHelper-Controls-ignoring-Model-Changes)

和下面的品牌威尔逊：

[http://forums.asp.net/post/3688022.aspx](http://forums.asp.net/post/3688022.aspx)

# sql - 棘手/棘手的分析函数问题

> ID：13654881
> 
> 赞同：0
> 
> 时间：2012-11-30T23:56:07.513
> 
> 标签：sql, oracle

我有以下情况需要帮助

```
ID_Number Budget_Period Start_Date End_date Period_Type
   1 1 2007 年 2 月 12 日 2008 年 2 月 11 日 年度
   1 2 2008 年 3 月 15 日 2009 年 3 月 14 日 年度
   1 3 2009 年 4 月 15 日 2010 年 4 月 14 日 年度
   2 1 2010 年 8 月 18 日 2011 年 8 月 17 日 年度
   2 2 2011 年 9 月 19 日 2012 年 9 月 18 日 年度
```

我需要的是使给定 id 的开始日期和结束日期连续，以便给定 id_number ..so 的预算期间之间没有间隙，例如 ID_Number 1 ， Min(Start_date) 是 2/12/2007 和Max(End_date) 是 2010 年 4 月 14 日，因此每个预算期的数据在开始日期和结束日期之间应仅相隔 364 天，如下所示

所需输出

```
ID_Number Budget_Period Start_Date End_date Period_Type
   1 1 2007 年 2 月 12 日 2008 年 2 月 11 日 年度
   1 2 2008 年 2 月 12 日 2009 年 2 月 11 日 年度
   1 3 2010 年 2 月 12 日 2010 年 4 月 14 日 年度
   2 1 2010 年 8 月 18 日 2011 年 8 月 17 日 年度
   2 2 2011 年 8 月 18 日 2012 年 9 月 18 日 年度
```

这可以使用分析函数来完成吗？我无法使用我尝试过的查询获得所需的输出。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:38:16.160

if each range is to be 1 year minus a day then shouldn't the output be this?

```
SQL> select id_number, i+1 budget_period, start_date, end_date, 'Annual' period_type
  2    from (select id_number, min(start_date) start_date, max(end_date) end_date from a
  3           group by id_number)
  4         model
  5           partition by (id_number)
  6           dimension by (0 as i)
  7           measures(start_date, end_date, end_date ed)
  8           rules
  9           (start_date[for i from 1 to ceil(months_between(add_months(end_date[0],-12), start_date[0])/12)
 10                       increment 1] = add_months(start_date[0], 12*cv(i)),
 11            end_date[any] = least(ed[0], add_months(start_date[CV()], 12)-1)
 12           )
 13   order by 1,2;

 ID_NUMBER BUDGET_PERIOD START_DAT END_DATE  PERIOD
---------- ------------- --------- --------- ------
         1             1 12-FEB-07 11-FEB-08 Annual
         1             2 12-FEB-08 11-FEB-09 Annual
         1             3 12-FEB-09 11-FEB-10 Annual
         1             4 12-FEB-10 14-APR-10 Annual
         2             1 18-AUG-10 17-AUG-11 Annual
         2             2 18-AUG-11 17-AUG-12 Annual
         2             3 18-AUG-12 18-SEP-12 Annual

7 rows selected. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:01:54.480

不指定结束日期是可行的——如果下一条记录的开始日期是后天，那就多余了。

# mako - 在 mako 中使用 <%def%> 和 <%include%> 有什么区别？

> ID：13654885
> 
> 赞同：1
> 
> 时间：2012-11-30T23:56:34.827
> 
> 标签：mako

它们都可以让你将一些 mako 渲染的内容粘贴到另一个内容中。两者都可以让你传递参数。

两者之间有性能差异吗？一个哲学的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:24:51.160

def 用于在模板中定义函数，而 include 执行另一个文件。

mako 文档总结如下：

> 从另一个模板调用 a`<%def>`类似于使用 `<%include>`- 只是您调用的是模板中的特定函数，而不是整个模板。

（来自[http://docs.makotemplates.org/en/latest/defs.html](http://docs.makotemplates.org/en/latest/defs.html)）

当然，`<%include>`涉及到另一个文件，你可以`<%def>`从定义它的同一个文件中调用 a 。

# performance - 请解释这个 Symfony2 与 ZendFramework 2 的性能结果

> ID：13654886
> 
> 赞同：5
> 
> 时间：2012-11-30T23:56:37.557
> 
> 标签：performance, apache, symfony, doctrine-orm, zend-framework2

我们用 Doctrine2 对 Symfony2 进行基准测试，而用 Doctrine2 对 ZendFramework2 进行基准测试。

测试包括一个裸 ZF2 和 SF2 Hello World，用于基线 Vs。相同，但 Doctrine2 加载了一个简单的对象。我们使用 ab 并仅测量每秒的请求数和每个请求的时间。

在裸框架测试期间，Hello World ZF2 的性能比 SF2 好近 2 倍。

然而，当我们进行相同的测试但将 Doctrine2 添加到混合中时，结果是相反的。SF2+D2 的表现是 ZF2+D2 的 2 倍。

我们在 Symfony2 和 ZendFramework 方面都有内部技能，所以我们可以选择两者之一，而且我们不关心 RAM 的使用，因为我们总是可以获得更多的 RAM。但我们确实关心性能，我们需要帮助最好的工具。

一些想法： - 我们相信 S2 正在做某种缓存 - 我们相信 ZF2 Doctrine2 ORM 模块可能是原因 - 我们不确定在生产中使用哪种类型的缓存？APC?Xcache? 等等

```
Framework + Doctrine loading an object      
Concurrent:100 / Connections: 1000      
    Resp. T ms  Req. Sec
ZF2        60   16
S2         31   32

Framework + Doctrine loading an object      
Concurrent: 25 / Connections: 150       
    Resp. T ms  Req. Sec
ZF2         57  17
S2          30  32

======================

Framework Bare      
Concurrent: 100 / Connections: 1000     
    Resp. T ms  Req. Sec
ZF2         10.5    94
S2          15.3    65.36       

Framework Bare      
Concurrent: 25 / Connections: 150       
    Resp. T ms  Req. Sec
ZF2         10  98
S2          15.4    64 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T02:49:52.733

默认情况下，`DoctrineORMModule`集成没有活动的缓存。

您必须在配置中为您的映射设置缓存：

```
'doctrine' => [
    'driver' => [
        'orm_default' => [
            'class' => 'Doctrine\ORM\Mapping\Driver\DriverChain',
            'drivers' => [],
            'cache' => 'apc',
        ],
    ],
], 
```

默认缓存是[`array`](https://github.com/doctrine/DoctrineModule/blob/c246075a4a4d52c52ccd2cc7393c0b9bc2f94d47/src/DoctrineModule/Options/Driver.php#L57). 否则，每个请求都会解析注释和任何其他类型的映射。

由于我也是 ZF2-Doctrine2 集成的维护者，因此我可能也有兴趣了解有关此主题的更多信息。你有一个测试环境来展示吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:29:44.083

通过正确缓存操作码 (APC) 和 DB 请求（例如使用 Memcache），我会说 Synmfony 和 Zend 之间的区别将是微不足道的。

永远不要因为性能差异如此之小而选择框架。通过框架上的缓存和数据库改进，您将获得更多性能。

除非您正在构建财务实时应用程序，否则 10 或 20 毫秒的响应时间差异不算什么。网页的平均响应时间通常为 100 毫秒！

此外，将响应时间转换为“每秒请求数”是没有意义的，尽管我知道这在 PHP 基准测试中很常见。因为您的 Apache 不会按顺序处理请求（一个请求不会消耗 100% 的 CPU），所以同时到达的 5 个请求将在比一个请求的 5 倍时间还短的时间内得到处理。

正如 Ocramius 所说，您应该激活元数据缓存：

```
 $frontendOptions = array(
       'lifetime' => 7200, // seconds
       'automatic_serialization' => true
    );

    $backendOptions = array(
        'cache_dir' => APPLICATION_PATH_CACHE
    );

    $this->cache = Zend_Cache::factory('Core',
                                 'File',//Memcache is better
                                 $frontendOptions,
                                 $backendOptions);

    //ADD a metadata cache for DB, important for perf
    Zend_Db_Table_Abstract::setDefaultMetadataCache($this->cache); 
```

# ruby - 如何从哈希中获得正确的输出

> ID：13654889
> 
> 赞同：0
> 
> 时间：2012-11-30T23:56:42.253
> 
> 标签：ruby

我有一个像这样的哈希......

```
 scores = {:b3=>1000, :c3=>-1000}

  scores.each do |k,v|
    if v = 1000
      best_answer = k
    elsif v = -1000
      best_answer = k
    end
  end
  p 'BEST_ANSWER'
  p best_answer
  return best_answer 
```

我不断收到c3

best_answer 应该是 b3

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:09:02.520

首先，您需要从分配更改为比较：

不是`if v =`，而是`if v ==`

其次，当您达到“最佳答案”时，您可以返回 best_answer 并放弃其余的迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:03:42.157

您实际上使用的是赋值运算符而不是相等运算符。

更改`=`为`==`：

```
if v == 1000
  best_answer = k; break
elsif v == -1000
  best_answer = k; break
end 
```

你也想重构你的代码。

```
best_answer = scores.key(-1000) 
```

或者

```
best_answer = scores.min.first
p best_answer
#=> :b3 
```

# php - PHP：强制下载标题不会显示总大小和速度

> ID：13654890
> 
> 赞同：5
> 
> 时间：2012-11-30T23:56:48.520
> 
> 标签：php, download

每当我使用此脚本下载文件时，我都看不到下载时的总大小和速度……我想让它看起来更像“直接下载链接”。此脚本的目的是隐藏直接下载链接限制直接下载和其他下载行为，如机器人。想想 mediafire、rapidshare、megaupload 等。

我们现在拥有的脚本可以运行，但不会像您从正常下载链接下载时显示的那样显示，我将发布正在发生的事情的屏幕截图：
![在此处输入图像描述](../Images/0eacb498ff64aaef94d8189afb6915ac.png)

我希望此屏幕截图有所帮助，因为我已经在互联网上搜索了几个小时，但似乎找不到解决方案:(。

```
if (isset($_GET['file'])){
   $file = $_GET['file'];
   $path = '/home/user/domains/domain.com/files/upload/';
   $filepath = $path.$file;

   if (file_exists($filepath)){

    set_time_limit(0); // for slow connections

    header('Content-Description: File Transfer');
    header("Content-Disposition: attachment; filename=\"$file\"");
    header('Content-Type: application/octet-stream');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . filesize($filepath));
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Expires: 0');

    readfile($filepath); // send file to client 
   } 
   else{
    header($_SERVER["SERVER_PROTOCOL"]." 404 Not Found", true, 404); 
   }
  }else{
   header($_SERVER["SERVER_PROTOCOL"]." 404 Not Found", true, 404); 
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:37:03.373

是否使用 mod_deflate 或类似的东西在服务器级别压缩内容？

这已在此处得到解答： [使用 PHP 下载脚本发送正确的文件大小](https://stackoverflow.com/questions/1972642/sending-correct-file-size-with-php-download-script)

> “如果您使用 Zlib、mod_deflate 等压缩文件，Content-Length 标头将不准确，因此您在下载文件时最终会看到“未知大小”和“剩余时间未知”。”
> 
> “您可以使用适用的 .htaccess 文件中的以下行轻松为单个脚本禁用它：
> 
> SetEnvIfNoCase Request_URI ^/download.php no-gzip dont-vary 这里假定 download.php 位于服务器根目录路径中的下载脚本中（例如 www.crimsonbase.com/download.php）。（那是因为正则表达式是^/download.php。）”

另外，请注意您的脚本不安全。有人可以有效地为 _GET['file'] 发送以下 get 参数

```
../../../../../Documents/MyStuff 
```

它将完全覆盖您的 $path 限制。

建议删除路径中的任何 .. 引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T19:38:47.967

我今天遇到了类似的问题，我无法获得下载文件的总大小（下载进度）。

浏览器标头将“gzip”指示为内容类型，我可以通过以下 htaccess 行阻止服务器在 download.php 脚本上使用 gzip 来解决此问题：

> SetEnvIfNoCase Request_URI ^/download.php no-gzip dont-vary

# php - CURLOPT_HTTPHEADER 和 CURLOPT_USERPWD 的 PHP cURL 基本身份验证替代方案...？

> ID：13654892
> 
> 赞同：7
> 
> 时间：2012-11-30T23:56:52.060
> 
> 标签：php, authentication, curl, authorization, basic-authentication

是否有任何替代方法可以使用 CURLOPT_HTTPHEADER 和 CURLOPT_USERPWD 为 cURL PHP 提供基本身份验证？

我有一个超长密码，所以 CURLOPT_USERPWD 不能工作，因为它会截断 256 个字符。

```
curl_setopt($data, CURLOPT_USERPWD, $username . ":" . $password); 
```

出于安全原因，我想远离使用 CURLOPT_HTTPHEADER 。

```
curl_setopt($data, CURLOPT_HTTPHEADER, "Authorization: Basic " . base64_encode($username . ":" . $password)); 
```

有什么选择吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T23:59:57.057

是什么让您认为`CURLOPT_HTTPHEADER`出于安全原因而被禁用？

它接受一个数组而不是一个字符串。试试这个：

```
curl_setopt($data, CURLOPT_HTTPHEADER,
            array(
              "Authorization: Basic " . base64_encode($username . ":" . $password)
)); 
```

# sql - 将一个表中的所有行插入另一个不具有相似值的行？

> ID：13654897
> 
> 赞同：0
> 
> 时间：2012-11-30T23:57:54.080
> 
> 标签：sql, sql-server

我有两张桌子。一主一小。我只想将较小的所有行插入到主控中，在某个字段中没有相同的值。我尝试过的方法不起作用。还有一种方法可以指定行中的所有值而不是单独列出它们吗？

就像是...

```
Update Master
Set Master.[All Values] = Smaller.[All Values]
Inner join Smaller on Master.No = Smaller.No
where Master.No <> Smaller.No 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:35:57.870

问题似乎是您试图在同一列 (.No) 上进行等同和否定 - 这将永远不会返回任何行。我相信你的意思是在不同的专栏上否定。

此外，您需要为更新语句指定每个字段。这是我认为您正在寻找的示例：

```
CREATE TABLE [master] (a int, b int, c int)
CREATE TABLE [smaller] (a int, b int, c int)

INSERT INTO [master] (a, b, c) 
  VALUES (1, 0, 1), (2, 1, 2), (3, 1, 3), (4, 2, 4), (5, 3, 5), (6, 5, 6)
INSERT INTO [smaller] (a, b, c) 
  VALUES (3, 1, 3), (4, 0, 4), (5, 0, 5), (7, 8, 7), (8, 13, 8)

-- note values for 'b' on row 4, 5
SELECT * FROM [master] 

UPDATE [master] 
SET [master].b = [smaller].b, 
    [master].c = [smaller].c
FROM [smaller] INNER JOIN [master] 
  ON  [master].a = [smaller].a 
  AND [smaller].b <> [master].b

-- note values for 'b' on row 4, 5
SELECT * FROM [master] 

DROP TABLE [master] 
DROP TABLE [smaller] 
```

# ruby-on-rails - 按出现次数对对象数组进行排序并删除重复项

> ID：13654899
> 
> 赞同：1
> 
> 时间：2012-11-30T23:58:09.577
> 
> 标签：ruby-on-rails, ruby, arrays, sorting

`Model.find_by_tag_name("#foo")`返回一个数组：

*   25 条记录`tag_name = "#foo"`
*   40 条记录`tag_name = "#foobar"`
*   15 条记录`tag_name = "#foobarbaz"`

我想计算每个唯一`tag_name`出现的次数，按该计数对结果进行排序，然后消除重复项。结果顺序应该是：

1.  #foobar
2.  #foo
3.  #foobarbaz

目前我正在做这样的事情来获得唯一性和计数：

```
counter = Hash.new(0)
uniques = results.each{|tag| counter[tag.tag_name] += 1 }.uniq{|tag| tag.tag_name } 
```

以上使`counter => {"#foo"=>25, "#foobar"=>40, "#foobarbaz"=>15}`.

检索、重复数据删除和计算结果后，我可以采取哪些方法来按出现`uniques`的次数对生成的唯一标签（）数组进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:03:39.523

```
{"#foo"=>25, "#foobar"=>40, "#foobarbaz"=>15}.sort_by { |k, v| -v }.map(&:first) 
```

# c++ - 添加 cout 语句更正输出？

> ID：13654902
> 
> 赞同：0
> 
> 时间：2012-11-30T23:58:38.457
> 
> 标签：c++, cout

我现在多次遇到这个问题，想知道是否有人可以解释为什么会发生这种情况？在这里，我正在编写一个程序，将不同排序操作的运行时间输出到表中。当我添加“为什么这使它起作用” cout 语句时，它起作用了。没有它，它不会，并且缩进被丢弃。

```
 cout << "Size Selection    Insert    Bubble     Shell     Merge  Heapsort Quicksort       STL" << endl;

  for(int i = 50; i <= 6400; i *= 2) { // Prints table
    cout << "Why does this make it work" << endl;
    for(int j = 0; j < i; j++) { // Creates random vector
      v.push_back(rand());
    }

    vector<int>& arr = v;

    // arr = &v;
    cout << setw(4) << i;

    start = clock();
    SelectionSort(arr);
    cout << setw(10) << clock() - start;

    start = clock();
    InsertionSort(arr);
    cout << setw(10) << clock() - start;

    start = clock();
    BubbleSort(arr);
    cout << setw(10) << clock() - start;

    start = clock();
    ShellSort(arr);
    cout << setw(10) << clock() - start;

    start = clock();
    MergeSort(arr);
    cout << setw(10) << clock() - start;

    start = clock();
    HeapSort(arr);
    cout << setw(10) << clock() - start;

    start = clock();
    QuickSort(arr);
    cout << setw(10) << clock() - start;

    start = clock();
    sort(arr.begin(), arr.end());
    cout << setw(10) << clock() - start;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:34:45.350

据我所见，“为什么这使它起作用”行是唯一包含 endl 的行。因此，如果没有 endl，当您的文本到达窗口末尾时，控制台会换行（它不会真正改变行，它只会换行当前行）。

很可能看起来像新行的内容包含“上一个”行的一些剩余部分，因此文本看起来不像预期的那样。

使用 endl 您将更改为下一行，并且文本实际上是从开头开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:09:42.293

您的示例没有给您想要的答案的原因是，`std::ostream`不要将每个输出都发送到输出，而是会缓存数据并仅在其内部缓存已满或您调用时将其发送到输出`flush`，`std::endl`也会调用`flush`为你！并导致你看到你的输出。尝试替换它，`cout.flush()`你会发现一切都会好起来的！

# ruby-on-rails - 如何从 Thinking Sphinx 结果中过滤/排除子类？

> ID：13654903
> 
> 赞同：0
> 
> 时间：2012-11-30T23:58:41.317
> 
> 标签：ruby-on-rails, search, sphinx, thinking-sphinx

我有一个带有子类的（Rails）对象，但是当我使用 Thinking Sphinx 时，我只想搜索该父对象，并排除搜索子类。我正在为 Rails 使用典型的 STI 设置，并在父对象上定义了 :type 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:44:54.300

弄清楚了。在父对象上定义索引时，请设置以下内容：

`define index do`

`where "parentObjects.type is null"`

`end`

parentObjects 是父对象的表名。

# java - java继承删除子对象

> ID：13654904
> 
> 赞同：1
> 
> 时间：2012-11-30T23:58:44.460
> 
> 标签：java, loops

我完成了我正在做的任务。但我正在尝试对其进行一些修改

我想要做的是删除一条记录，我想使用迭代器来完成它。如果我使用 for each 循环，它会是这样的。

```
for(People someone : person)
    (someone instanceof Parent)
        ((Parent)someone.whatever 
```

你将如何使用迭代器来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:07:50.317

我认为这就是你要找的：

```
public static void main(String[] args) {
    List<Parent> myList = new ArrayList<Parent>();
    Iterator<Parent> iterator = myList.iterator();
    while (iterator.hasNext()) {
        Parent p = iterator.next();
        if (p instanceof Child) {
          //do something with the Child
        }
    }
} 
```

# matlab - 将单元格数组Matlab中的矩阵相乘？

> ID：13654910
> 
> 赞同：6
> 
> 时间：2012-11-30T23:59:33.920
> 
> 标签：matlab

我有一个`cell(1, n)`被调用的单元格数组`A`，每个单元格条目都包含一个`mxn`. 因此，实际上，我的元胞数组包含`n`size 的矩阵`mxn`。

然后我有另一个名为 的单元格数组`B`，其中存储有`n` `pxm`矩阵。

我需要做的是将两者相乘，如：`A[1] * B[1]`, `A[2] * B[2]`, ..., `A[n] * B[n]`。然后我需要将结果存储为它们自己的单个矩阵，并将它们总结起来。

矩阵对于乘法是保形的，但是因为 cell array`B`包含的行数少于 cell array `A`，所以当我使用时`cellfun(@times A, B, 'UniformOutput', true)`出现`unequal matrices`错误。

这似乎表明，`cellfun`当矩阵的行数和列数相等时，只能乘以单个单元格。

现在，我可以通过使用各种循环或调用`cell2mat`and`mat2cell`等等来执行此操作。我也可以将所有内容存储为矩阵数组而不是使用单元格......但是 - 我更喜欢使用单元格。

所以 - 我的问题是：有没有一种好方法可以做到这一点`cellfun`？我已经尝试过各种参数输入组合 - 但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:24:26.287

为此`cellfun`，只需定义您自己的匿名函数：

```
C = cellfun(@(a,b) a*b, A, B, 'UniformOutput', 0); 
```

现在，正如您提出的问题，您不能将 A*B 相乘，因为内部尺寸不一致。相反，我用 B*A 对此进行了测试，其中尺寸确实一致：p=1、m=3、n=3。

```
A = {eye(3), rand(3), magic(3)};
B = {[1 2 3], [3 5 1], [7 8 8]};

C = cellfun(@(a,b) b*a, A, B, 'UniformOutput', 0);

Cmat = cat(3, C{:});
S = sum(Cmat, 3); 
```

总和是通过连接`C`超过第三维的每个数组然后对其求和来完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T09:32:51.047

是的，参数需要具有相同的大小。来自`help cellfun`：

> A = cellfun(FUN, B, C, ...) 使用元胞数组 B, C, ... 的元胞内容作为输入参数计算 FUN。A 的第 (I,J,...) 个元素等于 FUN(B{I,J,...}, C{I,J,...}, ...)。B, C, ... 必须都具有相同的大小。

因此，要么使用循环，要么在调用之前从具有大量元素的单元格中删除额外的元素`cellfun`：

```
% assuming B has more elements than A
B(numel(A)+1:end) = []; 
```

# java - Java将int转换为小时和分钟

> ID：13654912
> 
> 赞同：7
> 
> 时间：2012-11-30T23:59:56.577
> 
> 标签：java, time

我有两个整数 1530 和 830，它们应该代表 15:30 和 8:30 的时间。将此数字转换为毫秒的最佳方法是什么？我正在考虑将它们转换为字符串和子字符串，但这似乎是一种非常低效的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T00:02:37.747

```
int mins = yourint % 100;
int hours = yourint / 100;  
long timeInMillis = mins * 60000L + hours * 360000L; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T00:02:12.097

```
int twentyFourHourTimeToMilliseconds(int time) {
    int hours = time / 100;
    int minutes = time % 100;
    return ((hours * 60) + minutes) * 60000;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T00:02:41.460

```
( x / 100 ) * 3600000L + (x % 100) * 60000L 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T11:20:07.393

或查看 java.util.concurrent.TimeUnit

# mysql - mysql自定义订单截止日期

> ID：13654917
> 
> 赞同：0
> 
> 时间：2012-12-01T00:00:08.967
> 
> 标签：mysql, sql-order-by

我有一张表，上面列出了一年中的所有十二个月。我想在底部订购当前月份，然后按时间顺序订购此 col，如果我现在运行查询；

十二月

一月

二月

...

九月

十一月

月份的格式为 MONTHNAME(STR_TO_DATE(U.month, '%m'))

我从我在这里找到的东西中改编了这个，但它只有助于确保当前月份最后列出任何想法？

```
 ORDER BY (CASE 
           WHEN Month = MONTH(NOW())
           THEN 1
           ELSE 0
       END ) ASC, month ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:19:06.600

如果您想在您的月份中坚持使用字符串值，您可以通过一些细微的修改来完成这项工作。您可能需要使用完整的月份名称，或者对所有月份使用 3 个字母的缩写（我不太确定您使用的是什么格式，因为您的示例显示了缩写，但您还提到`MONTHNAME()`了哪些输出完整的月份。这里它是如何工作的

对于 3 个字母的月份缩写：

```
ORDER BY (STR_TO_DATE(CONCAT(`month`, ' 01 2012'), '%b %d %Y')) ASC 
```

对于完整的月份名称：

```
ORDER BY (STR_TO_DATE(CONCAT(`month`, ' 01 2012'), '%M %d %Y')) ASC 
```

这会将月份值转换为日期（通过添加日期和年份）然后排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:25:48.230

```
ORDER BY (CASE 
          WHEN Month = MONTH(NOW())
          THEN 1
          ELSE 0
          END) DESC, month ASC 
```

或者：

```
ORDER BY (CASE 
          WHEN Month = MONTH(NOW())
          THEN 0
          ELSE 1
          END) ASC, month ASC 
```

要么应该做的伎俩。

# c++ - 模板类中定义的类，不明白怎么用，怎么定义

> ID：13654923
> 
> 赞同：0
> 
> 时间：2012-12-01T00:01:11.590
> 
> 标签：c++, templates, hashmap

我已经获得了需要编写代码的模板骨架。我从来没有真正处理过模板。这个模板的奇怪之处在于它要求我们在模板本身中编写一个类——不仅仅是类函数，而是一个全新的类。这是模板的代码（我在一些方法中插入了几行代码只是为了开始，它们对我的问题无关紧要）：

# 包括

```
template<class K, class V> class HMap
{
 private:
 // insert instance variables
 // insert constants (if any)

 public:
 class MapEntry
 {
    private:
        K key;
        V value;

    public:
    /**
     * Creates a MapEntry.
     * 
     * @param akey the key
     * @param avalue the value
     */
    MapEntry(K akey, V avalue)
    {
        key = akey;
        value = avalue;
    }

    /**
     * Returns the key for this entry.
     * 
     * @return the key for this entry
     */
    K getKey()
    {
        return key;
    }

    /**
     * Returns the value for this entry.
     * 
     * @return the value for this entry
     */
    V getValue()
    {
        return value;
    }

    /**
     * Sets the value for this entry.
     * 
     * @param newValue
     * @return the previous value for this entry
     */
    V setValue(V newValue)
    {
        V oldval;
        oldval = value;
        value = newvalue;
        return oldval;
    }
}; 
```

当您创建 HMap 模板类型的对象时，您将如何使用其中的 MapEntry 类？我对模板完全陌生，我有点迷茫，不知道从哪里开始。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:50:20.293

`HMap<Int, Double>::MapEntry`引用内部类。但是为什么要暴露内部结构呢？

也许这样做会更容易（我实现了对列表，而不是哈希，因为我很懒）

```
template <type Key, type Value>
class HashMap {
private:
struct entry { Key key, Value value};
std::list<entry> map;
public:
  HashMap() {};
  void add_element(Key key, Value value)
    {
      entry e = {.key = key, .value = value};
      map.push_back(e);
    };
} 
```

# java - Java 应用程序在从 90k+ 文件中读取数据后挂起并写入 excel

> ID：13654926
> 
> 赞同：2
> 
> 时间：2012-12-01T00:01:25.540
> 
> 标签：java

我正在开展一个项目，以从大量机器生成的文件（100k+ 总计 15gig）中提取一些数据，以每行一个文件生成 excel（2003）。在将每行提取的每个文件的数据写入excel（使用JExcel API）之前，我将内存中的所有文件加载到数组列表中。

一切正常，直到大约 90k 文件被读取并写入打开的工作簿，然后它停止工作。

在读取和提取所有文件后，我执行 workbook.write() 和 workbook.close()，因为当磁盘“挂起”时，没有任何内容被写入磁盘上的实际文件。

没有错误被抛出。有关解决此问题的任何想法。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:03:35.230

有两个可能的问题：

1.  Java 或 Excel 内存不足

    *   您可以通过在读取每个文件时写入工作簿来解决此问题，而不是将它们全部存储在内存中
2.  Excel 行数不足
    *   如果是这样的话，基本上你也无能为力了……

无论如何，为什么它需要直接进入Excel？最好将整个内容直接写入`CSV`Excel 知道如何以本机方式打开的文件...

# c++ - 为什么要显式删除构造函数而不是使其私有？

> ID：13654927
> 
> 赞同：112
> 
> 时间：2012-12-01T00:01:34.950
> 
> 标签：c++

何时/为什么要显式删除我的构造函数？假设原因是为了防止它的使用，为什么不直接制作呢`private`？

```
class Foo
{ 
  public: 
    Foo() = delete; 
}; 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-12-01T00:06:57.557

怎么样：

```
//deleted constructor
class Foo
{ 
  public: 
    Foo() = delete;     
  public:
    static void foo();
};

void Foo::foo()
{
   Foo f;    //illegal
} 
```

相对

```
//private constructor
class Foo
{ 
  private: 
    Foo() {}     
  public:
    static void foo();
};

void Foo::foo()
{
   Foo f;    //legal
} 
```

它们基本上是不同的东西。`private`告诉您只有类的成员才能调用该方法或访问该变量（当然还有朋友）。在这种情况下，`static`该类（或任何其他成员）的方法调用`private`类的构造函数是合法的。这不适用于已删除的构造函数。

样品[在这里](http://ideone.com/txFqBI)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-06-19T20:32:33.303

**为什么要显式删除构造函数？**

另一个原因：当我想确保使用初始化程序调用一个类时，我会
使用它。`delete`我认为这是一种非常优雅的方式，无需运行时检查即可实现这一目标。

C++ 编译器会为您执行此检查。

```
class Foo
{
   public:
       Foo() = delete;
       Foo(int bar) : m_bar(bar) {};
   private:
       int m_bar;
} 
```

这 -*非常简化*- 代码确保没有像这样的实例化：`Foo foo;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-26T08:31:49.160

我遇到了在 LLVM 的源代码中声明为“已删除”的默认 ctors（例如在 AlignOf.h 中）。相关的类模板通常位于一个名为“llvm::detail”的特殊命名空间中。我认为那里的全部目的是他们认为该课程仅作为助手课程。他们从未打算实例化它们；只是在其他类模板的上下文中使用它们，并带有一些在编译时运行的元编程技巧。

例如。有这个 AlignmentCalcImpl 类模板，它仅在另一个名为 AlignOf 的类模板中用作 sizeof(.) 运算符的参数。该表达式可以在编译时进行评估；并且不需要实例化模板 -> 那么为什么不声明默认的 ctor delete 来表达这个意图。

但这只是我的假设。

# sql-server-2008-r2 - SQL Server 2008 语言支持/编码

> ID：13654928
> 
> 赞同：1
> 
> 时间：2012-12-01T00:01:40.313
> 
> 标签：sql-server-2008-r2, windows-7-x64

当我完成 SQL Server 2008 安装时，我创建了一个新表并插入了新的测试记录并执行了一个查询。

因为我的语言不是英语，并且是从右到左书写的。结果窗口显示了其中一列，即如下文本：

```
RecordID    Name    Age CustID

1           ????    29     1

RecordID int(IDENTITY)autoincrement
Name nvarchar(50)
Age int
CustID int 
```

我将不胜感激任何帮助解决问题。

操作系统 WIN 7 x64，支持我的语言。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:20:01.930

Coulmns 应该是 nchar 或 nvarchar 来存储 UNICODE 字符。

数据库排序规则应该是 utf-8 ...

插入字符串时检查客户端的编码，例如，如果您从管理工作室的查询中加载值，则应在引号前放置**N**

```
N'£' 
```

从网络应用程序加载值，您应该检查页面编码和请求*阅读器*编码......等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:00:24.257

试试这个

设置 Sql Management Studio 如下：

这个指向[Msdn](http://msdn.microsoft.com/en-us/library/ms174596%28SQL.90%29.aspx)的链接，将向您展示排序规则应该用于您的本地化，例如**您的**语言，

然后运行管理工作室，展开你的数据库树。

选择您当前的数据库实例（您的数据库的名称）右键单击并选择`Properties`。

这将打开数据库属性窗口，

从这个窗口中选择`options`并相应地设置它。希望这会帮助你 。

如果它确实对您有用，请不要忘记标记为正确答案。

# javascript - 在浏览器中为自定义调试器创建自定义“控制台”对象以与 Web 控制台交互

> ID：13654930
> 
> 赞同：3
> 
> 时间：2012-12-01T00:02:08.960
> 
> 标签：javascript, debugging, firebug, google-chrome-devtools

浏览器提供的 Javascript 对象上的 Mozilla Developer Network[页面](https://developer.mozilla.org/en-US/docs/DOM/console)`console`显示：“ `Note: At least in Firefox, if a page defines a console object, that object overrides the one built into Firefox.`”。有没有办法覆盖这个对象，但仍然与浏览器的[Web 控制台](https://developer.mozilla.org/en-US/docs/Tools/Web_Console)交互？

一个用例是拦截`console.log()`调用并做一些额外的事情或采用不同的参数，例如日志分类，同时保留通过 Firebug 或 Google Chrome Inspect Element 等工具登录到控制台时提供的行号/文件信息。我能找到的最接近的匹配答案是：[Intercepting web browser console messages](https://stackoverflow.com/questions/6834981/interecepting-web-browser-console-messages)，但它不会通过自定义控制台对象与 Web 控制台进行交互，并使用自定义定义的调试服务，例如

```
debug.log = function(string, logLevel) {
    checkLogLevel(logLevel); // return false if environment log setting is below logLevel 
    var changedString = manipulate(string); 
    console.log(changedString); 
} 
```

不保留函数调用的行号/文件源`debug.log()`。一种选择是对`console.trace()`跟踪堆栈进行一些操作并向上爬上一层，但我对首先扩展感到好奇`console.log()`。我还想找到一个与现有 Web 控制台/工具（如 Firebug）一起使用的解决方案，而不是创建自定义浏览器扩展或 Firebug 插件，但如果有人知道现有的解决方案，我会对它们感兴趣。

显然是这样的：

```
 console = {
        log: function (string) {
            console.log('hey!');
        }
    }
    console.log('hey!'); 
```

将不起作用并导致无限递归。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:30:52.273

这很简单，只需在覆盖之前保存对（原始）控制台的引用：

```
var originalConsole = window.console;
console = {
    log: function(message) {
        originalConsole.log(message);
        // do whatever custom thing you want
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-14T22:18:58.460

你可以做：

```
var colors = {
  DEFAULT: '\033[m',
  RED: '\033[31m',
  GREEN: '\033[32m',
  BLUE: '\033[34m'
};
var print = {
  out: function(message) {
    console.log(message);
  },
  read: function(message) {
    prompt(message + ' ');
  },
  color: function(message, color) {
    if (color == 'RED') {
      console.log(`${colors.RED}${message}${colors.DEFAULT}`);
    }
    else if (color == 'GREEN') {
      console.log(`${colors.GREEN}${message}${colors.DEFAULT}`);
    }
    else if (color == 'BLUE') {
      console.log(`${colors.BLUE}${message}${colors.DEFAULT}`);
    }
    else {
      console.log(`${colors.RED}ValueError: \"${color}\" is not in the colors set.`);
    }
  }
}; 
```

您可以使用以下方法对其进行测试：

```
print.out('Hello World!');
print.read('Hello World!');
print.color('Hello World!', 'RED');
print.color('Hello World!', 'GREEN');
print.color('Hello World!', 'BLUE'); 
```

# ios - ios - 对我需要在 plist 中的哪个位置设置捆绑 ID 感到困惑

> ID：13654935
> 
> 赞同：0
> 
> 时间：2012-12-01T00:02:41.253
> 
> 标签：ios, plist

我知道我以前做过这个，但是我正在查看所有的 xcode 文件，但找不到该死的 plist 文件:) 有人可以提醒我如何找到它。

谢谢！很抱歉这么愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:07:10.500

只需在 Xcode 中单击您的项目，然后选择 Info 选项卡。

那就是您的应用程序 .plist 并且可以在其中设置 Bundle 标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:18:28.403

还有一件事，我想在这里补充一下，这样这种类型的问题就不会再遇到了。

无论何时，您似乎都无法从 XCode 在其左侧面板上显示的目录结构中查找文件，在这种情况下，最好只使用目录结构下方的搜索选项，如果您想要检查您的 plist 文件，在这种情况下，您只需要在搜索和 XCode 智能工作中编写它自己的“plist”，并将描述该特定文件。而且，如果您对文件名感到困惑，也是如此，只需在此处键入该文件名的一些关键字，它就会描述所有具有这些关键字的文件。（请记住，XCode 正在描述文件，然后使用搜索选项，如下所示。）

# linux-kernel - 关于是否在上半部分处理程序中禁用中断的进一步说明

> ID：13654938
> 
> 赞同：2
> 
> 时间：2012-12-01T00:02:46.930
> 
> 标签：linux-kernel, interrupt, interrupt-handling

最近我在网上看到一个帖子，上面写着：

> 在现代内核中，快速中断和慢速中断之间的大部分差异已经消失。剩下的只有一个：快速中断（使用 SA_INTERRUPT 标志请求的中断）在当前处理器上禁用所有其他中断的情况下执行。请注意，其他处理器仍然可以处理中断，尽管您永远不会看到两个处理器同时处理相同的 IRQ。

在其他在线文档中，我发现在处理任何给定中断时，至少在上半部分处理程序中，所有其他中断都被禁用的语句。这似乎与上面的引用不一致。我对单 CPU 臂系统的上下文最感兴趣。有人能告诉我这些观点中哪一个是正确的吗？我应该补充一点，我问的是 2.6.10 内核，这是所涉及的处理器上可用的最新版本。

同样，有助于理解 Linux 中“屏蔽”和“禁用”中断之间的区别会有所帮助。根据我的研究，屏蔽似乎是在中断控制器（PIC）中完成的，而禁用可以由 CPU 完成。进一步增加我的困惑的是，Linux 功能`disable_irq()`似乎与屏蔽有关，因此与中断控制器硬件有关，而不是在 ARM CPU 级别“禁用” `disable_irq_nosync()`。`enable_irq()`这个对吗？

最后，我在网上找到评论指出不能在上半部分中断处理程序中完成屏蔽。但是，如果是这种情况，是否意味着上面引用的函数调用不适合在 top-half 处理程序中使用？然而，我在网上看到了许多例子，展示了这些函数在上半部分处理程序中的使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:46:10.987

首先，您需要了解这个术语并不是具体的——一个群体称之为“A”，而另一些群体可能称之为“B”。

*一般来说*（并且对 ARM 等人知之甚少），当设置一个掩码以禁用某些中断（在位有效的基础上）同时使其他中断启用时，使用术语“掩码”。这种屏蔽自然倾向于以某种优先级顺序完成（在处理高优先级中断时阻塞较低优先级的中断），并且一些硬件平台在硬件中实现了一些优先级的东西。

在这种情况下，“禁用”往往是指阻塞*所有*中断，通常使用与屏蔽指令不同的指令。

在许多系统中，操作顺序是在中断发生时立即禁用中断（硬件可能会自动执行此操作），快速保存最小状态，然后重新调整掩码并重新启用，同时处理最近的中断。

# php - 值点显示在只读文本框中

> ID：13654941
> 
> 赞同：0
> 
> 时间：2012-12-01T00:03:05.030
> 
> 标签：php, jquery, html

我在下面有一个代码，它在一列中显示文本输入，在第二列中显示总分列，在最后一列中显示剩余标记。该表如下所示：

```
Marks Per Answer               Total Marks    Marks Remaining
(blank text input)               4              4
(blank text input)               6              6
(blank disabled text input)      4              4 
```

但我遇到的问题是，如果 READONLY 文本输入为空，它应该显示“Total Marks”列的值（上面示例中的只读文本输入为 4）。

此外，只读文本输入包含总分数，在“剩余分数”列下，这是不正确的，对于这一行，它应该显示 0。（至于只读文本输入包含值 4，所以如果我们减去4 在总标记下，它应该为禁用的文本输入行的剩余标记设为 0。）

所以当用户访问页面时，表格应该如下所示：

```
Marks Per Answer                                             Total Marks    Marks Remaining
(blank text input)                                                 4              4
(blank text input)                                                 6              6
(readonly text input = 4 (same value as under Total Marks))        4              0 
```

我的问题是，如何通过更改下面的 jquery 来解决上述两个步骤：

```
 $(function () {
        //alert("here");         
        var questions = $('#markstbl td[class*="_ans"]').length;

        //disable single entry

        for (var i=0;i<=questions;i++){   
        if ($("[class*=q" + i + "_mark]").length == 1) {
        //alert(t_marks);
        var t_marks = $("[class*=q" + i + "_ans]");
        var t_marksHtml = t_marks.html();
         t_marks.html("0");
         $("[class*=q" + i + "_mark]").val(t_marksHtml).attr('readonly', true);
        //$("[class*=q"+i+"_mark]").attr('readonly',true);
}                   
}

        //find each question set and add listeners
        for (var i = 0; i <= questions; i++) {
            $('input[class*="q' + i + '"]').keyup(function () {
                var cl = $(this).attr('class').split(" ")[1]
                var questionno = cl.substring(cl.indexOf('q') + 1, cl.indexOf('_'));
                var tot_marks = $(".q" + questionno + "_ans_org").val();
                //alert(tot_marks);
                var ans_t = 0;
                $("[class*=q" + questionno + "_mark]").each(function () {
                    var num = (isNaN(parseInt($(this).val()))) ? 0 : parseInt($(this).val());
                    ans_t += parseInt(num);
                });
                ans_t = tot_marks - ans_t;
                //alert(ans_t);
                //var fixedno = tot_marks;
                var ans = ans_t;
                var answerText = '<strong>' + ans + '</strong>';
                $(".q" + questionno + "_ans").val(ans);
                $(".q" + questionno + "_ans_text").html(answerText);
            });
        }
    }); 
```

下面是动态 HTML 表格：

```
<form id="Marks" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>
<?php
$row_span = array_count_values($searchQuestionId);
$prev_ques = '';
foreach($searchQuestionId as $key=>$questionId){

?>

<tr class="questiontd">
    <?php
    if($questionId != $prev_ques){
    ?>
    <td class="questionnumtd" name="numQuestion" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$questionId?> <input type="hidden" name="q<?php echo$questionId?>_ans_org" class="q<?php echo$questionId?>_ans_org" value="<?php echo$searchMarks[$key]?>"><input type="hidden" name="q<?php echo$questionId?>_ans" class="q<?php echo$questionId?>_ans" value="<?php echo$searchMarks[$key]?>"></td>
    <td class="questioncontenttd" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$searchQuestionContent[$key]?> </td>
    <?php
    }
    ?>
<td class="answertd" name="answers[]"><?php echo$searchAnswer[$key]?></td>
<td class="answermarkstd">
<input class="individualMarks q<?php echo$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<?php
    if($questionId != $prev_ques){
    ?>
<td class="totalmarkstd" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$totalMarks[$key]?></td>
<td class="noofmarkstd q<?php echo$questionId?>_ans_text"  q_group="1" rowspan="<?php echo$row_span[$questionId]?>"><?php echo"<strong>".$searchMarks[$key]."</strong>"?></td>
<?php
    }
    ?>
</tr>
<?php
$prev_ques = $questionId;
}
?>
</tbody>
</table>
</form> 
```

目前在 jquery 函数中，我正在尝试使用 t_marks 变量来显示文本输入中的值，但是当我警告 t_marks 时没有显示任何内容

**更新：**

完整的 HTML：

```
<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>

<tr class="questiontd">
        <td class="questionnumtd" name="numQuestion" rowspan="2">1 <input type="hidden" name="q1_ans_org" class="q1_ans_org" value="5"><input type="hidden" name="q1_ans" class="q1_ans" value="5"></td>
    <td class="questioncontenttd" rowspan="2">Here are 2 answers </td>
    <td class="answertd" name="answers[]">B</td>
<td class="answermarkstd">
<input class="individualMarks q1_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<td class="totalmarkstd" rowspan="2">5</td>
<td class="noofmarkstd q1_ans_text"  q_group="1" rowspan="2"><strong>5</strong></td>
</tr>

<tr class="questiontd">
    <td class="answertd" name="answers[]">D</td>
<td class="answermarkstd">
<input class="individualMarks q1_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
</tr>

<tr class="questiontd">
        <td class="questionnumtd" name="numQuestion" rowspan="1">2 <input type="hidden" name="q2_ans_org" class="q2_ans_org" value="5"><input type="hidden" name="q2_ans" class="q2_ans" value="5"></td>
    <td class="questioncontenttd" rowspan="1">Here is a single answer </td>
    <td class="answertd" name="answers[]">True</td>
<td class="answermarkstd">
<input class="individualMarks q2_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<td class="totalmarkstd" rowspan="1">5</td>
<td class="noofmarkstd q2_ans_text"  q_group="1" rowspan="1"><strong>5</strong></td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:31:20.787

所以我认为这应该是你所需要的：

```
 if ($("[class*=q" + i + "_mark]").length == 1) {
        //alert(t_marks);
        var t_marks = $("[class*=q" + i + "_ans]");
        var t_marksHtml = t_marks.html();
        t_marks.html("0");
        $("[class*=q" + i + "_mark]").val(t_marksHtml).attr('readonly', true);
        //$("[class*=q"+i+"_mark]").attr('readonly',true);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:18:39.160

这可能会有所帮助：

```
$("[class*=q"+questionno+"_mark]").each(function(){ 
```

搜索名为的类`q[X]_mark`

这条线

```
<input class="individualMarks q<?php echo$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" /> 
```

以这种方式编写课程：

```
q[X]_mark_0 
```

我不确定这是否是您的问题，但如果不正确，我会继续寻找。

# objective-c - AFNetworking + 多个 NSOperationQueues + 进度

> ID：13654942
> 
> 赞同：0
> 
> 时间：2012-12-01T00:03:11.373
> 
> 标签：objective-c, uitableview, afnetworking, uiprogressview

我有一个正在开发的应用程序，它有一个 UITableView。每个单元格都有一个下载按钮，该按钮应该下载与该单元格相关的多个文件。我希望能够跟踪正在下载单元文件的每个队列的进度。以前有没有人有过这种任务的经验，你能给我指一个关于如何完成这个任务的教程吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:07:32.713

您可以尝试将 enqueueBatchOfHTTPRequestOperationsWithRequests 附加到每个单元格。

# c# - 如何准确模拟按键？

> ID：13654944
> 
> 赞同：0
> 
> 时间：2012-12-01T00:03:15.900
> 
> 标签：c#, wpf, input, simulate

如何将按键和鼠标点击发送到应用程序，就好像它们实际上来自键盘和鼠标一样，即如何完全模拟用户输入？我希望这将涉及随机化按键被按住的间隔、引发事件等，而不是使用`System.Windows.Forms.SendWait`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:15:22.070

感谢 M.Babcock 的建议，我花了更多时间搜索 SO，最终遇到了[Widows Input Simulator](http://inputsimulator.codeplex.com/)。这正是我需要的。

# ruby-on-rails - Rails MIME::Types.type_for(photoshop_1354320001.psd) - 找不到 MIME 类型？

> ID：13654950
> 
> 赞同：0
> 
> 时间：2012-12-01T00:03:53.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip

我正在使用 Rails 3、Paperclip(3.3.0)、aws-sdk (1.7.1)。

我的回形针附件安全地存储在 S3 上。

**附件.rb**

```
 has_attached_file :attachment,
    :storage => :s3,
    :s3_credentials => "#{Rails.root}/config/s3.yml",
    :s3_protocol => 'https',
    :s3_permissions => :private,  # Sets the file, not the folder as private in S3
    :use_timestamp => false,
    :default_style => :original, # NEEDS to be original or download_url method below wont work
    :default_url => '/images/:attachment/default_:style.png',
    :path => "/:rails_env/private/s/:s_id/uuploaded_files/:basename.:extension" 
```

为了下载文件，我生成了一个安全 URL，如下所示：

```
 def authenticated_url(style = nil, expires_in = 1.hour)
    mime_type = MIME::Types.type_for(self.attachment_file_name)[0]
    attachment.s3_object(style).url_for(:read, :secure => true, :response_content_type => mime_type.to_s, :expires => expires_in).to_s
  end 
```

问题在于 PSD：这是返回空的：

```
Rails MIME::Types.type_for('photoshop_1354320001.psd') 
```

在代码中它看起来像：

```
mime_type = MIME::Types.type_for(self.attachment_file_name)[0] 
```

它适用于其他文件，但不适用于 PSD。知道为什么以及如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T02:43:58.250

当然。MIME::Types 允许您指定自定义类型。

将其粘贴到初始化程序中

```
# Not quite sure what the appropriate MIMEtype for PSDs are,
# but this is the gist of it.
# .PSB is a larger version of .PSD supporting up to 300000x300000 px
psd_mime_type = MIME::Type.new('image/x-photoshop') do |t|
    t.extensions  = %w(psd psb)
    t.encoding    = '8bit'
end

MIME::Types.add psd_mime_type 
```

现在`MIME::Types.type_for "test.psd"`应该给你`"image/x-photoshop"`。

# ruby-on-rails - 将现有记录添加到 has_many ：通过关系

> ID：13654951
> 
> 赞同：3
> 
> 时间：2012-12-01T00:03:54.080
> 
> 标签：ruby-on-rails, activerecord, has-many-through

我正在构建一个字典应用程序，其中我有一些使用连接模型链接到一些单词的概念。我有一个表格来编辑每个概念，我可以在其中编辑它的单词，向它添加新单词或将现有单词与之关联。

我正在使用`accepts_nested_attributes_for`and `update_attributes`，但这仅适用于已经关联的单词或新创建的单词。对于以前未关联的现有单词，`ActiveRecord::RecordNotFound (Couldn't find Word with ID=4 for Concept with ID=1000)`当 ActiveRecord 在连接模型上运行选择时，我会收到这样的错误。

这是我的模型：

```
class Word < ActiveRecord::Base
  attr_accessible :notes, :text, :grammar_tag_list

  has_many :semantic_relations, :dependent => :destroy
  has_many :concepts, :through => :semantic_relations
end

class Concept < ActiveRecord::Base
  attr_accessible :meaning_tag_list, :words_attributes

  has_many :semantic_relations, :dependent => :destroy
  has_many :words, :through=> :semantic_relations, :order => 'knowledge_id ASC'

  accepts_nested_attributes_for :words, :reject_if => lambda { |w| w[:text].blank? }
end

class SemanticRelation < ActiveRecord::Base
  belongs_to :word, :inverse_of => :semantic_relations
  belongs_to :concept, :inverse_of => :semantic_relations
end 
```

我已经在我的概念控制器中使用以下方法（之前调用它`update_attributes`）来管理它，但这似乎是一种非常肮脏的方法。没有任何适当的方法可以实现这一目标吗？

```
def check_words
  current_ids = @concept.word_ids
  new_ids = params[:concept][:words_attributes].map do |w|
    id = w[1][:id].to_i
    unless id == 0
      unless current_ids.include? id
        id
      end
    end
  end
  @concept.word_ids = current_ids + new_ids unless new_ids.blank?
end 
```

# java - 如何将文本渲染到位图并绘制它

> ID：13654964
> 
> 赞同：3
> 
> 时间：2012-12-01T00:04:46.057
> 
> 标签：java, android, opengl-es, drawtext, text-rendering

我是 android 新手，我的小组目前正在使用 opengl es 2.0 使用 GlSurfaceView 创建一个图形应用程序。

我们最近在绘图上显示了网格和刻度线，现在我被分配了实现数字刻度并将 x 和 y 轴标记为“X”和“Y”的任务。

[![在此处输入图像描述](../Images/b16a2e675299cf680de07f43336cfc4d.png)](https://i.stack.imgur.com/nE2Jk.png)

经过大量研究后，我决定通过将一串字符渲染为位图来实现这一点。我在实现这一目标时遇到了很多问题。我了解基本概念。我知道我需要字母数字字符“0123456789”和“XY”和“-”（用于 -x 和 -y 刻度）。[我已经看到了许多不同的例子，并在这里](https://stackoverflow.com/questions/1339136/draw-text-in-opengl-es-android)广泛尝试遵循 JVitella 的例子

我开始掌握这个概念，但就我的字符串而言，我知道我有 13 个字符，那么我的位图应该有多大？

同样在 Jvitelas 示例中，我对代码感到目瞪口呆：

```
Drawable background = context.getResources().getDrawable(R.drawable.background); 
```

我不明白到底发生了什么，当我编写代码时，我在上下文中收到语法错误。

对于我的应用程序，我知道我需要将字符串保存到一个位图中，就像这样。我会创建一个位图，但它应该有多大？然后我从位图和 canvas.drawText 创建一个画布到位图中。

```
 [ 0 1 2 3 4 ]
  | 5 6 7 8 9 |
  [ X Y Z     ] 
```

基本上我在问：

*   如何实现上面的以下位图？
*   我将如何从位图中绘制单个数字？
*   我将如何绘制多于一位的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:23:34.873

你问了很多问题，但我会试着回答几个：

*   > 那么我的位图应该有多大？

    这完全取决于您，具体取决于您希望文本的清晰程度。您可以为每个可以很好缩放的字符分配一个具有数百个像素的巨大位图，或者分配一个分辨率有限的非常小的位图。我会说你想要的任何“字体大小”，为每个字符分配至少那么多像素的高度。因此，如果您想绘制字体大小为“20”的东西，那么您可能需要一个 5x20 x 3x20 或 100x60 的位图。

*   > 我将如何从位图中绘制单个数字？

    您将在要绘制字母的地方使用 opengl 绘制一个四边形，然后使用该四边形的纹理坐标来选择一个字母。

    例如，如果我想画一个 X，那么你在屏幕上画一个四边形，并将它的 texcoords 从 (0,0) 分配到 (0.2, 0.33)，它选择纹理的左 1/5 和底部纹理的 1/3。您将看到像这样的框如何与纹理中“X”的位置对齐。

*   > 我将如何绘制多于一位的数字？

    您只需在彼此旁边绘制两个独立的个位数。

* * *

如果您在这里的唯一目标是在 Android 中绘制文本，那么只使用`FrameLayout`, 并`TextViews`在`GLSurfaceView`. OpenGL 不是为文本设计的，这使得它有些麻烦。

# hadoop - 如何在两个map reduce作业之间传递变量

> ID：13654965
> 
> 赞同：3
> 
> 时间：2012-12-01T00:04:55.907
> 
> 标签：hadoop, mapreduce, hdfs

我已经链接了两个 Map reduce 工作。Job1 将只有一个减速器，我正在计算一个浮点值。我想在 Job2 的减速器中使用这个值。这是我的主要方法设置。

```
public static String GlobalVriable;
public static void main(String[] args) throws Exception {

        int runs = 0;
        for (; runs < 10; runs++) {
            String inputPath = "part-r-000" + nf.format(runs);
            String outputPath = "part-r-000" + nf.format(runs + 1);
            MyProgram.MR1(inputPath);
            MyProgram.MR2(inputPath, outputPath);
        }
    }

    public static void MR1(String inputPath)
            throws IOException, InterruptedException, ClassNotFoundException {

        Configuration conf = new Configuration();
        conf.set("var1","");
        Job job = new Job(conf, "This is job1");
        job.setJarByClass(MyProgram.class);
        job.setMapperClass(MyMapper1.class);
        job.setReducerClass(MyReduce1.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(FloatWritable.class);
        FileInputFormat.addInputPath(job, new Path(inputPath));
        job.waitForCompletion(true);
        GlobalVriable = conf.get("var1"); // I am getting NULL here
    }

    public static void MR2(String inputPath, String outputPath)
            throws IOException, InterruptedException, ClassNotFoundException {

        Configuration conf = new Configuration();
        Job job = new Job(conf, "This is job2");
        ...
    }

    public static class MyReduce1 extends
        Reducer<Text, FloatWritable, Text, FloatWritable> {

    public void reduce(Text key, Iterable<FloatWritable> values, Context context)
            throws IOException, InterruptedException {

        float s = 0;
        for (FloatWritable val : values) {
            s += val.get();
        }

        String sum = Float.toString(s);
        context.getConfiguration().set("var1", sum);
    }
} 
```

如您所见，我需要多次迭代整个程序。我的 Job1 正在从输入中计算一个数字。由于它只是一个数字和很多迭代，我不想将它写入 HDFS 并从中读取。有没有办法共享在 Myreducer1 中计算的值并在 Myreducer2 中使用它。

更新：我尝试使用 conf.set 和 conf.get 传递值。该值没有被传递。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T21:24:11.330

这是通过计数器传回浮点值的方法...

首先，在第一个 reducer 中，通过乘以 1000 将浮点值转换为 long（例如，以保持 3 位精度）并将结果放入计数器中：

```
public void cleanup(Context context) {

    long result = (long) (floatValue * 1000);
    context.getCounter("Result","Result").increment(result); 

} 
```

在驱动程序类中，检索长值并将其转换回浮点数：

```
public static void MR1(String inputPath)
        throws IOException, InterruptedException, ClassNotFoundException {

    Configuration conf = new Configuration();
    Job job = new Job(conf, "This is job1");
    job.setJarByClass(MyProgram.class);
    job.setMapperClass(MyMapper1.class);
    job.setReducerClass(MyReduce1.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(FloatWritable.class);
    FileInputFormat.addInputPath(job, new Path(inputPath));
    job.waitForCompletion(true);

    long result = job.getCounters().findCounter("Result","Result").getValue();
    float value = ((float)result) / 1000;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T01:20:18.973

您可以为此使用[ZooKeeper 。](http://zookeeper.apache.org/)它非常适合像这样的任何工作间协调或消息传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T00:27:00.360

您不能只更改 to 的返回类型`MR1`（`int`或任何适当的数据类型）并返回您计算的数字：

```
 int myNumber = MyProgram.MR1(inputPath); 
```

然后添加一个参数`MR2`并使用您计算的数字调用它：

```
 MyProgram.MR2(inputPath, outputPath, myNumber); 
```

# sql - MySQL / Hibernate 连接太多错误

> ID：13654969
> 
> 赞同：0
> 
> 时间：2012-12-01T00:05:43.597
> 
> 标签：sql, hibernate

使用 Hibernate 构建一个非常简单的数据库，但请注意，我经常收到 Glassdoor 服务器错误，告诉我“连接太多”。

我认为这是因为我在更新/添加/删除数据库项目时没有正确关闭我的连接。

这是我在 updateEntry.jsp 中所做的一个示例——任何明显的问题？如果没有，我可以发布我的 removeEntry.jsp 和 newEntry.jsp：

```
 <%@page import="java.util.Date" %>
 <%@page import="org.hibernate.Session" %>
 <%@page import="org.hibernate.SessionFactory" %>
 <%@page import="org.hibernate.Transaction" %>
 <%@page import="org.hibernate.cfg.Configuration" %>
 <%@page import="java.util.Date" %>
 <%
  String nId = request.getParameter("pID");
  String naddress = request.getParameter("pAddress");
  String nstatus = request.getParameter("pStatus");
  String nassigned = request.getParameter("pAssigned");
  String nnote = request.getParameter("pNote");

        if (!naddress.equals("undefined"))
        {
            // This step will read hibernate.cfg.xml and prepare hibernate for use
            org.hibernate.SessionFactory sessionFactory1 = new org.hibernate.cfg.Configuration().configure().buildSessionFactory(); 
            org.hibernate.Session session1 = sessionFactory1.openSession();

            org.hibernate.Query query1 = session1.createQuery("update Leads set Address = :naddr where Id = :nid");
            query1.setParameter("nid", nId);
            query1.setParameter("naddr", naddress);
            query1.executeUpdate();
            //out.println("Update successfully with: " + naddress);
            // Actual contact insertion will happen at this step
            session1.flush();
            session1.close();
        }
        if (!nstatus.equals("undefined"))
        {   
            // This step will read hibernate.cfg.xml and prepare hibernate for use
            org.hibernate.SessionFactory sessionFactory2 = new org.hibernate.cfg.Configuration().configure().buildSessionFactory();
            org.hibernate.Session session2 = sessionFactory2.openSession();

                org.hibernate.Query query2 = session2.createQuery("update Leads set Status = :nstatus where Id = :nid");
                query2.setParameter("nid", nId);
                query2.setParameter("nstatus", nstatus);
                query2.executeUpdate();
                //out.println("Update successfully with: " + nstatus);
                // Actual contact insertion will happen at this step
                session2.flush();
                session2.close();
        }
        if (!nassigned.equals("undefined"))
        {
            // This step will read hibernate.cfg.xml and prepare hibernate for use
            org.hibernate.SessionFactory sessionFactory3 = new org.hibernate.cfg.Configuration().configure().buildSessionFactory();
            org.hibernate.Session session3 = sessionFactory3.openSession();
            org.hibernate.Query query3 = session3.createQuery("update Leads set Assigned = :nassigned where Id = :nid");
            query3.setParameter("nid", nId);
            query3.setParameter("nassigned", nassigned);
            query3.executeUpdate();
            //out.println("Update successfully with: " + nassigned);
            // Actual contact insertion will happen at this step
            session3.flush();
            session3.close();
        }
        if (!nnote.equals("undefined"))
        {
            // This step will read hibernate.cfg.xml and prepare hibernate for use
            org.hibernate.SessionFactory sessionFactory4 = new org.hibernate.cfg.Configuration().configure().buildSessionFactory();
            org.hibernate.Session session4 = sessionFactory4.openSession();
            org.hibernate.Query query4 = session4.createQuery("update Leads set Notes = :nnote where Id = :nid");
            query4.setParameter("nid", nId);
            query4.setParameter("nnote", nnote);
            query4.executeUpdate();
            //out.println("Update successfully with: " + nnote);
            // Actual contact insertion will happen at this step
            session4.flush();
            session4.close();
        }
 %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:57:07.710

您不应该在 JSP 中初始化休眠，您只需在上下文启动时初始化一次。

通常，您会将休眠工厂初始化放在上下文初始化之上，然后您应该在每个请求开始时从工厂获取一次会话。

```
@WebListener
public class HibernateListener implements ServletContextListener {
    public static final String ENTITY_MANAGER = "entity.manager";

    public void contextInitialized(ServletContextEvent evt) {
        SessionFactory sessionFactory = new Configuration()
                .configure().buildSessionFactory();
        evt.getServletContext()
                .setAttribute(ENTITY_MANAGER, sessionFactory);
    }

    public void contextDestroyed(ServletContextEvent evt) {
        SessionFactory sessionFactory = (SessionFactory) evt.getServletContext()
                .getAttribute(ENTITY_MANAGER);
        sessionFactory.close();
    }

} 
```

然后你可以让会话从 servletContext 中选择 entityManager。

```
<% SessionFactory factory =(SessionFactory) session.getServletContext()
      .getAttribute(HibernateListener.ENTITY_MANAGER); %> 
```

我认为你应该仔细阅读[Hibernate 快速入门指南](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/)

# ruby-on-rails - 如何格式化 YAML 以指定使用 yaml_db gem 填充的模型

> ID：13654980
> 
> 赞同：0
> 
> 时间：2012-12-01T00:07:23.907
> 
> 标签：ruby-on-rails, database, model, yaml, populate

我对此很陌生，所以这可能很明显，我错过了一些东西。如果我在 .yml 文件中有一些数据，我想使用 yaml_db 填充数据库。它如何知道要填充数据的模型？我是在模型之后命名文件（例如填充人员，person.yml）还是应该将数据嵌套在模型名称下（例如人员：alan：等），还是其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:13:49.537

感谢 normalocity 的建议。对于具有名称的 Human 模型，填充 4 个人将具有如下 YAML：

```
---
humans:
  columns:
  - id
  - name
  records:
  - - 1
    - "Billy"
  - - 2
    - "Joey"
  - - 3
    - "Sara"
  - - 4
    - "Jess" 
```

# sqlite - SQLite CASE/WHEN 语句

> ID：13654982
> 
> 赞同：2
> 
> 时间：2012-12-01T00:07:31.670
> 
> 标签：sqlite, triggers, case

这是我的 CASE/WHEN 声明。但正如您所见，我收到此错误。我不知道为什么。我想做的就是检测 MAJKA 字段中的某些内容何时发生更改。因此，如果 MAJKA 列的其他一些字段为空，请不要触摸它们，而是将值更改为 MAJKA 列不为空的那些字段的新值。

```
SQL Error: near "UPDATE": syntax error  <CREATE TRIGGER [test] 
AFTER UPDATE OF [MAJKA]  
ON [unos_golub] 
FOR EACH ROW 
BEGIN 

SELECT majka,
CASE WHEN majka=''

THEN
(UPDATE unos_golub SET broj_goluba=NEW.majka WHERE broj_goluba=OLD.majka)

ELSE
(UPDATE unos_golub SET broj_goluba=NEW.majka WHERE broj_goluba=OLD.majka
UPDATE unos_golub SET majka=NEW.majka WHERE majka=OLD.majka)
END

FROM unos_golub; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:15:35.303

您将数据操作 (DML) 语句放在需要返回值的表达式的地方。考虑：

```
SELECT majka,
CASE WHEN majka=''

THEN
'it is empty'

ELSE
'it is not empty'

END 
```

这将为您提供一列，其中的值为“它是空的”或“它不是空的”，具体取决于上一列中的值。

您不能将 DML 语句放在 SQL 中的那个位置—— DML 语句不是带有值的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:57:31.180

SQLite 没有有条件地执行命令的通用机制。但是，在触发器中，您可以`WHEN`对整个触发器使用条件：

```
CREATE TRIGGER test_for_broj_goluba
AFTER UPDATE OF majka ON unos_golub
BEGIN
    UPDATE unos_golub SET broj_goluba=NEW.majka WHERE broj_goluba=OLD.majka;
END;

CREATE TRIGGER test_for_majka
AFTER UPDATE OF majka ON unos_golub
WHEN NEW.majka <> ''
BEGIN
    UPDATE unos_golub SET majka=NEW.majka WHERE majka=OLD.majka;
END; 
```

（第`UPDATE`一个在两种情况下都是相同的，因此不需要`WHEN`.）

# php - 如何在 Wordpress (PHP) 中添加类别列表

> ID：13654989
> 
> 赞同：0
> 
> 时间：2012-12-01T00:08:01.467
> 
> 标签：php, wordpress

我在 Google 上搜索可以在我的 Wordpress 博客上显示类别的简单 php 代码。我设法删除了该行，但我无法再次找到它。我只能找到存档的代码，这里是：

```
<?php wp_get_archives('type=monthly&limit=12'); ?> 
```

现在我怎样才能得到它的类别？

因此，如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:10:54.553

这就是您要查找的内容： [http](http://codex.wordpress.org/Template_Tags/wp_list_categories) ://codex.wordpress.org/Template_Tags/wp_list_categories ？

# php - 处理 RESTful url 的 PHP

> ID：13654990
> 
> 赞同：7
> 
> 时间：2012-12-01T00:08:16.163
> 
> 标签：php, url, rest, mod-rewrite, query-string

我无法掌握处理 RESTful url 的最正确方法。

我有这样的网址：

```
http://localhost/products 
http://localhost/products/123
http://localhost/products/123/color 
```

起初：

```
http://localhost/index.php?handler=products&productID=123&additional=color 
```

至于现在我正在使用 mod_rewrite：

```
RewriteRule ^([^/]*)([/])?([^/]*)?([/])?(.*)$ /index.php?handler=$1&productID=$3&additional=$5 [L,QSA] 
```

然后我将 index.php 中的请求拼凑在一起，例如：

```
if ($_GET['handler'] == 'products' && isset($_GET['productID'])) {
   // get product by its id.
} 
```

我已经看到一些人将 GET 查询创建为一个字符串，例如：

```
if ($_GET['handler'] == 'products/123/color') 
```

然后，例如，您是否使用正则表达式从查询字符串中获取值？

这是处理这些网址的更好方法吗？这些不同方法的优缺点是什么？有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T00:21:55.470

您可以使用不同的方法，而不是使用 apache 重写匹配所有参数，您可以使用 preg_match 匹配 PHP 中的完整请求路径。应用 PHP 正则表达式，所有参数将被移动到`$args`数组中。

```
$request_uri = @parse_url($_SERVER['REQUEST_URI']);
$path = $request_uri['path'];
$selectors = array(
     "@^/products/(?P<productId>[^/]+)|/?$@" => 
            (array( "GET" => "getProductById", "DELETE" => "deleteProductById" ))
);

foreach ($selectors as $regex => $funcs) {
    if (preg_match($regex, $path, $args)) {
        $method = $_SERVER['REQUEST_METHOD'];
        if (isset($funcs[$method])) {
            // here the request is handled and the correct method called. 
            echo "calling ".$funcs[$method]." for ".print_r($args);
            $output = $funcs[$method]($args);
            // handling the output...
        }
        break;
     }
} 
```

这种方法有很多好处：

*   您无需对正在开发的每个 REST 服务进行重写。我喜欢重写，但在这种情况下，您需要很大的自由度，并且每次部署/维护新服务时，使用重写都需要更改 Apache 配置。
*   您可以为所有传入请求使用一个 PHP 前端类。前端将所有请求分派给正确的控制器。
*   您可以迭代地将正则表达式数组应用于传入请求，然后根据成功匹配调用正确的函数或类控制器/方法
*   当最终实例化控制器来处理请求时，您可以在这里查看 http 请求中使用的 HTTP 方法

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-01T00:27:42.513

这个 .htaccess 条目会将除现有文件之外的所有内容发送到 index.php：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php 
```

然后您可以执行以下操作将 url 转换为数组：

```
$url_array = explode('/', $_SERVER['REQUEST_URI']);
array_shift($url_array); // remove first value as it's empty
array_pop($url_array); // remove last value as it's empty 
```

然后你可以这样使用开关：

```
switch ($url_array[0]) {

    case 'products' :
        // further products switch on url_array[1] if applicable
        break;

    case 'foo' :
        // whatever
        break;

    default :
        // home/login/etc
        break;

} 
```

这就是我通常所做的。

# sql-server-2008 - 使用管理工作室连接到 sql server

> ID：13654991
> 
> 赞同：3
> 
> 时间：2012-12-01T00:08:34.603
> 
> 标签：sql-server-2008, remote-access, remote-server

我有一个托管在 go daddy 上的 sql 服务器，我根本无法使用 Visual Web Developer 2010 Express 或 Microsoft SQL Server Management Studio 连接到该服务器。

无法连接到 RBSAssetTracker.db.2574383.hostedresource.com。

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：67）

我错过了什么吗？这似乎应该相对简单地完成这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:34:05.690

首先检查您是否可以 ping 数据库服务器然后检查以下

步骤 1) 确保 SQL SERVER 已启动并且您尝试连接的实例正在运行。
步骤 2) 您的系统防火墙不应阻止 SQL Server 端口。
步骤 3) 转到计算机管理 >> 服务和应用程序 >> SQL Server 2005 配置 >> 网络配置 启用 TCP/IP 协议。确保 SQL SERVER 端口默认为 1433。
步骤 4) 现在根据您的服务器遵循 MSDN 的 KB 文章：http:
[//support.microsoft.com/default.aspx ?scid=kb;EN-US;914277](http://support.microsoft.com/default.aspx?scid=kb;EN-US;914277)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T21:22:00.633

打开您的godaddy帐户，单击您的虚拟主机菜单下的启动，单击SQL Server数据库单击操作->详细信息并注意“主机名”，它将类似于：databasename.db.99999999.hostedresource.com 将其复制并粘贴到登录到管理工作室时的“服务器名称”输入您的 godaddy sql-server 数据库用户名和密码以登录管理工作室。它应该可以正常工作。

# dart - 目标 5 vector_math 目录导入空

> ID：13654994
> 
> 赞同：0
> 
> 时间：2012-12-01T00:08:54.393
> 
> 标签：dart

我正在关注“飞镖游戏”教程。我按照说明进行操作，但我被困在“从包中导入库”。保存 pubspec.yaml 文件后，vector_math 目录显示为空。我错过了一步还是有解决方法？

谢谢，阿道夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:06:44.647

我按照教程进行操作，但无法重现该问题。这里有一些建议：确保您使用的是最新版本的 Dart 编辑器（进入`About Dart Editor`主`Dart Editor`菜单并确保您的编辑器是最新的。

另外，尝试关闭`vector_victor`文件并折叠左侧栏中打开的文件夹，然后重新打开它们。这有什么作用吗？

最后，尝试运行`pub update`，看看是否有任何作用。

上面的建议似乎有点武断，但很难解决我无法重现的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:11:43.850

你是在 Dart 编辑器中运行“pub install”还是使用“Tools > Pub Install”？