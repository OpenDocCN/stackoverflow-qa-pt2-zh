# StackOverflow 问答 15728000-15728999

# python - 忽略模块中的一些 .py

> ID：15728005
> 
> 赞同：0
> 
> 时间：2013-03-31T09:10:43.613
> 
> 标签：python, module, package

说我有以下python模块：

```
foo\\
  __init__.py
  bar.py
  ignoreme.py 
```

导入时如何使`foo.ignoreme`不导入`foo`？我可以将 ignoreme 变成一个子模块（不会自动导入），但这似乎不是一个简单的解决方案。我也不想/不能写`__all__`。`__init__.py`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:11:45.150

导入 foo 无论如何都不会导入 ignoreme.py。只有“import foo.ignoreme”会执行ignoreme.py。

# java - 使用我的 JAR 中的字体

> ID：15728006
> 
> 赞同：0
> 
> 时间：2013-03-31T09:10:48.443
> 
> 标签：java, fonts, awt, embedded-resource

我已经从 eclipse 向我的 JAR 文件添加了一个字体，并试图在 JTextFields 中使用该字体。运行应用程序时没有绘制 setText，只是在 JTextField 中绘制了一个 -。我的代码基于[Exporting font to jar in eclipse](https://stackoverflow.com/questions/12131584)。

下面是我的代码：

```
//lets load the font
Font font = Font.createFont(Font.TRUETYPE_FONT, Main.class.getClassLoader().getResourceAsStream("Coalition_v2.ttf")); 
font.deriveFont(Font.PLAIN, 14);

txtBrain = new JTextField();
txtBrain.setFont(font);
txtBrain.setText("BRAIN");
txtBrain.setHorizontalAlignment(SwingConstants.CENTER);
txtBrain.setEditable(false);
txtBrain.setColumns(10);
txtBrain.setBounds(521, 727, 90, 40);
contentPane.add(txtBrain); 
```

我知道字体在正确的位置，就好像我将 .getResourceAsStream 更改为 /Coalition_v2.ttf 然后我从控制台收到以下错误：

```
java.io.IOException: Problem reading font data.
    at java.awt.Font.createFont(Font.java:946) 
```

字体文件包含在 /src/

按要求输出 Jar -tvf：

```
 0 Sun Mar 31 09:51:56 BST 2013 ngd/
     0 Sun Mar 31 09:51:56 BST 2013 ngd/co/
     0 Sun Mar 31 09:51:56 BST 2013 ngd/co/uk/
     0 Sun Mar 31 09:51:56 BST 2013 ngd/co/uk/TabSync/
   806 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/About$1.class
   556 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/About$2.class
  4762 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/About.class
  1802 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/Help.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$1.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$10.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$11.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$12.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$13.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$14.class
  1117 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$15.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$16.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$17.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$18.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$19.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$2.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$20.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$21.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$22.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$23.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$24.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$25.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$26.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$27.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$28.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$29.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$3.class
   735 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$30.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$31.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$32.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$33.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$34.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$35.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$36.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$37.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$38.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$39.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$4.class
  1120 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$40.class
  4765 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$41.class
   723 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$42.class
  1185 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$43.class
   697 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$44.class
  1220 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$45.class
   995 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$46.class
   781 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$47.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$5.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$6.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$7.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$8.class
   733 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$9.class
  2097 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main$Field1Listener.class
 47217 Sun Mar 31 09:52:54 BST 2013 ngd/co/uk/TabSync/Main.class
  1260 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/FileFiltererpdf.class
  1260 Sun Mar 31 08:53:20 BST 2013 ngd/co/uk/TabSync/FileFiltererjpg.class
991552 Wed Jul 27 19:13:00 BST 2011 ngd/co/uk/TabSync/Coalition_v2.ttf
991552 Wed Jul 27 19:13:00 BST 2011 Coalition_v2.ttf
409717 Thu Mar 21 14:15:32 GMT 2013 nullpdf.pdf
163009 Thu Mar 21 14:29:08 GMT 2013 Javasplash.jpg 
```

代码从 Main.class 运行。

编辑：

代码现在看起来像这样：

```
 Font font = Font.createFont(Font.TRUETYPE_FONT, this.getClass().getResourceAsStream("/Coalition_v2.ttf")).deriveFont(Font.PLAIN, 14); 

System.out.println(font) 
```

排序。感谢您的帮助，也感谢 Andrew 引导您朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T23:22:19.113

改变

```
.. Main.class.getClassLoader().getResourceAsStream("Coalition_v2.ttf") .. 
```

..更像是..

```
.. this.getClass().getResource("/Coalition_v2.ttf") // note leading '/' .. 
```

..对于一个 URL，然后将其打印出来以检查它是否被找到。

前导`/`表示“查找类路径的根”，而不是从当前包或目录中查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:49:08.337

万一有人从谷歌找到这个的解决方案是：

```
 Font font = Font.createFont(Font.TRUETYPE_FONT, this.getClass().getResourceAsStream("/Coalition_v2.ttf")).deriveFont(Font.PLAIN, 14); 

System.out.println(font) 
```

安迪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:39:45.960

createFont 方法中有非常奇怪的异常处理。如果 FontFormatException 或 IOException 被捕获，那么它只是重新抛出。在所有其他情况下将被重新抛出：

```
throw new IOException("Problem reading font data."); 
```

所以你的实际问题甚至不是 IO 问题。

首先看一下这一点。这个方法中有这样的代码：

```
final File tFile = AccessController.doPrivileged(
    new PrivilegedExceptionAction<File>() {
        public File run() throws IOException {
            return File.createTempFile("+~JF", ".tmp", null);
        }
    }
); 
```

它尝试写入临时目录。您应该检查您的程序是否有权执行此操作。

# android - 安卓 2 和安卓 4

> ID：15728010
> 
> 赞同：0
> 
> 时间：2013-03-31T09:11:19.097
> 
> 标签：android, http, httpclient

我有问题：在 Android 2 上，下面的代码可以正常工作，但在 Android 4 上不起作用...

```
try {
    HttpParams params = new BasicHttpParams(); 
    HttpConnectionParams.setConnectionTimeout(params, 15000); 
    HttpClient client = new DefaultHttpClient(params);  
    String postURL = "http://web.lt/data.php";
    HttpPost post = new HttpPost(postURL);
    List<NameValuePair> paramss = new ArrayList<NameValuePair>();
    paramss.add(new BasicNameValuePair("X", "k"));
    paramss.add(new BasicNameValuePair("Y", "x"));
    paramss.add(new BasicNameValuePair("speed", "xyz"));
    UrlEncodedFormEntity ent = new UrlEncodedFormEntity(paramss,HTTP.UTF_8);
    post.setEntity(ent);
    HttpResponse responsePOST = client.execute(post);  
    HttpEntity resEntity = responsePOST.getEntity();

    if (resEntity != null) {    
        Log.i("RESPONSE",EntityUtils.toString(resEntity));
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

我尝试下载[https://code.google.com/p/httpclientandroidlib/](https://code.google.com/p/httpclientandroidlib/)并安装右键单击项目 -> 属性 -> Java 构建路径 -> 库 -> 添加外部 JAR，但是当我更改时：

```
inport org.apache.http 
```

至

```
import ch.boye.httpclientandroidlib.HttpEntity; 
```

...应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:18:34.453

您必须在主 UI 线程上执行连接，这在 android 2 及更高版本中允许，但在蜂窝及更高版本中已停止。请参阅 Android [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:02:33.983

这是一个众所周知的问题。从[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[Service](http://developer.android.com/reference/android/app/Service.html)进行调用，而不是从 UI 线程执行它。UI 线程上的网络调用会阻塞 UI 并提供糟糕的用户体验。在更高版本的 Android 中会引发异常以避免这种情况。

# jquery - jQuery.Ajax 让 ie9 重新加载它的插件

> ID：15728011
> 
> 赞同：0
> 
> 时间：2013-03-31T09:11:42.093
> 
> 标签：jquery, ajax, internet-explorer-9

真的让我震惊！

jQuery.Ajax 在 ie8 中效果很好，但是当我使用 ie9 时，我发现每次使用发送 jquery ajax 调用时，ie9 都会重新加载它所有的插件。（我是指用 ie9 注册的插件，例如 web -bank 插件等等。）

直到我客户的 ie9 中有一个非常大的插件，这是一个网络银行插件，它很重要，并且无法设置，我才发现这个。

当 ie9 启动时，这个大插件需要大约 3 秒来加载自己。但我不知道如何以及为什么，每次我发送一个 jquery ajax 调用时，ie9 都会重新加载它的所有插件。所以这意味着每次通话都会延迟大约 3 秒！

如何解决？我用ie9（最新版本）尝试了至少3台机器，它是一样的。我很确定 ie9 正在重新加载它的插件，因为当我关闭大插件时，ajax 调用将很快完成。

你的，伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:36:45.503

你的ajax调用是什么，给我们一些代码。

我目前在我的网站上使用以下代码没有问题

```
$.post("script.php",$("#form").serialize()); 
```

# javascript - 从 LinkedIn 使用 JavaScript 获取 AccessToken

> ID：15728013
> 
> 赞同：4
> 
> 时间：2013-03-31T09:11:56.000
> 
> 标签：javascript, linkedin, access-token

我正在使用 Javascript 开发 LinkedIn 应用程序。有没有一种方法可以在不要求他单击按钮并获取可以使用 Javascript 将其发送到我的服务器的访问令牌的情况下对用户进行身份验证？

我只找到了这个解决方案：[https](https://gist.github.com/jsjohnst/efc88a38da25ff4e9283) ://gist.github.com/jsjohnst/efc88a38da25ff4e9283但所有人都可以查看共享密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:05:42.113

用户第一次登录到您的应用程序时，他们需要单击该按钮。这是无法绕过的。如果您添加`authorize: true`到您的 Linkedin 初始化代码，他们将不需要在以后单击该按钮。下面的代码：

```
<script src="http://platform.linkedin.com/in.js">
    api_key: YOUR_API_KEY
    authorize: true
</script> 
```

至于将访问令牌发送到您的服务器，您需要将 Javascript API 令牌与 REST API OAuth 令牌交换，如本文档所述：http: [//developer.linkedin.com/documents/exchange-jsapi-tokens- rest-api-oauth-tokens](http://developer.linkedin.com/documents/exchange-jsapi-tokens-rest-api-oauth-tokens)

我希望这有帮助。

# javascript - 如何在 Express 和 node.js 中传递变量

> ID：15728015
> 
> 赞同：-1
> 
> 时间：2013-03-31T09:12:11.633
> 
> 标签：javascript, node.js, express

我正在尝试用 node.js 和 express 做一些事情。但我在将变量快速传递给 .js 时遇到了一些问题

这是我的代码，我想知道 .js 中的 IP 地址，所以我做了以下事情

像这样，我将用户重定向到 test.js

```
app.get('/', function(req, res) {
  app.set('ipAddr' , req.ip);
  res.sendfile(__dirname + '/index.html');
}); 
```

和 index.html 包括

```
 <script src="/hello.js"></script> 
```

所以，在 hello.js 中，我想知道客户端 IP 地址。

我试图找出如何去做，但我失败了。

谁能告诉我该怎么做？真的感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:34:02.943

`IP`客户端，可以在您`req.connection.remoteAddress`可以将变量传递`res.render`到页面或使用`res.send`

# java - 添加 ScrollPane 使我的 JTextArea 消失

> ID：15728016
> 
> 赞同：0
> 
> 时间：2013-03-31T09:12:44.653
> 
> 标签：java, swing, jscrollpane, jtextarea

如果我有滚动条，JTextArea 就会消失。没有它，一切都很好。有人可以向我解释一下吗？以及如何解决它！

另外，顺便说一句，是否可以更改颜色或在滚动窗格上设置边框？

以下是相关代码：

```
 //Text Container
    JPanel textCon = new JPanel();
    textCon.setOpaque(false);
    textCon.setLayout(new GridLayout(1,3));
    add(textCon);

    //Left Filler
    JPanel left = new JPanel();
    left.setOpaque(false);
    textCon.add(left);

    //Text area
    mainText = new JTextArea("SAMPLE");
    mainText.setOpaque(true);
    mainText.setSize(50,30);
    mainText.setLineWrap(true);
    mainText.setWrapStyleWord(true);
    textCon.add(mainText);

    //Set textAre fonts, colors, border/padding
    mainText.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.GREEN), BorderFactory.createEmptyBorder(10, 10, 10, 10)));
    mainText.setFont(new Font("sansserif", Font.BOLD, 10));
    mainText.setForeground(Color.GREEN);
    mainText.setBackground(Color.BLACK);

    //Scroll Bar
    scroller = new JScrollPane(mainText);
    scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    mainText.add(scroller); 
```

这是其余的，以防万一！

```
import java.awt.*;
import java.awt.event.*;
import java.awt.Toolkit.*;
import javax.swing.*;
import java.io.*;
import javax.swing.border.*;
import java.util.*;

class ProjectMain extends JFrame
{
//Declare String/Array for mainText
String output = "";
String [] hero;
int page = 0;
JTextArea mainText;
JScrollPane scroller;

public ProjectMain()
{
    //Set Background
    setTitle("JLA Viewer");
    setSize(1920,1080);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);
    setContentPane(new JLabel(new ImageIcon("bg.png")));
    setLayout(new GridLayout(3,1));

    //Refresh Background
    setSize(1919,1079);
    setSize(1920,1080);

    //Label Container
    JPanel labelCon = new JPanel();
    labelCon.setOpaque(false);
    labelCon.setLayout(new BorderLayout());
    add(labelCon);

    //Top Label
    JLabel topLabel = new JLabel("JLA Profile Viewer");
    topLabel.setHorizontalAlignment(SwingConstants.CENTER);
    topLabel.setForeground(Color.GREEN);
    topLabel.setOpaque(false);
    topLabel.setFont(new Font("sansserif", Font.BOLD, 30));
    labelCon.add(BorderLayout.NORTH,topLabel);

    //Logo
    ImageIcon logo = new ImageIcon("logo.jpg");
    JLabel logoLabel = new JLabel();
    logoLabel.setHorizontalAlignment(SwingConstants.CENTER);
    logoLabel.setIcon(logo);
    labelCon.add(BorderLayout.SOUTH,logoLabel);

    //Text Container
    JPanel textCon = new JPanel();
    textCon.setOpaque(false);
    textCon.setLayout(new GridLayout(1,3));
    add(textCon);

    //Left Filler
    JPanel left = new JPanel();
    left.setOpaque(false);
    textCon.add(left);

    //Text area
    mainText = new JTextArea("SAMPLE");
    mainText.setOpaque(true);
    mainText.setSize(50,30);
    mainText.setLineWrap(true);
    mainText.setWrapStyleWord(true);
    textCon.add(mainText);

    //Set textAre fonts, colors, border/padding
    mainText.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.GREEN), BorderFactory.createEmptyBorder(10, 10, 10, 10)));
    mainText.setFont(new Font("sansserif", Font.BOLD, 10));
    mainText.setForeground(Color.GREEN);
    mainText.setBackground(Color.BLACK);

    //Scroll Bar
    scroller = new JScrollPane(mainText);
    scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    mainText.add(scroller);

    //Right Filler
    JPanel right = new JPanel();
    right.setOpaque(false);
    textCon.add(right);

    //Button Container
    JPanel buttonContainer = new JPanel();
    buttonContainer.setOpaque(false);
    add(BorderLayout.SOUTH,buttonContainer);

    //PREV Button
    JButton prev = new JButton("PREV");
    prev.setOpaque(false);
    ActionListener PrevList = new PrevButton(); //Call Button Listener
    prev.addActionListener(PrevList);
    buttonContainer.add(prev);

    //EXIT Button
    JButton exit = new JButton("EXIT");
    exit.setOpaque(false);
    ActionListener ExitList = new ExitButton(); //Call Button Listener
    exit.addActionListener(ExitList);
    buttonContainer.add(exit);

    //NEXT Button
    JButton next = new JButton("NEXT");
    next.setOpaque(false);
    ActionListener NextList = new NextButton(); //Call Button Listener
    next.addActionListener(NextList);
    buttonContainer.add(next);

    //File Handling
    try
    {
        File inputFile = new File ("ProjectInputFile.txt");
        Scanner scanner = new Scanner(inputFile);

        while(scanner.hasNextLine())
        {
            output = output + (scanner.nextLine() + "\n");
        }
    }
    catch(IOException ioe)
    {

    }

    //Add split strings to array
    hero = output.split("@");
}

//Prev button event listener
public class PrevButton implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        page = page - 1;
        if(page < 0)
        {
            page = hero.length;
        }
        mainText.setText(hero[page]);
    }
}

//Exit button event listener
public class ExitButton implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        setVisible(false);
        dispose();
        System.exit(0);
    }
}

//Next button event listener
public class NextButton implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        page++;
        if(page > (hero.length))
        {
            page = 0;
        }
        mainText.setText(hero[page]);
    }
}

public static void main(String args[])
{
    new ProjectMain();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:05:22.290

这条线

mainText.add（滚动条）；

尝试将 a 添加`JScrollPane`到 a `JTextArea`。您已经设置了`ViewPortView`的，`JScrollPane`所以这条线是不必要的。

您仍然需要*添加*：`JSrolllPane`

```
textCon.add(scroller); 
```

还要确保在添加所有组件`JFrame#setVisible` *后调用。*

```
setVisible(true); 
```

> 是否可以更改颜色或在滚动窗格上设置边框？

当然。与其在 上设置边框，不如在 上设置`JTextArea` `mainText`边框`JScrollPane`。

*旁注：*

*   不要在`IOException`不显示异常内容的情况下静默捕捉
*   `JFrames`通常直接使用而不是扩展

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-30T19:13:47.387

你只需要`setBounds(x,y,z,w)`你的`JScrollPane`而不是你的`JTextArea`. 然后将您添加`JSrcollPane`到您`JFrame`的`JPanel`.

# soap - Netbeans SOAP 响应 2 字节 UTF-8 序列的无效字节 2

> ID：15728018
> 
> 赞同：4
> 
> 时间：2013-03-31T09:12:50.670
> 
> 标签：soap, netbeans, utf-8, response

因此，我在 Netbeans 7.2.1 中创建了一个简单的 Web 服务，它可以完美地与非 UTF-8 字符一起使用，同时，即使 Web 服务所需的数据库表中存在单个 UTF-8 字符，在调用之后它，我收到这条消息：

SOAP 响应服务调用引发异常消息：com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 2-byte UTF-8 sequence.; 有关详细信息，请参阅服务器日志。

如果我替换数据库表中的 UTF8 字符，Web 服务可以正常工作。

顺便提一下，我使用 netbeans、jtds 1.3 ms sql server driver 和 glassfish 3.1.2.2

* * *

更新：我想，我设法解决了这个问题：

1.  转到：%GF_Install_dir%\glassfish_3_version\glassfish\domains\domain1\config

2.  打开域.xml

3.  找到以 : < java-config .../> 开头的行

    ```
     < jvm-options> ... /> 
    ```

    .. 并像这样添加新行：<jvm-options>-Dfile.encoding=UTF-8</jvm-options>

4.  重启GF服务器。

# mysql - 用于获取用户和关注者帖子的 Mysql 选择查询

> ID：15728023
> 
> 赞同：0
> 
> 时间：2013-03-31T09:13:22.887
> 
> 标签：mysql, sql

这是我的选择查询语句：

```
select distinct posts.*, user_status.status_content 
from posts left join user_status on 
user_status.user_id = posts.user_id
where posts.user_id
= $userid or posts.user_id in 
(select follower from follower where follower.user_id = $userid) order by posts.created_at desc; 
```

我的选择查询语句工作正常，只是输出不是我真正想要的。我想要的是从当前用户及其关注者中选择所有帖子，每个帖子的用户名都是最新`status content`的，状态由用户更新，我只想从表中选择最新的状态内容，我该怎么办？

帖子表：

```
+------------+------------+------+-----+---------+----------------+
| Field      | Type       | Null | Key | Default | Extra          |
+------------+------------+------+-----+---------+----------------+
| id         | bigint(20) | NO   | PRI | NULL    | auto_increment |
| user_id    | bigint(20) | NO   | MUL | NULL    |                |
| content    | text       | NO   |     | NULL    |                |
| created_at | datetime   | YES  |     | NULL    |                |
+------------+------------+------+-----+---------+----------------+ 
```

用户状态表：

```
+----------------+--------------+------+-----+-------------------+-------+
| Field          | Type         | Null | Key | Default           | Extra |
+----------------+--------------+------+-----+-------------------+-------+
| user_id        | bigint(20)   | NO   | MUL | NULL              |       |
| status_content | varchar(225) | YES  |     | Hello World       |       |
| created_date   | timestamp    | NO   |     | CURRENT_TIMESTAMP |       |
+----------------+--------------+------+-----+-------------------+-------+ 
```

用户可以更新他们的状态，因此 user_status 表中将有多个记录。

我的选择查询可能会像这样输出：

```
I feel like s**t today!!!!
Hello world
2013-03-28 22:34:14
-----------------------------
I don't feel very good today
Hello world
2013-03-28 22:34:14 
```

我想要的是，假设`I feel like s**t today`是最新状态，所以它应该输出如下：

```
 I feel like s**t today!!!!
 Hello world
 2013-03-28 22:34:14 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:38:05.127

将此子句添加`LIMIT 0,1`到您的 SQL 语句中。这基本上将结果的数量限制为最多一个（这将是最新的帖子）。根据[SELECT 的 MySQL 参考手册](http://dev.mysql.com/doc/refman/5.6/en/select.html)，LIMIT 子句定义为：

LIMIT 子句可用于限制 SELECT 语句返回的行数。

我还想你需要一个额外的 order-by 子句——比如：`ORDER BY posts.created_at DESC`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:42:47.683

无论您正在查看的用户 ID 的数量如何，这里都有一个查询。它计算最近状态更改的日期，并将其用于连接：

```
select distinct posts.*, user_status.status_content 
from posts left join
     user_status 
     on user_status.user_id = posts.user_id left join
     (select user_id, max(created_at) as maxdate
      from user_status
     ) usmax
     on usmax.user_id = user_status.user_id and usmax.maxdate = user_status.create_at
where posts.user_id = $userid or
      posts.user_id in (select follower from follower where follower.user_id = $userid)
order by posts.created_at desc; 
```

# javascript - Javascript代码重构

> ID：15728024
> 
> 赞同：0
> 
> 时间：2013-03-31T09:13:28.580
> 
> 标签：javascript, jquery, exif

我有以下代码正在运行

```
var exif = function(exifObject) {
    alert(exifObject.Orientation);
}

$(this).fileExif(exif); 
```

问题是，我需要行后的警报值`$(this).fileExif(exif)`。

所以我尝试执行以下操作：

```
function getOrientation(exifObject){
    return(exifObject.Orientation);
}
getOrientation($(this).fileExif()); 
```

这没用。我怎样才能`$(this).fileExif(exif)`在行后获得警报值？

**附加信息**

`console.log(exifObject)`返回具有属性数组 fe 的 Object `Orientation`。

`$(this)`包含在此代码中：

```
$('body').on('change', '#imgFile', function(event) { 
```

所以它是一个输入类型的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:33:53.983

您正在将`exif`（这是一个函数）传递给该`fileExif`函数。这是一个例子，说明函数是 JavaScript 中的一等对象，在这种情况下`exif`是一个“回调”函数。也就是说，当`fileExif`函数完成时，它将结果传递给`exif`函数，然后调用该函数。

在执行方面，`alert`将在`fileExif`函数之后调用。但是，如果您非常希望在函数之后编写代码，则可以在传递函数时声明该函数：

```
$(this).fileExif(function(exifObject) {
    alert(exifObject.Orientation);
}); 
```

但是，这可能不像原来的那么清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:40:10.343

我发现只有一个用于 jQuery 的 fileExif 插件。[这里它来源](https://github.com/sanisoft/jQuery-fileExif/blob/master/jquery.exif.js)。该插件使用本机[FileReader](https://developer.mozilla.org/ru/docs/DOM/FileReader)。FileReader 异步加载文件。你有两种方式。首先 - 修改插件代码并使其同步（坏主意）。使用 asycn 样式编写代码（最佳实践）。

# c# - 文本文件与数据库？

> ID：15728027
> 
> 赞同：0
> 
> 时间：2013-03-31T09:13:57.113
> 
> 标签：c#, streamwriter

我正在生成数百万行并存储在文本文件中。我们生成数百万并存储在文本文件中，然后重复此操作直到一定数量。

我观察到储蓄比生成花费的时间太多。我们正在使用以下代码来保存结果。

```
 using (StreamWriter sw = new StreamWriter(string.Format("{0}.txt", FILENAME), true))
        {
            for (int i = lastEndIndex; i < storage.Count; i++)
            {
                sw.WriteLine(storage.ElementAt(i));
            }
        } 
```

我的问题是，有什么方法可以将行批量保存到文本文件中？

# c++ - C++ VS2010判断是Release还是Debug

> ID：15728028
> 
> 赞同：6
> 
> 时间：2013-03-31T09:14:10.383
> 
> 标签：c++, debugging, release

如果构建作为调试或发布运行，我想检查 C++ 2010。有没有简单的方法来检查？

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T09:17:54.200

VisualStudio 生成`_DEBUG`和`NDEBUG`作为`define`. 您可以在编译时检查它。

```
#ifdef _DEBUG
// THE CODE IS COMPILING IN DEBUG MODE.
#endif 
```

# html - 用于浏览器检测的 HTML 表格显示

> ID：15728032
> 
> 赞同：0
> 
> 时间：2013-03-31T09:14:20.950
> 
> 标签：html

我刚刚找到了一个网站[http://www.browser-details.com/browser-detection/](http://www.browser-details.com/browser-detection/)，它显示了用户计算机系统的一些详细信息。

在学习 HTML 表格显示时，我尝试通过 HTML 类似地显示上述站点。我很确定这不是像上述网站那样检索和显示信息的确切代码，但我只是想确认我编写 HTML 代码的方式是否正确。

这是我的代码示例以显示详细信息：

```
<!DOCTYPE html>
<html>
<table width="100%">

<tr>
<td>
<div style="background-color:red;">
<table align="center">
<th>Browser</th>
</table>
<div style="background-color:blue;">
<table align="center">
<td>
Slim Browser
</td>
</table>
</div>
</div>
</td>

<td>
<div style="background-color:red;">
<table align="center">
<th>Operating System</th>
</table>
<div style="background-color:blue;">
<table align="center">
<td>
Windows 7
</td>
</table>
</div>
</div>
</td>

<td>
<div style="background-color:red;">
<table align="center">
<th>IP Address</th>
</table>
<div style="background-color:blue;">
<table align="center">
<td>
117.85.48.222
</td>
</table>
</div>
</div>
</td>
</tr>

<tr>

<td>
<div style="background-color:red;">
<table align="center">
<th>JavaScript</th>
</table>
<div style="background-color:blue;">
<table align="center">
<td>
Enabled
</td>
</table>
</div>
</div>
</td>

<td>
<div style="background-color:red;">
<table align="center">
<th>Cookies</th>
</table>
<div style="background-color:blue;">
<table align="center">
<td>
Enabled
</td>
</table>
</div>
</div>
</td>

<td>
<div style="background-color:red;">
<table align="center">
<th>Color Depth</th>
</table>
<div style="background-color:blue;">
<table align="center">
<td>
24
</td>
</table>
</div>
</div>
</td>

</tr>

</table>
</html> 
```

如果我错了，请纠正我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:49:04.493

[您可以使用W3C 验证器](http://validator.w3.org/)检查您的代码的有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:40:50.740

你可以把你的桌子缩小到像这样

```
<table>
<tr>
    <th>
        Operating System
    </th>
    <th>
        Operating System
    </th>
    <th>
        Operating System
    </th>
</tr>
<tr>
    <td>
        Windows 7
    </td>
    <td>
        Windows 7
    </td>
    <td>
        Windows 7
    </td>
</tr>

<tr>
    <th>
        Operating System
    </th>
    <th>
        Operating System
    </th>
    <th>
        Operating System
    </th>
</tr>
<tr>
    <td>
        Windows 7
    </td>
    <td>
        Windows 7
    </td>
    <td>
        Windows 7
    </td>
</tr> 
```

我没有重新输入所有文本，而是复制了单元格。

你的 CSS 可能看起来像这样：

```
table{
    width:100%;
    border:3px;
    border-collapse:separate;
    border-spacing:30px 0px;    
}
th{
    background-color:#888;
    text-align:left;
    padding-left:1em;
    border-top: 1em solid #fff;
}

td{
    background-color:#eee;
    text-align:left;
    padding:1em 2em 1.5em 2em;
} 
```

# jquery - 检查选择器是否有类时，jQuery事件“更改”不起作用，需要帮助选择正确的事件

> ID：15728036
> 
> 赞同：1
> 
> 时间：2013-03-31T09:14:36.963
> 
> 标签：jquery

因此，我正在使用jQuery滑动选项卡代码，并且选择其他选项卡时，我需要其他选项卡来参加类。这是我写的：

```
$(document).change(function() {
  if ($('#tab_5').hasClass('st_tab_active')) {
      $('#tab_4').addClass('st_tab_active2');
  }
  else
    {$('#tab_4').removeClass('st_tab_active2');};
} ); 
```

我正在使用`change`，但这不是我能说出的正确事件，我不确定哪个是。当点击上一个和下一个按钮时，当它被选中时`#tab_5`接受这个类。当这种情况发生时，`st_tab_active`我需要`#tab_4`承担。`st_tab_active2`我应该使用什么正确的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:18:15.120

**给定一个选项卡列表**

```
<div class="tab active"></div>
<div class="tab"></div>
<div class="tab"></div>
<div class="tab"></div> 
```

**jQuery**

```
$(".tab").click(function(){
   $(".tab").removeClass("active");
   $(this).addClass("active");
}); 
```

虽然此示例与您的情况不完全相同，但它提供了一些适用的点。首先，在选项卡上使用一个类，这使您可以轻松地一次访问所有这些选项卡。其次，在 jQuery 中添加/删除活动类时，只需从所有选项卡中删除该类，然后将其应用到正确的选项卡。

您的情况的脚本可能会略有不同，因为它使用下一步按钮。

```
$(".next").click(function(){
    var nextElem = $(".active").next();
    $(".tab").removeClass("active");
    nextElem.addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:36:21.730

尝试使用 jquery [live](http://api.jquery.com/live/)，它通常可以工作：

```
$(document).live('change', function() {
  if ($('#tab_5').hasClass('st_tab_active')) {
      $('#tab_4').addClass('st_tab_active2');
  }  else {
    $('#tab_4').removeClass('st_tab_active2');
  }
}); 
```

# javascript - 基于 brunch 构建的应用程序对 app.css/app.js/... 文件使用硬编码路径

> ID：15728039
> 
> 赞同：1
> 
> 时间：2013-03-31T09:14:48.147
> 
> 标签：javascript, npm, brunch

我已经通过 npm ( `npm install brunch`)在 Windows 上安装了 brunch

然后我在我的 www 根目录（apache www root）中创建并构建了新项目：

```
cd .../www
brunch new someproject
cd someproject
brunch build 
```

当我`localhost/someproject/public`在浏览器中输入时，控制台日志（chrome）中出现以下错误：

```
GET http://localhost/stylesheets/app.css 404 (Not Found) localhost:9
GET http://localhost/javascripts/vendor.js 404 (Not Found) localhost:10
GET http://localhost/javascripts/app.js 404 (Not Found) localhost:10
Uncaught ReferenceError: require is not defined 
```

所以这些文件的路径似乎是从根路径硬核的......我怎样才能做到这一点 - 早午餐配置文件中的一些变化？

我知道我可以使用`brunch watch --server`和输入`localhost:3333`，但我想改用 apache。所以基本上这是将应用程序部署到生产环境（公共文件夹）的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:15:47.220

对于这种特殊情况，您需要将`app/assets/index.html`路径更改为 js / CSS。

# javascript - node.js -- 从回调函数中获取数据

> ID：15728041
> 
> 赞同：4
> 
> 时间：2013-03-31T09:15:09.887
> 
> 标签：javascript, node.js

我的 node.js 代码如下：

```
var data = "";
//redis client
client.get(key,function(err,value){
    data += value;
});
//output
console.log(data); 
```

但是，它什么也没打印。为什么这样？以及如何从回调函数中获取数据？

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-08-10T23:09:09.797

**回调之外的 Redis 数据文档的答案**

```
 const redis = require('redis');
        const redisClient = redis.createClient(process.env.REDIS_URI);

        // using Node.js >= v8 built-in utility
        const { promisify } = require('util');

        // forcing function to return promise
        const getAsync = promisify(redisClient.get).bind(redisClient);
        const value = await getAsync(key);

        console.log('value of redis key outside the callback is', value); 
```

**我认为这至少值得一票，因为它很简单：）**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T09:19:45.617

您向 redis 客户端传递了一个稍后将调用的回调（当数据通过网络返回时），但是在进行 redis 调用之后，您正尝试在 redis 向您发送值之前打印该值。你需要等待redis返回一个值。

尝试这个

```
var data = "";
//redis client
client.get(key,function(err,value){
    data += value;
    //output 
    console.log(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-15T06:59:55.213

粘贴我的将回调转换为承诺的 Redis 文件，以防万一。它在打字稿和类型安全中。您应该会收到智能感知和自动完成功能。

```
import redis from "redis"
import { promisify } from "util"
import { redisHost as host, redisPort as port } from "../../configKeys"

const client = redis.createClient({
  port,
  host,
})

client.on("connect", () => {
  console.log(`Redis Client connected on port ${port}`)
})

client.on("ready", () => {
  console.log("Redis Client ready to use..")
})

client.on("error", (err) => {
  console.log(err.message)
})

client.on("end", () => {
  logCommon.debug("Redis Client disconnected")
})

process.on("SIGINT", () => {
  client.quit()
})

export const GET_ASYNC = (promisify<string>(client.GET).bind(
  client
) as unknown) as (key: string) => Promise<string | null>

export const SET_ASYNC = (promisify<string, string, string, number>(
  client.SET
).bind(client) as unknown) as (
  key: string,
  value: string,
  mode: string,
  duration: number
) => Promise<"OK" | null>

export const DELETE_ASYNC = (promisify<string>(client.DEL).bind(
  client
) as unknown) as (key: string) => Promise<number | null>

export default client 
```

导入`GET_ASYNC`或`SET_ASYNC`进入所需的文件，您可以像承诺一样将其与 async-await 一起使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-31T09:23:22.803

您的 redis 绑定的`client.get`功能是异步的。

查询完redis服务器后会调用回调函数。您应该在回调中打印输出。

```
var data = "";
//redis client
client.get(key,function(err,value){
    data += value;
    //output
    console.log(data);
}); 
```

# matlab - 是否有任何基于 GPU 的用于深度学习的 Matlab 工具箱？

> ID：15728043
> 
> 赞同：1
> 
> 时间：2013-03-31T09:15:12.647
> 
> 标签：matlab, machine-learning, deep-learning

我正在为 matlab 寻找基于 GPU 的深度学习库。你知道任何或任何重要的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T09:59:59.790

你能试试[skaae/DeepLearnToolbox 吗](https://github.com/skaae/DeepLearnToolbox)？它是[rasmusbergpalm/DeepLearnToolbox](https://github.com/rasmusbergpalm/DeepLearnToolbox)的一个分支，并为 GPU 添加了一些功能。它仍在开发中，所以如果它按预期工作，请回复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-12T17:38:31.457

我还没有尝试过上一个答案中提到的两种解决方案。但我可以证明[matconvnet](http://www.vlfeat.org/matconvnet/)非常棒。它同时具有 CPU 和 GPU 实现。它已经过测试，可以在 linux、mac 和 windows 上的 gpu 上编译和运行。它的代码可读性很强，并且支持对网络拓扑的任意更改。

最重要的是，该代码包含大量示例，用于在已知数据集（MNIST、imagenet）上训练解决方案，并提供了一些与 caffe 的数值精度实现一致的预训练网络。

顺便说一句，我不以任何方式隶属于 matconvnet 创建者。只是一个粉丝:-)

# file - 如何检查 ReadFileEx 是否在没有睡眠线程的情况下结束加载？

> ID：15728045
> 
> 赞同：2
> 
> 时间：2013-03-31T09:15:25.320
> 
> 标签：file, winapi, file-io, asynchronous

我使用 winapi ReadFileEx 异步加载 30 兆字节数组，天哪，它工作得非常好 - 我已经免费获得了整个阅读，我的计算没有减慢只是数组在后台神奇地加载并且游戏帧没有减慢（虽然我使用 1 个核心电脑）

但问题是这样的——据我所知，收到“阅读完成”调用我应该让我的线程休眠，我不想这样做，我只是从我的主线程中触发 load_asynchronusly 然后想知道它什么时候完成（现在所有负载都以这种方式工作，我只是在完成后没有收到我的回调调用）

我可以及时测试加载数组的内容并检查例如最后一个带有“检查这是否被覆盖”的内容是否被覆盖然后我会知道但这可能不是那么安全（？）有什么方法可以确定它何时完成以一种简单的方式接近那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:20:57.423

你有几个选择：

1.  调用[`GetOverlappedResult`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683209.aspx)以异步测试操作是否已完成。
2.  通过一个[`FileIOCompletionRoutine`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364052.aspx). 这将在读取完成时执行。
3.  [`OVERLAPPED`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms684342.aspx)在结构中使用事件。读取完成时会发出信号。

# php - .php？哪里不安全？

> ID：15728047
> 
> 赞同：-2
> 
> 时间：2013-03-31T09:15:58.407
> 
> 标签：php, security

成功登录后，用户被重定向到 menu.php，这是唯一将执行密码保护操作（活动）的文件。

如果用户需要添加新公司，我有链接

```
<a href="menu.php?add_new_company" title="">Add new company</a> 
```

文件下面是代码

```
if ($_SERVER['QUERY_STRING'] == 'add_new_company') { echo 'Input form' } 
```

已经读过这是不安全的，而且是糟糕的设计。但是不明白有人如何破解它。请告知哪里存在安全问题（如果有）（有人如何破解）？

更新

登录成功后，会创建token并记录在mysql中。在 menu.php 中检查 token issset，如果是，连接到 mysql，检查是否存在。如果不是 isset 或 mysql 中不存在，则重定向到登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:20:59.887

请注意，`menu.php?action=add_new_company`任何人都可以在任何地方访问，无论是否登录。`menu.php`您需要在页面上实际进行会话验证。

其中一部分，从您发布的内容来看，没有什么真正不安全或可以被利用的，只要该请求的输出不依赖于用户输入（否则我们会有 XSS）。

这只是一个糟糕的设计，因为这不是一个*格式良好的*查询字符串。查询字符串应该包含一个`key=value`列表，并且不应该以这种方式使用。

我会选择类似的东西：

```
<a href="menu.php?action=add_new_company" title="">Add new company</a> 
```

和：

```
if ($_GET['action'] == 'add_new_company') { echo 'Input form' } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:24:54.217

如果我理解正确，有人可以打电话`menu.php?add_new_company`并可以创建没有密码保护的新公司吗？只有菜单受密码保护？

这是非常不安全的，因为如果用户之前登录过并且知道 URL，或者只是猜测它，他可以（再次）无需密码进行身份验证。

请参阅[OWASP 安全编码实践](https://www.owasp.org/images/0/08/OWASP_SCP_Quick_Reference_Guide_v2.pdf)，尤其是*身份验证和密码管理部分*

# uml - 具有从初始状态传出的多个转换的 Uml 状态图

> ID：15728049
> 
> 赞同：1
> 
> 时间：2013-03-31T09:16:06.673
> 
> 标签：uml, statechart

我是 Uml 新手，我想知道在状态图中是否可以有多个从初始状态传出的转换

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:03:15.620

根据规范，您需要一个初始状态（实心圆）和一个指向“真实”起始状态的转换，即系统启动时的状态。如果您觉得需要多次转换到多个起始状态，则可以：

*   您缺少一个中间状态，这可能非常微不足道（例如“开始”）
*   您可能会考虑在初始状态之后使用选择节点（菱形节点），但这通常不是一个好习惯。

# ruby - Yajl::ParseError: 词法错误: json 文本中的无效字符

> ID：15728050
> 
> 赞同：2
> 
> 时间：2013-03-31T09:16:16.153
> 
> 标签：ruby, regex, json, parsing, yajl

使用 YAJL Ruby 解析我得到以下错误

```
2.0.0-p0 :048 >   Yajl::Parser.parse "#{resp.body}"
Yajl::ParseError: lexical error: invalid char in json text.
                                  {"id"=>2126244, "name"=>"bootstrap",
                     (right here) ------^ 
```

我怎样才能摆脱它？

**更新（坦克霍华德）：**

只需将 to_json 方法添加到 resp.body ：

```
2.0.0-p0 :183 > parsed = Yajl::Parser.parse resp.body.to_json
 => {"id"=>2126244, "name"=>"bootstrap", "full_name"=>"twitter/bootstrap", "owner"=>{"login"=>"twitter", "id"=>50278, ... 
```

然后它工作：

```
2.0.0-p0 :184 > parsed.class
 => Hash 
2.0.0-p0 :185 > parsed["id"]
 => 2126244 
2.0.0-p0 :186 > parsed["name"]
 => "bootstrap" 
2.0.0-p0 :187 > parsed["full_name"]
 => "twitter/bootstrap" 
2.0.0-p0 :188 > parsed["owner"]
 => {"login"=>"twitter", "id"=>50278, "avatar_url"=>"https://secure.gravatar.com/avatar/2f4a8254d032a8ec5e4c48d461e54fcc?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-org-420.png", "gravatar_id"=>"2f4a8254d032a8ec5e4c48d461e54fcc", "url"=>"https://api.github.com/users/twitter", "html_url"=>"https://github.com/twitter", "followers_url"=>"https://api.github.com/users/twitter/followers", "following_url"=>"https://api.github.com/users/twitter/following", "gists_url"=>"https://api.github.com/users/twitter/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/twitter/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/twitter/subscriptions", "organizations_url"=>"https://api.github.com/users/twitter/orgs", "repos_url"=>"https://api.github.com/users/twitter/repos", "events_url"=>"https://api.github.com/users/twitter/events{/privacy}", "received_events_url"=>"https://api.github.com/users/twitter/received_events", "type"=>"Organization"} 
2.0.0-p0 :189 > 
```

只是因为 resp.body, 不是 json ：

```
2.0.0-p0 :197 > print resp.body
{"id"=>2126244, "name"=>"bootstrap", ... 

2.0.0-p0 :196 > print resp.body.to_json
{"id":2126244,"name":"bootstrap", ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:22:00.907

您的文本不是允许的 JSON 对象。令牌`=>`不应该出现，而是冒号`:`。

```
{
    "id" : 2126244,
    "name" : "bootstrap",
    ...
} 
```

# configuration - 在 application.conf 中使用相对路径作为配置值

> ID：15728052
> 
> 赞同：3
> 
> 时间：2013-03-31T09:16:25.180
> 
> 标签：configuration, playframework, playframework-2.1

我正在尝试将 SQLite 与 Play Framework 2.1 一起使用，但我需要使用相对于 Play 应用程序根目录的相对路径。我该怎么做？

这是application.conf中的相关代码

```
db.default.driver=org.sqlite.JDBC
db.default.url="jdbc:sqlite:/I/want/relative/path/" 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:19:35.123

如果您想在 Play 应用程序的根目录中创建数据库，您应该执行以下操作：

```
db.default.url="jdbc:sqlite:sqlite_test.db" 
```

我认为如果你想在文件夹中使用 make database `<PlayAppRootDirectory>/database/db_name.db`，你应该在配置值中提供完整的绝对路径。

作为替代方案，您可以定义 Play 应用程序根目录的环境变量并将其值用于`application.conf`.

Play!Framework 2.x 使用**HOCON**格式（Human-Optimized Config Object Notation）作为配置文件的语法。

如果您想使用 Play!Framework 根文件夹作为数据库的路径，您应该执行以下操作：

```
db.default.driver=org.sqlite.JDBC
# The following line use HOCON format
db { default.url : "jdbc:sqlite:"${PLAY_APPS_ROOT}"/database/db_name.db" } 
```

上面的配置值使用 HOCON 语法。请注意，这`${PLAY_APPS_ROOT}`是**Play!Framework 应用程序根文件夹**的环境变量。数据库路径实际上是绝对路径，因为您必须在**完整的绝对路径中定义数据库路径**。您可以阅读以下资源以供参考：

1.  [类型安全配置](https://github.com/typesafehub/config)
2.  [播放文档 - 配置](http://www.playframework.com/documentation/2.1.0/Configuration)

# python - 通过蓝牙传输 Python 数据

> ID：15728054
> 
> 赞同：0
> 
> 时间：2013-03-31T09:16:47.417
> 
> 标签：python, bluetooth, mindstorms

我需要通过**蓝牙将****python**程序计算的数据发送到我的**乐高 mindstorms nxt2.0** 机器人。这怎么可能？我需要什么工具？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T04:08:08.200

我一直在尝试做同样的事情。[在mindstorms 网站上](http://us.mindstorms.lego.com/en-us/support/files/default.aspx)有一个关于蓝牙通信的信息文件。 如果您使用的是 python 3.3 或更高版本，则可以使用[套接字](http://docs.python.org/3/howto/sockets.html)进行通信。我还没有得到这个工作。如果您不使用 python 3.3，则可以使用 pybluez。**

# objective-c - 如何检查 NSManagedObjectContext 未保存？

> ID：15728056
> 
> 赞同：1
> 
> 时间：2013-03-31T09:17:21.007
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

如何检查 NSManagedObjectContext 未保存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T09:28:26.777

```
[context hasChanges] 
```

返回一个布尔值，指示上下文是否有未提交的更改。

# javascript - 从字符串 java 脚本中获取特定文本

> ID：15728062
> 
> 赞同：0
> 
> 时间：2013-03-31T09:18:10.990
> 
> 标签：javascript, jquery, string

我正在使用 java 脚本中的字符串，例如，如果我有以下字符串：

```
str = "miniprofile-container http://www.linkedin.com/miniprofile?vieweeID=8573&context=anet&view" 
```

我想要这种类型的字符串中的 ID 号“8573”。它们的长度不同，但具有与上述相同的结构。所以请帮助我实现它。

我可以使用 strcpy 函数，但它不是通用方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:22:18.890

```
var str = "miniprofile-container http://www.linkedin.com/miniprofile?vieweeID=8573&context=anet&view";
var pattern = /[0-9]+/g;
var matches = str.match(pattern); //8573 
```

演示：http: [//jsfiddle.net/Qex8J/](http://jsfiddle.net/Qex8J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:28:53.280

如果您不想/不需要使用正则表达式，也可以试试这个：

```
var str = "miniprofile-container http://www.linkedin.com/miniprofile?vieweeID=8573&context=anet&view";
    var s1 = str.indexOf("vieweeID=")+"vieweeID=".length;
    var matches = str.substring(s1,str.indexOf("&context"))

alert(matches); 
```

[http://jsfiddle.net/Qex8J/1/](http://jsfiddle.net/Qex8J/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T09:30:41.800

```
var vieweeID = str.split('vieweeID=')[1].split('&')[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T09:34:09.153

```
str.match(/vieweeID\=(.*?)\&/)[1] 
```

[**小提琴**](http://jsfiddle.net/jKpJu/)

# python - 在条件为真的 3D Numpy 数组之间复制数据

> ID：15728070
> 
> 赞同：1
> 
> 时间：2013-03-31T09:19:13.793
> 
> 标签：python, multidimensional-array, numpy, indexing

I'd like to copy data from one 3D array to another 3D array at the indices where a condition is true for a different 2D array. All three arrays have the same first two dimensional shapes (x,y coords).

I thought it'd be something like,

```
a[c == cond] = b[c == cond] 
```

But in this case it is resulting in corrupted/garbled data when inspected. Is this the wrong way to go about this or is this the correct way and there is a problem with my code somewhere else?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:16:13.883

如果您使用的是新的 numpy 版本，请使用`np.copyto`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:51:24.723

如果数组具有完全相同的形状，那么您可以这样做

```
import numpy as np
a = np.random.rand(4,5,3)
b = np.random.rand(4,5,3)
c = np.random.rand(4,5,3)
cond = c > 0.5 # for example
b[cond] = a[cond] 
```

但是，如果形状在最后一个轴上不同，那么您需要解释您期望发生的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T03:07:44.990

抱歉，我复制到的数组具有不同的 dtype，它正在转换为该数组的 dtype，而不是将其转换为原始 dtype。通过使用与源数组相同的 dtype 初始化该数组来修复。

# spring - 如何在春季宁静中使用@ResponseStatus

> ID：15728074
> 
> 赞同：1
> 
> 时间：2013-03-31T09:19:45.637
> 
> 标签：spring, rest, response

全部，我想使用@ResponseStatus 向客户端返回一条消息，流程：

```
@ExceptionHandler(value = { Exception.class })
@ResponseStatus(value = HttpStatus.NOT_FOUND, reason = "not found mapping please check url")
@ResponseBody
public RestResponse<String> accessDenied() {
    RestResponse<String> restResponse = new RestResponse<String>();
    restResponse.setFailureMessageCn("xxxx");
    restResponse.setFailureMessagePt(messageSource.getMessage(
            "cemetery.operationFailed", null, LocaleUtils.toLocale("pt")));
    restResponse.setSuccess(false);
    restResponse.setBody(null);
    return restResponse;
} 
```

但它不能不工作。提前谢谢！

# asp.net-mvc-4 - LocalDB 在 Visual Studio IIS 中工作正常，部署到完整 IIS 时失败

> ID：15728078
> 
> 赞同：1
> 
> 时间：2013-03-31T09:20:17.877
> 
> 标签：asp.net-mvc-4, iis-7, iis-express, localdb

我的 MVC 4 项目中有一个代码优先的 localdb 数据库，如果我在 Visual Studio 2012 中运行该应用程序，它可以正常连接并且一切正常。当我发布到我的完整 IIS 并访问该站点时，数据库无法连接，我得到：

> “指定的 localdb 实例不存在”

我遇到了其他问题，似乎 localdb 是部署的噩梦！我也遵循了这里的所有建议：http: [//blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)

我仍然没有运气，为什么它在 VS IIS Express 而不是“真正的”IIS 中完美运行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T20:43:01.100

我建议在本地部署到**IIS时针对完整的 SQL Server 实例安装和开发以避免此问题。**

**LocalDB**是 SQL 服务器的一个非常小的子集（大约**30 MB**），因此您可以在不安装整个服务器应用程序的情况下对其进行开发。这在开发过程中与**IIS Express**一起工作得非常好。对于部署，该环境的数据库应托管在一个完整的 SQL Server Express/Developer/Standard/etc 上，并且应更改连接字符串以反映

正如您指出的那样，[该帖子](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)可能会阐明一种解决方法，但仅适用于使用带有**LocalDB**的本地 IIS 服务器（不是 IIS Express）进行开发。

# c# - RouteTable Routes，制作我自己的代理？

> ID：15728079
> 
> 赞同：-1
> 
> 时间：2013-03-31T09:20:18.883
> 
> 标签：c#, wcf

我喜欢控制并知道发生了什么，我也喜欢在我的网络服务中没有任何扩展名（.svc）。所以我没有在我的`Web.config`. 我使用`RouteTable`类来添加`Routes`. 像这些 ：

```
 RouteTable.Routes.Add(
            new ServiceRoute(@"Default",
                new CustomWebServiceHostFactory(),
                typeof(DefaultService)));
        RouteTable.Routes.Add(
            new ServiceRoute(@"Customer",
                new CustomWebServiceHostFactory(),
                typeof(CustomerService))); 
```

我尝试像这样在客户端消费

```
_defaultService = new ChannelFactory<IDefaultContract>(
new BasicHttpBinding(), new EndpointAddress(@"http://myWeb.com/Default/")).CreateChannel(); 
```

我收到错误消息：*“没有端点正在监听...”*
使用浏览器我可以调用任何操作（myWeb.com/Default/ReturnBool 返回 true）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:09:06.227

在里面添加了一个`BasicHttpBinding`ServiceEndpoint `CustomWebServiceHostFactory`，如果合同可用，现在我可以将服务作为客户端使用。

# django - 用 django 循环后台进程

> ID：15728081
> 
> 赞同：3
> 
> 时间：2013-03-31T09:20:54.543
> 
> 标签：django, background, monitoring

我正在用 django 做监控工作。该程序需要在后台永久循环以处理接收数据和更新数据库。

该工作可以通过编写 python 脚本来完成，并在后台运行，例如，supervisord。但是，我更喜欢 django 本身的解决方案；那就是服务器进程处于循环状态，监听传入的数据包。

任何建议都将具有很高的价值并受到赞赏。提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:16:05.147

如果您觉得 Celery 对于您的需求来说有点过大，您还可以定义一个[自定义管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)，该命令永远存在并等待您的传入数据包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:26:22.930

我建议您使用 Celery，它与 Django 一起使用，并且支持长时间运行的任务以及其他功能。

[http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html)

[http://docs.celeryproject.org/en/latest/getting-started/introduction.html](http://docs.celeryproject.org/en/latest/getting-started/introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T21:28:53.730

[https://github.com/lukedupin/django_posix_spawn](https://github.com/lukedupin/django_posix_spawn)

结合使用管理命令，您可以运行不会阻止您的网站的 django 任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T16:04:04.153

如果您需要一个“django-aware”循环并且已经使用 celery 执行异步任务，那么 [celery-eternal](http://celery-eternal.readthedocs.io)可能是一个不错的选择。唯一需要注意的是，您必须使用 redis 作为 celery 结果后端。

# maven - 将 Ant javadoc 转换为 Maven

> ID：15728086
> 
> 赞同：0
> 
> 时间：2013-03-31T09:21:37.687
> 
> 标签：maven, ant, javadoc

我正在将我的 ant 项目转换为 maven，并且还想添加 javadocs。我添加了 maven-javadoc-plugin，但我找不到它的参数的完整列表:(。

我的 ant 的 javadoc 是这样配置的：

```
<javadoc access="public"
 author="true"
 classpath="${junit_jar}"
 destdir="../doc"
 doctitle="TarsosDSP API ${version}-${DSTAMP}"
 nodeprecated="false"
 nodeprecatedlist="false"
 noindex="false"
 nonavbar="false"
 notree="false"
 packagenames="a.lot.of.packages"
 source="1.6"
 sourcepath="../src"
 splitindex="true"
 use="true"
 version="true" /> 
```

如何为 Maven 生成相同的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:37:56.227

你看过[maven-javadoc-plugin 配置](http://maven.apache.org/plugins/maven-javadoc-plugin/usage.html#Javadoc_Configuration)吗？

> Javadoc 插件支持大量的配置参数。每个配置参数都会变成一个标签名称。
> 
> 有关这些参数的列表，请参阅[Javadoc 插件文档](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html)。这些参数中的大多数都直接传递给 Javadoc 工具本身。

换句话说，将`<configuration>`标签添加到`<plugin>`元素（在 the`<build>`或`<reporting>`section 中：

```
 <configuration>
      <show>public</show>
      <author>true</author>
      <!-- more configuration here -->
    </configuration> 
```

# java - 我可以使用 String.format 构建 Sql 查询字符串吗

> ID：15728087
> 
> 赞同：6
> 
> 时间：2013-03-31T09:21:49.453
> 
> 标签：java, mysql

我是 Java 编程新手。我想使用`String.format`. 我已经`String.format`在 C# 中使用它并且工作正常，但在 java 中不行

```
String Query = String.format("insert into authentication(Id,Name,Email,Password,DOB,Gender,Phone,SQ,SA) values('{0}','{1}','{2}','{3}','{4}','{5}','{6}','{7}','{8}')", signup.getId(), signup.getName(), signup.getEmail(), signup.getPassword(), signup.getDate_Of_Birth(), signup.getGender(), signup.getPhone(), signup.getSQ(), signup.getSA());

try {
    ps = con.prepareStatement(Query);
    int i = ps.executeUpdate();
} catch (SQLException e) {
    e.printStackTrace();
}

return i; 
```

这里的注册是 bean 类对象。但是这种方法不起作用，它只在数据库中保存“{0}”、“{1}”...

我使用的另一种方法它工作正常，但与 string.format 相比，代码更多

```
try {
    ps = con.prepareStatement("insert into authentication Id=?,Name=?,Email=?,Password=?,DOB=?,Gender=?,Phone=?,SQ=?,SA=?,IsVerified=?,IsPay=? ");
    ps.setString(1, signup.getId());
    ps.setString(2, signup.getName());
    ps.setString(3, signup.getEmail());
    ps.setString(4, signup.getPassword());
    ps.setString(5, signup.getDate_Of_Birth());
    ps.setString(6, signup.getGender());
    ps.setString(7, signup.getPhone());
    ps.setString(8, signup.getSQ());
    ps.setString(9, signup.getSA());

    int i = ps.executeUpdate();
} catch (SQLException e) {
    e.printStackTrace();
} 
```

`String.format`是否可以在 java 中使用构建 SQL 查询字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:28:13.617

字符串格式化用于格式化 Java 字符串。例如，当我们需要将浮点数的 2 个小数点表示为字符串时，可以使用它们。请参阅下面的字符串格式化文章。[如何在 Scala 中使用 java.String.format？](https://stackoverflow.com/questions/3695230/how-to-use-java-string-format)但是，无论如何，您都可以使用字符串格式化技术。但是，您必须注意如何使用它。除了使用数字，您可能必须使用 C 类型，即使用带有 s 的百分号，例如 %s 用于放置在查询中的每个字符串。如果您的每个字符串都插入到 SQL 语句中，如链接中所示，您将必须指出位置。

Using PreparedStatement 是用于执行 JDBC SQL 语句的 Java 约定，因此应该使用它。

# python - Python 全局行为

> ID：15728088
> 
> 赞同：0
> 
> 时间：2013-03-31T09:22:00.060
> 
> 标签：python, global

在处理 500k XML 验证和relaxng 链接的脚本中，我尝试计算 myFunc() 中的案例。如果我使用全局变量，我必须在 myFunc() 中将它们标记为全局变量，然后才能更改它们。当我在 myFunc() 中打印出它们的值时，我可以看到值更改为 1、2、3、4 等等。但是当我打印出 run() 中的值时，我得到的不是更改的值。在 run() 中所有三个变量都为 0，就像在 myFunc() 中更改它们之前一样。

我知道有更好的方法来完成这项工作。但我的问题是为什么在 run() 中更改的全局变量不再更改，是否有可能实现这一点？

它与多处理有关吗？

```
valid = 0
excpt = 0
relaxerr = 0

def myFunc(link):
   try:
      global valid
      valid += 1
      print valid
      doc = etree.parse(urllib2.urlopen(link))
   except Exception, e:
      global except
      excpt += 1
      print excpt
      with open('log.txt', 'a') as f:
         f.write('%s\n' % e)
      return

   if not RELAXNG.validate(doc):
      global relaxerr
      relaxerr += 1
      print relaxerr
      with open('log.txt', 'a') as f:
         f.write('%s\n' % RELAXNG.error_log)
      return

   ....
   do stuff for valid ....

def run():
   ...
   pool.map_async(myFunc, links, 64)
   pool.wait()

   print valid
   print excpt
   print relaxerr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:55:50.123

该`run`函数在第一个进程中运行，而对的调用`myFunc`在**不同**的进程中完成，它们不共享地址空间。

您正在做的事情适用于线程（可能使用一些锁......），因为它们*确实*共享地址空间。

如果要使用`multiprocessing`，则必须在进程之间使用一些显式的进程通信。例如，您可以使用管道、队列或管理器（请参阅`multiprocessing`文档）。

# c - 创建一个 2D GtkWidget 数组

> ID：15728096
> 
> 赞同：0
> 
> 时间：2013-03-31T09:22:43.067
> 
> 标签：c, multidimensional-array, segmentation-fault, gtk, background-color

我想创建一个 GtkWidget 类型的 10x20 数组。我想让它们中的每一个都成为一个 GtkEventBox，我将在其中附加一个标签。

我应该如何创建和使用 2D GtkWidget* 数组？

这是我迄今为止尝试过的：

```
//global variable:
GtkWidget *labelPlate[ROWS][COLUMNS];
...
...
inside the function that creates the table and attaches the event boxes to it
//my table, where the EventBoxes will be attached to
GtkWidget *finalPlateTable = gtk_table_new (10, 20, TRUE);

int i, j;
for(i = 0; i<ROWS; i++){
    for(j=0 ; j<COLUMNS; j++){
        //Make a char with the current float and create a label with it.

        char finalString[14];
        sprintf(finalString, "%.2f", plate[i][j]);

        GtkWidget *label = gtk_label_new(finalString);;

        //Labels cannot have bg color, so attach each label to an event box
        /*HERE I GET SEG FAULT*/
        labelPlate[i][j]=gtk_event_box_new();

                    //adding the label to my eventbox
        gtk_container_add(GTK_CONTAINER(labelPlate[i][j]), label);

        //Add the corresponding bg color to each event box
        GdkColor color;
        switch(scalePlate[i][j]){
                            ...
                            ...
            break;
        }
                    //coloring the event box with the corresponding background
        gtk_widget_modify_bg ( GTK_WIDGET(labelPlate[i][j]), GTK_STATE_NORMAL, &color);
                    //attach the event box to the appropriate location of my table
        gtk_table_attach_defaults (GTK_TABLE (finalPlateTable), labelPlate[i][j], j, j+1, i, i+1);
        //show them!
        gtk_widget_show(label);
        gtk_widget_realize(labelPlate[i][j]);
    }
}
//adding the table to my vertical box, and show both of them
gtk_box_pack_start(GTK_BOX (verticalBox), finalPlateTable, TRUE, TRUE, 10);

gtk_widget_show (finalPlateTable);
gtk_widget_show (verticalBox); 
```

我想指出我对**C**相当陌生，我不知道如何使用`malloc`（但我怀疑我现在应该使用它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:15:59.787

我找到了一个解决方案：

将数组初始化为：

```
GtkWidget **myarray;
myarray = g_new(GtkWidget *, ROWS*COLUMNS); 
```

然后使用函数访问特定的行和列：

```
int returnPosAt(int row, int column){
    return row*COLUMNS+column;
} 
```

所以，那么，你可以打电话

```
myarray[returnPosAt(i, j)]=gtk_event_box_new(); 
```

因此，实际上您有一个 1D 数组，通过调用该函数，您可以获得 2D 位置 (i, j) 的相应 1D 位置。

# java - Java中的屏幕捕获

> ID：15728106
> 
> 赞同：0
> 
> 时间：2013-03-31T09:25:22.593
> 
> 标签：java, screen-recording

我已经用 java 编写了自己的代码来捕获屏幕并从捕获的屏幕创建视频。一切都按预期工作，但我无法获得我想要的帧数（12 帧每秒），我每秒最多只能拍摄 5 到 6 帧。我观察到这是因为拍摄的每一帧都被写入文件系统，以便以后使用它来创建视频。此文件写入操作正在执行，该操作正在达到一秒钟内要创建的帧数。我试图在内存中捕获帧，但在某些时候我的内存不足。有人可以建议如何实现这一目标。我试过多线程，但也没有用。

# arrays - Haskell 多态数组操作

> ID：15728110
> 
> 赞同：3
> 
> 时间：2013-03-31T09:25:44.087
> 
> 标签：arrays, haskell, polymorphism

我正在编写一堆不同的类型，并为列表和数组执行此操作。困扰我的一件事是我可以为列表编写一个多态排序函数，例如

```
bubblesort :: (Ord a) => [a] -> [a] 
```

但是当我尝试对`UArray`s 做同样的事情时：

```
alterUArray :: (Ix i, Ord e) => 
               (STUArray s i e -> ST s ()) -> UArray i e -> UArray i e
alterUArray alter ua = runST $ do
    mua <- thaw ua :: ST s1 (STUArray s1 i e)
    alter mua
    freeze mua 
```

它因来自 GHC 的[长错误消息](http://hpaste.org/84907)而失败（一个`UArray Int Int`运行良好的版本）。我试图指定`{-# LANGUAGE ScopedTypeVariables #-}`，但这并不能消除调用中类型`i e`的歧义。`thaw`没有类型的错误消息：http `thaw`: [//hpaste.org/84910](http://hpaste.org/84910)。

编写多态`UArray`操作需要什么？有一些基本的限制吗？是否有允许执行此类操作的编译器扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:39:39.420

有两个问题。首先，正如[dave4420 所指出的](https://stackoverflow.com/a/15728164/1011995)，状态中`runST`需要`alter`函数是多态的`s`。

然而，解决这个问题就无法解决第二个问题，即您需要(and )的`MArray`实例。你需要一个约束`thaw``freeze`

```
alterUArray :: (Ix i, Ord e, IArray UArray e, forall s. MArray (STUArray s) e (ST s)) => ... 
```

让它工作，因为`runST`是选择的一个`s`。但是您不能指定这样的约束。

如果你给出一个特定的元素类型（`Int`, `Double`, ...），它可以工作，因为有一个

```
instance MArray (STUArray s) Int (ST s) where ... 
```

因此，无论选择什么，都可以满足`thaw`和的要求（并且不需要说明约束）。`freeze``s``runST`

如果您选择盒装数组而不是未盒装数组，它也可以工作，因为还有一个

```
instance MArray (STArray s) e (ST s) where ... 
```

因此对需要在`alterUArray`. （对列表元素的类型没有限制，并且列表元素是装箱的，所以装箱的数组是列表的对应关系，而不是未装箱的数组）。

如果你能忍受弄脏你的手，你可以通过替换来规避这个`ST s`问题`IO`，

```
alterUArray :: (Ix i, Ord e, MArray IOUArray e IO, IArray UArray e) =>
               (IOUArray i e -> IO ()) -> UArray i e -> UArray i e
alterUArray alter ua = unsafePerformIO $ do
    mua <- thaw ua
    alter mua
    freeze mua 
```

只需要`FlexibleContexts`。但是，这允许传递一个错误的`alter`参数，该参数会做一些邪恶的`IO`事情，并且会对调用者隐藏它。因此，让我们`unsafePerformIO`通过在参数上强制使用更通用的类型来安全地使用这里`alter`：

```
{-# LANGUAGE FlexibleContexts, RankNTypes, ScopedTypeVariables #-}

import Data.Array.Unboxed
import Data.Array.IO
import System.IO.Unsafe

alterUArray :: forall i e. (Ix i, Ord e, IArray UArray e, MArray IOUArray e IO) =>
               (forall m u. MArray u e m => u i e -> m ()) -> UArray i e -> UArray i e
alterUArray alter ua = unsafePerformIO $ do
    mua <- thaw ua :: IO (IOUArray i e)
    alter mua
    freeze mua 
```

现在我们已经给出`alter`了一个类型，它使得`IO`不使用自身就无法进行恶意操作`unsafePerformIO`，所以`unsafePerformIO`这里的使用不会引入额外的不安全性——以更多需要的扩展为代价。

（注意：虽然`thaw`需要获取原始数组的副本，但冻结时不需要额外的副本，这可能`unsafeFreeze`没有问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:02:42.160

我也被这样的问题困扰。现在我相信编写这样的多态函数是不可能的。

我们可以写

```
alterArray :: (Ix i, IArray b e, IArray a e, MArray a2 e m) => 
              (a2 i e -> m a1) -> a i e -> m (b i e)
alterArray alter ua = do
    mua <- thaw ua 
    alter mua
    freeze mua 
```

或者

```
alterUArrayST :: (Ix i, IArray UArray e, MArray (STUArray s) e (ST s)) => 
                 (STUArray s i e -> ST s ()) -> UArray i e -> ST s (UArray i e)
alterUArrayST alter ua = do
    mua <- thaw ua 
    alter mua
    freeze mua 
```

但是如果我们想摆脱`ST`，我们必须编写一些特定于类型的版本，例如

```
alterUArrayInt :: (forall s. STUArray s Int Int -> ST s ()) -> UArray Int Int -> UArray Int Int
alterUArrayInt alter ua = runST $ do
    mua <- thaw ua 
    alter mua
    freeze mua

alterUArrayFloat :: (forall s. STUArray s Int Float -> ST s ()) -> UArray Int Float -> UArray Int Float
alterUArrayFloat alter ua = runST $ do
    mua <- thaw ua 
    alter mua
    freeze mua 
```

如果`MArray`有一个实例`MArray (STUArray s) e (ST s)`，我认为我们可以编写这样的多态函数。不幸的是，`MArray`没有这样的例子。

[yairchu 在https://stackoverflow.com/a/2244281/779412](https://stackoverflow.com/a/2244281/779412)中为此类问题提供了另一种解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:35:10.190

将类型声明更改为

```
alterUArray :: (Ix i, Ord e) => 
               (forall s. STUArray s i e -> ST s ()) -> UArray i e -> UArray i e 
```

并摆脱`thaw ua`.

您需要启用`RankNTypes`扩展程序（或者`Rank2Types`，尽管已弃用）（但您不需要这样做才能使用`runST`吗？我忘记了）。

说明：你原来的类型声明相当于

```
alterUArray :: (Ix i, Ord e) => 
               forall s. (STUArray s i e -> ST s ()) -> UArray i e -> UArray i e 
```

这意味着`alterUArray`调用者可以选择是什么`s`。我改变的类型坚持相反，它`alterUArray`可以选择自己是什么`s`。然后，您的代码将选择`s`to `runST`; 它的类型坚持它可以做出选择。

# dynamic-programming - 解决每个项目上具有“最小值”约束的背包问题

> ID：15728112
> 
> 赞同：0
> 
> 时间：2013-03-31T09:26:20.013
> 
> 标签：dynamic-programming, knapsack-problem

每个项目都有三个属性

*   物品大小 S [i]
*   项目 V [i的价值]
*   将物品放入背包所需的最小值 M [i] (<= 10 ⁷ )

最多将有 100 个项目。

我们得到背包的大小 K (K <= 1000) 和初始值 V（在背包中不占空间）。[当且仅当 M i]小于或等于 V
时，才能将物品“i”放入背包中。在背包中添加物品后，V 增加了 V [i]。我们必须最大化放入给定尺寸背包的物品数量（而不是价值）。

我发现[这个问题](https://stackoverflow.com/questions/13404173/whats-the-fastest-way-to-solve-knapsack-prob-with-two-properties)很相似。但是答案中描述的算法是立方时间，对于这个问题来说不够快。我们如何以更好的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:28:55.213

我可以在这里给出一个 O(n^3) 算法。不知道这个问题是否可以进一步优化到O(n^2)。

首先，这个问题是最大化if items的数量，这与其他背包问题有点不同。同时，它也有一个限制，即只有当背包的总价值大于其自身价值时，才能选择单个物品。所以一个明显的推论是，在选择相同数量的物品和固定总大小的情况下，总价值应该尽可能大（以便可以将更多物品添加到背包中）。

注意物品的数量n(<=100)和背包的大小K(<=1000)不是很大，设f[i][j]表示选择i个总大小为j的物品时的最大值。最初，所有 f[i][j] 都设置为 0，除了 f[0][0]=V。

然后根据需要添加的最小值对项目进行排序。这是一个贪心的想法，因为在排序之后，我们只能遍历每个项目一次。

DP 方法如下所示：

```
for (int k=0;k<n;k++) //iterate items
    for (int i=n;i>=0;i--)
        for (int j=K;j>=0;j--) if (item.M[k]<=f[i][j])
            f[i+1][j+item.S[k]]=max(f[i+1][j+item.S[k]],f[i][j]+item.V[k]); 
```

最终答案（最大项目数）是：

```
for (int i=n;i>=0;i--)
    for (int j=0;j<=K;j++)
        if (f[i][j]) return i; 
```

# php - 上传成功弹窗

> ID：15728116
> 
> 赞同：0
> 
> 时间：2013-03-31T09:27:30.697
> 
> 标签：php, ajax

我想上传一个文件，上传成功后，服务器有一个关于上传成功的ajax回调，在前端我会弹出一个窗口告诉用户上传成功，有没有办法为达到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:33:10.540

[会话上传进度](http://www.php.net/manual/en/session.upload-progress.php)描述了如何跟踪上传进度。

# c++ - 连接主窗口类外的插槽

> ID：15728120
> 
> 赞同：0
> 
> 时间：2013-03-31T09:28:09.670
> 
> 标签：c++, qt, qt4, signals-slots

我有一些 GUI（显示使用中的账单`QTableWidget`），我在文件中的`MainWindow`类之外实现了这些。`checkout.cpp`我在连接`checkout.cpp`. 由于`MainWindow`该类继承自`QMainWindow`，因此我可以将适当的槽函数与 this 对象相关联。

如何在`CheckOut`不继承自 Q`MainWindow`或的类中执行此操作`QWidget`？

**编辑（代码）：**

```
CheckOut::CheckOut(string token)The CheckOut class does not inherit any other class. I am getting error: /home/sudeep/Desktop/mesonero project/mesonero-build-desktop-Qt_4_8_1_in_PATH__System__Release/../mesonero/management.cpp:29: error: no matching function for call to 'QObject::connect(QPushButton*&, const char [11], Management* const, const char [8])'
{   CustomerToken = token;
   if(!findCustomer())
       QMessageBox::critical(0,QObject::tr("Check Out"),"Invalid Customer Token");
   else{
           generateBill();
           provideDiscount();
           QPushButton *payButton = new QPushButton("Pay");
           QObject::connect(payButton,SIGNAL(clicked()),this,SLOT(deleteCustomer()));
           CustomerBill->layout()->addWidget(payButton);
       }
}

void CheckOut::deleteCustomer()
{
       DatabaseManager *dbm = DatabaseManager::Instance();

       QSqlQuery query("DELETE FROM `Residing_Customer` WHERE Customer_Token = '"+QString::fromStdString(CustomerToken)+"'",dbm->db);
       query.exec();
       CustomerBill->close();
} 
```

**编辑（错误）：**

/`home/sudeep/Desktop/mesonero project/mesonero-build-desktop-Qt_4_8_1_in_PATH__System__Release/../mesonero/checkout.cpp:29: error: no matching function for call to 'QObject::connect(QPushButton*&, const char [11], CheckOut* const, const char [8])'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:41:01.910

当您想使用插槽和信号时，您需要`Q_OBJECT`在类的私有部分中添加并继承自`QObject`.

您可以使用的任何 Qt 类都继承自`QObject`，因此如果您从 a 继承，那么`QWidget`您也继承自`QObject`.

```
class CheckOut : public QObject {
Q_OBJECT
...
} 
```

如果要将`QObject*`父对象传递给`CheckOut`构造函数，则可能还需要`QObject`使用该父对象构建子对象：

```
CheckOut::CheckOut(QObject* parent) : QObject(parent) { ... } 
```

# android - 如何处理首选项中的 RadioButton 检查事件？

> ID：15728125
> 
> 赞同：0
> 
> 时间：2013-03-31T09:28:26.853
> 
> 标签：android, android-intent, android-preferences

我希望我的列表视图按我创建的首选项中的选定选项排序，所以任何人都可以告诉我或提供一个代码来处理单选按钮的检查事件吗？
![在此处输入图像描述](https://i.stack.imgur.com/dFvr0.jpg)

```
 <PreferenceCategory
   android:summary="Sorting Order"
   android:title="Sort By" >

  <ListPreference
 android:entries="@array/listOptions"
 android:entryValues="@array/listValues"
 android:key="listpref"
 android:summary="Sorting Values"
 android:title="Sort Order" />
 </PreferenceCategory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T20:20:38.027

Within your activity, you would have it implement the SharedPreferences.OnSharedPreferenceChangeListener and implement the method:

```
onSharedPreferenceChanged(SharedPreferences prefs, String key) 
```

[http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html)

For example:

```
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        if (key != null) {
          if (key.contentsEquals("your_key_value_within_preferences") {
             //Stuff to do based on changes in preferences
          }
        }
} 
```

Though it may differ from your application, check out the CubeLiveWallpaper example from the Google Android examples, as it has a thorough implementation.

# wordpress - 将 JAvascript 代码悬停在视频效果上的位置

> ID：15728139
> 
> 赞同：1
> 
> 时间：2013-03-31T09:31:05.733
> 
> 标签：wordpress

有谁知道我会放这个代码吗？在 wordpress 中.. 我把它放在 funtions.php 以及页脚和页眉中，我得到的只是一个字符串错误或编写的代码

```
var vid = document.getElementsByTagName("video");
[].forEach.call(vid, function (item) {
    item.addEventListener('mouseover', hoverVideo, false);
    item.addEventListener('mouseout', hideVideo, false);
});

function hoverVideo(e)
{   
    this.play();
}
function hideVideo(e)
{
    this.pause();
} 
```

它是一个 JavaScript

至于 HTML 代码，我把它放在帖子或页面文本编辑器中

这是我试图达到的效果-> [http://jsfiddle.net/ymV8J/10/](http://jsfiddle.net/ymV8J/10/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:36:47.260

`</body>`我通常将 javascript 代码放在结束标记之前的页脚中。

确保 javascript 代码位于**script**标签内，如下所示：

```
<script type="text/javascript"> 
//Your javascript code
</script> 
```

我刚刚在我的开发 WordPress 网站上尝试了来自 jsFiddle 的代码，它运行良好。

同样对于 jsFiddle 中的 HTML 部分，您只需要复制标签内的`<body>`代码。

# javascript - 继续获取 NaN 而不是 0

> ID：15728140
> 
> 赞同：2
> 
> 时间：2013-03-31T09:31:14.203
> 
> 标签：javascript

这是一个从 Bing 检索结果并填充 Object 数组的函数。

```
callBing: function (query, callback) {
    var url = 'http://localhost/meta/public/bing/'+query ; 
    $.getJSON(url, function(data) {
        total_bing = data.d.results[0].WebTotal;
        var j = 0 ;
        $.each(data.d.results[0].Web, function() {
            var obj = new res(j+1, this.Title, this.Description, this.Url, 0) ; 
            b.push(obj) ; 
            j=j+1 ;
        });
        console.log(b);
        callback(b, total_bing);
    });
}, 
```

这是 res 对象的构造函数

```
function res(id,title,desc,url,score)
{
    this.id=id;
    this.title=title;
    this.desc=desc;
    this.url=url;
    this.score=score;
    this.changeRankScore=changeRankScore;
    function changeRankScore(Rankscore)
    {
        this.score=Rankscore;
        return Rankscore; 
    }

} 
```

如您所见，当为构造函数检索每个结果时，它会使用结果对象填充数组。

结果对象的分数是构造函数中的最后一个参数，它是 0，但它**`NaN`**在控制台中显示。

这是一个截图 [![在此处输入图像描述](https://i.stack.imgur.com/KTFsr.png)](https://i.stack.imgur.com/KTFsr.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:46:42.767

正如@freakish 所说，调用后可能`score`已经更改了`console.log`，但`console.log`碰巧显示了更改后的值。

你可以`console.log(b[0].score)`在之前和之后尝试`callback`

# automatic-ref-counting - CGAffineTransform 是否符合 ARC？

> ID：15728141
> 
> 赞同：2
> 
> 时间：2013-03-31T09:31:16.123
> 
> 标签：automatic-ref-counting, cgaffinetransform

只是出于兴趣，ARC 是否会处理此问题，或者您是否必须释放转换？

```
UISlider *slider = [[UISlider alloc] init];
CGAffineTransform transform = CGAffineTransformMakeRotation (DEGREES_TO_RADIANS(90));
slider.transform = transform; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:22:08.777

没有什么要完全符合的。ARC 是关于 Objective-C 引用计数（对象的内存管理）。核心基础 API 是 C。`CGAffineTransform`是 C `struct`。C 结构没有引用计数，它们不能发送对象消息，例如保留和释放（它不会编译）。这非常简单地意味着必须在某处手动释放 CGAffineTransform 结构。一件好事是，您可以创建它并仅在方法或函数中使用它，因此它的生命周期仅限于此。否则，您应该将其用作属性或 ivar，因此将通过擦除对象实例来处理它。

无论哪种方式，只要它以其中一种方式使用，你应该没问题（除非你正在创造很多这样的担忧）正如你在下面看到的那样，它不是很大......

```
struct CGAffineTransform {
   CGFloat a;
   CGFloat b;
   CGFloat c;
   CGFloat d;
   CGFloat tx;
   CGFloat ty;
};
typedef struct CGAffineTransform CGAffineTransform; 
```

在直接 C 中，或者如果你大量使用这些，你会开始想做 malloc() （或它的表亲之一）和 free()

# emacs - 如何重构这个 Emacs lisp？

> ID：15728148
> 
> 赞同：0
> 
> 时间：2013-03-31T09:32:50.203
> 
> 标签：emacs, elisp, emacs-faces

我对动态符号等的语法不太满意。我想我可能可以`dolist`在这里做一些颜色列表，但不确定是什么：

```
 (custom-set-faces
   `(term-color-black ((t (:inherit term-color-black :background ,(face-attribute 'term-color-black :foreground)))))
   `(term-color-red ((t (:inherit term-color-red :background ,(face-attribute 'term-color-red :foreground)))))
   `(term-color-green ((t (:inherit term-color-green :background ,(face-attribute 'term-color-green :foreground)))))
   `(term-color-yellow ((t (:inherit term-color-yellow :background ,(face-attribute 'term-color-yellow :foreground)))))
   `(term-color-blue ((t (:inherit term-color-blue :background ,(face-attribute 'term-color-blue :foreground)))))
   `(term-color-magenta ((t (:inherit term-color-magenta :background ,(face-attribute 'term-color-magenta :foreground)))))
   `(term-color-cyan ((t (:inherit term-color-cyan :background ,(face-attribute 'term-color-cyan :foreground)))))
   `(term-color-white ((t (:inherit term-color-white :background ,(face-attribute 'term-color-white :foreground)))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:34:43.150

这不是 100% 相同，但在大多数情况下是等价的：

```
(defmacro set-term-faces (names)
  `(custom-set-faces
    ,@(loop for color in names
         for sym = (intern (concat "term-color-" (symbol-name color)))
         collect (list 'quote
                       `(,sym ((t (:inherit ,sym
                                   :background
                                   ,(face-attribute sym :foreground)))))))))

(set-term-faces (black red green yellow blue magenta cyan white)) 
```

差异在于评估`,(face-attribute ...)`发生的时间点。即这个宏不会产生与你相同的源代码，它已经计算了逗号后的表达式，所以如果你的代码在宏内，那会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:58:49.500

您*可以*重构该代码，但您可能不应该这样做。所有`(custom-set-...)`代码都是由 Emacs 的“[轻松定制](http://www.gnu.org/software/emacs/manual/html_node/emacs/Easy-Customization.html#Easy-Customization)”系统自动生成的。因此，如果您对其进行重构，则很有可能

1.  你破坏了与定制系统的兼容性
2.  下次自定义人脸时，重构的代码将被原始代码覆盖

但是，如果您发现 .emacs 文件过于混乱，您可以配置 Emacs 以将自定义代码写入单独的文件。请参阅[此](https://stackoverflow.com/a/5058752/261142)对相关问题的回答，以及 Emacs 的[文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Customizations.html)。

# mobile - Worklight：阻止从浏览器访问 App URL

> ID：15728151
> 
> 赞同：0
> 
> 时间：2013-03-31T09:33:29.040
> 
> 标签：mobile, console, ibm-mobilefirst, restrictions

我想阻止用户访问/使用 Worklight 部署的应用程序 URL。

**例如，**

```
http://myserverDomain/myProjApp/apps/services/preview/CardApp/common/0/default/GoodApp.html 
```

现在我不希望用户去输入上面的 URL 并访问应用程序。

但是，此限制不得阻止移动用户从设备运行或使用其应用程序。

实现这一目标的方法是什么？

我已经在公共 IP 上提供了我的应用程序，并且设备指向它。

使用 IBM HTTP 服务器，一个 url 已经公开，然后我在**application-descriptor.xml**文件中使用它，以便生成的应用程序可以指向一个公共 URL 并与 WL 服务器连接。这样，我的应用程序就可以正常工作。但我也可以通过浏览器访问 URL，也可以登录。我正在考虑仅通过浏览器阻止访问的可能性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:08:02.393

有多种方法可以做到这一点：

1.  正如 Idan 建议的那样，您是否阻止了服务器上的 http://myserverDomain/myProjApp/apps/services/preview/*。
2.  通过 authenticationConfig.xml 你可以阻止静态资源。那里有一个用于保护控制台的示例（您也应该这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:20:08.567

您应该在您的服务器（无论是 Apache 还是其他）上限制对您不希望公开的 URL 的访问。

此限制不会影响您的应用用户。

让您的 IT 部门处理此问题（这不是开发人员的角色）。 [请参阅 Worklight 相关 URL 的结构](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=/com.ibm.worklight.help.doc/topics/c_wlserveradmin.html)。您的 IT 部门应该知道如何处理这些问题，以便公众无法直接访问它们。

# android - HoloEverywhere 下拉项目太大

> ID：15728163
> 
> 赞同：0
> 
> 时间：2013-03-31T09:34:58.953
> 
> 标签：android, drop-down-menu, menu, spinner

我将 HoloEverywhere 用于我的 Android 应用程序，下拉项目相当奇怪。它们比原生 Android 4+ 中的要大得多，而且比必要的要大。例如，这是它查找[下拉菜单](http://i.imgur.com/ZCiQtND.jpg)的方式，这是在[微调器](http://i.imgur.com/S8tAkmk.jpg)中使用时。

我搜索了 HoloEverywhere 的样式，并找到了一些我认为可能导致这种超大尺寸的资源。当然，我不能只更改库中的那些属性，我需要以某种方式为我的应用程序覆盖它们。

但是改变下拉项目高度的最简单方法是什么？

编辑：

这实际上是我使用的旧版本 HoloEverywhere 中的一个错误。它现在已经修复，所有下拉项目看起来都应该是这样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:11:48.703

这可以按如下方式完成...

1>在xml中创建菜单

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item 
    android:id="@+id/spinner_menu_item"
    android:showAsAction="always" 
    android:actionLayout="@layout/spinner" />
</menu> 
```

2>根据需要设置布局

```
<?xml version="1.0" encoding="utf-8"?>
<com.actionbarsherlock.internal.widget.IcsSpinner xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/spinner_menu"
android:layout_width="wrap_content"
android:layout_height="wrap_content"  
/> 
```

3>然后在 onCreateOptionsMenu 调用必要的方法并相应地设置值...

有关更多信息，请参阅下面的链接...

[如何使用 actionbarsherlock 创建自定义下拉菜单？](https://stackoverflow.com/questions/14106399/how-to-create-custom-drop-down-menu-with-actionbarsherlock)

# objective-c - 从 tableview 中的 url 创建 NSMutableArray 以存储图像

> ID：15728166
> 
> 赞同：1
> 
> 时间：2013-03-31T09:35:12.613
> 
> 标签：objective-c, uitableview, uiimageview, nsmutablearray

我想在数组中存储来自 url 的 4 本书图像（.php？**p=1** & **b=1**显示第一本书的第一个图像）并运行该代码并在 tableview 中使用这些图像。

我也想在表格视图中创建任何单元格并将第一个图像专用于第一个单元格（第二个图像到第二个单元格等）

这是我的代码：

```
#import "CarTableViewController.h"
#import "CarTableViewCell.h"

@implementation CarTableViewController
{
    NSData *b;
}
@synthesize carImages;
@synthesize carModels; 
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *numberbook =[[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://192.168.1.101/mamal/book.php?all"]];

    NSInteger numbook = [numberbook integerValue];

    NSString *a;

    for (int i = 1; i <=numbook; i++) {
        a = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/mamal/book.php?info=1&b=%d",i]]];
        NSLog(@"%@",a); //names of book

        if(!carModels){
            carModels = [NSMutableArray array];
        }
        [carModels addObject:a];

        b = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/mamal/book.php?p=1&b=%d",i]]];
        NSLog(@"%@",b);
        if (!carImages) {
            carImages = [NSMutableArray array];
        }
        [carImages addObject:b];
    }
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [carModels count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"carTableCell";
    CarTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil) {
        cell = [[CarTableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.modelLable.text = [carModels objectAtIndex:[indexPath row]];

    UIImage *carPhoto = [UIImage imageWithData:b];
    cell.carImage.image = carPhoto;

    return cell;
} 
```

但是当运行此代码模拟器时，在 tableview 中显示 4 个具有 4 个不同名称的单元格（正确！我想要这个）和任何单元格的最后一个图像！！！！？？？？XD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:28:48.443

`b`每次加载新图像时，保存图像数据的实例变量都会被覆盖，因此最后一个加载的是数据所在的那个。

```
b = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/mamal/book.php?p=1&b=%d",i]]];
NSLog(@"%@",b);
if (!carImages) {
    carImages = [NSMutableArray array];
}
[carImages addObject:b]; 
```

配置单元格时，您将图像设置为此数据，而不是访问`carImages`数组。

就像您对以下内容所做的那样`carModels`： cell.modelLable.text = [carModels objectAtIndex:[indexPath row]];

```
UIImage *carPhoto = [UIImage imageWithData:[carImages objectAtIndex:[indexPath row]]];
cell.carImage.image = carPhoto; 
```

如果可以的话，有两个改进建议：

1.  做`b`一个局部变量。无需将其作为实例变量。您已经看到这可能会导致混乱并因此导致错误。
2.  加载数据后创建`UIImage`权利并将该图像放入`carImages`数组中。这样，您只需解析每个图像的数据一次，而不是每次显示单元格时。

    ```
    // ...
    NSData* b = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/mamal/book.php?p=1&b=%d",i]]];
    NSLog(@"%@",b);
    if (!carImages) {
        carImages = [NSMutableArray array];
    }
    UIImage *img = [UIImage imageWithData:b];
    [carImages addObject:img];
    //... 
    ```

    然后稍后，在配置单元格时，您可以这样做

    ```
    cell.carImage.image = [carImages objectAtIndex:[indexPath row]]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:30:09.723

那是因为您`NSData *b`对所有单元格重复使用相同的变量（因此它们显示 b 的最新状态，这是最后一张图像）

进行以下更改

代替

```
UIImage *carPhoto = [UIImage imageWithData:b]; 
```

做

```
UIImage *carPhoto = [[UIImage imageWithData:[carImage objectAtIndex:indexPath.row]]; 
```

# c# - 使用 printdocument 的 winrt 打印不适用于大图像

> ID：15728169
> 
> 赞同：3
> 
> 时间：2013-03-31T09:35:54.283
> 
> 标签：c#, image, printing, windows-runtime, printdocument

我正在尝试使用 Windows 8 中的 PrintDocument 进行打印。但是，当 StackPanel 中存在大图像时，我会遇到各种问题。有时我得到空白页，在其他情况下，程序卡在 printDoc.AddPage 中，在其他情况下，PrintTask 完成时出现错误。如果我将 imgae 更改为较小的图像，一切都会很好。如果我尝试使用 DecodePixelWidth 调整图像大小，有时效果很好，而在其他情况下则不行（PringtTask 完成时出现错误）。这是我正在使用的代码：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        for (int i = 0; i < 6; i++)
        {
            //1\. Prints empty page
            BitmapImage bmi = new BitmapImage(new Uri("http://www.colby.edu/academics_cs/ocs/students/images/Spatz_Charles_13_NewZealand.jpg"));
            //2\. Gets stuck on printDoc.AddPage(viewer)
            // BitmapImage bmi = new BitmapImage(new Uri("http://littlefieldreport.files.wordpress.com/2012/10/new-zealand-high-view.jpg"));
            //3\. Works well
            //BitmapImage bmi = new BitmapImage(new Uri("http://www.touristmaker.com/images/new-zealand/new-zealand-forest.jpg"));
            //bmi.DecodePixelWidth = 600;
            Image image = new Image()
            {
                Source = bmi
            };
            image.Width = 150;
            panel.Children.Add(image);
        }
        panel.UpdateLayout();
    }

    private PrintDocument printDocument = null;
    private IPrintDocumentSource printDocumentSource = null;
    private void PrintTaskRequested(PrintManager sender, PrintTaskRequestedEventArgs e)
    {
        PrintTask printTask = null;
        printTask = e.Request.CreatePrintTask("Print Task", sourceRequested =>
        {
            IList<string> displayedOptions = printTask.Options.DisplayedOptions;

            // Choose the printer options to be shown.
            // The order in which the options are appended determines the order in which they appear in the UI
            displayedOptions.Clear();
            displayedOptions.Add(StandardPrintTaskOptions.Copies);
            displayedOptions.Add(StandardPrintTaskOptions.Orientation);
            displayedOptions.Add(StandardPrintTaskOptions.MediaSize);
            displayedOptions.Add(StandardPrintTaskOptions.Collation);
            displayedOptions.Add(StandardPrintTaskOptions.Duplex);

            printTask.Options.MediaSize = PrintMediaSize.NorthAmericaLegal;

            printTask.Completed += async (s, args) =>
            {
                if (args.Completion == PrintTaskCompletion.Failed)
                {
                    await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
                    {
                        //rootPage.NotifyUser("Failed to print.", NotifyType.ErrorMessage);
                    });
                }
            };

            sourceRequested.SetSource(printDocumentSource);
        });
    }

    private void RegisterForPrinting()
    {
        printDocument = new PrintDocument();
        printDocumentSource = printDocument.DocumentSource;
        printDocument.Paginate += CreatePrintPreviewPages;
        printDocument.GetPreviewPage += GetPrintPreviewPage;
        printDocument.AddPages += AddPrintPages;
        PrintManager printMan = PrintManager.GetForCurrentView();
        printMan.PrintTaskRequested += PrintTaskRequested;
    }

    private void UnregisterForPrinting()
    {
        if (printDocument == null)
            return;

        printDocument.Paginate -= CreatePrintPreviewPages;
        printDocument.GetPreviewPage -= GetPrintPreviewPage;
        printDocument.AddPages -= AddPrintPages;

        PrintManager printMan = PrintManager.GetForCurrentView();
        printMan.PrintTaskRequested -= PrintTaskRequested;
    }

     private void CreatePrintPreviewPages(object sender, PaginateEventArgs e)
    {
        PrintDocument printDoc = (PrintDocument)sender;
        printDoc.SetPreviewPageCount(1, PreviewPageCountType.Intermediate);
    }

    private void GetPrintPreviewPage(object sender, GetPreviewPageEventArgs e)
    {
        PrintDocument printDoc = (PrintDocument)sender;

        printDoc.SetPreviewPage(e.PageNumber, viewer);
    }

    private void AddPrintPages(object sender, AddPagesEventArgs e)
    {
        PrintDocument printDoc = (PrintDocument) sender;
        printDoc.AddPage(viewer);

        printDoc.AddPagesComplete();
    }

    #region Navigation
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        RegisterForPrinting();
    }

    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        UnregisterForPrinting();
    }
    #endregion

} 
```

MainPage 在 ScrollViewer 中包含一个 StackPanel。有谁知道这里可能是什么问题？

# python - 'gi.repository.Gtk' 对象没有属性 'gdk'

> ID：15728170
> 
> 赞同：6
> 
> 时间：2013-03-31T09:36:13.400
> 
> 标签：python, multithreading, gtk, raspberry-pi, gdk

我正在尝试使用 GTK 创建多线程。需要 Gtk.gdk 但我收到关于没有 gdk 属性的错误。我正在使用带有 Raspbian 的 Raspberry Pi。

这就是我导入 GTK 库的方式。

```
try:  
    import pygtk
    pygtk.require("2.0")  
except:  
    pass  

try:  
    from gi.repository import Gtk
except:  
    print("GTK Not Available")
    sys.exit(1)

Gtk.gdk.threads_init() 
```

这是我收到的错误。

> AttributeError'gi.repository.Gtk' 对象没有属性 'gdk'

任何的想法？

更新：我正在关注本教程[http://faq.pygtk.org/index.py?req=show&file=faq14.023.htp](http://faq.pygtk.org/index.py?req=show&file=faq14.023.htp) ，它们同时使用了 GObject.threads_init() 和 Gtk.gdk.threads_init()。我使用 GObject 但 gdk 没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T09:43:39.643

我认为相当于旧式的`gtk.gdk.threads_init()`是：

```
from gi.repository import Gdk
Gdk.threads_init() 
```

但是，正如[常见问题解答所警告](http://faq.pygtk.org/index.py?req=show&file=faq14.023.htp)的那样，线程并不是实现此目标的干净方法。更好的方法是`GObject.idle_add`在 GUI 空闲时使用来运行函数。

* * *

```
"""Show a shell command's output in a gtk.TextView without freezing the UI"""

import os
import locale
import subprocess
import shlex
import gi.repository.Gtk as gtk
from gi.repository import GObject
PIPE = subprocess.PIPE

encoding = locale.getpreferredencoding()

def utf8conv(x):
    return unicode(x, encoding).encode('utf8')

class MyWindow:
    def __init__(self):
        sw = gtk.ScrolledWindow()
        sw.set_policy(gtk.PolicyType.AUTOMATIC, gtk.PolicyType.AUTOMATIC)
        textview = gtk.TextView()
        textbuffer = textview.get_buffer()
        sw.add(textview)
        win = gtk.Window()
        win.resize(300, 500)
        win.connect('delete-event', gtk.main_quit)

        self.button_sim = gtk.Button(u"Press me!")
        self.button_abort = gtk.Button("Abort")
        self.button_quit = gtk.Button("Quit")

        command = 'ls -R %s' % (os.getcwd(),)
        self.button_sim.connect(
            "clicked", self.on_button_clicked, textview, textbuffer, command)
        self.button_abort.connect("clicked", self.on_abort)
        self.button_quit.connect("clicked", self.main_quit)

        vbox = gtk.VBox()
        vbox.pack_start(self.button_sim, expand=False, fill=False, padding=0)
        vbox.pack_start(self.button_abort, expand=False, fill=False, padding=0)
        vbox.pack_start(self.button_quit, expand=False, fill=False, padding=0)
        vbox.pack_start(sw, expand=True, fill=True, padding=0)
        win.add(vbox)
        win.show_all()

    def read_output(self, view, buffer, command):
        yield True  # allow the UI to refresh
        proc = subprocess.Popen(
            shlex.split(command), stderr=PIPE, stdout=PIPE)
        while True:
            if self.job_aborted:
                print('user aborted')
                proc.terminate()
                break

            try:
                line = proc.stdout.readline()
                if line:
                    it = buffer.get_end_iter()
                    buffer.place_cursor(it)
                    buffer.insert(it, utf8conv(line))
                    view.scroll_to_mark(buffer.get_insert(), 0.1,
                                        use_align=False, xalign=0.5, yalign=0.5)

            except IOError:
                pass

            yield True

        yield False

    def on_button_clicked(self, button, view, buffer, command):
        self.job_aborted = False
        GObject.idle_add(self.read_output(view, buffer, command).next)

    def on_abort(self, button):
        self.job_aborted = True

    def main_quit(self, obj):
        self.job_aborted = True
        gtk.main_quit()

if __name__ == "__main__":
    app = MyWindow()
    gtk.main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-14T11:31:09.240

由于您使用的是 gtk from `gi.repository.Gtk`，您可以尝试以类似的方式获取 gdk，但请注意其属性可能与原始属性不同`gtk.gdk`。

```
from gi.repository import Gdk as gdk 
```

# wcf - Azure Active Directory 和 WCF

> ID：15728174
> 
> 赞同：2
> 
> 时间：2013-03-31T09:36:46.957
> 
> 标签：wcf, azure, active-directory, wif, ws-trust

如何使用 Azure Active Directory 保护 WCF 服务：

**我的状态：** - 我的包含业务逻辑的 WCF 服务托管在 Azure WebRole 上。

**我希望您的帮助执行以下操作：**

*   在 Azure 中配置我的 WCF 服务以将身份验证过程联合到 Azure Active Directory。
*   通过提供他的 [用户名/密码]，配置我的 WCF 客户端以从 Azure Active 目录获取令牌。
*   配置我的 WCF 服务以验证客户端的令牌。

**我的环境限制：**

*   周转基金 4.5 。
*   WIF 4.5。
*   视觉工作室 2012 。
*   这是一个概念证明，我必须使用自签名证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:05:18.123

阿列克谢的回答应该让你开始。但我要提一件事：

> 使用 Azure ACS，我通过 [ACS 服务标识] 为每个用户创建了一个 [用户名/密码]。

在生产中你不应该这样做。服务身份旨在授权受信任子系统的服务，其中密钥本身不会对外公开。请记住，ACS 是联合提供者，而不是身份提供者。它主要设计用于将现有身份系统链接在一起，而不是用于存储用户凭据。如果您的系统使用服务身份作为用户凭据进行扩展，您将遇到规模和用户帐户（密码）管理问题。

作为概念证明，这很好。但对于真实的东西，您可能依赖于本地广告、消费者身份提供商（如 facebook 和 google），或查看[http://www.windowsazure.com/en-us/manage/services/identity/](http://www.windowsazure.com/en-us/manage/services/identity/)

# java - JTable 的特定行中的 Celleditor (JComboBox)

> ID：15728176
> 
> 赞同：0
> 
> 时间：2013-03-31T09:36:50.947
> 
> 标签：java, swing, jtable, jcombobox, tablecelleditor

我不知道如何在特定行中设置一个 jcombobox...现在我为所有行设置了这个 jcombobox，但我只希望它在一行中：

```
JComboBox cc = new JComboBox();
cc.addItem(jComboBox5.getSelectedItem()+"/"+jComboBox6.getSelectedItem()+"/"+jComboBox7.getSelectedItem()+" "+jComboBox1.getSelectedItem()+"."+jComboBox2.getSelectedItem());
jTable1.getColumnModel().getColumn(3).setCellEditor(new DefaultCellEditor(cc));
DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
    renderer.setToolTipText("CLICCA PER LE DATE");
jTable1.getColumnModel().getColumn(3).setCellRenderer(renderer); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T17:49:52.713

> 但我只想要一行：

覆盖 getCellEditor(...) 方法以返回给定行的特定编辑器：

```
import java.awt.*;
import java.awt.event.*;
import java.util.List;
import java.util.ArrayList;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;

public class TableComboBoxByRow extends JFrame
{
    List<TableCellEditor> editors = new ArrayList<TableCellEditor>(3);

    public TableComboBoxByRow()
    {
        // Create the editors to be used for each row

        String[] items1 = { "Red", "Blue", "Green" };
        JComboBox comboBox1 = new JComboBox( items1 );
        DefaultCellEditor dce1 = new DefaultCellEditor( comboBox1 );
        editors.add( dce1 );

        String[] items2 = { "Circle", "Square", "Triangle" };
        JComboBox comboBox2 = new JComboBox( items2 );
        DefaultCellEditor dce2 = new DefaultCellEditor( comboBox2 );
        editors.add( dce2 );

        String[] items3 = { "Apple", "Orange", "Banana" };
        JComboBox comboBox3 = new JComboBox( items3 );
        DefaultCellEditor dce3 = new DefaultCellEditor( comboBox3 );
        editors.add( dce3 );

        //  Create the table with default data

        Object[][] data =
        {
            {"Color", "Red"},
            {"Shape", "Square"},
            {"Fruit", "Banana"},
            {"Plain", "Text"}
        };
        String[] columnNames = {"Type","Value"};
        DefaultTableModel model = new DefaultTableModel(data, columnNames);

        JTable table = new JTable(model)
        {
            //  Determine editor to be used by row
            public TableCellEditor getCellEditor(int row, int column)
            {
                int modelColumn = convertColumnIndexToModel( column );

                if (modelColumn == 1 && row < 3)
                    return editors.get(row);
                else
                    return super.getCellEditor(row, column);
            }
        };

        JScrollPane scrollPane = new JScrollPane( table );
        getContentPane().add( scrollPane );
    }

    public static void main(String[] args)
    {
        TableComboBoxByRow frame = new TableComboBoxByRow();
        frame.setDefaultCloseOperation( EXIT_ON_CLOSE );
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T10:20:50.563

**更新：**当我测试我的（可能不完整的）答案时，我遇到了一个非常好的 SO 问题，我认为这将比我能提供的帮助更好：[将 JComboBox 放入 JTable](https://stackoverflow.com/questions/457463/putting-jcombobox-into-jtable)

**另一个更新：**我再次阅读了您的问题，我意识到您要求的是**特定行**。我能想到的唯一方法是创建一个自定义 CellEditor，例如：

```
private static class MyCellEditor extends AbstractCellEditor implements TableCellEditor {

    DefaultCellEditor other = new DefaultCellEditor(new JTextField());
    DefaultCellEditor checkbox = new DefaultCellEditor(new JComboBox(new Object[] {"abc"}));

    private DefaultCellEditor lastSelected;

    @Override
    public Object getCellEditorValue() {

        return lastSelected.getCellEditorValue();
    }

    @Override
    public Component getTableCellEditorComponent(JTable table,
            Object value, boolean isSelected, int row, int column) {
        if(row == 0) {
            lastSelected = checkbox;
            return checkbox.getTableCellEditorComponent(table, value, isSelected, row, column);
        }
        lastSelected = other;
        return other.getTableCellEditorComponent(table, value, isSelected, row, column);
    }

} 
```

在此示例中，自定义 CellEditor 实际上是两个编辑器，并且根据所选的行，特定的编辑器将获得调用（比喻和字面意义上的）。我承认这`lastSelected`似乎有点做作，但老实说，我找不到更简单的方法来知道要返回哪个 Editor 值（因为`getCellEditorValue`没有 args）。

为了使您的表格看起来“正确”，您可能还必须对渲染器做一些事情（因为渲染器可能知道也可能不知道将 JComboBox 的选定值显示为初始值）。这取决于您如何初始化实际表中的数据。

* * *

*为了完整起见，我的原始答案如下：*

您可以使用TableModel将 JComboBox 组件添加到**行**`addRow`中，如下所示：[如何在 JTable 中添加行？](https://stackoverflow.com/questions/3549206/how-to-add-row-in-jtable)

另请参阅：[http ://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

我认为主要问题是您将列编辑器/渲染器的想法与将存储在每一行中的实际数据混合在一起。

# logging - 用于日志记录的天蓝色存储

> ID：15728177
> 
> 赞同：0
> 
> 时间：2013-03-31T09:36:52.400
> 
> 标签：logging, azure, azure-storage

我目前有一个宠物项目，它是一个在 azure 中运行的 asp.net mvc 网站。该站点目前以“免费”模式运行，因此我只需支付 SQL Azure 数据库的费用。我希望能够从我的站点进行一些日志记录/跟踪，并且[我已经读到](http://www.codeproject.com/Articles/459699/Logging-Using-Azure-Table-Storage)使用表存储是一个可行的选择，因为写入本地磁盘不是一个选项。我的问题是我需要在 Azure 门户中创建什么才能使所有这些工作正常进行？我知道我需要一个存储帐户，但我需要创建一个“云服务”和随之而来的虚拟机吗？是否可以在不产生创建独立 VM 的成本的情况下使用表存储进行日志记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:10:39.310

对于上面列出的示例，您只需要一个 Windows Azure 中的存储帐户，您可以通过门户创建该帐户（正如您所提到的）。您不需要“云服务”。

将有与日志数据相关的存储事务和存储成本，但是表存储非常便宜，鉴于项目的性质，我不会太担心它。只需确保您的存储帐户和网站位于同一数据中心即可。

# ruby - 不能从文件中要求语言学或其他库

> ID：15728178
> 
> 赞同：0
> 
> 时间：2013-03-31T09:37:03.643
> 
> 标签：ruby, linux

```
require 'linguistics'

`require': cannot load such file -- linguistics (LoadError) 
```

但是当我在 IRB 中尝试测试代码时 - 一切都很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:50:13.447

我怀疑您需要编辑应用程序的 Gemfile

看到这个： http: [//gembundler.com/v1.3/gemfile.html](http://gembundler.com/v1.3/gemfile.html)

简而言之，编辑 Gemfile 并添加一行

```
gem 'linguistics' 
```

然后运行

```
bundle install 
```

从您的终端。

然后再次尝试您的 rake 命令

# prolog - 非确定性自动机模拟的声明性解释

> ID：15728181
> 
> 赞同：1
> 
> 时间：2013-03-31T09:37:30.690
> 
> 标签：prolog, declarative

下面的 Prolog 程序模拟了一个非确定性自动机：

```
final(s3).

trans(s1,a,s2).
trans(s1,b,s1).
trans(s2,b,s3).
trans(s3,b,s4).

silent(s2,s4).
silent(s3,s1).

accepts(State,[]) :- final(State).

accepts(State, [X|Rest]) :- trans(State,X,State1),
                            accepts(Stat1,Rest).

accepts(State, Rest) :- silent(State, State1),
                        accepts(State1, Rest). 
```

好的，我有 3 种不同的事实：

第一个告诉我**s3**是**最终状态**（接受状态）。事实的第二种类型指定了读取字符串字符的自动机的转换。

例如：如果我处于状态 s1 并且读取了字符 a，那么它可以传递到状态 s2。

第三个指定空转换：即从一个状态到另一个不需要输入字符的状态的任意转换。

例如：

```
silent(s2,s4) 
```

指定自动机可以在不读取任何内容的情况下任意从 s2 传递到 s4。

好的，现在我有了规则，指定如何从一个状态传递到另一个状态，以及它是否是一个接受状态。

第一个问题是：

```
accepts(State,[]) :- final(State). 
```

它说：**如果该状态是最终状态，则从状态接受空字符串[]。**

第二条规则是：

```
accepts(State, [X|Rest]) :- trans(State,X,State1),
                            accepts(State1,Rest). 
```

说：**它不是空的字符串，并且如果读取字符串的第一个符号 X 自动机可以传递到某个状态 State1 并且字符串的其余部分从 State1 接受，则它从当前状态 State 接受。**

第三条规则是：

```
accepts(State, Rest) :- silent(State, State1),
                        accepts(State1, Rest). 
```

它说：**如果自动机可以从当前状态 State 静默移动到另一个状态 State1 并且状态 State1 可以接受整个输入字符串，则从 State 接受字符串。**

因此，如果在 Prolog shell 中，我执行以下语句：

```
accepts(s1,[a,a,a,b]). 
```

回复是**真的**

但是，究竟是什么意思？

**这意味着 s1 状态接受 [a,a,a,b] 字符串，因为我将自动机从初始状态 s1 带到接受状态 s3 的许多转换？**

第二个疑问与书中显示的示例有关。

在书中执行此查询（获取从 s1 到最终状态 s3 的所有 3 个字符的序列）并获得以下输出：

```
?- accepts(s1, [X1,X2,X3]).

X1 = a
X2 = a
X3 = b;

X1 = b
X2 = a
X3 = b;

no 
```

这是合理的，但如果我尝试在我的 Prolog shell 上执行它，我会得到这个输出：

```
11 ?- accepts(s1, [X1,X2,X3]).
X1 = X2, X2 = a,
X3 = b ;
X1 = X3, X3 = b,
X2 = a ;
false. 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:00:47.803

首先，当我查阅您的代码（变量名`Stat1`）时，我会收到一个单例变量警告。当我更正它时，该列表`[a,a,a,b]`（正确地，假设您声明的转换）不再被接受。此外，我稍微重写了您的代码，以便将最终状态纳入关系：

```
automaton(State, State, []) :- final(State).
automaton(State0, State, [X|Xs]) :-
        trans(State0, X, State1),
        automaton(State1, State, Xs).
automaton(State0, State, Rest) :-
        silent(State0, State1),
        automaton(State1, State, Rest). 
```

变量命名方案`Var0, Var1, ..., Var`，其中`Var0`表示某些上下文中的初始状态并`Var`表示最终状态，是在 Prolog 中描述状态转换时通常有用的命名模式。您现在可以使用此关系来查看自动机中达到了哪个最终状态（在您的示例中，它当然始终是唯一的最终状态`s3`）：

```
?- automaton(s1, State, Xs).
State = s3,
Xs = [a, b] ;
State = s3,
Xs = [a, b, a, b] ;
State = s3,
Xs = [a, b, a, b, a, b] . 
```

对于您的最后一个问题：是的，您是正确的，答案在声明上是等效的，SWI Prolog 只是以不同的方式编写它们（`X = a, Y = a`声明上等同于`X = Y, X = a`）。

**编辑**：您可以概括这个想法：在下面的代码中，我使用 DCG 来描述导致最终状态的状态转换序列：

```
automaton(State, []) --> { final(State) }.
automaton(State0, [X|Xs]) -->
        [{State0,X}->State1],
        { trans(State0, X, State1) },
        automaton(State1, Xs).
automaton(State0, Rest) -->
        [State0->State1],
        { silent(State0, State1) },
        automaton(State1, Rest). 
```

例子：

```
?- length(Xs, _), phrase(automaton(s1, Xs), Ts).
Xs = [a, b],
Ts = [ ({s1, a}->s2), ({s2, b}->s3)] ;
Xs = [b, a, b],
Ts = [ ({s1, b}->s1), ({s1, a}->s2), ({s2, b}->s3)] ;
Xs = [a, b, a, b],
Ts = [ ({s1, a}->s2), ({s2, b}->s3), (s3->s1), ({s1, a}->s2), ({s2, b}->s3)] . 
```

# ios - iOS HTTP Live Streaming - 比特率未知时请求的字节范围？

> ID：15728185
> 
> 赞同：2
> 
> 时间：2013-03-31T09:38:52.890
> 
> 标签：ios, localhost, mpmovieplayercontroller, http-live-streaming

我们注意到 HLS 在一个正在开发的视频点播 iOS 应用程序中、在高延迟网络上的性能极差，并希望对下载的发生方式进行一些手动调整。

这些文件（完全编码的、从头到尾的 TS/M3U8 文件）已经在 CloudFront 上提供，所以我们在服务器端可以做的只有这么多来优化它（我认为）。

另一个希望是在 iOS 应用程序中运行一个本地主机服务器，让这个“服务器”通过优先于更频繁、更小段的下载来管理下载。因此，希望能够规避网络的高延迟，同时仍然能够使用可用的体面带宽。

这里的想法是让我们自己了解基础“index.m3u8”及其描述的所有比特率，并且只向 iOS 公开一个简单的 TS 文件“播放列表”（没有任何比特率信息）。

但是，我陷入困境的是试图弄清楚 iOS 将如何实际请求 TS 文件。也就是说，即使 iOS 尝试播放“直接”的 M3U8 文件（一个没有多个比特率的文件），我相信它也会尝试发送 TS 文件的范围请求。但是在不知道这些文件的比特率的情况下，iOS 会请求 localhost 的字节范围是多少？即使它确实请求特定的字节范围，它怎么可能是正确的？由于我之前从 localhost 向 iOS 提供的文件，可能是比特率为 1 Mbps 的“5.ts”，而下一个文件可能是比特率为 500 Kbps 的“6.ts”。iOS 无法估计下一个文件的正确字节范围是多少？

我概述的方法（为每个 TS 文件切换比特率，对 iOS 透明）甚至可以工作吗？或者，M3U8 中指定的所有 TS 文件是否必须强制具有与我尚未阅读的 HLS 规范的某些部分相同的比特率？

我想我可能会混淆一些事情，或者没有正确理解 iOS 是如何与基本流媒体一起工作的。一些关于这方面的真正知识将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:35:27.280

我刚刚意识到我的问题是没有实际意义的，是深夜脑溢血的结果。

iOS在发出范围请求以下载 TS 文件时，无需注意**M3U8 中指定的比特率。**它将向`Range: bytes=0-1`TS 发送一个请求以开始，在响应中获取文件的长度，然后根据需要缓冲的距离或 MediaPlayer 框架内部考虑的任何其他变量来发出未来的请求。

今天只需用新鲜的眼光查看标准 MP4 的范围请求模式（如在[此链接中）就解决了这个问题。](http://stevebranding.wordpress.com/tag/avplayer/)

对不起，噪音。

PS：换句话说，我在原始问题中概述的方案实际上会起作用，除非有任何其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:41:33.883

如果您没有在播放列表文件中指定字节范围，客户端将不会发出字节范围请求。

# c# - 在控制台应用程序 C# 中更改左边距

> ID：15728186
> 
> 赞同：0
> 
> 时间：2013-03-31T09:39:00.147
> 
> 标签：c#, c#-4.0, console-application

我有一个控制台应用程序，我已经更改了 `Console.Out.NewLine = "\r\n\r\n";`但现在我想更改左边距，我所有应用程序中的光标位置一次，因为我重复`Console.SetCursorPosition`了很多次。是否可以？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:49:37.673

您可以使用`\t`左边距，您可以[在此处查看](http://msdn.microsoft.com/en-us/library/h21280bw%28v=vs.80%29.aspx)更多 c# 中的转义字符。

```
Console.WriteLine("\t\t\t text with left margin"); 
```

# python - 包括 CMU pocketsphinx gstreamer 的语法

> ID：15728189
> 
> 赞同：2
> 
> 时间：2013-03-31T09:39:40.733
> 
> 标签：python, grammar, gstreamer, cmusphinx

我一直在研究 CMU pocketsphinx 的语音识别功能。理想情况下，我希望能够使用实时音频作为输入，沿着“请拿起”这一行识别句子结构，其中有一大堆对象（~200）。最初我在 Ubunutu 上安装 pocketsphinx 时遇到了很大的困难，最终我能够使用 gstreamer 让它工作。现在我已经开始工作了，我正在努力提高准确性。我想包含一个 jsgf 语法，但找不到任何指令或代码示例，目前不知所措。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:32:03.400

您现在不能在 gstreamer 中使用 JSGF，尽管这将是插件的一个微不足道的更改。但是您可以使用 FSG 格式的语法。您可以自己构建 FSG 格式的语法或将语法从 JSGF 格式转换为 FSG 格式：

```
sphinx_jsgf2fsg -jsgf grammar.jsgf -fsg grammar.fsg 
```

要使用 fsg 格式的语法，请使用插件的“fsg”属性，就像使用“lm”属性一样，而不是：

```
 g_object_set(G_OBJECT(filter), "lm", MODELDIR "/lm/en/turtle.DMP", NULL); 
```

您将 FSG 属性设置为 FSG 文件：

```
 g_object_set(G_OBJECT(filter), "fsg", 
         "pocketsphinx/test/data/goforward.fsg", NULL); 
```

你可以在 python:: 中做同样的事情

```
 asr.set_property("fsg", "pocketsphinx/test/data/goforward.fsg") 
```

# android - 在偏好活动中使用 findviewbyid

> ID：15728192
> 
> 赞同：9
> 
> 时间：2013-03-31T09:39:56.897
> 
> 标签：android, android-preferences, preferenceactivity

我有一个首选项屏幕，我正在使用该`android:layout`属性指定一个布局资源。在偏好活动中，我使用`addPreferencesFromResource`from`onCreate`方法使用/夸大偏好。在布局里面我有几个文本视图和按钮。

问题是我无法使用`findViewById`方法找到任何文本视图、复选框和按钮！的每个结果都`findViewById`返回 null。

**编辑**：

我需要在复选框上附加一个侦听器。

任何人都可以在这里帮助我吗？

**编辑 2**：

**1）preference_layout.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="33dp"
    android:gravity="center_vertical"
    android:minHeight="33dp"
    android:id="@+id/preference_header_switch_item_responder_layout"
    style="?android:attr/listSeparatorTextViewStyle" >

    <CheckBox
    android:id="@+id/switchWidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:clickable="true"
    android:focusable="false"
    android:padding="8dip"
    android:layout_marginRight="14dip" />
</LinearLayout> 
```

**2) 偏好画面**

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <Preference
        android:defaultValue="false"
        android:key="auto_responder_key"
        android:widgetLayout="@layout/preference_layout"
        android:title="@string/auto_responder">
    </Preference>

</PreferenceScreen> 
```

**3）Preference Activity onCreate：**

**编辑 3：**

```
@Override
    protected void onCreate(Bundle savedInstanceState)
    {
        if(savedInstanceState != null && savedInstanceState.containsKey(HEADERS_KEY))
        {
            headers = savedInstanceState.getParcelableArrayList(HEADERS_KEY);
        }

        super.onCreate(savedInstanceState);
        applicationContext = getApplicationContext();

        setupSimplePreferencesScreen();
//      setContentView(getListView());
        headerCompound = findViewById(R.id.switchWidget);
        headerCompoundEmail = findViewById(R.id.switchWidgetEmail);
    } 
```

和

```
private void setupSimplePreferencesScreen()
    {
        if (!isSimplePreferences(this))
        {
            return;
        }

        addPreferencesFromResource(R.xml.responder_generic);

    PreferenceCategory fakeHeader = new PreferenceCategory(this);

        fakeHeader.setLayoutResource(R.layout.place_holder_auto_reply_header);

        getPreferenceScreen().addPreference(fakeHeader);
        addPreferencesFromResource(R.xml.auto_reply_sms_call_check_box_preference);
        addPreferencesFromResource(R.xml.auto_reply_preferences);

        Preference smsTemplatePreference = findPreference(SMS_TEMPLATE_KEY);
        if(smsTemplatePreference != null)
        {
            bindPreferenceSummaryToValue(smsTemplatePreference);
        }

        Preference customTemplatePreference = findPreference(SMS_CUSTOM_TEMPLATE_KEY);
        if(customTemplatePreference != null)
        {
            customTemplatePreference.setEnabled(false);
            bindPreferenceSummaryToValue(customTemplatePreference);
            getPreferenceScreen().removePreference(customTemplatePreference);
        }

        // Add 'email' preferences, and a corresponding header.

        // Add 'email header' preferences.
        addPreferencesFromResource(R.xml.email_enable_check);
        addPreferencesFromResource(R.xml.email_preferences);

        Preference passwordPreference = findPreference(EMAIL_PWD_KEY);

        if(passwordPreference != null)
        {
            bindPreferenceSummaryToValue(passwordPreference);
            // the advanced version of SMS template
        }

        Preference customPasswordPreference = findPreference(EMAIL_CUSTOM_PWD_KEY);
        if(customPasswordPreference != null)
        {
            bindPreferenceSummaryToValue(customPasswordPreference);
            getPreferenceScreen().removePreference(customPasswordPreference);
        }

        // Add 'network' preferences, and a corresponding header.
        fakeHeader = new PreferenceCategory(this);
        fakeHeader.setLayoutResource(R.layout.place_holder_network_header);

        getPreferenceScreen().addPreference(fakeHeader);
        addPreferencesFromResource(R.xml.network_preferences_check_box);

        // Add 'misc' preferences, and a corresponding header.
        fakeHeader = new PreferenceCategory(this);
        fakeHeader.setLayoutResource(R.layout.place_holder_misc_header);

        getPreferenceScreen().addPreference(fakeHeader);
        addPreferencesFromResource(R.xml.misc_preferences);
        addPreferencesFromResource(R.xml.misc_reject_ignore_check_box_preferences);

        // Bind the summaries of EditText/Switch/CheckBox preferences to
        // their values. When their values change, their summaries are updated
        // to reflect the new value, per the Android Design guidelines.
        bindPreferenceSummaryToValue(findPreference(AUTO_REPLY_SMS_KEY));
        bindPreferenceSummaryToValue(findPreference(AUTO_REPLY_CALL_KEY));
        bindPreferenceSummaryToValue(findPreference(DATA_NETWORK_KEY));
        bindPreferenceSummaryToValue(findPreference(WIFI_KEY));
        bindPreferenceSummaryToValue(findPreference(PASSCODE_KEY));
        bindPreferenceSummaryToValue(findPreference(EMAIL_USR_KEY));
        bindPreferenceSummaryToValue(findPreference(EMAIL_INT_KEY));
        bindPreferenceSummaryToValue(findPreference(AUTO_RESPONDER_KEY));
} 
```

我也尝试了上面的代码，`onPostCreate`但返回的值仍然为空。

我想找到 responder_generic.xml 和 email_preferences.xml 的复选框。有没有办法找到并添加听众？

谢谢， 阿迪西亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:00:53.167

我所做的是创建一个自定义首选项并且它有效。我只是扩展`Preference`了类并膨胀了 layout/%MY_LAYOUT%.xml 中提供的布局。听众也被召唤，这是我想要实现的。

我不相信这个解决方案，因此，我将它添加到社区 Wiki。

**注意**：如果添加了一个首选项，那么[单个首选项解决方案](https://stackoverflow.com/questions/2697233/how-to-add-a-button-to-preferencescreen)就足够了。我在屏幕上添加了多个首选项（在我的案例 2 中），我实现了自定义首选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:08:57.223

根据您的要求，您在使用时似乎无法获得任何视图

```
findViewById() 
```

所以这种行为的一个可能原因可能是你可能没有打电话

```
 setContentView(R.id.yourlayout); 
```

在您的代码中检查一下...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-15T20:27:12.637

我在尝试将 RadioGroup 直接放入 PreferenceScreen 时遇到了同样的问题。我试图在创建 Activity 时设置选中的 RadioButton（例如，从 sharedpreferences 中恢复布尔值），但我无法从 OnCreate 方法中找到 ViewById 或类似的值。这是我（丑陋但有效）的解决方案：我扩展了 RadioButton 类：

```
public class RadioButtonSettings extends RadioButton {
public RadioButtonSettings(Context context, AttributeSet attrs) {
    super(context, attrs);
    boolean isLocal = context.getSharedPreferences("",Context.MODE_PRIVATE).getBoolean("local",true);
    switch(getId()){
        case R.id.radio_in:
            if(isLocal)
                setChecked(true);
            break;
        case R.id.radio_out:
            if(!isLocal)
                setChecked(true);
            break;
        default:
            break;
    }
}} 
```

然后放在你的preferences.xml文件中的某个地方（由PreferenceActivity加载）：

```
<PreferenceCategory
android:title="CATEGORY EXAMPLE">
<Preference android:layout="@xml/category_one"
    android:selectable="false"
    android:key="radiobuttons">
</Preference>
</PreferenceCategory> 
```

最后在 res/xml 目录中创建另一个文件（名为 category_one.xml）并放入：

```
<RadioGroup
    android:id="@+id/radio"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <your.package.RadioButtonSettings
        tools:context="your.package.SettingsActivity"
        android:id="@+id/radio_in"
        android:text="@string/radioIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    </your.package.RadioButtonSettings>
    <your.package.RadioButtonSettings
        tools:context="your.package.SettingsActivity"
        android:id="@+id/radio_out"
        android:text="@string/radioOut"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    </your.package.RadioButtonSettings>
</RadioGroup> 
```

您还可以使用 xml 文件中的 android:onClick="" 选项来获取 OnClickListener。在特定情况下，这是对布尔“本地”（单选按钮“输入”和单选按钮“输出”）的简单检查。您显然也可以覆盖其他经典方法。我认为这可能是比扩展整个 Preference 类更好的解决方案。希望它会帮助某人。

# javascript - Ajax 网站中的 Javascript 插件

> ID：15728193
> 
> 赞同：0
> 
> 时间：2013-03-31T09:40:02.800
> 
> 标签：javascript, ajax, dynamic, plugins, gallery

我目前正在使用一个名为 Ajaxify 的 ajax 插件，以便我可以动态加载页面内容。

一切正常，加载了纯内容和图像，但没有加载像 Galleria 这样的 javascript 插件。该插件仅在我直接转到该页面时才会加载。

因此，如果我去例如：test.com/gallery - 它会加载。如果我去 test.com，然后通过导航栏点击画廊，插件不会加载。

在必须使用 ajax 加载内容的 div 中，我应用了以下脚本：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://derrickson.nl/wp-content/themes/derrickson/js/theme.js"></script>

<div id="gallery">
<div id="galleria"></div>
</div>
<div id="menu">
    <a href="http://flickr.com/photos/davidhellsing/sets/72057594078378762/">Test1</a>
    <a href="http://flickr.com/photos/davidhellsing/sets/72057594102602315/">Test2</a>

 </div>
<a id="fullscreen" href="#">Enter fullscreen</a> 

<script src="http://derrickson.nl/wp-content/themes/derrickson/js/theme.js"></script> 
```

Ajaxify 插件：[http](http://wordpress.org/extend/plugins/ajaxify-wordpress-site/) ://wordpress.org/extend/plugins/ajaxify-wordpress-site/ Galleria 插件：http : [//galleria.io](http://galleria.io)

Ajaxify 脚本：

```
 /* <![CDATA[ */
var aws_data = {"rootUrl":"http:\/\/derrickson.nl\/","ids":"#pull   a","container_id":"guts","mcdc":"nav-top","searchID":"searchform","loader":"ajax-loader.gif"};
/* ]]> */

(function(window,undefined){

// Prepare our Variables
var
    History = window.History,
    $ = window.jQuery,
    document = window.document;

// Check to see if History.js is enabled for our Browser
if ( !History.enabled ) return false;

// Wait for Document
$(function(){
    // Prepare Variables
    var
        // Application Specific Variables 
        rootUrl = aws_data['rootUrl'],
        contentSelector = '#' + aws_data['container_id'],
        $content = $(contentSelector),
        contentNode = $content.get(0),
        // Application Generic Variables 
        $body = $(document.body),
        scrollOptions = {
            duration: 800,
            easing:'swing'
        };

    // Ensure Content
    if ( $content.length === 0 ) $content = $body;

    // Internal Helper
    $.expr[':'].internal = function(obj, index, meta, stack){
        // Prepare
        var
            $this = $(obj),
            url = $this.attr('href')||'',
            isInternalLink;

        // Check link
        isInternalLink = url.substring(0,rootUrl.length) === rootUrl || url.indexOf(':') === -1;

        // Ignore or Keep
        return isInternalLink;
    };

    // HTML Helper
    var documentHtml = function(html){
        // Prepare
        var result = String(html).replace(/<\!DOCTYPE[^>]*>/i, '')
                                 .replace(/<(html|head|body|title|script)([\s\>])/gi,'<div id="document-$1"$2')
                                 .replace(/<\/(html|head|body|title|script)\>/gi,'</div>');
        // Return
        return result;
    };

    // Ajaxify Helper
    $.fn.ajaxify = function(){
        // Prepare
        var $this = $(this);

        // Ajaxify
        $this.find('a:internal:not(.no-ajaxy,[href^="#"],[href*="wp-login"],[href*="wp-admin"])').live('click', function(event){
            // Prepare
            var
                $this   = $(this),
                url     = $this.attr('href'),
                title   = $this.attr('title') || null;

            // Continue as normal for cmd clicks etc
            if ( event.which == 2 || event.metaKey ) return true;

            // Ajaxify this link
            History.pushState(null,title,url);
            event.preventDefault();
            return false;
        });
        // Chain
        return $this;
    };

    // Ajaxify our Internal Links
    $body.ajaxify();

    // Hook into State Changes
    $(window).bind('statechange',function(){
        // Prepare Variables
        var
        State       = History.getState(),
        url         = State.url,
        relativeUrl = url.replace(rootUrl,'');

        // Set Loading
        $body.addClass('loading');

        // Start Fade Out
        // Animating to opacity to 0 still keeps the element's height intact
        // Which prevents that annoying pop bang issue when loading in new content

        if( '' != aws_data['loader']) {
            $content
                    .html('<img src="' + rootUrl + 'wp-content/plugins/ajaxify-wordpress-site/images/' + aws_data['loader'] + '" />')
                    .css('text-align', 'center');
        }

        // Ajax Request the Traditional Page
        $.ajax({
            url: url,
            success: function(data, textStatus, jqXHR){
                // Prepare
                var
                    $data           = $(documentHtml(data)),
                    $dataBody       = $data.find('#document-body:first ' + contentSelector),
                    bodyClasses     = $data.find('#document-body:first').attr('class'),
                    contentHtml, $scripts;

                var $menu_list = $data.find('.' + aws_data['mcdc']);

                //Add classes to body
                jQuery('body').attr('class', bodyClasses);

                // Fetch the scripts
                $scripts = $dataBody.find('#document-script');
                if ( $scripts.length ) $scripts.detach();

                // Fetch the content
                contentHtml = $dataBody.html()||$data.html();

                if ( !contentHtml ) {
                    document.location.href = url;
                    return false;
                }

                // Update the content
                $content.stop(true,true);
                $content.html(contentHtml)
                        .ajaxify()
                        .css('text-align', '')
                        .animate({opacity: 1, visibility: "visible"});

                //Scroll to the top of ajax container
                /*
                jQuery('html, body').animate({
                            scrollTop: jQuery(contentSelector).offset().top
                            }, 1000);
                */

                //Append new menu HTML to provided classs
                $('.' + aws_data['mcdc']).html($menu_list.html());

                //Adding no-ajaxy class to a tags present under ids provided
                $(aws_data['ids']).each(function(){
                    jQuery(this).addClass('no-ajaxy');
                });

                // Update the title
                document.title = $data.find('#document-title:first').text();
                try {
                    document.getElementsByTagName('title')[0].innerHTML = document.title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');
                }
                catch ( Exception ) { }

                // Add the scripts
                $scripts.each(function(){
                    var $script = $(this), 
                        scriptText = $script.html(), 
                        scriptNode = document.createElement('script');
                    try {
                        // doesn't work on ie...
                        scriptNode.appendChild(document.createTextNode(scriptText));
                        contentNode.appendChild(scriptNode);
                    } catch(e) {
                        // IE has funky script nodes
                        scriptNode.text = scriptText;
                        contentNode.appendChild(scriptNode);
                    }
                    if($(this).attr('src') != null) {
                        scriptNode.setAttribute('src', ($(this).attr('src')));
                    }
                });

                $body.removeClass('loading');

                // Inform Google Analytics of the change
                if ( typeof window.pageTracker !== 'undefined' ) window.pageTracker._trackPageview(relativeUrl);

                // Inform ReInvigorate of a state change
                if ( typeof window.reinvigorate !== 'undefined' && typeof window.reinvigorate.ajax_track !== 'undefined' )
                    reinvigorate.ajax_track(url);// ^ we use the full url here as that is what reinvigorate supports
            },
            error: function(jqXHR, textStatus, errorThrown){
                document.location.href = url;
                return false;
            }

        }); // end ajax

    }); // end onStateChange

}); // end onDomLoad

})(window); // end closure

jQuery(document).ready(function(){

//Adding no-ajaxy class to a tags present under ids provided
jQuery(aws_data['ids']).each(function(){
    jQuery(this).addClass('no-ajaxy');
});

//append anchor tag to DOM to make the search in site ajaxify.
var searchButtonHtml = '<span id="ajax-search" style="display:none;"><a href=""></a></span>'
jQuery("body").prepend(searchButtonHtml);

//Make the link ajaxify.
jQuery("#ajax-search").ajaxify();

//After submitting the search form search the post without refresing the browser.
jQuery("#" + aws_data['searchID']).live('submit',
    function(d){
        d.preventDefault();
        var host = aws_data['rootUrl'] + "?s=";
        jQuery("#ajax-search a").attr("href", host + jQuery(this).find("#s").val());
        jQuery("#ajax-search a").trigger("click");
    }
);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:06:47.050

我认为你需要在 ajax 调用中加载你的插件，所以你需要[getScript](http://api.jquery.com/jQuery.getScript/)

所以把这段代码放在你的ajax调用回调中：

```
$.getScript('your galleria plugin url'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:13:01.170

我在[http://headjs.com/](http://headjs.com)上很幸运——非常灵活。

# php - 卡在 foreach 循环中

> ID：15728196
> 
> 赞同：-2
> 
> 时间：2013-03-31T09:40:46.197
> 
> 标签：php, mysql, loops, dynamic, foreach

我试图从动态表单中插入数据。在我的表单中有字段。如果用户按下按钮，则将添加另一个空字段，然后可以填充信息。

例如，假设我有 2 个输入（input1_2、input2_2 是在按下按钮后用 js 创建的）：

```
 input1:              input2:
 input1_2:            input2_2:

        (add more field) 
```

所以可以说我输入了：

```
 input1: CAT          input2: 2
 input1_2: DOG        input2_2: 3

        (add more field) 
```

所以我想回应 CAT 2 和 DOG 3。我尝试在 foreach 循环中使用 foreach 循环，但我错过了一些东西。当我这样做时，我得到：

```
CAT 2
CAT 3
DOG 2
DOG 3 
```

我不明白它为什么这样做，但我无法找到解决我的问题的方法。谁能给我提示或什么？谢谢

php代码：

```
$nimi_60=$_POST['nimi_60'];
$paev_60=$_POST['paev_60'];
foreach ($nimi_60 as $value_nimi_60)
  {
     foreach ($paev_60 as $value_paev_60)
        {           
        echo $value_nimi_60.' '.$value_paev_60.'</br>';
        }                 
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:08:32.630

如果我认为您正在做您正在做的事情，请尝试：

```
$nimi_60 =& $_POST['nimi_60'];
$paev_60 =& $_POST['paev_60'];

$result = array();

foreach ( $nimi_60 as $key_nimi_60 => $value_nimi_60 ) {
    if ( isset( $paev_60[ $key_nimi_60 ] ) {
        $result[ $value_nimi_60 ] = (int) $paev_60[ $key_nimi_60 ];
    }
}

foreach ( $result as $index => $count ) {
    echo $index ." ". $count. </br>';
} 
```

否则，您在 $nimi_60 和 $paev_60 中的密钥看起来如何？请从两个数组中发布一个 print_r 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:18:40.503

如果您确定 $nimi_60 和 $paev_60 包含相同数量的元素，您可以这样做：

```
$nimi_60 = $_POST['nimi_60'];
$paev_60 = $_POST['paev_60'];
foreach ($nimi_60 as $value_nimi_60) {
    echo $value_nimi_60 . ' ' . current($paev_60) . '</br>';
    next($paev_60);
} 
```

# android - 谷歌地图应用程序不显示地图

> ID：15728203
> 
> 赞同：1
> 
> 时间：2013-03-31T09:41:56.177
> 
> 标签：android, google-maps, google-maps-android-api-2

当我运行我的应用程序（谷歌地图应用程序）时，我看不到地图。我只看到一个白屏（如下图所示）。

### 主要节日

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.williamroma.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

          <!--  Add Google Map Library -->
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".GoogleMapActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

      <!-- Allow to connect with internet -->
    <uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

### 活动

```
package com.williamroma.example;

import com.google.android.maps.MapActivity;

import android.app.Activity;
import android.os.Bundle;

public class GoogleMapActivity extends MapActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

这是我看到的屏幕，我想在这个 tuotiral [http://www.androidhive.info/2012/01/android-working-with-google-maps/中看到地图](http://www.androidhive.info/2012/01/android-working-with-google-maps/) ![在此处输入图像描述](https://i.stack.imgur.com/LQ8oz.jpg)

### 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainlayout"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="AIzaSyCyk2MVC5Fyl7HIB3iHlPgyRqvOF-VXYJw"
/>

</RelativeLayout> 
```

### 编辑

我在 logcat 中收到了橙色的这些消息

```
03-31 11:31:16.140: I/Process(1787): Sending signal. PID: 1787 SIG: 9
03-31 11:31:40.940: I/MapActivity(1832): Handling network change notification:CONNECTED
03-31 11:31:40.940: E/MapActivity(1832): Couldn't get connection factory client
03-31 11:31:41.011: D/dalvikvm(1832): GC_CONCURRENT freed 170K, 4% free 9316K/9607K, paused 8ms+6ms
03-31 11:31:41.011: W/CursorWrapperInner(1832): Cursor finalized without prior close()
03-31 11:31:41.011: W/CursorWrapperInner(1832): Cursor finalized without prior close()
03-31 11:31:41.020: D/gralloc_goldfish(1832): Emulator without GPU emulation detected.
03-31 11:31:42.470: W/System.err(1832): IOException processing: 26
03-31 11:31:42.470: W/System.err(1832): java.io.IOException: Server returned: 3
03-31 11:31:42.490: W/System.err(1832):     at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
03-31 11:31:42.490: W/System.err(1832):     at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
03-31 11:31:42.500: W/System.err(1832):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
03-31 11:31:42.500: W/System.err(1832):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
03-31 11:31:42.520: W/System.err(1832):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
03-31 11:31:42.520: W/System.err(1832):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:31:26.090

从外观上看，您的代码对于 Google Map API V1 看起来不错。所以你的钥匙一定有问题。据我所知，如果它是新生成的密钥，那么 Google 不会为 Google Map API V1 提供密钥，因此它必须是 Google Map API V2 的密钥，这就是它不起作用的原因。

如果您想将应用程序实现更改为 Google Maps API V2，您可以使用我编写的本指南以及执行此操作的步骤：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T12:17:12.583

我的合法密钥也有同样的问题。我在 3 月 10 日获得了它，谷歌在 3 月 18 日关闭了密钥 V1 生成器，并告诉 V1 的应用程序将继续正常运行。一直到昨天我的应用程序运行良好，但今天我看到一个空白页。

# sql - SQL从其中一列中选择多列和MAX，只返回一行

> ID：15728205
> 
> 赞同：1
> 
> 时间：2013-03-31T09:41:59.270
> 
> 标签：sql, ms-access, select, max

我需要从一个表中选择多个列，以及其中一个列的最大值结果必须只有最大值所在的那一行。这是我的表的简化版本（对不起，不知道如何插入空格）

```
╔═════════╦══════════╦═══════════╗
║ CARMAKE ║ CARMODEL ║ CARWEIGHT ║
╠═════════╬══════════╬═══════════╣
║ A       ║ B        ║      1000 ║
║ C       ║ D        ║       900 ║
╚═════════╩══════════╩═══════════╝ 
```

期望的结果是

```
╔═════════╦══════════╦═══════════╗
║ CARMAKE ║ CARMODEL ║ CARWEIGHT ║
╠═════════╬══════════╬═══════════╣
║ A       ║ B        ║      1000 ║
╚═════════╩══════════╩═══════════╝ 
```

但是当我使用

```
SELECT carmake, carmodel, MAX(carweight)
FROM   car
GROUP  BY carmake, carmodel 
```

它将显示每个品牌等的最大值，而不仅仅是具有绝对最大值的行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T09:43:08.180

您可以使用子查询来获取表的最大值`carweight`并将其等同于外部查询的`carweight`.

```
SELECT  *
FROM    tableName
WHERE   carweight = (SELECT MAX(carweight) FROM tableName) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ad8bd/1)

输出

```
╔═════════╦══════════╦═══════════╗
║ CARMAKE ║ CARMODEL ║ CARWEIGHT ║
╠═════════╬══════════╬═══════════╣
║ A       ║ B        ║      1000 ║
╚═════════╩══════════╩═══════════╝ 
```

这样做的好处是它支持关系，它们具有相同`carweight`的值并且恰好是最大值。

*   [SQLFiddle 演示（带领*带*）](http://www.sqlfiddle.com/#!2/e7c348/1)

# dynamics-ax-2009 - 如何使用 AX 2009 以编程方式获取项目中所有对象的列表

> ID：15728206
> 
> 赞同：1
> 
> 时间：2013-03-31T09:42:25.493
> 
> 标签：dynamics-ax-2009, x++, axapta

如何以编程方式获取共享项目中所有对象的列表？我正在使用 Dynamics Ax 2009 SP1 RU7。

TIA，弗雷德里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:03:27.643

使用`infolog.projectRootNode()`或`SysTreeNode::getSharedProject()`访问共享项目的根节点。

[在这里](http://axdaily.blogspot.dk/2010/02/getting-project-treenode-iterator.html)查看更多信息。

对于代码示例，请看[这里](http://daynamicsaxaptatutorials.blogspot.dk/2011/06/code-to-get-all-object-of-project-node.html)。

# ruby-on-rails - Ruby on Rails 和 geochart SQL 查询

> ID：15728214
> 
> 赞同：1
> 
> 时间：2013-03-31T09:43:37.123
> 
> 标签：ruby-on-rails, ruby

我正在尝试在用户模型上实现[geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)，但我的辅助方法上的 sql 查询出现问题。用户模型将国家作为字段之一。

我的问题是将数据分组并传递给 js

**用户.js**

```
google.load('visualization', '1', {'packages': ['geochart']});
google.setOnLoadCallback(drawRegionsMap);

function drawRegionsMap() {
//    var data = google.visualization.arrayToDataTable([
//        ['Country', 'Popularity'],
//        ['Germany', 200],
//        ['United States', 300],
//        ['Brazil', 400],
//        ['Canada', 500],
//        ['France', 600],
//        ['RU', 700]
//    ]);

    var data = google.visualization.arrayToDataTable(['users_country_data']);

    var options = {};

    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}; 
```

**index.html.rb**

```
<%= content_tag :div, "", id: "chart_div", style: "width: 400px; height:200px;",  data: {users: users_country_data} %> 
```

**用户.helpers.rb**

```
 def users_country_data
      {
         Country: @users.group("country"),
         Popularity:  @users.count(:group => "country")
      }

  end 
```

编辑。

![在此处输入图像描述](https://i.stack.imgur.com/mcP1r.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:58:35.940

很抱歉你花了整整一天的时间，rails 和 ruby​​ 应该比这更容易。

```
def users_country_data
  countries = @users.select('distinct country').map(&:country)
  countries.collect { |country| [country, @users.where(country: country).count] }.to_s
end 
```

这将为您提供 js 的数组，例如：

```
[["Argentina", 100], ["USA", 200]] 
```

如果您还想添加标题：

```
def users_country_data
  countries = @users.select('distinct country').map(&:country)
  countries.collect { |country| [country, @users.where(country: country).count] }.unshift(['Country', 'Popularity']).to_s
end 
```

* * *

您得到**错误数量的参数（1 代表 0）**，因为 @users 是用户数组，@users 是用户数组而不是 ActiveRecord 关系的任何原因？

编辑：我使用 = 而不是 == 进行比较

```
def users_country_data
  countries = @users.map(&:country).uniq
  countries.collect { |country| [country, @users.collect {|u| u.country == country}.count] }.to_s
end 
```

* * *

聊天后，请记住您想要所有用户的图表：

```
def users_country_data
  countries = User.select('distinct country').map(&:country)
  countries.collect { |country| [country, User.where(country: country).count] }.unshift(['Country', 'Popularity']).to_s
end 
```

# c# - HashSet 用于多达数百万条记录的唯一字符串？

> ID：15728218
> 
> 赞同：0
> 
> 时间：2013-03-31T09:45:01.400
> 
> 标签：c#, hashset

我正在生成数百万个唯一字符串。我为此目的使用 HashSet<>。我必须定期将结果存储在文本文件中。

我注意到我的代码在以下几行花费了太多时间：

```
for (int i = lastEndIndex; i < storage.Count; i++)
        {
            sb.AppendLine(storage.ElementAt(i));
        } 
```

lastEndIndex 是必需的，以便存储上次保存后生成的结果。还有其他更好的机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:52:01.287

`ElementAt()`每次调用时都必须从集合的开头进行迭代。这就是它如此低效的原因。

我会建议另一种方法 - 将上次保存后生成的结果保存到列表中，并将这些结果从那里保存到文件中，而不是从`HastSet`它本身：

*`latest`列表：*

```
var latest = new List<string>(); 
```

*添加元素：*

```
if(storage.Add(newElement))
{
    latest.Add(newElement);
} 
```

*保存最新的文件：*

```
foreach(var item in latest)
{
    sb.AppendLine(item);
}
latest.Clear(); 
```

# ruby-on-rails - Gsub 引发“UTF-8 中的无效字节序列”

> ID：15728223
> 
> 赞同：3
> 
> 时间：2013-03-31T09:46:22.303
> 
> 标签：ruby-on-rails, ruby, gsub

我有下一个方法调用：

```
Formatting.git_log_to_html(`git log --no-merges master --pretty=full #{interval}`) 
```

的值`interval`类似于`release-20130325-01..release-20130327-04`。

ruby 方法是下`git_log_to_html`一个（我只粘贴引发错误的行）：

```
module Formatting
  def self.git_log_to_html(git_log)
    ...
    git_log.gsub(/^commit /, "COMMIT_STARTcommit").split("COMMIT_STARTcommit").each do |commit|
    ...
  end
end 
```

这曾经有效，但实际上我检查了 gsub 是否引发了“UTF-8 中的无效字节序列”错误。

你能帮助理解为什么以及如何解决它吗？：/

这是输出`git_log`：

[https://dl.dropbox.com/u/42306424/output.txt](https://dl.dropbox.com/u/42306424/output.txt)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:03:25.117

出于某种原因，此命令：

```
git log --no-merges master --pretty=full #{interval} 
```

给您的结果不是以 UTF-8 编码的，可能是您的计算机正在使用不同的字符集，请尝试以下操作：

```
module Formatting
  def self.git_log_to_html(git_log)
    ...
    git_log.force_encoding("utf8").gsub(/^commit /, "COMMIT_STARTcommit").split("COMMIT_STARTcommit").each do |commit|
    ...
  end
end 
```

我不确定这是否可行，但你可以试试。

如果这不起作用，您可以检查 ruby​​ iconv 以检测字符集并将其编码为 utf-8：[http ://www.ruby-doc.org/stdlib-2.0/libdoc/iconv/rdoc/](http://www.ruby-doc.org/stdlib-2.0/libdoc/iconv/rdoc/)

* * *

根据您在评论中添加的文件，我做了：

```
require 'open-uri'
content = open('https://dl.dropbox.com/u/42306424/output.txt').read
content.gsub(/^commit /, "COMMIT_STARTcommit").split("COMMIT_STARTcommit") 
```

并且工作得很好，没有任何麻烦

* * *

顺便说一句，您可以尝试：

```
require 'iconv'

module Formatting
  def self.git_log_to_html(git_log)
    ...
    git_log = Iconv.conv 'UTF-8', 'iso8859-1', git_log
    git_log.gsub(/^commit /, "COMMIT_STARTcommit").split("COMMIT_STARTcommit").each do |commit|
    ...
  end
end 
```

但是在尝试转换为 utf-8 之前，您应该真正检测到字符串的字符集。

# java - 对于像 fillOval 这样的方法，'x' 和 'y' 表示什么？它们是什么坐标？

> ID：15728230
> 
> 赞同：3
> 
> 时间：2013-03-31T09:47:51.510
> 
> 标签：java, swing, graphics

对于`Graphics`类方法：[fillOval](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#fillOval%28int,%20int,%20int,%20int%29)，`x`和`y`表示什么？文档说：

```
x - the x coordinate of the upper left corner of the oval to be filled.
y - the y coordinate of the upper left corner of the oval to be filled. 
```

我不明白这个。这是什么意思 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T09:51:46.300

```
x - the x coordinate of the upper left corner of the oval to be filled.
y - the y coordinate of the upper left corner of the oval to be filled. 
```

看图片：

![在此处输入图像描述](https://i.stack.imgur.com/qNXNi.gif)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T09:49:53.513

在一张纸上，画一个矩形。然后在矩形内画一个椭圆，尽可能地填满矩形（椭圆应该接触矩形的所有 4 个边一次）。

*正方形*的左上角是 (x,y)

# php - PHP时间格式混乱

> ID：15728238
> 
> 赞同：1
> 
> 时间：2013-03-31T09:49:07.623
> 
> 标签：php, wordpress, time, formatting

这实际上是[this question](https://stackoverflow.com/questions/15683739/php-transforming-time-formats-and-adding-random-time-vars/15683806#15683806)的后续问题，但它提出了一个完全不同的问题。我也知道这很令人困惑，所以请多多包涵。

我有一个日期，如下所示`1/04/2013`：`Jan 04 2013`

在前面提到的问题中，我不得不将小时和分钟随机添加到时间格式中，它适用于它应该做的事情：

```
$clr_datenew = date('Y-m-d ' . sprintf('%02d:%02d:00', mt_rand(0, 23), mt_rand(0, 59)), strtotime($date)); 
```

这产生了类似的东西： `2013-05-01 08:57:00`

问题是，现在系统将该日期视为`MAY 1st`而不是`JAN 05`..

当我自动插入这些帖子（wp）时 - 所有具有类似日期的帖子都`2012-05-28`将被插入到数据库中`1970-01-01`（我认为这是 php 的默认“错误日期”格式 .. 第 28 个月当然是一个错误。 . )

我试图从

```
$clr_datenew = date('Y-m-d ' . sprintf('%02d:%02d:00', mt_rand(0, 23), mt_rand(0, 59)), strtotime($date)); 
```

到

```
$clr_datenew = date('Y-d-m ' . sprintf('%02d:%02d:00', mt_rand(0, 23), mt_rand(0, 59)), strtotime($date)); 
```

但是使用不同的日期组合会产生相同的错误。

在一位同事给了我一个提示之后：

> strtotime 将 x/y/z 解释为 mm/dd/yy[yy]，并将 xyz 解释为 dd-mm-yyyy 或 yy-mm-dd，具体取决于 z 是 4 位还是 2。

我也试过：

```
date('Y-m-d ' . sprintf('%02d:%02d:00', mt_rand(0, 23), mt_rand(0, 59)), strtotime(str_replace('/','-',$clr_date))); 
```

我真的在这里失去理智:-)

我认为这是因为我使用 strtotime() 函数实际上“猜测”如何根据松散的“人类”格式来格式化我的时间。

是否有将日期从一个日期转换为另一个日期的功能，同时指定原始日期格式和所需的转换格式？

像`dummy_function($origformat,$wantedformat)`我可以指定的地方`dummy_function('Y-d-m','Y-m-d')`

**编辑我** 在阅读了@harke 的评论后，我触发了一些东西并将其与@Maks3w 的答案结合起来，看来适合我的格式是：

```
$clr_datenew = date('Y-m-d ' . sprintf('%02d:%02d:00', mt_rand(0, 23), mt_rand(0, 59)), strtotime(str_replace('/','-',$clr_date))); 
```

我无法验证 Php 5.3+ 方法，因为它们与我不那么相关，因为该特定公司的（内部）服务器正在运行较低版本..

应该在 DB 设计师/程序员的每个广告牌上张贴一些额外的东西：http: [//xkcd.com/1179/](http://xkcd.com/1179/)

那是 - 直到另行通知:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:01:29.043

的第一个参数`date()`是打印文字的格式掩码，您必须使用反斜杠转义每个字符`\`

```
$clr_datenew = date('Y-m-d ' . preg_replace('/(.)/', '\\\$1', sprintf('\%d\%d\:\%d\%d\:00', mt_rand(0, 23), mt_rand(0, 59))), strtotime($date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:05:48.340

1.  决定*一种*内部时间表示并坚持下去。最好选择一个跨多个系统的*标准。*`m/d/y`不是*这样*的标准（尽管许多美国人喜欢这样想；P）。实际上，通用标准是`Y-m-d H:i:s`（表示为`date()`函数的格式字符串）。大多数数据库都期望这种格式，所有与时间相关的函数都可以毫无歧义地解析这种格式。

2.  以上是日期的有用*文本表示*，可以在不同系统之间互换，但在*内部*，用更灵活的类型表示日期是有意义的：[UNIX 时间戳](http://en.wikipedia.org/wiki/Unix_timestamp)或[`DateTime`对象](http://www.php.net/manual/en/datetime.construct.php)。选择其中一个，并以该格式将所有日期保留*在代码内部。*两者都允许轻松*操纵*时间值。仅当您需要向用户显示日期或需要将其作为字符串发送到另一个系统（即插入数据库）时，才将其更改回字符串。不要在`m/d/y`字符串到 UNIX 时间戳到`d/m/y`字符串之间来回转换。

3.  要将已知格式的日期解析为 UNIX 时间戳或`DateTime`对象以稍后将其格式化为其他格式，[`DateTime::createFromFormat`](http://www.php.net/manual/en/datetime.createfromformat.php)请在最近的 PHP 版本（5.3+）或更早版本上使用，[`strptime`](http://www.php.net/manual/en/function.strptime.php)然后进行一些手动重组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T10:28:36.183

```
$date=date_format(date_create($clr_datenew), 'Y-m-d H:i:s'); 
```

# android - 在画布上移动位图

> ID：15728240
> 
> 赞同：6
> 
> 时间：2013-03-31T09:49:37.340
> 
> 标签：android, canvas, bitmap

我有一个 imageView、画布和一个按钮。当我单击按钮时，画布上会绘制一个位图

我想使用我的 onTouch 移动该位图（将位图拖动到画布上的任何位置）。

```
 s.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> parent,
                   View v, int position, long id) {
            Bitmap workingBitmap = Bitmap.createBitmap(currentBitmap);
            workingBitmap = Bitmap.createBitmap(workingBitmap); 
            Canvas c = new Canvas(workingBitmap);
            brightBitmap = BitmapFactory.decodeResource(getResources(), sIds.mSmileyIds[position], null); 
            brightBitmap = Bitmap.createScaledBitmap(brightBitmap, 100, 100, false);
            chosenSmiley = brightBitmap;
                if (chosenSmiley != null) {
                    try {
                    c.drawBitmap(chosenSmiley, posX, posY, null);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
                iv.setImageBitmap(workingBitmap);
               }

        public boolean onTouchEvent(MotionEvent event) {
            int eventaction = event.getAction();

            switch (eventaction) {
                case MotionEvent.ACTION_DOWN: 
                    // finger touches the screen
                    break;

                case MotionEvent.ACTION_MOVE:
                    // finger moves on the screen
                    lastX = (int) event.getX();
                    lastY = (int) event.getY();
                    Log.e("my xname", lastX + " Coords of lastX");
                    Log.e("my xname", lastY + " Coords of lastY");
                    brightBitmap = Bitmap.createScaledBitmap(brightBitmap, lastX, lastY, false);
                    break;

                case MotionEvent.ACTION_UP:   
                    // finger leaves the screen
                    break;
            }

            // tell the system that we handled the event and no further processing is required
            return true; 
        }   

       }); 
```

这是我当前的代码，位图是在 0,0 上创建的，但我不能拖动它等等 ..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T16:54:50.393

```
 public class MainActivity extends Activity
{
  @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    DrawingView dv = new DrawingView(this);
    setContentView(dv);
}

class DrawingView extends View{
Bitmap bitmap;

float x,y;

public DrawingView(Context context)
{
 super(context);
 bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.ic_launcher);
}

public boolean onTouchEvent(MotionEvent event)
{

 switch(event.getAction())
    {
   case MotionEvent.ACTION_DOWN: {

   }
   break;

   case MotionEvent.ACTION_MOVE: 
   {
      x=(int)event.getX();
      y=(int)event.getY();

 invalidate();
 }

 break;
   case MotionEvent.ACTION_UP: 

       x=(int)event.getX();
       y=(int)event.getY();
       System.out.println(".................."+x+"......"+y); //x= 345 y=530 
       invalidate();
    break; 
   }
  return true;
 }

 @Override
 public void onDraw(Canvas canvas)
 {
 Paint paint = new Paint();
 paint.setStyle(Paint.Style.FILL);
 paint.setColor(Color.CYAN);
 canvas.drawBitmap(bitmap, x, y, paint);  //originally bitmap draw at x=o and y=0
 }
 }
 } 
```

星位图在 x=0 和 y=0 处绘制；在拖动 x 和 y 更改时调用 inavlidate 以刷新 drate。在触摸时在拖动位置 x 和 y 绘制位图并调用 invalidate 以刷新绘制。

在 x=0 y=0 处绘制的位图。拖放时 //x= 345 y=530。生成的快照已附加。

您需要确保您的图像在屏幕边缘看起来不像超出屏幕检查 x 是否在屏幕宽度 - 位图宽度内，并且 y 是否小于屏幕高度 - 位图高度。我没有在代码中包含这些条件。

![在此处输入图像描述](https://i.stack.imgur.com/JH6nu.png)

编辑：

```
 setContentView(R.layout.main);    
      LinearLayout ll = (LinearLayout) findViewById(R.id.ll);
      DrawingView dv= new DrawingView(this);
      ll.addView(dv); 
```

# c# - 如何在 .NET 上创建软件路由器？

> ID：15728243
> 
> 赞同：3
> 
> 时间：2013-03-31T09:49:46.783
> 
> 标签：c#, .net, windows, sockets, ports

如何创建一个透明地将连接转发到新 IP 地址/端口的程序？

例如，如果客户端启动 TCP 连接，IP 地址为 111.111.111.111，TCP 端口为 111，则程序可以配置为转发该 IP/端口 222.222.222.222:222 的数据包。

透明地，我的意思是：

*   最小的性能损失
*   无需调整客户端或最终目标软件/配置（就像透明 Web 代理不需要在浏览器中进行显式设置一样）
*   处理尽可能低的操作系统网络层

我想用 .NET、C# 和 Windows 来做这件事。但出于各种但未指定的原因，我不想创建一个简单的 TCP 代理。如果无法做到这一点，那么在没有可能的解决方案的情况下，这可能是一个可以接受的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T10:03:46.213

这是我几周前写的一个实验：

```
using System;
using System.IO;
using System.Net;
using System.Net.Sockets;
using System.Globalization;
using System.Threading;

namespace TcpTunnel {

public static class Program {

    public static void Main(String[] args) {

        if( args.Length != 3 ) {

            Console.WriteLine("<remoteAddress> <remotePort> <listenPort>");
            return;
        }

        ServerConfiguration config;

        try {

            config = new ServerConfiguration( args[0], args[1], args[2] );

        } catch(ArgumentException aex) {

            Console.WriteLine("<remoteAddress> <remotePort> <listenPort>");
            Console.WriteLine( aex.Message );
            return;
        }

        Thread serverThread = new Thread( ServerThread );
        serverThread.Start( config );

        Console.WriteLine("Enter \"q<enter>\" to stop program.");

        String line;
        while( (line = Console.ReadLine()).ToUpperInvariant() != "Q" );

        config.ServerSocket.Shutdown(SocketShutdown.Both);
        config.ServerSocket.Close();
    }

    private class ServerConfiguration {

        public IPAddress RemoteAddress;
        public UInt16    RemotePort;
        public UInt16    ListenPort;

        public ServerConfiguration(String remoteAddress, String remotePort, String listenPort) {

            RemoteAddress = IPAddress.Parse( remoteAddress );
            RemotePort    = UInt16   .Parse( remotePort, NumberStyles.Integer, CultureInfo.InvariantCulture );
            ListenPort    = UInt16   .Parse( listenPort, NumberStyles.Integer, CultureInfo.InvariantCulture );
        }

        public Boolean RunServer = true;

        public Socket  ServerSocket;
    }

    private static void ServerThread(Object configObj) {

        ServerConfiguration config = (ServerConfiguration)configObj;

        ///////////////////////////////////////
        // Setup  

        ///////////////////////////////////////
        // Wait for client

        Socket serverSocket = config.ServerSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Unspecified);

        serverSocket.Bind( new IPEndPoint( IPAddress.Any, config.ListenPort ) );
        serverSocket.Listen(1);

        Console.WriteLine("Now listening for port {0}, will forward to {1}.", config.ListenPort, config.RemotePort);

        while( config.RunServer ) {

            Socket client = serverSocket.Accept();

            Thread clientThread = new Thread( ClientThread );
            clientThread.Start( new ClientContext() { Config = config, Client = client } );
        }

    }

    private class ClientContext {

        public ServerConfiguration Config;
        public Socket              Client;
    }

    private static void ClientThread(Object contextObj) {

        ClientContext context = (ClientContext)contextObj;

        Socket              client = context.Client;
        ServerConfiguration config = context.Config;

        ///////////////////////////////////////
        // Connect to remote server.

        IPEndPoint remoteEndPoint = new IPEndPoint( config.RemoteAddress, config.RemotePort );

        Socket remote = new Socket( remoteEndPoint.AddressFamily, SocketType.Stream, ProtocolType.Unspecified);

        remote.Connect( remoteEndPoint );

        ///////////////////////////////////////
        // Run tunnel.

        Console.WriteLine("Running tunnel.");

        Byte[] buffer = new Byte[4096];

        for(;;) {

            if( client.Available > 0 ) {

                Int32 count = client.Receive( buffer );
                if( count == 0 ) return;

                remote.Send( buffer, count, SocketFlags.None );
            }

            if( remote.Available > 0 ) {

                Int32 count = remote.Receive( buffer );
                if( count == 0 ) return;

                client.Send( buffer, count, SocketFlags.None );
            }
        }
    }

}

} 
```

# java - 客户端应用程序中的 Java 日志记录

> ID：15728247
> 
> 赞同：0
> 
> 时间：2013-03-31T09:50:07.173
> 
> 标签：java, logging, desktop-application

我已经为 OS X 用 java 制作了一个小型桌面应用程序。我已经使用 JarBundler 将其打包到一个 .app 中。一切在我的电脑上运行良好。

当我将 .app 发送给其他人（也在运行 Mac）时，该应用程序会立即打开和关闭。有没有我可以从他们的计算机上获得的某种日志文件（我可以完全访问）。有没有办法让 System.out.println 语句或类似的语句出现在该文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:55:19.300

从控制台执行应用程序，从那里任何错误都将打印到标准错误流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:09:56.370

请避免`System.out.println()`在应用程序上使用语句。该方法是同步的，导致性能不佳。更不用说您可能无法根据谁捕获控制台来检索语句。

使用[sl4j](http://www.slf4j.org/)之类的日志记录解决方案，并使用带有[文件 appender的](http://wiki.apache.org/logging-log4j/FileAppender)[log4j](http://www.slf4j.org/api/org/slf4j/impl/Log4jLoggerAdapter.html)之类的记录器对其进行备份。文件追加器写入文件，您可以从那里获取调试语句/堆栈跟踪。

# ios - 文件系统事件通知（越狱设备）

> ID：15728248
> 
> 赞同：2
> 
> 时间：2013-03-31T09:50:07.643
> 
> 标签：ios, file, filesystems, jailbreak, cydia

当有新的文件系统事件时，我需要能够接收通知。例如，添加新图片时。我需要能够接收整个文件系统的这些通知，而不仅仅是我的应用程序所在的沙箱。这适用于越狱的设备吗？

有谁知道我应该使用哪个私有 API？

我的应用程序是一个守护程序应用程序并在后台运行，它必须能够接收这些事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:47:29.347

iOS 实际上让这对你来说真的很容易。

我不知道**您**可能还希望您的守护进程做什么，但如果您只想让它持续保持活动状态以监视新的图片文件，那么您还有另一种选择。

您可以配置启动守护程序以仅在检测到新文件系统事件时启动。 [在此处查看有关 (OS X) 启动守护程序的 Apple 文档](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html#//apple_ref/doc/uid/10000172i-SW7-SW8)

然后，您的启动守护程序可执行文件可以只是一个简单的`main()`程序。当写入新的图片文件时，系统将启动它，然后您可以使用`NSFileManager`或`ALAssetLibrary`检查目录中的最新文件。您可能希望保存一个指示上次运行守护程序时间的首选项，以确保您跟踪所有新文件。

```
int main(int argc, char *argv[]) {
    // if we're here, we know there's a new picture, so use
    // NSFileManager to check for photos
    // or, see something like http://stackoverflow.com/q/9730973/119114 ... 

    // and then we exit the process and let launchd start us
    // again when there's more pictures

    return 0;
} 
```

这里的关键是使用这样的`/System/Library/LaunchDaemons/com.example.MyApp.plist`文件：

```
<?xml version="1.0" encoding="UTF-8"?> 

<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> 
<plist version="1.0"> 
<dict> 
    <key>Label</key> 
    <string>com.example.MyApp</string> 
    <key>ProgramArguments</key> 
    <array> 
        <string>/Applications/MyApp.app/MyDaemonExecutable</string> 
        <string>optional_argument_one</string>   <!-- passed to main() as argv[] -->
        <string>optional_argument_two</string>   <!-- passed to main() as argv[] -->
    </array> 
    <key>WatchPaths</key> 
    <array> 
        <string>/private/var/mobile/Media/DCIM/100APPLE</string>                
        <string>/private/var/mobile/Media/DCIM/101APPLE</string> 
    </array> 
</dict> 
</plist> 
```

# gcc - gcc 在函数调用后打破 rax 值

> ID：15728249
> 
> 赞同：0
> 
> 时间：2013-03-31T09:50:10.270
> 
> 标签：gcc, assembly, nasm, intel

我正在重写 ASM 中的一些 C 函数以进行练习。我的`memset`函数设置`RAX`为寄存器中传递的相同地址`RDI`。但是 gcc 正在使用指令扩展`AL`' 值。`CDQE`

```
char super[] = "suuuuuuuuuuper";

res = memset(super, 't', 4);
printf("memset = {%s} (%p) res = %p\n", super, super, res); 
```

输出 ：

```
memset = {ttttuuuuuuuper} (0x7fffffd30250) res = 0xffffffffffd30250 
```

如果我尝试访问存储在`res`. 我可以只编辑二进制文件并`CQDE`用两条`NOP`指令替换调用，它将完美运行。

但我想知道是否还有其他东西，例如避免调用的 GCC 标志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:13:06.147

确保代码调用`memset()`已经看到了正确的原型，`memset()`因此它知道函数返回 a`void*`而不是`int`.

当然，您还需要将`-fno-builtin-memset`选项传递给编译器（或等效的东西），以确保编译器完全调用您的函数。

# c++ - C++ 无法理解的编译器错误

> ID：15728250
> 
> 赞同：3
> 
> 时间：2013-03-31T09:50:20.540
> 
> 标签：c++, compiler-errors

我有一个非常简单的任务要做。编写一个定义时间的类。出于某种原因，在其中一个功能中出现了一个我不理解的错误。
我搜索了一个没有成功的解决方案，所以最后我决定在这里发布。

**时间.h**

```
class time
{
private:
    int _hours;
    int _minutes;
    float _seconds;
    bool checkHours(int hours);
    bool checkMinutes(int minutes);
    bool checkSeconds(float seconds);

public:

time(int hours=0, int minutes=0, float seconds=0);
time(const time & tm);
~time();

void hours(int hours);
int  hours() const;
void minutes(int minutes);
int  minutes() const;
void seconds(float seconds);
float  seconds() const;

void operator=(time tm);
bool operator==(time tm);

void print();
time getTimeFromUser();
float getTimeAsFractionOfTheDay(time tm); 
```

};

和**时间.cpp**

```
#include <iostream>
#include "time.h"

bool time::checkHours(int hours)
{
    return hours>=0 && hours<24;
}
bool time::checkMinutes(int MS)
{
    return MS>=0 && MS<60;
}
bool time::checkSeconds(float MS)
{
    return MS>=0 && MS<60;
}

//constractors
time::time(int hours, int minutes, float seconds)
{
    if(checkHours(hours) && checkMinutes(minutes) && checkSeconds(seconds))
    {
        _hours=hours;
        _minutes=minutes;
        _seconds=seconds;
    }
    else
    {
        cout<<"Error"<<endl; _hours=-1; _minutes=-1; _seconds=-1;
    }
}
time::time(const time & tm)
{
    _seconds = tm.seconds();
    _hours = tm.hours();
    _minutes=tm.minutes();
}
time::~time()
{
}

//get-set functions
void time::hours(int hours)
{
    _hours=hours;
}
int  time::hours() const
{
    return _hours;
}
void time::minutes(int minutes)
{
    _minutes=minutes;
}
int  time::minutes() const
{
    return _minutes;
}
void time::seconds(float seconds)
{
    _seconds = seconds;
}

float  time::seconds() const
{
    return _seconds;
}

//operators
void time::operator=(time tm)
{

    _hours=tm.hours();
    _minutes=tm.minutes();
    _seconds=tm.seconds();

}
bool time::operator==(time tm)
{
    return _hours=tm.hours() && _minutes==tm.minutes() && _seconds==tm.seconds();
}

//some function
void time::print()
{
    cout<<" "<<_hours<<":"<<_minutes<<":"<<_seconds<<" "<<endl;
}

time time::getTimeFromUser()
{
    time newTime;
    int userhours=-1;
    int userminutes=-1;
    float userseconds=-1;
    while (!checkHours(userhours))
    {
        cout<<"enter hours"<<endl;
        cin>>userhours;
        if(!checkHours(userhours))
        {
            cout<<"Error try again"<<endl;
        }
    }

    while (!checkMinutes(userminutes))
    {
        cout<<"enter minutes"<<endl;
        cin>>userminutes;
        if(!checkMinutes(userminutes))
        {
            cout<<"Error try again"<<endl;
        }
    }

    while (!checkSeconds(userseconds))
    {
        cout<<"enter Seconds"<<endl;
        cin>>userseconds;
        if(!checkSeconds(userseconds))
        {
            cout<<"Error try again"<<endl;
        }
    }

    newTime.seconds(userseconds);
    newTime.hours(userhours);
    newTime.minutes(userminutes);

    return newTime;
}

float time::getTimeAsFractionOfTheDay(time tm)
{

    return 0.0;
} 
```

我得到了那些错误

![在此处输入图像描述](https://i.stack.imgur.com/IOSju.png)

我不明白我做错了什么。我认为这是愚蠢的，但我找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T10:00:21.837

事实证明，您是一个微妙错误的受害者。

`time`是在系统头文件中声明的*函数*`time.h`，通过`iostream`. 当您声明`time time::getTimeFromUser()`时，编译器会看到返回值并认为您的意思是*函数*时间！

`clang`它的错误使这一点变得明显：

```
time.cpp:122:1: error: must use 'class' tag to refer to type 'time' in this scope
time time::getTimeFromUser()
^
class 
/usr/include/time.h:133:8: note: class 'time' is hidden by a non-type declaration of 'time' here
time_t time(time_t *);
       ^ 
```

解决方法是像这样定义特定的函数：

```
class time time::getTimeFromUser() {
    ...
} 
```

或者，如果使用 C++11，

```
auto time::getTimeFromUser() -> time {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:57:37.630

**第一个问题：**

```
bool time::operator==(time tm)
{
    return _hours=tm.hours() && _minutes==tm.minutes() && _seconds==tm.seconds();
//               ^
} 
```

那里应该有一个比较运算符，而不是一个赋值：

```
bool time::operator==(time tm)
{
    return _hours==tm.hours()
//               ^^
                   && _minutes==tm.minutes() && _seconds==tm.seconds();
} 
```

**第二个问题：**

您正在使用`cout`and `endl`，它属于`std`命名空间，没有`using`声明或`using`指令。

`cout`在使用、`cin`和`endl`作为非限定名称之前，您应该添加以下内容：

```
using std::cout;
using std::endl;
using std::cin; 
```

或者，您可以选择在使用它们时完全限定它们的名称。例如：

```
 std::cout<<"Error"<<endl; _hours=-1; _minutes=-1; _seconds=-1;
//  ^^^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T11:21:58.183

问题是您的标题是 time.h （已经作为标准标题）。你认为你得到了你声明的那个，但你得到了标准的那个。因此，您没有类的声明，而是标准标题。将其重命名为 Test.h 和 Tes.cpp ，它将起作用并且还在 cpp 文件的顶部添加 using namespace std

# f# - 本例中的 `in` 关键字是什么意思（F#）

> ID：15728254
> 
> 赞同：3
> 
> 时间：2013-03-31T09:51:15.967
> 
> 标签：f#, keyword

我一直在尝试了解 F# 的各个方面（我来自更多的 C# 背景），并且解析器让我感兴趣，所以我跳到了这篇关于 F# 解析器组合器的博客文章：

[http://santibo.com/blog/2013/03/24/introduction-to-parser-combinators](http://santialbo.com/blog/2013/03/24/introduction-to-parser-combinators)

这里的样本之一是：

```
/// If the stream starts with c, returns Success, otherwise returns Failure
let CharParser (c: char) : Parser<char> =
    let p stream =
        match stream with
        | x::xs when x = c -> Success(x, xs)
        | _ -> Failure
    in p               //what does this mean? 
```

然而，让我对这段代码感到困惑的一件事是`in p`声明。我在 MSDN 文档中查找了`in`关键字：

[http://msdn.microsoft.com/en-us/library/dd233249.aspx](http://msdn.microsoft.com/en-us/library/dd233249.aspx)

我还发现了这个较早的问题：

[F#中关键字“in”的含义](https://stackoverflow.com/questions/546287/meaning-of-keyword-in-in-f)

这些似乎都不是相同的用法。唯一似乎合适的是，这是一个流水线构造。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T09:58:55.503

`let x = ... in expr`允许你为一些变量声明一个绑定，然后`x`可以在 expr 中使用。

在这种情况下`p`，是一个函数，它接受一个参数`stream`，然后根据匹配结果返回`Success`或返回，该函数由函数返回。`Failure``CharParser`

F# [light 语法](http://msdn.microsoft.com/en-us/library/dd233199.aspx)自动嵌套`let .. in`绑定，例如

```
let x = 1
let y = x + 2
y * z 
```

是相同的

```
let x = 1 in
let y = x + 2 in
y * z 
```

因此，`in`这里不需要，函数可以简单地写成

```
let CharParser (c: char) : Parser<char> =
    let p stream =
        match stream with
        | x::xs when x = c -> Success(x, xs)
        | _ -> Failure
    p 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T11:40:57.823

Lee的回答解释了这个问题。在 F# 中，`in`关键字是从早期启发 F# 并需要它的函数式语言的遗产——即来自 ML 和 OCaml。

可能值得补充的是，在 F# 中只有一种情况您仍然需要`in`- 即，当您想要在*单行*`let`上编写后跟表达式时。例如：

 *```
let a = 10
if (let x = a * a in x = 100) then printfn "Ok" 
```

这是一种有点时髦的编码风格，我通常不会使用它，但`in`如果你想这样写，你确实需要。不过，您始终可以将其拆分为多行：

```
let a = 10
if ( let x = a * a
     x = 100 ) then printfn "Ok" 
```*

# jquery - 在带有导轨的嵌套表单上选择2

> ID：15728257
> 
> 赞同：2
> 
> 时间：2013-03-31T09:51:35.383
> 
> 标签：jquery, ruby-on-rails

我发现，在嵌套表单 div 的整个生成过程中，我不知道如何在那里获取默认值。

在正常形式中，它看起来像以下

```
<%= f.hidden_field :toolkeeper, :id => "toolkeeper_value" %>
<%= f.select :toolkeeper,  options_from_collection_for_select(@people, :id, :name), :include_blank => true, :selected => '25' %> 
```

和相应的JS：

```
$ ->
  $("#practice_toolkeeper")
    .select2({ 
         allowClear: true,
         placeholder: 'Select an item'
    })
    .select2('val',$("#toolkeeper_value").val()) 
```

但是在嵌套表单的生成中，我用来获取选择器的现有值的 hidden_​​field #ID 更改如下：

```
select#practice_uebung_maps_attributes_1_role_id
select#practice_uebung_maps_attributes_2_role_id
... 
```

编写 JS 脚本的正确方法是什么，它初始化 .select2() 并采用 hidden_​​field 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:00:42.190

好的，我终于在朋友的帮助下弄清楚了：

我添加了一个函数来创建 select2 表单：

```
 function build_select2_role(counter){
    $("#practice_uebung_maps_attributes_"+counter+"_role_id").select2({
      allowClear: true,
      placeholder: 'Rolle'
    }).select2('val',$("#role_id_"+counter).val())
  }; 
```

在 fields_for 部分，我只调用此函数（由局部变量填充）：

```
<% @runs = 0 %>
<td>
  <%= map.hidden_field :role_id, :id => "role_id_#{@runs}"  %>
  <%= map.select :role_id,  options_from_collection_for_select(@roles, :id, :name), :include_blank => true %></td>
  <script type='text/javascript'> 
      build_select2_role(<%= @runs %>);
  </script>
</td>
<% @runs += 1 %> 
```

# javascript - 如何防止在keydown上输入数字？

> ID：15728261
> 
> 赞同：17
> 
> 时间：2013-03-31T09:52:02.943
> 
> 标签：javascript, cross-browser, keyboard-events

我想防止在文本字段上的*keydown 事件*上输入数字并运行自定义处理程序函数。以下是问题

*   `e.target.value`没用，因为键值尚未投影到目标值中
*   `e.keyCode`数字取决于键盘类型、语言布局、Fn 或 Shift 键
*   `String.fromCharCode(e.keyCode)`不可靠，至少在我的键盘上（Czech qwerty）
*   [w3 规范](http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#legacy-key-attributes)说`e.keyCode`是一个遗留属性并建议`e.char`，但它还没有在浏览器中实现

那么如何在数字输入出现在文本字段中之前捕获它呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-31T12:03:23.650

请改用`keypress`事件。`which`它是唯一的关键事件，它将通过大多数浏览器中的属性和（令人困惑的）`keyCode`IE 中的属性为您提供有关键入的字符的信息。使用它，您可以`keypress`根据键入的字符有条件地抑制事件。但是，这不会帮助您阻止用户粘贴或拖动包含数字字符的文本，因此您仍然需要某种额外的验证。

我最喜欢的 JavaScript 关键事件参考： http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

```
textBox.onkeypress = function(e) {
    e = e || window.event;
    var charCode = (typeof e.which == "undefined") ? e.keyCode : e.which;
    var charStr = String.fromCharCode(charCode);
    if (/\d/.test(charStr)) {
        return false;
    }
}; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-31T10:08:34.787

试试这个来替换整数值：

```
<input onkeydown="Check(this);" onkeyup="Check(this);"/>

<script>
function Check(me) {
    me.value = me.value.replace(/[0-9]/g, "");
}
</script> 
```

防止整数输入：

```
<input onkeydown="Check(event);" onkeyup="Check(event);"/>

<script>
function Check(e) {
    var keyCode = (e.keyCode ? e.keyCode : e.which);
    if (keyCode > 47 && keyCode < 58) {
        e.preventDefault();
    }
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-27T10:20:36.140

我防止浮动代码字符的解决方案

```
 // 'left arrow', 'up arrow', 'right arrow', 'down arrow',
    const = arrowsKeyCodes: [37, 38, 39, 40],
    // 'numpad 0', 'numpad 1',  'numpad 2', 'numpad 3', 'numpad 4', 'numpad 5', 'numpad 6', 'numpad 7', 'numpad 8', 'numpad 9'
    const = numPadNumberKeyCodes: [96, 97, 98, 99, 100, 101, 102, 103, 104, 105],

    export const preventFloatingPointNumber = e => {
    // allow only [0-9] number, numpad number, arrow,  BackSpace, Tab
    if ((e.keyCode < 48 && !arrowsKeyCodes.includes(e.keyCode) || e.keyCode > 57 &&
        !numPadNumberKeyCodes.includes(e.keyCode)) &&
        !(e.keyCode === 8 || e.keyCode === 9))
        e.preventDefault()
    } 
```

# c++ - 使用字节数组 C++ 时出错

> ID：15728262
> 
> 赞同：0
> 
> 时间：2013-03-31T09:52:11.677
> 
> 标签：c++, file-io, byte

我正在尝试将标准的 24 位 BMP 文件读入字节数组，以便我可以将该字节数组发送到 libpng 以保存为 png。我的代码，编译：

```
#include <string>
#include <stdio.h>
#include <iostream>
#include <fstream>
#include <Windows.h>
#include "png.h"

using namespace std;

namespace BMP2PNG {
long getFileSize(FILE *file)
    {
        long lCurPos, lEndPos;
        lCurPos = ftell(file);
        fseek(file, 0, 2);
        lEndPos = ftell(file);
        fseek(file, lCurPos, 0);
        return lEndPos;
    }

private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
         {
             std::string filenamePNG = "D:\\TEST.png";
             FILE *fp = fopen(filenamePNG.c_str(), "wb");

             png_structp png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING,NULL,NULL,NULL);

             png_info *info_ptr = png_create_info_struct(png_ptr);

             png_init_io(png_ptr, fp);

             png_set_IHDR(png_ptr,info_ptr,1920,1080,16,PNG_COLOR_TYPE_RGB,PNG_INTERLACE_NONE,PNG_COMPRESSION_TYPE_BASE,PNG_FILTER_TYPE_BASE);

             png_write_info(png_ptr,info_ptr);
             png_set_swap(png_ptr);

             const char *inputImage = "G:\\R-000.bmp";
             BYTE *fileBuf;
             BYTE *noHeaderBuf;
             FILE *inFile = NULL;

             inFile = fopen(inputImage, "rb");

             long fileSize = getFileSize(inFile);

             fileBuf = new BYTE[fileSize];
             noHeaderBuf = new BYTE[fileSize - 54];

             fread(fileBuf,fileSize,1,inFile);

             for(int i = 54; i < fileSize; i++) //gets rid of 54-byte bmp header
             {
                noHeaderBuf[i-54] = fileBuf[i];
             }

             fclose(inFile);

             png_write_rows(png_ptr, (png_bytep*)&noHeaderBuf, 1);

             png_write_end(png_ptr, NULL);

             fclose(fp);
         }
}; 
```

不幸的是，当我单击运行代码的按钮时，出现错误“尝试读取或写入受保护的内存...”。我对 C++ 很陌生，但我认为我正确地读取了文件。为什么会发生这种情况，我该如何解决？

此外，我的最终目标是一次读取一个像素行的 BMP，这样我就不会使用太多内存。如果 BMP 是 1920x1080，我只需要为每行读取 1920 x 3 个字节。我将如何一次将文件读入字节数组 n 个字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:08:43.383

You are reading filee size of your *.bmp file, but "real" data can be larger. BMP can have compression (RLE). After that when you write decompressed PNG to that array, you can have overflow size of image, because you previsouly obtained size of compressed BMP file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:47:33.993

在功能

`png_set_IHDR(png_ptr,info_ptr,1920,1080,16,PNG_COLOR_TYPE_RGB,PNG_INTERLACE_NONE,PNG_COMPRESSION_TYPE_BASE,PNG_FILTER_TYPE_BASE);`

为什么将位深度设置为 16 ？不应该是 8，因为 BMP 的每个 RGB 通道都是 8 位的。

同样对于 PNG 处理，我正在使用这个库： http: [//lodev.org/lodepng/](http://lodev.org/lodepng/)。它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:13:08.657

您的`getFileSize()`方法实际上并没有返回文件大小。您基本上移动到 BMP 标头中的正确位置，但不是实际读取表示大小的下 4 个字节，而是返回文件中的位置（始终为 2）。然后在调用函数中，您没有任何错误检查，并且您的代码假定文件大小始终大于 54（例如，读取缓冲区的分配）。

另请记住，BMP 标头中的文件大小字段可能并不总是正确的，您还应该考虑实际文件大小。

# scala - Scala，Casbah：MongoCollection.insert 编译错误

> ID：15728264
> 
> 赞同：0
> 
> 时间：2013-03-31T09:52:38.073
> 
> 标签：scala, compiler-errors, casbah

我正在尝试使用 Casbah 工具包编写将数据写入 MongoDB 的函数：

```
 import com.mongodb.casbah.WriteConcern
      import ...

  def saveRecord(rec: MongoDBObject) {
    mongoColl.insert(rec)
  } 
```

我收到以下错误：

```
1) No implicit view available from Object => com.mongodb.casbah.Imports.DBObject.   

2) not enough arguments for method insert: (implicit dbObjView: Object => com.mongodb.casbah.Imports.DBObject, implicit concern: com.mongodb.WriteConcern, implicit encoder: com.mongodb.casbah.Imports.DBEncoder)com.mongodb.casbah.Imports.WriteResult. Unspecified value parameter dbObjView. 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:56:20.097

我不确定没有完全导入，但尝试更改`MongoDBObject`或`com.mongodb.DBObject`添加`import com.mongodb.casbah.Imports._`

# c++ - 从整数向量列表中删除重复项的快速方法

> ID：15728266
> 
> 赞同：1
> 
> 时间：2013-03-31T09:53:33.857
> 
> 标签：c++, algorithm, sorting, unique

假设我们有一个函数，它返回一百万个长度为 30 的整数向量，每个向量具有较小的条目（例如，介于 -100 和 100 之间）。进一步假设输出只有大约 30000 个唯一向量，其余的都是重复的。检索唯一输出向量列表的良好数据结构和算法是什么？优选地，当 3% 的唯一向量的比例大致恒定时，该解决方案应该可以很好地扩展。

这个问题主要是关于数据结构的，但我打算使用 STL 在 C++ 中实现它，所以也欢迎任何关于实现的提示。

*   朴素的算法是存储已知向量的列表（可能按字典顺序排序）。当一个新向量到达时，我们可以使用循环检查它是否已经在列表中（或在排序列表中搜索）。
*   散列：假设向量存储在 C 数组中。什么是整数向量的好散列函数？我看到的一个缺点是每个向量的每个组件都至少被触摸一次。这似乎已经太多了。
*   任何树数据结构都好吗？例如，我们可以将所有可见向量的第一个分量中的值存储为根，然后将第二个分量中的值存储为它们的子项，...

我没有计算机科学背景。我也很乐意提供一些文献资料，我可以在这些文献中学习如何解决这些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:03:23.107

您提出的建议有时被称为后备表。用于各种查找目的的辅助表。在您的情况下，您有许多不同的可能方式来组织此表。最明显的是不组织它，使用线性搜索来查看下一个元素是否已知。由于该表最终将包含大约 30000 个元素，因此这可能不是一个好主意。从标准库（至少在 C++11 中），有两种可能性：`std::set`和 `std::unordered_set`. `std::set`使用某种形式的平衡树，因此每次查找最多进行 lg  *n*比较（对于 30000 个元素，大约 15 个）；`std::unordered_set`是一个哈希表，并且具有良好的哈希函数，将需要尽可能少的常量比较：您应该能够将其平均降低到 2 以下（但可能会以更多内存为代价 - 负载因子越低，碰撞的概率越小）。正如你提到的，你*做到了*有计算哈希函数的额外成本，正如您所指出的，这确实涉及访问向量中的每个元素；在二叉树中，每次比较所需的只是比较足够的元素以确定顺序——在许多情况下，可能只有一个或两个。（但是，如果您说有很多重复项......在您访问所有 30 个条目之前，您无法检测到重复项，因为任何一个条目都可能会有所不同。）了解哪种解决方案实际上更快的唯一方法是测量两者都使用典型数据；对于您描述的数据集（许多重复项），我怀疑哈希表会获胜，但这远非确定。

最后，您可以使用某种非二叉树。如果您真的可以将值限制在特定范围内（例如 -100..100），则可以使用带有指向子节点的指针的普通向量或数组，直接使用元素值进行索引，并根据需要进行转置。然后，您只需遍历树，直到找到空指针，或者到达终点。树的最大深度为 30，实际上，每个元素的深度为 30，但通常情况下，您会发现元素在深度之前是唯一的。我怀疑（但同样，你需要测量）在你的情况下，有很多重复，这实际上会比前两个建议慢得多。（而且你需要做更多的工作，因为我不知道任何现有的实现。）

至于散列，几乎任何形式的线性全等散列就足够了：例如 FNV。大多数此类哈希的文档都涉及字符串（ 的数组 `char`），但它们往往与任何整数类型一样好。我通常使用类似的东西：

```
template <typename ForwardIterator>
size_t
hash( ForwardIterator begin, ForwardIterator end )
{
    size_t results = 2166136261U 
    for ( ForwardIterator current = begin; current != end; ++ current ) {
        results = 127 * results + static_cast<size_t>( *current );
    }
    return results;
} 
```

我`127`作为乘数的选择主要是基于旧系统中的速度：乘以 127 比大多数其他能提供良好结果的值要快得多。（我不知道这是否仍然正确。但是在许多机器上乘法仍然是一个相对较慢的操作，编译器会转换`127 * x`成类似`x << 7 - x`if that is faster.) 使用上述算法的分布与FNV，至少对于我测试过的数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:00:27.337

基数映射是理想的，但您需要实现它，因为 std 库中没有实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T11:37:16.763

计算第一个向量中的值的 CRC 表示。您现在有一个代表您的 30 个值的数字。相对于其余向量，该数字可能是唯一的，但不能保证。

以 CRC 值作为键，以及指向实际向量的指针并将其插入到多映射 {CRC, VectorPointer} 中。

现在为每个剩余的向量计算 CRC，并在 multimap 中查找。

如果找不到，请插入 {CRC, VectorPointer}。如果确实找到了，请遍历匹配项并比较数据元素以确定它是否相同。如果是丢弃新向量。如果不是，则插入 {CRC, VectorPointer}。

冲洗并重复，直到处理完所有 30,000 个向量。

您在多图中拥有可迭代的唯一集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T11:39:43.710

假设你有 N 个长度为 K 的向量，其中只有 M 个是唯一的。

*   哈希+哈希图

您可以在 O(K) 时间内计算每个向量的哈希值，检查哈希图中是否已经有这样的向量，并在 O(1) 时间内插入新向量。对于散列函数，您可以简单地使用不带模数的多项式散列，只需将散列存储为 64 位类型并忽略溢出。实现非常简单，它将在需要 O(M*K) 内存的 O(N*K) 时间内工作。如果您需要先对元素进行排序，时间将是 O(N*K*log(K))

*   基数树

我认为你不应该在这里使用基数树，因为你仍然需要查看每个向量的每个元素。之所以如此，是因为如果你在一棵树中没有这样的向量，你需要插入它的所有元素，如果你有这样的向量，你需要下到树的叶子上才能看到你以前真的插入过这样的向量。所以渐近线保持不变，但你需要自己实现树，这不是一个好主意:)

* * *

看起来很容易表明您至少需要阅读向量的所有元素。之所以如此，是因为在每一刻你都有两种可能性——你之前已经找到了当前向量，你需要读取它的所有元素到最后来识别它，或者你之前没有找到当前向量，你需要读取它的所有元素对它们进行排序和保存。然而，如果向量已经排序，您将只需要读取第一个不匹配的元素。但是让我们想象一下，前 30000 个向量是唯一的，那么无论您将使用什么算法或数据结构，您都需要读取所有其他向量到最后以确定它们不是唯一的。最后我们知道你需要阅读几乎所有的向量到最后:)

如果您的值确实在范围内 (-100, 100) 并且向量中只有 30 个值，您会注意到这样的向量可以保存为四个 64 位整数，因为其中只有`8*30 = 240`数据位。但这只是另一个想法，我认为使用它的任何实现都不会比散列+散列图更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T12:53:02.790

> 散列：......我看到的一个缺点是每个向量的每个组件都至少被触摸一次。这似乎已经太多了。

在最坏的情况下，你怎么能比较两个向量而不至少看一次呢？不，真的，如果你有 1,1,1 和 2,2,2 比较/匹配立即结束。但是如果你有 1,2,3 和 1,2,3 呢？

无论如何，这是解决问题的一种方法。实施肯定可以改进。

```
#include <iostream>
#include <map>
#include <vector>
#include <list>
#include <cstdint>
#include <cstdlib>
#include <ctime>

using namespace std;

const int TotalVectorCount = 1000000;
const int UniqueVectorCount = 30000;
const int VectorLength = 30;

typedef vector<int> Vector;

typedef unsigned long long uint64;

void GenerateRandomVector(Vector& v)
{
  v.reserve(VectorLength);
  // generate 30 values from -100 to +100
  for (int i = 0; i < VectorLength; i++)
    v.push_back(rand() % 201 - 100);
}

bool IdenticalVectors(const Vector& v1, const Vector& v2)
{
  for (int i = 0; i < VectorLength; i++)
    if (v1[i] != v2[i])
      return false;

  return true;
}

// this lets us do "cout << Vector"
ostream& operator<<(ostream& os, const Vector& v)
{
  for (int i = 0; i < VectorLength; i++)
    os << v[i] << ' ';

  return os;
}

uint64 HashVector(const Vector& v)
{
  // this is probably a bad hash function,
  // but it seems to work nonetheless
  uint64 h = 0x7FFFFFFFFFFFFFE7;
  for (int i = 0; i < VectorLength; i++)
    h = h * 0xFFFFFFFFFFFFFFC5 + v[i];
  return h & 0xFFFFFFFFFFFFFFFF;
}

Vector UniqueTestVectors[UniqueVectorCount];

void GenerateUniqueTestVectors()
{
  map<uint64,char> m;
  for (int i = 0; i < UniqueVectorCount; i++)
  {
    for (;;)
    {
      GenerateRandomVector(UniqueTestVectors[i]);
      uint64 h = HashVector(UniqueTestVectors[i]);

      map<uint64,char>::iterator it = m.find(h);

      if (it == m.end())
      {
        m[h] = 0;
        break;
      }
    }
  }
}

bool GetNextVector(Vector& v)
{
  static int count = 0;
  v = UniqueTestVectors[count % UniqueVectorCount];
  return ++count <= TotalVectorCount;
}

int main()
{
  srand(time(0));

  cout << "Generating " << UniqueVectorCount << " unique random vectors..."
       << endl;
  GenerateUniqueTestVectors();

#if 0
  for (int i = 0; i < UniqueVectorCount; i++)
    cout << UniqueTestVectors[i] << endl;
#endif

  cout << "Generating " << TotalVectorCount << " random vectors with only "
       << UniqueVectorCount << " unique..." << endl;

  map<uint64,list<Vector>> TheBigHashTable;

  int uniqCnt = 0;
  int totCnt = 0;

  Vector v;
  while (GetNextVector(v))
  {
    totCnt++;

    uint64 h = HashVector(v);

    map<uint64,list<Vector>>::iterator it = TheBigHashTable.find(h);

    if (it == TheBigHashTable.end())
    {
      // seeing vector with this hash (h) for the first time,
      // insert it into the hash table
      list<Vector> l;
      l.push_back(v);

      TheBigHashTable[h] = l;
      uniqCnt++;
    }
    else
    {
      // we've seen vectors with this hash (h) before,
      // let's see if we've already hashed this vector
      list<Vector>::iterator it;
      bool exists = false;

      for (it = TheBigHashTable[h].begin();
           it != TheBigHashTable[h].end();
           it++)
      {
        if (IdenticalVectors(*it, v))
        {
          // we've hashed this vector before
          exists = true;
          break;
        }
      }

      if (!exists)
      {
        // we haven't hashed this vector before,
        // let's do it now
        TheBigHashTable[h].push_back(v);
        uniqCnt++;
      }
    }
  }

#if 0
  cout << "Unique vectors found:" << endl;
  map<uint64,list<Vector>>::iterator it;
  for (it = TheBigHashTable.begin();
       it != TheBigHashTable.end();
       it++)
  {
    list<Vector>::iterator it2;
    for (it2 = it->second.begin();
         it2 != it->second.end();
         it2++)
      cout << *it2 << endl;
  }
#endif

  cout << "Hashed " << uniqCnt << " unique vectors out of " << totCnt << " total" << endl;

  return 0;
} 
```

使用 12848 kB RAM 在 1.12 秒内输出 ( [ideone )：](http://ideone.com/gfY5NC)

```
Generating 30000 unique random vectors...
Generating 1000000 random vectors with only 30000 unique...
Hashed 30000 unique vectors out of 1000000 total 
```

现在，与更少和更短的唯一向量相同，因此可以在控制台中打印它们：

使用 3040 kB 的 RAM 在 0.14 秒内输出（[ideone ）：](http://ideone.com/LXMUCB)

```
Generating 10 unique random vectors...
-45 75 1 -71 -83 97 10 -18 89 -10 
-11 60 18 -54 -90 77 19 -90 -7 -31 
-15 -65 -47 88 25 -56 4 39 -20 39 
-64 -14 -37 -13 15 -70 -66 -75 12 73 
-35 -99 32 83 98 -8 59 16 2 -98 
86 37 -63 -62 24 62 -68 78 -50 -38 
17 -64 48 80 -26 -87 61 8 -62 -28 
-70 -47 -27 62 86 -29 -97 44 37 -45 
-4 -28 92 -17 -40 -35 -56 -58 -57 -55 
5 10 -19 -48 -61 5 -35 100 -88 -47 
Generating 1000000 random vectors with only 10 unique...
Unique vectors found:
86 37 -63 -62 24 62 -68 78 -50 -38 
17 -64 48 80 -26 -87 61 8 -62 -28 
5 10 -19 -48 -61 5 -35 100 -88 -47 
-4 -28 92 -17 -40 -35 -56 -58 -57 -55 
-11 60 18 -54 -90 77 19 -90 -7 -31 
-15 -65 -47 88 25 -56 4 39 -20 39 
-35 -99 32 83 98 -8 59 16 2 -98 
-45 75 1 -71 -83 97 10 -18 89 -10 
-64 -14 -37 -13 15 -70 -66 -75 12 73 
-70 -47 -27 62 86 -29 -97 44 37 -45 
Hashed 10 unique vectors out of 1000000 total 
```

# android - 使用名称中的当前日期和时间将图像保存到 sd 不起作用

> ID：15728269
> 
> 赞同：3
> 
> 时间：2013-03-31T09:54:11.033
> 
> 标签：android, image, datetime, save, android-camera

在我的应用程序中，我使用一个按钮启动相机应用程序并将图片保存到 sdCard 上的特定文件夹，按当前日期和时间命名。当我对图片的名称进行硬编码时，它可以正常工作，但是如果我试图在名称中加上日期，它根本就不起作用。

```
 Intent imageIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
 File imagesFolder = new File(Environment.getExternalStorageDirectory(), Constants.IMAGE_FOLDER_URI);
 imagesFolder.mkdirs();    
 Date d = new Date();
 CharSequence s  = DateFormat.format("MM-dd-yy hh:mm:ss", d.getTime());    
 File image = new File(imagesFolder, s.toString() + ".jpg"); //this line doesn't work

 Uri uriSavedImage = Uri.fromFile(image);
 imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
 startActivity(imageIntent); 
```

如果我放：

```
s = "some_name"; 
```

然后它可以工作，但我需要图像名称中的当前日期和时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T10:00:30.717

冒号`:`不是文件名中的有效字符，这就是它无法创建此类文件的原因。尝试将您的名称模式更改为以下内容：

```
CharSequence s  = DateFormat.format("MM-dd-yy hh-mm-ss", d.getTime()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-08T13:44:06.380

输入此代码并尝试：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMdd_HH_mm_ss");
String currentTimeStamp = dateFormat.format(new Date()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T10:07:34.163

这是一个替代解决方案：

```
File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals
        (android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),
            "YOUR_FOLDER_NAME/");
else
    cameraFolder= StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMdd'T'HHmmss");
String timeStamp = dateFormat.format(new Date());
String imageFileName = "picture_" + timeStamp + ".jpg";

File photo = new File(Environment.getExternalStorageDirectory(), 
        "YOUR_FOLDER_NAME/" + imageFileName); 
```

如果您只想将 TimeStamp 作为图像名称，则可以`"picture_" +`从`String imageFileName`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-02T10:06:03.227

用这个

```
File image = new File(imagesFolder, s+ "Rj.jpg"); 
```

# ocaml - 将 OCaml AST 打印为 OCaml 代码

> ID：15728271
> 
> 赞同：5
> 
> 时间：2013-03-31T09:54:38.360
> 
> 标签：ocaml, abstract-syntax-tree, camlp4

我有这段代码，其中包含一个camlp4 引用。

```
let f_name = "my_func"
<:str_item< value $lid:f_name$ a = a * 2 >> 
```

通过运行它之后`camlp4of`，它会产生这个：

```
 Ast.StExp (_loc,
    (Ast.ExApp (_loc,
       (Ast.ExApp (_loc, (Ast.ExId (_loc, (Ast.IdLid (_loc, "=")))),
          (Ast.ExApp (_loc,
             (Ast.ExApp (_loc,
                (Ast.ExId (_loc, (Ast.IdLid (_loc, "value")))),
                (Ast.ExId (_loc, (Ast.IdLid (_loc, f_name)))))),
             (Ast.ExId (_loc, (Ast.IdLid (_loc, "a")))))))),
       (Ast.ExApp (_loc,
          (Ast.ExApp (_loc, (Ast.ExId (_loc, (Ast.IdLid (_loc, "*")))),
             (Ast.ExId (_loc, (Ast.IdLid (_loc, "a")))))),
          (Ast.ExInt (_loc, "2"))))))) 
```

我的问题是，是否有打印生成的 ocaml 代码？我应该使用什么`camlp4of`命令或选项来显示代码？我希望从上面的例子中看到的是：

```
value my_func a = a * 2 
```

那可能吗？原因是因为我想做一些调试，看看生成的 ocaml 代码是什么样子的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T10:33:11.570

这是我几天前问自己的一个好问题。

您可以使用具有类型的`Camlp4.PreCast.Printers.OCaml.print_implem

```
value print_implem : ?input_file:string -> ?output_file:string ->
                     Ast.str_item -> unit; 
```

例如，在顶层（仅显示最后一个命令的输出）：

```
# #use "topfind";;
# #require "camlp4";;
# #load "camlp4of.cma";;
# open Camlp4.PreCast;;
# let _loc = Loc.ghost;;
# let test =
    let f_name = "my_func" in
    <:str_item< value $lid:f_name$ a = a * 2 >>;;
# Printers.OCaml.print_implem test;;
let _ = (value my_func a) = (a * 2);;
- : unit = () 
```

另一种解决方案是制作一个语法扩展，以产生您正在寻找的输出。例如，Camlp4AstFilter 将忽略其输入，并将您的内容作为输出返回，因此您可以使用它`camlp4of my_filter.cmo -str ''`来获取您正在寻找的 AST。

# ubuntu - 通过串口发送一个 300-400 毫秒的脉冲

> ID：15728273
> 
> 赞同：1
> 
> 时间：2013-03-31T09:55:08.133
> 
> 标签：ubuntu, serial-port

如题，我需要通过串口发送一个 300-400 ms 的脉冲。我的传感器需要这样的脉冲才能唤醒。我的传感器生产商提供的程序可以在 Windows 中执行此操作。但是我需要在 ubuntu 中开发一个类似的程序，因为我的项目使用的是 ubuntu。任何指向也表示赞赏。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:58:42.287

首先，您需要确定要在哪个引脚上发出该脉冲。查看[RS232 上的 Wikipedia 页面，](http://en.wikipedia.org/wiki/Rs232)了解存在哪些信号。尽管在 Tx（传输数据）上发送脉冲是可行的，但这种情况并不常见，所以我认为您需要通过 RTS 或 DTR 发送脉冲。

为此，您将需要[ioctl](http://man7.org/linux/man-pages/man4/tty_ioctl.4.html)，这就是如何做到这一点，假设您想要脉冲 DTR

```
int pulseDTR(int fd)
{
    int status;

    // get the current modem control lines status
    if (ioctl(fd, TIOCMGET, &status) == -1) {
        // handle the error
    }

    // Now set DTR high
    status |= TIOCM_DTR;
    // and apply  
    if (ioctl(fd, TIOCMSET, &status) == -1) {
        // handle the error
    }
    // wait a bit
    usleep (400*1000);
    // Now set DTR low
    status &= ~TIOCM_DTR;
    // and apply  
    if (ioctl(fd, TIOCMSET, &status) == -1) {
        // handle the error
    }

    return 0;
} 
```

如果您需要脉冲 RTS，只需替换`TIOCM_DTR`为`TIOCM_RTS`.

有关串行端口编程的更多信息，我推荐[POSIX 操作系统的串行编程指南](http://www.easysw.com/~mike/serial/serial.html)和[Linux 串行 Howto](http://www.tldp.org/HOWTO/Serial-Programming-HOWTO/)。

编辑：根据 OP 的评论发送休息实际上是需要的。发送中断意味着 Tx 线在一定时间内被拉到逻辑 0（而不是控制信号）。这在[Linux 串行编程](http://www.lafn.org/~dave/linux/Serial-Programming-HOWTO.txt)方法中进行了描述，并按如下方式完成：

使用 ioctl：

```
 int ioctl( fd, TCSBRK, int arg ); 
```

使用 tc* 调用

```
 int tcsendbreak( fd, int arg ); 
```

[请注意Linux 串行编程指南](http://www.lafn.org/~dave/linux/Serial-Programming-HOWTO.txt)中的注释

> 发送中断：这里的操作在传统的
> ioctl() 调用和 POSIX 调用之间有所不同。对于常规调用，“0”的 arg 将 UART 的中断控制线设置为 0.25 秒。对于 POSIX 命令，断线设置为 arg 乘以 0.1 秒。

EDIT2：开源的好处是源代码可用:-) 这是来自 minicom 源代码的逐字记录，它真的很棒，因为它显示了 3 种发送中断的方法：

```
/*
 * Send a break
 */
void m_break(int fd)
{
#ifdef USE_SOCKET
  if (portfd_is_socket)
    return;
#endif
#ifdef POSIX_TERMIOS
  tcsendbreak(fd, 0);
#else
#  ifdef _V7
#    ifndef TIOCSBRK
  {
    struct sgttyb sg, ng;

    ioctl(fd, TIOCGETP, &sg);
    ioctl(fd, TIOCGETP, &ng);
    ng.sg_ispeed = ng.sg_ospeed = B110;
    ng.sg_flags = BITS8 | RAW;
    ioctl(fd, TIOCSETP, &ng);
    write(fd, "\0\0\0\0\0\0\0\0\0\0", 10);
    ioctl(fd, TIOCSETP, &sg);
  }
#    else
  ioctl(fd, TIOCSBRK, 0);
  sleep(1);
  ioctl(fd, TIOCCBRK, 0);
#    endif
#  endif
#endif
} 
```

1.  我猜Linux使用第一个选项，`tcsendbreak(fd, 0);`
2.  第三个选项也很有趣，因为执行`ioctl(fd, TIOCSBRK, 0);`之后是一些睡眠呼叫，然后`ioctl(fd, TIOCCBRK, 0);`应该允许您发送具有微调长度的中断信号。
3.  第二个选项实际上非常漂亮，因为它显示了如何通过摆弄端口设置并发送一串零来模拟中断。它在不实施中断的系统上总是有用的。

那么，结论呢？首先尝试，`tcsendbreak(fd, 0);`因为它是最简单的，如果这没有给出好的结果，请尝试`ioctl(fd, TIOCSBRK, 0); some sort of sleep ; ioctl(fd, TIOCCBRK, 0);`。在一个健全的系统上，“模拟中断”应该是不必要的。

# c# - 使用抽象类创建复制构造函数

> ID：15728275
> 
> 赞同：2
> 
> 时间：2013-03-31T09:55:31.660
> 
> 标签：c#, oop

我正在尝试复制一个对象，然后将对其进行修改，而不更改原始对象。相关类是：

```
abstract class Upgrade {}

class Shield: Upgrade
{
  public Shield(Shield a) {}
} 
```

问题是当另一个类想要获得“升级”对象但该类不知道它得到哪个对象时。例如：

```
public void AddUpgrade(Upgrade upgrade)
{
    for (int i = 0;i<Aliens.Count; i++)
    {
        Aliens[i].AddUpgrade(What should i put here?);
    }
} 
```

我必须使用复制构造函数，因为我不希望所有外星人共享相同的升级参考，但升级是一个抽象类，我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T09:57:42.147

考虑使用工厂而不是复制构造函数——[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)或一些[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)。

这些将允许您尽可能多地控制对象构造，而不会将您束缚在继承链上（至少，不多）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T10:01:19.610

您可以使`Upgrade`克隆，即添加`Clone()`到它（每个后代都将实现），它会变成这样：

```
Aliens[i].AddUpgrade(upgrade.Clone()); 
```

# objective-c - 使用 %.1f 时打印的意外值

> ID：15728277
> 
> 赞同：3
> 
> 时间：2013-03-31T09:55:36.987
> 
> 标签：objective-c, c, floating-point

我试图将浮点数显示到小数点后一位。我得到了意想不到的结果，如下所示：

代码：

```
float a = 1.25;
float b = 1.35;

NSLog(@"1.25 -> %.1f\n1.35 -> %.1f",a,b); 
```

输出：

> 1.25 -> 1.2
> 
> 1.35 -> 1.4

预期输出，或者：

> 1.25 -> 1.3
> 
> 1.35 -> 1.4

或者：

> 1.25 -> 1.2
> 
> 1.35 -> 1.3

这仅仅是由于二进制和十进制之间的内部转换吗？如果是这样，我如何获得预期的行为？

我正在使用 Xcode 4.6。

编辑：好的，感谢 TonyK 和 H2CO3，这是由于小数的二进制表示。

```
float a = 1.25;
float b = 1.35;
NSLog(@"1.25 -> %.30f\n1.35 -> %.30f",a,b); 
```

> 1.25 -> 1.250000000000000000000000000000
> 
> 1.35 -> 1.350000000000000088817841970013

很多很好的信息，但据我所知，没有人解决第二个问题：我如何获得预期的行为？

[Objective-C 中的四舍五入](https://stackoverflow.com/questions/752817/rounding-numbers-in-objective-c)是一个完全不同的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T10:29:44.377

1.35 是 27/20，二进制是

```
1.01 0110 0110 0110 0110 0110 0110.... 
```

A`float`在大多数系统上都有一个 23 位尾数（不包括隐含的前导 1。），所以它被四舍五入到

```
1.01 0110 0110 0110 0110 0110 1 
```

（因为 0110 明确大于 1000 的一半）。`printf`因此，当看到它时，它严格大于 1.35 。因此 1.4。

至于 1.25，这完全可以用二进制表示为

```
1.01 
```

所以`printf`看到了它的确切价值。但它应该如何围绕 1.25 呢？我们在学校被教导将 5 到 10 舍入。但大多数现代系统在硬件级别使用称为“舍入到偶数”的默认舍入模式，因为它减少了累积舍入误差的影响。这意味着当一个数字恰好在两个最近的四舍五入候选之间时，它会四舍五入到偶数候选。

所以似乎`print`使用“四舍五入”进行十进制输出！我在[这个 ideone 链接](http://ideone.com/27FMnL)检查了这个假设，确实 1.75 被四舍五入到 1.8。这对我来说是一个惊喜，但不是一个大惊喜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T10:00:57.433

那是因为浮点数不准确。`%.1f`打印**四舍五入**到小数点后一位的数字，但是，它似乎`1.35`不能精确地表示为 1.2500000，而是可以是一个稍小的数字。

在此处阅读有关此行为的信息：[每位计算机科学家都应该了解浮点数](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

# http - 如何通过 ngrep 解压缩 HTTP 响应正文？

> ID：15728281
> 
> 赞同：2
> 
> 时间：2013-03-31T09:56:44.260
> 
> 标签：http, ngrep

我正在尝试使用 ngrep 在我的笔记本电脑和 github.com 之间捕获 HTTP 消息，但是有些响应不是人类可读的，因为它们是以分块编码和压缩的形式发送的，例如：

`T 207.97.227.239:80 -> 192.168.0.175:41372 [AP] HTTP/1.1 404 Not Found. Server: GitHub.com. Date: Sun, 31 Mar 2013 09:50:25 GMT. Content-Type: text/plain. Transfer-Encoding: chunked. Connection: keep-alive. Content-Encoding: gzip. . 25. .......... J-./.,./.T../QH./.K........`

如何解压缩响应？还是有比 ngrep 更好的工具来捕获 HTTP 消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:20:59.337

ngrep 是用于网络（传入/传出消息）的 grep 实现。它不适合捕获 HTTP 消息。这里有两个工具可用于捕获消息和查看压缩内容。

1.  [Fiddler](http://www.fiddler2.com/fiddler2/) (windows)查看压缩数据的[常见问题](https://www.fiddler2.com/fiddler/help/faq.asp)
2.  [Wireshark](http://www.wireshark.org/download.html)（所有操作系统）查看压缩数据的[常见问题解答](http://wiki.wireshark.org/HTTP_Preferences)

# python - SQLAlchemy ValueError for create_engine() 密码中的斜线

> ID：15728290
> 
> 赞同：1
> 
> 时间：2013-03-31T09:58:31.093
> 
> 标签：python, escaping, sqlalchemy

看起来很简单的问题：我的 Python 脚本正在尝试创建 SQLAlchemy 数据库连接。密码包含正斜杠：

```
engineString = 'postgresql://wberg:pass/word@localhost/mydatabase'
engine = sqlalchemy.create_engine(engineString) 
```

但第二行提出：

```
ValueError: invalid literal for int() with base 10: 'pass' 
```

使用原始字符串（以 'r' 开头）没有帮助。有没有办法让 SQLAlchemy 接受该密码？我正常的下一步是尝试使用从属方法构建连接，但我在文档中看不到另一种建立连接的方法。我在这里根本不允许使用带有斜杠的密码吗？我可以接受这一点，但如果没有该功能，该工具包似乎不太可能做到这一点。

版本：Python 2.6.6、SQLAlchemy 0.8.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T10:20:14.270

斜杠不是 URL 组件字符串的有效字符。您需要对连接字符串的密码部分进行 URL 编码：

```
from urllib import quote_plus as urlquote
from sqlalchemy.engine import create_engine
engineString = 'postgresql://wberg:%s@localhost/mydatabase' % urlquote('pass/word')
engine = create_engine(engineString) 
```

# sql-server - 需要递归 CTE SQL 查询帮助

> ID：15728293
> 
> 赞同：0
> 
> 时间：2013-03-31T09:58:42.573
> 
> 标签：sql-server, sql-server-2012, common-table-expression, recursive-query

我正在使用 SQL Server 2012，需要编写一个递归 SQL 查询来遍历层次结构（在同一个表上）以返回一个在其元组上具有特定条件的父级。

我已经使用递归 CTE 设置了这个示例[SQL Fiddle](http://sqlfiddle.com/#!6/990bc/3)，但我现在已经不知所措了。

我需要的是能够返回第四列 ( `ReportingLocationId int`)，它被定义为具有`IsReportingRollup bit`集合的层次结构的父 id。

因此，对于第 1 行，这将为空，对于第 2、3 和 4 行，这将设置为 2。类似地，对于第 5、6、7 行，这将设置为 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:23:00.413

修改您提供的 SQL Fiddle，我想出了：

```
WITH hierarchy AS (
  SELECT t.Id,
         t.Name,
         t.ParentId,
         CAST(NULL AS nvarchar(100)) AS parentname,
         case when t.IsReportingRollup = 1 then t.Id
              else null
         end as ReportingLocationId
    FROM Location t
   WHERE t.ParentId IS NULL
  UNION ALL
  SELECT x.Id,
         x.Name,
         x.ParentId,
         y.Name,
         case when y.ReportingLocationId is not null then y.ReportingLocationId
              when x.IsReportingRollup = 1 then x.Id
              else null
         end
    FROM Location x
    JOIN hierarchy y ON y.Id = x.ParentID)
SELECT s.Id,
       s.Name,
       s.parentname,
       s.ReportingLocationId
  FROM hierarchy s 
```

# php - PHP中的foreach计数是否受到限制？

> ID：15728295
> 
> 赞同：0
> 
> 时间：2013-03-31T09:59:52.927
> 
> 标签：php, foreach, limit

我不知道是对还是错。我有一个 PHP 文件，内容如下：

```
$x = explode("\n", $y); // Making $x has length 65000
foreach ($x as $k) {
    //Some code here
} 
```

通常我的脚本会在大约 25000 次循环后自动停止。为什么？它是PHP默认配置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:12:23.157

这种行为可能是由于两个原因

1.  脚本执行时间超过分配给它...尝试增加`max_execution_time`php.ini 。

2.  脚本的内存限制可能超过分配。为此尝试更改 `memory_limit`php.ini中的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:11:37.530

PHP 的默认内存限制是 8MB（我的意思是标准发行版，而不是从源代码编译的默认 PHP，因为那是无限的）。

当我执行此代码时：

```
$x = array();

for ($i = 0; $i < 65000; $i++) {
    $x[$i] = $i;
}

echo (memory_get_peak_usage()/1024).'<br />';
echo (memory_get_usage()/1024).'<br />';
echo count($x); 
```

它输出：

```
9421.9375
9415.875
65000 
```

为了测试这一点，我增加了我的内存限制。但是如果你不能分配更多的内存，它会因错误而中止；

```
for ($i = 0; $i < 1e6; $i++) { // 1 Million
    $x[$i] = $i;
} 
```

它报告回来；

```
Fatal error: Allowed memory size of 33554432 bytes exhausted (tried to allocate 32 bytes) in /Applications/MAMP/htdocs/run_app.php on line 5 
```

供个人使用（我有 16GB RAM，所以没问题）我使用以下起始代码：

```
// Settings
ini_set('error_reporting', E_ALL); // Shows all feedback from the parser for debugging
ini_set('max_execution_time', 0); // Changes the 30 seconds parser exit to infinite
ini_set('memory_limit', '2048M'); // Sets the memory that may be used to 512MegaBytes 
```

这样你就可以按照你想要的方式增加你的限制。除非您有专用服务器，否则这不适用于在线主机。如果您不知道自己在做什么，这是非常危险的。如果它开始缺乏 RAM/资源，无限循环将使您的浏览器甚至操作系统崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:52:00.477

在 foreach 循环中，将数组作为引用传递。在 PHP 中，foreach 在开始循环之前制作数组的副本。因此，如果您有一个 100K 的数组，那么 foreach 将至少分配另外 100K 用于处理。通过将其作为参考传递，您只需关心地址的大小。

# java - 使用 Jsoup Java 发表评论

> ID：15728296
> 
> 赞同：0
> 
> 时间：2013-03-31T09:59:56.163
> 
> 标签：java, android, post, methods, jsoup

如果使用 javascript 的按钮设置方法，我如何使用 jsoup 在网站上发表评论，如下所示：

```
<div class="b-textearea">
                        <textarea rows="3" name="addcomment" id="txtComments" class="fullboxtext"></textarea>
                        <input type="hidden" name="verify" value= "6b43e52744d7570743d8d893e1d11130" />
                        <input type="button" class="but" name="commentpost" onClick="fxSendComments('divComments','txtComments',6469,107169)" />
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:52:15.460

Jsoup 无法模拟浏览器.. 要调用 javascript 函数，您需要使用某种适用于 android 或 java 的浏览器模拟器。

# php - 停止父函数回显

> ID：15728304
> 
> 赞同：0
> 
> 时间：2013-03-31T10:00:52.727
> 
> 标签：php, oop, extending-classes

假设在 PHP 中有一个 Parent 类：

```
<?php
class Parent {

    public function speak()
    {
        // Do bunch of stuff
        $output = outcomeOfAbove();
        echo $output;
    }

} 
```

你有一个班级孩子：

```
<?php
class Child extends Parent{

    public function speak()
    {
        parent::speak();

        echo 'Hello from child';
    }

} 
```

现在假设我想要 Child speak() 函数中 $output 的内容，有没有办法捕获 parent::speak() 的输出；并阻止此功能回显？知道您无法更改“父”类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:15:04.493

您可以使用 PHP 输出缓冲功能：

```
 public function speak()
  {
    ob_start();
    parent::speak();
    $parent_output = ob_get_contents();
    ob_end_clean();

    echo 'Hello from child';
  }

} 
```

有关详细信息，请参阅[PHP.net 手册](http://php.net/manual/en/function.ob-start.php)。

祝你好运 ;）

# winforms - 将两个属性绑定到一个文本框文本

> ID：15728306
> 
> 赞同：0
> 
> 时间：2013-03-31T10:01:09.680
> 
> 标签：winforms, data-binding, textbox

假设我有一堂这样的课：

```
class MyClass
{
    ... (some more properties here)

    public int Min {get;set;}
    public int Max {get;set;}

    ... (some more properties here)
} 
```

现在我在设计器中放置了一个文本框，我希望它以用破折号分隔的文本显示 Min 和 Max。例如，如果 Min=3 和 Max=10，则文本框应显示“3-10”。当文本更改/绑定更新时，它应该像这样解析字符串“3-10”：

用“-”分割字符串并用 int.Parse(...) 解析两个字符串如果这不起作用（发生异常），我想以某种方式对此做出反应。例如，显示错误消息会起作用。

我该怎么做呢？VisualStudio 设计器只允许我将文本绑定到对象的一个​​属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:15:18.843

对于显示 3-10，您可以编写

```
TextBoxName.Text=Min + "-" + Max; 
```

并且，您可能会引发异常并将 MessageBox 显示为：

```
try{
    int.Parse(Min);
    int.Parse(Max);
}
catch(Exception ae){
    MessageBox.Show("Some error message");
} 
```

**编辑：** 对于绑定，

```
textBoxName.DataBindings.Add("Text",this,"StringVariable");
                    //Text property,this form, name of the variable. 
```

其中 StringVariable 是一些返回 Min + "-" + Max 的属性；

# c - 调整posix消息队列中的消息数

> ID：15728307
> 
> 赞同：2
> 
> 时间：2013-03-31T10:01:10.977
> 
> 标签：c, linux, posix, message-queue

当我尝试减少 POSIX 消息队列中的消息数量时，它的最大值保持为 10。是否可以减少或增加 POSIX 消息队列中的消息数量？

以下代码将消息发送到 POSIX 消息队列。我将最大消息（MQ_MAX_NUM_OF_MESSAGES）设置为 5，但它发送 10 条消息

发送.c

```
#include <stdio.h>
#include <mqueue.h>
#include <sys/stat.h>
#include <stdlib.h>
#include <unistd.h>
#include <time.h>
#include <string.h>

#define MSGQOBJ_NAME    "/myqueue123"
#define MAX_MSG_LEN     70
#define MQ_MESSAGE_MAX_LENGTH 70
#define MQ_MAX_NUM_OF_MESSAGES 5
struct mq_attr attr;

int main(int argc, char *argv[]) 
{
mqd_t msgq_id;
unsigned int msgprio = 0;
pid_t my_pid = getpid();
char msgcontent[MAX_MSG_LEN];
int create_queue = 0;
char ch;            /* for getopt() */
time_t currtime;

attr.mq_flags = 0; 
attr.mq_maxmsg = MQ_MAX_NUM_OF_MESSAGES;
attr.mq_msgsize = MQ_MESSAGE_MAX_LENGTH;
attr.mq_curmsgs = 0; 

while ((ch = getopt(argc, argv, "qp:")) != -1) {
    switch (ch) {
        case 'q':   /* create the queue */
            create_queue = 1;
            break;
        case 'p':   /* specify client id */
            msgprio = (unsigned int)strtol(optarg, (char **)NULL, 10);
            printf("I (%d) will use priority %d\n", my_pid, msgprio);
            break;
        default:
            printf("Usage: %s [-q] -p msg_prio\n", argv[0]);
            exit(1);
    }
}   
if (msgprio == 0) {
    printf("Usage: %s [-q] -p msg_prio\n", argv[0]);
    exit(1);
}
if (create_queue) {
    msgq_id = mq_open(MSGQOBJ_NAME, O_RDWR | O_CREAT | O_EXCL, S_IRWXU | S_IRWXG, NULL);
} else {
    msgq_id = mq_open(MSGQOBJ_NAME, O_RDWR);
}
if (msgq_id == (mqd_t)-1) {
    perror("In mq_open()");
    exit(1);
}

currtime = time(NULL);
snprintf(msgcontent, MAX_MSG_LEN, "Hello from process %u (at %s).", my_pid, ctime(&currtime));  
mq_send(msgq_id, msgcontent, strlen(msgcontent)+1, msgprio);   
mq_close(msgq_id);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T10:20:28.547

在 posix 消息队列的[linux 手册页](http://linux.die.net/man/7/mq_overview)中，您可以阅读如何通过**/proc**文件系统调整相关的内核配置。

特别是**/proc/sys/fs/mqueue/msg_max**是您正在寻找的：

> 此文件可用于查看和更改队列中最大消息数的上限。这个值作为给 mq_open(3) 的 attr->mq_maxmsg 参数的**上限。**msg_max 的默认值为 10。最小值为 1（在 2.6.28 之前的内核中为 10）。上限是**HARD_MAX** : (131072 / sizeof(void *)) （Linux/86 上为 32768）。**特权进程**(CAP_SYS_RESOURCE) 会忽略此限制，但仍会施加 HARD_MAX 上限。

**编辑**
如[mq_open(2)](http://linux.die.net/man/2/mq_open)、[mq_getattr(3)](http://linux.die.net/man/3/mq_getattr)和[mq_send(3)](http://linux.die.net/man/3/mq_send)手册页中所述，**mq_maxmsg**值设置队列可以在不阻塞的情况下处理的最大消息数（或在非阻塞队列的情况下返回**EAGAIN** ） . 如果您使用 mq_maxmsg = 5 mq_open 一个队列，并且**/proc**中的内核配置为 10（默认值，AFAIK），则该队列将接受 5 条消息而不会阻塞。如果您使用 mq_maxmsg = 15 mq_open 队列和**/proc中的内核配置**为 10，队列将接受 10 条消息。也就是说：您可以创建一个队列，该队列的最大消息数低于内核接受的最大消息数，但不大于内核接受的最大消息数。

# c++ - C++ - 通过指针表示所有权

> ID：15728309
> 
> 赞同：6
> 
> 时间：2013-03-31T10:01:12.650
> 
> 标签：c++, pointers, ownership, nullptr

在我的游戏引擎中，共有三个类：*EntityCharacter*、*EntityVehicle*和*EntityVehicleSeat*。

![在此处输入图像描述](https://i.stack.imgur.com/BI22L.png)

*EntityVehicle*包含带有指向*EntityCharacter*实例的指针的座位对象。如果座位对象的目标字符实体指针是空指针，则没有字符坐在该特定座位对象上。EntityCharacter 类实例还具有指向座位对象的指针，指示这些角色实体是否坐在某些车辆中。

换句话说，EntityCharacter 类实例有一个指向 EntityVehicleSeat 的指针，反之亦然：

```
EntityCharacter -> EntityVehicleSeat
EntityCharacter <- EntityVehicleSeat 
```

这样我们就可以通过角色和车辆实体检查这个所有权。

将指针设置为相互指向很简单，但是有一个问题 - 如果另一个对象超出范围，我们最终会在剩余对象中拥有一个无效的指针。

![在此处输入图像描述](https://i.stack.imgur.com/fDpnc.png)

*怎样才能巧妙地表达这种所有权？如何通知另一个对象另一个对象不再存在的事实？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T10:10:23.810

管理对象到对象的关系，包括双向关系，是析构函数变得有用的地方。您可以像这样消除悬空指针的问题：

```
~EntityCharacter() {
    // Do some other cleanup...
    ...
    if (seatPtr) {
        assert(seatPtr->characterPtr == this); // That's my seat!
        seatPtr->characterPtr = NULL;
    }
}

~ EntityVehicleSeat() {
    // Do some other cleanup...
    ...
    if (characterPtr) {
        assert(characterPtr->seatPtr == this); // That's my character!
        characterPtr->seatPtr = NULL;
    }
} 
```

这种方法的一个问题是并发性：如果可以从不同的线程同时删除一个座位和一个角色，则需要同步删除。

# php - 点击按钮 cookie 过期

> ID：15728310
> 
> 赞同：0
> 
> 时间：2013-03-31T10:01:15.590
> 
> 标签：php, function, session, setcookie

我们可以在 php.ini 中添加事件吗？就像我想注销一样。销毁我当前的会话并在单击按钮时删除现有的 cookie。按钮表单动作对应同页drum.php

```
<?php
$h=0;
if(isset($_COOKIE["name"])) {
  if($h==0) {
    session_start();
    if(isset($_SESSION['views'])) {
      $_SESSION['views']=$_SESSION['views']+1;
    } else {
      $_SESSION['views']=1;
    }
    echo "You have been logged in as: ".$_COOKIE["name"].".Your session will expire in "."5min."."You have viewed this page ".$_SESSION['views'];
  } else {
    session_destroy();
    setcookie("name",$name,time()-25);
  }
} else {
  echo "<form action='drum.php' method='post'><input type='text' name='name'></input>          `   </input><input type='submit' value='Log in'></input></form>";
  $name=$_POST["name"];
  $expire=time()+2*60;
  setcookie("name",$name,$expire);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:15:43.197

是的，你可以这么做。在 PHP 页面的开头，编写`if(isset($_POST['buttonName']))`并在其中嵌套对该按钮的所有操作。并确保您的表单发布到该页面本身。

每次请求页面时，它都会检查按钮是否已被单击，如果为真则注销。如果为 false，则显示常规内容。

# node.js - 通过 NPM install 使用 Zurb 的 Foundation

> ID：15728311
> 
> 赞同：5
> 
> 时间：2013-03-31T10:01:17.837
> 
> 标签：node.js, express, npm, zurb-foundation

我对使用 nodejs 和 npm 还很陌生，所以请原谅任何天真。我想在我最新的项目中使用 Foundation 并使用 npm 来安装它。这已经奏效，我`node_modules`现在包含基础目录。

我现在如何在我的标记中使用 Foundation？我有一个`/public`包含我的观点的目录，但是指向 node_modules 目录的引用肯定是不好的做法吗？我是否`app.js`在基础目录中的文件中创建自定义路由？我不确定最佳做法是什么？

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-27T02:36:49.100

您需要将基础注册为手写笔插件。如果您使用的是 connect 或 express，请尝试以下操作：

```
var express = require('express'),
    stylus = require('stylus'),
    app = express();

app.use(stylus.middleware({
    compile: function (str, path) {
        return stylus(str)
            .set('filename', path)
            .use(require('foundation')());
    }
})); 
```

然后在您的样式文件中，您可以

```
@import "foundation" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-01T17:57:02.780

## 使用 npm 安装 Foundation

```
npm install foundation-sites 
```

然后，将 Foundation 的文件复制到您的 Web 服务器并使用`<link>`标签引用它。

## 用 Bower 安装基础

```
bower install foundation 
```

然后，将 Foundation 的文件（或整个 bower_components 目录）复制到您的 Web 服务器并使用`<link>`标签引用它。

* * *

Foundation 的[GitHub 页面](https://github.com/zurb/foundation)及其[入门页面](http://foundation.zurb.com/docs/index.html)提供了有关设置 Foundation 的不同方法的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:09:06.423

我认为您对 NodeJS 有误解。网站中的 NodeJS 是 PHP、ASP 或 Ruby 等后端。

Foundation Framework 是一个 CSS 框架，所以它是为客户端，前端的。

要在由 NodeJS 运行的网站中使用它，只需将您在[Zurb 网站](http://foundation.zurb.com/)中下载的库放在公共目录中并在您的视图中使用它，如下所示：

```
<link rel="stylesheet" href="styles/foundation.css"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T04:01:08.777

您也许可以引入基础代码。git://github.com/ch1c0t/bower-foundation-css.git 或 git://github.com/mmcgahan/sass-foundation.git。Bower 是一个类似于 npm 的客户端包管理器，但面向客户端。[http://bower.io/](http://bower.io/)

# ruby-on-rails-3 - 在“创建”中保存多个外键的最佳做法是什么？

> ID：15728313
> 
> 赞同：0
> 
> 时间：2013-03-31T10:01:19.813
> 
> 标签：ruby-on-rails-3

我正在用嵌套资源构建一个 crud。

`Post` `has_many :comments`和我的`comments` `belongs_to :user`和`belongs_to :post`。当我添加新评论时，我目前正在评论控制器的创建操作中执行类似的操作：

```
@post = Post.where(id: params[:post_id]).first
@post_comments = @post.post_comments.build
@post_comments.update_attributes(params[:post_comment])
@post_comments.user = current_user

if @post_comments.save
  ... 
```

我还看到了这篇文章：[https](https://stackoverflow.com/a/5978113) ://stackoverflow.com/a/5978113这似乎在做我正在做的事情。

这似乎不稳定，我不确定我是否正确执行此操作。有没有更好的办法？最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:26:48.330

我不知道任何已定义的最佳实践，但使用您的代码，您不需要调用`update_attributes`. 有 2 种方法可以保存两个外键（实际上是 4 种方法，如果您要构建来自用户的评论）

**第一个选项：**

```
params[:post_comment].merge!(user_id: current_user.id)
@post = Post.where(id: params[:post_id]).first
@post_comment = @post.post_comments.build(params[:post_comment])

if @post_comment.save
  ...
else
  ...
end 
```

**第二种选择：**

```
@post = Post.where(id: params[:post_id]).first
@post_comment = @post.post_comments.build(params[:post_comment])
@post_comment.user = current_user

if @post_comment.save
  ...
else
  ...
end 
```

不过请注意，如果您正在处理单数资源，则应该使用单数`@post_comments`形式`@post_comment`

# ruby-on-rails-3 - 如何从视图中传递布尔属性的哈希参数？

> ID：15728315
> 
> 赞同：0
> 
> 时间：2013-03-31T10:01:32.650
> 
> 标签：ruby-on-rails-3

我正在使用 Meta-search Gem 通过以下控制器操作从表中搜索。我正在使用 Rails 版本 3.2.9。

```
class FeedEntriesController < ApplicationController
  def index
    @search = FeedEntry.search(params[:is_star])
    @feed_entries = @search.page(params[:page])
    @app_keys = AppKey.all
  end
end 
```

feed_entries 表包含 is_star:boolean 属性。所以，我只想使用or将 hash 参数传递`is_star == true`到`params[:is_star]`from 视图中。我尝试使用以下方式。`form_for``link_to`

```
In Views/feed_entries/index.html.erb

<%= link_to "Stared", {:controller => "feed_entries", :action => "index", :is_star => true }%> 
```

但是上面的方法现在已经奏效了，所以我决定以下面的方式使用form_for，

```
<%= form_for(@is_star) do |f|%>
    <%= f.hidden_field :is_star_is_true %>
    <%= f.submit "Search" %>
<% end %> 
```

但是，没有任何工作，请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:33:14.817

`true``false`当作为字符串传递时，在布尔列中使用时被解析为它们的真实值。这也适用于 0、1、'0' 和 '1'

```
>> m = Model.new
>> m.active = 'false'
>> m.active? # false
>> m.active = 'true'
>> m.active? # true 
```

知道了这一点，您可以将 'true' 作为`hidden_field`

```
<%= f.hidden_field :is_start, value: 'true' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:35:46.620

您可以在最终呈现表单的视图中传递父级的值，例如`<%=params[:is_start] = 1 %>`. 我不确定应用程序的布局是如何设置的。还要确保`attr_accessible :is_start`

更新：我可能理解错了你的问题。所以也试试这个

```
<%= f.hidden_field :is_star, value: 'true' %> 
```

或者你可以有一个单选按钮？

```
<%= f.radio_button :is_star, value: 'true' %> 
```

# css - 为什么正文背景渐变的宽度不总是与 div 的边距匹配有什么原因吗

> ID：15728316
> 
> 赞同：0
> 
> 时间：2013-03-31T10:01:51.967
> 
> 标签：css, linear-gradients

我想将身体背景设置为 30.08% 奶油和 69.2% 灰色。我正在使用 CSS 渐变来执行此操作。然后我要让我所有的文章都是'margin-left：30.08%;' 满足背景线（所以由渐变创建的背景线就像一把尺子）。这是代码

```
body{   
position: relative;
background: -webkit-linear-gradient(left, #faf4f2, #faf4f2 30.08%, #777777 30.08%, #777777);
}
article{
  width: 300px;
  height: 200px; 
  background: red;
  margin-left:30.08%;

} 
```

这很好用，但正如您在这个[jsFiddle](http://jsfiddle.net/6BDNR/1/)示例中看到的那样，文章并不总是与渐变线对齐。因此，根据浏览器的宽度，在某些情况下它看起来很草率。在 jsFiddle 示例中，如果您将窗口大小调整为`652px`（但这不是唯一的一点），您将看到我遇到的问题。不幸的是，这种情况发生在很多不同的地方，我认为媒体查询无法完成这项工作。

有没有办法解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:32:18.963

你已经给了你的身体宽度和高度的100%

> 当您在 CSS 中为元素指定 100% 的宽度时，您基本上是在说“使该元素的内容区域完全等于其容器的显式宽度——但前提是其容器具有显式宽度。”</p>

然后你正在使用

```
article{
margin-left:30.08%;
} 
```

30.08% 什么？如上所述，您应该使用 % `only if its container (which in this case is a block level element <body>) has an explicit width.`

你可以在这里读更多关于它的内容..

[在这里阅读](http://www.impressivewebs.com/width-100-percent-css/)

我已经更改了您的代码，将值从 % 更改为像素

```
body{
background: -webkit-linear-gradient(left, #faf42, #faf42 90px, #777777 90px, #777777);

color: darker(#77777, 10%);
width:300px; height:300px;
} 
```

它现在似乎正在工作。这些值仅用于演示目的。根据您的需要进行更改。

希望能帮助到你。

# javascript - 在 Firebase 中实现删除推文和点赞/点赞功能

> ID：15728319
> 
> 赞同：6
> 
> 时间：2013-03-31T10:02:48.540
> 
> 标签：javascript, firebase, firebase-security

在 HN 上继续此线程：[https ://news.ycombinator.com/item?id=5462769](https://news.ycombinator.com/item?id=5462769)

通读 firefeed 规则文件为我回答了很多问题，除了这两个：

1.  不允许编辑现有推文 (".write": "!data.exists()")。你怎么能使它不可编辑，但作者可以删除？
2.  您将如何安全地处理喜欢/不喜欢或赞成/反对？写如果经过身份验证，验证增加/减少一，如果用户之前没有修改过？那将如何运作？是否必须有一个编辑此内容的人的子列表？我真的很好奇这个特定的用例，因为它在许多应用程序中似乎很常见，但在我看来，在 firebase 中实现真的很复杂吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T14:34:35.107

**1.作者不可编辑但可删除**

```
".write": "!data.exists() || (!newData.exists() && data.child('author') === auth.id)" 
```

**2\. 点赞/点赞**

在客户端上，使用允许您安全地增加值的事务：

```
ref.transaction(function(currentValue) {
   return (currentValue||0)+1;
}, function(error) {
   if( error ) /* failed too many times */
   else /* it worked */
}); 
```

安全性也很简单：

```
".validate": "newData.isNumber() && newData.val() === data.val()+1" 
```

**2.5 确保唯一投票**

~~我不确定这意味着什么；记录不能被编辑，如果可以的话，只有作者才能这样做；所以我不太理解这种情况下的“修改”：“如果用户之前没有修改过这个？那将如何工作？”~~

为确保投票是唯一的，您只需按用户 ID 存储它们。用户可以通过删除记录来删除他们的投票。

我建议将它们存储在与 spark 不同的路径中，并且仍然保持简单的增量（被投票赞成/反对的消息），因为您不希望每次获取投票者时都必须检索整个投票者列表火花。

安全规则如下所示：

```
"votes": {
    "$spark_id": {
       "$vote": {
          ".read": "$vote === auth.id",
          ".write": "$vote === auth.id", 
          // to allow downvoting in addition to up or delete, just add -1 here
          ".validate": "newData.val() === 1 || newData.val() === null"
       }
    }
} 
```

现在为增量的验证规则添加一个检查：

```
".validate": "!root.child('votes').child($spark_id).child(auth.id).exists() && newData.isNumber() && newData.val() === data.val()+1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-10T07:48:54.180

现在 Firebase Functions 已向公众发布（测试版），这似乎是一个不错的选择：[https ://firebase.googleblog.com/2017/03/introducing-cloud-functions-for-firebase.html](https://firebase.googleblog.com/2017/03/introducing-cloud-functions-for-firebase.html)

这个想法是让每个用户都可以通过键将他们的名字添加到推文的“upvoters”集合中。他们可以创建或删除他们的条目——但只能有一个，因为它是密钥，并且安全规则只允许控制他们的一个密钥。

当要查找“赞成票数”时，客户*可以获得*赞成票的完整列表并计算数字。但是，为了性能起见，我们创建了一个 Firebase 函数，每当添加或删除赞成票条目时就会触发该函数。

然后它所做的就是增加或减少推文上的“upvote count”属性。这和以前一样，只是我们制定了一个安全规则，只允许云托管的 Function 修改该字段。因此，修改始终是可信且安全的，并且无需客户端接收支持者列表以获取支持者计数。

# windows - event.getFile().getFileName() 使用 PrimeFaces 3.5 在 JSF2.0 中返回具有完整路径的文件名

> ID：15728320
> 
> 赞同：4
> 
> 时间：2013-03-31T10:02:51.953
> 
> 标签：windows, jsf, primefaces

我正在使用 PrimeFaces v3.5 使用 Firefox 浏览器将文件上传到我的 Windows 机器中。`event.getFile().getFileName()`正在返回具有完整路径的文件名，这会导致进一步的问题。PrimeFaces 在内部使用 Apache commons。我也检查了[javadoc](http://commons.apache.org/proper/commons-fileupload/apidocs/org/apache/commons/fileupload/FileItem.html#getName%28%29)，但不再帮助我了。

为了克服这个问题，我修改了程序有点像下面的方式 -

```
 String fileName = event.getFile().getFileName();
        fileName = fileName.substring(fileName.lastIndexOf("\\")); 
```

但它并不健壮和可靠。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T12:23:17.610

Commons IO 提供[`FilenameUtils#getName()`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FilenameUtils.html#getName%28java.lang.String%29)的确切目的。

```
String filename = FilenameUtils.getName(event.getFile().getFileName()); 
```

### 也可以看看：

*   [有关该主题的 Commons FileUpload 常见问题解答](http://commons.apache.org/proper/commons-fileupload/faq.html#whole-path-from-IE)
*   [如何在 JSF 中保存上传的文件](https://stackoverflow.com/questions/14211843/how-to-save-uploaded-file/14214223#14214223)

# python - 可以在Python中使用变量来定义小数位吗

> ID：15728321
> 
> 赞同：24
> 
> 时间：2013-03-31T10:03:02.567
> 
> 标签：python, floating-point

我熟悉使用`%.2f`为浮点数设置两位小数的约定，但是是否可以将数字更改为变量，以便用户可以说明显示的小数位数？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-31T10:09:55.080

[`.format`](http://docs.python.org/2/library/string.html#format-specification-mini-language)是一种处理变量格式的更好、更易读的方法：

```
'{:.{prec}f}'.format(26.034, prec=3) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-31T10:07:22.377

使用较旧的字符串格式运算符，您可以使用`'%.*f' % (decimals, number)`：

```
>>> number = 26.034
>>> '%.*f' % (3, number)
'26.034'
>>> '%.*f' % (2, number)
'26.03'
>>> '%.*f' % (1, number)
'26.0' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-04-01T02:29:17.127

对于 Python 3.6+，您可以使用 f-string 样式格式化程序执行此操作：

```
num = 0.123456789
precision = 3
print(f"{num:.{precision}f}") 
```

输出：

```
0.123 
```

# objective-c - 来自实体属性的 Objective-C NSNumber 值

> ID：15728322
> 
> 赞同：-4
> 
> 时间：2013-03-31T10:03:04.033
> 
> 标签：objective-c, nsnumber

我成功地从一个实体中提取了一个号码。但是如果我用 NSNnumber 初始化那个数字，似乎会生成一个随机数......

```
//This code works, and I can write the number to the NSLOG ok.
Misc_RandomNumber *rndNum = [fetchedObjects objectAtIndex:0];
NSLog(@"%@",rndNum.randomNumber); //Log will print the number 1

//From here, numberFound will result to a random number like 2064127
NSNumber *numberFound = [NSNumber numberWithInt:rndNum.randomNumber];
NSLog(@"%@",[numberFound stringValue]); 
```

我只需要一个 NSNumber 中的数据库值，似乎无法得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:07:23.447

当您这样做时，您的第二句话有错误

```
NSNumber *numberFound = [NSNumber numberWithInt:rndNum.randomNumber]; 
```

在这种情况下`[NSNumber numberWithInt:rndNum.randomNumber];`，返回的是它所在的地址，`randomNumber`而不是它指向的值。相反，您应该使用：

```
NSNumber *numberFound = [NSNumber numberWithInt:[rndNum.randomNumber intValue]]; 
```

# android - 如何删除一个警报而不是所有警报？

> ID：15728323
> 
> 赞同：0
> 
> 时间：2013-03-31T10:03:18.487
> 
> 标签：android, alarm

我开发了一个 android 应用程序来通过警报管理器发出通知。现在我想取消一个触发通知的警报我看到了这段代码但它删除了所有警报我如何删除我想要的一个警报

```
Intent intent = new Intent(this, AlarmReceive.class);
PendingIntent sender = PendingIntent.getBroadcast(this,
               0, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

// this line for cancellation
alarmManager.cancel(sender); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:46:55.123

[取消](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)的文档说：

> 删除任何具有匹配 Intent 的警报。任何类型的任何警报，其 Intent 与此匹配（由 filterEquals(Intent) 定义）都将被取消。

因此，如果您希望能够删除特定意图，则必须能够区分您正在启动的所有意图。如果您的意图是明确的，我建议在创建后添加一个动作。

这样，filterEquals 将考虑到这一点并仅删除相关的。

就像是：

```
Intent intentYouWantToCancel = new Intent(this, AlarmReceive.class);
intentYouWantToCancel.setAction("aRelevantString"); 
```

当您设置警报管理器以及何时删除它。

# c - 试图引起“更糟糕的情况”快速排序

> ID：15728325
> 
> 赞同：0
> 
> 时间：2013-03-31T10:03:22.587
> 
> 标签：c, algorithm, sorting, time-complexity, quicksort

我在 C 中实现了一个快速排序实现，我试图找出导致更差情况性能所需的输入。

根据[维基百科](http://en.wikipedia.org/wiki/Quicksort)：

> 总是以这种方式选择分区中的最后一个元素作为枢轴会导致已排序列表或相同元素列表的性能不佳 (n^2)。

所以我尝试这样做，结果[如下代码](https://gist.github.com/r-darwish/4793ca7da98aadab5209)。枢轴始终是最后一个元素，输入是已经排序的列表。

为了证明复杂度确实是 n^2，我创建了一个全局变量，我在每次迭代中递增，然后最后打印它。

我预计该程序会打印：

```
Done in 64 iterations 
```

但是，它在 28 次迭代中完成了。也许我对“复杂性”一词的理解是错误的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T10:07:07.740

在每次迭代中，列表都会缩小一个元素，因为枢轴被移动并且不再计算在内。因此，总迭代次数为 7+6+5+4+3+2+1 = 28。

请注意，这仍然是二次的，因为它等于`n*(n-1)/2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:20:25.047

对于 n=8，迭代次数为 28。

迭代次数等于`n*(n-1)/2`= 8*7/2 = 28。

现在函数是**f(n)=n*(n-1)/2 = n ² /2 - n/2**。

**f(n) = O(n** 2 **^/** **2 - n/2) = O((1/2)n** **²** **) = O(n** **²** **)**。

因此，您的输入实际上是快速排序的最坏情况。

# javascript - requirejs jquery 多个依赖的非模块 jquery 插件，如 jquery-ui 和 jqGrid

> ID：15728329
> 
> 赞同：1
> 
> 时间：2013-03-31T10:03:46.347
> 
> 标签：javascript, jquery-ui, jqgrid, requirejs, amd

我无法使用 shim 配置订购非 AMD 模块。

我的垫片配置是这样的。即使我想使用 require-jquery.js 但仍然有两个非 AMD 模块将是 jquery ui 和 jqGrid。jqGrid 本身有一些插件，只有在加载 jqGrid 时才必须加载。

**需要配置.js**

```
require.config({
    baseUrl: '../jsp',
    paths: {
        app: '../js/app',
        jquerygrid: 'http://view.jqueryui.com/grid',
        lib: '../js/lib',
        plugins: '../js/plugins',
        jquery: '../js/lib/jquery-1.9.1',
        jqueryui: [ 'http://ajax.googleapis.com/ajax/libs/jqueryui/'+
            '1.9.2/jquery-ui'],
        canjs:  'http://canjs.us/release/latest/can.view.mustache',
        uigrid:'../js/plugins/mydataview',
        jqgrid: '../js/plugins/grid.locale-en'
    },
    shim: {
        jqueryui: {
            exports: "$",
            deps: ['jquery']
        },
        uigrid: {

            deps:[
             'jqueryui',    
             'http://view.jqueryui.com/grid/ui/jquery.ui.dataview.js',
             'http://view.jqueryui.com/grid/ui/jquery.ui.grid.js',
             'http://view.jqueryui.com/grid/ui/jquery.ui.observable.js',
             'http://view.jqueryui.com/grid/ui/jquery.ui.dataviewlocal.js',
             'http://view.jqueryui.com/grid/grid-spf/pager.js',
             'http://view.jqueryui.com/grid/grid-editing/grid.selectable.js',
             'http://view.jqueryui.com/grid/grid-editing/navigator.js',
             'http://view.jqueryui.com/grid/grid-editing/localstore.js',
             'http://view.jqueryui.com/grid/grid-editing/helpers.js',
             'http://view.jqueryui.com/grid/external/jquery.tmpl.js',
             'http://view.jqueryui.com/grid/grid-spf/grid-filter.js',
             'http://view.jqueryui.com/grid/grid-spf/grid-sort.js'
            ]
        },
        canjs:{
            deps: ['jquery','http://canjs.us/release/1.1.4/can.jquery.js']
        },
        jqgrid:['jqueryui','../js/plugins/jquery.jqGrid.src.js']
    }
}); 
```

我的调用 HTML 是

```
<script type="text/javascript" src="../js/require.js"></script>
<script type="text/javascript" src="../js/requireconfig.js"></script>

<script type="text/javascript">
require(['jqgrid'], function($){
    $("#mygrid").jqGrid({
        pager: "#mygridpager"
    })
});
</script> 
```

在不同的运行中，我得到不同的错误：

有时 ：

Uncaught ReferenceError: jQuery is not defined ..... jquery.jqGrid.src.js:3589

当然，这不会出错。但它看起来像一些黑客，因为 requirejs 不支持订单。嵌套的 require 调用也不太优雅。可能是如果有一个像 when().then() 这样的延迟的 requirejs 可以使它看起来更好。

```
<script type="text/javascript">
require(['jquery'], function(){
    require(['jqgrid'], function(){
        $("#mygrid").jqGrid({
            pager: "#mygridpager"
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:45:24.687

当 JS 文件由 RequireJS 加载时，此[示例小提琴没有错误。](http://jsfiddle.net/n8ZNH/5/)

我觉得问题的症结在于`'../js/plugins/jquery.jqGrid.src.js'`文件是RequireJS加载的，但是RequireJS不知道这个文件本身有依赖。所以当这个文件被加载时，它的依赖还没有被加载。

因此，您可能需要对 RequireJS 完全明确哪些模块依赖于哪些其他模块。例如添加更多路径和更多垫片：

路径：

```
 jqgridlocale: 'http://www.trirand.com/blog/jqgrid/js/i18n/grid.locale-en',
    jqgrid: 'http://www.trirand.com/blog/jqgrid/js/jquery.jqGrid.min' 
```

垫片：

```
 jqgrid:{
        deps:['jqueryui','jqgridlocale']
    },
    jqgridlocale:{
        deps:['jqueryui']
    } 
```

现在 RequireJS 知道这两者`jqgrid`和`jqgridlocale`需要`jqueryui`（因此`jquery`）首先被加载。

我也会明确地`require()`使用 jQuery，因为您直接使用它。阅读代码以查看直接使用 jQuery 时会提供更多信息。

```
require(['jquery','jqgrid'], function($){
    $("#mygrid").jqGrid({
        pager: "#mygridpager"
    })
}); 
```

# java - 如何从 cPanel 上的域中删除项目名称

> ID：15728330
> 
> 赞同：1
> 
> 时间：2013-03-31T10:03:51.847
> 
> 标签：java, jakarta-ee, tomcat, struts2, cpanel

我已经在 cPanel 上上传了我的战争文件，它完美地工作，但我怎样才能从地址中删除项目名称，

它应该是

```
 www.example.com/index.html 
```

但它是

```
 www.example.com/MyProject/index.html   << it includes the project name 
```

基于这个问题[链接](https://stackoverflow.com/questions/13738546/how-to-remove-the-application-name-in-url-tomcat-httpd)，我已将我的war文件的名称更改为root，但它仍然不起作用，虽然我不知道如何删除预先配置的`ROOT/`目录

# php - cPanel 的“登录无效”问题

> ID：15728333
> 
> 赞同：0
> 
> 时间：2013-03-31T10:04:33.700
> 
> 标签：php, linux, ssh, cpanel, openssh

凭据是正确的，它在另一台 PC 上运行良好，但不是我的。我不知道问题是什么。

我收到以下消息，

![在此处输入图像描述](https://i.stack.imgur.com/Hg3dI.png)

我可以访问网站，也可以登录后台，但不能登录服务器——我尝试过使用 SSH、FTP、cPanel 和 WHM。

这就是我在尝试使用 SSH 时得到的结果。

```
[hardik@ShriKrishna ~]$ ssh -v eimimo.com -l username
OpenSSH_5.9p1, OpenSSL 1.0.0j-fips 10 May 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 50: Applying options for *
debug1: Connecting to eimimo.com [50.115.112.203] port 22.
debug1: Connection established.
debug1: identity file /home/hardik/.ssh/id_rsa type 1
debug1: identity file /home/hardik/.ssh/id_rsa-cert type -1
debug1: identity file /home/hardik/.ssh/id_dsa type -1
debug1: identity file /home/hardik/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_4.3
debug1: match: OpenSSH_4.3 pat OpenSSH_4*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA d6:e2:81:e9:a1:7e:4a:98:2b:7e:88:ac:a9:1e:78:73
debug1: Host 'eimimo.com' is known and matches the RSA host key.
debug1: Found key in /home/hardik/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Next authentication method: gssapi-with-mic
debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_1000' not found

debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_1000' not found

debug1: Unspecified GSS failure.  Minor code may provide more information

debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_1000' not found

debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/hardik/.ssh/id_rsa
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Trying private key: /home/hardik/.ssh/id_dsa
debug1: Next authentication method: password
eimimo@eimimo.com's password: 
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
Permission denied, please try again.
eimimo@eimimo.com's password: 
```

那么，问题是什么？为什么我无法登录服务器？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:10:11.880

服务器可能面临安全问题，并建议部分/所有用户使用安全身份验证登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T12:55:48.637

解决方案 1

可能是您的本地互联网服务提供商 ip 在服务器防火墙中被阻止，

访问以下 URL 并获取您本地的 isp ip 地址，

[http://www.whatismyip.com/](http://www.whatismyip.com/)

登录到您的 SSH 并使用以下 cmd

csf -a ipaddress 解决方案 2：

这是您本地电脑或浏览器的问题，

可能是您的服务器 IP 地址在您的本地 PC 防病毒或防火墙中被阻止。解决方案 3：

联系您的托管服务提供商以及您当地的 isp IP 地址，

要求他们从您的服务器防火墙中删除该 IP 地址。

# javascript - javascript中的高阶函数是什么意思？

> ID：15728334
> 
> 赞同：1
> 
> 时间：2013-03-31T10:04:33.777
> 
> 标签：javascript, function

javascript书“雄辩的javascript”

```
function negate(func) {
return function(x) {
return !func(x);
 };
}
var isNotNaN = negate(isNaN);
show(isNotNaN(NaN)); 
```

有人解释它，正如问题的标题所说，什么是高阶函数，这段代码有什么作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:12:25.250

当大多数人想到函数时，他们接受对象或值作为参数并类似地返回一个对象或值，例如`function addTwoNumbers(int x, int y)`.

在数学和计算机科学中，“高阶函数”就像任何其他函数一样，除了作为值的参数之外，它还可以接受函数作为参数。

...这就是一个高阶函数，真的:)

在您发布的示例中，`negate`是一个高阶函数，因为它的参数`func`是一个函数（或者更确切地说，分配给一个函数）。

`negate`更进一步：它不只是调用`func`和否定它的结果，而是返回一个匿名函数（这是内部`return function(x)`位）。

因此，该`isNotNaN`变量具有早期匿名函数的类型（和值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:12:43.520

高阶函数是一个函数：

*   将一个或多个函数作为输入。
*   给出另一个函数作为输出。

你的代码是做什么的？它否定了函数 isNan（到 isNotNan）。它接受一个函数（isNan），然后输出否定（isNotNan）。就是这么简单。

# javascript - 该行大于 Bootstrap 中的容器

> ID：15728336
> 
> 赞同：2
> 
> 时间：2013-03-31T10:04:36.230
> 
> 标签：javascript, css, twitter-bootstrap, containers

我在使用 Bootstrap 时遇到问题。

代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Landing Page</title>
  <!-- Bootstrap -->
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
  <link href="bootstrap/css/custom.css" rel="stylesheet" media="screen">
  <!-- Javascript -->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
  <script src="bootstrap/js/bootstrap.min.js"></script>
</head>

<body>
  <div class="container">
    <div class="row" id="main_header">
    </div>
  </div>
</body>

</html>
```

但结果是行大于容器。

我给你留一张图来理解我的意思

![](https://i.stack.imgur.com/GRkgc.png)

在 custom.css 中只有 div 的高度和颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T10:43:30.953

该行不大于容器。这是由响应式设计引起的，该设计`margin-left`在大于 1200 像素的分辨率上将行设置为 -30 像素。如果你不想要这个，添加

```
<style type="text/css">
.row {
  margin-left: 0px;
}
</style> 
```

之前`</head>`。

其他问题 ：

你的标题应该是

```
<!DOCTYPE html>
<html> 
```

您正在使用老式的 HTML4 文档定义。使用 HTML5（作为 bootstrap 文档强烈推荐。使用上述内容，您的页面将在 IE 中进入 quirksmode）

此外，使用更新的**jquery**，您的页面将永远无法使用 1.3 - " `on`" 在 1.3 中不存在，并且 bootstrap`on`多次引用 jquery。至少使用 1.7.1

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

# android - 将点击侦听器注册到小部件的最佳实践

> ID：15728337
> 
> 赞同：1
> 
> 时间：2013-03-31T10:05:30.213
> 
> 标签：android

要为 android 中的按钮注册点击监听器，您可以

1）实例化按钮并创建一个内联事件监听器

2）在activity上实现点击监听接口，并在activity中提供方法

3）在activity的xml布局中定义click方法，在activity中定义方法

我想知道是否有最好的方法，我喜欢实现接口。在 xml 中命名该方法是否不好，因为您还需要将它包含在任何其他版本的布局中，即横向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T10:23:53.010

第二种方法相当简单，并使代码更简洁，但大多数时候您可能需要混合使用第一种和第二种方法。

# java - Java TCP Socket - 向控制器发送命令

> ID：15728338
> 
> 赞同：0
> 
> 时间：2013-03-31T10:05:42.103
> 
> 标签：java, sockets, tcp, microcontroller

正如您从标题中了解的那样，我有[一个控制器](http://www.onbonbx.com/en/cp/html/?82.html)，我已通过 tcp 套接字成功连接到该控制器。从这个控制器[的手册](https://docs.google.com/file/d/0B2ERDkYgeQpndjY5VU03U2VSRjA/edit?usp=sharing)中，我读到我必须发送这样的命令：
**“A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 05 00 A2 00 01 00 00 68 F8 5A”**

现在我对那个命令感到非常困惑。
如何通过套接字发送此命令？

**手册中只提到了 rs232 和 gprs 通信，我通过 wifi 进行通信，所以我打开了一个 tcp 套接字*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:23:24.683

一个非常基本的方法是这样的：

```
int targetPort = 5005;
String targetHost = "targetHost";
byte[] command = new byte[] { (byte) 0xa5, (byte) 0xa5, ... };
try (Socket socket = new Socket(targetHost, targetPort);
        OutputStream rawOutputStream = socket.getOutputStream()) {
    rawOutputStream.write(command);
    rawOutputStream.flush();
} 
```

这只是为您的控制器打开一个套接字，发送命令，仅此而已。对于生产性使用，您可能希望保留套接字，阅读答案，也许用`BufferedOutputStream`等包装套接字的输出流。

# jquery - (Codeigniter) 带有 ajax 或 j-query 的 next_prev_url 日历

> ID：15728347
> 
> 赞同：0
> 
> 时间：2013-03-31T10:06:45.610
> 
> 标签：jquery, ajax, codeigniter, calendar

我希望我的 next_prev_url 日历变成 ajax，所以如果我按下下一个或上一个链接，我的日历将在 ajax 中处理......这是我的控制器

```
$this->load->model('tasks_koord_model');
    $prefs = array (
        'show_next_prev'    => TRUE,
        'next_prev_url'     => site_url('kalender_koord_controller/index'),
        'template'          =>'{table_open}<table class="calendar">{/table_open}
    {week_day_cell}<th class="day_header">{week_day}</th>{/week_day_cell}
    {cal_cell_content}<div class="event"><a href="{content}"><span class="day_listing">{day}</span></a></div>{/cal_cell_content}
    {cal_cell_content_today}<div class="today"><a href="{content}"><span class="day_listing">{day}</span></a></div>{/cal_cell_content_today}
    {cal_cell_no_content}<span class="day_listing">{day}</span>&nbsp;{/cal_cell_no_content}
    {cal_cell_no_content_today}<div class="today"><span class="day_listing">{day}</span></div>{/cal_cell_no_content_today}'
    );
    $this->load->library('calendar',$prefs); 
```

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T23:55:30.647

我希望这就是你要找的。[https://thecodingmaniac.blogspot.com/](https://thecodingmaniac.blogspot.com/)请参阅下面的附件。希望这可以帮助。

# java - 在我的 android 应用程序中使用旁遮普字符

> ID：15728351
> 
> 赞同：-2
> 
> 时间：2013-03-31T10:07:14.737
> 
> 标签：java, android

我正在尝试从以下 URL 之一读取字符：[http ://www.searchgurbani.com/hukum/sis_ganj](http://www.searchgurbani.com/hukum/sis_ganj)

使用以下代码：

```
 String htmltext=null;
       String inputLine;

        URL urlinstance = new URL(url);

        BufferedReader in = new BufferedReader(
        new InputStreamReader(urlinstance.openStream()));

        while ((inputLine = in.readLine()) != null)
            htmltext+=inputLine;
        in.close();

        htmltext = htmltext.getBytes("UTF-8").toString();
        System.out.println("HTMLTEXT"+htmltext); 
```

但是当我试图阅读它时，我无法做到这一点。有人可以告诉我如何使这项工作。

谢谢，阿曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:09:39.483

我认为您对此无能为力，因为在那个特定的网站上，他们使用了一种特殊的字体，将混乱的废话变成了特殊的字符。

如果您查看网站的来源并向下滚动到文本应该在的位置，您可以看到这一点。

@kenor 的回答也可能有所帮助。以下是如何将该字体放到您的 Android 应用程序中：

1.  [从这里](http://www.sgpc.net/download.asp)下载字体并将 .ttf 文件提取到`assets/fonts/myfont.ttf`
2.  像这样创建你的字体：`Typeface font = Typeface.createFromAssets(getAssets(), "fonts/myfont.ttf");`
3.  只需执行以下操作即可将其应用于您的 TextView`myTextView.setTypeface(font);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:32:49.267

编码确实是 UTF-8，但来自网站的 css：

```
font-family: WebAkharSlim; 
```

这意味着您有正确的字符，但它们显示错误，因为您没有使用正确的字体。您可以在此处下载字体：[WebAkharSlim 下载](http://www.sgpc.net/download.asp)（不过，我对将字体导入 android 应用程序一无所知）。

# wordpress - 不同的标题wordpress

> ID：15728352
> 
> 赞同：2
> 
> 时间：2013-03-31T10:07:16.490
> 
> 标签：wordpress, wordpress-theming

我想在我的 Wordpress 网站的某些页面上使用**不同的标题。**我正在使用下面的代码来执行此操作。我愿意

```
<?php get_header( $name ) ?> 
```

我的目录中有两个头文件：**header.php**和**header-frontpage.php** 下面你还可以看到我的 Wordpress 目录的图片（只是为了提供最好的信息）

![WordPress 目录](https://i.stack.imgur.com/VB4MC.png)

我的页面的**“主模板”**是在**page.php**中建立的。（您可以在那里找到 get_header()、get_footer()、...）。我将**get_header() 部分**代码更改为：

```
if(is_front_page())
{
    get_header();
}
else 
{
    get_header( 'others' );
} 
```

这对我有用，但**仅在页面上，而不是在帖子页面上。**我可以**在帖子页面的主模板**上做同样的事情，但这是正确的吗？有人可以帮助我还是我做的一切都正确？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:42:32.653

除了一件事，我会做几乎和你一样的事情。我会像这样反转标题：

```
if(is_front_page())
{
    get_header('frontpage');
}
else 
{
    get_header();
} 
```

# java - Java 中的通配符搜索

> ID：15728356
> 
> 赞同：0
> 
> 时间：2013-03-31T10:07:40.707
> 
> 标签：java

我正在尝试在 Java 中实现通配符。

这是我的代码：

```
public class Assign {

public boolean compare(String s1, String s2)
{
    char [] s3 = s1.toCharArray();
    char [] s4 = s2.toCharArray();
    int i,j;

    int k = 0;
    for(i=0;i<s3.length;i++)
    {
        for(j=0;j<s4.length;j++)
        {
            if(s3[i] == s4[j])
            {

                if(s4[j] == '*')
                {
                    i++;

                    if(s3[i] == s4[s4.length-1])
                    {
                        return true;
                    }
                }
            }
        }
    }
    return false;
}
public static void main(String args[])
{
    Assign a = new Assign();
    boolean r = a.compare("a hello b", "a * b");
    System.out.println(r);
}
} 
```

将有两个参数传递给函数。一个是字符串，另一个是正则表达式。

**示例案例是：**

1) 如果传递的字符串是“a hello b”并且正则表达式是“a * b”，那么函数应该返回 TRUE，因为在 * 的位置可以存在任意数量的字符。

2) 如果传递的字符串是“a X b”并且正则表达式是“a ? b”，那么返回值应该是 TRUE，因为如果有 a ？在正则表达式中，a 和 b 之间应该只有一个字符。

像这样它适用于所有情况。我认为我认为的逻辑很好，但我在编码部分遇到了麻烦。

我不想导入模式和匹配器。没有他们，我必须完成这个。

请任何人通过指定正确的代码来帮助我。

感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:18:53.620

使用正则表达式。不要重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:46:03.430

正如我所说，您可以提取简单的子字符串。这里我检查了一个案例，对其他案例做同样的事情。

```
 public class Assign {

public boolean compare(String s1, String s2)
{ String s="";
    try
    {
 s=s1.substring(s1.indexOf('a')+2,s1.indexOf('b')-1);
    }
    catch(IndexOutOfBoundsException e)
    {
    return false;
    }
    System.out.println("string: "+s);

    if(s2.substring(2,3).equals("*")&&s.length()>=1)
    {return true;}
    else
        return false;

}
public static void main(String args[])
{
    Assign a = new Assign();
    boolean r = a.compare("a b hello", "a * b");
    System.out.println(r);
}
} 
```

**编辑：** 可能是我没有检查所有情况。这是一种接近的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:44:13.723

> 假设正则表达式将只包含一个`*`或`?`在任何时间实例

我使用`substring()`&编写了一个简单的程序，它可以根据要比较的字符串来`indexOf()`评估。`regex`

```
package problems;

public class WildCardCompare {

    public boolean compare(String str, String regex) {
        if(regex == null || str == null) {
            return false;
        }
        if(regex.equals("*")) {
            return true;
        }
        if(regex.equals("?") && str.length() == 1) {
            return true;
        }
        if(!regex.contains("*") && !regex.contains("?")) {
            return str.equals(regex);
        }

        String token = null;
        if(regex.contains("*")) {
            token = "*";
        }

        if(regex.contains("?")) {
            token = "?";
        }

        if(token != null) {
            //String before *, if any...
            String before = regex.substring(0, regex.indexOf(token));
            //String after *, if any...
            String after = regex.substring(regex.indexOf(token)+1, regex.length());

            boolean bmatches = true;
            if(before != null && before.length() != 0) {
                if(str.indexOf(before) == 0) {
                    bmatches = true;
                }
                else {
                    bmatches = false;
                }
            }
            boolean amatches = true;
            if(after != null && after.length() != 0) {
                if(str.indexOf(after) == (str.length() - after.length())) {
                    amatches = true;
                }
                else {
                    amatches = false;
                }
            }
            return bmatches && amatches;
        }

        return false;
    }

    public static void main(String args[])
    {
        boolean r;
        WildCardCompare compare = new WildCardCompare();
        r = compare.compare("a b hello", "a b *");
        System.out.println(r);
        r = compare.compare("a hello b", "a * b");
        System.out.println(r);
        r = compare.compare("a hello b", "aaaa*bbbb");
        System.out.println(r);
        r = compare.compare( "aaaaTbbbb", "aaaa*bbbb");
        System.out.println(r);
        r = compare.compare( "aT", "a?");
        System.out.println(r);
        r = compare.compare("AT",  "a?");
        System.out.println(r);
        r = compare.compare( "aXb", "a?b");
        System.out.println(r);
        r = compare.compare( "abc", "xyz");
        System.out.println(r);
    }
} 
```

这是输出。

```
true
true
false
true
true
false
true
false 
```

我觉得这个程序不是“万无一失”的，只能作为解决正则表达式匹配问题的例子

PS：请参阅[https://softwareengineering.stackexchange.com/](https://softwareengineering.stackexchange.com/)了解许多此类问题

# android - 如何在 Android WebView 中渲染之前修改内容？

> ID：15728357
> 
> 赞同：8
> 
> 时间：2013-03-31T10:07:45.113
> 
> 标签：android, webview

我正在为 Android 制作一个自定义的简单网络浏览器，需要捕获用户浏览的每个页面的内容，并**在渲染之前**对其进行操作，以使其按预期显示。

我不想破坏用户登录状态和交互，所以我不想拦截 POST 请求或 cookie。

据我所知，我可以将内容与`loadDataWithBaseURL()`. 但是，为了获得更好的用户体验，我希望在用户看到它之前获取内容并进行操作，如果可能的话，在下载图像之前（如`DOMReady`在 JS 中），但不知道如何去做。

什么是收听的最佳地点，如何获取当前`webview`内容？

由于我是 Android 开发的新手，因此我一直在寻找解决方案的好建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-01T08:25:36.937

你可以使用`shouldInterceptRequest`方法。有一个例子：

[webview应该拦截请求示例](https://stackoverflow.com/questions/8273991/webview-shouldinterceptrequest-example)

希望这是有用的。

# php - 使用 Oauth2 access_token 在 PHP 中将网络更新发布到 LinkedIn

> ID：15728358
> 
> 赞同：2
> 
> 时间：2013-03-31T10:07:56.527
> 
> 标签：php, oauth-2.0, linkedin

LinkedIn REST API 的许多代码示例和工具都假设您已使用 Oauth1 进行识别，因此您已获得会员令牌和会员密码。

现在，LinkedIn 在此处提供的示例代码：http: [//developer.linkedin.com/documents/code-samples](http://developer.linkedin.com/documents/code-samples) 可以获取 Oauth2 access_token。

获得 access_token 后，您可以使用代码示例中提供的 fetch 函数进行查询并获取成员的详细信息

```
function fetch($method, $resource, $body = '') {

 $params = array('oauth2_access_token' => $_SESSION['access_token'],
                    'format' => 'json',
              );

    // Need to use HTTPS
    $url = 'https://api.linkedin.com' . $resource . '?' . http_build_query($params);
    // Tell streams to make a (GET, POST, PUT, or DELETE) request
    $context = stream_context_create(
                    array('http' =>
                        array('method' => $method,
                        )
                    )
                );

    // Hocus Pocus
    $response = file_get_contents($url, false, $context);

    // Native PHP object, please
    return json_decode($response);
} 
```

好的，太好了，这非常有效。但是提供的 fetch 函数假定 body 为 NULL。[但是要使用/v1/people/~/person-activities](http://developer.linkedin.com/documents/post-network-update)发布网络更新，您需要在正文中传递一些 XML。我尝试了很多方法，找到了几十个使用 Oauth 1.0 成员令牌和成员密码的示例。但是当您只有一个 Oauth2 access_token 时，我还没有找到任何可行的解决方案。所以问题是：这个 fetch 函数需要进行哪些更改才能在查询中传递 XML 正文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:47:54.637

最后，我找到了答案。

```
function GetXMLTemplate(){
   string = '<?xml version="1.0" encoding="UTF-8"?><activity locale="en_US">
   <content-type>linkedin-html</content-type>
   <body>xml_content</body>
   </activity>';
   return $string;
 }

 public function PostActivity($message) {   
    $details = $this->GetLinkedInDetails(); //own function returning basic details in Stdobject
    $url = 'https://api.linkedin.com/v1/people/~/
       person-activities?oauth2_access_token='.$this->access_token;
    // build your message
    $txt = '<a href="'.$details->siteStandardProfileRequest->url.'">'.$details->firstName.
           ' '.$details->lastName.'</a> '.$message;
    //the below str_replace is only required because the activity contains a <a> tag
    //if you don't have one, just keep the htmlspecialchars
    $txt = str_replace("&","&amp;",htmlspecialchars($txt,ENT_QUOTES,'UTF-8'));
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS,str_replace('xml_content',$txt,$this->GetXMLTemplate()));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/xml'));
    $response = curl_exec($ch);
    $http_status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    print_r($response);
    echo $http_status;
} 
```

# vb.net - 在按钮单击时填充文本框

> ID：15728366
> 
> 赞同：0
> 
> 时间：2013-03-31T10:09:14.563
> 
> 标签：vb.net

当我单击 Button1 时，如何使一些文本出现在 RichTextbox1 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:12:26.893

您可以订阅按钮的 Click 事件，然后设置富文本框的[`Text`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.text.aspx)属性：

```
Public Sub Button1_Click(ByVal sender As Object, ByVal args As EventArgs) Handles Button1.Click
    RichTextbox1.Text = "This is the text"
End Sub 
```

# linux - 如何从另一台 linux 服务器获取 linux 服务器的一个驱动器的读写访问权限

> ID：15728369
> 
> 赞同：1
> 
> 时间：2013-03-31T10:09:25.783
> 
> 标签：linux, mount

我在 Linux 服务器 xxx23 中创建了一个名为 /common 的分区。现在我想要具有所有权限的 linux 机器 xxx24 和 xxx25 的驱动器。/common 驱动器将在 24 和 25 服务器（如 /common）中可用。有没有办法做到这一点？我正在使用 CentOS 6.3（64 位）和戴尔服务器。-阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:19:30.130

*   如果未在所有服务器上运行，则激活 NFS
*   编辑`/etc/exports`xxx23 并添加 xxx24 、 xxx25 的 IP 地址
*   最后从 xxx24 , xxx35 挂载这个分区

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:13:47.830

您可以使用[Samba](http://www.debian-administration.org/articles/165)并在网络上映射驱动器。或者你可以使用[SSHFS](http://www.spencerstirling.com/computergeek/lufs.html)。

# django - manage.py 不将参数传递给命令

> ID：15728371
> 
> 赞同：4
> 
> 时间：2013-03-31T10:09:41.353
> 
> 标签：django, manage.py

尝试创建迁移时遇到问题。manage.py 以一种非常奇怪的方式表现 - 它接受为架构迁移提供的参数和我提供的不存在选项的答案。

当我跑

```
# ../manage.py schemamigration locations --initial 
```

我明白了

```
Usage: manage.py [options]

manage.py: error: no such option: --initial 
```

**编辑：** 例如，当我将任何参数传递给任何 manage.py 命令时，我遇到了同样的问题

```
../manage.py runserver --settings=app.settings 
```

我以前做过很多次，我从来没有遇到过这样的问题。它已经在我的本地服务器上运行，当我尝试配置远程服务器时，我遇到了这个问题。

我的 manage.py 文件如下所示：

```
#!/usr/bin/env python
import os
import sys

def isProduction():
    import socket
    if socket.gethostname().startswith('ip'):
        return True
    return False

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "app.settings")
    if isProduction():
        os.environ.setdefault('DJANGO_CONFIGURATION', 'ProdSettings')
    else:
        os.environ.setdefault('DJANGO_CONFIGURATION', 'DevSettings')

    from configurations.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

我使用 django-configurations，但它不应该引起任何问题（它以前工作过几次）。我认为问题出在其他地方。有什么想法会导致这样一个奇怪的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:51:08.553

我不知道为什么，但事实证明问题出在 0.2 版中使用 django-configurations。

将 Django 切换到 1.4.2 并将 django-configurations 切换到 0.1 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:44:47.897

我已经尝试对此进行修复。请参阅 Github 问题，[https://github.com/jezdez/django-configurations/issues/21](https://github.com/jezdez/django-configurations/issues/21)

# jquery - 单击链接获取输入名称

> ID：15728375
> 
> 赞同：0
> 
> 时间：2013-03-31T10:10:04.343
> 
> 标签：jquery, input, get

```
<div id="myId">
<inut type="text" name="what I should get">
<a href="#" name="one" class="add"><img src="add.png" /></a>
</div> 
```

单击我尝试使用的链接时，我需要一个 jquery 函数来获取输入名称

```
$(':input').attr('name'); 
```

但它不起作用，你能帮帮我吗？谢谢，在按钮中转换链接不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:21:34.703

假设您已经在 a 元素上定义了一个点击事件，并且现在位于点击调用的函数中：

```
$(Event.currentTarget).closest('#id').find('input').attr('name') 
```

或者，如果您确定，a 元素始终是输入的兄弟：

```
$(Event.currentTarget).siblings('input').attr('name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:10:57.193

它应该是：

```
$("input").attr("name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:33:33.337

您的标记中有错误：

改变这个

```
<inut type="text" 
```

对此：

```
<input type="text" 
```

并根据您的标记尝试此 jQuery：

```
$('#myId').on('click', '.add', function(){
    console.log($(this).siblings(':text').attr('name'));
}); 
```

### [结帐小提琴](http://jsfiddle.net/NbbT8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T11:16:21.340

像这样的东西？如果您在公共 div 中有“a href”和“input”。

```
$(a).click( function()
{
     alert( $(this).parent().children('input').attr('name') );
}); 
```

在没有电脑的情况下从头写...对不起。

# c - 如何以与终端无关的方式正确打印带有 terminfo 的特殊键序列？

> ID：15728376
> 
> 赞同：1
> 
> 时间：2013-03-31T10:10:07.880
> 
> 标签：c, curses, terminfo

我正在尝试模拟用户，按下 、 等特殊`<Left Arrow>`键。我听说 curses/terminfo 可能有助于以与终端无关的方式做到这一点，但是当我尝试（使用以下代码）打印第一个字符串“text”然后发出一个序列时，我没有得到一个（with as cursor），而是。为什么？如何正确地做到这一点？`<Backspace>``<Delete>``key_left``'|'``"tex|t"``"textD|"`

```
#include <term.h>
#include <stdio.h>

static void putf(const char *name) {
  putp(name);
  fflush(stdout);
}

int main(int argc, char **argv) {
  setupterm((char*)0, 1, (int*)0);

  printf("text");
  fflush(stdout);

  putf(key_left);

  // hang up until user input
  fgetc(stdin);

  return 0;
} 
```

请注意，虽然我可以使用 curses，但 ncurses 在我的用例中是不可接受的。另外，请注意，我不想使用类似的东西`initscr()`，将当前终端屏幕替换为空白屏幕，这不是所需的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:37:58.017

负责光标移动的转义序列和与箭头键关联的转义序列通常是不同的，不应相互替代使用。在`terminfo`数据库中，前者以 . 为前缀，`cursor`后者以`key`.

因此，要将光标向左移动，应该使用`putp (cursor_left)`，而不是`putp (key_left)`。

# java - 在jsp中发送电子邮件确认链接

> ID：15728377
> 
> 赞同：2
> 
> 时间：2013-03-31T10:10:11.817
> 
> 标签：java, jsp

我不知道如何向在我的 JSP 网站上注册的任何人的电子邮件发送确认链接。只要他点击链接，他的个人资料就会被激活。如今，许多网站都在使用它。有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T10:18:55.860

Somye，这并不难。在google上搜索，你会发现很多解决方案等着你。

把你的问题分成几部分。

```
1\. Sending email
2\. Read activation data 
```

第 1 部分，关于如何发送电子邮件。例如在这里阅读：[使用 JSP 发送电子邮件](http://www.tutorialspoint.com/jsp/jsp_sending_email.htm)

第2部分，

> 在您的电子邮件中，添加类似[http://your-site.com/activate.jsp?u=](http://your-site.com/activate.jsp?u=) < userid >&code=< some code >

当用户收到电子邮件时（如第 1 部分所述），现在单击链接。他将访问activate.jsp 页面。

在该页面上，您获取他们发送的信息并将其与您存储的信息相匹配。例如，您查找用户 ID 和代码。通过这种方式，您可以确定用户必须单击链接才能激活帐户。

希望这可以帮助您更多地解决这些问题。

# javascript - 如何应用地理位置坐标从 googlemaps 获取到特定地点的路线？

> ID：15728385
> 
> 赞同：0
> 
> 时间：2013-03-31T10:11:14.163
> 
> 标签：javascript, jquery, html, google-maps, geolocation

大家复活节快乐！

我正在尝试更多地了解 html5 中的地理位置。我正在使用来自[estebanav @ github](https://github.com/estebanav/javascript-mobile-desktop-geolocation/tree/master/js)的 geoPosition.js 。（遵循 phpacademy 的教程）

到目前为止，我能够使用以下代码获取潜在用户的坐标（我正在提醒）：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>Test</title>
    </head>
    <body>

        <a href="#" id="get_location">Get location</a>
        <div id="map">
            <iframe id="google_map" width="450" height="500" 
                    framehold="0" scrolling="no" marginheight="0" marginwidth="0"
                    src="https://maps.google.se?output=embed"></iframe>
        </div>

        <script src="js/geoPosition.js"></script>
        <script>

        document.getElementById('get_location').onclick = function() {
            var success = function(pos) {
                var lat     = pos.coords.latitude,
                    long    = pos.coords.longitude,
                    coords  = lat + ',' + long;

                alert(coords);
            }

            var error = function() {
                alert('Geolocation not supported...');
            }

            if (geoPosition.init()) {
                geoPosition.getCurrentPosition(success, error);
            }

            return false;
        }
        </script>
    </body>
</html> 
```

我真的很想，现在学习如何获取这些坐标并将它们用作方向的起点。

例如：假设我生成的坐标变量 coords 是位置 (58.408221,15.564322)，我有一个目标点，例如变量goal_point，它的坐标为 (58.418954, 15.600543)，我现在如何使用这些坐标在我的地图上显示方向，就像谷歌地图一样？

任何有关此的帮助或有价值的链接将不胜感激！/账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:37:33.243

首先，您需要开始使用 Google Maps api 而不是 iframe。

[从这里](https://developers.google.com/maps/documentation/javascript/tutorial)开始了解如何使用 Maps Api v3 显示基本地图。

实现基本地图后，您可以使用 Google Directions Service 显示两点之间的路线。文档在[这里](https://developers.google.com/maps/documentation/javascript/directions)。

# php - 通过 GD 裁剪图像并粘贴顶部

> ID：15728389
> 
> 赞同：0
> 
> 时间：2013-03-31T10:11:53.703
> 
> 标签：php, image, resize, gd

我有这个脚本并且一直在试图改变它，而不是裁剪图像的中心部分，而是从顶部裁剪到发送到函数的 $height ，任何帮助都会非常棒：

```
function img_resizer($src,$quality,$w,$h,$saveas) {
    /* v2.5 with auto crop */
    $r=1;
    $e=strtolower(substr($src,strrpos($src,".")+1,3));
    if (($e == "jpg") || ($e == "peg")) {
        $OldImage=ImageCreateFromJpeg($src) or $r=0;
    } elseif ($e == "gif") {
        $OldImage=ImageCreateFromGif($src) or $r=0;
    } elseif ($e == "bmp") {
        $OldImage=ImageCreateFromwbmp($src) or $r=0;
    } elseif ($e == "png") {
        $OldImage=ImageCreateFromPng($src) or $r=0;
    } else {
        _o("Not a Valid Image! (".$e.") -- ".$src);$r=0;
    }
    if ($r) {
        list($width,$height)=getimagesize($src);
        // check if ratios match
        $_ratio=array($width/$height,$w/$h);
        if ($_ratio[0] != $_ratio[1]) { // crop image

            // find the right scale to use
            $_scale=min((float)($width/$w),(float)($height/$h));

            // coords to crop
            $cropX=(float)($width-($_scale*$w));
            $cropY=(float)($height-($_scale*$h));

            // cropped image size
            $cropW=(float)($width-$cropX);
            $cropH=(float)($height-$cropY);

            $crop=ImageCreateTrueColor($cropW,$cropH);
            // crop the middle part of the image to fit proportions
            ImageCopy(
                $crop,
                $OldImage,
                0,
                0,
                (int)($cropX/2),
                (int)($cropY/2),
                $cropW,
                $cropH
            );
        }

        // do the thumbnail
        $NewThumb=ImageCreateTrueColor($w,$h);
        if (isset($crop)) { // been cropped
            ImageCopyResampled(
                $NewThumb,
                $crop,
                0,
                0,
                0,
                0,
                $w,
                $h,
                $cropW,
                $cropH
            );
            ImageDestroy($crop);
        } else { // ratio match, regular resize
            ImageCopyResampled(
                $NewThumb,
                $OldImage,
                0,
                0,
                0,
                0,
                $w,
                $h,
                $width,
                $height
            );
        }
        _ckdir($saveas);
        ImageJpeg($NewThumb,$saveas);
        ImageDestroy($NewThumb);
        ImageDestroy($OldImage);
    }
    return $r;
}
img_resizer("profile.jpg","",114,89,"profile_small.jpg"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:44:05.240

好的改变一行解决了它：

```
 // crop from top of the image to fit proportions
        ImageCopy(
            $crop,
            $OldImage,
            0,
            0,
            (int)($cropX/2), 
```

> ```
>  (int)(0), 
> ```

```
 $cropW,
            $cropH
        ); 
```

# apache-modules - 在 C++ 模块中使用 Xerces 库时 Apache 无法启动

> ID：15728390
> 
> 赞同：1
> 
> 时间：2013-03-31T10:12:01.577
> 
> 标签：apache-modules

我编写了一个 C++ 模块来调用 Xerces C++ XML 库来解析 XML 文件。我无法通过这些更改启动 httpd.exe。以下是详细信息-

a) Apache 服务器版本：httpd-2.4.4-win64 b) Xerces 版本：xerces-c-3.1.1-x86_64-windows-vc-10.0 c) 开发环境：Visual Studio 2010 with SP1

以下是我在 Visual Studio 中所做的设置，以便 C++ 模块引用 Xerces 库： 1\. Additional Include Directories = E:\xerces-c-3.1.1-x86_64-windows-vc-10.0\xerces-c- 3.1.1-x86_64-windows-vc-10.0\包括

1.  附加依赖项 = xerces-c_3.lib 和 xerces-c_static_3.lib

2.  其他库目录 = E:\xerces-c-3.1.1-x86_64-windows-vc-10.0\xerces-c-3.1.1-x86_64-windows-vc-10.0\lib

3.  调试 -> 环境：PATH=E:\xerces-c-3.1.1-x86_64-windows-vc-10.0\xerces-c-3.1.1-x86_64-windows-vc-10.0\bin

4.  在操作系统环境变量中，将路径 E:\xerces-c-3.1.1-x86_64-windows-vc-10.0\xerces-c-3.1.1-x86_64-windows-vc-10.0\bin 添加到环境变量中小路

5.  我的 C++ 模块中调用 Xerces 库例程的代码如下所示 -

    尝试 { XMLPlatformUtils::Initialize(); // 初始化 Xerces 基础结构 } catch( XMLException& e ) { char* message = XMLString::transcode( e.getMessage() ); XMLString::release( &message ); } XMLPlatformUtils::Terminate();

6.  在 httpd.conf 文件中添加了以下内容 - LoadModule filter_module modules/XercesDLL.dll AddOutputFilterByType TagFilter text/html text/plain text/css

7.  如果我尝试从命令提示符启动 httpd.exe，我会看到以下错误 -

    > httpd.exe httpd.exe：E:/httpd-2.4.4-win64/Apache24/conf/httpd.conf 第 172 行的语法错误：无法将模块/XercesDLL.dll 加载到服务器中：找不到指定的模块.

即使我在步骤 6 中注释掉上面的 C++ 代码，Apache 仍然无法启动。这意味着 Apache 无法加载我正在使用的 Xerces 库版本，无论我调用该库的方式如何。

但是，如果我编写一个调用上述 Xerces 库版本的独立 DLL，并从 EXE 调用这个 DLL，那么我就能够成功地解析 XML。这意味着，Xerces 库由于某种原因无法仅由 Apache 服务器加载。

我认为它与 C 到 C++ 的链接有关，不确定。

非常感谢任何帮助。

谢谢。

# javascript - 运行两个滑动 js 轮播的下一个和上一个按钮

> ID：15728398
> 
> 赞同：1
> 
> 时间：2013-03-31T10:13:30.823
> 
> 标签：javascript, carousel, swipe

我在一个页面上有两个单独的滑动轮播，但是下一个和上一个按钮无法正常工作。

[现场示例](http://jsfiddle.net/eybJZ/)

**HTML**

```
 Slider 1
<div id='slider1' class='swipe'>
    <div class='swipe-wrap'>
        <div>
            <div>0</div>
            <div>1</div>
        </div>
        <div>
            <div>2</div>
            <div>3</div>
        </div>
        <div>
            <div>4</div>
            <div>5</div>
        </div>
        <div>
            <div>6</div>
            <div>7</div>
        </div>
        <div>
            <div>8</div>
            <div>9</div>
        </div>
        <div>
            <div>10</div>
            <div>11</div>
        </div>
        <div>
            <div>12</div>
            <div>13</div>
        </div>
    </div>
</div>
<div>
    <button class='prev' onclick='slider1.prev()'>prev</button>
    <button class='next' onclick='slider1.next()'>next</button>
</div>Slider 2
<div id='slider2' class='swipe'>
    <div class='swipe-wrap'>
        <div>0</div>
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
        <div>5</div>
        <div>6</div>
        <div>7</div>
        <div>8</div>
        <div>9</div>
        <div>10</div>
        <div>11</div>
        <div>12</div>
        <div>13</div>
    </div>
</div>
<div>
    <button class='prev' onclick='mySwipe.prev()'>prev</button>
    <button class='next' onclick='mySwipe.next()'>next</button>
</div> 
```

# sqldependency - SqlDependency 和通知

> ID：15728403
> 
> 赞同：-1
> 
> 时间：2013-03-31T10:14:00.273
> 
> 标签：sqldependency

我正在使用 MS SQL Server。我需要意识到这一点：当 db 的一个客户端更改表的某些记录时，必须将此更改发送给订阅了 SqlDependency 的所有客户端。但是来自 SqlDependency 的事件 onNotificationChange 给我带来了 OnNotificationChange(object caller,SqlNotificationEventArgs e) 调用者实际上是 SqlDependency 类的对象并且包含 **Id = "c333b019-ff09-4d62-9584-074b009d56ba;70e64cf4-465f-4e54-937b-024432e6b2ca"**

其中包含的 e 描述了 db 中的更改，如下所示： **info: insert source: data type: change** 但我需要直接接收更改的记录。因为在我的变体中，我需要执行新查询，然后搜索更改。许多客户端会对服务器造成很大的负载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:18:32.537

它只被调用一次，因此您需要在事件调用时重新分配事件。

# python-3.x - CherryPy：如何将路由限制为仅 POST

> ID：15728404
> 
> 赞同：5
> 
> 时间：2013-03-31T10:14:06.300
> 
> 标签：python-3.x, http-post, cherrypy

我有一个看起来像的网络表单：

```
<form action="/process_form/" method="post">
  <input type="text" name="login" value="login" />
  <input type="text" name="password" value="123" />
  <input type="submit" />
</form> 
```

处理这个问题的python类是：

```
class Handle:
  @cherrypy.expose()
  #@cherrypy.tools.post <-- Is something like this possible
  def index(self, login=None):
    print(login) 
```

CherryPy 中有没有办法限制对`/process_form/`POST 方法的调用？我的意思是如果用户键入`http://www.example.com/process_form/`他/她应该得到一个异常/错误或找不到页面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T16:29:19.470

[Allow 工具](http://docs.cherrypy.org/dev/refman/lib/cptools.html#cherrypy.lib.cptools.allow)将引发 405。

```
@cherrypy.tools.allow(methods=['POST']) 
```

# spring - spring data mongo中基于集合的多租户

> ID：15728413
> 
> 赞同：1
> 
> 时间：2013-03-31T10:15:37.707
> 
> 标签：spring, mongodb, spring-data, spring-data-mongodb

我正在 spring data mongodb 中启动一个多租户项目。阅读这篇[文章后](https://stackoverflow.com/questions/2748825/what-is-the-recommended-approach-towards-multi-tenant-databases-in-mongodb)，按租户收集是 mongodb 中相当不错的方法。

那么如何在 Spring Data Mongo 中实现这一点呢？显然，没有提供开箱即用的解决方案，但我认为我可以通过覆盖确定CollectionName 方法来调整 MongoTemplate，但我认为它不是公共或受保护的方法。

[但是，我通过扩展 SimpleMongoDbFactory 并按照此处](https://stackoverflow.com/questions/12078669/spring-data-mongodb-connect-to-multiple-databases-in-one-mongo-instance)提供的提示使用 LocalThread 变量，非常容易地为每个租户设置数据库。

所以，问题是：

1.  有什么安全的方法可以覆盖集合和域类名映射吗？ps：这应该在运行时发生，所以我认为@collection 注释根本没有帮助。
2.  如果无法按租户收集，那么采用多数据库方法会导致多少性能和资源损失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T04:37:49.690

您可以扩展 MappingMongoEntityInformation 以覆盖 getCollectionName()。存储库操作对每个操作调用 getCollectionName()。我假设tenantId 将是一个 ThreadLocal

```
public class TenantThreadLocal extends ThreadLocal<String> {
    private final static TenantThreadLocal instance = new TenantThreadLocal();

    public static TenantThreadLocal instance() {
        return instance;
    }
} 
```

并且省略了构造函数的重写类。

```
public class TenantMappingMongoEntityInformation<T, ID extends java.io.Serializable>  extends MappingMongoEntityInformation<T, ID> {

    @Override
    public String getCollectionName() {
        return TenantThreadLocal.instance().get() + super.getCollectionName();
    }
} 
```

然后创建您的存储库：

```
MongoPersistentEntity<YourObject> persistentEntity = 
    (MongoPersistentEntity<YourObject>) 
    mongoOperations.getConverter()
    .getMappingContext()
    .getPersistentEntity(YourObject.class);

MongoEntityInformation<YourObject, ObjectId> mongoEntityInformation =
    new MappingMongoEntityInformation<YourObject, ObjectId>(persistentEntity);

CrudRepository<YourObject, ObjectId> repository =
    new SimpleMongoRepository<YourObject, ObjectId>(mongoEntityInformation, mongoOperations); 
```

# compiler-construction - GLR 中不明确的非终结符

> ID：15728414
> 
> 赞同：4
> 
> 时间：2013-03-31T10:15:39.620
> 
> 标签：compiler-construction, context-free-grammar, parser-generator, ambiguous, glr

当 GLR 解析器以两种或多种方式将某些文本减少到相同的非终结符时，它会合并解析子树。Rekers 为此使用“符号节点”。

我这不是每个非终端都可能导致合并。提前知道哪些非终结符永远不会合并将大大简化解析树的构建。

例如，在 Elkhound 技术报告中，作者为 GLR 解析器实现了 C++ 语法。他是这样描述的：

> 该语法目前有 37 个移位/归约冲突、47 个归约/归约冲突和**8 个模棱两可的非终结符**。

如何区分给定 CFG 的模棱两可和明确的非终结符？我在哪里可以读到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T15:12:57.903

How does knowing which non-terminals can produce an ambiguity simplify parse tree construction in a practical way?

If you have NO such nonterminals in a grammar, then you can leave out the symbol node construction and subtree sharing machinery, true. It isn't that much code, so this win is pretty minor.

But if any nonterminal can be ambiguous, then you need the machinery. Sharing that machinery across all ambiguities is pretty easy (I've build GLR parsers). So what exactly do you gain?

Lastly, you can't in general (theorem) determine if a grammar is ambiguous. Since a nonterminal represents a sub-grammar, you can't in general determine if any specific nonterminal is ambiguous. You can do this for lots of special cases. (My GLR parser generator in fact will find some ambiguities automatically basically by enumerating possible expansions of nonterminals).

# java - 在android中调用网络服务

> ID：15728416
> 
> 赞同：2
> 
> 时间：2013-03-31T10:15:47.577
> 
> 标签：java, android, .net

我在 Android 中调用 asmx Web 服务，但每次运行我的应用程序时都会出现错误。

```
HTTP request faild.HTTP Status Code : 400 
```

我将 - 更改为 <10.0.2.2:port/WebService1.asmx>

我也试过

但它给出了同样的错误。

服务在 .net 中完美运行，但需要 android 的解决方案。请帮助。谢谢你。

**代码：**

网络服务：

```
[WebMethod]
    public string HelloWorld()
    {
        return "Hello World - This is nikki";
    } 
```

MainActivity.java

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class MainActivity extends Activity {

 private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";

    private static final String METHOD_NAME = "HelloWorld";

    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://10.0.2.2:1553/WebService1.asmx";  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    call();

}

public void call()
{
     try {

         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

         request.addProperty("passonString", "Rajapandian");

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.dotNet=true;
         envelope.setOutputSoapObject(request);

         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
         androidHttpTransport.call(SOAP_ACTION, envelope);

         Object result = (Object)envelope.getResponse();

         Toast.makeText(this, result.toString(), Toast.LENGTH_LONG).show();
     } catch (Exception e) {
         Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
         }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T22:22:16.733

所有 web 服务调用都应该在后台线程中。Android 不允许在主线程上调用 web 服务。使用异步方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:24:56.197

`400`意味着`Bad Request`。服务器**正在**响应。您正在发出 HTTP 请求，只是没有遵循 API 规则。

检查文档。尝试将请求转储到控制台，看看是否缺少标题、拼写错误的参数等。还转储响应正文可能有助于您的调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T05:09:22.020

```
private void callSubmitWebService() {

    String[] params = new String[7];
    String[] values = new String[7];
    TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String myAndroidDeviceId = null;

    if (telephonyManager.getDeviceId() != null) {
        myAndroidDeviceId = telephonyManager.getDeviceId();
    } else {
        myAndroidDeviceId = Settings.Secure.getString(getApplicationContext().getContentResolver(), Settings.Secure.ANDROID_ID);
    }

    params[0] = "block_name";
    params[1] = "tab_id";
    params[2] = "department_id";
    params[3] = "username";
    params[4] = "emp_pin";
    params[5] = "image";
    params[6] = "clocked_flag";

    values[0] = "Submit";
    values[1] = myAndroidDeviceId;
    values[2] = selectedID;
    values[3] = searchname;
    values[4] = PinNo;
    values[5] = image.toString();
    values[6] = Status;

    URL = "Your URL";
    Webservice wb = new Webservice(LandingActivity.this, URL,
            params, values);

    Log.e("url callweb()", "" + URL);

    wb.execute();

} 
```

**WbService 类如下**

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;

import org.apache.http.NameValuePair;

import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;

import org.apache.http.impl.client.DefaultHttpClient;

import org.apache.http.message.BasicNameValuePair;

import android.app.ProgressDialog;

import android.os.AsyncTask;

import android.util.Log;

public class Webservice extends AsyncTask<String, Void, String> {

    private static String URL;
    private static String params[];
    private static String values[];
    String response = null;
    String id;

    private LandingActivity landingActivity;

    // switch church
    public Webservice(LandingActivity landingActivity,
                      String URL, String params[], String values[]) {
        // TODO Auto-generated constructor stub
        this.landingActivity = landingActivity;

        this.URL = URL;
        this.params = params;
        this.values = values;

    }

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected String doInBackground(String... arg0) {

        response = CallService();

        return response;

    }

    public String CallService() {

        String json = null;
        int responseCode = 0;
        HttpResponse response = null;
        try {
            HttpClient client = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(URL);

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

            int s = params.length;
            Log.e("Params length", "" + s);
            for (int i = 1; i < s; i++) {

                nameValuePairs
                        .add(new BasicNameValuePair(params[i], values[i]));

            }

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            do {

                response = client.execute(httppost);
                responseCode = response.getStatusLine().getStatusCode();
                // If you want to see the response code, you can Log it
                // out here by calling:
                // Log.d("256 Design", "statusCode: " + responseCode);
            } while (responseCode == 408);
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));

            json = rd.readLine();
            Log.e("json", "" + json);
        } catch (Exception e) {
            responseCode = 408;
            e.printStackTrace();
        }
        return json;

    }

protected void onPostExecute(String response) {

    if (values[0].equalsIgnoreCase("Submit"))

    {

        landingActivity.OnGetResponse_for_Submit(response);

    }

}
} 
```

**在以下功能中对 Web 服务的响应做任何事情**

```
 public void OnGetResponse_for_Submit(String response) {

} 
```

# php - laravel 中的数据库表有问题

> ID：15728417
> 
> 赞同：1
> 
> 时间：2013-03-31T10:15:51.353
> 
> 标签：php, database, laravel

我正在 laravel 中制作注册系统。当用户输入数据时，我将其存储在数据库中。但是当用户单击注册按钮时，它会给我以下错误 Unhandled Exception

```
Message:

SQLSTATE[42S02]: Base table or view not found: 1146 Table 'makeitsnappy.user' doesn't exist

SQL: SELECT COUNT(*) AS `aggregate` FROM `user` WHERE `username` = ?

Bindings: array (
  0 => 'asdasd',
)
Location:

/Applications/MAMP/htdocs/laravel-test/laravel/database/connection.php on line 264 
```

当我将表的名称更改为“用户”时，会说未处理的异常

```
Message:

SQLSTATE[42S02]: Base table or view not found: 1146 Table 'makeitsnappy.users' doesn't exist

SQL: INSERT INTO `users` (`username`, `password`, `updated_at`, `created_at`) VALUES (?, ?, ?, ?)

Bindings: array (
  0 => 'zafar',
  1 => '$2a$08$Xg47q9n65GZSS/l3xgYTyeTC7eICqMimf6KkvdFwSfiOgpFrI0tKe',
  2 => '2013-03-31 09:22:48',
  3 => '2013-03-31 09:22:48',
)
Location:

/Applications/MAMP/htdocs/laravel-test/laravel/database/connection.php on line 264 
```

我怎么解决这个问题？

**更新代码**

这是我的模型

用户.php

```
class User extends Basemodel {
    public static $table = 'users';

    public static $rules = array(
        'username'=>'required|unique:user|alpha_dash|min:4',
        'password'=>'required|alpha_num|between:4,8|confirmed',
        'password_confirmation'=>'required|alpha_num|between:4,8'
    );
} 
```

基本模型.php

```
class Basemodel extends Eloquent {
    public static function validate($data) {
        return Validator::make($data, static::$rules);
    }
} 
```

这是我的 users.php 控制器

```
class Users_Controller extends Base_Controller {
    public $restful = true;

    public function get_new() {
        return View::make('users.new')->with('title', 'Make it Snappy - Register');
    }

    public function post_create() {
        $validation = User::validate(Input::all());

        if($validation->passes()) {
            User::create(array(
                    'username' => Input::get('username'),
                    'password' => Hash::make(Input::get('password'))
                ));

            return Redirect::to_route('home')->with('message', 'Thanks for registring');
        } else {
            return Redirect::to_route('register')->with_errors($validation)->with_input();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T01:45:52.130

刚刚经历了这个问题，我可以确切地告诉你它是什么。仔细检查您的“唯一：”验证约束。

您上面的唯一约束是“用户”，所以 laravel 的验证器正在寻找该表来进行验证。

将其更改为“用户”，瞧！问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:44:26.303

错误消息说没有表“makeitsnappy”，所以这似乎来自您在 IMO 此处发布的代码之外。

# sharepoint-2010 - Sharepoint表单库ItemUpdating中beforeProperties、afterproperties、listItem的问题

> ID：15728422
> 
> 赞同：2
> 
> 时间：2013-03-31T10:16:14.110
> 
> 标签：sharepoint-2010

这些是我在表单库中的 ItemUpdating 事件接收器中得到的结果：

```
properties.BeforeProperties["CurrentUser"] returns null

properties.AfterProperties["CurrentUser"] returns null

properties.ListItem["CurrentUser"] returns the old value 
```

如何将旧值与使用 infopath 作为表单的 SharePoint 表单库中的新值进行比较？

我看过[这个网站](http://www.synergyonline.com/Blog/Lists/Posts/Post.aspx?ID=122)，但它对我的问题没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:27:08.877

我能够弄清楚我的问题。这是你可以做的。在上面的链接中，您可以参考以找出要使用的属性，具体取决于您使用的库或列表。

就我而言，我使用的是图书馆。请记住这一点，在大多数博客中都写到您应该使用字段的 InternalName，但对我来说它是不同的。我使用了 DisplayName 并且它有效。请尝试在您的代码中使用显示名称。如果它不起作用，请尝试内部名称。正如我上面所说，显示名称对我有用。

这是示例：

```
InternalName: Current_x0020_User
DisplayName: Current User

public override void  ItemUpdating(SPItemEventProperties properties)
{
    properties.BeforeProperties["Current User"]   //use the Display Name

    properties.AfterProperties["Current User"]    //use the display name

    properties.ListItem["Current User"]          // use the display name
} 
```

让我知道这是否对您有帮助

# ios - 如何保存 UISearchDisplayController 的状态？

> ID：15728423
> 
> 赞同：3
> 
> 时间：2013-03-31T10:16:24.193
> 
> 标签：ios, uinavigationcontroller, uisearchbar, uisearchdisplaycontroller

在我的应用程序中，用户可以从位于 UINavigationBar 的 UISearchBar 进行一些搜索。然后他可以按下单元格，我将为他弹出另一个视图控制器。但是当他按下下一个控制器导航栏中的返回按钮时，我需要将 UISearchDisplayController 与他之前的搜索结果一起弹出。

基本上，我只需要在用户按下后退按钮后返回到控制器的先前状态。但奇怪的是我做不到，因为当我返回初始控制器时，我看到搜索栏处于初始状态并且没有搜索结果。有没有办法处理它？

为了让事情更具体和清晰，我在下面发布了一些图片和代码。

初始状态：

![在此处输入图像描述](https://i.stack.imgur.com/EFAM3.jpg)

当您输入内容时：

![在此处输入图像描述](https://i.stack.imgur.com/X0rkI.jpg)

然后我只是在我的 UISearchDisplayDelegate 的方法中弹出新控制器，`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`就像这样：

```
[parent.navigationController pushViewController:listWordsViewController animated:YES]; 
```

然后我可以从 listWordsViewController 默认返回按钮返回。当我这样做时 - 我只看到初始状态。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:54:14.957

感谢所有查看此问题并试图提供帮助的人。我发现了一个问题 - 只是在 -viewWillAppear 中，我目前正在与之合作的其他人正在重置导航栏。我傻到没有检查它。

# ajax - HTML5 视频不适用于 AngularJS ng-src 标签

> ID：15728424
> 
> 赞同：20
> 
> 时间：2013-03-31T10:16:27.997
> 
> 标签：ajax, html, angularjs, html5-video

AngularJS`ng-src`不适用于此小提琴中的 HTML5 视频元素：http: [//jsfiddle.net/FsHah/5/](http://jsfiddle.net/FsHah/5/)

查看视频元素，src 标签被填充了正确的 src uri，但视频无法播放。

[AngularJS](https://groups.google.com/forum/?fromgroups=#!topic/angular/oaSFYtWInzE)[不支持](https://github.com/angular/angular.js/issues/1352)此功能，解决方法是什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-07-09T09:35:07.960

只需创建一个过滤器：

```
app.filter("trustUrl", ['$sce', function ($sce) {
        return function (recordingUrl) {
            return $sce.trustAsResourceUrl(recordingUrl);
        };
    }]); 
```

在查看文件中：

```
<audio src="{{Your_URL | trustUrl}}" audioplayer controls></audio> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-22T13:52:22.740

目前这似乎是 AngularJS 中的一个错误：[https ://github.com/angular/angular.js/issues/1352](https://github.com/angular/angular.js/issues/1352)

替换源`<video ng-src="{{src}}" controls></video>`似乎是目前至少将源加载到视频中的唯一方法。希望有人来解决这个问题或提供某种解决方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-28T09:12:16.773

要播放视频，我刚刚使用以下方法有一个名为 play 的按钮，并且在按钮的 ng-click 中你必须写这个

```
 var myVideo = document.getElementsByTagName('video')[0];
myVideo.src = vidURL;
myVideo.load();
myVideo.play(); 
```

在 ng-repeat 中播放视频使用*index*。希望能帮助到你。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-29T07:22:34.757

从视频标签中删除源标签并尝试这个..

```
<video controls preload=auto ng-src="{{videoURL| trustUrl}}" poster="{{thumbnailUrl}}"></video> 
```

并在您的角度应用程序中创建一个像这样的过滤器

```
 app.filter("trustUrl", function($sce) {
            return function(Url) {
                console.log(Url);
                return $sce.trustAsResourceUrl(Url);
            };
        }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-10T23:08:40.187

我的回复晚了几年，但这适用于仍在寻找解决方案的任何人。我遇到过同样的问题。我记得 Youtube 使用不同的标签 - iframe 显示他们嵌入的视频。我应用了我想要的属性并且它起作用了。

`<iframe width="560" height="300" ng-src="{{ video }}" frameborder="0" allowfullscreen controls></iframe>`

对于 AngularJS 的新手来说，{{ video }} 是该页面控件中的 $scope.video 变量，它具有视频的路径。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-23T22:43:09.443

解决方法

在控制器中

```
$scope.mp3 = "http://download.jw.org/audio.mp3"

$scope.$watch('mp3', function() {
       $("audio").attr("src",$scope.mp3)
   }); 
```

html:

```
<audio id="mejs" type="audio/mp3" controls="controls"></audio> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-16T09:57:32.080

这是 AngularJS 中的默认安全预防措施。请查看详细信息：[https ://docs.angularjs.org/api/ng/service/$sce](https://docs.angularjs.org/api/ng/service/$sce)

要完全禁用“严格上下文转义”，您可以在 app.js 文件中定义它

```
angular.module('myAppWithSceDisabledmyApp', []).config(function($sceProvider) {
      // Completely disable SCE.  For demonstration purposes only!
      // Do not use in new projects.
      $sceProvider.enabled(false);
    }); 
```

但是他们不推荐。但是您可以使用这样的特定控制器：

```
var myAppControllers = angular.module('myAppControllers', []); ScorpAppControllers.controller('HomeCtrl', ['$scope', 'Home',    function ($scope, Home) {
$scope.Home = Home.query(); }]).config(function($sceProvider) {
$sceProvider.enabled(false); }); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-29T18:18:41.343

我认为发生的事情是 Angular 在`src`和 元素添加到页面后填充属性，因此浏览器会看到带有损坏 URL 的元素。我使用以下方法解决了它`ng-if`：

```
 <video muted ng-if="foo" loop autoplay>
            <source ng-src="{{foo.media.mp4.url}}">
            <source ng-src="{{foo.media.webm.url}}" type="video/webm">
            <img ng-src="{{foo.media.gif.url}}">
        </video> 
```

这使得元素与 的存在相关联`foo`，这是通过 AJAX 调用填充的范围变量。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-04T07:26:18.490

您可以使用[ng-media](https://github.com/caitp/ng-media)模块。

```
angular.module('app', ['media'])
    .controller('mainCtrl', function($scope) {

        $scope.videoSources = [];

        $scope.loadVideos = function() {
            $scope.videoSources.push('http://www.w3schools.com/html/mov_bbb.mp4');
            $scope.videoSources.push('http://www.w3schools.com/html/mov_bbb.webm');
        };
    });
```

```
<div ng-app='app'>
  <div ng-controller='mainCtrl'>        
    <video html5-video='{{ videoSources }}'
        autoplay='true' controls='true'>
    </video>
    <br>
    <a href="#" ng-click='loadVideos()'>Load videos</a>
  </div>
</div>

<script src="https://code.angularjs.org/1.3.15/angular.js"></script>
<script src="http://caitp.github.io/ng-media/ng-media.js"></script>
```

[笨蛋](http://plnkr.co/edit/G6LReT)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-24T13:17:48.730

只需使用 vanilla js（常规 javascript）即可完成这项工作。如果您正在收听诸如 onended 之类的事件，您可能需要重新考虑使用 $scope.$apply()。

我的例子：

```
document.getElementById('video').src = $scope.videos[$scope.videoindex]; 
```

# sql-server - VB.Net 中的嵌套数据读取器

> ID：15728429
> 
> 赞同：1
> 
> 时间：2013-03-31T10:18:01.737
> 
> 标签：sql-server, vb.net, datareader

我正在使用带有 SQL Express 2005 的 .net 4.0 Framework (VB)。我需要在使用 datareader 嵌套时使用 do。就像是.......

```
SQLQuery1="Select * from Table1"
cmd = New Data.SqlClient.SqlCommand(SQLQuery1, myConn)
If cmd.Connection.State = 1 Then cmd.Connection.Close()
cmd.Connection.Open()
dr = cmd.ExecuteReader
Do While dr.Read
  SQLQuery2="Select * from Table2 where ID=" & dr.item("field1")
  cmd2 = New Data.SqlClient.SqlCommand(SQLQuery2, myConn)
  If cmd2.Connection.State = 1 Then cmd2.Connection.Close()
  cmd2.Connection.Open()
  dr2 = cmd2.ExecuteReader
  Do While dr2.Read
    --------- Execute Insert/Update Statement here ----------------
  loop
  dr2.close
loop
dr.close 
```

它第一次执行，但是当它第二次返回“Do While dr.Read”时，它给出错误 **Invalid attempt to call Read when reader is closed。** 我在连接字符串中使用 MARS=true 但没有看到任何区别。

我在哪里做错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-12T18:41:10.713

来自微软的帮助：

当您使用 SQL Server 2005 之前的 SQL Server 版本时，在使用 SqlDataReader 时，关联的 SqlConnection 正忙于为 SqlDataReader 提供服务。在此状态下，除了关闭 SqlConnection 之外，不能对它执行其他操作。在调用 SqlDataReader 的 Close 方法之前就是这种情况。从 SQL Server 2005 开始，多活动结果集 (MARS) 功能允许使用同一连接执行多个操作。

所以，恐怕你需要不同的连接来嵌套数据阅读器

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T10:30:14.520

1）两个SqlCommands共享同一个连接

2）您在阅读博士时关闭连接

3）当你想循环 dr2 时循环 dr2 （见@Jack的回答）

# java - 添加maven依赖问题

> ID：15728446
> 
> 赞同：2
> 
> 时间：2013-03-31T10:21:22.610
> 
> 标签：java, git, maven, github

我想在我的 pom.xml 中添加一个依赖项以从 github 存储库中签出一个库。

我的 pom 文件是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.nvtien.test</groupId>
<artifactId>tester</artifactId>
<version>0.0.1-SNAPSHOT</version>
<dependencies>
    <dependency>
        <groupId>com.levonk</groupId>
        <artifactId>codequality</artifactId>
        <version>1.0.4</version>
    </dependency>
</dependencies>
<repositories>
    <repository>
        <id>cemerick-snapshots</id>
        <url>https://raw.github.com/cemerick/cemerick-mvn-repo/snapshots</url>
    </repository>
</repositories></project> 
```

这是github存储库：

```
https://github.com/levonk/pub-maven-repo 
```

我的本地 ~m2/settings.xml

```
 <servers>
<server>
  <id>github</id>
  <username>XXXX</username>
  <password>XXXX</password>
</server></servers> 
```

我通过 Maven 日志发现了一个错误：

> [错误] 无法在项目测试器上执行目标：无法解析项目 com.nvtien.test:tester:jar:0.0.1-SNAPSHOT 的依赖项：github.com/cemerick/cemerick-mvn-repo/snapshots 缓存在本地存储库，在更新之前不会重新尝试解析 -> [帮助 1]

我的问题是：怎么了？为什么 maven 不能下载 codequality-1.0.4.jar ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:24:34.080

请添加以下存储库：

```
<repository>
    <id>https-levonk</id>
    <url>https://github.com/levonk/pub-maven-repo/tree/master/release/</url>
</repository> 
```

顺便说一句，我发现那里只有 1.0.8（和 1.0.9）版本。

[https://github.com/levonk/pub-maven-repo/tree/master/release/com/levonk/codequality](https://github.com/levonk/pub-maven-repo/tree/master/release/com/levonk/codequality)

请添加以下依赖项，它将为您工作：

```
<dependency>
    <groupId>com.levonk</groupId>
    <artifactId>codequality</artifactId>
    <version>1.0.8</version>
</dependency> 
```

# html - 在画布内获取 SVG 的 SVGDocument？

> ID：15728450
> 
> 赞同：1
> 
> 时间：2013-03-31T10:22:53.840
> 
> 标签：html, canvas, svg, html5-canvas

我正在尝试找到一种方法来更改 SVG 文件中元素的填充，然后通过 JavaScript 将其绘制到画布上。

我设法将 .svg 文件实际绘制到画布上的唯一方法是制作一个 Image 对象，并将其图像源设置为 SVG 文件。但是，这样做，我找不到`getSVGDocument()`在图像对象上使用的方法。

有什么建议么？

* ***添加：**

这就是我通过`<object>`标签更改 svg 文件填充的方式，效果很好：

```
var svg = document.getElementById('character').getSVGDocument();
var hairColor = document.getElementById('_hair').value;
var headColor = document.getElementById('_head').value;
var bodyColor = document.getElementById('_body').value;

svg.getElementById("hair").style.fill = hairColor;
svg.getElementById("head").style.fill = headColor;
svg.getElementById("body").style.fill = bodyColor; 
```

然后它正在访问的 HTML 元素如下所示：

```
<object id="character" type="image/svg+xml" data="person.svg"> 
```

基本上我想做同样的事情，但只是在`<canvas>`标签内，所以我可以在游戏设置中动态移动 svg。

# php - 每页一个视图对象？还是只有一个 View 对象加载不同的模板？

> ID：15728451
> 
> 赞同：0
> 
> 时间：2013-03-31T10:22:55.950
> 
> 标签：php, templates, model-view-controller, view

在我的应用程序中，我有一个`View`对象可以`load($template)`作为模板准备好使用该`render()`方法进行渲染。

在我读过的所有内容中，`Views`有时我看到人们以我目前的方式做事，而其他时候我看到人们做类似以下的事情

```
class ProductView extends View {

}

class CheckoutView extends View {

} 
```

`View`每页有一个单独的。

两种方式的优点/缺点是什么？

任何建议都会非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:55:36.370

> [视图不应该是“加载模板”。如果您`$this->load('header');`在视图中有类似代码，则违反[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。View（有时）**使用**模板为用户创建响应，但它不应该创建它们。]

在您将遇到的大多数关于视图的文章中，您将阅读 Rails（及其克隆）对视图的解释。在 RoR 中，您没有视图。只是一个美化的愚蠢模板。

表示层的结构使您最好在控制器和视图之间建立 1:1 的关系。每个视图负责处理由用户输入触发的响应。因此：您的页面通常会在*每个执行时间有一个视图*。

在更复杂的情况下，您可能需要研究[复合视图](http://www.corej2eepatterns.com/Patterns2ndEd/CompositeView.htm)的概念。这种方法使您可以将表示逻辑分成更小的块。[如果您使用ViewModel](http://martinfowler.com/eaaDev/PresentationModel.html)，这也使得构建代码变得更加容易。

底线是：如果您对整个应用程序只有一个视图，那么您做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:29:34.257

每页一次浏览绝对是最适合网络的。请注意，我的意思不是每个控制器一个视图，而是每个不同的页面。您希望有不同的模板可以被不同的视图调用（例如页眉、页脚或导航栏）。

例如在里面`BlogPostView`你会有：

```
$this->load('header');
$this->load('post', $data);
$this->load('footer'); 
```

然后渲染它：

```
$this->render(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:46:20.623

它没有“唯一真正的解决方案”。但对我来说，视图必须尽可能简单。比如 printf 函数。你想扩展 printf 行为吗？我想不是！

# php - 无效的 UTF-8 序列

> ID：15728456
> 
> 赞同：0
> 
> 时间：2013-03-31T10:23:31.977
> 
> 标签：php, json

我`Warning: json_encode() [function.json-encode]: Invalid UTF-8 sequence in argument in...`在 php.ini 中收到“”错误。我不想转义无效字符，我需要它们。如何在 json_encode() 中使用无效字符。在 mysql 数据库中，我使用的是“ `utf8_general_ci`”。（谢谢）

```
try {

    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $dbh = null;
    $provinces = $stmt->fetchAll(PDO::FETCH_OBJ);
    echo '{"items":'. json_encode($provinces ) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

# javascript - 如何在 Durandal 中为我的 shell 视图模型使用一个类？

> ID：15728460
> 
> 赞同：5
> 
> 时间：2013-03-31T10:24:18.760
> 
> 标签：javascript, typescript, durandal

我正在查看 Hot Towel 模板，并试图让它在 TypeScript 中工作，我在转换 shell 视图模型时遇到了问题。我正在尝试将其翻译成 TS，对我来说它应该是一个类更有意义，而不是像[这里](https://github.com/evanlarsen/DurandalTypescriptExample/blob/master/DurandalTypescriptExample/App/viewmodels/shell.ts)所示的那样简单地导出函数。我查看了[这种方法](https://github.com/BlueSpire/Durandal/pull/13)，但是，注意[这里](https://stackoverflow.com/a/15601153/1014822)的评论，决定不遵循它。

经过一番挖掘后，我发现[了这个线程](https://github.com/BlueSpire/Durandal/issues/58)，这表明它应该像覆盖一样简单`router.getActivatableInstance`，但我似乎无法获得足够远的距离来调用该函数。

这是我的`main.ts`（也上课）：

```
/// <reference path="dts/toastr.d.ts" />
/// <reference path="dts/durandal.d.ts" />
/// <reference path="dts/require.d.ts" />

import _app = module('durandal/app');
import _system = module('durandal/system');
import _viewLocator = module('durandal/viewLocator');
import _router = module('durandal/plugins/router');
import _logger = module('services/logger');

export class HOPS {

    public init(): void {
        _logger.log('init', this, 'HOPS', false);
        _system.debug(true);
        this._startApp();
    }

    private _startApp(): void {
        _logger.log('_startApp', this, 'HOPS', false);

        _app.start().then(() => {
            toastr.options.positionClass = 'toast-bottom-right';
            toastr.options.backgroundpositionClass = 'toast-bottom-right';

            var defImpl = _router.getActivatableInstance; //default Implementation

            _router.getActivatableInstance = function (routeInfo: _router.routeInfo, paramaters: any, module: any) {
                var functionName = routeInfo.name.substring(0, 1).toUpperCase() + routeInfo.name.substring(1);
                if (typeof module [functionName] == 'function') {
                    var instance = new module [functionName]();
                    instance.__moduleId__ = module.__moduleId__;
                    return instance;
                }
                else return defImpl(routeInfo, paramaters, module );
            }

            _router.handleInvalidRoute = (route: _router.routeInfo, paramaters: any) => {
                _logger.logError('No Route Found', route, 'main', true);
            }

            _router.useConvention();
            _viewLocator.useConvention();

            _app.adaptToDevice();

            _app.setRoot('viewmodels/shell', 'entrance');
        });
    }
}

var hops: HOPS = new HOPS();
hops.init(); 
```

（此处显示 JS 的游乐场：http: [//bit.ly/WyNbhn](http://bit.ly/WyNbhn)）

...这是我的`shell.ts`：

```
import _system = module('durandal/system');
import _router = module('durandal/plugins/router');
import _logger = module('services/logger');

export class Shell{

    public router = _router;

    public activate(): JQueryPromise {
        _logger.log("activate", null, 'shell', false);
        return this.boot();
    }

    public boot(): JQueryPromise {
        _logger.log("boot", null, 'shell', false);
        this.router.mapNav('home')
        this.router.mapNav('details');
        _logger.log('SciHops SPA Loaded!', null, _system.getModuleId(this), true);
        return this.router.activate('home');
    }
} 
```

...编译为：

```
define(["require", "exports", 'durandal/system', 'durandal/plugins/router', 'services/logger'], function(require, exports, ___system__, ___router__, ___logger__) {
    /// <reference path="../dts/_references.ts" />
    var _system = ___system__;

    var _router = ___router__;

    var _logger = ___logger__;

    var shell = (function () {
        function shell() {

            this.router = _router;
        }
        shell.prototype.activate = function () {
            _logger.log("activate", null, 'shell', false);
            return this.boot();
        };
        shell.prototype.boot = function () {
            _logger.log("boot", null, 'shell', false);
            this.router.mapNav('home');
            this.router.mapNav('details');
            _logger.log('SciHops SPA Loaded!', null, _system.getModuleId(this), true);
            return this.router.activate('home');
        };
        return shell;
    })();
    exports.shell = shell;    
}) 
```

使用上面的类，我得到一个绑定错误，因为`router`它是未定义的。如果我添加`export var router = _router`，那么这个错误就会消失，但我的 shell 类上的 activate 方法永远不会被调用。

以上所有内容都适用于后续视图模型，但只是落在了外壳上。

我做错了什么，我怎样才能让一个 TS 类作为我的 shell Durandal 视图模型工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T03:35:26.067

问题是您的路由器没有解析您的`shell.ts`模块。

所有其他视图模型都通过该`router.getActivatableInstance`方法并被实例化`__moduleId__`并附加到它们上。除了你的`shell.ts`模块。

这是让你的`shell.ts`模块工作的一种快速而肮脏的方式。

在您的内部，您`main.ts`可以要求您的`shell.ts`模块：

```
import _shell = module('shell'); 
```

然后，仍然在您的内部，`main.ts`您可以实例化您的`shell`类并为其分配 moduleId。

```
var shell = new _shell.Shell();
shell.__moduleId__ = _shell.__moduleId__;
_app.setRoot(shell, 'entrance'); 
```

不是你见过的最漂亮的东西。但它可以完成工作。这与覆盖您所做的几乎相同`getActivatableInstance`。由于您的外壳没有通过`router.js`模块，因此您必须手动完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-27T23:58:20.307

另一种选择是将类导出为 Duranal 的模块。注意：此方法也适用于视图模型。

### 基于 nuget 的“Durandal Starter Kit”的工作示例：

```
 import router = require('plugins/router')
    import app = require('durandal/app')

    class Shell {
        router =  router;
        public search() {
            //It's really easy to show a message box.
            //You can add custom options too. Also, it returns a promise for the user's response.
            app.showMessage('Search not yet implemented...');
        }
        public activate() {
            router.map([
                { route: '', title: 'Welcome', moduleId: 'viewmodels/welcome', nav: true },
                { route: 'flickr', moduleId: 'viewmodels/flickr', nav: true },
            ]).buildNavigationModel();

            return router.activate();
        }
    }

    // Magic happens here:
    export = Shell; 
```

### 原始的“js”代码：

```
 define(['plugins/router', 'durandal/app'], function (router, app) {
        return {
            router: router,
            search: function() {
                //It's really easy to show a message box.
                //You can add custom options too. Also, it returns a promise for the user's response.
                app.showMessage('Search not yet implemented...');
            },
            activate: function () {
                router.map([
                    { route: '', title:'Welcome', moduleId: 'viewmodels/welcome', nav: true },
                    { route: 'flickr', moduleId: 'viewmodels/flickr', nav: true },
                ]).buildNavigationModel();

                return router.activate();
            }
        };
    }); 
```

# algorithm - 哪种算法最适合 Burrows-Wheeler 变换？

> ID：15728462
> 
> 赞同：0
> 
> 时间：2013-03-31T10:24:44.817
> 
> 标签：algorithm, compression, burrows-wheeler-transform

似乎许多实现 BWT 的压缩器将它与算术编码或霍夫曼编码结合使用。（随意提名更多，特别是如果他们更好的话。）

我的第一个问题是：为什么像 LZW 或 LZSS 这样的字典编码器与 BWT 一起使用是更糟糕的选择？

我的第二个问题是：哪个是最好的全能算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:29:11.397

1.  BWT 使用所有大小的上下文，而实际的 LZ 实现几乎不能使用大小小于 3 的上下文。
2.  BWT 受益于块内的每个匹配项，而普通 LZ 实现仅在前向窗口中查找匹配项。

但在很多情况下，LZ 并不是一个更糟糕的选择。LZ 是一种在线算法，可以在流上工作，而 BWT 必须在大块上工作，并且消耗大量内存。LZ 的解压效率很高，而 BWT 仍然需要至少 5n 的额外空间。

BWT 的性能与后缀排序有关。有很多实用的后缀排序算法：MSufSort/DivSufSort/Archon/QSufSort/DeepSwallow，还有理论上O(n)时间的最优算法：SA-IS/SA-DS。

PS/ 如果您正在编写基于 BWT 的压缩器，请多注意编码 BWT 的输出而不是 BWT 本身，因为有许多用于 BWT 转换的实用库，并且它们中的大多数共享相同的接口。只需在您的项目中使用其中之一。

# gwt - GWT DragStartEvent 与 MouseDownEvent

> ID：15728463
> 
> 赞同：0
> 
> 时间：2013-03-31T10:24:50.630
> 
> 标签：gwt, drag-and-drop

我使用普通的传统 GWT DnD 而不是 gwt-dnd 库（因为我不需要 DnD 小部件，而是普通数据，所以我想保持简单）。
我可以使用源的 Image 小部件来实现它。
然后我切换到 HTML 小部件，但拖动不起作用：没有错误没有什么，只是拖动不再拖动。
代码（问题在于拖动部分，我在下面仅列出这部分代码）：

```
HTML theWidget = new HTML("some string");  // NOK : doesn't drag
// Image theWidget = new Image ("path/image.png");  // OK : does drag

theWidget.addDragStartHandler(new DragStartHandler() {  
        public void onDragStart(DragStartEvent event) {  
            event.setData(data, "some data" );  
        }  
}); 
```

怎么了 ？
看起来没有 DragStartEvent 因为在我单击拖动并将鼠标移动到放置目标后，浏览器会选择介于两者之间的内容（拖动开始到放置目标）。

为了调查，我添加了一个 MouseDownHandler，并且确实触发了一个 MouseDownEvent。

所以问题是：如何控制在 DragStartEvent 和 MouseDownEvent 之间触发哪个事件 GWT ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:12:15.670

假设您的最终目标是`HTML`使用本机`GWT`拖放支持（映射`HTML5 API`）拖放小部件，那么您缺少一些让事情正常工作的部分。你必须：

*   制作元素`draggable`（在您的代码中看不到它）：

    ```
    theWidget.getElement().setDraggable(Element.DRAGGABLE_TRUE) 
    ```

*   将 a 添加`DragStartHandler`到元素并设置要传输的数据（就像您所做的那样）：

    ```
    theWidget.addDragStartHandler(new DragStartHandler() {
      public void onDragStart(DragStartEvent event) {
        event.setData(data, "some data" );
      }
    }); 
    ```

*   将 a 添加`DragOverHandler`到元素目标，这将是要放置的元素：

    ```
    targetWidget.addDragOverHandler(new DragOverHandler() {
      public void onDragOver(DragOverEvent event) {
        // Some kind of effect, if you like.
      }
    }); 
    ```

*   将 a 添加`DropHandler`到同一元素目标，阻止默认浏览器操作，并检索数据：

    ```
    targetWidget.addDropHandler(new DropHandler() {
      public void onDrop(DropEvent event) {
        event.PreventDefault();
        String data = event.getData("data");  
      }
    }); 
    ```

# c# - 记录的代表

> ID：15728464
> 
> 赞同：0
> 
> 时间：2013-03-31T10:24:51.097
> 
> 标签：c#, .net, logging, delegates, refactoring

如何重构这段代码？

```
ulong get_item_action_id = log.LogAction(iteration_id, "GET_ITEM_SERVICE");
try
{
    p = serv.GetItemById(get_item_action_id, ls.externalItem.item);
}
catch (Exception exc)
{
    log.LogActionResult(get_item_action_id, false, exc);
    continue;
}
log.LogActionResult(get_item_action_id, true); 
```

这里的场景是：

1.  记录尝试获取操作并检索记录的操作 id ( `ulong get_item_action_id = log.LogAction(iteration_id, "GET_ITEM_SERVICE");`)
2.  正确地，行动 ( `p = serv.GetItemById(get_item_action_id, ls.externalItem.item);`)
3.  记录成功或失败结果（`log.LogActionResult(get_item_action_id, false, exc);`或`log.LogActionResult(get_item_action_id, true);`）

所以，我想我可以使用一些代表来重写它，但是如何呢？

# facebook - 使用 API 发布更大的 URL 缩略图

> ID：15728466
> 
> 赞同：1
> 
> 时间：2013-03-31T10:25:27.603
> 
> 标签：facebook, facebook-graph-api

最近，Facebook 为发布的链接引入了更大的缩略图。它在[这篇文章](http://www.insidefacebook.com/2013/01/14/facebook-gives-links-more-prominence-in-news-feed-with-3x-larger-image-preview/)中有所描述。

但是当我通过 Graph API 发布到 Facebook 时，它会创建小的缩略图，尽管我提交的图像大于 154x154 像素。直接通过网络界面发布有效，但我无法通过 API 使其工作。

有人知道是否可以通过 API 发布带有更大缩略图的链接？如果可能的话，怎么做？

谢谢。

# c++ - 使用 pThreads 在线程之间共享 3D 数组

> ID：15728467
> 
> 赞同：1
> 
> 时间：2013-03-31T10:25:46.903
> 
> 标签：c++, c, parallel-processing, pthreads

我是并行编程的新手，我正在尝试使用 pThreads 并行化应用程序。我有一个函数可以浏览 3D 数组，计算一些东西并将结果存储到另一个 3D 数组中。该函数使用两个 for 循环遍历数组（第三维是 2）。

`i`我的想法是在不同线程之间共享周围的 for 循环（带有索引）。这是我要并行化的函数：

```
#define MAX_X 100
#define MAX_Y 100

void serialFunction(float v1[MAX_X][MAX_Y][2], float v2[MAX_X][MAX_Y][2]) {
     int i,j;
     for(i=0;i<MAX_X;i++) {
         for(j=0;j<MAX_Y;j++) {
            v2[i][j][0] = 2*v1[i][j][1];
            v2[i][j][1] = -3*v1[i][j][0];
         }
     }
} 
```

我试图做出这些改变：

```
struct thread_data {
  int start;
  int end;
  float ***v1;
  float ***v2;
};

void serialFunction(float v1[MAX_X][MAX_Y][2], float v2[MAX_X][MAX_Y][2]) {
   int t;
   pthread_t threads[NB_CPUS];
   int startBoundaries[NB_CPUS], endBoundaries[NB_CPUS];
   struct thread_data data[NB_CPUS];
   computeBoundaries(startBoundaries, endBoundaries);
   for(t=0;t<NB_CPUS;t++) {
      data[t].start = startBoundaries[t];
      data[t].end = endBoundaries[t];
      data[t].v1 = (float***)v1;
      data[t].v2 = (float***)v2;
      pthread_create(&threads[t], NULL, threadedFunction, (void*)&data[t]);
   }
}

void *threadedFunction(void *threadArg) {
   struct thread_data *data = (struct thread_data*)threadArg;
   float ***v1 = data->v1;
   float ***v2 = data->v2;
   int i,j;

   for(i=data->start;i<data->end;i++) {
      for(j=0;j<PIC_Y;j++) {
         v2[i][j][0] = 2*v1[i][j][1];
         v2[i][j][1] = -3*v1[i][j][0];
   }
} 
```

问题是，当我运行代码时，每次`threadedFunction`尝试访问`v1`. 它的行为好像`v1`不会被分配，我不明白为什么。这种情况即使`serialFunction`没有走到尽头也会发生。

限制是我不能更改`serialFunction`签名，我必须使用 pThreads。

谁能解释我做错了什么？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:31:55.630

您传递给线程的数据是为函数创建的本地/自动数据`serialFunction()`。您将指向此数据的指针作为参数传递给线程函数。函数退出时数据不保证存在。请注意，在线程函数中访问数据***之前***`serialFunction()`，您的代码中没有任何内容会停止退出。如果在通过 in 指针访问数据之前退出，你得到的是未定义的行为和你现在遇到的情况。*`threadedFunction()``serialFunction()``threadedFunction()`*

 *解决方案是：

*   `serialFunction()`通过使用类似`pthread_join`或的东西来延迟函数的退出
*   在静态/全局/动态存储上分配数据，以将其生命周期与函数范围分离。*

# sql - 在sql查询中用逗号分割字符串

> ID：15728468
> 
> 赞同：0
> 
> 时间：2013-03-31T10:26:04.643
> 
> 标签：sql, split

在 SQL 中用逗号分割字符串并将它们存储为 split_item1、split_item2 和

```
select column_name from table-name where column_name = 'split_item1' or split_item2' 
```

请为此发布正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:32:14.890

假设您正在使用`SQL Server`，您需要`,`从列的两侧连接，以便您可以匹配您正在搜索的值。

```
SELECT  *
FROM    TableName
WHERE   ',' + csvColumn + ',' LIKE '%,' + 'split_item1' + ',%' OR
        ',' + csvColumn + ',' LIKE '%,' + 'split_item2' + ',%' 
```

`CONCAT()`对于 MySQL，`||`对于 Oracle ，每个 dbms 的连接符号都不同。

*   [SQL Server 的 SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e104c/2)
*   [MySQL 的 SQLFiddle 演示](http://www.sqlfiddle.com/#!2/eab64/3)
*   [Oracle 的 SQLFiddle 演示](http://www.sqlfiddle.com/#!4/16f8b/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T19:58:46.870

您可以使用以下代码（为 sqlserver 创建）。

```
Create Function FUN_STRING_SPLIT(@text varchar(max), @separator varchar(10))
Returns @Result Table 
(
   POSITION INT IDENTITY(1,1) NOT NULL, VALUE VARCHAR(max) 
)
As 
Begin
    Declare @ini int = 1, @end int = 0

    While @end <= LEN(@text)
    Begin
        if @end > 0 set @ini = @end + LEN(@separator)
        if @ini > 0 set @end = CHARINDEX(@separator, @text, @ini)
        if @end = 0 set @end = LEN(@text) + 1

        Insert Into @Result (VALUE) Values (SUBSTRING(@text,@ini,@end - @ini))
    End
    Return
End 
```

然后像这样使用：

```
Select * From FUN_STRING_SPLIT('Word1,Word2,Word2,Etc..', ','); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T09:10:53.963

select * from fromSplitStringSep('Word1 wordr2 word3',' ')

```
CREATE function [dbo].[SplitStringSep] 
    (
        @str nvarchar(4000), 
        @separator char(1)
    )
    returns table
    AS
    return (
        with tokens(p, a, b) AS (
            select 
                1, 
                1, 
                charindex(@separator, @str)
            union all
            select
                p + 1, 
                b + 1, 
                charindex(@separator, @str, b + 1)
            from tokens
            where b > 0
        )
        select
            p-1 zeroBasedOccurance,
            substring(
                @str, 
                a, 
                case when b > 0 then b-a ELSE 4000 end) 
            AS s
        from tokens
      ) 
```

# javascript - 如何使用 bootstrap modal 编辑 MVC 中的表格数据？

> ID：15728474
> 
> 赞同：13
> 
> 时间：2013-03-31T10:27:01.857
> 
> 标签：javascript, jquery, asp.net-mvc, razor, twitter-bootstrap

我在 MVC 视图中有一个显示员工详细信息的表。我想添加一个编辑功能，但我不想在新页面中打开它，而是想使用引导模式显示它。（[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)）

我认为我不必使用 ajax，因为数据已经在页面上可用。我想我需要一些 jquery 或 razor 代码将所选员工的数据传递给引导模式，并在同一屏幕上弹出它。下面是我的代码。任何帮助将不胜感激。谢谢

```
@Foreach(var item in Model.Employees)
{
<tr>
   <td>@User.Identity.Name
            </td>
            <td>@item.FirstName
            </td>....other columns
<td><a href="#myModal" role="button" class="btn" data-toggle="modal">Edit</a>
    <td>
    </tr>........other rows
}
**Bootstrap Modal**

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Edit Employee</h3>
  </div>

  <div class="modal-body">
    <p>Selected Employee details go here with textbox, dropdown, etc...</p>
  </div>

  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-31T10:37:43.160

确实有两种可能性：有或没有 AJAX。如果您想在没有 AJAX 的情况下执行此操作，您可以订阅编辑链接的单击事件，然后将表中的值复制到模态，最后显示模态。

所以首先给你的编辑链接一些类：

```
<a href="#" class="btn edit">Edit</a> 
```

您可以订阅：

```
$('a.edit').on('click', function() {
    var myModal = $('#myModal');

    // now get the values from the table
    var firstName = $(this).closest('tr').find('td.firstName').html();
    var lastName = $(this).closest('tr').find('td.lastName').html();
    ....

    // and set them in the modal:
    $('.firstName', myModal).val(firstName);
    $('.lastNameName', myModal).val(lastName);
    ....

    // and finally show the modal
    myModal.modal({ show: true });

    return false;
}); 
```

这假设您已经为`<td>`模态中的元素和输入字段提供了适当的 CSS 类。

* * *

如果你想使用 AJAX，你可以生成这样的链接：

```
@Html.ActionLink("Edit", "Edit", "Employees", new { id = employee.Id }, new { @class = "btn edit" }) 
```

然后你订阅这个按钮的点击事件并触发AJAX请求：

```
$('a.edit').on('click', function() {
    $.ajax({
        url: this.href,
        type: 'GET',
        cache: false,
        success: function(result) {
            $('#myModal').html(result).find('.modal').modal({
                show: true
            });
        }
    });

    return false;
}); 
```

您将在主视图中有一个简单的模态占位符，其中包含详细信息：

```
<div id="myModal"></div> 
```

将被命中的控制器操作应该使用 id 获取员工记录并将其传递给部分视图：

```
public ActionResult Edit(int id)
{
    Employee employee = repository.Get(id);
    EmployeeViewModel model = Mapper.Map<Employee, EmployeeViewModel>(employee);
    return PartialView(model);
} 
```

最后是相应的部分：

```
@model EmployeeViewModel

<div class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Edit Employee</h3>
    </div>
    <div class="modal-body">
        <div>
            @Html.LabelFor(x => x.FirstName)
            @Html.EditorFor(x => x.FirstName)
        </div>
        <div>
            @Html.LabelFor(x => x.LastName)
            @Html.EditorFor(x => x.LastName)
        </div>
        ...
    </div>
    <div class="modal-footer">
        <a href="#" class="btn btn-primary" data-dismiss="modal">Close</a>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

显然，您还需要将输入字段包装成一个`Html.BeginForm`允许您将更新的员工详细信息发送到服务器的字段。如果您想留在同一页面上，则可能还需要对此表单进行 AJAX 化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-20T15:11:53.593

{{!--如果你使用 laravel 5.8 那么你可以使用我的公式--}}

```
 <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead class=" text-primary">
                        <th>
                            Name
                        </th>
                        <th>
                            Designation
                        </th>
                        <th>
                            Avatar
                        </th>
                        <th class="text-right">
                            Action
                        </th>
                        </thead>
                        <tbody>
                        @foreach($ourTeams as $ourTeam)
                        <tr>
                            <td>
                                {{$ourTeam->name}}
                            </td>
                            <td>
                                {{$ourTeam->designation}}
                            </td>
                            <td>
                                @if(empty($ourTeam->avatar))
                                    <img  src="{{asset('avatar/logo.png')}}" width="100">

                                @else
                                    <img style="width: 100%"
                                         src="{{asset('uploads/avatar')}}/{{$ourTeam->avatar}}"
                                         width="100" height="200">
                                @endif
                            </td>
                            <td class="text-right">
                                <!-- Button trigger modal -->
                                <button type="button"  class="btn btn-info" data-toggle="modal" data-target="#editModal{{$ourTeam->id}}">
                                    Edit
                                </button>

                                <!-- Modal -->
                                <div class="modal fade" id="editModal{{$ourTeam->id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Edit Team</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                     <form action="" method="post" enctype="multipart/form-data">

                                            <div class="modal-body">
                                                @csrf

                                                <div class="form-group">
                                                    <label>Name:</label>
                                                    <input type="text"  class="form-control" value="{{$ourTeam->name}}" name="name" id="name">

                                                </div>

                                                <div class="form-group">
                                                    <label>Designation:</label>
                                                    <input type="text" class="form-control"  value="{{$ourTeam->designation}}" name="designation" id="designation">
                                                </div>

                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input" name="avatar" id="avatar"><br>
                                                    <label class="custom-file-label" for="avatar">Upload Photo</label>
                                                </div>

                                            </div >
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                <button type="submit" class="btn btn-primary">Save</button>
                                            </div>
                                       </form>
                                        </div>
                                    </div>
                                </div>
                               <a href="" class="btn btn-danger">Delete</a>
                            </td>
                        </tr>

                        @endforeach

                        </tbody>
                    </table>

                    {{$ourTeams->links()}}
                </div>
            </div> 
```

# android - 单击时如何使 ImageView 不可见

> ID：15728475
> 
> 赞同：0
> 
> 时间：2013-03-31T10:27:04.297
> 
> 标签：android

我是开发人员世界的新手，也是 eclipse IDE 的新手。我正在尝试创建一个简单的应用程序，当您单击图像时，单击的图像将变得不可见

这是java代码：

```
package com.example.capstone;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;

public class Levelone extends Activity implements OnClickListener
{

        Button nextlevel;
        Button Main;
        ImageButton eagle;

        protected void onCreate(Bundle onSavedInstanceState) {
        super.onCreate(onSavedInstanceState);
        setContentView(R.layout.levelone);
        nextlevel = (Button)findViewById(R.id.btnNextlvl);
        nextlevel.setOnClickListener(this);
        Main = (Button)findViewById(R.id.btnMain);
        Main.setOnClickListener(this);
        }

        @Override
        public void onClick(View arg0) {
                // TODO Auto-generated method stub
                if(arg0.getId()==R.id.imgEagle)
                {
                        eagle = (ImageButton)findViewById(R.id.imgEagle);
                eagle.setVisibility(View.GONE);
                }

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:31:26.477

您没有将`click`事件绑定到图像。

```
 eagle.setOnClickListener(this); 
```

使用`findById`in`onCreate`来`Main`定位`eagle`. 其余代码应该保持不变，尽管不需要`findById`再次使用，您可以使用或参考。`onClick``(ImageButton) arg0``eagle`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:35:56.970

把`onCreate`这个

```
eagle = (ImageButton)findViewById(R.id.imgEagle);
eagle.setOnClickListener(this); 
```

您忘记`eagle`使用布局中的适当小部件定义按钮，并且没有将`click`事件处理程序附加到`eagle`.

并且在`onClick`

```
@Override
public void onClick(View arg0) {
    switch(arg0.getId()){
        case R.id.imgEagle:
            eagle.setVisibility(View.GONE);
        break;

        case R.id.btnMain:
            //do something else
        break;

        case R.id.btnNextlvl:
            //do something else     
        break;  
    }
} 
```

`switch`用它来避免`if-else`语句的数量是很好的。它也使代码更具可读性。

# c# - Entity Framework Code First 属性的名称与约定不同

> ID：15728479
> 
> 赞同：1
> 
> 时间：2013-03-31T10:27:48.233
> 
> 标签：c#, entity-framework-4

我首先使用实体​​框架代码进行了以下设置：-

```
public Player
{
    [Key]
    public int PlayerId { get; set; }

    public int? ClubId { get; set; }
    public virtual Club Club { get; set; }
}

public class Club
{
    public int ClubId { get; set; }

    public string Name { get; set; }
} 
```

我想将“Player”类中的属性“Club”重命名为“CurrentClub”，因为它在我的应用程序中更有意义，但是这会失败，因为它不遵循 EF 开箱即用的命名约定。

如何成功重命名该属性？

从我所见，我认为我可以使用 [ForeignKey("Name")] 属性，但是我找不到它的参考。我可以看到帖子说它已经移动了命名空间......但我仍然找不到它。我正在使用 .NET 4.0，但在我的机器上安装了 .NET 4.5。

ForeignKey 属性是正确的方法，还是我需要做一些模型绑定？如果是这样，我需要什么？

# mysql - 如何从不同的表中获取值并将其传递给触发器？

> ID：15728480
> 
> 赞同：2
> 
> 时间：2013-03-31T10:27:53.673
> 
> 标签：mysql, sql, database, stored-procedures, triggers

我有 3 张桌子：

```
event:
---------------------
event_id | uid | date
---------------------

event_invitees
----------------------
invitees_id | event_id
---------------------- 

notification
-----------------
uid | invitees_id
----------------- 
```

我创建了一个触发器，它将在插入“event_invitees”后插入“通知”表

```
delimiter |
create trigger eventNotificationTrigger after insert on event_invitees
for each row 
begin
declare id int(12);
set id = (select uid from event where event_id=new.event_id);
insert into notification (invitees_id,uid) select invitees_id,@id from event_invitees where event_id=new.event_id;
end;
| 
```

但它无法从事件表中获取 uid。那么如何从不同的表中获取不同的值并将它们插入到触发器中的一个表中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:54:21.750

去除那个`@`

```
insert into notification (invitees_id,uid) 
select invitees_id, @id from event_invitees where ...
                    ^-------------------------------------here 
```

您创建的变量`declare`不会被`@`. 只有你创建的那个`set`。例子：

```
declare id int(12);
select 1 into id;
select id;

set @id = (select 1);
select @id; 
```

# windows - Windows CE 的汇编语言

> ID：15728481
> 
> 赞同：2
> 
> 时间：2013-03-31T10:28:29.357
> 
> 标签：windows, assembly, windows-ce

如何用汇编语言为 Windows CE (x86) 编写程序？现在我正在使用 VS2008 winth Windows CE 5.0 SDK，我的 C++ 程序运行良好。我尝试使用我的代码创建一个 asm 文件并将其包含到项目中：

```
#include "stdafx.h"
#include "windows.h"
extern "C" void clear(); 

int _tmain(int argc, _TCHAR* argv[])
{
    clear(); 
    return 0;
} 
```

清除.asm：

```
.586              ;Target processor.  Use instructions for Pentium class machines
.MODEL FLAT, C    ;Use the flat memory model. Use C calling conventions
.STACK            ;Define a stack segment of 1KB (Not required for this example)
.DATA             ;Create a near data segment.  Local variables are declared after
                  ;this directive (Not required for this example)
.CODE             ;Indicates the start of a code segment.

clear PROC
   xor eax, eax 
   xor ebx, ebx 
   ret 
clear ENDP 
END 
```

一切都很好，直到我想调用 WinApi 函数（MessageBox）表单 asm 代码。

```
 .DATA ;Create a near data segment. Local variables are declared after

    szMessageText       DB  "Hello world text", 0
    szMessageCaption    DB  "HWorld capt, 0

    .CODE ;Indicates the start of a code segment.
    clear PROC
    Invoke MessageBox, NULL, ADDR szMessageText, ADDR szMessageCaption, MB_OK
    clear ENDP
    END 
```

它给

> 错误 A2006：未定义符号：MessageBox

我为 MASM 添加了包含路径和 Windows CE SDK 库：

C:\Program Files\Windows CE 工具\wce500\STANDARDSDK_500\Lib\x86

并尝试包含coredll.lib，但没有效果

```
includelib coredll.lib 
```

所以主要问题是： **我的错误在哪里？我可以用winapi函数编写asm代码吗？**

**谢谢你的回答！**

**-----------------------------------------------------------**

**UPD：** 谢谢大家。我设法通过编写函数的原型定义来构建项目：

> MessageBoxW PROTO hwnd:DWORD, lpText:DWORD, lpCaption:DWORD, uType:DWORD

如何避免为我将使用的每个函数编写这样的原型？据我了解，我需要带有原始功能定义的 .inc 文件吗？或者以某种方式使用 .h 文件中的函数定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:09:07.283

```
Invoke MessageBox, NULL, ADDR szMessageText, ADDR szMessageCaption, MB_OK 
```

winapi 中没有名为 MessageBox 的函数。MessageBoxA 是一个采用 8 位编码字符串的传统函数，而 MessageBoxW 是一个采用 utf-16 编码字符串的函数。当您用 C 编写代码时，这通常是不可见的，预处理器会根据您是否定义了 UNICODE 预处理器符号自动翻译函数名称。

当您在汇编中编写代码时没有这样的帮助，您必须自己选择正确的名称。顺便说一句，实际上不确定 Windows-CE 是否仍支持旧功能，您很快就会发现。背景资料 MSDN 文章[可在此处获得](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317766%28v=vs.85%29.aspx)。

# php - 多维数组？根据同一数组中的值在项目上切换颜色（在数组中）

> ID：15728484
> 
> 赞同：0
> 
> 时间：2013-03-31T10:29:17.103
> 
> 标签：php, javascript, multidimensional-array

我正在寻找一种解决方案来切换循环中循环出的项目的颜色`foreach`。根据颜色的值，所有项目都应具有不同的颜色。

蓝色应该被给予 2 次，而黄色应该被给予 5 次 - 在一个序列中。

```
$colors = array
  (
  array("blue", 2),
  array("yellow", 5),
  array("green",4)
  );

foreach($colors as $color){
    foreach($color as $item){
        $colorClass = $item;
        echo $colorClass;
        //outputs blue8yellow12green16

    }
} 
```

我希望输出为：

```
blue
blue
yellow
yellow
yellow
yellow
yellow
green
green
green
green 
```

有没有办法做到这一点？我愿意在 php 或 javascript/jquery 中解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:33:55.480

一个简单的解决方案可能是这样的：

```
$colors = array
  (
  array("blue", 2),
  array("yellow", 5),
  array("green",4)
  );

foreach($colors as $color){

    $colorClass = $item[0];
    $colorCount = $item[1];
    for($i=0; $i<$colorCount; $i++) {
      echo $colorClass;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:44:03.783

这是一些javascript：

```
var colors = [["blue",2],["yellow",5],["green",4]];
var colorClass = [];
for (var i = 0; i < colors.length; i++) {
    for (var g = 0; g < colors[i][1]; g++) {
        colorClass.push(colors[i][0]);
    }
}
output -> ["blue", "blue", "yellow", "yellow", "yellow", "yellow", "yellow", "green", "green", "green", "green"] 
```

这段代码的好处是你可以在不改变算法的情况下添加更多颜色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:55:11.243

如果您只想打印出字符串序列，请使用`string_repeat`：

```
foreach($colors as $color){
    echo str_repeat($color[0] . "\n", $color[1]);
} 
```

如果你想用颜色名称做一些事情，你可以坚持一个`for`循环：

```
foreach($colors as $color){

    for($i = 0; $i<$color[1]; $i++){

        // do stuff with $color[0] here
        // this loop will go on for $color[1] times

    }

} 
```

# mercurial - 在中间使用 Tortoise-Hg 中止克隆[命令返回代码 255]

> ID：15728490
> 
> 赞同：2
> 
> 时间：2013-03-31T10:30:47.177
> 
> 标签：mercurial, tortoisehg, codeplex

我正在使用Tortoise [-Hg](http://tortoisehg.bitbucket.io/download/)从[CodePlex](http://nearforums.codeplex.com/SourceControl/changeset/view/c1f7efa1d5b1)**克隆一个 fork**并**在过程中间停止克隆**。我已经尝试了**6**次以上，它确实有问题。

 ****我正在使用**Tortoise-Hg 的可视化客户端，**我将源作为`https://hg.codeplex.com/forks/xxx/xxxx`并选择了一个目的地

首次使用**压缩**方法

这是命令提示符中出现的内容

```
 % hg clone --verbose -- https://hg.codeplex.com/forks/xxx/xxxx xxxx 
```

但是这个过程开始得很快，然后就挂断了。

```
requesting all changes
adding changesets[Happen Fast]
adding manifests[Happen Fast]
adding file changes[Hangs in the middle]
transaction abort!
rollback completed
abort: stream ended unexpectedly (got 147721 bytes, expected 422805)
[command returned code 255 Sun Mar 31 15:52:26 2013] 
```

然后我尝试**了未压缩的**方法

```
 % hg clone --uncompressed --verbose -- https://hg.codeplex.com/forks/xxx/xxxx xxxx 
```

这也停止在过程的中间。

```
streaming all changes
4033 files to transfer, 37.2 MB of data
abort: unexpected response from remote server: empty string
[command returned code 255 Sun Mar 31 15:22:44 2013] 
```

我第 7 次尝试了它，它比以前的尝试要多得多，但得到了更多的字节`got 74673 bytes, expected 256973`

这有什么问题，我之前使用相同版本的 Tortoise-Hg 克隆[CodePlex](http://nearforums.codeplex.com/SourceControl/changeset/view/c1f7efa1d5b1)项目。这是非常耗时的。我在做什么有问题吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T19:38:27.730

我设法进行了克隆，原因是 Internet 连接。在最初的尝试中，互联网对我来说很沉重。这就是造成问题的原因。现在，由于互联网连接速度非常快，克隆工作正常。没有绞刑。如果您面临同样的问题，基本检查是一个良好的互联网连接。希望这会对某人有所帮助。

编辑：这又发生在我身上，但这次我尝试使用命令提示符进行克隆。它也工作得很好。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T20:39:35.993

对于遇到此问题的任何其他人，我在我们的内部 Mercurial 服务器（不是 CodePlex）上遇到了这个问题并修复了它。

我们的设置是使用在 IIS 下运行的[HgWeb在 Windows Server 2008 R2 上运行的 Mercurial。](https://www.mercurial-scm.org/wiki/HgWebInIisOnWindows)我们遇到的问题是 CGI 超时。克隆我们的整个存储库超过了 CGI 的 15 分钟默认超时。解决方法是增加超时。这可以在 IIS 管理器中完成。

1.  打开 IIS 管理器
2.  选择网站
3.  打开 CGI 面板
4.  编辑超时
5.  单击应用
6.  为网站重新启动池

如果 Internet 性能是 CodePlex 的一个因素，我猜类似的超时是罪魁祸首。****

# mysql - MyISAM 表在全文搜索方面优于 InnoDB 表

> ID：15728493
> 
> 赞同：0
> 
> 时间：2013-03-31T10:31:46.790
> 
> 标签：mysql, full-text-search, innodb, myisam

在 MyISAM 和 InnoDB 表之间，哪个更适合全文搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:50:47.240

Innodb 是一个更好的选择，因为 MYISAM 是一个非常老的引擎，并且会在不久的将来消失。您可以使用 Innodb 查看 sphinx，或者只是迁移到 MYSQL 的新稳定版本 MYSQL 5.6，以利用新的 Innodb 全文搜索功能，它与 sphinx 相当。

# ios - managedObjectContext 没有为第一个 ViewController 做好准备

> ID：15728500
> 
> 赞同：0
> 
> 时间：2013-03-31T10:32:37.200
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我正在使用 CoreData，虽然我在 AppDelegate 的“willFinishLaunchingWithOptions”中实例化了我的 managedObjectContext，但是当我的第一个 ViewController 加载时它还没有准备好并且我的应用程序崩溃了。

如果我将一个不使用 managedObjectContext 的 VC 设置为 root，然后转到使用它的 VC，它就可以工作。我真的不知道该怎么做，因为“willFinishLaunchingWithOptions”是我能得到的最早的。

这是初始化 managedObjectContext 的代码

```
-(void)useDocument
{
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"EtaxiDocument"];
    UIManagedDocument *document = [[UIManagedDocument alloc]initWithFileURL:url];
    self.document = document;

    if ( ! [[NSFileManager defaultManager] fileExistsAtPath:[url path]])
    {
        NSLog(@"doc no");
        // If the document does not exist, create it
        [document saveToURL:url
           forSaveOperation:UIDocumentSaveForCreating
          completionHandler:^(BOOL success) {
              if (success)
              {
                  self.managedObjectContext = document.managedObjectContext;
                  NSLog(@"Document created");
              }
          }
        ];

    } else if ( document.documentState == UIDocumentStateClosed ) {
        NSLog(@"doc yes");
        // If the document exists but is closed, open it
        [document openWithCompletionHandler:^(BOOL success) {
            if (success)
            {

                self.managedObjectContext = document.managedObjectContext;
                NSLog(@"Document opened");
            } else { NSLog(@"error op doc"); }
        }];
    } else {
        NSLog(@"doc open");
        // If the document is already open, try to use it
        self.managedObjectContext = document.managedObjectContext;
    }
} 
```

# asp.net - 在服务器上安装 MS SQL 数据库

> ID：15728502
> 
> 赞同：2
> 
> 时间：2013-03-31T10:32:49.630
> 
> 标签：asp.net, .net, sql-server, sql-server-2008, c#-4.0

我想在 .NET 中创建一个应用程序以在服务器上安装 MS SQL 数据库。我有完整的数据库和所有的表和存储过程。

这就是它的工作方式：基本上，用户将选择服务器名称，输入他的 ID 和密码，然后从列表中选择一个数据库。在此之后，安装程序会在数据库中安装所有表和存储过程。

如果你们中的任何人使用.NET 成员资格，我想要一个类似于 ASP.NET SQL Server 注册工具 (Aspnet_regsql.exe) 的工具。

我开发 asp.net 网站，但不知道如何开始开发此工具。我在网上搜索过，但想学习最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:54:31.457

这是我在 2005 年为此目的写的一篇旧文章[使用 Installer 类轻松部署 SQL Server 数据库](http://www.codeproject.com/Articles/10032/Deploy-SQL-Server-databases-easily-with-an-Install)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:11:25.487

看看这个链接。您可以创建成员资格表，并且必须在您的 webconfig 中调用此成员资格提供程序

[http://weblogs.asp.net/sukumarraju/archive/2009/10/02/installing-asp-net-membership-services-database-in-sql-server-expreess.aspx](http://weblogs.asp.net/sukumarraju/archive/2009/10/02/installing-asp-net-membership-services-database-in-sql-server-expreess.aspx)

[http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb)

# c++ - 在 Visual Studio 2008 中打开 AVI 视频

> ID：15728503
> 
> 赞同：1
> 
> 时间：2013-03-31T10:33:03.463
> 
> 标签：c++, visual-studio-2008, opencv, codec, avi

我有一个 AVI 视频，我想将其编解码器更改为 CVID，因为在 Visual Studio 中发生错误，只能打开具有此编解码器的视频

我们正在使用 opencv 2.1 打开 avi 视频，我们使用了 opencv 文件提供的视频，它可以工作，它的编解码器是 CVID

我们使用了很多类型的转换器，但它们的结果都不起作用我们还尝试将 avi 视频转换为不同的格式，然后转换回 avi，但它也不起作用

所以你能帮助我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:40:25.440

转换视频是一个相当复杂的过程。除非您能找到一些现成的代码，否则您将不得不解释 AVI 的每一帧。这意味着，读取 AVI 本身的标头格式，然后读取前 N 帧，并将帧馈送到使用 CVID 编码器的存储中。

这听起来很简单，但视频通常以复杂的压缩形式存储，您需要将其解压缩为适合 CVID 编码器的形式。

通常，视频帧由“关键帧”（几乎每个像素都在帧中）和“增量帧”组成，其中包含关键帧的“更新部分”），因此您需要了解它是哪种类型的帧.

显然，将其转换回 AVI 是相反的过程。

我不知道 AVI 的内部格式，也不知道 CVID 有什么不同。但我很确定最简单的方法是找到一些现有的软件来做到这一点。

# php - 如何在PHP中验证方程式字符串中的括号

> ID：15728506
> 
> 赞同：11
> 
> 时间：2013-03-31T10:33:18.367
> 
> 标签：php, string, validation, math

我在徘徊，如果有人擅长 PHP 可以建议如何验证表达式字符串中的括号，如下所示：

```
 ( 5 * 3 [ 6 ) - 6] 
```

这是错误的表达。我需要一个函数来做到这一点。这是我到目前为止所尝试的：

```
<?php
function hasMatchedParenthesis($string) {

$counter1 = 0;
$counter2 = 0;

$length = strlen($string);

for ($i = 0;$i < $length; $i++) {
    $char = $string[$i];
    if( $char == '(' ) {
        $counter1 ++;
    } elseif( $char == ')' ) {
        $counter1 --;
    }

        for($j =0;$j < $length; $j++) {
            $char = $string[$j];
            if( $char == '[' ) {
                $counter2 ++;
        } elseif( $char == ']' ) {
                $counter2 --;
        }

        }

    if( $counter1 < 0 || $counter2 < 0) {
        return false;
    }

}

echo 'ok';;

}

hasMatchedParenthesis('[5] * 3 - ( 4 - 7 * [3-6])'); // this is ok!

hasMatchedParenthesis('( 5 * 3 [ 6 ) - 6]'); // this returns as TRUE, but it is not!

?> 
```

请帮我解决“[6]”的验证问题！我不知道该怎么做:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T10:58:17.647

我想到的第一个想法是使用堆栈。PHP 提供了两个函数来将数组视为堆栈：`array_push`和`array_pop`. 我们可以使用它们创建一个堆栈`0`（我们在一个开头`(`）和`1`（我们在一个里面`[`），并检查右括号是否与我们插入的最后一个值匹配：

```
function hasMatchedParenthesis($string) {
    $len = strlen($string);
    $stack = array;
    for ($i = 0; $i < $len; $i++) {
        switch ($string[$i]) {
            case '(': array_push($stack, 0); break;
            case ')': 
                if (array_pop($stack) !== 0)
                    return false;
            break;
            case '[': array_push($stack, 1); break;
            case ']': 
                if (array_pop($stack) !== 1)
                    return false;
            break;
            default: break;
        }
    }
    return (empty($stack));
} 
```

请注意，您可以将其扩展到任何其他字符对，包括`{`and `}`：

```
case '{': array_push($stack, 2); break;
case '}': 
    if (array_pop($stack) !== 2)
        return false;
break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:48:56.527

验证此类语法规则的常用方法是使用[上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)- 查看[示例](http://en.wikipedia.org/wiki/Context-free_grammar#Well-formed_nested_parentheses_and_square_brackets)，您会发现您正在尝试做的确切示例:-) 您可以通过使用来应用此类语法的规则Mark Ba​​ker 指出的词法分析器。
在您的代码中，您只需要确保左括号的数量与右括号的数量相匹配，这就是缺陷。同样正如我在评论中指出的那样，您的最后一个条件应该是

```
if ($counter1 != 0 || $counter2 != 0){
    return false;
} 
```

在您当前的情况下`true`，当任何计数器为 时将返回`>=0`。尝试一个简单的 case ，即使它是错误的`hasMatchedParenthesis('[5] * 3 - ( 4 - 7 * [3-6');`也会返回。`true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T05:38:01.467

我写了以下实现。

```
function check_brackets_balance($string, $bracket_map = false) {
    $bracket_map = $bracket_map ?: [ '[' => ']', '{' => '}', '(' => ')' ];
    $bracket_map_flipped = array_flip($bracket_map);
    $length = mb_strlen($string);
    $brackets_stack = [];
    for ($i = 0; $i < $length; $i++) {
        $current_char = $string[$i];
        if (isset($bracket_map[$current_char])) {
            $brackets_stack[] = $bracket_map[$current_char];
        } else if (isset($bracket_map_flipped[$current_char])) {
            $expected = array_pop($brackets_stack);
            if (($expected === NULL) || ($current_char != $expected)) {
                return false;
            }
        }
    }
    return empty($brackets_stack);
} 
```

它也使用堆栈，但需要的代码更少，并且为您自己的括号集提供了额外的参数。

```
check_brackets_balance('[5] * 3 - ( 4 - 7 * [3-6])'); // true
check_brackets_balance('( 5 * 3 [ 6 ) - 6]')); // false 
```

# python - Vagrant、WSGI、virtualenv 和 TypeError：“模块”对象不可调用

> ID：15728508
> 
> 赞同：5
> 
> 时间：2013-03-31T10:33:26.857
> 
> 标签：python, apache, mod-wsgi, virtualenv, vagrant

我已经为我正在构建的应用程序配置了一个 vagrant box，但是在尝试让 Apache 为其提供服务时遇到了麻烦。

它为它的包使用了一个 virtualenv——现在这只是 Flask 和它的依赖项，这一切都很好。我可以通过 SSH 在环境中运行应用程序。该应用程序本身只是目前的[最小应用程序](http://flask.pocoo.org/docs/quickstart/#a-minimal-application)。

**阿帕奇错误**

```
[Sun Mar 31 10:06:54 2013] [error] [client 10.0.2.2] mod_wsgi (pid=1587): Exception occurred processing WSGI script '/vagrant/myapp/myapp.wsgi'.
[Sun Mar 31 10:06:54 2013] [error] [client 10.0.2.2] TypeError: 'module' object is not callable 
```

**文件**

```
/vagrant
├── env
└── myapp
    ├── app.py
    └── myapp.wsgi 
```

**我的应用程序.wsgi**

```
activate_this = '/vagrant/env/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this))

import sys
sys.path.insert(0, '/vagrant/myapp')

import app as application 
```

**默认站点虚拟主机**

```
<VirtualHost *:80>

        WSGIDaemonProcess myapp user=www-data group=www-data threads=5
        WSGIScriptAlias / /vagrant/myapp/myapp.wsgi

        <Directory /vagrant/myapp>
                WSGIProcessGroup myapp
                WSGIApplicationGroup %{GLOBAL}
                Order deny,allow
                Allow from all
        </Directory>

        ErrorLog /var/log/apache2/error.log

</VirtualHost> 
```

我尝试使用用户和组运行 Apache，并将`vagrant`站点包和应用程序目录更改为`www-data`. 我还尝试将 WSGIDaemon 用户和组更改为 vagrant。

我尝试将站点包添加到路径中，并且尝试添加`__init__.py`到 myapp 并更改`myapp.wsgi`为`from myapp import app as application`.

该应用程序可以运行`source ../env/bin/activate && python app.py`。

我难住了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T14:28:48.100

我遇到的问题在 wsgi 文件中，因为我正在导入应用程序包而不是其中的类（因为它们的名称相同而被发现。）

```
activate_this = '/vagrant/env/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this))

import sys
sys.path.insert(0, '/vagrant/myapp')

from app import app as application 
```

请注意，最后一行已从`import app as application`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:06:36.387

可能出现这个问题是因为您使用共享文件夹作为应用程序源代码的存储空间，该文件系统的行为与普通 ext3/4 有点不同，因此 Apache 和/或`chown`在涉及到更多问题时会遇到问题文件复制...

编辑：虽然我只是一个 python 初学者，但[TypeError: 'module' object is not callable](https://stackoverflow.com/questions/4534438/typeerror-module-object-is-not-callable)可以帮助你解决问题

# .net - 为什么 UPX 不适用于 .NET 可执行文件？

> ID：15728510
> 
> 赞同：3
> 
> 时间：2013-03-31T10:33:38.093
> 
> 标签：.net, compression, executable, portable-executable

如果 .NET 可执行文件是 PE 文件，为什么所有像 UPX 这样的打包程序都会“破坏”它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T12:37:46.413

UPX 专为*本地*应用程序而设计。这些是直接编译为机器代码的应用程序。

针对 .NET Framework 的可执行文件不是本机应用程序，而是*托管*应用程序。换句话说，它们在运行时环境（公共语言运行时，或 CLR）之上运行，并被编译成“中间语言”（IL），直到运行时才编译成机器语言（这个过程称为 JIT，或即时编译）。

UPX 可以直接处理非托管机器代码，但它不适用于托管应用程序。如果应用程序的代码被压缩并因此不可读，JIT 编译器将如何即时编译应用程序的代码？它不会；它会看到文件已损坏。

不过损失不大。今天，压缩可执行文件的缺点多于优点。除此之外，由于托管应用程序被编译为 IL，它们通常比同等的非托管应用程序更小。

# macos - 在 Mac OS X 上使用 AudioUnit 检测扬声器/耳机

> ID：15728513
> 
> 赞同：0
> 
> 时间：2013-03-31T10:34:20.570
> 
> 标签：macos, audio, audiounit, headset, speaker

使用 AudioUnit 和 kAudioUnitSubType_HALOutput 如何检测输出是扬声器还是耳机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:30:09.400

```
bool usingInternalSpeakers()
{
    AudioDeviceID defaultDevice = 0;
    UInt32 defaultSize = sizeof(AudioDeviceID);

    const AudioObjectPropertyAddress defaultAddr = {
        kAudioHardwarePropertyDefaultOutputDevice,
        kAudioObjectPropertyScopeGlobal,
        kAudioObjectPropertyElementMaster
    };

    AudioObjectGetPropertyData(kAudioObjectSystemObject, &defaultAddr, 0, NULL, &defaultSize, &defaultDevice);

    AudioObjectPropertyAddress property;
    property.mSelector = kAudioDevicePropertyDataSource;
    property.mScope = kAudioDevicePropertyScopeOutput;
    property.mElement = kAudioObjectPropertyElementMaster;

    UInt32 data;
    UInt32 size = sizeof(UInt32);
    AudioObjectGetPropertyData(defaultDevice, &property, 0, NULL, &size, &data);

    return data == 'ispk';
}

int main(int argc, const char * argv[])
{

    if (usingInternalSpeakers())
        printf("I'm using the speakers!");
    else
        printf("i'm using the headphones!");
    return 0;
} 
```

# php - PHP登录系统错误

> ID：15728515
> 
> 赞同：-5
> 
> 时间：2013-03-31T10:34:27.817
> 
> 标签：php, syntax-error

我正在尝试创建一个登录系统，但由于某种原因，我的代码中有一个错误，我似乎无法弄清楚它是什么。

```
 <?php
include "connect.php";
?>

<body>
<?php
if(isset($_POST['submit'])){
$username = $_POST['email'];
$password = $_POST['password'];

$result = mysql_query($con,"SELECT * FROM users WHERE username=$username AND password=$password");
$num = mysql_num_rows($result);
if($num == 0){
echo "Bad login, go <a href='login.php'>back</a>.";
}else{
session_start();
$_SESSION['username'] = $username;
header("Location: index.php");
}
}
?>

    <div class="container">
      <form action='signin.php' method='POST' class="form-signin" >
        <h2 class="form-signin-heading">Please sign in</h2>
        <input type="text" class="input-block-level" placeholder="Email address" name="email">
        <input type="password" class="input-block-level" placeholder="Password" name="password">
        <label class="checkbox">
          <input type="checkbox" value="remember-me"> Remember me
        </label>
        <button class="btn btn-large btn-primary" type="submit" name="submit" value="Login">Sign in</button>
      </form> 
```

这些是提交时的错误：

```
Warning: mysql_query() expects parameter 1 to be string, object given in C:\xampp-portable\htdocs\bootstrap\signin.php on line 71

Warning: mysql_num_rows() expects parameter 1 to be resource, null given in C:\xampp-portable\htdocs\bootstrap\signin.php on line 72
Bad login, go back. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:39:20.637

1) 你混淆了 mysql & mysqli 查询。这是

```
$result = mysql_query("SELECT * FROM users WHERE username='$username' AND password='$password'");
and
$result = mysqli_query($con,"SELECT * FROM users WHERE username='$username' AND password='$password'"); 
```

2）这段代码对sql注入非常危险。在正式使用之前，您需要对其进行消毒。3)

```
for the success case, set a session id sth like that: $session_id = session_id(); 
reverse that:
$username=$_SESSION["username"]; 
and use both variables in redirection:
header ("Location: index.php?username=$username&session_id=$session_id"); 
```

# java - Android MediaPlayer 不显示视频，只播放视频文件的音频

> ID：15728516
> 
> 赞同：1
> 
> 时间：2013-03-31T10:34:31.037
> 
> 标签：java, android, android-mediaplayer

我正在尝试在我的 Android 应用程序中播放视频。但它只播放视频的音频，屏幕上不显示任何内容！

这是我的 java 活动文件：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        try {
            videoPlayer();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void videoPlayer() throws IllegalArgumentException, SecurityException, IllegalStateException, IOException{
        Uri myUri = Uri.fromFile(new File("/sdcard/sub_sda1/a.mpg"));
        MediaPlayer mediaPlayer = new MediaPlayer();
        SurfaceView mSurfaceView = (SurfaceView) findViewById(R.id.surface);
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setDataSource(getApplicationContext(), myUri);
        mediaPlayer.prepare();
        int videoWidth = mediaPlayer.getVideoWidth();
        int videoHeight = mediaPlayer.getVideoHeight();
        //Get the width of the screen
        int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
        //Get the SurfaceView layout parameters
        android.view.ViewGroup.LayoutParams lp = mSurfaceView.getLayoutParams();
        //Set the width of the SurfaceView to the width of the screen
        lp.width = screenWidth;
        //Set the height of the SurfaceView to match the aspect ratio of the video 
        //be sure to cast these as floats otherwise the calculation will likely be 0
        lp.height = (int) (((float)videoHeight / (float)videoWidth) * (float)screenWidth);
        //Commit the layout parameters
        mSurfaceView.setLayoutParams(lp);  
        mediaPlayer.start();
    }

} 
```

还有我的 xml 活动布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hamed" />

    <SurfaceView 
        android:id="@+id/surface" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:paddingTop="10dip" />

</RelativeLayout> 
```

我也查看了这些问题，但没有得到答案：

[Android MediaPlayer - 即使播放了音频，有时也没有播放视频](https://stackoverflow.com/questions/7509818/android-mediaplayer-sometimes-no-video-is-played-even-though-audio-plays)

[Android MediaPlayer 不显示视频，只播放音频](https://stackoverflow.com/questions/9014720/android-mediaplayer-does-not-display-video-only-play-audio)

[https://stackoverflow.com/questions/9302611/mediaplayer-only-playing-audio-not-audiovideo](https://stackoverflow.com/questions/9302611/mediaplayer-only-playing-audio-not-audiovideo)

我想我应该在 xml 活动布局中设置一些东西，但我没有这样做。你能告诉我你的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T11:02:09.813

尝试使用 VideoView

```
 videoView = (VideoView)findViewById(R.id.VideoView);        
 videoView.setVideoPath("/sdcard/your_video.3gp");
 videoView.start(); 
```

希望这会帮助你。

# algorithm - 细胞探针模型

> ID：15728520
> 
> 赞同：2
> 
> 时间：2013-03-31T10:35:14.730
> 
> 标签：algorithm

来自算法第 4 版

**问：什么是细胞探针模型？**
一种计算模型，我们只计算对足够大以容纳输入的随机存取存储器的访问，并认为所有其他操作都是免费的。

我想理解这个说法。请通过示例帮助我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:04:15.480

问题：确定输入中是否出现数字 0，它必须是一个排序列表 L。通过二分查找，cell-probe 复杂度*正好是*ceil(log2(len(L) + 1))，因为这是 L 的多少个元素我们必须看看。我们不需要 big-O 来说明这个结果，因为调度探测器的开销没有被计算在内。

问题：确定输入是否是可满足的布尔公式（SAT）。尽管这个问题是 NP 完全的，因此不知道是否有多项式时间算法，但我们确实知道单元探测复杂度最多为 n，因为一种算法是读取整个输入并进行指数时间计算这不会进行任何探测。

由于细胞探针模型允许不切实际的计算量，它几乎总是被用作不可能结果的设置，也就是说，即使我们拥有世界上所有的时间和空间，也没有算法可以访问少于这么多的输入。

# angularjs - AngularJS - 将元素附加到指令内的每个 ng-repeat 迭代

> ID：15728521
> 
> 赞同：3
> 
> 时间：2013-03-31T10:35:21.163
> 
> 标签：angularjs, directive, ng-repeat

我在`<tr>`元素内使用 ng-repeat 和指令。

html:

```
<tbody>
  <tr ng-repeat="row in rows" create-table>
    <td nowrap ng-repeat="value in row | reduceString>{{value}}</td>
  </tr>
</tbody> 
```

指示：

```
app.directive('createTable', function () {
        return {

            link: function (scope, element, attrs) {
                var contentTr = scope.$eval('"<tr ng-show=&quot;false&quot;><td>test</td></tr>"');
                $(contentTr).insertBefore(element);
            }
        }
    }
); 
```

尽管我可以`<tr>`在每次迭代中附加一个新元素，但在将 Angular 代码添加到 DOM 后（例如 ng-show 中的 ），我无法执行它`<tr>`。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T15:17:35.717

您没有在孩子体内获得 Angular 绑定的原因是**您缺乏[编译](http://docs.angularjs.org/api/ng.$compile)它**。当链接函数运行时，元素已经被编译，因此，Angular 增强了。您所要做的就是`$compile`手动处理您的内容。首先，不要评估您的模板，否则您将丢失绑定提示。

```
app.directive('createTable', function ($compile) {
  return {
    link: function (scope, element, attrs) {
      var contentTr = angular.element('<tr ng-show=&quot;false&quot;><td>test</td></tr>');
      contentTr.insertBefore(element);
      $compile(contentTr)(scope);
    }
  }
}); 
```

**另一个提示**：你永远不要将你的元素包含在 jQuery ($) 中。如果您的页面中有 jQuery，那么所有 Angular 元素都已经是 jQuery 增强元素。

最后，解决您需要的正确方法是使用指令`compile`函数（阅读[“编译过程和指令匹配”和“编译函数”](http://docs.angularjs.org/guide/directive)）在编译之前修改元素。

作为最后的努力，阅读整个[指令指南](http://docs.angularjs.org/guide/directive)，这是一个宝贵的资源。

# c++ - 如何通过 Code::Blocks 中的静态链接创建独立程序

> ID：15728526
> 
> 赞同：3
> 
> 时间：2013-03-31T10:36:17.130
> 
> 标签：c++, mysql, dll, static, static-libraries

我想独立运行我的程序。它是使用 libmysql.lib 与 MySQL 的简单连接，并且需要 libmysql.dll 才能运行（将其放在同一文件夹中）。现在我的问题是，我怎样才能在 c::b 中编译，这样我就可以在其他机器上使用我的可执行文件并且不需要 .dll？我听说过静态库，但我不知道它是如何工作的，所以如果有人能解释一下这个过程，那就太好了。

PS 我使用 GNU CC 编译器。

```
#include <iostream>
#include <winsock.h>
#include <mysql.h>

using namespace std;

int main() {

MYSQL *connect;
MYSQL_RES *res_set;
MYSQL_ROW row;
connect = mysql_init(NULL);

connect = mysql_real_connect(connect, "HOST", "USER", "PASS", "Server", 3306, NULL, 0);

while( true ) {
    mysql_query(connect, "SELECT * FROM Server");

    res_set = mysql_store_result(connect);

    while( row = mysql_fetch_row(res_set) ) {
        cout << row[0] << " " << row[1] << " " << row[2] << endl;
    }
    Sleep(2000);
}

mysql_close(connect);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:59:32.347

去`Project->Build Options->(Select project name)`。然后选择`Linker settings`并单击`Add`下的按钮`Link Libraries`，然后选择`libmysql.lib`。这应该静态编译你的程序，AFAIK。

有关更多信息，请参阅[MySQL 参考中的](http://dev.mysql.com/doc/refman/5.6/en/c-api-building-clients.html)**在 Microsoft Windows 上编译 MySQL 客户端**部分。

# android - 如何在应用程序的所有活动中播放音乐？

> ID：15728528
> 
> 赞同：1
> 
> 时间：2013-03-31T10:36:51.297
> 
> 标签：android, android-activity, android-mediaplayer

我想在我的应用程序的所有活动中播放音乐，但是当我按下按钮转到下一个活动音乐停止时，我使用`onPause()`了 onResume 并且它正常工作。我以其他方式写了这个，`onPause()`并且整个应用程序中都播放了音乐，但是当我按下主页按钮时，音乐并没有停止。我在主页按钮上使用了 KeyEvent，但没有任何反应，我用背面检查它并且它可以工作，但它不会最小化应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:39:41.087

最简单的解决方案是使用[Service](http://developer.android.com/reference/android/app/Service.html)。有关更多信息，请研究SDK 中提供的**MediaPlayer**示例应用程序。

# javascript - 在 where 子句中使用两个字段时的 Mongoose 转换问题

> ID：15728532
> 
> 赞同：0
> 
> 时间：2013-03-31T10:37:29.800
> 
> 标签：javascript, node.js, mongodb, mongoose

我仍在努力解决 mongoDB/mongoose 问题，但无法确定以下查询有什么问题；

```
Link
  .find()
  .where('active').equals(true)
  .where('access_count').gt(0).lte('access_limit')
  .limit(5)
  .sort('-created')
  .exec(function(err,latest) 
```

它返回以下转换错误；

```
CastError: Cast to number failed for value "access_limit" at path "access_count"
at SchemaNumber.cast 
```

这是由 .where('access_count').gt(0).lte('access_limit') 引起的，我认为这是由于比较了文档上的两个字段？是否有这样做的正确方法以及调试此类问题的任何建议？

作为参考，模式定义为；

```
var LinkSchema = new Schema({
 token: {type: String, unique: true, index: true, required: true }
 , title: {type: String}
 , url: {type: String, required: true}
 , active: {type: Boolean, default: true}
 , created: {type: Date, default: Date.now}
 , access_count: {type: Number, default: 0}
 , access_expiry: Date
 , access_limit: {type: Number, default: 0}
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:29:13.657

要将查询中的一个字段与另一个字段进行比较，您必须使用一个[`$where`](http://docs.mongodb.org/manual/reference/operator/where/#op._S_where)子句：

```
Link
  .find()
  .where('active').equals(true)
  .where('access_count').gt(0)
  .$where('this.access_count <= this.access_limit')
  .limit(5)
  .sort('-created')
  .exec(function(err,latest) 
```

`$where`可能会很慢，所以尽可能使用普通子句来减少需要执行`where`的文档数量。`$where`

# wpf - 如何处理在 WPF 的 MVVM 设计模式中关闭的 TabControl 选项卡

> ID：15728534
> 
> 赞同：3
> 
> 时间：2013-03-31T10:37:30.417
> 
> 标签：wpf

我有一个 TabControl

```
 <TabControl ItemsSource="{Binding TabItemsViewModelCollection}" 
        ContentTemplateSelector="{StaticResource TabControlTemplateSelector}"
                    SelectedItem="{Binding OpenedTab, Mode=TwoWay}" >
            <TabControl.ItemTemplate>
                <!-- this is the header template-->
                <DataTemplate>
                    <TextBlock
                Text="{Binding Header}" />
                </DataTemplate>
            </TabControl.ItemTemplate>
        </TabControl> 
```

每个选项卡都使用标题文本呈现，然后是关闭按钮。（不知道为什么我只在模板中指定了一个文本块时有一个关闭按钮）。

但是当我单击关闭按钮时，调试器会中断。我将如何正确处理标签的关闭。我有一个带有 TabViewModels 的 ObservableCollection。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:51:09.943

我正在使用[https://github.com/MahApps](https://github.com/MahApps)，它有一些我忽略的 TabControl 修改样式，这意味着添加了一个单击操作。

覆盖样式解决了这个问题。

# java - Synth 和 Nimbus 外观和感觉之间的区别

> ID：15728538
> 
> 赞同：0
> 
> 时间：2013-03-31T10:38:25.810
> 
> 标签：java, swing, look-and-feel, nimbus, synth

我一直在检查 java 桌面应用程序的外观，然后找到了外观`Synth`和`Nimbus`感觉

但我在这里有点困惑

有人可以告诉我：

*   两者的区别。

*   这更容易理解和实施。

*   以及哪一个呈现最好的界面

很高兴有示例的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:05:02.027

使用合成器外观，您可以通过 xml 文件提供您自己的自定义外观。前任：

```
 <imagePainter method="panelBackground" path="images/main-bg.png" sourceInsets="0 0 0 0" stretch="true"/>
</style>
<bind style="panelStyle" type="region" key="Panel"/>

 <style id="ProgressBarStyle">       
    <object id="progressbarPainter" class="com.poseidon.desktopframework.images.BackgroundPainter"></object>

    <state>           
        <font name="Verdana" size="14"/>  
        <color value="BLACK" type="TEXT_FOREGROUND"/>
        <painter method="progressBarBackground" idref="progressbarPainter"/>
        <painter method="progressBarForeground" idref="progressbarPainter"/>

        <!--            <imagePainter method="ArrowButtonBackground" path="images/dropdown-icon-big.png" center="true"/>
        <imagePainter method="ArrowButtonBackground" path="images/dropdown-icon-big.png" center="true"/>-->
    </state>
    <!--                <imagePainter method="textAreaBorder" path="images/textbox-small.png" sourceInsets="4 6 4 6" paintCenter="false"/>    -->
</style>
<bind style="ProgressBarStyle" type="region" key="ProgressBar"/>

<style id="fileChooserStyle">
    <imageIcon id="homeIcon" path="images/home.png"/>        
    <object id="fileChooserBackGround" class="com.poseidon.desktopframework.images.BackgroundPainter"></object> 
```

-->

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:47:29.600

您不必实现外观。您只需将其应用于您的 Swing UI。两者的代码相同。

哪个呈现最佳界面也是一个品味问题。它们都应该可以正常工作，只是（顾名思义）外观和感觉不同。您可以看到自己的外观差异。不知道感觉（行为）的差异，我怀疑是否有可能给出一个令人满意的列表。

只需按照您想要的方式实现您的 UI，然后使用`UIManager.setLookAndFeel()`.

我个人认为使用系统外观和感觉是个好主意。它使 UI 看起来像系统默认设置。例如，在 Windows 上它看起来像一个 Windows 程序，而在 Gnome 上它看起来像一个 GTK 应用程序。

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

[您可以在http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)进一步了解它

# c - 在C中使用getche在结构中输入一个字符？

> ID：15728539
> 
> 赞同：4
> 
> 时间：2013-03-31T10:38:29.757
> 
> 标签：c

我在 C 中输入 char 时遇到问题。我希望用户只输入`x`or `X`。如果没有，用户必须再次输入。此外，我想用一个结构来做。这是我的代码：

```
typedef struct chu{
    char c;
};

int main(){
    chu input;
    char temp;
    do{
        printf("\nInput: ");
        temp=getche();
        if((temp!='x')||(temp!='X')) 
            printf("\nWrong input (only 'x' or 'X')");
        else
            input.c=temp;
    }while((temp!='x')||(temp!='X'));
} 
```

当我输入`x`or`X`时，我不应该再次输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:40:02.597

您的 if 条件错误应该是：

```
if((temp!='x') && (temp!='X')) 
               ^  && if not both 
```

我替换`||`为`&&`（*因为任何一个都被接受，所以如果 temp 不等于两者，则应打印条件错误消息*）

第二个while条件应该是：

```
while(!((temp =='x') || (temp=='X')));
      ^ 
```

正如你所说，*当我输入 x 或 X 时，我不应该再次输入*所以 if `temp`is `x`or `X`then `(temp =='x') || (temp=='X')`==`1`并且因为`!`它给出了`while(0)`循环中断

此外，您的结构定义应如下所示：

```
typedef struct {
    char c;
}chu; 
```

我更正了您可以[从这里](http://codepad.org/hGXzLjit)找到的代码并在您的机器上尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:40:54.057

问题在于您的情况：

```
} while((temp!='x')||(temp!='X')); 
```

这意味着：当它是不相等的“x”或“X”时重复。（这总是正确的，因为它只能是一个或另一个。将其替换为：

```
} while(temp != 'x' && temp != 'X'); 
```

当它不是“x”或“X”时重复。同样的问题在你的`if`进一步发展中（我似乎第一次忽略了这一点，我的错）。

您的代码可能会像这样重构：

```
int main(){
    chu input;
    char temp;
    while(true) {
        printf("\nInput: ");
        temp=getche();
        if(temp != 'x' && temp != 'X') 
            printf("\nWrong input (only 'x' or 'X')");
        else {
            input.c=temp;
            break;
        }
    }
} 
```

此代码将永远循环（如 所示`while(true)`），但只要您输入“x”或“X”，它就会将变量设置为您的结构并`break`从循环中释放出来。

关于语义的一点信息：

`||`一旦第一个条件返回，由 OR () 连接的任何内容都将停止计算`true`。`true`在那一刻，无论如何，整个构造都会返回。

相反，只要`&&`第一个条件返回，您使用 AND ( ) 连接的任何内容都将停止评估，因为无论如何`false`它都会生成整个构造。`false`

回到你的例子，这就是你的编译器所做的，假设我们输入'X'

```
if(temp != 'x') {      //Okay, it's not 'x'. Let's try the next one.
    if(temp != 'X') {  //Oh wait, it IS X. I can't stop yet!
        //Stop looping
    }                  //This will be executed
}
//Loop me! 
```

这就是它的作用`&&`

```
if(temp == 'x') {      //Hmm...not 'x'.
    if(temp == 'X') {  //Oh wait! It IS 'X'.
        //Stop looping //This gets executed.
    }
}
//Loop me! 
```

你可能已经注意到了，我改成`!=`了`==`这里。由于二进制算术，我可以做到这一点。NOT (x OR X) 等于 (NOT x AND NOT X)。

# html - 如何在绝对定位的其他 div 之上显示隐藏的 div？

> ID：15728543
> 
> 赞同：0
> 
> 时间：2013-03-31T10:38:54.077
> 
> 标签：html, css

我正在使用 MVC3 创建一个简单的网站。但问题在于 CSS。我创建了一个标题页，并将我的菜单添加到其中（我希望菜单显示在所有页面上）。对于子菜单，我为每个菜单项创建了隐藏的 div，当菜单项悬停时显示，悬停时消失。其他页面的一切都很好，但在其中一个页面上，我正在使用包含在单个 div 中的 3 个图像的 fadeIn()fadeOut() 创建幻灯片效果，绝对定位（以便它们彼此重叠）。但是现在隐藏的 div 不在上方（z-index 朝向用户），而是位于图像下方，因此无法完全看到。我曾尝试更改隐藏的 div 和图像的 z-indexes，但这并没有帮助。如何将隐藏的 div 置于顶部？

# php - Yii 框架内部是否预先启用了某种缓存？

> ID：15728544
> 
> 赞同：0
> 
> 时间：2013-03-31T10:38:59.840
> 
> 标签：php, yii

我是 Yii 框架的新手，我在项目中更改了文件夹名称，Yii 或 Web 服务器花了大约 15 分钟来理解它，并且没有显示有关文件路径的错误。

我检查了我的 Apache Web 服务器配置（它是本地的），它不包含任何缓存，并且我没有在其上安装任何缓存软件，所以我只是想也许在这个框架中打开了某种缓存机制默认情况下，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:47:59.323

Yii 内置了各种缓存组件。

下面的链接给出了一个概述......

[http://www.yiiframework.com/doc/guide/1.1/en/caching.overview](http://www.yiiframework.com/doc/guide/1.1/en/caching.overview)

# html - 修剪CSS中的溢出文本？

> ID：15728547
> 
> 赞同：5
> 
> 时间：2013-03-31T10:39:26.313
> 
> 标签：html, css, trim

是否可以修剪文本的结尾？

输入

> 这是一个非常长的文本

结果

> 这是个 ...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T10:51:18.993

是的，这完全可以通过 CSS 来实现。

请参阅我[在 jsFiddle 上的示例](http://jsfiddle.net/AHBL3/)

实现效果的关键是使用以下 CSS 属性的组合：

```
width: [x]px
overflow: hidden
white-space: nowrap
text-overflow: ellipsis 
```

宽度是使用溢出所必需的。文本溢出需要溢出，并且需要空格来防止中断并确保整个文本在一行中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-31T10:41:58.790

也许你可以试试

> 文本溢出：省略号；

[http://davidwalsh.name/css-省略号](http://davidwalsh.name/css-ellipsis)

# javascript - 将属性传递给 Jquery 中的 Append 函数不起作用

> ID：15728549
> 
> 赞同：4
> 
> 时间：2013-03-31T10:39:47.837
> 
> 标签：javascript, jquery

我正在尝试将属性传递给 jquery append 函数。它附加 html 但不附加属性。控制台中也没有显示错误。html代码：

```
 <li>First Item</li>
    <li>Second Item</li> 
```

Javascript代码：

```
 $('li').each(function(){
        $(this).append('<span></span>', {
            text: 'some text',
            class: 'someClass'
        })
    }); 
```

我希望 HTML 看起来像

```
 <li>First Item <span class="someClass">some text</span></li>
 <li>Second Item Item <span class="someClass">some text</span></li> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T10:46:13.467

`.append()`是一个方法，而不是一个`element object`

```
$('li').each(function(){

  $('<span />', {
    'class' : 'someClass', 
    text : 'some text',
    appendTo : this
  });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<ul>
    <li>First Item</li>
    <li>Second Item</li>
</ul>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:00:33.040

试试这个：

```
$('li').each(function(){
        $('<span/>',{
            text: 'some text',
            class: 'someClass'
        }).appendTo(this);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:44:04.510

你可以做

```
$(this).append('<span class="someClass">some text</span>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T10:45:11.723

append 的第二个参数是（我引用 jQuery 文档）：

> 一个或多个附加 DOM 元素、元素数组、HTML 字符串或 jQuery 对象，以插入到匹配元素集中每个元素的末尾。

# unix - 在 Unix 中使用 awk 结束文件

> ID：15728559
> 
> 赞同：0
> 
> 时间：2013-03-31T10:40:27.047
> 
> 标签：unix, awk

我在使用 awk 时遇到问题。从作为参数给出的每个文件中打印长度至少为 10 的行数。此外，打印该行的内容，除了前 10 个字符。在文件分析结束时打印文件的名称和打印的行数。

这是我到目前为止所做的：

```
{
if(length($0)>10)
{
 print "The number of line is:" FNR
 print "The content of the line is:" substr($0,10)
 s=s+1
}
x= wc -l //number of lines of file
if(FNR > x) //this is supposed to show when the file is over but it's not working
{           //I also tried if (FNR == 1) - which means new file
 print "This was the analysis of the file:" FILENAME
 print "The number of lines with characters >10 are:" s
}
} 
```

这会打印文件的名称和每行至少有 10 个字符的行数，但我想要这样的东西：

```
print "The number of line is:" 1
print "The content of the line is:" dkhflaksfdas
print "The number of line is:" 3
print "The content of the line is:" asdfdassaf
print "This was the analysis of the file:" awk.txt
print "The number of lines with characters >10 are:" 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:46:02.710

这就是你需要的：

```
length($0) >= 10 {                             
    print "The number of line is:",FNR 
    print "The content of the line is:",substr($0,11)
    count++                                              
}
ENDFILE {                        
    print "This was the analysis of the file:",FILENAME
    print "The number of lines with characters >= 10 are:",count
    count = 0
} 
```

将其另存为`script.awk`并像`awk -f script.awk file1 file2 file3`.

笔记：

*   对于线长，要求`the number of lines that has the length at least 10`应该是`>=10`。

*   `except the fist 10 characters`表示您想从 11 号开始`substr($0,11)`。

*   条件`length($0) >= 10`应该在块外完成。

*   您需要使用特殊`ENDFILE`块在每个文件的末尾打印分析。

*   您需要重置`count`每个文件的结尾和结尾，否则您将获得所有文件的运行总数。

# python - 如何在 Python 2.7 中打开、读取和写入文件——将代码从 fortran 90 转换为 Python

> ID：15728564
> 
> 赞同：0
> 
> 时间：2013-03-31T10:41:01.930
> 
> 标签：python, python-2.7, fortran, fortran90

我正在将一些代码从 fortran90 转换为 python 2.7，并且无法理解 fortran 代码中 Open、Write 和 Read 函数中的参数，以及在编写代码时需要添加哪些元素Python。

以下是我想理解并转换为 python 的一些 fortran 代码块：

```
OPEN(1,FILE=TRIM(filenameOut),RECL=2000)
WRITE(1,*) "tAge/yr  (u-r)  (u-z)  fGas  Mstars/MstarsOld"
CLOSE(1) 
```

我猜“1”只是为文件名分配一个标签，TRIM 正在删除变量之前或之后的任何空格，python 等价的变量是 filenameOut.strip() 或其他东西。我不确定 RECL 在做什么，以及其他函数的 python 等效项对于这个块是什么。

另一个例子：

```
OPEN(1,FILE=TRIM(filenameOut),RECL=2000)
WRITE(1,*) "(u-r)  prob(u-r)"
DO countInside=1,nColourBins
    WRITE(1,*) uMinusrMidpointsArray(countInside),probuMinusrArray(countInside)
CLOSE(1) 
```

由此我猜星号的意思是写入文件的下一行。同样，我还不确定如何在 python 中执行此操作。

读取 fortran 代码的示例：

```
OPEN(1,FILE=TRIM(filenameBC),RECL=2000)
  READ(1,*)
  READ(1,*)
  READ(1,*)
  READ(1,*)
  READ(1,*)
  READ(1,*)
  READ(1,*)

  IOEnd=0
  DO WHILE(IOEnd>-1)
     READ(1,*,IOSTAT=IOEnd) logTime,Mbol,g,uMg,gMr,gMi,gMz
  END DO
  CLOSE(1) 
```

我知道重复的 READ(1,*) 只是读取文件的前 7 行，但我不确定是否有任何与此相关的 python 等效快捷方式，即从第 8 行或其他内容开始的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:21:39.280

正如您上次问到的那样，与顺序访问一起使用的 recl= 不是标准的，至少对一个编译器没有任何作用，几乎可以肯定应该忽略。

在 python 中，您将行读取为字符串并处理字符串，如下所示：

```
file=open(filename,'r')
for i in range(6):file.readline()   #skipping 6 lines
items=file.readline().split() 
```

items 将您的值保存为字符串..然后您根据类型转换每个值：

```
logTime=float(item[0]) 
```

我只是在没有测试的情况下完成了这个..但它应该让你开始。

如果需要，带有“*”的一个陷阱，fortran 将从多行中读取。我怀疑这里是这种情况，但为了完整起见，你需要做这样的事情，

```
items=[]
while len(items)<nrequired:items.extend(file.readline().split()) 
```

对于写作，您可以尝试：

```
file=open(filename,'r')
file.write(' '.join([repr(x) for x in (v1,v2,v3)])+'\n') 
```

或者

```
file.write(('%.14g'+(' %.14g'*2)+'\n')%(v1,v2,v3)) 
                            (need to count how many values you have to put the "*2" ) 
```

这些都没有为您提供从 fortran 获得的确切输出。如果您需要相同的间距、小数位等，请参阅 Vladimir 注释。（如果 python 中的值为 0.1，则没有一种简单的方法可以像使用 fortran 那样强制打印尾随零 0.100000）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:02:32.263

你的第一个例子显然是错误的括号。应该和第二个一样。

Trim 只清除[尾随空格](http://gcc.gnu.org/onlinedocs/gfortran/TRIM.html)。这里可能不需要。

在您的情况下，文件将连接到顺序访问。在这种情况下，RECL 设置文件的最大记录长度（这意味着行长度）。你很有可能忽略它。

I/O 语句第二个位置的星号表示使用[列表导向格式](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlf101l.doc/xlflr/listdirected.htm)。这使编译器在如何精确格式化输出方面具有一定的自由度。特别是，如果输出太长，或者输入不包含当前行中的所有 te 项，编译器会继续下一行（记录）。

因此，`READ(1,*,IOSTAT=IOEnd) logTime,Mbol,g,uMg,gMr,gMi,gMz` 如果它包含 7 个项目，则可以从 1 行读取，但也可以从 7 行中读取一个项目。如果你想保持这种灵活性，你必须在你的 Python 代码中考虑到这一点。

`WRITE(1,*) uMinusrMidpointsArray(countInside),probuMinusrArray(countInside)`应该只写入一行，因为它只有两个项目，除非它们是长字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-22T07:42:18.700

从系统`import argv`

脚本，

```
filename = argv

txt = open(filename)

print "Here's your file %r:" % filename
print txt.read()

print "Type the filename again:"
file_again = raw_input("> ")

txt_again = open(file_again)

print txt_again.read() 
```

# sql - 从asp.net中的多个表中选择

> ID：15728565
> 
> 赞同：-1
> 
> 时间：2013-03-31T10:41:04.763
> 
> 标签：sql, sql-server

假设我有 2 个表：

**`USER`**：

*   `Userid`(PK),
*   `FirstName`,
*   `LastName`.

**`ADDRESS`**：

*   `Userid`(FK),
*   `Street`,
*   `City`.

现在我想在 a 中显示以下数据`Table`：

```
|  userid  |  FirstName  |  LastName  |  Street | City 
```

我需要获取所有条目，所以如果我可以将信息存储在一个`List`或其他东西中会很好......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:46:14.197

[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)两张表：

```
SELECT
  u.userid,
  u.firstname,
  u.lastname,
  a.Street,
  a.City
FROM [User] AS u
INNER JOIN Address AS a ON u.userId = a.userid; 
```

您可能还需要包含那些没有电子邮件或城市的用户，有关不同类型`LEFT JOIN`的更多信息，请参阅本文：`JOIN`

*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T10:50:52.087

```
SELECT   
 t1.userid  
 t1.FirstName 
 t1.LastName  
 t2.Street  
 t2.City  
FROM USER t1, ADDRESS t2 
```

# php - 将压缩文件夹内容提取到根目录

> ID：15728566
> 
> 赞同：0
> 
> 时间：2013-03-31T10:41:10.943
> 
> 标签：php, extract, ziparchive

我正在尝试将压缩文件夹的内容提取到网站的根目录我有一个名为 zip.zip 的目录，但我尝试的所有内容都会创建一个名为 zip 的目录，有没有办法将内容提取到根目录

```
<?php
$zip = new ZipArchive;
    if ($zip->open("zip.zip")){
        $path = getcwd() . "/";
        $path = str_replace("\\","/",$path);
        echo $path;
        echo $zip->extractTo($path);
        $zip->close();
        echo 'Done.';
    } else {
        echo "Error";
    }
?> 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:32:19.883

我已经解决了这个

```
<?php

$path = 'zip.zip';

$zip = new ZipArchive;
if ($zip->open($path) === true) {
    for($i = 0; $i < $zip->numFiles; $i++) {
        $filename = $zip->getNameIndex($i);
        $fileinfo = pathinfo($filename);
        copy("zip://".$path."#".$filename, "".$fileinfo['basename']);
    }                  
    $zip->close();                  
}

?> 
```

不管怎么说，还是要谢谢你

# linux - 在Linux中，有效地垂直分割一个大文件

> ID：15728567
> 
> 赞同：0
> 
> 时间：2013-03-31T10:41:17.510
> 
> 标签：linux, split, large-files

是否有类似的`split`命令可以有效地按列而不是行拆分文件？

我有一个 30GB 的 csv 文件，其中包含 ~15k 列和 ~150k 行，我想将其拆分为 10 个文件，每个文件 1500 列。

我尝试使用`awk`将文件拆分为 15k 个文件，但速度非常慢。

```
awk -F, { for(i=1;i<=NF;i++) print $i >> i } file.csv 
```

# lucene - Lucene 中的多字段查询处理

> ID：15728569
> 
> 赞同：6
> 
> 时间：2013-03-31T10:41:23.323
> 
> 标签：lucene

我在 Lucene 中编写了一个索引搜索器，它将搜索索引数据库中的多个字段。

实际上它将查询作为两个字符串，一个是say `title`，另一个是`cityname`。

现在索引数据库有三个字段：`title, address and city`.

仅当标题匹配且城市名称匹配时才会发生命中。为此，我在`MultiFieldQuerySearcher`帖子的帮助下编写了以下搜索器代码：

```
public void searchdb(String myQuery, String myCity) throws Exception
{
    System.out.println("Searching in the database ...");
    String[] fields={"title","address","city"};
    MultiFieldQueryParser parser = new MultiFieldQueryParser(Version.LUCENE_CURRENT, fields, new StandardAnalyzer(Version.LUCENE_CURRENT));
    parser.setDefaultOperator(QueryParser.Operator.AND);
    if(!myQuery.toLowerCase().contains(myCity.toLowerCase()))
    {
        myQuery="title:"+myQuery+" "+"address:"+myQuery+" "+myCity+" "+"city:"+myCity;
    }
    Query query=parser.parse(myQuery);
    if (query instanceof BooleanQuery) 
    {
        BooleanClause.Occur[] flags ={BooleanClause.Occur.MUST,BooleanClause.Occur.SHOULD,BooleanClause.Occur.MUST};
        BooleanQuery booleanQuery = (BooleanQuery) query;
        BooleanClause[] clauses = booleanQuery.getClauses();
        System.out.println("Query="+booleanQuery.toString()+" and Number of clauses="+clauses.length);
        for (int i = 0; i < clauses.length; i++) 
        {
            clauses[i].setOccur(flags[i]);
        }
        Directory dir=FSDirectory.open(new File("demoIndex"));
        IndexSearcher searcher = new IndexSearcher(dir, true);
        TopDocs hits = searcher.search(booleanQuery, 20);
        searcher.close();
        dir.close();
        System.out.println("Number of hits="+hits.totalHits);
    }
} 
```

但它运行不正常。

例如，如果查询是“Pizza Hut”，城市是“Mumbai”，我希望仅在数据库的标题字段中搜索“Pizza Hut”，仅在数据库的城市字段中搜索 Mumbai。

但它也在数据库的 city 字段中找到“Hut”，因为语句**booleanQuery.toString()**的输出为“ **+title:pizza +(title:hut city:hut) +city:mumbai** ”。

结果在 for 循环中给出了 index outOfBound 错误。

我是 Lucene 的新手。所以我正在寻求帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T14:08:53.680

只有当我们想在多个字段中搜索**相同的关键字时，我们才使用 MultiFieldQueryParser。**

为了处理您的用例，您已经分别引用了 city-keyword 和 title-keyword 会更简单。尝试使用以下代码。

```
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
// city query
QueryParser cityQP = new QueryParser(Version.LUCENE_CURRENT, "city", analyzer);
Query cityQuery = cityQP.parse(myCity);

// title query
QueryParser titleQP = new QueryParser(Version.LUCENE_CURRENT, "title", analyzer);
Query titleQuery = titleQP.parse(myQuery);

// final query
BooleanQuery finalQuery = new BooleanQuery();
finalQuery.add(cityQuery, Occur.MUST); // MUST implies that the keyword must occur.
finalQuery.add(titleQuery, Occur.MUST); // Using all "MUST" occurs is equivalent to "AND" operator. 
```

# wordpress - html '<' 和 '>' 将消失

> ID：15728570
> 
> 赞同：0
> 
> 时间：2013-03-31T10:41:28.037
> 
> 标签：wordpress

我已经在 ChildTheme functions.php 中复制了以下代码，但它还没有工作：

> ```
> remove_action('init', 'kses_init');
> remove_action('set_current_user', 'kses_init'); 
> ```

1 当我在 HTML MODE 中编写一些代码时，例如：

> ```
> <pre>
> <div>why the DIV outside will disappear? </div>
> hello() => 'hello world';   //The '>' will disappear as well
> </pre> 
> ```

2 但是把它改成WRITE MODE，这不是我所期望的，回到HTML MODE，它继续这样：

> ```
> <div>why the DIV outside will disappear?</div>
> <pre>hello() =&gt; 'hello world';   //The '&gt;' will disappear as well
> </pre> 
> ```

3 当我预览帖子时，页面显示如下（> 变为*> ;*）：

为什么外面的DIV会消失？

```
hello() =&gt; 'hello world';   //The '&gt;' will disappear as well 
```

现在我想知道它是否是由插件 WP Code Highlight 引起的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:43:49.237

您需要对 html 实体进行 html 编码。在 php 中，您可以使用函数[htmlentities()](http://php.net/manual/en/function.htmlentities.php)。

基本上`<`and`>`是需要用and*转义*的控制字符。该标志也需要替换为。`&lt;``&gt;``&``&amp;`

# backbone.js - Typescript 类型检查 - Backbone.Model 实例无法进行类型检查

> ID：15728582
> 
> 赞同：3
> 
> 时间：2013-03-31T10:43:46.460
> 
> 标签：backbone.js, typescript, backbone.js-collections

我遇到了 Typescript 和 Backbone 集合的问题。这里有一些基础：

```
class BaseChartModel extends Backbone.Model { }
class ScatterPlotModel extends BaseChartModel { }
class BarChartModel extends BaseChartModel { }

class MixedChartCollection extends Backbone.Collection { public model: BaseChartModel; ... }
class ScatterPlotCollection extends Backbone.Collection { public model: ScatterPlotModel; ... }
class BarChartCollection extends Backbone.Collection { public model: BarChartModel; ... } 
```

然后我执行以下操作：

```
 var scatterPlotCollection = new ScatterPlotCollection();
 var scatterPlotCollectionXhr = scatterPlotCollection.fetch({...});

 var barChartCollection = new BarChartCollection();
 var barChartCollectionXhr = barChartCollection.fetch({...});

 $.when(scatterPlotCollectionXhr, barChartCollectionXhr).done(() => {

       mixedCollection = new MixedChartCollection();
       mixedCollection.add(scatterPlotCollection.models, { silent: true });
       mixedCollection.add(barChartCollection.models, { silent: true });
       chartViewList = new MixedChartViewList({ collection: mixedCollection });

       chartViewList.render();

 }); 
```

内部渲染（）：

```
public render(){
     var self = this;
     this.$el.html(this.template({}));

     this.collection.forEach(
    (chartModel: BaseChartModel) => {
            this.$el.append(self.AddChartView(chartModel).render());                  
    }
 );

     return this;
}

public AddChartView(baseChartModel: BaseChartModel) : BaseChartView {

      var newChartView: BaseChartView;

      if(baseChartModel instanceof ScatterPlotModel){
           newChartView = new ScatterPlotView({ model: baseChartModel});
      } else if (baseChartModel instanceof BarChartModel){
           newChartView = new BarChartView({ model: baseChartModel});
      } 
      ....       
} 
```

除了`instanceof`永远不会评估为真，因为似乎派生自的“类类型”`Backbone.Model`被分配给`Backbone.Model.attributes`而不是类本身的实例。我相信这是因为在实现从 Backbone.Model 派生的类时，我遵循[了这种](http://blorkfish.wordpress.com/2013/03/20/typescript-strongly-typed-backbone-models/)方法，似乎这可能是导致此问题的原因。基本上，它将 TS 类上的 get/set 属性委托给底层的 Backbone.model.get()/set() ，后者反过来设置`attributes`属性的值。

看来我必须放弃这种方法（并希望这是问题所在），或者找出一种方法来进行松散耦合的类型检查，类似于或`instanceof`在`baseChartModel.attributes`对象和我的类原型之间使用`App.BackBone.Models.ScatterPlotModel`

此断点位于`instanceof`比较 行处![在此处输入图像描述](https://i.stack.imgur.com/zaEY2.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:11:11.827

您使用的方法似乎足够有效。我已将以下代码插入 TypeScript 游乐场，只是为了检查一些 javascript 语义：

```
class A { }

class B extends A { }

class Checker {
    static isA(input: A) {
        return (input instanceof A);
    }
}

var a = new A();
var b = new B();

document.writeln('a instanceof A ' + (a instanceof A) + '<br/>');
document.writeln('b instanceof B ' + (b instanceof B) + '<br/>');
document.writeln('b instanceof A ' + (b instanceof A) + '<br/>');
document.writeln('b instanceof A (via function) ' + Checker.isA(b) + '<br/>');

var aArray : A[] = [];

aArray.push(a);
aArray.push(b);

for(var i = 0; i < aArray.length; i++) {
    document.writeln('aArray[' + i + '] instance of A ' + (aArray[i] instanceof A) + '<br/>' );
} 
```

这给出了以下输出：

```
a instanceof A true 
 b instanceof B true 
 b instanceof A true 
 b instanceof A checker true 
 aArray[0] instance of A true 
 aArray[1] instance of A true 
```

这必须意味着调用

```
mixedCollection.add( scatterPlotCollection.models, { silent: true }); 
```

导致这里的问题。
可能 scatterPlotCollection.models 没有返回您的原始对象（即 ScatterPlotModel 或 BarChartModel ），而只是返回 [Object object]，因此实例失败？

希望这可以帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T12:43:39.507

我想我知道“错误”在哪里：以某种方式声明

```
public model: CustomModelType 
```

不工作；

但是，如果您要创建这样的集合：

```
 new MyCustomCollection(null, { model: CustomModelType }); 
```

然后骨干将能够按预期创建模型。

为什么会发生，我不知道 :( 可能是类型定义中的错误。

# javascript - 使用 jquery 验证文本框

> ID：15728583
> 
> 赞同：0
> 
> 时间：2013-03-31T10:43:47.063
> 
> 标签：javascript, jquery, asp.net, textbox, requiredfieldvalidator

我的 aspx 页面中有几个 asp 文本框。并且没有足够的空间来显示 Requred 字段验证器消息。有什么解决办法吗？使用 jquery 还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:49:40.630

您可以简单地突出显示带有`Red`边框的文本框，以标记它们是文本框数据的问题。

您可以像这样使用 CSS：

```
input.error  
{ 
   background: Yellow; border: 1px solid red; 
} 
```

出错时，只需将类添加到`input`并输入工具提示

```
$("input").addClass("error").attr('title', 'An error occurred!'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:51:17.987

试试下面的代码：

```
$(":text").each(function(){
    if($(this).val()==""){
    $(this).css("background-color","red");
    alert($(this).attr("id") & " validate error");  
    return
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T10:51:23.333

您可以同时使用 javascript 或 jQuery，通过验证数据，然后在未验证的情况下将消息返回到输入。前任：

```
if($('#idOfFeild').val()==''){
    $('#idOfFeild').val('Please input your data');
} 
```

您也可以添加样式来警告您的用户！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T10:56:21.877

你可以阅读这篇文章： http: [//www.codeproject.com/Articles/43772/Generic-Code-of-Validating-Fields-with-Jquery](http://www.codeproject.com/Articles/43772/Generic-Code-of-Validating-Fields-with-Jquery)，他们试试这个代码：

```
<script type="text/javascript">
    <script src="JavaScript/jquery.js" type="text/javascript"></script>
   function callOnload()
   {
      $("input[isvalidate=true]").each(
                              function(n)
                              {
                                 $('#' +this.id).addClass('mandatory');
                                 this.onkeyup=function()
                                 {
                                    if(this.value==='')
                                    {
                                       $('#' +this.id).removeClass('normal');
                                       $('#' +this.id).addClass('mandatory');
                                    }
                                    else
                                    {
                                       $('#' +this.id).removeClass('mandatory');
                                       $('#' +this.id).addClass('normal');
                                    }
                                 }
                              }
                        );

         $("#btnSubmit").click(
                              function()
                              {
                                  $("input[isvalidate=true]").each(
                                  function(n)
                                  {
                                     if(this.value==='')
                                     {
                                        alert($('#' +this.id).attr('errprMsg'));
                                     }
                                  }
                                 );
                                return false;
                              }
                           );
   }
   $(document).ready(callOnload);
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-31T12:28:38.497

是的，显然，您有一个非常简单的解决方案。

你不必使用任何 jquery 的东西。你只需要使用`asp:validationSummary`.

我在这里发布解决方案。有了这个，您可以使用标准 asp 在简单的弹出窗口中显示所有错误消息`validation controls`。它不会占用您的任何空间`page`。

看看下面的代码：

```
<asp:ValidationSummary ID="validation1" runat="server" ShowMessageBox="true"  ShowSummary="false" DisplayMode="SingleParagraph" ValidationGroup="abc" />

<asp:TextBox ID="txtAge" runat="server" ></asp:TextBox>

<asp:RequiredFieldValidator ID="req" runat="server" ControlToValidate="txtAge" Display="None" ValidationGroup="abc" ErrorMessage="Field Required"></asp:RequiredFieldValidator>

 <asp:Button ID="btn" Text="click"  runat="server" ValidationGroup="abc" /> 
```

我在这里设置`ShowMessageBox="true"`了`Validation Summary`，它将在弹出窗口中显示所有错误消息。

设置您的验证器`Display="none"`，以便错误消息仅显示在弹出窗口中。

错误消息将如下图所示。您不必担心管理页面空间。

![在此处输入图像描述](https://i.stack.imgur.com/q93Tl.png)

它是您问题的完美、简单和简单的解决方案。

请让我知道这对你有没有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T10:53:39.470

或者 alert() 您可以使用自己的验证器和彩色文本或文本框。我的页面上有小例子，你可以调整它。添加 css 类： http: [//kjinit.blogspot.com/2013/03/jquery-dynamic-adding-css-class.html](http://kjinit.blogspot.com/2013/03/jquery-dynamic-adding-css-class.html) 并删除 css 类。

当然首先你需要像这样验证它： if('#yourInputId').val(''); 只需在正确与否时为添加或删除 css 类的文本着色。

# php - 将其值每次都可以更改的变量从一个php页面传递到另一个

> ID：15728585
> 
> 赞同：0
> 
> 时间：2013-03-31T10:43:52.843
> 
> 标签：php

我有一个表单，我从中获取两个变量的值，即使用 POST 方法的用户名和密码。

```
$Username=$_POST['Username'];
$Password=$_POST['Password']; 
```

我尝试使用以下代码将这些变量传递给另一个 php 页面。

```
<a href="abc.php?Username=$Username & Password=$Password">Click here</a> 
```

在另一页中，我尝试按如下方式打印变量。

```
$User=$_GET['Username'];
echo $USer; 
```

但是，我没有得到存储在变量中的值。相反，它将“$Username”打印为锚标记中给定的值。

我只需要打印存储在变量 $Username 中的值。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:46:26.673

您正在寻找以下内容：

```
<a href="abc.php?Username=<?php echo $Username; ?>&Password=<?php echo $Password; ?>">Click here</a> 
```

尽管如果变量包含特殊字符，您应该小心。所以我建议使用：

```
<?php echo urlencode($Username); ?>

<?php echo urlencode($Password); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T20:39:19.620

我认为如果你把它们放在一个会话中会更好。

你可以这样：

```
$Username=$_POST['Username'];
$Password=$_POST['Password'];

session_start():
$Username = $_SESSION['usernameSession'];
$Password = $_SESSION['passwordSession']; 
```

在其他页面中只需调用会话

```
session_start();

echo ".$_SESSION['usernameSession']"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:46:27.750

由于您没有指出这是 PHP 代码，`$Username`因此被解释为 HTML，从而导致`$Username`输出。为了输出实际值，您应该添加适当的标签，例如：

```
<a href="abc.php?Username=<?php echo $Username; ?> & Password=<?php echo $Password; ?>">Click here</a> 
```

顺便说一句，给定您的代码，您不需要做`echo`任何事情，因为变量在 PHP 中是区分大小写的，所以`$USer`在您的`echo`和`$User`前面的行中是两个不同的变量。

另请注意：

*   首先，您不应该通过 URI 传递密码，

*   你似乎没有逃避输入，

*   属性中“&”字符前后的空格`href`可能不是您真正想要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T10:47:19.973

您需要告诉 $Username 实际上是一个 PHP 变量，而不是 HTML CDATA 字符串。将您的链接代码转换为：

```
<a href="abc.php?Username=<?php echo $Username; ?>&Password=<?php echo $Password; ?>">Click here</a> 
```

# ios - 无法读取 UIStepper 的值

> ID：15728586
> 
> 赞同：0
> 
> 时间：2013-03-31T10:43:56.273
> 
> 标签：ios, uistepper

我正在尝试编写自己的间歇训练计时器。现在我在读取 UIStepper 控件的值时遇到问题。

我在 UIStepper 控制器上设置了一个 int ，它到目前为止有效。

```
- (IBAction)stepperChange:(id)sender {

// converting double to int
int temp = [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue];

NSLog(@"stepper was pressed. Current values is %d", [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue]);

self.intervalSeconds.text = [NSString stringWithFormat:@"%i", [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue]];

mainInt = [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue];

} 
```

到目前为止，一切都很好。问题是，我想在定时器达到 0 时将其重置为 UISteppers 值。但是当我尝试在没有 (id)sender 的情况下直接读取步进器值时，我总是得到 0 的值。

例如

```
-(void)readStepperValue {

NSLog(@"Read UIStepper control value: %f", [intervalStepper value]);

} 
```

我想这只是一个愚蠢的初学者错误......

* * *

好的，我刚刚做了一个超级简单的测试应用程序，代码如下所示：

vierController.h:

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

IBOutlet UIStepper *stepper;
IBOutlet UILabel *stepperValue;
}

@property (nonatomic, strong) UIStepper *stepper;
@property (nonatomic, strong) UILabel *stepperValue;

- (IBAction)showStepperValue;

@end 
```

视图控制器.m：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize stepper, stepperValue;

- (IBAction)showStepperValue {
int temp = stepper.value;
stepperValue.text = [NSString stringWithFormat:@"%i", temp];
[self showValue];
}

- (void)showValue {
int temp = stepper.value;
NSLog(@"stepper.value: %i", temp);
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

标签从 IBAction 方法中正确更新。但是，当我调用不在 IBAction 内的单独方法 (showValue) 时，它无法读取控制器的值....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:39:27.997

试试这种方式。

视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (nonatomic, strong) IBOutlet UIStepper *stepper;
@property (nonatomic, strong) IBOutlet UILabel *stepperValue;

- (IBAction)showStepperValue;

@end 
```

视图控制器.m：

```
#import "ViewController.h"

@implementation ViewController

- (IBAction)showStepperValue {
    double temp = self.stepper.value;
    self.stepperValue.text = [NSString stringWithFormat:@"%f", temp];
    [self showValue];
}

- (void)showValue {
    double temp = self.stepper.value;
    NSLog(@"self.stepper.value: %f", temp);
}

@end 
```

摆脱 iVar 并仅依赖属性不仅减少了您需要编写的代码量，而且还有助于消除任何 iVar/属性绑定错误。

更新： self.stepper.value 是 double 而不是 int （但这不是你的问题）。

# ios - 从情节提要加载 UILabel，无法更改 cellForRowAtIndexPath 中的框架

> ID：15728592
> 
> 赞同：5
> 
> 时间：2013-03-31T10:44:37.727
> 
> 标签：ios, uitableview, uilabel

我为 iOS6 开发了一个应用程序。我在情节提要中初始化了动态单元格，其中包含一些`UILabels`和一些`UIImageViews`. 他们的高度可能会即时改变。我的问题是当我`cellForRowAtIndexPath`像这样更改框架时：

```
contentText = (UILabel *)[cell viewWithTag:TAG_TOPIC_CONTENT_TEXT];

CGFloat height = [[self.contentHeights objectAtIndex:[indexPath row]] floatValue];

contentText.frame = CGRectMake(CELL_TOPIC_CONTENT_X, CELL_TOPIC_CONTENT_Y, CELL_CONTENT_WIDTH, height); 
```

屏幕上显示的 contentText 的高度`UILabel`仍然与我在 Storyboard 中初始化的高度相同。看来修改不起作用。如果我刷新我`UITableView`的 contentText 的高度会变得正确，如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:34:01.240

如果您需要修改任何单元格的框架，那么您应该创建一个 UITableViewCell 的子类并实现 layoutSubviews 方法：

```
- (void)layoutSubviews {
  [super layoutSubviews];

  // modify frames here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:04:48.653

尝试在`tableView:willDisplayCell:forRowAtIndexPath:`方法中执行此操作。这是通常用于 UI 自定义的方法。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:28:08.043

我知道这令人沮丧，但我也没有找到解决方案。相反，我发现自己是一种解决方法，可以按照我期望的方式完成工作。

我**删除了“自动布局”**（情节提要中的复选框）

然后：

```
[self.label setText:@"Labeltext"];
[self.label setBackgroundColor:[UIColor orangeColor]];// just to make the frame visible
[self.label setNumberOfLines:0];
[self.label sizeToFit]; 
```

像魅力一样工作，但也：

```
self.label.frame = CGRectMake(0, 0, 50, 50); 
```

因此，如果您不需要 AutoLayout（对我来说这是我取消选中的第一件事），请摆脱它。

# ajax - 对 GAE 数据存储的 AJAX 调用

> ID：15728594
> 
> 赞同：0
> 
> 时间：2013-03-31T10:44:45.697
> 
> 标签：ajax, json, google-app-engine

我想做的是从 Google App Engine 数据存储中获取一些数据，通过 AJAX 到我的网页。要做到这一点，我有类似的东西：

```
$.getJSON('/orders/'+restaurant+'/.json', function(data) 
```

在那个链接上，我公开了一些 JSON ......

我的问题是我怎样才能使它更安全，因为任何有一点编码知识的人都可以使用该链接来实现他的目的并使用我的 JSON 信息......

我在想也许我应该加密那些数据或其他东西......

纳克斯

# mysql - '计划的约会'和'执行的约会'在同一个或不同的表格中？

> ID：15728601
> 
> 赞同：0
> 
> 时间：2013-03-31T10:45:47.043
> 
> 标签：mysql, database, relational-database

假设我正在为汽车维修店制作数据库。（使用 MySQL）。

一个人可以预约修理他们的汽车 - 因此该表将包含以下字段......

```
appointment_id
time_created
appointment_time 
```

要记录服务本身，我需要一些额外的信息......

```
employee_id (Who fixed it?)
time_performed 
```

我应该创建一个表并让“employee_id”和“time_performed”最初为空，还是应该将它们拆分为单独的表？您过去是如何处理类似问题的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:51:06.890

两者都可以，但似乎最好有一张桌子。

每个约会通常最终都会添加服务信息，因此如果您有单独的表，您最终会得到一对记录，这些记录只是不方便地分成两个表。

如果您有频繁的约会但不会导致服务，或者如果可以在一次约会中进行不止一项服务，那么您自然会使用两张桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:51:13.980

从 OP 看来，您需要以下内容：
A table `Car`a table `Person`and a table `Mechanic`。and有关系，而
and有关系，因为 a由 a 服务，而 a可以服务许多汽车`Car``Person``1-1``Car``Mechanic``1-M``Car``1` `Mechanic``Mechanic`

# python - 按块反转句子的词序

> ID：15728613
> 
> 赞同：2
> 
> 时间：2013-03-31T10:46:57.660
> 
> 标签：python

我正在编写一个加密程序，其过程如下：

*   消息中的空格替换为`'X'`'s
*   原始消息中的每个单词都颠倒了
*   连续的单词序列，称为“块”，单词的顺序是颠倒的。这些块的大小是加密函数的参数，充当“密钥”。例如，如果消息是`'THE PRICE OF FREEDOM IS ETERNAL VIGILENCE'`并且块大小为 4，则每个四个字的块将被反转，产生`'FREEDOM OF PRICE THE VIGILENCE ETERNAL IS'`（忽略上面的其他两个步骤）。请注意，在这种情况下，最后一个块只有三个单词，但它仍然是颠倒的。

现在我已经能够替换空格并反转所有内容，但最后一步让我感到难过。

以下代码是我到目前为止所拥有的。

```
def encrypt (words, block):
    words = words [::-1]
    midpoint = len(words)/block
    first_half = words[0:midpoint]
    second_half = words[midpoint:]
    words = first_half + second_half
    words = words.replace(' ', 'X')
    return words

def decrypt (wordsde, block):
    wordsde = wordsde[::-1]
    midpoint = len(wordsde) / block
    first_half = wordsde[:midpoint]
    second_half = wordsde[midpoint:]
    wordsde = first_half + second_half
    wordsde = wordsde.replace('X', ' ')
    wordsde = wordsde.strip()
    return wordsde 
```

但每次，它都无法读取块或其他东西：

```
File "__main__", line 18, in __main__
Failed example:
    encrypt('WHO WATCHES THE WATCHERS', 2) # Test 4
Expected:
    'SEHCTAWXOHWXSREHCTAWXEHT'
Got:
    'SREHCTAWXEHTXSEHCTAWXOHW'
Trying:
    encrypt('PARANOIA IS OUR PROFESSION', 3) # Test 5
Expecting:
    'RUOXSIXAIONARAPXNOISSEFORP'
**********************************************************************
File "__main__", line 22, in __main__
Failed example:
    encrypt('PARANOIA IS OUR PROFESSION', 3) # Test 5
Expected:
    'RUOXSIXAIONARAPXNOISSEFORP'
Got:
    'NOISSEFORPXRUOXSIXAIONARAP'
Trying:
    encrypt('THE PRICE OF FREEDOM IS ETERNAL VIGILENCE', 4) # Test 6
Expecting:
    'MODEERFXFOXECIRPXEHTXECNELIGIVXLANRETEXSI'
**********************************************************************
File "__main__", line 26, in __main__
Failed example:
    encrypt('THE PRICE OF FREEDOM IS ETERNAL VIGILENCE', 4) # Test 6
Expected:
    'MODEERFXFOXECIRPXEHTXECNELIGIVXLANRETEXSI'
Got:
    'ECNELIGIVXLANRETEXSIXMODEERFXFOXECIRPXEHT' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:13:53.517

这是一个很好回答的问题。

```
sentence = 'WHO WATCHES THE WATCHERS'
def chunker(seq, size):
    return (seq[pos:pos + size] for pos in xrange(0, len(seq), size)) # Thanks to http://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks/434328#434328
def encrypt(phrase,block):
    l = []
    for g in chunker(phrase.split(),block):
         l.extend(i[::-1] for i in reversed(g))
    return 'X'.join(l) 
```

测试时：

```
>>> encrypt(sentence,2)
'SEHCTAWXOHWXSREHCTAWXEHT'

>>> 'RUOXSIXAIONARAPXNOISSEFORP' == encrypt('PARANOIA IS OUR PROFESSION', 3)
True

# Strings mentioned above and below were your expected answers 
# mentioned in the question

>>> 'MODEERFXFOXECIRPXEHTXECNELIGIVXLANRETEXSI' == encrypt('THE PRICE OF FREEDOM IS ETERNAL VIGILENCE', 4)=
True 
```

# jquery - jsPlumb 提高执行速度

> ID：15728616
> 
> 赞同：2
> 
> 时间：2013-03-31T10:47:09.473
> 
> 标签：jquery, algorithm, jsplumb

我正在使用 jsPlumb 库来绘制（连接）一些 div。div 的数量是动态的，最多可以达到 2000 个 div。我正在使用以下递归方法来画线：

```
connectGraphNodes: function(jsp_o, children, level){
    var nr_of_children, i=0;

    nr_of_children = children.length;
    for(i=0; i<nr_of_children; i++){
        if(!this.isPropertyEmpty(children[i]['id']) && !this.isPropertyEmpty(children[i]['name'])){
            // Connect child node with node
            jsp_o.connect({ 
                source: 'es-org-graph-box-' + children[i]['parent'], 
                target: 'es-org-graph-box-' + children[i]['id'],
               overlays:[
                    [ "Label", {
                            label: children[i]['percentage']+'%', id:"label",
                            location: 1                                
                        }
                    ]
                ]   
            });

            if(this.isSet(children[i]['children']) && children[i]['children'].length > 0){
                level++;
                // Run recurence function for child-nodes
                jsp_o.setSuspendDrawing(true);
                this.connectGraphNodes(jsp_o, children[i]['children'], level);
                jsp_o.setSuspendDrawing(false, true);
            }
        }            
    }
} 
```

我的问题是，对于大于 100 的数字，加载时间非常长，并且有时谷歌浏览器会弹出一个关闭选项卡选项。我可以对我的方法进行任何改进还是 jsPlumb 这么慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T14:53:18.807

就像 Rich 已经提到的那样，您必须使用

```
jsPlumb.setSuspendDrawing(); 
```

方法

尝试这个：

```
connectGraphNodes: function(jsp_o, children, level){
    var nr_of_children, i=0;

    nr_of_children = children.length;
    //start of suspend drawing
    jsPlumb.setSuspendDrawing(true);
    for(i=0; i<nr_of_children; i++){
        if(!this.isPropertyEmpty(children[i]['id']) && !this.isPropertyEmpty(children[i]['name'])){
            // Connect child node with node
            jsp_o.connect({ 
                source: 'es-org-graph-box-' + children[i]['parent'], 
                target: 'es-org-graph-box-' + children[i]['id'],
               overlays:[
                    [ "Label", {
                            label: children[i]['percentage']+'%', id:"label",
                            location: 1                                
                        }
                    ]
                ]   
            });

            if(this.isSet(children[i]['children']) && children[i]['children'].length > 0){
                level++;
                // Run recurence function for child-nodes
                jsp_o.setSuspendDrawing(true);
                this.connectGraphNodes(jsp_o, children[i]['children'], level);
                jsp_o.setSuspendDrawing(false, true);
            }
        }            
    }
    //end of suspend drawing
    jsPlumb.setSuspendDrawing(false,true);
} 
```

# c# - 如何在不使用许多 if 条件的情况下编写以下 linq 查询？

> ID：15728618
> 
> 赞同：0
> 
> 时间：2013-03-31T10:47:31.617
> 
> 标签：c#, .net, linq, entity-framework

我正在根据级联下拉列表过滤员工数据。如果参数的值为'-1'，则表示'所有数据'。例如，如果 departmentid = -1，则用户在下拉列表中选择了所有，对于类别和角色也是如此。

现在我需要使用 EF linq 查询来查询数据库。我的员工实体中有三个外键关联，用于根据所选值获取工作类别、角色和部门的名称。

因此，如果用户为类别和工作角色选择了 -1（全部），它必须查询员工实体并带回所选部门中的所有员工，否则它应该根据所选部门、类别或角色进行过滤。

我不确定如何在不使用三个或 if-else 语句的情况下为此编写简洁的 linq 查询。以下是我目前所拥有的，但如果我采用这种方法，我至少需要使用另外三个 if 语句。

任何帮助将不胜感激 - 谢谢

```
 [HttpGet]
    public ActionResult GetEmployees(Models.Department department, Models.Category      category, Models.Role role)
    {
        try
        {
           if (department.DepId == -1)
            {
                using (emsCtx)
                {
                    var allResults = (from q in emsCtx.Employees
                                      select new Models.Employee
                                      {
                                      Id = q.Id,
                                      FirstName = q.FirstName,
                                      MiddleName = q.MiddleName,
                                      LastName = q.Lastname,
                                      DOB = q.DOB,
                                      JobTitle = q.Roles.Designation,
                                      JobCategory = q.Categories.Type,
                                      Department = q.Departments.Name,
                                      Salary = q.BasicPay 
                                      }).ToList();
                    employeeData.Employees = allResults;
                }
            }
            else
            using (emsCtx)
            {
                var empResults = (from q in emsCtx.Employees
                                  where department.DepId == q.Department 
                                  && role.RoleId == q.Designation
                                  && category.CatId == q.Category
                                  select new Models.Employee
                                  {
                                      Id = q.Id,
                                      FirstName = q.FirstName,
                                      MiddleName = q.MiddleName,
                                      LastName = q.Lastname,
                                      DOB = q.DOB,
                                      JobTitle = q.Roles.Designation,
                                      JobCategory = q.Categories.Type,
                                      Department = q.Departments.Name,
                                      Salary = q.BasicPay 
                                  }).ToList();
                employeeData.Employees = empResults;
            }
            return View(employeeData);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:55:06.980

编写您的 Main LINQ 表达式，如下所示：

```
from q in emsCtx.Employees
where (department.DepId == -1 ? true : (department.DepId == q.Department 
                                        && role.RoleId == q.Designation
                                        && category.CatId == q.Category))
select new Models.Employee 
```

这将解决您的担忧。

# java - 将 JFileChooser 与 Swing GUI 类和侦听器一起使用

> ID：15728619
> 
> 赞同：4
> 
> 时间：2013-03-31T10:47:46.397
> 
> 标签：java, swing, model-view-controller, actionlistener, jfilechooser

这是我目前的菜单：

```
public class DrawPolygons
{
    public static void main (String[] args) throws FileNotFoundException
    {

        /**
         *   Menu - file reader option
         */

        JMenuBar menuBar;
        JMenu menu;
        JMenuItem menuItem;

        //  Create the menu bar.
        menuBar = new JMenuBar();

        //  Build the first menu.
        menu = new JMenu("File");
        menu.setMnemonic(KeyEvent.VK_F);
        menu.getAccessibleContext().setAccessibleDescription("I have items");
        menuBar.add(menu);

        //  a group of JMenuItems
        menuItem = new JMenuItem("Load",KeyEvent.VK_T);
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_1, ActionEvent.ALT_MASK));
        menuItem.getAccessibleContext().setAccessibleDescription("Load your old polygons");
        menu.add(menuItem);

        menuItem = new JMenuItem("Save",KeyEvent.VK_U);
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_2, ActionEvent.ALT_MASK));
        menuItem.getAccessibleContext().setAccessibleDescription("Save the contents of your polygons");
        menu.add(menuItem);

        // attaching the menu to the frame
        JFrame frame = new JFrame("Draw polygons");
        frame.setJMenuBar(menuBar);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new DrawingPanel());
        frame.pack();
        frame.setVisible(true);

    }

} 
```

它有两个选项`Load`和`Save`。 ![在此处输入图像描述](https://i.stack.imgur.com/1JuNf.gif)

现在，我怎样才能附加`JFileChooser`到`actionPerformed`方法，在这里：

```
/**
 * Main class
 * @author X2
 *
 */
class DrawingPanel extends JPanel implements MouseListener, MouseMotionListener ,KeyListener
{

    // code
    // code
    // and more code

    static DrawingPanel app ;  
    private static final Dimension MIN_DIM = new Dimension(300, 300);
    private static final Dimension PREF_DIM = new Dimension(500, 500);

    public Dimension getMinimumSize() { return MIN_DIM; }
    public Dimension getPreferredSize() { return PREF_DIM; }

    JMenuItem open, save;  
    JTextArea textArea ;  
    JFileChooser chooser ;  
    FileInputStream fis ;  
    BufferedReader br ;  
    FileOutputStream fos ;  
    BufferedWriter bwriter ;  

    public void actionPerformed( ActionEvent event )    
    {  
        Object obj = event.getSource() ;  
        chooser = new JFileChooser() ;  
        if ( chooser.showOpenDialog( app ) ==  JFileChooser.APPROVE_OPTION )  
        if ( obj == open )   
        {  
            try  
            {  
                fis = new FileInputStream(   
                      chooser.getSelectedFile() ) ;  
                br  = new BufferedReader(   
                      new InputStreamReader( fis ) ) ;  
                String read ;  
                StringBuffer text = new StringBuffer() ;  
                while( ( read = br.readLine() ) != null )   
                {  
                   text.append( read ).append( "\n" ) ;  
                }  
                textArea.setText( text.toString() ) ;  
            }  
            catch( IOException e )   
            {  
                JOptionPane.showMessageDialog( this , "Error in File Operation" 
                        ,"Error in File Operation" ,JOptionPane.INFORMATION_MESSAGE) ;  
            }  
        }  
    }  

    /**
     *  The constructor
     */
    DrawingPanel()
    {
        super();
        addMouseListener(this);
        addMouseMotionListener(this);
        addKeyListener(this);
        setFocusable(true);
        requestFocusInWindow();
    }

    // a lot of code more
    // and more 
    // and more

} 
```

使用我在 ? 中创建的`menu`和的初始代码？`Jpanel``main`

问候

**----------------------**

**编辑：**

“新”代码：

```
public class DrawPolygons
{
    public static void main (String[] args) throws FileNotFoundException
    {
        // attaching the menu to the frame
        JFrame frame = new JFrame("Draw polygons");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // JMenuBar

        //  Create the menu and JmenuBar
        JMenuBar menuBar = new JMenuBar();

        //  Build the first menu.
        JMenu menu = new JMenu("File");
        menu.setMnemonic(KeyEvent.VK_F);
        menu.getAccessibleContext().setAccessibleDescription("I have items");
        menuBar.add(menu);

        // menu option - load 

        // create the load option
        final JMenuItem loadItem = new JMenuItem("Load",KeyEvent.VK_T);
        // add the shortcut 
        loadItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_1, ActionEvent.ALT_MASK));
        // short description 
        loadItem.getAccessibleContext().setAccessibleDescription("Load your old polygons");

        // JFileChooser with filter
        JFileChooser fileChooser = new JFileChooser(".");
        // apply the filter to file chooser
        FileNameExtensionFilter filter = new FileNameExtensionFilter("scn files (*.scn)", "scn");
        fileChooser.setFileFilter(filter);

        fileChooser.setControlButtonsAreShown(false);
        frame.add(fileChooser, BorderLayout.CENTER);

        final JLabel directoryLabel = new JLabel(" ");
        directoryLabel.setFont(new Font("Serif", Font.BOLD | Font.ITALIC, 36));

        final JLabel filenameLabel = new JLabel(" ");
        filenameLabel.setFont(new Font("Serif", Font.BOLD | Font.ITALIC, 36));

        // add listener to LOAD
        loadItem.addActionListener(
                new ActionListener() 
                {
                    public void actionPerformed(ActionEvent actionEvent) 
                    {
                          JFileChooser theFileChooser = new JFileChooser(); 
                          String command = actionEvent.getActionCommand();
                          if (command.equals(JFileChooser.APPROVE_SELECTION)) {
                            File selectedFile = theFileChooser.getSelectedFile();
                            directoryLabel.setText(selectedFile.getParent());
                            filenameLabel.setText(selectedFile.getName());
                          } else if (command.equals(JFileChooser.CANCEL_SELECTION)) {
                            directoryLabel.setText(" ");
                            filenameLabel.setText(" ");
                          }
                    }} // end listener
        ); // end listener to loadItem              

        menu.add(loadItem);

        // now SAVE 

        // create the option for save
        JMenuItem saveItem = new JMenuItem("Save",KeyEvent.VK_U);
        // key shortcut for save
        saveItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_2, ActionEvent.ALT_MASK));
        saveItem.getAccessibleContext().setAccessibleDescription("Save the contents of your polygons");
        // add the save to the menu 
        menu.add(saveItem);

        frame.setJMenuBar(menuBar);
        frame.setContentPane(new DrawingPanel());

        frame.pack();
        frame.setVisible(true);
    }

} 
```

问题是，现在，当我点击`Load` Under时`File`，什么也没有发生。为什么 ？

我添加了监听器，但什么也没有。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T12:15:53.337

作为一般规则，您不应该让您的 GUI 类（例如扩展 JPanel 的类）实现任何侦听器接口，实际上您应该争取正好相反——将程序的控制功能（侦听器和像）从程序（GUI）的视图功能。因此，我对您的问题“我如何将 JFileChooser 附加到 actionPerformed 方法...[附加到扩展 JPanel 的 DrawingPanel 类] 的问题的回答是努力不这样做。

取而代之的是让您的视图类实现允许控件类更轻松地与它们交互的接口。

**编辑 1**：您的新代码永远不会显示 JFileChooser 对话框。您需要显示打开的对话框：

```
// first make sure that you've declared the JFrame frame as final
int result = theFileChooser.showOpenDialog(frame); 
if (result == JFileChooser.APPROVE_OPTION) {
  // ... code goes here           
} 
```

* * *

**编辑 2**

# Swing 模型-视图-控制示例：

例如，这是一个 MVC 或 Model-View-Control 实现，它显示了视图、模型和控件。这一切都非常简单，目前它所做的只是打开一个文本文件并将其显示在一个 JTextField 中，就是这样，它试图从视图中分离出控制功能。

## MvcMain 类

```
import javax.swing.SwingUtilities;

public class MvcMain {

   private static void createAndShowGui() {
      MvcView view = new ShowTextView("Show Text");
      MvcModel model = new ShowTextModel();
      ShowTextControl control = new ShowTextControl(view, model);

      control.showView(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

## MvcModel 接口

```
import java.beans.PropertyChangeListener;

public interface MvcModel {
   static final String TEXT = "text";
   static final String STATUS = "STATUS";

   String getText();

   String getStatus();

   void setText(String text);

   void setStatus(String text);

   void addPropertyChangeListener(PropertyChangeListener listener);

   void removePropertyChangeListener(PropertyChangeListener listener);
} 
```

## MvcView 界面

```
import java.awt.Window;
import javax.swing.Action;

public interface MvcView {

   void setVisible(boolean visible);

   void setFileAction(Action fileAction);

   void setOpenFileAction(Action openFileAction);

   void setSaveToFileAction(Action saveToFileAction);

   void setExitAction(Action exitAction);

   void setStatusText(String string);

   String getTextAreaText();

   void setTextAreaText(String text);

   Window getTopWindow();

} 
```

## ShowTextView 类

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.Window;
import javax.swing.*;

public class ShowTextView implements MvcView {
   private JFrame frame = new JFrame();
   private JMenuBar menuBar = new JMenuBar();
   private JMenu fileMenu = new JMenu();
   private StatusBar statusBar = new StatusBar();
   private ViewDisplayText displayText = new ViewDisplayText();

   public ShowTextView(String title) {
      menuBar.add(fileMenu);

      frame.setTitle(title);
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(displayText.getMainComponent(), BorderLayout.CENTER);
      frame.getContentPane().add(statusBar.getComponent(), BorderLayout.PAGE_END);
      frame.setJMenuBar(menuBar);
   }

   @Override
   public void setVisible(boolean visible) {
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   @Override
   public void setOpenFileAction(Action action) {
      displayText.setOpenFileButtonAction(action);
      fileMenu.add(new JMenuItem(action));
   }

   @Override
   public void setSaveToFileAction(Action action) {
      displayText.setSaveToFileAction(action);
      fileMenu.add(new JMenuItem(action));
   }

   @Override
   public void setExitAction(Action exitAction) {
      displayText.setExitAction(exitAction);
      fileMenu.add(new JMenuItem(exitAction));
   } 

   @Override
   public void setFileAction(Action fileAction) {
      fileMenu.setAction(fileAction);
   }

   @Override
   public String getTextAreaText() {
      return displayText.getTextAreaText();
   }

   @Override
   public void setTextAreaText(String text) {
      displayText.setTextAreaText(text);
   }

   @Override
   public Window getTopWindow() {
      return frame;
   }

   @Override
   public void setStatusText(String text) {
      statusBar.setText(text);
   }

}

class ViewDisplayText {
   private static final int TA_ROWS = 30;
   private static final int TA_COLS = 50;
   private static final int GAP = 2;
   private JPanel mainPanel = new JPanel();
   private JButton openFileButton = new JButton();
   private JButton saveToFileButton = new JButton();
   private JButton exitButton = new JButton();
   private JTextArea textArea = new JTextArea(TA_ROWS, TA_COLS);

   public ViewDisplayText() {
      JPanel buttonPanel = new JPanel(new GridLayout(1, 0, GAP, 0));
      buttonPanel.add(openFileButton);
      buttonPanel.add(saveToFileButton);
      buttonPanel.add(exitButton);

      mainPanel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
      mainPanel.setLayout(new BorderLayout());
      mainPanel.add(new JScrollPane(textArea), BorderLayout.CENTER);
      mainPanel.add(buttonPanel, BorderLayout.PAGE_END);
   }

   public void setExitAction(Action exitAction) {
      exitButton.setAction(exitAction);
   }

   public JComponent getMainComponent() {
      return mainPanel;
   }

   public void setOpenFileButtonAction(Action action) {
      openFileButton.setAction(action);
   }

   public void setSaveToFileAction(Action action) {
      saveToFileButton.setAction(action);
   }

   public String getTextAreaText() {
      return textArea.getText();
   }

   public void setTextAreaText(String text) {
      textArea.setText(text);
   }
}

class StatusBar {
   private static final String STATUS = "Status: ";
   private JLabel label = new JLabel(STATUS);

   public StatusBar() {
      label.setBorder(BorderFactory.createLineBorder(Color.black));
   }

   public JComponent getComponent() {
      return label;
   }

   public void setText(String text) {
      label.setText(STATUS + text);
   }
} 
```

## ShowTextModel 类

```
import java.beans.PropertyChangeListener;
import javax.swing.event.SwingPropertyChangeSupport;

public class ShowTextModel implements MvcModel {
   private String text;
   private String status;
   private SwingPropertyChangeSupport propChangeSupport = 
         new SwingPropertyChangeSupport(this);

   @Override
   public String getText() {
      return text;
   }

   @Override
   public void setText(String text) {
      String newValue = text;
      String oldValue = this.text;
      this.text = newValue;
      propChangeSupport.firePropertyChange(TEXT, oldValue, newValue);
   }

   @Override
   public void setStatus(String status) {
      String newValue = status;
      String oldValue = this.status;
      this.status = newValue;
      propChangeSupport.firePropertyChange(STATUS, oldValue, newValue);
   }

   @Override
   public void addPropertyChangeListener(PropertyChangeListener listener) {
      propChangeSupport.addPropertyChangeListener(listener);
   }

   @Override
   public void removePropertyChangeListener(PropertyChangeListener listener) {
      propChangeSupport.removePropertyChangeListener(listener);
   }

   @Override
   public String getStatus() {
      return status;
   }

} 
```

## ShowTextControl 类

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.util.concurrent.ExecutionException;
import javax.swing.*;

public class ShowTextControl {

   private MvcView view;
   private MvcModel model;

   public ShowTextControl(MvcView view, MvcModel model) {
      this.view = view;
      this.model = model;

      view.setFileAction(new FileAction("File", KeyEvent.VK_F));
      view.setOpenFileAction(new OpenFileAction(view, model, "Open File",
            KeyEvent.VK_O));
      view.setSaveToFileAction(new SaveToFileAction(view, model,
            "Save to File", KeyEvent.VK_S));
      view.setExitAction(new ExitAction(view, model, "Exit", KeyEvent.VK_X));

      model.addPropertyChangeListener(new ModelListener(view, model));
   }

   public void showView(boolean visible) {
      view.setVisible(visible);
   }
}

@SuppressWarnings("serial")
class OpenFileAction extends AbstractAction {
   private MvcView view;
   private MvcModel model;

   public OpenFileAction(MvcView view, MvcModel model, String name, int keyCode) {
      super(name);
      putValue(MNEMONIC_KEY, keyCode);
      this.view = view;
      this.model = model;
   }

   @Override
   public void actionPerformed(ActionEvent evt) {
      JFileChooser fileChooser = new JFileChooser();
      fileChooser.setMultiSelectionEnabled(false);
      int result = fileChooser.showOpenDialog(view.getTopWindow());
      if (result == JFileChooser.APPROVE_OPTION) {
         File file = fileChooser.getSelectedFile();
         if (file.exists()) {
            if (file.getName().endsWith(".txt")) {
               model.setStatus("Opening file \"" + file.getName() + "\"");

               OpenFileWorker openFileWorker = new OpenFileWorker(file);
               openFileWorker.addPropertyChangeListener(
                     new OpenFileWorkerListener(model));
               openFileWorker.execute();
            } else {
               model.setStatus("File \"" + file.getName()
                     + "\" is not a text file");
            }
         } else {
            model.setStatus("File \"" + file.getName() + "\" does not exist");
         }
      }
   }

}

class OpenFileWorker extends SwingWorker<String, Void> {
   private File file;

   public OpenFileWorker(File file) {
      this.file = file;
   }

   public File getFile() {
      return file;
   }

   @Override
   protected String doInBackground() throws Exception {
      StringBuilder stringBuilder = new StringBuilder();
      Scanner scan = null;
      try {
         scan = new Scanner(file);
         while (scan.hasNextLine()) {
            stringBuilder.append(scan.nextLine() + "\n");
         }

      } catch (FileNotFoundException e) {
         e.printStackTrace();
      } finally {
         if (scan != null) {
            scan.close();
         }
      }
      return stringBuilder.toString();
   }
}

class OpenFileWorkerListener implements PropertyChangeListener {
   private MvcModel model;

   public OpenFileWorkerListener(MvcModel model) {
      this.model = model;
   }

   @Override
   public void propertyChange(PropertyChangeEvent evt) {
      if (SwingWorker.StateValue.DONE == evt.getNewValue()) {
         OpenFileWorker openFileWorker = (OpenFileWorker) evt.getSource();
         try {
            String text = openFileWorker.get();
            model.setText(text);
            model.setStatus("File \"" + openFileWorker.getFile().getName() + "\" opened");
         } catch (InterruptedException e) {
            e.printStackTrace();
         } catch (ExecutionException e) {
            e.printStackTrace();
         }
      }
   }
}

@SuppressWarnings("serial")
class FileAction extends AbstractAction {
   public FileAction(String name, int keyCode) {
      super(name);
      putValue(MNEMONIC_KEY, keyCode);
   }

   @Override
   public void actionPerformed(ActionEvent arg0) {
      // pretty much empty
   }
}

@SuppressWarnings("serial")
class SaveToFileAction extends AbstractAction {
   private MvcView view;
   private MvcModel model;

   public SaveToFileAction(MvcView view, MvcModel model, String name,
         int keyCode) {
      super(name);
      putValue(MNEMONIC_KEY, keyCode);
      this.view = view;
      this.model = model;
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      // TODO finish!
   }
}

@SuppressWarnings("serial")
class ExitAction extends AbstractAction {
   private MvcView view;
   // private MvcModel model; // TODO: may use this later

   public ExitAction(MvcView view, MvcModel model, String name, int keyCode) {
      super(name);
      putValue(MNEMONIC_KEY, keyCode);
      this.view = view;
      // this.model = model; // TODO: may use this later
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      view.getTopWindow().dispose();
   }
}

class ModelListener implements PropertyChangeListener {
   private MvcView view;
   private MvcModel model;

   public ModelListener(MvcView view, MvcModel model) {
      this.view = view;
      this.model = model;
   }

   @Override
   public void propertyChange(PropertyChangeEvent pcEvt) {
      if (MvcModel.TEXT.equals(pcEvt.getPropertyName())) {
         view.setTextAreaText(model.getText());
      }

      else if (MvcModel.STATUS.equals(pcEvt.getPropertyName())) {
         view.setStatusText(model.getStatus());
      }
   }

} 
```

在此示例中，为了简洁起见，我将 java 类组合在一个文件中，但在应用程序中，它们将位于各自的文件中，但都将共享同一个包。请注意，虽然这对于这个简单的应用程序来说可能是“过度杀伤”，但我已经在几个非常大的 Swing 应用程序中使用了这种结构并取得了很好的成功。当我需要在创建几个月后调试或增强程序时，对我的主要好处是，因为这种关注点、信息和行为的分离使我更容易对程序的一部分进行更改，而不会冒犯或扰乱程序的另一部分。该程序。

此外，这些界面的原因是您可以创建新的或不同的 GUI，它们看起来不同，但可以以相同的方式响应。我还经常使用它们来帮助创建模拟类，使我能够更好地单独测试我的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:07:55.240

我建议使用 Action(s) 在那里使用。在每个动作上，您都有一些特定的动作侦听器，如果您愿意，可以将您的面板设置为侦听器：

[动作解释](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T11:41:16.460

您的问题的快速解决方法是提供一个处理程序，以便您可以附加 ActionListener。您在 中制作 JMenus `main()`，但在`DrawingPanel`. 完成此操作的一种廉价方法是将 JMenuItems 传递到您的 DrawingPanel 构造函数中。将构造函数修改为：

```
DrawingPanel(JMenuItem save, JMenuItem open) {
    // the stuff you already got
    this.save = save;
    this.open = open;
    save.addActionListener(this);
    open.addActionListener(this);
} 
```

然后您将它们传递到您的 DrawingPanel 中`main`：

```
JMenuItem loadMenuItem = new JMenuItem("Load");
JMenuItem saveMenuItem = new JMenuItem("Save");
...
frame.getContentPane(new DrawingPanel(saveMenuItem, loadMenuItem)); 
```

从 Java 风格的角度来看，尚不清楚是否`DrawingPanel`是处理保存和加载操作的最佳位置。正如其他人所提到的，为每个 JMenuItem 创建（单独的）Action 通常是一种更好的模式。在您的情况下，您可能能够在 DrawingPanel 中提供其他访问器或帮助器方法，这些方法将为保护器/加载器工作人员提供执行操作所需的信息。

* * *

**编辑：（**解决OP的“新代码”编辑）

我认为“新代码”的问题在于您在方法中制作了`new`JFileChooser `actionPerformed`，而不是使用您之前制作并添加到框架中的现有代码。如果您制作第一个，那么您可以在该方法 `final`中使用相同的 JFileChooser 。`actionPerformed`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T12:18:48.897

为了详细说明 Kitesurfer 所说的，我会使用 Action，因为大多数情况下我有工具栏按钮或其他组件执行与菜单项相同的操作。为了避免在类中的某处（或我能够从当前类访问它的任何地方）避免重复或不必要的代码，我创建了一个`Action`字段，如果需要，我可以重用该字段，或者如果我决定重构我的代码，我可以移动该字段。这是一个例子。

```
JMenuItem miLoad = new JMenuItem(actionLoad);

Action actionLoad = new AbstractAction("Load") {
    public void actionPerformed(ActionEvent e) {
        //your code to load the file goes here like a normal ActionListener
    }
}; 
```

一定要查看 API 以查看可以将哪些参数传递到`AbstractAction`类中，我使用了 a`String`所以`JMenuItem`会显示字符串，你也可以设置`Icon`，我不记得所有的构造函数，所以值得一看。哦，将它传递给类`JMenuItems`的构造函数`DrawingPanel`不一定是一个坏主意，但如果它继承自我`JPanel`不相信你可以将菜单栏添加到 a`JPanel`所以确保它也被添加到你的`JFrame`。希望有帮助。

# android - 调用facebook API的Android布局错误膨胀类

> ID：15728620
> 
> 赞同：1
> 
> 时间：2013-03-31T10:47:54.063
> 
> 标签：android, facebook, tabs, scrollable, inflate

我正在使用 Facebook API 开发一个带有导航“可滚动标签 + 滑动”的 Android 应用程序。现在，当我尝试调用类 UserSettingsFragment facebook API 并膨胀以合并到 TAB 中时，我收到一个我无法解决的错误。

这是代码：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        int fragment_seleccionado =getArguments().getInt(ARG_SECTION_NUMBER);
        switch (fragment_seleccionado)
        {
            case 1:
                View View1 = inflater.inflate(R.layout.login_fb,container, false);
                return View1;
            case 2:
                View View2 = inflater.inflate(R.layout.fragment_main_dummy,
                        container, false);
                TextView dummyTextView2 = (TextView) View2
                        .findViewById(R.id.section_label);
                dummyTextView2.setText("Entra por el 2");
                return View2;
            case 3:[....] 
```

当我尝试充气时失败的“login_fb.xml”文件是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Main$DummySectionFragment" >

<fragment android:layout_height="fill_parent"
          android:layout_width="fill_parent"
          android:id="@+id/login_fragment"
          android:name="com.facebook.widget.UserSettingsFragment" />

</RelativeLayout> 
```

现在，错误日志：

```
03-31 10:33:19.503: E/AndroidRuntime(631): FATAL EXCEPTION: main
03-31 10:33:19.503: E/AndroidRuntime(631): android.view.InflateException: Binary XML file line #12: Error inflating class fragment
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-31 10:33:19.503: E/AndroidRuntime(631):  at shooterfugio.aquiniela2.Main$DummySectionFragment.onCreateView(Main.java:247)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1251)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:625)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.view.ViewPager.populate(ViewPager.java:895)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1539)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.view.ViewPager.computeScroll(ViewPager.java:1422)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewGroup.drawChild(ViewGroup.java:2729)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.View.draw(View.java:10981)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.widget.FrameLayout.draw(FrameLayout.java:450)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.View.draw(View.java:10981)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.widget.FrameLayout.draw(FrameLayout.java:450)
03-31 10:33:19.503: E/AndroidRuntime(631):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2126)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewRootImpl.draw(ViewRootImpl.java:2026)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.os.Looper.loop(Looper.java:137)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.app.ActivityThread.main(ActivityThread.java:4424)
03-31 10:33:19.503: E/AndroidRuntime(631):  at java.lang.reflect.Method.invokeNative(Native Method)
03-31 10:33:19.503: E/AndroidRuntime(631):  at java.lang.reflect.Method.invoke(Method.java:511)
03-31 10:33:19.503: E/AndroidRuntime(631):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-31 10:33:19.503: E/AndroidRuntime(631):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-31 10:33:19.503: E/AndroidRuntime(631):  at dalvik.system.NativeStart.main(Native Method)
03-31 10:33:19.503: E/AndroidRuntime(631): Caused by: java.lang.IllegalArgumentException: Binary XML file line #12: Duplicate id 0x7f040019, tag null, or parent id 0x0 with another fragment for com.facebook.widget.UserSettingsFragment
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:277)
03-31 10:33:19.503: E/AndroidRuntime(631):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
03-31 10:33:19.503: E/AndroidRuntime(631):  ... 36 more 
```

如何解决？

非常感谢您的帮助，并对我的英语水平低感到抱歉。

# php - Web 服务器 (PHP) 如何成为第一个连接到 Android 应用程序的方式

> ID：15728626
> 
> 赞同：0
> 
> 时间：2013-03-31T10:48:49.510
> 
> 标签：php, android, web-services

Web 服务器（pHP）如何成为第一个连接到 android 应用程序的方式？是否有允许服务器（PHP）成为第一个连接到 Android 应用程序的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:20:55.663

正如上面评论中提到的@greenapps，网络服务器通常不会直接连接到您的安卓应用程序。

在这种情况下，您需要在您的android应用程序和Web服务器之间设计一个接口，基本上您可以通过`POST/GET`方法将您的数据发送到您的Web服务器并通过编码获得结果`JSON`，有关更多信息，我建议您看一下[这篇](http://www.vogella.com/articles/AndroidJSON/article.html)文章。

这里还有一个有用的例子：

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:32:19.060

服务器无法连接到客户端，如移动设备，原因有多种：

1.  服务器不知道客户端 IP - 它是动态分配的
2.  客户端没有运行 PHP 服务器可以连接的任何服务器
3.  为了让服务器连接到客户端，它必须能够创建一个到其他服务器的套接字。

好吧，简而言之，这不是您使用移动+服务器的方式。

你到底在寻找什么？

# ruby-on-rails - 多个 HTML 属性 Simple_form_for

> ID：15728628
> 
> 赞同：0
> 
> 时间：2013-03-31T10:49:00.060
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, twitter-bootstrap

我有一个带有 simple_form_for 元素的新页面，如下所示

```
<%= simple_form_for @invoice, :html => { :class => 'form-horizontal' } do |f| %>
  <%= render "shared/error_messages", :target => @invoice %>

  <%= f.association :customer %>
  <%= f.input :invoice_date, as: :string, input_html: { class: "datepicker"} %>
<% end %> 
```

我正在尝试将日历元素合并到上面的表单中，来自 unicorm 管理模板主题。我的资产文件包含 bootstrap-datepicker.js，我试图将其合并到上面的表单中。每当我向 invoice_date 输入添加额外的 HTML 属性时，都会出现语法错误。

我试过这个

```
<%= f.input :invoice_date, as: :string, input_html: { class: "datepicker", data-date-format="dd-mm-yyyy"} %> 
```

这产生了一个错误。如何将日历功能从我的模板中的 bootstrap-datepicker.js 合并到上面的 invoice_date？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:15:42.613

您的代码行中有一个错误`=`的符号。此外，由于您的哈希中有一个符号键，其中包含破折号 ( `data-date-format`)，因此您需要使用旧样式的 'hashrocket' 符号格式。

你可以这样做：

```
<%= f.input :invoice_date, as: :string, input_html: { class: "datepicker", :'data-date-format' => "dd-mm-yyyy"} %> 
```

我不喜欢混合这两种风格，所以你也可以这样做：

```
<%= f.input :invoice_date, :as => :string, :input_html => { :class => "datepicker", :'data-date-format' => "dd-mm-yyyy"} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:15:34.237

我弄清楚了问题所在，我没有将 twitter bootstrap 添加到我的项目中

# unicode - 如何使用 qstring 作为 char 数组

> ID：15728629
> 
> 赞同：1
> 
> 时间：2013-03-31T10:49:05.510
> 
> 标签：unicode, qstring, arrays

我正在尝试编写一个函数来确定这个词是否是格鲁吉亚语。我为拉丁字符写了它并且它有效。现在我正在尝试将其更改为按字符读取 QString 字符并与格鲁吉亚的第一个和最后一个字母进行比较。我怎样才能做到这一点？我做错了什么？

```
bool Georgianword(QString &sit)
{ int i=0;

      QByteArray ba = sit.toUtf8();
while (i<sit.size())
{
    if (ba[i]<'ა' || ba[i]>'ჰ')
        break;
    i++;
}

return (i==sit.size());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:47:33.420

如果将字符串编码为 UTF-8，则处理的是 UTF-8 代码单元（可能只是多字节序列的一部分的单字节），而不是代码点。最好的解决方案是简单地使用 QString 迭代器：

```
for (QString::iterator it = sit.begin(); it != sit.end(); ++it) {
    if (*it < 'ა' || *it > 'ჰ') {
        ...
    }
} 
```

# iphone - 如何在 iOS 上固定证书的公钥

> ID：15728636
> 
> 赞同：52
> 
> 时间：2013-03-31T10:51:01.180
> 
> 标签：iphone, ios, ipad, security, ssl

在提高我们正在开发的 iOS 应用程序的安全性时，我们发现需要 PIN（全部或部分）服务器的 SSL 证书以防止中间人攻击。

尽管有多种方法可以做到这一点，但当您搜索这个时，我只找到了固定整个证书的示例。这种做法会带来一个问题：一旦证书更新，您的应用程序将无法再连接。如果您选择固定公钥而不是整个证书，您会发现自己（我相信）处于同样安全的情况下，同时对服务器中的证书更新更有弹性。

但是你怎么做呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-31T10:51:01.180

如果您需要知道如何从 iOS 代码中的证书中提取此信息，这里有一种方法可以做到。

首先添加安全框架。

```
#import <Security/Security.h> 
```

添加 openssl 库。[您可以从https://github.com/st3fan/ios-openssl](https://github.com/st3fan/ios-openssl)下载它们

```
#import <openssl/x509.h> 
```

NSURLConnectionDelegate 协议允许您决定连接是否应该能够响应保护空间。简而言之，此时您可以查看来自服务器的证书，并决定允许连接继续还是取消。您在这里要做的是将证书公钥与您固定的公钥进行比较。现在的问题是，你如何获得这样的公钥？看看下面的代码：

首先获取 X509 格式的证书（为此您需要 ssl 库）

```
const unsigned char *certificateDataBytes = (const unsigned char *)[serverCertificateData bytes];
X509 *certificateX509 = d2i_X509(NULL, &certificateDataBytes, [serverCertificateData length]); 
```

现在我们准备读取公钥数据

```
ASN1_BIT_STRING *pubKey2 = X509_get0_pubkey_bitstr(certificateX509);

NSString *publicKeyString = [[NSString alloc] init]; 
```

此时，您可以遍历 pubKey2 字符串并将 HEX 格式的字节提取为具有以下循环的字符串

```
 for (int i = 0; i < pubKey2->length; i++)
{
    NSString *aString = [NSString stringWithFormat:@"%02x", pubKey2->data[i]];
    publicKeyString = [publicKeyString stringByAppendingString:aString];
} 
```

打印公钥以查看它

```
 NSLog(@"%@", publicKeyString); 
```

完整的代码

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
const unsigned char *certificateDataBytes = (const unsigned char *)[serverCertificateData bytes];
X509 *certificateX509 = d2i_X509(NULL, &certificateDataBytes, [serverCertificateData length]);
ASN1_BIT_STRING *pubKey2 = X509_get0_pubkey_bitstr(certificateX509);

NSString *publicKeyString = [[NSString alloc] init];    

for (int i = 0; i < pubKey2->length; i++)
 {
     NSString *aString = [NSString stringWithFormat:@"%02x", pubKey2->data[i]];
     publicKeyString = [publicKeyString stringByAppendingString:aString];
 }

if ([publicKeyString isEqual:myPinnedPublicKeyString]){
    NSLog(@"YES THEY ARE EQUAL, PROCEED");
    return YES;
}else{
   NSLog(@"Security Breach");
   [connection cancel];
   return NO;
}

} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-24T13:49:43.370

据我所知，您无法直接在 iOS 中轻松创建预期的公钥，您需要通过证书来完成。因此所需的步骤类似于固定证书，但另外您需要从实际证书和参考证书（预期的公钥）中提取公钥。

你需要做的是：

1.  使用 NSURLConnectionDelegate 检索数据，并实现`willSendRequestForAuthenticationChallenge`.
2.  包括[DER](https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them)格式的参考证书。在示例中，我使用了一个简单的资源文件。
3.  提取服务器提供的公钥
4.  从您的参考证书中提取公钥
5.  比较两者
6.  如果它们匹配，则继续进行常规检查（主机名、证书签名等）
7.  如果它们不匹配，则失败。

一些示例代码：

```
 (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    // get the public key offered by the server
    SecTrustRef serverTrust = challenge.protectionSpace.serverTrust;
    SecKeyRef actualKey = SecTrustCopyPublicKey(serverTrust);

    // load the reference certificate
    NSString *certFile = [[NSBundle mainBundle] pathForResource:@"ref-cert" ofType:@"der"];
    NSData* certData = [NSData dataWithContentsOfFile:certFile];
    SecCertificateRef expectedCertificate = SecCertificateCreateWithData(NULL, (__bridge CFDataRef)certData);

    // extract the expected public key
    SecKeyRef expectedKey = NULL;
    SecCertificateRef certRefs[1] = { expectedCertificate };
    CFArrayRef certArray = CFArrayCreate(kCFAllocatorDefault, (void *) certRefs, 1, NULL);
    SecPolicyRef policy = SecPolicyCreateBasicX509();
    SecTrustRef expTrust = NULL;
    OSStatus status = SecTrustCreateWithCertificates(certArray, policy, &expTrust);
    if (status == errSecSuccess) {
      expectedKey = SecTrustCopyPublicKey(expTrust);
    }
    CFRelease(expTrust);
    CFRelease(policy);
    CFRelease(certArray);

    // check a match
    if (actualKey != NULL && expectedKey != NULL && [(__bridge id) actualKey isEqual:(__bridge id)expectedKey]) {
      // public keys match, continue with other checks
      [challenge.sender performDefaultHandlingForAuthenticationChallenge:challenge];
    } else {
      // public keys do not match
      [challenge.sender cancelAuthenticationChallenge:challenge];
    }
    if(actualKey) {
      CFRelease(actualKey);
    }
    if(expectedKey) {
      CFRelease(expectedKey);
    }
 } 
```

免责声明：这只是示例代码，未经彻底测试。要完整实施，请从[OWASP 的证书固定示例](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning#iOS)开始。

[请记住，使用SSL Kill Switch](https://github.com/iSECPartners/ios-ssl-kill-switch)和类似工具始终可以避免证书锁定。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-28T00:57:00.350

`SecTrustCopyPublicKey`您可以使用Security.framework的功能进行公钥 SSL 固定。请参阅AFNetworking 项目的[connection:willSendRequestForAuthenticationChallenge:示例。](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFURLConnectionOperation.m#L551)

如果您需要 iOS 的 openSSL，请使用[https://gist.github.com/foozmeat/5154962](https://gist.github.com/foozmeat/5154962)它基于 st3fan/ios-openssl，目前无法使用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-22T13:53:03.813

您可以使用此处提到的 PhoneGap（构建）插件：[http ://www.x-services.nl/certificate-pinning-plugin-for-phonegap-to-prevent-man-in-the-middle-attacks/734](http://www.x-services.nl/certificate-pinning-plugin-for-phonegap-to-prevent-man-in-the-middle-attacks/734)

该插件支持多个证书，因此服务器和客户端不需要同时更新。如果您的指纹每（例如）2 年更改一次，则实施一种强制客户端更新的机制（向您的应用程序添加一个版本并在服务器上创建一个“minimalRequiredVersion”API 方法。如果应用程序版本是，请告诉客户端更新太低（激活新证书时的 fi）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-22T22:16:05.833

如果您使用 AFNetworking（更具体地说，AFSecurityPolicy），并且选择了 AFSSLPinningModePublicKey 模式，那么您的证书是否更改并不重要，只要公钥保持不变即可。是的，AFSecurityPolicy 确实没有为您提供直接设置公钥的方法；您只能通过调用来设置您的证书`setPinnedCertificates`。但是，如果您查看 setPinnedCertificates 的实现，您会看到该框架正在从证书中提取公钥，然后比较这些密钥。

简而言之，把证书传进去，以后不用担心它们会变。该框架只关心这些证书中的公钥。

以下代码适用于我。

```
AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
manager.securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModePublicKey];
[manager.securityPolicy setPinnedCertificates:myCertificate]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-27T04:44:04.940

> ...用于固定整个证书。这样的做法有问题……

此外，谷歌每月（左右）更改证书，但保留或重新认证公众。所以证书固定会导致很多虚假警告，而公钥固定会通过密钥连续性测试。

我相信谷歌这样做是为了保持 CRL、OCSP 和撤销列表的可管理性，我希望其他人也会这样做。对于我的网站，我通常会重新认证密钥，以便人们确保密钥的连续性。

> 但是你怎么做呢？

[证书和公钥固定](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning)。本文讨论了这种做法，并提供了适用于 OpenSSL、Android、iOS 和 .Net 的示例代码。iOS 上讨论的框架中的 iOS 至少存在一个问题[：Provide Meaningful Error from NSUrlConnection didReceiveAuthenticationChallenge (Certificate Failure)](https://stackoverflow.com/questions/15077945/ios-provide-meaningful-error-from-nsurlconnection-didreceiveauthenticationchall)。

[此外，Peter Gutmann 在他的《工程安全](http://www.cs.auckland.ac.nz/~pgut001/pubs/book.pdf)》一书中对密钥连续性和固定进行了很好的处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-28T03:54:09.903

如果您使用 AFNetworking，请使用`AFSecurityPolicy *policy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModePublicKey];`

# java - MongoDB、编组、JAXB 和 JSON

> ID：15728638
> 
> 赞同：2
> 
> 时间：2013-03-31T10:51:03.103
> 
> 标签：java, mongodb, jaxb, jersey, marshalling

所以我真的很困惑，所以希望我的要求是有道理的。我应该注意，这是家庭作业，但我只是在一小部分寻求帮助。

以下是我的数据类的简化和通用版本：

```
@XmlRootElement(name="item")
@XmlType(propOrder={"name", "value"})
public class Item {

    private String name;
    private int value;

    @XmlElement(name="name")    
    public String getName() {
        return name;
    }

    @XmlElement(name="value")   
    public int getValue() {
        return value;
    }

} 
```

和

```
@XmlRootElement(name="itemcontainer")
@XmlType(propOrder={ "name", "items"})
public class ItemContainer {

    private String name;
    private ArrayList<Item> items;

    @XmlElement(name="name")
    public String getName() {
        return name;
    }

    @XmlElement(name="items")
    public ArrayList<Item> getItem() {
        return item;
    }
} 
```

我需要做的是在 JSON 之间来回转换 ItemContainer 对象以存储在 MongoDB 数据库中。（必须是 MongoDB）

据我了解 ArrayLists 无法编组。

我最终需要做的是从 MongoDB 数据库中读取数据，将 JSON 解组为 Java 对象，对这些对象执行操作，然后将它们编组回 JSON 以存储在数据库中。

我需要更改或做什么才能在 JSON 和 ItemContainer 之间进行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:39:36.573

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

下面是如何使用 MOXy 的 JSON 绑定来支持您的用例。

**富**

下面是我们将用于此示例的 Java 模型。

```
public class Foo {

    private String bar;

    public String getBar() {
        return bar;
    }

    public void setBar(String bar) {
        this.bar = bar;
    }

} 
```

**jaxb.properties**

`jaxb.properties`要将 MOXy 指定为您的 JAXB 提供程序，您需要在与域模型相同的包中包含 一个名为的文件，该文件包含以下内容（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy- as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Foo.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum15728638/input.json");
        List<Foo> foos = (List<Foo>) unmarshaller.unmarshal(json, Foo.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foos, System.out);
    }

} 
```

**输入.json/输出**

```
[ {
   "bar" : "Hello"
}, {
   "bar" : "World"
} ] 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# php - PHP/AJAX：似乎无法将 ajax 结果显示到 DIV，但在 ALERT() 中有效

> ID：15728641
> 
> 赞同：1
> 
> 时间：2013-03-31T10:51:09.420
> 
> 标签：php, html, jquery, xmlhttprequest, jquery-append

我目前正在通过一个真实的网站项目学习 PHP，并希望使用 Ajax 调用来更改网站的各个部分。

> **代码示例**

我的项目.js

```
$(document).ready(function() {
    $("#inventory").click(function() {
        $.ajaxSetup({
            url: "sectionhandler.php?section='inventory'",
            type: "get",
            dataType: "html"
        });
        $.ajax().done(function(html) { 
            alert(html); // This works!
            $("#section").html(html); // This doesn't work.
            $("#section").append(html); // This neither.
        });
    });
}); 
```

库存.html

```
<table><tr><td>Hello world with AJAX!</td></tr></table> 
```

段处理程序.php

```
<?php echo file_get_contents( 'inventory.html' ); ?> 
```

菜单.html

```
<a id="inventory" href="">Inventory</a> 
```

索引.php

```
<div id="menu" class="content"><?php echo file_get_contents( 'menu.html' ); ?></div>
<div id="section" class="content"></div> 
```

> **找到并阅读和尝试过相关文章**

1.  [XMLHttpRequest 在 IE 7/8 中不起作用，但在其他浏览器中起作用](https://stackoverflow.com/questions/5418403/xmlhttprequest-wont-work-in-ie-7-8-but-works-in-other-browsers)
2.  [jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)
3.  [jQuery.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup/)
4.  [。附加（）](http://api.jquery.com/append/)
5.  [jquery .html() 与 .append()](https://stackoverflow.com/questions/3015335/jquery-html-vs-append)
6.  [无法使用 jQuery 将 HTML 代码附加到一个 div 中](https://stackoverflow.com/questions/4282655/cant-append-html-code-into-one-div-by-using-jquery)
7.  [使用效果 jQuery 将 Html 添加到 Div](https://stackoverflow.com/questions/6606029/add-html-to-div-with-effect-jquery)
8.  [使用 append() 将文本/html 添加到带有 jQ​​uery 的元素](http://www.electrictoolbox.com/jquery-append-add-text-to-element/)

还有更多...

> **结果**

当我单击 Inventory 中包含`menu.html`并通过 显示的链接时`index.php`，jQuery 代码执行得很好。我从服务器获取结果，同时`inventory.html`从`alert()`.

但是，当我将 设置为`innerHTML`时`<div id="section" class="content"></div>`，我似乎无法获得预期的结果。页面的背景似乎闪烁，虽然不应该按照 Ajax 定义，并且我的内容`XMLHttpRequest.responseText`永远不会显示。

当我双击`Inventory`链接时，我越接近让它工作，所以在页面背景的第一次“闪烁”之后，它显示了我的部分的内容。

我尝试了多种使用经典 Javascript 和标签上的`onclick`元素的方法`<a>`，我尝试过使用`document.getElementById("section")`，虽然获得了正确的元素，但我无法在页面上显示我的内容。

欢迎任何想法！

提前致谢 ！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:00:48.827

尽一切可能，您需要防止浏览器默认行为：

```
$("#inventory").click(function(event) {

    event.preventDefault();

    ...

}); 
```

注意`event`添加到点击处理程序的参数。

顺便说一句，您的 HTML 响应是无效的 - a`<table>`应该包含一个包装任何s的`<tbody>`元素。`<tr>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:32:21.587

按照要求。更简单的解决方案

```
$("#section").load("sectionhandler.php?section=inventory"); 
```

[jQuery .load()](http://api.jquery.com/load/)

# exit - 如何退出csh中的调用脚本？

> ID：15728647
> 
> 赞同：0
> 
> 时间：2013-03-31T10:51:27.427
> 
> 标签：exit, csh

我有一个`csh`脚本 ( `a.csh`) 调用另一个 ( `./b.csh`)。`a.csh`如果在运行时不满足某些条件，我该如何退出`b.csh`？

这是我的称呼`b.csh`

```
b.csh >&! b.csh.log 
```

`bash` [如何退出bash中的所有调用脚本](https://stackoverflow.com/questions/2216200/how-to-exit-all-the-calling-scripts-in-bash)有一个相关的问题？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T23:34:38.590

在内部`b.csh`，使用它来终止`a.csh`而不终止`b.csh`：

```
set PPID = `ps -ef | awk -v pid="$$" '{if ($2 == pid) {print $3}}'`
kill $PPID 
```

在类似 bash 的 shell 中，`$PPID`已定义，但对于 csh，我们必须手动提取它。

`$$`返回当前进程 ID (pid)（即 的 pid `b.csh`）。

# c# - 如何在 DDD 中对聚合进行建模并持久化到数据库

> ID：15728648
> 
> 赞同：2
> 
> 时间：2013-03-31T10:51:31.390
> 
> 标签：c#, domain-driven-design, aggregate

我只是想摆脱存储库/服务/演示的典型 N 层架构的舒适区，并开始使用聚合查看 DDD，我不得不承认我有点困惑，希望有人能澄清以下内容例子：

如果我有一个名为 News、NewsImage 和 Customer 的实体，它们都是 EF 可持久对象，如下所示：

```
public class Customer
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
}

public class NewsImage
{
    public virtual int Id { get; set; }
    public virtual byte[] Data { get; set; }
    public virtual News News { get; set; }
}

public class News
{ 
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<NewsImage> NewsImages { get; set; }
    public virtual Customer Customer { get; set; }
} 
```

据我了解，这些可能是我们用来将域对象持久保存到数据库的对象，但如果我们使用来自域模型的聚合，我们可能会有这样的东西：

```
public class NewsAggregate
{
    public int Id { get; set; }
    public string Name { get; set }

    public void AddImageToNews(byte[] imageData)
    {
         // Hide NewsImage or that object and add the byte[] data here?
    }
} 
```

我的问题如下，我很感激任何澄清，因为我确定我误解了这里的基本原则：

1.  只有聚合对象应该暴露给表示层（或任何消费层）。
2.  如何处理将聚合对象转换/持久化到数据库，我可以使用映射，这很好，但是我怎么知道我是在创建对象还是在更新（如果设置了 Id，它是否是瞬态的？） . 我如何知道是否已添加新图像以及更新或删除哪些图像？我认为我遇到的问题是我调用 create 将新闻聚合传递给存储库并创建它，然后我可以从通过 EF 实体填充的域中获取聚合，然后添加图像，当我传递新闻聚合时返回 我如何知道为了创建/更新数据而发生了什么变化？
    1.  客户应该去哪里，是否应该作为 AddCustomer 方法在新闻聚合对象上，是否应该有一个具有 AddNews 方法的 CustomerAggregate 以及这两个选项如何持续存在？

非常感谢您的任何见解，我一直在阅读并查看示例项目，这些项目展示了这个概念，但似乎并没有完全解释实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:45:11.803

首先：DDD 不建议您使用任何特定的架构。我在 DDD 中使用了许多不同的架构，您应该使用对任务有益的架构。显然，如果以数据驱动的方式思考，DDD 会遇到很多问题。

DDD 是一种旨在应对复杂业务规则的方法。如果您的应用程序价值在于技术资产（如在云中、公开 Web 服务或一些漂亮的 html5/移动 UI），则不应使用它，而是在于它处理的业务的复杂性。
您不应该将 DDD 用于简单的业务规则。经验法则是：如果您不需要领域专家来了解业务，那么您根本不需要 DDD。

然后，要正确理解聚合，您应该阅读 Vernon[关于该主题的文章](http://dddcommunity.org/library/vernon_2011/)。那篇文章解释说，**存在聚合是为了确保业务不变量**。你不应该**仅仅**为了优化数据库访问而使用聚合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:59:46.497

1）这取决于容量。有一条规则规定聚合只能直接引用其他聚合 - 而不是其他聚合中包含的实体或值对象。这是为了强制聚合作为一致性边界——它们完全封装了它们“聚合”的内容。每个聚合应该有一个存储库。表示层和任何外层都可能需要以两种通用能力引用聚合 - 用于显示目的或行为目的。聚合不应该过多关注它的显示方式，因为可以使用更适合该任务的不同模型来实现查询 -[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/). 相反，聚合应该关注行为。是的，在表示层希望在聚合上执行行为的情况下，它应该通过其身份引用聚合。更好的是，创建一个[应用程序服务](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)来封装领域层并将行为公开为一个简单的外观。

此外，聚合不是单个类，而是通常围绕作为实体的聚合根聚集的一组类。您不一定需要一个单独的类来表示聚合，它可能只是根实体。

2) 对于持久性，您似乎正在使用 EF，它应该为您处理所有更改跟踪。它应该跟踪哪些对象是持久的或哪些是瞬态的。诸如 NHibernate 之类的 ORM 也可以做到这一点。

2.1) 这取决于`Customer`它本身是否是一个聚合体。如果是这样，`News`则应`Customer`仅通过 ID 引用。此外，新闻实体可能需要客户，在这种情况下，应将客户 ID 传递给新闻实体的构造函数。如果不需要，则存在将客户与新闻实体相关联的行为。从领域的角度考虑这一点 - 将客户与新闻实体相关联的含义是什么？尝试摆脱以技术、CRUD 方式`AddCustomer`思考，更多地考虑周围的业务意图。

**正如Giacomo Tesio**所指出的，DDD 在业务逻辑有些复杂的领域中显示出它的价值。如果您的所有行为都可以映射到 CRUD，则将其保留为 CRUD。否则，请在您的领域中寻找行为，而不是专注于数据。您的实体和值对象应尽可能地公开行为并隐藏状态。请阅读并重新阅读参考文章：[Vaughn Vernon 的有效聚合设计](http://dddcommunity.org/library/vernon_2011/)。

# android - 在 Android 中对低于 11 的 API 使用“USER_ROTATION”（解决方法？）

> ID：15728651
> 
> 赞同：15
> 
> 时间：2013-03-31T10:52:00.497
> 
> 标签：android, rotation

在我的应用程序中，我使用以下命令：

```
Settings.System.putInt(getContentResolver(), Settings.System.USER_ROTATION, m_lockedInOrientation) 
```

正如[Android 网站](http://developer.android.com/reference/android/provider/Settings.System.html#USER_ROTATION)中提到的，当 android 找不到时，这将设置默认方向。：

> 没有其他策略适用时的默认屏幕旋转。当 ACCELEROMETER_ROTATION 为零且屏幕上没有 Activity 表示偏好时，将使用此旋转值。

目前，这是我的应用无法在 Android 2.X 上运行但只能在 3.X+ 上运行的唯一原因。
有没有人知道解决它的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-18T12:50:37.240

```
 //vetical position
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); // Make to run your application only in portrait mode
  //HORIZONDEL setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SCREEN_ORIENTATION_LANDSCAPE); 
```

# android - Android：在用户许可的情况下在主屏幕上创建活动

> ID：15728652
> 
> 赞同：1
> 
> 时间：2013-03-31T10:52:09.963
> 
> 标签：android, android-widget, android-activity

我创建了一个小部件，它工作正常。如果用户愿意，他可以在主屏幕上添加我的应用程序的小部件。但是，我想要的是，我自己的代码在用户许可的情况下“将小部件放在主屏幕上”；因为小部件是应用程序中最重要的部分，没有它就毫无用处。

我想实现以下内容：

一个。例如，当应用程序尝试启动蓝牙时，系统会告诉用户“好的，伙计，此应用程序要打开蓝牙，您要允许吗？”。同样，“应用程序 X 正在尝试创建主屏幕小部件，您要允许吗？”。

或者

湾。当您尝试手动将小部件添加到主屏幕时，系统会显示一个可用小部件列表，您可以从中选择，然后选择您想要的。当我的应用程序启动时，有什么方法可以从我的代码中调用这个“小部件活动列表”？

感谢您的建议！

# java - Java：系统地忽略从字典中随机选择的某些 4 字母单词？

> ID：15728653
> 
> 赞同：1
> 
> 时间：2013-03-31T10:52:15.783
> 
> 标签：java

这个有点奇怪。我正在编写的代码是针对特定文字游戏的，因此非常专业。

我有一个`HashMap<Integer, String>`在运行时包含 4036 个索引的 4 字母单词。在同一堂课中，我还有一个方法`random()`可以从 said 中随机选择一个单词`HashMap`。这是玩家开头的单词。然后，他或她将一次更改单词 1 个字母以形成新的有效单词。例如，*五*->*火*->*电线*->*明智*->*愿望*->*等*。显然，我不希望选择启动播放器的第一个单词是不可更改的（即，更改一个字母不会产生任何单词）。

所以，我需要一种不同的方法来检查随机选择的单词是否符合这个标准。我猜我需要遍历所有 4036 个条目。这很容易，但是我如何检查是否有任何单词与随机选择的单词相差 1 个字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:58:55.417

取这两个词，逐个字母地比较它们。由于相同的字母必须位于相同的位置，因此这只需要一个检查不超过四个字母的循环。每次看到差异时，增加一个计数器。如果计数器达到 2，则单词在多个位置上有所不同。如果在四个字符的循环结束后计数器等于 1，则您有两个单词在一个位置上完全不同：

```
boolean differByOne(String w1, String w2) {
    int count = 0;
    for (int i = 0 ; i != 4 ; i++) {
        if (w1.charAt(i) != w2.charAt(i)) count++;
        if (count > 1) return false;
    }
    return count == 1;
} 
```

# java - 如何使用php将参数传递给java？

> ID：15728654
> 
> 赞同：4
> 
> 时间：2013-03-31T10:52:23.607
> 
> 标签：java, php, yii, jasper-reports, jasperserver

如何使用php将参数传递给java？

我正在尝试这样做：

这是我的php代码

id 是从我的视图中发布的。

```
$id=$_POST['id'];
$Plb_Entrance = Yii :: t('report','ENTRANCE');
$Plb_Block = Yii :: t('report','BLOCK'); 
$sql=sprintf("SELECT *  from table WHERE id='".id."'");

$this->format='pdf';
$this->locale='en';
$this->reportfile='jr_print';
$this->params="
    <parameter name='Plb_Entrance'><![CDATA[$Plb_Entrance]]</parameter>
    <parameter name='Plb_Block'><![CDATA[$Plb_Block]]></parameter>
    <parameter name='pQueryCondition'><![CDATA[$sql]]></parameter>";
       **this one is normal i passed to jasperserver one** 
```

这是我的 java 代码 -**现在我想将值从 php 传递给这个 java 代码**

```
Map params = new HashMap();
params.put("Plb_Entrance", "**This value is passing from php**");
params.put("Plb_Block", "BLOCK");
params.put("pQueryCondition","ROW"); 
```

那么可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:44:16.683

对于集成，您可以使用消息传递，例如 STOMP 和 jms。将 java 应用程序公开为 REST API 并使用 curl/php lib 调用它是有效的。

在这里，您有一个使用 Jetty 将您的 java 应用程序公开为 Servlet 的示例。[http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)

在这里，一个简单而详细的 curl/PHP 教程。[http://codular.com/curl-with-php](http://codular.com/curl-with-php)

# matlab - 如何在 MATLAB 中将矩阵除以标量？

> ID：15728655
> 
> 赞同：1
> 
> 时间：2013-03-31T10:52:42.560
> 
> 标签：matlab, matrix, division, scalar

只是在使用 MATLAB 将矩阵的所有值除以标量时遇到一些问题。

我的代码看起来像，

```
ncol = length(indpic(1,:)); % ncol = 32
row0 = sum(indpic == 0,2); % 161 * 1 matrix
rowprob0 = 'row0' / 'ncol'; 
```

但最后一行一直导致错误。我尝试了以下方法，但它们都没有工作，

```
rowprob0 = 'row0' ./ 'ncol';
rowprob0 = 'row0' * (1/('ncol'))';
rowprob0 = 'row0' .* (1/('ncol'))'; 
```

我也尝试过解决这个问题，但效果更差，

```
ncol = length(indpic(1,:)); % ncol = 32
row0 = sum(indpic == 0,2); % 161 * 1 matrix
id_ncol_1 = eye(ncol,ncol);
id_ncol = (id_ncol_1).*(ncol);
rowprob0 = 'row0' / 'id_ncol'; 
```

如果有人可以帮助我，那将不胜感激:) 提前欢呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:25:18.290

你为什么写`row0`和`ncol`引号？只需除以 `row0`得到`ncol`结果。

```
ncol = length(indpic(1,:)); % ncol = 32
row0 = sum(indpic == 0,2); % 161 * 1 matrix
rowprob0 = row0/ncol  %or row0./ncol, doesn't make a difference when dividing by a scalar 
```

# javascript - 将 2 个 MongoDB 集合对象与下划线或其他内容结合起来？

> ID：15728657
> 
> 赞同：1
> 
> 时间：2013-03-31T10:53:06.513
> 
> 标签：javascript, mongodb, mongoose, underscore.js

我正在查询所有`comments`和`commentLikes`. 本质上，我在我的视图中循环浏览评论集合，但我需要`commentLikes`与`comments`. 现在`commentLikes`有一个引用`comments._id`as `commentLikes.comment_id`。

我正在考虑为此使用下划线，因为看起来有一些不错的实用功能，但我会使用哪些？我最终玩了，`_.where`但不确定这是否是适合这项工作的工具。

这是最好的方法吗？

```
var comments = 
[ { submission_id: '513d3702b99f8b1ca5000026',
    comment: 'asdfnasdfoiasdfiosdaf',
    user_id: '1',
    _id: '5157e79c562277e457000011',
    deleted: false,
    created: 'Sun Mar 31 2013 00:37:00 GMT-0700 (PDT)',
    parent_id: null },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment: 'asdfioasdfoiasdjiofasdijofjiasodf',
    user_id: '1',
    _id: '5157e799562277e457000010',
    deleted: false,
    created: 'Sun Mar 31 2013 00:36:57 GMT-0700 (PDT)',
    parent_id: null },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment: 'sdafijsadjiofasoijfjaiosdfjioasdfjiosdaf',
    user_id: '1',
    _id: '5157e797562277e45700000f',
    deleted: false,
    created: 'Sun Mar 31 2013 00:36:55 GMT-0700 (PDT)',
    parent_id: null },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment: 'asdfjiadsfojidfsjoaifdaijofdasijods',
    user_id: '1',
    _id: '5157e794562277e45700000e',
    deleted: false,
    created: 'Sun Mar 31 2013 00:36:52 GMT-0700 (PDT)',
    parent_id: null },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment: 'asdfiasdfijoasdfoijas',
    user_id: '1',
    _id: '5157e40227bf651157000280',
    deleted: false,
    created: 'Sun Mar 31 2013 00:21:38 GMT-0700 (PDT)',
    parent_id: null } ];

var commentLikes =
    [ { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e40227bf651157000280',
    user_id: 1,
    _id: '5157e40527bf651157000286',
    created: 'Sun Mar 31 2013 00:21:41 GMT-0700 (PDT)' },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e40227bf651157000280',
    user_id: 1,
    _id: '5157e40b27bf65115700028e',
    created: 'Sun Mar 31 2013 00:21:47 GMT-0700 (PDT)' },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e797562277e45700000f',
    user_id: 1,
    _id: '5157e7cc9c1fe3ed57000001',
    created: 'Sun Mar 31 2013 00:37:48 GMT-0700 (PDT)' },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e799562277e457000010',
    user_id: 1,
    _id: '5157e7cd9c1fe3ed57000002',
    created: 'Sun Mar 31 2013 00:37:49 GMT-0700 (PDT)' },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e79c562277e457000011',
    user_id: 1,
    _id: '5157e7ce9c1fe3ed57000003',
    created: 'Sun Mar 31 2013 00:37:50 GMT-0700 (PDT)' },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e79c562277e457000011',
    user_id: 1,
    _id: '5157e7d19c1fe3ed57000004',
    created: 'Sun Mar 31 2013 00:37:53 GMT-0700 (PDT)' },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e79c562277e457000011',
    user_id: 1,
    _id: '5157e7d29c1fe3ed57000005',
    created: 'Sun Mar 31 2013 00:37:54 GMT-0700 (PDT)' },
  { submission_id: '513d3702b99f8b1ca5000026',
    comment_id: '5157e79c562277e457000011',
    user_id: 1,
    _id: '5157e7d29c1fe3ed57000006',
    created: 'Sun Mar 31 2013 00:37:54 GMT-0700 (PDT)' } ];

var newCommentObj = comments;

_.map(newCommentObj, function(key) {
    // get commentLikes for each comment
    var commentId = key._id,
        likes = _.where(commentLikes, {comment_id : commentId});

}); 
```

如果没有，我应该怎么做？使用多个 Mongoose 集合执行此操作*的正确*方法是什么？我来自传统的 MySQL 背景，所以我已经习惯了没有关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:21:19.557

您可以使用下划线来做到这一点`groupBy`，`map` [这是](http://jsfiddle.net/superhacker/pnDUL/2/)工作示例。

您也可以在“mongodb”中组合您的收藏，使用`mapReduce` [查看此处](https://stackoverflow.com/questions/9696940/merging-two-collections-in-mongodb)了解更多详细信息。

# android - 不使用意图的摄像机录像机的来源

> ID：15728659
> 
> 赞同：1
> 
> 时间：2013-03-31T10:53:17.053
> 
> 标签：android, activerecord, video, camera

有人知道我在哪里可以找到记录视频并将其保存在设备上的示例源代码吗？该代码不应使用`intent`.

我尝试使用此代码： [https](https://stackoverflow.com/questions/15691152/android-recording-a-video-initializing-the-camera-2) ://stackoverflow.com/questions/15691152/android-recording-a-video-initializing-the-camera-2 我在 YouTube 教程中看到的，但我无法让它工作。

我不能使用`intent`，因为我需要在相机录制时调整视频视图的大小。

我想我不能这样做`intent`，还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:51:33.433

`intent`可以在以下位置找到 正在使用的源：http: [//developer.android.com/training/camera/videobasics.html](http://developer.android.com/training/camera/videobasics.html)

一个很好的视频解释（但代码不起作用）： [http ://www.youtube.com/watch?v=ZScE1aXS1Rs](http://www.youtube.com/watch?v=ZScE1aXS1Rs)

最终我读到了这个：

这是[链接]（[http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)）！

并用它来创建相机应用程序，最好的方式......

重要建议：当您暂停使用凸轮时：

```
if (isRecording) {
            // stop recording and release camera
            mMediaRecorder.stop();  // stop the recording
            releaseMediaRecorder(); // release the MediaRecorder object
            mCamera.lock();         // take camera access back from MediaRecorder

            // inform the user that recording has stopped
            //setCaptureButtonText("Capture");

            isRecording = false;

        }

        PauseAndRelease();  //add this before finish to use in the camera

public void PauseAndRelease ()
{
     releaseMediaRecorder();       // if you are using MediaRecorder, release it first
     releaseCamera();  // release the camera immediately on pause event
     Log.d(TAG,"camera on pause" + mCamera );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:32:09.360

您应该使用 a`SurfaceView`并使用`MediaRecorder`. 您可以通过这种方式调整视频大小、管理视频的保存位置等。

一个例子可以在这里找到：[http ://android-er.blogspot.nl/2011/04/simple-exercise-of-video-capture-using.html](http://android-er.blogspot.nl/2011/04/simple-exercise-of-video-capture-using.html)

# java - 通过传递 URL 参数在 Webview 中打开页面

> ID：15728666
> 
> 赞同：2
> 
> 时间：2013-03-31T10:54:39.893
> 
> 标签：java, android, parameters, webview

我正在开发一个在应用程序内的 web 视图中打开 HTML 页面的 Android 应用程序。HTML 页面存储在 assets 文件夹中，我通过以下方式调用它

```
loadUrl("file:///android_asset/a.html"); 
```

现在，该页面接受来自 URL (javascript) 的参数。我需要知道我们如何将 URL 参数传递给存储在 assets 文件夹中的这个 html 文件。像这样写它们：

```
loadUrl("file:///android_asset/a.html?q=2&w=3"); 
```

不起作用。还有其他方法吗？

里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:04:07.640

如果您的 HTML 页面通过 javascript 处理参数（我想不出任何其他方式可以处理它们），您可以在页面加载后使用参数在代码中调用 javascript 函数，并将参数传递给它。

```
 webview.getSettings().setJavaScriptEnabled(true);  
    webview.setWebViewClient(new WebViewClient() {  

    @Override  
    public void onPageFinished(WebView view, String url)  {  
        webview.loadUrl("javascript:(function() { setParameters(2,3)})()");  
        }
    });

    webview.loadUrl("file:///android_asset/a.html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:07:24.403

我尝试了 shaish 和许多其他人建议的方法，将 url 参数传递给“资产文件夹”url。这似乎是 android 3 和 4 ( [http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535) ) 的一个众所周知的错误。只需调用 webview.loadUrl("file:///android_asset/a.html?q=2&w=3") 即可在黑莓 10 模拟器上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T10:54:48.380

类似 shaish 的解释，但适用于我自己的情况：

我的问题是，每当我切换到另一个应用程序时，当进入 webapp 时，webview 会不断重新加载。我想这是因为我的方法中有以下一行`onCreate()`：`myWebView.loadUrl(url);`我有在 url 中传递这些状态变量的想法，但你知道这还不可能。我所做的是使用 保存一些变量的状态`onSaveInstanceState(Bundle outState) {...}`并使用`onRestoreInstanceState(Bundle savedInstanceState){...}`.

在设置 myWebView 后的 onCreate 方法中，我执行了以下操作：

```
myWebView.setWebViewClient(new WebViewClient() {
@Override
public void onPageFinished(WebView view, String urlString)
{
     Log.i("onPageFinished", "loadVariables("+newURL+")");
     if(newURL!="")
         myWebView.loadUrl("javascript:loadVariables("+"\""+newURL+"\")");
}

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    view.loadUrl(url);
    return true;
}
});

jsInterface = new JSInterface(this,myWebView);
myWebView.addJavascriptInterface(jsInterface, "Android");

if (savedInstanceState != null)
{
// retrieve saved variables and build a new URL
newURL = "www.yoururl.com";
newURL +="?var1=" + savedInstanceState.getInt("key1");
newURL +="?var2=" + savedInstanceState.getInt("key2");
Log.i("myWebApp","NEW URL = " + newURL);
}
myWebView.loadUrl("www.yoururl.com"); 
```

因此，发生的情况是，首先我加载页面，然后在页面完成加载时传递变量。在 javascript`loadVariables`函数中看起来像这样：

```
function loadVariables(urlString){
    // if it is not the default URL
    if(urlString!="www.yoururl.com")
    {
        console.log("loadVariables: " + urlString);
        // parse the URL using a javascript url parser (here I use purl.js)
        var source = $.url(urlString).attr('source');
        var query = $.url(urlString).attr('query');  
        console.log("URL SOURCE = "+source + " URL QUERY = "+query);
        //do something with the variables 
    }
} 
```

# perl - Perl 正则表达式逻辑错误

> ID：15728671
> 
> 赞同：0
> 
> 时间：2013-03-31T10:55:09.493
> 
> 标签：perl, logic

我对正则表达式的概念相当陌生。我了解我在 bash 脚本中使用的基本正则表达式。以下代码片段来自我正在编写的用于自动更新服务器上的 Wordpress 插件的程序。

无论如何，这个概念是这段代码是子程序的一部分，它通过目录中的 .php 文件递归，并尝试从文件，如果模式匹配，则另一个子尝试提取字符“：”后面的值以获取正确的版本号。

```
$searchpath=$path."/".$plugins[$i];
        @files = <$searchpath/*.php>;
        print "Search path is ".$searchpath."\n";
OUT:    foreach $file (@files) 
        {
            print "Checking alternate php file: ".$file."\n";
            open(txt, $file);
            while($line = <txt>) 
            {
                for ($line)
                {
                 s/^\s+//;
                 s/\s+$//;
                }
                if ( $line =~ /^Version:|^version:|^\* Version:|\sVersion:/ )
                {
                    print "Version found in file ".$file."\n";  
                    $varfound=1;    
                    close(txt);
                    $ver=&read_extract($file);
                    print $ver."\n";
                    $pluginversion[$i]=$ver;
                    print "Array Num ".$i." Stored plugin name:".$plugins[$i]." Version found ".$ver." Version stored ".$pluginversion[$i]."\n";
                    last OUT;
                }
            }
        } 
```

问题是我似乎在逻辑上有错误，并且该文件实际上与 " . phpversion() . "\n"; Version stored " 匹配。php版本（）。"\n" 用于搜索查询。以我有限的知识，我发现很难理解哪里出了问题，并且渴望得到一些建议。

提及的其他子项包括如下：

```
sub read_extract
{
    my $pl_version="";
    open(txt, my $file=$_[0]);
    while($line = <txt>)
    {
        for ($line)
        {
         s/^\s+//;
         s/\s+$//;
        }           
        if ( $line =~ /^Version:|^version:|^\* Version:|\sVersion:/ )
        {
            $pl_version=&extract_version($line);
        }
    }
    close(txt);
    $pl_version;
}

sub extract_version
{
    my $line=$_[0];
    $string=substr($line,rindex($line, ":")+1);
    for ($string)
    {
     s/^\s+//;
     s/\s+$//;
    }
    $string;
} 
```

如果完全需要我的子程序，我可以包含它。但是我的调试行显示了这一点：

```
Processing xcloner-backup-and-restore...Search path is /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore
Checking alternate php file: /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/admin.cloner.html.php
Checking alternate php file: /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/admin.cloner.php
Checking alternate php file: /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/admin.xcloner-backupandrestore.php
Checking alternate php file: /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/admin.xcloner.php
Checking alternate php file: /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/cloner.config.php
Checking alternate php file: /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/cloner.cron.php
Checking alternate php file: /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/cloner.functions.php
Version found in file /var/www/virtual/joel.co.in/vettathu.com/htdocs/wp-content/plugins/xcloner-backup-and-restore/cloner.functions.php
" . phpversion() . "\n";
Array Num 26 Stored plugin name:xcloner-backup-and-restore Version found " . phpversion() . "\n"; Version stored " . phpversion() . "\n"; 
```

这似乎是错误所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:06:46.170

好吧，那里有很多冗余代码。如果您已经有了该行，为什么需要关闭文件并再次找到该行？您需要做的就是在找到该行时捕获该字符串：

```
if ( $line =~ /^\*?\s?Version:(.*)/i ) {
    my $version = $1; 
```

因此，通过使用`/i`修饰符，您的匹配不区分大小写。通过放在`?`后面`\*`，`\s`他们可以匹配 0 次或 1 次。通过使用`(.*)`该行的其余部分被捕获到`$1`.

您的正则表达式在最后一场比赛中缺少`^`行首锚点，我认为这是一个错字。如果没有，您可以简单地将正则表达式更改为`/\bVersion:(.*)/i`. 并且`\b`仅对避免部分匹配有用，例如`subversion: foo`.

# wordpress - 使用参数值重定向到新页面

> ID：15728673
> 
> 赞同：0
> 
> 时间：2013-03-31T10:55:14.397
> 
> 标签：wordpress, .htaccess, redirect

我正在研究 wordpress，并希望以某种方式实现重定向，如果有人想使用任何 id 访问 url：

```
http://www.example.com/123456789 
```

将被重定向到

```
http://www.example.com/search.php?id=123456789 
```

知道我怎么能做到这一点？我相信我必须使用 .htaccess 文件，但任何帮助都将受到高度赞赏..

**编辑**我在 .htaccess 中的标准规则是

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:14:25.923

您可以尝试将问题中的规则集替换为以下内容：

```
# BEGIN Wordpress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]

# Add this line
RewriteCond %{REQUEST_URI}    !/document         [NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]

# Add these lines
RewriteCond %{REQUEST_URI}  !search\.php         [NC]
RewriteCond %{REQUEST_URI}  /document/([^/]+)/?  [NC]
RewriteRule .*  /wordpress/search.php?id=%1      [L,NC]

</IfModule>
# END Wordpress 
```

最后一条规则静默映射：

`http://localhost/wordpress/document/123`

到：

`http://localhost/wordpress/search.php?id=123`

where`123`是一个动态字符串。

对于永久重定向，将最后一个 [L,NC] 替换为 [R=301,L,NC]。

# c# - 释放 COM 对象的正确方法？

> ID：15728676
> 
> 赞同：20
> 
> 时间：2013-03-31T10:56:00.080
> 
> 标签：c#, .net, com

有时当我结束应用程序并尝试释放一些 COM 对象时，我会在调试器中收到警告：

> `RaceOnRCWCleanUp`被检测到

如果我编写一个使用 COM 对象的类，我是否需要实现`IDisposable`并调用`Marshal.FinalReleaseComObject`它们`IDisposable.Dispose`才能正确释放它们？

如果`Dispose`没有手动调用，我还需要在终结器中释放它们还是 GC 会自动释放它们？现在我[调用`Dispose(false)`终结](https://stackoverflow.com/a/628814/1386111)器，但我想知道这是否正确。

我使用的 COM 对象也有一个类监听的事件处理程序。显然事件是在另一个线程上引发的，那么如果在处理类时触发它，我该如何正确处理它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-06-29T22:33:49.700

首先 - 您*永远*不必打电话`Marshal.ReleaseComObject(...)`或`Marshal.FinalReleaseComObject(...)`在进行 Excel 互操作时。这是一个令人困惑的反模式，但任何有关此的信息（包括来自 Microsoft 的）表明您必须从 .NET 手动释放 COM 引用都是不正确的。事实上，.NET 运行时和垃圾收集器正确地跟踪和清理 COM 引用。

其次，如果要确保在进程结束时清理对进程外 COM 对象的 COM 引用（以便 Excel 进程将关闭），则需要确保垃圾收集器运行。您可以通过调用`GC.Collect()`和正确地做到这一点`GC.WaitForPendingFinalizers()`。调用两次是安全的， end 确保循环也被清理干净。

第三，在调试器下运行时，局部引用会人为地保持活动状态，直到方法结束（这样局部变量检查才起作用）。因此，调用对于从同一方法`GC.Collect()`中清除对象无效。`rng.Cells`您应该将执行 COM 互操作的代码从 GC 清理中拆分为单独的方法。

一般模式是：

```
Sub WrapperThatCleansUp()

    ' NOTE: Don't call Excel objects in here... 
    '       Debugger would keep alive until end, preventing GC cleanup

    ' Call a separate function that talks to Excel
    DoTheWork()

    ' Now Let the GC clean up (twice, to clean up cycles too)
    GC.Collect()    
    GC.WaitForPendingFinalizers()
    GC.Collect()    
    GC.WaitForPendingFinalizers()

End Sub

Sub DoTheWork()
    Dim app As New Microsoft.Office.Interop.Excel.Application
    Dim book As Microsoft.Office.Interop.Excel.Workbook = app.Workbooks.Add()
    Dim worksheet As Microsoft.Office.Interop.Excel.Worksheet = book.Worksheets("Sheet1")
    app.Visible = True
    For i As Integer = 1 To 10
        worksheet.Cells.Range("A" & i).Value = "Hello"
    Next
    book.Save()
    book.Close()
    app.Quit()

    ' NOTE: No calls the Marshal.ReleaseComObject() are ever needed
End Sub 
```

关于这个问题有很多虚假信息和混淆，包括 MSDN 和 StackOverflow 上的许多帖子。

最终说服我仔细研究并找出正确建议的是这篇文章[https://blogs.msdn.microsoft.com/visualstudio/2010/03/01/marshal-releasecomobject-considered-dangerous/](https://blogs.msdn.microsoft.com/visualstudio/2010/03/01/marshal-releasecomobject-considered-dangerous/)以及找到在某些 StackOverflow 答案的调试器下，引用保持活动状态的问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-31T14:53:12.990

根据我使用不同 COM 对象（进程内或进程外）的经验，我建议`Marshal.ReleaseComObject`每个 COM/.NET 边界跨越一个（如果您引用 COM 对象以检索另一个 COM 引用的实例）。

仅仅因为我决定将 COM 互操作清理推迟到 GC，我就遇到了很多问题。另请注意，我从不使用`Marshal.FinalReleaseComObject`- 一些 COM 对象是单例的，它不适用于此类对象。

`IDisposable`禁止在终结器（或众所周知的实现中的 Dispose(false)）内的托管对象中执行任何操作。您不能依赖终结器中的任何 .NET 对象引用。您可以 release `IntPtr`，但不能释放 COM 对象，因为它可能已经被清理了。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-31T15:01:27.773

这里有一篇文章：http: [//www.codeproject.com/Tips/235230/Proper-Way-of-Releasing-COM-Objects-in-NET](http://www.codeproject.com/Tips/235230/Proper-Way-of-Releasing-COM-Objects-in-NET)

简而言之：

> ```
> 1) Declare & instantiate COM objects at the last moment possible.
> 2) ReleaseComObject(obj) for ALL objects, at the soonest moment possible.
> 3) Always ReleaseComObject in the opposite order of creation.
> 4) NEVER call GC.Collect() except when required for debugging. 
> ```
> 
> 直到GC自然发生，com引用才会被完全释放。这就是为什么这么多人需要使用 FinalReleaseComObject() 和 GC.Collect() 来强制对象销毁的原因。脏互操作代码都需要两者。

GC 不会自动调用 Dispose。当一个对象被释放时，析构函数被调用（在不同的线程中）。这通常是您可以释放任何非托管内存或 com 引用的地方。

析构函数：http: [//msdn.microsoft.com/en-us/library/66x5fx1b.aspx](http://msdn.microsoft.com/en-us/library/66x5fx1b.aspx)

> ...当您的应用程序封装非托管资源（如窗口、文件和网络连接）时，您应该使用析构函数来释放这些资源。当对象符合销毁条件时，垃圾收集器运行对象的 Finalize 方法。

# c# - 带有特殊字符的正则表达式 ismatch 逻辑

> ID：15728683
> 
> 赞同：0
> 
> 时间：2013-03-31T10:57:07.113
> 
> 标签：c#, .net, regex, special-characters

我知道这个语句应该按预期返回 false

```
Regex.IsMatch("+", @"[a-zA-Z0-9]") 
```

但是为什么这些陈述匹配，尽管它们不应该匹配（根据我的理解）

```
Regex.IsMatch("C++", @"[a-zA-Z0-9]")
Regex.IsMatch("C++", @"[a-zA-Z0-9]+") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T11:03:31.483

这些是匹配项，因为您不匹配整个字符串。他们将匹配`C`in `C++`。

使用`^`and`$`匹配字符串的开头和结尾：

```
bool onlyAlphaNumeric = Regex.IsMatch("C++", @"^[a-zA-Z0-9]+$"); // will be false 
```

# python - 如何在 python 中实现 Linux 身份验证弹出窗口？

> ID：15728685
> 
> 赞同：0
> 
> 时间：2013-03-31T10:57:18.977
> 
> 标签：python, linux, authentication, root

在我的项目中，我有一个守护进程和一个 python UI 来配置它。

一种选择是启动/停止守护程序。为此，用户必须提供 root 密码才能调用停止守护程序。因此，单击停止按钮应该向他显示身份验证弹出窗口（如在此链接中：http: [//i.stack.imgur.com/qcAk6.png](https://i.stack.imgur.com/qcAk6.png)

![在此处输入图像描述](https://i.stack.imgur.com/iQtcV.png)

）。

有人可以为我提供有关如何使其工作的链接或示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T05:01:18.410

使用 gksudo 和[subprocess](http://docs.python.org/2/library/subprocess.html "子流程文档")的示例程序：

```
#!/usr/bin/env python
import subprocess

# change gnome-terminal to command to start/stop daemon
call = ["gksudo", "--description", "Start daemon", "gnome-terminal"]

# runs, and doesn't block
proc = subprocess.Popen(call, stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

我们不能假设用户没有取消提示，因此必须以另一种方式检测守护程序。如果可能，D-Bus 将是最好的。请参阅python[教程](http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html "Dbus 教程")。

# c++ - sprintf 输出一个额外的字符串

> ID：15728687
> 
> 赞同：-4
> 
> 时间：2013-03-31T10:57:27.307
> 
> 标签：c++

使用 sprintf 会输出一个额外的字符串，例如 "%x ...."

```
int main()
{   
    char *word_tmp = new char[0];
    char *word_all = new char[0];

    for(int i=0;i<5;i++)
    {
        sprintf(word_tmp, "\nNumber:%d, Good Good!", i);
        sprintf(word_all, "%s%s", word_all, word_tmp);   
    }

    std::cout<<word_all;
} 
```

该程序工作正常，但输出一个我没有输出的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:00:34.900

您的数组长度为零，因此缓冲区`word_tmp`不足以容纳第一次调用的结果`sprintf()`，这会导致缓冲区溢出。因此，在这种情况下，您第一次调用的行为`sprintf()`是未定义的。

除此之外，[如果由于调用`sprintf()`or而在重叠的对象之间发生复制`snprintf()`，则结果是 undefined](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sprintf.html)。

最后，您的函数正在泄漏内存，因为您没有调用`delete[]`分配给`new[]`.

您应该使用[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)类型安全的方式来完成您想要实现的目标（[感谢 James Kanze](https://stackoverflow.com/users/649665/james-kanze)发现我之前尝试为您的程序生成最小修复的问题）：

```
#include <iostream>
#include <sstream>

int main()
{
    std::ostringstream ss;
    for (int i = 0; i < 5; i++)
    {
        ss << "Number: " << i << ", Good Good!" << std::endl;
    }

    std::cout << ss.str();
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx$176)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:08:20.443

实际上，我对这段代码没有崩溃感到非常惊讶……您的 sprintf 目标字符串没有足够的空间来放置数据。而且我刚刚输入了 man sprintf 并阅读了以下内容：

```
C99  and  POSIX.1-2001 specify that the results are undefined if a call to sprintf(),
snprintf(), vsprintf(), or vsnprintf() would cause copying to take place between objects 
that overlap (e.g., if the target string array and one of the
supplied input arguments refer to the same buffer). 
```

所以你的第二个 sprintf 在 c99 中是未定义的。

同样，您使用 C++ new 运算符并使用 sprintf 附加字符串并将数字插入字符串也很奇怪，而在 C++ 中，您有 std::string 和 stings 流以安全的方式执行此操作。

我认为您需要阅读一些书籍并了解 c 和 c++ 中发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:15:34.570

首先，你永远不想使用`sprintf`. 正确使用几乎是不可能的。在这种情况下，您将其值输出到不存在的内存中，因此您有未定义的行为。`new char[0]`（您认为要分配多少内存？。在第二个`sprintf`中，您还从不存在的内存输入 - 更多未定义的行为，并且您从同一内存输出和输入（假设有是任何记忆），这也是未定义的行为。

忘记`sprintf`和数组新的：

```
std::string results;
for ( int i = 0; i != 5; ++ i ) {
    std::ostringstream s;
    s << "Number: " << i << " Good Good!\n";
    results += s.str();
}
std::cout << results; 
```

（我认为这就是你想要做的。）

最后一点：虽然它几乎从来都不是真正的问题，但标准确实要求输出到文本流（如`std::cout`）的最后一个字符是`'\n'`.

# authentication - 如何将 SMSESSION 值从 Win 客户端传递到 asmx Web 服务进行身份验证

> ID：15728688
> 
> 赞同：1
> 
> 时间：2013-03-31T10:57:50.373
> 
> 标签：authentication, single-sign-on

我正在尝试使用我们的 WPF 应用程序实现 SSO 身份验证。以下是场景

1.  我们的 asmx Web 服务托管在受防火墙保护的 Web 应用程序中。
2.  要登录我们的 Web 应用程序或从生产服务器在浏览器中查看我们的 Web 服务，我们需要使用 sso id 登录。我必须使用我们的 WPF 应用程序实现 SSO 身份验证。
3.  首先，如果用户通过身份验证，我必须使用第 3 方 Web 服务，它会以字符串格式返回有效的 SMSESSION。
4.  然后我必须将此 SMSESSION 传递给防火墙后面的 Web 服务。
5.  现在我面临的问题是我无法将 SMSESSION 值传递给我们的 Web 服务进行身份验证。

当我尝试这个时，它会引发异常

```
The content type text/html; charset=iso-8859-1 of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 1024 bytes of the response were: '<HTML><HEAD><TITLE></TITLE></HEAD><BODY onLoad="document.AUTOSUBMIT.submit();">This page is used to hold your data while you are being authorized for your request.<BR><BR>You will be forwarded to continue the authorization process. If this does not happen automatically, please click the Continue button below.<FORM NAME="AUTOSUBMIT" METHOD="POST" ENCTYPE="application/x-www-form-urlencoded" ACTION="https://xxx.com/ssologinforms/SSO_Generic_RME.fcc?TYPE=33554432&REALMOID=06-49a328ee-0d11-103b-ad01-83323a2d304d&GUID=&SMAUTHREASON=0&METHOD=POST&SMAGENTNAME=-SM-ooM6KmTLLwbCHi%2ffOCEVUabjNhcgULT5joVqmn4M77Tf0PAu3BFcfbexTaiWfZ4N&TARGET=-SM-http%3a%2f%2fdev--srvspeq%2eog%2ege%2ecom%2fSRVSpeQWebService%2easmx"><INPUT TYPE="HIDDEN" NAME="SMPostPreserve" VALUE="+rB+TqoVGXah2Uij3lfKDdCf2jsgE2NAUoujo+dFiiJ7yzqgpQaVnxRangTzcB/faU6BOAAcSBFUMUA1RpOCnVRVjN1cFbL0KhVu3y6IySj4gJE6X797kXkzMNEZgozuEz96g6PgQ6e5+sjqZaaNGii+Cy26QaD16fqQTI5VGkLdnD0fhNvJjXXgSBLNZd77nZz0aaMmz4cGZwnAElk7POTF/NBKdxCXS1l0U/iqqozqfBz0aFqLMpsy'. 
```

请帮我做这件事

我使用以下代码获取有效的 SMSESSION

```
string userId = txtUsername.Text.Trim(); // User to be authenticate with site minder //xxxxxxxxx
string passwrod = txtPassward.Password.Trim(); //password of user to be authenticate with site minder //xxxxxxxx
string applicationID = "XXXXXX"; // Application id. To be authenticate with JBoss Server.//xxxxxxxx
string applicationPassword = "XXXXXXXXX";//applicationPassword to be authenticate with JBoss Sever.//xxxxxxxx

 NamespaceName.AuthenticationServiceClient proxy = new NamespaceName.AuthenticationServiceClient();

                AuthenticationServiceRequest request = new AuthenticationServiceRequest();
                UserAttributes ut = new UserAttributes();
                ut.userName = userId;
                ut.password = passwrod;
                request.userAttributes = ut;
                AuthenticationServiceResponse response = null;
                try
                {
                    ServicePointManager.Expect100Continue = false;
                    proxy.ClientCredentials.UserName.UserName = applicationID;
                    proxy.ClientCredentials.UserName.Password = applicationPassword;

                    response = proxy.passwordAuthenticate(request);

                    if (response.result != null)
                    {
                        switch (response.result.ToString())
                        {
                            case "SUCCESS":
                                MessageBox.Show("Valid SMSESSION :" + response.smSession.ToString());
                                break;
                            case "ERROR":
                                MessageBox.Show("ERROR CODE :" + response.errCode.ToString() + "\n Error Message :" + response.errMsg.ToString());
                                break;
                            default: MessageBox.Show("Response is neither SUCCESS nor ERROR, its something different\nERROR CODE :" + response.errCode.ToString() + "\n " + response.errMsg.ToString());
                                break;
                        }
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
} 
```

如何将 SMSESSION 传递给 asmx Web 服务

# c# - 在 RavenDB 中获取 IdConvention

> ID：15728693
> 
> 赞同：1
> 
> 时间：2013-03-31T10:58:41.570
> 
> 标签：c#, linq, ravendb, ravendb-studio

假设我们有一个 User 类

```
 public class User
    {
        public User() {
          Created = DateTime.Now;
          Tags = new List<string>();
        }

        public string FirstName { get; set; }
        public string LastName { get; set; }
        public DateTime Created {get;set;}
        public IEnumerable<string> Tags {get; private set;}    
    } 
```

并且可能希望用户拥有像 [FirstName]/[LastName] 这样的 id，所以我们像这样注册一个 IdConvention：

```
 _documentStore
    .Conventions
    .RegisterIdConvention<User>(
      (dbname, commands, user) => user.FirstName +"/" + user.LastName )); 
```

现在假设您创建了一个附加了一组新标签的新用户。如果用户不存在，您希望将其存储在 RavenDB 中。但是，如果用户**确实**存在，您不想覆盖现有对象，因为您想保留初始`Created`日期。因此，您只需`Tags`使用新创建的用户的值更新枚举。

你可能会做这样的事情：

```
public void AddOrUpdateUser(User newUser) {
    using (var session = _documentStore.OpenSession())
                {

                    var existingUser = session.Load<User>("myFirstname/myLastname")
                    if(user != null) {
                     existingUser.Tags = user.Tags;
                    }
                   else {

                     session.Store(newUser);
                   }
                 session.SaveChanges();
                }
} 
```

但是，如果由于某种原因我更改了 IdConvention，我也必须更新上面的代码。有没有办法引用注册的 IdConvention 来计算`newUser`对象的 id。使用此 id 值，您可以检查项目是否存在，而不是自己创建 Id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:49:57.377

注册 id 约定后，该`GenerateDocumentKey`方法将使用该约定而不是默认的 hilo 生成方案。

它需要一些参数，如果您首先将`IDocumentSession`转换为真实的`DocumentSession`.

```
var s = ((DocumentSession) session);
var key = s.Conventions.GenerateDocumentKey(s.DatabaseName,
                                            s.DatabaseCommands,
                                            yourEntity); 
```

# android - 在android中自定义功能区菜单

> ID：15728695
> 
> 赞同：3
> 
> 时间：2013-03-31T10:58:48.030
> 
> 标签：android, menu

我想自定义功能区菜单（[https://github.com/jaredsburrows/RibbonMenu](https://github.com/jaredsburrows/RibbonMenu)），当我点击菜单项时，原始菜单仅显示一个 ListView。我想在按键后打开新的意图，而不仅仅是列表视图。我尝试了类似的方法，但这会打开一个没有功能区菜单的新意图。我的目的是在这个菜单中打开新的意图或活动——就像一个列表视图。你能帮我吗？

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
            {
                switch (position)
                {
                case 0:
                    Intent i = new Intent(MainActivity.this, About.class);
                    MainActivity.this.startActivity(i);
                    //final String[] items = { "A", "B", "C", "D" };
                    //adapter = new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1, items);
                //  list.setAdapter(adapter);
                    break;

                case 1:
                    final String[] items1 = { "1", "2", "3", "4" };
                    adapter = new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1, items1);
                    list.setAdapter(adapter);
                    break;

                }
                rbmView.hideMenu();
            } 
```

# scala - 有没有办法让 Scala 基类在所有派生类都已构建时得到通知？（可能不会）

> ID：15728697
> 
> 赞同：0
> 
> 时间：2013-03-31T10:58:56.463
> 
> 标签：scala

第一：我到底为什么要问这个？

我想在我的课程中使用一个有效的“不变”检查系统，这将是实现它的好方法。每个级别都可以提供它们的不变量（如果有的话），并且基类将在构造链的末端执行它们。

Java上的类似问题：[在任何派生类的构造函数之后运行方法](https://stackoverflow.com/questions/2906958/running-a-method-after-the-constructor-of-any-derived-class)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:38:09.247

也许这会有所帮助：[在子类初始化后运行代码](http://rogach-scala.blogspot.ru/2012/05/running-code-after-subclass.html)

# visual-studio-2010 - 如何制作一个不同图像的文件？

> ID：15728699
> 
> 赞同：-2
> 
> 时间：2013-03-31T10:59:08.657
> 
> 标签：visual-studio-2010

我有问题想和你讨论。我是一名应届毕业生，刚刚找到一份 IT 程序员的工作。我的公司在做一款游戏，游戏内使用的图片或图形有一个文件夹，但图片文件不同。他们给我的任务是我们如何将不同的图像文件转换为一个文件，并且程序仍然可以访问该文件。如果你有任何想法与我分享..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:26:01.563

我不太确定这种方法对于在桌面上运行的游戏有什么*优势*，但如果您已经仔细考虑过这一点并认为拥有单个文件很重要，那么这样做当然是可能的。

[正如 Oded指出的那样](https://stackoverflow.com/questions/15728699/how-to-make-one-file-of-different-images#comment22345181_15728699)，由于这个问题表明您很少进行研究或其他努力，因此我不会提供完整的解决方案。即使我想这样做，我也不确定我能做到，因为您没有向我们提供有关您正在使用的编程语言和 UI 框架的任何信息。Visual Studio 2010 支持许多不同的。

无论如何，诀窍涉及创建一个精灵。这是一种相当常见的网页设计技术，它实际上有助于通过仅使用单个图像来减少加载时间，并且您可以通过搜索网络找到大量的解释和示例。例如，[这里](http://css-tricks.com/css-sprites/).

基本上，您所做的是制作一张包含所有较小图像的大图像，彼此偏移一定数量的像素。然后，您加载该单个大图像并通过指定每个图像的偏移坐标来访问各个图像。

但是，我不建议按照 Jan的[建议](https://stackoverflow.com/questions/15728699/how-to-make-one-file-of-different-images/15729350#comment22345271_15728699)进行操作并压缩图像目录（压缩成 ZIP 文件或任何其他格式），因为这样您*每次*想要使用其中一个时都需要支付解压缩它的费用图片。这也给你带来了极少的收益；现在磁盘存储很便宜。

# java - 致命错误：1:1：文件过早结束。读取网址时出错

> ID：15728700
> 
> 赞同：1
> 
> 时间：2013-03-31T10:59:15.997
> 
> 标签：java, xml, string, inputstream, bufferedreader

您好，我正在尝试读取带有间隔的 URL 提要并将其存储为对象。但是，当我尝试运行它时，它给了我这个错误 [Fatal Error] :1:1: Premature end of file。

这是代码：thisUrl是一个静态http地址

```
url = new URL(thisUrl);
URLstream = url.openStream();
ir = new InputStreamReader(URLstream);
buff = new BufferedReader(ir);
String xObject = "";

while (buff.ready()) {
     String temp = buff.readLine();
     xObject += temp;
} 
```

使用流后，我将关闭它

```
URLstream.close();
ir.close();
buff.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:00:15.557

引用文档以获取 ready() 方法的返回类型和值

> 如果保证下一个 read() 不会阻塞输入，则为 true，否则为 false。请注意，返回 false 并不能保证下一次读取将阻塞。

您的下一个 read() 可能会阻塞流。这并不意味着您已完成阅读流。改用这个。

```
String temp = null;
while ( (temp = buff.readLine()) != null) {
     xObject += temp;
} 
```

# python - Bash / Python：“echo”命令在作为另一个命令的输入时是否插入换行符？

> ID：15728703
> 
> 赞同：2
> 
> 时间：2013-03-31T10:59:39.543
> 
> 标签：python, bash

我有一个简单的 python 脚本`line_printer.py`：

```
import fileinput
i = 1
for line in fileinput.input():
    print 'Line', str(i), ':', line.strip()
    i+=1 
```

我试图了解从`echo`命令到该脚本的管道数据如何影响结果，而不是从文件中读取数据。

考虑以下调用和输出：

```
$ echo -e "chicken\ncow\npig"
chicken
cow
pig
$ 
```

这对我来说看起来像是在猪的“g”之后`echo`附加了一个不可见的。`\n`那么，当我打电话时怎么会：

```
echo -e "chicken\ncow\npig" | python line_printer.py 
```

我得到：

```
Line 1 : chicken
Line 2 : dog
Line 3 : cow 
```

作为输出而不是：

```
Line 1 : chicken
Line 2 : dog
Line 3 : cow
Line 4 : 
```

起初我认为 Python`fileinput`模块的行为可能是丢弃文件中的最后一行，如果它是空白的。但是当我尝试使用文件的内容时`some_lines.txt`：

```
chicken
dog
cow
<blank line> 
```

作为输入：

```
python line_printer.py some_lines.txt 
```

我得到的输出是：

```
Line 1 : chicken
Line 2 : dog
Line 3 : cow
Line 4 : 
```

那么为什么`line_printer.py`根据输入是来自标准输入还是来自文件而给出不同的结果呢？最好我能说的是，stdin（from `echo`）和文件（from `some_lines.txt`）都以 a 结尾`\n`，所以我要么期望两者`Line 4 :`的输出包含它，要么都不包含它的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:46:30.893

如果您查看 bash 源代码 bash-4.2/builtins/echo.def，您可以看到内置`echo`命令始终（第 113 行）输出最终结果`\n`（第 194 行），除非`-n`指定了（第 198 行）或输出`echo`用作一个字符串（第 166 行）。你可以通过这样做来测试它

```
echo `echo "Ho ho ho"` | od -c 
```

您只会看到一个`\n`，因为 的输出`echo "Ho ho ho"`在表达式中被评估为字符串`echo `echo "Ho ho ho"``。

它似乎与终端设置没有任何关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:15:47.413

此命令将回答您的问题：

```
echo 'hi' | od -c 
```

尾随字符的原因`\n`是终端上的标准输出默认使用行缓冲 - 这意味着它只会显示以换行符结尾的输出数据。

玩弄 printf 命令：

```
printf "%s"  foo
printf "%s\n" anotherfoo 
```

# sql - MySQL：合并来自两个相似表的记录，同时避免重复

> ID：15728714
> 
> 赞同：-1
> 
> 时间：2013-03-31T11:01:27.093
> 
> 标签：sql, duplicates

MySQL中是否有一种简单的方法来合并两个相似表（相同字段）的内容，同时避免重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:02:11.180

由于您提到它们是相似的表，您可以使用`UNION`，而不指定`ALL`，它只会返回唯一的行。

```
SELECT * FROM table1
UNION
SELECT * FROM table2 
```

# python - 使用 QPropretyAnimation 为自定义 QGraphicsItem 设置动画

> ID：15728715
> 
> 赞同：0
> 
> 时间：2013-03-31T11:01:33.127
> 
> 标签：python, qt, user-interface, pyside

我想让汽车沿着路径行驶，所以我尝试使用 QPropreties 为自定义 QGraphicsItem（描述“汽车”）设置动画，从 PySide 文档中给出的示例开始：

```
 self.anim = QtCore.QPropertyAnimation(self.car, "geometry")
  self.anim.setDuration(4000);
  self.anim.setStartValue(QtCore.QRect(0, 0, 100, 30));
  self.anim.setEndValue(QtCore.QRect(250, 250, 100, 30));
  self.anim.start(); 
```

`self.car`这是 Car 的一个实例，它是一个继承自`QGraphicsItem`and的类`QObject`（***编辑***更改了这个，请参阅`EDIT 2`）：

```
class Car(QtGui.QGraphicsItem, QtCore.QObject):

        def __init__(self, map = None, ....):

            super(Car, self).__init__()
            self.map = map
                    .... 
```

执行此操作时，我总是得到相同的错误代码：

```
 QPropertyAnimation::updateState (geometry): Changing state of an animation without target 
```

这很奇怪，因为目标确实设定了！我尝试放置 setTargetObject （请参阅[PySide 上的文档](https://deptinfo-ensip.univ-poitiers.fr/ENS/pyside-docs/PySide/QtCore/QPropertyAnimation.html#PySide.QtCore.PySide.QtCore.QPropertyAnimation.propertyName)），但它没有改变任何东西。

关于这可能来自哪里的任何想法？

***编辑：***可以提供帮助的东西->我尝试输入这三行，结果表明没有考虑到该对象：

```
 print self.car
  self.anim.setTargetObject(self.car)
  print self.anim.targetObject() 
```

结果

```
<engine.Car(this = 0x43f9200 , parent = 0x0 , pos = QPointF(0, 0) , z = 0 , flags =  ( ItemIsMovable | ItemIsSelectable ) )  at 0x1de0368>
None 
```

***编辑 2：***将类继承更改为`QGraphicsObject`似乎解决了“无目标”问题！但我现在有一个不同的错误（使用自定义属性'pos'）：

```
 QPropertyAnimation::updateState (pos, Car, ): starting an animation without end value 
```

我以这种方式定义了我的财产：

```
def setPos(self, pos):
    self.x = pos[0]
    self.y = pos[1]
    self.update()

def readPos(self):
    return (self.x, self.y)

pp = QtCore.Property('tuple', readPos, setPos) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:21:13.010

如果您只需要动画位置，您可以动画`GraphicsItem.pos`而不是定义自己的位置函数（除非您希望汽车在其`QGraphicsItem`自身中有一个位置。

至于`'starting an animation without end value'`，请确保您：

1.  调用`setEndValue`动画。
2.  将正确的类型传递给`setEndValue`（例如，您当前的实现将需要一个元组，使用`GraphicsItem.pos`将需要一个`QPoint`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:21:51.520

解决方案是首先更改继承 from`QGraphicsItem`和`QObject`to `QGraphicsObject`。然后，我犯的第二个错误是我没有正确定义我的属性（x 和 y）。

我最终重新实现了我的类以使用`QGraphicsObject`“ `pos`”属性并为其提供正确的开始和结束值（元组）。

# php - 致命错误：调用未定义函数 gettierone()

> ID：15728721
> 
> 赞同：1
> 
> 时间：2013-03-31T11:02:27.897
> 
> 标签：php

大家好，我希望你们快乐健康。

我在一个单独的页面中创建了一个函数并包含在我的页面中进行调用，但它说：致命错误：调用未定义的函数 gettierone()

这是我调用函数时的代码：

```
 <option style="width:150px;" value=" " selected="selected" disabled="disabled">Select Your Province</option>

  <?php 
  getTierOne(); 
  ?>

</select><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:04:58.873

很可能您的函数之前没有定义，或者您的函数名称中有错字。您可能还需要包含包含此函数的剩余 php 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:03:52.843

如果要在页面中使用该函数，则必须包含`gettierone()`定义该函数的页面：

```
<?php
include("dir/to/the/other/page.php");
?> 
```

# blackberry - invokeLater 的 run() 方法被调用了两次

> ID：15728726
> 
> 赞同：1
> 
> 时间：2013-03-31T11:03:12.177
> 
> 标签：blackberry

为了确定接下来在我的 BlackBerry 应用程序中显示哪个屏幕，我使用了下面的代码。然而，出于某种奇怪的原因，`run()`当通过点击屏幕选择菜单项时，其中的代码会执行两次，而在使用手机键盘时只执行一次。

有什么想法可能导致这种情况吗？

```
protected boolean navigationClick(int status, int time)
{
    switch (mainMenu.getSelectedIndex())
    {
    case 0:
        UiApplication.getUiApplication().invokeLater(new Runnable()
        {
            public void run() 
            {
                UiApplication.getUiApplication().pushScreen(new PollListScreen());
            }
        });
        break;
    case 1:
        UiApplication.getUiApplication().invokeLater(new Runnable()
        {
            public void run() 
            {
                UiApplication.getUiApplication().pushScreen(new UpdateProfileScreen());
            }
        });
        break;

        // Etc.

    default:
        break;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:07:23.070

我无法确切地看到您将所显示的代码放置在哪里，但我认为这里不会出现太多问题**。**

如果`run()`被多次调用，那么我认为`navigationClick()`被多次调用。

`navigationClick()`*可以根据点击*的来源（例如触摸与拨轮）不同地调用。但是，您应该能够通过检查`status`参数来解决这个问题。这样的事情可能对你有用：

```
protected boolean navigationClick(int status, int time)
{
    if (status != 0)  // <-- NOTICE THIS CHECK!!!
    {
        switch (mainMenu.getSelectedIndex())
        {
            case 0:
            // your code cut out here for clarity
        }
    }
    return true;
} 
```

如果您使用`invokeAndWait()`，您可能会阻塞 UI 线程，这可能会导致第二次调用`navigationClick()`. 不过，那将是使用*两个错误来做出正确的*事情。 `invokeLater()`通常应该是首选。

# c# - 水晶报告日期时间字段不显示但有值c#

> ID：15728732
> 
> 赞同：0
> 
> 时间：2013-03-31T11:03:37.790
> 
> 标签：c#, datetime, crystal-reports

我有一个水晶报表，我在其中使用数据集来显示值。数据集是从数据连接（表适配器，数据表）_中检索到的视图（sql视图）填充的。除了日期时间这一字段外，所有字段都显示。我已经尝试了所有可能的方法，但没有工作。我已经黔驴技穷了。

1.  我尝试在视图设计和数据集中将其转换为 sql 本身中的字符串。
2.  我使用 ToText() 对其进行了投射并将其放入公式中，但一直返回错误“字段未知”。我在想我可能已经删除了该字段，但我已经重新添加了数据集、数据表和适配器，并确保我单击了“验证数据库”并且该字段在那里！
3.  我尝试调试代码以确保正在提取值，是的。
4.  我通过右键单击并单击预览数据来“预览数据”数据集中的数据表，是的，它显示该字段具有值。所有字段都显示
5.  我尝试将数据集属性中的字段设置为字符串（在将日期时间类型更改为字符串之前）

但是为什么它没有显示在报告本身中。:(。有什么想法或其他建议我可以尝试让它展示吗？

```
public void loadReport(bool loadAll)
    {

      AirDataAccess ada = new AirDataAccess();

     List<AirData> alist= ada.GetRowLogAllView();

            ReportUrl = @"~\Reports\RawLogData.rpt";
            reportDocument.Load(Server.MapPath(ReportUrl));

                          reportDocument.SetDataSource(alist);

            CrystalReportViewer1.DataBind();
            CrystalReportViewer1.Visible = true;
            CrystalReportViewer1.ReportSource = reportDocument;

    } 
```

# wordpress - 获取页面的永久链接？

> ID：15728734
> 
> 赞同：2
> 
> 时间：2013-03-31T11:03:53.663
> 
> 标签：wordpress, permalinks

我知道这很简单，但我无法解决。

我想在页脚中创建一个导航，列出每个页面及其子页面。

它看起来像这样

```
 <ul>
      <li><a href="parent.html">Parent</a></li>
      <li><a href="childone.html">Child One</a></li>
      <li><a href="childtwo.html">Child Two</a></li>
      <li><a href="childthree.html">Child Three</a></li>
    </ul> 
```

我正在使用此代码来执行此操作。

```
 <div id="footerLinks">
        <?php
        $args = array(
            'sort_column' => 'menu_order',
            'parent' => 0,
            );
        $pages = get_pages($args);
        foreach($pages as $page){
            ?>
            <ul>
                <li>
                        <a href="<?php echo $page->permalink; ?>"><?php echo $page->post_title;?> </a> 
                </li>
                <?php  
                wp_list_pages('title_li=&depth=1&child_of='.$page->ID.'');
                ?>  
            </ul>
            <?php
            }
        ?>
    </div> 
```

我的问题是获取到父页面的永久链接。

```
 <a href="<?php echo $page->permalink; ?>"><?php echo $page->post_title;?> </a> 
```

在这种情况下如何获得永久链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:15:00.613

也许你可以做这样的事情：

```
<? echo get_permalink($page->post_parent); ?> 
```

# ruby-on-rails - 轨道 4 mongoid。mongoid_slug 没有安装

> ID：15728739
> 
> 赞同：1
> 
> 时间：2013-03-31T11:04:14.777
> 
> 标签：ruby-on-rails, mongodb, mongoid, slug, ruby-on-rails-4

我已经开始了新项目，安装了 mongoid，当我尝试安装 mongoid_slug 时它给了我错误。

我没有使用--skip-active-record。

```
Bundler could not find compatible versions for gem "mongoid":
  In Gemfile:
    mongoid_slug (~> 3.0.0) ruby depends on
      mongoid (> 3.0) ruby

    mongoid (1.0.6) 
```

宝石文件

```
gem 'mongoid'
gem 'mongoid_slug', '~> 3.0.0' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:37:21.073

您必须使用 Mongoid 的 master 分支，因为 Rails 4 兼容性刚刚[合并](https://github.com/mongoid/mongoid/pull/2379)，此后没有发布任何版本。

```
gem 'mongoid', git: 'git://github.com/mongoid/mongoid.git'
gem 'mongoid_slug', '~> 3.0.0' 
```

# php - 使用 Strtotime 格式化小时、分钟和 AM/PM 的变量

> ID：15728741
> 
> 赞同：3
> 
> 时间：2013-03-31T11:04:16.520
> 
> 标签：php, strtotime

我试图弄清楚如何将 strtotime 与以下值一起使用。我认为这应该很简单，但我就是不明白。我希望输出类似于：

date("H:i:s") - 看起来像 - 16:30:00

```
<?php

$hour = "4";
$minute = "30";
$period = "PM";

echo strtotime("$hour $minute $period")

?> 
```

我一直在挖掘一段时间，但无法弄清楚这一点。任何想法都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T11:13:49.593

从下午 4 点、30 点和下午回显 16:30:00

```
echo date("H:i:s", strtotime("$hour:$minute $period")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T11:10:19.123

您需要指出分钟和小时之间的分隔符：

```
echo strtotime("$hour:$minute $period"); 
```

应该管用。（事实上​​我测试并确实工作）。

**编辑**
因此，如果您需要输出类似于`HH:MM:SS`，那么您必须打印额外的信息：

```
echo date("H:i:s", strtotime("$hour:$minute $period")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T11:30:24.927

你可以这样做-

```
$hour = date("h"); 
$minute = date("i"); 
$period = date("A"); 

echo $hour . ":" . $minute . " " . $period; 
```

它将输出 07:30 AM

您也可以在几秒钟内添加另一个变量-

```
$hour = date("h"); 
$minute = date("i");
$seconds = date("s"); 
$period = date("A"); 

echo $hour . ":" . $minute . ":" . $seconds . " " . $period; 
```

这将输出 07:30:00 AM

# php - PHP：致命错误：在非对象上调用成员函数 query()

> ID：15728742
> 
> 赞同：0
> 
> 时间：2013-03-31T11:04:29.207
> 
> 标签：php, mysql

我有这个类用于连接到`MySql`数据库并创建/插入用户，但是当使用这个时我看到错误。

我的身份验证课程是：

```
 class AuthDB {
        private $db;

        public function __construct() {
            $db = new Dbaccess();

    if (!$db->connect ( DB_SERVER, DB_USER, DB_PASS, DB_NAME ) ) {
     if (mysql_error() == '') 
      $database_incorrect = 'Database name is incorrect or doesn\'t exist'; 
     else 
      $database_incorrect = 'ERROR: ';
     echo $database_incorrect . mysql_error ();
    }
        }

        public function createUser($email, $password, $salt, $verification) {

            $ver = 0;
            $act = 1;
            $adm = 0;

            $MYSQLDB = "INSERT INTO tbUsers (email, password, user_salt, is_verified, is_active, is_admin, verification_code) "
            . "VALUES ('1', '1', '1', '1', '1', '1', '1')"; //test value

            $r2 = $db->query ($MYSQLDB) or error ('Critical Error', mysql_error () ); // <<<LINE 30 ERROR HERE

            if ($r2 > 0) {
                return true;
            }

            return false;
        }
   } 
```

我的 Dbaccess 类是：

```
class Dbaccess
{
var $q_array = array();
var $db_id;
var $query;
var $counter = 0;
var $timecounter = 0;
var $query_res;

function connect ($host, $login, $password, $db)
{
$this->host = $host;
$this->login = $login;
$this->password = $password;
$this->db = $db;
$this->db_id = @mysql_connect($this->host, $this->login, $this->password);
if ($this->db_id)
{
$db_select = @mysql_select_db($this->db);
$this->query("SET NAMES 'UTF8'");
if (!$db_select)
{
@mysql_close($this->db_id);
$this->db_id = $db_select;
}
else
return $this->db_id;
}
else
return false;
}
function close()
{
if($this->db_id)
{
if($this->query)
{
@mysql_free_result($this->query);
}
$result = @mysql_close($this->db_id);
return $result;
}
else {
return false;
}}
function query ($query)
    //
    // $db->query("QUERY");

    {

        unset($this->query_res);

        if($query != "")

        {

            $sql_start = explode(' ', microtime());

            $this->query_res = @mysql_query($query, $this->db_id);

            $sql_stop = explode(' ', microtime());
            $sql_time = $sql_stop[0] - $sql_start[0];
            $sql_time+= $sql_stop[1] - $sql_start[1];

            $this->timecounter+= round($sql_time, 5);
            $this->counter++;

        }

        if($this->query_res)

        {
            unset($this->q_array[$this->query_res]);
            return $this->query_res;
        }
        else
        {
            return false;
        }
    }
} 
```

现在我在发送数据时看到这个错误：

```
Fatal error: Call to a member function query() on a non-object in C:\xampp\htdocs\test\classes\Auth.php on line 30 
```

如何修复此错误？我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:07:36.427

你想要这个在你的`__construct`：

```
public function __construct() {
  $this->db = new Dbaccess(); 
```

当你查询时，你想要：

```
$this->db->query($MYSQLDB); 
```

当您只使用变量`$db`时，它只存在于该方法的范围内。但是当您使用类属性时，它存在于整个类的范围内。

# java - 将公历转换为回历日期

> ID：15728744
> 
> 赞同：15
> 
> 时间：2013-03-31T11:04:43.397
> 
> 标签：java, date, gregorian-calendar, date-conversion, hijri

我想从公历转换为回历（伊斯兰）日期，我需要一个 java 类来进行这种转换。我想给它一个格式为“yyyy/mm/dd”的公历日期作为字符串，它给我同样格式的回历日期。谁能帮我？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-31T11:24:45.273

首先，将转换部分与格式化/解析部分分开。您可以稍后轻松处理这些问题 - Stack Overflow 上有*很多*关于此的问题。

我个人会使用[Joda Time](http://www.joda.org/joda-time/)，这通常会使生活变得更简单。例如：

```
import org.joda.time.Chronology;
import org.joda.time.LocalDate;
import org.joda.time.chrono.IslamicChronology;
import org.joda.time.chrono.ISOChronology;

public class Test {
    public static void main(String[] args) throws Exception {
        Chronology iso = ISOChronology.getInstanceUTC();
        Chronology hijri = IslamicChronology.getInstanceUTC();

        LocalDate todayIso = new LocalDate(2013, 3, 31, iso);
        LocalDate todayHijri = new LocalDate(todayIso.toDateTimeAtStartOfDay(),
                                             hijri);
        System.out.println(todayHijri); // 1434-05-19
    }
} 
```

（感觉应该有一种更简洁的方式在年表之间转换日期，但我无法立即找到。）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-25T07:24:11.177

**Java 8 内置支持 Hejrah Date**

*例子：*

```
import java.time.*;
import java.time.chrono.HijrahChronology;

Date date = new Date(); // Gregorian date

Calendar cl=Calendar.getInstance();
cl.setTime(date);

HijrahDate islamyDate = HijrahChronology.INSTANCE.date(LocalDate.of(cl.get(Calendar.YEAR),cl.get(Calendar.MONTH)+1, cl.get(Calendar.DATE))); 
//OUTPUT: Hijrah-umalqura AH 1436-02-03 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T11:10:13.763

只需使用谷歌[，例如这里](http://www.coderanch.com/t/534271/java/java/Gregorian-Hijri-Dates-Converter-JAVA)从给定的链接复制：

```
import java.util.Calendar;  
/** 
 * Gregorian-Hijri Dates Converter 
 *  
 *  
 * This Code is used to convert Gregorian dates to Hijri Dates  
 *  
 * 
 */  

public class DateHigri {  

static double gmod(double n,double  m) {  
    return ((n % m) + m) % m;  
}  

static double[] kuwaiticalendar(boolean adjust) {  
    Calendar today = Calendar.getInstance();  
    int adj=0;  
    if(adjust){  
        adj=0;  
    }else{  
        adj=1;  
    }  

    if (adjust) {  
        int adjustmili = 1000 * 60 * 60 * 24 * adj;  
        long todaymili = today.getTimeInMillis() + adjustmili;  
        today.setTimeInMillis(todaymili);  
    }  
    double day = today.get(Calendar.DAY_OF_MONTH);  
    double  month = today.get(Calendar.MONTH);  
    double  year = today.get(Calendar.YEAR);  

    double  m = month + 1;  
    double  y = year;  
    if (m < 3) {  
        y -= 1;  
        m += 12;  
    }  

    double a = Math.floor(y / 100.);  
    double b = 2 - a + Math.floor(a / 4.);  

    if (y < 1583)  
        b = 0;  
    if (y == 1582) {  
        if (m > 10)  
            b = -10;  
        if (m == 10) {  
            b = 0;  
            if (day > 4)  
                b = -10;  
        }  
    }  

    double jd = Math.floor(365.25 * (y + 4716)) + Math.floor(30.6001 * (m + 1)) + day  
            + b - 1524;  

    b = 0;  
    if (jd > 2299160) {  
        a = Math.floor((jd - 1867216.25) / 36524.25);  
        b = 1 + a - Math.floor(a / 4.);  
    }  
    double bb = jd + b + 1524;  
    double cc = Math.floor((bb - 122.1) / 365.25);  
    double dd = Math.floor(365.25 * cc);  
    double ee = Math.floor((bb - dd) / 30.6001);  
    day = (bb - dd) - Math.floor(30.6001 * ee);  
    month = ee - 1;  
    if (ee > 13) {  
        cc += 1;  
        month = ee - 13;  
    }  
    year = cc - 4716;  

    double wd = gmod(jd + 1, 7) + 1;  

    double iyear = 10631\. / 30.;  
    double epochastro = 1948084;  
    double epochcivil = 1948085;  

    double shift1 = 8.01 / 60.;  

    double z = jd - epochastro;  
    double cyc = Math.floor(z / 10631.);  
    z = z - 10631 * cyc;  
    double j = Math.floor((z - shift1) / iyear);  
    double iy = 30 * cyc + j;  
    z = z - Math.floor(j * iyear + shift1);  
    double im = Math.floor((z + 28.5001) / 29.5);  
    if (im == 13)  
        im = 12;  
    double id = z - Math.floor(29.5001 * im - 29);  

    double[]  myRes = new double[8];  

    myRes[0] = day; // calculated day (CE)  
    myRes[1] = month - 1; // calculated month (CE)  
    myRes[2] = year; // calculated year (CE)  
    myRes[3] = jd - 1; // julian day number  
    myRes[4] = wd - 1; // weekday number  
    myRes[5] = id; // islamic date  
    myRes[6] = im - 1; // islamic month  
    myRes[7] = iy; // islamic year  

    return myRes;  
}  
static String writeIslamicDate() {  
    String[] wdNames = {"Ahad", "Ithnin", "Thulatha", "Arbaa", "Khams",  
            "Jumuah", "Sabt"};  
    String[] iMonthNames = {"Muharram", "Safar", "Rabi'ul Awwal",  
            "Rabi'ul Akhir", "Jumadal Ula", "Jumadal Akhira", "Rajab",  
            "Sha'ban", "Ramadan", "Shawwal", "Dhul Qa'ada", "Dhul Hijja"};  
    // This Value is used to give the correct day +- 1 day  
    boolean dayTest=true;  
    double[] iDate = kuwaiticalendar(dayTest);  
    String outputIslamicDate = wdNames[(int) iDate[4]] + ", " + iDate[5] + " "  
            + iMonthNames[(int) iDate[6]] + " " + iDate[7] + " AH";  

    return outputIslamicDate;  
}  
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-03T22:09:32.830

试试[ummalqura-calendar](https://github.com/msarhan/ummalqura-calendar)实现`java.util.Calendar`.

使用此日历，您可以将 Umm Al-Qura 转换为公历，反之亦然，也可以`java.text.SimpleDateFormat`用来格式化日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-22T09:30:58.867

在 android 平台导入上转换日期的示例方法

```
import org.joda.time.Chronology;
import org.joda.time.DateTime;
import org.joda.time.chrono.ISOChronology;
import org.joda.time.chrono.IslamicChronology;
import org.joda.time.LocalDate; 
```

然后

```
implements  HijriDatePickerDialog.OnDateSetListener 
```

onDateSet 方法

```
@Override
public void onDateSet(HijriDatePickerDialog view, int year, int monthOfYear, int dayOfMonth) {

    Chronology iso = ISOChronology.getInstanceUTC();
    Chronology hijri = IslamicChronology.getInstanceUTC();

    DateTime dtHijri = new DateTime(year,monthOfYear,monthOfYear,dayOfMonth,dayOfMonth,hijri);

    DateTime dtIso = new DateTime(dtHijri, iso);

    Log.i("converted date" ,String.valueOf(dtIso));
} 
```

# jquery - iPhone / iPad 上的点击监听器

> ID：15728746
> 
> 赞同：0
> 
> 时间：2013-03-31T11:04:57.913
> 
> 标签：jquery, html, ios, click

在 PC、Mac 和任何 Android 设备中，当您单击或触摸图像时，会调用 showItem 函数，并以全屏模式显示图像。

但是，**当我在 Iphone/iPad 中测试时，当您第一次触摸图像时，会触发悬停事件，您需要再次触摸才能真正激活该功能**。我该如何克服呢？

**jQuery**

```
this1.on("click", function(evt){ 
    evt.preventDefault();
    evt.stopPropagation();
    showItem(this1);
}); 
```

PS：this1 变量，是下面有 .item 类的 img

**HTML / PHP**

```
<div class='galleryImage'>
    <span class='hidden' title='images/galleries/".$category."/".$dir[$i]."' ></span>
    <img class='item image' src='images/galleries/".$category."/".$dir[$i]."' alt='image-jpg' />
    <img src='images/ajax-small.gif' class='galleryLoader' alt='galleryLoader' />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:21:54.610

试试[`tap`](http://api.jquerymobile.com/tap/)。确保你也加载了[jQuery mobile](http://jquerymobile.com/download/)。

```
this1.on("tap", function() {
    // your function here
}); 
```

也可以看看

*   [如何在 iPad 版 Safari 中使用 jQuery 识别触摸事件？](https://stackoverflow.com/questions/4755505/how-to-recognize-touch-events-using-jquery-in-safari-for-ipad-is-it-possible)

# delphi - 首先尝试 SMPP 协议（ 绑定命令）

> ID：15728748
> 
> 赞同：2
> 
> 时间：2013-03-31T11:05:13.320
> 
> 标签：delphi, smpp

我尝试实现**SMPP**客户端，第一个测试是在我拥有**实时套接字连接**后进行绑定。

但是服务器在接收流时显示**HEX 错误消息。**

**SMPP 单元**

```
interface
  uses Classes;
Type
 // c octet strings
  TSystemID = string[16];
  TPassword = string[9];
  TSystemType = string[13];
  TAddr = string[21];
  TAddr_Range = string[41];
  TSvc_Type = string[6];
  TDate_time = string[17];
  TMsgID = string[65];
pPDU_HDR = ^TPDU_HDR;

TPDU_HDR = packed record
    command_len : LongWord ;
    command_id  : LongWord ;
    command_status :LongWord ;
    command_number:LongWord ;
end;

pSMPP_BIND = ^TSMPP_BIND ;
TSMPP_BIND = packed record
  SystemID : TSystemID ;
  Password : TPassword ;
  SystemType : TSystemType ;
  Ver        : Byte;
  Addr_TON   : Byte ;
  Addr_NPI   : Byte ;
  Addr_Range : TAddr_Range ;
end;
const
  { max short message length }
  DCS7_MAX_LEN = 160;
  DCS8_MAX_LEN = 140;
  DCSUCS2_MAX_LEN = DCS8_MAX_LEN div 2;
  { command ids }
  cmdNull   = $00000000;
  cmdBindReceiver = $00000001;
  cmdBindTransmitter = $00000002;
  cmdQuery = $00000003;
  cmdReplace = $00000007;
  cmdCancel = $00000008;
  cmdBindTransceiver = $00000009;
  cmdOutbind = $0000000B;
  cmdUnbind = $00000006;
  cmdSubmitSM = $00000004;
  cmdDeliverSM = $00000005;
  cmdEnquireLink = $00000015;
  cmdSubmitMultiply = $00000021;
  cmdAlertNotification = $00000102;
  cmdData = $00000103;
  cmdGenericNack = $80000000;
  cmdResponseBase = $80000000;
  cmdBindReceiverResponse = $80000001;
  cmdBindTransmitterResponse = $80000002;
  cmdQueryResponse = $80000003;
  cmdReplaceResponse = $80000007;
  cmdCancelResponse = $80000008;
  cmdBindTransceiverResponse = $80000009;
  cmdUnbindResponse = $80000006;
  cmdSubmitSMResponse = $80000004;
  cmdDeliverSMResponse = $80000005;
  cmdEnquireLinkResponse = $80000015;
  cmdSubmitMultiplyResponse = $80000021;
  cmdDataResponse = $80000103;
  { ESM_CLASS }
  ESM_CLASS_DELIVERY_RECEIPT = $04;
  ESM_CLASS_UDHI = $40;
implementation
end. 
```

在我的表单上 btnSendBindClick

```
procedure TFrmMain.btnSendBindClick(Sender: TObject);
var  hdr : TPDU_HDR ;
     bind_pkt : TSMPP_BIND ;
     mm : TMemoryStream ;
     HdrPtr : pPDU_HDR ;
     BindPtr : pSMPP_BIND ;
     sysid : AnsiString ;
     pass  : AnsiString ;
     systype : AnsiString ;
     add_rn : AnsiString ;
begin

sysid := 'sysid';
pass := 'pass';
systype := 'sys_type';
add_rn := '';

hdr.command_id := htonl(cmdBindTransceiver)  ;
hdr.command_status := htonl(cmdNull) ;
hdr.command_number  :=  htonl(cmdBindTransmitter)  ;
hdr.command_len := htonl(SizeOf(hdr)+SizeOf(bind_pkt)); 

bind_pkt.SystemID := pansiChar(sysid);
bind_pkt.Password := pansiChar(pass);
bind_pkt.SystemType := pansiChar(systype);
bind_pkt.Ver := 0 ;
bind_pkt.Addr_TON := 1 ;
bind_pkt.Addr_NPI := 1 ;
bind_pkt.Addr_Range := pansiChar(add_rn);

HdrPtr  := @HdrPtr ;
BindPtr := @bind_pkt ;

mm := TMemoryStream.Create ;
mm.Write(HdrPtr^,SizeOf(hdr));
mm.Position := mm.Size;
mm.Write(BindPtr^,SizeOf(bind_pkt));
mm.Position := 0 ;

clnt.Socket.SendStream(mm);

end; 
```

我想我需要将数据流编码为某种东西，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:28:30.700

我上次在 1999/2000 年与 SMPP 合作过，但当时是规格。3.4 表示 SystemID、Password 等字段，即声明为**Var。Max nn**的类型为**C-OctetString**。

所以如果规范没有改变，你就完全错过了：你不能使用记录和类似的数据结构，但你必须创建一个八位字节流，其中包含没有填充的 ASCIIZ 字符串序列，例如（使用 Delphi 语法）：**...' SystemId'#0'Password'#0'SystemType'#0** ...。如果我没记错的话，你也应该改变整数字段的字节序。

# ios - 我使用递归通过 Twitter 朋友分页的代码不起作用 - iOS

> ID：15728751
> 
> 赞同：5
> 
> 时间：2013-03-31T11:06:20.580
> 
> 标签：ios, objective-c, recursion, twitter

我正在尝试使用光标浏览用户的 Twitter 朋友。由于您一次获得 20 个光标以及下一个光标，因此我认为递归可能是处理此问题的最佳方法。但是，我相信因为我使用的是完成处理程序块，所以它不能正常工作。我一直只有两页朋友（40），然后它又回来了。

```
- (void)fetchTwitterFriendsForCrush:(Crush*)crush
                         fromCursor:(NSString*)cursor
          usingManagedObjectContext:(NSManagedObjectContext*)moc
                         withSender:(id) sender
             usingCompletionHandler:(void(^)())completionHandler
{
    // twitter returns "0" when there are no more pages to receive
    if (([cursor isEqualToString:@"0"]) || (cursor == nil)) {
        completionHandler();
        return;
    }
    NSString *urlString =
    [NSString stringWithFormat:@"https://api.twitter.com/1.1/friends/list.json?cursor%@skip_status=1", cursor];
    NSURL *requestURL = [NSURL URLWithString:urlString];
    SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                            requestMethod:SLRequestMethodGET
                                                      URL:requestURL
                                               parameters:nil];
    request.account = self.twitterAccount;
    [request performRequestWithHandler:
     ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (error) {
            NSLog(@"Error getting twitter friends = %@", error);
        }
        if (responseData) {
            NSError *jsonError;
            NSString *nextCursor = nil;
            NSMutableArray *friendsArray = [NSMutableArray arrayWithCapacity:100];
            NSDictionary *friendsDictionary =
            [NSJSONSerialization JSONObjectWithData:responseData
                                            options:0
                                              error:&jsonError];
            if ([friendsDictionary valueForKey:@"next_cursor_str"]) {
                nextCursor = [friendsDictionary valueForKey:@"next_cursor_str"];
            }
            if ([friendsDictionary valueForKey:@"users"]) {
                [friendsArray addObjectsFromArray:[friendsDictionary valueForKey:@"users"]];
            }
            for (NSDictionary *singleFriend in friendsArray) {
                NSString *twitterID = [singleFriend valueForKey:@"id_str"];
                NSString *name = [singleFriend valueForKey:@"name"];
                NSString *screenName = [singleFriend valueForKey:@"screen_name"];
                dispatch_queue_t mainQueue = dispatch_get_main_queue();

                dispatch_async(mainQueue, ^(void) {
                    // update model
                    TwitterFriend *newTwitterFriend =
                    [TwitterFriend twitterFriendWithTwitterID:twitterID
                                                     forCrush:crush
                                    usingManagedObjectContext:moc];
                    newTwitterFriend.name = name;
                    newTwitterFriend.screenName = screenName;
                });
            }
            [self fetchTwitterFriendsForCrush:crush
                                   fromCursor:nextCursor
                    usingManagedObjectContext:moc
                                   withSender:self
                       usingCompletionHandler:nil];
        }
    }];
} 
```

以及调用它的方法：

```
[self.twitterNetwork fetchTwitterFriendsForCrush:self.crush fromCursor:@"-1" usingManagedObjectContext:self.managedObjectContext withSender:self usingCompletionHandler:^{
    //
    [self reloadData];
}]; 
```

更新：看来我在每个请求上都收到了相同的 next_cursor 数据。有没有人经历过这个？或者你在这段代码中看到什么会导致这种情况的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:17:36.553

我发现更复杂的方法更好。您可以使用[https://api.twitter.com/1.1/friends/ids.json](https://api.twitter.com/1.1/friends/ids.json)吗？获取您的朋友 ID 列表。然后使用 1.1/users/lookup.json 您可以获得用户的完整信息。[我写了一个小助手来使用 SLRequest (#iOS6) https://github.com/ArchieGoodwin/NWTwitterHelper](https://github.com/ArchieGoodwin/NWTwitterHelper)深入了解用户朋友

# javascript - underscore.js - 将列表转换为数组的最短方法

> ID：15728752
> 
> 赞同：3
> 
> 时间：2013-03-31T11:06:39.467
> 
> 标签：javascript, arrays, underscore.js

`FileList`使用下划线将列表（对象或其他数组式浏览器数据结构）转换为数组的最短方法是什么？

目前我使用这个（在 CoffeeScript 中）：

```
files = _.map(fileList, (it)->it) 
```

但我想知道是否有更短的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T11:21:42.917

最短的方法是使用下划线的**[_.toArray(list)](http://underscorejs.org/#toArray)** 方法：

> “将列表（可以迭代的任何内容）转换为真正的数组。对于转换参数对象很有用。”

例子：

```
(function(){ return _.toArray(arguments).slice(1); })(1, 2, 3, 4);
=> [2, 3, 4] 
```

# grails-2.0 - Grails 2.1 如何防止级联删除

> ID：15728755
> 
> 赞同：1
> 
> 时间：2013-03-31T11:07:07.017
> 
> 标签：grails-2.0

人们使用什么技术来有效地防止对大量类进行级联删除？

我有以下域类：但是当我删除一个类别项目时，它也会删除所有与类别相关的 genericProduct 项目。现在我该如何防止这种情况

```
class Category {

String name
static hasMany      =  [manufacturers: Manufacturer, genericProducts:GenericProduct]
static mappedBy     =  [genericProducts:'categories']
AuditUser audit     =  new AuditUser()
static embedded     =  ['audit']    
static constraints  =  {
    name  blank: false, size: 0..60, unique: false
}
static mapping = {
    table 't01i001'
    id      column: 'f_category_id'
    name    column: 'f_name',       length: 60     
    version column: 'f_revision'

    manufacturers joinTable: [name: 't01j001', key: 'k_category_id', column: 'k_manufacturer_id']
} 
```

和

```
class GenericProduct {

String name

static belongsTo  =  [categories:Category]
static hasMany    =  [brands:Brand]
static mappedBy   =  [brands:'genericProducts']

AuditUser audit = new AuditUser()
static embedded = ['audit']  

static constraints = {
    name     blank: false, size: 0..60, unique: false
}

static mapping = {
    table 't01i003'
    id          column: 'f_generic_product_id'
    name        column: 'f_name', length: 30  
    categories  column: 'f_cat_id', length: 30  
    version     column: 'f_revision'
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T05:15:45.577

下次我添加一些配置以防止级联删除然后它可以工作

```
class Category {

    String name
    static hasMany      =  [manufacturers: Manufacturer, genericProducts:GenericProduct]
    static mappedBy     =  [genericProducts:'categories']
    AuditUser audit     =  new AuditUser()
    static embedded     =  ['audit']    
    static constraints  =  {
        name  blank: false, size: 0..60, unique: false
    }
    static mapping = {
        manufacturers   cascade: 'save-update'
        genericProducts cascade: 'save-update'

        table 't01i001'
        id      column: 'f_category_id'
        name    column: 'f_name',       length: 60     
        version column: 'f_revision'

        manufacturers joinTable: [name: 't01j001', key: 'k_category_id', column: 'k_manufacturer_id']
    } 
```

# android - android - EditText 滞后

> ID：15728759
> 
> 赞同：1
> 
> 时间：2013-03-31T11:08:05.420
> 
> 标签：android, android-emulator, android-edittext

我有一个edittext（12）数组，以这种方式初始化：

```
for (int i = 0; i < solution.length(); i++) {
            int resID = context.getResources().getIdentifier(idName + i, "id",
                    context.getPackageName());
            editText[i] = (EditText) layout.findViewById(resID);
            editText[i].setVisibility(View.VISIBLE);
            editText[i].setEnabled(true);
            editText[i]
                    .setFilters(new InputFilter[] { new InputFilter.AllCaps(),
                            new InputFilter.LengthFilter(1) }); 

} 
```

我的xml是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutsolutionhorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="top|center_vertical|center_horizontal" >

    <EditText
        android:id="@+id/txtsolutionhorizontal0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal0"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal1"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal2"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal3"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal4"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal5"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal6"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal7"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal8"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal9"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <EditText
        android:id="@+id/txtsolutionhorizontal11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal10"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="center"
        android:inputType="text|textNoSuggestions"
        android:padding="0dp"
        android:singleLine="true"
        android:textSize="15dp"
        android:visibility="gone" >
    </EditText>

    <ImageView
        android:id="@+id/buttonclearhorizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/txtsolutionhorizontal11"
        android:clickable="true"
        android:src="@drawable/clearbox" />

</RelativeLayout> 
```

对于每个edittext，都有一个监听器：

```
for (int j = 0; j < editTextVertical.length; j++) {
                    editTextVertical[j]
                            .addTextChangedListener(new EditTextInputTextWatcherListener(
                                    editTextVertical, editTextVertical[j], j));
                } 
```

其中 EditTextInputTextWatcherListener 是：

```
public void onTextChanged(CharSequence s, int start, int before, int count) {
        // System.out.println(s.charAt(count-1) + " character to send");
        if (editText1.getText().toString().length() == 1
                && !editText1.getText().toString().equals("")) {
            if (index < 11)
                editText[index + 1].requestFocus();
        } else if (editText1.getText().toString().length() == 0
                && editText1.getText().toString().equals("")) {
            editText[index].requestFocus();
        }
    } 
```

如果edittext是3或5是可以的，但是当edittext更大时，我在输入文本时会有很多滞后。如果我在编辑文本中写了一封信，我会在 1 秒后看到这封信。

我对模拟器和设备有这个问题。有可能解决问题吗？

非常感谢

# android - 没有可用的互联网连接时强制关闭应用程序

> ID：15728764
> 
> 赞同：4
> 
> 时间：2013-03-31T11:09:56.403
> 
> 标签：android

*我知道这个问题之前可能已经被问过，但我不知道如何使用这些答案让它们与我的应用程序一起使用。*

当应用程序的用户打开应用程序时，我想检查是否有互联网连接。我找到了一些检查方法，但我对 android 开发完全陌生，我只是不知道该怎么做。这是我当前的应用程序文件：

```
package com.pocket.line;

import com.pocket.line.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class AndroidMobileAppSampleActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView mainWebView = (WebView) findViewById(R.id.mainWebView);

    WebSettings webSettings = mainWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    mainWebView.setWebViewClient(new MyCustomWebViewClient());
    mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

    mainWebView.loadUrl("http://www.google.com/");
}

private class MyCustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
}
} 
```

如果没有连接，我想强制关闭应用程序并显示警报。我发现可以检查的代码片段：

```
 public boolean hasActiveInternetConnection()
     {
    try
    {
        HttpURLConnection urlc = (HttpURLConnection) 
        (new URL("http://www.google.com").openConnection());
        urlc.setRequestProperty("User-Agent", "Test");
        urlc.setRequestProperty("Connection", "close");
        urlc.setConnectTimeout(4000);
        urlc.setReadTimeout(4000);
        urlc.connect();
        networkcode2 = urlc.getResponseCode();
        return (urlc.getResponseCode() == 200);
    } catch (IOException e)
    {
        Log.i("warning", "Error checking internet connection", e);
        return false;
    }

    } 
```

我只是不知道我需要更改该代码的哪些部分才能使其与我的应用程序一起使用。任何帮助，将不胜感激！

**清单文件**

```
 <?xml version="1.0" encoding="utf-8"?>
  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.pocket.line" android:versionCode="3"
  android:versionName="1.2">
 <uses-sdk android:minSdkVersion="11" />

 <uses-permission android:name="android.permission.INTERNET"/>

 <application android:icon="@drawable/ic_launcher" android:label="Pocket Line">
    <activity android:name="com.pocket.line.AndroidMobileAppSampleActivity"
              android:label="Pocket Line">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T11:20:31.677

我认为您尚未在 AndroidManifest.xml 中声明活动

如果此活动是应用程序的启动器，请这样做。

```
<activity
   android:name=".AndroidMobileAppSampleActivity"
   android:label="@string/title_activity" >
     <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
     </intent-filter>
</activity> 
```

如果此活动不是启动器。

```
<activity
   android:name=".AndroidMobileAppSampleActivity"
   android:label="@string/title_activity" >
</activity> 
```

而不是这种检查互联网连接这样做。

```
/**
 * This method check mobile is connected to network.
 * @param context
 * @return true if connected otherwise false.
 */
public static boolean isNetworkAvailable(Context context) {
    ConnectivityManager conMan = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if(conMan.getActiveNetworkInfo() != null && conMan.getActiveNetworkInfo().isConnected())
        return true;
    else
        return false;
} 
```

并在 AndroidManifest.xml 中添加权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

并使用以下代码进行检查：

```
if(!isNetworkAvailable(this)) {
   Toast.makeText(this,"No Internet connection",Toast.LENGTH_LONG).show();
   finish(); //Calling this method to close this activity when internet is not available.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:21:10.893

像这样检查

```
 if(hasActiveInternetConnection()){
        mainWebView.loadUrl("http://www.google.com/");
    }else{
        Log.d("TAG","No Internet connection");
    } 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T11:28:48.693

还有另一种简单的方法可以做到这一点

```
public class MyActivity extends Activity {

    // flag for Internet connection status
    Boolean isInternetPresent = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                // get Internet status
                isInternetPresent = isConnectingToInternet;

                if (!isInternetPresent) {
                    showAlertDialog(MyActivity.this, "No Internet Connection",
                            "You don't have internet connection.", false);
                }

    }

 /**
    * check the Internet connection and return true or false
    * 
    * @return
    */
   public boolean isConnectingToInternet() {
      ConnectivityManager connectivity = (ConnectivityManager) getApplicationContext()
            .getSystemService(Context.CONNECTIVITY_SERVICE);
      if (connectivity != null) {
         NetworkInfo[] info = connectivity.getAllNetworkInfo();
         if (info != null)
            for (int i = 0; i < info.length; i++)
               if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                  return true;
               }

      }
      return false;

   }

    public void showAlertDialog(Context context, String title, String message, Boolean status) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();

        // Setting Dialog Title
        alertDialog.setTitle(title);

        // Setting Dialog Message
        alertDialog.setMessage(message);

        // Setting alert dialog icon
        alertDialog.setIcon(R.drawable.fail);

        // Setting OK Button
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
             finished();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }
} 
```

# javascript - JavaScript 异步调用文字对象函数

> ID：15728770
> 
> 赞同：0
> 
> 时间：2013-03-31T11:10:33.220
> 
> 标签：javascript, performance, asynchronous

我有这个代码，我在一个项目中使用它作为“数据访问”类的原型，其中所有需要的计算和样本数据都存在。问题是，如果我在服务器“Web 服务”中有这些，我可以使用“负载指示器”告诉用户我目前正在做一些工作，所以请稍候。

“数据访问”代码：

```
(function () {
         DataAccess.db = {
                      profitList: [{ CalendarActualDateDDMMYYYY: '01/07/2009', CalendarActualDateMMDDYYYY: '07/01/2009', CalendarMonth: 7, CalendarYear: 2009, MonthName: 'July', DateInt: 200907, FiscalMonth: 1, FiscalYear: 2010, Quarter: 'Q1', Division: 'Holdings', Company: 'Holdings', RevenueYTD: 4900, RevenuePeriodic: 4900, AdjustedOperatingProfitYTD: 392, AdjustedOperatingProfitPeriodic: 392, ProfitBeforeTaxYTD: 372, ProfitBeforeTaxPeriodic: 372, OperatingMarginYTD: 8, OperatingMarginPeriodic: 8, OperatingMarginPeriodic6MonthsMovingAverage: 0 },
        { CalendarActualDateDDMMYYYY: '01/08/2009', CalendarActualDateMMDDYYYY: '08/01/2009', CalendarMonth: 8, CalendarYear: 2009, MonthName: 'August', DateInt: 200908, FiscalMonth: 2, FiscalYear: 2010, Quarter: 'Q1', Division: 'Holdings', Company: 'Holdings', RevenueYTD: 8673, RevenuePeriodic: 3773, AdjustedOperatingProfitYTD: 656, AdjustedOperatingProfitPeriodic: 264, ProfitBeforeTaxYTD: 623, ProfitBeforeTaxPeriodic: 251, OperatingMarginYTD: 7.56, OperatingMarginPeriodic: 7, OperatingMarginPeriodic6MonthsMovingAverage: 0 },
        { CalendarActualDateDDMMYYYY: '01/09/2009', CalendarActualDateMMDDYYYY: '09/01/2009', CalendarMonth: 9, CalendarYear: 2009, MonthName: 'September', DateInt: 200909, FiscalMonth: 3, FiscalYear: 2010, Quarter: 'Q1', Division: 'Holdings', Company: 'Holdings', RevenueYTD: 12687, RevenuePeriodic: 4014, AdjustedOperatingProfitYTD: 977, AdjustedOperatingProfitPeriodic: 321, ProfitBeforeTaxYTD: 928, ProfitBeforeTaxPeriodic: 305, OperatingMarginYTD: 7.7, OperatingMarginPeriodic: 8, OperatingMarginPeriodic6MonthsMovingAverage: 0 }], 
    // The list can go on big to 640 objects
                     getOperationProfitByCompany: function (company) {
                                 // various queries using SQLike ot jLinq on the profiList
                     },
                     // other same function data access workers
    })(); 
```

我正在使用 knockout.js、HTML5 和 MVVM 将 ViewModel 绑定到我的页面。这是 ViewModel 页面之一，它将使用数据访问对象来显示一些图表和自定义模板控件，并在数据访问方法中进行大量计算。

```
MyPrototype.op_profit = function (params) {

    var self = this;

    var vm = criteria.viewModel;

    var filterProfitList = function (singleDate, aStartDate, aEndDate) {
        var list = [];
        if (vm.allHoldingsSelected()) {
            list = DataAccess.db.getProfitConsolidateAll(singleDate, aStartDate, aEndDate);
        } else if (vm.isDivisionSelected()) {
            list = DataAccess.db.getProfitWithCriteriaDivision(
                vm.selectedDivision(), singleDate, aStartDate, aEndDate);
        } else if (vm.isCompanySelected()) {
            list = DataAccess.db.getProfitWithCriteriaDate(
                [{ CompanyId: vm.selectedCompany() }], singleDate, aStartDate, aEndDate);
        }

        return list;
    };

    var filterChartDataSource = function () {
        var list = [];

        if (vm.allHoldingsSelected()) {
            list = DataAccess.db.getOperationProfitByAllHoldings();
        } else if (vm.isDivisionSelected()) {
            list = DataAccess.db.getOperationProfitByDivision(vm.selectedDivision());
        } else if (vm.isCompanySelected()) {
            list = DataAccess.db.getOperationProfitByCompany(vm.selectedCompany());
        }

        return list;
    };

    // ... other functions and properties ...

    var viewModel = {
        // ... functions and properties ...
        profitAnalysisList: ko.observableArray(filterProfitList(self.fromDate(), self.fromDate(), self.toDate())),
        chartOptions: {
           // .. properties objects, functions
           dataSource: filterChartDataSource(),
        },
        rangeSelectorOptions: {
           // .. properties objects, functions
           dataSource: filterChartDataSource(),
        }
// Can be used in other call back event functions too
    };

    ko.applyBindings(viewModel);

   return viewModel; 
```

现在，我认为您对我的结构有了全面的了解，并且您了解由于数据访问的计算，在某些情况下用户体验是悲惨的。当用户选择导航到 op_profit 页面时，将有几秒钟（4-5 有时可能更多）来加载页面并显示它。

我不是 JavaScript 专家，但我的想法是异步处理，比如桌面世界中的线程，或者调用 AJAX 操作或其他异步 API。

这让我进入了 Web Workers，我现在将学习和尝试，但我需要知道我的选择和你的帮助，这将解决我的问题。这是我需要快速做的事情：/

总而言之，我需要立即加载页面，显示加载指示器（我已经知道如何执行此操作），异步获取数据，然后将数据附加到 viewModel 属性，以便它可以使用数据更新绑定的 HTML 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:04:34.957

我使用 Web Workers 解决了这个问题。从本[教程](http://www.html5rocks.com/en/tutorials/workers/basics/)开始。几乎适用于任何情况。

# android - 反馈活动 - boolean bRequiresResponse = responseCheckbox.isChecked(); - 如何使用 if 语句将此布尔值更改为字符串？

> ID：15728773
> 
> 赞同：0
> 
> 时间：2013-03-31T11:10:58.940
> 
> 标签：android, boolean, feedback

例如

```
if boolean = true
 string = "A response is required".
 if boolean = false
 string = "No response is required". 
```

这是因为，当发送电子邮件时，我想在电子邮件中包含这个字符串。我已经检查了互联网，但我发现的内容不适合我的代码。

这是Java代码：

```
package com.android.motivateme3;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.Spinner;
import android.support.v4.app.NavUtils;

public class Feedback extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_feedback);
    // Show the Up button in the action bar.
    setupActionBar();
}
public void sendFeedback(View button) {  
    // Do click handling here
    final EditText nameField = (EditText) findViewById(R.id.EditTextName);  
    String name = nameField.getText().toString();  
    final EditText emailField = (EditText) findViewById(R.id.EditTextEmail);  
    String email = emailField.getText().toString();  
            final EditText feedbackField = (EditText)                 findViewById(R.id.EditTextFeedbackBody);  
    String feedback = feedbackField.getText().toString();  
    final Spinner feedbackSpinner = (Spinner) findViewById(R.id.SpinnerFeedbackType);  
    String feedbackType = feedbackSpinner.getSelectedItem().toString();
    final CheckBox responseCheckbox = (CheckBox) findViewById(R.id.CheckBoxResponse);  
    boolean bRequiresResponse = responseCheckbox.isChecked(); 

Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Motivate Me Feedback "+"("+feedbackType+")");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, "parekhmihir98@gmail.com");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, feedback+"(From "+name+","+email+")"+bRequiresResponse);
startActivity(Intent.createChooser(emailIntent, "Send email via:"));}

/**
 * Set up the {@link android.app.ActionBar}.
 */
private void setupActionBar() {

    getActionBar().setDisplayHomeAsUpEnabled(true);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.feedback, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Feedback" >

<TextView  
android:id="@+id/TextViewTitle"  
android:layout_width="wrap_content"  
android:layout_height="wrap_content"  
android:text="@string/feedbacktitle"  
android:textSize="10pt">  
</TextView>

<CheckBox
android:id="@+id/CheckBoxResponse"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/EditTextFeedbackBody"
android:layout_below="@+id/EditTextFeedbackBody"
android:text="@string/feedbackresponse" />

<Button
android:id="@+id/ButtonSendFeedback"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/CheckBoxResponse"
android:layout_below="@+id/CheckBoxResponse"
android:onClick="sendFeedback"
android:text="@string/feedbackbutton" />

<EditText
android:id="@+id/EditTextEmail"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/SpinnerFeedbackType"
android:layout_below="@+id/TextViewTitle"
android:layout_marginTop="32dp"
android:ems="10"
android:hint="@string/feedbackemail"
android:inputType="textEmailAddress" >

<requestFocus />
</EditText>

<EditText
android:id="@+id/EditTextName"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/TextViewTitle"
android:layout_below="@+id/TextViewTitle"
android:ems="10"
android:hint="@string/feedbackname"
android:inputType="textPersonName" />

<Spinner
android:id="@+id/SpinnerFeedbackType"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/EditTextName"
android:layout_below="@+id/EditTextEmail"
android:entries="@array/feedbacktypelist"
android:prompt="@string/feedbacktype1" />

<EditText
android:id="@+id/EditTextFeedbackBody"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/SpinnerFeedbackType"
android:layout_centerVertical="true"
android:ems="10"
android:hint="@string/feedbackbody"
android:inputType="textMultiLine"
android:lines="5" />

</RelativeLayout> 
```

# java - 没有可用的完成，奇怪的 Eclipse 行为

> ID：15728776
> 
> 赞同：27
> 
> 时间：2013-03-31T11:11:47.083
> 
> 标签：java, eclipse, content-assist

我想我尝试了所有建议的解决方案，但是这个 Eclipse 自动完成问题非常特殊：

1.  我启动 Eclipse，内容辅助工作正常；
2.  我想在我的 Swing 项目中创建一个 LineBorder；
3.  我键入`LineBorder panelBorder = new Li`并按 Ctrl+Space；
4.  没有弹出窗口出现，并且在状态栏中以红色写成“无法完成”；
5.  我在内容辅助 2 秒前正常工作的元素上尝试了 Ctrl+Space，但它不再工作了。
6.  我在其他项目上尝试同样的事情，在关闭并重新打开它之后在同一个项目上，在清理它之后，内容辅助在我尝试使用 LineBorder 构造函数之前工作得很好，然后它崩溃了。

我尝试了什么：

1.  在“首选项->Java->编辑器->内容辅助->高级”中重置为默认值；
2.  检查同一菜单中的每个复选框；
3.  创建一个新的工作区并在那里尝试；
4.  删除 .metadata/.plugins/org.eclipse.jdt.core 中的 .index 文件和 'savedIndexNames.txt'；
5.  检查重复的库。

我没有尝试的是重新安装 Eclipse。我使用的版本是 Eclipse IDE for Java Developers (Juno)。

似乎没有任何效果。

更新：

[按照iGili](https://stackoverflow.com/users/1499142/igili)的建议检查了日志。失败时会引发一些异常：

```
org.eclipse.e4.core.di.InjectionException: org.eclipse.core.commands.ExecutionException: While executing the action, an exception occurred
Caused by: org.eclipse.core.commands.ExecutionException: While executing the action, an exception occurred
Caused by: java.lang.ArrayIndexOutOfBoundsException: 1
    at org.eclipse.jdt.internal.codeassist.InternalCompletionProposal.findConstructorParameterNames(InternalCompletionProposal.java:257)
    at org.eclipse.jdt.internal.codeassist.InternalCompletionProposal.findParameterNames(InternalCompletionProposal.java:1456)
    at org.eclipse.jdt.ui.text.java.CompletionProposalLabelProvider.appendUnboundedParameterList(CompletionProposalLabelProvider.java:113)
    at org.eclipse.jdt.ui.text.java.CompletionProposalLabelProvider.createMethodProposalLabel(CompletionProposalLabelProvider.java:272)
    at org.eclipse.jdt.ui.text.java.CompletionProposalLabelProvider.createStyledLabel(CompletionProposalLabelProvider.java:570)
    at org.eclipse.jdt.internal.ui.text.java.LazyJavaCompletionProposal.computeDisplayString(LazyJavaCompletionProposal.java:262)
    at org.eclipse.jdt.internal.ui.text.java.LazyJavaCompletionProposal.getStyledDisplayString(LazyJavaCompletionProposal.java:238)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.handleSetData(CompletionProposalPopup.java:841)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$24(CompletionProposalPopup.java:831)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup$3.handleEvent(CompletionProposalPopup.java:593)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Table.checkData(Table.java:1166)
    at org.eclipse.swt.widgets.Table.wmNotifyChild(Table.java:6749)
    at org.eclipse.swt.widgets.Control.wmNotify(Control.java:5534)
    at org.eclipse.swt.widgets.Composite.wmNotify(Composite.java:1896)
    at org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:5086)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4584)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1627)
    at org.eclipse.swt.widgets.Shell.windowProc(Shell.java:2069)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2440)
    at org.eclipse.swt.widgets.Table.callWindowProc(Table.java:564)
    at org.eclipse.swt.widgets.Table.callWindowProc(Table.java:430)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623) 
```

它继续，我不知道发布长堆栈跟踪的惯例是什么

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-11-10T20:55:18.667

我有同样的。Windows -> 首选项 -> Java -> 编辑器 -> 内容辅助 -> 高级。确保在默认内容辅助列表（弹出窗口的第一个面板）中选中“Java 提案”复选框。

通过单击底部的“恢复默认值”按钮，可以自动检查“Java 提案”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T15:16:34.987

返回到 Advanced Content Assist 首选项页面并恢复默认值。使用确定按钮关闭对话框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-20T12:29:05.767

我有同样的问题。实际上我弹出了内容辅助，但它小于几个像素。（谁缩小了这个，为什么缩小了不知道......）但是如果你看到一些奇怪的东西（在我的情况下，那是字母'Rp'，但我想它可以是任何东西）通常应该出现内容辅助的地方，尝试扩展它，你可能会得到它。祝你好运。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-07T01:27:13.273

这些答案都没有帮助我：Java 提案被勾选，恢复默认值没有做任何事情。它只有在我重新启动 Eclipse 后才开始工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-13T10:25:04.450

需要选择 Windows -> Preferences -> Java -> Editor -> Content Assist -> Advanced (Java Proposals)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-13T00:30:02.930

对我有用的是创建一个新工作区并将所有项目复制到该工作区。该问题现在仅发生在以前的工作区上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-31T15:39:51.967

我认为您在 3.6 中遇到了一个已知缺陷。看[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=320167)

尝试下载更新的版本 - 自 3.7 以来已修复

**[编辑]**我刚刚意识到你写了“朱诺”——你使用的是最新的（4.2.2）吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-29T15:27:00.470

我遇到了同样的问题，但在我的项目中只有一个特定的文件（在其他文件上完成工作正常）。我也在使用 Eclipse Juno。

我通过删除由于完成失败的文件中未使用的导入而导致的一些警告来解决问题......它再次开始工作！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-24T12:41:27.043

我刚刚在 Juno 切换工作区中修复了同样的问题，然后切换回来。其他解决方案不起作用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-28T06:47:40.717

我刚才在 Eclipse 版本 2019-06 (4.12) 中遇到了同样的问题。对我来说，清理项目解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-10T19:42:24.227

转到 Eclipse → 首选项 → Java → 编辑器 → 内容辅助 → 恢复默认值

然后项目→清洁

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-04T23:02:33.410

这个复选框“java 提案”将被勾选，直到我失败并得到“没有可用的完成”。之后，下次我打开设置时它会显示为未勾选。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-22T08:44:40.633

今天早上我无法扩展 sysout。在浪费了几个小时之后，我发现我试图将 System.out.println() 放在方法之外。当我在一个方法中做这件事时，一切都很完美。

# php - mysql结果检查不当？

> ID：15728778
> 
> 赞同：-1
> 
> 时间：2013-03-31T11:11:53.240
> 
> 标签：php, mysql, associations, fetch

为什么我仍然得到一个

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，字符串在

使用以下功能时：？

```
public function getRowsWhere($table, $order_by, $where_field, $where_match, $limit_start = 0, $limit_end = 1) {

    // query Table
    $query_string = "SELECT * FROM $table WHERE $where_field='$where_match' ORDER BY '$order_by' DESC LIMIT $limit_start, $limit_end";

    // run query
    $sql    = new DBQuery($this->database);
    $result = $sql->prepareQuery($query_string);

    if ($result) {
       // initialize results array
        $match_array = [];

        // iterate through array and place results in an array at row index
        $r = 0;
        while ($row = mysql_fetch_assoc($result)) {
            $row_array = [];
            $c       = 0;
            while ($c < mysql_num_fields($result)) {
                $col                   = mysql_fetch_field($result, $c);
                $row_array[$col->name] = $row[$col->name];
                $c++;
            }
            $match_array[$r] = $row_array;
            $r++;
        }
    }

    // return data
    return $match_array;
} 
```

从以下调用：

```
if (!$breadcrumbs->getCrumb(2)) {
    $project_details = $copy->getRows('projects', 'id', 'DESC', 0, 1);
}
else {
    $project_details = $copy->getRowsWhere('projects', 'id', 'id', $breadcrumbs->getCrumb(2), 0, 1);
    if (!$project_details) {
        $project_details = $copy->getRows('projects', 'id', 'DESC', 0, 1);
    }
} 
```

根据要求：DBQuery 类。这都是相当基本的东西。

```
<?php

class DbQuery extends DbMan {

    /**
     *   PARAMETERS
     *
     * ^ @param array  $database            -> database connection information
     * --------------------------------------------------------------------------
     */
    protected $database;

    /**
     * --------------------------------------------------------------------------
     *   PUBLIC
     *   __construct ()
     * = set database object to use
     *
     * ^ @param string  $database           -> database connection information
     * --------------------------------------------------------------------------
     *
     */
    public function __construct($database) { $this->database = $database; }

    /**
     * --------------------------------------------------------------------------
     *   PUBLIC
     *   prepareQuery ()
     * = checks Sql, executes query to return requested data set
     *
     * ^ @param  string  $query_request     -> query string
     * ~ @return object  $result_dataset    -> result data set
     * --------------------------------------------------------------------------
     *
     */
    public function prepareQuery($query_request) {

        // retrieve result dataset
        $result_dataset = $this->executeQuery($query_request);

        // return result data set
        return $result_dataset;
    }
} 
```

它扩展的类 DBMan：

```
<?php
class DbMan {

    /**
     *   PARAMETERS
     *
     * ^ @param array   $database           -> database connection information
     *   @param object  $mysql_connection   -> database connection object
     *   @param object  $mysql_connection   -> database object
     * --------------------------------------------------------------------------
     */
    protected $database;
    private   $mysql_connection;
    private   $mysql_db;

    /**
     * --------------------------------------------------------------------------
     *   PUBLIC
     *   __construct ()
     * = empty constructor
     *
     * ^ @param        ->
     * --------------------------------------------------------------------------
     *
     */
    public function __construct() { }

    /**
     * --------------------------------------------------------------------------
     *   PROTECTED
     *   dbConnect ()
     * = open connection to MySql and connect to database
     *
     * ^ @param        ->
     * --------------------------------------------------------------------------
     *
     */
    protected function dbConnect() {

        // connect to MySQL
        $this->mysql_connection = mysql_connect($this->database['hostname'], $this->database['username'], $this->database['password'])
            or die('Unable to connect to MySQL : ' . mysql_error());

        // connect to database
        $this->mysql_db = mysql_select_db($this->database['database'], $this->mysql_connection)
            or die('Unable to connect to database : ' . mysql_error());
    }

    /**
     * --------------------------------------------------------------------------
     *   PROTECTED
     *   executeQuery ()
     * = run query on database
     *
     * ^ @param  string  $query          -> sql statement string
     * ~ @return result  $query_result   -> result of query
     * --------------------------------------------------------------------------
     *
     */
    protected function executeQuery($query) {

        // open connection to the database
        $this->dbConnect();

        // run sql query on database
        $query_result = mysql_query($query)
            or die('Could not run query on table:<br />' . mysql_error());

        // close database connection
        mysql_close($this->mysql_connection);

        // Check to make sure data is returned
        if (mysql_num_rows($query_result)) {
            // return result data set
            return $query_result;
        }
        else {
            // return nothing
            return "No Data Available";
        }
    }
} 
```

我希望这能让这个更清楚..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:17:59.293

你在这里关闭连接：

```
 // close database connection
    mysql_close($this->mysql_connection);

    // Check to make sure data is returned
    if (mysql_num_rows($query_result)) {
        // return result data set
        return $query_result;
    }
    else {
        // return nothing
        return "No Data Available";
    } 
```

这意味着`mysql_num_rows`返回`FALSE`，因此返回字符串`No Data Available`，因此返回`mysql_fetch_assoc() expects parameter 1 to be resource, string given`错误。

# performance - 预加载和网站性能：x PDF 数量与 x * PNG 页面数量

> ID：15728779
> 
> 赞同：0
> 
> 时间：2013-03-31T11:11:53.383
> 
> 标签：performance, pdf, png, preloader

我有个问题。

我目前正在开发一个网站，我几乎完成了画廊部分。当用户单击其中一个图库图片时，图库部分将显示 a) pdf 文件或 b) 几个 png（这些 png 将显示在彼此下方，看起来就像 pdf）。

我可以在上述 PDF 或 png 之间进行选择。

问题是pdf文件接近5mb，我对此无能为力。我正在考虑提前预加载 pdf 文件或 png 文件。

我正在寻找一件事：网站性能。

是预加载一个 pdf 更好（这个画廊中将有 20-30 个 pdf，所以我将预加载 20-30 个 pdf）还是使用 png 方法更好（20-30*x 数量页）。

或者如果其他人有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:38:54.930

最好的标准是亲自尝试、衡量和观察。

在任何情况下，您都可以尝试通过在预加载数据量与简单性和负载之间找到平衡来减少负载。

对于 PNG，您可能会尝试将图像拆分为更小的部分，并仅预加载显示一两个首页所需的图像。这将允许访问者快速打开这些页面（毕竟他可能不会走得更远）。

如果是 PDF，您可能会线性化文档（针对快速 Web 视图优化它们）。对于线性化文档，您可能会尝试仅预加载文件的开头。有一个关于[找到应该预加载多少](https://stackoverflow.com/q/10097407/249690)的问题。Adobe 插件打开线性文件比非线性文件更快。不过，我不知道其他使用此优化的 PDF 插件。

# c# - 复杂类型的子集和

> ID：15728784
> 
> 赞同：2
> 
> 时间：2013-03-31T11:12:46.353
> 
> 标签：c#, algorithm, linq

下面是使用 LINQ 给出简单数组结果的子集总和计算。

从[http://algorithmicalley.com/archive/2010/05/02/the-subset-sum-problem.aspx阅读](http://algorithmicalley.com/archive/2010/05/02/the-subset-sum-problem.aspx)

```
 List<int> list = new List<int> { 60, 45, 45, 45, 45, 30 };

           var subsets = from m in Enumerable.Range(0, 1 << list.Count)

          select

              from i in Enumerable.Range(0, list.Count)

              where (m & (1 << i)) != 0

              select list[i];

          var result=subsets.First(set => set.Sum() == 180); 
```

这个结果给出了预期`45,45,45,45`

但我想用复杂对象属性而不是 int 值对这个子集求和

```
 List<Group> groups = new List<Group>{new Group{Count=60},
            new Group{Count=45},new Group{Count=45},new Group{Count=45},
            new Group{Count=45},new Group{Count=30},new Group{Count=60},
            new Group{Count=60},new Group{Count=15}
        }; 
```

然后

```
 var subsets = from m in Enumerable.Range(0, 1 << groups.Count)

                      select

                          from i in Enumerable.Range(0, groups.Count)

                          where (m & (1 << i)) != 0

                          select groups[i];

        List<Group> subset =?????????? something like group.Count.Sum()==180 
```

**欢迎使用 LINQ 或任何实现。我不知道如何处理这个 LINQ 以获得我的结果。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:24:53.413

```
var result = subsets.First(set => set.Select(s => s.Count).Sum() == 180); 
```

请注意，您当前的算法将产生 36 个这样的集合，总和为`180`，但您只关心第一个。不确定这是不是有意的。

此外，如果您更改原始查询以包含此约束，您最终只会迭代直到找到有效的子集，而不是继续构建所有 512 个可能的子集：

```
var result = (from m in Enumerable.Range(0, 1 << groups.Count)
    select
    from i in Enumerable.Range(0, groups.Count)
    where (m & (1 << i)) != 0
    select groups[i])
    .First(set => set.Select(s => s.Count).Sum() == 180); 
```

# iphone - 带有 mac 的 iPhone 上意外的高 3g 数据使用量

> ID：15728790
> 
> 赞同：-1
> 
> 时间：2013-03-31T11:13:46.820
> 
> 标签：iphone, xcode, macos

它几乎在 20 分钟内杀死了我 600MB。我让我的 iPhone 启用了“个人热点”功能（作为 wifi 热点），所以我的 Mac 可以通过我的 iPhone 上网。在那 20 分钟内，我只是在 Xcode 中编写代码，没有其他应用程序在运行。那么所有数据是如何流走的呢？跟系统自动更新或者Xcode组件更新有什么关系吗？谢谢，我只是想找出问题所在，以防万一花更多的钱...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:30:06.017

是的，这可能是可能的。可能是您已经下载`iOS 6.0 Documentation Set`或`Mac OS X 10.6 Core Library`. 有时它会**在安装**或**更新**XCODE 后发生。您可能会发现新的更新，它**会自动下载**更新。

检查这个东西去`xcode -> prefrences -> Downloads -> Components`。在这里检查，您的组件可能会以这种方式下载。

![在此处输入图像描述](https://i.stack.imgur.com/VDOjL.png)

希望你能得到你的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T11:27:38.107

这只是我的看法。您的 iPhone 会创建一个 Wi-Fi 热点。您的 Mac 已连接到 Wi-Fi，而不是 3G 网络。也许 Mac 不够聪明，无法理解它们连接到 Wi-Fi“调制解调器”，而实际上它连接的是 3G。所以他们还在做后台更新。虽然，我从来没有遇到过 iPhone 作为调制解调器这样的问题。它也可以取决于操作系统版本。我有 10.8.2。

使用活动监视器来跟踪执行某些网络的应用程序。安装本地防火墙应用程序，如 Little Snitch，并在 iPhone 联网时阻止某些应用程序（或主机）。

# android - Qt Necessitas 错误 - 找不到 Ministro 服务

> ID：15728800
> 
> 赞同：4
> 
> 时间：2013-03-31T11:15:17.100
> 
> 标签：android, qt, qt-necessitas, ministro

我下载了适用于 Linux 的[Necessitas 安装](http://necessitas.kde.org/necessitas/necessitas_sdk_installer.php)程序，但无法让我的“Hello World”Qt 应用程序在调试器的 Android VM 上运行。

它给出了这个错误：

```
Can't find Ministro service.
The application can't start. 
```

![在此处输入图像描述](https://i.stack.imgur.com/cZURg.png)

这是来自 Qt Creator 的调试日志：

```
Starting remote process...D/dalvikvm( 2497): GC freed 699 objects / 55432 bytes in 152ms
D/dalvikvm( 2497): GC freed 65 objects / 2640 bytes in 58ms
W/System.err( 2497): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://search?q=pname:org.kde.necessitas.ministro }
W/System.err( 2497):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
W/System.err( 2497):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
W/System.err( 2497):    at android.app.Activity.startActivityForResult(Activity.java:2749)
W/System.err( 2497):    at org.kde.necessitas.origo.QtActivity$4.onClick(QtActivity.java:266)
W/System.err( 2497):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
W/System.err( 2497):    at android.os.Handler.dispatchMessage(Handler.java:99)
W/System.err( 2497):    at android.os.Looper.loop(Looper.java:123)
W/System.err( 2497):    at android.app.ActivityThread.main(ActivityThread.java:4363)
W/System.err( 2497):    at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err( 2497):    at java.lang.reflect.Method.invoke(Method.java:521)
W/System.err( 2497):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
W/System.err( 2497):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
W/System.err( 2497):    at dalvik.system.NativeStart.main(Native Method) 
```

所以我无法运行我的程序。否则它会编译。从我在网上看到的情况来看，Ministro 是一种用于在 Android 上部署 Qt 应用程序所需的共享 Qt 库的服务。

那么为什么我会收到这个错误（在新安装的 Necessitas+empty Android 项目上）？我该怎么做才能让我的程序运行，我需要手动安装 Qt 库吗？从哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T23:46:05.207

如果我没记错的话，您必须使用 Necessitas 附带的修改后的 Qt 创建器，并且当您第一次想将应用程序部署到 Android 设备时，您必须执行以下步骤：

1.  在 Qt Creator 的左侧，转到 Projects
2.  在 Necessitas Qt for android 的运行选项卡中的项目窗口中，您必须转到部署配置并单击以展开详细信息
3.  详细检查安装 Ministro 系统范围的 Qt 共享库安装程序并选择您之前下载的 APK（我想我是从这里得到的[http://necessitas.kde.org/necessitas/ministro.php](http://necessitas.kde.org/necessitas/ministro.php)）
4.  只需像往常一样构建并运行您的程序

![在此处输入图像描述](https://i.stack.imgur.com/twWFA.png)

让我知道以下步骤是否对您有用。我认为还有另一种方法，涉及 ADB 和命令行，但为此我必须查找我目前没有的笔记......

# matlab - 如何从实例的重要性权重数组中检测统计上的非确定性值？

> ID：15728802
> 
> 赞同：0
> 
> 时间：2013-03-31T11:15:30.993
> 
> 标签：matlab, statistics

假设我有一个数组 A 包括与索引对应的实例的重要性权重。我想通过使用这些重要性指标找到无关紧要的实例（它类似于特征选择。我想消除无关紧要的实例以获得更好的性能）。我尝试了箱线图，但有没有其他方法在理论上可以更好地用于这种目的？

# linux - 使用 cmake 输出项目根 bin 子文件夹中的二进制文件

> ID：15728805
> 
> 赞同：2
> 
> 时间：2013-03-31T11:15:41.103
> 
> 标签：linux, cmake

我目前正在进行一个 BF 解释器项目。我决定使用 CMake，它工作正常。我按照以下树确定了源外构建：

```
+ Project root
|
+-- src/
+-- bin/
+-- build/ <- holds the "rubbish" generated by CMake when generating the Makefile
+-- CMakeLists.txt 
```

当我想构建项目时，我从项目的根文件夹运行：

```
cd build
cmake ..
make 
```

在 CMakeLists.txt 中，我添加了以下行：

```
SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin) 
```

但是，我发现它在 build/bin 文件夹中输出二进制文件，所以我将这一行编辑为：

```
SET(EXECUTABLE_OUTPUT_PATH "../bin/" 
```

它工作得很好，但恕我直言，有点丑陋。是否有任何“干净”的方式来做到这一点，即不对项目的结构做出假设，而是使用类似的东西`set(EXECUTABLE_OUTPUT_PATH ${PROJECT_ROOT}/bin")`？提前感谢您的回复，并对我可能犯的任何英语错误表示歉意，因为英语不是我的第一语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:31:31.123

您可以设置变量[`CMAKE_RUNTIME_OUTPUT_DIRECTORY`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_tgt%3aRUNTIME_OUTPUT_DIRECTORY "目标属性的 CMake v2.8.10 文档")来实现这一点 - 例如：

```
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/bin) 
```

基本上，`${PROJECT_ROOT}`您要查找的变量是[`PROJECT_SOURCE_DIR`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aPROJECT_SOURCE_DIR "变量的 CMake v2.8.10 文档")、[`CMAKE_SOURCE_DIR`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_SOURCE_DIR "变量的 CMake v2.8.10 文档")或[`CMAKE_CURRENT_SOURCE_DIR`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_CURRENT_SOURCE_DIR "变量的 CMake v2.8.10 文档")。每个都有略微不同的含义，但对于一个基本项目，它们很可能都指向同一个目录。

请注意，要使`CMAKE_RUNTIME_OUTPUT_DIRECTORY`变量生效，必须在创建目标*之前*设置它，即在`add_executable`CMakeLists.txt 中的调用之前。

另请注意，像 MSVC 这样的多配置生成器仍会将每个配置目录附加到此`project root/bin`文件夹。

# mysql - 获取具有联接的人员的活动任务

> ID：15728810
> 
> 赞同：0
> 
> 时间：2013-03-31T11:16:35.200
> 
> 标签：mysql, sql, select

我有一个人员表和一个任务表。虽然一项任务可以由多人完成，但在两者之间有一个“名册”表：

```
person
task_roster
task 
```

我正在寻找一个返回每个人及其当前活动任务的查询。如果他们没有活动任务，它应该简单地返回 NULL。我一直在搞砸以下内容：

```
SELECT *
FROM person
LEFT OUTER JOIN task_roster ON (task_roster.person = person.id)
LEFT OUTER JOIN task on (task.id = task_roster.task AND task.status = 1)
ORDER BY person.name 
```

我也遇到的问题是此查询返回旧的名册条目，因此对于他们之前执行的每个任务，我都会多次返回同一个人。我还尝试在 person.name 上添加 Group By，但我没有得到任何现役职责，只有 NULL 值。

我正在寻找的结果是这样的：

```
 +----------------+-----------+----------------+
 | person.name    | task.id   | task.name      |
 +----------------+-----------+----------------+
 | David Harris   | 5         | Maintenance    |
 | Karen Simmons  | 2         | Transport      |
 | Linda Foster   | 5         | Maintenance    |
 | Michael King   | NULL      | NULL           |
 +----------------+-----------+----------------+ 
```

大卫和琳达都在做同一个任务。名册表只不过是 person.id 和 task.id 之间的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:31:02.053

我想知道这是否可行：

```
SELECT person.*,task.status
FROM person
LEFT OUTER JOIN task_roster ON (task_roster.person = person.id)
LEFT OUTER JOIN task on task.id = task_roster.task
WHERE task.status=1
ORDER BY person.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:39:50.877

您还获得*旧任务*的原因是因为这个 join 语句：

```
...
task_roster ON (task_roster.person = person.id)
LEFT OUTER JOIN task
... 
```

基本上它显示表中的所有记录`task_roster`。可能还有其他解决方案，但我下面的解决方案使用仅`person`与特定活动任务有关的子查询。然后将子查询的结果连接回表`person`using`LEFT JOIN`以便表上的每条记录`person`都将显示在列表中，无论它在子查询上是否有匹配的记录。

```
SELECT  a.name AS PersonName,
        b.task AS TaskID,
        b.name AS TaskName
FROM    person a
        LEFT JOIN
        (
            SELECT  a.person, a.task, b.name
            FROM    task_roster a
                    INNER JOIN task b
                        ON a.task = b.id
            WHERE   b.status = 1
        ) b ON  a.id = b.person 
```

# linux - 在 Iptable 中阻止网页

> ID：15728812
> 
> 赞同：1
> 
> 时间：2013-03-31T11:16:51.037
> 
> 标签：linux, bash, networking, ip

我正在考虑编写脚本来编辑 Iptable。我想要做的是阻止 facebook，但允许在 1 点到 2 点之间访问它以用于休息目的。我通过简单地丢弃数据包来阻止 Facebook，但我不确定如何设置时间限制，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:19:34.463

怎么样：

```
iptables -A OUTPUT ... -m time --timestart 13:00 --timestop 14:00 -j ACCEPT 
```

# php - 根据表单提交值获取Mysql表行数据

> ID：15728815
> 
> 赞同：0
> 
> 时间：2013-03-31T11:17:24.687
> 
> 标签：php, sql, forms

我需要根据表单提交值获取行。

这是我的表格

```
<form name="choose" method "post" t" action="search.php">
    <table>
    <tr>
        <tr>
            <td height="3">
            </td>
        </tr>
        <td width="60">
            <font1>Prof</font1>
        </td>
        <td>
            <select name proffession on>
                <option value=""></option>
                <option value="doctor"><font4>Doctor</font></option>
                <option value="designer">Designer</option>
            </select>
        </td>
    </tr>
    <tr>
        <tr>
            <td height="3">
            </td>
        </tr>
        <td width="60">
            <font1>Source</font1>
        </td>
        <td>
            <select name source>
                <option value=""></option>
                <option value="x"><font4>X</font></option>
                <option value="y">Y</option>
                <option value="z">Z</option>
            </select>
        </td>
    </tr>
    <tr>
        <tr>
            <td height="3">
            </td>
        </tr>
        <td width="60">
            <font1>Location</font1>
        </td>
        <td>
            <select name location on>
                <option value=""></option>
                <option value="bangalore">Bangalore</option>
                <option value="delhi">Delhi</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>
            <input name=look type=submit value=submit>
        </td>
    </tr>
</form> 
```

如果有任何空字段提交，我需要获取不包括该列的行。这是我的 search.php

```
 <?php
mysql_connect("localhost","root","");//database connection
mysql_select_db("alldata");
$qry = "SELECT * FROM data WHERE location LIKE '" . mysql_escape_string($_POST['location']) . "' And proffession LIKE '" . mysql_escape_string($_POST['proffession']) . "' And source LIKE '" . mysql_escape_string($_POST['source']) . "'";

$res = mysql_query($qry);
function mysql_fetch_all($res) {
   while($row=mysql_fetch_array($res)) {
       $return[] = $row;
   }
   return $return;
}
function create_table($dataArr) {
    echo "<tr>
"; for($j = 0; $j < count($dataarr); $j++) { echo "<td>".$dataArr[$j]."
</td>
"; } echo "
</tr>
"; } $all = mysql_fetch_all($res); echo "
<table class='data_table'>
"; for($i = 0; $i < count($all); $i++) { create_table($all[$i]); } echo "</table>";
?> 
```

但是这个脚本无法为我提供解决方案。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:21:57.180

```
 1.Correct your function mysql_fetch_all($res). There is no query
           inside the function. 

 2\. Deprecated: mysql_escape_string(): This
           function is deprecated; use mysql_real_escape_string()

 3\. Correct: <select name source> to: <select name="source"> and <select name location on> to <select name="location"> and <input name=look type=submit value=submit> to <input name="look" type="submit" value="submit"> and delete t" from choose form AND <form name="choose" method="post"  action="search.php"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:31:06.943

首先，你不应该使用函数，看[这里](http://php.net/manual/en/function.mysql-connect.php)`mysql_*`的大红框。考虑改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

其次，您似乎遗漏了一些内容`=`，例如`method="post"`您可能想要检查您实际上是否正确接收了您的 POST 值`var_dump($_POST)`

第三，排除未提交的值，您可以基于这些构造查询字符串。就像是：

```
$qry = "SELECT * FROM data WHERE ";
if($_POST['location']) {
   $qry .= 'LIKE "%'. mysql_real_escape_string($_POST['location']) .'%"';
}
// etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:38:27.983

```
$qry = "SELECT * FROM data WHERE location LIKE '%" . mysql_escape_string($_POST['location']) . "%' And proffession LIKE '%" . mysql_escape_string($_POST['proffession']) . "%' And source LIKE '%" . mysql_escape_string($_POST['source']) . "%'"; 
```

# objective-c - 如何将整数拆分为分量数字

> ID：15728816
> 
> 赞同：0
> 
> 时间：2013-03-31T11:17:25.917
> 
> 标签：objective-c, split, integer

我需要知道如何以正确的顺序将整数拆分为数字，例如 1234 显示为 1 2 3 4。我希望它拆分整数并将数字显示为单词，所以 1234 = 1 2 3 4 = 一二三四。这就是我到目前为止所得到的。它拆分一个整数并将数字显示为单词，但它们的顺序相反。对不起，如果它有点乱。另外我才刚刚开始学习目标 c，所以我还不知道数组和所有这些东西。

```
 int number, right_digit, counter;

    counter = 1;

    NSLog(@"Enter your number");

    while (counter != 0) {
    scanf("%i", &number);

    do {

  right_digit = number % 10;
  number /= 10;

    if (right_digit == 1)
        NSLog(@"one");

    else if (right_digit == 2)
        NSLog(@"two");

    else if (right_digit == 3)
        NSLog(@"three");

    else if (right_digit == 4)
        NSLog(@"four");

    else if (right_digit == 5)
        NSLog(@"five");

    else if (right_digit == 6)
        NSLog(@"six");

    else if (right_digit == 7)
        NSLog(@"seven");

    else if (right_digit == 8)
        NSLog(@"eight");

    else if (right_digit == 9)
        NSLog(@"nine");

    else if (right_digit == 0)
        NSLog(@"zero"); 

    }
    while (number != 0);

    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T11:23:08.383

```
NSInteger num=1234;
NSInteger temp=num;

NSMutableArray *digits=[NSMutableArray new];
while(temp >0){
    NSInteger digit=temp%10; //4
    temp/=10;//123
    digits[digits.count]=@(digit);
}

for(NSNumber *d in [digits reverseObjectEnumerator]){
    switch([d integerValue]){
         case 0: NSLog(@"Zero"); break;
         case 1: NSLog(@"One"); break;
         case 2: NSLog(@"Two"); break;
         case 3: NSLog(@"Three"); break;
         case 4: NSLog(@"Four"); break;
         case 5: NSLog(@"Five"); break;
         case 6: NSLog(@"Six"); break;
         case 7: NSLog(@"Seven"); break;
         case 8: NSLog(@"Eight"); break;
         case 9: NSLog(@"Nine"); break;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T11:19:48.763

你这样做基本上是正确的，除了你应该在浏览原始号码时存储单词（或数字），然后在打印它们时“向后播放”。完成此操作的最简单方法是使用`NSMutableArray`: 在查看号码时向其中添加单词，然后以相反的顺序迭代数组以进行打印。

一个注意事项是关于您对`switch`: 的使用，如果您在所有情况下都执行相同的操作，并且只有您的数据不同，您应该使用数组或字典进行查找，如下所示：

```
NSString *digitWords[] = {@"zero", @"one", @"two", @"three", ...}; 
```

有了这个数组，你可以调用

```
NSLog("%@", digitWords[digit]); 
```

并摆脱`switch`声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T13:58:07.220

刚刚将 Anoop Vaidya 的答案修改为准确的答案

```
NSInteger num=1234567890;
NSInteger temp=num;

NSMutableArray *digits=[NSMutableArray new];
while(temp >0){
    NSInteger digit=temp%10; //4
    temp/=10;//123
    [digits addObject:[NSString stringWithFormat:@"%d",digit]];

}

NSMutableArray *show = [NSMutableArray new];

for(NSNumber *d in [digits reverseObjectEnumerator]){
    switch([d integerValue]){
        case 0:[show addObject:@"Zero"];    break;
        case 1:[show addObject:@"One"];     break;
        case 2:[show addObject:@"Two"];     break;
        case 3:[show addObject:@"Three"];   break;
        case 4:[show addObject:@"Four"];    break;
        case 5:[show addObject:@"Five"];    break;
        case 6:[show addObject:@"Six"];     break;
        case 7:[show addObject:@"Seven"];   break;
        case 8:[show addObject:@"Eight"];   break;
        case 9:[show addObject:@"Nine"];    break;
    }
}
NSLog(@"%d=%@",num,[show componentsJoinedByString:@", "]); 
```

# .net - .net mvc 多对多 发布什么

> ID：15728819
> 
> 赞同：0
> 
> 时间：2013-03-31T11:17:45.637
> 
> 标签：.net, entity-framework, many-to-many

我正在尝试实现多对多的上下文。产品可以由不同的材料制成，并且这些材料的价格不同：

这是product.cs：

```
namespace test.Models
{
    using System.ComponentModel;
    using System.ComponentModel.DataAnnotations;
    using System.Web.Mvc;
    using System;
    using System.Collections.Generic;
    public partial class Product
    {
        public Product()
        {
            this.ProductMaterials = new HashSet<ProductMaterial>();
        }
        public int Id { get; set; }
        [DisplayName("Product name"),
          Required(ErrorMessage = "Product Name is required"),
          StringLength(100)]
        public string Name { get; set; }
        [Required]
        public virtual ICollection<ProductMaterial> ProductMaterials { get; set; }
    }
} 
```

这是 ProductMaterials.cs：

```
namespace test.Models
{
    using System;
    using System.Collections.Generic;

    public partial class ProductMaterial
    {
        public int Id { get; set; }
        public int ProductId { get; set; }
        public int MaterialId { get; set; }
        public string PriceOffset { get; set; }

        public virtual Material Material { get; set; }
        public virtual Product Product { get; set; }
    }
} 
```

和 Material.cs：

```
namespace test.Models
{
    using System.ComponentModel;
    using System.ComponentModel.DataAnnotations;
    using System.Web.Mvc;
    using System;
    using System.Collections.Generic;

    public partial class Material
    {
        public Material()
        {
            this.ProductMaterials = new HashSet<ProductMaterial>();
        }

        public int Id { get; set; }
        [Required,DisplayName("Material"),
          StringLength(100)]
        public string Mat { get; set; }
        [DefaultValue(0), Required]
        public decimal PriceOffset { get; set; }

        public virtual ICollection<ProductMaterial> ProductMaterials { get; set; }
    }
} 
```

现在尝试在上下文中添加正确的信息，以便可以从表单创建对象，并尝试使其尽可能简单，以便通过小步骤来理解这一点。

testContext.cs 具有以下内容：

使用 System.Data.Entity；

```
namespace test.Models
{
    public class testContext : DbContext
    {
System.Data.Entity.DropCreateDatabaseIfModelChanges<test.Models.testContext>());
        public testContext() : base("name=testContext")
        {
        }
        public DbSet<Product> Products { get; set; }
        public DbSet<Manufacturer> Manufacturers { get; set; }
        public DbSet<ProductMaterial> ProductMaterials { get; set; }
        public DbSet<Material> Materials { get; set; }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
        modelBuilder.Entity<Product>()
            .HasMany(c => c.ProductMaterials);
        }    
    }
} 
```

这是我发布的额外数据：

```
<input type="text" value="1" name="ProductId">
<input type="text" value="1" name="MaterialId">
<input type="text" value="0" name="PriceOffset"> 
```

当我在控制器中设置断点时，我看到使用 0 个 ProductMaterials 对象创建了一个 Product 对象。

不确定这是否是正确的方法，我在下载的示例代码中看到更新会复杂得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:57:29.600

放弃如何创建添加了材料的新产品。让它适用于编辑产品。

在 global.asax.cs 中添加了一条路由：

```
 routes.MapRoute(
        "Materials For Product", // Route name
        "Materials/{action}/{ProductId}/{MaterialId}", // URL with parameters
        new { controller = "ProductMaterial", action = "Index",
              ProductId = UrlParameter.Optional,
              MaterialId = UrlParameter.Optional
        } // Parameter defaults
    ); 
```

更改了索引，在 ProductMaterialController.cs 中创建和删除

```
public ViewResult Index(int ProductId)
{
    var productmaterialss = db.ProductMaterials.Include(p => p.Material).Include(p => p.Product).Where(
        p => p.ProductId == ProductId);
    Product pr = db.Products.Find(ProductId);
    ViewData["ProductId"] = ProductId;
    ViewData["ProductName"] = pr.Name;
    return View(productcolors.ToList());
}
public ActionResult Create(int ProductId)
{
    Product p = db.Products.Where(i => i.Id == ProductId).Single();
    ViewBag.MaterialId = new SelectList(db.Materials, "Id", "Mat");
    ViewData["ProductName"] = p.Name;
    ViewData["ProductId"] = p.Id;
    return View();
}
[HttpPost]
public ActionResult Create(ProductMaterial productmaterial)
{
    if (ModelState.IsValid)
    {
        db.ProductMaterials.Add(productmaterial);
        db.SaveChanges();
        return RedirectToAction("Index/"+productmaterial.ProductId);
    }
    Product p = db.Products.Where(i => i.Id == productmaterial.ProductId).Single();
    ViewBag.MaterialId = new SelectList(db.Materials, "Id", "Mat");
    ViewData["ProductName"] = p.Name;
    ViewData["ProductId"] = p.Id;
    return View();
}
[HttpPost, ActionName("Delete")]
public ActionResult DeleteConfirmed(int id)
{
    ProductMaterial productmaterial = db.ProductMaterials.Find(id);
    int ProductId = productcolor.ProductId;
    db.ProductMaterials.Remove(productmaterial);
    db.SaveChanges();
    return RedirectToAction("Index/"+ProductId);
} 
```

更改了 Product 的编辑视图以使用 ProductMaterial 视图打开模型对话框，并将所有 ProductMaterial 视图（仅索引和删除，因为其他未使用）更改为不包括模板和显示产品名称。

向 Product 添加了脚本以打开所有链接和表单上的 Modal 和附加的事件侦听器，以 ajax 提交所需的信息并使用响应重置模态对话框的 innerHTML。

# linq - 从实体框架查询中获取所有包含？

> ID：15728821
> 
> 赞同：1
> 
> 时间：2013-03-31T11:17:52.580
> 
> 标签：linq, entity-framework, include, group-by

我有以下实体模型：员工有公司，公司有员工。

使用**Include**语句时，如下所示：

```
var query = context.Employees.Include(e => e.Company);
query.Dump(); 
```

从数据库中正确检索所有相关数据。（在 Company 表上使用 LEFT OUTER JOIN）

问题是当我使用 System.Linq.Dynamic 中的 GroupBy() 按 Company.Name 分组时，由于**Include**丢失，Employees 缺少 Company 数据。例子：

```
var groupByQuery = query.GroupBy("new (Company.Name as CompanyName)", "it");
groupByQuery.Dump(); 
```

有没有一种方法可以轻松地将“查询”上应用的包含检索为字符串集合，以便我可以将它们包含在动态 GroupBy 中，如下所示：

```
var groupByQuery2 = query.GroupBy("new (Company, Company.Name as CompanyName)", "it");
groupByQuery2.Dump(); 
```

我考虑过使用 ToString() 功能来获取 SQL 命令，如下所示：

```
string sql = query.ToString(); 
```

然后使用 RegEx 提取所有 LEFT OUTER JOINS，但可能有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:45:49.313

如果您首先创建查询 - 我总是选择保存包含（如果您正在进行复合查询/过滤，则添加到其中）。

例如，而不是只返回“查询”返回`new QueryContext {Query = query, Includes = ...}`

我希望看到一个更优雅的解决方案——但我认为这是你最好的选择。

否则，您会看到表达式树、访问者和所有这些好东西。
SQL 解析也不是那么直接——因为查询并不总是那么简单（通常是事物的组合等）。

例如，查询对象中有一个“跨度”（如果您稍微遍历一下），它似乎持有“包含”，但它没有多大帮助。

# ios - UIView 中的圆角：CALayer 还是背景图像？

> ID：15728825
> 
> 赞同：3
> 
> 时间：2013-03-31T11:18:12.653
> 
> 标签：ios, uiview, calayer

我需要在 tableView 中制作一个带有像这样（）这样的圆角的 UIView，![圆角视图](https://i.stack.imgur.com/2OiNZ.png)其中包含非常多的项目。因此，我的问题是 CALayer 是否对平滑滚动有不良影响，对于这种情况可能更好地用于背景图像？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:48:07.650

CALayer 很好。但是，透明度对性能不利。

# python - python用漂亮的汤解析

> ID：15728826
> 
> 赞同：0
> 
> 时间：2013-03-31T11:18:21.493
> 
> 标签：python, html, parsing, beautifulsoup

我有一个关于使用 BeautifulSoup 解析 HTML 的问题。我要解析的网站是这个：[http ://www.auc.nl/news-events/events-and-lectures/events-and-lectures.html?page=1&pageSize=40](http://www.auc.nl/news-events/events-and-lectures/events-and-lectures.html?page=1&pageSize=40)

起初，我需要编写一个函数来提供所有 h3-tags 和所有 p-tags。我这样做如下：

```
 from bs4 import BeautifulSoup
    import urllib2
    website=urllib2.urlopen("http://www.auc.nl/news-events/events-and-lectures/events-and-lectures.html","r")

    def parseUsingSoup2(content):
        list1=soup.findAll('h3')
        list2=soup.findAll('p')
        return list1+list2        

    parseUsingSoup2(website) 
```

问题的下一部分要求包含 4 个元组的事件列表（尽管网站上只有一个事件）：时间段、标题、类型和描述。

我真的不知道如何开始。我的第一次尝试是这样的：

```
 def GeneratingListofEvents(content):
        event={}
        list=['time', 'title', 'feature', 'description']
        for item in list: 
```

但是，我不知道这是否朝着正确的方向发展，并且我没有设法从 HTML 文档中检索时间，而无需手动输入。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:40:34.120

注意您需要的所有信息在`<div class="agendaright">`

```
from bs4 import BeautifulSoup
import urllib2
html = urllib2.urlopen("http://www.auc.nl/news-events/events-and-lectures/events-and-lectures.html","r")
soup = BeautifulSoup(html)

all = soup.find('div',class_="agendaright")
time = all.find('span',class_="event-time").text
# u'18:00 - 20:00'
title = all.h3.text
# u'Images Without Borders Violence, Visuality, and Landscape in Postwar Ambon, Indonesia'
feature = all.find('span',class_="feature").text
# u' | Lecture'
description = all.find('p',class_="event-description").text
# u'This lecture explores the thematization of the visual and expansion of\nits terrain exemplified by the gigantic hijacked billboards with Jesus\nfaces and the painted murals with Christian themes which arose during\nthe ...'

l = [time,title,feature,description] 
```

# eclipse - 将光标从块或矩形更改为线？

> ID：15728829
> 
> 赞同：47
> 
> 时间：2013-03-31T11:19:14.117
> 
> 标签：eclipse, text-editor

我的光标是一个闪烁的黑色矩形。我不知道它是怎么变成这样的。我想把它变回一条闪烁的垂直线。

图片 -

![在此处输入图像描述](https://i.stack.imgur.com/880ld.jpg)

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-31T11:22:48.307

您处于替换模式。按`Insert`键盘上的键切换回插入模式。许多处理文本的应用程序都有这个共同点。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-10-15T22:58:48.613

如果您碰巧在 linux (ubuntu) 上使用 mac 键盘，`Insert`实际上是`fn` **+** `return`。您还可以单击数字键盘的零在光标类型之间切换。

我花了一段时间才弄清楚。:-P

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-26T18:02:41.923

请同时按 fn +ins 键

# android - 在 Android 的另一个类中获取背景资源

> ID：15728831
> 
> 赞同：2
> 
> 时间：2013-03-31T11:19:19.067
> 
> 标签：android, android-resources, ontouchlistener

我在 Android 应用程序中有很多 Button，我希望创建一个单独的类来处理 Touch 事件。

所以我创建了以下类：

```
public class OnTouchButtonEffects implements OnTouchListener{

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN)                        
            v.setBackgroundResource(R.drawable.buttonbluepress);
        else if(event.getAction() == MotionEvent.ACTION_UP)
            v.setBackgroundResource(R.drawable.buttonblue);
    }
} 
```

现在我想要如果`view v`有`event ACTION_DOWN`那么我得到后台资源并将“press”附加到它，然后将其设置为后台资源，如果它`event ACTION_UP`得到后台资源并从资源名称中删除“press”并将其设置为新的后台资源.

我尝试使用`getResources()`但无法弄清楚究竟是如何完成的。

所以问题是我如何获取后台资源的名称，并从其名称中追加/删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:09:18.123

该类`Resources`有这个方法：

```
public int getIdentifier (String name, String defType, String defPackage) 
```

看看[http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

因此，您可以通过名称获取资源的 id。获得 id 后，您可以设置背景。

如果您想从 id 中了解资源名称，请使用：

```
getResources().getResourceEntryName(int resid); 
```

或者

```
getResources().getResourceName(int resid); 
```

您应该能够结合这两种方法来实现您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:45:08.407

我不相信您可以按照您要求的方式使用资源地址（即 R.id.nameOfResourse）。

我看到了您要完成的工作，并且有一种更简单的方法可以使用自定义按钮：

StateListDrawable [http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/buttonbluepress" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/buttonblue" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/buttonblue" /> <!-- hovered -->
    <item android:drawable="@drawable/buttonblue" /> <!-- default -->
</selector> 
```

# php - 带有时间戳的mysql日志表 - 需要读回时间戳

> ID：15728832
> 
> 赞同：0
> 
> 时间：2013-03-31T11:19:19.430
> 
> 标签：php, mysql, logging, timestamp

我有一个记录用户活动的日志表，并有一个使用以下内容创建的时间戳

```
function user_log($user_name, $log_data){
 $ipaddress = $_SERVER["REMOTE_ADDR"];
mysql_query("INSERT INTO `logs` (user_id, time_stamp, activity, ip) VALUES ('$user_name', now(), '$log_data', '$ipaddress')"); 
```

}

如您所见，我已经使用了该`now()`功能。
但是我的问题是我希望能够删除早于 28 天（2419200 秒）的日志。

为此，我尝试了以下...

```
$past_date = mktime()-2419200;
mysql_query("DELETE * FROM logs WHERE time_stamp<'$past_date'"); 
```

但是它不起作用，我怀疑我缺少的格式有所不同。

提前致谢，

凸轮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:23:27.417

```
$mysql_date = date("Y-m-d", strtotime($past_date)) 
```

像这样的东西你必须使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:26:12.433

尝试这个...

```
DELETE * FROM logs WHERE time_stamp <= NOW() - INTERVAL 28 DAY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:21:13.073

MySQL 使用的日期格式是

```
yyyy-MM-dd 
```

例子

```
2013-03-31 
```

尝试

```
DELETE * FROM logs WHERE time_stamp < curdate() - 28 day 
```

# arrays - 声明多数组

> ID：15728833
> 
> 赞同：1
> 
> 时间：2013-03-31T11:19:20.430
> 
> 标签：arrays, syntax, vb6, declaration

很抱歉这个菜鸟问题，但目前如果我需要多数组（数组数组），我将其声明为变体：

```
Dim ma() As Variant
ReDim ma(1 To 3)
ma(1) = Array(1, 2, 3) 
```

除了它有效之外，我想知道是否有替代声明。例如，下一个不起作用：

```
Dim mm() As Integer()
Dim mm()() As Integer 
```

**PS**感谢大家的回复。但我感觉我的问题并不清楚。这与多维数组无关，也与数组的大小无关。这是关于**Type**的。是的，多数组（Array of Arrays）有很多例子，但它们都使用`Variant`. 也许（不是）这是创建多阵列的唯一方法？这就是我需要知道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:48:42.303

您可以为 3-D 数组指定如下：

```
Dim ma(1 To 3, 1 To 2, 0 To 5) as Integer
Dim mb(0 To 2, 0 To 2, 0 To 2) as Integer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:34:36.473

是的，您需要使用变体，至少对于“外部数组”。使用“数组的数组”的好处当然是你可以有参差不齐的数组（子数组可以有不同的 LBound/UBound 值，而不是所有的相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:27:18.653

我认为您必须声明数组的大小，因为内存中的分配..当您将其声明为 Variant 时，编译器在运行时知道类型和大小，因此它不会给您任何错误..但是当您声明它是某种类型..你需要声明大小..看看我在第一条评论中给你的链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T13:02:46.823

我在这里找到了一个很好的例子：http: [//windowssecrets.com/forums/showthread.php/79979-Array-of-Arrays-(VB6)](http://windowssecrets.com/forums/showthread.php/79979-Array-of-Arrays-(VB6))

```
Dim ArrayArray() As Variant
ReDim ArrayArray(1)

Dim StringArray() As String
Dim DateArray() As Date

ReDim StringArray(2, 3)
ReDim DateArray(4, 5)

ArrayArray(0) = StringArray
ArrayArray(1) = DateArray 
```

这是一个教程：http: [//visualbasic.freetutes.com/learn-vb6/arrays-of-arrays.html](http://visualbasic.freetutes.com/learn-vb6/arrays-of-arrays.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:20:05.300

当你用空（）声明它时，你可以稍后用你想要的任何尺寸重新调整它

创建以下项目，运行它，单击 2 个命令按钮，然后查看显示的数据

```
'1 form with
'    2 command buttons : name=Command1, name=Command2
'    1 label : name=Label1
Option Explicit

Private mintVal() As Integer

Private Sub Command1_Click()
  Dim intIndex1 As Integer, intIndex2 As Integer, intIndex3 As Integer
  ReDim mintVal(5, 3, 4) As Integer
  For intIndex1 = 0 To UBound(mintVal, 1)
    For intIndex2 = 0 To UBound(mintVal, 2)
      For intIndex3 = 0 To UBound(mintVal, 3)
        mintVal(intIndex1, intIndex2, intIndex3) = intIndex1 + intIndex2 + intIndex3
      Next intIndex3
    Next intIndex2
  Next intIndex1
  ShowVals3
End Sub

Private Sub Command2_Click()
  Dim intIndex1 As Integer, intIndex2 As Integer
  ReDim mintVal(3, 7) As Integer
  For intIndex1 = 0 To UBound(mintVal, 1)
    For intIndex2 = 0 To UBound(mintVal, 2)
      mintVal(intIndex1, intIndex2) = intIndex1 * intIndex2
    Next intIndex2
  Next intIndex1
  ShowVals2
End Sub

Private Sub Form_Resize()
  Dim sngWidth As Integer, sngHeight As Single
  Dim sngCmdWidth As Single, sngCmdHeight As Single
  sngWidth = ScaleWidth
  sngCmdHeight = 495
  sngCmdWidth = sngWidth / 2
  sngHeight = ScaleHeight - 495
  Label1.Move 0, 0, sngWidth, sngHeight
  Command1.Move 0, sngHeight, sngCmdWidth, sngCmdHeight
  Command2.Move sngCmdWidth, sngHeight, sngCmdWidth, sngCmdHeight
End Sub

Private Sub ShowVals2()
  Dim intIndex1 As Integer, intIndex2 As Integer
  Dim strShow As String
  strShow = ""
  For intIndex1 = 0 To UBound(mintVal, 1)
    strShow = strShow & CStr(mintVal(intIndex1, 0))
    For intIndex2 = 1 To UBound(mintVal, 2)
      strShow = strShow & "," & CStr(mintVal(intIndex1, intIndex2))
    Next intIndex2
    strShow = strShow & vbCrLf
  Next intIndex1
  Label1.Caption = strShow
End Sub

Private Sub ShowVals3()
  Dim intIndex1 As Integer, intIndex2 As Integer, intIndex3 As Integer
  Dim strShow As String
  strShow = ""
  For intIndex1 = 0 To UBound(mintVal, 1)
    For intIndex2 = 0 To UBound(mintVal, 2)
      strShow = strShow & CStr(mintVal(intIndex1, intIndex2, 0))
      For intIndex3 = 1 To UBound(mintVal, 3)
        strShow = strShow & "," & CStr(mintVal(intIndex1, intIndex2, intIndex3))
      Next intIndex3
      strShow = strShow & vbCrLf
    Next intIndex2
    strShow = strShow & vbCrLf
  Next intIndex1
  Label1.Caption = strShow
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T06:08:16.597

另一个使用 udt 的答案，其中包含可以重新调整的数组

```
Option Explicit

Private Type MyUdt
  strOne() As String
  strTwo() As String
End Type

Private mudtGlobal As MyUdt

Private Sub Form_Click()
  Dim intIndex1 As Integer
  With mudtGlobal
    For intIndex1 = 0 To UBound(.strOne)
      .strOne(intIndex1) = CStr(intIndex1)
    Next intIndex1
  End With 'mudtGlobal
  PrintVals mudtGlobal
End Sub

Private Sub Form_DblClick()
  Dim udtLocal As MyUdt
  'using local udt which is filled with the return value of the function
  udtLocal = FacVals(udtLocal)
  'passing the local udt as an argument
  PrintVals udtLocal
  'passing the global udt as an argument to show the different values
  PrintVals mudtGlobal
End Sub

Private Sub Form_Load()
  With mudtGlobal
    ReDim .strOne(3) As String
    ReDim .strTwo(2, 5) As String
  End With 'mudtGlobal
End Sub

Private Sub PrintVals(udt2Print As MyUdt)
  Dim intIndex1 As Integer, intIndex2 As Integer
  Dim strPrint As String
  strPrint = ""
  With udt2Print
    strPrint = .strOne(0)
    For intIndex1 = 1 To UBound(.strOne)
      strPrint = strPrint & "," & .strOne(intIndex1)
    Next intIndex1
    strPrint = strPrint & vbCrLf & vbCrLf
    For intIndex1 = 0 To UBound(.strTwo, 1)
      strPrint = strPrint & .strTwo(intIndex1, 0)
      For intIndex2 = 1 To UBound(.strTwo, 2)
        strPrint = strPrint & "," & .strTwo(intIndex1, intIndex2)
      Next intIndex2
      strPrint = strPrint & vbCrLf
    Next intIndex1
  End With 'udt2Print
  Print strPrint
End Sub

Private Function FacVals(udtArg As MyUdt) As MyUdt
  Dim intIndex1 As Integer, intIndex2 As Integer
  'copying values
  udtArg = mudtGlobal
  'redimming the local udt
  With udtArg
    ReDim Preserve .strOne(7)
    ReDim Preserve .strTwo(2, 9)
  End With 'udtArg
  With udtArg
    For intIndex1 = 0 To UBound(.strTwo, 1)
      For intIndex2 = 0 To UBound(.strTwo, 2)
        .strTwo(intIndex1, intIndex2) = CStr(intIndex1 * intIndex2)
      Next intIndex2
    Next intIndex1
  End With 'udtarg
  FacVals = udtArg
End Function 
```

双击表格查看结果值

# php - 在html中为每个操作打开一个单独的页面

> ID：15728839
> 
> 赞同：-2
> 
> 时间：2013-03-31T11:20:20.237
> 
> 标签：php, html, web

我创建了下表：

```
<table>
    <tr>
        <td>operationno</td>
        <td>type</td>
        <td>status</td>
        <td></td>
    </tr>
    <tr>
        <td>1001</td>
        <td></td>
        <td></td>
        <td>open</td>
    </tr>
    <tr>
        <td>1002</td>
        <td></td>
        <td></td>
        <td>open</td>
    </tr>
</table> 
```

我想做的是让用户按下每个操作旁边的打开链接，然后打开另一个页面来完成操作。该页面将是：

```
<form>
Operation No: <input type="text" name="opno"><br>
Description: <input type="text" name="desc">
</form> 
```

我知道但我不知道如何实现的一个想法是让打开的链接包含链接，并在它的末尾有操作号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:23:55.503

你会做这样的事情：

```
<td><a href="page.php?operation_number=1002" target="_blank">open</a></td> 
```

然后`page.php`使用`$_GET['operation_number']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:25:59.943

由于您使用的是 PHP，您可以使用 GET 参数打开新链接，例如

Javascript------

```
var el = document.getElementById("elToClick");
el.addEventListener("click",function () {
    window.open("http://yoursite.com/script.php?operation=1001","_blank");
}) 
```

或者你可以用简单的方法做到这一点

```
<a href="http://yoursite.com/script.php?operation=1001" target="_blank"></a> 
```

然后在PHP中你可以访问它

```
$value = $_GET['operation']; 
```

# angularjs - 在 ngtemplate 中给模型起别名

> ID：15728842
> 
> 赞同：5
> 
> 时间：2013-03-31T11:20:40.293
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我希望为模板中使用的模型起别名，以便可以为不同的模型重用相同的模板。例如在以下模型中：

```
member = {

    name: "Member1",
    children:[
    {
        name:"Child1"
    },
    {
        name:"Child2"
    }
    ]
} 
```

“member”和“children”都具有“name”属性。所以我希望创建一个操纵这个“名称”属性的模板。在这个问题的帮助下，我能够做到这一点：

[将 ngInclude 绑定到不同的模型](https://stackoverflow.com/questions/15702411/bind-nginclude-to-different-models)

按照建议，我创建了一个指令，例如：

```
app.directive('member', function(){
return {
    restrict: 'A',
    template: "{{prefix}}<input type='text' ng-model='member.name'>",
    scope: {
        member: "="
    }
};
}); 
```

以下是该指令的用法：

```
<div ng-controller="MemberCtrl">
    {{member | json}}
    <div member="member"></div>
    <div member="member.children[0]"></div>
</div> 
```

我能够实现模板重用，但是由于我在指令中使用“范围”，这创建了一个无法访问控制器范围的任何属性的隔离范围。所以对于控制器：

```
app.controller('MemberCtrl', function($scope){
$scope.member = {

    name: "Member1",
    children:[
    {
        name:"Child1"
    },
    {
        name:"Child2"
    }
    ]
};

    $scope.prefix = "Mr.";
}); 
```

指令内的模板无法访问“前缀”属性。以下是jsfiddle：

[http://jsfiddle.net/vaibhavgupta007/mVBaC/1/](http://jsfiddle.net/vaibhavgupta007/mVBaC/1/)

这可能是什么问题？

**编辑**

我也可以使用 $parent 来访问前缀。但这是干净的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:34:06.523

只需在指令定义对象中将“前缀”定义为独立的范围变量，并在元素属性中引用它。

```
app.directive('member', function(){
return {
    restrict: 'A',
    template: "{{prefix}}<input type='text' ng-model='member.name'>",
    scope: {
        member: "=",
        prefix: "="
    }
};
}); 
```

```
<div ng-controller="MemberCtrl">
    {{member | json}}
    <div member="member" prefix="prefix"></div>
    <div member="member.children[0]" prefix="prefix"></div>
</div> 
```

[小提琴](http://jsfiddle.net/GhSYW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:44:33.057

为了能够将指令范围属性绑定到各种控制器属性（例如，`member`和`member.children[0]`）以在通用模板中使用，我相信您将需要使用隔离范围语法（正如您已经发现的那样）。

一旦你走上了“隔离范围之路”，你就必须指定你的指令需要访问的所有控制器属性和函数作为附加属性：

```
<div member="member" prefix="{{prefix}}" join-fn="joinNameWithPrefix(someName)"></div> 
```

然后在你的指令中：

```
template: "{{prefix}}<input type='text' ng-model='member.name'>"
   + "<br>fn result={{ joinFn( {someName: member.name} ) }}",
scope: {
  member: "=",
  prefix: '@',
  joinFn: '&'
}, 
```

[小提琴](http://jsfiddle.net/mrajcok/Fvwcp/)

用于`=`双向数据绑定、`@`单向字符串和`&`单向表达式。

# blackberry - 持久存储 - 保存、读取和覆盖数据

> ID：15728843
> 
> 赞同：1
> 
> 时间：2013-03-31T11:20:45.013
> 
> 标签：blackberry, persistent, overwrite, persistent-storage

我正在尝试`PersistentStore`在我的 BlackBerry 应用程序中保存 10 个字符串值。这个想法是在任何给定时间保存最新的 10 个项目（字符串值）。保存前 10 个值并键入第 11 个值时，它应该：

*   删除第一个条目
*   将剩余的 9 个条目移到订单上方
*   将第 11 个条目保存为第 10 个值

这是我要遵循的逻辑。随着条目的不断增加，我将存储最多 10 个条目，这将是最新的 10 个值。我尝试通过以下方法保存`String`值：`saveChatMsg()`

```
 public void saveChatMsg()
 {
     if(xx<10)
     {
         PersistentStoreHelper.persistentHashtable.put("chatMsg"+xx,chatToSave);
         xx=xx+1;
         if(xx==10)
         {
             PersistentStoreHelper.persistentHashtable.put("xxValue",Integer.toString(0));
         }
         else
         {
             PersistentStoreHelper.persistentHashtable.put("xxValue",Integer.toString(xx));
         }

     }
 } 
```

其中 xx 是一个从 0 到 9 的整数。**但是，虽然这是保存消息，但当我检索消息时，它不会按时间顺序显示。**此方法在 4 个不同的地方调用，因此保存的 10 条消息的顺序不正确；最新消息可能会显示为第 6 个值而不是 10 等。请评论并建议如何实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:37:06.597

如果你想要一个包含 10 条消息的列表，我会使用 a `Vector`。向量对它们有**顺序**，[它们是可持久的 (*)](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/PersistentStore.html)。您可以从 Vector 中删除第一个（最旧的）元素，并在末尾添加一个新元素。

看起来您的持久存储保留了一个主存储`Hashtable`（这很好）。将您的持久模型更改为如下所示：

```
- Hashtable
    - Vector (key = "chatMsgs")
        - String
        - String
        - String
        - String
        - String
        - String
        - String
        - String
        - String
        - String 
```

所以，也许是这样的：

```
public void saveChatMsg(String newMsg) {
    Vector msgs = PersistentStoreHelper.persistentHashtable.get("chatMsgs");
    // add the new msg (to the end of the vector)
    msgs.addElement(newMsg);
    // delete old messages, if the vector is full
    while (msgs.size() > 10) {
        msgs.removeElementAt(0);
    }
    // store the modified vector back to the persistent store
    PersistentStoreHelper.persistentHashtable.put("chatMsgs", msgs);
    // I'm assuming your PersistentStoreHelper calls commit() somewhere in here
}

/** @param index - 0 is the oldest, 9 is the newest */
public String getChatMsg(int index) {
    Vector msgs = PersistentStoreHelper.persistentHashtable.get("chatMsgs");
    return (String)msgs.elementAt(index);
} 
```

* * *

**编辑：**

(*) 我链接到的 BlackBerry API 文档和 BlackBerry Java Storage APIs 文档都`java.util.Vector`作为一个`Persistable`类列出。 [这个答案/评论也是如此](https://stackoverflow.com/a/6139102/119114)。但是，实际的 API javadoc`Vector`并没有说它实现了`Persistable`. 我现在无法运行代码，但是如果 a `Vector`of`String`对象对您不起作用，您始终可以使用API 文档明确列出的 的子类`Vector`，例如[ContentProtectedVector](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/util/ContentProtectedVector.html)`Persistable`。如果您最终需要这样做，请发表评论，以使他人受益。

# r - 使用由更高级别函数创建的对象的函数

> ID：15728844
> 
> 赞同：1
> 
> 时间：2013-03-31T11:20:52.703
> 
> 标签：r, function, object

我有两个功能，一个在另一个里面

```
fun.a <- function (y,smth) { 
    z <- y*3
    sapply(smth,FUN = fun.b) 
}
fun.b <- function(x) {
    return(x+z)
} 
```

如果我运行：

```
fun.a(2, c(1, 2, 3)) 
```

我收到一条错误消息，因为`z`“较低级别”功能中不存在`fun.b`。`z`但是在使用`sapply`in时我无法传递值`fun.a`！

也许它存在一个允许在函数内部创建一个也存在于外部的对象的函数？如何解决这个问题呢？

**编辑：**我不想在`fun.b`里面复制粘贴`fun.a`，也不想`sapply`用`for-loop`. 在这种情况下，解决方案仍然存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:55:48.050

这有效，您使用`...`参数将任何附加值传递给`fun.b`：

```
fun.a <- function (y,smth) { 
    z <- y*3
    sapply(smth,FUN = fun.b, z = z) 
}
fun.b <- function(x, z) {
    return(x+z)
}
fun.a(2, c(1, 2, 3)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:09:02.333

如果您不允许修改`fun.b`，我从评论中收集到，那么，在 的正文中`fun.a`，创建一个副本`fun.b`并为其附加一个环境：

```
fun.a <- function (y,smth) { 
  e <- new.env()
  assign("z", y*3, envir = e)
  fun.b.copy <- fun.b
  environment(fun.b.copy) <- e
  sapply(smth,FUN = fun.b.copy)
} 
```

如果您可以修改函数获取输入的方式，我仍然更喜欢@Paul 的解决方案。他的回答是推荐的编程方式。

# codeigniter - 使用 strip_tags 和 allowable_tags 进行表单验证

> ID：15728846
> 
> 赞同：3
> 
> 时间：2013-03-31T11:21:04.483
> 
> 标签：codeigniter, validation, strip-tags

看来我可以在 Codeigniter 的表单验证中使用 PHP 的[strip_tags函数，如下所示：](http://php.net/manual/en/function.strip-tags.php)

```
$this->form_validation->set_rules('description', 'Description', 
                              'trim|xss_clean|strip_tags'); 
```

Strip_tags 支持一个 allowable_tags 参数来列出要从过滤中排除的标签，例如 keep`<h1>`等`<strong>`。

如何在表单验证语法中使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T16:06:04.707

```
$this->form_validation->set_rules('description', 'Description', 'callback_description_check');

public function direction_check($str)
{
    return strip_tags($text, '<p><a>'); 
} 
```

最好的方法是创建自己的回调函数，您可以根据需要进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:44:41.150

你可以打个电话

```
function callback_strip_tags_custom($text)
{
 return strip_tags($text, '<p><a>');

} 
```

# html - 尝试将星号添加到所需的输入字段

> ID：15728855
> 
> 赞同：5
> 
> 时间：2013-03-31T11:21:56.007
> 
> 标签：html, css

我不认为我很理解`:before`，`:after`因为我无法让这个工作。我只是想在表单中的必填字段后添加一个星号。

我的代码很简单：

```
<input id="name" type="text" required="required" autofocus="" placeholder="Name" autocomplete="off" value="" maxlength="40" class="required" name="name" />

/* Required field */
.required:after {
  content: '*';
  color: #EF5F5F;
} 
```

为什么这不起作用？
我的小提琴在这里：http: [//jsfiddle.net/3EFTN/](http://jsfiddle.net/3EFTN/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T11:35:36.510

生成的内容作为您要添加到的项目的子项添加。所以浏览器正在这样做（为简洁起见跳过了一些属性）：

```
<input class="required">
  <span class="after">*</span>
</input> 
```

这是无效的。

查看[规范](http://www.w3.org/TR/CSS21/generate.html#before-after-content)以更好地理解它（它有关于浏览器如何解释它的示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:27:58.363

`:after`和`:before`选择器不适合用于表单元素，例如`input`，因此使用 CSS 是不可能的。我建议为此使用 jQuery 或`<span>`在元素之后添加另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T11:33:42.897

您的 css 试图在`<input>`元素内添加 * ，这是不可能的，因为它不能包含任何其他元素。

让我们这样说：`:after`意味着您的内容将被插入**到**您的选择器的末尾，`:before`这意味着您的内容将被插入**到**您的元素的开头。

你可以在这里找到一个很好的解释：http: [//coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/](http://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/)

# java - 如何实现独写，非独读？

> ID：15728858
> 
> 赞同：5
> 
> 时间：2013-03-31T11:22:27.947
> 
> 标签：java, multithreading

如何实现独占写作，而非独占阅读？我可以`synchronize`访问一个设置器并创建一个变量`volatile`吗？这够了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T11:28:36.087

看Java5并发api：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)

这将满足您的要求，因为您可以允许多个线程读取而无需锁定并且仅在写入时锁定。

这里有一篇有趣的文章比较了这个 api 和传统的同步阅读：[ReentrantReadWriteLock vs synchronized](https://stackoverflow.com/questions/6637170/reentrantreadwritelock-vs-synchronized)

此外，正如@assylias 在评论中所说，您应该避免在没有必要时锁定。

实际上，`volatile`只有同时满足两个条件时，您才能信任关键字：

> 您只能在有限的一组情况下使用 volatile 变量而不是锁。volatile 变量必须满足以下两个条件才能提供所需的线程安全：
> 
> _ 写入变量不依赖于它的当前值。
> 
> _ 变量不参与其他变量的不变量。

# avro - Apache Avro 模式示例和文档

> ID：15728861
> 
> 赞同：3
> 
> 时间：2013-03-31T11:22:36.273
> 
> 标签：avro

我正在尝试定义一个不太简单的 Avro 架构，但收效甚微；当它不会抛出模式语法错误时，它不会产生我试图在模式中定义的所有类型。

是否有 avsc 定义的可能内容的完整规范？我一直在根据我对 Doc 规范的理解进行猜测，但显然这还不够。

最好的，

爱德华多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:35:50.653

我想我找到了...

根据[这个 ML 线程](http://apache-avro.679487.n3.nabble.com/Using-custom-defined-types-in-schemas-td2666914.html)协议​​可以定义多个交叉引用对象类型。记住这个提示，文档似乎确实说 avsc （模式）只能包含一个类型定义。

# android - 通知服务 - 在 onCreate() 之前对活动不可用的系统服务

> ID：15728862
> 
> 赞同：0
> 
> 时间：2013-03-31T11:22:36.820
> 
> 标签：android, service

我有一个活动和一个服务，我想从服务中调用一个位于活动中的方法。

方法 ( `deleteItem`) 使用通知服务取消一些通知，但正因为如此，我得到了错误：

`E/AndroidRuntime(13172): java.lang.IllegalStateException: System services not available to Activities before onCreate()`

**主要活动：**

```
public boolean deleteItem(SQLiteDatabase db, long id) {
    if(db.delete(DbHelper.TABLE_NAME, "`_id` = " + id, null) == 1) {
            Log.i(TAG, "Item #"+id + " was deleted successfully!");

            ((NotificationManager) getSystemService(NOTIFICATION_SERVICE)).cancel((int) id);

            return true;
        }
    return false;
} 
```

**服务：**

```
@Override
protected void onHandleIntent(Intent intent) {
    SQLiteDatabase db = dbHelper.getWritableDatabase();
    id = intent.getIntExtra("id", -1);
    MainActivity main = new MainActivity();
    main.deleteItem(db, id, false);

} 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:27:11.770

```
MainActivity main = new MainActivity(); 
```

实例化活动是 android 框架的工作。请不要这样做。

从服务本身调用该方法。为什么它甚至需要在活动中？

# python - 使用正则表达式匹配所有非 URL 向前看

> ID：15728863
> 
> 赞同：0
> 
> 时间：2013-03-31T11:22:37.663
> 
> 标签：python, regex, url, negative-lookahead

在 Python/django 中，我有一个字符串，我通过匹配 ':' 字符之前的字符来从中提取“标题”，例如：

```
some_string = "This is my Title: This is some text" 
```

所以我使用这段代码来提取标题：

```
result = regex.search('(.*):', some_string)
result.group(1)
>>> 'This is my Title' 
```

当用户在字符串中只输入一个 url 时会出现问题，例如：

```
some_string = 'http://vimeo.com/49742318'
result.group(1)
>>> 'http' 
```

我更喜欢只返回一个空字符串。我尝试使用负面的前瞻性元标记（？！）：

```
result = regex.search('(.*(?!http)):', some_string) 
```

但它仍然返回 'http' 而不是空字符串。应该如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:49:29.763

问题是，在您放置否定前瞻的地方，下一个字符也被限制为冒号：否定前瞻很容易成功，因为`h`下一个字符不是！

您可能*真正*想要的是在冒号之后放置负前瞻，以便下一个字符不是`/`：

```
(.*):(?!/) 
```

但是此时您不妨使用积极的前瞻并完全停止使用捕获组。您也不应该允许捕获冒号，否则 RE 的消耗量可能会超出您的预期：

```
result = regex.search('[^:]*(?=:[^/])', some_string)
result.group() 
```

# xslt - 如何获取所有同名元素的所有同名属性

> ID：15728868
> 
> 赞同：1
> 
> 时间：2013-03-31T11:23:01.270
> 
> 标签：xslt, xpath

我有一个像下面这样的 xml，我想知道如何在同一个节点下输出所有属性。

```
 <?xml version="1.0" encoding="utf-8"?>
   <Person ID="1234">
      <NAME>Louis  //</NAME>
      <SEX>M</SEX>
      <BIRT>
         <DATE>15 SEP 1980</DATE>
         <PLAC>UK</PLAC>
      </BIRT>
      <FAMS REF="F523"/>
      <FAMS REF="F524"/>
      <FAMC REF="F521"/>
   </INDI> 
```

我想输出如下FAMS和FAMC：FAMS：F523，F524 FAMC：F521

谢谢，劳伦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:05:07.620

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="FAMS[1]"/>
  <xsl:apply-templates select="FAMC[1]"/>
 </xsl:template>

 <xsl:template match="FAMS|FAMC">
  <xsl:value-of select="name()"/>: <xsl:text/>
  <xsl:apply-templates select="../*[name()=name(current())]/@REF"/>
  <xsl:text>&#xA;</xsl:text>
 </xsl:template>

 <xsl:template match="@REF">
  <xsl:if test="not(position() =1)">, </xsl:if>
  <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的（并更正为格式良好的）XML 文档时：**

```
<Person ID="1234">
    <NAME>Louis  //</NAME>
    <SEX>M</SEX>
    <BIRT>
        <DATE>15 SEP 1980</DATE>
        <PLAC>UK</PLAC>
    </BIRT>
    <FAMS REF="F523"/>
    <FAMS REF="F524"/>
    <FAMC REF="F521"/>
</Person> 
```

**产生想要的正确结果：**

```
FAMS: F523, F524
FAMC: F521 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:39:13.860

匹配元素所有属性的 XPath`x`是`x/@*`，或当前（上下文）节点的 XPath 是`@*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:42:07.847

路径是`FAMS/@REF`：

```
<xsl:template match="Person">
  <xsl:apply-templates select="FAMS/@REF"/>
</xsl:template>

<xsl:template match="FAMS/@REF">
  <xsl:if test="position() &gt; 1">, </xsl:if>
  <xsl:value-of select="concat('FAMS> ', .)"/>
</xsl:template> 
```

# java - 从 Android 应用程序将数据插入 MySQL 数据库。未反映在数据库中的更改

> ID：15728873
> 
> 赞同：2
> 
> 时间：2013-03-31T11:23:33.107
> 
> 标签：java, php, android, mysql, insert

我正在编写一个将数据插入 MySQL 数据库的应用程序。我用 PHP 编写了 sql 查询，当我在 android 应用程序中输入值时，我在 log cat 中没有看到任何错误，但是这些值没有存储在数据库中。

这是PHP代码：

```
<?php

$connect = mysqli_connect("localhost","root","","easyassigndroid");

if(mysqli_connect_errno($connect))
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
else
{
    echo "success";
}

$username = isset($_POST['sPhone']) ? $_POST['sPhone'] : '';
$password = isset($_POST['sPassword']) ? $_POST['sPassword'] : '';

$query = mysqli_query($connect, "insert into users (sphone, spassword) values ('$username' ,'$password') ");

mysqli_close($connect);
?> 
```

这是安卓部分：

```
protected void onCreate(Bundle savedInstanceState) {

    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.register_lecturer);

    phonenum = (EditText) findViewById(R.id.id_phone);
    password = (EditText) findViewById(R.id.id_password);

    sPhone = phonenum.toString();
    sPassword = password.toString();

    registerLecturer=(Button)findViewById(R.id.lecturerregister);
    registerLecturer.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://10.0.2.2/project/insert.php");

            try
            {
                nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("sphone", sPhone));
                nameValuePairs.add(new BasicNameValuePair("spassword", sPassword));

                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                response = httpclient.execute(httppost);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }
    });

} 
```

我是 Android 和 PHP 编码的初学者。谁能告诉我代码中的问题出在哪里？我的项目工作需要这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:14:31.490

只有一点：从我们使用的 Android EditText 中获取值

```
x.getText().toString(); 
```

其中 x 是一个 EditText 对象，对吗？希望它有帮助。

但是，由于这是在 onCreate() 中完成的——而不是在 onClick() 中——你应该改变：

```
nameValuePairs.add(new BasicNameValuePair("sphone", sPhone)); 
```

到

```
nameValuePairs.add(new BasicNameValuePair("sphone", phonenum.getText().toString())); 
```

另一个也是如此。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:41:10.787

如我所见，您使用“sPhone”和“sphone”作为键。我建议两者都使用相同的名称。

```
nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("sphone", sPhone));
nameValuePairs.add(new BasicNameValuePair("spassword", sPassword)); 
```

在 PHP 中

```
$_POST['sphone']
$_POST['spassword'] 
```

# android - 在 Android 中更改声音配置文件

> ID：15728876
> 
> 赞同：1
> 
> 时间：2013-03-31T11:24:31.030
> 
> 标签：android

我想在单击按钮时更改手机的**声音配置文件**有人知道我该怎么做吗？我已经搜索但无法找到问题的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:48:06.973

您可以使用`AudioManager` [setRingerMode](http://developer.android.com/reference/android/media/AudioManager.html#setRingerMode%28int%29)方法完成此操作。例如：

```
AudioManager audioManager = getSystemService(Context.AUDIO_SERVICE);
audioManager.setRingerMode(AudioManager.RINGER_MODE_VIBRATE); 
```

这可能需要`MODIFY_AUDIO_SETTINGS`许可。另请注意，其他应用程序可以覆盖您的设置。

# javascript - 断开d3折线图？

> ID：15728879
> 
> 赞同：0
> 
> 时间：2013-03-31T11:24:40.570
> 
> 标签：javascript, d3.js

我有这个 d3 折线图：

[http://jovansfreelance.com/bikestats/d3/tipsy.php](http://jovansfreelance.com/bikestats/d3/tipsy.php)

你可以在那里看到 JS 源代码，它位于[http://jovansfreelance.com/bikestats/d3/js/d3LineChart.js](http://jovansfreelance.com/bikestats/d3/js/d3LineChart.js)。

我在页面中添加了一个警报，因此它会在页面加载时提醒数据对象。如您所见，我每年都有多个值。这很好，图表看起来应该是这样，除了 2012 年的值不应连接回 2006 年的值。

基本上，我的问题是，如何在某些地方断开图表？每次 x 轴值为 2012 时，我都需要断开图表（不显示从 2012 年回到 2006 年的线）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:49:13.730

您需要更改数据的结构。如现在所写，该`generateData()`函数采用 20 个值并将它们推送到同一个数组中。这导致 data 变量是具有以下结构的对象数组：

```
data = [
  { value: "253.65", date: "2006"},
  { value: "269.67", date: 2007 },
...
]; 
```

这种数据结构导致 d3 从 2006 年到 2012 年绘制一条连接线，然后再次回到 2006 年两次。

要获得三个不同的行，您需要将数据分解，以便 d3 将每个系列识别为不同的对象。考虑把你的数据变成这样的结构：

```
data = [
{
    name: "series01",
    points: [ 
        { value: "253.65", date: "2006"},
        { value: "269.67", date: 2007 },
        ...
    ]
},
{
    name: "series02",
    points: [ 
        { value: "253.65", date: "2006"},
        { value: "269.67", date: 2007 },
        ...
    ]
},
{
    name: "series01",
    points: [ 
        { value: "253.65", date: "2006"},
        { value: "269.67", date: 2007 },
        ...
    ]
} 
```

];

当然，如果你这样做，你将需要重写其他 d3 组件来处理你的圆圈的 x 和 y 值嵌套在每个系列对象的 points 属性中的事实。有关绘制多条线的更多信息，请参见[多条线 d3](https://stackoverflow.com/questions/15596814/multiple-lines-d3/15601415#15601415)。

**在回复评论时添加：**

将原始数据元素一次分配给数据的大小循环是问题所在。它与 d3 处理数据的方式背道而驰。在第一个循环中，d3 为数据数组中的 7 个元素输入 7 个路径和圆圈。

`.enter()`仅根据数据数组中的更改添加新的 svg 元素。如果未使用任何键，则更改由数组长度驱动。由于数据数组的长度在第二次和第三次循环中没有变化，因此没有添加新路径。

要获取所有三行，请删除循环，使用`.data(rawdata)`数据并将行 'd' 属性更改为`.attr('d', line(d.points))`.

不幸的是，这会搞砸圈子。有关在相同数据上绘制圆圈和线条的帮助，请查看此 google 群组讨论中的 Mike Bostocks svg:g 元素建议[https://groups.google.com/forum/?fromgroups=#!topic/d3-js/ 8XLzUYLoFnY](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/8XLzUYLoFnY)

# html - 如何从我的网址中删除 .html 扩展名？

> ID：15728888
> 
> 赞同：0
> 
> 时间：2013-03-31T11:25:44.973
> 
> 标签：html, .htaccess, url

如何从我的网址中删除 .html 扩展名？我对此真的很陌生，并且已经阅读了很多关于这个问题的文章，但是所有相互矛盾的信息都让我感到困惑，似乎没有任何效果！

我的 htaccess：

* * *

```
# Begin password protection #
#AuthName "Password Protected"
#Require valid-user
#AuthUserFile "/home/users/web/b244/ipg.akaambcouk/.htpasswd"
#AuthType basic
# End password protection #

DirectoryIndex index.html index.php

ErrorDocument 403 /404.php
ErrorDocument 404 /404.php

# BEGIN WordPress
#<IfModule mod_rewrite.c>
#RewriteEngine On
#RewriteBase //
#RewriteRule ^index\.php$ - [L]
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule . /index.php [L]
#</IfModule>
# END WordPress
#Weebly Additions Start
DirectoryIndex index.html index.php
ErrorDocument 404 /404.php
ErrorDocument 403 /404.php

# Send send no-cache headers for root (/) and (.html) files
SetEnvIf Request_URI "(^/|\.html)$" HTML_FILE
Header add Pragma "no-cache" env=HTML_FILE
Header add Cache-Control "no-cache, no-store, max-age=0, must-revalidate" env=HTML_FILE
Header add Expires "-1" env=HTML_FILE

RewriteEngine on
RewriteCond %{HTTP_COOKIE} !^.*WeeblySiteLogin=Holland47\!.*$
RewriteRule ^(episodes\.html|send\-music\.html|facebook\.html|feeling\.html|bitch\.html|tracks\.html|bits\-and\-pieces\.html|beachball\.html|portland\-place\.html|white\-food\-for\-free\.html|podcast\.html|late\-at\-night\.html|index\.html||safe\-distance\.html|art\.html|contact\.html|you\-got\-to\-love\-me\.html|pretty\-mess\.html|up\-and\-over\.html|release2gether\.html|velvet\.html|disco\-twat\.html|email\.html|here\-comes\-the\-sun\.html|subscribe\.html|inside\-out\.html|micallef\.html|tuningfunktionen\.html|what\-have\-you\-done\-to\-me\-lately\.html|devils\-work\.html|a\-vauxhall\-noite\.html|handbag\.html|lolas\-descent\.html|close\-my\-eyes\.html|earth\-stops\-turning\.html|caught\-out\-there\.html|bring\-the\-wilder\-side\.html|revamp\.html)$ /login.php

RewriteEngine On

# stop condition
RewriteRule ^mobile/.*$ - [L]

# only process HTML files
# ----------------------------------------------------

RewriteRule (^|\.html)$ - [S=1]
        # is an html file, start the tests...

RewriteRule .* - [S=9]
        # NOT html file, skip past mobile rules...

# tests
# ----------------------------------------------------

RewriteCond %{QUERY_STRING} ^mobile$
RewriteRule ^(.*)$ /$1?m [CO=is_mobile:1:%{HTTP_HOST},CO=disable_mobile:0:%{HTTP_HOST},L,R]
        # set cookies, redirect...

RewriteCond %{QUERY_STRING} ^full$
RewriteRule ^(.*)$ /$1? [CO=disable_mobile:1:%{HTTP_HOST},L,R]
        # set cookies, redirect...

RewriteCond %{HTTP_COOKIE} (^|;)\s*is_mobile=0
RewriteRule .* - [S=6]
        # skip past mobile rules...

RewriteCond %{HTTP_COOKIE} (^|;)\s*disable_mobile=1
RewriteRule .* - [S=5]
        # skip past mobile rules...

RewriteCond %{HTTP_COOKIE} (^|;)\s*is_mobile=1
RewriteRule .* - [S=2]
        # go to mobile rules...

RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC]
RewriteRule .* - [CO=is_mobile:1:%{HTTP_HOST},S=1]
        # go to mobile rules...

RewriteRule .* - [CO=is_mobile:0:%{HTTP_HOST},S=2]
        # set cookie, skip past mobile rules...

# mobile rules
# ----------------------------------------------------

RewriteRule ^$ /mobile/index.html [S=1,PT]

RewriteRule ^(.*)$ /mobile/$1 [PT]
#Weebly Additions End 
```

# bash - 如果'var = 08'如何在bash中增加变量'var'

> ID：15728889
> 
> 赞同：1
> 
> 时间：2013-03-31T11:25:45.553
> 
> 标签：bash, variables, increment

当我增加一个变量时，仅当变量的值为**08 或 09时才会显示错误**

`a=08; ((a++)); echo "$a"`

输出

```
~$ a=08;  ((a++));  echo "$a"
bash: ((: 08: value too great for base (error token is "08")
08 
```

怎么了 ？？
我想要结果 09（不是 9。我知道 9 可以通过 实现`bc <<< "08+01"`）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T11:30:01.960

当你在一个数字前加上一个零时，shell 认为它是一个*八进制*数字，而八进制数字只能从 0 到 7。

您可能希望保留没有前导零的数字，因此它是一个普通的十进制数，并且仅在打印值时添加前导零。

```
a=8; ((a++)); printf "%02d\n" $a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:35:23.053

以 0 开头的数字被解释为八进制

您可以使用单独的 expr 进程：`echo $(expr "$a" + 1)`

或者，您可以直接使用 bash 特定构造一个以 10 为基数的力：`echo $((10#$a+1))`

或者您可以使用`expr`将 var 格式化为十进制*一次*：`a=$(expr "$a" + 0)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:32:52.740

当你在一个数字后面加上一个零时，它被认为是八进制的，其中不存在 09 元素。

如果您使用十进制编号，请删除数字声明的 0。

检查谷歌八进制数字和 bash 以获得更多说明。

# php - 用于上传个人资料图片的 SWITCH 语句

> ID：15728892
> 
> 赞同：0
> 
> 时间：2013-03-31T11:26:06.603
> 
> 标签：php, mysql, database, switch-statement, avatar

我有一个 switch 语句，它确定上传的图像的文件类型以在我的应用程序中用作头像，但是它似乎有点错误，因为它允许成功注册，无论是否存在允许的文件类型，并且没有错误消息被返回。不允许提交的文件类型。

```
$submit = $_POST['submit'];

if ($submit == 'Sign up!') {
    require_once("db_connect.php");
    $submit = clean_string($_POST['submit']);
    $first_name = clean_string($_POST['first-name']);
    $last_name = clean_string($_POST['last-name']);
    $email = clean_string($_POST['email']);
    $password = clean_string($_POST['password']);
    $confirm_password = clean_string($_POST['confirm-password']);

    //Output variables
    $register_bad_message = '';
    $register_good_message = '';

    require_once($_SERVER['DOCUMENT_ROOT'] . '/recaptcha/recaptchalib.php');
    $privatekey = "6Ldbd8ASAAAAAFz8VT29H5w4WLNjsbI-mFY2QkaC";
    $resp = recaptcha_check_answer ($privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]);
    if (!$resp->is_valid) {
        $errMessage = $resp->error;
        $register_bad_message = '<div class="alert alert-error">The reCAPTCHA you entered wasn\'t correct. Please try again.</div>';?>
        <script>
            $('a.account-register').trigger('click');
        </script><?php
    } else {
        if ($first_name&&$last_name&&$email&&$password&&$confirm_password) {
            if ($password == $confirm_password) {
                if (strlen($password) > 25 || strlen($password) < 6) {
                    $register_bad_message = '<div class="alert alert-error">Please enter a password between 6 and 25 characters.</div>';?>
                    <script>
                        $('a.account-register').trigger('click');
                    </script><?php
                } else {
                    if($db_server) {
                        $first_name = clean_string($first_name);
                        $last_name = clean_string($last_name);
                        $email = clean_string($email);
                        $password = clean_string($password);
                        mysql_select_db($db_database);

                        $taken = mysql_query("SELECT email FROM users WHERE email='$email'");
                        $count = mysql_num_rows($taken);
                        if ($count > 0) {
                            $register_bad_message = '<div class="alert alert-error">The email you have entered is already associated with a Screening account. Please choose another.</div>';?>
                            <script>
                                $('a.account-register').trigger('click');
                            </script><?php
                        } else {
                            if ($_FILES) {
                                //Put file properties into variables
                                $file_name = $_FILES['profile-image']['name'];
                                $file_size = $_FILES['profile-image']['size'];
                                $file_tmp_name = $_FILES['profile-image']['tmp_name'];

                                //Determine filetype
                                switch ($_FILES['profile-image']['type']) {
                                    case 'image/jpeg': $ext = "jpg"; break;
                                    case 'image/png': $ext = "png"; break;
                                    default: $ext = ''; break;
                                }

                                if ($ext) {
                                    //Check filesize
                                    if ($file_size < 5242880) {
                                        //Process file - resize, clean up filename and move to safe location
                                        $image = new SimpleImage();
                                        $image->load($file_tmp_name);
                                        $image->resizeToWidth(250);
                                        $image->save($file_tmp_name);

                                        $n = "$file_name";
                                        $n = ereg_replace("[^A-Za-z0-9.]", "", $n);
                                        $n = strtolower($n);
                                        $n = "avatars/$n";
                                        move_uploaded_file($file_tmp_name, $n);
                                    } else {
                                        $register_bad_message = '<div class="alert alert-error">Please ensure your chosen file is less than 5MB.</div>';?>
                                        <script>
                                            $('a.account-register').trigger('click');
                                        </script><?php
                                    }
                                } else if (!empty($ext)) {
                                    $register_bad_message = '<div class="alert alert-error">Please ensure your image is of filetype .jpg or.png.</div>';?>
                                    <script>
                                        $('a.account-register').trigger('click');
                                    </script><?php
                                }
                            }
                            $password = md5($password);
                            $query = "INSERT INTO users (first_name, last_name, email, password, image) VALUES ('$first_name', '$last_name', '$email', '$password', '$n')";
                            mysql_query($query) or die("Insert failed. " . mysql_error() . "<br />" . $query);
                            $register_good_message = '<div class="alert alert-success">Registration successful!</div>';?>
                            <script>
                                $('a.account-register').trigger('click');
                            </script><?php
                        }
                    } else {
                        $register_bad_message = '<div class="alert alert-error">Error: could not connect to the database.</div>';?>
                        <script>
                            $('a.account-register').trigger('click');
                        </script><?php
                    }
                    require_once("db_close.php");
                }
            } else {
                $register_bad_message = '<div class="alert alert-error">Passwords failed to match. Please try again.</div>';?>
                <script>
                    $('a.account-register').trigger('click');
                </script><?php
            }
        } else {
            $register_bad_message = '<div class="alert alert-error">Please fill in all fields before continuing.</div>';?>
            <script>
                $('a.account-register').trigger('click');
            </script><?php
        }
    }
} 
```

例如，上传 .GIF 文件不会出现错误并显示“注册成功”消息，但是在登录个人资料时，不会显示上传的个人资料照片。我在想代码拒绝文件类型而不是将其存储在数据库中，但仍在处理注册，而不是取消它，这是它应该做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:33:05.853

您必须设置`$ext`为`false`而不是 '' 因为这对于 if 语句不是错误的。

```
default: $ext = false; break; 
```

或者您检查是否`$ext`不是空字符串：

```
if ($ext != '') { 
```

为了防止在上传无效文件类型时注册，您必须输入

```
$password = md5($password);
$query = "INSERT INTO users (first_name, last_name, email, password, image) VALUES ('$first_name', '$last_name', '$email', '$password', '$n')";
mysql_query($query) or die("Insert failed. " . mysql_error() . "<br />" . $query);
$register_good_message = '<div class="alert alert-success">Registration successful!</div>';?>
<script>
$('a.account-register').trigger('click');
</script><?php 
```

`if($ext != '') { /*Put code at the end of if*/}`或的内部`if($ext) { /*Put code at the end of if*/ }`。否则，是否存在有效的文件类型并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:30:27.093

有时，$_FILES['profile-image']['type'] 的内容没有设置。例如，如果您从 cURL 或套接字提交文件。我会尝试从 $_FILES['profile-image']['tmp_name'] 为自己加载 mime 类型

编辑：

我也注意到了这个结构：

```
 if ($_FILES) { .... } 
```

应该有更好用

```
 if (isset($_FILES[key])){ .... } 
```

# javascript - 如何在Javascript中始终向下舍入到最接近的X倍数？

> ID：15728893
> 
> 赞同：2
> 
> 时间：2013-03-31T11:26:10.943
> 
> 标签：javascript

我在画布上绘制了一个网格，当用户单击网格时，我正在绘制一个矩形。我想始终在用户单击的网格单元顶部绘制矩形。所以我需要四舍五入到最接近的 X，在我的例子中，是 40 的倍数。

一些例子 ...

```
121 => 120
125 => 120
139 => 120
159 => 120
160 => 160 
```

到目前为止，我使用以下方法进行了舍入工作......

```
x = Math.round(x / constants.MAP_CELL_SIZE) * constants.MAP_CELL_SIZE; 
```

这**几乎**可以处理四舍五入，我唯一缺少的是四舍五入到最接近的 40 倍数，它保存在`constants.MAP_CELL_SIZE`.

希望这是有道理的，有人可以伸出援助之手……非常感谢！

* * *

**更新**

就像从 切换`Math.round`到一样简单`Math.floor`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T11:39:46.783

要向下舍入，请使用 Math.floor() 而不是 Math.round()。你可以像这样使用它：

```
var customFloor = function(value, roundTo) {
    return Math.floor(value / roundTo) * roundTo;
}

customFloor(121, constants.MAP_CELL_SIZE); // => 120
customFloor(159, constants.MAP_CELL_SIZE); // => 120
customFloor(160, constants.MAP_CELL_SIZE); // => 160 
```

请参阅MDN 上的[Math.floor()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:29:48.560

如果要截断数字的小数部分，可以在其上使用按位运算符，它将数字视为 32 位整数。

```
x = x | 0; 
```

请记住，这与 具有不同的行为`Math.round()`，后者将使用负数正确舍入。

# javascript - 我可以在 processing.js 上对 three.js 进行后处理吗？

> ID：15728895
> 
> 赞同：1
> 
> 时间：2013-03-31T11:26:21.680
> 
> 标签：javascript, html, three.js, processing

我可以将 Three.js 的输出作为 processing.js 上的可用缓冲区，以便我可以使用效果和叠加进行一些渲染后处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:20:12.020

如果您可以访问图像形式的输出，则可以使用以下方法将其交给您的草图：

草图：

```
addThreeJSImage(String datauri) {
  PImage img = loadImage(datauri);
  // trigger further code based on img
} 
```

javascript（假设草图参考'p'）：

```
function doFunkyStuff(canvas) {
  imgdata = canvas.toDataURL('image/png');
  p.addThreeJSImage(imgdata);
} 
```

这是假设 three.js 让您当然可以访问画布，并且它绘制的数据是“干净的”（即您没有导入任何外部图像，因为跨域锁定会阻止您读取像素；您'将只能覆盖它们...）

# c# - C#继承和多态

> ID：15728898
> 
> 赞同：-2
> 
> 时间：2013-03-31T11:27:13.823
> 
> 标签：c#

我的网络服务中有这两个类：

```
[DataContract]
public class AllFile
{
    [DataMember(IsRequired = true)]
    public virtual string base64Data { get; set; }
}
[DataContract]
public class UploadFile : AllFile
{
    [DataMember(IsRequired = true)]
    public string data;

    [DataMember(IsRequired = true)]
    public override string base64Data { get { return data; } set { data = value; } }

}

ServiceReference.UploadFile obj = new ServiceReference.UploadFile();
obj.base64Data = "something";
AllFile file = (UploadFile)obj; 
```

但是，它告诉我 file.base64Data 为空。为什么？我以为我已经覆盖了子类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:35:58.323

你为什么要首先覆盖该属性。您正在打破 OOP 概念。您有一个公共字段“数据”，您可以从 base64Data 字符串中获取它的值。如果您要这样做，至少将“数据”设为私有。之后，将 value64Data 设置为基类中的普通属性并将其保留为简单的 {get;set;} 就足以让您的派生类也拥有它，并使所有这些设置变得毫无意义，并且在这种情况下不起作用。

```
DataContract]
public class AllFile
{
    [DataMember(IsRequired = true)]
    public string base64Data { get; set; }
}
[DataContract]
public class UploadFile : AllFile
{

}

ServiceReference.UploadFile obj = new ServiceReference.UploadFile();
obj.base64Data = "something";
AllFile file = (UploadFile)obj; 
```

如果我们遵循 OOP 概念，这应该是您的代码，它应该可以正常工作。

如果我们更多地遵循 OOP 概念，这应该是您的代码：

```
[DataContract]
public class AllFile
{
    [DataMember(IsRequired = true)]
    public string base64Data { get; protected set; }
    public virtual void SetBase64Data(string data)
    {
        this.base64Data = data;
    }
}
[DataContract]
public class UploadFile : AllFile
{

}

ServiceReference.UploadFile obj = new ServiceReference.UploadFile();
obj.SetBase64Data("data");
AllFile file = (UploadFile)obj; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:38:31.430

您的基类`AllFile`不包含`data`-member，因此您无法访问它！您将您的`virtual`成员声明为属性，并在您的子类中提供了一个新成员，该成员在您的基类中不存在。所以不要在你的基类中将你的成员标记为虚拟的

```
[DataContract]
public class AllFile
{
    [DataMember(IsRequired = true)]
    public string base64Data { get; set; }
} 
```

# java - 自定义 GUI 不会在应用程序第一次启动时显示

> ID：15728906
> 
> 赞同：1
> 
> 时间：2013-03-31T11:27:51.787
> 
> 标签：java, android

我正在尝试为 android 构建一个带有操纵杆（d-pad）的 GUI。而且我大部分时间都在工作。有一个大问题：当我第一次在任何安卓设备上打开它时，GUI 不会加载。我已经找到了问题所在，但我不清楚是什么原因造成的。

在`JoystickGui`类中，我在构造函数中创建了一个`joystick`对象。稍后`drawJoystickGUI()`由扩展 Activity 的类调用，它将在画布上绘制位图。每次我第一次启动应用程序（或手动清空 RAM）时，我都设法发现对操纵杆对象的引用为空，即使它是在构造函数中创建的。

在该方法`drawJoystickGUI()`中，我使用 a`System.Out.println`查看`joystick`对象是否实际存在并返回**null**。我必须使用`try`and`catch`来防止应用程序在启动时崩溃。

我真的希望有人可以向我解释导致这个问题的原因。

这是我的代码：

```
public class JoystickGUI implements OnTouchListener {

// Screen size for positioning purposes
private float screenWidth, screenHeight;

// Used to determine if the Joystick Graphical User Interface is actually
public static boolean use;

private boolean useButtons = true;

// Will hold all non-Joystick objects
private ArrayList<Button> buttons = new ArrayList<Button>();

// Joystick object
private Joystick joystick;

Display display;

// Touch input identification
private int jsPointerID;
final private int INVALID_POINTER_ID = -1;

@SuppressWarnings("deprecation")
public JoystickGUI() {
    if(use){

        display = ((WindowManager) GameEngine.getAppContext().getSystemService(
            Context.WINDOW_SERVICE)).getDefaultDisplay();

        screenWidth = display.getWidth();
        screenHeight = display.getHeight();

        System.out.println("ScreenWidth: " + screenWidth + ". ScreenHeight: "
                + screenHeight + ".");

        joystick = new Joystick(100, screenHeight - 100);

        if (useButtons) {

            Sprite buttonA = new Sprite("buttonajoystickgui");
            buttons.add(new RoundButton(buttonA, screenWidth - 125,
                    screenHeight - 75));
            Sprite buttonB = new Sprite("buttonbjoystickgui");
            buttons.add(new RoundButton(buttonB, screenWidth - 75,
                    screenHeight - 125));

        }

        setTransparency(150);

        Log.d("JoystickGUI", "Initialized");
    }

}

/**
 * The following methods are used for handling the touch input
 */

public boolean onTouch(View v, MotionEvent event) {

        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            buttonPressed(event);
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            buttonPressed(event);
            break;
        case MotionEvent.ACTION_MOVE:
            buttonMoved(event);
            break;
        case MotionEvent.ACTION_UP:
            buttonReleased(event, 0);
            break;
        case MotionEvent.ACTION_POINTER_UP:
            buttonReleased(event, event.getActionIndex());
            break;
        default:
            break;

    }
    return true;
}

public void buttonPressed(MotionEvent e) {

    for (int p = 0; p < e.getPointerCount(); p++) {
        if (joystick.isWithinJoystick(e, p) && !Joystick.isActive) {
            Joystick.isActive = true;
            jsPointerID = e.getActionIndex();
        }
        for (int i = 0; i < buttons.size(); i++) {
            if (buttons.get(i).isPressed(e, p) && !buttons.get(i).isActive) {
                buttons.get(i).setActive(true);
                buttons.get(i).setPointerID(e.getActionIndex());
                Log.d("JoystickGUI", "Button #" + i + " pressed.");
            }
        }
    }

}

public void buttonMoved(MotionEvent e) {

    for (int p = 0; p < e.getPointerCount(); p++) {
        if (Joystick.isActive && e.getPointerId(p) == jsPointerID) {
            joystick.updateButtonPos(e, p);
        }

    }

}

public void buttonReleased(MotionEvent e, int pointerIndex) {
    if (Joystick.isActive && e.getPointerId(pointerIndex) == jsPointerID) {
        Joystick.isActive = false;
        joystick.resetJoystick();
        jsPointerID = INVALID_POINTER_ID;

    }

    for (int i = 0; i < buttons.size(); i++) {
        if (buttons.get(i).isActive
                && e.getPointerId(pointerIndex) == buttons.get(i)
                        .getPointerID()) {
            buttons.get(i).setActive(false);
            buttons.get(i).resetPointerID();
        }
    }

}

/**
 * The following methods are used for drawing all button-objects to the
 * canvas.
 * 
 * @param canvas
 */

public void drawJoystickGUI(Canvas canvas) {
    if(use){

        try {
            joystick.drawJoystick(canvas);
        } catch (Exception e) {
            System.out.println(joystick);
            Log.d("JoystickGUI", "Drawing joystick failed!");
        }

        for (int i = 0; i < buttons.size(); i++) {
            try {
                buttons.get(i).drawButton(canvas);
            } catch (Exception e) {
                Log.d("JoystickGUI", "Drawing Button " + i + " failed");
                System.out.println(buttons.get(i));
            }
        }
    }

}

private void setTransparency(int alpha) {

    joystick.setAlpha(alpha);
    for (int i = 0; i < buttons.size(); i++) {
        buttons.get(i).setAlpha(alpha);
    }

}

/**
 * The following (static) methods are used to get input.
 * 
 * @return
 */

public static boolean isJoystickActive() {
    return Joystick.isActive;
}

public static  double getJoystickAngle() {
    return Joystick.getAngle();
}

public static  float getPower() {
    return Joystick.getPower();
}
} 
```

应该正确运行游戏的引擎，我把所有非必要的东西都拿出来了。在 GameLoop 中调用 InitializeTouch。

```
public abstract class GameEngine extends Activity {

/**
 * Gameloop is a gameThread that handles the timing of the game
 */
private GameLoop gameloop;
/**
 * View deals with the proper rendering of the game
 */
private static GameView view;
/**
 * The width and height of the device
 */
private static int screenWidth, screenHeight;
/**
 * JoystickGUI handles input by touch via the joystick interface
 */
public JoystickGUI joystickGUI;

/**
 * A vectorlist that holds all the active GameObjects. Can be used if you
 * mannualy want to delete/change GameObjects. For instance, you could loop
 * through this list and remove health of every GameObject.
 */
public static Vector<GameObject> items;
/**
 * A vectorlist that holds all the newly created GameObjects during this
 * cycle of the game loop. At the end of the cycle, all items in this list
 * will be moved to the items-list and the object become active
 */
public static Vector<GameObject> newItems;
/**
 * A vectorlist that holds all the active alarms. Can be used if you
 * manually want to delete/change alarms.
 */
public static Vector<Alarm> gameAlarms;

/**
 * Holds context of the application
 */
private static Context appContext;
/**
 * The main thread of the gameloop
 */
private Thread gameThread;

@Override
protected final void onCreate(Bundle savedInstanceState) {

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().setFlags(
            WindowManager.LayoutParams.SOFT_INPUT_ADJUST_UNSPECIFIED,
            WindowManager.LayoutParams.SOFT_INPUT_ADJUST_UNSPECIFIED);

    vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    appContext = getApplicationContext();

    joystickGUI = new JoystickGUI(); // Added

    screenWidth = getWindow().getWindowManager().getDefaultDisplay()
            .getWidth();
    screenHeight = getWindow().getWindowManager().getDefaultDisplay()
            .getHeight();

    gameloop = new GameLoop(this);
    gameThread = new Thread(gameloop);
    gameThread.setPriority(7);

    view = new GameView(this, gameThread);
    gameloop.setView(view);

    setContentView(view);
    view.setKeepScreenOn(true);

    super.onCreate(savedInstanceState);

}

/**
 * Initialize the Listener for the screen (general touch OR screenButtons)
 */
protected void initializeTouch() {

    if (JoystickGUI.use) { // added
        Log.d("JoystickEnabled", "USING JOYSTICK");
            view.setOnTouchListener(joystickGUI);
        }
}

public final void drawInterface(Canvas canvas) {
    if(JoystickGUI.use){
        joystickGUI.drawJoystickGUI(canvas);
    } 
} 
```

**编辑：**

我通过初始化绘图函数中的“操纵杆”和“按钮”对象解决了这个问题，并使用一个简单的布尔值来防止不必要的 cpu 使用。但我仍然愿意接受实际的解决方案，而不是变通办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:40:12.043

我不确定你的代码有什么问题。

你试过[AndEngine](http://www.andengine.org/)吗？它是免费和开源的。您可以从 Google Play下载其[示例应用程序。](https://play.google.com/store/apps/details?id=org.anddev.andengine.examples)

它的[操纵杆示例](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/AnalogOnScreenControlsExample.java)是模拟的。它不像您的操纵杆代码示例那么简单，但如果您可以调整您的游戏以接收模拟输入，那么它就是一个开箱即用的示例。

# c# - 如何在 C# 的面板内绘制矩形？

> ID：15728907
> 
> 赞同：0
> 
> 时间：2013-03-31T11:27:53.763
> 
> 标签：c#, paint

我想画一个矩形，我想给它相对于面板底部的位置。

```
 public void populateTable(int x, int y)
    {
        using (Graphics g = this.CreateGraphics())
        {
            Brush b = new SolidBrush(Color.Red);
            g.FillRectangle(b, x, y, 100, 40);
        }

    } 
```

当我执行上面的代码时，矩形就创建成功了。但它是相对于形式定位的，而不是面板。如果我输入 x=10, y=10，那么它就会显示在表格的左上角。但我想在我放置面板的底部显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:37:54.463

`this.CreateGraphics()`创建一个 Graphics 对象`this`，它是封闭类——在这种情况下是表单。

你应该试试`panel1.CreateGraphics()`。

但是，我建议根本不要使用`CreateGraphics`。最好处理`OnPaint`，以便在重新绘制表单时重新绘制图形（最小化然后最大化等）。

# c++ - 编辑/删除受保护的注册表项值

> ID：15728909
> 
> 赞同：1
> 
> 时间：2013-03-31T11:28:21.590
> 
> 标签：c++, winapi, registry

**我的问题：**是否可以在使用自定义安全描述符创建注册表项时编辑它的值？我是否需要使用 SECURITY_ATTRIBUTES 结构调用[RegSetKeyValueEx ？](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724923%28v=vs.85%29.aspx)如果没有，那么我需要删除密钥然后重新创建它。

我正在尝试编辑（或删除然后重写）注册表项值，但它不起作用。一些重要信息是我使用自定义安全描述符创建了注册表项。自定义安全描述符仅设置了 KEY_READ[注册表项安全和访问权限](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724878%28v=vs.85%29.aspx)。

但由于其 ACL 安全描述符，我什至无法删除该密钥。这是一个问题，因为当我卸载时，我什至无法删除注册表项。我使用自定义安全描述符创建注册表项的原因是用户不能意外或故意更改它。密钥告诉我我的应用程序之前是否运行过。

**有谁知道我如何编辑/删除这种类型的注册表项？**

我的代码（尝试编辑我的密钥并首先显示我是如何创建密钥的）：

```
// Code to change key value
LONG lResult = RegOpenKeyEx(HKEY_CURRENT_USER, _T("Software/MyApplication"), 0, KEY_READ, &hKey);
LONG setValueRes = RegSetValueEx(hKey, _T("FirstRunSignafier"), 0, REG_DWORD, (LPBYTE) &firstRunSignafierValue, 
                                 (DWORD) sizeof(firstRunSignafierValue));
// Error Value of setValueRes is 5\. lResult succeeds

// Code that creates the registry key
int  recordFirstApplicationRun()
{
    tstring REG_FIRST_RUN_SIGNIFIER = _T("Software\\MyApplication");
    HKEY hKey;
    LONG lResult;
    int   res                     = 1;
    DWORD dwValue, dwType, dwSize = sizeof(dwValue);
    DWORD firstRunSignafierValue  = 1;
    DWORD keyAlreadyExists; // Two potential values: REG_CREATED_NEW_KEY or REG_OPENED_EXISTING_KEY
    PSID pEveryoneSID             = NULL;
    PACL pACL                     = NULL;
    PSECURITY_DESCRIPTOR pSD      = NULL;
    SECURITY_ATTRIBUTES secAttr;

    createSecurityAttributes(&secAttr, pEveryoneSID, pACL, pSD);
    LONG createRes = RegCreateKeyEx(HKEY_CURRENT_USER, &REG_FIRST_RUN_SIGNIFIER[0], 0, NULL, REG_OPTION_NON_VOLATILE, 
                                    KEY_WRITE|KEY_WRITE, &secAttr, &hKey, &keyAlreadyExists);
    if (createRes != ERROR_SUCCESS) {
        //_tprintf(_T("Failed to create key: Last Error: %x, Return Val: %x\n"), GetLastError(), createRes);
        CPP_Utilities::outputLastError("Failed to create key");
        res = -1;
        goto Cleanup;
    }

    //CPP_Utilities::outputLastErrorEx( (keyAlreadyExists == REG_CREATED_NEW_KEY) ? _T("Created new registry key"):_T("Registry key already exists") );
    _tprintf( (keyAlreadyExists == REG_CREATED_NEW_KEY) ? _T("Created new registry key\n"):_T("Registry key already exists\n") );

    // To Write a DWORD to the registry
    LONG setValueRes = RegSetValueEx(hKey, _T("FirstRunSignafier"), 0, REG_DWORD, (LPBYTE) &firstRunSignafierValue, 
                                     (DWORD) sizeof(firstRunSignafierValue));
    if (setValueRes != ERROR_SUCCESS) {
        _tprintf(_T("B: %X\n"), setValueRes);
        CPP_Utilities::outputLastError("Failed to set registry value");
        res = -2;
        goto Cleanup;
    }

    Cleanup:
        if (pEveryoneSID) 
            FreeSid(pEveryoneSID);
        if (pACL) 
            LocalFree(pACL);
        if (pSD) 
            LocalFree(pSD);
        if (hKey)
            RegCloseKey(hKey);

    return res;
}

int createSecurityAttributes(SECURITY_ATTRIBUTES* secAttr, PSID pEveryoneSID, PACL pACL, PSECURITY_DESCRIPTOR pSD)
{
    // Pre: Memory release for parameters MUST be handled by caller

    EXPLICIT_ACCESS ea;
    DWORD dwRes;
    /*PSID*/ pEveryoneSID                   = NULL;
    /*PACL*/ pACL                           = NULL;
    /*PSECURITY_DESCRIPTOR*/ pSD            = NULL;
    SID_IDENTIFIER_AUTHORITY SIDAuthWorld   = SECURITY_WORLD_SID_AUTHORITY;

    // Create a well-known SID for the Everyone group.
    if(!AllocateAndInitializeSid(&SIDAuthWorld, 1, SECURITY_WORLD_RID, 0, 0, 0, 0, 0, 0, 0, &pEveryoneSID)) {
        _tprintf(_T("AllocateAndInitializeSid Error %u\n"), GetLastError());
        CPP_Utilities::outputLastError("AllocateAndInitializeSid Error");
        return -1;
    }

    // Initialize an EXPLICIT_ACCESS structure for an ACE. The ACE will allow Everyone read access to the key.
    ZeroMemory(&ea, sizeof(EXPLICIT_ACCESS));
    ea.grfAccessPermissions = KEY_READ;
    ea.grfAccessMode        = SET_ACCESS;
    ea.grfInheritance       = NO_INHERITANCE;
    ea.Trustee.TrusteeForm  = TRUSTEE_IS_SID;
    ea.Trustee.TrusteeType  = TRUSTEE_IS_WELL_KNOWN_GROUP;
    ea.Trustee.ptstrName    = (LPTSTR) pEveryoneSID;

    // Create a new ACL that contains the new ACEs.
    dwRes = SetEntriesInAcl(1, &ea, NULL, &pACL);
    if (ERROR_SUCCESS != dwRes) {
        _tprintf(_T("SetEntriesInAcl Error %u\n"), GetLastError());
        CPP_Utilities::outputLastError("SetEntriesInAcl Error");
        return -2;
    }

    // Initialize a security descriptor.  
    pSD = (PSECURITY_DESCRIPTOR) LocalAlloc(LPTR, SECURITY_DESCRIPTOR_MIN_LENGTH); 
    if (NULL == pSD) { 
        _tprintf(_T("LocalAlloc Error %u\n"), GetLastError());
        CPP_Utilities::outputLastError("LocalAlloc Error");
        return -3; 
    } 

    if (!InitializeSecurityDescriptor(pSD, SECURITY_DESCRIPTOR_REVISION)) {  
        _tprintf(_T("InitializeSecurityDescriptor Error %u\n"), GetLastError());
        CPP_Utilities::outputLastError("InitializeSecurityDescriptor Error");
        return -4;
    } 

    // Add the ACL to the security descriptor. 
    if (!SetSecurityDescriptorDacl(pSD, TRUE, pACL, FALSE)) {  
        _tprintf(_T("SetSecurityDescriptorDacl Error %u\n"), GetLastError());
        CPP_Utilities::outputLastError("SetSecurityDescriptorDacl Error");
        return -5;
    } 

    // Initialize a security attributes structure.
    secAttr->nLength                = sizeof (SECURITY_ATTRIBUTES);
    secAttr->lpSecurityDescriptor   = pSD;
    secAttr->bInheritHandle         = FALSE;

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:07:20.070

您需要更改权限，以便用户具有`KEY_SET_VALUE`访问权限。执行此操作的最简单方法是让您的卸载程序删除安装程序添加的 ACL。

您只需要卸载程序来反转安装程序执行的步骤。您的安装程序去了：

1.  创建密钥。
2.  将 ACL 添加到密钥。

因此，您的卸载程序需要：

1.  从密钥中删除 ACL。
2.  删除密钥。

# php - 如何在 Rackspace 上上传云文件并在文件到期时设置删除？

> ID：15728910
> 
> 赞同：0
> 
> 时间：2013-03-31T11:28:26.233
> 
> 标签：php, cloud, openstack, cloudfiles, rackspace-cloudfiles

我在本地 XAMPP 设置中，可以上传文件，但我需要设置到期或删除时间。

这不起作用（没有 PHP 错误，但文件仍然存在于 Rackspace、Web 管理页面上）：

```
$obj->Create(
    array('name'=>'file.txt',
        'content_type'=>'application/octet-stream',
        'extra_headers'=>'X-Delete-After: 300'
    ), 'd:\file.txt'); 
```

这也不起作用：

```
 $obj->Create(
     array('name'=>'fdedd.txt.3',
        'content_type'=>'application/octet-stream',
        'X-Delete-After'=>'300'
     ), 'd:\fdedd.bb.txt'); 
```

给一个：

> 致命错误：未捕获的异常 'OpenCloud\ObjectStore\UnknownParameterError' 带有消息 'Unrecognized parameter [X-Delete-After] for object

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:15:11.997

PHP api 存在问题。

要添加额外的标题以在 X 秒后删除文件，您需要按以下顺序执行此操作：

```
$obj = $container->DataObject();
$obj->extra_headers['X-Delete-After'] = 86400;
$obj->Create(array('name'=>'Name', 'content_type'=>'text/html'), $FILENAME); 
```

# android - 如何每隔几个小时更改 SharedPreferences 中字段的值？

> ID：15728913
> 
> 赞同：1
> 
> 时间：2013-03-31T11:28:50.220
> 
> 标签：android, service, alarmmanager, android-pendingintent

我想每隔几个小时或在特定时间（例如，每 00:00）在我的应用程序的 SharedPreferences 中编辑一个值，而不需要任何用户的操作。这个怎么做？谢谢。

# ruby-on-rails - 在 Rails/PostgreSQL 应用程序中实现 LRU 缓存

> ID：15728918
> 
> 赞同：0
> 
> 时间：2013-03-31T11:29:33.327
> 
> 标签：ruby-on-rails, postgresql, caching

我有一个约会安排应用程序，其中绝大多数约会数据都是“桥下的水”。对于任何给定的日历页面，该页面上可能有 5% 的约会是新的；其余的都是旧的，不太可能改变。

问题是每个页面都可以有大量的约会，并且加载所有这些约会（即使是急切加载）很慢。我想做一些缓存以加快速度，但我不想每次有人创建约会时都使整个缓存无效，因为用户在每次创建约会后都会看到日历页面，所以似乎使整个缓存无效那一点将破坏缓存的整个目的。

我的理解是我想要的是[LRU 缓存](http://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used)。我如何在 Rails/PostgreSQL 缓存中实现这​​一点？应该在应用程序级别还是数据库级别完成？LRU 缓存是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T12:16:12.640

一个可能的问题是您的 ORM 可能会生成大量小查询。要做的第一件事是整合您的数据语句并酌情使用 SQL 来获取一组有趣的约会。从那里你可以使用 PostgreSQL 索引使事情变得非常快。请注意，PostgreSQL 允许您创建部分索引和完整索引，这允许您一次索引一个表的片段。

但是，如果这不起作用，那么一种选择是使用 LISTEN 和 NOTIFY 使特定缓存条目无效并强制它们重建。但是，您在这里面临一些重大挑战，因此这不是我要开始的地方。请记住，PostgreSQL 自己做了一些 LRU 缓存，所以你可以在这方面做的越多，优化你的数据库，你就越不用担心其余的事情。

# windows - 在安装程序中合并 exe，并使其自动运行

> ID：15728919
> 
> 赞同：-2
> 
> 时间：2013-03-31T11:29:34.747
> 
> 标签：windows, merge, installation, autorun

我使用linux，并且有中等的windows经验。

我想做的是合并

```
 a.exe 
 b.exe 
```

集成到一个安装程序中。并希望安装程序首先运行 a.exe，使其在启动时自动运行。然后立即运行“b”。所以 b.exe 放在某个地方，带有“a”，但“a”是在启动时自动运行的。

这样做的聪明方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:33:42.627

我会为此使用 WinRAR 并创建自解压存档，并启用自动运行程序设置，它将运行准备好的`bat`文件。我知道你说你使用 Linux，但使用 wine 并非不可能，尤其是当你处理`exe`文件时；）

# midi - 创建 MIDI 程序

> ID：15728935
> 
> 赞同：1
> 
> 时间：2013-03-31T11:31:42.853
> 
> 标签：midi

我正在尝试从我的 PC 获取一些代码到 Roland BK7M 支持模块以执行程序更改。对于所有 Roland Midi 消息，需要三个代码，对于我的程序更改，它们如下：

CC00：122 CC32：0 PC：2

我一直在尝试使用“genmce”提供的“generic_midi program_06.ahk”或多或少作为起点来尝试创建程序，但恐怕我什至没有走出起点！我将概述我在运行它时得到的反馈。

首先我得到“Error, midiInOpen Returned 2”然后是“Error, midiInStart Returned 5”，“右键单击托盘图标左键单击 MidiSet 以选择有效的 midiin 端口”</p>

然后是 Midi Monitor，从 Midi In Port 选择中选择“USB Audio Device”，这是给 BK7M 的标题。从 Midi Out Port I 选择中，我选择 MicrosoftGS Wavetable SW Synth。

然后在这些选项下留下两个屏幕，其中包含以下标题；事件类型_StatB_Ch_Byte1_Byte2。相同的标题出现在两个选项 Midi In Port 和 Midi Out Port 下。

在 Midi In Port 一侧，我看到 StadB、Ch_Byte1 和 Byte2 的连续读数为 248 、 9 、 0 、 0 ，而在 Event Type 标题下没有读数。在 Midi Out Port 一侧，我根本没有读数。

我非常感谢任何帮助，因为我对 midi 的了解非常有限。

# python - 如何在不等待返回码的情况下运行程序？

> ID：15728937
> 
> 赞同：1
> 
> 时间：2013-03-31T11:32:00.227
> 
> 标签：python, python-3.x

我正在使用 Python 3.3。我试过这个：

```
# beginning and ending quotes are to compensate for Microsoft kludge
emuleappfile = '"'+os.environ['ProgramFiles']+'\\eMule\\emule.exe'+'"'
os.system(emuleappfile)
# vvv beginning and ending quotes are to compensate for Microsoft kludge
vuzeappfile = '"'+os.environ['ProgramFiles']+'\\Vuze\\azureus.exe'+'"'
os.system(vuzeappfile ) 
```

还有这个

```
# beginning and ending quotes are to compensate for Microsoft kludge
emuleappfile = '"'+os.environ['ProgramFiles']+'\\eMule\\emule.exe'+'"'
itran = os.system(emuleappfile)
# vvv beginning and ending quotes are to compensate for Microsoft kludge
vuzeappfile = '"'+os.environ['ProgramFiles']+'\\Vuze\\azureus.exe'+'"'
itran = os.system(vuzeappfile) 
```

emule 会打开，但程序直到 emule 关闭后才会打开 vuze。gr。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:05:34.533

使用`subprocess.Popen`. 在 Windows 上，这调用 Win32 API 函数`CreateProcess`。

[http://docs.python.org/3/library/subprocess](http://docs.python.org/3/library/subprocess)

```
import os
import subprocess

emuleappfile = os.path.join(os.environ['ProgramFiles'], 'eMule', 'emule.exe')
vuzeappfile = os.path.join(os.environ['ProgramFiles'], 'Vuze', 'azureus.exe')
proc_emule = subprocess.Popen([emuleappfile])
proc_vuze = subprocess.Popen([vuzeappfile]) 
```

**编辑：**

Popen 公开了一些[`STARTUPINFO`](http://msdn.microsoft.com/en-us/library/ms686331)用于设置进程和窗口属性的结构字段。请参阅子流程文档中的[Windows Popen Helpers部分。](http://docs.python.org/3/library/subprocess#windows-popen-helpers)例如，使用以下命令在隐藏窗口中启动 vuze，这也是 Win32 [ShowWindow](http://msdn.microsoft.com/en-us/library/ms633548)的窗口默认状态：

```
si = subprocess.STARTUPINFO()
si.dwFlags = subprocess.STARTF_USESHOWWINDOW
si.wShowWindow = subprocess.SW_HIDE
proc_vuze = subprocess.Popen([vuzeappfile], startupinfo=si) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:09:14.050

`os.system(''.join(['start "', os.environ['ProgramFiles'], '\\eMule\\emule.exe', '"']))`（特别是该`start`部分）将在单独的窗口中运行可执行文件，因此不会阻止当前窗口。

# javascript - 在Javascript中更改传递变量的值而不返回？

> ID：15728938
> 
> 赞同：1
> 
> 时间：2013-03-31T11:32:02.450
> 
> 标签：javascript, pass-by-reference

我有函数*change(x)*接受一个整数并改变它的值

```
function change(x) {
   x=26;
} 
```

然后我创建一个变量并尝试更改它的值

```
window.onload=function(){
   var a = 10;
   change(a);
   console.log(a);
} 
```

*a*并没有像我预期的那样改变。是否可以在不使用 return 的情况下以简单的方式在 JavaScript 中实现此行为？我宁愿避免使用对象和全局变量。

这是我的整个代码：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
   <script>
   function change(x) {
      x=26;
   }
   window.onload=function(){
      var a = 10;
      change(a);
      console.log(a);
   }
   </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:34:07.613

JavaScript 总是按值传递参数，所以你不能像你最初写的那样做。

但是，对象的值是引用，因此您可以使用对象。

但是，这对于这个用例来说会令人困惑。您应该让该函数返回转换后的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:34:34.993

您不能像那样（或根本不）通过引用传递变量。您*可以*做的是传递一个对象并修改其属性：

```
function change(obj) {
    obj.a = 4;
}

var obj = {a: 0};
change(obj);

// obj.a is "4" now 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-31T11:42:36.173

我这样做了，它奏效了：

```
function change(x) {   
  x=26;  
  return x;  
}  
  window.onload=function(){  
  var a = 10;  
  console.log(change(a));  
} 
```

希望能帮助到你

# opencv - opencv中视频的无损压缩

> ID：15728939
> 
> 赞同：9
> 
> 时间：2013-03-31T11:32:04.387
> 
> 标签：opencv, video-processing

我正在处理一个视频处理项目，该项目涉及某种加密，使用来自相机的给定帧与关键图像的简单异或运算，最后存储视频文件。对于解密阶段，对相同图像的 XOR 操作将获得原始帧。但问题是，当我解密帧时似乎很嘈杂，发现这是因为我在存储时使用了有损图像压缩格式。opencv还有其他无损图像压缩格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:26:52.463

如果您在 Windows 上工作，您可以将`CV_FOURCC_PROMPT`其用作构造函数的第二个参数`VideoWriter`——它将允许您从列表中选择编解码器并设置各种选项。只是为了测试你可以使用`uncompressed avi (aka full frames [not compressed])`. 它会产生巨大的文件，但应该可以正常工作。

否则只需检查列表中的所有可能性

[http://www.fourcc.org/codecs.php](http://www.fourcc.org/codecs.php)

请注意`HighGui is meant as a simple tool for experimentation.`（[http://opencv.willowgarage.com/wiki/VideoCodecs](http://opencv.willowgarage.com/wiki/VideoCodecs)），因此它可能无法提供您正在寻找的功能。如果是这样，您将不得不使用其他一些库并为它提供由 opencv 处理的每一帧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T16:53:02.717

根据 OpenCV 的[旧页面](http://opencv.willowgarage.com/wiki/VideoCodecs)：

> 有几种无损视频压缩器可用。但是，所有平台都不能同时支持任何一个。寻找 HuffYUV、CorePNG、Motion PNG 或 Motion JPEG2000。

最近的[OpenCV 文档](http://docs.opencv.org/doc/tutorials/highgui/video-write/video-write.html#the-structure-of-a-video)也提到了一些替代方案，例如**JPG2000**和[**LAGS**](https://lags.leetcode.net/codec.html)（*Lagarith Lossless Codec*）。

前段时间[有人发了一条消息](https://stackoverflow.com/questions/11598462/lossless-avi-encoding-on-linux)，解释了他是如何使用 OpenCV 和 FFmpeg 以无损压缩方式渲染视频的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-06T07:52:56.213

官方文档说 [http://docs.opencv.org/trunk/dd/d9e/classcv_1_1VideoWriter.html#ad59c61d8881ba2b2da22cff5487465b5](http://docs.opencv.org/trunk/dd/d9e/classcv_1_1VideoWriter.html#ad59c61d8881ba2b2da22cff5487465b5)

> 大多数编解码器都是有损的。如果您想要无损视频文件，您需要使用无损编解码器（例如 FFMPEG FFV1、Huffman HFYU、Lagarith LAGS 等...）
> 
> 如果启用了 FFMPEG，则使用 codec=0；fps=0；您可以创建一个未压缩的（原始）视频文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T22:05:58.573

在 Debian Linux 上（使用 ffmpeg）：

```
int width = 640;
int height = 480;
bool isColor = true;
string outFName = "out.avi";

Size frameSize = Size(width, height);
int fourcc = VideoWriter::fourcc('p', 'n', 'g', ' ');

outputVideo.open(outFName, fourcc, cap.get(CAP_PROP_FPS), frameSize, isColor)); 
```

# android - Timer 用完后调用 AsyncTask

> ID：15728940
> 
> 赞同：0
> 
> 时间：2013-03-31T11:32:08.833
> 
> 标签：android, multithreading, android-asynctask

我知道让主 UI 线程等待确实是一个非常糟糕的主意，因为它会导致“应用程序无响应”消息。

但这是我的场景。

我正在从我的 android 应用程序调用我的服务器，在该应用程序中我发送用户的坐标，服务器使用该坐标相应地返回结果。问题是在应用程序的**第一次运行**期间，获取位置需要很长时间。我正在寻找 GPS 和 NETWORK 提供商来检索位置，并且在从 GPS 和 NETWORK 提供商获取位置之前运行 20 秒计时器。

这是我查找用户位置的课程。

```
public class MyLocation {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled=false;
    boolean network_enabled=false;

    public boolean getLocation(Context context, LocationResult result)
    {
        //use LocationResult callback class to pass location value from MyLocation to user code.
        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

        //don't start listeners if no provider is enabled
        if(!gps_enabled && !network_enabled)
            return false;

        if(gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
        if(network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        timer1=new Timer();
        timer1.schedule(new GetLastLocation(), 20000); 
        return true;
    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
            lm.removeUpdates(locationListenerGps);
            lm.removeUpdates(locationListenerNetwork);

            Location net_loc=null, gps_loc=null;
            if(gps_enabled)
                gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if(network_enabled)
                net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

            //if there are both values use the latest one
            if(gps_loc!=null && net_loc!=null){
                if(gps_loc.getTime()>net_loc.getTime())
                    locationResult.gotLocation(gps_loc);
                else
                    locationResult.gotLocation(net_loc);
                return;
            }

            if(gps_loc!=null){
                locationResult.gotLocation(gps_loc);
                return;
            }
            if(net_loc!=null){
                locationResult.gotLocation(net_loc);
                return;
            }
            locationResult.gotLocation(null);
        }
    }

    public void cancelTimer() { 
        timer1.cancel();
        lm.removeUpdates(locationListenerGps);
        lm.removeUpdates(locationListenerNetwork); 
    }

    public static abstract class LocationResult{
        public abstract void gotLocation(Location location);
    }
} 
```

在我的主要活动中，

```
onCreate(...)
{
.
.
.
.
myLocation.getLocation(context, locationResult); // my call to the MyLocation class to get the user location

sendRequestToServer(); // calls an AsyncTask which uses the coordinates returned by the MyLocation class

} 
```

**`getLocation(context, locationResult)`**将上下文传递给 MyLocation 类，结果存储在`LocationResult callback class`.

所以，在我的主要活动中，我有

```
LocationResult locationResult = new LocationResult(){
        @Override
        public void gotLocation(Location location){
            if(location != null)
            {
                mUser.setLastKnownLoc(location);
                Log.d("UserLocation", location.getLatitude() + "   "  + location.getLongitude());

            }
        }
    }; 
```

我对服务器的请求用于`mUser.getLastKnownLoc()`获取存储在结果中的位置值。

**我的问题：**让 sendRequestToServer() 等到我有位置

**我尝试了什么：**

*   `myLocation.getLocation(..)`放入`doInBackground()`AsyncTask 并调用onPostExecute `sendRequestToServer()`()，但 sendRequestToServer 仍然不会等待 MyLocation 类中的计时器完成。
*   在 onCreate 中创建另一个计时器并设置`mTimer.schedule(RequestToserver,20000)`以便仅在 20 秒后调用 sendRequestToServer（到 MyLocation 中的另一个计时器结束时）。这似乎有点工作，因为请求是在 20 秒后才发出的，但是由于一些线程处理问题，我的应用程序会崩溃。我尝试在 UIThread 上运行 timerTask 并将 Looper.prepare() 附加到它。但是我陷入了线程处理错误的恶性循环，这可能是因为`sendRequestToServer()`调用了一个 AsyncTask 再次拥有自己的后台线程。

很长一段时间以来，我一直在努力完成这项工作。我只需要确保在 20 秒 MyLocation 计时器用完后调用 AsyncTask。

您身边的任何帮助/建议都会非常棒！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:11:13.350

这是愚蠢的解决方案有时会起作用。无论如何尝试使用它

boolean x=......获取位置（）；

以便它等待结果 x。如果需要，将其放入 oncreate() 中。如果问题存在回发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:38:10.430

在您的 onCreate 中只显示一个`ProgressDialog`阻止用户输入的内容，在后台运行您的 getLocation ，当它获得一个位置时，只需关闭`ProgressDialog`并开始您的新`AsyncTask`功能以发送数据。

像。

```
ProgressDialog pd = ...;
pd.show();
MyLocation ml = new MyLocation(new LocationResultsCallback(){ 
    public void onLocationRecieved(Location loc){
        //must run on UI thread
        pd.dismiss();
        new SendResultsTask(loc).execute();
    }
});
ml.findLocation(); // start location finding 
```

同样对于您的 getLastKnownLocation ，将其切换为类似的东西可能会更好。

```
String bestProvider = locationManager.getBestProvider(new Criteria(), true);
if(bestProvider!=null)
    Location local = locationManager.getLastKnownLocation(bestProvider); 
```

也就是说，如果这适用，我不知道您对位置提供商有什么限制。

此外，使用 Handler 代替 Timer 更合适，但两者都应该在你身上工作。

# php - 在我的网站中显示 mysql 字段时如何删除 # 分隔符

> ID：15728942
> 
> 赞同：1
> 
> 时间：2013-03-31T11:32:26.640
> 
> 标签：php, mysql

我对 PHP 很陌生，并且会重视一些帮助。我有一个 mysql 字段，它显示了由 # 标签分隔的一系列服装尺寸，即 S#M#L#XL

我想在我的网站上显示它，就像没有# 符号的 SML XL。有没有办法使用 PHP 来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T11:34:24.797

使用[str_replace](http://php.net/manual/en/function.str-replace.php)。

```
str_replace("#", " ", $yourstring); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T11:35:12.947

听起来您正在寻找基于散列的字符串[。](http://php.net/manual/en/function.explode.php)如果是这样：`$sizesArray = explode('#', $sizes);`

相反，如果您只是想替换哈希，则可以使用[str_replace](http://php.net/manual/en/function.str-replace.php)：

```
str_replace('#', ' ', $sizesString); // Will simply replace # with a space 
```

# gtk - Twisted+GTK 应用程序在下载文件时变得无响应

> ID：15728944
> 
> 赞同：2
> 
> 时间：2013-03-31T11:32:45.670
> 
> 标签：gtk, twisted, pygtk

我想在同一个应用程序中使用 Twisted 和 GTK+。我正在使用 gtk2reactor，使我的所有代码都正确地非阻塞，并且通常它工作得很好。

但是，当我运行 (HTTP) 下载时，GUI 变得无响应且滞后。就好像某些东西在扭曲的块中（在很短的时间内）并且反应器没有足够频繁地处理 GTK 事件。基本上，我正在使用：

```
factory = twc.HTTPDownloader(url, filename)
reactor.connectTCP(host, port, factory) 
```

这是一个[小 PyGtk 程序](https://gist.github.com/jdmansour/5280273)来演示这个问题。我那里只有一个虚拟进度条来显示一些动画，但在成熟的程序中问题也很明显。只要下载正在运行，滚动或在 GtkNotebook 选项卡之间切换时就会出现明显的延迟。

这是预期的，还是我做错了什么？我以前做过 GTK + Twisted 应用程序，但从未注意到这一点，但我也从未在 twisted 中传输过较大的文件（~300 MB）。也许在将控制权交还给主循环之前，twisted 选择了太大的块大小并保持忙碌太久（〜 100 毫秒？）？我应该为 GTK 和扭曲循环使用单独的线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:12:56.913

在我给你任何关于解决这个问题的建议之前，我应该注意，每当遇到这样的性能问题时，你应该分析你的应用程序，看看什么是花费最多时间的。您可以使用探查器，例如[`cProfile`](http://docs.python.org/2/library/profile.html#module-cProfile)；或者可能是[statprof](https://pypi.python.org/pypi/statprof/)，或者可能是[Geoff Greer 的这个很酷的 hack](http://geoff.greer.fm/2012/02/04/my-twisted-hack-day-project-why-is-the-reactor-pausing/)，它专门用于找出阻塞 Twisted 反应堆的原因。客观的数据总是比猜想的好，你的具体数据只能从你的具体环境中获得。

也就是说，我确实对你有一些猜想。这里的问题很可能是文件 I/O。非阻塞文件 I/O 对 Twisted 来说是个痛处，因为[如果不启动线程基本上是不可能](http://neugierig.org/software/blog/2011/12/nonblocking-disk-io.html)的，所以不清楚如何构建最终适合未来特定平台的可移植 API API。尽管如此，Twisted*应该*有一些东西可以为你抽象出线程部分。

`HTTPDownloader`，具体来说，[阻塞文件写入](http://twistedmatrix.com/trac/browser/trunk/twisted/web/client.py#L506)会导致反应器卡住并且您的 GUI 冻结。你可以覆盖`pagePart`做一些非阻塞的事情；但是，这意味着您需要对对象的属性进行流量控制[——](https://twistedmatrix.com/documents/current/core/howto/producers.html)例如告诉它——或者如果你的磁盘速度较慢，你可能最终会在内存中缓冲所有约 300MB 的文件。`HTTPPageDownloader``transport``pauseProducing`

如果您使用新的`Agent`API，您可能会发现所有这些都更容易。您仍然需要进行自己的非阻塞文件 I/O，但至少[`deliverBody`](https://twistedmatrix.com/documents/current/web/howto/client.html#auto4)API 将为您提供一个可以`transport`方便地访问的对象，`pauseProducing`您可以使用可以直接调用的方法，而不是子类化几个不同的事物并涉足几个抽象层（`ClientFactory`、、、, ) 来访问它。`HTTPClientFactory``HTTPDownloader``HTTPPageDownloader`

我意识到在 Twisted 中应该更容易管理流控制，我很抱歉设置起来有点繁琐。我知道，[我们正在努力。](http://twistedmatrix.com/trac/ticket/1956)

# angularjs - angularjs 通用 crud 控制器

> ID：15728945
> 
> 赞同：0
> 
> 时间：2013-03-31T11:32:47.977
> 
> 标签：angularjs

遵循 angularjs.org 主页中的“连接后端”示例。应用程序的每个元素最终都可以有自己的一组 ListCtrl、CreateCtrl 和 EditCtrl。

例如，对于具有 Products、SalesOrders、Users 的应用程序；我们有 ProductListCtrl、ProductCreateCtrl 和 ProductEditCtrl；然后是 SalesOrderListCtrl、SalesOrderCreateCtrl 和 SalesOrderEditCtrl；然后是 UserListCtrl、UserCreateCtrl 和 UserEditCtrl。

有没有办法创建一组通用控制器来减少所需的样板代码？但是如果元素需要额外的功能，它仍然可以扩展。

# c - 在 C 程序中更改系统区域设置

> ID：15728954
> 
> 赞同：0
> 
> 时间：2013-03-31T11:33:31.410
> 
> 标签：c, locale

我想编写一个 C 程序来更改系统的语言环境。我想为游戏创建一个语言选项。

首先，我想要一个完整的独立C程序。为此，我在 Google 上进行了一些搜索并尝试编写以下代码，但它并没有更改系统语言环境。

```
#include <stdio.h>
#include <time.h>
#include <locale.h>

int main()
{
    printf ("Locale is: %s\n", setlocale(LC_ALL,NULL));
    printf("Locale is: %s\n",setlocale(LC_ALL,"pa_IN.UTF-8"));
    return 0;
} 
```

# python - 如何在调用函数后存储输出并在下次运行中使用它

> ID：15728955
> 
> 赞同：1
> 
> 时间：2013-03-31T11:33:32.217
> 
> 标签：python, python-2.7

我在解释器中运行了下面的代码并调用了联合函数

`quick_find(10).union(3,4)`

输出：`[0, 1, 2, 4, 4, 5, 6, 7, 8, 9]`

`quick_find(10).union(0,4)`

输出：`[4, 1, 2, 3, 4, 5, 6, 7, 8, 9]`

当我第二次调用联合函数时，输出列表应该是 this
`[4, 1, 2, 4, 4, 5, 6, 7, 8, 9]`。

但相反，它给了我`[4, 1, 2, 3, 4, 5, 6, 7, 8, 9]`作为输出。我怎样才能得到我想要的输出。请建议

```
class quick_find:

    def __init__(self,n):
        self.id = [number for number in xrange(n)]

    def union(self,x,y):
        j = 0
        elements = self.id
        for i in elements:
            if i == elements[x]:
                elements[j] = elements[y]
            j = j+1

        self.id = elements
        return elements 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:53:22.507

您实际上`union()`每次都在新实例上调用该方法：

您的代码的改进版本：

```
class Quick_find:
    def __init__(self,n):
        self.id = range(n)    #just range() is enough

    def union(self,x,y):
        for i,elem in enumerate(self.id):    #use enumerate() for indexes
            if elem==x:
                self.id[i]=y

    def show(self):
        print self.id

q=Quick_find(10)       #create a instance
q.union(3,4)           #call union on that instance
q.union(0,4)           #call union on that instance
q.show() 
```

**输出：**

```
[4, 1, 2, 4, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:48:59.197

您正在通过不将其分配给任何“占位符”对象/变量来创建您请求的列表的新实例。这样做，你就可以保持你的清单完好无损。

```
myInstance = quick_find(10)
print(myInstance.union(0,4))
print(myInstance.union(3,4)) 
```

你现在实际上做的是；

```
myInstance = quick_find(10)
print(myInstance.union(0,4))

mySecondInstance = quick_find(10)
print(mySecondInstance.union(3,4)) 
```

..这显然不能按照您想要的方式工作；）

# objective-c - NSString - rangeOfString 方法忽略先前出现的字符串

> ID：15728965
> 
> 赞同：0
> 
> 时间：2013-03-31T11:34:24.203
> 
> 标签：objective-c, nsstring

从文档中，我意识到每个 rangeOfString 方法及其变体都会在字符串中找到第一次出现。因此，如果我有一串“我可以拥有或不拥有”，它将永远不会捕获“I”的第二个实例。我可以使用 NSBackwardsSearch 运算符，但它会找到最后一个但不是第一个。

我想要做的是在我的视图中使用步进器来按顺序在句子中的每个单词下划线。但是当它找到它之前遇到的同一个单词时就会出现问题，因为它会在该单词的第一次出现而不是在当前位置的第二次出现下划线。

关于如何使用 rangeOfString 忽略先前出现的字符串的任何建议？还是有另一种方法可以做到这一点？

-约哈内斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:42:13.770

使用其中一种`-rangeOfString:options:range:...`方法，在您已经找到的范围之后传递范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:47:06.613

```
NSString *str = @"I can have I or not";

NSUInteger count = 0, length = [str length];
NSRange range = NSMakeRange(0, length);
while(range.location != NSNotFound)
{
    range = [str rangeOfString: @"I" options:0 range:range];
    if(range.location != NSNotFound)
    {
        range = NSMakeRange(range.location + range.length, length - (range.location + range.length));
        NSLog(@"found %@",NSStringFromRange(range));
        count++; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:10:16.340

请注意，如果您只使用子字符串，那么您还将匹配作为其他单词一部分的子字符串，例如第二段中“arises”中的“is”。根据您的描述，这不是您想要的，但我可能误读了它。

Core Foundation 提供了`CFStringTokenizer`帮助跨不同语言环境做这些事情的方法。

下面的代码没有以任何方式优化：

```
NSString *para = @"What I am trying to do is using a Stepper in my View to underline every word in a sentence sequentially. But the problem arises when it finds the same word it has encountered before for it will underline the 1st occurrence of that word instead of the 2nd occurrence where the current location is.";

NSString *searchedWord = @"is";

NSUInteger selectedOccurrence = 2;  // From your stepper, zero-based.
NSUInteger counter            = NSNotFound;
NSRange    selectedRange      = NSMakeRange(NSNotFound, 0);

CFStringTokenizerRef tokenizer = CFStringTokenizerCreate (NULL,(CFStringRef)para,CFRangeMake(0, para.length),kCFStringTokenizerUnitWord,NULL);

CFStringTokenizerTokenType tokenType;

while ( (tokenType = CFStringTokenizerAdvanceToNextToken(tokenizer)) != kCFStringTokenizerTokenNone ) {

    CFRange tokenRange = CFStringTokenizerGetCurrentTokenRange(tokenizer);

    NSString *token = (__bridge_transfer NSString*)CFStringCreateWithSubstring(kCFAllocatorDefault, (CFStringRef)para, tokenRange);

    if ( [token compare:searchedWord options:NSCaseInsensitiveSearch] == NSOrderedSame ) {

        // An occurrence of the word is found!

        counter = counter == NSNotFound ? 0 : counter + 1;

        if ( counter == selectedOccurrence ) {

            // We found the occurrence we were looking for

            selectedRange = NSMakeRange(tokenRange.location, tokenRange.length);

            break;
        }
    }
};

// If selectedRange is different from the initial {NSNotFound,0} then we found something
if ( ! NSEqualRanges(selectedRange, NSMakeRange(NSNotFound, 0)) ) {
    // Highlight your word found at selectedRange
    NSLog(@"Found at %@", NSStringFromRange(selectedRange));
}
else {
    // Not found, clean up
    NSLog(@"An occurence number %ld not found", selectedOccurrence);
} 
```

# php - 如何在 php mysql 中使用数组变量：WHERE meta_id IN (...)

> ID：15728966
> 
> 赞同：1
> 
> 时间：2013-03-31T11:34:24.390
> 
> 标签：php, mysql, sql

现在有数组是： $arr = array(1,2,3,4,5....)

我可以使用 ... WHERE meta_id IN (1,2,3,4,5....) 来获取 mysql 数据，

但是如何将数字替换为 $arr？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:35:46.520

您可以使用`JOIN`

```
$array = array('1', '2', '3');
$arr_ID = join(',', $array);  
$sql = "SELECT * FROM tableName WHERE id IN ($arr_ID)"; 
```

*   [PHP JOIN ( *implode() 的别名*)](http://php.net/manual/en/function.join.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:37:20.043

快速回答：

```
$arr = array(1,2,3,4,5);
$string = implode(',', $arr);
$sql = sprintf('SELECT `foo` FROM `table` WHERE `meta_id` IN (%s)', $string); 
```

更长的答案：

您应该考虑在查询中使用参数，以避免 SQL 注入。在您的示例中，您确实有一个“硬编码”数组，但是如果要在`IN`子句中使用用户输入......好吧，那么您最好的选择是使用参数（[如 php.net 上所示](http://php.net/manual/en/pdo.prepare.php)）：

```
$arr = array(1, 2, 3, 4, 5);
$questionMarkArray = array();

foreach($arr as $item) {
    $questionMarkArray[] = '?';
}

$string = implode(',', $questionMarkArray);
$sql = sprintf('SELECT `foo` FROM `table` WHERE `meta_id` IN (%s)', $string);
$statement = $dbh->prepare($sql);
$statement->execute($arr);
$results = $statement->fetchAll(); 
```

这样，您将摆脱 SQL 注入之类的可能性。

此外，由于我已经有一两年没有真正写过 php，因此可能有更好的方法来创建问号（但是，手动附加到字符串是更丑陋的 imo）。

# javascript - 命名函数表达式和使用变量引用之间的区别？

> ID：15728969
> 
> 赞同：1
> 
> 时间：2013-03-31T11:34:35.410
> 
> 标签：javascript, function, closures, scopes

来自 javascript.info：

```
function makeArmy() {

  var shooters = []

  for(var i=0; i<10; i++) {

    var shooter = function shoot() {
      alert( shoot.i )
    }
    shooter.i = i

    shooters.push(shooter)   
  }

  return shooters
}

var army = makeArmy()

army[0]() // 0
army[1]() // 1 
```

有趣的部分：

```
var shooter = function shoot() {
  alert( shoot.i )
}
shooter.i = i 
```

我的问题是：为什么以下不起作用：

```
var shooter = function() {
  alert( shooter.i )
}
shooter.i = i 
```

换句话说，为什么第一个按预期工作，而第二个没有？第一个（给函数本身命名并在函数内使用它）和第二个（使用引用函数的变量）之间的实际区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:43:11.993

当函数具有名称（声明）时，它是在解析时定义的。它在范围内成​​为全球性的。

否则在运行时定义。

[http://markdaggett.com/blog/2013/02/15/functions-explained/](http://markdaggett.com/blog/2013/02/15/functions-explained/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:44:27.640

在其初始化表达式 ( ) 完成之前，您不能引用该*变量。* 如果你说`shooter``function() {...}`

```
var shooter;
shooter = function() { alert(shooter.i); } 
```

它可以正常工作，因为变量已经声明并且在函数表达式被评估的点的范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:58:38.997

只是为了补充史蒂夫所说的话。在提到函数声明时，您会听到“提升”一词。

在这个例子中，函数何时被声明并不重要，因为当你的脚本被解析时，它首先会检查所有的函数声明。

IE

```
alert(fnDeclaration());
function fnDeclaration() {
    return "It works!";
} 
```

在你做一个函数表达式的情况下，你只能在函数被赋值后才能使用它，因为函数是 JavaScript 中的值。

```
i.e.
alert(fnDeclaration());
var fnDeclaration = function() {
    return "It won't work :(";
} 
```

这是两者之间差异的一般要点。

# macos - 当 Silverlight 应用程序 (xap) 第一次在浏览器中加载时，它初始化超过 5 秒，为什么？

> ID：15728971
> 
> 赞同：0
> 
> 时间：2013-03-31T11:34:43.540
> 
> 标签：macos, silverlight, browser

在 Mac 上，当我使用 Silverlight 对象加载页面时，对象初始化需要 5 或更多（有时 10+）秒。在随后的页面重新加载时，它会立即初始化（正如人们所期望的那样）。这与浏览器缓存无关，因为即使我在页面重新加载之前完全清除缓存，Silverlight 对象仍然会立即初始化。我没有在 Windows 机器上观察到这样的事情，它只发生在 Mac 上。对象本身并没有那么大（~63kb）。虽然我应该注意到，当我在没有图像处理类（[FJCore](https://code.google.com/p/fjcore/)和[PngEncoder](http://catcode.com/pngencoder/index.html)）的情况下编译它（大小下降到 ~17kb）时，它会立即开始加载和初始化。不知道如何解决这个问题。

有任何想法吗？

# opencv - 无法编译“DisplayImage”-示例

> ID：15728977
> 
> 赞同：1
> 
> 时间：2013-03-31T11:35:27.743
> 
> 标签：opencv

听起来这是一个如此受欢迎的问题，所以请原谅我，但我搜索了解决方案，但我还没有找到。

所以......我已经通过这个脚本安装了 OpenCV - [http://idmsj.wordpress.com/2012/11/23/script-for-opencv-installation-on-ubuntu-12-10/](http://idmsj.wordpress.com/2012/11/23/script-for-opencv-installation-on-ubuntu-12-10/) - 然后我尝试编译 DisplayImage 示例（请参见此处：[http](http://docs.opencv.org/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html) ://docs.opencv.org/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html），但这不起作用。

这就是发生的事情 - 两者都遵循上面链接中给出的说明，都通过手动编译 - ：

```
$ g++ `pkg-config --cflags opencv` DisplayImage.cpp \
  `pkg-config --libs opencv` -o DisplayImage.x

/tmp/ccTXxKFT.o: In function `main':
DisplayImage.cpp:(.text+0x75): undefined reference to `cv::imread(std::string const&, int)'
DisplayImage.cpp:(.text+0x116): undefined reference to `cv::namedWindow(std::string const&, int)'
DisplayImage.cpp:(.text+0x187): undefined reference to `cv::imshow(std::string const&, cv::_InputArray const&)'
collect2: error: ld returned 1 exit status 
```

我该如何解决这个问题？

发布脚本：如果我尝试编译以下代码

```
/////////////////////////////////////////////////////
// trialcam1a.cpp
// A Simple Camera Capture Framework
// This program will connect to a camera then
// show the frames in a window
/////////////////////////////////////////////////////
#include <stdio.h>
#include <cv.h>
#include <highgui.h>

int main()
{
  IplImage *frame = NULL; //Preparing frame pointer
  int key;

  //Allocates and initializes cvCapture structure
  // for reading a video stream from the camera.
  //Index of camera is -1 since only one camera
  // connected to the computer or it does not
  // matter what camera to use.
  CvCapture *input_camera = cvCaptureFromCAM(1);

  // Line added to test if the we're
  // getting something from the camera
  if (!input_camera)
    {
      std::cout << "Error at capture";
      return 1;
    }
  else
    {
      std::cout << "Camera grasped!"
                << std::endl;
    }

  cvWaitKey(10);
  //Grabs and returns a frame from camera
  frame = cvQueryFrame(input_camera);
  #ifdef DEBUG
  int frame_index = 0;
  std::cerr << "frame #"
            << frame_index
            << " == "
            << frame << std::endl;
  #endif

  //Creates window for displaying the frames
  //Flag is reset (0) --> change window size
  // manually
  cvNamedWindow("Capturing Image ...");

  //Change to the appropriate size. In GTK, the
  // inappropriate size will return a segmentation
  // fault. I don't know why ...
  //Gets the appropriate size using cvGetCaptureProperty
  // with CV_CAP_PROP_FRAME_HEIGHT and CV_CAP_PROP_FRAME_WIDTH
  // as property_id
  cvResizeWindow("Capturing Image ...",
         (int) cvGetCaptureProperty(input_camera, CV_CAP_PROP_FRAME_HEIGHT),
         (int) cvGetCaptureProperty(input_camera, CV_CAP_PROP_FRAME_WIDTH));

  cvSaveImage("first_frame.jpg", frame);

  while(frame != NULL)
    {
      // This function vertically
      // flips the `CvArr` called
      // `frame` -what's a `cvArr`?,
      // see reference guide.
      cvFlip(frame, NULL, -1);
      //Shows a frame
      cvShowImage("Capturing Image ...", frame);

      //Checks if ESC is pressed and gives a delay
      // so that the frame can be displayed properly
      key = cvWaitKey(10);
      if(key == 27)
      break;
      //Grabs and returns the next frame
      frame = cvQueryFrame(input_camera);
      #ifdef DEBUG
      ++frame_index;
      std::cerr << "frame #"
                << frame_index
                << " == "
                << frame << std::endl;
      #endif
    }

  //Release cvCapture structure
  cvReleaseCapture(&input_camera);

  //Destroy the window
  cvDestroyWindow("Capturing Image ...");

  return 0;
} 
```

通过键入

```
g++ trialcam1a.cpp -o trialcam1a.x `pkg-config --cflags --libs opencv` 
```

我可以生成一个工作可执行文件。

知道我该如何解决这个问题吗？

先感谢您，

朱塞佩

编辑：我正在使用 Ubuntu 12.10 的 64 位机器。

# python - 在python中递归调用实例方法

> ID：15728984
> 
> 赞同：1
> 
> 时间：2013-03-31T11:37:12.940
> 
> 标签：python, recursion, python-2.7

我试图在字典中调用对象的实例方法，这些对象本身都来自同一个类。但是我有一个无限递归，我认为'self'不会改变并一直引用第一个对象。

```
class Foo():
    name = 'name'
    foo_objects = {}
    def print_name(self):
        output = self.name
        for key, value in self.foo_objects.items():
            output += value.print_name()
        return output 
```

我这样使用它：

```
def main():
    foo = Foo()
    foo.foo_objects['key'] = Foo()
    print foo.print_name()

if __name__ == '__main__':
    sys.exit(main()) 
```

我得到这个错误：

```
 ...etc...
    output += value.print_name()
  File "C:\dev\python\projects\test\test.py", line 41, in print_name
    output += value.print_name()
  File "C:\dev\python\projects\test\test.py", line 41, in print_name
    output += value.print_name()
RuntimeError: maximum recursion depth exceeded 
```

怎么了？我对python递归不了解什么？怎么可能呢？感谢您的帮助，请原谅我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T11:51:21.710

您已将 name 和 foo_objects 定义为类变量，而不是实例变量——即它们当前在 Foo 类的所有实例之间共享。

改变：

```
class Foo():
  name = 'name'
  foo_objects = {}
... 
```

到：

```
class Foo():
  def __init__(self):
    self.name = 'name'
    self.foo_objects = {}
... 
```

并且它们将成为实例变量，因为我怀疑您希望它们成为。

# mysql - 使用 MySQL 返回数据作为第二次查询的输入？

> ID：15728989
> 
> 赞同：0
> 
> 时间：2013-03-31T11:37:35.187
> 
> 标签：mysql

我正在尝试构建各种“新闻提要”，但为了做到这一点，我在编写查询时遇到了麻烦！

简而言之，如果用户 A 进入他们的主页并关注用户 B、C、D - 我试图让他们看到来自用户 B、C、D 的内容。

假设有 2 个表：`posts, connections`

其中表`posts`有很多相关的列，表`connections`有列`id,user,followed`

在（可怕的）伪代码中，我试图做这样的事情：

```
SELECT * FROM posts WHERE author=(SELECT followed FROM connections WHERE user='A') 
```

它会发布 B、C、D 的东西（也就是 A 跟随的人）

任何人都知道如何将其编写为实际的 MySQL 查询吗？我读过的东西似乎已经很混乱了，我真的不明白我将如何去做！

非常感谢你！任何帮助是极大的赞赏！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:38:58.630

您可以使用`IN`

```
SELECT * 
FROM   posts 
WHERE  author IN (SELECT followed FROM connections WHERE user = 'A') 
```

或`JOIN`（*我更喜欢*）

```
SELECT  DISTINCT a.*
FROM    posts a
        INNER JOIN connections b
            ON a.author = b.followed
WHERE   b.user = 'A' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:43:16.173

使用连接：

```
SELECT p.*
FROM connections c
JOIN posts p
  ON c.followed = p.author
WHERE user='A' 
```

请注意，该`connections`表首先列出，因此`user`可以使用 where 子句驱动的索引。

# android - 如何播放用户选择的 mp3 文件？

> ID：15728991
> 
> 赞同：-2
> 
> 时间：2013-03-31T11:37:50.510
> 
> 标签：android

我正在尝试播放用户选择的音乐文件，存储在数据库中的音乐文件的名称取决于我将播放 res/raw 文件夹中的音乐文件。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:45:56.007

> 我尝试了媒体播放器，它可以工作，但我必须输入 R.raw.filename

这不是真的。该类`MediaPlayer`提供[了 setDataSource 方法的几种变体](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.lang.String%29)。例如，您可以将其传递给`String`指定文件路径或`FileDescriptor`指定`FileInputStream`.

`test.mp3`可以通过以下方式将数据源设置为外部存储（通常是 SD 卡）上命名的文件：

`mediaPlayer.setDataSource(android.os.Environment.getExternalStorageDirectory().getAbsolutePath()+"/test.mp3");`

# c# - 使用公共 IP 地址在 Android App 和 C# 服务器之间进行通信

> ID：15728993
> 
> 赞同：0
> 
> 时间：2013-03-31T11:38:07.823
> 
> 标签：c#, android, tcp, ip

我有一个在 C# 应用程序上运行的服务器。还有一个 Android 应用程序上的客户端，这两个只有在同一个网络上并且只能使用私有地址 192.168.1 时才能通信。*我如何使它适用于公共 IP 地址。如在，Android 应用程序也可以从家庭网络外部进行通信

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:15:12.483

您几乎永远无法通过 Internet 使用 TCP 将手机直接连接到计算机的原因是，您的一台或两台设备通常位于一个或多个防火墙、网关、路由器、代理或[NAT](http://en.wikipedia.org/wiki/Network_address_translation)之后。

设备将只能启动与具有公共 IP 地址的侦听服务器的**连接**。例如，尽管您的家用计算机很可能落后于上述之一，但您可以打开[http://www.stackoverflow.com](http://www.stackoverflow.com)，因为 StackOverflow 网络服务器具有公共 IP。

您的手机也是如此。在大多数情况下，您手机的 ISP（移动提供商）不会为您的手机分配公共 IP，即使这样做，它也可能会阻止或过滤大多数数据包，从而很难将手机用作侦听服务器。

**你有什么选择？**

**端口转发**。将您家的接入路由器转发到您的 PC 是一个很好的测试选择。（如果您希望与数千个客户一起运行某种服务，它会变得更加复杂。

使用端口转发，您首先需要确保您可以配置您的路由器（例如，我在我的建筑物中无权访问它）。如果您确实有权访问路由器的配置，请设置端口转发（例如，访问路由器上端口 12345 的任何内容都将转发到 PC 上的 12345）。接下来，确定路由器的公网 IP ( [http://www.wimi.com](http://www.wimi.com) )。最后，尝试使用路由器的 IP 从手机连接。请记住，您的路由器的公共 IP 地址很可能不是静态的，并且可能随时更改。

**使用中间人**。一个常见的选择是使用公开可用的服务器来保持两者的联系。使用 Web 服务器和常规 HTTP 或 HTTPS 连接是最安全的（即最不可能在此过程中被阻止）。因此，例如：

*   电话给中间人：我有什么消息吗？
*   中间人回答：不，对不起。
*   PC 对中间人：说“嗨！” 请给电话。
*   中间人回答：好的，我会的。
*   电话给中间人：我有什么消息吗？
*   中间人回答：是的，PC 说“嗨！”

请注意，每个连接都是由 PC 或电话发起的。中间人可以回答查询，但它不能自己启动连接（因为电话和 PC 都无法访问）。

虽然我会说这可能是从一个到另一个获取消息的最简单方法，但有相当多的开销并且延迟不会很大。当然，如果您不介意弄脏自己的手，或者至少您的家用路由器是可配置的，那么当然还有其他选择。查看[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)和[SSH 隧道](http://en.wikipedia.org/wiki/Tunneling_protocol)。

**获取静态公网 IP**。IPv4 复杂且昂贵，但它可以解决您的大部分问题，特别是如果您正在考虑运行某种服务。