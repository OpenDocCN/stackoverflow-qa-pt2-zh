# StackOverflow 问答 15169000-15169999

# python - South 在尝试迁移时引发 ValueError

> ID：15169001
> 
> 赞同：3
> 
> 时间：2013-03-02T00:06:50.380
> 
> 标签：python, mysql, django, django-south

我会直截了当：South 提出了这个例外：

```
Microsoft Windows [versão 6.1.7601]
Copyright (c) 2009 Microsoft Corporation. Todos os direitos reservados.

C:\Users\Bassut\PycharmProjects\Logos>manage.py migrate api
Running migrations for api:
 - Migrating forwards to 0001_initial.
 > api:0001_initial
FailedDryRun:  ! Error found during dry run of '0001_initial'! Aborting.
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\south-0.7.5-py2.7.egg\south\migration\migr
ators.py", line 175, in _run_migration
    migration_function()
  File "C:\Python27\lib\site-packages\south-0.7.5-py2.7.egg\south\migration\migr
ators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "C:\Users\Bassut\PycharmProjects\Logos\migrations\0001_initial.py", line
44, in forwards
    ('course', self.gf('django.db.models.fields.related.ForeignKey')(default=Fal
se, to=orm['api.Course'])),
  File "C:\Python27\lib\site-packages\south-0.7.5-py2.7.egg\south\db\generic.py"
, line 44, in _cache_clear
    return func(self, table, *args, **opts)
  File "C:\Python27\lib\site-packages\south-0.7.5-py2.7.egg\south\db\generic.py"
, line 343, in create_table
    for field_name, field in fields
  File "C:\Python27\lib\site-packages\south-0.7.5-py2.7.egg\south\db\generic.py"
, line 684, in column_sql
    default = field.get_db_prep_save(default, connection=self._get_connection())

  File "C:\Python27\lib\site-packages\django\db\models\fields\related.py", line
1047, in get_db_prep_save
    connection=connection)
  File "C:\Python27\lib\site-packages\django\db\models\fields\__init__.py", line
 304, in get_db_prep_save
    prepared=False)
  File "C:\Python27\lib\site-packages\django\db\models\fields\__init__.py", line
 549, in get_db_prep_value
    value = connection.ops.validate_autopk_value(value)
  File "C:\Python27\lib\site-packages\django\db\backends\mysql\base.py", line 28
8, in validate_autopk_value
    raise ValueError('The database backend does not accept 0 as a '
ValueError: The database backend does not accept 0 as a value for AutoField.

C:\Users\Bassut\PycharmProjects\Logos> 
```

模型.py：

```
# -*- coding: utf-8 -*-
from django.db import models
from django.contrib.auth.models import User
import datetime

class College(models.Model):
    acronym = models.CharField(max_length=10)
    full_name = models.CharField(max_length=100)

    class Meta():
        db_table = "College"

    def __unicode__(self):
        return self.full_name

class Course(models.Model):
    title = models.CharField(max_length=50)

    class Meta():
        db_table = "Course"

    def __unicode__(self):
        return self.title

class BasicUser(models.Model):
    user = models.ForeignKey(User)
    birthday = models.DateField()

    class Meta():
        db_table = 'BasicUser'

    def __unicode__(self):
        return (self.user.first_name + ' ' + self.user.last_name)

class Administrator(BasicUser):
    def __unicode__(self):
        return self.user.first_name
    class Meta():
        db_table = "Administrator"

class Student(BasicUser):
    college = models.ForeignKey(College, default=False)
    course = models.ForeignKey(Course, default=False)

    def __unicode__(self):
        return self.user.first_name

    class Meta():
        db_table = "Student"

class Subject(models.Model):
    title = models.CharField(max_length=50)

    class Meta():
        db_table = "Subject"

    def __unicode__(self):
        return self.title

class Division(models.Model):
    title = models.CharField(max_length=50)
    subject = models.ForeignKey(Subject)

    class Meta():
        db_table = "Division"

    def __unicode__(self):
        return self.title

class Topic(models.Model):
    division = models.ForeignKey(Division)
    title = models.CharField(max_length=50)

    class Meta():
        db_table = "Topic"

    def __unicode__(self):
        return self.title
    def get_subject(self):
        return self.division.subject

class Material(models.Model):
    topic = models.ForeignKey(Topic)

    added_by = models.ForeignKey(Administrator, verbose_name=u'Who added this material', default=False)
    title = models.CharField(max_length=50)
    text = models.TextField(max_length=5000)

    class Meta():
        db_table = "Material"

    def __unicode__(self):
        return self.title

    def set_subject(self, value):
        self.topic.division.subject = value

    def set_division(self, value):
        self.topic.division = value

class QuestionOption(models.Model):
    description = models.CharField(max_length=5000, verbose_name=u'The question option itself')

    def __unicode__(self):
        return self.description

    class Meta():
        db_table = 'question_option'

class Question(models.Model):
    topic = models.ForeignKey(Topic, verbose_name=u'What that question is about')
    added_by = models.ForeignKey(Administrator, verbose_name=u'Who added this question', default=False)
    difficulty = models.FloatField(default=0)
    type = models.CharField(max_length=30, verbose_name=u'Tipo da questão', default='multichoices')
    college = models.ForeignKey(College, verbose_name=u'From what college is the question')
    year = models.SmallIntegerField(default=datetime.date.today().year)
    text = models.TextField(max_length=30000)
    options = models.ManyToManyField(QuestionOption, related_name='question_alternatives', db_table=u'question_alternatives',
        verbose_name=u'Question alternatives')
    right_one = models.ForeignKey(QuestionOption, verbose_name=u'Right option for this question', default=False)

    class Meta():
        db_table='question'

    def __unicode__(self):
        return self.title

    def mount_question(self):
        return '(' + self.college.acronym + '-' + str(self.year) + ') ' + self.text 
```

此外，0001_initial.py（控制台说了一些关于它的内容）：

```
# -*- coding: utf-8 -*-
import datetime
from south.db import db
from south.v2 import SchemaMigration
from django.db import models

class Migration(SchemaMigration):

    def forwards(self, orm):
        # Adding model 'College'
        db.create_table('College', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('acronym', self.gf('django.db.models.fields.CharField')(max_length=10)),
            ('full_name', self.gf('django.db.models.fields.CharField')(max_length=100)),
        ))
        db.send_create_signal(u'api', ['College'])

        # Adding model 'Course'
        db.create_table('Course', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('title', self.gf('django.db.models.fields.CharField')(max_length=50)),
        ))
        db.send_create_signal(u'api', ['Course'])

        # Adding model 'BasicUser'
        db.create_table('BasicUser', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('user', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['auth.User'])),
            ('birthday', self.gf('django.db.models.fields.DateField')()),
        ))
        db.send_create_signal(u'api', ['BasicUser'])

        # Adding model 'Administrator'
        db.create_table('Administrator', (
            (u'basicuser_ptr', self.gf('django.db.models.fields.related.OneToOneField')(to=orm['api.BasicUser'], unique=True, primary_key=True)),
        ))
        db.send_create_signal(u'api', ['Administrator'])

        # Adding model 'Student'
        db.create_table('Student', (
            (u'basicuser_ptr', self.gf('django.db.models.fields.related.OneToOneField')(to=orm['api.BasicUser'], unique=True, primary_key=True)),
            ('college', self.gf('django.db.models.fields.related.ForeignKey')(default=False, to=orm['api.College'])),
            ('course', self.gf('django.db.models.fields.related.ForeignKey')(default=False, to=orm['api.Course'])),
        ))
        db.send_create_signal(u'api', ['Student'])

        # Adding model 'Subject'
        db.create_table('Subject', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('title', self.gf('django.db.models.fields.CharField')(max_length=50)),
        ))
        db.send_create_signal(u'api', ['Subject'])

        # Adding model 'Division'
        db.create_table('Division', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('title', self.gf('django.db.models.fields.CharField')(max_length=50)),
            ('subject', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['api.Subject'])),
        ))
        db.send_create_signal(u'api', ['Division'])

        # Adding model 'Topic'
        db.create_table('Topic', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('division', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['api.Division'])),
            ('title', self.gf('django.db.models.fields.CharField')(max_length=50)),
        ))
        db.send_create_signal(u'api', ['Topic'])

        # Adding model 'Material'
        db.create_table('Material', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('topic', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['api.Topic'])),
            ('added_by', self.gf('django.db.models.fields.related.ForeignKey')(default=False, to=orm['api.Administrator'])),
            ('title', self.gf('django.db.models.fields.CharField')(max_length=50)),
            ('text', self.gf('django.db.models.fields.TextField')(max_length=5000)),
        ))
        db.send_create_signal(u'api', ['Material'])

        # Adding model 'QuestionOption'
        db.create_table('question_option', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('description', self.gf('django.db.models.fields.CharField')(max_length=5000)),
        ))
        db.send_create_signal(u'api', ['QuestionOption'])

        # Adding model 'Question'
        db.create_table('question', (
            (u'id', self.gf('django.db.models.fields.AutoField')(primary_key=True)),
            ('topic', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['api.Topic'])),
            ('added_by', self.gf('django.db.models.fields.related.ForeignKey')(default=False, to=orm['api.Administrator'])),
            ('difficulty', self.gf('django.db.models.fields.FloatField')(default=0)),
            ('type', self.gf('django.db.models.fields.CharField')(default='multichoices', max_length=30)),
            ('college', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['api.College'])),
            ('year', self.gf('django.db.models.fields.SmallIntegerField')(default=2013)),
            ('text', self.gf('django.db.models.fields.TextField')(max_length=30000)),
            ('right_one', self.gf('django.db.models.fields.related.ForeignKey')(default=False, to=orm['api.QuestionOption'])),
        ))
        db.send_create_signal(u'api', ['Question'])

        # Adding M2M table for field options on 'Question'
        db.create_table(u'question_alternatives', (
            ('id', models.AutoField(verbose_name='ID', primary_key=True, auto_created=True)),
            ('question', models.ForeignKey(orm[u'api.question'], null=False)),
            ('questionoption', models.ForeignKey(orm[u'api.questionoption'], null=False))
        ))
        db.create_unique(u'question_alternatives', ['question_id', 'questionoption_id'])

    def backwards(self, orm):
        # Deleting model 'College'
        db.delete_table('College')

        # Deleting model 'Course'
        db.delete_table('Course')

        # Deleting model 'BasicUser'
        db.delete_table('BasicUser')

        # Deleting model 'Administrator'
        db.delete_table('Administrator')

        # Deleting model 'Student'
        db.delete_table('Student')

        # Deleting model 'Subject'
        db.delete_table('Subject')

        # Deleting model 'Division'
        db.delete_table('Division')

        # Deleting model 'Topic'
        db.delete_table('Topic')

        # Deleting model 'Material'
        db.delete_table('Material')

        # Deleting model 'QuestionOption'
        db.delete_table('question_option')

        # Deleting model 'Question'
        db.delete_table('question')

        # Removing M2M table for field options on 'Question'
        db.delete_table('question_alternatives')

    models = {
        u'api.administrator': {
            'Meta': {'object_name': 'Administrator', 'db_table': "'Administrator'", '_ormbases': [u'api.BasicUser']},
            u'basicuser_ptr': ('django.db.models.fields.related.OneToOneField', [], {'to': u"orm['api.BasicUser']", 'unique': 'True', 'primary_key': 'True'})
        },
        u'api.basicuser': {
            'Meta': {'object_name': 'BasicUser', 'db_table': "'BasicUser'"},
            'birthday': ('django.db.models.fields.DateField', [], {}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'user': ('django.db.models.fields.related.ForeignKey', [], {'to': u"orm['auth.User']"})
        },
        u'api.college': {
            'Meta': {'object_name': 'College', 'db_table': "'College'"},
            'acronym': ('django.db.models.fields.CharField', [], {'max_length': '10'}),
            'full_name': ('django.db.models.fields.CharField', [], {'max_length': '100'}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'})
        },
        u'api.course': {
            'Meta': {'object_name': 'Course', 'db_table': "'Course'"},
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'title': ('django.db.models.fields.CharField', [], {'max_length': '50'})
        },
        u'api.division': {
            'Meta': {'object_name': 'Division', 'db_table': "'Division'"},
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'subject': ('django.db.models.fields.related.ForeignKey', [], {'to': u"orm['api.Subject']"}),
            'title': ('django.db.models.fields.CharField', [], {'max_length': '50'})
        },
        u'api.material': {
            'Meta': {'object_name': 'Material', 'db_table': "'Material'"},
            'added_by': ('django.db.models.fields.related.ForeignKey', [], {'default': 'False', 'to': u"orm['api.Administrator']"}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'text': ('django.db.models.fields.TextField', [], {'max_length': '5000'}),
            'title': ('django.db.models.fields.CharField', [], {'max_length': '50'}),
            'topic': ('django.db.models.fields.related.ForeignKey', [], {'to': u"orm['api.Topic']"})
        },
        u'api.question': {
            'Meta': {'object_name': 'Question', 'db_table': "'question'"},
            'added_by': ('django.db.models.fields.related.ForeignKey', [], {'default': 'False', 'to': u"orm['api.Administrator']"}),
            'college': ('django.db.models.fields.related.ForeignKey', [], {'to': u"orm['api.College']"}),
            'difficulty': ('django.db.models.fields.FloatField', [], {'default': '0'}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'options': ('django.db.models.fields.related.ManyToManyField', [], {'related_name': "'question_alternatives'", 'symmetrical': 'False', 'db_table': "u'question_alternatives'", 'to': u"orm['api.QuestionOption']"}),
            'right_one': ('django.db.models.fields.related.ForeignKey', [], {'default': 'False', 'to': u"orm['api.QuestionOption']"}),
            'text': ('django.db.models.fields.TextField', [], {'max_length': '30000'}),
            'topic': ('django.db.models.fields.related.ForeignKey', [], {'to': u"orm['api.Topic']"}),
            'type': ('django.db.models.fields.CharField', [], {'default': "'multichoices'", 'max_length': '30'}),
            'year': ('django.db.models.fields.SmallIntegerField', [], {'default': '2013'})
        },
        u'api.questionoption': {
            'Meta': {'object_name': 'QuestionOption', 'db_table': "'question_option'"},
            'description': ('django.db.models.fields.CharField', [], {'max_length': '5000'}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'})
        },
        u'api.student': {
            'Meta': {'object_name': 'Student', 'db_table': "'Student'", '_ormbases': [u'api.BasicUser']},
            u'basicuser_ptr': ('django.db.models.fields.related.OneToOneField', [], {'to': u"orm['api.BasicUser']", 'unique': 'True', 'primary_key': 'True'}),
            'college': ('django.db.models.fields.related.ForeignKey', [], {'default': 'False', 'to': u"orm['api.College']"}),
            'course': ('django.db.models.fields.related.ForeignKey', [], {'default': 'False', 'to': u"orm['api.Course']"})
        },
        u'api.subject': {
            'Meta': {'object_name': 'Subject', 'db_table': "'Subject'"},
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'title': ('django.db.models.fields.CharField', [], {'max_length': '50'})
        },
        u'api.topic': {
            'Meta': {'object_name': 'Topic', 'db_table': "'Topic'"},
            'division': ('django.db.models.fields.related.ForeignKey', [], {'to': u"orm['api.Division']"}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'title': ('django.db.models.fields.CharField', [], {'max_length': '50'})
        },
        u'auth.group': {
            'Meta': {'object_name': 'Group'},
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'name': ('django.db.models.fields.CharField', [], {'unique': 'True', 'max_length': '80'}),
            'permissions': ('django.db.models.fields.related.ManyToManyField', [], {'to': u"orm['auth.Permission']", 'symmetrical': 'False', 'blank': 'True'})
        },
        u'auth.permission': {
            'Meta': {'ordering': "(u'content_type__app_label', u'content_type__model', u'codename')", 'unique_together': "((u'content_type', u'codename'),)", 'object_name': 'Permission'},
            'codename': ('django.db.models.fields.CharField', [], {'max_length': '100'}),
            'content_type': ('django.db.models.fields.related.ForeignKey', [], {'to': u"orm['contenttypes.ContentType']"}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'name': ('django.db.models.fields.CharField', [], {'max_length': '50'})
        },
        u'auth.user': {
            'Meta': {'object_name': 'User'},
            'date_joined': ('django.db.models.fields.DateTimeField', [], {'default': 'datetime.datetime.now'}),
            'email': ('django.db.models.fields.EmailField', [], {'max_length': '75', 'blank': 'True'}),
            'first_name': ('django.db.models.fields.CharField', [], {'max_length': '30', 'blank': 'True'}),
            'groups': ('django.db.models.fields.related.ManyToManyField', [], {'to': u"orm['auth.Group']", 'symmetrical': 'False', 'blank': 'True'}),
            u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
            'is_active': ('django.db.models.fields.BooleanField', [], {'default': 'True'}),
            'is_staff': ('django.db.models.fields.BooleanField', [], {'default': 'False'}),
            'is_superuser': ('django.db.models.fields.BooleanField', [], {'default': 'False'}),
        'last_login': ('django.db.models.fields.DateTimeField', [], {'default': 'datetime.datetime.now'}),
        'last_name': ('django.db.models.fields.CharField', [], {'max_length': '30', 'blank': 'True'}),
        'password': ('django.db.models.fields.CharField', [], {'max_length': '128'}),
        'user_permissions': ('django.db.models.fields.related.ManyToManyField', [], {'to': u"orm['auth.Permission']", 'symmetrical': 'False', 'blank': 'True'}),
        'username': ('django.db.models.fields.CharField', [], {'unique': 'True', 'max_length': '30'})
    },
    u'contenttypes.contenttype': {
        'Meta': {'ordering': "('name',)", 'unique_together': "(('app_label', 'model'),)", 'object_name': 'ContentType', 'db_table': "'django_content_type'"},
        'app_label': ('django.db.models.fields.CharField', [], {'max_length': '100'}),
        u'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
        'model': ('django.db.models.fields.CharField', [], {'max_length': '100'}),
        'name': ('django.db.models.fields.CharField', [], {'max_length': '100'})
    }
}

complete_apps = ['api'] 
```

请告诉我发生了什么，以便我可以解决它。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:07:43.177

问题是`ForeignKey`您定义的 s`Student`已经`default=False`设置。`False`是`ForeignKey`s 的无效值。只需删除那些，你应该很好。

# ibm-mobilefirst - 使用 Worklight 的 LTPA 基于表单的身份验证未提供方法句柄失败

> ID：15169002
> 
> 赞同：0
> 
> 时间：2013-03-02T00:07:01.487
> 
> 标签：ibm-mobilefirst

Worklight Developer Edition Studio 5.0.5.1 (5.0.5.20130115-0926) Worklight Consumer Edition 版本 5.0.5.1

第一个问题是使用与 WL Consumer Edition Server 兼容的 WL Developer Edition 开发的应用程序。

第二个问题：我正在使用模块 21 基于表单的身份验证并修改了身份验证处理程序中的领域，并将引用 LTPA 领域的客户安全测试添加到身份验证配置 xml（installedApp 文件夹中的文件）。

当我们访问应用程序中需要安全性的方法时，我没有得到处理失败的方法。

03-01 18:53:32.870：E/Web 控制台（870）：未捕获的类型错误：对象 # 在 file:///data/data/com.FormBasedAuthentication/files/www/default/wlclient/ 处没有方法“handleFailure” js/worklight.js:1482

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:56:38.403

是的，使用 Developer Edition 开发的应用程序与 Consumer Edition 兼容。

# jquery - JQuery在div恢复正常状态时启用点击

> ID：15169003
> 
> 赞同：1
> 
> 时间：2013-03-02T00:07:04.423
> 
> 标签：jquery

当单击的 div 处于活动状态时，有没有办法禁用单击其他 div？

我正在使用**JQuery .toggle()**函数。

**左侧两个 div 的**JQuery ：****

 **```
$(document).ready(function() {
    $('.move_box_left_up').toggle(function() {
        $(this).css({"z-index":"20"});
        $(this).animate({"height": "529px", "width": "460px"}, "slow");
        $(this).find('img').animate({"width": "460px"}, "slow");
    },function() {
        $(this).find('img').animate({"width": "220px"}, "slow");
        $(this).animate({"height": "163px", "width": "220px"}, "slow");
        setTimeout( function(){$('.move_box_left_up').css({"z-index":"10"});},500);
    })
}); 
```

**两个右 div 的JQuery**：

```
$(document).ready(function() {
    $('.move_box_right_up').toggle(function() {
        $(this).css({"z-index":"20"});
        $(this).animate({"height": "529px", "width": "460px", "left":"-=240px"},"slow");
        $(this).find('img').animate({"width": "460px"}, "slow");
    },function() {
        $(this).find('img').animate({"width": "220px"}, "slow");
        $(this).animate({"height": "163px", "width": "220px","left":"+=240px"}, "slow");
        setTimeout( function(){$('.move_box_right_up').css({"z-index":"10"});},500);
    })
}); 
```

[JSF](http://jsfiddle.net/RrX4y/)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:44:40.877

也许有一个条件并设置一个像属性一样的焦点是合适的：

```
if ($('div[selected=selected]').length < 1) {
    $(this).attr("selected", "true"); 
```

编辑：更新的代码

[http://jsfiddle.net/cjmwZ/1](http://jsfiddle.net/cjmwZ/1)**

# python - 区分何时“直接”运行脚本或使用 Python 可执行文件

> ID：15169004
> 
> 赞同：1
> 
> 时间：2013-03-02T00:07:06.607
> 
> 标签：python, boolean, executable, execution, self

Python 程序如何确定它是否在 Unix 系统上作为可执行文件执行而不是作为脚本调用？

```
./program.py 
```

代替

```
python ./program.py 
```

'/program' in`sys.argv[0]`无法区分示例情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:14:27.817

一个有点 hackish 的解决方案是在 shebang 行中添加一个环境变量来表明这一点`program.py`：

```
#!/usr/bin/env noscript=True python
import os
if os.getenv('noscript'):
    print("called as executable")
else: 
    print("called as script") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:24:31.490

真的没有区别。如果您设置了可执行位，操作系统最终会完全按照您在命令行上所做的操作——它确实是`python script.py`. 唯一的区别是操作系统查看第一行`#!`以精确确定要运行的 python 版本。

# javascript - pjax 点击事件双触发

> ID：15169005
> 
> 赞同：1
> 
> 时间：2013-03-02T00:07:16.183
> 
> 标签：javascript, jquery, ajax, onclick, pjax

当我将切换事件切换到淡入和淡出时，我该如何解决 pjax 的这个问题，当我单击该元素时，它会淡入然后淡出，单击一下？

pjax 调用：

```
$.pjax.defaults.timeout = 3000;
$(document).pjax('a', '#main_wrapper'); 
```

点击事件：

```
$('body').on('click', '.element_class', function() {
    ...
}); 
```

在这里检查：[链接](http://eventill.com/) 单击顶部标题处的“日历”链接（使用pjax加载页面），然后单击“+”进行过滤器..

这发生在 pjax 和 wiselinks 上。

# macos - 基于 Mac 的 Windows 平台上的 Clickonce 应用程序错误

> ID：15169007
> 
> 赞同：0
> 
> 时间：2013-03-02T00:07:28.413
> 
> 标签：macos, clickonce, hostname

我在 Visual Studio 2008 中开发了我的应用程序，并将其部署在许多带有 Windows paltform 的计算机上。它工作正常，但有一本 mac book 上面有虚拟 Windows 7。我的 clickonce 应用程序在安装时第一次在这台机器上运行良好。但是当用户再次启动它时关闭它后，它会给出以下错误。我已经用谷歌搜索了它，但找不到正确的答案。任何人都可以帮忙吗？

```
PLATFORM VERSION INFO
    Windows             : 6.1.7601.65536 (Win32NT)
    Common Language Runtime     : 4.0.30319.296
    System.Deployment.dll       : 4.0.30319.1 (RTMRel.030319-0100)
    clr.dll             : 4.0.30319.296 (RTMGDR.030319-2900)
    dfdll.dll           : 4.0.30319.1 (RTMRel.030319-0100)

ERROR SUMMARY
    Below is a summary of the errors, details of these errors are listed later in the log.
    * Activation of \\.psf\Home\Desktop\MyApplication.appref-ms| resulted in exception. Following failure messages were detected:
        + Invalid URI: The hostname could not be parsed.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
    No transaction error was detected.

WARNINGS
    There were no warnings during this operation.

OPERATION PROGRESS STATUS
    No phase information is available.

ERROR DETAILS
    Following errors were detected during this operation.
    * [01/03/2013 10:58:47] System.UriFormatException
        - Invalid URI: The hostname could not be parsed.
        - Source: System
        - Stack trace:
            at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
            at System.Uri..ctor(String uriString)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)

COMPONENT STORE TRANSACTION DETAILS
    No transaction information is available. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:48:50.700

错误中解释了答案：“\.psf\Home\Desktop\MyApplication.appref-ms| 导致异常”。它无法将其解析为 URL 或网络共享。

那么你是如何安装你的应用程序的呢？您是将其托管在网络服务器或文件共享上，还是将其放在 cd 上并将其复制到机器上并安装它？项目属性的“发布”窗口中的安装 URL 是什么？

# ajax - 对于具有 AJAX 加载部分并使用 Backbone.history.navigate 的页面，单击“后退”按钮会更改 URL，但不会更改页面

> ID：15169008
> 
> 赞同：1
> 
> 时间：2013-03-02T00:07:42.280
> 
> 标签：ajax, backbone.js

我正在使用一个骨干路由器，`Backbone.history.start({pushState: true, root: "/"});`并且我正在通过 AJAX 加载页面的部分，并使用`Backbone.history.navigate(url, true);`它来确保浏览器显示的 url 指向相应的部分。例如，我使用相对 url“/username/profile”加载一个页面，然后通过单击一个选项卡并触发 AJAX 请求来加载该页面上的一个部分（“Favorite Books”），然后将 url 更改为“/用户名/最喜欢的书”。问题是，如果我从通过 ajax 加载的部分返回（使用后退按钮）到上一部分，即使 url 发生更改，页面内容也不会更改。我看过以前的帖子谈论[Ajax 浏览器历史](https://stackoverflow.com/a/1732401/1362009)，但我想知道在 Backbone 的上下文中我应该怎么做？我找不到问题的明确解释以及如何解决它。准确地说，当点击要加载ajax的部分的选项卡时，我应该在触发的函数中添加什么？我的目标是在使用“后退”按钮时更改 URL 和页面（返回到 AJAX 请求之前的状态）。我目前正在执行以下操作：

```
RenderSection: function(event) {
    var data = '';
    var url = $(event.currentTarget).attr("href");
    $.post(url, data, function(data){          
        $(".ajax_section").html(data);
        var protocol = this.protocol + '//';
        // Ensure the protocol is not part of URL, meaning its relative.
        if (url && url.slice(protocol.length) !== protocol) {
            Backbone.history.navigate(url, true);
        }
    });
    return false;
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T16:02:13.820

原来我没有正确使用 Backbone。这是我最终使用的，效果很好！

在我的主干视图中，我创建了 2 个方法：第一个在单击带有 class="ajax_enabled" 的链接（锚点）时触发，而第二个由路由器操作中包含的主干事件触发器触发。Backbone View 方法如下所示：

```
events: {
    'click a.ajax_enabled': 'NavigateToUrl'
}
initialize: function() {
    EventAggregator.on("render:route", this.RenderAjax, this);
},
NavigateToUrl: function(event) {
    var url = $(event.currentTarget).attr("href");
    var protocol = this.protocol + '//';
    // Ensure the protocol is not part of URL, meaning its relative.
    if (url && url.slice(protocol.length) !== protocol) {
        Backbone.history.navigate(url, true);
    }
    return false;
},
RenderAjax: function(route) {
    var data = '';
    var url = window.location.pathname + window.location.search;
    $.post(url, data, function(data){
        $(".ajax_section").html(data);
    });
} 
```

My Backbone Router 处理来自的调用`Backbone.history.navigate(url, true);`并触发事件以通过默认操作更新视图，如下所示：

```
 window.EventAggregator = _.extend({}, Backbone.Events);

  var Router = Backbone.Router.extend({
    initialize: function(options) {
        var router = this;
        Backbone.history.start({pushState: true, root: "/", silent: true});
    },
    routes: {
        '' : 'defaultAction',
        '*route': 'defaultAction'
    },
    defaultAction: function(route) {
        if(typeof(route)==='undefined') {
            route = '';
        }
        EventAggregator.trigger("render:route", route);
    }
  });

  return Router; 
```

作为参考，我发现[这个其他答案很有帮助](https://stackoverflow.com/a/10496808)，关于使用事件从路由器的视图中触发方法。

# sql - 自定义帖子类型和多个自定义字段的 SQL 查询

> ID：15169010
> 
> 赞同：6
> 
> 时间：2013-03-02T00:07:49.053
> 
> 标签：sql, wordpress

我正在使用[WP Data Tables](http://themes.karaliki.ru/wpdatatables/custom-demo-list-wordpress-pages/)从 SQL DB 创建一个表。在 wordpress 后端中，要使用的示例代码如下所示：

```
SELECT post_id, post_date
FROM wp_posts
WHERE post_type =  'custom_post_type'
AND post_status =  'publish' 
```

我试图从帖子元中获取自定义字段值。这是我到目前为止...

```
SELECT post_id, post_date
FROM wp_posts
WHERE post_type =  'custom_post_type'
AND post_status =  'publish'
AND SELECT custom_field_key_1, custom_field_key_2, custom_field_key_3
FROM wp_postmeta
WHERE post_id = post_id 
```

更新：

我发现需要 p.ID 而不是 post_id 并且我需要搜索 meta_key。就像是...

```
SELECT p.post_title, 
       p.post_date,
       pm.meta_key = 'custom_field_key'
FROM wp_posts p 
INNER JOIN wp_postmeta pm 
ON p.ID = pm.post_id
WHERE p.post_type = 'custom_post_type'
AND p.post_status = 'publish' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T00:21:32.647

使用`INNER JOIN`：

```
SELECT p.post_id, 
       p.post_date, 
       pm.custom_field_key_1, 
       pm.custom_field_key_2, 
       pm.custom_field_key_3
FROM wp_posts p 
   INNER JOIN wp_postmeta pm 
       ON p.post_id = pm.post_id
WHERE p.post_type = 'custom_post_type'
   AND p.post_status = 'publish' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:22:18.023

你可以试试这个。

```
SELECT p.post_id, p.post_date,
    pm.custom_field_key_1, pm.custom_field_key_2, pm.custom_field_key_3
FROM wp_posts p
JOIN wp_postmeta pm ON p.post_id = pm.post_id
WHERE p.post_type =  'custom_post_type'
AND p.post_status =  'publish' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:18:53.367

假设支持标准 SQL，您将需要这样的东西（未经测试）：

```
SELECT w.post_id, w.post_date, m.custom_field_key_1, m.custom_field_key_2, m.custom_field_key_3
FROM wp_posts w, wp_postmeta m
WHERE post_type =  'custom_post_type' AND post_status =  'publish'
AND w.post.id = m.post.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T21:09:38.000

好的，即使您更新了答案。我举了你的例子，我解决了这个问题：

```
SELECT p.ID, 
       p.post_title, 
       pm.meta_value as 'value1', 
       pma.meta_value as 'value2'

FROM  wp_posts p 
      INNER JOIN wp_postmeta AS pm  ON pm.post_id  = p.ID
      INNER JOIN wp_postmeta AS pma ON pma.post_id = p.ID

WHERE
      pma.meta_key = 'custom_field_key_1' AND
      pm.meta_key = 'custom_field_key_2' AND

      p.post_type = 'your_post_type' AND 
      p.post_status = 'publish' 
```

所以在这里我使用别名`AS`作为托管在同一个表中的值，仅`INNER JOIN`此`wp_postmeta`而已`post_id` 。

参考资料： [多个内连接同一张表](https://stackoverflow.com/questions/9370437/multiple-inner-join-from-the-same-table)

通过这样做，您将获得一个包含帖子和您选择的自定义字段的数组：

```
array(1) {
    [0]=> object(stdClass)#341 (4) {
          ["ID"]=>    string(1) "1123"
          ["post_title"]=>  string(15) "Your post title"
          ["custom_field_key_1"]=> string(12) "Your value 1 "
          ["custom_field_key_2"]=> string(29) "Your value 2"
} 
```

您可以根据需要添加任意数量的别名和元密钥。希望这有帮助！

# python - 从 LLVM JIT 调用 Python 代码

> ID：15169015
> 
> 赞同：6
> 
> 时间：2013-03-02T00:08:20.220
> 
> 标签：python, llvm, llvm-py

我在 python 中编写了一个语言词法分析器/解析器/编译器，稍后应该在 LLVM JIT-VM（使用`llvm-py`）中运行。前两个步骤现在非常简单，但是（即使我还没有启动编译任务）我看到了一个问题，当我的代码想要调用 Python-Code（通常），或者与 Python 词法分析器交互时/parser/compiler（特别）分别。我主要担心的是，代码应该能够在运行时将其他代码动态加载到 VM 中，因此它必须从 VM 内触发 Python 中的整个词法分析器/解析器/编译器链。

首先：这是否可能，或者VM一旦启动就“不可变”？

如果是，我目前看到 3 种可能的解决方案（我愿意接受其他建议）

*   “突破”虚拟机并使其可以直接调用主进程的 Python 函数（可能通过将其注册为 LLVM 函数，以某种方式重定向到主进程）。我对此一无所知，无论如何我不确定这是否是个好主意（安全等）。
*   将运行时（在运行时静态或动态）编译成 LLVM-Assembly/-IR。这要求 IR 代码能够修改它在其中运行的 VM
*   将运行时（静态）编译到库中并将其直接加载到 VM 中。同样，它必须能够向它运行的 VM 添加功能（等）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-24T02:32:14.693

就像 Eli 说的那样，并没有阻止你调用 Python C-API。当您从 LLVM JIT 内部调用外部函数时，它实际上只`dlopen()`在进程空间上使用，因此如果您从 llvmpy 内部运行，您已经可以访问所有 Python 解释器符号，您甚至可以与调用的活动解释器交互ExecutionEngine，或者如果需要，您可以旋转一个新的 Python 解释器。

为了让您开始，请使用我们的评估器创建一个新的 C 文件。

```
#include <Python.h>

void python_eval(const char* s)
{
    PyCodeObject* code = (PyCodeObject*) Py_CompileString(s, "example", Py_file_input);

    PyObject* main_module = PyImport_AddModule("__main__");
    PyObject* global_dict = PyModule_GetDict(main_module);
    PyObject* local_dict = PyDict_New();
    PyObject* obj = PyEval_EvalCode(code, global_dict, local_dict);

    PyObject* result = PyObject_Str(obj);

    // Print the result if you want.
    // PyObject_Print(result, stdout, 0);
} 
```

这是一个小 Makefile 来编译它：

```
CC = gcc
LPYTHON = $(shell python-config --includes)
CFLAGS = -shared -fPIC -lpthread $(LPYTHON)

.PHONY: all clean

all:
    $(CC) $(CFLAGS) cbits.c -o cbits.so

clean:
    -rm cbits.c 
```

然后我们从 LLVM 的常用样板开始，但使用 ctypes 将`cbits.so`共享库的共享对象加载到全局进程空间中，以便我们拥有`python_eval`符号。然后只需创建一个带有函数的简单 LLVM 模块，使用 ctypes 分配一个带有一些 Python 源的字符串，并将指针传递给 ExecutionEngine 运行我们模块中的 JIT 函数，然后将 Python 源传递给 C 函数调用 Python C-API，然后返回到 LLVM JIT。

```
import llvm.core as lc
import llvm.ee as le

import ctypes
import inspect

ctypes._dlopen('./cbits.so', ctypes.RTLD_GLOBAL)

pointer = lc.Type.pointer

i32 = lc.Type.int(32)
i64 = lc.Type.int(64)

char_type  = lc.Type.int(8)
string_type = pointer(char_type)

zero = lc.Constant.int(i64, 0)

def build():
    mod = lc.Module.new('call python')
    evalfn = lc.Function.new(mod,
        lc.Type.function(lc.Type.void(),
        [string_type], False), "python_eval")

    funty = lc.Type.function(lc.Type.void(), [string_type])

    fn = lc.Function.new(mod, funty, "call")
    fn_arg0 = fn.args[0]
    fn_arg0.name = "input"

    block = fn.append_basic_block("entry")
    builder = lc.Builder.new(block)

    builder.call(evalfn, [fn_arg0])
    builder.ret_void()

    return fn, mod

def run(fn, mod, buf):

    tm = le.TargetMachine.new(features='', cm=le.CM_JITDEFAULT)
    eb = le.EngineBuilder.new(mod)
    engine = eb.create(tm)

    ptr = ctypes.cast(buf, ctypes.c_voidp)
    ax = le.GenericValue.pointer(ptr.value)

    print 'IR'.center(80, '=')
    print mod

    mod.verify()
    print 'Assembly'.center(80, '=')
    print mod.to_native_assembly()

    print 'Result'.center(80, '=')
    engine.run_function(fn, [ax])

if __name__ == '__main__':
    # If you want to evaluate the source of an existing function
    # source_str = inspect.getsource(mypyfn)

    # If you want to pass a source string
    source_str = "print 'Hello from Python C-API inside of LLVM!'"

    buf = ctypes.create_string_buffer(source_str)
    fn, mod = build()
    run(fn, mod, buf) 
```

您应该得到以下输出：

```
=======================================IR=======================================
; ModuleID = 'call python'

declare void @python_eval(i8*)

define void @call(i8* %input) {
entry:
  call void @python_eval(i8* %input)
  ret void
}
=====================================Result=====================================
Hello from Python C-API inside of LLVM! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T13:28:57.983

您可以从 LLVM JIT 代码中调用外部 C 函数。你还需要什么？

这些外部函数将在执行过程中找到，这意味着如果将 Python 链接到 VM，则可以调用 Python 的 C API 函数。

“VM”可能没有你想象的那么神奇 :-) 最后，它只是在运行时发出到缓冲区并从那里执行的机器代码。如果此代码可以访问其运行的进程中的其他符号，则它可以执行该进程中任何其他代码可以执行的所有操作。

# objective-c - 问题包括 iOS 上的 Objective C 的 C++ 文件

> ID：15169019
> 
> 赞同：1
> 
> 时间：2013-03-02T00:08:51.300
> 
> 标签：objective-c, xcode, objective-c++

我试图从 AudioCore 中包含几个不同的项目，特别是 AQRecorder。但是，这确实依赖于 c++ 代码。通常这不是问题，因为我只是将视图控制器重命名为扩展名为 .mm，一切都很好。但在这种情况下，我对 AQRecorder.h 的依赖间接地转到了我的 main.m，这给我带来了极大的痛苦。

我尝试了几种不同的方法，包括以下内容：

1) 更改所有 .m 和 .cpp 文件 -> .mm 文件

一切都完美编译，但是，它无法部署到我的 iOS 设备或模拟器，因为在部署到设备时出现此错误：

> “选择具有受支持架构的目标，以便在此设备上运行。”

我正在使用 XCode 4.6，我的有效架构是 armv7 和 armv7s（我玩过这些但没有运气）。

2）尝试使用不透明指针，例如本指南中的指针：

[http://philjordan.eu/article/mixing-objective-c-c++-and-objective-c++](http://philjordan.eu/article/mixing-objective-c-c++-and-objective-c++)

我仍然遇到无法编译的相同问题。

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_AQWrappedRecorder", referenced from:
      objc-class-ref in RTPPacketSender.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的依赖项如下：

AQRecorder.h -> RTPPacketSender.h -> ActiveConversationViewController.h -> ConversationViewController.h -> AppDelegate.h -> main.m

其他人可以推荐任何尝试的东西。我确实花了一整天的时间调试这个问题，但没有运气。

文斯

# mongodb - Mongodb：查找至少一个数组元素匹配的文档？

> ID：15169020
> 
> 赞同：5
> 
> 时间：2013-03-02T00:08:55.600
> 
> 标签：mongodb, mongodb-query

我有一个具有以下结构的文档：

```
[{
    "items": [
        {
            "sent_to_lab": 123,
            "received_from_lab": 456,
        },
        {
            "sent_to_lab": 123,
        },
    ]
}
... more orders ...
] 
```

我想获取*至少一项*符合以下条件的所有订单：

```
'$and': [
    {'items.sent_to_lab': {'$exists': True}},
    {'items.received_from_lab': {'$exists': False}},
] 
```

所以在这种情况下，我想返回上述项目，因为`items`数组中至少有一个元素符合我的条件。

我怎么能在mongo中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T01:58:01.890

您需要使用 $elemMatch 运算符：

```
db.collection.find({items:
                     {$elemMatch:{
                           sent_to_lab:{$exists:true},
                           received_from_lab:{$exists:false}}
}) 
```

这是查询 $elemMatch - 如果您只想取回与条件匹配的项目（而不是整个文档与整个数组），那么您可以类似地使用投影 $elemMatch 运算符。

# python - 有没有办法使用 Python 访问 OS X wi-fi 数据？（例如信号强度）

> ID：15169022
> 
> 赞同：9
> 
> 时间：2013-03-02T00:09:20.673
> 
> 标签：python, macos, networking, wifi

我只是好奇是否可以使用任何 Python 工具来轮询 OS X 中的 wi-fi 信号强度。我的大部分搜索只是为 Linux 提供 Python 工具，但没有为 OS X 提供。

如果没有，还有其他方法可以通过编程方式获取此类数据吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T03:24:35.620

[这个问题](https://stackoverflow.com/questions/12136817/how-do-you-use-pyobjc-to-turn-off-and-on-the-wireless-interfaces-of-a-mac)的答案描述了如何加载 CoreWLAN 框架。完成此操作后，您可以使用 CWInterface 类查找 RSSI 以及其他统计信息：

```
import objc
objc.loadBundle('CoreWLAN',
                bundle_path='/System/Library/Frameworks/CoreWLAN.framework',
                module_globals=globals())

for iname in CWInterface.interfaceNames():
  interface = CWInterface.interfaceWithName_(iname)
  print """
Interface:      %s
SSID:           %s
Transmit Rate:  %s
Transmit Power: %s
RSSI:           %s""" % (iname, interface.ssid(), interface.transmitRate(),
                         interface.transmitPower(), interface.rssi()) 
```

有关可用属性的完整列表，请参阅[CWInterface 文档](http://developer.apple.com/library/mac/#documentation/CoreWLAN/Reference/CWInterface_reference/translated_content/CWInterface.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T18:31:24.330

对于 mac，有一个名为 airport 的命令行工具。您可以手动调整任何 wi-fi 设置、网卡设置、网络故障排除、更改连接上使用的安全类型、将数据包捕获到 pcap 文件中、加入和离开网络、忘记 wifi 网络、优先路由器和网络、查看信号强度和干扰等。

它通常在这里-`/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport`

你可以输入这个来寻求帮助

```
airport
airport -h 
```

一起使用这个和子进程，你应该能够在 python 中完成大部分这些事情

# php - 不替换已过滤内容的 Wordfilter

> ID：15169024
> 
> 赞同：1
> 
> 时间：2013-03-02T00:09:32.967
> 
> 标签：php

我在 MySQL 中有*wordfilter*表，我使用 PHP 从中获取所有行并在字符串中替换它们。

```
$string = "test string";
$result = mysqli_query($conn, "SELECT * FROM wordfilter;");
while ($row = mysqli_fetch_assoc($result))
{
    $string = str_replace($row['search'], $row['replace'], $string);
} 
```

它将像这样工作：

```
Iteration number: (row from table) - result string
0: "tt string e"
1: ("tt", "<b>test</b>") - "<b>test</b> string e"
2: ("e", "f") - "<b>tfst</b> string f"
etc. 
```

我希望它有这个结果`"<b>test</b> string f"`（“e”不替换为“f” `<b>test</b>`，因为它不存在于输入字符串中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:35:14.597

像这样构建一个搜索替换对数组：

```
$reps = array();
while($row = mysqli_fetch_assoc($result)) $reps[$row['search']] = $row['replace']; 
```

然后使用[`strtr`](http://php.net/strtr);的魔法

```
$string = strtr($string,$reps); 
```

# scala - .eq 导致警告。我该如何摆脱它？

> ID：15169025
> 
> 赞同：2
> 
> 时间：2013-03-02T00:09:33.703
> 
> 标签：scala, jdo, scala-compiler

我在 Scala 中使用 JDO 和 DataNucleus 类型安全查询语言。因此，我的代码如下所示：

```
val id: Long = // something
val cand: QDbObject = QDbObject.candidate()
pm.query[DbObject].filter(cand.id.eq(id))... 
```

简而言之，这将对字段等于的所有`DbObject`s运行查询。不幸的是，我收到以下警告：`id``id`

```
NumericExpression[Long] and Long are unrelated: they will most likely 
never compare equal 
```

很明显，Scala 编译器认为这`NumericExpression[Long]`是使用 的内置定义`eq()`，类似于`==`，但由于这是来自 Java，因此该`eq()`方法与 Scala 的方法完全无关`eq()`。

有没有办法摆脱警告？显然，这会发生很多，我担心这些非警告会隐藏真正的警告。

**更新**(2013-06-29)

这已在 Scala 2.10.2 中修复。警告消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:22:09.817

我更担心是否`eq`会实际调用该方法而不是 Scala 的`eq`! 但它是。不过，我认为你无法摆脱它。如果您使用的是 Scala 2.10，则可以使用不同的方法调用创建一个隐式值类`eq`——实际上是同一件事，但警告将仅限于一个文件。

# zend-framework - zend 框架 phpunit 引导的正确方法

> ID：15169029
> 
> 赞同：0
> 
> 时间：2013-03-02T00:10:02.807
> 
> 标签：zend-framework, phpunit, bootstrapping

我打电话

```
$this->application->bootstrap()->run(); 
```

从我的测试设置功能内部，没有输出。你应该`run()`在测试环境中调用吗？

我的测试有效，但前端控制器插件从未执行（这对我的应用程序来说是必需的）。Putting`->run()`执行插件，但 phpunit 只是停止并且没有输出。

我有工作测试，但我需要前端控制器插件才能在测试环境中执行。Bootstrap 执行，但插件不执行。当他们通过`->run()`时，没有输出

有什么建议么？

编辑：添加`setup()`示例

```
require_once realpath(__DIR__.'/../../').'/TestBackendConfiguration.php';

abstract class Controllers_Backend_BaseControllerTest extends Zend_Test_PHPUnit_ControllerTestCase {

    protected $config;
    protected $application;
    protected $users;
    protected static $iterations = 0;

    public function setUp() {
        $this->bootstrap = array($this, 'appBootstrap');
        parent::setUp();
        $this->configureUsers();
        $this->configureACL($this->users);
    }

    public function appBootstrap() {
        $this->config = new Zend_Config_Ini(CORE_PATH . '/configs/common.ini', APPLICATION_ENV, true);
        $this->config->merge(new Zend_Config_Ini(CORE_PATH . '/configs/backend.ini', APPLICATION_ENV));
        $this->config->merge(new Zend_Config_Ini(CORE_PATH . '/configs/application.ini', APPLICATION_ENV));

        // Reset bootstraps
        $this->config->bootstrap->path = CORE_PATH . '/backend/Bootstrap.php';
        $this->config->resources->frontController->controllerDirectory = CORE_PATH . '/backend/controllers';
        $this->config->resources->frontController->actionHelperPaths->Frontend_Controller_Action_Helper = CORE_PATH . '/backend/controllers/Action/Helper';
        $this->config->resources->frontController->baseUrl = "/admin";
        $this->config->resources->layout->layoutPath = CORE_PATH . '/backend/layouts/scripts';

        $this->application = new Zend_Application( APPLICATION_ENV, $this->config );

        $this->application->bootstrap()->run(); 
     }
} 
```

调整的原因`$this->config`是因为我有前端和后端相关的测试，它们需要不同的配置。他们有自己的`Configuration.php`脚本，它们都声明`APPLICATION_PATH`，因此第二次运行的测试无法重新定义此 const，并且应用程序无法正确引导。

现在，我主要担心的是我的插件没有在测试环境中调度，这会破坏我的应用程序，因为我有数据添加到我需要访问的注册表中，但显然不存在。想法？

添加`->run()`调度插件，但我的测试没有输出。我的后端控制器测试都扩展了这个负责设置后端测试环境的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-23T15:24:22.383

我最近也遇到类似的问题，终于找到了解决办法。我希望它对某人有用。

测试环境中资源的问题是 bootstrap 对象在方法中被分配为 FrontController 参数`Zend_Application_Bootstrap_Bootstrap::run()`，但此方法从未在测试环境中执行。这就是通过引导程序获取任何资源时出错的原因（我假设您`Zend_Controller_Front::getInstance()->getParam('bootstrap')`在代码中的某处使用）。

帮助我的解决方法是在单元测试中手动将引导参数设置为 FrontController，如下所示：

```
public function setUp() {
    $this->bootstrap = array($this, 'appBootstrap');
    parent::setUp();
}

public function appBootstrap()
{
    $this->application = new Zend_Application(APPLICATION_ENV, APPLICATION_PATH . '/configs/application.ini');
    $this->application->bootstrap();
    // set bootstrap param
    $bootstrap = $this->application->getBootstrap();
    $front = $bootstrap->getResource('FrontController');
    $front->setParam('bootstrap', $bootstrap);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:56:37.137

setup 方法实际上不应引导应用程序，只需创建类以允许测试执行此操作。所以我认为你需要做的就是删除这一行：

```
$this->application->bootstrap()->run(); 
```

为了安全起见，我还将`parent::setUp();`在您的设置方法中移动该行，以便在函数结束时调用它（在您的两个配置方法之后）。如果这些方法依赖于那里的引导程序，则将它们移到`appBootstrap`函数中。

# vba - Outlook 规则在将邮件移动到文件夹之前触发 VBA 代码

> ID：15169031
> 
> 赞同：2
> 
> 时间：2013-03-02T00:10:45.797
> 
> 标签：vba, outlook, rule

我最初运行此代码以保存传入电子邮件中的附件。我的代码将遍历整个文件夹，对于那里的任何附件，它将保存附件并将其从电子邮件中删除。我有一个规则，只要我想要的邮件进来，就会触发宏。但是，当邮件进来时，附件永远不会保存下来。没有错误，手动调试工作得很好。此外，通过单击“立即运行规则”按钮立即运行规则也可以正常工作。因此，在尝试了一百万种不同的方法来保存附件之后，我开始变得非常恼火，并设置了一个测试来看看该死的前景在做什么。所以这就是问题所在。

这是我设置的前景规则：

邮件从 xxxxx 到达后应用此规则，将其移动到 Macrotest 文件夹并运行 Project1.ThisOutlookSession.sayhi

我发现虽然 Outlook 所做的是在将邮件传输到我的宏查找的文件夹之前触发脚本。因此，它永远不会找到新文件。显然，当它完成时，邮件会进入文件夹，所以当我手动运行它时它工作得很好。那么我怎样才能修复这条规则的顺序呢？

```
 Public Sub sayhi(item As Outlook.MailItem)

 Dim objNS As Outlook.NameSpace
 Dim olfolder As Outlook.MAPIFolder
 Dim msg As Outlook.MailItem

 Set objNS = Application.GetNamespace("MAPI")
 Set olfolder = objNS.GetDefaultFolder(olFolderInbox)
 Set olsubfolder = olfolder.Folders("Macrotest")
 Set oapp = CreateObject("Shell.Application")

      For Each myitem In olsubfolder.Items

            MsgBox "hellothere"

            myitem.UnRead = False

      Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T17:01:07.733

该代码处理您传入的项目（**项目**为 Outlook.MailItem）

```
Public Sub sayhi(item As Outlook.MailItem)

    MsgBox "item Subject: " & item.Subject

End Sub 
```

处理“项目”的附件，而不是文件夹中的所有邮件项目。

# php - echo 语句中的尾随引号中断输出

> ID：15169037
> 
> 赞同：1
> 
> 时间：2013-03-02T00:11:54.037
> 
> 标签：php, echo

我讨厌问这么简单的问题，但我完全被难住了。我正在尝试输出

```
<input type='radio' name='state' value='VALUE' /> OTHERVALUE 
```

这是荒谬的简单，但有些东西正在打破。我的声明，

```
echo '<input type="radio" name="state" value="' . $abbr . '" /> ' . $state; 
```

导致停止输出的错误。在调试时我还尝试了以下变体，所有这些看起来都应该对我有用：

```
echo "<input type='radio' name='state' value='";
echo '<input type=\'radio\' name=\'state\' value=\'';
echo "<input type=\"radio\" name=\"state\" value=\""; 
```

在每种情况下，删除单引号/双引号之前的最后一个 '、"、\' 或 \" 即可解决问题。我可以解决这个问题，但我现在已经花了 20 多分钟来调试它。这是什么原因造成的？我对 ' 和 " 如何工作的知识有差距吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:15:55.823

缺少结尾的双引号和单引号。

`echo '<input type="radio" name="state" value=""'`

`echo "<input type='radio' name='state' value=''";`

`echo '<input type=\'radio\' name=\'state\' value=\'\'';`

`echo "<input type=\"radio\" name=\"state\" value=\"\"";`

如果你想要一个里面的值：

`echo '<input type="radio" name="state" value="' . $value . '">';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:18:07.973

如果你输出不完整的标签，浏览器会在之后贪婪地抓取所有东西，把它们当作属性，直到它最终找到一个`>`.

以后，使用 View Source 查看脚本的原始输出，您会更清楚地看到这些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:18:06.127

尝试`echo "<input type='radio' name='state' value='$variable'";`

或者

尝试`echo '<input type="radio" name="state" value="' . $variable . '"';`

如果以双引号 (ie `echo " hello to 'this' $variable ";`) 开头，则可以在这些引号中包含变量，也可以包含单引号

如果以单引号开头，则不能包含内联变量，但可以包含双引号：`echo 'hello to "this" $variable';`将输出`hello to "this" $variable`.

看起来您知道这一点，但您可能只是忘记在这里和那里关闭报价。

```
echo '<input type="radio" name="state" value="' 
```

将输出`<input type="radio" name="state" value="`通知丢失的关闭引号和关闭标记！

# visual-studio - OpenGL 不适用于 QT5

> ID：15169040
> 
> 赞同：1
> 
> 时间：2013-03-02T00:12:02.563
> 
> 标签：visual-studio, qt, opengl, visual-studio-2012, qt5

[我从http://qt-project.org/doc/qt-5.0/qtopengl/hellogl.html](http://qt-project.org/doc/qt-5.0/qtopengl/hellogl.html)下载了示例 当我尝试在 VS2012 中编译项目时，编译器输出以下内容：

1>qtlogo.cpp(104): 错误 C3861: 'glVertexPointer': 找不到标识符

1>qtlogo.cpp(105): 错误 C3861: 'glNormalPointer': 找不到标识符

1>qtlogo.cpp(178): 错误 C3861: 'glPushMatrix': 找不到标识符

1>qtlogo.cpp(179): 错误 C3861: 'glMultMatrixf': 找不到标识符

等等

但一切都在 VS2010 中使用 Qt4。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:57:27.687

您是否获得了预构建的 MSVC Qt5？如果是这样，则此版本仅支持 OpenGL ES，如您在以下线程中所见：[http://qt-project.org/forums/viewthread/22821](http://qt-project.org/forums/viewthread/22821) [http://qt-project.org/forums/viewthread/23499](http://qt-project.org/forums/viewthread/23499) 您可以通过传统的 OpenGL 支持构建您自己的 Qt5：-opengl 桌面

# javascript - 在 .each()` 范围之外使用 jQuery `.attr()` - 可能吗？

> ID：15169047
> 
> 赞同：1
> 
> 时间：2013-03-02T00:12:45.073
> 
> 标签：javascript, jquery, html

我想将具有 class 属性的第一个元素更改`.viewer`为其`src`属性的值`data-src`。明显的代码不起作用：

```
$(".viewer").first().show().attr('src', $(this).attr('data-src')); 
```

通过阅读有关 SO 的其他问题，我发现您必须这样做：

```
$(".viewer").first().show().each(function(){
    $(this).attr('src', $(this).attr('data-src'));
}); 
```

它确实有效，我也理解为什么（`this`不指代范围之外的元素） - 但是在你已经使用过之后`.each`运行它似乎很奇怪。`.each()``.first()`

有没有更简洁的方法来编写上述代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:15:57.977

将要重用的数据存储在变量中。

```
var viewer = $(".viewer").first().show();
viewer.attr('src', viewer.data('src')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T00:16:11.713

你总是可以只使用一个变量：

```
var elem = $(".viewer").first();
    elem.show().attr('src', elem.attr('data-src')); 
```

# hive - thrift 中出现“意外的 T_GLOBAL，期待 T_STRING”错误

> ID：15169050
> 
> 赞同：-1
> 
> 时间：2013-03-02T00:13:04.113
> 
> 标签：hive, thrift

我正在尝试对读取 Hive 表的 php 进行基本测试。但是，经过几次尝试让它工作后，我遇到了以下错误：

> PHP Parse 错误：语法错误，意外的 T_GLOBAL，在第 20 行的 /usr/lib/hive/lib/packages/php/hive_metastore/hive_metastore_types.php 中需要 T_STRING

我试图找到一种方法来解决它，过去几个小时没有运气。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:29:11.517

“Unexpected T_GLOBAL”意味着您有`global $somevar;`一个函数上下文之外的语句。如果您试图访问一个打算`include`在另一个文件的函数中调用的文件，或者如果您试图使变量像全局变量一样，则可能会发生这种情况。

删除违规行，错误应该消失 - 只要确保它不会破坏其他任何东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:23:41.413

这通常是一个语法错误，所以如果没有任何代码我们很难提供帮助。如果您可以发布该文件的代码，包括第 20 行，就像 Mike 指出的那样，我们会尽力而为 :)。

# android - 无法运行我的 android 应用程序

> ID：15169054
> 
> 赞同：-2
> 
> 时间：2013-03-02T00:13:40.670
> 
> 标签：android

我正在尝试在服务器和客户端之间建立一个聊天应用程序，但是由于这行代码，该应用程序无法运行： message = (String) input.readObject(); 因为起初， inputStream 是 null ！任何人都可以帮忙吗？这是我的代码

```
package com.example.test;

import java.io.BufferedReader;
import java.io.EOFException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OptionalDataException;
import java.net.Socket;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    private Button send;
    private Button connect;
    private EditText userText;
    private TextView chatWindow;

    private String serverIP;
    private ObjectOutputStream output;
    private ObjectInputStream input;
    private String message = "";
    private Socket connection;

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
          }

        serverIP = "192.168.1.4";
        //userText.setEnabled(false);
        send = (Button)findViewById(R.id.button1);
        connect = (Button)findViewById(R.id.button2);
        chatWindow =(TextView)findViewById(R.id.textView1); 
        userText = (EditText)findViewById(R.id.editText1); 
        userText.setHint("Enter your message here");

        connect.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                //connect to the server
                try{
                    connectToServer();
                    setupStreams();

                }catch(EOFException eofException){
                    showMessage("\n client terminated the connection");
                }catch(IOException ioException){
                    ioException.printStackTrace();
                }
            }
        });

        send.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                String message = userText.getText().toString();
                sendMessage(message);
                userText.setText("");   

            }
        });

        while(true){
            try{
                message = (String) input.readObject(); 
                showMessage("\n" + message + " NULL ");
                chatWindow.refreshDrawableState(); 
            }catch(ClassNotFoundException classNotFoundException){
                showMessage("\n I don't know that object type");
            }
            catch(NullPointerException e){
                e.printStackTrace();
            }
            catch (OptionalDataException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    } // end of onCreate

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    //connect to the server
        private void connectToServer() throws IOException {
            showMessage("Attempting connection... \n");
            connection = new Socket( "192.168.1.4", 6789);
            showMessage("Connected to " + connection.getInetAddress().getHostName() );
        }

        //setup streams to send and receive messages
        private void setupStreams() throws IOException{
            output = new ObjectOutputStream(connection.getOutputStream());
            output.flush();
            input = new ObjectInputStream(connection.getInputStream());
            showMessage("\n Your streams are now good to go! \n ");
        }

        //whileChatting with server
        private void whileChatting() throws IOException{

                try{
                    message = (String) input.readObject(); 
                    showMessage("\n" + message + " NULL ");
                    chatWindow.refreshDrawableState(); 
                }catch(ClassNotFoundException classNotFoundException){
                    showMessage("\n I don't know that object type");
                }

        }

        //close the streams and sockets
        private void closeCrap(){
            showMessage("\n closing crap down");
            ableToType(false);
            try{
                output.close();
                input.close();
                connection.close();
            }catch(IOException ioException){
                ioException.printStackTrace();
            }
        }

        // gives user permission to type into the text box
        private void ableToType(final boolean tof){
            userText.setEnabled(tof);
        }

        // send messages to server
        private void sendMessage(String message){
            try{
                output.writeObject("CLIENT - " + message);
                output.flush();
                showMessage("\nCLIENT - " + message);
            }catch(IOException ioException){
                chatWindow.append("\n somethine messed up sending message!");
            }
        }

        //change/update chatWindow
        private void showMessage(final String m){
            chatWindow.append(m);
            chatWindow.refreshDrawableState();
        }

} // end of class MainActivity 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:45:53.437

您的代码绝对没有遵循任何好的 UI 准则：您正在主 (UI) 线程上进行网络操作，*并且*在`onCreate()`. 如果没有任何崩溃，Android 实际上应该提供强制关闭您的应用程序。现在，您面临的问题的*可能*原因是：`null`

`setupStreams()`仅在单击按钮时调用。但是，您的`while (true)`循环位于`onCreate()`. 这意味着一旦创建并设置了点击侦听器，循环就会运行，尝试从中读取`input`并失败，因为`setupStreams()`尚未调用。

所以请不要取消 StrictMode - 它可以*帮助*您，从事件驱动的角度来看您的代码（“一旦 X 发生，然后执行 Y”）。并且还摆脱了主（UI）线程中的循环。循环对于控制台窗口来说很好，但是对于 UI（它们有自己复杂的生命周期），你不能在不冻结很多东西的情况下做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:34:15.237

在 中执行所有网络任务`doInBackground()`，`AsyncTask`然后在 中更新您的`UI`变量`onPostExecute()`。就像是

```
 public class TalkToServer extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);

    }

    @Override
    protected String doInBackground(String... params) {
    //do your work here
        return something;
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
           // do something with data here-display it or send to mainactivity
} 
```

这是关于**[AsyncTask的文档](http://developer.android.com/reference/android/os/AsyncTask.html)**

要考虑的另一件事是您`message`在不同的地方使用该变量，这可能会给您带来问题。看起来您已将其定义为成员变量，然后将其定义为其他方法的局部变量。您不想以这种方式重复使用相同的变量名。不要`String message`在同一个中定义多次`Activity`

# string - 将值与 bash 脚本中的多个范围进行比较，并根据该匹配设置其他变量

> ID：15169055
> 
> 赞同：1
> 
> 时间：2013-03-02T00:13:44.807
> 
> 标签：string, bash

我正在 bash 中设置一个脚本，其中一部分接受一个 ip，并基于该 ip 确定其他网络设置。这是我所拥有的

```
if[ 1 <= $net <= 5]
then
    network=10.1.0.0
    netmask=255.255.248.0
    gateway=10.1.0.1
elif[16 <= $net <= 23]
then
    network=10.1.16.0
    netmask=255.255.248.0
    gateway=10.1.16.1

elif[24 <= $net <= 31]
then
    network=10.1.24.0
    netmask=255.255.248.0
    gateway=10.1.24.1
elif[32 <= $net <= 39]
then
    network=10.1.32.0
    netmask=255.255.248.0
    gateway=10.1.32.1 
```

........（这样持续了一段时间。

有没有更好的方法来使用案例或其他东西来做到这一点？

我也不确定我是否正确地执行了 IF 语句。

提前致谢。

编辑：我想我忘了提到 IP 地址来自“读取”输入，然后将其剪切以获取值。

IE 用户输入 10.1.40.207 希望然后通过管道进行剪切以获得 $net=40

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:23:46.263

直接设置值：

```
network=10.1.$(($net/8*8)).0
netmask=255.255.248.0
gateway=10.1.$(($net/8*8)).1 
```

我已经在此处发布了关于如何通过 4 个步骤将您的代码简化为上述代码的步骤说明：http: [//paste.ubuntu.com/5585785/](http://paste.ubuntu.com/5585785/)。

“魔法”在数学中。一点数学可以避免任何条件的需要。不`case`，不`if`，不！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:50:45.997

如果可以直接计算值（如其他答案所示），则可以消除大量脚本；但是，您可能仍需要检查有效/无效输入；但这也可以使用扩展的 if/elif/else/fi 来完成。

但要回答这个问题，这里有一个 if/else 可以检查数字范围（我认为“案例”不会简化问题）：

```
#!/bin/bash

arg=$1

if  ((  1 <= arg && arg <= 5 )) ; then
  echo "from 1-5: $arg"
elif (( 16 <= arg && arg <= 23 )) ; then
  echo "from 16-23: : $arg"
elif (( 24 <= arg && arg <= 31 )) ; then
  echo "from 24-31: : $arg"
else
  echo "invalid : $arg"
fi 
```

要点是`((...))`用于算术评估，而不是`[..]`; 它等效于`let`并返回真/假。

样本输出：

```
$ ./scr 1
from 1-5: 1

$ ./scr 7
invalid : 7

$ ./scr 23
from 16-24: : 23 
```

# python - 在返回之前将实例包装在子类的构造函数中

> ID：15169057
> 
> 赞同：0
> 
> 时间：2013-03-02T00:13:47.413
> 
> 标签：python, class, constructor, factory, partial

我希望标题不会太错误或误导；我不完全确定这种东西的名称是什么。

基本上，我一直在使用字典（以及其中的一些子类：`defaultdict`和`OrderedDict`，例如）做很多工作，并且正在尝试制作一些辅助函数，它们将为我完成一些提升工作，同时仍然在多个范围内操作不同类型的字典。理想情况下，我想快速（即进行一些优化）并且当然要优雅地做到这一点。这是我现在拥有的示例：

```
def filter_dict(old_dict, keep_keys): 
    return {k:v for k,v in old_dict.items() if k in keep_keys} 
```

这很好用，但如果`old_dict`不是基本字典，我就会失去它。

好的，所以我可以做一些事情，比如`type(old_dict)({.....})`将新创建的字典包装在 old_dict 的类的构造函数中，但这仍然不适用于 defaultdicts，它将返回默认值的函数*作为第一个参数。*如果它是第二个参数，我可以将一些`*args`或一些东西传递给构造函数，但这会使事情复杂化。

我想我的问题是：我可以将部分应用程序应用于构造函数吗？我可以得到那个实例的胆量并调用它的类构造函数，除了`items`? 在 Haskell 中，我会做类似的事情，`reverse = lambda f, x, *args: f(*args, x)`但这在 Python 中甚至是不允许的。

我错过了什么？对课堂进行一些内省？修修补补`__new__`？工厂……什么或别的什么？我在这里感觉很愚蠢，试图得到一些漂亮但实用的东西（har）。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:20:07.680

我会复制原始对象，然后更改副本。在您的示例中：

```
def filter_dict(old_dict, keep_keys): 
    res = old_dict.copy()
    for k in res.keys():
        if k not in keep_keys:
            res.pop(k)
    return res 
```

听起来你的辅助函数只知道他们想要改变`old_dict`的东西，而不是他们想要保持不变的东西。因此，最安全的方法似乎是依赖`copy`方法（或`copy`模块），然后删除或更改您不想要的内容。否则，您需要某种方法来准确回忆用于创建对象的参数，并且我不知道是否存在执行此操作的通用方法。

# python - 为什么我创建的 postgres 用户被拒绝访问表？

> ID：15169061
> 
> 赞同：2
> 
> 时间：2013-03-02T00:14:03.513
> 
> 标签：python, postgresql, psycopg

我为我的 Postgres 数据库创建了一个用户，但我无法使用我设置的用户访问数据。

在 python shell 中，我运行了以下代码：

```
>>> import psycopg2

>>> conn=psycopg2.connect(
database="db",
user="postgres",
host="/tmp/",
password="opensesame"
)

>>> cur = conn.cursor()

>>> state = 'Arkansas'

>>> cur.execute("SELECT city FROM table WHERE state = %s", (state,))

Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    cur.execute("SELECT city FROM table WHERE state = %s", (state,))
ProgrammingError: permission denied for relation table 
```

作为超级用户，我尝试过：

```
db=# ALTER USER postgres SET TO default 
```

但这没有帮助

我需要让这个用户访问这个表，任何帮助将不胜感激。感谢您的观看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:27:05.473

试试这个，登录 postgres

`sudo -u postgres psql`

然后输入`\l`它将列出所有表，您将看到您创建的数据库的列表，

然后

`GRANT ALL ON db TO postgres;`

如果一切顺利，你现在应该再做`\l`一次，看看你现在有特权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T03:44:06.937

在我的代码中，我收到了错误消息：

```
ProgrammingError: permission denied for relation author 
```

虽然：

```
GRANT ALL ON db TO postgres; 
```

可能会为某些人解决此错误，我后来发现： [Permission denied for relationship](https://stackoverflow.com/questions/15520361/permission-denied-for-relation)

并发现您可能想要命名关系、序列或表而不是数据库。根据上面的链接，授予数据库权限可能更多地与访问连接有关，而不是递归地遍历表、关系和序列并授予所有这些权限。

至少，如果您遇到此错误，请阅读这篇文章和那篇文章，看看是否有任何一篇可以解决问题。

# java - java中覆盖的概念

> ID：15169063
> 
> 赞同：0
> 
> 时间：2013-03-02T00:14:07.863
> 
> 标签：java

超类中的方法适用于java中的所有子类......如果子类有自己独立的方法，我怎样才能让它工作......

```
class  Polymorphism3 {

 public static void main(String[] args) {
            // note how these are all considered objects of type Animal by Java
            Animal[] a = new Animal[4];
            a[0] = new Mouse();
            a[1] = new Bird();
            a[2] = new Horse();
            a[3] = new Animal();            
            for (int i=0;i<4;i++) {
                a[i].pullTail();                
            }           

//...       

class Animal {
    public void pullTail() {
        System.out.println("I don't know what to say.");
    }
}

class Mouse extends Animal {
    public void pullTail() {
        System.out.println("fart");
    }
}

class Bird extends Animal {
    public void pullTail() {
        System.out.println("tweet");
    }

    public void fly() {
        System.out.println("flap");
    }
}

class Horse extends Animal {
    public void pullTail() {
        System.out.println("neigh");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:25:28.603

如果这是关于无法实例化嵌套类：您需要一个封闭类的对象：

```
public class Polymorphism3 {
    public static void main(String[] args) {
        // note how these are all considered objects of type Animal by Java
        Animal[] a = new Animal[4];
        Polymorphism3 poly = new Polymorphism3();
        a[0] = poly.new Mouse();
        a[1] = poly.new Bird();
        a[2] = poly.new Horse();
        a[3] = poly.new Animal();
        for (int i = 0; i < 4; i++) {
            a[i].pullTail();
        }
    }

    class Animal {
        public void pullTail() {
            System.out.println("I don't know what to say.");
        }
    }

    class Mouse extends Animal {
        public void pullTail() {
            System.out.println("fart");
        }
    }

    class Bird extends Animal {
        public void pullTail() {
            System.out.println("tweet");
        }

        public void fly() {
            System.out.println("flap");
        }
    }

    class Horse extends Animal {
        public void pullTail() {
            System.out.println("neigh");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:16:46.620

如果未在 Animal 中声明，则无法使其工作。
唯一的方法是将Animal转换为Bird，例如

> ((鸟)a[1]).fly();

您也可以从 Bird 的 putTail 实现中调用它。

# objective-c - 如何在 UITableViewCell 中的 UITextView 中一致地绘制 NSAttributedString

> ID：15169064
> 
> 赞同：5
> 
> 时间：2013-03-02T00:14:10.560
> 
> 标签：objective-c, uitableview, uikit, uitextview, nsattributedstring

我无法使用 NSAttributedStrings 从 UITableViewCell 中的 UITextViews 获得一致的结果。

**内部 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath:**

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    headerText = [[UITextView alloc]initWithFrame:CGRectZero];
    [headerText setUserInteractionEnabled:NO];
    headerText.tag = HEADER_TEXT;
    [cell.contentView addSubview:headerText]; 
} else {
    headerText = (UITextView*)[cell.contentView viewWithTag:HEADER_TEXT];
}

//...setting up attributed strings

[headerText setAttributedText:headerString];

CGSize headerSize = [headerText sizeThatFits:CGSizeMake(246, CGFLOAT_MAX)];

headerText.frame = CGRectMake(45, 8, headerSize.width, headerSize.height); 
```

**结果：**

![滚动前无内容插入](../Images/a7115bd4bc2e53a4ef8f50850732f841.png)

如您所见，前两个似乎以我期望/想要的方式绘制文本。在最后两个中，UITextView sizeThatFits 方法返回一个更大的大小，然后需要绘制文本，并且文本在框架中居中，而不是紧贴在框架的顶部。这是一个问题，因为我希望能够根据 uitextview 框架高度来布局其他视图。

**滚动出框架并返回后： ![在此处输入图像描述](../Images/22c1a7c82458829899afc7552ce4a844.png)**

现在它变得更奇怪了，当单元被重用时，属性字符串又被设置了。uitextview 以不一致的方式绘制文本。

甚至将 contentInsets 设置为

```
headerText.contentInset = UIEdgeInsetsMake(-8, -8, -8, -8); 
```

不提供任何一致的结果：

![在此处输入图像描述](../Images/8fec958ed32062b724cdd5a3b85a8c62.png)

并在使用 contentinset 集滚动后： ![在此处输入图像描述](../Images/79ca284a02f32ff749940fad1f7506ac.png)

UITextView 上是否还有其他属性可以让我获得所需的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T03:49:00.020

在设置之前具有不同属性字符串的 UITextView 的属性字符串时，您必须始终首先将 UITextView 的所有与字符串相关的属性设置为 nil，例如：

```
self.tv.text = nil;
self.tv.font = nil;
self.tv.textColor = nil;
self.tv.textAlignment = NSTextAlignmentLeft;
self.tv.attributedText = s2; 
```

否则，正如您所发现的，以前的属性字符串的旧特征仍然存在并影响新的属性字符串。

不过，总的来说，我不得不说我根本不明白你为什么要使用 UITextView。如果您不需要用户能够编辑这些属性字符串，请使用 UILabel 或直接绘制属性字符串以获得最准确的渲染。NSAttributedString 为您提供了测量尺寸并在该尺寸内绘制所需的所有功能。

# ios - iOS - 使用 AFNetworking 保存和持久化 JSON 结果的策略

> ID：15169066
> 
> 赞同：1
> 
> 时间：2013-03-02T00:14:16.533
> 
> 标签：ios, json, afnetworking

我正在编写一个 iPhone 应用程序，它从云中的数据库加载菜单数据。我正在使用 AFNetworking（特别是 AFJSONRequestOperation）下载 appDelegate 中的数据。

到目前为止一切正常，但我还需要该应用程序能够在应用程序离线时加载菜单。为了处理这个问题，我想在 AFJSONRequestOperation 调用检索到返回的 JSON 数据后将其保存到磁盘。

我最初的策略是将返回的 JSON 保存为字符串，但我找不到从 AFJSONRequestOperation 获取字符串响应的方法。对 Web 服务进行两次调用（一个返回 JSON 对象，另一个返回文本）似乎很愚蠢，尽管这很简单。我想知道是否有更好或更有效的方法来做到这一点。我可以跳过 AFJSONRequest 并选择一个普通的 AFHttpRequest 但是我需要手动构造 JSON 对象。

有没有比我想的两个更好的选择？在我看来，正确的答案将涉及构造 JSON 对象的单个调用，并且还允许我访问原始文本响应，但我愿意听取替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T00:24:16.913

不要将其保存为 JSON 字符串级别。AFNetworking 将根据您的 JSON 结构将 JSON 作为 NSArray 或 NSDictionary 返回。

您可以将数组或字典保存为 plist。

见[`-[NSDictionary writeToURL:atomically:]`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/writeToURL%3aatomically%3a)或[`-[NSArray writeToURL:atomically:]`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/writeToURL%3aatomically%3a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:22:32.293

我会尝试 NSJSONSerialization 将 NSData 保存到磁盘。

**例子：**

```
NSData *dataToSave =  [NSJSONSerialization dataWithJSONObject:responseObject options:nil error:nil];

id jsonObject = [NSJSONSerialization JSONObjectWithData:dataToSave options:nil error:nil]; 
```

另一种选择是从 AFNetworking 获取您的 responseObject。大概是一个格式良好的 NSDictionary 并简单地将其放在 NSUserDefaults 中以进行半持久存储。您需要确保您的字典中没有任何空值，因为 NSUserDefaults 不能很好地处理空值。

# .net - DEVELOPMENT 和 LIVE 网站需要 https

> ID：15169068
> 
> 赞同：1
> 
> 时间：2013-03-02T00:14:32.717
> 
> 标签：.net, asp.net-mvc, ssl, requirehttps

我有一些 ASP .NET MVC4 网站，我必须首先将其放到开发场所进行测试。开发网站没有 SSL，但 LIVE 有。

好。我必须`[Requirehttps]`在 20 个控制器中使用，每次在 DEV 网站下测试时我都无法评论它。

是否有任何方法可以配置 [Requirehttps] 至少基于一些 web.config 设置，或者可能有另一种方法？我的意思是，当我在 LIVE 下发布网站时，我不喜欢`[Requirehttps]`每次评论大约 20 条。

有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T00:48:29.877

覆盖 RequireHttpsAttribute

网络配置

```
<appSettings>
  <add key="SSL" value="false" />
</appSettings> 
```

MyHttpsAttribute.cs

```
public class MyHttpsAttribute : RequireHttpsAttribute, IAuthorizationFilter
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (bool.Parse(AppSettings["SSL"]) != true) {
            return;
        }
        base.OnAuthorization(filterContext);
    }
} 
```

基本控制器

```
[MyHttps]
public abstract class BaseController : Controller
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:38:20.740

如果您在调试/发布版本之间切换，您可以在代码中执行此操作：

```
#if !DEBUG
    [RequireHttps]
#endif 
```

# javascript - 模态没有出现

> ID：15169070
> 
> 赞同：0
> 
> 时间：2013-03-02T00:14:50.033
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog, jquery-events

推特引导模式没有触发......我已经包含了js和CSS......控制台中显示两个错误的原因是什么......

> Uncaught TypeError: undefined is not a function bootstrap.js:29
> Uncaught SyntaxError: Unexpected token ;

在下面提供我的小提琴

[http://jsfiddle.net/rajkumart08/wT5ZR/2/](http://jsfiddle.net/rajkumart08/wT5ZR/2/)

```
<script type="text/javascript">

            $(function() {
            $('#event-modal').modal({
                backdrop: true;
            });
        });

     </script>

      <div class="container">
      <section>
          <div class="row features">

            <div class="span6">

                 <div id="event-modal" class="modal hide fade">
                    <div class="modal-header">
                        <a class="close" href="#">x</a>
                        <h3>Modal Heading</h3>
                    </div>
                    <div class="modal-body">
                        <p>Some information</p>
                    </div>
                    <div class="modal-footer">
                        <a class="btn primary" href="#">Primary</a>
                        <a class="btn secondary" href="#">Secondary</a>
                    </div>
                </div>
                <a href="/events/2-fefewfewfe/rsvps" data-backdrop="true" data-controls-modal="event-modal" data-keyboard="true">click to open model<span class="ico join"></span></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:17:29.140

您可能应该听听错误的内容：

```
- $('#event-modal').modal({
-    backdrop: true;
- });

+ $('#event-modal').modal({
+    backdrop: true
+ }); 
```

编辑： http: [//jsfiddle.net/wT5ZR/4/——fiddle](http://jsfiddle.net/wT5ZR/4/)在bootstrap-modal*之后*包含了 jQuery 。后者取决于前者。

# ruby-on-rails - Bundler：读取服务器证书 B：证书验证失败（OpenSSL ::SSL::SSLError）

> ID：15169076
> 
> 赞同：4
> 
> 时间：2013-03-02T00:15:38.037
> 
> 标签：ruby-on-rails, ruby, bundle

我使用windows，执行时出现错误`bundle`或`bundle install`：

```
RubyGems Environment:
- RUBYGEMS VERSION: 2.0.0
- RUBY VERSION: 1.9.3 (2012-02-16 patchlevel 125) [i386-mingw32]
- INSTALLATION DIRECTORY: C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
- RUBY EXECUTABLE: C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe
- EXECUTABLE DIRECTORY: C:/RailsInstaller/Ruby1.9.3/bin
- RUBYGEMS PLATFORMS:
- ruby
- x86-mingw32
- GEM PATHS:
 - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
 - C:/Users/Usuario/.gem/ruby/1.9.1
- GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :backtrace => false
 - :bulk_threshold => 1000
 - REMOTE SOURCES:
 - http://rubygems.org/ 
```

错误信息：

```
Unfortunately, a fatal error has occurred. Please see the Bundler
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/v
endor/net/http/persistent/ssl_reuse.rb:70:in `connect': SSL_connect returned=1 e
rrno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL
::SSL::SSLError)
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/net/http/persistent/ssl_reuse.rb:70:in `block in connect'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-           1.3.0/lib/bundler/vendor/net/http/persistent/ssl_reuse.rb:70:in `connect'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:750:in `start'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/net/http/persistent.rb:628:in `start'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/net/http/persistent.rb:570:in `connection_for'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/net/http/persistent.rb:930:in `request'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/fetcher.rb:195:in `fetch'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/fetcher.rb:169:in `use_api'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/source/rubygems.rb:223:in `block in remote_specs'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/source/rubygems.rb:223:in `select'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/source/rubygems.rb:223:in `remote_specs'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/source/rubygems.rb:162:in `fetch_specs'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/source/rubygems.rb:66:in `specs'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/definition.rb:192:in `block (2 levels) in index'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/definition.rb:189:in `each'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/definition.rb:189:in `block in index'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/index.rb:9:in `build'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/definition.rb:185:in `index'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/definition.rb:179:in `resolve'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/definition.rb:114:in `specs'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/definition.rb:109:in `resolve_remotely!'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/installer.rb:83:in `run'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/installer.rb:14:in `install'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/cli.rb:247:in `install'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/thor/task.rb:27:in `run'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/thor.rb:344:in `dispatch'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/vendor/thor/base.rb:434:in `start'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
bin/bundle:20:in `block in <top (required)>'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/
bin/bundle:20:in `<top (required)>'
from C:/RailsInstaller/Ruby1.9.3/bin/bundle:23:in `load'
from C:/RailsInstaller/Ruby1.9.3/bin/bundle:23:in `<main>' 
```

我已经试过了`bundle install --system`，`bundle install --path path/to_the/proect`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T09:16:17.050

此错误表示您的证书不存在或无效。这是一个常见的问题。

这是一篇关于如何解决它的综合帖子：[http](http://railsapps.github.com/openssl-certificate-verify-failed.html) ://railsapps.github.com/openssl-certificate-verify-failed.html （包括如何在 Windows 上处理它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-27T14:08:23.127

有一个解决方法在这里检查

[https://gist.github.com/luislavena/f064211759ee0f806c88](https://gist.github.com/luislavena/f064211759ee0f806c88)

如果证书验证失败错误，则简单复制粘贴

# python - 如何在 python 文件中查找本地导入？（使用模块图）

> ID：15169077
> 
> 赞同：1
> 
> 时间：2013-03-02T00:15:45.497
> 
> 标签：python, import, module, local

有没有办法获取由 python 脚本导入的仅本地模块（脚本）的列表？

我的意思是我有2个文件。扫描的和扫描仪。我需要确定扫描的一个使用哪些本地模块（可能使用模块图/模块查找器），但我自己找不到答案。

**编辑：**我实际上需要这样做而不在扫描仪中导入扫描的模块，所以就像文件扫描方式一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:49:14.667

我已经通过过滤其他模块中的所有对象来检查它们是否属于模块类型。
这不是超级有效，但我认为不需要。

```
import foo # your module

import types
print dict((k, v) for (k, v) in foo.__dict__.iteritems() if type(v)==types.ModuleType) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:21:49.937

由于 python 比 C/Java 更具动态性，因此如果您无法导入/运行扫描的模块，则会出现问题。考虑这种类型的代码：

```
re = __import__('re')
mymodule = __import__(raw_input()) # even worse for you 
```

根据您对扫描模块的了解程度，进行文本搜索可能会也可能不会。

# c# - Visual Studio 2010 中的线程标记是什么？

> ID：15169083
> 
> 赞同：3
> 
> 时间：2013-03-02T00:16:04.837
> 
> 标签：c#, c++, multithreading, visual-studio, debugging

我很难理解 MSDN 文章中的内容：

*   [演练：调试多线程应用程序 (Visual Studio 2010)](http://msdn.microsoft.com/en-us/library/bb157784%28v=vs.100%29.aspx)

“发现线程标记”部分告诉：

> 1.  **在Threads**窗口中右键单击，然后单击**Show Threads in Source**。
> 2.  看看窗户左侧的排水沟。在这条线上，您将看到一个类似于两条布线的图标。一根线是红色的，另一根线是蓝色的。线程标记指示线程在此位置停止。可能，线程在此位置停止。
> 
> .....这个图标是一个线程标记： ![线程标记](../Images/bbd9e14dc38a6d89fe71e97ec8a92a1b.png)“

我找不到这个线程标记，也无法理解“单击在源中**显示线程**”完成了什么（此后我看不到任何差异）

什么是线程标记，单击**Show Threads** in Source 完成了什么？

这是我按照步骤操作后的 VS2010 屏幕截图：

![VS2010 调试 - 线程](../Images/64282a9868d6a41660d75ef1439d80ea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T11:56:26.040

没有做任何其他对我有用的事情。 ![在此处输入图像描述](../Images/3b8ac9327f525f639b2c309b448374aa.png)

# xml - 使用 LINQ 选择具有不同名称的后代节点

> ID：15169086
> 
> 赞同：0
> 
> 时间：2013-03-02T00:16:12.290
> 
> 标签：xml, linq, nodes, xmlnode, descendant

我有一个这样的 XML：

```
<root>
  <data>
   <_0>
    <value1></value1>
    <value2></value2>
   </_0>
   <_1>
    <value1></value1>
    <value2></value2>
   </_1>
 </data>
</root> 
```

我想获取数据节点的所有后代，目前正在使用：

```
var descendants = from descendant in xdoc.Descendants("data")
                        select descendant; 
```

但返回的只是数据元素之间包含的所有文本。如何获取以不同名称（如 _0、_1、_2 等）开头的所有后代的列表。它们将始终是数据节点的直接后代，因此必须有一种方法来获取这些后代。任何帮助将不胜感激，因为我对 LINQ 的工作不多。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:24:55.963

您可以 Elements() 来获取孩子。像这样，大概：

```
var descendants = from descendant in xdoc.Descendants("data")
                        select descendant.Elements(); 
```

尽管使用 lambda 语法而不是查询理解语法可能更简洁：

```
var descendants = xdoc.Descendants("data").Elements(); 
```

# javascript - 使用 jQuery 从 JSON 创建表

> ID：15169091
> 
> 赞同：-1
> 
> 时间：2013-03-02T00:17:29.193
> 
> 标签：javascript, jquery, html, json

我有一个 json 文件，它本质上是一个剧院的布局。

```
{
    "who": "RSNO",
    "what": "An American Festival",
    "when": "2013-02-08 19:30",
    "where": "User Hall - Main Auditorium",
    "seats": [
        "00000000000000000011111111111111000000000000000000",
        "0000000000000001111111111111111aaa0000000000000000",
        "00000000000000aa111111111111111aaaaa00000000000000",
        "00000000000001111111111111111111111111000000000000",
        "000000000aa00aaaaaaaaaaaaaaaaaaaaaa1100aa000000000",
        "00000001111001111111111111111111111100111100000000",
        "00000aaaaaa0011aaaaaaaaa11111111aaa1100aaaaaa00000",
        "00001111111001111111111111111111111100111111100000",
        "000aaaaaaa110011111111111111111111110011aaaaaaa000",
        "00111111111100111111111111111111111001111111111000",
        "00aaaaa1111110011111111111111111111001111aaaaaaa00",
        "11111111111100111111111111111111111001111111111110",
        "0aaaaaaaaaaaa001111111111111111111100aaaaaaaaaaaa0",
        "01111111111110011111111111111111110011111111111100",
        "00000000000000001111111111111111110000000000000000",
        "01111111111111001111111111111111100111111111111100",
        "01111111111111001111111111111111110011111111111110",
        "01111111111111001111111111111111100111111111111100",
        "00a11111111111100111111111111111100111111111111a00",
        "00111111111111100111111111111111001111111111111000",
        "00011111111111110011111111111111001111111111111000",
        "00111111111111100111111111111111001111111111111000",
        "00011111111111110011111111111111001111111111111000",
        "00011111111111110011111111111110011111111111110000",
        "0000000111a111111001111a1111a110011111111110000000",
        "00000000111111110011111111111110011111111000000000",
        "00000000001111111001111111111110011111110000000000",
        "00000000000000111001111111111100111000000000000000"
    ],
    "rows": [
        "DD",
        "CC",
        "BB",
        "AA",
        "Z",
        "Y",
        "X",
        "W",
        "V",
        "U",
        "T",
        "S",
        "R",
        "Q",
        "P",
        "N",
        "M",
        "L",
        "K",
        "J",
        "H",
        "G",
        "F",
        "E",
        "D",
        "C",
        "B",
        "A"
    ],
    "seatPrice": [
        "                  00000000000000                  ",
        "               0000000000000000000                ",
        "              0000000000000000000000              ",
        "             0000000000000000000000000            ",
        "         00  000000000000000000000000  00         ",
        "       0000  00000000000000000000000  0000        ",
        "     000000  000000000000000000000000  000000     ",
        "    0000000  00000000000000000000000  0000000     ",
        "   000000000  0000000000000000000000  000000000   ",
        "  0000000000  000000000000000000000  0000000000   ",
        "  00000000000  00000000000000000000  00000000000  ",
        "000000000000  000000000000000000000  000000000000 ",
        " 000000000000  00000000000000000000  000000000000 ",
        " 000000000000  0000000000000000000  000000000000  ",
        "                000000000000000000                ",
        " 0000000000000  00000000000000000  0000000000000  ",
        " 0000000000000  000000000000000000  0000000000000 ",
        " 0000000000000  00000000000000000  0000000000000  ",
        "  0000000000000  0000000000000000  0000000000000  ",
        "  0000000000000  000000000000000  0000000000000   ",
        "   0000000000000  00000000000000  0000000000000   ",
        "  0000000000000  000000000000000  0000000000000   ",
        "   0000000000000  00000000000000  0000000000000   ",
        "   0000000000000  0011111111100  0000000000000    ",
        "       0000000000  111111111111  0000000000       ",
        "        00000000  1111111111111  00000000         ",
        "          0000000  111111111111  0000000          ",
        "              000  00000000000  000               "
    ],
    "priceLookup": [
        10,
        20
    ]
} 
```

本质上，每个字符（包括空格）都应该成为表格中的一个单元格，并且根据字符，应该有不同的类。每个单元格还有一个用作座位号的参考。我不知道从哪里开始，这个网站上的其他问题甚至没有帮助澄清一个体面的方法。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:21:02.813

从以下内容开始：

```
var json  = JSON.parse(jsonString),
    table = $('<table />');

for (key in json) {
    var tr = $('<tr />', {'class': key, html: '<td>'+key+'</td><td>'+json[key]+'</td>'});
    table.append(tr);
}

$('body').append(table); 
```

# installation - 更改 Billion 7800NXL 上的设备 Web 管理端口

> ID：15169094
> 
> 赞同：0
> 
> 时间：2013-03-02T00:18:00.193
> 
> 标签：installation, router

有谁知道如何（或者即使有可能）更改 Billion BiPac 7800NXL 上的端口？

我在文档或网络管理中找不到任何关于它的信息。

我希望能够将端口 80 转发到我网络上的一台机器，但它似乎不允许我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:38:17.267

看来您可以转发端口 80 而无需更改管理端口，任何对该端口的外部请求都将通过转发，内部请求将通过 Web 管理重定向。

外部 IP 上的 dyndns 似乎总是重定向到正确的机器，即使来自内部网络也是如此。

# python - 如何创建一个子进程可以读取的临时文件？

> ID：15169101
> 
> 赞同：58
> 
> 时间：2013-03-02T00:18:13.303
> 
> 标签：python, windows, temporary-files

我正在编写一个 Python 脚本，该脚本需要将一些数据写入临时文件，然后创建一个运行 C++ 程序的子进程，该程序将读取临时文件。我正在尝试使用[`NamedTemporaryFile`](http://docs.python.org/2/library/tempfile.html#tempfile.NamedTemporaryFile)它，但根据文档，

> 在命名的临时文件仍处于打开状态时，该名称是否可用于第二次打开文件，因平台而异（在 Unix 上可以这样使用；在 Windows NT 或更高版本上不能）。

事实上，在 Windows 上，如果我在写入后刷新临时文件，但在我希望它消失之前不要关闭它，子进程将无法打开它进行读取。

我正在通过创建文件来解决这个问题，在生成`delete=False`子进程之前关闭它，然后在完成后手动删除它：

```
fileTemp = tempfile.NamedTemporaryFile(delete = False)
try:
    fileTemp.write(someStuff)
    fileTemp.close()
    # ...run the subprocess and wait for it to complete...
finally:
    os.remove(fileTemp.name) 
```

这似乎不优雅。有一个更好的方法吗？也许是一种打开临时文件权限的方法，以便子进程可以访问它？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-06T22:27:25.497

由于似乎没有其他人有兴趣公开这些信息......

`tempfile`确实公开了一个函数 ，`mkdtemp()`它可以使这个问题变得微不足道：

```
try:
    temp_dir = mkdtemp()
    temp_file = make_a_file_in_a_dir(temp_dir)
    do_your_subprocess_stuff(temp_file)
    remove_your_temp_file(temp_file)
finally:
    os.rmdir(temp_dir) 
```

我将中间函数的实现留给读者，因为人们可能希望做一些事情，比如使用`mkstemp()`来加强临时文件本身的安全性，或者在删除文件之前就地覆盖文件。我不特别知道通过仔细阅读`tempfile`.

无论如何，是的，`NamedTemporaryFile`在 Windows 上使用可能不优雅，我在这里的解决方案也可能不优雅，但是您已经确定 Windows 支持比优雅的代码更重要，所以您不妨继续做一些可读的事情。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-05T22:40:56.207

[根据](http://bugs.python.org/issue14243#msg164504)理查德 Oudkerk

> (...) 尝试`NamedTemporaryFile`在 Windows 上重新打开失败的唯一原因是，当我们重新打开时，我们需要使用`O_TEMPORARY`.

他给出了一个如何在 Python 3.3+ 中执行此操作的示例

```
import os, tempfile

DATA = b"hello bob"

def temp_opener(name, flag, mode=0o777):
    return os.open(name, flag | os.O_TEMPORARY, mode)

with tempfile.NamedTemporaryFile() as f:
    f.write(DATA)
    f.flush()
    with open(f.name, "rb", opener=temp_opener) as f:
        assert f.read() == DATA

assert not os.path.exists(f.name) 
```

`opener`因为 Python 2.x的内置中没有参数，所以`open()`我们必须结合较低级别`os.open()`和`os.fdopen()`函数来达到相同的效果：

```
import subprocess
import tempfile

DATA = b"hello bob"

with tempfile.NamedTemporaryFile() as f:
    f.write(DATA)
    f.flush()

    subprocess_code = \
    """import os
       f = os.fdopen(os.open(r'{FILENAME}', os.O_RDWR | os.O_BINARY | os.O_TEMPORARY), 'rb')
       assert f.read() == b'{DATA}'
    """.replace('\n', ';').format(FILENAME=f.name, DATA=DATA)

    subprocess.check_output(['python', '-c', subprocess_code]) == DATA 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-02T01:04:53.747

你总是可以去低级，但不确定它是否对你来说足够干净：

```
fd, filename = tempfile.mkstemp()
try:
    os.write(fd, someStuff)
    os.close(fd)
    # ...run the subprocess and wait for it to complete...
finally:
    os.remove(filename) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-02T09:38:24.257

至少如果您使用现有的 Python 库打开一个临时文件，则在 Windows 的情况下无法从多个进程访问它。根据[MSDN](http://msdn.microsoft.com/en-us/library/aa363858)，您可以指定第三个参数 ( `dwSharedMode`) 共享模式标志`FILE_SHARE_READ`来`CreateFile()`发挥作用：

> 启用对文件或设备的后续打开操作以请求读取访问权限。否则，如果其他进程请求读取访问权限，它们将无法打开文件或设备。如果未指定此标志，但已打开文件或设备以进行读取访问，则函数失败。

因此，您可以编写一个 Windows 特定的 C 例程来创建一个自定义的临时文件打开器函数，从 Python 调用它，然后您可以让您的子进程访问该文件而不会出现任何错误。但我认为你应该坚持你现有的方法，因为它是最便携的版本，可以在任何系统上工作，因此是最优雅的实现。

*   关于 Linux 和 windows 文件锁定的讨论可以在[这里](https://stackoverflow.com/questions/546504/how-do-i-make-windows-file-locking-more-like-unix-file-locking)找到。

编辑：原来也可以从 Windows 中的多个进程打开和读取临时文件。请参阅 Piotr Dobrogost 的[回答](https://stackoverflow.com/a/15235559/951640)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-02T20:17:15.453

在语句中使用[`mkstemp()`](https://docs.python.org/3/library/tempfile.html#tempfile.mkstemp)代替 with避免了调用：[`os.fdopen()`](https://docs.python.org/3/library/os.html#os.fdopen)`with``close()`

```
fd, path = tempfile.mkstemp()
try:
    with os.fdopen(fd, 'wb') as fileTemp:
        fileTemp.write(someStuff)
    # ...run the subprocess and wait for it to complete...
finally:
    os.remove(path) 
```

# java - java中的客户端-服务器应用程序无法接收客户端发送的所有消息

> ID：15169102
> 
> 赞同：2
> 
> 时间：2013-03-02T00:18:16.377
> 
> 标签：java, multithreading, client-server

我正在开发具有两个模块的客户端-服务器应用程序：1）。注册表：网络中的所有服务器都向注册表注册它们正在侦听的 IP 和端口。2）。消息节点：这些也是服务器，一旦收到来自注册表的命令，它们就会在一轮消息中相互通信。消息传递节点一次只会向 1 个节点发送消息，但可能会从多个节点接收消息。

注册中心向所有其他服务器发送可用（已注册）节点的列表，并且在收到此列表后，节点开始相互交换消息。

我能够让注册表部分正常工作，并且节点能够自行注册。此外，节点成功地从注册表接收节点列表并能够开始交换消息。然而，消息传递节点不能接收所有正在发送的消息。

这是消息传递节点部分：

```
public class MessagingNode  {

    // Constructor
    public MessagingNode(String registryHost, int registryPort)  {
        try  {
            registryHostname = InetAddress.getByName(registryHost).getHostAddress();
        } catch (Exception e)  {
            System.out.println("Can't resolve Registry hostname!");
        }
        registryPortNumber = registryPort;

        // Start the node server
        try  {
            nodeServerSocket = new ServerSocket(0);
        }
        catch (Exception e)  {
            System.out.println("Can't start node server!");
        }

        // Store the MessagingNode server port and IP address
        try  {
            nodeIpAddress = InetAddress.getLocalHost().getHostAddress();
        } catch(Exception e)  {
            System.out.println("Can't get localhost");
        }
        nodePortNumber = nodeServerSocket.getLocalPort();
        //System.out.println("Node Port:"+nodePortNumber);

        // Initialize trackers
        sendTracker = 0;
        receiveTracker = 0;
        sendSummation = 0;
        receiveSummation = 0;
        sending = false;
    }

    // Start the NodeServer to listen for other nodes
    public void startNodeServer()  {
        if(!isRunning)  {
            isRunning = true;
            consoleListener();
            while(MessagingNode.this.isRunning)  {
                Socket clientSocket = null;
                try  {
                    clientSocket = nodeServerSocket.accept();
                    openClient(clientSocket);                       

                } 
                catch(IOException e)  {
                    e.printStackTrace();
                }

            }
        }
    }

    // Messaging nodes receiving 
    public void openClient(final Socket socket)  {
        Thread clientThread = new Thread()  {
            public void run()  {
                int count = 0;
                try  { 
                    byte[] messagePayload = new byte[64];

                    InputStream in = socket.getInputStream();
                    DataInputStream din = new DataInputStream(in);
                    //BufferedReader br =  new BufferedReader(new InputStreamReader(in));   
                    while(din.read(messagePayload) > -1)  {

                        //count++;

                        int type = InterpretMessage.getMessageType(messagePayload);
                        if(type == MessageTypes.MESSAGING_NODES_LIST)  {
                            trimNodeList(messagePayload);
                            System.out.println("Node list Received!");
                            dataThread();

                        } 
                        else  {         
                            handleIncomingPayload(messagePayload);
                        }
                    }
                    //System.out.println("Input connection closed after :" + count);
                //System.out.println("Listener Closed!");
                //in.close();
                //socket.close();

                }
                catch(Exception e)  {
                    e.printStackTrace();
                }

            }
        };
        clientThread.start();
        try  {
                    clientThread.join();
                }
                catch(Exception e)  {
                    e.printStackTrace();
                }

    }

    public void dataThread()    {
        Thread t = new Thread()  {
            public void run()  {
                sendData();
            }
        };
        t.start();
        try  {
            t.join();
        }
        catch(Exception e)  {
            e.printStackTrace();
        }
    }

    public void sendData()  {
        // pick a node
        int size = messagingNodesList.size();
        int index = (int)(Math.random() * size);
        //System.out.println("Node being contacted:" + messagingNodesList.get(index));
        String details = messagingNodesList.get(index);
        String[] str = details.split(" ");

        try  {
            Socket socket = new Socket(str[0], Integer.parseInt(str[1]));
            DataOutputStream out = new DataOutputStream(socket.getOutputStream());
            for(int i= 0; i < 5; i++)  {
                CommMessage outgoing = new CommMessage();
                byte[] msg = outgoing.marshall();
                out.write(msg, 0, msg.length);
                System.out.println("Sending number:" + outgoing.number);
                out.flush();
            }
            out.close();
            //closeConnection = true;
        }
        catch(IOException e)  {
            e.printStackTrace();
        }
    }

    // Remove Node's information
    public void trimNodeList(byte[] incoming)  {
    // Removes the current node's information from the list recieved from registry
    }

    // Update trackers
    public void handleIncomingPayload(byte[] payload)  {
        CommMessage msg = new CommMessage(payload);
        msg.unmarshall();
        System.out.println("Receiving Number:"+msg.number);
        //synchronized(this)  {
            receiveSummation += msg.number;
            receiveTracker += 1;
        //}
    }

    // Console Listener
    public void consoleListener()  {
        Thread listener = new Thread()  {
            public void run()  {
                // listen for keyboard instructions
            }
        };
        listener.start();
    }

    public static void main(String[] args)  {
        MessagingNode node = new MessagingNode(args[0], Integer.parseInt(args[1]));
        node.connectRegistry();
        node.startNodeServer();
        //node.deregisterNode();
        //node.deregisterNode();
        //node.sendBurst();
        // Launch the console Listener Thread
        // Initiate rounds of messaging

    }
} 
```

问题出在我假设的接收部分的某个地方。我尝试在 sendData 方法上使用同步，因为有人指出这可能是一个并发问题，但它没有帮助。我仍然无法接收所有消息。任何见解都会非常有帮助。

谢谢。

# java - 单元测试在调试模式下成功，但在正常运行时失败

> ID：15169104
> 
> 赞同：13
> 
> 时间：2013-03-02T00:18:20.947
> 
> 标签：java, multithreading, junit, future, callable

为什么我的单元测试在调试模式下成功，但在正常运行时失败？

```
public class ExecutorServiceTest extends MockitoTestCase{   
  private int numThreads;
  private ExecutorService pool;
  private volatile boolean interruptedBitSet;

  @Override
  public void setUp() {
    numThreads = 5;
    pool = Executors.newFixedThreadPool(numThreads);
  }

class TaskChecksForInterruptedBit implements Callable<String> {
    @Override
    public String call() throws Exception {
      interruptedBitSet = false;
      while (!Thread.currentThread().isInterrupted()) {
      }
      interruptedBitSet = Thread.currentThread().isInterrupted();
      return "blah";
    }
  }

public void testCancelSetsInterruptedBitInCallable() throws Exception {
    interruptedBitSet = false;
    final Future<String> future = 
        pool.submit(new TaskChecksForInterruptedBit());
    final boolean wasJustCancelled = future.cancel(true);
    assertTrue(wasJustCancelled);

    // Give time for the thread to notice the interrupted bit and set the flag
    Thread.sleep(5000);

    // This succeeds when stepping through w/ a debugger, but fails when running
    // the test straight. WHY?
    assertTrue(interruptedBitSet);

    assertTrue(future.isDone());
    assertTrue(future.isCancelled());
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:33:44.613

原因几乎可以肯定是调试器中的断点正在暂停主线程，但没有暂停任何后台线程 - ExecutorService 中的那些。在 Eclipse 中调试时，您可以更改断点以停止所有线程，而不仅仅是主线程。

当不调试任务的提交和立即取消时，您会在任务运行一次之前取消任务。尝试在这些行之间添加睡眠延迟：

```
final Future<String> future =  pool.submit(new TaskChecksForInterruptedBit());
Thread.sleep(1000);
final boolean wasJustCancelled = future.cancel(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T00:46:13.243

您必须确保您的任务真正开始运行。它甚至可能在它有机会之前被取消。

```
public class ExecutorServiceTest {
    private int numThreads;
    private ExecutorService pool;
    private volatile boolean interruptedBitSet;
    private static final CountDownLatch latch = new CountDownLatch(1);

    @Before
    public void setUp() {
        numThreads = 5;
        pool = Executors.newFixedThreadPool(numThreads);
    }

    class TaskChecksForInterruptedBit implements Callable<String> {
        @Override
        public String call() throws Exception {
            interruptedBitSet = false;
            latch.countDown();
            while (!Thread.currentThread().isInterrupted()) {
                System.out.println(System.currentTimeMillis());
            }
            System.out.println("haha");
            interruptedBitSet = Thread.currentThread().isInterrupted();
            return "blah";
        }
    }

    @Test
    public void testCancelSetsInterruptedBitInCallable() throws Exception {
        final Future<String> future =
                pool.submit(new TaskChecksForInterruptedBit());
        interruptedBitSet = false;
        latch.await();
        final boolean wasJustCancelled = future.cancel(true);
        Assert.assertTrue(wasJustCancelled);

        // Give time for the thread to notice the interrupted bit and set the flag
        Thread.sleep(5000);

        // This succeeds when stepping through w/ a debugger, but fails when running
        // the test straight. WHY?
        Assert.assertTrue(interruptedBitSet);

        Assert.assertTrue(future.isDone());
        Assert.assertTrue(future.isCancelled());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-16T08:08:47.917

我知道这很旧，但我也遇到了同样的问题。我的问题是我有一个**IEnumerable**，我正在枚举和检查输出。

运行单元测试时，**IEnumerable**返回的顺序与调试时不同。这是**IEnumerable**的本质，只需添加一个**OrderBy**子句就可以解决我的问题。

我希望这可以帮助那里的人，因为找到它可能是一个令人沮丧的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-04T14:14:38.477

您应该在终止主线程之前检查所有线程是否都死了

```
private void shutdownExecutionService(ExecutorService executorService) {
    if (executorService != null) {
        try {
            executorService.shutdown();
            while (!executorService.awaitTermination(10, TimeUnit.HOURS)) {
                logger.info("Awaiting completion of threads.");
            }
        } catch (final InterruptedException e) {
            logger.error("Error while shutting down threadpool", e);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-05T15:35:03.797

从在线课程中运行家庭作业时，我遇到了类似的问题。我添加到构建路径的课程中的分级程序使用了 JUnit4，我的 Eclipse 版本将 JUnit5 添加到任何新的测试用例中。我创建了一个新的 Java 项目，并将 JUnit5 添加到我的测试用例的构建浴中，没有评分器，它为我修复了它。希望这可以帮助。

# java - 如何比较时区

> ID：15169108
> 
> 赞同：6
> 
> 时间：2013-03-02T00:19:10.510
> 
> 标签：java, timezone, comparison, comparator

我需要比较`Asia/Singapore`< `UTC`<的时区`Pacific/Honolulu`。

我正在使用[`java.util.TimeZone`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html)（未实现[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)）。

我对现有实现的搜索没有成功，因为关于将日期与不同时区进行比较的问题太多了。

**问题：**什么是可以解决这个问题的正确实现`Comparator<TimeZone>`（如果适用，是什么使它比其他解决方案更好）？

请注意，我无法使用[Joda Time](http://joda-time.sourceforge.net/)解决此问题，因此“使用 Joda Time”不是有效答案。

### 为清晰起见进行编辑

上面的`<`符号没有很好的定义。我的特定用例只需要从东到西的天真“地理”排序。正如评论所指出的，更高级和更通用的解决方案将考虑夏令时和历史 GMT 偏移变化等时间因素。所以我认为我们可以考虑两种排序，每一种都需要不同的`Comparator<TimeZone>`实现：

*   严格地理（当前 UTC） -[我的回答解决](https://stackoverflow.com/a/15169112/697449)了。
*   对本地或民用时间变化敏感 - 由[rgettman 的回答解决](https://stackoverflow.com/a/15169483/697449)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T00:19:10.510

我使用自己的`Comparator<TimeZone>`实现进行[`getRawOffset`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getRawOffset%28%29)比较：

```
@Override
public int compare(TimeZone tz1, TimeZone tz2) {
    return tz2.getRawOffset() - tz1.getRawOffset();
} 
```

它似乎通过了快速测试：

```
final List<TimeZone> timeZones = Arrays.asList(
        TimeZone.getTimeZone("UTC"),
        TimeZone.getTimeZone("America/Los_Angeles"),
        TimeZone.getTimeZone("America/New_York"),
        TimeZone.getTimeZone("Pacific/Honolulu"),
        TimeZone.getTimeZone("Asia/Singapore")
);

final List<TimeZone> expectedOrder = Arrays.asList(
        TimeZone.getTimeZone("Asia/Singapore"),
        TimeZone.getTimeZone("UTC"),
        TimeZone.getTimeZone("America/New_York"),
        TimeZone.getTimeZone("America/Los_Angeles"),
        TimeZone.getTimeZone("Pacific/Honolulu")
);

Collections.sort(timeZones, new Comparator<TimeZone>() {
    @Override
    public int compare(TimeZone tz1, TimeZone tz2) {
        return tz2.getRawOffset() - tz1.getRawOffset();
    }
});

//Impl note: see AbstractList.equals
System.out.println(timeZones.equals(expectedOrder)); //true 
```

但我仍然想知道这个解决方案是否存在缺陷和/或是否有更好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T01:08:06.943

一个人可能能够创建一个`Comparator<TimeZone>`考虑到时区差异的。可能会`TimeZone`或可能不会观察夏令时，这将调整原始偏移量，从而弄乱仅原始偏移量的比较。该类`TimeZone`似乎支持基于 2`getOffset`种方法的调整，但它们需要一个参考日期。怎么样：

```
public class TimeZoneComparator implements Comparator<TimeZone>
{
   private long date;

   public TimeZoneComparator(long date)
   {
      this.date = date;
   }

   public int compare(TimeZone tz1, TimeZone tz2)
   {
      return tz2.getOffset(this.date) - tz2.getOffset(this.date);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T00:51:16.240

时区纯粹是政治性的，因此任何不合规的使用都会给用户带来很多问题，具体取决于应用程序的功能以及谁需要它或使用它。通过解释为什么需要这样订购它们，您的问题会更好。在相邻的时区中，一个使用 DST，另一个不使用。所以一年中的 60%，TZ1 == TZ2，另外 40% TZ1 < TZ2。或者无论如何。

有地理（经纬度）时区数据集和查询时区的网站。即使是当前的 DST 设置。因此，您可能不得不满足于需要至少每年更新一次的数据集。或网络访问。

您可能不应该为它们分配大小。只有地理排序 - 按经度。

首先，如果您能告诉我们您要做什么，那就太好了。答案不是：严格 a>b>c 基于当地时间的顺序。我编写了一段时间的日历，所以我实际上曾经知道这些东西。明确相信什么需要这种排序？

# wcf - 我的 WCF 实现类引用未显示在 Windows 服务中

> ID：15169109
> 
> 赞同：1
> 
> 时间：2013-03-02T00:19:10.873
> 
> 标签：wcf, wcf-binding

我的 Windows 服务现在显示了我的 WCF 实现类。因此，当我启动我的服务时，它给了我“ServiceHost 仅支持类服务类型”的错误。这是我的代码：

```
 try
        {

            Console.WriteLine("Testing 1");
            WCFEmailEventLog.WriteEntry("My service started"); 
            System.Diagnostics.Debugger.Break();
            // Create a ServiceHost 
            // provide the base address.
            serviceHost = new ServiceHost(typeof(TestBulkEmailService.BulkEmailService), new Uri("http://localhost/TestBulkEmailService/TestBulkEmailService.svc") );

            WCFEmailEventLog.WriteEntry("After Service host "); 
            // Open the ServiceHostBase to create listeners and start 
            // listening for messages.
            serviceHost.Open(); 
```

在上面的代码中，typeOf(TestBulkEmailService.BulkEmailService) 不显示实现类 BulkEmailService，只显示我的 WCF 合同 IBulkEmailService。

我究竟做错了什么？

这是我的 app.config 文件：

```
 <services>
    <service name="WW.Common.Service.Impl.BulkEmailService" behaviorConfiguration="BulkEmailService">
      <host>
        <baseAddresses>
          <add baseAddress="http://localhost/TestBulkEmailService/TestBulkEmailService.svc"/>
        </baseAddresses>
      </host>
      <endpoint address="BulkEmailService" binding="basicHttpBinding" contract="TestBulkEmailService.IBulkEmailService" />
      <endpoint address="mex" binding="basicHttpBinding" name="mexEndpoint" contract="IMetadataExchange" />
    </service>
  </services>
<behaviors>
  <serviceBehaviors>
    <behavior name="BulkEmailService">
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true"/>
      <serviceMetadata httpGetEnabled="true" />
      <serviceSecurityAudit auditLogLocation="Application"
         suppressAuditFailure="true"
         serviceAuthorizationAuditLevel="Success"
         messageAuthenticationAuditLevel="Success" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

这是我的 .svc 文件，它托管在 IIS 中，在使用客户端应用程序时运行良好。

```
 <%@ ServiceHost Language="C#" Debug="true" Service="WW.Common.Service.Impl.BulkEmailService" %> 
```

这是我用作服务参考并将其命名为 TestBulkEmailService 的 WCF 服务的实现和合同。

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Runtime.Serialization;
  using System.ServiceModel;
  using System.Text;
  using WW.EnterpriseLibrary.Error;
  using WW.Common.Service.Contract;
  using WW.Common.Data.DTO;
  using WW.Common.Data;
  using WW.ServiceCore.Error;
  using WW.ServiceCore.Log;
  using BulkEmailDac = WW.Common.DataAccess.Impl.BulkEmailDac;

  namespace WW.Common.Service.Impl
  {
      public class BulkEmailService : IBulkEmailService
      {

          private BulkEmailDac emailDac;
          ErrorMsg err_msg = new ErrorMsg();

          public BulkEmailService()
          {
              emailDac = new BulkEmailDac();
          }

          public string Abc(string s1)
          {
              string result = s1;
              return result;
          }

          /// <summary>
          /// Get Bulk Email Record List
          /// </summary>
          /// <returns></returns>
          public BulkEmailDTOList GetBulkEmailInfo(int recordLimit)
          {
              try
              {
                  return emailDac.GetBulkEmailInfo(recordLimit);
              }
              catch (Exception ex)
              {
                  if (ex is FaultException<OperationFault>)
                  {
                      //throw;
                      Console.WriteLine("faultException1 Message: " + ex.Message);
                      throw;
                  }
                  else
                  {

                      //LOG AND THROW AN UNKNOWN EXCEPTION
                      ApplicationLog.WriteError(DateTime.Now.ToString() + "|"
                                                + "GetBulkEmailInfo" + "|"
                                                + ex.Message + "|"
                                                + ex.StackTrace);
                      Console.WriteLine("faultException2 Message: " + ex.StackTrace);
                      throw new FaultException<OperationFault>(new OperationFault(ex.Message, ErrorMessages.Unknown_Error_Code));
                  }
              }
          } 
```

合同：

```
 using System;
 using System.Web;
 using System.Collections.Generic;
 using System.Linq;
 using System.Runtime.Serialization;
 using System.ServiceModel;
 using System.Text;
 using WW.EnterpriseLibrary.Error;
 using WW.Common.Data.DTO;

 namespace WW.Common.Service.Contract
 {
     [ServiceContract]
     public interface IBulkEmailService
     {

         [OperationContract]
         [FaultContractAttribute(typeof(OperationFault))]
         BulkEmailDTOList GetBulkEmailInfo(int recordLimit);

         [OperationContract]
         [FaultContractAttribute(typeof(OperationFault))]
         int SendBulkEmail(string emailFm, string emailTo, string ccTo, string subject, string body);

} 
```

# ios - ARC的语义问题

> ID：15169110
> 
> 赞同：1
> 
> 时间：2013-03-02T00:19:12.673
> 
> 标签：ios, objective-c, xcode

我`.h`文件中的代码是

```
@property (weak, nonatomic) IBOutlet UITextField *textFieldTask;
@property (weak, nonatomic) IBOutlet UIBarButtonItem *buttonDone; 
```

并且出现错误

`@synthesize`'weak' 属性只允许在`ARC`or`GC`模式下使用

当我用强替换弱时，按钮不起作用

我不能将它置于 ARC 模式（它会破坏我的项目）

有什么我能做的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T00:24:48.837

您需要使用`retain`或`assign`不想使用`ARC`

**保持**

```
@property (retain, nonatomic) IBOutlet UITextField *textFieldTask;
@property (retain, nonatomic) IBOutlet UIBarButtonItem *buttonDone; 
```

**分配**

```
@property (assign, nonatomic) IBOutlet UITextField *textFieldTask;
@property (assign, nonatomic) IBOutlet UIBarButtonItem *buttonDone; 
```

# ios - 添加三个子视图后工具栏消失

> ID：15169113
> 
> 赞同：0
> 
> 时间：2013-03-02T00:19:24.407
> 
> 标签：ios, xcode, uiview, uiimageview, uicollectionview

您好我正在尝试将集合视图中的项目添加到同一屏幕上的 uiview。当用户点击一个单元格时，我找到并把它放到下面的 mycreationview 中（我还希望用户在这些添加的 uiimages 周围移动）。而且我在顶部有一个工具栏可以返回等。现在，当我点击单元格 3 次时，添加了 3 个图像以进行查看，但随后工具栏消失并且其上的后退按钮隐藏到顶部/左侧，只有四分之一可见，怎么能我调试这个？

 `````
 myCollectionViewCell* cell=(myCollectionViewCell* ) [self.myCollectionView cellForItemAtIndexPath:index];
    UIImageView *iv = [[UIImageView alloc]initWithImage:cell.myCellImageView.image];
    iv.contentMode = UIViewContentModeScaleAspectFill;
    NSLayoutConstraint * constraint1 = [NSLayoutConstraint constraintWithItem:iv attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:self.myCreationView attribute:NSLayoutAttributeWidth multiplier:0.4f constant:0];
    NSLayoutConstraint * constraint2 = [NSLayoutConstraint constraintWithItem:iv attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:self.myCreationView attribute:NSLayoutAttributeHeight multiplier:0.4f constant:0];
    NSLayoutConstraint * constraint3 = [NSLayoutConstraint constraintWithItem:iv attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationEqual toItem:self.myCreationView attribute:NSLayoutAttributeLeft multiplier:0 constant:10];
    NSLayoutConstraint * constraint4 = [NSLayoutConstraint constraintWithItem:iv attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual toItem:self.myCreationView attribute:NSLayoutAttributeTop multiplier:0 constant:10];

    [iv setTranslatesAutoresizingMaskIntoConstraints:NO];
    iv.autoresizesSubviews=YES;
    iv.userInteractionEnabled=YES;
    [self.myCreationView addSubview:iv];
    [self.myCreationView addConstraint:constraint1];
    [self.myCreationView addConstraint:constraint2];
    [self.myCreationView addConstraint:constraint3];
    [self.myCreationView addConstraint:constraint4]; 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:15:11.663

回答我的问题。我使视图变小了一点，并且不触摸工具栏，问题就消失了。所以我想如果他们互相接触就会产生一个约束。``

# android - Android LogCat 设备已断开连接

> ID：15169115
> 
> 赞同：15
> 
> 时间：2013-03-02T00:19:39.080
> 
> 标签：android, eclipse, logcat

我在使用 Logcat 时有点挣扎。每次我按下按钮更改程序中的意图时，电话都会与 LogCat 断开连接，并显示“设备已断开连接”消息。

什么会导致这种情况？为什么？会不会是我的代码在断开 LogCat 时出错？或者这是一个 LogCat 问题？

我试图重新启动 Eclipse，并没有运气停止 adb.exe 进程。

```
 : E/(): Device disconnected 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-06T06:28:15.167

DDMS 中可能存在一些同步问题。只需重新启动eclipse它就可以正常工作了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-22T16:13:37.703

这是 Eclipse DDMS 中的一个真正问题。如果您`adb logcat`在 Eclipse 显示“设备已断开连接”的同时运行，您很可能仍会看到 logcat 输出（这就是我的情况）。我能看到的唯一真正的解释是 DDMS 有一个错误。

我的解决方案？切换到 IntelliJ。它没有相同的问题，或 Eclipse DDMS 连接到 adb 识别的设备的任何类似问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T21:53:17.020

我`restarted`我的`device`, `closed eclipse`, 用一个`command prompt`打开的 at`android-sdk/platform-tools`运行`adb kill-server`, `reopened eclipse`, 然后用同样`command prompt`的运行`adb logcat`。

然后我的问题得到了解决，但我不确定哪个步骤解决了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-13T11:12:02.020

这里评论了一个对我有用的解决方案，**清除日志**：

[LogCat 在 Eclipse 中停止运行需要重新启动](https://stackoverflow.com/questions/5011816/logcat-stops-running-in-eclipse-needs-restart)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-02T17:18:36.993

**只需在终端**中键入此命令

 **```
adb devices 
```

你应该看到这个日志：

```
List of devices attached
adb server version (40) doesn't match this client (36); killing...
* daemon started successfully *
FA57NY900383    device 
```

再次运行，您的应用程序开始在您的设备上运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T01:44:53.097

所以我解决了这个问题。我不确定是哪一部分起到了作用，但我注意到 javaw.exe 正在计算机上运行，​​即使 eclipse 已关闭。所以我强行关闭了这个，不幸的是我还重新安装了我的果冻豆ROM。所以我不确定到底是什么伎俩。我敢打赌那是电话。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-22T17:10:57.767

我遇到了同样的问题，当我可以清楚地点击调试并选择我的手机时，它一直说“设备断开连接”，但由于某种原因，我期待 LogCat 已经开始运行。

但是如果手机被锁定（facepalm）就不会了。解锁后它看起来很好。

希望这可以帮助那些在尝试调试/使用 LogCat 时没有意识到他们的手机被锁定的人。**

# objective-c - 架构 i386 的 3 个重复符号

> ID：15169116
> 
> 赞同：0
> 
> 时间：2013-03-02T00:19:57.690
> 
> 标签：objective-c, xcode

在我尝试使用 Xcode 构建我的应用程序后，出现此错误：

```
 duplicate symbol _OBJC_IVAR_$_StoreVars._Traguardo in:
    /Users/Fede/Library/Developer/Xcode/DerivedData/ProvaTapChallenge-bqumsaqmowwbdfbzgzrrwlblxsgh/Build/Intermediates/ProvaTapChallenge.build/Debug-iphonesimulator/ProvaTapChallenge.build/Objects-normal/i386/ViewController.o
    /Users/Fede/Library/Developer/Xcode/DerivedData/ProvaTapChallenge-bqumsaqmowwbdfbzgzrrwlblxsgh/Build/Intermediates/ProvaTapChallenge.build/Debug-iphonesimulator/ProvaTapChallenge.build/Objects-normal/i386/ViewControllerBase.o
duplicate symbol _OBJC_METACLASS_$_StoreVars in:
    /Users/Fede/Library/Developer/Xcode/DerivedData/ProvaTapChallenge-bqumsaqmowwbdfbzgzrrwlblxsgh/Build/Intermediates/ProvaTapChallenge.build/Debug-iphonesimulator/ProvaTapChallenge.build/Objects-normal/i386/ViewController.o
    /Users/Fede/Library/Developer/Xcode/DerivedData/ProvaTapChallenge-bqumsaqmowwbdfbzgzrrwlblxsgh/Build/Intermediates/ProvaTapChallenge.build/Debug-iphonesimulator/ProvaTapChallenge.build/Objects-normal/i386/ViewControllerBase.o
duplicate symbol _OBJC_CLASS_$_StoreVars in:
    /Users/Fede/Library/Developer/Xcode/DerivedData/ProvaTapChallenge-bqumsaqmowwbdfbzgzrrwlblxsgh/Build/Intermediates/ProvaTapChallenge.build/Debug-iphonesimulator/ProvaTapChallenge.build/Objects-normal/i386/ViewController.o
    /Users/Fede/Library/Developer/Xcode/DerivedData/ProvaTapChallenge-bqumsaqmowwbdfbzgzrrwlblxsgh/Build/Intermediates/ProvaTapChallenge.build/Debug-iphonesimulator/ProvaTapChallenge.build/Objects-normal/i386/ViewControllerBase.o
ld: 3 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我该如何解决这个问题？请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-26T14:28:12.917

如果您不小心导入了 StoreVars.m 文件而不是 StoreVars.h，则可能会发生这种情况

# html - HTML5 视频标签 youtube

> ID：15169118
> 
> 赞同：1
> 
> 时间：2013-03-02T00:20:07.563
> 
> 标签：html, video, youtube

我找到了将 youtube 链接放入 HTML 标记的解决方案，但它不起作用，视频不显示：

```
<video controls="controls" x-webkit-airplay="allow" class="video-stream" 
  src="http://youtu.be/8sUr5uBFInQ"></video> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:46:23.163

根据[**此博客**](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)，您需要不同的语法。

```
<iframe class="youtube-player" type="text/html" width="640" height="385" 
  src="http://www.youtube.com/embed/VIDEO_ID" allowfullscreen frameborder="0">
</iframe> 
```

# css - 下拉问题下带有渐变的CSS角度菜单

> ID：15169120
> 
> 赞同：5
> 
> 时间：2013-03-02T00:20:18.133
> 
> 标签：css, drop-down-menu, submenu

我有一个倾斜的菜单，它下面有一个渐变，一直延伸到上边缘。我还有一个子导航，它具有不同的渐变，在主导航的渐变下方运行。一切看起来都不错，但是当您尝试滚动以从子菜单下拉菜单中进行选择时，它不会让您进入主菜单上的下一个项目。我知道这是一个 z-index 问题，但我不知道如何让它看起来和功能正常。

在此先感谢您对这个问题的任何了解！！！

我在 jsfiddle 上有它：http: [//jsfiddle.net/jollyrogerd/EwFHY/3/](http://jsfiddle.net/jollyrogerd/EwFHY/3/)

CSS：

```
 #cssmenu > ul {
    list-style: none;
    margin: -95px 0 0 0;
    padding: 0;
    line-height: 1;
    float: left;
    display:inline;
}
#cssmenu > ul {
    display: block;
    position: relative;
    width: 610px;
    -webkit-transform: rotate(-24deg);
    -moz-transform: rotate(-24deg);
    -o-transform:rotate(-24deg);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);
}
#cssmenu > ul li {
    display: block;
    position: relative;
    margin: 0;
    padding: 0;
    width: 610px;
}
#cssmenu > ul li a {
    display: block;
    position: relative;
    margin: 0;
    padding: 8px 20px;
    width: 610px;
    font-family:"Myriad Pro", "Trebuchet MS", sans-serif;
    letter-spacing: .05em;
    color: #939598;
    text-decoration: none;
    text-transform: lowercase;
    font-size: 13px;
    font-weight: 300;
    border-top-left-radius: 20px;
    border-bottom-left-radius: 20px;
}
#cssmenu > ul li.home>a:hover, #cssmenu > ul li.home:hover>a {
    color: #fff;
    background: #a2d062;
    background: -webkit-linear-gradient(bottom, #6e9b31, #a2d062);
    background: -ms-linear-gradient(bottom, #6e9b31, #a2d062);
    background: -moz-linear-gradient(bottom, #6e9b31, #a2d062);
    background: -o-linear-gradient(bottom, #6e9b31, #a2d062);
    border-color: transparent;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    transition: all 0.2s linear;
}
#cssmenu > ul li.productsrev>a:hover, #cssmenu > ul li.productsrev:hover>a {
    color: #fff;
    background: #61c46e;
    background: -webkit-linear-gradient(bottom, #2b8a39, #61c46e);
    background: -ms-linear-gradient(bottom, #2b8a39, #61c46e);
    background: -moz-linear-gradient(bottom, #2b8a39, #61c46e);
    background: -o-linear-gradient(bottom, #2b8a39, #61c46e);
    border-color: transparent;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    transition: all 0.2s linear;
}
#cssmenu > ul li.about>a:hover, #cssmenu > ul li.about:hover>a {
    color: #fff;
    background: #459cc7;
    background: -webkit-linear-gradient(bottom, #025e8e, #459cc7);
    background: -ms-linear-gradient(bottom, #025e8e, #459cc7);
    background: -moz-linear-gradient(bottom, #025e8e, #459cc7);
    background: -o-linear-gradient(bottom, #025e8e, #459cc7);
    border-color: transparent;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    transition: all 0.2s linear;
}
#cssmenu > ul li.customers>a:hover, #cssmenu > ul li.customers:hover>a {
    color: #fff;
    background: #2e6dab;
    background: -webkit-linear-gradient(bottom, #09427a, #2e6dab);
    background: -ms-linear-gradient(bottom, #09427a, #2e6dab);
    background: -moz-linear-gradient(bottom, #09427a, #2e6dab);
    background: -o-linear-gradient(bottom, #09427a, #2e6dab);
    border-color: transparent;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    transition: all 0.2s linear;
}
#cssmenu > ul li.contacts>a:hover, #cssmenu > ul li.contacts:hover>a {
    color: #fff;
    background: #6852a4;
    background: -webkit-linear-gradient(bottom, #3d2975, #6852a4);
    background: -ms-linear-gradient(bottom, #3d2975, #6852a4);
    background: -moz-linear-gradient(bottom, #3d2975, #6852a4);
    background: -o-linear-gradient(bottom, #3d2975, #6852a4);
    border-color: transparent;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    transition: all 0.2s linear;
}
#cssmenu > ul ul {
    position: absolute;
    left: 120px;
    top: -9999px;
    padding-left: 0px;
    padding-top: 40px;
    opacity: 0;
    z-index: 1;
}
#cssmenu > ul ul.bgsubproducts { 
    background-image: url(http://dev.unnaturallygeisha.com/fellowrobots/wp-content/uploads/2013/02/square-gradient.png);
    background-repeat:no-repeat;
    overflow: visible;
    height: 200px;
    margin-top:-40px;
    margin-left: 0px;
    z-index:-100;
    -webkit-transition: opacity 1s;
    -moz-transition: opacity 1s;
    -o-transition: opacity 1s;
}
#cssmenu > ul ul.bgsubabout { 
    background-image: url(http://dev.unnaturallygeisha.com/fellowrobots/wp-content/uploads/2013/02/square-gradient.png);
    background-repeat:no-repeat;
    overflow: visible;
    height: 200px;
    margin-top:-40px;
    margin-left: 0px;
    z-index:-100;
    -webkit-transition: opacity 1s;
    -moz-transition: opacity 1s;
    -o-transition: opacity 1s;
}
#cssmenu > ul ul.bgsubcustomers { 
    background-image: url(http://dev.unnaturallygeisha.com/fellowrobots/wp-content/uploads/2013/02/square-gradient.png);
    background-repeat:no-repeat;
    overflow: visible;
    height: 200px;
    margin-top:-40px;
    margin-left: 0px;
    z-index:-100;
    -webkit-transition: opacity 1s;
    -moz-transition: opacity 1s;
    -o-transition: opacity 1s;
}
#cssmenu > ul ul li a {
    color: #5d6064;
    background: transparent;
    z-index:1000;
}
#cssmenu > ul ul li.subproducts:hover>a {
    color: #2b8a39;
    background: transparent;
}
.subproducts {
    z-index:1000;
}
#cssmenu > ul ul li.subabout:hover>a {
    color: #025e8e;
    background: transparent;
}
#cssmenu > ul ul li.subcustomers:hover>a {
    color: #09427a;
    background: transparent;
}
 #cssmenu > ul li:hover>ul {
    top: 30px;
    opacity: 1;
} 
```

HTML：

```
<div id='cssmenu'>
<ul>
    <li class='home'><a href="#" title="Link 1">home</a>

    </li>
    <li class='productsrev'> <a href="#" title="Link 3">products</a>

        <ul class="bgsubproducts">
            <li class='subproducts'><a href="#" title="Link 1">helo</a>

            </li>
</ul>
</li>
<li class='about'><a href="#" title="Link 3">about</a>

    <ul
    class="bgsubproducts">
        <li class='subabout'><a href="#1" title="Link 1">what's a telepresence robot?</a>

        </li>
        <li class='subabout'><a href="#1" title="Link 1">our team</a>

        </li>
        <li class='subabout'><a href="#1" title="Link 1">our robots</a>

        </li>
        <li class='subabout'><a href="#1" title="Link 1">our partners</a>

        </li>
        </ul>
</li>
<li class='customers'><a href="#4" title="Link 4">customers</a>

    <ul class="bgsubproducts">
        <li class='subcustomers'><a href="#1" title="Link 1">driving control panel</a>

        </li>
        <li class='subcustomers'><a href="#1" title="Link 1">instructions</a>

        </li>
        <li class='subcustomers'><a href="#1" title="Link 1">&nbsp;&nbsp;&nbsp;&nbsp; setting up your robot</a>

        </li>
        <li class='subcustomers'><a href="#1" title="Link 1">&nbsp;&nbsp;&nbsp;&nbsp; driving instructions</a>

        </li>
    </ul>
</li>
<li class='contacts'><a href="#" title="Link 5">contacts</a>

</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:27:22.943

```
#cssmenu > ul li:not(:hover) {
    z-index: -101;
} 
```

这为所有未悬停的菜单项提供`z-index`-101。这意味着当一个悬停时，它不再具有`z-index`-101 使其位于子菜单上方，但其他未悬停的仍将位于子菜单下方，并且不能从那里悬停。

它解决了问题，而且看起来仍然很棒。

那个菜单看起来棒极了；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:31:16.497

两种解决方案：

**更好的一个：**

[JSFiddle](http://jsfiddle.net/EwFHY/12/)

```
#cssmenu > ul > li.home:hover a,
#cssmenu > ul > li.productsrev:hover a,
#cssmenu > ul > li.about:hover a,
#cssmenu > ul > li.customers:hover a,
#cssmenu > ul > li.contact:hover a {
    z-index:501;
}
#cssmenu > ul > li.home > ul,
#cssmenu > ul > li.productsrev > ul,
#cssmenu > ul > li.about > ul,
#cssmenu > ul > li.customers > ul
#cssmenu > ul > li.contact > ul{
    z-index:500;
} 
```

**另一个：**

[JSF](http://jsfiddle.net/EwFHY/11/)中。

我将`#cssmenu > ul`, `#cssmenu > ul li`,设置`#cssmenu > ul li a`为 all have`width: 90px;`而不是`width: 610px;`

然后我添加了这两个：

```
#cssmenu > ul li ul li,
#cssmenu > ul li ul li a,
#cssmenu > ul >li:hover,
#cssmenu > ul >li:hover > a,
#cssmenu > ul >li > a:hover {
    width:610px;
} 
```

在这里忍受我：我将子导航设置为 610px，`li`并将`a`顶级导航设置为，`90px`除非它悬停，然后设置为`610px`.

之前的问题是顶级导航与子导航重叠，因为它们都设置得太宽了

但是由于 css-transformations 它的动画从 90px 到 610px 的增长；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T20:37:34.480

I fixed it by making the background graphics transparant where the colored gradient lies. So it looks like it is behind but is in reality on top. Thanks for your help!

# c++ - 在 Visual Studio 2010 中，调试模式下没有堆栈展开

> ID：15169122
> 
> 赞同：1
> 
> 时间：2013-03-02T00:20:21.350
> 
> 标签：c++, visual-studio-2010, visual-c++

这是代码：

```
#include <iostream>

void f() {
    throw 1;
    std::cout << "f(): should not be printed!!\n";
    std::cout << "f(): not should this!!\n";
}

int main(int, const char**) {
    f();
    std::cout << "main(): This not be printed!!\n";
    return 0;
} 
```

当作为控制台应用程序运行时，在调试模式下和调试器下没有堆栈展开并且 cout 语句被打印？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T01:22:54.413

如果您使用调试器运行，这在技术上是可行的。不过，你并没有讲述整个故事。抛出异常时，调试器将首先显示一个对话框。它看起来与此类似（我的是 Windows 8 上的 VS2012）：

![在此处输入图像描述](../Images/5a14fbe6e728b6b836b55c8de477a0fd.png)

如果单击 Break 按钮，则调试器将在 throw 语句处中断，让您有机会检查状态。当您单击“继续”按钮时**，异常将被忽略**，程序将继续执行，就好像什么都没发生一样。当您休息然后恢复运行时也会发生这种情况。

这是一项*功能*，而不是错误，它允许您挽救已经花费大量时间的调试会话。继续下去当然不是很有用，因为您的程序可能处于不良状态，但替代方案也不是很好。您几乎总是希望单击 Break 并使用调试器来更正状态，以便您可以有意义地继续调试。

当然，如果没有调试器，这将永远不会发生，您的程序将立即终止。

堆栈展开的唯一可能方法是编写一个捕获异常的*catch*子句。不管你是否在调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:51:50.020

回答我自己的问题的关键在于回答另一个子问题：在抛出异常之后，堆栈展开从什么时候开始？堆栈展开意味着以相反的顺序调用仍然存在的所有自动对象的析构函数。答：此时控制权被传递给异常处理程序，即异常被捕获。如果未捕获到异常，C++ 异常机制将调用终止函数，并且默认情况下调用 abort()。通过以下代码可以看到这种机制的作用：

```
struct X {
    ~X() { std::cout << "~X !!\n"; }
};

int main(int, const char**) {
    X x; 
    throw 1;
    return 0;
} 
```

在 throw 之后，X 的析构函数永远不会被调用，因为无异常处理程序已获得控制权，因此程序中止。回到最初的问题，在调试调试版本和程序执行过程中，当周围没有合适的 try-catch 块时抛出异常，MS Studio 调试器在抛出点中断并呈现您会看到上面显示的对话窗口，并为您提供“继续”选项。Continue 不应被解释为“继续使用异常机制”，而是“继续进行，就好像什么都没发生一样”，即在 throw 之后使用下一行代码。

# php - 如何在字符串中查找 3 个或更多字符？

> ID：15169125
> 
> 赞同：1
> 
> 时间：2013-03-02T00:20:44.357
> 
> 标签：php, string

```
$string = "oidjdssd , odi,jdois, 3089u,, oisdjsd"; 
```

我如何以最好的方式找出上面的字符串中是否有超过 3 个逗号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:21:56.937

我会建议[`substr_count`](http://php.net/substr_count)。你可以看看结果是否`>3`超过三个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:24:35.790

```
echo count_chars($string)[ord(',')]; 
```

或者对于 PHP<5.4

```
$chars = count_chars($string);
echo $chars[ord(',')]; 
```

顺便说一句：看起来，你正在处理 CSV 数据，你应该看看[`str_getcsv()`](http://php.net/str-getcsv)

# javascript - Harvest's Chosen 可以与 Python Pyramid 框架一起使用吗？

> ID：15169126
> 
> 赞同：0
> 
> 时间：2013-03-02T00:20:50.240
> 
> 标签：javascript, jquery, python, pyramid, jquery-chosen

如果是，我该如何设置它呢？否则，有什么替代方案吗？我在亚马逊的 aws 服务中运行它，所以我有一个运行 Fedora 的 linux 服务器。

我需要 npm 来安装选择，但由于我已经在运行 python 框架，可以在上面安装 node.js 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T20:38:40.533

[Chosen](http://harvesthq.github.com/chosen/) is a JQuery/Prototype plugin which turns plain boring selects into nice fancy selects, right?

It absolutely totally can work with Pyramid. and you don't even need node.js for that, unless you want to modify the plugin itself (which is written in CoffeeScript) - there are compiled JavaScript versions provided in their repository, for example this is the [minified version which works with jQuery](https://github.com/harvesthq/chosen/blob/master/chosen/chosen.jquery.min.js) - just put it where your other static files are and include it in your template with the `script` tag

In case you still want to install node.js you can do that too, it won't interfere with Pyramid.

# jquery - 未捕获的类型错误：对象函数 (j,s){return new b.fn.init(j,s)} 没有方法“何时”

> ID：15169127
> 
> 赞同：0
> 
> 时间：2013-03-02T00:20:50.807
> 
> 标签：jquery

我正在尝试使用 .getJSON 和 .when 函数在路线计算中使用一些数据。不幸的是，控制台给了我上述错误。请看一下，看看可能出了什么问题？谢谢！（我已经检查并且 .getJSON 代码工作正常，并且吐出我需要的数组。我只需要检索它并将其放入 waypts）。

```
function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var waypts = [];
    var data = $.getJSON("/westcoast_map.php", { westcoast_id : $('.opener').data('westcoast_id')});

    $.when(data).then(function(theData){
                      waypts = theData[1];
                      }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-05T10:25:40.430

请检查您是否使用 jQuery 库 < jQuery 1.5 您必须使用 > = jQuery 1.5 才能使用 $.when

# jquery - IE8 中无效的 JSON 对象，但在 Chrome 中无效

> ID：15169129
> 
> 赞同：1
> 
> 时间：2013-03-02T00:20:54.520
> 
> 标签：jquery, json, parsing, internet-explorer-8

为什么这个 JSON 在 ie8 中无效，但在 firefox 或 chrome 中无效？在我的回调中，我使用 jquery 解析器解析结果以删除一些无效字符。

```
myStringResults = myStringResults.replace("},]","}]");
myStringResults = myStringResults.replace(/'/g,'"');
var objDoc = $.parseJSON(myStringResults); 
```

消息：无效的 JSON：

> [{"id":"4796","parent":"4796","name":"Fname","re​​vision":"1","date":"2013 年 3 月 1 日下午 3:44:22" ,"作者":"席尔瓦,杰弗里 M","文件名":"C:\Users\jmsilva\Desktop\VOC pres.pdf","type":"0"},{"id":"4797", "parent":"4797","name":"Fname","re​​vision":"1","date":"Mar 1, 2013 3:50:46 PM","author":"Silva, Jeffery M ","文件名":"C:\Users\jmsilva\Desktop\testUpload.doc","type":"0"}]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T00:25:53.690

您的反斜杠应该转义为`\\`. 虽然一些浏览器愿意接受`\`后面的任何不构成特殊组合的字符都应该被视为文字，但依赖它是不安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T00:26:32.767

一般来说，您可以使用这样的工具来验证：

[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

# bash - BASH - 然后寻求名称功能

> ID：15169130
> 
> 赞同：0
> 
> 时间：2013-03-02T00:20:58.073
> 
> 标签：bash

有人请告知它在读取文件并从中创建数组的bash函数中调用了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:26:33.560

我目前正在使用 Windows，所以这里没有 bash，但这就是你的做法：

```
value=0;

while read line
do
value=`expr $value + 1`;
arr[$value]=$line;

done < "myfile" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:45:45.977

我认为您正在寻找内置的`mapfile`.

来自`help mapfile`：

```
mapfile: mapfile [-n count] [-O origin] [-s count] [-t] [-u fd] [-C callback] [-c quantum] [array]
    Read lines from the standard input into an indexed array variable.

    Read lines from the standard input into the indexed array variable ARRAY, or
    from file descriptor FD if the -u option is supplied.  The variable MAPFILE
    is the default ARRAY.

    Options:
      -n count  Copy at most COUNT lines.  If COUNT is 0, all lines are copied.
      -O origin Begin assigning to ARRAY at index ORIGIN.  The default index is 0.
      -s count  Discard the first COUNT lines read.
      -t                Remove a trailing newline from each line read.
      -u fd             Read lines from file descriptor FD instead of the standard input.
      -C callback       Evaluate CALLBACK each time QUANTUM lines are read.
      -c quantum        Specify the number of lines read between each call to CALLBACK.

    Arguments:
      ARRAY             Array variable name to use for file data.

    If -C is supplied without -c, the default quantum is 5000\.  When
    CALLBACK is evaluated, it is supplied the index of the next array
    element to be assigned and the line to be assigned to that element
    as additional arguments.

    If not supplied with an explicit origin, mapfile will clear ARRAY before
    assigning to it.

    Exit Status:
    Returns success unless an invalid option is given or ARRAY is readonly or
    not an indexed array. 
```

# python - 在 Python 中使用 cat 命令进行打印

> ID：15169133
> 
> 赞同：6
> 
> 时间：2013-03-02T00:21:29.553
> 
> 标签：python, linux, printing

在 Linux 内核中，我可以使用以下命令将文件发送到打印机

```
cat file.txt > /dev/usb/lp0 
```

据我了解，这会将 file.txt 中的内容重定向到打印位置。我尝试使用以下命令

```
>>os.system('cat file.txt > /dev/usb/lp0') 
```

我认为这个命令会达到同样的效果，但它给了我一个“Permission Denied”错误。在命令行中，我会在连接之前运行以下命令。

```
sudo chown root:lpadmin /dev/usb/lp0 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:48:04.037

虽然您的代码没有理由不工作，但这可能不是您想要的方式。如果你只是想运行 shell 命令，`bash`比`python`. 另一方面，如果你想使用 Python，有比 shell 重定向更好的复制文件的方法。

将一个文件复制到另一个文件的最简单方法是使用[`shutil`](http://docs.python.org/2/library/shutil.html#shutil.copyfile)：

```
shutil.copyfile('file.txt', '/dev/usb/lp0') 
```

（当然，如果您有阻止重定向工作的权限问题，您将在复制时遇到相同的权限问题。）

* * *

您需要一个从键盘读取输入的程序，当它获得某个输入时，它会打印某个文件。这很容易：

```
import shutil

while True:
    line = raw_input() # or just input() if you're on Python 3.x
    if line == 'certain input':
        shutil.copyfile('file.txt', '/dev/usb/lp0') 
```

显然，一个真正的程序会稍微复杂一些——它会用不同的命令做不同的事情，并且可能会接受参数来告诉它要打印哪个文件，等等。如果你想走这条路，该[`cmd`](http://docs.python.org/2/library/cmd.html)模块是一个很大的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:48:26.950

请记住，在 UNIX 中 - 一切都是文件。甚至设备。

因此，您可以只使用基本（或其他任何东西，例如 shutil.copyfile）文件方法（[http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)）。

在您的情况下，代码**可能**（**只是一种方式**）是这样的：

```
#  Read file.txt
with open('file.txt', 'r') as content_file:
    content = content_file.read()
with open('/dev/usb/lp0', 'w') as target_device:
    target_device.write(content) 
```

PS 请不要使用 system() 调用（或类似方法）来解决您的问题。

# windows-8 - WinJS.Binding.List - 未找到键值

> ID：15169135
> 
> 赞同：1
> 
> 时间：2013-03-02T00:21:32.627
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winjs

我有一个使用列表的 WinRT/javaScript 应用程序。作为测试，我有以下代码：

```
var testList = new WinJS.Binding.List();
var item = {
    key: "mykey",
    value: "hello",
    value2: "world"
};

testList.push(item);

var foundItem = testList.getItemFromKey("mykey"); 
```

我希望能够使用提供的密钥找到我的物品；但是`foundItem`总是返回未定义。在设置和使用我的列表时我做错了什么吗？

此外，当我在调试时检查我的列表时，我可以看到我推送的项目的键是“1”而不是“mykey”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:37:44.120

您要推送的是列表中对象的值，键在内部分配为递增的整数值。如果您`base.js`在项目中打开 Windows Library for JavaScript 1.0 参考资料，您将看到以下针对`push`.

注意对 的调用`this._assignKey()`。该值在[oniteminserted](http://msdn.microsoft.com/en-us/library/windows/apps/hh921600.aspx)处理程序中返回给您

```
push: function (value) {
    /// <signature helpKeyword="WinJS.Binding.List.push">
    /// <summary locid="WinJS.Binding.List.push">
    /// Appends new element(s) to a list, and returns the new length of the list.
    /// </summary>
    /// <param name="value" type="Object" parameterArray="true" locid="WinJS.Binding.List.push_p:value">The element to insert at the end of the list.</param>
    /// <returns type="Number" integer="true" locid="WinJS.Binding.List.push_returnValue">The new length of the list.</returns>
    /// </signature>
    this._initializeKeys();
    var length = arguments.length;
    for (var i = 0; i < length; i++) {
        var item = arguments[i];
        if (this._binding) {
            item = WinJS.Binding.as(item);
        }
        var key = this._assignKey();
        this._keys.push(key);
        if (this._data) {
            this._modifyingData++;
            try {
                this._data.push(arguments[i])
            } finally {
                this._modifyingData--;
            }
        }
        this._keyMap[key] = { handle: key, key: key, data: item };
        this._notifyItemInserted(key, this._keys.length - 1, item);
    }
    return this.length;
}, 
```

因此，如果您将以下内容添加到代码中，您将获得稍后可以使用的值（假设您将其与您推送的“键”相关联）。

```
testList.oniteminserted = function (e) {
    var newKey = e.detail.key;
}; 
```

# python - 列表可以转换为整数吗

> ID：15169146
> 
> 赞同：4
> 
> 时间：2013-03-02T00:22:28.743
> 
> 标签：python, python-3.x, typeerror

我正在尝试编写一个程序来将消息转换为密码。我正在尝试创建一个基本代码来进行处理。这就是问题所在。

```
data = input('statement')
for line in data:
    code = ('l' == '1',
            'a' == '2'
            'r' == '3',
            'y' == '4')
    line = line.replace(data, code, [data])
print(line) 
```

当我输入我的名字时，上述程序的这一点是这样的：

```
larry 
```

输出应该是

```
12334 
```

但我继续收到这条消息

```
TypeError: 'list' object cannot be interpreted as an integer 
```

所以我假设这意味着我的代码变量必须是要在 replace() 中使用的整数有没有办法将该字符串转换为整数或者有另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T00:27:31.460

您的原始代码给您错误的原因是`line.replace(data, code, [data])`. 该`str.replace`方法可以采用[3 个参数](http://docs.python.org/3/library/stdtypes.html#str.replace)。第一个是您要替换的字符串，第二个是替换字符串，第三个可选参数是您要替换的字符串的实例数 - 一个整数。您正在传递一个列表作为第三个参数。

但是，您的代码也存在其他问题。

`code`目前是`(False, False, False, False)`. 你需要的是一*本字典*。您可能还想在循环之外分配它，因此您不会在每次迭代时都对其进行评估。

```
code = {'l': '1', 'a': '2', 'r': '3', 'y': '4'} 
```

然后，将循环更改为：

```
data = ''.join(code[i] for i in data) 
```

`print(data)`为您提供所需的输出。

但是请注意，如果输入中的字母不在字典中，则会出现错误。`dict.get`如果键不在字典中，您可以使用该方法提供默认值。

```
data = ''.join(code.get(i, ' ') for i in data) 
```

其中第二个参数`code.get`指定默认值。

所以你的代码应该是这样的：

```
code = {'l': '1', 'a': '2', 'r': '3', 'y': '4'}

data = input()
data = ''.join(code.get(i, ' ') for i in data)

print(data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:39:41.867

简单总结一下：

% 猫 ./test.py

```
#!/usr/bin/env python
data = raw_input()
code = {'l': '1', 'a': '2',
        'r': '3', 'y': '4'}

out = ''.join(code[i] for i in data)
print (out) 
```

% python ./test.py

```
larry
12334 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T00:51:43.680

您可以使用[翻译](http://docs.python.org/3.3/library/stdtypes.html#str.translate)：

```
>>> print("Larry".lower().translate(str.maketrans('lary', '1234')))
12334 
```

（假设 Python 3）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T01:07:42.060

前面的评论应该可以很好地解释你的错误信息，所以我只会给你另一种方法来翻译 from `data`to `code`。我们可以利用 Python 的`translate`方法。

```
# We will use the "maketrans" function, which is not included in Python's standard Namespace, so we need to import it.
from string import maketrans

data = raw_input('statement')
    # I recommend using raw_input when dealing with strings, this way
    # we won't need to write the string in quotes.

# Now, we create a translation table
# (it defines the mapping between letters and digits similarly to the dict)
trans_table = maketrans('lary', '1234')

# And we translate the guy based on the trans_table
secret_data = data.translate(trans_table)

# secret_data is now a string, but according to the post title you want integer. So we convert the string into an integer.
secret_data = int(secret_data)

print secret_data 
```

仅作记录，如果您对编码数据感兴趣，您应该检查 **hashing**。
散列法是一种广泛使用的生成秘密数据格式的方法。

一个简单的 Python 哈希示例（使用所谓的 sha256 哈希方法）：

```
>>> import hashlib
>>> data = raw_input('statement: ')
statement: larry
>>> secret_data = hashlib.sha256(data)
>>>print secret_data.hexdigest()
0d098b1c0162939e05719f059f0f844ed989472e9e6a53283a00fe92127ac27f 
```

# javascript - 在点击正文或其他 div 时隐藏一些 div

> ID：15169151
> 
> 赞同：-4
> 
> 时间：2013-03-02T00:23:10.170
> 
> 标签：javascript, jquery, html, performance, jquery-ui

```
<div id="container">
    <div class='sub1'></div>
    <div class='sub2'></div>
    <div class='part1'></div>
     <div class='part2'></div>
 </div> 
```

并且工作就像...单击`sub1`将隐藏`sub1`并`sub2`显示，与`part1`和相同`part2`

并且我需要的是...单击 sub1 （现在`sub2`显示并`sub1`隐藏）后，如果我单击 body 或 in `part2`，我需要隐藏`sub2`并显示`sub1`

与`part1`和相同`part2`。

我尝试使用 jQuery 以不同的方式，但我找不到一个好的解决方案......

请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:46:20.487

您对单击“正文”的用例的描述非常含糊，但是根据您的解释，我认为您需要切换“状态”。即如果一个被隐藏，它应该被显示，反之亦然。这就是我实现的，但如果你需要它会很容易改变。

Jfiddle在这里：

[http://jsfiddle.net/UNCru/1/](http://jsfiddle.net/UNCru/1/)

和代码：

```
$(".sub1, .sub2, .part1, .part2").click(function(event){
    subClicked($(this));
    event.stopPropagation();
});

$("body").click(bodyClicked);

function subClicked($this)
{
    var $target;
    if ($this.attr("class").indexOf("1") != -1)
    {
        // part1 or sub1
        $target = $('.' + $this.attr("class").replace("1","2"));
    }
    else
    {
        // part2 or sub1
        $target = $('.' + $this.attr("class").replace("2","1"));
    }

    $target.show();
    $this.hide();
}

function bodyClicked()
{
    $(".sub1, .sub2, .part1, .part2").each(function(){
            if ($(this).is(":visible"))
                $(this).hide();
            else
                $(this).show();
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:39:38.047

如果您要与 div 共享 css 规则，我建议您使用 ID 来识别它们，那么您可以这样做：

```
jQuery(document).ready(function() // document is loaded and ready
{
   $("#sub1").click(function() 
   {
      $("#sub2").stop(true, true); // stop all animations this is to help minimize 
      $("#sub1").stop(true, true); // overload because of constant clicking
      $("#sub2").show();  $("#sub1").hide() // show div 2 and hide div 1
   })
}); 
```

更改其他 div 的相同代码只是将标识符（它是 $("") 语法中的那个）更改为 part1 或 part2。您可以对类执行相同操作，但标识符以“。”开头 而不是“#”，但使用类标识符执行此操作将使该类的所有 div 隐藏或显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:58:00.340

用javascript很简单...

[http://jsfiddle.net/MpLFZ/](http://jsfiddle.net/MpLFZ/)

```
<div id="sub1" onclick="document.getElementById('sub2').style.display = 'block'; document.getElementById('sub1').style.display = 'none';">sub1</div><br />
<div id="sub2" onclick="document.getElementById('sub1').style.display = 'block'; document.getElementById('sub2').style.display = 'none';" style="display:none;">sub2</div> 
```

# javascript - 如何添加成功功能？

> ID：15169152
> 
> 赞同：2
> 
> 时间：2013-03-02T00:23:20.490
> 
> 标签：javascript

我想添加一个成功和失败的功能，但我该怎么做呢？我在下面有这段代码：

```
 class ={};

    class.hey = function(values)
    {
      document.getElementById(values.id).innerHTML = values.Val ;

    return class;
    }

    class.hey({
    id:"target",
    Val: "hello world",//this wil work and will display that value in the span tag
    })

<span id="target"></span>//here will appear the value passed before 
```

我如何添加一个函数来告诉我一切是否正常？我一直在尝试，但我无法解决这个 id 是如何工作的示例

```
 class ={};

    class.hey = function(values)
    {
      document.getElementById(values.id).innerHTML = values.Val ;

    return class;
    }

    class.hey({
    id:"objetive",//the element does not exist
    Val: "hello world",//this wil work and will display that value in the span tag
    success:function(msg)
        {
 alert("ok!")

},

     error:function(msg){
      alert("wrong");
   }
    })

<span id="target"></span>//here will appear the value passed before 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:26:48.680

这对 JavaScript 来说根本不是自动的，但你可以这样做：

```
class.hey = function (value) {
    var value = document.getElementById(values.id);
    if (!value) {
        value.error(values.id + " is not an element")
        return false;
    }
    value.innerHTML = values.val;
    value.success("okay!");
} 
```

# oop - 在 Yii 中实现 GUID

> ID：15169154
> 
> 赞同：0
> 
> 时间：2013-03-02T00:23:21.560
> 
> 标签：oop, design-patterns, yii

如果你有一个数据模型，其中一个表是一个`guid`只有一`guid`列的表，并且许多表都有一个引用它的主键`guid`，你会如何建议将这种类型的逻辑合并到 Yii 中？要为任何有能力的事物创建一个新模型`guid`，您必须先创建一个`guid`。放置这种逻辑的正确位置在哪里？

编辑：更具体地说，这是我面临的问题：

*   我有一个 guid 表`tbl_guid`，其中有一列`guid`是 MySQL`BIGINT`
*   一些表，如，`tbl_foo`有一个 PK`guid`引用`guid``tbl_guid`
*   模型有`Foo`关系`self::BELONGS_TO, 'Guid', 'guid'`
*   在完全准备好创建之前，我不想创建新的 guid`Foo`
*   我想以某种方式延迟我的保存，`guid`直到我真正保存（并以其他方式验证）`Foo`
*   但是，`Foo`永远不会验证，因为它没有向导。

编辑2：我已经发布了自己的答案，但我希望有人有更好的答案/改进建议。以下是我的回答存在的问题：

*   我们如何强制它`owner`遵守某些接口，这样我们就不必投入一堆条件来检查它是否`owner`具有属性或方法等
*   即使数据库不接受`null`for ，从所需属性列表中`guid`删除似乎仍然是错误的。`guid`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:27:52.380

这是我能想到的最好的：

`CActiveRecordBehavior`为有`guid`能力的模型创建一个新的：

```
public function beforeSave() {

    if (!$this->owner->guid) {

        $guid = new Guid;
        $guid->save();

        $this->owner->guid = $guid->guid;
    }
} 
```

将行为附加到模型上，或在模型的`behaviors`数组中定义它。

```
public function init() {
    $behavior = new GuidBehavior;
    $this->attachBehavior('GuidBehavior', $behavior);
} 
```

删除所需的`guid`所以验证不会失败：

```
array('name', 'required'), //guid isn't here 
```

测试

```
$brand->save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:35:15.643

遗产。如果您之前实现了我的 BaseModel 代码，您可以重写`__construct()`BaseModel 中的方法来创建 GUID 类的实例。

基本型号：

```
public function __construct()
{
    parent::__construct();

    $newGuid = new GUID();

    return $this;
} 
```

见[http://www.yiiframework.com/doc/api/1.1/CActiveRecord](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#__construct-detail)

# apache-flex - 在 Flex 4.6 中禁用设备的自动旋转功能时处理方向的变化

> ID：15169155
> 
> 赞同：0
> 
> 时间：2013-03-02T00:23:21.817
> 
> 标签：apache-flex, screen-orientation, device-orientation

当设备的自动旋转功能被禁用时，“StageOrientationEvent.ORIENTATION_CHANGE”事件不会触发（调度）。

我正在开发一款只能在 PORTRAIT 模式下运行的游戏。我推测许多用户未选中此选项显示设置。

无论设备设置如何，如何检测屏幕旋转。我应该为此使用加速度计还是有更好的方法？

![自动旋转屏幕](../Images/d85dceff4148bd7626d5c1eda51ed1c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:45:11.783

如果您的游戏必须始终在 PORTRAIT 模式下运行；那么您不必担心设备方向的变化。您要做的是确保无论设备设置如何，您的游戏始终以纵向模式启动。

在应用程序描述符文件中；设置这些值：

```
<aspectRatio>portrait</aspectRatio>
<autoOrients>false</autoOrients> 
```

应用程序描述符文件是Flash Builder 将在您创建主应用程序时创建的“ *MainApplication -app.xml”文件。*

在文档理论中，这些更改应该做到；但如果我没记错的话，我在某些版本的 Android 中遇到了问题，应用程序以错误的方向启动并且不会改变。

因此，在我的应用程序中，我在主应用程序文件中添加了 applicationComplete 和 activate 处理程序，并使用这些方法来指定游戏的纵横比。像这样的东西：

```
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark" 
applicationComplete="viewnavigatorapplication1_applicationCompleteHandler(event)"
activate="viewnavigatorapplication1_activateHandler(event)"> 
<fx:Script><![CDATA[
    import mx.events.FlexEvent;

    protected function viewnavigatorapplication1_applicationCompleteHandler(event:FlexEvent):void{
      this.stage.setAspectRatio( StageAspectRatio.PORTRAIT);
    }

    protected function viewnavigatorapplication1_activateHandler(event:Event):void{
      if(this.stage){
        this.stage.setAspectRatio( StageAspectRatio.PORTRAIT );
      }
}

]]></fx:Script>
</s:ViewNavigatorApplication> 
```

我不记得在 iOS 设备上测试过这个特定的用例；所以有可能我只在Android上遇到了问题。或者我可能先编写了 Android 代码，这就是为什么我在 iOS 上从来没有遇到过问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:49:25.270

虽然我用过这个方法，但我不能把它归功于它，但请看：[请看这个帖子](https://stackoverflow.com/questions/12249226/how-can-i-properly-control-stage-orientation-on-android-with-air-mobile)

请记住，如果您正在为 iOS 开发，您不能锁定设备方向。您必须添加事件侦听器来处理 iOS 的方向更改。我做的第一个应用程序因为试图锁定方向而被拒绝。

# jquery - jQuery - 按其先前克隆的类删除元素

> ID：15169156
> 
> 赞同：0
> 
> 时间：2013-03-02T00:23:22.333
> 
> 标签：jquery

下面是我的代码。最后一点代码是不起作用的部分。

我正在使用 jQuery 从对象数组中填充数据表：

```
// loop to populate table data
for (var i =0; i <= numItems-1; i++) {
    var newItem = '<tr id="item_' + (i+1) + '"><td>' + items[i].name +
'</td>' + '<td>$' + items[i].price + '</td>' + '<td>' + items[i].category + 
'</td>' + '<td>' + items[i].type + '</td>' + '<td>' + items[i].modelNumber +
'</td></tr>';
    $('#itemData').append(newItem);
}; 
```

然后，我告诉 jQuery 克隆已单击的元素，向该元素添加一个类（cartItem），以便稍后在用户单击它时将其删除。我将它放在另一个 ID 为 cartData 的元素中（我不确定我是否以有效的方式这样做）

```
for (var i=0; i<= numItems-1; i++) {
    $('#itemData #item_' + (i+1)).click(function () {
        $(this).clone().addClass('cartItem').appendTo('#cartData');
    });
}; 
```

我正在使用此代码删除元素。

```
$('.cartItem').click(function () {
    $(this).remove();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:25:35.497

在动态元素上，您需要委托事件处理程序：

```
$('#cartData').on('click', '.cartItem', function () {
    $(this).remove();
}); 
```

# android - ListView 选择模式

> ID：15169157
> 
> 赞同：3
> 
> 时间：2013-03-02T00:23:31.017
> 
> 标签：android

谁能告诉我为什么当我将此属性设置为我的 ListView 时：

```
mList.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

每当我单击其中一项时，列表上的项目似乎都会重新加载？如果我删除该行为不会出现的属性。

我在我的活动的 OnCreateView 方法中设置它，我也可以在我的 xml 中设置它，得到相同的结果：

```
<ListView
        android:id="@+id/lista"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="@string/per_lista"
        android:fadingEdge="none"
        android:divider="#e2e2e2"
        android:dividerHeight="1dp"
        android:choiceMode="singleChoice"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:25:25.270

每次选中/取消选中一个项目时，ListView 都会调用 requestLayout() 导致其子项被重绘。但这并不意味着这些项目正在重新加载。如果您的商品正在重新加载，那么我们将需要更多信息。以防万一您想看看，可以在[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/widget/ListView.java#ListView.setChoiceMode%28int%29)找到 ListView 源代码。

不幸的是，我不知道，我什至不确定您是否可以避免重绘列表项。这是预期的行为，因为正在重新绘制项目，以便可以根据选择设置或重置它们的选定状态。您始终可以将源代码用作您自己的自定义 ListView 的基础，该自定义 ListView 在其选择状态更改后不请求布局传递/重绘。

# ios - 动画时无法同时满足约束

> ID：15169158
> 
> 赞同：2
> 
> 时间：2013-03-02T00:23:34.840
> 
> 标签：ios, cocoa-touch, uicollectionview, uiviewanimation, autolayout

我有六个使用 IB 的用户约束设置，如下所示：

```
H:|-(593)-[UIView(411)]-(20)-|
V:|-(20)-[UIView(288)]-(396)-| 
```

我通过更改约束然后调用 layoutIfNeeded 来扩大和缩小视图。例如，为了扩大我会做的观点：

```
H:|-(20)-[UIView(984)]-(20)-|
V:|-(20)-[UIView(663)]-(20)-| 
```

然后打电话

```
[UIView animateWithDuration:.5 animations:^{
    [self.view layoutIfNeeded];
}]; 
```

这种技术会扩大和缩小我的视野，看起来不错，但我收到了一个相当混乱的警告：

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x148d5af0 H:[UIView:0x148d4e50(411)]>",
    "<NSLayoutConstraint:0x148cc940 H:[UITableView:0xace7600(319)]>",
    "<NSLayoutConstraint:0x148ce040 H:|-(NSSpace(20))-[UITableView:0xacd4e00]   (Names: '|':UIView:0x148cddd0 )>",
    "<NSLayoutConstraint:0x148cdf00 H:[UITableView:0xace7600]-(NSSpace(20))-|   (Names: '|':UIView:0x148cddd0 )>",
    "<NSLayoutConstraint:0x148cdea0 H:[UITableView:0xacd4e00]-(NSSpace(8))-[UITableView:0xace7600]>",
    "<NSLayoutConstraint:0x148d4c10 UIView:0x148cddd0.trailing == UIView:0x148cdd40.trailing>",
    "<NSLayoutConstraint:0x148d4b90 H:|-(0)-[UIView:0x148cddd0]   (Names: '|':UIView:0x148cdd40 )>",
    "<NSLayoutConstraint:0x148d6020 H:|-(320)-[UIView:0x148cdd40]   (Names: '|':UIView:0x148cd330 )>",
    "<NSLayoutConstraint:0x148d5fa0 UIView:0x148cdd40.trailing == UIView:0x148cd330.trailing>",
    "<NSLayoutConstraint:0x148d5f60 H:[UIView:0x148d4e50]-(NSSpace(20))-|   (Names: '|':UIView:0x148cd330 )>",
    "<NSLayoutConstraint:0x148d5ee0 H:|-(20)-[UIView:0x148d4e50]   (Names: '|':UIView:0x148cd330 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x148cc940 H:[UITableView:0xace7600(319)]> 
```

现在所有这些约束都是由 IB 生成的。我已经双重^（三重！）检查了这个。我用笔和纸把这些限制放在一起，得到了这个：

```
UIView_A H:[-(20)-[UIView_E]-(20)-] and H:[-(320)-(UIView_B)
UIView_B H:[-(0)-[UIView_D]
UIView_C H:[UIView_C(411)]
UIView_D H:[-(20)-[UITableView_F]-[UITableView_G(319)]-(20)-] 
```

我不明白如何不能满足这些约束。他们看起来很好。我不会更改它们，它们是由 IB 生成的。IB 生成的约束不是可以自动满足的吗？

或者，至少，有没有办法停止警告？它表现得很完美，我不需要看到它打破了一个似乎无论如何都没有做任何事情的约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:45:48.660

这个约束：

> H:[UITableView:0xace7600(319)]>"

似乎是系统分辨率的障碍。

你能把它去掉吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T17:03:20.467

因此，事实证明，我更改约束的顺序很重要。

为了扩大视野，我将

1.  增加宽度：H:|-(593)-[UIView( **984** )]-(20)-|
2.  减少前导空格：H:|-( **20** )-[UIView(984)]-(20)-|

这不会产生任何警告。但是，如果我以相反的顺序执行此操作，我会收到警告：

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints ...

...Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1567f650 H:[UITableView:0x119e6200(319)]> 
```

缩小视图时，我复制了增加宽度的代码（以相同的顺序）并更改了值。这给了我在原始问题中发布的警告。当我切换收缩顺序时，警告消失了。

* * *

为什么会这样？我不知道。当我发现更多时，我会更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T06:11:37.500

我得到了同样的信息，我终于明白了它为什么会发生，
我的解决方案是：在动画的任何时刻都不要让任何对象翻转。

换句话说，约束应该在任何对象的外部，但有时约束在动画期间位于内部，这与我们的预期不同。

换句话说，不要因为约束动画而让上边距侵入下边距。

例如，

```
 top constraint: topA = initially 100

                    [Box A]

     bottom constraint: botA = initially 150 
```

现在，如果你像下面这样设置并设置动画，

```
 topA = 300
      botA = 25 
```

那么应该会出现错误，为什么：线程在底部边缘下降之前侵入底部边缘。所以，你宁愿改变订单，

```
 botA = 25
      topA = 300 
```

然后错误将消失，因为底部约束将保留质量的高度，而下一个顶部约束将缩小对象的高度而不侵入底部边距。

*Point：即使在动画期间，也让对象的宽度和高度连续大于 0，不受约束变化的影响。

我希望我对你有所帮助。

# ruby-on-rails - Rails has_many 查询

> ID：15169163
> 
> 赞同：1
> 
> 时间：2013-03-02T00:23:54.347
> 
> 标签：ruby-on-rails, has-many-through, has-many

我有以下型号：

类别：
has_many :sub_categories

子类别：
has_many :posts

帖子：
belongs_to :sub_category

我正在尝试构建一个页面，该页面将列出带有 Pjax 选项卡的类别，每个类别选项卡将在小部件中列出它的所有子类别，每个小部件中有 5 个帖子。

问题 1：我是否需要与 Category 控制器上的 Posts 建立 has_many_through 关联来实现这一点（以及连接表）？

问题 2：如何构建此查询？我一直在寻找一些方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:38:24.363

首先，不要忘记`belongs_to :category`in`sub_category`模型。

你可以做这样的事情（它不快，所以要小心）：

```
@category.sub_categories.each do |sub_cat|
  sub_cat.posts.each_slice(5) do |posts|
    #here you create a widget, posts have at most 5 elements thanks to each_slice method
    posts.each do |post|
      #do something with each post
    end
  end
end 
```

# iis - IIS URL 重写条件文件是否存在使用捕获组？

> ID：15169164
> 
> 赞同：1
> 
> 时间：2013-03-02T00:24:02.613
> 
> 标签：iis, iis-7.5, conditional-statements, url-rewrite-module

看起来这真的很容易，但似乎找不到一个例子。

用户输入以下 URL：

> [http://www.mysite.com/business/chelan/internet](http://www.mysite.com/business/chelan/internet)

我希望它去：

> /business/internet_chelan.php

仅当文件存在时。否则，请转到：

> /business/internet.php

“车兰”是我所在地区的一个县。如果我想为那个县创建一个特定的页面，我可以简单地将“_chelan”添加到我的文件中。否则，它只会转到一般的互联网页面。

所以我使用以下内容来获取 URL 部分：

> ^(商业|住宅)/([^/]+)/(.+)

并重写为：

> {R:1}/{R:3}_{R:2}.php

效果很好......但我想要条件：

> 如果 {R:1}/{R:3}_{R:2}.php "是文件" 重写为 {R:1}/{R:3}_{R:2}.php

但似乎 {R:} 在条件下不起作用？？？这是真的还是有其他方法可以写？我见过 {C:1} 和 $1 但它们似乎也不起作用。

有任何想法吗？

*Windows 7 上的 IIS 7.5 使用 URL 重写模块*

# c++ - C++：错误：无效使用限定名

> ID：15169169
> 
> 赞同：3
> 
> 时间：2013-03-02T00:24:47.647
> 
> 标签：c++, compiler-errors

**更新：我认为它是固定的。多谢你们！**

我遇到了一个错误，我就是想不通。我有这个代码：

```
//A Structure with one variable and a constructor
struct Structure{
  public:
    int dataMember;

    Structure(int param);
};

//Implemented constructor
Structure::Structure(int param){
    dataMember = param;
}

//A class (which I don't plan to instantiate), 
//that has a static object made from Structure inside of it
class unInstantiatedClass{
  public:   
    static Structure structObject;
};

//main(), where I try to put the implementation of the Structure from my class,
//by calling its constructor
int main(){
    //error on the line below
    Structure unInstantiatedClass::structObject(5);

    return 0;
} 
```

在显示“Structure unInstantiatedClass::structObject(5);”的行上，我收到一条错误消息：

```
error: invalid use of qualified-name 'unInstantiatedClass::structObject' 
```

我用谷歌搜索了这个错误并查看了几个论坛帖子，但每个人的问题似乎都不同。我也试过谷歌搜索“类中的静态结构对象”和其他相关短语，但没有找到任何我认为与我的问题真正相关的短语。

我在这里要做的是：拥有一个我从未实例化的类。并且在该类中拥有一个静态对象，该对象具有一个可以通过构造函数设置的变量。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T00:32:29.737

静态成员的定义不能在函数内部：

```
class unInstantiatedClass{
  public:   
    static Structure structObject;
};

Structure unInstantiatedClass::structObject(5);

int main() {
    // Do whatever the program should do
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T00:32:55.267

我认为问题在于 Structure unInstantiatedClass::structObject(5); 是主要的。放在外面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:28:30.957

你会想使用这个代码：

更新：将静态成员的初始化移动到全局范围。

```
// In global scope, initialize the static member
Structure unInstantiatedClass::structObject(5);

int main(){
    return 0;
} 
```

# c++ - 二叉堆没有匹配函数错误

> ID：15169179
> 
> 赞同：1
> 
> 时间：2013-03-02T00:25:43.030
> 
> 标签：c++, templates, heap

我正在研究二进制堆的链表类型实现，正如它所写的那样，我遇到了一些错误。现在我的 main.cpp 是一个简单的向堆添加元素的测试，但是当我调用我的“添加到堆”函数时它说它找不到它。这是代码：

主文件

```
#include <QtCore/QCoreApplication>
#include "Queue.h"
#include "Heap.h"
#include <bitset>
#include <cmath>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    Heap<int> H;
    H.AddToHeap(1);

    return a.exec();
} 
```

堆.h

```
#ifndef HEAP_H
#define HEAP_H
#include "Node.h"
#include <iostream>
#include <bitset>
#include <cmath>

enum BOUNDARY_ERRORS{OUT_OF_BOUNDS, INVALID_NODE};

template <typename T>
class Heap
{
public:
    Heap();
    Heap(const Heap &other);
    void operator=(const Heap &other);
    ~Heap();

    void AddToHeap(T &data);
    Heap& operator<<(T &data);
    T& Pop();
    Heap& operator>>(T &destination);
    bool Empty() { return size==0; }
    T Peek();

    template <typename U> friend
    ostream& operator<<(const ostream &out, const Heap<U> &H);

    template <typename U> friend
    istream& operator>>(const istream &in, const Heap<U> &H);

private:
    int size;
    Node<T> *rootptr;
    void AddToVacantNode(T &data);
    Node<T>* FindNode(int n);
    Node<T>* FindParentNode(int n);
    Node<T>* LargestChild(Node<T> *nodeptr);
    Node<T>* SmallestChild(Node<T> *nodeptr);
    void Upheap();
    void Downheap();
    void Switch(Node<T> *a, Node<T> *b);
    void Replace(Node<T> *a, Node<T> *b);
    void Copy(const Heap &other);
    bool MIN;

    void Clear();
};

template <typename T>
Heap<T>::Heap()
{
    size = 0;
    rootptr = NULL;
    MIN = 0;
}

template <typename T>
Heap<T>::Heap(const Heap<T> &other)
    : Heap()
{
    Copy(other);
}

template <typename T>
void Heap<T>::operator=(const Heap<T> &other)
{
    Copy(other);
}

template <typename T>
Heap<T>::~Heap()
{
    Clear();
}

template <typename T>
void Heap<T>::AddToVacantNode(T &data)
{
    if (Empty())
        rootptr = new Node<T>(data);
    else
    {
        int destination = size  + 1;
        Node<T> newnode(data);
        Node<T> *parentptr = FindParentNode(destination);
        if (!destination%2)
            parentptr->AddLeftChild(newnode);
        else
            parentptr->AddRightChild(newnode);
    }
}

template <typename T>
Node<T>* Heap<T>::FindParentNode(int n)
{
    if (n == 1)
        return NULL;
    int parentnumber;
    if (!n%2)
    {
        parentnumber = n / 2;
        Node<T> *nodeptr = FindNode(parentnumber);
        return nodeptr;
    }
    else
    {
        parentnumber = (n - 1) / 2;
        Node<T> *nodeptr = FindNode(parentnumber);
        return nodeptr;
    }
}

template <typename T>
void Heap<T>::Upheap()
{
    Node<T> *parentptr = FindParentNode(size);
    Node<T> *childptr = FindNode(size);
    if (MIN)
    {
        while (parentptr && *childptr < *parentptr)
        {
            switch(parentptr, childptr);
            parentptr = FindParentNode(parentptr);
            childptr = FindParentNode(childptr);
        }
        return;
    }
    else
    {
        while (parentptr && *childptr > *parentptr)
        {
            switch(parentptr, childptr);
            parentptr = FindParentNode(parentptr);
            childptr = FindParentNode(childptr);
        }
        return;
    }

}

template <typename T>
Node<T>* Heap<T>::LargestChild(Node<T> *nodeptr)
{
    if (!nodeptr->LeftChild() && !nodeptr->RightChild())
        return NULL;
    else if (nodeptr->LeftChild() && !nodeptr->RightChild())
        return nodeptr->LeftChild();
    else if (nodeptr->RightChild() && !nodeptr->LeftChild())
        return nodeptr->RightChild();
    else
        return (*(nodeptr->LeftChild() > *(nodeptr->RightChild())))?
                    nodeptr->LeftChild() : nodeptr->RightChild();
}

template <typename T>
Node<T>* Heap<T>::SmallestChild(Node<T> *nodeptr)
{
    if (!nodeptr->LeftChild() && !nodeptr->RightChild())
        return NULL;
    else if (nodeptr->LeftChild() && !nodeptr->RightChild())
        return nodeptr->LeftChild();
    else if (nodeptr->RightChild() && !nodeptr->LeftChild())
        return nodeptr->RightChild();
    else
        return (*(nodeptr->LeftChild() < *(nodeptr->RightChild())))?
                    nodeptr->LeftChild() : nodeptr->RightChild();
}

template <typename T>
void Heap<T>::Downheap()
{
    Node<T> *nodeptr = FindNode(size);
    *rootptr = *nodeptr;

}

template <typename T>
void Heap<T>::Replace(Node<T> *a, Node<T> *b)
{
    a->Data() = b->Data();
    b->NullPtrs();
    Node<T> *parentptr = FindParentNode(b);
    if (parentptr->LeftChild() = b)
    {
        parentptr->NullLeftChild();
        delete b;
        b = NULL;

    }
    else
    {
        parentptr->NullRightChild();
        delete b;
        b = NULL;
    }
    return;
}

template <typename T>
void Heap<T>::AddToHeap(T &data)
{
    AddToVacantNode(data);
    Upheap();
    size++;
}

template <typename T>
Heap<T>& Heap<T>::operator<<(T &data)
{
    AddToHeap(data);
    return *this;
}

template <typename T>
T& Heap<T>::Pop()
{
    return rootptr->Data();
    Downheap();
    size--;
}

template <typename T>
Heap<T>& Heap<T>::operator>>(T &destination)
{
    destination = rootptr->Data();
    Downheap();
    size--;
}

template <typename T>
T Heap<T>::Peek()
{
    if (!Empty())
        return rootptr->Data();
}

template <typename T>
ostream& operator<<(const ostream &out, const Heap<T> &H)
{
    return;
}

template <typename T>
istream& operator>>(const istream &in, const Heap<T> &H)
{
    return;
}

template <typename T>
void Heap<T>::Switch(Node<T> *a, Node<T> *b)
{
    T temp;
    temp = a->Data();
    a->SetData(b->Data());
    b->SetData(temp);
}

template <typename T>
void Heap<T>::Copy(const Heap &other)
{
    if (this != &other && !other.Empty())
    {
        MIN = other.MIN;
        Node<T> *nodeptr;
        Clear();
        for (int n=1; n<=other.size; n++)
        {
            nodeptr = other.FindNode(n);
            AddToHeap(nodeptr->data);
        }
    }
}

template <typename T>
Node<T>* Heap<T>::FindNode(int n)
{
    if (n > size || n < 1)
        throw OUT_OF_BOUNDS;

    int x = floor(log(n)/log(2)+1);
    bitset<20> bs(n);
    Node<T> *nodeptr = rootptr;

    for (int i=x-2; i>=0; i--)
    {
        if (!bs[i])
            nodeptr = nodeptr->LeftChild();
        else
            nodeptr = nodeptr->RightChild();
    }
    return nodeptr;
}

template <typename T>
void Heap<T>::Clear()
{
    for (int n=size; n>0; n++)
    {
        Node<T> *nodeptr = FindNode(n);
        nodeptr->NullPtrs();
        delete nodeptr;
    }
    rootptr->NullPtrs();
    delete rootptr;
}

#endif // HEAP_H 
```

节点.h

```
#ifndef NODE_H
#define NODE_H
#include <iostream>

template <typename T>
class Node
{
public:
    Node();
    Node(T &DATA);
    Node(const Node<T> &other);
    Node<T>& operator=(const Node<T> &other);
    Node<T>& operator<<(const T &nodedata);
    bool operator==(const Node<T> &other);
    bool operator<(const Node<T> &other);
    bool operator>(const Node<T> &other);
    bool operator<=(const Node<T> &other);
    bool operator>=(const Node<T> &other);
    bool operator!=(const Node<T> &other);
    ~Node();
    T Data() const { return data; }
    void SetData(const T &nodedata);
    void AddLeftChild(const Node<T> *leftchildptr);
    void AddRightChild(const Node<T> *rightchildptr);
    Node<T> *LeftChild() { return leftchild; }
    Node<T> *RightChild() { return rightchild; }
    void NullLeftChild() { leftchild = NULL; }
    void NullRightChild() { rightchild = NULL; }
    void NullPtrs() { leftchild = rightchild = NULL; }

    template <typename U> friend
    ostream& operator<<(ostream &out, Node<U> &node);

private:
    T data;
    Node<T> *leftchild;
    Node<T> *rightchild;
    void Copy(const Node<T> &other);

};

template <typename T>
Node<T>::Node()
{
    NullPtrs();
    return;
}

template <typename T>
Node<T>::Node(T &DATA)
{
    NullPtrs();
    data = DATA;
    return;
}

template <typename T>
Node<T>::Node(const Node<T> &other)
{
    Copy(other);
    return;
}

template <typename T>
Node<T>& Node<T>::operator=(const Node &other)
{
    if (this != &other)
        Copy(other);
    return this;
}

template <typename T>
Node<T>& Node<T>::operator<<(const T &nodedata)
{
    SetData(nodedata);
}

template <typename T>
bool Node<T>::operator==(const Node<T> &other)
{
    return (data == other.data);
}

template <typename T>
bool Node<T>::operator<(const Node<T> &other)
{
    return (data < other.data);
}

template <typename T>
bool Node<T>::operator>(const Node<T> &other)
{
    return (data > other.data);
}

template <typename T>
bool Node<T>::operator<=(const Node<T> &other)
{
    return (data < other.data || data == other.data);
}

template <typename T>
bool Node<T>::operator>=(const Node<T> &other)
{
    return (data > other.data || data == other.data);
}

template <typename T>
bool Node<T>::operator!=(const Node<T> &other)
{
    return (data != other.data);
}

template <typename T>
Node<T>::~Node()
{
    NullPtrs();
}

template <typename T>
void Node<T>::SetData(const T &nodedata)
{
    data = nodedata;
}

template <typename T>
void Node<T>::AddLeftChild(const Node<T> *leftchildptr)
{
    leftchild = leftchildptr;
    return;
}

template <typename T>
void Node<T>::AddRightChild(const Node<T> *rightchildptr)
{
    rightchild = rightchildptr;
    return;
}

template <typename U>
ostream& operator<<(ostream &out, Node<U> &node)
{
    out << node.data;
    return out;
}

template <typename T>
void Node<T>::Copy(const Node &other)
{
    leftchild = other.leftchild;
    rightchild = other.rightchild;
    data = other.data;
}

#endif // NODE_H 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:33:42.577

您将一个右值（常量`1`）传递给`Heap::AddToHeap(T &data)`，它接受一个非常量引用。更改函数签名，使其采用 const 引用。您还必须将其传播到`Heap<T>::AddToVacantNode(T &data)`任何其他相关函数。

这是关于 const 正确性的 SO 答案：[Sell me on const correctness](https://stackoverflow.com/questions/136880/sell-me-on-const-correctness)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:34:07.457

您`AddToHeap`使用文字 1 进行调用。但您`AddToHeap`仅通过引用接受整数。您不能通过引用传递文字 1 。如果您的`AddToHeap`函数通过 const 引用接受参数，它将起作用。

```
void AddToHeap(const T& data); 
```

# php - 使用 phpmyadmin，我将如何在数据库中存储一系列数据？（利用多对多关系）

> ID：15169187
> 
> 赞同：0
> 
> 时间：2013-03-02T00:26:29.490
> 
> 标签：php, mysql

我需要建立一个包含药物信息的数据库。

*   第一列是具有自动增量的唯一标识符字段。例如，“1”
*   第二列包含药物的名称。例如，“曲马多”
*   第三列包含权重列表。例如，“30 克、40 克、50 克、60 克”

使用 php while 循环和数组，我可以使用以下方法回显此数据：

```
while ($row = mysql_fetch_array($result)) {
   echo "Drug Name: {$row[1]} Drug Weights: {$row[2]}"
} 
```

虽然这可行，但我知道这绝对不是最好的方法。权重列表必须是 varchar，而不是实际的单个整数。如第三列所示，存储和回显单个产品的一系列信息的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:53:44.773

这实际上是多对一的关系，因为您有多个剂量与一种药物有关：http: [//net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-关系/](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/)

至于您的问题，这取决于您希望如何使用数据的上下文。如果剂量旨在用作药房提供的各种产品的参考（即一小瓶曲马多和一大瓶），那么我可能会为每个剂量添加一个新行，因为您可能会首先有一组有限的值可供选择，它更能代表商店的库存情况。然后，您可以使用这样的嵌套循环遍历它：

```
$drugs = array()
while ($row = mysql_fetch_array($result)) {
    $drugs[$row['name']][] = $row['dosage_amount']
}
foreach ($drugs AS $drug => $dosages) {
    echo '<h2>'. htmlentities($drug, ENT_COMPAT, 'UTF-8') .'</h2>';
    foreach ($dosages AS $dosage) {
        echo '<br><em>'. htmlentities($dosage, ENT_COMPAT, 'UTF-8') .'</em>';
    }
} 
```

参考：[PHP MySQL 显示按常用字段分组的多行](https://stackoverflow.com/questions/4337639/php-mysql-display-multiple-rows-grouped-by-common-fields)

另一方面，如果它用于跟踪处方，则有一个单独的表格`id | drug_id | dosage_amount`，沿着 ，以及您需要的任何其他信息。

如果您选择第二个选项，您将使用 an`INNER JOIN`来获取所需的数据：

```
SELECT drugs.name, prescriptions.dosage_amount
FROM drugs
INNER JOIN prescriptions
ON drugs.id=prescriptions.drug_id 
```

参考：[http ://www.w3schools.com/sql/sql_join_inner.asp](http://www.w3schools.com/sql/sql_join_inner.asp)

从那里，您可以像以前一样迭代它：

```
while ($row = mysql_fetch_array($result)) {
    echo "Drug Name: {$row[0]} Drug Weight: {$row[1]}"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:53:10.357

```
while ($row = mysql_fetch_assoc($result)) {
    echo "Drug Name: $row[drugName] Drug Weights: $row[drugWeights]";
} 
```

你没有指出你的列的名称，所以我猜。

* * *

请不要[`ext/mysql`](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)在新代码中使用。切换到`PDO`或`mysqli`。

# matlab - Matlab左-向量除法？

> ID：15169194
> 
> 赞同：2
> 
> 时间：2013-03-02T00:27:10.727
> 
> 标签：matlab, division

> > x=[1;2;3]

x =

```
 1
 2
 3 
```

> > y=[4;5;6]

y =

```
 4
 5
 6 
```

> > x\y

答案=

```
2.2857 
```

Matlab 是如何找到这个结果的？（我搜索了很多论坛，但我不明白他们在说什么。我想知道给出这个结果的算法。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T00:42:02.467

来自 MATLAB 文档`\`：

如果 A 是具有 M 个分量的`M-by-N`矩阵`M < or > N`，B 是具有 M 个分量的列向量，或者是具有多个这样的列的矩阵，则`X = A\B`它是方程组的欠定或超定系统的最小二乘解`A*X = B`。

在这里，您的系统不是欠定/超定。因为两者都有 3 行。因此，您可以将方程式可视化为：

```
xM=y
M=inv(x)*y 
```

现在，由于您的矩阵不是方形的，它将使用 SVD 计算伪逆。所以，

```
M=pinv(x)*y; 
```

您将获得 M 的值为 2.2857。

另一种解释可以是：它将为您提供`xM=y`最小二乘意义上的解决方案。您可以按如下方式验证这一点：

```
M=lsqr(x,y) 
```

这将为您提供 M = 2.2857 的值。

您可以随时`help \`在 MATLAB 命令窗口中获取更多信息。

鼓励您查看有关最小二乘和伪逆的更多详细信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T00:38:08.790

这个文档应该解释它

[http://www.mathworks.com/help/matlab/ref/mrdivide.html](http://www.mathworks.com/help/matlab/ref/mrdivide.html)

这是算法的链接

[http://www.maths.lth.se/na/courses/NUM115/NUM115-11/backslash.html](http://www.maths.lth.se/na/courses/NUM115/NUM115-11/backslash.html)

不过，您可以更轻松地在 matlab 中查看源代码。（我在本地没有它，所以我无法检查，但很多 matlab 函数的来源在 matlab 中可用）

# python-c-api - 循环 Python 字典（使用 C API）两次？

> ID：15169196
> 
> 赞同：1
> 
> 时间：2013-03-02T00:27:26.253
> 
> 标签：python-c-api

我目前正在用 C 编写一个 Python 模块。在其中，我有一个字典，我像这样迭代：

```
PyObject *key, *value;
Py_ssize_t pos = 0;

while (PyDict_Next(index, &pos, &key, &value))
    /* do interesting things here */ 
```

稍后以相同的方法，然后我想再次循环遍历字典。但是，`PyDict_Next(...)`继续返回`NULL`。有没有办法重置使用的内部迭代计数器`PyDict_Next(...)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:06:37.590

通过将 pos 设置为 0 来初始化迭代器。您可以通过再次将 pos 设置为 0 来重新启动迭代器。

```
PyObject *key, *value;
Py_ssize_t pos = 0;

while (PyDict_Next(index, &pos, &key, &value))
    /* do interesting things here */

pos = 0;

while (PyDict_Next(index, &pos, &key, &value))
    /* do even more interesting things here */ 
```

# azure - Github -> Azure 部署另一个进程使用的 dll

> ID：15169199
> 
> 赞同：3
> 
> 时间：2013-03-02T00:27:54.553
> 
> 标签：azure, entity-framework-5, azure-web-app-service, azure-deployment, azure-git-deployment

不幸的是，由于 Azure 缺乏 EF 5 空间支持的问题，我需要自己包含相关的 DLL：[相关链接](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/6f68a726-bddb-4312-ae75-043b775da271/)

包含 SqlServerSpatial.dll 后，我就可以使用 Visual Studio 中的发布工具成功完成部署。

但是，当我尝试使用 Github -> Azure 部署以及 github repro 中提供的相关 DLL 时，部署失败并显示以下消息：

```
The process cannot access the file 'C:\DWASFiles\Sites\<my app name>\VirtualDirectory0
\site\wwwroot\bin\SqlServerSpatial.dll' because it is being used by another process. 
```

我不确定如何从这里进行故障排除，并且可以使用一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T12:49:19.870

使用 nuget 包管理器而不是添加 dll 并使用 git 推送 dll。

下午>`Install-Package Microsoft.SqlServer.Types`

通过在 .gitignore 文件中添加 bin/ 来忽略 git 中的 bin 文件夹

通常在源代码控制中添加 dll 会导致问题，并且它不是一个好的行为。

# android - Worklight 更新挂起

> ID：15169202
> 
> 赞同：0
> 
> 时间：2013-03-02T00:28:03.910
> 
> 标签：android, updates, ibm-mobilefirst

在 Worklight 服务器上更新应用程序时，应用程序会通知我的设备进行更新。当更新开始时，它完成到 100%，但是对话框永远不会消失，应用程序也不会重新启动。你如何让应用程序自动重启？

我正在使用 Worklight Server v5.0.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:02:28.530

应用程序应该在下载完成后重新加载。发生了一些干扰，但您没有提供以下任何信息：

*   Worklight 设置、项目和应用程序
*   更新内容（大小）
*   使用的安卓版本
*   任何 LogCat 日志
*   这是否发生在设备或模拟器上

无论如何...检查 Worklight 5.0.6.1（在 Eclipse Marketplace 中搜索“worklight”（可通过​​ Eclipse 中的“帮助”菜单获得）），此类问题已得到解决。

如果升级后问题仍然存在，请提供上述信息。

# java - 反转数组但不是哈希图

> ID：15169204
> 
> 赞同：0
> 
> 时间：2013-03-02T00:28:27.793
> 
> 标签：java, arrays, indexing, hashmap

在 Java 中，我有一个未排序的`int[] values = new int[100];`数组。所有值都是唯一的（不同的）并且它们是不可比较的（无法排序）。我可以构造一种反函数，如果我指定该值，它将给我数组中某个值的索引？

目前使用哈希图完成它：

```
IntIntMap indices = new IntIntOpenHashMap(100, 1);

for (int i = 0; i < 100; i++) {
     indices.put(values[i], i);
} 
```

还有其他解决方案吗？更喜欢更快的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T19:34:35.650

是的，您可以创建自己的哈希函数或为您的案例研究特定的哈希函数。这取决于值的结构以及这是否真的是程序中的瓶颈。

# apache - .htaccess 重写在子目录中不起作用

> ID：15169206
> 
> 赞同：1
> 
> 时间：2013-03-02T00:28:41.997
> 
> 标签：apache, .htaccess, mod-rewrite

我的网络路径是：（ `http://git.example.com/`例如）

我的文档根是：

```
/home/user/git/ 
```

在文档根目录中，我有两个文件夹：

```
/home/user/git/john
/home/user/git/doe 
```

这些文件夹分别代表 john 和 doe 的 git 存储库。它们托管在 Web 服务器上，因此在提交给主服务器之前，可以在创建代码时对其进行测试。

我遇到的问题是 repo 中的站点代码有一个 wordpress 样式的 .htaccess 文件，因此脚本可以处理数据库中为每个产品等指定的所有页面 slug。我的 .htaccess 中有以下代码目录内的`/home/user/git/john`文件：

```
RewriteEngine On
RewriteBase /john/

# FORCE BROWSER TO URL AND DO NOT ATTEMPT TO SLUG MATCH THESE
RewriteCond %{REQUEST_URI} ^/john/checkout/(.*)$ [OR]
RewriteCond %{REQUEST_URI} ^/john/admin/(.*)$ [OR]
RewriteRule ^.*$ - [L]

# ROUTE THROUGH CMS
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

我还尝试将 rewritebase 更改为 just`/`并且我尝试将最后一行更改为`RewriteRule . /john/index.php`以及其中的所有变体。我所做的一切都不起作用。

我说的不工作是什么意思？好吧，说我有 url `http://git.example.com/john/some_product_name.html`- 我得到一个 404 not found 错误，而 apache 错误日志只有一个标准的 404 no such file for the request。而已。就像“不，文件不存在......你应该在找不到文件时重写它！”

无论如何，当一切都在根目录之外运行时，这个确切的脚本可以完美地工作，就像它在实时站点上一样，但是将副本移动到子目录一直是个问题。我可以为项目中的每个开发人员创建一个新的子域，然后从他们的 doc_root 中运行 git，但实际上......应该有一种方法可以使这项工作。我错过了什么？

另外 - 我可以确认重写根本没有发生，因为在我的`index.php`文件顶部，我有：`echo "I'm here"; exit;`所以我应该看到一个空白的白页，而不是找不到 404，并显示消息“我在这里”。我不。

** 更新 **

我像这样通过顶部的线条注释掉了力，它现在正在工作：

```
RewriteEngine On
RewriteBase /john/

# FORCE BROWSER TO URL AND DO NOT ATTEMPT TO SLUG MATCH THESE
#RewriteCond %{REQUEST_URI} ^/john/checkout/(.*)$ [OR]
#RewriteCond %{REQUEST_URI} ^/john/admin/(.*)$ [OR]
#RewriteRule ^.*$ - [L]

# ROUTE THROUGH CMS
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

为什么这些线路会导致这个问题？我正在访问的 url 绝对不匹配这些模式中的任何一个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:00:04.170

删除第一条规则中的最后一个 [OR]，如下所示：

```
# FORCE BROWSER TO URL AND DO NOT ATTEMPT TO SLUG MATCH THESE
RewriteCond %{REQUEST_URI} ^/john/checkout/(.*)$ [OR]
# Don't use OR in next line.
RewriteCond %{REQUEST_URI} ^/john/admin/(.*)$ 
RewriteRule ^.*$ - [L] 
```

# iphone - 警报样式的 iOS 通知（如消息）导致实时 Game Center 匹配停止接收消息

> ID：15169207
> 
> 赞同：1
> 
> 时间：2013-03-02T00:28:54.660
> 
> 标签：iphone, ios, objective-c

出于某种原因，当在实时比赛期间弹出 iOS 警报样式通知（消息、警报等）时，比赛将停止接收来自对手的数据。该应用程序本身功能，但没有玩家之间的数据传输。

代表没有收到来自`match:(GKMatch *)match player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state`或的回叫`authenticationChanged`，因此看起来两个玩家都仍然连接到比赛。

无论用户关闭警报样式通知还是打开它，都会出现此问题。

关于为什么/如何发生这种情况以及如何预防/从中恢复的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:47:56.550

经过数小时的调试、研究和挫折，我遇到了我的问题。

由于断开连接和主动退出活动可能是移动设备和游戏中心的事件，因此我使用数据队列来发送消息。它的工作原理是将当前消息堆叠在队列中（如果它是唯一消息，则发送消息）并运行以下数据传输步骤：1）发送队列中最旧的消息，2）等待对方收到确认，3）删除最旧的消息来自队列的消息，4) 如果队列计数仍然 > 0，则发送队列中最旧的消息...

但是，对于某些数据类型，我们希望绕过队列而不要求确认收据。一个这样的例子是当我们向对手发送有关应用程序通知`UIApplicationWillResignActiveNotification`和`UIApplicationDidBecomeActiveNotification`. 但是，即使消息没有要求确认收据，我也忘了绕过队列。由于对方从未发回收据确认，因此该`UIApplicationWillResignActiveNotification`消息无限期地阻塞了队列。

我适当地绕过了队列，游戏现在恢复正常。如果有人想查看所涉及的实际代码，我将很乐意分享。

# c++ - 在后台运行功能直到完成 MinGW + Windows

> ID：15169209
> 
> 赞同：0
> 
> 时间：2013-03-02T00:29:14.637
> 
> 标签：c++, windows, multithreading, c++11, mingw

我正在用 C++ 编写一些东西，其中包括一个倒计时函数，该函数在它达到 0 时设置一个值。我已经研究线程/pthreads/boost 线程几个小时了，但我似乎无法得到任何工作，因此，理想情况下，我正在寻找有关我的代码需要做什么的演练。我对 C++ 相当陌生，但是无论语言如何，并发性都超出了我以前研究过的任何东西。

我想在后台运行的功能是：

```
void Counter::decrementTime(int seconds){
    while(seconds != 0){
        seconds--;
        Sleep(1000);
    }
    bool = false;
} 
```

它将通过以下简单的方式调用（这仅作为示例）：

```
void Counter::setStatus(string status){
    if(status == "true"){
        bool = true;
        decrementTime(time); // Needs to run in background.
    } else if (status != "false"){
        bool = false;
    }
} 
```

我尝试了各种事情，例如`std:thread myThread(decrementTime, time);`各种其他尝试（正确包含所有标题等）。

如果有人可以帮助我，我将不胜感激。我不需要监视正在运行的功能或任何东西，我需要它做的就是设置它`bool`何时到达那里。我正在使用`-std=c++11`启用了 MinGW 编译器的 Windows 运行，正如我之前提到的，我很想解决这个问题（并解释它是如何解决的），这样我就可以更好地掌握这个概念！

哦，如果有另一种（更好的）方法可以在没有线程的情况下执行此操作，也请随时分享您的知识！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:54:42.513

您可以使用 std::async 和[std::future](http://en.cppreference.com/w/cpp/thread/future)及其方法“wait_for”，超时时间为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:24:42.720

您可以使用`std::atomic_bool`as 标志，并`std::async`在单独的线程中启动时间：

```
#include <atomic>
#include <chrono>
#include <future>

std::atomic_bool flag{true};

void countDown(int seconds){
  while(seconds > 0){
    seconds--;
    std::this_thread::sleep_for(std::chrono::miliseconds( ?? )); //
  }
  flag = false;
}

auto f = std::async(std::launch::async, std::bind(countDown, time));

// do your work here, checking on flag
while (!flag) { ... }

f.wait(); // join async thread 
```

# javascript - highcharts 不会呈现给我的 div

> ID：15169214
> 
> 赞同：3
> 
> 时间：2013-03-02T00:30:01.527
> 
> 标签：javascript, backbone.js, highcharts

我正在尝试将 highchart 演示呈现给一个主干.js 小部件。

我正在尝试在我的小部件中包含[HighChart Demo](http://www.highcharts.com/demo/pie-donut)，模板生成，除 HighCharts 之外的所有内容都在工作。我怀疑 highchart 在渲染到尚未放在 DOM 上的 div 时出现问题，因为我可以在之后添加图表。

对于在渲染周期中如何将图表小部件添加到树中，是否有任何想法？

```
window.HomeView = Backbone.View.extend({

    initialize:function () {},

    render:function () {
        $(this.el).html(this.template());
        var chart = $("#chart", this.el)[0];
        this.renderChart(chart);        
        return this;
    },

    renderChart: function(container) {

        var colors = Highcharts.getOptions().colors,
            categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],
            name = 'Browser brands',
            data = [{
                    y: 55.11,
                    color: colors[0],
                    drilldown: {
                        name: 'MSIE versions',
                        categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0'],
                        data: [10.85, 7.35, 33.06, 2.81],
                        color: colors[0]
                    }
                }, {
                    y: 21.63,
                    color: colors[1],
                    drilldown: {
                        name: 'Firefox versions',
                        categories: ['Firefox 2.0', 'Firefox 3.0', 'Firefox 3.5', 'Firefox 3.6', 'Firefox 4.0'],
                        data: [0.20, 0.83, 1.58, 13.12, 5.43],
                        color: colors[1]
                    }
                }, {
                    y: 11.94,
                    color: colors[2],
                    drilldown: {
                        name: 'Chrome versions',
                        categories: ['Chrome 5.0', 'Chrome 6.0', 'Chrome 7.0', 'Chrome 8.0', 'Chrome 9.0',
                            'Chrome 10.0', 'Chrome 11.0', 'Chrome 12.0'],
                        data: [0.12, 0.19, 0.12, 0.36, 0.32, 9.91, 0.50, 0.22],
                        color: colors[2]
                    }
                }, {
                    y: 7.15,
                    color: colors[3],
                    drilldown: {
                        name: 'Safari versions',
                        categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon',
                            'Safari 3.1', 'Safari 4.1'],
                        data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
                        color: colors[3]
                    }
                }, {
                    y: 2.14,
                    color: colors[4],
                    drilldown: {
                        name: 'Opera versions',
                        categories: ['Opera 9.x', 'Opera 10.x', 'Opera 11.x'],
                        data: [ 0.12, 0.37, 1.65],
                        color: colors[4]
                    }
                }];

        // Build the data arrays
        var browserData = [];
        var versionsData = [];
        for (var i = 0; i < data.length; i++) {

            // add browser data
            browserData.push({
                name: categories[i],
                y: data[i].y,
                color: data[i].color
            });

            // add version data
            for (var j = 0; j < data[i].drilldown.data.length; j++) {
                var brightness = 0.2 - (j / data[i].drilldown.data.length) / 5 ;
                versionsData.push({
                    name: data[i].drilldown.categories[j],
                    y: data[i].drilldown.data[j],
                    color: Highcharts.Color(data[i].color).brighten(brightness).get()
                });
            }
        }

        // Create the chart
        var chart = new Highcharts.Chart({
            chart: {
                renderTo: container,
                type: 'pie'
            },
            title: {
                text: 'Browser market share, April, 2011'
            },
            yAxis: {
                title: {
                    text: 'Total percent market share'
                }
            },
            plotOptions: {
                pie: {
                    shadow: false
                }
            },
            tooltip: {
                valueSuffix: '%'
            },
            series: [{
                name: 'Browsers',
                data: browserData,
                size: '60%',
                dataLabels: {
                    formatter: function() {
                        return this.y > 5 ? this.point.name : null;
                    },
                    color: 'white',
                    distance: -30
                }
            }, {
                name: 'Versions',
                data: versionsData,
                innerSize: '60%',
                dataLabels: {
                    formatter: function() {
                        // display only if larger than 1
                        return this.y > 1 ? '<b>'+ this.point.name +':</b> '+ this.y +'%'  : null;
                    }
                }
            }]
        });
    }
}); 
```

到目前为止，我最好的解决方案是触发一个事件并进行渲染后循环。

这绝不是最优的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:21:22.773

尝试以下操作：

```
render: function () {
    var element = this.el;
    $(this.el).html(this.template());
    $("#chart").append(element);
    this.renderChart(element);        
    return this;
} 
```

# sql-server - 函数内不允许远程函数调用

> ID：15169216
> 
> 赞同：0
> 
> 时间：2013-03-02T00:30:04.423
> 
> 标签：sql-server, sql-server-2000

调用远程函数后，标量值函数失败。有没有办法调用远程服务器功能？

这是代码

```
ALTER FUNCTION [dbo].[fnGetCatalogNumber] 
(
    -- Add the parameters for the function here
    @ProductID int
)
RETURNS varchar(20) 
AS
BEGIN
     -- Declare the return variable here
      DECLARE @CatalogNumber varchar(20), @catalog_data varchar(20)

    -- Add the T-SQL statements to compute the return value here
    --Exec Dev01.Product_Core.dbo.usp_get_CatalogNumber @ProductId = @ProductID 
     ,@CatalogNumber = @catalog_data output

    -- Return the result of the function
    RETURN @CatalogNumber

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:42:32.913

您不能在函数内执行存储过程，因为假设这样的过程可能会引起副作用，例如表更改。

您*可以*考虑将函数重铸为存储过程，从而允许内部存储过程调用，但请注意，这样做充满了危险、警告和危险，正如[此处详细讨论的那样。](https://stackoverflow.com/questions/6344880/execute-stored-procedure-from-a-function)

# wordpress - 在 wordpress 中获取排队脚本的列表？

> ID：15169218
> 
> 赞同：6
> 
> 时间：2013-03-02T00:31:09.280
> 
> 标签：wordpress, list

我想知道如何通过**wp_enqueue_script**获取在 wordpress 中排队的脚本列表。我做了一些研究并检查了 wp 核心本身，但我能得到的最接近的是：

```
add_options_page('Wp Sysinfo', 'Wp Sysinfo', 'manage_options', 'wp-sysinfo', 'sysinfo_page');

function sysinfo_page(){
    global $wp_scripts;
    print_r($wp_scripts->queue);
} 
```

但是它只在管理页面而不是前端显示脚本。

仅供参考：我正在构建一个插件来在 wordpress 中显示系统信息。这是为插件/主题作者提供有用的信息来解决用户报告的问题。

## 编辑：

简而言之，我需要一种方法来获取所有脚本和样式在管理和前端中排队，并在自定义管理页面中查看它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-06T09:15:34.317

样式和脚本都有一个专用的 Wordpress 动作钩子。这些钩子将在每个脚本或样式入队后触发：

```
function inspect_scripts() {
    global $wp_scripts;
    print_r($wp_scripts->queue);
}
add_action( 'wp_print_scripts', 'inspect_scripts' );

function inspect_styles() {
    global $wp_styles;
    print_r($wp_styles->queue);
}
add_action( 'wp_print_styles', 'inspect_styles' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T06:08:32.040

When I did `<?php global $wp_scripts; var_dump($wp_scripts->queue); ?>` on the index.php page of the standard 2014 Wordpress theme it showed me non-admin scripts that were being queued. If you just do var_dump on the $wp_scripts variable itself you'll get lots of scripts, I am guessing all the scripts in the theme or something like that.

So if you are only showing this info to the site administrator then it should be fine just to echo it out like at the bottom of the page. I used a memory profiling plugin once (it showed me load times/memory loads used by various plugins) and it put that information at the bottom of the page, it was pretty useful.

But like the comments say if you are only displaying the queued scripts then in the wp-admin area that is only the admin scripts, on the front end you'll get more.

# css - 固定相对于父 div 的位置

> ID：15169220
> 
> 赞同：16
> 
> 时间：2013-03-02T00:31:29.263
> 
> 标签：css, position, containers, parent, fixed

是否可以固定元素**相对于父 div 的位置，而不是浏览器窗口**？

说我有：

```
<div id="pagecontainer">

    <div id="linkspage">

        <div class="sidelinks">
            <a href="#page1" class="link">Link 1</a>
            <p>
            <a href="#page2" class="link">Link 2</a>
            <p>
            <a href="#page3" class="link">Link 3</a>
            <p>
            <a href="#page4" class="link">Link 4</a>
            <p>
        </div>

        <div class="linkscontent">
            content of links page
        </div>

    </div>

    //OTHER PAGES

</div> 
```

基本上一个页面有两个部分，左边部分是链接列表，而右边部分是页面的内容。我希望内容可滚动，但链接保持固定到父#pagecontainer，因此当#pagecontainer 滚动时它们不会滚动，但当我滚动整个浏览器窗口时它们会移动。

我已经尝试过 JQuery“fixto”插件：[https](https://github.com/bbarakaci/fixto) ://github.com/bbarakaci/fixto 。但是我不能使用那个，因为当父元素（#pagecontainer）的 alpha 为 0 时，我的页面淡入/淡出并且脚本出错，它认为父元素已经消失并且无处可修复。

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-02T00:34:22.913

给父母`position: relative`，像这样：

```
.parent {
    position: relative;
}
.child {
    position: absolute;
    top: 0;
} 
```

见[演示](http://jsfiddle.net/zaknotzak/RFGEs/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:38:46.677

我为你创建了这个[CodePen](http://codepen.io/anon/pen/tqaDH)。

从你的描述来看，已经成功了一半。

> *但是当我滚动整个浏览器窗口时它们会移动。*

您将需要使用[iframe](http://www.w3schools.com/tags/tag_iframe.asp)或某种 JavaScript 解决方案。

# root - 如何以编程方式使用 sudo？即将 sudo 集成到我的 GUI 中

> ID：15169221
> 
> 赞同：3
> 
> 时间：2013-03-02T00:31:29.947
> 
> 标签：root, sudo

我正在编写一个程序，它在第一次运行以执行配置更改（在 中创建一个文件`/etc`）时暂时需要 root。

如何通过在图形对话框中询问用户密码来临时获得 root 权限？

该程序使用 Qt，如果它仅适用于 Ubuntu，我会相当高兴，但我不想假设它们已经`gksudo`安装或安装了任何东西。我也不能用`SUID`。

我唯一能想到的就是提供我自己的密码对话框，并通过（或其不太安全的表亲之一）将其提供给命令行`sudo`二进制文件。`system()`

不过，这似乎很老套——命令行前端通常是一个非常糟糕的主意，应该不惜一切代价避免使用。那么有没有更好的方法呢？也许有一个libsudo，或者一些使用IPC的方法？

**注意：[这不是重复的。](https://stackoverflow.com/questions/2483755/how-to-programmatically-gain-root-privileges)或者至少，那里的答案并没有把它当作我要问的问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:36:54.470

来自`man sudo`：

> ```
>  -A          Normally, if sudo requires a password, it will read it from the
>                user's terminal.  If the -A (askpass) option is specified, a
>                (possibly graphical) helper program is executed to read the user's
>                password and output the password to the standard output.  If the
>                SUDO_ASKPASS environment variable is set, it specifies the path to
>                the helper program.  Otherwise, if /etc/sudo.conf contains a line
>                specifying the askpass program, that value will be used.  For
>                example:
> 
>                    # Path to askpass helper program
>                    Path askpass /usr/X11R6/bin/ssh-askpass
> 
>                If no askpass program is available, sudo will exit with an error. 
> ```

要么使用安装在许多系统上的 ssh-askpass，要么编写自己的密码提示命令，然后将其提供给 sudo。这仍然有点棘手，但是您不必担心将密码传递给 sudo。

# c++ - C++ 移动构造函数

> ID：15169224
> 
> 赞同：2
> 
> 时间：2013-03-02T00:32:09.750
> 
> 标签：c++, c++11, move-semantics

使用或创建移动构造函数的正确方法是什么？

这是一个例子：

```
class Example
{
public:
    Example( int && p_Number,
             bool && p_YesNo,
             std::string && p_String ) : // Error here
             Number( p_Number ),
             YesNo( p_YesNo ),
             String( p_String )
    {
    };

private:
    int Number;
    bool YesNo;
    std::string String;
    std::vector< unsigned char > Vector;
};

void ShowExample( void )
{
    Example ExampleA( 2013,
                      true,
                      "HelloWorld" // Why won't it work?
                      );
}; 
```

我已经在评论中显示了错误。

**编辑：** **好的，我现在确定我所拥有的不是移动构造函数。那么，我可以写一个吗？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T00:44:40.227

首先，没有理由为该类编写移动构造函数。编译器生成的就可以了。但如果你要写它，它可能看起来像这样：

```
Example(Example && rhs)
    :Number(rhs.Number)
    ,YesNo(rhs.YesNo)
    ,String(std::move(rhs.String))
    ,Vector(std::move(rhs.Vector))
{} 
```

如果您愿意，为了保持一致性，您可以调用`std::move`the`int`和 the `bool`，但您不会从中获得任何收益。

对于具有所有参数的其他构造函数，最简单的做法是：

```
Example(int p_Number, bool p_YesNo, std::string p_String)
    :Number(p_Number)
    ,YesNo(p_YesNo)
    ,String(std::move(p_String))
{} 
```

针对您的以下评论：

每当您尝试使用与唯一构造函数参数相同类型的 R 值构造对象时，都会调用移动构造函数。例如，当一个对象通过函数的值返回时，即 R 值，尽管在这种情况下，通常会完全跳过复制和移动。您可以创建 R 值的一种情况是调用`std::move`L 值。例如：

```
Example ex1(7, true, "Cheese"); // ex1 is an L-value
Example ex2(std::move(ex1));    // moves constructs ex2 with ex1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T00:45:41.597

移动构造函数接受对另一个相同类型对象的*右值*引用，并将另一个对象的资源移动到新对象，例如：

```
Example(Example && other) :
    Number(other.Number),             // no point in moving primitive types
    YesNo(other.YesNo),
    String(std::move(other.String)),  // move allocated memory etc. from complex types
    Vector(std::move(other.Vector))
{} 
```

虽然，除非你的类本身在管理资源，否则写这个完全没有意义——隐式移动构造函数将做与我写的完全相同的事情。

# javascript - Node.js 客户端页面无法访问

> ID：15169227
> 
> 赞同：0
> 
> 时间：2013-03-02T00:32:30.463
> 
> 标签：javascript, html, node.js

所以，我用 Node.js 建立了一个服务器。唯一的问题是客户端页面似乎无法访问。这是我的服务器端代码：

```
var HTTP = require("http");
var IO = require("socket.io");
var Server = HTTP.createServer(function(Request, Response){
    Response.writeHead(200, {"Content-Type": "text/html", "Location": __dirname + "/Chat.html"});
    Response.end("<h1> Hello!</h1>");
}).listen(8080);
var Socket = IO.listen(Server);
var UsersOnline = {};
Socket.on("connection", function(socket){
    socket.on("ENTER", function(){
        console.log("A");
    });
}); 
```

这是我的客户端代码：

```
<script src="/socket.io/socket.io.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script>
    $(function(){
        Console.log("A");
        var socket = new io.Socket("localhost", { "port":8080});
        socket.connect();
        socket.on("connect", function(){
            socket.emit("ENTER");
            console.log("A");
        });
    });
</script>
<h1>ABC</h1> 
```

页面上出现“ABC”或“A”。我不知道为什么会这样。有没有办法将单独的页面用作客户端脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:01:20.697

您正在尝试通过标题发送您的 html。要发送静态 html，只需获取文件并单独发送即可。使用这个例子

```
var HTTP = require("http");
var IO = require("socket.io");
var fs = require('fs');
var index = fs.readFileSync('Chat.html');
var Server = HTTP.createServer(function(Request, Response){
    Response.writeHead(200, {"Content-Type": "text/html", "Location": __dirname + "/Chat.html"});
    Response.end(index);
}).listen(8080);
var Socket = IO.listen(Server);
var UsersOnline = {};
Socket.on("connection", function(socket){
    socket.on("ENTER", function(){
        console.log("A");
    });
}); 
```

# osgi - 在启动 OSGi 包期间遇到“期望堆栈图帧”错误

> ID：15169228
> 
> 赞同：0
> 
> 时间：2013-03-02T00:32:33.287
> 
> 标签：osgi

我在 JAR 文件中成功构建了一个 OSGi 包（一个 Apache Sling Custom AuthenticationHandler）。当我将 bundle jar 安装到我的最终 OSGi 环境 (Felix) 并启动 bundle 时，我在日志中收到以下错误：

```
Error: Expecting a stackmap frame at branch target 13 in method com.fl.safe.authhandler.SafeAuthenticationHandler.unbindRepository(Lorg/apache/sling/jcr/api/SlingRepository;)V at offset 5) java.lang.VerifyError: Expecting a stackmap frame at branch target 13 in method com.fl.safe.authhandler.SafeAuthenticationHandler.unbindRepository(Lorg/apache/sling/jcr/api/SlingRepository;)V at offset 5
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
    at java.lang.Class.getConstructor0(Class.java:2723)
    at java.lang.Class.newInstance0(Class.java:345)
    at java.lang.Class.newInstance(Class.java:327)
    ... 
```

可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:56:57.663

原来 Bundle 是使用 Java 1.6 编译并部署到 Java 1.7 的 OSGi 容器环境导致特定错误。对于那些可能遇到同样问题的人，您可以通过`file`命令找出用于编译和生成 .class 文件的 java 版本。例如，

```
% file XQueryUtil.class
XQueryUtil.class: compiled Java class data, version 49.0 (Java 1.5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:51:24.097

这看起来像是一个损坏的 JAR 文件。`VerifyError`当类文件内部不一致或存在安全问题时由 JVM 抛出。

# javascript - IE：取消设置 window.opener

> ID：15169233
> 
> 赞同：0
> 
> 时间：2013-03-02T00:33:12.217
> 
> 标签：javascript, internet-explorer

我正在尝试检查是否可以关闭我网站上的窗口：

```
if (window.opener && window.opener.closed === false) { 
```

用户可以通过另一个设置`window.opener`. `window.opener`当用户最初使用以下方式访问我的网站时，我可以“重置” ： `window.opener = null`. 但是，这在 IE 中不起作用（在下一页，`window.opener`已恢复）。

有没有办法“重置” `window.opener`IE 中的构造，或者我的问题的另一种跨浏览器解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:41:43.870

我找到了一个不完全类似的解决方案，但可以满足我的目的。如果开启者来自同一个域，我只想关闭窗口。

```
if (window.opener.location.hostname.indexOf(window.location.hostname) > -1) { 
```

`window.opener.location`但是，如果打开器来自不同的主机，则IE 不允许您访问。这实际上效果很好：

```
try {
    //snippet above
}
catch (error) { /* no action needed; assume different host */ } 
```

# ios - iOS 编程中心组的 UIViews

> ID：15169244
> 
> 赞同：1
> 
> 时间：2013-03-02T00:34:43.613
> 
> 标签：ios, view, uiview, geometry, centering

我想知道如何/是否可以做到这一点：**将一组 UIView 集中在一个超级视图中。**最终结果将是一组明显集中在其超级视图中的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:20:35.517

嗯，这是一个两步的过程；首先将 UIViews 添加到数组中，然后进行快速枚举以将它们作为“组”居中

```
//step 1: create the objects
self.label1= [[UILabel alloc]init];
self.label1.font=[UIFont systemFontOfSize:30.0];
self.label1.text=@"1";

self.label2= [[UILabel alloc]init];
self.label2.font=[UIFont systemFontOfSize:30.0];
self.label2.text=@"2";

self.label3= [[UILabel alloc]init];
self.label3.font=[UIFont systemFontOfSize:30.0];
self.label3.text=@"3";

//step2: create the array and add the objects to the array
self.arrayOfViews=[[NSMutableArray alloc]initWithCapacity:4];
[self.arrayOfViews addObject:self.label1];
[self.arrayOfViews addObject:self.label2];
[self.arrayOfViews addObject:self.label3];

//step3: use fast enumeration to be able to control them as "group"
for(UIView* currentViewObject in self.arrayOfViews)
{
    currentViewObject.alpha=0.3;
    currentViewObject.frame=CGRectMake(self.view.bounds.size.width/2-sizeOfObject/2,self.view.bounds.size.height/2-sizeOfObject/2,sizeOfObject,sizeOfObject);
    [self.view addSubview:currentViewObject];
} 
```

步骤 1 和 alpha 设置仅用于测试目的。

希望这可以帮助。

# windows - 编写批处理文件与在提示符中编写命令不同？

> ID：15169245
> 
> 赞同：1
> 
> 时间：2013-03-02T00:34:59.790
> 
> 标签：windows, batch-file

我认为这些是完全相同的东西，除了在批处理文件中输入命令，它将像一个函数一样执行文件中写入的所有命令。

所以如果我输入这个命令：

```
for %i in (*.jpg) do tesseract %i %i.txt 
```

其中 tesseract 是将 jpg 文件转换为文本文件的程序，它工作正常。( `tesseract input.jpg output.txt`)

但是，如果我将完全相同的行写入批处理文件，则说“这次我出乎意料”是行不通的。

```
@echo off
for %i in (*.jpg) do tesseract %i %i.txt 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T00:39:35.573

在批处理文件中，您必须将`%`符号加倍：

```
@echo off
for %%i in (*.jpg) do tesseract %%i %%i.txt 
```

# objective-c - NSTableView 交替行颜色绘制不正确

> ID：15169246
> 
> 赞同：1
> 
> 时间：2013-03-02T00:35:10.090
> 
> 标签：objective-c, cocoa, nstableview

我有一个基于视图的 NSTableView 绑定到 NSArrayController。我已将 NSTableView 设置为使用交替行颜色。当表格为空时，它会适当地显示交替的行颜色。但是，当表格填充最后一次绘制后的行时，颜色错误（参见屏幕截图）。我做错了什么导致这个还是这是一个常见的错误？

![具有错误绘制的交替行颜色的 NSTableView](../Images/f1e7890d1905e32a244535df2b352537.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:23:35.350

我认为您有一个蓝色行，但高度为 0

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T15:01:41.090

我认为您应该尝试为您的表格编写代码（无需付出很大的努力），然后您将有更好的机会了解发生了什么并修复您的错误。

# windows-phone-7 - 页面导航后如何刷新 PivotItem 的 DataContext

> ID：15169252
> 
> 赞同：2
> 
> 时间：2013-03-02T00:35:37.337
> 
> 标签：windows-phone-7, mvvm, windows-phone

在 WP 7.1 项目中，我有一个 MainPage.xaml。在那里，我有一个来自 WP Toolkit 的 Pivot 控件，如下所示：

```
<c:Pivot x:Name="pivot" Title="title">
    <c:PivotItem Header="header" DataContext="{vm:ListViewModel}">
        <v:ListView />
    </c:PivotItem>
    ...
</c:Pivot> 
```

基本上，我将第一个数据透视项的内容设置为我创建的一个名为 ListView 的 UserControl，并为它创建了一个名为 ListViewModel 的视图模型。

使用这样的简单模型类：

```
public class MyModel {
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

ListView 视图的 xaml 如下所示：

```
...
<ListBox x:Name="list" ItemsSource="{Binding ModelItems"}>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding Name}" />
                <Button Command="{Binding DataContext.EditCommand, ElementName=list}"
                        CommandParameter="{Binding DataContext, RelativeSource={RelativeSource TemplatedParent}}">
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>
... 
```

列表中的每个项目只需一个简单的 2 行条目。名称显示在第一行，该按钮用于我们要编辑该项目时。此视图的视图模型是：

```
...
private ObservableCollection<MyModel> modelItems;
public ObservableCollection<MyModel> ModelItems {
    get { return modelItems; }
    set {
        if (modelItems != value) {
            modelItems = value;
            NotifyPropertyChanged(() => this.ModelItems);
        }
    }
}

public ListViewModel() {
    ModelItems = new ObservableCollection<MyModel>(repository.GetAll());
}

public ICommand EditCommand {
    get {
      return new RelayCommand(o => {
          var model = o as MyModel;
          Navigator.Uri<EditView>()
                   .WithParam("id", model.id)
                   .Navigate();
    }
}
... 
```

到目前为止一切正常，列表已正确填充。单击按钮正确导航到 EditView 视图，并传递所选模型项的 id。

EditView 页面很简单，只有一个文本框和一个保存按钮。它的视图模型看起来与此类似：

```
...
public EditViewModel() { // ctor
    var id = GetQueryString("id");
    Model = repository.Get(id);
}
... 
```

编辑页面运行良好，它将更改保存回 db。但是，在保存操作之后，我做了 a`Navigator.GoBack()`并且旧数据显示在那里。我应该如何强制我的列表更新新的更改，同时避免代码隐藏？

我能够使用 MainPage 代码隐藏中的枢轴控件 Loaded 事件来实现这一点，如下所示：

```
private void pivot_Loaded(object sender, RoutedEventArgs e) {
    var selectedPivotItem = (PivotItem)pivot.SelectedItem;
    ((ListViewModel)selectedPivotItem.DataContext).Rebind();
} 
```

我向我的 ListViewModel 添加了一个`Rebind()`方法，该方法与构造函数的作用基本相同，再次获取所有数据并将其分配给`ModelItems`

有没有办法实现这一点而无需编写任何代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T02:06:02.297

我习惯于`AppLifeService`使用单例模式创建一个名为的类。在这个对象中，我存储了用于页面间导航的各种属性。

当您在执行操作（编辑/删除/创建）的页面中时，只需将修改后的对象放在`AppLifeService`某个属性中，例如`DeletedComment`.

然后在上一页的`OnNavigatedTo`方法中，验证它是导航返回并搜索您的对象。

```
 protected override void OnNavigatedTo(NavigationEventArgs e, NavigationContext context, NavigationService navigationService)
    {
        base.OnNavigatedTo(e, context, navigationService);

        // back from other app page
        if (e.NavigationMode == NavigationMode.Back)
        {
            var lifeService = ApplicationServices.Resolve<AppLifeService>(); 
```

nt? var deletedComment = lifeService.DeletedComment; if (deletedComment != null) { // 删除评论 }

确保不要存放重物，以免堵塞内存。并在使用时删除它们。

# javascript - CSS唯一定义规则的方法仅适用于特定宽度的元素？

> ID：15169254
> 
> 赞同：1
> 
> 时间：2013-03-02T00:35:46.283
> 
> 标签：javascript, css

目前，我使用 javascript 收听 resize 事件，并根据它的宽度将 css 类应用于我的布局。

```
eg: <800px --> <div class="layout" />
    >800px --> <div class="layout wide" /> 
```

这行得通，但感觉很笨拙。

我想知道是否有一种仅限 CSS 的方式来定义仅在元素具有特定宽度/大小时才应用的规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:39:04.763

这就是媒体查询的用途，但是它们适用于整个视口而不是单个元素。所以你可能有这个：

```
.layout {
    /* styles for wide layout */
}
@media all and (max-width:800px) {
    .layout {
        /* styles for narrow layout */
    }
} 
```

# java - 我是否应该将我的 doclet 和 taglet 与我的其他共享库类放在一个单独的 jar 中？

> ID：15169256
> 
> 赞同：0
> 
> 时间：2013-03-02T00:35:51.040
> 
> 标签：java

我有多个共享一对公共库（.jar 文件）的 Web 应用程序。我想我已经为我的一个应用程序创建了一些代码来生成站点地图并在结果中添加一个带有页面描述的附加字段。页面描述是在构建时使用 Doclet 生成的。对于我的一个网站，这一切都有效。我正在考虑将此代码反向移植到我的一个共享库中。但我无法摆脱这种感觉，也许这应该进入它自己的独立库（由于 doclet）。

作为一个单独的问题，我还创建了自己的自定义 Taglet ExternalLink，因此我可以在生成的 javadoc 中使用`{@external.link http://www.google.com}`和获取 HTML 链接 。`<a href="http://google.com" >http://google.com</a>`

目前我有以下共享库

*   auth - 身份验证/授权资源
*   web - 核心应用程序/外观。

我应该将 doclet 代码放在 web 中吗？或者应该是一个新图书馆：

*   doc - 站点地图/javadoc 实用程序

被创造？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:43:17.030

我确实最终创建了一个新的 .jar “doc”，它包含监听的站点地图/Javadoc 实用程序，然后我编辑了我的 pom 以在构建期间使用它来在我的 Web 应用程序上运行所需的处理。

# java - 字符串替换方法没有替换它应该替换的内容

> ID：15169257
> 
> 赞同：-1
> 
> 时间：2013-03-02T00:36:19.070
> 
> 标签：java, string, replace

当我输入这个后运行我的代码时

```
4 qwertyuiopasdfghjklzxcvbnm
Ph
Pcssi
Bpke_kdc_epclc_jcijsc_mihyo?
Ipp! 
```

输出

```
Hg
Hmllg
Vham akm mhmlm hmghlm dggng?
Ghh! 
```

什么时候应该输出

```
Hi
Hello
What are these people doing?
Ohh!

public static void main(String[] args) 
{

    String input="";
    int cases= sc.nextInt();
    String al= sc.next();
    String upAl= al.toUpperCase();
    char [] upAlph = upAl.toCharArray();

    char[] alph = al.toCharArray();
    for(int i=0; i<cases; i++)
    {
        input=sc.next();

        input=input.replace("a", ""+ alph[0]);
        input=input.replace("b", ""+ alph[1]);
        input=input.replace("c", ""+ alph[2]);
        input=  input.replace("d", ""+ alph[3]);
        input=  input.replace("e", ""+ alph[4]);
        input=  input.replace("f", ""+ alph[5]);
        input=  input.replace("g", ""+ alph[6]);
        input=  input.replace("h", ""+ alph[7]);
        input=  input.replace("i", ""+ alph[8]);
        input=  input.replace("j", ""+ alph[9]);
        input=  input.replace("k", ""+ alph[10]);
        input=input.replace("l", ""+ alph[11]);
        input=input.replace("m", ""+ alph[12]);
        input=input.replace("n", ""+ alph[13]);
        input=  input.replace("o", ""+ alph[14]);
        input=input.replace("p", ""+ alph[15]);
        input=  input.replace("q", ""+ alph[16]);
        input=input.replace("r", ""+ alph[17]);
        input=  input.replace("s", ""+ alph[18]);
        input=input.replace("t", ""+ alph[19]);
        input=input.replace("u", ""+ alph[20]);
        input=input.replace("v", ""+ alph[21]);
        input=input.replace("w", ""+ alph[22]);
        input=input.replace("x", ""+ alph[23]);
        input=input.replace("y", ""+ alph[24]);
        input=input.replace("z", ""+ alph[25]);
        input=input.replace("A", upAlph[0]+"");
        input=input.replace("B", upAlph[1]+"");
        input=input.replace("C", upAlph[2]+"");
        input=input.replace("D", upAlph[3]+"");
        input=input.replace("E", upAlph[4]+"");
        input=input.replace("F", upAlph[5]+"");
        input=input.replace("G", upAlph[6]+"");
        input=input.replace("H", upAlph[7]+"");
        input=input.replace("I", upAlph[8]+"");
        input=input.replace("J", upAlph[9]+"");
        input=input.replace("K", upAlph[10]+"");
        input=input.replace("L", upAlph[11]+"");
        input=input.replace("M", upAlph[12]+"");
        input=input.replace("N", upAlph[13]+"");
        input=input.replace("O", upAlph[14]+"");
        input=input.replace("P", upAlph[15]+"");
        input=input.replace("Q", upAlph[16]+"");
        input=input.replace("R", upAlph[17]+"");
        input=input.replace("S", upAlph[18]+"");
        input=input.replace("T", upAlph[19]+"");
        input=input.replace("U", upAlph[20]+"");
        input=input.replace("V", upAlph[21]+"");
        input=input.replace("W", upAlph[22]+"");
        input=input.replace("X", upAlph[23]+"");
        input=input.replace("Y", upAlph[24]+"");
        input=input.replace("Z", upAlph[25]+"");
        input=input.replace("_", " ");

        pw.println(input);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T00:39:57.157

问题是您正在替换在每次后续调用时已经被替换`String#replace`的字母，从而有效地混淆了这些字母。您需要标记已被替换的字母的位置。

在这种情况下，我使用`StringUtils`，例如（省略大写）：

```
StringUtils.replaceChars("ph", "abcdefghijklmnopqrstuvwxyz", "qwertyuiopasdfghjklzxcvbnm") 
```

输出：

```
hi 
```

# oop - Yii CompareBehavior / “评分”模型

> ID：15169263
> 
> 赞同：0
> 
> 时间：2013-03-02T00:37:13.503
> 
> 标签：oop, design-patterns, yii

我正在构建一个 Yii 应用程序，其中要求给定模型应该能够与任何现有的相同类型模型进行比较，并且基于比较，导入的数据要么更新现有模型，要么创建一个新模型，或者什么都不做。[Yii 框架论坛有一篇](http://www.yiiframework.com/forum/index.php/topic/10285-how-to-compare-two-active-record-models/)关于实现`Compare`行为的好帖子，它提供了一半的方程式。

我对放置特定于每个模型的“评分”方法的适当位置感到困惑。例如，我可能会遍历所有现有模型并迭代`compare($each)`到给定模型，但这只会吐出属性之间的差异。可能对于一个模型，我关心，`name`而对于另一个模型，我关心`birthday`和`color`。

我是否应该重写行为以使其特定于每种类型的模型，或者这是否违背了从行为开始的目的（然后，所有这些行为子类都将绑定到模型类）？

我的其他想法包括：

*   使用“可评分”的模型可能符合的`IScorable`接口`getScore()`
*   实施策略模式，将许多具体策略与特定于模型的场景相关联

# c# - 如何在 HiQPdf 中设置页码？

> ID：15169265
> 
> 赞同：2
> 
> 时间：2013-03-02T00:37:35.950
> 
> 标签：c#, pdf, hiqpdf

所以..我能找到的唯一可以在 HiQPdf 中使用的代码来给页面编号是这样的：

```
// add page numbering
Font pageNumberingFont = new Font(new FontFamily("Times New Roman"), 8, GraphicsUnit.Point);
PdfText pageNumberingText = new PdfText(5, footerHeight - 12, 
                                        "Page {CrtPage} of {PageCount}", 
                                        pageNumberingFont); 
```

我尝试的任何谷歌搜索几乎都会得到同样的结果。

我正在创建并合并多个 PDF 页面。

上面的代码让我想到`{CrtPage}`并由`{PageCount}`一些内部变量填充，但事实并非如此。

联系他们的客户服务只是让我们获得他们演示项目的复印件，其中包含相同的代码。

**更新：**

我忘了提到 HiQPdf“合并”示例将每个页面单独创建为一个文件，然后打开备份并作为一个文档放在一起，但我正在考虑动态生成页码。

[http://www.hiqpdf.com/demo/MergePdf.aspx](http://www.hiqpdf.com/demo/MergePdf.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-14T15:35:34.610

在花了几个小时破译他们的演示项目之后，这就是我能够想出的（有效的）。这是让页码出现所需的最简单的工作（因为问题是在一年前发布的，并且可能是关于早期版本，这是如何在 8.1 版上做到这一点）

```
var htmlToPdf = new HtmlToPdf();
htmlToPdf.Document.Foot.Enabled = true;

var pageNumberFont = new Font(new FontFamily("Arial"), 5, GraphicsUnit.Point); // 1
var pageNumberText = new PdfText(1, 25, "Page {CrtPage} of {PageCount}", pageNumberFont); // 2
htmlToPdf.Document.Footer.Layout(pageNumberText); // 3 
```

分解步骤...

**1：** 字体 - 在我看来，这是一个有用的选项，但据我所知，这是第 2 步的要求，这很糟糕。在步骤 2 的实例化过程中，您必须将 Font 对象传递给 PdfText 对象。我从他们的演示中提取了 GraphicsUnit.Point 属性，它可以工作，但我无法谈论此属性的其他可用选项以及它们的执行方式（如果他们有表现的话）。

**2：**文本 - 前两个数字用于位置，后面的字符串是您要显示的内容。{CrtPage} 和 {PageCount} 将自行更改为适当的值。作为最后一个参数，您传入在步骤 1 中创建的字体。

**3：**这是您将文本添加到页脚以使其显示的位置。

我仍在努力通过 HiQPdf 并边走边学，所以很可能有更好的方法我还没有找到 - 但在这一点上，这似乎是动态添加页数的方法。

# linker - GNU 链接器默认使用哪个库路径？

> ID：15169266
> 
> 赞同：1
> 
> 时间：2013-03-02T00:38:05.473
> 
> 标签：linker, embedded, arm, ld, toolchain

我正在使用工具链并从 i86 工作站对 arm 进行交叉编译。我知道哪个路径正在用作默认路径库，我的工作站的 gnu 链接器看起来 ld.config 但我想要我的交叉编译器的 gnu 链接器的默认库目录。有时，传递正确的 LD_CFLAGS 会出现如下错误：

```
warning: libx***.so.0, needed by needed by liby***.so, not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:31:21.257

> 我想要我的交叉编译器的 gnu 链接器的默认库目录

```
cross-gcc --print-search-dirs | grep ^libraries 
```

应该为你回答。

# gnustep - 如何设置 GNUSTEP_MAKEFILES 以及将其设置为什么？

> ID：15169267
> 
> 赞同：3
> 
> 时间：2013-03-02T00:38:07.347
> 
> 标签：gnustep

我在 Windows 7 上的 VirtualBox 4.2.6 中运行 Ubuntu 12.04.1 LTS。我正在尝试从[GitHub 上的官方存储库](https://github.com/gnustep/gnustep-base)下载的源代码构建 GNUstep Base，而不是使用 APT 安装 GNUstep 的任何部分（不要问）。当我进入`sudo make install`终端时，我得到了

GNUmakefile:29: GNUmakefile:30: 无法从 gnustep-config 获取 GNUSTEP_MAKEFILES 设置！GNUmakefile:31: 也许 gnustep-make 没有正确安装，GNUmakefile:32: 所以 gnustep-config 不在你的 PATH 中。GNUmakefile:33: GNUmakefile:34: 你的路径当前是 /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin GNUmakefile:35: GNUmakefile:40: ***您需要在编译之前设置 GNUSTEP_MAKEFILES！停止。

呵呵（讽刺）。我的`PATH`变量实际上设置为`/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/GNUstep/System/Tools:/usr/GNUstep/System/Library/Makefiles`. 这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:07:12.893

您需要获取设置所有必需`GNUSTEP_*`变量的 /usr/share/GNUstep/Makefiles/GNUstep.sh 脚本：

```
$ . /usr/share/GNUstep/Makefiles/GNUstep.sh         # or
$ . /usr/local/share/GNUstep/Makefiles/GNUstep.sh
$ make
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T01:15:41.183

在我的情况下，我必须以`GNUstep.sh`root 身份进行源以允许安装工作。

```
$ sudo su
# . /usr/GNUstep/System/Library/Makefiles/GNUstep.sh
# export GNUSTEP_SYSTEM_LIBRARY=/usr/GNUstep/System/Library/
# export PATH=$PATH:/user/GNUstep/System/Tools/
# ./configure
# make
# make install 
```

# objective-c - 在 Objective-C 中使用 C 宏来分配初始化

> ID：15169278
> 
> 赞同：2
> 
> 时间：2013-03-02T00:39:33.260
> 
> 标签：objective-c

这个问题是出于好奇，为了我自己的乐趣，而不是它是否是一个好主意，而是来自一个主要是 C#/JavaScript 的背景，在 Objective-C 中不断地看到这个让我觉得有点难看：

```
MyClass* myObj = [[MyClass alloc] init]; 
```

...我很好奇是否可以定义一个 C 风格的宏，这样它就可以变成这样：

```
MyClass* myObj = new MyClass; 
```

...或语法相似的东西。

有没有人这样做过或见过这样做过？随意评论为什么这可能是一个可怕的想法（除了明显的不标准和不熟悉的想法），但这不会阻止我想知道它是否可以完成。;)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T00:42:04.120

你当然可以完成这项工作：

```
#define new(x) [[x alloc] init]
MyClass *myObj = new(MyClass); 
```

如果你需要在没有括号的情况下这样做，我认为你不走运。

`NSObject`不过提供了一个`new`类方法。所以你已经可以这样做了，如果你碰巧更喜欢它：

```
MyClass *myObj = [MyClass new]; 
```

这是[相关文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/new)的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:41:55.773

`MyClass *myObj = new(MyClass);`如果可以使用，为什么要写

```
#define createObject(className, objectName) className *objectName = [[className alloc] init] 
```

和

```
createObject(NSObject, obj); 
```

您的代码肯定会变得更不可读。然后，您可以为其他初始化程序创建宏，例如`initWith...:`

仅仅因为可以做某事，并不意味着它应该做。编写可读代码而不是短代码通常是一个好主意。

# entity-framework - 在 EF 5 升级后的添加迁移中收到“支持‘上下文’上下文的模型已更改...

> ID：15169281
> 
> 赞同：7
> 
> 时间：2013-03-02T00:39:38.850
> 
> 标签：entity-framework, entity-framework-5, entity-framework-migrations

我们正在使用代码优先迁移构建应用程序。我们一直在使用 Entity Framework 5.0.0 RC，我们为 Entity Framework 更新了 NuGet 包。数据库已与模型上下文同步。代码优先迁移几个月来一直运行良好。

当我们修改模型并尝试添加迁移，甚至查询迁移时，我们会收到 System.InvalidOperationException，因为模型支持已更改。

好吧，显然它有，我正在尝试添加迁移。

我们不确定从这里做什么。如果我删除更改，我可以成功运行 Get-Migrations，它表明数据库已正确应用了所有迁移。尽管 ProductVersion 列显示“5.0.0-rc.net45”。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:27:40.547

找到了。这个问题的根源是`DbContext.CommandTimeout`在我们的构造函数中为同一个类设置的代码，就像在[另一个问题](https://stackoverflow.com/questions/12788972/set-database-timeout-in-entity-framework)中一样。访问该属性启动了一个初始化过程，该过程向我们提供了我们实际调用的命令试图解决的错误。

# c++ - C++ 向量提供令人难以置信的意外价值

> ID：15169282
> 
> 赞同：2
> 
> 时间：2013-03-02T00:39:40.403
> 
> 标签：c++, windows, vector, codeblocks

我有这个代码：

```
std::vector <int> loc;
loc.push_back(cpx);
loc.push_back(cpy);
loc.push_back(play.GetSize().x);
loc.push_back(70);
std::cout<<loc[3]; 
```

在我正在制作的游戏中，但即使我打印 loc[2] 和 loc[3] 的值，它们也完全不同于应有的值，当我运行此代码时，我得到 loc[3] 等于 70070 而不是 70。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T00:43:02.377

您的代码中有另一个`cout`没有`endl`或`\n`在您忘记删除的某个地方。那个打印`700`, 而`70`是代码示例中最后一行的正确输出。

改变你的最后一行，`std::cout<< " and loc[3] is: " << loc[3] << std::endl;`看看我的猜测是正确的，然后去寻找另一个 cout。

# html - IE 在 RTL 页面上失去左手和右手

> ID：15169285
> 
> 赞同：1
> 
> 时间：2013-03-02T00:39:42.130
> 
> 标签：html, css, internet-explorer, internet-explorer-9

我正在尝试使用 IE 9 做一些圆角工作 :-(
这是我的示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title></title>
        <style>
            body{
                direction:rtl;
            }
            ul{
                list-style: none outside none;
                padding:0px;
            }
            li{
                display: inline-block;
                padding: 10px;
                border-radius: 20px 20px 20px 0px;
                border: 1px solid #777;
                background-color: #AAA;
            }
        </style>
    </head>
    <body>
        <ul id='some'>
            <li>test1</li>
            <li>test2</li>
        </ul>
    </body>
</html> 
```

只是因为`direction:rtl;`身体上的IE失去了他的左手和右手！
边框正确四舍五入，背景镜像如下图

![IE 是一个绝对的白痴，这张照片是数百万的证明](../Images/f34517d3d9b0bba0407d8f46c4c3c7bb.png)

似乎认为 RTL 人的右手是他们的左手 X-(
Firefox, Chrome, Safari , ... 没有问题并正确渲染；
有什么解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:53:00.983

编辑：用下面的解决方案更新答案

[http://jsfiddle.net/hxSgH/](http://jsfiddle.net/hxSgH/)

```
 body{
        direction:rtl;
        }

        ul{
            direction:ltr;
            list-style: none outside none;
            padding:0px;
        }

        li{
            direction:rtl;
            display: inline-block;
            padding: 10px;
            border-radius: 20px 20px 20px 0px;
            border: 1px solid #777;
            background-color: #FF0000;
        }

<body>
     <ul id='some'>
        <li>test1 میکنیم @</li>
        <li>test2 میکنیم @</li>
    </ul>
</body> 
```

# jquery - gridster：你能把小部件的可触摸区域限制在特定区域吗？

> ID：15169289
> 
> 赞同：6
> 
> 时间：2013-03-02T00:40:24.567
> 
> 标签：jquery, gridster

gridster 的规范使用似乎是可以触摸整个对象以指示要开始拖动操作的方式。是否可以将可触摸区域限制为对象中的特定区域（div），可能由某种图标表示？我希望能够将 gridster 与其中包含其他（鼠标敏感）事物的对象一起使用，并且我不希望用户（让 gridster :) 对应该发生的事情感到困惑。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T16:04:23.870

已解决：`draggable`config 选项可以带一个`handle`选项，该选项指定作为句柄的事物。参看。[https://github.com/ducksboard/gridster.js/pull/59](https://github.com/ducksboard/gridster.js/pull/59)

# html - HTML 表单提交按钮事件不会在 Web 服务器上触发，但在沙箱中有效

> ID：15169290
> 
> 赞同：1
> 
> 时间：2013-03-02T00:40:26.580
> 
> 标签：html

我有点 HTML 菜鸟，但出于某种奇怪的原因，我的 HTML 表单的提交按钮事件在上传到我的网络服务器后不会触发，但相同的代码在我自己的计算机上工作。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:43:49.663

您的 javascript 文件似乎没有加载。这可能是问题所在。

将您的 js 包含更改为此网址： [http ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

不是这个：这是错误的../../../ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:43:56.403

这将是问题：

[http://listexplosionevents.com/ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://listexplosionevents.com/ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

您正在尝试从那里包含 jQuery。我认为应该只是`//ajax...`

当您尝试提交表单时，您会看到错误：

> 未捕获的 ReferenceError：$ 未定义

这表明没有包含 jQuery。你也得到。

> 获取[http://listexplosionevents.com/ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://listexplosionevents.com/ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js) 404（未找到）

注意控制台！

# php - PHP - foreach 函数仅显示满足特定变量的原始数据

> ID：15169295
> 
> 赞同：-4
> 
> 时间：2013-03-02T00:41:02.633
> 
> 标签：php

第一，如果我的问题不是很清楚，我深表歉意！

我知道可以通过对数据库进行一些更改来完成，但是，我不能！我需要使用这个解决方案：

我有几个从数据库中提取的数据。那些是：

ID、订单号、日期、名称

在我的页面上我有这个代码：

```
<? if (isset($showall)) { 
   foreach($showall as $item) { ?>

   <span><? echo $item['id'];?></span>
   <span><? echo $item['ordernumber'];?></span>
   <span><? echo $item['date'];?></span>
   <span><? echo $item['name'];?></span>
<? }; 
}; ?> 
```

所以，我有这个变量出现在所有页面上

```
$auth_shop->shoplogin; 
```

例如，这让等于“lorent”

所以我希望在 FOREACH 列表中只显示行/原始

"名称" = "$auth_shop->shoplogin;" 或“洛伦特”。所有其他不是“=”的都没有显示...

该怎么做，请有想法的朋友！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:44:15.470

我不确定我是否完全理解你，但如果这是你想要的，那么你去：

```
<? if (isset($showall)) { 
   foreach($showall as $item) { ?>
   <?php  if ($item['name'] == $auth_shop->shoplogin || $item['name'] == 'lorent') { ?>
     <span><? echo $item['id'];?></span>
     <span><? echo $item['ordernumber'];?></span>
     <span><? echo $item['date'];?></span>
     <span><? echo $item['name'];?></span>
   <?php } ?>
<? }; 
}; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:50:51.707

```
<?php if (isset($showall)) { 
   foreach($showall as $item) { ?>
   <?php  
        if ($item['name'] != $auth_shop->shoplogin || $item['name'] != 'lorent') 
            continue; 
   ?>
     <span><? echo $item['id'];?></span>
     <span><? echo $item['ordernumber'];?></span>
     <span><? echo $item['date'];?></span>
     <span><? echo $item['name'];?></span>

<?php
}
} 
?> 
```

# javascript - 前瞻表现得像是在消耗

> ID：15169299
> 
> 赞同：2
> 
> 时间：2013-03-02T00:41:37.450
> 
> 标签：javascript, regex

昨天我回答了一个问题，[用户试图“以任何顺序”匹配字符类。](https://stackoverflow.com/questions/15151300/how-to-write-regex-that-must-contain-at-least-3-letters-and-3-digits-in-any-orde/15151579#15151579) 正则表达式本身没有“和”结构，但我想出了解决方案（删节）：

```
(?=[a-z])(?=\d)[a-z\d]{6,} 
```

这不起作用，但将其更改为

```
(?=.*[a-z])(?=.*\d)[a-z\d]{6,} 
```

*确实*有效。由于前瞻不消耗任何东西，我发现这个通配符要求有点奇怪。为什么`.*`需要使这个表达式匹配，例如，`a1a1a1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T00:45:51.433

需要使用通配符，这样前瞻可以表示“前方任何地方”而不是“就在此处，向前方向”。

没有它，你的正则表达式是这样的：

*   在字符串中找到满足以下条件的某处（称为 X）：
*   X 后面的字符是字母
*   X后面的字符也是一个数字
*   X 后有 6 个或更多字母数字字符

由于中间两个是互斥的（字符不能是字母和数字）它总是会失败。

但是，第二个正则表达式说：

*   在字符串中找到满足以下条件的某处（称为 X）：
*   在任意数量的字符之后，有一个字母
*   在任意数量的字符之后，有一个数字
*   X 后至少有 6 个字母数字字符

希望这可以解释差异；）

# javascript - createPattern 方法实现

> ID：15169306
> 
> 赞同：3
> 
> 时间：2013-03-02T00:42:39.687
> 
> 标签：javascript, jquery, html, canvas

我正在尝试绘制一个使用填充样式的填充矩形。下面的代码允许绘制一个矩形，但在此之后，所有后续操作都会取消绘制。

这是控制填充的代码：

```
var img = new Image();
img.src = 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcR4Ag1va1Vm9Tynun8vY89CS1pY1eNMWGMxrc5efOIzEcQ-4IFa'
var pat = context.createPattern(img, 'repeat');
context.fillStyle = pat; 
```

我怀疑我缺少关于 createPattern 方法的某些内容。是否有替代我试图完成的不使用 createPattern 的方法？我注意到一些示例使用 onload(); img.src 的值在我的生活环境中发生变化，所以我不确定这是否相关。

小提琴：http: [//jsfiddle.net/Dvtz3/10/](http://jsfiddle.net/Dvtz3/10/)

**好的，所以事实证明，一旦我实时运行而不是本地运行，chrome 安全错误就得到了修复，但不是用模式填充矩形，而是将其填充为实心。填充图案在 FF 中运行良好**

[https://dl.dropbox.com/u/97446129/2-28/joined%2011-1/filltest.html](https://dl.dropbox.com/u/97446129/2-28/joined%2011-1/filltest.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:53:27.897

查看错误控制台，我看到它充满了`SecurityError`s。这是因为当您在画布上绘图时，您正在使用跨域图像对其进行污染。这将不允许您`getImageData`出于安全原因打电话，因此会出现“时髦”的结果。

# ruby-on-rails - 方法必须总是有返回？

> ID：15169311
> 
> 赞同：1
> 
> 时间：2013-03-02T00:43:22.373
> 
> 标签：ruby-on-rails

使用 Rails 3。这是一个示例方法：

```
 def all_users
    users.as_json
  end 
```

我们必须总是有`return`一个方法吗？以上工作，但

```
 def all_users
    u = users.as_json
    u
  end 
```

另一件事，我尝试申请`returning`，但必须始终附上`do ... end`?

有更好的方法来编写方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:46:53.010

在 Ruby 中，返回方法的最后*执行*（感谢 mharper）行。

所以这：

```
def all_users
  users.as_json
end 
```

这：

```
def all_users
  u = users.as_json
  u
end 
```

还有这个：

```
def all_users
  u = users.as_json
  return u
end 
```

做同样的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T00:48:25.540

Ruby 主义者喜欢尽可能省略`return`关键字。所以在你的情况下，这是编写方法的首选方式

```
def all_users
  users.as_json
end 
```

对于你的第二个问题

```
I tried to apply returning, but it must always be enclosed with do ... end? 
```

`do`和`end`are 作为组合用于在 Ruby 中编写称为“块”的东西。实际上，块是一种特殊的迭代方法，适用于数组、哈希、可枚举等。您不必在and中包含`return`关键字。`do``end`

# bnf - 在计算机科学中（尤其是在使用 EBNF 的元语言中），符号 -> 和 <- 是否具有特定含义？

> ID：15169312
> 
> 赞同：0
> 
> 时间：2013-03-02T00:43:23.017
> 
> 标签：bnf, ebnf, metalanguage

如果这不在 SO 的领域内，我深表歉意——它有点高级/理论。我正在研究自定义语言规范（如果您有兴趣，称为 ACELandic）。它基于扩展巴科斯-瑙尔形式（EBNF）。

我看到像这样的符号

```
<- 

->

<=

=> 
```

这真的让我很困惑。这些是标准化的符号吗？我记得在 Haskell 中这样的东西，但我无法理解这一点。我感谢任何提示或建议。

![在此处输入图像描述](../Images/07d9842d65a3b7c4a682ff99ee8de0a8.png)

# c# - 使用枚举映射 NHibernate 3 类时出错

> ID：15169315
> 
> 赞同：0
> 
> 时间：2013-03-02T00:44:01.860
> 
> 标签：c#, nhibernate, mapping, nhibernate-mapping

因此，我在 NHibernate 3.0 中与我的 xml 文件的映射出现错误。我有一个 MediaContent 类，我正在尝试绘制它并且遇到了问题。我知道这与我的 xml 映射有关，因为该映射未显示在我的配置中。

这是 MediaContent 类（枚举是 ContentAccessibility 和 MediaTypes）：

```
public class MediaContent:IMediaContent,ICreatedAndModified, IActive, IArchived
{
    #region Properties/Members
    public int MediaContentID { get; set; }
    public string Name { get; set; }
    public string FileName { get; set; }
    public ContentAccessibility Accessibility { get; set; }
    public MediaTypes MediaType { get; set; }
    public object Media { get; set; }
    public Dictionary<string, object> MediaProperties { get; set; }
    public string Author { get; set; }
    public string InternalIdentifier { get; set; }
    public string CreatedBy { get; private set; }
    public DateTime? CreatedOn { get; private set; }
    public string LastModifiedBy { get; private set; }
    public DateTime? LastModifiedOn { get; private set; }
    public string ComplianceCode { get; private set; }

    public bool IsActive { get; private set; }
    public bool Archived { get; private set; }
    #endregion

    #region Methods
    public void Create(DateTime createdOn, string createdBy)
    {
        CreatedOn = createdOn;
        CreatedBy = createdBy;
    }
    public void Modified(DateTime modifiedOn, string modifiedBy)
    {
        LastModifiedBy = modifiedBy;
        LastModifiedOn = modifiedOn;
    }
    #endregion

} 
```

这是 MediaContent.hbm.xml 文件：

```
 <?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                                     assembly="Domain"
                                     namespace="Domain.Models">

  <class name="MediaContent" lazy="false" table="MediaContent">
    <!-- Identity Mapping-->
    <id name="MediaContentID">
      <column name="MediaContentID" />
      <generator class="native" />
    </id>

    <!-- Simple Property Mappings-->    
    <property name="Name" />
    <property name="FileName" />
    <property name="Accessibility" />
    <property name="MediaType" />
    <property name="Media" />
    <property name="Author" />
    <property name="InternalIdentifier" />
    <property name="ComplianceCode" />
    <property name="CreatedBy" />
    <property name="CreatedOn" />
    <property name="LastModifiedBy" />
    <property name="LastModifiedOn" />    
    <property name="IsActive" />
    <property name="Archived" />  

  </class>
</hibernate-mapping> 
```

可能是我忽略了 NHibernate 的工作方式，但据我所知，其他情况应该没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:55:36.620

你在这里有无数的问题：

1.  看起来 MediaType 和 ContentAccessibility 是具体的类，因此您需要某种引用映射。它们不是属性，因为这通常保留给原始属性，如字符串、整数、日期等。

2.  至少其中一个属性是对象类型，您不能简单地将其映射为属性。我最近遇到了这种情况，发现将其映射为字符串然后将其转换为域上的正确内容（guid、日期等）更容易。

我不完全记得 HBM，但您可能还需要一些东西来表明 DateTime 属性可以为空。如果我是你，我会通过代码查看 NH 映射。

# c# - 如何在 MVC4 中创建自定义验证？

> ID：15169318
> 
> 赞同：3
> 
> 时间：2013-03-02T00:44:13.687
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我意识到在 MVC4 中使用验证属性来执行此任务。但要知道我正在处理不同的情况。

这是模型，其中我有一个集合属性`Choices`（这一直有 5 个元素），`CorectChoice`集合中的选定索引在哪里。

```
public class MultipleChoiceQuestionTemplate : QuestionTemplate
{
    public MultipleChoiceQuestionTemplate() { ... }

    [DisplayName("Question")]
    public string QuestionText { get; set; }
    public List<string> Choices { get; set; }

    [DisplayName("Correct Choice")]
    public int CorrectChoice { get; set; }
} 
```

这是视图，请观看演示。

![在此处输入图像描述](../Images/fa786e141454649ddfb661cf8382e116.png)

```
 <div id="choices">
    @for (int i = 0; i < Model.Choices5.Count; i++) {
        <div class="choice-container" style="display: block;">
        @Html.TextBoxFor(model => model.Choices5[i])
        @Html.RadioButtonFor(model => model.CorrectChoice, i)
        </div>
    }   
    </div> 
```

请注意，用户可以在输入中留下空字符串（type="text"）。我需要验证所选索引（单选按钮）是否应该有一个字符串。

在提交表单之前如何验证它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:24:22.843

由于您希望在客户端这样做，因此您需要 IClientValidateable 用于自定义逻辑或编写您自己的手动验证，而不是 IvalidateableObject ，它只是服务器端。但是 - 首先要尝试的是 Darin's answer here，通过正确放置验证错误，它可能会让你很容易离开。

[使用 HtmlHelper 类时，MVC 单选按钮列表未分组](https://stackoverflow.com/questions/5289489/mvc-radio-button-lists-are-not-grouped-when-using-the-htmlhelper-class)

如果这不起作用，至少要知道另一个选项是 IClientValidateable [ASP.NET MVC 实现自定义验证器使用 IClientValidatable](https://stackoverflow.com/questions/8284207/asp-net-mvc-implement-custom-validator-use-iclientvalidatable)

如果 Darin 在第一个链接中的解决方案由于某种原因不起作用，我相信它应该）你实际上可以通过多种方式相当简单地离开这里

1.  只需拦截表单发布并查询单选按钮并确保选中一个。由于理论上您可以拥有多个单选按钮类型，因此您可以使用选择器来确保它是表单的一部分或包含类类型。如果达林的解决方案不起作用，请告诉我，如果您需要帮助，我会提供解决方案。

2.  在单选按钮上使用不显眼的验证。虽然只有列表中的第一个会得到错误。您将不得不使用 css 类解决一些小问题，但解决方案在这里： [ASP.NET MVC 3 unobtrusive validation and radio buttons](https://stackoverflow.com/questions/5663563/asp-net-mvc-3-unobtrusive-validation-and-radio-buttons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:50:44.883

你必须实现接口 IValidatableObject 检查这篇文章可以看到一个例子[http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation_topic4](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation_topic4)

# vb.net - VB.NET 如何从 ToolStripDropDownButton 的下拉列表中删除图像边距

> ID：15169331
> 
> 赞同：0
> 
> 时间：2013-03-02T00:45:46.650
> 
> 标签：vb.net, windows-7

我正在尝试删除左侧边距，该边距用于 ToolStripDropDownButton 的 DropDown 列表的图像和复选框。

![在此处输入图像描述](../Images/9b2d6930c2c38f704b2873d058895d38.png)

此代码无济于事：

```
CType(ToolStripDropDownButton2.DropDown, ContextMenuStrip).ShowImageMargin = False
CType(ToolStripDropDownButton2.DropDown, ContextMenuStrip).ShowCheckMargin = False 
```

有没有办法做到这一点？
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:03:39.893

转换错误，Dropdown 属性的类型是 ToolStripDropDownMenu。只需将第二个参数更改为 CType。C#中的代码是：

```
 public Form1() {
        InitializeComponent();
        var dp = (ToolStripDropDownMenu)toolStripDropDownButton1.DropDown;
        dp.ShowCheckMargin = dp.ShowImageMargin = false;
    } 
```

产生：

![在此处输入图像描述](../Images/156a84d4c5e51c69923bb34f96787dcf.png)

# ios - 在 iOS 屏幕上显示 FPS（无仪器）

> ID：15169342
> 
> 赞同：10
> 
> 时间：2013-03-02T00:46:59.237
> 
> 标签：ios, instruments, frame-rate

在 WWDC 2012 Session 506 中，它们在应用程序中显示每秒帧数`UILabel`，而无需使用附加到仪器的核心动画分析器。我想这样做是为了方便，并让我的团队的其他成员在他们在现实世界场景中使用该应用程序时监控 FPS。不幸的是，会话 506 不包含在 WWDC '12 示例代码中。

有谁知道如何做到这一点？我知道 Cocos2D 在他们`CCDirector`的. 它没有必要成为公共 API，因为我不会将此代码发送给客户。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T18:49:39.010

我发现了一个在 iOS 上测量 FPS 的开源组件：[https ://github.com/RolandasRazma/RRFPSBar](https://github.com/RolandasRazma/RRFPSBar)

# java - 在Java中调用方法时出错

> ID：15169346
> 
> 赞同：-4
> 
> 时间：2013-03-02T00:47:39.043
> 
> 标签：java, arrays, multidimensional-array

我有一个有 3 个方法的类，它基本上用 Java 中的数组数组做一些基本的东西，虽然当我试图在我的 main 中调用这些方法时我得到一个错误..谁能告诉我问题是什么......我确定它一些愚蠢的基本错误:(

```
class Matrix {
    double[][] m = { {2,4,31,31}, 
                  {3,3,21,41},
                  {1,2,10,20},
                  {3,2,20,30} };

    public static void negate(double[][] m){
        int r = m.length;
        int c = m[r].length;
        double[][] n = new double[c][r];
        for(int i = 0; i < n.length; ++i) {
            for(int j = 0; j < n[i].length; ++j) {
                n[i][j] = (m[i][j])*-1;
            }
        }

    }

    public static void transposeMatrix(double[][] m){
        int r = m.length;
        int c = m[r].length;
        double[][] t = new double[c][r];
        for(int i = 0; i < r; ++i){
            for(int j = 0; j < c; ++j){
                t[j][i] = m[i][j];
            }
        }

    }

    public void print(double[][] n, double[][] t){
        int r = m.length;
        int c = m[r].length;

        for(int i = 0; i < r; ++i){
            for(int j = 0; j < c; ++j){
            System.out.print(" " + n[i][j]);
            }
            System.out.println("");
            }

        for(int i = 0; i < r; ++i){
            for(int j = 0; j < c; ++j){
            System.out.print(" " + t[i][j]);
            }
            System.out.println("");
            }
    }
} 
```

现在这是我的主要..

```
public class testMatrix {
    public static void main(String[] args){

        Matrix.negate(m);
    }

} 
```

提前感谢您的任何意见！

这是错误...

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    m cannot be resolved to a variable

    at testMatrix.main(testMatrix.java:5) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T00:51:02.007

> 线程“main”java.lang.Error 中的异常：未解决的编译问题：m 无法解析为 testMatrix.main(testMatrix.java:5) 处的变量

通过查看您的错误非常明显，您需要 Matrix 类的实例来访问其实例变量

```
 Matrix.negate(new Matrix().m); 
```

# javascript - jQuery的幻灯片效果

> ID：15169347
> 
> 赞同：2
> 
> 时间：2013-03-02T00:47:38.833
> 
> 标签：javascript, jquery, html, css

嗨，我一直在使用 jQuery 的幻灯片效果遇到这个问题，我想要得到的效果是当您单击问题时答案会向下滑动。它适用于第一个问题，但不适用于接下来的几个问题。这是一个指向示例[http://jsfiddle.net/p8CLN/3/](http://jsfiddle.net/p8CLN/3/) `$(document).ready(function(){ $("#question").click(function(){ $("#answer").slideToggle("slow"); }); });`的链接， 我真的被这个难住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:50:29.700

将所有 ID 转换为类，并为 click 函数提供上下文：

```
$(document).ready(function(){
    $(".question").click(function(){
        $(this).next(".answer").slideToggle("slow");
    });
}); 
```

在此处查看更新的小提琴 - [http://jsfiddle.net/teddyrised/p8CLN/8/](http://jsfiddle.net/teddyrised/p8CLN/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:50:49.647

ID 必须是唯一的。

[这](http://jsfiddle.net/p8CLN/5/)是一个更新的小提琴。我已将 ID 替换为类名并用于`.next()`获取适当的答案元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:52:36.597

`question`这是因为您正在使用具有 id和的多个元素`answer`。id 必须是唯一的，因为 jquery 将在找到第一个 id 后停止构建集合。

我已经更新了你的小提琴来修复：

[http://jsfiddle.net/p8CLN/6/](http://jsfiddle.net/p8CLN/6/)

请注意，我还需要更改 CSS 并添加一个用途`next('.answer')`，以便仅将切换定位到单击问题的后续答案。

```
 $(document).ready(function(){
          $(".question").click(function(){
            $(this).next(".answer").slideToggle("slow");
          });
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T03:14:45.053

您为多个元素提供相同的 id。ID 必须是唯一的。一旦文件准备好。在 document.ready 上，您可以绑定一个单击事件，您可以使用下一个作为解决方案。这是示例

```
$(document).ready(function()
{
$(".question").click(function()
{
$(this).next(".answer).slideToggle("slow");
});
}); 
```

# c# - 什么相当于 ASP.net 项目中的 Servlet（在 tomcat 中扩展 HttpServlet 的 Java 类）？

> ID：15169356
> 
> 赞同：10
> 
> 时间：2013-03-02T00:48:50.033
> 
> 标签：c#, asp.net, servlets

我在 Apache Tomcat 项目开始时就开始编写自己的 Web 应用程序，因此当我编写一个用一小段 JSON 响应某些 GET 或 POST 的 Servlet 时，我的代码看起来与此类似：

```
package com.stackoverflow.question;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.*;
import org.json.*;

public class SimpleServlet_json extends HttpServlet {
  private static final long serialVersionUID = 1L;

  public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    request.setCharacterEncoding("UTF-8");
    JSONObject json = new JSONObject();
    try {
      json.put("Success", true);
      json.put("Name", request.getParameter("name"));
    } catch (JSONException e) {}
    response.setContentType("application/json");
    response.getOutputStream().print(json.toString());
  }
} 
```

我的问题是**“ASP.net 的等效方法/设计/新项目是什么？”**

我一直把这些写成 WebForms，看起来像这样：

首先是（基本上是空的）`.aspx`文件：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="SimpleServlet_json.aspx.cs" Inherits="com.stackoverflow.question.SimpleServlet_json" %> 
```

然后这个`.cs`文件：

```
namespace com.stackoverflow.question
{
  public partial class SimpleServlet_json : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {
      var json = new JSONResponse()
      {
        Success = Request.QueryString["name"] != null,
        Name = Request.QueryString["name"]
      };
      Response.ContentType = "application/json";
      Response.Write(JsonConvert.SerializeObject(json));
    }
  }
  [Serializable]
  class JSONResponse
  {
    public string Name { get; set; }
    public bool Success  { get; set; }
  }
} 
```

但我暗自担心我会要求我的 c# 程序员同事采用一种非直观的风格。

这些示例相当做作，实际上它们用作数据库实体的 JSON 表示。例如，URL`example.com/product/1`是 HTML 版本（带有与 URL 关联的 JSP 或 ASPx 页面），`example.com/product/1.json`而是 JSON 表示（带有这些类之一）。我是 URL 重写的粉丝。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T00:59:48.020

HttpHandlers 应该在 2003 年之后的任何版本的 .NET 版本中执行此操作。请参阅此[Microsoft 文章](http://msdn.microsoft.com/en-us/library/aa478987.aspx)。

**但是**，更现代（也更直观）的方法是使用 .NET MVC 或更具体的 .NET Web API。

引用[Scott Gu](http://weblogs.asp.net/scottgu/archive/2012/02/23/asp-net-web-api-part-1.aspx)在他的 asp.net 博客上的博客：

> “我们新的 ASP.NET Web API 支持使您能够轻松创建功能强大的 Web API，可以从广泛的客户端访问（从使用 JavaScript 的浏览器到任何移动/客户端平台上的本机应用程序）。它提供以下支持:"

官方的[Microsoft .NET Web API 页面](http://www.asp.net/web-api)指出：

> ASP.NET Web API 是一个框架，可让您轻松构建覆盖广泛客户端（包括浏览器和移动设备）的 HTTP 服务。ASP.NET Web API 是在 .NET Framework 上构建 RESTful 应用程序的理想平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T07:59:18.343

我认为您正在寻找`Generic Handler`（.ashx）

```
<%@ WebHandler Language="C#" Class="MyHandler" %>

using System;
using System.Web;

public class MyHandler : IHttpHandler 
{
    public void ProcessRequest (HttpContext ctx) 
    {
        var json = new JSONResonse()
        {
            Success = ctx.Request.QueryString["name"] != null,
            Name = ctx.Request.QueryString["name"]
        };

        ctx.Response.ContentType = "application/json";
        ctx.Response.Write(JsonConvert.SerialzeObject(json));
    }

    public bool IsReusable {
        get { return false; }
    }
} 
```

向他们提出与您的页面相同的请求。yoursite.com/my-handler.ashx?name=foo

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-20T08:51:15.800

我有一个类似的问题，对它的一些研究以 Web API 结束。想和SO分享。

在 MSDN 站点中， http: [//msdn.microsoft.com/en-us/library/jj823172 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/jj823172(v=vs.110).aspx)

找到一个视频教程，他们说对于 iPhone 或 JSON 或 xml 的 Web 应用程序客户端等机器消耗，推荐使用 Web API。它在视频的最后一部分。

而对于更复杂的机器对机器通信，WCF 是可取的。

[http://channel9.msdn.com/Series/Building-Web-Apps-with-ASP-NET-Jump-Start/Building-Web-Apps-with-ASPNET-Jump-Start-04-Building-a-Service-带有 ASPNET-Web-API 的层](http://channel9.msdn.com/Series/Building-Web-Apps-with-ASP-NET-Jump-Start/Building-Web-Apps-with-ASPNET-Jump-Start-04-Building-a-Service-Layer-with-ASPNET-Web-API)

这是他们演示文稿的屏幕截图。

![在此处输入图像描述](../Images/670a4a43db086ff0e93e422451dbc3da.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T00:53:19.607

我真的不能说我可以在 Servlet 和 asp.net 上的某些类型之间画出相似之处，因为 webforms 是完全不同的。

从您的示例代码中，我可以建议您查看 asp.net webapi，因为这将很好地映射到您当前正在尝试做的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-20T03:19:56.190

更像欧文

“OWIN 定义了 .NET Web 服务器和 Web 应用程序之间的标准接口。”

# wpf - 如何在空或透明背景上点击检测？

> ID：15169358
> 
> 赞同：4
> 
> 时间：2013-03-02T00:48:59.353
> 
> 标签：wpf, custom-controls

我遇到了一个问题，带有路径内容的按钮仅检测路径*上*的鼠标点击。对于 ux，我想在按钮的任何位置注册点击。我已将按钮的背景设置为 null 和透明，因此顶部控件容器决定了背景样式。

这是另一个 SO 帖子：[透明背景上的鼠标事件](https://stackoverflow.com/questions/7991314/mouse-event-on-transparent-background)

如前所述，到目前为止，我已经尝试过透明和 null。

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:wpfMyCustomControl">

<ControlTemplate x:Key="IconTemplate" TargetType="{x:Type ContentControl}">
    <Grid>
        <Path Name="ForegroundSymbol" Data="M0,0 L1,0 1,1 0,1 0.5,0.5 z" Fill="{TemplateBinding Foreground}" Stretch="Fill" />
    </Grid>
</ControlTemplate>

<Style x:Key="IconButtonStyle" TargetType="{x:Type RepeatButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type RepeatButton}">
                <Grid>
                    <ContentControl Name="icon" Template="{StaticResource IconTemplate}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<ControlTemplate x:Key="MyCustomTemplate" TargetType="{x:Type local:MyCustomControl}">
    <Grid Name="LayoutRoot" Background="Red">
        <RepeatButton Background="{x:Null}" Style="{StaticResource ResourceKey=IconButtonStyle}" />
    </Grid>
</ControlTemplate>

<Style TargetType="{x:Type local:MyCustomControl}">
    <Setter Property="Template" Value="{StaticResource ResourceKey=MyCustomTemplate}" />
</Style>
</ResourceDictionary> 
```

如果我从“样式”中删除“x:Key”属性，控件就会呈现。我已经能够使用上述 xaml 控件样式重现该问题，其中点击检测不会在按钮的“背景”部分触发。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:19:10.557

*您应该使用几乎*透明的背景，而不是使用透明背景 。这样，`Click`-event 仍然会被触发，但按钮仍然看起来是透明的。
就像是：

```
<RepeatButton Background="#01FFFFFF" Style="{StaticResource ResourceKey=IconButtonStyle}" /> 
```

颜色定义的前两位数字定义了`Transparency`or`Alpha`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:46:17.087

如果您实际使用背景是透明的，HitTesting 将起作用。您正在应用样式但未包含样式，所以我不能说，但如果在该样式中您正在设置模板并且您没有在 ControlTemplate 中使用背景，那么设置背景是没有意义的。通常，模板中根元素的背景会与背景（通常是面板或边框）进行 TemplateBinding。元素本身不使用背景。另一种选择是覆盖 HitTestCore 方法。您可以在 Reflector/ILSpy 中查看 TextBlock 的实现，因为它会覆盖它以确保其矩形内的任何点（而不仅仅是文本的字符）都是有效的命中点。

**编辑**：根据您提供的样式/模板，问题就是我所描述的。您需要在**ControlTemplate中使用****背景**，否则不会产生任何影响。所以*IconTemplate*应该看起来像：

 ***```
<ControlTemplate x:Key="IconTemplate" TargetType="{x:Type ContentControl}">
    <Grid Background="{TemplateBinding Background}">
        <Path Name="ForegroundSymbol" Data="M0,0 L1,0 1,1 0,1 0.5,0.5 z" Fill="{TemplateBinding Foreground}" Stretch="Fill" />
    </Grid>
</ControlTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:59:12.240

如果您不想设置颜色而不是设置透明，则需要为命中检测提供背景颜色。***

# select - struts标签迭代和选择

> ID：15169365
> 
> 赞同：1
> 
> 时间：2013-03-02T00:49:55.847
> 
> 标签：select, struts2, iterator

我正在尝试在我的 jsp 中构建一个下拉框，其中包含从数据库中获取的一些文件名。我将这些名称作为一个列表`fileNamesList`，其中`elementData`包含

例如，我只想显示文件名`Default_Campaign`。但相反，它显示`FileNames( filename=Default_Campaign`, 在下拉列表中，下面的代码在 jsp 中。

```
 <s:select name="emergwav"  list="fileNamesList"
         headerKey="-1" label="emergwav"  
     <s:iterator value="fileNamesList" id="filename">
         <s:property  value="${filename.getEmergwavfilename()}"/>                         
    </s:iterator>       
</s:select> 
```

任何让我知道如何进入下一级数组列表的帮助都会非常有帮助，我曾尝试`s:iterator`在 jsp 中使用，但没有成功。我还想从此下拉列表中将用户选择的文件名保存到数据库中。

如果我应该提供更多信息，请告诉我。

感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:14:30.147

我很惊讶，我没有得到任何答复。我已经想出了解决方案。我在我的 bean 类中添加了一个 toString 方法来匹配输出以仅显示到级别 1。

# c - C 的明确 CRC

> ID：15169387
> 
> 赞同：23
> 
> 时间：2013-03-02T00:53:13.013
> 
> 标签：c, crc

由于 CRC 被广泛使用，我很惊讶在 C 中很难找到 CRC 实现。

是否有“每个人”都使用的 C 的“确定性”CRC 计算片段/算法？或者：是否有人可以担保并指出我的良好 CRC 实施？我正在寻找特别是 CRC8 和 CRC16 的实现。

仔细想想，我的情况可能有点不合常规。我正在为 Linux 编写 C 代码，代码最终应该移植到微控制器上。似乎某些微控制器 API 确实带有 CRC 实现；无论如何，我正在寻找一个通用的软件实现（我读到 CRC 最初是为了硬件实现）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-02T07:20:06.150

在 C 中找到 CRC 实现应该不难。您可以在[zlib](http://zlib.net/)中找到相对复杂的 CRC-32 实现。

下面是几个[16 位](http://reveng.sourceforge.net/crc-catalogue/16.htm#crc.cat-bits.16)和[8 位 CRC](http://reveng.sourceforge.net/crc-catalogue/1-15.htm#crc.cat-bits.8)的定义，它们使用了这本[出色的 CRC 简介中](http://www.ross.net/crc/download/crc_v3.txt)的约定。

下面是 CRC-8 的简单实现：

```
// 8-bit CRC using the polynomial x^8+x^6+x^3+x^2+1, 0x14D.
// Chosen based on Koopman, et al. (0xA6 in his notation = 0x14D >> 1):
// http://www.ece.cmu.edu/~koopman/roses/dsn04/koopman04_crc_poly_embedded.pdf
//
// This implementation is reflected, processing the least-significant bit of the
// input first, has an initial CRC register value of 0xff, and exclusive-or's
// the final register value with 0xff. As a result the CRC of an empty string,
// and therefore the initial CRC value, is zero.
//
// The standard description of this CRC is:
// width=8 poly=0x4d init=0xff refin=true refout=true xorout=0xff check=0xd8
// name="CRC-8/KOOP"

static unsigned char const crc8_table[] = {
    0xea, 0xd4, 0x96, 0xa8, 0x12, 0x2c, 0x6e, 0x50, 0x7f, 0x41, 0x03, 0x3d,
    0x87, 0xb9, 0xfb, 0xc5, 0xa5, 0x9b, 0xd9, 0xe7, 0x5d, 0x63, 0x21, 0x1f,
    0x30, 0x0e, 0x4c, 0x72, 0xc8, 0xf6, 0xb4, 0x8a, 0x74, 0x4a, 0x08, 0x36,
    0x8c, 0xb2, 0xf0, 0xce, 0xe1, 0xdf, 0x9d, 0xa3, 0x19, 0x27, 0x65, 0x5b,
    0x3b, 0x05, 0x47, 0x79, 0xc3, 0xfd, 0xbf, 0x81, 0xae, 0x90, 0xd2, 0xec,
    0x56, 0x68, 0x2a, 0x14, 0xb3, 0x8d, 0xcf, 0xf1, 0x4b, 0x75, 0x37, 0x09,
    0x26, 0x18, 0x5a, 0x64, 0xde, 0xe0, 0xa2, 0x9c, 0xfc, 0xc2, 0x80, 0xbe,
    0x04, 0x3a, 0x78, 0x46, 0x69, 0x57, 0x15, 0x2b, 0x91, 0xaf, 0xed, 0xd3,
    0x2d, 0x13, 0x51, 0x6f, 0xd5, 0xeb, 0xa9, 0x97, 0xb8, 0x86, 0xc4, 0xfa,
    0x40, 0x7e, 0x3c, 0x02, 0x62, 0x5c, 0x1e, 0x20, 0x9a, 0xa4, 0xe6, 0xd8,
    0xf7, 0xc9, 0x8b, 0xb5, 0x0f, 0x31, 0x73, 0x4d, 0x58, 0x66, 0x24, 0x1a,
    0xa0, 0x9e, 0xdc, 0xe2, 0xcd, 0xf3, 0xb1, 0x8f, 0x35, 0x0b, 0x49, 0x77,
    0x17, 0x29, 0x6b, 0x55, 0xef, 0xd1, 0x93, 0xad, 0x82, 0xbc, 0xfe, 0xc0,
    0x7a, 0x44, 0x06, 0x38, 0xc6, 0xf8, 0xba, 0x84, 0x3e, 0x00, 0x42, 0x7c,
    0x53, 0x6d, 0x2f, 0x11, 0xab, 0x95, 0xd7, 0xe9, 0x89, 0xb7, 0xf5, 0xcb,
    0x71, 0x4f, 0x0d, 0x33, 0x1c, 0x22, 0x60, 0x5e, 0xe4, 0xda, 0x98, 0xa6,
    0x01, 0x3f, 0x7d, 0x43, 0xf9, 0xc7, 0x85, 0xbb, 0x94, 0xaa, 0xe8, 0xd6,
    0x6c, 0x52, 0x10, 0x2e, 0x4e, 0x70, 0x32, 0x0c, 0xb6, 0x88, 0xca, 0xf4,
    0xdb, 0xe5, 0xa7, 0x99, 0x23, 0x1d, 0x5f, 0x61, 0x9f, 0xa1, 0xe3, 0xdd,
    0x67, 0x59, 0x1b, 0x25, 0x0a, 0x34, 0x76, 0x48, 0xf2, 0xcc, 0x8e, 0xb0,
    0xd0, 0xee, 0xac, 0x92, 0x28, 0x16, 0x54, 0x6a, 0x45, 0x7b, 0x39, 0x07,
    0xbd, 0x83, 0xc1, 0xff};

#include <stddef.h>

// Return the CRC-8 of data[0..len-1] applied to the seed crc. This permits the
// calculation of a CRC a chunk at a time, using the previously returned value
// for the next seed. If data is NULL, then return the initial seed. See the
// test code for an example of the proper usage.
unsigned crc8(unsigned crc, unsigned char const *data, size_t len)
{
    if (data == NULL)
        return 0;
    crc &= 0xff;
    unsigned char const *end = data + len;
    while (data < end)
        crc = crc8_table[crc ^ *data++];
    return crc;
}

// crc8_slow() is an equivalent bit-wise implementation of crc8() that does not
// need a table, and which can be used to generate crc8_table[]. Entry k in the
// table is the CRC-8 of the single byte k, with an initial crc value of zero.
// 0xb2 is the bit reflection of 0x4d, the polynomial coefficients below x^8.
unsigned crc8_slow(unsigned crc, unsigned char const *data, size_t len)
{
    if (data == NULL)
        return 0;
    crc = ~crc & 0xff;
    while (len--) {
        crc ^= *data++;
        for (unsigned k = 0; k < 8; k++)
            crc = crc & 1 ? (crc >> 1) ^ 0xb2 : crc >> 1;
    }
    return crc ^ 0xff;
}

#ifdef TEST
#include <stdio.h>
#define CHUNK 16384

int main(void) {
    unsigned char buf[CHUNK];
    unsigned crc = crc8(0, NULL, 0);
    size_t len;
    do {
        len = fread(buf, 1, CHUNK, stdin);
        crc = crc8(crc, buf, len);
    } while (len == CHUNK);
    printf("%#02x\n", crc);
    return 0;
}
#endif 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-02T00:57:27.460

不，没有“确定的 CRC”，因为 CRC 代表一组基于多项式的算法。通常根据大小给出各种[模棱两可的]通用名称（例如CRC-8、CRC-32）。不幸的是，大多数尺寸都有几个不同的版本。

Wikipedia 的[Cyclic Redundancy Check](http://en.wikipedia.org/wiki/Cyclic_redundancy_check#Commonly_used_and_standardized_CRCs)条目列出了一些常见的变体，但必须使用*给定域的**正确校验和*，否则会出现不兼容性。（请参阅我对迈克的回答的评论，了解这有多么令人困惑！）

 *无论如何，选择一个合适的实现并使用它——网上不乏可以找到的示例。如果碰巧有一个库提供了合适的实现，那么一定要使用它。但是，没有为此的“标准”C 库。

这里有一些资源：

*   AutomationWiki 上的[“CRC16”（CRC-16-CCITT）](http://automationwiki.com/index.php?title=CRC-16-CCITT)实现。
*   [对 Dobbs 博士实施 CCITT 循环冗余检查](http://www.drdobbs.com/implementing-the-ccitt-cyclical-redundan/199904926)。
*   Chris Borrelli的[IEEE 802.3 循环冗余检查文章讨论了一个过时的 Xilinx 工具来生成 Verilog（即“到硬件”）实现。](http://www.xilinx.com/support/documentation/application_notes/xapp209.pdf)
*   请参阅相关问题[CRC32 C or C++ implementation](https://stackoverflow.com/questions/302914/crc32-c-or-c-implementation) - 请注意，一些答案与 "CRC32" (IEEE 802.3) 相关，而其他答案与[Adler-32 相关](http://en.wikipedia.org/wiki/Adler-32)。
*   librock库，[boost](http://www.boost.org/doc/libs/1_37_0/libs/crc/index.html)，来自 GNU core utils的[cksum](http://www.mibsoftware.com/librock/)[源..](http://en.wikipedia.org/wiki/Cksum)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T01:03:07.040

不确定 CRC-8 或 CRC-16，但[RFC 1952](https://www.rfc-editor.org/rfc/rfc1952#section-8)中有示例 CRC-32 代码。该 RFC 还引用了[V.42](http://www.itu.int/rec/dologin_pub.asp?lang=e&id=T-REC-V.42-200203-I!!PDF-E&type=items)标准，该标准在第 8.1.1.6 节中描述了 CRC-16。

RFC 1952 还指出：

> ```
>  If FHCRC is set, a CRC16 for the gzip header is present,
>         immediately before the compressed data. The CRC16 consists
>         of the two least significant bytes of the CRC32 for all
>         bytes of the gzip header up to and not including the CRC16.
>         [The FHCRC bit was never set by versions of gzip up to
>         1.2.4, even though it was documented with a different
>         meaning in gzip 1.2.4.] 
> ```

所以可能有你的 CRC-16 和 CRC-32。（即只取 CRC-32 的两个最低有效字节。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-26T06:46:21.823

有许多不同的算法用于实现 CRC。有一个简单的进行多项式除法。

[这](http://create.stephan-brumme.com/crc32/)是 C 语言中用于通用 32 位 CRC 计算的各种算法的链接。作者还给出了一些速度对比。

[Koopman](https://users.ece.cmu.edu/~koopman/crc/)有一个网站，提供各种 CRC 的性能，以及给定数据包长度的最佳 CRC​​ 指南。*

# database - 将数据库表示为网络

> ID：15169390
> 
> 赞同：-1
> 
> 时间：2013-03-02T00:53:19.693
> 
> 标签：database, social-networking

我正在研究我的一个项目，该项目需要**搜索一个人在网络中的位置**。基本上我需要定义一个数据库，其中包含一些具有不同连接的用户。

就像网络一样，***用户是节点***，***连接是边***。假设*友谊*是一种优势。可能还有一些其他类型的连接。连接可能具有某种**weights/priority**。

现在，当用户搜索另一个用户时，结果应该按照这样的顺序排列，即顶部的结果将是最近的节点，而最远的节点最终将取决于连接及其权重/优先级。

我找不到应该从哪里开始？我不需要任何现成的代码，但我需要学习。因此，如果您对此有所了解，请建议教程或文章。你也可以建议我在哪里学习代码。

*另一个问题：MySQL数据库可以用来表示这种类型的网络还是我需要一些特殊的数据库？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:11:44.290

如果你可以自由选择你想要的数据库引擎，图数据库是最好的解决方案。您可以在此处的 Wikipedia 中找到一个非常完整的列表：[http ://en.wikipedia.org/wiki/Graph_database](http://en.wikipedia.org/wiki/Graph_database)

也看看这个视频： [http ://www.youtube.com/watch?v=UodTzseLh04](http://www.youtube.com/watch?v=UodTzseLh04)

[我对 Neo4J ( http://www.neo4j.org/](http://www.neo4j.org/) )有很好的体验。它是用 Java 编写的，但提供了许多语言的绑定（在 JMV 中，语言可以在嵌入式模式下运行）。您也可以通过 REST 接口使用它。查询图表的语言是 Cypher ( [http://docs.neo4j.org/chunked/milestone/cypher-query-lang.html](http://docs.neo4j.org/chunked/milestone/cypher-query-lang.html) )，它与 ​​SQL 没有太大区别。

但是，评估中要考虑的一个关键点是图表的大小。对如此复杂的数据进行建模的能力的主要缺点是难以在多台机器上有效扩展（对图进行分区是一个 NP 难题）。Neo4J 可以在单台机器上处理大量节点，但如果您需要非常庞大的图表，我建议您尝试 Titan（[http://thinkaurelius.github.com/titan/](http://thinkaurelius.github.com/titan/)）。

关于泰坦的更多信息：[http ://www.slideshare.net/slidarko/titan-the-rise-of-big-graph-data](http://www.slideshare.net/slidarko/titan-the-rise-of-big-graph-data)

如果将来您需要大量处理：[http ://thinkaurelius.github.com/faunus/](http://thinkaurelius.github.com/faunus/)

# c++ - 通过桌面应用程序/安全性查询数据库

> ID：15169393
> 
> 赞同：2
> 
> 时间：2013-03-02T00:53:53.463
> 
> 标签：c++, mysql, database, qt

我将使用 Qt 框架编写一个桌面应用程序，然后将其发布给公众。但我担心这种方法的安全性。

我通常用 PHP 编写代码，因此我知道 SQL 注入和任何与使任何查询安全相关的数据库，但我遇到了一个我以前从未遇到过的问题：桌面应用程序将查询**从客户端**发送到服务器，因此，我已经听说，不如服务器到服务器（PHP）安全。

主要的安全风险是什么，Qt 如何防止它们或者我如何通过特定的编码技术来防止它们？

*对不起，我不能更具体，但我在桌面应用程序领域并没有真正的经验。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T01:57:56.947

Qt 不会为您保护您的数据做任何事情。您应该首先专注于保护您的 RDBMS。当然，您应该仔细编码您的 Qt 客户端应用程序，以通过检查和清理所有输入等来防止意外行为，但如果您不打算分发它，这不应该是您最直接关心的问题。

如果您计划使用 PostgreSQL 作为应用程序的后端，您可以采取一些措施来降低将任何服务暴露于互联网所带来的风险。最基本的：

*   设置具有适当规则的防火墙。仅允许来自受信任来源的入站连接。
*   仅接受 SSL 连接，即使使用自签名证书也是如此。
*   强制使用强密码。如果更合适，请使用客户端证书。
*   将您的`pg_hba.conf`文件设置为仅接受来自已知/受信任地址的连接。

Debian/Ubuntu 拥有出色的 PostgreSQL 软件包。安装后，您可以轻松设置 PG 以允许 SSL 连接，而无需手动生成证书的麻烦。

相关 PostgreSQL 文档：

*   [使用 SSL 保护 TCP/IP 连接](http://www.postgresql.org/docs/9.2/static/runtime-config-connection.html)
*   [客户端认证](http://www.postgresql.org/docs/9.2/static/client-authentication.html)
*   [客户端连接默认值](http://www.postgresql.org/docs/9.2/static/runtime-config-client.html)

如果您愿意，我可以为您提供一个非常基本的示例 Qt 应用程序（未完成），该应用程序旨在与 PostgreSQL 一起使用。让我知道。

**Edit:** uploaded the example app to GitHub: [exampleapp](https://github.com/dschulz/exampleapp.git). Tried to tidy up but there's still a mess with a lot of strings that were originally written in spanish. At any rate, you can still find a bit of useful code if you're starting with Qt. Oh, and I'm using Qt5 and had to compile my own PostgreSQL driver for Qt (not a big deal if you're on Linux). I mention this because the app might or might not compile with Qt4\. Good luck!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:10:08.153

关于

> 桌面应用程序将查询从计算机发送到服务器

我不知道您正在考虑的确切情况，但请记住，在这种情况下可以使用存储过程来降低 sql 注入的风险。如果桌面应用程序仅有权调用数据库服务器上的一系列存储过程而没有其他权限，那么您已经大大降低了风险。如果桌面客户端根本不可信，那么替代方法是不让客户端桌面应用程序直接访问数据库。您可以编写一个层驻留在服务器上，该层为客户端执行所有数据库访问，并且客户端与其交互而不是数据库。

# iphone - 为什么我的视图类没有出现在情节提要中？

> ID：15169394
> 
> 赞同：0
> 
> 时间：2013-03-02T00:53:57.703
> 
> 标签：iphone, ios, objective-c, cocoa

我添加了一个带有自己的 xib 的自定义视图类。在 xib 中，File's Owner -> Custom Class 设置为“MyCustomView”。

我在情节提要中添加了一个空白视图，其中类设置为“MyCustomView”

当我运行我的应用程序时，我看不到我的视图正确显示。不过，我确实看到`2013-03-01 16:52:48.283 Test[56785:c07] MyCustomView initWithCoder`

任何想法出了什么问题？

我在这里隔离了这个错误：http: [//bit.ly/YdDbqU](http://bit.ly/YdDbqU)

谢谢！

编辑：

1.  我关闭了自动布局
2.  我使用了以下内容：

    UIView *subview = [[NSBundle mainBundle] loadNibNamed:@"MyCustomView" owner:self options:nil].lastObject; subview.frame = self.myCustomViewInstance.bounds; [self.view addSubview:subview];

3.  一切正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:08:52.060

你永远不会真正加载那个 xib——在 IB 中设置类是不够的。您仍然需要加载 xib 文件，并将控制器的视图设置为该视图；

```
#import "FirstViewController.h"
#import "MyCustomView.h"

@implementation FirstViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.view = [[NSBundle mainBundle] loadNibNamed:@"MyCustomView" owner:self options:nil].lastObject;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:15:14.577

1.  我关闭了自动布局
2.  我使用了以下内容：

    UIView *subview = [[NSBundle mainBundle] loadNibNamed:@"MyCustomView" owner:self options:nil].lastObject; subview.frame = self.myCustomViewInstance.bounds; [self.view addSubview:subview];

一切正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T03:27:28.587

确保你的类是从 UIViewController 继承的。

```
@interface ClassName : UIViewController 
```

# ruby-on-rails - 我想在我的 rails 日志中将某些文本设置为不同的颜色

> ID：15169401
> 
> 赞同：3
> 
> 时间：2013-03-02T00:54:53.107
> 
> 标签：ruby-on-rails, ruby

我想确保所有看起来像这样的行（基本上，包含 rails 基准测试信息的行）

```
 Rendered search/_sidebar.html.erb (1.0ms) 
```

...以不同的颜色勾勒出来。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:11:38.577

[试试这个](http://cbpowell.wordpress.com/2011/02/03/beautiful-logging-for-your-ruby-on-rails-application)这就是我如何对我的日志进行颜色编码。如果您使用的是 rails 3.2，页面中有一个单独的链接

# mysql - 如何提高 mysql 中大量插入的性能？

> ID：15169404
> 
> 赞同：2
> 
> 时间：2013-03-02T00:55:07.187
> 
> 标签：mysql, innodb, myisam

我正在研究提高 mysql 插入性能的方法。

关于场景，在忙碌的一天，大表每 3 秒大约 3000 行，中表另外 100 行，小表并发大约 30 行。这必须持续 24 小时，然后我选择只有 30.000-40.000 行的重要部分，然后我将刷新所有 3 个表。

所以，我使用的是 mysql 5.5.29。所有表都使用innodb，索引和主键很少。

关于这个问题，我看到了一条关于为这些插入使用内存引擎表然后将它们移动到主表的评论：

“使用 LOCK TABLE .. WRITE 可能会加快插入速度，但在处理和加载行时，您将锁定任何阅读器。主键上的选择（应该接近 0 秒）在我的情况下最多需要 0.2 秒loader 正忙于加载 1000 行的批次。

一个很好的解决方法是将新行放入临时表中，然后不时地在单个事务中刷新该表。这使得插入非常快，因为所有的检查和转换都已经在临时表中完成了。

```
CREATE TEMPORARY TABLE ..._temp (....) ENGINE=MEMORY;

-- Loop from here --
DELETE FROM .._temp;
INSERT INTO .._temp ... VALUES (...);
INSERT INTO .._temp ... VALUES (...);

LOCK TABLE ... WRITE, ..._temp READ;
INSERT INTO ... SELECT * FROM ..._temp;
UNLOCK TABLES;
-- Repeat until done --

DROP TABLE ..._temp; 
```

我在我的系统中看到，INSERT 的运行速度与锁定表时的速度大致相同，但客户端在加载程序运行时根本没有注意到任何性能损失。”

[来源](http://dev.mysql.com/doc/refman/5.1/en/insert-speed.html)

在这种情况下使用内存引擎有意义吗？如果需要访问行，我应该使用 innodb 来避免表锁，还是应该使用 myisam 来提高速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T01:13:44.473

如果您需要每天擦桌子，但需要先从中取出数据。最好的办法是用一个新的空表快速替换现有的完整表，然后在整个表上执行您需要的任何数据操作。这是你如何做到的。

首先创建一个表，就像您要操作的表一样：

```
CREATE TABLE big_table_temp LIKE big_table; 
```

您现在有一个与大表具有相同架构的空表。

然后重命名表以交换它们：

```
RENAME TABLE big_table TO big_table_archive, big_table_temp TO big_table; 
```

这样做的好处是这个操作基本上是瞬时的，因为 MySQL 只是重命名磁盘上的二进制数据库文件。确保您在一个这样的查询中同时进行了重命名操作，因为您希望操作作为一个整体成功或失败。

然后，您可以`big_table_archive`根据需要进行操作，从中提取数据，而不必担心会阻塞`big_table`.

# python - Python 矩阵

> ID：15169409
> 
> 赞同：1
> 
> 时间：2013-03-02T00:56:33.570
> 
> 标签：python, matrix

我想在 python 中创建一个每行三列的矩阵，并且能够通过任何一行来索引它们。矩阵中的每个值都是唯一的。

据我所知，我可以设置一个矩阵，如：

```
matrix = [["username", "name", "password"], ["username2","name2","password2"]...] 
```

但是，我不知道如何从中访问元素。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T01:11:00.993

如果您能够安装库，请考虑使用[numpy](http://www.numpy.org/)。它有一套丰富的工具，可以有效地处理矩形多维数组并对其进行切片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T00:58:50.070

您可以使用列表列表：

```
In [64]: matrix = [["username", "name", "password"],["username2","name2","password2"]]

In [65]: matrix
Out[65]: [['username', 'name', 'password'], ['username2', 'name2', 'password2']] 
```

访问第一行（因为 Python 使用基于 0 的索引）：

```
In [66]: matrix[0]
Out[66]: ['username', 'name', 'password'] 
```

访问第一行中的第二项：

```
In [67]: matrix[0][1]
Out[67]: 'name' 
```

* * *

如果要根据用户名查找名称，列表列表不是数据结构的好选择。为此，您必须（可能）遍历 中的所有项目`matrix` 以查找其用户名与指定用户名匹配的项目。完成搜索的时间将随着矩阵中的行数线性增长。

相比之下，无论字典中有多少键，字典平均都有[恒定时间的查找。](http://wiki.python.org/moin/TimeComplexity)因此，例如，如果您要定义

```
matrix = {
    'capitano': {'name':'Othello', 'password':'desi123'}
    'thewife': {'name':'Desdemona', 'password':'3apples'}
    } 
```

（用户名在哪里`'capitano'`和`'thewife'`是）

然后要找到用户名的人的名字`'capitano'`，你会使用

```
matrix['capitano']['name'] 
```

Python 会返回`'Othello'`.

* * *

函数是 Python 中的一等对象：您可以将它们作为对象传递，就像传递数字或字符串一样。因此，例如，您可以将函数作为值存储在 dict 的 (key, value) 对中：

```
from __future__ import print_function    
matrix = {'hello': {'action': lambda: print('hello')} } 
```

然后调用函数，（注意括号）：

```
matrix['hello']['action']()
# hello 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T01:16:50.910

您演示的是一个由列表列表组成的矩阵。

您可以使用行和列的索引来访问元素：

```
>>> matrix[0] # This will return the 0th row
['username', 'name', 'password']
>>> matrix[0][1] # This will return the element from row 0, col 1
'name' 
```

# sql - 你如何做忽略年份的日期数学？

> ID：15169410
> 
> 赞同：16
> 
> 时间：2013-03-02T00:56:39.060
> 
> 标签：sql, postgresql, date, datetime, indexing

我正在尝试选择在接下来的 14 天内有周年纪念日的日期。如何根据不包括年份的日期进行选择？我尝试过类似以下的方法。

```
SELECT * FROM events
WHERE EXTRACT(month FROM "date") = 3
AND EXTRACT(day FROM "date") < EXTRACT(day FROM "date") + 14 
```

这个问题是几个月换行。
我宁愿做这样的事情，但我不知道如何忽略这一年。

```
SELECT * FROM events
WHERE (date > '2013-03-01' AND date < '2013-04-01') 
```

如何在 Postgres 中完成这种日期数学？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-02T21:40:21.690

如果您不关心解释和细节，请使用下面的**“黑魔法版”**。

到目前为止，其他答案中提供的所有查询都使用不可搜索的条件进行操作[**——**](https://en.wiktionary.org/wiki/sargable)它们不能使用索引，并且必须为基表中的每一行计算一个表达式以查找匹配的行。与小桌子无关紧要。大桌子*很*重要。

给定以下简单表格：

```
CREATE TABLE event (
  event_id   serial PRIMARY KEY
, event_date date
); 
```

## 询问

下面的版本 1\. 和 2\. 可以使用以下形式的简单索引：

```
CREATE INDEX event_event_date_idx ON event(event_date); 
```

但是如果没有 index ，以下所有解决方案都*更快*。

### 1.简单版

```
SELECT *
FROM  (
   SELECT ((current_date + d) - interval '1 year' * y)::date AS event_date
   FROM       generate_series( 0,  14) d
   CROSS JOIN generate_series(13, 113) y
   ) x
JOIN  event USING (event_date); 
```

子查询从两次调用`x`中计算给定年份范围内的所有可能日期。选择是通过最终的简单连接完成的。`CROSS JOIN``generate_series()`

### 2.进阶版

```
WITH val AS (
   SELECT extract(year FROM age(current_date + 14, min(event_date)))::int AS max_y
        , extract(year FROM age(current_date,      max(event_date)))::int AS min_y
   FROM   event
   )
SELECT e.*
FROM  (
   SELECT ((current_date + d.d) - interval '1 year' * y.y)::date AS event_date
   FROM   generate_series(0, 14) d
        ,(SELECT generate_series(min_y, max_y) AS y FROM val) y
   ) x
JOIN  event e USING (event_date); 
```

年份的范围是从表格中自动推导出来的 - 从而最大限度地减少生成的年份。
如果存在差距，您*可以*更进一步，提取现有年份的列表。

有效性共同取决于日期的分布。几年每行都有很多行，这使得这个解决方案更有用。多年来，每行很少，因此它的用处不大。

[**简单的 SQL Fiddle**](http://www.sqlfiddle.com/#!17/b3267/4)玩。

### 3.黑魔法版

[2016 年更新删除了一个“生成的列”，它会阻止 HOT 更新；更简单，更快捷的功能。
更新 2018 以使用`IMMUTABLE`表达式计算 MMDD 以允许函数内联。]

创建一个简单的 SQL 函数来`integer`从模式中计算一个`'MMDD'`：

```
CREATE FUNCTION f_mmdd(date) RETURNS int LANGUAGE sql IMMUTABLE AS
'SELECT (EXTRACT(month FROM $1) * 100 + EXTRACT(day FROM $1))::int'; 
```

起初我有`to_char(time, 'MMDD')`，但切换到上面的表达式，这在 Postgres 9.6 和 10 的新测试中证明是最快的：

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_10&fiddle=0e86aabb2a235b3d415720107fe0a35c)*

它允许[函数内联](https://en.wiktionary.org/wiki/sargable)，因为在内部使用函数`EXTRACT (xyz FROM date)`实现。它必须允许它在以下基本多列表达式索引中使用：`IMMUTABLE``date_part(text, date)`[**`IMMUTABLE`**](https://www.postgresql.org/docs/current/sql-createindex.html)

```
CREATE INDEX event_mmdd_event_date_idx ON event(f_mmdd(event_date), event_date); 
```

*多列*有多种原因：
可以帮助`ORDER BY`或从给定年份中进行选择。[在这里](https://dba.stackexchange.com/q/6115/3684)阅读。索引几乎没有额外成本。A`date`适合 4 个字节，否则会因数据对齐而丢失填充。[在这里](https://stackoverflow.com/a/7431468/939860)阅读。
此外，由于两个索引列都引用同一个表列，因此在**HOT**更新方面没有缺点。[在这里](https://dba.stackexchange.com/a/21507/3684)阅读。

### 一个 PL/pgSQL 表函数来统治它们

分叉到两个查询之一以涵盖年初：

```
CREATE OR REPLACE FUNCTION f_anniversary(date = current_date, int = 14)
  RETURNS SETOF event AS
$func$
DECLARE
   d  int := f_mmdd($1);
   d1 int := f_mmdd($1 + $2 - 1);  -- fix off-by-1 from upper bound
BEGIN
   IF d1 > d THEN
      RETURN QUERY
      SELECT *
      FROM   event e
      WHERE  f_mmdd(e.event_date) BETWEEN d AND d1
      ORDER  BY f_mmdd(e.event_date), e.event_date;

   ELSE  -- wrap around end of year
      RETURN QUERY
      SELECT *
      FROM   event e
      WHERE  f_mmdd(e.event_date) >= d OR
             f_mmdd(e.event_date) <= d1
      ORDER  BY (f_mmdd(e.event_date) >= d) DESC, f_mmdd(e.event_date), event_date;
      -- chronological across turn of the year
   END IF;
END
$func$  LANGUAGE plpgsql; 
```

**使用默认值调用**：从“今天”开始的 14 天：

```
SELECT * FROM f_anniversary(); 
```

呼吁从“2014-08-23”开始的 7 天：

```
SELECT * FROM f_anniversary(date '2014-08-23', 7); 
```

[**SQL Fiddle**](http://www.sqlfiddle.com/#!17/244ab/4)比较`EXPLAIN ANALYZE`。

## 2月29日

在处理周年纪念日或“生日”时，您需要定义闰年特殊情况“2 月 29 日”的处理方式。

在测试日期范围时，`Feb 29`通常会自动包含在内，即使当前年份**不是闰年**。当涵盖这一天时，日期范围追溯延长 1 天。
另一方面，如果当前年份是闰年，并且您想要查找 15 天，那么如果您的数据来自非闰年，您最终可能会在闰年获得 14 天的结果。

假设 Bob 出生于 2 月 29 日：
我的查询 1\. 和 2\. 仅在闰年包括 2 月 29 日。Bob 每 4 年才过一次生日。
我的查询 3\. 在范围内包括 2 月 29 日。鲍勃每年过生日。

**没有神奇的解决方案。您必须为每种情况定义您想要的内容。**

## 测试

为了证实我的观点，我对所有提出的解决方案进行了广泛的测试。我将每个查询调整到给定的表，并在没有`ORDER BY`.

好消息：所有这些都是*正确*的并且产生相同的结果 - 除了 Gordon 的查询有语法错误，以及 @wildplasser 的查询在年份结束时失败（易于修复）。

插入 108000 行随机日期为 20 世纪的行，这类似于在世人（13 岁或以上）的表格。

```
INSERT INTO  event (event_date)
SELECT '2000-1-1'::date - (random() * 36525)::int
FROM   generate_series (1, 108000); 
```

删除 ~ 8 % 以创建一些死元组并使表格更加“真实”。

```
DELETE FROM event WHERE random() < 0.08;
ANALYZE event; 
```

我的测试用例有 99289 行，4012 次点击。

### C -[猫叫](https://stackoverflow.com/a/15169650/939860)

```
WITH anniversaries as (
   SELECT event_id, event_date
         ,(event_date + (n || ' years')::interval)::date anniversary
   FROM   event, generate_series(13, 113) n
   )
SELECT event_id, event_date -- count(*)   --
FROM   anniversaries
WHERE  anniversary BETWEEN current_date AND current_date + interval '14' day; 
```

### C1 - Catcall 的想法被改写

除了小的优化之外，主要的区别是*只添加确切的年份* `date_trunc('year', age(current_date + 14, event_date))`来获得今年的周年纪念日，这完全避免了对 CTE 的需要：

```
SELECT event_id, event_date
FROM   event
WHERE (event_date + date_trunc('year', age(current_date + 14, event_date)))::date
       BETWEEN current_date AND current_date + 14; 
```

### D -[丹尼尔](https://stackoverflow.com/a/15174720/939860)

```
SELECT *   -- count(*)   -- 
FROM   event
WHERE  extract(month FROM age(current_date + 14, event_date))  = 0
AND    extract(day   FROM age(current_date + 14, event_date)) <= 14; 
```

### E1 - 欧文 1

参见上面的“1\. 简单版”。

### E2 - 欧文 2

参见上面的“2\. 高级版”。

### E3 - 欧文 3

见上文“3.黑魔法版”。

### G -[戈登](https://stackoverflow.com/a/15169534/939860)

```
SELECT * -- count(*)   
FROM  (SELECT *, to_char(event_date, 'MM-DD') AS mmdd FROM event) e
WHERE  to_date(to_char(now(), 'YYYY') || '-'
                 || (CASE WHEN mmdd = '02-29' THEN '02-28' ELSE mmdd END)
              ,'YYYY-MM-DD') BETWEEN date(now()) and date(now()) + 14; 
```

### H - [a_horse_with_no_name](https://stackoverflow.com/a/15175190/939860)

```
WITH upcoming as (
   SELECT event_id, event_date
         ,CASE 
            WHEN date_trunc('year', age(event_date)) = age(event_date)
                 THEN current_date
            ELSE cast(event_date + ((extract(year FROM age(event_date)) + 1)
                      * interval '1' year) AS date) 
          END AS next_event
   FROM event
   )
SELECT event_id, event_date
FROM   upcoming
WHERE  next_event - current_date  <= 14; 
```

### W -[野生动物](https://stackoverflow.com/a/15174959/939860)

```
CREATE OR REPLACE FUNCTION this_years_birthday(_dut date) RETURNS date AS
$func$
DECLARE
    ret date;
BEGIN
    ret :=
    date_trunc( 'year' , current_timestamp)
        + (date_trunc( 'day' , _dut)
         - date_trunc( 'year' , _dut));
    RETURN ret;
END
$func$ LANGUAGE plpgsql; 
```

简化为与其他所有返回相同：

```
SELECT *
FROM   event e
WHERE  this_years_birthday( e.event_date::date )
        BETWEEN current_date
        AND     current_date + '2weeks'::interval; 
```

### W1 - wildplasser 的查询重写

以上内容存在许多低效的细节（超出了这篇已经相当大的帖子的范围）。重写的版本*要*快得多：

```
CREATE OR REPLACE FUNCTION this_years_birthday(_dut INOUT date) AS
$func$
SELECT (date_trunc('year', now()) + ($1 - date_trunc('year', $1)))::date
$func$ LANGUAGE sql;

SELECT *
FROM   event e
WHERE  this_years_birthday(e.event_date)
        BETWEEN current_date
        AND    (current_date + 14); 
```

## 测试结果

我在 PostgreSQL 9.1.7 上使用临时表运行了这个测试。`EXPLAIN ANALYZE`结果以 5 的最好成绩收集。

### 结果

```
无索引
C：总运行时间：76714.723 毫秒
C1：总运行时间：307.987 ms -- !
D：总运行时间：325.549 毫秒
E1：总运行时间：    253.671 ms -- !
E2：总运行时间：484.698 ms -- min() & max() 没有索引很昂贵
E3：总运行时间：    213.805 ms -- !
G：总运行时间：984.788 毫秒
H：总运行时间：977.297 毫秒
W：总运行时间：2668.092 毫秒
W1：总运行时间：596.849 ms -- !

使用索引
E1：总运行时间：     37.939 ms --!! 
E2：总运行时间：     38.097 毫秒 --!!

使用表达式
E3 上的索引：总运行时间：     11.837 ms --!!

```

所有其他查询在有或没有索引的情况下都执行相同的操作，因为它们使用**非 sargable**表达式。

### 结论

*   到目前为止，@Daniel 的查询是最快的。

*   @wildplassers（重写）方法也可以接受。

*   @Catcall 的版本类似于我的相反方法。使用更大的桌子时，性能很快就会失控。
    不过，重写后的版本表现相当不错。我使用的表达式类似于@wildplassser`this_years_birthday()`函数的更简单版本。

*   **即使没有 index** ，我的“简单版本”也更快，因为它需要更少的计算。

*   `min()`使用索引，“高级版”与“简单版”差不多快，因为使用索引`max()`变得*非常*便宜。两者都比其他无法使用索引的速度快得多。

*   **无论有没有 index ，**我的“黑魔法版”都是最快的。而且调用起来*非常*简单。
    ^(更新后的版本（基准测试之后）要快一些。)

*   对于现实生活中的表，**索引**将产生*更大的*差异。更多的列使表更大，顺序扫描更昂贵，而索引大小保持不变。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-02T12:53:41.437

我相信以下测试适用于所有情况，假设列名为`anniv_date`：

```
select * from events
where extract(month from age(current_date+interval '14 days', anniv_date))=0
  and extract(day from age(current_date+interval '14 days', anniv_date)) <= 14 
```

作为跨越一年（以及一个月）时如何工作的示例，假设周年日期是`2009-01-04`并且运行测试的日期是`2012-12-29`。

我们要考虑介于`2012-12-29`和`2013-01-12`（14 天）之间的任何日期

`age('2013-01-12'::date, '2009-01-04'::date)`是`4 years 8 days`。

`extract(month...)`从 this is`0`和`extract(days...)`is `8`，它比`14`它匹配的要低。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T01:15:56.953

这个怎么样？

```
select *
from events e
where to_char(e."date", 'MM-DD') between to_char(now(), 'MM-DD') and 
                                         to_char(date(now())+14, 'MM-DD') 
```

您可以将比较作为字符串进行。

考虑到年终，我们将转换回日期：

```
select *
from events e
where to_date(to_char(now(), 'YYYY')||'-'||to_char(e."date", 'MM-DD'), 'YYYY-MM-DD')
           between date(now()) and date(now())+14 
```

您确实需要在 2 月 29 日稍作调整。我可能会建议：

```
select *
from (select e.*,
             to_char(e."date", 'MM-DD') as MMDD
      from events
     ) e
where to_date(to_char(now(), 'YYYY')||'-'||(case when MMDD = '02-29' then '02-28' else MMDD), 'YYYY-MM-DD')
           between date(now()) and date(now())+14 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T13:21:43.757

为方便起见，我创建了两个函数来生成当年的（预期或过去的）生日和即将到来的生日。

```
CREATE OR REPLACE FUNCTION this_years_birthday( _dut DATE) RETURNS DATE AS
$func$

DECLARE
        ret DATE;
BEGIN
        ret =
        date_trunc( 'year' , current_timestamp)
        + (date_trunc( 'day' , _dut)
          - date_trunc( 'year' , _dut)
          )
        ;
        RETURN ret;
END;
$func$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION next_birthday( _dut DATE) RETURNS DATE AS
$func$

DECLARE
        ret DATE;
BEGIN
        ret =
        date_trunc( 'year' , current_timestamp)
        + (date_trunc( 'day' , _dut)
          - date_trunc( 'year' , _dut)
          )
        ;
        IF (ret < date_trunc( 'day' , current_timestamp))
           THEN ret = ret + '1year'::interval; END IF;
        RETURN ret;
END;
$func$ LANGUAGE plpgsql;

      --
      -- call the function
      --
SELECT date_trunc( 'day' , t.topic_date) AS the_date
        , this_years_birthday( t.topic_date::date ) AS the_day
        , next_birthday( t.topic_date::date ) AS next_day
FROM topic t
WHERE this_years_birthday( t.topic_date::date )
        BETWEEN  current_date
        AND  current_date + '2weeks':: interval
        ; 
```

注意：需要演员表，因为我只有可用的时间戳。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T01:32:09.427

您可以生成一个虚拟的周年纪念表，并从中进行选择。

```
with anniversaries as (
  select event_date, 
         (event_date + (n || ' years')::interval)::date anniversary
  from events, generate_series(1,10) n
)
select event_date, anniversary
from anniversaries
where anniversary between current_date and current_date + interval '14' day
order by event_date, anniversary 
```

调用`generate_series(1,10)`具有为每个 event_date 生成 10 周年纪念日的效果。我不会在生产中使用文字值 10 。相反，我要么计算在子查询中使用的正确年数，要么使用像 100 这样的大字面量。

您需要调整 WHERE 子句以适合您的应用程序。

如果虚拟表存在性能问题（当“事件”中有很多行时），请将公用表表达式替换为具有相同结构的基表。将周年纪念日存储在基表中会使它们的值显而易见（尤其是对于例如 2 月 29 日的周年纪念日），并且对此类表的查询可以使用索引。在我的桌面上仅使用上面的 SELECT 语句查询一百万行的周年纪念*表需要 25 毫秒。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-02T13:49:10.907

这也应该在年底处理环绕：

```
with upcoming as (
  select name, 
         event_date,
         case 
           when date_trunc('year', age(event_date)) = age(event_date) then current_date
           else cast(event_date + ((extract(year from age(event_date)) + 1) * interval '1' year) as date) 
         end as next_event
  from events
)
select name, 
       next_event, 
       next_event - current_date as days_until_next
from upcoming
order by next_event - current_date 
```

您可以过滤表达式`next_event - current_date`以应用“未来 14 天”

`case ...`仅当您将“今天”的事件也视为“即将发生”的事件时才需要。否则，可以将其简化为`else`case 语句的一部分。

请注意，我将列“重命名”`"date"`为`event_date`. 主要是因为保留字不应该用作标识符，还因为`date`它是一个糟糕的列名。它不会告诉你任何关于它存储什么的信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-02T01:02:47.603

我找到了一种方法。

```
SELECT EXTRACT(DAYS FROM age('1999-04-10', '2003-05-12')), 
       EXTRACT(MONTHS FROM age('1999-04-10', '2003-05-12'));
 date_part | date_part 
-----------+-----------
        -2 |        -1 
```

然后我可以检查月份是否为 0 并且天数是否小于 14。

如果您有更优雅的解决方案，请发布。我将把这个问题留一会儿。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-02T01:30:49.027

我不使用 postgresql，所以我用谷歌搜索了它的日期函数并发现了这个： [http ://www.postgresql.org/docs/current/static/functions-datetime.html](http://www.postgresql.org/docs/current/static/functions-datetime.html)

如果我没看错的话，在接下来的 14 天内寻找事件就像这样简单：

```
 where mydatefield >= current_date
 and mydatefield < current_date + integer '14' 
```

当然，我可能没有正确阅读它。

# django - 在基本模板中呈现用户的项目

> ID：15169412
> 
> 赞同：0
> 
> 时间：2013-03-02T00:56:49.353
> 
> 标签：django, django-models

我正在开发一个项目管理应用程序。在每个页面（所有项目、新项目、编辑项目等）上，我希望用户的项目出现在基本模板的侧边栏中。

在基本模板的侧边栏中，我有以下代码用于渲染用户的项目：

```
 <h5>Your projects</h5>
  {% for project in user.projects.all %}
      {{ project }}<br/>
  {% endfor %} 
```

但是，这只会渲染*一个*项目，而不是*所有*项目。这是为什么？

**项目模型：**

```
class Project(models.Model):
    name = models.CharField(max_length = 50)
    ... the rest of the fields ...
    added_by_user = models.ForeignKey(User)
    users = models.ManyToManyField(User, related_name='projects')

    def __unicode__(self):
        return self.name

    def owned_by_user(self, user):
        return self.added_by_user == user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:30:09.547

通常这是在视图中完成的，我喜欢使用 render_to_response。如果您已经在使用多个视图并且只想包含此信息，则可以将信息添加到视图中。您可以在 render_to_response 中传递尽可能多或尽可能少的数据

### 视图.py

```
from django.shortcuts import render_to_response

def some_view(request,user_id):
    # other queries
    project_listing = Project.objects.filter(user = user_id): 
    return render_to_response('sometemplate.html', {"someother_query":someother_query,"project_listing":project_listing,} 
```

### 模板/project_list.html

```
<h5>Your projects</h5>
<table>  
{% for project in project_listing %}
    <tr>
        <td>Project Name</td>
        <td>{{ project.name }}</td>
    </tr>
    .... repeat as necessary for each element 
{% endfor %}
</table> 
```

### 模板/sometemplate.html

```
... other elements
{% include 'project_list.html' %}
... other elements 
```

# session - 如何使用 redis、express 和 socket.io 让会话正常工作？

> ID：15169418
> 
> 赞同：9
> 
> 时间：2013-03-02T00:58:32.333
> 
> 标签：session, express, redis, socket.io, node-redis

所以我试图让 Sessions 在我的 socket.on('connection', ...) 中工作的其他模块。

无论如何，我已经尝试使用两个模块“ [connect-redis](https://npmjs.org/package/connect-redis) ”和“ [session.socket.io](https://npmjs.org/package/session.socket.io) ”，它们都有类似的问题。

在我的代码中，我有 2 个 redis 存储（socketio.RedisStore 和 require('connect-redis')(express)），现在这个程序运行良好，但是因为 express 和 socket.io 需要共享会话数据，我想知道是否此设置将正确使用会话吗？会话存储是否需要与 express/socketio 相同的对象？对我来说有点灰色地带，因为 2 个 RedisStore 将在后台使用相同的数据库？

我已经尝试在这两个地方使用 socket.io redisStore 或 connect-redis redisStore，但是 socket.io 不喜欢 connect-redis redisStore 并且 express 不喜欢 socketio.redisStore。

如果我使用 connect-redis RedisStore，那么 socket.io/lib/manager.js 会抱怨：this.store.subscribe(... TypeError Object # has no method 'subscribe'

如果我使用 socketio.RedisStore 然后 express/node_modules/connect/lib/middleware/session.js 抱怨： TypeError: Object # has no method 'get'

*注意我宁愿让 session.socket.io 插件工作，但是当我用那个插件做同样的设置时，表达（也）抱怨：TypeError: Object # has no method 'get'

那么我可以使用 2 个不同的 RedisStores 进行会话，还是我需要以某种方式让其中一个或另一个同时为两者工作，如果是的话，关于如何修复的任何想法？

我当前的代码如下所示：

```
var
    CONST = {
        port: 80,
        sessionKey: 'your secret sauce'
    };

var 
    redis = require('redis');

var 
    express = require('express'),
    socketio = require('socket.io'),
    RedisStore = require('connect-redis')(express);

var 
    redisStore = new RedisStore(),
    socketStore = new socketio.RedisStore();

var 
    app = express(),
    server = require('http').createServer(app),
    io = socketio.listen(server);

app.configure(function(){
    app.use(express.cookieParser( CONST.sessionKey ));
    app.use(express.session({ secret: CONST.sessionKey, store: redisStore }));
    app.use(express.static(__dirname + '/test'));
    app.get('/', function (req, res) {res.sendfile(__dirname + '/test/' + 'index.htm');});
});

io.configure(function(){
    io.set('log level', 1);
    io.enable('browser client minification');
    io.enable('browser client etag');
    io.enable('browser client gzip');
    io.set('store', socketStore);
});

io.sockets.on('connection', function(socket){
    socket.emit('message', 'Test 1 from server')
});

server.listen( CONST.port );

console.log('running...'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T01:31:15.583

在内部`io.configure`，您必须将套接字与 http 会话链接起来。

这是一段提取cookie的代码（这是使用socket.io with `xhr-polling`，我不知道这是否适用于websocket，尽管我怀疑它会起作用）。

```
var cookie = require('cookie');
var connect = require('connect');

var sessionStore = new RedisStore({
  client: redis // the redis client
});

socketio.set('authorization', function(data, cb) {
  if (data.headers.cookie) {
    var sessionCookie = cookie.parse(data.headers.cookie);
    var sessionID = connect.utils.parseSignedCookie(sessionCookie['connect.sid'], secret);
    sessionStore.get(sessionID, function(err, session) {
      if (err || !session) {
        cb('Error', false);
      } else {
        data.session = session;
        data.sessionID = sessionID;
        cb(null, true);
      }
    });
  } else {
    cb('No cookie', false);
  }
}); 
```

然后您可以使用以下命令访问会话：

```
socket.on("selector", function(data, reply) {
  var session = this.handshake.session;
  ...
} 
```

这还有一个额外的好处，它检查是否存在有效会话，因此只有您登录的用户才能使用套接字。不过，您可以使用不同的逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-16T03:46:20.280

查看您的最后一条注释（将无法使用 redis 在多个进程中共享其状态）我遇到了同样的问题并找到了解决方案：

```
var express = require("express.io");
var swig = require('swig');
var redis = require('redis');
var RedisStore = require('connect-redis')(express);

workers = function() {
    var app = express().http().io();

    app.use(express.cookieParser());
    app.use(express.session({
        secret: 'very cool secretcode',
        store: new RedisStore({ client: redis.createClient() })
    }));

    app.io.set('store', new express.io.RedisStore({
        redisPub: redis.createClient(),
        redisSub: redis.createClient(),
        redisClient: redis.createClient()
    }));

    app.get('/', function(req, res) {
        res.render('index');
    });

    app.listen(3000);

    app.io.route('ready', function(req){
        //setup session stuff, use session stuff, etc.  Or make new routes
    });
};

cluster = require('cluster');
numCPUs = require('os').cpus().length;

if (cluster.isMaster)
{
    for (var i = 0; i < numCPUs; i++)
    {
        cluster.fork();
    }
}
else
{
    workers();
} 
```

# batch-file - 如何编写批处理文件，以便每次执行都会创建一个文件夹并将结果放入其中

> ID：15169419
> 
> 赞同：1
> 
> 时间：2013-03-02T00:58:37.717
> 
> 标签：batch-file

对不起，如果我的标题没有多大意义。

所以我目前有一个简单的批处理脚本如下：

```
@echo off
for %%i in (*.pdf) do java -jar pdfbox-app-1.7.1.jar PDFToImage %%i 
```

它基本上使用 jar 文件将 .pdf 文件转换为 .jpg 文件。

但是我该如何制作它才能为每个不同的 jpg 文件创建文件夹，然后将 jpg 文件放入该文件夹中？任何的想法？！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:26:26.963

For 语句可以与命令块一起使用。

```
@echo off
for %%i in (*.pdf) do (
    java -jar pdfbox-app-1.7.1.jar PDFToImage ../%%i
    mkdir %%~ni
    move %%~ni.jpg %%~ni\
) 
```

# hover - 工具提示悬停状态

> ID：15169423
> 
> 赞同：1
> 
> 时间：2013-03-02T00:59:34.637
> 
> 标签：hover, highcharts, tooltip

我通过直接作用于图形来覆盖条形图中条形的颜色。它适用于初始加载，但如果我将鼠标悬停在栏上以显示工具提示，当我鼠标移出时，它会恢复为默认颜色，而不是我的自定义选择。

我将如何在一个栏上编辑该事件的设置。

见：http: [//jsfiddle.net/WQkeQ/4/](http://jsfiddle.net/WQkeQ/4/)

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'bar'
            },
            title: {
                text: 'Historic World Population by Region'
            },
            subtitle: {
                text: 'Source: Wikipedia.org'
            },
            xAxis: {
                categories: ['Africa', 'America', 'Asia', 'Europe', 'Oceania'],
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                max:4000,
                title: {
                    text: 'Population (millions)',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                formatter: function() {
                    if(this.y > (this.series.chart.yAxis[0].max))
                        return this.series.name +': '+ this.y + ' max is smaller: '+this.series.chart.yAxis[0].max ;
                    else
                        return this.series.name +': '+ this.y;
                }
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            credits: {
                enabled: false
            },
            series: [{
                name: 'Year 2008',
                data: [973, 914, 4054, 732, 34]
            }]
        },function(chart){

            var max = chart.yAxis[0].max,
                content = '<h2>Points</h2><br/>';

            $.each(chart.series,function(i,serie){
                $.each(serie.data,function(j,data){
                    if(data.y > max){
                       content += 'Point: '+data.y+' is bigger than max: '+max;
                       data.graphic.attr({fill:'silver'});}
                });
            });

            $('#report').html(content);

        });
    });

}); 
```

将鼠标悬停在银条上。

谢谢，马尼沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:42:56.160

Manisha，您可以使用**元素**[**`CSS`**](http://api.highcharts.com/highcharts#Element.css%28%29)属性来设置系列中单个条的颜色。

 **### 采用

```
 data.graphic.css({color: 'silver' }); 
```

### 代替

```
 data.graphic.attr({fill:'silver'}); 
```

[**`Fiddled`**](http://jsfiddle.net/gopinaghr/WQkeQ/5/)版本。

希望这可以帮助。**

# emacs - 在 EVIL 中进行增量搜索时使用默认输入方法？

> ID：15169428
> 
> 赞同：3
> 
> 时间：2013-03-02T00:59:58.963
> 
> 标签：emacs, customization, evil-mode

在为 emacs 中的 vim 仿真加载 EVIL 之前，我的`.emacs`文件中有以下内容：

```
(activate-input-method "english-dvorak")
(setq default-input-method "english-dvorak") 
```

但是，当我键入`/`以 EVIL 启动增量搜索时，并没有使用默认输入法。为什么是这样？每当我在屏幕上输入字母时，我怎样才能使 EVIL 使用默认输入方法？

在执行这些函数的其余代码之前，我能够通过将 qwerty 字符映射到 dvorak 来正确支持`f`and`t`命令，但是我仍然无法`/`使用 dvorak 进行搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:42:15.853

我已经在我的 PC 上测试了以下配置，它似乎使 Dvorak 在 Emacs 中无处不在：

```
;; Main setup for  all the buffers
(defadvice switch-to-buffer (after activate-input-method activate)
  (activate-input-method "english-dvorak"))

;; Sets up Dvorak for the minibuffer
(add-hook 'minibuffer-setup-hook (lambda () (set-input-method "english-dvorak")))

;; Sets up Dvorak for *scratch* buffer (used Qwerty on my PC otherwise)
(save-excursion
  (set-buffer (get-buffer "*scratch*"))
  (set-input-method "english-dvorak")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T15:29:23.717

问题是**Evil**的增量搜索是在正常状态下执行的，据我所知，它不能与输入法一起使用。这是一个快速破解，在执行搜索之前切换到插入状态以允许使用输入法。由于它在搜索完成后立即切换回正常状态，因此唯一的怪癖是执行搜索时缓冲区中的不同光标。

```
 (evil-define-motion evil-search-forward ()
  (format "Search forward for user-entered text.
Searches for regular expression if `evil-regexp-search' is t.%s"
          (if (and (fboundp 'isearch-forward)
                   (documentation 'isearch-forward))
              (format "\n\nBelow is the documentation string \
for `isearch-forward',\nwhich lists available keys:\n\n%s"
                      (documentation 'isearch-forward)) ""))
  :jump t
  :type exclusive
  :repeat evil-repeat-search
    (progn                 ;MADE CHANGES HERE
      (evil-insert-state)
      (evil-search-incrementally t evil-regexp-search)
      (evil-normal-state)
    ))

(evil-define-motion evil-search-backward ()
  (format "Search forward for user-entered text.
Searches for regular expression if `evil-regexp-search' is t.%s"
          (if (and (fboundp 'isearch-forward)
                   (documentation 'isearch-forward))
              (format "\n\nBelow is the documentation string \
for `isearch-forward',\nwhich lists available keys:\n\n%s"
                      (documentation 'isearch-forward)) ""))
  :jump t
  :type exclusive
  :repeat evil-repeat-search
    (progn                 ;MADE CHANGES HERE
      (evil-insert-state)
      (evil-search-incrementally nil evil-regexp-search)
      (evil-normal-state)
    )) 
```

# c# - 队列的并行处理

> ID：15169429
> 
> 赞同：4
> 
> 时间：2013-03-02T01:00:04.393
> 
> 标签：c#, multithreading, thread-safety, threadpool, message-queue

我试图找到一种方法来处理多个线程中的队列，动态调整消费者的数量。基本上这个任务是众所周知的：多个生产者创建消息并将它们提交到一个队列中，多个消费者处理来自队列的消息。现在，我考虑了使用不同组件（如 System.Collections.Queue.Synchronized、System.Collections.Concurrent.ConcurrentQueue 和 System.Collections.Concurrent.BlockingCollection）的不同方法，但我无法决定如何正确使用最大效率，所以我很高兴通过您的意见收到一些好主意。
以下是更多详细信息：

*   在某些情况下，消息速率预计会非常密集，但处理会相对简单；
*   我不知道我应该拥有多少消费者；
*   我希望进程调整当前消费者的数量，而不是阻止它们，具体取决于排队的消息数量（这意味着我想为每百条消息填充额外的消费者 fe，如果数量，消费者应该停止入队消息的数量比填充它所需的数量少 50，当消息数量超过 300 时，将填充第三个消费者，当它下降到 250 时它应该停止）。

这就是想法。现在，我考虑将 ConcurrentQueue 包装到一个类中，该类将封装 Enqueue 方法，并检查入队后的消息数量，并决定是否启动额外的消费者。并且消费者应该在循环中进行检查，该检查应该决定停止它。我认为您会提出一些更有趣的解决方案。

顺便说一句，我仍然不知道如何处理的情况之一是理论上当最后一条消息正在排队并且同时最后一个消费者已经停止。另一种情况也是关于停止 - 如果多个消费者同时进行停止检查，他们将被停止。我应该如何处理这些情况？

为了说明我的意思，请考虑以下示例：

```
class MessageController
{
    private BlockingCollection<IMessage> messageQueue = new BlockingCollection<IMessage>();

    int amountOfConsumers;

    public void Enqueue(IMessage message)
    {
        messageQueue.Add(message); // point two

        if (Math.Floor((double)messageQueue.Count / 100)+1 > amountOfConsumers) // point three
        {
            Task.Factory.StartNew(() =>
            {
                IMessage msg;
                while ((messageQueue.Count > 0) && (Math.Floor((double)((messageQueue.Count + 50) / 100)) + 1 >= amountOfConsumers)) //point one
                {
                    msg = messageQueue.Take();
                    //process msg...
                }

                ConsumerQuit(); // point four
            });

            Interlocked.Increment(ref amountOfConsumers);
        }
    }

    public void ConsumerQuit()
    {
        Interlocked.Decrement(ref amountOfConsumers);
    }
} 
```

所以现在当我可以指出具体的代码行时，这些是问题：

*   当最后一个消费者发现没有消息入队（@point one）并且在它调用 ConsumerQuit 方法之前，最后一条消息到达并入队，然后检查额外的消费者，结果是（@point 3）仍然有一个消费者在工作，并且因为单个消息的一个消费者绰绰有余 - 没有任何反应，然后最终调用 ConsumerQuit，并且我有一条消息卡在队列中。

> ```
> ConsumerTask                       | LastMessageThread
> ------------------------------------------------------
> @point one(messageQueue.Count=0)   | @point two
> no time                            | @point three(amountOfConsumers=1)
> @point four                        | ended;
> ended;                             | ended; 
> ```

*   当其中一个应该停止时，几个消费者同时到达“第一点”检查（fe messageQueue.Count 为 249），其中几个将停止，因为在其中一个上调用 ConsumerQuit 之前，其他几个也将执行此检查.

> ```
> ConsumerTask1                  | ConsumerTask2| ConsumerTask3 | ConsumerTask4|
> ------------------------------------------------------------------------------
> @point one(.Count=249;amount=4)| no time      | no time       | @point one   |
> no time                        | @point one   | processing msg| @point four  |
> @point four                    | no time      | @point one    | ended;       |
> ended;                         | @point four  | processing msg| ended;       |
> ended;                         | ended;       | ...           | ended;       | 
> ```
> 
> 在这里，如果最后一条消息已经入队，我们还剩下一个消费者任务，它必须单独处理 249 条消息，但最坏的情况可能是所有消息都停止，在最后一条消息之后，可能有数百条消息会卡住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:05:41.537

看来我终于想出了一个解决方案，但不确定性能。请考虑以下代码，任何反馈将不胜感激！我仍然希望看到其他一些解决方案或想法，即使它们完全不同并且需要对方法进行重大改变。这是目标：“一种在多个线程中处理队列，动态调整消费者数量的方法”

```
class MessageController
{
    private BlockingCollection<IMessage> messageQueue = new BlockingCollection<IMessage>();

    private ManualResetEvent mre = new ManualResetEvent(true);

    private int amountOfConsumers;

    object o = new object();

    public void Enqueue(IMessage message)
    {
        messageQueue.Add(message);

        mre.WaitOne();
        if (Math.Floor((double)messageQueue.Count / 100)+1 > amountOfConsumers)
        {
            Interlocked.Increment(ref amountOfConsumers);

            var task = Task.Factory.StartNew(() =>
            {
                IMessage msg;
                bool repeat = true;

                while (repeat)
                {
                    while ((messageQueue.Count > 0) && (Math.Floor((double)((messageQueue.Count + 50) / 100)) + 1 >= amountOfConsumers))
                    {
                        msg = messageQueue.Take();
                        //process msg...
                    }

                    lock (o)
                    {
                        mre.Reset();

                        if ((messageQueue.Count == 0) || (Math.Ceiling((double)((messageQueue.Count + 51) / 100)) < amountOfConsumers))
                        {
                            ConsumerQuit();
                            repeat = false;
                        }

                        mre.Set();
                    }
                }
            });
        }
    }

    public void ConsumerQuit()
    {
        Interlocked.Decrement(ref amountOfConsumers);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:06:57.113

我最初的想法是你是在倒着设计这个。

在查看并行性时，您可能并不总是通过向单个任务添加更多线程来提高效率。有时最佳数量等于或小于您正在使用的机器上的核心数量。这样做的原因是您正在通过锁争用和线程切换创建更多开销。

通过增加更多的消费者，你可能会发现消费率实际上是下降而不是上升。

要考虑的一件事是处理一条消息需要多长时间？如果这个时间比产生一个任务的时间长得多，为什么不让一个消费者简单地创建一个新的任务来处理每条消息呢？

```
class MessageController
{
    private BlockingCollection<IMessage> messageQueue = new BlockingCollection<IMessage>();

    public void Enqueue(IMessage message)
    {
        messageQueue.Add(message);
    }

    public void Consume()
    {
        //This loop will not exit until messageQueue.CompleteAdding() is called
        foreach (var item in messageQueue.GetConsumingEnumerable())
        {
            IMessage message = item;
            Task.Run(() => ProcessMessage(message);
        }
    }
} 
```

# php - 之间经过的时间

> ID：15169432
> 
> 赞同：1
> 
> 时间：2013-03-02T01:00:37.417
> 
> 标签：php, datetime

我收到了两个日期时间字符串。

```
$StartDateTime = '2012-12-25T23:00:43.29';
$EndDateTime = '2012-12-26T06:50:43.29'; 
```

我需要执行 timediff 以产生经过的时间，并将日期分量分配给一列，将时间分量分配给另一列。我正在做的是这样的：

```
$d1 = new DateTime();
$d2 = new DateTime();

list($year,$month,$day) = explode('-',mb_strstr($StartDateTime,'T', TRUE));
list($hour,$minute,$second) = explode(':',trim(mb_strstr($StartDateTime,'T', FALSE),'T'));
$d1->setDate($year,$month,$day);
$d1->setTime($hour,$minute,$second);
list($year,$month,$day) = explode('-',mb_strstr($EndDateTime,'T', TRUE));
list($hour,$minute,$second) = explode(':',trim(mb_strstr($EndDateTime,'T', FALSE),'T'));
$d2->setDate($year,$month,$day);
$d2->setTime($hour,$minute,$second);

$diff = $d1->diff($d2); 
```

现在，我可以得到我想要的任何格式的 $diff：

```
$thisformat = $diff->format('%H:%I:%S');
$thatformat = $diff->format('%H%I%S'); 
```

而且，我可以将单独的 DATE 和 TIME 组件放入它们各自的对象属性（两个字符串）中：

```
$somedateproperty = $d1->format('Y-m-d');
$sometimeproperty = $d1->format('H:i:s');
$anotherdateproperty = $d2->format('Y-m-d');
$anothertimeproperty = $d2->format('H:i:s'); 
```

继续思考应该有一些更容易转换这些字符串而不是每次都解析的东西。而且，这是我的问题。我怎样才能更容易地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:39:57.917

[按照jeroen](https://stackoverflow.com/questions/15169432/elapsed-time-between/16003469#comment21365174_15169432)的建议使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)使其非常简单：-

```
$StartDateTime = \DateTime::createFromFormat("Y-m-d\TH:i:s.u", '2012-12-25T23:00:43.29');
$EndDateTime = \DateTime::createFromFormat("Y-m-d\TH:i:s.u", '2012-12-26T06:50:43.29');

var_dump($StartDateTime->diff($EndDateTime)); 
```

给出以下输出：-

```
object(DateInterval)[3]
  public 'y' => int 0
  public 'm' => int 0
  public 'd' => int 0
  public 'h' => int 7
  public 'i' => int 50
  public 's' => int 0
  public 'invert' => int 0
  public 'days' => int 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T02:32:22.617

**您不需要任何日期时间解析**，因为您的输入格式是标准 SOAP 格式。

你可以这样做：

```
$d1 = new DateTime('2012-12-25T23:00:43.29'); 
```

[查看更多关于支持的格式。](http://www.php.net/manual/en/datetime.formats.php)

# emacs - GNU Emacs 中的 PATH（由 setenv 设置）和 exec-path 之间到底有什么区别？

> ID：15169433
> 
> 赞同：5
> 
> 时间：2013-03-02T01:00:42.920
> 
> 标签：emacs, elisp

嗯，标题说明了一切。我曾经`(setenv "PATH" "whatever:$PATH" t)`能够从 Emacs 调用事物（实际上是一件事 - ConTeXt，来自 AUCTeX 内部）。就在不久前，我了解到`exec-path`. 我应该改用它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T01:40:13.103

虽然`setenv`实际上设置了环境（并影响（修改）从这个 emacs 执行的程序将被视为一个环境），`exec-path`但告诉 emacs 在哪里寻找可执行文件，但是从这个 emacs 运行的程序不会看到它们的`PATH`变化。

更改环境`setenv`不会改变当前 Emacs 搜索可执行文件的方式，因为它使用`exec-path`. 要实现这一点*并使*此 Emacs 执行的子进程`$PATH`发生更改，您必须同时设置`exec-path`和`$PATH`。

# php - 两个 While 循环

> ID：15169438
> 
> 赞同：-2
> 
> 时间：2013-03-02T01:01:11.953
> 
> 标签：php, mysql

我试图在一页中放入两个这样的循环：

```
 // Tech Doc
   $query = "SELECT * FROM mod_doc
           WHERE doc_master_id='$master_id'";                
    $result = mysql_query($query) or die(mysql_error());
    $num = mysql_numrows($result);

     // Units
   $query = "SELECT * FROM mod_units
           WHERE unit_master_id='$master_id'";                
    $result2 = mysql_query($query) or die(mysql_error());
    $num2 = mysql_numrows($result2); 
```

第一个循环

```
$i=0;
while ($i < $num) {

$doc_date = mysql_result($result,$i,"doc_date");
$doc_name = mysql_result($result,$i,"doc_title"); 
```

第二循环

```
 $i=0;
 while ($i < $num2) {

$unit_id = mysql_result($result,$i,"unit_id");
$unit_name = mysql_result($result,$i,"unit_name"); 
```

第一个循环正常工作，第二个循环产生此错误：

```
Warning: mysql_result() [function.mysql-result]: unit_name not found in MySQL result index 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:18:24.080

在你的第二个循环中，使用...

```
$result2 
```

代替

```
$result 
```

# image-processing - 曲线重建实现

> ID：15169439
> 
> 赞同：5
> 
> 时间：2013-03-02T01:01:21.273
> 
> 标签：image-processing, computer-vision, computational-geometry

过去几天我花在搜索曲线重建实现上，但没有找到——既不是库也不是工具。

描述我的问题。

我主要关心的是有间隙的轮廓： ![图像](../Images/5221036155dedbaec2025b2799a67629.png)

从我同时阅读的论文中，我想解决方案将需要使用 Delaunay 三角剖分，并且引用最多的方法似乎在 1997 年的论文“ [The Crust and the β-Skeleton: Combinatorial Curve Reconstruction](http://math.stanford.edu/research/comptop/references/abe.pdf) ”中有所描述

有人可以指点我一个曲线重建实现，可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:54:41.083

算法在 CGAL 中实现。示例实现可以在 CGAL ipelets 演示包中的 C++ 中看到。更多编译演示允许用户在[ipe GUI 应用程序](http://tclab.kaist.ac.kr/ipe/)中应用算法：

![图像](../Images/a09a8bd0b2d756e5563a2e3b6e2693b4.png)

在上面的例子中，我只选择了我的图像的一部分，因为底线不符合必要的要求，所以在纠正之前不能在该部分上应用外壳。此外，正如可以注意到的，必须对图像进行采样。

如果没有人提供另一个实现示例，我会在几天后将我的答案标记为正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:29:58.033

Delaunay 三角剖分使用离散曲线，因此会丢失信息。这可能会导致您意想不到的奇怪问题。在您的示例中，下边界的中间部分可能会导致问题。

在这种情况下，最好从模型中收集相关信息并尝试进行匹配。

类似于，对于每个端点收集邻域中的轮廓导数。比找到该端点可以连接的所有端点，具有近似导数方向并且该关节不跨越另一条线。可以通过关节距离和与局部导数的偏差来赋予可能的连接权重。赋予权重定义了带有可能端点连接的加权图。该图中的最大边匹配将是解决问题的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:44:56.650

有很多方法可以解决这个问题；

您可以简单地编写一个跟随曲线的蠕虫，当您到达曲线的末端时，您将当前方向向量与梯度一起获取并向前推断。找到最适合的所有其他端点，然后对它们进行评分；与得分最高的人重新联系。简单，如果不仅仅是简单的分手，也容易出现问题。

[分层瀑布方法可能很有趣](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CD8QFjAB&url=http://cmm.ensmp.fr/~marcoteg/cv/publi_pdf/ACCV06_Hanbury_Marcotegui_published.pdf&ei=cgwzUfi8HOiZ0QWk_oGwAQ&usg=AFQjCNFSMEEgmk3OKBrRD3BUHwBuvHgdxQ&bvm=bv.43148975,d.d2k)

瀑布流中的阈值方法（和水平集方法）可用于检测这些差距并填补它们。

# ssis - 错误代码：在 SSIS 中导入 Excel 文件时出现 0x80040E37

> ID：15169441
> 
> 赞同：1
> 
> 时间：2013-03-02T01:01:28.463
> 
> 标签：ssis, data-connections

我正在使用 SSIS 2008 (SQL 2008 R2)，我正在尝试使用 FOREACH 循环将几个 Excel 文件（超过 100 个文件）导入 SQL Server。我只能为第一个文件成功地做到这一点。但是当开始第二个文件时，给我最后用黑色字母描述的大量错误。excel 文件带有多张纸，但我只需要每个 excel 文件一张。工作表标签始终与`GSDR_XXXX_FACT$Query_from_WN7X64_XXXXX_XXXX_SG`每张工作表相同的位置`Data Connection`。

编辑：我正在使用这个[链接]：[文件处理后如何将文件移动到存档文件夹？](https://stackoverflow.com/questions/6698075/how-do-i-move-files-to-an-archive-folder-after-the-files-have-been-processed) WHERE INSTEAD OF use CSV Connection I 替换为“EXCEL Connection”。我将 Excel 连接中的表达式留空……因为如果我尝试使用“连接字符串”、“excelfilepath”或“服务器名称”……它们都会在“数据流组件”的“excel 源”中给出错误。 ..

任何建议我都非常感激。

```
[Excel Source [1]] Error: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80040E37.

SSIS package "GTO_pull_data_to_table_multiple_excel_A.dtsx" starting.
Information: 0x4004300A at Data Flow Task, SSIS.Pipeline: Validation phase is beginning.
Information: 0x4004300A at Data Flow Task, SSIS.Pipeline: Validation phase is beginning.
Warning: 0x80049304 at Data Flow Task, SSIS.Pipeline: Warning: Could not open global shared memory to communicate with performance DLL; data flow performance counters are not available.  To resolve, run this package as an administrator, or on the system's console.
Information: 0x40043006 at Data Flow Task, SSIS.Pipeline: Prepare for Execute phase is beginning.
Information: 0x40043007 at Data Flow Task, SSIS.Pipeline: Pre-Execute phase is beginning.
Information: 0x4004300C at Data Flow Task, SSIS.Pipeline: Execute phase is beginning.
Information: 0x402090DF at Data Flow Task, OLE DB Destination [576]: The final commit for the data insertion in "component "OLE DB Destination" (576)" has started.
Information: 0x402090E0 at Data Flow Task, OLE DB Destination [576]: The final commit for the data insertion  in "component "OLE DB Destination" (576)" has ended.
Information: 0x40043008 at Data Flow Task, SSIS.Pipeline: Post Execute phase is beginning.
Information: 0x4004300B at Data Flow Task, SSIS.Pipeline: "component "OLE DB Destination" (576)" wrote 35096 rows.
Information: 0x40043009 at Data Flow Task, SSIS.Pipeline: Cleanup phase is beginning.
Information: 0x4004300A at Data Flow Task, SSIS.Pipeline: Validation phase is beginning.
Information: 0x40043006 at Data Flow Task, SSIS.Pipeline: Prepare for Execute phase is beginning.
Information: 0x40043007 at Data Flow Task, SSIS.Pipeline: Pre-Execute phase is beginning.
Information: 0x4004300C at Data Flow Task, SSIS.Pipeline: Execute phase is beginning.
Information: 0x402090DF at Data Flow Task, OLE DB Destination [576]: The final commit for the data insertion in "component "OLE DB Destination" (576)" has started.
Information: 0x402090E0 at Data Flow Task, OLE DB Destination [576]: The final commit for the data insertion  in "component "OLE DB Destination" (576)" has ended.
Information: 0x40043008 at Data Flow Task, SSIS.Pipeline: Post Execute phase is beginning.
Information: 0x4004300B at Data Flow Task, SSIS.Pipeline: "component "OLE DB Destination" (576)" wrote 35096 rows.
Information: 0x40043009 at Data Flow Task, SSIS.Pipeline: Cleanup phase is beginning.
Information: 0x4004300A at Data Flow Task, SSIS.Pipeline: Validation phase is beginning.

******Error: 0xC0202009 at Data Flow Task, Excel Source [1]: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80040E37.
Error: 0xC02020E8 at Data Flow Task, Excel Source [1]: Opening a rowset for "GSDR_XXXX_FACT$Query_from_WN7X64_XXXXX_XXXX_SG" failed. Check that the object exists in the database.
Error: 0xC004706B at Data Flow Task, SSIS.Pipeline: "component "Excel Source" (1)" failed validation and returned validation status "VS_ISBROKEN".
Error: 0xC004700C at Data Flow Task, SSIS.Pipeline: One or more component failed validation.
Error: 0xC0024107 at Data Flow Task: There were errors during task validation.
Warning: 0x80019002 at Foreach Loop Container: SSIS Warning Code DTS_W_MAXIMUMERRORCOUNTREACHED.  The Execution method succeeded, but the number of errors raised (6) reached the maximum allowed (1); resulting in failure. This occurs when the number of errors reaches the number specified in MaximumErrorCount. Change the MaximumErrorCount or fix the errors.
Warning: 0x80019002 at GTO_pull_data_to_table_multiple_excel_A: SSIS Warning Code DTS_W_MAXIMUMERRORCOUNTREACHED.  The Execution method succeeded, but the number of errors raised (6) reached the maximum allowed (1); resulting in failure. This occurs when the number of errors reaches the number specified in MaximumErrorCount. Change the MaximumErrorCount or fix the errors.
SSIS package "GTO_pull_data_to_table_multiple_excel_A.dtsx" finished: Failure**.
**----------------------------------------------------------------------------------------** 
```

# tags - 标签如何在 liferay 中工作？

> ID：15169444
> 
> 赞同：1
> 
> 时间：2013-03-02T01:01:55.577
> 
> 标签：tags, liferay, liferay-6

我是liferay的新手，是一名学生。我需要在liferay 中开发一个portlet，允许用户从标签池中挑选标签。

portlet 应该看起来像[这个 wiki-page](http://www.liferay.com/community/wiki?p_p_id=36&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-2&p_p_col_count=1&_36_struts_action=%2Fwiki%2Fedit_page&_36_redirect=http%3A%2F%2Fwww.liferay.com%2Fcommunity%2Fwiki%2F-%2Fwiki%2FMain%2FLiferay%2BUI%2BTaglib&p_r_p_185834411_nodeId=1071674&p_r_p_185834411_title=&_36_editTitle=1&_36_parentTitle=UI+Taglib)，看看这个`Categorization`部分。

谁能建议如何开发它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:24:13.893

Liferay 是开源的。请下载门户源代码并查看期刊文章 portlet。

提示：请查看 liferay-ui 标签库。有一个名为 的标签`asset-tags-selector`，只要在您的 jsp 中拥有它，您的 portlet 中就会有标签选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:13:25.307

如果您需要以“Liferay 风格”制作它，您必须将您的数据对象实现为资产。请参阅此[Liferay 资产框架教程](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/asset-framework "Liferay 资产框架教程")。在“输入和显示标签和类别”部分中，有一个`<asset-tags-selector>`Felix 建议的示例。

否则，您可以尝试一些 javascript 库。谷歌可以帮助你。

# ruby-on-rails - 使用 pik 后 gem 列表不显示本地 gem

> ID：15169445
> 
> 赞同：2
> 
> 时间：2013-03-02T01:02:08.010
> 
> 标签：ruby-on-rails, ruby, pik

在 windows7 机器上使用 pik，我如何下载 gem 以供其他版本的 ruby​​ 使用？

我正在使用 2 个版本的 ruby​​：1.9.3 和 1.9.2。1.9.3 是 Windows 安装程序附带的。

在我运行下面的命令后，我注意到本地 gem 没有正确显示：

1）红宝石-v

> 红宝石 1.9.3p125 (2012-02-16) [i386-mingw32]

2) 宝石清单

> ***当地***宝石...很多宝石

3）pik 192 4）红宝石-v

> 红宝石 1.9.2p180 (2011-02-18) [i386-mingw32]

5) 宝石清单

> ***本地***宝石...这里没有宝石

6) 皮克 193

7) 宝石清单

> ***本地***宝石...这里没有宝石

由于看不到宝石，pik 是否无法正确返回到 ruby​​ 版本 1.9.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T02:41:34.083

我在 Windows 中看不到，但是如果您使用的是 git bash，则可以修复：

执行以下步骤：

打开一个 git bash shell 并输入：

```
[[ -s $USERPROFILE/.pik/.pikrc ]] && source $USERPROFILE/.pik/.pikrc

unset GEM_HOME

unset GEM_PATH 
```

这就是全部。

# r - 如何使用 R 遍历子文件夹并绑定相同 ID 的 CSV 文件？

> ID：15169446
> 
> 赞同：8
> 
> 时间：2013-03-02T01:02:08.957
> 
> 标签：r

我被困住了。我需要一种方法来遍历目录中的一堆子文件夹，提取 4 个 .csv 文件，绑定这 4 个 .csv 文件的内容，然后使用初始子文件夹的名称将新的 .csv 写入新目录作为新 .csv 的名称。

*我知道*R 可以做到这一点。但我被困在如何遍历子文件夹并将 csv 文件绑定在一起。我的障碍是每个子文件夹都包含使用相同的 8 位 id 的相同 4 个 .csv 文件。例如，子文件夹 A 包含 09061234.csv、09061345.csv、09061456.csv 和 09061560.csv。子文件夹 B 包含 9061234.csv、09061345.csv、09061456.csv 和 09061560.csv。（...）。有 42 个子文件夹，因此有 168 个同名的 csv 文件。我想将文件压缩到 42。

我可以`list.files`用来检索所有子文件夹。但是然后呢？

```
##Get Files from directory
TF = "H:/working/TC/TMS/Counts/June09" 
##List Sub folders
SF <- list.files(TF)
##List of File names inside folders
FN <- list.files(SF)
#Returns list of 168 filenames

###?????###
#How to iterate through each subfolder, read each 8-digit integer id file, 
#bind them all together into one single csv, 
#Then write to new directory using 
#the name of the subfolder as the name of the new csv? 
```

可能有一种方法可以轻松做到这一点，但我是 R 的菜鸟。涉及函数的东西，`paste`也许`write.table`？非常感谢任何提示/帮助/建议。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-02T01:07:58.300

您可以使用`recursive=T`选项`list.files`，

```
 lapply(c('1234' ,'1345','1456','1560'),function(x){
     sources.files  <- list.files(path=TF,
                                recursive=T,
                                pattern=paste('*09061*',x,'*.csv',sep='')
                                ,full.names=T)
      ## ou read all files with the id and bind them
      dat <- do.call(rbind,lapply(sources.files,read.csv))
      ### write the file for the 
      write(dat,paste('agg',x,'.csv',sep='')
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T22:52:59.823

在对 agstudy 的代码进行了一些调整之后，我想出了我最终想要的解决方案。由于我的具体问题的性质，有一些缺失的部分更多，所以我将 agstudy 的答案保留为“已接受”。

原来真的不需要一个功能。至少现在不会。如果我需要再次执行相同的任务，我将创建一个函数。现在，我可以在没有它的情况下解决这个特殊问题。

此外，就我而言，我需要一个条件“if”语句来处理可能存在于子文件夹中的任何非 csv 文件。通过添加 if 语句，R 会抛出警告并跳过任何非逗号分隔的文件。
代码：

```
##Define directory path##
TF = "H:/working/TC/TMS/Counts/June09" 
##List of subfolder files where file name starts with "0906"##
SF <- list.files(TF,recursive=T, pattern=paste("*09061*",x,'*.csv',sep=""))
##Define the list of files to search for##
x <- (c('1234' ,'1345','1456','1560')
##Create a conditional to skip over the non-csv files in each folder##
if (is.integer(x)){
  sources.files  <- list.files(TF, recursive=T,full.names=T)}

dat <- do.call(rbind,lapply(sources.files,read.csv))
#the warnings thrown are ok--these are generated due to the fact that some of the folders contain .xls files
write.table(dat,file="H:/working/TC/TMS/June09Output/June09Batched.csv",row.names=FALSE,sep=",") 
```

# delphi - 几乎立即关闭第二个应用程序实例时，停止表单在屏幕上短暂闪烁

> ID：15169448
> 
> 赞同：1
> 
> 时间：2013-03-02T01:02:19.460
> 
> 标签：delphi, delphi-xe3

我有一个应用程序，它在主窗体的 OnCreate 期间检查应用程序的另一个实例是否已经通过创建互斥锁运行。如果是，则第二个实例将消息传递给第一个实例，然后自行关闭。它工作正常，除了第二个应用程序在关闭之前在屏幕上短暂闪烁其主窗体的一个小问题。

我有一个丑陋的技巧，即在主窗体 WindowState 设置为 wsMinimize 的情况下启动应用程序，然后使用具有 1 毫秒延迟的计时器来最大化窗体。但这似乎是一个可怕的黑客攻击。

有更好的想法吗？

```
procedure TMyAwesomeForm.FormCreate(Sender: TObject);
var
  h: HWND;
begin
  // Try to create mutex
  if CreateMutex(nil, True, '6EACD0BF-F3E0-44D9-91E7-47467B5A2B6A') = 0 then
    RaiseLastOSError;

  // If application already running
  if GetLastError = ERROR_ALREADY_EXISTS then 
  begin 
    // Prevent this instance from being the receipient of it's own message by changing form name
    MyAwesomeForm.Name := 'KillMe';

    // If this instance was started with parameters:   
    if ParamCount > 0 then 
    begin
      h := FindWindow(nil, 'MyAwesomeForm');

      //Pass the parameter to original application
      SendMessage(h, WM_MY_MESSAGE, strtoint(ParamStr(1)),0); 
    end;

    // Shut this instance down - there can be only one
    Application.Terminate; 
  end;

  // Create Jump Lists     
  JumpList := TJumpList.Create;  
  JumpList.ApplicationId := 'TaskbarDemo.Unique.Id';
  JumpList.DeleteList;
  CreateJList();
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T01:17:39.123

不要在表单类中执行检查，因为表单已创建它会显示。

恕我直言，执行像您这样的检查的更好地方是 .dpr 文件本身。

例如：

```
program Project3;

uses
  Forms,
  Windows, //<--- new citizens here
  SysUtils,
  Messages,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}

function IsAlreadyRunning: Boolean;
var
  h: HWND;
begin
  //no comments, sorry, but I don't use comments to explain what the 
  //code explains by itself.
  Result := False;

  if CreateMutex(nil, True, '6EACD0BF-F3E0-44D9-91E7-47467B5A2B6A') = 0 then
    RaiseLastOSError;

  if GetLastError = ERROR_ALREADY_EXISTS then
  begin
    if ParamCount > 0 then
    begin
      h := FindWindow(nil, 'MyAwesomeForm');
      if h <> 0 then
        PostMessage(h, WM_MY_MESSAGE, strtoint(ParamStr(1)),0);
      Result := True;
    end;
  end;
end;

begin
  if not IsAlreadyRunning then
  begin
    Application.Initialize;
    Application.MainFormOnTaskbar := True;
    Application.CreateForm(TForm1, Form1);
    Application.Run;
  end;
end. 
```

# plugins - winforms的MEF插件更新策略

> ID：15169450
> 
> 赞同：3
> 
> 时间：2013-03-02T01:02:31.737
> 
> 标签：plugins, mef, versioning

我正在使用 MEF 开发一个可扩展的应用程序。该应用程序将有许多类型的插件来以不同的方式收集和处理数据。

我正在考虑为插件构建一个版本化的在线存储库，这将使用户能够在插件的新版本可用时下载它们。

如果 MEF 可以同时加载同一插件的不同版本，那就太好了，尽管据我了解这是不可能的（如果我错了，请纠正我）。

所以我已经接受了我需要更新插件并存档以前版本的事实。

这样做的最佳策略是什么？

示例 1

应用程序下载已加载的运行插件的新版本。我不能将插件放在插件目录中，因为已经有同名的 DLL。所以我可以用版本后缀重命名新插件。我无法加载相同的程序集，所以我想我将不得不强制重新启动。所以在重新启动时，它会实现旧插件并加载新插件。

--- 这似乎解决方案似乎有点混乱

示例 2

应用程序下载已加载的运行插件的新版本。该插件包含在某种类型的安装程序中。安装程序会优雅地关闭主机并归档现有插件。安装程序安装新插件并重新启动主机应用程序。

--- 这也显得有些凌乱

我正在寻求对我的假设的任何修正，或对实现我目标的成功策略的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T20:01:46.657

.NET Framework 有一个名为[Shadow Copy](http://msdn.microsoft.com/en-us/library/ms404279.aspx)的功能，它允许您更新加载的程序集。基本上它将程序集复制到一个临时文件夹并从那里加载它们。这样，位于应用程序安装文件夹中的程序集将不会被操作系统锁定，您将能够替换它们。ASP.NET、单元测试框架和许多其他应用程序都使用卷影复制。

要启用此功能，您将需要在新的应用程序中加载您的应用程序，`AppDomain`因为您无法在 main 上启用卷影复制`AppDomain`。您可以创建一个简单的加载程序，它将在那里创建`AppDomain`并执行您的应用程序。这是非常直接的。有关 MEF + Shadow Copy 的示例，请查看 Glenn Block 的[MEF 方式](http://codebetter.com/glennblock/2010/06/13/way-of-mef-slides-and-code/)，尤其是 PartUpdatesInPlace 示例。

现在就版本控制而言，您需要能够在同一个应用程序域中同时加载两个或多个版本的程序集。有两种方法可以做到这一点：

1.  GAC 中的强命名程序集。
2.  名称中包含版本的程序集（如 Plugin.v1.dll）。在这种情况下，强命名是可选的，但仍然是一个好主意。这种方法的优点是一个插件的两个或多个版本可以共存于同一个目录中。

查看此[答案](https://stackoverflow.com/a/15075304/850119)以获取 MEF + 版本控制的示例。

您甚至可以使用 MEF 的重组功能并在以下之后更新您的插件容器：

*   添加了一个新的插件程序集
*   插件程序集被删除
*   插件程序集被替换

看看这个[问题](https://stackoverflow.com/q/14808762/850119)的例子。

# javascript - 可移除的清单项目

> ID：15169452
> 
> 赞同：2
> 
> 时间：2013-03-02T01:02:44.453
> 
> 标签：javascript

我正在尝试创建一个交互式待办事项列表，在其中我将文本输入到文本框中，单击一个按钮，然后它会在下面添加项目。到目前为止，我已经成功地能够使用按钮将项目添加到我的列表中，但无法通过单击它一次删除一个项目，这是我希望能够做到的。（理想情况下，每个项目旁边都会有一个复选框，当我单击该项目时，该项目会消失）。到目前为止，使用 .remove() 操作，我只能通过单击使列表中的所有项目消失。我做了一些研究，并认为 .on() 操作可能是我需要的。我试过了，现在我根本无法让物品消失。这是我的代码：

```
$(document).ready(function() {
    $('#button').click(function() {
        var toAdd=$('input[name=checkListItem]').val();
        $('#item').append.('.list');
    });
    $(document).on('click','item',function() {
        $(this).remove();
    });
}); 
```

有什么不正确的地方吗？还是有更好的方法来解决这个问题？我是全新的，感谢任何和所有反馈。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:12:33.087

我用更正的代码叉了你的小提琴：http: [//jsfiddle.net/XEDHJ/2/](http://jsfiddle.net/XEDHJ/2/)

这是您遇到麻烦的地方：

```
$('.list').on('click','input',function() {
    $(this).parent().remove();
}); 
```

使用`on`是正确的想法，它非常适合这种情况。您使用的方式`on`是您有一个*parent node*，在这种情况下是一个 div ，其类为`list`，并且有许多 match `child nodes`，在这种情况下，任何元素都`input`位于您的父节点下方。子节点由第二个参数中的选择器表示。这将匹配 div 下的任何输入节点，即使它们是在呈现页面后创建的。

因为我将您的输入包装在`<div>`标签中，所以我们实际上想要删除该 parent `<div>`。所以我们调用`$(this).parent().remove()`.

我在下面留下了我的原始示例，但这应该足以让你继续前进。

* * *

看起来像这样的东西就是你要找的东西：

**小提琴**

[http://jsfiddle.net/Khesy/](http://jsfiddle.net/Khesy/)

**JavaScript**

```
$(document).ready(function() {
    $('#button').click(function() {
        $('#item').append("<div><input name='checkListItem' type='checkbox'></input>To do!</div>");
    });
    $('#item').on('click','input',function() {
        $(this).parent().remove();
    });
}); 
```

**HTML**

```
<input id="button" type="button" value="Add Item"></input>
<div id="item">
</div> 
```

# distribution - 具有多个使用者的远程 WebSphere MQ 配置

> ID：15169456
> 
> 赞同：1
> 
> 时间：2013-03-02T01:03:07.463
> 
> 标签：distribution, ibm-mq, mq

我们有一种情况，我们已经与供应商建立了工作设置，该供应商通过远程队列向我们发送消息。我们今天只有一个消费者从队列中消费这些消息。

我们想在我们这边添加另一个消费者，以使用相同的消息。我们的目标是在不影响向我们发送消息的供应商的情况下实现这一目标（或者可能影响最小）。

在这种情况下，您能否帮助建议新配置（可能使用我们这边的分发列表）的外观。这是否可以在供应商无需对其进行任何更改的情况下实现。

当前配置很简单。传输 Q 已在供应商端（在他们的 Q MGR 下）设置，将其发送到 MCA 发送器 - 反过来，它由我们这边的 MCA 接收器接收，并将其放入最终目的地 Q。这就是我们所在的位置希望做出改变，以便能够被第二个消费者接收。

**更新：**

嗨，罗布，谢谢你的回答。要在同一页面上。这是当前的拓扑。

```
Vendor Side Producer --> Proxy QA inside Q Mgr MAGR1 --> 
Sender MCA (with a channel defined) --> (Over the Internet) --> (Receiver MCA) --> 
QA inside Q Mgr MAGR2 --> Consumer. 
```

你的建议是我们这样做..

```
Vendor Side Producer --> Proxy QA inside Q Mgr MAGR1 -->
Sender MCA (with a channel defined) --> (Over the Internet) --> (Receiver MCA) --> 
NEW_TOPIC inside Q Mgr MAGR2 --> 
Two subscribers before the Two queues QA.1 and QA.2 --> to two consumers. 
```

你能详细说明什么是Sub1和Sub2吗？

只是试图确保我们这边没有要编写的代码。供应商方面也没有代码更改。只是供应商方面的渠道需要反弹。我们在接收方。再次感谢您的反馈。我将在星期一将此作为对 MQ 团队的建议。

Rob 非常感谢 - 非常感谢您的帮助。最后一个问题。我可以看到我们现在正在将原来的 QA 更改为类型主题。您是否认为供应商代码（无论是 MQ 代码/JMS 代码）没有变化来反映这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:39:14.450

这对于 WebSphere MQ 来说相当容易，尽管不像定义桥那样简单。

为了说明，假设目标队列当前是 QA，这样......

```
Producer --> QA --> Consumer1 
```

做你想做的事，将 QA 转换为同名的别名，指向一个主题，然后设置两个新端点的管理订阅：

```
(Receiver MCA) --> QA --> TopicA --> Sub1 --> QA.1 --> Consumer1
                            |
                            +------> Sub2 --> QA.2 --> Consumer2 
```

您需要断开本地连接到队列的应用程序，或关闭任何可能打开的 RCVR/RQSTR/CLUSRCVR 通道。但是一旦转换为主题，您就可以随意添加或删除订阅，而不会破坏任何内容。

**对更新的回应**

根据响应，这将很容易做到。无需停止供应商的渠道，甚至无需与供应商协调。无需在您身边编写代码或更改应用程序。

```
runmqsc MAGR1

STOP CHL(RCVRMCA) 
DEFINE QL(QA1)
DEFINE QL(QA2)
DELETE QL(QA)
DEFINE QALIAS(QA) TARGTYPE(TOPIC) TARGET(QA.TOPIC)
DEF TOPIC(QA.TOPIC) TOPICSTR(QA)
DEFINE SUB(QA1) TOPICSTR(QA) DEST(QA1)
DEFINE SUB(QA2) TOPICSTR(QA) DEST(QA2)
START CHL(RCVRMCA) 
END

C:\>AMQSPUT QA JMSDEMO
Sample AMQSPUT0 start target queue is QA
Hello world!

Sample AMQSPUT0 end

C:\>AMQSGET QA1 JMSDEMO
Sample AMQSGET0 start
message <Hello world!>
no more messages
Sample AMQSGET0 end

C:\>AMQSGET QA2 JMSDEMO
Sample AMQSGET0 start 
message <Hello world!>
no more messages
Sample AMQSGET0 end

C:\ 
```

设置安全性比定义子和主题要高级一些，所以我猜测您的队列管理器可能需要被锁定。请参阅[*使用 WebSphere MQ 的安全消息传递方案*](http://ibm.co/UU4Nkt)，特别是关于加强队列管理器以保护管理访问和 B2B 使用的章节。请注意，如果 QMgr 没有被锁定，任何拥有 TCP 路由到它的人都可以匿名管理它并在底层服务器上远程执行代码。

# c++ - 用 ofstream C++ 覆盖一行

> ID：15169457
> 
> 赞同：0
> 
> 时间：2013-03-02T01:03:18.023
> 
> 标签：c++, file, line, overwrite

我正在做一个小游戏，并将玩家详细信息保存在 txt 文件中。该txt文件的示例：

```
Eric 13 8 10 10 30 10 10 50 0 0 0 0
William 1 0 10 30 30 10 10 50 0 0 0 0
John 1 0 10 30 30 10 10 50 0 0 0 0 
```

这就是我的想法：当玩家在玩游戏时选择保存游戏时，该`save_game`函数应该检查是否已经有任何保存的数据。如果有，而不是将数据附加到 txt 的末尾，它应该`overwrite`是特定的行。

这是我当前的功能：

```
// SAVE GAME
void save_game(Player player)
{
    ofstream coutfile (SaveDestiny, ios::app);

    if (coutfile.is_open()) // if it opens correctly
    {
        // Now checking if the name already exists
        string imported_name;

        ifstream cinfile (SaveDestiny); // opens file that contains the saved games

        cinfile >> imported_name; // getting first element of file

        bool j = 0; // j = 0 while the strings don't match. j = 1 when the string was found

        while (cinfile >> imported_name) // while the end of file is not reached
        {
            if (player.name.compare(imported_name) == 0) // if the strings are the same, overwrite data
            {
                j = 1;

                coutfile << "                                                                         \r" << endl;
                break;
            }
            else // if the strings are different, keep reading
            {
                cinfile >> imported_name;
            }
        }

        // Continuing...
        coutfile << player.name << " " << player.level << " " << player.exp << " " << player.max_exp << " "
            << player.hp << " " << player.max_hp << " " << player.mp << " " << player.max_mp << " "
            << player.gold << " " << player.weapon << " " << player.shield << " " << player.heal_spell << " "
            << player.attack_spell << endl;
    }
    else
    {
        ofstream coutfile (SaveDestiny, ios::app);
        coutfile << "test";
        cout << "Unable to open file";
        cin.get();
    }

    draw_rectangle(37,8,72,14,15);  // white limits
    draw_rectangle(39,9,70,13,9);   // blue background
    cor(9,15);
    gotoxy(50,10);
    cout << "GAME SAVED!";
    gotoxy(41,12);
    cor(9,14);
    cout << "Press <Enter> to continue... ";
    cin.get();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T01:16:18.193

在大多数现代文件系统上，文件不是“基于行”（或“基于记录”）的，它们是基于字符的，因此您不能“覆盖一行”。旧行可能有 20 个字符，新行可能有 24 个字符，在这种情况下，它将覆盖旧行*和*下一行的前 4 个字符。要完成这项工作，您必须在文件后面的行之后“推送”所有内容，这对于 C++（或 C）IO 工具是不可能的。

一种选择是以固定长度写入所有行，例如 50 个字符，以便覆盖第 3 行涉及替换字符 100 到 149，即使该行实际上只需要 24 个字符。

另一种选择是将文件以基于记录的形式保存在内存中，并在每次更改时写出整个文件（或至少写出新行和之后的所有行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:15:56.717

好的，我已经设法解决了这个问题，现在它工作得很好！:D

首先，`function`检查玩家姓名是否已经在`txt`. 我创建了一个启用变量`j`。什么时候`j=1`，名字存在，数据需要`overwritten`！当 时`j=0`，该函数将`append`数据立即写入 txt。

好吧，让我们说`j=1`。该函数确定`txt`. 然后它创建一个`vector`内部有两个向量：`name`和`game variables`。之后，该函数删除文件的先前内容`txt`。并将向量的内容写入`txt`，但需要覆盖的数据除外（它将跳过将该部分写入`txt`），因为在函数结束时，将写入新数据。:DI 希望我让自己足够清楚。对不起，如果有人不明白我写的...

这是我的新`save_game`功能：

```
// SAVE GAME
void save_game(Player player)
{
    ofstream coutfile (SaveDestiny, ios::app);

    if (coutfile.is_open()) // if it opens correctly
    {
        string imported_name;
        ifstream cinfile (SaveDestiny); // opens file that contains the saved games

        bool j = 0;

        // Now checking if the name already exists
        while (cinfile >> imported_name) // while the end of file is not reached
        {
            if (player.name.compare(imported_name) == 0) // if the strings are the same, overwrite data
            {
                j = 1; // enable overwrite
                break;
            }
            // if the strings are different, keep reading
        }
        // at this point: j = 0 to append to end. j = 1 to overwrite.

        // Overwriting data
        if (j == 1)
        {
            ifstream cinfile (SaveDestiny);

            // now determining the size of the vector (number of lines in txt)
            int line_numbers = 0;
            string line;
            while (getline(cinfile, line))
            {
                line_numbers++;
            }

            cinfile.close();    // closing
            ifstream cinfile2 (SaveDestiny);    // reopening to read from the beginning 

            // now creating the vector with the saves
            vector<vector<string>> temp_saves(line_numbers, vector<string>(2));
            string name2;
            string values;

            for (unsigned int x = 0; x < temp_saves.size(); x++)
            {
                cinfile2 >> name2;
                getline(cinfile2, values);

                temp_saves[x][0] = name2;
                temp_saves[x][1] = values;
            }

            coutfile.close(); // closing output file
            ofstream coutfile2 (SaveDestiny); // reopening in overwrite mode

            // delete all saves.txt, copying vector content to txt (except the one we want to overwrite)
            for (unsigned int x = 0; x < temp_saves.size(); x++)
            {
                if ( temp_saves[x][0].compare(player.name) != 0)
                {
                    coutfile2 << temp_saves[x][0] << temp_saves[x][1] << endl;
                }
            }
            coutfile2.close(); // closing output file
        }

        // Appending new data...
        ofstream coutfile3 (SaveDestiny, ios::app); // reopening in append mode
        coutfile3 << player.name << " " << player.level << " " << player.exp << " " << player.max_exp << " "
            << player.hp << " " << player.max_hp << " " << player.mp << " " << player.max_mp << " "
            << player.gold << " " << player.weapon << " " << player.shield << " " << player.heal_spell << " "
            << player.attack_spell << endl;
    }
    else
    {
        ofstream coutfile (SaveDestiny, ios::app);
        cout << "Unable to open file";
        cin.get();
    }

    draw_rectangle(37,8,72,14,15);  // white limits
    draw_rectangle(39,9,70,13,9);   // blue background
    cor(9,15);
    gotoxy(50,10);
    cout << "GAME SAVED!";
    gotoxy(41,12);
    cor(9,14);
    cout << "Press <Enter> to continue... ";
    cin.get();
} 
```

# php - 如何使用 php 连接到远程 mysql 数据库（托管在 dotCloud 上）

> ID：15169458
> 
> 赞同：3
> 
> 时间：2013-03-02T01:03:22.253
> 
> 标签：php, mysqli, remote-server, dotcloud

我无法连接到位于 dotCloud 上的数据库。我试过了：

```
$mysqli = new mysqli($db_host, $db_user, $db_password, $db_name); 
```

和

```
$mysqli = mysqli_connect($db_host, $db_user, $db_password, $db_name); 
```

和

```
$mysqli = new mysqli($remote_server, $db_user, $db_password, $db_name); 
```

和

```
$mysqli = mysqli_connect($remote_server, $db_user, $db_password, $db_name); 
```

但它无法连接，我收到“错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接但未发送任何数据。”

我使用以下内容在 mysqli 脚本上方动态检索变量：

```
$env =  json_decode(file_get_contents("/home/dotcloud/environment.json"));
$db_user = $env->DOTCLOUD_DB_MYSQL_LOGIN;
$db_password = $env->DOTCLOUD_DB_MYSQL_PASSWORD; 
$db_host = $env->DOTCLOUD_DB_MYSQL_HOST;
$db_port = $env->DOTCLOUD_DB_MYSQL_PORT;
$remote_server = '$db_host:$db_port';
//I also define $db_name here
$db_name = 'mydbname'; 
```

我在 mysqli 脚本下面还有以下代码：

```
if (mysqli_connect_error()) {
    die('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());
    $result["status"] = "failed";
    $result["message"] = "Failed to connect to database.";
    echo json_encode($result);
    exit;
} else {
    // Successfully connected!
    $stmt = $mysqli->stmt_init();
    echo "<p>Successfully connected!!</p>";
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T21:13:33.707

您的代码中有几处错误。

**1.您的 $remote_server 变量使用单引号**

```
$remote_server = '$db_host:$db_port'; 
```

这意味着 $remote_server 不会扩展 $db_host 和 $db_port 变量。你应该使用双引号。如果您按原样使用变量，它对您不起作用。

```
$remote_server = "$db_host:$db_port"; 
```

有关更多信息，请参阅此页面： [http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)

**2\. 连接时没有使用mysql端口，dotCloud上需要这个，因为它不在标准端口3306上运行mysql。**

你的代码：

```
$mysqli = new mysqli($db_host, $db_user, $db_password, $db_name); 
```

正确的代码，使用上面已经声明的变量：

```
$mysqli = new mysqli($db_host, $db_user, $db_password, $db_name, $db_port); 
```

更多信息可以在这里找到：[http ://www.php.net/manual/en/mysqli.quickstart.connections.php](http://www.php.net/manual/en/mysqli.quickstart.connections.php)

对于一个完整的示例，它将如下所示。

```
$env =  json_decode(file_get_contents("/home/dotcloud/environment.json"));
$db_user = $env->DOTCLOUD_DB_MYSQL_LOGIN;
$db_password = $env->DOTCLOUD_DB_MYSQL_PASSWORD; 
$db_host = $env->DOTCLOUD_DB_MYSQL_HOST;
$db_port = $env->DOTCLOUD_DB_MYSQL_PORT;
//I also define $db_name here
$db_name = 'mydbname';

$mysqli = new mysqli($db_host, $db_user, $db_password, $db_name, $db_port);
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

echo $mysqli->host_info . "\n"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T01:14:13.610

```
try like this: I think it will help you.

$connect = mysql_connect($mysql_host, $mysql_user, $mysql_password);
if (!$connect) {
    die('Could not connect: ' . mysql_error());
}
//echo 'Connected successfully';

$db = mysql_select_db($mysql_database,$connect);

if (!$db) echo"'Could not select database"; 
```

# c++ - 在 C++ 中使用通配符识别相关词

> ID：15169459
> 
> 赞同：0
> 
> 时间：2013-03-02T01:03:36.040
> 
> 标签：c++, wildcard

好的，我一直在尝试解决我的问题。问题是：给定一个包含 3 个字母的单词列表（我认为列表的大小无关紧要），我如何识别列表中与列表中第一个单词最多相差一个字母的单词。假设我有 pat 这个词，那么我想识别列表中的所有词：

pa_ 如付 p_t 如 pot _ot 如 rot

有没有办法在 C++ 中实现通配符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:48:56.300

[这可能比赋值要求更复杂，但它避免了缓慢的字符串比较和正则表达式]

鉴于所有内容都是 3 个字母的单词，您可以考虑将每个单词表示为 4 字节整数。例如，在“pat”中，字母“p”是 0x70（ascii），“a”是 0x61，“t”是 0x74，所以用整数 0x706174 表示“pat”。对测试列表中的所有 3 个字母单词进行同样的操作。

接下来，匹配 3 个字母中的 2 个所需的测试组合（以相同的顺序）是：

*   p?t 测试在哪里 0x70??74
*   ?在哪里测试是 0x??6174
*   爸？测试在哪里 0x7061??

PS我可以添加stackoverflow“代码示例”按钮，该按钮假设重新格式化您的选择，因为代码在Firefox中很奇怪。这篇 1 分钟的帖子格式化了 20 分钟！

```
// assume array words[] of strings
int word0 = calc_int_from_word(words[0]);

for (int ii = 1; ii < words.count; ii++)
{
  int wordii = calc_int_from_word(words[ii]);

  if (wordii & 0xFFFF00 == word0 & 0xFFFF00 ||
      wordii & 0xFF00FF == word0 & 0xFF00FF ||
      wordii & 0x00FFFF == word0 & 0x00FFFF)
  {
    // words[ii] matches words[0] in at least two letters
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:17:37.990

尝试查看**strcmp**函数和此处列出的其他一些相关函数：[http ://www.cplusplus.com/reference/cstring/strcmp/](http://www.cplusplus.com/reference/cstring/strcmp/)

....或者你可以像 Tony the Lion 所说的那样使用**正则表达式。**

编辑： ....也是**strcspn**函数

[http://www.cplusplus.com/reference/cstring/strcspn/](http://www.cplusplus.com/reference/cstring/strcspn/)

```
/* strcspn example */
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] = "fcba73";
  char keys[] = "1234567890";
  int i;
  i = strcspn (str,keys);
  printf ("The first number in str is at position %d.\n",i+1);
  return 0;
} 
```

**输出：**

str 中的第一个数字在位置 5

还有**strstr**可以找到 str1 在 str2 中的第一次出现。

例如：

```
 string str1 = "po";
 string str2 = "potlock";

 char * pch;
  pch = strstr (str2,str1); 
```

第二次编辑：

你绝对可以做一个循环

```
if (strcspn (str1,str2)){
    //there is at least one match
}else {

//no matches 
```

}

# mysql - 为什么 Grails 会忽略这个特殊的 String 参数，除非我明确地绑定它？

> ID：15169460
> 
> 赞同：4
> 
> 时间：2013-03-02T01:03:38.210
> 
> 标签：mysql, grails, data-binding

我有一堂课`Item`：

```
class Item {
  String title
  String description
  String linkText
  String linkUrl

  static constraints = {
    title blank: false
    description blank: false
    linkText blank: false
    linkUrl blank: false, url: true
} 
```

当我尝试保存一个新的`Item`使用实例时

```
def itemInstance = new Item(params)
itemInstance.save() 
```

我收到验证错误：

```
Property [linkText] of class [class Item] cannot be null 
```

我有两个问题：

1.  `linkText`就在形式中，在`<g:textField>`with 中`name="linkText"`。为什么它不受约束`itemInstance`？如果我在 a之前打印出参数，我会`save()`得到它们，包括 我可以将我的保存代码更改为`linkText``itemInstance``linkText``null`

    ```
    def itemInstance = new Item(params)
    itemInstance.linkText = params.linkText 
    ```

    它将被保存而没有任何问题和使用`params.linkText`。但为什么我必须这样做？现在是`linkText`保留关键字还是什么？（我只知道那[不是在 2008 年](http://grails.1312388.n4.nabble.com/g-link-vs-g-createLink-in-a-g-each-td1338916.html)。）

2.  为什么我收到“可空”错误而不是“空白”错误？它们是不同的错误。我`messages.properties`为此有一条自定义消息，但即使 Grails 现在不想使用它，我希望它会给我它的`default.blank.message`(“<code>Property [{0}] of class [{1}]不能是空白的”）。

该列表中的第一名对我来说是最令人担忧的，但我真的不明白为什么 Grails 一开始就将这个领域与其他三个领域有任何不同`Strings`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:41:18.670

我相信＃2正在发生，因为：

*   “默认情况下，所有域类属性都不可为空（即它们具有隐式可空：假约束）。” （引自[Grails 验证文档](http://grails.org/doc/latest/guide/validation.html)）。
*   我怀疑按照验证的顺序，grails**首先**检查属性的可空性约束。（但需要验证这一点）

我怀疑这些是您获得空约束而不是空白约束的原因。我相信如果您将 linkText 属性设置为可为空：true，那么您将开始收到空白约束的错误消息。现在我尝试了这个，它的行为不像我期望的那样。

对于以下域类：

```
class Item {
  String linkText

  static constraints = {
    linkText nullable: true, blank: false
} 
```

并尝试像这样保存它：

```
def item= new Item(linkText: "")
item.save() 
```

Grails 很乐意将项目保存为空白值。但是，如果我取出 nullable: true 约束，它会抱怨空白值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:09:41.243

正如评论中提到的，我在一个新项目中尝试了这个，但无法重现该问题。

对于＃1：我会尝试一些不同的事情：

1.  包含所有键/值对（不是参数的克隆）的新映射，并尝试使用此自定义映射实例化我的项目。只是为了确认是域/约束还是导致意外行为的参数映射。
2.  参数的克隆，然后将其用于实例化。

如果它在这两种情况下都能正常工作，那么我会非常仔细地查看我的实际参数图并将其与工作克隆进行比较。

# php - 在 LinkedIN OAuth 中获得 403

> ID：15169462
> 
> 赞同：0
> 
> 时间：2013-03-02T01:04:21.127
> 
> 标签：php, linkedin, linkedin-jsapi

我收到此错误

```
Invalid auth/bad request (got a 403, expected HTTP/1.1 20X or a redirect) at this line
$data = $oauthc->fetch($url, $body, $method, $headers); 
```

当我使用这段代码时

```
try {
            $oauthc = new \OAuth(CUSTOMER_KEY, CUSTOMER_SECRET,
                OAUTH_SIG_METHOD_HMACSHA1,OAUTH_AUTH_TYPE_URI);
            $oauthc->enableDebug();
            $oauthc->setNonce(rand());

            $url = 'https://api.linkedin.com/v1/jobs';
            $body = file_get_contents('http://azaidi-usweb-08.vps.zulily.com/job.xml');
            $method = OAUTH_HTTP_METHOD_POST;
            $headers = array('Content-Type' => 'text/xml');

            $data = $oauthc->fetch($url, $body, $method, $headers);

            $response = $oauthc->getLastResponse();
            $response_info = $oauthc->getLastResponseInfo();

            print "<pre>";
            print_r($oauthc->debugInfo);
            print_r($response);
            print_r($response_info);
            print "</pre>";

            exit;
}catch(OAuthException $e) {
    print_r($oauthc->debugInfo);
    print_r($e);
    exit;
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:06:04.950

在深入探讨之前……职位发布 API 程序仅适用于选定的合作伙伴。贵公司是否已获准加入该计划？否则，无论我们是否解决此问题，您都将无法发布工作。

# jquery - 多个类之间的jQuery toggleClass()

> ID：15169464
> 
> 赞同：1
> 
> 时间：2013-03-02T01:04:54.123
> 
> 标签：jquery, css, class, toggle, toggleclass

我想在多个元素之间切换类：

```
<div class='container'>
    <div class='main'>
       <div class='par' id='1'></div>
       <div class='par' id='2'></div>
       <div class='par' id='3'></div>
       <div class='par' id='4'></div>
    </div>
</div> 
```

我有这个

```
$('.main').delegate('.par','click',function(){
    $(this).toggleClass('media-clicked');
}); 
```

我知道如果我单击元素说#1，那么它将添加媒体单击类，如果我再次单击它，它将删除它。但是，我想单击#1，然后不再单击它，单击另一个元素说#4，它将删除其他媒体单击（#1）。

我怎么会做这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:11:34.127

```
$('.main').on('click', '.par', function () {
    $(this).siblings('.media-clicked').removeClass();
    $(this).toggleClass('media-clicked');
}); 
```

[http://jsfiddle.net/WPDGY/2/](http://jsfiddle.net/WPDGY/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T01:12:50.137

所以本质上你想将类移动到一个新元素。我建议使用“包装器”元素来实现可重用性。在这种情况下，具有主类的 div 就足够了，这样您就可以查找当前元素的任何具有要删除的类的兄弟姐妹，将其删除，然后将其添加到当前元素中，如下所示：

```
// you can use .on instead of .delegate if your jquery version is > 1.7
$('.main').delegate('.par','click',function(){
    $(this).sibblings(".media-clicked").removeClass("media-clicked");
    $(this).addClass('media-clicked');
}); 
```

这允许您使用具有相同结构的其他块，并且仍然在每个块上保持单独的功能。

# java - 无法绘制透明组件背景

> ID：15169467
> 
> 赞同：1
> 
> 时间：2013-03-02T01:05:00.910
> 
> 标签：java, swing, jpanel, transparency, graphics2d

我已经尝试了几个教程和搜索来弄清楚如何完成我想要做的事情。基本上我有一个 JLayeredPane，里面有两个 Jpanels。一个用于我的游戏绘图表面，一个用于我的 gui，例如暂停菜单。我有一个带有透明胶片的 png 文件，我希望它成为我的 gui 面板的背景，当用户点击转义时会弹出该面板。无论我做什么，面板的背景（甚至尝试将其仅作为一个组件）总是灰色的，上面画着我的 png 文件。

我已经尝试过其他人推荐的方法，例如以下。

```
setBackground(new Color(0,0,0,0)); 
```

和

```
setOpaque(false); 
```

这些似乎都没有帮助，也许我在这些之后没有做其他事情。传统上，我在构造函数之后或在扩展 jpanel 的类的构造函数中完成它们。

我几乎到了我将拥有一个面板并自己绘制所有内容的地步，但我更愿意使用内置的 java 函数，如 boxlayouts 等。

编辑添加工作示例：

```
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.DisplayMode;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Image;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;

public class Example {

private MyWindow gWindow;

public static void main(String argv[]) {
    Example g = new Example();

    g.gameLoop();
}

public Example() {
    gWindow = new MyWindow();

    // Initialize the keyboard listener
    gWindow.frame().addKeyListener(new KeyListener() {
        public void keyPressed(KeyEvent e) {
            if(e.getKeyCode() == KeyEvent.VK_ESCAPE) // escape key, show menu
            {
                System.exit(0);
            }
        }

        @Override
        public void keyReleased(KeyEvent e) {           
        }

        @Override
        public void keyTyped(KeyEvent e) {
        }
    });
}

public void gameLoop() {
    long lastLoopTime = System.currentTimeMillis();
    while(true) {
        // Used to calculate movement of sprites
        long delta = System.currentTimeMillis() - lastLoopTime;
        lastLoopTime = System.currentTimeMillis();

        // Clear the canvas
        Graphics2D g = (Graphics2D) gWindow.getBufferStrategy().getDrawGraphics();
        g.setColor(Color.black);
        g.fillRect(0,0,gWindow.frame().getWidth(), gWindow.frame().getHeight());

        // Clean up graphics and flip buffer
        g.dispose();
        gWindow.getBufferStrategy().show();

        // Small delay before next cycle
        try { Thread.sleep(10); } catch (Exception e) {}
    }
}

public class MyWindow {
    private JFrame frame;
    private JLayeredPane container;
    private MyPanel gui;
    private JPanel surface;

    private Canvas canvas;

    private GraphicsDevice vc;
    private Dimension dm;

    BufferedImage menuImg = null;
    BufferedImage menuImgHighlight = null;
    BufferedImage gSettings = null;
    Font font = null;

    public MyWindow() {
        frame = new JFrame("Jumper");

        vc = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();

        DisplayMode display = vc.getDisplayMode();
        dm = new Dimension(display.getWidth(), display.getHeight());

        container = new JLayeredPane();     
        gui = new MyPanel();
        gui.setLayout(new BoxLayout(gui, BoxLayout.Y_AXIS));
        surface = new JPanel(new BorderLayout(0,0));

        frame.add(container, BorderLayout.CENTER);
        container.add(surface, new Integer(0), 0);
        container.add(gui, new Integer(1), 0);

        init_resources();

        canvas = new Canvas();
        surface.add(canvas);    

        gui.setBackground(new Color(0,0,0,0));
        gui.setVisible(true);
        gui.setOpaque(false);

        surface.setVisible(true);

        setFullScreen(display);

        frame.setResizable(false);
        frame.setVisible(true);
        frame.pack();
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        frame.addComponentListener(new ComponentAdapter() {

            @Override
            public void componentResized(ComponentEvent e) {
                setScreen(new Dimension(frame.getWidth(), frame.getHeight()));
                frame.repaint();
            }
        });

        canvas.setIgnoreRepaint(true);
        canvas.createBufferStrategy(2);
        canvas.setFocusable(false);
    }

    public JFrame frame() {
        return frame;
    }

    public BufferStrategy getBufferStrategy () {
        return canvas.getBufferStrategy();
    }

    public void setScreen(Dimension dim) {
        int width = (int) dim.getWidth();
        int height = (int) dim.getHeight();
        this.dm = dim;

        container.setPreferredSize(dm);
        gui.setPreferredSize(dm);
        surface.setPreferredSize(dm);

        canvas.setBounds(0,0,width,height);
        if(gSettings == null) {
            gui.setBounds((int) ((dm.getWidth() - 200) / 2),
                    (int) ((dm.getHeight() - 200) / 2),
                    200,
                    200);
        }
        else {
            gui.setBounds((int) ((dm.getWidth() - gSettings.getWidth()) / 2),
                    (int) ((dm.getHeight() - gSettings.getHeight()) / 2),
                    gSettings.getWidth(),
                    gSettings.getHeight());
        }
        gui.setBackground(gSettings);
        surface.setBounds(0,0,width,height);
        container.setBounds(0,0,width,height);
        frame.validate();
    }

    public void setFullScreen(DisplayMode display) {
        setScreen( Toolkit.getDefaultToolkit().getScreenSize());
        frame.setUndecorated(true);
        vc.setFullScreenWindow(frame);
        if(dm != null && vc.isDisplayChangeSupported()) {
            try {
                vc.setDisplayMode(display);
            }
            catch(Exception e) {}
        }   
        frame.validate();
    }

    private void init_resources() {
        try {
            gSettings = ImageIO.read(getClass().getResourceAsStream("/gui/settingsWindow.png"));
        }
        catch(Exception e)
        {
            System.out.print("Failed to load resources");
            System.out.println();
        }       
    }

}

public class MyPanel extends JPanel {

    BufferedImage img = null;
    public MyPanel() {
        super();
        setOpaque(false);
    }

    public void setBackground(BufferedImage img) {
        this.img = img;
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        if(img != null) {
            Graphics2D g2d = (Graphics2D) g;
            g2d.drawImage(img, 0, 0, null);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:18:08.883

我还没有测试过这个，但是，不要`super.paintComponent`在你的绘画方法结束时调用，而是尝试在开始时调用......

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    if(img != null) {
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(img, 0, 0, null);
    }
} 
```

这样做的原因是，其中一项工作`paintComponent`是清除图形上下文并准备好进行绘制。如果组件是透明的，则它仍必须清除/擦除之前在其上绘制的任何内容的图形上下文。图形上下文是共享资源，这意味着给定窗口中的所有组件可能共享相同的图形上下文，因此如果不先“擦除”它会变得有点脏；）

您也可能在混合重型和轻型组件时遇到问题，但是当您将轻型组件添加到重型组件中时，这可能不是问题，但值得放在您的脑海中...... ;)

`JComponent`默认情况下是透明的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:13:06.737

尝试在此处应用一些物理...可见的白色是 RGB 最大值的组合...如果您将 RGB 值保持为最小值，它将为您提供深色（黑色）而不是透明色..

尝试实现以下方法..

```
(your component).setOpaque(false);
(your component).setContentAreaFilled(false);
(your component).setBorderPainted(false); 
```

希望这会对您有所帮助...

# php - 如何在 PHP 中调用 php WSSoapClient - 示例

> ID：15169468
> 
> 赞同：0
> 
> 时间：2013-03-02T01:05:12.293
> 
> 标签：php, ws-security

[有人可以为我提供一个 PHP 示例，说明如何在https://gateway2.pagosonline.net/ws/WebServicesClientesUT?wsdl](https://gateway2.pagosonline.net/ws/WebServicesClientesUT?wsdl)对 wsdl 网络服务进行 WSSoapClient 调用。

我到处寻找代码示例，但找不到如何调用它。我看到您可以扩展 SoapClient 类，但我不知道如何构建调用本身。太感谢了。

例子”

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema"     xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:ser="http://server.webservices.web.v2.pagosonline.net"> 
<soapenv:Header>
<wsse:Security soapenv:mustUnderstand="1" 
 xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-    secext1.0.xsd">
<wsse:UsernameToken>
<wsse:Username>1</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-    token-profile-1.0#PasswordText">
123456</wsse:Password>
</wsse:UsernameToken>
</wsse:Security> 
</soapenv:Header>
<soapenv:Body>
<ser:getVersion soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</soapenv:Body></soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:12:31.650

首先，您需要初始化一个新`SoapClient`对象，将 URL 传递给您的 WSDL 文件，如下所示：

```
$client = new SoapClient("https://gateway2.pagosonline.net/ws/WebServicesClientesUT?wsdl"); 
```

然后，您可以像调用任何其他对象方法一样调用服务方法，如下所示：

```
$verificaCuenta = true;
$result = $client->setVerificaCuenta($verificaCuenta); 
```

要获取所有可用方法的列表，一旦你创建了你的`$client`对象，你可以`__getFunctions()`这样调用：

```
$client = new SoapClient("https://gateway2.pagosonline.net/ws/WebServicesClientesUT?wsdl");
$functions = $client->__getFunctions();
var_dump($functions); 
```

注意：您必须在文件中启用`php_soap`并`php_openssl`启用此功能。`php.ini`

**编辑**：似乎您正在调用的服务需要 wsse 标头。我不是专家，但看起来 PHP 对这种事情没有很好的支持。

在 Google Code 上找到了一个项目，该项目似乎可以使用 PHP 简化 wsse。链接在这里：[https ://code.google.com/p/wse-php/source/browse/](https://code.google.com/p/wse-php/source/browse/)

你可以抓住`soap-wsse.php`和`xmlseclibs.php`文件。

然后将`soap-wsse.php`文件包含到您的代码中并像这样扩展soap客户端：

```
require "soap-wsse.php";
class mySoap extends SoapClient {

    function __doRequest($request, $location, $saction, $version) {
        $doc = new DOMDocument('1.0');
        $doc->loadXML($request);

        $objWSSE = new WSSESoap($doc);

        $objWSSE->addUserToken("YOUR_USERNAME_HERE", "YOUR_PASSWORD_HERE", TRUE);

        return parent::__doRequest($objWSSE->saveXML(), $location, $saction, $version);
    }
} 
```

然后你应该能够像这样与网络服务交谈：

```
$wsdl = 'https://gateway2.pagosonline.net/ws/WebServicesClientesUT?wsdl';    
$sClient = new mySoap($wsdl, array('trace'=>1));

try {
    $verificaCuenta = true;
    $result = $sClient->setVerificaCuenta($verificaCuenta);
    print_r($result->return);
} catch (SoapFault $fault) {
    print("Fault string: " . $fault->faultstring . "\n");
    print("Fault code: " . $fault->detail->WebServiceException->code . "\n");
}

echo $sClient->__getLastRequest() . "\n" . $sClient->__getLastResponse(); 
```

# 免责声明

我没有测试过上述任何代码，希望它能让你走上正确的道路。

祝你好运

# c# - 从 await 访问任务内容

> ID：15169469
> 
> 赞同：0
> 
> 时间：2013-03-02T01:05:30.873
> 
> 标签：c#, .net, windows-runtime, windows-store-apps, windows-store

我有一个返回 Task< PixelData > 的方法。

```
myObject.pixelData = await rootPage.GrabPixelData("mypic.png"); 
```

我已经（从调试器）确认该方法已完成（并返回一个非空值），但是当执行返回时 myObject.pixelData 仍然为空。

奇怪的是，该点之后的行永远不会被命中（我在那里设置的断点永远不会停止执行）。

这是课程：

```
public class PixelData
{
    public byte[] sourcePixels;
    public int sizeOfSourcePixels;
    public int imageWidth;
    public int imageHeight;
} 
```

这是被调用的方法：

```
public async Task<PixelData> GrabPixelData(string imageFileName)
{
    if (!ImageDictionary.ContainsKey(imageFileName))
    {
        // doesn't exist yet, so load it
        PixelData pd = await LoadPic(imageFileName);
        ImageDictionary.Add(imageFileName, pd);
    }

    var test = ImageDictionary[imageFileName];

    return ImageDictionary[imageFileName];
} 
```

我对异步/等待很陌生，我似乎无法弄清楚这一点。

我需要从 PixelData 类中的某个接口继承吗？我需要将结果转换为另一种类型吗？为什么下一行永远不会被执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:53:27.450

我强烈怀疑原因是 .NET 4.5 的一些隐藏的、神秘的方面，或者它是一个错误。

无论如何，对我来说，解决方法是进行异步调用以将文件加载到父类中，然后在下一行中获取它。

像这样的东西：

```
await rootPage.LoadPixelData("mypic.png");
myobject.pixelData = rootPage.ImageDictionary["mypic.png"];
loadedFlag = true; 
```

我的课程布局是不是有点强类型？是的。那是因为每次切换页面时 XAML 都会清除我的类，所以我必须将所有内容存储在父类中以避免重新加载。

# windows-8 - Visual Studio 错误：“无法激活后台任务。后台任务激活失败。”

> ID：15169470
> 
> 赞同：5
> 
> 时间：2013-03-02T01:05:32.297
> 
> 标签：windows-8, windows-store-apps

当我尝试使用 Visual Studio 启动特定的后台任务时，我目前收到以下错误：

![无法激活后台任务。 后台任务激活失败](../Images/2c8fdf82844eb07e19b2eaac07e5a2c8.png)

我尝试按下帮助按钮，这将我带到了[如何在 Windows 应用商店应用程序中触发挂起、恢复和后台事件](http://msdn.microsoft.com/en-us/library/windows/apps/hh974425%28v=vs.110%29.aspx)。*该页面表示要查看事件查看器*中不包含任何条目的某个部分。

对应的 Windows Store 应用程序正在请求后台任务权限和注册任务。该应用程序已启用锁定屏幕。应用程序的项目正在引用后台任务项目，并且它的清单正在指定后台任务的正确的完全限定类名。清单中已指定正确类型的后台任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:30:40.790

`RequestAccessAsync`我可以通过在注册后台任务之前更改要调用的任务注册/位置代码来解决此问题。（以前，它在请求访问之前已经注册了后台任务。）

由于某种原因，这导致应用程序再次请求访问。运行应用程序并授予它权限后，我将代码恢复到以前的状态。

现在它再次正常工作，即使代码与最初相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T16:03:40.450

对我来说，我遇到了一个问题，我`TaskEntryPoint`在清单中更新了但忘记在我的代码中更新它......令人沮丧的是不得不在两个地方都维护它！

在将一些类重构到新库的过程中，它不同步了，所以如果你这样做了，不要忘记事后更新！

您可以使用反射来帮助解决这个问题，例如`typeof(LocationTask).FullName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T12:11:41.363

重新启动 Visual Studio (2015) 为我解决了这个问题。

您可能已经这样做了，但有时会忘记简单的事情。

# android - 禁用微调器中的文本更改

> ID：15169471
> 
> 赞同：0
> 
> 时间：2013-03-02T01:05:39.063
> 
> 标签：android, spinner

当我在 Android 的微调器视图中单击下拉列表中的项目时 - 微调器上的值更改为我单击的值。我想禁用此行为。我只需要callbakck，这样的点击就会发生。有任何想法吗？谢谢多米尼克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:25:06.350

覆盖`getView()`你的方法`Adapter`。为所有位置设置相同的文本。

# python - 如何阻止 Flask 和 NLTK 的内存泄漏

> ID：15169472
> 
> 赞同：0
> 
> 时间：2013-03-02T01:05:54.617
> 
> 标签：python, performance, memory-leaks, nltk

我正在使用 NLTK 和 Flask 构建一个 Web 应用程序。这只是一个简单的 RESTful 应用程序，我将它部署在 heroku 上，一切顺利。但是，当服务器开始收到更多请求时，我达到了 heroku 的内存限制，即 1.5GB。所以，我猜这是因为`nltk.RegexpParser`每次请求到来时我都在加载。

这是非常简单的代码。

```
 @app.route('/get_keywords', methods=['POST'])
def get_keywords():
    data_json = json.loads(request.data)
    text = urllib.unquote(data_json["sentence"])
    keywords = KeywordExtraction().extract(text)

    return ','.join(keywords) 

```

这是关键字提取位。

```
 import re
import nltk

nltk.data.path.append('./nltk_data/')

from nltk.corpus import stopwords

class KeywordExtraction:
    def extract(self, text):

        sentences = nltk.sent_tokenize(text)
        sentences = [nltk.word_tokenize(sent) for sent in sentences]
        sentences = [nltk.pos_tag(sent) for sent in sentences]

        grammar = "NP: {}"
        cp = nltk.RegexpParser(grammar)
        tree = cp.parse(sentences[0])

        keywords = [subtree.leaves()[0][0] for subtree in tree.subtrees(filter=lambda t: t.node == 'NP')]
        keywords_without_stopwords = [w for w in keywords if not w in stopwords.words('english')]

        return list(set(keywords_without_stopwords + tags)) 

```

我不确定这是我的代码、Flask 还是 NLTK 的问题。我对 Python 很陌生。任何建议将不胜感激。

我通过 blitz.io 对此进行了测试，仅在 250 个请求之后，服务器就炸毁并开始抛出 R15。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:22:09.620

从缓存东西开始：

```
# Move these outside of the class declaration or make them class variables

stopwords = set(stopwords.words('english'))
grammar = "NP: {}"
cp = nltk.RegexpParser(grammar) 
```

这也可以加快一点：

```
from itertools import ifilterfalse

...

keywords_without_stopwords = ifilterfalse(stopwords.__contains__, keywords)

return list(keywords_without_stopwords + set(tags))  # Can you cache `set(tags`)? 
```

我还想看看 Flask-Cache 以尽可能多地记忆和缓存函数和视图。

# python - 我的解决方案有什么问题？最大计数[代码厨师]

> ID：15169474
> 
> 赞同：2
> 
> 时间：2013-03-02T01:06:18.690
> 
> 标签：python

[问题](http://www.codechef.com/problems/MAXCOUNT/)。这是一个简单的问题，但我不知道这段代码有什么问题？

```
from collections import Counter
def com(N,A):
    num_array=A.split()
    c=Counter(num_array)
    C=max(c.values())
    l1=[]
    for k in c:
        if c[k]==C:
            l1.append(k)

    V1=min(l1)
    V=int(V1)
    print V,C

t=input()
for i in range(t):
    N=input()
    A=raw_input()
    com(N,A) 
```

如果可能的话，任何更简单的解决方案都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:15:10.387

您需要`l1`在取最小值之前将值转换为整数。否则，您将占用最少的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:19:15.383

这将使您开始：

```
from collections import Counter

li='''2
5
1 2 3 2 5
6
1 2 2 1 1 2'''.splitlines()
c=Counter()
for e in [s.split(' ') for s in li]:
    c.update(e)

print c.most_common(2) 
```

印刷：

```
[('2', 6), ('1', 4)] 
```

# powershell - 通过 PowerShell 更新 Active Directory“邮件”属性

> ID：15169478
> 
> 赞同：1
> 
> 时间：2013-03-02T01:07:40.360
> 
> 标签：powershell, active-directory

我正在尝试为特定 OU 中的所有用户更新 AD 中列出的电子邮件地址。这是我正在使用的 powershell 脚本，但它无法正常工作

```
Import-Module ActiveDirectory
Get-ADUser -Filter * -SearchBase "OU=OtherOU,OU=SomeOu,DC=Domain,DC=local" | Set-ADUser -email $_.samaccountname@domain.com 
```

我认为这是因为当我尝试执行 Set-ADUser 时，$_.samaccountname 没有返回任何内容。谁能指出我解决这个问题的正确方向？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-19T16:50:32.803

使用 SamAccountName 和电子邮件地址创建一个 csv 文件

```
"SamAccountName","EmailAddress"
"john","john@xyz.com" 
```

第 1 步：导入到变量

```
$users = Import-Csv .\email.csv 
```

第二步：调用变量

```
foreach ($user in $users) {
    Set-ADUser -Identity $user.SamAccountName -EmailAddress $user.EmailAddress
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T08:54:54.910

在当前上下文中 $_ 为空。您需要使用 Foreach-Object 才能使 $_ 可用。

```
Get-ADUser -Filter * ... | Foreach-Object{
   Set-ADUser -Identity $_ -Email "$($_.samaccountname)@domain.com"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T02:06:03.507

I suspect you'll need to use a subexpression for that:

```
"$($_.samaccountname)@domain.com" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T13:48:14.657

```
Get-ADUser -Filter * -SearchScope Subtree -SearchBase "OU=OUName,DC=domain,DC=com" |  
  Foreach-Object { Set-ADUser -Identity $_ -Email "$($_.samaccountname)@domain.com" } 
```

这来自： [https ://social.technet.microsoft.com/wiki/contents/articles/33311.powershell-update-mail-and-mailnickname-for-all-users-in-ou.aspx](https://social.technet.microsoft.com/wiki/contents/articles/33311.powershell-update-mail-and-mailnickname-for-all-users-in-ou.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T18:34:36.770

假设用户名是 domain\user1 或 user1@domain.com

```
$user = "user1"
Set-ADUser $user -emailaddress "firtname.lastname@xyz.com"
Get-ADUser -Identity $user -Properties emailaddress 
```

# performance - 在性能工程的背景下，歪斜是什么意思

> ID：15169480
> 
> 赞同：0
> 
> 时间：2013-03-02T01:07:46.100
> 
> 标签：performance

这个词在软件性能讨论中被使用。我在谷歌上搜索了它的含义，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:43:31.513

*偏斜的测量*几乎可以肯定地表明统计中的通常含义，即关于平均值的三次矩（对称为零，左偏为负，右偏为正）。有关不太正式的用法，请参阅[http://en.wiktionary.org/wiki/skew](http://en.wiktionary.org/wiki/skew)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T20:55:05.793

我认为你的意思是表演活动打滑。一般来说根据[英特尔的手册](https://www.intel.com/content/www/us/en/develop/documentation/vtune-help/top/analyze-performance/custom-analysis/custom-analysis-options/hardware-event-list/hardware-event-skid.html)

> Event Skid 是事件记录不完全在导致事件的代码行上。

为了更好地理解和示例，请参阅Denis Bakhvalov 的[这篇文章](https://easyperf.net/blog/2018/08/29/Understanding-performance-events-skid)。

# java - 通过Java检查域名年龄

> ID：15169482
> 
> 赞同：1
> 
> 时间：2013-03-02T01:08:04.447
> 
> 标签：java, dns

我正在为一个大学项目制作一个简单的网络钓鱼扫描仪工具。我的一种检测方法包括检查电子邮件中的 DNS 是否有效，并且我还想检查它们的年龄。这是我如何检查它们是否存在的示例代码：

```
import javax.naming.NamingException;
import javax.naming.directory.Attribute;
import javax.naming.directory.Attributes;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;
import java.util.Hashtable;

public class DNSExample {
    static int doLookup( String hostName ) throws NamingException {
        Hashtable env = new Hashtable();
        env.put("java.naming.factory.initial",
                "com.sun.jndi.dns.DnsContextFactory");
        DirContext ictx = new InitialDirContext( env );
        Attributes attrs =
                ictx.getAttributes( hostName, new String[] { "MX" });
        Attribute attr = attrs.get( "MX" );
        if( attr == null ) return( 0 );
        return( attr.size() );
    }

    public static void main( String args[] ) {

        String [] array = {"google.com","dsad33114sssaxzx.com"} ;
        for( int i = 0; i < array.length; i++ ) {
            try {
                System.out.println( array[i] + " has " +
                        doLookup( array[i] ) + " mail servers" );
            }
            catch( Exception e ) {
                System.out.println(array[i] + " : " + e.getMessage());
            }
        }
    }
} 
```

> 我需要如何修改上述代码以检查现有服务器的年龄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:48:23.843

根据您上面的描述和评论，您似乎正在尝试收集 whois 信息。

1.  [从http://commons.apache.org/proper/commons-net/](http://commons.apache.org/proper/commons-net/)下载 API
2.  更改下面的 nameToQuery 并运行它。

公共类 WhoisIt {

```
public static final String WHOIS_SERVER = "whois.internic.net";
public static final int WHOIS_PORT = 43;

public static void main(String[] args) throws Exception {

    String nameToQuery = "avajava.com";

    WhoisClient whoisClient = new WhoisClient();
    whoisClient.connect(WHOIS_SERVER, WHOIS_PORT);
    String results = whoisClient.query(nameToQuery);

    System.out.println(results);
}
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:07:00.770

我认为您选择了一个在一般情况下无法解决的问题......使用当前一代互联网标准：

1.  您需要的信息无法从 DNS 本身获得。
2.  在某些情况下，可以从 WHOIS 获得有关 DNS 注册的信息。但是，WHOIS 服务器返回的信息不是标准化的：
    *   没有标准的信息模型。
    *   没有标准格式。
    *   不保证信息的准确性。
    *   甚至不清楚“服务器年龄”是否可用。（例如，APNIC 的 WHOIS 提供的最接近的是 DNS 记录的最后修改时间戳。这不是服务器年龄的良好代理。）
3.  有一组 RFC 定义了一个叫做[CRISP](http://www.ietf.org/wg/concluded/crisp)的东西，但据我所知，该标准的目的是让注册商与注册商交换信息。（我找不到任何基于 CRISP 的面向公众的服务。）
4.  还有一个名为[WEIRDS](http://datatracker.ietf.org/wg/weirds/charter/)的 IETF 工作组，我认为它旨在为 WHOIS 定义一个支持网络的替代品。（不要将 WEIRDS 与 IETF WEIRD WG 混淆！）但这是最近才成立的，现在对结果做出任何预测还为时过早。（或者 NIC 需要多长时间来实施 WG 提出的任何规范。）

* * *

总结：你在这个领域实现真正有效的东西的机会目前很低。可能您希望达到的最好结果是基于屏幕抓取一两个 WHOIS 服务。

这可能会在几年内改变，但这对您当前的项目没有帮助。

# javascript - 错误显示在rails中的ajax表单上不起作用

> ID：15169485
> 
> 赞同：0
> 
> 时间：2013-03-02T01:08:19.143
> 
> 标签：javascript, ruby-on-rails, ruby, ajax, twitter-bootstrap

我正在使用内联表单让用户将数据提交到表格（请注意，我使用 CSS 而不是 html 表格来实现这一点）。当模型中的验证返回错误时，我想使用 Bootstrap 错误类突出显示输入字段，并将错误消息放在适当的表单字段下方。我正在使用 AJAX 提交表单。

我遇到了问题，这是我到目前为止所遇到的：

控制器：

```
def create
@travel = Travel.new(params[:travel])
@travel[:user_id] = current_user.id
convert_date # and return

if @travel.save
  flash[:notice] = "Successfully saved trip"
  @travels = Travel.where("user_id = ?",current_user)
  respond_to { |format| format.js }
end
end 
```

JS视图：

```
<% if @travel.errors.any? %>
  <% @travel.errors.full_messages.each { |msg| logger.debug(msg) } %>
  <% @travel.errors.messages.each do |k,v| %>
  <% logger.debug("#tf_#{k}") %>
    $(<%= "#tf_#{k}" %>).insertAdjacentHTML("afterbegin","<span class="control-group error"><span class="controls">");
    $(<%= "#tf_#{k}" %>).insertAdjacentHTML("beforeend","</span></span>");
    $(<%= "#error_#{k}" %>).val("<%= "#{k} #{v}" %>");
  <% end %> 
<%  else %>
  $(":input:not(input[type=submit])").val("");
  $("#travels_list").html("<%= escape_javascript( render(:partial => "travels") ) %>");
<%  end %> 
```

形成部分：

```
<%= form_for @travel, :remote => true, :html => {:class => "form-inline", :id => "new-travel-form"} do |f| %>
<div class="row-fluid">
<span id="tf_city"><%= f.text_field :city, :placeholder => "London, UK", :class => "span3" %></span>
<span id="tf_arrive_date"><%= f.text_field :arrive_date, :class => "span2" %> </span>
<span id="tf_leave_date"><%= f.text_field :leave_date, :class => "span2" %> </span>
<span id="tf_notes"><%= f.text_field :notes, :placeholder => "e.g. staying at the Hilton", :class => "span3" %></span>
<%= f.submit "save", :class => "btn btn-primary span1" %>
</div>
<% end %> 

<div class="row-fluid error" id="error_expl">
<span id="error_city" class="help-inline span3"></span>
<span id="error_arrive_date" class="help-inline span2"></span>
<span id="error_leave_date" class="help-inline span2"></span>
<span id="error_notes" class="help-inline span3">test</span>

</div> 
```

JS 中的`logger.debug`正在触发，所以我知道错误正在传递给 JS，但`insertAdjacentHMTL()`似乎没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:40:28.853

也许这不会回答您的问题，但我希望它有助于改进您的代码。

首先，根据您的代码，我猜您应该在模型用户中有一些这样的关联：

```
has_many :travels 
```

在您的模型 Travel 中：

```
belongs_to :user 
```

因此，为了改进您的代码，您可以在控制器中使用它：

```
respond_to :js, only: [:create]

def new
 @travel = current_user.travels.new
end

def create
 @travel = current_user.travels.new(params[:travel])
 if @travel.save
   flash[:notice] = "Successfully saved trip"
   @travels = current_user.travels
 else
   # I guess you should have some code here in case any validation fail. If you dont 
   # have validations for the model Travel, you don't need the if statement here.
 end
end 
```

关于你的问题，你能澄清一下是`"#tf_#{k}"`什么吗？

# axis2 - 相当于 Axis2.war 的 Eclipse 项目根目录

> ID：15169486
> 
> 赞同：0
> 
> 时间：2013-03-02T01:08:34.420
> 
> 标签：axis2

我在 Axis2.war 的 aar 文件中加载了多个非 jar 资源。

它们中的大多数都是使用配置表成功加载的，其中的绝对路径

每个资源（文本文件）都被指定。

但是我有一个基于开源的 jar，它在根路径加载资源（？？）

与“src”文件夹处于同一级别的 Eclipse 项目。

当上面项目的类被jar到aar的一个lib中时，

资源无法被需要它的类读取。

我将它们放在 aar 之外，在 aar 的库中或与库的同一级别。

他们只是不工作。

请记住，这是 getResourceStream 或类似的情况

不能使用，因为 jar 已经硬编码了要位于根路径的路径

Eclipse的一个项目。

然后我的问题是 Axis2.war 中的 Eclipse-project-root-path-equivalent 在哪里

部署在 JBoss 5.1 中。

我不确定这个问题是否被理解，但请提供一些建议。

//

可以在以下位置找到描述上述情况的参考图像

[https://community.jboss.org/thread/221937](https://community.jboss.org/thread/221937)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:43:23.667

我使用 System.getProperty("user.dir") 来准确找到 jar 引用资源的位置以及

我的案例 C:\Users\MYUSERACCOUNT\Development\server\jboss5.1\server\default\deploy\axis2.w‌​‌​ar\WEB-

INF\services MYUSERACCOUNT 是 Axis2.war 服务文件夹中 AAR 的根目录。所以我把

我的帐户文件夹（Windows 7）中所需的资源文件夹，它工作

# python - python比较并输出到新文件

> ID：15169494
> 
> 赞同：0
> 
> 时间：2013-03-02T01:09:38.440
> 
> 标签：python, compare

我有一个 Python 脚本，它按规定的顺序执行以下操作：

1.  接受一个参数（在本例中为文件名）并删除除 az AZ 0-9 和句点 '.' 之外的所有字符。
2.  从新文件中删除所有信息，但稍后将与监视列表进行比较的 IP 地址除外
3.  清理文件并将其另存为新文件以与监视列表进行比较
4.  最后，它将清理后的文件 (ip_list_clea) 与监视列表文件进行比较，并将匹配的行输出到新文件 (malicious_ips)。

这是我正在努力解决的第 4 部分。以下代码一直有效，直到第 4 阶段停止其余部分的工作：

```
#!/usr/bin/python
import re
import sys
import cgi

# Compare the cleaned up list of IPs against the botwatch
# list and output the results to a new file.                                                                                        

new_list = set()
outfile = open("final_downloads/malicious_ips", "w")
for line in open("final_downloads/ip_list_clean", "r")
    if line in open("/var/www/botwatch.txt", "r")
        outfile.write(line)
        new_list.add(line)
outfile.close() 
```

关于为什么最后一部分不起作用的任何想法？事实上，它阻止了整个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:25:42.823

您在最后一节中遗漏了一些冒号。试试这个：

```
new_list = set()
outfile = open("final_downloads/malicious_ips", "w")
for line in open("final_downloads/ip_list_clean", "r"):
        if line in open("/var/www/botwatch.txt", "r"):
                outfile.write(line)
                new_list.add(line)
outfile.close() 
```

# assembly - 汇编 (MIPS) 正确使用：寄存器与堆栈

> ID：15169498
> 
> 赞同：3
> 
> 时间：2013-03-02T01:10:16.037
> 
> 标签：assembly, stack, mips, cpu-registers

在编写 MIPS 程序时，我听说保持寄存器清洁通常是一种很好的做法，即在程序结束时将寄存器的值清除为 0。所以我的第一个问题是如何/为什么这是必要的/良好的做法？

其次，如果我们有一个函数调用，其参数(p1, p2) 存储在$4 和$5 中；在我们的函数定义结束时，是否有必要清除 $4 和 $5 的值或更好地保留它们在函数调用开始时的状态？

我还看到了将参数推送到堆栈的示例，如下所示：

```
addi $29, $29, -8
sw $4, 0($29)
sw $5, 4($29)
; At the end of our program:
addi $29, $29, 8 
```

何时以及为什么这是必要的/良好的做法？

最后，如果我们要在程序中使用一些**常量**，比如 4 和 1，将它们保存在寄存器中还是堆栈上更好？例如：

```
lis $8
.word 4
lis $9
.word 1 
```

然后我们可能会以某种方式将这些值用于我们的程序，然后将它们清除为 0。

或者我们可以通过来回移动堆栈指针来选择将它们存储在堆栈中。哪种方法更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T03:31:25.097

首先，[您通常想使用](http://en.wikipedia.org/wiki/MIPS_architecture#Compiler_register_usage) `$zero`而不是`$0`，`$v0–$v1`而不是`$2–$3`等......它们比普通数字更容易理解（和记忆），并且汇编程序也理解这种表示法，所以这方面没有问题。这也将您的代码从数字中抽象出来，因此如果标准发生变化（例如，$zero 不再是 $0 而是 $256），您的代码仍然可以正确组装。

在每个 CPU 架构中，关于如何使用寄存器进行调用以及如何在函数中使用寄存器，都有一些约定。这称为*调用约定*。您可以[在此处](http://en.wikipedia.org/wiki/Calling_convention#MIPS)查看 MIPS 调用约定的简要说明。

> 我听说保持寄存器清洁通常是一种很好的做法，即在程序结束时将寄存器的值清除为 0。所以我的第一个问题是如何/为什么这是必要的/良好的做法？

我个人从未听说过这种做法，但我不太同意。更好的做法是在程序开始之前恢复以前的值。

> 其次，如果我们有一个函数调用，其参数(p1, p2) 存储在$4 和$5 中；在我们的函数定义结束时，是否有必要清除 $4 和 $5 的值或更好地保留它们在函数调用开始时的状态？

您应该将它们保留在函数调用开始时的状态。对于调用者来说，你修改这个寄存器是没有意义的。

*堆栈上的空间是为 $a0-$a3 保留的，以防被调用者需要保存其参数，但调用者不会将寄存器存储在那里。*

> 我还看到了像这样将参数推送到堆栈的示例。何时以及为什么这是必要的/良好的做法？

如果根据定义，堆栈是临时存储。如果你想备份寄存器值（例如你想使用 $aX 或 $sX），你把它们放在那里。和以前一样：

*堆栈上的空间是为 $a0-$a3 保留的，以防被调用者需要保存其参数*

```
addi $sp, $sp, -8 
```

移动堆栈指针寄存器（按照惯例，它是 29 美元）。这在堆栈中保留了 8 个字节。

```
sw $a0, 0($sp)
sw $a1, 4($sp) 
```

将 $a0 保存到堆栈顶部，将 $a1 保存为堆栈中的第二个（请记住，堆栈向较低地址增长）。这将填充保留空间（8 个字节）。这称为*函数入口协议*。

```
; At the end of our program:
; You forgot, and it's important:
lw $a0, 0($sp)
lw $a1, 4($sp)
addi $sp, $sp, 8 
```

您恢复保存的寄存器并将堆栈指针放回原始值。然后调用者将保持其堆栈和参数不变。这被称为*函数出口协议*。

> 如果我们要在程序中使用一些常量，比如 4 和 1，将它们保存在寄存器中还是堆栈上更好？

两者都不。常量应该用作直接操作数：

```
li $t0, C   ; Load 16-bit constant into $t0
lui $t0, C  ; Load upper 16-bit half-word of $t0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-16T20:50:08.917

还不能发表评论，所以我正在“回答”评论。

在上述答案中提到的约定中，有一些寄存器必须保存在堆栈中 - 在过程中使用时“应该”保存 $s0-$s7 寄存器。这意味着将值保存到堆栈中，如果您发现自己需要使用它们。当输出 ($v0, $v1) 和输入 ($a0-$a3) 寄存器不足以满足您的程序的目的时，通常会发生这种情况。

$ra（返回地址寄存器）在使用过程时也应该保存到堆栈中，如果您正在使用调用另一个过程的过程或者您的代码将中断，则**需要保存。**

如果您需要在过程中使用临时寄存器，可以使用 $t0-$t7 而不保留它们的值，正如它们的名称（临时）所暗示的那样。这在循环计数器或其他非保留值的情况下通常很有用。

# html - 喜欢 - 为所有页面聚合一个数字

> ID：15169501
> 
> 赞同：0
> 
> 时间：2013-03-02T01:10:56.093
> 
> 标签：html, facebook, facebook-like

我网站的每个页面上都有 Facebook Likes 按钮。我想要这样当用户点赞时，会有一个点赞指向他们所在的当前页面。但是这个数字将反映整个页面有多少赞。我想知道这是否可能？

据我了解，喜欢的数量与用户喜欢的链接相关联。我的理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:56:52.077

Facebook like 按钮链接到一个 URL - 您的网站主页的 URL：

```
www.example.com 
```

或单独一个页面

```
www.example.com/post-about-example 
```

当您创建“赞”按钮时，您决定反对什么 - 基本上如果您选择主页 - 它仍然只喜欢一个页面，但它只是您希望 Facebook 个人资料链接到的主页。您需要让每个按钮都喜欢您的主页或您的个人页面 - 一个按钮不能同时做到这两点。

附带说明 - 从 SEO 的角度来看，如果您的喜欢与您的主页相关联会更好，因为这应该首先链接到您最重要的页面 - 为更重要的页面获得最佳 SEO 收益 - 同时也将用户引导到什么设置为登陆页面。

如果您的网站是一个依赖于多个帖子的网站，比如说博客。最好沿着每个帖子 url 都有自己的 facebook 按钮 FOR 那个 URL 的路径走下去。这样每个帖子都会获得更多的曝光率。

我希望这能回答你的问题。

# javascript - 需要一个正则表达式来获取从 # 到非字母的所有字母

> ID：15169502
> 
> 赞同：0
> 
> 时间：2013-03-02T01:10:59.547
> 
> 标签：javascript, regex

如何编写正则表达式以将 location.href 中的 # 中的所有字母表转换为非字母表。

> Eg1：源字符串 1：www.example.com#blue?something=x
> 我的期望：蓝色
> 
> Eg2：源字符串 2：www.example.com#blue&something=x
> 我的期望：蓝色
> 
> Eg3：源字符串 3：www.example.com#blue
> 我的期望：蓝色
> 
> Eg4：源字符串 4：www.example.com#?something=x
> 我的期望：“”
> 
> Eg5：源字符串 5：www.example.com
> 我的期望：“”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:17:21.643

在任何*明智*的语言中，它都会像`/(?<=#)[a-z]+/`

可悲的是，JS 正则表达式不支持后向断言，我们被简化为：

```
var match = (input.match(/#[a-z]+/) || [""])[0].substr(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:16:37.060

这些 URL 不是...特别有效（`?`在`#`? 之后），但如果它们是，您可以从 URL 创建一个 Location 对象并用于`locationObject.hash`获取`#`. 作为字符串：

```
str.match(/#([a-z]+)/i)[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:33:09.167

请注意，URI 语法是：

```
scheme ":" hier-part [ "?" query ] [ "#" fragment ] 
```

（有关详细信息，请参阅[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)）

因此，在您的示例`#blue?something=x`中是片段，并且没有查询字符串。如果正确形成，则在哪里：

```
www.example.com?something=x#blue 
```

你有`?something`作为查询和`#blue`片段。去测试：

```
var a = document.createElement("a");
a.href = "http://www.example.com#blue?something=x"

console.log(a.hash, a.search);

a.href = "http://www.example.com?something=x#blue"

console.log(a.hash, a.search); 
```

因此，首先您必须检查您发布的 URI 是否是您想要的，因为它们似乎格式不正确。

说，如果例子是正确的，你可以使用类似的东西：

```
function getFragment(s) {
   var v = s.match(/#([^?&]+)/);
   return v ? v[1] : "";
} 
```

或者：

```
function getFragment(s) {
    return [].concat(s.match(/#([^?&]+)/))[1] || "";
} 
```

但在我看来，可读性较差。

PS如果你真的只对字母感兴趣，你可以`[^?&]`用`[A-Za-z]`. 但是，通过这种方式，您将不会匹配 URL，例如 `www.example.com#blue12&something=x`两者`www.example.com#blue_and_green&something=x`。如果有这个意图，可以更换。否则，keep`[^?&]`会匹配所有不是`?`or的字符`&`，所以会更通用。

# iphone - 我可以在我的应用程序关闭时使用 GPS 获取位置吗？

> ID：15169504
> 
> 赞同：0
> 
> 时间：2013-03-02T01:11:03.757
> 
> 标签：iphone, ios, objective-c, gps, location

我在 iphone 上看到过名为“moves”的应用程序

当应用程序完全关闭且不在后台运行时，gps 在后台运行。

如何在应用程序关闭且不在后台工作时获取用户的位置并将其发送到应用程序？这怎么可能？

这样做的功能是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:03:17.100

可以在手机在后台运行时获取位置（谷歌地图应用程序会这样做），但是运行后台线程是一项特权，您必须在苹果的审查过程中证明这一点。

这是[Apple 提供的一些文档，](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)用于在后台运行的指南

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T08:28:40.963

您注册了重大变化定位服务。

根据[苹果文档](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW25)：

> 如果应用程序启动此服务然后终止，系统会在新位置可用时自动重新启动应用程序。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-02T02:30:21.217

对于未越狱的 iphone 上的应用程序，这是不可能的。再次检查你真正看到了什么。
应用程序可以在后台运行并获取位置。但是一个关闭的应用程序不能做任何事情，因为它没有运行。
也许您在状态栏中看到了 GPS 箭头，保持活动状态。但这会在几秒钟后消失，只要没有其他应用程序使用 GPS。

# objective-c - 如何阻止 NSSavePanel 在完成块后关闭？

> ID：15169505
> 
> 赞同：0
> 
> 时间：2013-03-02T01:11:08.547
> 
> 标签：objective-c, macos, cocoa, nssavepanel

如果保存文件出现问题，我想将错误警报显示为保存工作表上的工作表，就像覆盖提示一样。但是，保存面板在完成块完成后立即关闭，并带有错误警报。

```
[panel beginSheetModalForWindow:window
              completionHandler:^(NSInteger result) {
                  if (result == NSFileHandlingPanelOKButton) {
                      NSError *error;
                      // Do my saving here...
                      if (error)
                          [[NSAlert alertWithError:error] beginSheetModalForWindow:panel
                                                                     modalDelegate:nil
                                                                    didEndSelector:nil
                                                                       contextInfo:nil];
                  }
              }]; 
```

我可以取消在完成块中隐藏 NSSavePanel 吗？来自代表？从什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:41:21.423

我刚刚检查了 TextEdit 以及它在您所追求的情况下的作用——不是确认保存，而是保存*失败*——如下：

1.  保存面板卷起。
2.  该应用程序尝试保存但失败。（你的街区。）
3.  该应用程序在文档窗口中显示其错误表，而“保存”面板早已不复存在。

![TextEdit 的错误表截图](../Images/3c1488be74969451e0c285fd1940e469.png)

因此，如果您想要类似 Apple 的行为，请在文档窗口中显示警报表。

顺便说一句，您可能对`presentError:modalForWindow:delegate:didPresentSelector:contextInfo:`.

# java - 如何将字符串转换为 Java 中的运算符？

> ID：15169507
> 
> 赞同：4
> 
> 时间：2013-03-02T01:11:59.827
> 
> 标签：java, string, calculator

我正在尝试在*我的第一个程序*Java 中制作一个简单的基于文本的计算器，但我无法弄清楚如何将输入`String`转换为变量`opOne`。然后我会尝试`numOne`反对`numTwo`使用`opOne`作为操作员。代码如下：

```
import java.io.*;
import java.math.*;

public class ReadString {

   public static void main (String[] args) {

      System.out.print("Enter the first number: ");

      BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); 
      int numOne = 0 ;
      int numTwo = 0 ;
      String opOne = null;

      while(true){
      try {
          numOne = Integer.valueOf(br.readLine());
          break;
      } catch (IOException error) {
         System.out.println("error; try again.");
         System.exit(1);
      }
      catch (NumberFormatException nfe) {
          System.out.println("error;try again.");

      }

      }

      System.out.print("Enter the second number: ");

      while(true){
      try {

          numTwo = Integer.valueOf(br.readLine());
          break;
       } catch (IOException error2) {
          System.out.println("error");
          System.exit(1);
       } catch (NumberFormatException nfe) {
          System.out.println("error;try again.");

       }
      }

      System.out.println("What would you like to do with " + numOne + " and " + numTwo + "?");

      try {
          operator = br.readLine();
       } catch (IOException ioe) {
          System.out.println("error");
          System.exit(1);
       } catch (NumberFormatException nfe) {
          System.out.println("error");

       } 
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T01:17:00.713

最简单的方法是使用一系列`if-then-else`语句：

```
if ("+".equals(opOne)) {
    res = numOne + numTwo;
} else if ("-".equals(opOne)) {
    res = numOne - numTwo;
} ... 
```

一种高级方法是为您的操作员定义一个接口，并将实例放入`Map`容器中：

```
interface Operation {
    int calculate(int a, int b);
}

static final Map<String,Operation> opByName = new HashMap<String,Operation>();
static {
    opByName.put("+", new Operation() {
        public int calculate(int a, int b) {
            return a+b;
        }
    });
    opByName.put("-", new Operation() {
        public int calculate(int a, int b) {
            return a-b;
        }
    });
    opByName.put("*", new Operation() {
        public int calculate(int a, int b) {
            return a*b;
        }
    });
    opByName.put("/", new Operation() {
        public int calculate(int a, int b) {
            return a/b;
        }
    });
} 
```

使用这样初始化的地图，您可以执行如下计算：

```
int res = opByName.get(opOne).calculate(numOne, numTwo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:15:19.667

计算机本身不知道`operator`（人类语言）是什么，因此您需要告诉计算机这样做。

```
String opOne;

try {
    opOne = br.readLine();
} catch (IOException ioe) {
    System.out.println("error");
    System.exit(1);
}

switch (opOne) {  //Note: String in switch is possible only from Java 7, check your version
     "+": System.out.println('Result: ' + (numOne + numTwo)); break; 
     "-": System.out.println('Result: ' + (numOne - numTwo)); break;
     // and so on...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T01:26:46.397

您无法将 Java 字符串转换为运算符。它不是 Java 数据类型。

```
 double Calculate(String opOne, double numOne, double numTwo) {  
      if (opOne.equals("+"))  
        return numOne + numTwo;  
      else if (opOne.equals("-"))  
        return numOne - numTwo;  
      else if (opOne.equals("*"))  
        return numOne * numTwo; 
      else if (opOne.equals("/"))  
        return numOne / numTwo;   
    } 
```

# java - 将 .xls 文件导入数据库 Jboss

> ID：15169508
> 
> 赞同：0
> 
> 时间：2013-03-02T01:12:28.483
> 
> 标签：java, mysql, jboss7.x

我正在使用 JBoss 7 构建一个 Web 应用程序。我将获取 .xls 格式的数据集，我想将其放入服务器上的文件夹中。反过来，这些 .xls 文件将被导入到 jboss 的数据库中。文件夹中应该有某种自动检测功能，以便在将 .xls 文件放入其中时，它会自动导入数据库。请有人告诉我有哪些工具/技术可用于将 .xls 文件导入 JBoss 的数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:05:10.153

您可以将其分为几个任务：

*   决定你真的想直接在 JBoss 内部使用 a`Service`或使用连接到`SessionBean`.
*   检测目录的变化（例如使用 Java7 和[WatchService](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)
*   读取 XLS 文件（例如使用[Apache POI - Microsoft 文档的 Java API](http://poi.apache.org)
*   将 XLS 文件的内容映射到域模型的实体并将它们存储到数据库中。

# db4o - db4o：我们怎样才能只获取一个对象的数据？

> ID：15169513
> 
> 赞同：0
> 
> 时间：2013-03-02T01:13:21.820
> 
> 标签：db4o

DB4o 用户如何只取回一个对象的数据？

（这类似于仅获取传统关系数据库表的一行的数据。）

使用 DB4o，我只知道如何为一类对象取回数据，而不仅仅是一个唯一的对象实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:20:28.467

只需查询对象并从结果中获取第一项（与关系数据库相同）

通过 Guid ID 获取它：

```
using (IObjectContainer session = this.GetNewSession())
{
    Dummy result = (from Dummy item in session
                    where item.Id == Guid.Parse("....")
                    select item).FirstOrDefault()
} 
```

如果项目不存在或找到的对象，结果将为 null

另一种选择是直接通过内部 ID 获取它，例如（甚至是 UUID）：

```
long id = ....;
using (IObjectContainer session = this.GetNewSession())
{
    Dummy result = (Dummy)session.Ext().GetByID(id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:48:37.973

我已经回答了我自己的问题（我相信）：

解决方案#1：

```
public List<Object> getListOfObjects(final Object o){

    List<Object> result = db.query(new Predicate<Object>(){

      @Override
      public boolean match (Object arg0){

         if(arg0.equals(o)){
            return true;
          }
        else{
            return false;
         }
    });

    return result;
  } 
```

解决方案#2：

```
public ObjectSet<Class<?>> getListOfObjects(Object o){

      Query q = db.query();
      q.constrain(o);
      ObjectSet<Class<?>> set = q.execute();

  return set;
} 
```

也许有人知道这些解决方案中的一个是否比另一个更好，或者其他什么。

# php - 使用另一个 PHP 文件编辑 PHP 文件并在其顶部添加一行

> ID：15169514
> 
> 赞同：1
> 
> 时间：2013-03-02T01:13:24.063
> 
> 标签：php, dynamic, line, fopen, updates

我有一个 PHP 文件，我想随时向它动态添加行。

假设我有 foo.php 里面有这些：

```
<?php

echo "foo!";

?> 
```

但我希望能够添加我在另一个文件中指定的行作为要添加到其顶部的变量并保存旧内容，如下所示：

```
<?php

echo "bar!";

echo "foo!";

?> 
```

每当我运行添加顶行的其他文件时，无论如何我都希望它添加这一行：

```
echo "bar!"; 
```

所以如果我运行它两次，文件将是这样的：

```
<?php

echo "bar!";

echo "bar!";

echo "foo!";

?> 
```

我知道安全问题并且文件将受到保护，我只是不知道最好的方法是什么，fopen？卷曲？请帮我找出最好的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:29:28.497

```
$a = explode("\r\n", file_get_contents('file')); 
array_splice($a, 1, 0, array('echo \'whatever\';'));
$a = implode("\r\n", $a);
file_put_contents('file', $a); 
```

更简单：

```
$a="<?php\r\necho 'whatev';\r\n".substr($a,7); 
```

# asp.net-mvc - 具有模型绑定的淘汰赛 JS/MVC 安全性

> ID：15169515
> 
> 赞同：1
> 
> 时间：2013-03-02T01:13:38.887
> 
> 标签：asp.net-mvc, security, razor, knockout.js

我正在开发一个同时使用 MVC 和 KnockoutJS 的项目，我想知道如何最好地为站点提供安全性。

这是我的问题。

我允许使用 Razor 创建视图，并且我正在使用 Knockout 通过 JQuery 对话框为许多功能提供动力。我有一个主视图模型，如下所示：

```
my.MasterViewModel = function () {
    var
    CatalogsViewModel = ko.observable(null)
    BulkUploadViewModel = ko.observable(null),
    ExploitationTypeViewModel = ko.observable(null),
    ExploitationViewModel = ko.observable(null),
    InviteSongWriterViewModel = ko.observable(null),
    ManageCollaboratorsViewModel = ko.observable(null),
    ManageSongwriterViewModel = ko.observable(null),
    ManageSongViewModel = ko.observable(null),
    ProViewModel = ko.observable(null),
    SongsViewModel = ko.observable(null),
    TagsViewModel = ko.observable(null),
    TweaksViewModel = ko.observable(null),
    NotificationsViewModel = ko.observable(new my.notificationsviewmodel());

    return {
        CatalogsViewModel: CatalogsViewModel,
        BulkUploadViewModel: BulkUploadViewModel,
        ExploitationTypeViewModel: ExploitationTypeViewModel,
        ExploitationViewModel: ExploitationViewModel,
        InviteSongWriterViewModel: InviteSongWriterViewModel,
        ManageCollaboratorsViewModel: ManageCollaboratorsViewModel,
        ManageSongwriterViewModel: ManageSongwriterViewModel,
        ManageSongViewModel: ManageSongViewModel,
        ProViewModel: ProViewModel,
        SongsViewModel: SongsViewModel,
        TagsViewModel: TagsViewModel,
        TweaksViewModel: TweaksViewModel,
        NotificationsViewModel: NotificationsViewModel
    };
}(); 
```

然后在我的点击处理程序中实例化所需的视图模型，一切都很好，效果很好！

我遇到的问题是我的 Razor 语法中有以下内容：

```
<li><a href="#" data-songid="@Model.Song.Id" class="icon-margin-left manage-song">Edit Song</a></li> 
```

在我的点击处理程序中，我读取了 data-songid 值并使用敲除从服务器加载数据。这也很有效，但是，在 chrome、firebug 或任何数量的开发工具中更改 data-songid 值并不难。更改该值后，用户可以单击链接并编辑其他实体...：S

我有更好的方法吗？我非常担心这是我的应用程序中的一个巨大的安全漏洞。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:44:37.130

假设您已经在您的网站上应用了 Asp.Net 身份验证，那么来自 Knockout 的 Ajax 请求应该包含 Asp.Net 身份验证 cookie（除非请求是跨域的），因此您可以在返回数据之前应用服务器端身份验证/授权。正如 Alex 指出的那样，这是确保您的用户只能修改自己的数据的必要方法，也是唯一的方法。

正如您所说，这不会阻止用户更改 ID，但会阻止他们修改不允许修改的数据。通常我认为这已经足够了，因为您的用户只能修改他们自己的数据，而这些数据可能他们无论如何都可以编辑？

如果您确实需要确保用户没有更改值，那么您可以在将其输出到 Razor 页面之前对 ID 进行加盐并生成服务器端摘要。然后可以使用它来验证在 Ajax 请求中发回该值时是否未修改该值。这篇文章给出了一个使用这种技术来防篡改 URL 查询字符串的示例，但可以很容易地适应像你这样的场景：http: [//www.pradyblog.com/index.php/2012/08/20/creating-tamper-证明 url-in-asp-net-a-way-to-prevent-spoofing-and-forged-http-requests/](http://www.pradyblog.com/index.php/2012/08/20/creating-tamper-proof-url-in-asp-net-a-way-to-prevent-spoofing-and-forged-http-requests/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:36:38.627

更好的方法是检查服务器端的权限。

没错，在浏览器开发工具中调整 JS 变量很容易。伪造发送到服务器的整个 HTTP 请求也很容易。

规则是永远不要相信用户的输入，并且在后端处理请求时始终验证该特定用户是否有权编辑该特定歌曲。

# android - Android JNI 应用程序：从共享对象记录

> ID：15169519
> 
> 赞同：0
> 
> 时间：2013-03-02T01:14:36.643
> 
> 标签：android, android-ndk, java-native-interface

我在 Android 上构建了一个 JNI 应用程序，并且在共享对象中有一些代码。不幸的是，我的共享对象给了我错误，我想检查错误发生在哪里。我想添加日志行来做同样的事情。但是，如果我使用 __android_log_write() 进行日志记录，它不会出现在 logcat 中。我还有什么其他选择，或者有没有办法做到这一点？如果这个问题已经回答了，请指向我的链接。我的搜索没有给我带来相关的结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:13:31.097

我在本机代码中编写了一个辅助类来轻松记录日志。每种详细类型都有一个宏。这是 Log.h 文件：

```
#ifndef LOG_H_
#define LOG_H_

#include <android/log.h>

#define LOGD(LOG_TAG, ...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)
#define LOGI(LOG_TAG, ...) __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define LOGV(LOG_TAG, ...) __android_log_print(ANDROID_LOG_VERBOSE, LOG_TAG, __VA_ARGS__)
#define LOGW(LOG_TAG, ...) __android_log_print(ANDROID_LOG_WARN, LOG_TAG, __VA_ARGS__)
#define LOGE(LOG_TAG, ...) __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)

#endif /* LOG_H_ */ 
```

然后你可以在你的类中包含“Log.h”并以这种方式使用它：

```
LOGI("YourClassTag","let's print some stuff: %i, %s", 4, "I'm a string"); 
```

# c# - Windows Phone 8 通信

> ID：15169521
> 
> 赞同：0
> 
> 时间：2013-03-02T01:14:58.903
> 
> 标签：c#, .net, wcf, windows-phone-8

我对 windows phone 8 通信有各种问题，希望有人能够澄清。

1.  在 wp8 设备和服务器之间进行通信的最佳方法是什么？WCF、OData、Json、Webclient 还是其他？有谁知道推荐标准是什么？

2.  基于 1，会使用 SSL 或类似的工作吗？如果 SSL 不是一个选项，您如何通过网络加密数据。

3.  关于如何使用 Async Await 使用 wcf（或其他）的示例？我正在处理的示例，虽然并不熟悉，但我正在使用 wcf，但我不知道应该如何去做。假设以下基本场景：

    a) 为用户提供登录页面。然后用户单击登录。b）首先通过调用 .Open 打开代理（我应该调用 openasync 吗？）。c) 进行 wcf 调用以调用 .LogonUser（我应该调用 LogonUserAsync 吗？）。d) 然后通过调用 .Close 关闭代理（我应该调用 CloseAsync 吗？）。

我再次感到困惑，好像我不使用异步调用一样，感觉不对，以为可能没问题。有人可以证实这一点吗？其次，如果我使用异步，我应该从 OpenCompleted 事件中调用 .LogonUser，然后在 LogonUserCompleted 中调用 .Close 吗？看起来凌乱而肮脏的编码？再一次，我可以完全关闭，但感觉不对？

是否有任何好的示例提供并逐步解释应该使用的正确通信协议以及如何使用它。我发现的大多数 wcf 示例似乎从未调用 .Open 和 .Close 方法，我认为这是必须的，这可能是它被省略的原因，但同样，当你不知道自己在做什么时，这并不明显.

wcf（或任何其他）是否应始终为每次调用（即登录、搜索等）调用打开和关闭...而不是在打开应用程序并重新使用同一对象时为整个会话保持打开状态？

感谢并为一篇文章中的许多问题感到抱歉。

谢谢。

T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:49:20.567

#1 没有经验法则来决定哪个是最好的方法：WCF、OData、Json，我认为应该使用什么应该由需求决定。在 Windows Phone 中，您可以使用其中的任何一个。

#2 如果您不使用 SSL，那么您可以考虑私钥/公钥加密

#3 我不确定是否应该真正使用 openasync()。在我的一个项目中，我使用了 WCF 服务而不调用 openasync()。您应该使用 Aync 方法。

# functional-programming - 如何为 OCaml `Toplevel` 打开`exception stack trace`？

> ID：15169524
> 
> 赞同：7
> 
> 时间：2013-03-02T01:15:14.187
> 
> 标签：functional-programming, ocaml

在 Toplevel 中，如何打开异常的堆栈跟踪？

简单的问题，不知道怎么详细问。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T09:28:23.517

这过去不容易实现（只有在顶层之外编译的代码才支持回溯），但自从 OCaml 4.03.0（2016 年 4 月发布）以来，顶层支持回溯，这要归功于 whitequark 和 Jake Donham 的贡献。

只需运行顶层`OCAMLRUNPARAM=b ocaml`以获取回溯。当然，您想要从顶层链接和使用的编译代码应该被编译`-g`以包含回溯信息——否则您将只能看到调用从顶层定义的函数的调用堆栈部分。

# java - 使用 matrix[0].length 表示空二维数组的行长

> ID：15169525
> 
> 赞同：1
> 
> 时间：2013-03-02T01:15:14.827
> 
> 标签：java, arrays

例如：二维空数组：`[]`

我可以在这里使用`matrix[0].length`吗？

这似乎会导致 IndexOutofBoundException。谁能向我解释为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T01:18:30.820

可以像这样测量二维数组：

```
int a[][];
int d1 = a.length;
int d2 = d1 > 0 ? a[0].length: 0; 
```

请注意，您**不能**使用`a[0]`if `a.length == 0`。

请记住，仅仅因为`a[0].length == n`并不一定意味着`a[1].length == n`因为在 Java 中每个数组元素都可以有任意长度。

# clojure - 如何编写具有递增 id 的 clojure 工厂函数？

> ID：15169528
> 
> 赞同：0
> 
> 时间：2013-03-02T01:15:25.057
> 
> 标签：clojure

我想写这样的东西（不工作）：

```
(defn new-connection []
  (let [c (atom 0)]
    {:id #(swap! c inc)
    :writebuf (ByteBuffer/allocate 8096)
    :readbuf (ByteBuffer/allocate 8096)})) 
```

这样我就可以使用（新连接）获得增量标识的地图，我需要单独定义计数器还是有办法将它与这个函数内联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:19:39.927

这是一个非常普遍的问题。如果你稍微分解一下，你会发现你需要三样东西：1）创建新计数器的东西 2）连接计数器 3）接受 id 作为参数而不是调用计数器本身的新连接函数，因为这使得这个函数更一般。

```
(defn new-counter []
  (partial apply swap! (atom 0) inc []))

(def connection-counter (new-counter))

(defn new-connection [id]
    {:id id
    :writebuf (ByteBuffer/allocate 8096)
    :readbuf (ByteBuffer/allocate 8096)}) 
```

现在你可以像这样使用它：

```
(new-connection (connection-counter)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:38:14.863

您可以使用`closure`机制“内联”计数器：

```
(let [c (atom 0)]
  (defn new-connection []
    {:id (swap! c inc)
     :writebuf :ByteBuffer
     :readbuf :ByteBuffer})
  (defn get-counter []
    @c))

(get-counter)
=> 0

(new-connection)
=> {:id 1, :writebuf :ByteBuffer, :readbuf :ByteBuffer}

(new-connection)
=> {:id 2, :writebuf :ByteBuffer, :readbuf :ByteBuffer}

(get-counter)
=> 2 
```

或者，如果您需要控制计数器起始值：

```
(defn create-connection-fn [init-counter-value]
  (let [c (atom init-counter-value)]
    (fn []
      {:id (swap! c inc)
       :writebuf :ByteBuffer
       :readbuf :ByteBuffer})))

(def new-connection (create-connection-fn 10))

(new-connection)
=> {:id 11, :writebuf :ByteBuffer, :readbuf :ByteBuffer}

(new-connection)
=> {:id 12, :writebuf :ByteBuffer, :readbuf :ByteBuffer} 
```

**编辑。**如果没有理由“隐藏”它，我建议您将计数器定义为分隔变量。

# vb.net - 如何在 vb.net 中使用 savefiledialog

> ID：15169531
> 
> 赞同：5
> 
> 时间：2013-03-02T01:15:33.580
> 
> 标签：vb.net, savefiledialog, textedit

我有一个名为 TextEditPro 的程序，我刚刚启动它，我遇到了问题。

当我有点击另存为的代码时......我不知道如何使用保存文件对话框，所以当你点击另存为时它会弹出！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T01:54:44.497

学习使用[MSDN](http://msdn.microsoft.com) -[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)有`SaveFileDialog`一个示例

```
Private Sub button1_Click(sender As Object, e As System.EventArgs)
    Dim myStream As Stream
    Dim saveFileDialog1 As New SaveFileDialog()

    saveFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*"
    saveFileDialog1.FilterIndex = 2
    saveFileDialog1.RestoreDirectory = True 

    If saveFileDialog1.ShowDialog() = DialogResult.OK Then
        myStream = saveFileDialog1.OpenFile()
        If (myStream IsNot Nothing) Then 
            ' Code to write the stream goes here.
            myStream.Close()
        End If 
    End If 
End Sub 
```

# sql - 根据提供的值序列添加行号

> ID：15169536
> 
> 赞同：3
> 
> 时间：2013-03-02T01:16:12.680
> 
> 标签：sql, sql-server-2008, row-number

```
SELECT Code, Value FROM dbo.Sample 
```

输出：

```
 Code     Value
 Alpha    Pig
 Beta     Horse
 Charlie  Dog
 Delta    Cat
 Echo     Fish 
```

我想通过指定代码列表来添加序列列，并根据 IN 子句中指定的顺序对列表进行排序。

```
SELECT Code, Value FROM dbo.Sample
WHERE Code in ('Beta', 'Echo', 'Alpha') 
```

如果这样更容易，我可以在顶部声明一个变量来指定代码。

关键是我想根据我指定的顺序添加行号。

输出：

```
 Row   Code    Value
  1    Beta    Horse
  2    Echo    Fish
  3    Alpha   Pig 
```

* * *

编辑：之后我意识到我的代码都是固定长度的，这对它的完成方式有很大的影响。我将下面的答案标记为正确，但我的解决方案是使用逗号分隔的值字符串：

```
DECLARE @CodeList TABLE (Seq int, Code nchar(3))
DECLARE @CodeSequence varchar(255)
DECLARE @ThisCode char(3)
DECLARE @Codes int
SET @Codes = 0

-- string of comma-separated codes
SET @CodeSequence = 'ZZZ,ABC,FGH,YYY,BBB,CCC'

----loop through and create index and populate @CodeList
WHILE @Codes*4 < LEN(@CodeSequence)
BEGIN
    SET @ThisCode = SUBSTRING(@CodeSequence,@Codes*4+1,3)
    SET @Codes = @Codes + 1
    INSERT @CodeList (Seq, Code) VALUES (@Codes, @ThisCode)
END

SELECT Seq, Code from @CodeList 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T01:45:50.920

这是我见过的唯一两种准确工作的方法：

第一次使用`CHARINDEX`（类似于 Gordon 的，但我认为 WHERE 语句使用更准确`IN`）：

```
SELECT *
FROM Sample
WHERE Code IN ('Beta','Echo','Alpha')
ORDER BY CHARINDEX(Code+',','Beta,Echo,Alpha,') 
```

将逗号与代码连接应确保子匹配不会影响结果。

或者，您可以使用以下`CASE`语句：

```
SELECT *
FROM Sample
WHERE Code in ('Beta','Echo','Alpha')
ORDER BY CASE 
  WHEN Code = 'Beta' THEN 1
  WHEN Code = 'Echo' THEN 2
  WHEN Code = 'Alpha' THEN 3
END 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/e7e31/1)

更新了带有子匹配的[演示。](http://sqlfiddle.com/#!3/c5431/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T01:35:28.030

这是任何长度代码列表的解决方案。创建具有自增字段和代码的表。按给定顺序插入。加入表格并按...排序

一些细节。请阅读[此](http://dinushasblog.blogspot.com/2010/12/split-strings-in-mysql.html)。你会发现那里有从字符串（用逗号分隔）创建具有自动增量字段的表的函数，即

```
mysql> call insertEngineer('dinusha,nuwan,nirosh');
Query OK, 1 row affected (0.12 sec)

mysql> select * from engineer;
+----+----------+
| ID | NAME     |
+----+----------+
|  1 | dinusha  |
|  2 | nuwan    |
|  3 | nirosh   |
+----+----------+ 
```

接下来将您的示例表与上述结果连接起来。总帐

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T12:06:55.920

您也可以将值用作表源

```
SELECT Row, Code, Value
FROM [Sample] s JOIN (       
                      SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS Row, Match
                      FROM (VALUES ('Beta'), 
                                   ('Echo'), 
                                   ('Alpha'))
                      x (Match)                             
                      ) o ON s.Code = o.Match
ORDER BY Row 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d7854/1)上的演示[](http://sqlfiddle.com/#!3/d7854/1)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T01:22:27.543

我可能很想使用字符串函数来做到这一点：

```
declare @list varchar(8000) = 'Beta,Echo,Alpha';

with Sample as (
    select 'Alpha' as Code, 'Pig' as Value union all
    select 'Beta', 'Horse' union all
    select 'Charlie', 'Dog' union all
    select 'Delta', 'Cat' union all
    select 'Echo', 'Fish'
)
select * from Sample
where charindex(Code, @list) > 0
order by charindex(Code, @list) 
```

如果您担心子匹配，只需执行“分隔符”技巧：

```
where @list like '%,'+Code+',%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T05:43:06.730

> 只需对上面所做的进行一点更改以包括行号。

```
SELECT  CASE   
          WHEN Code = 'BetaBeta' THEN 1  
          WHEN Code = 'Beta' THEN 2  
          WHEN Code = 'Alpha' THEN 3  
        END CodeOrder,  
        *  
FROM Sample  
WHERE Code in ('BetaBeta','Beta','Alpha')  
ORDER BY CodeOrder 
```

> [SQL 小提琴演示](http://sqlfiddle.com/#!3/9fc88/2)**

# c++ - 看似相同的代码并没有给出相同的结果

> ID：15169541
> 
> 赞同：0
> 
> 时间：2013-03-02T01:16:47.750
> 
> 标签：c++, winapi

在我的课堂上，我编写了以下代码来处理窗口的灰色区域。我尝试不处理框架，因为框架有时会改变样式并且会导致意外的大小调整行为。预期的行为是它返回窗口最左上角的灰色像素。

```
POINT Dialog::GetPosition ( void ) const
...
    RECT rcPos, rcFrame;
    SetRectEmpty(&rcFrame);
    AdjustWindowRectEx(&rcFrame, this->Style, FALSE, this->ExtendedStyle);
    GetWindowRect(this->Handle, &rcPos);
    OffsetRect(&rcPos, -rcFrame.left, -rcFrame.top);
    return reinterpret_cast<LPPOINT>(&rcPos)[0]; 
```

然后我正在优化我的课程并将代码减少到以下（我*认为*应该是一样的）：

```
POINT Dialog::GetPosition ( void ) const
...
    RECT rcPos;
    GetWindowRect(this->Handle, &rcPos);
    AdjustWindowRectEx(&rcPos, this->Style, FALSE, this->ExtendedStyle);
    return reinterpret_cast<LPPOINT>(&rcPos)[0]; 
```

不幸的是，事实并非如此，我不知道发生了什么，也不知道为什么上述两者有任何不同。我已经在纸上多次阅读了它，但我不明白为什么使用两个不同的矩形并偏移它们与将帧偏移直接应用于原始矩形有什么不同。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:31:19.887

你的迹象很混乱。第一个例子应该产生负数`rcFrame.left`，`rcFrame.top`但是你从位置中减去它们，给出一个正偏移量。第二个例子应该是正确的。

# c# - 如何从父页面调用 iframe 中的脚本？

> ID：15169543
> 
> 赞同：4
> 
> 时间：2013-03-02T01:16:56.717
> 
> 标签：c#, javascript, asp.net, iframe

我正在尝试从后面的代码从父页面调用 IFrame 中的脚本。我用来调用函数的 C#：

```
protected void Page_Load(object sender, EventArgs e)
{
    ...
    string scr = "document.getElementById('mapframe').contentWindow.addPoint(0, 0);"
    ClientScript.RegisterStartupScript(GetType(), Guid.NewGuid().ToString(), scr , true);
} 
```

iFrame 的 HTML：

```
 <iframe name="mapframe" id="mapframe" src="Map.html" style="width:100%;height:360px;"></iframe> 
```

和 IFrame 中的 Javascript：

```
 function addPoint(lat, lon) {
              var myLatlng = new google.maps.LatLng(lat, lon);
              var marker = new google.maps.Marker({
                  position: myLatlng,
                  map: map,
                  title: "Hit"
              });
          } 
```

但是，这会导致此错误：“无法获取未定义或空引用的属性 'addPoint'”。是什么导致了这个错误？我已检查以确保 contentWindow 不为空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T01:54:45.293

当您尝试调用该函数时，问题可能是您的 iframe 未加载

尝试以下

```
document.getElementById('mapframe').onload = function() {
    // I prefer frames.mapFrame.addPoint();
    document.getElementById('mapframe').contentWindow.addPoint(0,0);
} 
```

甚至

```
<iframe 
     name="mapframe" 
     id="mapframe" 
     src="Map.html" 
     style="width:100%;height:360px;" 
     onload="this.contentWindow.addPoint(0,0)"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:01:24.317

一旦加载了 iframe，就可以调用函数添加点。或者你可以把这个函数的调用放在`onload`事件中

# php - 如何获取 symfony 2 表单以从动态值返回实体

> ID：15169545
> 
> 赞同：0
> 
> 时间：2013-03-02T01:17:02.040
> 
> 标签：php, symfony, doctrine-orm, symfony-forms

好的，这是我正在尝试做的事情的快速概述。我有一个与“ClientDomain”实体有关系的“Client”实体。我需要一个表格来显示给定客户端的所有 ClientDomain 列表。在控制器中，我知道我需要过滤哪些客户端，但我不确定如何将该信息传递给 formBuilder。

继承人我到目前为止：

```
//src/NameSpace/ClientBundle/Entity/Client.php
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Client{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $client_id;

/**
 * @ORM\Column(type="string")
 */
protected $name;

/**
 * @ORM\OneToMany(targetEntity="ClientDomain", mappedBy="client")
 */
protected $domains;

...
} 
```

和形式：

```
//src/LG/ClientBundle/Form/ClientDomainSelectionForm.php
namespace LG\ProjectBundle\Form\Projects;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class ClientDomainSelectionForm extends AbstractType {

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('client_domain', 'entity', array(
            'class' => 'LG\ClientBundle\Entity\ClientDomain',
            'query_builder'=> function(EntityRepository $er) {
                return $er->createQueryBuilder('cd')
                /* NEEDS TO FIND DOMAINS BY CLIENT X */
            },
            'property' => 'domain',
            'label' => 'Domain: '
        ));
    }
} 
```

最后是控制器：

```
//src/LG/ClientBundle/Controller/DomainSelectorController.php
namespace LG/ClientBundle/Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template; 

use LG\ClientBundle\Entity\Client;
use LG\ClientBundle\Entity\ClientDomain;
use LG\ClientBundle\Entity\ClientActiveDomain;
use LG\ClientBundle\Form\ClientDomainSelectionForm;

/**
 * @Route("")
 */
class DomainSelectorController extends Controller{

    /**
     * @Route("/client/{client_slug}/select-domain", name="lg.client.clientdomainselection.selectclient")
     * @Template
     */
    public function selectDomainAction(Request $request, Client $client){
        $activeDomain = new ClientActiveDomain();
        $form = $this->createForm(new ClientDomainSelectionForm(), $activeDomain );
        if ($request->isMethod('POST')) {
            $form->bind($request);
            if ($form->isValid()) {
                $em = $this->getDoctrine()->getEntityManager();
                $em->persist($activeDomain );
                $em->flush();
                return $this->redirect(/*huge long url*/);
            }
        }
        return array(
            'form' => $form->createView(),
        );
    }

} 
```

如您所见，我可以访问控制器中的客户端实体，我只是不确定如何将其提供给表单构建器，以便它只会返回当前客户端的域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:54:34.563

我找到了答案，你只需要在表单中添加一个构造函数并从控制器传递客户端，如下所示：

```
//src/LG/ClientBundle/Form/ClientDomainSelectionForm.php
namespace LG\ProjectBundle\Form\Projects;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class ClientDomainSelectionForm extends AbstractType {

    protected $client;

    public function __construct(Client $client) {
        $this->client = $client;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $client = $this->client;
        $builder->add('client_domain', 'entity', array(
            'class' => 'LG\ClientBundle\Entity\ClientDomain',
            'query_builder'=> function(\Doctrine\ORM\EntityRepository $er) use ($client) {
                return $er->createQueryBuilder('cd')
                    ->where('cd.client = :client')
                    ->orderBy('cd.domain', 'ASC')
                    ->setParameter('client',$client->getClientId());
            },
            'property' => 'domain',
            'label' => 'Domain: '
        ));
    }
} 
```

然后在控制器中：

```
//src/LG/ClientBundle/Controller/DomainSelectorController.php

...

public function selectDomainAction(Request $request, Client $client){

    ...

    $form = $this->createForm(new ClientDomainSelectionForm($client), $activeDomain );

    ...
}

... 
```

# iphone - 滚动条不工作（iphone）

> ID：15169546
> 
> 赞同：0
> 
> 时间：2013-03-02T01:17:03.983
> 
> 标签：iphone, uiscrollview, textfield

我在视图中添加了一个滚动视图，如下所示：

```
 _scrollView = [[UIScrollView alloc] initWithFrame:self.view.frame];
            _scrollView.contentSize = CGSizeMake(320, 600);
            [_scrollView setUserInteractionEnabled:TRUE];
            [_scrollView setScrollEnabled:TRUE];
[container addSubview:self.scrollView]; 
```

但是滚动条显示在屏幕上，我可以滚动它，但里面的 texfields 不起作用。我该如何解决这个问题？

```
- (UIView *)Form
{
    if (!_Form) {
        CGRect frame = CGRectMake(0.0, kSignUpViewVisibleHeight, kDeviceWidth, 310.0);
        UIView *container = [[UIView alloc] initWithFrame:frame];

        _scrollView = [[UIScrollView alloc] initWithFrame:self.view.frame];
        _scrollView.contentSize = CGSizeMake(320, 600);
        [_scrollView setUserInteractionEnabled:TRUE];
        [_scrollView setScrollEnabled:TRUE];

        CGFloat y = 15.0;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        UITextField *field = [[UITextField alloc] initWithFrame:frame];
        [self.appDel.styleManager decorateTextField:field];
        field.placeholder = @"Email*";
        field.keyboardType = UIKeyboardTypeEmailAddress;
        [container addSubview:field];
        self.FormEmail = field;
        self.FormEmail.delegate = self;
        self.FormEmail.autocapitalizationType = UITextAutocapitalizationTypeNone;
        self.FormEmail.clearButtonMode = UITextFieldViewModeAlways;

        CGFloat spacing = 8.0;
        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];
        [self.appDel.styleManager decorateTextField:field];
        field.placeholder = @"Password*";
        field.secureTextEntry = YES;
        [container addSubview:field];
        self.FormPassword = field;
        self.FormPassword.delegate = self;
        self.FormPassword.autocapitalizationType = UITextAutocapitalizationTypeNone;
        self.FormPassword.clearButtonMode = UITextFieldViewModeAlways;

        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];
        [self.appDel.styleManager decorateTextField:field];
        field.placeholder = @"Confirm Password*";
        field.secureTextEntry = YES;
        [container addSubview:field];
        self.FormConfirmPassword = field;
        self.FormConfirmPassword.delegate = self;
        self.FormConfirmPassword.autocapitalizationType = UITextAutocapitalizationTypeNone;
        self.FormConfirmPassword.clearButtonMode = UITextFieldViewModeAlways;

        y = frame.origin.y + kDefaultTextFieldHeight + 16.0;
        CGFloat w = (kDeviceWidth - 2 * 15.0) / 2;
        frame = CGRectMake(15.0, y, w - 2.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];
        [self.appDel.styleManager decorateTextField:field];
        field.placeholder = @"First Name*";
        [container addSubview:field];
        self.FirstName = field;
        self.FirstName.delegate = self;
        self.FirstName.clearButtonMode =UITextFieldViewModeAlways;

        frame = CGRectMake(15.0 + w + 2.0, y, w - 2.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];
        [self.appDel.styleManager decorateTextField:field];
        field.placeholder = @"Last Name*";
        [container addSubview:field];
        self.FormLastName = field;
        self.FormLastName.delegate = self;
        self.FormLastName.clearButtonMode =UITextFieldViewModeAlways;

        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, w, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];
        [self.appDel.styleManager decorateTextField:field];
        field.placeholder = @"Birthday";
        [container addSubview:field];
        self.FormBirthday = field;
        self.FormBirthday.delegate = self;

        frame = CGRectMake(15.0 + w + 5.0, y, w - 5.0, kDefaultTextFieldHeight);
        SegmentControl *gender = [[SegmentControl alloc] initWithFrame:frame items:@[@"Boy", @"Girl"]];
        [container addSubview:gender];
        self.Formtype = gender;

        y = frame.origin.y + kDefaultTextFieldHeight + 20.0;
        frame = CGRectMake((container.frame.size.width - 192.0) / 2, y, 192.0, 33.0);
        UIButton *signUpButton = [UIButton buttonWithType:UIButtonTypeCustom];
        signUpButton.frame = frame;
        [signUpButton setTitle:@"Sign Up" forState:UIControlStateNormal];
        [self.appDel.styleManager decorateButton:signUpButton];
        [container addSubview:signUpButton];

        y = frame.origin.y + kDefaultTextFieldHeight + 8.0;
        frame = CGRectMake((container.frame.size.width - 192.0) / 2, y, 192.0, 34.0);
        UIButton *cancelButton = [UIButton buttonWithType:UIButtonTypeCustom];
        cancelButton.frame = frame;
        [cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
        [self.appDel.styleManager decorateButton:cancelButton];
        [cancelButton addTarget:self action:@selector(cancelRegistration:) forControlEvents:UIControlEventTouchUpInside];
        [container addSubview:cancelButton];
        [container addSubview:self.scrollView];

        _Form = container;
    }
    return _Form;
} 
```

我添加了需要滚动的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:53:47.760

滚动视图仅滚动其子视图；您应该将各种文本字段添加为的子视图`_scrollView`而不是`container`.

# ruby - 将哈希的键和值转换为字符串

> ID：15169547
> 
> 赞同：1
> 
> 时间：2013-03-02T01:17:10.757
> 
> 标签：ruby

我需要将哈希的值和键转换为字符串，以便正确地将其准备为`Net::HTTP.post_form`. 例如：

我需要转换

```
{:x => [1,2,3,4]} 
```

至

```
{"x"=>"[1, 2, 3, 4]"} 
```

将符号转换为字符串并且数组用引号括起来很重要。

*   `to_json`返回一个字符串并不能解决我的问题；我需要一个哈希作为回报。
*   哈希可能有更多的键和值，所以我不能`to_s`对每个键或值进行硬编码。

我该如何执行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T01:27:04.007

那这个呢

```
Hash[ { :x => [1,2,3,4] }.map { |k, v| [k.to_s, v.to_s] } ]
#=> {"x"=>"[1, 2, 3, 4]"} 
```

或者在 Ruby >= 2.1

```
{ :x => [1,2,3,4] }.map { |k, v| [k.to_s, v.to_s] }.to_h
#=> {"x"=>"[1, 2, 3, 4]"} 
```

或者在 Ruby >= 2.6

```
{ :x => [1,2,3,4] }.to_h { |k, v| [k.to_s, v.to_s] }
#=> {"x"=>"[1, 2, 3, 4]"} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T05:13:25.513

不要重新发明一个完善的轮子。相反，Ruby 的[URI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)是一个很好的使用工具：

```
require 'uri'

uri = URI.parse('http://www.example.com')
uri.query = URI.encode_www_form( {:x => [1,2,3,4]} )
uri.to_s # => "http://www.example.com?x=1&x=2&x=3&x=4" 
```

如果您只需要查询值：

```
query = URI.encode_www_form( {:x => [1,2,3,4]} ) # => "x=1&x=2&x=3&x=4" 
```

* * *

如果您打算通过 Net::HTTP 发送它，这听起来真的像是在重新发明轮子。将哈希序列化为`{"x"=>"[1, 2, 3, 4]"}`将限制您的代码仅使用您的代码。使用 JSON、YAML 或 XML 将使您的生活更轻松，您的代码更便携。

JSON 可以很容易地在机器之间移动哈希，在 Ruby/Python/Java/Perl 等语言之间，无论是浏览器到服务器，还是客户端到服务器：

```
require 'json'
hash = {:x => [1,2,3,4]}

hash.to_json
=> "{\"x\":[1,2,3,4]}"

JSON[hash.to_json]
=> {
    "x" => [
        [0] 1,
        [1] 2,
        [2] 3,
        [3] 4
    ]
} 
```

这是散列的往返，到 JSON 的表示，再回到散列。中间字符串`"{\"x\":[1,2,3,4]}"`很容易通过 Net::HTTP 发送。

# html - 如何根据电脑屏幕的宽高使表格居中？

> ID：15169549
> 
> 赞同：1
> 
> 时间：2013-03-02T01:17:25.863
> 
> 标签：html, css, height, width

我已经找到了这个问题的很多答案，但他们最终只是水平居中而不是垂直居中。

```
<table width="200" border="1">
<tr>
<th height="200" scope="col">&nbsp;</th>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:29:16.550

这有点傻，但是垂直对齐块内的非表格单元格真的很难。你必须知道元素的高度（并且它必须有一个设定的高度）。不过，您的可以通过`th`.

```
table {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -100px;
    margin-left: -100px;
} 
```

如果您不希望表格有`absolute`定位，或者如果不知道高度/宽度，则必须使用 JavaScript。

[http://jsfiddle.net/7JeCb/1/](http://jsfiddle.net/7JeCb/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:48:46.573

这些技术都不需要知道居中元素的高度或宽度。

# 伪元素

[http://jsfiddle.net/7JeCb/12/](http://jsfiddle.net/7JeCb/12/)

```
body, html {
    height: 100%;
    margin: 0;
    text-align: center;
}

table {
    display: inline-table;
    vertical-align: middle;
}

body:before {
    content: '';
    display: inline-block;
    height: 100%;
    margin-left: -.25em;
    vertical-align: middle;
} 
```

# 弹性盒

[http://jsfiddle.net/7JeCb/11/](http://jsfiddle.net/7JeCb/11/)

```
body, html {
  min-height: 100%;
  margin: 0;
}

body {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:27:51.707

```
 <table style="left:50%; top:50%; position:relative;">
    <tr>
       <td></td>
       <td><td>
    </tr>
    <tr>
       <td></td>
       <td><td>
    </tr>
  </table> 
```

# php - 从数组中删除空元素直到找到非空元素的函数

> ID：15169554
> 
> 赞同：1
> 
> 时间：2013-03-02T01:18:08.983
> 
> 标签：php

假设我有一个这样的数组：

```
$arr = array(0 => '', 1 => '', 2 => 'abc', 3 => '', 4 => '', 5 => 'def', 6 => ''); 
```

我想要一个函数，它将从数组中删除空值，直到它达到任何非空值。所以在这个例子中，结果将是：

```
array(0 => 'abc', 1 => '', 2 => '', 3 => 'def', 4 => ''); 
```

我可以创建自己的函数，但问题是.. PHP 是否已经有实现此功能的东西？有没有一种简单的方法可以使用尽可能少的资源？

索引关联并不重要。事实上，我更喜欢它重置

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:19:58.393

我会建议这样的事情：

```
while($arr && !$arr[0]) array_shift($arr); 
```

没有内置函数可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:27:29.897

对于想要稍微扩展 PHP 数组功能的任何人，这里有两个我发现有用的附加函数。

```
/**
 * @abstract Removes empty elements from the left side of the array until it hits a value.
 * @param array $array The array.
 * @return array|boolean Returns the modified array on success, otherwise false.
 */
function array_filter_left($array) {
    if (!is_array($array))
        return false;
    while ($array && !$array[0])
        array_shift($array);
    return $array;
}

/**
 * @abstract Removes empty elements from the right side of the array until it hits a value.
 * @param array $array The array.
 * @return array|boolean Returns the modified array on success, otherwise false.
 */
function array_filter_right($array) {
    if (!is_array($array))
        return false;
    while ($array && !$array[sizeof($array) - 1])
        array_pop($array);
    return $array;
} 
```

# c# - 创建自定义例外的最佳做法是什么？

> ID：15169560
> 
> 赞同：1
> 
> 时间：2013-03-02T01:18:48.837
> 
> 标签：c#

创建自定义异常时，最佳做法是为每个自定义异常创建一个单独的类文件，或者将自定义异常附加到它们相关的类文件的末尾，或者创建一个文件（例如 CustomExceptions.cs）和在那里添加自定义例外？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T01:20:02.537

每个文件一个类始终是一个好规则。

其他基础知识：

*   将您的异常标记为`[Serializable]`
*   重载所有 System.Exception 构造函数
*   不要从 System.ApplicationException 继承

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:20:41.300

嗯......我会说你应该遵循每个文件一个类的规则，除非这个例外只是为了你的类中的“内部”功能。然后你可以让它在类中声明。但是，如果以任何方式暴露给外界，请将其与类分开。这种暴露也可以从这个异常没有交给你班级的用户的实际概率中看出。在这种情况下，我也会公开它并且不会在里面声明它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:57:36.390

正如其他人所说，每个文件规则一个类是理想的。另一种思考方式是，如果您有一个由许多模块组成的大型应用程序，您将拥有多个命名空间，并且保持某个类方法（或一组类/方法）可以在其各自的命名空间中抛出的异常非常重要。这使代码更具可读性，并且您的自定义异常背后的推理更容易被其他开发人员破译......或者在 6 个月后，当您忘记为什么制作其中一半时：）

# c# - 显示按钮数组中的赢线

> ID：15169561
> 
> 赞同：0
> 
> 时间：2013-03-02T01:18:50.040
> 
> 标签：c#, arrays, tic-tac-toe

我有一个带有可调整大小网格的井字游戏。我有一个 CheckXWinner() 函数，用于检查网格中的水平、垂直和对角线获胜组合。获胜检查效果很好，但是在某个组合获胜后，我需要通过将它们变成不同的颜色来突出显示这些获胜按钮，我会说 IndiaRed，并且最好在它们之间画一条线。不过，至少让它们变红，我会很高兴。

```
public void CheckXWinner(Button[] buttonArray)
{          
        int arrLength = buttonArray.Length; 
        int hCount = 0;
        int vCount = 0;
        int d1Count = 0;
        int d2Count = 0;
        int root = (int)Math.Sqrt(Convert.ToDouble(arrLength));  

        for (int i = 0;  i < root;  i++)
        {
            //Sets the counter for the winners back to zero
            d2Count = 0;
            d1Count = 0;
            hCount = 0;
            vCount = 0;
                for(int j = 0;  j < root; j++)
                {
                    //increments the appropriate counter if the button contains an X
                    if (buttonArray[ (i * root) + j ].Text == "X")
                        hCount++;

                    if (buttonArray[ j + (j * root)].Text == "X")
                        d1Count++;

                    if (buttonArray[(j * (root - 1)) + (root - 1)].Text == "X")
                        d2Count++;

                    if (buttonArray[ i + (root * j)].Text == "X")
                        vCount++;

                }
                //if the counter reaches the amount needed for a win, show win message
                if ( hCount == root )
                { 
                    MessageBox.Show("Horizontal winner found !");
                    break;
                }
                else if ( vCount == root )
                { 
                    MessageBox.Show("Virtical winner found !");
                    break;
                }
                else if ( d1Count == root )
                {
                    MessageBox.Show("Diagonal winner found !");
                    break;
                }
                else if (d2Count == root)
                {
                    MessageBox.Show("Diagonal winner #2 found !");
                    break;
                }
        }//end of for loop
   }//end of CheckXWinner 
```

一旦达到中奖次数，我该如何返回并将这些按钮的 .backcolor 属性更改为 IndiaRed？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:56:49.243

我是这样解决的：

```
 public void CheckXWinner(Button[] buttonArray)
    {          
        int arrLength = buttonArray.Length; 
        int root = (int)Math.Sqrt(Convert.ToDouble(arrLength));  

        for (int i = 0;  i < root;  i++)
        {
            //Sets the counter for the winners back to zero
            int d2Count = 0;
            int d1Count = 0;
            int hCount = 0;
            int vCount = 0;
                for(int j = 0;  j < root; j++)
                {
                    //increments the appropriate counter if the button contains an X
                    //Horizonal win
                    if (buttonArray[(i*root) + j].Text == "X")
                    {
                        hCount++;
                        if (hCount == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[(i*root) + z].BackColor = Color.IndianRed;
                            }
                            Xwins();
                        }
                    }//end of Horizonal win

                    //Left to right diagonal
                    if (buttonArray[j + (j*root)].Text == "X")
                    {
                        d1Count++;
                        if (d1Count == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[z + (z * root)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                        }
                    }//end of LTR win

                    //Right to left diagonal
                    if (buttonArray[(j*(root - 1)) + (root - 1)].Text == "X")
                    {
                        d2Count++;
                        if (d2Count == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[(z*(root - 1)) + (root - 1)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                        }
                    }//end of RTL win

                    //Vertical win
                    if (buttonArray[i + (root*j)].Text == "X")
                    {
                        vCount++;
                        if (vCount == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[i + (root*z)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                        }
                    }//end of vert win

                }//end of for j loop
        }//end of for loop

    }//end of CheckXWinner 
```

# jquery - jQuery AJAX 将提交的表单替换为表单（好），但不会再次提交

> ID：15169564
> 
> 赞同：2
> 
> 时间：2013-03-02T01:19:06.793
> 
> 标签：jquery, ajax, forms, response, reload

我在 PHP 中使用循环在 CMS 的管理部分中为用户显示数据。每行（用户）都包含一些我想连接到命令的图标（例如：编辑、删除等）。表格的最后一行包含带有单个图标（命令）的空输入字段，以允许添加新用户。这是用户表的 HTML...

```
<div id="wrap">
<form method="post" id="form_users">
    <div class="table">
        <div class="row header">
            <div class="columns icons"></div>
            <div class="columns data">Username</div>
            <div class="columns data">First Name</div>
            <div class="columns data">Last Name</div>
            <div class="columns data">Email</div>
            <div class="clear"></div>
        </div><!-- .header -->
        <div class="row odd">
            <div class="columns icons">
                <input type="hidden" name="userID" value="0000000010" />
                <input type="image" src="../img/icons/delete_16.png" name="submit" value="delete" />
                <a href="?action=edit&userID=0000000010" class="edit"></a>
            </div>
            <div class="columns data">admin</div>
            <div class="columns data">david</div>
            <div class="columns data">kirkland</div>
            <div class="columns data">awesome@example.com</div>
            <div class="clear"></div>
        </div>
        <div class="row even">
            <div class="columns icons">
                <input type="hidden" name="userID" value="0000000001" />
                <input type="image" src="../img/icons/delete_16.png" name="submit" value="delete" />
                <a href="?action=edit&userID=0000000001" class="edit"></a>
            </div>
            <div class="columns data">coolguy</div>
            <div class="columns data">john</div>
            <div class="columns data">doe</div>
            <div class="columns data"></div>
            <div class="clear"></div>
        </div>
        <div class="row new">
            <div class="columns icons">
                <input type="image" src="../img/icons/save_16.png" name="submit" value="new" />
            </div>
            <div class="columns data">
                <input type="text" name="user[2][username]" value="" maxlength="30" class="field new" />
            </div>
            <div class="columns data">
                <input type="text" name="user[2][first_name]" value="" maxlength="30" class="field new" />
            </div>
            <div class="columns data">
                <input type="text" name="user[2][last_name]" value="" maxlength="30" class="field new" />
            </div>
            <div class="columns data">
                <input type="text" name="user[2][email]" value="" maxlength="30" class="field new" />
            </div>
            <div class="clear"></div>
        </div>
    </div><!-- .table -->
</form> 
```

单击其中一个图标时，我正在使用 jQuery / AJAX 将命令发送到服务器。`<form>`响应是从到更新的用户表`</form>`。这是jQuery ...

```
<script type="text/javascript">
    $(function(){

        $('input[name=submit]').click(function(event){

            event.preventDefault();

            // setup array
            var values = {};

            // which submit button was clicked
            var submit_type = $(this).val();

            if( submit_type=='new' ){

                $('form input:not(input[name=submit])').each(function(){
                    values[this.name] = $(this).val();
                });

            }else{

                $(this).siblings().not('input[name=submit]').each(function(){
                    values[this.name] = $(this).val();
                });

            }

            $.ajax({
                type: "POST",
                url: "ajax.users.php",
                data: { action: submit_type, data: values }
            }).done(function( response ) {
                $('#wrap').html(response);
            });

        });

    });
</script> 
```

一切都适用于第一个动作。我可以使用上面的代码删除或添加用户。单击该图标将数据发送到 AJAX。AJAX 运行适当的查询并重建用户表。该响应返回到第一个文件，并且 users 表被新的 users 表替换而无需刷新。一切都很好，直到我尝试第二个动作。

第二次点击什么也不做。第三次单击会导致整个页面重新加载，并且该操作再次起作用。例如，我转到页面并单击以删除用户。它们被删除。我单击删除另一个用户。什么都没发生。我再次点击。页面重新加载并被删除。

我不确定这是否重要，但我在页面第一次加载时使用 PHP 包含来包含我的 AJAX 提交到的同一文件。该文件生成“用户表”。

```
<div id="wrap">
<?php include 'ajax.users.php'; ?>
</div> 
```

我已经搜索了所有内容，但找不到与这种情况有关的任何内容。我似乎无法为谷歌提供正确的关键字组合来获得我正在寻找的答案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:21:35.560

`$('input[name=submit]').click(function(event){`仅绑定到当时存在的输入`.click`。使用事件委托。

```
$("#wrap").on('click', 'input[name=submit]', function (event) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:22:51.480

您的 javascript 将 click 事件的事件处理程序附加到与“input[name=submit]”选择器匹配的任何元素，但仅在页面加载后执行一次。

这意味着与选择器匹配的任何其他表单都不会附加此处理程序，因为您需要委托事件处理程序。

```
$(document).on("click","input[name=submit]",function() {...}); 
```

理想情况下，您应该使用一个类来识别应该以这种方式运行的提交按钮，否则每个提交按钮都将使用相同的处理程序。

# ruby-on-rails - 如何使用服务帐户的 access_token 发出 API 请求

> ID：15169566
> 
> 赞同：0
> 
> 时间：2013-03-02T01:19:12.427
> 
> 标签：ruby-on-rails, google-places-api, service-accounts

我的最终目标是能够从[Google 的 API](https://developers.google.com/places/documentation/details)检索地点详细信息。

我需要作为[Service Account](https://developers.google.com/accounts/docs/OAuth2#serviceaccount)执行此操作，因为这是作为我服务器上的后台任务启动的。服务帐户要求您[将 JWT（JSON Web 令牌）交换](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)为 access_token。我终于开始工作了，并且收到了一个 access_token。呸。

但是，现在我不知道如何处理这个 access_token。

Place Details API 说该`key`参数是必需的，但我没有密钥。只是一个access_token。使用该值`key`或将参数名称更改为`access_token`不起作用。

最终我需要能够像这样点击一个 URL：

```
https://maps.googleapis.com/maps/api/place/details/json?reference={MY_REFERENCE}&sensor=false&key={MY_ACCESS_TOKEN} 
```

如何使用我的访问令牌向 Google Place Detail API 发出请求？

**更新 1**

仍然没有成功，但我想我会发布我的请求的详细信息，以防我提交给 Google 的内容有问题。

我正在使用[JWT Ruby 库](https://github.com/progrium/ruby-jwt)，以下是我的声明集的值：

```
{
  :iss => "54821520045-c8k5dhrjmiotbi9ni0salgf0f4iq5669@developer.gserviceaccount.com",
  :scope => "https://www.googleapis.com/auth/places",
  :aud => "https://accounts.google.com/o/oauth2/token",
  :exp => (Time.now + 3600),
  :iat => Time.now.to_i
} 
```

在我看来很理智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:27:04.050

**创建服务帐户及其凭据**

您需要创建一个服务帐户及其凭据。在此过程中，您需要收集三个项目，这些项目稍后将用于 Google Apps 域范围的授权，并在您的代码中使用您的服务帐户进行授权。这三个项目是您的服务帐户：

• 客户 ID。

• 私钥文件。

• 电子邮件地址。

为此，您首先需要一个启用了 Google 日历 API 的有效 Google API 控制台项目。按着这些次序：

1.  转到 Google API 控制台。
2.  打开您现有的项目或创建一个新项目。
3.  转到服务部分。
4.  启用日历 API（以及您可能需要访问的其他 API）。

您现在可以创建服务帐户及其凭据。按着这些次序：

1.  转到 API 访问部分。

2.  通过单击创建 OAuth 2.0 客户端 ID... 创建客户端 ID

3.  输入产品名称，指定可选徽标，然后单击下一步。

4.  在询问您的应用程序类型时选择服务帐户，然后单击创建客户端 ID。

此时，您将看到一个对话框，允许您将私钥作为文件下载（见下图）。确保下载并安全地保存该文件，因为无法从 API 控制台再次下载它。

下载文件并关闭对话框后，您将能够获取服务帐户的电子邮件地址和客户端 ID。

您现在应该已经收集了您的服务帐户的私钥文件、客户 ID 和电子邮件地址。您已准备好将域范围的权限委派给您的服务帐户。

**将域范围的权限委派给您的服务帐户**

您现在创建的服务帐户需要被授予访问您要访问的 Google Apps 域的用户数据的权限。以下任务必须由 Google Apps 域的管理员执行：

1.  转到您的 Google Apps 域的控制面板。URL 应如下所示：www.google.com/a/cpanel/mydomain.com

2.  转到高级工具... > 管理第三方 OAuth 客户端访问。

3.  在客户端名称字段中输入服务帐户的客户端 ID。

4.  在一个或多个 API 范围字段中，输入应授予您的应用程序访问权限的范围列表（见下图）。例如，如果您需要对 Google Calendar API 进行域范围的访问，请输入：www.googleapis.com/auth/calendar.readonly

5.  单击授权按钮。

您的服务帐户现在可以为您域中的所有用户以及您在上面的示例中列出的其他 API 提供域范围内的 Google Calendar API 访问权限。

**下面是使用服务帐户访问 PHP 中的日历数据的描述**

服务帐户访问用户日历的一般流程如下：

• 创建 Google 客户端

• 设置客户端应用程序名称

• 如果您已有访问令牌，请检查它是否已过期

• 如果访问令牌已过期，则设置 JWT 断言凭据并获取新令牌

• 设置客户端 ID

• 基于谷歌客户端新建日历服务对象

• 检索日历事件

注意：您必须保存访问令牌并仅在它即将到期时刷新它，否则您将收到错误消息，指出您已超出用户在一段时间内的访问令牌数量限制。

使用的 Google PHP Client 库函数说明：

客户端对象可以访问许多参数和方法，以下所有这些都是通过客户端对象访问的：

创建一个新的客户端对象：

```
$client = new Google_Client(); 
```

设置客户端应用程序名称：

```
$client->setApplicationName(“My Calendar App”); 
```

如果您已经保存了一个客户端访问令牌，请设置：

```
$client->setAccessToken($myAccessToken); 
```

检查访问令牌是否已过期，有一个 30 秒的缓冲区，因此如果令牌设置为在 30 秒或更短的时间内过期，这将返回 true。访问令牌的生命周期为一小时。访问令牌实际上是一个 JSON 对象，其中包含创建时间、以秒为单位的生命周期以及令牌本身。因此，不会调用 Google，因为令牌在本地拥有所有信息以确定它何时到期。

```
$client->isAccessTokenExpired(); 
```

如果令牌已过期或您从未检索过令牌，那么您将需要设置断言凭据以获取访问令牌：

$client->setAssertionCredentials(new Google_AssertionCredentials(SERVICE_ACCOUNT_NAME,array(CALENDAR_SCOPE), $key,'notasecret',' [http://oauth.net/grant_type/jwt/1.0/bearer](http://oauth.net/grant_type/jwt/1.0/bearer) ',$email_add));

```
Where: 
```

SERVICE_ACCOUNT_NAME 是之前设置的服务帐户电子邮件地址。

```
 For example:’abcd1234567890@developer.gserviceaccount.com’ 
```

CALENDAR_SCOPE 是 Google 管理界面中的范围设置。

```
 For example: ‘https://www.googleapis.com/auth/calendar.readonly’ 
```

$key 是您在 Google Apps Console 中创建项目时下载的密钥文件的内容。$email_add 是您要为其检索日历数据的用户的 Google 电子邮件地址。

设置客户端ID：$client-setClientId(SERVICE_CLIENT_ID); 其中：SERVICE_CLIENT_ID 是之前设置的服务帐户客户端 ID。例如：'abcd123456780.apps.googleusercontent.com'</p>

创建一个新的日历服务对象： $cal = new Google_CalendarService($client);

日历检索可以设置几个选项我在下面的代码中设置了几个选项，它们在api文档中定义。$optEvents = array('timeMax' => $TimeMax, 'timeMin' => $TimeMin, 'orderBy' => 'startTime', 'singleEvents' => 'True');

获取日历事件列表并将上述选项传递给调用：

```
$calEvents = $cal->events->listEvents('primary', $optEvents); 
```

遍历返回的事件列表，列表是分页的，所以我们需要获取页面，直到列表用完：

```
 foreach ($calEvents->getItems() as $event) {
// get event data
$Summary = $event->getSummary();
$description = $event->getDescription();
$pageToken = $calEvents->getNextPageToken();
            if ($pageToken) { // if we got a token the fetch the next page of events.
                    $optParams = array('pageToken' => $pageToken);
                    $calEvents = $cal->events->listEvents('primary', $optParams);
            } else {
                    break;
            } 
```

}

获取访问令牌：

$myAccessToken=$client->getAccessToken();

下次将访问令牌保存到您的永久存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:25:53.673

语言不重要 php、ruby、.net、java 过程都是一样的。api 的控制台将 Places API 显示为支持服务帐户，因此应该可以访问它。

至于使用令牌，请查看[https://code.google.com/p/google-api-ruby-client/](https://code.google.com/p/google-api-ruby-client/)代码，因为代码存储库中明确定义了用法。如果访问令牌用于服务帐户或单个用户，则没有任何区别，使用令牌的过程是相同的。请参阅以下链接中标题为“调用 Google API”的部分：[https ://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

访问令牌与请求一起在 http 授权标头中发送。对于日历请求，它看起来类似于以下内容： GET /calendar/v3/calendars/primary HTTP/1.1 主机：www.googleapis.com 内容长度： 0 授权：OAuth ya29.AHES6ZTY56eJ0LLHz3U7wc-AgoKz0CXg6OSU7wQA

# vb.net - 从断开连接的 EF5 上下文中具体化“友好”实体

> ID：15169571
> 
> 赞同：1
> 
> 时间：2013-03-02T01:20:01.820
> 
> 标签：vb.net, linq, entity-framework, sql-server-2008-r2

我有一个应用程序使用 Entity Framework 5 Database First、VB.net、Linq、SQL Server 2008 R2 和断开连接的存储库模式。

我使用了 EF5.x dbContext 生成器来创建我的 POCO，并修改了 T4 模板以添加各种额外的内容，包括我的 INotifiyPropertyChanged 事件引发。

我有各种链接表，我需要以“友好”的方式显示数据。

例如，我有以下两个表；

**颜色：**

```
Colour_ID    |  Colour_Name    | Created_By | Creation_Date | Modified_By |  Modification_Date
----------------------------------------------------------------------------------------------
   1         |     Blue        |     1      |    22-01-13   |     1       |       23-01-13 
```

**用户：**

```
User_ID  |  First_Name  | Last_Name  |
--------------------------------------
   1     |    Peter     | Gallagher  | 
```

为了在我的 DataGrids 中显示“友好数据”，我正在提取数据，并使用以下代码创建“友好实体”；

```
Using CriticalPathDBContext As CriticalPathEntities = ConnectToDatabase()

        Dim query = (From Colour In CriticalPathDBContext.Colours _
                     .Include(Function(x) x.CreationUser) _
                     .Include(Function(x) x.LastUpdateUser).AsNoTracking.ToList
                     Select New FriendlyColours With {.CreatedBy = If(Colour.CreationUserCode Is Nothing, "", Colour.CreationUser.First_Name & " " & Colour.CreationUser.Last_Name),
                                                      .CreationDate = Colour.CreationDate,
                                                      .CreationUserCode = Colour.CreationUserCode,
                                                      .LastUpdateDate = Colour.LastUpdateDate,
                                                      .LastUpdatedBy = If(Colour.LastUpdateUserCode Is Nothing, "", Colour.LastUpdateUser.First_Name & " " & Colour.LastUpdateUser.Last_Name),
                                                      .LastUpdateUserCode = Colour.LastUpdateUserCode,
                                                      .Colour_ID = Colour.Colour_ID,
                                                      .Colour_Name = Colour.Colour_Name}).OrderBy(Function(x) x.Colour_Name)

        Return New ObservableCollection(Of FriendlyColours)(query)

End Using 
```

我对上面的问题是，对于更复杂的连接实体，这种类型的查询需要太长时间。

我考虑过使用我的好友类来提取相关数据，但是在断开连接的模式下，这对我不起作用。

显然，在断开连接时，延迟加载不是一种选择......

所以，我的问题是......有没有更好的方法来做到这一点？为了更好...阅读更快！

任何帮助将不胜感激！也许我错过了一些明显的东西！

**编辑...进一步解释：**

*   我有一个查询，它返回所有产品，以及它们的组件和产品库存项目......
*   返回了 4 种不同类型的组件列表，以及产品库存项目列表。
*   我获取每组组件和产品库存项目，并用结果填充关联的网格。
*   用户能够从各种组件或产品库存项目中添加、编辑或删除项目。

查询是（对不起大小！）；

```
Dim query = (From ProductList In _DBContext.Products _
             .Include(Function(x) x.CreationUser) _
             .Include(Function(x) x.LastUpdateUser) _
             .Include(Function(x) x.Colour) _
             .Include(Function(x) x.License) _
             .Include(Function(x) x.Pack_Size) _
             .Include(Function(x) x.Customer) _
             .Include(Function(x) x.Supplier) _
             .Include(Function(x) x.ProductComponents) _
             .Include(Function(x) x.ProductComponents.Select(Function(y) y.ApprovalType)) _
             .Include(Function(x) x.ProductComponents.Select(Function(y) y.Component)) _
             .Include(Function(x) x.ProductComponents.Select(Function(y) y.Component).Select(Function(z) z.ComponentType)) _
             .Include(Function(x) x.Product_Stock_Item) _
             .Include(Function(x) x.Product_Stock_Item.Select(Function(y) y.Pack_Type)) _
             .Include(Function(x) x.Product_Stock_Item.Select(Function(y) y.Product_Sizing)) _
             .Include(Function(x) x.Product_Stock_Item.Select(Function(y) y.Units_Of_Measure)) _
             .Include(Function(x) x.ProductType) _
             .Include(Function(x) x.ProductClassification) _
             .Include(Function(x) x.ProductType.ProductDepts) _
             .Include(Function(x) x.Season).AsNoTracking().OrderBy(Function(x) x.Product_Code).ToList
             Select New FriendlyProducts With {.Colour_ID = ProductList.Colour_ID,
                                               .Colour_Name = If(ProductList.Colour_ID Is Nothing, "", ProductList.Colour.Colour_Name),
                                               .CreatedBy = If(ProductList.CreationUserCode Is Nothing, "", ProductList.CreationUser.First_Name & " " & ProductList.CreationUser.Last_Name),
                                               .CreationDate = ProductList.CreationDate,
                                               .CreationUserCode = ProductList.CreationUserCode,
                                               .FriendlyCreationUser = ProductList.CreationUser,
                                               .Cust_Product_Desc_24 = ProductList.Cust_Product_Desc_24,
                                               .Cust_Product_Desc_48 = ProductList.Cust_Product_Desc_48,
                                               .Customer_Code = ProductList.Customer_Code,
                                               .Customer_Name = If(ProductList.Customer_Code Is Nothing, "", ProductList.Customer.NAME),
                                               .Description = ProductList.Description,
                                               .DesignNo = ProductList.DesignNo,
                                               .Gender_ID = ProductList.Gender_ID,
                                               .Gender_Name = If(ProductList.Gender_ID Is Nothing, "", ProductList.Gender.Gender_Name),
                                               .LicenseCode = ProductList.LicenseCode,
                                               .License_Name = If(ProductList.LicenseCode Is Nothing, "", ProductList.License.NAME),
                                               .Pack_Size_ID = ProductList.Pack_Size_ID,
                                               .Pack_Size_Name = If(ProductList.Pack_Size_ID Is Nothing, "", ProductList.Pack_Size.Pack_Size_Name),
                                               .PackagingNR = ProductList.PackagingNR,
                                               .ProductClassification_ID = ProductList.ProductClassification_ID,
                                               .Product_Classification_Name = If(ProductList.ProductClassification_ID Is Nothing, "", ProductList.ProductClassification.ProductClassification_Name),
                                               .Product_Code = ProductList.Product_Code,
                                               .Product_Picture_Path = ProductList.Product_Picture_Path,
                                               .ProductComponentsNR = ProductList.ProductComponentsNR,
                                               .ProductType_ID = ProductList.ProductType_ID,
                                               .ProductType_Name = If(ProductList.ProductType_ID Is Nothing, "", ProductList.ProductType.NAME),
                                               .ProductDept_ID = If(ProductList.ProductType Is Nothing, Nothing, ProductList.ProductType.ProductDept),
                                               .ProductDept_Name = If(ProductList.ProductType Is Nothing, "", (If(ProductList.ProductType.ProductDepts Is Nothing, "", ProductList.ProductType.ProductDepts.NAME))),
                                               .SageDescription = ProductList.SageDescription,
                                               .SeasonCode = ProductList.SeasonCode,
                                               .Season_Name = If(ProductList.SeasonCode Is Nothing, "", ProductList.Season.NAME),
                                               .StrikeOffNR = ProductList.StrikeOffNR,
                                               .Supplier_Code = ProductList.Supplier_Code,
                                               .Supplier_Name = If(ProductList.Supplier_Code Is Nothing, "", ProductList.Supplier.NAME),
                                               .TransfersNR = ProductList.TransfersNR,
                                               .Deleted = ProductList.Deleted,
                                               .LastUpdateDate = ProductList.LastUpdateDate,
                                               .LastUpdatedBy = If(ProductList.LastUpdateUserCode Is Nothing, "", ProductList.LastUpdateUser.First_Name & " " & ProductList.LastUpdateUser.Last_Name),
                                               .LastUpdateUserCode = ProductList.LastUpdateUserCode,
                                               .ProductComponents = If(ProductList.ProductComponents.Count > 0, GetProductComponentsByPrimaryName(ProductList.ProductComponents, "Component"), New ObservableCollection(Of FriendlyProductComponents)),
                                               .ProductPackaging = If(ProductList.ProductComponents.Count > 0, GetProductComponentsByPrimaryName(ProductList.ProductComponents, "Packaging"), New ObservableCollection(Of FriendlyProductComponents)),
                                               .ProductStrikeOffs = If(ProductList.ProductComponents.Count > 0, GetProductComponentsByPrimaryName(ProductList.ProductComponents, "Strike Off"), New ObservableCollection(Of FriendlyProductComponents)),
                                               .ProductTransfers = If(ProductList.ProductComponents.Count > 0, GetProductComponentsByPrimaryName(ProductList.ProductComponents, "Transfers"), New ObservableCollection(Of FriendlyProductComponents)),
                                               .ProductStockItems = If(ProductList.Product_Stock_Item.Count > 0, GetProductStockItems(ProductList.Product_Stock_Item), New ObservableCollection(Of FriendlyProductStockItems))
                                               }).Where(Function(x) x.Deleted = False Or x.Deleted Is Nothing) 
```

Where`GetProductComponentsByPrimaryName`调用了一个函数，该函数简单地按组件的类型过滤组件并返回一个友好的 ObservableCollection。

因此，每个相关的组件集和产品库存项目都作为 ObservableCollection 返回，我可以与之交互...

对不起，很长的帖子！

**编辑 - 08-03-13：**

我还没有解决上面的这个问题，但我设法说服客户他们不应该检索所有结果，然后依靠用户进行过滤。

这也导致我重新调整我的过滤例程，以便在数据库上而不是在本地执行过滤。这两个因素都意味着下面的查询现在以合理的速度运行。

我尝试手动填充我的实体，但这比 Linq 为我生成的查询花费的时间要长得多。

在这些日子里，也许我会重新审视这个问题，看看我能学到什么。但就目前而言，我已经避开了它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:31:00.533

该查询将通过网络产生大量数据。您可能应该首先投影到仅包含您需要的数据的实体。也许这在这里无济于事，但取决于您的数据需求。

SQL 通常在运行简单查询方面速度极快，因此您可以尝试单独加载每个集合，然后在代码中将实体缝合在一起。这将大大减少传输的数据量。

为了解释为什么像这样加入会破坏你的表现，这里有一个简单的例子：

在我的测试数据库中，我有三个数据非常少的表，但您仍然应该看到这种模式。

**首先是个人查询**

```
SELECT *  FROM [OPath-dev].[dbo].[Groups] g

1;Hästhovarna;nzb5x50vibb;0;NULL;NULL;0 
```

单排。根据记事本++ 39 个字符

```
SELECT * FROM [OPath-dev].[dbo].[GroupMemberships]

1;1;1
2;1;0 
```

两排。12 个字符

```
SELECT * FROM [OPath-dev].[dbo].[Blogs] where id > 5 
```

3行带字段；

*   标题;
*   介绍;
*   身体;
*   发布日期；
*   创建；
*   创作者IP；
*   创造者；
*   已编辑；
*   编辑;
*   编辑IP

5907 个字符

**连接两个简单的表**

```
 SELECT *
  FROM [OPath-dev].[dbo].[Groups] g
  JOIN [OPath-dev].[dbo].[GroupMemberships] gm on gm.GroupId = g.Id

1;Hästhovarna;nzb5x50vibb;0;NULL;NULL;0;1;1;1
1;Hästhovarna;nzb5x50vibb;0;NULL;NULL;0;2;1;0 
```

现在长度为 96 个字符。如果在单独的查询中运行这两个，它将是 39 + 12 = 51（这可能更快，因为差异很小）。

**加入所有三个表**

```
SELECT *
  FROM [OPath-dev].[dbo].[Groups] g
  JOIN [OPath-dev].[dbo].[GroupMemberships] gm on gm.GroupId = g.Id
  JOIN [OPath-dev].[dbo].[Blogs] b on b.Id > 5 
```

响应为 6 行，列：

*   ID;
*   姓名;
*   加入代码；
*   IsCompetitionClub;
*   源系统密钥_系统密钥；
*   SourceSystemKey_EntityId;
*   SourceSystemKey_HasValue;
*   用户身份;
*   组别；
*   是管理员
*   ID;
*   标题;
*   介绍;
*   身体;
*   发布日期；
*   创建；
*   创作者IP；
*   创造者；
*   已编辑；
*   编辑;
*   编辑IP

现在的响应是 11954 个字符长，我们突然为连接付出了相当大的代价。特别是如果数据库位于同一台机器上或位于非常快速的网络上。

现在这甚至是一个坏例子。我有更好的数据集，可以在我的另一台计算机上显示更糟糕的增长。请记住，您正在加入更多列，这些列最终将传输大量数据。如果它是一个 Windows 应用程序，并且您通过 WAN 连接到数据库，这将是一个严重的问题，但即使在本地计算机上，如果您进行配置，您也可以看到传输不是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:10:20.110

创建一个执行相同查询的存储过程，并将结果作为新实体类型或 FriendlyColours（如果可以摆动）返回。你是对的，这样做是一头猪。不知道我还能添加什么。

# visual-studio - 一种清理 csproj 文件中 Nuget 包的方法？

> ID：15169574
> 
> 赞同：1
> 
> 时间：2013-03-02T01:20:36.810
> 
> 标签：visual-studio, reference, nuget, nuget-package

当我添加和删除引用时，有时我并不总是“卸载”看起来像引用的包。所以它仍然“安装”在 Nuget 包资源管理器中。似乎我真的可以使用一些东西来清理 .csproj 和 packages.config 文件——有什么东西可以做到这一点吗？

这对 Visual Studio (VS) 2010 和 VS 2012 都很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T00:42:39.243

我还在寻找一种工具来帮助清理包并至少为我识别未使用的 Nuget 包。现在手动检查一个包是否被使用的方法是卸载包并编译项目。如果一切仍在通过，则表示该包未使用。如果事情失败了，您可以简单地恢复源代码控制系统中的更改。您需要对 Visual Studio 解决方案中安装的每个包重复这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:45:56.710

卸载包应该作为一个明确的手势来完成。

如果您想知道特定引用是否是包的一部分，您可以检查引用的路径。如果提示路径类似于 "..\Packages\.." ，您将知道该引用是包的一部分。

# c# - 通过数组操作的基本图像刷新问题

> ID：15169578
> 
> 赞同：0
> 
> 时间：2013-03-02T01:20:54.673
> 
> 标签：c#, .net, winforms, debugging

我正在尝试制作一个简单的瓷砖游戏引擎并遇到问题。当我必须重新绘制瓷砖时，我被卡住了。

```
 int[,] level = {
                           { 0, 0, 0, 0, 0 ,0 },
                           { 0, 0, 0, 0, 0 ,0 },
                           { 0, 0, 0, 0, 0 ,0 },
                           { 0, 0, 0, 0, 0 ,0 },
                           { 0, 0, 0, 0, 0 ,0 },
                           { 0, 0, 0, 0, 0 ,0 },
                       }; 
```

这是我的数组，所有值都是 0，因此关闭。每个对应的值都链接到一个单独的图块，当您按下键时，该图块将打开和关闭。

```
 //Event Handler (W,A,S,D) is used for movements
    private void panel1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {

        .
        .
        .

    }

        //Responsible for movements
    private void tmrMov_Tick(object sender, EventArgs e)
    {

        level[_x, _y] = 0;

        if (_objDirection == Direction.Right)
        {

            if (_x < _boardWidth - 1 && _x >= 0 && _x + 1 < _boardWidth - 1 && _x + 1 >= 0)
                _x += 1;
            else
                _x = _boardWidth - 1;
        }

           .
           .
           .

        level[_x, _y] = _k;

        Invalidate();
    } 
```

这是我的计时器功能，它应该“操纵”数组值，因此当程序运行时，可以通过按键决定打开/关闭哪个图块。

无论如何，我的问题是刷新与“invalidate()”函数调用有关的图像。虽然，我确实感觉它可以动态更改数组值，但我似乎无法刷新图像以跳转到另一个图块。

这是我一直在研究的完整项目的链接：[http ://www.mediafire.com/?g10a0zzt8hru11v](http://www.mediafire.com/?g10a0zzt8hru11v)

这是我几天前问的一个类似但不同的问题：[设置基本游戏和调试基本问题](https://stackoverflow.com/questions/15061453/setting-up-basic-game-and-debugging-fundamental-problems)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:08:13.693

所以......我希望你不要对此有任何冒犯，但我经历并整理了一下，并提供了一些建议/修复/评论/等。

希望这可以帮助！让我知道是否有任何建议的更改需要解释。

所以，让我们从 Designer.cs 文件开始：

```
// Ahh, here's yer problem: the panel control doesn't raise PreviewKeyDowns - the form does, tho
this.panel1.PreviewKeyDown += 
       new System.Windows.Forms.PreviewKeyDownEventHandler(
           this.panel1_PreviewKeyDown);

    // the form will raise these, so bind the handler to it 
    // (and rename the method)
    this.PreviewKeyDown += 
       new System.Windows.Forms.PreviewKeyDownEventHandler(
           this.Form1_PreviewKeyDown); 
```

啊，一个大问题 - 你的关键事件都没有真正到达你的处理程序。让我们回到表单代码隐藏。

因此，在构造函数中 - 所有这些都可以进行：

```
// arrays of T (T[], int[], etc), come initialized to default(T),
// so none of this is needed.
level[0, 0] = 0;
level[0, 1] = 0;
level[0, 2] = 0;
level[0, 3] = 0;
level[0, 4] = 0; 
```

跳转到`Paint`处理程序：

```
// The next two checks have the x and y swapped,
    // meaning the apparent motion will not match what the
    // actual direction should be
//Empty Tile
if (level[y, x] == 0)
{
//Occupied Tile
if (level[y, x] == 1)
{

    // Now the render will mactch properly
//Empty Tile
if (level[x, y] == 0)
{
//Occupied Tile
if (level[x, y] == 1)
{ 
```

向前！对`Timer.Tick`处理程序：

```
#region Timer function
// doing this could cause flickering
// or flashing if the paint fires while
// we're updating things
level[_x, _y] = 0;

#region Timer function
// instead, keep track temporarily
// what they were - we'll come back to this later on
var oldX = _x;
var oldY = _y; 
```

进一步了解 if/else 链：

```
// There's a lot of replication and style choices here that
// will make it harder to debug/troubleshoot 
if (_objDirection == Direction.Right)
{
    if (_x < _boardWidth - 1 && _x >= 0 && _x + 1 < _boardWidth - 1 && _x + 1 >= 0)
        _x += 1;
    else
        _x = _boardWidth - 1;
}
else if (_objDirection == Direction.Left) 
```

让我们看看我们是否可以摆脱一些重复：

```
// let's figure these out ahead of time
var spaceOnLeft = _x > 0;
var spaceOnRight = _x < _boardWidth - 1;
var spaceOnTop = _y > 0;
var spaceOnBottom = _y < _boardHeight - 1;

// switch is a bit like the if/else construct you had
switch (_objDirection)
{
    case Direction.Up:
        // this means: if(spaceOnTop) y = y-1 else y = height-1
        _y = spaceOnTop ? _y - 1 : _boardHeight - 1;
        break;
    case Direction.Down:
        _y = spaceOnBottom ? _y + 1 : 0;
        break;
    case Direction.Left:
        _x = spaceOnLeft ? _x - 1 : _boardWidth - 1;
        break;
    case Direction.Right:
        _x = spaceOnRight ? _x + 1 : 0;
        break;
} 
```

跳到最后...

```
// now we'll use the old position to clear...
level[oldX, oldY] = 0;
// then set the new position
level[_x, _y] = _k;

// Since we're only writing on the panel,
// we only need to rerender the panel
panel1.Refresh(); 
```

最后一点 - 按键处理程序：

```
// Hah - artificial difficulty due
// to awkward key choice? Out of curiosity,
// why not Keys.Up, Down, Left, Right?
if (e.KeyCode == Keys.E)
{
    _objDirection = Direction.Left;
}
else if (e.KeyCode == Keys.D)
{
    _objDirection = Direction.Right;
}
else if (e.KeyCode == Keys.W)
{
    _objDirection = Direction.Up;
}
else if (e.KeyCode == Keys.S)
{
    _objDirection = Direction.Down;
}

// same deal here, but with keys
    // Or switch to Up, Down, Left, Right :)
switch (e.KeyCode)
{
    case Keys.E: 
        _objDirection = Direction.Up;
        break;
    case Keys.D:
        _objDirection = Direction.Down;
        break;
    case Keys.W:
        _objDirection = Direction.Left;
        break;
    case Keys.S:
        _objDirection = Direction.Right;
        break;
} 
```

Form1.cs 类的完整代码删除：

```
//Listing all the parameters
public partial class Form1 : Form
{

    #region Declaring Parameters

    enum Direction
    {
        Left, Right, Up, Down
    }

    private int _x;
    private int _y;
    private int _k;
    private Direction _objDirection;
    Random rand = new Random();
    private int _boardWidth;
    private int _boardHeight;
    private int[,] level;

    #endregion

    //Giving values to parameters
    public Form1()
    {
        InitializeComponent();

        #region Initialial values

        _k = 1;
        _boardWidth = 6;
        _boardHeight = 6;
        _x = rand.Next(0, _boardWidth - 1);
        _y = rand.Next(0, _boardHeight - 1);
        _objDirection = Direction.Left;

        //Array that works as a board or platform which we used to distinguish tiles
        level = new int[_boardWidth, _boardHeight];
        #endregion
    }

    //Paint is used for drawing purposes only
    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        /*
               int[,] level = {
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                           };
        */
        #region Looping through tiles

        //Initializing first randomly filled tile
        level[_x, _y] = _k;

        for (int y = 0; y < _boardHeight; y++)
        {
            for (int x = 0; x < _boardWidth; x++)
            {
                //Empty Tile
                if (level[x, y] == 0)
                {
                    // Create pen.
                    Pen redPen = new Pen(Color.Red, 1);

                    // Create rectangle.
                    Rectangle redRect = new Rectangle(x * 50, y * 50, 50, 50);

                    // Draw rectangle to screen.
                    e.Graphics.DrawRectangle(redPen, redRect);
                }

                //Occupied Tile
                if (level[x, y] == 1)
                {
                    // Create solid brush.
                    SolidBrush blueBrush = new SolidBrush(Color.Blue);
                    // Create rectangle.
                    Rectangle rect = new Rectangle(x * 50, y * 50, 50, 50);
                    // Fill rectangle to screen.
                    e.Graphics.FillRectangle(blueBrush, rect);
                }
            }
        }
        #endregion
    }

    //Responsible for movements
    private void tmrMov_Tick(object sender, EventArgs e)
    {
        #region Timer function
        // instead, keep track temporarily
        // what they were
        var oldX = _x;
        var oldY = _y;

        // let's figure these out ahead of time
        var spaceOnLeft = _x > 0;
        var spaceOnRight = _x < _boardWidth - 1;
        var spaceOnTop = _y > 0;
        var spaceOnBottom = _y < _boardHeight - 1;

        // switch is a bit like the if/else construct you had
        switch (_objDirection)
        {
            case Direction.Up:
                // this means: if(spaceOnTop) y = y-1 else y = height-1
                _y = spaceOnTop ? _y - 1 : _boardHeight - 1;
                break;
            case Direction.Down:
                _y = spaceOnBottom ? _y + 1 : 0;
                break;
            case Direction.Left:
                _x = spaceOnLeft ? _x - 1 : _boardWidth - 1;
                break;
            case Direction.Right:
                _x = spaceOnRight ? _x + 1 : 0;
                break;
        }

        // now we'll use the old values to clear...
        level[oldX, oldY] = 0;
        // then set the new value
        level[_x, _y] = _k;
        #endregion
        panel1.Refresh();
    }

    //Event Handler (W,A,S,D) is used for movements
    private void Form1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        #region Controls

        // same deal here, but with keys
        switch (e.KeyCode)
        {
            case Keys.Up:
                e.IsInputKey = true;
                _objDirection = Direction.Up;
                break;
            case Keys.Down:
                e.IsInputKey = true;
                _objDirection = Direction.Down;
                break;
            case Keys.Left:
                e.IsInputKey = true;
                _objDirection = Direction.Left;
                break;
            case Keys.Right:
                e.IsInputKey = true;
                _objDirection = Direction.Right;
                break;
        }
        #endregion
    }
} 
```

干杯!

# ruby-on-rails - Rails 3.2 HTTP 流式传输失败（Windows 上的瘦服务器）

> ID：15169579
> 
> 赞同：0
> 
> 时间：2013-03-02T01:21:04.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, http, http-headers, streaming

我正在尝试让我的页面流式传输，但出现以下错误：

错误 321 (net::ERR_INVALID_CHUNKED_ENCODING)：未知错误

我在 Chrome、IE 和 Firefox 中都试过了。

```
def login
    redirect_to_stored and return if session[:user]
    if request.post?
        if session[:user] = User.authenticate(params[:login], params[:password])
            redirect_to_stored(notice: 'Login successful') and return
        else
            flash_now :alert => "Login unsuccessful"
        end
    end
    on_document_load "$('#login').focus();"
    render :layout => 'login', :stream => true
end 
```

我得到以下响应标头：

```
Cache-Control:must-revalidate, private, max-age=0
Connection:close
Content-Type:text/html; charset=utf-8
Server:thin 1.5.0 codename Knife
Set-Cookie:_rails3.website_session=biglongstringhere; path=/; expires=Sat, 02-Mar-2013 01:44:38 GMT; HttpOnly
Set-Cookie:__profilin=p%3Dt; path=/
Set-Cookie:__profilin=p%3Dt; path=/
Transfer-Encoding:chunked
X-MiniProfiler-Ids:[a bunch of stuff in here (this isn't the actual text)]
X-Request-Id:695da38a40064d87cbd463c83fef0a88
X-Runtime:0.034002
X-UA-Compatible:IE=Edge 
```

查看 Chrome 的检查器，文件“登录”显示状态为“失败”，但单击它时，状态代码为 200 OK。我注意到的另一件事是，如果我在原始渲染调用之前输入以下内容，则响应显示 OK，但 Chrome 检查器仍然认为状态响应错误（如第一次）。在身体的其余部分有机会交付之前，连接是否已关闭？我不明白这里有什么问题。

```
render(:text => 'test', :stream => true) and return 
```

作为附录，rails 日志没有显示任何错误。它使一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:48:23.837

我有两台服务器；一个在工作，一个在家里。家里的人不使用 nginx 或任何下游应用程序与 Thin 进行通信。Thin 本身会产生错误......但在前面使用 nginx，文件会得到适当的服务。奇怪的是，当我没有在我的 rails 应用程序中明确启用任何流式传输时，这些文件仍然作为 Content Type: chunked 提供。

哎呀，甚至我的公共网站也被分块了......但我从来没有在 Rails 中启用流媒体......所以这一定意味着最终结果是分块的，而不是 html 的实际呈现。那我该如何实际测试呢？

# windows - 在哪里可以找到将“clj.exe”添加到 PATH 的 Clojure MSI 安装程序？

> ID：15169582
> 
> 赞同：0
> 
> 时间：2013-03-02T01:21:35.550
> 
> 标签：windows, clojure, installation

大多数安装程序中的典型`clj.bat`与 Git Bash (msysGit) 不兼容。

我试过`chocolatey install clojure`了，但它使用`clj.bat`了 Git Bash 无法运行的 。

我已经尝试过`chocolatey install leiningen`“与`lein`Cygwin 兼容”的 shell 脚本，但 Leiningen 静默失败或抛出 Java 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:38:57.113

在 Windows 上安装 leiningen 最简单的方法是获取最新的[`lein.bat`](https://raw.github.com/technomancy/leiningen/preview/bin/lein.bat)，将它放在一个文件夹中，然后将该文件夹放在`PATH`. 还下载[`wget.exe`](http://users.ugent.be/~bpuype/wget/)并将其放在路径上的相同或其他文件夹中。然后打开一个新的 cmd 提示符并输入`lein`，它将从那里自行安装。

我自己试过 Chocolately，但没有用。不过，安装 leiningen 并不比上述步骤复杂。

# c# - 使用 PrintDocument 时出错

> ID：15169590
> 
> 赞同：2
> 
> 时间：2013-03-02T01:22:57.820
> 
> 标签：c#, .net, printing, exception-handling, printdialog

我有一台染料子打印机，我正在尝试以编程方式发送图像进行打印。
我在 Windows 7 64b 上使用 PrintDocument 和带有 C# 4.0 的 PrintPage。
打印失败，windows 给出这个错误：

```
The print spooler failed to load a plug-in module 
C:\Windows\system32\spool\DRIVERS\x64\3\S6145UI.DLL, error code 0xc1 
```

打印机可以在 Window 的默认打印对话框中正常工作。
使用常规激光打印机打印时，代码可以正常工作。
我完全被难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:46:34.657

> 错误代码 0xc1

那是ERROR_BAD_EXE_FORMAT。在 64 位版本的 Windows 上不是一个不常见的错误，而是打印机驱动程序的主要失败鲸鱼。当 64 位进程尝试加载 32 位 DLL 时，您将收到此错误。或者反过来。

显然驱动程序在这里有问题，您应该寻找更新。一种可能的解决方法是强制您的程序以另一种模式运行，这对于托管程序来说很容易做到。右键单击您的 EXE 项目，属性，构建选项卡。更改平台目标设置，在 AnyCPU 与 x86 之间切换。在 VS2012 上切换 Prefer 32-bit mode 复选框。实际上不太确定这会起作用，假脱机程序是它自己的子系统。我认为有一种方法可以强制后台打印程序以 32 位模式运行旧打印机驱动程序，请在 superuser.com 上询问

# java - 如何从 Restful Web 服务返回数组？

> ID：15169591
> 
> 赞同：1
> 
> 时间：2013-03-02T01:23:13.853
> 
> 标签：java, web-services, rest, debugging, jax-rs

我有以下 Web 服务，我想在其中返回数组的值

```
@GET
@Consumes("text/plain")
@Produces("text/plain")
public String[] getText(@PathParam("name") String Uname) {
    //TODO return proper representation object
    System.out.println("In Method " + Uname);
    String arr[]=null;
     arr=new String[2];
    arr[0]="demo";
    arr[1]="demo2";
    return arr;
} 
```

但是当我测试这个网络服务时，它给了我这个错误：`GET RequestFailed RequestFailed --> Status: (406) Response: {`

那么如果我想从 REST Web 服务返回一个数组，我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:50:15.810

HTTP 响应不支持纯文本响应中的数组。您需要手动将数组表示为字符串，将返回类型更改为字符串并返回如下：

```
return Arrays.toString(arr); 
```

或者您可以将您的数组转换为列表： return Arrays.asList(arr);

并在此处使用该方法将其作为 JSON 或 XML 返回： [Jersey: Return a list of strings](https://stackoverflow.com/questions/5392413/jersey-return-a-list-of-strings)

# node.js - Node.js Real-Time Stuff with DNode/shoe 和所有关于负载平衡的东西

> ID：15169593
> 
> 赞同：1
> 
> 时间：2013-03-02T01:23:57.167
> 
> 标签：node.js, real-time, rpc, dnode

我已经构建了一个小系统，在客户端使用 dnode、shoe 和 browserify，在服务器端使用 NodeJS 和 dnode/shoe。我想知道使用 dnode (RPC) 作为实时 Web 应用程序的唯一协议是否是个好主意。

让我们看看 DNode 或任何其他 RPC 接口的好处。我喜欢能够远程调用函数（RPC）。它绝对优于 Ajax，因为您获得了从客户端到服务器以及从服务器到客户端进行通信的一致接口。我还打赌，由于与 Ajax 相关的 HTTP 开销，您会在 Ajax 上获得一小部分性能。

但是，使用 RPC，您必须处理负载平衡和服务器上的客户端连接。但这适用于任何 websocket 实现。但是，对于其他 websocket 实现，您有一个更传统的基于事件的系统，其中客户端侦听来自服务器的事件并响应这些事件。我尝试使用 EventEmitters 复制这种接口，但这很糟糕，而且我不断收到有关太多处理程序的警告。啊!

我正在寻找一个轻量级、干净的界面，我可以用它来开发我的应用程序。一种感觉健壮并且能够扩展到许多客户的产品。它需要感觉坚实。

我不太确定我在写这篇文章时的问题是什么。我的任务是更新我编写的这个代码库，这样连接就不会丢失，而且它整体上更加健壮。我想我只是迫切需要建议或咨询我的申请。有没有人愿意和我面对面讨论这个话题（RPC 和实时 Web 应用程序）？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:47:39.360

我一直在研究一些相同的主题，因为在我看来，一些 RPC 库非常酷，但对于大型应用程序并不完全实用。我实际上是从 NowJS 开始的，意识到这是一个死项目，转移到 DNode/Shoe/Browserify，最后转移到了[SocketStream](https://github.com/socketstream/socketstream)试图将一些肮脏的工作转移到一个有统一目标的项目上。我真的不想重写其他人已经在这个主题上所做的事情，而 socketstream 让这一切变得容易。回到您的问题，正如您在他们的页面上看到的那样，SocketStream 使用粘性会话。这是一个很大的假设，但如果没有进一步的发展，目前可能无法解决这个问题。我提到它的原因是他们谈论了他们正在做的一些事情，就扩展而言。我们是否值得一读或联系开发人员，看看您是否可以与他讨论一下。祝你好运！

# pdf - 在提交到服务器之前保存 Livecycle PDF 文件

> ID：15169595
> 
> 赞同：0
> 
> 时间：2013-03-02T01:24:01.503
> 
> 标签：pdf, base64, livecycle, xdp-pdf

我创建了一个 LiveCycle PDF 表单，其中包含一个提交按钮，用于将其作为 XDP（包括 base64 编码的 PDF）发送到服务器，该服务器提取 XML 数据并将其保存到数据库，然后提取编码流，对其进行解码并将其保存为服务器上的 PDF。

我遇到的问题是，一旦我打开由 base64 编码数据制成的 PDF，它们似乎是空的。经过一些测试，我发现如果我在提交之前手动保存 PDF，则在保存时输入的信息包含在编码的 PDF 中（而完整的数据包含在 XML 部分中）。

所以我的问题是有办法：

1.  自动保存 PDF 或以其他方式保存数据，以便在 XDP 的 base64 编码部分发送？（优选）

2.  识别文档中的更改何时发生更改并要求用户在单击提交之前保存 PDF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:53:04.400

看来我上面描述的问题实际上是由于使用 Foxit 阅读器而不是 Adob​​e 阅读器。

Adobe 阅读器当然需要阅读器扩展才能保存和提交表单数据。

Foxit 没有该限制，但不会在发送到服务器的 XDP XML 数据中嵌入 PDF 的更新版本。执行此操作的唯一方法是确保用户首先保存 PDF，从而根据 Adob​​e 的许可要求删除阅读器扩展。

# c# - Quartz.net + 任务并行库

> ID：15169596
> 
> 赞同：6
> 
> 时间：2013-03-02T01:24:29.487
> 
> 标签：c#, multithreading, task-parallel-library, quartz.net

我正在升级我们内部使用的使用 Quartz.net 的作业调度系统。查看最新版本 Quartz 的源代码，我注意到它仍然使用自己的线程池实现，而不是从 .NET 4.0 开始交付的经过大幅改进的线程池（或 System.Threading.Tasks 中的任何东西）。

我很想知道是否有人成功实现了一个作业调度系统，该系统使用 Quartz.net 的调度功能和 TPL 的线程池。将 Quartz 的线程池换成 TPL 的线程池相对容易吗？Quartz 在任务世界中是否仍然相关？或者，正如我对 .NET 4.x 线程池的巨大改进（核心感知、本地队列、改进的锁定等）所销售的那样，Quartz 的线程池对于典型的粗粒度后台作业来说是否足够好，不值得迫使 TPL 参与其中的努力？

提前感谢您对一起使用（或不使用）这两个工具的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:08:16.110

Quartz.NET 可以解决与 TPL 不同的问题。Quartz.NET 旨在用于具有丰富的*执行时间*功能集的重复作业调度。另一方面，TPL 用于计算工作负载的高性能并行执行。

因此，本质上，您（通常）使用 Quartz.NET 进行精确调度，使用 TPL 处理需要利用所有计算资源（内核等）尽快完成的并发工作负载。

话虽如此，我想说 Quartz.NET 使用的线程池实现对于这项工作来说已经足够了。还要记住 Quartz.NET 是 .NET 3.5 兼容的，不能只使用 4.0 的特性。

当然，您也可以在解决方案中始终将两者结合起来。

# c - 在 C 中调试函数

> ID：15169598
> 
> 赞同：-1
> 
> 时间：2013-03-02T01:24:42.123
> 
> 标签：c, debugging

这个函数接受一个整数数组，数组中元素的数量，并尝试在数组中找到一个多数元素。如果多数元素存在，则将其放在 *result 中并且函数返回 true。如果不存在多数元素，则函数返回 false。在这种情况下，不应使用 *result。

我的输出对于我正在编写的程序不能正常工作，这是因为我认为这个 findMajority 函数。

这就是输出的样子： http: [//pastebin.com/Q5ycXHrg](http://pastebin.com/Q5ycXHrg)

这就是我的输出：http: [//pastebin.com/7P1ZTpML](http://pastebin.com/7P1ZTpML)

这是输入：

```
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2
1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2
1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3
1 1 2 2 1 1 2 2 1 1 2 2 1 1 2 2 1 1 2 2 1 1 2 2 1 1 2 2 1 1
1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 1
1 2 3
1 1 1
1 2 1
1 2
1 1
2
1 1 1 1 2 3 4 5 6 7 
```

这是功能：

```
int findMajority(int *array, int count, int *result){ 
  int i, counter, bcount = 0, ccount = 0, candidate, j;    

  if(count == 1) {
      *result = *array;
      return true;
  }

  if(count % 2 != 0 ) {
    for(i = 0; i < count; i++) {
      if(*(array + i) == *(array + count)) {
        counter++;
      }
    }

    if(counter > (count/2)) {
      *result = *(array + count);
      return true;
    }
    else {
      *(array + count) = 0;
      count--;
    }
  }

  for(j=0; j <= count; j += 2) {
    if(*(array + j) == *(array + (j + 1))) {
      *(array + (count + 1)) = *(array + j);
      bcount++;//how many numbers on the end of the array
    }
  }

  if(bcount == 1) {
    int k = count;
    while(*(array + k) == 0) {
      candidate = *(array + k);
    }
  }
  else
    findMajority((array + count), count, result);

  for(j=0; j <= count; j += 2) {
    if(*(array + j) == candidate) {
      ccount++;
    }
  }

  if(ccount > (count/2)) {
    *result = candidate;
    return true;
  }
  else
    return false;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:02:42.870

I suggest you learn how to use a debugger to debug your program. For example, after wrapping your code with the following:

```
#include <stdio.h>

typedef enum { false, true } boolean;

 // ((( your function here )))

int main(int argc, char* argv[])
{
   int result = 0;
   int number = 0;

   int test[] = { 1, 1, 1, 1, 1, 1, 1 };

   result = findMajority(&test[0], sizeof(test) / sizeof(int), &number);

   printf("Result = %d, Number = %d\n", result, number);

   return 0;
} 
```

Assuming you put this into 'question.c' you could then issue the commands (assuming you have gcc and gdb):

```
$ gcc -g -o question question.c
$ gdb ./question
(gdb) b findMajority
Breakpoint 1 at 0x80483ea: file question.c, line 6.
(gdb) run
Starting program: ./question
Breakpoint 1, findMajority (array=0xbffff4bc, count=7, result=0xbffff4d8) at question.c:6
6     int i, counter, bcount = 0, ccount = 0, candidate, j; 
```

You can then use the `n` command to step to the next line, and the `p` command to print variables to see what's going wrong. For example, you could find some of the problems that Toms pointer out relatively quickly:

```
39     while(*(array + k) == 0){
(gdb) n
40         candidate = *(array + k);
(gdb) n
39     while(*(array + k) == 0){
(gdb) n
40         candidate = *(array + k);
(gdb) n
39     while(*(array + k) == 0){
(gdb) n 
```

There's your infinite loop.

```
(gdb) p counter
$3 = -1207959944 
```

And there's your uninitialized counter.

Part of learning programming is figuring out strategies of determining just what went wrong. Some people like to use text-based debuggers like `gdb`. Some people like graphical debuggers like you could find in Eclipse CDT. Some people put `printf()` statements throughout their code.

Once you're really good, like Toms, you can just read it and rattle off the problems. ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:46:38.823

你的功能有很多问题。

1.  没有初始化`counter`你正在增加它
2.  检查是否`array[count]`是有效的最后一个元素或者`array[count-1]`是正确的
3.  在这段代码中 `for(j=0; j <= count; j += 2){`

    ```
     if(*(array + j) == *(array + (j + 1))){
           *(array + (count + 1)) = *(array + j);
           bcount++;//how many numbers on the end of the array
       }} 
    ```

    因为`count= 3`您正在访问`array[4]` `array[5]`等。

4.  这是一个无限循环。您没有在循环内修改条件变量 `while(*(array + k) == 0) { candidate = *(array + k); }`

# visual-studio-2010 - 有没有办法在 Visual Studio 2010 的 Intellisense 注释中加粗文本？

> ID：15169599
> 
> 赞同：17
> 
> 时间：2013-03-02T01:25:12.237
> 
> 标签：visual-studio-2010

有没有办法在 Intellisense 评论中加粗文本？

我的想法：

```
/// <summary>      
/// <para><bold>Paramater1:</bold>: blah blah
... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-17T18:47:39.293

我一直在研究如何做到这一点，但没有找到任何方法。这是非常恶化的。

基本上有两种智能感知：1）在您*输入内容时弹出的信息（显示重载和所有内容）和 2）当您将**鼠标悬停在*已经写出的内容上时弹出的工具提示。

我还没有发现**任何**可以影响#2 的东西。（而且我想这不是严格意义上的智能感知，只是一个工具提示注释。虽然，它确实显示了相同的信息......）

但是对于＃1，您可以做几件事来突出显示单词和内容。

第一个是 using `<see cref="SomeActualCodeElementHere" />`which 将使您在引号中的任何内容显示为粗体（我认为它们过去也是可点击的，并且会带您到该代码元素的定义，但我不知道如何使它工作在 VS2013 中）。

第二个是使用`<c>AnythingCanGoHere</c>`which 使你放在那里的任何东西都显示为不同的颜色（蓝色？）。方便的喜欢`<c>true</c>`和`<c>false</c>`东西。

请注意，当使用`cref`代码元素时，必须能够在当前上下文中解析，否则它不会突出显示文本。但是，使用`<c>`将突出显示/着色任何文本。

最后一件事，如果您在外部使用您的文档，或者正在生成供其他开发人员使用的代码并正在生成 xml 注释文件，则`<b>`据说该标记适用于某些工具。（在 Visual Studio 中，当您浏览对包含 xml 注释文件的程序集的引用时，不幸的是，VS 的行为仍然如上所述。）

非常晚的答案，但谷歌把我带到了这里，所以希望这可以帮助你或其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-14T07:48:10.097

您可以使用“[更好的评论](https://marketplace.visualstudio.com/items?itemName=OmarRwemi.BetterComments)”Visual Studio 插件。此工具允许您按如下方式自定义您的评论：
使用“！” 为重要。
利用 '？' 为问题。
对任务使用“Todo”（忽略大小写）。
使用“x”、“X”或双注释作为删除线（划线）。

[![在此处输入图像描述](../Images/bb1a0dd3d3d54928c8ea038272f2cbff.png)](https://i.stack.imgur.com/xXANs.png)

您可以在链接中找到更多选项。

# linqpad - 将 LinqPAD 结果导出到 Excel 文件，而不包含行数元数据

> ID：15169612
> 
> 赞同：3
> 
> 时间：2013-03-02T01:27:04.717
> 
> 标签：linqpad

我试图仅将查询的结果集写入 excel 文件，但我不断获取带有行数的标题列，这弄乱了我需要做的后续数据处理。我可以进入导出的文件并删除第一行，但如果我可以导出没有标题行的数据集会好得多。

这是我的hack，我想知道是否有人有更好的方法来做到这一点。我正在使用生成的 html 并使用正则表达式来拉出标题行：

```
public string DumpToHtmlString<T>(T objectToSerialize, string filePath )
    {
        string strHTML = "", outpuWithoutHeader ="";
        try
        {
            var writer = LINQPad.Util.CreateXhtmlWriter(true);
            writer.Write(objectToSerialize);
            strHTML = writer.ToString();
            outpuWithoutHeader = Regex.Replace(strHTML, "<tr><td class=\"typeheader\"((\\s*?.*?)*?)<\\/(tr|TR)>", "", RegexOptions.Multiline);
            System.IO.File.WriteAllText(filePath, outpuWithoutHeader );

        }
        catch (Exception exc)
        {
            Debug.Assert(false, "Investigate why ?" + exc);
        }
        return outpuWithoutHeader;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T01:51:55.943

是`objectToSerialize`IEnumerable 吗？如果是这样，[LINQPad beta](http://www.linqpad.net/beta.aspx)有一种`WriteCsv`方法，旨在创建对 Excel 友好的 CSV 文件：

```
Util.WriteCsv(data, @"c:\temp\results.csv"); 
```

否则，使用 LINQ-to-XML DOM 来修改输出比使用正则表达式更安全。以下代码说明了如何从 LINQPad 输出中删除格式；您也可以对其进行调整以删除标题和总计：

```
XDocument doc = XDocument.Load (...);
XNamespace xns = "http://www.w3.org/1999/xhtml";

doc.Descendants (xns + "script").Remove ();
doc.Descendants (xns + "span").Where (el => (string)el.Attribute ("class") == "typeglyph").Remove ();

doc.Descendants ().Attributes ("style").Where (a => (string)a == "display:none").Remove ();

doc.Descendants (xns + "style").Remove ();
doc.Descendants (xns + "tr").Where (tr => tr.Elements ().Any (td => (string)td.Attribute ("class") == "typeheader")).Remove ();
doc.Descendants (xns + "i").Where (e => e.Value == "null").Remove ();

foreach (XElement anchor in doc.Descendants (xns + "a").ToArray ())
    anchor.ReplaceWith (anchor.Nodes ());

var presenters = doc.Descendants (xns + "table")
    .Where (el => (string)el.Attribute ("class") == "headingpresenter")
    .Where (e => e.Elements ().Count () == 2)
    .ToArray ();

foreach (var p in presenters)
{
    var heading = p.Elements ().First ().Elements ();
    var content = p.Elements ().Skip (1).First ().Elements ();

    if (stripFormatting)
        p.ReplaceWith (heading, new XElement (xns + "p", content));
    else
        p.ReplaceWith (
            new XElement (xns + "br"),
            new XElement (xns + "span", new XAttribute ("style", "color: green; font-weight:bold; font-size: 110%;"), heading),
            content);
}

// Excel centre-aligns th even if the style says otherwise. So we replace them with td elements.
foreach (var th in doc.Descendants (xns + "th"))
{
    th.Name = xns + "td";
    if (!stripFormatting && th.Attribute ("style") == null)
        th.Add (new XAttribute ("style", "font-weight: bold; background-color: #ddd;"));
}

string finalResult = doc.ToString().Replace ("Ξ", "").Replace ("▪", ""); 
```

# iphone - iPhone 最终用户更新应用程序需要多长时间？

> ID：15169629
> 
> 赞同：1
> 
> 时间：2013-03-02T01:29:47.867
> 
> 标签：iphone, ios, updates

假设应用程序没有做任何特别的事情，比如显示一个推送通知，告诉用户有新版本可用，那么 iPhone 用户更新应用程序需要多长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:33:39.847

我发现大多数用户似乎在前 2 天左右更新。许多用户在应用商店中看到徽章并在它们出现时访问他们的更新。

# html - 如何使侧边栏与页脚对齐？

> ID：15169633
> 
> 赞同：1
> 
> 时间：2013-03-02T01:30:19.543
> 
> 标签：html, css, positioning, footer, sidebar

我的侧边栏有问题。我现在正在编码的设计使侧边栏与网站的标题略微重叠 - 故意的。然而，问题是我可能会使用错误的方法来做到这一点。

侧边栏应该与页脚对齐，但因为我使用的是：

```
#sidebar {
    width: 270px;
    position: relative;
    left: 690px;
    bottom: 125px; 
```

如果我不使用这些行，侧边栏会匹配，但我找不到任何其他方法来做到这一点。

添加内容时会出现另一个问题，侧边栏会自动将所有侧边栏内容与主要内容一起降低，尽管侧边栏框架将保持在同一位置。

如果您想查看它，我已将页面包含在 codepen 中。

[http://codepen.io/anon/pen/BxpJa](http://codepen.io/anon/pen/BxpJa)

谢谢你的帮助，迈克尔：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:33:23.060

摆脱

```
position: relative;
left: 690px;
bottom: 125px; 
```

并添加：

```
float: right;
margin-top: -65px; /* adjust to your needs */ 
```

然后在关闭父级之前`<aside>` *清除*浮动`</div>`...添加：

`<br style="clear: right;" />`

[例子](http://jsbin.com/etatiy/2)

这将在浏览器之间更加一致，并且`<aside>`与`<footer>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:40:55.613

侧边栏不与页脚对齐的原因（我想你的意思是页脚直接在侧边栏下方，没有额外的间距）是因为你已经相对于它的父容器定位了侧边栏。因此侧边栏的高度仍然和以前一样，并且不会考虑它应该更高，因为你已经将它向上移动了。

尝试将包装父级浮动到右侧，然后给`#sidebar`元素一个负的上边距。

```
#sidebar-wrapper {
   float: right; 
}
#sidebar {
    width: 270px;
    margin-top: -125px;
    position: relative;
    background-color: #282828;
    margin-right: 20px;
    padding-bottom: 25px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:50:50.567

`margin-top: -125px;`代替`bottom: 125px;`

# java - 如何制作仅用于编译一些java文件的makefile？

> ID：15169634
> 
> 赞同：0
> 
> 时间：2013-03-02T01:30:24.087
> 
> 标签：java, compilation, makefile

我有三个名为 A.java、B.java、C.java 的 java 文件，A 将创建对象 B，B 将创建对象 C。但我以前从未构建过 makefile。有没有人可以帮我建立一个makefile来编译这三个java文件？我应该使用什么工具来制作makefile？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:37:52.223

1.  定义你的后缀。
2.  定义如何将 .java 变成 .class
3.  定义你想要的类
4.  定义一个“全部”目标。

您不需要任何特定的编辑器来制作 makefile；甚至记事本都可以。

# php - Highcharts 没有显示任何内容，只是空白的 html 页面

> ID：15169646
> 
> 赞同：4
> 
> 时间：2013-03-02T01:31:53.240
> 
> 标签：php, javascript, jquery, html, highcharts

我尝试使用 highcharts 网站中给出的示例。但是当我使用它时，我得到的只是一个空白的 html 页面。有人请帮我写代码。我不明白为什么代码没有正确加载请告诉我是否应该为此添加一些额外的东西，请让我知道如何使用 php 数组来使这个图表也工作

```
<html>
<head>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"       type="text/javascript"></script> 
<script>
$(function () {
  var chart;
  $(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Browser market shares at a specific website, 2010'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Firefox',   45.0],
                ['IE',       26.8],
                {
                    name: 'Chrome',
                    y: 12.8,
                    sliced: true,
                    selected: true
                },
                ['Safari',    8.5],
                ['Opera',     6.2],
                ['Others',   0.7]
            ]
        }]
    });
});

});
</script>
</head>
<body>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T01:40:40.080

我相信您的问题在于您包含脚本的顺序。尝试先放置 jQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"       type="text/javascript"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script> 
```

演示（[工作](http://jsfiddle.net/mgibsonbr/2xYSm/)/[不工作](http://jsfiddle.net/mgibsonbr/2xYSm/1/)）。

**更新：**要使用 PHP 从 MySQL 加载数据，请参阅[此示例](http://blueflame-software.com/blog/using-highcharts-with-php-and-mysql/)。但是，正如您自己指出的那样，使用 JSON 对其进行编码可能是一个更好的选择：

```
$data = array();

while($row = mysql_fetch_array($results)) {
    $data[] = array($row[1], $row[0]);
}
echo json_encode($data); 
```

最后一个`echo`可以用于使用 ajax 返回整个数组（如上面的链接示例），或者在生成页面本身时（即在脚本中“硬编码”它）：

```
 series: [{
        type: 'pie',
        name: 'Browser share',
        data: <?php echo json_encode($data)?> 
    }] 
```

这将起作用，因为您的数组在 JSON 编码时可以用来代替 JavaScript 文字（并且`json_encode`应该注意转义所有内容，防止 XSS 漏洞）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T01:42:00.267

包含 javascripts 的顺序应该是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"       type="text/javascript"></script> 
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script> 
```

我的意思是，您必须在任何其他脚本之前首先包含 jQuery 库。

# java - 在 GAE 上存储文本，更改非标准 unicode 字符

> ID：15169649
> 
> 赞同：0
> 
> 时间：2013-03-02T01:32:05.820
> 
> 标签：java, google-app-engine, rest

我在 Google App Engine 上有一个 servlet，它从页面获取文本，将其存储为实体，然后将其发送回客户端。当我存储单词“You're”时，它会像往常一样在 GAE 本地存储中显示为“You're”。但是，当我将它返回给客户端时，我得到“Youâre”，并且调试代码有时会显示“Youâ??re”。我正在使用 Java Text 类来存储此文本。

如何确保可以正确存储任何 Unicode 字符？看起来客户端->服务器很好，因为文本没有改变，但服务器->客户端肯定搞砸了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:15:35.433

大多数时候我看到这个问题，要么页面没有声明它正在使用 UTF-8，通过类似的东西

> `<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`

或未`accept-charset`在表单中设置。

这两种情况中的任何一种都可以吗？

# javascript - Javascript Background Color Fade RGB 算法问题

> ID：15169653
> 
> 赞同：1
> 
> 时间：2013-03-02T01:32:44.877
> 
> 标签：javascript, html, background-color, rgb

我正在尝试实现一段在java中工作的代码，该代码采用RGB并基于数组淡入下一个颜色，并将taht RGB更改为十六进制以便javascript理解它。（我确实更改了数组和变量以与 javascript 兼容）......然而，它似乎仍然不起作用。我试图排除故障并找到解决方案，但找不到任何解决方案。我一直注意到的问题是蓝色似乎被跳过了，而绿色被改变了。我认为设定点以某种方式设置为负数，尽管我不知道在哪里以及为什么。感谢您的帮助（对不起，如果代码和这段文字有点长）

```
var curColorHex;
var targetRGBVals = [];
var rgbIncrement;
var nextRainbowVal = [];
    nextRainbowVal[0]=255;
    nextRainbowVal[1]=0;
    nextRainbowVal[2]=0;//RED

    nextRainbowVal[3]=255;
    nextRainbowVal[4]=165;
    nextRainbowVal[5]=0;//Orange

    nextRainbowVal[6]=255;
    nextRainbowVal[7]=255;
    nextRainbowVal[8]=0;//Yellow

    nextRainbowVal[9]=0;
    nextRainbowVal[10]=255
    nextRainbowVal[11]=0;//Green

    nextRainbowVal[12]=0;
    nextRainbowVal[13]=0;
    nextRainbowVal[14]=255;//Blue

    nextRainbowVal[13]=111;
    nextRainbowVal[14]=0;
    nextRainbowVal[15]=255;//Indigo

    nextRainbowVal[16]=143;
    nextRainbowVal[17]=0;
    nextRainbowVal[18]=255;//Violet

var rgbVals = [];
var curColor = [];
var colorIndex;
var equal = [];

function onPageLoad(){//this is only code specific to my problem, none of the other code
    colorIndex=0;
    equal[0]=true;
    equal[1]=true;
    equal[2]=true;

    rgbIncrement=1;//+1 so increment can't equal 0
    curColor[0]=nextRainbowVal[0];
    curColor[1]=nextRainbowVal[1];
    curColor[2]=nextRainbowVal[2];

    setInterval("backgroundChange();",10);

}//onPageLoad

function backgroundChange(){//all for loops are set to 3 because RGB never goes above 3 different variables (less chance of error)
    for(var i=0;i<3;i++){
    rgbVals[i]=curColor[i];
    }//for

    targetRGBVals[0] = nextRainbowVal[colorIndex];//Initializes the targetRGB val
    targetRGBVals[1] = nextRainbowVal[colorIndex+1];
    targetRGBVals[2] = nextRainbowVal[colorIndex+2];

    for(var i=0; i<3; i++){//for loop to see if it has reached target
        if(targetRGBVals[i] != rgbVals[i]){
            equal[i] = false;
        }//if
        else equal[i]=true;
    }//for

    if(equal[0]&&equal[1]&&equal[2]){//changes setpoints after the RGB vals have reached their target
        if(colorIndex>(nextRainbowVal.length-3)){//this keeps setting the color index to next color when the curColor is at target, if it gets to the last color, it resets at beginning of array
            colorIndex = 0;
        }//if

        for(var g = 0; g<targetRGBVals.length; g++){//this sets the next target RGB vals
            targetRGBVals[g] = nextRainbowVal[colorIndex+g];
        }//for

        colorIndex += 3;
    }//if

    for(var m = 0; m<rgbVals.length; m++){//this loop adds/subtracts from RGB vals by the increment, and also checks if the color is within the amount of the increment (so it doesn't bounce back and forth between colors)                        
        if((rgbVals[m] != targetRGBVals[m])&& !equal[m]){
            if((rgbVals[m]>=(targetRGBVals[m] - rgbIncrement))&&(rgbVals[m]<=(targetRGBVals[m] + rgbIncrement))) rgbVals[m] = targetRGBVals[m];
            else rgbVals[m] += targetRGBVals[m] > rgbVals[m] ? +rgbIncrement : -rgbIncrement;
            if(rgbVals[m]<0) rgbVals[m]=0;
        }//if
    }//for

    curColor = rgbVals;
    console.log(curColor);
    console.log(rgbToHex(curColor[0],curColor[1],curColor[2]));
    hexColor = rgbToHex(curColor[0],curColor[1],curColor[2]);
    document.getElementById("bodyColor").style.backgroundColor=hexColor;
}//backgroundChange

function componentToHex(c){
    console.log(c);
    var hex = c.toString(16);
    return hex.length == 1 ? "0" + hex : hex;
}//componentToHex

function rgbToHex(r,g,b){
    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
}//rgbToHex 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:40:22.953

假设这只不过是吸引眼球，那么浏览器支持不是主要问题。如果是这种情况，那么以下内容将适用于除 IE 9 及以下版本（但它确实适用于 IE 10）：

CSS：

```
#bodyColor {
    animation: holyfuckrainbows 10s linear;
    -webkit-animation: holyfuckrainbows 10s linear;
}
@keyframes holyfuckrainbows {
    0% {background-color:#f00}
    16% {background-color:#f80}
    33% {background-color:#ff0}
    50% {background-color:#0f0}
    66% {background-color:#00f}
    83% {background-color:#70f}
    100% {background-color:#90f}
}
@-webkit-keyframes holyfuckrainbows {
    0% {background-color:#f00}
    16% {background-color:#f80}
    33% {background-color:#ff0}
    50% {background-color:#0f0}
    66% {background-color:#00f}
    83% {background-color:#70f}
    100% {background-color:#90f}
} 
```

不需要 JavaScript。根据需要调整 10 秒以延长或缩短彩虹的持续时间。

如果需要循环播放，可以`infinite`在`10s`.

# ruby-on-rails - socket.io 断开连接并关闭浏览器

> ID：15169659
> 
> 赞同：0
> 
> 时间：2013-03-02T01:33:51.750
> 
> 标签：ruby-on-rails, node.js, socket.io

我在我的 Rails 应用程序上使用 socket.io 在数据库上在线/离线服务器用户，我使用 Redis 存储数据，0 用于离线，1 用于我的 app.js 文件的在线状态

```
 ```
var app = require('express')()
, redis = require('redis')
, client = redis.createClient()
, server = require('http').createServer(app)
, io = require('socket.io').listen(server);

server.listen(80);

io.sockets.on('connection', function (socket) {
console.log("client connected")

socket.on('join',function(userid){
socket.set('userid',userid);

var utm ="user:"+userid+":online_status";
client.set(utm,1);

});
socket.on('disconnect',function(userid){
socket.get('userid',function(err,userid){
var utm ="user:"+userid+":online_status";
client.set(utm,0);
});
});
}); 
``` 
```

`在我的 application.html 布局中，我的 application.js 文件中已经包含了 socket.io.js 并且它运行良好`

 ````
 var socket = io.connect('http://localhost:80');

     socket.on('connect',function(data){
      var userID = current_user.id;
      socket.emit('join',userID);

     }); 
```

除了当用户同时打开两个窗口时，一切都工作正常，如果他关闭一个窗口断开事件触发并且他的状态变为离线，我怎样才能使断开事件仅在用户关闭所有窗口时才起作用而不是一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:40:52.103

代替二进制文件来存储状态，也许使用连接计数器。连接时递增，断开时递减。当它为 0 时，用户已关闭所有窗口。

您还可以考虑这些计数器的过期时间，以防用户以阻止断开连接事件触发的方式消失（例如浏览器崩溃、网络断开连接等）。

这段代码是近似的，但试试看：

```
socket.on('join',function(userid){
    socket.set('userid',userid);
    var utm ="user:"+userid+":online_status";
    client.incr(utm);
});

socket.on('disconnect',function(userid){
  socket.get('userid',function(err,userid){
    var utm ="user:"+userid+":online_status";
    client.decr(utm);
  });
}); 
````

# python - 按二进制列表格式化字符串

> ID：15169663
> 
> 赞同：4
> 
> 时间：2013-03-02T01:35:04.230
> 
> 标签：python

以相同长度的字符串和二进制列表为例：

```
[0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0]
 s  t  a  c  k  o  v  e  r  f  l  o  w 
```

是否有可能获得`-t-c-over----`如下的新字符串：

```
[0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0]
 -  t  -  c  -  o  v  e  r  -  -  -  - 
```

也就是说，每个匹配的字符`0`都将被替换为`-`. 所需的输出将是如下列表，其中字母匹配`1`和连字符匹配`0`分别分组：

```
['-', 't', '-', 'c', '-', 'over', '----'] 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T02:05:31.240

How about something like this? Zip the two lists and iterate and build the output. Keep the last binary value to determine whether you should append or concat.

```
blist = [0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0]
string = 'stackoverflow'
output = []    
previous = not blist[0] # to cause the first char to be appended

for b,s in zip(blist, string):
    char = '-' if b == 0 else s

    if previous == b:
        output[-1] += char         
    else:
        output.append(char)

    previous = b

print(output) 
```

Another option is regex:

```
import re

blist = [0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0]
string = 'stackoverflow'

x = ''.join(['-' if b == 0 else s for b,s in zip(blist, string)])
output = re.findall('(-+|[a-z]+)', x)

print(output) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T02:16:46.790

您可以享受迭代器的乐趣（无需 zip！:)

```
it = iter([0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0])
s = 'stackoverflow'

output = [''.join(('-' for i in b) if not a else b)
          for a,b in 
          itertools.groupby(s, key=lambda x: next(it))] 
```

所以输出将是：

```
['-', 't', '-', 'c', '-', 'over', '----'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T04:04:45.777

您[上一个问题](https://stackoverflow.com/questions/15151011/match-character-from-string-with-binary-list)的[答案](https://stackoverflow.com/a/15151027/977038)可能会稍作修改以获得所需的结果

第一个答案：

给定

```
[''.join(v) for k, v in groupby(st, key = lambda e:next(it_lst))] 
```

修改的

```
[''.join(v if k else ('-' for _ in v)) 
 for k, v in groupby(st, key = lambda e:next(it_lst))] 
```

第二个答案

给定

```
[''.join(zip(*v)[-1]) 
 for k, v in groupby(zip(lst, st), key = itemgetter(0)) if k] 
```

修改的

```
[''.join(zip(*v)[-1] if k else ('-' for _ in v)) 
 for k, v in groupby(zip(lst, st), key = itemgetter(0))] 
```

**注意** 您需要做的就是

1.  停止忽略`0`条目
2.  对于每个`0`条目，创建一个长度等于下分组字符串的字符串`0`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T05:32:40.870

你可以这样做：

```
string = "stackoverflow"
arr = [0,1,1,0,1,0,1,0,1,0,0,1,0]
new = ""
for i in range(len(arr)):
    new += string[i]*arr[i] +"-"*(abs(arr[i]-1)) 
```

这利用了字符串乘以 0 是一个空字符串。

然后您可以使用正则表达式将其拆分为字符串列表

```
import re
list = re.findall("-+|[A-z]+", new) 
```

`"-+|[A-z]+"`匹配长度大于 1 的破折号字符串或长度大于 1 的字母字符串的模式。

# java - 具有 ActionListener 和 DocumentListener 的 JTextField

> ID：15169674
> 
> 赞同：1
> 
> 时间：2013-03-02T01:36:49.337
> 
> 标签：java, swing, actionlistener, jtextcomponent, documentlistener

我在一个非常简单的 JFrame 上有几个 JTextField。字段 1 首先获得焦点。当用户输入一个数字并按 Enter 键时，我希望焦点切换到字段 2。为此，我将一个 ActionListener 附加到字段 1。我还有一个附加到字段 1 的文档侦听器，它只允许输入整数进入这个领域。

文档侦听器首先就位，它可以按我的意愿工作。然后我添加了 ActionListener，我认为（但我不确定）我的代码对此是否正确。但是，当我测试代码时，回车键似乎根本没有效果。我怀疑问题是两个侦听器之间的冲突，因为文档侦听器可能在 ActionListener 对它做出反应之前“吞下”了 enter 键。

我的代码如下。我对吗？我该如何纠正？谢谢！

```
 txtNum1.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void insertUpdate(DocumentEvent e) {
                setAnswer(e);
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
                setAnswer(e);
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
                setAnswer(e);
            }

            private void setAnswer(DocumentEvent e) {
                if (txtNum1.getText().equals("")) {
                    num1 = 0;
                } else {
                    num1 = Integer.parseInt(txtNum1.getText());
                }
                calcAnswer(o);
            }
        });

        /* If the user hits the Enter key, we want the focus to shift to
         * the next text field */
        txtNum1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("here"); //never ouputs
                txtNum2.requestFocusInWindow();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:20:53.887

如果没有工作示例，就不可能准确诊断您的问题。

但是，根据您的描述，我建议您放弃`ActionListener`使用[Focus SubSystem](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)。

以下示例演示了如何更改焦点转移键以及`DocumentFilter`（但我认为 a `DocumentListener`or`FocusListener`就足以执行您的计算方法）

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.KeyboardFocusManager;
import java.awt.event.KeyEvent;
import java.util.HashSet;
import java.util.Set;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class TestDocumentFilter03 {

    public static void main(String[] args) {
        new TestDocumentFilter03();
    }

    public TestDocumentFilter03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public static class TestPane extends JPanel {

        private JTextField field1 = createTextField("1");
        private JTextField field2 = createTextField("2");
        private JTextField field3 = createTextField("3");
        private JTextField field4 = createTextField("4");
        private JTextField field5 = createTextField("5");
        private JTextField field6 = createTextField("6");
        private JTextField field7 = createTextField("7");
        private JTextField field8 = createTextField("8");
        private JTextField field9 = createTextField("9");

        public TestPane() {
            // Set up enter for focus transfer...
            Set forwardKeys = getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS);
            Set newForwardKeys = new HashSet(forwardKeys);
            newForwardKeys.add(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0));
            setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS,
                            newForwardKeys);

            setLayout(new GridBagLayout());

            add("Field #1: ", field1, 0, 0);
            add("Field #2: ", field2, 2, 0);
            add("Field #3: ", field3, 4, 0);
            add("Field #4: ", field4, 6, 0);
            add("Field #5: ", field5, 8, 0);
            add("Field #6: ", field6, 2, 1);
            add("Field #7: ", field7, 4, 1);
            add("Field #8: ", field8, 6, 1);
            add("Field #9: ", field9, 8, 1);
        }

        protected static JTextField createTextField(String text) {
            JTextField field = new JTextField(text, 10);
            ((AbstractDocument)field.getDocument()).setDocumentFilter(new IntegerFilter());
            return field;
        }

        protected void add(String label, JTextField field, int x, int y) {
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridy = y;
            gbc.gridx = x;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.anchor = GridBagConstraints.EAST;
            add(new JLabel(label), gbc);
            gbc.gridx++;
            add(field, gbc);
        }

    }

    public static class IntegerFilter extends DocumentFilter {

        @Override
        public void insertString(DocumentFilter.FilterBypass fb, int offset,
                                                         String string, AttributeSet attr)
                        throws BadLocationException {

            StringBuilder buffer = new StringBuilder(string);
            for (int i = buffer.length() - 1; i >= 0; i--) {
                char ch = buffer.charAt(i);
                if (!Character.isDigit(ch)) {
                    buffer.deleteCharAt(i);
                }
            }
            super.insertString(fb, offset, buffer.toString(), attr);
        }

        @Override
        public void replace(DocumentFilter.FilterBypass fb,
                                                int offset, int length, String string, AttributeSet attr) throws BadLocationException {
            if (length > 0) {
                fb.remove(offset, length);
            }
            insertString(fb, offset, string, attr);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T16:31:53.440

我认为您的代码的问题在于按下 ENTER 键未注册为 ActionEvent。相反，按下 ENTER 键可以被检测为 KeyEvent。因此，而不是实现事件处理程序如下：

```
/* If the user hits the Enter key, we want the focus to shift to
         * the next text field */
        txtNum1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("here"); //never ouputs
                txtNum2.requestFocusInWindow();
            } 
```

您将需要执行以下操作：

```
txtNum1.addKeyListener(new KeyListener() {
    public void keyPressed(KeyEvent e) {
        int key = e.getKeyCode();
        if (key == KeyEvent.VK_ENTER) {
            System.out.println("here");
            txtNum2.requestFocusInWindow();
        }
    } 
```

当然，我的回答部分来源于以下来源： [http ://www.rgagnon.com/javadetails/java-0253.html](http://www.rgagnon.com/javadetails/java-0253.html)

# collision-detection - KineticJS 命中区域图像碰撞检测

> ID：15169676
> 
> 赞同：1
> 
> 时间：2013-03-02T01:36:56.063
> 
> 标签：collision-detection, kineticjs

有什么方法可以检测形状或点是否在图像命中区域中？事件处理“on”功能似乎只处理鼠标/触摸事件。

如果没有，那么在地图上获取碰撞边界的最佳方法是什么。我计划这样做的方式是在其下方放置地图和墙贴图，使用墙贴图创建一个命中区域并检测角色是否击中它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:31:16.337

是的，只需使用 getPointerPosition() 方法获取鼠标/触摸位置，然后使用 intersects() 方法测试交叉点：

[http://kineticjs.com/docs/Kinetic.Stage.html#getpointerposition](http://kineticjs.com/docs/Kinetic.Stage.html#getpointerposition) [http://kineticjs.com/docs/Kinetic.Shape.html#intersects](http://kineticjs.com/docs/Kinetic.Shape.html#intersects)

# r - 估计 R 中 X 和 Y 之间的关系

> ID：15169678
> 
> 赞同：-6
> 
> 时间：2013-03-02T01:37:28.047
> 
> 标签：r, function, relationship

我想使用 P（见下文）在 (0, 10) 上的 100 个相等点处估计 X 和 Y（来自数据 m）之间的关系。我如何使用 R 来做到这一点？

```
> m
      X        Y
1     0.5      6.0
2     1.5      5.0
3     2.5      6.7
4     3.5      7.1
5     4.5      6.1
6     5.5      8.1
7     6.5      8.0
8     7.5      7.9
9     8.5      8.0
10    9.5      6.0 
```

(1)

```
 P=function(x,X,Y,sigma){
  # x = point to evaluate our estimate.
  # X = vector of observation X values
  # Y = vector of observation Y values
  # sigma = standard deviation.

  weights = rep(0,length(X)) 
  sumweights = 0              
  smooth = 0                  

  for(i in 1:length(X)){

    weights[i] = dnorm(x,mean=X[i],sd=sigma)

    sumweights = sumweights + weights[i]

    smooth = smooth + weights[i]*Y[i]
  }

  return( smooth/sumweights )
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T02:56:58.710

我不确定您要做什么，但是您说“我想估计 X 和 Y 之间的关系”，这听起来像是试图将函数拟合到您的数据集。探索未知关系数据的一种方法是绘制它并尝试猜测变量之间的数学关系。例如：

```
m <- read.table(header=T, text='
       X        Y
     0.5      6.0
      1.5      5.0
      2.5      6.7
      3.5      7.1
      4.5      6.1
      5.5      8.1
      6.5      8.0
      7.5      7.9
      8.5      8.0
     9.5      6.0')

with(m,plot(X,Y)) 
```

现在尝试对您的数据进行线性回归。

```
lm_xy <- lm(Y~X,m)

abline(lm_xy,col='blue')

summary(lm_xy) 
```

这看起来不太合适，但您可以使用`lm`,`nls`和其他包来寻找更好的模型。

例如，尝试：

```
pn_xy <- nls(Y ~ a*(X - b)^2 + c, start = c(a=0.05, b=8, c=8),data=m)

lines(m$X,predict(pn_xy,m$X),col='red')

summary(pn_xy) 
```

你可以在这里看到不同的模型：

![在此处输入图像描述](../Images/cfe184c075848812803343b4c0d1f67e.png)

# c# - 如何在 C# 中将日期时间转换为特定时区？

> ID：15169679
> 
> 赞同：17
> 
> 时间：2013-03-02T01:37:34.330
> 
> 标签：c#

我需要帮助将 a 转换`DateTime`为特定时区。我下面的内容无法正常工作。

`gmTime`=`03/02/2013 1:00:00 AM`

```
 TimeZoneInfo timeZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
 var time = timeZoneInfo.ConvertTime(gmTime, timeZone); 
```

当我调试 的值时`time`，应该`03/01/2013 8:00:00 PM`是应用区域时，它返回为`03/02/2013 1:00:00 AM`.

如果我这样做，`time.ToLocalTime()`那么我会得到正确的值。但是，我需要转换`time`到不同的时区。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-02T15:31:40.260

DateTime 对象有一个“Kind”变量，它可以帮助 TimeZoneInfo 知道如何处理它。在 TimeZone.ConvertTime 的[MSDN 文档](http://msdn.microsoft.com/en-us/library/bb382835.aspx)中，它具有以下内容：

> DateTimeKind.Local，将本地时间转换为destinationTimeZone 中的时间。
> 
> DateTimeKind.Utc，将协调世界时 (UTC) 转换为 destinationTimeZone 中的时间。
> 
> DateTimeKind.Unspecified，假定为本地。

例如：

```
 Console.WriteLine("Local time zone is '{0}'.", TimeZoneInfo.Local.Id);

  var gmTime          = new DateTime(2013, 03, 02, 01, 00, 00, DateTimeKind.Utc);
  var localTime       = new DateTime(2013, 03, 02, 01, 00, 00, DateTimeKind.Local);
  var unspecifiedTime = new DateTime(2013, 03, 02, 01, 00, 00);

  var timeZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");

  var gmTimeConverted           = TimeZoneInfo.ConvertTime(gmTime,          timeZone); // 03/02/2013 8:00:00AM
  var localTimeConverted        = TimeZoneInfo.ConvertTime(localTime,       timeZone); // 03/02/2013 
  var unspecifiedTimeConverted  = TimeZoneInfo.ConvertTime(unspecifiedTime, timeZone);

  Console.WriteLine("Converting GMT         to EST: {0}", gmTimeConverted);
  Console.WriteLine("Converting Local       to EST: {0}", localTimeConverted);
  Console.WriteLine("Converting Unspecified to EST: {0}", unspecifiedTimeConverted); 
```

结果是：

```
当地时区是“太平洋标准时间”。
将 GMT 转换为 EST：2013 年 3 月 1 日晚上 8:00:00
将本地转换为 EST：2013 年 3 月 2 日凌晨 4:00:00
将未指定转换为 EST：2013 年 3 月 2 日凌晨 4:00:00

```

或者，如果您当地的时区是“东部标准时间”，您会得到这些结果

```
当地时区是“东部标准时间”。
将 GMT 转换为 EST：2013 年 3 月 1 日晚上 8:00:00
将本地转换为 EST：2013 年 3 月 2 日凌晨 1:00:00
将未指定转换为 EST：2013 年 3 月 2 日凌晨 1:00:00

```

如果您希望 TimeZoneInfo 像 Utc 一样对待“未指定”，您应该像 TimeZoneInfo.ConvertTimeFromUtc 一样运行。再次来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttimefromutc.aspx)

> DateTimeKind.Local，引发 ArgumentException。
> 
> DateTimeKind.Unspecified 或 DateTimeKind.Utc，从协调世界时 (UTC) 转换而来。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-02T01:40:30.893

尝试类似下面的 Chace

```
TimeZoneInfo estTimeZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
DateTime estDateTime = TimeZoneInfo.ConvertTimeFromUtc(timeUtc, estTimeZone); 
```

# java - --Java-- 服务器无法正确播放来自客户端的音频 --Real Time Streaming--

> ID：15169680
> 
> 赞同：2
> 
> 时间：2013-03-02T01:37:39.880
> 
> 标签：java, sockets, audio, tcp, real-time

我有一个客户端和服务器应用程序。服务器请求音频流，客户端处理得很好。

客户端继续设置 AudioFormat（注意：两端的设置相同）和 TargetDataLine。然后，它使用 ByteArrayOutput 流将数据写入 Socket 输出流。

服务器接收数据并以线程方法读取它。在每个缓冲区读取期间，它会保存到 AudioInputStream，该 AudioInputStream 被传递给 playSound 方法，该方法被线程化并同步以继续播放声音。

当我将 playSound 方法设为非线程时，它运行良好但略有故障。我也知道播放声音非线程会导致声帧卡住任何帮助都非常感谢，并且我可以使这个音频流更高效和快速的任何方法也受到欢迎。

客户：

私有 void captureAudio() 抛出 CommandException {

```
 Socket session = new Socket(host_, port_); 
        try {
            final AudioFormat format = getFormat();
            DataLine.Info info = new DataLine.Info(
            TargetDataLine.class, format);
            final TargetDataLine line = (TargetDataLine)
            AudioSystem.getLine(info);
            line.open(format);
            line.start();

            int bufferSize = (int)format.getSampleRate() * format.getFrameSize();
            byte buffer[] = new byte[bufferSize];
            running = true;
                try {         
                    while (running) {

                            int count = line.read(buffer, 0, buffer.length);
                            if (count > 0) {
                               BufferedOutputStream out_ = null;
                               out_ = new BufferedOutputStream(socket_.getOutputStream());
                               out_.write(buffer, 0, count);
                               out_.flush();

                              }    
                    }
                    out_.close();
                    line.close();
                } catch (IOException e) {
                    throw new CommandException("I/O problems: " + e,Command.TRANSFER_ERROR);
                } 
        } catch (LineUnavailableException e) {
            throw new CommandException("Line unavailable: " + e,Command.ERROR);
        }
    else {
        throw new CommandException("Unable to Connect to Server",Command.CONNECTION_ERROR);
    }
}

private AudioFormat getFormat() {
    float sampleRate = 16000;
    int sampleSizeInBits = 16;
    int channels = 2;
    boolean signed = true;
    boolean bigEndian = true;
    return new AudioFormat(sampleRate,sampleSizeInBits, channels, signed, bigEndian); 
```

}

服务器：public void readSocket(final Socket socket) { new Thread() {

```
 @Override
        public void run() {
            InputStream input;
            try {
                input = socket.getInputStream();

                final AudioFormat format = getFormat();
                int bufferSize = (int)format.getSampleRate() * format.getFrameSize();
                byte buffer[] = new byte[bufferSize];
                int bytesRead;
                while (((bytesRead = input.read(buffer, 0, bufferSize)) != -1 ) ) {
                    if (bytesRead > 0) {
                        play(new AudioInputStream(input, format, buffer.length / format.getFrameSize()));
                    }
                }
                socket.close();
            } catch (Exception ex) {

            }

        }
    }.start();

}

private AudioFormat getFormat() {
  float sampleRate = 16000;
  int sampleSizeInBits = 16;
  int channels = 2;
  boolean signed = true;
  boolean bigEndian = true;
  return new AudioFormat(sampleRate, 
    sampleSizeInBits, channels, signed, bigEndian);
} 
```

私有同步无效播放（最终 AudioInputStream ais）{新线程（）{

```
 @Override
        public void run() {
            try {
                final AudioFormat format = getFormat();
                DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);
                SourceDataLine line = (SourceDataLine)AudioSystem.getLine(info);
                line.open(format);
                line.start();

                int bufferSize = (int) format.getSampleRate() 
                  * format.getFrameSize();
                byte buffer[] = new byte[bufferSize];

                int count;
                while ((count = ais.read(buffer, 0, buffer.length)) != -1) {
                  if (count > 0) {
                    line.write(buffer, 0, count);
                  }
                }
                line.drain();
                line.close();
                ais.close();
            } catch (LineUnavailableException ex) {
            } catch (IOException ex) {

            }
        }
    }.start(); 
```

}

# iphone - iOS 捕捉视频

> ID：15169681
> 
> 赞同：0
> 
> 时间：2013-03-02T01:37:44.483
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller, avfoundation

我想为 iPhone 制作一个能够录制视频的应用程序。录制视频后，我想做的一件事是从中获取音频并对其进行更改，例如使其听起来女性化或男性化等。我以前从未这样做过，但是使用 AVFoundation 或 UIImagePickerController 更好. 我读过 UIImagePickerController 更易于使用，但它是否允许提取和编辑录制视频的音频并将其放回原处？

任何有关如何解决此问题的帮助或建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:50:34.613

如果您不需要实时更改它，则使用 UIImagePickerController 最容易捕获。一旦视频被捕获并且您以某种方式更改了音轨，请使用 AVFoundation 的 AVMutableComposition 和音频混合再次编写它。

# prolog - 为什么`swipl -q`需要更多的RAM并且启动缓慢？

> ID：15169682
> 
> 赞同：0
> 
> 时间：2013-03-02T01:37:47.333
> 
> 标签：prolog, swi-prolog

我正在使用 swi-prolog 版本：6.3.11。而且没有~/.plrc。 `swipl -q`启动速度非常慢，需要更多 RAM `top`：

```
size:315M   RES:210M
?- listing.
:- thread_local thread_message_hook/3.
:- dynamic thread_message_hook/3.
:- volatile thread_message_hook/3. 
```

但是，`swipl -q -f foo.pl`启动非常快并且需要很少的 RAM：

```
size:11160K  RES:4236K 
```

我正在 FreeBSD 9 上构建 pl-devel。（我猜`swipl -q`使用了我找不到的系统范围的初始文件？）

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:49:38.920

给你几个想法：

如果将 foo.pl 文件的内容放入主目录中的新 .plrc 文件中会发生什么？

如果你执行“swiple -q -f none”会发生什么

我不知道术语；但我想一定有一个命令可以显示所有已定义的规则......如果你运行慢速滑动命令，你能比较一下有多少规则与使用 -f 参数运行时得到的规则相比吗？

# php - php chmod() 不改变权限

> ID：15169684
> 
> 赞同：9
> 
> 时间：2013-03-02T01:38:06.580
> 
> 标签：php, permissions, file-permissions, chmod, writable

我在使用图片上传脚本时遇到问题。

我知道有数百个相同的问题，但我还没有找到适合我的问题。

```
$upload_dir = "images/postcards/";
chmod($upload_dir, 777);
if (is_writable($upload_dir)) {
    echo 'The file is writable';
} else {
    echo 'The file is not writable';
} 
```

这总是返回文件“不可写”

我尝试设置`chmod`为`0777`和`-rwxrwxrwx`。但结果总是一样的。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T01:40:54.653

该目录必须由调用脚本的用户拥有（通常`www-data`，`apache`或者`httpd`如果您在 apache/*NIX 设置中运行脚本）。用户不能对它不拥有的目录设置 777 权限。

请参阅 chmod()[手册](http://php.net/manual/en/function.chmod.php)上的注释：

> 当前用户是运行 PHP 的用户。它可能与您用于正常 shell 或 FTP 访问的用户不同。在大多数系统上**，只有拥有该文件的用户**才能更改模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T01:58:28.630

首先，通过在代码顶部添加两行来打开 PHP error_report，查看 chmod 是否有错误：

```
ini_set('display_errors', true);
error_reporting(E_ALL); 
```

确保您的 WebServer 具有该目录的权限，我的猜测是 WebServer 没有权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T08:23:36.573

我在使用 chmod 时遇到了类似的问题，尽管该文件归 apache:apache （网络服务器用户）所有。在我的情况下，SELinux 阻碍了它，禁用它清楚地表明了这一点：

> 须藤 setenforce 0

并且 chmod 有效。现在开始弄清楚如何为这种情况创建一个 SELinux 异常......（当然，不要忘记启用 SELinux）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T16:31:49.730

我已经遇到了同样的问题，您可以通过以下代码更改文件的权限：

```
<?php
$ftp_details['ftp_user_name'] = 'your ftp username';
$ftp_details['ftp_user_pass'] = 'your ftp password';
$ftp_details['ftp_root'] = '/public_html/';
$ftp_details['ftp_server'] = 'ftp' . $_SERVER['HTTP_HOST'];
function ftp_chmod($path, $mod, $ftp_details) {
  extract($ftp_details);
  $conn_id = ftp_connect($ftp_server);
  $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// try to chmod $path directory
  if (ftp_site($conn_id, 'CHMOD ' . $mod . ' ' . $ftp_root . $path) !== false) {
    $success = true;
  }
  else {
    $success = false;
  }

  ftp_close($conn_id);
  return $success;
}
?> 
```

我没有运行这段代码，但我认为没关系，它会对你有所帮助。告诉我你的问题是否解决了。

# .net - 使用 JSON.Net Serializer 序列化对象时更改 JsonProperty 名称

> ID：15169688
> 
> 赞同：0
> 
> 时间：2013-03-02T01:38:30.123
> 
> 标签：.net, vb.net, json, json.net

我有：

```
Public Class Ticket
  Private _ITicketStyle as ITicketStyle
  Public Property TicketStyle() as ITicketStyle
    Get
      Return _ITicketStyle
    End Get
    Set(value as ITicketStyle)
      _ITicketStyle = value
    End Set
  End Property
End Class

Public Class FlightTicket
    Implements ITicketStyle
    Public Property city() as String
End Class

Public Class MovieTicket
    Implements ITicketStyle
    Public Property name() as String
End Class 
```

和：

```
Dim ft as New Ticket()
ft.Ticket = New FlightTicket With { .city="NY" }
Dim output1 as String = JsonConvert.SerializeObject(ft) 
```

我得到：`output1 = {"TicketStyle":{"city" : "NY"}}`

与：

```
Dim mt as New Ticket()
mt.Ticket = New MovieTicket With { .name="Transformers" }
Dim output2 as String = JsonConvert.SerializeObject(mt) 
```

我得到：`output2 = {"TicketStyle":{"name" : "Transformers"}}`

但是我需要：

```
output1 = {"FlightTicket":{"city": "NY"}} and 
output2={"MovieTicket": {"name": "Transformers"}} 
```

有没有办法实现这一目标？我可以申请`JsonProperty("FlightTicket")`属性`TicketStyle`，但需要将`MovieTicket`对象分配给`TicketStyle`属性时将其更改为“MovieTicket”。

# facebook - 是否可以启动仅供某些用户使用的 facebook 应用程序

> ID：15169692
> 
> 赞同：1
> 
> 时间：2013-03-02T01:39:07.230
> 
> 标签：facebook, login-control

基本上我想创建一个游戏，但我希望它只能由我大学的学生玩。他们应该使用facebook提供的方式登录他们的facebook帐户，然后输入他们的学生证和密码来玩游戏。这是脸书允许的还是游戏必须向公众开放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:14:35.013

是的，您可以根据应用/游戏是否是大学网络的一部分来选择允许或拒绝进入。没有要求应用程序本身可供所有人使用。

# ubuntu - Ubuntu 的设置应用程序用于列表的小部件是什么？

> ID：15169695
> 
> 赞同：1
> 
> 时间：2013-03-02T01:40:04.130
> 
> 标签：ubuntu, gtk, gnome, glade

在 Ubuntu 中，设置应用程序中有几个地方有一个非常漂亮的列表视图，带有添加/删除按钮，包括外观、键盘布局、隐私、蓝牙等。他们使用什么小部件？我开始使用 Glade 开发我的第一个 Ubuntu 应用程序，并且需要那个界面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T20:01:36.267

该代码位于[GNOME 控制中心中](http://git.gnome.org/browse/gnome-control-center/)，它不是小部件。列表有一个 GtkTreeView，在它下面，有一个带有两个按钮的 GtkToolbar（使用符号图标`list-add-symbolic`和`list-remove-symbolic`）。代替 GtkTreeView 可以是另一个小部件，但布局是相同的。

您可以看到每个`panel`. 例如，[用户帐户](http://git.gnome.org/browse/gnome-control-center/tree/panels/user-accounts/data/user-accounts-dialog.ui)。

# node.js - 如何访问这个封装的值？

> ID：15169708
> 
> 赞同：1
> 
> 时间：2013-03-02T01:41:09.037
> 
> 标签：node.js

我正在使用属于模块的方法作为来自服务器的函数中的回调。

`MyArray`通过这种方法，我需要访问封装在模块 ( )中的数组。

我不能使用`this`，因为它指的是原始函数（`someFunction`在我的示例中）。`that: this`但我不明白为什么在这种情况下我不能使用该功能（ `that is undefined`）。

**MyModule.js**

```
module.exports = {
  MyArray: [],
  that: this,
  test: functiion() {
    //How to access MyArray ?
  }
}; 
```

**服务器.js**

```
var MyModule = require('MyModule');
someFunction(MyModule.test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:43:09.163

`this.MyArray`作品。

`MyModule.test`必然`this`等于`module.exports`

您也可以只在模块中使用局部变量。

### MyModule.js

```
var MyArray = [];

module.exports = {
  test: function() {
    // MyArray is accessible
  }
}; 
```

你也可以使用`module.exports.MyArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:49:39.397

您可以使用将您想要的函数[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)绑定`this`到该函数，以便即使将其用作回调`this`也是正确的：

**MyModule.js**

```
module.exports = {
  MyArray: []
};
module.exports.test = (function() {
  console.log(this.MyArray); // works here even when not called via MyModule.test
}).bind(module.exports); 
```

# ember.js - 管理和编译大型 emberjs 应用程序

> ID：15169709
> 
> 赞同：2
> 
> 时间：2013-03-02T01:41:25.870
> 
> 标签：ember.js

Ember 似乎不能很好地与 requirejs 或使用 r.js 构建而没有一些hackery。

管理大型应用程序有点困难，我喜欢将我的文件结构分解为 HMVC，它更容易管理模块：

```
app
  - blah
  - modules
      -module1
       - controller
       - model 
       - view. 
```

有没有人想出一个构建堆栈来通过依赖管理自动编译成单个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:21:07.967

**更新**：您现在应该使用[ember-cli](https://github.com/stefanpenner/ember-cli)开始新项目，它提供了所有构建/开发工具以及许多其他有用的功能。

* * *

**原答案：**

一个使用[grunt.js](http://gruntjs.com/)作为构建系统的 Ember 项目示例：

[https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)

我已将此作为一些 Ember 应用程序的起点，并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:57:10.317

> Ember 似乎不能很好地与 requirejs 或使用 r.js 构建而没有一些hackery。

为什么要首先使用`require.js`？

至于使这一切正常工作，您将需要一个构建工具。我推荐[早午餐](http://brunch.io)（Node）或[铱星](https://github.com/radiumsoftware/iridium)（Ruby）。Brunch 更简单，支持多种不同的模块格式。铱星更强大。它使用 Minispade 作为模块。不需要 Require.js/AMD，因为您的 js 始终作为单个连接文件交付。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T02:32:33.243

对于独立的 ember 开发，我使用 ember-skeleton 作为起点，它本身主要基于 rake-pipeline。

[https://github.com/interline/ember-skeleton](https://github.com/interline/ember-skeleton)

这为开始一个应用程序提供了整个工具包和 kaboodle，但它的核心是 rake-p Assetfile，它描述了 rake-pipeline 如何消化所有文件，过滤它们的内容，并最终将它们组合成最后的少数的文件。此外，loader.js 和 minispade 过滤器的组合允许使用“require()”语句来管理文件之间的依赖关系。

# vb.net - 如何在 vb.net 中使用 savefiledialog - 请帮助我

> ID：15169711
> 
> 赞同：-1
> 
> 时间：2013-03-02T01:41:27.477
> 
> 标签：vb.net, textedit

我有一个名为 TextEditPro 的程序，我刚刚启动它，我遇到了问题。

当我有点击另存为的代码时......我不知道如何使用保存文件对话框，所以当你点击另存为时它会弹出！

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:02:28.607

Look at the code in [http://social.msdn.microsoft.com/forums/en-US/vblanguage/thread/ec63bda3-cb9f-438f-8d3d-43eb858299aa](http://social.msdn.microsoft.com/forums/en-US/vblanguage/thread/ec63bda3-cb9f-438f-8d3d-43eb858299aa). I hope it helps. The code works.

# delphi - Delphi - 如果跳出案例

> ID：15169712
> 
> 赞同：0
> 
> 时间：2013-03-02T01:41:29.800
> 
> 标签：delphi

我使用此代码测试同时按下 3 个字母但`IF`跳到外面`case`！

```
....
private
FValidKeyCombo: boolean
....

procedure MyForm.FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
  if FValidKeyCombo and (Shift = [ssAlt]) then
    case Key of
      Ord('N'): //New
        if (GetKeyState(Ord('C')) and $80) = $80 then 
          btn1.OnClick(nil)

        else if (GetKeyState(Ord('T')) and $80) = $80 then 
          btn2.OnClick(nil)

        else if (GetKeyState(Ord('Q')) and $80) = $80 then 
          btn3.OnClick(nil)

        else if (GetKeyState(Ord('W')) and $80) = $80 then 
          btn3.OnClick(nil);

     Ord('E'): //New
        if (GetKeyState(Ord('C')) and $80) = $80 then 
          btn1.OnClick(nil)

        else if (GetKeyState(Ord('T')) and $80) = $80 then //<-- after this line if jump to line 30!! why ???
          btn2.OnClick(nil)

        else if (GetKeyState(Ord('Q')) and $80) = $80 then 
          btn3.OnClick(nil)

        else if (GetKeyState(Ord('W')) and $80) = $80 then 
          btn3.OnClick(nil);

  end; //case Key of

{This is line 30}  FValidKeyCombo := (Shift = [ssAlt]) and (Key in [Ord('C'), Ord('T'), Ord('Q'), Ord('W')]);
end;

procedure MyForm.FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
  FValidKeyCombo := False;
end; 
```

正如代码中注释的那样，当我按下 Alt+W+E 时，会`If`跳转到设置值的第 30 行！`FValidKeyCombo`为什么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:12:48.993

您的代码工作正常。

我的猜测是，您可能*不小心*`;`在 the`btn2.OnClick()`和 next语句之间引入了 a `else`，从而终止了您的`if`语句。它可以编译，因为该`case`语句也可以包含`else`一部分，并且您已经处于案例的最后一个值。

为此，我总是将复杂的代码**`begin/end`**成对地包围起来，这并不花费任何成本，但却为代码增加了很多清晰度。

例如，我将您的代码更改为：

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if FValidKeyCombo and (Shift = [ssAlt]) then
  begin
    case Key of
      Ord('N'): //New
        begin
          if (GetKeyState(Ord('C')) and $80) = $80 then
            btn1.OnClick(nil)
          else if (GetKeyState(Ord('T')) and $80) = $80 then
            btn2.OnClick(nil)
          else if (GetKeyState(Ord('Q')) and $80) = $80 then
            btn3.OnClick(nil)
          else if (GetKeyState(Ord('W')) and $80) = $80 then
            btn3.OnClick(nil);
        end;
     Ord('E'): //New
       begin
        if (GetKeyState(Ord('C')) and $80) = $80 then
          btn1.OnClick(nil)
        else if (GetKeyState(Ord('T')) and $80) = $80 then
          btn2.OnClick(nil) //a ; here now produces a compiler error
        else if (GetKeyState(Ord('Q')) and $80) = $80 then
          btn3.OnClick(nil)
        else if (GetKeyState(Ord('W')) and $80) = $80 then
          btn3.OnClick(nil);
       end;
    end; //case Key of
  end;
  FValidKeyCombo := (Shift = [ssAlt]) and (Key in [Ord('C'), Ord('T'), Ord('Q'), Ord('W')]);
end; 
```

# jquery - 使用 jquery 将淡入淡出的垂直子菜单添加到一页 html

> ID：15169713
> 
> 赞同：1
> 
> 时间：2013-03-02T01:41:33.757
> 
> 标签：jquery, html, css, submenu

我想在我拥有的菜单中添加一个垂直子菜单。

我想在悬停时有[这种效果](http://jsfiddle.net/mhJXt/279/)....

我添加了一些代码但没有工作我应该添加什么（不想要那些图标）只是效果，但我似乎没有完成任务，有没有办法为该子菜单添加淡入淡出效果？

[jsfiddle是这个](http://jsfiddle.net/9c58k/31/)

```
<div id="header-wrap">
    <header>
        <nav>
            <ul>
                <li><a href="#main">Init   </a></li>
                 <li><a href="#services">Services</a> </li>
                <li><a href="#portfolio">portfolio</a></li>
                <li><a href="#about-us">about us  </a></li>
                 <li><a href="#contact">Contact</a></li>

               <ul class="submenu">
                  <li><a href="#services-1">Service1</a></li>
                 <br>
                 <li><a href="#services-2">Service2</a></li>
                 <br>
                <li><a href="#services-3">Service3</a></li>
                </ul>
            </ul>
        </nav>
    </header>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:46:41.973

淡入淡出效果是由一个名为`transition`（您可能必须使用供应商前缀）的 CSS3 属性引起的。它与 jQuery 无关。

# php - 更新查询的 SQL 语法错误

> ID：15169716
> 
> 赞同：2
> 
> 时间：2013-03-02T01:42:51.273
> 
> 标签：php, html, sql

我正在尝试通过更新查询更新用户设置，但是数据库中的字段没有更新。我运行了一个 mysql 错误并找到了错误，但我仍然无法发现它。我的查询如下：

```
mysql_query("UPDATE `members` SET " . implode(', ', $update) . " WHERE `mem_id` = $session_mem_id") or die(mysql_error()); 
```

错误是说：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`WHERE `mem_id` = 11`在第 1 行的“”附近使用正确的语法

实际功能如下所示：

```
function update_user($mem_id, $update_data) {
$update = array();
array_walk($update_data, 'array_sanitize');

foreach ($update_data as $field=>$data) {
    $update[] = '`' . $field . '` = \'' . $data . '\'';
}

mysql_query("UPDATE `members` SET " . implode(', ', $update) . " WHERE `mem_id` = $mem_id") or die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:45:34.353

错误告诉我`$update`数组为空。结果，生成的查询是：

```
UPDATE `members` SET  WHERE `mem_id` = 11 
```

如您所见，这显然是无效的。在运行查询之前，您应该检查以确保`$update`至少有一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:50:18.840

不要通过查看构建查询的 PHP 代码进行调试。通过查看它产生的查询进行调试。

```
$sql = "UPDATE `members` SET " . implode(', ', $update) . " WHERE `mem_id` = $session_mem_id";
// here you can error_log() the $sql string or inspect it in your IDE or whatever
mysql_query($sql) or die(mysql_error()); 
```

我怀疑 $update 变量不包含有效的语法。正如@Kolink 建议的那样，它要么是零元素，要么只是一个值列表，而不是`column = value`对。所以生成的 SQL 将是这样的：

```
UPDATE `members` SET 123, 'abc', 'me@example.com' WHERE `mem_id` = 123 
```

那将不是有效的 UPDATE 语法。您需要在 SET 子句中命名的每一列。

```
UPDATE `members` SET col1=123, col2='abc', col3='me@example.com' WHERE `mem_id` = 123 
```

如果 $update 是一个关联数组，并且您希望数组键是列名，您应该知道 implode() 不会自动将其转换为`key = value`格式。你必须自己用[array_map()](http://php.net/array_map)或其他东西来做。

您可能已经阅读过这方面的内容，但是现在不推荐使用 mysql_* 函数，如果您正在编写新代码，您应该习惯使用 mysqli 或 PDO。这也让您有机会使用**查询参数**，这使得向 SQL 查询添加动态值变得更容易、更安全、更快捷。

以下是我将如何使用 PDO 编写此代码并正确使用错误检查、查询参数和将列名列入白名单：

```
$members_columns = array("col1", "col2", "col3");
$update = array_intersect_key($update, array_flip($members_columns));
$columns = array_keys($update);
if ($columns) {
  $sql = "UPDATE `members` SET " 
  . array_map(function ($col) { return "`$col` = :$col"; }, $columns)
  . " WHERE `mem_id` = :where_mem_id";
  $stmt = $pdo->prepare($sql);
  if ($stmt === false) {
    $err = $pdo->errorInfo();
    error_log($err[2]);
  }
  $params = array_merge($update, array("where_mem_id"=>$session_mem_id));
  $status = $stmt->execute($params);
  if ($status === false) {
    $err = $stmt->errorInfo();
    error_log($err[2]);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:45:30.093

尝试`" WHERE `mem_id` = {$session_mem_id}"`

# ruby-on-rails-3 - 制作像 github 这样的发送电子邮件功能

> ID：15169719
> 
> 赞同：0
> 
> 时间：2013-03-02T01:43:10.717
> 
> 标签：ruby-on-rails-3, email, gmail

我正在使用 Rails 3.2，我遇到了一个问题来找到像 github 电子邮件系统这样的解决方案。我想在我的 Rails 应用程序**论坛**中创建功能，例如如果一个论坛组有 10 名成员，并且如果有任何人通过电子邮件回复，则回复报价应发布在所有论坛组上。

例如，如果我们有 4 个人在 github 存储库上工作。当一封电子邮件发给所有人时，如果有人使用 gmail 回复链接回复邮件，则该电子邮件会发送给所有正在处理此 repo 的人。

```
 some forums also use this functionality. 
```

但我在想，当有人通过 gmail 或任何其他邮件服务器回复时，如何通过 gmail 控制我的应用程序。我目前正在使用 gmail 帐户。

任何想法，博客文章，参考？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:18:28.207

基本上你在问，“我怎样才能动态生成和维护电子邮件列表？”，对吗？这是一个很深很深的问题空间。几年前我就建立了这样一个系统，那简直是一场噩梦。电子邮件非常复杂。做正确的邮件列表是非常非常困难的。你需要处理：

*   过滤掉办公室外的回复
*   重写电子邮件以重新发送它们
*   设置正确的邮件标头
*   处理附件
*   一百零一种电子邮件编码
*   展望……天哪，展望

这不是一个容易解决的问题。我的建议是使用谷歌搜索具有良好电子邮件列表管理 API 的第三方提供商，您可以付费为您处理此问题。

自己动手将是最后的手段...

# c++ - kdevelop 使用 ctags

> ID：15169724
> 
> 赞同：0
> 
> 时间：2013-03-02T01:44:34.057
> 
> 标签：c++, ctags, kdevelop

我的 ubuntu 机器上有 KDevelop 版本 4.3.1。我希望编辑器使用手动生成的 ctags 文件。它不会检测到位于 ~/projects/project_name/tags 的标签文件。

如何让 KDevelop 使用 ctags 文件？任何答案/建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:19:14.367

KDevelop 不支持 ctags，相反，KDevelop 试图比 ctags 更好地理解。

虽然可以为 KDevelop 实现一个 ctags 插件。

# javascript - 如何使用 putItem 替换 Node.js Simpledb 中的属性值

> ID：15169729
> 
> 赞同：0
> 
> 时间：2013-03-02T01:45:22.257
> 
> 标签：javascript, node.js, amazon-simpledb

我有一个节点应用程序将数据保存到 Amazon SimpleDb 以使用 rjrodger/simpledb 节点驱动程序 ( [https://github.com/rjrodger/simpledb](https://github.com/rjrodger/simpledb) ) 存储名称/值对数据。我调用**putItem**如下：

```
sdb.putItem('mySimpleDbTable','Record_0001', 
{
   statusUpdate:'1'
},
function(err,res,meta){
  if (err) {
     console.log('Status Update error: ' + err.Message);
   }
  console.log("Memories, you're talking about memories: "+JSON.stringify(res)) 
}) 
```

插入如下记录：

```
{ $ItemName: 'Record_0001' { statusUpdate: '1' }} 
```

然后经过几次操作，我想像这样将 statusUpdate 更新为'2'：

```
{ $ItemName: 'Record_0001' { statusUpdate: '2' }} 
```

无论我如何尝试，Node simpleDb 驱动程序总是插入一个新属性，如下所示：

```
{ $ItemName: 'Record_0001' { statusUpdate: '1',  statusUpdate: '2' }} 
```

如果我尝试

```
sdb.putItem('mySimpleDbTable','Record_0001', 
{
statusUpdate:['2', true]
} 
```

然后我得到 -

```
{ $ItemName: 'Record_0001' { statusUpdate: '1',  statusUpdate: '2', statusUpdate: 'true' }} 
```

如何使用 putItem 的“replace:true”参数来更新值而不是插入新值。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:36:23.533

您的代码始终将 Replace 参数设置为 false，因此这些值将添加到现有值中。如果将其设置为 true，则属性的现有值总是被新值替换。IE

> 或者，您可以为每个单独的属性提供替换参数。将此值设置为 true 会导致新属性值替换现有属性值（如果存在）。否则，Amazon SimpleDB 只会插入属性值。例如，如果一个项目具有属性 { 'a', '1' }, { 'b', '2'} 和 { 'b', '3' } 并且请求者使用属性 { 'b ', '4' } 将 Replace 参数设置为 true，项目的最终属性更改为 { 'a', '1' } 和 { 'b', '4' }。这是因为新的“b”属性替换了旧值。

--[来源](http://docs.aws.amazon.com/AmazonSimpleDB/latest/DeveloperGuide/SDB_API_BatchPutAttributes.html)

```
statusUpdate:['2', true] 
```

这里的 true 不是 replace 参数。查看结果。代码将 true 作为该属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:20:06.647

这里还有其他事情发生 - 这种行为不是预期的。

我为此添加了一个测试用例 - 签出此提交： [https ://github.com/rjrodger/simpledb/commit/236aad0feefad9844548c4fde76e996ee3c4d347](https://github.com/rjrodger/simpledb/commit/236aad0feefad9844548c4fde76e996ee3c4d347)

并在文件夹 test 中运行：expresso simpledb.test.js -o putItemHappy（您可能需要 npm install expresso）

此外，尝试在启用调试记录器的情况下运行： sdb = new simpledb.SimpleDB({...}),simpledb.debuglogger)

这会将日志打印到控制台。

lib/simpledb.js:203 中的 putattrs 函数会设置 put 属性 - 如果您不提供数组，则会设置替换模式 - 您的 Array.isArray 没有被覆盖，对吧？

……啊

我想我明白发生了什么。

你有没有尝试过：

```
sdb.putItem('mySimpleDbTable','Record_0001', 
{
  statusUpdate:'2'
} 
```

这应该替换。

如果您使用数组 (['2',true])，它不会替换 - 它假定您要设置多个值。

# jquery - 将段落行包装成跨度标签（使用 jQuery）并使用条件类

> ID：15169738
> 
> 赞同：0
> 
> 时间：2013-03-02T01:46:27.547
> 
> 标签：jquery, text, numbers, conditional

我试图将段落的每一行包装成一个跨度标签。到目前为止有效（感谢我找到的代码）。现在我正在尝试引入条件。我想要的是检查字符串（o 某行）是否包含某个文本或模式，如果是，我想操作输出。

```
var txt = $(".ym-col1 p.address").html().split("<br>")
var output = ""
for(var x=0;x<txt.length;x++) {
    if($("txt[x]:contains(\"08\")")) {
        output = output + "<span class=\'telephone\'>"+txt[x]+"</span><br>"
    }
        if($("txt[x]:contains(\"@\")")) {
        output = output + "<span class=\'email\'>"+txt[x]+"</span><br>"
    }

}
$(".ym-col1 p.address").html(output); 
```

如果我只将输出与 if() 一起使用，它可以工作，但如果我将文本的每一行都加倍。任何想法我做错了什么？

还有一个问题。:) 有没有一种聪明的方法来检查一个字符串是否包含超过 5 个数字？（例如：123456）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:01:59.353

You are misusing jQuery in the `if` statements, you should use `indexOf` method of the String object:

```
$(".ym-col1 p.address").html(function(i, html){ 
     var txt = html.split('<br>'), output;
     for(var x = 0; x < txt.length; x++) {
         if ( txt[x].indexOf("08") > -1 ) 
             output += "<span class='telephone'>"+txt[x]+"</span><br>"
         else 
             output += "<span class='email'>"+txt[x]+"</span><br>"
     }
     return output;
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:02:56.977

The following code creates a jQuery object (aka a wrapped set):

```
$("txt[x]:contains(\"08\")") 
```

It will always create a wrapped set, even if the wrapped set is empty, so the following conditional is always true:

```
if($("txt[x]:contains(\"08\")")) { 
```

If you want to check if a wrapped set is not empty, you can use:

```
if($("txt[x]:contains(\"08\")").length > 0) { 
```

But if what is between the `<br>` tags is just text, you shouldn't even be using a wrapped set. You could use something line this:

```
if (txt[x].indexOf("08") >= 0) { 
```

and

```
if (txt[x].indexOf("@") >= 0) { 
```

# kml - 即使遇到文件错误，如何强制刷新网络链接？

> ID：15169743
> 
> 赞同：4
> 
> 时间：2013-03-02T01:46:49.110
> 
> 标签：kml, google-earth, google-earth-plugin

我有一个不断编写/更新 KML 文件的程序，并且我有一个指向该文件的网络链接。在重负载下，如果网络链接在我的程序写入 KML 文件的同时尝试访问 KML 文件，Google 地球将停止对该网络链接的任何进一步自动刷新，假设它已损坏。此时，我必须右键单击 Google Earth 的 Places 窗格中的网络链接，然后点击刷新，以便再次开始自动更新。

我的问题是，是否有任何方法可以强制 Google 地球继续从网络链接读取，即使出现“未检测到文件”错误？因为必须手动点击刷新以使网络链接再次变为活动状态是一件非常麻烦的事情，当看起来该任务似乎可以很容易地自动化时。

我对我的程序进行了无数次优化，以尽量减少写入 KML 文件所花费的时间，但是我已经达到了实际限制，现在必须想办法从 Google 地球中解决这个网络链接问题。

任何回复、评论或讨论将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T20:38:08.127

不久前我们遇到了类似的问题。在搜索 google-earth kml 开发者论坛时，一些人建议使用网络链接到网络链接方法，如下所示：

**链接到更新的 kml 文件的 KML 文件 1：**

```
<Document>
<NetworkLink>
<Link> my_URL_to_the_updating_kml
<refreshMode>onInterval</refreshMode>
<refreshInterval>my_Inteval</refreshInterval>
</Link>
<name>My_Name</name>
<visibility>1</visibility>
</NetworkLink>
</Document> 
```

**链接到上述网络链接文件的 KML 文件 2：**

```
<Document>
<NetworkLink>
<Link>
my_URL_to_the_first_network_link_file
<refreshMode>onInterval</refreshMode>
<refreshInterval>3600</refreshInterval>
</Link>
<name>My_Name</name>
<visibility>1</visibility>
</NetworkLink>
</Document> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:20:16.877

如果您正在写入服务器上的文件，一个简单的技巧是写入临时文件，然后与目标文件交换，如下所示：

1.  写入临时文件 temp.kml
2.  删除目标.kml
3.  重命名 temp.kml 目标.kml

文件的重命名几乎是瞬间完成的，因此 Google 地球客户端不太可能在它被换出的那一刻获取它。根据服务器的操作系统，您还可以使用符号链接在一次操作中更改文件引用。

更新：在写入文件的任何内容中，您可以在共享变量中设置文件名并通过“servlet”提供该文件，该“servlet”打开当前文件的流。networklink 可以指向 servlet 而不是静态 KML 文件。

# f# - F# 序列表达式中的自引用

> ID：15169754
> 
> 赞同：1
> 
> 时间：2013-03-02T01:48:25.723
> 
> 标签：f#, sequence

有没有办法在 F# 序列表达式中进行自引用？例如：

```
[for i in 1..n do if _f(i)_not_in_this_list_ do yield f(i)] 
```

这可以防止插入重复的元素。

编辑：一般情况下，我想在应用 f() 之前知道 this_list 的内容，这在计算上非常昂贵。

编辑：我在上面的例子中过于简单化了。我的具体情况是计算量大的测试 T (T: int -> bool) 具有属性 T(i) => T(n*i) 所以代码片段是：

```
[for i in 1..n do if _i_not_in_this_list_ && T(i) then for j in i..i..n do yield j] 
```

目标是减少 T() 应用程序的数量并使用简洁的符号。我通过使用可变辅助数组完成了前者：

```
let mutable notYet = Array.create n true
[for i in 1..n do if notYet.[i] && T(i) then for j in i..i..n do yield j; notYet.[j] <- false] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:24:18.877

你可以有递归[序列表达式](http://msdn.microsoft.com/en-us/library/dd233209.aspx)，例如

```
let rec allFiles dir =
    seq { yield! Directory.GetFiles dir
          for d in Directory.GetDirectories dir do
              yield! allFiles d } 
```

但循环引用是不可能的。

另一种方法是使用[Seq](http://msdn.microsoft.com/en-us/library/ee353635.aspx)模块中的[Seq.distinct ：](http://msdn.microsoft.com/en-us/library/ee353698.aspx)

```
seq { for i in 1..n -> f i }
|> Seq.distinct 
```

[或根据@John 的评论在消费前使用Set.ofSeq](http://msdn.microsoft.com/en-us/library/ee340225.aspx)将序列转换为设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T12:16:17.257

您还可以决定以显式方式维护有关先前生成的元素的信息；例如：

```
let genSeq n =
   let elems = System.Collections.Generic.HashSet()
   seq {
      for i in 1..n do
         if not (elems.Contains(i)) then
            elems.Add(i) |> ignore
            yield i
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T15:18:53.657

这里有几个考虑因素。
**首先，**您`f(i)`无法在实际计算之前检查是否在列表中`f(i)`。所以我猜你的意思是你的`check`功能很昂贵，而不是`f(i)`它本身。如我错了请纠正我。

**其次，**如果`check`确实在计算上*非常*昂贵，您可能会寻找更有效的算法。不能保证您会为每个序列找到一个，但它们经常存在。那么您的代码将只是一个`Seq.unfold`.

**第三。**如果没有这样的优化，你可以采取另一种方法。在`[for...yield]`中，您只能构建当前元素，而无法访问之前的元素。与其返回一个元素，不如手动构建一个完整的列表：

```
// a simple algorithm checking if some F(x) exists in a sequence somehow
let check (x:string) xs = Seq.forall (fun el -> not (x.Contains el)) xs
// a converter i -> something else
let f (i: int) = i.ToString()

let generate f xs =
    let rec loop ys = function
        | [] -> List.rev ys
        | x::t ->
            let y = f x
            loop (if check y ys then y::ys else ys) t
    loop [] xs

// usage
[0..3..1000] |> generate f |> List.iter (printf "%O ") 
```

# android - 有限片段无限滚动

> ID：15169760
> 
> 赞同：1
> 
> 时间：2013-03-02T01:49:08.793
> 
> 标签：android, android-fragments, android-viewpager

反正有没有用无限滚动创建一个有限的`Fragment`+ ？`ViewPager`

例如 ：

我要创建 10 `Fragment`，当我滚动到第五个时`Fragment`，索引号 0 片段被破坏并出现第十一个`Fragment`

```
**1** 2 3 4 5 6 7 8 9 10 
```

滚动到第五个后

```
2 3 4 **5** 6 7 8 9 10 11 
```

*多变的*

```
private static final int NUM_PAGES = 10; 
```

这是我的`Fragment adapter`

```
private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
    public ScreenSlidePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return PageFragment.create(position);
    }

    @Override
    public int getCount() {
        return NUM_PAGES;
    }

} 
```

这是`Fragment`要显示的以数字 1 开头的内容

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    ViewGroup rootView = (ViewGroup) inflater.inflate(
            R.layout.fragment_view, container, false);

    ((TextView) rootView.findViewById(R.id.tvUsername)).setText(
            ""+ (mPageNumber + 1));
    return rootView;
} 
```

这是所选事件发生的时间

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int pageSelected) {
        // TODO Auto-generated method stub
        Log.d(TAG, "selected = " + pageSelected);
        if (pageSelected > (NUM_PAGES - 6)) {
                   //Event do it here?
        }
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }
}); 
```

**问题**：如何创建事件？

我认为可以通过更改`position`. `getItem()`但我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:12:54.063

我能想出的唯一方法是只制作三页，当用户滚动到最后一页时，您替换每个片段。像这样的东西：

数组

```
ArrayList<Integer> positions = new ArrayList<Integer>();

public void initPositions() {
    positions.add(0);
    positions.add(1);
    positions.add(2);
} 
```

适配器

```
private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
public ScreenSlidePagerAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int position) {
    return PageFragment.create(positions.get(position));
}

@Override
public int getCount() {
    return 3;
} 
```

}

听者

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int pageSelected) {
        //scrolled to first page
        if(pageSelected == 0) {
                    //Make sure its not unlimited upwards
                    if(positions.get(pageSelected == 0))
                        return;
                    //remove last and insert new at bottom
            positions.remove(2);
            positions.insert(0, positions.get(0) - 1);
        //scrolled to last page
        } else if(pageSelected == 2) {
                    //remove first and add one last
            positions.remove(0);
            positions.add((positions.get(1) + 1) % NUM_PAGES);
        }
            //make sure the adapter understands
            mAdapter.notifyDataSetChanged();
            //move pager to the middle again
            mPager.setCurrentItem(1);
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }
    }); 
```

不确定这将如何在性能方面发挥作用，或者它是否会起作用，但试一试:)

# scala - 同一src下不同主类的单独jar

> ID：15169764
> 
> 赞同：7
> 
> 时间：2013-03-02T01:50:08.087
> 
> 标签：scala, build, jar, sbt

使用 sbt 为同一源树下的多个主类生成单独的 jar 文件的最佳方法是什么？

项目目录如下所示：

```
project_root/
        src/main/scala/
                     A/*.scala files for main class A
                     B/*.scala files for main class B
                 resources/
            test/scala/
                     A/
                     B/
        lib/
        project/Build.scala
        build.sbt 
```

请注意，A 和 B 具有相同的基数。Build.scala 文件的具体示例会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:22:08.677

你应该看看[Getting Started Multi Project](https://github.com/harrah/xsbt/wiki/Getting-Started-Multi-Project "多项目入门")。我在下面做了一个简单的例子：

```
import sbt._

object MyBuild extends Build {

  lazy val projA = Project("projA", file("a")) 

  lazy val projB = Project("projB", file("b"))
} 
```

# android - 需要通过仅显示一次的 AlertDialog 保存用户名

> ID：15169766
> 
> 赞同：0
> 
> 时间：2013-03-02T01:50:11.450
> 
> 标签：android, android-alertdialog

我有一个 AlertDialog 显示何时按下按钮；按下警报“完成”按钮时保存用户名；然后将用户移动到另一个活动。我想弄清楚的是如何仅在第一次按下显示 AlertDialog 的布局按钮时显示 AlertDialog，以便当用户返回应用程序的这一部分并按下相同的布局按钮时，AlertDialog不显示，用户不必再次输入他们的名字。这是不起作用的代码：

```
 public class CloseoutActivity extends Activity {

SharedPreferences prefs2;
String prefs2String="";
boolean firstRun = true;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_closeout);

 // Make sure we're running on Honeycomb or higher to use ActionBar APIs
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        // For the main activity, make sure the app icon in the action bar
        // does not behave as a button
        ActionBar actionBar = getActionBar();
        actionBar.setHomeButtonEnabled(false);
    }

}

public void closeoutCashButtonPressed (View closeoutCashButtonPressedView){

if(firstRun){   

     AlertDialog.Builder builder3 = new AlertDialog.Builder(this);
     builder3.setTitle("    Please enter your full name");
     final EditText input3 = new EditText(this);
     input3.setInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_TEXT_FLAG_CAP_WORDS|InputType.TYPE_TEXT_VARIATION_PERSON_NAME);
     builder3.setView(input3);
     builder3.setPositiveButton("Done", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            prefs2String = input3.getText().toString();

            prefs2 = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
            SharedPreferences.Editor prefs2Editor = prefs2.edit();
            String userName1 = input3.getText().toString();
            prefs2Editor.putString("userName", userName1);
            prefs2Editor.commit();

            launchIntent1();

        }
    });

    builder3.show();
}

firstRun = false;

}

public void launchIntent1(){

    Intent displayCloseoutCashButtonSignal = new Intent (this, CloseoutCashButtonSignal.class);
    displayCloseoutCashButtonSignal.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(displayCloseoutCashButtonSignal); 
```

使用此代码，当我回到应用程序的这一部分时，AlertDialog 会不断弹出。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:56:51.077

您需要将您的`firstRun`标志存储在`SharedPrefs`或其他一些永久存储中。每次您运行时，`Activity`您的标志都会`true`不同。如果这是您存储的唯一位置，`username`那么您应该能够简单地检查`SharedPrefs`名称是否存在，如果存在则继续按您的意愿进行，但如果不存在，则可以添加名称并显示`Dialog`

# java - 用于谷歌搜索的硒

> ID：15169767
> 
> 赞同：0
> 
> 时间：2013-03-02T01:50:12.677
> 
> 标签：java, xpath, selenium, google-search

我正在尝试在 selenium 中构建一个简单的函数，它给定一个文本带回谷歌的所有结果。我正在使用 xpath 来查找所有结果元素。尽管 "//a[@class='l']" 与 firebug 一起作为合法的 xpath 工作，但当我运行代码时，结果列表为空。

```
public void testSearch() {
    WebDriver driver = new FirefoxDriver();
    driver.get("http://www.google.com");

    WebElement query = driver.findElement(By.name("q"));
    query.sendKeys("obama twitter");
    query.submit();

    long end = System.currentTimeMillis() + 5000;
    while (System.currentTimeMillis() < end) {
        WebElement resultsDiv = driver.findElement(By.className("gssb_e"));

        if (resultsDiv.isDisplayed()) {
            break;
        }
    }

    List<WebElement> weblinks = driver.findElements(By.xpath("//a[@class='l']"));
    for (WebElement suggestion : weblinks) {
        System.out.println(suggestion.getText()+"\n");
        System.out.println("==> "+suggestion.getAttribute("href")+"\n");
    }
} 
```

# multithreading - 使用参考类的 C++ 中的多线程 - ThreadStart 构造函数问题？

> ID：15169772
> 
> 赞同：0
> 
> 时间：2013-03-02T01:50:25.097
> 
> 标签：multithreading, class, reference, c++-cli, mergesort

感谢您的帮助，并提前感谢您。我正在为我的一门课做一个项目。本质上是使用多线程和引用类执行合并排序。在 main 中，我只是想创建一个将开始递归合并排序的初始线程。每次拆分数组时都会产生一个新线程来处理该子例程。我不需要全部完成，我只是不明白为什么我的 Thread 构造函数和 ThreadStart 委托不起作用。再次感谢！！

```
#include <iostream>
#include <vector>
#include <string>
#include <time.h>
#include <cstdlib>

using namespace System;
using namespace System::Threading;

public ref class MergeSort 
{
    private: int cnt;

    public: MergeSort() 
    {
        cnt = 0;
    }

    public: void mergeSort(char a[], int from, int to)
    {
        Thread^ current = Thread::CurrentThread;

        if(from == to)
            return;
        int mid = (from + to)/2;

        //Sort the first and the second half
        //addThread(a, from, mid);
        //addThread(a, mid+1, to);

        //threads[0]->Join();
        //threads[1]->Join();

        merge(a, from, mid, to);
    }

    public: void merge(char a[], int from, int mid, int to)
    {           
            Thread^ current = Thread::CurrentThread;
            while (current ->ThreadState == ThreadState::Running)
            {
                    int n = to-from + 1; // Size of range to be merged
                    std::vector<char> b(n);

                    int i1 = from; //Next element to consider in the first half
                    int i2 = mid + 1; //Next element to consider in the second half
                    int j = 0; //Next open position in b

                    //As long as neight i1 or i2 is past the end, move the smaller element into b
                    while(i1 <= mid && i2 <= to)
                    {
                        if(a[i1] < a[i2])
                        {
                            b[j] = a[i1];
                            i1++;
                        }
                        else
                        {
                            b[j] = a[i2];
                            i2++;
                        }
                        j++;
                    }

                    //Copy any remaining entries of the first half
                    while(i1 <= mid)
                    {
                        b[j] = a[i1];
                        i1++;
                        j++;
                    }
                    while(i2 <= to)
                    {
                        b[j] = a[i2];
                        i2++;
                        j++;
                    }

                    //Copy back from temporary vector
                    for(j = 0; j < n; j++)
                        a[from+j] = b[j];
            }       
    }
};

void main()
{
    char A[10];

    for(int i = 0; i < 10; i++)
    {
        A[i] = ((char) ((rand() % (122-65)) + 65));
    }

    array<Thread^>^ tr = gcnew array<Thread^>(10);

    MergeSort^ ms1 = gcnew MergeSort();

    ThreadStart^ TS = gcnew ThreadStart(ms1, &MergeSort::mergeSort(A, 0, 10));
    tr[0] = gcnew Thread(TS);
    tr[0] -> Start();

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:17:03.613

您在这里面临的问题是如何构造`ThreadStart`委托。`ThreadStart`您试图在构造函数中做太多事情。此时您不能传入参数，因为它正在寻找的只是线程的起始位置。

代表应该是：

```
ThreadStart^ TS = gcnew ThreadStart(ms1, &MergeSort::mergeSort); 
```

但是，由于您以某种状态通过，我建议您对如何使用 C++\CLI 进行更多研究。[这个 MSDN 主题](http://msdn.microsoft.com/en-us/library/ts553s52.aspx)应该给你一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-06T19:41:08.200

**编辑：**

没关系，问题是我必须更改我试图从 Int32 传递到 Object^ 的方法的参数。

我有一个类似的问题，虽然我认为我的问题不是论点。我在`thread->Start()`.

我认为我的问题是我试图使用 ref 类的方法启动线程。

> 无效的委托初始化器——函数与委托类型不匹配

是我得到的错误。有任何想法吗？

```
void AddForcesAll() {
    for (int index = 0; index < n; index++) {
        Thread^ thread = gcnew Thread (gcnew ParameterizedThreadStart(this, &Bodies::AddForces));
        thread->Start(index);
    } 
```

对于非引用类，语法对我来说很好。

# jsfiddle - IE10 上的 jsFiddle 以文档模式显示：IE7

> ID：15169774
> 
> 赞同：1
> 
> 时间：2013-03-02T01:50:48.507
> 
> 标签：jsfiddle

出于某种原因，当我转到 jsFiddle 时，IE10（Windows 8）进入“文档模式：IE7”。

我必须打开工具（F12）并将其更改为“标准”......然后一切都很好。

无论我去哪里都会发生，但例如，转到 jsFiddle 并导航到这个小提琴：/IdeaBlade/ExaFM/

# java - 使用 http post 登录网站

> ID：15169777
> 
> 赞同：2
> 
> 时间：2013-03-02T01:51:02.677
> 
> 标签：java, android

我正在尝试创建一个登录此网站[http://www.reclameaqui.com.br/](http://www.reclameaqui.com.br/)的应用程序 ，当我输入我的登录名和密码时，应用程序向我显示：

**03-01 22:34:47.220: W/SENCIDE(27717): 403 禁止**

# **禁止的**

**您无权访问此服务器上的 /areadoconsumidor/。**

* * *

**Apache/2.2.15 (CentOS) 服务器在www.reclameaqui.com.br 80端口包com.sencide；**

**这是代码**

```
 package com.sencide;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidLogin extends Activity implements OnClickListener {

    Button ok,back,exit,site;
    TextView result;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     // Login button clicked
        site = (Button)findViewById(R.id.button1);
        site.setOnClickListener(this);

        // Login button clicked
        ok = (Button)findViewById(R.id.btn_login);
        ok.setOnClickListener(this);

        result = (TextView)findViewById(R.id.lbl_result);

    }

    public void postLoginData() {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();

        /* logar no site */
        HttpPost httppost = new HttpPost("http://www.reclameaqui.com.br/includes/autenticaUsuario.php");

        try {
            // Add user name and password
            EditText uname = (EditText)findViewById(R.id.txt_username);
            String username = uname.getText().toString();

            EditText pword = (EditText)findViewById(R.id.txt_password);
            String password = pword.getText().toString();

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(6);
            nameValuePairs.add(new BasicNameValuePair("identificador", username ));
            nameValuePairs.add(new BasicNameValuePair("senha", password ));
            nameValuePairs.add(new BasicNameValuePair("urlRedir", "http://www.reclameaqui.com.br/areadoconsumidor/"));
            nameValuePairs.add(new BasicNameValuePair("tipo", "cadastro" ));
            nameValuePairs.add(new BasicNameValuePair("x", "35" ));
            nameValuePairs.add(new BasicNameValuePair("y", "24" ));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            Log.w("SENCIDE", "Execute HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);

            String str = inputStreamToString(response.getEntity().getContent()).toString();
            Log.w("SENCIDE", str);

            if(str.toString().equalsIgnoreCase("true"))
            {
                Log.w("SENCIDE", "TRUE");
                result.setText("Login successful");   
            }else
            {
                Log.w("SENCIDE", "FALSE");
                result.setText(str);                
            }

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 

    private StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
            while ((line = rd.readLine()) != null) { 
                total.append(line); 
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        // Return full string
        return total;
    }

    @Override
    public void onClick(View view) {
        if(view == ok){
            postLoginData();
        }
    }

} 
```

我可以对应用程序做些什么效果很好？谁来帮帮我;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:02:27.000

It looks like you are posting to the wrong page.

`<form action="includes/autenticaUsuario.php" method="post" onsubmit="return valida_form(this)">`

the form appears to post to `http://www.reclameaqui.com.br/includes/autenticaUsuario.php`.

It also has hidden fields: `<input type="hidden" name="urlRedir" value="http://www.reclameaqui.com.br/areadoconsumidor/">`

and

`<input type="hidden" name="tipo" value="cadastro">`

Second, the username input is named `<input type="text" name="identificador">` and the password input is named `<input type="password" name="senha">` so I believe your BasicNamveValuePairs should be more like this: `new BasicNameValuePair("identificador", identificador)` and `new BasicNameValuePair("senha", senha)`

* * *

It should probably look something like this:

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
nameValuePairs.add(new BasicNameValuePair("tipo", "cadastro"));
nameValuePairs.add(new BasicNameValuePair("urlRedir", "http://www.reclameaqui.com.br/areadoconsumidor/"));
nameValuePairs.add(new BasicNameValuePair("identificador", identificador));
nameValuePairs.add(new BasicNameValuePair("senha", senha)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:20:05.550

插入一个中间 HTTP 代理，或使用某种形式的 HTTP 调试，以便您可以比较来自工作登录和编程登录的帖子 URL 和所有发布的数据。这将指出一些问题。

# mysql - 获取 mysql 错误代码：1265。执行 LOAD DATA LOCAL INFILE 时，列的数据被截断

> ID：15169788
> 
> 赞同：4
> 
> 时间：2013-03-02T01:53:24.313
> 
> 标签：mysql, sql, file-io, load

我得到一个mysql错误代码：

> 1265.  执行 LOAD DATA LOCAL INFILE 时，列的数据被截断。

在 Win7 PC 上运行 MySQL。使用 SQL Workbench，我有一个名为 full_daily_data 的新表。我用这个脚本创建了它：

```
CREATE TABLE full_daily_data ( 
Run_Date DATE,
Run_Time TIME,
Bar_Num INT,
Symbol VARCHAR(9) NOT NULL,
Trade_Date DATE,
Day_Open FLOAT,
Day_High FLOAT,
Day_Low FLOAT,
Day_Close FLOAT,
Prior_Open FLOAT,
Prior_High FLOAT,
Prior_Low FLOAT,
Prior_Close FLOAT,
Pct_UpDn_Since_Open FLOAT,
Pct_UpDn_Since_PrClose FLOAT,
Open_Gap FLOAT,
Open_Gap_Pct FLOAT,
Open_Gap_Filled_Intraday FLOAT,
Open_Gap_Filled_With_Close FLOAT,
Open_As_Pct_InOut_Prior_Days_Range FLOAT,
Close_As_Pct_InOut_Prior_Days_Range FLOAT,
Volume FLOAT,
5_Day_Avg_Volume FLOAT,
10_Day_Avg_Volume FLOAT,
20_Day_Avg_Volume FLOAT,
90_Day_Avg_Volume FLOAT,
Volume_As_Pct_Of_5Day_Avg FLOAT,
20_Day_Volatility_StdDev FLOAT,
20_Day_Volatility_Pct_ATR FLOAT,
3_Day_ATR FLOAT,
14_Day_ATR FLOAT,
3_Day_Avg_IDay_Range FLOAT,
14_Day_Avg_IDay_Range FLOAT,
Range_As_Pct_Of_14_Day_Avg_IDay_Range FLOAT,
Consec_Inside_Bars INT,
Consec_Outside_Bars INT,
Days_To_3rd_Friday INT,
Consec_Up_Bars INT,
Consec_Dn_Bars INT,
Key_Reversal_Flag VARCHAR(15),
One_Year_High FLOAT,
One_Year_Low FLOAT,
Pct_In_1Yr_HighLow_Range FLOAT,
Six_Week_High FLOAT,
Six_Week_Low FLOAT,
Pct_In_6Wk_HighLow_Range FLOAT,
20_Day_MA FLOAT,
50_Day_MA FLOAT,
200_Day_MA FLOAT,
Dist_20_From_50_As_Pct_Price FLOAT,
Dist_50_From_200_As_Pct_Price FLOAT,
Dist_From_20_As_Pct_Price FLOAT,
Dist_From_50_As_Pct_Price FLOAT,
Dist_From_200_As_Pct_Price FLOAT,
20_MA_Slope FLOAT,
50_MA_Slope FLOAT,
Stoch_FastK FLOAT,
Stoch_FastD FLOAT,
Stoch_SlowK FLOAT,
Stoch_SlowD FLOAT,
Ultimate_Osc FLOAT,
RSI FLOAT,
OBV FLOAT,
Vol_As_Pct_Of_OBV FLOAT,
CCI FLOAT,
ADX FLOAT,
DMI FLOAT,
DMIPlus FLOAT,
DMIMinus FLOAT,
Lin_Reg_Slope_ADX FLOAT,
Lin_Reg_Slope_DMI FLOAT,
MACD FLOAT,
MACD_Avg_Diff FLOAT,
MACD_Slope FLOAT,
Lin_Regr_Slope FLOAT,
Momentum FLOAT,
Williams_PctR FLOAT,
BB_2_StdDev_Pct_Range FLOAT,
14_Day_MFI FLOAT,
Pct_In_Pivots FLOAT,
Standard_Deviation FLOAT,
Market_Cap FLOAT,
Total_Assets FLOAT,
Total_Liabilities FLOAT,
Total_Long_Term_Debt FLOAT,
Net_Income_Before_Extra_Items FLOAT,
Net_Income FLOAT,
Total_Common_Shares_Outstanding FLOAT,
Total_Equity FLOAT,
Net_Sales FLOAT,
Total_Revenue FLOAT,
Basic_EPS_Including_Extra_Items FLOAT,
Basic_EPS_Excluding_Extra_Items FLOAT,
Capital_Expenditures FLOAT,
Gross_Margin FLOAT,
Gross_Profit FLOAT,
Net_Cash_Beg_Balance FLOAT,
Net_Cash_End_Bal FLOAT,
Operating_Income FLOAT,
Revenue FLOAT,
Total_Debt FLOAT,
Basic_Normalized_EPS FLOAT,
Intangibles_Net FLOAT,
Net_Cash_Per_Rev FLOAT,
Net_Cash_Per_Mkt_Cap FLOAT,
Net_Cash_Per_LTDebt FLOAT,
LTDebt_Per_Revenue FLOAT,
LTDebt_Per_Mkt_Cap FLOAT,
PRIMARY KEY (Symbol,Trade_Date)
); 
```

现在我正在尝试从 .csv 文件将数据加载到其中。这是我用于加载的脚本：

```
LOAD DATA LOCAL INFILE 'C:\\Trading\\Tools\\Research Tools - Mine\\PriceDB Related\\Data Grabbed From TS for Upload\\GrabbedData - Short Test.csv'
REPLACE INTO TABLE full_daily_data_1
FIELDS TERMINATED BY ','
IGNORE 1 LINES 
(Run_Date,
Run_Time,
Bar_Num,
Symbol,
Trade_Date,
Day_Open,
Day_High,
Day_Low,
Day_Close,
Prior_Open,
Prior_High,
Prior_Low,
Prior_Close,
Pct_UpDn_Since_Open,
Pct_UpDn_Since_PrClose,
Open_Gap,
Open_Gap_Pct,
Open_Gap_Filled_Intraday,
Open_Gap_Filled_With_Close,
Open_As_Pct_InOut_Prior_Days_Range,
Close_As_Pct_InOut_Prior_Days_Range,
Volume,
5_Day_Avg_Volume,
10_Day_Avg_Volume,
20_Day_Avg_Volume,
90_Day_Avg_Volume,
Volume_As_Pct_Of_5Day_Avg,
20_Day_Volatility_StdDev,
20_Day_Volatility_Pct_ATR,
3_Day_ATR,
14_Day_ATR,
3_Day_Avg_IDay_Range,
14_Day_Avg_IDay_Range,
Range_As_Pct_Of_14_Day_Avg_IDay_Range,
Consec_Inside_Bars,
Consec_Outside_Bars,
Days_To_3rd_Friday,
Consec_Up_Bars,
Consec_Dn_Bars,
Key_Reversal_Flag,
One_Year_High,
One_Year_Low,
Pct_In_1Yr_HighLow_Range,
Six_Week_High,
Six_Week_Low,
Pct_In_6Wk_HighLow_Range,
20_Day_MA,
50_Day_MA,
200_Day_MA,
Dist_20_From_50_As_Pct_Price,
Dist_50_From_200_As_Pct_Price,
Dist_From_20_As_Pct_Price,
Dist_From_50_As_Pct_Price,
Dist_From_200_As_Pct_Price,
20_MA_Slope,
50_MA_Slope,
Stoch_FastK,
Stoch_FastD,
Stoch_SlowK,
Stoch_SlowD,
Ultimate_Osc,
RSI,
OBV,
Vol_As_Pct_Of_OBV,
CCI,
ADX,
DMI,
DMIPlus,
DMIMinus,
Lin_Reg_Slope_ADX,
Lin_Reg_Slope_DMI,
MACD,
MACD_Avg_Diff,
MACD_Slope,
Lin_Regr_Slope,
Momentum,
Williams_PctR,
BB_2_StdDev_Pct_Range,
14_Day_MFI,
Pct_In_Pivots,
Standard_Deviation,
Market_Cap,
Total_Assets,
Total_Liabilities,
Total_Long_Term_Debt,
Net_Income_Before_Extra_Items,
Net_Income,
Total_Common_Shares_Outstanding,
Total_Equity,
Net_Sales,
Total_Revenue,
Basic_EPS_Including_Extra_Items,
Basic_EPS_Excluding_Extra_Items,
Capital_Expenditures,
Gross_Margin,
Gross_Profit,
Net_Cash_Beg_Balance,
Net_Cash_End_Bal,
Operating_Income,
Revenue,
Total_Debt,
Basic_Normalized_EPS,
Intangibles_Net,
Net_Cash_Per_Rev,
Net_Cash_Per_Mkt_Cap,
Net_Cash_Per_LTDebt,
LTDebt_Per_Revenue,
LTDebt_Per_Mkt_Cap
) ; 
```

下面是我正在加载的 .csv 文件内容（大约 30 行）。它出现的位置是 90_Day_Avg_Volume 列，这是第一个没有数据的字段。我认为这应该没问题。知道为什么我会收到此错误吗？

```
Run_Date,Run_Time,Bar_Num,Symbol,Trade_Date,Day_Open,Day_High,Day_Low,Day_Close,Prior_Open,Prior_High,Prior_Low,Prior_Close,Pct_UpDn_Since_Open,Pct_UpDn_Since_PrClose,Open_Gap,Open_Gap_Pct,Open_Gap_Filled_Intraday,Open_Gap_Filled_With_Close,Open_As_Pct_InOut_Prior_Days_Range,Close_As_Pct_InOut_Prior_Days_Range,Volume:FLOAT,5_Day_Avg_Volume,10_Day_Avg_Volume,20_Day_Avg_Volume,90_Day_Avg_Volume,Volume_As_Pct_Of_5Day_Avg,20_Day_Volatility_StdDev,20_Day_Volatility_Pct_ATR,3_Day_ATR,14_Day_ATR,3_Day_Avg_IDay_Range,14_Day_Avg_IDay_Range,Range_As_Pct_Of_14_Day_Avg_IDay_Range,Consec_Inside_Bars,Consec_Outside_Bars,Days_To_3rd_Friday,Consec_Up_Bars,Consec_Dn_Bars,Key_Reversal_Flag,One_Year_High,One_Year_Low,Pct_In_1Yr_HighLow_Range,Six_Week_High,Six_Week_Low,Pct_In_6Wk_HighLow_Range,20_Day_MA,50_Day_MA,200_Day_MA,Dist_20_From_50_As_Pct_Price,Dist_50_From_200_As_Pct_Price,Dist_From_20_As_Pct_Price,Dist_From_50_As_Pct_Price,Dist_From_200_As_Pct_Price,20_MA_Slope:FLOAT,50_MA_Slope:FLOAT,Stoch_FastK,Stoch_FastD,Stoch_SlowK,Stoch_SlowD,Ultimate_Osc,RSI,OBV,Vol_As_Pct_Of_OBV,CCI,ADX,DMI,DMIPlus,DMIMinus,Lin_Reg_Slope_ADX,Lin_Reg_Slope_DMI,MACD,MACD_Avg_Diff,MACD_Slope,Lin_Regr_Slope,Momentum,Williams_PctR,BB_2_StdDev_Pct_Range,14_Day_MFI,Pct_In_Pivots,Standard_Deviation,Market_Cap,Total_Assets,Total_Liabilities,Total_Long_Term_Debt,Net_Income_Before_Extra_Items,Net_Income,Total_Common_Shares_Outstanding,Total_Equity,Net_Sales,Total_Revenue,Basic_EPS_Including_Extra_Items,Basic_EPS_Excluding_Extra_Items,Capital_Expenditures,Gross_Margin,Gross_Profit,Net_Cash_Beg_Balance,Net_Cash_End_Balance,Operating_Income,Revenue,Total_Debt,Basic_Normalized_EPS,Intangibles_Net,Net_Cash_Per_Rev,Net_Cash_Per_Mkt_Cap,Net_Cash_Per_LTDebt,LTDebt_Per_Revenue,LTDebt_Per_Mkt_Cap
2013/02/13,10:35,1,A,2005/11/15,32.79,32.93,32.43,32.51,30.9,31.37,30.88,31,-0.0085,0.0487,-0.1,-0.0032,0,0,3.898,3.3265,16589515,5822218,4133125,3300523,,2.8493,0.2207,0.0594,0.91,0.63,0.43,0.52,0.9615,0,0,3,0,0,,32.93,32.43,0.16,32.93,32.43,0.16,30.27,,,,,0.0722,,,0.1169,,91.04,91.04,91.04,91.04,0.66,87.87,16589515,1,179.51,50.88,50.88,44.13,14.37,5.451,5.451,0,0,0,0.26,3.3,91.04,1.0733,84.71,0.77,1,16352.53,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.14,,0,0
2013/02/13,10:35,2,A,2005/11/16,32.27,32.6,32.2,32.27,32.79,32.93,32.43,32.51,0,-0.0074,0.28,0.0086,1,0,-0.32,-0.32,4509130,6054180,4397458,3325194,,0.7448,0.2213,0.0574,0.94,0.62,0.46,0.52,0.7682,0,0,2,0,0,,32.6,32.2,0.175,32.6,32.2,0.175,30.42,,,,,0.057,,,0.1314,,85.93,89.34,89.34,90.48,0.62,82.96,12080385,0.3733,142.38,47.4,43.93,42.06,16.39,8.713,8.341,-0.0191,-0.0153,-0.0038,0.38,2.11,85.93,0.9436,79.35,0.35,1.07,16231.81,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.14,,0,0
2013/02/13,10:35,3,A,2005/11/17,32.22,32.78,32.19,32.75,32.27,32.6,32.2,32.27,0.0164,0.0149,0,0,1,1,0.05,1.375,6216584,6692438,4860661,3497155,,0.9289,0.2155,0.0547,0.97,0.59,0.5,0.49,1.2041,0,1,1,0,0,,32.78,32.19,0.9492,32.78,32.19,0.9492,30.6,,,,,0.0665,,,0.1543,,95.23,90.42,90.42,90.27,0.65,84.79,18296969,0.3398,143.47,46.94,46.02,41.26,15.25,10.233,9.886,0.0044,0.0066,-0.001,0.47,2.48,95.23,0.9834,84.85,0.77,1.14,16473.25,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.14,,0,0
2013/02/13,10:35,4,A,2005/11/18,32.78,32.93,32.58,32.89,32.22,32.78,32.19,32.75,0.0034,0.0043,-0.53,-0.0162,1,0,1,1.1864,5226902,7259629,5166406,3640205,,0.72,0.2154,0.0522,0.45,0.54,0.45,0.44,0.8046,0,0,28,0,0,,32.93,32.19,0.9459,32.93,32.19,0.9459,30.78,,,,,0.0643,,,0.1713,,98.61,92.23,92.23,90.66,0.66,85.29,23523871,0.2222,146.68,47.15,47.77,41.33,14.61,10.098,9.975,0.0339,0.0289,0.0072,0.4,2.1,98.61,0.9491,85.45,0.47,1.2,16543.67,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.13,,0,0
2013/02/13,10:35,5,A,2005/11/21,32.6,33.06,32.59,32.96,32.78,32.93,32.58,32.89,0.011,0.0021,-0.11,-0.0033,1,1,0.0571,1.0857,4322231,7372872,5420338,3767038,,0.5862,0.2155,0.0502,0.47,0.53,0.47,0.43,1.0948,0,0,25,0,0,,33.06,32.19,0.8851,33.06,32.19,0.8851,30.96,,,,,0.0607,,,0.1745,,96.49,96.63,96.63,93.09,0.68,85.54,27846102,0.1552,139.87,47.58,49.31,40.54,13.76,8.326,8.522,0.0622,0.0458,0.0178,0.15,2.15,96.49,0.9104,86.04,0.68,1.25,16578.88,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.13,,0,0
2013/02/13,10:35,6,A,2005/11/22,32.84,33.73,32.84,33.51,32.6,33.06,32.59,32.96,0.0204,0.0167,-0.36,-0.0109,1,1,0.5319,1.9574,4083858,4871741,5346979,3835249,,0.8383,0.2177,0.0483,0.57,0.54,0.57,0.44,2.0293,0,0,24,0,0,,33.73,32.19,0.8571,33.73,32.19,0.8571,31.17,,,,,0.071,,,0.1863,,92.95,95.93,95.93,94.93,0.68,87.39,31929960,0.1279,151.6,49.06,56.42,44.2,12.31,5.012,6.07,0.1276,0.0889,0.0351,0.27,2.61,92.95,0.9574,86.58,0.76,1.31,16855.53,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.13,,0,0
2013/02/13,10:35,7,A,2005/11/23,33.4,33.72,33.4,33.59,32.84,33.73,32.84,33.51,0.0057,0.0024,-0.67,-0.02,1,1,0.6292,0.8427,2666357,4503186,5278683,3877272,,0.5921,0.2134,0.0462,0.56,0.54,0.56,0.43,0.7381,1,0,23,0,0,,33.73,32.19,0.9091,33.73,32.19,0.9091,31.39,,,,,0.0657,,,0.1957,,95.51,94.94,94.94,95.83,0.71,87.63,34596317,0.0771,137.99,50.11,56.42,42.47,11.83,0.058,1.604,0.1838,0.116,0.0452,0.23,2.59,95.51,0.9236,86.84,0.28,1.33,16895.77,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.13,,0,0
2013/02/13,10:35,8,A,2005/11/25,33.59,33.7,33.55,33.63,33.4,33.72,33.4,33.59,0.0012,0.0012,-0.19,-0.0057,0,0,0.5938,0.7188,1139222,3487714,5090076,3866218,,0.3266,0.2009,0.0441,0.45,0.52,0.45,0.42,0.3565,2,0,21,0,0,,33.73,32.19,0.9351,33.73,32.19,0.9351,31.63,,,,,0.0595,,,0.212,,96.79,95.09,95.09,95.32,0.69,87.76,35735539,0.0319,122.37,50.9,56.42,41.64,11.6,0.668,2.39,0.2288,0.1289,0.0511,0.21,2.56,96.79,0.9021,86.65,0.33,1.28,16915.89,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.13,,0,0
2013/02/13,10:35,9,A,2005/11/28,33.54,33.59,33.37,33.59,33.59,33.7,33.55,33.63,0.0015,-0.0012,-0.04,-0.0012,0,0,-0.0667,0.2667,3498646,3142063,5200846,3914710,,1.1135,0.2017,0.0423,0.24,0.51,0.23,0.41,0.5432,0,0,18,0,0,,33.73,32.19,0.9091,33.73,32.19,0.9091,31.85,,,,,0.0518,,,0.2234,,95.21,95.85,95.85,95.29,0.74,86.79,32236893,0.1085,103.29,50.73,49.39,40.19,13.62,0.763,1.232,0.2584,0.1267,0.0493,0.14,2.47,95.21,0.8682,84.11,0.79,1.21,16895.77,6751,2670,0,-17,26,503,4081,1407,1407,0.05,-0.03,-139,49.4,695,2315,2226,70,1407,0,-0.03,38,1.58,0.13,,0,0
2013/02/13,10:36,346,AA,1999/07/26,29.5,30.22,29.25,29.31,30.75,31.06,29.75,29.75,-0.0064,-0.0148,1,0.0336,1,0,-0.1908,-0.3359,2070600,2095480,2892060,3199040,4231589,0.9881,0.246,0.0346,1.09,0.87,1.09,0.8,1.2179,0,0,25,0,2,,33.97,14.48,0.7609,33.97,27.22,2.197,30.82,30.81,23.62,0.0003,0.2417,-0.0509,-0.0505,0.1912,-0.0397,-0.0371,2.32,15.3,15.3,18.88,0.35,39.06,83682400,0.0247,-175.64,12.28,2.46,23.04,24.2,-0.802,-1.128,-0.3041,-0.1894,-0.0406,-0.21,-1.88,2.32,-0.0905,41.96,0.3,0.66,21493.989,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:36,347,AA,1999/07/27,29.38,30.63,29.38,30.31,29.5,30.22,29.25,29.31,0.0317,0.0341,0.19,0.0065,0,0,0.134,1.0928,3260200,2344160,2865480,3206870,4231138,1.3908,0.2739,0.034,1.2,0.85,1.18,0.82,1.5231,0,0,24,1,0,,33.97,14.48,0.8122,33.97,27.22,2.3452,30.76,30.79,23.68,-0.0013,0.2427,-0.0153,-0.0165,0.2261,-0.0514,-0.031,40.93,15.25,15.25,16.31,0.43,47.52,86942600,0.0375,-95.34,11.7,4.07,23.79,21.93,-0.767,-0.31,-0.2858,-0.1369,-0.0369,-0.09,-1,40.93,0.3203,53,0.65,0.64,22227.322,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:36,348,AA,1999/07/28,30.13,30.81,29.88,30.75,29.38,30.63,29.38,30.31,0.0206,0.0145,-0.93,-0.0307,1,1,0.6,1.096,1857600,2391120,2688000,3202190,4214942,0.7769,0.2795,0.0334,1.07,0.85,1.05,0.82,1.1332,0,0,23,2,0,,33.97,14.48,0.8348,33.97,27.22,2.4104,30.72,30.78,23.74,-0.0019,0.2323,0.001,-0.0009,0.2313,-0.0614,-0.0258,57.92,33.72,33.72,21.42,0.48,50.76,88800200,0.0209,-38.61,11.35,6.88,23.5,20.47,-0.675,0.519,-0.2331,-0.0673,-0.0217,0.06,-0.34,57.92,0.5121,50.11,0.55,0.62,22549.989,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:36,349,AA,1999/07/29,30.25,30.44,29.88,30.09,30.13,30.81,29.88,30.75,-0.0053,-0.0215,-0.62,-0.0202,0,0,0.3978,0.2258,1595200,2263200,2500460,3137220,4204020,0.7048,0.2833,0.0338,1.04,0.86,0.91,0.81,0.6877,0,0,22,0,1,,33.97,14.48,0.8009,33.97,28.25,2.729,30.68,30.77,23.79,-0.0029,0.2269,-0.0191,-0.022,0.2049,-0.0591,-0.0195,36.84,45.58,45.58,31.52,0.45,46.16,87205000,0.0183,-79.39,11.03,6.88,22.02,19.19,-0.577,0.695,-0.2418,-0.0608,0.003,0.21,-0.91,36.84,0.2599,43.53,0.34,0.63,22065.989,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:36,350,AA,1999/07/30,30,30.09,29.56,29.94,30.25,30.44,29.88,30.09,-0.002,-0.005,0.16,0.0053,0,0,0.2143,0.1071,2109000,2178520,2174520,3065440,4198836,0.9681,0.2754,0.0332,0.78,0.85,0.67,0.8,0.6637,0,0,21,0,2,,33.97,14.48,0.7932,33.97,29.16,3.2141,30.6,30.76,23.85,-0.0051,0.2296,-0.022,-0.0271,0.2025,-0.052,-0.0141,31.51,42.92,42.92,40.74,0.47,45.16,85096000,0.0248,-106.77,10.3,0.79,21.15,20.82,-0.53,0.076,-0.2578,-0.0615,0.0136,0.1,-0.97,31.51,0.2263,43.6,0.56,0.62,21955.989,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:36,351,AA,1999/08/02,30.09,30.88,29.81,30.72,30,30.09,29.56,29.94,0.0209,0.0261,0.06,0.002,1,0,1,2.1887,1790400,2122480,2108980,3028090,4197444,0.8435,0.2922,0.0325,0.82,0.89,0.72,0.85,1.2641,0,0,18,1,0,,33.97,14.48,0.8332,33.97,29.25,3.4407,30.57,30.79,23.91,-0.0073,0.2297,0.005,-0.0023,0.2275,-0.0495,-0.0036,67.12,45.05,45.05,44.51,0.48,51.1,86886400,0.0206,-17.86,10.55,13.83,25.32,19.17,-0.432,0.854,-0.2052,-0.0071,0.0136,0,0.34,67.12,0.5652,50.75,0.82,0.59,22527.989,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:36,352,AA,1999/08/03,30.72,31.22,30.5,31.06,30.09,30.88,29.81,30.72,0.0111,0.0111,-0.63,-0.0205,0,0,0.8505,1.1682,2021800,1874800,2109480,2883520,4192716,1.0784,0.2891,0.0317,0.77,0.91,0.77,0.87,0.831,0,0,17,2,0,,33.97,14.48,0.8507,33.97,29.25,3.5127,30.53,30.81,23.97,-0.0092,0.2227,0.0173,0.0081,0.2309,-0.0496,0.0083,82.65,60.43,60.43,49.46,0.56,53.47,88908200,0.0227,69.7,11.14,18.78,26.51,18.13,-0.242,2.228,-0.1345,0.0508,0.0234,0.13,0.53,82.65,0.7611,48.4,0.48,0.52,22777.322,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:36,353,AA,1999/08/04,30.94,32.59,30.94,32,30.72,31.22,30.5,31.06,0.0343,0.0303,-0.34,-0.0109,1,1,0.6111,2.0833,3546400,2212560,2301840,2733780,4197251,1.6028,0.2755,0.0318,1.15,0.98,1.15,0.95,1.7434,0,0,16,3,0,,33.97,14.48,0.8989,33.97,29.25,3.7119,30.59,30.85,24.03,-0.0082,0.2195,0.0453,0.0371,0.2566,-0.0244,0.0212,82.34,78.11,78.11,61.19,0.62,59.33,92454600,0.0384,187.53,12.84,34.98,33.19,15.99,0.091,4.41,-0.0027,0.1462,0.0602,0.49,1.5,82.34,1.0842,58.81,0.76,0.62,23466.655,17098.4,11007,2807.6,240,240,733,6091.4,4032.7,4075.5,0.33,0.33,-387.7,22.13,892.3,342.2,242.7,431.6,4032.7,3370.7,0.33,119.8,0.06,0.01,-3.67,-0.02,0
2013/02/13,10:37,539,AAN,2009/04/09,19.54,20.33,19.19,19.41,18.43,19.19,18.39,19.12,-0.0067,0.0152,-0.69,-0.0361,0,0,1.4375,1.275,2514394,1483810,1498888,1480106,1402062,1.6946,0.4111,0.0455,0.86,0.93,0.84,0.9,1.2597,0,0,8,3,0,,20.33,10.07,0.9103,20.33,14.31,1.5515,17.25,16.32,16.77,0.0487,-0.0237,0.1131,0.1617,0.138,0.1546,0.0409,83.21,90.51,90.51,92.38,0.65,73.74,7546992,0.3332,159.48,20.41,51.2,33.47,10.8,1.349,3.802,0.7835,0.2487,0.0552,0.23,3.8,83.21,0.9584,68.44,0.47,1.21,1562.033,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.05
2013/02/13,10:37,540,AAN,2009/04/13,19.4,19.75,19.03,19.66,19.54,20.33,19.19,19.41,0.0134,0.0129,0.13,0.0067,1,1,0.1842,0.4123,1296444,1569901,1504473,1483597,1407393,0.8258,0.411,0.0445,0.91,0.92,0.89,0.89,0.8051,0,0,4,4,0,,20.33,10.07,0.9347,20.33,14.31,1.593,17.4,16.4,16.78,0.0514,-0.0196,0.1164,0.1677,0.1481,0.1509,0.0567,87.77,89.15,89.15,91.02,0.66,75.13,8843436,0.1466,129.02,22.28,46.57,31.49,11.48,1.5,3.463,0.8493,0.2516,0.0625,0.34,4.03,87.77,0.9414,68.21,0.48,1.31,1582.152,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.04
2013/02/13,10:37,541,AAN,2009/04/14,19.52,19.61,18.83,19.33,19.4,19.75,19.03,19.66,-0.0097,-0.0168,-0.26,-0.0132,0,0,0.6806,0.4167,1064467,1616283,1412678,1486683,1409051,0.6586,0.3994,0.0452,0.92,0.93,0.88,0.9,0.8619,0,0,3,0,1,,20.33,10.07,0.9025,20.33,14.31,1.5382,17.56,16.5,16.8,0.054,-0.0154,0.0899,0.144,0.1286,0.1552,0.0739,81.75,84.25,84.25,87.97,0.66,69.86,7778969,0.1368,103.54,23.6,40.77,29.33,12.34,1.627,3.276,0.8649,0.2137,0.0579,0.22,2.43,81.75,0.8376,68.11,0.57,1.34,1555.595,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.05
2013/02/13,10:37,542,AAN,2009/04/15,19.36,19.93,19.12,19.4,19.52,19.61,18.83,19.33,0.0021,0.0036,0.19,0.0098,1,0,0.6795,0.7308,1434901,1641478,1384125,1518444,1404930,0.8742,0.3896,0.0448,0.79,0.9,0.77,0.87,0.9333,0,0,2,1,0,,20.33,10.07,0.9094,20.33,14.31,1.5498,17.7,16.6,16.82,0.0571,-0.0117,0.088,0.1451,0.1334,0.1519,0.0857,79.69,83.27,83.27,85.56,0.61,70.34,9213870,0.1557,104.97,25.1,44.55,30.01,11.51,1.696,2.586,0.8728,0.1773,0.04,0.05,2.48,79.69,0.8149,75.77,0.46,1.39,1561.228,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.05
2013/02/13,10:37,543,AAN,2009/04/16,19.51,19.75,19.17,19.64,19.36,19.93,19.12,19.4,0.0067,0.0124,-0.04,-0.0021,1,0,0.4815,0.642,1297275,1521496,1396042,1469134,1405945,0.8526,0.3854,0.0436,0.74,0.84,0.72,0.82,0.703,1,0,1,2,0,,20.33,10.07,0.9327,20.33,14.31,1.5897,17.85,16.68,16.85,0.0608,-0.0088,0.0921,0.1528,0.144,0.1509,0.0905,82.71,81.35,81.35,82.96,0.63,71.97,10511145,0.1234,96.58,26.49,44.55,28.54,10.95,1.69,1.61,0.8882,0.1542,0.0233,0.02,1.81,82.71,0.8222,75.7,0.5,1.42,1580.542,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.04
2013/02/13,10:37,544,AAN,2009/04/17,19.75,20.09,19.52,20.01,19.51,19.75,19.17,19.64,0.0132,0.0188,-0.13,-0.0066,1,0,1,1.4483,1020070,1222631,1353221,1424558,1410754,0.8343,0.38,0.042,0.65,0.84,0.65,0.82,0.6945,0,0,28,3,0,,20.33,10.07,0.9688,20.33,14.31,1.6512,18.04,16.77,16.87,0.0647,-0.0054,0.1005,0.1652,0.1598,0.1563,0.0898,91.6,84.33,84.33,82.98,0.64,74.32,11531215,0.0885,104.99,28.07,48.6,30.08,10.41,1.609,0.555,0.9197,0.1485,0.0164,0.1,2.24,91.6,0.8482,75.66,0.61,1.45,1610.318,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.04
2013/02/13,10:37,545,AAN,2009/04/20,20,20.7,18.21,18.68,19.75,20.09,19.52,20.01,-0.066,-0.0665,-0.26,-0.013,1,0,0.8421,-1.4737,1213111,1205965,1387933,1427325,1414045,1.0059,0.4492,0.0494,1.21,0.92,1.21,0.9,2.7777,0,1,25,0,1,KEYREVERSALDN,20.7,10.07,0.81,20.7,14.31,1.3474,18.18,16.83,16.89,0.0673,-0.003,0.0251,0.0924,0.0894,0.1569,0.0833,42.78,73.26,73.26,79.65,0.49,56.13,10318104,0.1176,62.55,27.07,14.08,24.4,18.38,1.23,-3.697,0.8277,0.0453,-0.0027,-0.07,0.83,42.78,0.5944,68.46,0.64,1.37,1503.286,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.05
2013/02/13,10:37,546,AAN,2009/04/21,18.7,19.06,18.65,18.99,20,20.7,18.21,18.68,0.0155,0.0166,1.32,0.0707,1,0,0.1968,0.3133,795316,1152135,1384209,1392089,1413351,0.6903,0.4495,0.0473,1.16,0.87,1.16,0.85,0.4815,1,0,24,1,0,,20.7,10.07,0.8391,20.7,14.31,1.3959,18.33,16.88,16.91,0.0776,-0.0015,0.0352,0.1129,0.1113,0.159,0.0729,51.56,62.74,62.74,73.44,0.53,58.67,11113420,0.0716,40.89,26.14,14.08,23.61,17.78,0.767,-5.243,0.771,-0.0092,-0.0264,-0.18,0.65,51.56,0.6333,62.69,0.17,1.27,1528.233,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.05
2013/02/13,10:37,547,AAN,2009/04/22,19.29,19.63,18.54,19.13,18.7,19.06,18.65,18.99,-0.0083,0.0074,-0.29,-0.0153,1,0,1.561,1.1707,1201683,1105491,1373485,1388864,1419045,1.087,0.4385,0.0474,1.33,0.9,1.33,0.88,1.2417,0,1,23,2,0,,20.7,10.07,0.8523,20.7,14.31,1.4178,18.51,16.94,16.93,0.0826,0.0005,0.0328,0.1154,0.1159,0.1603,0.0644,45.1,46.57,46.57,60.86,0.5,59.8,12315103,0.0976,49.35,25.92,23.09,26.04,16.27,0.344,-5.159,0.7289,-0.041,-0.0467,-0.2,0.5,45.1,0.6448,68.89,0.75,1.1,1539.5,1233.27,471.73,114.82,21.01,21.08,80,761.54,391.13,404.89,0.26,0.26,-74.92,77.84,304.46,4.79,7.38,34.12,391.13,114.82,0.26,7.5,0.02,0,-0.1,-0.18,-0.05 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T02:44:30.743

尽管文档说空条目映射到 value `0`，但 LOAD DATA INFILE 实际上并不处理空条目。它们必须具有适合于列的数据类型的值，或者具有`\N`表示 NULL 的序列。

请参阅错误[http://bugs.mysql.com/bug.php?id=64603](http://bugs.mysql.com/bug.php?id=64603)

要解决此问题，您可以`\N`使用 sed 命令（或您在 Windows 上使用的任何等效文本替换工具）替换空条目。

另请参阅[MySQL 从 CSV 数据加载 NULL 值](https://stackoverflow.com/questions/2675323/mysql-load-null-values-from-csv-data)

# c - 缩小二维数组的大小并从中删除特定行

> ID：15169793
> 
> 赞同：0
> 
> 时间：2013-03-02T01:54:00.007
> 
> 标签：c

我正在编写一个 C 程序，其中有两个二维数组，分别是 arr1 和 arr2。我必须从 arr1 中删除特定行并将其添加到 arr2。所以我使用 realloc 将 arr2 的大小动态增加 1，并将 arr1 的那一行的内容复制到这个新创建的 arr2 行。

但我的问题是我无法缩小 arr1 的大小并使用`realloc`. 任何人都可以用 C 代码帮助我，该代码可用于动态缩小 2d 数组的大小（使用`realloc`或其他）并从中删除特定行（通过使用该行的索引）？

起初我像这样创建了两个矩阵

```
a_seq=(float **)malloc(count1*sizeof(float*));
for(i=0;i<count1;i++)
    a_seq[i]=(float *)malloc(n*sizeof(float)); 
```

然后我`realloc`在将第二个矩阵的大小增加 1 后对第二个矩阵执行了

```
a_full=(float **)realloc(a_full,count2*sizeof(float *));
a_full[count2-1]=(float *)malloc(n*sizeof(float));
for(s=0;s<n;s++)
   a_full[count2-1][s]=a_seq[p][s]; 
```

p 是要从 a_seq 中删除的行的索引。我的问题是我可以应用相同的概念`realloc`来缩小 a_seq 矩阵的大小并删除指定的行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:00:38.870

我假设您将以以下形式为二维数组分配内存：

```
int * arr = malloc(sizeof(int)*r*c); 
```

相反，如果您逐行分配内存，则删除行的问题会简化。

```
int * arr[r]; /*Declaring an array of pointers*/
/*Allocating memory row by row*/
for(i=0; i<r; i++)       arr[i] = malloc(sizeof(int)*c);

....

/*Row denotes the row to be deleted*/
free(arr[row]);
for(i=row; i<r-1; i++)    arr[i] = arr[i+1]; 
```

这样，您只剩下指针数组分配中的额外指针。您要删除的行将被成功删除。

# weblogic - 在不同路径上具有相同名称的多个 cookie 名称

> ID：15169802
> 
> 赞同：1
> 
> 时间：2013-03-02T01:54:54.517
> 
> 标签：weblogic, session-cookies, jsessionid

关于这个问题，我读到浏览器发送 cookie 如下

**路径越具体，优先级越高**

我在浏览器中有两个 cookie

```
jsessionid=avalue domain some.example.com
jsessionid=bvalue domain.example.com 
```

当我请求[http://some.example.com](http://some.example.com)这些 cookie 将按顺序发送到服务器

```
jsessionid=avalue
jsessionid=bvalue 
```

我对吗？

并假设 Weblogic 服务器欢迎该请求，那么 weblogic 如何应对这种情况？

如您所知，jsession id 用于确定 weblogic 中的会话 id。这对我来说是一个非常关键的问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T02:52:18.560

您是对的，cookie 路径越具体，优先级越高。但是，在您的情况下，区别在于两个 cookie 之间的域，而不是路径。基于其他属性（包括域）的优先级未指定，并且可能因浏览器而异。这意味着，如果您针对“.example.org”和“some.example.org”设置了同名的cookie，您无法确定哪个会被发回。[http://www.sitepoint.com/3-things-about-cookies-you-may-not-know/](http://www.sitepoint.com/3-things-about-cookies-you-may-not-know/)

**根据评论编辑：**

如果您将两个战争部署在一起，我建议您使用两个不同的 cookie 名称。默认会话 cookie 名称是 jsessionid，但它可以在`weblogic.xml`.

```
<session-descriptor>
   <cookie-name>jsessionid_app1</cookie-name>
</session-descriptor> 
```

# php - 如何在 MAMP 中调试 wordpress 管理员用户搜索

> ID：15169803
> 
> 赞同：0
> 
> 时间：2013-03-02T01:54:56.393
> 
> 标签：php, mysql, wordpress, osx-mountain-lion, mamp

我正在使用 MAMP Pro v2.2.1 在 OSX 10.8 上本地开发我的 Wordpress 站点。一切正常，除非我以管理员用户身份登录，然后我转到设置 > 所有用户，然后尝试搜索特定用户（使用顶部的搜索栏）。每当我这样做时，表单似乎已提交，浏览器上的小微调器开始转动......然后什么也没有发生。控制台中没有错误。没有 500 页。只是永远旋转的轮子。之后，除非我停止/启动 MAMP，否则我无法打开任何其他菜单。我有很多调试 wordpress 插件和主题的经验，但我不知道如何调试管理的东西，因为它是由核心提供的。

到目前为止我已经尝试过：

*   所有其他菜单页面正常响应（除非我导致此崩溃）。
*   所有其他管理菜单正常响应，包括搜索功能。
*   实时站点在服务器上运行良好，包括用户搜索
*   我的同事在使用 XAMP 检查相同的代码并在他的 PC 上进行测试时没有这个问题。
*   我跑了`CHECK TABLE wp_users`，MySQL 返回“Ok”
*   我检查了 MAMP 的 php_error.log，mysql_error_log.err

另一个细节是，在我触发问题后（通过搜索用户），我可以关闭窗口，浏览到其他网站，当我返回本地网站时，它仍然坏了。解决它的唯一方法是重新启动 MAMP

我会喜欢有关如何调试此问题的任何建议，因为我正在进行一个涉及用户注册的项目，并且无法搜索用户真的很不方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:32:31.727

`wp_users`我能够通过从表中删除一堆用户来解决这个问题。我怀疑我只是在 users 表中遇到了这个问题，因为那是迄今为止最大的表（它最近从生产站点转储了大约 9000 个用户）。我猜 MAMP 的 MySQL 崩溃了，因为它无法处理如此大的表上的搜索查询。一旦我删除了大部分行，搜索就会再次开始正常工作。我敢肯定，对于更熟悉 MAMP 中的 MySQL 配置的人来说，还有另一种解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:01:17.743

您是否设置了要使用的本地数据库，或者您的站点的 MAMP 副本是否连接到实时数据库？如果您经常打开和关闭连接（或不全部关闭），远程数据库连接通常很慢并且可能会超时。

# android - 在 android 设备上获取 cdma dbm

> ID：15169815
> 
> 赞同：1
> 
> 时间：2013-03-02T01:57:30.467
> 
> 标签：android, eclipse, samsung-mobile

我试过用这个来展示我的 evdo dbm。它可以在我的模拟器上运行，但不能在我的真实设备上运行，为什么？有什么不对吗？这是我的源代码：

```
package com.cdbmsof2;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.SignalStrength;
import android.telephony.TelephonyManager;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class CdBmSOF2MainActivity extends Activity implements OnClickListener {
TextView dateAndTimeLabel;
private Button closeButton; 
private int signalDBM = 0;

public class GetParams extends PhoneStateListener 
{

    @Override  
    public void onSignalStrengthsChanged(SignalStrength signalStrength)
    {
         super.onSignalStrengthsChanged(signalStrength);
         signalDBM = signalStrength.getEvdoDbm();
    }
}

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_cd_bm_sof2_main);

    GetParams listener = new GetParams();
    TelephonyManager TelManager = ( TelephonyManager )getSystemService(Context.TELEPHONY_SERVICE);
    TelManager.listen(listener ,PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

    Button btn=(Button)findViewById(R.id.start);
    btn.setOnClickListener(this);             
}

public void onClick(View v) {
    switch (v.getId()) {
           case R.id.start:
                Toast.makeText(this, "CDMA signal strength is " + this.signalDBM , Toast.LENGTH_SHORT).show();
                break;                    
   }
}    

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_cd_bm_sof2_main, menu);
    return true;
}
} 
```

这是我的 manifest.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.cdbmsof2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".CdBmSOF2MainActivity"
            android:label="@string/title_activity_cd_bm_sof2_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
</manifest> 
```

有人会帮助我吗？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:26:11.223

您可能希望将 MODIFY 权限更改为 READ 权限，因为您不是在修改手机状态，而是尝试读取它：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T10:39:02.497

我试过你的代码，但值`signalDBM`不会改变。即使根本没有互联网连接，它也会保持不变。我正在尝试做类似的事情，您的代码对我有很好的帮助，但现在我面临这个问题。该程序是否会改变您的价值观？请告诉我..

# ajax - 谷歌爬取 ajax / 动态生成的内容 - SEO

> ID：15169824
> 
> 赞同：2
> 
> 时间：2013-03-02T01:58:49.777
> 
> 标签：ajax, web-crawler, seo, google-crawlers

我有一个非常独特的情况，我认为这里的任何其他主题都无法与之相关。

我有一个动态加载/嵌入到第三方网站的电子商务模块，没有将 iframe 直接 JSON 到 Web 客户端的内容。我根本无法访问这些第三方网站，除了从他们的页面加载我的 javascript 文件并动态生成内容。

我知道#! 方法，但这在这里不好，我的 JS 确实在嵌入式平台内生成“url”，但它们是假的，仅用于地址栏，我不相信谷歌爬虫可以达到这么远。

所以我的问题是，是否有一个元数据我们可以设置为指向 url 之外，即返回到我的服务器并带有静态可抓取内容。即，将规范指向我的服务器......但我再次认为这行不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:11:57.710

如果你执行 #! 那么您必须确保嵌入的 url 支持片段参数版本，而您可能无法做到这一点。这是服务器端的东西。

您可能也无法影响页面的规范标签。它再次必须在服务器端完成。您通过 JavaScript 设置的任何元标记都不会被机器人看到。

Disqus 通过提供 API 解决了这个问题，因此嵌入网站可以到达评论服务器端，然后以纯 html 呈现。WordPress 有一个插件可以做到这一点。Disqus 也是 Google 研究出如何抓取其 AJAX 页面的少数系统之一。

一些插件要求人们还包括一个带有 JavaScript 的普通链接。请注意这一点，因为如果您做错了，您可能会违反 Google 指南。但是您可以将纯链接与您的插件集成，以便它将机器人和用户引导到内容的可抓取版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:02:23.390

查看[Google 的可抓取 ajax 标准](http://googlewebmastercentral.blogspot.com/2009/10/proposal-for-making-ajax-crawlable.html)（以及[为什么这是一个坏主意](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)）和[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T21:20:14.407

现在你可以真正做到这一点。可以在此处找到完整的指南和示例：[https ://github.com/kubrickology/Logical-escaped_fragment](https://github.com/kubrickology/Logical-escaped_fragment)

# google-chrome-extension - 向 Chrome 扩展添加图标菜单

> ID：15169826
> 
> 赞同：0
> 
> 时间：2013-03-02T01:59:07.790
> 
> 标签：google-chrome-extension, menuitem

我成功创建了我的第一个 Chrome 扩展程序。它现在仅在单击扩展图标而不是在背景上时运行，这很棒。但是，我想向我的扩展程序添加更多操作我一直在尝试使用扩展程序弹出窗口来运行其他功能，但我无法使其工作。它不一定是那样的，所以我愿意接受建议。我不想使用上下文菜单。我希望人们单击扩展图标并向他们显示“菜单”。

现在，我的扩展程序仅在找到有效页面（来自 mydomain.com）时才会提醒消息，并且它会找到一个名为“returnURL”的隐藏字段。它会提醒该值。

我希望能够添加单击图标的功能，而是显示具有多个选项的选项菜单。

像这样的东西：

单击扩展图标并显示两个选项

*   获取响应 URL（此选项将运行我现在拥有的当前功能）
*   做其他事情（所以我可以在加载的页面上执行另一个函数）

...以及更多选项，如果我需要在我的扩展的未来版本中添加它们。

我如何修改我的扩展来做到这一点。

这是我的代码：

清单.json

```
 {
            "name": "Get Response URL",
            "version": "1.0",
            "manifest_version": 2,
            "browser_action": {
            "default_icon": "mkto_icon.png",
            "name": "Click to get URL"
            },
            "background":{
                "scripts":["background.js"]
            },
            "permissions":["http://mydomain.com/*"]
     } 
```

背景.js

```
 chrome.browserAction.onClicked.addListener(function (tab) { //Fired when User Clicks ICON
        if (tab.url.indexOf("http://mydomain.com/") != -1) { // Inspect whether the place where user clicked matches with our list of URL
            chrome.tabs.executeScript(tab.id, {
                "file": "contentscript.js"
            }, function () { // Execute your code
                console.log("Script Executed .. "); // Notification on Completion
            });
        }
    }); 
```

内容脚本.js

```
 if (document.getElementsByName("returnURL")){
    alert("\nThe Response URL on this form is:\n\n" + document.getElementsByName("returnURL")[0].value);
    } 
```

我按照我在 Google Extensions 开发者网站上找到的文档进行操作，但我无法让它工作。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T13:04:30.327

您无法拥有带有 Chrome 扩展程序的真实菜单。但是，您可以在单击按钮时显示 HTML 页面（弹出窗口）。您可以以类似于菜单的方式设置此 HTML 页面的样式：

```
"browser_action": {
   "default_icon": "mkto_icon.png",
   "default_title": "Click here to open menu",
   "default_popup": "popup.html"
 }, 
```

将文件添加`popup.html`到您的扩展名以及您想要显示的任何内容。弹出页面加载的脚本可以加载内容脚本并与它们进行通信，就像背景页面一样。

供参考：[浏览器操作文档](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction)。

# subscription - 重新激活 Paymill 订阅，并更新信用卡信息

> ID：15169827
> 
> 赞同：2
> 
> 时间：2013-03-02T01:59:21.000
> 
> 标签：subscription, paymill

Paymill 的 API 很棒。这是一个可以工作的火焰，如果不是边缘情况，我*应该启动并运行。*Context是一款SAAS应用，有demo试用，可以随意升级和降级。

*   用户取消她的订阅：此时，她的帐户在预付款日期之前保持活动状态。Paymill 收到 2 个 API 调用：

    *   删除 [https://api.paymill.com/v2/subscriptions/的调用](https://api.paymill.com/v2/subscriptions/)
    *   删除 [https://api.paymill.com/v2/payments/的调用](https://api.paymill.com/v2/payments/)

情景：她改变主意，并再次尝试升级。到目前为止，我已经尝试通过以下方式进行建模：

*   使用客户端、报价和付款信息对[https://api.paymill.com/v2/subscriptions](https://api.paymill.com/v2/subscriptions)进行POST -类似于原始订阅 - 返回付款错误：订阅已连接
*   [使用付款信息对https://api.paymill.com/v2/subscriptions/](https://api.paymill.com/v2/subscriptions/)进行PUT （根据[Paymill API：如何更新订阅的信用卡？](https://stackoverflow.com/questions/14909570/paymill-api-how-do-i-update-a-subscriptions-credit-card)）返回付款错误：订阅已取消

所需的输出是*Continuing Subscription*：直到下个月期间不收取信用卡费用，并且通过新的付款信息应用进一步的 CC 费用。

这可以通过哪些方式实现？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:37:37.280

让我首先说您描述的 POST 应该可以执行。这目前是一个错误，这将在下周的某个时候修复。

但不幸的是，目前不支持您的用例。我们正在努力使我们的订阅功能更强大，同时保持使用的简单性。我们无法为此提供时间表，但我们很乐意听到更多关于您的案例的信息。

目前，鼓励商家自行管理订阅，因为这不是在下一个订阅到期日更改收费金额的简单问题。例如，如果您的客户决定降级，您会按比例退还超出部分吗？升级也是一样：你会在到期日收取新订阅的全部费用，还是按比例收取旧订阅+按比例新订阅？

也就是说，我鼓励您关注我们的博客，了解改进订阅处理的公告。

披露：我在 PAYMILL 工作。

# c++ - 可以在 C++ 标头中实现类模板的非模板嵌套类吗？

> ID：15169829
> 
> 赞同：1
> 
> 时间：2013-03-02T01:59:38.397
> 
> 标签：c++, templates, header-files, nested-class

假设一个头文件`myheader.hxx`定义了一个类模板`A`，其中定义了一个非模板类`B`（不依赖于模板参数`A`）：

```
template<class T>
class A {
    class B { 
        // ...
    };
}; 
```

在这种情况下可以实现`B`in `myheader.hxx`，还是我需要单独编写一个`myheader.cxx`以避免在链接时重复定义？这种情况是否由不同的编译器一致处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:09:42.077

即使它不是顶级模板，它仍然是模板（或模板的一部分，不知道超精确的定义），因此您~~需要~~在标头中实现它（从技术上讲，它可以在源代码中）文件，如果那是它唯一使用的地方，但这可能会破坏目的）。

注意：如果您不打算在类定义中实现其成员函数，则需要如下语法：

```
template<typename T>
void A<T>::B::foo(...)
{
    // ...
} 
```

另外，因为它之前出现过，如果`B`碰巧有自己的模板参数，它会是这样的：

```
template<typename T>
template<typename T2>
void A<T>::B<T2>::foo(...)
{
    // ...
} 
```

不是：

```
template<typename T, typename T2>
void A<T>::B<T2>::foo(...)
{
    // ...
} 
```

或者如果`B`没有但`B::foo`做了，那将是：

```
template<typename T>
template<typename T2>
// void A<T>::B::foo<T2>(...) // not this apparently
void A<T>::B::foo(...)
{
    // ...
} 
```

**编辑**：显然它是`foo`上面而不是`foo<T2>`函数，至少对于 GCC（所以几乎 100% 确定这是标准行为）......我相信一些语言律师将能够解释为什么:)

等等。

# css - 内容和页脚之间的额外空间

> ID：15169830
> 
> 赞同：1
> 
> 时间：2013-03-02T01:59:43.493
> 
> 标签：css, html, spacing

我使用[这种方法在](http://ryanfait.com/sticky-footer/)[我的网站上](http://gsingh93.github.com/)设置了一个粘性页脚，由于某种原因，内容底部和页脚顶部之间存在大量额外空间。我不知道为什么。由于第一页上的内容不多，因此页面甚至不应该超出视口，也不应该有滚动条。这是怎么回事？

这是页面的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="/css/styles.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/css/pygment_trac.css" media="screen" />
    <link href="/menu_assets/styles.css" rel="stylesheet" type="text/css">

    <title>gulshansingh.com</title>
  </head>

  <body>
    <header>
      <img src="/images/banner.jpg">
    </header>
    <div id='cssmenu'>
      <ul>
    <li><a href='/'><span>Home</span></a></li>
    <li><a href='/about/'><span>About</span></a></li>
    <li><a href='/projects/'><span>Projects</span></a></li>
    <li><a href='/articles/'><span>Articles</span></a></li>
      </ul>
    </div>

    <div class="container">
      <section id="main_content">
    <h3>Welcome to GitHub Pages.</h3>

<p>This is a test home page for my site</p>

<pre><code>$ cd your_repo_root/repo_name
$ git fetch origin
$ git checkout gh-pages
</code></pre>

<h3>Section 2</h3>

<p>Lorem ipsum</p>

      </section>
      <div class="push">
    </div>
    </div>

    <div id="footer">
      Footer content goes here
    </div>

  </body>
</html> 
```

这是 CSS（尽管查看 Firebug/CDT 可能更有帮助）：

```
* {
    margin: 0;
}

html, body {
    height: 100%;
    min-height: 100%;
}

.container {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -80px; /* the bottom margin is the negative value of the footer's height */
}

#footer, .push {
    height: 80px; /* .push must be the same height as .footer */
}

body {
  margin: 0;
  padding: 0;
  background: #161616;
  color: #eaeaea;
  font: 16px;
  line-height: 1.5;
  font-family: Monaco, "Bitstream Vera Sans Mono", "Lucida Console", Terminal, monospace;
}

/* General & 'Reset' Stuff */

.container {
  width: 100%;
}

section {
  display: block;
  margin: 0 0 20px 0;
}

h1, h2, h3, h4, h5, h6 {
  margin: 15px 0 5px;
}

p {
    margin: 0 0 5px;
}

li {
  line-height: 1.4 ;
}

header, header img {
    position: relative;
    z-index: 10;
    width: 100%;
    height: 150px;
    box-shadow: 0 0 5px #469B46;
  -webkit-box-shadow: 0 0 5px #469B46;
  -moz-box-shadow: 0 0 5px #469B46;
  -o-box-shadow: 0 0 5px #469B46;
  -ms-box-shadow: 0 0 5px #469B46;
}

#downloads .btn {
  display: inline-block;
  text-align: center;
  margin: 0;
}

/* Main Content
*/

#main_content {
  padding: 20px;
  background: #474747;
  width: 80%;
  margin: 50px auto;
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  -webkit-font-smoothing: antialiased;
}
section img {
  max-width: 100%
}

h1, h1 a, h2, h2 a, h3, h3 a, h4, h4 a, h5, h5 a, h6, h6 a {
  font-weight: normal;
  font-family: Monaco, "Bitstream Vera Sans Mono", "Lucida Console", Terminal, monospace;
  color: #b5e853;
  letter-spacing: -0.03em;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1),
               0 0 5px rgba(181, 232, 83, 0.1),
               0 0 10px rgba(181, 232, 83, 0.1);
  -moz-transition: all 0.3s ease-out;  /* FF3.7+ */
  -o-transition: all 0.3s ease-out;  /* Opera 10.5 */
  -webkit-transition: all 0.3s ease-out;  /* Saf3.2+, Chrome */
  transition: all 0.3s ease-out; 
}

h1 a:hover, h2 a:hover, h3 a:hover, h4 a:hover, h5 a:hover, h6 a:hover {
    color: #ccc;
}

#main_content h1 {
  font-size: 30px;
}

#main_content h2 {
  font-size: 24px;
}

#main_content h3 {
  font-size: 18px;
}

#main_content h4 {
  font-size: 14px;
}

#main_content h5 {
  font-size: 12px;
  text-transform: uppercase;
  margin: 0 0 5px 0;
}

#main_content h6 {
  font-size: 12px;
  text-transform: uppercase;
  color: #999;
  margin: 0 0 5px 0;
}

dt {
  font-style: italic;
  font-weight: bold;
}
/*
ul li {
  list-style: none;
}

ul li:before {
  content: ">>";
  font-family: Monaco, "Bitstream Vera Sans Mono", "Lucida Console", Terminal, monospace;
  font-size: 13px;
  color: #b5e853;
  margin-left: -37px;
  margin-right: 21px;
  line-height: 16px;
}*/

blockquote {
  color: #aaa;
  padding-left: 10px;
  border-left: 1px dotted #666;
}

pre {
  background: rgba(0, 0, 0, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.15);
  padding: 10px;
  font-size: 14px;
  color: #b5e853;
  border-radius: 2px;
  -moz-border-radius: 2px;
  -webkit-border-radius: 2px;
  text-wrap: normal;
  overflow: auto;
  overflow-y: hidden;
}

table {
  width: 100%;
  margin: 0 0 20px 0;
}

th {
  text-align: left;
  border-bottom: 1px dashed #b5e853;
  padding: 5px 10px;
}

td {
  padding: 5px 10px;
}

hr {
  height: 0;
  border: 0;
  border-bottom: 1px dashed #b5e853;
  color: #b5e853;
}

/* Buttons
*/

.btn {
  display: inline-block;
  background: -webkit-linear-gradient(top, rgba(40, 40, 40, 0.3), rgba(35, 35, 35, 0.3) 50%, rgba(10, 10, 10, 0.3) 50%, rgba(0, 0, 0, 0.3));
  padding: 8px 18px;
  border-radius: 50px;
  border: 2px solid rgba(0, 0, 0, 0.7);
  border-bottom: 2px solid rgba(0, 0, 0, 0.7);
  border-top: 2px solid rgba(0, 0, 0, 1);
  color: rgba(255, 255, 255, 0.8);
  font-family: Helvetica, Arial, sans-serif;
  font-weight: bold;
  font-size: 13px;
  text-decoration: none;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.75);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.btn:hover {
  background: -webkit-linear-gradient(top, rgba(40, 40, 40, 0.6), rgba(35, 35, 35, 0.6) 50%, rgba(10, 10, 10, 0.8) 50%, rgba(0, 0, 0, 0.8));
}

.btn .icon {
  display: inline-block;
  width: 16px;
  height: 16px;
  margin: 1px 8px 0 0;
  float: left;
}

.btn-github .icon {
  opacity: 0.6;
  background: url("../images/blacktocat.png") 0 0 no-repeat;
}

/* Links
   a, a:hover, a:visited
*/

a {
  color: #63c0f5;
  text-shadow: 0 0 5px rgba(104, 182, 255, 0.5);
}

/* Clearfix */

.cf:before, .cf:after {
  content:"";
  display:table;
}

.cf:after {
  clear:both;
}

.cf {
  zoom:1;
}

#footer {
    border-top: 2px solid #15893d;
    text-align: center;
    width: 100%;
    height: 80px;
    background: #0c0c0c;
    line-height: 80px;
}

#footer_inner {
    display: table-cell;
}

#footer a {
    text-decoration: none;
    color: #eaeaea;
}

#footer a:hover {
    text-decoration: underline;
    color: #eaeaea;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:11:13.963

该`.container`元素应环绕正文中除页脚之外的所有其他元素。这意味着您还必须将标题放置在`.container`元素中，因为它的高度为 100% 意味着它将占据视口的高度。由于您的标题/导航已从`.container`元素中排除，因此视口高度将进一步向下扩展标题的高度。

并且请考虑将您的示例发布在小提琴而不是您的网站或任何其他使其过于本地化且与 SO 社区的其他部分不太相关的外部网站中。

# html - 如何在 Firefox 中将 FILTER/MASK 应用于图像

> ID：15169831
> 
> 赞同：1
> 
> 时间：2013-03-02T01:59:46.670
> 
> 标签：html, css, filter

我有以下在 IE 和 Google Chrome 中运行良好的代码，我想知道如何在 Firefox 中获得相同的过滤器/蒙版效果：

<img style="FILTER:Alpha(opacity=50,style=2);-webkit-mask-box-image:-webkit-radial-gradient(white,transparent 50%); WIDTH: 800px; HEIGHT: 200px" src ="http://i259.photobucket.com/albums/hh297/lilyyaxu/96264442052086857.gif?t=1334195033" />

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:07:56.017

Try it without the `-webkit-` prefix. Only Safari, Chrome and I think Opera use those.

# c++ - 找出当前正在运行的显示驱动程序

> ID：15169837
> 
> 赞同：2
> 
> 时间：2013-03-02T02:00:17.970
> 
> 标签：c++, windows, winapi, driver

**是否可以使用 C++ WinAPI 函数找出当前正在运行的显示驱动程序？**

如果是，你能建议我为此使用什么 WinAPI 函数吗？我知道我可以使用以下函数启用和禁用显示驱动程序：[DrvEnableDriver](http://msdn.microsoft.com/en-us/library/windows/hardware/ff556210%28v=vs.85%29.aspx)和[DrvDisableDriver](http://msdn.microsoft.com/en-us/library/windows/hardware/ff556196%28v=vs.85%29.aspx)。

我这样做的原因是因为我试图让我的第二台显示器从*复制*/镜像显示切换到*扩展*显示。在我[之前的问题](https://stackoverflow.com/questions/15154542/change-2nd-monitor-display-setting-to-duplicate)中，有人建议我需要禁用当前正在运行的扩展显示驱动程序，以使第二台显示器具有重复显示。我希望 WinAPI 函数可以在 Windows 2000 及更高版本上运行。

# java - 在 Eclipse 中找不到 JDBC

> ID：15169838
> 
> 赞同：0
> 
> 时间：2013-03-02T02:00:20.403
> 
> 标签：java, mysql, jdbc, driver, classnotfoundexception

```
public static boolean startDriver(){
try{
Class.forName("com.mydql.jdbc.Driver");
System.out.println("Loaded MySQL driver!");
}catch(ClassNotFoundException e){
System.out.println("Failed to start MySQL driver! JDBC not found!");
return false;
}
return true;
} 
```

我正在尝试在我的 Java 项目中使用 JDBC，但我不断收到 ClassNotFoundException。我已经引用了从 MySQL 网站下载的 mysql_connector.jar 并尝试了所有方法！它在我的 >Referenced Libraries 文件夹中，但我仍然不断收到错误消息！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T02:02:51.367

`Class.forName("com.my**d**ql.jdbc.Driver");` Ought to be `Class.forName("com.mysql.jdbc.Driver");`

# sql - 对不同的语句进行硬解析？

> ID：15169843
> 
> 赞同：0
> 
> 时间：2013-03-02T02:01:50.023
> 
> 标签：sql, oracle, parsing

假设我有这个查询：

```
SELECT X FROM Y 
```

如果我第一次运行它，那么它会进行硬解析。

之后，我运行这个查询：

```
select x from y 
```

只是字母大小写不同，这是否意味着他们必须重新进行硬解析？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:13:08.057

是的。检查 v$sql 或 v$sqlarea 视图。

# java - 在 JSP 中访问 action getter

> ID：15169846
> 
> 赞同：0
> 
> 时间：2013-03-02T02:01:52.247
> 
> 标签：java, jsp, web-applications, struts2, jsp-tags

我是 Struts 的新手`Action`，我想在 JSP 中访问类中的一些值。如何访问这些值？

```
public static String[] getSoldItemsColNames() {
    return SellerHistory.soldItemsColNames;
}

public ItemType[] getActiveItems() {
    return sellerHistory.getActiveItems();
} 
```

这就是我正在尝试的方式。

```
<s:iterator value="soldItemsColNames" status="soldItemsColNames" var="element"> 
<th><s:property value="%{#element}" /></th> 
</s:iterator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:29:10.190

这是我的程序 - 完美运行：

```
 Action class : 
 static Account[] account=new Account[1];
 static String[] arrayofStrings={"1","2","4"};
 {
    Account a=new Account();
    a.setName(arrayofStrings);
    account[0]=a;

 } 

 //..getters and setters , execute()

  public String[] getArrayofStrings() {
    return this.account[0].getName();//Just like yours
  } 
```

### JSP 逻辑

```
 <s:iterator value="arrayofStrings" status="true" var="element">
  <p><s:property value="%{#element}" /></p>
  </s:iterator> 
```

# javascript - 如何从字符串中删除某个索引后的所有字符

> ID：15169858
> 
> 赞同：11
> 
> 时间：2013-03-02T02:03:09.533
> 
> 标签：javascript, string

我试图在指定索引之后从字符串中删除所有字符。我确信必须有一个简单的函数来做到这一点，但我不确定它是什么。我基本上是在寻找 c# 的 string.Remove 的 javascript 等价物。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-02T02:04:25.380

```
var myStr = "asdasrasdasd$hdghdfgsdfgf";
myStr = myStr.split("$")[0]; 
```

或者

```
var myStr = "asdasrasdasd$hdghdfgsdfgf";
myStr = myStr.substring(0, myStr.indexOf("$") - 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T02:05:09.370

你正在寻找这个。

```
string.substring(from, to)

from : Required. The index where to start the extraction. First character is at index 0
to  : Optional. The index where to stop the extraction. If omitted, it extracts the rest of the string 
```

见这里：[http ://www.w3schools.com/jsref/jsref_substring.asp](http://www.w3schools.com/jsref/jsref_substring.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T02:08:08.733

使用子字符串

```
var x = 'get this test';
alert(x.substr(0,8)); //output: get this 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T02:10:33.560

我建议`slice`您使用索引，因为您可以使用负数。一般来说，这是更整洁的代码。例如：

```
var s = "messagehere";
var message = s.slice(0, -4); 
```

# vb.net - How to change the year of your birthday to current year in vb.net

> ID：15169859
> 
> 赞同：-1
> 
> 时间：2013-03-02T02:03:31.210
> 
> 标签：vb.net

How to change the year of your birthday to current year in vb.net?

example my birthday is 2/14/1990 --> 2/14/2013

but the day you change is not 2/14 like you change it to the date of 2/20 so its not equal to the present day.

How can i change my birthday year to current year?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:11:52.580

[`AddYears`](http://msdn.microsoft.com/en-us/library/system.datetime.addyears%28v=vs.100%29.aspx)使用Date 对象的 Method尝试这样的事情

```
Dim myBirthday As Date = Date.Parse("2/14/1990")
myBirthday = myBirthday.AddYears(23) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:05:34.347

我的分分钱

```
 'what about leap years
    Dim myBirthday As DateTime = #2/29/2000#

    'the following doesn't work 
    ' Dim myBirthdayThisYear As DateTime = New DateTime(DateTime.Now.Year, myBirthday.Month, myBirthday.Day)

    'this works
    Dim myBirthdayThisYear As DateTime = DateSerial(DateTime.Now.Year, myBirthday.Month, myBirthday.Day) 
```

# mysql - XAMPP - 错误：MySQL 意外关闭

> ID：15169861
> 
> 赞同：24
> 
> 时间：2013-03-02T02:03:42.870
> 
> 标签：mysql, xampp

由于某种原因，我重新安装了 XAMPP，但 MySQL 无法正常工作，在控制台中出现以下错误：

```
01:56:03  [mysql]   Error: MySQL shutdown unexpectedly.
01:56:03  [mysql]   This may be due to a blocked port, missing dependencies, 
01:56:03  [mysql]   improper privileges, a crash, or a shutdown by another method.
01:56:03  [mysql]   Check the "/xampp/mysql/data/mysql_error.log" file
01:56:03  [mysql]   and the Windows Event Viewer for more clues 
```

检查“/xampp/mysql/data/mysql_error.log”文件时，我得到：

```
130302  1:48:06  InnoDB: Waiting for the background threads to start
130302  1:48:07 InnoDB: 1.1.8 started; log sequence number 1600324627
130302  1:48:07 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
130302  1:48:07 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
130302  1:48:07 [Note] Server socket created on IP: '0.0.0.0'.
130302  1:51:12 [Note] Plugin 'FEDERATED' is disabled.
130302  1:51:12 InnoDB: The InnoDB memory heap is disabled
130302  1:51:12 InnoDB: Mutexes and rw_locks use Windows interlocked functions
130302  1:51:12 InnoDB: Compressed tables use zlib 1.2.3
130302  1:51:12 InnoDB: Initializing buffer pool, size = 16.0M
130302  1:51:12 InnoDB: Completed initialization of buffer pool
130302  1:51:12 InnoDB: highest supported file format is Barracuda.
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
130302  1:51:12  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
130302  1:51:13  InnoDB: Waiting for the background threads to start
130302  1:51:14 InnoDB: 1.1.8 started; log sequence number 1600324627
130302  1:51:14 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
130302  1:51:14 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
130302  1:51:14 [Note] Server socket created on IP: '0.0.0.0'.
130302  1:56:01 [Note] Plugin 'FEDERATED' is disabled.
130302  1:56:01 InnoDB: The InnoDB memory heap is disabled
130302  1:56:01 InnoDB: Mutexes and rw_locks use Windows interlocked functions
130302  1:56:01 InnoDB: Compressed tables use zlib 1.2.3
130302  1:56:01 InnoDB: Initializing buffer pool, size = 16.0M
130302  1:56:01 InnoDB: Completed initialization of buffer pool
130302  1:56:01 InnoDB: highest supported file format is Barracuda.
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
130302  1:56:01  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
130302  1:56:02  InnoDB: Waiting for the background threads to start
130302  1:56:03 InnoDB: 1.1.8 started; log sequence number 1600324627
130302  1:56:03 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
130302  1:56:03 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
130302  1:56:03 [Note] Server socket created on IP: '0.0.0.0'. 
```

那只是日志的一部分，完整的有点太大了。

帮助？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2017-05-16T11:45:28.033

> 确保在采取任何行动之前备份上述文件夹！

这对我有用，

1.  退出 XAMPP
2.  剪切**C:\xampp\mysql\backup中的所有文件**
3.  将文件粘贴并替换到**C:\xampp\mysql\data**
4.  以管理员身份运行 XAMPP

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-01-26T15:13:55.873

就我而言，我做了两件事：

1.  将`xampp/mysql/backup`文件移入`xampp/mysql/data`
2.  以管理员身份运行 XAMPP

它对我有用:)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-03-22T12:31:05.373

首先，您需要在硬盘的某处保留以下副本。

> C:\xampp\mysql\备份
> 
> C:\xampp\mysql\数据

之后

> 复制“C:\xampp\mysql\backup”中的所有内容并将其粘贴并替换到
> “C:\xampp\mysql\data”中

现在您的 mysql 将在 phpmyadmin 中工作，但您的表将显示“引擎中未找到表”

> 为此，您必须转到已在硬盘中创建的“备份和数据文件夹”的副本，并在数据文件夹中复制“ibdata1”文件并过去并替换为“C:\xampp\mysql\data ”。

现在您的表格数据将可用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-03T04:53:09.857

如果您的 Skype 已打开，请退出 Skype 并尝试，

**或者**

转到已安装的 xampp/wamp，搜索 httpd.conf。使用 textpad/notepad 打开该文件，搜索 Listen 或 80 ，将侦听端口更新为 8081 并保存文件。重新启动 xampp/wamp，启动服务器。

**或**
在 Skype 中按照以下步骤操作 ![在此处输入图像描述](../Images/7c3e60a14e319cd6eea245d7beabf0dc.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-15T18:39:22.163

1.  将文件夹 mysql/data 重命名为 mysql/data_old （可以使用任何名称）
2.  创建一个新文件夹 mysql/data 将驻留在 mysql/backup 中的内容复制到新的 mysql/data 文件夹
3.  将 mysql/data_old 中的所有数据库文件夹复制到 mysql/data（从 data_old 中跳过 mysql、performance_schema 和 phpmyadmin 文件夹）
4.  最后从 mysql/data_old 复制 ibdata1 文件并将其替换到 mysql/data 文件夹中
5.  从 XAMPP 控制面板启动 MySQL

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-12T05:25:52.303

**警告！不要删除 ibdata1 文件！**

*只需按照这些步骤操作即可。*

1.  将文件夹重命名`C:\xampp\mysql\data`为`C:\xampp\mysql\data_old`（您可以使用任何名称）
2.  新建一个文件夹`C:\xampp\mysql\data`
3.  将驻留的内容复制`C:\xampp\mysql\backup`到新`C:\xampp\mysql\data`文件夹
4.  将所有数据库文件夹复制`C:\xampp\mysql\data_old`到`C:\xampp\mysql\data`（跳过 mysql、performance_schema 和 phpmyadmin 文件夹`C:\xampp\mysql\data_old`）
5.  最后复制 ibdata1 文件`C:\xampp\mysql\data_old`并将其替换到`C:\xampp\mysql\data`文件夹中
6.  现在从 XAMPP 控制面板启动 MySQL

一切都完成了，享受...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-13T14:18:38.517

如果 Apache 运行没有任何问题，并且您发现系统安全设置有一些障碍，只需允许它而不是阻止或关闭对话框。并将 MySQL 的端口号更改为 3607 之前的 3606 。它对我有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-24T12:56:32.067

您的计算机中可能以前安装了 MySQL 服务器尝试卸载它并在 XAMPP 上启动 MySQL 这解决了我的问题

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-28T20:21:28.967

你必须：

*   关闭 xampp
*   转到您安装它的文件夹，如果在 (c:) 中可能类似于 C:\xampp\ ，请访问文件夹**C:\xampp\mysql\data**
*   删除文件**ibdata1**
*   再次启动 XAMPP。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-17T09:52:06.983

真正的方法是**RECONFIGURE** your app.with setup of **MYSQL** 。你可以再次打开你的设置并将**端口从 3306 更改为 3307**。

![在此处输入图像描述](../Images/fecbb7215b5a64e38c979851be1f3e5d.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-08-21T11:43:17.837

为了解决这个问题，

转到您的 XAMPP 文件夹，

> XAMPP -> mysql -> bin -> "my.ini"

打开`my.ini`配置文件后，在几个地方替换为，因为`3306`是一个空闲端口。`3308``3308`

> XAMPP -> php -> “php.ini”

与在“my.ini”文件中所做的相同，将端口更改`3306`为`3308`.

然后，重新启动 XAMPP 服务器。

它工作正常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-02T02:06:02.367

我只是尝试重新安装 XAMPP。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-12-06T12:16:16.487

我发现的一个原因（除了本网站上关于类似问题的其他答案之外没有提到）是转到 Windows 中的任务管理器并停止已经运行的 mysqld 并阻止 mysql 服务器启动。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-12T08:08:26.843

这个问题的最佳解决方案是打开文件夹**C:\xampp\mysql\bin中的 mysql 配置指令文件****my.ini**并更改与端口相关的信息，通常某些程序会占用端口号。3306 由于它停止工作，现在您按照两个步骤使其工作。

 **```
enter code here

    Step-1\. Search for ['client'],  you can see some thing like this

            [client] 
            # password       = your_password 
            port            = 3306
            socket          = "C:/xampp/mysql/mysql.sock"
 Now in the port section remove 3306 and add port = 3306 > 3307 as shown   below.

            [client] 
            # password       = your_password 
            port            = 3306 > 3307
            socket          = "C:/xampp/mysql/mysql.sock"

    Step -2\. Similarly Search for  ['mysqld'], you can see something like this 

            [mysqld]
            port= 3306
            socket = "C:/xampp/mysql/mysql.sock"
            basedir = "C:/xampp/mysql" 
            tmpdir = "C:/xampp/tmp" 
            datadir = "C:/xampp/mysql/data"
            pid_file = "mysql.pid"
            # enable-named-pipe
            key_buffer = 16M
            max_allowed_packet = 1M
            sort_buffer_size = 512K
            net_buffer_length = 8K
            read_buffer_size = 256K
            read_rnd_buffer_size = 512K
            myisam_sort_buffer_size = 8M
            log_error = "mysql_error.log"

            Now here change the port number 3306 to 3307 and add a line "innodb_force_recovery = 1" exactly as shown below.

            [mysqld]
            port= 3307
            socket = "C:/xampp/mysql/mysql.sock"
            basedir = "C:/xampp/mysql" 
            tmpdir = "C:/xampp/tmp" 
            datadir = "C:/xampp/mysql/data"
            pid_file = "mysql.pid"
            # enable-named-pipe
            key_buffer = 16M
            max_allowed_packet = 1M
            sort_buffer_size = 512K
            net_buffer_length = 8K
            read_buffer_size = 256K
            read_rnd_buffer_size = 512K
            myisam_sort_buffer_size = 8M
            log_error = "mysql_error.log"
            innodb_force_recovery = 1 
```

就是这样，重新启动你的mysql服务，它肯定会工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-23T19:34:26.220

对于搜索并按下此链接的任何人，我通过简单地搜索 mysql 通知程序并停止 mysql 在那里运行来解决它，然后再次在 xampp 中运行 mysql 并运行。为什么这行得通？我不是专家，但我认为这很容易：端口已被 mysql 通知程序占用，因此不得不将其停在那里并在此处运行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-11-17T23:06:14.693

我是 XAMPP 的新手，但我发现这些建议的组合效果最好（至少在带有最新版本 XAMPP 的 Windows 8.1 上。请注意，我测试过的计算机也有Skype）。

首先登录到 Skype 并导航到“工具 < 选项 < 高级 < 连接”。然后选中“使用端口 80 和 443 进行其他传入连接”框。保存、关闭并退出 Skype。

接下来，在 XAMPP 控制面板上，单击“config < my.ini”并将第 19 行和第 27 行（端口应为 3306）从“3306”更改为“3307”。

此外，您需要导航到 xampp < phpMyAdmin < config.inc 并更改第 27 行，这应该是这样的：

$cfg['Servers'][$i]['host'] = '127.0.0.1';

您需要添加“3307”，如下所示：

$cfg['Servers'][$i]['host'] = '127.0.0.1:3307';

现在，打开您的浏览器，当您输入“localhost”时，您应该会看到 xampp 页面。此外，如果这是您第一次使用 xampp，您可能会在 localhost/phpmyadmin/ 页面上看到有关您缺少密码的警告（以粉红色突出显示）。这很容易通过转到 phpmyadmin 中的“用户帐户”选项卡，单击“编辑权限”并输入密码来解决。请记住保存您创建的任何和所有密码的散列版本，因为我们将在接下来使用它！-我打开记事本并保存（并编号）它们。请注意，当您更改当前会话的密码时，phpMyadmin 会通知您（这将显示在您的 phpMyadmin 页面顶部，非常重要，因为您需要密码的特定散列版本）。

接下来，您需要导航到计算机上的以下位置“xampp < phpMyAdmin < config.inc”，然后使用文本编辑器打开并编辑该文件。您需要在密码的单引号之间输入密码的散列版本，并将“AllowNoPassword”从 true 更改为 false。

而且，应该这样做。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-12-20T06:49:59.090

就我而言：我刚刚更换了

```
....xampp/mysql/backup files 
```

进入

```
**xampp/mysql/data** 
```

它对我有用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-02-14T02:50:09.847

如果您独立安装了 mysql，您可以停止 mysql 服务，如果运行这些答案中没有一个对我有用，这对我有用

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-11-06T15:40:07.100

嗯，第一件事，我知道它迟到了，所以我不知道是否有人会支持它，但是好吧，它还可以，其次，卸载 xampp 可能对你没有任何好处，因为使用端口 3306（Mysql 的默认端口）的进程仍然是在系统的某个地方运行。可能是Skype，但可能不是Skype。

所以最好的方法是找出哪个进程正在使用端口 3306，然后终止该进程。

所以要找出哪个进程正在使用端口 3306，打开命令提示符，然后键入

```
netstat -n -o -a 
```

你会得到一个这样的屏幕 [。](https://i.stack.imgur.com/IcHKC.png)

然后查找端口号为 3306 的地址，并找出对应的 PID。

然后只需以管理员身份打开命令提示符并键入

```
taskkill /F /PID 1234 
```

将 1234 替换为您各自的 PID。然后你可以尝试启动mysql，它会工作。

* * *

而现在如果你懒得在重启电脑的时候重来一遍这一步，，，

您可以简单地使用以下批处理脚本自动终止该过程并享受:)

```
@echo off
setlocal enableextensions
set "port=3306"
for /f "tokens=1,4,5" %%a in (
    'netstat -aon ^| findstr /r /c:"[TU][CD]P[^[]*\[::\]:%port%"'
) do if "%%a"=="UDP" (taskkill /F /PID %%b) else (taskkill /f /PID %%c)
endlocal
pause 
```

将它保存为anything.bat 并在每次你想使用mysql 时运行它。:)

* * *

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-05-21T12:21:45.193

** -> "xampp->mysql->data" 从数据文件夹中剪切所有文件并粘贴到另一个文件夹

-> 现在重新启动 mysql

-> 将文件夹中的所有文件夹粘贴到 myslq->data 文件夹

并将 ib_logfile0.ib_logfile1 ， ibdata1 从您的文件夹粘贴到数据文件夹中。

您的数据库和数据现在在 phpmyadmin 中可用..**

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-07-26T16:16:20.700

**我做了所有方法，但没有找到完美的解决方案！**

*   安装 Laragon 而不是 Xampp ，你会为我祈祷。

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2015-10-14T13:13:25.773

只需以管理员身份运行 xammp 即可**

# php - PHP, remove all lines from a big string containing a specific word

> ID：15169862
> 
> 赞同：3
> 
> 时间：2013-03-02T02:03:59.067
> 
> 标签：php, pattern-matching

```
$file = file_get_contents("http://www.bigsite.com"); 
```

How could i go about removing all lines from string `$file` that contains the word "hello" ?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T02:10:40.367

```
$file = file_get_contents("http://www.bigsite.com");
$lines = explode("\n", $file);
$exclude = array();
foreach ($lines as $line) {
    if (strpos($line, 'hello') !== FALSE) {
         continue;
    }
    $exclude[] = $line;
}
echo implode("\n", $exclude); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T02:09:05.893

```
$file = file_get_contents("http://www.example.com");

// remove sigle word hello
echo preg_replace('/(hello)/im', '', $file);

// remove multiple words hello, foo, bar, foobar
echo preg_replace('/(hello|foo|bar|foobar)/im', '', $file); 
```

**编辑删除线**

```
// read each file lines in array
$lines = file('http://example.com/');

// match single word hello
$pattern = '/(hello)/im';

// match multiple words hello, foo, bar, foobar
$pattern = '/(hello|foo|bar|foobar)/im';

$rows = array();

foreach ($lines as $key => $value) {
    if (!preg_match($pattern, $value)) {
        // lines not containing hello
        $rows[] = $line;
    }
}

// now create the paragraph again
echo implode("\n", $rows); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T02:18:52.523

干得好：

```
$file = file('http://www.bigsite.com');

foreach( $file as $key=>$line ) {
  if( false !== strpos($line, 'hello') ) {
    unset $file[$key];
  }
}

$file = implode("\n", $file); 
```

# javascript - javascript中的for循环有问题

> ID：15169865
> 
> 赞同：0
> 
> 时间：2013-03-02T02:04:21.840
> 
> 标签：javascript

我有一个带有数字的表，但它们存储为字符串，所以我尝试使用函数 parseFloat 将其转换为整数表。但是，无论我如何执行 for 循环，它都会给我一个空白表。我可以解析该行，它会给我一个 int。我也可以解析单个 int，但似乎无法解析行或表格。这是我到目前为止所拥有的。这只是试图转换一行。我为整个表尝试了两个 for 循环，但也没有用。谢谢。

```
 var c =[];
    var entries = $.parseJSON('<?php print(json_encode($try, true)); ?>');  
       for (var j = 0; j < 12; j++)
       {
         for (var i = 0; i < 7; i++)
         { 
         c [j][i] = parseFloat(entries[j][i]);
         }
       }
alert(c); 
```

这里是条目 json 编码 [["-248","-163","-455","-1413","-1294","-1296","-1089"],["-172"," -219","-1186","-1368","-1480","-1079","-845"],["-98","-198","-703","-996" ,"-1100","-585","-616"],["-116","-241","-498","-642","-704","-354","- 430"],["-137","-117","-264","-525","-533","-269","-476"],["-12","87" ,"-257","-463","-551","-302","-535"],["170","61","-250","-472","-659" “-220”,"-605"],["159","96","-234","-513","-617","-196","-710"],["185","117" ,"-272","-521","-610","-258","-798"],["208","95","-234","-534","-696" ,"-280","-854"],["192","151","-188","-641","-739","-279","-957"],["249 ","223","-235","-684","-763","-339","-978"]]-798"],["208","95","-234","-534","-696","-280","-854"],["192","151"," -188","-641","-739","-279","-957"],["249","223","-235","-684","-763"," -339","-978"]]-798"],["208","95","-234","-534","-696","-280","-854"],["192","151"," -188","-641","-739","-279","-957"],["249","223","-235","-684","-763"," -339","-978"]]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:26:04.530

您必须将数组的第二维初始化为数组。就目前而言，`c[j]`它只是一个值，因此您无法`c[j][i]`对其进行操作。在您的第一个循环中也有一个错误，`for`您需要比较 的值`j`，而不是`i`。请参阅此固定代码：

```
var c = [];
var entries = $.parseJSON('<?php print(json_encode($try, true)); ?>');  
   for (var j = 0; j < 12; j++)
   {
     c[j] = [];
     for (var i = 0; i < 7; i++)
     { 
         c [j][i] = parseFloat(entries[j][i]);
     }
   }
alert(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:26:44.653

在您的第一个循环`for (var j = 0; i < 12; j++)`中，您正在使用`i`for 迭代，但它是未定义的，它应该`j`代替`i`

```
var c =[];
var entries = $.parseJSON('<?php print(json_encode($try, true)); ?>');  
for (var j = 0; j < entries.length ; j++)
{
    c[j] = [];
    for (var i = 0; i < entries[i].length ; i++)
    {          
       c [j][i] = parseFloat(entries[j][i]);
    }
} 
```

# ruby-on-rails - 创建动态局部变量并将其传递给局部变量

> ID：15169873
> 
> 赞同：0
> 
> 时间：2013-03-02T02:05:28.823
> 
> 标签：ruby-on-rails

我有一个部分呈现三次（对于相同的三个字段）的表单。但是，理想情况下，每个字段的占位符值应该不同。因此，我试图传入一个局部变量，该变量将随着局部的每次渲染而改变。

在控制器中，我创建了一个这样的数组

```
@placeholder = %w[ firstplaceholder, secondplaceholder, thirdplaceholder] 
```

然后我尝试在渲染部分时遍历数组

```
 <%= f.fields_for :answers do |builder| %>

     <% @placeholder.each do |k, arrayindex| %>

        arrayindex = @placeholder.index(k)

      <%= render :partial => 'answer_fields', :locals => { :f => builder, :myplaceholder => @placeholder[arrayindex] } %>

   <% end %>

   <% end %> 
```

将 arrayindex 传递给 @placeholder 会生成此错误

```
 no implicit conversion from nil to integer 
```

所以我猜arrayindex变量是'nil'。为什么？

在部分内部，在有错误消息并且重新填充表单字段的情况下，不会有占位符（@placeholder 实例变量只有在没有错误的情况下才会在控制器中创建），所以我首先检查 @placeholder 实例变量存在，并尝试将占位符设置为循环中创建的索引，但是，由于传递数组索引的错误，它不起作用。可能还有其他问题:)

```
 <% if @placeholder ? myplaceholder = @placeholder[arrayindex] : myplaceholder = "answer choice" %>

    <%= f.text_field :content, :class => 'span3', :rows => 1, :placeholder => myplaceholder %>
    <%= f.label :correctanswer, "Correct?" %>
    <%= f.check_box :correctanswer, :class => 'span1' %>
   <% end %> 
```

更新

在控制器中，我正在为问题模型构建三个答案字段。因此，部分会自动渲染三次。如果我遍历包裹在部分周围的@placeholder 数组，它会将部分渲染多次 3 * 3。

```
3.times {@question.answers.build} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:20:10.457

首先，请注意这里不需要逗号分隔符：

```
@placeholder = %w[ firstplaceholder secondplaceholder thirdplaceholder] 
```

而且您不需要在数组中使用索引（如果我了解您要做什么）。所以它应该很简单：

```
<%= f.fields_for :answers do |builder| %>
  <% @placeholder.each do |k| %>
    <%= render :partial => 'answer_fields', :locals => { :f => builder, :myplaceholder => k } %>
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:34:12.777

在控制器中，连同占位符值的数组，我做了

```
@i = 0 
```

由于我创建了 4 个答案，forms_for partial 被渲染了 4 次。

```
4.times {  @question.answers.build} 
```

因此，在每次渲染局部后，我增加了@i 实例变量并将增加的值传递到@placeholder 数组`@placeholder[@i]`中，并且在局部内部使用了数组的适当元素

```
 <%= f.fields_for :kanswers do |builder| %>
  <%= render :partial => 'kanswer_fields', :locals => { :f => builder, :k => @placeholder[@i]} %>
  <% @i += 1 %> 

  <% end %> 
```

# regex - 正则表达式混合大小写，不包括特定情况

> ID：15169878
> 
> 赞同：3
> 
> 时间：2013-03-02T02:06:05.717
> 
> 标签：regex, regex-negation, regex-lookarounds

我需要一个能够匹配的正则表达式：

*   a）某个单词的小写/大写的**所有组合**
*   b）**除了**几个特定的​​案例组合。

我必须搜索`bash`数千个源代码文件，出现**拼写错误的**变量。

具体来说，我正在搜索的单词是`FrontEnd`在我们的编码风格指南中可以根据上下文以两种方式准确编写：

```
FrontEnd (F and E upper)
frontend (all lower) 
```

所以我需要“捕捉”任何不符合我们编码标准的事件：

```
frontEnd
FRONTEND
fRonTenD 
```

我已经阅读了许多关于这个特定示例的正则表达式教程，但我找不到一种方法来说“匹配这个模式，但如果它恰好是这个或另一个，则不匹配”。

我想这类似于尝试匹配“000000 到 999999 之间的任何数字，除了数字 555555 或数字 123456”，我想逻辑是相似的（当然我也不打算这样做:)）

谢谢

* * *

附加评论：

我不能使用`grep`piped to，`grep -v`因为我可能会错过线路；例如，如果我这样做：

```
grep -i frontend | grep -v FrontEnd | grep -v frontend 
```

会错过这样的一行：

```
if( frontEnd.name == 'hello' || FrontEnd.value == 3 ) 
```

因为第二次出现会隐藏整行。因此，我正在寻找一个正则表达式来使用`egrep`能够进行我需要的完全匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:38:23.513

您将无法轻松做到这一点，`egrep`因为它不支持前瞻。使用 perl 可能最容易做到这一点。

```
perl -ne 'print if /(?!frontend|FrontEnd)(?i)frontend/;' 
```

只使用管道文本`stdin`

这是如何工作的：

```
perl -ne 'print if /(?!frontend|FrontEnd)(?i)frontend/;'
^     ^^  ^     ^  ^ ^ ^                 ^   ^ The pattern that matches both the correct and incorrect versions.
|     ||  |     |  | | |                 | This switch turns on case insensitive matching for the rest of the regular expression (use (?-i) to turn it off) (perl specific)
|     ||  |     |  | | | The pattern that match the correct versions.
|     ||  |     |  | | Negative forward look ahead, ensures that the good stuff won't be matched
|     ||  |     |  | Begin regular expression match, returns true if match
|     ||  |     | Begin if statement, this expression uses perl's reverse if semantics (expression1 if expression2;)
|     ||  | Print content of $_, which is piped in by -n flag
|     || Evaluate perl code from command line
|     | Wrap code in while (<>) { } takes each line from stdin and puts it in $_
| Perl command, love it or hate it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:23:06.893

这真的应该是一个评论，但你有什么理由不能使用`sed`吗？我在想类似的东西

```
sed 's/frontend/FrontEnd/ig' input.txt 
```

也就是说，当然，假设您要更正不正常的版本......

# php - 通过 php 脚本从 url 收到的响应小于我在浏览器中打开它时的响应

> ID：15169880
> 
> 赞同：2
> 
> 时间：2013-03-02T02:06:32.710
> 
> 标签：php, file-get-contents

我正在尝试通过脚本获取此网址：http: [//api.alarabiya.net/sections/2/](http://api.alarabiya.net/sections/2/)

但是收到的 JSON 响应比我直接在浏览器中打开时要小得多，

请注意，我通过 CURL 尝试了此 url，并设置了相同的浏览器 USER-AGENT 和浏览器中使用的所有请求标头，但我仍然得到较小的响应。

这是一个仅使用 file_get_contents 的示例

```
<?php 
    echo file_get_contents("http://api.alarabiya.net/sections/2/");
?> 
```

我的问题是，使用 file_get_contents 时是否存在请求大小限制，或者 PHP 的内存是否无法处理，或者究竟是什么问题？

当我在 shell 中卷曲它时，它给了我与 php 中相同的 o/p（修剪后的输出）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T02:31:56.977

我终于找到了解决方案：

```
$url = "http://api.alarabiya.net/sections/2/";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true );
// This is what solved the issue (Accepting gzip encoding)
curl_setopt($ch, CURLOPT_ENCODING, "gzip,deflate");     
$response = curl_exec($ch);
curl_close($ch);
echo $response; 
```

# java - Make while loop re-ask for input from user

> ID：15169883
> 
> 赞同：1
> 
> 时间：2013-03-02T02:06:57.263
> 
> 标签：java, loops, while-loop

So in this section of my program I'm trying to make the program re-ask for input from the user.

The problem is that is says the int have already been declared. But how do I get the input for the question again?

```
Scanner keyboard = new Scanner(System.in);

System.out.println("Please enter possible and actual points for participation: ");
int pparticipation = keyboard.nextInt();
int aparticipation = keyboard.nextInt();

while (aparticipation > pparticipation || pparticipation < 0){
   System.out.println("Please enter possible and actual points for participation: ");
   int pparticipation = keyboard.nextInt();
   int aparticipation = keyboard.nextInt();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:10:20.017

您两次声明了变量。从循环中的变量中删除“int”应该让它工作。

`int aparticipation;` 那就是声明一个变量。之后为变量赋值，你只需 `aparticipation = keyboard.nextInt();`

您已经声明了它，因此您不必再次告诉编译器它是一个 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:11:30.137

发生错误是因为您试图在循环中再次声明 pparticipation 和 participation。从这两个变量前面删除类型 (int)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T02:18:39.283

您所要做的就是更改以下内容：-

```
while (aparticipation > pparticipation || pparticipation < 0){
   System.out.println("Please enter possible and actual points for participation: ");
   int pparticipation = keyboard.nextInt();
   int aparticipation = keyboard.nextInt();
} 
```

至

```
while (aparticipation > pparticipation || pparticipation < 0){
   System.out.println("Please enter possible and actual points for participation: ");
   pparticipation = keyboard.nextInt();
   aparticipation = keyboard.nextInt();
} 
```

变量已经被声明了，所以不要再这样做了。

# java - 在 TestNG 中测试多线程代码

> ID：15169889
> 
> 赞同：2
> 
> 时间：2013-03-02T02:08:06.840
> 
> 标签：java, multithreading, testng

我有这个问题：

```
@Test
public void foo() throws Exception {
    ScheduledThreadPoolExecutor stpe = new ScheduledThreadPoolExecutor(1);
    stpe.submit(new Runnable() {
        @Override
        public void run() {
             // does not make this unit test fail :(
             Assert.AssertEquals(1, 2);
       }
    });
} 
```

如何让这些异常无法通过我的测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T02:16:49.670

该`submit()`方法返回一个`Future<?>`. 如果您尝试获取 Future 的结果，该方法将抛出已被抛出的 Throwable `Runnable`：

```
Future<?> future = stpe.submit( .... 

future.get(); // this call will throw the exception that has been thrown in the Runnable. 
```

这样，run 方法中的异常/错误将使测试失败。

# c - Debugging in QtCreator 5 using Mingw+Gdb on Windows?

> ID：15169892
> 
> 赞同：1
> 
> 时间：2013-03-02T02:08:17.640
> 
> 标签：c, qt

I have been looking for a solution for hours. I have QTC 5, Mingw and Gdb under Windows7\. I can compile and run my project however I have not been able to figure out how to debug and create a debug configuration in QT 5 under Windows. Bear in mind that everything works as it should in this IDE. I am happy with it just that I have not been able to figure out debugging with this particular configuration.

Most tutorials were concerned with CDB or Qt project or in other platforms, or were talking about some tabs or menus that are not available in v5 as far as I can tell.

What is the right way of setting up a debug configuration and running my .exe in a debug environment using QT 5 and Gdb? My project is mostly C and some C++ with no Qt component. I am just using it as an IDE for C/C++.

thanks

# ruby-on-rails - rake db:test:prepare 实际上做了什么？

> ID：15169894
> 
> 赞同：128
> 
> 时间：2013-03-02T02:08:23.610
> 
> 标签：ruby-on-rails, ruby

我正在关注 rails 教程视频，但我无法弄清楚该`db:test:prepare`命令的实际作用。有人可以提供解释吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-02T02:26:25.570

> 上面的 rake db:migrate 在开发环境上运行任何待处理的迁移并更新 db/schema.rb。rake db:test:load 从当前的 db/schema.rb 重新创建测试数据库。在随后的尝试中，最好先运行 db:test:prepare，因为它首先检查挂起的迁移并适当地警告您。

-- [http://guides.rubyonrails.org/testing.html](http://guides.rubyonrails.org/testing.html)

基本上它处理克隆数据库，因此您不必针对测试运行迁移来更新测试数据库。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-02T02:29:41.583

具体而言，`rake db:test:prepare`将执行以下操作：

*   检查挂起的迁移，并且，
*   加载测试模式

也就是说，它将查看您的`db/schema.rb`文件以确定您的项目中是否存在任何尚未运行的迁移。假设没有未完成的迁移，它将清空数据库并根据`db/schema.rb`文件的内容重新加载它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T15:13:15.813

[rake db:test:prepare 是解决此类](https://stackoverflow.com/questions/21576686/pgundefinedtable-error-relation-does-not-exist-with-a-correct-rails-naming/28857695#28857695)PG 问题的好方法。

“PG::UndefinedTable: ERROR: 关系不存在”，带有正确的 Rails 命名和约定”，我不能只执行`rake db:migrate RAILS_ENV=production`

例如，当您无法为[此处](https://stackoverflow.com/questions/19097558/pg-undefinedtable-error-relation-users-does-not-exist)讨论的错误创建测试数据库时：“PG 未定义的错误关系用户不存在”

全部围绕这个错误“PG::UndefinedTable: ERROR: relationship xxxxx does not exist”</p>

# jquery - jQuery & ContentEditable 属性

> ID：15169895
> 
> 赞同：2
> 
> 时间：2013-03-02T02:08:40.720
> 
> 标签：jquery, contenteditable

我有一个正在处理的测试用例，如果内容可编辑单元格发生更改，我试图动态更新总计，总 .sum 单元格将从行单元格总计更新总计。

```
<table cellspacing="2">
 <tr>
  <td contenteditable="true">1</td>
  <td>2</td>
  <td>3</td>
 </tr>
</table> 
```

下面是我的 jQuery

```
(function() {

 $( 'tr' ).each(function() {
  var sum = 0;

   $( 'td', this ).each(function() {
    var cellNum = $(this).text();
    sum += parseInt(cellNum, 10);
   });

   var total = '<td class="sum">' + sum + '</td>';

   $( this ).append(total);

 });

})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:35:17.257

您可以收听`blur`或`keyup`或`input`事件。如果你使用`append`方法，那么你会得到意想不到的结果，即最后一次计算的结果将被添加到当前结果中，我假设你`td`在每一行中添加另一个。

```
$('table').on('blur', 'td[contenteditable]', cal);

function cal() {
    $('tr').each(function () {
        var sum = 0;
        $('td:not(.total)', this).each(function () {
            var cellNum = $(this).text();
            sum += parseInt(cellNum, 10);
        });
        $('td.total', this).text(sum);
    });
} 
```

[http://jsfiddle.net/td5Hm/](http://jsfiddle.net/td5Hm/)

请注意，如果您添加一个非数字值，总值将是一个 NaN（非数字）值。您可以使用`isNaN()`函数并改进您的代码。

# sql - 一个表中一个字段的 SUM，第二个表中的一个字段 GROUP BY

> ID：15169898
> 
> 赞同：0
> 
> 时间：2013-03-02T02:09:29.410
> 
> 标签：sql, vb6, ado

我发现了如何在一张桌子内使用`SUM`和。`GROUP BY`我尝试做的是`Marks.m_GPA`根据第二个表 ( ) 中的字段对一个表中的一个字段 ( )求和`Curriculum.[c_Subject Group]`。

我有一张表，其中包含名为的学生的所有结果，`Marks`另一张表名为`Curriculum`. 两个表都有共同的主题代码（`c_Code`和`m_Code`），`Curriculum`表有一个字段`[c_Subject Group]`。我想要每个结果的所有`m_GPA`值的总和。`[c_Subject Group]``GROUP BY [c_Subject Group]`

所有字段都是字符串（文本）。

这是一个 ADO SQL VB6 应用程序，我使用 Access 的 MS Jet 引擎。我通常尝试使用 Access 运行查询以预先测试查询，ACCESS 似乎接受我的语法，但结果是一个空表。

这是查询：

```
SELECT 
   Curriculum.[c_Subject Group], 
   Sum([m_GPA]) AS Total_GPA 
FROM Curriculum 
   INNER JOIN Marks ON 
      Curriculum.c_Code = Marks.m_Code 
WHERE Curriculum.[c_Subject Group]= "1"
GROUP BY Curriculum.[c_Subject Group]; 
```

即使我尝试`Sum(cdbl(Marks.[m_GPA]))`，结果也是一个空表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:30:05.890

试试这个。

```
SELECT 
     Curriculum.[c_Subject Group],
     Marks.Total_GPA
 FROM Curriculum
 LEFT JOIN (
     SELECT 
     m_Code,
     Sum([m_GPA]) AS Total_GPA
     FROM Marks
     GROUP BY m_Code
)Marks
 ON Curriculum.c_Code = Marks.m_Code 
 WHERE Curriculum.[c_Subject Group]= '1' 
```

# php - 回显时PHP不剥离斜杠

> ID：15169900
> 
> 赞同：1
> 
> 时间：2013-03-02T02:09:51.477
> 
> 标签：php

我希望有人可以为我解决这个问题。我一直在阅读一本关于表单验证最佳实践的书，如果用户输入错误的值，则将表单连同他们输入的数据连同警告/错误消息一起返回给他们。

我想要做的是说用户在文本框中输入以下内容：

```
hello " there 
```

我想在文本框中返回上述内容。现在，当我使用下面的代码时，它会添加一个斜杠。

```
<input name="name" id="name" type="text" class="formbox"
    <?
        php if ($missing || $errors) {
            echo 'value="' . htmlentities($name) . '"';
        } 
    ?>
> 
```

我考虑做的是这样的：

```
<input name="name" id="name" type="text" class="formbox"
    <?
        php if ($missing || $errors) {
            $name = stripslashes($name);
            echo 'value="' . htmlentities($name) . '"';
        } 
    ?>
> 
```

虽然上述工作似乎效率低下。如果我只使用“stripslashes”，那么“删除”之后的任何内容。目前，表单只是在检查其自身，即当用户单击提交时，表单会重新加载，并且 IF 语句会捕获任何帖子，然后检查是否有任何缺失的字段。

我希望这一切都有意义，因为我无法在 SO 和 Google 上找到最佳解决方案。

非常感谢您提前提供的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:15:33.383

您可以将它们结合起来以提高效率：

```
echo 'value="' . htmlentities(stripslashes($name)); . '"'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:17:06.993

您可以使用函数 $mysqli->real_escape_string($value)。它是 mysqli 类的一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T02:19:23.123

我没想到的是：

```
<?php 
    if ($missing || $errors) {
        echo 'value="' . stripslashes(htmlentities($name)) . '"';
    } 
?>> 
```

这似乎是目前最好的方法。

# sql-server-2008 - 无法在 SQL Server 2008 R2 中使用 OPENROWSET 导入 Excel

> ID：15169901
> 
> 赞同：3
> 
> 时间：2013-03-02T02:09:52.803
> 
> 标签：sql-server-2008

我必须将 Excel 模板复制到另一个文件夹才能导入数据。以下是我正在使用的两个 SQL 语句：

声明1：

```
exec xp_cmdshell 'copy C:\inetpub\wwwroot\app_data\export_templates\myExport.xlsx C:\inetpub\wwwroot\app_data\tmp\myExport130301172218.xls' 
```

声明2：

```
insert into 
OPENROWSET('Microsoft.ACE.OLEDB.12.0'
    , 'Excel 12.0;Database=C:\inetpub\wwwroot\app_data\tmp\myExport130301172218.xls;'
    , 'SELECT * FROM [Sheet1$]')  
SELECT * FROM vw_shrub 
```

如果我分别执行上述 SQL 语句，它们就可以正常工作。但是，如果我一起执行它们，则会引发以下错误：

> 链接服务器“（null）”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”返回消息“Microsoft Access 数据库引擎找不到对象 'Sheet1$'。请确保该对象存在并且您拼写了它的名称和路径名正确。如果“Sheet1$”不是本地对象，请检查您的网络连接或联系服务器管理员。”。
> 
> 消息 7350，级别 16，状态 2，行 2
> 无法从链接服务器“（null）”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”获取列信息。

问题是我想将它们都从我的应用程序作为单个请求传递。因此，我必须一起执行它们。我发现如果我在它们之间添加 GO，我可以在 Management Studio 中一起执行它们。但是当我从我的应用程序传递请求时，我不能使用 GO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:11:49.853

另一种方法是在 SQL Server 代理作业中将这两行分为两个不同的步骤，并使用一条指令执行它：

```
sp_start_job nameOfYourJob 
```

工作的两个步骤就像中间有一个 GO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:24:31.310

您是否尝试在 exec 语句之后添加 GO？

您连接到 SQL Server 的帐户是否具有对 SQL Temp 目录的读/写访问权限？我的理解是 SQL 会将 xls 文件复制到它的临时目录，如果您的用户没有管理员权限或 Windows 对临时目录的读/写权限，则连接将失败。

# delphi - 为什么加载 PNG 图像格式图标会导致“系统资源不足”异常？

> ID：15169907
> 
> 赞同：10
> 
> 时间：2013-03-02T02:10:20.837
> 
> 标签：delphi, delphi-7

我有一个特定的图标文件，它由 PNG 压缩图像组成，当我尝试加载它并添加到 a`TImageList`时，`Out of system resources`会引发异常。

图标文件在这里：[https ://www.dropbox.com/s/toll6jhlwv3cpq0/icon.ico?m](https://www.dropbox.com/s/toll6jhlwv3cpq0/icon.ico?m)

这是代码，它适用于常见类型的图标，但适用于 PNG 图像图标：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Icon: TIcon;
begin
  try
    Icon := TIcon.Create;
    Icon.LoadFromFile('icon.ico');
    ImageList1.AddIcon(Icon);
    Caption := IntToStr(ImageList1.Count);
  finally
    Icon.Free;
  end;
end; 
```

为什么PNG图像图标格式无法加载`Out of system resources`异常？如何将这种图标添加到图像列表中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T02:38:58.153

***问题来源：***

在这种情况下，图标是多尺寸图标文件这一事实并不重要。图标的位图信息标头在内部以不同于应有的方式读取。您的图标是 PNG 格式的文件图标，并且没有位图信息标题结构。之所以会出现`Out of system resources`异常，是因为内部使用的过程期望 icon 具有[`TBitmapInfoHeader`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183376%28v=vs.85%29.aspx)结构，然后尝试根据此标头信息创建临时位图。对于您的图标，它是这样读取的：

![在此处输入图像描述](../Images/835100fb52a6ef770052eacc7c4fd68a.png)

如果您仔细查看标头值，您会计算出系统将尝试创建一个位图，其大小为 169478669 * 218103808 像素，每像素 21060 B，至少需要有[`778.5 EB (exabytes)`](http://www.wolframalpha.com/input/?i=169478669%20*%20218103808%20*%2021060%20Bytes%20to%20Exabytes)可用内存:-)

***解决方法：***

这当然是不可能的（此时 :-) 并且发生只是因为 PNG 文件格式图标没有此位图标题，而是在该位置直接包含 PNG 图像。解决此问题的方法是检查[`PNG signature`](http://www.libpng.org/pub/png/spec/1.2/PNG-Rationale.html#R.PNG-file-signature)图像数据的前 8 个字节是否存在通过`TIcon`对象的常用方式。

在下面的代码中，该`ImageListAddIconEx`函数迭代图标文件中的所有图标，当有一个与图像列表尺寸匹配时，它会被处理。处理首先检查这 8 个字节是否在数据偏移位置上有 PNG 图像，如果有，则将此 PNG 图像添加到图像列表中。`TIcon`如果没有，则图标通过对象以通用方式添加。如果成功，此函数返回图像列表中添加图标的索引，否则返回-1：

```
uses
  PNGImage;

type
  TIconDirEntry = packed record
    bWidth: Byte;           // image width, in pixels
    bHeight: Byte;          // image height, in pixels
    bColorCount: Byte;      // number of colors in the image (0 if >= 8bpp)
    bReserved: Byte;        // reserved (must be 0)
    wPlanes: Word;          // color planes
    wBitCount: Word;        // bits per pixel
    dwBytesInRes: DWORD;    // image data size
    dwImageOffset: DWORD;   // image data offset
  end;

  TIconDir = packed record
    idReserved: Word;       // reserved (must be 0)
    idType: Word;           // resource type (1 for icons)
    idCount: Word;          // image count
    idEntries: array[0..255] of TIconDirEntry;
  end;
  PIconDir = ^TIconDir;

function ImageListAddIconEx(AImageList: TCustomImageList;
  AIconStream: TMemoryStream): Integer;
var
  I: Integer;
  Data: PByte;
  Icon: TIcon;
  IconHeader: PIconDir;
  Bitmap: TBitmap;
  PNGImage: TPNGImage;
  PNGStream: TMemoryStream;
const
  PNGSignature: array[0..7] of Byte = ($89, $50, $4E, $47, $0D, $0A, $1A, $0A);
begin
  // initialize result to -1
  Result := -1;
  // point to the icon header
  IconHeader := AIconStream.Memory;
  // iterate all the icons in the icon file
  for I := 0 to IconHeader.idCount - 1 do
  begin
    // if the icon dimensions matches to the image list, then...
    if (IconHeader.idEntries[I].bWidth = AImageList.Width) and
      (IconHeader.idEntries[I].bHeight = AImageList.Height) then
    begin
      // point to the stream beginning
      Data := AIconStream.Memory;
      // point with the Data pointer to the current icon image data
      Inc(Data, IconHeader.idEntries[I].dwImageOffset);
      // check if the first 8 bytes are PNG image signature; if so, then...
      if CompareMem(Data, @PNGSignature[0], 8) then
      begin
        Bitmap := TBitmap.Create;
        try
          PNGImage := TPNGImage.Create;
          try
            PNGStream := TMemoryStream.Create;
            try
              // set the icon stream position to the current icon data offset
              AIconStream.Position := IconHeader.idEntries[I].dwImageOffset;
              // copy the whole PNG image from icon data to a temporary stream
              PNGStream.CopyFrom(AIconStream,
                IconHeader.idEntries[I].dwBytesInRes);
              // reset the temporary stream position to the beginning
              PNGStream.Position := 0;
              // load the temporary stream data to a temporary TPNGImage object
              PNGImage.LoadFromStream(PNGStream);
            finally
              PNGStream.Free;
            end;
            // assign temporary TPNGImage object to a temporary TBitmap object
            Bitmap.Assign(PNGImage);
          finally
            PNGImage.Free;
          end;
          // to properly add the bitmap to the image list set the AlphaFormat
          // to afIgnored, see e.g. http://stackoverflow.com/a/4618630/960757
          // if you don't have TBitmap.AlphaFormat property available, simply
          // comment out the following line
          Bitmap.AlphaFormat := afIgnored;
          // and finally add the temporary TBitmap object to the image list
          Result := AImageList.Add(Bitmap, nil);
        finally
          Bitmap.Free;
        end;
      end
      // the icon is not PNG type icon, so load it to a TIcon object
      else
      begin
        // reset the position of the input stream
        AIconStream.Position := 0;
        // load the icon and add it to the image list in a common way
        Icon := TIcon.Create;
        try
          Icon.LoadFromStream(AIconStream);
          Result := AImageList.AddIcon(Icon);
        finally
          Icon.Free;
        end;
      end;
      // break the loop to exit the function
      Break;
    end;
  end;
end; 
```

以及用法：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Index: Integer;
  Stream: TMemoryStream;
begin
  Stream := TMemoryStream.Create;
  try
    Stream.LoadFromFile('d:\Icon.ico');
    Index := ImageListAddIconEx(ImageList1, Stream);
    if (Index <> -1) then
      ImageList1.Draw(Canvas, 8, 8, Index);
  finally
    Stream.Free;
  end;
end; 
```

***结论：***

我想说，如果 Microsoft 推荐使用 PNG 图标格式（自 Windows Vista 起受支持），则可以更新`ReadIcon`程序`Graphics.pas`以考虑到这一点。

***有什么要读的：***

*   [ICO 文件格式的演变，第 4 部分：PNG 图像](http://blogs.msdn.com/b/oldnewthing/archive/2010/10/22/10079192.aspx)

# java - 在使用 Guava 的 Eclipse 中无法获得内容帮助

> ID：15169911
> 
> 赞同：0
> 
> 时间：2013-03-02T02:10:42.497
> 
> 标签：java, eclipse, guava, content-assist

我在让 Eclipse 中的 Content Assist 与 Guava 一起工作时遇到了问题。此帮助适用于具有我已加载到项目中的源代码（例如 JFreeChart），但我找不到 Guava 的源代码。我尝试将所有三个 jar 放入构建路径（guava-14.0jar、guava-14.0-javadoc.jar、guava-14.0-sources.jar），并将 Javadoc 位置指向带有 guava 的硬盘上的文件夹-14.0-javadoc.jar。通过这些的任意组合，我得到“注意：该元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc。” 从悬停。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T02:46:12.707

在 Eclipse 中，您必须将 Javadoc 位置指向`guava-14.0-javadoc.jar`文件本身，而不是指向包含它的文件夹。

在您的项目属性中，转到 Java Build Path，选项卡 Libraries，找到 guava jar 的条目，然后单击左侧的小三角形以展开 jar 选项。单击“Javadoc 位置”并选择“编辑...”按钮。然后选择“归档中的Javadoc”和“外部文件”。写入 jar 文件路径或使用浏览按钮查找 jar。

您不需要将 javadoc 和源 jar 放在构建路径中。

# java - TestNG 在不引发异常的情况下使单元测试失败

> ID：15169919
> 
> 赞同：1
> 
> 时间：2013-03-02T02:11:43.840
> 
> 标签：java, maven, testng, surefire

这可能是我的另一个问题的解决方案：[Testing multithreaded code in TestNG](https://stackoverflow.com/questions/15169889/test-multithreaded-code-in-testng)

`foo`本质上，我需要一种方法来使其他线程的测试失败。这意味着抛出异常将不起作用。我能想到的唯一技巧是添加一个一直等待异常的民意调查，但我可以为此想到很多问题：

*   必须在每个测试中重复这个
*   轮询多长时间？需要正确配置，可能会迫使测试花费太长时间

    这在TestNG中可能吗？

如果相关，还可以使用 Maven 的 Surefire 插件。（我仍在学习每种技术的处理方式）。

# javascript - jQuery - ajax - post - json 请求 - 在某些 URL 中没有帖子正文

> ID：15169921
> 
> 赞同：0
> 
> 时间：2013-03-02T02:11:54.707
> 
> 标签：javascript, jquery, ajax, post

我已经被困了一段时间了。我在这里有ajax请求：

```
$.ajax({
    url: UPDATE_USER_INFO_URL ,
    type: "POST",
    dataType: "json",
    contentType: "application/json",
    data: JSON.stringify({user:'user'}),
    success: function (data, textStatus) {
        if(data["statusCode"] && data["statusCode"] == 1) {
            _callback(1,data);
        }
        else {
            _callback(0,data);
        }
    },
    error: function (jqXHR, textStatus){
        _callback(0, {});
    }           
}); 
```

如果我设置`UPDATE_USER_INFO_URL`为特定的 URL，提琴手在正文中不显示任何内容。如果我设置`UPDATE_USER_INFO_URL`为其他内容（甚至是无效的 URL），它确实会放入`{user:'user'}`提琴手​​的正文中。

使用原始 UPDATE_USER_INFO_URL：

```
POST http://10.35.50.26:8080/SelfServiceWs/user/session/upduserinfo HTTP/1.1
Accept: application/json, text/javascript, ; q=0.01
Content-Type: application/json
X-Requested-With: XMLHttpRequest
Referer: http://10.35.50.26:8080/SelfService/
Accept-Language: en-us
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: 10.35.50.26:8080
Connection: Keep-Alive
Pragma: no-cache
Cookie: JSESSIONID=0BF9D9CCCE9030E60AB0BCE5F6562CD8
Authorization: Negotiate TlRMTVNTUAABAAAAl4II4gAAAAAAAAAAAAAAAAAAAAAGAbAdAAAADw==
Content-Length: 0 
```

将 url 更改为 /SelfServiceWs/abcdef

```
POST http://10.35.50.26:8080/SelfServiceWs/abcdef HTTP/1.1
Accept: application/json, text/javascript; q=0.01
Content-Type: application/json
X-Requested-With: XMLHttpRequest
Referer: http://10.35.50.26:8080/SelfService/
Accept-Language: en-us
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: 10.35.50.26:8080
Content-Length: 15
Connection: Keep-Alive
Pragma: no-cache
Cookie: JSESSIONID=9E79779805579A7964E03AAD76DF043B

{"user":"user"} 
```

我有许多其他 ajax 调用，都按预期工作。

我想念的东西一定是小事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:14:26.543

我想通了。

我有一个到 url /user/ssoauth 的身份验证 servlet 过滤器，出乎意料地（对我而言），它对 /user 路径下的 URL（包括 /user/session/upduserinfo）进行了一切调用以发送授权标头。将过滤器移至 /user/auth/ssoauth 停止客户端以在调用 user/session/upduserinfo 时发送授权标头并修复问题。

```
<filter-mapping>
  <filter-name>SecurityFilter</filter-name>
  <url-pattern>/user/ssoauth</url-pattern>
</filter-mapping> 
```

导致 /user 发送授权标头之后的每个客户端调用 URL。

我今天学了些新东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:09:59.230

试试这个

```
data: JSON.stringify({'user':'user'}), 
```

# asp.net - 我的用户名和登录页面无法使用

> ID：15169922
> 
> 赞同：0
> 
> 时间：2013-03-02T02:11:59.870
> 
> 标签：asp.net, visual-studio-2008, login, ado.net, code-behind

好的。因此，我有一个简单的网站，其中包含用户名和密码文本框以及 vb2008 中的提交按钮，该按钮应该指向一个新页面，该页面访问网格视图中的 SQL 源表。我应该输入“mcobery”作为用户名，输入“password”作为密码，当我这样做时，什么也没有发生。我后面的代码有问题吗？

看看我背后的代码以及我的默认页面和它指向代码的页面。

这是后面的代码

```
 Protected Sub butSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles    butSubmit.Click

    Dim correctPassword As Boolean = False

    'Establish the SqlConnection by using the configuration manager to get the connection string in our web.config file.

    Using mySqlConnection = New Data.SqlClient.SqlConnection  (ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString)

        Dim sql As String = "SELECT password FROM MyUsers WHERE username = @userName"

        Using mySqlCommand = New Data.SqlClient.SqlCommand(sql, mySqlConnection)
            mySqlCommand.Parameters.AddWithValue("@userName", Me.TextBox1.Text)

            Try
                mySqlConnection.Open()

                Using myReader = mySqlCommand.ExecuteReader()

                    If myReader.Read() Then

                        Dim password As String = myReader.GetString(myReader.GetOrdinal("password"))

                        If password = Me.TextBox2.Text Then

                            'Open page with users and roles

                            correctPassword = True

                        End If

                    End If

                End Using

            Catch ex As Exception
                Console.WriteLine(ex.ToString())

            End Try

        End Using

    End Using

    If correctPassword Then

        Response.Redirect("userAdmin.aspx")

    End If

   End Sub

  End Class 
```

我的 default.aspx 页面

```
 <%@ Page Language="VB" Debug="true" MasterPageFile="~/master.master" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" title="Untitled Page" %>

 <asp:Content ID="Content1" ContentPlaceHolderID="header" Runat="Server">
<p style="text-align: center; color: white">
    SAM PEPPARD</p>
 </asp:Content>
 <asp:Content ID="Content2" ContentPlaceHolderID="navigation" Runat="Server">
<a href="Default.aspx">Default.aspx</a>
<br />
<br />
<a href="userAdmin.aspx">userAdmin.aspx</a>
<br />
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="main" Runat="Server">
&nbsp &nbsp User Name
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp; Password&nbsp<asp:TextBox ID="TextBox2" 
    runat="server" TextMode="Password"></asp:TextBox>
    &nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;
<asp:Button ID="butSubmit" runat="server" Text="Submit" />
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="footer" Runat="Server">
</asp:Content> 
```

当您按下提交时它应该指向的页面。它被称为 userAdmin.aspx

```
<%@ Page Language="VB" MasterPageFile="~/master.master" AutoEventWireup="false" title="UserAdmin" %>

<asp:Content ID="Content1" ContentPlaceHolderID="header" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="navigation" Runat="Server">
<a href="Default.aspx">Default.aspx</a>
<br />
<br />
<a href="userAdmin.aspx">userAdmin.aspx</a>
<br />
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="main" Runat="Server">
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT * FROM [MyUsers]"></asp:SqlDataSource>
<asp:GridView ID="UserRolesGrid" runat="server" DataSourceID="SqlDataSource1" 
    Width="399px" AutoGenerateColumns="False" DataKeyNames="id">
    <Columns>
        <asp:BoundField DataField="id" HeaderText="id" InsertVisible="False" 
            ReadOnly="True" SortExpression="id" />
        <asp:BoundField DataField="user_logon_id" HeaderText="user_logon_id" 
            SortExpression="user_logon_id" />
        <asp:BoundField DataField="user_full_name" HeaderText="user_full_name" 
            SortExpression="user_full_name" />
        <asp:BoundField DataField="user_description" HeaderText="user_description" 
            SortExpression="user_description" />
        <asp:BoundField DataField="user_password" HeaderText="user_password" 
            SortExpression="user_password" />
    </Columns>
</asp:GridView>
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="footer" Runat="Server">
</asp:Content> 
```

如果有帮助，这里是母版页代码

```
<%@ Master Language="VB" CodeFile="master.master.vb" Inherits="master" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0   Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Website 1</title>
<style type="text/css">
    .fullHW
    {
        width: 100%;
        height: 100%;
    }
    .fullW
    {
        width: 100%;
    }
    .header
    {
        color:black;
        background-color:indigo;
        height: 100px;
        font-size:16.0pt;
        font-family:"Arial","sans-serif";
    }
    .footer
    {
        color:white;
        background-color:indigo;
        height: 100px;
        font-size:8.0pt;
        font-family:"Arial","sans-serif";
    }
    .nav
    {
        background-color:black;
        width: 200px;
        height: 400px;
        font-size:11.0pt;
        color:black;
        font-family:"Arial","sans-serif";
    }
    .content
    {
        background-color:white;
        height: 100%;
        font-size:11.0pt;
        color:black;
        font-family:"Arial","sans-serif";
    }

    a:link              { color:white; text-decoration:none; }
    a:visited           { color:white; text-decoration:none; }
    a:hover             { color:white; text-decoration:none; }
    a:active            { color:white; text-decoration:none; }

</style>
</head>
<body>
<form id="form1" runat="server">
<div class="fullHW">
    <table border="0" cellpadding="0" cellspacing="0" class="fullHW">
        <tr class="fullHW">
          <td class="header">
            <asp:ContentPlaceHolder ID="header" runat="server">
            </asp:ContentPlaceHolder>
          </td>
        </tr>
        <tr class="fullHW">
          <td>
            <table border="0" cellpadding="0" cellspacing="0" class="fullHW">
              <tr class="fullHW">
                <td class="nav">
                  <asp:ContentPlaceHolder ID="navigation" runat="server">
                     <a href="Default.aspx">Default.aspx</a>

                      <br />
                      <br />

                     <a href="userAdmin.aspx">userAdmin.aspx</a>
                  </asp:ContentPlaceHolder>
                </td>
                <td class="content">
                  <asp:ContentPlaceHolder ID="main" runat="server">
                  </asp:ContentPlaceHolder>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        <tr class="fullHW">
            <td class="footer">
                <asp:ContentPlaceHolder ID="footer" runat="server">
                </asp:ContentPlaceHolder>
            </td>
        </tr>
    </table>
  </div>
 </form>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:10:10.783

我没有看到您将`btnSubmit_Click`方法与`btnSubmit`按钮相关联。`Page_Load`我想你可以在检查后处理处理程序中的提交单击按钮`IsPostBack`。

# android - 使用其他方法创建等效的 GL_MAX 混合方程

> ID：15169923
> 
> 赞同：3
> 
> 时间：2013-03-02T02:12:01.167
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在尝试找到一种方法来重新创建或至少获得与 Android 设备上 OpenGL es 2.0 中的最大钳位混合方程类似的结果。

不幸的是，`glBlendEquation(GL_MAX_EXT)`Android 不支持。`GL_MAX enum`在 Android 的 gl 头文件中定义，但执行时，结果是`GL_INVALID_ENUM`0x0500 错误。

我有一个使用着色器和屏幕外纹理的解决方案，其中每个渲染乒乓球在纹理之间使用着色器来计算最大像素值。

但是，对于大多数 Android 设备上的任何实时执行，此解决方案都不够快。

所以考虑到这个限制，有没有办法只使用不同的混合方程和混合因子来重新创建类似的结果？

我尝试了许多混合功能组合，最接近的是：

> glBlendFunction(GL_SRC_ALPHA, GL_ONE_MINUS_ALPHA) ：这很接近，但纹理变得太透明。低 alpha 值的纹理很难看到。
> 
> glBlendFunction(GL_ONE_MINUS_DST_ALPHA, GL_SRC_ALPHA) ：这也有一些接近，但 alpha 积累太多，颜色变得比预期的更暗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:32:13.170

如果您可以在不需要特殊[`GL_MAX`混合](http://www.opengl.org/wiki/Blending#Blend_Equations)功能的情况下进行混合……OpenGL 永远不会首先添加它。因此，您的选择是不使用或使用您的着色器方法。

# ios - 主队列上的调度异步？

> ID：15169925
> 
> 赞同：32
> 
> 时间：2013-03-02T02:12:47.110
> 
> 标签：ios

我看过这个代码片段：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self doSomeNetworkStuff];
}); 
```

这对我来说似乎没有多大意义。

编辑：澄清我的问题的条件：

*   调用`dispatch_async`是从主线程执行的。
*   发送的消息`doSomeNetworkStuff`是繁重的工作任务。
*   ...而且不仅是 UI 更新任务。

调度，当然，但使用主队列只会将调度的任务拉回 ui 线程并阻止它。

请问，我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-02T02:21:38.093

`dispatch_async`让您的应用程序在许多队列上运行任务，因此您可以提高性能。但是所有与 UI 交互的东西都必须在主线程上运行。您可以在主线程之外运行与 UI 无关的其他任务以提高性能。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

  //Add some method process in global queue - normal for data processing

    dispatch_async(dispatch_get_main_queue(), ^(){
    //Add method, task you want perform on mainQueue
    //Control UIView, IBOutlet all here

    });

 //Add some method process in global queue - normal for data processing

}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-18T17:26:32.137

## **斯威夫特 3**：

```
DispatchQueue.global(attributes: .qosBackground).async {
    print("This is run on the background queue")

    DispatchQueue.main.async {
        print("This is run on the main queue, after the previous code in outer block")
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-28T12:06:11.713

当你想做一些 Webservicecall 或一些你调度异步调用的事情时，如下所示：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0),^{
        //Call your webservice here , your app will not freeze at all  
}); 
```

现在，假设你想从你的调度线程更新或推送一个 ViewController，如果你直接从这个推送视图控制器，应用程序将会或可能会崩溃，因为这样的 UI 更新应该在应用程序的主线程中完成，下面是这个的答案然后。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0),^{
       //Call your webservice here , your app will not freeze at all

       //To update UIFrom dispatched Thread:

       dispatch_async(dispatch_get_main_queue,^{   

       //Push view controller here
});

}); 
```

详情请访问：[blackberrymastercracks.blogspot.in](http://blackberrymastercracks.blogspot.in)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-09T09:57:55.783

这取决于调用此代码的位置。意味着如果它从主队列调用，那么它没有意义。（注意：它不会导致崩溃，但只会在主队列中添加一个任务）。

如果此代码是在后台线程中编写的，那么这就是应用程序的汇聚点。就像您在后台线程中从 Web 服务获取数据然后想要在 UI 上更新它然后您可以调用它。

```
-(void) backgroundThreadFunction {

     //Some stuff on background thread. 

     dispatch_async(dispatch_get_main_queue(), ^{
         //Wants to update UI or perform any task on main thread.    
         [self doSomeNetworkStuff];
     });
} 
```

您可以在苹果文档[https://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html](https://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html) 或从这个答案中找到更多详细信息[https://stackoverflow.com/a/ 19822753/505735](https://stackoverflow.com/a/19822753/505735)

如果仍然不清楚，请给我发帖。我会写一个详细的答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-02T02:21:45.820

您通常会`dispatch_async`在后台线程上运行的另一个调用中看到该语法。这是因为 UI 的所有更新都应该发生在主线程上，而不是后台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-02T18:45:04.657

我忘记了这个问题，但由于它仍然受到关注，我将发布对此的答案（使用 swift）

假设：我知道 UI 工作必须在主线程上完成。

```
//
// We are on the main thread here.
// The following will schedule the closure on the main thread after ALL other 
//   routines currently scheduled on the main thread are done. 
//
DispatchQueue.main.async {
    //
    // So here we are back on the main thread AFTER all routines on the main 
    //   thread have completed.
    // 
    // If the following call does NOT dispatch onto a background thread 
    //    it will block the UI and it was really bad programming.
    // 
    // Thus, for now and for the benefit of the doubt, let's assume 
    //   `doSomeNetworkStuff()` DOES dispatch to a background thread.
    //   
    // This can only make sense if the the func `doSomeNetworkStuff()` 
    //   relies on results of code paths following this current 
    //   `DispatchQueue.main.async(... we are here ...)`.
    //
    // If `doSomeNetworkStuff()` does NOT depend on any other code paths:
    //   Why not directly scheduling it directly on a background thread? 
    //   Which is unnecessary, as as stated above it MUST dispatch on to the
    //     background anyways.
    // 
    // Moreover, there is few possibility that `doSomeNetworkStuff()` does 
    //   depend on other codepaths, because `self` is already captured by 
    //   the closure.
    //
    self.doSomeNetworkStuff()
} 
```

恕我直言，将所有这些放在一起，原始代码没有多大意义。它可以替换为：

```
// We are on the main thread here
self.doSomeNetworkStuff() 
```

原始的异步分派到主线程然后分派到后台应该是浪费和混乱的（显然）。

不幸的是，我不能再用原始代码库来尝试这个了。

我在这里错过了一个想法吗？

# javascript - 有没有办法在 HTML 中定义自定义特殊字符？

> ID：15169928
> 
> 赞同：6
> 
> 时间：2013-03-02T02:13:21.380
> 
> 标签：javascript, css, html, html-escape-characters

W3在提案草案中定义了`&mail;`符号。`&telephone;`我想现在就开始使用它们，即使它们还不是官方的。

有什么方法可以定义这个吗？例如`&telephone; = &#x260e;`？

我猜这是不可能的，而且这并不是什么大问题——只是好奇，因为能够创建这样的自定义字符映射可能很有趣。

[http://www.w3.org/TR/WD-wwwicn.html](http://www.w3.org/TR/WD-wwwicn.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:53:48.027

实现这个 JavaScript 真的很容易。

```
var el=document.getElementById('element');
el.innerHTML=el.innerHTML.replace(/\&telephone\;/g,'&#x260e;').replace(........... 
```

尽管在服务器端执行此操作是一个更好的主意。例如，在 PHP 中，您可以使用 strreplace($needle,$haystack) 函数或定义电话常量。

```
define('telephone','&#x260e');
//...
echo'<span>',telephone,' 001 23456789</span>'; 
```

# authentication - Sharepoint 2010 从 Active Directory 存储或同步用户凭据

> ID：15169929
> 
> 赞同：0
> 
> 时间：2013-03-02T02:13:28.700
> 
> 标签：authentication, sharepoint-2010, synchronization

有没有办法让 SharePoint 2010 存储或同步用户凭据，以便它可以自我验证。然后安排同步服务来更新用户凭据。

如果连接到 AD 出现问题，这将有所帮助，用户仍然可以进入该站点。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:22:33.090

这对于标准产品是不可能的。

当然，只要有足够的代码，您就可以编写自己的系统，但我认为这会使其变得更加复杂和不安全，因为您会使密码在 AD 中可解密，并且您会将它们存储在您负责的第二个地方为您自己的安全措施。

您的 AD 无法访问是否有原因？因为还有其他方法可以使 AD 高可用，这些方法配置起来比创建自定义解决方案要便宜得多。

# php - 使用 Fancybox 2 发布数据

> ID：15169934
> 
> 赞同：0
> 
> 时间：2013-03-02T02:13:45.443
> 
> 标签：php, jquery, ajax, fancybox-2

我在fancybox 窗口中使用表单将（Ajax）数据发布到php 页面。

如果我在 Fancybox 之外运行表单，它会完美运行。插入 - 检查。响应 - 检查。也就是说，如果我通过 Fancybox 运行相同的页面，我会得到一个加载轮（在我关闭覆盖后仍然存在）。

![在此处输入图像描述](../Images/6b86b9d248dc4660bdb2bb11ba5ab022.png)

表格（form_test.php）：

```
<form id="form" method="post" action="">
    <input type="text" id="name" name="name" value="Test Name" />
    <input type="text" id="email" name="email" value="email@test.com" />
    <input type="submit" value="Login" />
</form>

<script type"text/javascript">
    $("#form").bind("submit", function () {
$.fancybox.showLoading(); // it was $.fancybox.showActivity(); for v1.3.4
$.ajax({
    type: "POST",
    cache: false,
    url: "test.php", // make sure your path is correct
    data: $(this).serializeArray(), // your were using $(form).serialize(), 
    success: function (data) {
        $.fancybox(data);
    }
});
return false;
}); // bind
</script> 
```

PHP (test.php):

```
$name=$_POST['name'];
$email=$_POST['email'];

$query=mysql_query("INSERT INTO members (firstName,email) VALUES('$name','$email')");
if($query){
    echo "Data for $name inserted successfully!";
}
else{
    echo "An error occurred!";
} 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:59:24.430

尝试

```
$("#form").bind("submit", function () {
    $.fancybox.showLoading(); // it was $.fancybox.showActivity(); for v1.3.4
    $.ajax({
        type: "POST",
        cache: false,
        url: "test.php", // make sure your path is correct
        data: $(this).serializeArray(), // your were using $(form).serialize(), 
        success: function (data) {
            $.fancybox(data);
        }
    });
    return false;
}); // bind 
```

现在，`$.fancybox(data);`将返回（在 fancybox 内）您从*text.php*文件发送的任何内容，以便您可以`<div id="message">`在该文件中返回 from，例如：

```
if($query){
  echo "<div id='message'>Data for $name inserted successfully!</div>";
} else {
  echo "<div id='message'>An error occurred!</div>";
} 
```

# html - 代码重用：服务器端包含/ASP.NET 母版页/用户控件的 HTML 5 等效项

> ID：15169939
> 
> 赞同：2
> 
> 时间：2013-03-02T02:14:48.547
> 
> 标签：html

最近有人问我 HTML 5 中是否有一种方法可以在多个页面中重复使用页面的各个部分，而无需输入整个文本。

也许他指的是服务器端技术的客户端 HTML 等效项，例如服务器端包含 (SSI) 和 ASP.NET 母版页和用户控件。

尽管我是 HTML 5 的新手，而且我绝不是经验丰富的 Web 开发人员，但这个问题对我来说听起来很荒谬，因为重复使用标记元素是准备响应的服务器的工作；HTML 只是为标记提供了一种语法。

但是，由于我不太了解，我想知道是否真的存在这样的 HTML 5 等价物，并且这个问题并不像我想象的那么不体面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:58:19.387

你是对的。在没有程序帮助的情况下，客户端无法重用代码。Dreamweaver 是一个特别允许您制作可跨多个页面使用的模板的工具。它基本上充当您的 html 的预处理器。

有一些方法可以使用 javascript 或 jquery 在多个位置显示相同的代码块，但这不是 html5 内置的。

# c - 记录内存分配错误

> ID：15169941
> 
> 赞同：2
> 
> 时间：2013-03-02T02:15:21.713
> 
> 标签：c, memory-management, malloc

假设我正在尝试`malloc()`在 C99 中编写一个检查版本 - 没什么花哨的，一个简单的包装器，如果`malloc()`返回`NULL`将打印一条错误消息`stderr`并退出。就像是

```
 void* checked_malloc(size_t size) {
        void* ptr = malloc(size);
        if (ptr == NULL) {
            fprintf(stderr, "Failed to allocate %zd bytes\n", size);
            exit(1);
        }
        return ptr;
   } 
```

这样做的问题之一是 fprintf - 它可能会尝试自行分配内存，并且由于我们的内存不足已经会不正常地失败。

内存分配失败后，有什么方法可以可靠地记录错误消息？还是有更好的方法来编写检查`malloc()`？编译器不可知的解决方案是非常受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:23:52.960

老实说，我觉得你太偏执了。您当前的解决方案看起来不错。没有理由`fprintf()`失败`ENOMEM`。它只是转身并发出对(2)`write()`的文件描述符的调用。`stderr`它没有理由分配任何内存。

当然，您总是可以尝试使用 direct 进行日志记录`write()`，如下所示：

```
static const char oom[] = "Out of memory!\n";
write(2, oom, sizeof(oom)); 
```

但同样，这可能是矫枉过正。

此外，您不必担心每个库调用在内存分配方面的作用。使用检查`malloc()`并不能替代代码中其他地方的良好错误检查。

# c++ - C++ RapidXML get sibling of the same type?

> ID：15169943
> 
> 赞同：0
> 
> 时间：2013-03-02T02:15:37.470
> 
> 标签：c++, xml, rapidxml

So, in RapidXML, I'm trying to loop through my file to get the data from some `tileset` nodes:

```
rapidxml::xml_node<> *root_node = doc.first_node("map");
for(rapidxml::xml_node<> *tileset = root_node->first_node("tileset");
    tileset != 0; tileset = tileset->next_sibling("tileset"))
{
    // Iteration stuff... 
```

You're probably saying, what's the problem? Well, in RapidXML, the `next_sibling()` function *optionally* matches the name:

```
xml_node<Ch>* next_sibling(const Ch *name=0, std::size_t name_size=0, bool
   case_sensitive=true) const;

Gets next sibling node, optionally matching node name. Behaviour is undefined 
   if node has no parent. Use parent() to test if node has a parent. 
```

Hence, if a node is not found with the name, it'll just return the next sibling regardless. This is a problem in my program, and I just plain don't want the extra iteration. I think this is stupid, but whatever. Is there a way to make it **ONLY** iterate through my `tileset` nodes?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:35:10.863

"optionally matching node name" - As in the parameter is optional. If you pass a name string, and it is not found you will get a return value of zero.

```
xml_node<Ch> *next_sibling(const Ch *name = 0, std::size_t name_size = 0, bool case_sensitive = true) const
{
    assert(this->m_parent);     // Cannot query for siblings if node has no parent
    if (name)
    {
        if (name_size == 0)
            name_size = internal::measure(name);
        for (xml_node<Ch> *sibling = m_next_sibling; sibling; sibling = sibling->m_next_sibling)
            if (internal::compare(sibling->name(), sibling->name_size(), name, name_size, case_sensitive))
                return sibling;
        return 0;
    }
    else
        return m_next_sibling;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T11:38:38.810

I also had this problem and I used this small modification as a workaround, which works as intended.

```
rapidxml::xml_node<> *root_node = doc.first_node("map");
for(rapidxml::xml_node<> *tileset = root_node->first_node("tileset");
    tileset != 0;
    tileset = tileset->next_sibling())
{
    if(strcmp(tileset->name(), "tileset")!=0)
        continue;

    //TODO: the usual loop contents
} 
```

# c++ - 如何确定媒体文件的持续时间？

> ID：15169944
> 
> 赞同：0
> 
> 时间：2013-03-02T02:15:41.273
> 
> 标签：c++, winapi, video

是否可以确定媒体文件的持续时间？

当我说媒体（视频）文件时，我指的是以下类型的文件：.wmv、.avi。.mp4、.flv、.mkv。当我说持续时间时，我的意思是确定视频文件的分钟和秒数。

我了解每个文件的编码/打包方式不同，但也许每个文件都将它们的持续时间存储在标题中？是否有本机 WinAPI 函数可以让我将这些文件中的任何一个读入内存或至少检查标题？我知道本机 WinAPI 没有为 .png 提供任何 API 函数，因此对于电影文件来说这也是一个很长的镜头，但你永远不知道。

如果本机 WinAPI 没有任何功能能够做到这一点，你会推荐一个 C++ 视频 API/库，还是你只是打开文件并手动搜索标题的持续时间（即，使用`fopen()`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:35:30.387

有许多不同的视频 API。我已经有一段时间没有研究它了，但我从谷歌搜索“开源 C++ 视频库”中找到了这个[链接](https://stackoverflow.com/questions/37956/c-whats-the-easiest-library-to-open-video-file)

就 Windows API 而言，它们似乎来来去去，所以我个人不会依赖它们。它们也不太可能是便携式的。如果必须的话，你可以看看[Direct 3D 11](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447677%28v=vs.85%29.aspx)之类的东西。我知道一个流行的游戏选项是[Bink](http://www.radgametools.com/bnkmain.htm)。

这些库中的任何一个都应该提供您需要的信息，因为许多格式确实在某种标题中包含此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T15:34:44.460

如果你想使用纯 Windows API（就像 Windows 浏览器一样）来做，你应该在 propsys.dll 的帮助下做。

它也可以用 DirectShow 来完成。像这样：

```
REFERENCE_TIME GetMediaDuration(CString filePath)
{
     CComPtr<IGraphBuilder> graphBuilder;
     if (SUCCEEDED(CoCreateInstance(CLSID_FilterGraph, 0, CLSCTX_INPROC,
                                IID_IGraphBuilder, reinterpret_cast<void**>(&graphBuilder))))
     {
          CComPtr<IBaseFilter> pSource;
          HRESULT hr = graphBuilder->AddSourceFilter(filePath, L"Source", &pSource);    

          CComPtr<IPin> pPin;
          pSource->FindPin(L"Output", &pPin);   

          if (SUCCEEDED(graphBuilder->Render(pPin)))
          {
            CComPtr<IMediaSeeking> mediaSeeking;
            hr = graphBuilder->QueryInterface( IID_IMediaSeeking, reinterpret_cast<void**>(&mediaSeeking));

            REFERENCE_TIME rtDur = 100;
            if (SUCCEEDED(mediaSeeking->GetDuration(&rtDur)))
            return rtDur;
          }
      }
      return 100;
} 
```

# c - 简单程序的内存泄漏，如何释放分配？

> ID：15169946
> 
> 赞同：1
> 
> 时间：2013-03-02T02:15:50.497
> 
> 标签：c

我正在学习 C，并且在找出如何释放 malloc() 时遇到问题。

该程序运行正确..但我正在使用 valgrind，它提出了 8 个分配和 5 个释放。我需要能够再释放 3 个。我评论了我认为我没有释放但我不确定解决方案的地方。

有没有办法释放这些分配，或者我是否需要考虑重写 tokenizer()？

这是整个文件的代码。

```
#include <stdlib.h>
#include <stdio.h> 
#include <string.h>

char *substr(const char *s, int from, int nchars) {

   char *result = (char *) malloc((nchars * sizeof(char))+1);
   strncpy(result, s+from, nchars);

   return result;
}

/**
 Extracts white-space separated tokens from s.
 @param s A string containing 0 or more tokens.
 @param ntokens The number of tokens found in s.
 @return A pointer to a list of tokens. The list and tokens must be freed
 by the caller.
 */ 
char **tokenize(const char *s, int *ntokens) {
    int fromIndex = 0;
    int toIndex = 0;
    char **list;
    int finalCount = *ntokens;
    int count = 0;

    list = malloc(*ntokens * sizeof(char*));

    while ( count < finalCount) {

        char *m = strchr(s,' ');
        toIndex = m - s;

        if(toIndex >= 0) {
            list[count] = substr(s,fromIndex,toIndex); // This substr() gets free'ed from main()        
            s = substr(s, toIndex+1, strlen(s));    // I believe This is where I am making extra mallocs that are not being freed
            count++;
        } else {        
            list[count] = substr(s,fromIndex,strlen(s)); // This substr() gets free'ed from main()
            count++;
        }
    }   

    return list;
} 

int main(int argc, char **argv) {
  char **list;
  char *string = "terrific radiant humble pig";

  int count = 4; // Hard-Coded

  list = tokenize(string, &count);

  for (int i=0;i<count;i++) {
    printf("list[%d] = %s\n", i, list[i]);
  }

  // Free mallocs()'s
  for (int i=0;i<count;i++) {
    free(list[i]);
  }
  // Free List
  free(list);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:28:21.830

每次获得一个令牌后，您都不需要 substr 。就时间和空间而言，这太浪费了。您可以更改 s 的值以使其指向您需要的字符串。

```
//s = substr(s, toIndex+1, strlen(s));    // You don't need have to generate a new string
s = s + toIndex + 1;//You can just change the value of s to make it point to the string you need 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:25:59.967

我可以想到一个简单的解决方法，只需在覆盖之前将 s 的当前值存储在另一个指针中。并且还要确保不要将 s 的第一个值直接作为参数释放到`tokenize()`.

```
char **tokenize(const char *s, int *ntokens) {
    int fromIndex = 0;
    int toIndex = 0;
    char **list;
    int finalCount = *ntokens;
    int count = 0;
    bool firstTime = true; // Use this to make sure you do not free up the memory for the initial s passed as the function arg

    list = malloc(*ntokens * sizeof(char*));

    while ( count < finalCount) {
        char *m = strchr(s,' ');
        toIndex = m - s;

        if(toIndex >= 0) {
            const char* previous_s = s; // Store the current value of s
            list[count] = substr(s,fromIndex,toIndex); // This substr() gets free'ed from main()        
            s = substr(previous_s, toIndex+1, strlen(previous_s));
            if (!firstTime)
            {
                free(previous_s); // Since we're done with the previous_s, we can free up the memory
            }
            firstTime = false;
            count++;
        } else {        
            list[count] = substr(s,fromIndex,strlen(s)); // This substr() gets free'ed from main()
            count++;
        }
    }   

    if (!firstTime)
    {
        free(s); // There could be a block allocated last time which needs to be freed as well
    }

    return list;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T03:29:18.173

问题出在你想的地方！幸运的是，在 c 中移动点非常容易，在哪个字符串处，您不需要再次调用`substr`；因为指针;-)

```
// s = substr(s, toIndex+1, strlen(s));   
s += toIndex+1; 
```

# google-visualization - 谷歌图表——如何防止选择某些点？

> ID：15169951
> 
> 赞同：0
> 
> 时间：2013-03-02T02:16:42.390
> 
> 标签：google-visualization

是否有可能有一个谷歌图表，其中一些数据点是可选择的，而另一些则不是？我认为这可以通过自定义事件处理程序实现，但我不确定如何实现它。

提前致谢。

# spring - 在启动时填充 spring servlet 上下文

> ID：15169954
> 
> 赞同：0
> 
> 时间：2013-03-02T02:16:58.827
> 
> 标签：spring, servlets

这可能是一个重复的问题。

我的问题是：我想从属性文件中读取一个属性，并在我启动应用程序后立即将其放入 servlet 上下文中。

有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T20:14:34.213

实现 Spring 的 ApplicationListener：

```
@Component
public class MyApplicationListener implements ApplicationListener  {

  /* if you want to set predefined properties you even don't have to load properties filed - you can directly inject properties values ... you can configure it in applicationContext.xml
   <util:list id="locations">
      <value>classpath:appconfig1.properties</value>
      <value>classpath:appconfig2.properties</value>
   </util:list>
   <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
              p:locations-ref="locations" />
  */         

  @Value("${myproperty1}") private String myProperty1;
  @Value("${myproperty2}") private String myProperty2;
  @Value("${myproperty3}") private String myProperty3;

  public void onApplicationEvent(ApplicationEvent event) {

    if (event instanceof ContextClosedEvent) {
        applicationClosed();
        return;
    }

    if (!(event instanceof ContextRefreshedEvent)) return;
    ContextRefreshedEvent e = (ContextRefreshedEvent) event;
    ApplicationContext appContext = e.getApplicationContext();
    if (!(appContext instanceof WebApplicationContext)) return;
    WebApplicationContext ctx = (WebApplicationContext) e.getApplicationContext();
    ServletContext context = ctx.getServletContext();

    context.setAttribute("myProperty1", myProperty1);
    context.setAttribute("myProperty2", myProperty2);
    context.setAttribute("myProperty3", myProperty3);

  }
} 
```

# wolfram-mathematica - 数学中的不确定性传播公式

> ID：15169955
> 
> 赞同：3
> 
> 时间：2013-03-02T02:17:02.437
> 
> 标签：wolfram-mathematica, uncertainty

我正在尝试编写一小段代码来执行错误传播。到目前为止，我可以让 Mathematica 在函数 f(x1,x2,...,xi,...,xn) 中生成错误 delta_f 的公式，错误为 dx1,dx2,...,dxi,.. .dxn：

```
fError[f_, xi__, dxi__] := 
  Sum[(D[f[xi], xi[[i]]]*dxi[[i]])^2, {i, 1, Length[xi]}]^(1/2) 
```

其中 fError 要求输入函数 f 的所有变量都被 {...} 包围。例如，

```
d[{mv_, Mv_, Av_}] := 10^(1/5 (mv - Mv + 5 - Av))
FullSimplify[fError[d, {mv, Mv, Av}, {dmv, dMv, dAv}]] 
```

返回

```
2 Sqrt[10^(-(2/5) (Av - mv + Mv)) (dAv^2 + dmv^2 + dMv^2)] Log[10] 
```

我的问题是，我该如何评估这个？理想情况下，我想将 fError 修改为：

```
fError[f_, xi__, nxi__, dxi__] 
```

其中 nxi 是 xi 的实际值列表（分开，因为将 xi 设置为它们的数值会破坏上面的微分步骤。）这个函数应该找到误差 delta_f 的一般公式，*然后*在可能的情况下对其进行数值评估。我认为解决方案应该像 Hold[] 或 With[] 或类似的东西一样简单，但我似乎无法理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-14T21:27:42.827

我没有关注你所做的一切，因为这是两年前发布的，你很可能不再在做这件事了。我会给你我的错误传播解决方案，希望它能以某种方式帮助你或其他人。

我试图在下面链接的视频和文件中包含最好的文档。如果您打开 .cdf 文件并清除它，您应该能够看到我的代码...

文件： [https ://drive.google.com/file/d/0BzKVw6gFYxk_YUk4a25ZRFpKaU0/view?pli=1](https://drive.google.com/file/d/0BzKVw6gFYxk_YUk4a25ZRFpKaU0/view?pli=1)

视频教程： [https ://www.youtube.com/watch?v=q1aM_oSIN7w](https://www.youtube.com/watch?v=q1aM_oSIN7w)

-布赖恩

**编辑：** 我发布了链接，因为我无法附加文件，也不想为数学新手发布没有文档的代码。这是直接的代码。我鼓励任何发现此解决方案有助于快速查看文档的人，因为它展示了一些提高生产力的技巧。

```
Manipulate[
 varlist = ToExpression[variables];
 funct = ToExpression[function];
 errorFunction[variables, function]
 , {variables, "{M,m}"}, {function, "g*(M-m)/(M+m)"}, 
 DisplayAllSteps -> True, LabelStyle -> {FontSize -> 17}, 
 AutoAction -> False,
 Initialization :> (
   errorFunction[v_, f_] := (
     varlist = ToExpression[v];
     funct = ToExpression[f];
     varlength = Length[Variables[varlist]];
     theoretical = 
      Sqrt[(Total[
         Table[(D[funct, Part[varlist, n]]*
             Subscript[U, Part[varlist, n]])^2, {n, 1, 
           varlength}]])];
     Part[theoretical, 1];
     varlist;
     uncert = Table[Subscript[U, Part[varlist, n]], {n, 1, varlength}];
     uncert = DeleteCases[uncert, Alternatives @@ {0}];
     theoretical = Simplify[theoretical];
     Column[{Row[{Grid[{
           {"Variables", varlist},
           {"Uncertainties", uncert},
           {"Function", function},
           {"Uncertainty Function", theoretical}}, Alignment -> Left, 
          Spacings -> {2, 1}, Frame -> All, 
          ItemStyle -> {"Text", FontSize -> 20}, 
          Background -> {{LightGray, None}}]}],
       Row[{
         Grid[{{"Brian Gennow  March/24/2015"}}, Alignment -> Left, 
          Spacings -> {2, 1}, ItemStyle -> "Text", 
          Background -> {{None}}]
         }]}]))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-17T01:47:07.080

这个问题是 5 年前发布的，但我最近遇到了同样的问题，并认为我会分享我的解决方案（针对不相关的错误）。

我定义了一个带有`errorProp`两个参数的函数，`func`并且`vars`. `errorProp`, ,的第一个参数`func`是表达式的符号形式，您希望为其计算由于其参数错误而导致的其值的误差。for 的第二个参数`errorProp`应该是一个表单列表

```
{{x1,x1 value, dx1, dx1 value},{x2,x2 value, dx2, dx2 value}, ... , 
{xn,xn value, dxn, dxn value}} 
```

其中`xi`'s 和`dxi`'s 是变量及其误差的符号表示，而`xi value`and`dxi value`是变量的数值及其不确定性（参见下面的示例）。

该函数`errorProp`返回误差的符号形式、输入函数的值以及根据 中的输入计算得出`func`的误差值。这是代码：`func``vars`

```
ClearAll[errorProp];
errorProp[func_, vars_] := Module[{derivs=Table[0,{Length[vars]}], 
funcErrorForm,funcEval,funcErrorEval,rplcVals,rplcErrors},

For[ii = 1, ii <= Length[vars], ii++,
    derivs[[ii]] = D[func, vars[[ii, 1]]];
];

funcErrorForm = Sqrt[Sum[(derivs[[ii]]*vars[[ii, 3]])^2,{ii,Length[vars]}]];

SetAttributes[rplcVals, Listable];
rplcVals = Table[Evaluate[vars[[ii, 1]]] :> Evaluate[vars[[ii, 2]]], {ii, 
Length[vars]}];

SetAttributes[rplcErrors, Listable];
rplcErrors = Table[Evaluate[vars[[ii, 3]]] :> Evaluate[vars[[ii, 4]]], {ii, 
 Length[vars]}];

funcEval = func /. rplcVals;
funcErrorEval = funcErrorForm /. rplcVals /. rplcErrors;
Return[{funcErrorForm, funcEval, funcErrorEval}];
]; 
```

`errorProp`在这里，我展示了一个具有两个变量的相当复杂的函数的实际示例：

```
ClearAll[test];
test = Exp[Sqrt[1/y] - x/y];
errorProp[test, {{x, 0.3, dx, 0.005}, {y, 0.9, dy, 0.1}}] 
```

返回

```
 {Sqrt[dy^2 E^(2 Sqrt[1/y] - (2 x)/y) (-(1/2) (1/y)^(3/2) + x/y^2)^2 + (
 dx^2 E^(2 Sqrt[1/y] - (2 x)/y))/y^2], 2.05599, 0.0457029} 
```

使用错误传播公式计算返回相同的结果：

```
{Sqrt[(D[test, x]*dx)^2 + (D[test, y]*dy)^2], 
test /. {x :> 0.3, dx :> 0.005, y :> 0.9, dy :> 0.1}, 
Sqrt[(D[test, x]*dx)^2 + (D[test, y]*dy)^2] /. {x :> 0.3, 
dx :> 0.005, y :> 0.9, dy :> 0.1}} 
```

返回

```
{Sqrt[dy^2 E^(
2 Sqrt[1/y] - (2 x)/y) (-(1/2) (1/y)^(3/2) + x/y^2)^2 + (
dx^2 E^(2 Sqrt[1/y] - (2 x)/y))/y^2], 2.05599, 0.0457029} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-18T02:30:10.253

Mathematica 12 引入了使用微分方法处理错误传播的[Around](https://reference.wolfram.com/language/ref/Around.html)函数。

因此，虽然不完全符合问题所需的格式，但可能会出现这样的情况：

```
expression = a^2*b;
expression /. {a -> Around[aval, da], b -> Around[bval, db]} 
```

输出：

```
aval^2 bval ± Sqrt[aval^4 db^2+4 bval^2 Abs[aval da]^2] 
```

除了*aval、bval、da、db，*您也可以使用数值。

# c# - 尝试从 List 创建自定义类型的实例 . 两者都继承自 System.Collections.Generic.List

> ID：15169957
> 
> 赞同：0
> 
> 时间：2013-03-02T02:17:48.843
> 
> 标签：c#, string, list, collections

我有一个第 3 方 Web API，它使用一个名为 ArrayOfString 的自定义类型，它继承自 System.Collections.Generic.List。我正在尝试编写将动态生成列表并返回 ArrayOfString 的方法，但是，我无法弄清楚如何正确执行此操作。

```
// Definition of ArrayOfString in API
public class ArrayOfString : System.Collections.Generic.List<string> {}

// Working Example with Static elements
public ArrayOfString GetPropertiesAsArrayOfString()
{
  ArrayOfString properties = new ArrayOfString()
  {
    "Name|String",
    "Description|String",  
    "InventoryLevel|Int32", 
    "Sku|String", 
    "UpdatedAt|DateTime" 
  };

  return properties;
}

// Trying to initialize the ArrayofString from a collection instead of from static strings. 

// Dynamically generated List<string>
List<string> items = new List<string>() { "Name|String", "Description|String", ect... };

ArrayOfString properties = new ArrayOfString(items) 
```

上面的代码给出了一个错误，指出 ArrayOfString 不包含带有 1 个参数的构造函数，这是有道理的，但是我不确定如何初始化自定义类型。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:26:15.683

我不想让这个问题悬而未决。我开发的最终基类看起来像这样。

再次感谢你的帮助。

```
public class BaseType
{
  public ArrayOfString GetPropertiesAsArrayOfString(Type type)
  {
    PropertyInfo[] propertyInfos = type.GetProperties();
    List<string> items = new List<string>();
    string propertyType = string.empty;

    for (int x = 0; x < propertyInfos.count(); x++)
    {

      switch propertyInfos[x].PropertyType.ToString())
      {
        case "System.String":
             propertyType = "String";
             break;
        case "System.DataTime":
             propertyType = "DateTime";
             break;
        case "System.Int32":
             propertyType = "Int32";
             break;
      }

      items.Add(propertyInfos[x].Name + "|" + propertyType);
    }

    ArrayOfString properties = new ArrayOfString();
    properties.AddRange(items);
    return properties
  }
} 
```

# node.js - express 中的长（IO 绑定）请求

> ID：15169963
> 
> 赞同：0
> 
> 时间：2013-03-02T02:19:14.513
> 
> 标签：node.js, express

我有一个 Express URL，它必须等待数据通过串行端口（或另一个网络连接）从外部设备到达。这最多可能需要两秒钟。我知道如果我的 get 功能阻塞，它会阻塞整个 Node 进程，所以我想避免这种情况：

```
app.get('/ext-data', function(req, res){
  var data = wait_for_external_data();
  res.send(data);
}); 
```

我确实有一个用于外部数据的发射器，所以当外部数据到达时我可以得到一个回调。

我不清楚在我的代码等待外部数据可用时如何告诉 express 做其他事情，以及如何在我拥有它们后将它们传递给 repose 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:38:37.820

通常，您会将回调传递给您的`wait_for_external_data`函数，一旦接收到数据就会调用该函数，并且您需要编写`wait_for_external_data`它不会阻塞。为此，您将使用事件发射器来获取数据，正如您所提到的。如果您详细说明您使用什么库来获取数据，我可以提供更多信息。

```
app.get('/ext-data', function(req, res){
  wait_for_external_data(function(data){
    res.send(data);
  });
}); 
```

# log4net - 使用 Log4Net 的多个配置文件

> ID：15169967
> 
> 赞同：2
> 
> 时间：2013-03-02T02:19:24.827
> 
> 标签：log4net, log4net-configuration

我想要一个公司范围的 log4net 配置文件，但允许个人向他们的应用程序添加额外的附加程序。如何设置 Log4Net 以合并所有附加程序（从系统范围和特定于应用程序）。

我考虑过读取两个 xml 文档并动态写出一个组合的文档，但这似乎很容易出错。

想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T16:31:28.467

解决方案是构建一个类，将所有 log4net 部分合并到内存 XmlDocument 中，并将其传递给 log4net。

此类的实现及其用法可以在以下位置找到：

[http://www.kopf.com.br/kaplof/using-multiple-configuration-files-with-log4net](http://www.kopf.com.br/kaplof/using-multiple-configuration-files-with-log4net)

# asp.net-mvc - ASP.NET MVC 4 Visual Studio 2010 项目模板不存在

> ID：15169968
> 
> 赞同：6
> 
> 时间：2013-03-02T02:19:33.463
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-4

我已经下载并安装了将 MVC 4 与 VS2010 一起使用的所有先决条件。VS2010 SP1 更新、VS2010 的 ASP.NET MVC 4、VS2010 的 SSDT 和 LocalDB。我去VS2010新建网站的时候，应该有“ASP.NET MVC 4 Web Application”模板，但是没有。如何获取模板以便在 Visual Studio 2010 中启动新的 MVC 4 网站？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T18:37:17.003

您是否尝试过重新安装模板。遵循这些指示。

[http://msdn.microsoft.com/en-us/library/vstudio/ms247116(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms247116(v=vs.100).aspx)

简短的回答， [打开](https://msdn.microsoft.com/en-us/library/ms229859(v=vs.110).aspx)Visual Studio 命令提示符并输入：

```
devenv /installvstemplates 
```

那应该恢复您的所有模板。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T03:23:19.430

检查是否安装了项目模板：

1.  如果在 %ProgramFiles%\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplates\CSharp\Web\1033 中找到项目模板（它将是 *.zip），请手动搜索
2.  如果是，请运行 devenv.exe /installvstemplates
3.  如果否，则保证未安装 ProjectTemplates。您必须重新安装才能在磁盘上获取 ProjectTemplates。

**对于记录：**

所有安装的项目模板都可以在这里找到：（这是默认路径）

> %ProgramFiles%\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplates

这是 File->New ->Project Dialog 从中加载 ProjectTemplates 的地方，并显示在***Same Folder heirarchy convention***中。您可以通过更新添加另一条路径

> 工具 -> 选项 -> 项目和解决方案 -> 常规 -> 用户项目模板位置

在 studio(devenv.exe) 启动/加载时，它会尝试根据您是本地用户还是管理员在 localappdata 或 %ProgramFiles% 上创建 ProjectTemplateCache。Programfiles 中的缓存可在此处获得

> %ProgramFiles%\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplatesCache

这个 ProjectTemplateCache 目录是通过在 cmd 上运行***devenv.exe /installvstemplates**创建（如果不存在）或更新（如果已经存在） 。此命令在安装 Visual Studio 期间运行。理想情况下，提供项目模板的所有其他安装程序都应运行此命令。但是，有时这可能会由于访问权限而失败。因此手动再次运行它是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:48:23.967

看到这个[问题](https://stackoverflow.com/questions/6887270/visual-studio-2010-missing-asp-net-projects-templates)

> 如果您没有安装 Visual Web Developer 组件，则不会完全安装 ASP.NET 项目模板。自然地，因为安装程序认为它不需要将它们放在那里，因为 ASP.NET 是一个 Web 开发框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T16:25:35.980

修复 MVC 4 安装。它将负责项目模板的安装

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T14:53:55.307

如果安装顺利，没有错误/警告/异常 - 尝试在“新项目”窗口中更改 .NET 框架，确保您正在查看 .NET 框架 4.0 模板。

*   PL

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T23:35:31.453

1）以管理员身份安装。右键单击文件并以管理员身份运行它。

2）卸载并再次以管理员身份安装可以解决您的问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-07T09:12:18.793

跟我一样。确保注册和激活 vs2010 product.if vs 不注册并且不输入任何激活密钥 vs 你不能为它插入 mvc4。

请注册vs2010并重新安装mvc4。然后在创建项目时可以看到mvc4。

# install4j - Install4j - Windows 上的“卸载程序”中不再列出应用程序

> ID：15169977
> 
> 赞同：1
> 
> 时间：2013-03-02T02:22:01.600
> 
> 标签：install4j

我不知道为什么，但我认为这是因为我们添加了屏幕“安装类型”，该应用程序不再列在 Windows“卸载程序”中。我到处寻找我能想到的地方，但似乎找不到任何关于如何修复或调试这个问题的信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:18:58.060

“卸载程序”下的条目由“注册添加/删除项目”操作创建，该操作通常添加在“安装”屏幕下方。您可以在安装后检查“.install4j/installation.log”文件是否包含该操作的任何输出（搜索字符串“RegisterAddRemoveAction”）。

# vim - 在 vim 中使用 'f' 命令搜索的不仅仅是当前行

> ID：15169980
> 
> 赞同：2
> 
> 时间：2013-03-02T02:23:00.063
> 
> 标签：vim

我知道从哲学上讲`f`/`F`命令用于搜索当前行。但是，除了 之外`[LINE]G` `f`，以命令样式跳转到文件中其他位置的最佳方法是什么`f`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T05:10:36.517

将此行添加给您`~/.vimrc`

```
set incsearch 
```

激活增量搜索并使用`/foo<CR>`向前搜索或`?bar<CR>`向后搜索。

请注意，像 一样`fFtT`，`/?`作为 的动作也非常有用`dcsv`。

如果你不介意使用插件，有很多插件是围绕多维的想法设计的，`fFtT`比如[这个](https://github.com/dahu/vim-fanfingtastic)。看看 vim.org。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T02:46:47.077

您可能想使用 vim 插件**EasyMotion**，

*   [github 仓库](https://github.com/Lokaltog/vim-easymotion)
*   [vim在线](http://www.vim.org/scripts/script.php?script_id=3526)

`<Leader>f<char>`将从当前行向前搜索到当前窗口的末尾。 `<Leader>F<char>`将从当前行向后搜索到当前窗口的开头。

适用于所有用途`:help easymotion.txt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T11:30:03.060

Christian Brabandt 的[ft_improved 插件也](http://www.vim.org/scripts/script.php?script_id=3877)扩展了内置`f`/`t`命令以在以下行中进行搜索。

# ruby-on-rails - 简单表单生成器复选框集合自定义 html 输入

> ID：15169985
> 
> 赞同：0
> 
> 时间：2013-03-02T02:23:54.460
> 
> 标签：ruby-on-rails, checkbox, simple-form

使用 simple_form_for，应该如何构建类似颜色选择器的东西？想象一个页面，用户可以通过选中复选框来选择要使用的多种颜色。我想展示一个带有颜色的小框和旁边的复选框，以便用户可以通过选中复选框来选择颜色。像这样的东西

```
<input type="checkbox" name="colors[test]"><div style="background-color: red; width: 20px; height: 20px"></div>
<input type="checkbox" name="colors[test]"><div style="background-color: green; width: 20px; height: 20px""></div>
<input type="checkbox" name="colors[test]"><div style="background-color: blue; width: 20px; height: 20px""></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:46:48.227

您可以将 html 标记添加到集合中并为每个标记定义类。然后相应地设置它们的样式。我假设你有一个`simple_form_for @color`或类似的东西。

```
<%= f.input :test, :label => 'Choose a Color:', :collection =>{'<div class="red colorbox"></div>'.html_safe => 'red', '<div class="green colorbox"></div>'.html_safe => 'green', '<div class="blue colorbox"></div>'.html_safe => 'blue' }, :as => :check_boxes %> 
```

在您的样式表中：

```
/* The colorbox will be under a label with collection_check_boxes class.*/
.collection_check_boxes {
  width: 30px;
  height: 20px;
}

.colorbox {
  width: 20px;
  height: 20px;
}

.red {background: red;}
.green {background: green;}
.blue {background: blue;} 
```

# security - Symfony $controller->getUser() 在非安全区域的替代方案？

> ID：15169987
> 
> 赞同：2
> 
> 时间：2013-03-02T02:24:10.717
> 
> 标签：security, symfony, routing, controller

我目前的项目几乎所有路线都受`form_login`.

两条路线`/login`，`/user/forgot_password`应保持不受保护，以供未经身份验证的用户访问。有什么方法可以阻止经过身份验证的用户访问此路由？

在我的控制器中，我可以检查`$this->getUser()`在非安全区域中`security.context`是否没有填充相应的数据。

配置（security.yml）：

```
security:
    firewalls:
        nonsecured:
            pattern:  ^/(login|user/forgot_password)$
            security: false
        secured:
            pattern:  ^/
            # ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:50:44.480

如果没有活动的防火墙，您将无法获取当前用户信息。以下是解决问题的方法：

*   移除`nonsecured`防火墙，使整个应用程序被活动防火墙覆盖，
*   `anonymous: ~`通过添加到`secured`防火墙启用匿名访问，
*   使用访问控制来决定谁可以到达哪里：

    ```
    access_control:
        - { path: ^/login,                roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/user/forgot-password, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/,                     roles: ROLE_USER } 
    ```

要防止对经过身份验证的用户进行访问`/login`，`/user/forgot-password`您至少有以下两个选项：

*   检查控制器中的用户 - 您建议的方式，或
*   使用`JMSSecurityExtraBundle`'s 表达式：

    ```
    access_control:
        - { path: ^/login,                access: 'isAnonymous()' }
        - { path: ^/user/forgot-password, access: 'isAnonymous()' }
        - { path: ^/,                     access: 'isAuthenticated()' } 
    ```

# java - 由于文本字段，ActionListener 中的空指针？

> ID：15169989
> 
> 赞同：0
> 
> 时间：2013-03-02T02:24:28.627
> 
> 标签：java, swing, nullpointerexception, jtextfield

作为对 java swing GUI 界面和我在学校即将上的几何课程的介绍，我决定为该课程制作一个“特殊”计算器。现在我有一个空指针，我不太明白是什么原因造成的。我编程它的方式在我的其他课程上工作，为什么它在这里不起作用？

无论如何，这是错误所在的两个类，另外两个有效，我不明白我做了什么不同。这是错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ExceptionInInitializerError
    at geohelper.GeoFrame.addToGUI(GeoFrame.java:90)
    at geohelper.GeoFrame.showGUI(GeoFrame.java:42)
    at geohelper.GeoHelper$1.run(GeoHelper.java:13)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:697)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
Caused by: java.lang.NullPointerException
    at geohelper.RPrismListener.<init>(RPrismListener.java:21)
    at geohelper.RecPrism.<clinit>(RecPrism.java:14)
    ... 17 more 
```

这是形状的类（矩形棱镜）

```
package geohelper;

import java.awt.Container;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.event.DocumentListener;

public class RecPrism {

    static final JButton rprismbutton = new JButton("Calculate");
    static final JTextField rplength = new JTextField(10);
    static final JTextField rpwidth = new JTextField(10);
    static final JTextField rpheight = new JTextField(10);
    private static ActionListener al = new RPrismListener(rprismbutton, rplength, rpwidth, rpheight);
    private static DocumentListener dl = new RPrismListener(rprismbutton, rplength, rpwidth, rpheight);

    public double volume(double length, double width, double height) {
        return length*width*height;
    }

    public double surfacearea(double length, double width, double height) {
        return (2*length*width)*(2*length*height)*(2*width*height); 
    }

    public static void addGUI(Container pane) {
        rprismbutton.addActionListener(al);
        rplength.setText("Length");
        rplength.setActionCommand("Calculate");
        rplength.getDocument().addDocumentListener(dl);
        rplength.getDocument().putProperty("Length", "Text Field");
        rplength.addActionListener(al);
        rpwidth.setText("Width");
        rpwidth.setActionCommand("Calculate");
        rpwidth.getDocument().addDocumentListener(dl);
        rpwidth.getDocument().putProperty("Width", "Text Field");
        rpwidth.addActionListener(al);
        rpheight.setText("Height");
        rpheight.setActionCommand("Calculate");
        rpheight.getDocument().addDocumentListener(dl);
        rpheight.getDocument().putProperty("Height", "Text Field");
        rpheight.addActionListener(al);

        pane.add(rprismbutton);
        pane.add(rplength);
        pane.add(rpwidth);
        pane.add(rpheight);
    }
} 
```

这是Listener的类

```
package geohelper;

import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class RPrismListener implements ActionListener, DocumentListener {

    private JButton listenbutton;
    private JTextField listenfield[];
    private String s[];
    private boolean failinput = false;
    private boolean hasinput[] = {false, false, false};
    private double y, z;
    private double x[];
    private RecPrism rp = new RecPrism();

    public RPrismListener(JButton jb1, JTextField Jtxt1, JTextField Jtxt2, JTextField Jtxt3) {
        listenbutton = jb1;
        listenfield[0] = Jtxt1;
        listenfield[1] = Jtxt2;
        listenfield[2] = Jtxt3;
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        for(int d = 0; d < 2; d++) {
            if(hasinput[d]) {
                s[d] = listenfield[d].getText();
                x[d] = Double.parseDouble(s[d]); 
            } else {
                GeoFrame.GLabel.setText("one or more of the text fields haven't been changed.");
                return;
            }
        }
        y = rp.volume(x[0], x[1], x[2]);
        z = rp.surfacearea(x[0], x[1], x[2]);
        GeoFrame.GLabel.setText("The Volume is: " + y + ". The Surface area is: " + z +".");
    }

    @Override
    public void insertUpdate(DocumentEvent de) {
        if(de.getDocument().equals("Length")) {
            hasinput[0] = true;
        } if (de.getDocument().equals("Width")) {
            hasinput[1] = true;
        } if (de.getDocument().equals("Height")) {
            hasinput[2] = true;
        }
    }

    @Override
    public void removeUpdate(DocumentEvent de) {

    }

    @Override
    public void changedUpdate(DocumentEvent de) {

    }

    } 
```

然后我们有了工作广场，它是听众

```
package geohelper;

import java.awt.Container;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Square {

    double result;
    static JButton squarebutton;
    static JTextField squarefield;
    private static ActionListener squarelistener = new SquareListener(squarebutton, squarefield);

    public double area(double side) {
        return side*side;
    }

    public double perimeter(double side) {
        result = side*4;
        return result;
    }

    public static void addGUI(Container pane) {
        squarefield = new JTextField(10);
        squarefield.setActionCommand("Calculate");
        squarefield.addActionListener(squarelistener);
        squarebutton = new JButton("Calculate");
        squarebutton.addActionListener(squarelistener);
        pane.add(squarebutton);
        pane.add(squarefield);
    }

} 
```

聆听者

```
package geohelper;

import javax.swing.*;
import java.awt.event.*;

public class SquareListener implements ActionListener {

    private JButton ListenButton;
    private JTextField ListenField;
    private double x;
    private double y;
    private double z;
    private String s = "1";
    private Square square = new Square();

    public SquareListener(JButton par1, JTextField par2) {
        this.ListenButton = par1;
        this.ListenField = par2;
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        try {
            s = Square.squarefield.getText();
        } catch(NullPointerException npe) {
            npe.printStackTrace();
        }
        x = Double.parseDouble(s);
        y = square.area(x);
        z = square.perimeter(x);
        GeoFrame.GLabel.setText("The area is: " + y + ". The perimeter is: " + z + ".");
    }

} 
```

我想知道的是为什么会生成它以及如何修复它，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T02:29:46.633

这一切都在堆栈跟踪中：

```
Caused by: java.lang.NullPointerException
at geohelper.RPrismListener.<init>(RPrismListener.java:21) 
```

看`RPrismListener`构造函数：

```
public RPrismListener(JButton jb1, JTextField Jtxt1, JTextField Jtxt2, JTextField Jtxt3) {
    listenbutton = jb1;
    listenfield[0] = Jtxt1;
    listenfield[1] = Jtxt2;
    listenfield[2] = Jtxt3;
} 
```

`listenField`从未初始化，所以它是空的。

在构造函数的开头添加：

```
listenfield = new JTextField[3]; 
```

# windows - 如何测试驱动器中的软盘？

> ID：15169991
> 
> 赞同：2
> 
> 时间：2013-03-02T02:24:42.037
> 
> 标签：windows, batch-file

我正在使用带有 Service Pack 3 的 Windows XP Pro。

我有一个 .bat 文件，用于测试各种驱动器是否可用，如果可用，则 bat 文件会编写一个小脚本，供另一个程序（exe 文件）使用。

问题是当 bat 文件发出命令以测试磁盘是否在软盘驱动器中时，Windows 会生成一个错误和一个消息框。Windows 正在做自己的测试并弹出一个消息框，它会停止我的 bat 文件。我不希望 Windows 进行测试。

这是我为演示问题而编写的一个简短的 bat 文件：

```
@ECHO OFF
CLS

REM TEST FOR FLASH DRIVE
IF EXIST G:\NUL (
    ECHO Flash Drive found
)   

REM TEST FOR FLOPPY DISK IN DRIVE
IF EXIST A:\NUL (
    ECHO Floppy in Drive
) 
```

如何在没有 Windows 的情况下测试软盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:54:44.640

您可以删除空运算符，并让它尝试 A: 驱动器。这适用于 windows 7，因此它可能适用于 windows xp。或者您可以使用列出所有活动驱动器的 power shell 命令

```
get-psdrive. 
```

Power shell 能够运行具有更多内置功能的命令，例如 cmd。

# python - 创建 Django 管理中间页面

> ID：15169994
> 
> 赞同：5
> 
> 时间：2013-03-02T02:25:20.243
> 
> 标签：python, django, admin

当我在 django admin 中保存模型时，我需要一种方法来显示中间页面。

我想要完成的是在“保存”模型之后，显示一个页面，其中排列了模型的所有属性，然后有一个按钮，上面写着`Print`. 单击 时，我曾经使用 Jquery 对话框 div 解决此问题`save`。这意味着我在实际保存模型之前显示了设置打印视图，但我现在需要先验证模型。

它就像“删除模型”动作的实现方式。我似乎无法找到从哪里开始寻找。

**编辑：** 我已经开始寻找`django.contrib.admin.options.py`for`response_change`和`response_add`方法。不知道如何覆盖它们。而且它只需要一个特定的模型，所以它不是通用的。我还在 Class ModelAdmin 中发现了模板列表。仍然不确定如何在不破坏管理员的情况下继续进行操作。

**编辑2：** 在下面添加了我的工作解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-14T15:08:31.823

您可以创建一个表单，其中包含一个额外的验证“你确定”步骤的步骤。

在我们的 models.py 中给出这个模型：

```
from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=100) 
```

在 forms.py 中添加一个表单：

```
from django import forms
from .models import Person

class PersonForm(forms.ModelForm):
    i_am_sure = forms.BooleanField(required=False, widget=forms.HiddenInput())

    def __init__(self, *args, **kwargs):
        super(PersonForm, self).__init__(*args, **kwargs)

        if self.errors.get('i_am_sure'):
            # show the 'are you sure' checkbox when we want confirmation
            self.fields['i_am_sure'].widget = forms.CheckboxInput()

    def clean(self):
        cleaned_data = super(PersonForm, self).clean()

        if not self.errors:
            # only validate i_am_sure once all other validation has passed
            i_am_sure = cleaned_data.get('i_am_sure')
            if self.instance.id and not i_am_sure:
                self._errors['i_am_sure'] = self.error_class(["Are you sure you want to change this person?"])
                del cleaned_data['i_am_sure']

        return cleaned_data

    class Meta:
        model = Person 
```

如果你想在 Django admin 中使用它。在您的 admin.py 中指定此表单：

```
from django.contrib import admin
from .forms import PersonForm
from .models import Person

class PersonAdmin(admin.ModelAdmin):
    form = PersonForm

admin.site.register(Person, PersonAdmin) 
```

但是请注意，在 Django 管理表单上存在隐藏输入的错误。[这个 Stack Overflow question 有一个解决方案](https://stackoverflow.com/a/18235005/509706)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T09:37:52.027

您可以将视图和 url 添加到您的 ModelAdmin 并覆盖您的 modeladmin 添加视图以进行相应的重定向。

```
class MyModelAdmin(admin.ModelAdmin):
    def get_urls(self):
        urls = super(MyModelAdmin, self).get_urls()
        my_urls = patterns('',
            (r'^my_view/$', self.my_view)
        )
        return my_urls + urls

    def my_view(self, request):
        # custom view which should return an HttpResponse
        pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:22:10.647

所以，经过一些编码后，我得到了它的工作。

我的模型管理员现在看起来与此类似

```
class MyModelAdmin(admin.ModelAdmin):
    def get_urls(self):
        urls = super(MyModelAdmin, self).get_urls()
        my_urls = patterns('',
            (r'^my_view/$', self.my_view)
        )
        return my_urls + urls

    def my_view(self,request,pk):
        from django.shortcuts import render_to_response
        from django.template import RequestContext

        object = Model.objects.get(pk=pk)
        model_dict = model_object.__dict__
        return render_to_response('admin/app_name/model/model_view.html',locals(),context_instance=RequestContext(request))

    @csrf_protect_m
    @transaction.commit_on_success
    def add_view(self, request, form_url='', extra_context=None):
        "The 'add' admin view for this model."
        model = self.model
        opts = model._meta

        if not self.has_add_permission(request):
            raise PermissionDenied

        ModelForm = self.get_form(request)
        formsets = []
        inline_instances = self.get_inline_instances(request)
        if request.method == 'POST':
            form = ModelForm(request.POST, request.FILES)
            if form.is_valid():
               new_object = self.save_form(request, form, change=False)
               form_validated = True
            else:
               form_validated = False
               new_object = self.model()
            prefixes = {}
            for FormSet, inline in zip(self.get_formsets(request), inline_instances):
               prefix = FormSet.get_default_prefix()
               prefixes[prefix] = prefixes.get(prefix, 0) + 1
               if prefixes[prefix] != 1 or not prefix:
                  prefix = "%s-%s" % (prefix, prefixes[prefix])
               formset = FormSet(data=request.POST, files=request.FILES,
                              instance=new_object,
                              save_as_new="_saveasnew" in request.POST,
                              prefix=prefix, queryset=inline.queryset(request))
               formsets.append(formset)
            if all_valid(formsets) and form_validated:
               self.save_model(request, new_object, form, False)
               self.save_related(request, form, formsets, False)
               self.log_addition(request, new_object)
               log.info('The new object has %s id' % new_object.id)
               return HttpResponseRedirect('/admin/draws/contest/contest_view/%s' % new_object.id)  <-- changed to my new one
               .................
               ................. 
```

在其中创建了一个 html 模板`templates/admin/app_name/model_view.html`，就是这样！

# java - 使用 Android Maps API V2 的 Android 应用程序拒绝启动

> ID：15169995
> 
> 赞同：2
> 
> 时间：2013-03-02T02:25:23.943
> 
> 标签：java, android, google-maps

我的应用程序使用 android api v2 存在问题，因为它无法启动它只会一直说“不幸的是，app_name 已停止工作。”，我已经按照谷歌发布的指南中的每一步，我也在 StackOverflow 中查找了类似的问题并尝试了解决方案，但不幸的是似乎没有一个有效。所以这就是我向你们寻求帮助的原因。

**MainActivity.java**

```
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.GoogleMap;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

SupportMapFragment mMap;
GoogleMap googleMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mMap = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);

            googleMap = mMap.getMap();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.appname.name"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<permission
     android:name="com.appname.name.permission.MAPS_RECEIVE"
     android:protectionLevel="signature"/>
   <uses-permission android:name="com.appname.name.permission.MAPS_RECEIVE"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.appname.name.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="api_key"/>
</application>

</manifest> 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment"/>
</RelativeLayout> 
```

**LogCat（错误代码）**

```
03-01 20:20:20.258: W/dalvikvm(1989): VFY: unable to resolve check-cast 465 (Lcom/google/android/maps/MapView;) in Lcom/cornboyzmaps/googlemapsA/MainActivity;
03-01 20:20:20.258: D/dalvikvm(1989): VFY: replacing opcode 0x1f at 0x0014
03-01 20:20:20.268: D/dalvikvm(1989): DexOpt: unable to opt direct call 0x0cdf at 0x34 in Lcom/cornboyzmaps/googlemapsA/MainActivity;.onCreate
03-01 20:20:20.458: D/AndroidRuntime(1989): Shutting down VM
03-01 20:20:20.458: W/dalvikvm(1989): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-01 20:20:20.488: E/AndroidRuntime(1989): FATAL EXCEPTION: main
03-01 20:20:20.488: E/AndroidRuntime(1989): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cornboyzmaps.googlemapsA/com.cornboyzmaps.googlemapsA.MainActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.os.Looper.loop(Looper.java:137)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at dalvik.system.NativeStart.main(Native Method)
03-01 20:20:20.488: E/AndroidRuntime(1989): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.Activity.setContentView(Activity.java:1881)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at com.cornboyzmaps.googlemapsA.MainActivity.onCreate(MainActivity.java:21)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.Activity.performCreate(Activity.java:5104)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-01 20:20:20.488: E/AndroidRuntime(1989):     ... 11 more
03-01 20:20:20.488: E/AndroidRuntime(1989): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.Fragment.instantiate(Fragment.java:592)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.Fragment.instantiate(Fragment.java:560)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.Activity.onCreateView(Activity.java:4709)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
03-01 20:20:20.488: E/AndroidRuntime(1989):     ... 21 more
03-01 20:20:20.488: E/AndroidRuntime(1989): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.google.android.gms.maps.MapFragment" on path: /data/app/com.cornboyzmaps.googlemapsA-2.apk
03-01 20:20:20.488: E/AndroidRuntime(1989):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-01 20:20:20.488: E/AndroidRuntime(1989):     at android.app.Fragment.instantiate(Fragment.java:582)
03-01 20:20:20.488: E/AndroidRuntime(1989):     ... 24 more
03-01 20:25:20.778: I/Process(1989): Sending signal. PID: 1989 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T12:34:15.817

我试过运行这个应用程序，它对我来说很好。请记住将项目链接到您的 Google Play 服务项目，如此处[所述](http://developer.android.com/google/play-services/setup.html)。

您可以从[https://github.com/apacha/maps_demo下载它](https://github.com/apacha/maps_demo)

# php - 如何将列记录与表头关联？

> ID：15169996
> 
> 赞同：1
> 
> 时间：2013-03-02T02:25:44.723
> 
> 标签：php, mysql

我有一个 mysql 表，其中一个名为的列`parking space`中有一个数字。但是，对于某些记录，“停车位”列是空的。现在，我只想在页表中调用此列，其中列标题的编号从 1 到 200（第一列：1；第二列：2；....）所以，如果有值 '12' 在'停车位'-列，然后这将显示在'12'列中，依此类推，如果没有输入数字，则页表中的列应留空。如何将“停车位”中的数字与该页表相关联？

```
...
<?php           
$pagetable=array('1','2','3','4','5','6');//...until 200
foreach($pagetable as $value){
?>
<table border="1px" cellspacing="1" cellpadding="1">
 <tr>
  <th>
   <?php echo $value ?>
  </th>
 </tr>
<?php           
}
include("dbinfo.inc.php");
include_once("config.php");

$result = mysql_query("SELECT * FROM contacts ORDER BY park ASC");
$results = mysql_num_rows($result);
 if ($results > 0){
    $num=mysql_numrows($result);
    $i=0;
  while ($i < $num) {
   $id=mysql_result($result,$i,"id");
   $park=mysql_result($result,$i,"park");

 ?>
  <tr>
   <td style="background-color:;">
 <?php echo $park; ?>
     <br>
 <?php if($park!=''){  ?>
 <a href="single.php?&id=<?php echo $id; ?>"><?php echo $id; ?></a>
<?php
 } 
?>
   </td>
  </tr>
<?php 
 $i++;
}
} 
?> 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:35:01.487

尝试这个：

```
<?php

include("dbinfo.inc.php");
include_once("config.php");

$spaces = range(1, 200);
$results = mysql_query("SELECT * FROM contacts ORDER BY park ASC");
$results_count = mysql_num_rows($result);

if ($results_count > 0) {
   for ($i = 0; $i < $results_count; $i++) {
       $parks[] = mysql_result($results, $i, "park");
   }
}
?>

<table>
   <tr>
     <?php foreach ($spaces as $space): ?>
     <td><?php echo $space ?></td>
     <?php end foreach ?>
   </tr>
   <tr>
     <?php foreach ($parks as $park): ?>
     <td><?php if ($park > 0) { echo "$space"; } else { echo "&nbsp;"; } ?></td>
     <?php end foreach ?>
   </tr>
</table> 
```

从这个开始，告诉我你得到了什么。

好的，我得到它改变了一点。现在它显示了从 1 到 200 的所有值，它显示了停车位值，但这些值与数字无关。在我看来，它是根据 id 放置它们的，例如在我的桌子上，停车位 165 上的客户的 id 为 4，因此它没有将 165 放置到 165，而是将 165 放置到 4

```
<?php
include("dbinfo.inc.php");
include_once("config.php");

$spaces = range(1, 200);
$results = mysql_query("SELECT * FROM contacts");
$results_count = mysql_num_rows($results);

if ($results_count > 0) {
for ($i = 0; $i < $results_count; $i++) {
   $parks[] = mysql_result($results, $i, "park");
}
}
?>

<table>
 <tr>
  <?php foreach ($spaces as $space){ ?>
  <td><?php echo $space; ?></td>
  <?php }  ?>
 </tr>
 <tr>
  <?php foreach ($parks as $park){ ?>
  <td><?php if ($park!='') { echo $park.'<br>';} else { echo "&nbsp;"; } ?></td>
  <?php  }?>
 </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:17:06.717

有两种方法，你可以这样做。

1.  在数据库表上创建所有 200 行并对其进行查询。这将省略几乎所有的头痛得到你想要的。

2.  执行从 1 到 200 的 for 循环，并比较活动项目是否存在于 mysql 结果中。为此，您需要在数据库中输入一个连续的数字条目来单独标识每一列。

    > 我的意思是？中的第 1 列应该有相应的记录，指示`1`其记录中的某处。

    这是一个例子：

    ```
    $result = mysql_query("SELECT * FROM contacts ORDER BY park ASC");
    $results = mysql_num_rows($result);
    if ($results > 0) {
        $num=mysql_numrows($result);
        $rows = array();
        while($row = mysql_fetch_row($result)) {
            $rows[$row['id']] = $row;
       });
       //Now process it
    } 
    ```