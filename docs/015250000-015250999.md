# StackOverflow 问答 15250000-15250999

# asp.net - 如何在不影响安全性的情况下使用 Server.htmlEncode / Server.htmlDecode？

> ID：15250006
> 
> 赞同：2
> 
> 时间：2013-03-06T14:30:43.773
> 
> 标签：asp.net, vb.net, html-encode

**问题**

如何在不影响安全性的情况下将 html 代码提交到文本框并作为文本输出？

这是我目前正在尝试的：

**数据进入（提交到文本框）**

```
Dim txtInput As String = Server.HtmlEncode(Me.txtInput.Text) 
```

**数据出来（阅读页面上的文字）**

```
txtOutput.Text = Server.HtmlDecode(MyText) 
```

所需的输出格式与最初输入的格式相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:57:55.843

您应该在文本框中设置 HtmlEncode 文本：

`txtOutput.Text = Server.HtmlEncode(MyText)`

以及您从文本框中获取的 HtmlDecode 文本：

`MyText = Server.HtmlDecode(txtOutput.Text)`

如果您将数据存储在 sql 中，那么我建议您也使用[参数化查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)。它为您处理大多数安全问题，例如 SQL 注入。

# c - 第三个进程“wc”不起作用

> ID：15250008
> 
> 赞同：0
> 
> 时间：2013-03-06T14:30:46.277
> 
> 标签：c, fork

我目前对第三个进程有问题，因为每次运行程序时它都不会工作。和`exit()`部分的建议，因为正在打印多个子进程！有什么建议么？

我真的很感激！

```
main(){
    pid_t son;
    int i;  
    for (i=0; i<3; i++){
        switch (i){
            case 0:
            son = fork();
                if (son<0){
                    fprintf(stderr, "Fork failed!");
                    //exit(-1);
                }else if (son == 0){
                    execlp("/bin/cat", "cat", "wctrial.txt", NULL);
                }else{
                wait(NULL);
                printf("Child process completed!");
                //exit(0);
                }
            case 1:
            son = fork();
                if (son<0){
                    fprintf(stderr, "Fork failed!");
                    //exit(-1);
                }else if (son == 0){
                    execlp("/bin/mkdir", "mkdir", "mydirectory", NULL);
                }else{
                wait(NULL);
                printf("Child process completed!");
                //exit(0);
                }
            case 2:
            son = fork();
                if (son<0){
                    fprintf(stderr, "Fork failed!");
                    //exit(-1);
                }else if (son == 0){
                    execlp("/bin/wc","wc","wctrial.txt", NULL);
                }else{
                wait(NULL);
                printf("Child process completed!");
                //exit(0);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:38:48.123

至少我没有看到`break`each 的末尾`case`。

在程序的情况下`0`会贯穿你所有的`case`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:18:30.340

下面是我的建议，

> 1）建议一旦完成就清理子进程，如下所示，

```
 }else if (son == 0){
        execlp("/bin/mkdir", "mkdir", "mydirectory", NULL);
        _exit(0);
 } 
```

> 2nd) 在每个 switch 语句后做 break
> 
> 3rd) 并在输入 execlp 例程之前使用“whereis”命令验证可执行文件的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:00:09.610

实际上`break`是如果案例1执行然后2,3也会执行的问题。（*但这不是`wc`不工作*的问题）

> **为什么`wc`不工作？**

因为`wc`命令路径！

在您的 wc 系统路径中可能不是：`"/bin/wc"`

在系统中搜索命令路径，`wc`例如：

```
:~$ whereis wc
wc: /usr/bin/wc 
```

和改变

```
 execlp("/bin/wc","wc","wctrial.txt", NULL);
           ^ 
```

作为

```
 execlp("/usr/bin/wc","wc","wctrial.txt", NULL);
          ^ 
          // actually not exactly this but one that appears in your system. 
```

试试看！！

# android - 我正在制作儿童教育游戏，最好的选择是什么？

> ID：15250009
> 
> 赞同：0
> 
> 时间：2013-03-06T14:30:47.970
> 
> 标签：android

我正在开发一个可以帮助孩子接受教育的应用程序。该应用程序将包括简单的拖放活动。我已经在互联网上搜索引擎并找到了一些相当不错的引擎，但想知道仅使用 Android 本身是否足以满足这些要求不高的简单活动？

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:50:30.580

简单的拖放活动在 android、iOS 或 Windows 手机中不会成为问题。老实说，我会更关心哪些平台更有可能被孩子们使用。例如，在南非，大多数孩子都有黑莓，甚至没有触摸屏，因为数据太贵了。

看看这个： [http ://www.vogella.com/articles/AndroidDragAndDrop/article.html](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)

和

[http://www.javacodegeeks.com/2011/12/android-drag-and-drop-tutorial.html](http://www.javacodegeeks.com/2011/12/android-drag-and-drop-tutorial.html)

还可以查看 android 开发者文档

# c# - wpf over activeX

> ID：15250011
> 
> 赞同：5
> 
> 时间：2013-03-06T14:30:56.867
> 
> 标签：c#, wpf, vlc

我正在尝试在包含嵌入 VLC 的 activeX 控件的 WindowsFormsHost 上覆盖按钮。我遇到的问题是activeX总是在wpf之上。有什么方法可以让 wpf 控制 activeX 控件？

VLC 控件似乎也不支持渲染到位图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:41:00.410

我终于找到了解决方案。popup 原语也是一个始终位于顶部的元素，可以放置在 vlc 控件上。它有点破解，但它得到了我需要的覆盖。我的播放器 xaml 看起来像这样

```
<grid>
    <WindowsFormsHost x:Name="Host"
                      Height="200"
                      Width="200" />
    <Border x:Name="Anchor"
            Height="0"
            Width="0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top" />
    <Popup Width="{Binding ElementName=Host,Path=Width}"
           Height="{Binding ElementName=Host,Path=Height}"
           PlacementTarget="{Binding ElementName=Anchor}"
           AllowsTransparency="True"
           IsOpen="True">
        <Border Background="#30808080"
                Width="{Binding ElementName=Host,Path=Width}"
                Height="{Binding ElementName=Host,Path=Height}">
            <Button Content="Start"
                    Height="20"
                    Width="60"
                    Click="button1_Click"/>
        </Border>

    </Popup>
</grid> 
```

上面在包含按钮的 vlc 播放器上放置了一个浅灰色透明层。上面没有说明窗口是否被调整大小或移动，但是在控件上放置一些 wpf 的问题已经解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:08:57.787

简短的回答：没有。

摘自[MSDN](http://msdn.microsoft.com/en-us/library/ms744952.aspx)：

> 在 WPF 用户界面中，您可以更改元素的 z 顺序以控制重叠行为。托管的 Windows 窗体控件在单独的 HWND 中绘制，因此它始终绘制在 WPF 元素之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T16:06:13.013

对于 VLC，VideoLan.Net 位于：http: [//vlcdotnet.codeplex.com/](http://vlcdotnet.codeplex.com/) ，它允许将视频输出到图像。

# git - git log --graph 输出中出现意外的下划线

> ID：15250012
> 
> 赞同：9
> 
> 时间：2013-03-06T14:30:59.587
> 
> 标签：git, git-log

在我的 Linux 内核副本上运行`git log --graph`时，我在图中看到一个看起来不应该存在的下划线。

这个下划线是什么意思？

因此，我正在使用的特定命令是：

```
git log --graph --decorate --pretty=oneline --abbrev-commit --all --date-order 
```

输出如下所示：

[![git log --图形输出](../Images/6c3a541f02f03e985b96d27fe4d21bf0.png)](https://i.stack.imgur.com/E4xNk.png)

我试过在 gitk 的图表中查看这个区域，但那里似乎没有任何不寻常的地方。

我不*认为*这只是显示一个分支点，因为我希望它呈现在右侧，而不是左侧（左侧应与上图匹配）：

```
I see:        I'd expect for
              normal branching:

 \ \ \         \ \ \
 / / /         / / /
| _ /         | / /
|  /          |/ /
| |           | |
| |           | | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:40:27.417

从`ack "'_'"`Git 源代码看来，下划线打印在函数内部的第[`graph.c`1120 行](https://github.com/git/git/blob/master/graph.c#L1120)`graph_output_collapsing_line`：

```
/*
 * Output out a line based on the new mapping info
 */
for (i = 0; i < graph->mapping_size; i++) {
    int target = graph->new_mapping[i];
    if (target < 0)
        strbuf_addch(sb, ' ');
    else if (target * 2 == i)
        strbuf_write_column(sb, &graph->new_columns[target], '|');
    else if (target == horizontal_edge_target &&
         i != horizontal_edge - 1) {
            /*
             * Set the mappings for all but the
             * first segment to -1 so that they
             * won't continue into the next line.
             */
            if (i != (target * 2)+3)
                graph->new_mapping[i] = -1;
            used_horizontal = 1;
        strbuf_write_column(sb, &graph->new_columns[target], '_');
    } else {
        if (used_horizontal && i < horizontal_edge)
            graph->new_mapping[i] = -1;
        strbuf_write_column(sb, &graph->new_columns[target], '/');

    }
} 
```

但是想了一会儿，还是觉得没什么意思。下划线是从当前分支向左穿过不相关分支的符号，以到达更左侧的分支点。这可以在您的屏幕截图的其他地方看到，但这个特殊的下划线看起来确实丢失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T15:03:18.420

对我来说，这似乎是一个渲染人工制品。很可能，控制台输出有一些逻辑来防止这样的事情

```
/ /
| / 
```

不会发生，因为此代码段不会准确显示发生分支操作的位置。因此，设计师可能选择了

```
/ /
| _ 
```

反而。

但我在这里可能错了，这似乎是应该在代码中检查出来的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-30T18:46:10.750

非常老的问题，但是今天我在为 git graph 输出编写解析器时遇到了这个问题。起初我还认为它直接连接到左侧的分支`_`，但在尝试了一些更大的存储库后，我发现它的意思是：连接到左侧的**一个分支。**`|`为什么它被渲染成这样对我来说完全是个谜。请参阅下面的示例。

`git log --graph --date-order --all --pretty=format:"%h %p %s"`

[![git_weirdness](../Images/562c5ee21a958fbf9232ec2ff6962b00.png)](https://i.imgur.com/b8xtIQB.png)

# sql-server-2008 - MDX 中的交叉点

> ID：15250014
> 
> 赞同：2
> 
> 时间：2013-03-06T14:31:10.663
> 
> 标签：sql-server-2008, ssas, mdx, olap

我最近在我们的 SQL Server 2008 Analysis Services Cube 中遇到了一个问题。假设您有一个包含订单和产品的简单销售数据仓库。每个订单可以关联多个产品，每个产品可以包含在多个订单中。因此，数据仓库至少包含 3 个表：一张用于 Products，一张用于 Orders，一张用于参考表，对两者之间的 n:n 关系进行建模。我希望我们的立方体回答的问题是：有多少订单同时包含产品 x 和产品 y？在 SQL 中，这很容易：

```
select orderid from dbo.OrderRefProduct
where ProductID = 1
intersect
select orderid from dbo.OrderRefProduct
where ProductID = 3 
```

由于我相当精通 SQL，但在 MDX 中是新手，我一直无法在 MDX 中实现它。我尝试过使用不同的计数度量、MDX 函数`intersect`和`nonempty`子多维数据集。我还尝试在逻辑上（通过将维度添加到多维数据集两次）以及物理上（通过复制数据源表和维度）复制维度。

在[http://www.zeitz.net/thts/intersection.zip](http://www.zeitz.net/thts/intersection.zip)上，您可以下载 25kB 大小的 zip 文件，其中包含带有一些测试数据的 SQL 脚本和使用这些表的 Analysis Services 解决方案。

我们使用的是 SQL Server 2008 R2 及其对应的 Analysis Services。性能考虑并不那么重要，因为与该多维数据集中包含的其他度量值组（数十亿行）相比，数据量相当低（数百万行）。

最终目标是能够在标准 OLAP 中使用所需的功能（可以自定义计算度量），因为 Excel 是我们的主要前端，我们的客户希望从维度列表中选择他们的产品并获得正确的结果立方体测量。但即使是一个可以工作的独立 MDX-Query 也会有很大帮助。

谢谢！

**编辑 3 月 12 日** 我错过了什么还是无法以某种方式解决？

如果它有助于构建 mdx，这是另一种在 sql 中使用子查询获取结果的方法。它可以进一步嵌套。

```
select distinct b.orderid from
(
select distinct orderid from dbo.OrderRefProduct
where ProductID = 1
) a
join dbo.OrderRefProduct b on (a.orderid = b.orderid)
where ProductID = 3 
```

我在 mdx 中尝试了类似的子立方体，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:52:46.737

我试了一下 - 你可以从这里下载我的解决方案：

[http://sdrv.ms/YWtMod](http://sdrv.ms/YWtMod)

我已将您的 Fact 表的副本添加为“交叉引用”，将 Product1 维度别名为“交叉引用”，将维度引用设置为独立于现有关系的 Product，并指定多对多关系。

它在 Excel 中返​​回正确的答案（附样本）。

您可以根据需要多次扩展该模式。

祝你好运！麦克风

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:39:20.540

在 SQL 中处理这个问题的另一种方法（我知道它有效，但我没有测试这个查询）是使用双重否定

```
select distinct orderid 
from X 
where TK NOT in (
   select TK 
   from X x_alias 
   where productid NOT in (id1,id2)
) 
```

我很确定你可以在 MDX 中做同样的事情。

# objective-c - 试图实现 [self.delegate.view addSubview:]

> ID：15250016
> 
> 赞同：1
> 
> 时间：2013-03-06T14:31:12.043
> 
> 标签：objective-c, uiviewcontroller, delegates

我正在尝试制作一个处理 iAd 的可重用类。

在我的`.h file`我做以下：

```
#import <iAd/iAd.h>

@protocol AdHelperDelegate;

@interface AdHelper:NSObject<ADBannerViewDelegate>

@property (strong) id<AdHelperDelegate> delegate;
@property (nonatomic, strong) ADBannerView *iAdBannerView;
...
@end

@protocol AdHelperDelegate;
@end 
```

然后在我`.m file`实施 iAd 横幅：

```
-(void)showBanner
{
    self.iAdBannerView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    self.iAdBannerView.frame = CGRectOffset(self.iAdBannerView.frame, 0, 361);
    self.iAdBannerView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
    self.iAdBannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    self.iAdBannerView.delegate = self;
    [self.delegate.view addSubview:self.iAdBannerView];
} 
```

我当然也实现了委托方法`-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error`

我打算在我的项目中调用`AdHelper`一个`UIViewController`类似的东西：

```
AdHelper *ah = [[AdHelper alloc] init];
ah.delegate = self;
[ah showBanner]; 
```

问题是编译器说：`Property 'view' not found on object of type 'id<AdHelperDelegate>'`
我有办法访问委托的视图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:34:05.703

您需要手动转换视图控制器，以便编译器知道您拥有什么样的对象：

```
[((MyViewController *)self.delegate).view addSubview:self.iAdBannerView]; 
```

您还可以将视图的声明从 更改`id<AdHelperDelegate>`为`UIViewController<AdHelperDelegate>*`，这将消除在这种情况下进行强制转换的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:34:30.453

您需要`id`将`UIViewController`. 编译器无法知道 id 具有 view 属性。

```
[((UIViewController *)self.delegate).view addSubview:self.iAdBannerView]; 
```

# javascript - 如何在我的外部 javascript 文件中调用 scala 函数？

> ID：15250019
> 
> 赞同：2
> 
> 时间：2013-03-06T14:31:23.023
> 
> 标签：javascript, jquery, function, scala

我在控制器文件中有我的 scala 函数，并想在我的外部 javascript 文件中的 if 语句中使用它。

这是我的scala函数：

```
def checkExistingEmail(email: String):Boolean = {
   val editorEmails = editorRepo.allWithEmail(email)
   val initatorEmails = initiatorRepo.allWithEmail(email)
   val emailCount = editorEmails.length + initatorEmails.length

   return (emailCount == 0)
} 
```

我想在这个 javascript 函数中使用我的 if 条件：

```
$("#fbLoginButton").click(function() { 
    if(//HERE IS WHERE I WANT TO USE MY SCALA FUNCTION)
    FB.login(); 
    }); 
```

如何在我的外部 javascript 文件中调用 scala 函数？:)

# android - 在 Galaxy Nexus (Android 4.1) 上显示选项菜单按钮

> ID：15250024
> 
> 赞同：5
> 
> 时间：2013-03-06T14:31:31.293
> 
> 标签：android, galaxy-nexus

我在我的应用程序中使用选项菜单。但是当我在 Galaxy Nexus 上安装应用程序时，我看不到选项菜单，因为默认情况下它没有选项菜单按钮。如何在我的应用程序中仅显示 Galaxy Nexus 的选项菜单按钮？用其他手机没问题，我可以得到选项菜单。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T14:45:58.640

在 Android 3.0 中，Google 从拥有专用菜单键切换到使用`ActionBar`for menu 功能。如果您的构建目标是 3.0 或更高版本，您的菜单将默认使用`ActionBar`.

如果手机上有菜单键，则通常由操作栏中的三个点图标显示的任何超出选项都将显示为菜单按钮。如果手机上没有菜单键，所有选项都会显示在操作栏上。因为菜单键正在消失，所以鼓励您`ActionBar`在 3.0 及更高版本中使用该类作为您的菜单。

现在，在没有菜单键的新平台上运行的旧应用程序将在最近的应用程序按钮旁边生成一个假菜单键。此临时菜单键仅在您的构建目标为 2.3.4 或更低版本时才会出现，因为它只是出于向后兼容性的原因而存在。（编辑：构建目标应该小于或包括 API 13）

在您的情况下，您应该使用`ActionBar`您的菜单，因为您是针对较新版本的 Android 构建的。如果您担心向后兼容性，那么您可以随时利用 ActionBarSherlock 之类的库在旧平台上使用操作栏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T14:44:32.953

你需要考虑为什么你需要一个“选项”按钮——这是一个旧的、糟糕的模式，它已经被`ActionBar`真正更好的模式所取代。

但是您可能出于客户原因需要它（例如我需要为客户保留它）。如果是这种情况，那么您可以按照我的以下建议（从错误提到的“操作栏”的原始内容略微编辑）

* * *

您可以将您`build target`的版本设置为 ICS 之前的版本（即达到并包括 API 13 / HoneyComb 3.2）。

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="13" /> 
```

这将使系统使用兼容模式设置，将`overflow`图标插入手机的底部按钮栏中 - 这应该提供您所追求的功能。例如，按下此按钮与按下三星 Galaxy S2 上的“菜单”按钮具有相同的响应。

* * *

在这里您可以看到兼容性“选项”按钮，以及按下它时显示的菜单：

![Galaxy Nexus 上的 ICS 兼容性选项按钮](../Images/cb6abad1eb4eba10e0103f2b603e0217.png)

* * *

## 笔记：

正如其他评论员所提到的，您应该考虑更好的`ActionBar`模式选择。如果你想要向后兼容，那么我推荐 Action Bar Sherlock 库。

但是，如果您正在寻找快速解决方案，或者客户负担不起大的重构来迁移到 Action Bar 模式，那么这就是实现它的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T14:44:42.000

如果您使用[Action Bar](http://developer.android.com/design/patterns/actionbar.html)，选项菜单将被溢出替换。如果没有，你必须自己实现一个按钮，在你自己的应用程序的某个地方。

菜单按钮（也称为*耻辱的兼容性菜单*）仅显示在系统栏中，用于面向 API 13 或更低版本的应用程序

这是一种检查设备是否具有硬件菜单键的方法。

```
// Menu key
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    hasPermanentMenuKey = hasPermanentMenuKey(context.getApplicationContext());
}
else {
    // No way to know for sure...
    // All devices before Honeycomb should have a menu key. 
    // Honeycomb device usually don't have one
    hasPermanentMenuKey = Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB;
}

@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
private boolean hasPermanentMenuKey(Context context) {
    return ViewConfiguration.get(context).hasPermanentMenuKey();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T14:37:57.787

选项菜单从 android 版本 3.x (Honeycomb) 停止。因此，选项菜单按钮并非必须出现在最新手机上。所以去行动吧。您可以使用`Sherlock ActionBar`库来支持所有平台的操作栏。

**更新：**用户**ActionBarCompat**

# netlogo - 在 Netlogo 中检查周围的补丁颜色

> ID：15250025
> 
> 赞同：2
> 
> 时间：2013-03-06T14:31:31.747
> 
> 标签：netlogo

我将如何检查每个补丁上方、下方、左侧和右侧的补丁颜色？我知道我会将它嵌入到询问补丁 [在此处插入代码] 语句中，但我不知道该询问语句中应该放什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:16:08.423

让海龟展示它们周围的 4 个色块的颜色

```
ask turtles [show [pcolor] of neighbors4] 
```

# c# - 如何对列表进行排序 其中 T 是我自己的班级，我想按 class.someString 排序

> ID：15250040
> 
> 赞同：1
> 
> 时间：2013-03-06T14:32:15.847
> 
> 标签：c#, .net, list, sorting

所以我有一堂课

```
Class MyClass{
    string myString;

    MyClass(string newString){
    myString = newString;
    }
} 
```

我有这些的清单

```
List<MyClass> myList = new List<MyClass>();
myList.Add(new MyClass(some string...); 
```

我可以使用 List.Sort 根据类字段的值对对象进行排序吗？如果是这样怎么办？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:34:00.303

您可以使用`Enumerable.OrderBy`：

```
myList = myList.OrderBy(x => x.myString).ToList(); 
```

但请注意，这会基于旧列表创建一个新列表。在许多情况下，这不会产生影响，但需要注意这一点。

* * *

或者，由于您仅限于 .NET 2.0，您可以定义自定义函数进行比较

```
class MyClass
{
    string myString;

    ...

    public static int CompareByMyString(MyClass x, MyClass y)
    {
        return String.Compare(x.myString, y.myString);
    }
} 
```

并将其提供给[`List.Sort`](http://msdn.microsoft.com/en-US/library/w56d4y5z%28v=vs.80%29.aspx)：

```
myList.Sort(MyClass.CompareByMyString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:57:10.717

您可以从 IComparable 继承。这方面的一个例子是：

```
public class MyClass : IComparable
    {
        public int Day { get; set; }
        public int Hour { get; set; }

        public int CompareTo(object obj)
        {
            if (obj is MyClass)
            {
                MyClass slot = (MyClass)obj;

                if (Day < slot.Day)
                {
                    return -1;
                }
                else if (Day > slot.Day)
                {
                    return 1;
                }
                else
                {
                    if (Hour < slot.Hour)
                    {
                        return -1;
                    }
                    else if (Hour > slot.Hour)
                    {
                        return 1;
                    }
                    else
                    {
                        return 0;
                    }
                }
            }
            else
            {
                throw new ArgumentException("Object is not MyClass");
            }
        }

        public override int GetHashCode()
        {
            unchecked
            {
                return Day.GetHashCode() ^ Hour.GetHashCode();
            }
        }

        public override bool Equals(object obj)
        {
            if (obj is MyClass)
            {
                return this == (MyClass)obj;
            }
            else
            {
                throw new ArgumentException("Object is not MyClass");
            }
        }

        public static bool operator ==(MyClass a, MyClass b)
        {
            return a.CompareTo(b) == 0;
        }

        public static bool operator !=(MyClass a, MyClass b)
        {
            return a.CompareTo(b) != 0;
        }

        public static bool operator <(MyClass a, MyClass b)
        {
            return a.CompareTo(b) < 0;
        }

        public static bool operator >(MyClass a, MyClass b)
        {
            return a.CompareTo(b) > 0;
        }

        public static bool operator <=(MyClass a, MyClass b)
        {
            return a.CompareTo(b) <= 0;
        }

        public static bool operator >=(MyClass a, MyClass b)
        {
            return a.CompareTo(b) >= 0;
        }
    } 
```

然后你可以这样做：

```
List<MyClass> listOfStuff = new List<MyClass>();}
// Add some stuff to the list E.G. 
listOfStuff.add(new MyClass());
// Sort the list
listOfStuff.sort(); 
```

# c++ - 存储在向量中的表达式的惰性求值

> ID：15250042
> 
> 赞同：1
> 
> 时间：2013-03-06T14:32:17.567
> 
> 标签：c++, vector, operator-overloading

为简单起见，我将对整个问题进行粗俗化。

我正在研究仅使用运算符 OR 和 AND（目前）的布尔算术。

我的布尔表达式存储在一个变量和运算符交替的向量中（类似于“a OR b”的 [a, ||, b]）。

我想知道是否可以像我写的那样链接我的向量：

```
std::vector<xxx> v = {true, &&, (, false, ||, true, )};
// result = true && (false || true) = true
bool result = vector[0] vector[1] vector[2] vector[3] vector[4] vector[5] vector[6]; 
```

我知道存在算术评估算法（例如 Shunting-yard），但我想避免使用它们并改用 c++ 评估器。我想我可以重载运算符来处理简单的表达式，但是一旦括号出现，我就卡住了。

如果已经提出并回答了这个问题，我深表歉意，我只是不知道在我的搜索中使用什么关键字！

提前谢谢你，即使只是一个线索也会很好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:04:27.947

您可以使用表达式模板来执行此操作。您的一些布尔文字必须像`bool_(true)`使用适当的运算符创建自定义对象一样，但除此之外，就好像您真的使用了 C++。

当然，通常只使用 lambda 或为此编写函数更简单，除非您需要在运行时内省/修改树或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:51:16.220

首先，您不能真正存储*任何*类型`vector`的原始 C++ 运算符或语法元素，所以，等等。*`(``*`*

 *不过，您可以将它们存储为文字：

```
std::vector<std::string> expression = { "2", "+", "3" }; 
```

但是，不能为此使用“c++ 评估器”；C++ 是一种编译语言，因此不可能在运行时使用相同的逻辑（从技术上讲，它可以通过 LLVM 之类的东西来实现，但它肯定是一种矫枉过正）。在这种情况下，您最好使用自定义评估器。

在编译时也可以使用 TMP，但我不确定这是否是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:15:24.573

您可以使用 c++ 源代码生成文件，编译并运行它。像这样的东西：

```
std::vector<xxx> v = {true, *, (, false, +, true, )};
std::ofstream src("temp.cpp");
src <<
    "#include <iostream>\n"
    "int main() {\n"
    "bool result = ";
for (auto i: v)
    src << i << ' ';
src <<
    ";\n"
    "std::cout << result;\n"
    "}\n";
src.close();
system("g++ temp.cpp -o temp");
system("temp"); 
```

我忽略了权限、临时文件名、输出重定向等各个方面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:48:33.940

一种解决方案是使`,`运算符过载。但这会在处理括号时给您带来问题。通常你不会通过线性解析这样的表达式找到正确的结果。

表示表达式的正常方式是树。然后遍历树计算最终值。遍历通常使用递归完成。

所以这是一个两阶段的过程

1：构建树

2：递归计算表达式树

如果您希望将其表示为图表，请查看`boost::graph`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:17:45.457

就像 AxelOmega 说的 - 你可以使用`boost::spirit`. 语法很简单：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/qi_bool.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi = boost::spirit::qi;

template <class Iterator>
struct bool_grammar : qi::grammar<Iterator, bool(), qi::space_type> {
        qi::rule<Iterator, bool(), qi::space_type> rGroup, rBool, rName, rOr, rAnd;

        bool_grammar() : bool_grammar::base_type(rOr) {
                rGroup  = '(' >> rOr >> ')';
                rBool   = qi::bool_ | rGroup;
                rAnd    = rBool[qi::_val = qi::_1] >>
                          *('&' >> rBool[qi::_val = qi::_val && qi::_1]);
                rOr     = rAnd[qi::_val = qi::_1] >>
                          *('|' >> rAnd[qi::_val = qi::_val || qi::_1]);
        }
}; 
```

您还需要一个函数来调用解析器并检查结果

```
bool parse(const std::string& value) {
        bool_grammar<std::string::const_iterator> g;
        std::string::const_iterator it  = value.begin();
        std::string::const_iterator end = value.end();

        bool s;
        if (qi::phrase_parse(it, end, g, qi::space, s) == false || it != end) {
                // error
        }

        return s;
} 
```

现在只需将其合并`vector`为一个`string`并使用 parse 函数：

```
parse("(true | false) & true | false") ; 
```

如果您对`bool`结果不感兴趣并且想要创建可操作的树，您还可以将综合属性更改为某个自定义类。*

# ruby-on-rails - 在 Rails 中使用救援自动环绕方法

> ID：15250051
> 
> 赞同：0
> 
> 时间：2013-03-06T14:32:35.537
> 
> 标签：ruby-on-rails

我[在 Facebook API 上关注这个 RailsCast](http://railscasts.com/episodes/361-facebook-graph-api)。以下代码允许将块传递给`facebook`方法并从`rescue`.

```
 def facebook
     @facebook ||= Koala::Facebook::API.new(oauth_token)
     block_given? ? yield(@facebook) : @facebook
   rescue Koala::Facebook::APIError => e
     logger.info e.to_s
     nil # or consider a custom null object
   end

   def friends_count
     facebook { |fb| fb.get_connection("me", "friends").size }
   end 
```

但是，我有十几个调用`facebook`此处定义的方法的方法，我不想`facebook {}`在每个方法中重复。（语法不是特别好）。

有没有办法简化这个？类似于过滤器的东西，它将环绕每个调用`facebook`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:58:58.650

您可以为此尝试委托

[http://www.simonecarletti.com/blog/2009/12/inside-ruby-on-rails-delegate/](http://www.simonecarletti.com/blog/2009/12/inside-ruby-on-rails-delegate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-28T16:30:41.497

这是一个较老的问题，但我只是遇到了它和一个可能的答案，所以我会把它留在这里以防其他人感兴趣。它来自[websocket-ruby](https://github.com/imanel/websocket-ruby)。这个想法是提供一种一致的方式来提供有和没有救援包装器的方法，以供您享受。

```
module WebSocket
  module ExceptionHandler
    attr_accessor :error

    def self.included(base)
      base.extend(ClassMethods)
    end

    module ClassMethods
      # Rescue from WebSocket::Error errors.
      #
      # @param [String] method_name Name of method that should be wrapped and rescued
      # @param [Hash] options Options for rescue
      #
      # @options options [Any] :return Value that should be returned instead of raised error
      def rescue_method(method_name, options = {})
        define_method "#{method_name}_with_rescue" do |*args|
          begin
            send("#{method_name}_without_rescue", *args)
          rescue WebSocket::Error => e
            self.error = e.message.to_sym
            WebSocket.should_raise ? raise : options[:return]
          end
        end
        alias_method "#{method_name}_without_rescue", method_name
        alias_method method_name, "#{method_name}_with_rescue"
      end
    end
  end
end 
```

# javascript - 灯箱的拖放问题

> ID：15250057
> 
> 赞同：0
> 
> 时间：2013-03-06T14:32:52.757
> 
> 标签：javascript, jquery, drag-and-drop, lightbox

我在正在处理的网站上设置了拖放功能，但遇到了一些问题。

1）当我从拖动中释放一个对象时，它会触发灯箱链接，我如何阻止这个功能发生，除非它只是一个坚实的点击。

2) 在下面的代码中，我定义了可以拖动哪些元素，唯一可行的类是“.photo”，在我的网站上它是一个超大框（用于布局目的），不是我需要的可接受选项。用于图像的类（'.img1' '.img2'）似乎不起作用，即使我围绕图像构建 .div 它也不适用于该类。

```
$(document).ready(function(){
jQuery(function($){
$('.photo').drag(function( ev, dd ){
    $( this ).css({
        top: dd.offsetY,
        left: dd.offsetX
    });
 }); 
```

});

关于如何解决这些问题的任何想法？

[http://www.coreytegeler.com/jb/3/](http://www.coreytegeler.com/jb/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:45:15.270

你试过了`event.stopPropagation()`吗？

```
jQuery(function($){
    $('.photo').drag(function( event, dd ) {
        event.stopPropagation();

        $( this ).css({
            top: dd.offsetY,
            left: dd.offsetX
        });
    });
}); 
```

*   有关拖动的更多信息：[info](http://api.jqueryui.com/draggable/#event-drag)
*   关于 stopPropagation 的更多信息：[info](http://api.jquery.com/event.stopPropagation/)

# hibernate - 休眠多对多和繁重的添加操作

> ID：15250060
> 
> 赞同：1
> 
> 时间：2013-03-06T14:32:56.657
> 
> 标签：hibernate, optimization, jpa, proxy, many-to-many

假设我们有两个类：**Software**和**Tag**。软件可以关联很多标签，每个标签可以关联很多软件。所以，我们有多对多的关系。

我们使用 Hibernate 和注解：

```
@Entity
class Software .. {
    @ManyToMany
    public List<Tag> tags = new LinkedList<Tag>();
    ...
}

@Entity
class Tag .. {
    @ManyToMany(mappedBy = "tags")
    List<Software> softwares = new LinkedList<Software>();
    ... 
} 
```

然后，每次我们想将现有标签添加到软件时，我们都需要将这个软件添加到该标签（以保持正确的多对多结构）。像这样：

```
class Software {
  ...
  public void add(Tag tag) {
    tags.add(tag);
    tag.add(software); 
  }
  ... 
} 
```

如果这个添加标签已经关联了 1000 0000 个软件，那么此时我们调用**tag.add(sofware)**，Tag 类会将所有这些软件下载到内存中，以便只添加一个软件。对？

问题：如何避免这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:03:23.050

Hibernate 允许您以面向对象的方式考虑数据库模式。但是，当您处理相当复杂或相当大的数据时，您仍然应该牢记真实的数据库现实。您在数据库中的多对多关系将被实现为一个单独的表，其中表的外键表示标签和表示软件的表。对于您的情况，我将添加一个类 SoftwareTag 来表示该多对多映射表，将类 Software 更改为包含一个 SoftwareTag 列表，并从类 Tag 中删除任何集合。根据您的业务逻辑，您可能需要向您的 DAO 添加一些 findBy 方法，但这应该是微不足道的。

# c++ - Boost 图形包装器编译错误

> ID：15250061
> 
> 赞同：0
> 
> 时间：2013-03-06T14:32:57.527
> 
> 标签：c++, compiler-errors, boost-graph

我是 boost 图形库的初学者，编译时出现以下错误：

```
mytree.cpp:80: error: expected init-declarator before '<' token 
```

这是错误的行：

```
typedef boost::labeled_graph<adjacency_list<vecS, vecS, bidirectionalS, VertexDesc>,std::string> Graph; 
```

有人可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:42:52.237

对于那些感兴趣的人，我只是忘记添加以下行：

```
#include <boost/graph/labeled_graph.hpp> 
```

# php - Freebase API 调用在浏览器中有效，但 curl 失败

> ID：15250069
> 
> 赞同：3
> 
> 时间：2013-03-06T14:33:21.403
> 
> 标签：php, json, curl, freebase

我正在尝试从 Freebase API 接收数据。我手动构建了一个有效的 API 调用，它在我的浏览器中给了我一个有效的 JSON 响应。所以我写了一个 PHP 函数，它应该做到这一点：

```
$service_url = 'https://www.googleapis.com/freebase/v1/search';
$params = array(
           'filter' => '(all name:"Avatar")',
           'lang' => 'en',
           'type' => 'film/film',
           'key' => Configure::read('Api.Key')
         );
$url = $service_url . '?' . http_build_query($params);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$response = json_decode(curl_exec($ch), true);
curl_close($ch); 
```

我得到的响应是`NULL`，但是如果我将构建的 URL 输入到我的 Chrome REST 插件中或直接在浏览器中查看它，我会得到一个有效的响应。如果 url 有效，为什么我的 curl 函数会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-19T10:35:56.487

对我来说，通过添加以下行有效。

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T19:28:51.493

我的猜测是您看到`NULL`的是因为`curl_exec`返回`false`，然后`json_decode`转换`false`为`NULL`.

正如您所怀疑的那样，这意味着这`curl_exec`是失败的。我不知道为什么，但我会首先使用[curl_error()](http://www.php.net/manual/en/function.curl-error.php)和[curl_errno()](http://www.php.net/manual/en/function.curl-errno.php)进行调试，以获取有关导致 curl 失败的更多信息。

参考：[curl_exec() 总是返回 false](https://stackoverflow.com/questions/8227909/curl-exec-always-returns-false)

# git - 在一系列提交上运行 filter-branch

> ID：15250070
> 
> 赞同：58
> 
> 时间：2013-03-06T14:33:23.010
> 
> 标签：git, git-filter-branch

```
git filter-branch --env-filter '
export GIT_AUTHOR_EMAIL="foo@example.com"
export GIT_AUTHOR_NAME="foo"' -- commita..commitb 
```

结果是`Which ref do you want to rewrite?`

因此，似乎`filter-branch`不允许您~~使用范围表示法~~使用两个任意参考之间的范围。

如果这种方法不可行，那么在一系列连续提交（分支历史记录中的某处）上运行过滤器的最直接方法是什么。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-01-07T14:49:13.113

正如@kan 所说，您不能在历史中间应用过滤器分支。您必须从已知提交申请到历史记录的结尾

```
git filter-branch --env-filter '...' SHA1..HEAD 
```

filter-branch 可以检查提交作者或其他信息，以选择更改或不提交，因此有多种方法可以完成您想要的，请参阅[https://git-scm.com/book/en/v2/Git -Tools-Rewriting-History](https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History)，寻找“在全球范围内更改电子邮件地址”

请记住：**如果您已将提交推送到公共存储库，则不应使用 filter-branch**

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-06T19:44:43.557

我找到的最干净的解决方案是执行以下操作：

1.  在 .创建一个临时分支`refb`。
2.  在 上应用分支过滤器`refa..temp`。
3.  重新定位到临时分支并将其删除。

**IE。**

```
git branch temp refb

git filter-branch --env-filter '
export GIT_AUTHOR_EMAIL="foo@example.com"' refa..temp

git rebase temp
git branch --delete temp 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-06T14:52:33.453

`git filter-branch` **确实**接受范围表示法，但范围的结尾需要是参考，而不是提交的 ID。

```
git checkout -b tofilter commitb
git filter-branch .... commita..tofilter 
```

如果只给出提交，它将不知道使用过滤分支更新什么 ref。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-07T07:53:09.130

在检查该范围的 if 语句中包含过滤命令。您可以使用以下命令检查提交是否在给定范围内：

```
git rev-list start..end | grep **fullsha** 
```

当前提交将存储`$GIT_COMMIT`在您的过滤器中。所以你的过滤器变成：

```
git filter-branch --env-filter '
  if git rev-list commita..commitb | grep $GIT_COMMIT; then
    export GIT_AUTHOR_EMAIL="foo@example.com"
    export GIT_AUTHOR_NAME="foo"
  fi' -- ^commita --all 
```

如果您只想重写当前分支，请替换`--all`为`HEAD`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-06T14:53:07.947

您不能只覆盖历史中间的提交，因为提交的 sha1 取决于父级的。所以，git 不知道你想在过滤后将你的 HEAD 引用指向哪里。所以，你应该重写所有的 HEAD。

例子：

```
A---B---C---D---E---F   master
            \
             \--G---H   branch 
```

如果你想过滤提交 B 和 C，你还应该过滤所有提交：D、E、F、G、H。所以，这就是为什么 git 告诉你在范围的末尾使用 ref，这样它就不会完成带着一个分离的头。

修改 B 和 C 提交并停止后将如下所示：

```
A---B---C---D---E---F   master
\           \
 \           \--G---H   branch
  \-B'--C'      (HEAD or a temporary TAG?..) 
```

因此，`master`and`branch`将保持不变。我不认为这是你想要的。这意味着您必须覆盖所有提交。历史将是：

```
A---B---C---D---E---F   (loose end, will be garbage collected one day)
\           \
 \           \--G---H   (loose end, will be garbage collected one day)
  \-B'--C'--D'--E'--F'  master
            \
             \--G'--H'  branch 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-04-21T16:30:22.177

我这样做。

假设您要过滤一个名为 branch-you-are-filtering 的分支的内容。

假设该分支有一个祖先提交，其引用名为 ref-for-commit-to-stop-at。

```
git filter-branch --commit-filter 'YOUR_FILTER_COMMANDS' branch-you-are-filtering...ref-for-commit-to-stop-at 
```

执行后，在 ref-for-commit-to-stop-at 处的提交不会改变。分支branch-you-are-filtering 中所有已过滤\更改的提交都将基于ref-for-commit-to-stop-at。

您是否使用 --commit-filter 或其他东西取决于您。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-28T18:23:50.720

@Acron 的解决方案对我来说似乎是错误的。我建议在 refa 和 refb 之间进行更改，包括两个哈希：

1.  `git tag master.bak`
2.  `git reset --hard refa`
3.  `git filter-branch --env-filter ' export GIT_AUTHOR_EMAIL="foo@example.com"' refa^..master`
4.  `git cherry-pick refb..master.bak`
5.  `git tag -d master.bak`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-29T04:26:49.390

使用 filter-branch 的`--setup`parm 和一些 shell power：

```
git filter-branch --setup '
for id in `git rev-list commitA..commitB`; do
         eval filterfor_$id=rewrite
done
rewrite() {
        GIT_AUTHOR_NAME="Frederick. O. Oosball"
        GIT_AUTHOR_EMAIL=foobar@example.org
}
' --env-filter 'eval \$filterfor_$GIT_COMMIT' 
```

# imagemagick - 将许多 png 转换为多页 tiff

> ID：15250071
> 
> 赞同：12
> 
> 时间：2013-03-06T14:33:24.830
> 
> 标签：imagemagick

我看过关于 StackOverflow 的各种帖子，但基本上我想做一些类似的事情：

```
convert *.png new.tiff 
```

tiff 每个 png 都有一个页面。所以我想要一个有很多页面的单个 tiff。这不起作用，它只转换列表中找到的第一个 png。对于我正在做的事情，我实际上需要一个多页的 tiff。据说 imagemagick 可以做到这一点。

（顺便说一句，版本是：6.8.0-10 2013-03-03 Q16）

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:32:54.130

终于想通了。看来您必须从源代码构建才能使此功能正常工作。我没有任何运气就使用了自制软件的所有版本。为此，请确保您摆脱了所有旧版本，因此请执行以下操作：

1.  `brew uninstall imagemagick`
2.  `brew unlink imagemagick`
3.  `brew install imagemagick --build-from-source`
4.  它可能会说您需要链接/取消链接，只需执行此操作`brew unlink imagemagick && brew link imagemagick`，它应该可以正常工作。

我很惊讶这没有更多的记录，特别是将多个图像转换为单个多页 tiff。然后从这里你可以做`convert *.png mynewimg.tiff`（​​如果使用通配符）如果不是你可以做`convert first.png second.png third.png mynewimg.tiff`

似乎唯一的选择是从源代码构建，所以如果没有生成多页 tiff，则执行上述操作。

# php - 将新元素永久添加到 SELECT 框

> ID：15250072
> 
> 赞同：0
> 
> 时间：2013-03-06T14:33:30.693
> 
> 标签：php, jquery, html, forms, select

我有一个带有 SELECT 框的表单，该表单通过使用 php 调用 mySQL 数据库来填充。这部分目前正在工作，因此请忽略创建此示例的拼写错误。

```
<select name = "animal" id="animal" size="1">
<?php
    $sql = "SELECT * from animals";
    $result = mysqli_query ($db, $sql);

    while ($row = mysqli_fetch_assoc($result)) {
    ?>
        <option value="<?= $row['id'] ?>">  <?= $row['animal'] ?> </option>
<?php
    }
?>
</select> 
```

id 是选项的主键，不显示（这是需要的）。如果当前选项是（括号内的数字是这些元素的主键，不向用户显示）：

(1) 狮子
(2) 老虎

例如，我怎样才能让用户可以将熊添加到列表中，并让它出现在此表单的所有未来使用中？对于奖励积分，此特定元素在页面上重复多次，因此如果将 Bears 添加到第一行，那么第二行将更新为包含 Bears 会很好。

实际表很简单：id和animal，其他字段不需要填写。

表上的选项是 php、javascript、jquery 和 AJAX 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:41:52.853

所以很明显，你需要一个丢失动物的字段。然后，一旦点击提交，您就可以使用 ajax (jquery/javascript) 将其发送回服务器 (php)，然后服务器会发送回一个更新的列表 (json)，您可以使用该列表来使用 javascript/jquery 重新填充给定的下拉列表。

此任务所需的技能包括 php、mysql、ajax、json/xml 和 jquery/javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:50:20.713

您需要识别该用户何时返回您的网站，因此给他们一个 cookie，这可能看起来几乎不安全，但请考虑一下。

在该 cookie 中放置 Bear 的 id 或某种密钥，以便您在从数据库中选择他们的偏好时可以带上该 id。

如果 id 是一个整数，那么过滤它是非常简单的。

如果您可以看到自己更改数据库中的 id，那么这是行不通的，但我无法忍受想到有人这样做。

# c# - 为什么我们需要静态构造函数？

> ID：15250077
> 
> 赞同：9
> 
> 时间：2013-03-06T14:33:55.960
> 
> 标签：c#, asp.net, static, constructor

首先，我在[静态构造函数的用途是什么中得到了答案？](https://stackoverflow.com/questions/4506990/what-is-the-use-of-static-constructors)，但我想在这种情况下得到答案。

这是我的 C# 静态类：

```
public static class BasicClass
{
    static int i = 0;
    static BasicClass()
    {
        i = 10;
    }

    public static void Temp()
    {
        //some code
    }

    public static void Temp1()
    {
        //some code
    }
} 
```

在这里面我有一个静态变量`i`，它在第一次被调用时被初始化为 10。所以基本上它可能是静态构造函数的目的，但同样的事情可以在不声明静态构造函数的情况下通过初始化实现`static int i = 10` 相同的目的，即只初始化一次。

那为什么我们需要一个静态构造函数呢？或者我在理解静态构造函数的概念或使用方面完全错误？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-06T14:38:39.330

如果你将该类编译成一个程序集，然后使用 ILSpy 或类似工具来反汇编结果，你会注意到所有静态成员初始化都是在静态构造函数中执行的。

例如，以下 C# 代码：

```
public static class BasicClass
{
    static int i = 10;
} 
```

将产生相当于以下内容的 IL：

```
public static class BasicClass
{
    static int i;

    static BasicClass()
    {
        i = 10;
    }
} 
```

换句话说，直接初始化只是 C# 编译器提供的语法糖。在后台，仍然实现了静态构造函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T14:38:52.213

好吧，在**您的**示例中确实不需要它，但是想象一下何时`i`必须从数据库、文本文件或任何其他资源中读取值？你可能需要类似的东西：

```
static BasicClass()
{
    using (SomeConnection con = Provider.OpenConnection())
    {
        try
        {
            // Some code here
        }
        catch
        {
            // Handling expeptions, setting default value
            i = 10;
        }
    }
} 
```

现在无法声明和初始化静态字段，最好使用静态构造函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:38:28.583

在这种情况下，您不需要静态构造函数。

```
static BasicClass()
{
    i = 10;
} 
```

和

```
static int i = 10; 
```

功能相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T14:39:19.097

答案也在您的链接问题中：

> [...] 特别适用于将所需的配置数据读入只读字段等。
> 
> 它在第一次需要时由运行时自动运行（那里的确切规则>很复杂（参见“beforefieldinit”），并且在 CLR2 和 CLR4 之间发生了微妙的变化）。>除非你滥用反射，否则保证最多运行一次（即使两个线程>同时到达）。

您可以在静态构造函数中初始化更复杂的东西，例如建立数据库连接等。如果它有意义是另一回事......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T14:39:59.173

如果您需要**在构造函数中执行某些操作**并且您希望应用程序中有一个唯一的实例，则静态构造函数是有意义的。例如：

```
public static class BasicClass
{
    static MyConfiguration _myConfig;

    static BasicClass()
    {
       // read configuration from file
       _myConfig = ReadConfigFromConfigFile("somefile.conf");
    }

    private static MyConfiguration ReadConfigFromConfigFile(string file)
    {
       using (StreamReader reader = new StreamReader(file);
       {
         ...
       }
    }
} 
```

在您解释的场景中，您不需要显式的静态构造函数。

此外，您可以应用[单例模式](http://msdn.microsoft.com/en-us/library/ff650316.aspx)来实现此目的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T14:37:43.607

您只能使用编译时常量（您的情况）初始化字段。但在静态构造函数中，您可以执行一些代码（例如读取配置文件）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T14:39:00.700

静态构造函数不仅用于初始化变量的目的，而且还创建对象，这些对象可能是您的（静态）类（或环境）在这些对象或您的类本身上工作和调用方法所必需的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-28T22:53:46.177

尚未提及的一个因素是，使用静态构造函数（使用构造函数语法编写）调用`foo()`与使用静态字段初始值设定项调用之间存在语义差异。特别是，如果一个类型有一个使用构造函数语法编写的静态构造函数，则保证在第一次执行将“使用”该类型的代码时调用该构造函数；在此之前不会调用它，如果不使用该类型也不会调用它。相比之下，尽管 .NET 保证类型的静态字段初始化程序将在其任何静态字段被访问之前运行，并且不会运行多次，但 .NET 在第一次认为类型*可能会*获得时可以自由运行此类静态初始化程序用过的。考虑例如：

```
if (someCondition())
  for (i=0; i<100000000; i++)
    someClass.someStaticField++; 
```

如果当即时编译器遇到上述代码时，`someClass`从未使用过，并且它有一个使用静态构造函数语法声明的构造函数，则生成的机器代码将类似于：

```
if (someCondition())
  for (i=0; i<100000000; i++)
  {
    if (someClass.hasBeenInitialized)
      someClass.runConstructor();
    someClass.someStaticField++;
  } 
```

*在*循环中执行 if-check 。相比之下，如果有字段初始化但没有构造函数样式的声明，则 JIT 可能会`someClass`在运行代码之前执行静态构造，因此无需在其中包含`if`检查。

# c++ - 使用 %s 和 sprintf 没有给出预期的结果

> ID：15250084
> 
> 赞同：1
> 
> 时间：2013-03-06T14:34:09.397
> 
> 标签：c++

这可能是一个简单的问题，但我已经尝试了一切并且完全不知所措。

```
sprintf(&szDevCapEntry[strlen(szDevCapEntry)], ",%s:%0d", (LPCSTR)szAnalogP, szAnalogChannels); 
```

该条目应该添加`AL:1000`，但它添加了`A:1000`，我不知道为什么。`szAnalogP`绝对是AL。有人有什么想法吗？

编辑：我的功能：

```
extern "C" UINT __stdcall WriteDriverEntry(MSIHANDLE hInstall)
{
HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
CString m_DevicePrintName, m_nDeviceNumber, m_DeviceName;
LPWSTR szDevicePrintName= NULL, szDeviceNum = NULL, szValueBuf = NULL, szAnalogP = NULL, szDigitalP = NULL, szAnalogOP = NULL, szDigitalOP = NULL;
LPWSTR szDiagnosticP = NULL, szCounterP;
CHAR    szDevCapEntry[256], szBuffer[MAX_PATH];
int Index, szAnalogChannels, szDigitalChannels, szAnalogOChannels, szDigitalOChannels, szDiagnosticChannels, szCounterChannels;

hr = WcaInitialize(hInstall, "WriteDriverEntry");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

hr = WcaGetProperty(L"COMPORTNUMBER", &szDeviceNum);
ExitOnFailure(hr, "failed to get comport number");
m_nDeviceNumber = szDeviceNum;

hr = WcaGetProperty(L"DEVICEPRINTNAME", &szDevicePrintName);
ExitOnFailure(hr, "failed to get device print name");
m_DevicePrintName = szDevicePrintName;

hr = WcaGetProperty(L"DEVICENAME",&szValueBuf);
ExitOnFailure(hr, "failed to get device name");
m_DeviceName = szValueBuf;

wsprintf(szDevCapEntry, "%s,%s,%s", (LPCSTR)m_DeviceName, m_nDeviceNumber, (LPCSTR)m_DevicePrintName);

hr = WcaGetProperty(L"ANALOGPREFIX",&szAnalogP);
hr = WcaGetIntProperty(L"ANALOGCHANNELS",&szAnalogChannels);

if (szAnalogChannels != 0 )
{
    WcaSetProperty(L"TEST", szAnalogP);
    sprintf(&szDevCapEntry[strlen(szDevCapEntry)], ",%s:%0d", (LPCSTR)szAnalogP, szAnalogChannels);
    WcaLog(LOGMSG_STANDARD,  szDevCapEntry);
}

    if (!UpdateCapEntry(szDevCapEntry))
    return -1;

LExit:

er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);
} 
```

我有不同的变体，例如 %.2s，因此它会显示两个字符，但我只得到一个。如果这是一个太宽泛的问题，我很抱歉，但我是初学者，无法弄清楚。我想也许将变量转换为 char 可能会起作用，但它给了我相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:37:59.380

您显示的代码没有任何问题。

看起来很奇怪的一件事是您必须显式`szAnalogP`转换为`LPCSTR`. 这表明它是其他类型。我想知道它是否可能是您正在解释的 Unicode C 字符串是 ASCII 字符串，还是类似的东西？

# windows-phone-7 - 仅限 Windows Phone 8 的应用程序的 DeviceUniqueId 是否特定于应用程序而不是设备？

> ID：15250087
> 
> 赞同：4
> 
> 时间：2013-03-06T14:34:24.140
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

我使用对象的`DeviceUniqueId`属性`DeviceExtendedProperties`来识别我的 Windows Phone 应用程序上的设备。

在 Windows Phone 7 上，它运行良好，设备 ID 在所有应用程序中保持稳定。

我将我的应用程序迁移到了 Windows Phone 8（针对 WP7 和 8），它仍然像往常一样工作。

但是，我刚刚开发了一个仅针对 WP8 的应用程序，并且我注意到它与`DeviceUniqueId`我的其他应用程序（在同一设备上运行）不同。

可以肯定的是，我创建了其他一些测试应用程序。

这是同一设备上的示例（诺基亚 Lumia 820）：

*   App1（针对 WP7 和 8），设备 ID：422c3795ae12b92b18882bd93ea454b3
*   App2（针对 WP7 和 8），设备 ID：422c3795ae12b92b18882bd93ea454b3
*   App3（仅针对 WP8），设备 ID：19ff7b4c669b1cbeaf0e42ab1e6796ea
*   App4（仅针对 WP8），设备 ID：240fe4501de11078313a63dde118d9ae

这是故意的吗？是否可以获得仅限 WP8 的应用程序的固定设备 ID？

我无法在 MSDN 上找到有关此行为的任何正式文档。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:46:35.890

根据官方[MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties%28v=vs.92%29.aspx)：

> **DeviceUniqueId** - 设备的唯一哈希。此值将在所有应用程序中保持不变，并且如果手机使用新版本的操作系统更新，则不会更改。应用程序不应使用它来识别用户，因为即使设备所有权转移，设备 ID 也将保持不变。

在 Windows Mobile 6.5 中，哈希[是特定于应用程序的](http://msdn.microsoft.com/en-us/library/aa908781.aspx)。Windows Phone 并非如此。然而，话虽如此，ID 是特定于发布者的。尝试更改清单中的发布者 GUID，您将看到会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T18:49:45.020

对于 Windows Phone 8，MSDN 上的定义是：

对于在 Windows Phone 8 设备及更高版本上运行的 Windows Phone 8 应用，DeviceUniqueId 值对于每个设备和每个应用发布者都是唯一的。对于 Windows Phone 8 应用，DeviceUniqueId 在功能上与 Windows 运行时中的 HostInformation.PublisherHostId 属性相同。

[链接到 MSDN - DeviceExtendedProperties 类](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties%28v=vs.105%29.aspx)

# sql - 即使计数为空，SQL 也会返回日期范围

> ID：15250088
> 
> 赞同：1
> 
> 时间：2013-03-06T14:34:24.407
> 
> 标签：sql, date, null

我正在计算`UsersID`过去 7 天的登录总数（）。我计算了此日期范围内的用户 ID 总数并按日期分组。我的问题是，如果某个日期没有记录用户 ID，则不会显示该日期。

所以我需要为没有登录的日期显示 0。

我的代码是：

```
SET @StartDate = CONVERT(varchar(10),DATEADD(day,-7, GETDATE()), 101) +  ' 00:00.00';
SET @EndDate = DATEADD(day,7, @StartDate);

SELECT CONVERT(DATE, [DateTime]) as LoginDate, COUNT(UsersID) AS TotalForDay
FROM [STATS].[dbo].[UsersLogin]
WHERE [DateTime]>@StartDate 
AND [DateTime]<@EndDate
GROUP BY CONVERT(DATE, [DateTime])
ORDER BY LoginDate desc; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:40:28.113

您需要一个带有日期值的单独表，试试这个

```
DECLARE @startdate datetime, @enddate datetime
SET @StartDate = CONVERT(varchar(10),DATEADD(day,-7, GETDATE()), 101) +  ' 00:00.00';
SET @EndDate = DATEADD(day,7, @StartDate);
;with cte as
(
    select @startdate DateValue
    union all
    select DateValue + 1
    from    cte   
    where   DateValue + 1 < @enddate
)

select a.DateValue as LoginDate,  COUNT(UsersID) AS TotalForDay
from cte a
LEFT outer join [STATS].[dbo].[UsersLogin] b 
on CONVERT(varchar(15), a.DateValue,101) = CONVERT(varchar(15), b.[DateTime],101)
group by a.DateValue
order by a.DateValue desc 
```

按小时分组：

```
DECLARE @startdate datetime, @enddate datetime
SET @StartDate = CONVERT(varchar(10),DATEADD(day,-7, GETDATE()), 101) +  ' 00:00.00';
SET @EndDate = DATEADD(day,7, @StartDate);
;with cte as
(
    select @startdate DateValue
    union all
    select DATEADD (hh,1,DateValue)
    from    cte   
    where   DATEADD (hh,1,DateValue) < @enddate
)

select a.DateValue as LoginDate,  COUNT(UsersID) AS TotalForDay
from cte a
LEFT outer join [STATS].[dbo].[UsersLogin] b 
on CONVERT(varchar(15), a.DateValue,101) = CONVERT(varchar(15), b.[DateTime],101)
group by a.DateValue
order by a.DateValue desc
OPTION (MAXRECURSION 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:41:08.160

您将需要针对日历关系在日期上进行左连接，无论是作为表静态实现还是作为子查询动态实现。

```
SET @StartDate = CONVERT(varchar(10),DATEADD(day,-7, GETDATE()), 101) +  ' 00:00.00';
SET @EndDate = DATEADD(day,7, @StartDate);

SELECT C.Date, COUNT(UsersID) AS TotalForDay
FROM Calendar as C
LEFT JOIN [STATS].[dbo].[UsersLogin] as U on C.Date = CONVERT(DATE, [DateTime])       
WHERE [DateTime]>@StartDate 
AND [DateTime]<@EndDate
GROUP BY CONVERT(DATE, [DateTime])
ORDER BY LoginDate desc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:58:40.687

如果需要比使用这个更简单。创建一个临时表变量并将日期从开始到结束添加到其中：

```
Declare @temp_Dates Table
(
  TempDate datetime
)

While (@StartDate<@EndDate)
Begin
  Insert Into @temp_Dates Select @EndDate
  Set @EndDate=DATEADD(DAY,-1,@EndDate)
End 
```

之后，将您的表与上面的表左连接：

```
SELECT Cast(Convert(varchar(20),td.TempDate,101) as DateTime) as LoginDate,     COUNT(UsersID) AS TotalForDay
FROM @temp_Dates td
Left Join  UsersLogin ul On Cast(Convert(varchar(20),ul.DateTime,101) as     DateTime)=Cast(Convert(varchar(20),td.TempDate,101) as DateTime)
GROUP BY Cast(Convert(varchar(20),td.TempDate,101) as DateTime)
ORDER BY LoginDate desc 
```

你会得到你想要的结果。

# apache - AngularJS - 为什么更改 url 地址时 $routeProvider 似乎不起作用并且我收到 404 错误

> ID：15250090
> 
> 赞同：13
> 
> 时间：2013-03-06T14:34:31.683
> 
> 标签：apache, angularjs

我`$routeProvider`的配置如下：

```
teachApp.config(['$routeProvider', '$locationProvider', function($routeProvider,       $locationProvider) {
    $routeProvider.
        when('/teach/', {templateUrl: 'views/login_view.html'}).
        when('/teach/overview', {templateUrl: 'views/overview_view.html'}).
        when('/teach/users', {templateUrl: 'views/users_view.html'}).
        otherwise({redirectTo: '/teach/'});
    $locationProvider.html5Mode(true);
}]); 
```

在应用程序中，如果我单击诸如 之类的链接`<a href="/teach/overview">Overview</a>`，概览部分将按预期显示。但是，当我手动将地址栏中的 URL 更改为完全相同的 URL 时，我收到 404 错误。是不是`$routeProvider`配置错误？

我正在使用 MAMP localhost，应用程序的根 url 是`http://localhost/teach/`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T21:30:45.073

您还可以在 URL 中使用 #。

```
http://localhost/teach/#/overview 
```

这不会向服务器发送请求，而是被 Angular $routeProvider 拦截。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-06T15:13:24.937

您需要设置 apache 以[将所有路径重定向到 root](https://stackoverflow.com/questions/6878245/how-can-i-redirect-all-sub-directories-to-root-using-htaccess-or-httpd-conf)。

当您直接打开`http://localhost/teach/overview`您的 Web 服务器时，您会尝试从未定义的路由中提供页面。

当您在 Angular 应用程序中单击带有 href 路径的链接时`http://localhost/teach/overview`，Angular 会介入，而不是让您的浏览器从服务器请求页面，它会拦截您的点击事件并转到您的 routeProvider 以查看哪个客户端视图显示（这就是他们称之为“单页应用程序”的原因）。这就是为什么您的链接只要您尝试不直接打开它们就可以工作的原因。

除了 apache 配置，您可能还想使用`base`带有 href 值的标签`/teach/`：

```
<base href="/teach/" /> 
```

这样您就可以让您的 routeProvider 不受固定前缀的约束：

```
teachApp.config(['$routeProvider', '$locationProvider', function($routeProvider,       $locationProvider) {
    $routeProvider.
        when('/', {templateUrl: 'views/login_view.html'}).
        when('/overview', {templateUrl: 'views/overview_view.html'}).
        when('/users', {templateUrl: 'views/users_view.html'}).
        otherwise({redirectTo: '/'});
    $locationProvider.html5Mode(true);
}]); 
```

# c++ - 在 WINAPI 中动态创建按钮

> ID：15250094
> 
> 赞同：2
> 
> 时间：2013-03-06T14:34:42.050
> 
> 标签：c++, winapi

我正在尝试为 WINAPI 创建一个窗口创建者类。

我一直在弄清楚如何让窗口动态添加控件并为它们注册消息。

```
#include <windows.h>
#include <iostream>
#include <vector>
#include <tuple>
#include <thread>

using namespace std;

class WinForm
{
    private:
        HWND WindowHandle = nullptr;
        std::thread Thread;
        std::vector<std::tuple<std::string, std::size_t, HWND>> ControlHandles;

    public:
        ~WinForm();
        WinForm(std::string ClassName, std::string WindowName, bool Threaded = false, int Width = CW_USEDEFAULT, int Height = CW_USEDEFAULT, WNDPROC WindowProcedure = nullptr, WNDCLASSEX WndClass = {0});
        bool AddButton(std::string ButtonName, POINT Location, int Width, int Height);
};

WinForm::~WinForm()
{
    if (Thread.joinable())
    {
        Thread.join();
    }
}

WinForm::WinForm(std::string ClassName, std::string WindowName, bool Threaded, int Width, int Height, WNDPROC WindowProcedure, WNDCLASSEX WndClass)
{
    if (WindowProcedure == nullptr)
    {
        WindowProcedure = [](HWND window, UINT msg, WPARAM wp, LPARAM lp) -> LRESULT __stdcall
        {
            switch(msg)
            {
                case WM_PAINT:
                break;

                case WM_DESTROY:
                    PostQuitMessage(0);
                    return 0;

                default:
                    return DefWindowProc(window, msg, wp, lp);
            }
            return 0;
        };
    }

    if (WndClass.cbSize == 0)
    {
        WndClass =
        {
            sizeof(WNDCLASSEX), CS_DBLCLKS, WindowProcedure,
            0, 0, GetModuleHandle(nullptr), LoadIcon(nullptr, IDI_APPLICATION),
            LoadCursor(nullptr, IDC_ARROW), HBRUSH(COLOR_WINDOW+1),
            nullptr, ClassName.c_str(), LoadIcon (nullptr, IDI_APPLICATION)
        };
    }

    if (RegisterClassEx(&WndClass))
    {
        if (Threaded)
        {
            Thread = std::thread([ClassName, WindowName, Width, Height, this]{
                WindowHandle = CreateWindowEx(0, ClassName.c_str(), WindowName.c_str(), WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, Width, Height, nullptr, nullptr, GetModuleHandle(nullptr), nullptr);
                if(WindowHandle)
                {
                    MSG msg = {nullptr};
                    ShowWindow(WindowHandle, SW_SHOWDEFAULT);
                    while(GetMessage(&msg, nullptr, 0, 0))
                    {
                        TranslateMessage(&msg);
                        DispatchMessage(&msg);
                    }
                }
            });
        }
        else
        {
            WindowHandle = CreateWindowEx(0, ClassName.c_str(), WindowName.c_str(), WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, Width, Height, nullptr, nullptr, GetModuleHandle(nullptr), nullptr);
            if(WindowHandle)
            {
                MSG msg = {nullptr};
                ShowWindow(WindowHandle, SW_SHOWDEFAULT);
                while(GetMessage(&msg, nullptr, 0, 0))
                {
                    TranslateMessage(&msg);
                    DispatchMessage(&msg);
                }
            }
        }
    }
}

bool WinForm::AddButton(std::string ButtonName, POINT Location, int Width, int Height)
{
    for (std::vector<std::tuple<std::string, std::size_t, HWND>>::iterator it = ControlHandles.begin(); it != ControlHandles.end(); ++it)
    {
        if (ButtonName == std::get<0>(*it))
        {
            return false;
        }
    }

    std::size_t ID = 1;
    for (std::vector<std::tuple<std::string, std::size_t, HWND>>::iterator it = ControlHandles.begin(); it != ControlHandles.end(); ++it, ++ID)
    {
        if (std::get<1>(*it) != ID)
        {
            break;
        }
    }

    HWND ButtonHandle = CreateWindowEx(0, "Button", ButtonName.c_str(), WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON, Location.x, Location.y, Width, Height, WindowHandle, (HMENU)ID, GetModuleHandle(nullptr), nullptr);
    ControlHandles.push_back(std::make_tuple(ButtonName, ID, ButtonHandle));
    SendMessage(WindowHandle, WM_CREATE, 0, 0);
    return true;
}

int main()
{
    WinForm Form("Class", "Title", true);
    Form.AddButton("NewButton", {50, 50}, 25, 25);
} 
```

在上面，它编译得很好并且显示窗口很好。它只是没有显示我试图动态添加到窗口的按钮。有谁知道如何将按钮动态添加到窗口并允许按钮注册消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:57:10.660

有很多问题，但主要问题是您拥有的 WM_PAINT 处理程序。这将阻止主窗口绘制这个子窗口。把它注释掉（并解决其他问题），你会没事的。

1.  线程 - 不确定这是否是一个问题。这完全不标准。在主线程上创建主窗口（编辑：我认为线程的问题在于您创建了主窗口 - 并且在一个线程上具有消息循环，而控制窗口在另一个线程中。这是不允许的）。
2.  您的逻辑何时`Threaded`为假是错误的。你不能在那里有消息循环。WinForm 的构造函数应该返回。否则，您将永远无法访问 Form.AddButton。
3.  将消息循环作为 main 中的最后一件事
4.  我认为您没有使用 Visual Studio。有很多语法问题（c++11 的东西微软还没有实现），Windows 应用程序的主要函数名为 WinMain。这很好，但不推荐。微软有一个优秀的免费编译器，如果你使用付费编译器，你可以使用 ATL，这很棒。
5.  如果不注释掉 WM_PAINT，您的按钮就会创建，但它是不可见的。你可以用 Spy++ 发现它
6.  删除`case WM_PAIN:`. 您正在阻止将调用子窗口指向自己的 DefWindowProc。
7.  我第一次看到 Widnow Proc 的 lambda 表示法。这是一个不错的技巧，但我真的没有理由这样做。

下面的代码正在运行，并且包含针对 Visual Studio 2012 的修复程序。请注意，Microsoft 还没有初始化列表（这很糟糕）。不客气。

```
#include "stdafx.h"

using namespace std;

WNDCLASSEX defWndClass = { 0 };

class WinForm
{
    private:
        HWND WindowHandle;
        std::thread Thread;
        std::vector<std::tuple<std::string, std::size_t, HWND>> ControlHandles;

    public:
        ~WinForm();
        WinForm(std::string ClassName, std::string WindowName, bool Threaded = false, int Width = CW_USEDEFAULT,
            int Height = CW_USEDEFAULT, WNDPROC WindowProcedure = nullptr, WNDCLASSEX WndClass = defWndClass);
        bool AddButton(std::string ButtonName, POINT Location, int Width, int Height);
};

WinForm::~WinForm()
{
    if (Thread.joinable())
    {
        Thread.join();
    }
}

WinForm::WinForm(std::string ClassName, std::string WindowName, bool Threaded, int Width, int Height, WNDPROC WindowProcedure, WNDCLASSEX WndClass)
    :WindowHandle(nullptr)
{
    if (WindowProcedure == nullptr)
    {
        WindowProcedure = [](HWND window, UINT msg, WPARAM wp, LPARAM lp) -> LRESULT __stdcall
        {
            switch(msg)
            {
                /*
                case WM_PAINT:
                    break;
                    */

                case WM_DESTROY:
                    PostQuitMessage(0);
                    return 0;

                case WM_CREATE:
                    break;

                default:
                    return DefWindowProc(window, msg, wp, lp);
            }
            return 0;
        };
    }

    if (WndClass.cbSize == 0)
    {
        WndClass.cbSize = sizeof(WNDCLASSEX);
        WndClass.style = CS_DBLCLKS;
        WndClass.lpfnWndProc = WindowProcedure;
        WndClass.cbClsExtra = 0;
        WndClass.cbWndExtra = 0;
        WndClass.hInstance = GetModuleHandle(nullptr);
        WndClass.hIcon = LoadIcon(nullptr, IDI_APPLICATION);
        WndClass.hCursor = LoadCursor(nullptr, IDC_ARROW);
        WndClass.hbrBackground = HBRUSH(COLOR_WINDOW+1);
        WndClass.lpszMenuName = nullptr;
        WndClass.lpszClassName = ClassName.c_str();
        WndClass.hIconSm = LoadIcon( nullptr, IDI_APPLICATION);
    }

    if (RegisterClassEx(&WndClass))
    {
        if (Threaded)
        {
            // can't do that!
        }
        else
        {
            WindowHandle = CreateWindowEx(0, ClassName.c_str(), WindowName.c_str(), WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, Width, Height, nullptr, nullptr, GetModuleHandle(nullptr), nullptr);
            if(WindowHandle)
            {
                ShowWindow(WindowHandle, SW_SHOWDEFAULT);

                // don't put message loop here!
            }
        }
    }
}

bool WinForm::AddButton(std::string ButtonName, POINT Location, int Width, int Height)
{
    for (std::vector<std::tuple<std::string, std::size_t, HWND>>::iterator it = ControlHandles.begin(); it != ControlHandles.end(); ++it)
    {
        auto& tu = *it;
        auto& str = std::get<0>(tu);
        if( ButtonName.compare( str ) == 0 ) {
            return false;
        }
    }

    std::size_t ID = 1;
    for (std::vector<std::tuple<std::string, std::size_t, HWND>>::iterator it = ControlHandles.begin(); it != ControlHandles.end(); ++it, ++ID)
    {
        if (std::get<1>(*it) != ID)
        {
            break;
        }
    }

    HWND ButtonHandle = CreateWindowEx(
        0, "button", ButtonName.c_str(), WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON, Location.x, Location.y, Width, Height, 
        WindowHandle, (HMENU)ID, (HINSTANCE)GetWindowLong(WindowHandle, GWL_HINSTANCE), nullptr);
    ShowWindow( ButtonHandle, SW_SHOW );
    ControlHandles.push_back(std::make_tuple(ButtonName, ID, ButtonHandle));

    //SendMessage(WindowHandle, WM_CREATE, 0, 0);
    return true;
}

int WINAPI WinMain( HINSTANCE, HINSTANCE, LPSTR, int )
{
    WinForm Form("Class", "Title", false);
    POINT pt = { 50, 50 };
    Form.AddButton("NewButton", pt, 80, 50);

    MSG msg = {nullptr};
    while(GetMessage(&msg, nullptr, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

} 
```

# web-services - Delphi 7 Web服务调用和访问冲突

> ID：15250097
> 
> 赞同：0
> 
> 时间：2013-03-06T14:35:01.097
> 
> 标签：web-services, delphi, soap, delphi-7

我的 Delphi 7 (build 8.1) 应用程序访问 .NET SOAP Web 服务时遇到问题。大多数情况下它工作正常，但有时我们会收到访问冲突。我相信（但不是 100% 肯定）只有当用户在“几个小时”内第一个访问 Web 服务时才会看到错误——例如，我可以在循环中调用它数百次而没有任何问题。

我在所涉及的每台计算机上都禁用了 DEP（数据执行保护），并且我还尝试了从此下载中更新的 WSDL 导入器：http: [//cc.embarcadero.com/Item/24535](http://cc.embarcadero.com/Item/24535)。（但是，我无法遵循有关运行时文件的自述文件，所以这可能是我的实际问题？）

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:49:37.167

See my answer to this question [How do I get the SOAP response when there was an exception?](https://stackoverflow.com/questions/5014629/how-do-i-get-the-soap-response-when-there-was-an-exception/5016842#5016842) Actually, I have two answers there, but the one of interest is the RIO OnAfterExecute handler. There you can log your SOAP responses to a file, and you can see what's happening. I expect that after hours of inactivity, the server may be giving an empty response or is timing out. If the SOAP response XML comes back empty, and you try to treat the response as a SOAP object, it'll be nil and you'll blow up with an A/V for sure. So this way, you get to inspect the raw TEXT coming back, and react accordingly. And you can actually build defensive code in here. For example, if the response is empty, you could swap in some other XML that represents a SOAP fault exception. Now your SOAP handler will know what to do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T20:34:02.233

我遇到了类似的问题，我建议您在应用程序中包含异常，而不是 DEP（数据执行保护）中的异常，因此它不会阻止应用程序。尽管如此，在我的情况下，WebService 仍然存在问题，因为该应用程序有 AccessViolation 来返回答案。调用 WebService 后，我必须在您的代码中添加“Application.ProcessMessages”函数。

# c# - 如何在 C# 中递归遍历和记录 HttpRequestMessage 的属性？

> ID：15250102
> 
> 赞同：3
> 
> 时间：2013-03-06T14:35:08.297
> 
> 标签：c#, asp.net-mvc, http, asp.net-web-api, expandoobject

感谢您的关注！

# 背景

我正在开发一个 MVC4 .NET 应用程序，并编写了一个过滤器来捕获所有错误（应用程序范围内），记录所述错误，然后通过 HTML 格式的电子邮件将它们报告给开发团队。

我编写的过滤器获取 HttpActionExecutedContext 并从那里我可以导出异常、堆栈跟踪、调用的方法以及一堆其他有用的信息。

我访问的大部分信息都是字符串或 IDictionary 的形式，我使用辅助方法来迭代这些项目并将它们放入用于报告电子邮件的 HTML 表中。

然而，有一个属性让我很伤心：HttpRequestMessage 属性。

HttpActionExecutedContext 对象（HttpActionExecutedContext.Request.Properties）的这个属性有很多不同类型的嵌套属性。

# 问题

我遇到了几个障碍，以递归方式遍历此 HttpActionExecutedContext.Request.Properties 对象并将其解析为 KV 对的层次结构。问题是由于空值、类型不匹配等造成的。

这是我从 Request.Properties 获得的当前结果：

> MS_HttpContext：
> System.Web.HttpContextWrapper
> 
> MS_RetrieveClientCertificateDelegate：System.Func`2[System.Net.Http.HttpRequestMessage,System.Security.Cryptography.X509Certificates.X509Certificate2]
> 
> MS_IsLocal：
> 未创建值。
> 
> MS_IncludeErrorDetail：
> 未创建值。MS_HttpRouteData：System.Web.Http.WebHost.Routing.HostedHttpRouteData
> 
> MS_SynchronizationContext：
> System.Web.AspNetSynchronizationContext
> 
> MS_HttpConfiguration：System.Web.Http.HttpConfiguration
> 
> MS_DependencyScope：
> System.Web.Http.Dependencies.EmptyResolver
> 
> MS_DisposableRequestResources：>System.Collections.Generic.List`1[System.IDisposable]

所以你可以看到，就价值而言，我真正得到的只是`type`财产的价值。我需要`value`. 如果该值是嵌套字典或其他东西，那很好，但我需要遍历它并记录它的 KV 对，因为只给我对象的类型是没有用的。

# 问题

我如何递归地遍历这个对象并最终得到一个 KV 对的字典（其中一些值本身就是字典）？是否有我缺少的辅助类或某种动态方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:17:48.950

为什么不直接使用 JSON.NET 之类的东西，让它将对象转换为 json。然后，您可以使用该 json 数据并设置一些嵌套限制，或者您可以记录整个 json 字符串本身。

# java - Android方法参数作为数组

> ID：15250103
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:35:09.550
> 
> 标签：java, android, arrays

```
public void setFont(String font_type, TextView[] fontArray)
{
    Typeface face = Typeface.createFromAsset(getAssets(), "fonts/" + font_type);

    for (int i = 0; i < fontArray.length; i++){
        fontArray.setTypeface(face);
    }
} 
```

我想为不同的字体添加不同的文本视图。我不知道如何正确实现 foreach 循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:36:44.493

您缺少循环中的索引：

```
fontArray[i].setTypeface(face);
         ^^^
      add this 
```

...或使用“for each”（如您所愿）：

```
for (TextView tv : fontArray)
    tv.setTypeface(face); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:37:40.097

`for`与任何其他 Java 数组一样，您可以使用-loop迭代其元素

```
for(TextView tv: fontArray) {
    tv.setTypeface(face);
} 
```

有关另一个示例，请参见[Java：带循环的数组。](https://stackoverflow.com/questions/7687310/java-array-with-loop)

请注意，名称`fontArray`有点误导...您可以将其重命名为`textViews`或更合适的名称...

# samsung-smart-tv - 在 Smart TV 应用程序中使用 USB 键盘进行文本输入

> ID：15250114
> 
> 赞同：9
> 
> 时间：2013-03-06T14:35:40.590
> 
> 标签：samsung-smart-tv

我的应用程序已经实现了自定义屏幕键盘。

有没有办法支持连接到电视的 USB 键盘？默认情况下，Samsung TV 会将一些按键转换为遥控代码（0-9、红色、蓝色等）。有没有办法获得所有击键？最好不使用 IME。

更新：我想在我自己的屏幕虚拟键盘中实现从 USB 键盘输入的文本。默认情况下，字母键不会转换为应用程序。

电视：UE46ES8000、USB 和 BT 键盘已连接并允许控制应用程序，但无法在其中输入文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:59:04.030

您可以将键盘连接到 SmartTV，但您的电视需要支持它们。

[例如这个三星键盘：http: //www.samsung.com/uk/consumer/tv-audio-video/television/tv-accessories/VG-KBD1500/XU-spec?](http://www.samsung.com/uk/consumer/tv-audio-video/television/tv-accessories/VG-KBD1500/XU-spec?subsubtype=wireless-keyboard) subsubtype =wireless-keyboard

兼容：

```
Samsung SMART TV: LED ES6100 series and above, PDP E550 series and above 
```

因此，如果您的电视设备支持 USB 或无线键盘，您无需在应用程序中翻译任何键码，它就可以工作。

# css - 根据参数数量调用正确的重载 mixin

> ID：15250115
> 
> 赞同：3
> 
> 时间：2013-03-06T14:35:43.390
> 
> 标签：css, less

我正在使用[Mindscape Web Workbench](http://www.mindscapehq.com/products/web-workbench) (pro) 从 LESS 文件中生成一些 CSS。我有两个名称相同但参数数量不同的 mixin。

根据[LESS 文档](http://lesscss.org/#docs)，应根据调用中的参数数量自动选择正确的 mixin。这是文档中的相关部分：

> 我们也可以在 arity 上进行匹配，这里有一个例子：
> 
> ```
> .mixin (@a) {
>   color: @a;
> }
> .mixin (@a, @b) {
>   color: fade(@a, @b);
> } 
> ```
> 
> 现在如果我们用一个参数调用 .mixin，我们将得到第一个定义的输出，但是如果我们用两个参数调用它，我们将得到第二个定义，即 @a 淡化为 @b。

然而，这对我来说似乎并非如此。

下面是`.border-radius`mixin 的两个版本。第一个接受一个参数，第二个允许发送一组自定义参数。该类`#searchbox`调用单参数混合，该类`#search`调用多参数混合。

**更少的混合**

```
.border-radius (@radius: 5px) {
    -webkit-border-radius: @radius;
    -moz-border-radius: @radius;
    border-radius: @radius;
}

.border-radius (@topleft: 5px, @topright: 5px, @bottomleft: 5px, @bottomright: 5px) {
    -webkit-border-radius: @topleft @topright @bottomright @bottomleft;
    -moz-border-radius: @topleft @topright @bottomright @bottomleft;
    border-radius: @topleft @topright @bottomright @bottomleft;
}

#searchbox {
    .border-radius(1px);
}

#search {
    .border-radius(2px, 3px, 4px, 5px);
} 
```

生成的 CSS 不尊重*Arity* （参数的数量）。相反，使用单个参数调用似乎会同时运行*两个*mixin，而使用多个参数调用会单独运行正确的 mixin，如下面生成的 CSS 所示：

**生成的 CSS**

```
#searchbox {
  -webkit-border-radius: 1px;
  -moz-border-radius: 1px;
  border-radius: 1px;

  -webkit-border-radius: 1px 5px 5px 5px;
  -moz-border-radius: 1px 5px 5px 5px;
  border-radius: 1px 5px 5px 5px;
}

#search {
  -webkit-border-radius: 2px 3px 5px 4px;
  -moz-border-radius: 2px 3px 5px 4px;
  border-radius: 2px 3px 5px 4px;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:50:45.170

您必须省略参数的默认值，否则即使只提供一个参数，less 也会调用第二个 mixin，因为它可以使用 3 个“缺失”参数的默认值。

以下工作符合您的预期：

```
.border-radius (@topleft, @topright, @bottomleft, @bottomright) {
    /*...*/
} 
```

但是，现在当您尝试`.border-radius`使用 2 或 3 个参数进行调用时会出现错误。您可以为第三个和第四个值提供默认值，以使 mixin 期望每个参数数量 (1-4) 并且仍然不会只为一个参数执行第二个 mixin。

```
.border-radius (@topleft, @topright, @bottomleft:5px, @bottomright:5px) {
    /*...*/
} 
```

所以最后你可以使用（现在你可以[放心地省略borderadius的前缀](http://caniuse.com/#search=border-radius)）：

```
/* 1 arg */
.border-radius (@radius: 5px) {
    border-radius: @radius;
}
/* 2 args */
.border-radius (@tlbr,@trbl) {
    border-radius:@tlbr,@trbl;
}
/* 3 and 4 args */
.border-radius (@topleft, @topright, @bottomleft, @bottomright: 5px) {
    border-radius: @topleft @topright @bottomright @bottomleft;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T13:59:27.410

分别具有 1 个参数和 4 个参数的两个函数就足够了。IE：

```
.border-radius(@radius:0px) {
    -webkit-border-radius:@radius;
    -moz-border-radius:@radius;
    border-radius:@radius;
}
.border-radius(@topLeftRadius, @topRightRadius, @bottomLeftRadius:0px, @bottomRightRadius:0px) {
    -webkit-border-radius:@topLeftRadius @topRightRadius @bottomLeftRadius @bottomRightRadius;
    -moz-border-radius:@topLeftRadius @topRightRadius @bottomLeftRadius @bottomRightRadius;
    border-radius:@topLeftRadius @topRightRadius @bottomLeftRadius @bottomRightRadius;
} 
```

# r - 使用 read.big.matrix 在 r 中读取大数据

> ID：15250117
> 
> 赞同：2
> 
> 时间：2013-03-06T14:35:48.803
> 
> 标签：r, bigdata

我正在尝试将 1.36 GB 数据放入 R 中，略高于 8700 万行和两列，均为数字。我找到了`bigmemory`和相关的包，但是没有成功，甚至没有读取数据。原始数据形式是xyz，这里我只是把文件扩展名改成了txt。我猜它是空格分隔的。

这是我的输入：

```
x <- read.big.matrix("mydata.txt", type="double", header=F,backingfile="mydata.bin",descriptorfile="mydata.desc") 
```

并返回此错误消息：

```
Fehler in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
  could not allocate memory (1024 Mb) in C function 'R_AllocStringBuffer' 
```

我也试过

```
x <- read.big.matrix("mydata.txt",header=F, type="double",sep=" ") 
```

有和没有指定分隔符（在这种情况下我读到，分隔符被猜到了）。然而，这导致只读取我的数据的第一列。（我对计算机不太了解，但我认为我正在研究的应该足够好——CPU 3.3GHz，RAM 8 GB？）。有什么想法有什么问题吗？感谢所有提示！

# css - chrome中部门内部门的CSS样式

> ID：15250120
> 
> 赞同：0
> 
> 时间：2013-03-06T14:35:59.443
> 
> 标签：css, google-chrome, html

我有一个 CSS 子级问题。通常人们似乎为特定的类定义了一种风格。这是我开始的：

```
.divholder {
  width:750px;
  border:none
  font-size:12;
  display:inline-block;
  overflow: hidden;
  white-space: nowrap;
  }

 .five {
  width:100px;
  display:inline-block;
  overflow: hidden;
  white-space: nowrap;
  float:left;
  } 
```

这很好地制作了一个在那个较大的分区中包含五个细分的分区。它目前以具有五个选项的在线形式保存按钮，因此有五个。现在我试图在我的 css 文件中指定分区，这样我就不必经常在 html 部分定义 div class="..." 。这看起来如下：

```
form.cmxform div {
  width:750px;
  border:none;
  font-size:12;
  display:inline-block;
  overflow: hidden;
  white-space: nowrap;
  }

form.cmxform div div {
  width:100px;
  display:inline-block;
  overflow: hidden;
  white-space: nowrap;
  float:left;
         } 
```

规范只是从类中复制而来，这些类在 chrome 和 IE 中运行良好。奇怪的是，当我应用上述子规范时，它在 IE 中有效，但在 Chrome 中无效。Chrome 将每个部分与较低的代码放在单独的行上，但不与顶部的代码分开。有谁知道为什么会这样，以及我该如何解决？感谢您的任何建议或评论！

*编辑适用的html代码如下：

```
<li><label>&nbsp;</label><div><div class="five">Zeker Niet</div><div class="five">&nbsp;</div><div class="five">&nbsp;</div><div class="five">&nbsp;</div><div class="five">Zeker Wel</div></div></li>
     <li><label>&nbsp;</label><div><div>--</div><div>-</div><div>0</div><div>+</div><div>++</div></div></li> 
```

指定 div 类的顶行在 chrome 和 IE9 中运行良好，但它下面的行仅适用于 IE9，不适用于 chrome

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:54:49.350

**[更新]**

使用您的语法，`form.cmxform div`'s css 会影响您更多嵌套的`divs`.

要访问层次结构中特定级别的子元素，请使用`form.cmxform > div`and `form.cmxform > div > div`with`>`访问直接后代。

在您的示例中，您需要编写：

```
form.cmxform li > div {
  display:inline-block;
  overflow: hidden;
  white-space: nowrap;
  width: 750px;
}

form.cmxform li > div > div {
  text-align:center;      /* added for style */
  width:100px;
  float:left;
} 
```

# python - findall 的完整表达式

> ID：15250121
> 
> 赞同：1
> 
> 时间：2013-03-06T14:36:01.317
> 
> 标签：python, regex, findall

我有一个正则表达式，它在某些文本中查找 url，例如：

```
my_urlfinder = re.compile(r'\shttp:\/\/(\S+.|)blah.com/users/(\d+)(\/|)')
text = "blah blah http://blah.com/users/123 blah blah http://blah.com/users/353"

for match in my_urlfinder.findall(text):
    print match  #prints an array with all the individual parts of the regex 
```

如何获取整个网址？目前匹配只打印出匹配的部分（我需要其他东西）......但我也想要完整的网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:36:57.797

您应该使您的组不被捕获：

```
my_urlfinder = re.compile(r'\shttp:\/\/(?:\S+.|)blah.com/users/(?:\d+)(?:\/|)') 
```

`findall()` *当有捕获组时*改变行为。*使用组，它只会返回组，而不捕获组，而是返回整个匹配的文本。*

 *演示：

```
>>> text = "blah blah http://blah.com/users/123 blah blah http://blah.com/users/353"
>>> my_urlfinder = re.compile(r'\shttp:\/\/(?:\S+.|)blah.com/users/(?:\d+)(?:\/|)')
>>> for match in my_urlfinder.findall(text):
...     print match
... 
 http://blah.com/users/123
 http://blah.com/users/353 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:39:26.677

不使用任何捕获组的替代方法是在所有内容周围添加另一个：

```
my_urlfinder = re.compile(r'\s(http:\/\/(\S+.|)blah.com/users/(\d+)(\/|))') 
```

这将允许您在保留整个结果的同时保留内部捕获组。

对于演示文本，它将产生以下结果：

```
('http://blah.com/users/123', '', '123', '')
('http://blah.com/users/353', '', '353', '') 
```

作为旁注，请注意当前表达式需要在 URL*前面*有一个空格，因此如果文本以一个不匹配的开头。*

# macos - 如何在 Mac OS X 上配置 gnu emacs

> ID：15250126
> 
> 赞同：4
> 
> 时间：2013-03-06T14:36:09.750
> 
> 标签：macos, emacs, gnu, xemacs

我在 Mac OS X 上使用 gnu emacs，但找不到 .emacs。

我创建了 ~\.emacs，但它不起作用。如何配置我的 emacs？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T06:46:51.583

这些天推荐的做法是创建一个名为 的文件夹`.emacs.d`，然后将一个名为的文件`init.el`放在那里。Emacs 将在启动时加载此文件。

```
cd
mkdir .emacs.d
cd .emacs.d
touch init.el 
```

这个`.emacs.d`文件夹是 Emacs 放置临时文件、包等的地方，你不想污染你的主文件夹。

如果您是 emacs 新手并且只想启动并运行，请考虑在 github 上下载现有 emacs 配置之一并对其进行调整：

*   [序幕](https://github.com/bbatsov/prelude)
*   [入门套件](https://github.com/technomancy/emacs-starter-kit)

# wordpress - $wp_query 何时初始化以及如何覆盖它？

> ID：15250127
> 
> 赞同：6
> 
> 时间：2013-03-06T14:36:19.343
> 
> 标签：wordpress

我正在尝试使用`WP_Query`对象编写一个新的查询函数。

我创建了一个新的模板文件并放入以下内容：

```
 $query_args = array(
            'post_type' => 'page',
            'post_parent=41',
        );

        // The Featured Posts query.
        $results = new WP_Query($query_args); 
```

但是无论我使用什么参数，查询都不会改变。看起来好像查询已经初始化并且创建新`WP_Query`查询对现有查询没有任何影响。

在我的代码之前调用的唯一 wordpress 函数是`get_header()`不包括对`WP_Query`or的任何调用`query_posts`。

我放了下面一行来找出实际的 sql 查询是什么：

```
echo $GLOBALS['wp_query']->request; 
```

实际的sql查询是：

```
SELECT wp_posts.* FROM wp_posts WHERE 1=1 AND (wp_posts.ID = '14') AND wp_posts.post_type = 'page' ORDER BY wp_posts.post_date DESC 
```

当我更改我的`$query_args`.

我想知道全局变量何时`$wp_query`初始化，我应该怎么做才能使用自己的查询？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T14:54:37.777

您正在创建一个*新* `WP_Query`对象并将其保存到`$results`. 那是查询结果的位置，而不是`$GLOBALS['wp_query']`. 当然它不会覆盖`$wp_query`. 它们是不同的东西。试试`var_dump($results)`吧。

`$wp_query`您可以通过创建一个新`WP_Query`对象来覆盖，如下所示`$wp_query = new WP_Query($query_args);`：但这效率不高。当您只需要一个查询时，您运行两个查询。更好的方法是连接到`pre_get_posts`. 就像是：

```
function alter_query_so_15250127($qry) {
   if ( $qry->is_main_query() && is_page('featured-posts-page') ) {
     $qry->set('post_type','page');
     $qry->set('post_parent',41);
   }
}
add_action('pre_get_posts','alter_query_so_15250127'); 
```

`if`条件非常重要。您需要使用该行来确保过滤器仅在您希望它触发的页面上触发。你的问题没有足够的细节让我计算出精确的条件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-04T19:43:17.173

请查看[http://codex.wordpress.org/Function_Reference/query_posts中发布的下图](http://codex.wordpress.org/Function_Reference/query_posts) ![在此处输入图像描述](../Images/ecc8f1be6d1b6a05e11b254f7ed521c1.png)

# jquery - 发送jquery数组并在jsp中接收

> ID：15250133
> 
> 赞同：0
> 
> 时间：2013-03-06T14:36:29.233
> 
> 标签：jquery, arrays, jsp

我将一些整数值存储在一个名为 myArray 的数组中。我想使用 Ajax 将 myArray 发送到 jsp 文件（file.jsp）。我在 jsp 中检索数据时遇到问题，因为我总是得到空值。这是我的代码：

```
var request = $.ajax({
   url: "file.jsp",
   type: "POST",
   data: {myArray:myArray},
   dataType: "html"
});

request.done(function(msg) {
  $("#abc").html( msg );
});
request.fail(function(jqXHR, textStatus) {
  alert( "Failed " + textStatus );
}); 
```

文件.jsp

```
String myArray = request.getParameter("spArray"); 
```

我的问题是：如何从 jquery-Ajax 成功传递 myArray 并在 file.jsp 中检索它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:44:25.527

我想我想通了。我将数组转换为字符串（即 myArray.toString();）并发送。

我现在有：

```
var request = $.ajax({
  url: "file.jsp",
  type: "POST",
  data: {myArray:myArray.toString()},
  dataType: "html"
}); 
```

并在 file.jsp 中将其拾取为

```
String myArray = request.getParameter("spArray").toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:39:13.653

尝试在 ajax 配置中更改此参数：

```
dataType:       'json',
headers:        {'Content-type' : "application/json; charset=utf-8"}, 
```

# c++ - 从同一个结构以相反的顺序创建两个优先级队列

> ID：15250136
> 
> 赞同：1
> 
> 时间：2013-03-06T14:36:40.747
> 
> 标签：c++, struct, operator-overloading, priority-queue

我有这个结构：

```
struct Passenger
{
unsigned arrive;
unsigned depart;
}; 
```

现在我需要以相反的顺序创建一个 A 和一个 B priority_queue。如果我重载运算符<，它们将具有相同的顺序。

我想知道，如何使用对立比较器创建这些优先级队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:41:03.230

您可以为 指定比较器[`std::priority_queue`](http://en.cppreference.com/w/cpp/container/priority_queue)：

```
typedef std::priority_queue<Passenger, std::vector<Passenger>> min_queue;
typedef std::priority_queue<Passenger, std::vector<Passenger>, std::greater<Passenger>> max_queue; 
```

或者，通用：

```
template <typename T, typename Container = std::vector<T>>
using min_queue = std::priority_queue<T, Container>;

template <typename T, typename Container = std::vector<T>>
using max_queue = std::priority_queue<T, Container,
        std::greater<typename Container::value_type>>; 
```

进而：

```
min_queue<Passenger> my_min_queue;
max_queue<Passenger> my_max_queue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:42:09.360

我建议您研究一下，`boost::multi_index`然后您可以拥有一个可以以不同方式访问的单一集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:42:25.317

创建优先级队列时需要指定比较器：

```
// For the moment, I'm specifying these to just compare arrival times.
// Modify that as needed.
struct GT {
    bool operator()(Passenger const &a, Passenger const &b) { 
       return b.arrive < a.arrive;
    }
};

struct LT { 
    bool operator()(Passenger const &a, Passenger const &b) { 
        return a.arrive < b.arrive;
    }
};

std::priority_queue<Passenger, std::vector<Passenger>, GT> max_heap;

std::priority_queue<Passenger, std::vector<Passenger>, LT> min_heap; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T14:45:50.867

`std::priority_queue`有第二个和第三个模板参数：

*   第二个是底层容器，默认是`std::vector`
*   第三个是比较器类，如 in`std::map`和`std::set`

**所以你不应该*重载*an `operator<`，因为那样使用起来不直观。**相反，实现这些比较器：

```
struct ArriveLess {
  bool operator()(Passenger const& lhs, Passenger const& rhs)
  { return lhs.arrive < rhs.arrive; }
};

struct DepartLess {
  bool operator()(Passenger const& lhs, Passenger const& rhs)
  { return lhs.depart < rhs.depart; }
};

/* ... */
std::priority_queue<Passenger, std::vector<Passenger>, ArriveLess> A;
std::priority_queue<Passenger, std::vector<Passenger>, std::not<ArriveLess>> B; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:42:36.910

您可以将“比较”函数传递给优先级队列模板：

```
std::priority_queue<Passenger> A;
std::priority_queue<Passenger, std::vector<Passenger>, reverse_compare> B;

bool Passenger::reverse_compare(const Passenger& rhs)
{
  return rhs < *this;    /* Note reverse order! */
} 
```

编辑：以上假设`operator <`乘客正常。

[而且我太慢了！]

# php - 主题或消息中包含特殊字符的电子邮件的 PHP 邮件标头

> ID：15250140
> 
> 赞同：5
> 
> 时间：2013-03-06T14:36:45.243
> 
> 标签：php, email, character-encoding, header, mime

我的代码：

```
$to      = 'example@example.com';
$subject = $_REQUEST['subject'] ;
$message = $_REQUEST['message'] ;
$header = "From: noreply@example.com\r\n"; 
$header.= "MIME-Version: 1.0\r\n"; 
$header.= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
$header.= "X-Priority: 1\r\n"; 

mail($to, $subject, $message, $header); 
```

当我在邮件中发送带有特殊字符（例如`®ð-˚©-ʼ“æ,˚ˍðß©`, ）的邮件时，它可以工作，但不再处理空格（每个新行或空格都被删除）第二个问题是特殊字符未显示在主题中。他们只是输出如下：`ø&#700;ª&#700;`

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T14:41:42.893

> 内容类型：文本/html

如果您设置此标头，则意味着您必须将 HTML 发送给用户。您可以决定使用 TinyMCE 之类的东西，让用户在 Word 样式的编辑器中编写消息，并使用其中的 HTML 输出。或者将您的标题设置为纯文本。

> 内容类型：文本/纯文本

编辑：试试这个

```
$to      = 'example@example.com';
$subject = $_REQUEST['subject'] ;
$message = $_REQUEST['message'] ;
$header = "From: noreply@example.com\r\n"; 
$header.= "MIME-Version: 1.0\r\n"; 
$header.= "Content-Type: text/plain; charset=utf-8\r\n"; 
$header.= "X-Priority: 1\r\n"; 

mail($to, $subject, $message, $header); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-10T06:29:15.557

我已经使用了这个标题，这对我有用......

```
$headers = '';
$headers = 'MIME-Version: 1.0'.PHP_EOL;
$headers .= 'Content-type: text/html; charset=iso-8859-1'.PHP_EOL;
$headers .= 'From: webmaster@example.com<From: webmaster@example.com>'.PHP_EOL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:16:45.720

不要使用 mail() 函数。使用为您完成（正确）工作的精心制作的课程。

[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:45:30.277

您的代码的问题是因为特殊字符也需要“特殊”字符集。

尝试将 charset=ISO 更改为 charset=UTF8...

[此外，PHP mail() 函数可以正常工作，但如果您选择Swift Mailer](http://swiftmailer.org/)等更好的解决方案，您会发现更多的好处和选择

# vim - MacVim 中的 Vim powerline (Lokaltog's) 奇怪的字符

> ID：15250147
> 
> 赞同：8
> 
> 时间：2013-03-06T14:37:05.083
> 
> 标签：vim, plugins, fonts

我第一次尝试使用 Powerline 插件（[https://github.com/Lokaltog/vim-powerline](https://github.com/Lokaltog/vim-powerline)）。

插件似乎已安装。我将 vundle 与以下命令一起使用：

```
Bundle 'Lokaltog/powerline', {'rtp':  'powerline/bindings/vim'} 
```

我尝试了许多不同的设置，但目前在我的 vimrc 中它看起来像这样：

```
set guifont=Menlo\ Regular\ for\ Powerline:h15
"set guifont=Monaco\ Regular:h15
" set rtp+=~/.vim/bundle/powerline/powerline/bindings/vim
let g:Powerline_symbols = 'fancy'
"let g:Powerline_symbols = 'compatible'
"let g:Powerline_cache_enabled = 1
"set t_Co=256 
```

我还粘贴了一些我尝试过的命令的注释。

我尝试了不同的字体，修补过的和正常的，但没有任何帮助。

laststatus 设置为 2。

我在 Mac OS X 10.8.2 上使用 MacVim。

以下是带有 2 个窗口的电力线对我的看法：

![带 2 个窗口的电力线](../Images/a5cc25ea1de9acf24a3a7ba7e042776d.png)

注意奇怪的盒装'x'符号......

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T17:41:36.810

您指的是两个不同的插件。`vim-powerline`是旧的仅限 vim 的项目。`Lokaltog/powerline`是一个新的基于 Python 的端口，并且在这个版本中代码点已经改变，因为旧代码点导致了一堆问题。

您必须：

1.  更新您的捆绑包以指向`vim-powerline`（并删除该`rtp`选项），或
2.  将您的字体更新为[https://github.com/Lokaltog/powerline-fonts](https://github.com/Lokaltog/powerline-fonts)中的一种字体（或修补您自己的字体）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T10:53:17.903

我有同样的问题。[我从https://github.com/Lokaltog/powerline-fonts](https://github.com/Lokaltog/powerline-fonts)下载了“Menlo Regular for Powerline.otf”

然后我双击 otf 文件，打开 Font Book 应用程序。我点击了安装，尽管字体在窗口中给出了乱码。然后我将该字体设置为我的终端的字体（只需将其设置在您的终端首选项中）。这解决了常规终端 vim ( `$ vim`) 中的问题，但没有在 MacVim 中解决。要在 MacVim 中修复它，我必须将以下行添加到我的 .vimrc 文件中：

```
set guifont=Menlo\ For\ Powerline 
```

反斜杠是转义空格所必需的。现在一切都很好。希望这对其他人有帮助。

编辑：添加更多细节，我的 .vimrc 现在看起来像这样：

```
""" FOR STATUSLINE
set encoding=utf-8 " Necessary to show Unicode glyphs
let g:Powerline_symbols = 'fancy'
set rtp+=/Users/nate/Library/Python/2.7/lib/python/site-packages/powerline/bindings/vim
set nocompatible   " Disable vi-compatibility
set laststatus=2   " Always show the statusline
" For powerline font in MacVim
set guifont=Menlo\ For\ Powerline 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T01:48:16.213

如果您使用的是命令行 vim（即不是 GUI 实现），您可能需要在终端的首选项中指定修补字体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-27T14:36:12.940

将此添加到 vimrc 文件中为我修复了它：

```
set guifont=Source\ Code\ Pro\ for\ Powerline "make sure to escape the spaces in the name properly 
```

来源：[https ://github.com/bling/vim-airline/issues/142](https://github.com/bling/vim-airline/issues/142)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-26T20:53:31.447

还要确保您拥有正确的字体，而不仅仅是正确的名称从[https://github.com/Lokaltog/powerline-fonts](https://github.com/Lokaltog/powerline-fonts)获取它们， 并且如果您使用航空公司，则让 g:airline_powerline_fonts = 1

注意：例如[http://fontsquirrel.com](http://fontsquirrel.com)的“Source code pro”字体会产生这种效果，但上面链接中的“Source code pro for powerline”不会

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-17T02:37:01.737

在我的情况下，状态栏中的字体在 vim 中工作（显示正确的符号），但在 macvim 中没有。将以下行添加到 .gvimrc 文件中，现在可以正常工作了。

我已经指定：h16

```
set guifont=Source\ Code\ Pro\ for\ Powerline:h16 
```

[![在此处输入图像描述](../Images/11360e3200f546a5169f45e86ae344d4.png)](https://i.stack.imgur.com/k0twm.png)

# ember.js - 页面加载时获取模型的当前id

> ID：15250155
> 
> 赞同：1
> 
> 时间：2013-03-06T14:37:33.960
> 
> 标签：ember.js

我正在尝试在 ember 站点中构建最近查看的文档列表（最后 5 个）。

我将站点设置为显示文档链接列表，每个链接都可以查看完整文档。我想要实现的是，当查看文档时，它的 id 会添加到 recentDoc 列表中。我看不到如何获取文档的 ID，也不确定应该在哪里获取它。

我很快就会整理一个 jsfiddle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:47:20.393

仅供参考，我问了一个非常相似的问题：

[Ember.js：从当前活动的路由中获取 id](https://stackoverflow.com/questions/15164703/ember-js-get-id-from-currently-active-route)

可能值得您花时间检查一下。

# sql-server - 如何确定视图的列是派生的还是常量？

> ID：15250168
> 
> 赞同：9
> 
> 时间：2013-03-06T14:38:10.773
> 
> 标签：sql-server, view, system-views

假设我有下表：

```
create table t_Item (
    ItemID int not null identity(1,1) constraint PK_Item primary key,
    Description varchar(256) not null,
    Price decimal(10,2) not null
) 
```

和以下观点：

```
create view Item as
  select ItemID
        ,Description
        ,Price
        ,1.09 Tax
        ,Price * 1.09 TaxedPrice
    from t_Item 
```

`TaxedPrice`是派生列，并且`Tax`是常数列。

因此，我无法插入或更新其中任何一个。以下第一个查询将通过，而其他查询将失败并出现错误。

```
insert into Item (Description, Price) values ('Test item', 14.00)

insert into Item (Description, Price, TaxedPrice) values ('Test item', 14.00, 15.26)

insert into Item (Description, Price, Tax) values ('Test item', 14.00, 1.09) 
```

这是返回的错误消息：

> 更新或插入视图或函数“项目”失败，因为它包含派生或常量字段。

有没有办法（也许是系统视图）列出不能更新的视图列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:41:30.993

看起来没有系统视图保存您正在寻找的信息。您可以通过解析视图定义或通过异常处理来找到派生列或常量列...不好，但没有找到其他方法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:16:26.270

1.  任何列都来自以下聚合函数，被视为派生列。平均值、计数、总和、最小值、最大值、分组、STDEV、STDEVP、VAR、VARP
2.  如果视图定义包含以下语法，则所有列都被视为派生列。UNION、UNION ALL、CROSSJOIN、除了、INTERSECT
3.  受 GROUP BY、HAVING、DISTINCT 影响的列也被视为派生列。

我不认为这涵盖了所有场景，而是编写解析器的起点。

# php - SoapClient 返回 null 但已填充 __last_response 但仍无法使用 simplexml_load_string 创建对象

> ID：15250171
> 
> 赞同：0
> 
> 时间：2013-03-06T14:38:25.370
> 
> 标签：php, soap, soap-client

我创建了一个使用我无法控制的 wsdl 的 SOAP 客户端。我调用 web 服务，它返回`null`。

当我从中复制 XML`__getLastRequest()`并在 SOAP UI 中使用它时，我得到了响应。

当我查看`__last_response`肥皂客户端时，我可以看到一个 xml 字符串

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <GetResponse xmlns="http://tempuri.org/">
      <GetResult>5923946</GetResult>
    </GetResponse>
  </s:Body>
</s:Envelope> 
```

当我尝试将其传递给`__last_response` 对象时`simplexml_load_string`，不会创建对象。

为什么不能使用两种情况下提供的 XML 创建对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:31:32.063

SimpleXML 无法加载其中包含命名空间的 xml 字符串。我找到的解决方案是删除命名空间。你可以这样做：

`$response=str_replace("<s:","",$response);`

希望这能解决您的问题。

# animation - 覆盖 scrollViewWillEndDragging 时，UIScrollView 并不总是动画减速

> ID：15250173
> 
> 赞同：7
> 
> 时间：2013-03-06T14:38:32.840
> 
> 标签：animation, uiscrollview, paging, custompaging, snapping

这是我的覆盖代码 - 它只是计算捕捉到的位置：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {

    if(targetContentOffset->y < 400) {
        targetContentOffset->y = 0;
        return;
    }

    int baseCheck = 400;

    while(baseCheck <= 10000) {
        if(targetContentOffset->y > baseCheck && targetContentOffset->y < baseCheck + 800) {
            targetContentOffset->y = (baseCheck + 340);
            return;
        }
        baseCheck += 800;
    }

    targetContentOffset->y = 0;
} 
```

当我按住手指超过一两秒以拖动滚动视图然后抬起手指时，它通常会动画到位。但是，当我快速“轻弹”它时，它很少动画 - 它只是捕捉到 targetContentOffset。我正在尝试模拟默认分页行为（尝试捕捉到自定义位置除外）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T18:05:23.563

我最终不得不手动对其进行动画处理。在同一个函数中，我将 targetContentOffset 设置为用户离开的位置（当前 contentOffset），这样它就不会触发它自己的动画，然后我将 contentoffset 设置为我的计算。此外，我添加了速度检查以触发“自动”页面更改。它并不完美，但希望它能帮助其他人解决同样的问题。

（为了便于阅读，我修改了上述函数，因为没有人需要查看我的计算）

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {

    CGPoint newOffset = CGPointMake(targetContentOffset->x, targetContentOffset->y);
    *targetContentOffset = CGPointMake([broadsheetCollectionView contentOffset].x, [broadsheetCollectionView contentOffset].y);

    if(velocity.y > 1.4) {
        newOffset.y += pixelAmountThatWillMakeSurePageChanges;
    }
    if(velocity.y < -1.4) {
        newOffset.y -= pixelAmountThatWillMakeSurePageChanges;
    }

    // calculate newoffset

    newOffset.y = calculatedOffset;
    [scrollView setContentOffset:newOffset animated:YES];
} 
```

# php - 类和函数 PHP 中的全局变量

> ID：15250174
> 
> 赞同：0
> 
> 时间：2013-03-06T14:38:37.453
> 
> 标签：php, function, globals

我在读取另一个函数中的一个函数中定义的变量时遇到问题。我有：

```
global $a;
class test{
    function aa($somevar){
        switch ($myvar){
        case 'value':
            global $a;
            $a = 15;
            break;
        }
    }
    function bb(){
        global $a;
        echo $a;
    }
}

$foo = new test();
$ccc = $foo->bb();

var_dump($ccc); 
```

我得到转储结果NULL。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:44:56.867

你永远不会跑来`test->aa()`给`a`.

```
$foo = new test();
$foo->aa();
$ccc = $foo->bb(); 
```

在这种情况下`$ccc`仍将为 null，因为您正在回显`$a`而`$foo->bb()`不是返回它。

```
function bb() {
  global $a;
  return $a;
} 
```

我也会远离全局变量并在类的构造上传递变量 $a 。例如：

```
class test {
    public $a;

    function __construct($a = null) {
      // pass initial var to $a if you want
      $this->a = $a;
    }

   function aa($somevar) {
      // reassign $a
      $this->a = $somevar;
   }
}

$foo = new test();
$foo->aa(5);
// or just $foo = new test(5);
var_dump($foo->a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:45:46.140

尝试这个 ：

```
class test
{
    public $a;
    function aa($somevar)
    {
        switch ($myvar)
        {
         case 'value':
         $this->a = 15;
         break;
        }
    }
    function bb()
    {        
        return $this->a;
    }
}

$foo = new test();
$ccc = $foo->bb();

var_dump($ccc); 
```

更新：

```
<?php
class test
{
    var $a;
    function aa($somevar)
    {
        switch ($somevar)
        {
         case 'value':
         $this->a = 15;
         break;
        }
    }
    function bb()
    {        
        return $this->a;
    }
}

$foo = new test();
$foo->aa('value');
$ccc = $foo->bb();

var_dump($ccc);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:40:47.797

变量`$a`应该是类内的[属性](http://php.net/manual/en/language.oop5.properties.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:41:16.470

在您的代码中，您绝不会为`$a`.

唯一的赋值`$a`是在`test->aa`方法中，它使用不一致的变量，因此即使被调用也永远不会赋值`$a`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:07:44.627

这是代码试试这个..

```
<?php
 global $a;
  class test{

    function aa($somevar){
       switch ($somevar){
        case 'value':
            global $a;
            $a = 15;
            break;
        }
    }

function bb(){
    global $a;
    echo $a;
    return $a;
}
}

$foo = new test();
$foo->aa('value');
$ccc = $foo->bb();

var_dump($ccc);

?> 
```

# jquery - 在 getJSON 和 setInterval 中调用 FancyBox

> ID：15250177
> 
> 赞同：0
> 
> 时间：2013-03-06T14:38:47.817
> 
> 标签：jquery, fancybox, setinterval, getjson, fancybox-2

我正在尝试使用 getJSON 方法获取状态码，如果状态码 > 0，我想显示一个花式框窗口。

我希望这个过程每 5 秒执行一次（使用 setInterval 函数）。脚本执行没有任何错误。显示如下所示的警报，但不显示fancybox DIV。

当状态> 0 时显示fancybox 弹出窗口，如果不是，则不显示。

请纠正我做错的地方。

这是HTML代码。

```
<div style="display:none">
   <div id="myModal">
     <h1>Conversion in Progress</h1>
   </div> 
</div> 
```

这是jQuery代码。

```
$(document).ready(function() {           

    function myplugin() {             
        $.getJSON("get-status.php", function (data) {                        
              $.each(data, function (key, status) {   
                   if(status > 0) {
                      alert("Bad Status");         // Works;
                      $("#myModal").fancybox();
                   }else{
                      alert("Good Status");        // Works;
                      $.fancybox.close();
                   }
               });       
        });  
     };

     $(function() {
          setInterval(function() { myplugin() }, 5000);
     });

});'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:35:11.463

您正在初始化 fancybox，但实际上并未触发它。

尝试添加`$("#myModal").fancybox().click();`

# sql - 使用 sql server 2008 进行表合并

> ID：15250181
> 
> 赞同：0
> 
> 时间：2013-03-06T14:38:57.707
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2008-r2

我有一个带有用户表的数据库。我想用 csv 文件更新所有用户。我使用 SqlBulkCopy 将我的 csv 文件导入到一个临时表中。

我的下一步将是创建一个使用临时表更新我的用户表的存储过程。到目前为止，我有这个：

```
USE [Userdata]
GO
/****** Object:  StoredProcedure [dbo].[aml_UserImport]    Script Date: 03/06/2013 14:11:44 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
-- =============================================
-- Author:      michiel reyers
-- Create date: 07-01-2013
-- Description: 
-- =============================================
CREATE PROCEDURE [dbo].[aml_UserImport2]

AS

    SET NOCOUNT ON;

    MERGE users
        USING temp_users ON temp_users.ID = users.ID
        WHEN MATCHED 
            THEN UPDATE SET users.typeId = temp_users.typeId,
                                users.Name = temp_users.Name,
                                users.active = 1
        WHEN NOT MATCHED BY SOURCE
            THEN UPDATE SET users.active = 0
        WHEN NOT MATCHED BY TARGET
            THEN Insert (ID,typeID,Name,active) 
            VALUES (temp_users.ID,temp_users.typeId,temp_users.Name,1)
    ; 
```

当我尝试执行此操作时，出现错误：

> 消息 102，级别 15，状态 1，过程 aml_UserImport2，第 13 行“合并”附近的语法不正确。

我究竟做错了什么？

我添加了半列，但仍然没有运气:-(

**更新：**

我进行了重新检查，尽管我使用的是 MS SQL Server Management 2008 R2。看来我的数据库具有 SQL Server 2005 (90) 的兼容性级别。这可能解释了为什么这不起作用....

感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:47:59.360

我的建议是：

1.  在合并表达式的末尾添加分号
2.  请检查 ACTIVE 字段是否 = 定义为 INT。如果是 TINYINT，请显式地投射 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:42:42.137

放一个; 合并后。

MERGE 语句需要分号 (;) 作为语句终止符。在没有终止符的情况下运行 MERGE 语句时引发错误 10713。（来自 MSDN）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:53:42.927

在与 SQL 服务器的合并语句中，您需要用`;`分号结束它

[在此处检查语法](http://technet.microsoft.com/en-us/library/bb510625.aspx)MSDN

```
MERGE users
    USING temp_users ON temp_users.ID = users.ID
    WHEN MATCHED 
        THEN UPDATE SET users.typeId = temp_users.typeId,
                        users.Name = temp_users.Name,
                        users.active = 1
    WHEN NOT MATCHED BY SOURCE
        THEN UPDATE SET users.active = 0
    WHEN NOT MATCHED BY TARGET
        THEN Insert (ID,typeID,Name,active) 
            VALUES (temp_users.ID,temp_users.typeId,temp_users.Name,1); 
```

# asp.net-mvc - 从 WebAPI 生成路由 URL 到 MVC 控制器操作

> ID：15250186
> 
> 赞同：21
> 
> 时间：2013-03-06T14:39:12.587
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-mvc-routing, urlhelper

我习惯于使用类似于以下内容的 MVC 控制器操作中的其他控制器操作生成路由 URL：

```
public class ApplicationController : Controller
{
    public ActionResult Index( )
    {
        var url = Url.RouteUrl("routename",
           new { controller = "Application", Action = "Index2" , other="other" });
    }

    public ActionResult Index2( string other)
    {
    }
} 
```

但是我还需要能够从 webapi 中生成 MVC 控制器操作的 URL，我将如何去做呢？

APIController 上似乎有一个 UrlHelper 属性，但我找不到任何有关如何使用它的示例，并且我自己也无法弄清楚。

更新：我试图生成一个 url 的原因是这个特定的 webapi 方法发送了一封电子邮件，该电子邮件为收件人提供了一个链接，以将用户引导回网站的适当部分。我显然想摆脱硬编码，因为它不适用于不同的部署，而且如果我开始更改路由，此链接将被破坏。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-06T20:08:48.203

您也可以将 MVC 路由名称与 Web API UrlHelper 一起使用。例子，

```
 Url.Link("Default", new { Controller = "Account", Action = "Login" }); 
```

或者

```
 Url.Route("Default", new { Controller = "Account", Action = "Login" }); 
```

# sql-server - 无法在 Access 2010 中查询 nVarChar(Max) 字段

> ID：15250191
> 
> 赞同：3
> 
> 时间：2013-03-06T14:39:20.357
> 
> 标签：sql-server, ms-access, nvarchar

已经使用 Stack Overflow 作为资源数百次，但我第一次发布问题寻求帮助！

我在 SQL Server 2005 中有一个表，其中包含 4 个 nVarChar(Max) 字段。我正在尝试使用 ADO 2.8 从 Access (2010) VBA 模块中提取数据我正在使用 SQL 驱动程序 SQLNCLI10 进行连接

（我不能使用链接表，因为我最终要查询的“表”是表值函数）

然后当我打印/使用记录集时，数据变得混乱并与同一记录中的其他字段连接 - 并带有一堆晦涩的字符。

VBA：（尝试了其他各种方法，结果相同）

```
Sub TestWithoutCasting()
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim i As Integer

cn.Open "Data Source=ART;DataTypeCompatibility=80;MARS Connection=True;"

Set rs = cn.Execute("SELECT * FROM JobDetail WHERE JobID = 2558 ORDER BY SeqNo ASC")

Do While Not rs.EOF

    For i = 1 To rs.Fields.Count
        Debug.Print rs.Fields(i).Name & ": " & rs.Fields(i).Value
    Next i

    rs.MoveNext
Loop

End Sub 
```

示例输出：

```
SeqNo: 1
CommandID: 2
Parameter1:     2 Daily Report    é [& some other chars not showing on here]
Parameter2: [Null]
Parameter3: [Null]
Parameter4: [Null]
Description: Daily Report
Active: False 
```

预期输出：

```
SeqNo: 1
CommandID: 2
Parameter1: SELECT  Day_Number  ,Day_Text  ,Channel_Group_ID [...etc]
Parameter2: [Null]
Parameter3: [Null]
Parameter4: [Null]
Description: Daily Report
Active: False 
```

因此，它从其他字段中获取数据位而不是正确的数据（在这种情况下，它是一条 SQL 语句）

然后我尝试将 nvarchar(max) 字段转换为源文本

视图创建：

```
 CREATE VIEW TestWithCast 
    AS
    SELECT jd.JobID, jd.SeqNo, jd.CommandID
    ,cast(jd.Parameter1 as text) as Parameter1
    ,cast(jd.Parameter2 as text) as Parameter2
    ,cast(jd.Parameter3 as text) as Parameter3
    ,cast(jd.Parameter4 as text) as Parameter4
    ,jd.[Description]
    ,jd.Active

    FROM JobDetail jd 
```

现在，我最初在这里有一些运气——使用与上面相同的代码确实带回了数据——但是当我在我的主代码中使用这个代码时（它跳入和跳出其他程序）；一旦我查询了记录集的第一个结果，它似乎就会擦除其余的记录/字段，将它们设置为 Null。我还尝试将每个字段的值设置为一个变量，而 vba 的其余部分在获取下一条记录之前运行 - 但这也无济于事。

几乎感觉就像我需要将记录集转储到本地 Access 表中，并从那里查询 - 这是已经是一种解决方法的集市解决方法（通过转换为文本）。

我在这里完全缺少一些东西，还是我确实需要转换为文本并加载到本地表？

感谢您的帮助-这让我发疯了！

附言。希望我提供了正确的详细信息/信息-如果我错过了任何关键，请告诉我。

编辑：

哎呀，我想我已经做到了/找到了问题......我将驱动程序更改为 SQLSRV32 (v6.01) - 并且似乎直接针对文本转换字段工作正常。那么...为什么它可以与较旧的驱动程序一起使用，但不能与较新的“推荐”（通过我阅读的各种来源）一起使用。而且...在本机客户端上使用它会不会有很大的缺点？

编辑2：

好的，我已经在几台机器上尝试了一些驱动程序，在每种情况下都使用 TEXT CASTING 和 Directly to VARCHAR MAX..

[在我的带有 SQLSMS 2008 的 Windows 7 机器上]

SQL Native Client 10.0 - 这两种方法都不能可靠地与这个驱动程序一起工作 SQL Server 6.01 - 两种方法似乎都可靠地工作 - 虽然需要进一步测试

[在我们的带有 SQLS 2005 的生产服务器上]

SQL Native Client (v2005.90) - 根本不能与 varchar(max) 一起使用，但可以与文本转换 SQL Server (v2008.86) 一起使用 - 两种方法似乎都可以可靠地工作 - 虽然需要进一步测试

这应该使部署变得有趣！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T15:29:50.177

我有同样的问题，通过将字段转换为 nvarchar(1000) 来解决它。如果 1000 个字符就足够了，这将是一个简单、兼容的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:22:26.060

这不是一个真正的答案，因为我没有对其进行测试，但是……您在连接中使用了“DataTypeCompatibility=80”参数。据我所知，DataTypeCompatibility=80 指的是 SQL Server 2000，其中仍然没有实现 nvarchar(max) 字段类型。

# visual-c++ - 我可以保存 opencv_traincascade 结果吗？

> ID：15250192
> 
> 赞同：0
> 
> 时间：2013-03-06T14:39:22.187
> 
> 标签：visual-c++, opencv, cmd

在 cmd 中使用 OpenCV 训练检测器时，会显示一些如上的表格

```
 +-----+----------+-----------+
 |  N  |    HR    |     FA    |
 +-----+----------+-----------+ 
```

以及每个阶段的接受率。注意这些值存储在 .xml 文件中。是否有可能将这些值保存在某处？如果我让计算机通宵训练并且 cmd 不保存超过一定数量的行，我需要它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T11:54:52.950

您可以在调用该工具时将标准输出重定向到文件。例如，将所有内容写入“output.txt”。`opencv_traincascade *all_your_parameters* **> output.txt**`

# c++ - 对象创建和绑定的奇怪结果

> ID：15250193
> 
> 赞同：0
> 
> 时间：2013-03-06T14:39:25.880
> 
> 标签：c++, this, dynamic-cast

我错误地写了一些愚蠢的东西，令我惊讶的是，它奏效了。

```
class A
{    public:
        void print()
        {
            std::cout << "You can't/won't see me !!!" << std::endl;
        }  
        A* get_me_the_current_object()
        {
            return this;
        }
};  
int main()
{
    A* abc = dynamic_cast<A*>(abc);
    abc->print();
} 
```

在这里，`A* abc = dynamic_cast<A*>(abc)`我正在对未声明的指针执行 dynamic_cast。但是，它有效，所以我假设上述语句被破坏为：

```
A* abc;
abc = dynamic_cast<A*>(abc); 
```

因此，它有效。但是，在尝试一些更奇怪的场景时，例如：

```
A* abc;
abc->print(); 
```

并进一步

```
A* abc = abc->get_me_the_current_object(); 
abc->print(); 
```

看着这些例子是如何工作的，映射是如何完成的，我大吃一惊。
有人可以详细说明这些是如何工作的吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:42:42.727

您犯了一个常见的错误，即认为未定义的行为和 C++ 错误意味着您应该预期会看到严重的崩溃或计算机着火。有时什么也不会发生。这并不意味着代码“有效”，因为它仍然有一个错误，只是症状还没有出​​现……**还没有**。

> 但是，它有效，所以我假设上述语句被破坏为：

是的，您所做的只是将未初始化的指针转换为相同的类型，即不需要转换，因此编译器什么也不做。您的指针仍然是相同的类型，并且仍未初始化。

这与此类似：

```
int i = i; 
```

根据 C++ 的语法，这是有效的，因为`i`此时在范围内，但未定义，因为它复制了一个未初始化的对象。但是，它实际上不太可能使您的计算机着火，它似乎“工作”。

> 有人可以详细说明这些是如何工作的吗？

从技术上讲，您正在取消引用无效指针，这是未定义的行为，但由于您的成员函数实际上并未使用对象的任何成员，因此不会取消引用无效`this`指针，因此代码“有效”（或至少看起来如此。 )

这类似于：

```
void function(A* that)
{
    std::cout << "Hello, world!\n";
}
A* p;
function(p); 
```

因为`that`没有使用指针（就像`this`在你的成员函数中没有使用指针），这不一定会崩溃，尽管它可能会在复制未初始化的指针可能导致硬件故障的实现中发生。在您的示例中，您的编译器似乎不需要取消引用`abc`来调用非静态成员函数，并且将其作为隐藏`this`参数传递不会导致硬件故障，但即使它没有失败，行为仍然是未定义的以明显的方式，例如段错误..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:42:13.433

`abc`未初始化并指向内存中未定义的位置，但您的方法不会从中读取任何内容，`*this`因此它们不会崩溃。

他们不会崩溃的事实几乎可以肯定是实现定义的行为。

# url-shortener - Bit.ly / Ow.ly 链接通过 Google +1 果汁？

> ID：15250197
> 
> 赞同：0
> 
> 时间：2013-03-06T14:39:39.020
> 
> 标签：url-shortener

我们已经开始通过 Hootsuite 将我们的网站文章发布到 Google+，结果是通过 Ow.ly 缩短了指向页面的链接。

现在在我们的 Google+ 页面上，我们注意到即使发布的页面已经 +1'da 次数，实际网页上的计数器并没有增加。

以前，当我们直接发布到 Google+ 页面时，计数器会增加。

因此，我们是否会因使用 Hootsuite 而失去任何 +1 优点？

干杯，

克里斯。

# amazon-web-services - 通过 msmtp 发送 Crontab 电子邮件 -> Amazon SES

> ID：15250199
> 
> 赞同：3
> 
> 时间：2013-03-06T14:39:44.667
> 
> 标签：amazon-web-services, cron, smtp, crontab, amazon-ses

我有一个包含 MAILTO=my.email@example.com 的 crontab。我的服务器使用 msmtp 将电子邮件转发到 Amazon Simple Email Service。我的问题是 cron 命令的输出永远不会到达我的邮箱。这是 msmtp 日志所说的：

> 3 月 6 日 14:26:02 host=email-smtp.us-east-1.amazonaws.com tls=on auth=on user=MY.SES.USER from=my.email@example.com 收件人=my.email@ example.com smtpstatus=554 smtpmsg='554 交易失败：用户名丢失：?Cron Daemon?.' errormsg='服务器不接受邮件' exitcode=EX_UNAVAILABLE

为了让 Amazon SES 接受 cron 电子邮件，我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-13T17:05:37.153

[AWS 开发人员论坛](https://forums.aws.amazon.com/thread.jspa?messageID=540183)建议的解决方案：

> 事实证明，cron 在源代码中具有硬编码的“发件人”地址（cron 源代码中的 qv“do_command.c”），因此无法影响 cron 传输到 sendmail 的内容（在我们的例子中，符号链接到“/usr/bin/msmtp”）。
> 
> 然而，由于 Linux 的魔力，我们确实有能力改变进入 sendmail 的文本流。
> 
> 我解决这个 cron 限制的方法是将“msmtp”二进制文件移动到“msmtp.bin”，然后创建一个 shell 脚本“/usr/bin/msmtp”：
> 
> ```
> #! /bin/bash
> sed -e 's/root .Cron Daemon./user@example.com/' | /usr/bin/msmtp.bin "$@" 
> ```
> 
> 这也是，AFAIK，唯一意味着在“全局”设置中使用时必须将“调试”标志设置为 msmtp（例如 cron，或使用您无法控制的参数调用 sendmail 的其他情况）。
> 
> 虽然上面的脚本相当简单，但您也可以通过检查魔术“-FCronDaemon”的输入参数来有条件地更改文本，该魔术“-FCronDaemon”也硬编码在 cron 二进制文件中。如果任何其他程序使用“-FCronDaemon”调用 sendmail，我会感到震惊。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-29T11:13:58.353

有完全相同的问题，但上面的答案对我不起作用，所以这就是我所做的......

由于问题与 cron 无关，并且将 sendmail 符号链接到 msmtp 可以在其他任何地方使用，我不想为所有内容全局更改 msmtp 命令。所以我首先创建了 /usr/bin/msmtp_cron.bin 并使其可执行。

接下来我必须通过编辑 /etc/sysconfig/crond 来告诉 cron 使用它作为它的邮件路径：

```
CRONDARGS="-m '/usr/bin/msmtp_cron.bin -t'" 
```

然后不要忘记重新启动 crond（仅重新加载是不够的）：

```
$ sudo systemctl restart crond.service 
```

回到 /usr/bin/msmtp_cron.bin，在这个文件中，我首先必须找出 cron 实际上是在流式传输到 sendmail/msmtp 以了解我可以进行哪些替换：

```
sed '' > /tmp/cron-mail-capture.txt 
```

这产生了这些标题：

```
From: "(Cron Daemon)" <root> 
```

它与其他答案略有不同，所以我的 sed 脚本最终看起来像这样：

```
sed -e 's/..Cron Daemon.* <root>/me@mydomain.com/' | /usr/bin/msmtp -t "$@" 
```

现在它通过 AWS SES 成功地将 cron 消息发送到我的电子邮件帐户。

# java - Java同步和静态同步方法访问静态字段

> ID：15250201
> 
> 赞同：0
> 
> 时间：2013-03-06T14:39:48.017
> 
> 标签：java, synchronization

以下程序在静态同步方法和实例同步方法试图访问不同线程中同一类的静态字段的情况下会发生什么行为？任何线程都会被阻塞吗？它非常混乱。

```
class MyClass
{
        public static int i = 5;

        public synchronized void m1()
        {
                System.out.println(i); //uses static field i of MyClass
            //T1 is executing this method
        }

        public static synchronized void m3()
        {
            //T2 will be able to call this method on same object lock while it is using
            //static field i???
            System.out.println(i);//uses static field i of MyClass
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:48:34.640

同步实例方法等价于

```
public void m1() {
    synchronized(this) {
        ...
    }
} 
```

（好吧，它们并不完全相同，但是您的问题的答案不会受到这种差异的影响）。

同步的静态方法在类上同步：

```
public void m2() {
    synchronized(MyClass.class) {
        ...
    }
} 
```

如您所见，两个块在不同的对象`m1`上同步：在调用它的实例上`m2`同步，在`Class<MyClass>`代表您在 JVM 中的类的实例上同步。所以这两个方法可以在不相互阻塞的情况下调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T14:43:00.937

你总是在一个对象上同步。

函数 m1 在调用它的对象的实例上同步。

函数 m3 在类本身上同步。

m1 可以写成：

```
 public void m1()
        {
            synchronized(this) { 
                System.out.println(i); //uses static field i of MyClass
                //T1 is executing this method
            }
        } 
```

因此，您正在对两个不同的对象进行同步，这两种方法可以同时访问任何全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:47:43.133

您的示例代码看起来不错。

根据我的说法，确保静态变量同步的最佳方法是。由于在您的班级之外无法访问锁定对象。见下文。

```
public class MyClass
{
    private static int i = 0;
    private static final Object lockObject = new Object();

    public void m1() {
        synchronized (lockObject ) {
            //Use you static var
        }
    }

    public void m3() {
        synchronized (lockObject ) {
            //Use you static var
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:44:18.363

方法 m1 和 m3 可以独立执行。

因为正如你已经说过的那样`static synchronized`是在对象上。因此与 相同`synchronize(MyClass.class)`。

`synchronized`在实例范围内可用。所以它只对实例被阻止。这与使用相同：

```
MyClass myClass = new MyClass();
synchronize (myClass)
{
.....
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T14:41:30.203

Java 没有任何与访问静态字段相关的同步控制。

如果您将方法设为空，则同步将完全相同。

具体来说，只要任何线程正在执行该类型中的任何同步静态方法，所有其他调用同步静态方法的线程都会等待它们完成，因此一次最多会执行一个同步静态方法。

# jquery - 用jquery在元素集中的每个元素之前插入属性值？

> ID：15250205
> 
> 赞同：0
> 
> 时间：2013-03-06T14:40:07.407
> 
> 标签：jquery

我想用jquery来转换

```
<div data-expand-label="foo" />
<div data-expand-label="bar" /> 
```

进入

```
<p>foo</p>
<div data-expand-label="foo" />
<p>bar</p>
<div data-expand-label="bar" /> 
```

这是我认为可行的：

```
$('[data-expand-label]').before('<p>'+$(this).attr('[data-expand-label]')+'</p>'); 
```

但“这”似乎不起作用。为什么？而我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:46:05.067

我认为尝试以下方法可能更容易：

```
$(document).ready(function() {
    $('[data-expand-label]').each(function() { $(this).before('<p>'+$(this).attr('data-expand-label')+'</p>'); });
}); 
```

我不相信您可以在您所处的上下文中使用“$（this）”，它需要以上述方式引用。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:46:41.787

您需要遍历要应用新元素的每个元素，如下所示：

```
$('div[data-expand-label]').each(function() {
    $(this).before($('<p></p>').html($(this).attr('data-expand-label')));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:47:30.230

`this`只评估一次（每次输入有问题的代码），所以它不能同时是`<div...foo>`and `<div...bar>`。您将需要遍历元素。

`.before`接受一个回调参数，它会很高兴地为您迭代。但是，您确实需要提供回调。改变：

```
$('[data-expand-label]').before(
  '<p>'+$(this).attr('[data-expand-label]')+'</p>'
); 
```

（您的代码）到：

```
$('[data-expand-label]').before(function(){
  return '<p>'+$(this).attr('[data-expand-label]')+'</p>'
}); 
```

或者，更好的是，如果`data-expand-label`应该是文本，

```
$('[data-expand-label]').before(function(){
  return $('<p>').text($(this).attr('[data-expand-label]'))
}); 
```

# php - 更新组合值

> ID：15250209
> 
> 赞同：0
> 
> 时间：2013-03-06T14:40:15.047
> 
> 标签：php, jquery, html

我有一个只显示一些 mysql 数据库的组合。我还有一个创建数据库的表单。我想动态刷新组合（如果可能）以显示表单创建的新数据库。这是代码片段：

```
<div id="tools">

    <P>Add a Set list:<br>
        <LABEL for="labelName">Set List Name: </LABEL>
              <INPUT type="text" name="slName" id="slName"><button id="createSL" value="Create Setlist">Create Set</button>
        </P><br>
    <P>Delete a Set list:<br>
        <? include("remSLcombo.php"); ?> <button href="#" type="button" id="delSl">Delete Setlist</button>
    </P>
    <p>Check how to reload combos</p>

</div><BR>

    <? include("combo.php"); ?> 
```

为创建数据库而调用的 Jquery 函数：

```
$('#createSL').click(function(){
            var sendIt = $("#slName").val();
           $.ajax({
                type: "POST",
                url: "createSL.php",
                data: {slName : sendIt},
                error: function(e){
                    alert("The PHP Call failed!  hmmm");
                    alert(e.status);
                },
                success:  function(response){
                    alert(response);
                }

            });
           $("#selcombo").load("combo.php");
           $("#tools").hide().html(data).fadeIn('fast');
        }); 
```

组合.php：

```
 <?php

echo '<select id="tunelist" name="tunelist" >'; 
$link = mysql_connect('localhost', 'setlist', 'music');
$query = mysql_query("SHOW DATABASES");
echo '<option>Select a Show</option>';
while ($row = mysql_fetch_assoc($query)) {
    if ($row['Database'] == "information_schema"){}
    elseif ($row['Database'] == "performance_schema"){}
    elseif ($row['Database'] == "mysql"){}
    else{
        echo '<option value="'.$row['Database'].'">'.$row['Database'].'</option>';
    }
}
echo '</Select>';

?> 
```

使用上面的表格添加数据库后，如何刷新组合中的值（由 combo.php 制作）？

非常感谢任何帮助！

罗兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:47:53.397

尝试移动

```
$("#selcombo").load("combo.php"); 
```

到你的`success`函数内部：

```
success: function(response){
    alert(response);
    if (response == true) // or something like this to ensure the success of the operation
         $("#selcombo").load("combo.php");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:46:03.417

您要做的就是返回`createSL.php`新组合框的代码并在那里加载。

这是你的代码

```
 success:  function(response){
                alert(response);
            } 
```

写一些类似的东西：

```
 success:  function(response){
            $('#tunelist').html(response);
        } 
```

响应类似于`Combo.php`

# sql - SQL LIKE（反向）

> ID：15250211
> 
> 赞同：1
> 
> 时间：2013-03-06T14:40:19.253
> 
> 标签：sql

我对如何完成这件事有点困惑。我有一个具有这些值的数据库表：

```
| id |  file_type | code | position |
-------------------------------------
| 1  |    Order   |  SO  |   1      |
| 2  |    Order   | 1-SO |   7      |
| 3  |    Order   | 1_SO |   7      | 
```

现在，我想获取文件名的位置和文件类型，所以我想出了这个查询：

```
SET @FileName = '1-SO1234567890.pdf'

SELECT * 
FROM   tbl_FileTypes 
WHERE  CHARINDEX(code,@FileName)> 0 
```

可悲的是，我在这里得到了两个结果，我只需要“1-SO”结果的数据。

```
| id |  file_type | code | position |
-------------------------------------
| 1  |    Order   |  SO  |   1      |
| 2  |    Order   | 1-SO |   7      | 
```

我相信我的 WHERE 子句会导致这种情况发生。有没有更好的方法让我得到我想要的结果？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:50:39.287

您可能想`SUBSTRING`改用（假设 T-SQL）：

```
WHERE code = SUBSTRING(@FileName,1, LEN(code)); 
```

它检查第一个 n-chars 是否`FileName`等于给定的`code`.

[**演示**](http://www.sqlfiddle.com/#!3/02631b/11/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:53:06.263

好

```
SET @FileName = '1-SO1234567890.pdf'

SELECT * 
FROM   tbl_FileTypes 
WHERE  CHARINDEX(code,@FileName) = 1 
```

在这种情况下可以工作，但如果你有一个代码“1-SOS”，它会再次失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:57:56.850

既然你是`cheking left most characters`，你也可以使用`LEFT()`如下功能。也用于`TOP (1)`获取单个记录并根据需要考虑订购。

```
SELECT TOP (1) * 
FROM   tbl_FileTypes 
WHERE  LEFT(@FileName,LEN(code)) = code
--ORDER BY yourCol 
```

# ruby - 一些 `Fixnum` 属性

> ID：15250212
> 
> 赞同：2
> 
> 时间：2013-03-06T14:40:20.407
> 
> 标签：ruby

`Fixnum`我在[doc](http://ruby-doc.org/core-1.9.3/Fixnum.html)中找到了以下功能。

> `Fixnum`对象具有直接价值。这意味着当它们被分配或作为参数传递时，传递的是实际对象，而不是对该对象的引用。

可以在 IRB 中显示相同的内容吗？希望只有它会被我正确理解？

> 赋值不对 Fixnum 对象起别名。

那它实际上是什么？

> 对于任何给定的整数值，实际上只有一个 Fixnum 对象实例，因此，例如，您不能将单例方法添加到 `Fixnum`.

无法理解不使用对象实例添加`singleton`方法的原因。`Fixnum`

我对第二点进行了一些尝试，如下所示：

```
a = 1                      # => 1
a.class                    # => Fixnum
b = a                      # => 1
b.class                    # => Fixnum
a == b                     # => true
a.equal? b                 # => true
a.object_id == b.object_id # => true 
```

但我仍然很困惑。任何人都可以在这里帮助我了解这些功能的核心吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T01:15:30.047

在 Ruby 中，大多数对象都需要内存来存储它们的类和实例变量。一旦分配了这个内存，Ruby 就通过这个内存位置来表示每个对象。当对象被赋值给一个变量或传递给一个函数时，传递的是这个内存的位置，而不是这个内存中的数据。单例方法利用了这一点。当你定义一个单例方法时，Ruby 会默默地用一个新的单例类替换对象类。因为每个对象都存储它的类，Ruby 可以很容易地用一个实现单例方法（并继承自原始类）的新类替换对象的类。

对于立即值的对象，这不再是正确的：`true`、`false`、`nil`、所有符号和小到足以容纳在 Fixnum 中的整数。Ruby 不会为这些对象的实例分配内存，它不会在内部将对象表示为内存中的位置。相反，它根据对象的内部表示来推断对象的实例。这意味着双重：

1.  每个对象的类不再存储在内存中的特定位置，而是由直接对象的类型隐式确定。这就是为什么 Fixnums 不能有单例方法的原因。

2.  具有相同状态的立即对象（例如，整数 2378 的两个 Fixnums）实际上是相同的实例。这是因为实例是由这个状态决定的。

为了更好地理解这一点，请考虑对 Fixnum 进行以下操作：

```
>> x = 3 + 7
=> 10
>> x.object_id == 10.object_id
=> true
>> x.object_id == (15-5).object_id
=> true 
```

现在，考虑使用字符串：

```
>> x = "a" + "b"
=> "ab"
>> x.object_id == "ab".object_id
=> false
>> x.object_id == "Xab"[1...3].object_id
=> false
>> x == "ab"
=> true
>> x == "Xab"[1...3]
=> true 
```

Fixnums 的对象 id 相等的原因是它们是具有相同内部表示的直接对象。另一方面，字符串存在于分配的内存中。每个字符串的对象 id 是其对象状态在内存中的位置。

### 一些底层信息

要理解这一点，您必须了解 Ruby（至少 1.8 和 1.9）在内部如何处理 Fixnums。在 Ruby 中，所有对象在 C 代码中都由类型为 的变量表示`VALUE`。Ruby 对 施加以下要求`VALUE`：

1.  类型 VALUE 是足以容纳指针的最小整数。这意味着，在 C 中，`sizeof(VALUE) == sizeof(void*)`.

2.  任何非立即对象必须在 4 字节边界上对齐。这意味着 Ruby 分配的任何对象都将具有`4*i`某个整数的地址`i`。这也意味着所有指针在它们的两个最低有效位中都有零值。

第一个要求允许 Ruby 将指向对象的指针和立即值存储在类型变量中`VALUE`。第二个要求允许 Ruby 根据两个最低有效位检测 Fixnum 和 Symbol 对象。

为了更具体，考虑 Ruby 对象的内部二进制表示`z`，我们将`Rz`在 32 位架构中调用它：

```
MSB                                   LSB
  3           2            1            
 1098 7654 3210 9876 5432 1098 7654 32 10
 XXXX XXXX XXXX XXXX XXXX XXXX XXXX AB CD 
```

Ruby 然后解释`Rz`， 的表示`z`，如下：

1.  如果`D==1`，`z`则为 Fixnum。该 Fixnum 的整数值存储在表示的高 31 位中，并通过执行[算术右移](http://en.wikipedia.org/wiki/Arithmetic_shift)以恢复存储在这些位中的有符号整数来恢复。

2.  测试了三种特殊表示（全部带有`D==0`）

    *   如果`Rz==0`, 那么`z`是`false`
    *   如果`Rz==2`, 那么`z`是`true`
    *   如果`Rz==4`, 那么`z`是`nil`
3.  如果`ABCD == 1110`，那么 'z' 是一个符号。该符号通过右移八个最低有效位（即，`z>>8`在 C 中）转换为唯一 ID。在 32 位架构上，这允许 2^24 个不同的 ID（超过 1000 万个）。在 64 位架构上，这允许 2^48 个不同的 ID。

4.  否则，`Rz`表示 Ruby 对象实例在内存中的地址，其类型`z`由该位置的类信息确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:52:20.863

好...

1.  这是 MRI 的内部实现细节。您会看到，在 Ruby 中（在 C 方面），所有 Ruby 对象都是`VALUE`. 在大多数情况下，a`VALUE`是指向堆栈中的对象的指针。但是直接值（Fixnums、true、false、nil 和其他）存在于`VALUE`指向对象的指针通常存在的地方。
2.  它使变量成为完全相同的对象。现在，我不知道这是如何在内部工作的，因为它会将其分配给`VALUE`自身，但确实如此。
3.  因为每次我`1`在程序中使用数字时，我都使用同一个对象。因此，如果我在 上定义一个单例方法`1`，我的程序中的*每个*地方、所需的程序等都会有该单例方法。单例方法通常用于本地猴子补丁。所以，为了防止这种情况，Ruby 不允许你这样做。

# spring - 使用 spring mvc 和 maven3 每个客户的站点分离

> ID：15250213
> 
> 赞同：1
> 
> 时间：2013-03-06T14:40:22.307
> 
> 标签：spring, spring-mvc, maven-3

只是关于用于根据客户特定要求分离 Web 应用程序的任何技术的一般性问题。目前我有一个 Web 应用程序，但我需要为一个客户添加另一个客户不需要的新功能。我知道 spring 3 提供了对配置文件的新支持，但我只是好奇是否有人遇到过类似的问题以及他们如何解决它，特别是使用 spring mvc 和 maven 作为构建管理工具

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:18:05.543

执行此操作的正确方法如下：

*   有一个网络组装模块。该模块将构建一个war文件，其中包含提取到简单定义为依赖项的单独模块中的适当特征。我的建议是为每个客户端创建一个单独的 Web 组装项目。通过这种方式，您可以让自己保持整洁，避免混淆（例如向尚未付费的客户发布功能），并且总体上更容易维护。

*   此外，决定是否在`version`标签级别进行版本分离，或者`classifier`：

    *   您可以使用该`version`标签来分隔分支中的内容。

    *   您还可以使用该`classifier`标签来分隔特定于您的客户端的配置。

# python - Django：查询设置多个条件或收集到新对象

> ID：15250219
> 
> 赞同：1
> 
> 时间：2013-03-06T14:40:39.720
> 
> 标签：python, django, object, django-queryset

我需要`Comment`为所有`Project`包含特定`User`. 意思是，用户所属的所有项目的所有评论。

一个用户可以属于多个项目，每个项目都有很多评论。

这应该如何正确完成？到目前为止，我已经通过创建嵌套的 for 循环在模板中解决了这个问题，但这并不好，因为我需要对结果进行排序。

我在想类似的事情：

```
projects = user.projects
comments = Comment
for p in projects:
    for c in p.comments:
        comments.append(c)
return comments 
```

...似乎不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:42:59.677

我认为这会做到：

```
query = Comment.objects.filter(project__user=person) 
```

如果 Comment 模型具有项目的外键，而项目的外键对用户具有外键。这将涉及数据库中的 SQL 连接语句。最好在数据库上执行此操作，因为它的效率要高得多。数据库正是为此而设计的。

# javascript - 使用 Canvas / 动力学的 Opera 内存不足错误

> ID：15250224
> 
> 赞同：0
> 
> 时间：2013-03-06T14:40:50.687
> 
> 标签：javascript, html, performance, canvas, requestanimationframe

我有一个使用 requestAnimationFrmae 构建的脚本。

[这里的 pastebin 代码](http://pastebin.com/qbACkxS3)

在 chrome 中，它工作得很好。流畅而完美。然而，在 FF、Opera 和 Safari 中，它非常生涩。

我有一个语句可以确定浏览器是否可以处理 requestAnimationFrame 以及它是否不能求助于 timeOut()

谁能告诉我/看看为什么这么差/生涩。以及如何提高性能。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:23:33.727

```
 setTimeout(function(){

       requestAnimationFrame(Animate);

       },1000/16.5); 
```

对我来说似乎是错的。应该只是

```
 requestAnimationFrame(Animate); 
```

并且它应该被放置在其中`Animate`，而不是`runAnimation`在一个动画帧（`Animate`调用）期间被重复调用。顺便说一句，`requestAnimationFrame`垫片`setTimeout`的帧率非常高，为 105 fps，60 应该足够了。

# matplotlib - matplotlib 上图下方的圆圈

> ID：15250225
> 
> 赞同：1
> 
> 时间：2013-03-06T14:40:53.117
> 
> 标签：matplotlib, networkx

对此问题的任何帮助表示赞赏。

我使用 matplotlib 编写了以下代码，在同一轴上绘制一个图形和一些圆圈。

```
import sys,os,re
import networkx as nx
import matplotlib.pyplot as plt
import matplotlib.ticker as mtick
from matplotlib.patches import Ellipse, Circle

class GraphForPlot:
  def __init__(self):
    self.G = nx.Graph()
    self.Components = []
    self.ActiveStatus = {}
    self.Nodes = []
    self.Position = {}
    self.Color = []
    self.p = {} 
```

在主要功能中，我有以下内容

```
fig, PlotAxes = plt.subplots(nrows=1, ncols=2)
plt.tight_layout()
for i in range(0, len(GPlot)):
  PlotAxes[i].xaxis.set_major_formatter(mtick.NullFormatter())
  PlotAxes[i].yaxis.set_major_formatter(mtick.NullFormatter())
  PlotAxes[i].axis([-25,1025,-25,1025])
  for j in GPlot[i].G.nodes():
    PlotAxes[i].add_artist(Circle((GPlot[i].Position[j][0],GPlot[i].Position[j][1]), GPlot[i].p[j], color='y'))
  nx.drawing.nx_pylab.draw_networkx_nodes(GPlot[i].G, GPlot[i].Position, node_size=10, node_color=GPlot[i].Color, ax=plt.subplot(1,2,i+1))
  if (GPlot[i].G.edges != []): nx.drawing.nx_pylab.draw_networkx_edges(GPlot[i].G, GPlot[i].Position, edge_color = 'black', ax=plt.subplot(1,2,i+1))
  PlotAxes[i].set_aspect(1) 
```

我想要什么：我希望圆圈在下面，然后是图表在上面。（圆圈层顶部的边缘）。

我得到了什么：我看不到图中的边缘。我的猜测是它出现在圆圈下方。

示例数据实例。

这是数据

```
GPlot[0].Components = [[0],[1],[2],[4],[3,5]]
GPlot[0].ActiveStatus = {(0,): 0, (1,): 1, (2,): 0, (4,): 1, (3, 5): 1}
GPlot[0].p = {0: 0.0, 1: 179.5, 2: 0.0, 3: 179.5, 4: 179.5, 5: 179.5}
GPlot[0].Position = {0: [918.476975980191, 566.175809107923], 1: [712.224117254128, 320.20223881946], 3: [136.674359018882, 835.172432802382], 4: [115.261650368544, 74.1499048601371], 5: [1.41743386570314, 502.881853371971]}
GPlot[0].Color = ['black', 'red', 'white', 'white', 'white']

GPlot[1].Components = [[0],[1],[2],[3],[4],[5]]
GPlot[1].ActiveStatus = {(0,): 0, (1,): 0, (2,): 1, (3,): 1, (4,): 1, (5,): 1}
GPlot[1].p = {0: 0.0, 1: 0.0, 2: 179.5, 3: 179.5, 4: 179.5, 5: 179.5}
GPlot[1].Position = {0: [689.232465921313, 844.969550926396], 2: [942.858050963379, 484.834574765457], 3: [136.674359018882, 835.172432802382], 4: [115.261650368544, 74.1499048601371], 5: [1.41743386570314, 502.881853371971]}
GPlot[1].Color = ['black', 'red', 'white', 'white', 'white'] 
```

对于图表，请执行以下操作：

```
H = nx.path_graph(6)
GPlot[0].G.add_nodes_from(H)
GPlot[0].G.add_edge(3,5)
GPlot[1].G.add_nodes_from(H) 
```

我希望这已经足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:57:07.040

我想你想改变`zorder`，正如你在这个[例子](http://matplotlib.org/examples/pylab_examples/zorder_demo.html)中看到的那样。

我不熟悉 networkx 包，所以我不知道如何指定它用于创建图形绘图的艺术家的 zorder。

# java - GAE ClassFormatError：不兼容的魔法值 4022320623 EFBFBDEF

> ID：15250226
> 
> 赞同：2
> 
> 时间：2013-03-06T14:40:55.047
> 
> 标签：java, google-app-engine, maven, jetty

我在一个 mavenized Eclipse 项目中有一个简单的 webapp。我的 pom.xml 包含一些将 Google 的 appengine-maven-plugin 添加到构建插件的行。

当我运行时，`mvn appengine:devserver`我最终得到一个错误，告诉我无法加载我的类：

> [信息] 警告：错误启动处理程序 [信息] java.lang.ClassFormatError：类文件 com/teamlazerbeez/http/di/StartupListener 中不兼容的魔法值 4022320623

该数字采用`EFBFBDEF`十六进制表示法，显然不是`CAFEBABE`，Java 类文件应以字节序列开头。我只在主题上找到[了这个](https://stackoverflow.com/a/4505697/1296709)和[这个](https://stackoverflow.com/a/12111542/1296709)，这让我相信在编写或读取类文件期间编码出错了。

这是问题吗？如何强制 maven 使用例如 UTF-8 编码读取/写入类？什么*是*好的编码？
我的 java 文件都以相同的方式编码：Eclipse 说 ISO-8859-1，Notepad++ 说 ANSI。

PS：我在Windows机器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:56:52.813

正如[Joakim Erdfeld](https://stackoverflow.com/users/775715/joakim-erdfelt)的[回答](https://stackoverflow.com/a/15250414/1296709)所暗示的，其中一个插件正在摆弄构建。罪魁祸首是[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/) v2.3，但仅在以下情况下：

在 mavenized Ecipse 项目（其中[appengine-maven-plugin](http://code.google.com/p/appengine-maven-plugin/) **v1.7.5**列在 中）上启用 GAE 特性将在以下条件适用`pom.xml`时中断运行：`mvn appengine:devserver`

 ***   “默认输出文件夹”（在 Eclipse 项目的“构建路径”设置中）设置为`src/main/webapp/WEB-INF/classes/`（GAE Eclipse 插件工作所需）
*   GAE 插件决定将 GAE-jars 放入 中`src/main/webapp/WEB-INF/lib/`，即使这些 jars 已经在类路径中。

总之，maven-war-plugin 不正确地将 .class 和 .jar 文件从您的文件复制`WEB-INF/`到生成的 .war 文件中。在这个过程中的某个地方，它错误地编码了这些文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-11T12:09:42.137

检查您的`src/main/webapp/WEB-INF`文件夹，它不应包含`classes`文件夹。

如果是这样，则意味着您可能错误地配置了您的 Eclipse 项目。

我们遇到的一种情况是开发人员导入了一个 maven 项目并将该项目“作为 Web 应用程序”运行。他第一次这样做时，Eclipse 会询问他 webapp 文件夹在哪里。如果你回答`src/main/webapp`，那么 Eclipse 会将它的类放在那里，然后它会被 maven 搞砸。

要解决此问题，请从 Eclipse 中删除项目并删除`src/main/webapp/WEB-INF/classes folder, then re-import the project`.

当 Eclipse 询问 webapp 文件夹在哪里时，它位于`target/yourproject-yourversion`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:48:19.640

`compile`在阶段之后和之前，您的 Maven 构建中的某些东西会弄乱类文件`package`。

首先注释掉你的所有内容`<plugins>`，然后一次添加 1 个，直到构建再次中断。

当你的 pom 完全解析为父 pom 时，一定要跑去`> mvn help:effective-pom`检查它的样子。

（实验性）您甚至可以通过简单地使用 project-info-reports 命令行获取依赖项报告来让构建本身告诉您类是否不好。

```
> mvn clean org.apache.maven.plugins:maven-project-info-reports-plugin:2.6:dependencies 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T15:27:44.563

我发现[这个问题](https://stackoverflow.com/questions/5421879/objectinputstream-happy-with-fileinputstream-not-happy-with-getresourceasstream)也提到了无效的幻数 EFBFBDEF。它似乎还建议您正确设置 Maven 编码。使用以下属性：

```
<properties>
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

但我认为这只有在您在 Maven 构建过程中收到[编码警告时才有帮助。](http://maven.apache.org/general.html#encoding-warning)**

# objective-c - 以编程方式更改 UIButton 的状态

> ID：15250228
> 
> 赞同：0
> 
> 时间：2013-03-06T14:40:57.817
> 
> 标签：objective-c, ios6, uibutton

我有一个弹出视图，当用户单击带有 Core Data 元素的 TableView 时会加载该视图。在弹出视图中，我有一个表示 int 值的标签。

弹出视图有两个按钮，一个用于将标签值减 1，另一个用于将标签值增加 1。所以 + 和 -

如果标签的值为0，我想要做的是禁用减号按钮。我试过的是：

```
-(void)viewDidLayoutSubviews{
     NSString *daString = currentVal.text;
        NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
        [f setNumberStyle:NSNumberFormatterDecimalStyle];
        NSNumber * myNumber = [f numberFromString:daString];
        int number = [myNumber intValue];
        if (number==0)
            minus.enabled = NO;
        else
            minus.enabled = YES
} 
```

我的代码的问题是，在我增加标签的值后，按钮保持禁用状态，并且不再等于 0。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:51:47.220

好像你有相反的事情。我会采取完全不同的方法：

在这个 viewController 中保留一个实例变量（我们称之为“count”），它保存了数字。它可以是一个 NSInteger。现在使用@selector(buttonPressed:) 向两个按钮添加一个目标（self）。现在这个选择器应该是这样的：

```
- (void)buttonPressed:(id)sender{
    if (sender==plusButton)
        self.count++;
    if (sender==minusButton)
        self.count--;
    label.text = [NSString stringWithFormat:@"%d",self.count];
    minusButton.enabled = (self.count>0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:32:56.440

您应该保留对减号按钮的引用，例如

```
@property (strong, nonatomic) IBOutlet UIButton *minusButton; 
```

使用减号按钮的值设置它，或在 Interface Builder 中连接插座

在您的 plusButton 动作处理程序中，执行类似的操作

```
-(IBAction)plusAction:(id)sender {
     //Do your business logic
     ...
     self.minusButton.enabled = YES;
}
//In your minusButton action handler
-(IBAction)minusAction:(id)sender {
     //Do your business logic
     ...
     NSString *daString = currentVal.text;
     NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
     [f setNumberStyle:NSNumberFormatterDecimalStyle];
     NSNumber * myNumber = [f numberFromString:daString];
     int number = [myNumber intValue];
     if (number==0)
        self.minusButton.enabled = NO;
     else
        self.minusButton.enabled = YES
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:17:25.337

我会用[UIStepper](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html)来做这件事，而不是 2 个按钮。您可以在故事板/IB 文件中设置属性，指定最大值和最小值、增量以及其他一些有用的东西。[YouTube 上](http://www.youtube.com/results?search_query=uistepper&oq=uistepper&gs_l=youtube.3..0.1915.3983.0.4162.9.6.0.3.3.0.187.617.5j1.6.0...0.0...1ac.1.ZBbBQ0kQvzw)发布了一些视频教程，其中可能涵盖了使用它所需了解的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T09:32:10.883

另外，我注意到一件事......如果按钮处于禁用状态并且您试图更改正常状态的标题，它将无法正常工作。我必须将状态更改为启用，然后我可以操纵标题并重新设置为禁用。

# javascript - 确定 iframe 中的元素是否在屏幕上可见

> ID：15250235
> 
> 赞同：7
> 
> 时间：2013-03-06T14:41:15.407
> 
> 标签：javascript, html, iframe

我需要确定 iframe 中的元素是否在屏幕上可见。（如果它在屏幕的可见部分）我的意思是页面可能很长，用户必须滚动才能看到元素

索引.html：

```
<html>
...
...
<iframe src="iframe.html" />
...
...
</html> 
```

iframe.html：

```
<html>
...
...
<div id="element"></div>
....
...
<script type="text/javascript">
    var el = document.getElementById('element');
    if (isElementVisible(el)) {
      // do something
    }
</script>
</html> 
```

怎么写这样的函数isElementVisible()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:13:48.110

这是您要实现的目标的示例。

`**[Working example](http://jsbin.com/oletap/1)**`

`**[Just the iframe](http://jsbin.com/ofitin/1/edit)**`

基本上，这是应该进入你的函数`iframe`：

```
function isElementVisible(element)
{
    var elementPosition = element.offset().top;
    var currentScroll = window.parent.$("iframe").contents().scrollTop();
    var screenHeight = window.parent.$("iframe").height();
    var visibleArea = currentScroll + screenHeight;
    return (elementPosition < visibleArea);
} 
```

使用滚动事件处理程序触发您的检查。

```
$(window).scroll(function(){
if( isElementVisible( element ) )
   // Perform your code.
}); 
```

假设 iframe 与父框架位于同一域中，则此方法有效。为方便起见，我使用**jQuery**。

# c# - 用于有条件地格式化数字字符串的正则表达式

> ID：15250238
> 
> 赞同：5
> 
> 时间：2013-03-06T14:41:21.230
> 
> 标签：c#, regex, string

*原始问题已删除*

* * *

我正在寻找一个正则表达式，它将包含特殊字符、字符和数字的字符串格式化为仅包含数字的字符串。在某些特殊情况下，仅将所有非数字字符替换为“”（空）是不够的。

1.) 括号中的零。

*   如果括号 (0) 中只有零，如果它是第一个括号对，则应将其删除。（不应删除仅包含零的第二个括号对）

2.) 前导零。

*   应删除所有前导零（忽略括号）

更好理解的例子：

*   `123 (0) 123 would be 123123 (zero removed)`
*   `(0) 123 -123 would be 123123(zero and all other non-numeric characters removed)`
*   `2(0) 123 (0) would be 21230 (first zero in brackets removed)`
*   `20(0)123023(0) would be 201230230 (first zero in brackets removed)`
*   `00(0)1 would be 1(leading zeros removed)`
*   `001(1)(0) would be 110 (leading zeros removed)`
*   `0(0)02(0) would be 20 (leading zeros removed)`
*   `123(1)3 would be 12313 (characters removed)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:03:42.130

~~只有当它~~~~*不在*~~~~字符串的开头时，~~您才可以使用[后](http://www.regular-expressions.info/lookaround.html) ~~向匹配`(0)`~~*，并在您正在做的时候用空字符串替换。*

 *[*（原解决方案已删除）*]

* * *

***再次**更新以反映新要求*

匹配前导零，`(0)`仅当它是第一个带括号的项目时匹配，并且匹配任何非数字字符：

```
^[0\D]+|(?<=^[^(]*)\(0\)|\D 
```

请注意，大多数正则表达式引擎不支持可变长度的lookbehinds（即使用量词，如`*`），因此这只适用于少数正则表达式引擎——.NET 就是其中之一。

```
^[0\D]+      # zeroes and non-digits at start of string
|            # or
(?<=^[^(]*)  # preceded by start of string and only non-"(" chars
\(0\)        # "(0)"
|            # or
\D           # non-digit, equivalent to "[^\d]" 
```

（*在[regexhero.net](http://regexhero.net/tester/)*测试）

* * *

您现在已经多次更改和添加要求。对于这样的多个规则，您最好单独为它们编码。如果一个条件匹配并导致另一个条件不匹配，则可能会变得复杂且难以调试。例如，在单独的步骤中：

1.  根据需要删除括号中的项目。
2.  删除非数字字符。
3.  删除前导零。

但是如果你绝对需要这三个条件都匹配在一个正则表达式中（不推荐），这里就是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:01:36.050

这个正则表达式应该非常接近您正在搜索的那个。

```
(^[^\d])|([^\d](0[^\d])?)+ 
```

（您可以替换空字符串捕获的所有内容）

**编辑 ：**

您的请求发生了变化，现在变得很复杂，只需通过一次即可处理。假设您**总是**在括号组之前有一个空格，您可以使用这些通行证（保持此顺序）：

```
string[] entries = new string[7] {
    "800 (0) 123 - 1",
    "800 (1) 123",
    "(0)321 123",
    "1 (0) 1",
    "1 (12) (0) 1",
    "1 (0) (0) 1",
    "(9)156 (1) (0)"
};
foreach (string entry in entries)
{
    var output = Regex.Replace(entry , @"\(0\)\s*\(0\)", "0");
    output = Regex.Replace(output, @"\s\(0\)", "");
    output = Regex.Replace(output, @"[^\d]", "");
    System.Console.WriteLine("---");
    System.Console.WriteLine(entry);
    System.Console.WriteLine(output);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:09:32.973

如果您可以使用多次传递，正则表达式会变得非常简单。我认为如果它不是字符串中的第一件事，你可以做第一次通过删除你的 (0)，然后删除非数字：

```
var noMidStrParenZero = Regex.Replace(text, "^([^(]+)\(0\)", "$1");
var finalStr = Regex.Replace(noMidStrParenZero, "[^0-9]", ""); 
```

避免了很多正则表达式的疯狂，并且它在一定程度上也是自我记录的。

编辑：这个版本也应该适用于你的新例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:10:33.997

```
(?:     # start grouping
    ^   # start of string
    |   # OR
    ^\( # start of string followed by paren
    |   # OR
    \d  # a digit
)       # end grouping
(0+)    # capture any number of zeros
|       # OR
([1-9]) # capture any non-zero digit 
```

[这适用于您的所有示例字符串](http://rubular.com/r/obcVC0sW4N)，但整个表达式确实与`(`后面的零匹配。您可以使用`Regex.Matches`全局匹配来获取匹配集合，然后将所有匹配的组加入一个字符串以仅获取数字（或仅删除任何非数字）。*

# java - 无法创建 OpenJPAEntityManagerFactory

> ID：15250241
> 
> 赞同：0
> 
> 时间：2013-03-06T14:41:24.367
> 
> 标签：java, osgi, openjpa, osgi-bundle

我创建了支持 JPA 2.0 的 OSGI 捆绑项目。我使用 OpenJpa 作为 JPA 提供程序。当我运行捆绑包时，我无法创建 OpenJPAEntityManagerFactory。请完善我用来创建 OpenJPAEntityManagerFactory 的代码。

```
OpenJPAEntityManagerFactory emf = OpenJPAPersistence.createEntityManagerFactory(
                        "StudentServiceProvider",
                        "META-INF/persistence.xml"); 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="StudentServiceProvider">

        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <class>com.student.serviceprovider.model.Student</class>

        <exclude-unlisted-classes>false</exclude-unlisted-classes>

        <properties>
            <property name="openjpa.ConnectionURL" value="jdbc:mysql://localhost:3306/NYL" />
            <property name="openjpa.ConnectionDriverName" value="com.mysql.jdbc.Driver" />
            <property name="openjpa.ConnectionUserName" value="root" />
            <property name="openjpa.ConnectionPassword" value="root" />
            <property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO" />
            <property name="openjpa.RuntimeUnenhancedClasses" value="supported" />
            <property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO" />

            <!-- To avoid foreign key issues -->
            <property name="openjpa.jdbc.SchemaFactory" value="native(ForeignKeys=true)" />

            <!-- Auto create tables -->
            <property name="jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)" />
        </properties>

    </persistence-unit>
</persistence> 
```

在 src 文件夹中，我有 META-INF，并在其中创建了 persistence.xml（META-INF/persistennce.xml）。

请让我知道以解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:16:02.470

如果您列出您遇到的错误可能会有所帮助，但这可能是因为您有两次此行：

```
<property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO" /> 
```

这只是在黑暗中刺伤，因为您没有提及错误是什么，而我恰好收到“配置中指定了等效属性键“openjpa.Log”和“Log”的错误消息。” 对于我正在做的事情。

# javascript - XMLHttpRequest 错误 SCRIPT10

> ID：15250243
> 
> 赞同：0
> 
> 时间：2013-03-06T14:41:30.947
> 
> 标签：javascript, xml, xmlhttprequest

大家好，我必须连接到外部服务器才能检索数据。他们告诉我使用他们的脚本，我必须修改一些东西，因为它是错误的。现在，当我尝试午餐我的要求时，我遇到了一个问题。将错误返回到我的 Internet Explorer 控制台

> SCRIPT10：完成此操作所需的数据尚不可用。

这是我的 javascript 页面，我认为问题是因为查询没有及时完成以打印我的结果。当它们准备好并且不返回错误时，如何打印结果？ **我试图评论我的所有请求，只留下“打开”方法，但错误每次都会返回我**。为什么？？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<script type="text/javascript">
var req = null ;
function sendRequest(){
    var urlStr="www.test.it";
    var xmlString="";
    xmlString+="<?xml version='1.0' encoding='UTF-8'?><some xml>";

    createHTTPRequestObject();
    var resp = getResponseText(urlStr+"?"+xmlString,null);

    var xmlDoc;
    xmlDoc = new ActiveXObject('Microsoft.XMLDOM');
    xmlDoc.async = false;

    xmlDoc.loadXML(resp);
    alert(xmlDoc.xml);
}

function createHTTPRequestObject(){
    req=null ;
    var pXmlreq = false ;
    if (window.XMLHttpRequest) {
        pXmlreq = new XMLHttpRequest();
    } 
    else if (window.ActiveXObject) {
        try{
            pXmlreq = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e1) {
            try{
                pXmlreq = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e2) {
            }
        }
    }
    req = pXmlreq ;
}

function getResponseText(action,query,method,async,contenttype){
    if(method==null){
        method="POST";
    }
    if(async==null){
        async="true";
    }
    if(contenttype==null){
        contenttype = "application/x-www-form-urlencoded";
    }
    req.open(method,action, async);
    req.setRequestHeader("Content-Type", contenttype);
    if(query){
        req.send(query);
    }else{
        req.send();
    }
    return req.responseText ;
}
</script>
</head>
<body>
<input type="button" name="Request" value="Request" onclick="sendRequest();"/>
<div id="content" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:55:06.207

您正试图在 responseText 准备好之前读取它。看起来您将异步调用视为同步。那将是问题所在。

# iis-7 - 本地 nuget 服务器：405 方法不允许

> ID：15250245
> 
> 赞同：2
> 
> 时间：2013-03-06T14:41:33.553
> 
> 标签：iis-7, nuget, nuget-server

我已经配置了一个本地 nuget 服务器，如下所述：http: [//docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)

我可以浏览它并查看提要。但我不能向它发布包。我只是一直收到错误405。

我已确保 App Pool 帐户对 Packages 文件夹具有更改权限。

我的配置：

```
<appSettings>
  <add key="requireApiKey" value="true" />
  <add key="apiKey" value="XXXXX" />
  <add key="packagesPath" value="c:\projects\nuget\Packages" />
</appSettings> 
```

我也发现了这个问题： http: [//nuget.codeplex.com/workitem/1789](http://nuget.codeplex.com/workitem/1789)。我已经删除了 WebDav 模块/处理程序，但仍然出现错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T15:13:05.813

删除 webdav 确实有效。我刚刚设法在 ELMAH 文件夹中删除它，而不是在根目录中。

正确的配置：

```
<configuration>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
    </modules> 
```

# php - 是否可以让函数变量已经包含参数？

> ID：15250246
> 
> 赞同：0
> 
> 时间：2013-03-06T14:41:35.757
> 
> 标签：php

我有以下代码：

```
$posted_on = new DateTime($date_started);
$today = new DateTime('today');
$yesterday = new DateTime('yesterday');
$myFormat = 'format(\'Y-m-d\')';

if($posted_on->{$myFormat} == $today->{$myFormat}) {
    $post_date = 'Today';
}
elseif($posted_on->{$myFormat} == $yesterday->{$myFormat}) {
    $post_date = 'Yesterday';
}
else{
    $post_date = $posted_on->format('F jS, Y');
}

echo 'Started '.$post_date; 
```

正如你所看到的，我试图多次使用“format('Ymd')”，并且不想在多个地方输入它，所以我试图简单地将它放在一个变量中并使用它。但是，我收到一条通知：消息：未定义属性：DateTime::$format('Ymd')

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:43:55.860

```
$myFormat = 'Y-m-d';
...
$today->format($myFormat);
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T14:47:02.997

不，但您可以对函数进行 curry：

```
$myFormat = function($obj) {return $obj->format("Y-m-d");};

if( $myFormat($posted_on) == $myFormat($today)) 
```

或者更干净：

```
class MyDateTime extends DateTime {
    public function format($fmt="Y-m-d") {
        return parent::format($fmt);
    }
}
$posted_on = new MyDateTime($date_started);
$today = new MyDateTime("today");
$yesterday = new MyDateTime("yesterday");

if( $posted_on->format() == $today->format()) {... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:53:09.073

```
$posted_on = new DateTime($date_started);
$today = new DateTime('today');
$yesterday = new DateTime('yesterday');
$myFormat = 'Y-m-d';

if($posted_on->format($myFormat) == $today->format($myFormat)) {
    $post_date = 'Today';
}
elseif($posted_on->format($myFormat) == $yesterday->($myFormat)) {
    $post_date = 'Yesterday';
}
else{
    $post_date = $posted_on->format('F jS, Y');
}

echo 'Started '.$post_date; 
```

这是你能做的最好的。我会将格式放在常量或配置文件中的某个位置，但 w/e. 你试图做的事情是可能的，但它太可怕了，当我读到它时我真的开始哭了。

同样在这种情况下，我会做这样的事情

```
$interval   = $posted_on->diff(new DateTime('today'));
$postAge    = $interval->format('%d'); // Seems to be the best out of many horrible options
if($postAge == 1)
{
    $post_date = 'Today';
}
else if($postAge == 2)
{
    $post_date = 'Yesterday';
}
else
{
    $post_date = $posted_on->format('F jS, Y');
} 
```

# jquery - “如果高度大于 X”不起作用

> ID：15250248
> 
> 赞同：1
> 
> 时间：2013-03-06T14:41:41.820
> 
> 标签：jquery, html

我正在尝试实现一个读取图像宽度和高度的脚本，如果图像高度大于 600，则将 html div 的高度设置为 600。如果高度小于 600，则 div 的高度将是图像的高度。

这是我一直在尝试的。

JavaScript：

```
jQuery(document).ready(function($) {
var kuvakorkeus = $(".karttakuva img").css('height');
var kuvaleveys = $(".karttakuva img").css('width');

if (kuvakorkeus > 600){
$(".karttakuva").css('height',600);
}
else {
$(".karttakuva").css('height',kuvakorkeus);
}
}); 
```

HTML：

```
<div id="content">
<div class="relative">

<div class="karttakuva">

<img src="http://img42.imageshack.us/img42/8954/tylypahkanportit.png" class="imgMap" width="1297" height="883"/>

<a style="display:block" href="http://justinbieber.com"><div class="marker" id="france" data-coords="306,513"></div></a>
<a style="display:block" href="http://tylypahka.tk/kartta"><div class="marker" id="lol" data-coords="1031,237"></div></a>

</div>

</div>
</div> 
```

标记属于图像平移脚本，但我认为它们不会搞砸。问题是即使图像的高度是 2000，它仍然会选择 else 操作并将 div 的高度设置为与图像的高度相同。

这是页面：[http ://tylypahka.tk/kartta/tylypahka](http://tylypahka.tk/kartta/tylypahka)

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:43:18.223

这个 ：

```
$(".karttakuva img").css('height'); 
```

只为您提供 CSS 中指定的内容。

你可能想要`$(".karttakuva img").height()`，那是图像的高度。

请注意，如果您想为高度指定最大值，可以在 css 中指定`max-height:600px`。这也适用于图像（它们根据宽度/高度比进行缩放）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:43:51.030

改变 ：

```
var kuvakorkeus = $(".karttakuva img").css('height');
var kuvaleveys = $(".karttakuva img").css('width'); 
```

至

```
var kuvakorkeus = $(".karttakuva img").height();
var kuvaleveys = $(".karttakuva img").width(); 
```

`.css('height')`给出**x** `px`作为结果（如在 css 样式表中）

# c# - 扩展一个属性，同时插入一个新项目

> ID：15250250
> 
> 赞同：0
> 
> 时间：2013-03-06T14:41:48.243
> 
> 标签：c#, .net, linq, properties, extend

这是我的代码：

```
var myList = myPage.News.Cast<MyNew>(); 
```

MyNew 有 20 个属性（名称、标题、日期、地点等），但它错过了一个属性（例如）`Tel`。

无法重新创建我的整个结构（它也来自 DLL），所以我想更快地`Tel`在该列表中添加一个名为 的 MyNew 属性。因此，在插入列表期间扩展类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:45:36.930

不，但您可以创建一个匿名类型，其中包括原始类型和新列：

```
var myList = myPage.News
                   .Cast<MyNew>()
                   .Select( new { m => MyNew = m,
                                       Tel = [formula for tel]
                                }
                          ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:46:05.587

```
public class MyNewExtended: MyNew {
   public String Tel { get;set; }
}

var myList = myPage.News.Cast<MyNewExtended>(); 
```

（但请参阅下面 Chris Sinclair 的评论）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T14:47:57.613

您应该能够`MyNew`像这样使用部分类进行扩展：

```
public partial class MyNew
{
    public int Tel { get; set; }
} 
```

`Tel`然后将像任何其他属性一样可用。

# jquery - jQuery消失的div

> ID：15250252
> 
> 赞同：1
> 
> 时间：2013-03-06T14:42:00.030
> 
> 标签：jquery

这可能真的很简单，但我看不到我一生的答案。

当我单击“搜索”一词时，我希望搜索表单切换到视图并关闭。

HTML：

```
<div id="mainsearchlink">
    <a id="mainsearchlinka" href="#">Search</a>
    <div id="mainsearch">
        <form role="search" method="get" id="searchform" action="">
             <div>
                 <label class="screen-reader-text" for="s">Search for:</label>
                 <input type="text" value="" name="s" id="s" />
                 <input type="submit" id="searchsubmit" value="Search" />
             </div>
         </form>
     </div>
</div> 
```

JS：

```
$('#mainsearchlink').click(function (event) {
    event.preventDefault();
    $(this).find('div#mainsearch').fadeToggle(400);
}); 
```

CSS：

```
#mainsearch {
    display: none;
} 
```

但是，淡入淡出工作正常，但是当我将光标放在输入框中时，它会淡出。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:44:24.973

```
$('#mainsearchlink') 
```

应该

```
$('#mainsearchlinka') 
```

您需要进行此更改的原因是因为事件冒泡。当您单击文本框时，单击事件会冒泡到您的 div。

但是，随着这种变化，你需要改变你的选择器。所以：

```
$('#mainsearchlinka').click(function (event) {
    $('#mainsearch').fadeToggle(400);
}); 
```

小提琴：http: [//jsfiddle.net/wPQDM/1](http://jsfiddle.net/wPQDM/1)

**编辑**：合并 FrançoisWahl 的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:47:51.910

```
$('#mainsearchlink').click(function (event) {
    $(this).find('div#mainsearch').fadeToggle(400);
});

$('#s').on('click', function (event) {
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T14:45:08.377

```
$('#mainsearchlink').click(function (event) {
    event.preventDefault();
    $(this).find('div#mainsearch').fadeToggle(400);
}); 
```

在上面的脚本中更改`#mainsearchlink` 为`#mainsearchlinka`

# r - Excel工作簿的R Download.File问题

> ID：15250257
> 
> 赞同：26
> 
> 时间：2013-03-06T14:42:10.780
> 
> 标签：r, excel, download

我正在尝试使用 R 的[download.file](http://stat.ethz.ch/R-manual/R-patched/library/utils/html/download.file.html)函数下载 Excel 工作簿。

当我手动下载文件（使用 Internet Explorer 或 Chrome，右键单击并另存为）然后文件下载，然后我可以在 Excel 中打开它而没有任何问题。

当我在 R 中使用 download.file 时，文件会下载并报告正确的文件大小。但是，当我尝试在 Excel 2010 中打开下载的 xls 文件时，我收到以下错误消息：

> Excel 在“test.xls”中发现了不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击“是”。

当我单击是时，没有任何反应。

我也尝试使用 R 包[xlsx](http://cran.r-project.org/web/packages/xlsx/index.html)直接访问该文件，这也失败了。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-11T09:01:20.260

您可以尝试`download.file`使用参数以二进制模式（默认为 ASCII 模式）下载文件`mode`。就像是 ：

```
download.file(myurl, mydestfile, mode="wb") 
```

# sql-server-2008 - 外部组中单元格中的内部组摘要

> ID：15250262
> 
> 赞同：0
> 
> 时间：2013-03-06T14:42:16.323
> 
> 标签：sql-server-2008, reporting-services

我有一个报告的一部分，其中有一个外部组和一个内部组。我的一些用户会打印此报告，而有些则不会。我希望能够保留切换功能，同时提供内部组前 3 行的外部组的摘要。基本上，我希望注释列能看到前三个缺陷及其总数。

我可以通过在 SQL 中完成这项工作，但在这种情况下，如果可能的话，我更希望报表服务器来处理汇总和分组。

```
Outer Group             Sum(Defects)           First(DefectId)
  Inner Group           Sum(Defects) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T18:41:47.233

最终使用 CTE

```
 with MyCte AS (SELECT     
                                                         MachineCode + ' | ' + Tool + ' | ' + comments + ' | ' + Operator + ' | ' + convert(nvarchar(50), MinutesDown) + ' ||| ' 'Things',
                                                         Reason, 
                                                         MinutesDown,
                                                         PartitionedRowNum = ROW_NUMBER() OVER (PARTITION BY Reason ORDER BY MinutesDown DESC)
                                 from        #Comments)
    insert into #t
    select  *
    from    MyCte
    where   PartitionedRowNum <= 3 
```

# silverlight - 从 Silverlight 中的 SaveFileDialog 访问真实目录路径

> ID：15250269
> 
> 赞同：0
> 
> 时间：2013-03-06T14:42:32.470
> 
> 标签：silverlight, reflection, savefiledialog, security-critical

我对 Silverlight 应用程序和 SaveFileDialog 有疑问。基本上我正在使用 SaveFileDialog 来获取他想要保存文件的用户路径以及文件名是什么。然后我将该路径传递给其他应用程序的 API（我在提升信任模式下使用 Silverlight 5）为我创建文件。

当用户在保护模式下使用 IE8 时会出现问题。

SaveFileDialog.SafeFileName 只返回文件的名称，而不是路径，当我尝试使用 FileInfo 获取该路径时，无论用户选择了什么，我都会得到桌面。

1.  我尝试了不同的方法，包括使用来自 SaveFileDialog.OpenFile 的流仅将一个字节写入文件 - 没有成功

2.  我尝试使用反射访问 SaveFileDialog.File.DirectoryName 的私有成员 - 属性标有 [SecurityCritical] 所以我无法访问...

3.  我现在计划尝试使用 js 调用本机浏览器保存对话框以完成此操作，但我不确定它是否与 Silverlight 对话框不同。

在这个问题上有比我更聪明或更有经验的人吗？:)

谢谢

# python - 使用 Python WebTest 进行功能测试

> ID：15250276
> 
> 赞同：4
> 
> 时间：2013-03-06T14:42:49.500
> 
> 标签：python, pyramid, webtest

我对使用 Python WebTest 进行功能测试完全陌生，请多多包涵

我正在查看[https://webtest.readthedocs.org/en/latest/webtest.html](https://webtest.readthedocs.org/en/latest/webtest.html)，所以我按照建议尝试了代码以提出请求：

```
 app.get('/path', [params], [headers], [extra_environ], ...) 
```

好的，对我来说看起来很简单。我在 myapp 文件夹中创建了一个名为 test_demo.py 的文件：

```
 from webtest import TestApp

    class MyTests():
        def test_admin_login(self):
           resp = self.TestApp.get('/admin')
           print (resp.request) 
```

现在这是我坚持的地方，我应该如何运行这个 test_demo.py？我试过输入 bash

```
 $ bin/python MyCart/mycart/test_demo.py test_admin_login 
```

但它没有显示任何结果。

我敢打赌我搞错了，但文档没有多大帮助，或者我只是很慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:17:15.387

哎呀，你错过了几个步骤。

你的程序没有做任何事情，因为你没有告诉它做任何事情，你只是定义了一个类。所以让我们告诉它做点什么。我们将使用[unittest](http://docs.python.org/2.7/library/unittest.html)包使事情变得更加自动化。

```
import unittest
from webtest import TestApp

class MyTests(unittest.TestCase):
    def test_admin_login(self):
       resp = self.TestApp.get('/admin')
       print (resp.request)

if __name__ == '__main__':
    unittest.main() 
```

运行它，我们看到：

```
E
======================================================================
ERROR: test_admin_login (__main__.MyTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "test_foo.py", line 6, in test_admin_login
    resp = self.TestApp.get('/admin')
AttributeError: 'MyTests' object has no attribute 'TestApp'

----------------------------------------------------------------------
Ran 1 test in 0.000s

FAILED (errors=1) 
```

好的，所以我们需要一个应用程序来测试。去哪里买？您通常需要在您的`main`via中创建的 WSGI 应用程序`config.make_wsgi_app()`。最简单的方法是加载它，就像`pserve development.ini`运行应用程序时一样。我们可以通过`pyramid.paster.get_app()`.

```
import unittest
from pyramid.paster import get_app
from webtest import TestApp

class MyTests(unittest.TestCase):
    def test_admin_login(self):
        app = get_app('testing.ini')
        test_app = TestApp(app)
        resp = test_app.get('/admin')
        self.assertEqual(resp.status_code, 200)

if __name__ == '__main__':
    unittest.main() 
```

现在只需要一个类似于您的 .INI 文件`development.ini`，但用于测试目的。您可以复制`development.ini`，直到您需要设置任何仅用于测试的设置。

`unittest`希望这为您提供了一个了解有关该软件包的更多信息的起点。

# crystal-reports-xi - 将包含相似值的多列合并为一列，用于 Crystal Reports 内的图表

> ID：15250278
> 
> 赞同：0
> 
> 时间：2013-03-06T14:42:59.883
> 
> 标签：crystal-reports-xi

我有 3 个字段，Action1、Action2 和 Action3 包含在一份报告中。每个操作字段都是从相同的值列表中选择的。我想通过字段的值而不是字段本身来绘制这些值的计数。我需要一个图表，而不是每个操作字段的一个图表。我试图在详细信息部分将字段值组合成一个数组，但报告将串联的字符串值“Action1，Action2，Action3”显示为图中的单个值。我尝试使用“on change of”绘制图形，但它只允许 2 个字段而不是 3 个。有没有办法计算这些值，而不管在哪里找到它们的 Action 字段？

我已经与 Crystal 合作多年，但无论出于何种原因都无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:58:54.657

我从来没有在 Crystal Reports 本身内找到解决此问题的方法。我最终做的是在 SQL 中创建一个存储过程以用作数据源。在存储过程中，我基本上执行了交叉连接，这样每条记录只返回 1 个操作。在 CR 中，我能够总结 Action 字段值。

# php - 从 PHP 文件创建 HTML 文件

> ID：15250281
> 
> 赞同：0
> 
> 时间：2013-03-06T14:43:04.963
> 
> 标签：php, jquery, html

我知道这超出了 PHP 的常规用途。我使用 PHP 为 Web 前端生成模板。然后，我将这些模板交付给开发团队。他们要求我们提供平面 HTML 文件。

有没有办法利用 PHP 来保存文件的 html 版本。我有 screen-02.php 到 screen-62.php。我必须在浏览器中单独打开它们并将 html 保存为 screen-02.html、screen-03.html 等。如果有帮助，我也可以使用 jQuery。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:48:43.443

我认为编写 Shell/Batch 脚本并从 CLI 执行 PHP 脚本而不是将它们用作网页是最简单的事情。

如果执行以下命令：

```
php /some/page.php 
```

您可以生成所需的输出到您的标准输出，因此如果您使用流水线，您可以轻松地执行以下操作：

```
php /some/page.php >> /some/page.html 
```

或者你可以像这样编写一个 bash 脚本（如果你在 Linux 上）：

```
#!/bin/bash
for i in {1..5}
do
  php /some/screen-$i.php >> /some/screen-$i.html
done 
```

我认为这将是最简单（也是最快）的方法，不需要其他技术。

如果您无法访问 PHP CLI，您可以执行类似的操作，但您可以使用 PHP CLI`wget`来下载页面，而不是使用 PHP CLI。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T14:49:23.913

使用 php 输出缓冲？[http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

可能是这样的：

```
<?php

    ob_start();

    include_once("screen-01.php");

    $content = ob_get_clean();

    file_put_contents($fileName, $content);

?> 
```

您也可以循环保存所有文件，但取决于您应该检查最大执行时间的数量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:48:52.910

最简单的方法（在我看来）是使用输出缓冲来存储然后保存 PHP 输出。您可以在不访问命令行服务器工具的情况下使用它。

像这样创建一个新的 PHP 文件：

```
<?php

// Start output buffering
ob_start();

// Loop through each of the individual files
for ( $j = 0; $j<= 62; $j++ ){

    ob_clean(); // Flush the output buffer
    $k = str_pad( $j, 2, '0' ); // Add zeros if a single-digit number
    require_once('screen-' . $k . '.php'); // Pull in your PHP file

    if ( ob_get_length() > 0 ){ // If it put output into the buffer, process
        $content = ob_get_contents(); // Pull buffer into $content
        file_put_contents( 'screen-' $k . '.html', $content ); // Place $content into the HTML file
    }
}

?> 
```

并从同一台服务器上的同一路径运行它。确保文件夹具有写入权限 (CHMOD)，以便它可以创建新文件。您应该会发现它会使用正确的 PHP 输出生成所有 HTML 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:50:03.523

也许是这样的：

```
<?php
$file = $_GET['file'];

$html = file_get_contents('http://yoururl.com/'.$file);
file_put_contents('./savedPages/'.$file.'.htm', $html);

?> 
```

[用http://yoururl.com/savePage.php?file=yourtarget.php](http://yoururl.com/savePage.php?file=yourtarget.php)调用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:51:30.450

当您使用 Smarty 之类的模板引擎时，您可以创建输出并将其保存到文件中，而无需在浏览器中显示。

```
$smarty = new Smarty;
$smarty->assign("variable", $variable);
$output = $smarty->fetch("templatefile.tpl");

file_put_contents("/path/to/filename.html", $output); 
```

Smarty 文档：[http ://www.smarty.net/docs/en/api.fetch.tpl](http://www.smarty.net/docs/en/api.fetch.tpl)

另一种选择是使用[PHP 输出缓冲区](http://php.net/manual/en/book.outcontrol.php)

# django - 依赖其他模型的表单字段需要重启服务器

> ID：15250288
> 
> 赞同：0
> 
> 时间：2013-03-06T14:43:19.190
> 
> 标签：django, django-forms

我有以下表格：

```
class AlertForm(forms.Form):
    user_choices = sorted([(c.id, c.first_name + ' ' + c.last_name) \
        for c in User.objects.all()], key=lambda user: user[1])
    message = forms.CharField(widget=forms.Textarea())
    recipients = forms.MultipleChoiceField(choices=user_choices,
        widget=forms.SelectMultiple(attrs={'size':'20'}),
        help_text="You will automatically be included with the recipients.") 
```

问题是如果我使用管理界面或任何其他方法将用户添加到数据库中，我必须重新启动服务器，新添加的用户才会出现在 MultipleChoiceField 中。如何避免服务器重启？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:55:32.427

如果要`choices`动态计算，则需要在表单的`__init__`方法中而不是在表单定义中进行。请记住，类的主体仅在加载类定义时执行一次——这就是服务器重启解决问题的原因。

你会想要这样的东西：

```
def __init__(self, *args, **kwargs):
    super(AlertForm, self).__init__(*args, **kwargs)
    user_choices = sorted([(c.id, c.first_name + ' ' + c.last_name) \
        for c in User.objects.all()], key=lambda user: user[1])
    self.fields['recipients'].choices = user_choices 
```

您也可以使用聚合将其压缩为查询集，`order_by`并 `values`达到相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:41:43.493

在我的搜索中，我发现了一个更简单的解决方案： [ModelMultipleChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelmultiplechoicefield)。它是这样实现的：

```
class AlertForm(forms.Form):
    message = forms.CharField(widget=forms.Textarea())
    recipients = forms.ModelMultipleChoiceField(queryset=User.objects.all()) 
```

此表单字段处理所有详细信息，包括动态更新收件人字段。

# .htaccess - 使用 htaccess 更改 GET var

> ID：15250289
> 
> 赞同：1
> 
> 时间：2013-03-06T14:43:19.313
> 
> 标签：.htaccess, get, var

您好，我到处寻找解决方案，但找不到正确的答案，希望你们中的一些人能帮助我。

我需要更改此网址：

`www.website.com/category/post?src=flash-game`

对此：

`www.website.com/category/post?utm_source=www.referrer.com&utm_medium=swf_game_referral&utm_campaign=flash-game`

所以基本上我需要将“ `src`”var 更改为“ `utm_campaign`”，然后`utm_source`用“ ”获取“ `%{HTTP_REFERER}`”并手动添加“ `utm_medium`”和值“ `swf_game_referral`”

我尝试使用这个：

```
RewriteCond %{QUERY_STRING} src=(.*)
RewriteRule ^$ ?utm_source=%{HTTP_REFERER}&utm_medium=swf_game_referral&utm_campaign=%1 [QSA,R,L] 
```

它可以很好地更改 GET var 并添加所有其他内容，但问题是它总是将所有参数重定向到主页，例如：

如果有人使用此网址访问我的网站： `www.website.com/category/post?src=flash-game`

它将被重定向到： `www.website.com/?utm_source=www.referrer.com&utm_medium=swf_game_referral&utm_campaign=flash-game`

我需要它留在原来的路径： `www.website.com/category/post?utm_source=www.referrer.com&utm_medium=swf_game_referral&utm_campaign=flash-game`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:48:57.347

您需要将 URI 添加为目标的一部分，以便您的`RewriteRule`行如下所示：

```
RewriteRule ^(.*)$ /$1?utm_source=%{HTTP_REFERER}&utm_medium=swf_game_referral&utm_campaign=%1 [R,L] 
```

# winapi - CTime 可以为空吗？

> ID：15250291
> 
> 赞同：1
> 
> 时间：2013-03-06T14:43:22.263
> 
> 标签：winapi, mfc, null, nullable, ctime

在 MFC 应用程序中，我喜欢将 SQL 日期值 ( `CDBVariant`) 映射到 MFC `CTime`。因为数据库条目可以为NULL（值不存在），不知是否`CTime`可以为空。[MFC文档](http://msdn.microsoft.com/en-us/library/29btb3sw%28v=vs.110%29.aspx)中的评论`CTime::Format`让我思考，应该是可能的：

> 如果此 CTime 对象的状态为 null，则返回值为空字符串。

*   但是如何设置这个状态，甚至可能吗？
*   如果不可能，我想`boost::optional<CTime>`这是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:10:23.390

CTime 只是一个`__time64_t`. 当您调用格式时，它会执行以下操作：

```
inline CString CTime::Format(_In_z_ LPCTSTR pFormat) const
{
    if(pFormat == NULL)
    {
        return pFormat;
    }

    TCHAR szBuffer[maxTimeBufferSize];
    struct tm ptmTemp;

    if (_localtime64_s(&ptmTemp, &m_time) != 0)
    {
        AtlThrow(E_INVALIDARG);
    }

    if (!_tcsftime(szBuffer, maxTimeBufferSize, pFormat, &ptmTemp))
    {
        szBuffer[0] = '\0';
    }
    return szBuffer;
} 
```

所以你要查看的系统函数是`_tcsftime`。这就是我认为文档不是很准确的地方。如果`_localtime64_s`失败，您将收到异常，因此“空”时间不能真正传递给`_tcsftime`. 如果失败，您只会得到 NULL ，`_tcsftime`但这不会是因为“null”时间。

所以，简而言之，使用你建议的东西`boost::optional`来表示空值。

# google-app-engine - 当我通过“count()”方法计算实体时，实体的大小是否应该尽可能小？

> ID：15250300
> 
> 赞同：0
> 
> 时间：2013-03-06T14:43:43.140
> 
> 标签：google-app-engine, google-cloud-datastore

我想知道我是否应该有一种只用于计算实体的种类。

例如有一个像下面这样的模型。

```
class Message(db.Model):
    title = db.StringProperty()
    message = db.StringProperty()
    created_on = db.DateTimeProperty()
    created_by = db.ReferenceProperty(User)
    category = db.StringProperty() 
```

并且有 100000000 个实体由这个模型组成。
我想计算类别等于“书”的实体。
在这种情况下，我应该创建以下模式来计算它们吗？

```
class Category(db.Model):
    category = db.StringProperty()
    look_message = db.ReferenceProperty(Message) 
```

这个小模型是否可以加快计数速度？
它会擦除更小的内存吗？

顺便说一下，我想像下面这样计算它们

```
q = db.Query(Message).filter('category =', 'book')
count = q.count(10000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T01:08:19.910

在作为 App Engine 数据存储区的 NoSQL 数据库上，计算 100000000 个实体是一项非常昂贵的操作。您可能希望在更新时计数，或者在事后运行 map-reduce 操作来计数。

App Engine 还提供了一种简单的方法来查询您拥有的每种类型的实体数量：

[https://developers.google.com/appengine/docs/python/datastore/stats](https://developers.google.com/appengine/docs/python/datastore/stats)

例如，要计算所有消息：

```
from google.appengine.ext.db import stats

kind_stats = stats.KindStat().all().filter("kind_name =", "Message").get()
count = kind_stats.count 
```

请注意，统计信息是异步更新的，因此它们会滞后于实际计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:14:49.170

我认为您必须创建另一个这样的实体。这个实体只会按类别计算消息的数量。只需将您的类别更改为：

```
class Category(db.model):
   category = db.StringProperty()
   totalOfMessages = db.IntegerProperty(default=0) 
```

在您更改为引用类别类的消息类中，只需将类别属性更改为：

```
category = db.ReferenceProperty(Category) 
```

当你创建一个新的消息对象时，你必须更新计数器，当你创建一个新消息时递增，或者如果你删除则递减。

在 GAE 上使用计数器的最佳方法是使用分[片计数器](https://developers.google.com/appengine/articles/sharding_counters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T14:05:56.020

计数被实现为一个索引扫描，它丢弃除所见记录数之外的所有数据。它从不查找实体，因此实体的大小无关紧要。

话虽如此，在没有固定模式的系统中，这样的计数无法扩展并且成本很高。使用其他方法可能会更好，例如 Sharded Counter、MapReduce 或 Materialized View/Fork Join。如果您真的希望它扩大规模，这个演讲内容非常丰富：[http ://www.google.com/events/io/2010/sessions/high-throughput-data-pipelines-appengine.html](http://www.google.com/events/io/2010/sessions/high-throughput-data-pipelines-appengine.html)

# javascript - Backbone.history.start() 阻止后退按钮离开页面

> ID：15250302
> 
> 赞同：3
> 
> 时间：2013-03-06T14:43:49.497
> 
> 标签：javascript, backbone.js, browser-history

我现在在一些应用程序上遇到了这个问题，所以我想知道我是否对 Backbone 历史做错了什么。情况是这样的...

我有两页，比方说：

```
index.html
app.html 
```

索引页只是一个普通的、平面的 HTML 页面，带有指向`app.html`. 在 App 页面上，`Backbone.history.start()`调用以启动哈希状态管理，用于在 App 页面上的两个视图之间切换，例如：

```
app.html#search
app.html#results 
```

`#search`因此，在和页面之间来回导航`#results`效果很好。那里没有问题。当您尝试使用后退按钮一直返回到`index.html`. 返回索引页面的路径包括在`app.html`（无散列状态）处的停止，在该处，骨干路由器尽职尽责地填充缺失的散列状态，使您回到`app.html#search`. 同样，单击后退按钮将转到`app.html`，这会再次填充缺少的哈希状态...基本上，您现在陷入了循环，无法从页面返回。使用推送状态时也会发生同样的行为。

对于在默认页面 URL 之上自动启动自己的路由系统的应用程序，这似乎是一个潜在的常见问题。有谁知道避免这种情况的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:53:40.163

问题是`app.html`它自己没有做任何事情。因此，如果导航，可能会以某种方式破坏应用程序。

在这种情况下，您可以做的不是将根路由重定向到另一个，只需将其用作默认页面：

```
routes: {
  "": "search",
  "results": "results"
} 
```

# java - 格式化字符串

> ID：15250314
> 
> 赞同：1
> 
> 时间：2013-03-06T14:44:21.967
> 
> 标签：java, string, format

我正在尝试在字符串到达​​并满足某些条件时对其进行格式化。但是，如果下面的标记长度不同，事情不匹配，我该怎么做？我希望所有“IP 地址”都匹配。我假设我使用类似 %20s 的东西？

```
if (tokens.length == 4 && (tokens[3].equals("up") || tokens[3].equals("down"))){
    String result = String.format("%s is %s. IP address: %s \n", tokens[0], tokens[2], tokens[1]);
    final String ReceivedText = mReceiveBox.getText().toString() + result;

    if(tokens[2].equals("up")){
        runOnUiThread(new Runnable() {
        public void run() {
            mReceiveBox.setText(ReceivedText);
            mReceiveBox.setSelection(ReceivedText.length());

         }
      });
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:22:41.797

这是一个用空格右填充字符串的示例：

```
System.out.println(String.format("%-40s", "SHORT TEXT") + "|");
System.out.println(String.format("%-40s", "SOME LONG TEXT") + "|");
System.out.println(String.format("%-40s", "SOME MUCH LONGER TEXT") + "|"); 
```

哪个输出：

```
SHORT TEXT                              |
SOME LONG TEXT                          |
SOME MUCH LONGER TEXT                   | 
```

`-`格式化标志将左对齐您的文本。没有它，输出看起来像：

```
 SHORT TEXT|
                          SOME LONG TEXT|
                   SOME MUCH LONGER TEXT| 
```

此外，如另一个答案中所述，如果您希望所有内容正确对齐，则必须使用*等宽字体。*

这里有 2 行，每行 10 个字符，字体*不是*等宽字体：

wwwwwwwwww
iiiiiiiii

以及等宽字体中相同的 2 行：

```
wwwwwwwwww
iiiiiiiiii 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:48:14.093

考虑在格式字符串中指定*宽度*`mReceiveBox.getText().toString()`，并包含在格式中（而不是附加结果）。

请参阅：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)

你想最终得到类似的东西：

```
String result = String.format("%20s%s is %s. IP address: %s \n",
    mReceiveBox.getText().toString(), tokens[0], tokens[2], tokens[1]); 
```

其中 20 是接收框文本的最大宽度。您还需要对 IP 之前的令牌执行相同的操作。

编辑：另外，通过查看您的图像，您确实需要在输出中使用固定宽度的字体。否则，您将需要开始计算渲染文本的像素宽度。一个更棘手的问题。

编辑2：字体很重要，因为如果它不是固定宽度，宽度实际上将取决于字符串的内容。考虑以下内容（假设您在标准浏览器上使用标准字体）：

lllll 五个字符长
mmmmm 五个字符长

对比

```
lllll that was five characters long
mmmmm that was five characters long 
```

看到对齐问题了吗？

# hibernate - 将空值传递给 nhibernate c# 中的 guid 列

> ID：15250315
> 
> 赞同：1
> 
> 时间：2013-03-06T14:44:23.917
> 
> 标签：hibernate, nhibernate, nhibernate-criteria

我陷入了问题，没有得到正确的方法或解决方案，我该如何处理这个问题。问题是我正在创建一个标准查询，我们在其中将属性 id 作为参数传递。属性 id 的类型是 guid。当属性 id 有值时，它工作正常，但当它为空时，它会崩溃。

我的要求是，当属性 id 有值时，根据属性 id 过滤记录，当属性 id 为 null 时，它过滤属性 id 为 null 的记录。

我试过这个链接[Nullable GUID](https://stackoverflow.com/questions/211436/nullable-guid)

但它会给出另一个异常，即类型不匹配异常。

这是我正在使用的 NHibernate 代码

```
 var invoiceList =
     Session.CreateCriteria<tARInvoice>("inv")
            .Add(Restrictions.Eq("inv.fPropertyID",
                                 propertyId == null ?  (object)DBNull.Value : propertyId.Value))   
            .List<tARInvoice>() 
```

我正在使用 c# 和 NHibernate 3.1 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:49:14.917

它应该很简单

```
var invoiceList = Session.CreateCriteria<tARInvoice>()
    .Add(Restrictions.Eq("fPropertyID", propertyId)
    .List<tARInvoice>(); 
```

假设 fPropertyID 是类型`Guid?`并映射为简单属性

# c - init-declarator-list 和 GNU GCC 属性语法

> ID：15250318
> 
> 赞同：5
> 
> 时间：2013-03-06T14:44:25.340
> 
> 标签：c, attributes, grammar, gnu, bnf

我正在改进一个内部 C 语言基于 bison/flex 的解析器，其中包括引入适当的 __attribute__ 支持。

由于我找不到任何描述 GNU GCC __ attribute__ 想法的官方 BNF 样式语法（除了[http://gcc.gnu.org/onlinedocs/gcc/Attribute-Syntax.html](http://gcc.gnu.org/onlinedocs/gcc/Attribute-Syntax.html)文档），我正在从 C 中提取点点滴滴++x11 标准和在网络上找到的各种实现中的注释。

我几乎已经完成了（至少在解析上面引用的 GCC 文档中包含的示例时），但是一个特定的示例让我很头疼，但外部资源中没有任何解决方案的提示。

示例如下：

```
__attribute__((noreturn)) void d0 (void),
         __attribute__((format(printf, 1, 2))) d1 (const char *, ...),
          d2 (void); 
```

随附的描述说：

> 在使用单个说明符和限定符列表的多个标识符的声明中，属性说明符列表可以紧邻声明符（第一个除外）出现在以逗号分隔的声明符列表中。此类属性说明符仅适用于它们出现在其声明符之前的标识符。

因此，引导我找到这个解决方案：

```
init-declarator-list:
 init-declarator
 init-declarator-list , attribute-specifier-seq[opt] init-declarator 
```

我知道它有效，但如果这是解决上述案例的正确方法，我想寻求验证/支持。

谢谢，

沃伊切赫

编辑：这个链接（虽然有点过时）给出了一个和我一样的解决方案：http: [//plg.uwaterloo.ca/~cforall/gcc.y](http://plg.uwaterloo.ca/~cforall/gcc.y) 奇怪的是，我之前没有偶然发现它，只是现在我做了搜索 __ extension__ 关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:25:46.433

早期版本的 GCC 2.XX 曾经依赖 bison 进行解析。因此，下载旧版本应该可以满足您的需求。

请注意，新的 GCC 版本会引入新的属性......

# iphone - 表视图的带图像的标题在 iPhone 5 中不起作用

> ID：15250326
> 
> 赞同：2
> 
> 时间：2013-03-06T14:44:45.527
> 
> 标签：iphone, ios, xcode, uitableview, tableheader

我在我的应用程序中为 TableView 的标题设置图像。

它在 Iphone 3Gs 中运行良好。但相同的代码在 Iphone 5 中不起作用。它仅显示具有非常小尺寸图像的框架。

当我增加帧宽度时，图像不会增加。

这是我的代码：

```
-(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        CGSize result = [[UIScreen mainScreen] bounds].size;
        NSLog(@"height%f",result.height);
        if(result.height > 500){
            NSLog(@"iPhone 5");

            UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320,30)];
            UIImageView *img = [[UIImageView alloc]initWithFrame:headerView.frame];
            if(tableView == tableview1)
                    {
                img.image = [UIImage imageNamed:@"My Contacts Overlay.fw.png"];
                    }
            else if(tableView == tableview2)
                    {
                img.image = [UIImage imageNamed:@"My Contacts Overlay2.fw.png"];
                    }

            [headerView addSubview:img];
            return headerView;
        }
} 
```

任何人都可以请！帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:04:36.233

为您的 headerView 和 img 设置 Autoresizingmask ...希望它会起作用

[以编程方式自动调整掩码与 Interface Builder / xib / nib](https://stackoverflow.com/questions/7754851/autoresizing-masks-programmatically-vs-interfact-builder-xib-nib)

# java - 在 Java 的正则表达式中逐字替换字符

> ID：15250327
> 
> 赞同：2
> 
> 时间：2013-03-06T14:44:47.810
> 
> 标签：java, regex

我有一个与此类似的正则表达式：-

```
abc{some dynamic character}abc 
```

我想在运行时替换大括号内的字符。该动态字符可能是特殊字符（元字符、转义字符等）。

如何确保这个动态形成的正则表达式与静态放置这个字符所写的一样。（如*"abc\\nabc"*）

**示例：-** 动态字符：`'\n'` 静态正则表达式：`"abc\\nabc"` 替换字符后，动态正则表达式应等于静态正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:48:56.907

您可以使用 Pattern 类来转义您的动态角色：

```
"abc"  + Pattern.quote(dynamicCharacter) "abc" 
```

# excel - 在 Matlab 中使用 Excel 中的日期

> ID：15250339
> 
> 赞同：1
> 
> 时间：2013-03-06T14:45:08.353
> 
> 标签：excel, matlab

我正在创建一个实用程序，它将给用户一个提示并询问他们的 crn #、section # 和老师姓氏。输入后，用户将收到他们的考试时间、日期和地点。我的 excel 电子表格和使用 mac os 时遇到问题。尽管日期显示为 (.) 而不是 (01/01/0001)

这是代码

这是使代码工作的电子表格；[https://www.dropbox.com/s/drwmk1dinbfwfvl/DrexelFinalsWinter13.xlsx?m](https://www.dropbox.com/s/drwmk1dinbfwfvl/DrexelFinalsWinter13.xlsx?m)

```
close all;

%% I created an Excel file to hold the information located on Drexel's 
%% website witch contains exam times and locations based on certain criteria
%% First I have to make code to read the excel file created
clc
[ndata, text, alldata]=xlsread('DrexelFinalsWinter13.xlsx');
%% Next we will prompt the user for specific data by creating a dialog box 
%% using the prompt command.
clc
prompt={'Your CRN #','Your Section #',...
    ' Your Instructors Name' };
numlines=1;
defaultanswer={'22081','001','Hawkins'};
name='Enter Info';
options.Resize='on';
options.WindowStyle='normal';
options.Interpreter='tex';
answer=inputdlg(prompt,name,numlines,defaultanswer); %prompt user for data

 a1=cell2mat(answer(1));c1=str2double(a1); %converting cell info to numeric
 a2=cell2mat(answer(2));c2=str2double(a2); %converting cell info to numeric
 w=0;

for p=1:1032;
if (isequal(c1,cell2mat(alldata(p,1))) && ...
        (or(isequal(c2,cell2mat(alldata(p,4))),...
        isequal(answer(2),alldata(p,4)))) && ...
        isequal(answer(3),alldata(p,6))); % the if condition looks to see if
                                          % our input matches any data in the table
   % we cant use cell data below for comoarison so I had to
   % convert it to matlab common data like num or double
   % for numbers because the xlsread function cant
   % distinguish them and only know strings
    w = w+1;
    date = cell2mat(alldata(p,7));
    time = cell2mat(alldata(p,8));
    loca = cell2mat(alldata(p,9)); 
   fprintf('Your exam date is %s. \n',date); % print date results
   fprintf('Your exam time is %s. \n',time);  % print time results
   fprintf('Your exam location is %s. \n',loca); % print location results
   disp('Good luck with your exams! Sleep well & eat a healthy breakfast!'); % just for kicks
elseif p==1032 && w==0   %if we didnt find any matches from our prompt
    'You have provided wrong data or no exam is scheduled for your class.';
end
 end
% The outputs are then located in the command line like below
% answer to the defult values
% Your exam date is 3/19/2013\. 
% Your exam time is 0800-1000\. 
% Your exam location is See Department. 
% Good luck with your exams! Sleep well & eat a healthy breakfast! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:06:16.493

尝试这个：

```
fprintf('Your exam date is %s. \n',datestr(x2mdate(date))); % print date results 
```

如果您有财务工具箱，请查看[x2mdate 文档](http://www.mathworks.com/help/finance/x2mdate.html)，否则您可以这样做：

```
fprintf('Your exam date is %s. \n',datestr(date + datenum('30DEC1899'))); 
```

（从[这里](http://matlab11.wordpress.com/lectures/entering-and-saving-data/)）

# highcharts - Highcharts 堆积面积过滤

> ID：15250340
> 
> 赞同：0
> 
> 时间：2013-03-06T14:45:12.670
> 
> 标签：highcharts

当用户过滤到特定行时，我的堆叠区域实现中出现错误。

在下面链接的图片中，您会看到我们正在跟踪两个趋势。当我关闭“拨号”趋势时，橙色区域应该保持在原来的位置。相反，它向上移动以填充整个区域。同样，如果我要关闭橙色的“宽带”趋势，绿色拨号区域会填充它下方的整个区域，而不是像它应该的那样下降到基线。

![](../Images/369f65a8584acb03968559cb601bf943.png)

（stackoverflow 不允许我发布图片。）

您可以看到工具提示中的值仍然准确。

任何人都可以提供一些可能导致这种情况的见解吗？如果这可能是一个因素，图表是使用 Highcharts.visualize() 基于数据表生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T14:15:14.707

我可以看到您使用的是 Highcharts 3.0.0。据此，[此](https://stackoverflow.com/questions/16826963/highcharts-no-longer-animates-and-readjusts-rescales-chart-upon-addition-and-rem)版本的 Highcharts 中存在错误。如果您将 Highcharts 升级到最新版本，它应该可以按预期工作。

# git - 使用 git 签出对临时目录的旧提交

> ID：15250343
> 
> 赞同：5
> 
> 时间：2013-03-06T14:45:16.477
> 
> 标签：git

我的资源位于`/home/user/Workspace/MyProject`，而 git 存储库位于`/home/user/Workspace/MyProject/.git`。

现在我想获得一个较旧的提交，但是把它放进去`/home/user/Workspace/MyProject_OldCommit`，因为我不想改变目录中的任何东西`MyProject`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T14:49:03.223

```
cd /home/user/Workspace
git clone MyProject MyProject_OldCommit
cd MyProject_OldCommit
git checkout <old_sha1> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:47:46.457

从以下运行`/home/user/Workspace/MyProject`：

```
git archive  <old-sha1> | tar -x -C ../MyProject_OldCommit 
```

这将创建一个新的提交副本，没有整个 git 存储库。

# jsp - 关于 JSP 身份验证的选项

> ID：15250344
> 
> 赞同：1
> 
> 时间：2013-03-06T14:45:18.887
> 
> 标签：jsp, authentication, tomcat, servlets

我正在开发一个 Tomcat 7 JSP 应用程序，并且正在使用应用程序级别的身份验证。即用户登录到我检查数据库的表单。然后我在会话中设置了一个用户 bean 来让他们登录。

这在当时似乎是合乎逻辑的事情。但现在我在质疑自己……我陷入了细节的泥潭。

例如，我检查用户是否在每个安全页面上登录。如果没有，我会重定向到登录页面。然后登录将它们返回到安全页面。这有会话超时的问题。

例如，用户编辑表单（基本 CRUD）。然后电话响了。通话后，他们提交表单但没有有效的会话。该操作重定向到登录。但是登录后表单变量是空白的，它们会在表中创建一个空行......

我可以想办法处理这种情况，但现在我想知道这是否是一场疯狂的追逐。有没有更好的办法？

*   是否有讨论基于应用程序或基于容器的身份验证优点的常见问题解答？
*   是否有一个很好记录的模式来进行自己的身份验证？
*   这种情况会在未来导致可扩展性问题吗？

寻找替代品。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:37:29.873

只是我的2美分。这是我会做的。

1）`Well instead of just relying on Session Variable alone , you can create a cookie to log other details`像 UserName ， lastAccessedPage 等。

2) `Don't not handle authentication at the JSP , rather move the logic to a Servlet Filter`。理想情况下，它应该检查会话是否对所有请求都有效。

3）所以`When session times out`在提交Form的过程中，还是提交了参数，只是会被Filter拦截。在过滤器中，您可以`create a temp session variable`使用一个键`userid_pagetype (to make it unique)`来存储所有请求数据（即请求参数和请求参数值。）`

有了这个设置，您可以在他再次登陆表单时填充字段

# ado.net - 如何将 spellckeck 属性添加到 C# 代码

> ID：15250346
> 
> 赞同：0
> 
> 时间：2013-03-06T14:45:25.693
> 
> 标签：ado.net

我正在 Windows 窗体应用程序下使用 C# 3.5 开发应用程序。问题是 SpellCheck 属性在文本框属性中不可用。我添加了 PresentationFramework Assembly、System.Windows.Controls 命名空间和 System.Windows.Controls.Primitives 命名空间，但仍然无法正常工作。我正在尝试测试以下示例。

myTextBox.SpellCheck.IsEnabled = true;

有任何想法吗 ？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:51:07.260

您可能需要使用[第 3 方控件](http://nhunspell.sourceforge.net/)来执行拼写检查。我怀疑您可能想对特定的关键事件（如空格、逗号、句点、问号等）调用拼写检查器的 CheckSpelling() 方法。

# typo3 - 6.0.3 中 Typo3 $this->contentObj 中缺少图像

> ID：15250351
> 
> 赞同：1
> 
> 时间：2013-03-06T14:45:37.343
> 
> 标签：typo3, fluid, extbase

在 TYPO3 6.0.2 中，我得到了一个 Extbase/Fluid-Extension。Controller 中的函数如下所示：

```
$this->contentObj = $this->configurationManager->getContentObject();
$data = $this->contentObj->data;
print_r($data); 
```

这将返回一个`tt_content`- 对象，包括`image => /path/to/image`. 一切都很好。

```
[bodytext] => Lorem ipsum dolor 
[image] => ../../fileadmin/user_upload/images/businessman.jpg 
```

今天将源更改为 TYPO3 6.0.3 一切都一样，但图像只是`"1"`.

```
[bodytext] => Lorem ipsum dolor
[image] => 1 
```

我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T07:31:22.867

我发现这是在没有 sql 查询的情况下获取文件

```
 public function myAction(){        

    // get data of the content object
    $data = $this->contentObj = $this->configurationManager->getContentObject()->data;

    // Neu ab Typo3 6.0.3 -> Bild in tt_content-Object wird nicht mehr mit zurueckgeliefert, daher:     
    $fileRepository = \TYPO3\CMS\Core\Utility\GeneralUtility::makeInstance('TYPO3\\CMS\\Core\\Resource\\FileRepository');
    $fileObjects = $fileRepository->findByRelation('tt_content', 'image', $data['uid']);
    $files = array();
    foreach ($fileObjects as $key => $value) {
      $files[$key]['reference'] = $value->getReferenceProperties();
      $files[$key]['original'] = $value->getOriginalFile()->getProperties();
    } 

    #t3lib_utility_Debug::debug($files);
    #die('Ende');        

    // Files in Fluid ausgeben
    $this->view->assign('files', $files);        

    // Daten in Fluid ausgeben
    $this->view->assign('data', $data);
} 
```

体液

```
 <f:for each="{files}" as="file">                        
                    <li>
                        <a href="{file.reference.link}"><img src="fileadmin{file.original.identifier}" alt="" /></a>
                        <p class="flex-caption"><f:format.nl2br>{file.reference.description}</f:format.nl2br></p>
                    </li>                        
                </f:for> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:45:07.683

Since TYPO3 6 the method "`function getContentObject($name)`" was located in *typo3\sysext\cms\tslib\class.tslib_content.php*.

Content of this file:

```
/*
 * @deprecated since 6.0, the classname tslib_cObj and this file is obsolete
 * and will be removed with 6.2\. The class was renamed and is now located at:
 * typo3/sysext/frontend/Classes/ContentObject/ContentObjectRenderer.php
 */
require_once \TYPO3\CMS\Core\Utility\ExtensionManagementUtility::extPath('frontend') . 'Classes/ContentObject/ContentObjectRenderer.php'; 
```

But I don't see any differences between the old an the new file containing my problem.

I didn't find out how to get the file reference for the tt_content-entry "native", so I wrote a SQL-query:

```
 public function bla() {
    // get data of the content object
    $this->contentObj = $this->configurationManager->getContentObject();
    $data = $this->contentObj->data;
    // Neu ab Typo3 6.0.3 -> Bild in tt_content-Object wird nicht mehr mit zurueckgeliefert, daher: 
    // https://forge.typo3.org/issues/46090
    // http://stackoverflow.com/questions/15250351/missing-image-in-typo3-this-contentobj-in-6-0-3
    $res = $GLOBALS['TYPO3_DB']->sql_query(
        'select sys_file.identifier from sys_file_reference left join sys_file on sys_file_reference.uid_local = sys_file.uid where sys_file_reference.uid_foreign='.$data['uid'].' and sys_file_reference.deleted=0'
    );
    while ($row = $GLOBALS['TYPO3_DB']->sql_fetch_assoc($res)) {
        $data['image'] = $row['identifier'];
    }
    #print_r($data);
    // assign the data to the fluid template
    $this->view->assign('data', $data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:12:32.050

该错误似乎是典型 jumpURL 系统已更改（SQL 注入）的安全更新的结果。我在这里提交了一个错误：http: [//forge.typo3.org/issues/46090](http://forge.typo3.org/issues/46090)

# javascript - 淘汰赛可排序数组未正确显示嵌套元素

> ID：15250353
> 
> 赞同：2
> 
> 时间：2013-03-06T14:45:38.580
> 
> 标签：javascript, jquery, knockout.js, jquery-ui-sortable, knockout-sortable

我是 Knockout.js 的新手，最近我开始使用 JQuery 和可淘汰排序项目。对于我的项目，我使用复杂的数据结构来显示一些表单。有一次，我正在尝试制作一个包含问题的嵌套可排序页面数组。我能够获得一个包含所有页面及其信息的容器，但我无法让容器正确显示问题。

我的以下内容在 HTML 中：

```
 <h2><span data-bind="text: DiscoveryFormUpdateLabel"></span></h2>
                <div class="pagesList" data-bind="foreach:discoveryForm">
                    <div class="row">
                        <div class="text-area">
                            <label>Discovery Form Name: </label>
                            <input data-bind="value:Name" width="400" />
                        </div>
                    </div>
                    <br />
                    <br />
                    <br />
                    <div class="row">
                        <div class="text-area">
                            <label>Welcome (HTML):</label>
                            <textarea data-bind="value: Welcome" rows="12" cols="89"></textarea>
                        </div>
                    </div>
                </div>

                <ul data-bind="sortable: {template: 'pages', data:discoveryFormPages}"></ul>

                 <script type="text/html" id="pages">
                    <li>
                        <div class="row">
                            <label>Name: </label>
                            <input data-bind="value:Name" />
                        </div>

                        <div class="row">
                            <label>Questions:</label>
                        </div>

                        <ul data-bind="sortable: {foreach:Questions}">
                            <li>Foo</li>
                        </ul>

                        <ul data-bind="foreach:Questions">
                            <li>Foo</li>
                        </ul>

                        <ul data-bind="sortable: { template: 'questions', foreach:Questions}" width="80%"></ul>
                    </li>
                </script>

                <script type="text/html" id="questions">
                    <li>
                        <div class="row">
                            <label>Subject:</label>
                            <textarea data-bind="value:Subject" cols="45"></textarea>
                        </div>
                        <div class="row">
                            <label>Type:</label>
                            <select data-bind="options: $root.questionTypes, optionsText:'Description', value:Type"></select>
                        </div>
                        <div class="row">
                            <label>Tagline:</label>
                            <textarea data-bind="value: Tagline" cols="45"></textarea>
                        </div>
                        <div class="row">
                            <label>Visible:</label>
                            <input type="checkbox" data-bind="checked:Visible" />
                        </div>
                    </li>
                </script> 
```

在`pages`模板中，我使用三种不同的方式来尝试显示问题。第一种方法显示一个 sortable `Foo`，第二种方法显示正确的`Foo`s 数，第三种方法显示一个没有项目的空白可排序区域。我正在研究一个 JS Fiddle，但我必须从数据库中获取复杂的信息，所以这需要时间。也欢迎任何帮助:)。

那么，我的问题是，为什么我会得到三种不同的东西，我哪里出错了？

编辑：我的模板基于[此](http://knockoutjs.com/documentation/template-binding.html).

我正在使用[这个](https://github.com/rniemeyer/knockout-sortable)项目。

[我设想最终结果与此](http://jsfiddle.net/rniemeyer/uhZEL/)有些相似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:07:37.860

在 jsFiddle 中获取示例可能会有所帮助，但它看起来像：

对于这个：`<ul data-bind="sortable: {foreach:Questions}">`

你想要的只是`sortable: Questions`相当于`sortable { data: questions }`

对于这个：`<ul data-bind="sortable: { template: 'questions', foreach:Questions}" width="80%"></ul>`

你要：`sortable: { template: 'questions', data: Questions }`

所以，主要只是使用`data`而不是`foreach`

# qt - Qt:: 如何消除 qmainwindow 中小部件和工具栏之间的间隙

> ID：15250357
> 
> 赞同：0
> 
> 时间：2013-03-06T14:45:51.263
> 
> 标签：qt, qmainwindow, gaps-in-visuals

基本上我在主窗口中有一个 QLabel*。我试图将它设置为centralWidget。当程序运行时，如果 mainWindow 保持原来的大小就可以了。但是，如果我放大尺寸，QLabel 和工具栏之间突然出现了不知从何而来的间隙！！！！我该怎么做才能摆脱它！！！

有趣的是，虽然创建了间隙，但 QLabel 的 x 和 y 坐标并没有改变！！！！怎么会这样！！！！

..................................................... ……………………………………………………………………………………………………………………

我使用 QTCreator 制作了一个 ScrollArea 作为 centralWidget。这样，当我放大 QMainWindow 时，ScrollArea 会自动放大。然而，问题是。当我尝试调用 setWidget 函数将 Label 设置为 ScrollArea 时，再次出现上述同样的问题！！！！

有人，请帮忙！！！！！！！！！！！！！

这是我尝试过的，但显然不起作用：

代码是：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    imageLabel = new QLabel();
    image = new QPixmap(480,320);
    image->fill();
    imageLabel->setPixmap(*image);
    setCentralWidget(imageLabel);
} 
```

![在此处输入图像描述](../Images/5fa8b01f9e332f10f882dd05a0dfb07b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:54:21.187

对我来说，这看起来像是一个布局问题，您已经设置了标签的大小，一旦您调整窗口大小，它就会保持已经设置的大小，除非您再次专门设置它的大小，或者您正在使用其中一个`QLayout`布局管理器.

# java - 在选择框中填充列表时出错

> ID：15250360
> 
> 赞同：0
> 
> 时间：2013-03-06T14:45:59.110
> 
> 标签：java, struts2

我能够从我的数据库中获取列表（我使用的是 ORM，即 Hibernate）。

列表类型是我的 Bean 类。

但我面临的问题是：

1.  SELECT BOX 中填充的列表具有对象。不是价值观。

要求是它应该填充名称。

动作类：

```
package com.action;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.logging.Logger;

import org.apache.commons.io.FileUtils;
import org.apache.struts2.interceptor.SessionAware;
import org.springframework.beans.factory.annotation.Autowired;

import com.ing.aosh.service.AoshService;
import com.ing.aosh.vo.EscRprtNameVO;
import com.opensymphony.xwork2.ActionSupport;

public class FileUploadAction extends ActionSupport  implements SessionAware{

    Logger logger = Logger.getLogger(FileUploadAction.class.getName());
    private Map session;
    private String slectList;
    EscRprtNameVO escNameRprtVo = new EscRprtNameVO();
     private File report;
        private String reportContentType;
        private String reportFileName;  
      private List escRprtNameList = new ArrayList(); 

    @Autowired
    AoshService aoshService;

    @Override
    public String execute() throws Exception {
        escRprtNameList = aoshService.getEscRprtNmNid();
        System.out.println("escRprtNameList 2==" + ((EscRprtNameVO) escRprtNameList.get(2)).getEscRprtName());
        System.out.println("escRprtNameList 4==" + ((EscRprtNameVO) escRprtNameList.get(4)).getEscRprtName());
        session.put("ESCRPTDETAILS", escRprtNameList);
        return "success";
    }

        public AoshService getAoshService() {
            return aoshService;
        }

        public void setAoshService(AoshService aoshService) {
            this.aoshService = aoshService;
        }

        public void setSession(Map session) {
            // TODO Auto-generated method stub
            this.session = session;

        }

        public EscRprtNameVO getEscNameRprtVo() {
            return escNameRprtVo;
        }

        public void setEscNameRprtVo(EscRprtNameVO escNameRprtVo) {
            this.escNameRprtVo = escNameRprtVo;
        }

        public String getSlectList() {
            return slectList;
        }

        public void setSlectList(String slectList) {
            this.slectList = slectList;
        }

        public List getEscRprtNameList() {
            return escRprtNameList;
        }

        public void setEscRprtNameList(List escRprtNameList) {
            this.escRprtNameList = escRprtNameList;
        }
} 
```

JSP页面：

```
 <s:set name="esclatnRprtName" value="#session.ESCRPTDETAILS"></s:set>
  <td align="left">
     <s:if test="#esclatnRprtName != null">      
        <s:select list="esclatnRprtName" name="slectList"/>
     </s:if>
  </td> 
```

对于上面的 JSP 代码，它给了我 OBJECT VALUE 的选择框

修改后的JSP PAGE

```
 <s:set name="esclatnRprtName" value="#session.ESCRPTDETAILS"/>
   <td align="left">
      <s:if test="#esclatnRprtName != null">      
         <s:select list="esclatnRprtName" name="slectList"
                   listKey="esclatnRprtName['escNameRprtVo.escId']"
                   listValue="esclatnRprtName['escNameRprtVo.escRprtName']"/>
      </s:if>
   </td> 
```

列表本身没有填充..

请求帮助或建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:48:27.077

尝试这个

```
 <s:select list="esclatnRprtName" name="slectList"
   listKey="escId"
   listValue="escRprtName"></s:select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:48:17.417

将 octothorpe 添加到您在声明中所做`<s:select>`的引用中：`esclatnRprtName``<s:if>`

```
 <s:select list="#esclatnRprtName" name="slectList" 
```

并直接引用 listKey 和 listValue 中列出的对象：

```
 listKey="escId"
 listValue="escRprtName" /> 
```

当一切正常时，您可能应该：

*   重命名所有变量，添加人声，让未来的穷人可以理解它们，当你在其他事情上时，他们会处理你的代码；
*   停下来想一想为什么需要使用这种涉及 Session 的复杂方法来执行这样的简单操作，而不是通过访问器和修改器使用简单的 Action 变量。

# ruby-on-rails - 这些方法属于哪里？

> ID：15250362
> 
> 赞同：0
> 
> 时间：2013-03-06T14:46:02.200
> 
> 标签：ruby-on-rails, design-patterns

我有一个服务模型，它有一个查询提供者以获取数组的方法：

```
class Service < ActiveRecord::Base
   def query
     return [1, 2, 3, 4]
   end 
```

我没有将返回的数组存储在我的 ActiveRecord 表中。现在，我想创建一些*特定*于返回数组的方法，例如 is_odd?、is_even?。

就约定而言，我应该将这些方法存储在哪里？在一个新的班级？新模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:51:13.617

将该数据包装在具有这些方法的新类中，并让您的查询方法返回该类的实例。

这为您提供了放置相关方法的地方。根据您的情况，它还可以帮助您抽象出该数据的内部表示。

# google-apps-script - 将状态/数据传递给 Google Apps 脚本 ServerHandler

> ID：15250369
> 
> 赞同：1
> 
> 时间：2013-03-06T14:46:17.757
> 
> 标签：google-apps-script

我正在尝试弄清楚如何将一些任意状态传递给 Google Apps 脚本中的 ServerHandler。以下代码说明了这个问题 - 有人可以帮忙吗？

谢谢。

```
function myFunc(e) {
// want to get my data object back out here..?
}

function setUp()  
{
  var data = getMyDataArray();

  // ... set up UI...  
  var h = app.createServerHandler('myFunc');

  // How do I passs my data object to the myFunc handler?
  flow.add(app.createButton().setText("OK").addClickHandler(h));

  app.add(flow); 
  s.show(app);  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:14:04.437

您可以使用[Hidden 元素](https://developers.google.com/apps-script/class_hidden)来存储任意数据并将其与服务器处理程序调用一起发送。问题是元素只能存储一个字符串。但是你可以使用 JSON 来解决这个问题。

```
function myFunc(e) {
  var yourObj = Utilities.jsonParse(e.parameter.yourObject);
  //do what you need
}

function setUp()  
{
  var data = getMyDataArray();

  // ... set up UI...  

  var hidden = app.createHidden("yourObject", Utilities.jsonStringify(data));
  var h = app.createServerHandler('myFunc').addCallbackElement(hidden);
  flow.add(app.createButton().setText("OK").addClickHandler(h));

  app.add(flow); 
  s.show(app);  
} 
```

# c# - FileSystemWatcher 检测到更改后读取文本文件的最后一行

> ID：15250372
> 
> 赞同：0
> 
> 时间：2013-03-06T14:46:29.740
> 
> 标签：c#, filesystemwatcher, .net, system.io.fileinfo

我之前的帖子是不可读的。每次更改时，我都试图读取文本文件的最后一行。我的代码是，

```
private void fileSystemWatcherMCH1_Changed(object sender, System.IO.FileSystemEventArgs e)
{
    string machState = File.ReadAllLines(@"C:\Users\sgarner\Documents\PROTOMET SHOP FLOOR\Machines\MACHINE_1.txt").Last();
    btnMCH1.Text = machState;
    btnMCH1.BackColor = Color.Blue;
} 
```

如果我只运行`btnMCH1.BackColor = Color.Blue;`它就可以了。但我无法从文本文件中读取变量。我确定我错过了一些简单的东西。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:58:00.503

您的代码似乎引发了**异常**，但出于某种原因您没有看到它。也许该文件正在被其他进程使用...尝试捕获它然后显示它，因此您可以看到问题：

```
private void fileSystemWatcherMCH1_Changed(object sender, System.IO.FileSystemEventArgs e)
{
    try
    {
        string machState = File.ReadAllLines(@"C:\Users\sgarner\Documents\PROTOMET SHOP FLOOR\Machines\MACHINE_1.txt").Last();
        btnMCH1.Text = machState;
        btnMCH1.BackColor = Color.Blue;
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Messasge);
    }
} 
```

# c# - 将步骤指示器绘制为自定义控件

> ID：15250376
> 
> 赞同：2
> 
> 时间：2013-03-06T14:46:42.000
> 
> 标签：c#, winforms, gdi+

我正在尝试创建步骤指示器控件，该控件将显示当前用户所在的步骤。我在 dribble 上发现了一些我想创建的概念：

![设计](../Images/e74677e4f472192cb73011194749aa17.png)

使用非常简单的代码，我能够创建这样的结果： ![我的结果](../Images/da55ade3814c83dc4cffbefe02e7b443.png)

下面是我的代码：

```
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Windows.Forms;

namespace StepIndicator
{
    public class StepIndicatorOne : Control
    {
        public StepIndicatorOne()
        {
            MinimumSize = new Size(300, 50);
            SetStyle(ControlStyles.DoubleBuffer, true);
            SetStyle(ControlStyles.AllPaintingInWmPaint, true);
            SetStyle(ControlStyles.UserPaint, true);
            SetStyle(ControlStyles.ResizeRedraw, true);
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);

            var g = e.Graphics;
            g.SmoothingMode = SmoothingMode.AntiAlias;

            int steps = 3;
            int radiusBig = 20;
            int radiusSmall = 15;
            int bgHeight = 10;

            var gradientRect = new Rectangle(ClientRectangle.X + (ClientRectangle.Width - radiusBig*2)/(steps - 1),
                                             ClientRectangle.Y + ClientRectangle.Height/2 - radiusBig - 1, radiusBig*2, radiusBig*2);

            var lightGrayBrush = new LinearGradientBrush(ClientRectangle, Color.FromArgb(224, 227, 214), Color.LightGray, LinearGradientMode.Vertical);
            var darkGrayBrush = new LinearGradientBrush(gradientRect, Color.DarkGray, Color.Gray, LinearGradientMode.Vertical);
            var lightGreenBrush = new LinearGradientBrush(ClientRectangle, Color.FromArgb(206, 217, 79), Color.FromArgb(191, 201, 82), LinearGradientMode.Vertical);
            var darkGreenBrush = new LinearGradientBrush(ClientRectangle, Color.YellowGreen, Color.ForestGreen, LinearGradientMode.Vertical);

            g.FillRectangle(darkGrayBrush, ClientRectangle.X + radiusBig, ClientRectangle.Y + ClientRectangle.Height/2 - bgHeight/2 - 1,
                            ClientRectangle.Width - radiusBig*2, bgHeight);

            g.FillRectangle(lightGrayBrush, ClientRectangle.X + radiusBig, ClientRectangle.Y + ClientRectangle.Height/2 - bgHeight/2,
                            ClientRectangle.Width - radiusBig*2, bgHeight);

            for (int i = 1; i <= steps; i++)
            {
                g.FillEllipse(darkGrayBrush, ClientRectangle.X + ((ClientRectangle.Width - radiusBig*2)/(steps - 1))*(i - 1),
                              ClientRectangle.Y + ClientRectangle.Height/2 - radiusBig - 1, radiusBig*2, radiusBig*2);
                g.FillEllipse(lightGrayBrush, ClientRectangle.X + ((ClientRectangle.Width - radiusBig*2)/(steps - 1))*(i - 1),
                              ClientRectangle.Y + ClientRectangle.Height/2 - radiusBig, radiusBig*2, radiusBig*2);
            }

            for (int i = 1; i <= steps - 1; i++)
            {
                g.FillEllipse(darkGreenBrush,
                              ClientRectangle.X + ((ClientRectangle.Width - radiusBig*2)/(steps - 1))*(i - 1) + radiusBig - radiusSmall,
                              ClientRectangle.Y + ClientRectangle.Height/2 - radiusSmall - 1, radiusSmall*2, radiusSmall*2);
                g.FillEllipse(lightGreenBrush,
                              ClientRectangle.X + ((ClientRectangle.Width - radiusBig*2)/(steps - 1))*(i - 1) + radiusBig - radiusSmall,
                              ClientRectangle.Y + ClientRectangle.Height/2 - radiusSmall, radiusSmall*2, radiusSmall*2);
            }

        }
    }
} 
```

我的问题是：
**是否可以像设计一样创建绿色形状（带有圆圈和一个孔的绿色条）但在它上面有边框？**
我可以绘制带边框的矩形和带边框的椭圆，但是如何将这两个形状组合并在其周围设置边框（将这两个形状组合成一个）-创建复杂路径是我唯一的选择吗？

我知道 winforms gdi+ 不能使用内阴影，**但是还有其他一些选项可以创建类似于内发光的漂亮效果吗？**
现在我用 -1 偏移量和更深的颜色绘制相同的形状，但效果不是我想要的。

我知道最好的解决方案可能是切换到 WPF 并在那里绘制，我什至在 SO 上找到了示例控件 -[在 WPF 中实现向导进度控件，](https://stackoverflow.com/questions/7691386/implementing-a-wizard-progress-control-in-wpf)但我**必须留**在 Winforms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T21:04:34.903

对复杂路径使用 GraphicsPath。对内部阴影使用路径渐变。

# c# - 在 C# 中将主音量从 XP 更改为 Windows 8

> ID：15250379
> 
> 赞同：0
> 
> 时间：2013-03-06T14:46:55.643
> 
> 标签：c#, .net, audio

我需要一些通用方法在 C# 中将**主音量**从 Windows XP 更改为 Windows 8，因为我的应用程序将在这些操作系统上运行。

我已经尝试过[http://www.geekpedia.com/tutorial176_Get-and-set-the-wave-sound-volume.html](http://www.geekpedia.com/tutorial176_Get-and-set-the-wave-sound-volume.html) 但它在 Windows 8 下不起作用。也许它应该在 Windows XP 下工作。

无论如何，我需要一些兼容的方法来做到这一点。有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:41:49.323

所以我的解决方案是结合两个项目：

1.  [静音/取消静音，使用 C# 在 Windows 7 x64 中更改主音量](https://stackoverflow.com/questions/2986007/mute-unmute-change-master-volume-in-windows-7-x64-with-c-sharp)

2.  [http://www.geekpedia.com/tutorial176_Get-and-set-the-wave-sound-volume.html](http://www.geekpedia.com/tutorial176_Get-and-set-the-wave-sound-volume.html)

    最终代码应该是这样的（它使用 NAudio 框架）

    ```
     static class NativeMethods
        {

             [DllImport("winmm.dll", EntryPoint = "waveOutSetVolume")]
            public static extern int WaveOutSetVolume(IntPtr hwo, uint dwVolume);

            [DllImport("winmm.dll", SetLastError = true)]
            public static extern bool PlaySound(string pszSound, IntPtr hmod, uint fdwSound);
        }

        public static class MSWindowsFriendlyNames
        {
            public static string WindowsXP { get { return "Windows XP"; } }
            public static string WindowsVista { get { return "Windows Vista"; } }
            public static string Windows7 { get { return "Windows 7"; } }
            public static string Windows8 { get { return "Windows 8"; } }
        }

        public static class SistemVolumChanger
        {
            public static void SetVolume(int value)
            {
                if (value < 0) 
                    value = 0;

                if (value > 100)
                    value = 100;

                var osFriendlyName = GetOSFriendlyName();

                if (osFriendlyName.Contains(MSWindowsFriendlyNames.WindowsXP))
                {
                    SetVolumeForWIndowsXP(value);
                }
                else if (osFriendlyName.Contains(MSWindowsFriendlyNames.WindowsVista) || osFriendlyName.Contains(MSWindowsFriendlyNames.Windows7) || osFriendlyName.Contains(MSWindowsFriendlyNames.Windows8))
                {
                    SetVolumeForWIndowsVista78(value);
                }
                else
                {
                    SetVolumeForWIndowsVista78(value);
                }
            }

            public static int GetVolume()
            {
                int result = 100;
                try
                {
                    MMDeviceEnumerator DevEnum = new MMDeviceEnumerator();
                    MMDevice device = DevEnum.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);
                    result = (int)(device.AudioEndpointVolume.MasterVolumeLevelScalar * 100);
                }
                catch (Exception)
                { 
                }

                return result;
            }

            private static void SetVolumeForWIndowsVista78(int value)
            {
                try
                {
                    MMDeviceEnumerator DevEnum = new MMDeviceEnumerator();
                    MMDevice device = DevEnum.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);

                    device.AudioEndpointVolume.MasterVolumeLevelScalar = (float)value / 100.0f;
                }
                catch (Exception)
                {            
                }          
            }

            private static void SetVolumeForWIndowsXP(int value)
            {
                try
                {
                    // Calculate the volume that's being set
                    double newVolume = ushort.MaxValue * value / 10.0;

                    uint v = ((uint)newVolume) & 0xffff;
                    uint vAll = v | (v << 16);

                    // Set the volume
                    int retVal = NativeMethods.WaveOutSetVolume(IntPtr.Zero, vAll);
                }
                catch (Exception)
                { 
                }          
            }

            private static string GetOSFriendlyName()
            {
                string result = string.Empty;
                ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT Caption FROM Win32_OperatingSystem");
                foreach (ManagementObject os in searcher.Get())
                {
                    result = os["Caption"].ToString();
                    break;
                }
                return result;
            }
        } 
    ```

***更新#1。2015 年*** 基本上它使用 NAudio 框架。**所以现在 NAudio**的一些方法和属性有其他的名字。

例如

> eDataFlow.eRender 现在是 DataFlow.Render

和

> eRole.eMultimedia 是 Role.Multimedia

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T11:28:34.940

对于 Windows 7+：

接受的答案存在一些问题。因为 codeproject 页面已被删除，所以它现在没有上下文。

1.  您需要从 Nuget 获取 NAudio

2.  用第二个代替第一个

    MMDevice 设备 = DevEnum.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);

    MMDevice device = DevEnum.GetDefaultAudioEndpoint((DataFlow)0, (Role)1);

如果您在尝试使用接受的答案代码修复错误时迷失了方向，请快速提醒一下。

# opengl - 什么是 OpenGL 中的阴影采样器以及它们的可能用途？

> ID：15250380
> 
> 赞同：15
> 
> 时间：2013-03-06T14:46:55.910
> 
> 标签：opengl, opengl-es, glsl, shadow

我一直在使用[这个 ES 扩展](http://www.khronos.org/registry/gles/extensions/EXT/EXT_shadow_samplers.txt)，但我仍然不太了解这些阴影采样器是什么以及可以将它们用于什么。谷歌搜索并没有真正让我得到任何好的、可读的结果，所以我在这里发帖。

我正在寻找可以帮助我真正了解这些功能的东西。这可以是现实生活中的用例，也可以是仅仅显示这些与普通采样器有何不同的东西。我的意思是，好的，它们存储深度数据。但是这些数据是如何产生的呢？它只是由绑定到深度附件的纹理制成吗？

此外，我的问题适用于 DT（桌面）GL 和 ES，也可能适用于 WebGL；我并不真正关心确切的调用或枚举，因为它们很容易在规范中找到。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-06T17:44:07.043

“[阴影采样器”](http://www.opengl.org/wiki/Sampler_%28GLSL%29#Shadow_samplers)是用于[深度比较纹理](http://www.opengl.org/wiki/Sampler_Object#Comparison_mode)的采样器。通常，如果您访问深度纹理，则会在该纹理坐标处获得（过滤的）深度值。但是，使用深度比较模式，您所做的是不同的操作。

对于从纹理中提取的每个样本，您将深度与给定值进行比较。如果比较通过，则提取的样本实际上是 1.0。如果比较失败，则为 0.0。*然后在比较之后*对样本进行过滤。所以如果我在做线性过滤，一半的样本通过比较，一半没有，我得到的值为 0.5。

为此，您必须在正在使用的采样器对象/纹理对​​象上激活深度比较，但您*还*必须在着色器中使用阴影采样器。原因是纹理访问函数现在需要一个额外的值：用于比较纹理访问的值。

这主要用于[阴影贴图](http://en.wikipedia.org/wiki/Shadow_mapping)，因此得名。阴影贴图存储从灯光到最近表面的深度。因此，您将其与从灯光到正在渲染的表面的深度进行比较。如果要渲染的表面比阴影贴图中的表面更接近灯光，那么您会从阴影采样器中获得 1.0。如果表面离光源较远，则为 0.0。在任何一种情况下，您都将值乘以灯光颜色，然后照常对该灯光进行所有照明计算。

在采样之前进行比较的原因是所谓的“百分比更接近过滤”。在深度值之间进行过滤不会产生合理的结果；这不是你想要的。您想先进行比较，然后过滤比较的布尔结果。然后你得到的是深度纹理中有多少样本通过了比较的测量。这会在阴影边缘提供更好的效果。

# php - PHP date() 产生具有相同时间戳的不同结果

> ID：15250383
> 
> 赞同：0
> 
> 时间：2013-03-06T14:47:03.443
> 
> 标签：php, date, timestamp

我正在尝试调试我在两台服务器之间遇到的 php 日期问题。我正在通过两台服务器上的 date() 函数传递时间戳，但我得到了 2 个不同的日期。

服务器 1：

```
date('d-m-Y', 575766000);
// Outputs 30-03-1988 00:00:00 
```

服务器 2：

```
date('d-m-Y', 575766000);
// Outputs 31-03-1988 00:00:00 
```

我已经使用“date”命令检查了两台服务器上的日期，它们都设置为：

```
Wed Mar  6 14:42:19 GMT 2013 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:54:53.633

您可以通过登录服务器并查看 /etc/php.ini 来检查时区，具体取决于您的 PHP 配置方式。

date.timezone="美国/New_York"

从 PHP 5.3 开始，您需要设置时区。以前这可以留空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:49:55.603

您必须更正服务器的时间。

PHP 从服务器上花费时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:53:53.717

如果您尝试使用以下方法设置时区：

```
date_default_timezone_set("America/Chicago"); 
```

然后它应该工作

# java - 枚举是Java中的一种类型

> ID：15250389
> 
> 赞同：0
> 
> 时间：2013-03-06T14:47:29.983
> 
> 标签：java

我终于有理由`enum`在 Java 中实现 an 并发现它在 1.6 中是无效类型。所以我将枚举声明为

```
public enum MyEnum = {A=0, B=1, C=3}; 
```

并在 Eclipse 中获取错误无效类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:49:12.037

这不是它们的使用方式。[请参阅http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)中的示例，例如

```
public enum Day {
    SUNDAY, MONDAY, TUESDAY, WEDNESDAY,
    THURSDAY, FRIDAY, SATURDAY 
} 
```

Java 枚举比 C# 中的枚举要强大得多。它们（几乎）是成熟的对象，因此不能仅用数字表示。然而，它们可以包含一个数字，并且它们确实有一个[序数值](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html#ordinal%28%29)。

你可以有数字值

```
public enum MyEnum {
    A(0), B(1), C(3);

    private final int number;
    MyEnum(int number) {
      this.number = number;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:48:41.590

Java`enums`与 C 和 C++ 完全不同`enums`。最大的区别是`enum`常量是成熟的对象而不是编译时整数常量。

在您的示例中`A`，`B`和`C`是对象。因此`A=0, B=1, C=3`，不允许使用类似的构造。

我建议看一下[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。

如果您*必须*将数值与`enum`常量相关联，则可以实现类似的效果，如下所示：

```
public enum MyEnum {
    A(0), B(1), C(3);
    public final int val;
    private MyEnum(int val) {
        this.val = val;
    }
} 
```

完成此操作后，您可以使用`MyEnum.A.val`etc访问这些值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T14:50:01.087

在 Java 中，`enum`是一种类型，但它与整数不兼容。枚举对象更接近类而不是基元，因为它们可以有方法、成员变量等。

Java 允许您通过将`int`成员添加到枚举中来获得所需的效果，并为不同的枚举成员进行不同的初始化，如下所示：

```
public enum MyEnum {
    A(1), B(2), C(3);
    int val;
    private MyEnum (int v) {
        val = v;
    }
    public int value() {
        return val;
    }
}; 
```

现在，您的每个成员`enum`都有一个公共方法，该方法`value()`返回与枚举的相应元素关联的整数值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T14:51:58.933

你不能这样做。`enum`在java中定义如下

```
enum myenum{a,b,c,d} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:49:57.607

```
public enum ModuleType {A,B,C} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T14:58:06.740

回答你的问题：`enum`从技术上讲不是一种类型。因此，您无法`enum`像尝试的那样定义类型的变量。

`enum`是定义枚举（缩写为 enum）类型的关键字，它是一种特殊的数据类型。一旦定义了枚举类型（非常类似于定义类的方式），您就可以使用枚举类型的名称来引用它。请检查[枚举类型文档](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。

# java - 如何在开发过程中将对象保留在内存中

> ID：15250392
> 
> 赞同：2
> 
> 时间：2013-03-06T14:47:36.913
> 
> 标签：java, jvm

我的程序具有以下结构：

```
void main (String[] args) {
   Object largeObject = longInitialization();
   interestingLogic(largeObject);
} 
```

longInitialization 代码在开发过程中永远不会改变。但是，每当我更改了有趣的逻辑时，我都必须再次运行程序并等待 longInitialization 完成。

不幸的是，我无法序列化 largeObject，因为它不可序列化并且我没有代码。

有什么技巧可以节省初始化时间吗？也许，在初始化之后以某种方式保存 JVM 的状态，然后总是从那个状态开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:54:40.790

您可以对代码进行少量修改：

```
main(){
    Object largeObject = longInitialization();
    boolean debug = true;
    while(debug){
        interestingLogic(largeObject);
    }
} 
```

现在以调试模式运行程序。在调用时设置断点`interestingLogic`并在 IDE 中使用代码热插拔调试模式。在 Ecipe 中阅读有关热插拔的更多信息：[Java Hotswap with Eclipses and Remote Debugging on Local Machine](https://stackoverflow.com/questions/5476317/java-hotswap-with-eclipses-and-remote-debugging-on-local-machine)

//编辑：

另一种选择。只写模拟`largeObject`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:04:38.520

您将需要一个新对象来调用interestingLogic(largeObject)。您可以在驱动程序等待用户输入时更改新对象。

```
void main (String[] args) {
Object largeObject = longInitialization();

 boolean anotherTry = true;
 String answer = "";
 Scanner input = new Scanner(System.in);
 while (anotherTry) {
        Object newobject = NewObject();
        newobject.interestingLogic(largeObject).
        System.out.print("Run Again Y/N");
        answer = input.nextLine();
        if (answer.equalsIgnoreCase("N")) {
            anotherTry = false;
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:57:46.703

如果不立即需要大对象，您可以使用“延迟初始化”包装器来装饰它，并在您想要访问它之前调用“longInitialization”。

第二种解决方案可能是通过将其编组/解组到 xml 文件来“克隆”它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:05:42.203

因为您说“...无法序列化 largeObject...”，所以无法在 JVM 生命周期内持久保存对象（因为您没有源代码）。但是，您有初始化/使用 largeOject 的代码。创建一个可序列化的 debugLargeObject，其行为类似于真正的 largeObject，并在开发过程中使用 debugLargeObject。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T22:07:30.957

不是没有很多工作。您需要一个小的重构，如 Guido 所示，然后您需要每次通过循环（或其他）重新加载 NewObject 类。换句话说，您的 VM 需要能够在每次更改代码时删除 NewObject 类，然后重新加载它。

有一些商业产品可以做到这一点（例如，参见 JRebel）。您可以自己滚动（请参阅此 StackOverflow 主题：[Unloading classes in java?](https://stackoverflow.com/questions/148681/unloading-classes-in-java)）。如果您对有趣的逻辑非常小心，您可以进行热插拔。但最终，你需要以某种方式换掉那个类。

# unix - 尽管删除文件，会话目录仍在增长

> ID：15250393
> 
> 赞同：2
> 
> 时间：2013-03-06T14:47:41.073
> 
> 标签：unix, ls, rm

我的一台服务器显然有一个错误的会话垃圾收集例程。结果是会话目录包含数百万个文件。删除这些将需要数周时间，但似乎会话文件夹的增长速度快于文件的删除速度。

我正在分批删除 50000 个文件，这看起来非常有效 - 大约需要 5 分钟。

> ls -U -1 | 头-n 50000 | xargs rm -f

尽管如此，当我做一个目录列表（ls -l）时，会话目录似乎在不断增长。

> drwx-wx-wt 2 root root 843493376 3 月 6 日 15:36 会话
> 
> drwx-wx-wt 2 root root 843530240 3 月 6 日 15:41 会话

所以我的问题是：目录实际上是在增长（尽管在同一时间跨度内从中删除了 50000 个文件）还是 ls 命令从另一个源输出数据？

**更新**

正如评论中所建议的那样，我移动了无法控制的会话目录。有了一个新的空会话目录和对会话清理脚本的一些更改，现在看起来它工作得很好。

删除旧的会话目录仍然是一项任务，因为我不知道目录中有多少文件，所以很难说它什么时候会是空的。

我意识到删除大量文件会影响服务器的性能，因此我减小了批处理大小并为它编写了一个小脚本。

```
#!/bin/bash

cleanSession(){
    nice -n 19 ls /var/lib/php/session_old -U -1 | head -n 1000 | xargs -I '{}' rm -f /var/lib/php/session_old/'{}'
    sleep 1
    cleanSession
}

cleanSession 
```

运行此命令会清空 1000 个文件批次中的目录。使用“df .”，它看起来工作缓慢。

> 文件系统 1K-blocks Used 可用 Use% Mounted on
> 
> /dev/sda3 236764896 47035860 177702004 21% /

...

> /dev/sda3 236764896 47019528 177718336 21% /

尽管如此，当我列出会话文件夹时，旧会话目录的文件夹大小没有区别。就好像文件夹大小只扩展到最大值。

由于看起来情况已经解决，答案不太重要，但出于好奇，我想知道文件夹大小是如何计算的，以及为什么它没有减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:37:14.813

您可以使用“rm -rf dirName”来删除该目录中的所有文件，但这会对您已经注意到的性能产生影响。

因此，一旦您的目录为空，只需将其删除。它使用的空间将被回收。

您应该了解目录只是一个特殊文件。随着您添加文件，它会增长，如果您删除一些文件，它们的位置将被标记为空并使用我新添加的文件，直到没有更多的空点。所以现在你所做的就是将所有这些数百万个点标记为“空”。在您删除目录之前，它们永远不会被删除。一旦目录为空，它对性能的影响很小。没有比删除单个大文件更大的影响。

# asp.net - ASP.NET MVC 如何在发布的文件流完全上传之前开始读取它？

> ID：15250394
> 
> 赞同：4
> 
> 时间：2013-03-06T14:47:41.370
> 
> 标签：asp.net, asp.net-mvc

我有一个通过 HttpPostedFileBase 接收文件的 ASP.NET MVC 操作。

我想尽快开始从流中读取。这样我就可以报告上传进度（通过单独的机制）。我遇到的问题是，在上传的文件全部可用之前，我在此操作中的断点不会被命中。

如何在完全上传之前阅读发布的文件流？

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase uploadFile)
{
    ... uploadFile has been fully uploaded before this point
} 
```

编辑：更新 - 我现在尝试了另一种方式，通过 HttpHandler 实现这个逻辑，但是，当我开始从流中读取时，代码会阻塞，直到文件流完成上传到服务器。

还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:09:05.353

问题是在 HttpContext.Request 对象上使用多个属性会导致 ASP.NET 等到处理完完整的发布数据。绕过这个问题的关键是 HttpContext.Request.GetBufferlessInputStream()。然而，这需要处理，并且没有内置的方法可以做到这一点。

最后的解决方案是创建可以解析原始帖子数据中的多部分内容的类，我通过查看它在 ASP.NETs HttpContext.Request 代码中的完成方式来实现这一点。我在 System.Web 中找到了各种组件，并且能够适应我的需求。

代码现在构成了我在这里编写的项目的一部分：

[https://journals.appsoftware.com/public/20/97/3819/programming-blog/development/asp.net-file-uploader-with-signalr-progress-bar-and-extended-input-stream-processing](https://journals.appsoftware.com/public/20/97/3819/programming-blog/development/asp.net-file-uploader-with-signalr-progress-bar-and-extended-input-stream-processing)

# python - Flask 应用程序日志文件未在 Apache 部署下编写

> ID：15250396
> 
> 赞同：2
> 
> 时间：2013-03-06T14:47:44.023
> 
> 标签：python, apache, logging, flask, mod-wsgi

我在 Windows 上的 Apache 2.2 实例上部署了一个 Flask 应用程序，一切运行良好。

然后我决定在我的应用程序中实现日志记录并阅读[Flask 文档](http://flask.pocoo.org/docs/errorhandling)：我决定使用文件记录器，它会生成一个日志文件，其中包含我期望的所有日志消息......当我使用内置 Flask 执行应用程序时会发生这种情况网络服务器。以下是相关代码：

```
if __name__ == '__main__':
    #Create a rotating logfile for the application
    handler = RotatingFileHandler('myapp.log', maxBytes=10000, backupCount=1)
    handler.setLevel(logging.INFO)
    handler.setFormatter(Formatter('[%(levelname)s][%(asctime)s] %(message)s'))
    app.logger.setLevel(logging.INFO)
    app.logger.addHandler(handler)
    #Run the app
    app.run(host='0.0.0.0', port=5000) 
```

但是当我将应用程序部署到 Apache 时，我的应用程序不会创建/写入该日志文件。日志消息甚至没有写在标准的 Apache 日志文件中，正如人们所预料的那样，因为 Apache 对我的日志框架一无所知。

有没有办法强制我的应用程序在通过 Apache 执行时也创建日志文件？让 Apache 将我的应用程序日志写入通过其配置确定的另一个文件也是可以接受的。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:07:53.430

里面有完整的日志设置代码`if __name__ == '__main__'`，只有在你使用 Flask 的开发服务器时才会运行。在您的 Apache 服务器上显然不是这种情况。简短的回答是：

**将整个日志记录代码移到 if 条件之前，你应该没问题。**

* * *

您还可以将代码放在`else`if 块之后的块中，以在开发时禁用日志记录（因为无论如何您都在使用调试模式）。但实际上我会将特定于服务器的东西放在不属于应用程序的特定于服务器的文件中。

所以你有一个生产“启动器”：

```
from myapp import app

# logging stuff
# app.logger.setHandler(...)

# more configuration

# do some stuff for apache (?) 
```

还有一个调试“启动器”：

```
from myapp import app
app.run(debug=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:01:39.973

由于您正在运行 Windows：

哪个用户帐户运行 Apache 服务？默认是系统。此帐户在访问网络资源方面受到限制。您的 Flask 应用程序是否位于共享网络驱动器上？

您是否尝试设置日志文件的完整路径？

如果这没有帮助，您可以发布应用程序的 Apache 配置吗？

**编辑：** 我刚刚看到您在`__name__ == '__main__'`如果我没记错的话下配置日志记录，当应用程序使用 mod_wsgi 部署时，此代码**不会执行。**在这种情况下，您必须在其他地方配置您的日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:43:31.010

确保运行 apache 进程的用户对您尝试写入的文件夹具有权限。另外，我会检查以下结果：

```
sudo find / -name myapp.log 
```

# php - National Student ClearingHouse SOAP Web 服务实施

> ID：15250397
> 
> 赞同：0
> 
> 时间：2013-03-06T14:47:44.757
> 
> 标签：php, xml, web-services, soap-client

我正在开展一个项目，该项目需要使用他们的 API 向 National Student ClearingHouse 验证注册成员。我一直在互联网上到处寻找一些描述如何查询方法或示例的片段，但到目前为止还没有运气。文档在 php 中实现也非常有限，而且我从未在 SOAP 上工作过，所以这对我来说更加复杂。

**文档链接：** [https ://docs.google.com/file/d/1kZvEeobFNq3kbhZKJnagkVhcWhKHHwL5dwckbJLTB4dhNpMSF7cjAVOp9cne/edit?usp=sharing](https://docs.google.com/file/d/1kZvEeobFNq3kbhZKJnagkVhcWhKHHwL5dwckbJLTB4dhNpMSF7cjAVOp9cne/edit?usp=sharing)

不知何故，我设法从这里开始是代码：

```
$soap_url = 'https://xml.studentclearinghouse.org/ws/wsdl/HRXMLVerify.wsdl';

$client = new SoapClient($soap_url, array(
            'SOAP-ENV' => 'http://schemas.xmlsoap.org/soap/envelope/',
            'SOAPENC'  => 'http://schemas.xmlsoap.org/soap/encoding/',
            'xsi'      => 'http://www.w3.org/2001/XMLSchemainstance',
            'xsd'      => 'http://www.w3.org/2001/XMLSchema'
    ));

$data = array(
        'BackgroundCheck' => array(
                'account' => 'xxxx',
                'userid'  => 'xxxxx',
                'password' =>  'xxxxx'
            ),

        'BackgroundSearchPackage' => array()

    );
echo '<pre>';
print_r($client->__soapCall('verifyHRXML', $data)); 
```

**哪个输出：**

```
 SoapFault Object
(
    [message:protected] => SOAP-ERROR: Encoding: object has no 'BackgroundSearchPackage' property
    [string:Exception:private] => 
    [code:protected] => 0
    [file:protected] => /Applications/MAMP/htdocs/nch/index.php
    [line:protected] => 39
    [trace:Exception:private] => Array
        (
            [0] => Array
                (
                    [file] => /Applications/MAMP/htdocs/nch/index.php
                    [line] => 39
                    [function] => __soapCall
                    [class] => SoapClient
                    [type] => ->
                    [args] => Array
                        (
                            [0] => verifyHRXML
                            [1] => Array
                                (
                                    [BackgroundCheck] => Array
                                        (
                                            [account] => xxxxxx
                                            [userid] => xxxxx
                                            [password] => xxxxxx
                                        )

                                    [BackgroundSearchPackage] => Array
                                        (
                                        )

                                )

                        )

                )

        )

    [previous:Exception:private] => 
    [faultstring] => SOAP-ERROR: Encoding: object has no 'BackgroundSearchPackage' property
    [faultcode] => Client
    [faultcodens] => http://schemas.xmlsoap.org/soap/envelope/
) 
```

非常糟糕地卡住了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:55:19.787

错误声明为：“对象没有'BackgroundSearchPackage'属性”，基本上你的soap调用不符合wsdl的要求。我将在下面粘贴这些。这个特定的调用需要节点内容和属性。请参阅此处的 php 文档中的第一条评论以了解它是如何完成的：http: [//php.net/manual/en/soapclient.soapcall.php](http://php.net/manual/en/soapclient.soapcall.php)

话虽如此，您可以尝试使用您的数据拨打电话：

```
$data = array(
    'BackgroundCheck' => array(
            '_' => array(
                'BackgroundSearchPackage' => array()
                ),
            'account' => 'xxxx',
            'userid'  => 'xxxxx',
            'password' =>  'xxxxx'
        )
); 
```

注意：使用soap，所有可用的操作及其输入和返回值的描述都在wsdl.xml 中描述。您提供了网址：[https](https://xml.studentclearinghouse.org/ws/wsdl/HRXMLVerify.wsdl) ://xml.studentclearinghouse.org/ws/wsdl/HRXMLVerify.wsdl 。我将在您的案例的相关信息下方粘贴：

```
<message name="HRXMLVerifySoapIn">
    <part name="parameters" element="s0:BackgroundCheck"/>
</message>
<message name="HRXMLVerifySoapOut">
    <part name="parameters" element="s0:BackgroundReports"/>
</message>
<portType name="HRXMLVerifySoapPort">
    <operation name="verifyHRXML">
        <documentation>Display the detail results of verification.</documentation>
        <input message="intf:HRXMLVerifySoapIn"/>
        <output message="intf:HRXMLVerifySoapOut"/>
    </operation>
</portType> 
```

BackgroundCheck的描述

```
<xsd:element name="BackgroundCheck" type="BackgroundCheckType" >
    <xsd:annotation>
    <xsd:documentation>Parent Element for  specifying Search Subject specfic data for Standalone Searches.</xsd:documentation>
    </xsd:annotation>
</xsd:element> 
```

BackgroundCheckType 的描述（参考 wsdl 的第 3195 行）。BackgroundCheckType*包含*一个元素“BackgroundSearchPackage”。

```
<xsd:complexType name="BackgroundCheckType" >
    <xsd:sequence>
        <xsd:element name="ReferenceId" type="EntityIdType" minOccurs="0">
            <xsd:annotation>
                <xsd:documentation>Reference Number associated with all searches within the XML Document.</xsd:documentation>
            </xsd:annotation>
        </xsd:element>
        <xsd:element name="BackgroundSearchPackage" maxOccurs="unbounded">
            <xsd:annotation>
                <xsd:documentation>Root element containing all screening related information for a single Search Subject.</xsd:documentation>
            </xsd:annotation>
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:sequence>
                        <xsd:element name="ReferenceId" type="EntityIdType" minOccurs="0">
                            <xsd:annotation>
                                <xsd:documentation>Reference Number associated with all searches within the specified package.</xsd:documentation>
                            </xsd:annotation>
                        </xsd:element>
                        <xsd:element name="ClientContact" type="ReferralType" minOccurs="0">
                            <xsd:annotation>
                                <xsd:documentation>Contact point within clients organization regarding details of screening package.<   /xsd:documentation> 
                            </xsd:annotation>
                        </xsd:element>
                        <xsd:element name="Organization" type="ReferralType" minOccurs="0" maxOccurs="unbounded">
                            <xsd:annotation>
                                <xsd:documentation>Identifies the organization that  the search(s) will be performed upon or on behalf of depending on the value of type.</xsd:documentation>
                            </xsd:annotation>
                        </xsd:element>
                        <xsd:element name="PersonalData" type="ScreeningPersonalDataType" minOccurs="0" maxOccurs="unbounded">
                            <xsd:annotation>
                                <xsd:documentation>Personal data related to the Search Subject that the search(s) will be performed upon.</xsd:documentation>
                            </xsd:annotation>
                        </xsd:element>
                        <xsd:element name="Screenings" type="ScreeningRequestType" minOccurs="0" maxOccurs="unbounded"></xsd:element>
                    </xsd:sequence>
                </xsd:sequence>
                <xsd:attribute name="type" type="xsd:string" use="optional"></xsd:attribute>
                <xsd:attribute name="action" type="xsd:string" use="optional"></xsd:attribute>
            </xsd:complexType>
        </xsd:element>
        <xsd:element ref="UserArea" minOccurs="0"></xsd:element>
    </xsd:sequence>
    <xsd:attribute name="userId" type="xsd:string" use="required">
        <xsd:annotation>
            <xsd:documentation>Client identification.  This will be provided to the client by the organization performing the screenings.</xsd:documentation>
        </xsd:annotation>
    </xsd:attribute>
    <xsd:attribute name="password" type="xsd:string" use="optional"></xsd:attribute>
    <xsd:attribute name="account" type="xsd:string" use="optional"></xsd:attribute>
    <xsd:attribute name="location" type="xsd:string" use="optional"></xsd:attribute>
    <xsd:attribute name="version" type="xsd:string" use="optional" default="2_0"></xsd:attribute>
    <xsd:attribute ref="xml:lang" use="optional"></xsd:attribute>
</xsd:complexType> 
```

# complexity-theory - 冒泡排序最坏情况、最佳情况和平均情况复杂度

> ID：15250400
> 
> 赞同：0
> 
> 时间：2013-03-06T14:47:52.330
> 
> 标签：complexity-theory, time-complexity, bubble-sort

以下进行冒泡排序的函数的 (a) 最坏情况、(b) 最佳情况和 (c) 平均情况复杂度是多少

```
for i=1 to n-1 do
    for j=i to n-1 do
        if x[j]>x[j+1] then
            temp=x[j]
            x[j]=x[j+1]
            x[j+1]=temp
        end {if}
    end {for}
end {for} 
```

你会如何证明复杂性的合理性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:53:40.883

最坏的情况是 O(n ² )。

平均情况也是 O(n ² )。

最坏的情况也是 O(n ² )，即使 if 语句中的代码在这种情况下不会被执行。二次复杂度是因为无论列表的内容如何，​​两个 for 循环都将在所有三种情况下完全执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T20:28:54.190

下面的 BubbleSort 算法也是如此，因为 while 也是 O(n)。

```
public static void BubbleSort( int [ ] num )
    {
        int j;
        boolean flag = true;  
        int temp;  

        while ( flag )
        {

            flag= false;   
            for( j=0;  j < num.length -1;  j++ )
            {
                if ( num[ j ] > num[j+1] )   
                {
                    temp = num[ j ];                //swap elements
                    num[ j ] = num[ j+1 ];
                    num[ j+1 ] = temp;
                    flag = true;              //shows a swap occurred
                }
            }

        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T06:59:50.157

如果您想要一个冒泡排序算法，它会在最佳、最坏和平均情况下的效率发生巨大变化，试试这个：

```
int count = n - 1;    // The input size
bool sFlag = true;    // A flag variable allowing the inner outerloop to 
                         break early and fall through

while (sFlag ){

    sFlag = false;    // Set false so that the loop can break if no swaps occur
    for (int j = 0; j < count; j++){
        if (A[j+1] < A[j]){

            int temp;    // Swap the two elements
            temp = A[j];
            A[j] = A[j+1];
            A[j+1] = temp;

            sFlag = true;    // A swap has occured, iterate again
        }
    }
    count--;    //Next time, don't bother looking at the last element, it is 
                  in order

} 
```

最坏的情况是 Cworst(n) = 1/2n(n+1)，最好的情况是 Cbest(n) = n-1。这是因为 count 变量根据相对于输入大小已经完成的迭代量减少了内部循环的迭代次数。

这是迄今为止我遇到的最有效的冒泡排序。

# scala - 如何将 Anorm 中 executeInsert 返回的 Any 转换为 Long

> ID：15250402
> 
> 赞同：2
> 
> 时间：2013-03-06T14:47:56.373
> 
> 标签：scala, playframework-2.1, anorm

在我的 Scala Playframework 应用程序中，我试图`executeInsert`创建一个 sms_token(class)。然后使用主键创建一个唯一令牌，将其添加到 sms_token 并使用`executeUpdate`.

```
case class SmsToken(id: Option[Long], token: String, phoneNumber: String, startDate: Option[Date], endDate: Option[Date], used: Boolean, tempReviewGrade: Option[Int], tempReviewText: Option[String])

object SmsToken {
  val simple = {
    get[Option[Long]]("id") ~
      get[String]("token") ~
      get[String]("phone_number") ~
      get[Option[Date]]("start_date") ~
      get[Option[Date]]("end_date") ~
      get[Boolean]("used") ~
      get[Option[Int]]("temp_review_grade") ~
      get[Option[String]]("temp_review_text") map {
      case id ~ token ~ phone_number ~ start_date ~ end_date ~ used ~ temp_review_grade ~ temp_review_text => SmsToken(id, token, phone_number, start_date, end_date, used, temp_review_grade, temp_review_text)
    }
  }
} 
```

方法：

```
 def createToken(n: String): Option[Long] = {

    var addedTokenPk = 0L

    val result = DB.withConnection {
      implicit connection =>
        SQL("insert into sms_token(token, phone_number, start_date, end_date, used, temp_review_grade, temp_review_text) values({token},{phone_number},{start_date},{end_date},{used}, {temp_review_grade}, {temp_review_text})").on(
          'token -> "",
          'phone_number -> n,
          'start_date -> new Date(),
          'end_date -> new Date(),
          'used -> 0,
          'temp_review_grade -> 0,
          'temp_review_text -> ""
        ).executeInsert()
    }
    result match {
      case Some(pk) => {
        addedTokenPk = pk.asInstanceOf[Long]
      }
      case None => println("YAAARRRRR")
    }

    if (addedTokenPk != 0L) {

      val token = Util.createUniqueToken(addedTokenPk)

      DB.withConnection {
        implicit connection =>
          SQL("update sms_token s set s.token={token} where s.id={id}").on(
            'id -> ("" + addedTokenPk).toLong,
            'token -> token
          ).executeUpdate()
      }
      return Some(addedTokenPk)
    }
    None
  } 
```

我的问题是关于这部分：

```
result match {
    case Some(pk) => {
        addedTokenPk = pk.asInstanceOf[Long]
    }
    case None => println("YAAARRRRR")
} 
```

executeInsert 返回一个 Any 对象，因为密钥是 Long 我正在做，`asInstanceOf[Long]` 因为我稍后在更新部分需要它。我是 Scala 菜鸟，所以我不确定这是否正确。也许有更好的 Scala 方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:53:16.603

如果您`map`在`executeInsert`结果上调用，您将获得 Long id

```
DB.withConnection { implicit connection =>
   SQL("...").executeInsert().map(id => println(id))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-20T05:17:46.620

另一种方法是将`simple`解析器传递给 executeInsert：

```
val result: SmsToken = DB.withConnection {
  implicit connection =>
    SQL("insert into sms_token(token, phone_number, start_date, end_date, used, temp_review_grade, temp_review_text) values({token},{phone_number},{start_date},{end_date},{used}, {temp_review_grade}, {temp_review_text})").on(
      'token -> "",
      'phone_number -> n,
      'start_date -> new Date(),
      'end_date -> new Date(),
      'used -> 0,
      'temp_review_grade -> 0,
      'temp_review_text -> ""
    ).executeInsert(simple.single)
} 
```

这通常允许您一次性完成上述操作，在这种情况下，您将有权访问 pk 和允许您`result`在数据库查询中引用属性的令牌。

*注意：我正在寻找尝试并做到这一点并偶然发现了这个问题。*

# scripting - 批处理帮助 -- 将文件移动到目录，如果文件名存在，重命名 001

> ID：15250406
> 
> 赞同：2
> 
> 时间：2013-03-06T14:48:08.720
> 
> 标签：scripting, batch-file, cmd

我有一个批处理文件，它每 10 秒检查一次根目录中的 PDF 文件，并将这些文件复制到它们对应的同名子文件夹中。

我缺少的是我需要我的批处理文件来检查命名文件的目标子目录，如果命名文件存在，重命名要复制到的新文件并在复制`!filename!001.pdf`重复`001`文件名时增加 get 。这是我得到的：

```
 :loop
    setlocal enabledelayedexpansion
    cls

    pushd c:\files\

    for /f "tokens=*" %%1 in ('dir /a-d /b c:\files\*.pdf') do (
    set filename=%%~n1&set dirname=!filename:~0,7!

    dir c:\files /b *.pdf > location1list.tmp
    for /f %%a in (location1list.tmp) do dir c:\files\%%a > location2list.tmp

    if not exist c:\files\!dirname! (md c:\files\!dirname!)
    move %%1 c:\files\!dirname!\>nul
    ) 
    timeout /t 10
    goto:loop 
```

有什么建议可以让我重命名文件吗？

即如果文件夹`Bob.pdf`中存在`Bob`并且另一个`Bob.pdf`被添加到`C:\files`文件夹中，我希望它被复制到`C:\files\bob`文件夹中作为`Bob001.pdf`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:22:20.103

像这样的东西应该做你想做的事。可能需要一些调整。我也没有测试过，只是凭记忆写的。需要任何解释，只是问。

**脚本**

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion
pushd C:\files

:Main
for /f "tokens=*" %%A in ('dir /a-d /b *.pdf') do (
    if not exist "%%~dpnA\*" md "%%~nA"
    set "File=%%~dpnA\%%~nxA"
    if exist "!File!" call :Name "!File!" File
    echo !File!
    move "%%~fA" "!File!"
)
goto Wait

:Name <Target> <Variable>
set "Count=0"
:Count
set /a "Count+=1"
set "Number=00%Count%"
if exist "%~dpn1%Number:~-3%%~x1" goto Count
set "%~2=%~dpn1%Number:~-3%%~x1"
goto :eof

:Wait
timeout /t 10
goto Main

:End
popd
endlocal 
```

**限制**

1.  每个目标子目录在写入时最多只能处理 1000 个文件。如果子目录达到此最大值，则脚本将陷入无限循环。

**更新**

修复了我的初始脚本中的一个错误

# vb.net - vb.net 选择随机文件夹名称

> ID：15250407
> 
> 赞同：-2
> 
> 时间：2013-03-06T14:48:08.920
> 
> 标签：vb.net, random, directory

任何人都知道如何使用 vb.net 选择现有的随机目录名称（C:\ 驱动器）并将其位置存储在变量中。

我不得不谷歌这个，但似乎只能找到与文件相关的示例，而不是文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:01:29.543

试试这个，希望这能满足你的要求，

```
'----------------- Global Variables
Dim xCnter = 0
Dim xRndNo = 0
Dim xSubdirectory As String

Private Sub Basement()
     Dim xGenerator As System.Random = New System.Random()
     xRndNo = xGenerator.Next(1, 100)
     AssignRndDirectory("C:\")
     msgbox(subdirectory)
End Sub

Private Sub AssignRndDirectory(xPath as string)
     For Each subdirectory In Directory.GetDirectories(xPath)
        if xCnter = xRndNo then Exit sub
        xCnter += 1
        call AssignRndDirectory(subdirectory)
     Next 
End Sub 
```

[注意：此代码未经 IDE 测试，如有错误请告诉我。]

* * *

**编辑：** `TESTED WITH IDE`

```
 Dim xCnter = 0
   Dim xRndNo = 0
   Dim xSubdirectory As String

   Private Sub Basement()

        Dim xGenerator As System.Random = New System.Random()
        xRndNo = xGenerator.Next(1, 100)
        AssignRndDirectory("C:\")
        MsgBox(xSubdirectory)

        xCnter = 0

    End Sub

    Private Sub AssignRndDirectory(ByVal xPath As String)

        Try

            For Each Subdirectory In Directory.GetDirectories(xPath)

                If xCnter = xRndNo Then Exit Sub
                xSubdirectory = Subdirectory
                xCnter += 1
                Call AssignRndDirectory(Subdirectory)

            Next

        Catch ex As Exception
            Exit Sub
        End Try

    End Sub 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-06T14:52:28.053

只需制作一个目录列表，然后从中选择一个随机项目。

```
Dim rnd As New Random()
Dim path As String = "C:\"
Dim dir = New DirectoryInfo(path)
Dim subDirs = dir.GetDirectories()
Dim randomDir = subdirs(rnd.[Next](subDirs.Length)) 
```

或者，如果您更喜欢 Linq，最后一行可以是：

```
Dim randomDirectory = subdirs.Skip(rnd.[Next](subdirs.Length)).First() 
```

# ios - iPhone 4 和 5 上的 Storyboard segue 覆盖垂直过渡

> ID：15250412
> 
> 赞同：0
> 
> 时间：2013-03-06T14:48:18.140
> 
> 标签：ios, objective-c, uiview, uistoryboard

我正在构建一个支持 iOS5+ 并且适用于 iPhone 4 和 iPhone 5 屏幕尺寸的应用程序。它目前在大部分流程中使用故事板。

当我做一个覆盖垂直的动画模态segue时，视图顶部有半英寸的空白 - 仅在 3.5 英寸的屏幕上（iPhone 4）。iPhone 5 上没有空白，因为视图完全充满了内容。

这让我很困惑，因为我正在调整 viewDidLoad 中的视图大小以匹配屏幕大小。我也尝试将背景颜色设置为清除，但仍然没有骰子。这是我正在做的调整它的大小：

```
[self.view height:[UIScreen mainScreen].bounds.size.height]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:20:41.127

这只是我的背景图片（视图后面的 UIImage）。我将它调整为 iPhone 5 的尺寸并固定在视图的底部。突出顶部的空白只是背景图像的顶部......我不知道为什么我认为它会神奇地被切断。

# qt - 如何获取 Qt 小部件的位置？

> ID：15250413
> 
> 赞同：2
> 
> 时间：2013-03-06T14:48:19.063
> 
> 标签：qt, animation

这是代码。

```
QPropertyAnimation *animation3 = new QPropertyAnimation (ui->modifyButton, "geometry");
animation3->setDuration(1000);
animation3->setStartValue(QRect(20, 120,  141, 20));
animation3->setStopValue(QRect(20, 70, 141, 20));
animation3->start(); 
```

我需要应用程序自动确定 modifyButton 的“Y”坐标，因为它不是固定的并且正在变化。那么我该怎么做这样的事情。

```
int  y = get_y_coordinate_somehow();

animation3->setStartValue(QRect(20, y, 141, 20));start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:50:41.400

使用`pos()`方法。

```
int y = pos().y(); 
```

# c# - 乐队和团体之间的区别

> ID：15250420
> 
> 赞同：2
> 
> 时间：2013-03-06T14:48:41.370
> 
> 标签：c#, winforms, infragistics, ultrawingrid

用于设置[UltraGrid控件的](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v12.1~Infragistics.Win.UltraWinGrid_namespace.html)[AllowColMoving](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGridOverride~AllowColMoving.html)属性的[AllowColMoving 枚举](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.AllowColMoving.html)中的 WithinBand 和 WithinGroup 有什么区别？

有没有关于这个的最佳实践/陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:29:47.477

列可以在一个带中​​分组，当您将 AllowColMoving 设置为 WithinGroup 时，它将限制最终用户，以便他们只能在单个组中移动列。

例如，如果您有街道、城市、州和邮政编码的列，您可能希望用户只能在该组中移动列。

要查看组示例，请参阅NetAdvantage 帮助中的[使用级别创建多行布局](http://help.infragistics.com/Doc/WinForms/Current/CLR4.0/?page=WinGrid_Creating_Multiple_Row_Layout_Use_Levels.html)主题。

# c# - System.Collection.Generic.IEnummerable == 字符串

> ID：15250433
> 
> 赞同：0
> 
> 时间：2013-03-06T14:49:02.400
> 
> 标签：c#

我从数据库中获取了一个用户，并且该用户有一个帐户列表。我需要检查一个帐户的名称是否等于一个字符串。所以我选择了所有帐户，然后选择了名称：

```
var accounts = user.Select(u=> u.Accounts.Select(a => a.Name)).ToList(); 
```

然后我一个接一个地检查一个名字：

```
for (int i = 0; i <= accounts.Count(); i++)
{
     if (accounts[i] == mandant)
         return true;
} 
```

但是`mandant`=的类型和=的`string`
类型`accounts[i]``System.Collections.Generic.IEnummerable<string>`

如何检查是否相等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:51:50.490

您需要`Account`先使用扁平化`SelectMany`，然后使用`Any`来检查：

```
if (users.SelectMany(u => u.Accounts).Any(a => a.Name == mandant))
{
} 
```

或使用 double`Any`来检查：

```
if (users.Any(u => u.Accounts.Any(a => a.Name == mandant)))
{
} 
```

# scala - 在 Scala 中将方法调用转换为 () => T 函数

> ID：15250437
> 
> 赞同：1
> 
> 时间：2013-03-06T14:49:09.937
> 
> 标签：scala

我有一个看起来如下的方法：

```
def myMethod[T](klazz:Class[T]):Z 
```

我想创建一个类型的 Map ，`Int => () => Z`以便在我的代码中，我可以在地图上查看以仅生成`Z`我需要的 s 。

但是，如果我执行以下操作：

```
Map( 0 -> myMethod(classOf[String]) _ , 1 -> myMethod(classOf[StringBuilder])) 
```

我怎样才能避免写作`() => myMethod(classOf[String])`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:04:45.903

为什么不简单地改变`myMethod`，让它返回一个函数呢？

```
def myMethod( clazz: Class[_]): () => Z = {
  { () => /* put the body of the old myMethod here */ }
} 
```

然后你可以这样做：

```
Map( 0 -> myMethod(classOf[String]) , 1 -> myMethod(classOf[StringBuilder])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T19:13:52.063

另一种方法是使用自定义关联器：

```
implicit class LazyMapArrow[K](val self: K) extends AnyVal {
  def ~>[V](other: => V): (K, () => V) = (self, () => other)
} 
```

# objective-c - 使用协议和委托来创建像 UITableView 这样的控件是优化的吗？

> ID：15250440
> 
> 赞同：0
> 
> 时间：2013-03-06T14:49:18.670
> 
> 标签：objective-c, uitableview, protocols

如果相关类至少采用 UITableViewDataSource，则 UITableView 可用于创建列表视图。我有以下问题：

为什么会设计成基于 section 和 row ，通过数据源方法创建控件并返回给 UITableView 实例。为什么不在 UITableView 实例中提供所有这些信息而不使用 UITableViewDataSource。会有什么不同？

**EDIT1：** @hermann 和@JOhn：你提到它打破了 MVC 模式。让我们假设我自己正在创建一个自定义 UITableView，比如控件。我设计它的方式是不将数据直接传递给 UITableView，而是传递需要在行和部分中添加的相关子视图及其相关标题。我认为这不会破坏 MVC ..我正确吗？但它仍然存在当前 UITableView 实现风格解决的问题。重用控件和图像的能力，而不是膨胀的内存使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:07:25.497

首先，这样做可以坚持 MVC 模式。UI 对象，也就是视图，永远不应该直接与模型通信，也就是业务数据。另外它不应该执行任何属于控制器的业务逻辑。

其次，它更灵活，无需继承 UITableView 对象。

第三，从性能和内存管理的角度来看，完整的概念非常有效。无需预先加载所有可能显示在表格中的数据，而是可以在“现在需要知道”的基础上及时获取或计算它或任何其他数据。此外，一旦使用委托/数据源方法提供数据，就可以释放数据容器，尤其是像图像一样消耗内存的容器。

当然，UITableView 的子类原则上也可以这样做。我只是怀疑这会导致更可维护的代码，甚至可以节省任何时间或分别工作。

如果您不想坚持使用 MVC，那么可以随意对表视图进行子类化并在其 init 方法中传递其所有数据，或者使表视图子类能够从 web 服务或数据库或任何地方加载所有数据. 当您遇到问题并返回给我们寻求指导时，请准备好接受一些讨厌的答复，例如“为什么不坚持既定的最佳实践或 MVC 模式？” 等等。

如果您的表格只显示一些相当静态的值，例如，如果它只是用作进一步导航钻取的菜单等，那么这个概念可能看起来有点荒谬。但这也不痛。当涉及到更复杂的数据提供任务时，它当然有其优势。

给它一个机会。试试看！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:07:36.963

对于 MVC，您希望尝试清楚地区分模型、控制器和视图的职责。通过允许视图（tableview）向委托请求数据，可以创建非常通用的视图。

使用委托模式，控制器可以以任何需要的方式“暂存”数据，然后在 tableView 需要时将其提供给 tableView。tableView 不关心数据来自哪里，如何转换，使用什么 ADT，什么都没有。它完全不知道数据在哪里或是什么。它只知道它应该在这个位置为这个部分和行显示这个字符串。

# html - 相对标签索引

> ID：15250441
> 
> 赞同：4
> 
> 时间：2013-03-06T14:49:22.850
> 
> 标签：html

我在导航中使用标签索引来允许用户通过标签浏览该内容。我遇到的问题是第三个和第四个（六个中的）打开一个模式。一旦该模式打开，用户必须通过导航的其余部分来切换到模式中的字段。我想让模态的表单/元素在返回导航之前捕获所有选项卡，如果不阻止它移回导航元素直到模态关闭。有没有一种简单的方法可以强制下一个选项卡在不使用 javascript 的情况下跳转到模式上的第一个字段？这看起来真的很简单，但我想我怎么会错过一些东西。

提前致谢。

```
<nav>
    <a tabindex="1" href="#">A</a>
    <a tabindex="2" href="#">A</a>
    <a tabindex="3" href="#" onclick="$('.b').show();">A</a>
    <a tabindex="4" href="#">A</a>
    <a tabindex="5" href="#">A</a>
    <a tabindex="6" href="#">A</a>
    <a tabindex="7" href="#">A</a>
</nav>

<a tabindex="3" href="#" class="b" >B</a>
<a tabindex="4" href="#" class="b" >B</a>
<a tabindex="5" href="#" class="b" >B</a>
<a tabindex="6" href="#" class="b" >B</a> 
```

这是我正在尝试做的一个小的非工作示例：http: [//jsfiddle.net/jeffpowrs/KgHtg/1/](http://jsfiddle.net/jeffpowrs/KgHtg/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T19:42:56.323

尝试这样的事情......

[http://jsfiddle.net/KgHtg/3/](http://jsfiddle.net/KgHtg/3/)

```
$(function() {
    $('#menu1').click(function() {
        $('.b').show();
        var currentIndex = $(this).attr('tabindex');
        var greater = $('nav a').filter(function() {
            return $(this).attr('tabindex') > currentIndex;
        }).each(function() {
            $(this).attr('tabindex', parseInt($(this).attr('tabindex'), 10)+4);
        });
    });
}); 
```

您可以只更新 tabindex 属性中的值。您必须使用此功能才能在子菜单打开/关闭时进行更新，但您应该了解此操作的要点。

# ios - 将 UIView 渲染为大于屏幕上的 UIImage

> ID：15250445
> 
> 赞同：2
> 
> 时间：2013-03-06T14:49:33.217
> 
> 标签：ios, uiview, uiimage, core-graphics

我想将 UIView 渲染成 UIImage。但是，我想将它渲染得比屏幕上的大得多，而不需要像素化。

目前我正在使用...

```
UIGraphicsBeginImageContextWithOptions(size, YES, 0.0);
[self.pageViewController.view.layer renderInContext:context];
renderedViewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我努力了...

```
self.pageViewController.view.transform = CGAffineTransformMakeScale(4.0f, 4.0f); 
```

这会更改视图的大小，但会在缩放视图之前呈现原始大小。

我也试过...

```
CGContextScaleCTM(UIGraphicsGetCurrentContext(), 4.0, 4.0); 
```

但这只会放大低分辨率图像，从而导致质量不佳。

设置...

```
UIView contentScaleFactor 
```

也没有帮助我将 UIView 渲染得更大。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-05T08:00:25.543

试试这个，如果设备支持视网膜，您将获得 2 倍大小的视图图像

```
 - (UIImage *)imageOfView:(UIView *)view
{

    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
        UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 0.0);
    } else {
        UIGraphicsBeginImageContext(view.bounds.size);
    }

    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
} 
```

# jquery - Jquery ON 函数仅在 ajax 加载时触发一次或两次

> ID：15250446
> 
> 赞同：1
> 
> 时间：2013-03-06T14:49:36.737
> 
> 标签：jquery, ajax, live

我觉得很奇怪，该`.on()`函数在 ajax 加载时只触发一次/两次事件。

这是一个示例代码：

```
$(document).on('click', '.cbxCheckAll', function(e) {
alert(this.checked);
$(this).parents('table').find('input.cbxDelete:checkbox').attr('checked', this.checked);
}); 
```

场景：所以基本上，我有一个包含用户列表的下拉列表。在下拉列表中选择用户后，它会立即通过 ajax 在 div 上加载所选用户的信息。然后在那个 div 上，我有多个带有“全选”选项的复选框。

单击“全选”后，它确实选择了所有复选框。再次单击，它没有选中复选框。嗯，它确实奏效了。但是当我再次点击（第三次）时，它不再起作用了。似乎它只适用于第二次点击。

您可能会注意到，我有一个`alert()`显示“全选”复选框的值。每次单击它（第 3 次、第 4 次等）时似乎都会触发，但检查/取消检查部分不是。

我最近刚刚将我的 Jquery 版本更新到最新版本（1.9）。我正在使用带有该`.live()`功能的版本（1.7）并将其更改为`.on()`因为`.live()`最新版本已被删除。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:14:01.533

`.prop()`在处理`checked` **属性**时，您必须使用最新版本的 jQuery 。

```
$(document).on('click', '.cbxCheckAll', function(e) {
    //alert(this.checked);
    console.log(this.checked);
    $(this).parents('table').find('input.cbxDelete:checkbox').prop('checked', this.checked);
}); 
```

# python - 如何用python和beautifulsoup解析html表并写入csv

> ID：15250455
> 
> 赞同：7
> 
> 时间：2013-03-06T14:50:08.840
> 
> 标签：python, beautifulsoup

我尝试解析 html 页面并获取货币值并写入 csv。我有以下代码：

```
#!/usr/bin/env python

import urllib2
from BeautifulSoup import BeautifulSoup

contenturl = "http://www.bank.gov.ua/control/en/curmetal/detail/currency?period=daily"
soup = BeautifulSoup(urllib2.urlopen(contenturl).read())

table = soup.find('div', attrs={'class': 'content'})

rows = table.findAll('tr')
for tr in rows:
    cols = tr.findAll('td')
    for td in cols:
        text = td.find(text=True) + ';'
        print text,
    print 
```

问题是，我不知道如何仅检索货币值。我尝试了一些正则表达式，例如 '^[0-9]{3}' - 从 3 位数字开始，但它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T14:59:18.207

您最好选择表格中的特定单元格。`td`具有该类的单元格`cell_c`包含您感兴趣的数据，最后一个始终是货币汇率：

```
rows = table.findAll('tr')
for tr in rows:
    cols = tr.findAll('td')
    if 'cell_c' in cols[0]['class']:
        # currency row
        digital_code, letter_code, units, name, rate = [c.text for c in cols]
        print digital_code, letter_code, units, name, rate 
```

使用单独变量中的数据，您现在可以将文本转换为十进制数字，将它们存储在数据库中，等等。

# android-ndk - 如何将 complex.h 用于 Android NDK？

> ID：15250456
> 
> 赞同：8
> 
> 时间：2013-03-06T14:50:09.597
> 
> 标签：android-ndk, cross-compiling, glibc, loadlibrary, libm

我有用 C 编写的本机源代码，我想在我的 Android 设备（Nexus 7）上运行。我已经成功地做了大量关于使用 Android NDK 在 Android 上运行本机代码的研究和在线教程。在这方面我获得了相当多的知识。但是，我的代码使用了 complex.h 中定义的标准数学库的复杂功能。然而，NDK C 库似乎不支持复杂的功能。每当我对项目进行 ndk-build 时，我都会得到：

```
fatal error: complex.h: no such file or directory. 
```

作为解决方案，我想从 arm-linux-gnueabi 获取标准数学库 (libm.a) 并将其与我的本地源链接。这是我的 Android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := StandardC
LOCAL_SRC_FILES := libc.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := mathLib
LOCAL_SRC_FILES := libm.a
LOCAL_STATIC_LIBRARIES := StandardC
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := ComplexOperations
LOCAL_SRC_FILES := libComplexOperations.a
LOCAL_STATIC_LIBRARIES := mathLib
LOCAL_C_INCLUDES += /usr/arm-linux-gnueabi/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := MySource
LOCAL_CFLAGS += -std=c99
LOCAL_SRC_FILES := com_samuel_test_ComplexOperationsLib.c
LOCAL_C_INCLUDES += /usr/arm-linux-gnueabi/include
LOCAL_STATIC_LIBRARIES := ComplexOperations
include $(BUILD_SHARED_LIBRARY) 
```

我必须链接 arm-linux-gnueabi-gcc 的 libc 以及 libm 需要它。“ComplexOperations”模块是使用带有编译器标志 -march=armv7-a 的 arm-linux-gnueabi-gcc 静态编译的。这个库使用了 complex.h。这构建没有任何错误和警告。但是当我运行应用程序并调用

```
System.loadLibrary("MySource"); 
```

我在 logcat 上收到此错误：

```
E/dalvikvm( 3932): dlopen("/data/app-lib/com.samuel.test-1/libMySource.so") failed: Cannot load library: soinfo_relocate(linker.cpp:975): cannot locate symbol ".LANCHOR2" referenced by "libMySource.so"... 
```

如果出现此错误，则会引发 UnsatisfiedLinkError 异常，如果不处理该异常会导致应用程序崩溃。

有人可以帮帮我吗！我已经尝试自己解决这个问题好几天了！！:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-16T21:50:08.577

从 Android-L(ollipop) 开始，NDK 现在提供 complex.h 标头。

[从https://developer.android.com/tools/sdk/ndk/index.html](https://developer.android.com/tools/sdk/ndk/index.html)下载最新的 NDK 修订版，complex.h 可以在`/platforms/android-L/arch-arm/usr/include`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T21:15:47.700

我在 中添加了以下行`Android.mk`，这似乎解决了问题。

```
LOCAL_C_INCLUDES += C:\Users\Sami\workspace\android-ndk-r8e\sources\cxx-stl\gnu-libstdc++\4.7\include\ 
```

不确定哪个变量会替换该`C:\Users\Sami\workspace\`部分，所以如果有人知道，请告诉。

* * *

编辑：实际上，这只是出于某种原因消除了错误，但并没有解决我注意到的问题。在那一点上，`C:\Users\Sami\workspace\android-ndk-r8e`可以替换为`$(NDK_ROOT)`.

我尝试了 Crystax 的 NDK，但我一直收到`complex.h`not being found 错误。我所做的只是将 complex.h 和 _mingw.h 复制到我的 jni 目录中。一切正常，代码在 x86 和 ARM 模拟器上都经过测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:57:03.810

看来您的 PATH 已损坏。请参考以下帖子来解决此问题。

[Android NDK：如何将 Android.mk 包含到另一个 Android.mk（分层项目结构）中？](https://stackoverflow.com/questions/6942730/android-ndk-how-to-include-android-mk-into-another-android-mk)

[android ndk错误“没有这样的文件或目录”？](https://stackoverflow.com/questions/12124518/android-ndk-error-no-such-file-or-directory)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:09:18.977

解决了！

首先，我应该使用 Android NDK 提供的工具链构建我的 ComplexOperations 源代码，因为文档明确指出不要与 gnu 编译器进行交叉编译。所以这是我的第一个错误。仅此一项还没有解决我的问题，因为我在执行 ndk-build 时仍然遇到 complex.h not found 错误。Android NDK 包含一个非常有限的标准 libc 实现。为了解决这个问题，我使用*了 CrystaX NDK*，它是 Android NDK 的扩展实现。这解决了一切！

# c - 编译时出错：“致命错误：cmocka.h：没有此类文件或目录编译终止。”

> ID：15250457
> 
> 赞同：-5
> 
> 时间：2013-03-06T14:50:12.103
> 
> 标签：c

我试图编写一个基本的单元测试。但我在编译时遇到错误：“致命错误：cmocka.h：没有此类文件或目录编译终止。” 谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:53:34.693

检查文件是否`cmocka.h`存在于编译器搜索包含的目录中。其他细节取决于您的编译器，最终取决于您的 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:05:56.443

这个错误`No such file or directory compilation`是不言自明的。您正在尝试包含`cmocka.h`并且编译器找不到它。所以：

1）确保您在某处拥有该文件。如果你在 Linux 上，你可以在你所在的任何目录中递归搜索它`find . -name "cmocka.h"`，如果你在 Windows 上，我相信你可以使用文件浏览器进行搜索

2a）如果您在本地找到/拥有它，请确保您正确包含它

`#include "cmocka.h"`而不是`#include <cmocka.h>`或者如果它在子目录中，请确保您将路径包含在构建命令或包含中。

2b）如果你没有它，那么你必须从某个地方下载它，你应该能够[像我在这里做的那样用谷歌搜索它，](http://cmocka.cryptomilk.org/api/cmocka_8h_source.html)但要确保它是你需要的正确版本。

# .net - 如何引入多个 PdfPageEventHelper 实例？

> ID：15250459
> 
> 赞同：0
> 
> 时间：2013-03-06T14:50:16.820
> 
> 标签：.net, itextsharp

我必须使用 itextsharp 库生成大量不同类型的文档，它们都有共同点，有些有共同的标题、页数、水印必要时应用它们来编写文档，但 PageEvent 并不是真正的事件，而是只有一个 IPdfEvent 的实例，实现这一点的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:31:08.980

我是 iText 的 Java 版本的作者。我的回答可能不适用于 C# 端口。

页面事件可以是累积的：

```
writer.setPageEvent(watermarkevent);
writer.setPageEvent(headerevent);
writer.setPageEvent(footerevent); 
```

在内部，`PdfPageEventForwarder`创建了 a。该对象将确保每个事件按照您添加它们的顺序触发。

当你想删除事件时，你只需要这样做：

```
writer.setPageEvent(null); 
```

在您的情况下，您可以创建自己的`PdfPageEventForwarder`实例，创建不同的页面事件组合。

我很确定您可以在 iTextSharp 中做同样的事情，尽管类和方法名称可能略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:02:45.000

这是我在需要创建不同文档通用的自定义页脚时所做的。此页脚只是一个多行页脚。

首先，创建您的自定义页脚：

```
public class CustomFooter : PdfPageEventHelper
{
    private string[] _Phrases;
    private Font _CustomFooterFont;

    public string[] phrases
    {
        get { return _Phrases; }
        set { _Phrases = value; }
    }

    public Font customFont {
        get { return _CustomFooterFont; }
        set { _CustomFooterFont = value; }
    }

    public override void OnEndPage(PdfWriter writer, iTextSharp.text.Document document)
    {
        base.OnEndPage(writer, document);

        iTextSharp.text.Rectangle rect = writer.GetBoxSize("footer");

        for (int i = 0; i < this.phrases.Length; i++)
        {
            Phrase currentPhrase;
            currentPhrase = new Phrase(_Phrases[i], _CustomFooterFont);

            ColumnText.ShowTextAligned(writer.DirectContent,
                iTextSharp.text.Element.ALIGN_LEFT, currentPhrase,
                rect.Left, rect.Bottom +20 - (i * 9), 0);
        }
    }

    } 
```

当需要这些页脚之一时，我会调用此函数：

```
 public static CustomFooter getMultilineFooter(string[] Phrases)
    {
        CustomFooter result = new CustomFooter();

        result.phrases = Phrases;
        result.customFont = myCustomFooterFont;
        result.customBoldFont = myCustomFooterBoldFont;

        return result;        } 
```

之后，只需添加到文档中。希望这可以帮助。

# java - 将字节转换为位集

> ID：15250468
> 
> 赞同：0
> 
> 时间：2013-03-06T14:50:33.973
> 
> 标签：java, byte, bitset

我正在尝试找出一种从文件中获取数据的方法，并且我想将每 4 个字节存储为一个 bitset(32)。我真的不知道该怎么做。我已经尝试将文件中的每个字节存储在一个数组中，然后尝试将每 4 个字节转换为一个位集，但我真的无法使用位集来解决我的问题。关于如何解决这个问题的任何想法？

```
FileInputStream data = null;
try 
{ 
     data = new FileInputStream(myFile); 
} 
catch (FileNotFoundException e) 
{ 
     e.printStackTrace(); 
} 
ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
byte[] b = new byte[1024]; 
int bytesRead; 
while ((bytesRead = data.read(b)) != -1) 
{ 
       bos.write(b, 0, bytesRead); 
} 
byte[] bytes = bos.toByteArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:43:31.253

好的，你得到了你的字节数组。现在您必须将每个字节转换为位集。

```
//Is number of bytes divisable by 4
bool divisableByFour = bytes.length % 4 == 0;

//Initialize BitSet array
BitSet[] bitSetArray = new BitSet[bytes.length / 4 + divisableByFour ? 0 : 1];

//Here you convert each 4 bytes to a BitSet
//You will handle the last BitSet later.
int i;
for(i = 0; i < bitSetArray.length-1; i++) {
    int bi = i*4;
    bitSetArray[i] = BitSet.valueOf(new byte[] { bytes[bi], bytes[bi+1], bytes[bi+2], bytes[bi+3]});
}

//Now handle the last BitSet. 
//You do it here there may remain less than 4 bytes for the last BitSet.
byte[] lastBitSet = new byte[bytes.length - i*4];
for(int j = 0; j < lastBitSet.length; j++) {
    lastBitSet[i] = bytes[i*4 + j]
}

//Put the last BitSet in your bitSetArray
bitSetArray[i] = BitSet.valueOf(lastBitSet); 
```

我希望这对你有用，因为我写得很快，并没有检查它是否有效。但这给了你基本的想法，这是我一开始的意图。

# php - 参考 PHP Class 函数方法

> ID：15250469
> 
> 赞同：4
> 
> 时间：2013-03-06T14:50:37.450
> 
> 标签：php

我有一堂课：

```
class demo {

      function newDemo(){
          $v=$this->checkDemo;
          $v('hello'); // not working this reference, or how to do this?
      }

      function checkDemo($a){
          ...
          return $a;
      }
           } 
```

那么，如何在类中引用 checkDemo 函数方法呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T14:54:35.823

要使对象方法成为可调用对象，您需要一个数组。索引 0 是实例，索引 1 是方法的名称：

```
$v = Array($this,"checkDemo");
$v("hello"); 
```

编辑：请注意，此功能仅适用于 PHP 5.4

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T14:54:57.057

你像这样分配它：

```
$v = 'checkDemo';
$this->$v('hello'); 
```

查看[文档](http://php.net/manual/en/functions.variable-functions.php)以获取更多示例。

虽然我不完全确定你*为什么*要这样做，但就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:56:37.750

[PHP 手册](http://www.php.net/manual/en/functions.variable-functions.php)

```
<?php
class Foo
{
    function Variable()
    {
        $name = 'Bar';
        $this->$name(); // This calls the Bar() method
    }

    function Bar()
    {
        echo "This is Bar";
    }
}

$foo = new Foo();
$funcname = "Variable";
$foo->$funcname();  // This calls $foo->Variable()

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:53:26.793

如果您只是：

```
class demo {

      function newDemo(){
          echo $this->checkDemo('hello');
      }

      function checkDemo($a){
          return $a;
      }
}

$demo = new demo;

$demo->newDemo(); // directly outputs "hello", either to the browser or to the CLI 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T14:56:59.057

直接调用 $this->checkDemo($data) 就没用了

但是....你可以这样做

```
$v=function($text){ return $this->checkDemo($text); };
echo $v('hello'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T15:00:43.257

只需调用[`call_user_func`](http://ua.php.net/manual/en/function.call-user-func.php)函数并传递数组，将对象引用和方法名称作为第一个参数：

```
class demo {

      function newDemo(){
          return call_user_func( array( $this, 'checkDemo' ), 'hello' );
      }

      function checkDemo( $a ){
          ...
          return $a;
      }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T15:03:20.957

这样做的一种方法：

```
<?php
class HelloWorld {

    public function sayHelloTo($name) {
        return 'Hello ' . $name;
    }

public function test () {
   $reflectionMethod = new ReflectionMethod(__CLASS__, 'sayHelloTo');
   echo $reflectionMethod->invoke($this, 'Mike');

    }

}

$hello = new HelloWorld();
$hello->test(); 
```

[http://www.php.net/manual/en/reflectionmethod.invoke.php](http://www.php.net/manual/en/reflectionmethod.invoke.php)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-06T14:54:05.607

调用函数时必须添加参数：

```
$v = $this->checkDemo('hello'); 
```

# python - 将python列表转换为字符串

> ID：15250476
> 
> 赞同：-4
> 
> 时间：2013-03-06T14:50:58.630
> 
> 标签：python

我有一个像这样的python列表：

```
list = []
for loop
   list.append("blah") 
```

我想做的是将这个列表转换为字符串，每个值用逗号分隔。

我该怎么做呢？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:51:50.157

使用[`str.join`](http://docs.python.org/2/library/stdtypes.html#str.join)方法：

```
','.join(your_list) 
```

# extjs - 如何使用 id 在 extjs 中自动选择网格记录？

> ID：15250481
> 
> 赞同：3
> 
> 时间：2013-03-06T14:51:07.897
> 
> 标签：extjs

我想通过在 extjs 中发送 id 属性突出显示特定行来加载网格。我暂时无法选择记录。我该怎么做？谢谢....

我尝试了一些代码中注释的代码。你可以在下面看到。

```
var GrideAktar = function (bilgim) {
    arr = bilgim.split(",");
    bilgi = arr[0];
    secilecek_id = arr[1];

    harita.hide();
    izgaralar.hide();
    chartlar.hide();
    izgara_yp_is_emirleri.hide();

    izgaralar.show();
    izgaralar.setHeight(merkez.getHeight());
    fileStore_yon.loadById(bilgi);
    tree.treeRefresh();

    cuIzgaraKay = null;
    cuAgacNode = bilgi;
    cuAgacSeciliNode = NodeParser(bilgi);
    cuAgacSeciliSehir = SehirParser(bilgi)
    fileGrid_yon.setHeight(merkez.getHeight());
    //fileGrid_yon.getSelectionModel().selectFirstRow();
    //fileGrid_yon.getSelectionModel().valueOf(id);
    //fileGrid_yon.getSelectionModel().selectRow(1);

    //   var idx = fileGrid_yon.getStore().indexOfId(secilek_id);
    //var rowEl = fileGrid_yon.getView().getRow(idx);
    //rowEl.scrollIntoView(fileGrid_yon.getGridEl(),false);
    Ext.select(secilecek_id);
    raporAlanListesiWindow.hide();
    //fileGrid_yon.getSelectionModel().selectRow( this.getStore().indexOfId(id) ); //raporSecenekleriForm.hide(); 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T14:54:00.303

利用：

```
grid.getSelectionModel().select(store.getById(id)); 
```

它将选择 in`store`中`id`的记录`grid`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T21:02:03.377

```
var index = gridPanel.store.find('fieldName', fieldValue);
gridPanel.getSelectionModel().select(gridPanel.store.getAt(index)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:14:54.203

这看起来像一个竞争条件问题。我猜你的代码创建了一个使用 ajax 或其他东西从远程源加载的网格。尝试在商店的“加载”事件中嵌入行选择代码：

```
var GrideAktar = function (bilgim) {
    arr = bilgim.split(",");
    bilgi = arr[0];
    secilecek_id = arr[1];

    harita.hide();
    izgaralar.hide();
    chartlar.hide();
    izgara_yp_is_emirleri.hide();

    izgaralar.show();
    izgaralar.setHeight(merkez.getHeight());
    fileStore_yon.on("load", function(){
        fileGrid_yon.getSelectionModel().select(fileStore_yon.getById(id));
    });
    fileStore_yon.loadById(bilgi);
    tree.treeRefresh();

    cuIzgaraKay = null;
    cuAgacNode = bilgi;
    cuAgacSeciliNode = NodeParser(bilgi);
    cuAgacSeciliSehir = SehirParser(bilgi)
    fileGrid_yon.setHeight(merkez.getHeight());
    //fileGrid_yon.getSelectionModel().selectFirstRow();
    //fileGrid_yon.getSelectionModel().valueOf(id);
    //fileGrid_yon.getSelectionModel().selectRow(1);

    //   var idx = fileGrid_yon.getStore().indexOfId(secilek_id);
    //var rowEl = fileGrid_yon.getView().getRow(idx);
    //rowEl.scrollIntoView(fileGrid_yon.getGridEl(),false);
    Ext.select(secilecek_id);
    raporAlanListesiWindow.hide();
    //fileGrid_yon.getSelectionModel().selectRow( this.getStore().indexOfId(id) ); //raporSecenekleriForm.hide(); 
} 
```

# jquery - 为什么这个 div/area 滚动正确？

> ID：15250482
> 
> 赞同：0
> 
> 时间：2013-03-06T14:51:08.077
> 
> 标签：jquery, wordpress, css

我有一个 div/full width (to a point) 滑块，请参见此处：

[http://www.carboncandy.com/dev/avsl/](http://www.carboncandy.com/dev/avsl/)

静态标题按预期工作，至少我认为是这样。

但是，在低于 1600 宽的分辨率下，站点会向右滚动。

我已经检查了我能做的一切，除非它盯着我的脸，我看不到它，我不知道还能尝试什么？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:57:39.860

您可以清除问题..通过添加样式

`body{overflow-x:hidden}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:03:36.390

您可能希望`div`使用`overflow-x:hidden;`属性实现固定宽度的包装。它将允许您强制查看您设置的特定宽度的查看区域。

HTML

```
<div class="wrapper">
    <!-- Your Code -->
</div> 
```

CSS

```
.wrapper {
    width      : 1140px;
    overflow-x : hidden;
} 
```

它相当原始，并且促进了混乱和冗余的代码。建议您找到并修复`div`带有额外宽度的违规 s，并从根本上解决问题。

# database - 使用 Oracle 数据库的 Play 框架 - ORA-00942：表或视图不存在

> ID：15250483
> 
> 赞同：2
> 
> 时间：2013-03-06T14:51:11.220
> 
> 标签：database, oracle11g, playframework-2.0, oracle-xe

我无法解决本地 Oracle 数据库的问题。我正在尝试连接到我的本地 Oracle 数据库（Oracle 数据库 11g 快捷版） 稍后我将使用 JNDI 连接到另一个 Oracle 数据库，但我认为这应该仍然有效。驱动程序：/lib 中的 ojdbc6.jar

```
db.default.driver=oracle.jdbc.driver.OracleDriver
db.default.url="jdbc:oracle:thin:@localhost:1521:xe"
db.default.user="user"
db.default.pass="pass" 
```

所以我知道我确实连接到数据库，但错误是它说该表不存在。我什至没有创建或查询表（不存在模型 - 但我也尝试过使用模型，同样的错误）。一开始似乎有些问题，我不知道如何调试。

错误：

```
**java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist**
 oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:457)
 oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:400)
 oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:926)
 oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:476)
 oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:200)
 oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:543)
 oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:197)
 oracle.jdbc.driver.T4CStatement.executeForDescribe(T4CStatement.java:1213)
 oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1492)
 oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1710)
 oracle.jdbc.driver.OracleStatement.executeQuery(OracleStatement.java:2006)
 oracle.jdbc.driver.OracleStatementWrapper.executeQuery(OracleStatementWrapper.java:1709)
 com.jolbox.bonecp.StatementHandle.executeQuery(StatementHandle.java:503)
 play.api.db.evolutions.Evolutions$.executeQuery(Evolutions.scala:118)
 play.api.db.evolutions.Evolutions$.databaseEvolutions(Evolutions.scala:334)
 play.api.db.evolutions.Evolutions$.evolutionScript(Evolutions.scala:306)
 play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1$$anonfun$apply$1.apply$mcV$sp(Evolutions.scala:435)
 play.api.db.evolutions.EvolutionsPlugin.withLock(Evolutions.scala:478)
 play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:434)
 play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:432)
 scala.collection.immutable.List.foreach(List.scala:309)
 play.api.db.evolutions.EvolutionsPlugin.onStart(Evolutions.scala:432)
 play.api.Play$$anonfun$start$1$$anonfun$apply$mcV$sp$1.apply(Play.scala:63)
 play.api.Play$$anonfun$start$1$$anonfun$apply$mcV$sp$1.apply(Play.scala:63)
 scala.collection.immutable.List.foreach(List.scala:309)
 play.api.Play$$anonfun$start$1.apply$mcV$sp(Play.scala:63)
 play.api.Play$$anonfun$start$1.apply(Play.scala:63)
 play.api.Play$$anonfun$start$1.apply(Play.scala:63) 
```

在阅读它时，我只发现我可能没有对某些表的权限，但问题是我在 Oracle SQL Developer 中使用相同的登录名并且它可以工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T11:53:00.027

正如 nico_ekito 所写，您需要手动创建此表。

这个对我有用：

```
CREATE TABLE play_evolutions
(
  id Number(10,0) Not Null Enable,
  hash VARCHAR2(255 Byte),
  applied_at Timestamp Not Null,
  apply_script clob,
  revert_script clob,
  state Varchar2(255),
  last_problem clob,
  CONSTRAINT play_evolutions_pk PRIMARY KEY (id)
); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T16:12:53.397

尝试手动创建一个`play_evolutions`包含以下列的表（通过使类型适应 Oracle 使用的类型）：

```
id int not null primary key, hash varchar(255) not null, 
applied_at timestamp not null, 
apply_script text, 
revert_script text, 
state varchar(255), 
last_problem text 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-01T14:40:55.517

在`conf/application.conf`

取消注释以下行：

`evolutionplugin=disabled`

这是如果您不需要**Evolutions**（跟踪架构更改）。

# python - Python 回调处理程序——更好的错误消息？

> ID：15250484
> 
> 赞同：1
> 
> 时间：2013-03-06T14:51:13.100
> 
> 标签：python, json, error-handling, stomp, traceback

我正在使用[stomp.py](http://code.google.com/p/stomppy/)库通过网络获取 JSON 消息。我已经改编了他们[在此处](http://code.google.com/p/stomppy/wiki/SimpleExample)给出的简单示例，该示例使用回调来提供消息处理。

但是当我修改那个回调时，我犯了一个简单的错误——例如，我在尝试解析我的 JSON 字符串时调用了 json.load() 而不是 json.loads()。

```
class MyListener(object):
    def on_message(self, headers, message):
        data = json.load(message)           ## Should be .loads() for a string! 
```

通常这会很好 - 它会出现 AttributeError 并且我会看到回溯。但在这种情况下，Python 会打印：

**找不到记录器“stomp.py”的处理程序**

...没有追溯，没有崩溃，仅此而已。调试并找出我做错了什么非常令人困惑！我期待至少正常的追溯如下：

```
Traceback (most recent call last):
  File "./ncl/stomp.py-3.1.3/stompJSONParser.py", line 32, in <module>
    [etc etc ...] 
```

...而不是让整个听众感到厌烦。我想这是因为那发生在不同的线程上？

现在我已经解决了它就像回调中的一种运行时错误，我至少知道当它出错时我做错了什么 - 但如果它只是为我犯的每一个错误喷出那个错误而不是给我某种有用的消息，它使编码有点困难。

这是什么原因造成的？我能做些什么来**获得常规的、更详细的回溯**？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:58:20.273

看起来它期望设置来自[Python 日志记录模块](http://docs.python.org/2/library/logging.html)的日志处理程序以捕获输出。有很多可能的日志配置。但是对于简单的调试，我会使用类似的东西

```
import logging
logging.basicConfig(level=logging.DEBUG) 
```

这应该捕获日志级别 DEBUG 及以上的所有输出。阅读日志文档以获取更多信息:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:58:26.467

[可以在此处](http://docs.python.org/2/library/logging.html)找到获取记录器的说明（这是直接要求的），但详细的回溯被抑制。

如果您查看[调用 的代码`on_message`](https://code.google.com/p/stomppy/source/browse/stomp/connect.py)，您会注意到该块位于`try`没有`except`.

第 703 行是实际调用该方法的位置：

```
 notify_func = getattr(listener, 'on_%s' % frame_type)
        notify_func(headers, body) 
```

在方法中`__notify`（在第 639 行声明）：

```
def __notify(self, frame_type, headers=None, body=None): 
```

这些是它不在 try 块中的时间：

*   331（`connected`活动用）
*   426 参加`send`活动
*   743 为`disconnected`

但是调用的时间`message`是第 727 行：

```
# line 719
try:
    # ....
    self.__notify(frame_type, headers, body) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:43:46.717

最后，我按名称抓取了记录器并在其上设置了 StreamHandler：

```
import logging

log = logging.getLogger('stomp.py')
strh = logging.StreamHandler()
strh.setLevel(logging.ERROR)
log.addHandler(strh); 
```

# javascript - 调用父原型方法

> ID：15250486
> 
> 赞同：1
> 
> 时间：2013-03-06T14:51:15.353
> 
> 标签：javascript

“我的理解有问题。我的一段代码：

```
 //constructor
       function Widget (options) {            
        };

       //return the string
        Widget.prototype._addEditFormString = function (val) {
            return "<input type='text' value='" + val + "' >";                
        } 
        //initializing method
        Widget.prototype.init = function () {
            var addRowButton = document.getElementsByName("addRow")[0];              
            addRowButton.addEventListener("click", this.addRow, false);                
        };
        //this context in this method still confusing me
        Widget.prototype.addRow = function () {    
            console.log(this._addEditFormString);//Uncaught TypeError: Object #<HTMLInputElement> has no method '_addEditFormString'                  
        }  
        var wid = new Widget();

         wid.init(); 
```

问题 - 在 init() 方法中我添加事件侦听器（addRow 方法），但在 addRow 方法中我不知道如何捕获我的构造函数类的“this”，因为我想调用 _addEditFormString() 方法，但收到“Uncaught TypeError : 对象 [对象窗口] 没有方法 '_addEditFormString'"。如果没有 Widget.prototype._addEditFormString，我该如何解决？还是只有一种解决方案？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:52:40.010

问题是事件处理程序中的上下文是窗口，而不是您的`Widget`.

改变

```
Widget.prototype.init = function () {
     var addRowButton = document.getElementsByName("addRow")[0];              
     addRowButton.addEventListener("click", this.addRow, false);                
}; 
```

到

```
Widget.prototype.init = function () {
      var _this = this;
      var addRowButton = document.getElementsByName("addRow")[0];              
      addRowButton.addEventListener("click", function(){_this.addRow()}, false);                
}; 
```

* * *

在评论中编辑您的问题：

你似乎想要

```
Widget.prototype._addEditFormString.call(this); 
```

# r - 如何向 Rgui 添加菜单项？

> ID：15250487
> 
> 赞同：2
> 
> 时间：2013-03-06T14:51:15.597
> 
> 标签：r, user-interface

我想在 Rgui（在 Windows 上）的“帮助”选项卡中添加一个“检查更新”菜单项。

我已经创建了[R 函数来检查更新](http://www.r-statistics.com/2013/03/updating-r-from-r-on-windows-using-the-installr-package/)，现在我希望将它添加到 Rgui（理想情况下，会弹出一个带有结果的按摩框，或者甚至是用户进一步操作的复选框）。

我将不胜感激有关为此要考虑哪些功能的任何想法（如果可能使用基本 R，如果没有的话 - 哪些软件包可能提供此选项）。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:12:09.230

这是一个示例 - 假设您想要添加一个名为 Update 的新菜单，并想要添加一个菜单项来更新所有将“ask”设置为 FALSE 的包

```
winMenuAdd("Update")
winMenuAddItem("Update", "Update R packages", "update.packages(ask = F)") 
```

# mongodb - 使用 Angular 和 MongoDB 遍历子容器

> ID：15250488
> 
> 赞同：1
> 
> 时间：2013-03-06T14:51:15.627
> 
> 标签：mongodb, angularjs

我很想知道使用 angular 遍历 mongodb 以获取给定客户的所有域的最佳方法。

这是我来自 MongoDB 的 JSON：

```
 {
"_id": {
    "$oid": "513568dae4b08eabdba2eb63"
},
"name": "Sofa King",
"contactPrimaryName": "Richard Cranium",
"contactPrimaryPhone": "410 555-1212",
"contactPrimaryEmail": "me@mysite.com",
"PrimaryAddress": "123 Any Street\nApt. 17",
"contactPrimaryCity": "Nashville",
"contactPrimaryState": "TN",
"contactPrimaryZip": "22222",
"site": "http://www.mysite.com",  //ignore, replacing with domains
"domains": [
    {
        "url": "http://www.mysite.com",
        "ns1": "ns1.mydns.com",
        "ns2": "ns2.mydns.com",
        "registered": "2011-01-01",
        "expires": "2014-01-01"
    },
    {
        "url": "http://www.myother.com",
        "ns1": "ns1.mydns.com",
        "ns2": "ns2.mydns.com",
        "registered": "2012-02-02",
        "expires": "2015-02-02"
    }
] 
```

我知道我可以通过以下方式获取客户详细信息：

```
 <tr ng-repeat="customer in customers | filter:search | orderBy:'name'">
    <td><a href="{{customer.site}}" target="_blank">{{customer.name}}</a></td>
    <td>{{customer.contactPrimaryName}}</td>
    <td>{{customer.contactPrimaryPhone}}</td>
    <td>{{customer.contactPrimaryEmail}}</td> 
```

但我不确定如何获取给定客户的域 URL。

我的目标是在一个页面上有一个客户列表，并带有一个按钮来查看该客户的域。查看给定客户的域时，可以添加域。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:58:41.060

您应该能够迭代当前客户的“域”数组：

```
<tr ng-repeat="customer in customers | filter:search | orderBy:'name'">
...
    <td>
        <div data-ng-repeat="domain in customer.domains">
            // Do stuff in here with the domain for that customer
        </div>
    </td>
</tr> 
```

# core-audio - AUGraph 停止后恢复

> ID：15250495
> 
> 赞同：0
> 
> 时间：2013-03-06T14:51:32.710
> 
> 标签：core-audio

我创建了一个项目，其中包含了各种音频 AudioUnit 类型：Augraph 环境中的生成器、混音、高通、IOU。我几乎可以开始为该应用程序计划的所有内容，但我无法解释为什么我可以听到带有（动作 auGraphStart）的文件播放器，但是如果我按下动作（augraphStop）然后再次按下（auGraphStart）这个动作不会恢复音频。再次按下开始后，我唯一能听到的是一小段音频，然后是完全沉默。

你能给我正确的方向来解决这个问题吗？

# c# - 在 Rotativa 生成的 PDF 中显示页眉和页脚

> ID：15250505
> 
> 赞同：7
> 
> 时间：2013-03-06T14:51:51.687
> 
> 标签：c#, asp.net-mvc-3, pdf-generation, rotativa

我正在尝试在 Rotativa 库生成的 PDF 中指定页眉和页脚。正如作者[在这里](https://github.com/webgio/Rotativa/issues/13)回答的那样，应该可以使用 CSS（[在此处](http://www.princexml.com/doc/7.1/page-headers-footers/)描述）。但是，我无法做到这一点。

我在元标记中加载了一个样式表：

```
<link href="print.css" rel="stylesheet" type="text/css" media="print" /> 
```

在底部的样式表中：

```
@page {
    @top-left {
        content: "TOP SECRET";
        color: red
    }
    @bottom-right {
        content: counter(page);
        font-style: italic
    }
} 
```

然后通过以下方式生成 PDF：

```
public ActionResult ShowPdf()
{
     var model = new Model();
     return new ViewAsPdf("view.cshtml", model)
                {
                    FileName = "Report.pdf",
                    CustomSwitches = "--print-media-type"
                };
} 
```

然后 PDF 的页眉和页脚中没有任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T14:09:31.927

我找到了[wkhtmltopdf 的文档](https://wkhtmltopdf.org/usage/wkhtmltopdf.txt)（或更好的[存档版本](http://web.archive.org/web/20130318095015/https://madalgo.au.dk/%7Ejakobt/wkhtmltoxdoc/wkhtmltopdf-0.9.9-doc.html)），并在那里描述了如何管理页眉和页脚。

基本上，您可以将`--header-center "text"`（或类似的开关）添加到参数列表中，仅此而已。

因此，将它与 Rotativa 一起使用将是：

```
public ActionResult ShowPdf()
{
     var model = new Model();
     return new ViewAsPdf("view.cshtml", model)
                {
                    FileName = "Report.pdf",
                    CustomSwitches = "--print-media-type --header-center \"text\""
                };
} 
```

（不知道有没有`--print-media-type`必要。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-24T09:16:17.177

如果您想在页眉/页脚中显示视图而不是文本，则可以这样做：

```
public ActionResult ViewPDF()
{
      string customSwitches = string.Format("--print-media-type --allow {0} --footer-html {0} --footer-spacing -10",
                Url.Action("Footer", "Document", new { area = ""}, "https"));

     return new ViewAsPdf("MyPDF.cshtml", model)
                {
                    FileName = "MyPDF.pdf",
                    CustomSwitches = customSwitches
                };
}

[AllowAnonymous]
public ActionResult Footer()
{
    return View();
} 
```

不要忘记在页脚操作中添加 [AllowAnonymous] 属性，否则 Rotatina 无法访问路径。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-05T12:42:31.463

这是我的做法（完整）：

```
public ActionResult PrintPDF(int? selectedSiteRotaId, int selectedSiteId)
{
    string footer = "--footer-center \"Printed on: " + DateTime.Now.Date.ToString("MM/dd/yyyy") + "  Page: [page]/[toPage]\"" + " --footer-line --footer-font-size \"9\" --footer-spacing 6 --footer-font-name \"calibri light\"";

    return new ActionAsPdf("RenderPDF", new { selectedSiteRotaId = selectedSiteRotaId, selectedSiteId = 7 }) 
    {
        FileName = "PDF_Output.pdf",
        PageOrientation = Orientation.Landscape,
        MinimumFontSize = 10, 
        //PageMargins  = new Margins(5,5,5,5),
        PageSize = Size.A3,
        CustomSwitches = footer
    };

    //var pdfResult = new ActionAsPdf("RenderPDF", new { selectedSiteRotaId = selectedSiteRotaId, selectedSiteId = 7 })
    //{
    //    FileName = "PDF_Output.pdf",
    //    PageOrientation = Orientation.Landscape,
    //    MinimumFontSize = 10
    //};

    //var binary = pdfResult.BuildPdf(this.ControllerContext);

    //return File(binary, "application/pdf");
}

public ActionResult RenderPDF(int? selectedSiteRotaId, int selectedSiteId)
{
    return RedirectToAction("Index", "PrintPDF", new { selectedSiteRotaId = selectedSiteRotaId, selectedSiteId = 7 });
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-30T18:54:50.053

```
string customSwitches = string.Format("--header-spacing \"0\" --footer-spacing \"0\"  --footer-html {0}   ", Url.Action("Footer", "Invoice", new { }, "http"));
        return new ViewAsPdf(saleInvoiceVm)
        {
            PageOrientation = Orientation.Portrait,
            PageSize = Rotativa.AspNetCore.Options.Size.A4,
            PageMargins = { Left = 5, Bottom = 25, Right = 7, Top = 10 },
            CustomSwitches = customSwitches,
        }; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-11-23T11:09:35.353

试试吧，它会工作 100%

```
 return new ViewAsPdf("MyPDF.cshtml", model)
            {
                FileName = "MyPDF.pdf",
                CustomSwitches = customSwitches
            }; 
```

}

# java - 埃拉托色尼筛问题 Java

> ID：15250506
> 
> 赞同：2
> 
> 时间：2013-03-06T14:51:53.023
> 
> 标签：java, sieve-of-eratosthenes

我有一个需要使用数组的任务的问题。我需要创建埃拉托色尼筛算法并打印出所有素数。我很困惑，因为据我所知，我的操作顺序是正确的。这是代码：

```
 //Declare the array
        boolean numbers [] = new boolean[1000];
        int y = 0;

        //Declare all numbers as true to begin
        for(int i = 2; i < 1000;i++){
            numbers[i] = true;
        }
        //Run loop that increases i and multiplies it by increasing multiples
        for (int x = 2; x < 1000; x++) {

            //A loop for the increasing multiples; keep those numbers below 1000
            //Set any multiple of "x" to false
            for(int n = 2; y < 1000; n++){
            y = n * x;
            numbers[y] = false;
            }
        } 
```

我首先将数组中的所有数字设置为 true。然后第二个循环将从 2 开始“x”，然后在它内部是一个嵌套循环，它将“x”乘以“n”的值，并且“n”将继续增加，只要该乘积的乘积（“y ") 低于 1000。一旦 "y" 达到最大值，"x" 将上升一个数字并重复该过程，直到所有非质数都设置为 false。

这是我编写代码时的逻辑，但是当我尝试运行它时，我得到了“ArrayIndexOutOfBoundsException”错误。据我所知，我将所有内容都设置为低于 1000，因此它不应该超过数组大小。

我知道它可能不是最有效的算法，因为随着“x”的增加，它会超过已经超过的数字，但它是我能想到的最简单的算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:59:46.747

这里：

```
 for(int n = 2; y < 1000; n++){
        y = n * x;
        numbers[y] = false;
        } 
```

您*首先*检查它`y < 1000`，*然后*初始化并使用它。这是错误的方法。

此外，您可以仅在`x`素数时才运行上述循环。这不会影响正确性，但应该使您的代码更快。

# matlab - 以相同的顺序，通过与另一个数组进行比较来查找数组中的元素

> ID：15250510
> 
> 赞同：0
> 
> 时间：2013-03-06T14:51:57.240
> 
> 标签：matlab, matrix

我有一个矩阵

```
a = [ 1 'cancer'
      2 'cancer'
      3 'cancer'
      4 'noncancer'
      5 'noncancer' ] 
```

我有另一个带有值的矩阵

```
b = [ 4
      5
      2 ] 
```

现在我必须将 b 矩阵值与 a 值进行比较，输出应该是

```
output = [ 4  'noncancer'
           5  'noncancer'
           2  'cancer'] 
```

如果我使用

```
a(ismember([a{:,1}], b),:) 
```

我得到答案 =

```
[2]    'cancer'   
[4]    'noncancer'
[5]    'noncancer' 
```

如何以相同的顺序获得结果？如下所示

```
output = [ 4  'noncancer'
           5  'noncancer'
           2  'cancer'] 
```

# html - 在jquery mobile页脚中将元素对齐到中心

> ID：15250513
> 
> 赞同：6
> 
> 时间：2013-03-06T14:52:14.580
> 
> 标签：html, jquery-mobile

我很难在 jQuery Mobile 页面的页脚内对齐元素。
我们要显示三种不同的信息：版权、版本号和连接状态。目标是对齐页脚，使 COPYRIGHT 左对齐，VERSION NUMBER 居中，CONNECTION STATUS 右对齐，都在同一页脚行上。

我尝试了以下方法，但不幸的是，它不起作用：

```
<div data-role="footer">
<span style="text-align:left">COPYRIGHT</span>
<span style="text-align:center">VERSION NUMBER</span>
<span style="text-align:right">CONNECTION STATUS</span>
</div> 
```

任何建议如何完成此对齐设置？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T15:00:23.623

您应该像这样使用 jQuery Mobile 网格：

```
 <div data-theme="a" data-role="footer" data-position="fixed">
        <h3>
            <div class="ui-grid-b">
                <div class="ui-block-a" style="text-align: left;">COPYRIGHT</div>
                <div class="ui-block-b" style="text-align: center;">VERSION NUMBER</div>
                <div class="ui-block-c" style="text-align: right;">CONNECTION STATUS</div>                
            </div><!-- /grid-a -->
        </h3>                
    </div> 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/e2uaU/](http://jsfiddle.net/Gajotres/e2uaU/)

并根据需要设置样式。一切都应该被包裹在 h3 标签中，这样页脚就可以保持它的高度。

# binding - 定义内联函数与否有什么区别？

> ID：15250514
> 
> 赞同：3
> 
> 时间：2013-03-06T14:52:17.403
> 
> 标签：binding, lisp, scheme

我正在[研究计算机程序的结构和实现](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-4.html)一书，其中一章中有一些代码用于计算数字的阶乘：

```
(define (factorial n)
  (fact-iter 1 1 n))

(define (fact-iter product counter max-count)
    (if (> counter max-count)
        product
        (fact-iter (* counter product)
                   (+ counter 1)
                   max-count))) 
```

在本书的前面，我了解到我可以在另一个函数中内联定义函数，如下所示：

```
(define (factorial n)
  (define (fact-iter product counter max-count)
    (if (> counter max-count)
        product
        (fact-iter (* counter product)
                   (+ counter 1)
                   max-count)))
  (fact-iter 1 1 n)) 
```

我知道使用第二种方法`fact-iter`将无法在范围之外访问，`factorial`但我想知道当我运行第二个版本时会发生什么`factorial`？

定义了符号的新本地绑定`fact-iter`并创建了新函数，或者此绑定仅在程序编译时创建一次？

我来自java背景，这对我来说还不清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:59:31.083

它取决于方案的实施（在*SICP*的后续章节中讨论的策略）。从概念上讲，一个新函数会在每次调用中定义/编译`factorial`它的第二个定义。但是，一个好的编译器可以转换此代码，使其更像您的第一个定义。

由于这种结构在 Scheme 中非常常见（编写循环的惯用方式是命名`let`结构，它也动态定义函数），Scheme 编译器应该非常擅长进行这种优化。实际上，您的示例对于优化器来说很容易处理，因为内部函数的定义实际上并不依赖于外部函数绑定的任何变量，因此它几乎可以按原样取出（可能只需要更改名称） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:15:27.163

每次调用阶乘时都不会**编译**一个新函数。函数形式上是一段代码和一个环境；每次通话都会改变环境。例如：

```
(define (find x l)
  (define (equal-to-x y) (equal? x y))
  ....) 
```

在上面，每次调用 'find' 都会产生一个新函数 'equal-to-x'。“equal-to-x”函数的“环境”引用了在另一个范围内定义的变量“x”。但是，一个合适的编译器可能会注意到，equal-to-x 永远不会返回或绑定到范围外的变量，因此编译器可能会“内联”代码 - 因此不需要新函数（代码 + 环境）。

在您的代码中，内部定义的 fact-iter（您的第二种情况）的自由引用（+、* 和 >）都是全局定义的，并且不会返回（或绑定）fact-iter 函数。因此，一个足够好的编译器会内联它。

这是一个不太好的编译器的例子。您可以在“find”的反汇编中看到创建了一个函数/闭包（代码+环境），并且在“ex”的反汇编中使用了环境引用（以获取“x”）。

```
=> (define find (lambda (x l) 
     (define ex (lambda (y) (= x y))) 
     (ex (car l))))
(=>)
=> (sys:disassemble find)
;; Address  :  0x00327e90
;; Label    :  find
;; Constants:
;;         0:  #t
;;         1:  #[<code> ex 1]
;;         2:  (<cons> 6)
;; Code     :
;;       0-1:  explode 2
;;       2-3:  check 2
;;       4-5:  get-loc 0
;;       6-8:  closure 1, 1
;;      9-10:  get-loc 2
;;     11-13:  get-loc-res 1, 2
;;        14:  cons$car
;;     15-16:  call-tail-check 1
;;          :
;; Address  :  0x0031fb40
;; Label    :  ex
;; Constants:
;;         0:  #t
;;         1:  (<number> 1 142 42 154 158)
;; Code     :
;;       0-1:  explode 1
;;       2-3:  check 1
;;       4-6:  get-env-res 0, 1
;;       7-9:  get-loc-res 0, 1
;;        10:  number$=
;;     11-12:  return 1
;;          :
;; Env      :
#[<function> find 2] 
```

# installshield - 如何从 Installshield vbscript 或 javascript 自定义操作访问存储在直接编辑器表中的变量？

> ID：15250517
> 
> 赞同：1
> 
> 时间：2013-03-06T14:52:27.823
> 
> 标签：installshield, installshield-2011

我需要从自定义操作中读取或更改 IsIISProperty 表中“Enable32bitAppOnWin64”的值。现在，虽然我可以通过 Property Manager 访问属性`Session.Properties("PropertyName")`

我看不出如何对属性表做同样的事情。我试过 {ISIISProperty1}、[ISIISProperty1] 和 Session.Properties("ISIISProperty1") 都没有成功。

我如何实现这一目标？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:01:41.647

我无法在自定义操作中找到有关从安装程序表访问属性的任何信息。我确实发现您可以编写一些安装程序 SQL 语法来从自定义操作更新表，但这太过分了，我无法让它工作。

我能够做的是使用 ISIISProperty 表的属性替换。

1.  **我在名为ASPBITNESS**和**ALLOWTHIRTYTWOBIT**的属性表中创建了两个新属性，默认情况下它们分别设置为 x86 和 true。
2.  然后我在直接编辑器中编辑了**ISIISProperty**表，并将**Enable32bitAppOnWin64**和**AspNetVerBitness**的值分别替换为 [ALLOWTHIRTYTWOBIT] 和 [ASPBITNESS]。有趣的是，启用 32 位应用程序设置在 InstallShield 设计器中显示为“否”，即使 [ALLOWTHIRTYTWOBIT] 属性默认设置为 true。
3.  最后，我有一个自定义操作，有条件地（NOT REMOVE 和 VersionNT64 和 IIS_VERSION >“#6”）在安装开始时触发以相应地更改这些值。

自定义操作代码代码为：

```
On Error Resume Next

' change the properties for x64 systems
if SYSINFO.bIsWow64 <> 0 then
    Session.Property("ASPBITNESS") = "x64"  
    Session.Property("ALLOWTHIRTYTWOBIT") = "false"
end if 
```

在 MSI 日志显示之前：

> InstallShield 12:09:19：虚拟目录
> “MyWebApp”的 SetVRootProperties，应用程序“
> InstallShield” 12:09:19：IIS7 检查应用程序池
> “MyAPPPool”上的 ASP.NET 版本位数，安装请求“x86”
> ...
> InstallShield 12:09:19：SetAspversion：机器是 64 位，
> IIS 在当前选择的模式之外的位模式下运行
> ...
> InstallShield 12:09:19：IISRT 出错：-2172
> ...
> CustomAction ISIISInstall 返回实际错误代码 1603（请注意，如果翻译发生在沙箱内，这可能不是 100% 准确）

在这些更改之后，应用程序安装并且日志现在显示：

> MSI (s) (D4:1C) [10:53:18:662]：执行操作：Set64Bit
> 操作 10:53:18：Set64Bit。
> 动作开始时间 10:53:18：Set64Bit。
> MSI (s) (D4:0C) [10:53:18:678]：使用 PID 912 (0x390) 创建了自定义操作服务器。
> MSI (s) (D4:D0) [10:53:18:709]：作为服务运行。
> MSI (s) (D4:D0) [10:53:18:709]：您好，我是您的 32 位模拟自定义操作服务器。
> MSI (s) (D4!1C) [10:53:18:725]：属性更改：修改 ASPBITNESS 属性。
> 它的当前值为“x86”。它的新值：'x64'。
> MSI (s) (D4!1C) [10:53:18:725]：属性更改：修改 ALLOWTHIRTYTWOBIT
> 属性。它的当前值为“真”。它的新值：'false'。

接着：

> InstallShield 10:53:20：虚拟目录
> “MyWebApp”、应用程序“
> InstallShield”的 SetVRootProperties 10:53:20：IIS7 检查应用程序池
> “MyAppPool”上的 ASP.NET 版本位数，安装请求“x64”
> InstallShield 10:53 :20: 应用程序池 Enable32bitAppOnWin64 值为 'false'
> InstallShield 10:53:20: ASP.NET 版本可以设置为 64 位。
> InstallShield 10:53:20：配置 ASP .NET 版本：
> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir

# teradata - where 子句中具有多个值的多个列

> ID：15250525
> 
> 赞同：4
> 
> 时间：2013-03-06T14:52:45.627
> 
> 标签：teradata

我正在执行一个查询，该查询在 where 子句中有多个列，其中包含多个值。我知道在 SQL 中，您可以使用 IN 条件来满足并获得正确的输出。teradata的方法是什么？

我在 Oracle 中的代码如下所示：

```
select td.country_code,td.phone_num 
from telephone_directory td 
where (td.country_code, td.phone_num) in ((91,1234567890),(44,1020304050),(1,998877446655)) 
```

这会打印出确切的结果，即 3 行

我在 teradata 中的查询看起来像这样

```
select country_code ,phone_num  
from telephone_directory 
where (country_code in (91, 44, 1) and phone_num in( 1234567890, 1020304050, 998877446655) 
```

然而，这会返回更多行：

```
country_code  phone_num  
91            1234567890
91            1020304050
44            1020304050
1             998877446655 
```

注意：country_code 和电话号码的组合不是唯一的。

有没有办法像在 ORACLE 中那样在 teradata 中过滤掉它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-22T17:20:13.550

```
select USER_TYPE,USER_ID
from USER_TABLE
where (USER_TYPE || USER_ID) in (('F6713'),('S1178'),('M5715'),('F8341'),('F1284')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T21:38:36.603

据我所知，Teradata 不支持您在 Oracle 中所做的“扩展”where 子句语法；您需要将条件指定为复合表达式：

```
select country_code ,phone_num
from telephone_directory
where (country_code=91 and phone_num=1234567890)
   or (country_code=44 and phone_num=1020304050)
   or (country_code=1  and phone_num=998877446655) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:01:54.300

从逻辑上讲，您看到的 Teradata 的结果是正确的。您有一个带有多个国家代码的电话号码。以下 SQL 应该会产生您希望看到的结果：

```
select td.country_code,td.phone_num 
from telephone_directory td 
where (td.country_code, td.phone_num) 
   in ( SELECT 91 AS country_code_
             , 1234567890 AS phone_num_
         UNION 
        SELECT 44 AS country_code_
             , 1020304050 as phone_num_
         UNION
        SELECT 1 as country_code_
             , 998877446655 as phone_num_
      ); 
```

这也可以使用 WITH 子句或与括号组合在一起的 AND 语句的组合来重写，以产生正确的结果。

# java - net.sf.jasperreports.engine.JRException：从文件加载对象时出错

> ID：15250533
> 
> 赞同：0
> 
> 时间：2013-03-06T14:53:08.670
> 
> 标签：java, jasper-reports

我正在使用 jasper 为我的项目显示报告...实际上，我正在尝试将参数动态传递给 jrxml 模板，正如我在下面给出的链接中看到的那样，但我不能.....我的代码中似乎有问题，错误是

```
 net.sf.jasperreports.engine.JRException: Error loading object from file : C:\Users\db2admin\Documents\NetBeansProjects\ConnectDB\src\sample_report.jrxml
    at net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:115)
    at net.sf.jasperreports.engine.JasperFillManager.fillToFile(JasperFillManager.java:487)
    at net.sf.jasperreports.engine.JasperFillManager.fillReportToFile(JasperFillManager.java:874)
    at ConnectDB.main(ConnectDB.java:65)
Caused by: java.io.StreamCorruptedException: invalid stream header: 3C3F786D
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:801)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298)
    at net.sf.jasperreports.engine.util.ContextClassLoaderObjectInputStream.<init>(ContextClassLoaderObjectInputStream.java:53)
    at net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:110)
    ... 3 more 
```

碧玉片段是

```
ResultSet resultSet = statement.executeQuery("SELECT reg, name FROM students");
JRResultSetDataSource resultSetDataSource = new JRResultSetDataSource(resultSet);          

JasperFillManager.fillReportToFile("C:\\Users\\db2admin\\Documents\\NetBeansProjects\\
             ConnectDB\\src\\sample_report.jrxml", null, resultSetDataSource); 
```

最后的xml代码是

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sample_report" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="30" bottomMargin="30" uuid="b3b98795-b21f-4006-9295-5ef4248c84ea">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>

    <field name="name" class="java.lang.String"/>
    <field name="reg" class="java.lang.Integer"/>
    <columnHeader>
        <band height="28" splitType="Stretch">
            <staticText>
                <reportElement uuid="6d6bff96-6dcb-4188-bdc0-5c23b2614b05" key="staticText-1" x="40" y="11" width="196" height="15"/>
                <textElement/>
                <text><![CDATA[Name]]>
                </text>
            </staticText>
            <staticText>
                <reportElement uuid="c0267b29-e31b-4afd-a181-86bbcb4fb368" key="staticText-2" x="330" y="11" width="193" height="15"/>
                <textElement/>
                <text><![CDATA[Reg]]>
                </text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="27" splitType="Stretch">
            <textField>
                <reportElement uuid="4a1e6484-9610-421d-b4a4-f61d53458d9e" key="textField" x="47" y="6" width="173" height="18"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]>
                </textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="01cb3d91-74e7-4594-aca0-605d1aa203a8" key="textField" x="330" y="6" width="100" height="18"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{reg}]]>
                </textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

我提到了这个网站 [http://www.packtpub.com/article/creating-dynamic-reports-from-databases-jasperreports-3.5](http://www.packtpub.com/article/creating-dynamic-reports-from-databases-jasperreports-3.5)

请帮我解决这个问题！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T14:31:44.310

如果您在 ireport 中工作，请检查您的子报表是否引用了 .jasper 文件（而不是 jrxml）。

如果您将报告发布到 jasperreports-server，请记住它会更改引用带有前缀的 jrxml 文件（但不是 jasper 文件）的报告定义。

# python - 安装 Stanford Parser 的 Python 接口：错误：命令 'gcc' failed with exit status 1 rake aborted

> ID：15250536
> 
> 赞同：0
> 
> 时间：2013-03-06T14:53:18.947
> 
> 标签：python, installation, stanford-nlp, jpype

我想安装斯坦福解析器的 python 接口。

[http://projects.csail.mit.edu/spatial/Stanford_Parser](http://projects.csail.mit.edu/spatial/Stanford_Parser)

当运行**rake setup**先安装 jpype 时，我保持 ge

```
In file included from src/native/common/jp_reference.cpp:1:0:
src/native/common/include/jpype.h:45:17: schwerwiegender Fehler: jni.h: Datei oder     Verzeichnis nicht gefunden
Kompilierung beendet.
error: command 'gcc' failed with exit status 1
rake aborted! 
```

错误消息是英德混合的。它说：严重故障：jni.h：找不到文件或目录。

当我尝试安装 stanford-parser 本身时，也会发生同样的事情。

是的，我的系统上已经安装了 python-dev。我正在使用 Ubuntu 和 python2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:09:19.090

错误消息说您丢失了`jni.h`。您可以使用[http://packages.ubuntu.com](http://packages.ubuntu.com)上的搜索工具来查找提供缺失文件的包：

对于最新版本的 Ubuntu，Quantal (12.10)，这些软件包提供 jni.h：

```
File    Packages
/usr/lib/gcc-snapshot/lib/gcc/i686-linux-gnu/4.8.0/include/jni.h    gcc-snapshot
/usr/lib/gcc/i686-linux-gnu/4.6/include/jni.h   gcj-4.6-jdk
/usr/lib/gcc/i686-linux-gnu/4.7/include/jni.h   gcj-4.7-jdk
/usr/lib/jvm/java-1.5.0-gcj-4.6/include/jni.h   gcj-4.6-jdk
/usr/lib/jvm/java-1.5.0-gcj-4.7/include/jni.h   gcj-4.7-jdk
/usr/lib/jvm/java-1.5.0-gcj-4.8-snap/include/jni.h  gcc-snapshot
/usr/lib/jvm/java-6-openjdk-i386/include/jni.h  openjdk-6-jdk
/usr/lib/jvm/java-7-openjdk-i386/include/jni.h  openjdk-7-jdk 
```

openjdk 或 gcj 都可以；[此页面](https://unix.stackexchange.com/questions/4445/what-is-debians-stance-regarding-gcj-and-openjdk)可能有助于澄清差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:01:57.650

jni.h 是[Java Native Interface](http://en.wikipedia.org/wiki/Java_Native_Interface)头文件，因此您需要确保已安装 Java。对于 Ubuntu，有一个`openjdk-6-jdk`包，我已经确认它有可用的 require 文件。

# python - 从 Python 脚本调用 scons

> ID：15250538
> 
> 赞同：8
> 
> 时间：2013-03-06T14:53:26.513
> 
> 标签：python, scons

我是 scons 和 Python 的新手。我想知道是否有办法从 python 脚本中调用 scons。

我的 python 脚本从用户那里接受要一起编译的代码所在的目录列表（除了做一些其他不平凡的事情）。它还生成一个字符串，用作 scons 创建的可执行文件的名称。

我想将此信息从我的 python 脚本传递给 scons，然后调用 scons。有没有一种简单的方法可以做到这一点？

我可以想到以下几种可能性：

*   使用`subprocess.call("scons"...)`我不确定 scons 是否接受我需要作为命令行参数传递的所有信息
*   让python脚本写入文件。让 SConscript 解析文件并获取传递的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:17:08.997

嗯，我想理论上是可以的。`scons`可执行文件本身只是一个 python 脚本，它所做的只是在`SCons.Script.main()`修改`sys.path`变量后执行。但是你可能必须开始深入挖掘源代码才能真正理解如何让它做你想做的事情。

一个更简洁的解决方案是从 SConscript 文件中调用您的脚本，这可能是预期的用途，并且应该更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:10:33.123

我已经使用`subprocess.call()`python 函数来封装我正在处理的特定项目所需的有点长且复杂的命令行参数。有些人认为调用应该更简单，以便不需要封装它，但这是一个不同的主题:)

除了使用命令行参数之外，要考虑的一种选择是使用[这里](http://www.scons.org/doc/2.2.0/HTML/scons-user/c2092.html#AEN2132)`SCONSFLAGS`提到的环境变量。就个人而言，我不喜欢使用这个选项。

您需要的所有选项都可以作为命令行选项传入。自定义和处理 SCons 命令行参数的一个好方法是使用 SCons [AddOption()](http://www.scons.org/doc/2.2.0/HTML/scons-user/c2092.html#AEN2411)函数。`variable=value`此外，您可以使用 SCons [ARGUMENTS 字典](http://www.scons.org/doc/2.2.0/HTML/scons-user/x2445.html)获取简单的变量。其他相关的 SCons 命令行函数是[GetOption()](http://www.scons.org/doc/2.2.0/HTML/scons-user/c2092.html#AEN2158)和[SetOption()](http://www.scons.org/doc/2.2.0/HTML/scons-user/c2092.html#AEN2183)。

关于传递可执行文件名称的字符串：SCons 可能不喜欢这样。至少，考虑一下您使用特定的可执行字符串执行脚本一次，然后使用不同的字符串执行第二次，然后您想要清理，如果 SCons 没有使用相同的可执行文件名称执行，您最终可能会留下可执行文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:02:40.740

感谢您的回答。我最终使用了这种方法：

python 脚本将选项列表写入文本文件，将其关闭，然后`scons -f MySConscript_file`使用子进程调用进行调用。SConstruct 将文本文件中的值读取到列表中，并使用它们。

# zend-framework2 - 将 ZF2 站点部署到共享主机

> ID：15250542
> 
> 赞同：1
> 
> 时间：2013-03-06T14:53:29.133
> 
> 标签：zend-framework2

当您将 Zend Framework 网站部署到共享主机时，通常无法将 DocumentRoot 更改为指向网站的 public/ 文件夹。因此，该网站的 URL 现在是[http://www.example.com/public/](http://www.example.com/public/)。这看起来不太专业，所以我想删除它。到目前为止，我一直在使用 ZF1，Rob Allen 在他的博客[http://akrabat.com/zend-framework/zend-framework-on-a-shared-host/](http://akrabat.com/zend-framework/zend-framework-on-a-shared-host/)上提供了一种方法。我试图为 ZF2 修改这个。他建议在根目录中放置一个 index.php 文件，其中包含以下内容：

`include 'public/index.php';`

完成此操作后，[http://www.example.com](http://www.example.com)可以正常打开索引页面，但 CSS 链接已损坏。Rob 添加了一个控制器插件来将 baseUrl 重置为 /public 以处理面向公众的 CSS 和图像文件等。为此，我在 ZF2 中找到了来自 Matthew Weier O' Phinney [http://zend-framework-community.634137 的项目。 n4.nabble.com/Setting-the-base-url-in-ZF2-MVC-td3946284.html](http://zend-framework-community.634137.n4.nabble.com/Setting-the-base-url-in-ZF2-MVC-td3946284.html)他描述了如何设置baseUrl。根据他的代码，我将其添加到 modules/Application/Module.php

```
class Module {
    public function onBootstrap(MvcEvent $e) {
        $config          = $e->getApplication()->getServiceManager()->get('config');
        $router          = $e->getApplication()->getServiceManager()->get('router');        
        $router->setBaseUrl($config['base_url']);
    }
} 
```

base_url 键在 modules/Application/configs/module.config.php 中设置：

`'base_url' => '/public'`

我能够转储路由器对象并确认在此阶段正确设置了 base_url。不幸的是，现在[http://www.example.com](http://www.example.com)不再打开索引页面并给出 404 路由错误。

有没有人能告诉我我做错了什么或指出我在共享托管环境中运行 ZF2 站点的正确方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:18:58.923

你在使用骨架应用程序吗？

这似乎有点过头了，肯定比这简单得多。

将所有内容从公共移动到根

更改 index.php

```
<?php
/**
 * This makes our life easier when dealing with paths. Everything is relative
 * to the application root now.
 */
//chdir(dirname(__DIR__));
chdir(__DIR__);

// Setup autoloading
require 'init_autoloader.php';

// Run the application!
Zend\Mvc\Application::init(require 'config/application.config.php')->run(); 
```

简单的。

如果您正在运行这样的应用程序，您可能希望使用 htaccess 等阻止对某些 Zend Framework 文件夹的直接访问

# php - 在 PHP 中单击时使用链接 url

> ID：15250545
> 
> 赞同：0
> 
> 时间：2013-03-06T14:53:35.573
> 
> 标签：php, vb.net

我想使用在**VB.net**程序中单击的链接的 URL。如何从浏览器 url 栏中获取 url 并在我的**PHP**程序中使用它？

**例子：**

**VB.net** - 单击链接，然后使用网络浏览器打开

```
url: www.something.com/id=^%$#@&var2=13lfhd3f4gt 
```

**PHP** - 将链接放在变量或其他东西中，以便我可以使用explode命令从URL本身获取`id`and`var2`

我需要这些变量从我的数据库中输出某个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:57:51.970

这个问题有您正在寻找的答案，用于在 PHP 中获取 url： [Get the full URL in PHP](https://stackoverflow.com/questions/6768793/php-get-the-full-url)

虽然对于获取`id`and ，在 php.ini 中使用变量`var2`会更简单。`$_GET`那你就不用解压url和处理它了。只需将 'com' 之后的 '/' 更改为 ? 比如：www.something.com?id=^%$#@&var2=13lfhd3f4gt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:56:20.720

您可以使用例如执行此操作。`$_SERVER`全局变量。请参考[手册](http://www.php.net/manual/en/reserved.variables.server.php)

# sql-server - 尽管索引 MSSQL 2005，但更新速度非常慢

> ID：15250556
> 
> 赞同：0
> 
> 时间：2013-03-06T14:54:05.620
> 
> 标签：sql-server, tsql, sql-server-2005, indexing

编辑：我们正在移动服务器，我刚刚在新服务器上进行了测试。那里没有性能问题。这似乎归结为一个动力不足、组织不善的服务器。

昨晚我们的一个进程突然运行得很慢。缓慢的步骤被追踪到一个表上的更新语句，该表被承认不是太聪明地索引。

所以今天我已经为所有涉及的表添加了索引，但我的性能仍然很糟糕。我真的不明白——可能我还在做一些不太聪明的事情。欢迎任何建议。

更新如下：

```
update test_HDM_RTT
set patient_district_no = b.legacy_number
from test_HDM_RTT a
inner join PHD.migration.PatScope b
on a.patient_pas_no = b.TrustNumber 
```

patscope 是 2474147 行，test_hdm_rtt 是 815278

表的定义：

```
CREATE TABLE [dbo].[test_HDM_RTT](
    [pk_episode_id] [int] NULL,
    [pk_event_id] [int] NOT NULL,
    [activity_date] [datetime] NULL,
    [activity_datetime] [datetime] NULL,
    [activity_subtype1] [nvarchar](50) NULL,
    [activity_subtype1_code] [nvarchar](50) NULL,
    [activity_subtype2] [nvarchar](50) NULL,
    [activity_subtype2_code] [nvarchar](50) NULL,
    [activity_type] [nvarchar](50) NULL,
    [activity_type_code] [nvarchar](50) NULL,
    [clock_start_date] [datetime] NULL,
    [clock_stop_date] [datetime] NULL,
    [dir_code] [nvarchar](10) NULL,
    [div_code] [nvarchar](10) NULL,
    [episode_id_ext] [nvarchar](50) NULL,
    [episode_id_appt] [nvarchar](50) NULL,
    [episode_id_ref] [nvarchar](50) NULL,
    [episode_id_ref_medway] [nvarchar](50) NULL,
    [episode_id_wl] [nvarchar](50) NULL,
    [erod] [datetime] NULL,
    [nhs_number] [nvarchar](20) NULL,
    [patient_id] [int] NULL,
    [patient_district_no] [nvarchar](20) NULL,
    [patient_pas_no] [nvarchar](50) NULL,
    [pathway_id] [nvarchar](50) NULL,
    [pct_code] [nvarchar](10) NULL,
    [ref_source_code] [nvarchar](10) NULL,
    [rtt_episode_id] [nvarchar](50) NULL,
    [rtt_outcome_code] [nvarchar](50) NULL,
    [rtt_outcome_desc] [nvarchar](50) NULL,
    [rtt_start_date] [datetime] NULL,
    [rtt_start_ind] [nvarchar](10) NULL,
    [rtt_stop_date] [datetime] NULL,
    [site_code] [nvarchar](10) NULL,
    [spec_natcode] [nvarchar](10) NULL,
    [spec_pascode] [nvarchar](10) NULL,
    [transfer_text] [nvarchar](100) NULL,
    [op_rtt_count] [int] NULL,
    [app_rec_date] [datetime] NULL,
    [cons_code] [varchar](10) NULL
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

USE [PIP]
/****** Object:  Index [pk_event_id_clustered]    Script Date: 03/06/2013 14:46:52 ******/
CREATE CLUSTERED INDEX [pk_event_id_clustered] ON [dbo].[test_HDM_RTT] 
(
    [pk_event_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

USE [PIP]
/****** Object:  Index [idx_episode_id_appt]    Script Date: 03/06/2013 14:46:52 ******/
CREATE NONCLUSTERED INDEX [idx_episode_id_appt] ON [dbo].[test_HDM_RTT] 
(
    [episode_id_appt] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

USE [PIP]
/****** Object:  Index [idx_episode_id_ref]    Script Date: 03/06/2013 14:46:52 ******/
CREATE NONCLUSTERED INDEX [idx_episode_id_ref] ON [dbo].[test_HDM_RTT] 
(
    [episode_id_ref] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

USE [PIP]
/****** Object:  Index [idx_episode_id_wl]    Script Date: 03/06/2013 14:46:52 ******/
CREATE NONCLUSTERED INDEX [idx_episode_id_wl] ON [dbo].[test_HDM_RTT] 
(
    [episode_id_wl] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

USE [PIP]
/****** Object:  Index [patient_pas_no]    Script Date: 03/06/2013 14:46:52 ******/
CREATE NONCLUSTERED INDEX [patient_pas_no] ON [dbo].[test_HDM_RTT] 
(
    [patient_pas_no] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

和

```
USE [PHD]
GO

/****** Object:  Table [migration].[PatScope]    Script Date: 03/06/2013 14:47:57 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [migration].[PatScope](
    [RID] [varchar](7) NOT NULL,
    [Number] [varchar](17) NOT NULL,
    [TrustNumber] [varchar](10) NULL,
    [NumberType] [nvarchar](10) NULL,
    [legacy_number] [varchar](10) NULL
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

USE [PHD]
/****** Object:  Index [TrustNoClustered]    Script Date: 03/06/2013 14:47:57 ******/
CREATE CLUSTERED INDEX [TrustNoClustered] ON [migration].[PatScope] 
(
    [TrustNumber] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

USE [PHD]
/****** Object:  Index [TrustNo]    Script Date: 03/06/2013 14:47:57 ******/
CREATE NONCLUSTERED INDEX [TrustNo] ON [migration].[PatScope] 
(
    [TrustNumber] ASC,
    [Number] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

USE [PHD]
/****** Object:  Index [TrustNumber_legacy_lookup]    Script Date: 03/06/2013 14:47:57 ******/
CREATE UNIQUE NONCLUSTERED INDEX [TrustNumber_legacy_lookup] ON [migration].[PatScope] 
(
    [TrustNumber] ASC,
    [legacy_number] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:56:04.447

就个人而言，我只会在值与现有值不同时更新。那应该加快查询

```
update test_HDM_RTT
set patient_district_no = b.legacy_number
from test_HDM_RTT a
 inner join PHD.migration.PatScope b
 on a.patient_pas_no = b.TrustNumber
where a.patient_district_no <> b.legacy_number 
```

我还会检查`EXPLAIN`结果 ( `ctrl + l`) 您的查询可能使用了错误的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:32:42.763

显示执行计划并查看该计划是否使用索引。如果没有，您可以强制它使用特定索引：

```
SET ANSI_NULLS OFF
GO

update test_HDM_RTT
set patient_district_no = b.legacy_number
from test_HDM_RTT a
inner join PHD.migration.PatScope b WITH (INDEX(TrustNumber_legacy_lookup))
on a.patient_pas_no = b.TrustNumber
where a.patient_district_no <> b.legacy_number 
```

您会想看看是否需要强制启用索引，`test_HDM_RTT`因为它看起来已经开始进行索引扫描`TrustNumber_legacy_lookup`以获取其数据。

# gtk - 如何更改从 glade 文件中捕获的值？

> ID：15250560
> 
> 赞同：0
> 
> 时间：2013-03-06T14:54:14.953
> 
> 标签：gtk, glade

在我用glade设计GUI之后，我想写一些代码，例如我想改变glade中标签的值，我该怎么做？我可以使用哪个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:18:42.233

您需要在代码中引用（[gtk_builder_get_object](https://developer.gnome.org/gtk3/3.6/GtkBuilder.html)）这些，然后您可以对它们使用标准的 API 调用集（因此这取决于您的小部件类型）。

# javascript - JavaScript - 更新 HTML 的内容 当光标悬停在 HTML5 画布上的图像上时标记

> ID：15250562
> 
> 赞同：0
> 
> 时间：2013-03-06T14:54:18.060
> 
> 标签：javascript, mouseover

我有一个 HTML5 画布，上面显示了许多图像。我使用 KineticJS 库的本地副本将图像绘制到画布上（我正在使用本地副本，因为我想稍微更改它提供的功能）。

我现在想编写一个函数，`<p></p>`当检测到光标悬停在我在画布上显示的特定图像上时，该函数将更新 HTML 标记中显示的文本。

我写的函数是这样的：

```
function cursorOverAssetsBox(mouseX, mouseY){
if((mouseX >= assetsDescriptionBox.img_x && mouseX <= assetsDescriptionBox.img_x + assetsDescriptionBox.img_width) &&
    (mouseY >= assetsDescriptionBox.img_y && mouseY <= assetsDescriptionBox.img_height))
    document.getElementById('tipsParagraph').innerHTML = tips[34];
} 
```

`mouseX`并且`mouseY`是全局变量，我已经`assetsDescriptionBox`使用该行定义了变量

```
var assetsDescriptionBox = document.getElementById("assetBox"); 
```

'tipsParagraph' 是我试图替换其 innerHTML 的段落的 ID，并且`tips[34]`是 JS 数组中的一个元素，其中包含我要在段落中显示的文本

“assetBox”是我为已包含在我的 HTML 的隐藏部分中的图像提供的 ID。该图像按预期显示在画布上，但是，每当我将光标悬停在该图像上时，我都会收到一个控制台错误，告诉我“assetsDescriptionBox 未定义”...

我不知道为什么会这样……我不是用这条线声明的`var assetsDescriptionBox = ...`吗？它抱怨的那一行是我`cursorOverAssetsBox`函数中的“if”语句。

有人知道我在这里做错了什么吗？

**编辑**

似乎在 Kinetic.js 文件`cursorOverAssetsBox(mouseX, mouseY);`中的`_mousemove`函数中添加对的调用已经停止在画布周围拖放图像 - 任何想法为什么会这样？

该`assetsDescriptionBox`变量已在以下函数中定义：

```
function drawDescriptionBoxes(){
console.log("function drawDescriptionBoxes() is drawing the description boxes");
var assetsDescriptionBox = document.getElementById("assetBox");
var liabilitiesDescriptionBox = document.getElementById("liabilitiesBox");
    var incomeDescriptionBox = document.getElementById("incomeBox");
var expenditureDescriptionBox = document.getElementById("expenditureBox");  

drawBox(assetsDescriptionBox, 70, 400, 120, 70);
drawBox(liabilitiesDescriptionBox, 300, 400, 120, 70);
drawBox(incomeDescriptionBox, 530, 400, 120, 70);
drawBox(expenditureDescriptionBox, 760, 400, 120, 70);

} 
```

此函数位于一个单独的 JS 文件中，名为“drawdescriptionboxes.js”，并已添加到我的 HTML 文件的头部，其中包含以下行`<script src="drawdescriptionboxes.js"></script>`

有人有想法么？

# java - Java - 如何调用 IP 地址来查找主机名？

> ID：15250563
> 
> 赞同：2
> 
> 时间：2013-03-06T14:54:28.633
> 
> 标签：java, dns, hostname, inetaddress

我制作的代码会自动返回主机名。

但不是每次都返回我机器的主机名。我也想在其他机器上进行检查（出于测试目的）。

我的意思是，每次我调用该方法时，它都会要求我*输入*一个 IP 地址，然后将我输入的地址的主机名返回给我。

例如：

1.  运行方法 findH(String f)
2.  我为字符串 f 输入 127.0.0.1（IP 地址/主机名）
3.  它返回我的主机名：MyPC 等（编造）。

这是我的代码：

```
import java.net.InetAddress;

public class Search
{

    public String findH(String x) throws Exception {
        InetAddress a = InetAddress.getLocalHost();
        String s = a.getHostName();
        System.out.println("Host Name is: " + a.HostName());

        return x;
    }
} 
```

提前致谢。我知道我的描述不是最好的，但如果有任何歧义，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:59:33.620

尝试

```
public String findH(String x) throws Exception {
    InetAddress addr = InetAddress.getByName(x);
    return addr.getHostName();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:58:13.120

而不是打电话给`InetAddress.getLocalHost()`你想从创建地址`x`：

```
InetAddress a = InetAddress.getByName(x); 
```

您的其余代码将保持不变..

哦，你可能不想`a.getHostName()`回来`x`

# wcf - 在一个根 url 下的虚拟目录中设置多个 WCF 服务的良好做法

> ID：15250564
> 
> 赞同：0
> 
> 时间：2013-03-06T14:54:30.503
> 
> 标签：wcf, iis

我正在设置我们的服务器来处理我们所有的 WCF Web 服务。我想知道的是，在一个根域下正确隔离每个服务的最佳实践是什么？我正在使用[http://api.ourdomain.com](http://api.ourdomain.com)之类的东西，我希望我们客户的每个 WCF 服务都被隔离在单独的虚拟目录中，例如[http://api.ourdomain.com/client1](http://api.ourdomain.com/client1). 我希望这样，如果任何一个失败/炸弹它们不会影响其他正在运行的 WCF 服务。通常我通过网站将它们隔离，但可以说这些都在一个“屋顶”下，我必须做一些 IIS 诡计来正确隔离它们。我已经设置了一个虚拟目录并将其作为自己的“应用程序”，但我收到以下错误：“无法在同一个 IIS 进程中运行两个不同版本的 ASP.NET。请使用 IIS 管理工具重新配置您的服务器以在单独的进程中运行应用程序。” 这很奇怪，因为我将它们都设置为使用 .NET 4.0 框架，所以，我不确定发生了什么。

# jquery - 在 youtube 上添加视频叠加层 with JQuery I have the page with YouTube video (object - not iframe) and need to add the image over it. All works fine in Chrome, but in IE the image is below the YouTube player. So I searched for the info and 问问题 问问题 2013-03-06T14:54:31.540 867 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have the page with YouTube video (object - not iframe) and need to add the image over it. All works fine in Chrome, but in IE the image is below the YouTube player. So I searched for the info and found that for IE I need to add param wmode="opaque" inside the youtube's . For some reason, I can't add that parameter right into HTML, I need to do it after the page is rendered. So I am doing this: Example page after rendering: <param name="movie" value="http://www.youtube.com/v/sP5ntTD2ta0">   I am adding this after document is loaded: $('.video object').append('<param name="wmode" value="opaque">'); But the image in IE is still below the YouTube player. I think that I need somehow to re-render the page, but how? (I've already tried to use wrap(), unwrap() - no success, sorry I am "green"). Since your Java class doesn't resemble your JSON in any way, shape or form ... you're going to have a problem with that. Problem #1: OperationResult should be an int Problem #2: You're declared ResultData as an Object ... Java doesn't work like that. You need your POJO to match the JSON: public class ReturnData { public ReturnData() { OperationResult = Result.Failed; Messages = "An Error Occured"; UpdateAvailable = "0"; ResultData = ""; } public int OperationResult; public String Messages; public String UpdateAvailable; public MyResultData ResultData; } class MyResultData { public String SessionId; public String UserName; public String AccountId; public List <string>Roles; public String DisplayName; public int Status; public int Type; } ReturnData rd = new Gson().fromJson(jsonString, ReturnData.class); I'd also consider using Gson's @SerializedName("name") annotation to convert the PascalCase field names in your JSON to camelCase field names in Java. @SerializedName("OperationResult") public int operationResult; jqueryhtmlyoutube 4 1 回答 1 This answer is useful 0 您可以尝试使用 HTML5 视频标签。         

<http://www.youtube.com/v/sP5ntTD2ta0>

   这使得元素的样式以及您放置在其顶部的其他 div 更容易。 http://www.w3schools.com/html/html5_video.asp 于 2013-03-06T15:38:12.680 回答 Related 3 c# - 在字符串上使用 += 的任何问题 1 wordpress - 如何在wordpress中将帖子插入页面？使用 [简码] 2 android - 如何打开一个只占据三分之二屏幕的活动？屏幕的其余部分显示父活动 1 android - 如何在 google play 中为私人频道添加应用程序 2 perl - 静态链接 DBD::Pg（针对 libpq.so）但针对 Perl 动态链接？ 1 javascript - 为什么此指令中的所有键绑定都被最后一个覆盖？ 1 kendo-ui - Kendo UI Grid Hide Column.Template 1 c# - C# 到 VB 地址 1 grails - 强制 Grails 重新制作链接 3 java - 在 Android 中使用主题 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15250565
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, html, youtube

I have the page with YouTube video (object - not iframe) and need to add the image over it. All works fine in Chrome, but in IE the image is below the YouTube player. So I searched for the info and found that for IE I need to add `param wmode="opaque"` inside the youtube's `<object>`.

For some reason, I can't add that parameter right into HTML, I need to do it after the page is rendered. So I am doing this:

Example page after rendering:

```
<span class="video">
<object type="application/x-shockwave-flash" style="width:521px; height:427px;" data="http://www.youtube.com/v/sP5ntTD2ta0">
<param name="movie" value="http://www.youtube.com/v/sP5ntTD2ta0" />
</object>
</span> 
```

I am adding this after document is loaded:

```
$('.video object').append('<param name="wmode" value="opaque"/>'); 
```

But the image in IE is still below the YouTube player.

I think that I need somehow to re-render the page, but how? (I've already tried to use `wrap()`, `unwrap()` - no success, sorry I am "green").

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:38:12.680

您可以尝试使用 HTML5 视频标签。

```
<video id="video" width="521px" height="427px" controls="controls" preload="auto">   
    <source src="http://www.youtube.com/v/sP5ntTD2ta0" /> 
</video> 
```

这使得元素的样式以及您放置在其顶部的其他 div 更容易。

[http://www.w3schools.com/html/html5_video.asp](http://www.w3schools.com/html/html5_video.asp)</string>

# php - 表单发布后留在同一页面上

> ID：15250571
> 
> 赞同：0
> 
> 时间：2013-03-06T14:54:46.883
> 
> 标签：php, forms, action

当您单击发送时，会弹出一个窗口，说明是否发送成功。这就是我想要发生的一切，但此时弹出窗口出现并且在用户按下的窗口中发送它进入操作调用的 php 页面，我如何停止该窗口进入 php 页面并且只是有弹出窗口出现？

表格代码：

```
<form method="post" class="contact-form" action="php/callback.php" >
                <input name="name" type="text" id="formbox" value="Name" onfocus="(this.value == 'Name') && (this.value = '')" onblur="(this.value == '') && (this.value = 'Name')"/><br />
                <input name="number" type="text" id="formbox" value="Number" onfocus="(this.value == 'Number') && (this.value = '')" onblur="(this.value == '') && (this.value = 'Number')"/><br />
                <input type="submit" value="Send" id="formbutton">
    </form> 
```

php代码：

```
<?php

$name = $_POST['name'];
$number = $_POST['number'];

$to = "email@email.co.uk";
$subject = "Call Back Enquiry";
$message = "Hi Raymond, someone that came to your website wants you to call them back, their name is '$name' and their number is '$number'";
$from = "Your Website";
$headers = "From:" . $from;
$send_contact = mail($to,$subject,$message,$headers);

if($send_contact){
echo "<script>alert('We will contact you shortly');</script>";
}
else {
echo "<script>alert('Something went wrong, try again!');</script>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:56:34.557

使用带有 AJAX 的 jQuery 创建不涉及 POST 到另一个页面的无缝表单。

`alert()`比使用 jQuery UI 或 Bootstrap 等 UI 框架创建的用户友好的弹出窗口更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:04:17.977

我会通过普通按钮来做到这一点，即。`<input type="button" />`不`submit`，没有形式。在`onclick`我打开一个新窗口（弹出阻止程序呢？），里面有表格，在同一个事件过程中，我发送（仍然通过 Javascript）我的字段值，例如。`win.getElementById[someControlName].value=document.getElementById(sourceControlName).value`. `win`是新窗口的变量，`document`而是开启者的窗口。然后，如果我准备好了，仍然在同一事件中，我调用`win.forms[0].submit()`.

我没有测试过，可能有些错误，但主要思想很清楚，我希望。

# apache - 为什么我的工作文件可以在本地工作，但不能在我的虚拟主机服务器上工作？

> ID：15250573
> 
> 赞同：1
> 
> 时间：2013-03-06T14:54:51.937
> 
> 标签：apache, tomcat, web-applications, war, web-hosting

我开发了一个网站并在 Dailyrazor 上获得了一个 Tomcat 帐户。当我从命令行启动 Tomcat 并将我的 war 文件粘贴到 Apache 的 webapps 文件夹中时，我的网站运行良好。我通过 访问它`http://localhost:8080/dkashtanartportfolio/`。

现在应该像在 DailyRazor Tomcat 服务器上的 webapps 文件夹中删除战争一样简单吗？我希望能够通过 访问我的网站`http://www.<domain-name>.com/<war-file-name>/`，它应该看起来像`http://www.dkartportfolio.com/dkashtanartportfolio/`

我收到 404 错误，我不知道为什么？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:11:49.853

某些 DailyRazor 帐户不允许自动部署。所以上传war后需要重启Tomcat。我使用 shell 执行 tomcat_manage stop，然后执行 tomcat_manage start。您也可以通过打开帮助票来请求重新启动。

出于某种原因，我的帐户希望战争出现在 public_html 而不是 webapps 中。我有一个旧帐户，所以他们可能改变了新帐户的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T06:17:57.317

您需要仔细查看 tomcat/conf/server.xml 并确保您指定了正确的 app 文件夹路径。另外你需要记住，如果你有共享的tomcat，你需要在请求重启tomcat之前解压你的war文件——它不会自动解压。

# objective-c - resizableImageWithCapInsets: resizingMode: UIImageResizingModeTile 不工作

> ID：15250576
> 
> 赞同：3
> 
> 时间：2013-03-06T14:54:56.863
> 
> 标签：objective-c, image-resizing

UIImage 的`resizableImageWithCapInsets`方法对于带有圆角的标准矩形按钮来说非常好，但我正在尝试创建一个看起来像云的按钮，边缘不均匀。我无法完全理解绘制或创建它的最佳方式，或者当我将它放入我的应用程序时如何拉伸它。我在谈论这样的事情：

![在此处输入图像描述](../Images/61c44092e57d52b2d133b4b98dc6339c.png)

云两侧的气泡不应拉伸，但无论按钮需要长/短，都会创建新气泡。例如，如果按钮需要是此图像的一半大小，则只会显示 2 个气泡，但如果需要更高，则可能超过此处的 5 个，它会根据需要添加和删除它们. 我会设置最小尺寸，以便至少有一个气泡始终存在，如果它太小，可以防止出现问题。如果需要，气泡本身可以平铺。

从软件开发或图形设计的角度来看，有人对我如何实现这种效果有任何建议吗？

**编辑：**

我试图用下面的图片和下面的代码来做到这一点，它给出的结果就像这里的图片一样。图像的大小甚至都不合适，更不用说平铺了。我已经验证了图像的框架也比这里显示的要大。这里真的很困惑！

`cappedCloud = [[UIImage imageNamed: @"cloud.png"] resizableImageWithCapInsets: UIEdgeInsetsMake(9, 9, 9, 9) resizingMode: UIImageResizingModeTile];`

```
[[cell.cloudButton imageView] setContentMode: UIViewContentModeScaleToFill];
[cell.cloudButton setImage: cappedCloud forState: UIControlStateNormal];
[cell.cloudButton setAlpha: 0.85f]; 
```

![在此处输入图像描述](../Images/e1a97f517d6342ccffc667304eac7fb1.png)

![在此处输入图像描述](../Images/a9f33477f32f8704969f68ca0b34367b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:58:40.147

您可能想研究如何使用创建平铺[可调整大小的图像](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)

```
- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets resizingMode:(UIImageResizingMode)resizingMode 
```

使用稍微修改过的代码版本，我能够将图像平铺在按钮上，尽管它平铺得不是很好：

```
UIImage* cappedCloud = [[UIImage imageNamed: @"cloud.png"] resizableImageWithCapInsets: UIEdgeInsetsMake(9, 9, 9, 9) resizingMode: UIImageResizingModeTile];

[cloudButton setBackgroundImage:cappedCloud forState:UIControlStateNormal];
[cloudButton setAlpha: 0.85f];

cloudImage.image = cappedCloud; 
```

![在此处输入图像描述](../Images/94643fa79ed9ffb201173b55de8a30aa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T10:12:23.943

拉伸先在垂直方向进行，然后在水平方向进行（反之亦然）。因此，考虑不应该拉伸的垂直方向和水平方向的左右偏移，提供顶部和底部偏移。

# spring - Spring Controller is not invoked from jsp

> ID：15250578
> 
> 赞同：1
> 
> 时间：2013-03-06T14:54:59.293
> 
> 标签：spring, jsp, spring-mvc, spring-security

I am trying to implement forgotpassword functionality for my application.

Before Logging in, if the user forgets the password he can recover. The recoverPassword jsp file reads the email ID and sends password to the emailID.

**My forgotPassword spring Controller is not getting invoked from JSP file, Whenever the user clicks on Recover Button login.jsp file is getting loaded again.**

We are using Spring Security 3.0 I added ForgotPassword Hyperlink on my login Page which opens a JSP file.

**recoverPass.jsp**

```
<form name="f" action="<c:url value="/all/recoveryPassword/pass" />" method="post">
        <div class="row clear">
            <div class="value">Enter your email:</div>
            <div class="parameter">
                <input type="text" name="email"/>
            </div>
            <div style="color: #FF0000;">${message}</div>
        </div>

        <br/>

        <div class="submit"><input type="submit" name="Recover" value="Recover"/>
        </div>

        <div>
            <a href="<c:url value="/jsp/login.jsp" />">Log In</a>
        </div>
    </form> 
```

**RecoverPasswordController.java**

```
@Controller
@RequestMapping("/recoveryPassword")
public class RecoveryPasswordController  extends BaseController {

    @Autowired
    private UserDAO usersDao;    

    @RequestMapping(value = "/pass", method =RequestMethod.POST)
    public String recoverPassword(@RequestParam("json") String json, ModelMap model){
       //Code to read the email ID check DB and send a new password in email         
        try {

        } catch (Exception e) {            
            model.addAttribute("error", true);
            return "d"; 
        }       
        return "redirect:/recoveryPasswordSuccess";
    }
} 
```

TO Exclude the Controller from Spring Security, I added the following in **applicationContext-security.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

      <http realm="Contacts Realm" use-expressions="true">
            <intercept-url pattern="/all/recoveryPassword/*" filters="none"/>
            <intercept-url pattern="/" access="permitAll"/>
    ..... 
```

and finally my **web.xml**

```
<servlet>
        <servlet-name>abc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/classes/applicationContext.xml,/WEB-INF/classes/remote-servlet.xml</param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>

<servlet-mapping>
        <servlet-name>abc</servlet-name>
        <url-pattern>/abc/*</url-pattern>
    </servlet-mapping> 
```

**Can Anyone please help me Resolve this issue, I have been trying to fix this problem from past 1 week.**

# php - form submitting

> ID：15250585
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:55:11.843
> 
> 标签：php

I have a form HTML/PHP, simple, name, subject and comment, which is sent to my yahoo mail, and I have two problems, textarea for comments also sends HTML tags if some one put new line (enter) how to remove that and i got server/host name in subject when receive email, is there way to make some universal subject like name of my site or something like that instead of host name?

```
if(!isset($_POST['submit']))
{
$ToEmail = 'wired@yahoo.com';
$EmailSubject = 'Pitanje sa site.com';
$mailheader = "From :". $_POST["email"]. "\r\n";
$mailheader .= "Reply to :". $_POST["email"]. "\r\n";
$mailheader .= "Ova poruka sadrzi pitanje postavljeno na www.site.com \r\n";
$MESSAGE_BODY = "Ime : " .$_POST["name"]." \r\n";
$MESSAGE_BODY .= "Email : " .nl2br($_POST["email"])." \r\n";
$MESSAGE_BODY .= "Naslov : " .$_POST["subject"]." \r\n";
$MESSAGE_BODY .= "Poruka : " .nl2br($_POST["feedback"])." \r\n";
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure");
echo "Vaša poruka je uspješno poslana! Kliknite <a href=\"index.html\">ovde</a> za početnu stranu ";
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:01:16.770

好吧，我不是很明白你的问题，但它就在这里......

1) 你想删除 HTML 标签吗？如果是这样，请使用[`strip_tags()`](http://php.net/strip_tags)函数

2）你必须发送一个标题。例如，如果你使用`mail()`函数，你应该做这样的事情：

```
$to = 'destination@example.com';
$subject = 'Subject';
$message = 'Your Message';
$headers = 'From: Your Name <email@example.com>';
mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:02:29.473

您可以从您的表单中发送电子邮件，如下所示：

```
$to = "email@host.com";
$subject = "Your subject here";
$body = "The comment values here";
if (mail($to, $subject, $body)) {
    echo("<p>Message successfully sent!</p>");
} else {
    echo("<p>Message delivery failed...</p>");
} 
```

要删除 html 新行，您可以使用该功能`str_replace("<br/>","\n", $body);`

或使用正则表达式的更好方法

```
$body = preg_replace("/<br */?>/","\n",$body); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:04:08.430

我认为您可以使用“nl2br”正确格式化文本区域。

另外，对于标头，您可以将它们格式化为您希望的格式，如果您使用带有 "From" 的标头，这应该删除服务器的名称：

```
$headers = 'From: Me <me@example.com>' . "\r\n"; 
```

然后

```
mail($to, $subject, $message, $headers); 
```

# java - 验证后失败和重定向后获取的 Servlet 转发

> ID：15250588
> 
> 赞同：1
> 
> 时间：2013-03-06T14:55:18.157
> 
> 标签：java, jsp, servlets

处理发布到 Java Servlet 的表单验证的一种策略是在验证失败时转发回原始 JSP 视图。这允许用户看到他们刚刚提交的表单的上下文中存在验证失败（可能他们没有为必填字段提供值），然后他们可以重试。但是，由于此策略不遵循众所周知的 Post-Redirect-Get 模式 ( [http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get) )，因此浏览器历史记录现在包含一个非书签页。如果用户稍后尝试通过历史记录/返回按钮访问此页面，他们将收到文档过期异常（至少在 Firefox 19 中）。这应该如何处理？有没有更好的办法？

注意：我所描述的策略实际上是在 Servlet 信息页面中推荐的：（[https://stackoverflow.com/tags/servlets/info](https://stackoverflow.com/tags/servlets/info)）。但是没有提及浏览器历史记录问题。

注意：这个问题类似：（[JSF PRG with validation error](https://stackoverflow.com/questions/14727606/jsf-prg-with-validation-error)）。它建议对帖子使用 AJAX。如果这是推荐的策略，也许我们需要更新 Servlet wiki？不完全确定这将如何从 JSF 转换为 servlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:13:54.273

据我所知，验证失败方法的转发是有缺陷的，不应该使用。而是使用其中之一：

1.  在会话中存储验证错误消息并进行重定向。

2.  使用 AJAX 提交表单

3.  使用 JavaScript 捕获客户端上的所有验证错误，并将到达服务器的验证失败视为应用程序错误，并假设有人在不使用申请表的情况下直接发布到服务器，或者申请表有错误。如果你转发到一个错误页面，你也会遇到同样的问题，但攻击者应该得到一个浏览器历史记录。如果会话可用，您可以在会话中填充错误消息并进行重定向。无论哪种方式，它都会在“正常”操作中从服务器中删除验证，并在一定程度上回避这个问题。

# dfdl - 如何在 DFDL 中创建无序列表？

> ID：15250590
> 
> 赞同：0
> 
> 时间：2013-03-06T14:55:20.257
> 
> 标签：dfdl

[数据格式描述语言](http://www.ogf.org/dfdl/)(DFDL) v 1.0的当前实现不支持无序列表。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-09T15:13:32.260

根据 DFDL 1.0 规范，IBM 的实现现在支持 dfdl:sequenceKind="unordered"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:38:17.953

是的，有一个解决方法。举个简单的例子，假设输入文本只是一组字符（a、b 和 c），它们可以以任意顺序出现。要创建无序列表，请为每个字符创建一个元素。将它们放在包含元素中，以使容器具有无限的最大出现次数，并且子元素都是选择。

从概念上讲，它看起来像这样：

```
Container Element
  Choice
    A Element
    B Element
    C Element 
```

使用鉴别器来测试每个字符是否存在。

DFDL 模式看起来像这样（部分）

```
<xsd:element name="Container" dfdl:occursCountKind="implicit"
    dfdl:terminator="" maxOccurs="unbounded" minOccurs="1" >
    <xsd:complexType>
        <xsd:choice>
            <xsd:element name="a" dfdl:length="1" dfdl:lengthKind="explicit"
                fixed="a" minOccurs="1" type="xsd:string">
                <xsd:annotation>
                    <xsd:appinfo source="http://www.ogf.org/dfdl/">
                        <dfdl:discriminator>{. eq 'a'}</dfdl:discriminator>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="b" dfdl:length="1" dfdl:lengthKind="explicit"
                fixed="b" minOccurs="1" type="xsd:string">
                <xsd:annotation>
                    <xsd:appinfo source="http://www.ogf.org/dfdl/">
                        <dfdl:discriminator>{. eq 'b'}</dfdl:discriminator>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="c" dfdl:length="1" dfdl:lengthKind="explicit"
                fixed="c" minOccurs="1" type="xsd:string">
                <xsd:annotation>
                    <xsd:appinfo source="http://www.ogf.org/dfdl/">
                        <dfdl:discriminator>{. eq 'c'}</dfdl:discriminator>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
        </xsd:choice>
    </xsd:complexType>
</xsd:element> 
```

：

# jquery - 自动播放全屏背景滑块

> ID：15250594
> 
> 赞同：0
> 
> 时间：2013-03-06T14:55:24.053
> 
> 标签：jquery, html, background, fullscreen

我正在为网站使用全屏背景 jquery 滑块，默认情况下处于**暂停**状态。

我尝试过使用 jQuery，但它对我来说并不奏效。

我还尝试使用触发方法通过在页面加载后单击“播放”按钮来覆盖当前的暂停状态

```
$(window).bind("load", function() {
  $('a#play, a.play').trigger('click');
}); 
```

但这也没有用...

我在下面粘贴可能执行该操作的 jQuery 脚本

```
jQuery(document).ready(function($){

$('body').append('<span id="body_loader"></span>');
    $('#body_loader').fadeIn(); 

//In our jQuery function, we will first cache some element and define some variables:
var $bg             = $('#background'),
    $bg_img         = $bg.find('img'),
    $bg_img_eq      = $bg_img.eq(0),
    total           = $bg_img.length,
    current         = 0,
    $next       = $('#next'),
    $prev       = $('#prev')

$(window).load(function(){
    //hide loader
    $('#body_loader').fadeOut('fast', function(){
        init();
    }).remove(); 

});

var intervalID,
    play = $('#play'),
    titleItem = $('.title-item');   

//shows the first image and initializes events
function init(){
    //get dimentions for the image, based on the windows size
    var dim = getImageDim($bg_img_eq);
    //set the returned values and show the image
    $bg_img_eq.css({
        width   : dim.width,
        height  : dim.height,
        left    : dim.left,
        top    : dim.top
    }).fadeIn('normal');

    //resizing the window resizes the $tf_bg_img
    $(window).bind('resize',function(){
        var dim = getImageDim($bg_img_eq);
        $bg_img_eq.css({
            width   : dim.width,
            height  : dim.height,
            left    : dim.left,
            top     : dim.top
        });
    });

    var activeTitle = $bg_img_eq.attr('title');
        titleItem.html(activeTitle);
        titleItem.html(function(){
            var text= $(this).text().split(" ");
            var last = text.pop();
            return text.join(" ")+ (text.length > 0 ? " <span class='word-last'>"+ last + "</span>" : last);
        });

    play.bind('click', function() {
        if($(this).hasClass('pause')) {
            clearInterval(intervalID);
            $(this).removeClass('pause').addClass('play');
        } else {
            $(this).addClass('pause').removeClass('play');
            intervalID = setInterval("$('#next').trigger('click')", 10000);
        }

    });

    //click the arrow down, scrolls down
    $next.bind('click',function(){
        if($bg_img_eq.is(':animated'))
            return false;
            scroll('tb');
    });

    //click the arrow up, scrolls up
    $prev.bind('click',function(){
        if($bg_img_eq.is(':animated'))
        return false;
        scroll('bt');
    });
} 
```

保存图像的 div 的类和 id 是`background`，播放按钮类和 id 是`play`。

我正在处理的模板的链接[http://xhtml.webtemplatemasters.com/style/dark/index.html#](http://xhtml.webtemplatemasters.com/style/dark/index.html#)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:03:22.830

作为替代方案，您也可以使用此插件。

[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

[演示](http://buildinternet.com/project/supersized/slideshow/3.2/demo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:08:26.980

将此添加到您的 general.js 文件中

```
play.trigger('click'); 
```

如果是 Wordpress 模板，那么

```
if(slide_autostart){ 
play.trigger('click'); 
} 
```

# ruby - 双管道 ||= 运算符在控制台中工作，但在服务器中不工作

> ID：15250595
> 
> 赞同：0
> 
> 时间：2013-03-06T14:55:26.097
> 
> 标签：ruby, ruby-on-rails-3

```
class Test
  def settings
   @setting ||= load_user_env
  end

  def load_user_env
   {one: 'Test'}
  end
end

t = Test.new
t.settings
t.settings 
```

在rails控制台`load_user_env`方法中调用一次，但在WEBrick上的开发环境中它每次都被调用？

怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:38:40.113

**编辑：**实例变量应该只保留在每个请求的上下文中，因此每次发出请求时都应该重新初始化它。在您的控制台中，当您这样做时`t = Test.new`，您会创建该类的单个实例，这就是为什么`load_user_env`只被调用一次的原因。您可以使用一个类变量`@@setting`，它应该在 的请求和实例中是持久的`Test`，但我不确定在开发模式下重新加载类会如何影响它。

Rails 在每次请求时都会在开发模式下重新加载类。在控制台中，除非您调用`reload!`.

如果你`config.cache_classes = true`为你的开发环境设置，它不应该再重新加载它们，它也应该让它更快。缺点是每次进行更改时都必须重新启动服务器。

# emacs - 带有嵌入式代码块和 AucTeX 的 LaTeX

> ID：15250598
> 
> 赞同：0
> 
> 时间：2013-03-06T14:55:42.517
> 
> 标签：emacs, org-mode, auctex, org-babel

我正在我的 org 文件中编写 LaTeX，并使用`src_lang` [内联代码块](http://orgmode.org/worg/org-contrib/babel/intro.html#sec-5-4)（在我的情况下为 lang=lisp）进行嵌入式代码评估。这在使用裸 LaTeX 进行导出时效果很好，但我希望 AUCTeX 编辑和突出显示在 org 文件中的裸 LaTeX 中不可用。我能看到获得 AUCTeX 的唯一方法是使用[LaTeX 源代码块](http://orgmode.org/worg/org-contrib/babel/languages/ob-doc-LaTeX.html)；这就是我想要的，但现在内联代码块没有展开；相反，它们按字面意思导出到 LaTeX。有没有办法让一个可导出的 LaTeX 源代码块在导出时扩展内联代码块，或者以某种方式让 AuCTeX 编辑功能与内联 src_lang 代码块得到扩展？

例子：

```
* This is an example
#+BEGIN_SRC latex
This is an example.  The sum of 2 and 2 is $src_lisp{(+ 2 2)}$.
#+END_SRC 
```

产生（为了清楚起见，删除了很多序言）

```
\begin{document}
\maketitle
\setcounter{tocdepth}{3}
\tableofcontents
\vspace*{1cm}
\section{This is an example}
\label{sec-1}

This is an example.  The sum of 2 and 2 is $src_lisp{(+ 2 2)}$.

\end{document} 
```

然而

```
* This is an example
This is an example.  The sum of 2 and 2 is $src_lisp{(+ 2 2)}$. 
```

生产

```
\begin{document}

\maketitle

\setcounter{tocdepth}{3}
\tableofcontents
\vspace*{1cm}
\section{This is an example}
\label{sec-1}

This is an example.  The sum of 2 and 2 is $=4=$.

\end{document} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-27T04:56:25.137

我知道这是一个很晚的答案，但我认为[CDLaTeX](http://orgmode.org/manual/CDLaTeX-mode.html)可能是您正在寻找的。

# typo3 - TYPO3：在 TER 中上传我的扩展

> ID：15250599
> 
> 赞同：2
> 
> 时间：2013-03-06T14:55:47.150
> 
> 标签：typo3

我不确定这个问题是否属于 StackOverflow，但我不知道在哪里发布它。

我已经构建了一个 TYPO3 扩展，我认为它可能对其他人有用，所以我想知道将它上传到 TYPO3 扩展存储库 (TER) 的协议是什么。我找不到任何类型的文档。

IRC 中有人说“他认为”我必须签署某种协议，但由于他不确定，而且我觉得这很奇怪，我想看看其他人是否可以给我一个更可靠的答案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:10:33.367

在 TYPO3 网站上首次注册，

然后转到[http://typo3.org/extensions/extension-keys/](http://typo3.org/extensions/extension-keys/)并为您的分机注册新的唯一密钥

然后从您的后端 - ExtensionMenager 使用您的凭据登录并上传

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T07:17:30.620

使用“扩展上传器”扩展[http://typo3.org/extensions/repository/view/extension_uploader](http://typo3.org/extensions/repository/view/extension_uploader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T13:25:08.213

实际上有很多方法可以做到这一点。最基本的方式就像 biesior（和 Fedir）所描述的那样。在typo3.org 上手动上传。

如果你想直接从你的 git repo 上传它，你可以使用 github 和一个将所有标记版本自动上传到 TER 的服务。

它的精彩描述在这里：[http ://typo3worx.eu/2016/07/5-ways-to-publish-a-typo3-extension/](http://typo3worx.eu/2016/07/5-ways-to-publish-a-typo3-extension/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-21T13:09:57.757

自 2020 年 12 月起，TYPO3 扩展存储库的新 REST API 可用。现在更容易将扩展上传到 TER。您不必使用登录名和密码，但可以生成访问令牌并使用它来发布扩展。

还有一个官方工具可以帮助您与 TER API 进行通信： [https ://github.com/TYPO3/tailor](https://github.com/TYPO3/tailor)

您可以在此处阅读有关新 API 和其他改进的更多信息： [https ://typo3.org/article/a-new-way-to-manage-your-extensions-in-the-ter](https://typo3.org/article/a-new-way-to-manage-your-extensions-in-the-ter)

# php - 肥皂在php中抛出函数名错误

> ID：15250603
> 
> 赞同：0
> 
> 时间：2013-03-06T14:56:09.340
> 
> 标签：php, soap, wsdl

我正在使用 PHP 从肥皂调用以下 wsdl url

```
 $response = new SoapClient("http://192.168.1.8:8080/myAPI/ws/TESTWS?wsdl"); 
```

我正在使用soapclient返回值检查函数名称

```
 $soapFunctions = $response->__getFunctions();
 print_r($soapFunctions); 
```

它返回

```
Array
(
 [0] => sampleMethodResponse sampleMethod(sampleMethod $parameters)
) 
```

然后我使用上面的返回函数名称“sampleMethod”使用 __soapcall 函数将值发送到 wsdl 函数。

```
try{
$soapstr = $response->__soapCall("sampleMethod", array( 'userId'       => "8561",
            'value'       => "test",
            'type'       => "1",
            'send'       => "1",
    ));
     echo "Response:\n" . $soapstr->__getLastResponse(). "\n";
}catch (Exception $e){
    echo $e->getTraceAsString();
} 
```

上面的代码返回以下错误

```
#0 /home/karthik/git/PHPFrontend/easymedmobile.com/htdocs/wsdl/index.php(56): SoapClient->__soapCall('sampleMethod', Array)
#1 {main} 
```

帮助解决这个问题，我在这个文件中做错了什么。

# android - 无法在 android 中将 google api 设置为目标

> ID：15250604
> 
> 赞同：1
> 
> 时间：2013-03-06T14:56:15.200
> 
> 标签：android, google-api, target, avd

我已经安装了 google API，但是当我尝试将模拟器的目标更改为 google API 时，我没有更改目标的选项。是否有另一种方法可以将目标设置为 google API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:10:21.890

它应该与新的avd一起使用。看看[这个][1]

如果您没有看到可供选择的 API，则可能您的 google API 安装不正确。

ps：手机发的，可能链接不能点击

[1]url="eagle.phys.utk.edu/guidry/android/configureAVD.html"

# html - 边框图像填充很奇怪

> ID：15250606
> 
> 赞同：1
> 
> 时间：2013-03-06T14:56:18.753
> 
> 标签：html, css

当我将边框图像与填充一起使用时，它不会作为完整图像填充，而是单独填充，并且由于填充上的纹理，它看起来很糟糕。我能做些什么？

```
 <td class="heading">
        This is a heading
    </td>

<style>
.heading {
padding:10px;
border-style: solid; 
border-width: 27px 51px 27px 27px; 
-moz-border-image: url('http://img24.imageshack.us/img24/4189/brownfill.png') 27 51 27 27 repeat; 
-webkit-border-image: url('http://img24.imageshack.us/img24/4189/brownfill.png') 27 51 27 27 repeat;
 -o-border-image: url('http://img24.imageshack.us/img24/4189/brownfill.png') 27 51 27 27 repeat; 
border-image: url('http://img24.imageshack.us/img24/4189/brownfill.png') 27 51 27 27 fill repeat;
}
</style> 
```

jsFiddle在这里：http: [//jsfiddle.net/zWygk/](http://jsfiddle.net/zWygk/)

![在此处输入图像描述](../Images/d8588e34f352cfcabfe6acab1057df60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:26:32.983

我必须同意 Jefferson 的观点，即你的形象不是一个理想的选择。因此，您的问题的确切答案是“获得不同的图像！” 如需进一步阅读，我建议查阅 Chris 的文章：[http ://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

简而言之：图像总共需要包含 9 个切片。4个角，4个实际边框/侧面，1个容器主体（可以是空白）

您还应该知道，如果您的边框宽度超过切片的高度（顶部/底部边框）或宽度（左/右边框），您的切片将被拉伸。只能使用参数 repeat/stretch 设置其他维度

# android - GreenDAO - 多列上的主键

> ID：15250609
> 
> 赞同：5
> 
> 时间：2013-03-06T14:56:22.507
> 
> 标签：android, sqlite, primary-key, greendao

GreenDAO 是否支持多列的主键？

我在两列上使用`Property`' 方法`primaryKey()`，但它不起作用。我遇到了异常：

> 引起：android.database.sqlite.SQLiteException：表“表”有多个主键

如何在多个列上创建主键？我应该编辑生成的 DAO 类吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:21:15.963

[文档](http://greendao-orm.com/documentation/modelling-entities/)说：

> 目前，实体必须有一个 long 或 Long 属性作为它们的主键。[...] 要解决此问题，您可以使用长主键并为预期的“键”属性使用唯一索引。

# jquery - 删除一行中的两个元素

> ID：15250612
> 
> 赞同：5
> 
> 时间：2013-03-06T14:56:33.327
> 
> 标签：jquery, element

有没有办法在一行中完成这个脚本？

```
$(this).next("br").remove();
$(this).remove(); 
```

我试过`$(this).remove().next("br").remove();`了，但这不起作用，因为我们要在找到下一个元素之前删除该元素。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T14:58:59.780

您可以使用[addBack()](http://api.jquery.com/addBack/)（或其前身[andSelf()](http://api.jquery.com/andSelf/)在 jQuery 1.8 之前）：

```
$(this).next("br").addBack().remove(); 
```

或者，您可以使用[end()](http://api.jquery.com/end/)返回上一组匹配的元素：

```
$(this).next("br").remove().end()
       .remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:59:06.537

```
$(this).add( $(this).next("br") ).remove(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T14:59:32.680

```
$(this).next("br").addBack().remove(); 
```

# xslt - XSLT 到 XML，其中 Attribute 匹配模式

> ID：15250615
> 
> 赞同：0
> 
> 时间：2013-03-06T14:56:37.727
> 
> 标签：xslt

我是 XSLT 的新手，如果我的问题太琐碎，请原谅。

我需要转换下面的 xml

```
<annotation text="Australia" f:abc.location.adm1="AU.00" f:aliases="AUSTRALIAN" f:abc.location.population="21515754" f:abc.location.id="2077456"/> 
```

命名值对。需要匹配部分属性，即转换任何形式为“ **f:abc** ....”的属性。

例如输出应该是。

```
<property><name>location.adm1</name><value>AU.00</value></property>
<property><name>population</name><value>21515754</value></property>
<property><name>location.id</name><value>2077456</value></property> 
```

试过代码

```
<xsl:template match="t:annotation[@f:abc*]"> 
```

但没有成功，请求请指导我如何创建我的 .xls 以获得所需的输出 xml。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:12:14.463

您可以通过执行以下操作来测试这些属性：

```
<xsl:template match="t:annotation[@f:*[starts-with(local-name(), 'abc.')]]"> 
```

然后你可以像这样使用模板：

```
<xsl:template match="t:annotation[@f:*[starts-with(local-name(), 'abc.')]]">
   <xsl:copy>
    <xsl:apply-templates select="@f:*[starts-with(local-name(), 'abc.')]" />
   </xsl:copy>
</xsl:template>

<xsl:template match="@f:*[starts-with(local-name(), 'abc.')]">
   <property>
      <name>
         <xsl:value-of select="substring-after(local-name(), 'abc.')" />
      </name>
      <value>
         <xsl:value-of select="." />
      </value>
   </property>
</xsl:template> 
```

# ruby-on-rails - 压缩和加密内存中的文件 Ruby/Rails

> ID：15250617
> 
> 赞同：3
> 
> 时间：2013-03-06T14:56:47.570
> 
> 标签：ruby-on-rails, ruby, encryption, zip

我试图压缩一些文件并用密码保护它们。这里的问题是我无法将文件保存在磁盘上。

我尝试使用 Rubyzip。但似乎它不支持文件加密。

我尝试使用 Zipruby，但它只允许加密磁盘上已有的文件。（我不确定这一点，但我无法在内存中找到一种方法）。

我想在 Ruby 中压缩和加密内存中的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:08:48.417

Zipruby 包括执行此操作的工具：

```
zipinmem = Zip::Archive.open_buffer(buf, Zip::CREATE) do |ar| #create zip
  ar.add_buffer('bar.txt', 'baz')
end
Zip::Archive.open_buffer(zipinmem) do |ar|
  ar.add_buffer('thing.txt', "We're modifying the archive in memory!")
end 
```

请参阅第五部分中的[文档](https://bitbucket.org/winebarrel/zip-ruby/wiki/Home)。

# iphone - 无法在 iPhone 设备的 appcelerator 中访问资源目录

> ID：15250618
> 
> 赞同：0
> 
> 时间：2013-03-06T14:56:48.560
> 
> 标签：iphone, filesystems, device, appcelerator

我在包含一些 js 文件的资源目录中有一个 lib 文件夹。在 iPhone 模拟器上，此代码运行良好，并显示其中的所有文件夹和文件。但是在部署到设备时，它会显示一个错误，指出它`dirItems`是`undefined`.

```
 var dirFullPath = Ti.Filesystem.resourcesDirectory + Ti.Filesystem.separator + 'lib';
    var dir = Titanium.Filesystem.getFile(dirFullPath);
    var dirItems = dir.getDirectoryListing();
    Ti.API.info(dirItems.length); 
```

供您参考：钛：2.1.3GA iOS：6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:54:19.803

据我所知，在真实应用程序中无法访问 iphone 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:29:38.313

如您[在此处](http://docs.appcelerator.com/titanium/latest/#!/guide/Filesystem_Access_and_Storage)阅读的那样，Ti.Filesystem.resourcesDirectory 在设备上是只读的，但在模拟器/模拟器中是读/写的。在访问 resourcesDirectory 中的文件或目录时，这种情况可能会导致错误。

为什么不使用 Ti.Filesystem.applicationDataDirectory ？

# delphi - compare screen shots and get screen coordinates of first pixel change

> ID：15250619
> 
> 赞同：3
> 
> 时间：2013-03-06T14:56:52.047
> 
> 标签：delphi

I have two screenshots taken one after another with a few seconds gap. I am comparing both the images and trying to find out if there are any differences between them. If there are any differences, i need to get the screen coordinates of that pixel change.

Can I achieve this using Delphi?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T17:23:24.800

If you have two bitmaps to compare and you need to find a position of the first different pixel, you can iterate the bitmap rows, get the bitmap pixel array for each row of both bitmaps, compare them and if they don't match, find the horizontal position of a different pixel. In code it might look like this:

```
function CompareBitmaps(ABitmap1, ABitmap2: TBitmap;
  var ADiffPixel: TPoint): Boolean;
var
  X, Y: Integer;
  Size: Integer;
  Pixels1, Pixels2: PByteArray;
begin
  // first check if both bitmaps match in size and pixel format
  Result := (ABitmap1.PixelFormat = ABitmap2.PixelFormat) and
    (ABitmap1.Width = ABitmap2.Width) and (ABitmap1.Height = ABitmap2.Height);
  // if so, then...
  if Result then
  begin
    // assign the size of one pixel
    case ABitmap1.PixelFormat of
      pf24bit: Size := SizeOf(TRGBTriple);
      pf32bit: Size := SizeOf(TRGBQuad);
    else
      raise Exception.Create('Bitmap must be 24-bit or 32-bit format!');
    end;
    // iterate all the bitmap rows    
    for Y := 0 to ABitmap1.Height - 1 do
    begin
      // get pointer to pixel data array of the same row for both bitmaps
      Pixels1 := ABitmap1.ScanLine[Y];
      Pixels2 := ABitmap2.ScanLine[Y];
      // compare those pixel data arrays; if they differ, then...
      if not CompareMem(Pixels1, Pixels2, ABitmap1.Width * Size) then
      begin
        // return negative result
        Result := False;
        // assign vertical pixel position to the output ADiffPixel parameter
        ADiffPixel.Y := Y;
        // iterate the current row to find a different pixel; after it's found
        // the pixel's horizontal position is stored to the output ADiffPixel
        // parameter; the pixel array is treated as a byte array, so there's
        // need to be a division by the pixel size
        for X := 0 to ABitmap1.Width * Size - 1 do
          if (Pixels1[X] <> Pixels2[X]) then
          begin
            ADiffPixel.X := X div Size;
            Exit;
          end;
      end;
    end;
  end
  else
    raise Exception.Create('Bitmaps must match in size and pixel format!');
end; 
```

And the example usage:

```
procedure TForm1.Button1Click(Sender: TObject);
var
  PixelPos: TPoint;
begin
  if CompareBitmaps(Image1.Picture.Bitmap, Image2.Picture.Bitmap, PixelPos) then
    ShowMessage('Bitmaps are the same!')
  else
    ShowMessage('Bitmaps are different! The first different pixel was found ' +
      'at [' + IntToStr(PixelPos.X) + '; ' + IntToStr(PixelPos.Y) + '].');
end; 
```

# c# - 通过具有 count() 进行左连接和分组的 Linq 查询

> ID：15250620
> 
> 赞同：3
> 
> 时间：2013-03-06T14:56:52.180
> 
> 标签：c#, linq

如果我有一个具有许多条件的规则并且用户选择了多个条件，我如何编写一个 linq 查询，为我提供所有规则，其中该规则中的每个条件都与用户选择的条件一起存在？

这是我目前在 SQL 中的做法：

**表**

```
rule:
  ruleId int
  categoryId int

ruleCriteria:
  ruleId int,
  criteriaId int

@userCriteria:
  criteriaId int
  categoryId int 
```

**询问**

```
SELECT
    r.ruleId
FROM dbo.rule r
INNER JOIN dbo.ruleCriteria rc ON r.ruleId= rc.ruleId
LEFT OUTER JOIN @userCriteria uc
        ON rc.criteriaId = uc.criteriaId
        AND r.categoryId = uc.categoryId
GROUP BY r.ruleId
HAVING COUNT(rc.criteriaId) = COUNT(uc.criteriaId) 
```

对于 linq 查询，我将拥有这些对象（更加非规范化，但如果有帮助，我可以将它们放在与表相同的结构中）：

```
userCriteria:
  criteriaId int
  categoryId int

ruleCriteria:
  ruleId int
  categoryId int
  criteriaId int 
```

我的目标与获取不同匹配规则列表的 SQL 查询相同。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:52:53.127

此查询生成的 SQL 比其他查询更好，而且更直接：

```
from rc in ruleCriterias
group rc by rc.ruleId into rules
where rules.All(rc => userCriterias.Any(uc =>
    uc.criteriaId == rc.criteriaId && uc.categoryId == rc.categoryId))
select rules.Key 
```

您应该确保所有列都是`NOT NULL`，因为如果不是，则必须生成额外的 SQL 来检查是否为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:12:50.280

我在[LINQPad](http://www.linqpad.net/)中使用了一些测试数据，这就是我想出的。

```
from rc in ruleCriteria
group new { rc.criteriaId, rc.categoryId } by rc.ruleId into rules
where rules.Count() == userCriteria.Count(uc =>
    rules.Contains(new { uc.criteriaId, uc.categoryId }))
select rules.Key 
```

以下是逐行解释：

1.  从中获取规则`ruleCriteria`
2.  `{ criteriaId, categoryId }`将条件分组`ruleId`并保存在`rules`
3.  对于每个完整的规则，检查匹配的`userCriteria`数量是否与规则的总数相同，这意味着用户具有所有条件。
4.  仅选择该组的键，即`ruleId`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:20:08.080

除非我误解了（因此过于简单化了问题），否则 all [.All()](http://msdn.microsoft.com/en-gb/library/bb548541.aspx)方法可能就是您所需要的。

```
var userCriteria = ; //TODO: Build user criteria
var result = context.Rules.Where(r => r.CategoryId == userCriteria.CategoryId
                                   && r.RuleCriteria.All(rc => rc.id == userCriteria.CriteriaId)); 
```

这只会返回所有包含条件都与您的条件匹配的规则。我不能保证你的 sql 虽然

# css - 我可以在调整图像大小之前检查图像大小吗？

> ID：15250621
> 
> 赞同：0
> 
> 时间：2013-03-06T14:56:54.403
> 
> 标签：css, image, less

我想写一些 Less 来检查图像的宽度/高度，然后再应用百分比缩放。

我的想法是我将拥有一个固定大小的 div，并且我希望在该 div 中居中一组图像并将它们重新调整为尽可能大，而不会被切断或意外调整 div 的大小。源图像将具有不同的大小，甚至是不同的 W/H 比率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:23:47.747

如果你申请 CSS

```
img {
    max-width:100%;
} 
```

您的图像将填充 div（如果它们比 DIV 更宽），但永远不要破坏它

# iphone - 对 nsarray 进行排序

> ID：15250630
> 
> 赞同：0
> 
> 时间：2013-03-06T14:57:20.457
> 
> 标签：iphone, ios, nsarray, nssortdescriptor

我有一个 NSArray，如下所示：

```
(
        {
        AppStatus = Appointment;
        AptEndTime = "03/06/2013  9:30 PM";
        AptStartTime = "03/06/2013  9:00 PM";
        BirthDate = "03/06/1968";
        Email = "";
        FirstName = Mobile;
        IsSpouse = 0;
        LastName = Development;
        MiddleInitial = Ap;
        PatientID = "";
        Phone = "";
        ScacntronCSVId = 937515;
        SlotID = 2;
        Timeregistered = "03/06/2013  4:12 PM";
        UserName = "Mob_03062013122612";
    },
        {
        AppStatus = Appointment;
        AptEndTime = "03/06/2013 12:30 PM";
        AptStartTime = "03/06/2013 12:00 PM";
        BirthDate = "03/06/1980";
        Email = "";
        FirstName = Test;
        IsSpouse = 0;
        LastName = Iphone;
        MiddleInitial = "";
        PatientID = "";
        Phone = "";
        ScacntronCSVId = 937514;
        SlotID = 1;
        Timeregistered = "03/06/2013  4:24 PM";
        UserName = "Tes_03062013122113";
    },
        {
        AppStatus = Walkin;
        AptEndTime = "";
        AptStartTime = "";
        BirthDate = "03/06/1990";
        Email = "";
        FirstName = Fn;
        IsSpouse = 0;
        LastName = Ln;
        MiddleInitial = "";
        PatientID = "";
        Phone = "";
        ScacntronCSVId = 937519;
        SlotID = 5;
        Timeregistered = "03/06/2013  6:40 PM";
        UserName = "FnL_03062013183612";
    },
        {
        AppStatus = Appointment;
        AptEndTime = "05/26/2013 12:30 PM";
        AptStartTime = "05/26/2013 12:00 PM";
        BirthDate = "03/06/1978";
        Email = "angad.d@technosoftcorp.com";
        FirstName = Kathy;
        IsSpouse = 0;
        LastName = Ybarra;
        MiddleInitial = "";
        PatientID = "";
        Phone = 3452345235;
        ScacntronCSVId = 937516;
        SlotID = 3;
        Timeregistered = "03/06/2013  2:57 PM";
        UserName = Rajeesth0099;
    },
        {
        AppStatus = Appointment;
        AptEndTime = "02/28/2013 10:30 AM";
        AptStartTime = "02/28/2013 10:00 AM";
        BirthDate = "03/06/1944";
        Email = "angad.d@technosoftcorp.com";
        FirstName = herohonda;
        IsSpouse = 0;
        LastName = Woodpicker;
        MiddleInitial = "";
        PatientID = "";
        Phone = 5234523523;
        ScacntronCSVId = 937517;
        SlotID = 4;
        Timeregistered = "03/06/2013  2:59 PM";
        UserName = Vinitkumar007;
    }
) 
```

我想根据字段“Timeregistered”对该数组进行排序，但我无法正确排序，我的代码如下：

```
 NSArray *sortedAllDataArray = [temp sortedArrayUsingComparator:^NSComparisonResult(NSDictionary *dict1, NSDictionary *dict2) {

        NSDateFormatter *df = [[NSDateFormatter alloc] init];

        df.dateFormat = @"MM/dd/yyyy HH:mm a";
        df.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0];

        if (appoineSorted == YES) {

            //For Ascending Order
            return [[df dateFromString:[dict1 objectForKey:@"AptStartTime"]] compare:[df dateFromString:[dict2 objectForKey:@"AptStartTime"]]];

        }else{

            //For Desending Order
            return -1 *[[df dateFromString:[dict1 objectForKey:@"Timeregistered"]] compare:[df dateFromString:[dict2 objectForKey:@"Timeregistered"]]];
        }
    }];

    temp = [sortedAllDataArray mutableCopy]; 
```

数组正在排序，但它正在排序 2.59pm、2.57pm、4.14pm、4.12pm 等，

但我希望数组按 4.14、4.12、2.59、2.57 等排序，

我正在将字符串转换为时间，但仍然面临同样的问题。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:05:02.777

如果您已经对其进行了分类或其他内容，那么您似乎想要反转排序。如果您希望它以相反的顺序排序，请返回您当前拥有的相反比较结果

```
NSArray *sortedAllDataArray = [temp sortedArrayUsingComparator:^NSComparisonResult(NSDictionary *dict1, NSDictionary *dict2) {

        NSDateFormatter *df = [[NSDateFormatter alloc] init];

        [df setDateFormat:@"MM/dd/yyyy HH:mm a"];
        [df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

        NSDate *date1 = [df dateFromString:[dict1 objectForKey:@"Timeregistered"]];
        NSDate *date2 = [df dateFromString:[dict2 objectForKey:@"Timeregistered"]];

        if (appoineSorted == YES) {
            appoineSorted = NO;
            return [date2 compare:date1];
         } else {
            appoineSorted = YES;
            return [date1 compare:date2];
         }
    }]; 
```

# c# - 在 MVC 范例中我应该将用户数据保存在哪里，以便在所有级别都可以访问它？

> ID：15250633
> 
> 赞同：2
> 
> 时间：2013-03-06T14:57:22.287
> 
> 标签：c#, asp.net-mvc-4

**背景：**

我是 MVC 的新手，正在学习如何做事。

**我正在尝试做的事情：**

我正在尝试使用户数据可用于所有操作。

**我是如何实现它的：**

*我通过在OnActionExecuting*函数中加载用户数据来实现这一点。

**我遇到的问题：**

我不知道在哪里存储我的用户数据以及如何在以后检索它（即，在操作期间）。

**当前代码：**

在这里，我正在加载当前用户。

```
 protected override void OnActionExecuting(ActionExecutingContext ctx) {
        base.OnActionExecuting(ctx);
        UserAccount user = null;
        using (UsersContext db = new UsersContext()) {
            user = db.UserProfiles.FirstOrDefault(u => u.userName.ToLower() == User.Identity.Name.ToLower());
        }
    } 
```

我如何在这些地方获得它？

```
 public ActionResult Default() {
        ViewBag.Message = user.userName;  // ????????????
        return View();
    } 
```

**可能的解决方案：**

1.  只需将其保存在参数中即可。
2.  用户 HttpContext（不确定这将如何工作，请帮助）。
3.  用户 ControllerContext （不确定这将如何工作，请帮助）。
4.  视图状态？
5.  查看包？
6.  缓存？
7.  任何其他类型的 MVC 魔法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:01:57.203

只需让您的控制器继承一些像这样的基本控制器类

```
public class AccountController : BaseController 
```

然后在 BaseController 中，您可以自由创建代表用户数据的方法或属性，它们将在 AccountController 的所有操作中可用。

```
public class BaseController : Controller
{
      public User CurrentUser
        {
            get
            {
                if (HttpContext.User == null || HttpContext.User.Identity.AuthenticationType != "Forms")
                    return null;
                if (Session["CurrentUser"] != null)
                    return (User)Session["CurrentUser"];
                var identity = HttpContext.User.Identity;
                var ticket = ((FormsIdentity)identity).Ticket;
                int userId;
                if (!int.TryParse(ticket.UserData, out userId)
                    return null;

                using (var db= new DbEntities(connectionString))
                {
                    Session["CurrentUser"] = db.Users.SingleOrDefault(u => u.ID == userId));
                }

                return (User)Session["CurrentUser"];
            }

        set { Session["CurrentUser"] = value; }
        }
} 
```

# c# - 如何在 C# 中拆分这种字符串

> ID：15250638
> 
> 赞同：0
> 
> 时间：2013-03-06T14:57:40.790
> 
> 标签：c#, .net, split

好吧，我有一个包含以下信息的文件：

> 2012 年 4 月 12 日 2012 年 6 月 12 日 XX123410116000020000118 XEPLATINOXE XX XXXXEXX XXXX PLATINOX XX $131.07

这是一个完整的行，在文件中我还有 10 行这样的，我想在 C# 中使用 split 来获得下一个结果：

```
 Line[0]= 04/12/2012
 Line[1]= 06/12/2012
 Line[2]= XX123410116000020000118
 Line[3]= XEPLATINOXE XX XXXEXX XXXX PLATINOX  XX
 Line[4]= $     131.07 
```

我尝试这样做但不起作用，请帮助我。

谢谢。

保佑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:02:33.443

我相信有人会建议一个花哨的正则表达式，但这里有一种没有它的方法：

```
string source = "04/12/2012 06/12/2012 XX123410116000020000118 XEPLATINOXE XX XXXEXX XXXX PLATINOX XX $ 131.07";
string[] split1 = source.Split('$');
string[] split2 = split1[0].Split(new char[] {' '},4);  // limit to 4 results
string lines = split2.Concat(new [] {split1[1]}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:37:14.387

好吧，有人发布这个答案，它对我有用！

```
String[] array1 = file_[count + 19].Split(new[] { " " }, 4,StringSplitOptions.RemoveEmptyEntries); 
```

在这种情况下，我不需要拆分最后一个数组：

```
array[3] 
```

因为它对我来说很好这种格式：

> XEPLATINOXE XX XXXXEXX XXXX PLATINOX XX $131.07

多谢！

保佑！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:31:57.790

2012 年 4 月 12 日 2012 年 6 月 12 日 XX123410116000020000118 XEPLATINOXE XX XXXXEXX XXXX PLATINOX XX $131.07

可以通过使用分组大括号使用正则表达式解析出来，但要获得真正可靠的结果，我们需要知道您的记录的哪些部分是一致的。

我将假设第三项永远不会有空格，第五项总是以 $ 开头

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main()
    {
        // First we see the input string.
        string input = "04/12/2012 06/12/2012 XX123410116000020000118 XEPLATINOXE XX XXXEXX XXXX PLATINOX XX $ 131.07";

        // Here we call Regex.Match.
        Match match = Regex.Match(input, @"^(\d\d\/\d\d\/\d{4}) (\d\d\/\d\d\/\d{4}) (\S+) ([^\$]+) (\$.+)$");

        // Here we check the Match instance.
        if (match.Success)
        {
            // Your results are stored in  match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value, 
            //      match.Groups[4].Value, and match.Groups[5].Value, so now you can do whatever with them
            Console.WriteLine(match.Groups[5].ToString());
            Console.ReadKey();
        }
    }
} 
```

一些有用的链接：

*   [http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx)
*   [http://msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T15:01:19.180

[String.Substring 方法 (Int32, Int32)](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

那一直存在。

示例用法：

```
String myString = "abc";
bool test1 = myString.Substring(2, 1).Equals("c"); // This is true.
Console.WriteLine(test1);
bool test2 = String.IsNullOrEmpty(myString.Substring(3, 0)); // This is true.
Console.WriteLine(test2);
try {
   string str3 = myString.Substring(3, 1); // This throws ArgumentOutOfRangeException.
   Console.WriteLine(str3);
}
catch (ArgumentOutOfRangeException e) {
   Console.WriteLine(e.Message);
} 
```

# jquery - 如何将网站缩小 25%

> ID：15250639
> 
> 赞同：2
> 
> 时间：2013-03-06T14:57:42.203
> 
> 标签：jquery, html, css

我的任务是将网站缩小 25%。意思是，所有图像和字体/元素都需要缩小 25% 的大小。

我的第一个解决方案是 jQuery，通过执行以下操作：

```
-webkit-transform: scale(.75); 
```

但是，这会引起问题，因为该站点的很多内容都是内置图像的。例如，标题现在不会扩展整个屏幕，因为它是一个固定大小的图像。页脚也有一个问题，它现在有一个巨大的边距底部（大约 500 像素），我似乎无法删除。

大家还有什么其他的解决办法吗？

到目前为止，我要么去：

A) 继续我的 jQuery 方法并尝试解决上述问题

B) 从字面上看，将所有内容缩小 25%，然后删除 jQuery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T14:59:17.403

`Literally go through and physically shrink everything by 25% and remove the jQuery.`

做这个。使用 jQuery 来做这件事是不专业的，并且会制作一个质量很差的网站，并且会让您在将来犯错误。不会花很长时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:03:06.183

*（作为对 OP 评论的回答进行推广）*

`zoom: 0.75;`身体上的CSS 怎么样？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:02:55.580

如果您使用`em`基于 - 的测量，则可以使用以下代码实现此目的：

```
html {
  font-size: 75%;
} 
```

*但是，没有*明确尺寸或以绝对单位设置尺寸的元素不会受到影响——您需要指定这些属性。

对于图像，您需要知道它们的原始尺寸，并自己计算和指定所需的尺寸。

# ios - 为什么 UIStoryboardSegue 中的 sourceViewController 属性是“id”

> ID：15250642
> 
> 赞同：2
> 
> 时间：2013-03-06T14:57:47.083
> 
> 标签：ios, objective-c, uikit, storyboard, uistoryboardsegue

在`UIStoryboardSegue`类中，属性`sourceViewController`显然是 a `UIViewController`。为什么 Apple 将此属性标记为`id`？

```
@property(nonatomic, readonly) id sourceViewController;
@property(nonatomic, readonly) id destinationViewController; 
```

使用或理解使用会不会更容易`UIViewController *`，比如

```
@property(nonatomic, readonly) UIViewController *sourceViewController;
@property(nonatomic, readonly) UIViewController *destinationViewController; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:33:06.650

Apple 在这里和许多其他地方使用 id 的原因是允许灵活性并防止过时。

尽管属性的名称，`destinationViewController`可能并不总是返回一个`UIViewController`对象。或者更具体地说，如果一年后他们有一些新的、特殊的视图控制器不继承自`UIViewController`. 因此，使用 id 可以防止过时。

另请注意，您可能并不总是希望将返回的对象强制转换为 a`UIViewController.`例如，如果您的视图控制器嵌入在`UINavigationController`目标视图控制器将返回的 a 中。尽管`UINavigationController`是 的子级`UIViewController`，但在大多数情况下，您不想将其转换为这样，因为您通常希望从`viewControllers`属性中获取其视图控制器，如下所示：

```
// unwrap the controller if it's embedded in the nav controller.
UIViewController *controller;
if ([segue.destinationViewController isKindOfClass:[UINavigationController class]]) 
{
    UINavigationController *navController = 
           (UINavigationController *)segue.destinationViewController;

    controller = [navController.viewControllers objectAtIndex:0];

 } else {

    controller = segue.destinationViewController;
} 
```

因此，这种设计为开发人员提供了灵活性。

# javascript - 动态加载 AngularJS 控制器

> ID：15250644
> 
> 赞同：64
> 
> 时间：2013-03-06T14:57:48.780
> 
> 标签：javascript, angularjs

我有一个现有页面，我需要在其中放置一个带有可以动态加载的控制器的角度应用程序。

这是一个片段，它根据 API 和我发现的一些相关问题实现了我对应该如何完成的最佳猜测：

```
// Make module Foo
angular.module('Foo', []);
// Bootstrap Foo
var injector = angular.bootstrap($('body'), ['Foo']);
// Make controller Ctrl in module Foo
angular.module('Foo').controller('Ctrl', function() { });
// Load an element that uses controller Ctrl
var ctrl = $('<div ng-controller="Ctrl">').appendTo('body');
// compile the new element
injector.invoke(function($compile, $rootScope) {
    // the linker here throws the exception
    $compile(ctrl)($rootScope);
}); 
```

[JSF](http://jsfiddle.net/MzseV/2/)中。请注意，这是对实际事件链的简化，上面的行之间有各种异步调用和用户输入。

当我尝试运行上述代码时， $compile 返回的链接器会抛出：`Argument 'Ctrl' is not a function, got undefined`。如果我正确理解引导程序，它返回的注入器应该知道`Foo`模块，对吧？

相反，如果我使用 制作一个新的注入器`angular.injector(['ng', 'Foo'])`，它似乎可以工作，但它会创建一个新的注入器，它`$rootScope`不再与`Foo`引导模块的元素的范围相同。

我是否使用了正确的功能来执行此操作，或者我错过了什么？我知道这不是 Angular 的方式，但我需要将使用 Angular 的新组件添加到不使用 Angular 的旧页面中，而且我不知道引导模块时可能需要的所有组件。

**更新：**

我更新了[小提琴](http://jsfiddle.net/MzseV/3/)以表明我需要能够在未确定的时间点向页面添加多个控制器。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-08T11:02:13.240

我找到了一个可能的解决方案，在引导之前我不需要了解控制器：

```
// Make module Foo and store $controllerProvider in a global
var controllerProvider = null;
angular.module('Foo', [], function($controllerProvider) {
    controllerProvider = $controllerProvider;
});
// Bootstrap Foo
angular.bootstrap($('body'), ['Foo']);

// .. time passes ..

// Load javascript file with Ctrl controller
angular.module('Foo').controller('Ctrl', function($scope, $rootScope) {
    $scope.msg = "It works! rootScope is " + $rootScope.$id +
        ", should be " + $('body').scope().$id;
});
// Load html file with content that uses Ctrl controller
$('<div id="ctrl" ng-controller="Ctrl" ng-bind="msg">').appendTo('body');

// Register Ctrl controller manually
// If you can reference the controller function directly, just run:
// $controllerProvider.register(controllerName, controllerFunction);
// Note: I haven't found a way to get $controllerProvider at this stage
//    so I keep a reference from when I ran my module config
function registerController(moduleName, controllerName) {
    // Here I cannot get the controller function directly so I
    // need to loop through the module's _invokeQueue to get it
    var queue = angular.module(moduleName)._invokeQueue;
    for(var i=0;i<queue.length;i++) {
        var call = queue[i];
        if(call[0] == "$controllerProvider" &&
           call[1] == "register" &&
           call[2][0] == controllerName) {
            controllerProvider.register(controllerName, call[2][1]);
        }
    }
}
registerController("Foo", "Ctrl");
// compile the new element
$('body').injector().invoke(function($compile, $rootScope) {
    $compile($('#ctrl'))($rootScope);
    $rootScope.$apply();
}); 
```

[小提琴](http://jsfiddle.net/MzseV/5/)。唯一的问题是您需要将其存储`$controllerProvider`并在真正不应该使用的地方使用它（在引导程序之后）。此外，在注册之前似乎没有一种简单的方法来获取用于定义控制器的函数，因此我需要遍历`_invokeQueue`未记录的模块。

**更新：**注册指令和服务，而不是`$controllerProvider.register`简单地分别使用`$compileProvider.directive`和`$provide.factory`。同样，您需要在初始模块配置中保存对这些的引用。

**UDPATE 2：** [这是一个小提琴](http://jsfiddle.net/MzseV/7/)，它自动注册所有加载的控制器/指令/服务，而无需单独指定它们。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-06T16:16:20.370

bootstrap() 会为你调用 AngularJS 编译器，就像 ng-app 一样。

```
// Make module Foo
angular.module('Foo', []);
// Make controller Ctrl in module Foo
angular.module('Foo').controller('Ctrl', function($scope) { 
    $scope.name = 'DeathCarrot' });
// Load an element that uses controller Ctrl
$('<div ng-controller="Ctrl">{{name}}</div>').appendTo('body');
// Bootstrap with Foo
angular.bootstrap($('body'), ['Foo']); 
```

[小提琴](http://jsfiddle.net/mrajcok/f85br/)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-14T19:09:19.950

我建议看一下[ocLazyLoad library](https://github.com/ocombe/ocLazyLoad)，它在运行时注册模块（或现有模块上的控制器、服务等），并使用 requireJs 或其他此类库加载它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-25T22:49:52.817

我还需要添加多个视图并在运行时从 angularJs 上下文之外的 javascript 函数将它们绑定到控制器，所以这就是我想出的：

```
<div id="mController" ng-controller="mainController">
</div>

<div id="ee">
  2nd controller's view should be rendred here
</div> 
```

现在调用 setCnt() 函数将注入并编译 html，并将链接到第二个控制器：

```
var app = angular.module('app', []);

function setCnt() {
  // Injecting the view's html
  var e1 = angular.element(document.getElementById("ee"));
  e1.html('<div ng-controller="ctl2">my name: {{name}}</div>');

  // Compile controller 2 html
  var mController = angular.element(document.getElementById("mController"));
  mController.scope().activateView(e1);
}

app.controller("mainController", function($scope, $compile) {
  $scope.name = "this is name 1";

  $scope.activateView = function(ele) {
    $compile(ele.contents())($scope);
    $scope.$apply();
  };
});

app.controller("ctl2", function($scope) {
  $scope.name = "this is name 2";
}); 
```

这是一个测试这个的例子：[https ://snippet.run/x4bc](https://snippet.run/x4bc)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-03T01:11:29.127

我刚刚改进了 Jussi-Kosunen 编写的函数，这样所有事情都可以通过一个调用来完成。

```
function registerController(moduleName, controllerName, template, container) {
    // Load html file with content that uses Ctrl controller
    $(template).appendTo(container);
    // Here I cannot get the controller function directly so I
    // need to loop through the module's _invokeQueue to get it
    var queue = angular.module(moduleName)._invokeQueue;
    for(var i=0;i<queue.length;i++) {
        var call = queue[i];
        if(call[0] == "$controllerProvider" &&
            call[1] == "register" &&
            call[2][0] == controllerName) {
                controllerProvider.register(controllerName, call[2][1]);
            }
        }

        angular.injector(['ng', 'Foo']).invoke(function($compile, $rootScope) {
            $compile($('#ctrl'+controllerName))($rootScope);
            $rootScope.$apply();
        });
} 
```

这样，您可以从任何地方加载模板并以编程方式实例化控制器，甚至是嵌套的。

这是一个在另一个控制器中加载控制器的工作示例：http: [//plnkr.co/edit/x3G38bi7iqtXKSDE09pN](http://plnkr.co/edit/x3G38bi7iqtXKSDE09pN)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-11T14:50:44.780

为什么不使用 config 和 ui-router？

它在运行时加载，您无需在 html 代码中显示您的控制器

例如像下面这样

```
var config = {

   config: function(){
        mainApp.config(function ($stateProvider, $urlRouterProvider){
            $urlRouterProvider.otherwise("/");
            $stateProvider

            .state('index',{
                views:{
                    'main':{
                        controller: 'PublicController',
                        templateUrl: 'templates/public-index.html'
                    }
                }
            })
            .state('public',{
                url: '/',
                parent: 'index',
                views: {
                    'logo' : {templateUrl:'modules/header/views/logo.html'},
                    'title':{
                        controller: 'HeaderController',
                        templateUrl: 'modules/header/views/title.html'
                    },
                    'topmenu': {
                        controller: 'TopMenuController',
                        templateUrl: 'modules/header/views/topmenu.html'
                    },
                    'apartments': {
                        controller: 'FreeAptController',
                        templateUrl:'modules/free_apt/views/apartments.html'
                    },
                    'appointments': {
                        controller: 'AppointmentsController',
              templateUrl:'modules/appointments/views/frm_appointments.html'
                    },
                }
            })
            .state('inside',{
                views:{
                    'main':{
                        controller: 'InsideController',
                        templateUrl: 'templates/inside-index.html'
                    },
                },
                resolve: {
                    factory:checkRouting
                }
            })
            .state('logged', {
                url:'/inside',
                parent: 'inside',
                views:{        
                    'logo': {templateUrl: 'modules/inside/views/logo.html'},
                    'title':{templateUrl:'modules/inside/views/title.html'},
                    'topmenu': {
                       // controller: 'InsideTopMenuController',
                        templateUrl: 'modules/inside/views/topmenu.html'
                    },
                    'messages': {
                        controller: 'MessagesController',
                        templateUrl: 'modules/inside/modules/messages/views/initial-view-messages.html'
                    },
                    'requests': {
                        //controller: 'RequestsController',
                        //templateUrl: 'modules/inside/modules/requests/views/initial-view-requests.html'
                    },

                }

            })

    });
},

}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-01T09:23:19.437

这就是我所做的，实际上是 2 个部分，使用 ng-controller 及其范围定义的函数，然后使用 $controller 服务来创建动态控制器：-

首先，HTML - 我们需要一个静态控制器，它将实例化一个动态控制器..

```
<div ng-controller='staticCtrl'>
  <div ng-controller='dynamicCtrl'>
    {{ dynamicStuff }}
  </div>
</div> 
```

静态控制器“staticCtrl”定义了一个名为“dynamicCtrl”的范围成员，它被调用来创建动态控制器。ng-controller 将按名称获取预定义的控制器，或者查看当前范围的同名功能..

```
.controller('staticCtrl', ['$scope', '$controller', function($scope, $controller) {
  $scope.dynamicCtrl = function() {
    var fn = eval('(function ($scope, $rootScope) { alert("I am dynamic, my $scope.$id = " + $scope.$id + ", $rootScope.$id = " + $rootScope.$id); })');
    return $controller(fn, { $scope: $scope.$new() }).constructor;
  }
}]) 
```

我们使用 eval() 来获取一个字符串（我们的动态代码，它可以来自任何地方），然后是 $controller 服务，它将获取一个预定义的控制器名称（正常情况）或一个函数构造函数，然后是构造函数参数（我们传入一个新作用域）——Angular 将（像任何控制器一样）注入到函数中，我们只在上面请求 $scope 和 $rootScope。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-06T20:21:42.677

```
'use strict';

var mainApp = angular.module('mainApp', [
    'ui.router', 
    'ui.bootstrap', 
    'ui.grid',
    'ui.grid.edit',
    'ngAnimate',
    'headerModule', 
    'galleryModule', 
    'appointmentsModule', 
 ]);

(function(){

    var App = {
        setControllers:   mainApp.controller(controllers),
        config:   config.config(),
        factories: {
            authFactory: factories.auth(),
            signupFactory: factories.signup(),
            someRequestFactory: factories.saveSomeRequest(),
        },
        controllers: {
            LoginController: controllers.userLogin(),
            SignupController: controllers.signup(),
            WhateverController: controllers.doWhatever(),
        },
        directives: {
            signup: directives.signup(), // add new user
            openLogin: directives.openLogin(), // opens login window
            closeModal: directives.modalClose(), // close modal window
            ngFileSelect: directives.fileSelect(),
            ngFileDropAvailable: directives.fileDropAvailable(),
            ngFileDrop: directives.fileDrop()
        },
        services: {
           $upload: services.uploadFiles(),
        }
    };
})(); 
```

上面的代码只是一个例子。

这样你就不需要`ng-controller="someController"`在页面上放置任何地方——你只需要声明`<body ng-app="mainApp">`

每个模块或模块内的模块都可以使用相同的结构

# matlab - Matlab blockproc 将向量结果存储为第三维

> ID：15250647
> 
> 赞同：1
> 
> 时间：2013-03-06T14:57:53.280
> 
> 标签：matlab, image-processing, matrix

我有图像需要分成块，然后为每个块计算直方图。我认为最好的方法是使用 blockproc() 函数计算每个块的直方图，但直方图是一个向量，我想将它存储在第三维中，以便更快地进行进一步的计算。

例如，我有 1024*1024px 的图像，我将其划分为 64*64px 的块，并使用 hist() 计算直方图。所以 blockproc 应该返回一个 16*16 的矩阵。但是鉴于 hist() 返回一个我想要存储的向量，我想让 blockproc() 返回一个 16*16*256 矩阵，第三维是我的直方图的 256 个值。

我当前的代码是：

```
function [ counts ] = getHist( block )
    [counts,]=hist(block.data, 0:255);
end

HistA = blockproc(lbpA, [64 64], @(block_struct) getHist(block_struct)); 
```

但它返回 (16*256) 乘以 1024 矩阵。

我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:55:01.853

我这里没有 Matlab，所以这一切都未经测试。

我已经阅读了`blockproc`文档。我认为您会得到一个 2D (16*256) x (16) 矩阵（反之亦然）。你想要一个 16 x 16 x 256 的矩阵。

尝试使用[shiftdim](http://www.mathworks.com/help/matlab/ref/shiftdim.html)更改直方图的输出- 您的直方图是大小为 [1,256] 的行向量。

```
output = shiftdim(output,-1) 
```

这应该产生一个 [1,1,256] 向量。

我假设您想要块中所有像素的计数，而不是您现在正在做的逐列计数。我认为将您的 64*64 块矩阵重塑为向量`(:)`应该可以：

```
function counts = getHist(block)
    counts = hist(block.data(:), 0:255);
end 
```

# mysql - MySQL加入2个表

> ID：15250651
> 
> 赞同：1
> 
> 时间：2013-03-06T14:57:59.967
> 
> 标签：mysql, join

我得到了 2 个结构几乎相同的表：

表`products`：

```
-----------------------------
ID | OrderNo | Name   | Size
-----------------------------
1  | 1000    | TShirt | S
----------------------------- 
```

表`variants`：（
关系：`variants`. `MasterID`= `products`. `ID`）

```
-------------------------------
ID | MasterID | OrderNo | Size
-------------------------------
1  | 1        | 1001    | M
-------------------------------
2  | 1        | 1002    | L
------------------------------- 
```

现在我需要得到以下结果：（
我需要来自的每一行和来自的`products`每一行`variants`）

```
1000 | TShirt | S
------------------
1001 | TShirt | M
------------------
1002 | TShirt | L
... 
```

我是这样尝试的：

```
SELECT p.OrderNo, p.Name, p.Size FROM products p
UNION
SELECT v.OrderNo, p.Name, v.Size FROM variants v 
```

有一个更好的方法吗？结果是正确的，但有点慢（ 13000 行`products`和 5000 行`variants`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:38:45.170

```
SELECT p.OrderNo, p.Name, v.Size 
FROM products p
LEFT OUTER JOIN variants v
ON v.MasterID = p.ID 
```

应该这样做。您可能需要一个内部联接而不是一个左外部联接；从你的问题不清楚。

# php - php png黑色背景上传

> ID：15250655
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:58:04.513
> 
> 标签：php, png

从服务器加载图像时出现问题。PNG 格式的图像背景变为黑色。

抱歉英语不好提前谢谢。

```
<?php

//Database Settings
include('../../../../includes/bdconfig.ini.php');

$t = time();

//Database Required Settings
include('../../../../includes/adminrequired.php');

//If Not Logged In Redirect to Login Page
if(!$session){header("Location: $siteurl/admin/login/");}

// Image Re-size and Thumbnail Features Go Here

$h1 = "SELECT * FROM dlistings ORDER BY listed DESC LIMIT 0, 1"; $k1 = mysql_query($h1); $c1 = mysql_fetch_array($k1);

$productid = "$c1[did]";

class SimpleImage {var $image; var $image_type;

function load($filename) {$image_info = getimagesize($filename); $this->image_type = $image_info[2];
if( $this->image_type == IMAGETYPE_JPEG ) {$this->image = imagecreatefromjpeg($filename);}
elseif( $this->image_type == IMAGETYPE_GIF ) {$this->image = imagecreatefromgif($filename);}
elseif( $this->image_type == IMAGETYPE_PNG ) {$this->image = imagecreatefrompng($filename);}}

function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {if( $image_type == IMAGETYPE_JPEG ) {imagejpeg($this->image,$filename,$compression);}
elseif( $image_type == IMAGETYPE_GIF ) {imagegif($this->image,$filename);}
elseif( $image_type == IMAGETYPE_PNG ) {imagepng($this->image,$filename);}   
if( $permissions != null) {chmod($filename,$permissions);}}

function output($image_type=IMAGETYPE_JPEG) {if( $image_type == IMAGETYPE_JPEG ) {imagejpeg($this->image);}
elseif( $image_type == IMAGETYPE_GIF ) {imagegif($this->image);}
elseif( $image_type == IMAGETYPE_PNG ) {imagepng($this->image);}}

function getWidth() {return imagesx($this->image);}
function getHeight() {return imagesy($this->image);}

function resizeToHeight($height) {$ratio = $height / $this->getHeight();
$width = $this->getWidth() * $ratio;
$this->resize($width,$height);}

function resizeToWidth($width) {$ratio = $width / $this->getWidth();
$height = $this->getheight() * $ratio;
$this->resize($width,$height);}

function scale($scale) {$width = $this->getWidth() * $scale/100;
$height = $this->getheight() * $scale/100; 
$this->resize($width,$height);}

function resize($width,$height) {$new_image = imagecreatetruecolor($width, $height)  ;  

imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());

$this->image = $new_image;}}

$image = new SimpleImage();

//Re-size and Create Thumbnail if Image 1 Exist
if($c1[img1]){

$img1name = "../../../../imgs/1/$c1[img1]";
$thumb1name = "../../../../thumbs/imgs/$c1[img1]";

$img1_dimensions = getimagesize($img1name);
$awidth = $img1_dimensions[0];
$aheight = $img1_dimensions[1];

$arpercent = '100';
if($awidth > 350){$arpercent = '95';}
if($awidth > 500){$arpercent = '90';}
if($awidth > 700){$arpercent = '50';}
if($awidth > 900){$arpercent = '40';}
if($awidth > 1100){$arpercent = '30';}
if($awidth > 1400){$arpercent = '25';}
if($awidth > 1600){$arpercent = '20';}
if($awidth > 1800){$arpercent = '15';}

$anewwidth = round((($arpercent/100)*$awidth));
$anewheight = round((($arpercent/100)*$aheight));

if($anewwidth > 450){$anewwidth = '400'; $anewheight = '400';}

$image->load($img1name);
$image->resize($anewwidth,$anewheight);
$image->save($img1name);

$image->load($img1name);
$image->resize(100,100);
$image->save($thumb1name);

}

//Re-size if Image 2 Exist
if($c1[img2]){

$img2name = "../../../../imgs/2/$c1[img2]";

$img2_dimensions = getimagesize($img2name);
$bwidth = $img2_dimensions[0];
$bheight = $img2_dimensions[1];

$brpercent = '100';
if($bwidth > 350){$brpercent = '90';}
if($bwidth > 500){$brpercent = '90';}
if($bwidth > 700){$brpercent = '50';}
if($bwidth > 900){$brpercent = '40';}
if($bwidth > 1100){$brpercent = '30';}
if($bwidth > 1400){$brpercent = '25';}
if($bwidth > 1600){$brpercent = '20';}
if($bwidth > 1800){$brpercent = '15';}

$bnewwidth = round((($brpercent/100)*$bwidth));
$bnewheight = round((($brpercent/100)*$bheight));

if($bnewwidth > 450){$bnewwidth = '400'; $bnewheight = '400';}

$image->load($img2name);
$image->resize($bnewwidth,$bnewheight);
$image->save($img2name);

}

//Re-size if Image 3 Exist
if($c1[img3]){

$img3name = "../../../../imgs/3/$c1[img3]";

$img3_dimensions = getimagesize($img3name);
$cwidth = $img3_dimensions[0];
$cheight = $img3_dimensions[1];

$crpercent = '100';
if($cwidth > 350){$crpercent = '90';}
if($cwidth > 500){$crpercent = '90';}
if($cwidth > 700){$crpercent = '50';}
if($cwidth > 900){$crpercent = '40';}
if($cwidth > 1100){$crpercent = '30';}
if($cwidth > 1400){$crpercent = '25';}
if($cwidth > 1600){$crpercent = '20';}
if($cwidth > 1800){$crpercent = '15';}

$cnewwidth = round((($crpercent/100)*$cwidth));
$cnewheight = round((($crpercent/100)*$cheight));

if($cnewwidth > 450){$cnewwidth = '400'; $cnewheight = '400';}

$image->load($img3name);
$image->resize($cnewwidth,$cnewheight);
$image->save($img3name);

}

//Re-size if Image 4 Exist
if($c1[img4]){

$img4name = "../../../../imgs/4/$c1[img4]";

$img4_dimensions = getimagesize($img4name);
$dwidth = $img4_dimensions[0];
$dheight = $img4_dimensions[1];

$drpercent = '100';
if($dwidth > 350){$drpercent = '90';}
if($dwidth > 500){$drpercent = '90';}
if($dwidth > 700){$drpercent = '50';}
if($dwidth > 900){$drpercent = '40';}
if($dwidth > 1100){$drpercent = '30';}
if($dwidth > 1400){$drpercent = '25';}
if($dwidth > 1600){$drpercent = '20';}
if($dwidth > 1800){$drpercent = '15';}

$dnewwidth = round((($drpercent/100)*$dwidth));
$dnewheight = round((($drpercent/100)*$dheight));

if($dnewwidth > 450){$dnewwidth = '400'; $dnewheight = '400';}

$image->load($img4name);
$image->resize($dnewwidth,$dnewheight);
$image->save($img4name);

}

header("Location: $siteurl/admin/manage/listings/?added=listing&productid=$productid");?> 
```

你能告诉我这里有什么问题吗？我应该做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:10:24.487

这是可怕的代码！代码 `$this->image = imagecreatefrompng($filename);` 仍然正确，应该正确加载 png。检查图像是否在应有的位置。png 是否包含透明度？如果是这样，您需要执行一些技巧来保持这种透明度。

请参阅：[使用 PHP 的 GDlib imagecopyresampled 时可以保留 PNG 图像透明度吗？](https://stackoverflow.com/questions/32243/can-png-image-transparency-be-preserved-when-using-phps-gdlib-imagecopyresample)

# java - 一个类的类加载器是如何选择的？

> ID：15250656
> 
> 赞同：9
> 
> 时间：2013-03-06T14:58:04.523
> 
> 标签：java, classloader

## 动机

假设我们有一个如下所示的类加载层次结构：

```
 Bootstrap
     |
  System
     |
  Custom 
```

假设`Custom`Classloader 用于加载一个类`com.example.SomeClass`。它检查`System`类加载器是否可以加载它，然后再次检查类加载器是否`Bootstrap`可以加载它。由于两者都不能，`com.example.SomeClass`由`Custom`类加载器加载。

任何`com.example.SomeClass`依赖的类都一样。我相信我理解这个过程。

## 问题

我不明白为什么`Custom`要首先尝试加载`com.example.SomeClass`。在 Java 应用程序中如何选择当前的类加载器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T21:22:27.970

# 小介绍

如您所知，默认情况下 Java 使用引导类加载器和系统类加载器。第一个负责加载引导类（其类路径包含诸如 rt.jar 之类的工件），第二个负责保存应用程序的类路径。通常，在您的环境变量中定义或在 JVM 中给出的类路径开始使用该`-cp`参数。

# 答案

`com.example.SomeClass`仅当发生以下两种情况之一时，您的自定义类加载器才会加载该类`Custom`：要么在启动时定义自定义类加载器用作系统类加载器，要么在运行时通过它显式加载类。

关于每个选项的更多信息：

*   **在应用程序启动时**：您可以在启动 JVM 实例时定义，而不是使用您自己的 Java 的默认系统类加载器。为此，只需调用 java 并定义以下环境变量：

    ```
    -Djava.system.class.loader=my.tests.classloaders.Custom 
    ```

    在这种情况下，该 JVM 实例中的应用程序中的**所有**类实际上都将由`Custom`类加载器加载。

*   **在运行时**：您可以在运行时使用您的自定义类加载器加载一个类。这是通过创建自定义类加载器的实例并从中加载类来实现的

    ```
     ClassLoader classloader = new CustomClassLoader();
         Class someClass = classloader.loadClass("com.example.SomeClass"); 
    ```

就像@Noofiz 在他的回答中所说的那样，一旦您加载了一个类，所有需要但尚未加载的引用类都将通过关联的类加载器加载。因此，如果您使用自定义类加载器加载一个类，所有引用的类也将通过它加载。加载所有类时，您可以做任何您想做的事情，记录正在加载的类，委托给父类加载器，自己加载类...

# 一些额外的信息

通常，实现自定义类加载器的最佳方法是使用您提到的委托模型。这是因为一个类实际上不仅由类的字节码定义，还由其类加载器定义，这意味着**由两个不同的类加载器加载的类不会是同一个类**。

这意味着当您的自定义类加载器委托给它的父类时，您要确保该类可用于*更广泛的范围*。大多数情况下，这将是您想要的，但并非总是如此。

如果出于某种原因您想要类隔离，那么您的自定义类加载器可能会以相反的方式实现。首先，它会尝试自行加载该类，并且只有在它没有找到该类（或者是 JVM 系统类或您可能想要跳过的任何其他类）时才将其委托给它的父类。例如，Web 应用程序容器以这种方式工作，允许上下文重新部署（基本上它们丢弃类加载器并创建一个新的加载器再次加载所有内容）和 Web 应用程序之间的完全类隔离。

正如我已经说过的，处理类加载一点也不简单，要么你真的知道你在做什么，要么你肯定会发现自己陷入了一些奇怪的巫毒问题。

也许已经离题太远了，但如果你想更多*地了解类加载器和隔离，你可以查看一个名为*[classworlds](https://codehaus-plexus.github.io/plexus-classworlds/)的旧开源项目。即使这个项目很老，我还是建议它，因为它是一个小项目，充满了关于类加载机制的知识，你可以轻松地深入了解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:09:20.257

第一次在某个方法中请求每个类，每个方法都是某个类的一部分，该类已经加载并定义了它的类加载器。因此，当需要一个新类时，它会通过当前方法的类的类加载器进行查找。如果一个类是通过自定义类加载器加载的，它将成为该类的方法加载的所有类的基类加载器。JVM 规范没有定义如何静态解析类（在启动时加载所有图形）或动态解析（第一次请求时）。但是静态加载会花费太长时间，因此它没有被使用，并且当应用程序已经运行时我们会收到 ClassNotFoundError。[类和接口解析](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4.3.1)

# java - MacBook Air 上的 JAVA

> ID：15250665
> 
> 赞同：-1
> 
> 时间：2013-03-06T14:58:23.343
> 
> 标签：java, macos, plugins

我使用了一个应用程序（我无法向您展示，因为它是一个后台），我只在需要 JAVA 才能工作的 Chrome 上启动它。

当我打开一个 bash 命令时，我使用了 java -version。我看到“1.6.0_43”。但是当我使用 Web 应用程序时，我收到一条错误消息，上面写着“Modul Java 不存在或不需要”。

我不明白，因为我确定不是我的问题，我安装了最新版本的 JAVA。

有人告诉我 MAC 上的问题是 Webstart 取消了在 Web 浏览器上启动 JAVA。

如果您对此有所了解，请发表评论:)))

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:10:22.427

> Chrome 不支持 Java 7。Java 7 只能在 64 位浏览器上运行，而 Chrome 是 32 位浏览器。

Mac OS 强制您使用 Java 7 插件（64 位），但 Chrome（32 位）不支持它。使用不同的浏览器，访问[http://java.com](http://java.com)并安装 Java 7 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:09:30.613

这是很奇怪的情况。我可以确认这些问题。我们有一个需要在 1.6 版本下运行的 java 客户端。通常，MacOS 10.8 确实带有 java 版本 1.7。

尽管如此，您的操作系统中还是安装了 java 版本 1.6。我不得不改变`/usr/bin/javaws`以下

```
✗ ll /usr/bin/javaws
lrwxr-xr-x  1 root  wheel  64 22 Feb 09:34 /usr/bin/javaws -> /System/Library/Java/Support/Deploy.bundle/Contents/MacOS/javaws 
```

`Can not find message file: No such file or directory`如果您在启动 javaws 时收到消息：[请查看这里的讨论](https://stackoverflow.com/questions/5763646/starting-javaws-on-mac-os-fails-with-cannot-find-message-file)

# java - Spring 是否应该在使用 find 访问对象时启动事务？

> ID：15250667
> 
> 赞同：0
> 
> 时间：2013-03-06T14:58:24.620
> 
> 标签：java, spring, transactions

我有几个方法

```
@persistanceContext
EntityManager em;

public Car getCar(int id) {

   em.find(Car.class, id)

}

@Trasnactional

public void saveCar(Car car) {

   em.save(car);
} 
```

您是否还应该为刚刚进行查找时调用的方法启动事务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:09:32.977

更好地`Read-Only`在获取数据时使用事务。它将防止读取时数据不一致，并且仅读取已提交的数据。

同样它的最佳实践，也可以不使用`Transaction`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:01:06.473

不，没有必要。仅用于保存您需要使用@Transactional。

如果在方法中发生任何异常时使用它，这将回滚所有之前的操作（即插入、删除）

它将基于`do every thing or nothing principle`

# hibernate - Spring MVC 表单更新对象

> ID：15250669
> 
> 赞同：2
> 
> 时间：2013-03-06T14:58:31.463
> 
> 标签：hibernate, spring-mvc

我尝试通过表单更新我的对象，我有两个控制器：

```
@RequestMapping(value = "/modifyUser{id}", method = RequestMethod.GET)
public String modifyUser(@PathVariable("id") int userId, ModelMap map) {
    UserDetails user = userService.findById(userId);

    List<CompanyDetails> companyDetailsList = companyService.getAllExceptUsers(userId);
    map.addAttribute("userDetails", user);
    map.addAttribute("companiesList",companyDetailsList);
    return "admin/modify_user";
}

@RequestMapping(value = "/modifyUser", method = RequestMethod.POST)
public String modifyUser(@Valid @ModelAttribute("userDetails") UserDetails userDetails,
                             BindingResult result, RedirectAttributes redirectAttributes,
                             @RequestParam("company_id")String companyId,ModelMap map) {
    if (!userService.isPhoneNumbersListValid(userDetails.getPhoneNumbers())){
        result.rejectValue("phoneNumbers", "userDetails.phoneNumbersList.error");
    }
    if(!userDetails.getPasswordConfirmation().equals(userDetails.getPassword())){
        result.rejectValue("passwordConfirmation","userDetails.passwordConfirmation.error");
    }
    if("default".equals(userDetails.getCountry())){
        result.rejectValue("country","userDetails.country.error");
    }
    if (result.hasErrors()){
        List<CompanyDetails> companyDetailsList = companyService.getAllExceptUsers(userDetails.getId());
        map.addAttribute("companiesList",companyDetailsList);
        return "admin/modify_user";
    }

    logger.warn("***********Updated user ID:"+userDetails.getId()+" and companies size: "+userDetails.getUserCompanies().size());

    CompanyDetails companyDetails = companyService.getCompanyById(Integer.parseInt(companyId));
    userDetails.setEnabled(true);

    if (userService.update(userDetails,companyDetails)) {
        redirectAttributes.addFlashAttribute("userModifyStatus", true);
    } else {
        redirectAttributes.addFlashAttribute("userModifyStatus", false);
    }
        return "redirect:modifyUser" + userDetails.getId() + ".html";
    } 
```

`UserDetails`（这是我的自定义用户对象，**而不是 org.springframework.security.core.userdetails**）实体有一个公司集合，当我们第一次获取页面时，集合已满（根据需要）。

但是当我尝试发布我更新的对象时，这个内部集合是空的（当我提交表单时它会在某处消失）。

我的自定义对象：

```
@Entity
@Table(name = "users")
public class UserDetails {

    @Id
    @GeneratedValue
    @Column(name = "user_id")
    private int id;

    @Column(name = "first_name")
    @NotEmpty
    @Size(min = 2, max = 20)
    private String firstName;

    @Column(name = "legal_name")
    @NotEmpty
    @Size(min = 2, max = 30)
    private String legalName;

    @Column(name = "country")
    private String country;

    @Column(name = "legal_address")
    @NotEmpty
    @Size(min = 5, max = 255)
    private String legalAddress;

    @Column(name = "role")
    private String role;

    @Column(name = "login")
    @NotEmpty
    @Email
    private String login;

    @Column(name = "password")
    @NotEmpty
    @Size(min = 3, max = 10)
    private String password;

    @Transient
    private String passwordConfirmation;

    @Column(name = "enabled")
    private boolean enabled;

    @ElementCollection
    @CollectionTable(name = "users_phone_numbers", joinColumns = @JoinColumn(name = "user_id"))
    @Column(name = "phoneNumber")
    private Collection<String> phoneNumbers = new LinkedList();

    @ManyToMany(cascade = CascadeType.REFRESH)
    @JoinTable(name = "users_companies",
            joinColumns = @JoinColumn(name = "user_id"),
            inverseJoinColumns = @JoinColumn(name = "company_id"))
    private Set<CompanyDetails> userCompanies = new HashSet();

    //getters and setters
} 
```

还有我的提交表格：

```
<form:form method="post" action="modifyUser.html" commandName="userDetails">
        <form:hidden path="id"/>
        <form:label path="firstName"><spring:message code="addUser.label.firstName"/></form:label>
        <form:input type="text" path="firstName"/>
        <form:errors path="firstName" cssClass="form-errors"/>

        <form:label path="legalName"><spring:message code="addUser.label.legalName"/></form:label>
        <form:input type="text" path="legalName"/>
        <form:errors path="legalName" cssClass="form-errors"/>

        <form:label path="login"><spring:message code="addUser.label.login"/></form:label>
        <form:input type="text" path="login"/>
        <form:errors path="login" cssClass="form-errors"/>

        <form:label path="password"><spring:message code="addUser.label.password"/></form:label>
        <form:input type="password" path="password"/>
        <form:errors path="password" cssClass="form-errors"/>

        <form:label path="passwordConfirmation"><spring:message code="addUser.label.confirmPassword"/></form:label>
        <form:input type="password" path="passwordConfirmation"/>
        <form:errors path="passwordConfirmation" cssClass="form-errors"/>

        <form:label path="country"><spring:message code="addUser.label.country"/></form:label>
        <form:select class="iso-country-select" path="country">
            <form:option value="default"><spring:message code="addUser.label.selectCountry"/></form:option>
        </form:select>
        <form:errors path="country" cssClass="form-errors"/>

        <label for="select-companies"><spring:message code="assignUser.label.companies"/> </label>
        <select id="select-companies" name="company_id">
            <option value="default"><spring:message code="searchUser.label.selectCompany"/></option>
            <c:forEach items="${companiesList}" var="company">
                <option value="${company.id}">${company.name}</option>
            </c:forEach>
        </select>

        <div class="phone-numbers">
            <form:label path="phoneNumbers"><spring:message code="addUser.label.phoneNumber"/></form:label>
            <p class="added-input-text">
                <c:forEach items="${userDetails.phoneNumbers}" var="phoneNumber" varStatus="loop">
                    <form:input type="text" path="phoneNumbers[${loop.index}]"/>
                </c:forEach>
                <a href="#" class="add"><img src="../static/img/add.png"/></a>
            <p/>

            <form:errors path="phoneNumbers" cssClass="form-errors"/>
        </div>

        <form:label path="legalAddress"><spring:message code="addUser.label.legalAddress"/></form:label>
        <form:textarea path="legalAddress"/>
        <form:errors path="legalAddress" cssClass="form-errors"/>

        <form:label path="role"><spring:message code="addUser.label.role"/></form:label>
        <form:select path="role">
            <form:option value="ROLE_USER"><spring:message code="addUser.label.role.external"/></form:option>
            <form:option value="ROLE_ADMIN"><spring:message code="addUser.label.role.internal"/></form:option>
        </form:select>

        <input type="submit" value="<spring:message code="modifyUser.label.submit"/>"/>
    </form:form> 
```

我可以解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:16:36.897

你的意思是`UserDetails`在`org.springframework.security.core.userdetails`？

在这种情况下，UserDetails 中的 GrantedAuthority 集合没有设置器，因此 spring mvc 无法为其设置值。

```
public interface UserDetails extends Serializable {

     Collection<GrantedAuthority> getAuthorities();
     ....
}

/* it does not have any setter */
public interface GrantedAuthority extends Serializable {
    String getAuthority();  
} 
```

# sql-server - 为每个新用户恢复通用数据库

> ID：15250679
> 
> 赞同：0
> 
> 时间：2013-03-06T14:58:43.393
> 
> 标签：sql-server, database, database-restore

我正在使用 SQL Server 2012 构建一个系统，它是一个包含相同数据类型但针对每个用户的 Web 应用程序，因此我们为每个用户使用一个数据库，每个数据库都具有相同的结构，并且它是动态创建的，并且在用户单击时生效在确认帐户电子邮件上。

问题是创建数据库的脚本正在恢复一个名为 DB_GENERIC.bak 的数据库，它花费的时间比我预期的要多。我正在寻找优化这一点的方法，并最终创建了一个全新的数据库，但减少了所需的时间。（现在正在使用大约 15 秒来创建数据库），通用数据库恢复它的小（大约 5mb，和 600kb 压缩）并且所有表都是空的。

除了恢复完整的数据库备份之外，还有其他方法可以完成此操作吗？我可以在 t-sql 上编写整个通用数据库的脚本并执行更改数据库名称吗？它会更快吗？或者它是压缩或生成资源消耗较少的备份的任何其他方式，问题是我不需要数据或任何东西，只需要表、过程、函数和模式。

提前致谢

* * *

UDPATE：

感谢所有回答我问题的人，答案都很棒而且很有帮助。我最终使用了@Love2Learn 答案，并尝试了 detach-copy-attach 方法。

只是为了让您想象这是如何实现的，我有一个存储过程，它负责从具有以下内容的数据库模板复制-附加新数据库：

```
--executing bat that copies the database-1-template.mdf and database-2-template.mdf (as well as log files) to the DATA folder in my sql instance
--and renames them (then they'll be attached)
DECLARE @BATCopy VARCHAR(MAX) = 'C:\helpers\copyMDFAndLogFiles.bat'

--building command for xp_cmdshell with parameters (new databases names)
DECLARE @command varchar(500) = @BATCopy + ' ' + @database1Name + ' ' + @database2Name

--PRINT @command

EXEC xp_cmdshell @command, no_output

--attaching new databases
SET @SQL = ' USE [master] 
CREATE DATABASE ' + @database1Name + '
    ON (FILENAME = ''' + @SQLDATAPath + @database1Name + '.mdf''), 
    (FILENAME = ''' + @SQLDATAPath + @database1Name + '_log.ldf'') 
    FOR ATTACH; 

CREATE DATABASE ' + @database2Name+ '
    ON (FILENAME = ''' + @SQLDATAPath + @database2Name+ '.mdf''), 
    (FILENAME = ''' + @SQLDATAPath+ @database2Name+ '_log.ldf'') 
    FOR ATTACH;'

EXECUTE(@SQL)

--renaming logical files

SET @SQL = '
ALTER DATABASE '+@database1Name +'
MODIFY FILE (NAME = Database1_Generic, NEWNAME = '+@database1Name +')

ALTER DATABASE '+@database1Name +'
MODIFY FILE (NAME = Database1_Generic_Log, NEWNAME = '+@database1Name +'_log)

ALTER DATABASE '+@database2Name+'
MODIFY FILE (NAME = Database2_Generic, NEWNAME = '+@database2Name+')

ALTER DATABASE '+@database2Name+'
MODIFY FILE (NAME = Database2_Generic_Log, NEWNAME = '+@database2Name+'_log)
'

EXECUTE (@SQL) 
```

我希望这可以帮助任何需要做我需要做的事情的人，并感谢大家的回答。

朱利安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:20:54.253

看看这个答案...... [复制数据库的最佳方法（SQL Server 2008）](https://stackoverflow.com/questions/2043726/best-way-to-copy-a-database-sql-server-2008)

最好的方法是分离-复制-附加。您可能希望创建一个模板数据库并将其用作每个新数据库的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:48:40.790

> ...问题是我不需要数据或任何东西，只需要表、过程、函数和模式。

第 1 步是从数据中拆分架构。使用 SSMS“将数据库脚本作为...”生成一个 SQL 脚本，该脚本仅包含您希望新数据库拥有的架构/数据。为未来的模式模块（“basedatabase.sql”、“patch01.sql”等）制定计划，因为它会发生，你必须将这些模块应用到很多数据库。

一旦你摆脱了数据，从脚本创建数据库会快很多。如果这还不够快，请备份空数据库并从中恢复到新数据库。（SQL Server Azure 有一个不错的`CREATE DATABASE_B AS COPY OF DATABASE_A`功能，但它不在常规 SQL Server 中。）

顺便说一句，我同意其他海报：多个数据库的智慧；如果您预计有 50 个客户，这很好。如果您希望拥有 10,000 名客户，那么采用不同的方法会更好地为您服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:49:21.887

我的信念是，通过编写数据库脚本并执行脚本，你将是最好的。这样做的好处是您可以轻松地对内容进行版本控制。此外，要将所有租户数据库升级到新版本，无论如何您都需要编写增量脚本。

您可以使用脚本数据库向导创建初始脚本。请务必更改高级选项，因为它们具有*疯狂*的默认值。他们只会省略一些东西，比如触发器和其他东西。

# sql - SQL 遍历数组

> ID：15250685
> 
> 赞同：1
> 
> 时间：2013-03-06T14:59:04.543
> 
> 标签：sql, arrays, postgresql

有没有办法在不使用存储过程的情况下遍历 SQL 中的数组？例如给出：

```
a | b
--+------
a | {1,2} 
```

我想将数组展平为单独的行，如下所示：

```
a | b
--+---
a | 1
a | 2 
```

澄清：我正在尝试在 Postgres 中执行此操作，并且正在寻找一个*纯 SQL*解决方案，而不是使用存储过程。如果我错了，请纠正我，但我认为以前的问题没有解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:13:47.133

非常简单

```
select a, unnest(b)
from t 
```

# python - 使用带有奇怪符号的字符串注释图形

> ID：15250689
> 
> 赞同：2
> 
> 时间：2013-03-06T14:59:14.290
> 
> 标签：python, unicode, numpy, matplotlib

这应该是一件非常简单的事情，但我似乎无法在任何地方的论坛中找到答案。这是基本问题：

我有一组格式为 CSV 文件：

"X,温度 °C\n1,25\n..."

请注意学位符号，这将是我问题的核心。我正在使用 numpy 和 matplotlib，并使用以下命令导入此文件：

```
GT_kwargs = dict(delimiter=',',names=True)
data_array = numpy.genfromtxt(filenm, **GT_kwargs) 
```

这会正确生成一个带有 dtypes 的 numpy 数组：

```
[('X', '<f8'), ('Temp_\xb0C', '<f8')] 
```

到目前为止，一切都很好。数据绘制得很好，当我想使用从标题中提取的名称来注释曲线时，问题就来了，特别是如果我尝试通过：

```
pyplot.annotate(data_array.dtype.names[1], xy=(1,1)) 
```

这抛出：

ValueError: matplotlib display text must have all code points < 128 or use Unicode strings

显然问题是 \xb0C 作为度数符号。我试过用 unicode 字符串替换符号，但这没有任何作用。如何更改此字符串以使注释包含度数符号？

编辑：我已经缩小了我的问题一点。如何判断字符串的编码？这是一个非常基本的问题，但我仍然找不到答案（通常是这样）。指向良好文档的链接会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:33:16.243

`\xb0`是格式**错误的 utf-8**，这是这里的问题。替换`\xb0`为`\xc2\xb0`允许**utf-8**正确编码字符串。

# c# - 由于 SelectMethod，无法将数据绑定到 ListView

> ID：15250692
> 
> 赞同：0
> 
> 时间：2013-03-06T14:59:17.963
> 
> 标签：c#, asp.net, linq, routedata

我有一个`ListView`并且我使用 的`SelectMethod`来`ListView`填充它。我希望将过滤器应用于从`DropDownList`. 我面临的问题是我不能`DataBind()`这样做，`ListView`因为`SelectMethod`那是用途。

所以我想我会一直改变它而`DataBind()`不是使用`SelectMethod`（更好吗？）。然后我面临的问题是我的方法是抓取`[RouteData]`。现在我正在将其`[RouteData]`作为我的方法的参数。请看下文。

```
 public IQueryable<Product> GetProducts([RouteData] string categoryName, , [RouteData] string brandName, [RouteData] string subCatName)
{
       //Do stuff
} 
```

下面是列表视图

```
 <asp:ListView ID="productList" runat="server"
     DataKeyNames="ProductID"
     ItemType="E_Store_Template.Models.Product"
     SelectMethod="GetProducts">
       // do stuff 
</asp:ListView> 
```

如何使用`DataBind()`并仍然获取`[RouteData]`来自 URL？还是我必须使用 QueryString 来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:20:16.530

我能够使用下面的代码获取路线数据。这使我能够获取该数据并使用 Databind() 而不必使用 select 方法来获取该数据。

```
Convert.ToString(Page.RouteData.Values["categoryName"]);

Convert.ToInt32(Page.RouteData.Values["scID"]); 
```

# javascript - 在 asp.net mvc 中使用地理编码并希望将经纬度从 JS 传输到控制器中的某个函数

> ID：15250694
> 
> 赞同：1
> 
> 时间：2013-03-06T14:59:20.007
> 
> 标签：javascript, asp.net-mvc

更新。

我试过你说的。功能是。

```
 [HttpPost]
  public ActionResult populate_place(string lati, string longi)
   {
  list_placesModels list_place = new list_placesModels();
  list_place.Latitude = lati;
  list_place.Longitude = longi;
  return View();
   } 
```

但知道它没有显示新的视图。我不知道为什么？仍然显示旧视图。它不会重定向到新视图。未显示新视图。它仍然保持相同的观点。

////////////

我正在使用 Google 地图的地理编码功能来访问我在 asp.net mvc 应用程序中的 Razor 视图中的某个位置的纬度和经度。

我想将该纬度和经度传递给控制器​​中的函数。但什么都没有发生。下面是我的代码片段。

JS代码：

```
if (status == google.maps.GeocoderStatus.OK) {

  map.setCenter(results[0].geometry.location);
  var marker = new google.maps.Marker( {
    map: map,
    [0].geometry.location
  });

  // I want to pass these value of latitude and longitude a function 
  // list_places() in UserController.
  latitude = results[0].geometry.location.lat();
  longitude = results[0].geometry.location.lng();   

  $.post("/User/list_places",
    {
      lati: latitude,
      longi : longitude
     }); 
```

控制器：

```
public ActionResult list_places(string usernameid, string lati, string longi) {

  list_placesModels list_place = new list_placesModels();
  list_place.Latitude = lati;
  list_place.Longitude = longi;
  return View(list_place);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:23:10.173

看起来缺少一些东西，首先是您发布的操作的 [HttpPost] 属性，然后是正确数量的参数，看起来您传入 2 但期望 3？请参阅下面的工作示例。

**html/Javascript**

```
<script type="text/javascript">
function buttonclick() {
    var requestData = {
        lati: 'latitude',
        longi: 'longitude'
    };

    $.ajax({
        url: '/Home/populate_place',
        type: 'POST',
        data: requestData,
        dataType: 'json'
    });
};
</script>

<button onclick="buttonclick()">Click</button> 
```

**控制器动作**

```
[HttpPost]
public ActionResult populate_place(string lati, string longi)
{
    return RedirectToAction("About", "Home");
} 
```

如果您在控制器操作返回上放置一个断点，如果您检查参数，您将看到它们已被填充。

# python - 挂钩到 mercurial pretxncommit。并且不能导入请求模块？

> ID：15250697
> 
> 赞同：2
> 
> 时间：2013-03-06T14:59:27.377
> 
> 标签：python, mercurial, commit, pre-commit-hook

嗨，我正在尝试连接到 mercurial pretxncommit python 文件。
我的大部分代码都可以正常工作，但出现此错误：

> 错误：pretxncommit.pcrcheck 挂钩引发异常：没有名为请求事务中止的模块！回滚完成中止：没有名为请求的模块！

我正在尝试使用`requests.get`. `import requests`在我制作的另一个独立 python 文件中工作正常，但似乎将它挂钩到 mercurial 会导致无法导入此模块的问题。
那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:55:39.903

所以我最终不得不添加所有这些哈哈。您必须将外部包的路径添加到 Mercurial 使用的路径上。（[http://tortoisehg.bitbucket.io/manual/2.9/faq.html](http://tortoisehg.bitbucket.io/manual/2.9/faq.html)）是的，看起来它们都是`requests module`正常工作所必需的，没有它们，我不断收到不同的导入错误。

这是我添加的内容：

```
import sys
sys.path.append(r'C:\\Python27\\Lib\\site-packages\\')
sys.path.append(r'C:\\Python27\\Lib\\')
sys.path.append(r'C:\\Python27\\Lib\\site-packages\\requests-1.1.0-py2.7.egg\\')
sys.path.append(r'C:\\Python27\\Lib\\site-packages\\simplejson-3.1.0-py2.7.egg\\simplejson')
sys.path.append(r'C:\\Python27\\Lib\\site-packages\\simplejson-3.1.0-py2.7.egg\\')
sys.path.append(r'C:\\Python27\\Lib\\site-packages\\simplejson-3.1.0-py2.7.egg\\simplejson\\tests\\') 
```

# c# - 如何使用linq查询对象的子对象

> ID：15250707
> 
> 赞同：2
> 
> 时间：2013-03-06T14:59:37.997
> 
> 标签：c#, asp.net, linq, object, methods

我有一个客户对象。Customer 对象可能包含多个 Address 对象。

例如，我想在 Customer 对象上设置一个方法`GetCity`。

现在，每个 Address 对象都有一个 addressId，所以我试图通过 linq 查询该属性。

下面是我的代码（我已经为这个问题剪掉了它）

客户对象...

```
public class Customer
{
    private string _customerNo;
    private List<CustomerAddress> _addresses = new List<CustomerAddress>();
    //other members immitted from this sample

    //constructor code, immitted from this sample

    public List<CustomerAddress> Addresses
    {
        get { return _addresses; }
    }
    //other properties immitted from this sample    

    public string GetCity(string id)
    {
        var city = (from a in _addresses
                        where a.AddressID == id
                        select a.City).Single();

        return city;
    }   
}

the Address Object...
public class CustomerAddress
{
    private string _addressid;
    private string _city;
    //other members immitted from this sample

    public CustomerAddress(string strAddressID, string strAddressLister, string strAddress1, string strAddress2, string strAddress3, string strCity, string strState, string strPostCode, string strCountry,
        bool booDefaultAddress, string strDeliveryAddress, string strInvoiceAddress, string strPayAddress, string strVisitAddress, string strDeliveryTerms, string strShipVia, string strRouteId)
    {
        _addressid = strAddressID;
        _addresslister = strAddressLister;
        _address1 = strAddress1;
        _address2 = strAddress2;
        _address3 = strAddress3;
        _city = strCity;
        _state = strState;
        _postcode = strPostCode;
        _country = strCountry;
        _defaultaddress = booDefaultAddress;
        _deliveryaddress = strDeliveryAddress;
        _invoiceaddress = strInvoiceAddress;
        _payaddress = strPayAddress;
        _visitaddress = strVisitAddress;
        _deliveryterms = strDeliveryTerms;
        _shipvia = strShipVia;
        _routeid = strRouteId;
    }

    ////////////////////////////
    //CustomerAddress Properties
    ////////////////////////////
    public string AddressID
    {
        get { return _addressid; }
    }    
    public string City
    {
        get { return _city; }
    }
    //other properties immitted from this sample
} 
```

当我`GetCity(id)`在 Customer 对象上运行该方法时，我得到了错误。

> System.InvalidOperationException：序列不包含任何元素

我还在 linq 查询中尝试了以下代码，但得到了相同的结果。

```
public string GetCity(string id)
{
    var city = (from a in this.Addresses
                    where a.AddressID == id
                    select a.City).Single();

    return city;
} 
```

和...

```
public string GetCity(string id)
    {
        var city = (from a in this._addresses
                        where a.AddressID == id
                        select a.City).Single();

        return city;
    } 
```

我知道 Customer 对象中确实包含 Address 对象，但我不确定如何让`GetCity`Method 工作。

任何帮助，将不胜感激。如果我错过了任何重要信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:05:36.617

这里的问题要么是 _addresses 集合根本不包含任何元素，**要么**是 _addresses 集合不包含任何`AddressID`等于 id 的元素（可能更有可能）。

如果`Single()`少于 1 (0) 项或多于一项符合您的给定条件，它会引发异常。如果您只是想`null`在没有匹配项时返回，请使用`SingleOrDefault()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T15:06:09.683

```
where a.AddressID == id 
```

正在过滤掉您的所有地址，因此当您调用`Single`空枚举时会收到该错误消息。

您可以切换`Single`到`SingleOrDefault`，但我认为主要问题是地址比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:05:16.170

似乎 linq 查询没有返回您在列表中填充的任何项目？你确定请求的 id 存在吗？

Single 需要一个 IEnumerable，其中只有 1 个项目

# javascript - .less 的跨浏览器不透明度混合

> ID：15250708
> 
> 赞同：9
> 
> 时间：2013-03-06T14:59:40.343
> 
> 标签：javascript, css, cross-browser, less, phpstorm

我正在尝试在 LESS 中使用 Javascript 在 phpstorm 中进行编译。

我正在尝试基于在此站点上找到的不透明度的跨浏览器实现来创建一个函数：[链接](http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/)

具体来说，我正在尝试创建一个 LESS 函数来重新创建这段代码：

```
.crossbrowseropacity {
    /* Fallback for web browsers that doesn't support RGBa */
    background: rgb(0, 0, 0);
    /* RGBa with 0.6 opacity */
    background: rgba(0, 0, 0, 0.6);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
} 
```

这就是我在 LESS 中实现的目标：

```
.crossbrowser(@color,@alpha){
  @myred:red(@color);
  @mygreen:green(@color);
  @myblue:blue(@color);
  @ievalue:Math.floor(@alpha * 255).toString(16);
  background-color: @color;
  background-color: rgba(@myred,@mygreen,@myblue,@alpha);

/* For IE 5.5 - 7*/

  filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#@ievalue+@myred+@mygreen+@myblue, endColorstr=#@ievalue+@myred+@mygreen+@myblue);

  /* For IE 8*/

  -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#@ievalue+@myred+@mygreen+@myblue, endColorstr=#@ievalue+@myred+@mygreen+@myblue)";
} 
```

它不会编译正确..有人可以帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T19:34:19.637

假设您使用的是 LESS 1.3.1 或更高版本，那么这就是您想要的（使用内置函数）：

**较少的**

```
//define mixin
.crossbrowser(@color,@alpha){
  @rgba: rgba(red(@color),green(@color),blue(@color),@alpha);
  @argb: argb(@rgba);
  background-color: @color;
  background-color: @rgba;
  filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr=@{argb}, endColorstr=@{argb})";
  -ms-filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr=@{argb}, endColorstr=@{argb})";
}

//use it
.crossbrowser(red, .2); 
```

**CSS 输出**

```
background-color: #ff0000;
background-color: rgba(255, 0, 0, 0.2);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#33ff0000, endColorstr=#33ff0000);
-ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#33ff0000, endColorstr=#33ff0000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:17:25.847

从[文档](http://lesscss.org/#-javascript-evaluation)：

> 但是，如果您仍想在 .less 中使用 JavaScript，可以通过用反引号包装表达式来完成：

```
@var: `"hello".toUpperCase() + '!'`; 
```

所以你的线应该是这样的（我认为）：

```
@ievalue:`Math.floor(@alpha * 255).toString(16)`; 
```

而且由于您在内部使用了变量，因此您可能需要使用[string interpolation](http://lesscss.org/#-string-interpolation)，但话又说回来，您可能不需要，因为您的 @alpha 不在字符串中。如果这不起作用，试试这个：

```
@ievalue:`Math.floor(@{alpha} * 255).toString(16)`; 
```

*那个看起来很有趣，我认为这是错误的。希望第一个有效。但看起来您需要在稍后执行此操作时使用插值：*

```
"...#@ievalue+@myred+@mygreen+@myblue..." 
```

*因为您在示例代码最后一行的字符串中，所以我认为应该是：*

```
"...#@{ievalue}+@{myred}+@{mygreen}+@{myblue}..." 
```

至于您的最新问题，您可能需要使用另一个称为转义的位：

> **[逃跑](http://lesscss.org/#-escaping)**
> 
> 有时您可能需要输出一个 CSS 值，该值要么不是有效的 CSS 语法，要么使用 LESS 无法识别的专有语法。
> 
> 为了输出这样的值，我们把它放在一个以 ~ 为前缀的字符串中，例如：

```
.class {
  filter: ~"ms:alwaysHasItsOwnSyntax.For.Stuff()";
} 
```

所以你的最后两行应该是这样的：

```
filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr=#@{ievalue}+@{myred}+@{mygreen}+@{myblue}, endColorstr=#@{ievalue}+@{myred}+@{mygreen}+@{myblue})";

/* For IE 8*/

-ms-filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr=#@{ievalue}+@{myred}+@{mygreen}+@{myblue}, endColorstr=#@{ievalue}+@{myred}+@{mygreen}+@{myblue})"; 
```

我找到[了这个非常简短的例子](http://www.thebrightlines.com/2011/11/25/filter-styles-in-less/)来支持它，但同样，我还没有尝试过。

# apache-flex - Flex DataGrid 行根本不呈现

> ID：15250710
> 
> 赞同：0
> 
> 时间：2013-03-06T14:59:42.943
> 
> 标签：apache-flex, datagrid, air, rendering

我的应用程序使用了许多 DataGrid。我有一个带有 DataGrid 的弹出窗口，目前大约 50% 的时间，当第一次弹出弹出窗口时，DataGrid 行是空白的 - 没有绘制任何内容，甚至没有绘制网格线（请参见随附的屏幕截图）。正确绘制了标题，并绘制了滚动条以显示所有数据项，但是当单击滚动条时，我从动画插值器中得到一个异常。除此之外，我没有收到任何错误或异常，只是没有渲染项目。没有自定义项呈现器，但一列有一个 TextInput 网格项编辑器。

有没有人见过这样的事情？有人对我应该从哪里开始寻找有任何建议吗？正如我所提到的，通常弹出窗口显示正确（并且我所有其他 DataGrid 都很好），所以我的代码中没有任何明显的问题。

我应该补充一点，我只在 Windows (XP SP3) 上看到这个问题。当我在 OS X 上运行我的应用程序时，我没有看到问题发生。我正在使用 Flash Builder 4.7 和最新的 AIR SDK（尽管我的代码已经有几年的历史了，而且还不是完全“前沿”）。

干杯，

约翰：^P ![显示未渲染行的屏幕截图](../Images/5ed816b3412407e631c83c20cd493034.png)

# ember.js - Ember.js 发送邮件

> ID：15250713
> 
> 赞同：1
> 
> 时间：2013-03-06T14:59:53.587
> 
> 标签：ember.js

嘿，有什么方法可以通过 ember.js 向某人发送邮件。我已经制作了一个联系表格，我正在使用 php 发送邮件。有一种方法可以使用 node.js 处理 ajax 请求，但有没有办法使用 ember.js 来处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:02:37.197

Ember 存在于客户端上，因此并非如此。您可以只打开一个 mailto: 链接，然后让他们在他们的客户端（例如 Outlook、Mail、Thunderbird）中发送电子邮件，但这可能不是您想要的。

通常，您仍然会使用 PHP、Ruby、Node.js 或其他方式向服务器端脚本执行 ajax 请求。

# javascript - 在 JavaScript 中根据 ID 和属性定义某些表切换

> ID：15250714
> 
> 赞同：1
> 
> 时间：2013-03-06T15:00:01.180
> 
> 标签：javascript, jquery, asp.net, html, asp.net-mvc-3

在我的项目中，我们有一个文件“permissionType.js”，它确定当前用户的权限角色并相应地限制某些功能。这是通过将属性`data-projectsecurity`应用于它适合的每个区域并使用以下脚本来完成的，该脚本在遇到这种情况时运行。我们希望它使不具有正确角色的用户无法深入研究表条目，因为该`onclick`属性已被删除。

请看下面的代码：

```
checkPermission = function () {
    $('[data-projectsecurity]').each(function () {
        var id = $(this)[0].id;
        var node = $(this)[0];
        var notInRole = true;
        if (objPermission) {
            $.each(objPermission, function (i, v) {
                if (v == node.getAttribute('data-projectsecurity')) {
                    notInRole = false;
                };
            });
            if (notInRole) {
                switch (node.nodeName) {
                    case 'TR':
                        $(node).removeAttr("onclick");
                        break;
                    case 'TD':
                        $(node).removeAttr("onclick");
                        break;
                };
            };
        }
    }); 
```

我提出的问题是，我如何最好地将其仅应用于具有该`data-projectsecurity`属性的特定 ID 的表。举例来说，如果我只希望这会影响具有 ID 的表中的行，`transactionTable`并且`ownerTable`是否需要在 switch 中创建一个 if 语句？

类似于`if ($(id)) { $(node).removeAttr("onclick") };`id 的东西是`#transactionTable tr.data-bancpaysecurity`选择`transactionTable`具有安全属性的行。

```
case 'TR':
    if ($('#transactionTable tr.data-projectsecurity')) 
    {
        $(node).removeAttr("onclick");
    } 
```

这是应用属性的表条目的示例：

```
 <td style="@numericStyle" data-projectsecurity = "@PermissionType.ViewTransaction.ToString()" onclick="window.location='/Transaction/ViewCIPS/@trnId'">@val</td> 
```

对不起，如果这看起来过于复杂，但希望你能看到我的目标！如果您需要有关此问题的更多信息，请告诉我，非常感谢任何提供帮助的人。

# asp.net-mvc - 如何在 .net 的 MVC 中创建安全的每个 Web 请求事务？

> ID：15250715
> 
> 赞同：8
> 
> 时间：2013-03-06T15:00:04.820
> 
> 标签：asp.net-mvc, asp.net-mvc-4, transactions, httpwebrequest, transactionscope

我需要在它处理的每个 Web 请求中使我的整个应用程序都具有事务性。

我需要启动事务，如果控制器中没有异常，则提交它。否则，回滚。

到目前为止，我有以下实现：

*   首先，我在控制器上创建事务作为依赖项。
*   然后，我做我的控制器/服务/存储库/其他工作。
*   最后，主要的抽象控制器类执行它的`OnActionExecuted`方法，我要么提交它，要么不提交。

以下是我使用的技术列表：

*   MVC 4
*   忍者
*   自动映射器
*   服务模式

**现在**，我想知道**死锁**是怎么回事？**当同时**处理两个 Web 请求时会发生什么，并且他们将获得使用两个存储库（链接到他们的`DataContext`实例）的权利，这意味着数据库中的**两个表**？

例如：一个请求首先要读取 table`Table1`然后`Table2`，同时另一个请求想要使用`Table2`然后使用`Table1`。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T12:36:53.707

您可以处理事务的开始和停止以调用 DB 请检查此

[并发运行这两条语句时如何防止EntityFramework死锁](https://stackoverflow.com/questions/13097179/how-to-prevent-entityframework-deadlock-when-concurrently-running-these-two-stat)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T06:56:52.117

好的，我已经意识到这个问题的一些解决方案：

*   第一个是拥有所有表的列表并通过该列表访问它们。因此，如果上下文都需要这两个示例，`Table2`则永远不会访问示例`Table1`，并且不会发生死锁。

*   第二个是创建一个惰性 IO 系统来跟踪所有必要的更改（比如添加一个项目，检索它的 id 并在其他地方使用它）。但它似乎很难构建。

*   另一种方法是在每个数据库请求开始时为其创建应用程序级锁，并在结束时释放它。该解决方案完全没有死锁，但它仅适用于低负载系统。

# jquery - 使用 parseFloat 时获取 NaN

> ID：15250716
> 
> 赞同：0
> 
> 时间：2013-03-06T15:00:08.610
> 
> 标签：jquery, json

我正在使用此代码进行计算：

```
$('#outfitters').submit(function(event) {
                var days = $('#days').val();
                var final_price = 0;

                var length = parseFloat($("#length").val());
                var material = parseFloat($("#material").val());
                var fibre = parseFloat($("#fibre").val());
                var kevlar = parseFloat($("#kevlar").val());
                final_price = parseFloat(days * (length + material + fibre + kevlar));

                console.log(length);
                alert("Final Price is: " + final_price);
                window.location.reload(true);
        }); 
```

所有值都从如下所示的 JSON 中检索，

```
{
   "company":"SS",
   "locations":[
        { "name":"Kincardine" },
        { "name":"Killarney"},
        { "name":"Bon Echo"}
    ],
    "twelve": 25.00,
    "fourteen": 30.00,
    "sixteen":35.00,
    "paddles": 10.00,
    "lifevest": 10.00,
    "fibreglass":0.00,
    "kevlar": 10.00
} 
```

问题是我在计算 final_price 时得到了 NaN，尽管我完美地检索了所有值。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:01:54.097

仔细检查您的 days 元素的值。尝试将其解析为浮点数。

```
var days = parseFloat($('#days').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:02:40.533

我猜天被视为一个字符串：

```
var days = $('#days').val(); 
```

你也应该这样`parseFloat`做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:05:11.570

JSON 中的值之一必须是 NaN，因此您应该在计算之前对每个值进行验证/转换/解析，否则输出将为 NaN。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:05:39.883

调试的最佳方法是在每个 parseFloat 语句之后放置一个警报显示值，以查看导致 NaN 的变量，然后对其进行排序。

# hyperlink - 指向 URL 的 Mediawiki 文件链接未更新

> ID：15250719
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:00:12.227
> 
> 标签：hyperlink, format, mediawiki

我有一个带有此格式文件链接的 mediawiki 页面：

```
[[File:Workflow.png|link=<URL goes here>]] 
```

它确实有效，但我认为图像将始终与服务器保持同步。今天我更改了图像，但未在 Wiki 上更新。单击图像转到它的更新版本。

任何的想法？这是实现这一目标的错误方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:46:07.690

看起来您想要做的是嵌入外部图像。为此，请将`$wgAllowExternalImages`LocalSettings.php 中的参数设置为`true`. 然后，在您的文章中，只需将图片的 URL 添加到您希望它出现的位置。

但是，请注意外部图像的缩略图需要[robotshumb](http://www.robothumb.com/)的帮助。语法如下：

```
http://www.robothumb.com/src/[url]@[size](.jpg) 
```

更多信息[在这里](http://www.mediawiki.org/wiki/Help%3aImages)。

# java - 来自控制台的颜色保存在文本文件中，例如。[33;1m

> ID：15250721
> 
> 赞同：0
> 
> 时间：2013-03-06T15:00:18.937
> 
> 标签：java, text, colors, message, command-prompt

我有严重的问题。我有一个与命令提示符一起工作的程序，该程序可以将颜色信息写入其中。它还将消息保存到文本 .log 文件中。但是当我用我的java程序阅读日志时，它会在黄色文本的情况下写下：`[33;1m`在应该是黄色的文本之前。我注意到那`[37;22m`是深绿色，`[37;1m`是白色等。（在此代码之前是一个小箭头，但我无法将其粘贴到任何地方。）

有谁知道这个代码应该是什么以及如何将它重写为`java.awt.Color.Color`我可以使用的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:02:19.870

这些可能是[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:02:24.373

这些是[ANSI 终端代码](http://en.wikipedia.org/wiki/ANSI_escape_code)。恐怕我对你问题的第二部分无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:06:58.357

是的，这些是转义序列，用于向终端发出您想要更改当前颜色的信号（这种样式也用于告诉终端也移动光标。）。这是什么类型的终端？AFAIK 黄色应该是`\033[1;33m`，深绿色应该是`\033[0;32m`，白色应该是`\033[1;37m`。切换回以前的颜色将是 `\033[0m`.

至于将它们转换为 Java Color，我不相信有一个内置的 API 调用，但是自己编写一个应该很容易。

如果你正在为 Linux/Bash 写作，[这里有一个方便的指南](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)：

# c# - 从 Windows 应用商店应用程序在“我的图片”中创建子文件夹

> ID：15250726
> 
> 赞同：0
> 
> 时间：2013-03-06T15:00:31.260
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml, .net-4.5

我正在尝试从 Windows 商店应用程序的“我的图片”文件夹中创建文件夹结构。但我似乎无法通过第一级。

我使用以下代码创建我的第一级文件夹：

```
IAsyncOperation<StorageFolder> appFolder = Windows.Storage.KnownFolders.PicturesLibrary.GetFolderAsync("AppPhotos");

if (appFolder==null)
{
    //Create folder
    appFolder = Windows.Storage.KnownFolders.PicturesLibrary.CreateFolderAsync("AppPhotos");
} 
```

现在我想在这个调用 Level1 下创建另一个文件夹。

我期望能够做到以下几点：

```
appFolder.CreateFolderAsync("Level1"); 
```

但是我的 appFolder 没有 CreateFolderAsync 方法。

那么，如何创建该文件夹，然后如何选择它？

提前致谢

我正在使用 Visual Studio 2012、C#4.5、XAML，并且正在编写一个 Windows 商店应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T22:24:19.317

You seem to have missed the async/await revolution there and assume the operation to get a folder is a folder. This should work:

```
var appFolder = await Windows.Storage.KnownFolders.PicturesLibrary.GetFolderAsync("AppPhotos");

if (appFolder == null)
{
    //Create folder
    appFolder = await Windows.Storage.KnownFolders.PicturesLibrary.CreateFolderAsync("AppPhotos");
} 
```

You also need to add the `async` keyword in the method signature wherever the above code is located and then also if your method returns a value of type `T` - change it to return `Task<T>`, so for method signature:

```
private void MyMethod() 
```

you would change it to

```
private async Task MyMethod() 
```

and if your current signature is

```
private bool MyMethod() 
```

you would need to do

```
private async Task<bool> MyMethod() 
```

Finally in that last case - you would need to also change your calls from

```
var myValue = MyMethod(); 
```

to

```
var myValue = await MyMethod(); 
```

etc. marking all methods that make calls that await other methods with the `async` keyword.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-22T06:08:07.030

在图片库中创建文件夹和子文件夹：

```
 StorageFolder appFolder;
  try
    {
       appFolder = await  Windows.Storage.KnownFolders.PicturesLibrary.GetFolderAsync("AppPhotos");

    }
  catch (Exception ex)
    {

      appFolder = null;

     }
 if (appFolder == null)
   {

   //Create folder
    appFolder = await Windows.Storage.KnownFolders.PicturesLibrary.CreateFolderAsync("AppPhotos");

    }

    //Create sub-folder
   await appFolder.CreateFolderAsync("level1"); 
```

# scala - 如何在 Playframework 中将 Oracle 存储过程与 Scala Anorm 一起使用

> ID：15250734
> 
> 赞同：3
> 
> 时间：2013-03-06T15:00:49.340
> 
> 标签：scala, playframework, oracle10g, playframework-2.0

我有许多以字符串列表为结果的存储过程

如何使用 scala 访问 play 2.0 Framework 中的 refcurser？

有人可以举一个简单的例子我如何填写清单吗？

我试过这个：

```
case class XXXX(name: String, description: String)

object XXXX{

val simple = {
get[String]("name") ~
get[String]("description") map {
case name~description => XXXX(name, description)
}
}

def all(): List[XXXX] = DB.withConnection { implicit c =>
SQL("""exec PROCEDURE""").as(XXXX.simple *)
}

} 
```

但这对我不起作用

提前致谢

**编辑：** 甚至可以从存储过程中填充列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:53:04.027

字符串列表将对应于 oracle 用户定义的对象。我希望这就是你的意思。可能的解决方案是 1）首先映射 oracle 集合对象，然后在 scala 代码中使用或 2）从存储的过程而不是集合返回一个 ref 游标。

希望这能提供一些想法。

# wpf - 在 WPF 中更新形状值的最佳方法

> ID：15250735
> 
> 赞同：1
> 
> 时间：2013-03-06T15:00:50.880
> 
> 标签：wpf, mvvm, canvas, architecture

我这里有一个很大的问题。我在我的绘图应用程序 (Caliburn.Micro) 中使用 MVVM，但我找不到合理的方法让它通过实时预览绘制形状。

绘图画布由一个获取输入并将数据提供给模型的画布和一个包含许多画布的网格组成，每一层一个。模型触发事件（我将以 Line 为例）：

1.  用于创建线的事件 - 它创建一个简单的线对象，具有起点、终点、颜色、粗细和自动生成的 ID 的属性。该事件具有添加到的行和层。
2.  在鼠标移动时，在 1\. 中创建的线对象的端点被更新，并以更新的形状及其图层作为参数触发一个新事件。
3.  在鼠标上 2\. 也会发生。

现在在注册到这些事件的 ViewModel 中，我只需向正确的画布添加一个等效的 WPF 形状（在本例中为 System.Windows.Shapes.Line），并在添加形状时设置参数。但是我想不出任何可以在移动鼠标以显示绘制形状的实时预览时更新形状参数的想法。

我尝试使用依赖属性，但它没有用，而且似乎有点矫枉过正（因为所有这些画布中的形状数量）。我也尝试过扩展 Line，但这是不可能的，因为类是密封的。我还需要与绘制的形状进行交互（例如调整大小、旋转）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:20:14.670

我会研究 writeablebitmap 和[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)扩展。这将具有相当不错的性能，具体取决于您必须渲染多少东西。如果您需要同时在屏幕上显示 1000 多个内容，您可能需要考虑使用 DirectX 和 SlimDx 或 SharpDx 等包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:08:24.670

所以你基本上需要两行，一条看起来像以前一样，另一条看起来像用户“提交”他的更改时的样子？您可以拥有一个包含两种相同形状类型的容器类，并在用户处于编辑模式时移动第二种。当用户退出编辑模式时，您可以保留第一个（用户取消）或使第二个成为新的、唯一的第一个形状。

# tcl - TCL 我想阅读 fail2ban 新日志并将它们打印到某个频道

> ID：15250736
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:01.773
> 
> 标签：tcl, eggdrop

当文件大小或行数更改时，我想从 fail2ban 日志中读取所有新行。我只想将 fail2ban 日志中的新行打印到指定通道。

我尝试：

```
bind time - * checklogs
set kanal "#logzzz"
set logf2b "/var/log/fail2ban.log"

proc linecount {file} {
        set i 0
        set fid [open $file r]
        while {[gets $fid line] > -1} {incr i}
        close $fid
        return $i
}

set oldlines [linecount $logf2b]
set filesize [file size $logf2b]

proc checklogs {min hour day mon year} {
    global kanal oldlines logf2b filesize
    if {[file size $logf2b] != $filesize} {
        set newfile [open $logf2b "r"]
        while {1} {
            set line [gets $newfile $oldlines]
            if {[eof $newfile]} {
                close $newfile
                break
            }
            putserv "PRIVMSG $kanal :Fail2Ban $line"
        }
    } else { putserv "PRIVMSG $kanal :No new fail2ban logs!" }
} 
```

但不起作用：/

任何解决方案或解释如何制作？

# zend-framework2 - ZF2 子路由问题

> ID：15250737
> 
> 赞同：3
> 
> 时间：2013-03-06T15:01:04.547
> 
> 标签：zend-framework2, zend-route

我在设置 child_routes 时遇到了一些麻烦。除非我将它们分开，否则它们不起作用，尽管最终结果应该是相同的！：

这就是我想要实现的目标：

```
'router' => array(
        'routes' => array(
            'app' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route' => '[/:info]/app',
                    'defaults' => array(
                        '__NAMESPACE__' => 'X\App',
                        'controller' => 'Index',
                        'action' => 'index',
                    ),
                    'may_terminate' => true,
                    'child_routes' => array(
                        'example' => array(
                            'type' => 'Zend\Mvc\Router\Http\Segment',
                            'options' => array(
                                'route' => '/example[:/data]',
                                'defaults' => array(
                                    'action' => 'example',
                                ),
                            ),
                        ),
                    ),
                ),
            ),
        ), 
```

但它只能这样工作：

```
'router' => array(
        'routes' => array(
            'app' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route' => '[/:info]/app',
                    'defaults' => array(
                        '__NAMESPACE__' => 'X\App',
                        'controller' => 'Index',
                        'action' => 'index',
                    ),                    
                ),
            ),
            'app.example' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route' => '[/:info]/app/example[/:data]',
                    'defaults' => array(
                        '__NAMESPACE__' => 'X\App',
                        'controller' => 'Index',
                        'action' => 'example',
                    ),
                ),
            ),
        ), 
```

..任何人都知道我可能做错了什么..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:07:34.623

您的子路线在错误的位置，它们不属于`options`数组，也不属于`may_terminate key`，试试这个......

```
'router' => array(
    'routes' => array(
        'app' => array(
            'type' => 'Zend\Mvc\Router\Http\Segment',
            'options' => array(
                'route' => '[/:info]/app',
                'defaults' => array(
                    '__NAMESPACE__' => 'X\App',
                    'controller' => 'Index',
                    'action' => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'example' => array(
                    'type' => 'Zend\Mvc\Router\Http\Segment',
                    'options' => array(
                        'route' => '/example[:/data]',
                        'defaults' => array(
                            'action' => 'example',
                        ),
                    ),
                ),
            ),
        ),
    ),
), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:09:21.893

你的语法错误

在第一个示例中，您的选项数组中有 chil_routes 定义，它需要与选项数组处于同一级别：

```
'router' => array(
    'routes' => array(
        'app' => array(
            'type' => 'Zend\Mvc\Router\Http\Segment',
            'options' => array(
                'route' => '[/:info]/app',
                'defaults' => array(
                    '__NAMESPACE__' => 'X\App',
                    'controller' => 'Index',
                    'action' => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'example' => array(
                    'type' => 'Zend\Mvc\Router\Http\Segment',
                    'options' => array(
                        'route' => '/example[:/data]',
                        'defaults' => array(
                            'action' => 'example',
                        ),
                    ),
                ),
            ),
        ),
    ), 
```

# android - Android ZXing 集成错误

> ID：15250741
> 
> 赞同：1
> 
> 时间：2013-03-06T15:01:13.733
> 
> 标签：android, zxing

我是一名学生，作为我在学校的 android 项目的一部分，我需要包含一个条形码应用程序。我已经清楚地遵循了

[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

整合ZXing。我在 3 个类 CaptureActivityHandler、DecodeHandler 和 SearchBookContentsActivity 中遇到了错误，这些错误通过将 switch-case 语句更改为 if-else 来解决，如下所示：

```
if(message.what==R.id.decode){
        decode((byte[]) message.obj, message.arg1, message.arg2);
    }
    else if(message.what==R.id.quit){
        running = false;
        Looper.myLooper().quit();
    } 
```

在我的应用程序中，按下按钮后，条形码扫描仪意图应该启动。但我只收到一条错误消息，说我的应用程序已停止。logcat 消息如下：

```
03-06 20:18:58.631: D/dalvikvm(13812): Late-enabling CheckJNI
03-06 20:18:58.691: I/dalvikvm(13812): Turning on JNI app bug workarounds for target SDK version 10...
03-06 20:18:59.771: D/dalvikvm(13812): GC_FOR_ALLOC freed 57K, 3% free 8839K/9091K, paused 58ms
03-06 20:19:00.441: I/dalvikvm-heap(13812): Grow heap (frag case) to 11.692MB for 3145744-byte allocation
03-06 20:19:00.801: D/dalvikvm(13812): GC_CONCURRENT freed 1K, 3% free 11910K/12231K, paused 326ms+1ms
03-06 20:19:01.881: D/TextLayoutCache(13812): Using debug level: 0 - Debug Enabled: 0
03-06 20:19:06.201: D/dalvikvm(13812): GC_CONCURRENT freed 3118K, 25% free 9768K/12999K, paused 17ms+40ms
03-06 20:19:06.301: D/dalvikvm(13812): GC_FOR_ALLOC freed 4K, 23% free 10123K/12999K, paused 91ms
03-06 20:19:06.521: D/dalvikvm(13812): GC_FOR_ALLOC freed <1K, 20% free 10486K/12999K, paused 79ms
03-06 20:19:15.621: W/dalvikvm(13812): VFY: unable to resolve static field 1373 (ISSUE_NUMBER) in Lcom/google/zxing/ResultMetadataType;
03-06 20:19:15.621: D/dalvikvm(13812): VFY: replacing opcode 0x62 at 0x0017
03-06 20:19:15.621: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.651: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/ResultPoint;)
03-06 20:19:15.651: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/ResultPoint;)
03-06 20:19:15.651: I/dalvikvm(13812): Could not find method com.google.zxing.ResultPoint.getX, referenced from method com.google.zxing.client.android.CaptureActivity.drawLine
03-06 20:19:15.651: W/dalvikvm(13812): VFY: unable to resolve virtual method 3917: Lcom/google/zxing/ResultPoint;.getX ()F
03-06 20:19:15.651: D/dalvikvm(13812): VFY: replacing opcode 0x6e at 0x0000
03-06 20:19:15.651: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.651: I/dalvikvm(13812): Could not find method com.google.zxing.Result.getResultPoints, referenced from method com.google.zxing.client.android.CaptureActivity.drawResultPoints
03-06 20:19:15.651: W/dalvikvm(13812): VFY: unable to resolve virtual method 3913: Lcom/google/zxing/Result;.getResultPoints ()[Lcom/google/zxing/ResultPoint;
03-06 20:19:15.651: D/dalvikvm(13812): VFY: replacing opcode 0x6e at 0x0003
03-06 20:19:15.661: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.671: I/dalvikvm(13812): Could not find method com.google.zxing.Result.toString, referenced from method com.google.zxing.client.android.CaptureActivity.handleDecodeExternally
03-06 20:19:15.671: W/dalvikvm(13812): VFY: unable to resolve virtual method 3916: Lcom/google/zxing/Result;.toString ()Ljava/lang/String;
03-06 20:19:15.671: D/dalvikvm(13812): VFY: replacing opcode 0x74 at 0x0053
03-06 20:19:15.671: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.681: I/dalvikvm(13812): Could not find method com.google.zxing.Result.getBarcodeFormat, referenced from method com.google.zxing.client.android.CaptureActivity.handleDecodeInternally
03-06 20:19:15.681: W/dalvikvm(13812): VFY: unable to resolve virtual method 3910: Lcom/google/zxing/Result;.getBarcodeFormat ()Lcom/google/zxing/BarcodeFormat;
03-06 20:19:15.681: D/dalvikvm(13812): VFY: replacing opcode 0x74 at 0x004a
03-06 20:19:15.681: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.691: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.691: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.701: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.701: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.701: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.701: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.701: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.701: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.711: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.721: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.721: W/dalvikvm(13812): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
03-06 20:19:15.751: W/dalvikvm(13812): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/google/zxing/client/android/CaptureActivity;
03-06 20:19:15.751: W/dalvikvm(13812): Class init failed in newInstance call (Lcom/google/zxing/client/android/CaptureActivity;)
03-06 20:19:15.751: D/AndroidRuntime(13812): Shutting down VM
03-06 20:19:15.751: W/dalvikvm(13812): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
03-06 20:19:15.751: E/AndroidRuntime(13812): FATAL EXCEPTION: main
03-06 20:19:15.751: E/AndroidRuntime(13812): java.lang.ExceptionInInitializerError
03-06 20:19:15.751: E/AndroidRuntime(13812):    at java.lang.Class.newInstanceImpl(Native Method)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at java.lang.Class.newInstance(Class.java:1319)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.os.Looper.loop(Looper.java:137)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at android.app.ActivityThread.main(ActivityThread.java:4441)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-06 20:19:15.751: E/AndroidRuntime(13812):    at dalvik.system.NativeStart.main(Native Method)
03-06 20:19:15.751: E/AndroidRuntime(13812): Caused by: java.lang.NoClassDefFoundError: com.google.zxing.ResultMetadataType
03-06 20:19:15.751: E/AndroidRuntime(13812):    at com.google.zxing.client.android.CaptureActivity.<clinit>(CaptureActivity.java:107)
03-06 20:19:15.751: E/AndroidRuntime(13812):    ... 15 more 
```

有人能帮帮我吗？我在 StackOverflow 上浏览了许多帖子，但找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:30:29.557

如果您**真的想嵌入 zxing 而不是将其与意图集成，我建议使用您可以在**[此处](https://github.com/kennydude/zxing-lib)找到的开箱即用库：https://github.com/kennydude/zxing-lib

正如 Mark 建议的那样，最常见的方法是与他们的应用程序集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T11:21:36.017

**您需要按照链接给出的步骤进行操作**

[http://www.androidaz.com/development/zxing-qr-reader-direct-integration](http://www.androidaz.com/development/zxing-qr-reader-direct-integration)

**你可以从下载 core.jar**

[http://repo1.maven.org/maven2/com/google/zxing/core/2.2/](http://repo1.maven.org/maven2/com/google/zxing/core/2.2/)

以上对我有用，如果您的程序仍然崩溃，只需将 core-2.2.jar 放入库中并清理您的项目

# ios - 将文本字段中的每个字符存储在数组中？

> ID：15250746
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:20.660
> 
> 标签：ios, objective-c

我在尝试将来自文本字段的输入存储到一个数组中时遇到问题，其中每个字符都位于一个单独的索引处。

我尝试将输入存储为字符串，以便将其全部设为大写并删除空格，但这也给我带来了问题。

我想一旦它被存储，我就可以遍历每个字母并将每个字符添加到一个可变数组中。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:06:42.363

如果您查看 [UITextFieldDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)，您可以从该委托中找到许多可能对您的任务有用的好方法。

这个委托有一个方法，每次用户按下一个键时都会调用它`UITextField`

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
 //assuming dict is declared NSDictionary
 [dict setObject:[yourTextField.text stringByReplacingCharactersInRange:range withString:string] forKey:@"KEY"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:22:19.030

```
-(void)textFieldDidEndEditing:(UITextField *)textField
{
  NSString *string  = textField.text;
  NSMutableArray *theArray = [NSMutableArray array];
  for (int i = 0; i < [string length]; i++) 
  {
    [theArray addObject:[NSString stringWithFormat:@"%c",[string characterAtIndex:i]]];
  }
} 
```

一旦用户结束他/她的编辑，我就会进行存储。

# java - 迷宫/网格（续） - 寻找最佳解决方案 - 记忆/学习问题 (JAVA)

> ID：15250748
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:24.193
> 
> 标签：java, game-physics, robot, maze

关于此处发现的先前问题：[连接迷宫/网格的墙壁，使所有墙壁相互连接](https://stackoverflow.com/questions/15096066/connecting-a-maze-grids-walls-so-all-are-interconnected)

目前，我的机器人读取左前、右前和右前的网格位置，如下所示：

```
[00][01][02]
[10][11][12]
[20][^^][22] 
```

面向北的 [21] 将显示为 [10][11][12]，其中可能包含其正在寻找的对象/踪迹。

在我的网格中有一条轨迹，我使我的机器人能够跟踪将传感器输入映射到如下操作：

```
Sensor Actions:
000 =
001 = 
010 =
011 =
100 =
101 =
110 =
111 = 
```

这些可以等于 turnleft()、turnright()、goforward() 或什么都不做。

目前它可以找到 14/15 的轨迹片段，但找不到与轨迹有间隙的最后一个片段，如下所示：

```
#KEY: x = empty, R = robot start position, T = trail

[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][T][x]
[x][x][x][x][x][x][x][x] <- Here is the gap!
[R][T][T][T][T][x][T][x]
[x][x][x][x][T][x][T][x]
[x][x][x][x][T][x][T][x]
[x][x][x][x][T][x][T][x]
[x][x][x][x][T][T][T][x] 
```

我遇到的问题是，当它在试验中达到一个空白时，它无法处理它并最终毫无意义地旋转，直到它耗尽生命。

我知道我需要添加某种形式的记忆或学习，但我不确定什么或如何实现它！

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:26:33.667

没有你的代码很难确定，但听起来你的机器人只是缺乏进入非轨迹空间的方法。假设你基本上有这样的东西（伪代码）：

```
if (isTrailAhead) {
    moveAhead();
} else {
    turn();
} 
```

显然，这不会让您弥合差距，因为您将继续在没有踪迹的情况下旋转。有很多方法可以解决这个问题；我想到的前两个是：

1.  存储一个计数器并在您每次寻找轨迹空间但没有看到时递增它。如果计数器超过某个数字（比如 4），无论那里有什么（假设这是可能的），都直接向前移动。每次前进时将计数器重置为 0。

    ```
    if (isTrailAhead) {
        moveAhead();
    } else {
        if (turnCounter > 4) {
            moveAhead();
        else {
            turn();
        }
    } 
    ```

    当然，在这种情况下，您需要一个名为 turnCounter 的实例变量，并且您的 moveAhead() 和 turn() 函数应酌情增加或重置此计数器。

2.  在上面的伪 else 子句中（当您看不到踪迹时），生成一个介于 0 和 10 之间的随机数。如果它大于某个预定数，请尽可能继续。

    ```
    if (isTrailAhead) {
        moveAhead();
    } else {
        if (new Random().nextInt(10) >= 8) {
            moveAhead();
        else {
            turn();
        }
    } 
    ```

基本上，您所需要的只是一种打破循环的方法。这些中的任何一个都应该为您解决问题。

# ruby-on-rails - ruby on rails 定义变量

> ID：15250749
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:25.483
> 
> 标签：ruby-on-rails, ruby, variables, private, public

我已经尝试了几个小时了。我对 Ruby 和 Rails 很陌生。

在 devise.html.erb 文件中，我有

```
<div class="container">
<%= render :partial => 'layouts/header' if user_signed_in? %>
</div> 
```

以上工作正常。如果用户已经登录，那么他们可以看到我页面顶部的标题，如果他们没有登录，他们就看不到它。

但我需要（因为用户必须在下一页输入地址）：

```
 <div class="container">
<%= render :partial => 'layouts/header' if current_user.registration_complete?  %> 
```

当我重新启动我的应用程序时，我收到错误消息：

```
NoMethodError in Devise/registrations#new 
```

我在我的项目其他地方的 user.rb 中定义了 registration_complete （我的项目的其他部分没有问题识别）为：

```
#Determines whether user completed his profile on registration or not
 def registration_complete?
self.address.present?
 end 
```

我应该在其他地方放置此代码，以便在我的 devise.html.erb 中识别它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:06:08.383

`NoMethodError in Devise/registrations#new`是因为——

考虑一下：

```
<div class="container">
<%= render :partial => 'layouts/header' if current_user.registration_complete?  %> 
```

上面的`current_user`代码是`nil`因为注册页面的用户没有登录。

nil`registration_complete`也没有方法。

您还可以通过以下方式检查`current_user`代码中任何地方的存在；

```
if current_user
 #User is logged in
    <div class="container">
    <%= render :partial => 'layouts/header' if current_user.registration_complete?  %>
else
 #User is not logged in
 #Don't try current_user.registration_complete? check here..it will give error.
end 
```

因此，只要您登录，您就可以将包含`current_user.registration_complete?`检查的代码放在应用程序的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:25:19.033

谢谢大家的帮助。如果没有像 Stackoverflow 这样的网站，我会迷路的！

最后，我结合使用了 Adbeel 和 Jesper 的解决方案，这似乎可以完成这项工作。

我用了：

```
<div class="container">
<%= render :partial => 'layouts/header' if user_signed_in? && current_user.registration_complete?%>
</div> 
```

正如我所说，它运作良好，但如果您认为前方潜伏着一些我不知道的灾难，如果您能告诉我，我将不胜感激！再次感谢。

克里斯托夫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:16:25.977

正如 Saurabh Jain 已经指出的那样，您的 current_user 有时会为零，因此您必须以某种方式处理它。

他的 if 语句`current_user`是处理它的好方法。

另一种结构化的方法是将确定用户是否看到标题的所有逻辑放入辅助方法中，或者甚至更好地放入演示者中（例如，参见[draper](https://github.com/drapergem/draper)）。

在控制器中，我还要确保这里始终存在一个用户对象。如果没有用户登录，我将创建一个新的 User 对象作为虚拟对象。这样一来，讨厌的 nil 问题就会减少。

例如：

```
# In your controller
@user = current_user || User.new

# In a helper
def can_see_header? (user)
  user_signed_in? and user.registration_complete?
end

# In view
<div class="container">
  <% if can_see_header? @user %>
    <%= render "layouts/header" %>
  <% end %>
</div> 
```

仅当您想要传递其他选项时，才需要渲染调用中的`:partial`键，至少在 Rails 的更高版本中是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:06:49.693

关于什么：

```
<%= render :partial => 'layouts/header' if current_user && current_user.registration_complete?  %> 
```

# database - 如何将一个特定属性更新到数据库，而不覆盖其余属性为 NULL

> ID：15250751
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:29.740
> 
> 标签：database, hibernate, hibernate-mapping

我想更新数据库的 UserData 属性之一，它具有（名称、街道、城市等），所以：

**关系和数据库属性：** 此 UserData 与他的用户有双向关系，其中使用 User.hbm.xml 上的 cascade="save-update"，所以

*用户*在数据库中有这个属性（id_user，*外键：* id_UserDetail，状态）

*UserData*有（id_UserDetail、*外键：* id_User 和经典信息字段名称、街道、电话等）

我使用这种方法更新到数据库： **更新方法**

```
public void ajaxNameListener(AjaxBehaviorEvent event) {         

             UserData usrData = new UserData();
             userData.setName(name);  // I want update only name property,but unfortunately rest is also overwriten to null in DB

                 User user = BeanFactory
                        .getHotelDAOService(User.class)
                         .findbyIdIndetifier(selectedUserId);   // selectedUserId is just identifier from my list of user,so here i declared which concrete User be updated by Id of Users           

                    user.setUserData(userData);
          BeanFactory.getHotelDAOService(User.class)
                    .update(user);
} 
```

此方法在我的 Jsf 页面上用作侦听器形式`<a4j:>`，但这没有问题，

我需要以某种方式修复此方法以仅更新我需要的这个 DB 字段，而其余部分必须取消，但在这种情况下，我成功地进行了更改，例如在字段“名称”上通过特定 ID 更新字段名称，但其余的 UserData 列是覆盖为NULL，

有人可以给我一些建议如何修改此方法吗？或者可以根据这种情况编写自己的方法，这会导致只更新我想要更新的这个字段，而不是数据库中的 NULL，非常感谢你的帖子和回复，干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:52:26.283

出现此问题是因为在您保存/更新用户的实例时，它的 FK 属性没有值。因此 FK 属性的值变为空。

为避免这种情况，您可以按照下面提到的任何一种方式进行操作：

1.  不要使用 hibernate API 更新实例，而是编写一个 HQL 来仅修改您想要更改的属性。（例如你的名字。）
2.  从休眠会话加载用户实例，更改该实例中所需属性的值，更新用户实例。所有这 3 个操作必须在单个休眠会话中完成。

# jquery - 删除复选框菜单 Primefaces 中的所有复选框

> ID：15250754
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:36.667
> 
> 标签：jquery, primefaces

我想删除primefaces（SelectManyCheckbox）组件中的全选选项。 ![在此处输入图像描述](../Images/f3117ab094b5d9f96a3362ee159e1264.png)

我正在尝试删除 jquery 的 div 类。

$('.ui-chkbox ui-widget').remove();
$('.ui-chkbox-box ui-widget ui-corner-all ui-state-default').remove();

请帮帮我。

我为我的英语感到抱歉。这是不好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:14:11.443

试试这个

```
.ui-selectcheckboxmenu-panel .ui-selectcheckboxmenu-header .ui-chkbox-box{
display: none;
} 
```

只需使用 css 隐藏该选项，但是，我不认为删除组件默认元素是一个不错的选择

# c++ - 以特权用户身份运行 Windows 服务

> ID：15250757
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:39.387
> 
> 标签：c++, windows, service

我有一个用 c++ 编写的 Windows 服务，我需要它以特权开始，例如。管理员或系统。该服务需要访问 %SYSTEMROOT%、%USERPROFILES%、%TEMP% 等。该服务将在 Windows XP 和 7 下运行。

该服务将使用 GPO 部署，因此无法使用本地帐户。

我可以在服务本身中设置用户吗？如果，怎么做？如果没有，我如何使用 GPO 部署它？

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:04:43.797

您没有从服务中设置用户（即从代码中）。而是在部署/安装服务时设置运行服务的用户帐户。

安装 Windows 服务的选项是

*   构建 MSI 程序包并利用 Windows Installer 基础结构
*   使用命令行手动部署（即我们的批处理文件和`sc`命令）

使用[sc 命令](http://technet.microsoft.com/en-us/library/bb490995.aspx)时，您可以使用以下命令设置服务的用户帐户：

```
sc config <servicename> obj= <accountname> password= <password> 
```

通过 Windows Installer 部署时，您可以在 MSI 中配置用户帐户。

然后，您可以使用组策略通过 MSI 或其他方法远程安装/部署您的服务。

# sql - SQL SELECT 从同一个表两次

> ID：15250760
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:42.283
> 
> 标签：sql, select

从表中选择两次名称的最佳方法是什么

```
NAME table
Id  Name
1   john
2   zoe
3   joe
4   abby

COUPLE table
NameId NameId2
1      2
3      4 
```

结果应该看起来

```
Name  Name
john  zoe
joe   abby 
```

我会做这样的事情

```
SELECT NAME.Name, NAME2.Name 
FROM COUPLE, NAME, NAME AS NAME2 
WHERE NAME.Id=COUPLE.NameId 
AND NAME2.Id=COUPLE.NameId2 
```

这是获得结果的最佳方式吗？（性能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:09:27.320

```
SELECT n1.Name, n2.Name
FROM Couple C 
JOIN Name n1 ON (n1.id = c.nameID)
JOIN Name n2 ON (n2.id = c.nameID2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:07:22.100

我最大的建议是使用显式连接并在 SELECT 列表中限定你的第二个名字

```
SELECT NAME.Name, NAME2.Name Name2
FROM COUPLE
 INNER JOIN NAME ON NAME.Id=COUPLE.NameId 
 INNER JOIN NAME AS NAME2 ON NAME2.Id=COUPLE.NameId2 
```

# php - 获取数据时出错 - 从数据库 php 中检索数据

> ID：15250761
> 
> 赞同：1
> 
> 时间：2013-03-06T15:01:47.347
> 
> 标签：php, mysql, sql

我是一个 php 新手，我试图让这个表单工作，但是当我运行我的查询时，我得到一个“**错误获取数据”。**对此的任何帮助都会很棒！

这是html表单代码：

```
<html>
<head>

<title>Where to go play basketball?</title>
<style type="test/css">
table {
background-color: #FCF;
}
th {
width:150px;
text-align:left;
}
</style>

</head>

<body>
<h1>Venue Search</h1>
<form method="post" action="search.php">
<label> Search Criteria: <input type="text" name="term" /></label>
<input type="submit" name="submit" value="Submit" />
</form>
</body>

</html> 
```

这是search.php：

```
<?php
mysql_connect ("localhost", "root","*****", "baskt_venues")  or die (mysql_error());

$term = $_POST['term'];

$sql = mysql_query("SELECT * FROM complete_table WHERE country LIKE $term")or die('error       getting data');

while ($row = mysql_fetch_array($sql, MYSQLI_ASSOC)){
echo '<br/> Country: '.$row['country'];
echo '<br/> Date: '.$row['date'];
echo '<br/> Time: '.$row['time'];
echo '<br/><br/>';
}

?> 
```

感谢大家花时间看这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:12:21.997

`$term`您需要在 SQL中添加引号。

`$sql = mysql_query("SELECT * FROM complete_table WHERE country LIKE '$term'") ...`

您可能还想在其周围添加 % 符号，以便搜索返回包含搜索条件而不是完全匹配的国家/地区。

`$sql = mysql_query("SELECT * FROM complete_table WHERE country LIKE '%$term%'")`

编辑：

刚刚意识到第四个参数`mysql_connect`不是数据库的名称。连接后您需要拨打电话`mysql_select_db`：

`mysql_connect("localhost", "root","*****") or die(mysql_error()) mysql_select_db("baskt_venues") or die(mysql_error())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:14:43.163

是的，您需要添加 % 符号和引号，但您还需要与 $term 的内容连接，这样您就不会与“$term”进行比较。所以看起来你需要一些东西：

```
"SELECT * FROM complete_table WHERE country LIKE '%" + $term + "'" 
```

# javascript - 不同的样式表以便打印

> ID：15250767
> 
> 赞同：0
> 
> 时间：2013-03-06T15:01:54.453
> 
> 标签：javascript, css

我的问题是：我有这个网页，我在我的 css 样式表中使用了打印类型。我需要的是有两个按钮，这将是：

```
Client Print
Member Print 
```

对于特定的网页。它们之间的唯一区别是第二个有一个要打印的字段。

我需要这两个按钮为网页采用不同的样式表。有人可以帮我吗？

```
<link rel="stylesheet" href="../css/style.css" media="screen, projection,print" /> 
```

对于第一个我需要：

对于第二个：

```
<link rel="stylesheet" href="../css/style1.css" media="screen, projection,print" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:15:06.337

尝试这个：

```
function print(o) {
    var head = document.getElementsByTagName('head')[0].innerHTML;
    if (o == 'client') {
        head += '<link rel="stylesheet" href="../css/style.css" media="screen, projection,print" />';
    }
    if (o == 'member') {
        head += '<link rel="stylesheet" href="../css/style1.css" media="screen, projection,print" />';
    }
    document.getElementsByTagName('head')[0].innerHTML = head;
} 
```

# android - 在 Gingerbread 上使用非标准端口导航到 https URL 时出错

> ID：15250776
> 
> 赞同：1
> 
> 时间：2013-03-06T15:02:20.333
> 
> 标签：android, web-services, ssl

我正在开发一个连接到位于此 URL 中的网络服务的 Android 应用程序：“ [https://awsh.agresso.no:444/](https://awsh.agresso.no:444/) ”

我可以毫无问题地连接`HoneyComb`到设备，但是从设备连接时出现 SSL 错误。`JellyBean``GingerBread`

我最初认为这是 KSOAP2-Android 的问题，但我尝试从 GingerBread 标准浏览器导航，但出现此错误：“数据连接问题：无法建立安全连接”。

如果我从 ICS 标准浏览器导航，我会收到“拒绝访问”错误，这没关系。

有人遇到这个错误吗？

![在此处输入图像描述](../Images/b8a7ef13ba64ccd1493180417bd45ca4.png)

# c# - 列表框 C# Asp.Net 中的日期时间

> ID：15250779
> 
> 赞同：0
> 
> 时间：2013-03-06T15:02:25.030
> 
> 标签：c#, asp.net, datetime, listbox

我想用 DateTime 填充一个列表框。所以首先，我在 ASP.NET 中有我的代码

```
<table>
    <tr>
        <td>&nbsp;
            <asp:ListBox 
                ID="ListBoxDate" 
                runat="server" 
                AutoPostBack="True"
                OnSelectedIndexChanged="ListBoxDate_SelectedIndexChanged" >
            </asp:ListBox>
        </td>
    </tr>
</table> 
```

这是C#中的方法

```
protected void Page_Load(object sender, EventArgs e)
{
    ListBoxDate.DataSource = GetAllDate(); /* it returns a list of objects Date (which is a class with an attribute DateTime) */
    ListBoxDate.DataTextField = "_Date";
    ListBoxDate.DataValueField = "_Date";
    ListBoxDate.DataBind();
} 
```

当我单击事件时，方法 ListBoxDate_SelectedIndexChanged ：

```
protected void ListBoxDate_SelectedIndexChanged(object sender, EventArgs e)
{
    Date date= new Date()
    {
        _Date = ListBoxDate.SelectedValue,
    };
} 
```

当我点击我的日期时，我只是恢复一个空字符串，而不是 DateTime 或包含日期的字符串。（当它显示在我的浏览器上时，列表框是好的）

我对字符串的其他属性做了同样的原则，没关系。问题实际上是日期时间的使用。

那么，单击 listBox 后如何恢复 Date in ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:32:08.083

在`Page_Load`中，您必须在对 ListBox 进行数据绑定之前检查是否不是回发。否则，`ListBox`将在输入之前重新填充，`ListBoxDate_SelectedIndexChanged`并且该`SelectedValue`值将丢失：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack) 
    {
       ListBoxDate.DataSource = GetAllDate(); /* it returns a list of objects Date   (which is a class with an attribute DateTime) */
       ListBoxDate.DataTextField = "_Date";
       ListBoxDate.DataValueField = "_Date";
       ListBoxDate.DataBind();
    }
} 
```

请记住，该`SelectedValue`属性是一个字符串，您必须解析它的值才能获得一个 DateTime。你可以使用`DateTime.Parse()`它。

# bash - 将多个 bash 命令的输出格式化为列

> ID：15250783
> 
> 赞同：0
> 
> 时间：2013-03-06T15:02:33.300
> 
> 标签：bash, concatenation, paste, cat

我想做的很简单，但是没有几个命令我就无法完成。到目前为止，这就是它的样子。我希望能够在一条看起来很草率的行中做到这一点，一次只通过所有命令。

```
# cat /sys/class/scsi_host/host*/device/fc_host:host*/port_name >port
# cat /sys/class/scsi_host/host*/device/fc_host:host*/speed >speed
# cat /sys/class/scsi_host/host*/device/fc_host:host*/port_state >state
# paste -d ' ' port speed state
0x218000e01a0002d2 8 Gbit Online
0x218100e01a2002d2 8 Gbit Online 
```

我尝试使用子外壳、变量等来执行此操作。格式最终未对齐，或者更糟。

```
# echo "$port_name" "$speed" "$state"
0x218000e01a0002d2
0x218100e01a2002d2 8 Gbit
8 Gbit Online
Online

# paste -d ' ' "$(cat /sys/class/scsi_host/host*/device/fc_host:host*/port_name)" "$(cat /sys/class/scsi_host/host*/device/fc_host:host*/speed)"
paste: 0x218000e01a0002d2
0x218100e01a2002d2: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:09:18.760

代替命令替换，尝试进程替换：

```
paste -d ' ' <(cat /sys/class/scsi_host/host*/device/fc_host:host*/port_name) \
             <(cat /sys/class/scsi_host/host*/device/fc_host:host*/speed) \
             <(cat /sys/class/scsi_host/host*/device/fc_host:host*/port_state) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-16T09:25:12.717

那这个呢？

```
for i in /sys/class/fc_host/host*; do (cd $i; echo -e "$(cat port_name)\t$(cat port_state)\t$(cat speed)"); done 
```

# android - 在 Android 中运行后台 http 服务器

> ID：15250785
> 
> 赞同：0
> 
> 时间：2013-03-06T15:02:34.567
> 
> 标签：android, rest, service, embeddedwebserver

我正在开发一套游戏或自定义平板电脑，既没有互联网连接也没有 wifi，以简化我使用 HTML5 的过程，但由于 PhoneGap 使用标准 WebView，我转向 CocoonJS 以获得更好的性能。

问题是 CocoonJS 只提供硬件加速和几个无用的（在我的例子中）本机 API。

有没有办法开发一个运行后台服务的本机应用程序，暴露一种轻量级网络服务器，我可以在其中开发一个 REST 接口来设置常用选项？

这将解决我所有的问题，使我能够保存我的进度和其他从 Javascript 进行 AJAX 调用的东西，比如“GET localhost:9000/score/”

# java - 如何在使用 css 样式表的 eclipse 中 jar 一个 javafx 应用程序

> ID：15250792
> 
> 赞同：0
> 
> 时间：2013-03-06T15:02:54.373
> 
> 标签：java, css, javafx-2, javafx

我有一个 javafx 应用程序，它使用 css 样式表来设置应用程序的背景和按钮的效果。

当我尝试将此 javafx 应用程序导出到 Eclipse 中的可运行 jar 时，jar 文件不包含所需的 css 样式表和图像。

我曾尝试手动将 css 和图像放入罐子中，但没有运气

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:08:45.460

您应该使用 JavaFX 打包器支持，否则您将无法运行 jar，因为 JavaFX 不在类路径上！

我建议您使用[e(fx)clipse](http://www.efxclipse.org/)及其对导出的支持，如[教程 1所示](http://www.efxclipse.org/trac/wiki/Tutorial1)

# php - 从另一个类函数调用变量

> ID：15250795
> 
> 赞同：0
> 
> 时间：2013-03-06T15:02:56.357
> 
> 标签：php

我有一个名为 ot_lev_discount 的课程

在那个类中，我有一个功能：

```
 <?php
/*
<<<<<<< ot_lev_discount.php
  $Id: ot_lev_discount.php,v 1.0 2002/04/08 01:13:43 hpdl Exp $
=======
  $Id: ot_lev_discount.php,v 1.3 2002/09/04 22:49:11 wilt Exp $
  $Id: ot_lev_discount.php,v 2.4 2006/02/28 12:10:01 maniac101 Exp $
modified to calc discount correctly when tax is included in discount
>>>>>>> 2.4

  osCommerce, Open Source E-Commerce Solutions
  http://www.oscommerce.com

  Copyright (c) 2002 osCommerce

  Released under the GNU General Public License
*/

  class ot_lev_discount {
    var $title, $output;

    function ot_lev_discount() {
      $this->code = 'ot_lev_discount';
      $this->title = MODULE_LEV_DISCOUNT_TITLE;
      $this->description = MODULE_LEV_DISCOUNT_DESCRIPTION;
      $this->enabled = MODULE_LEV_DISCOUNT_STATUS;
      $this->sort_order = MODULE_LEV_DISCOUNT_SORT_ORDER;
      $this->include_shipping = MODULE_LEV_DISCOUNT_INC_SHIPPING;
      $this->include_tax = MODULE_LEV_DISCOUNT_INC_TAX;
      $this->calculate_tax = MODULE_LEV_DISCOUNT_CALC_TAX;
      $this->table = MODULE_LEV_DISCOUNT_TABLE;
//      $this->credit_class = true;
      $this->output = array();
    }

    function process() {
      global $order, $ot_subtotal, $currencies;
      $od_amount = $this->calculate_credit($this->get_order_total());
      if ($od_amount>0) {
      $this->deduction = $od_amount;
      $this->output[] = array('title' => $this->title . ':',
                              'text' => '<b>' . $currencies->format($od_amount) . '</b>',
                              'value' => $od_amount);
    $order->info['total'] = $order->info['total'] - $od_amount;
    if ($this->sort_order < $ot_subtotal->sort_order) {
      $order->info['subtotal'] = $order->info['subtotal'] - $od_amount;
    }
}
    }

  function calculate_credit($amount) {
    global $order;
    $od_amount=0;
    $table_cost = split("[:,]" , MODULE_LEV_DISCOUNT_TABLE);
    for ($i = 0; $i < count($table_cost); $i+=2) {
          if ($amount >= $table_cost[$i]) {
            $od_pc = $table_cost[$i+1];
          }
        }
// Calculate tax reduction if necessary
    if($this->calculate_tax == 'true') {
// Calculate main tax reduction
      $tod_amount = round($order->info['tax']*10)/10*$od_pc/100;
      $order->info['tax'] = $order->info['tax'] - $tod_amount;
// Calculate tax group deductions
      reset($order->info['tax_groups']);
      while (list($key, $value) = each($order->info['tax_groups'])) {
        $god_amount = round($value*10)/10*$od_pc/100;
        $order->info['tax_groups'][$key] = $order->info['tax_groups'][$key] - $god_amount;
      }  
    }

   $od_amount = $od_pc;
   // if you want to use %age instead of flat amount:  $od_amount = round($amount*10)/10*$od_pc/100;

//    $od_amount = $od_amount + $tod_amount;
// maniac101 above line was adding tax back into discount incorrectly for me
    return $od_amount;
  }

  function get_order_total() {
    global  $order, $cart;
    $order_total = $order->info['total'];
// Check if gift voucher is in cart and adjust total
    $products = $cart->get_products();
    for ($i=0; $i<sizeof($products); $i++) {
      $t_prid = tep_get_prid($products[$i]['id']);
      $gv_query = tep_db_query("select products_price, products_tax_class_id, products_model from " . TABLE_PRODUCTS . " where products_id = '" . $t_prid . "'");
      $gv_result = tep_db_fetch_array($gv_query);
      if (ereg('^GIFT', addslashes($gv_result['products_model']))) { 
        $qty = $cart->get_quantity($t_prid);
        $products_tax = tep_get_tax_rate($gv_result['products_tax_class_id']);
        if ($this->include_tax =='false') {
           $gv_amount = $gv_result['products_price'] * $qty;
        } else {
          $gv_amount = ($gv_result['products_price'] + tep_calculate_tax($gv_result['products_price'],$products_tax)) * $qty;
        }
        $order_total=$order_total - $gv_amount;
      }
    }
    if ($this->include_tax == 'false') $order_total=$order_total-$order->info['tax'];
    if ($this->include_shipping == 'false') $order_total=$order_total-$order->info['shipping_cost'];
    return $order_total;
  }   

    function check() {
      if (!isset($this->check)) {
        $check_query = tep_db_query("select configuration_value from " . TABLE_CONFIGURATION . " where configuration_key = 'MODULE_LEV_DISCOUNT_STATUS'");
        $this->check = tep_db_num_rows($check_query);
      }

      return $this->check;
    }

    function keys() {
      return array('MODULE_LEV_DISCOUNT_STATUS', 'MODULE_LEV_DISCOUNT_SORT_ORDER','MODULE_LEV_DISCOUNT_TABLE', 'MODULE_LEV_DISCOUNT_INC_SHIPPING', 'MODULE_LEV_DISCOUNT_INC_TAX','MODULE_LEV_DISCOUNT_CALC_TAX');
    }

    function install() {
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function, date_added) values ('Display Total', 'MODULE_LEV_DISCOUNT_STATUS', 'true', 'Do you want to enable the Order Discount?', '6', '1','tep_cfg_select_option(array(\'true\', \'false\'), ', now())");
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, date_added) values ('Sort Order', 'MODULE_LEV_DISCOUNT_SORT_ORDER', '999', 'Sort order of display.', '6', '2', now())");
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function ,date_added) values ('Include Shipping', 'MODULE_LEV_DISCOUNT_INC_SHIPPING', 'true', 'Include Shipping in calculation', '6', '3', 'tep_cfg_select_option(array(\'true\', \'false\'), ', now())");
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function ,date_added) values ('Include Tax', 'MODULE_LEV_DISCOUNT_INC_TAX', 'true', 'Include Tax in calculation.', '6', '4','tep_cfg_select_option(array(\'true\', \'false\'), ', now())");
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function ,date_added) values ('Calculate Tax', 'MODULE_LEV_DISCOUNT_CALC_TAX', 'false', 'Re-calculate Tax on discounted amount.', '6', '5','tep_cfg_select_option(array(\'true\', \'false\'), ', now())");
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, date_added) values ('Discount Percentage', 'MODULE_LEV_DISCOUNT_TABLE', '100:7.5,250:10,500:12.5,1000:15', 'Set the price breaks and discount percentages', '6', '6', now())");
    }

    function remove() {
      $keys = '';
      $keys_array = $this->keys();
      for ($i=0; $i<sizeof($keys_array); $i++) {
        $keys .= "'" . $keys_array[$i] . "',";
      }
      $keys = substr($keys, 0, -1);

      tep_db_query("delete from " . TABLE_CONFIGURATION . " where configuration_key in (" . $keys . ")");
    }

  }
?> 
```

我想从不同的 php 文件中回显 $od_amount 变量，所以我做了以下无济于事：

```
require(DIR_WS_MODULES . 'order_total/ot_lev_discount.php');
$ot_lev_discount = new ot_lev_discount();

echo $ot_lev_discount->od_amount; 
```

我似乎能够以这种方式调用类全局变量，但不能调用类函数中的全局变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:07:35.070

`global`不会使变量成为类的属性，它只是告诉该值可以在它的任何方法中使用。

您可以解决此问题，请参阅[此示例](http://www.php.net/manual/en/language.variables.scope.php#88570)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:10:50.123

通过打电话`$ot_lev_discount->od_amount`，你试图获得`od_amount`你的班级的财产，但你的班级没有。

你需要像这样修改你的类：

```
class ot_lev_discount  {

    ...

    public $od_amount;

    function calculate_credit($amount)
    {
         ...
         $this->od_amount = $od_amount;

         return $od_amount;
    }

} 
```

这样您就可以使用`$ot_lev_discount->od_amount`. 当然，除非您调用该`$ot_lev_discount->calculate_credit()`函数，否则它的值将为 null。

花一些时间阅读有关类、对象、它们的属性和变量范围的文档。它应该可以阐明您面临的问题（这些是一般的面向对象编程主题，而不仅仅是与 PHP 相关的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:12:17.107

函数内的变量具有该函数的局部范围，不能从函数外部调用。您可以通过执行以下操作使这些变量的范围类级别和公共：

```
class ot_lev_discount {
    public $od_amount;
    ....
} 
```

然后您可以像这样访问变量：

```
$var = new ot_lev_discount();
$var->od_amount; 
```

尽管在这种情况下，每次创建新对象时，该对象都会有自己的 od_amount 变量，该变量与同一类的另一个对象不同，并且除非您执行相同的计算，否则不会具有相同的值它。

或者，调用函数并获取返回值。

# java - 如何应对交互式 Linux 命令？

> ID：15250796
> 
> 赞同：1
> 
> 时间：2013-03-06T15:02:59.497
> 
> 标签：java, android, bash, ssh, jsch

我有代码允许我通过 ssh 连接、运行命令并获得响应。它工作正常，但仅适用于非交互式命令（如：`ls`，`df`在运行后立即返回结果）。问题是当我尝试运行一些交互式命令时，`top`或者`passwd`代码永远等待响应（当然没有得到响应）。

如何应对交互式命令？我真的不在乎输出，我只想运行它。

```
public String runCommand(String command)  throws Exception {

    // SSH Channel
    ChannelExec channelssh = (ChannelExec) session.openChannel("exec");      

    // Execute command
    channelssh.setCommand(command);
    channelssh.connect();     

    InputStream inputStream = channelssh.getInputStream(); 
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
    StringBuilder stringBuilder = new StringBuilder();
    String line;

    while ((line = bufferedReader.readLine()) != null) 
    {
        stringBuilder.append(line);
        stringBuilder.append('\n');
    }

    channelssh.disconnect();
    return stringBuilder.toString();   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:49:13.190

1、可以使用ChannelShell。这是一个示例：[Shell.java](http://www.jcraft.com/jsch/examples/Shell.java.html)。这篇文章阐明了 exec 和 shell 之间的区别：[jsch ChannelExec 和 ChannelShell 之间的确切区别是什么？](https://stackoverflow.com/questions/6265278/whats-the-exact-differences-between-jsch-channelexec-and-channelshell)

2、我试过ChannelExec.setPty(true)。通过这种方式，我可以获得输出。然而，它并没有停止。

# .htaccess - mod_rewrite 静态 URL 到动态

> ID：15250798
> 
> 赞同：0
> 
> 时间：2013-03-06T15:03:02.553
> 
> 标签：.htaccess, mod-rewrite

如何重写此 URL

```
http://www.domain.com/folder/number/50.html 
```

到

```
http://www.domain.com/folder/number?id=50#50 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:14:17.860

您可以在根目录的 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^folder/number/([^/]+)\.html/?  /folder/number?id=$1#$1  [NE,NC,L] 
```

静默地图

`http://www.domain.com/folder/number/50.html` 带或不带斜杠

到：

`http://www.domain.com/folder/number?id=50#50`

假定字符串`50`是动态的。

对于永久和可见的重定向，将 [NE,NC,L] 替换为 [R=301,NE,NC,L]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:15:48.573

这是最简单的方法：

```
RewriteEngine On
RewriteBase /
RewriteRule ^folder/number/(\d+)\.html$ folder/number?id=$1#$1 [L,R=301] 
```

如果您希望此重定向是透明的，请更改`[L,R=301]`为。`[L]`

# java - 如何从 JSP 刷新/访问模型

> ID：15250799
> 
> 赞同：0
> 
> 时间：2013-03-06T15:03:03.833
> 
> 标签：java, javascript, spring, jsp

有人可以让我知道如何从 JSP 访问模型。

这是我的控制器：

```
@RequestMapping(value = "/systemById", method = RequestMethod.GET)
public void getSystemById(Model model, OutputStream outputStream) throws IOException {
     model.addAttribute("fSystemName", "Test name");
     name = system.getName();
} 
```

JSP代码：

```
$('#uINewsSystemList').change(function() {
    $.get("/application/systemById");
);  

<form:form id="systemForm" commandName="systemForm">
<tr>
    <td valign="top"><form:input path="fSystemName" value="${fSystemName}" size="20" />&nbsp;</td>                      
</tr> 
```

将字符串添加到模型后，我无法刷新表单。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:47:11.103

当您基于用户交互进行 ajax 调用时，您调用的流程与您用于呈现页面的原始 JSP 无关。

您可以让 getSystemById 方法完全重新呈现页面（可能通过表单提交/POST），或者您可以更改示例代码以实际返回必要的数据以通过 JavaScript 进行更改。由于您提到您正在寻找动态更新，因此更改可能如下所示：

```
@RequestMapping(value = "/systemById/${id}", method = RequestMethod.GET)
public String getSystemById(@PathVariable String id) throws IOException {
     //lookup new system data by id
     Model model = someService.getModelById(id);
     return model.getName(); //you can return more than just name, but then you will need some sort of conversion to handle that data (json, xml, etc.)
} 
```

客户端 ajax 调用将需要设置为具有成功功能，您可以在其中使用返回的数据来更新 ui。

```
$('#uINewsSystemList').change(function() {
    var id = $(this).val();
    $.get("/application/systemById/" + id, function(returnedData){
        //use returnedData to refresh the ui.
        $('selectorForSystemNameField').val(returnedData);
    });
); 
```

# events - 在构建过程中使用 Ant exec 在 _Events.groovy 中执行 Grails 自定义脚本

> ID：15250804
> 
> 赞同：3
> 
> 时间：2013-03-06T15:03:16.293
> 
> 标签：events, grails, ant, build, exec

Grails 应用程序版本：2.0.4。

我在**脚本文件夹中有一个名为****MyScript.groovy**的 Grails 自定义脚本，非常像这样：

 **```
includeTargets << grailsScript("_GrailsInit")

target(main: "Run my custom bash script") {
    def process = "shell-scripts/my-script.sh -d param".execute()
    process.consumeProcessOutput(System.out, System.out)
    process.waitFor()
}

setDefaultTarget(main) 
```

我能够使它工作，调用：

```
grails my-script 
```

现在，我想在构建过程中执行这个脚本，所以我在我的**_Events.groovy**文件中添加了以下内容：

```
eventCreateWarStart = { warName, stagingDir ->
    // other stuff 

    ant.exec(executable: "grails", dir: "${basedir}") {
        arg(value: "my-script")
    }
} 
```

但是..如果我从 Intellij 运行编译，脚本就会被中断；如果我从命令行运行编译，脚本会挂起一段时间，既没有输出也没有错误，然后停止。我究竟做错了什么？

有没有更好的方法来实现这一目标？**

# mysql - 在选择查询中使用星号

> ID：15250812
> 
> 赞同：0
> 
> 时间：2013-03-06T15:03:23.490
> 
> 标签：mysql, sql, postgresql

我听到很多不要使用 *（星号），而是命名我需要的字段。是因为性能问题还是安全原因？有人可以为此说出一些好的论据吗？

所以不是

```
SELECT * FROM users WHERE name='John'; 
```

但反而

```
SELECT name FROM users WHERE name='John'; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T15:06:59.083

在生产查询中不使用星号的最大原因是将非 SQL 代码与数据库模式的更改隔离开来，或者使此类更改更难被忽视。

例如，如果您的代码使用星号查询，期望`name`在第一列和`address`第二列中出现，如果架构更改为在您已经阅读的两列之前添加第三列，则您的代码将获取该新列名称，并用名称代替地址。最糟糕的是，它会在没有崩溃的情况下完成所有这些操作：用户只会看到垃圾数据。

相反，具有显式命名列的查询将获得正确的列，尽管架构发生了变化，或者如果所需的列已被删除或重命名，则会中断。这将立即指出问题的根源，使您可以轻松调查和解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:06:31.850

这是一个性能问题。当您 时`SELECT *`，您正在检索表中的*每个*字段。如果`SELECT name`是 ，则仅选择名称字段。当仅选择您需要的字段时，可以从数据库服务器传输到应用程序的数据要少得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:05:38.007

SELECT`*`表示从您的表中选择全部。它将选择所有列。

但是如果您指定仅选择查询中的某些列

SELECT name ---> 这将只选择 name 列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:07:07.893

因为如果您选择 *，那么您将获得该查询的所有列，这意味着您的数据集的内存使用率更高，而不仅仅是获得您需要的列。

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-03-06T15:09:37.330

对我来说，这更像是关于*理智*、*可读性*和常识的问题。

当你只需要时`name`——为什么不明确地写出来呢？
这将使您的查询为读者提供更多信息。

但是当我看到可怜的开发人员明确地写**了几十**个字段名只是为了遵循这种“性能”的废话——这让我很受伤。

评论中的一个重要说明：
编写不依赖于查询中字段的顺序或数量的代码确实很重要。
因此，只需使用`*`, 获取关联数组，您的代码就不会因为如此愚蠢的原因而中断。

对于我卑微的测试，我有一些不同。0,0002 秒的分数。
好吧，如果这样的差异是您的应用程序的某个瓶颈 - 请使用显式写入字段（尽管解析器需要更多时间来解析您的查询，呵呵 :)
但是，在我的领域中，性能问题从至少 0,001 秒的差异开始. 所以，我不会打扰。

# java - jqgrid过滤器工具栏不起作用

> ID：15250813
> 
> 赞同：0
> 
> 时间：2013-03-06T15:03:28.070
> 
> 标签：java, jquery, jqgrid

我正在尝试在我的 jqgrid 中实现过滤器工具栏。但是，每当我在任何一个过滤器工具栏搜索框中输入任何内容时，“加载”弹出窗口都会出现并停留在那里，然后什么也没有发生。下面是截图：

![错误](../Images/0b638786809ddc5fac14d9410becee0a.png)

下面是我的 jqgrid 代码：

```
 jQuery(document).ready(function($) {

    $('#workQueueGrid').jqGrid('GridDestroy');
    $("#workQueueGrid").jqGrid({
        url:contextRoot+'workQueueGrid',
        datatype: 'json',
        mtype: 'POST',
        colNames: ['ID','Received','Last Name','First Name','Aa','Bbbb', 'Source', 'Ddddd', 'Ccccc', 'Eeeeee', 'Fffffff', 'Ggggggg', 'Hhhhhhh'],
        colModel: [
                   { name: 'Id', index: 'referralId', width: 30, sortable:true },
                   { name: 'receivedDate', index: 'receivedDate', width: 50, formatter: function(cellValue){return $.datepicker.formatDate('mm-dd-yy', new Date(cellValue));}, sortable:true },                   
                   { name: 'lastName', index: 'lastName', width: 55, sortable:true },
                   { name: 'firstName', index: 'firstName', width: 55, sortable:true },
                   { name: 'data1', index: 'data1', width: 30, sortable:true },
                   { name: 'data2', index: 'data2', width: 30, sortable:true },
                   { name: 'data3', index: 'data3', width: 40, sortable:true, cellattr: function (rowId, tv, rawObject, cm, rdata) { return 'style="white-space: normal;"'; } },
                   { name: 'data4', index: 'data4', width: 30, sortable:true, cellattr: function (rowId, tv, rawObject, cm, rdata) { return 'style="white-space: normal;"'; } },
                   { name: 'data5', index: 'data5', width: 40, sortable:true, cellattr: function (rowId, tv, rawObject, cm, rdata) { return 'style="white-space: normal;"'; } },
                   { name: 'data6', index: 'data6', width: 50, formatter: function(cellValue){return $.datepicker.formatDate('mm-dd-yy', new Date(cellValue));}, sortable:true },
                   { name: 'data7', index: 'data7', width: 50, formatter: function(cellValue){return $.datepicker.formatDate('mm-dd-yy', new Date(cellValue));}, sortable:true },
                   { name: 'data8', index: 'data8', width: 50, formatter: function(cellValue){return $.datepicker.formatDate('mm-dd-yy', new Date(cellValue));}, sortable:true },
                   { name: 'data9', index: 'data9', width: 80, sortable:true, cellattr: function (rowId, tv, rawObject, cm, rdata) { return 'style="white-space: normal;"'; } }
        ],loadError: function(xhr,st,err) {
            alert(err);
        },onSelectRow : function(rowid, status, e) {
            var selRow = $(this).getGridParam("selrow");
            var selReferralId = $(this).getCell(selRow, 'referralId');
            window.location = (contextRoot+"referralDetails?refId=" + selReferralId );            
        },
        jsonReader: {
            repeatitems: false,
        },
        pager: '#workQueuePager',
        sortname: 'receivedDate',
        sortorder: 'desc',
        gridview: true,
        viewrecords: true,
        loadonce: true,
        autowidth: true,
        shrinkToFit: true,
        height: 'auto',
        rowNum: 12,
        ignoreCase: true,
        altRows:true
    }); 

    $("#workQueueGrid").jqGrid('navGrid','#workQueuePager',
       {
        edit:false,
        add:false,
        del:false,
        search:false,
        refresh:false
    });

    $("#workQueueGrid").jqGrid('filterToolbar',
        { 
         stringResult: true, 
         searchOnEnter: false,
         defaultSearch: "bw"
    });
}); 
```

样本数据：

```
 {"rows":[{"receivedDate":1357016400000,"referralId":23450,"lastName":"Smith","firstName":"John","goCode":"A99","zoneCode":"NE","sourceName":"Source Name","status":"Pending","actionAS":"AS Action","vpReportDate":1357016400000,"approvedDate":1357016400000,"lastModifiedDate":1357016400000,"workflow":"Recommendation(s) required"},{"receivedDate":1357102800000,"referralId":23451,"lastName":"Smith","firstName":"John","goCode":"A99","zoneCode":"NE","sourceName":"Source Name","status":"Pending","actionAS":"AS Action","vpReportDate":1357102800000,"approvedDate":1357102800000,"lastModifiedDate":1357102800000,"workflow":"Recommendation(s) required"},{"receivedDate":1357189200000,"referralId":23452,"lastName":"Smith","firstName":"John","goCode":"A99","zoneCode":"NE","sourceName":"Source Name","status":"Pending","actionAS":"AS Action","vpReportDate":1357189200000,"approvedDate":1357189200000,"lastModifiedDate":1357189200000,"workflow":"Recommendation(s) required"}, 
```

不确定，我在这里错过了什么？！？

**更新1：**

```
Below is the error I'm getting:

Uncaught TypeError: Cannot call method 'getAccessor' of undefined 
```

**更新 2**

下面是 JSP：

```
 <%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <script type="text/javascript"  src="<c:url value="/js/workQueue.js"/>"></script>
    <style type="text/css">
        th.ui-th-column div {
          white-space:normal !important;
          height:auto !important;
          padding:2px;
     }  
    </style>    
</head>
<body>
    <table width="100%">
        <tr>
            <td>
                <span style="font-size: 18px"><b>${status == 'pending' ? 'Pending': 'Approved'}</b></span><br/><br/>
                There are ${workQueueCount} referrals ${status}. Click a row to see details.<a href="<c:url value="/excelExport"/>" id="excelExport" style="float: right;">Export To Excel</a>               
            </td>
        </tr>
        <tr height="5px">
            <td>                            
            </td>
        </tr>
        <tr>
            <td>
                <table id="dartWorkQueueGrid"></table>                              
                <div id="dartWorkQueuePager"></div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

这是处理程序方法：

```
 @RequestMapping(method = RequestMethod.POST, value = "/workQueueGrid") 
    @ResponseBody 
    public JqgridResponse loadWorkQueue() {
        this.referrals = dartService.getReferralCases(status);       
        JqgridResponse response = new JqgridResponse();
        response.setRows(referrals);

        return response;
    } 
```

这是 JqgridResponse.java：

```
 package com.nyl.corp.disciplinaryactions.web;

import java.util.List;

public class JqgridResponse {

    public JqgridResponse(List<?> rows) {
        this.rows = rows;
    }

    public JqgridResponse() {
    }

    private List<?> rows;

    private int page;

    private int total;

    private int records;

    public void setRows(List<?> rows) {
        this.rows = rows;
    }

    public List<?> getRows() {
        return rows;
    }

    public int getPage() {
        return page;
    }

    public void setPage(int page) {
        this.page = page;
    }

    public int getTotal() {
        return total;
    }

    public void setTotal(int total) {
        this.total = total;
    }

    public int getRecords() {
        return records;
    }

    public void setRecords(int records) {
        this.records = records;
    }

} 
```

**更新 3** 选项卡内网格的快照：

![在此处输入图像描述](../Images/d0017d8bed6bcd6eb8133db06a0137e3.png) ![在此处输入图像描述](../Images/9ef013f2e0051208ad436baac240e994.png)

**更新 4 个** 标签 JSP 代码：

```
 <script>    
    $(function() {
        $( "#workQueuesTab" ).tabs();
    });    
</script>  
</head>
<body>
      <div style="width:95%" id="workQueuesTab">
          <ul>
              <li><a href="<c:url value="/workQueue/pending"/>">Pending</a></li>
              <li><a href="<c:url value="/workQueue/approved"/>">Approved</a></li>
              <li><a href="<c:url value="/workQueue/additionalSteps"/>">Additional Steps</a></li>
         </ul>
      </div>            
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T19:10:51.870

我有同样的问题。在文件 jquery.jqGrid.js 中，

它通过 jQuery 调用 jQuery。看起来您的设置无法以这种方式识别它。尝试更改 jQuery。到 $。文件中的任何地方。

它确实对我有用。

未捕获的类型错误：无法调用未定义的方法“getAccessor”（它不理解 jQuery。但它确实 $.）

# c - 宏地狱：指向 setjmp/sigsetjmp 的与平台无关的指针

> ID：15250818
> 
> 赞同：9
> 
> 时间：2013-03-06T15:03:48.947
> 
> 标签：c, macros, posix, iso, setjmp

我正在编写需要使用指向 setjmp/sigsetjmp 的指针的多平台代码。通常这就像做一样简单

```
#include <setjmp.h>
void * sigsetjmp_p = sigsetjmp; 
```

但是，ISO 和 POSIX 声明 setjmp/sigsetjmp 可以定义为宏，在我的 linux 机器中确实是这种情况。以下是摘录`/usr/include/setjmp.h`：

```
# define sigsetjmp(env, savemask)       __sigsetjmp (env, savemask) 
```

问题是，由于我没有将参数传递给`sigsetjmp`，因此宏不会扩展，并且`sigsetjmp`libc 中没有定义普通符号。我希望能够使用一些宏“黑魔法”来提取“__sigsetjmp”名称，但到目前为止我失败了。

另一种选择是 `__sigsetjmp`直接使用，但这意味着检查每个受支持平台的扩展，我不想这样做（因此这个问题的原因）。

PS：我讨厌宏。

**笔记：**

我需要这个的原因有点模糊，但为了简化它，假设我想用它执行指针比较。

```
#include <setjmp.h>
int equals_sigsetjmp(void *p)
{
 void * sigsetjmp_p =  sigsetjmp;
 return p == sigsetjmp_p;
} 
```

**编辑：**

是的是的。我知道我不应该指望得到一个指针，`sigsetjmp`因为它在某些平台上甚至可能不是一个函数，但这**并不能解决我的问题**。

在实践中，我所知道的所有平台都将它作为一个函数来实现。

我可以应付这样一个事实，即在几年内，我遇到了一个`sigsetjump`不适用于某些平台的功能的案例。但是我不想处理的是遍历每个受支持的平台并检查`setjmp.h`宏定义，这是我现在唯一的选择。

我很欣赏对标准的引用，但我想得到一个实用的答案，而不是*纯粹*的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:07:17.680

您不能便携地执行此操作，因为标准明确禁止它（第 7.13 节）：

> 未指定`setjmp`是使用外部链接声明的宏还是标识符。**如果为了访问实际函数**（...）而抑制宏定义，则**行为未定义。**

POSIX 添加到其中

> 功能`sigsetjmp()`应**等同**于功能`setjmp()`

除了一些在这里无关的例外。

至于你的言论

> 我所知道的所有平台都将它作为一个函数来实现

在 GCC 中，`setjmp`是内置的，我相信 Clang，所以`sigsetjmp`. （尽管 C 库也可能有函数版本。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T16:59:15.820

怎么样：

```
void my_sigsetjmp(sigjmp_buf env, int savesigs)
{
    sigsetjmp(env, savesigs);
} 
```

然后使用&my_sigsetjmp的地址

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T17:05:28.793

对于你所说的你想要的，我会做这样的事情：

```
#include <setjmp.h>
#ifdef sigsetjmp
#define AVOID_FUNCTION_MACRO /* expand to nothing */
int sigsetjmp AVOID_FUNCTION_MACRO (sigjmp_buf env, int savesigs) {
    log_fatal_error("Can't call sigsetjmp via pointer, its a macro!");
    abort();
}
#endif 
```

这将为您提供一个`sigsetjmp`可以获取地址的函数，但您实际上不能调用它...

# java - jsf 2.0 无法识别 Facebook 的开放图我该怎么做才能识别我的开放图或元标记

> ID：15250821
> 
> 赞同：1
> 
> 时间：2013-03-06T15:03:54.237
> 
> 标签：java, jsf-2, facebook-opengraph

您在下面这段代码中看到的所有元标记都没有被 facebook 按钮识别我不知道原因，有没有人可以向我解释为什么不起作用。或者为什么元标记一旦出现在 jsf 页面中就不能被识别？

谢谢

```
...
xmlns:og="http://ogp.me/ns#"
xmlns:fb="http://www.facebook.com/2008/fbml">

<h:head>
 <meta property="fb:app_id" content="YOUR-APP-ID" />
 <meta property="fb:admins" content="USER_ID,USER_ID"/>
 <meta property="og:title" content="Page Title"/>
 <meta property="og:type" content="TYPE"/>
 <meta property="og:url" content="www.youtube.com"/>
 <meta property="og:image" content="http://img.youtube.com/vi/_FiSCmL9psw/0.jpg"/>
 <meta property="og:description" content="Description of page content" />

 </h:head> 
```

# javascript - Reddit 按钮回调函数

> ID：15250826
> 
> 赞同：0
> 
> 时间：2013-03-06T15:04:11.940
> 
> 标签：javascript, wordpress, callback

我在我的一个 Wordpress 安装中使用无限滚动，并且在加载新帖子时遇到问题，因为社交按钮没有加载。

我通过将以下内容添加到 Facebook 的回调中来解决此问题，例如按钮和 Twitter 共享。但是，我无法为 Reddit 提交按钮找到类似的解决方案。

```
 twttr.widgets.load();
 FB.XFBML.parse(); 
```

任何帮助将不胜感激！

我的标记包括按钮：

```
 <div class="socialshare">
 <div class="reddit">
 <script type="text/javascript">
 reddit_url = "<?php the_permalink(); ?>";
 reddit_newwindow = "1";
 </script>
 <script type="text/javascript" src="http://en.reddit.com/static/button/button1.js"></script>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:12:02.527

我相信 Reddit 没有花哨的 JavaScript API。一个简单的解决方案是从[这个脚本](http://www.reddit.com/buttonlite.js?i=0&url=foo.com&newwindow=1)中获取代码（示例链接）。在您的回调函数中，遍历您想要显示按钮的所有相应 HTML 元素，然后在那里执行代码。

# c# - 使用定时器触发功能

> ID：15250827
> 
> 赞同：0
> 
> 时间：2013-03-06T15:04:17.463
> 
> 标签：c#, timer

我的应用程序**一直在运行**以更新记录。我有用电子邮件发送 excel 文件的功能。它将在我每天设置的时间发送。所以我**使用计时器方法**。它可以触发我的功能。我将计时器间隔设置为 100。假设现在的时钟是晚上 10 点，如果在数据库中相同，那么它将**触发 sendMail 函数**。

但现在的问题是，定时器会**多次**触发我的函数，我认为大约有 10 次或更少。我只想**着火一次**。我应该使用什么**最好的方法**？

```
// 0 is off and 1 is on
int on_off = int.Parse(class_ta.getValue("tbl_setting", "value", "name", "onOffMail"));

if (on_off == 1)
{
    DataTable dtSendTime = class_ta.valueTimeSend(0);

    foreach (DataRow row in dtSendTime.Rows)
    {
        DateTime dtFire = DateTime.Parse(row["sendTime"].ToString());
        TimeSpan tsHour = TimeSpan.Parse(dtFire.Hour.ToString());
        TimeSpan tsMinutes = TimeSpan.Parse(dtFire.Minute.ToString());

        if (tsHour == TimeSpan.Parse(DateTime.Now.TimeOfDay.Hours.ToString()) && tsMinutes == TimeSpan.Parse(DateTime.Now.TimeOfDay.Minutes.ToString()) && 0 == int.Parse(DateTime.Now.TimeOfDay.Seconds.ToString()))
        {
            sendMail();
        }
    }
} 
```

希望有人能帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:06:20.377

您可以在事件触发后立即将该`Enabled`字段设置为 。`false`

```
timer.Enabled = false; 
```

您也可以通过调用停止计时器

```
timer.Stop(); // sets timer.Enabled to false 
```

[资料来源：MSDN](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

**编辑：**

另一种可能性是简单地增加计时器的间隔

```
timer.Interval = 1000; 
```

这样您就不需要一直禁用/重新启用计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:08:09.107

定时器一触发就停止。

```
timer1.Stop(); 
```

或者

```
timer1.Enabled = false; 
```

将此作为 Tick 事件的第一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:07:10.180

我无法从您的代码中告诉任何有关您的计时器的信息，所以这是一个猜测，但您可以尝试在计时器`tick`事件中包含以下代码作为第一行代码：

```
myTimer.Stop(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T15:23:18.593

只需将您的间隔时间从 100 更改为 1000。

您在一秒钟内触发您的电子邮件功能 10 次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T15:36:28.307

正如他们常说的，不要重新发明轮子。与其让您的应用程序始终运行，不如从 Windows 任务计划程序启动它？这样，您可以从应用程序中删除所有计时器和调度代码，并让它在启动时专注于发送电子邮件。

或者，如果您需要通过数据库中的内容来控制日程安排，我会在数据库中设置一些信息来表示电子邮件已发送。

如果每一行只需要发送一封电子邮件，请在表中添加一个`IsSent`默认为 0 的列。查询表时，在 WHERE 子句中使用它：

```
WHERE IsSent = 0
    AND sendTime <= GetDate() 
```

然后您知道返回的任何行都是需要*立即*发送电子邮件的行。对于每一个，发送电子邮件，然后`IsSent`将该行的列更新为 1。

如果每一行都需要在每天的某个时间发送一封电子邮件，请在`LastSentTime`您的表中添加一个默认为 NULL 的列。

```
WHERE (@LastSentTime IS NULL OR DateDiff(day, @LastSentTime, GetDate()) > 0)
    AND @SendTime-DATEADD(day,DATEDIFF(day,0,@SendTime),0) < GetDate()-DATEADD(day,DATEDIFF(day,0,GetDate()),0) 
```

对于每一个，发送电子邮件，然后`LastSentTime`将该行的更新为当前时间。

# java - 添加库后的android facebook sdk

> ID：15250833
> 
> 赞同：3
> 
> 时间：2013-03-06T15:04:30.770
> 
> 标签：java, android

我单击我的项目-> Android 工具-> 添加支持库并出现错误（在执行“添加支持库”之前有效）

我认为我对 Facebook SDK 有疑问：

这是我的一部分`mainActivity`：

```
Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session session = Session.getActiveSession();
        if (session == null) {
            if (savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if (session == null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            }
        } 
```

在行中：

```
session.openForRead(**new Session.OpenRequest(this)**.setCallback(statusCallback)); 
```

它给了我一个错误：

> android.support.v4.app.Fragment 类型无法解析。它是从所需的 .class 文件中间接引用的

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T22:42:55.460

我解决了在 Build Path -> Order and Export of My Project、Facebook-SDK Project 和 Other Project Linked 中检查 Android Private Libraries

[检查 Android 私有库](https://plus.google.com/photos/117122118961369445953/albums/5878509263473846433/5878509268379848162)

[从这里](https://stackoverflow.com/questions/16602584/error-java-lang-noclassdeffounderror-android-support-v4-content-localbroadcas)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T15:47:38.113

上次我尝试使用“添加支持库”功能时，控制台一直说“在依赖列表中找到 2 个版本的 android-support-v4.jar”

检查项目的 libs 文件夹并删除 android-support-v4.jar 如果它在那里，这是因为 Facebook SDK 已经包含该库。

看看有没有帮助。

# php - 在 YII 中为多个视图指定相同的 itemView？

> ID：15250836
> 
> 赞同：1
> 
> 时间：2013-03-06T15:04:44.000
> 
> 标签：php, yii, zii-widgets

我有以下目录结构：

```
-> views

---> product
  |- view.php
  |- gridView.php

---> site
  |- index.php 
```

gridView.php 是我希望在站点下的 index.php 中使用的部分视图。如果我将 gridView.php 复制到 site/gridView.php，则以下工作：

```
<?php
  $this->widget('zii.widgets.CListView', array(
    'dataProvider'=> $dataProvider,
    'itemView' => 'gridView',
    'summaryText' => '',
    'emptyText' => '
    ', 
  ));
?> 
```

但是如果我只在 /product/ 下留下一份副本，上面的就行不通了。

如何使用产品中的同一个 gridView.php 文件让 index.php 视图工作？我尝试了以下方法，但它不起作用：

```
<?php
  $this->widget('zii.widgets.CListView', array(
    'dataProvider'=> $dataProvider,
    'itemView' => 'product/gridView',
    'summaryText' => '',
    'emptyText' => '
    ', 
  ));
?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:05:42.190

如果你想从另一个控制器访问视图，你应该总是在视图名称前加上`/`控制器 ID。所以在你的情况下是`/product/gridView`.

# iphone - 在部分uiviewcontroller，monotouch iphone中添加标签栏

> ID：15250840
> 
> 赞同：1
> 
> 时间：2013-03-06T15:04:46.537
> 
> 标签：iphone, xamarin.ios, uitabbar

我想向 uiviewcontroller 添加一个标签栏，如下图所示：

![在此处输入图像描述](../Images/5e5ef929b42492512d9959d0ba078316.png)

顶部（2labels 和 UIScrollView ）是固定的，当用户更改标签栏项目时，只有底部会更改。我将标签栏控制器从 xcode 中的对象添加到我的 uiviewcontroller，但我不知道如何创建标签栏控制器的视图，如何更改页面的一部分。

编辑：我为此使用此代码：

```
 UIViewController viewController1, viewController2;
        if (UIDevice.CurrentDevice.UserInterfaceIdiom == UIUserInterfaceIdiom.Phone) {
            viewController1 = new FirstViewController ("FirstViewController_iPhone", null);
            viewController2 = new SecondViewController ("SecondViewController_iPhone", null);
        } else {
            viewController1 = new FirstViewController ("FirstViewController_iPad", null);
            viewController2 = new SecondViewController ("SecondViewController_iPad", null);
        }
        UITabBarController tabBarController= new UITabBarController ();
        tabBarController.ViewControllers = new UIViewController [] {
            viewController1,
            viewController2,
        };

        UIView v= tabBarController .View ;
        v.Frame = new Rectangle (0,150,320,260);
        UITabBar tb= tabBarController .TabBar;
        tb.Frame = new RectangleF (0,410,320,50);
        this.View .AddSubview (v  );
        this .View .AddSubview (tb); 
```

但它不工作。标签栏视图填充了所有视图，当我单击 uitabbar 的按钮时，我得到异常并强制关闭应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:22:03.410

您可能不需要标签栏来重现此行为。

1.  在你的“地方应该改变......”中，只需设置一个普通的 UIView，我们将称之为容器。

2.  在视图控制器的 viewDidLoad 中，创建三个视图并将它们保存在内存中，我们称它们为 detailView、mapView、agentView。

然后，在底部，您只需添加 3 个 UIButton。在每个按钮按下操作（TouchUpInside）上，您将相关视图添加为容器子视图（即 agentButton.TouchUpInside += () => container.AddSubView(detailsView); * 不要忘记删除前一个。

编辑 ：

```
this.View .AddSubview (tabBarController.View);
tabBarController.View.Frame = new RectangleF(....); 
```

我已经在一个示例项目中尝试过它并且它有效

# c# - 如何使用 linq 选择所有内容？

> ID：15250848
> 
> 赞同：0
> 
> 时间：2013-03-06T15:05:05.263
> 
> 标签：c#, json, linq

我正在使用 JSON 为我的 iOS 应用程序创建一些服务（我仍然是那个洞服务故事的菜鸟）我的问题：

是否有可能使用 Linq 选择所有内容，比如在 SQL 中使用 * ？

我已经有了 where 子句，所以我在漏洞故事中付出了一些努力

```
 [DataContract]
    public class PublicVacationCalendarEntry
    {
        [DataMember]
        public string Description { get; set; }

        [DataMember]
        public DateTime FromDate { get; set; }

        [DataMember]
        public DateTime ToDate { get; set; }

    }
    [DataContract]
    public class PublicVacationCalenderEntryList
    {
        [DataMember]
        public List<PublicVacationCalendarEntry> PVEntries { get; set; }
    }
} 
```

对不起，我在这个例子中发布了错误的代码，对不起，对不起，我没有类似 userId 的东西

可能只是一些简单的改变吗​​？

感谢您的帮助和快速答复！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T15:06:39.957

是的，这是可能的：

```
var annalVacation =  from vd in ctx.HtVacationDays
                     where vd.UserId == userId
                     select vd 
```

或者（我更喜欢的版本）

```
var annalVacation =  ctx.HtVacationDays.Where(x => x.UserId == userId); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T15:06:41.823

你可以写

```
from vd in ctx.HtVacationDays
where vd.UserId == userId
select vd 
```

因为`vd`表示，如果您愿意，`HtVacationDays`您可以选择一整行（按`select vd`），这将像`SELECT *`.

另请注意，您可以使用 lambda 语法（您`.Where`在代码中混合了 with 子句，如下所示：

```
var result = ctx.HtVacationDays.Where(x => x.UserId == userId); //Select is optional here. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:08:22.513

如果您需要自动将一个类的一个实例转换为另一个实例，请尝试 Automapper

[https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

```
 var annalVacation = ctx.HtVacationDays.Where(x => x.UserId == userId); 
```

# sql-server - SSRS 在将文本参数值传递给存储过程时如何包装它们？

> ID：15250861
> 
> 赞同：0
> 
> 时间：2013-03-06T15:05:46.257
> 
> 标签：sql-server, stored-procedures, reporting-services

我有一个填充报表数据集的存储过程。其中一个参数是可空的 varchar(10)，在 sproc def 中默认为 Null。如果用户只想报告单个订单而不是满足其他参数化标准的所有订单，则此参数允许用户指定订单号。

订单号是整数，但它们存储在表中以前导零为前缀的 varchar(10) 字段中。（报告数据是从以这种方式存储整数订单号的 ERP 系统导入的，因此我保持相同的*愚蠢*格式！）。

当参数设置为 null 时，无论是在 SSMS 中执行存储过程还是在 SSRS 中使用数据集的“查询...”上下文菜单选项时，我都会得到我期望的所有行。

但是，当我在 SSRS 查询设计器表单中指定一个订单号（包含在“单引号”中，因此 SSRS 不会切断前导零）并执行存储过程时，我得到零行返回。然而，当从 SSMS 执行存储过程并将参数设置为相同的值时，我得到了正确的预期行数。

在解析提供给存储过程参数的值时，我感觉 SSRS 在后台做了一些意想不到的事情，所以我的问题是我应该如何指定一个包含整数的字符串，这样我才能在查询设计器中得到与我在SSMS？单引号还是别的？

*我没有发布代码，因为我想看看是否有人立即认识到这个问题，而不是离题，“你为什么要这样做，你为什么不这样做？” 最佳实践迷，不能跳出框框思考，输入答案！*;-p

但是，也就是说，如果没有人认识到这个问题，我会发布代码。

平台：SQL Server 2008 R2、BIDS 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:34:14.847

问题是单引号。我将它们放入“定义查询参数”“参数值”窗口。我也在其他两个参数上执行此操作，其中一个在 WHERE 子句中的“LIKE '%parametervalue%”中使用，因此额外的引号不会影响查询结果！

所以....我将以不同的方式处理这个问题，但问题仍然存在，如果你有一个带有前导零的整数的 varchar 字段，如果你不能使用单个值，你如何在 SSRS 中指定一个值引号？

我认为这家伙有同样的问题 [定义查询参数视觉工作室](https://stackoverflow.com/questions/7221886/define-query-parameters-visual-studio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:00:01.607

我也有同样的怀疑，这就是我要求屏幕截图的原因:)

SSRS 知道参数是基于字符串的，因此不需要您添加引号。

假设您的查询参数输入正确，您不需要在任何地方使用引号（字符串在前端不需要任何引号 - 显然在查询中它们需要被引用，否则您将获得隐式转换）。

如果您想处理在后端用前导零填充 int，您可以使用 REPLICATE() 来完成，或者您可以将 int 的字符串表示形式转换为 int。

例如最多有 10 个填充零：

```
DECLARE @SomeNumericValue int
SET @SomeNumericValue = 10
SELECT RIGHT(REPLICATE('0', 10) + cast(@SomeNumericValue as varchar), 10) 
```

结果：

```
0000000010 
```

否则你可以逃脱：

```
SELECT * FROM SomeTable WHERE SomeVarcharFieldWhichActuallyContainsPaddedInts = 10 
```

这是因为 SQL 将隐式`0000000010`转换为 int - 当然，如果表中表示了非数字值，则这会抛出错误（并且无论结果如何，都会抛出尝试此转换的每个查询，因为 SQL 将转换整个结果集以进行比较）

例如尝试以下脚本：

```
-- This will work:
DECLARE @SomeTable Table(IntString varchar(50))

insert into @SomeTable
SELECT '000001'
UNION
SELECT '000002'
UNION
SELECT '000003'

SELECT * from @SomeTable where IntString = 1

-- This WILL return some results but it won't be happy...!

insert into @SomeTable
SELECT 'Hello'

SELECT * from @SomeTable where IntString = 1 
```

# actionscript-3 - 如何在影片剪辑中使用 startDrag()？

> ID：15250862
> 
> 赞同：0
> 
> 时间：2013-03-06T15:05:49.337
> 
> 标签：actionscript-3, flash, actionscript, drag-and-drop

所以我想做的是我有一个从外部 swf 文件加载的影片剪辑。我希望能够拖动这个movieclip。我将有多个可拖动影片剪辑的实例，这就是为什么在主时间线上为每个剪辑单独的拖动代码并不是我真正想要的。我希望动作脚本位于从主时间线（根）运行的 swf 中。如何在影片剪辑中调整此代码？

```
import flash.events.MouseEvent;

this.addEventListener(MouseEvent.MOUSE_DOWN, startDragging, true);
this.addEventListener(MouseEvent.MOUSE_UP, stopDragging, true);

function startDragging(e:MouseEvent) {
object.startDrag();
}

function stopDragging(e:MouseEvent) {
object.stopDrag();
} 
```

另外我想做的是能够从该movieclip的一个区域拖动movieclip的全部内容，或者更具体地说，我希望在该movieclip中有一个可以与stardrag一起使用的热点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:21:02.070

在您的影片剪辑中输入以下代码。

```
stage.addEventListener(MouseEvent.MOUSE_DOWN, onDown);
stage.addEventListener(MouseEvent.MOUSE_UP,  onUp);

function onDown(e:MouseEvent):void
{
    if(e.target == this)
      this.startDrag();
}

function onUp(e:MouseEvent):void
{
    this.stopDrag();
} 
```

# unix - setuid 设置大数

> ID：15250870
> 
> 赞同：3
> 
> 时间：2013-03-06T15:06:11.783
> 
> 标签：unix, posix, setuid

我已经使用 root 运行了一个程序，其中我为 uid 9999999 调用了 setuid 函数，然后它成功设置了这个 uid，即使它在 /etc/passwd 中不存在。那么 setuid 如何验证 uid 以及设置此无效 uid 会产生什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:12:27.713

`setuid`不验证用户 ID，只是该进程有权设置它。

系统不关心用户是否在`/etc/passwd`;中没有条目。例如，您可以拥有任何用户 ID 拥有的文件，即使没有与之关联的“真实”用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:11:09.597

`setuid``root`当您有足够的权限执行它时（即，如果您是），通常不会验证任何内容。它只是将 UID 设置为所请求的 UID，无论用户名是否与该 UID 在`/etc/passwd`或其他地方相关联。

（根据[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/setuid.html)，如果 UID 无效，它可能会失败`EINVAL`，但我知道的 Unix 风格从不这样做。）

# java - 在 for 循环中禁用 JPanel 上的 JComponents：烦人的延迟

> ID：15250877
> 
> 赞同：0
> 
> 时间：2013-03-06T15:06:38.210
> 
> 标签：java, swing, jpanel

我有一个带有几个 JPanel 的 JFrame。一种是带有 JButtons GridLayout 的 boardPanel（4 x 4）。另一个是具有 FlowLayout 的 controlPanel，其中包含一个 JTextField 和两个 JButton。

我有两种方法 enableBoard() 和 disableBoard()。在这些方法中，我通过 for 循环将 boardPanel 和 controlPanel 中的每个组件设置为 true 或 false。这一切都发生在摆动计时器运行时。当我启动计时器并因此启动 enableBoard() （它通过 disableBoard 禁用）它有点工作，但通常有延迟，所以并非所有按钮都同时被禁用，我怀疑它与 Timer 有关因为延迟似乎在几秒钟内发生......这里是重要的方法：

```
public void disableBord() {
    Component[] boardcomps = boardPanel.getComponents();
    for(int i = 0; i < bordcomps.length; i++) {
        boardcomps[i].setEnabled(false);
    }

    Component[] checkComps = controlPanel.getComponents();
    for(int i = 0; i < checkComps.length; i++) {
        checkComps[i].setEnabled(false);
    }
}

public void enableBord() {
    Component[] boardcomps = boardPanel.getComponents();
    for(int i = 0; i < bordcomps.length; i++) {
        boardcomps[i].setEnabled(true);
    }

    Component[] checkComps = controlPanel.getComponents();
    for(int i = 0; i < checkComps.length; i++) {
        checkComps[i].setEnabled(true);
    }
} 
```

和运行的计时器：

```
timer = new Timer(1000, new ActionListener() {
        int time = game.getSeconds()+4;
        @Override
        public void actionPerformed(ActionEvent e) {
            if (time == game.getSeconds()+4) {
                lblFeedback.setText("3");
                lblTime.setText(game.secToMinSec(game.getSeconds()));
                time--;
            } else if (time == game.getSeconds()+3) {
                lblFeedback.setText("2");
                lbltime.setText(game.secToMinSec(game.getSeconds()));
                time--;
            } else if (time == game.getSeconds()+2) {
                lblFeedback.setText("1");
                lblTime.setText(game.secToMinSec(game.getSeconds()));
                time--;
            } else if (time == game.getSeconds()+1) {
                lblFeedback.setText("Start!");
                lblTime.setText(game.secToMinSec(time));
                time--;
                enableBord();
            } else if(time == 0) {
                lblTime.setText("0:00");
                lblFeedback.setText("Game finished!");
                disableBord();
                game.endeGame();
                timer.stop();
            } else if (time ==  game.getSeconds()) {
                lblTime.setText(game.secToMinSec(time));
                time--;
            } else {
                lblTime.setText(game.secToMinSec(time));
                time--;
            }
        }
    }); 
```

延迟看起来像这样：

![禁用 JComponent 时的延迟](../Images/3655aff64e4974189f47ccd2a908ceab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:21:47.333

一个适当的 repaint(); 在循环中的每个 setEnable() 似乎都解决了我的问题之后！

# android - 清单中的飞行模式接收器？

> ID：15250879
> 
> 赞同：4
> 
> 时间：2013-03-06T15:06:41.650
> 
> 标签：android, android-intent, airplane

我正在开发一个 Android 应用程序，该应用程序将在工业环境中用作手持控制器。为了让平板电脑不太适合带回家，我打算一直尝试以编程方式打开飞行模式，但在 4.2 中已弃用，这也是我们使用 Android Open Accessory 的版本。但是我在想，如果我可以在清单中注册一个接收器，这样它就会在更改飞行模式时启动我的应用程序，然后检查它是否已关闭并提示用户重新打开它。

我已经尝试了以下解决方案，也发现了[这个](https://stackoverflow.com/questions/2294971/intent-action-for-network-events-in-android-sdk)问题的答案。

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<receiver android:name=".receiver.ConnectivityReceiver">
<intent-filter>
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
</intent-filter>
</receiver> 
```

我也试过这段代码：

```
<receiver android:enabled="true" android:name=".ConnectivityReceiver">
<intent-filter>
    <action android:name="android.intent.action.SERVICE_STATE"/>
</intent-filter>
</receiver> 
```

[也被saxos](https://stackoverflow.com/questions/4319212/how-can-one-detect-airplane-mode-on-android)发现为 aswer 。

现在，这些解决方案都不会导致我的应用程序在更改飞行模式时启动。

**是否可以在清单文件中为飞行模式注册 BroadcaseReceiver 并让该意图启动应用程序？**

编辑 1：我确实让 BroadcastReceiver 在 java 代码中工作，这样我就可以在我的应用程序处于活动状态时检测到这种情况。这不是我想要的。谢谢。

编辑2：这是我目前的整个清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.i2c"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="17"
    android:targetSdkVersion="17" 
    android:maxSdkVersion="17"/>
    <!-- SDK 14 = 4.0 ICS
         SDK 17 = 4.2 JB -->             

<!-- Assures software is not loaded onto unsupported screen size, i.e. phones -->
<supports-screens android:xlargeScreens="true"
    android:largeScreens="true"
    android:normalScreens="false"
    android:smallScreens="false"
    android:anyDensity="true"/>

<uses-feature android:name="android.hardware.usb.accessory"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.i2c.mainActivity"
        android:label="@string/app_name"  
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.AIRPLANE_MODE" />
        </intent-filter>
        <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
            android:resource="@xml/accessory_filter"/>
    </activity>
</application> 
```

`USB_ACCESSORY ATTACHED`和`MAIN`启动器工作得很好，并从一个点启动我的应用程序`onCreate`。然而，`AIRPLANE_MODE`似乎没有做任何事情。

这是我在 java 代码中的 BroadcastReceiver：

```
 private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("I2CActivity", "onReceive of BroadcastReceiver()");
        String action = intent.getAction();
        if(ACTION_USB_PERMISSION.equals(action)) {
            Log.d("ACTION_USB_PERMISSION", action.toString());
            synchronized (this) {
                Log.d("syncronized", this.toString());
                UsbAccessory accessory = (UsbAccessory) intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);
                if(intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                    if (accessory != null) {
                        OpenAccessory(accessory);
                    }
                }
                else {
                    Log.d("mUsbReceiver", "permission denied for accessory " + accessory);
                }
            }
        }
        else if(UsbManager.ACTION_USB_ACCESSORY_ATTACHED.equals(action)) {
            Log.d("ACTION_USB_ACCESSORY_ATTACHED", action.toString());
            UsbAccessory accessory = (UsbAccessory)intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);
            if (accessory != null) {
                resumeAccessory();
            }
        }
        else if(UsbManager.ACTION_USB_ACCESSORY_DETACHED.equals(action)) {
            Log.d("ACTION_USB_ACCESSORY_DETACHED", action.toString());
            UsbAccessory accessory = (UsbAccessory)intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);
            if (accessory != null) {
                closeAccessory();
            }
        }
        else if(Intent.ACTION_AIRPLANE_MODE_CHANGED.equals(action)) {
            Log.e("Airplane Mode", "Airplane mode changed");
            airplaneMode = Settings.Global.getInt(context.getContentResolver(), Settings.Global.AIRPLANE_MODE_ON, 0) != 0;
        }
    }
}; 
```

但是据我了解，这仅在应用程序运行时注册，我想要一个即使在应用程序未运行时也注册的接收器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-21T18:39:19.257

通过更好地理解`Intents`和 XML 定义的接收器，我能够弄清楚这一点。这仅在 API 17 上进行了测试。这是清单的代码：

```
<receiver android:name="com.example.i2c.AirplaneModeReceiver">
     <intent-filter>
         <action android:name="android.intent.action.AIRPLANE_MODE"/>
     </intent-filter>
</receiver> 
```

然后创建一个名为*AirplaneModeReceiver*的 java 类文件并将以下内容放入其中：

```
public class AirplaneModeReceiver extends BroadcastReceiver {
   public void onReceive(Context context, Intent intent) {
       Intent startActivityIntent = new Intent(context, MainActivity.class);
       startActivityIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       context.startActivity(startActivityIntent);
   }    
} 
```

现在这将在飞行模式发生变化时启动活动，无论是打开还是关闭。自从切换到主屏幕启动器样式的应用程序后，我没有继续编写代码来检查飞行模式是否关闭，然后再开始活动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T15:29:46.547

这是接收器的片段

```
public void onReceive(Context context, Intent intent) {
        if (intent.getAction().intern() == Intent.ACTION_AIRPLANE_MODE_CHANGED) {
// Launch your app here
} 
```

# sitecore - 为什么 Sitecore 虚拟用户不更改 Sitecore.Context.User？

> ID：15250887
> 
> 赞同：1
> 
> 时间：2013-03-06T15:06:57.010
> 
> 标签：sitecore, sitecore6

为什么 AuthenticationManager.Login 不会更改 Sitecore.Context.User 它总是 Anonymous ？

```
 string userName = string.Format("{0}\\{1}", "extranet", "Login");     
            Sitecore.Security.Accounts.User virtualUser =  SC.Security.Authentication.AuthenticationManager.BuildVirtualUser(userName, isAuthenticated);

 Sitecore.Security.Authentication.AuthenticationManager.Login(virtualUser.Name); 
```

还是这是正确的行为？在这种情况下，Sitecore 如何处理对页面的访问？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:23:23.843

`AuthenticationManager.Login()`应该改变上下文用户。

您确定用户已登录吗？

您可以检查`AuthenticationManager.Login()`. 如果用户已登录，则返回 true，否则您仍会看到 Anonymous 用户。

下面是如何创建虚拟用户、为其分配角色并登录的示例代码：

```
Sitecore.Security.Accounts.User user = Sitecore.Security.Authentication
.AuthenticationManager.BuildVirtualUser(@"domain\user",true);

if(user!=null)
{
  string domainRole = @"domain\role";

  if(Sitecore.Security.Accounts.Role.Exists(domainRole))
  {
    user.Roles.Add(Sitecore.Security.Accounts.Role.FromName(domainRole));
  }

  Sitecore.Security.UserProfile profile = user.Profile;
  profile.FullName = "full name";
  profile.Save();
  Sitecore.Security.Authentication.AuthenticationManager.Login(user.Name);
} 
```

# iphone - navigationController:pushViewController 对 iPhone 事务具有特殊效果

> ID：15250889
> 
> 赞同：0
> 
> 时间：2013-03-06T15:06:58.387
> 
> 标签：iphone, objective-c, uinavigationcontroller, pushviewcontroller

通常我们总是使用以下方法从一个视图推送到另一个视图：

`[self.navigationController pushViewController:nextView animated:YES];`

*`for some other animations we used :UIViewAnimationTransitionCurlDown / flipRight etc etc.`*.

这些都是经常使用的，

但**我希望我的应用程序具有不同的过渡**..

任何其他自定义转换/转换中的特殊效果..（推/弹出）或任何其他外部 api 的动画..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T15:24:19.607

您可以使用**CATransition**：

```
CATransition *transition = [CATransition animation];
transition.duration = 1.0;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromTop;
transition.delegate = self;
[self.navigationController.view.layer addAnimation:transition forKey:nil];

[self.navigationController pushViewController:nextView animated:YES]; 
```

您可以通过以下方式更改过渡：`transition.subtype = kCATransitionFromTop;`

**不要忘记添加 Quartzcore 框架！**

# php - html中的文本框

> ID：15250908
> 
> 赞同：3
> 
> 时间：2013-03-06T15:07:51.440
> 
> 标签：php, javascript, html, css

这是我的代码：

```
<html>
<body>

  <BR><p><U>Add contact...</U></p><BR>
  Name:          <INPUT TYPE="text" NAME="firstbox">
  Id.number:     <INPUT TYPE="text" NAME="idbox">

  <?php
    session_start();

    $username=$_SESSION['UserID'];
    $s_name=$_GET['firstbox'];
    $s_id=$_GET['idbox'];
    $db = mysql_connect("???????", "???????", "");
    mysql_select_db("???????",$db);

    $result = mysql_query("SELECT * FROM contacts WHERE u_id='$username' and c_id='$s_id'",$db);

    $myrow = mysql_fetch_row($result);

    if(!$myrow) {
      mysql_query("INSERT INTO contacts(u_id, c_name, c_id) VALUES ('$username','$s_name','$s_id')",$db);
      header("Location: http://?????/protectedpage.php");
    } else {
      header("Location: http://?????contact1.htm");
    }
  ?>

</body>
</html> 
```

是否可以检查是否在`firstbox`and中输入了我的值`lastbox`，如果是，则连接到数据库，但如果否，则不要插入数据库？

是否可以限制一个框中的总整数，例如，`idbox`如果整数大于 5（12345、11234、99900），不要插入数据库？

好的，我已经尝试过了，但它不起作用

```
if (($s_id="") and ($_name=""))
{
header("Location: http://at-web2.comp.glam.ac.uk/students/10003088/contact1.htm");

}
else
{
$db = mysql_connect("at-web2.comp.glam.ac.uk", "user_10003088", "Glamorgan1");
mysql_select_db("db_10003088",$db);

$result = mysql_query("SELECT * FROM contacts WHERE u_id='$username' and c_id='$s_id'",$db);

$myrow = mysql_fetch_row($result);

if(!$myrow)
    {
   mysql_query("INSERT INTO contacts(u_id, c_name, c_id) VALUES ('$username','$s_name','$s_id')",$db);

    header("Location: http://at-web2.comp.glam.ac.uk/students/10003088/protectedpage.php");
   }
else{

    header("Location: http://at-web2.comp.glam.ac.uk/students/10003088/contact1.htm");
}
} 
```

我添加了一个 if 语句来检查，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:14:25.610

您所有问题的答案都是“是”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:23:47.613

1.  要检查文本框是否为空，请为每个文本框添加一个 If 语句（使用文本框名称而不是“文本”：

    ```
    $firstbox = $_POST['firstbox'];
    If ($firstbox === "") {
        Echo "firstbox Empty";
    }

    $idbox = $_POST['idbox'];
    If ($idbox === "") {
        Echo "idbox Empty";
    } 
    ```

2.  要检查 idbox 的值，请使用类似的 if 语句：

    ```
    $idbox = $_POST['idbox'];
    If (intval($idbox) > 5) {
        Echo "idbox value greater than 5";
    } 
    ```

# c++ - 获取集合元素之间的所有组合

> ID：15250909
> 
> 赞同：0
> 
> 时间：2013-03-06T15:07:58.043
> 
> 标签：c++, combinations

给定一个向量 > SETS 使得

```
SETS[0] = {1,2,3}
SETS[1] = {11,22,33}
SETS[2] = {111,222,333} 
```

我想创建所有的向量

```
{1,11,111} ... {1,11,333}, {1,22,111} ... {1,22,333} ... {3,11,111} ... {3,33,333} 
```

我已经在 boost doc 中寻找它，但没有找到任何东西。在我自己编写代码之前，是否有任何包含解决此问题的函数的库？

# objective-c - 使用 UIImageWriteToSavedPhotosAlbum 保存图像时的文件名是什么

> ID：15250910
> 
> 赞同：3
> 
> 时间：2013-03-06T15:08:02.390
> 
> 标签：objective-c, image, ios6, uiimage

我正在创建应用程序，我正在拍照或通过 lib 添加并将相同的图像保存在服务器上。

以下是我所拥有的

```
#pragma mark - UIImagePickerControllerDelegate

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    photoTaken = @"YES";
    btnImage = [info objectForKey:UIImagePickerControllerEditedImage];
    [btnImage setAccessibilityIdentifier:@"newImage"] ;
    [self.takePhoto setImage:btnImage forState:UIControlStateNormal];
    UIImageWriteToSavedPhotosAlbum(btnImage, nil, nil, nil);
    [self.navigationController dismissViewControllerAnimated:YES completion:nil];
} 
```

我正在使用代码`UIImageWriteToSavedPhotosAlbum(btnImage, nil, nil, nil);`在 iPhone 上保存图像，因为根据[这个问题的答案](https://stackoverflow.com/questions/15242849/how-to-save-local-image-to-online-database)，如果我想在服务器上保存图像，我需要文件名。

因此，我想知道如何在使用`UIImageWriteToSavedPhotosAlbum`.

任何想法/建议表示赞赏。

为什么我想要图像名称是因为我需要按照上面的链接答案提供该图像名称。

* * *

## 编辑 1

否则让我知道如何使用某个名称（使用其他公式）保存图像，以便我可以将该图像用于我的应用程序。

* * *

## 编辑 2

我试过下面。仍然无法正常工作。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    photoTaken = @"YES";
    btnImage = [info objectForKey:UIImagePickerControllerEditedImage];
    [btnImage setAccessibilityIdentifier:@"newImage"] ;
    [self.takePhoto setImage:btnImage forState:UIControlStateNormal];

    NSData *data = UIImagePNGRepresentation(btnImage);
    [data writeToFile:@"http://www.mysite.com/sama/myImages/newImage.png" atomically:YES];
    // I tried below also (thinking it will save on local)
    // [data writeToFile:@"newImage.png" atomically:YES];

    [self.navigationController dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:23:33.720

从 btnImage 在内存中构建 NSData...

```
NSData *data = UIImagePNGRepresentation(btnImage); 
```

然后将其设为您的帖子数据。

您也可以编写该数据并稍后上传...

```
[data writeToFile:@"any_file_you_want_int_temp_dir" atomically:YES]; 
```

# android - div下奇怪的细线，android上有部分透明的背景

> ID：15250913
> 
> 赞同：2
> 
> 时间：2013-03-06T15:08:05.973
> 
> 标签：android, css, line

好吧，标题结合我猜的屏幕截图解释了所有内容。

标题的 CSS 如下所示：

```
#mainHeader {
    background: url(../img/header.png) repeat-x;
    width: 100%;
    height: 60px;
    margin: 0 auto;
} 
```

图片的高度正好是 60 像素，当然我已经检查过这条线是否不是偶然地成为背景图片的一部分。不是，但有趣的是，如果我将#mainHeader 的高度设置为 59px，这条线就会消失。

有谁知道这可能是关于什么的？它是一个错误吗？或者一些我不知道的 CSS 属性很容易修复的东西？

提前致谢！

![奇怪的线](../Images/2283c836181185c5c638ab17707aab83.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:46:46.713

尝试添加`overflow:hidden`到`#mainHeader`CSS。这告诉浏览器不要在 之外呈现任何子内容`div`，并且可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T16:03:56.283

使用半透明`*.png`s 时我遇到了同样的问题。这似乎是由于 Android 缩放图像的方式。似乎有两个可以解决这个问题：

*   `background-position`, `background-size`- 只是摆弄这两个选项（例如，仅移动 1px）似乎有帮助。但是，此问题可能是特定于解决方案的，因此这可能不适用于所有设备。
*   用 CSS3 替换所有半透明图层`linear-gradient`效果很好。`linear-gradient`在所有移动浏览器中都得到了[很好的支持](http://caniuse.com/#search=linear)，所以我认为这是最好的方法。

# sql-server-2005 - 在 IIS Express 上为 MSDASQL 提供程序打开非常慢的数据库连接

> ID：15250916
> 
> 赞同：0
> 
> 时间：2013-03-06T15:08:16.977
> 
> 标签：sql-server-2005, asp-classic, iis-express, adodb

我发现在 IIS Express 上的经典 asp 中使用 MSDASQL 提供程序时，打开 ADODB 数据库连接很慢（在 2 到 8 秒之间）。

此外，它似乎将其他事情排队，就像在 IIS 跟踪中我还看到有时事件 ASP_DEQUEUE_REQUEST 可能需要 8 秒。

我刚刚在表面区域配置中找到了一种解决方法，以允许远程连接到它工作正常的数据库服务器。

但是我并不是特别想启用远程连接，所以我想知道是否有人知道这个问题的背景。我进行了广泛的研究，但还没有发现任何东西。

我已经尝试过替代提供商并使用“。”、localhost 等。

有任何想法吗？

我在想也许这与连接池有关？但我没有为此定义任何设置，所以我假设它使用默认值。

-谢谢亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:26:59.983

MSDASQL 已被弃用。

[本文](http://msdn.microsoft.com/en-us/library/ms810810.aspx)解释了替代方案。

# css - CSS：将背景颜色应用于ul li菜单的第一个孩子

> ID：15250920
> 
> 赞同：3
> 
> 时间：2013-03-06T15:08:27.830
> 
> 标签：css, menu

我只想将红色背景颜色应用于第一个 li 我尝试了几种方法但无法得到我想要的：

```
#rightmxmenu > ul > li:first-child > {background-color:#ca212d;}
#rightmxmenu > li:first-child > {background-color:#ca212d;} 
```

它不会影响任何东西

这是我的代码和 css [http://jsfiddle.net/gwdp3/1/](http://jsfiddle.net/gwdp3/1/)

希望任何专家都可以告诉我我需要改变什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:11:18.917

删除最后一个“>”是为我制作的。

```
#rightmxmenu > ul > li:first-child { background-color:#ca212d; }
#rightmxmenu > li:first-child { background-color:#ca212d; } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T15:12:35.943

改变这个：

```
#rightmxmenu > ul > li:first-child > {
    background-color:#ca212d;
} 
```

对此：

```
#rightmxmenu > ul > li:first-child  {
    background-color:#ca212d;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/gwdp3/2/)**

您不需要尾随`>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:11:16.303

您可能想尝试在 css 中使用类选择器并将其应用于所有“第一个”菜单项

```
.firstItem
{background-color:#ca212d;} 
```

并在 HTML 中使用

```
<ul>
<li class ="firstItem"></li></ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:14:46.837

这应该可以正常工作：

```
#rightmxmenu ul li:first-child {
background-color:#ca212d;
} 
```

# azure - 将 Azure 存储表数据清除/复制到 SQL Azure 的最快方法是什么？

> ID：15250925
> 
> 赞同：1
> 
> 时间：2013-03-06T15:08:35.123
> 
> 标签：azure, azure-sql-database, azure-table-storage

我有这些工作角色聚合传入数据并将总数存储在 Azure 存储表中。我需要将此数据清除/复制（在指定的时间间隔内）到 SQL Server 以进行报告。我正在批量清除大约 1000 行。带有选择/插入/更新的简单循环将需要很长时间。

任何想法如何最有效地做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:50:18.423

是否所有数据都在定义明确的分区中？例如，分区键“A”中有 1000 个实体，分区键“B”中有 1000 个实体。如果是这样，那么您应该能够从特定分区中选择所有记录。根据记录的数量，您可能必须处理延续令牌（您只能获取每个请求的最大数量并使用延续令牌来获取剩余的记录）。

使用分区键也可能是更新批次（在事务中）的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:32:28.063

首先介绍最简单的部分。一旦您在内存中获得了来自 ATS 的数据，您就可以使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)非常快速地将大量行插入 SQL 服务器（它的工作方式类似于 BCP，但来自 .NET）。

现在，最困难的部分是快速从 ATS 获取数据。我对您的 Pkey/Rkey 架构一无所知。但是，有几点需要考虑：

1) 使用单个 PartitionKey 和 RowKey 范围对 ATS 执行查询是最快的。如果您的查询不包含 RowKey 上的条件，即使您的行数少于 1000 并且指定了 PartitionKey，您也可能会遇到延续标记

2) 如果您需要从 ATS 获取大量数据并将工作拆分为一组单独且性能良好的查询，请考虑将您的查询分配到队列消息中，然后让多个处理器并行处理每个查询

3）清除可能很有趣。您可以使用批处理事务一次清除 100 个实体，因此，如果您的个人查询允许，在将数据处理到 sql server 后，您可以使用相同的内存中实体，并为每个分区键一次清除 100 个实体（这会比较快）。或者，如果可以，您可以将表拆分为多个按某个日期或其他键分区的表，并通过一次删除一个表来删除数据。例如，如果您有一个需要移动到 SQL 的大型 Orders 表，而不是单个 Orders 表，请创建每月的 Orders 表：Orders201301..thru..Orders2xxx_12... 并且一旦您导入一个月的订单，只需通过一个命令即可杀死该表（工作得很快）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:13:04.487

一个多月前我一直在寻找类似的解决方案，发现最快的方法是使用我自己的代码——从表存储中批量读取并插入到 sql。有用的一件事是在 sql 导入表中临时记录 PartitionKey + RowKey，这样当我的导入失败时，我可以安全地从上次成功的位置重新启动它。

RedGate 和其他人有一些工具允许您从表存储中检索所有数据，但据我所知 - 他们将其转储到文件中 - 而不是 SQL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:53:32.377

您可以尝试在本地下载所有数据，然后将它们插入 SQL。

[如何备份我的 Windows Azure 表存储？](https://stackoverflow.com/questions/5762159/how-can-i-back-up-my-windows-azure-table-storage)

# java - 如何在运行时更改 Spring 的 @Scheduled fixedDelay？

> ID：15250928
> 
> 赞同：46
> 
> 时间：2013-03-06T15:08:40.317
> 
> 标签：java, spring, scheduled-tasks, quartz-scheduler

我需要以固定的时间间隔运行批处理作业，并且能够在运行时更改此批处理作业的时间。为此，我遇到`@Scheduled`了 Spring 框架下提供的注解。但我不确定如何在运行时更改 fixedDelay 的值。我做了一些谷歌搜索，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-06-29T06:54:26.173

在spring boot中，可以直接使用一个应用属性！

例如：

```
@Scheduled(fixedDelayString = "${my.property.fixed.delay.seconds}000")
private void process() {
    // your impl here
} 
```

请注意，如果未定义该属性，您还可以使用默认值，例如默认值为“60”（秒）：

```
@Scheduled(fixedDelayString = "${my.property.fixed.delay.seconds:60}000") 
```

* * *

我发现的其他事情：

*   该方法必须是无效的
*   该方法必须没有参数
*   该方法可能是`private`

我发现能够`private`方便地使用可见性并以这种方式使用它：

```
@Service
public class MyService {
    public void process() {
        // do something
    }

    @Scheduled(fixedDelayString = "${my.poll.fixed.delay.seconds}000")
    private void autoProcess() {
        process();
    }
} 
```

作为`private`，计划的方法可以是您的服​​务本地的，而不是您的服务 API 的一部分。

此外，这种方法允许`process()`方法返回一个值，而`@Scheduled`方法可能不会。例如，您的`process()`方法可能如下所示：

```
public ProcessResult process() {
    // do something and collect information about what was done
    return processResult; 
} 
```

提供一些关于处理过程中发生的事情的信息。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-06T16:10:37.797

您可以使用 a`Trigger`来动态设置下一次执行时间。

有关详细信息，请参阅我对以[编程方式使用 Spring 调度工作的](https://stackoverflow.com/questions/14630539/scheduling-a-job-with-spring-programmatically-with-fixedrate-set-dynamically)[回答](https://stackoverflow.com/questions/14630539/scheduling-a-job-with-spring-programmatically-with-fixedrate-set-dynamically/14632758)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-07-13T21:32:47.207

创建接口，类似这样：

```
 public abstract class DynamicSchedule{
        /**
         * Delays scheduler
         * @param milliseconds - the time to delay scheduler.
         */
        abstract void delay(Long milliseconds);

        /**
         * Decreases delay period
         * @param milliseconds - the time to decrease delay period.
         */
        abstract void decreaseDelayInterval(Long milliseconds);

        /**
         * Increases delay period
         * @param milliseconds - the time to increase dela period
        */
        abstract void increaseDelayInterval(Long milliseconds);
} 
```

接下来，让我们在 spring-context 项目中实现位于 org.springframework.scheduling 的 Trigger 接口。

```
import org.springframework.scheduling.TaskScheduler;
import org.springframework.scheduling.Trigger;
import org.springframework.scheduling.TriggerContext;

import java.util.Date;
import java.util.concurrent.ScheduledFuture;

public class CustomDynamicSchedule extends DynamicSchedule implements Trigger {

    private TaskScheduler taskScheduler;
    private ScheduledFuture<?> schedulerFuture;

    /**
     * milliseconds
     */
    private long delayInterval;

    public CustomDynamicSchedule(TaskScheduler taskScheduler) {
        this.taskScheduler = taskScheduler;
    }

    @Override
    public void increaseDelayInterval(Long delay) {
        if (schedulerFuture != null) {
            schedulerFuture.cancel(true);
        }
        this.delayInterval += delay;
        schedulerFuture = taskScheduler.schedule(() -> { }, this);
    }

    @Override
    public void decreaseDelayInterval(Long delay) {
        if (schedulerFuture != null) {
            schedulerFuture.cancel(true);
        }
        this.delayInterval -= delay;
        schedulerFuture = taskScheduler.schedule(() -> { }, this);
    }

    @Override
    public void delay(Long delay) {
        if (schedulerFuture != null) {
            schedulerFuture.cancel(true);
        }
        this.delayInterval = delay;
        schedulerFuture = taskScheduler.schedule(() -> { }, this);
    }

    @Override
    public Date nextExecutionTime(TriggerContext triggerContext) {
        Date lastTime = triggerContext.lastActualExecutionTime();
        return (lastTime == null) ? new Date() : new Date(lastTime.getTime() + delayInterval);
    }
} 
```

现在配置：

```
@Configuration
public class DynamicSchedulerConfig {
    @Bean
    public CustomDynamicSchedule getDynamicScheduler() {
        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();
        threadPoolTaskScheduler.initialize();
        return  new CustomDynamicSchedule(threadPoolTaskScheduler);
    }
} 
```

和用法：

```
@EnableScheduling
@Component
public class TestSchedulerComponent {

    @Autowired
    private CustomDynamicSchedule dynamicSchedule;

    @Scheduled(fixedDelay = 5000)
    public void testMethod() {
        dynamicSchedule.delay(1000l);
        dynamicSchedule.increaseDelayInterval(9000l);
        dynamicSchedule.decreaseDelayInterval(5000l);
    }

} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-12-06T08:57:30.047

您也可以为此使用 Spring 表达式语言 (SpEL)。

```
@Scheduled(fixedDelayString = "#{@applicationPropertyService.getApplicationProperty()}")
public void getSchedule(){
   System.out.println("in scheduled job");
}

@Service
public class ApplicationPropertyService {

    public String getApplicationProperty(){
        //get your value here
        return "5000";
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T15:23:39.113

AFAIK Spring API 不会让您访问更改触发器所需的内部结构。但是您可以改为手动配置 bean：

```
<bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean">
    <property name="jobDetail" ref="jobDetail" />
    <property name="startDelay" value="10000" />
    <property name="repeatInterval" value="50000" />
</bean>

<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="simpleTrigger" />
        </list>
    </property>
</bean> 
```

然后如 SchedulerFactoryBean 中所述：

> 要在运行时动态注册作业，请使用对此 SchedulerFactoryBean 的 bean 引用来直接访问 Quartz Scheduler ( `org.quartz.Scheduler`)。这使您可以创建新的作业和触发器，还可以控制和监视整个调度程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-11T19:27:09.493

我处理过同样的问题。我们需要在运行时更改 cron 表达式并重新安排服务。所以应该有：

*   无需重新编译
*   没有重新部署
*   不重启

的应用程序。我检查了所有流行的解决方案，但只有 2 个满足所有要求。

*   按照[建议](https://stackoverflow.com/a/15252365/1760058)实施[SchedulingConfigurer](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/SchedulingConfigurer.html) [_](https://stackoverflow.com/users/1311394/ach)
*   [使用此处](https://helecloud.com/blog/rescheduled-services)描述的自定义解决方案

SchedulingConfigurer 方法的缺点是它是**基于拉取的**，即每次执行服务的业务逻辑时都会拉取调度配置。这通常不是一件坏事，但是如果配置很少更改并且执行间隔很短，那么将会有很多不必要的请求。

[自定义解决方案](https://helecloud.com/blog/rescheduled-services)的缺点是它需要更多的编码，但它是**基于推送的**并对配置更改做出反应，因此不会执行不必​​要的请求/调用。

# java - Java Web App WAR 文件中缺少 Web 服务

> ID：15250929
> 
> 赞同：1
> 
> 时间：2013-03-06T15:08:43.117
> 
> 标签：java, web-services, tomcat, netbeans

我已经创建了 java web 应用程序并添加了 web 服务。
**右键单击项目根节点 > 新建 > Web 服务。**
当我使用**NetBeans IDE 6.9.1**时，我在 Project 的**dist**文件夹中找到了**WAR**文件。然后将其复制到**tomcat webapps**文件夹。Index.jsp 工作正常（在浏览器中编写 Hello World），但我找不到 webservice - 404。我认为 web 服务没有与我的 web 应用程序组装在一起。

 ****如果这是问题所在，**我如何将 Web 服务与 Web 应用程序组装到战争文件中？**

![java项目树视图](../Images/88c3f0ae461b55f884b7b56b318e9d6d.png)

**PS 当我使用自己的 glassfish 服务器从 netbeans 运行项目时，webservice 是可浏览的！！！******

# sql - SQL 删除空格（重复）

> ID：15250933
> 
> 赞同：1
> 
> 时间：2013-03-06T15:09:12.157
> 
> 标签：sql, sql-server-2008

我有一个包含大约 30 万条记录的电话数据库，

我想要做的是删除空格如下： -

```
update SMSTelephone set
Telephone = replace(Telephone, ' ', '') 
```

问题是当我这样做时，我收到以下错误：-

```
Msg 2627, Level 14, State 1, Line 1
Violation of PRIMARY KEY constraint 'PK_SMSTelephone'. Cannot insert duplicate key in     object 'dbo.SMSTelephone'.
The statement has been terminated. 
```

我猜这是因为我可以有这样的记录：

1.  077 7777 7777
2.  07777777777

因此删除空格将失败，因为这两条记录将被重复。

无论如何我仍然可以执行此命令，同时不更新任何会导致重复的记录？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:12:54.030

试试这个：

```
update ST set
  Telephone = replace(st.Telephone, ' ', '')
from SMSTelephone st
cross apply (select count(*) as cnt
             from SMSTelephone sti
             where replace(st.Telephone, ' ', '')=replace(sti.Telephone, ' ', '')) i
where i.cnt=1 
```

要更新其中之一：

```
WITH CTE (Telephone,DuplicateCount)
AS
(
  SELECT Telephone,
  ROW_NUMBER() OVER(PARTITION BY replace(Telephone, ' ', '') ORDER BY len(Telephone)) AS DuplicateCount
  FROM SMSTelephone
)
update CTE
set Telephone = replace(Telephone, ' ', '')
WHERE DuplicateCount = 1 
```

要删除除一个以外的所有内容：

```
WITH CTE (Telephone,DuplicateCount)
AS
(
  SELECT Telephone,
  ROW_NUMBER() OVER(PARTITION BY replace(Telephone, ' ', '') ORDER BY len(Telephone)) AS DuplicateCount
  FROM SMSTelephone
)
delete from CTE
WHERE DuplicateCount > 1 
```

用于更新的小提琴（类似用于删除）

[http://sqlfiddle.com/#!3/9e117/2/0](http://sqlfiddle.com/#!3/9e117/2/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:20:42.330

要使该列成为有效的 PK，输入数据确实应该已经过净化（DBA 讲座结束）。

对于单列表，您通常会为干净的数据创建一个镜像表：

```
CREATE TABLE SMSTelephoneBak
( Telephone VARCHAR(20)
); 
```

将干净的数据插入其中：

```
INSERT into SMSTelephoneBak
SELECT DISTINCT REPLACE(telephone,' ','') FROM dbo.SMSTelephone; 
```

清除源表：

```
TRUNCATE TABLE dbo.SMSTelephone; 
```

插入清理后的数据：

```
INSERT INTO dbo.SMSTelephone 
        ( Telephone )
SELECT Telephone FROM dbo.SMSTelephoneBak; 
```

最后，删除临时表：

```
DROP TABLE dbo.SMSTelephonebak; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:15:34.113

我假设您正在这样做，因为数据是手动输入的，或者是由尚未清理输入然后检查现有记录的应用程序输入的。

一个相当复杂的解决方案是添加一个 WHERE 子句，该子句搜索与清理后的字符串匹配的任何内容，然后将其排除。

# asp.net-mvc - Actionresult vs JSONresult

> ID：15250941
> 
> 赞同：37
> 
> 时间：2013-03-06T15:09:28.817
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-5, jsonresult

**我有两个问题：**

> 1.  JSONResult 和 ActionResult 有什么区别？
>     
>     
> 2.  什么时候在 MVC 中使用 JSONResult？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-06T15:12:05.807

`ActionResult`是一个动作可以返回的抽象类。

`Controller`(例如, `Json()`, `Content()`, ...)中的辅助方法`View()`返回继承的不同具体类`ActionResult`，包括`JsonResult`.

您应该将您的操作方法声明为返回`ActionResult`，以便它们可以自由地返回任何具体的结果类。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-06T15:11:54.640

`JsonResult`当您想要返回原始 JSON 数据以供客户端（网页或移动客户端上的 JavaScript）使用时使用。

如果`ActionResult`您想返回视图、重定向等以由浏览器处理，请使用此选项。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-14T10:44:17.877

`ActionResult`是一个*抽象类*。`JsonResult`是 的子类型`ActionResult`。所以我们可以返回两种类型的 json 内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T10:24:00.503

> **json结果**
> 
> 这个有点复杂，但仍然不是很复杂。它还对其 ContentType 进行了硬编码，但更复杂的是它使用硬编码的 JavaScriptSerializer 来序列化 JSON 数据，然后再将其直接写入响应。

这篇文章可能会有所帮助
[http://brendan.enrick.com/post/types-of-aspnet-mvc-3-action-results.aspx](http://brendan.enrick.com/post/types-of-aspnet-mvc-3-action-results.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T15:20:25.427

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionresult%28v=vs.108%29.aspx)`ActionResult`文档：

> ActionResult 类封装了动作方法的结果，用于代表动作方法执行框架级操作。
> 
> 动作方法通过执行工作并返回动作结果来响应用户输入。动作结果表示框架将代表动作方法执行的命令。ActionResult 类是动作结果的基类

对于[JsonResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult%28v=vs.108%29.aspx)：

> 表示用于将 JSON 格式的内容发送到响应的类。

# jquery - jQuery中的角到角显示动画？

> ID：15250942
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:09:29.040
> 
> 标签：jquery, css

我需要为相对定位的 div 设置动画，动画从`display:none;`到 `display:block;`。我需要“缩放”它，从右下角到左上角。有没有办法做到这一点？（最好在 jQuery 中，但任何有效的东西都很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:36:36.867

我不确定您要淡入或更改元素的大小。听起来你想把它从隐藏中带出来。

由于 HTML 布局都是从顶部和左侧完成的，因此至少可以说要从右下角到左上角进行动画处理是很棘手的。

通过仔细结合`slideUp`与`slideDown`位置固定或绝对，[你可以得到一个元素从下往上显示。](http://www.bennadel.com/blog/1827-Using-jQuery-s-SlideUp-and-SlideDown-Methods-With-Bottom-Positioned-Elements.htm)[但是我还没有听说过不使用一些非常先进的 jQuery](https://stackoverflow.com/questions/521291/jquery-slide-left-and-show)的方法来从右向左滑动，包括前沿。

所以我提供了这个解决方案：由于你试图显示的 div 是相对定位的，你可能有某种包装器，或者一个容易放置的包装器。

使用包装器，您可以将其`overflow`规则设置为隐藏，然后将“隐藏”div 放置在其边界之外。

[现在使用一个简单的 jQuery 动画](http://jsfiddle.net/q8w9d/2/)，您可以通过在包装器的边界内重新定位它来“显示”它

这是一个例子：

HTML：

```
<div class='wrapper'>
    <div class='growIt'>Text for div</div>
</div>
<input type='button' id='showHide' value='Show / Hide'/> 
```

CSS：

```
.wrapper{
    background:blue;
    position:relative;
    width:200px;
    height:200px;
    overflow:hidden;
}
.growIt{
    background: red;
    position:relative;
    width:200px;
    height:200px;
    top:200px;
    left:200px;
    display:block;
} 
```

jQuery：

```
$(function(){
    var hiding = true;
    $('#showHide').click(function(){
        if(hiding == true){
            hiding = false;
            $('.growIt').animate({top:'0px',left:'0px'},2000);    
        }else{
            hiding = true;
            $('.growIt').animate({top:'200px',left:'200px'},2000);    
        }
    });
}); 
```

当您单击按钮时，它将隐藏或显示红色 div。

如果您将其从`display:none`to 设置为动画的要求`display:block`是因为您需要它在进入视图时将其他表单元素推开，[我建议添加另一个包装器，`position:relative`然后使包装器从底部“向下”滑动。](http://jsfiddle.net/KftqU/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:23:00.570

这是你想要的？

[http://jqueryui.com/resizable/](http://jqueryui.com/resizable/)

[http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_eff_animate](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_eff_animate)

[http://jqueryui.com/effect/](http://jqueryui.com/effect/)

# sql - 如何结合这里提到的两个查询？

> ID：15250948
> 
> 赞同：0
> 
> 时间：2013-03-06T15:09:37.607
> 
> 标签：sql, oracle, plsql

在这里，我有两个名为`main_table`and的表`main_table_replica`。`main_table_replica`是 的复制品`main_table`。但问题是我可以在`main_table`或中找到数据`main_table_replica`。现在我正在做如下查询。我怎样才能避免在这里联合？在这两个查询中，唯一的变化是`main_table`and `main_table_replica`。

```
SELECT DISTINCT e.some_id
         FROM
             main_table e,   //Change is here
             main_table_join_one x     
             where  e.some_id = x.some_id(+)
             and (x.status in('A','I') or x.status is null)
             and e.code='XYZ' and e.second_code in('XYZ','ABC')

             UNION

        SELECT DISTINCT t.some_id
         FROM
             main_table_replica t,   //Change is here
             main_table_join_one xf     
             where  t.some_id = xf.some_id(+)
             and (xf.status in('A','I') or xf.status is null)
             and t.code='XYZ' and t.second_code in('XYZ','ABC') 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:13:50.730

以这种方式从两个不同的表中获取东西正是`union`它的用途。没有理由避免它。

但是，您可以缩小联合的范围以减少重复：

```
select distinct combined.some_id from (
        select e.some_id from main_table e
            union
        select t.some_id from main_table_replica t
    ) combined
    inner join  main_table_join_one x on
        combined.some_id = x.some_id(+) and
        (x.status in('A','I') or x.status is null) and
        combined.code='XYZ' and 
        combined.second_code in('XYZ','ABC'); 
```

# ember.js - ember-data 中相关模型之间的关系是如何建立的

> ID：15250949
> 
> 赞同：4
> 
> 时间：2013-03-06T15:09:40.450
> 
> 标签：ember.js, ember-data

我假设如果 ember-data 中的模型包含与第二个模型相关的 id，那么根据我[在 github 上](https://github.com/emberjs/data/issues/783)创建的问题，该 id 也可用于建立与第二个模型对象的 belongsTo 关系。显然情况并非如此。

有谁知道在 ember-data 存储中都存在的两个对象之间建立关系所需的情况相互关联？是否必须同时加载相关对象？（或者在 RESTAdapter 的情况下通过相同的请求）以使 id 引用起作用？如果他们没有通过同一个请求，是否无论如何都可以在以后的请求中建立这种关系，而不必为寻找关系的请求添加事件处理程序并手动设置它们？这是我看到的问题的一个示例：

```
App.ModelA = DS.Model.extend({
  name:      DS.attr('string'),
  modelBId:  DS.attr('number'),
  modelB:    DS.belongsTo('App.ModelB')
});

App.ModelB = DS.Model.extend({
  name: DS.attr('string')
});

App.ModelB.find(2);       // returns an object

modelA.get('modelBId');   // returns 2
modelA.get('modelB');     // returns null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:49:43.750

当您想要从 REST API 加载/保存数据时，关联对象的 ID 很有用。然后您可以使用 RESTAdapter 并发送相关对象的 ID。

例如，对于一个`belongsTo`关系，ember-data 假设您将发送一个`model_b_id`带有相关对象 ID 的键。然后 ember-data 将处理此对象的加载，通常通过调用 API ：`GET model_b/the_id`

也可以通过嵌入它们而不是通过 id 给出引用来加载关联的对象。

有关更多示例，请参阅有关 StackOverflow 和 ember-data 项目中的示例/测试的其他问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:28:37.453

亚当，

我自己从 Ember Data 开始，混淆通常是由于它对 REST API 的许多自动化/假设。尝试：

```
App.ModelA = DS.Model.extend({
  name:      DS.attr('string'),
  modelB:    DS.belongsTo('App.ModelB')
}); 
```

REST API 返回模型 A 的地方，例如：

```
{"model_a":{"name": "Adam", "model_b_id": 2}} 
```

有效且默认情况下，Ember Data 将“_id”（对于任何 belongsTo 关系）添加到 decamelized 属性名称上，或者将“_ids”添加到任何 hasMany。

# file-sharing - 高度机密数据的文件共享

> ID：15250950
> 
> 赞同：0
> 
> 时间：2013-03-06T15:09:47.150
> 
> 标签：file-sharing, file-management

我的公司有时必须将大型、高度机密的文件发送给特定客户（组织内的个人）。我们一直在使用（由我）定制的解决方案，但我们正在寻找替代系统，因为我们在内部进行了许多更改，使该解决方案不太可行。

我认为我们需要的是类似于 Dropbox 或 filegenius-ftp 但用于高度机密文件的东西。Dropbox 似乎对此不够安全。

我们的想法是，我们的一名员工会上传一个文件，然后为客户创建一个链接。他们会通过电子邮件将该链接发送给客户。然后，客户将单击该链接以获取该文件。

显然，这里有一些步骤容易产生安全风险，因此我们需要以某种方式对链接进行加密，并让客户对系统进行身份验证以证明他们是谁。但是，我们希望系统足够简单，这样我们的员工就不必花费数小时为每个客户设置新用户。

任何可以做到这一点的现有系统的想法？

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T19:22:57.753

Linoma Software 刚刚在他们的 GoAnywhere Services 产品中宣布了一个新模块，可以做到这一点，而且它可以将您的文件存储在现场而不是云中。它被称为GoDrive。如果您想试用，可以在 goanywhere.com 下载免费试用版（免责声明，我在那里工作）。

# python - 如何在 Vpython 中显示分数？

> ID：15250951
> 
> 赞同：0
> 
> 时间：2013-03-06T15:09:47.203
> 
> 标签：python, vpython

**我的代码**

```
from visual import *

class Punktecounter():
    def __init__(self,position=(0,0), score=0):
        self.counter = label(pos=position, color=color.red, text=str(score))
        self.score = score
    def scoring(self):
        self.score = self.score+1
        print (self.score)

p = Punktecounter()
while True:
    p.scoring()
    rate(1) 
```

所以打印部分工作正常。但是标签没有显示分数。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:11:40.220

标签不会自行更新，您需要明确地这样做：

```
def scoring(self):
    self.score=self.score+1
    self.label.text = str(self.score)
    print (self.score) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T16:59:36.287

它应该是这样的

```
def scoring(self):
    self.score=self.score+1
    self.counter.text = str(self.score)
    print (self.score) 
```

# maven - 两个独立 Jar 文件的 Maven 配置文件

> ID：15250952
> 
> 赞同：1
> 
> 时间：2013-03-06T15:10:03.487
> 
> 标签：maven

我在一个项目中有两个主类，我想生成两个单独的 jar 文件。我找到了使用配置文件的解决方案，但我得到的结果是错误的。当我使用`maven-jar-plugin`并且`maven-resource-plugin`为了从最终的 jar 文件中排除属性文件时，我将它们都放在了两个单独的`<profile>`-s 中。唯一的区别是`<id>`不同的`<profile>`和主要的类条目。

有人可以告诉我正确的配置吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:26:25.313

我建议使用 jar 插件来创建带有分类器的工件。将项目定义为`<packaging>pom</packaging>`. 定义一个默认激活并进行编译的配置文件。确保指定阶段。然后添加两个处理您的包装的配置文件。然后，如有必要，还可以使用 build-helper-maven-plugin 将工件附加到项目中。

# maven - 禁用测试的并发执行

> ID：15250962
> 
> 赞同：0
> 
> 时间：2013-03-06T15:10:34.440
> 
> 标签：maven, testing, concurrency

我们有几个人在做一个项目。在测试环境中，我们使用真实服务的沙箱，一次只能由一台机器访问（如果您在两台机器上同时运行测试，测试将失败）。如果某些测试当前正在另一台机器上运行，有没有办法锁定它们在一台机器上的执行？我们使用 maven 并将测试分为单元测试和集成测试。理想的解决方案是只锁定集成测试的执行。

我会很感激任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:14:12.713

恕我直言，您应该将集成测试执行委托给持续集成服务器并禁用其开发配置文件。
我认为除了锁定目标资源并在集成测试实现中以编程方式测试锁定之外，没有其他方法可以满足您的期望

# java - 异常处理：了解基础

> ID：15250967
> 
> 赞同：1
> 
> 时间：2013-03-06T15:10:43.027
> 
> 标签：java, exception-handling

我有一些基本问题：Java 异常处理的基础知识。我已经实现了我自己的异常类`myArrayException`，它扩展了`NegativeArraySizeException`. 该代码非常基本，整个内容如下所示：

```
class myArrayException extends NegativeArraySizeException {

    myArrayException() {
        super("my custom exception class");
    }
}

public class myClass {
    public static void main(String args[]) {
        try {
            myMethod();
        } catch (myArrayException e) {

            System.out.print("hello");
        }
    }

    public static void myMethod() {
        int size = 5;
        if (size < 0) {
            throw new myArrayException();
        }
        int[] a = new int[size];
        System.out.print("code successfully reached");
    }
} 
```

代码工作正常。当我将负值设置为“大小”变量时，块中的代码：

```
catch(myArrayException e) {
    System.out.print("hello");
} 
```

得到正确执行。但如果我添加

```
public static void myMethod() throws myArrayException 
```

并删除 if 条件，然后我编写的 catch 块不会执行。谁能告诉我为什么？特别是因为我为该方法指定了“throws myArrayException”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:14:07.913

`throws`表示该函数**可以**抛出异常。这**并不**意味着它**总是**抛出异常。

简而言之，添加`throws`语句确保调用该方法的人必须为此异常添加 try..catch 块。

读取[已检查和未检查的异常](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:22:33.050

您应该学习的 oracle 站点上有一个教程。它将帮助您理解异常。链接是：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/definition.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/definition.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:02:22.903

添加到有关`throws`Java 关键字的信息中，您似乎编写了一个实际上无法执行的程序。或者更确切地说，它被一个未处理的异常停止。你说

> 但是如果我添加`public static void myMethod() throws myArrayException`和删除 if 条件

如果通过“if 条件”，您的意思是此检查：

```
 if (size < 0) {
        throw new myArrayException();
    } 
```

然后`MyMethod`不再抛出`myArrayException`。相反，该语句`int[] a = new int[size];`将抛出一个`NegativeArraySizeException`您没有捕获的异常，使其成为**未处理的异常**，这通常会停止程序的执行。在这种情况下，该行`System.out.print("code successfully reached");`也不会执行，看起来你的程序什么也没做。

要回答您的具体问题（完全披露，自从我使用 Java 以来一直如此），`throws`关键字更多的是对您的方法的免责声明。它不影响方法的编译或执行。正如 baraky 所说：

> `throws`表示该函数可以抛出异常。这并不意味着它总是抛出异常。

1.  **“myMethod throws myArrayException”对我的代码有影响吗？**不行，没有效果。这只是对其他人的警告。
2.  **如果我删除整个“if”块，那么 JRE 本身会处理它吗？**JRE 处理任何未捕获的异常，因为它是最高级别的程序。如果删除 if 块*和*其中的`throw`语句，则`NegativeArraySizeException`在传入净大小时会抛出 a （从数组分配的行：`int[] a = new int[size];`），而不是 a `MyArrayExcpetion`。
3.  **所以`throw`myMethod 中的声明很重要而不是`myMethod throws myArrayException`？**重要是一个相对术语。该`throw`语句对于立即执行的代码很重要，因为它会影响程序流程和执行。对`throws myArrayException`方法声明没有任何直接影响。**但是**，如果您希望此代码在足够长的一段时间内被他人甚至您自己广泛使用，以至于您可能不记得在编写应用程序的每一行最后一行时在想什么，那么它就变得*非常*重要，因为...
4.  **因为，即使没有这个语句代码也可以正常工作......为什么要添加这个语句？** `throws`基本上告诉其他任何人查看您的代码“嘿，如果您调用此代码，您最好处理这些异常，否则您的程序可能会崩溃。” 您不必*包含*此声明，但如果您这样做，它会使每个人的生活更轻松。

如果您的方法捕获到异常，则不应说它抛出该异常。使用“已检查与未检查”的术语在代码中分解它，自从我使用 Java 以来，这种术语似乎变得很流行：

```
public static void MyMethod() throws MyArrayException{
    int size = 5;
    if (size < 0) {
        // Unchecked exception, properly warned callers of MyMethod that you will
        // throw it and they need to catch it
        throw new MyArrayException();
    }
    if (size == 3) {
        // Unchecked exception, but you didn't warn callers of MyMethod
        // No functional impact for your code, but if someone else is relying
        // on this method, they won't know catch this and will likely be
        // irate with you if it crashed their program
        throw new IHateThreesException();
    }

    try {
        int[] a = new int[size];
    }
    catch(NegativeArraySizeException)
    {
        // This is a checked exception, because you checked for it with a
        // try-catch block and don't re-throw it
        System.out.print("Code checked for this but size " + size + " was negative anyways!");
    }
    catch(OutOfMemoryExcpetion ome)
    {
        // I _think_ this is still an unchecked exception, because the I choose
        // to re-throw it. Regardless, we explicitly throw this exception so
        // there is no excuse for us to not have included it in the throws
        // declaration
        System.out.print("I just canno' do it captain, I don't have the memory!"
            + "(Free up some memory and try again)");
        throw ome;
    }
    System.out.print("code successfully reached");
} 
```

这些示例是根据其他人所说的以及我自己对 Java 的微弱记忆拼凑而成的。我不知道**受检异常**的确切定义，但希望我至少能抓住它的本质以及它与**未受检**异常的区别。如果我弄错了，请纠正我。

**编辑：**做更多阅读，我认为我对什么是检查异常和不是检查异常非常错误。希望有人能纠正我。

# sql-server - 我的 SQL Server 本地数据库中的初始目录是什么？

> ID：15250969
> 
> 赞同：1
> 
> 时间：2013-03-06T15:10:45.720
> 
> 标签：sql-server, entity-framework

我有以下连接字符串：

```
<add name="xx" 
  connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=abc;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\abc.mdf" 
  providerName="System.Data.SqlClient" /> 
```

有人可以解释初始目录的含义。我可以有两个连接字符串指向同一个数据文件但不同的目录吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-27T19:05:59.570

LocalDb 的正常用途是使用 AttachDBFilename，程序将创建一些 GUID，例如通常被忽略的目录名称。如果 SQL 实例不存在，则在首次访问文件时创建该实例。该实例可能不存在，并且可能在使用之间被任意删除。一切都围绕 *.mdf 文件。这些程序也由最终用户安装，这些最终用户除了安装了 LocalDB 外，不会对 SQL 做任何事情。

如果您想为您的数据库指定一个特定的名称，以便您可以轻松地在 master 中交互引用它，该怎么办？然后您还需要使用初始目录。特别是我发现，如果我不同时使用两者，那么我无法使用主服务器中的 sp_detach_db 将我的数据库与代码分离，因为我不知道名称。

同时使用 InitialCatalog 和 AttachDbFilename 不会是多余的，因为您首先需要 AttachDBFilename，因为数据库尚不存在，只是文件，并且您需要 Initial Catalog 与主数据库中的数据库进行交互。

如果我真的错了，请纠正我，因为我已经使用这项技术一年多了，并且有很多我自己的问题，我已经问过没有人回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T15:13:01.683

初始目录是连接字符串所针对的服务器上的数据库。

是的，您可以有多个指向不同数据库的连接字符串。数据源将是服务器名称，初始目录是数据库名称。

**编辑：（** 在这里处理评论，因为它在评论中看起来很糟糕）

不知道你所说的数据文件是什么意思。假设您在本地计算机上设置了一个 SQL Server 实例，其中包含两个名为 Geography 和 Reports 的数据库。您可以有两个连接字符串，如下所示：

```
<add name="Geo" connectionString="Data Source=localhost;Initial Catalog=Geography;Trusted_Connection=True;persist security info=False;integrated security=SSPI;" providerName="System.Data.SqlClient"/>

<add name="Rep" connectionString="Data Source=localhost;Initial Catalog=Reports;Trusted_Connection=True;persist security info=False;integrated security=SSPI;" providerName="System.Data.SqlClient"/> 
```

# obfuscation - 保留类方法，但混淆 proguard 中的包

> ID：15250971
> 
> 赞同：1
> 
> 时间：2013-03-06T15:10:53.147
> 
> 标签：obfuscation, proguard

> com.company.package1.CLASS
> - public void MethodA ();
> - 公共无效方法B（）；
> - 公共无效方法C（）；

CLASS 有 3 个公共方法，我需要保留它们，但可以删除包。即预期的结果可能是

> abcCLASS 或 abcD（替代方案，类名也被混淆了）
> - public void MethodA ();
> - 公共无效方法B（）；
> - 公共无效方法C（）；

我写了一些脚本，但是如何扩展它们以满足我的要求。

> ```
>  -keep class 
>         com.company.package1.CLASS {
>         public <methods>;
>     }
> 
>     -repackageclasses ''
>     -allowaccessmodification 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-07-03T13:37:10.400

使用 keep 和 allowobfuscation 修饰符，如下所示

`-keep,allowobfuscation class xx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:53:05.047

您可以使用--cfr`-keepclassmembers`代替`-keep`。ProGuard 手册 > 使用 > [-keep 选项概述](http://proguard.sourceforge.net/manual/usage.html#keepoverview)。

# grails - 带有投影的 CreateCriteria 不会选择所有列

> ID：15250974
> 
> 赞同：2
> 
> 时间：2013-03-06T15:11:13.580
> 
> 标签：grails, projection, createcriteria

我的问题与 Grails Projections 完全一样 [，没有返回所有属性，也没有分组](https://stackoverflow.com/questions/13911615/grails-projections-not-returning-all-properties-and-not-grouped)

我有以下标准

```
def sharedDocumentsInstanceList SharedDocuments.createCriteria().list(params){
   createAlias('receiver', 'r')
   createAlias('author', 'a')
   eq("r.id",session.uid)  
   projections{
      groupProperty("a.id")
      property("a.firstName","firstName")
      property("a.lastName","lastName")
      property("a.emailAddress","email")
   }
} 
```

其中 sharedDocuments 定义如下

```
class SharedDocuments {
   Users author
   Users receiver
   Documents file
} 
```

我所看到的是 sharedDocumentsInstanceList 总是只有投影中提到的最后一个属性。我可以在“withCriteria”中使用相同的查询，但我似乎失去了自动分页的常规优点，因为 withCriteria 不返回分页的 pagedresultlist！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T13:42:17.063

为了那些仍然有这个问题的人；删除`params`列表方法上提供的对象。所以上面的条件查询变为：

```
def sharedDocumentsInstanceList = SharedDocuments.createCriteria().list {
    createAlias('receiver', 'r')
    createAlias('author', 'a')
    eq("r.id",session.uid)  
    projections {
        groupProperty("a.id")
        property("a.firstName","firstName")
        property("a.lastName","lastName")
        property("a.emailAddress","email")
    }
    maxResults(params.max)
    firstResult(params.offset)
    order(params.sort, params.order)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:57:32.067

```
 projections{                
        author {
           groupProperty("id")
           property("firstName","firstName")
           property("lastName","lastName")
           property("emailAddress","email")
        }
    } 
```

使用上述方法会产生不同的结果吗？只是一个想法...

# python - 如何获取导致异常的函数的参数

> ID：15250977
> 
> 赞同：0
> 
> 时间：2013-03-06T15:11:22.733
> 
> 标签：python, exception

可以说我下面的代码：

```
def myDecorator(func):
  def wrapper(self):
    try:
      func(self)
    except Exception as e:
      print "The argument of the function was:" # print "Some Text"
      raise
  wrapper.__name__ = funct.__name__
  return wrapper

@myDecorator
def do_something(self):
  do_something_again("Some text") 
```

我的问题是：如何在我的“except”块中显示赋予函数“do_something_again”的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:13:56.297

打印`str(e)`以获取更多信息。你的例子：

```
def myDecorator(func):
  def wrapper(self):
    try:
      func(self)
    except Exception as e:
      print "The argument of the function was:", str(e)
      raise
  wrapper.__name__ = funct.__name__
  return wrapper 
```

# apache-flex - Flex 将 stage.mouseChildren 设置为 false 可防止使用繁忙光标

> ID：15250984
> 
> 赞同：0
> 
> 时间：2013-03-06T15:11:53.337
> 
> 标签：apache-flex, cursor

我试图禁用鼠标单击并从 UIComponent 外部呈现繁忙的光标。我这样做：

```
protected function setBusyCursor() : void {

        const stage:Stage = mx.core.FlexGlobals.topLevelApplication.stage;
        if (stage){
            stage.mouseChildren = false;
        }
        CursorManager.setBusyCursor();
    } 
```

这确实禁用了鼠标单击，但出现的光标是常规指针（不是忙碌的指针）。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:17:29.063

所需的所有代码，我测试了 4.5.1 flex 框架，工作完美。采用：

```
protected function setBusyCursor() : void 
{       
    FlexGlobals.topLevelApplication.mouseChildren = false;
    CursorManager.removeAllCursors();
    CursorManager.setBusyCursor();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:30:11.283

最后我设法做到这一点：

```
protected function setBusyCursor() : void 
    {   
        var i : int = 0;
        var uiComponent : UIComponent = FlexGlobals.topLevelApplication.parent.getChildAt(i);
        while (uiComponent != null){
            uiComponent.mouseChildren = false;
            uiComponent.cursorManager.setBusyCursor();
            i+=1;
            if ( FlexGlobals.topLevelApplication.parent.getChildAt(i) is UIComponent) {
                uiComponent = FlexGlobals.topLevelApplication.parent.getChildAt(i);
            }
            else {
                uiComponent = null;
            }
        }
    }

    protected function removeBusyCursor() : void {
        var i : int = 0;
        var uiComponent : UIComponent = FlexGlobals.topLevelApplication.parent.getChildAt(i);           
        while (uiComponent != null){
            uiComponent.cursorManager.removeBusyCursor();
            uiComponent.mouseChildren = true;
            i+=1;
            if ( FlexGlobals.topLevelApplication.parent.getChildAt(i) is UIComponent) {
                uiComponent = FlexGlobals.topLevelApplication.parent.getChildAt(i);
            }
            else {
                uiComponent = null;
            }
        }

    } 
```

它禁用屏幕上的所有鼠标点击并放置忙碌光标。

# cocos2d-iphone - Cocos2d CCSpeed in action 崩溃

> ID：15250995
> 
> 赞同：0
> 
> 时间：2013-03-06T15:12:18.823
> 
> 标签：cocos2d-iphone, ccspeed

我在 cocos2d iPhone 游戏中使用了 CCSpeed 动作。但是总是崩溃。

```
CCAnimation* animation = nil;
animation = [[CCAnimationCache sharedAnimationCache]  animationByName:ATTACK_ANIM];

if(animation)
{
    CCAnimate *animAction  = [CCAnimate actionWithAnimation:animation];

    id speed = [CCSpeed actionWithAction:animAction speed:0.13f];
    id calBlock = [CCCallBlock actionWithBlock:^{
                                                    //[self updateState:kTileState_Idle];
                                                }];
    CCSequence *sequence = [CCSequence actions:speed, calBlock, nil];        
    [self runAction:sequence];
} 
```

但下面的代码工作正常..但无法改变动画速度。上面的代码有什么问题？

```
 CCAnimation* animation = nil;
    animation = [[CCAnimationCache sharedAnimationCache]  animationByName:quakeAnim];

    if(animation)
    {
        CCAnimate *animAction  = [CCAnimate actionWithAnimation:animation];
        id calBlock = [CCCallBlock actionWithBlock:^{
                                                        //[self updateState:kTileState_Idle];
                                                    }];
        CCSequence *sequence = [CCSequence actions:animAction, calBlock, nil];        
        [self runAction:sequence];
    } 
```

这是另一个[线程](https://stackoverflow.com/questions/14251161/cocos2d-dynamically-changing-animation-speed-with-ccspeed)。但没有提供代码解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:36:04.383

您不能将 animation.delayPerUnit 设置为某个合适的值来改变其执行速度吗？我通常在每次使用它之前计算该数字......因此我不需要在将动画放入缓存之前保留我设置的初始“delayPerUnit”。

```
float totalAnimationTime = kSomeDesiredValue; // game logic dictates this, as well as
                                              // rendering requirements (too slow will be perceived)
animation.delayPerUnit = totalAnimationTime/animation.totalDelayUnits;

// totalDelayUnits is a property of the animation, usually equal to the number
// of frames. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:28:34.990

你这样做是错的。;)

CCSpeed 不能按顺序使用。您仍然需要将 animAction 添加到序列中，但保留对 CCSpeed 动作 (ivar) 的引用。然后，每当您想更改动画速度时，请更改 CCSpeed 实例的 speed 属性。

使用 CCSped 需要您适当地管理序列的内存和 CCSpeed。

# excel - 来自存储在单元格中的 CSV 列表的单元格验证

> ID：15250998
> 
> 赞同：2
> 
> 时间：2013-03-06T15:12:24.477
> 
> 标签：excel, list, validation, conditional

我一直在 Stack Overflow 上进行搜索，并且通常在 Google 上四处搜索，但我不断获得有关使用多单元格范围作为我的验证源的教程（[比如这个](https://stackoverflow.com/questions/919908/dynamically-changing-dropdown-in-excel)）。

我有一张可能的材料和相关质量的表格：密度、保护价值、每单位重量的成本、可用性等。关键的是，其中一列是“有效的构造方法”，这个单元格包含一个逗号分隔的字符串列表. 用户使用带有验证下拉菜单的单元格选择其中一种材料（这部分工作正常）。

我需要第二个下拉菜单，它将显示可用于从第一个下拉菜单中选择的材料的有效构造方法。我可以通过使用我的构造方法表中的名称列作为验证限制来显示所有构造方法，但我只想要有效的方法。

因此，例如，如果用户选择“铁，手工锻造”，他们不应该选择“绗缝”或“倾斜分层”——这些选项仅对柔性织物类材料有效。反过来，如果他们选择“亚麻”，他们应该没有能力选择“铰接板”——这对亚麻和其他织物来说是一个无意义的价值。

我可以在验证框中手动键入逗号分隔列表，并且下拉列表正确生成，但我无法将验证框提供给包含逗号分隔列表的单个单元格的 VLOOKUP (=VLOOKUP (Material, MaterialTbl,7,False))，它抱怨源必须是分隔列表或对单个行或列的引用。

我还尝试将 VLOOKUP 放在一个单元格中，然后将验证框指向该单元格（=$H$16），但我得到的只是一个包含整个列表、逗号和所有内容的选项。例如，我的列表包含一个选项：“邮件、分段板、刻度、板”，而不是四个选项：“邮件”、“分段板”、“刻度”、“板”。

有没有办法做到这一点？

有没有办法在不使用 VBA 的情况下做到这一点？（如有必要，我将求助于 VBA，但我希望有一个没有宏的电子表格，因为它更容易分发）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:51:43.823

我仍然认为通过创建一个表和一个定义的动态范围来关闭这个表是最好的。

如有必要，您可以将其放在隐藏的工作表中。

我会在工作表中定义两个命名范围。`TableRange`将引用整个表格，并且`ListRange`将是一个单独的 1 列范围，该范围是基于下拉菜单中的选择而动态变化的。

使用一些公式（可能会变得复杂）和动态范围，很容易使您的下拉列表彼此“相关”。

[https://docs.google.com/file/d/0B1v0s8ldwHRYMUpQRmluVzRkcnM/edit?usp=sharing](https://docs.google.com/file/d/0B1v0s8ldwHRYMUpQRmluVzRkcnM/edit?usp=sharing)

Sheet1 解释了我如何设置命名范围

Sheet2 有示例下拉菜单，顶层链接到`$A$1:$C$1`Sheet1 上的单元格，第二个下拉菜单链接到动态`ListRange`.