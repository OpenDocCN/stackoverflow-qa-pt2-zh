# StackOverflow 问答 13404000-13404999

# google-apps-script - Google Apps 脚本 UrlFetchApp.fetch 返回缓存副本

> ID：13404003
> 
> 赞同：4
> 
> 时间：2012-11-15T18:39:54.000
> 
> 标签：google-apps-script

我在谷歌应用程序脚本中使用 UrlFetchApp 来执行获取，如下所示：

```
var optAdvancedArgs = {
    "method": "GET",
    "headers": {"Cache-Control": "no-cache", "Pragma": "no-cache"}, 
};
var response = UrlFetchApp.fetch(url, optAdvancedArgs); 
```

尽管我尝试禁用标头中的缓存，但我得到的响应始终是缓存副本。如果我在控制台中使用相同的 url 执行 wget，我会看到收到最新版本。

我的问题是：执行 UrlFetchApp.fetch 时如何才能*真正禁用缓存？*我的代码有问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T02:36:55.130

我能够通过在我的 Cache-Control 标头中使用“max-age=0”来克服这个问题，例如：

```
var url = "http://www.stackoverflow.com";
var options =
  {
    // Ensure we get a fresh copy of the site every time.
    headers : {'Cache-Control' : 'max-age=0'}
  };
var response = UrlFetchApp.fetch(url, options) 
```

听起来 Google App Engine 也有[类似的问题](https://stackoverflow.com/questions/11981688/does-url-fetch-use-gaes-proxy-cache)。有人[打开了一个问题](https://code.google.com/p/googleappengine/issues/detail?id=739)，但它似乎已关闭。

# git - 在 svn 结帐中使用 git？（没有 git-svn）

> ID：13404005
> 
> 赞同：4
> 
> 时间：2012-11-15T18:39:56.663
> 
> 标签：git, svn, git-svn

我进行了多次搜索，但找不到这个问题的答案。抱歉，如果它是重复的。

我想知道`git`在现有`svn`结帐中初始化存储库（供本地使用）是否有任何问题，但**不**使用`git-svn`.

这是我的场景：

*   我的团队使用`svn`但不熟悉`git`.
*   我还在学习`git`；我对它的熟悉程度不如我对它的熟悉程度`svn`。
*   我想利用强大的**本地**特性`git`（如分支、存储等）。
*   我现在不想学习`git-svn`（尽管我计划在未来学习）。
*   我将`svn`专门使用客户端与存储库进行交互。（所以我从侧面清楚地了解我在做什么，`svn`并且没有得到任何奇怪的交互）。

我在想我会一直`svn update`从`commit`主`git`分支做。当我处理功能时，我会与 master 合并。

有没有人试过这个？是否有任何令人讨厌的缺点或副作用？尖端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T22:22:35.607

TL;DR: Yes you can, but it's harder work than just learning `git-svn`.

I've tried it. The main problem you have is converting `svn up` operations to Git commits. There are two approaches I've seen:

1.  Add your `.svn` folder to `.gitignore`, so you never have Git tracking your Subversion metadata. This means you have Subversion and Git separately tracking your working copy, so any operation on one requires a similar operation on the other.

    Unless you put a lot of thought into how you're going to use the repository, are very comfortable using Subversion merges, branches and switches, and make sure to use those carefully to match up what you're doing with the repository with Git, you'll lose most of the advantages of Git's branching model.

2.  Track your `.svn` folder with Git. This means that if, for example, you did an `svn up` and a `git commit`, then checked out an old Git commit, the Subversion metadata would match up correctly.

    This means you can more easily use Git's branching features, but there's a host of other problems with having Git track Subversion metadata. The primary one (at least for Subversion 1.6, I don't know about 1.7) is that empty folders in a `.svn` directory are significant, but Git doesn't track empty folders, so they'll be deleted without warning.

I used method 1 for a little while, but found it gave me all the worst bits of both Git and Subversion, with very little advantage, and meant everything operation needed to be done twice to get anything done.

A colleague of mine used method 2 for some time with more luck, but he wrote a whole bunch of helper scripts to enable him to do so. In particular, his scripts would spin through the working copy and fix up any `.svn` directories that needed empty folders adding. It was a lot of work to set up, but meant he could at least use most of the features of Git. Sadly, I don't have access to the scripts in question.

Having used `git-svn` for some time, I can vouch for it being easier than either of these options, even as a Git beginner. I'd recommend keeping a Subversion working copy around for the occasions when you need to do something *now* and don't have time to check the best way to do it with Git, or for the occasions where `git-svn` is too limited to do what you need it to do. The learning curve for `git-svn` is, I'd say, not much more difficult than that for regular Git, particularly as you don't need to learn anything about working with a remote Git repository.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:44:25.027

# c - 帮助编译器优化函数指针

> ID：13404007
> 
> 赞同：19
> 
> 时间：2012-11-15T18:40:04.687
> 
> 标签：c, optimization, gcc, linux-kernel, function-pointers

在 C 中实现类似 OO 的代码封装和多态性的一种常见方法是将不透明指针返回到包含一些函数指针的结构。这是一种非常常见的模式，例如在 Linux 内核中。

使用函数指针而不是函数调用会引入开销，由于缓存，该开销几乎可以忽略不计，正如其他问题中已经讨论的那样。

然而，随着 GCC (>4.6) 的新 -fwhole-program 和 -flto 优化选项，情况发生了变化。

## libPointers.c

```
#include <stdlib.h>
#include "libPointers.h"

void do_work(struct worker *wrk, const int i) 
{
        wrk->datum += i;
}

struct worker *libPointers_init(const int startDatum)
{
        struct worker *wrk = malloc (sizeof (struct worker));

        *wrk = (struct worker) {
                .do_work = do_work,
                .datum = startDatum
        };

        return wrk;
} 
```

## libPointers.h

```
#ifndef __LIBPOINTERS_H__
#define __LIBPOINTERS_H__

struct worker {
        int datum;

        void (*do_work)(struct worker *, int i);
};

extern void do_work (struct worker *elab, const int i);

struct worker *libPointers_init(const int startDatum);

#endif //__LIBPOINTERS_H__ 
```

## 测试指针.c

```
#include <stdio.h>
#include "libPointers.h"

int main (void)
{
        unsigned long i;
        struct worker *wrk;

        wrk = libPointers_init(56);

        for (i = 0; i < 1e10; i++) {
#ifdef USE_POINTERS
                wrk->do_work(wrk,i);
#else
                do_work(wrk,i);
#endif
        }

        printf ("%d\n", wrk->datum);
} 
```

使用 -O3 编译，但没有 -flto -fwhole-program 标志，testPointers 在我的机器上执行大约需要 25 秒，无论 USE_POINTERS 是否为#defined。

如果我打开**-flto -fwhole-program**标志，testPointers 使用 USE_POINTERS #defined 大约需要 25 秒，但如果使用函数调用，大约需要 14 秒。

这是完全预期的行为，因为我知道编译器将内联并优化循环中的函数。但是，我想知道是否有一种方法可以帮助编译器告诉它函数指针是常量，从而允许它也优化这种情况。

对于那些使用 cmake 的人，这是我编译它的方式

## CMakeLists.txt

```
set (CMAKE_C_FLAGS "-O3 -fwhole-program -flto")
#set (CMAKE_C_FLAGS "-O3")
add_executable(testPointers
        libPointers.c
        testPointers.c
        ) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T19:02:36.180

编译器不能内联函数，除非它可以确定只调用该函数的一个可能版本。通过指针调用，情况并非显而易见。编译器仍然有可能弄清楚它，因为如果您遵循代码，则指针只能采用一个可能的值；但是，这将超出我对编译器的期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T01:38:16.217

如果在循环中调用函数指针，则可以将循环移动到函数指针内。

# joomla - 将自定义代码添加到 joomla

> ID：13404011
> 
> 赞同：0
> 
> 时间：2012-11-15T18:40:16.977
> 
> 标签：joomla

我担心我这样做的方式不适合生产服务器。我不知道为什么会这样，但我怀疑有一种更“妈妈认可”的方式，这就是我正在寻找的。

在我的测试服务器上，我有一个 joomla 2.5 设置。我一直在通过破解它的废话来学习。我创建了一个文件夹 [/custom]，其中包含一些实际有用的代码（基本上是一个可以从某些模块调用的小型库），我的老板希望将这些代码放在生产服务器上。所以：有没有一种适当的方法可以将自定义代码添加到 Joomla？（joomla 范围之外的代码，某些网站独有的代码）我不需要将其设为插件（我认为），因为其中一些实际上是 10 行代码。

我敢打赌，有一个最佳实践或其他东西，但文档很好地隐藏了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:13:19.137

听起来您正在制作一个自定义的 Joomla 库。您可以将它打包成一个 zip 作为库并安装到 Joomla 中。您需要添加到 zip 中的只是一个 xml 文件，该文件告诉 Joomla 如何处理该库。一个很好的资源在这里：[http ://www.ostraining.com/howtojoomla/how-tos/development/how-to-package-joomla-libraries](http://www.ostraining.com/howtojoomla/how-tos/development/how-to-package-joomla-libraries)

安装后，您可以从您添加的任何模块或组件中提取此库。假设您有一个名为“jomadditions”的库，该文件夹中有一个名为“sample”的文件，您可以将此代码添加到 Joomla 并通过执行以下操作来使用它：

```
jimport('jomadditions.sample');
function_in_sample();
// interact with sample's code just as if you had used require() on the file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:35:53.817

听起来您需要构建一个 Joomla 组件或模块。看看 Joomla Compoenent Creator：[http](http://www.notwebdesign.com/joomla-component-creator/) ://www.notwebdesign.com/joomla-component-creator/让您开始或在这里学习：[http ://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5 /介绍](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction)

# ruby-on-rails - ActiveRecord SystemStackError：堆栈级别太深

> ID：13404016
> 
> 赞同：1
> 
> 时间：2012-11-15T18:40:40.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3

使用 ruby​​ ruby​​ 1.9.3p194、rails 3.2.8、postgresql 9.2

控制器死于此查询

```
@jobs = Job.select([:user_id, :job_actual_wall_time, :job_processor_count, :job_requested_memory, :job_started_at, :job_ended_at]).joins(:account).where("(job_started_at between :start_date and :end_date) or 
   (job_ended_at between :start_date and :end_date  ) or 
   (job_started_at < :start_date and job_ended_at > :end_date)", 
   {start_date: @start_date, end_date: @end_date}).where(:account_id => account_id).order(:user_id).order(:job_started_at) 
```

其中@start_date 是 2012 年 7 月 1 日，@end_date 是 2012 年 7 月 4 日，account_id = 8

我可以在控制台上手动设置变量，查询执行时不会出错（该时间间隔内大约有 95,000 个作业）。如果我将结束日期提前一天，则大约有 50,000 个此类作业，并且在 rails 中执行查询。这似乎是请求的记录数。

不知道在哪里调试这个。SO上似乎没有这样的问题；但如果有，请指点我。

# jquery - 在幻灯片 + 灯箱中智能加载图像

> ID：13404024
> 
> 赞同：0
> 
> 时间：2012-11-15T18:41:12.903
> 
> 标签：jquery, lightbox, cycle, prettyphoto, photoswipe

我正在寻找一个响应式幻灯片插件，它允许我进行渐进式图像加载，我找到[了 cycle2](http://jquery.malsup.com/cycle2/demo/progressive.php)。这似乎使用像 innerHTML 这样的东西在幻灯片中添加图像，这是因为要么`prettyPhoto`或`PhotoSwipe`不使用添加的图像。这是一个类似的问题：[使用 document.write 编写 href 时，prettyphoto 不会加载](https://stackoverflow.com/questions/9010089/prettyphoto-wont-load-when-writing-href-using-document-write)

有人知道类似插件或如何将新图像添加到灯箱索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:18:32.757

在没有解决方案的大量测试之后，我寻找了另一个插件，并且我已经移动了[相机幻灯片](http://www.pixedelic.com/plugins/camera/)，它可以按需加载幻灯片图像而没有附加它。

终于问题解决了：）

# php - php preg_split 似乎在大字符串上崩溃

> ID：13404025
> 
> 赞同：0
> 
> 时间：2012-11-15T18:41:22.263
> 
> 标签：php, large-files, preg-split

我一直在尝试将 USDA 营养数据从[ascii 版本的数据](http://www.ars.usda.gov/Services/docs.htm?docid=22771)加载到 mysql 数据库中。我使用了[这里](http://drupal.org/node/107806)的脚本，除了大小约为 34MB 的 NUT_DATA.txt 文件外，其他所有内容都进来了。使用该函数使用 php 脚本正确加载文件（因此内存限制不应该成为问题，无论如何它们都设置为 128M）`file_get_contents`。但是，当它到达该`preg_split('#\n#', $file)`行时，脚本将结束而没有进一步的注释。如果我将文件分成更小的部分，它运行良好。为什么它不适用于完整文件？我将 memory_limit 设置为 128M，upload_max_filesize 设置为 128M。整个文件似乎已被读入，只是`preg_split`似乎有问题。

我有什么明显的遗漏吗？

谢谢！

这是我一直在测试的php代码：

```
<?php
// from http://drupal.org/node/107806

//$dbh=mysql_connect(/*db info*/);
//mysql_select_db(/*db info*/);
try
{
  $dbh = new PDO('mysql:host=127.0.0.1;dbname=XXXXXXX', 'XXXXXXX', 'XXXXXXX');
  echo "PDO access worked! <br />";
} catch (PDOException $e)
{
  echo "PDO error: " . $e->getMessage() . "<br />";
  die();
}

//List of SR20 filenames with associated field counts.
$filenames = array(//"DERIV_CD" => 2,
//        "FD_GROUP" => 2,
//        "NUTR_DEF" => 6,
//        "SRC_CD" => 2,
//        "WEIGHT" => 7,
//        "FOOTNOTE" => 5,
//        "DATA_SRC" => 9,
//        "DATSRCLN" => 3,
//        "FOOD_DES" => 14,
        "NUT_DATA" => 17
//        "NUT_DATA2" => 17,
//        "NUT_DATA_test" => 17
     );
foreach($filenames as $filename => $count) {
    echo "inside foreach: $filename ";
    $file = file_get_contents($filename.'.txt');
    echo " read in the file, length = " . strlen($file) . "<br />";
    $lines = preg_split('#\n#', $file);
    echo "made it past preg_split <br />";
//    print_r($lines);
    echo " lines = " . count($lines). "<br />";
    for($i=0;$i<count($lines);++$i) {
        $line = $lines[$i];
//        echo "Inside for loop, line = '" . $line . "'<br />";
        //Some text fields are split over several lines. Concatenate them.
        while(substr_count($line, '^') < $count-1 || (substr_count($line, '~')%2) == 1) {
            ++$i;
            if($i>=count($lines)) { break; }
            $line .= '<br />'.$lines[$i];
        }
        $fields = trim($line);
        if(strlen($fields) == 0) continue;
        $fields = str_replace(array("'", '~', '^'), array("''", "'", ','), $fields);
        $sql = "INSERT INTO `$filename` VALUES($fields);";
        //Insert zeroes for unfilled values.
        $sql = str_replace(array(',,', ',)'), array(',0,', ',0)'), $sql);
        $sql = str_replace(array(',,', ',)'), array(',0,', ',0)'), $sql);
        $sql = str_replace(array(',,', ',)'), array(',0,', ',0)'), $sql);
        //Some single-char fields aren't quoted.
        $sql = preg_replace('#,([A-Z])\);$#', ",'$1');", $sql);
// comment out the database interface until things are working
/*        $stmt = $dbh->prepare($sql);
        if(!$stmt->execute()) 
        {
            echo $sql;
        }
*/
    }
}
echo "done";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:01:56.140

我在 php 的顶部添加了以下两行：

```
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT); 
```

它告诉我它内存不足。再次增加内存（到 256M）解决了这个问题。我想我无法猜测任务将使用多少内存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-29T17:08:02.600

将此配置添加到您的 httpd.conf

```
ThreadStackSize 8388608 
```

# java - 制作一个接受整数数组的构造函数

> ID：13404029
> 
> 赞同：3
> 
> 时间：2012-11-15T18:41:40.000
> 
> 标签：java, arrays, constructor

如何将整数数组传递给我的构造函数？

这是我的代码：

```
import java.io.*;
import java.util.*;

public class Temperature implements Serializable
{
    private int[] temps = new int [7];
    public Temperature(int[] a)
    {
        for(int i=0; i < 7; i++)
        {
            temps[i] = a[i];
        }

    }
    public static void main(String[] args)
    {
        Temperature i = new Temperature(1,2,3,4,5,6,7);
    }
} 
```

* * *

给出的错误是：

```
Temperature.java:17: error: constructor Temperature in class Temperature cannot be applied to given types;
        Temperature i = new Temperature(1,2,3,4,5,6,7);
                        ^
  required: int[]
  found: int,int,int,int,int,int,int
  reason: actual and formal argument lists differ in length
1 error 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T18:42:24.383

*   对于当前调用，您需要一个`var-args constructor` 代替。所以，你可以改变你的`constructor`声明来接受一个 `var-arg`论点： -

    ```
    public Temperature(int... a) {
         /**** Rest of the code remains the same ****/
    } 
    ```

*   或者，如果你想`an array`用作参数，那么你需要`pass an array`像这样的构造函数 -

    ```
    Temperature i = new Temperature(new int[] {1,2,3,4,5,6,7}); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:44:29.537

应该这样做： new Temperature(new int[] {1,2,3,4,5,6,7})

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:44:44.267

您可以通过以下方式进行

```
import java.io.*;
import java.util.*;

public class Temperature implements Serializable
{
    private int[] temps = new int [7];
    public Temperature(int[] a)
    {
        for(int i=0; i < 7; i++)
        {
            temps[i] = a[i];
        }

    }
    public static void main(String[] args)
    {
        int [] vals = new int[]{1,2,3,4,5,6,7};  
        Temperature i = new Temperature(vals);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:42:50.260

```
 public static void main(String[] args)
    {
    Temperature i = new Temperature(new int[] {1,2,3,4,5,6,7});
    } 
```

# c# - 发布网站时出现 Microsoft.Office.Interop.Word 错误

> ID：13404032
> 
> 赞同：0
> 
> 时间：2012-11-15T18:41:42.850
> 
> 标签：c#, asp.net, ms-word

我在一个简单的 asp.net c# 应用程序中用来自 SQL Server 的数据替换 MS Word MergeFields，它在本地运行良好，但是当我发布它时，我得到以下信息：

```
System.Runtime.InteropServices.COMException (0x80080005): Retrieving the COM class factory for component with CLSID {00020906-0000-0000-C000-000000000046} failed due to the following error: 80080005. 
```

我尝试同时授予`IIS_IUSRS`和`NETWORK SERVICE`完全访问权限，并在 DCOM 配置中将身份设置为交互式，但它没有解决任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:38:44.510

您应该与`NETWORK SERVICE`用户共享保存从模板创建的文档的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:10:16.990

不推荐Office的服务器端自动化！

在此处阅读有关 MS Office 中服务器端自动化的更多信息：Office[服务器端自动化的注意事项](http://support.microsoft.com/kb/257757)

# performance - 通过winrar存档文件，但运行时加载缓慢

> ID：13404034
> 
> 赞同：0
> 
> 时间：2012-11-15T18:41:50.197
> 
> 标签：performance, archive, winrar

我有 3.5gb 文件，我使用 winrar 存档 sfx 完成后显示我存档的 exe 大小为 1.5gb，当我运行它时，它需要大约 10-20 秒才能加载，有没有办法让它立即运行尝试打开它？. 我想存档文件的原因，以便它们可以提取到硬盘驱动器上的某个位置，所以如果有另一种方法可以在不使用 winrar 的情况下执行此操作，只要我打开存档或可提取文件时它就会立即打开而不是等待加载 20 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:55:01.530

这很可能是由于 WinRAR 必须扫描 SFX 并在加载时读取存档。我猜你拥有的文件越多，最终存档的文件越大，加载所需的时间就越长。另一个因素可能是您的硬盘驱动器速度较慢，因此扫描时间较长。如果您真的想追踪问题并将其报告给作者，您可以使用[Process Monitor](http://www.sysinternals.com/)来查看 SFX 正在做什么，这需要很长时间。但我认为您可以做的最简单的事情是尝试使用不同的压缩程序来创建 SFX。

# google-maps-api-3 - Google 地球与 Google 地图和地点 API 的集成

> ID：13404037
> 
> 赞同：0
> 
> 时间：2012-11-15T18:42:10.647
> 
> 标签：google-maps-api-3, google-places-api, google-earth-plugin, google-places

我正在使用新的 Google 地球集成代码[http://code.google.com/p/smap-suite/source/browse/fieldAnalysis2/trunk/WebContent/js/libs/google_earth_integration.js?r=1442](http://code.google.com/p/smap-suite/source/browse/fieldAnalysis2/trunk/WebContent/js/libs/google_earth_integration.js?r=1442)和带有地图 V3 的 Google Places Api。将当前结果输出到表格后，用户可以单击表格，相应的标记和信息窗口将打开。目前这在 Maps V3 中运行良好，但无法让信息窗口的锚点定位在正确的位置。

```
function addResult(result, i) {
var results = document.getElementById("results");
var tr = document.createElement('tr');
tr.style.backgroundColor = (i% 2 == 0 ? '#F0F0F0' : '#FFFFFF');
tr.onclick = function() {
  google.maps.event.trigger(markers[i], 'click'); //end add marker listener

        }  

google.maps.event.addListener(this.map_,
                            GoogleEarth.INFO_WINDOW_OPENED_EVENT_,
                            function(infowindow) {
//If Earth is open, create balloon
if (!that.earthVisible_) {
  return;
}
    var balloon = that.instance_.createHtmlStringBalloon('');
    //TODO assuming anchor == marker == lastclicked

    var placemark = that.lastClickedPlacemark_;
    balloon.setFeature(placemark);
    balloon.setContentString(infowindow.getContent());
    that.instance_.setBalloon(balloon);
 });

 // On click of a placemark we want to trigger the map click event.
google.earth.addEventListener(ge.getGlobe(), 'click', function(event) {
var target = event.getTarget();
var overlay = that.placemarks_[target.getId()];
if (overlay) {
  event.preventDefault();
  // Close any currently opened map info windows.
  var infoWindows = that.getOverlaysForType_('InfoWindow');
  for (var i = 0, infoWindow; infoWindow = infoWindows[i]; i++) {
    infoWindow.close();
  }
  that.lastClickedPlacemark_ = target;
  google.maps.event.trigger(overlay, 'click');
}
}); 
```

我需要创建一个函数来定位在表格中点击的结果的纬度和经度，并为谷歌地球设置窗口的锚点，同时还可以处理在地图上点击的地标和在搜索栏中输入的地址。

请参阅此处的示例：http: [//go3dexpansion.com/attempt101.html](http://go3dexpansion.com/attempt101.html)

**编辑**

好的，所以我正在尝试这样做，以便当您单击结果表时，它将打开正确的气球并将其连接到正确的地标。你在帮助我更多地了解我真正在做什么方面提供了巨大的帮助。请看一下这段代码，让我知道我能做什么。jsfiddle 上还有另一部分代码控制气球出现的时间和位置，并且基于 lastClickPlacemark_ 变量。

```
///My Attempt at the code
var getPosition = function(marker) {
var lat = marker.position.$a;
var lng = marker.position.ab;
var myLatlng = new google.maps.LatLng(lat, lng);

    TODO assuming anchor == marker == lastclicked
var marker = new google.maps.Marker({
  position: myLatlng,
  map: map
});
var balloon = googleEarth.instance_.createHtmlStringBalloon('');
    var placemark = marker;
    balloon.setFeature(placemark);
    balloon.setContentString(infowindow.getContent());
    googleEarth.instance_.setBalloon(balloon);

   // alert(lat + ',' + lng); // do something with it...
 }

 // The code that currently controls the window open and is based on the lastClickPlacemark_ variable

 GoogleEarth.prototype.addEarthEvents_ = function() {
 var ge = this.instance_;
 ge.getWindow().setVisibility(true);

 // add a navigation control
 var navControl = ge.getNavigationControl();
 navControl.setVisibility(ge.VISIBILITY_AUTO);

 var screen = navControl.getScreenXY(); 
 screen.setYUnits(ge.UNITS_INSET_PIXELS);
 screen.setXUnits(ge.UNITS_PIXELS);

 // add some layers
 var layerRoot = ge.getLayerRoot();
 layerRoot.enableLayerById(ge.LAYER_BORDERS, true);
 layerRoot.enableLayerById(ge.LAYER_ROADS, true);

 var that = this;
 google.maps.event.addListener(this.map_,
                            GoogleEarth.INFO_WINDOW_OPENED_EVENT_,
                            function(infowindow) {
//If Earth is open, create balloon
if (!that.earthVisible_) {
  return;
}
    var balloon = that.instance_.createHtmlStringBalloon('');
    //TODO assuming anchor == marker == lastclicked

    var placemark = that.lastClickedPlacemark_;
    balloon.setFeature(placemark);
    balloon.setContentString(infowindow.getContent());
    that.instance_.setBalloon(balloon);
});

// On click of a placemark we want to trigger the map click event.
google.earth.addEventListener(ge.getGlobe(), 'click', function(event) {
var target = event.getTarget();
var overlay = that.placemarks_[target.getId()];
if (overlay) {
  event.preventDefault();
  // Close any currently opened map info windows.
  var infoWindows = that.getOverlaysForType_('InfoWindow');
  for (var i = 0, infoWindow; infoWindow = infoWindows[i]; i++) {
    infoWindow.close();
  }
  that.lastClickedPlacemark_ = target;
  google.maps.event.trigger(overlay, 'click');
}
 });

};

//SOMETHING LIKE THIS?????

var getPosition = function(marker) {
            ge = googleEarth.instance_; 

var lat = marker.position.$a;
var lng = marker.position.ab;
 // var myLatlng = new google.maps.LatLng(lat, lng);
 var placemark = ge.getElementById(marker);   
    var balloon = ge.createHtmlStringBalloon(''); 
      balloon.setFeature(placemark); 
      ge.setBalloon(balloon); 

   // alert(lat + ',' + lng); // do something with it...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:58:28.390

一个函数...

> “这将找到在表格中单击的结果的纬度和经度”

可能是这样的......

```
var getPosition = function(marker) {
    var lat = marker.position.$a;
    var lng = marker.position.ab;
    alert(lat + ',' + lng); // do something with it...
} 
```

您可以在此处调用它，以便获得与表中项目对应的特征的位置...

```
tr.onclick = function() {
  google.maps.event.trigger(markers[i], 'click'); //end add marker listener
  getPosition(markers[i]); // get the position
} 
```

第二部分不是很清楚...

> 同时还为点击地图上的地标工作......

如果我理解您，那么您可以修改您的标记事件侦听器以在地图上单击标记时调用相同的函数。

```
google.maps.event.addListener(markers[i], 'click', function() {
  getDetails(results[i], i);
  getPosition(markers[i]); // get the position
}); 
```

最后...

> 和在搜索栏中输入的地址。

没有任何意义 - 除非您对地址进行地理编码，否则地址没有位置 - 而且我在您的页面中看不到任何搜索栏！

**编辑**

> “我只需要弄清楚如何应用这些单独的 lat 和 lng 值并将它们设置为地标”

同样，我不是 100% 确定我理解，但如果你想用你的数据实际创建一个新的标记，你可以轻松地修改函数......

```
var createMarker = function(marker) {
    var lat = marker.position.$a;
    var lng = marker.position.ab;
    var myLatlng = new google.maps.LatLng(lat, lng);
    var marker = new google.maps.Marker({
      position: myLatlng,
      map: map
    });
} 
```

# javascript - Adobe Edge 动画故障

> ID：13404040
> 
> 赞同：0
> 
> 时间：2012-11-15T18:42:14.710
> 
> 标签：javascript, adobe-edge

当每个人触发相同的动画时，有没有一种方法可以从悬停状态变为悬停状态而不会出现故障？

查看我的[网站](http://hithouse.businesscatalyst.com/index.html)并将鼠标悬停在导航中的“新闻”上，它会产生动画效果，但如果您在动画制作时将鼠标悬停在“关于我们”上，则会出现故障。

最终我希望它像[这个页面](http://thehithouse.com/)一样运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T14:02:21.580

抱歉，我猜您的网站正在维护中。尝试将它们转换为可能有帮助的符号...

如果您将动画文件发送给我，我可以为您提供网站帮助。

问候， Krunal Puri

# android - 在 doInBackground() 完成之前，ProgressDialog 不会显示

> ID：13404041
> 
> 赞同：0
> 
> 时间：2012-11-15T18:42:22.630
> 
> 标签：android, android-asynctask, progressdialog

我似乎无法弄清楚这一点。我是 android 新手，我试图在从我的网站查询数据库时显示一个对话框。除了在 doInBackground() 完成之前 ProgressDialog 不显示这一事实之外，代码正常运行，这不应该是这种情况。

这是代码

```
private class MyAsyncTask extends AsyncTask<Void, Void, Void> {

    private ProgressDialog mProgressDialog;
    private Context context;
    private String taskResult;

    public MyAsyncTask(Activity activity) {
        context = activity;
        mProgressDialog = new ProgressDialog(context);
    }

    @Override
    protected void onPreExecute() {
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mProgressDialog.setMessage("Performing Query...");
        mProgressDialog.show();
        Log.d("log_tag", "Showed dialog");
    }

    @Override
    protected void onPostExecute(Void result) {
        if (!error) {
            Log.d("log_tag", "No ERROR - " + error);
            JSONArray jArray;
            List<Map<String, String>> lValues = new ArrayList<Map<String, String>>();
            try{
                jArray = new JSONArray(taskResult);
                JSONObject json_data=null;
                //Log.d("log_tag", "for loop to read data");
                for(int i=0;i<jArray.length();i++){
                    json_data = jArray.getJSONObject(i);
                    Map<String, String> datum = new HashMap<String, String>(2);
                    datum.put("artist", json_data.getString("artist"));
                    datum.put("title", json_data.getString("title"));
                    lValues.add(datum);
                }
            } catch(JSONException e1){
                Message("No Results Found");
            } catch (ParseException e1) {
                e1.printStackTrace();
            }
            lstResults.setAdapter(new SimpleAdapter(context, lValues, 
                        android.R.layout.simple_expandable_list_item_2,
                        new String[] {"artist", "title"}, 
                        new int[] {android.R.id.text1, android.R.id.text2}));
        } else {
            Message("ERROR: " + errString);
            error = false;
            errString = "";
        }

        if (mProgressDialog.isShowing()) {
            mProgressDialog.dismiss();
            Log.d("log_tag", "Closed dialog");
        }

    }

    @Override
    protected Void doInBackground(Void... params) {
        StringBuilder sb;
        InputStream is = null;
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("c_name", generateSearchCriteria()));
        Log.d("log_tag", nameValuePairs.get(0).toString());
        try{
            Log.d("log_tag", "Create Object");
             HttpClient httpclient = new DefaultHttpClient();
             HttpPost httppost = new HttpPost(RHINOGOLD_URL);
             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
             HttpResponse response = httpclient.execute(httppost);
             HttpEntity entity = response.getEntity();
             is = entity.getContent();
        }catch(Exception e){
            errString = "Connection Error";
            error = true;
            Log.e("log_tag", "Error in http connection - " + error + " - " + e.toString());
        }

        //convert response to string
        if (!error) {
            Log.d("log_tag", "BufferedReader - " + error);
            try{
                  BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                   sb = new StringBuilder();
                   Log.d("log_tag", "append");
                   sb.append(reader.readLine() + "\n");

                   String line="0";
                   while ((line = reader.readLine()) != null) {
                                  sb.append(line + "\n");
                   }
                   Log.d("log_tag", "close input stream");
                   is.close();
                   if (sb.toString() == null) {
                       taskResult = "No values returned";
                   } else {
                       taskResult=sb.toString();
                   }
            } catch(Exception e) {
                errString = "The application encountered an error";
                error = true;
                Log.e("log_tag", "Error converting result - " + error + " - " + e.toString());
            }
        }
        return null;
    }
} 
```

我敢肯定这里有很多编程没有，但正如我所说，我是新手，所以我仍在弄清楚所有这些是如何工作的。无论如何，如您所见，我在这里有一些日志，我观察 LogCat 输出以查看对话框何时弹出，这就是我得到的。

```
Showed dialog
c_name=artist LIKE 'journey' OR title LIKE 'journey'
Create Object
... (long pause)
BufferedReader - false
append
close input stream
No ERROR - false
Closed dialog 
```

直到...（长时间停顿）之后我才看到对话框，它只显示一瞬间。暂停后的行发生得如此之快，我不确定对话框开始显示的确切位置，但据我所知，它应该在长时间暂停之前显示，特别是因为我看到日志“显示对话框”

有人可以帮我弄清楚为什么我的对话框会在最后一刻出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:45:30.167

试试这个.....创建你的`private ProgressDialog mProgressDialog;`

在您的活动中。

```
onCreate(.....) {

    ...........
    ...........
    mProgressDialog = new ProgressDialog(this);
} 
```

现在剩余的过程与您在异步任务中所做的相同。就像@PearsonArtPhoto 提到的那样做

```
 private class MyAsyncTask extends AsyncTask<Null , Int, Null>
 { ...
      doInBackground(...)
      {
           ....
           publishProgress(Progress_metric ...);
      }
      ......
      ......
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:45:04.593

您需要以某种方式[发布您的进度](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)`doInBackground()`

```
 private class MyAsyncTask extends AsyncTask<Null , Int, Null>
{ ...
doInBackground(...)
{
     ....
     publishProgress(Progress_metric ...)
} 
```

# doxygen - Doxygen 没有看到（链接？）评论

> ID：13404047
> 
> 赞同：3
> 
> 时间：2012-11-15T18:42:44.187
> 
> 标签：doxygen

正如你在下面看到的，我在 Doxygen 没有正确链接我的评论时遇到了一些问题。这似乎是零散的，因为我的所有评论都具有相同的结构，但这些评论始终抛出此错误。

您可能会说我的函数在我的 '.h' 文件中声明，并在我的 '.cpp' 文件中定义。

关于如何解决这个问题的任何想法？我有 100 多个函数，这三个似乎引起了问题，其他的都没有。不知道为什么，或者如何解决这个问题。有任何想法吗？

```
DebugDataLoggingClass.cpp:46: warning: documented function `void RetrievalRig::DebugDataLoggingClass::AddEntryToCSV' was not declared or defined.

DebugDataLoggingClass.cpp:55: warning: documented function `void RetrievalRig::DebugDataLoggingClass::AddEntryToCSV' was not declared or defined.

RetrievalRigClass.cpp:416: warning: documented function `void RetrievalRig::RetrievalRigClass::DebugClosedHandler' was not declared or defined.

DebugDataLoggingClass.h:22: warning: Member DebugDataLoggingClass::AddEntryToCSV(System::String^ Name, double Value) (function) of class RetrievalRig::DebugDataLoggingClass is not documented.

DebugDataLoggingClass.h:23: warning: Member DebugDataLoggingClass::AddEntryToCSV(System::DateTime Date) (function) of class RetrievalRig::DebugDataLoggingClass is not documented.

RetrievalRigClass.h:188: warning: Member RetrievalRigClass::DebugClosedHandler(Object^ sender, System::Windows::Forms::FormClosedEventArgs^ e) (function) of class RetrievalRig::RetrievalRigClass is not documented. 
```

编辑：10天没碰代码，今天回来上班，发现原来的6个错误只剩下4个了。它抱怨的函数具有相同的名称，但传递给它们的参数不同。Doxygen 不支持这一点，还是我需要使用某种显式语法？去网上搜索答案...

EDIT2：添加代码

```
/**
 * The values in the CSV file must be formatted appropriately. This method
 * accomplishes this for a set of a string and double. this is used for all
 * values in the datarecord.
 * @param Name  The name of the value to be written to the file
 * @param Value The current value to be written to the file
 */
void DebugDataLoggingClass::AddEntryToCSV(System::String^ Name, double Value){
    this->DataFileWriter->WriteLine(Name+","+Value);
}

/**
 * The values in the CSV file must be formatted properly, this method 
 * accomplishes this for a set consisting of a string and date. this is used
 * for the timestamp of each datarecord.
 * @param Date [description]
 */
void DebugDataLoggingClass::AddEntryToCSV(System::DateTime Date){
    this->DataFileWriter->WriteLine("Time ,"+Date);
} 
```

# objective-c - CABasicAnimation 完成后重置

> ID：13404049
> 
> 赞同：0
> 
> 时间：2012-11-15T18:42:53.360
> 
> 标签：objective-c, ios, uiview, cabasicanimation, quartz-core

是的，我知道这是很多问题中的一个问题，但我仍然无法让它发挥作用。

我的函数移动视图上的所有子视图。
这是它的样子：

```
- (void)moveTo:(NSInteger)side
{
    CABasicAnimation *animation = [CABasicAnimation animation];
    animation.duration = 0.8f;
    animation.autoreverses = NO;
    animation.removedOnCompletion = NO;
    animation.fromValue = [NSNumber numberWithFloat:0];

    switch (side)
    {
        case kMovementSideDown: animation.toValue = [NSNumber numberWithFloat:568]; break;
        case kMovementSideUp: animation.toValue = [NSNumber numberWithFloat:-568]; break;
    }

    for (UIView *view in [self.view subviews])
    {
        [[view layer] addAnimation:animation forKey:@"transform.translation.y"];
    }
} 
```

而且我知道这会将所有项目移到 4 英寸屏幕上，这是我想要的。
但是在它把物品移到外面之后，尽管我设置了`removedOnCompletion = 0`标志，它们还是“跳”回了里面。我也尝试过覆盖委托方法并在完成后手动设置位置，但没有运气。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:46:50.417

由于您正在`transform`为图层的属性设置动画，因此您应该检查还有什么可以将其重置为`CATransform3DIdentity`（默认）状态。但是为什么不使用简单`[UIView animateWithDuration:]`的方法来动画视图的框架呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:23:22.433

您需要在开始动画之前设置**图层**的“结束”位置，以免它跳回。

```
[yourView layer].position = endPos; 
```

# layout - WPF 可折叠菜单

> ID：13404052
> 
> 赞同：1
> 
> 时间：2012-11-15T18:43:09.863
> 
> 标签：layout, wpf-controls, dockpanel

我想使用 WPF 创建一个如下所示的屏幕。我对如何做到这一点有一个相当好的想法，但只使用 WPF 大约 2 个月，所以我想从那些更有知识的人那里知道这是否是完成我想要的正确方法。

屏幕将分为 3 个主要用户控件：信息标题、链接（左侧）和信息显示（右侧的橙色区域包含信息字段）。我计划使用 DockPanel 进行布局，然后为每个区域创建一个单独的用户控件。

使用带有嵌入式用户控件的 DockPanel 是实现此目的的最佳方式吗？

我想加入的一个功能是一个可折叠的链接列表，如“公司”所示。当用户点击“公司”时，公司下方的区域将展开并显示与公司相关的各种选项（摘要、信息、问题等）。单击“员工”将展开员工链接并折叠“公司”链接。

WPF 中是否有可以用来处理链接折叠/展开的功能？

![屏幕布局](../Images/d902518110beaa47c1f837690439f967.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:26:33.577

根据您的模型，`DockPanel`听起来像是一个非常明智的方法。

侧面菜单听起来像手风琴控件 - [CodePlex 上的 WPF 工具包](http://wpf.codeplex.com/releases/view/40535)中有一个，尽管它已经有一段时间没有更新了。或者，您可以[使用一堆`Expander`控件](http://www.rooijakkers.net/blog/post/2007/11/WPF-implementation-of-a-basic-Accordion-control.aspx)自行滚动。

# ruby-on-rails-3 - 在 Google Chrome 中检查 Rails 会话 Cookie

> ID：13404056
> 
> 赞同：2
> 
> 时间：2012-11-15T18:43:36.567
> 
> 标签：ruby-on-rails-3, session-cookies, google-chrome-devtools

是否可以使用 Chrome 资源检查器查看存储在 cookie 中的 Rails 会话的值？它似乎以某种方式被编码，因为它的值只是一个不连贯的字母数字字符串。

我只想能够在调试请求时检查值是什么。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:43:20.693

[这篇博文](http://techbrahmana.blogspot.ru/2012/03/rails-cookie-handling-serialization-and.html)回答了你的问题。解码并不像您想象的那么容易:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-17T09:44:45.477

从 Rails 4 开始，这不再可能。如今，会话 Cookie 已加密。更多信息可以在[这里](http://api.rubyonrails.org/classes/ActionDispatch/Session/CookieStore.html)找到。

# javascript - JavaScript 文本框验证启用按钮

> ID：13404059
> 
> 赞同：0
> 
> 时间：2012-11-15T18:43:42.570
> 
> 标签：javascript, asp.net, webforms

嘿，所以我有两个文本框和一个按钮。我只希望在“playerName”文本框包含某些内容并且“upperLimit”文本框包含整数 > 0 时启用该按钮。我希望该按钮开始禁用，然后随着用户在文本框中键入内容而动态更改，不断检查中的内容文本框来查看按钮是否应该被激活。这是我尝试过的：

JavaScript：

```
var playerNameValid = false;
var upperLimitValid = false;

function validatePlayerName()
{
    if (document.getElementById("initialPlayerNameChoice").Value == "")
    {
        playerNameValid = false;
        document.getElementById("startGameButton").disabled = true;
    }
    else
    {
        playerNameValid = true;

        if (upperLimitValid == true)
        {
            document.getElementById("startGameButton").disabled = false;
        }
    }
}

function validateUpperLimit()
{
    if (isNaN(document.getElementById("initialUpperLimitChoice").valuetextContent))
    {
        upperLimitValid = false;
        document.getElementById("startGameButton").disabled = true;
    }
    else
    {
        upperLimitValid = true;

        if (playerNameValid == true)
        {
            document.getElementById("startGameButton").disabled = false;
        }
    }
} 
```

标记：

```
<asp:Label ID="enterNameLabel" runat="server" Text="Enter your name: "></asp:Label>
<asp:TextBox ID="initialPlayerNameChoice" runat="server"></asp:TextBox>
<br /><br/>
<asp:Label ID="enterUpperLimitLabel" runat="server" Text="Enter upper limit: "></asp:Label>
<asp:TextBox ID="initialUpperLimitChoice" runat="server"></asp:TextBox>
<br /><br />
<asp:Button ID="startGameButton" enabled="false" runat="server" Text="Start Game" /> 
```

代码背后：

```
 initialPlayerNameChoice.Attributes.Add("onkeyup", "javascript:validatePlayerName()");
    initialUpperLimitChoice.Attributes.Add("onkeyup", "javascript:validateUpperLimit()"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:44:40.220

你几乎明白了。您只需要在代码中修复几行：

```
if (document.getElementById("initialPlayerNameChoice").Value == "")
//In JavaScript there is no property called 'Value' -----^  use 'value' instead:
if (document.getElementById("initialPlayerNameChoice").value == "")

if (isNaN(document.getElementById("initialUpperLimitChoice").valuetextContent))
//Again, in JavaScript there is no property called 'valuetextContent' ---^
//Furthermore, 0 is a number, so if you kept this, the button would enable on 0
//You can use a regular expression to make sure it is a number > 0, and
//re-arranging your function eliminates re-checking of logic:
function validateUpperLimit()
{
  var num = document.getElementById("initialUpperLimitChoice").value.match(/^\d+$/);
  if(num && num[0] > 0)
  {
    upperLimitValid = true;

    if (playerNameValid == true)
    {
      document.getElementById("startGameButton").disabled = false;
    }
  }
  else
  {
    upperLimitValid = false;
    document.getElementById("startGameButton").disabled = true;
  }
} 
```

您可以实现的另一个解决方案是只有一个`validate()`函数，并且让两个字段都调用它`onkeyup`。如果您更改验证函数以返回 true 或 false，那么您可以消除全局变量的使用，并且逻辑更有意义。

```
function validate(){
  if(validatePlayerName() && validateUpperLimit())
    document.getElementById('startGameButton').disabled = false;
  else
    document.getElementById('startGameButton').disabled = true;
}

function validatePlayerName(){
  if(document.getElementById('initialPlayerNameChoice').value != '')
    return true;
  else
    return false;
}

function validateUpperLimit(){
  var num = document.getElementById('initialUpperLimitChoice').value.match(/^\d+$/);
  if(num && num[0] > 0)
    return true;
  else
    return false;
} 
```

然后代替您的`onkeyup`代码（我认为您不需要该`javascript:`部分，但我不完全确定，因此如果它向您吠叫，只需将其放回原处）：

```
initialPlayerNameChoice.Attributes.Add("onkeyup", "validate()");
initialUpperLimitChoice.Attributes.Add("onkeyup", "validate()"); 
```

# hadoop - 运行 Hadoop java.io.FileNotFoundException 时出错：

> ID：13404060
> 
> 赞同：1
> 
> 时间：2012-11-15T18:43:44.677
> 
> 标签：hadoop

我完成了本教程 [在 Ubuntu Linux（单节点集群）上运行 Hadoop](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)，一切正常。之后，我尝试了[在 Ubuntu Linux（多节点集群）上运行 Hadoop，在此处输入链接描述，](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)但出现以下错误：

日志文件：

```
 2012-11-15 18:40:39,258 WARN org.apache.hadoop.mapred.ReduceTask: java.io.FileNotFoundException: http://localhost:50060/mapOutput?job=job_201211151832_0002&map=attempt_201211151832_0002_m_000000_0&reduce=0
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1613)
at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getInputStream(ReduceTask.java:1639)
at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.setupSecureConnection(ReduceTask.java:1575)
at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(ReduceTask.java:1483)
at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(ReduceTask.java:1394)
at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run(ReduceTask.java:1326) 
```

终端错误：

```
12/11/15 18:42:18 WARN mapred.JobClient: Error reading task outputhttp://localhost:50060/tasklog?plaintext=true&attemptid=attempt_201211151832_0002_m_000001_0&filter=stderr 
```

我还检查了是否是日志目录磁盘空间不足的问题，但事实并非如此。

我正在使用 Hadoop 1.0.4。

是什么导致了这个错误？

一些附加信息：主节点是 LinuxMint 13 x64 (Oracle Java 7 x64)，从节点是 Ubuntu 12.04 x86 (Oracle Java x86)。

使用两个不同版本的 Java（x86 和 x64）是否可能导致此错误？

# c# - 如何使用 Entity Framework 在读取时锁定表？

> ID：13404061
> 
> 赞同：69
> 
> 时间：2012-11-15T18:43:56.603
> 
> 标签：c#, sql-server, entity-framework, multiprocessing

我有一个使用 Entity Framework (4.1) 访问的 SQL Server (2012)。在数据库中，我有一个名为 URL 的表，一个独立的进程向其中提供新的 URL。URL 表中的条目可以处于“新建”、“处理中”或“已处理”状态。

我需要从不同的**计算机**访问 URL 表，检查状态为“New”的 URL 条目，取第一个并将其标记为“In Process”。

```
var newUrl = dbEntity.URLs.FirstOrDefault(url => url.StatusID == (int) URLStatus.New);
if(newUrl != null)
{
    newUrl.StatusID = (int) URLStatus.InProcess;
    dbEntity.SaveChanges();
}
//Process the URL 
```

由于查询和更新不是原子的，我可以让两台不同的计算机读取和更新数据库中的同一个 URL 条目。

有没有办法使 select-then-update 序列原子化以避免这种冲突？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-03-28T19:43:17.087

我只能通过手动向表发出锁定语句来真正实现这一点。这是一个**完整**的表锁，所以要小心！就我而言，它对于创建一个我不希望多个进程同时接触的队列很有用。

```
using (Entities entities = new Entities())
using (TransactionScope scope = new TransactionScope())
{
    //Lock the table during this transaction
    entities.Database.ExecuteSqlCommand("SELECT TOP 1 KeyColumn FROM MyTable WITH (TABLOCKX, HOLDLOCK)");

    //Do your work with the locked table here...

    //Complete the scope here to commit, otherwise it will rollback
    //The table lock will be released after we exit the TransactionScope block
    scope.Complete();
} 
```

**更新**- 在 Entity Framework 6 中，尤其是使用`async`/`await`代码，您需要以不同的方式处理事务。经过一些转换后，这对我们来说是崩溃的。

```
using (Entities entities = new Entities())
using (DbContextTransaction scope = entities.Database.BeginTransaction())
{
    //Lock the table during this transaction
    entities.Database.ExecuteSqlCommand("SELECT TOP 1 KeyColumn FROM MyTable WITH (TABLOCKX, HOLDLOCK)");

    //Do your work with the locked table here...

    //Complete the scope here to commit, otherwise it will rollback
    //The table lock will be released after we exit the TransactionScope block
    scope.Commit();
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-07-18T15:59:47.997

@jocull 提供的答案很棒。我提供了这个调整：

而不是这个：

```
"SELECT TOP 1 KeyColumn FROM MyTable WITH (TABLOCKX, HOLDLOCK)" 
```

做这个：

```
"SELECT TOP 0 NULL FROM MyTable WITH (TABLOCKX)" 
```

这个比较通用。您可以创建一个简单地将表名作为参数的辅助方法。无需知道数据（又名任何列名），也无需实际检索管道中的记录（又名`TOP 1`）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-01-08T18:20:01.973

我无法对 Andre 的回答添加评论，但我担心此评论“IsolationLevel.RepeatableRead 将对所有读取的行应用锁定，如果已读取表 A，则线程 2 无法从表 A 中读取由线程 1 和线程 1 未完成事务。”

可重复只读表示您将持有所有锁直到事务结束。当您在事务中使用此隔离级别并读取一行（例如最大值）时，会发出“共享”锁并将一直保持到事务完成。此共享锁将阻止另一个线程更新该行（更新将尝试在该行上应用排他锁，这将被现有的共享锁阻塞），但它将允许另一个线程读取该值（第二个线程将在该行上放置另一个共享锁 - 这是允许的（这就是它们被称为共享锁的原因））。因此，要使上述语句正确，它需要说“IsolationLevel.RepeatableRead 将对所有以线程 2 无法**更新的方式读取的行应用锁**如果表 A 已被线程 1 读取并且线程 1 未完成事务，则表 A。”

对于最初的问题，您需要使用可重复的读取隔离级别**并将锁升级为独占锁**，以防止两个进程读取和更新相同的值。所有解决方案都涉及将 EF 映射到自定义 SQL（因为升级锁类型未内置在 EF 中）。您可以使用 jocull 答案，也可以使用带有输出子句的更新来锁定行（更新语句总是获得独占锁，并且在 2008 年或更高版本中可以返回结果集）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-22T11:40:49.527

您可以尝试将 UPDLOCK 提示传递给数据库并锁定特定行。这样它选择更新它的内容也会获得一个排他锁，以便它可以保存其更改（而不是一开始就获得一个读锁，它稍后在保存时尝试升级）。上面 jocull 建议的 Holdlock 也是一个好主意。

```
private static TestEntity GetFirstEntity(Context context) {
return context.TestEntities
          .SqlQuery("SELECT TOP 1 Id, Value FROM TestEntities WITH (UPDLOCK)")
          .Single();
} 
```

我强烈建议考虑乐观并发：[https ://www.entityframeworktutorial.net/EntityFramework5/handle-concurrency-in-entity-framework.aspx](https://www.entityframeworktutorial.net/EntityFramework5/handle-concurrency-in-entity-framework.aspx)

# php - PDO 插入问题

> ID：13404068
> 
> 赞同：0
> 
> 时间：2012-11-15T18:44:18.230
> 
> 标签：php, pdo

我用 PDO 创建了一个新函数来在我的数据库中插入数据。

函数看起来像这样

```
 function insert($table,$column = array(),$value = array())
{
    $array1 = implode(",", $column);
    $array2 = implode(",", $value);

    try 
    { 
        $sql = $this->connect->query("INSERT INTO $table ($array1) VALUES ($array2)");  

    }  
    catch(PDOException $e) 
    {  
        echo $e->getMessage();  
    }  
} 
```

以及对这样的函数的调用

```
-> insert('coupons',array('categorie','name','link','code','id'),array('test11','test','test','test','NULL')); 
```

但毕竟，它似乎不起作用并且没有显示任何错误。有人对我有几点意见，我应该在哪里搜索错误？当我编写查询 /wo 变量并调用该函数时，它可以工作。即使使用前两个变量，它也可以工作。只有最后一个（$array2）似乎有一个“错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:51:25.547

您正在插入字符串，这意味着您的查询出来了

```
INSERT INTO coupons (categorie, name, ...) VALUES (test11, test, ...) 
```

裸字符串被解释为字段/表名称，这意味着您的查询完全无效。

至少，忽略此代码的所有其他问题，修复将是

```
$array2 = implode("','", $value);
                   ^-^---

INSERT INTO $table ($array) VALUES ('$array2');
                                    ^--     ^-- 
```

当然，这是忽略sql注入漏洞，关键字问题，等等等等。

# javascript - 在使用 XHR、REST 的 javascript Dojo 中组织代码

> ID：13404069
> 
> 赞同：0
> 
> 时间：2012-11-15T18:44:22.807
> 
> 标签：javascript, class, rest, dojo, dao

我正在尝试在 Dojo 中组织我的代码，但我不了解事情是如何工作的。我想在 REST 调用后捕获 json 数据，但它不起作用。我分配 REST 返回的*testJson属性始终为 NULL。*

我怎样才能做到这一点？我在下面复制了我当前的代码。（我想在 ClassDAO 和 Controller 中使用我的代码。

```
define([
    'dojo/_base/declare',
    'dojo/request/xhr'
], function (declare, xhr) {

    return declare(null, {

        testJson: null,

        constructor: function(){

        },

        get: function(){

            xhr('/rest/reports', {
                method: 'get',
                handleAs: 'json',
                headers: {
                    Accept: 'application/json'
                }

            }).then(function(jsonData){

                    testJson = jsonData;

                }, function(err){
                    alert(err);
                }, function(evt){
                    // Handle a progress event from the request if the
                    // browser supports XHR2
                });

        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:18:04.247

看起来您正在尝试将类属性设置为变量；因此，

```
testJson = jsonData; 
```

必定是：

```
this.testJson = jsonData 
```

否则，您实际上是在设置全局变量 testJson，而不是属性。您还需要将**then()**函数的范围限定为您的类：

```
.then(lang.hitch(this, function(jsonData){
    this.testJson = jsonData;
})) 
```

*lang*对象是*dojo/_base/lang*并且需要添加到**define()**

```
define([
    "dojo/_base/declare",
    "dojo/request/xhr",
    "dojo/_base/lang"
], function (declare, xhr, lang) { 
```

作用域是 Javascript 的一个重要概念，过去曾让我们感到困惑。有关更多详细信息，请参阅[**hitch()**](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/lang.html#dojo-base-lang-hitch)命令的文档。

# php - 在树枝 symfony2 中使用 sql 进行 foreach

> ID：13404071
> 
> 赞同：-1
> 
> 时间：2012-11-15T18:44:24.877
> 
> 标签：php, symfony, twig

我在 PHP 中有以下代码：

```
$em     = $this->getDoctrine()->getManager(); 
$entity = $em->getRepository('DataBundle:SomeData')->findAll();

foreach ($entity as $item)
{
   echo $item->getSomething();

   $data = $em->getRepository('DataBundle:SomeData')
              ->findBySomeId($item->getSomeId());

   foreach ($data as $somevar)
   {
      echo $somevar->getSomeOtherData();   
   }
} 
```

可以用树枝翻译吗？如果是这样，我将不胜感激有关如何完成的指示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:47:00.520

您需要在模型中进行实体计算，由控制器启动，并将这些对象传递到视图中以推送到模板引擎中。

树枝看起来像这样：

```
{% for item in entity %}
  {{ item.getSomething }}

  {% for somevar in data %}
     {{ somevar.getSomeOtherData }}
  {% endfor %}
{% endfor %} 
```

编辑：这是一个更精确的答案，您可以从这里推断：

```
// Controller
public function demoAction()
{
    $demoModel = $this->get('demo.bundle.model.demo');
    $demoView = $this->get('demo.bundle.view.demo');
    $demoResult = $demoModel->myModelCalculation();

    return $demoView->myDemoView($demoResult);
}

//Model
public function myModelCalculation()
{
    return $this->getRepository('DataBundle:SomeData')->findAll();
}

//View
public function myDemoView($entity)
{
    return $this->getTemplatingEngine()->renderResponse('DemoBundle:demo:index.html.twig', array('entity' => $entity));
}

//Twig
{% for item in entity %}
    {{ item.getSomething }}
{% endfor %} 
```

Symfony2 很容易学习，我建议学习他们的教程并阅读文档。 [http://symfony.com/doc/current/index.html](http://symfony.com/doc/current/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:35:03.457

```
//SomeData.php
// ....
class SomeData 
{
  // ...

  /**
   * @ORM\OneToMany(targetEntity="SomeData")
   */
  private $children;
}

//Controler
class SomeController
{
  /**
   * @Template()
   */
  public function someAction()
  {
    return ('entities' => $this->getDoctrine()->getRepository('DataBundle:SomeData')->findAll());
  }
}

//some.html.twig
{% for item in entities %}
   {{ item.getSomething }}

   {% for somevar in item.children %}
      {{ somevar.getSomeOtherData }}
   {% endfor %}
{% endfor %} 
```

# forms - 单击单选按钮将选项卡设置回 Chrome 上的页面开头

> ID：13404074
> 
> 赞同：1
> 
> 时间：2012-11-15T18:44:34.600
> 
> 标签：forms, google-chrome, cross-browser, browser

`Chrome 23.0.1271.64m`在Windows XP 和 Windows 7 上进行测试。

在表单中切换时，如果单击`radio`按钮，则选项卡索引将重置，并且切换从页面顶部重新开始：

```
<input type="text">
<input type="text">
<input type="radio"><!-- click this radio and hit tab -->
<input type="text">
<input type="text"> 
```

*   [jsFiddle 演示](http://jsfiddle.net/brentonstrine/76FXY/)

IE7-10、Firefox 和 Opera 都从单击的单选按钮处继续跳格。Chrome 中发生了什么？有什么技巧可以让 Chrome 按预期运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-02T12:26:01.503

有点晚了，但还是。

`AutoPostBack`设置`true`为页面控件会使您在启动回发时失去对任何控件的关注。`Page_Load`您可以在or中指定哪个元素具有焦点`Page_Init`，但如果您不这样做，则加载该页面时不会设置任何焦点（也适用于更新面板）。

为避免这种情况，请确保`AutoPostBack`默认情况下不要申请，如果您没有申请，从长远来看，它将为您节省大量工作。

# c - 如何实现圆形切换布局？

> ID：13404075
> 
> 赞同：3
> 
> 时间：2012-11-15T18:44:37.880
> 
> 标签：c, x-dwm

默认情况下，dwm`config.h`为每个布局提供一个键绑定。

```
{ MODKEY, XK_t, setlayout, {.v = &layouts[0]} },
{ MODKEY, XK_f, setlayout, {.v = &layouts[1]} },
{ MODKEY, XK_m, setlayout, {.v = &layouts[2]} }, 
```

我想在我的 dwm 配置中获得功能，它将以圆形方式更改可接受的布局。

像这样的东西：

```
static void circlesetlayout (const Arg *arg);
...
{ MODKEY, XK_space,  circlesetlayout, {0} },
...
void
circlesetlayout (const Arg *arg) {
  Arg finallayout;
  if (Monitor.sellt == 2) {
    finallayout.v = &layouts[0];
  } else {
    finallayout.v = &layouts[1];
  }
  setlayout (&finallayout);
} 
```

但它并没有以我期望的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:19:28.167

This worked for me:

```
void
setnextlayout(const Arg *arg) {
    Arg newarg = {0};

    size_t i = 0;
    while(i < LENGTH(layouts) && selmon->lt[selmon->sellt] != &layouts[i])
        i++;

    newarg.v = &layouts[(i + 1) % LENGTH(layouts)]; // you can do it without '%'
    setlayout(&newarg);
} 
```

# class - 模板类中的纯虚模板函数

> ID：13404077
> 
> 赞同：0
> 
> 时间：2012-11-15T18:44:39.620
> 
> 标签：class, function, templates, pure-virtual

所以我的导师分发了一些我认为根本不起作用的代码，我想对此进行一些澄清。他在他的手稿中使用了这个（这意味着这是正确的）。

```
template<class T>
class State
{
public:
    virtual void Enter(T*)=0;
    virtual void Execute(T*)=0;
    virtual void Exit(T*)=0;
    virtual ~State(){};
}; 
```

我可以看到他正在尝试做什么，但我相信编译器根本不会喜欢它。任何人都可以帮助解释为什么这样做或不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:42:56.283

这应该可以工作，因为没有一个成员函数不是模板成员函数。基类参数可以在编译时推导出来，而实际调用的函数仍然可以在运行时确定。

如果你有这个：

```
class Foo
{
    template< typename T > virtual void Bar( T * ) = 0;
}; 
```

您会遇到问题，因为无法生成函数来处理在编译时可能传递给此函数的所有潜在类型。

# c# - 如何将库类引用到 Web 服务中？

> ID：13404079
> 
> 赞同：1
> 
> 时间：2012-11-15T18:44:45.510
> 
> 标签：c#, web-services, class-library

![在此处输入图像描述](../Images/44654e055d5e59fc0814d0e23b575bc8.png)

我为我的客户端应用程序和 Web 服务创建了一个类库。在其中，我创建了一些我想在 Web 服务中使用它的类，但是当我添加引用时，解决方案资源管理器会显示黄色警告。但我不知道发生了什么。

我收到两个警告：

> 错误找不到类型或命名空间名称“Usuario”（您是否缺少 using 指令或程序集引用？）
> 
> 错误名称空间“RedMov”中不存在类型或名称空间名称“Core”（您是否缺少程序集引用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:23:29.363

检查您尝试引用的核心程序集的 .NET 版本是否不高于 WebService 程序集的版本。

.NET 向后兼容，因此您可以在 .NET 4 项目中引用 .NET 3.5 程序集，但反之则不行。

# objective-c - 如何创建文本字段

> ID：13404087
> 
> 赞同：0
> 
> 时间：2012-11-15T18:45:29.623
> 
> 标签：objective-c

我是可可的新手。我创建了一个项目，其中有一个 textField 和一个按钮。我为按钮制作功能，在那里我开始我的其他功能，没关系。但是我需要从 textField 中获取数值作为我的函数的参数......就像这样：

```
@implementation AppController

- (IBAction)StartReconstruction:(id)sender {
int RecLine = //here i need something like textField1.GetIntValue();
drawGL(RecLine);
}
@end 
```

在 IB 中，我只创建数字格式的文本字段。但我不知道如何从代码中调用它:(

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:52:43.453

由于来自的值`UITextField`是一个字符串，您将需要使用`NSNumberFomatter`

```
NSNumberFormatter * formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber someNumber = [formatter numberFromString:myTextField.text];
int RecLine = [someNumber intValue]; 
```

这是[NSNumberFormatterStyles 的列表](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)

# objective-c - 邮件打开 AppStore 或打开带有链接的 App

> ID：13404089
> 
> 赞同：0
> 
> 时间：2012-11-15T18:45:48.317
> 
> 标签：objective-c, xcode

好的，我知道这个问题已经被问过了。但是这个问题有点老了，所以我想也许有新的更简单的方法可以做到这一点：

如果未安装应用程序，则打开 AppStore，如果已安装，则打开应用程序。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T19:31:12.170

据我所知，您无法打开 AppStore 或 Safari 以外的应用程序。您可以做的是检查应用程序是否已安装，如果已安装，则不执行任何操作，否则打开 AppStore：

```
-(IBAction)appCheck:(id)sender {

    NSArray *checkForApp = [NSArray arrayWithObjects:
                               @"/Applications/YourApp.app",

    NSString *exists;
    for(NSString *string in checkForApp)
        if ([[NSFileManager defaultManager] fileExistsAtPath:string])
            exists=@"y";
        else
            //OPEN APP STORE
} 
```

# c++ - 部分特化不特化任何模板参数

> ID：13404091
> 
> 赞同：2
> 
> 时间：2012-11-15T18:45:53.580
> 
> 标签：c++, templates, partial-specialization

我有以下代码，我试图在其中创建一个模板化的安全数组迭代器。

```
template <typename T>
class SArrayIterator;

template <typename E>
class SArray;

class SArrayIteratorException;

template <typename T>
class SArrayIterator<T> {//<--line 16
        friend std::ostream &operator <<(std::ostream &os, const SArrayIterator<T> &iter);
public:
        SArrayIterator<T>(SArray<T> &sArr) : beyondLast(sArr.length()+1), current(0), sArr(sArr){}

        T &operator *(){
                if (current == beyondLast) throw SArrayIteratorException("Attempt to dereference 'beyondLast' iterator");
                return sArr[current];
        }   

        SArrayIterator<T> operator ++(){
                if (current == beyondLast) throw SArrayIteratorException("Attempt to increment 'beyondLast' iterator");
                current++;
                return *this;
        }   

        bool operator ==(const SArrayIterator<T> &other) {return sArr[current] == other.sArr[current];} 
        bool operator !=(const SArrayIterator<T> &other) {return !(*this == other);}
private:
        int first, beyondLast, current;
        SArray<T> sArr;
}; 
```

但是，当我编译时，我得到-

```
array.h:16: error: partial specialization ‘SArrayIterator<T>’ does not specialize any template arguments 
```

我不确定这意味着什么。我的猜测是它说我声明了一个 T 但我从不使用它，但这显然不是这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:48:25.520

这是正确的代码：

```
template <typename T>
class SArrayIterator { 
```

当您编写`class SArrayIterator<T>`编译器时，编译器认为您将专门化模板，但您不是在这种情况下，因此您必须将其`<T>`排除在外。

您实际上也可以将`<T>`out 留在类主体中，例如：

```
SArrayIterator operator ++(){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:50:02.167

您使用部分专业化的语法编写基本模板；基本模板的正确声明是：

```
template <typename T>
class SArrayIterator { 
```

专门的声明看起来像

```
template <>
class SArrayIterator<double> { 
```

# mercurial - Mercurial：如何中止“嫁接”状态？

> ID：13404094
> 
> 赞同：15
> 
> 时间：2012-11-15T18:46:01.057
> 
> 标签：mercurial

当一个`hg graft`失败时，它会留下`.hg/graftstate`哪个信号向移植命令发出一个移植正在进行中并且可以继续的信号。除了删除之外`.hg/graftstate`，还有更干净的方法来*中止*嫁接吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-01-08T02:57:15.217

您想要`hg update --clean .`较早的答案缺少“。” 指示要更新到的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T16:29:28.553

“ hg update --clean ” 应该可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-07T09:29:22.953

确保您没有要推送的重要内容，然后执行以下操作。

```
hg strip "roots(outgoing())" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-26T20:26:12.377

只需删除 .hg/graftstate 文件

# android - 开发 GPL 程序的试用版

> ID：13404095
> 
> 赞同：-1
> 
> 时间：2012-11-15T18:46:09.277
> 
> 标签：android, licensing, gpl

我开发了一个使用其他人开发的 GPL 源代码的 Android 应用程序。现在我想将应用程序发布到 Google Play。我知道我必须在 GPL 下发布应用程序的完整源代码，但我愿意付费，而且我知道 GPL 允许这样做。

现在，如果潜在用户想在购买之前试用该应用程序怎么办？

为了解决这个问题，我想发布 2 个版本的应用程序： - 试用版，具有完整功能，但仅用于评估，可免费下载；- 完整版，包括源代码，可下载，费用为 100 美元左右。

我的问题是：GPL 是否允许免费发布 DEMO/TRIAL 应用程序但没有源代码，以便潜在用户可以先试用再购买？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:12:42.793

[http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLAllowDownloadFee](http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLAllowDownloadFee)说：

> 是的。您可以收取任何您希望分发该程序副本的费用。如果您通过下载分发二进制文件，则必须提供“等效访问”来下载源代码——因此，下载源代码的费用可能不会高于下载二进制文件的费用。

我的意思是试用版的源代码必须以相同或更少的成本（免费）提供。

此外，不要忘记：[http](http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLRequireAvailabilityToPublic) ://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLRequireAvailabilityToPublic这意味着其他人可以在支付一百万美元后获取源代码，编译并分发它。我相信这就是 CentOS 的工作方式。

以 RedHat 为例，关键在于获得支持支持的率先上市。人们可以重新分享您的来源，但他们将不得不费心。如果您的产品很好并且您继续保持新鲜，那么克隆的风险就会降低。

# objective-c - 如何制作具有自定义地图图像的类似地图的视图？

> ID：13404103
> 
> 赞同：7
> 
> 时间：2012-11-15T18:46:33.967
> 
> 标签：objective-c, ios, xcode, image, mkmapview

就像标题说的那样，我需要制作一个非常自定义的视图，它的行为类似于 MKMapView 但是使用自定义图像。也许分享最终目标会更容易。

我正在尝试制作的应用程序是对我不时玩的 MMO 的补充，它也是我正在上的 iOS 课程的学期项目。无论如何，这个想法是创建一个应用程序，在屏幕上显示来自游戏的交互式地图。下一步是在应用程序中添加某种叠加层以进行注释，以便用户可以将自定义位置直接添加到地图中。

![星球：Calypso_大陆：Eudoria](../Images/472794c96527777630ca9b1552537a1e.png) *（这是我要添加的图像之一）*

所以，这里是总结...

*   如何添加图像并使其像 MKMapView 一样可滚动和可捏合
*   如何使用允许自定义位置的坐标设置叠加层

任何和所有提示将不胜感激。:)

**更新：**

**@andrewap 向我展示了[http://mapbox.com/mobile/](http://mapbox.com/mobile/)，它看起来很棒，似乎正是我所需要的，但我认为这并不完全符合我作为初学者的技能水平。因此，如果找到任何其他更简单/更简单的方法，这个问题仍然是开放的，假设有的话。**

**我试着让自己熟悉一下 TileMill，据我所知，它不支持自定义地图图像（如前图所示的虚构地图图像），因此不能完全回答我的问题。但是，如果您希望拥有一个功能齐全的自定义*真实世界*地图图像，那就太好了。**

*（注意：我对编程非常陌生，甚至对 Objective-C/iOS 编程也很陌生，请在回答时记住这一点）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:25:34.287

鉴于您需要具有自定义地图图像和数据的地图功能，我建议您研究允许您使用自己的图块的 3rd 方 SDK。为了让你开始，看看 MapBox 和 TileMill：

*   [MapBox iOS SDK](http://mapbox.com/mobile/) — 作为`MKMapView`显示自定义地图图块的替代方案
*   [TileMill](http://mapbox.com/tilemill/) — 从您的游戏地图图像创建自定义地图图块

我个人以前没有这样做过，所以很遗憾，除此之外我不能给你具体的指导。这是使用自定义图像作为地图的示例：http: [//macwright.org/2012/08/13/images-as-maps.html](http://macwright.org/2012/08/13/images-as-maps.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:25:31.593

在 WWDC2010 示例代码中有一个很好的教程来说明你正在做什么。他们拍摄图像并将其切成四等份，然后将其切成四等份，依此类推，直到图像图块易于管理，然后使用 UIScrollView 将它们展示出来。虽然没有实现引脚。您可以使用实际的 MKMapview 并使用 TileMaps 中的示例（也来自 WWDC2010）将图像作为地图图块放入。你需要用坐标标记你的图像，也许把它变成 GeoTiff，然后通过[MapTiler](http://www.maptiler.org)运行它。我不知道如何将图像映射到真实世界的坐标，但如果您不打算允许用户绘制路线，您可以调整您的引脚（MKAnnotations）坐标，以便它们出现在您的正确位置地图。

# objective-c - 当一个核心数据的值发生变化时，如何“破”？

> ID：13404111
> 
> 赞同：1
> 
> 时间：2012-11-15T18:47:09.073
> 
> 标签：objective-c, xcode4.5

我有这个错误，其中 anImage.URL 的值突然变为 nil。anImage 是 Image 类的对象。数组中有 5 个这样的值。不知何故，其中至少有一个的 URL 以某种方式变成了 nil。

我不知道那东西在哪里改变。

所以我将其设置为 anImage.URL = something 的类别

```
-(void) setURL:(NSString *)URL
{

    [super setValue:URL forKey:NSStringFromSelector(@selector(URL))];
} 
```

并在那里设置断点。

但是，它成为一个问题，因为它只是递归地调用自己。

我该怎么办？

当值更改不起作用时，调试器会中断。毕竟它是一个数组。无论如何我应该看什么？

我不确定如何使用 keyValueObserving。

基本上我想重新实现 -(void) setURL:(NSString *)URL 以完全像以前一样工作。唯一的区别是我想在那里放一个断点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T21:58:32.680

您可以实现自定义设置方法来调试或设置断点。

可以在“核心数据编程指南”中的[自定义属性和一对一关系访问器方法中找到一个示例。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW14)

您在托管对象子类“图像”上创建一个类别（例如“MyAccessors”）（如果您还没有）。在实现文件“Image+MyAccessors.m”中添加

```
@interface Image (PrimitiveAccessors)
- (void) setPrimitiveURL:(NSString *)newURL;
@end

@implementation Image (MyAccessors)

- (void)setURL:(NSString *)newURL
{
    [self willChangeValueForKey:@"URL"];
    [self setPrimitiveURL:newURL];
    [self didChangeValueForKey:@"URL"];
}

@end 
```

“诀窍”是（我花了一些时间才弄清楚这一点），您必须在*不同*的类别中声明原始访问器，而不是在您实现自定义访问器方法的类别中。

或者，您可以像这样实现自定义访问器：

```
- (void)setURL:(NSString *)newURL
{
    [self willChangeValueForKey:@"URL"];
    [self setPrimitiveValue:newURL forKey:@"URL"];
    [self didChangeValueForKey:@"URL"];
} 
```

在这种情况下，您不必声明原始访问器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:43:54.790

这不是问题的直接答案。问题是如何调试它。

好吧，我发现了这个错误。当 NSManagedObject 行为不正常时，请确保您检查您没有跨线程使用 managedObject 上下文。从技术上讲，您可以使用执行块，但这是另一回事。

我只是想分享这个。稍后我会尝试 Martin 的解决方案。

# javascript - 裁剪缩小的图像

> ID：13404113
> 
> 赞同：0
> 
> 时间：2012-11-15T18:47:14.663
> 
> 标签：javascript, html, canvas

我不确定如何描述这个问题，所以让我用一个例子来解释一下。

*   假设我有一个宽度和高度为 600x400 的画布设置。

*   现在，我可以选择一个图像（可以是任何尺寸，但通常大于 600x400）并将其绘制在画布上。

*   现在我需要将原始图像（假设在本例中为 1000x500 像素）裁剪为 400x200 像素。

我该如何做才能确保在画布上显示按比例缩小的图像时裁剪原始大小的图像？

我最好看一个完全客户端的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:58:40.853

**[现场演示](http://jsfiddle.net/loktar/SEGZX/)**

它实际上很容易。您需要做的就是将图像绘制到所需大小的画布上，然后调用`toDataUrl()`它以获取结果图像数据。只要将原始图像的内容绘制到裁剪区域，将图像本身绘制到不同的画布就不会影响输出。

```
var canvas = document.getElementsByTagName("canvas")[0],
    context = canvas.getContext("2d"),
    img = document.getElementsByTagName("img")[0];

canvas.width = 600;
canvas.height = 400;

context.drawImage(img, 0,0,600,400);

var croppedCanvas = document.getElementById("tempCanvas"),
    croppedCtx = croppedCanvas.getContext("2d");

croppedCanvas.width = 400;
croppedCanvas.height = 200;

croppedCtx.drawImage(img, 0, 0); 
```

# python - subprocess.Popen 命令（antiword）在 shell 与 Web 应用程序中产生不同的输出

> ID：13404116
> 
> 赞同：2
> 
> 时间：2012-11-15T18:47:23.743
> 
> 标签：python, character-encoding, popen

我让 Django 在标准 WSGI/Apache httpd 组合上运行。

我注意到当我在 shell 和浏览器中运行代码时，文件输出是不同的。我已经隔离了其他所有内容，但仍然遇到同样的问题。

这是代码：

```
def test_antiword(filename):
    import subprocess
    with open(filename, 'w') as writefile:
        subprocess.Popen(["antiword", '/tmp/test.doc'], stdout=writefile)
    p = subprocess.Popen(["antiword", '/tmp/test.doc'], stdout=subprocess.PIPE)
    out, _ = p.communicate()
    ords = []
    for kk in out:
        ords.append(ord(kk))
    return out, ords

def test_antiword_view(request):
    import HttpResponse
    return HttpResponse(repr(test_antiword('/tmp/web.txt'))) 
```

在浏览器中打开 url 时，输出如下：

> ('\n"我说再见，先生。再见！" Sh\xe9rlo\xe7k H\xf8lme\xa3 喊道。\n\n "为什么不是 Zoidberg？" Zoidberg 问道。\n', [10, 34, 73 , 32, 115, 97, 105, 100, 32, 103, 111, 111, 100, 32, 100, 97, 121, 32, 115, 105, 114, 46, 32, 71, 111, 111, 100, 32 , 100, 97, 121, 33, 34, 32, 115, 104, 111, 117, 116, 101, 100, 32, 83, 104, 233, 114, 108, 111, 231, 107, 32, 72, 248 , 108, 109, 101, 163, 46, 10, 10, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 34, 87, 104, 121, 32 , 110, 111, 116, 32, 90, 111, 105, 100, 98, 101, 114, 103, 63, 34, 32, 113, 117, 101, 114, 105, 101, 100, 32, 90, 111 , 105, 100, 98, 101, 114, 103, 46, 10])

`test_antiword('/tmp/shell.txt')`这是我调用ine hte shell时的相应输出：

> ('\n\xe2\x80\x9cI say good day sir. Good day!\xe2\x80\x9d 大喊一声 Sh\xc3\xa9rlo\xc3\xa7k H\xc3\xb8lme\xc2\xa3.\n\n \xe2 \x80\x9c为什么不是 Zoidberg？\xe2\x80\x9d 查询了 Zoidberg。\n', [10, 226, 128, 156, 73, 32, 115, 97, 105, 100, 32, 103, 111, 111, 100 , 32, 100, 97, 121, 32, 115, 105, 114, 46, 32, 71, 111, 111, 100, 32, 100, 97, 121, 33, 226, 128, 157, 32, 115, 104 , 111, 117, 116, 101, 100, 32, 83, 104, 195, 169, 114, 108, 111, 195, 167, 107, 32, 72, 195, 184, 108, 109, 101, 194, 163 , 46, 10, 10, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 226, 128, 156, 87, 104, 121, 32, 110, 111 , 116, 32, 90, 111, 105, 100, 98, 101, 114, 103, 63, 226, 128, 157, 32, 113, 117, 101, 114, 105, 101, 100, 32, 90, 111 , 105, 100, 98, 101, 114, 103, 46, 10])

如您所见，输出非常不同。一方面，shell 输出保留了原始文件中的空白；它在网络版本中丢失了。

正如您在代码中看到的，我还将文档输出到文件中。生成的输出如下：

**网页.txt**

```
"I said good day sir. Good day!" shouted Sh?rlo?k H?lme?.

             "Why not Zoidberg?" queried Zoidberg. 
```

**外壳.txt**

```
“I said good day sir. Good day!” shouted Shérloçk Hølme£.

             “Why not Zoidberg?” queried Zoidberg. 
```

在网页版中，字符无法识别，编码由`file`ISO-8859 标识。在shell版本中，字符显示正确，编码标识`file`为UTF-8。

我不知道为什么会发生这种情况。我已经检查过，两个进程都使用相同版本的 antiword。此外，我已经验证它们都使用相同的 python 模块文件来处理`subprocess`. 在这两种情况下使用的 Python 版本也完全匹配。

谁能解释可能发生的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:02:05.130

差异可能是由于环境变量。根据[手册页](http://linux.die.net/man/1/antiword)：

> Antiword 使用环境变量`LC_ALL`和`LC_CTYPE`（按此`LANG`顺序）获取当前语言环境并使用此信息选择默认映射文件。

我怀疑发生的事情是，当您从 shell 运行它时，您的 shell 处于 UTF-8 语言环境中，但是当您从 Django 运行它时，它处于不同的语言环境中，并且无法正确转换 Unicode 字符。在运行子进程时尝试切换到 UTF-8 语言环境，如下所示：

```
new_env = dict(os.environ)  # Copy current environment
new_env['LANG'] = 'en_US.UTF-8'
p = subprocess.Popen(..., env=new_env) 
```

# jquery - 如何使用 Jquery 在父 ID 中查找相似的 ID

> ID：13404117
> 
> 赞同：1
> 
> 时间：2012-11-15T18:47:23.170
> 
> 标签：jquery, jquery-selectors

鉴于以下 HTML，我需要计算 note_table21 id 中的 note_record[0-9] id 的数量。我将如何用 jquery 做到这一点？注意：note_record id 末尾的数字将动态生成。我需要某种正则表达式，但我太喜欢 jquery noob 了

```
<table id="note_table21" width="100%" cellspacing="1" cellpadding="1">
 <tbody>
    <tr id="note_record259">...</tr>
    <tr id="note_record260">...</tr>
    <tr id="note_record261">...</tr>
 </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:50:07.807

要获取以id 开头的`tr`in的计数：`note_table21``note_record`

```
var count = $("#note_table21 tr[id^=note_record]").length 
```

这里的诀窍是[Attribute Starts With 选择器](http://api.jquery.com/attribute-starts-with-selector/)

**更新**

也就是说，您应该将文档结构更改为如下所示：

```
<table class="note_table" data-id="21" width="100%" cellspacing="1" cellpadding="1">
 <tbody>
    <tr class="note_record" data-id="259">...</tr>
    <tr class="note_record" data-id="260">...</tr>
    <tr class="note_record" data-id="261">...</tr>
 </tbody>
</table> 
```

然后你会有这些脚本片段来帮助你：

```
///gets the rows in a variable
var $rows = $(".note_table tr.note_record]");

//gets the count
var count = $rows.length;

//iterate through the rows, alerting the id of each row:
$rows.each(function(index, row){
    var id = $(row).data("id");
    alert(id);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:49:57.623

您可以使用[*以*](http://api.jquery.com/attribute-starts-with-selector/)( `^=`) 开头的选择器来测试属性的开头：

```
$(document).find("#note_table21 tr[id^=note_record]").length; 
```

演示：http: [//jsfiddle.net/7uyaW/](http://jsfiddle.net/7uyaW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:51:47.340

您可以将 CSS 选择器用于子级。

```
$("#note_table21 > #note_record259") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:53:10.903

试试这个

```
$(document).ready(function(){
  $("#note_table21 tbody tr[id*='note_record']").length;
}); 
```

# python - Python MySQLdb连接错误

> ID：13404119
> 
> 赞同：2
> 
> 时间：2012-11-15T18:47:35.570
> 
> 标签：python, mysql-python

我想将我的数据从 json 传输到 mysql 中，因为我安装了 python 库 MySQLdb 。它导入成功，但连接时出错

```
>>> import MySQLdb
>>> db=MySQLdb.connect(passwd="king123",db="thangs")

Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    db=MySQLdb.connect(passwd="king123",db="thangs")
  File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)")

>>> import _mysql
>>> db=_mysql.connect()

Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    db=_mysql.connect()
OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

> > > db=MySQLdb.connect(passwd="rat123",db="thangs",host="localhost",port=1028,user="mroot")

```
Traceback (most recent call last):
  File "<pyshell#41>", line 1, in <module>
db=MySQLdb.connect(passwd="king123",db="thangs",host="localhost",port=1028,user="munieb")

File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
OperationalError: (2013, "Lost connection to MySQL server at 'waiting for initial communication packet', system error: 2") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T08:36:55.120

我有同样的问题，对我来说，问题出在 mysql 监听端口 3305 的 IP 地址上。通过`netstat -aon`我看到：

```
Proto  Local Address          Foreign Address        State           PID
...
TCP    0.0.0.0:3306            0.0.0.0:0              LISTENING       884
... 
```

所以我在`my.ini`配置文件中取消了以下行的注释：

```
#bind-address="127.0.0.1" 
```

然后重新启动mysql，问题就消失了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:57:12.837

您需要指定[服务器和点](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/private/_mysql-module.html#connect)。

```
db=MySQLdb.connect(passwd="king123",db="thangs",host="hostname",port=3251,user="user") 
```

# sql - Oracle 10g 添加主键作为现有表的序列

> ID：13404126
> 
> 赞同：1
> 
> 时间：2012-11-15T18:48:19.727
> 
> 标签：sql, oracle, oracle10g

我有三张表——会员、付款、奖励，上面有超过 3000 条记录。目前Member 表有memberId 作为主键，memberid 是Payment 和Award 表的外键。注意 memberid 不是自动生成的字段。这些表是在 Access 中创建的。我的工作是迁移到 Oracle 并添加主键，让我们说 mem_id 作为序列号到成员表，并将 mem_id 作为外键添加到付款和奖励表。

*   我已经迁移了 Oracle 中的表。
*   将列名 mem_id 添加到成员表中

    `alter table member add mem_id number Unique;`

*   创建了一个序列

    ```
     create Sequence Mem_seq
          START WITH 1
          MAXVALUE 999999999
          MINVALUE 1
          NOCYCLE
          NOCACHE
          NOORDER; 
    ```

*   由于所有记录的 mem_id 都为空，因此我更新了该列

    ```
     Update member 
       Set mem_id =  mem_seq.nextval
       Where mem_id IS NULL; 
    ```

到目前为止效果很好，现在我向付款表和奖励表添加外键的挑战 - 在付款表中创建了 mem_id 列

```
 alter table PAYMENT
        add mem_id number Unique; 
```

*   我的想法是更新`mem_id`付款表

*   更新声明是

    ```
     update PAYMENT
       set PAYMENT.mem_id = MEMBER.mem_id
       where PAYMENT.memberid = MEMBER.memberid; 
    ```

我收到错误`ORA-00904 member.memberid: invalid identifier` 需要帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:17:39.620

尝试使用以下内容更新 PAYMENT 表

```
update payment p set p.mem_id  = (select mem_id from member where 
memberid = p.memberid); 
```

# c# - 字符串进入 smalldatetime 时出现算术溢出错误

> ID：13404131
> 
> 赞同：0
> 
> 时间：2012-11-15T18:48:45.090
> 
> 标签：c#, sql

嗨，我有一个程序使用 DateTime.Now.ToString() 来获取时间，然后将其插入到 smalldatetime 的 coloum 中。这以前有效，但现在我收到此错误。

“将表达式转换为数据类型日期时间的算术溢出错误。语句已终止。”

我究竟做错了什么？

这是我的 SQL 语句

```
command.CommandText = @" INSERT INTO Mail1 (UserID, Subject, Feedback, Date_Sent_On)
                         VALUES (@UserID, @Subject, @Feedback, @Date_Sent_On)"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:55:16.580

`@Date_Sent_On`参数应该是类型而`DateTime`不是你应该作为它的值`string`传递。`DateTime.Now`

使用`DateTime.Now.ToString()`是非常不可靠的，因为格式化日期`ToString()`取决于文化 - 根据您计算机的区域设置和应用程序中的文化设置，它可能会产生不同的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T19:03:04.003

你也可以使用

```
requestdatetime between '7/1/2011' and GETDATE() 
```

在您的 SQL 语句中获取当前日期。

我还发现有时使用这样的东西很有帮助：

```
SELECT 
  cast(datepart(mm, M.REquestdatetime) as varchar) + '/'
  + cast(datepart(yy, M.REquestdatetime) as varchar) as [Day]
FROM ... 
```

这为您提供了将结果显示为`MM-YYYY`等方面的灵活性。

# asp.net - 从 url 生成搜索

> ID：13404133
> 
> 赞同：1
> 
> 时间：2012-11-15T18:48:48.740
> 
> 标签：asp.net

我正在 ASP.NET 4.0 中构建一个 web 应用程序。

现在我不知道这方面的术语，所以它可能是一个愚蠢的标题并且很容易找到，但我已经尝试在此处发布之前找到解决方案。但是我真的不知道这叫什么..？

**问题：**
如何从 URL 中读取变量？

假设我输入

www.mysite.com/search/John/Doe

我想直接从网址中取出“John”和“Doe”，并将它们设置为变量。

另外，在访问 www.mysite.com 时，我该如何添加，以便我的文本框中的信息在不重新加载页面的情况下添加到 URL 的后面？但仍然处理我的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:52:37.227

我认为您正在寻找 URL 映射/重写，它将解析您所询问的 URL。提取搜索参数将适用于 www.mysite.com/search?FirstName=Joe&LastName=Doe。

ScottGu 有一篇关于 URL 映射/重写的文章：[http ://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

在这个论坛上完全回答有点太复杂了，但希望 Scott 的文章能给你一个开始。它列出了几个选项，每个选项都有示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:32:34.323

如果您在 asp.net 4 中，您可以使用[Url Routing](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)，如下所示；

在**Globle.asax**

```
void Application_Start(object sender, EventArgs e) 
{
        //define your route pattern here
        RouteTable.Routes.Add("SearchRoute", 
                    new Route("Search/{Firstname}/{Lastname}",
                    new PageRouteHandler("~/SearchPage.aspx")));
} 
```

对于*www.mysite.com/search/John/Doe*

在**SearchPage.aspx中**

```
//access your route values here
string fName = RouteData.Values["Firstname"]; //John
string lName = RouteData.Values["Lastname"];  //Doe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:51:37.370

取决于，如果您使用的是普通的网络表单，它可能是这样的：

```
request.Querystring["parameter1"] 
```

如果您使用的是 MVC，那么它在您的路由配置中定义：

```
Controller/Action/Parameters 
```

您需要在 WEBFORMS 中搜索的概念是 ViewState，这是 asp.net 必须看起来像您永远不会丢失表单数据的错觉

# database - 功能依赖的规范覆盖

> ID：13404134
> 
> 赞同：2
> 
> 时间：2012-11-15T18:49:00.903
> 
> 标签：database, functional-dependencies

我正在学习或尝试了解 DBMS，并且在理解如何为此计算规范覆盖时遇到各种问题：

```
A -> BCD
BC -> DE
B -> D
D -> A 
```

我只能找到 1 个示例来说明如何计算其中之一，它并不能帮助我理解如何处理 BC 和 B 依赖项。这就是我想出的，这肯定是错误的，但是任何有助于我理解的分解都会比实际答案更有价值。

```
A -> BCD
BC -> DE
D -> A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:20:47.423

这是查看两个 FD 的一种方法

*   BC -> DE，和
*   B -> D

从 BC->DE，导出 BC->D 和 BC->E（分解）。

```
BC->D
BC->E
B->D 
```

观察到 BC->D 的 LHS 是可约的，因为 B->D。这将顶部的两个 FD 减少到

```
BC->E
B->D 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T18:35:42.090

这个 BC->D 是可约的，因为在 BC->D 中，左 C 是一个无关属性。我们可以通过使用无关属性的公式来检查这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T12:32:59.333

我认为正确的答案是：

```
a->bc
bc->e
b->d
d->a 
```

看看你是否可以删除一个关系，假设我们正在考虑关系 R1=a->b 计算 F+(a) 而不考虑 R1 关系本身。如果你仍然可以以某种方式到达 b （ b 在 F+(a) 中）那么你可以删除 R1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-26T04:37:29.773

鉴于：

```
F = { 
  A -> BCD, 
  BC -> DE, 
  B -> D, 
  D -> A 
} 
```

`D`是 , 中的一个无关属性`A -> BCD`, 因为`A+ = ABCDE`并且`D`属于`A+`

因此 ：

```
Fc = { 
  A -> BC, 
  BC -> DE, 
  B -> D, 
  D -> A
} 
```

Now`C`是 , 中的一个无关属性`BC -> DE`，因为`B+ = ABCDE`和`DE`属于`B+`

因此：

```
Fc = { 
  A -> BC, 
  B -> DE, 
  B -> D, 
  D -> A
} 
```

Now`D`是 , 中的一个无关属性`B -> DE`，因为`B+ = ABCDE`和`D`属于`B+`

因此：

```
Fc = { 
  A -> BC, 
  B -> E, 
  B -> D, 
  D -> A
} 
```

使用联合规则，我们得到：

```
Fc = { 
  A -> BC, 
  B -> DE, 
  D -> A
} 
```

现在没有更多无关的属性了。因此，这是 的最终规范封面`F`。

# jquery - 如何从跨域 getScript() AJAX 请求中访问传输的内容？

> ID：13404135
> 
> 赞同：0
> 
> 时间：2012-11-15T18:49:03.367
> 
> 标签：jquery, ajax, cross-domain, getscript

我正在使用 jQuery (1.7.2) getScript() AJAX 方法来获取包含嵌入式 javascript 的外部（跨域）HTML 页面。我在 getScript() 命令中使用“脚本”数据类型，因为它没有跨域限制。在浏览器的 JS 控制台中，我使用以下代码，它等效于 getScript() 请求：

```
$.ajax({
    url:    url,    // This url is for an HTML page with embedded JS - not for a JS file
    type:           'get',
    crossDomain:    true,
    dataType:       'script',
    beforeSend: function(result) { result.setRequestHeader('Accept', '*/*') },
    success:    function(result) { console.log('SUCCESS:\t' + result) },
    error:      function(result) { console.log('ERROR') },
    complete:   function(result) { console.log('COMPLETE:\t' + result.responseText) }
}) 
```

这返回“成功”，但没有结果。

```
SUCCESS:    undefined
COMPLETE:   undefined 
```

控制台还告诉我内容被解释为脚本，但使用 MIME 类型 text/html 传输（我想这是因为我使用的 url 用于 HTML 页面）。我知道整个 HTML 数据已传输到客户端，因为我可以使用浏览器 JS 控制台的网络面板访问它，并且我可以确认确实传输了正确数量的 KB。

我不确定我是否关心 MIME 消息，因为我真的只需要掌握传输的内容并进行一些解析。如何使用 jQ/JS 访问此传输的内容（位于客户端某处）？如果我无法访问它，浏览器控制台的网络面板如何访问它？

# python - 在 virtualenv 中整理 Django 和 MySQL

> ID：13404140
> 
> 赞同：2
> 
> 时间：2012-11-15T18:49:21.920
> 
> 标签：python, mysql, django, virtualenv

我正在按照[本](http://www.jeffknupp.com/blog/2012/02/09/starting-a-django-project-the-right-way/)教程开始使用 Django，但我对如何集成 MySQL 感到非常困惑。在 virtualenv （这对我来说是新的）的上下文中执行此操作似乎使事情变得更加复杂。

我在 Ubuntu 上运行，而 MySQL 服务器在另一台主机上。以下是我的具体问题：

1.  我需要安装哪些软件包以及按什么顺序安装？
2.  激活 virtualenv 时应该安装哪些软件包？
3.  我如何知道是使用`pip`,`easy_install`还是`apt-get install`？
4.  如果我在激活 virtualenv 时运行上述任何命令，它们是否*只*安装在 virtualenv 中？
5.  当我尝试使用`sudo`. 我通过以`root`. 这是可以预料的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:04:37.363

1.  您需要安装系统库。这是全局的，不会发生在 virtualenv 中。如果您有能力，那么这也很容易`sudo apt-get install python-mysqldb` （`libmysqlclient`）`libmysqlclient18 - MySQL database client library`。

2.  使用 aptitude 安装 libmysqlclient 和 python-mysql 后，您可以激活您的 virutualenv 并安装 python-mysql 包`pip install MySQL-python`。这将`MySQLdb`在您的 virtualenv 中可用

3.  Mysql 是一个棘手的软件包，因为它需要 mysql 客户端库，而这些库必须安装在您的系统上。绝大多数 python 包将在 pip 或 github 上提供（您可以通过 pip 轻松安装），并且不需要额外的系统包。

4.  如果您`pip install`在 virtualenv 处于活动状态时进行某些操作，它将仅将其安装到您的虚拟 env 中。

5.  您可能需要运行 sudo 来使用`aptitude`. 请不要以 root 身份登录，您可以[授予您的用户 sudo 访问权限](https://askubuntu.com/questions/168280/how-do-i-grant-sudo-privileges-to-an-existing-user-in-12-04)

好消息是 mysql 非常困难。几乎所有其他 python 包都像激活环境一样简单，并且`pip install <pacakge_name>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-15T10:53:08.533

以下对我有用：

1.  `sudo apt-get install python-mysqldb`
2.  `sudo apt-get install libmysqlclient-dev`
3.  `sudo apt-get install python-dev`
4.  `pip install mysql-python`（在你的 virtualenv 里面）

# mysql - MySQL 使用布尔值合并记录

> ID：13404142
> 
> 赞同：-1
> 
> 时间：2012-11-15T18:49:30.167
> 
> 标签：mysql

我有一个返回一组记录的 SQL 语句：

```
SELECT
  members.id,
  members.name,
  emlink.tank,
  emlink.dps,
  emlink.heal,
  emlink.mid,
  emlink.eid
FROM 
  members, emlink
WHERE members.id = $mid AND emlink.eid = $eid 
```

结果：

```
1 Widget 0 0 1 1 8

1 Widget 1 0 0 1 8 
```

如何将这些合并到一条记录中，例如：

```
1 Widget 1 0 1 1 8 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:01:10.853

你要按位`OR`吗？如果是这样，请使用 MySQL 的[`BIT_OR()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_bit-or)聚合函数：

```
SELECT members.id,
       members.name,
       BIT_OR(emlink.tank),
       BIT_OR(emlink.dps ),
       BIT_OR(emlink.heal),
       BIT_OR(emlink.mid ),
       BIT_OR(emlink.eid )
FROM   members, emlink
WHERE  members.id = $mid AND emlink.eid = $eid 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/25f2c/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:02:46.873

```
SELECT M.id,
       M.name,
       MAX (E.tank),
       MAX (E.dps),
       MAX (E.heal),
       MAX (E.mid),
       E.eid
  FROM members M,
       emlink E
  WHERE M.id = $mid 
    AND E.eid = $eid
  GROUP BY M.id, M.name, E.eid 
```

或者任何最适合您需求的聚合函数，SUM、MAX、BIT_OR 等

# javascript - 有没有办法让 div 像 iframe 一样工作？

> ID：13404143
> 
> 赞同：3
> 
> 时间：2012-11-15T18:49:30.930
> 
> 标签：javascript, jquery, html, css, ajax

所以我正在为一个人建立一个网站，他想要获取一个我已经制作的页面，它基本上是一个订单计算器，并在弹出的 div 元素中使其在网站的每个页面上都可用。所以我组装了一个简单的 iFrame 将页面加载到自己的盒子中，一切都会正常工作，但他不喜欢它的外观，我承认，如果 iFrames 不占用的话，看起来有点马虎整个页面，它们会导致居中问题。

所以我想我会把它放到它自己的 div 中，然后通过 jQuery 将页面加载到 div 中，**但是问题出现在 stylesheets**中。位置页面和加载的计算器页面都有它们必须使用的基本 CSS 元素并且它们相互冲突，所以有没有办法让加载页面的 div 内的 css 导入仅适用于该 div 内的元素不重命名一切？

谢谢你的帮助。

代码：

```
function po()
{
    $("#calculator").load("/calculator/");
    $("#calculator").fadeIn();
    $("#modalbackground").fadeIn();
    $("#closeCalc").fadeIn();
} 
```

任何其他解决方案都将被欣然接受！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:53:41.830

也许您可以将无边框 iframe 放入 div

```
<div style='width:100px; height:100px;'>
    <iframe style='width:100%; height:100%; border:0;'></iframe>
</div> 
```

iframe 应该占据 div 的整个宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:54:40.653

只需添加`frameborder="0"`到`<iframe>`标签，它看起来就像一个可滚动的`<div>`. 您甚至可以在 CSS 中添加自己的边框（尽管在包含元素而不是`<iframe>`本身上这样做可能会更好）。

如果你愿意，我可以给你看一张我网站上的截图，它使用`<iframe>`了看起来像`<div>`s 的 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:11:55.140

如果你在一个 div 中加载整个页面，包括 body 标签，这肯定是错误的。您应该加载页面片段（计算器页面中的特定 div）。在这种情况下，只需给这个特定的 div 一个唯一的 id 并基于这个 id 构建您导入的样式表以避免冲突：

```
#loginBox input {...} 
```

如果这是不可能的，那么我会说 iframe 是要走的路。例如，您可以在计算器中添加一个脚本来调整其父级的大小（通过 parent.frameElement 访问）。记录一下，html5 有一个“无缝”的属性，但浏览器兼容性在这一点上仍然很差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T15:54:40.190

要使 iframe 在 Mozilla 中正常工作，您需要使用 em 作为单位而不是 px 或正常 % 如果它超出了您的情况的 div 限制。

这个问题在几个 FireFox 论坛上被问到，但显然他们似乎对使用 iframe 有一些安全问题。

> em 值应该在 iframe 标签中指定，而不是在 div 标签中

我制作了一个页面，其中包含三个 iframe 一个在另一个之下（我知道大多数人不会喜欢它，但我是初学者）并且它们在所有浏览器中都可以正常工作。

您需要能够通过自己实际尝试来确定 em。

我个人不建议使用 iframe 作为解决方法，但应该使用它的设计用途。

希望这对阅读我帖子的每个人都有帮助。如果您认为我错了，请发表评论。我会很感激你的帮助。谢谢！

# java - 线程安全 java - 集合/列表

> ID：13404145
> 
> 赞同：0
> 
> 时间：2012-11-15T18:49:53.190
> 
> 标签：java, list, sorting, vector, thread-safety

```
List<Integer> contacts = new Vector<Integer>();

Collections.sort(contacts); 
```

好的，我知道向量是线程安全的，但是如果我执行上述操作有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:48:35.150

您可以使用以下方法使此代码线程安全：

```
List<Integer> contacts = new Vector<Integer>();

synchronized(contacts) {
  Collections.sort(contacts);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:57:20.760

> 矢量是线程安全的

它的每个方法都是线程安全的。但是`Collections.sort`会遍历不是原子操作的向量。特别是，[Vector 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)指出：

> 如果在迭代器创建后的任何时候对向量进行了结构修改，除了通过迭代器自己的 remove 或 add 方法之外，迭代器将抛出 ConcurrentModificationException。

所以如果你的向量在你排序的时候被另一个线程修改了，你会得到一个异常。

如果多个线程可以访问您的结构，则替代方案包括：制作防御性副本或使用并发结构，例如 CopyOnWriteArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T09:57:52.583

使用 Collections.sort(anything) 是一件非常幼稚的事情。

如果您查看排序方法签名，您会看到它们都在列表上运行，但不能保证是线程安全的： `sort(List<T> list) sort(List<T> list, Comparator<? super T> c)`

即使您使用像 Vector 这样的旧对象（在 Java 历史中是旧的），您的代码也容易出现风险，因为下一个开发人员（或者甚至您自己）可能会决定使用 ArrayList 来代替。

sort 具有破坏性行为，即它正在修改底层集合，并且未能同步它可能会导致您出现以下情况：

`java.util.ConcurrentModificationException: null at java.util.ArrayList.sort (...)`

同步代码可能有点棘手，后来的 java 实现提供了许多功能来“手动同步”你的代码。

所以我要做的是：

`Collections.sort (Collections.synchronizedList (myList))`

# python - Numpy：对行求和

> ID：13404150
> 
> 赞同：1
> 
> 时间：2012-11-15T18:50:06.717
> 
> 标签：python, multidimensional-array, numpy

我想弄清楚如何对数组的每两行求和。EG 在此示例中将 a 转换为 b：

```
a=array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]])

b=array([[ 4,  6,  8, 10],
       [20, 22, 24, 26]]) 
```

当前代码如下所示：

```
b=[]
for num in range(len(a)/2):
    b.append(a[num*2]+a[num*2+1]) 
```

肯定有更快的方法。感谢您的时间。

找到的答案如下：

```
b=a[::2,:]+a[1::2,:] 
```

这实际上帮助我扩展了如何跳过前两行的次要问题。

```
>>> a=np.arange(24).reshape(6,-1)
>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])
>>> b=np.vstack((a[:2],a[2::2,:]+a[3::2,:]))
>>> b
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [20, 22, 24, 26],
       [36, 38, 40, 42]]) 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T18:53:15.120

切片救援！我们只需要指定切片的步幅就可以了。

```
b = a[::2,:] + a[1::2,:] 
```

演示：

```
>>> from numpy import *
>>> a=array([[ 0,  1,  2,  3],
...        [ 4,  5,  6,  7],
...        [ 8,  9, 10, 11],
...        [12, 13, 14, 15]])
>>>
>>> a[::2,:]
array([[ 0,  1,  2,  3],
       [ 8,  9, 10, 11]])
>>>
>>> a[1::2,:]
array([[ 4,  5,  6,  7],
       [12, 13, 14, 15]])
>>>
>>> a[::2,:] + a[1::2,:]
array([[ 4,  6,  8, 10],
       [20, 22, 24, 26]]) 
```

# scala - 针对函数的模式匹配

> ID：13404152
> 
> 赞同：0
> 
> 时间：2012-11-15T18:50:30.943
> 
> 标签：scala, syntax, pattern-matching

在 Scala 中玩耍时，我遇到了一些我认为应该是可能的事情，但我不知道该怎么做。

我正在返回一个受给定最小值/最大值限制的值。使用 if-else 语句，函数将如下所示：

```
def set(n: Int, min: Int, max: Int): Int = 
{
  if (n < min) return min
  if (n > max) return max
  return n
} 
```

我想知道是否可以通过模式匹配（优雅地）做到这一点。我尝试了以下方法，但它在语法上不正确：

```
def set(n: Int, min: Int, max: Int): Int = n match 
{
  case (n < min) => min
  case (n > max) => max
  case _ => n
} 
```

我认为有一种方法可以通过混合 case 和 if 语句来做到这一点，但是当我这样做的时候，我还不如只使用标准的 if/else 链。是否有正确的语法来做我正在尝试的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T18:57:11.557

模式匹配有效，但不太优雅：

```
def set(n: Int, min: Int, max: Int) = n match {
  case _ if n < min => min
  case _ if n > max => max
  case _ => n
} 
```

因为：

```
def set(n: Int, min: Int, max: Int) = if (n < min) min else if (n > max) max else n 
```

（或者如果你喜欢换行符：

```
def set(n: Int, min: Int, max: Int) = {
  if (n < min) min
  else if (n > max) max
  else n
} 
```

)

不需要退货。

（也不要忘记`math.min(max,math.max(min,n))`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:05:57.930

使用您正在思考/编程的命令式返回表达式。如果`this`发生，则返回`that`。在 Scala 中，if 是一个类型化的表达式：

```
val x = if (cond) v1 else v2 
```

其中 x 将是最具体的类型，它是 v1 和 v2 的超类型。

因此，您可以将表达式写为：

```
def bound(n:Int, max:Int, min:Int) = if (n < min) min else if (n>max) max else n 
```

即使可以使用警卫来完成，在这种情况下我也看不到使用 match 语句的价值。

# ios6 - iOS6：NSDate timeIntervalSinceDate：仅在 iOS 6 中给出不正确的值（与以前的 iOS 版本不同）

> ID：13404154
> 
> 赞同：0
> 
> 时间：2012-11-15T18:50:37.720
> 
> 标签：ios6

对于下面的代码，

```
NSTimeInterval theInterval = [Adate timeintervalSinceDate Bdate]; 
```

这是我正在使用的代码。在 ios 5.0 中，它给了我正确的价值。但在 iOS 6 中，相同的代码给了我不正确的值。所以我怀疑`timeIntervalSinceDate`在 iOS 6 中不能正常工作。

为什么 iOS 5 和 iOS 6 结果之间存在差异？

**更新**：功能相同`[NSDate timeIntervalSinceNow]`

# database-design - 具有多个值的网络流的维度模型

> ID：13404157
> 
> 赞同：1
> 
> 时间：2012-11-15T18:51:02.780
> 
> 标签：database-design, data-warehouse, dimensional-modeling

寻求一点帮助来阐明维度模型。我正在研究归结为 Web 事件分析的内容 - 给定 Web 日志，我想解析和存储 URL 中存在的变量。诀窍是这些变量并不总是预定义的，有时，一个变量可能包含多个值。

让我们看一个假设。如果我有一个查询字符串

`session_id=SID&key1=value1&key2=value2&key3=value3a&key3=value3b&key3=value3c`

我的目标是能够通过这些键的任意组合来计算聚合。例如，我可能会说“有多少页面点击的 key3 值为 value3a”，或者“有多少页面点击的 key1 值为 value1，而 key3 的值为 value3b”。为了增加复杂性，最终可能会出现 key4 和 key5 等，并且可能没有足够的预警来能够在值出现之前进行维度模型更改。

一种方法可能是创建 3 个维度表，`dim_key1`、`dim_key2`和`dim_key3`，每个表都有一个`id`字段和一个`value`字段。

然后我的事实表可能看起来像

`id, session_id, dim_key1, dim_key2, dim_key3, count`

这样做的缺点是我需要在我的事实表中创建 3 行，以便`key3`从查询字符串中正确捕获 3 个值。此外，对于出现的每个维度，我都需要提前通知，并且需要创建我的新维度表。

另一种可能的方法，更适合 dim_key3，可能是创建一个维度表，如

`id, value3a, value3b, value3c, ...`

其中该表中的行由表示这些值组合的 1 和 0 组成。例如，上面的查询字符串会有一行看起来像`1, 1, 1, 1, 0, 0, ...`，并且页面命中事实表的 dim_key3 维度 id 为 1。

从好的方面来说，每个页面点击在事实表中只有一个条目，并且维度表可以保持稀疏表示，我们只在其中为我们实际看到的组合创建新行（即我们不需要所有 key3 组合的幂集）。不利的一面是，每个新值`key3`仍然需要在该暗表中添加一个新列。

最后一个想法，for`dim_key3`将有一个类似 的表`id, value_list`，其中`value_list`存储以逗号分隔的值列表。它与“每个值的列”方法类似，但只是保持了更紧凑的表示。在这种情况下，我们可能有一个维度行，如`1, "value3a,value3b,value3c"`.

同样，这只需要事实表中的一行，并且作为一个额外的优势，当新值出现时不需要新列。缺点是它迫使查询变得复杂，不得不进行全文匹配/正则表达式。（如果有兴趣，我可以深入探讨，但我觉得我已经进行了足够长的时间）。

我查看了几个参考资料，包括 Kimball 的“数据仓库工具包”，但没有找到任何可以直接回答我问题的内容。大多数点击/网络/事件流分析维度模型示例都有一组固定不变的奇异值变量。

我概述的三种方法中的任何一种是否合理，和/或是否有人对我错过的另一种模型有任何建议？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:40:26.390

如果设计中的事实表为页面加载和键之间的每个关联包含一行：

```
RowID, SessionID, PageLoadID, KeyValuePairID, DateKey, etc. 
```

KeyValuePair 维度表将具有：

```
KeyValuePairID, Key, Value 
```

因此，对于您的示例，您将创建维度行

```
1 key1 value1
2 key2 value2
3 key3 value3a
4 key3 value3b
5 key3 value3c 
```

然后你可以做相交查询来找到你的答案

```
Select Intersect(
    NonEmpty([Session].Members, [KeyValuePair].&[Key1][Value1]),
    NonEmpty([Session].Members, [KeyValuePair].&[Key3][Value3a])) on 0
From myCube 
```

# python - 在 PyQt4 中 loadFinished 信号后打印网站的 html。Python

> ID：13404159
> 
> 赞同：0
> 
> 时间：2012-11-15T18:51:07.290
> 
> 标签：python, webkit, pyqt4

我刚开始学习 PyQt4，并玩信号和插槽，请帮助我修复我的代码，以便在站点完全下载后，它将打印此网页的 html。现在它只是在“加载完成”后停止

我的代码：

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
import sys

class Browser(QObject):
    def __init__(self):
        QObject.__init__(self)
    def print_percent(self, percent):
        print percent
    def print_load_finished(self):
        print 'Load Finished'
        self.print_html
    def print_html(self, ok):
        frame = QWebView.page().mainFrame()
        print unicode(frame.toHtml()).encode('utf-8')

if __name__=='__main__':
    app = QApplication(sys.argv)
    view = QWebView()
    br = Browser()
    url = QUrl('http://python.org')
    view.loadFinished.connect(br.print_load_finished)
    view.loadProgress.connect(br.print_percent)
    view.load(url)
    view.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:11:04.867

您需要调用`print_html`方法，例如

```
 def print_load_finished(self):
        print 'Load Finished'
        self.print_html() 
```

注意`()`在末尾`print_html`

但是它仍然无法工作，因为您`print_html`无法访问视图，您可以将视图传递给它，但这不是进行面向对象编程的正确方法。您应该从 may be 派生 Browser`QWebView`并绑定到中的事件`__init__`，所以它应该是这样的

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
import sys

class Browser(QWebView):
    def __init__(self):
        super(Browser, self).__init__()
        self.loadFinished.connect(self.print_load_finished)
        self.loadProgress.connect(self.print_percent)

    def print_percent(self, percent):
        print percent

    def print_load_finished(self):
        print 'Load Finished'
        self.print_html()

    def print_html(self):
        frame = self.page().mainFrame()
        print unicode(frame.toHtml()).encode('utf-8')

if __name__=='__main__':
    app = QApplication(sys.argv)
    br = Browser()
    url = QUrl('http://python.org')
    br.load(url)
    br.show()
    app.exec_() 
```

# c# - 实体框架 - 绑定到数据网格

> ID：13404161
> 
> 赞同：0
> 
> 时间：2012-11-15T18:51:20.850
> 
> 标签：c#, wpf, entity-framework, mvvm

我有一个绑定到 Players 属性的数据网格：

```
 <DataGrid HorizontalAlignment="Left" SelectedItem="{Binding CurrentPlayer}" Height="374" Margin="121,22,0,0" RowHeaderWidth="0" VerticalAlignment="Top" Width="836" ItemsSource="{Binding Players}" AutoGenerateColumns="false" IsReadOnly="True" SelectionMode="Single" IsEnabled="{Binding Editing, Converter={StaticResource InverseBooleanConverter}}" Grid.RowSpan="2" Grid.ColumnSpan="2"> 
```

这个 Players 属性定义如下：

```
public List<Player> Players
{
    get { return repository.Players.OrderBy(x => x.Firstname).ToList(); }
} 
```

存储库包含来自 EF 的 DBSet。

添加播放器时，我使用以下代码：

```
private void SaveExecute(object parameter)
{
    repository.SavePlayer(currentPlayer);
    Editing = false;
} 
```

我现在想做的很简单：创建新播放器时，数据网格应该刷新。它绑定到 Players 属性，但从未使用过 setter，因此无法在此处调用 RaisePropertyChange。

我被困在这里。如何正确绑定它，以便在调用 SavePlayer() 方法时，数据网格会更新并显示新玩家？

我找到的最简单的解决方案是调用 RaisePropertyChanged("Players"); 在 SaveExecute() 方法中：

```
private void SaveExecute(object parameter)
{
    repository.SavePlayer(currentPlayer);
    RaisePropertyChanged("Players");
    Editing = false;
} 
```

但是......这是允许的还是你不应该做的事情？您是否应该只在属性的设置器中调用 RaiseProperyChanged 这也可以吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:23:07.577

更改`List<Player>`为`ObservableCollection<Player>`. 这是一种特殊类型的集合，当添加/删除项目时，它具有通知事件。WPF 会自动处理这些事件并相应地更新 UI。

然后在您的`Save()`,中`Players.Add(newitem);`，您将看到 UI 中反映的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:56:34.317

`RaisePropertyChanged`要回答您的问题，从您的保存执行方法或您需要让 UI 知道某些内容已更改的任何其他地方调用是完全合法的。

这是最好的方法吗？可能不会，就个人而言，我会考虑使用 MVVM 模式。但是话又说回来，如果它对您有用，那么它没有任何问题。

# xcode - Interface Builder 添加 IBAction 并 Segue 一个 UIBarButtonItem

> ID：13404164
> 
> 赞同：1
> 
> 时间：2012-11-15T18:51:31.267
> 
> 标签：xcode, interface-builder, segue, ibaction

无论如何要向一个 UIBarButtonItem 添加 IBAction 和 segue 吗？

我尝试在 Interface Builder 中将 segue 和 IBAction 添加到 UINavigiationController 中的 UIBarButtonItem 但只有 segue 被触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:09:24.180

你可以做的是创建一个从视图控制器到下一个视图控制器的 segue，并给它一个标识符。然后向你的 UIBarButtonItem 添加一个目标/动作，并在动作方法的最后，调用`[self performSegueWithIdentifier:@"yourIdentifier" sender:self]`.

# android - 如果我只需要一个 webview，PhoneGap 是不是太多了？

> ID：13404165
> 
> 赞同：1
> 
> 时间：2012-11-15T18:51:35.337
> 
> 标签：android, ios, cordova

我正在开发一个在线多人移动网络应用程序，该应用程序在 Meteor 服务器的浏览器中 100% 运行（我学习新技术的演示）。这基本上只是一个带有触摸/拖动事件的单页 html5 应用纸牌游戏。

我真正需要的是一个 Web 视图来删除地址栏和导航栏，PhoneGap 会为此目的过度杀伤吗？（我以前从未使用过移动网络视图或 PhoneGap）。我将主要针对 iOS 和 Android。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T19:32:09.823

是的，太多了。Apple 保留权利，如果您的应用只是托管 web 视图的应用，Apple 很可能不会批准它。

iOS 网络应用程序：[https ://developer.apple.com/library/safari/#referencelibrary/GettingStarted/GS_iPhoneWebApp/_index.html](https://developer.apple.com/library/safari/#referencelibrary/GettingStarted/GS_iPhoneWebApp/_index.html)

Android 网络应用程序：http: [//developer.android.com/guide/webapps/overview.html](http://developer.android.com/guide/webapps/overview.html)

# installation - 使用 WiX 构建安装程序时，如何合并 INI 文件？

> ID：13404167
> 
> 赞同：0
> 
> 时间：2012-11-15T18:51:36.153
> 
> 标签：installation, wix, windows-installer, ini

我正在寻找的行为是：

```
if (!$bIniFileExists)
{
  CopyBaseIniFile($installDir, $newIniFile);
}
else
{
  foreach $key in $newIniFile
  {
     if (!exists $oldIniFile{$key})
     {
        AddKeyValueToIni($oldIniFile, $key, $newIniFile{$key});
     }
  }
} 
```

所以我想保留旧的用户设置，但仍然复制任何新设置。我是 WiX 的新手，经过一番谷歌搜索，找到了 IniFile WiX 对象，但问题是我宁愿将所有默认值保留在“默认 ini 文件”中，这样​​可以更轻松地从调试器运行应用程序。使用 IniFile 解决方案，我需要在 config.ini 和安装程序中包含密钥，这似乎是不必要的重复工作。有什么好方法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:40:23.723

对于 INI 和 XML，这变得非常复杂。按照您的建议，我建议重写您的代码 2 支持 2 个 INI 文件。

股票.INI

用户.INI

这个概念是安装程序总是可以安全地覆盖 STOCK.INI，因为它“拥有”它。

另一方面，USER.INI 不是由安装程序安装的，而是由应用程序生成的。

读取设置的代码然后必须检查 USER.INI 以查看值是否存在以及它是否没有从 STOCK.INI 中变红。

这允许对 stock.ini 进行管理，并将 user.ini 用作转换。

尝试在 1 个文件（尤其是 XML）中管理所有内容非常非常困难，并且需要在决定哪些属性要持久化以及哪些属性要替换为数据合并的一部分时进行广泛的规划。

# windows - 在 Windows 中跟踪文本或日志文件。记事本++也许？

> ID：13404170
> 
> 赞同：5
> 
> 时间：2012-11-15T18:51:58.323
> 
> 标签：windows, logging, text, notepad++, text-editor

我有一个日志文件，每隔几秒钟就会改变一次。我正在使用 Windows 7 并想关注它。在 Linux 中，这很简单，只需输入`tailf log.log`一个 shell。但是我如何在 Windows 中做到这一点？任何人都可以推荐任何程序吗？记事本++可能有这种事情的选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T08:26:55.183

Notepad++ 可以自动更新文件。您可以在 中找到设置`Settings -> Preferences... -> MISC -> File Status Auto-Detection`。选中所有三个框，文件将在更改时更新并滚动到底部。唯一的问题是 Notepad++ 窗口必须在焦点上才能更新。

Notepad ++也有一个`Document Monitor plugin`，但我自己从未尝试过。

# java - Mule 流尝试调用 Web 服务时出现 CXF 异常

> ID：13404172
> 
> 赞同：1
> 
> 时间：2012-11-15T18:52:20.273
> 
> 标签：java, web-services, jax-ws, cxf, mule

我是 mule ESB 的新手，我正在尝试实现一个简单的应用程序流程：

```
<mule ...>
    <flow name="extrator_gep_spedFlow1" doc:name="extrator_gep_spedFlow1">
        <file:inbound-endpoint path="/home/brevleq/inicio_extrator" responseTimeout="10000" doc:name="Inicio"/>
        <file:file-to-string-transformer doc:name="File to String"/>
        <echo-component doc:name="Echo"/>
        <cxf:jaxws-client operation="empresaExiste" clientClass="com.hrgi.gepsped.ServicoDeCadastroEAgendamento_Service" port="hrgi" enableMuleSoapHeaders="true" doc:name="empresa esta cadastrada"/>
        <echo-component doc:name="Echo"/>
    </flow>
</mule> 
```

基本上，当用户将文件放入扫描的目录中时，此流程开始，并使用文件的内容调用 web 服务。

不幸的是，执行流程时出现此错误：

```
Exception stack is:
1\. Unexpected wrapper element {http://endpoints.ws.gepsped.hrgi.com/}empresaExiste found.   Expected {http://endpoints.ws.gepsped.hrgi.com/}empresaExisteResponse. (org.apache.cxf.interceptor.Fault)
org.apache.cxf.interceptor.DocLiteralInInterceptor:106 (null)
2\. Unexpected wrapper element {http://endpoints.ws.gepsped.hrgi.com/}empresaExiste found.   Expected {http://endpoints.ws.gepsped.hrgi.com/}empresaExisteResponse. (javax.xml.ws.soap.SOAPFaultException)
org.apache.cxf.jaxws.JaxWsClientProxy:156 (http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/xml/ws/soap/SOAPFaultException.html)
3\. Unexpected wrapper element {http://endpoints.ws.gepsped.hrgi.com/}empresaExiste found.   Expected {http://endpoints.ws.gepsped.hrgi.com/}empresaExisteResponse.. Failed to route event via endpoint: org.mule.module.cxf.CxfOutboundMessageProcessor. Message payload is of type: PushbackInputStream (org.mule.api.transport.DispatchException)
org.mule.module.cxf.CxfOutboundMessageProcessor:148 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/transport/DispatchException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
org.apache.cxf.interceptor.Fault: Unexpected wrapper element {http://endpoints.ws.gepsped.hrgi.com/}empresaExiste found.   Expected {http://endpoints.ws.gepsped.hrgi.com/}empresaExisteResponse.
at org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:106)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:799)
+ 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything) 
```

这是 wsdl2java 生成的类：

```
@WebServiceClient(name = "ServicoDeCadastroEAgendamento", 
              wsdlLocation = "http://localhost:8080/gep-sped/servicos/ServicoDeCadastroEAgendamento?wsdl",
              targetNamespace = "http://endpoints.ws.gepsped.hrgi.com/") 
public class ServicoDeCadastroEAgendamento extends Service {
public final static URL WSDL_LOCATION;

public final static QName SERVICE = new QName("http://endpoints.ws.gepsped.hrgi.com/", "ServicoDeCadastroEAgendamento");
public final static QName Hrgi = new QName("http://endpoints.ws.gepsped.hrgi.com/", "hrgi");
static {
    URL url = null;
    try {
        url = new URL("http://localhost:8080/gep-sped/servicos/ServicoDeCadastroEAgendamento?wsdl");
    } catch (MalformedURLException e) {
        java.util.logging.Logger.getLogger(ServicoDeCadastroEAgendamento.class.getName())
            .log(java.util.logging.Level.INFO, 
                 "Can not initialize the default wsdl from {0}", "http://localhost:8080/gep-sped/servicos/ServicoDeCadastroEAgendamento?wsdl");
    }
    WSDL_LOCATION = url;
}

public ServicoDeCadastroEAgendamento(URL wsdlLocation) {
    super(wsdlLocation, SERVICE);
}

public ServicoDeCadastroEAgendamento(URL wsdlLocation, QName serviceName) {
    super(wsdlLocation, serviceName);
}

public ServicoDeCadastroEAgendamento() {
    super(WSDL_LOCATION, SERVICE);
}

public ServicoDeCadastroEAgendamento(WebServiceFeature ... features) {
    super(WSDL_LOCATION, SERVICE, features);
}

public ServicoDeCadastroEAgendamento(URL wsdlLocation, WebServiceFeature ... features) {
    super(wsdlLocation, SERVICE, features);
}

public ServicoDeCadastroEAgendamento(URL wsdlLocation, QName serviceName, WebServiceFeature ... features) {
    super(wsdlLocation, serviceName, features);
}

@WebEndpoint(name = "hrgi")
public ServicoDeCadastroEAgendamentoEndPoint getHrgi() {
    return super.getPort(Hrgi, ServicoDeCadastroEAgendamentoEndPoint.class);
}

@WebEndpoint(name = "hrgi")
public ServicoDeCadastroEAgendamentoEndPoint getHrgi(WebServiceFeature... features) {
    return super.getPort(Hrgi, ServicoDeCadastroEAgendamentoEndPoint.class, features);
}
} 
```

这是我的服务生成的 wsdl：

```
<definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://endpoints.ws.gepsped.hrgi.com/"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/"
         targetNamespace="http://endpoints.ws.gepsped.hrgi.com/" name="ServicoDeCadastroEAgendamento">
<types>
    <xsd:schema>
        <xsd:import namespace="http://endpoints.ws.gepsped.hrgi.com/"
                    schemaLocation="http://localhost:8080/gep-sped/servicos/ServicoDeCadastroEAgendamento?xsd=1"/>
    </xsd:schema>
</types>
<message name="empresaExiste">
    <part name="parameters" element="tns:empresaExiste"/>
</message>
<message name="empresaExisteResponse">
    <part name="parameters" element="tns:empresaExisteResponse"/>
</message>
<message name="cadastrarEmpresa">
    <part name="parameters" element="tns:cadastrarEmpresa"/>
</message>
<message name="cadastrarEmpresaResponse">
    <part name="parameters" element="tns:cadastrarEmpresaResponse"/>
</message>
<message name="recuperarHorarioAgendamento">
    <part name="parameters" element="tns:recuperarHorarioAgendamento"/>
</message>
<message name="recuperarHorarioAgendamentoResponse">
    <part name="parameters" element="tns:recuperarHorarioAgendamentoResponse"/>
</message>
<portType name="ServicoDeCadastroEAgendamentoEndPoint">
    <operation name="empresaExiste">
        <input message="tns:empresaExiste"/>
        <output message="tns:empresaExisteResponse"/>
    </operation>
    <operation name="cadastrarEmpresa">
        <input message="tns:cadastrarEmpresa"/>
        <output message="tns:cadastrarEmpresaResponse"/>
    </operation>
    <operation name="recuperarHorarioAgendamento">
        <input message="tns:recuperarHorarioAgendamento"/>
        <output message="tns:recuperarHorarioAgendamentoResponse"/>
    </operation>
</portType>
<binding name="hrgiBinding" type="tns:ServicoDeCadastroEAgendamentoEndPoint">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="empresaExiste">
        <soap:operation soapAction=""/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
    <operation name="cadastrarEmpresa">
        <soap:operation soapAction=""/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
    <operation name="recuperarHorarioAgendamento">
        <soap:operation soapAction=""/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
</binding>
<service name="ServicoDeCadastroEAgendamento">
    <port name="hrgi" binding="tns:hrgiBinding">
        <soap:address location="http://localhost:8080/gep-sped/servicos/ServicoDeCadastroEAgendamento"/>
    </port>
</service>
</definitions> 
```

有人可以解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:46:52.823

我的错误，我不知道在 cxf 组件之后需要一个端点：

```
<mule ...>
    <flow name="extrator_gep_spedFlow1" doc:name="extrator_gep_spedFlow1">
        <file:inbound-endpoint path="/home/brevleq/inicio_extrator" responseTimeout="10000" doc:name="Inicio"/>
        <file:file-to-string-transformer doc:name="File to String"/>
        <echo-component doc:name="Echo"/>
        <cxf:jaxws-client operation="empresaExiste" clientClass="com.hrgi.gepsped.ws.endpoints.ServicoDeCadastroEAgendamento" port="hrgi" enableMuleSoapHeaders="true" doc:name="empresa esta cadastrada">
            <cxf:jaxb-databinding/>
        </cxf:jaxws-client>
        <outbound-endpoint address="http://localhost:8080/gep-sped/servicos/ServicoDeCadastroEAgendamento" doc:name="Generic" exchange-pattern="request-response"/>
        <echo-component doc:name="Echo"/>
    </flow>
</mule> 
```

# algorithm - 解决具有两个属性的背包问题的最快方法是什么

> ID：13404173
> 
> 赞同：3
> 
> 时间：2012-11-15T18:52:22.817
> 
> 标签：algorithm, knapsack-problem

假设我们有一个输入：

```
10 // saying 1st property should be 10(in total)
10 // saying 2d property should be 10 (in total)
5 // saying theres 5 records below
// (1st property) (2nd property) (cost)
2 5 8 
7 3 10 
4 2 9
4 3 5
8 5 15 
```

在这种情况下，输出将如下所示：

```
22 // lowest possible cost
1 3 4 // indexes of records, we've been using (indexing starts with 1)

 2  5  8
 4  2  9
 4  3  5
+---------
 10 10 22 
```

如果无法实现这些属性为 10 和 10，程序将输出 -1；我确实知道如何解决背包问题，但是我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:54:35.663

您可以使用与背包问题相同的方法，但您将拥有一个 3D 表，而不是 2D 矩阵，每个参数都有一个维度（2 个约束 + 索引）。

递归公式将是相似的，但当然会为这两个参数完成。

```
f(item,cost1,cost2) = max {
               f(item-1,cost1,cost2), 
               f(item,cost1-firstCost[i],cost2-secondCost[i]) + profit[i]
                          } 
```

（基本条款也类似，但有一个额外的维度。）

# android - 如何在android中播放3gp视频文件？

> ID：13404175
> 
> 赞同：0
> 
> 时间：2012-11-15T18:52:33.767
> 
> 标签：android, android-intent, 3gp

我想在我的 android 平板电脑上播放 .3gp 视频文件。我尝试了下面的代码，但它会引发错误消息。如何在 android 中使用默认视频播放器播放？

```
String movieurl = root + "/" + fileNameTextView.getText().toString();           
Intent intent = new Intent(android.content.Intent.ACTION_VIEW); 
Uri data = Uri.parse(movieurl); 
intent.setDataAndType(data,"video/3gpp"); 
startActivity(intent); 
```

这是错误消息：

> 11-15 13:47:11.060: E/AndroidRuntime(23061): android.content.ActivityNotFoundException: 找不到活动来处理 Intent { act=android.intent.action.VIEW dat=/mnt/sdcard/DCIM/Camera/VID_20121002_174209 .3gp 类型=视频/3gpp }

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T19:25:41.017

我通过在开头添加“file:///”来更改字符串 movieurl：

```
String movieurl = "file:///" + root + "/" + fileNameTextView.getText().toString(); 
```

这解决了这个问题。

# perl - Perl eval 没有捕捉到异常

> ID：13404180
> 
> 赞同：1
> 
> 时间：2012-11-15T18:52:45.800
> 
> 标签：perl, exception, exception-handling

为什么 Perl 不能捕捉到这个异常？

```
my $fh;
eval { close $fh };
warn('Caught') if &@; 
```

输出为：

```
Can't use an undefined value as a symbol reference at New_test.pl line 30. 
```

**更新**：没有警告行的相同输出`eval { close $fh };`是第 30 行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T18:55:45.260

例外不在**eval**中，它在下面的行中，`&@`是错误的顺序，你的意思是`$@`

UPD：请注意，当您有**严格的 on 并且 $fh 是 undef 时，** **close**可能会**死掉**，我认为这不是正常情况（算法错误）。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T18:56:01.513

也许你的意思是`$@`而不是`&@`？后者将被解释为子程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:55:39.910

你应该使用`$@`而不是`&@`. 请参阅[此链接](http://www.kichwa.com/quik_ref/spec_variables.html)以查看 Perl 的所有特殊变量都有什么。

`$@`表示来自最后一个 eval、do-FILE 或 require 命令的 Perl 语法错误或例程错误消息。如果设置，则编译失败，或者 die 函数在 eval 的代码中执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T04:23:08.093

eval 块确实捕获了异常并防止它致命。

例如：

```
#!/usr/bin/perl -Tw

use strict;
use warnings;

my $fh;
close $fh;
print "done\n"; 
```

当关闭执行时，该程序会因预期的消息而终止。为了比较：

```
#!/usr/bin/perl -Tw

use strict;
use warnings;

my $fh;
eval { close $fh; };
print "done\n"; 
```

该程序安静地运行并在最后执行打印语句。**

# php - 渲染控制器并多次复制输出

> ID：13404181
> 
> 赞同：1
> 
> 时间：2012-11-15T18:52:49.193
> 
> 标签：php, forms, symfony

假设我有一个具有实体字段的无类表单，这意味着它会进行数据库调用。现在假设我想在一个页面上多次使用该实体字段呈现表单，每次都使用不同的操作。一个人会怎么做。我尝试使用宏，但每次运行宏时都会重新渲染表单，这会添加一个额外的数据库调用。我的目标是减少我访问数据库的次数，因为一次又一次地检索相同的信息是不好的。

您将如何多次重复表格

# git - Git Push Origin Master 吐出错误？

> ID：13404185
> 
> 赞同：0
> 
> 时间：2012-11-15T18:53:00.107
> 
> 标签：git

当我尝试

```
git push origin master 
```

我的文件到 git 上，我得到一长串错误，上面写着：

回溯（最近一次通话最后）：

文件“hooks/gl-pre-git”，第 22 行，在

```
os.environ['GL_REPO'], sys.argv[1] == 'W') 
```

文件“/usr/lib/python3.2/xmlrpc/client.py”，第 1076 行，**调用中**

```
return self.__send(self.__name, args)

File "/usr/lib/python3.2/xmlrpc/client.py", line 1403, in __request

verbose=self.__verbose

File "/usr/lib/python3.2/xmlrpc/client.py", line 1117, in request

return self.single_request(host, handler, request_body, verbose)

File "/usr/lib/python3.2/xmlrpc/client.py", line 1128, in single_request

http_conn = self.send_request(host, handler, request_body, verbose)

File "/usr/lib/python3.2/xmlrpc/client.py", line 1240, in send_request

self.send_content(connection, request_body)

File "/usr/lib/python3.2/xmlrpc/client.py", line 1270, in send_content

connection.endheaders(request_body)

File "/usr/lib/python3.2/http/client.py", line 963, in endheaders

self._send_output(message_body)

File "/usr/lib/python3.2/http/client.py", line 808, in _send_output

self.send(msg)

File "/usr/lib/python3.2/http/client.py", line 746, in send

self.connect()

File "/usr/lib/python3.2/http/client.py", line 724, in connect

self.timeout, self.source_address)

File "/usr/lib/python3.2/socket.py", line 404, in create_connection

raise err

File "/usr/lib/python3.2/socket.py", line 395, in create_connection

sock.connect(sa)

socket.error: [Errno 111] Connection refused

gl-pre-git hook failed (256)

fatal: The remote end hung up unexpectedly 
```

可能有人知道为什么会这样吗？我会尝试删除我的 git 存储库并克隆一个新的，但我会看看情况如何！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:02:35.423

GL_REPO 意味着 gitolite 正在 repo*服务器*上使用。如果您自己没有在 repo 服务器上设置 gitolite，您需要联系设置它的人并通知他们问题以解决问题。

*因此，您在 git客户*端上无能为力。它需要在服务器上修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:29:13.750

检查你的 git 钩子。(.git/hooks/gl-pre-git) 看起来像一个钩子 pre-git 钩子的错误。

# c - 缓冲区大小不正确

> ID：13404192
> 
> 赞同：-1
> 
> 时间：2012-11-15T18:53:19.227
> 
> 标签：c, malloc, buffer

我正在创建以下缓冲区：

```
char *buffer;
int buffer_size = 1024;
buffer = (char*) ( malloc(buffer_size * sizeof(char) ); 
```

然后当我这样做时：

```
int actual_size = sizeof(buffer);
printf("Size: %d", actual_size); 
```

它打印的是：

```
size: 4 
```

虽然我希望它是 1024，但这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:54:58.737

这不像那样工作

```
 sizeof(buffer); 
```

返回它的大小`buffer`是一个指针，而不是一个数组。如果您有如下数组

```
 char szArray[100]; 
```

然后

```
 sizeof(szArray); 
```

将返回 100，因为`szArray`它是一个数组，但**指针**不是数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:58:17.143

因为您打印出变量*buffer*的大小，它是*一个指向*字符缓冲区的指针。指向 char 数组的指针在内存中直接占 4 个字节的权重，这就是它向您打印 4 而不是 1024 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T18:34:27.267

在您的情况下`sizeof(buffer)`是指针的大小，因此 32 位机器上的结果是 4 在 64 位机器上是 8。

* * *

```
char arr[1024];
int size = sizeof(arr); //=1024 
```

这里我们测量数组的大小，而不是指针。您需要记住指针的作用类似于数组，但不是数组。实际上，在非常低的水平上，它们看起来相同，但是在`C`水平上却存在差异。

# c# - 委托代码生成 UML

> ID：13404193
> 
> 赞同：0
> 
> 时间：2012-11-15T18:53:19.330
> 
> 标签：c#, visual-studio-2012, uml

嗨，我正在使用带有 UML 项目设计的 VS2012 模型生成工具。

问题是 VS 拒绝从委托类（它的类原型）生成代码。我尝试了很多东西来让它工作，但没有太多的文档。好像没有人有这个问题，也许是班级出了问题？这里有一个例子：

```
public class Class1
{
      public delegate void Test();
}

public class Class2
{
      public event Class1 TestEvent();
      public virtual void OnTestEvent()
      {
        throw new System.NotImplementedException();
      }
} 
```

VS 也不允许我将函数声明为委托（我看不到该选项），我需要将一个类声明为委托，以便我可以将事件放在其他类上。它真的让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:09:18.893

这是有关如何创建委托的示例

```
Class MyClass
{
    private delegate void SomeFunctionDelegate(int param1, bool param2);
    private SomeFunctionDelegate sfd;

    public MyClass()
    {
        sfd = new SomeFunctionDelegate(this.SomeFunction);
    }

    private void SomeFunction(int param1, bool param2)
    {
        // Do stuff

        // Notify user
    }

    public void GetData()
    {
        // Do stuff

        sfd.BeginInvoke(34, true, null, null);
    }
} 
```

[C# / .NET 中的Zurück
代表和活动](http://www.akadia.com/services/dotnet_delegates_and_events.html)

# php - 带有var的模板组件的Joomla调用函数

> ID：13404195
> 
> 赞同：1
> 
> 时间：2012-11-15T18:53:26.383
> 
> 标签：php, model-view-controller, function, joomla

我的组件模型中有这个功能：

```
public function getTotProperty($user){
       $database = &JFactory::getDBO();
       $database->setQuery("SELECT created_by  FROM #__jea_properties WHERE created_by=$user");
       $results = $database->loadObjectList();

       return $results;             
} 
```

我需要从组件的模板中调用这个函数。没有 var `$user`，它可以工作：

```
echo $this->get('TotProperty'); 
```

但我需要`$user`在函数中传递 var

通常，非 Joomla 方法是 `getTotProperty($user);`

如何将变量`$user`从模型传递到模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:21:51.770

您需要先获取模型，然后直接在其上调用函数。这应该在视图中完成：

```
$model = $this->getModel();
echo $model->getTotProperty($user); 
```

# extjs - sencha mac 工作目录无法识别

> ID：13404199
> 
> 赞同：2
> 
> 时间：2012-11-15T18:53:30.073
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我在我的 Mac 上下载并安装了 Sencha Touch (http://www.sencha.com/products/touch/download/sencha-touch-2.1/)。每当我在终端输入 sencha 命令时，我都会得到：

```
[WARN] The current working directory (/Users/jmc72) is not a recognized Sencha SDK or application folder. Running in backwards compatible mode. 
```

我试图从不同的目录运行它并且输出是相同的。

我的路径看起来像：

```
/Applications/SenchaSDKTools:
/Library/Frameworks/Python.framework/Versions/2.7/bin:
/Library/Frameworks/Python.framework/Versions/2.7/bin:
/usr/local/bin:
/usr/bin:
/bin:
/usr/sbin:
/sbin:
/Applications/SenchaSDKTools:
/Users/jmc72/Sites/senchaSDK:
/usr/X11/bin 
```

我的 .bash_profile：

```
export PATH=/Applications/SenchaSDKTools:$PATH

export PATH=/Users/jmc72/Sites/senchaSDK:$PATH 
```

Sencha SDK（文档？）位于 /Users/jmc72/Sites/senchaSDK 和 SDKTools 位于 /Applications/SenchaSDKTools

编辑按照我创建 .senchsdk 文件的建议，但现在我收到以下错误：

```
sencha

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Cannot find module '/Users/sadmin/Downloads/sencha-touch-2.1.0-commercial/command/sencha.js'
    at Function._resolveFilename (module.js:332:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T23:14:35.150

您需要移动到您下载的 Sencha SDK 的目录：

```
cd /Users/jmc72/Sites/senchaSDK 
```

然后*运行*命令`sencha`。

**更新**

如果您在 SDK 文件夹中，您可能遇到的唯一其他问题是 SDK 工具版本。卸载当前版本并将其从路径中删除，然后从[此处](http://www.sencha.com/products/sencha-cmd/download)安装最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T07:46:46.477

在您的项目文件夹中创建一个文件 '.senchasdk' 并在其中简单地键入 sdk 并保存...在您的项目文件夹中确保您的框架文件（例如 sencha-touch.js、debug.js 等）在 sdk 文件夹中

转到命令行并再次键入 sencha 这次它应该可以工作......我多次遇到这个问题，因为 sencha 命令寻找一个 senchasdk 隐藏文件希望它有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T06:48:57.333

该错误是因为您的项目文件夹中没有 sencha sdk 目录...

首先使用 sencha generate app 创建一个虚拟项目，让我们说演示...转到演示文件夹，您会在那里找到一个 sdk 文件夹，将其复制并放入当前项目文件夹中，然后再次在项目文件夹中尝试 sencha 命令...

该错误的原因是因为当您在项目文件夹中键入 sencha 命令时，它会在 sdk 文件夹中搜索 node.js 文件，我认为路径是 sdk/command/node.js 或其他东西（不记得）......可能在您当前的 sdk 文件夹该文件不存在...

# javascript - 尝试在 Chrome 中打开 PDF 时出现“错误 321：ERR_INVALID_CHUNKED_ENCODING”

> ID：13404200
> 
> 赞同：3
> 
> 时间：2012-11-15T18:53:31.040
> 
> 标签：javascript, html, rest, jakarta-ee

我已经编写了 REST Web 服务来从服务器下载 PDF 文件并将响应作为 content-type=application/pdf 发送到浏览器。下面是 REST 服务 url，我们调用它来从服务器下载 PDF 文件是在浏览器中打开 PDF 文件时抛出“错误 321：ERR_INVALID_CHUNKED_ENCODING”

```
Window.open("https://www.somedomain.com/appservice/resource/pdf") 
```

相同的 Web 服务，如果我们不使用 SSL（使用 http）和使用 ip 、端口进行调用，则运行良好。下面是 REST 服务 URL，它可以正确显示 PDF 文件。

```
Window.open("http://ip:port/appservice/resource/pdf") 
```

对于从服务器下载图像，两种服务（Http 和 Https）都运行良好，只有 PDF 文件，我遇到了这个问题......

这个问题是因为 SSL 配置吗？如果是这样，它是如何为 Image 工作的？请让我知道，如何解决这个问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T06:32:43.190

我的问题通过将 Content-Length 添加到响应标头（文件的字节长度）得到解决。

```
response.setHeader("Content-Length", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:05:16.273

这可能是缓存控制问题。如果您可以控制发送回客户端的标头（如果您正在构建和流式传输 PDF，我猜您可以控制），请尝试将这些添加到 https 响应中，看看会发生什么：

```
response.setHeader("Cache-control", "");
response.setHeader("Pragma", ""); 
```

# c++ - 迭代器声明：“不包含类型”

> ID：13404201
> 
> 赞同：4
> 
> 时间：2012-11-15T18:53:32.157
> 
> 标签：c++, stl, iterator, queue

我很难理解为什么会出现此错误。我指的是 Josuttis 的 STL 书和其他资源，似乎我在下面声明我的迭代器的方式应该有效：

```
#ifndef LRU_H
#define LRU_H

#include <queue>
#include <iterator>

class LRU
{
public:

   LRU();                           // default constructor
   LRU(int);                        // constructor with argument
   ~LRU();                          // destructor 

   // Methods
   //
   void enqueue(int);               // add datum to the queue
   void dequeue();                  // remove datum from the queue
   void replace();                  // replacement algorithm
   void displayQueue() const;       // display contents of queue

private:

   // Member Data
   //
   const int MAX_SIZE;
   int m_currentCount;

   std::queue<int> m_buffer;
   std::queue<int>::const_iterator iter;

};

#endif 
```

但是我声明我的 const_iterator 的行会生成以下编译器错误：

```
In file included from main.cpp:10:
lru.h:41: error: 'const_iterator' in class 'std::queue<int, std::deque<int, std::allocator<int> > >' does not name a type
In file included from lru.cpp:10:
lru.h:41: error: 'const_iterator' in class 'std::queue<int, std::deque<int, std::allocator<int> > >' does not name a type
lru.cpp: In constructor 'LRU::LRU()':
lru.cpp:17: error: class 'LRU' does not have any field named 'm_pos'
lru.cpp: In constructor 'LRU::LRU(int)':
lru.cpp:23: error: class 'LRU' does not have any field named 'm_pos'

Compilation exited abnormally with code 1 at Thu Nov 15 10:47:31 
```

在导致错误的类中声明迭代器有什么特别之处吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T18:56:05.753

容器适配器[`std::queue`](http://en.cppreference.com/w/cpp/container/queue)没有可公开访问的迭代器。由于`std::queue<int>`隐藏在`LRU`实现中，您可以考虑使用 an[`std::deque<int>`](http://en.cppreference.com/w/cpp/container/deque)代替。`std::deque`是引擎盖下使用的默认容器`std::queue`，因此使用它不会导致性能损失。我认为只要您不在`LRU`界面中公开非队列操作，使用它是安全的。

# c - C - 减少循环量的冒泡排序

> ID：13404202
> 
> 赞同：0
> 
> 时间：2012-11-15T18:53:33.653
> 
> 标签：c, algorithm, sorting

我已经编写了对某个给定数组进行冒泡排序的函数，并在数组已经排序后停止执行。

```
int sort(int *arr, int size) {
    int i, j, temp, st = 1, count = 0;
    for(i = 0; (i < size - 1) && (st == 1); i++)
    {
        st = 0;
        for(j = 0; j < size - 1; j++)
        {
            if(arr[j] < arr[j + 1])
            {
                temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
                st = 1;
            }
            count++;
        }
    }
   return count;
} 
```

如您所见，当数组在 size^2 移动之前排序时，循环应该被打破。

但是，出了点问题，count 变量始终是 size * size，无论我传递什么数组，即使 {1, 2, 3, 4, 5} 给出相同的结果。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:01:23.223

有条件

```
if(arr[j] < arr[j + 1]) 
```

您正在按降序对数组进行排序。所以如果你通过它`[5, 4, 3, 2, 1]`，你会得到一个小于 的值`size*size`。

请注意，外部循环的每次迭代都会将一个元素移动到数组末尾的最终位置，因此您可以减少内部循环以仅运行

```
for(j = 0; j < size - 1 - i; j++) 
```

如果我们跑

```
#include <stdio.h>

int sort(int *arr, int size) {
    int i, j, temp, st = 1, count = 0;
    for(i = 0; (i < size - 1) && (st == 1); i++)
    {
        st = 0;
        for(j = 0; j < size - 1; j++)
        {
            if(arr[j] < arr[j + 1])
            {
                temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
                st = 1;
            }
            count++;
        }
    }
   return count;
}

int main(void) {
#ifdef ASCENDING
    int ar[] = { 1, 2, 3, 4, 5 };
#else
    int ar[] = { 5, 4, 3, 2, 1 };
#endif
    int i, ct = sort(ar, sizeof ar / sizeof ar[0]);
    printf("%d\n",ct);
    for(i = 0; i < (int)(sizeof ar / sizeof ar[0]); ++i) {
        printf("%d ", ar[i]);
    }
    printf("\n");
    return 0;
} 
```

编译时`ASCENDING`未定义，输出为

```
4
5 4 3 2 1 
```

因此外循环在第一次迭代后中断，因为数组已经按需要排序。用 编译时`-DASCENDING`，数组原本是升序的，需要完整的循环才能排序，即输出为

```
16
5 4 3 2 1 
```

（如果内部循环仅运行，则计数减少到 10 `j < size - 1 - i`）。

# git - git branch -a --no-merged master & 'git branch -r' 在两台机器上返回不同的远程分支

> ID：13404203
> 
> 赞同：0
> 
> 时间：2012-11-15T18:53:34.513
> 
> 标签：git

在我们构建每周包之前，我每周运行此命令以查看是否有任何未合并的分支。我主要是在远程/原点上寻找分支

```
git branch -a --no-merged master 
```

本周，我得到的结果是缺少我知道已被推回远程/原点的分支。如果另一个开发人员运行相同的命令，他会从 remotes/origin 中看到丢失的分支。我在我的 unix 共享上也有第二个存储库副本，这个副本也可以正常工作。

我注意到类似的问题

```
 git branch -r 
```

根据我在 git log 中看到的内容，我的存储库是最新的。丢失的树枝已经有几个星期了。还有其他东西可以阻止它保持最新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:54:05.017

这实际上是关于如何将提交推送到原点的一些问题。我让原始开发人员尝试从远程合并他的更改，尽管他看到了对远程提交的引用，但合并失败了。我会将其归结为其他一些 git 错误。

# java - 在 Java 中解密 Vigenère 密码

> ID：13404204
> 
> 赞同：2
> 
> 时间：2012-11-15T18:53:35.340
> 
> 标签：java, encryption, vigenere

我正在尝试使用 java 方法解密密码加密，但是我的代码似乎没有正确返回。我试图扭转加密过程，但我看不出我做错了什么。抱歉，我希望这不是一个愚蠢的问题。

```
public void decrypt()
{
    String cipherText = this.message;
    String key = this.KEY;
    String alphabet = "abcdefghijklmnopqrstuvwxyz"; 
    int alphabetSize = alphabet.length();
    int textSize = cipherText.length();
    int keySize = key.length();
    StringBuilder decryptedText = new StringBuilder(textSize);

    for (int i = 0; i < textSize; i++)
    {
        char encyrptChar = cipherText.charAt(i); // get the current character to be shifted
        char keyChar = key.charAt(i % keySize); // use key again if the end is reached
        int plainPos = alphabet.indexOf(encyrptChar); // plain character's position in alphabet string
         // decrypt the input text
        int keyPos = alphabet.indexOf(keyChar); // key character's position in alphabet
        int shiftedPos = plainPos-keyPos;
        shiftedPos += alphabetSize;
        decryptedText.append(alphabet.charAt(shiftedPos));
    }

    this.message =  decryptedText.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:57:39.973

采取了这些措施：

```
 char encyrptChar = cipherText.charAt(i); // get the current character to be shifted
    char keyChar = key.charAt(i % keySize); // use key again if the end is reached
    int plainPos = alphabet.indexOf(encyrptChar); // plain character's position in alphabet string

    int keyPos = alphabet.indexOf(keyChar); // key character's position in alphabet
            int shiftedPos = plainPos-keyPos;
            shiftedPos += alphabetSize; 
```

有几个问题。

1.  `plainPos`实际上是一个加密值，不要混淆它们。
2.  `plainPos-keyPos`应该等于解密后的值。然后，您应该通过`alphabetSize`, 对其进行修改以获得正确的值。

处理命名约定时要小心。这真的会导致一些问题......

除此之外，我认为您的代码实际上工作正常。我当然看不出任何问题。[通过在线加密器/解密器](http://sharkysoft.com/misc/vigenere/)尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:37:45.950

```
shiftedPos += alphabetSize; 
```

你为何这样做？我认为只有在 shiftPos<0 时才需要这样做。

```
if(shiftedPos<0)
   shiftedPos += alphabetSize; 
```

这是因为如果 a=0 且 b=1，(ab)=-1 表示 z。要使用整个 ASCII 集，您只需以正确的顺序将 alpabeth 字符串和大小替换为所有 ASCII 字符。

# asp.net - ASP.NET onclick 事件在页面顶部呈现 HTML

> ID：13404206
> 
> 赞同：1
> 
> 时间：2012-11-15T18:53:47.067
> 
> 标签：asp.net

这是我第一次使用 ASP，我有点搞砸了。我正在编写一个从数据库中获取信息并将其显示在表格中的界面。为此，我使用了一个 asp 按钮，一旦我单击 onClick 事件中的按钮，我就从 asp 文本框中获取文本，我连接到数据库，执行查询并将 html 打印到主页。

问题是，一旦我单击按钮，生成的 html 将呈现在页面顶部，文本框和按钮仍保留在下方，迫使我向下滚动以进行另一次搜索。

如果有帮助，这是我的 onClick 代码：

```
If Not SearchBox.Text Is Nothing Then

        Dim conn = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;" &
                                      "Data Source= C:\Users\user\Documents\Visual Studio 2012\Projects\Aplicación UNED\Aplicación UNED\App_Data\Libros.mdb")

        Dim query = New OleDbCommand("SELECT * FROM Libros WHERE Titulo LIKE '%" & SearchBox.Text & "%'", conn)

        Dim adapter = New OleDbDataAdapter(query)

        Dim res = New DataSet()
        adapter.Fill(res, "Libros")
        Response.Write("<table class='data_table'>")
        Response.Write("<thead><tr class='data_table_info'><th scope='col'>Titulo</th><th scope='col'>Resumen</th><th scope='col'>Categoria</th><th scope='col'>ISBN</th><th scope='col'>PrecioConIVA</th><th scope='col'>EnlaceCompra</th></tr></thead>")
        For Each Fila In res.Tables("Libros").Rows
            Response.Write("<tr><td>" & Fila("Titulo") & "</td><td>" & Fila("Resumen") & "</td><td>" & Fila("Categoria") & "</td><td>" & Fila("ISBN") & "</td><td>" & Fila("PrecioConIVA") & "</td><td>" & Fila("EnlaceCompra") + "</td></tr>")
        Next
        Response.Write("</table>")
        conn.Close()
    End If
End Sub 
```

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:57:14.313

不要使用 Response.Write，而是在按钮下方引入 Literal 控件，并将生成的文本分配给 Literal 的 Text 属性。这将确保您的内容显示在您的按钮下方。

假设您有一个名为 SearchBox 的 ASP.NET 文本框，`<asp:Textbox id="SearchBox" runat="server" />`请将文字放在其下方

```
<asp:Textbox id="SearchBox" runat="server" />
<br />
<asp:Literal id="ResultHtml" runat="server" /> 
```

并在您后面的代码中，将`Response.Write`调用替换为

```
Dim sb = new StringBuilder("<table class='data_table'>")
sb.Append("<thead><tr class='data_table_info'><th scope='col'>Titulo</th><th scope='col'>Resumen</th><th scope='col'>Categoria</th><th scope='col'>ISBN</th><th scope='col'>PrecioConIVA</th><th scope='col'>EnlaceCompra</th></tr></thead>")

      For Each Fila In res.Tables("Libros").Rows
          sb.Append("<tr><td>" & Fila("Titulo") & "</td><td>" & Fila("Resumen") & "</td><td>" & Fila("Categoria") & "</td><td>" & Fila("ISBN") & "</td><td>" & Fila("PrecioConIVA") & "</td><td>" & Fila("EnlaceCompra") + "</td></tr>")
      Next

sb.Append("</table>")    
ResultHtml.Text = sb.ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:59:17.910

在页面呈现到响应之前，您正在将 html 写入响应。

# functional-programming - 在纯函数式语言中，是否有一种算法可以得到反函数？

> ID：13404208
> 
> 赞同：106
> 
> 时间：2012-11-15T18:53:52.390
> 
> 标签：functional-programming

在像 Haskell 这样的纯函数式语言中，当它是双射的时，是否有一种算法来获得函数的逆（编辑）？有没有一种特定的方法来编程你的功能呢？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-11-15T19:25:47.090

在某些情况下，是的！有一篇漂亮的论文叫做[免费双向化！](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.143.3248&rep=rep1&type=pdf)它讨论了一些情况——当你的函数足够多态时——在可能的情况下，完全自动地推导出一个反函数。（它还讨论了当函数不是多态时是什么使问题变得困难。）

如果你的函数是可逆的，你得到的是逆函数（带有虚假输入）；在其他情况下，您会得到一个尝试“合并”旧输入值和新输出值的函数。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-15T20:21:34.437

不，一般来说是不可能的。

证明：考虑类型的双射函数

```
type F = [Bit] -> [Bit] 
```

和

```
data Bit = B0 | B1 
```

假设我们有一个`inv :: F -> F`这样的逆变器`inv f . f ≡ id`。假设我们已经测试了它的功能`f = id`，通过确认

```
inv f (repeat B0) -> (B0 : ls) 
```

由于`B0`输出中的第一个必须在某个有限时间之后出现，因此我们对实际评估我们的测试输入以获得此结果`n`的深度`inv`以及它可以调用的次数都有一个上限`f`。现在定义一个函数族

```
g j (B1 : B0 : ... (n+j times) ... B0 : ls)
   = B0 : ... (n+j times) ... B0 : B1 : ls
g j (B0 : ... (n+j times) ... B0 : B1 : ls)
   = B1 : B0 : ... (n+j times) ... B0 : ls
g j l = l 
```

显然，对于所有`0<j≤n`，`g j`是双射，实际上是自逆。所以我们应该能够确认

```
inv (g j) (replicate (n+j) B0 ++ B1 : repeat B0) -> (B1 : ls) 
```

但要实现这一点，`inv (g j)`就需要

*   评估`g j (B1 : repeat B0)`深度`n+j > n`
*   评估`head $ g j l`至少`n`不同的列表匹配`replicate (n+j) B0 ++ B1 : ls`

到目前为止，至少其中一个与`g j`没有区别`f`，并且由于`inv f`没有进行任何这些评估，`inv`因此不可能将其区分开来——除非自己进行一些运行时测量，这只能在`IO Monad`.

                                                                                                                                   ⬜</p>

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-15T18:58:26.543

你可以在 wikipedia 上查找它，它被称为[Reversible Computing](http://en.wikipedia.org/wiki/Reversible_computing)。

通常，您不能这样做，并且没有任何功能语言具有该选项。例如：

```
f :: a -> Int
f _ = 1 
```

该函数没有逆函数。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-11-16T03:54:02.187

不是在大多数函数式语言中，而是在逻辑编程或关系编程中，您定义的大多数函数实际上不是函数而是“关系”，并且可以双向使用。参见例如 prolog 或 kanren。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-11-15T20:52:24.987

像这样的任务几乎总是无法确定的。您可以为某些特定功能提供解决方案，但不是一般的。

在这里，您甚至无法识别哪些函数具有逆函数。引用[Barendregt，HP Lambda 演算：它的语法和语义。北荷兰，阿姆斯特丹（1984）](http://mathgate.info/cebrown/notes/barendregt.php)：

> 如果一组 lambda 项既不是空集也不是满集，则它是非平凡的。如果 A 和 B 是在 (beta) 等式下封闭的两个非平凡的、不相交的 lambda 项集，则 A 和 B 是递归不可分的。

让我们将 A 视为表示可逆函数的 lambda 项的集合，而 B 是其余的。两者都是非空的，并且在 beta 相等下是封闭的。所以不可能决定一个函数是否可逆。

（这适用于无类型的 lambda 演算。TBH 当我们知道要反转的函数的类型时，我不知道参数是否可以直接适应有类型的 lambda 演算。但我很确定它会是相似的。）

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-11-15T21:59:04.667

如果您可以枚举函数的域并可以比较范围内的元素是否相等，那么您可以 - 以一种相当直接的方式。枚举我的意思是拥有所有可用元素的列表。我会坚持使用 Haskell，因为我不知道 Ocaml（甚至不知道如何正确地大写它;-)

你想要做的是遍历域的元素，看看它们是否等于你试图反转的范围的元素，然后取第一个有效的元素：

```
inv :: Eq b => [a] -> (a -> b) -> (b -> a)
inv domain f b = head [ a | a <- domain, f a == b ] 
```

既然你已经说过这`f`是一个双射，那么肯定只有一个这样的元素。当然，诀窍是确保您的域枚举实际上*在有限时间内*到达所有元素。如果您试图将双射从 to 反转`Integer`，则`Integer`using`[0,1 ..] ++ [-1,-2 ..]`将不起作用，因为您永远不会得到负数。具体来说，`inv ([0,1 ..] ++ [-1,-2 ..]) (+1) (-3)`永远不会产生价值。

但是，`0 : concatMap (\x -> [x,-x]) [1..]`将起作用，因为它按以下顺序遍历整数`[0,1,-1,2,-2,3,-3, and so on]`。确实`inv (0 : concatMap (\x -> [x,-x]) [1..]) (+1) (-3)`及时退货`-4`！

[Control.Monad.Omega](http://hackage.haskell.org/packages/archive/control-monad-omega/0.3/doc/html/Control-Monad-Omega.html)包可以帮助您以一种很好的方式遍历元组列表等；我敢肯定还有更多这样的包——但我不知道。

* * *

当然，这种方法是相当低俗和蛮力的，更不用说丑陋和低效了！因此，我将以对您问题的最后一部分的一些评论结束，即如何“编写”双射。Haskell 的类型系统不能证明一个函数是双射的——你真的想要像 Agda 这样的东西——但它愿意相信你。

（警告：未经测试的代码如下）

那么你可以在类型和`Bijection`之间定义 s的数据类型吗：`a``b`

```
data Bi a b = Bi {
    apply :: a -> b,
    invert :: b -> a 
} 
```

以及任意数量的常量（您可以说“我*知道*它们是双射！”），例如：

```
notBi :: Bi Bool Bool
notBi = Bi not not

add1Bi :: Bi Integer Integer
add1Bi = Bi (+1) (subtract 1) 
```

和几个智能组合器，例如：

```
idBi :: Bi a a 
idBi = Bi id id

invertBi :: Bi a b -> Bi b a
invertBi (Bi a i) = (Bi i a)

composeBi :: Bi a b -> Bi b c -> Bi a c
composeBi (Bi a1 i1) (Bi a2 i2) = Bi (a2 . a1) (i1 . i2)

mapBi :: Bi a b -> Bi [a] [b]
mapBi (Bi a i) = Bi (map a) (map i)

bruteForceBi :: Eq b => [a] -> (a -> b) -> Bi a b
bruteForceBi domain f = Bi f (inv domain f) 
```

我认为您可以这样做`invert (mapBi add1Bi) [1,5,6]`并获得`[0,4,5]`. 如果您以明智的方式选择组合器，我认为您必须`Bi`手动编写常量的次数可能非常有限。

毕竟，如果你知道一个函数是一个双射，你会希望在你的脑海里有一个事实的证明草图，Curry-Howard 同构应该能够变成一个程序:-)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-11-15T21:58:11.353

我最近一直在处理这样的问题，不，我会说（a）在很多情况下并不难，但是（b）它根本没有效率。

基本上，假设您有`f :: a -> b`，这`f`确实是一个问题。`f' :: b -> a`您可以以非常愚蠢的方式计算逆：

```
import Data.List

-- | Class for types whose values are recursively enumerable.
class Enumerable a where
    -- | Produce the list of all values of type @a@.
    enumerate :: [a]

 -- | Note, this is only guaranteed to terminate if @f@ is a bijection!
invert :: (Enumerable a, Eq b) => (a -> b) -> b -> Maybe a
invert f b = find (\a -> f a == b) enumerate 
```

如果`f`是一个双射并`enumerate`真正产生 的所有值`a`，那么您最终会遇到`a`这样的`f a == b`。

可以轻松制作具有 a`Bounded`和实例的类型。也可以制作成对的类型：`Enum``RecursivelyEnumerable``Enumerable``Enumerable`

```
instance (Enumerable a, Enumerable b) => Enumerable (a, b) where
    enumerate = crossWith (,) enumerate enumerate

crossWith :: (a -> b -> c) -> [a] -> [b] -> [c]
crossWith f _ [] = []
crossWith f [] _ = []
crossWith f (x0:xs) (y0:ys) =
    f x0 y0 : interleave (map (f x0) ys) 
                         (interleave (map (flip f y0) xs)
                                     (crossWith f xs ys))

interleave :: [a] -> [a] -> [a]
interleave xs [] = xs
interleave [] ys = []
interleave (x:xs) ys = x : interleave ys xs 
```

类型的析取也是如此`Enumerable`：

```
instance (Enumerable a, Enumerable b) => Enumerable (Either a b) where
    enumerate = enumerateEither enumerate enumerate

enumerateEither :: [a] -> [b] -> [Either a b]
enumerateEither [] ys = map Right ys
enumerateEither xs [] = map Left xs
enumerateEither (x:xs) (y:ys) = Left x : Right y : enumerateEither xs ys 
```

我们可以为任何代数数据类型执行此操作，`(,)`并且`Either`可能意味着我们可以为任何代数数据类型执行此操作。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-11-15T19:00:13.763

不是每个函数都有逆函数。如果您将讨论限制在一对一的函数上，那么反转任意函数的能力就可以破解任何密码系统。我们不得不希望这是不可行的，即使在理论上！

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-05-23T21:07:31.250

在某些情况下，可以通过将双射函数转换为符号表示来找到它的逆函数。基于[这个例子](https://stackoverflow.com/questions/9906628/equality-of-functions-in-haskell)，我编写了这个 Haskell 程序来查找一些简单多项式函数的逆：

```
bijective_function x = x*2+1

main = do
    print $ bijective_function 3
    print $ inverse_function bijective_function (bijective_function 3)

data Expr = X | Const Double |
            Plus Expr Expr | Subtract Expr Expr | Mult Expr Expr | Div Expr Expr |
            Negate Expr | Inverse Expr |
            Exp Expr | Log Expr | Sin Expr | Atanh Expr | Sinh Expr | Acosh Expr | Cosh Expr | Tan Expr | Cos Expr |Asinh Expr|Atan Expr|Acos Expr|Asin Expr|Abs Expr|Signum Expr|Integer
       deriving (Show, Eq)

instance Num Expr where
    (+) = Plus
    (-) = Subtract
    (*) = Mult
    abs = Abs
    signum = Signum
    negate = Negate
    fromInteger a = Const $ fromIntegral a

instance Fractional Expr where
    recip = Inverse
    fromRational a = Const $ realToFrac a
    (/) = Div

instance Floating Expr where
    pi = Const pi
    exp = Exp
    log = Log
    sin = Sin
    atanh = Atanh
    sinh = Sinh
    cosh = Cosh
    acosh = Acosh
    cos = Cos
    tan = Tan
    asin = Asin
    acos = Acos
    atan = Atan
    asinh = Asinh

fromFunction f = f X

toFunction :: Expr -> (Double -> Double)
toFunction X = \x -> x
toFunction (Negate a) = \a -> (negate a)
toFunction (Const a) = const a
toFunction (Plus a b) = \x -> (toFunction a x) + (toFunction b x)
toFunction (Subtract a b) = \x -> (toFunction a x) - (toFunction b x)
toFunction (Mult a b) = \x -> (toFunction a x) * (toFunction b x)
toFunction (Div a b) = \x -> (toFunction a x) / (toFunction b x)

with_function func x = toFunction $ func $ fromFunction x

simplify X = X
simplify (Div (Const a) (Const b)) = Const (a/b)
simplify (Mult (Const a) (Const b)) | a == 0 || b == 0 = 0 | otherwise = Const (a*b)
simplify (Negate (Negate a)) = simplify a
simplify (Subtract a b) = simplify ( Plus (simplify a) (Negate (simplify b)) )
simplify (Div a b) | a == b = Const 1.0 | otherwise = simplify (Div (simplify a) (simplify b))
simplify (Mult a b) = simplify (Mult (simplify a) (simplify b))
simplify (Const a) = Const a
simplify (Plus (Const a) (Const b)) = Const (a+b)
simplify (Plus a (Const b)) = simplify (Plus (Const b) (simplify a))
simplify (Plus (Mult (Const a) X) (Mult (Const b) X)) = (simplify (Mult (Const (a+b)) X))
simplify (Plus (Const a) b) = simplify (Plus (simplify b) (Const a))
simplify (Plus X a) = simplify (Plus (Mult 1 X) (simplify a))
simplify (Plus a X) = simplify (Plus (Mult 1 X) (simplify a))
simplify (Plus a b) = (simplify (Plus (simplify a) (simplify b)))
simplify a = a

inverse X = X
inverse (Const a) = simplify (Const a)
inverse (Mult (Const a) (Const b)) = Const (a * b)
inverse (Mult (Const a) X) = (Div X (Const a))
inverse (Plus X (Const a)) = (Subtract X (Const a))
inverse (Negate x) = Negate (inverse x)
inverse a = inverse (simplify a)

inverse_function x = with_function inverse x 
```

这个例子只适用于算术表达式，但它可能也可以推广到使用列表。Haskell中还有几种[计算机代数系统的](https://stackoverflow.com/questions/3295345/haskell-library-like-sympy)实现，可用于找到双射函数的逆。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-11-15T18:57:04.360

不，并非所有函数都具有逆函数。例如，这个函数的逆函数是什么？

```
f x = 1 
```

# web-services - Rally 网络服务 - 身份验证

> ID：13404213
> 
> 赞同：0
> 
> 时间：2012-11-15T18:54:25.047
> 
> 标签：web-services, rally

Rally 是否提供任何网络服务来进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:38:10.153

您可以对我们的标准 WSAPI 使用基本身份验证和查询。

[这](https://github.com/RallyTools/RallyRestToolkitForJava/blame/702c2cd4bcfe0c6abc665736d58cfed376e84616/src/com/rallydev/rest/RallyRestApi.java#L78)是我们在 GitHub 中进行 Java Rest Api 身份验证的示例。

# java - opencsv 转义单引号和双引号

> ID：13404214
> 
> 赞同：1
> 
> 时间：2012-11-15T18:54:29.317
> 
> 标签：java, opencsv

我正在使用 opencsv 读取 csv 文件。有时 csv 文件中有单引号或双引号。我如何在不更改 csv 文件本身的数据的情况下读取它们。

现在，如果我用两个单引号替换一个单引号，它可以正常工作，与双引号相同，用两个替换一个单引号并且它可以工作。但我不想接触源文件。

访问代码如下

```
CSVReader reader = new CSVReader(new InputStreamReader(new FileInputStream(file), "UTF-8"), delimiter,'\"',0);
data = a1;b1;c1;hello"world;d1;e1
       a2;b3;c2;hello"world;d2;e2
; is the delimiter 
```

其结果是跳过也包含双引号的下一行，插入所有奇数行，跳过偶数行

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:34:57.497

最终使用 javacsv。没有任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-22T13:02:40.580

解决方案 1：您可以做的一件可能的事情，假设您不想在输出文件中包含双课程/单课程。

1.  阅读完整的文件并用空格替换所有不需要的特殊字符。（使用正则表达式很简单）
2.  现在使用 CSVReader 读取文件。

解决方案 2：如果要保留所有特殊字符，请在特殊字符前加上“\”反斜杠。然后阅读它。

# javascript - 任何滑块在 IE9 的第二个循环中不播放视频

> ID：13404230
> 
> 赞同：0
> 
> 时间：2012-11-15T18:55:15.020
> 
> 标签：javascript, html5-video, anythingslider

我在无限幻灯片中使用任何滑块，在一张幻灯片中使用 HTML 5 视频。目标是每次幻灯片循环播放视频。问题出在 IE9 中，它似乎打破了第二个循环上的滑块。视频不播放也不前进到下一张幻灯片，它只是冻结。

```
onSlideInit: function (e, slider) {
                var vid = slider.$lastPage.find('video');
                if (vid.length && typeof (vid[0].pause) !== 'undefined') {
                    vid[0].pause();
                }

            },
            onSlideBegin: function (e, slider) { },
            onSlideComplete: function (slider) {
                // make current slide conform to user define data-duration value
                var video = slider.$lastPage.find('video');
                console.log(video)
                if (video.length > 0) {
                    video[0].currentTime = 0;
                }
                if (hasVideoSupport == "false") {
                    jwplayer("container").setup({
                        file: video,
                        flashplayer: "http://player.longtailvideo.com/player.swf",
                        height: 400,
                        width: 500
                    });
                    jwplayer().play()
                    slider.startStop(false);
                    onComplete(function () { slider.startStop(true) })

                } else {
                    var vid = slider.$currentPage.find('video');
                    if (vid.length > 0) {
                        console.log(vid);
                        vid[0].play();
                    }

                }

            }, 
```

谢谢您的帮助

# actionscript-3 - 如何在 ActionScript 3 中从 Socket 读取 UTF-8 字符串

> ID：13404242
> 
> 赞同：0
> 
> 时间：2012-11-15T18:55:53.287
> 
> 标签：actionscript-3, sockets, utf-8

UTF-8 每个字符的字节数不同。我怎样才能了解我可以读取多少字节`flash.net.Socket.readUTFBytes(length:uint):String`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:27:04.107

您的对象中有一个可用的属性`Socket`，其中包含所需的信息：

```
mySocket.addEventListener(ProgressEvent.SOCKET_DATA, _onSocketDataHandler);

private function _onSocketDataHandler(e:ProgressEvent):void
{
    var str:String = mySocket.readUTFBytes(mySocket.bytesAvailable);

    trace(str);
} 
```

# ruby-on-rails - Ruby / Rails 命名约定

> ID：13404243
> 
> 赞同：5
> 
> 时间：2012-11-15T18:55:55.177
> 
> 标签：ruby-on-rails, ruby, naming-conventions

如果我生成一个名为 的脚手架`"product"`，当我在编写应用程序时使用它们时，它们之间有什么区别？`@products`, `@product`, `@Product`, `@Products`, `Products`, `Product`, `product`, and `products`（我很确定这些不是全部使用，但它至少应该给出我所指的概念）。

我似乎无法找到`@`/capitalization/plurality 的每种组合含义的简单解释。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T19:05:26.003

你可以阅读 [Ruby style guide](https://github.com/bbatsov/ruby-style-guide)和[Rails style guide](https://github.com/bbatsov/rails-style-guide)，你会得到你的问题的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T19:04:54.127

唯一的保留字大写`Product`，这引用了对象模型。例如，要获取所有产品并将其保存在`@products`您将执行的变量中：

```
@products = Product.all
@product = Product.find(1) 
```

如果您取消`@`了“产品”的签名，那么它将仅保存为局部变量，您的视图将无法访问它。

在此示例中`@products`， 和`@product`是您在控制器中声明的变量。你可以只使用：

```
@lotsofproducts = Product.all 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T19:06:40.730

对于 Ruby 命名约定，您可以在此处查看： [http ://rubylearning.com/satishtalim/ruby_names.html](http://rubylearning.com/satishtalim/ruby_names.html)

至于 Rails 的命名约定，它是语言：模型 - 单数，控制器 - 复数，DatabaseTable - 复数（snake_case），视图（目录名称） - 复数。您可以从[http://guides.rubyonrails.org/ 查看](http://guides.rubyonrails.org/)

# action - Struts 1.3：什么时候使用 DispatchActions 比使用 Action 更好？

> ID：13404244
> 
> 赞同：0
> 
> 时间：2012-11-15T18:55:57.870
> 
> 标签：action, struts-1, dispatch, struts1

在什么情况下使用 DispatchActions 比使用 Action 更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:55:37.050

当您需要在同一个 struts 模块中使用类似表单 bean 的许多类似操作时（例如，`create` `read` `update` `delete`对同一对象的 CRUD 操作）。使用plain `Action`，您将需要4 个带有导入、标题、方法签名的Struts 动作文件：

```
// CreateAction.java
package com.example.package;
// imports and header
public class CreateAction extends Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }
}

// ReadAction.java
package com.example.package;
// imports and header
public class ReadAction extends Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }
}

// UpdateAction.java
package com.example.package;
// imports and header
public class UpdateAction extends Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }
}

// DeleteAction.java
package com.example.package;
// imports and header
public class DeleteAction extends Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }
} 
```

此外，您还需要 4 个动作映射`struts-config.xml`（当然，如果您不使用[注释](http://code.google.com/p/strutsannotations/)）。但实际上它们只会调用下一层代码（manager/DAO/etc），它独立于 Web（来自请求/响应/映射类），因此可以通过单元测试进行测试，从而实现测试驱动开发和代码可重用性。所有四个类仅在 1-2 行代码上有所不同。其余的都是样板，一次又一次地重复。

通过在 HTTP 请求中添加附加参数或重用现有参数（换句话说：在 JSP 表单标记中），您可以将所有 4 个操作打包在一个类中，例如`EventDispatchAction`：

```
// CRUDAction.java
package com.example.package;
// imports and header
public class CRUDAction extends EventDispatchAction {
    public ActionForward create(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }

    public ActionForward read(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }

    public ActionForward update(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }

    public ActionForward delete(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {
        // actual code
    }
} 
```

这需要更少的样板。为了告诉您要执行哪个操作，您可以使用提交按钮：

```
<html:submit property="update" value="Save" />
<html:submit property="delete" value="Delete" /> 
```

# winrt-xaml - XAML 中的 Metro（Windows 应用商店应用）日期时间格式

> ID：13404247
> 
> 赞同：7
> 
> 时间：2012-11-15T18:56:04.597
> 
> 标签：winrt-xaml

我有一个 DateTime 属性。这是绑定到一个文本框

```
<TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding StartDateString, Mode=TwoWay}" x:Name="date" /> 
```

在 WPF 中，可以使用以下语法格式化 DateTime 输出

```
<TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding StartDateString, FormatString="dd.mm.yyyy" Mode=TwoWay}" x:Name="date" /> 
```

在 Metro 应用程序（winrt ... Windows 应用商店应用程序...现在如何调用它？）中，FormatString 属性是不可能的。

还有另一种方法可以在 xaml 文件中进行格式设置吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T19:12:03.093

你是对的。WinRT中没有`FormatString`参数。您可能应该使用值转换器。这是一个应该做你想做的事情的链接：

[http://blogs.u2u.be/diederik/post/2012/03/19/A-StringFormat-converter-for-Windows-8-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/03/19/A-StringFormat-converter-for-Windows-8-Metro.aspx)

# sql - 创建视图以显示来自众多选择语句的字段

> ID：13404249
> 
> 赞同：0
> 
> 时间：2012-11-15T18:56:05.877
> 
> 标签：sql, views

我有一堆单独的小选择查询，我需要将它们放入一个视图或两个视图中，最终可能会加入并需要建议。我正在使用第三方临时应用程序，它不能很好地处理存储过程，因此临时表不适合。有人对如何实现这一点有任何建议吗？以下是查询：

```
select count(cmrckid)as TotalRDIs
FROM  tblCMRCK 

select count(AccountID)as TotalMerchants
FROM  tblAccounts

select count(AccountID)as TotalActiveMerchants
FROM  tblAccounts
where inactive = 0

select count(AccountID)as TotalInActiveMerchants
FROM  tblAccounts
where inactive = 1

select count(AccountID)as TotalwithRDIs
FROM  [tblAccounts] a WITH (NOLOCK) inner join
      [tblcmrck] c WITH (NOLOCK) on a.configid=c.configid and a.accountid=c.acctid

select COUNT(AccountID) as ActivewithRDIs
FROM  [tblAccounts] a WITH (NOLOCK) inner join
      [tblcmrck] c WITH (NOLOCK) on a.configid=c.configid and a.accountid=c.acctid 
      where a.Inactive = 0

select COUNT(AccountID) as ActivewithoutRDIs
FROM  [tblAccounts] a WITH (NOLOCK) 
      where a.inactive = 0 and a.AccountID not in (select AcctID from tblCMRCK)

--select 'Total Active Merchants' / 'Total Merchants' as 'PctActive'
--from #tmptable

--select 'Total InActive Merchants' / 'Total Merchants' as 'PctInActive'
--from #tmpTableExample2

--select 'Active with RDIs' / 'Total Merchants' as 'PctActivewithRDIs'
--FROM  #tmpTableExample

--select 'Active without RDIs' / 'Total Merchants' as 'PctActivewithoutRDIs'
--FROM  #tmpTableExample 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:22:32.127

我会尝试更像这样的东西：

```
SELECT 
    TotalMerchants, 
    TotalRDIs,
    inactive, 
    COUNT(DISTINCT AccountID) AS totalAccounts,
    COUNT(DISTINCT AccountID) / TotalMerchants AS pct,
    SUM(CASE WHEN c IS NULL THEN 0 ELSE 1 END) AS isInRDI,
    SUM(CASE WHEN c IS NULL THEN 0 ELSE 1 END)  / TotalMerchants AS pctRDI
FROM
    (SELECT 
        COUNT(DISTINCT AccountID) AS TotalMerchants
    FROM  
        tblAccounts) tm,
    (SELECT 
        COUNT(DISTINCT AcctID) AS  TotalRDIs 
    FROM 
        tblCMRCK) tr,
    tblAccounts  a LEFT OUTER JOIN
    tblCMRCK c ON
    a.configid=c.configid AND 
    a.accountid=c.acctid
GROUP BY
    TotalMerchants, 
    TotalRDIs,
    inactive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:17:03.783

这绝对可以组合：

```
select count(AccountID)as TotalActiveMerchants
FROM  tblAccounts
where inactive = 0

select count(AccountID)as TotalInActiveMerchants
FROM  tblAccounts
where inactive = 1 
```

进入：

```
SELECT CASE
          WHEN inactive = 0 THEN TotalActiveMerchants
          ELSE TotalInactiveMerchants
        end              AS metric,
        Count(accountid) AS value
FROM   tblaccounts
WHERE  inactive IN ( 0, 1 )
GROUP  BY inactive 
```

然后，您可以简单地将指标堆叠到一个语句中：

```
SELECT 'TotalRDIs' AS metric,
       Count(cmrckid) AS value
FROM   tblcmrck
UNION ALL
SELECT 'TotalMerchants' AS metric,
       Count(accountid)
FROM   tblaccounts
UNION ALL
SELECT CASE
          WHEN inactive = 0 THEN TotalActiveMerchants
          ELSE TotalInactiveMerchants
        end              AS metric,
        Count(accountid) AS value
FROM   tblaccounts
WHERE  inactive IN ( 0, 1 )
GROUP  BY inactive
... 
```

这看起来像：

```
度量值
总 RDI 0
总商户 0
TotalActiveMerchants 0
不活跃商家总数 0
...
```

# node.js - nodejs / grunt usemin 插件

> ID：13404252
> 
> 赞同：3
> 
> 时间：2012-11-15T18:56:24.273
> 
> 标签：node.js, gruntjs, yeoman, grunt-usemin

我正在使用 yeoman 和 grunt 来构建我的项目和 grunt-css 插件，用于使用 grunt.js 内置的“cssmin”而不是“css”

## 索引.html

```
<!-- build:css styles/styles.css -->
<link rel="stylesheet" href="styles/main.css"/>
<!-- endbuild -->

<!-- build:js scripts/scripts.js -->
<script src="scripts/vendor/jquery.min.js"></script>
<script src="scripts/vendor/handlebars-1.0.0.beta.6.js"></script>
<script src="scripts/vendor/ember-1.0.pre.min.js"></script>
<script src="scripts/main.js"></script>
<script src="scripts/routes/app-router.js"></script>
<script src="scripts/store.js"></script>
<script src="scripts/controllers/application-controller.js"></script>
<script src="scripts/models/application-model.js"></script>
<script src="scripts/views/application-view.js"></script>
<!-- endbuild --> 
```

## Gruntfile.js

```
rev: {
      js: 'dist/scripts/**/*.js', // scripts/**/*.js
      css: 'dist/styles/**/*.css', // styles/**/*.css
      img: 'dist/images/**' // images/**
},
'usemin-handler': {
      html: 'index.html'
},
usemin: {
      html: ['dist/**/*.html'], // **/*.html
      css: ['dist/**/*.css'] // **/*.css
},
rjs: {
      // no minification, is done by the min task
      optimize: 'none',
      baseUrl: './scripts',
      wrap: true
},
cssmin: {
      dist: {
        src: [
          'app/styles/**/*.css'
        ],
        dest: 'dist/styles/styles.css'
      }
},
concat: {
      dist: {
        src: [
          'app/scripts/**/*.js'
        ],
        dest: 'dist/scripts/scripts.js',
        separator: '/**********/\n'
      }
},
min: {
      dist: {
        src: [
          'dist/scripts/scripts.js'
        ],
        dest: 'dist/scripts/scripts.js',
        separator: '/**********/\n'
      }
} 
```

那么构建项目结构是：

```
dist/
|__scripts/
|____04216377.scripts.js
|__styles/
|____d41d8cd9.styles.css
|__index.html 
```

## 然后输出 index.html 文件

```
<link rel="stylesheet" href="styles/styles.css"/?>

<script src="scripts/04216377.scripts.js"></script> 
```

如您所见，除了重命名 index.html 中应为**'styles/d41d8cd9.styles.css 的修订后的样式外，一切正常。有人知道为什么吗？问号是“？” 在行正常？？？**

* * *

注意：有关更多信息，这将在我的控制台中输出（无错误）运行“rev：js”（rev）任务 dist/scripts/scripts.js --- 04216377.scripts.js

运行 "rev:css" (rev) 任务 dist/styles/styles.css --- d41d8cd9.styles.css

运行“rev:img”(rev) 任务

运行“usemin:html”（usemin）任务

usemin:html - dist/index.html 脚本/scripts.js

```
was <script src="scripts/scripts.js"></script>
now <script src="scripts/04216377.scripts.js"></script> 
```

运行“usemin:css”（usemin）任务

usemin:css - dist/styles/d41d8cd9.styles.css

**并且没有重命名！非常感谢你们！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T11:22:36.837

我发现了问题。我有 Yeoman 0.94 版本，需要修复 usemin 任务。at的`?`字符`<link>`是一个正则表达式错误。您应该重写此表达式，因为 css 重命名失败。[在https://github.com/yeoman/yeoman/issues/586](https://github.com/yeoman/yeoman/issues/586)找到了正确的解决方法

代替

```
content.replace(block, indent + '<link rel="stylesheet" href="' + target + '"\/?>'); 
```

和

```
content.replace(block, indent + '<link rel="stylesheet" href="' + target + '"/>'); 
```

如果应用更改，则此问题已解决。注意：`usemin.js`在`/usr/local/lib/node_modules/yeoman/tasks`（在 OSX 上）应用补丁

# google-maps-api-3 - 如何在地图 api v3 中循环加载已加载的 KML？

> ID：13404254
> 
> 赞同：0
> 
> 时间：2012-11-15T18:56:27.307
> 
> 标签：google-maps-api-3, kml

我需要获取从 KML 加载的标记、叠加层等，但我不明白如何。
这里[https://groups.google.com/forum/?fromgroups=#!topic/umapper/YCfHEWaCxMc](https://groups.google.com/forum/?fromgroups=#!topic/umapper/YCfHEWaCxMc)写着我可以通过 KMLayer 循环。但我不能！

我以这种方式加载 KML：

```
var nyLayer = new google.maps.KmlLayer("http://www.searcharoo.net/SearchKml/newyork.kml", { suppressInfoWindows: true, map: map }); 
```

然后我无论如何也看不到里面有什么东西。我试图在调试器中查看**nyLayer**包含的内容，但没有像对象数组那样。也试过这个：

```
var test = nyLayer[0]; 
```

但**测试**未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:41:30.740

除了使用单击侦听器外，您无法访问 KmlLayer 中的地标。

如果您使用第三方解析器（如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/) ），您可以访问它们，但是您会失去 KmlLayer 基于图块的渲染的优势，因此您会看到大量对象的性能下降。

使用 geoxml3[创建动态侧边栏的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linkto.html?type=m&filename=cta.xml)

# bison - 野牛的通用识别命令

> ID：13404257
> 
> 赞同：1
> 
> 时间：2012-11-15T18:56:50.340
> 
> 标签：bison

我正在开发一个野牛程序，需要有一个允许它识别任何东西的最后一个选项。很像 else if...

谢谢

```
commands: F{
            t[top++] = 'F';
            }
      |PLUS{
            t[top++] = '+';
            }
      |MINUS{
            t[topo++] = '-';
            }
      |ACOL { 
            t[top++] = '[';
            }
      |FCOL{
            t[top++] = ']';
            }
      |POINT{
             t[top++] = '.';
            }
      |EQUAL {
            t[top++] = '=';
            }
      | {  
           /* generic command should be here
           if any of the commands above were found it should run whatever is here*/
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:45:14.787

附加在标记非终端中识别出任何命令令牌后要运行的逻辑，如下所示。请注意， ' 产生式的右侧`marker`不匹配任何标记。

```
command_and_marker: command marker;

command:  F
            {
            t[top++] = 'F';
            }
        | PLUS
            {
            t[top++] = '+';
            }
        | MINUS
            {
            t[topo++] = '-';
            }
        | ACOL
            { 
            t[top++] = '[';
            }
        | FCOL
            {
            t[top++] = ']';
            }
        | POINT
            {
            t[top++] = '.';
            }
        | EQUAL
            {
            t[top++] = '=';
            } 
marker:     {  
            /* generic command should be here
            if any of the commands above were found it should run whatever is here*/
            } 
```

我已经制定了答案以匹配代码中的注释，这些注释与您的问题文本有些不一致。如果您想`command`匹配任何内容，而不仅仅是`F`,`PLUS`等，那么您将必须拼出您的词法分析器可以在`command`. 这不一定是一个好主意，原因有几个。

# c# - ADFS - 401.2 后重定向到自定义页面 - 未经授权

> ID：13404266
> 
> 赞同：0
> 
> 时间：2012-11-15T18:57:24.170
> 
> 标签：c#, asp.net, wif, adfs

我有一个使用 WiF 4.0 的 ASP WebForms 应用程序来使用我们的 ADFS 服务器进行单点登录。

但是当用户关闭登录框时，它会显示来自 ADFS 服务器的 IIS 错误页面。

如何指定登录失败后应重定向用户的页面的 url？

# php - 如何在windows xp上安装php

> ID：13404267
> 
> 赞同：0
> 
> 时间：2012-11-15T18:57:22.863
> 
> 标签：php, installation

每次我尝试在 Windows 上安装 php 时，我都会得到一个名为 php-5.4.8.tar.bz2 的文件，我不知道如何安装这种文件，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T18:59:56.100

如果您是 PHP 新手，那么我建议您使用 WAMP Server。下方链接：

[http://www.wampserver.com/en/](http://www.wampserver.com/en/)

安装它，执行它，开始工作。真正的快速和容易。它预先配置了 Apache、MySQL 和 PHP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T19:00:44.787

您使用了错误的文件，您使用的是 Windows 而不是 Unix！

这应该有助于：

[http://www.php.net/manual/en/install.php](http://www.php.net/manual/en/install.php)

然而，使用 wamp 服务器，它简单易用。享受您的 PHP 之旅！:)

如果您正在寻找开始学习 PHP 的地方，我强烈建议您使用这个简单的教程：

[http://www.w3schools.com/php/](http://www.w3schools.com/php/)

这是一个非常简单的教程，可以让您立即开始使用 PHP！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T18:59:38.597

您已经下载了基于 Unix 系统的安装包。您要下载[Windows 版本](http://www.php.net/manual/en/install.windows.installer.msi.php)。请注意，您还需要使用此下载安装[Apache](http://httpd.apache.org/download.cgi)。

您可能会发现安装完整的开发包更容易。我推荐[WAMP](http://www.wampserver.com/en/)或[XAMPP](http://www.apachefriends.org/en/xampp-windows.html)。这些包含您入门所需的所有工具，包括 Apache、PHP 和 MySQL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T18:59:29.257

由 bzip2 创建的压缩存档，这是一个常见于基于 Unix 的系统上的文件压缩程序；采用 Burrows-Wheeler 压缩算法以及运行长度编码 (RLE) 以实现高水平压缩；常用于 Linux 软件包发行版。

[关于 .bz2 的信息](http://www.fileinfo.com/extension/bz2)

你可以用winrar解压

# asp.net-mvc-3 - 使用 TryValidateModel 验证模型时如何排除某些属性

> ID：13404270
> 
> 赞同：0
> 
> 时间：2012-11-15T18:57:41.543
> 
> 标签：asp.net-mvc-3, validation

我正在开发一个 ASP.NET MVC 3 项目，需要从服务器端验证中排除某些属性。我正在寻找类似这个问题的东西[是否可以覆盖模型中属性的必需属性？](https://stackoverflow.com/questions/8903838/is-it-possible-to-override-the-required-attribute-on-a-property-in-a-model-asp)但我不想再次绑定模型，因为我已经对其进行了更改（据我了解，这就是 TryUpdateModel 会做的）。

来自相关问题

```
public ActionResult SomeAction()
{
 var model = new BaseModel();

 if (TryUpdateModel(model, null, null, new[] { "RequiredProperty" })) // fourth parameter is an array of properties (by name) that are excluded
 {
      // updated and validated correctly!
      return View(model);
 }
 // failed validation
 return View(model);
} 
```

我想验证已更新的模型，不包括某些属性。我应该只使用链接问题中建议的 hackedbychinese 之类的 TryUpdateModel 吗？它可以改变属性的值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:09:25.443

我最终使用了 jquery 验证规则删除方法。

```
$("#fax_DisplayPhoneNumber").rules("remove", "required"); 
```

这将覆盖模型`[Required]`中传真属性上的标签，`DisplayPhoneNumber`因此它不再是必需的输入。

# php - 初学者的 PHP 帮助。扫描文件结构以返回数组中的文件夹名称

> ID：13404272
> 
> 赞同：1
> 
> 时间：2012-11-15T18:57:50.240
> 
> 标签：php, search, directory

我正在为我的代码寻求一些帮助，我在其他地方看过，但很难真正理解其他地方给出的代码发生了什么，我希望有人能帮助我。

我有一个画廊页面，它使用 $_POST 来更改画廊根据单击的链接获取图像形式的文件夹。

我现在想要的是编写一个搜索函数，当它找到一个字符串（jpg）时，它会在它们中查找它，它返回它的 img 标签并显示图像。

我无法使 scandir 工作并显示当前使用此代码

```
<?php
$dir = "/galleries/images/adult-cakes/images/";

$scan = scandir($dir);
echo $dir;
print_r($scan);
foreach ($scan as $output) {
    echo "$output" . "<br />";
}
?> 
```

返回 echo dir 但没有其他内容（请注意 print 是我尝试过的，它是 echo 之前的，但都不起作用。

然后我需要得到所有画廊类型、成人、周年纪念等的输出，并将它们像这样放入一个循环中

搜索条件 = cake 1(.jpg)

将 scandir 信息放入 $folderarray

搜索此文件夹直到找到 -

画廊/图像/$文件夹阵列/图像/

环形

如果找到，则回显带有图片链接的 img 标签

如果不显示未找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:07:40.697

这将获得目录 $dir 中所有文件的数组

```
<?php
$dir = "/galleries/images/adult-cakes/images/";
$images = glob($dir . '*');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:09:00.790

这样做可以将 $Dir 的所有子目录放入数组 $DirArray 中：

```
$Dir = '/galleries/images/'; // 
foreach ( $DirArray = array_filter(glob($Dir . '*'), 'is_dir') as $DirName ) {
  $DirName = str_replace($Dir, '', $DirName);  // Optionally, remove path from name to display
  echo "Dir Name: $DirName <br />\n"; // Test
}
echo var_dump($DirArray); // Test 
```

相应修改

# wordpress - 从当前前端获取 WordPress 侧边栏

> ID：13404283
> 
> 赞同：0
> 
> 时间：2012-11-15T18:58:56.337
> 
> 标签：wordpress

是否有检索显示在当前前端的 WordPress 侧边栏的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:10:12.150

我在这里发布了一个可能有效的解决方案：[检查当前前端是否显示 WordPress 小部件](https://stackoverflow.com/questions/13403867/checking-if-a-wordpress-widget-displayed-in-the-current-front-end#comment18327258_13403867)

~~dynamic_sidebar 没有注册它被称为那个和那个侧边栏。自己也没有合适的钩子来做这件事。因此，恐怕您必须为每个模板告诉 Wordpress 正在显示哪些侧边栏。~~一种方法是创建一个像这样的包装函数

```
function wrap_dynamic_sidebar( $sidebar_id )
{
    global $sidebars_in_this_template;
    $sidebars_in_this_template[] = $sidebar_id;
    return dynamic_sidebar( $sidebar_id );
} 
```

并在任何地方用这个替换dynamic_sidebar（但我知道这个解决方案很可能对你不可行）。

如果要显示所有侧边栏的列表，可以使用 $wp_registered_sidebars

```
global $wp_registered_sidebars;
$sidebar_ids = array_keys( $wp_registered_sidebars ); 
```

# wordpress - functions.php 中的 Wordpress 功能和 current_user_can()

> ID：13404284
> 
> 赞同：7
> 
> 时间：2012-11-15T18:59:08.653
> 
> 标签：wordpress

我在functions.php中添加了一个函数，在登录后将用户重定向到posts-new.php，它可以工作。但是，我只希望在登录的用户是贡献者的情况下发生这种情况。所以我添加了以下内容：

```
/** Redirect after login */
    function mysite_login_redirect(){
        if ( current_user_can( 'manage_options' ) ) {
           return 'http://mysite.com/wp-admin/index.php';}
        else {
           return 'http://mysite.com/wp-admin/post-new.php';}
    }
add_action( 'login_redirect', 'mysite_login_redirect'); 
```

在这种状态下，贡献者和管理员都被重定向到 post-new.php。为了测试它，我修改了函数，以便重定向没有该功能的用户：

```
if ( !current_user_can( 'ma ... 
```

当我修改函数时，贡献者和管理员都被重定向到 index.php。

所以该功能似乎有效，但这对我来说意味着它没有看到管理员的“manage_options”功能。我尝试了几种管理员独有的功能，结果相同。很奇怪吧？

我应该说我正在使用用户角色编辑器插件，但我禁用了它并以相同的结果测试了这些功能。

我还在使用 Active Directory 集成和管理菜单编辑器。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-15T19:09:40.547

尝试这个：

```
if( current_user_can( 'administrator' ) ){} // only if administrator
if( current_user_can( 'editor' ) ){} // only if editor
if( current_user_can( 'author' ) ){} // only if author
if( current_user_can( 'contributor' ) ){} // only if contributor
if( current_user_can( 'subscriber' ) ){} // only if subscriber 
```

或者：

```
if( current_user_can( 'level_10' ) ){}
if( current_user_can( 'level_9' ) ){}
if( current_user_can( 'level_8' ) ){}
if( current_user_can( 'level_7' ) ){}
if( current_user_can( 'level_6' ) ){}
if( current_user_can( 'level_5' ) ){}
if( current_user_can( 'level_4' ) ){}
if( current_user_can( 'level_3' ) ){}
if( current_user_can( 'level_2' ) ){}
if( current_user_can( 'level_1' ) ){}
if( current_user_can( 'level_0' ) ){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-21T11:35:20.150

尝试这个：

```
$exclude_role = 'contributor';
        $roles = get_role( $exclude_role )->capabilities;
        foreach ( $roles as $cap ) {
            if ( current_user_can( $cap ) ) {
                ...
            }
        } 
```

# wpf - WPF：列表框和组合框的绑定

> ID：13404285
> 
> 赞同：0
> 
> 时间：2012-11-15T18:59:13.543
> 
> 标签：wpf, xaml, binding

我通过书在 WPF 中学习绑定。我写了这样的代码：

```
using System;

namespace WpfBinding {
    enum SomeColors {
        Red,
        Green,
        Blue,
        Gray
    }
} 
```

和

```
using System;

namespace WpfBinding {
    class TestItem {
        SomeColors color;

        public TestItem(SomeColors color) {
            Color = color;
        }
        internal SomeColors Color {
            get { return color; }
            set { color = value; }
        }
        public override string ToString() {
            return Color.ToString();
        }
    }
} 
```

我的窗口的 XAML：

```
<Window x:Class="WpfBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <ListBox x:Name="listBox" HorizontalAlignment="Stretch" 
                 VerticalAlignment="Stretch" Margin="5"/>
        <ComboBox x:Name="comboBox" HorizontalAlignment="Stretch" 
                  VerticalAlignment="Top" Margin="5" Grid.Column="1"/>
    </Grid>
</Window> 
```

我尝试通过代码创建绑定：

```
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfBinding {
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window {
        public MainWindow() {
            InitializeComponent();
            // Data for listbox
            TestItem[] items = new TestItem[] {
                new TestItem(SomeColors.Red), 
                new TestItem(SomeColors.Green), 
                new TestItem(SomeColors.Green), 
                new TestItem(SomeColors.Red), 
                new TestItem(SomeColors.Blue), 
                new TestItem(SomeColors.Red), 
            };
            // Create ObservableCollection item
            ObservableCollection<TestItem> collection = new ObservableCollection<TestItem>(items);
            listBox.ItemsSource = collection;// set data for listbox

            comboBox.ItemsSource = Enum.GetValues(typeof(SomeColors)); // Get items from my enum

            // Create bindings
            Binding bind = new Binding();
            bind.Source = listBox;
            bind.Path = new PropertyPath("SelectedItem.Color");
            bind.Mode = BindingMode.TwoWay;
           comboBox.SetBinding(ComboBox.SelectedItemProperty, bind);
        }
    }
} 
```

但是我的绑定不起作用。为什么？

屏幕： ![在此处输入图像描述](../Images/1f95bf0bd4e9894cb780d57474afeaa1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:07:26.403

我*认为*问题是你的类没有实现`INotifyPropertyChanged`。

为了让绑定知道属性何时更改了它的值，您必须向它发送通知，并使用`INotifyPropertyChanged`.

**更新**

因此，您的列表框绑定到`ObservableCollection`提供更改通知的列表框，但*仅限*于列表框，并且仅当您从集合中添加或删除项目时。

您可能还想在 Visual Studio ( [http://msdn.microsoft.com/en-us/library/dd409960%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd409960%28v=vs.100%29.aspx) ) 中启用 WPF 绑定跟踪信息，这可能会帮助您弄清楚什么是也在继续。

我注意到的最后一件事是你的`TestItem`类的 Color 属性被标记为`internal`. WPF 将无法访问该属性，除非它是`public`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:21:54.407

调试时观察 Visual Studio 的输出窗口总是很有用的！如果你看过那里，你会看到这个：

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Color' property not found on 'object' ''TestItem' (HashCode=20856310)'. BindingExpression:Path=SelectedItem.Color; DataItem='ListBox' (Name='listBox'); target element is 'ComboBox' (Name='comboBox'); target property is 'SelectedItem' (type 'Object') 
```

确切地说，绑定只能使用公共属性完成，所以

```
internal SomeColors Color 
```

应该

```
public SomeColors Color 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T19:26:38.837

这是错误 -

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Color' property
not found on 'object' ''TestItem' (HashCode=13974362)'.  
BindingExpression:Path=SelectedItem.Color; DataItem='ListBox' (Name='listBox');
target element is 'ComboBox' (Name='comboBox'); target property is 'SelectedItem'
(type 'Object') 
```

您需要制作属性`Color` `public`而不是`internal`.

[从这里的](http://msdn.microsoft.com/en-us/library/ms743643.aspx)MSDN -

> 用作绑定的绑定源属性的属性必须是类的公共属性。不能出于绑定目的访问显式定义的接口属性，也不能访问没有基本实现的受保护、私有、内部或虚拟属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T19:42:27.980

谢谢大家。我已经编辑了我的代码：

```
using System;
using System.ComponentModel;

namespace WpfBinding {
    public class TestItem : INotifyPropertyChanged{
        SomeColors color;

        public TestItem(SomeColors color) {
            Color = color;
        }
        public SomeColors Color {
            get { return color; }
            set { color = value;
            OnPropertyChanged("Color");
                 }
        }
        public override string ToString() {
            return Color.ToString();
        }

        void OnPropertyChanged(String name) {
            PropertyChangedEventHandler temp = PropertyChanged;
            if (null != temp) {
                temp(this, new PropertyChangedEventArgs(name));
            }
        }
        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

和

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfBinding {
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window {
        public MainWindow() {
            InitializeComponent();
            // Data for listbox
            TestItem[] items = new TestItem[] {
                new TestItem(SomeColors.Red), 
                new TestItem(SomeColors.Green), 
                new TestItem(SomeColors.Green), 
                new TestItem(SomeColors.Red), 
                new TestItem(SomeColors.Blue), 
                new TestItem(SomeColors.Red), 
            };
            // Create ObservableCollection item
            ObservableCollection<TestItem> collection = new ObservableCollection<TestItem>(items);
            listBox.ItemsSource = collection;// set data for listbox

            ObservableCollection<SomeColors> collection2 = new 
                ObservableCollection<SomeColors>(Enum.GetValues(typeof(SomeColors)).Cast<SomeColors>());
            comboBox.ItemsSource = collection2; // Get items from my enum
            // Create bindings
            Binding bind = new Binding();
            bind.Source = listBox;
            bind.Path = new PropertyPath("SelectedItem.Color");
            bind.Mode = BindingMode.TwoWay;
           comboBox.SetBinding(ComboBox.SelectedItemProperty, bind);
        }
    }
} 
```

请看屏幕： ![在此处输入图像描述](../Images/8cbda14e9d4c0d7eb79a0bd607104bef.png)

# android - 尝试打开 Android XML 文件时如何修复 Eclipse 中出现的空指针异常？

> ID：13404289
> 
> 赞同：1
> 
> 时间：2012-11-15T18:59:21.633
> 
> 标签：android, xml, eclipse, nullpointerexception

由于我在 Eclipse 中将 ADT 插件更新为 v1.21，因此我无法再轻松地在我的 Android 项目中打开任何 XML 布局文件。只要我单击该文件，它就会抛出 NullPointerException。以下是错误日志中的堆栈跟踪：

```
java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.editors.common.CommonMatchingStrategy.matches(CommonMatchingStrategy.java:59)
    at org.eclipse.ui.internal.WorkbenchPage.checkEditor(WorkbenchPage.java:2254)
    at org.eclipse.ui.internal.WorkbenchPage.findEditors(WorkbenchPage.java:2223)
    at org.eclipse.ui.internal.WorkbenchPage.findEditor(WorkbenchPage.java:2205)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.isOpenInEditor(EditorUtility.java:131)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.linkToEditor(PackageExplorerPart.java:929)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.access$2(PackageExplorerPart.java:926)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.linkToEditor(PackageExplorerPart.java:533)
    at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.selectionChanged(OpenAndLinkWithEditorHelper.java:57)
    at org.eclipse.jface.viewers.StructuredViewer$3.run(StructuredViewer.java:888)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.firePostSelectionChanged(StructuredViewer.java:886)
    at org.eclipse.jface.viewers.StructuredViewer.handlePostSelect(StructuredViewer.java:1226)
    at org.eclipse.jface.viewers.StructuredViewer$5.widgetSelected(StructuredViewer.java:1251)
    at org.eclipse.jface.util.OpenStrategy.firePostSelectionEvent(OpenStrategy.java:262)
    at org.eclipse.jface.util.OpenStrategy.access$5(OpenStrategy.java:256)
    at org.eclipse.jface.util.OpenStrategy$3.run(OpenStrategy.java:433)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

如果我右键单击它，我可以打开该文件，并告诉它不使用 Legacy Android 布局编辑器打开，但这显然不是一个好的解决方案。我尝试进入 Eclipse 首选项，并确保 XML 文件的文件关联设置正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-14T07:44:25.903

我通过在编辑器中关闭所有打开的项目文件并重新启动 Eclipse 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T08:30:17.390

我切换到一个新的工作区，然后一切正常。

# c# - xna 中的旋转问题

> ID：13404291
> 
> 赞同：0
> 
> 时间：2012-11-15T18:59:28.837
> 
> 标签：c#, xna-4.0

我正在 XNA 中制作飞行模拟器游戏。我还有几个在地图上移动的飞艇（飞艇）。问题是当飞艇到达地图的尽头时，我无法让它们正确转身。我有一个包含位置、旋转变量和速度的 Blimp 类。这是基本逻辑，它说当它们接近边缘时它们将开始旋转，但我不知道如何让它们在转动特定量后停止旋转（比如说 180 度）。

```
private void blimpLogic(GameTime gameTime) 
{
    float turningSpeed = (float)gameTime.ElapsedGameTime.TotalMilliseconds /   1000.0f;
    float turning = 0;
    foreach (Blimp b in blimps)
    {
        if (b.Pos.X <= terrain.EdgeX.X + 100)
        {
            turning += turningSpeed * b.Speed;
            b.Rotation += turningSpeed;
        }
        if (b.Pos.X >= terrain.EdgeX.Y - 100)
        {
            turning += turningSpeed * b.Speed;
            b.Rotation += turningSpeed;
        }
        if (b.Pos.Z <= terrain.EdgeZ.X + 100)
        {
            turning += turningSpeed * b.Speed;
            b.Rotation += turningSpeed;
        }
        if (b.Pos.Z >= terrain.EdgeZ.Y - 100)
        {
            turning += turningSpeed * b.Speed;
            b.Rotation += turningSpeed;
        }
    }
} 
```

在此先感谢并询问我是否对某些事情不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:03:01.023

鉴于“停止转动”操作将在飞艇远离边缘时发生，您不能将其基于飞艇的位置（毕竟玩家可能想要靠近）。

因此，您需要在每个 blimp 中包含一些额外的状态`turningFromTheEdge`，如果已设置并且 blimp 不再靠近边缘，则停止转动。

# iphone - Phonegap：显示相机胶卷中的照片列表？

> ID：13404296
> 
> 赞同：0
> 
> 时间：2012-11-15T18:59:59.177
> 
> 标签：iphone, cordova

我想为我的 phonegap 应用程序创建多张照片上传——目前这不可用，所以我想知道是否可以创建相机胶卷的 HTML 版本。

我的想法是，如果我可以从相机胶卷中访问照片 URI 列表，我会在我自己的相机胶卷 HTML 版本中显示它们，允许选择多张照片，然后上传选择的照片- 绕过原生相机胶卷。

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:06:50.710

这是不可能的，因为 iOS 应用程序是沙盒的：

> 出于安全原因，iOS 在安装时将每个应用程序（包括其首选项和数据）放置在沙箱中。沙盒是一组细粒度的控件，用于限制应用程序对文件、首选项、网络资源、硬件等的访问。作为沙盒过程的一部分，系统将每个应用程序安装在其自己的沙盒目录中，该目录充当应用程序及其数据的主目录。

*（来源：[Apple 的 iOS App Programming Guide](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html)）*

这意味着应用程序只能直接访问自己的文件。因此，相册是您访问存储在设备上的照片的唯一途径。

# regex - .htaccess gzip 不会根据 Yslow 压缩某些文件

> ID：13404299
> 
> 赞同：0
> 
> 时间：2012-11-15T19:00:11.590
> 
> 标签：regex, .htaccess, gzip

我的 .htaccess 文件中有以下代码：

```
# BEGIN Mod_expires
ExpiresActive On
ExpiresDefault "access plus 1 week"
# END Mod_expires

# BEGIN GZIP
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript
</ifmodule>

<IfModule mod_headers.c>
  <FilesMatch "\.(js|css|xml|gz)(\?[a-z]*=[\w\.]*$)*">
    Header append Vary: Accept-Encoding
  </FilesMatch>
</IfModule>
# END GZIP 
```

它完美地压缩了所有内容，除了以下文件：

```
http://www.example.com/wp-content/themes/css_theme/js/jquery.flexslider-min.js 
```

我尝试使用 REGEX，但收效甚微。

我怎样才能gzip上面提到的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:08:33.810

有问题的 JavaScript 文件的*类型*`text/javascript`很可能不在您的`AddOutputFilterByType`列表中。

如前所述，您可以通过查看响应标头来验证这一点。

了解更多 -[提供 JavaScript 文件时，使用 application/javascript 还是 application/x-javascript 更好](https://stackoverflow.com/questions/876561/when-serving-javascript-files-is-it-better-to-use-the-application-javascript-or)

# objective-c - 使用`self = [self init]`包装其他`init message`

> ID：13404308
> 
> 赞同：6
> 
> 时间：2012-11-15T19:00:37.593
> 
> 标签：objective-c, cocoa-touch, cocoa

在Objective-C / Cocoa中将`init`方法包装如下是否可以接受/安全：

```
-(id)init {
    if ((self=[super init])) {
         self.bar = [[Bar alloc] init];
    }
    return self;
}

-(id)initWithFoo:(Foo *)f {
    if ((self=[self init])) {
         self.foo = f;
    }
    return self;
} 
```

**注意`[self init]`在`initWithFoo`.**

*也许这是一个简单的肯定答案......看起来很明显，但不标准？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T19:06:23.480

这当然是可以接受和安全的。我不确定这是否是标准做法，但我不认为这是不好的做法。

**注意：**这不是*重载*。重载是指在类 C 语言（尤其是 C++）中非常具体的事情，其中​​您有多个同名的函数，仅通过它们的数量和/或参数类型来区分。一个更好的术语可能是*forwarding*或*wrapping*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T11:45:07.930

我知道我参加聚会迟到了，但我想我会加两分钱。

如果你同时提供一个 init （你肯定会这样做）和一个 initWithBlah 那么你最好做这样的事情......

```
- (id)initWithValue:(int)value
{
    self = [super init];
    if (self) {
        self.value = value;
    }
    return self;
}

- (id)init
{
    int defaultValue = 10;

    return [self initWithValue:defaultValue];
} 
```

# binary - ARM“仅限拇指”二进制文件

> ID：13404313
> 
> 赞同：0
> 
> 时间：2012-11-15T19:00:59.370
> 
> 标签：binary, arm, thumb

网上是否有仅使用拇指（拇指 1，无拇指 2）指令的 ARM ELF 二进制文件的来源？

（是的，我读到 Linux 无法在仅限拇指的处理器上运行。）

二进制文件的内容应该尽可能“正常”，我想将它们用作分类器的训练数据。

# mysql - 谷歌地图 API v3 MySQL？

> ID：13404314
> 
> 赞同：-2
> 
> 时间：2012-11-15T19:01:00.547
> 
> 标签：mysql, google-maps, google-maps-api-3

[我使用本教程](https://developers.google.com/maps/articles/phpsqlsearch_v3)使用 API v3 制作了 Google 地图。

[如您在此处](http://testforhealth.net/TCA/phpsqlsearch_genxml.php?lat=33&lng=-86&radius=50)所见，.php 正在从数据库中提取结果。

但是，当应用到谷歌地图搜索时，没有结果，如您[在此处](http://testforhealth.net/TCA/collection.html)看到的。

.html 文件在搜索位置时不会从数据库中提取标记。我已经检查了代码 100 次，并在网上寻找我哪里出错的答案。如果有人可以为这个问题带来一些启示，将不胜感激。

这是.php

```
<?php  
require("phpsqlsearch_dbinfo.php");

// Get parameters from URL
$center_lat = $_GET["lat"];
$center_lng = $_GET["lng"];
$radius = $_GET["radius"];

// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);

// Opens a connection to a mySQL server
$connection=mysql_connect (localhost, $username, $password);
if (!$connection) {
  die("Not connected : " . mysql_error());
}

// Set the active mySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ("Can\'t use db : " . mysql_error());
}

// Search the rows in the markers table
$query = sprintf("SELECT address, name, lat, lng, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance FROM markers HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20",
  mysql_real_escape_string($center_lat),
  mysql_real_escape_string($center_lng),
  mysql_real_escape_string($center_lat),
  mysql_real_escape_string($radius));
$result = mysql_query($query);

if (!$result) {
  die("Invalid query: " . mysql_error());
}

// Iterate through the rows, adding XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  $node = $dom->createElement("marker");
  $newnode = $parnode->appendChild($node);
  $newnode->setAttribute("name", $row['name']);
  $newnode->setAttribute("address", $row['address']);
  $newnode->setAttribute("lat", $row['lat']);
  $newnode->setAttribute("lng", $row['lng']);
  $newnode->setAttribute("distance", $row['distance']);
}

echo $dom->saveXML();
?> 
```

这就是我在 25 英里半径范围内搜索德克萨斯州休斯顿时 XML 输出的内容。

```
 <?xml version="1.0"?>
<markers><marker name="US Healthworks" address="9200 Hempstead, Houston, TX" lat="29.794104" lng="-95.449448" distance="5.34265857252369"/><marker name="Concentra Urgent Care" address="1000 N Post Oak, Houston, TX" lat="29.785303" lng="-95.456039" distance="5.47896700195167"/><marker name="US Healthworks" address="1414 S. Loop West, Houston, TX" lat="29.680426" lng="-95.399132" distance="5.79347704035615"/><marker name="Concentra Urgent Care" address="8799 North Loop E., Houston, TX" lat="29.797531" lng="-95.273872" distance="6.28265385500935"/><marker name="Doctor's Clinic Houston" address="6535 Southwest Freeway, Houston, TX" lat="29.717321" lng="-95.497299" distance="8.22610378379106"/><marker name="Northshore Occupational Medica" address="1140 Westmont Ste. 505, Houston, TX" lat="29.771984" lng="-95.195290" distance="10.4743938030692"/><marker name="US Healthworks" address="16630 Imperial, Houston, TX" lat="29.941263" lng="-95.396309" distance="12.615115596934"/><marker name="NOVA" address="6630 Roxburgh Drive, Houston, TX" lat="29.866304" lng="-95.555901" distance="13.371308778454"/><marker name="Fishbone Safety" address="208 X Street, Deer Park, TX" lat="29.694548" lng="-95.122627" distance="15.4859102039821"/><marker name="US Healthworks" address="17410 N.W. Freeway, Houston, TX" lat="29.888929" lng="-95.582146" distance="15.5495324355371"/><marker name="US Healthworks" address="10521 Corporate, Stafford, TX" lat="29.632973" lng="-95.596115" distance="16.2008784561048"/><marker name="Occupational Healthcare" address="610 S. Main Street, Highlands, TX" lat="29.808447" lng="-95.056885" distance="19.0351671183224"/><marker name="Medical Plaza Mobile Surveillance" address="10910 Spencer, La Porte, TX" lat="29.632973" lng="-95.062325" distance="20.4197847454651"/><marker name="US Healthworks" address="1309 West Fairmont Pkwy, LaPorte, TX" lat="29.651571" lng="-95.030998" distance="21.6516577038734"/></markers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:05:47.783

```
 <?php
require("phpsqlajax_dbinfo.php");///this is ure db username password etc

function parseToXML($htmlStr) 
{ 
$xmlStr=str_replace('<','&lt;',$htmlStr); 
$xmlStr=str_replace('>','&gt;',$xmlStr); 
$xmlStr=str_replace('"','&quot;',$xmlStr); 
$xmlStr=str_replace("'",'&#39;',$xmlStr); 
$xmlStr=str_replace("&",'&amp;',$xmlStr); 
return $xmlStr; 
} 

// Opens a connection to a MySQL server
$connection=mysql_connect (localhost, $username, $password);
if (!$connection) {
  die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM $tablename";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<makers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  echo '<marker ';
  echo 'name="' . parseToXML($row['name']) . '" ';

  echo 'lat="' . $row['lat'] . '" ';
  echo 'lng="' . $row['lng'] . '" ';

  echo '/>';
}

// End XML file
echo '</markers>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:52:54.667

PHP 脚本返回的 XML 文档格式不正确，因为它在第一行的 XML 声明之前包含一个空格字符：

```
 <?xml version="1.0"?>
^
|-- This space character in front of the declaration is causing the problem. 
```

这导致 XML 解析器失败并出现错误：`XML declaration allowed only at the start of the document`.

它可能来自 PHP 标记`<?php`和`?>`.

在第 65 行之后调试`xml`变量`collection.html`以查看问题。我相信您可以通过删除 XML 声明之前的所有空格来解决此问题。[[参考](http://docstore.mik.ua/orelly/xml/xmlnut/ch02_09.htm)]

* * *

另一方面，将地图平移到海洋中部的原因是，当没有向地图添加标记时，地图所拟合的边界根本没有延伸——即`bounds.extend(latlng)`没有到达第 78 行.

我建议修改`searchLocationsNear()`函数以优雅地处理这种情况。

* * *

**更新：**

在下面的评论中，我们讨论了克服 XML 输出中的空格问题的方法。我要强调的是，最好的解决方案仍然是*在源代码处去掉空间*，也就是在 PHP 脚本中。

JavaScript 中的`trim()`函数没有广泛的浏览器支持（请参阅[相关的 SO 问题](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)），并且实际上只是解决了症状而不是问题的原因。

# visual-studio - 无法激活 Windows 应用商店应用

> ID：13404315
> 
> 赞同：41
> 
> 时间：2012-11-15T19:01:01.073
> 
> 标签：visual-studio, windows-8, windows-runtime

我安装了零售版的 Windows 8 Pro。我下载并安装了 Visual Studio Express 2012。我要求并获得了开发人员证书。然后我尝试创建一个 hello world 应用程序。

当我尝试调试应用程序时，我从那里收到“无法激活 Windows 应用商店应用程序”消息框。网络上的大多数评论都说删除构建目录。这对我不起作用

有没有人有解决这个问题和调试我的应用程序的解决方案？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-15T20:24:37.837

这也发生在我身上一次，但是[删除构建目录的建议](http://michaelcrump.net/resolution-unable-to-activate-windows-store-app-the-activation-request-failed-with-error-e-fail)修复了它。具体来说，您只需删除项目中的 bin\Debug 和 bld\Debug 文件夹。重建时，它们的内容将由 Visual Studio 重新生成。我假设这只是一个项目，因为它是一个 Hello World 应用程序；否则我会问您是否从解决方案中的所有项目中删除了构建目录。

您还可以尝试从 Visual Studio 的 BUILD 菜单运行“清洁解决方案”。

对不起...如果这发生在您所描述的全新安装中，那就太可怕了。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-27T19:15:14.877

我遇到了同样的问题，并尝试重建、清理、删除临时文件、重新启动计算机等......但没有任何帮助。

最后**我做了一个发布版本然后回到调试**。现在它可以工作了。

我不知道发生了什么，也不知道这是否真的有帮助，但值得一试。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-07T19:21:00.050

对我来说，重新启动 pc 解决了这个错误消息。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-12T10:48:38.657

对我来说，问题是我在 TrueCrypt 安装的虚拟驱动器上创建了应用程序，当我将项目文件移动到普通驱动器时，一切正常。奇怪的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-11T19:45:52.943

我得到了完全相同的错误。就我而言，罪魁祸首是 NuGet 包。它在项目中添加了一个 app.config 文件，这让 VS 感到困惑。我删除了 app.config 文件，它解决了我的问题。

我在 Iris [Classon 的网站上](http://www.irisclasson.com/2012/11/04/problem-unable-to-activate-windows-store-app-the-app1-exe-process-started-but-the-activation-request-failed-with-error-the-app-didnt-start/)得到了解决方案。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-11-30T16:40:30.783

这可以通过从开始屏幕卸载应用程序然后再次从 Visual Studio 构建应用程序来解决。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-19T03:17:30.477

我遇到了类似的问题，原因是在 USB 拇指驱动器上创建项目。在普通硬盘卷上创建项目是可行的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-24T18:23:10.080

当应用程序签名密钥（`.pfx`文件）丢失时，可能会发生这种情况。

尝试以下操作：

*   `Package.appxmanifest`在 Visual Studio 中打开文件
*   去注册“包装”
*   选择[选择证书...]
    *   使用 [Configure Certificate...] [From File...] 选择测试证书，或使用 [Configure Certificate...] [Test Certificate...] 创建一个新证书
    *   使用测试证书时，请确保它在`.gitignore`文件中。应该有一个条目，例如`!**\*_TemporaryKey.pfx`在 Git 中包含密钥。
        *   注意：发布构建的证书应该只对构建服务器可用，而不包含在 Git 中。
*   重建项目

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-17T10:31:22.183

这在过去发生在我身上，我一直发现删除构建目录可以解决它。

但是这次这对我不起作用。我已经尝试过 - 重新启动 - 删除构建目录 - 运行构建 | VS 中的清洁解决方案 - 更新开发者帐户

唯一对我有用的是在 Package.appxmanifest 下更改我的包名称

但是，我对此作为解决方案并不太满意。我会继续调查。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-12-08T07:31:03.430

该问题可能是因为 NuGet 将尝试添加一个 app.config 并将重定向绑定到 Windows 应用商店应用程序（如果它认为需要）。但是，Windows 应用商店应用程序不需要 app.config，并且如果存在，实际上将无法启动并显示非常令人困惑的错误消息。

在这种情况下，解决方案是删除 App.config

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-25T07:26:21.530

当您尝试在调试模式下部署时，通常会出现此错误。

我建议先在发布模式下部署应用程序，然后在调试模式下尝试。

这对我有用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-06-02T12:21:45.263

制作新证书对我有用。为此，请转到**Package.manifest->Packaging**，然后按照**选择证书**...。单击**配置证书**并选择**创建测试证书**。给它一个名字，然后按确定。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-12-07T09:47:38.353

增加包的修订号对我有用

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-01-10T16:34:25.347

尝试了很多上述修复。没有任何效果（删除 bin、obj 目录、编辑清单、编辑注册表、更改包名称等）我的 Avast 防病毒软件正在运行，所以我完全卸载了它。就是这样。应用程序现在运行良好。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-28T12:34:05.153

这类问题在 Windows 8 Visual Studio 中很常见。当您的 Visual Studio 开发人员许可证过期时会遇到此类错误，因此您可能想要续订或获取新的开发人员许可证，这是您获得该许可证的方法。[如何在 Windows 8 中获得开发人员许可证](http://dothisbest.com/how-to/get-a-developer-license-for-windows-8/)

类似的问题也可能会遇到 E_Fail 问题这里是[如何解决 Unable to activate Windows Store app E_Fail 问题](http://dothisbest.com/how-to/solve-unable-to-activate-windows-store-app-e_fail-issue/)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-10-12T02:43:57.777

对我来说，解决方法是结合这两个答案 -

1.  续订开发者许可证（[如何在 Windows 8 中获得开发者许可证](http://dothisbest.com/how-to/get-a-developer-license-for-windows-8/)）
2.  并删除构建目录（尽管我删除的内容比所描述的屏幕截图更多）[删除构建目录](http://michaelcrump.net/resolution-unable-to-activate-windows-store-app-the-activation-request-failed-with-error-e-fail)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-07-10T09:14:07.850

如果 NuGet 认为需要，它会尝试添加一个带有绑定重定向到 Windows 应用商店应用的 app.config。但是，Windows 应用商店应用程序不需要 app.config，并且如果存在，实际上将无法启动并显示非常令人困惑的错误消息。

解决方案：

删除 App.config

并再次构建

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-24T07:29:29.580

对于那些在本地机器上专门调试 IOT 后台应用程序时遇到类似错误但正在寻找解决方案的人 - 你可以在[这里](https://stackoverflow.com/questions/36283580/how-to-run-a-windows-10-iot-app-locally)找到它。

使用搜索词“*无法激活 Windows 商店应用程序激活请求失败并出现错误*”将我带到了这里。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-07-14T10:16:44.340

由于两件事，我解决了这个问题。

1.  基本上，我们只需要删除项目中的`bin\Debug`和`bld\Debug` ***文件夹***即可。重建项目时，Visual Studio 将重新生成这些内容。

2.  只需重新启动 Visual Studio。并清理构建和重建解决方案并运行它。

希望这可以帮助。，

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-04-12T18:23:17.480

玩这个问题3天，尝试了所有建议，没有任何效果。到目前为止！！！

解决方案对我来说是这样的：

*   更新开发者许可证
*   在发布模式下构建和部署解决方案（在此步骤之后它仍然无法正常工作，但 VS 在 rpi 中安装了一些包）
*   使用默认帐户启动 VS 远程调试器 (http://:8080/#Debug%20settings)
*   使用通用认证模式配置远程设备（VS2017 -> 项目设置 -> 调试 -> 目标设备：远程机器，认证模式：通用（未加密协议））

……现在我可以睡觉了。

希望它可以帮助某人。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-05-21T16:45:50.223

这份礼物是微软对 VS2015 的自动更新提供的，这是两个罪魁祸首之一：

KB3022398 KB3165756

它还破坏了 SourceTree 和其他绘制 GUI 的应用程序——制作应用程序的轮廓但不绘制内容。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-05-24T08:02:18.097

对我来说，更改 Package.appxmanifest 中的包名称解决了这个问题

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-05-02T15:43:28.933

就我而言，C# UWP 应用程序有一个本机库，该库在应用程序启动代码中失败，并调用`exit(1)`. 不过，这些症状与问题中的症状相同。Visual Studio 会抛出一条消息：

> 无法激活 Windows 应用商店应用程序“88888888-6666-5555-4444-111111111111_abcdefgh!App”。Acme.exe 进程已启动，但激活请求失败并出现错误“不支持操作。未知错误：0x80040905'。

另外，在Microsoft\Windows\Apps\Microsoft-Windows-TWinUI/Operational 下的UWP 应用Windows 日志中有一条消息：事件ID 5961，消息：

> 激活 88888888-6666-5555-4444-111111111111_abcdefgh!App 失败。错误代码：未知 HResult 错误代码：0x80040905。激活阶段：COM App激活

在内部，C# 部分会尝试从构造函数构造原生类实例`App`，原生类构造函数会遇到不可恢复的错误并退出。但是，从 UWP 子系统的角度和调试器的角度来看，这看起来与单纯的编程退出不同。我将把这个答案留在这里，因为我花了一些时间来追踪各种 UWP 故障场景，而不是在本机调试器下运行。

我已将`exit()`呼叫替换为`throw ref new Exception(E_INVALIDARG)`。至少以这种方式，错误会在托管调试器中显示出来，并且消息是描述性的。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-11-07T09:09:20.563

我在 Visual Studio 2019 上的 UWP Windows 10 应用程序中经常遇到这个问题……对我来说，可靠的解决方法是在 Package.appxmanifest 文件（打包选项卡）中增加内部版本号。这是一个巨大的痛苦......真的希望微软能尽快解决这个问题

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-05-07T22:33:49.120

代码中的任何现有错误也可能导致此问题。确保您以前版本的代码工作正常。比较差异并确保一切看起来都不错。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-08-28T23:23:02.307

我遇到了这个错误，但没有其他任何工作，所以我不得不剖析我的程序。原来我在我的 App.xaml 中引用了一个不存在的 StaticResource。

看起来像一个愚蠢的错误，但您也会认为 Visual Studio 会接受类似的东西并抛出一个不同的错误，所以如果没有其他工作，请仔细检查您的应用程序资源。

# javascript - 通过javascript设置google plus代码段信息？

> ID：13404324
> 
> 赞同：0
> 
> 时间：2012-11-15T19:01:32.703
> 
> 标签：javascript, google-plus

我希望在 google plus 上分享内容，但我需要能够自己填充片段信息，因为我分享的页面是通过我的 jquery 移动网站上的 ajax 加载的。

话虽如此，我需要通过 url（facebook 共享器样式）或通过 javascript 设置信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:54:43.407

如果您尝试更改显示的丰富网页摘要，您应该使用[片段工具](https://developers.google.com/+/plugins/snippet/)创建 schema.org，然后将其放置在您的网站上。然后，共享链接将是该页面，其中包含设置为您希望它们显示方式的属性。您可以指定要共享的内容的标题、图像和描述。

如果您只是想创建一个链接来共享某些内容，您可以创建指向共享对话框的直接链接。例如，

```
<a href="plus.google.com/share?url={your url}">Click to share</a> 
```

将创建一个指向 {your url} 的共享链接。

因为 jQuery mobile 在实际客户端上呈现大量信息，您可能需要生成一个类似于上面的 URL，然后指向另一个页面，该页面将在架构中具有正确的内容并重定向到您的站点. 当他们点击共享链接时，用户将被重定向到 jQuery 移动页面。当 Google 到达您重定向的页面时，它会读取 schema.org 标记并正确计算代码段。以下示例适用于我：

```
<html itemscope itemtype="http://schema.org/Article">
  <head>
    <meta itemprop="name" content="Example">
    <meta itemprop="description" content="This is the most awesome thing ever.">
    <meta itemprop="image" content="http://placekitten.com/250/250">
  </head>
  <body>
    <script>window.location='http://istoocute.com/#kittens';</script>
    <a href='http://istoocute.com/#kittens'>Click here if you're not redirected</a>
    There's really nothing to see here, move along...
    <img src="http://placekitten.com/250/250" />
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:06:54.273

[https://developers.google.com/+/plugins/+1button/#configuration](https://developers.google.com/+/plugins/+1button/#configuration) - 显示您需要的配置设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:35:03.970

在我的情况下，我能够继续使用 schema.org。这很有效，因为当您查看我的一个页面时，它会被“提升”到缓存页面列表中的第一页。因此，即使您从页面 A 开始并浏览到页面 B，然后在谷歌搜索您提供的 url 时共享页面 B，页面 B 现在位于页面 A 之前，因此使用的是 schema.org 元数据。

我毫不怀疑编写自己的重定向页面并将其传递给这样的东西

```
?redirect_url=http://google.com&img=your_image.jpg&description=its great&title=a product 
```

会工作。唯一要记住的是，当谷歌查看它看到的页面并且没有被重定向（机器人不使用 js）但当一个人点击页面时，它会将他们重定向到真实页面。

# r - 在向量行中查找部分文本 +[r]

> ID：13404330
> 
> 赞同：2
> 
> 时间：2012-11-15T19:02:21.923
> 
> 标签：r

基本上我正在寻找一个函数，它将一个字符串向量和一个搜索词作为输入，并输出一个布尔向量。在此之后，我还想获取一个字符串列表并通过相同的函数运行它以输出多个结果向量，每个字符串一个。

所以初始数据看起来像：

```
> searchVector <- cbind(c("aaa1","aaa2","","bbb1,aaa1,ccc1", "ddd1,ccc1,aaa1"))
> searchVector
     [,1]         
[1,] "aaa1"        
[2,] "aaa2"        
[3,] ""           
[4,] "bbb1,aaa1,ccc1"
[5,] "ddd1,ccc1,aaa1" 
```

这就是我们希望看到的：

```
>findTrigger(c("aaa","bbb"),searchVector)
         [aaa]  [bbb]
    [1,] 1     0   
    [2,] 1     0   
    [3,] 0     0      
    [4,] 1     1
    [5,] 1     0 
```

我做了以下尝试：

```
searchfunction <- function (searchTerms, searchVector) {
  output = matrix( nrow = length(searchVector), 
             ncol = length(searchTerms), 
             dimnames = searchTerms)

  for (j in seq(1,length(searchTerms)))
  {
    for (i in seq(1,length(searchVector)))
    { 
      output[i,j]=is.numeric(pmatch(searchTerms[j], searchVector[i]))
    }
  }
  return(as.numeric(output))
} 
```

但我只是得到一个全1的矩阵。我对 R 很陌生，我在网上四处查看，但没有任何运气。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:09:07.503

关键是使用功能`grepl`。这应该让你开始：

```
searchVector <- c("aaa1","aaa2","","bbb1,aaa1,ccc1", "ddd1,ccc1,aaa1")

res <- lapply(c('aaa','bbb'),function(pattern,x) as.numeric(grepl(pattern = pattern,x = x)),x = searchVector)
do.call(cbind,res) 
```

要对此进行一些探索，请从以下内容开始`grepl`：

```
> grepl('aaa',searchVector)
[1]  TRUE  TRUE FALSE  TRUE  TRUE
> as.numeric(grepl('aaa',searchVector))
[1] 1 1 0 1 1 
```

然后我只是把它包起来`lapply`，循环遍历向量`c('aaa','bbb')`。这将返回一个向量列表，然后我们将其组合到您使用`do.call`和指定的矩阵中`cbind`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:23:02.753

`mapply`和`grep`或`grepl`（感谢 joran）是你的朋友：

```
searchTerms <- c("aaa", "bbb")
searchVector <- cbind(c("aaa1","aaa2","","bbb1,aaa1,ccc1", "ddd1,ccc1,aaa1"))
M <- mapply(grepl, searchTerms, MoreArgs=list(x=searchVector)) 
M
       aaa   bbb
[1,]  TRUE FALSE
[2,]  TRUE FALSE    
[3,] FALSE FALSE
[4,]  TRUE  TRUE
[5,]  TRUE FALSE 
```

如果你想要它`1,0`：`apply(M,2,as.numeric)`

# java - Java泛型类，内部类使用外部类的参数

> ID：13404331
> 
> 赞同：0
> 
> 时间：2012-11-15T19:02:25.420
> 
> 标签：java, generics

我有外部泛型类，它有一些内部类，我想使用外部类的泛型类型。

但是，我不明白如何正确使用泛型参数。

例子：

```
class Outer<E extends CharSequence>{
   class Inner extends ArrayList<E>{
   }

   void func() {
      ArrayList<CharSequence> al = new ArrayList<CharSequence>();
      al.add("abc");    // OK
      CharSequence a = al.get(0);   // OK

      Inner in = new Inner();
      in.add("abc"); // Error: The method add(E) in the type ArrayList<E> is not applicable for the arguments (String)
      CharSequence b = in.get(0);   // OK
   }
} 
```

如何声明内部类以使用相同的泛型类型的外部类？谢谢

**编辑+解决方案：**

最后我实现了我想要的，这是示例结果：

```
abstract class MyGenericClass<E extends CharSequence>{
   class TheList extends ArrayList<E>{};

   TheList list = new TheList();
}

final class ClassInstance extends MyGenericClass<String>{
};

public class Main{
   public static void main(String[] args){
      ClassInstance c = new ClassInstance();

      c.list.add("abc");
      String s = c.list.get(0);
   }
} 
```

我的要求是拥有泛型类，并且其中也有泛型容器，它将使用与其父类相同的类型参数。

*注意：CharSequence/String 是使用的示例参数，我的实际使用是不同的。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:05:58.553

这从根本上来说是不安全的。

如果我做一个会发生什么`Outer<StringBuilder>`？
你最终会添加一个`String`到一个`ArrayList<StringBuffer>`.

如果您有一个 的集合`<E extends CharSequence>`，那么您可以在该集合中放入的唯一类型安全的东西是`E` （或扩展的类`E`，或`null`）的一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T20:14:45.567

> 如何声明内部类以使用相同的泛型类型的外部类？

`Inner` 已经使用与 相同的泛型类型`Outer`。问题是`func`没有使用它，它正在使用`CharSequence`.

正如 SLaks[解释](https://stackoverflow.com/a/13404383/18573) `func`的那样，在所有情况下都会做一些时髦的事情，除了在 an 上调用它`Outer<CharSequence>`时：例如，当它被调用时，`Outer<String>`它会将 a 添加`CharSequence`到 an`ArrayList<String>`中。

现在，如果`func` *已经*有一个具体类型的对象：

```
void func(E e) 
{
    Inner in = new Inner();
    in.add(e);
} 
```

它会做正确的事。所以编译器允许这样做。

您似乎试图从您面临的某些特定问题中创建一个通用问题。如果您描述了您正在尝试做的事情并且失败了，您将有更好的机会在这里解决它。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-15T19:24:44.330

```
 class Inner extends ArrayList<CharSequence>{
 } 
```

# bash - 为什么 bash 脚本变量不保存？

> ID：13404334
> 
> 赞同：2
> 
> 时间：2012-11-15T19:02:37.397
> 
> 标签：bash, terminal

我有一个简单的 bash 脚本：

```
#!/bin/bash
JAVA_HOME=/usr
EC2_HOME=~/ec2-api
echo $EC2_HOME
export PATH=$PATH:$EC2_HOME/bin 
```

我像这样运行脚本

```
$ ./ec2
/Users/user/ec2-api 
```

该脚本运行并产生正确的输出。

但是，当我现在尝试访问 EC2_HOME 变量时，我什么也没得到：

```
$ echo $EC2_HOME 
```

我得到一个空白字符串。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:06:32.927

请改为执行以下任一操作：

```
source ec2 
```

或者

```
. ec2 
```

（注意`.`符号只是 的快捷方式`source`）

**解释：**

*   这是因为`./ec2`实际上从您当前的 shell 生成了一个子 shell 来执行脚本，并且子 shell 不能影响它生成的父 shell 的环境。
*   因此，`EC2_HOME`确实`/Users/user/ec2-api`在子 shell 中设置为正确（类似地，`PATH`环境变量也在子 shell 中正确更新和导出），但这些更改不会传播回您的父 shell。
*   Using`source`直接在当前 shell 中运行脚本，而不产生子 shell，因此所做的更改将持续存在。
*   （关于`export`: export 的注释用于告诉从当前 shell 生成的新 shell 使用从当前 shell 导出的变量。因此，对于仅在当前 shell 中使用的任何变量，它们不需要导出。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:17:09.397

shell 脚本永远不能修改其父级的环境。要解决您的问题，您可以使用点 (.) 命令：

```
$ . ./ec2 
```

这应该有效。在 cshell 中，它将是

```
% source ./ec2 
```

要了解有关 shell 和脚本的更多信息，我最好的资源是[Unix power tools](https://rads.stackoverflow.com/amzn/click/com/0596003307)。

# algorithm - 给定数据范围，需要巧妙的算法来计算图轴刻度的粒度

> ID：13404336
> 
> 赞同：4
> 
> 时间：2012-11-15T19:02:46.447
> 
> 标签：algorithm

设想：

绘制图表。拥有从 A 到 B 的数据点，并且想要决定绘制轴刻度的粒度。例如，对于 134 到 151，比例可能从 130 到 155，以十进制系统中的“整数”数字开始和结束。但数字可能从 134.31 到 134.35，在这种情况下，从 130 到 135 的比例会（视觉上）压缩数据中的“重要性”——最好将比例从 134 画到 135，甚至可能134.3 至 134.4。并且数据值可能会从 0.013431 到 0.013435，或从 1343100 到 1343500。

所以我试图找出一种优雅的方法来计算“粒度”，将下限向下舍入，将上限向上舍入，以生成“令人愉悦”的图表。人们可以以某种方式“破解”它，但这不会让人相信“奇怪”的情况会得到很好的处理。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:59:30.977

只是一个想法：

1.  在您的范围内增加大约 10%，根据经验调整这个数字
2.  将范围大小除以您想要的刻度线数
3.  取该数字的以 10 为底的对数
4.  将结果乘以三，然后四舍五入到最接近的整数
5.  余数模 3 将告诉您是否希望最小有效小数以 1、2 或 5 的步长变化
6.  整数除以 3 的结果将告诉您使用 10 的幂
7.  根据刚刚计算的刻度频率，取（扩展的）范围并计算它包含的极值刻度点
8.  确保所有数据点实际上都在该范围内，如果不是，请添加刻度
9.  如果需要，通过将上面的整数减一来添加次要刻度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T20:16:17.923

我发现了一个非常有用的[计算](http://peltiertech.com/WordPress/calculate-nice-axis-scales-in-your-excel-worksheet/)，它与 excel 图表的轴比例非常相似：

![在此处输入图像描述](../Images/40250aeef5b80e2fbcc5e1751b51d110.png)

它是为 excel 编写的，但我使用并将其转换为 Objective-c 代码来设置我的图形轴。

# php - 如何使用 PHP 从 LDAP 目录中获取用户列表？

> ID：13404337
> 
> 赞同：11
> 
> 时间：2012-11-15T19:02:48.153
> 
> 标签：php, ldap

```
$ldaphost = "my_host_name";
$ds=ldap_connect($ldaphost) or die("Could not connect to $ldaphost"); 
ldap_set_option ($ds, LDAP_OPT_REFERRALS, 0);
ldap_set_option ($ds, LDAP_OPT_PROTOCOL_VERSION, 3);

if ($ds) 
{ 
    $basedn = 'my_dc_string';
    $samaccountname = 'my_user_name';
    $filters = "(samaccountname={$samaccountname})";
    $result = ldap_search($ds, $basedn, $filters);
} 
```

如何使用 PHP 从 LDAP 获取所有用户的列表？上面的代码在 ldap_search 函数上失败，给出了这个警告

“警告：ldap_search()：搜索：操作错误”

我的用户名、ldaphost 等都是正确的。不过，我不确定过滤器。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T19:21:45.437

```
/**
 * Get a list of users from Active Directory.
 */
$ldap_password = 'PASSWORD';
$ldap_username = 'USERNAME@DOMAIN';
$ldap_connection = ldap_connect(HOSTNAME);
if (FALSE === $ldap_connection){
    // Uh-oh, something is wrong...
}

// We have to set this option for the version of Active Directory we are using.
ldap_set_option($ldap_connection, LDAP_OPT_PROTOCOL_VERSION, 3) or die('Unable to set LDAP protocol version');
ldap_set_option($ldap_connection, LDAP_OPT_REFERRALS, 0); // We need this for doing an LDAP search.

if (TRUE === ldap_bind($ldap_connection, $ldap_username, $ldap_password)){
    $ldap_base_dn = 'DC=XXXX,DC=XXXX';
    $search_filter = '(&(objectCategory=person)(samaccountname=*))';
    $attributes = array();
    $attributes[] = 'givenname';
    $attributes[] = 'mail';
    $attributes[] = 'samaccountname';
    $attributes[] = 'sn';
    $result = ldap_search($ldap_connection, $ldap_base_dn, $search_filter, $attributes);
    if (FALSE !== $result){
        $entries = ldap_get_entries($ldap_connection, $result);
        for ($x=0; $x<$entries['count']; $x++){
            if (!empty($entries[$x]['givenname'][0]) &&
                 !empty($entries[$x]['mail'][0]) &&
                 !empty($entries[$x]['samaccountname'][0]) &&
                 !empty($entries[$x]['sn'][0]) &&
                 'Shop' !== $entries[$x]['sn'][0] &&
                 'Account' !== $entries[$x]['sn'][0]){
                $ad_users[strtoupper(trim($entries[$x]['samaccountname'][0]))] = array('email' => strtolower(trim($entries[$x]['mail'][0])),'first_name' => trim($entries[$x]['givenname'][0]),'last_name' => trim($entries[$x]['sn'][0]));
            }
        }
    }
    ldap_unbind($ldap_connection); // Clean up after ourselves.
}

$message .= "Retrieved ". count($ad_users) ." Active Directory users\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:16:51.367

来自[php.net](http://php.net/manual/en/ldap.using.php)：

```
ldap_connect()    // establish connection to server
   |
ldap_bind()       // anonymous or authenticated "login"
   |
do something like search or update the directory
and display the results
   |
ldap_close()      // "logout" 
```

您应该使用`ldap_bind()`登录并在所有操作之后`ldap_close()`关闭连接。

[此处的示例用法。](http://php.net/manual/en/ldap.examples-basic.php)

# traveling-salesman - 了解旅行推销员的时间复杂度

> ID：13404338
> 
> 赞同：0
> 
> 时间：2012-11-15T19:02:55.193
> 
> 标签：traveling-salesman

我从多个来源以及我对它在 2^N 时间内运行的算法的理解中阅读。我的问题是什么导致 TSP 达到这个运行时间？我似乎找不到伪代码，所以我可以检查它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:48:15.760

您的意思的算法可能是包含排除：

使用以下状态空间找到最短路径`A*`：

*   状态由城市集划分为“已访问”集、“未访问”集和“当前”节点来定义。
*   有效转换是将一个节点从“当前”移动到“已访问”，并将一个节点从“未访问”移动到“当前”集。它的成本等于从旧“当前”到新“当前”的距离。
*   起始状态是：没有一个城市被“访问”，一个任意城市是“当前”。
*   一个完成状态是：没有一个城市是“未访问过的”，任何一个城市都是“当前的”。

包含-排除的时间复杂度由状态数给出：只有一个“当前”城市（因子为`n`），所有其他城市要么被访问，要么未被访问（因子`2^n`）。

“A*”算法将最多进入每个状态一次。对于每个状态，它最多会探索“n”个其他节点并将它们推送到优先级队列中。优先级队列最多将花费“O(n)”时间来执行其操作。

因此，运行时间为`O(2^n * n * n * O(n))`= `O(2^n * poly(n))`。进一步了解表明`O(2^n * poly(n))`等于`O(2^n)`。

# xcode - Cordova/Phonegap 中的白名单错误

> ID：13404341
> 
> 赞同：0
> 
> 时间：2012-11-15T19:03:02.377
> 
> 标签：xcode, cordova, whitelist

我的 Cordova.plist 中有以下内容

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>KeyboardDisplayRequiresUserAction</key>
    <true/>
    <key>SuppressesIncrementalRendering</key>
    <false/>
    <key>UIWebViewBounce</key>
    <false/>
    <key>TopActivityIndicator</key>
    <string>gray</string>
    <key>EnableLocation</key>
    <false/>
    <key>EnableViewportScale</key>
    <false/>
    <key>AutoHideSplashScreen</key>
    <true/>
    <key>ShowSplashScreenSpinner</key>
    <true/>
    <key>MediaPlaybackRequiresUserAction</key>
    <false/>
    <key>AllowInlineMediaPlayback</key>
    <false/>
    <key>OpenAllWhitelistURLsInWebView</key>
    <false/>
    <key>BackupWebStorage</key>
    <string>cloud</string>
    <key>ExternalHosts</key>
    <array/>
    <key>item 0</key>
    <string>*</string>
    <key>Plugins</key>
    <dict>
        <key>NavigationBar</key>
        <string>NavigationBar</string>
        <key>EmailComposer</key>
        <string>EmailComposer</string>
        <key>Device</key>
        <string>CDVDevice</string>
        <key>TabBar</key>
        <string>TabBar</string>
        <key>Logger</key>
        <string>CDVLogger</string>
        <key>Compass</key>
        <string>CDVLocation</string>
        <key>Accelerometer</key>
        <string>CDVAccelerometer</string>
        <key>Camera</key>
        <string>CDVCamera</string>
        <key>NetworkStatus</key>
        <string>CDVConnection</string>
        <key>Contacts</key>
        <string>CDVContacts</string>
        <key>Debug Console</key>
        <string>CDVDebugConsole</string>
        <key>Echo</key>
        <string>CDVEcho</string>
        <key>File</key>
        <string>CDVFile</string>
        <key>FileTransfer</key>
        <string>CDVFileTransfer</string>
        <key>Geolocation</key>
        <string>CDVLocation</string>
        <key>Notification</key>
        <string>CDVNotification</string>
        <key>Media</key>
        <string>CDVSound</string>
        <key>Capture</key>
        <string>CDVCapture</string>
        <key>SplashScreen</key>
        <string>CDVSplashScreen</string>
        <key>Battery</key>
        <string>CDVBattery</string>
        <key>Globalization</key>
        <string>CDVGlobalization</string>
    </dict>
</dict>
</plist> 
```

我已添加`*`为以前一直没有问题的外部主机，我使用的是 Cordova 2.2.0，并且在尝试进行 AJAX 调用时出现白名单错误。

我看不出我哪里错了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:14:19.277

我已经改变了这部分`XML`-

```
<array/>
    <key>item 0</key>
    <string>*</string> 
```

对此——

```
<key>ExternalHosts</key>
    <array>
        <string>*</string>
    </array> 
```

# java - Java Yourkit Profiler 显示 5K+ char[] 对象没有被垃圾收集，我怎么知道哪个类是罪魁祸首？

> ID：13404343
> 
> 赞同：0
> 
> 时间：2012-11-15T19:03:13.963
> 
> 标签：java, garbage-collection, profiling, eclipse-rcp

我有一个 RCP 应用程序，内存泄漏缓慢，我最近开始使用 YourKit Profiler，这似乎是最好的应用程序。我的问题是，我看到超过 20% 的对象 char[] 数组，我想弄清楚我的应用程序中的哪些类/方法是在所有这些实例中创建的，因为它们似乎没有被垃圾收集。我连接到一个消息服务器，每秒可能消耗 500 条短信，但我很难使用 Yourkit 来发现逐渐的内存泄漏。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:44:40.197

作为 YourKit 开发人员，我可以建议记录对象分配，如此处所述[http://www.yourkit.com/docs/11/help/allocations.jsp](http://www.yourkit.com/docs/11/help/allocations.jsp)

之后，您将看到创建每个特定对象的位置。请注意，分配记录会增加（有时很重要）分析开销。

# python - 谷歌翻译中的硒单击按钮与机器人框架

> ID：13404344
> 
> 赞同：1
> 
> 时间：2012-11-15T19:03:18.327
> 
> 标签：python, selenium, robotframework

我正在尝试使用 selenium 单击谷歌翻译中的按钮（来自：按钮），但我在这样做时遇到了麻烦。我的目标是从下拉菜单中选择一种语言。

希望这是我要单击的特定部分的 html 代码

```
<div id="gt-sl-gms" class="goog-inline-block goog-flat-menu-button je" aria-expanded="false" role="listbox" style="-webkit-user-select: none;" tabindex="0" aria-haspopup="false" aria-activedescendant=""><div class="goog-inline-block goog-flat-menu-button-caption">From: English</div><div class="goog-inline-block goog-flat-menu-button-dropdown"></div></div> 
```

看着这个它看起来像 id`gt-sl-gms`所以我认为我的硒代码应该是这样的

```
Open the Browser to google translate
    Open Browser  ${google_translate}  ${browser}

Click From Language button
    Click Button  gt-sl-gms  don't wait 
```

但是，这看起来不像传统的 html 按钮，所以我不确定这种方法是否是我想要的。

第一个测试通过了，所以我知道 selenium 正在工作，但第二个测试失败了。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:37:04.297

尝试使用 xpath 和关键字“Click Element”：

```
Click From Language button
    Click Element    xpath=//div[@id="gt-sl-gms"]    don't wait 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:16:08.670

我认为问题在于 Robot Framework SeleniumLibrary 的“单击按钮”关键字仅在`<button>`HTML 标记内寻找元素定位器。尝试改用关键字“Click Element”，它会尝试将定位器与任何 HTML 元素匹配，无论其类型如何。

# asp.net - 如何在一个查询中找到两个日期之间的差异？

> ID：13404346
> 
> 赞同：-2
> 
> 时间：2012-11-15T19:03:20.910
> 
> 标签：asp.net, sql, tsql

我在 Mssql 中有一个表，在该表中我有两列保留不同的日期。（两种数据类型都是 smalldatetime）我的目标是，如果差异等于 60 天或大于 60 天，那么我想将此值绑定到网格视图中。如何在单个 sql 查询中获取这些值？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:10:56.863

信息不多，所以最好的猜测是这样的：

```
SELECT DATEDIFF(day, date1, date2) Difference, date1, date2
FROM aSecretTable
WHERE DATEDIFF(day, date1, date2) >= 60 
```

# facebook - 是否可以有一个没有标签的 facebook 标签应用程序？

> ID：13404351
> 
> 赞同：0
> 
> 时间：2012-11-15T19:03:28.450
> 
> 标签：facebook

客户希望拥有一个 facebook 页面标签应用程序，但他们不希望该标签对公众可见。如果他们以某种方式获得指向该应用程序的链接，他们可以接受普通公众访问该应用程序，但不想在其 Facebook 页面顶部使用页面标签图标宣传该应用程序。

如果我在页面选项卡图标上“从收藏夹中删除”，则应用程序本身将无法访问。如果我将应用程序置于沙盒模式，则只有管理员/测试人员可以访问它。我真正想做的就是隐藏图标本身，但让应用程序启动并运行。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:10:29.463

不，不可能有一个不显示为选项卡的页面选项卡应用程序。

为此，您/他们可能应该使用画布应用程序（设置中的“Facebook 上的应用程序”，通过 apps.facebook.com 访问）。

这还具有为他们提供更多屏幕空间的优势，并且可以通过直接链接到它而不以任何其他方式推广它来保持“匿名”

# javascript - 为什么点击日期后日期选择器会消失？

> ID：13404353
> 
> 赞同：1
> 
> 时间：2012-11-15T19:03:41.860
> 
> 标签：javascript, jquery, jsp, jqgrid

我正在尝试使用 jQgrid 和 datepicker 实现添加对话框。但是当我点击日期时，文本日期选择器不再可见。其他人运作良好。

我包括以下库，我的代码也如下：

```
<link rel="stylesheet" type="text/css" media="screen" href="DatePicker/css/jquery.ui.datepicker.css" />
<script src="DatePicker/js/jquery.ui.datepicker.js" type="text/javascript"></script>
colNames:['No','Date','Client','Available','Shipping','Note'],
colModel:[
{name:'srNo',index:'srNo', width:90,sortable:true,editable:true,stype:'text',search:true,searchrules: { required: true }},
{name:'last_modified_date', index:'last_modified_date', width:90, editable:true, editoptions:{size:20, 
        dataInit:function(el){ 
            $(el).datepicker({dateFormat:'yy-mm-dd'}); 
        }, 
        defaultValue: function(){ 
            var currentTime = new Date(); 
            var month = parseInt(currentTime.getMonth() + 1); 
            month = month <= 9 ? "0"+month : month; 
            var day = currentTime.getDate(); 
            day = day <= 9 ? "0"+day : day; 
            var year = currentTime.getFullYear(); 
            return year+"-"+month + "-"+day; 
        }

    } 
},
{name:'stdStd',index:'stdStd', width:100,sortable:false,editable:true, edittype:"text", editoptions: {value:"Yes:No"}},
{name:'stdRollNo',index:'stdRollNo', width:180,sortable:false,editable:true},
{name:'ship',index:'ship', width:180,sortable:false,editable:true},
{name:'view',index:'view', width:100,sortable:false,editable:true} 
```

],

为什么文本日期选择器消失了？

# php - PHP，使用带有嵌套查询的 PDO，结果损坏

> ID：13404356
> 
> 赞同：3
> 
> 时间：2012-11-15T19:03:51.153
> 
> 标签：php, sql-server, pdo, fetchall

我正在对 MSSQL 使用 PDO，并且需要运行嵌套查询。它们都是准备好的陈述。如果我尝试使用 fetch() 方法，它的内部查询会立即失败，所以我使用了 fetchAll()。所以，我得到了这样的东西，包括项目、产品和预算：

```
$pgm_stmt->execute();
$pgm_res = $pgm_stmt->fetchAll(PDO::FETCH_ASSOC);
foreach ($pgm_res as $pgmrow) {
    $prod_stmt->execute(array($pgmrow['ID']));
    $prod_res = $prod_stmt->fetchAll(PDO::FETCH_ASSOC);
    foreach ($prod_res as $prodrow) {
        $bdgt_stmt->execute(array($pgmrow['ID'], $prodrow['ID']));
        $bdgt_res = $bdgt_stmt->fetchAll(PDO::FETCH_NUM);
        foreach ($bdgt_res as $bdgtrow) {
            ... work here
        }
    }
} 
```

好的，第一次一切正常，但是当它循环返回第二个程序时，产品结果集会以某种方式损坏。当我在 fetchAll() 之后转储 $prod_res 变量时，这些值是从内存的其他部分、其他数组的位等随机分配的。当然它会失败，因为 $prodrow['ID'] 值未定义，因为整个结果集都被破坏了。

有人可以帮我解决这个问题吗？我难住了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-05T16:25:26.743

不是错误，而是功能，请参阅：[https ://bugs.php.net/bug.php?id=65945](https://bugs.php.net/bug.php?id=65945)

> 这是 MSSQL (TDS)、DBLIB 和 FreeTDS 的行为。每个连接规则一个语句。如果您启动另一个语句，则前一个语句将被取消。
> 
> 以前的版本将整个结果集缓冲在内存中，导致大型结果集出现 OOM 错误。
> 
> 如果需要，可以使用 fetchAll() 和循环来复制以前的行为。另一种解决方法是打开 2 个连接对象，每个语句一个。

# c# - 通过 ObjectDataSource 将 ListItemCollection 传递给自定义适配器时出错

> ID：13404358
> 
> 赞同：0
> 
> 时间：2012-11-15T19:03:59.447
> 
> 标签：c#, asp.net, serialization, webforms, objectdatasource

我有一个`ObjectDataSource`这样的声明：

```
<asp:ObjectDataSource ID="PaymentsDataSource"
                      runat="server"
                      DataObjectTypeName="Payment"
                      TypeName="PaymentAdapter"
                      SelectMethod="GetPayments">
    <SelectParameters>
        <asp:ControlParameter ControlID="StartDate"
                              PropertyName="Text"
                              Name="startDate"
                              Type="DateTime" />
        <asp:ControlParameter ControlID="EndDate"
                              PropertyName="Text"
                              Name="endDate"
                              Type="DateTime" />
        <asp:ControlParameter ControlID="LocationCodes"
                              PropertyName="Items"
                              Name="selectedLocationCodes"
                              Type="Object" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

控制问题是`LocationCodes`这样声明的：

```
<select id="LocationCodes"
        disabled="disabled"
        runat="server"
        class="chzn-container"
        multiple=""
        data-placeholder="Choose a Location Code(s)"
        style="width: 100%;"
        data-class="span10">
</select> 
```

适配器上的服务器端`Select`方法定义如下：

```
[DataObjectMethod(DataObjectMethodType.Select, true)]
public List<Payment> GetPayments(
    DateTime startDate,
    DateTime endDate,
    object selectedLocationCodes)
{
} 
```

现在，***即使`ListItemCollection`成功传递到`Select`方法中并且方法中的代码`Select`可以正常处理***，仍然会被动地抛出以下错误`Application_Error`。有没有办法忽略这个错误？

```
11/15/2012 13:37:49 168 (Machine=, App=34a846f1, Project=null, Dept=null, Thread=007, TraceLevel=1)
    Exception Source: mscorlib
    Exception Type: System.Runtime.Serialization.SerializationException
    Exception Message: Type 'System.Web.UI.WebControls.ListItemCollection' in Assembly 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' is not marked as serializable. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:42:58.673

问题是你不能序列化一个对象。如果您要将“ ***object selectedLocationCodes*** ”更改为某种预定义的类，那么应该没有问题。为了将对象序列化，基本上需要将其分解为 XML，这意味着它需要知道每个字段是什么类型的数据。对象的描述不够具体，因为它可以是任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:03:03.493

好的，所以我解决这个问题的方法是通过添加 this 来`ViewState`关闭`ObjectDataSource`元素`ViewStateMode="Disabled"`。

# matlab - matlab用户定义函数，如何创建和调用它们

> ID：13404360
> 
> 赞同：2
> 
> 时间：2012-11-15T19:04:02.050
> 
> 标签：matlab, user-defined-functions

我在 matlab 脚本中编写了代码。我需要通过为中心创建一个函数来完成它。

这是我编写的示例代码

```
while(1)        % infinite loop

trigger(obj); 
im=getdata(obj,1);   %get the image

trigger(obj); 
im1=getdata(obj,1);  % the first time triggering occurs the image is just
                              % noise. Thus the 2nd image is used.
b=rgb2gray(im1);      % convert to grayscale
a=roicolor(b,[100:118]);  %define a region of interest
a=~a;

c=center(a);
                  % use disp(c) to see the values, while testing
if (c(2)>190)
fwrite(ser,'r');  % send move right
elseif (c(2)<170 && c(2)>10)
fwrite(ser,'l');
elseif c(2)<170
fwrite(ser,'l'); % stop 
```

现在在这个**中心（a）**它不是matlab中的预定义函数，它是用户定义的。

**我使用的功能 center(a) 不是内置功能。我建议你为中心编写一个我可以处理的函数**

我希望你们帮助我在 matlab 中创建一个函数，并在我需要的时候调用用户定义的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:07:28.477

只需创建一个名为`center.m`将所有代码放入其中的文件，然后使用以下内容启动文件（在顶部）：

```
function c = center(a); 
```

# c# - 我必须关闭 Word 互操作应用程序吗？

> ID：13404362
> 
> 赞同：2
> 
> 时间：2012-11-15T19:04:35.413
> 
> 标签：c#, ms-word, office-interop

我正在使用以下代码：

```
using MSWord = Microsoft.Office.Interop.Word;

.
.
.

MSWord.Application wordApp = new MSWord.Application();

MSWord.Document wordDoc = new MSWord.Document();

wordDoc = wordApp.Documents.Add(Template: oTemplatePath);

//do something with the Document... replace fields and so on...

wordApp.Visible = true; 
```

例如，该功能然后退出并且我的应用程序正在关闭。现在用户可以编辑打开的文档，然后保存或关闭它。

我是否必须以编程方式关闭应用程序对象（就 COM 对象等而言）？？？或者这是垃圾收集器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:20:15.387

如果您想在使用 Microsoft.Interop 时正确关闭/处置 COM 对象，您可能需要使用此方法

```
System.Runtime.InteropServices.Marshal.ReleaseComObject( "Replace with your ComObject Here"); 
```

因此，例如，如果我创建了一个名为 wordApp 的对象，我会像这样声明它并像下面这样处理它

```
MSWord.Application wordApp = new MSWord.Application();
System.Runtime.InteropServices.Marshal.ReleaseComObject(wordApp); 
```

这可以给你一个如何使用 ReleaseComObject [Marshal.ReleaseComObject 方法的例子](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:12:49.043

你没事。当您调用 `new MSWord.Application();`一个新的 Ms-Word 进程时，它会启动并管理 Document。

你不必担心。如果您将文档显示给用户，当他关闭文档时，一切都会完成。

# mongodb - 避免 Mongoose 数组上的重复条目

> ID：13404363
> 
> 赞同：14
> 
> 时间：2012-11-15T19:04:35.557
> 
> 标签：mongodb, mongoose

我有一个使用猫鼬的多对多关系，看起来像这样。

```
TeamSchema = new Schema 
    name : String
    players: [{ type: ObjectId, ref: 'Player' }] 
```

我想要做的是确保一个玩家不会在团队中出现两次。

当我做：

```
team.players.push(player)
team.save() 
```

如果我之前已经添加了玩家，我会在团队文档中看到两次玩家 ID。是否可以设置某种 mongo/mongoose 标志，以便保存方法抛出异常，或者不添加播放器。我知道我可以手动检查，但我更喜欢更简单的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-15T20:19:46.327

像这样使用[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/addToSet/)更新运算符：

```
Team.update({_id: team._id}, {$addToSet: {players: player}}) 
```

假设是玩家的 ObjectId，如果它不存在`player`，它只会被添加到团队的数组中。`players`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-25T12:19:49.090

只需使用[`addToSet`](http://mongoosejs.com/docs/api.html#types_array_MongooseArray.addToSet)方法：

```
team.players.addToSet(player)
team.save() 
```

# python - Django Tag App，定义异构多对多关系

> ID：13404368
> 
> 赞同：0
> 
> 时间：2012-11-15T19:04:46.177
> 
> 标签：python, django, generics, database-design, django-models

我正在构建一个类似于 stackoverflow 使用的标签系统。标签由名称和与该标签关联的模型实例的集合组成。我找不到任何关于如何声明这种类型的多对多关系的文档。通常它只是 ManyToMany(model-name) 但我在这个集合中有很多我想要的模型。有没有人有任何可能有用的指针或资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:24:47.533

您可以使用[ContentType](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)来执行此操作。该页面上的文档中甚至还有一个使用它进行标记的示例。您可能无法使用典型的 ManyToMany 字段，而是创建一个标记模型，该模型具有标记模型的 ForeignKey 和 GenericForeignKey。

# directed-acyclic-graphs - Condor DAG 文件 - 有许多孩子的父母。用多行而不是一行表示孩子的父母是否合法？

> ID：13404371
> 
> 赞同：3
> 
> 时间：2012-11-15T19:04:56.050
> 
> 标签：directed-acyclic-graphs, condor

这是我所拥有的简单树：

```
 A     B
      \   /
        C 
```

A 和 B 是父进程，C 只能在 A 和 B 完成后运行。通常，DAG 文件如下所示：

```
JOB A a.condor
JOB B b.condor
JOB C c.condor
PARENT A, B CHILD C 
```

我想知道是否有人知道以下是否也可以工作：

```
JOB A a.condor
JOB B b.condor
JOB C c.condor
PARENT A CHILD C
PARENT B CHILD C 
```

我查看了 Condor DAG 文档，但没有多大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T15:36:15.957

是的，您的两个示例都是有效且等效的。您可以根据需要进行任意数量的 PARENT/CHILD 声明——即使在多个声明中引用同一个节点——只要没有循环，DAGMan 就会使用它们。

这是Condor 开发人员的[支持票，用于在文档中阐明这一点。](https://htcondor-wiki.cs.wisc.edu/index.cgi/tktview?tn=3978)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T20:10:32.820

DAG 解析器非常愚蠢，因此当 DAGMan 尝试查找名为“A”的节点时，“PARENT A, B Child C”行会导致问题。即，您应该删除逗号。

# c# - 相对于模型位置和旋转围绕一个点旋转

> ID：13404372
> 
> 赞同：1
> 
> 时间：2012-11-15T19:05:03.600
> 
> 标签：c#, rotation, unity3d

我在 Unity (C#) 中有一个空间模型，这个模型是跳伞。它始终面向地面，但 X 和 Z 旋转。我想要的效果是，当我旋转时，而不是围绕模型中心旋转，我围绕一个点直接旋转到模型左侧或右侧的设定距离，具体取决于模型。我已经有了旋转逻辑，但我没有的是如何确定“向右 X 像素”的世界位置，因为旋转会改变左/右。例如：

当我开始时，左边是-1,0；右边是 +1,0 x 我向左旋转 45 度。左边仍然是-1,0。但现在我的位置是 (~) -.7,.7。而且由于我的“左”仍然指向-1,0，“右突然指向（〜）0,1.4

那么，在给定模型的 Vector3 位置、模型的 X、Z 旋转和偏移量的情况下，我如何确定“向左”和“向右”的位置。

对于这些视觉类型，Just Cause 2 做得对（尽管有时很难说）：http: [//youtu.be/C6H3PPfx1KI ?t=2m](http://youtu.be/C6H3PPfx1KI?t=2m)

感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:40:38.387

听起来您只想执行以下操作：

1.  在模型空间中分配左/右坐标`left = (-1, 0, 0)`，`right = (1, 0, 0)`。
2.  将旋转点从模型空间转换到世界空间（例如`worldLeft = transform.TransformPoint(left)`）。
3.  围绕世界空间点 ( `transform.RotateAround(worldLeft, Vector3.up, speed * Time.deltaTime)`) 旋转。

# c++ - 访问 .ldb 文件和多重连接。

> ID：13404373
> 
> 赞同：2
> 
> 时间：2012-11-15T19:05:07.407
> 
> 标签：c++, ms-access, odbc

我有一个 API 可以打开一个访问数据库进行读写。API 在连接被构造时打开连接，在连接被破坏时关闭连接。打开数据库`.ldb`时，会创建一个文件，当它关闭时，它会被删除（或消失）。

有多个应用程序使用 API 来读取和写入访问数据库。我想知道：

1.  是否`ldb`用于跟踪多个连接的文件
2.  调用 an 会`db.close()`关闭所有连接还是仅关闭一个实例。
3.  上述方法是否会有任何同步问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:26:01.920

db.Close() 关闭一个连接。关闭所有连接后，会自动删除 .ldb。

请记住，虽然 Jet 数据库（即 Access）确实支持多个同时用户，但它们并不是非常适合非常大的并发用户群。一方面，当出现网络问题时，它们很容易损坏。我现在实际上正在处理这个问题。如果涉及到这一点，您将需要使用数据库服务器。

也就是说，我多次以这种方式使用 Jet 数据库。

当您说“同步问题”时，不确定您的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:58:17.760

作为对其他好的答案的附加说明，我强烈建议在客户端应用程序的生命周期内保持与虚拟表的连接打开。

过于频繁地关闭连接并允许每次都创建/删除锁定文件是一个巨大的性能瓶颈，并且在某些快速访问数据库的情况下，实际上会导致查询和插入失败。

您可以在我不久前给出的[这个答案](https://stackoverflow.com/questions/6361947/why-one-public-oledbconnection-is-deprecated-alternative-to-solve-the-bug-too/6367107#6367107)中阅读更多内容。

在性能和可靠性方面，您可以从 Access 数据库中获得很多好处，前提是您牢记以下几点：

*   在客户端的生命周期内保持与虚拟表的连接打开（或者如果您不想一直保持打开状态，至少使用一些超时将在 20 秒不活动后关闭连接）。

*   设计您的客户端应用程序以正确关闭所有连接（包括在我该执行此操作时的虚拟连接），无论发生什么（例如崩溃、用户关闭等）。
    将锁留在原处并不好，因为这可能意味着客户端已将数据库置于未知状态，并且如果其他客户端继续留下陈旧的锁，则可能会增加损坏的可能性。

*   定期压缩和修复数据库。让它成为夜间任务。
    这将确保优化数据库，并删除任何陈旧数据并正确关闭打开的锁。

*   良好、稳定的网络连接对于基于文件的数据库的数据完整性至关重要：避免像瘟疫一样使用 WiFi。

*   有办法从数据库服务器本身踢出所有客户端。
    例如，有一个表，其中包含`MaintenanceLock`客户定期轮询的字段。如果设置了该字段，则客户端应在为用户提供保存其工作的机会后断开连接。
    同样，当客户端应用程序启动时，检查数据库中的此字段以允许或禁止客户端连接到它。
    现在，您可以随时快速退出客户，而无需去找每个用户并要求他们关闭应用程序。当您在数据库上运行 Compact & Repair 维护时，确保没有客户端在夜间打开仍然连接到数据库也非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T19:38:53.343

1.  是的，需要多个用户以共享模式打开数据库。似乎它代表“锁定数据库”。在 MSDN 中查看更多信息：[Access 2000 中的 .ldb 文件简介](http://support.microsoft.com/kb/208778/en-us)。
2.  `Close()`仅关闭一个连接，其他连接不受影响。
3.  是的，如果您尝试写入其他用户已锁定的记录，这是可能的。但是数据将保持一致，您只会收到有关写入冲突的错误。

实际上 MS Access 并不是多连接使用场景的最佳解决方案。您可以查看[SQL Server Compact](http://msdn.microsoft.com/en-us/library/cc645984%28v=sql.100%29.aspx)，它是 MS SQL Server 的轻量级版本。它在进程内运行，支持多连接和多线程，大多数强大的 T-SQL 功能（不包括存储过程）等。

# android - 如何将pt转换为sp？

> ID：13404377
> 
> 赞同：43
> 
> 时间：2012-11-15T19:05:22.717
> 
> 标签：android, units-of-measurement, psd

我是一名视觉设计师，从事 android 设计，我正在尝试为我们的工程师指定我的 PSD 文件。我似乎在任何 Android 文档中都找不到关于将点大小转换为 SP 类型的任何文档。（只是SP 应该用于类型）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-15T20:19:50.357

问题是它取决于密度。真的，它们不是很好的衡量标准来尝试比较。

*   **点数**：一个 pica 有 12 个点，每英寸 6 个 pica，所以每英寸 72（更准确地说是 72.27）点。

*   **设备无关像素 (DP)**：这些将等于 MDPI 显示器的像素大小、HDPI 显示器的 1.5 倍像素大小和 XHDPI 显示器的 2 倍像素大小。（例如 12dp = 12px MDPI、18px HDPI、24px XHDPI）。

*   **Scaled Pixels**：这些将等同于 DP 值，但会根据用户偏好进行缩放以变小或变大。

如果您以 72 dpi（Photoshop 默认 DPI 设置）进行设计，则 8pt 字体将等效于 8px，即 MDPI 为 8px，HDPI 为 12px，XHDPI 为 16px，或者更简单地为所有密度的 8dp。我不知道对不同的 SP 设置应用了多少缩放，所以你必须找出它，但基本上我只会给他们模型并让他们从那里适当地调整它的大小——他们肯定可以把它弄得很漂亮从视觉上关闭。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-05T13:35:21.373

与 dp（和减去用户文本大小因子的 sp）相比，pt 具有几乎完全相同的物理测量值。Dp 或多或少是一个粗略的近似值，因为它在较宽的 dpi 范围内使用相同的因子。

您不能将 pt 转换为 sp，就像 Flavio 所说的那样。但是，您可以大致将 pt 转换为 dp（在极端情况下为 +/- 30%，但至少预期为 +/-10%）。

使用 dpi 存储桶 (ldp=120,mdpi=160,hdpi=240,xhdpi=320) 最通用的转换因子是**x0.45** (= 72/120*0.75 = 72/160*1 = 72/240*1 ,5 = 72/320*2) 如果使用精确的 dpi 存储桶值。

对于更精确的因素：

*   mdpi（缩放因子：1.0）10.1" WXGA 屏幕 (149dpi) 为**0.483076923** (= 72/149 * 1.0)
*   hdpi (缩放因子: 1.5) Nexus 7 (216dpi) 是**0.5** (= 72/216 * 1.5)
*   xhdpi (缩放因子: 2.0) Nexus 10 (300dpi) 是**0.48** (= 72/300 * 2)

所以 12 pt 将在...

*   10.1" WXGA：24.84dp
*   Nexus 7：24 dp
*   Nexus 10：25dp
*   dpi 桶值：26.666dp

您可以对 sp 使用相同的值，但请记住，这些值可能会因用户设置而增加/减少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-03T12:21:22.500

这是一个很好的工具，可以帮助在各种测量之间进行转换 - 输入您所知道的，它会计算其余的！

[http://angrytools.com/android/pixelcalc/](http://angrytools.com/android/pixelcalc/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T19:07:59.460

像素和 sp 之间没有直接映射，因为 sps 是随着用户在系统设置中更改设备字体大小而动态设置的。用户可能希望以更小或更大的尺寸查看所有应用字体。这是操作系统提供的辅助功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T19:11:39.403

^弗拉维奥所说的。但请查看 Android 开发者网站上的显示指标类概述。你可能会在这里找到你需要的东西...... [http://developer.android.com/reference/android/util/DisplayMetrics.html#](http://developer.android.com/reference/android/util/DisplayMetrics.html#)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-09T23:08:33.667

每英寸有 72 pts，每英寸有 160 sp（*在设备设置中使用标准字体大小*）。这意味着每 72 点有 160sp。160sp/72pts 简化为 20/9。因此，将 pts 转换为 sp 或 dp 时，请使用**pts*20/9**。正如其他人在这里已经提到的那样，sp 确实会因用户的设置而异，因此如果您不希望文本大小随设备设置而变化，请使用 dp。

# iphone - ARC 已关闭，Analyzer 显示拒绝类方法

> ID：13404380
> 
> 赞同：1
> 
> 时间：2012-11-15T19:05:40.173
> 
> 标签：iphone, ios6

```
+ (Photo *)photoWithImage:(UIImage *)image {
return [[Photo alloc] initWithImage:image] ;// Potential leak of an object

} 
```

方法返回一个具有+1保留计数的Objective-C对象作为拥有引用返回给调用者的对象（将单个保留计数转移给调用者）对象泄漏：从名称（photoWithImage）不以副本开头的方法返回分配的对象， mutableCopy、alloc 或 new

```
+ (Photo *)photoWithFilePath:(NSString *)path {
return [[Photo alloc] initWithFilePath:path];
}// potential leak of an object 
```

方法返回一个具有+1保留计数的Objective-C对象作为拥有引用返回给调用者的对象（将单个保留计数转移给调用者）对象泄漏：分配的对象从名称（photoWithFilePath）不以副本开头的方法返回， mutableCopy、alloc 或 new

如果不想使用自动释放，还有其他方法可以修复它吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:03:22.553

您收到此错误是因为您没有遵循约定。您必须进行调整以遵循约定。由于您不想自动释放返回的对象，您可以将这些方法重命名为以 new (`newPhotoWithImage`和`newPhotoWithPath`) 开头。

你没有说为什么你不想返回自动释放的对象。也许如果您详细说明这些原因，我们可以提出更好的解决方案。

# regex - 使用正则表达式从行中提取子字符串并删除具有重复子字符串的行

> ID：13404384
> 
> 赞同：0
> 
> 时间：2012-11-15T19:06:15.853
> 
> 标签：regex, linux, bash, sed, awk

我有一个文本文件，其中包含以下形式的一些行

```
*,[anything, even blanks],[dog|log|frog],[dog|log|frog],[0|1],[0|1],[0|1] 
```

我想删除`*`（**不区分大小写**）具有相同值的重复行，即任何剩余的`,[anything, even blanks],[dog|log|frog],[dog|log|frog],[0|1],[0|1],[0|1]`

例如这里是一个示例文本文件

```
test,bar,log,dog,0,0,0
one
foo,bar,log,dog,0,0,0
/^test$/,bar,log,dog,0,0,0
one
FOO,,frog,frog,1,1,1 
```

生成的文本文件应该删除重复项`foo`（只要删除重复项，顺序对我来说并不重要，留下 1 个唯一的）

```
test,bar,log,dog,0,0,0
one
/^test$/,bar,log,dog,0,0,0
one
FOO,,frog,frog,1,1,1 
```

我可以做的最简单的 bash 命令是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:54:30.050

```
awk -F, '!seen[tolower($1)]++' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:31:46.437

您可以这样做`awk`（因为您不在乎保留哪些重复项）：

```
awk -F, '{lines[tolower($1)]=$0}END{for (l in lines) print lines[l]}' 
```

如果您想保留第一个：

```
awk -F, '{if (lines[tolower($1)]!=1) { print; lines[tolower($1)]=1 } }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:32:31.700

```
#!/bin/bash

for line in $(cat $1)
do
    key=$( echo ${line%%,*} | awk '{print tolower($0)}')

    found=0
    for k in ${keys[@]} ; do [[ "$k" == "$key" ]] && found=1 && break ; done
    (( found )) && continue

    echo $line
    keys=( "${keys[@]}" "$key" )
done 
```

使用数组而不是关联（哈希），这会降低性能。但它似乎工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T07:13:22.963

这可能对您有用（GNU sed）：

```
cat -n file | 
sort -fk2,2 |
sed -r ':a;$!N;s/^.{7}([^,]*),[^,]*(,(d|l|fr)og){2}(,[01]){3}\n(.{7}\1,[^,]*(,(d|l|fr)og){2}(,[01]){3})$/\5/i;ta;P;D' |
sort -n |
sed -r 's/^.{7}//' 
```

1.  给每一行编号。
2.  按第一个键排序（忽略大小写）
3.  删除重复项（基于特定标准）
4.  将缩小的文件排序回原始顺序
5.  删除行号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T19:18:56.693

搜索

```
(?:(?<=\n)|^)(.*)((?:,(?:d|l|fr)og){2}(?:,[01]){3})(?=\n)([\s\S]*)(?<=\n).*\2(?:\n|$) 
```

...并替换为

```
$1$2$3 
```

# asp.net - 如何增加 IIS 进程优先级（对于 w3wp 和 iis apppool）？

> ID：13404388
> 
> 赞同：3
> 
> 时间：2012-11-15T19:06:27.707
> 
> 标签：asp.net, iis, iis-7, remoting

有一个带有一组 Web 服务的 ASP.NET 应用程序，还有一个调用这些 Web 服务的 WinForms 应用程序。

w3wp.exe（处理 asmx 调用）运行特殊进程，这些进程执行非常“困难”的工作（如压缩、xml 解析等）。为什么我们需要在单独的进程中完成它以及为什么我们不在 w3wp.exe 中运行此代码，这是一个很长的故事 - 这在这里无关紧要。一定是这样的。

如果多个用户同时发出多个请求，可能会有 30-40 个这样的进程，它们会消耗 CPU。它们消耗太多，以至于几乎没有 CPU 资源留给 IIS 本身。

**因此，接下来的问题是：当以下 HTTP 请求到达此 IIS 时，IIS 无法处理它们：它甚至无法将它们传递给 w3wp.exe，因为服务器被“轰炸”了。** 结果，在高峰时间，有 30 个用户运行了他们的查询，第 31 个用户在 WinForms 客户端“超时已过期”中收到了 WebException。

我在互联网上找到了很多解释如何调整 IIS 的文章，但没有人考虑到其他进程和/或应用程序可以在同一台机器上运行的事实。并且没有人告诉如何做才能使 IIS 具有更高的优先级。

**所以，接下来的问题是：有没有办法“解释” IIS，它应该默认启动 apppool (svchost.exe) 和 w3wp.exe 并具有更高的优先级？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-27T11:26:27.083

我在 Windows Server 2008 r2 中遇到了这个问题。我有一个 Windows 服务（它使用并行处理），它曾经使我的 CPU 膨胀很多，并且没有为 IIS 和 SQL Server 留下任何东西。

因此，我将**处理器关联**设置为 Windows 服务以仅使用特定处理器。您进入**任务管理器->右键单击进程->设置亲和力。**

这使得其他处理器可以免费用于 SQL 和 IIS。

在某种程度上，它降低了 Windows 服务的生产力，该服务现在使用有限的处理器集，但没那么重要。

# algorithm - 计算一百万个素数

> ID：13404389
> 
> 赞同：6
> 
> 时间：2012-11-15T19:06:29.917
> 
> 标签：algorithm, math, numbers, primes

我有一个问题要打印一百万个素数。我为此编写了一个 java 程序。目前计算它大约需要 1.5 分钟。我认为我的解决方案效率不高。我使用了以下算法：

*   最初将 1 2 3 添加到素数列表
*   计算要检查的数字的最后一位
*   检查数字是否为 0 、 2 或 4 或 6 或 8 然后跳过数字
*   否则计算数字的平方根..
*   试图将数字从 2 开始除以数字的平方根
*   如果数字可整除，则跳过数字，否则将其添加到素数列表

我也阅读了其他几个解决方案，但我没有找到一个好的答案。理想情况下，请建议计算此时间的最短时间以及需要进行哪些更改才能使算法更有效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T19:08:59.107

如果您在列表中添加了 1，那么您的答案已经错了 :)

无论如何，[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)是您应该开始的地方，它非常简单且非常有效。

一旦您熟悉了筛子的概念以及它们的工作原理，您就可以继续使用[Sieve of Atkin](http://en.wikipedia.org/wiki/Sieve_of_Atkin)，它有点复杂，但显然更有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T19:08:47.547

关键事项：

1.  跳过所有偶数。从 5 开始，一次添加两个。
2.  1不是质数...
3.  通过找到所有素数的模直到数字的平方根来测试一个数字。除了素数之外，无需测试任何东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T19:08:59.887

您可能希望实现[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)算法以查找从 1 到的素数，`n`并在需要时迭代地增加范围。（即尚未找到 1,000,000 个素数）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T01:04:49.563

一个简单的 Eratosthenes 筛子像拍板一样运行。这会在不到一秒的时间内计算出我的盒子上的第 1,000,000 个素数：

```
class PrimeSieve
{
    public List<int> Primes;

    private BitArray Sieve;

    public PrimeSieve(int max)
    {
        Primes = new List<int> { 2, 3 }; // Must include at least 2, 3.
        Sieve = new BitArray(max + 1);
        foreach (var p in Primes)
            for (var i = p * p; i < Sieve.Length; i += p) Sieve[i] = true;
    }

    public int Extend()
    {
        var p = Primes.Last() + 2; // Skip the even numbers.
        while (Sieve[p]) p += 2;
        for (var i = p * p; i < Sieve.Length; i += p) Sieve[i] = true;
        Primes.Add(p);
        return p;
    }
} 
```

**编辑：**最佳筛选从 p^2 开始，而不是 2p，正如 Will Ness 正确指出的那样（所有低于 p^2 的化合物数都将在早期迭代中标记）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-16T01:43:35.020

首先，1 不是质数。

其次，第 100 万个素数是 15,485,863，因此您需要为一些大型数据处理做好准备。

第三，您可能想使用埃拉托色尼筛；这是一个简单的版本：

```
function sieve(n)
    bits := makeArray(0..n, True)
    for p from 2 to n step 1
        if bits[p]
            output p
            for i from p*p to n step p
                bits[i] := False 
```

这可能不适用于计算前一百万个素数所需的数组大小。在这种情况下，您将需要实现 Eratosthenes 的分段筛。

我在博客中[对质数做了很多工作，包括](http://programmingpraxis.com/contents/themes/#Prime%20Numbers)[一篇](http://programmingpraxis.com/essays)提供优化的埃拉托色尼筛法的文章，并以五种编程语言实现。

无论您做什么，使用任何编程语言，您都应该能够在不超过几秒钟的时间内计算出前一百万个素数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T20:14:25.220

[这是一个实现Trial 除法筛](http://en.wikipedia.org/wiki/Trial_division)的 Ocaml 程序（Will 正确指出，这是 Eratosthenes 的倒数）：

```
(* Creates a function for streaming integers from x onward *)
let stream x =
  let counter = ref (x) in
  fun () ->
    let _ = counter := !counter + 1 in
    !counter;;

(* Filter the given stream of any multiples of x *)
let filter s x = fun () ->
  let rec filter' () = match s () with
    n when n mod x = 0 ->
      filter' ()|
    n ->
      n in
  filter' ();;

(* Get next prime, apply a new filter by that prime to the remainder of the stream *)
let primes count =
  let rec primes' count' s = match count' with
    0 ->
      []|
    _ -> 
      let n = s () in
      n :: primes' (count' - 1) (filter s n) in
  primes' count (stream 1);; 
```

它适用于整数流。每次发现一个新的素数时，都会向流中添加一个过滤器，以便将流的其余部分过滤掉该素数的任何倍数。该程序也可以更改为*按需*生成素数。

在 Java 中采用相同的方法应该相当容易。

希望这可以帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-24T07:57:35.870

这是一个 javascript 解决方案，它使用递归和迭代来达到百万分之一的素数。它不如埃拉托色尼筛法快，但不需要事先知道第百万个素数的值（即所需筛子的大小）：

```
function findPrimes(n, current, primes) {
    if (!n || current < 2) return []
    var isPrime = true
    for (var i = 0; i < primes.length; i++) {
        if (current % primes[i] == 0) {
            isPrime = false
            break
        }
    }
    if (isPrime) primes.push(current)
    if (primes.length < n) return findPrimes(n, current + 1, primes)
    else return primes
}

var primes = [2,3]
for (var i = 1; i <= 1000; i++) {
    primes = findPrimes(i*1000, primes[primes.length - 1]+1, primes)
    console.log(i*1000 + 'th prime: ' + primes[primes.length-1])
}
process.exit() 
```

输出：

```
...
996000th prime: 15419293
997000th prime: 15435941
998000th prime: 15452873
999000th prime: 15469313
1000000th prime: 15485863

Process finished with exit code 0 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-09T06:54:44.043

> 作为一个较新的级别，我将尝试这个级别，因此任何提高效率和速度的改进都值得赞赏

```
 public static void main(String ar[]) {
    ArrayList primeNumbers = new ArrayList();

    for(int i = 2; primeNumbers.size() < 1000000; i++) {//first 1 million prime number

       // for(int i = 2; i < 1000000; i++) {//prime numbers from 1 to 1 million

            boolean divisible = false;

        for(int j=2;j<i/2;j++){

            if((i % j) == 0) {
                divisible = true;
                break;
            }
        }

        if(divisible == false) {
            primeNumbers.add(i);
           // System.out.println(i + " ");
        }
    }
    System.out.println(primeNumbers);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-26T05:38:56.547

> *   最初将 1 2 3 添加到素数列表

实际上，只需 2 个就足够了。硬编码 3 最多可以节省一毫秒。没有必要在 1 上竖琴。我相信包括它是一个诚实的错误。你已经知道了，并且在这个程序上工作将有助于证实这一点。

> *   计算要检查的数字的最后一位

最后一个数字？在什么基地？基数 10？我想这可能是你的问题。

> *   检查数字是否为 0、2 或 4 或 6 或 8，然后跳过数字，否则计算数字的平方根

我认为这就是问题所在。您的程序应该简单地跳过偶数，因为除了 -2 和 2 之外，它们都是复合的。另一方面，这不会将运行时间减半，因为像 91 和 2209 这样的奇数可能需要更多的努力才能被排除为非质数。

> *   尝试将数字从 2 开始除以数字的平方根，如果数字是可整除的，则跳过数字，否则将其添加到素数列表

“2 直到数字的平方根”是否包括像 4、6 和 9 这样的数字？唯一需要检查的潜在因素是已经被证明是素数的数字。如果*n*不能被 7 整除，则它也不能被 49 整除。如果你正在建立一个列表，你不妨用它来检查潜在的素数。

对 Java 进行基准测试有点困难，因为您受制于运行时系统。尽管如此，一分半钟虽然被梅森认为是奇迹，但在今天还是太慢了。五，十秒，我觉得可以接受。

也许这是您应该避免使用对象来支持原语数组的情况之一。我的初稿比你的还要长。最终我想出了这个：

```
 static int[] fillWithPrimes(int quantity) {
        int[] primes = new int[quantity];
        primes[0] = 2;
        int currPi = 1;
        int currIndex = 0;
        int currNum = 3;
        int currPrime;
        boolean coPrimeFlag;
        double squareRoot;
        while (currPi < quantity) {
            squareRoot = Math.sqrt(currNum);
            do {
                currPrime = primes[currIndex];
                coPrimeFlag = (currNum % currPrime != 0);
                currIndex++;
            } while (coPrimeFlag && currPrime <= squareRoot);
            if (coPrimeFlag) {
                primes[currPi] = currNum;
                currPi++;
            }
            currNum += 2;
            currIndex = 0;
        }
        return primes;
    } 
```

然后我写了一个`main()`记录调用前的时间，`fillWithPrimes()`参数`quantity`为 1,000,000，并报告结果：

> 跑：
> 
> 操作耗时 2378 毫秒
> 
> 第 10 个素数是 29
> 
> 第 100 个素数是 541
> 
> 第 1000 个素数是 7919
> 
> 第 10000 个素数是 104729
> 
> 第 100000 个素数是 1299709
> 
> 第 1000000 个素数是 15485863
> 
> 构建成功（总时间：2 秒）

我相信它可以进一步优化。就我个人而言，我对两秒半的时间感到满意。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-04-18T18:13:02.580

不是 5 之后的所有内容都以 5 结尾，也可以被 5 整除，因此您可以跳过正确的内容 (1,numb)<>"5" 例如 987,985。我在 Excel 中制作了一个，它将测试一百万个素数并在大约 15 秒内将它们吐到一列中，但它会在大约 1500 万个时变得疯狂

# java - 将功能分配给 Jbutton

> ID：13404394
> 
> 赞同：1
> 
> 时间：2012-11-15T19:06:44.290
> 
> 标签：java, swing, jbutton, actionlistener, jtree

我有几个类来创建一个非常简单的 GUI ( `JFrame`)，其中包含一些对象，例如 JTabbedPanel 和`JTree`. 在 中创建功能区的类之一`JTabbedPanel`创建了`JButton`，它应该具有更新`JTree`.

我确实有一些 getter，但我不知道如何使用`JButton`更新在 main 方法中创建的对象（GUI 对象，我可以从那里到达`JTree`）。

如何更新在实际类的 main 方法中创建的对象上的某些内容`JButton`？

我可能不得不改变我的项目结构。

```
public class Gui extends JFrame{
private Ribbon ribbon;
private Status status;
public Panel panel;

public Gui(){
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle("INIT TITLE");
    setExtendedState(Frame.MAXIMIZED_BOTH);     
    setMinimumSize(new Dimension(600,400));
    setVisible(true);
    try {
          UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
    } catch (Exception e) {
          e.printStackTrace();
    }

    ribbon = new Ribbon();
    add(ribbon, BorderLayout.NORTH);        
    status = new Status();
    add(status, BorderLayout.SOUTH);
    panel = new Panel();
    add(panel, JSplitPane.HORIZONTAL_SPLIT);
    //panel.setLeftComponent(panel.getTree());
    //panel.openProject();
    setVisible(true);
    panel.loadProject();
} 
```

功能区并没有做很多事情：

公共类功能区扩展 JTabbedPane {

```
public Ribbon(){

    addTab("Home", null, new RibbonHome());
    addTab("Import", null, new RibbonImport());
    addTab("Options", null, new RibbonOptions());
} 
```

}

但是 Ribbon-Tab 创建了一些按钮：

```
public class RibbonHome extends JPanel{
private JButton b1, b2, b3;

public RibbonHome(){
    b1 = new JButton("test1");
    b2 = new JButton("test2");
    b3 = new JButton("test3");
    add(b1);
    add(b2);
    add(b3);

    b1.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
             //UPDATE the JTree 
        }
    });      

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:11:52.207

1.  按钮。[addActionListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#addActionListener%28java.awt.event.ActionListener%29) ( 主要 );
2.  main 实现[ActionListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)并提供方法[actionPerformed()](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html#actionPerformed%28java.awt.event.ActionEvent%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:59:46.747

最明显的答案当然是将你的类的引用传递`Gui`给你的`Ribbon`类，然后它又可以将它传递给`RibbonHome`类。

```
public Gui{
  //...
  ribbon = new Ribbon( this );
  //...
}

public Ribbon ( Gui gui ){
  //...
  addTab("Home", null, new RibbonHome( gui ));
  //...
}

public RibbonHome( Gui gui){
  //...
  b1.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent arg0) {
      //UPDATE the JTree 
    }
  }); 
  //...
} 
```

但是，这确保了不同类之间非常紧密的耦合。我不知道你到底想更新什么，`JTree`但更基本的解决方案可能是在你的不同视图之间共享一个模型。当模型更改时，您`JTree`会自行更新，而按钮只会更新模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:11:42.690

您正在做的事情的代码示例会使事情变得更容易，但无论如何。

可能您想要制作您计划更新类成员的组件。这样，您可以在它现在初始化的地方对其进行初始化，但仍然可以从您的 ActionListener 访问它。

同样，这只是对您如何构建事物的猜测，因此如果您可以发布代码示例，我相信您可以获得更详细的答案。

代码示例后编辑：

你可以给 RibbonHome 一个额外的 Gui 类型的私有成员。我通常称它为父母，所以它变成：`private Gui parent;`

在 RibbonHome 的构造函数中，添加 Gui 作为参数，这样，RibbonHome 将始终可以访问其父级。

还要将它添加到 Ribbon 的构造函数中，因为您需要将它传递到那里。

作为最后一步，您将始终必须以 Gui 作为参数来构造 Ribbon，因此在 Gui 中它将变为：`ribbon = new Ribbon(this);`

完成所有这些后，您就可以通过父级 JTree 的 getter 访问 JTree。

有更好的解决方案，因为这将有一个缺点，即您将永远无法从除 Gui 之外的其他组件构建新的 Ribbon，但如果您愿意，您可以使用接口。

# java - 使用paintComponent()在JFrame中绘制矩形

> ID：13404398
> 
> 赞同：5
> 
> 时间：2012-11-15T19:06:55.093
> 
> 标签：java, swing, jframe, jpanel, paintcomponent

我正在尝试使用 JPanel 的 paintComponent() 创建一个绘制形状（下例中的矩形）的程序，但我无法让它工作，也无法发现问题所在。

代码如下：

```
import javax.swing.*;
import java.awt.*;

public class RandomRec{
    JFrame frame;

    public void go(){
        frame = new JFrame();
        frame.setSize(500,500);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        DrawPanel panel = new DrawPanel();
    }

    public static void main (String[] args){
        class DrawPanel extends JPanel{
           public void paintComponent(Graphics g) {
              super.paintComponent(g);
              g.setColor(Color.orange);
              g.drawRect(20, 20, 100, 60);
           }
        }

        RandomRec test = new RandomRec();
        test.go();
    }
} 
```

对此的任何帮助将不胜感激。

谢谢你。

****更新****问题解决了！将 go() 方法移出 main 方法，添加一个 frame.add(panel) 并将 frame.setVisible(true) 移动到 go() 方法的底部（更具体地说，在将面板添加到框架）已经解决了这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:08:20.513

您的类`DrawPanel`仅限于您的`main`方法的范围，并且对您的构造函数不可见。

您需要`DrawPanel`移出您的`main`方法，然后将其添加到您的`JFrame`：

```
frame.add(panel); 
```

`frame.setVisible(true)`此外，最好在添加所有组件后调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:09:29.993

您实际上从未将面板添加到框架中，因此它永远不可见。你需要类似的东西

```
frame.getContentPane().add( panel ); 
```

为什么要在 main 方法中定义 drawpanel 类？这很奇怪。

# matlab - 如何向量化嵌套循环

> ID：13404404
> 
> 赞同：9
> 
> 时间：2012-11-15T19:07:24.110
> 
> 标签：matlab, loops, for-loop, octave, vectorization

我无法想象如何对这组循环进行矢量化。任何指导将不胜感激。

```
ind_1 = [1,2,3];
ind_2 = [1,2,4];
K = zeros(3,3,3,3,3,3,3,3,3);
pp = rand(4,4,4);

for s = 1:3
 for t = 1:3
  for k = 1:3
   for l = 1:3
    for m = 1:3
     for n = 1:3
      for o = 1:3
       for p = 1:3
        for r = 1:3
         % the following loops are singular valued except when
         % y=3 for ind_x(y) in this case
         for a_s = ind_1(s):ind_2(s)
          for a_t = ind_1(t):ind_2(t)
           for a_k = ind_1(k):ind_2(k)
            for a_l = ind_1(l):ind_2(l)
             for a_m = ind_1(m):ind_2(m)
              for a_n = ind_1(n):ind_2(n)
               for a_o = ind_1(o):ind_2(o)
                for a_p = ind_1(p):ind_2(p)
                 for a_r = ind_1(r):ind_2(r)
                  K(s,t,k,l,m,n,o,p,r) = K(s,t,k,l,m,n,o,p,r) + ...
                    pp(a_s, a_t, a_r) * pp(a_k, a_l, a_r) * ...
                    pp(a_n, a_m, a_s) * pp(a_o, a_n, a_t) * ...
                    pp(a_p, a_o, a_k) * pp(a_m, a_p, a_l);
                 end
                end
               end
              end
             end
            end
           end
          end
         end
        end
       end
      end
     end
    end
   end
  end
 end
end 
```

编辑：

该代码通过将每个索引的 s 乘积的值相加`pp`一或两次来创建索引从 1 到 3 的 rank-9 张量，具体取决于 和 的`ind_1`值`ind_2`。

编辑：

这是一个 3d 示例，但请记住，`pp`在 9d 版本中没有保留简单排列的索引这一事实：

```
ind_1 = [1,2,3];
ind_2 = [1,2,4];
K = zeros(3,3,3);
pp = rand(4,4,4);

for s = 1:3
 for t = 1:3
  for k = 1:3
   % the following loops are singular valued except when
   % y=3 for ind_x(y) in this case
   for a_s = ind_1(s):ind_2(s)
    for a_t = ind_1(t):ind_2(t)
     for a_k = ind_1(k):ind_2(k)
      K(s,t,k) = K(s,t,k) + ...
        pp(a_s, a_t, a_r) * pp(a_t, a_s, a_k) * ...
        pp(a_k, a_t, a_s) * pp(a_k, a_s, a_t);
     end
    end
   end
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T20:15:11.667

哇！非常简单的解决方案，但并不容易找到。顺便说一句，我想知道你的公式是从哪里来的。

如果您不介意暂时丢失一点内存（2 次 4^9 数组对 3^9 之前），您可以在最后推迟第 3 和第 4 超平面的累积。

在 unix 机器上使用 octave 3.2.4 进行测试，它从**23s (67Mb)**下降到0.17s **(98Mb)**。

```
function K = tensor9_opt(pp)

  ppp = repmat(pp, [1 1 1 4 4 4 4 4 4]) ;
  % The 3 first numbers are variable indices (eg 1 for a_s to 9 for a_r)
  % Other numbers must complete 1:9 indices in any order
  T = ipermute(ppp, [1 2 9 3 4 5 6 7 8]) .* ...
      ipermute(ppp, [3 4 9 1 2 5 6 7 8]) .* ...
      ipermute(ppp, [6 5 1 2 3 4 7 8 9]) .* ...
      ipermute(ppp, [7 6 2 1 3 4 5 8 9]) .* ...
      ipermute(ppp, [8 7 3 1 2 4 5 6 9]) .* ...
      ipermute(ppp, [5 8 4 1 2 3 6 7 9]) ;

  % I have not found how to manipulate 'multi-ranges' programmatically. 
  T1 = T (:,:,:,:,:,:,:,:,1:end-1) ; T1(:,:,:,:,:,:,:,:,end) += T (:,:,:,:,:,:,:,:,end) ;
  T  = T1(:,:,:,:,:,:,:,1:end-1,:) ; T (:,:,:,:,:,:,:,end,:) += T1(:,:,:,:,:,:,:,end,:) ;
  T1 = T (:,:,:,:,:,:,1:end-1,:,:) ; T1(:,:,:,:,:,:,end,:,:) += T (:,:,:,:,:,:,end,:,:) ;
  T  = T1(:,:,:,:,:,1:end-1,:,:,:) ; T (:,:,:,:,:,end,:,:,:) += T1(:,:,:,:,:,end,:,:,:) ;
  T1 = T (:,:,:,:,1:end-1,:,:,:,:) ; T1(:,:,:,:,end,:,:,:,:) += T (:,:,:,:,end,:,:,:,:) ;
  T  = T1(:,:,:,1:end-1,:,:,:,:,:) ; T (:,:,:,end,:,:,:,:,:) += T1(:,:,:,end,:,:,:,:,:) ;
  T1 = T (:,:,1:end-1,:,:,:,:,:,:) ; T1(:,:,end,:,:,:,:,:,:) += T (:,:,end,:,:,:,:,:,:) ;
  T  = T1(:,1:end-1,:,:,:,:,:,:,:) ; T (:,end,:,:,:,:,:,:,:) += T1(:,end,:,:,:,:,:,:,:) ;
  K  = T (1:end-1,:,:,:,:,:,:,:,:) ; K (end,:,:,:,:,:,:,:,:) += T (end,:,:,:,:,:,:,:,:) ;
endfunction

pp = rand(4,4,4);
K = tensor9_opt(pp) ; 
```

# plone - 如何在 Plone 或 Zope 中进行“模型”计算

> ID：13404410
> 
> 赞同：1
> 
> 时间：2012-11-15T19:07:46.677
> 
> 标签：plone, dexterity, z3c.form, zope3

这是一个非常基本的设计问题，但我似乎找不到答案。我将使用一个非常简单的示例，但我关心的是模型级计算（本示例中的“2+2”）变得复杂的情况。

假设我正在设计一个在 Zope 或 Plone 中运行的应用程序；它的工作是添加两个数字。Dexterity 让我可以轻松地创建包含字段 addend1 和 addend2 的内容类型，并将为我生成添加、编辑和显示表单。我可以修改显示表单以显示一个名为“sum”的字段，但“sum”是我的模型中大量计算的结果，我不想在“add”或“edit”表单中显示它，因为我不需要它作为输入，只是作为计算的结果。我不想在我的视图中计算它，因为它很昂贵，我想在最初计算后重用它，而且我不希望我的“视图”需要任何关于我如何进行计算的知识。

那么，什么是正确的“zca”方法来进行与结果呈现无关的模型工作呢？我是否创建一个类似 ISum 的接口并创建一个适配器，将我的内容类型转换为包含总和的内容类型，然后为 ISum 接口做一个视图？如果不是，那是什么？搜索 PP4D 和 Zope 3 开发人员手册并没有帮助。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T19:09:50.350

使用事件；您可以在添加或编辑内容类型时注册事件处理程序，并在这些事件触发您的处理程序时在对象上设置值。

# jquery - 需要 jQuery Fancybox 来刷新父窗口

> ID：13404411
> 
> 赞同：1
> 
> 时间：2012-11-15T19:07:48.930
> 
> 标签：jquery, fancybox

完成后，我无法让 jQuery Fancybox 刷新父窗口。花式盒子打开并运行良好，但 onClosed 事件对我不起作用。

```
$(document).ready(function() {
  $("a#add_document_type").fancybox({
    type: 'iframe',
    onClosed: function() {
      parent.location.reload(true); 
    }
  });
}); 
```

为了测试我已经替换了 parent.location.reload(true); 带有警报（'测试'）；也没有运气，所以我有点茫然。感谢任何人都可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:21:11.490

已解决：诀窍是使用 afterClose:，而不是 onClosed:，所以完整的代码是：

```
$(document).ready(function() {
  $("a#add_document_type").fancybox({
    type: 'iframe',
    afterClose: function() {
      parent.location.reload(true); 
    }
  });
}); 
```

# asp.net-mvc - 如何在 ASP.NET MVC 4 中使用域组作为具有流畅安全性的角色？

> ID：13404412
> 
> 赞同：8
> 
> 时间：2012-11-15T19:07:54.067
> 
> 标签：asp.net-mvc, fluent-security

在我的 ASP.NET MVC 4 应用程序中，我使用 Intranet 模板来实现 Windows 身份验证。我也在使用 Fluent Security。

开箱即用，我可以使用下面显示的注释来限制对特定域组或域用户的控制器方法的访问。

```
[Authorize(Roles=@"Domain\GroupName")]
public ActionResult Index()
{
    ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

    return View();
}

[Authorize(Users=@"Domain\UserName")]
public ActionResult About()
{
    ViewBag.Message = "Your app description page.";

    return View();
} 
```

我如何将这两种方法限制为使用 Fluent Security 的同一域组和域用户？如果这更容易的话，我对这个组比对用户更感兴趣。我需要建立自定义策略吗？如果是这样，我不太确定如何检查经过身份验证的用户是否在域组中以返回 Fluent Security 使用的正确角色？

我已经完成了 FluentSecurity 入门，所以我知道如何实现 FluentSecurity 的基础知识，我只是不确定如何使用域组作为角色。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:50:26.430

我可能已经找到了一种将域组用于角色的方法。我已经调整了 Fluent Security Getting Started 页面中的扩展示例。

在 Global.asax.cs 中：

```
SecurityConfigurator.Configure(configuration =>
{
    // Let Fluent Security know how to get the authentication status of the current user
    configuration.GetAuthenticationStatusFrom(() => HttpContext.Current.User.Identity.IsAuthenticated);

    // Let Fluent Security know how to get the roles for the current user
    configuration.GetRolesFrom(System.Web.Security.Roles.GetRolesForUser);

    // This is where you set up the policies you want Fluent Security to enforce
    configuration.For<HomeController>().Ignore();

    configuration.For<AccountController>().DenyAuthenticatedAccess();
    configuration.For<AccountController>(x => x.ChangePassword()).DenyAnonymousAccess();
    configuration.For<AccountController>(x => x.LogOff()).DenyAnonymousAccess();

    configuration.For<BlogController>(x => x.Index()).Ignore();
    configuration.For<BlogController>(x => x.AddPost()).RequireRole(@"Domain\Writers");
    configuration.For<BlogController>(x => x.AddComment()).DenyAnonymousAccess();
    configuration.For<BlogController>(x => x.DeleteComments()).RequireRole(@"Domain\Writers");
    configuration.For<BlogController>(x => x.PublishPosts()).RequireRole(@"Domain\Owners");

    // To authorize the Home Controller Index Action as in my original question
    configuration.For<HomeController>(c => c.Index()).RequireRole(@"Domain\GroupName");
});

GlobalFilters.Filters.Add(new HandleSecurityAttribute(), 0); 
```

在 Web.config 中：

```
<authentication mode="Windows" />
<authorization>
  <deny users="?" />
</authorization>
<roleManager defaultProvider="WindowsProvider"
      enabled="true"
      cacheRolesInCookie="false">
  <providers>
    <add
      name="WindowsProvider"
      type="System.Web.Security.WindowsTokenRoleProvider" />
  </providers>
</roleManager> 
```

我还没有找到授权单个用户的方法，但我们都知道使用组通常是最佳实践。

有没有更好的方法来做到这一点？

# html - HTML5 Boillerplate IE 条件 IE8 解释

> ID：13404414
> 
> 赞同：2
> 
> 时间：2012-11-15T19:08:06.390
> 
> 标签：html

我一直在寻找解释为什么 HTML5 Boilerplate 中 IE 的 html 标记条件的这一部分有这部分：

```
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

我问只是为了让我了解这是如何工作的。我理解上面的条件句，但是为什么这个和上面的不一样呢？与上述情况相比，我不明白这种情况在做什么。

提前感谢您帮助我理解我将使用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:22:15.907

基本上，最后一部分用于 IE 版本 9 及更高版本，以及所有其他浏览器。但是，由于 HTML Boilerplate 非常关注优化，因此语法更短且不那么直接。

我找到了解释它的文章，我建议你阅读全文：

[http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

> 这是我提出的解决方案：
> 
> ```
> <!--[if lt IE 7]>      <html class="ie6"> <![endif]-->
> <!--[if IE 7]>         <html class="ie7"> <![endif]-->
> <!--[if IE 8]>         <html class="ie8"> <![endif]-->
> <!--[if gt IE 8]><!--> <html>         <!--<![endif]--> 
> ```

由于您可以在文章中阅读到的问题，这实际上是在之后更新的。

显然，奇怪的语法的一部分与 Dreamweaver(!) 错误有关。这是一段摘录：

> 这是新的推荐，也是 HTML5 Boilerplate 中使用的推荐。

```
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]--> 
```

基本上，最后一行是说“如果 IE9+ 或不是 IE，请执行此操作”。下面的一些要点与您的问题没有直接关系，但无论如何我都会将它们包括在内。

> 为什么？
> 
> *   这修复了 Stoyan Stefanov 和 Markus Leptien 发现的文件阻塞问题。
> *   它避免了也解决了上述问题的空注释。
> *   像 WordPress 和 Drupal 这样的 CMS 更多地使用 body 类。
> *   这使得在那里集成更简单它在 html4 中没有验证，但在 html5 中很好。处理它。
> *   它与一种基于您的标记启动特定于页面的 javascript 的技术很好地配合使用。
> *   它使用与 Modernizr（和 Dojo）相同的元素。那感觉不错。
> *   我在那里留下了一个空班，因为你可能会在那里放一个 no-js 或其他东西。如果没有，请删除。
> *   **此外，如果最后一个标签周围的额外注释对您来说很奇怪，请归咎于 Dreamweaver，它会阻塞正常的 !IE 条件注释。**

更多关于这个问题的讨论在这里：[https ://github.com/h5bp/html5-boilerplate/issues/425/#](https://github.com/h5bp/html5-boilerplate/issues/425/#)

# android - getIntent() 未正确捕获数据

> ID：13404418
> 
> 赞同：0
> 
> 时间：2012-11-15T19:08:16.113
> 
> 标签：android, android-intent

我在意图的帮助下传递行 ID。调用方法是自定义适配器 -

```
holder.text.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(getContext(), "TEXT CLICKED" + pos , Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(context,ReminderModificationActivity.class);
                long longPos = (long)pos;
                intent.putExtra(TasksDBAdapter.KEY_ROWID, pos);
                Log.i(TAG, "row clickd --> " + longPos);
                ((Activity) context).startActivityForResult(intent, ACTIVITY_EDIT);
            }
        }); 
```

`OnCreate()`ReminderModificationActivity 方法尝试检索数据。代码 -

```
protected void onCreate(Bundle savedInstanceState){
        dbHelper = new TasksDBAdapter(this);

        //set current theme
        settingsDBAdapter = new SettingsDBAdapter(this);
        settingsDBAdapter.open();

        setSettingsTheme();
        setContentView(R.layout.reminder_modify);
        mCalendar =  Calendar.getInstance();

        Log.i(getLocalClassName(), "VALUE of Button--->" + findViewById(R.id.SetDateButtonId));
        mDateButton = (Button) findViewById(R.id.SetDateButtonId);
        mTimeButton = (Button) findViewById(R.id.SetTimeButtonId);
        mConfirmButton = (Button) findViewById(R.id.SaveButtonId);
        mTitleText = (EditText) findViewById(R.id.TitleEditTextId);
        mBodyText = (EditText) findViewById(R.id.DescriptionEditTextId);

        mRowId = savedInstanceState != null ? savedInstanceState.getLong(TasksDBAdapter.KEY_ROWID) : null ;
        registerButtonListenersAndSetDefaultText();
        Log.i(TAG, "getIntent-->" + getIntent() + mRowId);
        //code to check what row id have been passed
        if(getIntent() != null) { 
            ---->>>MAIN CODE
            Log.i(TAG, "mRowId in getintent-->" +  mRowId + "row id passed-->" +  getIntent().getLongExtra(TasksDBAdapter.KEY_ROWID, -1));
            mRowId =  getIntent().getLongExtra(TasksDBAdapter.KEY_ROWID, -1);
            // Do stuff with the row id here
            if(mRowId != -1){
                //code if RowId valid

            }
        }

        super.onCreate(savedInstanceState);
        Log.i(TAG, "mROwId in onCreate ReminderNotification again-->" + mRowId);    
    } 
```

标记为 MAIN CODE 的行捕获意图数据，但 Log.i 给出的值

```
getIntent().getLongExtra(TasksDBAdapter.KEY_ROWID, -1)) 
```

作为-1。可以 sumone 请帮我解决这个问题。提前谢谢，雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:12:20.257

看到你投射`pos`到`longPos`，你应该`longPos`在你的意图中额外使用，但你使用`pos`.

如果您要将代码更改为：

```
 Intent intent = new Intent(context,ReminderModificationActivity.class);
        long longPos = (long)pos;
        intent.putExtra(TasksDBAdapter.KEY_ROWID, longPos); //<< changed to longPos 
```

它应该工作

# jpa - Eclispelink PersistenceUnitLoadingException

> ID：13404422
> 
> 赞同：3
> 
> 时间：2012-11-15T19:08:42.790
> 
> 标签：jpa, jpa-2.0, eclipselink

我在下面遇到`PersistenceUnitLoadingException`了 Eclispelink 2.4.1，堆栈跟踪说明了什么？

![代码窗口](../Images/25cceb2eddaf789b5c8b17d5a054f125.png)

```
Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: Exception [EclipseLink-30005] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: sun.misc.Launcher$AppClassLoader@45a877
Internal Exception: Exception [EclipseLink-30005] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: sun.misc.Launcher$AppClassLoader@45a877
Internal Exception: java.lang.NullPointerException
    at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionSearchingForPersistenceResources(PersistenceUnitLoadingException.java:127)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:118)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at com.mypkg.Main.<clinit>(Main.java:12)
Caused by: Exception [EclipseLink-30005] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: sun.misc.Launcher$AppClassLoader@45a877
Internal Exception: java.lang.NullPointerException
    at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionSearchingForPersistenceResources(PersistenceUnitLoadingException.java:127)
    at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.findPersistenceArchives(PersistenceUnitProcessor.java:321)
    at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.findPersistenceArchives(PersistenceUnitProcessor.java:272)
    at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfoInArchives(JPAInitializer.java:150)
    at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfo(JPAInitializer.java:135)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:76)
    ... 3 more
Caused by: java.lang.NullPointerException
    at org.eclipse.persistence.internal.jpa.deployment.DirectoryArchive.init(DirectoryArchive.java:79)
    at org.eclipse.persistence.internal.jpa.deployment.DirectoryArchive.init(DirectoryArchive.java:96)
    at org.eclipse.persistence.internal.jpa.deployment.DirectoryArchive.<init>(DirectoryArchive.java:74)
    at org.eclipse.persistence.internal.jpa.deployment.DirectoryArchive.<init>(DirectoryArchive.java:54)
    at org.eclipse.persistence.internal.jpa.deployment.ArchiveFactoryImpl.createArchive(ArchiveFactoryImpl.java:89)
    at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.findPersistenceArchives(PersistenceUnitProcessor.java:297)
    ... 7 more
Could not find the main class: com.mypkg.Main.  Program will exit. 
```

**@编辑**

我在下面的 Eclipse 下有项目结构，它与 Hibernate 作为持久性提供者配合得很好。

```
bin
  |_META-INF
  |        |_persistence.xml
  |_com
      |_mypkg
            |_Main.class
            |_MyEntity.class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-26T14:20:42.407

升级到 eclipselink 到以下为我解决了这个问题：

```
<dependency>
    <groupId>org.eclipse.persistence</groupId>
    <artifactId>org.eclipse.persistence.jpa</artifactId>
    <version>2.7.3</version>
</dependency> 
```

# matlab - 从 Matlab 将 mex 文件写入 CUDA (CUSPARSE)

> ID：13404424
> 
> 赞同：0
> 
> 时间：2012-11-15T19:08:48.737
> 
> 标签：matlab, cuda

我使用 Matlab 中的稀疏 Martix 格式来存储我的矩阵。但是计算将由 cusparse 库完成。我搜索了一个通过 mex 文件连接 matlab 和 Cusparse 的示例。

有人有想法吗？

谢谢克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T00:34:33.397

如果我理解你的问题，我有一个类似的问题，我刚刚想出了如何解决。我想用 CUSPARSE 编写 CUSPARSE 程序，将其编译成 mex 文件，然后在 MATLAB 中运行。以下是我发现的一些对我有帮助的资源。

MATLAB 文档中有[一些示例](http://www.mathworks.com/help/matlab/build-cc-mex-files.html)说明您的 C 程序应该是什么样子。

这是有关如何设置和编译程序[的 MATLAB 文档。](http://www.mathworks.com/help/distcomp/run-mex-functions-containing-cuda-code.html)请注意，您必须先设置 NVCC 的路径，然后才能编译代码。不过，我永远无法让它以这种方式工作。

我选择在 MATLAB 之外编译代码，我只编译了 mex 文件的行

```
mex myFile.cu -L/path/to/your/cuda/libs -lcusparse -lcudart 
```

这对我有用。请注意，MATLAB 文档说您的 C 文件必须具有“.cu”后缀才能正确编译，并将“MW_NVCC_PATH”环境变量设置为指向 nvcc。

# perl - 我可以将参数传递给 ClearCase 触发器吗？

> ID：13404425
> 
> 赞同：2
> 
> 时间：2012-11-15T19:04:54.587
> 
> 标签：perl, version-control, clearcase

在我的商店签入代码涉及复杂的舞蹈，最后是从 ClearCase 签入的触发器内部回答几个提示。

我想修改触发器以获取命令行参数。这可能吗？

如果做不到这一点，我希望能够调整 STDIN 以便提示得到回答。我试过使用 HERE 文件，但第二个提示是无限重复的。我正在用 perl 编写我的脚本。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:15:18.057

触发器的修改需要使用[`cleartool mktrtype`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mktrtype.htm)

您可以访问环境变量和参数，具体取决于您的触发器适用的对象类型。

但是您将无法访问任何命令行参数。

* * *

> 如果做不到这一点，我希望能够调整 STDIN 以便提示得到回答

签出[`clearprompt`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/clearprompt.htm)：

> 该`clearprompt`命令提示用户输入，然后将输入存储在文件中或返回适当的退出状态。
> **`clearprompt`设计用于触发动作和 GUI 脚本**。
> 
> 在 UNIX 和 Linux 系统上，`clearprompt`可以通过`stdin`and `stderr`（CLI 模式）或通过弹出窗口（GUI 模式）与用户交互。

例如：

> 创建一个全元素触发器类型，在**创建****类型元素时提示输入算法的来源`c_source`**。
> 触发触发器会执行一个名为 的脚本`hlink_algorithm`，该脚本会调用`clearprompt`实用程序来获取必要的信息。
> 然后，该脚本会在新创建的元素对象（例如`foo.c@@`）和指定文本之间创建一个纯文本超链接。
> 该脚本在命令`hlink_algorithm`之后立即显示。`mktrtype`

```
cmd-context mktrtype -element -all -nc -postop mkelem -eltype c_source \
-exec /net/neon/scripts/hlink_algorithm describe_algorithm
Created trigger type "describe_algorithm". 
```

> `hlink_algorithm`脚本：

```
clearprompt text -outfile /usr/tmp/alg.$CLEARCASE_PPID \
-multi_line  
-def "Internal Design" -prompt "Algorithm Source Document:" 

TOTEXT=‘cat /usr/tmp/alg.$CLEARCASE_PPID‘
cleartool mkhlink -ttext "$TOTEXT" design_spec 
 $CLEARCASE_PN$CLEARCASE_XN_SFX 

rm /usr/tmp/alg.$CLEARCASE_PPID 
```

# mysql - 从 bash 运行 mysql 查询；其中查询存储在一个单独的文件中，其中包含在 bash 中设置的变量

> ID：13404428
> 
> 赞同：2
> 
> 时间：2012-11-15T19:09:02.887
> 
> 标签：mysql, bash

我有一个 bash 脚本，负责查询数据库并将结果通过管道传输到文件：

```
date=`date +"%Y/%m/%d"`

/usr/bin/mysql -u $db_user -p$db_pass -h $db_name $db_schema << MYSQLEOF > $output_file

  select *
  from table
  where date = $date

MYSQLEOF 
```

现在将此项目扩展到其他领域，为了可重用性/正交性，我想将查询放在它自己的文件中，并使用以下内容进行调用：

```
cmd=`echo $sql_file`

/usr/bin/mysql -u $db_user -p$db_pass -h $db_name $db_schema -e "$cmd" > $output_file 
```

sql文件：

```
 select *
  from table
  where date = $date 
```

我无法找出如何（在 bash 中）执行此操作，同时仍然能够在 sql 文件中拥有和调整变量（$date）。将 .sql 文件回显到 bash 变量中，我无法让“$date”不被视为文字字符串。

bash 中是否有解决方案，或者我应该研究一下 perl 之类的东西来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:25:32.610

使用 mySQL CLI 的`source`命令。

```
queryfile=my_query.sql
/usr/bin/mysql -u $db_user -p$db_pass -h $db_name $db_schema -e "source $queryfile" > $output_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T20:50:08.333

我找到了一个使用命令行 Perl 即时搜索/替换的解决方案。

bash 脚本：

```
date=`date +"%Y/%m/%d"`
export date

cmd=`perl -lpe 's/DATE_VAR/$ENV{date}/g' "$sql_file"`

/usr/bin/mysql -u $db_user -p$db_pass -h $db_name $db_schema -e "$cmd" > $output_file 
```

在 sql_file 中：

```
select *
from table
where date = 'DATE_VAR' 
```

# c# - 有没有办法为 DigitalWaveformGraphs 制作自定义 EditDateTimeFormatMode？

> ID：13404432
> 
> 赞同：0
> 
> 时间：2012-11-15T19:09:10.370
> 
> 标签：c#, windows, winforms, plot, waveform

我正在尝试这样做，所以当您单击我的数字波形图上的结束刻度时，弹出的格式类似于“s.fff”，而不是默认的“mm/dd/yyyy hh /mm/ss”。我找到了 XAxis.EditDateTimeFormatMode 属性，但看起来您只能为其分配“长格式模式”或“短格式模式”，这两种模式都不适合小规模。有没有办法让你自己的 DateTimeFormatMode 使扩展的编辑字段只有秒和毫秒（为了更精确地缩放/重新定位图表）而不是默认的巨大比例？仅供参考，这是实现“短”格式模式的代码，它还不够短：

```
this.digitalWaveformGraph1.XAxis.EditDateTimeFormatMode = NationalInstruments.UI.DateTimeFormatMode.CreateShortTimeMode(); 
```

我意识到这是一个有点精确的问题，但希望这里有人在处理快速信号时可能会遇到同样的问题。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:39:45.830

这只会让您指向正确的方向，但总体思路是创建一个继承 NationalInstruments.UI.DateTimeFormatMode 的类 - 如下所示：

```
public class SecondsEditRangeFormat : DateTimeFormatMode
{
    public override string FormatValue(object context, DateTimeFormatModeArgs args)
    {
        return args.Value.ToString("s.fff");
    }

    public override bool TryParse(string s, out DateTime value)
    {   
        value = DateTime.ParseExact(s, "s.fff", CultureInfo.CurrentCulture);
        return true;
    }
} 
```

然后将您的类的实例分配给该属性：

```
digitalWaveformGraph1.XAxis.EditRangeDateTimeFormatMode = new SecondsEditRangeFormat(); 
```

# android - 亚马逊应用商店的高效 DRM

> ID：13404433
> 
> 赞同：1
> 
> 时间：2012-11-15T19:09:11.083
> 
> 标签：android, drm, amazon-appstore, piracy

我考虑在亚马逊应用商店发布一款应用。他们确实提供了自己的 DRM 系统，但该应用程序似乎无法检索任何许可证验证信息，例如 Google Play 优惠。所以我认为应该很容易修补任何受 Amazon-DRM 保护的 apk 文件，以忽略设备上完成的许可证验证。

我的应用程序需要与我的服务器通信才能工作。在 Google Play 上，我的应用程序检索 LVLs 许可证答案并将其发送到我的服务器，该服务器验证该答案的数字签名。如果它没有经过验证，服务器就不会与应用程序对话，因此它就没有用了。

亚马逊应用商店有什么办法吗？还有哪些其他自我实现的方法来保护应用程序？

# file - 如何从 TreeSelectionListener 获取路径

> ID：13404435
> 
> 赞同：0
> 
> 时间：2012-11-15T19:09:18.623
> 
> 标签：file, jtable, listener, jtree

这是我的问题。我想写一个原始的 MultiRenameTool（重命名部分还不重要）。您可以浏览左侧的目录（JTree），当您选择一个目录时，您可以在右侧看到其内容（JTable - 只是文件）。

![快照](../Images/17ff6d59afb92c7f053deda97856df83.png)

问题是，我不知道如何将选定的目录传递给 JTable 的列表。

我已经为 JTree 使用了 Kirill Grouchnikov 的代码，并稍微修改了它。

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.io.File;
import java.io.FileFilter;
import java.util.*;
import javax.swing.*;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.filechooser.FileSystemView;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

/**
 * @author Kirill Grouchnikov
 */

public class FileTreePanel extends JPanel {

    protected static FileSystemView fsv = FileSystemView.getFileSystemView();
    private JTree tree;
    //At first I was trying this - but it is wrong.
    public static File current;

    private static class FileTreeCellRenderer extends DefaultTreeCellRenderer {

    private Map<String, Icon> iconCache = new HashMap<String, Icon>();
    private Map<File, String> rootNameCache = new HashMap<File, String>();

    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {
        FileTreeNode ftn = (FileTreeNode) value;
        File file = ftn.file;
        String filename = "";
        if (file != null) {
        if (ftn.isFileSystemRoot) {
            filename = this.rootNameCache.get(file);
            if (filename == null) {
            filename = fsv.getSystemDisplayName(file);
            this.rootNameCache.put(file, filename);
            }

        } else {
            filename = file.getName();
        }
        }
        JLabel result = (JLabel) super.getTreeCellRendererComponent(tree, filename, sel, expanded, leaf, row, hasFocus);
        if (file != null) {
        Icon icon = this.iconCache.get(filename);
        if (icon == null) {
            icon = fsv.getSystemIcon(file);
            this.iconCache.put(filename, icon);
        }
        result.setIcon(icon);
        }
        return result;
    }
    }

    private static class FileTreeNode implements TreeNode {

    private File file;
    private File[] children;
    private TreeNode parent;
    private boolean isFileSystemRoot;

    public FileTreeNode(File file, boolean isFileSystemRoot, TreeNode parent) {
        this.file = file;
        this.isFileSystemRoot = isFileSystemRoot;
        this.parent = parent;
        this.children = this.file.listFiles(new FileFilter() {
        //!Modification here - display only the directories
        @Override
        public boolean accept(File file) {
            return file.isDirectory();
        }
        });
        if (this.children == null) {
        this.children = new File[0];
        }
        //obliviously wrong "solution" :(
        current = file;
    }

    public FileTreeNode(File[] children) {
        this.file = null;
        this.parent = null;
        this.children = children;
    }

    @Override
    public Enumeration<?> children() {
        final int elementCount = this.children.length;
        return new Enumeration<File>() {
        int count = 0;

        @Override
        public boolean hasMoreElements() {
            return this.count < elementCount;
        }

        @Override
        public File nextElement() {
            if (this.count < elementCount) {
            return FileTreeNode.this.children[this.count++];
            }
            throw new NoSuchElementException("Nincs több elem.");
        }
        };
    }

    @Override
    public boolean getAllowsChildren() {
        return true;
    }

    @Override
    public TreeNode getChildAt(int childIndex) {
        return new FileTreeNode(this.children[childIndex],
            this.parent == null, this);
    }

    @Override
    public int getChildCount() {
        return this.children.length;
    }

    @Override
    public int getIndex(TreeNode node) {
        FileTreeNode ftn = (FileTreeNode) node;
        for (int i = 0; i < this.children.length; i++) {
        if (ftn.file.equals(this.children[i])) {
            return i;
        }
        }
        return -1;
    }

    @Override
    public TreeNode getParent() {
        return this.parent;
    }

    @Override
    public boolean isLeaf() {
        return (this.getChildCount() == 0);
    }
    }

    public FileTreePanel() {
    super();
    this.setLayout(new BorderLayout());

    File[] roots = File.listRoots();

    FileTreeNode rootTreeNode = new FileTreeNode(roots);
    this.tree = new JTree(rootTreeNode);
    this.tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);

    this.tree.setCellRenderer(new FileTreeCellRenderer());
    this.tree.setRootVisible(true);
    this.tree.addTreeSelectionListener(new JTreeSelectionListener());

    JScrollPane jsp = new JScrollPane(this.tree);
    this.add(jsp, BorderLayout.CENTER);
    }

    private class JTreeSelectionListener implements TreeSelectionListener {

    @Override
    public void valueChanged(TreeSelectionEvent jtsl) {
        TreePath o = jtsl.getPath();
        System.out.println(o);
        System.out.println(current);

        SelectionList.listBuilder(current);
    }
    }
} 
```

最重要的部分在最后，在 TreeSelectionEvent。在这里，我应该能够从实际选择的目录中转换/制作/投射文件。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.io.File;
import java.io.FileFilter;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class SelectionList extends JPanel {

    private static FilesData data;
    private static JTable table;

    public SelectionList() {
    super();
    data = new FilesData();
    table = new JTable(data);

    table.setFillsViewportHeight(true);
    table.setShowGrid(true);
    table.setGridColor(Color.BLACK);

    JScrollPane jsp = new JScrollPane(table);
    this.add(jsp, BorderLayout.CENTER);

    }

    public static void listBuilder(final File f) {
    data.files.clear();
    File[] fs = f.listFiles(new FileFilter() {
        @Override
        public boolean accept(File file) {
        return file.isFile();
        }
    });
    if (fs != null) {
        for (File m : fs) {
        Files ujFile = new Files(m, m.isHidden(), Menu.checkAll.getState());
        if (!m.isHidden() || Menu.hiddenFilesVisibility.getState()) {
            data.files.add(ujFile);
        }
        }
    }
    table.repaint();
    }
} 
```

这很有趣，因为 listBuilder 函数。我认为这是足够的信息，但如果你也需要我的其他课程，我会上传它。我很感激任何帮助！提前谢谢大家。任何人？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:17:41.760

以下代码段显示了如何从内部路径获取文件`valueChanged`：

```
public void valueChanged(TreeSelectionEvent jtsl) {

    TreePath path = jtsl.getPath();
    FileTreeNode filenode = (FileTreeNode) path.getLastPathComponent();
    File file = filenode.file;

    ...

} 
```

# c# - 具有未提交的第一个事务的 TransactionScope 在分布式事务上失败

> ID：13404436
> 
> 赞同：1
> 
> 时间：2012-11-15T19:09:21.207
> 
> 标签：c#, nhibernate, ado.net, transactions, transactionscope

在尝试调试某些东西时，我发现代码有效地执行了以下操作：

1.  创建事务范围
2.  创建一个事务（在这种情况下是一个 nHibernate tx，但不是很重要）
3.  创建第二个事务（在本例中为标准 ADO.Net Tx）
4.  提交第二个事务
5.  在事务范围内调用 Complete()
6.  处理事务范围。

现在 - 创建一个事务而不提交可能是一个坏主意 - 尤其是在拥有（这就是错误修复）时。

然而，在测试这个时 - 我尝试了上述的各种组合（提交所有事务，一些事务，没有事务（即只有 TScope）提交第一个，但不是第二个，添加其他事务等）并且在所有的事情中我发现以下是真的：

只有当我未能提交第一个事务并且事务范围变得分布式时，TScope 的 Dispose 才会失败：

System.InvalidOperationException ：该操作对于征募的当前状态无效。

我现在很好奇，想知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:54:16.147

我怀疑您看到的问题是由以下之一覆盖：[https ://nhibernate.jira.com/issues/?jql=project%20%3D%2010000%20AND%20labels%20%3D%20TransactionScope](https://nhibernate.jira.com/issues/?jql=project%20%3D%2010000%20AND%20labels%20%3D%20TransactionScope)

我不完全确定会发生什么，但我见过类似的行为，例如，如果 NH 加入环境事务，并且事务*后来*变得分布式，调用 TransactionScope.Complete() 可能会挂起 20 秒然后失败。

即使您不使用 NH 事务，NH 也会尝试加入 TransactionScope。在这种情况下，NH 将在环境事务的 Prepare() 阶段刷新更改。它将在 db 连接上执行此操作，但这也已加入事务并将获得自己的 Prepare() 调用。不幸的是，我无法找出确切的问题，但我怀疑会发生什么，在某些情况下，数据库连接 Prepare() 将在 NHibernate 的 Prepare() 之前被调用。后者将尝试继续使用数据库连接，这似乎会导致某种死锁。

使用 NH 事务并在完成事务范围之前提交它将使 NH 在底层数据库连接进入准备阶段之前刷新其更改。

# preg-match - !preg_match 用于电子邮件检查

> ID：13404441
> 
> 赞同：0
> 
> 时间：2012-11-15T19:09:47.733
> 
> 标签：preg-match, email-validation

我有这个命令来检查有效的电子邮件地址。我刚刚发现，当我尝试将其添加到我们的电子邮件服务器时（此表单中的所有电子邮件请求都是本地电子邮件地址），电子邮件服务器不允许以数字字符开头的电子邮件地址/用户名。我已阅读命令 preg_match 的所有文档，如果它在第一个字符位置以数字开头，则找不到如何使其失败。我是新手，所以任何帮助将不胜感激。

```
if (!preg_match("(^[-\w\.]+@([-a-z0-9]+\.)+[a-z]{2,4}$)i", $in_email)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-29T10:50:49.633

在 php 中，您可以将以下代码与 php filter_var 函数一起使用，该函数在使用指定的过滤条件过滤变量后返回一个布尔值。

```
 if(filter_var($email,FILTER_VALIDATE_EMAIL))
        { 
        //valid email
        }
        else{
        //INVALID EMAIL
        } 
```

如果电子邮件格式正确，函数 filter_var 将返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:15:29.467

试试这个；

```
/^[^0-9][_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/ 
```

并使用如下

```
$regex = '/^[^0-9][_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/';

if (preg_match($regex, $email)) {
    // Valid email
} else { 
    // Invalid email
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-02T19:43:09.777

如果我们有没有点的域，则此答案无效。对于这种情况，我从：

`/^[^0-9][_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/`

到：

`/^[^0-9][_a-z0-9-]+(\.[_a-z0-9-]+)*@([a-z0-9-]{2,})+(\.[a-z0-9-]{2,})*$/`

**更新：**用户@Toto 正确地看到了正则表达式的一个问题，它可以以任何字符开头而不是数字开头。像这样的例子：`@-----.--.---.----@--`被验证。所以我改变`/^[^0-9]`了`/^[a-z]`，现在是正确的：

`/^[a-z][_a-z0-9-]+(\.[_a-z0-9-]+)*@([a-z0-9-]{2,})+(\.[a-z0-9-]{2,})*$/`

并为这些用例工作：

*   用户@域
*   aa@aa
*   aa@aa.aa
*   aa.aa@aa

# testing - 硒与健身

> ID：13404444
> 
> 赞同：9
> 
> 时间：2012-11-15T19:09:52.260
> 
> 标签：testing, selenium, qa, fitnesse

想知道 Selenium 和 Fitnesse 如何融入软件测试人员的武器库中。在哪里适合应用这些工具？它们是重叠的，还是互补的？

如果有人可以将这些工具放到上下文中，那就太好了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T19:14:08.317

Selenium 是一个 Web 自动化框架。它允许您编写“驱动”浏览器的代码，因此您可以自动单击站点、填写表单等...

FitNesse 是一个验收测试框架——它是将验收测试记录为可测试代码的工具。您可以执行测试并查看它们是通过还是失败。

这两者是互补的——你不必将 Selenium 与 FitNesse 一起使用，反之亦然，但对于测试网站，最好让你的验收测试用 FitNesse（或类似的框架）编写并让他们使用 Selenium驱动浏览器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-17T00:04:29.457

Fitnesse 是一个测试框架，可让您通过他们称为 Fixture 的东西与以您选择的语言编写的代码进行交互。

Selenium 为您提供了一个 api 来驱动 Web 浏览器进行测试。Selenium 提供了一个 dll，可能还有一个 jar，您可以使用它通过其中一个 Fixtures 连接到 Fitnesse。

在我工作的地方，我们使用 Fitnesse 编写使用 Selenium 来驱动它们的网站测试。

# performance - hbase 'checkAndPut' 延迟是否高于简单的 'put'？

> ID：13404447
> 
> 赞同：4
> 
> 时间：2012-11-15T19:10:07.383
> 
> 标签：performance, api, hadoop, hbase

从逻辑上讲......似乎 checkAndPut 需要更多时间。我对负载场景特别感兴趣，我们看到平均 checkandput 延迟为 15 毫秒（每行数据 17KB）....将 checkAndPut 转换为简单的“PUT”会显着降低平均延迟。

对于 99% 的用例，当我们执行 checkAndPut 时，我们写入的行键甚至都不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:54:44.870

是的，check and put 延迟将比简单的 put 更高。然而，高多少取决于内存存储中有多少数据以及块缓存中有多少。

checkAndMutate 的工作方式如下：

*   获取行锁
*   等待所有未完成的交易被确认
*   获取所需的单元格
*   使用提供的规则比较它们
*   执行放置/删除

由于如果成功的最后一步是执行 put，checkAndMutate 将增加一些成本。get 是（可能）其中最昂贵的部分。如果您能够添加布隆过滤器并将所有索引块保留在内存中，那么您可以确保 get 尽可能快。

# svg - Raphael.js 中如何画直线的解释

> ID：13404450
> 
> 赞同：8
> 
> 时间：2012-11-15T19:10:32.843
> 
> 标签：svg, raphael

我想对 Raphael 中的路径构造函数有所帮助。我不知道如何从一个点到另一个点画一条直线。我有

```
var line = paper.path(M 100 0 1 0 30 100) 
```

我想从 point1 (100 0) 到 point2 (30 100) 画一条线

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T19:22:41.883

这很简单：

```
var line = paper.path( "M100,0 L30,100" ); 
```

您还可以使用数组构建路径，这在某些情况下非常有用。

```
var line = paper.path( ["M", 100, 0, "L", 30, 100 ] ); 
```

# ember.js - 使用 ember + ember 数据过滤列表的文本字段

> ID：13404451
> 
> 赞同：0
> 
> 时间：2012-11-15T19:10:36.490
> 
> 标签：ember.js, filtering, ember-data

我是使用 ember 的新手，但已经熟悉它，基本上在这里和那里遵循一些教程并阅读 api 文档。但是教程不会深入到更复杂的主题。

这些是详细信息：我已经实现了一个显示项目列表的网页。以下是应用程序不同部分的相关代码摘录。

```
// the data model, the view and the controller
App.Item = DS.Model.extend({
    name: DS.attr('string')
});
App.ItemsController = Ember.ArrayController.extend();
App.ItemsView = Ember.View.extend({ templateName: 'items' })

// in the router's corresponding route
connectOutlets: function(router) {
    router.get('applicationController').connectOutlet('items', App.Item.find())
}

// in the handlebars template
<ul class="items">
  {{#each content}}
    <li>{{name}}</li>
  {{/each}}
</ul> 
```

这个列表的数据是通过 ember-data 远程加载的（注意上面`App.Item.find()`路由`connectOutlet`方法中的调用），一个把手模板显示它，并随着数据的变化动态更新列表。到目前为止，这是基本的余烬。

现在我想在列表顶部有一个文本字段，当用户在此文本字段中键入时，应该更新列表，方法是过滤并仅显示名称与用户键入的内容相匹配的项目。匹配名称的实际定义与这个问题无关。它可能是那些包含输入字符串的名称，或者以它开头的名称。

我知道我的下一步是在车把模板的列表顶部包含一个文本字段视图：

```
<div class="search-bar">
    {{view Ember.TextField}}
</div>
<ul class="items">
  {{#each content}}
    <li>{{name}}</li>
  {{/each}}
</ul> 
```

所以我在这一点上的问题如下：

*   如何在 javascript 代码中引用此文本字段，以便我可以将侦听器附加到它以检测它何时更改？
*   更重要的是，我需要在这个事件监听器中做什么才能过滤列表？
*   我想知道如何实现它过滤本地加载的数据，以及如何通过每次用户键入时远程加载过滤数据来做到这一点。

我实际上需要实现比这稍微复杂一些的东西，但是知道如何做到这一点会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T20:37:39.540

您可以在控制器上有一个计算属性，该属性根据文本字段过滤内容。

```
App.ItemsController = Ember.ArrayController.extend({

  // ...

  searchedContent: function() {
    var regexp = new RegExp(this.get('search'));

    return this.get('content').filter(function(item) {
      return regexp.test(item.get('name'));
    });

  }.property('search', 'content.@each.name')
}); 
```

然后你只需将你的文本字段绑定到`controller.search`. 示例：[http://www.emberplay.com#/workspace/2356272909](http://www.emberplay.com#/workspace/2356272909)

要远程过滤数据，您应该让 ember 数据在每次搜索更改时加载更多项目。这可以通过在每次发生变化时向路由器发送事件来完成。

# cloud - 云服务比较

> ID：13404454
> 
> 赞同：0
> 
> 时间：2012-11-15T19:10:48.897
> 
> 标签：cloud, cloud-hosting, game-development

我正在尝试比较今天提供的云服务和平台。是否有任何研究文章或类似的东西可以给我这些数字？不关心价格，而是关心延迟、响应能力等参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:52:22.583

以下是摘录自一份可能满足您比较云服务性能需求的摘要。

云服务的性能和成本评估：“使用一套云测试应用程序，我们对各种真实的云基础设施进行了深入的实证评估，包括 Google App Engine、Amazon EC2 和 Microsoft Azure。这些实验评估和其他公开/发布数据的见解与建模技术相结合，以预测不同部署场景的实际应用程序在成本、应用程序性能和限制方面的资源需求”。

以下 IEEE 链接与此主题相关：云计算产品的性能评估 - [http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=5359493&url=http%3A%2F%2Fieeexplore.ieee.org %2Fxpls%2Fabs_all.jsp%3Farnumber%3D5359493](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=5359493&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D5359493)

SMCloud：云服务比较和排名框架 - [http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6123500&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp %3远号%3D6123500](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6123500&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D6123500)

云服务的性能和成本评估 - [http://link.springer.com/chapter/10.1007%2F978-3-642-19394-1_5?LI=true](http://link.springer.com/chapter/10.1007%2F978-3-642-19394-1_5?LI=true)

# c - 当我直到运行时才知道有多少参数时在 C 中使用 printf

> ID：13404455
> 
> 赞同：2
> 
> 时间：2012-11-15T19:10:50.957
> 
> 标签：c, variables, runtime, arguments, printf

我有一种情况，我试图打印出用户在 Lua 中格式化并通过注册函数发送给我的信息。我从客户那里得到的是一个格式字符串、参数的数量以及每个参数作为一个数字。在调用此函数之前，我不知道用户将拥有多少个参数。我通过查询 lua 系统得到它们。

如何在运行时使用格式字符串和数字列表调用 printf？我可以在运行时为数字的值分配一个数组，但是 printf 期望一个 va_list 而不是参数的数字数组。

根据参数的数量，我可以有大量的“if”语句，但我正在寻找一种更巧妙的方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:14:40.567

如果您只需要打印出值，则可以使用 for 循环遍历所有值并单独打印它们，**而无需**换行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-21T11:19:24.790

我认为您可以只使用一个打印 %s 的 printf，并作为参数传递您的函数，该函数将返回 char*。该函数将接受参数数组作为参数。在函数内部，您可以使用 sprintf 将所有参数格式化为“字符串”，最后返回创建的“字符串”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:27:42.167

我认为在循环内重复调用 printf 显然会运行“参数数量”次。我的意思是这样说：

```
void YourFunction(char *format, int number_of_arguments, int *arguments)
{
    for(int index = 0; index < number_of_arguments; index++)
    {
        printf(format, arguments[index]);
    }
} 
```

现在你可以按照你想要的方式格式化它，比如添加换行符，

```
strcat(format, "\n"); 
```

如果我误解了你的问题，请纠正我。

# android - 从 Edittextpreference 开始活动

> ID：13404456
> 
> 赞同：0
> 
> 时间：2012-11-15T19:10:55.083
> 
> 标签：android, sharedpreferences

我想从 Edittextpreference 开始一项活动。当用户尝试点击它，或者只是点击edittextpreference时，它会触发活动。那可能吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:15:19.227

在你的 PreferenceActivity

```
EditTextPreference pref = (EditTextPreference)findPreference("setting_key");
pref.setIntent(new Intent(this, YourActivity.class)); 
```

[文档中 setIntent(intent) 的描述](http://developer.android.com/reference/android/preference/Preference.html#setIntent%28android.content.Intent%29)

# jquery - $.mobile.changePage 而不是 $.ajax

> ID：13404462
> 
> 赞同：0
> 
> 时间：2012-11-15T19:11:31.823
> 
> 标签：jquery, ajax, jquery-mobile, transition

我是新来的`jquerymobile`，那么，我怎样才能从一个简单的`$.ajax()`调用迁移到一个`$.mobile.changePage`？

我正常的ajax是这样的（来自一个`click`事件）：

```
$.ajax({
    url: 'mobile/' + content,
    type: 'GET',
    success: function (data) {
        $(".content").html(data);
    },
    error: function (XMLHTTPRequest) {
    }
}); 
```

基本上，所有的 ajax 调用（一些简单的 html）都将放在`$(".content");`

那么，我该怎么做呢，使用`changePage`？

我试试这个，但他只是淡出页面，什么也没发生，我认为我的目标丢失了，不知道。

```
$(".bottom-but-list li").on("click", function () {
    var content = $(this).attr("class").split(" ")[0]; // get the content to url

    $.mobile.changePage("mobile/" + content, {
        transition: "flip",
        reverse: true,
        changeHash: false,
        pageContainer: $("#page")
    });
}); 
```

**html:**

```
<div id="main-content" class="content">
     <!-- ajax should load here -->
 </div> 
```

我错过了什么？

# python - Pandas 中的 T 检验

> ID：13404468
> 
> 赞同：71
> 
> 时间：2012-11-15T19:11:57.260
> 
> 标签：python, pandas, scipy, statistics, hypothesis-test

如果我想计算 Pandas 中两个类别的平均值，我可以这样做：

```
data = {'Category': ['cat2','cat1','cat2','cat1','cat2','cat1','cat2','cat1','cat1','cat1','cat2'],
        'values': [1,2,3,1,2,3,1,2,3,5,1]}
my_data = DataFrame(data)
my_data.groupby('Category').mean()

Category:     values:   
cat1     2.666667
cat2     1.600000 
```

我有很多以这种方式格式化的数据，现在我需要做一个*T*检验，看看*cat1*和*cat2*的平均值是否在统计上不同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-11-16T09:34:21.770

这取决于您要进行哪种 t 检验（单侧或双侧相关或独立），但它应该很简单：

```
from scipy.stats import ttest_ind

cat1 = my_data[my_data['Category']=='cat1']
cat2 = my_data[my_data['Category']=='cat2']

ttest_ind(cat1['values'], cat2['values'])
>>> (1.4927289925706944, 0.16970867501294376) 
```

它返回一个带有 t 统计量和 p 值的元组

有关其他 t 测试，请参见此处[http://docs.scipy.org/doc/scipy/reference/stats.html](http://docs.scipy.org/doc/scipy/reference/stats.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-06-18T19:44:52.843

编辑：我没有意识到这是关于数据格式的。你[可以使用](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#from-dict-of-series-or-dicts)

```
import pandas as pd
import scipy
two_data = pd.DataFrame(data, index=data['Category']) 
```

然后[访问类别](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#indexing-selection)就像

```
scipy.stats.ttest_ind(two_data.loc['cat'], two_data.loc['cat2'], equal_var=False) 
```

[`loc operator`](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#indexing-selection)按标签访问行。

* * *

正如[@G Garcia 所说](https://stackoverflow.com/a/13413842/1587329)

> 一侧或两侧依赖或独立

如果您有**两个独立样本**，但您*不知道它们的方差相等*，则可以使用[Welch 的 t 检验](https://en.wikipedia.org/wiki/Welch%27s_t-test)。这很简单

```
scipy.stats.ttest_ind(cat1['values'], cat2['values'], equal_var=False) 
```

有关更喜欢 Welch 测试的原因，请参阅[https://stats.stackexchange.com/questions/305/when-conducting-at-test-why-would-one-prefer-to-assume-or-test-for-equal-变量](https://stats.stackexchange.com/questions/305/when-conducting-a-t-test-why-would-one-prefer-to-assume-or-test-for-equal-vari)。

对于**两个相关样本**，您可以使用

```
scipy.stats.ttest_rel(cat1['values'], cat2['values']) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-06T22:44:42.673

我稍微简化了代码。

```
from scipy.stats import ttest_ind
ttest_ind(*my_data.groupby('Category')['value'].apply(lambda x:list(x))) 
```

# c++ - 蒙特卡罗 C++ 中标准差的通用函数

> ID：13404473
> 
> 赞同：5
> 
> 时间：2012-11-15T19:12:08.100
> 
> 标签：c++, generic-programming, montecarlo

我应该在一些蒙特卡罗模拟中计算标准偏差函数。公式是这样的： ![在此处输入图像描述](../Images/2475591a82251976e6072a1ee673af0d.png)

我认为我的结果与应有的结果相去甚远。我的函数使用来自 boost 库的元组，它看起来像这样：

```
double add_square(double prev_sum, double new_val)
{
  return prev_sum + new_val*new_val;
}

template <typename V>
double vec_add_squares(const V<double>& v)
{
  return std::accumulate(v.begin(), v.end(), 0.0, add_square);
}

    template <class T> 
    boost::tuple<double,double> get_std_dev_and_error(const vector<T>& input, double r, double N)
{
 double M = double(input.size());

 double sum = std::accumulate(input.begin(),input.end(),0.0);
 double Squared_sum = vec_add_squares(input);

 std::cout << "sum " << Squared_sum << endl;

 // Calls Sum
 double term1 = Squared_sum - (sum/M)*sum;

 double SD = (sqrt(term1) * exp(-2.0 * r *N))/(M-1) ;
 double SE = SD/sqrt(M);
 std::cout << "SD = " << SD << endl;
 std::cout << "SE = " << SE << endl;

 return boost::tuple<double,double>(SD, SE) ;
 } 
```

1.  任何人都可以在这里看到任何错误吗？
2.  此外，STL 库中有“累积”功能 - 是否存在累积平方（容器成员）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T20:16:18.970

只需使用[Boost.Accumulators](http://www.boost.org/doc/libs/1_52_0/doc/html/accumulators.html)（因为您已经使用了 boost）：

```
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics.hpp>
#include <boost/range/algorithm.hpp>
#include <iostream>
#include <ostream>

using namespace boost;
using namespace boost::accumulators;
using namespace std;

int main()
{
    accumulator_set<double, stats<tag::sum , tag::variance, tag::mean > > acc;
    double data[] = {1., 2., 3.};
    acc = for_each(data, acc);
    cout << "sum = " << sum(acc) << endl;
    cout << "variance = " << variance(acc) << endl;
    cout << "sqrt(variance()) = " << sqrt(variance(acc)) << endl;
    cout << "mean = " << mean(acc) << endl;
} 
```

输出是：

```
sum = 6
variance = 0.666667
sqrt(variance()) = 0.816497
mean = 2 
```

# python - Python中的继承类变量修改

> ID：13404476
> 
> 赞同：75
> 
> 时间：2012-11-15T19:12:25.347
> 
> 标签：python, python-2.7

我想让一个子类修改它从其父类继承的类变量。

我想做一些类似的事情：

```
class Parent(object):
    foobar = ["hello"]

class Child(Parent):
    # This does not work
    foobar = foobar.extend(["world"]) 
```

理想情况下有：

```
Child.foobar = ["hello", "world"] 
```

我可以做：

```
class Child(Parent):
    def __init__(self):
      type(self).foobar.extend(["world"]) 
```

但是每次我实例化一个 Child 的实例时，“world”都会附加到列表中，这是不希望的。我可以将其进一步修改为：

```
class Child(Parent):
    def __init__(self):
      if type(self).foobar.count("world") < 1:
          type(self).foobar.extend(["world"]) 
```

但这仍然是一个hack，因为我必须在它工作之前实例化一个 Child 的实例。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-15T19:16:55.170

假设您想在子类中有一个单独的列表，而不是修改父类的列表（这似乎毫无意义，因为您可以将其修改到位，或者将预期值放在那里）：

```
class Child(Parent):
    foobar = Parent.foobar + ['world'] 
```

请注意，这与继承无关，这可能是一件好事。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-15T19:15:14.563

你不应该在你的类变量中使用可变值。而是使用实例初始化器在*实例*上设置此类值：`__init__()`

```
class Parent(object):
    def __init__(self):
        self.foobar = ['Hello']

class Child(Parent):
    def __init__(self):
        super(Child, self).__init__()
        self.foobar.append('world') 
```

否则，`foobar`列表不仅在实例之间共享，而且在子类之间共享。

在任何情况下，即使您确实希望通过可变类变量在实例之间共享状态，您也必须避免修改父类的可变变量；仅*分配*给名称会创建一个新变量：

```
class Parent(object):
    foobar = ['Hello']

class Child(Parent):
    foobar = Parent.foobar + ['world'] 
```

其中为类创建了一个*新* `foobar`变量`Child`。通过使用赋值，您创建了一个新的列表实例，并且`Parent.foobar`可变变量不受影响。

在这种情况下，请注意嵌套的可变对象；如有必要，使用该`copy`模块创建深层副本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-16T01:04:38.340

将参数传递给`__init__`('world') 会更清楚：

```
class Parent():
    def __init__(self):
        self.foobar = ['Hello']

class Child(Parent):
    def __init__(self, h):
        super().__init__()
        self.foobar.append(h)

g = Child('world')
print(f'g.foobar = {g.foobar}')
p = Child('how are you?')
print(f'p.foobar = {p.foobar}') 
```

输出：

```
g.foobar = ['Hello', 'world']
p.foobar = ['Hello', 'how are you?'] 
```

# c++ - C ++无法用双值完成平均计算

> ID：13404480
> 
> 赞同：0
> 
> 时间：2012-11-15T19:12:42.997
> 
> 标签：c++, double, average

这段代码现在做了什么：我给出 int 值并计算它们之间的平均值。我花了几个小时试图让它做的事情：我试过让它计算双精度值之间的平均值。我已经尝试了一切，但它总是失败或进入无限循环或无法编译。

问题：那么我应该如何修改我的代码以使其适用于双值/数字？

```
#include <stdio.h>

void main()
{
int Tau[10]={0,0,0,0,0,0,0,0,0,0};
int r, i = 0;
int m = 0;
int huku = 0;

do{

printf("Enter numbers: ");
scanf_s("%d", &i);
Tau[m]+=i;
huku++;

}while(i != 0);

r = (Tau[m]/(huku-1));

printf("The average of your numbers is; %d\n", r);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:15:54.347

您的代码中有一些问题，但基本上，整数除法不会给您加倍。一个整数除以一个整数的结果是另一个整数，而不是双精度数。如果您想要双精度数，则需要将分子或分母转换为双精度数并将结果存储在双精度数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:46:53.583

最简单的更改只涉及四行：

```
double Tau[10] = {0,0,0,0,0,0,0,0,0,0};
double r, i = 0;
scanf_s("%f", &i);
printf("The average of your numbers is; %f\n", r); 
```

请注意，这并不能解决编码问题；它所做的只是更改要读取和使用的代码，`double`而不是`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T19:24:27.687

1.  我不明白你为什么需要 Tau 作为你的向量。一个 int 就足够了。
2.  huku-1 -> 那是错误的。应该只是hu​​ku。
3.  分裂时需要将 Tau 和 huku 施放为双倍。检查 huku 是否为 != 0 也无妨。
4.  m 没用。只需删除它。
5.  如果您希望将 Tau/huku 存储在其中，则 r 不应该是 int。
6.  在 printf 中用 %lf 替换 %d

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T19:19:06.043

欢迎来到数值分析 1001。

整数数学：

```
2 / 3 = 0;
4 / 2 = 2;
5 / 2 = 2; 
```

整数不做分数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T20:45:58.090

```
// Question is tagged for C++, but the code is in C.
// I will change your code a bit, because you had quite a few mistakes.
#include <stdio.h>

void main ()
{
    int sum = 0; // sum of all numbers you entered, to find average you only need total sum and number of entries
    int numOfEntries; // number of entries (numbers taken from input)
    int inputNum; // variable where you will write numbers from input one by one
    double average; // Not really needed, but it can help to simplify the problem to you.

    printf("Enter numbers: ");
    do
    {
        scanf_s("%d", &inputNum);
        sum += inputNum;
        numOfEntries++;
    } while (inputNum != 0); // I understand you read numbers until you read value 0.
    // int / int will give you rounded number, not the true average, so we need to convert one of the operands to a real number, in this case double
    // double / int or int / double will give you a real number as result, which will have true average value, and that is why I converted sum to a real number
    if (numOfEntries != 0)
        average = (double)sum / numOfEntries;
    else
        average = 0;
    printf("The average of your numbers is; %f\n", average); // Here I did it again - print double instead of int to get true value.
} 
```

改变它会更容易：

```
....
double sum = 0;
...
average = sum / numOfEntries; // Here sum is already double, not int, so you don't need to change it manually.
... 
```

现在，如果你想让它适用于双倍，唯一的区别是：

```
 double sum = 0;
    double inputNum;
    scanf_s("%lf", &inputNum);
    average = sum / numOfEntries; 
```

所以，为了总结这个故事 - 你有一个变量来从键盘输入一个数字，一个保存到目前为止所有输入数字的总和的变量，一个计算你从键盘输入的数字数量的变量。您输入数字直到输入 0 作为值，然后程序将退出循环。平均数的公式是所有数字的总和除以数字的数量。对于整数，您必须将转换添加到实数，否则您将无法获得准确的结果。

我希望我没有混淆你。:D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T20:28:57.797

```
double r = 0;
int i = 0;
r = ((double)Tau[m]/((double)huku-1));
printf("The average of your numbers is; %f\n", r); 
```

# php - 是否可以通过子域将 Google Analytics 与多个帐户集成？

> ID：13404486
> 
> 赞同：0
> 
> 时间：2012-11-15T19:13:08.667
> 
> 标签：php, google-analytics, google-analytics-api

我试图了解这是否是 Google Analytics API 的用例。我遇到的大多数示例都是为您控制的站点提取信息并且已经设置了分析，这与我的用例几乎没有什么不同。

我要确定的是，我运行一个网站，用户可以在其中获得自己的迷你网站。所以 user1.domain.com、user2.domain.com 等。我们经常收到用户的请求，他们希望将分析代码添加到他们的网站，以便他们可以看到它的执行情况，所以我们正在查看是否有我们可以通过某种方式将其烘焙到我们的后端，并且只要求用户登录到他们的 Google 帐户并授权分析并在幕后为他们进行设置。

任何有类似用例的人/知道这是否可能？我认为域所有权验证会造成麻烦，因为即使子域不同，所有用户都共享同一个域。

编辑：我仍然想看看其他人如何处理这个问题，但我遇到的一个想法是只设置一个主帐户，然后在 API 中按子域进行过滤。人们无法登录并获得他们自己的完整分析体验，这会很糟糕，但我仍然可以制作一个基本界面来为他们获取简单的流量数据。不理想，但有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:17:26.560

我应该说这是可能的。因为 wordpress 做到了。[单击](http://www.ericmobley.net/guide-to-tracking-multiple-subdomains-in-google-analytics/)此处以获取有关如何操作的教程。

也要小心。下面的链接很好地描述了一些注意事项。

[http://www.roirevolution.com/blog/2011/01/google_analytics_subdomain_tracking.php](http://www.roirevolution.com/blog/2011/01/google_analytics_subdomain_tracking.php)

# wordpress - 更改类别 slug 会混淆 Wordpress 中帖子的传入链接

> ID：13404487
> 
> 赞同：1
> 
> 时间：2012-11-15T19:13:09.940
> 
> 标签：wordpress, .htaccess, redirect

我有wordpress网站说：`http://xyz.com/category-name/`

现在我将类别 slug 更改为`new-category-name`

当我将其粘贴到浏览器中时：

```
http://xyz.com/category-name/post-name/ 
```

它把我重定向到

```
http://xyz.com/new-category-name/ 
```

代替

```
http://xyz.com/new-category-name/post-name/ 
```

我已经试过了

就像是：

```
RewriteRule ^category-name/(.*) http://xyz.com/new-category-name/$1 [R=301,L] 
```

但它不起作用......如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:59:51.527

你听说过重定向插件吗？

[http://wordpress.org/extend/plugins/redirection/](http://wordpress.org/extend/plugins/redirection/)

最强大的功能之一是它跟踪帖子 URL 的变化并自动创建 301 重定向到新页面……为我节省了大量工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:56:23.463

尝试刷新永久链接结构，转到“设置”->“永久链接”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:34:49.960

看起来服务器将旧的 .htaccess 缓存了一段时间。现在它开始按预期工作。

# windows - 如何获取任意时区的 TIME_ZONE_INFORMATION？

> ID：13404490
> 
> 赞同：1
> 
> 时间：2012-11-15T19:13:16.957
> 
> 标签：windows, winapi

在 Windows 中，如果我需要`TIME_ZONE_INFORMATION`当前时区的结构，我可以调用[GetTimeZoneInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724421%28v=vs.85%29.aspx)。但是我使用什么 API 来获取`TIME_ZONE_INFORMATION`不是当前时区的任意时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:19:50.240

时区信息位于注册表下`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones`。您可以加载`TZI`值，这正是您要查找的内容，请参阅[TIME_ZONE_INFORMATION](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725481%28v=vs.85%29.aspx)结构，备注。

# php - Apache PHP 脚本无法连接到远程数据库/ODBC/MySQL，但可以从命令行运行

> ID：13404492
> 
> 赞同：0
> 
> 时间：2012-11-15T19:13:40.690
> 
> 标签：php, windows, apache, odbc

使用带有 Apache 2.2 和 PHP 5 的 Windows Vista 系统。

我有一个脚本可以测试与各种 ODBC 和 MySQL 数据库的连接。当脚本从浏览器窗口中加载的 Apache 运行时，它无法连接到任何远程 ODBC 或 MySQL 数据库。本地数据库工作正常。套接字连接也不起作用。

当我从命令提示符运行时，所有连接都正常。

在 ODBC 控制面板中测试连接时，它们也可以正常工作。我们网络上不同系统上的其他应用程序可以连接到这些数据库。

此外，我可以从远程位置的另一个系统上的 Windows 下安装的 Apache 提供的浏览器窗口运行此脚本。

Windows Apache 服务器系统禁用了防火墙，但它位于网络防火墙/代理之后。虽然由于脚本在命令行中工作，所以我认为它不是防火墙问题。

我已经看到了解决方案，但它们适用于 Linux 系统，我找不到任何适用于 Windows 机器的东西。

这可以是 php.ini 或 http.conf 文件中的一些设置吗？这是一些 Windows 设置吗？

这是代码

```
$lmSock = fSockOpen('www.server.com',80, $errno, $errstr, 30);
if(!$lmSock) {
echo("Can't open Remote socket<br />\n");
}
else {
echo("Remote Socket Success<br />\n");
}    

$odbcConn = odbc_connect('remote.mysql','','');
if(!$odbcConn) {
    echo("Cannot Connect To ODBC remote.mysql Server<br />\n");
}
else {
  echo("ODBC remote.mysql Connection success<br />\n");
}

$odbcConn = odbc_connect('local.sql','','');
if(!$odbcConn) {
    echo("Cannot Connect To ODBC local.sql Server<br />\n");
}
else {
  echo("ODBC local.sql Connection success<br />\n");
}

$toyConn = odbc_connect('remote.sql','','');
if(!$toyConn) {
    echo("Cannot Connect To ODBC remote.sql Server<br />\n");
}
else {
  echo("ODBC remote.sql Connection success<br />\n");
}

$mysqlConn = mysql_connect('server.address','login','pass');
if(!$mysqlConn) {
    echo("Cannot Connect To MYSQL server.address Server<br />\n");
}
else {
  echo("MYSQL server.address Connection success<br />\n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:22:10.677

我要检查的第一件事是确保您的连接没有被 Windows 防火墙阻止。尝试暂时禁用它只是为了测试。

[打开或关闭 Windows 防火墙](http://windows.microsoft.com/is-IS/windows-vista/Turn-Windows-Firewall-on-or-off)

如果这没有帮助，您可能想尝试下载 WAMP 以查看您的安装是否有问题。我不是建议您替换现有的安装（尽管如果它有效，您可能想要），我建议您尝试确定安装或您的操作系统是否有问题。

[下载](http://www.wampserver.com/en/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:19:09.263

问题是我们公司的防火墙。（微软 ISA 服务器 2000）。

该防火墙使用安装在我们内部系统上的实用程序（ISA 客户端），包括运行所有这些的服务器。

在我看来，命令行 PHP 脚本和 ODBC 控制面板通过这个客户端工作。不幸的是，由于某种原因，Apache 没有。

通过使用 MySQL 代理应用程序解决了这个问题，它将远程数据库镜像到本地 IP 地址。代理应用程序从命令行运行，并且似乎与防火墙客户端一起工作。

# facebook - 用于按位置收集 Facebook 签到的公共 API

> ID：13404495
> 
> 赞同：0
> 
> 时间：2012-11-15T19:13:44.007
> 
> 标签：facebook, facebook-graph-api

我不想问这样的问题，但 StackOverflow 社区的反应实在是太快了……我无法抗拒……

我们都知道 FourSquare 及其 API。您可以按位置搜索签到，因为foursuare 非常公开。我的问题是，Facebook 是否有任何类似的 API 可用，我可以在其中按位置查看匿名签到数据？签到/发布位置/等。

我倾向于“不”，但我想我会先向人群发出声音。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:44:44.250

我很确定这是不可用的，因为任何签入对象都需要相应的权限才能读取它。因此，即使您以某种方式获得了一堆签入对象 ID……您将无法检索有关它们的任何详细数据。

[https://developers.facebook.com/docs/reference/api/checkin/](https://developers.facebook.com/docs/reference/api/checkin/)

# javascript - JavaScript 定时器线程

> ID：13404497
> 
> 赞同：2
> 
> 时间：2012-11-15T19:13:52.293
> 
> 标签：javascript, timer, thread-sleep

我有一个函数 checkReg() ，它检查我的设备是否已在服务器上注册，第一次启动它并返回一个 regStatus 变量。该功能工作正常，但注册需要一些时间才能完成，如果没有确认注册完成，我的应用程序无法继续。

我想使用一个简单的线程在 1 秒内检查一次 regStatus，如果尚未注册，则在 5 次尝试后终止线程并返回，如果在 5 次尝试之前完成，则终止线程并继续。

```
Thread(run every 1 sec){
    regStatus=checkReg();
    if(regStatus==='done'){

        //do something
        //kill thread
    }else if(regStatus==='inprogress'){

        //do nothing
    }elseif(regStatus==='error'){

        //kill thread
    }
} 
```

我对 JS 很陌生，不知道如何启动、计时或终止线程。我已经使用了 setTimeout 函数，但我不确定它是否可以做我想做的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:20:51.370

JavaScript 通常没有线程，但您可以轻松地使用[`setInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

```
var retry = 0

function checkStatus() {
  var regStatus=checkReg();
  if(regStatus==='done'){
    //...
  }
  if(++retry > 5) {
    clearTimeout(id);
  }
}

var id = setInterval(checkStatus, 1000); 
```

# javascript - Javascript - 使用 target="_blank" 提交表单后重新加载页面

> ID：13404498
> 
> 赞同：3
> 
> 时间：2012-11-15T19:13:55.227
> 
> 标签：javascript, jquery, submit, reload, target

我正在尝试实现以下目标：
在页面 A 上，我们有一个访问受限的链接到页面 B。访问限制是在 PHP 中的服务器端处理的。
当用户点击这个到页面 B 的链接时，我们会在页面 A（通过 javascript）上显示一个带有表单的模式对话框，其中链接的 href (B) 作为操作。（为了给用户一个即时的反馈。回退是将他重定向到一个登录表单，该表单将他重定向到他想要访问的站点。）这个系统运行得很好。

但现在我的问题来了：
我们可以访问受限链接，这些链接应该在新窗口中打开。
现在，如果我在表单上使用 target="_blank" ，用户在他来自 (A) 的页面上保持注销，那仍然在后台打开。
有没有办法在表单提交到新窗口（B）后立即重新加载页面（A，在后台）？

我的第一个想法是使用 window.location.reload(); 在页面 A 的提交处理程序中。
这在 chrome 中不起作用，据我所知，这可能会产生竞争条件。

另一个想法是通过 ajax 调用登录用户并通过 javascript 打开一个新窗口。有没有办法做到这一点而不必处理弹出窗口阻止程序？

* * *

我实现了 lostsource 的想法（见下文），并稍加补充。
由于我只需要重新加载一次，因此如果 cookie 发生更改，则可以停止 setInterval 的计时器。

```
var ri=setInterval(function() {  
    if(oldCookie != document.cookie) {  
        // assuming a login happened, reload page  
        clearInterval(ri);  
        window.location.reload();  
    }  
},1000); // check every second 
```

我仍然喜欢这个主意。stackoverflow 太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:26:05.130

假设您将 PHP 会话信息存储在 cookie 中，您可能能够监视 document.cookie 的更改。

在提交表单之前存储当前 cookie 的值并使用计时器监控它的变化：

```
form.onsubmit = function() {
     var oldCookie = document.cookie;

     var cookiePoll = setInterval(function() {
         if(oldCookie != document.cookie) {
             // stop polling
             clearInterval(cookiePoll);

             // assuming a login happened, reload page
             window.location.reload();
         }
     },1000); // check every second
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:20:50.640

在父页面上，您是否因登录而有任何视觉/功能变化？就像任何可能的新行动一样？如果没有，那么您不必做任何事情，因为您将检查父页面中每个操作的登录，您可以同时检查权限。

如果有更改或附加功能，您可以在父级中调用 javascript 函数，例如`reloadMe`，使用`window.opener.reloadMe()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T14:29:22.837

为什么不只是一个简单的`setTimeout`

```
setTimeout(function(){ location.reload(); }, 1000); 
```

这有点hacky，但似乎适合您的情况。

# c++ - 编译 boost C++11 clang mac 找不到 cstddef

> ID：13404500
> 
> 赞同：14
> 
> 时间：2012-11-15T19:14:02.043
> 
> 标签：c++, boost, c++11, clang

我无法在 Mac os x 10.8.2 上使用 clang 3.1 编译 boost。

这就是我所做的：

```
./bootstrap.sh --with-toolset=clang
./b2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" 
```

我也试过没有计时、测试、波形和信号。我尝试了一个 user-config.jam

```
using clang-darwin 
```

这是我几乎每个文件都有的错误：

```
/boost/config/select_stdlib_config.hpp:18:12: fatal error: 'cstddef' file not found 
```

它有点类似于[How to compile/link Boost with clang++/libc++?](https://stackoverflow.com/questions/8486077/how-to-compile-link-boost-with-clang-libc)

谢谢 ：-）

更新：我确实有安装了命令行工具的最新 Xcode 4.5.2。

这是控制台输出的一部分：

```
Kikohs:trunk kikohs$ ./b2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++"
Performing configuration checks

- 32-bit                   : no
- 64-bit                   : yes
- x86                      : yes
- has_icu builds           : no
warning: Graph library does not contain MPI-based parallel components.
note: to enable them, add "using mpi ;" to your user-config.jam
    - gcc visibility           : yes
    - long double support      : no
warning: skipping optional Message Passing Interface (MPI) library.
note: to enable MPI support, add "using mpi ;" to user-config.jam.
note: to suppress this message, pass "--without-mpi" to bjam.
note: otherwise, you can safely ignore this message. 
```

构建 Boost C++ 库。

```
- iconv (libc)             : no
- iconv (separate)         : yes
- icu                      : no
- icu (lib64)              : no 
```

组件配置：

```
- atomic                   : building
- chrono                   : building
- context                  : building
- date_time                : building
- exception                : building
- filesystem               : building
- graph                    : building
- graph_parallel           : building
- iostreams                : building
- locale                   : building
- math                     : building
- mpi                      : building
- program_options          : building
- python                   : building
- random                   : building
- regex                    : building
- serialization            : building
- signals                  : building
- system                   : building
- test                     : building
- thread                   : building
- timer                    : building
- wave                     : building

...patience...
...patience...
...patience...
...patience...
...found 8672 targets...
...updating 1127 targets...
common.mkdir bin.v2/libs/atomic
common.mkdir bin.v2/libs/atomic/build
common.mkdir bin.v2/libs/atomic/build/clang-darwin-4.2.1
common.mkdir bin.v2/libs/atomic/build/clang-darwin-4.2.1/debug
clang-darwin.compile.c++ bin.v2/libs/atomic/build/clang-darwin-4.2.1/debug/lockpool.o
In file included from libs/atomic/src/lockpool.cpp:1:
./boost/atomic.hpp:10:10: fatal error: 'cstddef' file not found
#include <cstddef>
     ^
1 error generated.

"clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -DBOOST_ATOMIC_DYN_LINK=1 -DBOOST_ATOMIC_SOURCE -I"." -c -o "bin.v2/libs/atomic/build/clang-darwin-4.2.1/debug/lockpool.o" "libs/atomic/src/lockpool.cpp" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T19:37:03.607

看起来您忘记在 clang 旁边安装 libc++ 头文件。

如果您不想安装头文件，请尝试 Apple 作为命令行工具包的一部分分发的 clang 版本；它经过了更多的测试，并且已经正确设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T22:16:51.587

几个小时后，我终于解决了我的问题。

Homebrew 弄乱了我的路径，由于某种原因，我的 clang 找不到 libc++ 头文件。

有一个错误是 boost 1.52。

请参阅[Boost 数值限制错误](https://svn.boost.org/trac/boost/ticket/7671)

我不得不编辑文件：

```
boost/config/stdlib/libcpp.hpp 
```

并修补它：

```
#if _LIBCPP_VERSION < 1002 
#   define BOOST_NO_CXX11_NUMERIC_LIMITS 
#endif 
```

现在 boost 正在正确构建...

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-05-08T15:47:27.783

对于 Ubuntu 16.04，我可以使用 gcc 使用 c++11 构建 boost：

cd /home/user/install/boost/boost_1_54/

./bootstrap.sh --with-toolset=gcc

./b2 工具集=gcc cxxflags="-std=c++11 -I/usr/include/c++/5/ -I/usr/include/x86_64-linux-gnu/c++/5/"

mkdir ../2

./b2 安装 --prefix=../2/

构建我的程序的命令：

g++ -std=c++11 -O2 fprint.cpp -o fprint -I/home/user/install/boost/2/include/ -L/home/user/install/boost/2/lib/ -lboost_regex -lboost_program_options

在此之前，命令是：

g++ -std=c++11 fprint.cpp -o fprint -lboost_regex -lboost_program_options

，但是这个旧命令（以前在旧操作系统和 boost/etc 上工作得很好）不再起作用，说错误“未定义对 boost::re_detail_106501 的引用”（由 /tmp/cc0Zn8lo.o 说：在函数 `bool boost: :regex_search...)

（（如果我不使用“-I/usr/include/c++/5/-I/usr/include/x86_64-linux-gnu/c++/5/”作为./b2，那么错误是“不能在构建提升过程中找到 cstddef”，因此与这张票的主题完全相同））

# php - 如何在 Symfony 1 中从另一个动作渲染一个动作

> ID：13404503
> 
> 赞同：0
> 
> 时间：2012-11-15T19:14:13.473
> 
> 标签：php, symfony1, class-visibility

我被使用 1.0.17 版的 Symfony 应用程序困住了，目前无法升级。

现在有一个页面包含一个 iframe，它从同一模块加载不同操作的网页。iframe 也导致了一些设计问题和一些用户体验问题，所以我想摆脱它，直接在页面中呈现来自 iframe 的 HTML。

我只是不知道如何执行另一个动作并将视图模板呈现为我可以分配给调用动作视图的变量。

我已经尝试过`getPresentationFor()`，但这会导致调用页面上出现 404、异常或致命错误，具体取决于我的尝试方式。

我想我需要把代码放在`execute`动作的方法中。控制器是一个`sfAction`对象。如果我打电话`$this->getController()`，我会得到一个`sfWebController`对象。

来电：

```
$this->getController()->getPresentationFor('module', 'ContactIframeAction'); 
```

结果是空白页；该调用之后的任何代码都不会被执行，但如果我在它之前输出一些东西，我可以在页面上看到它。服务器错误日志中没有错误。

来电：

```
$this->getController()->getPresentationFor('module', 'ContactIframe'); 
```

只是导致我们的 404 页面显示，所以我认为之前的调用更接近我想要的。

有没有办法从另一个动作的代码呈现另一个动作的输出？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:30:42.157

大概是

```
$this->theContent = $this->getController()->getPresentationFor('module', 'contactIframe'); // minus 'c' 
```

利用 ：

```
// modules/mymodule/actions/actions.class.php
class myPageActions extends sfActions {

    public function executeIndex() {
        // ...
        $this->theContent = $this->getController()->getPresentationFor('module', 'contactIframe');                  
    }
}

// modules/mymodule/templates/indexSuccess.php
<?php echo $theContent ?> 
```

# python - 使用 Paramiko exec_command 运行命令会导致进程在完成之前休眠

> ID：13404507
> 
> 赞同：8
> 
> 时间：2012-11-15T19:14:39.260
> 
> 标签：python, ssh, process, paramiko

我正在使用 Python 的 Paramiko 模块通过 SSH 连接到远程机器并使用 Tar/ZIP 压缩一个包含大量文件（超过 14K 文件和 60 多个数据）的文件夹。由此产生的拉链本身约为 10 个演出。现在我可以直接从机器上运行命令来 zip/tar，没有问题。但是，当我尝试通过 运行相同的命令时`SSHClient.exec_command`，它会运行一段时间，但最终远程计算机上的压缩过程会进入睡眠状态。而`recv_exit_status`只是无限期地挂起。这是我正在使用的代码：

```
stdin, stdout, stderr = ssh.exec_command('cd myDirectory; tar -zcvf output.tgz *')
status = stdout.channel.recv_exit_status() 
```

我也尝试过使用 Zip。

```
stdin, stdout, stderr = ssh.exec_command('cd myDirectory; find -name "*.gz" | zip output.zip -@')
status = stdout.channel.recv_exit_status() 
```

在这两种情况下，如果我直接从远程机器运行命令，它就会完成压缩/TARing。结果文件就像 9 gigs。但是当我从 Paramiko 尝试它时，它开始运行，超过一半（6 次演出），然后进程进入睡眠状态！

我已经使用 top 监控了远程机器上的进程，并且 zip/tar 将开始运行，但它最终会在完成之前进入睡眠状态。而python脚本将无限期挂起。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-20T07:26:59.340

这可能与超时有关。尝试`timeout`在调用中添加参数（以秒为单位）：`exec_command(timeout=20*60)`. 这是 20 分钟的示例。有关更多信息，请参阅该方法的文档字符串：

```
def exec_command(self, command, bufsize=-1, timeout=None, get_pty=False):
    """
    Execute a command on the SSH server.  A new `.Channel` is opened and
    the requested command is executed.  The command's input and output
    streams are returned as Python ``file``-like objects representing
    stdin, stdout, and stderr.

    :param str command: the command to execute
    :param int bufsize:
        interpreted the same way as by the built-in ``file()`` function in
        Python
    :param int timeout:
        set command's channel timeout. See `Channel.settimeout`.settimeout
    :return:
        the stdin, stdout, and stderr of the executing command, as a
        3-tuple

    :raises SSHException: if the server fails to execute the command
    """ 
```

此外，我遇到的另一个问题也可能有所贡献：[https ://github.com/paramiko/paramiko/issues/109](https://github.com/paramiko/paramiko/issues/109)

[在https://github.com/paramiko/paramiko/issues/109#issuecomment-111621658](https://github.com/paramiko/paramiko/issues/109#issuecomment-111621658)中尝试我的建议

我也遇到了这个问题，这是由于 stdout.channel.eof_received == 0

```
import paramiko
client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect("1.1.1.1", username="root", password="pass")
stdin, stdout, stderr = client.exec_command("service XXX start") 
```

标准输入、标准输出和标准错误保持开放......

```
>>> print stdin
<paramiko.ChannelFile from <paramiko.Channel 3 (open) window=2097152 in-buffer=50 -> <paramiko.Transport at 0x17eff90L (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>>
>>> print stdout
<paramiko.ChannelFile from <paramiko.Channel 3 (open) window=2097152 in-buffer=50 -> <paramiko.Transport at 0x17eff90L (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>>
>>> print stderr
<paramiko.ChannelFile from <paramiko.Channel 3 (open) window=2097152 in-buffer=50 -> <paramiko.Transport at 0x17eff90L (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>> 
```

所以没有收到EOF...

```
>>> print stdin.channel.eof_received
0 
```

通常我会收到 True 并且只能收到 stdout.read()，但为了安全起见，我使用了这个解决方法（有效！）：等待超时，强制 stdout.channel.close()，然后强制 stdout.read()：

```
>>> timeout = 30
>>> import time
>>> endtime = time.time() + timeout
>>> while not stdout.channel.eof_received:
...     sleep(1)
...     if time.time() > endtime:
...         stdout.channel.close()
...         break
>>> stdout.read()
'Starting XXX: \n[  OK  ]\rProgram started . . .\n'
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T07:47:42.183

我的解决方案是`client.exec_command('my_cmd', get_pty=True)`。

`get_pty=True`可以**从服务器请求一个伪终端**。

所以如果你可以在 ssh 会话中运行你的命令，那么也应该通过使用`exec_command()`函数来工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-26T21:04:17.867

我刚刚也有类似的事情发生在我身上。我可以在通过 ssh 登录时运行命令，但运行`exec_command`最终会使命令进入睡眠状态（`S`in `htop`）。我发现这*可能*是由于命令产生的输出过多，`stderr`或者`stdout`我收集到的输出可能会溢出缓冲区，导致命令完成的信号丢失，但我绝对不是专家。我确实发现，添加`> /dev/null 2>&1`到我的命令末尾（从而消除 paramiko 触摸`stdout`和的需要`stderr`）允许相同的命令通过`exec_command`.

总之，我的工作流程如下所示：

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('999.99.99.99', username='me', key_filename='my_key')

stdin, stdout, stderr = ssh.exec_command('my_command > /dev/null 2>&1')

stdout_content = stdout.read()
stderr_content = stderr.read()
ssh.close() 
```

这目前有效，但如果有人知道如何解决原始问题*而*无需更改命令以重定向`stdout`和`stderr`.

# android - 在 AsyncTask 中将 TextView 添加到 RelativeLayout 不起作用

> ID：13404510
> 
> 赞同：0
> 
> 时间：2012-11-15T19:15:01.993
> 
> 标签：android, textview, android-relativelayout

我将几个 TextViews 添加到 RelativeLayout。我扩展了RelativeLayout。我可以在构造函数定义中添加 TextView。我可以在视图上看到该项目。但是相同的代码，当我在 AyncTask 的 onPostExecute 中使用或使用 post() 方法时，没有看到 TextView 添加到布局中。两个地方都执行相同的 coe。我刚刚更改了上边距。

这是我的代码

```
TextView tv = new TextView(context);
    addView(tv);

    tv.setHeight(49);

    tv.setWidth(100);

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.leftMargin = (int) 0;
    params.topMargin = (int) 600;
    tv.setLayoutParams(params); 
```

================ 实现================================

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        DateDetailsScrollView sc = new DateDetailsScrollView(container.getContext());

        new SyncInThread().execute(sc);
        return sc;
    } 
```

================= AsyncTask ================================= ===

```
private static class SyncInThread extends AsyncTask<Object, Void, String> {

    private ArrayList<EVT> _mEvents = new ArrayList<EVT>();
    DateDetailsScrollView _lv = null;

    @Override
    protected String doInBackground(Object... cal) {
        _lv = (DateDetailsScrollView)cal[0];

        //The SQL cannot be shared here... Please forgive me.
        boolean f = cursor.moveToFirst();
        while(f) {
            EVT evt = new EVT();
            evt.loadFromCursor(cursor);
            f = cursor.moveToNext();
            _mEvents.add(evt);
            cc++;
        }
        return "";
    }

    @Override
    protected void onPostExecute(String result) {

        for(EVT ev : _EVT) {
            _lv.addEvent(ev);
        }

    }

}

public class DateDetailsScrollView extends ScrollView {
    private EventRelativeLayout _mEventLayout = null;

    public DateDetailsScrollView(Context context) {
        super(context);
        _mEventLayout = new EventRelativeLayout(context);
        ll.addView(_mEventLayout);
        LinearLayout ll = new LinearLayout(context);
        ll.setOrientation(LinearLayout.HORIZONTAL);
        addView(ll);
    }

    public void addEvent(final VEVENT evt) {
            _mEventLayout.addEvent(evt);
            invalidate();
            this.refreshDrawableState();
    }
}

    public class EventRelativeLayout extends RelativeLayout {

public EventRelativeLayout(Context context) {
    //This works fine.
    super(context);
    TextView tv = new TextView(context);
    addView(tv);

    int[] colors = { 0xFF052d42, 0xFF096da0 };
    GradientDrawable drawable = new GradientDrawable(
            GradientDrawable.Orientation.TOP_BOTTOM, colors);

    tv.setBackgroundColor(0xFF290202);
    tv.setBackgroundDrawable(drawable);
    tv.setHeight(49);

    tv.setWidth(100);

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.leftMargin = (int) 0;
    params.topMargin = (int) 100;
    tv.setLayoutParams(params);

}

public void addEvent(EVT evt) {

    TextView tv = new TextView(getContext());
    addView(tv);

    int[] colors = { 0xFF052d42, 0xFF096da0 };
    GradientDrawable drawable = new GradientDrawable(
            GradientDrawable.Orientation.TOP_BOTTOM, colors);

    tv.setBackgroundColor(0xFF290202);
    tv.setBackgroundDrawable(drawable);
    tv.setHeight(100);

    int dm = em -eh;
    int dh = eh - sh;
    if( dm < 0) {
        dm += 60;
        dh--;
    }

    tv.setWidth(100);

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.leftMargin = 0;
    params.topMargin = 600;
    tv.setHeight(49);
    tv.setLayoutParams(params);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:40:39.993

我得到了这个问题。这是一个程序错误，由于计算错误，视图被添加到不同的页面。

# cloud - 云中的 Tridion - 资源

> ID：13404512
> 
> 赞同：4
> 
> 时间：2012-11-15T19:15:07.673
> 
> 标签：cloud, tridion

我正在尝试查找在基于云的基础架构中实施 Tridion 2011 的任何信息和最佳实践。有没有人最近有这方面的经验，或者 SDL 有没有值得一看的白皮书？它似乎在地上很薄。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:40:18.467

我见过人们使用 Amazon Cloud Large 实例在其上安装 CMS Server + DB + FrontEnd 以进行培训。

需要考虑的事项：（这些是一般的最佳实践）

*   您的 Tridion CMS 系统与您的数据库一样快。保持数据库连接关闭并且数据库服务器具有大量 CPU / 内存资源。
*   发布者消耗的 CPU 最多。它还与数据库进行了很多通信。确保它有足够的 RAM / CPU。考虑在与 CMS 不同的盒子上运行它。

您可能会首先在 Amazon EC2 上运行大型实例。由于您需要 SQL Server（或 Oracle）来运行数据库以及大量 RAM 来支持 Windows 和 SQL Server，因此您将始终使用至少大型 EC2 实例运行。您将无法从其他软件可能使用的更便宜的低资源实例中受益。至少对于开发和测试实例，您可以让它们在白天而不是晚上保持开机以节省成本。您还可以为您的开发/测试系统创建 AMI 映像，以快速启动新的测试系统。

# objective-c - 如何在不先显示 SLComposeViewController 的情况下显示 iOS 6 Facebook 警报视图

> ID：13404519
> 
> 赞同：2
> 
> 时间：2012-11-15T19:15:42.430
> 
> 标签：objective-c, facebook, ios6, settings, slcomposeviewcontroller

在 iOS 6 中，当您创建一个 SLComposeViewController 并使用 presentViewController 显示它并且您**没有**首先调用 isAvailableForServiceType 时，您将获得“No Facebook Account”警报视图，这使用户有机会在“设置”中设置他们的帐户。

不幸的是，它还在后台显示原生 Facebook 发帖对话框。

我希望获得比同时弹出两个对话框更清晰的体验，那么有没有办法在使用 isAvailableForServiceType 检查可用性后**仅**显示“无 Facebook 帐户”对话框？

这基本上是我想做的事情：

```
// Check to see if the user has a Facebook account set up...
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    SLComposeViewController *vc = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    SLComposeViewControllerCompletionHandler completionBlock = ^(SLComposeViewControllerResult result){
        // do something when complete...
    };
    [vc setCompletionHandler:completionBlock];
    [vc setInitialText:@"Intital text..."];
    [self presentViewController:vc animated:YES completion:nil];
} else {
    // No Facebook account configured yet,
    // so show "No Facebook Account" alert view here.
} 
```

这甚至*可能吗，*还是我只需要显示一个普通的 UIAlertView 告诉用户转到设置应用程序并设置他们的 Facebook 帐户？

*顺便说一句，我还通过调用来保护该块，该调用确定该设备是否甚至支持使用 SLComposeViewController，如果不支持，则使用 Facebook SDK 代替......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T21:16:04.333

我希望这很容易！现在，即使没有帐户设置，我也可以调用 composeViewControllerForServiceType: 方法，因此它会显示带有设置按钮的警报，隐藏视图，但我无法隐藏键盘！也许您可以找到一种方法来重置 UITextFieldDelegate 或其他任何东西以不显示键盘......但我不确定！让我知道你是否能弄清楚！

# regex - 用于具有贝塞尔曲线的字符串的正则表达式 小路

> ID：13404520
> 
> 赞同：0
> 
> 时间：2012-11-15T19:15:42.633
> 
> 标签：regex

我在 xCode 中有一个大文件，其中包含多次出现的 bezierPath（即 bezier456Path）。我想做的是为这个字符串提供一个正则表达式，这样我就可以简单地用字符串“bezierPath”替换它。我试过像 bezier\w*Path 这样的东西无济于事。有谁知道我可以用什么来搜索这样的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:20:58.163

`\w`用于单词字符。根据您的示例，您需要搜索数字（`\d`）：

```
bezier\d+Path 
```

此外，由于您的替换字符串是`bezierPath`，因此使用`*`（即零个或多个）没有意义，因为这将包括替换`bezierPath`为自身。因此，您应该使用`+`（即一个或多个）来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:23:15.633

我无权访问 xcode，但你不能使用 Find

```
(bezier.*?Path) 
```

然后使用替换为你想要的路径，所以在这种情况下只是 bezierPath

# java - 如何为特定资源创建一个 servlet，但对 Web 应用程序的其余部分使用 wicket

> ID：13404523
> 
> 赞同：3
> 
> 时间：2012-11-15T19:15:54.473
> 
> 标签：java, web-applications, wicket, atmosphere

我正在尝试将 Atmosphere 支持添加到 Wicket-1.5.X Web 应用程序。（目前升级到 6 不是一个选项。）

我目前将检票口过滤器配置为在 Atmospheres 之上运行`MeteorServlet`。我为 Atmosphere 创建了一个 sharedResource 以在我的应用程序中使用。我注意到，然而，即使是不使用共享资源的页面（如我的静态登录页面）似乎仍然会激活它。

我认为解决方案是将检票口过滤器从顶部`MeteorServlet`移到旁边。这样 /App/MyResource 将发射流星，但其他一切都只是获得检票口。

我怎样才能做到这一点？

**以防万一：**

*   雄猫 6.0.29
*   火狐 16.0.x
*   即 9

**更新：**
这是我的 web.xml 目前的样子：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
                         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
     version="2.4">

  <display-name>CSC</display-name>

  <!--
    added for Spring Wicket Hibernate compatibility
    From: http://wicketinaction.com/2009/06/wicketspringhibernate-configuration/
  -->
  <context-param>
    <!-- tells Spring to look in the Class Path for applicationContext.xml -->
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
  </context-param>

  <listener>
    <!-- Starts Spring -->
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>

  <!-- prevent hibernate LazyLoadingException -->
  <filter>
    <filter-name>openSessionInView</filter-name>
    <filter-class> 
      org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
    </filter-class>
    <init-param>
      <param-name>SessionFactoryBeanName</param-name>
      <param-value>sessionFactory</param-value>
    </init-param>
    <init-param>
      <param-name>applicationFactoryClassName</param-name>
      <param-value>org.apache.wicket.SpringWebApplicationFactory</param-value>
    </init-param>
    <init-param>
      <param-name>applicationBean</param-name>
      <param-value>wicketApplication</param-value>
     </init-param>
     <init-param>
       <param-name>applicationClassName</param-name>
       <param-value>
         us.ak.state.revenue.cssd.Personnel.QuickStartApplication
       </param-value>
     </init-param>
     <init-param>
       <param-name>configuration</param-name>
       <param-value>deployment</param-value>
     </init-param>
     <init-param>
       <param-name>contextpath</param-name>
       <param-value>CSC</param-value>
     </init-param>
     <init-param>
       <param-name>fileEncoding</param-name>
       <param-value>ISO-8859-1</param-value>
     </init-param>
   </filter>   

   <!--Atmosphere support, to remove the Ajax Updating Bug CSC-2 -->
   <servlet>
     <description>MeteorServlet</description>
     <servlet-name>CSC</servlet-name>
     <servlet-class>org.atmosphere.cpr.MeteorServlet</servlet-class>         
     <init-param>
       <param-name>org.atmosphere.filter</param-name>
       <param-value>org.apache.wicket.protocol.http.WicketFilter</param-value>
     </init-param>
     <!-- directory settings -->
     <init-param>
       <param-name>org.atmosphere.cpr.AtmosphereHandler.contextRoot</param-name>
       <param-value>CSC</param-value>
     </init-param>
     <!-- Abilities -->
     <init-param>
        <param-name>org.atmosphere.useWebSocket</param-name>
        <param-value>true</param-value>
      </init-param>
      <init-param>
        <param-name>org.atmosphere.useNative</param-name>
        <param-value>true</param-value>
      </init-param>
      <init-param>
       <param-name>org.atmosphere.cpr.sessionSupport</param-name>
       <param-value>true</param-value>
     </init-param>
     <!-- let Atmosphere handle keep alive,
          make sure broadcast happens AFTER AJAX stuff -->
      <init-param>
        <param-name>
          org.atmosphere.cpr.AtmosphereInterceptor
        </param-name>
        <param-value>
          org.atmosphere.interceptor.AtmosphereResourceLifecycleInterceptor,
          org.atmosphere.interceptor.BroadcastOnPostAtmosphereInterceptor
        </param-value>
      </init-param>
      <!-- shouldn't this be defaultContentType? sets Content-Type header default -->
      <init-param>
        <param-name>org.atmosphere.cpr.defaultContextType</param-name>
        <param-value>text/plain</param-value>
      </init-param>
      <init-param>
        <param-name>filterMappingUrlPattern</param-name>
        <param-value>/*</param-value>
      </init-param>
      <!-- minimize memory share broadcaster -->
      <init-param>
        <param-name>org.atmosphere.cpr.broadcaster.shareableThreadPool</param-name>
        <param-value>true</param-value>
      </init-param>
      <!-- error recovery -->
      <init-param>
        <param-name>
          org.atmosphere.cpr.recoverFromDestroyedBroadcaster
        </param-name>
        <param-value>true</param-value>
      </init-param>

      <!-- wicket filter settings -->
      <init-param>
        <param-name>applicationFactoryClassName</param-name>
        <param-value>org.apache.wicket.spring.SpringWebApplicationFactory</param-value>
      </init-param>
      <init-param>
        <param-name>applicationBean</param-name>
        <param-value>wicketApplication</param-value>
      </init-param>
      <init-param>
        <param-name>applicationClassName</param-name>
        <param-value>us.ak.state.revenue.cssd.QuickStartApplication</param-value>
      </init-param>
      <init-param>
        <param-name>configuration</param-name>
        <param-value>deployment</param-value>
      </init-param>
      <init-param>
        <param-name>contextpath</param-name>
        <param-value>CSC</param-value>
      </init-param>
      <init-param>
        <param-name>fileEncoding</param-name>
        <param-value>ISO-8859-1</param-value>
      </init-param>
      <load-on-startup>0</load-on-startup>
    </servlet>

    <servlet-mapping>
      <servlet-name>CSC</servlet-name>
      <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <filter-mapping>
      <filter-name>openSessionInView</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping>

    <mime-mapping>
      <extension>ico</extension>
      <mime-type>image/x-icon</mime-type>
  </mime-mapping>
</web-app> 
```

PS：也许 wicket 开发人员知道，1.5 仍然可以作为过滤器或 servlet 工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:26:40.680

不知道这个具体案例，但通常只是在框架（即 Wicket）映射之前添加定义和映射到 web.xml 的问题：

```
<servlet>
        <servlet-name>myservlet</servlet-name>
        <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
        <servlet-name>myservlet</servlet-name>
        <url-pattern>/mystuff</url-pattern>
</servlet-mapping> 
```

# c# - 将 MySQL 代理连接到 C# 应用程序

> ID：13404528
> 
> 赞同：1
> 
> 时间：2012-11-15T19:16:11.870
> 
> 标签：c#, mysql, wcf, proxy, sharding

我目前正在从事一个项目，该项目涉及将大型 MySQL 数据库拆分为多个较小的分片。但是，客户端必须能够像以前一样查询数据库，而无需更改用户界面；也就是说，他们通过 MySQL 客户端（Workbench、DBForge 等）发送的任何查询都必须从主数据库返回与从其分片返回相同的结果集。

这要求应用程序位于客户端和服务器之间，以拦截查询、分析它们、修改它们，并根据需要将它们重定向到主数据库或分片。我知道 MySQL Proxy 特别适合这项任务，但这就是问题所在。

我已经编写了一个 C# 应用程序，它接受一个 MySQL 查询字符串，修改它，查询它必须的任何分片，并聚合来自所有分片的结果。我的问题是我不知道如何将 MySQL Proxy 连接到这个应用程序。理想情况下，MySQL 代理会拦截查询，确定它是否“可分片”，然后将其发送到我的分片应用程序或主数据库。然后，分片应用程序会将其结果集发送回 MySQL 代理，后者会将其返回给客户端。

有什么明确的方法可以做到这一点吗？也许如果我要将 C# 应用程序变成 WCF 服务？MySQL Proxy 有连接数据库的方法，但考虑到它是用 Lua 编写的，我不知道它是否可以连接到一个简单的 Web 服务，更不用说 WCF。是否有一些替代 MySQL Proxy 的方法可以更好地满足我的需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T07:47:45.673

Mysql 允许您使用 Lua 编写脚本并连接到 C 或 C++。我没有 C# 经验，但我想你不会有问题。

*   安装 mysql 代理。您可以确定一个或多个后端 mysql DB。
*   将您的 C 代码编译为要从 Lua 调用的模块：[link](http://www.acamara.es/blog/2012/08/creating-a-lua-5-2-dynamic-link-library-of-c-functions/)
*   根据您的代码为您的查询设置后端 IP 并重定向它。

搜索 Lua 文档时要小心，因为 mysql-proxy 实现了 Lua 5.1，并且程序在不同版本之间变化很大。

# javascript - 如何延迟我的浮动 ShareBar 直到用户向下滚动页面

> ID：13404529
> 
> 赞同：3
> 
> 时间：2012-11-15T19:16:16.810
> 
> 标签：javascript, jquery, floating, searchbar

我已经浏览了这里的一些教程，但仍然无法解决我的问题，因此我发布了这个。

我想知道你是否可以告诉我如何让我的浮动共享栏@ [http://www.patchworkoftips.com/blackberry-messenger-voip-voice-calls/1983/](http://www.patchworkoftips.com/blackberry-messenger-voip-voice-calls/1983/)仅在用户向下滚动时显示 100px页面或文章中途。

这是我的共享栏 css：

```
#search_bar {
    z-index: 1000;
    position: fixed !important;
    top: 0;
    width: 1082px;
    color: #FFF;
    background: #333;
    padding-top: 1px;
    padding-bottom: 1px;
    overflow: hidden;
    margin-left: auto;
    margin-right: auto;
} 
```

抱歉，我无法粘贴共享条码，因为它在这里一直消失。

我是使用 javascript 和 jquery 的新手，因此非常感谢复制和粘贴解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:39:06.867

```
$(window).on('scroll', function(){
    if($(window).scrollTop() > 100){ // The '100' can be set to what ever pixel height you want
         $('#search_bar').fadeIn('500'); // This shows the share bar
    }else{
         $('#search_bar').fadeOut('500'); // This hides the share bar
    }
}); 
```

# objective-c - 有什么方法可以知道哪个集合视图单元位于特定点？

> ID：13404533
> 
> 赞同：2
> 
> 时间：2012-11-15T19:16:29.043
> 
> 标签：objective-c, ios, uicollectionview, cgpoint, uicollectionviewcell

我有一个 CGPoint，我想知道我的收藏视图中的哪个单元格当前包含该点。有什么简单的方法可以做到这一点，还是我必须编写自己的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T19:24:18.740

s用`UICollectionView`的不多，但是有一种方法看起来很完美：

```
- (NSIndexPath *)indexPathForItemAtPoint:(CGPoint)point; 
```

您传递给该方法的点必须在集合视图的坐标系内。你可以做：

```
CGPoint convertedPoint = [collectionView convertPoint:point fromView:viewThatYouGotThePointFrom]; 
```

如果您获得的点最初不是来自集合视图，则获得正确的点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-05T10:04:53.303

```
//due to the point passed in possibly not containing a cell IndexPath is an optional

func indexPathForCellAtPoint(_ point : CGPoint) -> IndexPath? {
                   return collectionView?.indexPathForItem(at: self.view.convert(point, to: collectionView!))
}

override func scrollViewDidScroll(_ scrollView: UIScrollView) {
   let topLeftCell = CGPoint(x: 1, y: 60)
       if let indexPath = indexPathForCellAtPoint(topLeftCell) {
                    print(indexPath.section,indexPath.row)
         }
} 
```

# python - TCP 非阻塞 socket.connect() 和 socket.recv() 错误问题。（Python 或 C）

> ID：13404538
> 
> 赞同：1
> 
> 时间：2012-11-15T19:16:54.920
> 
> 标签：python, sockets, tcp, epoll

我正在用 Python 脚本对一个简单的 HTTP 重定向服务器进行压力测试。该脚本使用非阻塞套接字的 epoll（边缘触发模式）设置。但我观察到一些我不太明白的东西，

1) 当 connect() 正在进行时，epoll 可以获得 ECONNREFUSED 和 ETIMEOUT errno。他们不是都表示远程服务器不能接受连接吗？它们有何不同，客户如何区分？

2）有时当epoll通知EPOLLIN时，socket.recv（）返回空字符串而没有抛出任何异常（或C中的errno），我可以继续读取套接字而没有任何异常或错误，它总是返回空字符串。这是为什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:40:58.823

1.  `ECONNREFUSED`表示连接被服务器拒绝，同时`ETIMEOUT`表示连接尝试已超时，即没有从对等端接收到有关连接尝试的指示（肯定或否定）。

2.  `socket.recv()`返回一个没有错误的空字符串只是 EOF 条件，对应于 C 中的空读取。这发生在另一端关闭连接或关闭连接以进行写入时。发生 EOF 时收到通知是正常`EPOLLIN`的，因为您想了解 EOF（并且因为您可以安全地`recv`从套接字而不挂起）。

# java - Java 多数组更新

> ID：13404540
> 
> 赞同：-1
> 
> 时间：2012-11-15T19:17:01.130
> 
> 标签：java, arrays, multidimensional-array

我有这样的字符串数组：

```
String[][][][][] map = new String[9][13][2][1][1]; 
```

当我尝试更新一个文件时，像这样：

```
map[0][0][1][0][1]  = "true"; 
```

每个领域都在更新为“真实”，这个：

```
map[0][1][1][0][1] 
```

这个：

```
map[0][2][1][0][1] 
```

为什么会这样？

这是我的代码：

```
int UP          = 0;
int UP_RIGHT    = 1;
int RIGHT       = 2;
int DOWN_RIGHT  = 3;
int DOWN        = 4;
int DOWN_LEFT   = 5;
int LEFT        = 6;
int LEFT_UP     = 7;

String[][][][][] map = new String[9][13][2][1][1];

public PitchMoveHelper() {
    String[][] move = {
            {String.valueOf(UP), "false"},
            {String.valueOf(UP_RIGHT), "false"},
            {String.valueOf(RIGHT), "false"},
            {String.valueOf(DOWN_RIGHT), "false"},
            {String.valueOf(DOWN), "false"},
            {String.valueOf(DOWN_LEFT), "false"},
            {String.valueOf(LEFT), "false"},
            {String.valueOf(LEFT_UP), "false"}
        };

    String[][] used = {{"used", "false"}};

    for(int z = 0; z < 9; z++) {
        for(int x = 0; x < 13; x++) {
            map[z][x][0] = used;
            map[z][x][1] = move;
        }
    }

    //this.updateLeftBand();
    //this.updateRightBand();
    //this.updateTopBand();
    //this.updateBottomBand();

    map[0][0][1][0][1]  = "true"; 

    System.out.println(Arrays.deepToString(getPitchMap()));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:38:03.157

您的直接问题是`String`数组存储*引用*，而不是实际字符串。当你说

```
map[z][x][0] = used;
map[z][x][1] = move; 
```

有一个被( 和 的所有元素引用的*单个*实例。任何由第 4 个或第 5 个下标索引的更改都会更改该单个实例，从而影响所有下标看到的内容。`used``[z][x][0]``map``move``[z][x][1]`

为了澄清更多，以下所有条目都`map`指向同一个实例：

```
map[0][0][0]
map[0][1][0]
       .
       .
map[0][12][0]
map[1][0][0]
  etc. 
```

要解决这个问题，您需要为循环中的每个分配制作一个深层`used`副本`move`：

```
for(int z = 0; z < 9; z++) {
    for(int x = 0; x < 13; x++) {
        map[z][x][0] = deepCopy(used);
        map[z][x][1] = deepCopy(move);
    }
} 
```

Where`deepCopy()`生成输入数组的完整副本。

```
String[][] deepCopy(String [][] arr)
{
    String[][] temp = new String[arr.length][];
    for (int i=0; i<arr.length; i++)
    {
         temp[i] = new String[arr[i].length];
         for (int j=0; j<arr[i].length; j++)
             temp[i][j] = arr[i][j];
    }
    return temp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:56:33.187

你需要意识到的关键是

```
int[][] example = new int[2][2];
example[1][0] = 1;
example[0] = example[1]; 
```

不将第二行**复制**到第一行。但它使它成为同一内存的**别名**- 即该行*与第一行相同*。

如果你想复制一个数组，一个元素一个元素，使用

```
System.arraycopy(...); 
```

如果你想复制一个数组数组，你需要一个深拷贝。

对您来说最简单的事情是**复制每个条目**。这可能会慢一些，但它可能是您现在可以轻松使用的概念。

再次：

```
array2 = array1; 
```

**不将 array1 复制**到 array2。但这使它们成为**一个数组**。

# ruby - 如何使用 rspec 测试屏幕抓取？

> ID：13404542
> 
> 赞同：5
> 
> 时间：2012-11-15T19:17:02.193
> 
> 标签：ruby, rspec, rubygems, screen-scraping

我正在编写一个非常依赖屏幕抓取的网站。因为我知道屏幕抓取很容易被破坏，所以我想以某种方式收到通知，说明存在问题。

我认为可行的解决方案是为我想要支持的每个站点编写一个 rspec 测试。该测试将从每个站点打开几个远程页面，并将它们与我期望从我的爬虫中获得的输出进行比较。我还想在本地缓存的副本上运行相同的测试，这样我就知道我的代码更改是否破坏了爬虫或远程站点是否更改。我想以某种方式每天运行一次这些测试并通知我任何问题。

最终我想让它成为一颗宝石，因为这对我来说是一个反复出现的问题。我倾向于做很多刮擦，很高兴知道事情何时破裂。

所以我的问题是我对为我的代码编写测试相对较新，我不知道设置它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T19:20:53.240

查看[VCR gem](https://github.com/myronmarston/vcr)，它可以让您获得要测试的各种页面的本地副本，同时能够不时刷新它们，以及针对实时页面进行测试。

# eclipse - 如何在 subclipse 中更改 svn 存储库中的端口？

> ID：13404543
> 
> 赞同：0
> 
> 时间：2012-11-15T19:17:05.497
> 
> 标签：eclipse, svn, ssh, port, subclipse

我在 Eclipse Indigo 中通过 svn+ssh 协议在 Kubuntu 12.10 上使用 Subclipse 1.8 有一个 SVN 存储库位置。

现在，为了在我们的网络之外访问它，我需要通过另一个端口。通过编辑存储库位置并输入新的端口号，它与以前使用的 Subversive 插件一起工作。但是我在 Subclipse 中没有看到这样的东西。

我尝试了重定位选项，并在通用主机：端口格式的主机之后的 url 中输入了端口，起初这似乎很好，因为它再次触发了身份验证弹出窗口，并且在其中正确设置了端口。但确认后，搬迁并没有完成，eclipse只好被杀了。

有人可以告诉我该怎么做吗？如果在 Subclipse 中真的没有选择，也许是通过一些操作系统机制？

PS：我不得不更改 eclipse 插件，因为 svn 已更新到 1.7 并且 Subversive 在 Indigo 版本中没有为它提供连接器。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T13:49:26.793

该端口是 Subversion 服务器 URL 的一部分。如果您需要在 Subclipse 中更改服务器的 URL，那么可以使用 Relocate 选项。这必须遍历链接到该服务器的所有工作副本并运行 svn relocate API，以便工作副本指向新的服务器 URL。

您没有提及您使用的是什么操作系统，或者您使用的是 SVNKit 还是 JavaHL。这很重要，因为它还将决定如何管理 SSH。Eclipse 可能已挂起，因为正在生成一个命令行 SSH 工具，并且没有终端来提供它想要提供的提示的答案。如果您使用的是 OpenSSH，那么只要您运行 ssh-agent 之类的东西来管理您的密钥，就可以避免这种情况。如果您使用 SVNKit，那么它会提供一个基于 Java 的 SSH 客户端，该客户端将在 Eclipse 中提供 GUI 提示。

# css - 试图将 span 标签粘贴到 div 的底部

> ID：13404544
> 
> 赞同：0
> 
> 时间：2012-11-15T19:17:07.547
> 
> 标签：css

它适用于 chrome ，而不适用于 ff/opera。

演示在这里：[http](http://booksnearby.in/browse_items.php) ://booksnearby.in/browse_items.php 。“位置：德里 Dhoolsiras 村”线“悬挂”在中间。我试图让它留在容器的底部。为此，我尝试了

```
Child span tag- {
bottom: -5px;
font-size: 11px;
left: 115px;
line-height: 20px;
position: absolute;
}
Parent:- element.style {
  height: 100%;
  position: relative;
} 
```

但它不起作用，除了在 chrome 中。请帮忙

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:23:41.080

一定要用桌子吗？因为您的问题来自 td 元素的高度。在所有 html 元素中，表格的跨浏览器支持最差 :)

是否可以更改结构以使用 div 元素？

**或者**你可以给`position: relative`你的`.listtd`而不是 div （这意味着从 div 中删除 position 属性）。这个解决方案可以解决问题。

# javascript - 如何在 Ext JS 4 中动态更改折线图的最小值和最大值

> ID：13404546
> 
> 赞同：3
> 
> 时间：2012-11-15T19:17:20.940
> 
> 标签：javascript, extjs, extjs4, extjs-chart

加载图表后如何更改折线图的最小和最大限制。

问题是一旦加载图表，如果在时间图表上动态更改数据看起来很尴尬。

例如，当图表中的初始最大值为 100 中的 90 并且刷新时新的最大值为 25，但由于图表中的最大值没有变化.. 3/4 看起来是空的，因为 25 不会扩展到整个图表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T23:18:33.990

这就是我设置最大限制的方式：

```
chart.axes.items[1].maximum = newValue; 
```

对于最小值应该是相同的。

# java - Java中与声音相关的分贝

> ID：13404547
> 
> 赞同：0
> 
> 时间：2012-11-15T19:17:23.140
> 
> 标签：java, decibel

我有一个使用变量在 Java 中播放声音的函数，`vol`如下面的代码所示。这个变量`vol`是 0 和 1 之间的小数。当我播放 a`0`时，声音基本上是可能的最低音量，而当我用 1 播放时，它尽可能响亮。我怎么知道程序的声音是什么分贝？我想知道给定的分位数`vol`。

```
public static final AudioFormat DEFAULTAUDIOFORMAT = new AudioFormat(44100, 16, 2, true, true);

private void generateTone() {
        int channels = DEFAULTAUDIOFORMAT.getChannels();
        int sampleSizeInBytes = DEFAULTAUDIOFORMAT.getSampleSizeInBits() /8;
        float sampleRate = DEFAULTAUDIOFORMAT.getSampleRate();
        int timedSample = (int) (sampleRate * msecs / 1000f);
        int len = timedSample * channels * sampleSizeInBytes;
        int shapeLen = (int) (.05 * timedSample);
        buf = new byte[len];
        double scale;
        for ( int i = 0, j = 0; i < timedSample; ++i )
        {
            int wave = (int)(vol * 32767.0 * Math.sin(2.0 * Math.PI * hz * i / sampleRate));
            scale = 1.0;
            if (i <= shapeLen) {
                scale = i/(double)shapeLen;
            }
            else if (i >= timedSample - shapeLen) {
                scale = 1.0-((i- timedSample + shapeLen)/(double)(shapeLen-1));
            }
            wave = (int)(scale * wave);
            buf[j++] = (byte)(wave >>> 8);
            buf[j++] = (byte) wave;
            buf[j++] = (byte)(wave >>> 8);
            buf[j++] = (byte) wave;
         }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:00:05.633

第 1 步：找到一个 SPL 仪表。如果您有任何类型的制造或实验室操作，安全人员应该有一个或知道谁做。如果没有，你可以下班后在停车场闲逛，看看谁有一辆音响声音很大的汽车，然后问他们。

第 2 步：建立对用户有意义的参考。手机铃声？也许在距离设备一米的露天测量。（也许也在一条牛仔裤的口袋里...... :) 。）汽车设备？在车内测量从设备到驾驶员座椅的公共距离。制造业？在操作员坐的公共距离处测量水泥地板。你明白了。

第 3 步：设置仪表并进行参考测量。由于这只是一个猜测，我可能会从最小值到最大值读取大约十个读数，然后在点之间插入直线。如果你是一个数学极客，你可以拟合曲线。

第 4 步：在您的软件中放置一个查找表，使用您之前的数据根据​​音量级别查找参考 SPL。

第 5 步：在您的关于框之类的某处解释用于测量的参考环境。

第 6 步：在您的产品上放置一个巨大的免责声明，即声音输出值仅为参考估计值，并不证明输出水平符合任何职业安全指南。

与java无关，但是：

声压级的分贝是在特定位置的空气中产生的压力与正常人能听到的最安静的声音的比率。

它不是一个绝对量，你可以说一个声音系统，如电压或功耗。说“这是一个 90 dB-SPL 信号”是没有意义的。供参考的声明必须更像：

“这是一个 90dB-SPL 信号，在距离扬声器 2 米处测量，在轴上，在一个 3mx3m 的隔音工作室中。”

您需要在受控环境中测量整个系统，然后您将能够开发一个经验模型来预测源代码中的控制信号与系统输出压力的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:44:37.580

分贝定义为`10 * Math.log10(v1/v2)`，其中`v1`是当前音量的值，`v2`是参考最低声级。

# mongodb - 使用 Spring Data (Spring Roo) 防止 MongoDB 中的重复

> ID：13404548
> 
> 赞同：2
> 
> 时间：2012-11-15T19:17:23.460
> 
> 标签：mongodb, spring-roo, spring-data-mongodb

我一直试图让我的头脑围绕着 MongoDB，因为它被 Spring 使用，所以我决定在 Spring Roo 开始一个小项目。

在我的项目中，我将用户登录数据存储到 MongoDB。问题是注册过程，它创建一个新的用户对象并将其存储在 MongoDB 中，尽管我在 loginId 字段上有@Unique，但仍有创建重复项的趋势。

现在，我知道部分问题是我正在从 JPA/RDBMS 的角度考虑问题，而 MongoDB 不是关系数据库，因此有一组不同的参数可供操作，但我无法找到指导不仅仅是一个非常简单的示例代码。

首先，有哪些 Spring/Other 注释可用，更重要的是，在处理来自 Spring 世界的 MongoDB 时常用到哪些注释？其次，在处理需要“唯一”的文档时，通常如何做到这一点？您是否首先搜索唯一字段以确保它不存在，然后插入？第三，在 JPA 领域，我可以使用注释 @PrePersist 和 @PreUpdate 进行最后一分钟的数据操作，例如已更新的 MD5 哈希密码或在存储之前添加/更新“上次修改”日期。我知道这是 JPA-isms，但我仍然可以使用它们吗？如果不能，是否有替代方法可以与 Spring Data/MongoDB 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:51:28.297

我最终在我的实体上使用了@Id 注释，它指示哪个字段用作 id 字段。只要该字段是唯一的，写入后续更新将正确替换现有实体，而不是添加新实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T08:31:14.483

我最终创建了额外的方法来检查是否存在与我们输入的数据具有重复值的数据。如果存在，我返回失败，指出存在重复值。否则它会保存新输入的值

# mysql - MySQL/SQL Server 中的条件/可执行注释

> ID：13404550
> 
> 赞同：5
> 
> 时间：2012-11-15T19:17:26.217
> 
> 标签：mysql, sql, sql-server, penetration-testing

在我开始之前，我意识到我正在尝试的东西是奇怪的和骇人听闻的。这只是一个孤立的渗透测试，特别是 SQL 注入。

我需要做的是编写一个 SQL 语句，它在 MySQL 数据库上执行时的行为与在 SQL Server 数据库上执行时的行为不同。

## 编辑

我可以构建的查询的限制是我只能更改“WHERE id =”子句之后的内容。我不能影响查询的任何其他部分。具体来说，我需要能够将仅由 SQL 服务器执行的“UNION SELECT * FROM some_other_table”附加到我输入的末尾。

这显然会炸毁 MySQL，因为它没有我正在合并的表。

具体来说：

```
SELECT * FROM USERS 
WHERE id = My input -> (MySQL code: 'x' or 1=1 )
                       (MSSQL code 'x' or 1=1 UNION SELECT * FROM table) 
```

问题是，如果任一语句被数据库执行，它并不意味着它会爆炸（而不是以我需要的方式）。

这导致我[在 MySQL 中发现了 Conditional/Executable Comments](http://dev.mysql.com/doc/refman/5.0/en/comments.html)。

```
SELECT * FROM USERS 
WHERE id = /*! This will be executed but only by mysql */ 
```

太好了，但我仍然无法阻止 MySQL 执行 MSSQL！我只能阻止 MSSQL 执行 MySQL 代码。

我最初的想法是在 MySQL 条件中添加一条评论，例如：

```
SELECT * FROM USERS
WHERE id = /*! 4 or 1=1 --*/ MSSQL code that is ignored by mysql 
```

但这会引发一个错误，说要在“”附近没有任何内容的行检查我的语法。

我不完全理解为什么这不起作用，但我知道不适用于我所知道的任何形式的 MySQL 注释（已尝试 #，/*）。

有没有办法让我奇怪的 SQL 语句工作？或者有没有办法在 MSSQL 中进行条件注释？我真的只需要 MySQL 在有条件的情况下忽略任何内容，但我不知道如何在没有评论的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:50:59.703

我不确定这是否是您所需要的，但如果我理解正确，您想要一个 SQL 语句在 MySQL 和 SQL Server 上返回不同的结果（如果这就是“行为不同”的意思？）。如果是这样，一个起点是使用具有相同名称和语法但行为不同的系统函数，例如`SUBSTRING()`：

```
select substring('test', -1, 1) 
```

在返回空字符串的 SQL Server 上，但在 MySQL 上返回`t`. 我不知道 using`SUBSTRING()`在您的情况下是否可行，但如果不是，您也许可以找到另一个更易于在查询中使用的功能。

如果这根本没有帮助，那么我建议您提供更多详细信息，说明您在构建查询时有哪些限制。

# javascript - 不存在的 jQuery load() 页面片段

> ID：13404553
> 
> 赞同：2
> 
> 时间：2012-11-15T19:17:37.573
> 
> 标签：javascript, jquery

如果我通过提供一个不存在的页面片段来运行 jQuery 的 load() 函数会发生什么？它只是加载整个页面，还是加载一个空页面？

```
$("#a").load("http://www.example.com #non-existing-id"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:26:01.713

来自[http://api.jquery.com/load/](http://api.jquery.com/load/)（在加载页面片段部分）

> 我们可以修改上面的示例以仅使用获取的文档的一部分：
> 
> $('#result').load('ajax/test.html #container');
> 
> 当这个方法执行时，它会检索 ajax/test.html 的内容，然后 jQuery 会解析返回的文档以找到 ID 为 container 的元素。该元素及其内容被插入到 ID 为 result 的元素中，其余检索到的文档将被丢弃。

由于该元素不存在，因此不会在`#a`. 但是，请注意整个页面仍然是从服务器获取的。

# javascript - 以编程方式显示表单默认验证状态

> ID：13404557
> 
> 赞同：3
> 
> 时间：2012-11-15T19:17:50.050
> 
> 标签：javascript, css, forms, html, validation

我想使用 ajax 提交表单。所以我没有使用`type=submit`. 我正在使用`onClick`链接（`<a>`）上的事件来使用 ajax 发送表单数据。我还想利用 HTML5 表单验证功能。
所以在发送数据之前，我使用该函数`.checkValidity`来检查表单的有效性。
如果它返回true，那么我发送数据。但是当它返回 false 时，我想使用 HTML5 默认通知方案向用户显示表单无效。但我不知道如何触发它。

> 有没有办法以编程方式**显示**表单的验证。

一种方法是在`checkValidity`返回 false 时触发提交事件。但这会刷新页面。我不想改变页面的状态。

*`checkValidity`只检查有效性并通知程序。它不会以交互方式通知用户。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:28:28.200

我们有完全相同的问题，我们尝试了非常不同的东西，其中很多都是像伪提交和 event.preventDefault() 方法这样的黑客攻击。总而言之，我必须说 HTML5 验证总体上很好，但在实践中却非常糟糕，因为它不可能像显示前端验证错误一样显示后端验证错误。

只有天知道为什么 HTML5 的人没有想到一个简单的 API，我们可以像这样触发验证 element.triggerValidationMessage('my message');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-25T13:22:01.600

如果你让你的表单有一个提交按钮并返回 false，你可以做到这一点！您可以在与未提交者相同的事件处理程序中执行此操作！因此，首先测试您是否是表单的一部分，如果是，请检查有效性并且永远不要返回 true（即使有效）！

```
$('.ajx')   
    .on("submit click", function(e) {

        var $this           = $(this)

        //Force native form validating and notification
        form = $this.closest('form')[0]
        if (form) {
            //Follow through with form submit (element must be of submit type!)
            if(!form.checkValidity()) {
                //don't ask me!
                sleep(3000);
                return false
            }
        }           

        //only preventDEfault AFTER possible form element click
        e.preventDefault()

        //...your project further ajax code
        //Makes sure your form never submits
        if (e.type=='submit') return false
} 
```

小缺点：您必须在提交按钮上执行此操作，但始终可以将您的更改`<a>`为`type=submit`. 不过，您不必更改非 form `<a>`！

# c# - C# 函数前缀属性名称？

> ID：13404559
> 
> 赞同：0
> 
> 时间：2012-11-15T19:18:03.047
> 
> 标签：c#

在 C# 中，在 MVC 3 中的方法上方调用的那些括号是什么？

```
[ErrorHandler, SomethingHere]
public function Test() {

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T19:19:54.030

不知道你所说的“那些括号”是什么意思。函数前面是一个属性。

[微软 MSDN：System.Attribute](http://msdn.microsoft.com/en-us/library/system.attribute.aspx)

并在使用方面进行一些扩展：

> 属性是可以放置在源代码元素上并用于在编译时存储特定于应用程序的信息的注释。此信息存储在元数据中，可以在应用程序执行期间通过称为反射的过程或其他工具读取元数据时访问。属性可能会在执行期间改变应用程序的行为，提供有关对象的事务信息，或将组织信息传达给设计者。[gnu.org](http://www.gnu.org/software/dotgnu/pnetlib-doc/System/Attribute.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T19:33:53.990

这些被称为`Attributes`。属性是从抽象类 System.Attribute 继承的类。按照惯例，所有属性都有一个以“属性”一词结尾的类名。以下是一些 MVC3 属性：

```
 AcceptViewAttribute
   ActionFilterAttribute
   ActionMethodSelectorAttribute
   ActionNameAttribute
   ActionNameSelectorAttribute
   AuthorizeAttribute
   BindAttribute
   CustomModelBinderAttribute
   FilterAttribute
   HandleErrorAttribute
   HiddenInputAttribute
   HttpDeleteAttribute
   HttpGetAttribute
   HttpPostAttribute
   HttpPutAttribute
   ModelBinderAttribute
   NonActionAttribute
   OutputCacheAttribute
   RequireHttpsAttribute
   ValidateAntiForgeryTokenAttribute
   ValidateInputAttribute 
```

你可以创建你的[自定义属性](http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T19:20:24.053

属性

它推断出 Attribute 一词，因此您的示例与以下内容同义：

```
[ErrorHandlerAttribute, SomethingHereAttribute]
public function Test() { 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T19:22:53.300

MVC 运行时使用反射来查找属性。然后 MVC 使用这些关于定位属性的信息来查找方法将如何执行，安全限制是什么等等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T19:20:17.487

这些被称为方法属性。[您可以在msdn 网站](http://msdn.microsoft.com/en-us/library/aa288454%28v=vs.71%29.aspx)上阅读更多内容

# actionscript-3 - Flash Builder - 如何在没有 MXML 的情况下设计 UI？

> ID：13404561
> 
> 赞同：2
> 
> 时间：2012-11-15T19:18:14.500
> 
> 标签：actionscript-3, flash, actionscript, flash-builder

有谁知道在没有 MXML 的情况下创建 UI 的体面指南？

我非常不喜欢使用 mxml 进行编程，并且想采用任何其他可能的方式。（用于 UI 的纯 Actionscript 或 Flash Professional）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:11:09.840

您可以使用 Flex 而无需编写任何 MXML。但是，您可能会发现这会适得其反。我在 MXML 中以声明方式创建视图/皮肤，并在 Actionscript 中执行其他所有操作。

创建视图、用子对象填充它们、添加侦听器、设置样式，所有这些都在几行简单的 MXML 中完成。使用 Actionscript 语句执行相同的任务意味着更多的输入。MXML 代码更简洁，在我看来，这使它更加清晰/可维护：

MXML：

```
<s:Group width="100%">
    <s:Button label="button" click="onButtonClick()" paddingTop="0"/>
</s:Group> 
```

AS3：

```
var g:Group = new Group();
g.percentWidth = 100;
var b:Button = new Buton();
b.label = "button";
b.addEventListener(MouseEvent.CLICK, onButtonClick);
b.setStyle("paddingTop", 0);
g.addChild(b); 
```

我经常在纯 AS3 中创建自定义组件（我在应用程序视图中重复使用）。我实现了 Flex 生命周期方法，然后将这些组件组合成一个 MXML 视图。

我更喜欢用纯 Actionscript 编写所有内容。然而，我不会这样做的一个地方是为我的应用程序创建视图/皮肤。我认为这是一个公平的交易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T21:16:48.123

您可以使用 Flash Builder 编辑 Flash Pro 项目的 Actionscript 部分。[这里](http://forums.adobe.com/message/4836121#4836121)有一个关于示例文件和所有内容的技术的巨大讨论。

# android - 从本机调用复制位图

> ID：13404562
> 
> 赞同：0
> 
> 时间：2012-11-15T19:18:16.617
> 
> 标签：android, android-ndk, java-native-interface

我有一个从本机 c 代码调用的 Java 方法。它的工作很简单，复制一个位图。但这使它毫无错误地轰炸出去。

```
public synchronized Bitmap copyScreen() {
    try {
        Log.d(TAG, "before copy Screen");
                          //Any of these lines make it bomb out.
        // Bitmap copy = bmp.copy(bmp.getConfig(), false);
        //Bitmap copy = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(),
        //      bmp.getConfig());
        Bitmap copy = Bitmap.createBitmap(800, 480, Config.ARGB_8888);
        Log.d(TAG, "after copy Screen");
        return copy;
    } catch (Exception ex) {
        Log.e(TAG, "copyScreen", ex);
        return null;
    }
} 
```

我可以`copyScreen`毫无问题地从 Java 调用它。只有当它被 JNI 调用时，它才会爆炸。

如果我不做任何一个复制行，它也可以正常工作。

日志猫只显示：

> 11-15 20:10:49.234: D/GraphicsBuffer(24341): 复制屏幕前

请注意，本机代码在与主线程分开的线程中运行。我已经同步了对该字段的所有访问`bmp`。但即使制作一个新的位图而不会导致它退出。如果位图很小，没关系。

```
Bitmap copy = Bitmap.createBitmap(80, 48, Config.ARGB_8888); 
```

有效，那么我可以从 JNI 分配的内容有一些限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:36:26.827

很确定我的问题是我保留对 java 环境的引用的方式：

**我的旧 main 和 getJNIEnv**

```
 JNIEnv *_env;

 JNIEXPORT void JNICALL Java_com_comp_prod_main(JNIEnv *env,
        jclass thiz) {
    LOGV("Main called %d", __LINE__);
    _env = (JNIEnv *) ((*env)->NewGlobalRef(env, env));
      main(); //somewhere in here it calls back to the java which creates the bitmap
    _env = NULL;
  }

  JNIEnv *getJNIEnv(void) {
     return _env;
  } 
```

**我的新 main 和 getJNIEnv**

```
JavaVM *jvm;

JNIEXPORT void JNICALL Java_com_comp_prod_main(JNIEnv *env,
        jclass thiz) {
    LOGV("Main called %d", __LINE__);
    //this is how to cache it for other threads
    jint rs = (*env)->GetJavaVM(env, &jvm);
    assert (rs == JNI_OK);
    main(); //somewhere in here it calls back to the java which creates the bitmap
    jvm = NULL;
}

JNIEnv *getJNIEnv(void) {
    JNIEnv *env;
     jint rs = (*jvm)->AttachCurrentThread(jvm, &env, NULL);
     assert (rs == JNI_OK);
     if(env == NULL)
     {
       LOGV("env is NULL");
     }
     return env;
} 
```

仅供参考，所有 c 都是单线程的，但在单独的线程中运行到主线程。这是从 Java 开始的方式：

```
Runnable runTerm = new Runnable() {

public void run() {
  // call main()
  Log.i(TAG, "About to call main on the c!");
  try {
    Terminal.main();
    } catch (IOException e) {
     e.printStackTrace();
    }
    }
};

t = new Thread(runTerm, "C thread");
t.start(); 
```

# javascript - 在javascript中压缩文本数据并通过AJAX发送

> ID：13404566
> 
> 赞同：0
> 
> 时间：2012-11-15T19:18:31.397
> 
> 标签：javascript, ajax

我开发了应该使用 jQuery/AJAX/JSON 与服务器通信的 Web 应用程序。只是很好奇，是否可以在将文本数据发送到服务器并在那里提取之前以某种方式压缩文本数据？是否有任何已经实现的 JavaScript 压缩器？

换句话说，如何实现下一个场景：

1.  使用 JavaScript 在客户端压缩文本数据
2.  将压缩数据发送到服务器
3.  在服务器端解压数据

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:20:19.783

是的，任何用 JS 编写的压缩算法都可以，或者考虑在您发送的请求的 HTTP 标头中设置压缩设置。

# c - 将应用程序的输出写入声音文件

> ID：13404568
> 
> 赞同：1
> 
> 时间：2012-11-15T19:18:38.430
> 
> 标签：c, bash, freebsd

我在 BSD 上使用 espeak 将文本输出为声音。我的问题是我希望它把它当作.mp3，但我运气不好。我尝试将输出通过管道传输到 tee 但我想这仅适用于标准输出而不仅仅是播放声音。

有任何想法吗？我最后的手段是重新编译我自己的 espeak 版本，它允许我保存到文件而不是播放它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:21:57.927

您可以将其编写为 wave，然后将其转换为`ffmpeg`：

```
espeak "HelloWorld" -w <file>.wav 
```

或管道`ffmpeg`

```
espeak "HelloWorld" --stdout | ffmpeg -i pipe:0 output.mp3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:22:16.230

从[文档中](http://espeak.sourceforge.net/commands.html)：

> -w <wave file>
> 将语音输出写入 WAV 格式的文件，而不是说出它。
> 
> --stdout
> 在生成语音输出时将其写入标准输出，而不是说出来。数据以 WAV 文件头开始，它指示数据的采样率和格式。长度字段设置为零，因为在生成标头时数据的长度是未知的。

看起来这两个选项都会生成 WAV 文件，但您可以轻松地转换这些文件，而无需其他程序（如 ffmpeg）。

# mysql - 将一个查询的查询结果转换为另一个查询的列

> ID：13404572
> 
> 赞同：1
> 
> 时间：2012-11-15T19:18:47.320
> 
> 标签：mysql, sql, join, pivot

我有两个具有一对多关系的表，可以说我有这个。

```
**Table Owners**
K  Owner
1  Fred
2  Jason
3  Tonya 
```

和

```
Table Cars

K CarBrand
1 Mitsubishi 
1 Honda
1 VW
2 Toyota
3 Ford 
```

而不是得到这个：

```
K Owner CarBrand 
1 Fred  Mitsubishi 
1 Fred  Honda
1 Fred  VW 
```

我想用这样的结果进行查询：

```
K Owner CarBrand1 CarBrand2 Carbrand3
1 Fred  Mitsubishi Honda     VW 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:32:21.633

不是真的，但这很接近

```
Select k, owner, group_concat(carbrand)
FROM owners, cars
WHERE
owner.k = cars.k
GROUP BY car brand 
```

对不起格式，我会解决的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:33:07.987

看起来您想将数据从单列、多行转换为多列和每人一行。这基本上是一个`PIVOT`但不幸的是 MySQL 没有`PIVOT`函数，因此您需要使用带有`CASE`语句的聚合函数来复制它。

如果您知道您将拥有多少个汽车品牌，您可以对这些值进行硬编码，如下所示：

```
select k, owner,
  max(case when nameRn = 'CarBrand1' then carbrand end) CarBrand1,
  max(case when nameRn = 'CarBrand2' then carbrand end) CarBrand2,
  max(case when nameRn = 'CarBrand3' then carbrand end) CarBrand3
from
(
  select k, owner, carbrand,
    concat('CarBrand', @num := if(@owner = `owner`, @num + 1, 1)) as nameRn,
    @owner := `owner` as dummy
  from
  (
    select k, owner, carbrand, @rn:=@rn+1 overall_row_num
    from
    (
      select o.k, o.owner, c.carbrand
      from owners o
      inner join cars c
        on o.k = c.k
      order by carbrand
    ) oc, (SELECT @rn:=0) r
    order by k 
  ) r
) src
group by k, owner 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d41c1/10)

但是，如果您有未知数量的值，那么您可以使用准备好的语句来生成它的动态版本：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when nameRn = ''',
      nameRn,
      ''' then carbrand end) AS ',
      nameRn
    )
  ) INTO @sql
FROM 
(
  select k, owner, carbrand,
    concat('CarBrand', @num := if(@owner = `owner`, @num + 1, 1)) as nameRn,
    @owner := `owner` as dummy
  from
  (
    select k, owner, carbrand, @rn:=@rn+1 overall_row_num
    from
    (
      select o.k, o.owner, c.carbrand
      from owners o
      inner join cars c
        on o.k = c.k
      order by carbrand
    ) oc, (SELECT @rn:=0) r
    order by k 
  ) r
) src;

SET @sql = CONCAT('SELECT k, owner, ', @sql, ' 
                  from
                  (
                    select k, owner, carbrand,
                      concat(''CarBrand'', @num := if(@owner = `owner`, @num + 1, 1)) as nameRn,
                      @owner := `owner` as dummy
                    from
                    (
                      select k, owner, carbrand, @rn:=@rn+1 overall_row_num
                      from
                      (
                        select o.k, o.owner, c.carbrand
                        from owners o
                        inner join cars c
                          on o.k = c.k
                        order by carbrand
                      ) oc, (SELECT @rn:=0) r
                      order by k 
                    ) r
                  ) src
                   GROUP BY k, owner');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f590f/1)

结果将与两者相同：

```
| K | OWNER | CARBRAND1 | CARBRAND2 |  CARBRAND3 |
--------------------------------------------------
| 1 |  Fred |        VW |     Honda | Mitsubishi |
| 2 | Jason |    Toyota |    (null) |     (null) |
| 3 | Tonya |      Ford |    (null) |     (null) | 
```

# actionscript-3 - 在 AS3 中，当值大于最大 int 时 getTimer() 将返回什么

> ID：13404573
> 
> 赞同：4
> 
> 时间：2012-11-15T19:18:53.347
> 
> 标签：actionscript-3, flash, int

根据[Adob](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getTimer%28%29) ​​e getTimer() 是：

> 用于计算相对时间。对于处理 ActionScript 3.0 的 Flash 运行时，此方法返回自 ActionScript 3.0 (AVM2) 的 Flash 运行时虚拟机启动以来经过的毫秒数。

由于 getTimer 返回一个 int ：

> int 类允许您使用表示 32 位有符号整数的数据类型。int 类表示的值的范围是 -2,147,483,648 (-2^31) 到 2,147,483,647 (2^31-1)

getTimer() 在 2,147,483,647 毫秒后会返回什么？我认为那大约是连续跑步 24.85 天。这不是通常的情况，但对于数字标牌和信息亭环境来说，这是完全可行的。

在这些情况下应该避免 getTimer() 吗？Date.UTC() 对象会因为返回 Number 类型而更安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:58:54.270

我的猜测是它会自行循环，就像 int 一样。

```
var nt:int = int.MAX_VALUE + 10; //outputs -2147483639
var nt2:int = int.MIN_VALUE + 9; //outputs -2147483639 
```

如您所见，`MAX + 10`与`MIN + 9`（显然必须考虑最小值本身）相同。因此，当您达到 24 天标记时，它可能看起来像 -24 天并开始回升。

函数本身也有可能不会返回实际时间，而是类似以下内容：

```
return timer % int.MAX_VALUE; 
```

这将使用简单的模数将每次达到 MAX_VALUE 的时间重置为 0。老实说，如果这是他们所做的事情，我不会感到惊讶（因为您显然不想要负面的运行时间）

# c# - 如何在我的 C# ASP.NET 代码和 HTML/JavaScript 之间共享一个变量？

> ID：13404575
> 
> 赞同：0
> 
> 时间：2012-11-15T19:19:02.387
> 
> 标签：c#, javascript, asp.net, html, variables

> **可能重复：**
> [如何在 C# 和 JavaScript 之间共享变量？](https://stackoverflow.com/questions/8532592/how-to-share-a-variable-between-c-sharp-and-javascript)

我正在增强一个 C# ASP.NET Web 应用程序，它在 HTML 中有两个重要的部分。有两个菜单选项可以隐藏一个，另一个不隐藏。我们称它们为第一页和第二页。

问题是页面上的某些内容会导致回发，这会导致完全刷新并强制默认为第一页。此外，我们每五分钟自动刷新一次以获取新的页面内容。如果用户在自动刷新或由于用户单击某些内容后的回发时恰好正在查看第二页，则该页面会自动返回到第一页。

长期的解决方案是正确使用 AJAX。现在我需要一种快速而肮脏的方法来记住用户在刷新时所在的页面，然后在刷新时将他放回该页面。

我可以在 C# 中的服务器端创建一个可以在客户端使用 JavaScript 查询的变量吗？从技术上讲，如果我能以某种方式让客户端从页面刷新到刷新，服务器不需要知道浏览器中显示了哪个页面 div。有没有办法做到这一点？

如果这看起来很简单，请原谅我。我有多年的编程经验（主要是 MS-DOS 和 Unix 世界中的 C/C++），但在 ASP.NET 环境中却不是很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:47:18.093

如果您使用元标记来刷新页面`<meta http-equiv="refresh" content="600"/>`，那么您应该将标签/页面 id 与 url 一起传递：

```
<meta http-equiv="refresh" content="600;url=http://yourdomain.com/page.html?tab=<%= tab %>/"> 
```

当您向页面发送任何回发时，还要添加此属性。

现在，您只需要在服务器端读取此属性的值并将其替换为元刷新标记：

```
tab = Request.QueryString["tab"] 
```

# constraints - lwuit 文本字段十进制约束和 vbk 错误字符

> ID：13404579
> 
> 赞同：0
> 
> 时间：2012-11-15T19:19:10.157
> 
> 标签：constraints, lwuit, lwuit-textfield, lwuit-vkb

我将我的 tetfields 之一的约束设置为 DECIMAL，问题是 VBK 显示其他不必要的字符，例如：& @ - "' 等，因为在触摸设备中无法删除 VBK 我决定检查这些字符的字符串：

```
if (txtCAmount.getText().indexOf("@")==-1 && txtCAmount.getText().indexOf("&")==-1 && 
        txtCAmount.getText().indexOf("$")==-1 && txtCAmount.getText().indexOf(";")==-1 && 
        txtCAmount.getText().indexOf("(")==-1 && txtCAmount.getText().indexOf(")")==-1 && 
        txtCAmount.getText().indexOf("/")==-1 && txtCAmount.getText().indexOf(":")==-1 && 
        txtCAmount.getText().indexOf("-")==-1 && txtCAmount.getText().indexOf(",")==-1 && 
        txtCAmount.getText().indexOf("!")==-1 && txtCAmount.getText().indexOf("?")==-1 && 
        txtCAmount.getText().indexOf("'")==-1 && txtCAmount.getText().indexOf('"')==-1) 
```

但最后一个问题是。因为用户可以输入任意数量的点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:10:49.090

我最近在文档中看到您可以对文本字段约束使用按位 OR，这样您就可以更好地调整结果，同时设置输入顺序和模式可能会有所帮助。

# c# - 仅从列表执行阅读器中获取单个值

> ID：13404580
> 
> 赞同：2
> 
> 时间：2012-11-15T19:19:21.550
> 
> 标签：c#, json, sql-server-2008, list, executereader

我正在尝试从我的数据库中读取值。但是为什么我只得到没有列名的值？这是我的控制器。以 JSON 格式返回值

```
 SqlCommand cmd = con.CreateCommand();

            cmd.CommandText = "SELECT DISTINCT State FROM MyDBtable";

            con.Open();
            List<string> StateList = new List<string>();
            SqlDataReader reader = cmd.ExecuteReader();

            while (reader.Read())
            {
                StateList.Add(reader[0].ToString());
            }

            return Json(new
            {
                myTable = StateList
            }, JsonRequestBehavior.AllowGet); 
```

这是我的 JSON

```
{"myTable":["VA","CA"]} 
```

在哪里，它应该给我

```
{"myTable":[{"State":"VA"},{"State":"CA"}]} 
```

为什么不是读取和打印状态

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:21:56.333

字符串没有属性“状态”。改为创建匿名类型：

```
myTable = StateList.Select(s => new { State = s }) 
```

**更新：**多列的最简单解决方案 - 为此创建一个 DTO

```
public class MyItem // of course use more descriptive name
{
   public string State { get; set; }
   public string Capital { get; set; }
   // etc
} 
```

并从读者那里填写：

```
List<MyItem> items = new List<MyItem>();

while (reader.Read())
{
    MyItem item = new MyItem();
    item.State = reader[0].ToString(); 
    item.Capital = reader[1].ToString(); 
    // etc
    items.Add(item);
}

return Json(new {  myTable = items }, JsonRequestBehavior.AllowGet); 
```

* * *

另一个示例（使用 Dapper，您可以在 NuGet 上找到）。添加`using Dapper;`到您的代码中。使用与上面相同的 DTO 类。

```
using (var connection = new SqlConnection(connectionString))
{
    connection.Open();
    return Json(new {
       myTable = connection.Query<MyItem>("SELECT * FROM MyDBtable").ToList()
    }, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T19:21:38.610

因为您正在选择状态。这将创建一个新对象，其中`State`属性被分配了状态，这样你就得到你想要的：

```
SqlCommand cmd = con.CreateCommand();

cmd.CommandText = "SELECT DISTINCT State FROM MyDBtable";

con.Open();
List<string> StateList = new List<string>();
SqlDataReader reader = cmd.ExecuteReader();

while (reader.Read())
{
    StateList.Add(reader[0].ToString());
}

return Json(new
{
    myTable = StateList.Select(i => new { State = i })
}, JsonRequestBehavior.AllowGet); 
```

有关其他列，请参阅[lazyberezovsky 的答案](https://stackoverflow.com/a/13404621/47064)，谁已更改`StateList`以解决此问题。

# java - 来自 XML 的动态 java

> ID：13404583
> 
> 赞同：1
> 
> 时间：2012-11-15T19:19:39.143
> 
> 标签：java, xml, jaxb, jelly

我想为我的域对象构建某种对象生成引擎。例如，假设我正在使用图表。模型由 xml 表示，我应该能够加载它们并在运行时构建 java 表示。

可以说，图有顶点和边所以它看起来像这样：

```
<graph>
   <vertex id="n1" color="red", thickness="2">
   <vertex id="n2">
   <edge end1="${n1}", end2="${n2}"/>
</graph> 
```

为此，我想获取可以由以下 java 类描述的对象：

```
class Graph {
     List<Vertex> vertexList
     List<Edge> edgeList
}

class Vertex {
   String id
    ... various properties ... 
}

class Edge {
   Vertex end1
   Vertex end2
} 
```

另一个要求是能够像这样在循环中定义顶点：

```
<graph>
  ...
    <for var = i, min = 1, max = 10, step = 1>
      <vertex id=$i.../> 
    </for>
  ... 
</graph> 
```

我考虑过使用 Apache Jelly，但它似乎是一个“死”项目，JaxB 不允许这种级别的动态行为 AFAIK ......

我的问题是——你可以推荐什么框架来实现这样的任务？

如果有一些像 Apache Jelly 一样工作但仍然维护的东西，它也可能很棒:)

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:34:21.597

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)`@XmlID`实现可以使用和的组合轻松处理文档中的引用`@XmlIDREF`。我将在下面用一个例子来演示。

**JAVA模型**

**图形**

```
package forum13404583;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
class Graph {

    @XmlElement(name = "vertex")
    List<Vertex> vertexList;

    @XmlElement(name = "edge")
    List<Edge> edgeList;

} 
```

**顶点**

在`Vertex`类中你需要使用`@XmlID`注解来表明该`id`字段是id。

```
package forum13404583;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
class Vertex {

    @XmlAttribute
    @XmlID
    String id;

    @XmlAttribute
    String color;

    @XmlAttribute
    Integer thickness;

} 
```

**边缘**

在`Edge`类中，`@XmlIDREF`注释用于指示 XML 值包含引用实际值的外键。

```
package forum13404583;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
class Edge {

    @XmlAttribute
    @XmlIDREF
    Vertex end1;

    @XmlAttribute
    @XmlIDREF
    Vertex end2;

} 
```

**演示代码**

```
package forum13404583;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Graph.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum13404583/input.xml");
        Graph graph = (Graph) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(graph, System.out);
    }

} 
```

**输入（输入.xml）/输出**

下面是运行演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<graph>
    <vertex id="n1" color="red" thickness="2"/>
    <vertex id="n2"/>
    <edge end1="n1" end2="n2"/>
</graph> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html](http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html)

# shell - 列出具有特定字符的 shell 变量

> ID：13404584
> 
> 赞同：0
> 
> 时间：2012-11-15T19:19:44.640
> 
> 标签：shell, variables, csh

> 我在 c-shell 中有一些引用文件名的变量。这些变量的名称如下：
> 
> $T01aa2 $T12aa2 $T45aa2 等。
> 
> 它们有共同的“T”和“aa2”。
> 
> 例如，如果它们是文件名，我如何在循环中列出这些变量：
> 
> 我想做类似的事情：
> 
> foreach ii in ($T*aa2) dosomestuff.sh $ii end
> 
> 不幸的是，$T*aa2 不适用于 c-shell 变量名。
> 
> 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:14:01.730

变量名与文件名非常不同。几乎可以肯定有更好的方法来做你想做的任何事情。

但如果你必须这样做，你能做的最好的事情就是用`set | grep`（或`awk`或`sed`或其他）和也许`eval`。像这样的东西：

```
set vars=(`set | awk '$1 ~ /^T.*aa2$/ {print $1}'`)
foreach var ( $vars:q ) 
    eval 'dosomestuff "$'"$var"'"'
end 
```

您可以`set`直接从 中获取值并跳过`eval`，但如果值可能包含空格，则可能会变得很棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T22:05:36.803

不是 csh 的忠实粉丝，但您是否尝试转义 $ 符号？我的意思是用 "\$" 代替 "$" ？

# gwt - 无法开启 GWT 超级开发模式

> ID：13404593
> 
> 赞同：1
> 
> 时间：2012-11-15T19:20:31.717
> 
> 标签：gwt

在尝试使用 GWT 超级开发模式时，我遵循了这些准则：

*   [GWT-2.5-超级开发模式](http://www.insideit.fr/post/GWT-2.5-Super-Dev-Mode)
*   [引入超级开发模式](https://developers.google.com/web-toolkit/articles/superdevmode?hl=fr)
*   [GWT 的超级开发模式是如何工作的？](http://tbroyer.posterous.com/how-does-gwts-super-dev-mode-work)

但是，我被困在尝试打开 Super Dev Mode 的步骤：

一旦我完全编译了我的项目，我运行代码服务器和开发模式，进入`http://127.0.0.1:8888/myapp.html`（没有`?gwt.codesvr=127.0.0.1:9997`）然后点击书签`Dev Mode On`。它检测到我的模块，要求我重新编译，出现一个带有消息的玻璃屏幕`Compiling MyApp ...`，然后什么也没有……没有错误，在 Chrome 或 Eclipse 中都没有堆栈跟踪。只是什么都没有发生。

从文件中调试 js 代码`dev_mode_on.js`，脚本在第 324 行被中断：

```
...
function getBindingParameters(module_name, get_prop_map) {
  var session_key = '__gwtDevModeSession:' + module_name;

  --> var prop_map = get_prop_map(); <--
... 
```

一旦函数`get_prop_map`被调用，就会运行更多的混淆函数，并且调试器会返回。

我知道它仍然是实验性的，但你知道我做错了什么吗？

**PS：**我正在使用 GWT 2.5、GWT-maven-plugin 2.5 和 Chrome 23.0.1271.64 m

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:32:07.820

我们发现了一个类似的问题并追查了原因，看起来像是 GWT 中未处理的边界情况。

更多信息可以在这里找到：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=7894](http://code.google.com/p/google-web-toolkit/issues/detail?id=7894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:02:19.927

我没有答案，但我可以为这类问题提供一些一般性的调试技巧。

目前超级开发模式（从 2.5 开始）在编译时不会向 Web 浏览器报告任何进度。在编译完成之前它不会更新对话框。因此，由于某种原因，您的程序可能非常慢，或者编译停止并且以某种方式没有像通常那样报告错误。

但是，还有其他方法可以监控其进度。编译器日志可通过以下代码服务器首页的链接以网页形式获得；您必须刷新页面才能看到更新。或者您可以查看代码服务器工作目录中磁盘上的日志。（您可以在启动时使用 -workDir 参数设置工作目录。）

另一种方法是从命令行启动代码服务器。来自代码服务器的任何堆栈跟踪都将在那里打印。如果您从那里运行它，您还应该能够查看 Eclipse 或 IntelliJ 中的输出。

从这里您应该能够判断编译器是否很慢，但仍在工作（它仍在打印输出）或实际上已经停止并带有堆栈跟踪。

# ruby - 使用 rvm 编译 1.9.3-p327 的问题

> ID：13404595
> 
> 赞同：1
> 
> 时间：2012-11-15T19:20:44.897
> 
> 标签：ruby, rvm

试图让 ruby​​ 在 Windows 7 64 位上玩得很好，被错误逼疯了。使用 rvm，我对 1.9.2 和 1.9.3-p194 没有任何问题。但使用 1.9.3-p327：

```
Error running `make`, please read [...]/make.log` 
```

她在这：

```
 CC = gcc
    LD = ld
    LDSHARED = gcc -shared 
    CFLAGS = -I/home/Cameron.Steele/.rvm/usr/include 
    XCFLAGS = -include ruby/config.h -include ruby/missing.h -DRUBY_EXPORT
    CPPFLAGS =   -I. -I.ext/include/i386-cygwin -I./include -I.
    DLDFLAGS = -Wl,--enable-auto-image-base,--enable-auto-import -Wl,--out-implib=libruby191.dll.a cygruby191.def  
    SOLIBS = cygruby191.res.o -lpthread -lrt -ldl -lcrypt  
linking miniruby.exe
file.o:file.c:(.text+0x434c): undefined reference to `_wcsicmp`
collect2: ld returned 1 exit status
Makefile:164: recipe for target `miniruby.exe' failed
make: *** [miniruby.exe] Error 1 
```

没有孩子……不像电脑那么贵，用处少很多，而且砸是违法的。

任何帮助都非常感谢。我已经很欣赏你了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:41:22.710

请参阅： [https ://bugs.ruby-lang.org/issues/7415#change-33382](https://bugs.ruby-lang.org/issues/7415#change-33382)

Ruby 人员认为这是一个错误，并在 Backport93 列表中发现了该问题。它计划被修复。

# multithreading - 在多个服务之间共享一个日志文件（每个服务有多个线程），如何？

> ID：13404600
> 
> 赞同：9
> 
> 时间：2012-11-15T19:20:53.647
> 
> 标签：multithreading, delphi, logging

我有这个问题需要为我的一个项目解决。我需要为 3 种不同的服务创建一个日志文件（不要问为什么，我的老板是这样要求的）。每个服务都可以有多个线程尝试将信息记录到文件中，所以我的问题是，最好的方法是什么？

我应该使用全局互斥锁吗？像这样的东西：

```
procedure LogToFile(fn, str: string);
var
  F: TextFile;
begin
  logMutex.Acquire;
  try
{$I+}
    try
      AssignFile(F, fn);
      if FileExists(fn) then
        Append(F)
      else
        Rewrite(F);
      Writeln(F, DateTimeToStr(Now) + ': ' + str);
      CloseFile(F);
    except
    end;
{$I-}
  finally
      logMutex.Release;
  end;
end;

initialization
  logMutex := SyncObjs.TMutex.Create(nil, False,'some_global_mutex');

finalization
  logMutex.Free; 
```

有更好的想法吗？

**编辑：**我是否应该构建另一个服务，一个记录器服务，等待需要从其他服务记录的消息，然后只有一个服务必须处理日志文件？如果这是一个很好的解决方案，那么在服务之间进行通信的最佳方式是什么？我可以用印地...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:19:17.550

您使用命名互斥锁的解决方案将起作用，并且肯定是最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:08:55.137

在一个大型项目中，大约有 50-80 个应用程序在多个终端服务器上运行（这使得同步变得困难），我设法将所有日志输出收集到单个中央文件。

应用程序使用开源[Log4D 框架](http://mikejustin.wordpress.com/2012/09/12/delphi-and-free-pascal-logging-with-the-log4d-open-source-library/)和 Internet Direct (Indy) 通过 UDP 将日志输出写入应用程序服务器。应用程序服务器有一个 UDP 服务器应用程序正在运行，它接收日志消息并将它们写入单个文件。

由于日志消息包括元信息（记录器名称等），除了主文件之外，日志服务器仍然可以配置为每个应用程序编写单独的文件。例如，从客户端发送的一些日志消息包含数据库性能数据，它们将被写入单独的日志文件，以便在没有进一步过滤步骤的情况下进行分析。

# vim - 如何预防 在插入模式下等待更多输入

> ID：13404602
> 
> 赞同：15
> 
> 时间：2012-11-15T19:20:59.830
> 
> 标签：vim, configuration, keyboard-shortcuts

当我按 退出插入模式时`Esc`，在 Vim 真正返回正常模式之前会有半秒的暂停。

通常这不会是一个问题，因为按下正常模式命令就像`j`按下后`Esc`立即执行正常模式命令（没有上述等待），但我有映射`inoremap <Esc> <Esc>:w<CR>`，所以每次我离开插入模式文件是写的。我希望在按下时*立即*`Esc`写入，但会有半秒的停顿。

我假设暂停是因为 Vim 正在等待更多输入，然后才决定我只是想输入一个简单的`Esc`. 这一定是因为在某个地方有一个映射，第一个字符是`<Esc>`，但是我查看了我的`.vimrc`并且没有这样的映射。

此外，我什至跑了`:map <Esc>`，它又回来了`No such mapping`。那么，如果没有这样的映射，为什么 Vim 似乎在等待更多输入，我该如何避免这种行为？

* * *

**额外的信息**

看来这是不可复制的，所以这里有一些更多信息，以防有人真的想深入了解：

我正在使用[Steve Francia 的`spf13`Vim 发行版，](https://github.com/spf13/spf13-vim)[上面](https://gist.github.com/4080745)有[我自己`.vimrc.local`](https://gist.github.com/4080745)的发行版。我还使用 Vundle安装[了几个额外的插件。](https://gist.github.com/4053482)

*注：* `.vimrc.local`最后出自`.vimrc`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T02:08:09.227

### 更新（2014 年 3 月 19 日）

我找到了一个比试图从文档的[提示和技巧](https://powerline.readthedocs.org/en/latest/tipstricks.html)部分寻找所有`<Esc>`以[Powerline开头的映射更好的解决方案。](https://github.com/Lokaltog/powerline)把它放在你的某个地方：`.vimrc`

```
 " leave insert mode quickly
  if ! has('gui_running')
    set ttimeoutlen=10
    augroup FastEscape
      autocmd!
      au InsertEnter * set timeoutlen=0
      au InsertLeave * set timeoutlen=1000
    augroup END
  endif 
```

请注意，这将使得无法使用以`<Esc>`while 在插入模式下开头的映射，但无论如何都不应该有任何映射，因为这解决了问题。

* * *

我在 spf13 中找到了`.vimrc`导致问题的行：

```
" Fix home and end keybindings for screen, particularly on mac
" - for some reason this fixes the arrow keys too. huh.
map ^[F $
imap ^[F $
map ^[H g0
imap ^[H g0 
```

我之前找不到它们的原因是因为它们不是使用映射的`<Esc>`，而是使用映射的`^[`。很烦人！希望这可以帮助一些同样心怀不满的 spf13 用户:)

**更新：**

如果删除这些映射不起作用，那么它可能是来自插件的映射。

键入`:verbose map <Esc>`以获取涉及的所有映射的列表`Esc`。该`verbose`部分指示 Vim 打印设置映射的位置。这应该有助于找出导致问题的原因。

此外，该命令`unmap <Esc>`可能很有用——它会删除`Esc`键的所有映射。

请注意，`unmap`不会删除所有模式下的映射；键入`:h unmap`以获取更多信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-14T09:40:19.003

就我而言，是 tmux 注入了延迟（这对我来说完全是一个惊喜！）。

我通过添加`set -g escape-time 0`到我的`tmux.conf`.

* * *

这可能对作者没有严格的帮助，但是在使用许多不同的关键字组合搜索这个问题时，这个问题首先出现，所以我希望它对某人有所帮助。

* * *

[资料来源：来自这里](https://stackoverflow.com/a/15550847/107510)的第一条评论。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-15T19:47:26.187

我不确定您描述的映射有什么问题，在我看来应该没问题。但是，我认为可以以更好的方式实现您想要完成的目标。您的映射基本上是尝试创建一个`InsertLeave`事件，而 Vim 实际上已经内置了该事件！

尝试将这样的内容添加到您的`.vimrc`：

```
au InsertLeave * if &mod && expand('%')!=''|write|endif 
```

作为一个额外的好处，这个只有当它有一个文件名并且被实际修改时才会保存你的缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-23T14:41:06.613

```
set timeoutlen=1000 ttimeoutlen=0 
```

`timeoutlen`- 映射延迟。

`ttimeoutlen`- 关键代码延迟。

[来源](https://www.johnhawthorn.com/2012/09/vi-escape-delays/#vim)

# javascript - Rails 将 JSON 字符串转换为 Javascript 日期（）

> ID：13404603
> 
> 赞同：0
> 
> 时间：2012-11-15T19:21:03.707
> 
> 标签：javascript, ruby-on-rails-3, json, date

我正在从我的一个控制器返回一些 json，类似于以下内容：

```
render :json => {
:date => "new Date(new Date('Jan 01 2000').getTime() + #{500.seconds.to_i} * 1000)"
} 
```

我期待它返回一个设置为午夜后 500 秒（或正好是 00:08:20）的新日期。此 json 由期望日期的 JavaScript 函数传递和处理，但它似乎将其解释为字符串。我收到类似于以下内容的错误消息：

> 类型不匹配。值 new Date(new Date('Jan 01 2000').getTime() + 500 * 1000) 与日期类型不匹配

然而，在 Firebug 控制台中运行它会产生一个完全有效的日期。如何让 JavaScript 将我的 json 用作日期？

* * *

**编辑**

为了提供更多上下文，我将向 JavaScript 函数发送一系列 JSON 请求，该函数使用 Google 的 Visualization API 构建图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:23:47.563

[JSON 不是 Javascript](http://www.json.org/)，它只是一种数据序列化格式，很像 XML。

你所拥有的实际上是一串需要解释的 Javascript 代码（或者最好避免解释）。实际上，要使其成为有效 JSON 的唯一方法是使其成为字符串值。即使这样，如果不在数组或对象属性中，它也不应该正确解析。

您应该将返回该 Javascript 代码的任何内容重构为 return just `'Jan 01 2000'`，然后在 Ruby 中进行该处理。或者无论如何最好重构它；没有更多的上下文很难说。

# php - 警告：需要（文件）：无法打开流

> ID：13404606
> 
> 赞同：-1
> 
> 时间：2012-11-15T19:21:19.353
> 
> 标签：php, linux, ubuntu, lamp

我已经更换了开发机器，并且已经跨过我的一个项目。但是，当我尝试运行此项目中的文件之一时，我收到以下错误消息：

```
Warning: require(/var/www/libraries/facebook.php): failed to open stream: Permission denied in /var/www/logout.php on line 11 Fatal error: require(): Failed opening required '/var/www/libraries/facebook.php' (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/logout.php on line 11 
```

任何人都知道为什么会发生这种情况？

可能是我的权限设置不正确。文件和文件夹权限应该是什么？

当前所有文件都设置为`-rw-r--r--`，文件夹设置为`drwx------`，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:24:11.907

有时，当事情被移动时，路径可能会改变。该错误表明找不到文件“/var/www/libraries/facebook.php”。确保该文件存在于该位置。

有时，Web 服务器使用与用户不同的凭据运行。尝试将目录设置为 drwxr-x---，将文件设置为 -rw-r--r--。如果这不起作用，请尝试将目录更改为 drwxr-xr-x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:33:20.503

你说权限是drwx-----。尝试以非 root 用户身份更改到 shell 中的 /var/www/libraries 目录。如果那里出现错误，Web 服务器也会出现错误。您可能需要 755 权限，以便服务器可以遍历该目录。请注意该文件夹中的其他内容，因为全世界都可以读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:26:17.083

您收到 Permission denied 错误，这意味着您的库文件夹只能由 root 用户访问。尝试以 root 用户身份执行脚本或授予对该文件夹的读取权限。

```
## use only for files ##
chmod 0444 /var/www/*
chmod 0444 /var/www/*.php 
```

要将目录设置为只读模式，请输入：

```
## use only for dirs ##
chmod 0544 /var/www/
chmod 0444 /path/to/your/dir/ 
```

# facebook - 如何以编程方式将用户从 Facebook 注销？

> ID：13404609
> 
> 赞同：0
> 
> 时间：2012-11-15T19:21:25.417
> 
> 标签：facebook, terminal, share

我正在为公共终端做一个网站，用户可以在 facebook 上分享图片，但是一旦用户登录分享，下一个用户将直接进入第一个用户的分享。

是否可以使用新用户启动 sharer.php 或自动注销第一个用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:11:50.507

你最好的选择是`FB.logout`从 JS-SDK 中使用。当您调用它时，FB 将注销当前活动的用户。

文档在[这里](https://developers.facebook.com/docs/reference/javascript/FB.logout/)。

# android - Android ant构建更改全局变量

> ID：13404611
> 
> 赞同：0
> 
> 时间：2012-11-15T19:21:32.093
> 
> 标签：android, ant

我的 Android 项目有一个 ant 构建设置，我一直在阅读 stackoverflow 和在线的指南和教程，但似乎无法理解如何使其工作。基本上在我的代码中，我有一个变量“isDebugVersion”（它将打印出日志和其他一些东西）。当我使用 ant 构建时，我希望代码中的该变量设置为“false”。`custom_rules.xml`我环顾四周，即使文件中列出了这些示例，我也找不到`build.xml`。

所以变量在 中`com.example.application.Globals`，它被列为`isDebugVersion`。有人可以给我一个例子来说明如何使用 ant 构建脚本来操作这个变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:30:35.240

您可以将文件命名`custom_rules.xml`为项目的根文件夹。在里面定义你想要的任何属性。

请注意，您尝试实现的目标可能会更简单，使用`BuildConfig.DEBUG`. 该文件位于项目的 gen 文件夹中，靠近`R.java`. 它是在构建过程中生成的，常量`DEBUG`将`false`在调试构建和`true`发布期间设置为。

因此，如果您键入`ant release`，您将得到`false`. 用eclipse或`ant debug`，你会得到`true`。

您还可以学习如何使用 RoboGuice，它有一个[有趣的日志记录解决方案](http://code.google.com/p/roboguice/wiki/Logging)。

您可以将此常量用于所有目的，例如将 google map api 密钥从 debug 更改为 release 密钥。例如，请关注[此线程](https://stackoverflow.com/q/3029819/693752)。

# arrays - 在 cuda GPU cudamalloc 中将 3D 数组转换为 1D

> ID：13404613
> 
> 赞同：3
> 
> 时间：2012-11-15T19:21:36.287
> 
> 标签：arrays, c, multidimensional-array, cuda, gpu

我的问题是：我有一个 3D 数组，**我不能**使用 malloc3D，我需要在 GPU 上转换和操作 1D 数组。但我不知道该怎么做。在这一刻我正在使用

```
#define nx  8
#define ny  6
#define nz  4 
```

定义矩阵数组.. 4 个 6 行 8 列的矩阵，索引为 i,j,k。

```
u[i][j][k] 
```

我声明：

```
cudaMalloc( (void**)&dev_u, ny * nx * nz * sizeof(float) ) ;
cudaMemcpy( dev_u, u, ny * nx * nz * sizeof(float), cudaMemcpyHostToDevice );
dim3 dimBlock(nx,ny,nz);
dim3 dimGrid(1,1);
FTCS3D<<<dimGrid, dimBlock>>>( dev_u );
cudaMemcpy( u, dev_u, ny * nx * nz * sizeof(float), cudaMemcpyDeviceToHost ); 
```

GPU内部：

```
__global__ void FTCS3D( float *u )
{
    int i = threadIdx.y+blockDim.y*blockIdx.y;
    int j = threadIdx.x+blockDim.x*blockIdx.x;
    int k = threadIdx.z+blockDim.z*blockIdx.z;
    int offset = i * nx + j + ny * nx * z;
    int totid=nx*ny*nz;

    if (offset < totid)
    {
        if ( offset ==1 )
           u[offset]=5.0;
   }
} 
```

数字 5 出现在其他矩阵中而不是 u[0][0][1] 中，我不知道如何索引偏移量内的所有变量，记住我必须以这种一维向量的方式来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:17:36.793

如果你有一个 array3D [HEIGHT][WIDTH] [DEPTH] 那么你可以把它变成 array1D [HEIGHT * WIDTH * DEPTH]。

在内核之外，您将 3D 转换为 1D 数组

```
for (int x = 0, k=0; x < HEIGHT; x++)
  for (int y = 0; y < WIDTH; y++)
     for (int z = 0; z < DEPTH; z++)
        a1D[k++] = a3D[x][y][z] 
```

为什么在你的 cuda 中不只有一个维度？

```
__global__ void FTCS3D( float *u,int HEIGHT, int WIDTH, int DEPTH)
{   
    int x = threadIdx.x+blockDim.x*blockIdx.x;
    int totid = HEIGHT * WIDTH * DEPTH;

    if (x < totid)
    {
       if (x==1 )
          u[x]=5.0;
     }

} 
```

# php - PDO 不绑定参数

> ID：13404616
> 
> 赞同：1
> 
> 时间：2012-11-15T19:21:43.753
> 
> 标签：php, mysql, pdo, parameter-passing, parameterbinding

> **可能重复：**
> [PHP PDO bindValue in LIMIT](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)

我昨天开始使用 PDO，所以我仍然很容易混淆它。我有一个类查询：

```
class Query
{
    static function GetList($query, $binds = array())
    {
        global $DBH;
        $STH = $DBH->prepare($query);
        $STH->execute($binds);

        return $STH;
    }
} 
```

我打电话给这个：

```
$result = Query::GetList("SELECT * FROM translations_missing 
                          ORDER BY translation_missing_id LIMIT ?, ?", 
                          array(0, 10));
while($row = $result->fetch())
{
    echo 'moo'; 
} 
```

而且我没有得到任何结果！但是，如果我删除参数并调用：

```
$result = Query::GetList("SELECT * FROM translations_missing 
                          ORDER BY translation_missing_id LIMIT 0, 10"); 
```

我多次打印“moo”。我很确定我像往常一样遗漏了一些小东西，但我就是找不到这有什么问题。

如果我这样做，会让自己对此更加困惑：

```
$result = Query::GetList("SELECT * FROM translations_missing 
                          WHERE en = ?", 
                          array("Building")); 
```

我得到'moo'打印！我现在认为我以错误的方式绑定整数，但是......有人可以指出我的绑定为什么不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:40:35.797

看起来你对整数绑定的事情是正确的。

请参阅： [如何在 LIMIT 子句中应用 bindValue 方法？](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)

# knockout.js - 识别绑定

> ID：13404619
> 
> 赞同：0
> 
> 时间：2012-11-15T19:21:53.877
> 
> 标签：knockout.js, singlepage, single-page-application

我正在尝试为 John Papa 的 Code Camper 项目添加一个新视图。我被困在简单的哈希导航绑定上。我的问题是如何找到填充 {href: favorites} 的代码？它使用井号标签 #/favorites 填充，但我找不到发生这种情况的位置。有超过 30 个 JS 文件，搜索“收藏夹”会产生太多结果。我已经尝试在我发现“收藏夹”的任何地方添加我的 newview 代码，但没有运气。我得到错误：

消息：ReferenceError：未定义新视图；绑定值：attr: {href: newview}

那么，我怎样才能确定在下面的代码中填充了 {href: favorites} 的内容？我确实知道淘汰赛绑定是如何工作的，只是在项目中找不到代码。除了 John Papa 的 Code Camper 项目和这个特定的代码之外，一般来说，有没有什么工具可以知道绑定在淘汰赛 js 中的位置？

```
<li class="route-top"><a data-bind="attr: {href: favorites}">Favorites</a></li> 
```

编辑：对于这种情况，我找到了绑定。我认为它不起作用，因为网页卡在缓存中。尽管如此，如果有一种工具或方法可以识别哪些代码绑定到我想知道的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:08:30.817

您所指的部分是视图的导航链接。这些在 shell 中总是可见的，所以我将它们绑定到 vm.shell.js。shell viewmodel 具有 menuHashes 的属性，这些属性实际上是在配置文件中定义的（它们可能是数据库驱动的）。

在更广泛的范围内，您可以通过查看 binder.js 模块来判断哪些视图绑定到 CodeCamper 中的哪些视图模型。这是敲除绑定链接到 html/views 的地方。

```
 ko.applyBindings(vm.shell, getView(ids.shellTop));
            ko.applyBindings(vm.favorites, getView(ids.favorites));
            ko.applyBindings(vm.session, getView(ids.session));
            ko.applyBindings(vm.sessions, getView(ids.sessions));
            ko.applyBindings(vm.speaker, getView(ids.speaker));
            ko.applyBindings(vm.speakers, getView(ids.speakers)); 
```

# c# - Code First 中仅强制映射逻辑外键

> ID：13404625
> 
> 赞同：0
> 
> 时间：2012-11-15T19:21:59.903
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用实体框架和代码优先映射到遗留数据库（我知道如果我已经构建了数据库，那么我应该使用“数据库优先”方法，但是在某些方面，我手动填充注释比处理控制更好在设计器上），其中有一个表有一个指向另一个表的键（它实际上是另一个数据库中的表的同义词），它像外键一样工作，但它实际上并没有在表模式中定义。

问题是：我可以强制这种关系存在于我的 POCO 课程中吗？我可以使用 Fluent API 映射它吗？这可能吗？

像往常一样，提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:24:44.143

当然，您可以通过流畅的映射或数据注释手动定义外键和导航属性。

假设我有一个`Parent`表，其中包含一个字段和一个指向第二个数据库中表`CatCode`的同义词。两者在一个上下文中都有对应的类和 s。映射（派生自）可能看起来像（构造函数）：`CategoryEx``Category``DbSet``EntityTypeConfiguration`

```
public ParentMap()
{
    this.HasKey(t => t.Id);
    this.HasRequired(p => p.Category).WithMany().HasForeignKey(p => p.CatCode);
    ...
}

public CategoryMap()
{
    this.HasKey(t => t.CatCode);
    this.ToTable("CategoryEx");
    ...
} 
```

`Parent`看起来像：

```
public class Parent
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string CatCode { get; set; }
    ...
    public Category Category { get; set; }
} 
```

# javascript - 拟合 D3 图表的数据以创建图例

> ID：13404633
> 
> 赞同：1
> 
> 时间：2012-11-15T19:22:33.843
> 
> 标签：javascript, d3.js

我有一个数据变量，其中包含以下内容：

```
 [Object { score="2.8",  word="Blue"}, Object { score="2.8",  word="Red"}, Object { score="3.9",  word="Green"}] 
```

我有兴趣修改一块 D3 图[http://bl.ocks.org/3887051](http://bl.ocks.org/3887051)以显示图例，这将是我的数据集的“单词”列表。

图例脚本如下所示（来自上面的链接）：

```
var ageNames = d3.keys(data[0]).filter(function(key) { return key !== "State"; });

var legend = svg.selectAll(".legend")
  .data(ageNames.slice().reverse())
.enter().append("g")
  .attr("class", "legend")
  .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

legend.append("rect")
  .attr("x", width - 18)
  .attr("width", 18)
  .attr("height", 18)
  .style("fill", color);

legend.append("text")
  .attr("x", width - 24)
  .attr("y", 9)
  .attr("dy", ".35em")
  .style("text-anchor", "end")
  .text(function(d) { return d; }); 
```

如何修改他们的 ageNames 函数以显示我的数据中设置的“单词”？我不确定他们如何使用 d3.keys。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:09:57.010

这应该或多或少起作用，但您可能需要`reverse()`（如原始示例那样）或以其他方式重新排列 的元素`words`，以便正确地将单词映射到正确的颜色。取决于您如何实现图表。

```
var words = yourDataArray.map(function(entry) { return entry.word; });

var legend = svg.selectAll(".legend")
  .data(words)
// The rest stays the same 
```

# c# - 带有内容的容器，可以滑动

> ID：13404643
> 
> 赞同：0
> 
> 时间：2012-11-15T19:23:16.720
> 
> 标签：c#, xna, xna-4.0

我有一个想法，但我不知道如何制作它。好的，这就是交易。

我想要一个可以包含某些对象的容器（这些对象将绘制精灵/图形）。但由于屏幕尺寸不同，我希望能够缩放容器的宽度和高度。但我不希望容器中的对象超出容器，因为缩放是可见的。

因为我希望所有对象都彼此水平放置，并且我想要一个水平滑块，所以我可以在容器内从左向右滑动。

我想知道是否有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:39:49.037

正如 Niko 所说，我设法使用 ScissorRectangle 和 ScissorTestEnable 解决了这个问题。谢谢！

# normalization - 给定一组功能依赖关系，如何判断关系是否在 2nf 中？

> ID：13404652
> 
> 赞同：1
> 
> 时间：2012-11-15T19:23:39.093
> 
> 标签：normalization

我似乎无法理解这个过程，我有 F =

```
{ab} -> {cde}
{d} -> {abce}
{a} -> {e} 
```

键是：{a,b} 和 {d}。我如何证明这是否在 2nf 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:12:12.267

好吧，仅基于这些功能依赖关系，{e} 不是候选键。你可能想重新做那部分。

松散地说，对于一个关系在 2NF 中，它必须

*   处于 1NF 中，并且
*   没有部分键依赖。

部分键依赖意味着至少一个非主属性仅依赖于候选键的一部分。因此，如果您可以证明只有一个非素数属性仅依赖于 {a}，或者只有一个非素数属性仅依赖于 {b}，那么您已经证明 R{abcde} 不在 2NF 中.

既然是家庭作业，你会想在课本中找到相关的部分，并根据文本说出你的答案。（您的文本可能不使用术语*partial-key dependency*，它可能更喜欢*superkey*而不是*候选键*。）

# c - 将电路转换为 C

> ID：13404658
> 
> 赞同：1
> 
> 时间：2012-11-15T19:24:01.333
> 
> 标签：c, simulator, control-theory

有没有人知道如何将前馈运算放大器 PID 循环转换为 C 代码？我正在尝试进行这样的转换，老实说，不知道从哪里开始。我可以通过 ADC 获得所有输入值、电压、电流等，但编码前馈 PID 对我来说有点新鲜。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:40:20.347

## 电路

似乎您要使用 C 模拟的模拟电路看起来像这样

```
 Ci
                  |------| |--------------|
                  |           Rp          |
                  |----/\/\/\/\-----------|
                  |          Rd    Cd     |
           Rf     |----/\/\/\---| |-------|
Vin o----/\/\/\---|                       |
                  |    |\                 |
                  |    | \                |
                  |----|- \               | 
                       |   \              |
                       |    \-------------|---------o  Vout
                       |    /
                       |   /
                       |+ /
                   ----| /
                  |    |/
                  |
                  |
               ___|___ GND
                _____
                 ___
                  _

LEGEND:
  Vin is the input signal.
  Vout is the Output.
  Rp controls the propotional term ( P in PID) 
  Ci controls the Integral term ( I in PID)
  Rd and Cd controls the differential term ( D in PID)
  Rf is the gain control, which is common to all of the above controllers. 
```

我强烈建议您使用[此来源](http://www.mae.ncsu.edu/silverberg/piddocs.pdf)的电路进行学习。 ![: PID控制器的完整电路图](../Images/dc4569b7a5fcb3f640c88181dea11a44.png)

尽管设置起来有点乏味，但在数学上分析起来要简单得多，因为您可以直接将其与标准数学形式而不是理想形式联系起来。

最后，Vout 用于控制电机或任何需要控制的东西。Vin 是过程变量电压。

## 在C（海？）中弄湿你的脚之前

我假设您正在从某种模数转换器读取信号。如果不是，那么您将不得不将信号模拟为输入。

如果使用标准形式，我们有，

![在此处输入图像描述](../Images/bd9fa44b2cb7564970afcdbee9957586.png)

假设循环运行时间足够小（一个缓慢的过程），我们可以使用以下函数来计算输出，

```
PIDoutput = Kp * err + (Ki * int * dt) + (Kd * der /dt); 
```

在哪里

```
Kp = Proptional Constant.
Ki = Integral Constant.
Kd = Derivative Constant.
err = Expected Output - Actual Output ie. error;
int  = int from previous loop + err; ( i.e. integral error )
der  = err - err from previous loop; ( i.e. differential error)
dt = execution time of loop. 
```

最初的“der”和“int”为零。如果您在代码中使用延迟函数将循环频率调整为 1 KHz，那么您的 dt 将为 0.001 秒。

现在前馈系统的输出将是，

```
FeedForwardOutput = Kf * Vin; 
```

其中 Kf = 前馈系统的比例常数。

因此，我们带有 PID 控制器的前馈系统的总输出将是，

```
Output = FeedForwardOutput + PIDoutput; 
```

检查此[链接](http://en.wikipedia.org/wiki/PID_controller#Feed-forward)以进一步了解带有 PID 控制器的前馈系统。

## 用 C 绘图

我在 C 中找到[了这个](http://www.embeddedheaven.com/pid-control-algorithm-c-language.htm)出色的 PID 代码，虽然它没有涵盖它的所有方面，但它仍然是一个很好的代码。

```
//get value of setpoint from user
while(1){
  // reset Timer
  // write code to escape loop on receiving a keyboard interrupt.
  // read the value of Vin from ADC ( Analogue to digital converter).
  // Calculate the output using the formula discussed previously.
  // Apply the calculated outpout to DAC ( digital to analogue converter).
  // wait till the Timer reach 'dt' seconds.
} 
```

如果我们采用一个缓慢的过程，那么我们可以使用较低的频率，这样 dt >>> 单循环的代码执行时间（远大于）。在这种情况下，我们可以取消计时器并使用延迟功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:46:04.000

您正在谈论用软件替换非线性控制系统的硬件。我认为您唯一的希望是编写硬件模拟。

我对PID一无所知，但快速谷歌搜索发现了这一点：

[http://www.cds.caltech.edu/~murray/books/AM05/pdf/am06-pid_16Sep06.pdf](http://www.cds.caltech.edu/~murray/books/AM05/pdf/am06-pid_16Sep06.pdf)

它具有描述理想 PID 控制系统的方程和图表。您可以从编写实现这些方程式的代码开始。

在我考虑了你的问题之后，在我看来这可能是一个普遍的问题。我在 Google 上搜索了“离散 PID 控制器仿真”，并找到了 Simulink、Matlab 和 Python 的答案，以及更多参考书籍。

您可能想从 Python 配方开始。Python 比 C 更容易和更快，如果你使用 SciPy，你可以绘制你的结果并确保你得到你想要的数字。一旦你让它在 Python 中工作，然后在需要时移植到 C。

[http://code.activestate.com/recipes/577231-discrete-pid-controller/](http://code.activestate.com/recipes/577231-discrete-pid-controller/)

# google-app-engine - 错误 400：最大错误 blob 大小为 10240 字节

> ID：13404663
> 
> 赞同：0
> 
> 时间：2012-11-15T19:24:35.903
> 
> 标签：google-app-engine

当我尝试更新我的`Google App Engine`应用程序时，我收到以下错误：

```
11:15 AM Rolling back the update.
Error 400: --- begin server output ---
Max error blob size is 10240 bytes.  Error blob "default" is 11875 bytes.
--- end server output --- 
```

知道如何解决这个问题吗？

**笔记：**

我已经多次部署了这个应用程序。我不确定为了得到这个错误我可能做了什么改变。

**笔记2：**

我刚刚使用 --noisy 选项运行了 appcfg.py，并且在更新尝试期间看到了以下生成的行。我仍然不知道如何解决这个问题。

2012-11-15 12:04:37,477 INFO appcfg.py:1575 将 errorblob 默认（11874 字节，type=text/html）添加到批处理中。

**注 3：** 原来是 app.yaml 文件中的以下几行：

error_handlers:
- 文件: server-error.html

请参阅[http://code.google.com/p/googleappengine/issues/detail?id=3759](http://code.google.com/p/googleappengine/issues/detail?id=3759)。

我现在可以在注释掉这些行后再次更新应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:36:07.507

原来是 app.yaml 文件中的以下几行：

error_handlers:
- 文件: server-error.html

请参阅[http://code.google.com/p/googleappengine/issues/detail?id=3759](http://code.google.com/p/googleappengine/issues/detail?id=3759)。

我现在可以在注释掉这些行后再次更新应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T23:21:17.830

来自[http://cloud.google.com/appengine/docs/python/config/appconfig](http://cloud.google.com/appengine/docs/python/config/appconfig)

当发生某些错误时，App Engine 会提供一个通用错误页面。您可以将您的应用程序配置为提供自定义静态文件而不是这些通用错误页面，只要自定义错误数据小于 10 KB

问题是您的 server-error.html 文件本身的大小。

# linux - 在 shell 脚本中使用只读变量

> ID：13404665
> 
> 赞同：12
> 
> 时间：2012-11-15T19:24:45.153
> 
> 标签：linux, bash, shell, unix

尽可能使用只读变量是良好的 shell 编程实践还是有任何缺点？例如，如果我想编写一些包含多个使用不可变文件路径的脚本文件的脚本，那么声明这样的路径是否有意义：

```
readonly LOGS
export LOGS 
LOGS="/some/path" 
```

另一个问题：将单片和乏味的 shell 脚本代码拆分成单独的文件是一个好主意吗？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T22:31:15.943

听起来你可能认为这`readonly`比实际做的要多。一方面，只读状态不会导出到环境中或由子进程继承：

```
$ declare -rx LOGS=hello
$ LOGS=goodbye
bash: LOGS: readonly variable
$ bash -c 'echo "$LOGS"'
hello
$ bash -c 'LOGS=goodbye; echo "$LOGS"'
goodbye
$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T22:26:40.353

只读变量的经典用法是 with `TMOUT`。将此变量设置为非零值将在`TMOUT`几秒钟不活动（即没有键盘输入）后注销交互式终端会话。要阻止智能用户覆盖设置，请使用`readonly`：

```
readonly TMOUT=60 
```

完成此操作后，没有办法：

```
export TMOUT=0 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T19:29:16.780

一般来说，使用只读变量（任何语言）和模块化程序（任何语言）是一件好事。

只读变量可防止常见的错误来源，并有助于提高可读性和可维护性。知道你可以依赖一个变量的值，可以让你更好地推理你的程序，并在以后对这个变量做出假设——如果变量是可变的，你就无法做到这一点。

模块化提高了可维护性和可重用性。更多的模块通常意味着更细粒度的单元可以在不同的情况下重复使用，更短的代码更容易阅读，如果你的模块是独立的，那么可能会破坏修改的部分之间的交互更少。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T19:54:54.557

我不认为 bash 中的只读变量有用。我想不出我见过的任何问题都可以通过将变量设为只读来防止。这种限制违背了 bash 的动态特性。还有其他更常见的问题原因（如拼写错误或忘记将变量声明为本地变量）无论如何都无法防止。

如果您想拆分事物，请尝试仅拆分“功能”，而不仅仅是代码块。如果您知道“source ~/myscript.sh”实际上并没有做任何事情，那么重用一个小东西会更容易。

# c++ - C++ SQLite在C接口中导入整个CSV文件

> ID：13404667
> 
> 赞同：4
> 
> 时间：2012-11-15T19:24:56.890
> 
> 标签：c++, performance, sqlite, visual-c++

有没有办法通过 C 接口将整个 CSV 文件导入 SQLite？

我知道命令行导入看起来像这样，

```
 sqlite> .mode csv <table>
   sqlite> .import <filename> <table> 
```

但我需要能够在我的程序中做到这一点。

我还应该注意，我已经成功地在 C++ 中创建了一个 CSV 阅读器，它读取 CSV 文件并将其内容逐行插入到表格中。

这样就可以完成工作，但是对于包含 730k 行的 CSV，此方法需要大约 20 分钟才能加载，这太长了。（这将是正在处理的东西的平均大小）

（机器：Intel(R) Core(TM)2 Duo CPU E8500 @ 3.16GHz 3.17GHz，4.0 GB Ram，Windows 7 64 位，Visual Studios 2010）

这对我的项目来说是不可接受的，所以我需要一种更快的方法，大约需要 2-3 分钟。

有没有办法引用文件的内存位置，所以不需要导入？如果是这样，信息的访问速度很慢吗？

SQLite 可以将 CSV 文件作为二进制数据吗？这会使导入文件更快吗？

想法？

注意：我在 C 接口中使用“:memory:”选项将数据库加载到内存中以提高速度（我希望如此）。

## 编辑

在做了更多优化后，我发现[了这个](http://www.sqlite.org/faq.html#q19)。它解释了如何通过编写将插入语句分组到 1 个事务中。

```
BEGIN TRANSACTION;
INSERT into TABLE VALUES(...);
...Million more INSERT statements
INSERT into TABLE VALUES(...);
COMMIT; 
```

这创造了性能的**巨大**改进。

**有用的相关附注**

此外，如果您要从查询结果中创建表或将查询结果插入表中，请尝试使用[此](http://www.sqlite.org/lang_createtable.html)方法创建表或将[结果](http://www.sqlite.org/lang_insert.html)插入表中。

插入链接对于插入表格可能并不明显。执行此操作的查询如下所示。

```
INSERT INTO [TABLE] [QUERY] 
```

`[TABLE]`您希望`[QUERY]`正在运行的查询结果进入的表在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:39:55.377

> 我已经成功地在 C++ 中创建了一个 CSV 阅读器，它读取 CSV 文件并将其内容逐行插入到表格中......加载大约需要 20 分钟

将所有插入放入单个事务中 - 或者每个事务至少批量处理 100 或 1000 行 - 我希望你的程序运行得更快。

# vb.net - 从方法返回的局部变量的依赖注入

> ID：13404669
> 
> 赞同：0
> 
> 时间：2012-11-15T19:24:59.930
> 
> 标签：vb.net, dependency-injection, spring.net

我（有点）对 DI 很陌生，我正在尝试了解它在我维护的代码库中的使用方式/原因。我发现了一系列将数据从存储过程调用映射到域对象的类。例如：

```
Public Sub New(domainFactory As IDomainFactory)
  _domainFactory = domainFactory
End Sub

Protected Overrides Function MapFromRow(row As DataRow) As ISomeDomainObject
  Dim domainObject = _domainFactory.CreateSomeDomainObject()
  ' Populate the object
  domainObject.ID = CType(row("id"), Integer)
  domainObject.StartDate = CType(row("date"), Date)
  domainObject.Active = CType(row("enabled"), Boolean)

  Return domainObject
End Function 
```

IDomainFactory 是用 Spring.Net 注入的。它的实现只是有一系列返回各种域对象的新实例的方法。例如：

```
Public Function CreateSomeDomainObject() As ISomeDomainObject 
  Return New SomeDomainObject()
End Function 
```

上面所有的代码都让我觉得比没用还糟糕。这很难遵循并且没有任何价值。此外，据我所知，这是对 DI 的滥用，因为它并非真正用于局部变量。此外，我们不需要多个领域对象的实现，我们不进行任何单元测试，如果我们这样做了，我们仍然不会模拟领域对象。从上面的代码可以看出，对域对象的任何更改都将是 SP 更改的结果，这意味着无论如何都必须编辑 MapFromRow 方法。

就是说，我应该把这些废话撕掉，还是它正在做一些非常棒的事情而我错过了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:50:28.987

依赖注入背后的想法是使一个类（或另一段代码）独立于接口的特定实现。上面概述的类不知道哪个类实现`IDomainFactory`。具体实现通过其构造函数注入，然后由方法使用`MapFromRow`。域工厂返回一个`ISomeDomainObject`未知的实现。

这允许您补充这些接口的另一个实现，而无需更改上面显示的类。这对于单元测试非常实用。假设您有一个`IDatabase`定义方法的接口`GetCustomerByID`。很难测试使用这种方法的代码，因为它依赖于数据库中的特定客户记录。现在您可以注入一个虚拟数据库类，该类返回由不访问物理数据库的代码生成的客户。这样的虚拟类通常称为模拟对象。

请参阅Wikipedia 上的[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

# python - 获取或操作 Selenium Webdriver 中的所有 cookie

> ID：13404670
> 
> 赞同：9
> 
> 时间：2012-11-15T19:25:02.243
> 
> 标签：python, cookies, selenium, selenium-webdriver

尝试使用带有 Python（或 Java）的 Chromedriver 来处理 cookie。

我想通了

```
for cookie in browser.get_cookies():
    print(cookie['name'] + ' --> ' + cookie['value']) 
```

只给我与我的浏览器所在的活动页面相关的 cookie。

有什么方法可以使用 Selenium 或本机 Python（在 Ubuntu 上，如果我需要进入文件系统），在我的活动 selenium 会话中获取所有 cookie？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T21:14:42.613

您可以提供一个 userdir 并从那里提取 cookie。

```
co = webdriver.ChromeOptions()
co.add_argument("--user-data-dir=userdir")
browser = webdriver.Chrome(chrome_options = co) 
```

cookie 最终将位于`userdir/Default/Cookies`SQLite3 数据库中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T22:47:50.300

为什么不直接使用一些带有 cookie 检查的 http 库

```
import urllib2
import cookielib

cookieJar = cookielib.CookieJar()

opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookieJar),urllib2.HTTPHandler())
opener.get_method = lambda: 'GET'

request = urllib2.Request('http://stackoverflow.com/')
response = opener.open(request)

for cookie in cookieJar:
   print cookie 
```

# c# - 如何在 WP7 中通过省电模式关闭计划任务代理？

> ID：13404675
> 
> 赞同：1
> 
> 时间：2012-11-15T19:25:35.000
> 
> 标签：c#, windows-phone-7, scheduled-tasks

我在我的 WP7 应用程序中添加了计划任务代理来定期提醒。在 2-3 天后进行测试时，代理将关闭，即使我打开应用程序并再次启动任务，它也不会再次返回。以下是我在 ScheduledTaskAgent 中尝试过的内容：

```
protected override void OnInvoke(ScheduledTask task)
    {
        DateTime time = DateTime.Now;
        if (time.Hour > 6 && time.Hour < 23)
        {
            getContent();
            if (task.Name.Equals("PeriodicTaskDemo", StringComparison.OrdinalIgnoreCase))
            {
                ShellToast toast = new ShellToast();
                Mutex mutex = new Mutex(true, "ScheduledAgentData");
                mutex.WaitOne();
                IsolatedStorageSettings setting = IsolatedStorageSettings.ApplicationSettings;
                toast.Title = setting["ScheduledAgentData"].ToString();
                mutex.ReleaseMutex();
                toast.Content = "You are being notified!!";
                toast.Show();
            }
            NotifyComplete();
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:24:02.220

省电模式不会禁止您重新启动后台任务。您的代理被禁用的唯一原因：

*   您已在后台任务设置中手动禁用它
*   它连续两次在异常中崩溃
*   连续多次超过最大运行时间（~20s）
*   它使用了比可用内存更多的内存（WP7 上的内存上限为 6MB，WP8 上的内存上限为 11MB）
*   在调度任务时，您还设置了它应该运行多长时间的属性，在此之后它不会再次启动。在 WP7 上，后台任务会在 14 天后自动停止运行。

# javascript - 行选择 KoGrid

> ID：13404678
> 
> 赞同：2
> 
> 时间：2012-11-15T19:25:42.367
> 
> 标签：javascript, knockout.js, kogrid

我正在与 Ko Grid 合作，我正在将一组 observable 绑定到 Grid。现在，我没有看到太多关于选择机制的文档。当用户选择特定行时，我想对网格中的选定行进行操作。

有人对这个主题有任何好的例子或参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:10:13.890

以下是所有配置的列表`koGrid`：[https ://github.com/ericmbarnard/KoGrid/wiki/Configuration](https://github.com/ericmbarnard/KoGrid/wiki/Configuration)

您应该添加一些以下属性，具体取决于所需的行为：`isMultiSelect`, `selectedItem`, `selectedItem`.

这是文档中的一个示例：

```
<div data-bind="koGrid: { data: myObsArray,
                           isMultiSelect: false,
                           selectedItem: mySelectedObj,
                           columnDefs: [ { field: 'firstName', displayName: 'First Name' }]"></div> 
```

# xml - 组合子元素的 XSLT 多文档输出

> ID：13404680
> 
> 赞同：2
> 
> 时间：2012-11-15T19:25:43.480
> 
> 标签：xml, xslt, split, messages, composition

我有一个包含需要复制的消息和正文的命令。像这样：

```
<message>
 <body>
  <command name="1"/>
  <command name="2"/>
 </body>
</message> 
```

我想要的是：

```
 <message>
 <body>
  <command name="1"/>
 </body>
</message>

<message>
 <body>
   <command name="2"/>
 </body>
</message> 
```

我正在使用以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:template match="/">
    <xsl:variable name="items" select="/message/body/*"/>
    <xsl:for-each select="$items">
        <xsl:result-document href="section{position()}.xml">
            <xsl:copy-of select="../../.[position()]"/>
        </xsl:result-document>
    </xsl:for-each>
</xsl:template> 
```

一些澄清：名称属性不是位置属性，因此它可以变化。命令名称未知，可能会有所不同。命令本身就是节点，可以包含元素。

基于 Dabbler 的代码，我能够生成成功解析以下内容的代码：

```
<message>
<body>
 <commandA num="1"/>
 <commandB num="5"/>
 <commandC num="25">
    <subCommandT />
 </commandC>
</body>
</message> 
```

进入

```
<message>
 <body>
  <commandA num="1"/>
 </body> 
</message>

<message>
 <body>
  <commandB num="5"/>
 </body>
</message>

<message>
<body>
<commandC num="25">
      <subCommandT />
 </commandC>
</body>
</message> 
```

这是代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" >
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:template match="/">
    <xsl:for-each select="/message/body/*">
        <xsl:apply-templates select="/*">
            <xsl:with-param name="CmdId" select="generate-id(.)" tunnel="yes"/>
            <xsl:with-param name="CmdPosition" select="position()" tunnel="yes"/>
        </xsl:apply-templates>
    </xsl:for-each>
</xsl:template>
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="message">
    <xsl:param name="CmdId" as="xs:string" tunnel="yes"/>
    <xsl:param name="CmdPosition" as="xs:integer" tunnel="yes"/>
    <xsl:result-document href="section{$CmdPosition}.xml">
        <xsl:copy>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:result-document>
</xsl:template>
<xsl:template match="body/*">
    <xsl:param name="CmdId" as="xs:string" tunnel="yes"/>
    <xsl:if test="generate-id(.) = $CmdId">
        <xsl:copy-of select="."/>
    </xsl:if>
</xsl:template> 
```

谢谢你玩弄者！

这是原始命令的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<tst:Message xmlns:tst="http://www.someschema.com/v1.4" xmlns:pc="http://www.someotherschema.com/v1.5">
<tst:Body tst:hostId="1" tst:machineId="77.D2" tst:dateTimeSent="2012-07-11T15:30:46">
    <tst:commandOption tst:deviceId="1" tst:dateTime="2012-07-11T15:30:46" tst:commandId="1" tst:sessionType="response" tst:sessionId="28" >
        <tst:commandOptionAck tst:transactionId="12" tst:configurationId="3148"/>
    </tst:commandOption>
    <tst:commandOption tst:deviceId="1" tst:dateTime="2012-07-11T15:30:48" tst:commandId="2" tst:sessionType="response" tst:sessionId="29" >
        <tst:commandOptionAck tst:transactionId="13" tst:configurationId="3149"/>
    </tst:commandOption>
    <tst:commandOption tst:deviceId="1" tst:dateTime="2012-07-11T15:30:50" tst:commandId="3" tst:sessionType="response" tst:sessionId="30" >
        <tst:commandOptionAck tst:transactionId="14" />
    </tst:commandOption>
    <pc:pContext pc:deviceId="1" pc:dateTime="2012-07-11T15:24:17" pc:commandId="4" pc:sessionId="47146">
        <pc:Exit pc:transactionId="3116380"/>
    </pc:pContext>
</tst:Body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:46:27.123

**就这么简单（一个模板，只有几行代码）：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pDest" select="'file:///c:/temp/delete/'"/>

 <xsl:template match="*[starts-with(name(), 'command')]">
    <xsl:result-document href="{$pDest}section{position()}.xml">
        <message>
            <body>
             <xsl:copy-of select="."/>
            </body>
        </message>
    </xsl:result-document>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<message>
    <body>
        <commandA num="1"/>
        <commandB num="5"/>
        <commandC num="25">
            <subCommandT />
        </commandC>
    </body>
</message> 
```

**创建了三个 XML 文件**：

C:\temp\delete\section1.xml：

```
<message>
   <body>
      <commandA num="1"/>
   </body>
</message> 
```

C:\temp\delete\section2.xml：

```
<message>
   <body>
      <commandB num="5"/>
   </body>
</message> 
```

C:\temp\delete\section3.xml

```
<message>
   <body>
      <commandC num="25">
         <subCommandT/>
      </commandC>
   </body>
</message> 
```

* * *

**更新**：

OP 现在提供了他的“真实”源 XML 文档：

```
<tst:Message xmlns:tst="http://www.someschema.com/v1.4"
 xmlns:pc="http://www.someotherschema.com/v1.5">
<tst:Body tst:hostId="1" tst:machineId="77.D2"
          tst:dateTimeSent="2012-07-11T15:30:46">
    <tst:commandOption tst:deviceId="1"
                       tst:dateTime="2012-07-11T15:30:46"
                       tst:commandId="1"
                       tst:sessionType="response"
                       tst:sessionId="28" >
        <tst:commandOptionAck tst:transactionId="12"
                              tst:configurationId="3148"/>
    </tst:commandOption>
    <tst:commandOption tst:deviceId="1"
                       tst:dateTime="2012-07-11T15:30:48"
                       tst:commandId="2"
                       tst:sessionType="response"
                       tst:sessionId="29" >
        <tst:commandOptionAck tst:transactionId="13"
                              tst:configurationId="3149"/>
    </tst:commandOption>
    <tst:commandOption tst:deviceId="1"
                       tst:dateTime="2012-07-11T15:30:50"
                       tst:commandId="3"
                       tst:sessionType="response"
                       tst:sessionId="30" >
        <tst:commandOptionAck tst:transactionId="14" />
    </tst:commandOption>
    <pc:pContext pc:deviceId="1" pc:dateTime="2012-07-11T15:24:17"
                pc:commandId="4" pc:sessionId="47146">
        <pc:Exit pc:transactionId="3116380"/>
    </pc:pContext>
</tst:Body>
</tst:Message> 
```

**我们使用与上面基本相同的转换，仅更改用于名称开头的字符串**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pDest" select="'file:///c:/temp/delete/'"/>

 <xsl:template match="*[starts-with(name(), 'tst:commandOption')]">
    <xsl:result-document href="{$pDest}section{position()}.xml">
        <message>
            <body>
             <xsl:copy-of select="."/>
            </body>
        </message>
    </xsl:result-document>
 </xsl:template>
</xsl:stylesheet> 
```

**结果是创建了这三个文件**：

C:\temp\delete\section1.xml

```
<message>
   <body>
      <tst:commandOption xmlns:tst="http://www.someschema.com/v1.4"
                         xmlns:pc="http://www.someotherschema.com/v1.5"
                         tst:deviceId="1"
                         tst:dateTime="2012-07-11T15:30:46"
                         tst:commandId="1"
                         tst:sessionType="response"
                         tst:sessionId="28">
         <tst:commandOptionAck tst:transactionId="12" tst:configurationId="3148"/>
      </tst:commandOption>
   </body>
</message> 
```

C:\temp\delete\section2.xml

```
<message>
   <body>
      <tst:commandOption xmlns:tst="http://www.someschema.com/v1.4"
                         xmlns:pc="http://www.someotherschema.com/v1.5"
                         tst:deviceId="1"
                         tst:dateTime="2012-07-11T15:30:48"
                         tst:commandId="2"
                         tst:sessionType="response"
                         tst:sessionId="29">
         <tst:commandOptionAck tst:transactionId="13" tst:configurationId="3149"/>
      </tst:commandOption>
   </body>
</message> 
```

C:\temp\delete\section3.xml

```
<message>
   <body>
      <tst:commandOption xmlns:tst="http://www.someschema.com/v1.4"
                         xmlns:pc="http://www.someotherschema.com/v1.5"
                         tst:deviceId="1"
                         tst:dateTime="2012-07-11T15:30:50"
                         tst:commandId="3"
                         tst:sessionType="response"
                         tst:sessionId="30">
         <tst:commandOptionAck tst:transactionId="14"/>
      </tst:commandOption>
   </body>
</message> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:38:44.270

可能有更好的方法，但这有效：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

   <xsl:template match="/">
      <xsl:for-each select="/message/body/*">
         <xsl:apply-templates select="/*">
            <xsl:with-param name="CmdNum" select="position()" tunnel="yes"/>
         </xsl:apply-templates>
      </xsl:for-each>
   </xsl:template>

   <xsl:template match="*|@*">
      <xsl:copy>
         <xsl:apply-templates/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="message">
      <xsl:param name="CmdNum" as="xs:integer" tunnel="yes"/>

      <xsl:result-document href="section{$CmdNum}.xml">
         <xsl:copy>
            <xsl:apply-templates/>
         </xsl:copy>
      </xsl:result-document>
   </xsl:template>

   <xsl:template match="command">
      <xsl:param name="CmdNum" as="xs:integer" tunnel="yes"/>

      <xsl:if test="@name = $CmdNum">
         <xsl:copy-of select="."/>
      </xsl:if>
   </xsl:template>
</xsl:stylesheet> 
```

您所拥有的代码的问题是过滤器应用于`message`元素而不是`command`元素。

# php - mysql_fetch_array() 布尔错误 - ORDER BY

> ID：13404682
> 
> 赞同：-1
> 
> 时间：2012-11-15T19:25:53.820
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我正在尝试从我的 mybb 数据库中获取帖子，然后将其显示在主页上。我希望首先按最新线程对其进行排序，但是当我尝试它时它会失败并显示以下消息：

> 警告：mysql_fetch_array() 期望参数 1 是资源，在 /home/interitu/public_html/index.php 中给出布尔值

使用的代码：

```
 <?php
$con = mysql_connect("","","");
// I HAVE REMOVED THE CONNECTION DETAILS FOR DATABASE SECURITY
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("interitu_forums", $con);

$result = mysql_query("SELECT * FROM mybb_posts ORDER BY tid ASC WHERE fid='4' LIMIT 
5");

while($row = mysql_fetch_array($result))
{ 
```

代码继续处理不相关的内容（HTML 内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:26:49.053

```
SELECT * 
FROM mybb_posts
WHERE fid='4'
ORDER BY tid ASC  
LIMIT 5 
```

`where`子句必须在子句之前`order by`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:47:29.053

执行sql的顺序：select、from、where、Group by、have、order by、limit。select * from FROM mybb_posts WHERE fid='4' ORDER BY tid ASC LIMIT 5 </p>

# bash - 简化 bash 脚本？

> ID：13404686
> 
> 赞同：4
> 
> 时间：2012-11-15T19:26:02.893
> 
> 标签：bash

必须有一种方法可以在下面我粗略构建的脚本中简化这 3 条查找线...

```
#!/usr/bin/bash
#
#
if [ "find /data -type f -perm 400 -print" ] ; then
    find /data -type f -perm 400 -exec echo Modifying {} \;
    find /data -type f -perm 400 -print | xargs chmod 755
else
    echo 'No files to modify'
fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:31:49.237

您可以将其更改为以下内容：

```
found=$(find /data -type f -perm 400 -print -quit)

if [ "$found" ]; then
    find /data -type f -perm 400 -exec echo Modifying {} \; -exec chmod 755 {} \; 
else
    echo 'No files to modify`
fi 
```

**解释：**

*   `find /data -type f -perm 400 -print -quit`：一旦找到第**一个**`400`具有in权限`/data`的文件，它就会打印文件名并立即终止查找。打印被保存到变量中`found`（所以我们知道是否稍后输出“No files to modify”）。
*   `-exec echo Modifying {} \; -exec chmod 755 {} \;`：您可以通过此链接语法对 find 返回的每个结果执行多个命令
*   注意：当什么都没找到时显然会`find`返回`0`，所以 using`$?`在这里不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T19:39:46.383

```
while read -d $'\0' file; do
    found=yes
    echo "Modifying $file"
    chmod 755 "$file"
done < <(find /data -type f -perm 400 -print0)
if [ "x$found" != "xyes" ]; then
    echo "No files found to modify"
fi 
```

这使用了[Bash 中的进程替换功能](http://tldp.org/LDP/abs/html/process-sub.html)。相当于

```
find ... | while read ... 
```

除了在这种情况下，`while read`在子shell中执行，所以我们不能设置将在外壳中看到的变量。相反，我们可以使用进程替换。`<(cmd)`在子 shell 中运行`cmd`，其标准输出重定向到命名管道。该管道的名称被替换到外部命令中。

然后我们使用`<`从这个管道重定向到`while read`命令的标准输入，它依次读取每个分隔记录，并将值存储在指定的名称中（`file`在本例中）。默认情况下，`read`换行符换行。对于大多数文件来说，这很好；你可以这样做：

```
while read file; do
    ...
done < <(find /data -type f -perm 400) 
```

它会正常工作。但是从技术上讲，文件名中可以​​有换行符，在这种情况下会中断。`-print0`find的参数和 的`-d $'\0'`参数`read`导致它们每个都使用空字符作为分隔符，这在文件名中无效。

# wordpress - Wordpress 管理员 - 如何将 #wpcontent 设置为 100% 高度（以匹配 adminmenuwrap）

> ID：13404688
> 
> 赞同：1
> 
> 时间：2012-11-15T19:26:06.503
> 
> 标签：wordpress, admin

我今天严重失去它。任何人都知道我如何将#wpcontent 设置为 100% 高度，就像 adminmenuwrap 一样？创建插件并希望背景为 100% 高度。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:39:20.363

当您将其设置为 100% 时，它的行为如何？当您将其设置为像素高度时，是否会发生任何事情？这会让我们知道 CSS 是否正常工作。然后我们可以查看它所在的 div。您也尝试过使用 !important; ?

# python - Django 用户授权

> ID：13404689
> 
> 赞同：2
> 
> 时间：2012-11-15T19:26:08.750
> 
> 标签：python, django, authorization

我有兴趣使用 Python 和 Django 实现一个 Web 应用程序，并且我正在研究功能以确保它在我分配的时间范围内是可行的。但是，我很难找到关于我需要的一个核心功能的任何文档/示例/等。具体来说：

如果我有一个用户层次结构，例如：经理员工

与规则：

*   一名员工向一名经理汇报
*   经理可能是顶级经理或向另一位经理汇报

和：

*   员工可以查看/更新他/他个人创建的任何记录。
*   经理可以查看/更新她/他或向他/她报告的任何人创建的任何记录。

因此，例如：

Bob 是一位顶级经理。Sally 和 Eric 向 Bob 报告。亨利向莎莉汇报。贝蒂向亨利报告。

如果 Betty 创建了一条记录，则 Betty、Henry、Sally 和 Bob（但不是 Eric）应该可以访问它。但是，如果 Sally 创建了一条记录，它应该只能由 Sally 和 Bob 访问。

首先，如果不创建完全自定义的授权模块，只使用 Django 或现有的 Django 扩展，这是否可能？

其次，如果可能的话，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:42:52.490

我认为你不需要任何特殊的模块来做到这一点。使用 Django 的好处与其对象映射实体更相关，这使得管理数据库实体及其关系更加容易。因此，对于您的情况，您可以开始定义数据模型。

也就是说，有一些常见的模块，如**[django 规则](https://github.com/maraujop/django-rules)**，它们实现了您需要的一些功能并可以加速您的开发。

# c# - 在工具条的文本框中设置焦点

> ID：13404690
> 
> 赞同：-1
> 
> 时间：2012-11-15T19:26:14.797
> 
> 标签：c#, winforms

我在表单上放了一个工具条，向其中添加了一些控件，例如按钮、标签和文本框……现在我希望文本输入焦点在该工具条的文本框中的 abd 内闪烁，

我在 form_load 事件中尝试了这两个命令，但没有奏效：

```
toolStripTextBox1.Focus();
// or
toolStripTextBox1.Select(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:29:25.887

尝试以下

```
Me.ActiveControl = toolStripTextBox1.Control 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T19:29:45.433

您是否尝试过执行以下操作

```
Me.ActiveControl = toolStripTextBox1.Control 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T19:34:09.497

为您的表单`Shown`事件添加事件处理程序，您可以尝试使用以下代码：

```
static bool first = true;
private void Form1_Shown(object sender, EventArgs e)
{
       if (first)
       {
            toolStripTextBox1.Focus();
            first = false;
       }
} 
```

# c++ - 如何在 VS 2010 Ultimate 中编写和显示 C++ 参数信息？

> ID：13404692
> 
> 赞同：2
> 
> 时间：2012-11-15T19:26:25.663
> 
> 标签：c++, visual-studio-2010, parameters, comments, intellisense

我一直在关注 C++ 教程，为了方便起见，我想评论一些参数和方法，以便在我将鼠标悬停在它们上时显示它们的相关评论（我相信使用 Intellisense）。我知道如何在 C# 中做到这一点，但无法在 C++ 中弄清楚。

在 Visual C# 2010 express 中，我可以执行以下操作：

键入“///”，自动创建摘要和参数标记。填写我可以创建的评论：

```
/// <summary>
/// Constructor.
/// </summary>
/// <param name="value_Initial">Initial value.</param>
public DataObject_Float(float value_Initial){
...
} 
```

这样将鼠标悬停在它们上就会显示它们的参数和方法信息。我能得到的最接近的是：

```
// Constructor.
// value_Initial = Initial value 
```

这并不理想。

我如何在 C++ 中的 VS Ultimate 2010 中执行/模拟此行为，即使我必须手动输入标签、变量名等。我一直无法弄清楚/找到它的语法。编译器不使用 CLR，这显然不受 Intellisense 支持。我还安装了 Visual Assist X 的试用版，如果它可以用来帮助解决这个问题。另外，方法和参数的注释应该放在头文件还是.cpp文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:06:47.453

The syntax for VC++ doc comments is reasonably documented in two places. One is the recommended [tags](http://msdn.microsoft.com/en-us/library/ms177227%28v=vs.100%29.aspx) and the other is the [delimiters](http://msdn.microsoft.com/en-us/library/ms177246%28v=vs.100%29.aspx).

The doc comments will not show up in hover text, but they will show up in when the auto-complete list is up (i.e. that will show the symbol declaration, any doc comments, and the symbol the file is declared in.

I believe you want to put the doc comments in the header as it seems to be picked for the current translation unit only (i.e. meaning if it's the .cpp you'll only see it when you are in that single .cpp file).

# c++ - c ++如何初始化部分模板特化的静态变量

> ID：13404695
> 
> 赞同：7
> 
> 时间：2012-11-15T19:26:30.263
> 
> 标签：c++, templates, template-specialization

我应该如何为部分专业化初始化静态变量？

```
template <bool A=true, bool B=false>
struct from {
    const static std::string value; 
};

// no specialization - works
template <bool A, bool B>
const std::string from<A, B>::value = "";

// partial specialization - does not compile -  
// Error: template argument list following class template name must list parameters in the order used in template parameter list
// Error: from<A,B>' : too few template arguments
template <bool B>
const std::string from<true, B>::value = "";

// full specialization - works
const std::string from<false, true>::value = ""; 
```

为什么部分不起作用？

编辑：我找到了一个基于[部分模板专业化的解决方案，用于初始化模板类的静态数据成员](https://stackoverflow.com/questions/7670374/partial-template-specialization-for-initialization-of-static-data-members-of-tem)

在允许我初始化静态变量之前，我需要重复部分专业化的声明：

```
template <bool B>
struct from<true, B> {
    const static std::string value; 
}; 
```

再次，问题是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:39:02.683

如果没有封闭类模板本身的部分特化，则不允许成员的部分特化（无论它们是函数还是静态数据）。

也就是说，您还必须专门化类模板。所以以下应该工作：

```
//partial specialization of class template
template <bool B>
struct from<true, B> {
    const static std::string value; 
};

//now you can do this!    
template <bool B>
const std::string from<true, B>::value = "" 
```

此外，这不会编译（你试过编译这个吗？）：

```
// full specialization - works (SORRY, IT WILL NOT WORK!)
const std::string from<false, true>::value = "";  //this should be an error 
```

你必须这样写：

```
// full specialization 
template<>   //<---- this is important!
const std::string from<false, true>::value = "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:48:42.737

这是模板的完整专业化。

```
#include <string>
#include <iostream> 

template <bool A=true, bool B=false>
struct from {
  const static std::string value; 
};

// no specialization - works
template <bool A, bool B>
const std::string from<A, B>::value = "no specialization";

// full specialization, note the empty template parameter list
template <>
const std::string from<true, true>::value = "<true,true> specialization";

int main() {
   std::cout << from<false, false>::value << std::endl;
   std::cout << from<true, true>::value << std::endl;
} 
```

您找到了定义部分的正确方法。

您的部分不起作用的原因是您需要先声明结构类型，然后才能为其静态字段提供初始化。部分特化本身就是一个模板，值得定义。

完全特化实际上是初始模板的类型实例，因此不需要单独定义。

# python - python读取csv文件逗号问题

> ID：13404704
> 
> 赞同：1
> 
> 时间：2012-11-15T19:27:12.203
> 
> 标签：python

我在尝试解析表中的一些数据时遇到了一个小问题。我的程序读取表格的一行，然后将其作为字符串放入列表中（Python 默认使用`reader.next()`函数执行此操作）。一切都很好，直到没有任何逗号分隔同一表空间上的某些文本。在这种情况下，程序认为逗号是一个分隔符并生成 2 个列表索引而不是 1 个，这使得事情`list[0].split(';')`变得不可能。

我不擅长口头解释，所以让我举例说明：

```
csv_file = | House floors | Wooden, metal and golden | 2000 |   # Illustration of an excel table

reader = csv.reader(open('csv_file.csv', 'r'))
row = reader.next()  # row: ['House floors;Wooden', 'metal and golden; 2000']
columns = row.split(';')  # columns: ['House floors, Wooden', 'metal and golden', '2000']

# But obviously what i want is this:
# columns : ['House floors', 'Wooden, metal and golden', '2000'] 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T19:29:49.867

设置分隔符[http://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

```
csv.reader(fh, delimiter='|') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:28:37.753

您需要设置正确的分隔符，在您的情况下将是`|`或`;`（从 OP 的示例中不清楚）例如

```
csv.reader(csvfile, delimiter=';') 
```

假设您拥有`"House floors;Wooden, metal and golden;2000"`可以使用 csv 模块轻松解析的数据

```
import csv
import StringIO
data = "House floors;Wooden, metal and golden;2000"

csvfile = StringIO.StringIO(data)

for row in csv.reader(csvfile, delimiter=';'):
    print row 
```

输出：

```
['House floors', 'Wooden, metal and golden', '2000'] 
```

# php - 如果 in_array 没有按预期工作？

> ID：13404705
> 
> 赞同：0
> 
> 时间：2012-11-15T19:27:12.580
> 
> 标签：php

'Permissions' 是一个逗号分隔的整数列表，例如：1,10,70,1000 权限字符串被塞入 $_SESSION，然后在爆炸后返回为 $type

```
$permissions = $_SESSION['user']['permissions'];
$type = explode(",", trim($permissions));

if(in_array(1337, $type)){
echo '<li><a href="protectedpage.php">Page Name</a></li>';} 
```

出于某种原因，没有任何回应。我回应了 $_SESSION['user']['permissions'] 并得到了 1337

我已经完成了 print_r($type) 并得到了 Array ( [0] => 1337 )

那么为什么 in_array 不返回 true 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:33:36.623

我执行了以下代码，它运行良好。

```
$permissions = '1,10,70,1000,1337';
$type = explode(",", trim($permissions));

if(in_array(1337, $type))
{
    echo 'found';
} 
```

我建议您检查以确保 $permissions 在失败的情况下是您所期望的。如果条件不起作用，请尝试回显它，以便您检查。您可能还想删除任何空格，以防万一弄脏了。

```
$permissions = $_SESSION['user']['permissions'];
$type = explode(",", str_replace(' ', '', $permissions));

if(in_array(1337, $type))
{
    echo 'found';
}
else
{
    echo $permissions;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:31:08.687

尝试放入`1337`引号，`'1337'`. 我相信这会解决你的问题。

# ruby-on-rails - 更新复杂的链接表

> ID：13404710
> 
> 赞同：0
> 
> 时间：2012-11-15T19:27:48.577
> 
> 标签：ruby-on-rails, ruby, forms

如何解决以下问题：

我想在表*submit_pictures*中添加一个新行，链接如下：

```
game.rb
    has_many :rounds
    has_many :participants, :dependent => :destroy
    has_many :submitted_pictures, :through => :rounds
    has_many :users, :through => :participants
    accepts_nested_attributes_for :participants
    accepts_nested_attributes_for :rounds, :reject_if => :all_blank

round.rb
    belongs_to :game
    has_many :submitted_pictures, :dependent => :destroy
    accepts_nested_attributes_for :submitted_pictures

submitted_picture.rb
    has_one :round
    has_one :game, :through => :rounds
    belongs_to :user 
```

所以我可以打电话：

```
<% @user.games.rounds.last.submitted_pictures.each do |blabla| %><% end> 
```

我使用以下方法制作了一个复杂的表格：

```
<%= form_for(@game) do |f| %>
    <%= f.fields_for :round do |ff| %>
        <%= ff.fields_for :submitted_pictures do |fff| %>
            <%= fff.label :flickr_id %>
            <%= fff.text_field :flickr_id %>
        <% end %>
    <% end %>
    <%= f.submit "Submit Picture", class: "btn btn-primary" %>
<% end %> 
```

希望添加一个带有 flickr_id 的新 submit_picture（它现在拥有一个 httplink），链接到当前游戏（@game）。

我一直在尝试几件事来更新它，但它似乎没有让步：（我现在看到的*update_attributes*完全错误：p）

```
def update
    @game = Game.find(params[:id])
    if @game.rounds.last.submitted_pictures.update_attributes(params[:id])
        flash[:success] = "Pic Submitted!"
    else
        render :action => 'new'
    end
end 
```

还

```
def update
    @game = Game.find(params[:id])
    if @game.save
        flash[:success] = "Pic Submitted!"
        redirect_to games_path
    else
        render :action => 'new'
    end 
```

结尾

我无法让它工作。我遇到了各种各样的错误，所以我认为最好寻求最佳解决方案，而不是在这里全部记录下来。

所以简而言之，我想在游戏的最新一轮（最近创建的_at）中添加一个提交的图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:50:26.910

我认为将所有内容嵌套在游戏形式中会使事情变得不必要地复杂。如果我理解正确，您想创建一个新的 submit_picture 并且需要选择一个游戏。该回合不是直接选择的，而是游戏的最新回合。（这听起来像是一个可疑的假设——但它确实让事情变得更简单，所以我会继续使用它）

所以只需制作一个新的提交图片表单，并添加一个游戏选择。

在您的处理程序中，从游戏中提取最新一轮并将该轮合并到您的参数中以保存新图片。

这样做是你想要的吗？

# r - 为什么（我的）R 以不同的格式显示不同的列？

> ID：13404711
> 
> 赞同：2
> 
> 时间：2012-11-15T19:27:52.147
> 
> 标签：r, number-formatting

这是一个 MWE，我正在计算（在这种情况下）181 个球在随机选择的 997 个不同的桶中的分布。

```
> hthord
function(tprs=100,lower=0,upper=5,limits=0.95,ords=997){
    p = dbinom(seq(lower,upper,),size=tprs,prob=1/ords)
    ll = qnorm(0.5*(1+limits))
    pe = ords*p
    pl = pe - ll*sqrt(ords*p*(1-p))
    pu = pe + ll*sqrt(ords*p*(1-p))
    cbind(seq(lower,upper),pl,pe,pu,deparse.level=0)
}

> hthord(181)
     [,1]         [,2]         [,3]        [,4]
[1,]    0 808.37129927 8.314033e+02 854.4353567
[2,]    1 128.89727212 1.510884e+02 173.2794395
[3,]    2   6.46037329 1.365256e+01  20.8447512
[4,]    3  -0.95391946 8.178744e-01   2.5896682
[5,]    4  -0.33811535 3.654158e-02   0.4111985
[6,]    5  -0.06933517 1.298767e-03   0.0719327
> 
```

谁能解释为什么列 [,3] 仅以指数表示法显示？

我突然想到 pl 和 pu 被强制转换为与 pe 不同的类，但细节让我无法理解。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:22:06.607

您正在运行一个返回矩阵的函数。为了显示一个矩阵，`print.default()`被调用。它试图找到一种好的（简洁的）方式来表示每列中的值，同时考虑到 R 的**全局选项**。

如果您键入`options()`or `?options`，您将看到全局选项包括多个显示和打印设置。一种是**digits**，它控制打印数值时要打印的有效位数。另一个是**scipen**，是“科学（符号）惩罚”的缩写，它的`help(options)`解释是：

```
scipen:  integer. A penalty to be applied when deciding to print numeric values 
         in fixed or exponential notation. Positive values bias towards fixed 
         and negative towards scientific notation: fixed notation will be 
         preferred unless it is more than scipen digits wider." 
```

在您的情况下，第 3 列的值比其他列更小，事实证明用科学计数法写值更简洁。`print.deault()`将在显示矢量或列的方式上保持一致，因此整个 col 都会发生变化。

正如 pedrosaurio 所说，您可以将 scipen 设置为非常高的值，并确保您永远不会看到科学记数法。

您可以尝试动手学习的设置：

```
> op <- options() # store current settings

> options("digits","scipen")
$digits
[1] 7

$scipen
[1] 0

> print(pi); print(1e5)
[1] 3.141593
[1] 1e+05
> print(c(pi, 1e5)) # uses consistent format for whole vector
[1] 3.141593e+00 1.000000e+05

> options(digits = 15)
> print(pi)
[1] 3.14159265358979
> options(digits = 5)
> print(pi)
[1] 3.1416

> print(pi/100000); print(1e5)
[1] 3.1416e-05
[1] 1e+05
> options(scipen=3) #set scientific notation penalty
> print(pi/100000); print(1e5)
[1] 0.000031416
[1] 100000

> options(op)     # reset (all) initial options 
```

另请参阅：[stackoverflow.com/questions/9397664/](https://stackoverflow.com/questions/9397664/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:31:43.247

更改选项`scipen`，使其格式相同。计算无关紧要，因为它只是一种格式。

```
options(scipen=9999) 
```

运行这个命令，它应该看起来都一样。

为什么是第 3 列？我不知道，除非您将其导出到另一个不识别科学记数法的程序，否则这无关紧要。

# c - Msys 编译 C 代码

> ID：13404714
> 
> 赞同：2
> 
> 时间：2012-11-15T19:28:07.727
> 
> 标签：c, mingw, msys

我对编译 C 代码不是很熟悉，尤其是在使用 MinGW/Msys 的 Windows 上。这是我的问题。我正在尝试为 Windows 编译开源 M3u8-segmenter C 代码。开源示例都处理 linux，但我已经成功地在我的 Mac OSX 机器上编译了代码，没有问题。

在 Windows 上的 Msys 中，这`./configure`是成功的，但是一旦我做了 Make，我就会收到以下错误。它似乎与 signal.h 包括有关，但我不确定。任何见解将不胜感激。

```
make[1]: Entering directory `/home/install/m3u8-segmenter-master/tests'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/home/install/m3u8-segmenter-master/tests'
make[1]: Entering directory `/home/install/m3u8-segmenter-master'
gcc -DPACKAGE_NAME=\"m3u8-segmenter\" -DPACKAGE_TARNAME=\"m3u8-segmenter\" -DPAC
KAGE_VERSION=\"0.3\" -DPACKAGE_STRING=\"m3u8-segmenter\ 0.3\" -DPACKAGE_BUGREPOR
T=\"http://github.com/johnf/m3u8-segmenter/issues\" -DPACKAGE_URL=\"http://m3u8-
segmenter.inodes.org\" -DPACKAGE=\"m3u8-segmenter\" -DVERSION=\"0.3\" -DSTDC_HEA
DERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_
H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -
DHAVE_UNISTD_H=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SIGNAL_H=1 -DHAVE_GETOPT_H=1 -DHAVE
_STDLIB_H=1 -DHAVE_MALLOC=1 -DHAVE_MEMMOVE=1 -DHAVE_MEMSET=1 -DHAVE_STRRCHR=1 -D
HAVE_STRTOL=1 -I.    -Ic:/msys/1.0/local/include   -g -O2 -Wall -Wextra -Wdeclar
ation-after-statement -Wpointer-arith -funsigned-char -Werror -Wall -Wstrict-pro
totypes -Wmissing-prototypes -Waggregate-return -Wcast-align -Wcast-qual -Wneste
d-externs -Wshadow -Wbad-function-cast -Wwrite-strings  -MT m3u8_segmenter-m3u8-
segmenter.o -MD -MP -MF .deps/m3u8_segmenter-m3u8-segmenter.Tpo -c -o m3u8_segme
nter-m3u8-segmenter.o `test -f 'm3u8-segmenter.c' || echo './'`m3u8-segmenter.c
m3u8-segmenter.c: In function 'main':
m3u8-segmenter.c:212:22: error: storage size of 'act' isn't known
m3u8-segmenter.c:413:5: error: implicit declaration of function 'sigaction' [-We
rror=implicit-function-declaration]
m3u8-segmenter.c:413:5: error: nested extern declaration of 'sigaction' [-Werror
=nested-externs]
m3u8-segmenter.c:212:22: error: unused variable 'act' [-Werror=unused-variable]
cc1.exe: all warnings being treated as errors

make[1]: *** [m3u8_segmenter-m3u8-segmenter.o] Error 1
make[1]: Leaving directory `/home/install/m3u8-segmenter-master'
make: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:36:56.180

如本文所述，要在 Windows 上模拟 UNIX，Cygwin 比 MSys/MinGW 更[合适](https://stackoverflow.com/questions/771756/what-is-the-difference-between-cygwin-and-mingw)

# windows - 批处理文件/Powershell - 枚举文件夹中的文件

> ID：13404715
> 
> 赞同：1
> 
> 时间：2012-11-15T19:28:11.080
> 
> 标签：windows, batch-file, cmd, directory, enumeration

注意：没有必要使用批处理，但我只是熟悉批处理，我想Powershell会更好，所以如果powershell中有更简单的解决方案，请大声疾呼！

我有一项艰巨的任务是为所有客户测试我们的 DR 备份，即安装 ShadowProtect Snapshots 最新增量、写入和读取文件，然后卸载映像。批处理的实际 ShadowProtect 部分相当简单，但我想设计一个可以自动执行此操作的批处理。

基本上我的问题是：

*如何在批处理文件中首先枚举文件夹中的文件，然后将给定文件名的特定部分放入变量中？*

ShadowProtect 增量的原因有一个命名约定，例如：

```
SERVERNAME_DRIVELETTER_b00X_i000x           - whereby b = base image, i = incremental number 
```

我需要挂载最新的增量映像，因此需要根据文件名中的数字来解析文件夹并找到最新的增量映像`i`。

这可以批量吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:39:13.587

像这样的东西应该工作：

```
@echo off

setlocal EnableDelayedExpansion

for /f "delims=_ tokens=1-4" %%f in ('dir /b *_*_*_*') do (
  set servername=%%f
  set driveletter=%%g
  set base_image=%%h
  set increment=%%i
)

echo !servername!
echo !driveletter!
echo !base_image!
echo !increment!

endlocal 
```

如果你有几个匹配的文件并且想要对它们都做一些事情，你需要把处理代码放在循环中。

**编辑：**

*   `for /f`: 处理文件或用单引号括起来的命令的输出
*   `delims=_`: 处理内容中的字段用下划线分隔
*   `tokens=1-4`：将前四个token分配给参数`%%f`通过`%%i`（第一个参数是`for`语句中给出的那个）
*   `dir /b *_*_*_*`: 列出名称至少包含 3 个下划线的所有文件及其文件名（此命令的输出由`for`循环处理）
*   `setlocal EnableDelayedExpansion`：在运行时扩展变量（否则将参数分配给变量将不起作用）

有关详细信息，请参阅`help for`和`help dir`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:36:07.837

您总是可以使用 vbscript 或 jscript。它比批处理文件强大得多。jscript 和 vbscript 主机也可以在没有 powershell 的机器上使用！

枚举链接： [http ://www.techimo.com/forum/webmastering-programming/100453-recursive-javascript-list-all-files-folders-given-folder.html](http://www.techimo.com/forum/webmastering-programming/100453-recursive-javascript-list-all-files-folders-given-folder.html)

Jscript 字符串参考： http: [//msdn.microsoft.com/en-us/library/bxsyt3yc (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bxsyt3yc(v=vs.80).aspx)

您应该能够将两者结合起来。

你运行你的 jscript（我更喜欢 jscript 而不是 vbscript，因为它与 javascript 相似）

> cscript 脚本名

# javascript - 内部响应式菜单的错误

> ID：13404717
> 
> 赞同：0
> 
> 时间：2012-11-15T19:28:26.850
> 
> 标签：javascript

我是JS的初学者。我找到**[了响应式菜单的精彩示例](http://github.com/filamentgroup/RWD-Nav-Patterns/blob/master/index.html)**，并将代码放入其中`functions.php`。菜单必须像这里一样工作[http://filamentgroup.com/examples/rwd-nav-patterns/](http://filamentgroup.com/examples/rwd-nav-patterns/)但我有错误 - 当我使用平板电脑模式时，我的站点中的下拉菜单向右移动。

我尝试根据 Bootstrap [http://b.pusku.com将此菜单包含在我的网站中](http://b.pusku.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:33:04.090

**更新：**

小提琴的部分问题是为徽标图像分配的空间太宽，所以我添加了以下内容来纠正这个问题：

```
#logo > img {
    width: 25px;
} 
```

要使下拉菜单始终向左浮动，请添加：

```
.nav-menu .nav-primary {
    float: left;
    clear: none;
} 
```

对`@media screen and (min-width: 910px)`规则...

```
@media screen and (min-width: 910px) {
    .nav-primary {
        float: right;
        clear: none;
    }   
    .nav-menu .nav-primary {
        float: left;
        clear: none;
    }
} 
```

一旦导航链接折叠成下拉菜单，它们就会向左浮动。由于（第 728 行）中的以下规则，链接将`25px`在左侧有一个偏移量：`bootstrap.css`

```
ul, ol {
    padding: 0;
    margin: 0 0 10px 25px; /*specifically this rule*/
} 
```

如果愿意，您可以通过添加`margin-left: 0;`到`.nav-primary ul`规则来覆盖它：

```
.nav-primary ul {
   border: 1px solid #e6e6e6;
    margin-left: 0; /* add this to override the bootstrap.css rule*/
} 
```

最后，随着屏幕宽度变窄，下拉菜单的宽度似乎拉伸了整个宽度。如果这不是预期的效果，请添加`display: inline-block;`到`.nav-primary`规则中：

```
.nav-primary {
    clear: left;
    margin: 0 0 2em;
    display: inline-block;
} 
```

我还使用更多（适当命名的）变量重新编写了使“响应式”导航折叠到下拉列表的 javascript，因此您可以更好地理解脚本为什么会这样做：

```
$(document).ready(function () {
    'use strict';
    $('.nav-primary')
    // test the menu to see if all items fit horizontally
        .bind('testfit', function () {
            var nav = $(this),
                navPrimaryTop = nav.offset().top, // top of div.nav-primary
                navSkipNavTop = nav.prev().offset().top, // top of p containing a#main
                topOfFirstLink = nav.find('li:first-child').offset().top, //top of "What We Done"
                topOfLastLink = nav.find('li:last-child').offset().top, //top of "Contact Us"
                navBelowSkipNav = navPrimaryTop > navSkipNavTop, //boolean indicating whether div.nav-primary is below the p containing a#main
                lastLinkBelowFirstLink = topOfLastLink > topOfFirstLink, //boolean indicating whether "Contact Us" is below "What We Done"
                displayAsMenu = navBelowSkipNav || lastLinkBelowFirstLink; // boolean indicating whether to collapse to a dropdown menu
            $('body').removeClass('nav-menu');
            if (displayAsMenu) {
                $('body').addClass('nav-menu');
            }
        })
        // toggle the menu items' visiblity
        .find('h3').bind('click focus', function () {
            $(this).parent().toggleClass('expanded');
        });
    // ...and update the nav on window events
    $(window).bind('load resize orientationchange', function () {
        $('.nav-primary').trigger('testfit');
    });
}); 
```

这是一个更新的小提琴，展示了基础知识：http: [//jsfiddle.net/DD7MC/1/](http://jsfiddle.net/DD7MC/1/)

我没有覆盖更新的小提琴中的 the`margin-left`或 the `display`。

**原来的：**

`rwd-nav.css`我认为这是和之间的CSS冲突`bootstrap.css`。尝试将`.nav-menu .nav-primary h3`in的类定义更改`rwd-nav.css`为：

```
.nav-menu .nav-primary h3 {
   position: absolute;
   top: -10px; /* <-- change this line */
   left: auto;
   right: 0;
   display: block;
   width: 4em;
   height: 3.75em;  /* <-- change this line */
   background: #ccc url(img/icons.png) no-repeat -205px 45%;
   text-indent: -999em;
   cursor: pointer;
   font-size: inherit; /* <-- add this line */
} 
```

此外，您的托管服务提供商正在为`url(img/icons.png)`. 您可能需要确保该文件存在。

# sqlite - 铬 sqlite load_extension 不可能

> ID：13404719
> 
> 赞同：1
> 
> 时间：2012-11-15T19:28:32.663
> 
> 标签：sqlite, chromium

也许有人有铬构建经验，可以进一步提供帮助：

使用铬 sqlite 动态加载模块似乎是不可能的。

想象一下，您想通过 javascript 加载[spatialite](http://www.gaia-gis.it/gaia-sins/) sqlite 扩展。

我做了什么：

```
 db = window.openDatabase("test.sqlite", 1, "test.sqlite", 10000000);  
    db.transaction(function(tx, myArray) {
     tx.executeSql("select load_extension('/home/user/tmp/libspatialite.so');", [], function(tx, result) {
        console.log("load_extension spatialite");
    },
      function(tx, err) { console.log(err);}
    );
    }); 
```

但这以“无法准备语句（1未授权使用函数：load_extension）”结尾。

但是，我获取了 chromium-24.0.1290.0-1.39.1.x86_64.rpm 并尝试在启用加载模块扩展的情况下构建 chromium，但没有成功。

我做了什么：

*   扩展/chromium/src/third_party/sqlite/sqlite.gyp：

    ```
    'SQLITE_OMIT_AUTHORIZATION',

    ```

*   扩展 /chromium/src/third_party/sqlite/google_generate_amalgamation.sh 与：

    ```
        ../configure --enable-load-extension=yes

    ```

在经历了几个小时的失败后，我提出了一个功能请求 chromium 错误跟踪器（[不允许 web 数据库（sqlite） load_extension](http://code.google.com/p/chromium/issues/detail?id=160049)）。我猜这个功能请求甚至不会被开发人员识别，因为他们的工作量很大。

# text - 从 ElasticSearch 文档中检索分析的令牌

> ID：13404722
> 
> 赞同：36
> 
> 时间：2012-11-15T19:28:50.777
> 
> 标签：text, elasticsearch, tokenize

试图访问我的 ElasticSearch 文档中分析/标记化的文本。

我知道您可以使用[分析 API](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)根据您的分析模块分析任意文本。因此，我可以将文档中的数据复制并粘贴到分析 API 中，以查看它是如何被标记化的。

不过，这似乎是不必要的耗时。有没有办法指示 ElasticSearch 在搜索结果中返回标记化的文本？我浏览了文档并没有找到任何东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-24T15:35:08.510

这个问题有点老了，但也许我认为需要额外的答案。

在 ElasticSearch 1.0.0 中添加了[Term Vector API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-termvectors.html)，它使您可以直接访问 ElasticSearch 在每个文档的底层存储的令牌。API 文档对此不是很清楚（仅在示例中提到），但为了使用 API，您必须首先在[映射定义](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html)中指出您希望`term_vector`在每个字段上存储具有属性的术语向量。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-15T22:20:48.643

看看这个其他答案：[elasticsearch - Return the tokens of a field](https://stackoverflow.com/questions/13178550/elasticsearch-return-the-tokens-of-a-field/13182001#13182001)。不幸的是，它需要使用提供的脚本即时重新分析您的字段内容。
应该可以编写一个插件来公开此功能。想法是将两个端点添加到：

*   允许像 solr [TermsComponent](http://wiki.apache.org/solr/TermsComponent)一样读取 lucene TermsEnum ，这对于进行自动建议也很有用。请注意，它不会是每个文档，只是索引上的每个词都有词频和文档频率（可能很昂贵，因为有很多独特的词）
*   如果启用，则允许读取术语向量，就像 solr [TermVectorComponent](http://wiki.apache.org/solr/TermVectorComponent)一样。这将是每个文档，但需要存储术语向量（您可以在映射中配置它）并且如果启用还允许检索位置和偏移量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-03T21:33:02.670

您可能想要使用脚本，但是您的服务器应该启用脚本。

```
curl 'http://localhost:9200/your_index/your_type/_search?pretty=true' -d '{
    "query" : {
        "match_all" : { }
    },
    "script_fields": {
        "terms" : {
            "script": "doc[field].values",
            "params": {
                "field": "field_x.field_y"
            }
        }
    }
}' 
```

允许脚本的默认设置取决于弹性搜索版本，因此请从官方文档中查看。

# java - 如何取消 Android / Java 线程中的长时间操作？

> ID：13404723
> 
> 赞同：1
> 
> 时间：2012-11-15T19:28:59.543
> 
> 标签：java, android, multithreading

在执行以下代码时，我希望能够阻止它运行，即使它已经完成了一半。例如，如果我有一个，那么我想向这个线程/类`boolean x = true;`发送一些命令之王。`stop(ReadJSONFeedMainTask);`我想取消一切，即使是`onPostExecute()`. 我怎样才能做到这一点？

这是我的代码：

```
private void doStuff() {
    new ReadJSONFeedMainTask().execute(urlString);
}

private class ReadJSONFeedMainTask extends AsyncTask<String, Void, String> {
    protected String doInBackground(String... urls) {
        return Helper.readJSONFeed(urls[0]);
    }

    protected void onPostExecute(String result) {

        try {      
            dictItems = new ArrayList<HashMap<?, ?>>();
            JSONArray jsonArray = new JSONArray(result);
            Log.i("JSON", "Number of items in feed: " + jsonArray.length());

            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject jsonObject = jsonArray.getJSONObject(i);

                HashMap<String, String> map = new HashMap<String, String>();

                Iterator<?> it = jsonObject.keys();
                while (it.hasNext())
                {
                      // do a bunch of time consuming stuff
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:48:14.073

你应该打电话

```
asyncTaskVariable.cancel( true ); 
```

这将强制异步任务停止。

但是，您应该知道这不会立即停止。

如果线程正在等待 IO 输入，它将处于“阻塞 io 状态”。然后就不会停止了。如果您无法控制此 Helper 方法中发生的事情，则无法更改任何内容。但是，如果您拥有它，那么您可以遍历输入流并每次读取多个字节（使用缓冲区）。这会给你机会阻止你的三广告。为此做类似的事情

```
int readBytes = 0;
while( readBytes != -1 && !Thread.interrupted ) {
   readBytes = bufferedReader.read( buffer );
   if( readBytes >0 ) { 
      stringBuilder.append( buffer, 0, readBytes ); 
   }
} 
```

使用该`interrupted`标志，您将能够在取消异步任务时停止线程。

您应该考虑不将`AsyncTask`用于您的网络操作。它们专为短期任务而设计。

> AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

另一种方法是使用 Android 服务，例如使用[RoboSpice](https://github.com/octo-online/robospice)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:31:37.910

要取消任务，请执行 asyncTaskVariable.cancel()。如果它已经在 onPostExecute 中，它将不得不完成它——你在 UI 线程上并且不能杀死它。最好你可以设置一个变量，告诉它终止（当然是从另一个线程），并让它定期检查该变量，如果它设置则返回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T19:32:19.657

当 x 为真时跳过

```
 while (it.hasNext() && x == false) // where x is your skip boolean
 {
      // do a bunch of time consuming stuff
 } 
```

并在您想要终止的任何其他方法中执行类似操作。

它比在流程中终止它要安全得多，因为这可能会导致异常行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T19:34:42.500

您需要保留对您的班级的引用才能做到这一点。例如...

```
private ReadJSONFeedMainTask foo;

private void doStuff() {
    foo = new ReadJSONFeedMainTask();
    foo.execute(urlString);
} 
```

然后稍后当您有中断事件时，您可以调用

```
foo.cancel(true); 
```

true 参数表示立即中断。

**编辑** 我没有注意到你在 postexecute 中放置了 longrunning 任务。正如 gabe 正确提到的那样，即使 cancel() 也无济于事。您将需要重构代码以将长时间运行的任务放入`doInBackground`方法中，以便它可以立即取消，此外还要像上面那样持有对它的引用。

# java - 如何使用 JUNG 为绘图边缘设置动画

> ID：13404724
> 
> 赞同：2
> 
> 时间：2012-11-15T19:29:00.210
> 
> 标签：java, swing, jung

我是 JUNG 的新手，我有一个 FRLayout，它表示一个网络拓扑，其关键节点或顶点颜色为红色，其他顶点为蓝色 从起始节点到结束节点的边是蓝色的 我想演示动画到结束节点的路径。如何以指定的时间间隔动画绘制从 start_node 到 end_node 的边缘？你能提供或参考一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:49:43.613

您可以将关键帧附加到边缘数据。然后，每次绘制（使用变压器）时，您都可以使用关键帧来调整边缘的渐变：

```
RenderContext<V, E> context = vv.getRenderContext();
context.setEdgeDrawPaintTransformer(new KeyframeGradientTransformer());

public class KeyframeGradientTransformer() implements Transformer<E, Paint> {
        @Override
        public Paint transform(Edge edge) {
            // TODO: Here you would determine the gradient information
            // based on the edge.getKeyframe().
            Paint gradient = new GradientPaint(...);
            return gradient;
        }
} 
```

编辑：

我写了一个简单的例子：

![在此处输入图像描述](../Images/287438114c783d9322bf273b847f29fa.png)

这会从一个顶点动画到另一个顶点（沿一条边）。如果您想通过多个顶点制作动画，则需要更多逻辑。然而，这看起来很酷，应该给你一个开始。如果您（或其他任何人）需要更多评论，请告诉我，我可以尝试使其更清楚。

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.LinearGradientPaint;
import java.awt.Paint;
import java.awt.Stroke;
import java.awt.geom.Point2D;
import java.util.Timer;
import java.util.TimerTask;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import org.apache.commons.collections15.Factory;
import org.apache.commons.collections15.Transformer;

import edu.uci.ics.jung.algorithms.generators.random.EppsteinPowerLawGenerator;
import edu.uci.ics.jung.algorithms.layout.Layout;
import edu.uci.ics.jung.algorithms.layout.SpringLayout;
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.graph.SparseMultigraph;
import edu.uci.ics.jung.graph.util.Pair;
import edu.uci.ics.jung.visualization.VisualizationViewer;

public class Test {

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setPreferredSize(new Dimension(1024, 768));
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel content = new JPanel();

                // Set up the graph and the display.
                int numV = 70;
                int numE = 50;
                EppsteinPowerLawGenerator<String, String> gen = new EppsteinPowerLawGenerator<String, String>(
                        new GraphFactory(), new CountFactory(),
                        new CountFactory(), numV, numE, 10);
                Graph<String, String> graph = gen.create();
                Layout<String, String> layout = new SpringLayout<String, String>(
                        graph);
                VisualizationViewer<String, String> vv = new VisualizationViewer<String, String>(
                        layout);
                vv.getRenderContext().setEdgeStrokeTransformer(
                        new Transformer<String, Stroke>() {

                            @Override
                            public Stroke transform(String edge) {
                                return new BasicStroke(1.5f);
                            }
                        });

                content.add(vv);

                frame.setContentPane(content);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                // Animate the edges!
                AnimationTimerTask at = new AnimationTimerTask(vv);
                Timer timer = new Timer();
                timer.scheduleAtFixedRate(at, 10, 30);
            }

        });
    }

    static class AnimationTimerTask extends TimerTask {

        private final double width = 0.1; // Size of the colored line.
        private final double stepsize = 0.01;
        private double keyframe = 0 + width; // Between 0.0 and 1.0
        private VisualizationViewer<String, String> vv = null;

        public AnimationTimerTask(VisualizationViewer<String, String> vv) {
            this.vv = vv;
        }

        @Override
        public void run() {
            vv.getRenderContext().setEdgeDrawPaintTransformer(
                    new Transformer<String, Paint>() {

                        @Override
                        public Paint transform(String edge) {
                            // Find both points of the edge.
                            Pair<String> vs = vv.getGraphLayout().getGraph()
                                    .getEndpoints(edge);
                            Point2D p1 = vv.getGraphLayout().transform(
                                    vs.getFirst());
                            Point2D p2 = vv.getGraphLayout().transform(
                                    vs.getSecond());

                            // This code won't handle self-edges.
                            if (p1.equals(p2)) {
                                return Color.red;
                            }

                            Color[] colors = { Color.gray, Color.red,
                                    Color.gray };
                            float start = (float) Math.max(0.0, keyframe
                                    - width);
                            float end = (float) Math.min(1.0, keyframe + width);
                            float[] fractions = { start, (float) keyframe, end };
                            return new LinearGradientPaint(p1, p2, fractions,
                                    colors);
                        }

                    });
            vv.repaint();
            keyframe += stepsize;
            keyframe %= 1.0;
        }
    }

    static class GraphFactory implements Factory<Graph<String, String>> {

        @Override
        public Graph<String, String> create() {
            return new SparseMultigraph<String, String>();
        }
    }

    static class CountFactory implements Factory<String> {

        private int count = 0;

        @Override
        public String create() {
            return String.valueOf(count++);
        }
    }
} 
```

另外，我之前为此付出了一些热情：这需要 JUNG 库。如果没有它，就无法运行 SSCCEE。

# typescript - 用于“新”对象的 TypeScript 接口

> ID：13404726
> 
> 赞同：3
> 
> 时间：2012-11-15T19:29:12.477
> 
> 标签：typescript

首先，这个问题是在使用 Three.js 之后首先出现的，我为了自己的缘故尝试/尝试为库构建接口。

无论如何，假设我们有 JS 代码：

```
var foo = new THREE.Vector3(0,0,0); 
```

在 TypeScript 中，您可以将三个对象表示为：

```
interface IThreeJS {
    Vector3(x: number, y: number, z: number): any;
}

declare var THREE: IThreeJS; 
```

但是，正如您所见，我们从 Vector3 中返回了 ': any'。如果我创建一个 IVector3 接口并尝试执行“new THREE.Vector3(0,0,0): IVector3”，我们会得到一个“构造函数上有效的新表达式”。因此必须返回“任何”

现在唯一的选择是让 IThreeJS 的 Vector3 对象返回 'any' 并执行以下操作：

```
var foo: IVector3 = new THREE.Vector3(0,0,0); 
```

那么，无论如何让我的 IThreeJS 接口的 Vector3 方法有一个构造函数并返回一个 IVector3？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T19:53:00.933

你也可以声明类和模块：

```
declare module THREE {
    export class Vector3 {
        constructor(x: number, y: number, z: number);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-08T21:23:23.997

```
export class Vector3 {

  x: number;
  y: number;
  z: number;

  constructor(x, y , z) {
    this.x = x;
    this.y = y;
    this.z = z;
  }

} 
```

> 常量位置 = 新 Vector3(0, 0, 0);

### 祝你好运

# c# - EF 选择内部选择

> ID：13404730
> 
> 赞同：0
> 
> 时间：2012-11-15T19:29:18.570
> 
> 标签：c#, entity-framework, linq-to-entities

我有以下 EF 表达式：

```
var complexes = db.ResidentialComplexes.AsNoTracking()
                .Where(rc => rc.MasterEntity == entity)
                .Select(rc => new CustomComplexObj()
                {
                    ComplexId = rc.ComplexId,
                    Name = rc.Name,
                    Region = rc.Region,

                    Properties = rc.CurrentProperties.Select(p=> new CustomPropertyObj(){
                         Name = p.Name,
                         PropertyId = p.PropertyId
                    }).ToList()

                }).ToList(); 
```

设置时出现错误：

```
Properties = rc.CurrentProperties.Select(p=> new CustomPropertyObj(){
                             Name = p.Name,
                             PropertyId = p.PropertyId
                        }).ToList() 
```

这是错误：

**LINQ to Entities 无法识别方法 'System.Collections.Generic.List `1[CondoTrack.Model.Poco.CustomPropertyObj] ToList[CustomPropertyObj](System.Collections.Generic.IEnumerable`1[CondoTrack.Model.Poco.CustomPropertyObj])' 方法，并且此方法无法转换为存储表达式。**

关于如何获得所需结果的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:32:25.680

删除并将类型`ToList()`更改为而不是。正如错误中所述，Linq to Entities 不支持。`Properties``IEnumerable<T>``List<T>``ToList`

# soundcloud - 轨道完成时新的 SoundCloud HTML5 小部件动画

> ID：13404731
> 
> 赞同：0
> 
> 时间：2012-11-15T19:29:20.057
> 
> 标签：soundcloud

html5 小部件的新更新在末尾添加了一个动画，该动画隐藏了波形并显示了共享选项和嵌入代码。

这破坏了我的一个客户站点中所需的效果，该站点依赖于小部件作为其音频引擎。

有没有办法停止这个动画或恢复到旧的小部件，因为它工作得很好。

该网站是[http://www.bushytunes.net](http://www.bushytunes.net)

播放曲目，跳到最后，自己看。

谢谢，詹姆斯

- - - -更新 - - - -

在 chrome web 检查器中弄乱 iframe css 时，我遇到了 .sound__sharePanel DOM 元素，我所需要的只是添加 display: none 的简单选项，问题将得到解决。

我相信我在加载播放器 iframe 时向共享参数传递了一个错误的布尔值。这个处理不应该隐藏元素，因为 api 文档声明此参数将“显示/隐藏共享按钮/对话”。

# verilog - 生成随机数 - 种子仅更改一次

> ID：13404737
> 
> 赞同：0
> 
> 时间：2012-11-15T19:29:50.047
> 
> 标签：verilog, modelsim

我在这样的循环中生成一个介于 0 到 10000 之间的 ve​​rilog 数字：

```
wire rand;
integer i, seed;
initial 
   begin
      i=1;
      seed=0;
      while (i<10)
        begin
        force rand = $random(seed) % 10000;
      end
   end 
```

种子仅更改一次并且在其余迭代中保持不变的问题。（我在 ModelSim 中看到了这些值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:12:53.333

它应该进行一些小的修改，如果需要，随机数比 1 位更宽，并且不会在 0 时间执行。这里的 for 循环会比 while 循环好。

```
integer i, seed;
reg [31:0] rand;

initial begin
  seed=0;
  for(i=0; i<10; i=i+1) begin
    rand = $random(seed) % 10000;
    $display("rand %d", rand);
    #1ns; //Stop loop executing in 0 time
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T20:30:38.970

您不需要在该循环中进行某种延迟吗？AFAIK 它只会立即迭代所有 10 次迭代，并且最终会强制`rand`到最终生成的值。

另外，你在哪里增加`i`？或者你只是在粘贴代码之前把它删掉了？

# css - 覆盖元素的 CSS 'position: relative;' 的正确方法是什么 使用引导程序 2.2.1？

> ID：13404739
> 
> 赞同：6
> 
> 时间：2012-11-15T19:30:06.853
> 
> 标签：css, twitter-bootstrap, html5boilerplate, initializr

我正在使用 Twitter Bootstrap 2.2.1 Initializr 样板开发一个项目。为了正确覆盖 Bootstrap 的默认 CSS 属性，您需要在“main.css”中为受影响的类创建一个条目并添加所需的属性。

在这种特殊情况下，Bootstrap 有一个名为“.collapse”的类，该类应用于默认导航栏。

```
.collapse{
    position:relative;
    height:0;
    overflow:hidden;
    -webkit-transition:height .35s ease;
    -moz-transition:height .35s ease;
    -o-transition:height .35s ease;
    transition:height .35s ease
} 
```

对我造成问题的部分是“位置：相对；”。我需要没有立场声明。现在我知道我可以打开 Bootstrap CSS 文件并对其进行编辑，但如果文件被更新，那么更改将会丢失。

覆盖此 CSS 条目的正确方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T19:38:06.803

在 bootstrap.css 之后包含您自己的 CSS 文件并使用相同的选择器编写规则。至于位置属性，您可以使用`position: static;`或任何您需要的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T19:50:02.670

如果只是一个属性，您可以将内联 css 添加到 html 元素并将该`position`属性重置为他的默认值：

```
<nav class="collapse" style="position:static">
  <ul>
    <li>....</li>
    <li>....</li>
  </ul>
</nav> 
```

但是如果你认为你会改变/添加其他样式，那么你应该在 bootstrap.css 之后添加你自己的 CSS 文件，这样你的所有样式都会覆盖引导程序默认的 css。

# javascript - 多个翻转图像

> ID：13404743
> 
> 赞同：1
> 
> 时间：2012-11-15T19:31:01.767
> 
> 标签：javascript, html, css

是否可以将图像放置在根据光标所在位置而变化的网页上？

当前代码：

```
<body onload="MM_preloadImages('Images/Home.png')">

<div class="HeaderWrapper">
    <a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image2','','Images/Home.png',1)">
        <img src="Images/NavigationBanner.png" name="Image2" width="1300" height="150" border="0" id="Image2" />
    </a>
    <a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Home','','Images/Home.png',1)">
        <img src="Images/NavigationBanner.png" name="Home" width="1300" height="150" border="0" id="Home" />
    </a>
</div> 
```

我在想它可以修改一些如何使用它？

```
<area shape="rect" coords="434,54,495,83" href="index.php" target="index.php" alt="index" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:36:33.653

1.  搜索如何响应悬停事件。

2.  搜索如何在 HTML 元素上切换 CSS 类。

3.  当图像悬停时，切换 HTML 元素的类，以便使用不同的 CSS 类。这个不同的 CSS 类将有不同的图像。

为此使用 jQuery 可能更容易。

# cocoa - 如何阻止 NSCollectioView 的 selectionIndexes 通知 mouseDown 和 mouseUp

> ID：13404746
> 
> 赞同：1
> 
> 时间：2012-11-15T19:31:12.837
> 
> 标签：cocoa, key-value-observing, nscollectionview

我正在观察 NSCollectionView 实例的“selectionIndexes”，如下所示：

```
[self.collectionView addObserver:self forKeyPath:@"selectionIndexes" options:0 context:nil]; 
```

然后我响应 observeValueForKeyPath: 中的变化，如下所示：

```
if(object == self.collectionView)
{
    if([keyPath isEqualToString:@"selectionIndexes"])
        NSLog(@"selectionIndexes CHANGED");
} 
```

我注意到，如果我单击一个项目，我会收到两个通知，一个用于鼠标按下事件，另一个用于鼠标按下事件。两次 selectionIndexes 属性都返回项目的索引。你甚至可以慢慢地点击，向下暂停并观察日志中的两个不同的触发。

这似乎不正常，我该如何阻止？单击 NSCollectionItem 时是否有更好的通知方式？

更新：我发现它被触发了两次，因为我还清除了 observeValueForKeyPath 中的选择：

```
if(object == self.collectionView)
{
    if([keyPath isEqualToString:@"selectionIndexes"])
    {
        NSLog(@"selectionIndexes CHANGED");
        [self.collectionView setSelectionIndexes:nil];
    }
} 
```

出于某种原因，NSCollectionView 看到它的选择在该项目的鼠标向上事件中设置为 nil，它会重置选择索引。仍然不确定我想如何解决这个问题，因为我确实需要将选择设置回零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T12:53:22.027

要设置空选择，请设置`selectionIndexes`为空，`NSIndexSet`如下所示：

```
[self.collectionView setSelectionIndexes:[NSIndexSet indexSet]]; 
```

# c++ - 接口的 C++ 模板特化

> ID：13404755
> 
> 赞同：4
> 
> 时间：2012-11-15T19:31:44.507
> 
> 标签：c++

为什么编译器在运行以下代码时不会选择接口模板？是否需要额外的声明/提示，或者这通常不起作用？

我只是好奇这是否真的可能。

```
class Interface {
    public :
       virtual void Method() = 0;
       virtual ~Interface() { }
};

class Derived : Interface {
    public : 
       void Method() {
            cout<<"Interface method"<<endl;
       }
};

template<typename T> 
struct Selector {
    static void Select(T& o) {
        cout<<"Generic method"<<endl;
    }
};

template<> 
struct Selector<Interface> {
    static void Select(Interface& o) {
        o.Method();
    }
};

int i;
Selector<int>::Select(i)       // prints out "Generic method" -> ok
Derived d;
Selector<Derived>::Select(d);  // prints out "Generic method" -> wrong
                               // should be "Interface method" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T19:40:25.677

试试这个（和`#include <type_traits>`）：

```
template <typename T, typename = void>
struct Selector
{
    static void Select(T & o)
    {
        std::cout << "Generic method" << std::endl;
    }
};

template <typename T>
struct Selector<T,
           typename std::enable_if<std::is_base_of<Interface, T>::value>::type>
{
    static void Select(Interface & o)
    {
        o.Method();
    }
}; 
```

事实证明，`enable_if`结合默认模板参数可以用来指导部分特化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T19:36:47.320

编译器将选择最接近匹配的函数版本。采用参数精确类型的函数总是胜过需要转换的函数。在这种情况下，模板函数是完全匹配的，因为它匹配任何东西；`Interface`专业化需要将参数从 a 转换为`Derived`a `Interface`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:42:37.947

这将使您获得所需的结果：

```
#include <iostream>
#include <type_traits>
using namespace std;

class Interface {
    public :
       virtual void Method() = 0;
       virtual ~Interface() { }
};

class Derived : public Interface {
    public : 
       void Method() {
            cout<<"Interface method"<<endl;
       }
};

template<typename T, typename S = void> 
struct Selector {
    static void Select(T& o) {
        cout<<"Generic method"<<endl;
    }
};

template<typename T>
struct Selector<T, typename enable_if< is_base_of<Interface, T>::value >::type> {
    static void Select(Interface& o) {
        o.Method();
    }
};

int main()
{
int i;
Selector<int>::Select(i);       // prints out "Generic method" -> ok
Derived d;
Selector<Derived>::Select(d);  // prints out "Generic method" -> wrong
                               // should be "Interface method"
} 
```

# objective-c - UIScrollView 的子视图中的 UITapGestureRecognizer

> ID：13404762
> 
> 赞同：2
> 
> 时间：2012-11-15T19:32:07.157
> 
> 标签：objective-c, ios

我有一个视图控制器，它有一个通过情节提要连接的 UIScrollView IBOutlet。这个视图控制器有一个`property`持有另一个视图控制器的。然后，我将此视图控制器中的视图添加到 UIScrollView 中，如下所示：

```
[scrollView addSubview:self.derpController.view]; 
```

在 内`derpController`，我添加`UITapGestureRecognizer`如下：

```
[self.view addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleFingerTap:)]]; 
```

现在，我遇到的问题是`singleFingerTap:`选择器只在`UIScrollView`. 也就是说，如果我滚动视图并点击最初不可见的位置，`UITapGestureRecognizer`则不会触发。

我似乎无法弄清楚如何解决这个问题。

**编辑：** 在 iPad 实现上，点击手势实际上在初始启动屏幕之外被识别了一点，但它并没有覆盖滚动视图中的整个子视图。

# java - 如何在java中旋转饼图

> ID：13404766
> 
> 赞同：0
> 
> 时间：2012-11-15T19:32:21.960
> 
> 标签：java, rotation, awt, graphics2d, pie-chart

我有代码来绘制带有值和随机颜色的饼图。现在我想旋转整个图形，而不是一块馅饼。这是我的代码：

```
class Slice{

    double value;
    Color color;
    public Slice(double _value){
        this.value = _value;    
    }
    public void setColor(Color _color){
        this.color = _color;

    }
}

class Component extends JComponent implements MouseListener{

    int movx = 0;
    int movy = 0;

    Slice[] slice = {new Slice(5),new Slice(20),new Slice(33),new Slice(55)};
    public Component(){
        addMouseListener(this);
    }

    public void paint(Graphics g){
        Graphics2D g2 = (Graphics2D)g;
        drawPie(g2, getBounds(), slice);

    }
    public void drawPie(Graphics2D g, Rectangle area, Slice[] s){
        double total = 0.0D;
        //calculate total value
        for(int i=0;i<s.length;i++)
            total+=s[i].value;

        double curentValue = 0.0D;
        int startAngle = 0;
        for(int i = 0;i<s.length;i++){
            Random numGen = new Random();
            s[i].setColor(new Color(numGen.nextInt(256), numGen.nextInt(256), numGen.nextInt(256)));
            startAngle = (int)((curentValue*360)/total);
            int arcAngle = (int)((s[i].value*360)/total) ;
            g.setColor(s[i].color);
            g.rotate(30);//row AA
            g.fillArc(area.x, area.y, area.width, area.height, startAngle, arcAngle);   

            curentValue+=s[i].value;

        }
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        // TODO Auto-generated method stub
        movx = e.getX();
        movy = e.getY();
        repaint();
    }

    // unimplemented Mouse methods removed
}

public class PieChart {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame frame = new JFrame();
        frame.getContentPane().add(new Component());
        frame.setSize(300,200);
        frame.setVisible(true);
    }
} 
```

我在AA行写`rotate`的时候不能正常工作？你能帮助我吗？如何旋转整个图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:45:28.063

Graphics2D.rotate 的参数以弧度为单位。

[http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#rotate%28double%29](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#rotate%28double%29)

[http://en.wikipedia.org/wiki/Radian#Conversion_between_radians_and_degrees](http://en.wikipedia.org/wiki/Radian#Conversion_between_radians_and_degrees)

如果要旋转整个图表，则应将旋转代码放在 drawPie 方法的开头，而不是放在 for 循环中。

# wolfram-mathematica - 如何使用 Mathematica 在一个平面上绘制 x 函数和 y 函数？

> ID：13404773
> 
> 赞同：1
> 
> 时间：2012-11-15T19:32:36.237
> 
> 标签：wolfram-mathematica

我有两个功能：

`y = x - x^3`我需要将它们都绘制在一个平面上， `x = y^3 - y` 我想知道如何用 Mathematica 实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:50:06.377

一种方法是使用`ContourPlot`

让我们将它包裹在 Manipulate 中以使其更易于调整

```
 Manipulate[

 With[{f1 = y == x - x^3, f2 = x == y^3 - y},
  ContourPlot[{f1, f2}, {x, -lim, lim}, {y, -lim, lim},
   Frame -> True,
   FrameLabel -> {{y, None}, {x, {f1, f2}}},
   ImagePadding -> 30,
   GridLines -> Automatic,
   GridLinesStyle -> Directive[Thickness[.001], LightGray]]
  ],

 {{lim, 3, "limit"}, .1, 10, .1, Appearance -> "Labeled"}
 ] 
```

![在此处输入图像描述](../Images/66c6b8316dca3dcf754fe3247b590ae3.png)

# c# - 打开一个只有 3 个选项卡的 Internet Explorer Windows

> ID：13404780
> 
> 赞同：2
> 
> 时间：2012-11-15T19:33:14.503
> 
> 标签：c#, internet-explorer, firefox, shdocvw

我正在和一位同事一起做一个项目，我们一直在努力解决这个问题。我们的要求是让一个新的 Internet Explorer 浏览器弹出一个网页，然后在其上附加两个选项卡。我们找到了一个可以在我同事的计算机上运行的解决方案，但是当我们在我的计算机和另一个同事的计算机上尝试时，它不起作用。到目前为止我们有什么：

```
using SHDocVw;

...

ShellWindows iExplorerInstances = new ShellWindows();    
Process.Start("IExplore.exe", "www.reddit.com");
Thread.Sleep(5000);
string url = "http://www.google.com";
IEnumerator enumerator = iExplorerInstances.GetEnumerator();
enumerator.MoveNext();
InternetExplorer iExplorer = (InternetExplorer)enumerator.Current;
iExplorer.Navigate(url, 0x800); //0x800 means new tab 
url = "http://www.banana.com";
enumerator = iExplorerInstances.GetEnumerator();
enumerator.MoveNext();
iExplorer = (InternetExplorer)enumerator.Current;
iExplorer.Navigate(url, 0x800); //0x800 means new tab 
```

同样，这仅在他的计算机上正常工作。对我来说，当我尝试运行此代码时，它会正确打开 Internet Explorer 浏览器，但即使我使用的是 InternetExplorer 对象，它也会打开 Firefox 中的选项卡。我深入课堂，试图打印出我能找到的任何有用的东西。我的 InternetExplorer 对象中的 name 属性是“Windows Explorer”。我阅读了更多关于 ShellWindows 实际所做的事情，这是有道理的，但这对我没有帮助。这似乎意味着它通过 InternetExplorer 对象而不是 Internet Explorer 打开我的默认浏览器。我的同事将 Chrome 作为默认浏览器，我也得到了不同的结果。我将默认浏览器切换到 Chrome 以查看是否是问题所在，但随后在 Chrome 中打开了两个额外的选项卡。我真正需要的是打开一个带有 3 个选项卡的 Internet Explorer 浏览器，每个选项卡都有自己的 URL。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:57:33.050

看起来这个人有你正在寻找的解决方案：

[从 C# 在现有 IE 窗口的选项卡中启动 URL](https://stackoverflow.com/questions/3713206/launch-a-url-in-a-tab-in-an-existing-ie-window-from-c-sharp)

# php - 需要唯一的 url htaccess 或其他重定向

> ID：13404782
> 
> 赞同：0
> 
> 时间：2012-11-15T19:33:20.017
> 
> 标签：php, .htaccess, redirect, http-redirect

我需要以某种方式制作一个独特的网址重定向。

例如： [http ://www.mydomain.com](http://www.mydomain.com) **/shop**需要重定向回[http://www.mydomain.com](http://www.mydomain.com)

但

[http://www.mydomain.com/shop/tshirts](http://www.mydomain.com/shop/tshirts)等仍然需要运行，我无法让它工作。无论我尝试什么包含我不想要的 /shop/ *xxx重定向。*

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:38:19.677

试试这个。将其写入 .htaccess 文件。

```
RewriteEngine on
RewriteCond %{REQUEST_URI} /shop
Rewriterule ^$ http://mydomain.com/test/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:44:30.497

您需要启用 MOD_REWRITE。

将`.htaccess`文件放在服务器的根文件夹中，并包含：

```
RewriteEngine On
RewriteRule ^(.*)shop/$ http://mydomain.com/ [R,L] 
```

希望对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T20:08:53.760

您的重定向似乎很简单，因此您可以为此使用重定向指令。

在您的 .htaccess 文件中，添加此重定向。

```
Redirect 301 /shop  http://www.mydomain.com/

    301: permanent
    302: temp
    303: seeother
    410: gone 
```

mod_alias 需要在配置中启用。

# opencl - CPU/Intel OpenCL 性能问题、实现问题

> ID：13404787
> 
> 赞同：10
> 
> 时间：2012-11-15T19:33:41.570
> 
> 标签：opencl, cpu, intel, vectorization, hyperthreading

我有几天悬而未决的问题没有答案。出现这些问题是因为我有相同问题的 OpenMP 和 OpenCL 实现。OpenCL 在 GPU 上完美运行，但在 CPU 上运行时性能降低 50%（与 OpenMP 实现相比）。一篇[文章](https://stackoverflow.com/questions/7263193/opencl-performance-vs-openmp)已经在处理 OpenMP 和 OpenCL 性能之间的差异，但它没有回答我的问题。目前我面临这些问题：

**1）拥有“矢量化内核**”（就英特尔离线编译器而言）真的那么重要吗？

有一个[类似](https://stackoverflow.com/questions/12987362/opencl-kernel-not-vectorized)的帖子，但我认为我的问题更笼统。

据我了解：矢量化内核不一定意味着编译后的二进制文件中没有矢量/SIMD 指令。我检查了我的内核的汇编代码，并且有一堆 SIMD 指令。矢量化内核意味着通过使用 SIMD 指令，您可以在一个 CPU 线程中执行 4 个 (SSE) 或 8 个 (AVX) OpenCL“逻辑”线程。这只有在您的所有数据都连续存储在内存中时才能实现。但是谁拥有如此完美排序的数据呢？

所以我的问题是：从这个意义上说，让你的内核“矢量化”真的那么重要吗？

当然它可以提高性能，但是如果内核中的大多数计算密集型部分都是通过向量指令完成的，那么您可能会接近“最佳”性能。我认为我的问题的答案在于内存带宽。向量寄存器可能更适合高效的内存访问。在这种情况下，必须对内核参数（指针）进行矢量化。

2）如果我在**CPU的****本地内存中****分配**数据，它将分配到哪里？OpenCL 将 L1 缓存显示为本地内存，但它显然与 GPU 本地内存上的内存类型不同。如果它存储在 RAM/全局内存中，那么将数据复制到其中是没有意义的。如果它在缓存中，其他一些进程可能会将它刷新出来......所以这也没有意义。

 ****3) “逻辑”OpenCL 线程如何**映射**到真正的 CPU 软件/硬件（Intel HTT）线程？因为如果我的内核运行时间很短，并且内核像在 TBB（线程构建块）或 OpenMP 中那样分叉，那么分叉开销将占主导地位。

4）线程分叉**开销**是多少？是否为每个“逻辑”OpenCL 线程派生了新的 CPU 线程，或者 CPU 线程是否被派生一次，然后再用于更多“逻辑”OpenCL 线程？

我希望我不是唯一对这些小东西感兴趣的人，你们中的一些人现在可能对这些问题有所了解。先感谢您！

* * *

**更新**

3) 目前，OpenCL 的开销比 OpenMP 更大，因此需要大量内核来实现高效的运行时执行。在 Intel OpenCL 中，工作组映射到 TBB 线程，因此 1 个虚拟 CPU 内核执行整个工作组（或线程块）。一个工作组是用 3 个嵌套的 for 循环实现的，如果可能的话，最里面的循环是矢量化的。所以你可以想象它是这样的：

```
#pragam omp parallel for
for(wg=0; wg < get_num_groups(2)*get_num_groups(1)*get_num_groups(0); wg++) {

  for(k=0; k<get_local_size(2); k++) {
    for(j=0; j<get_local_size(1); j++) {
      #pragma simd
      for(i=0; i<get_local_size(0); i++) {
        ... work-load...
      }
    }
  }
} 
```

如果最里面的循环可以被矢量化，它会使用 SIMD 步骤：

```
for(i=0; i<get_local_size(0); i+=SIMD) { 
```

4) 每个 TBB 线程在 OpenCL 执行期间被分叉一次并被重用。每个 TBB 线程都绑定到一个虚拟内核，即。计算过程中没有线程迁移。

我也接受@natchouf-s 的回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T11:16:08.083

我可能对你的问题有一些提示。**根据我的经验，针对 CPU 调整的良好 OpenCL 实现无法击败良好的 OpenMP 实现**。如果是这样，您可能会改进 OpenMP 代码以击败 OpenCL 代码。

1）**拥有矢量化内核非常重要**。它与您的问题编号 3 和 4 相关联。如果您有一个处理 4 或 8 个输入值的内核，您将拥有更少的工作项（线程），因此开销也更少。我建议使用 OpenCL 提供的向量指令和数据（如*float4*、*float8*、*float16*），而不是依赖自动向量化。不要犹豫使用*float16*（或*double16*）：这将被映射到 4 个 sse 或 2 个 avx 向量，并将除以 16 所需的工作项数（这对 CPU 有好处，但并不总是对 GPU 有用：我使用 2 个不同的CPU 和 GPU 的内核）。

2）CPU上的本地内存是RAM。不要在 CPU 内核上使用它。

3 和 4）我真的不知道，这将取决于实现，但 fork 开销对我来说似乎很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T22:38:39.200

对于问题 3：

英特尔将逻辑 OpenCL 线程分组为一个硬件线程。组大小可以从 4、8 到 16 不等。逻辑 OpenCL 线程映射到执行单元的一个 SIMD 通道。一个执行单元有两个宽度为 4 的 SIMD 引擎。详细信息请参考以下文档。 [https://software.intel.com/sites/default/files/Faster-Better-Pixels-on-the-Go-and-in-the-Cloud-with-OpenCL-on-Intel-Architecture.pdf](https://software.intel.com/sites/default/files/Faster-Better-Pixels-on-the-Go-and-in-the-Cloud-with-OpenCL-on-Intel-Architecture.pdf)****

# php - Magento 从 Serializd 数组中获取数据

> ID：13404788
> 
> 赞同：0
> 
> 时间：2012-11-15T19:33:51.713
> 
> 标签：php, arrays, magento, multidimensional-array

我正在尝试从销售订单项目中获取自定义选项值。我写了一个代码如下

```
foreach ($order->getAllItems() as $item){
  $productOptions = $item->getProductOptions(); 
   foreach($productOptions as $opt){
     var_dump($opt);
    }  
  } 
```

但我不知道如何通过这个数组访问单个选项。ex- $opt-> 标题

没有为我得到任何东西

这是一项的 var 转储

```
array(7) { ["uenc"]=> string(80) "aHR0cDovL3ZhbmhhZ2UuY2FtZm9saW8uY28udWsvc2hvcC1vbmxpbmUvbG95YWx0eS1jYXJkLmh0bWw," ["product"]=> string(4) "1841" ["related_product"]=> string(0) "" ["super_attribute"]=> array(1) { [1000]=> string(5) "11160" } ["options"]=> array(13) { [1574]=> string(2) "Mr" [1575]=> string(7) "Cameron" [1576]=> string(4) "Owen" [1577]=> string(1) "6" [1578]=> string(14) "Address Line 1" [1579]=> string(14) "Address Line 2" [1580]=> string(4) "Town" [1581]=> string(6) "County" [1582]=> string(7) "B17 6AG" [1583]=> string(12) "0121 424 578" [1584]=> string(11) "07811877865" [1585]=> string(10) "19/04/1987" [1573]=> string(20) "hello@camfolio.co.uk" } ["cpid"]=> string(4) "1840" ["qty"]=> int(1) } array(13) { [0]=> array(7) { ["label"]=> string(5) "Title" ["value"]=> string(2) "Mr" ["print_value"]=> string(2) "Mr" ["option_id"]=> string(4) "1574" ["option_type"]=> string(5) "field" ["option_value"]=> string(2) "Mr" ["custom_view"]=> bool(false) } [1]=> array(7) { ["label"]=> string(10) "First Name" ["value"]=> string(7) "Cameron" ["print_value"]=> string(7) "Cameron" ["option_id"]=> string(4) "1575" ["option_type"]=> string(5) "field" ["option_value"]=> string(7) "Cameron" ["custom_view"]=> bool(false) } [2]=> array(7) { ["label"]=> string(9) "Last Name" ["value"]=> string(4) "Owen" ["print_value"]=> string(4) "Owen" ["option_id"]=> string(4) "1576" ["option_type"]=> string(5) "field" ["option_value"]=> string(4) "Owen" ["custom_view"]=> bool(false) } [3]=> array(7) { ["label"]=> string(12) "House Number" ["value"]=> string(1) "6" ["print_value"]=> string(1) "6" ["option_id"]=> string(4) "1577" ["option_type"]=> string(5) "field" ["option_value"]=> string(1) "6" ["custom_view"]=> bool(false) } [4]=> array(7) { ["label"]=> string(14) "Address Line 1" ["value"]=> string(14) "Address Line 1" ["print_value"]=> string(14) "Address Line 1" ["option_id"]=> string(4) "1578" ["option_type"]=> string(5) "field" ["option_value"]=> string(14) "Address Line 1" ["custom_view"]=> bool(false) } [5]=> array(7) { ["label"]=> string(14) "Address Line 2" ["value"]=> string(14) "Address Line 2" ["print_value"]=> string(14) "Address Line 2" ["option_id"]=> string(4) "1579" ["option_type"]=> string(5) "field" ["option_value"]=> string(14) "Address Line 2" ["custom_view"]=> bool(false) } [6]=> array(7) { ["label"]=> string(4) "Town" ["value"]=> string(4) "Town" ["print_value"]=> string(4) "Town" ["option_id"]=> string(4) "1580" ["option_type"]=> string(5) "field" ["option_value"]=> string(4) "Town" ["custom_view"]=> bool(false) } [7]=> array(7) { ["label"]=> string(6) "County" ["value"]=> string(6) "County" ["print_value"]=> string(6) "County" ["option_id"]=> string(4) "1581" ["option_type"]=> string(5) "field" ["option_value"]=> string(6) "County" ["custom_view"]=> bool(false) } [8]=> array(7) { ["label"]=> string(8) "Postcode" ["value"]=> string(7) "B17 6AG" ["print_value"]=> string(7) "B17 6AG" ["option_id"]=> string(4) "1582" ["option_type"]=> string(5) "field" ["option_value"]=> string(7) "B17 6AG" ["custom_view"]=> bool(false) } [9]=> array(7) { ["label"]=> string(16) "Telephone Number" ["value"]=> string(12) "0121 424 578" ["print_value"]=> string(12) "0121 424 578" ["option_id"]=> string(4) "1583" ["option_type"]=> string(5) "field" ["option_value"]=> string(12) "0121 424 578" ["custom_view"]=> bool(false) } [10]=> array(7) { ["label"]=> string(13) "Mobile Number" ["value"]=> string(11) "07811877865" ["print_value"]=> string(11) "07811877865" ["option_id"]=> string(4) "1584" ["option_type"]=> string(5) "field" ["option_value"]=> string(11) "07811877865" ["custom_view"]=> bool(false) } [11]=> array(7) { ["label"]=> string(13) "Date of Birth" ["value"]=> string(10) "19/04/1987" ["print_value"]=> string(10) "19/04/1987" ["option_id"]=> string(4) "1585" ["option_type"]=> string(5) "field" ["option_value"]=> string(10) "19/04/1987" ["custom_view"]=> bool(false) } [12]=> array(7) { ["label"]=> string(13) "Email Address" ["value"]=> string(20) "hello@camfolio.co.uk" ["print_value"]=> string(20) "hello@camfolio.co.uk" ["option_id"]=> string(4) "1573" ["option_type"]=> string(5) "field" ["option_value"]=> string(20) "hello@camfolio.co.uk" ["custom_view"]=> bool(false) } } 
```

谁能帮我从这个前电子邮件地址出生日期等获取数据......

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:46:16.407

$opt 是一个多维数组。

因此，如果您想访问名字，您可以使用：

```
$options=$opt['options'];
$name=$options[1575]; 
```

但这可能是一项艰苦的工作。我真的建议你创建一个类（如果没有的话）并从 $opt 中反序列化一个对象。

# html - 对产品 magento 的不同看法

> ID：13404792
> 
> 赞同：1
> 
> 时间：2012-11-15T19:34:05.173
> 
> 标签：html, magento, views

如何让 magento 1.7 为捆绑产品呈现 view.phtml，为简单产品呈现 view.phtml，反之亦然？

基本上我该如何为不同的产品类型做不同的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:39:53.823

我对此也还是新手，如果有人有比我做的更好的方法，请发布。（我也可以从中学习..）

但我会使用***一个***view.phtml 文件并将其放在您想要用于捆绑视图的代码周围

```
<?php if($_product->getTypeId() == "bundle"){ ?>
                <div class="product-view"> ... </div>

            <?php  } else { ?> 
                <div class="product-view"> ... </div>
            <?php  } ?> 
```

# spring - 我可以在我的 Spring-MyBatis 应用程序中设置 Tomcat 的 JNDI 连接池设置吗？

> ID：13404796
> 
> 赞同：0
> 
> 时间：2012-11-15T19:34:09.623
> 
> 标签：spring, tomcat7, jndi, mybatis

环境：
Tomcat 7
JNDI
Spring-MyBatis
No JTA - 仅公共池

问题：无法让连接池按照宣传的方式工作。我找不到一个不使用独立事务管理器或不将所有设置放入战争中的示例，这使得 JNDI 毫无意义。有人告诉我，JTA 对于这个应用程序来说太过分了，我们应该坚持使用公共池。这是有道理的，但如果我们这样做，我看不到配置池的方法。

那么......如何在不将设置放入war文件并且不使用独立事务管理器的情况下配置连接池？这可以在没有完整的 Java EE 应用服务器的情况下完成吗？我们只是从另一个实际上是完整的 Java EE 的产品迁移到 Tomcat，所以我认为这可能是一个 Container vrs。应用服务器问题。

奇怪的是我们可以并且已经使用了 JNDI，但是池化绝对是错误的。

这是一个可能有效的示例，但如果设置将在 META-INF/context.xml 中，为什么还要使用 JNDI？：

[MyBatis JNDI 示例](http://edwin.baculsoft.com/2011/03/beginning-mybatis-datasource-jndi-and-apache-dbcp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:36:40.930

即使使用 context.xml，它仍然是容器级别的设置。但是，这是一种在单个单元中部署所有内容的便捷方式，而不必在部署 WAR 文件之前创建连接池。

JNDI 旨在保持您的应用程序配置通用。例如，如果您将 WAR 部署到 WebSphere 中，它将忽略 context.xml 文件。但是 WebSphere 将看到您的 web.xml 中有一个 JDNI 资源引用，并引导您创建数据源。与 Tomcat 相同的想法，只是实现方式不同。

如果您 100% 确定此应用程序将仅在 Tomcat 中运行，那么您不必*使用*JNDI。但是，如果您确实移动到另一个容器，它将为您省去麻烦。

# javascript - android中的PayPal按钮不起作用

> ID：13404797
> 
> 赞同：0
> 
> 时间：2012-11-15T19:34:16.410
> 
> 标签：javascript, android, paypal, in-app-purchase, titanium

我正在尝试使用此代码为 android 添加一个 pay-pal 按钮，但它给出了错误。我认为错误是因为此代码适用于 Iphone 而我将它用于 android。是否有人有 android paypal 按钮的代码。代码如下

```
 var PayPal = require('ti.paypal');
     var paypalButton = Titanium.Paypal.createPaypalButton({
     appId:"APP-XXXXXXXXXXX",
     width:100,
  height:30,
  buttonStyle:Titanium.Paypal.BUTTON_68x24,
  paypalEnvironment:Titanium.Paypal.PAYPAL_ENV_SANDBOX,
  feePaidByReceiver:false,
  transactionType:Titanium.Paypal.PAYMENT_TYPE_SERVICE,
  enableShipping:true,
    payment: 
  {
    amount: 15.00,
    tax: 0.00,
    shipping: 5.00,
    currency: "GBP",
    recipient: "test@mail.com",
    itemDescription: "Test",
    senderEmailOrPhone:'test@mail'
    //merchantName: Titanium.App.Properties.getString('storeName')
    }
  }); 
```

我在 tiapp.xml 中添加了这个

```
 <module platform="android" version="2.2.1">ti.paypal</module> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:33:32.303

有一个适用于 android 和 iOS 的 PayPal 的公开开放模块。只需下载此版本：

```
https://marketplace.appcelerator.com/apps/780?1115227925 
```

不知道你从哪里得到你的 2.2.1 版本。要么来自未来，要么来自其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T23:34:59.290

您应该打开 modules/android/ti.paypal/2.2.1/example/simple.js 中提供的示例并将其与您的代码进行比较。当您将模块加载到“var PayPal”时，您遇到的最大错误是尝试执行“Titanium.Paypal”。除此之外，自您的示例所基于的版本以来，API 已经发生了变化。你最好的选择是扔掉你所拥有的，从最适合你需要的例子开始（简单、链接、并行或预先批准）。

# java - Java 操作系统问题

> ID：13404800
> 
> 赞同：0
> 
> 时间：2012-11-15T19:34:21.713
> 
> 标签：java, assembly, operating-system, jvm

好的，我一直在研究汇编语言。我已经知道如何用java编程。我在网上读到，如果你能提供足够的汇编代码来支持 Java 虚拟机，就可以用 Java 编写操作系统。有谁知道 Java 虚拟机从内核/程序集 bin 文件中需要什么？以及如何从汇编代码调用 JVM/使用预定义类启动 JVM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:39:36.093

也许您的意思是[JNode 之](http://www.jnode.org/)类的东西？它是一个用Java编写的完整操作系统。它有一个用汇编程序和 C 编写的小型微内核（称为纳米内核）。此代码取决于硬件。他们还编写了一个 Java 编译器，它将操作系统的 Java 部分编译为本机代码。

我希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:44:57.177

您是否假设您已经拥有操作系统？如果是这样，就启动 JVM 所需的操作而言，您只需要进行系统调用来启动 JVM 应用程序并提供适当的参数。

如果您要问，“我需要编写什么代码才能让操作系统在 JVM 中自行运行？” 然后，引用卡尔萨根的话，“你首先必须发明宇宙。”

Java VM 提供了它所做的许多特性和功能，因为它使用来自底层系统的相同特性并将它们抽象到虚拟机中。因此，Windows JVM 是基于 Windows 功能构建的，而 Linux JVM 是基于 Linux 功能构建的，等等。这意味着，为了在 JVM 中托管您自己的操作系统，您需要编写引导代码以在硬件上托管 JVM，然后用 Java 编写操作系统代码以在 JVM 中运行。

> “有谁知道 Java 虚拟机从内核/汇编 bin 文件中需要什么？”

是的，答案是，无论你想让计算机做什么，你都需要编写代码。文件系统支持、内存管理、线程——托管应用程序会要求 JVM 做的所有事情，Java 会转过身来询问较低级别——在这种情况下是你的代码——去做，所以你必须写下来。

# javascript - 在窗口加载时动态加载 Javascript 函数

> ID：13404801
> 
> 赞同：2
> 
> 时间：2012-11-15T19:34:23.940
> 
> 标签：javascript

是否可以通过设置数组和加载器函数在加载窗口时从单独的 Javascript 文件中动态加载函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:44:34.323

最简单的方法是简单地将`<script>`元素动态添加到 DOM。

```
<script>
var scripts = [ 'a.js', 'b.js', ... ];
for (var i = 0; i < scripts.length; ++i) {
  document.write('<script src="' + scripts[i] + '"></' + 'script>');
}
</script> 
```

请注意，您只能在`DOMContentReady`触发事件之前执行此操作。

BTW event Google Closure Library 使用了这种技术。作为旁注，您可能希望将脚本连接到一个文件中，以便节省您自己（和您的用户）的 HTTP 请求并获得更快的页面加载。

这样做的好处在于，脚本会在结束`</script>`标记之后立即下载和评估，因此您无需等待其他任何内容即可使用它们：

```
<!-- Let's pretend that a.js defines a function A() -->
<script>document.write('<script src="a.js"></' + 'script>');</script>
<script>
var a = new A();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:41:37.727

实际上，我不妨将此作为答案而不仅仅是评论，[require.js](http://requirejs.org/)具有您正在寻找的功能，特别是查看[此](http://requirejs.org/docs/jquery.html)文档页面以查看它在浏览器中的使用。

# c# - TcpListener/TcpClient 在某些情况下会停止处理数据

> ID：13404803
> 
> 赞同：1
> 
> 时间：2012-11-15T19:34:35.207
> 
> 标签：c#, .net, networking, tcp, tcpclient

我有一个问题，根据两个网络设备的启动顺序，我似乎失去了在一端接收数据的能力。

该设置是一个用 C# (.NET 4.0) 编写的小型服务器，它侦听特定端口以获取来自工业扫描仪的数据，通过 TCP 进行通信。扫描器可以很好地连接到服务器应用程序，并将发送服务器接收和处理的小块数据（序列号）。但是，在扫描仪上重新启动（实际上是循环电源，不会正常关闭其连接）会导致服务器停止处理数据。事件的顺序以及导致问题的关键网络流量如下：

```
 SUCCESS                           FAILURE
     |----------------------|             |----------------------|
     |  SCANNER  |  SERVER  |             |  SCANNER  |  SERVER  |
     |----------------------|             |----------------------|
     |           |   Starts |             |  Starts   |          |
     |   Starts  |          |             |           |  Starts  |
     |    Scan   | Received |             |   Scan    | Received |
     |  Restarts |          |             |  Restarts |          |
     --------(Network)-------             --------(Network)-------
     |    SYN    |          |             |    SYN    |          |
     |           | ACK-123  |             |           | SYN ACK  |
     | RST - 123 |          |             |    ACK    |          |
     |    SYN    |          |             |           |          |
     |           |  SYN ACK |             |           |          |
     |    ACK    |          |             |           |          |
     |----------------------|             |----------------------|  
     |    Scan   | Received |             |    Scan   |  !LOST!  |
     |----------------------|             |----------------------| 
```

如您所见，在 SUCCESS 场景中，扫描器重新启动后，服务器以 ACK 响应 SYN，扫描器重置连接，因为它意识到它不在正确的流中。服务器检测到这一点并优雅地处理它。但是，在 FAILURE 场景中，服务器以 SYN ACK、扫描仪 ACK 响应并建立新连接。

该代码没有抱怨任何事情，但是我的 TcpLister/TcpClient 似乎再也没有收到任何数据，即使在 Wireshark 中看到它被接收和确认时也是如此。似乎 TcpListener 和处理程序仍在等待旧连接获取数据？我是这个级别的网络编程的新手（并且对 C# 本身来说相对较新），所以一定要指出我是否遗漏了一些明显的东西。

服务器的代码片段：

```
public void Run() 
 {
   while (!shutdown)
   {
     shutdown = false; // Reset
     listenerServer = new TcpListener(IPAddress.Any, scanner.Address.Port);

     try
     {
       listenerServer.Start();
       TcpClient handler = listenerServer.AcceptTcpClient();

       while (true)
       {
         try
         {
           incomingData = null;
           dataBuffer = new Byte[256];
           NetworkStream stream = handler.GetStream(); // blocks here
           int i;

           while ((i = stream.Read(dataBuffer, 0, dataBuffer.Length)) != 0)
           {
             incomingData += Encoding.ASCII.GetString(dataBuffer, 0, i);
             int startIndex = incomingData.IndexOf(startMarker);
             int endIndex = incomingData.IndexOf(endMarker);
             if (startIndex > -1 && endIndex > -1)
             {
               string serialData = incomingData.Substring(startIndex + 1, endIndex - startIndex - 1);
               scanner.ProcessDataChange(serialData);
             }
           }
         }
         catch (IOException e)
         {
           // Deals with SocketExceptions here...
         }
         finally
         {
           handler.Close();
         }
       }
     }
     catch (SocketException e)
     {
       listenerServer.Stop();
       listenerServer = null;
     }
     finally
     {
       listenerServer.Stop();
       listenerServer = null;
     }
   }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:28:15.357

用户[@LB (L. B)](https://stackoverflow.com/users/932418/l-b)回答了一个问题，但认为它可能无关紧要而将其删除。事实上，这是对这个问题的一个很好的回答，所以我在这里重新发布它。最后，我没有听到正在建立的新联系。*如果 L. B 希望重新发布他的答案，我很乐意接受。*

## **转发 L. B 的回答**

您只接受一个连接 TcpClient handler = listenerServer.AcceptTcpClient();

当第一个连接关闭时，您不再接受连接。你应该把它移到while循环中。

**编辑**

这不是您问题的直接答案。但我尝试了下面的代码，它运行良好。如果你愿意，你可以试试。稍后我将删除此答案。

```
 void Run()
 {
     TcpListener listener = new TcpListener(IPAddress.Any, 12345);
     listener.Start();

    Task.Factory.StartNew(() =>
    {
        while (true)
        {
            var client = listener.AcceptTcpClient();
            Task.Factory.StartNew(() => Handler(client), TaskCreationOptions.LongRunning);
        }
    }, TaskCreationOptions.LongRunning);
 }

 void Handler(TcpClient client)
 {
     using (NetworkStream stream = client.GetStream())
     {
         var dataBuffer = new Byte[256];
         int i;
         while ((i = stream.Read(dataBuffer, 0, dataBuffer.Length)) != 0)
         {
             // Processes data here..
             //var s = Encoding.UTF8.GetString(dataBuffer, 0, i);
             //Console.Write(s);

         }
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:01:38.143

这类事情的通常原因是希望保留 tcp 发送和接收边界。即您发送一个块并期望在服务器上接收相同的块。这不能保证会发生，并且由于您没有显示您的代码，我无法判断您是否依赖它

# ruby-on-rails - 用于创建的简单 Mongoid 验证！- 如何显示错误信息

> ID：13404807
> 
> 赞同：5
> 
> 时间：2012-11-15T19:34:52.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我正在使用带有 mongoid 2 的 Rails 3，并且有一个关于 mongoid 验证的简单问题。

```
if @forum.topics.create!(name: params[:topic][:name])
   # success, do something
else
  #should handle errors but doesn't
    render 'new'
end 
```

如果我使用 .create! 方法，它在 mongoid 模型类上正确运行验证，但它没有到达 else 块来显示错误。相反，它返回一个rails错误页面，说......

TopicsController#create 中的 Mongoid::Errors::Validations

验证失败 - 名称不能为空。

这很好，但是我如何在视图中显示它而不是获得丑陋的 Rails 错误消息页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T19:42:55.697

试试这个方法：

```
new_topic = @forum.topics.new(name: params[:topic][:name])
if new_topic.save
   # success, do something
else
  render 'new', errors: new_topic.errors.full_messages
end 
```

通过这种方式，您将拥有`errors`一个 Hash 格式的局部变量，如下所示：

```
new_topic.errors.full_messages # => ["\"Name\" can't be blank"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T10:46:53.850

你可以拯救 Mongoid::Errors::Validations 并使用它的实例方法来获取错误

```
new_topic = @forum.topics.new(name: params[:topic][:name])
new_topic.create!
rescue Mongoid::Errors::Validations => e
  summary = e.summary
  problem = e.problem
  res = e.resolution 
```

使用上述错误消息，您可以显示错误

文档链接 [https://docs.mongodb.com/mongoid/6.2/api/Mongoid/Errors/Validations.html](https://docs.mongodb.com/mongoid/6.2/api/Mongoid/Errors/Validations.html)

# mercurial - Mercurial hglock 扩展不适用于中央回购

> ID：13404809
> 
> 赞同：0
> 
> 时间：2012-11-15T19:35:03.300
> 
> 标签：mercurial

有人用过较新的 hglock 扩展吗？我无法让它与远程（中央）存储库一起工作。Hglock 说它不是本地的。我没有的一件事是在中央存储库服务器上安装 hglocks。

所以我的问题是：你如何真正使用这个扩展？

我执行了 init-locks，锁定跟踪文件是在我的本地仓库克隆中创建的，而不是在服务器上创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:22:05.560

[我在问题 #11](https://bitbucket.org/lantiq/hglock/issue/11/hglock-not-compatible-with-newest-hg)中有一个潜在的修复，但我没有使用早期版本的 Mercurial 对其进行测试。

通过返回对等点而不是 repo 可能会产生其他后果 - 例如，它破坏了克隆本地 repo（我在问题中也得到了修复）。这可能会导致其他问题。

# c - 如何从 C 中弹出/清除 Lua 调用堆栈

> ID：13404810
> 
> 赞同：3
> 
> 时间：2012-11-15T19:35:05.267
> 
> 标签：c, lua, cunit

我想在从 Lua 调用的 C 函数中弹出/清理 Lua 调用堆栈。这可能吗？

**背景：**
我希望我的 C 库及其扩展脚本使用相同的测试框架。（我知道 Lua 存在各种单元测试工具。我不在乎；我想要一份报告）我将 CUnit 包装在 Lua 的薄层中。CUnit 提供了致命和非致命测试断言的选择。致命断言会导致立即`longjmp`退出测试并返回到框架运行程序。如果我不先清理堆栈，这似乎会对 Lua VM 造成不利影响。

堆栈可能看起来像：

```
#0\. C:   assert_wrapper_fcn(test, fatal)
#1\. Lua: assert_fcn(bool)
#2\. Lua: test_fcn()
#3\. C:   runner(&test_fcn) 
```

我想清理 #0 和 #3 之间的所有内容。`test_fcn()`我知道and的方法签名`assert_fcn(bool)`，仅此而已。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T20:36:40.447

清空堆栈真的很容易。只需使用`lua_settop`0 作为参数。

```
lua_settop(L, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:43:34.120

不确定我是否完全正确地理解了这个问题......但是要清除 Lua 的堆栈：

```
int stackSize = lua_gettop(L);
lua_pop(L, stackSize); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T14:40:43.160

我的建议是使用 Lua 自己的断言系统，然后在你的运行器中捕获它，然后将错误转发到你的单元测试框架：

使用 启动你的 Lua 代码`lua_pcall`。

在您的 Lua 代码中，使用标准`assert`命令触发致命错误。

从您启动 Lua 代码的位置，检查结果，`lua_pcall`当您获得 != 0 时，触发您的 CUnit 致命断言失败。

这将避免在 Lua 和 CUnit 之间混合任何 longjmp。

# java - Spring 3 bean 未正确连接

> ID：13404813
> 
> 赞同：0
> 
> 时间：2012-11-15T19:35:24.533
> 
> 标签：java, spring, spring-mvc, web

我有一个 Web 控制器，我在 controller-config.xml 中使用

```
<mvc:annotation-driven />
<context:annotation-config />
<context:component-scan base-package="com.ecommerce.web.controller" /> 
```

控制器具有@Controller 注释，如下所示。

```
@Controller
public class HomeController 
```

我在依赖项中包含了@Autowired 注释，但是当我第一次启动应用程序时，我无法在有线对象上设置任何属性。

例如，我有一个 storeProfile 对象，当它处于调试模式时，我看到它设置了多个属性。但是，当我尝试在 @Autowried bean 上设置其中一个 storeProfile 属性时，它仍然是 null 或空字符串！？

如果您查看附加的图像，它表明在我越过 this.storeProfileContext.setStoreProfile(storeProfile) 行之后，调试器仍将 storeProfile 属性显示为 null

实际上，有几个依赖项看起来像是创建的（它们不是 null 和应用程序函数），但我无法在这些对象上设置任何内容。

我也在 Spring 论坛上问过同样的问题——希望能弄清楚这一点。

非常感谢！

![调试器屏幕截图](../Images/abac4f49a3ea093e5b8448c59caaa61a.png)

![豆配置](../Images/c00caf6db0a0e77b72e62fe971c5e6c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:39:08.937

这是因为您正在查看代理的字段，该字段是在您拥有时创建的`<aop:scoped-proxy/>`，如果您为设置值调用 getter，您应该会看到从代理对象中检索到的正确值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:39:01.667

您正在检查的实例是 CGLIB 代理。

CGLIB 子类化您的 bean，将所有方法调用委托给目标 bean。

所以超类的字段仍然存在但未使用。

# python - 如何拥有具有动态数量的相关对象的 ModelForm？

> ID：13404814
> 
> 赞同：0
> 
> 时间：2012-11-15T19:35:32.717
> 
> 标签：python, django, django-models, django-forms

这是我的模型的设置方式：

```
class ModelA(models.Model):
    user = models.ForeignKey(User)
    modelB = models.ForeignKey('ModelB', related_name='modelB')
    # more fields here

class ModelB(models.Model):
    user = models.ForeignKey(User)
    # more fields here 
```

两个类中的用户字段只是为了让同一用户稍后可以查询这两个字段。

我有一个 ModelB 的 ModelForm，我希望用户能够用动态数量的 ModelA 实例填写一个 ModelB ModelForm。我希望 ModelB 的表格从填写 1 个 ModelA 实例开始，然后用户应该能够将更多 ModelA 添加到 ModelB 的表格中。

我坚持将其作为个人项目，并且真的很想继续前进。谢谢你的帮助！

编辑1：我知道我很可能需要通过重载 ModelForms 来做一些工作`def __init__`，但这就是我所得到的。此外，我正在使用 ClassBasedGeneric 视图（CreateView 让添加工作和 EditView 稍后），但如果需要，我愿意远离它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:22:03.500

您需要[django 内联表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)

鉴于：

```
f_set = inlineformset_factory(ModelB, ModelA, extra=1) 
```

在模板中，假设您正在渲染 form_set，`div`其 id 为`one_to_many`：

```
<form>
   <div id="one_to_many">
       {{f_set.as_table}}
   </div>
</form>

#This will render some thing like this
<form>
    <div id="one_to_many">
        <table>
            <tr>
               <th>
                   <label for="id_form-0-field_name">Field Name:</label>
               </th>
               <td>
                  <input id="id_form-0-field_name" type="text" name="form-0-field_name" value="" maxlength="100" />
                  <input type="hidden" name="form-0-id" value="1" id="id_form-0-id" />  
                </td>
            </tr>
        </table>
        <input type="button" value="Add More Field" id="add_more">
    </div>
</form> 
```

现在`jquery`动态添加字段的部分：

```
$(document).ready(function(){
        $('#add_more').click(function(){
            var tbl = $('#one_to_many').children('table');
            var last_id = parseInt(tbl.find('input[type=hidden]').last().val());
            var next_id = last_id + 1;
            htm = '<tr><th><label for="id_form-'+last_id+'-field_name">Field Name:</label></th><td><input id="id_form-'+last_id+'-field_name" type="text" name="form-'+last_id+'-field_name" value="" maxlength="100" /><input type="hidden" name="form-'+last_id+'-id" value="'+next_id+'" id="id_form-'+last_id+'-id" /></td></tr>'
            tbl.find('tr').last().after(htm);

        });    
    }); 
```

您可以在[jsfiddle](http://jsfiddle.net/Dq4gR/)上对此进行测试。请注意，这仅在您呈现表单时才有效`as_table`

# ajax - AjaxOptions 的 OnComplete 永远不会被触发，我也没有收到任何错误！为什么？

> ID：13404817
> 
> 赞同：0
> 
> 时间：2012-11-15T19:35:59.330
> 
> 标签：ajax, asp.net-mvc

使用 ajax.ActionLinkall 可以正常工作，但永远不会触发 OnComplete 函数。

代码是：

```
@Ajax.ActionLink(User.Identity.Name,"UserSettings","Account",   new AjaxOptions() { HttpMethod = "Get", UpdateTargetId = "conteudoDinamico", OnComplete=" _loadDialogSettings " }) 
```

我没有收到任何错误，只有函数 _loadDialogSettings 从未被调用。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:13:10.870

如果这是从您的页面直接复制和粘贴，我注意到您的`OnComplete`回调名称有空格，即

```
" _loadDialogSettings " 
```

如果这些也在您的代码中，请尝试删除它们，即

```
"_loadDialogSettings" 
```

# php - 推荐人=类别？

> ID：13404825
> 
> 赞同：0
> 
> 时间：2012-11-15T19:36:43.763
> 
> 标签：php, wordpress, referer

我已经成功跟踪了点击的来源，然后根据点击的来源让我的网站显示元素。一个代码示例是这样的：

```
$referer = $_SERVER['HTTP_REFERER'];

if ( $referer == "http://www.testdomain.com/testpage" ) {
echo '<div id="bgphotos"></div>';
} else {
    echo '<div id="bgvideos"></div>';
} 
```

[所以这告诉我的网站如果从http://www.testdomain.com/testpage](http://www.testdomain.com/testpage)点击它就显示 bgphotos div 。这很棒。我什至做了更多的编码来跟踪在网页中点击某些 div 的位置。但是，如果从类别中单击它，我想显示一个元素。

现在，我认为解决方案就是将 $referer 更改为类别网页。但问题是，当该类别的帖子超过一页时，您将不得不手动跟踪每个类别的页码......这将永远需要......一个例子是：

```
if ( $referer == "http://www.testdomain.com/category/test/" ) {
//do this }

if ( $referer == "http://www.testdomain.com/category/test/page/2/" ) {
//do this }

if ( $referer == "http://www.testdomain.com/category/test/page/3/" ) {
//do this }

if ( $referer == "http://www.testdomain.com/category/test/page/4/" ) {
//do this } 
```

如您所见，这将失控，我将不得不跟踪每个可能的类别页面。那么有什么办法可以说，只是跟踪是否从某个类别中单击了某些内容？或者有没有其他解决这个问题的方法？

任何帮助将不胜感激！:) 大声笑。它真的会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:38:20.520

正则表达式会起作用。

```
if( preg_match("(^http://www\.testdomain\.com/category/test/(?:page/\d+/)?$)",$referer)) {
    // do this
} 
```

# asp.net-mvc - Knockout foreach 绑定只显示第一个虚拟元素数据

> ID：13404833
> 
> 赞同：1
> 
> 时间：2012-11-15T19:37:40.047
> 
> 标签：asp.net-mvc, knockout.js, asp.net-web-api

在网格上列出虚拟元素属性时，我在淘汰赛的 foreach 绑定方面遇到了一些问题。

尽管 web api 按预期返回 JSON 数据，但敲除未正确显示虚拟元素属性。

我的 UI 显示产品列表，其中一个列是`ProductCategory.Name`. 由于某种原因，它只显示每个产品类别的第一次出现。

```
名称类别

Pr01 Cat01
Pr02        
Pr03 Cat02
Pr04 Cat03
Pr05        

```

第 2 和第 5 产品也是“Cat01”类别的产品。但由于某种原因，它不会为他们显示。

我有以下模型：

```
public class Product
{
    [ScaffoldColumn(false)]
    public int ProductId { get; set; }

    public string Name { get; set; }
    public int ProductsCategoryId { get; set; }

    public virtual ProductsCategory ProductCategory { get; set; }
}

public class ProductsCategory
{
    public int ProductsCategoryId { get; set; }

    public string Name { get; set; }
} 
```

这就是我绑定网格的方式：

```
<tbody data-bind="foreach: products">
    <tr>            
        <td class="left" data-bind="text: $data.Name"></td>
        <td class="left" data-bind="text: $data.ProductCategory.Name"></td>
    </tr>
</tbody> 
```

这是 JSON：

```
[{
    "$id": "1",
    "ProductCategory": {
        "$id": "2",
        "ProductsCategoryId": 1,
        "Reference": "OSOL                            ",
        "Name": "Óculos de Sol",
        "ProductsCategoryStatusId": 1
    },
    "ProductId": 3,
    "Reference": "HTHTOD                          ",
    "BarCode": "2122071530085                   ",
    "Name": "Thin Hard Trivex OD",
    "Description": null,
    "ProductsBrandId": 1,
    "ProductsCategoryId": 1,
    "ProductsSupplierId": 1,
    "ProductStatusId": 1
}, {
    "$id": "3",
    "ProductCategory": {
        "$ref": "2"
    },
    "ProductId": 4,
    "Reference": "HTHTOE                          ",
    "BarCode": "2122071531163                   ",
    "Name": "Thin Hard Trivex OE",
    "Description": "null",
    "ProductsBrandId": 1,
    "ProductsCategoryId": 1,
    "ProductsSupplierId": 1,
    "ProductStatusId": 1
}, {
    "$id": "4",
    "ProductCategory": {
        "$id": "5",
        "ProductsCategoryId": 2,
        "Reference": "OGRAU                           ",
        "Name": "Óculos de Grau",
        "ProductsCategoryStatusId": 1
    },
    "ProductId": 10,
    "Reference": "HTHTOX                          ",
    "BarCode": "2123180206342                   ",
    "Name": "Thin Hard Trivex OX",
    "Description": null,
    "ProductsBrandId": 2,
    "ProductsCategoryId": 2,
    "ProductsSupplierId": 1,
    "ProductStatusId": 1
}, {
    "$id": "6",
    "ProductCategory": {
        "$id": "7",
        "ProductsCategoryId": 3,
        "Reference": "LNTS                            ",
        "Name": "Lentes",
        "ProductsCategoryStatusId": 1
    },
    "ProductId": 16,
    "Reference": "HTHTOY                          ",
    "BarCode": "2123192208431                   ",
    "Name": "Thin Hard Trivex OY",
    "Description": null,
    "ProductsBrandId": 4,
    "ProductsCategoryId": 3,
    "ProductsSupplierId": 1,
    "ProductStatusId": 1
}, {
    "$id": "8",
    "ProductCategory": {
        "$ref": "2"
    },
    "ProductId": 12,
    "Reference": "HTHTOZ                          ",
    "BarCode": "2123192059538                   ",
    "Name": "Thin Hard Trivex OZ",
    "Description": null,
    "ProductsBrandId": 1,
    "ProductsCategoryId": 1,
    "ProductsSupplierId": 1,
    "ProductStatusId": 1
}] 
```

如您所见，`ProductsCategory`数据出现一次，然后被同一类别中的下一个产品引用。

关于如何解决此问题以显示网格上所有元素的类别名称的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:24:34.437

您的 json 采用淘汰赛无法理解的格式。产品类别仅被传输一次，第二次传输产品类别时，它包含对第一次的“引用”。

请参阅下面具有 id:3 的对象（错误示例）。

```
"$id":"3",
"ProductCategory":{"$ref":"2"} 
```

下面的诗句是正确的。

```
"$id":"1",
"ProductCategory":{"$id":"2","ProductsCategoryId":1,"Reference":"OSOL ","Name":"Óculos de Sol","ProductsCategoryStatusId":1} 
```

更新：如何处理上述非标准 json。

我看了一下示例项目。它在 \ProductStore\App_Start\WebApiConfig.cs 中有以下内容

```
var json = config.Formatters.JsonFormatter;
            json.SerializerSettings.PreserveReferencesHandling =
                Newtonsoft.Json.PreserveReferencesHandling.Objects; 
```

据此，[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)，保留对象引用会产生非标准的json，大多数人都不能使用客户。

获得允许淘汰赛工作的标准json。

```
var json = config.Formatters.JsonFormatter;
            json.SerializerSettings.PreserveReferencesHandling =
                Newtonsoft.Json.PreserveReferencesHandling.None;  //this needs to be None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:12:21.100

您需要`ProductCategory`根据它们的 id 创建对象的映射。这样，当您渲染类别时，您可以从地图中获取正确的类别。

您可以将您的产品映射到解析引用的位置，或者您可以创建一个按需解析这些引用的函数。我为这个例子选择了后一种方法。

```
function ViewModel(data) {
    var self = this,
        productCategories = function (products) {
            var map = {};
            // throw all categories (with ids) into the map
            ko.utils.arrayForEach(products, function (item) {
                var category = item.ProductCategory;
                if (category.$id) map[category.$id] = category;
            });
            return map;
        } (data.products);

    self.products = ko.observableArray(data.products);

    self.getProductCategory = function (product) {
        var productCategory = product.ProductCategory,
            ref = productCategory.$ref;
        // get the referenced category
        if (ref) productCategory = productCategories[ref];
        return productCategory;
    }
} 
```

然后像这样绑定它：

```
<tbody data-bind="foreach: products">
    <tr>            
        <td class="left" data-bind="text: Name"></td>
        <td class="left" data-bind="text: $root.getProductCategory($data).Name"></td>
    </tr>
</tbody> 
```

[演示](http://jsfiddle.net/jeff1203/hmMBB/)

# jquery - 供应商目录中的资产未在 Rails 中使用 require_tree 加载

> ID：13404834
> 
> 赞同：1
> 
> 时间：2012-11-15T19:37:41.267
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

我正在使用 Rails 3.2.9。我有一些我使用的 Javascript/jQuery 库，所以我将它们放在`/app/assets/javascripts`. 它们会自动加载并且一切正常，因为我有以下清单`application.js`：

```
//= require_tree . 
```

但后来我读到我应该把这些东西放进去`/vendor/assets/javascripts`。默认情况下，该目录已创建，但为空。所以我把我的第 3 方图书馆搬到了那里。例如，我可以使用 访问它们`http://0.0.0.0:3000/assets/jquery.qtip.min.js`。但是，它们现在并未包含在每个网页中。似乎`require_tree .`需要更多帮助才能包含供应商 javascript。

在 Rails 中包含 3rd 方 javascript/jQuery 库的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:10:38.047

在您的`application.js`文件中，您应该添加`//= require filename`. 例如，我有一个名为的文件`jquery.markitup.js`，`vendor/assets/javascripts/`所以这就是我添加它的方式：

```
...
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require jquery.markitup
//= require_tree . 
```

# activerecord - 活动记录中的深度嵌套连接

> ID：13404843
> 
> 赞同：13
> 
> 时间：2012-11-15T19:38:50.200
> 
> 标签：activerecord

我正在尝试优化我整个网站的查询。

我有 3 个模型，照片，人物，外观

照片有_many外观，而很多人通过appearances表只有一个person_id，photo_id

现在，如果我要搜索“人”并且我想急切地加载他们的外表和照片，我会做这样的事情：

```
 Person.joins(:appearances => :photo).limit(5) 
```

现在，我不确定这是否理想，但假设我的人具有属于照片的外观，而照片又具有外观和其他人。我什至不知道您是否或如何在 vanilla SQL 中执行此操作，但我只是好奇这是否可能。

```
 Person.joins(:appearances => :photo => :appearaces => :person).limit(5) 
```

这种语法再次导致错误，我只是好奇，我正在处理在我的视图中获取照片的外观和人物，我只是想尝试加载时间，看看这是否可能。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T19:57:31.007

对于“急切加载”，您使用`.include`; `.join`用于执行 INNER JOIN 功能。对于您的情况，您似乎可能会同时使用两者（加入获取照片，包含获取更多人）。我提出这一点是因为`.join`单独不会执行急切加载（因此它会在访问关联实体时进行查询）。

如果您希望预先加载嵌套关联，可以使用[http://guides.rubyonrails.org/active_record_querying.html#eager-loading-multiple-associations上的 Ruby on Rails 指南中概述的语法](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-multiple-associations)

这些方面的东西会起作用吗？

```
Photo.joins(:appearances => :person).includes(:appearances => :person).limit(5) 
```

还是你需要从人开始？

```
Person.joins(:appearances => :photo).includes(:appearances => :photo => :appearaces => :person).limit(5) 
```

另外，作为最后（小）注意事项：您的最后一行代码中的“:appearances”拼写错误（它表示“:appearaces”），这可能会导致问题。

**编辑：** 经过一些小测试后，似乎将包含关联嵌套在

```
a => b => c => b => a 
```

表格不起作用。但是，以下表格可以：

```
a => [b => [c => [b => a]]] 
```

虽然，当然，它并不那么漂亮。

意思是，使用以下代码：

```
Person.includes(:appearances => [:photo => [:appearances => :person]]).find(38) 
```

生成了以下 SQL：

```
Person Load (0.3ms)  SELECT `persons`.* FROM `persons` WHERE `persons`.`id` = 38 LIMIT 1
Appearance Load (0.3ms)  SELECT `appearances`.* FROM `appearances` WHERE (`appearances`.person_id = 38)
Photo Load (0.3ms)  SELECT `photos`.* FROM `photos` WHERE (`photos`.`id` = 1904)
Appearance Load (0.3ms)  SELECT `appearances`.* FROM `appearances` WHERE (`appearances`.photo_id = 1904)
Person Load (0.3ms)  SELECT `persons`.* FROM `persons` WHERE (`persons`.`id` IN (38,346)) 
```

渴望从所有包含 id #38 的人的照片中加载额外的人

# r - 修复源的缩进并使其干净

> ID：13404847
> 
> 赞同：3
> 
> 时间：2012-11-15T19:39:01.487
> 
> 标签：r, indentation

是否有任何合适的程序来修复已经编写的 R 脚本的缩进？

例如，如果它被输入这样的脚本：

```
foo = function(x) {
a = 1
    print(a)
 } 
```

它将其转换为：

```
foo = function(x) {
    a = 1
    print(a)
} 
```

或更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T19:39:57.857

是的，使用亿辉的[formatR](http://cran.r-project.org/package=formatR)包。

之前和之后的演示：

```
R> system("cat /tmp/fex.R")
foo = function(x) {
a = 1
    print(a)
 }
R>
R> library(formatR)
R> tidy.source("/tmp/fex.R",replace.assign=TRUE)
foo <- function(x) {
    a <- 1
    print(a)
} 
R> 
```

您当然可以使用重定向到新文件`tidy.source(..., file="NewFile.R")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T20:40:24.097

除了 Dirk 的回答之外，大多数体面的编辑器还允许您更正脚本的缩进。例如，在 RStudio 中，如果您打开了脚本，您可以使用`Ctrl`+`i`来更新所选内容的缩进。

# c# - DynamicNodeProviderBase 中的 MvcSiteMapProvider 和 StructureMap？

> ID：13404855
> 
> 赞同：1
> 
> 时间：2012-11-15T19:39:29.200
> 
> 标签：c#, dependency-injection, structuremap, mvcsitemapprovider

我正在尝试[使用`MvcSiteMapProvider`](https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps).

问题是那`_jobService`是空的，我做错了什么？我在`IJobService`其他地方使用，所以它配置正确，例如

```
x.For<IJobService>().Use<JobService>(); 
```

这是我的代码：

```
private IJobService _jobService
{
        get
        {
            return DependencyResolver.Current.GetService<IJobService>();
        }
}

public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
{
        List<JobViewModel> activeJobs = _jobService.GetJobs().ToList();

        // Create a node for each job
        foreach (var job in activeJobs)
        {
            var node = new DynamicNode();
            node.Title = job.Title;
            node.RouteValues.Add("id", job.Id);

            yield return node;
        }
} 
```

此代码仅在我使用它创建时运行一次，`sitemap.xml`因此它创建了一些节点，然后在涉及动态节点时出错。如果我在错误后刷新页面，我会看到创建的`sitemap.xml`（减去动态节点，例如`/job/1`, `/job/2`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T22:26:31.813

我不确定到底是什么问题，但我怀疑它与初始化顺序有关——也就是说，站点地图是在运行 DI 容器配置代码之前构建的。

这已在 MvcSiteMapProvider v4 中修复，因为我们现在使用 DI 来配置整个提供程序，并删除了对 Microsoft 的 SiteMapProvider 模型的依赖。该提供程序模型是 MvcSiteMapProvider 几乎所有令人头疼的问题（缓存、DI、性能、线程、初始化等）的根源。

# java - Java 参数多态性示例

> ID：13404865
> 
> 赞同：0
> 
> 时间：2012-11-15T19:39:57.637
> 
> 标签：java, generics, polymorphism

我有一个关于参数多态性的问题。如果我有一个混合了子类型的集合，如何确定实际类型并避免强制转换。例如

```
 class Animal{

    }

    class Bird extends Animal{
          void fly(){}
    }

    class Dog extends Animal{
          void bark(){}
    }

    ArrayList<Animal> list = new ArrayList<Animal>(); 
```

问题是当我遍历 Animal 集合时如何知道哪个是哪个。我是否需要每次都使用 instanceof 来检查实际类型？

```
 for(Animal animal : list){
          if(animal instanceof Dog){
                ((Dog) animal).bark();
          } 
          else ((Bird) animal).fly();             
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T19:42:06.570

如果你需要这样做，那就意味着这是一个常见的动作。你通常会有这个：

```
abstract class Animal {
     abstract void act();
}

class Bird extends Animal{
      void fly(){}
      void act(){
         fly();
      }
}

class Dog extends Animal{
      void bark(){}
      void act(){
         bark();
      }
} 
```

在您的循环中，您只需调用该`act`方法：

```
for(Animal animal : list){
    animal.act();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:43:50.660

你不应该有这样的清单。其他`instanceof`（或`.getClass()`），后跟向下转换是唯一的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:45:38.950

使用`instanceof`会破坏泛型的目的。泛型的重点是定义行为，这样您就不必关心类型是什么。例子：

```
public interface Animal {
    void speak();
    void fly();
}

public class Dog implements Animal {
    public void speak() {
        System.out.println("Woof!");
    }
    // Do nothing!
    public void fly() { }
}

public class Bird implements Animal {
    public void speak() {
        System.out.println("Tweet!");
    }
    public void fly() {
        System.out.println("I'm flying!!");
    }
}

public static void main (String[] args) {
    // list populating removed
    for(Animal animal : list) {
        animal.speak();
        animal.fly();
    }
} 
```

看？您实际上并不关心动物在运行时是什么类型。你让对象做他们应该做的事情。

顺便说一句，如果您确实只想`Bird`拥有一个`fly()`方法，那么您就不会尝试在...`fly()`的所有实例上调用该方法，`Animal`您会有不同的`List<Bird>`

# java - ocpjp 示例问题中的比较器问题

> ID：13404870
> 
> 赞同：2
> 
> 时间：2012-11-15T19:40:09.710
> 
> 标签：java, java-7, comparator, ocpjp

我目前正在准备 Java SE 7 程序员考试，并尝试解决 Oracle 站点上的示例问题。我被困在这个：

```
import java.util.*;
    public class Primes2 {
        public static void main(String[] args) {
            Integer[] primes = {2, 7, 5, 3};
            MySort ms = new MySort();
            Arrays.sort(primes, ms);
            for(Integer p2: primes)
                System.out.print(p2 + " ");
        }
     static class MySort implements Comparator {
         public int compare(Integer x, Integer y) {
             return y.compareTo(x);
         }
     }
} 
```

结果是什么？

一）2 3 5 7

B) 2 7 5 3

三）7 5 3 2

D) 编译失败。

E) 运行时抛出异常。

问题可以在这里找到：[http ://education.oracle.com/pls/web_prod-plq-dad/db_pages.getpage?page_id=303&p_certName=SQ1Z0_804](http://education.oracle.com/pls/web_prod-plq-dad/db_pages.getpage?page_id=303&p_certName=SQ1Z0_804)

网站上显示的正确答案是 C。我测试了代码，发现它没有编译，因为 Comparator 是参数化的，并且在给定的代码中没有指明类型，因此编译器期望 Object 参数用于 compare 方法。当我将 Comparator 更改为 时`Comparator<Integer>`，错误已解决，并且按预期工作。

我的问题是原始代码中的声明是否尊重 Java 7 的标准并且*应该*编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:51:43.120

实际上，这不会编译。

为了有效，要么`Comparator`必须键入为，`Comparator<Integer>`要么`compare()`方法参数必须是`Object`类型。

因此，该试题无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T00:23:13.780

这个问题是有效的，正确的答案是“D）编译失败”。

如果您检查带有问题的页面页面，您可以在其底部找到答案，并且此问题标记为 D

# php - 读取 .csv 文件并将其值保存在数组列表中

> ID：13404873
> 
> 赞同：0
> 
> 时间：2012-11-15T19:40:23.550
> 
> 标签：php, csv

我是 php 编程的新手，但我已经被这段代码困住了一段时间。我想逐行读取 .csv 文件，然后将其值保存在数组列表中。

```
$file = fopen('Sub-Companies.csv', 'r');    
while (($line =
fgetcsv($file)) !== FALSE) { 
print_r($line);
list($customer_id[],$company_name[],$department[],$employee[],$country[],$zipcode[],$address[],$city[],
$smth1[], $smth2[], $phone_no1[],$phone_no2[],$email[],$website[],
$customer_no[],$problem1[],$problem2[]) = explode(";",$line);  }
fclose($file); var_dump($customer_id); 
```

问题是，尽管正确读取了文件，但爆炸不起作用并且数组似乎为空。

我正在考虑的一件事是一些数组有更多的“;” 比其他人，所以这可能是一个问题，这就是为什么我有数组 $problem1 和 $problem2，以便存储这个数组的值。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:22:03.077

你用`fgetcsv()`错了方法。

我们[在 StackOverflow 上聊天](https://chat.stackoverflow.com/rooms/19600/discussion-between-comfreek-and-dimitra-micha)时来到了这个解决方案。

```
<?php
// Create file data.csv with your data
$handle = fopen('Sub-Companies.csv', 'r');

$customer_id = array();
$xyz_array = array();
// ...

// Better use a specified length (second parameter) instead of 0
// It slows down the whole process of reading the data!
while (($line = fgetcsv($handle, 0, ';')) !== FALSE) {
  $customer_id[] = $line[0];
    $xyz_array[] = $line[1];
} 
```

# jquery - 列表的自动分隔符

> ID：13404876
> 
> 赞同：1
> 
> 时间：2012-11-15T19:40:25.880
> 
> 标签：jquery, jquery-mobile

我正在创建一系列项目，包括名字和姓氏。该列表按姓氏排序。您如何创建按姓氏划分列表项的自动分隔符？

```
<div class="listWrap">
    <div id="userFilter">
        <ul id="usersListView" data-bind="template: {name: 'usersListTemplate', foreach: users}" data-role="listview" data-filter="false" data-filter-placeholder="enter a colleague's name...">
        </ul>
    </div>
    <script id="usersListTemplate" type="text/html">
        <li data-theme="h" data-bind="click: $parent.UserInfo" class="clickableRow">
            <table>
                <tr class="colleague">
                    <td>
                        <table>                         
                            <tr><td><span style="font-size:20px" class="firstname_" data-bind="text: firstname"></span>&nbsp;<span style="font-size:20px" data-bind="text: lastname"></span></td></tr>
                            <tr><td><a data-bind="text: email, attr: { href: 'mailto:'+email()}, click: $parent.alwaysTrue, clickBubble: false"></a></td></tr>
                        </table>
                    </td>
                </tr>
            </table>
        </li>
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:37:57.813

*要为自动分隔符使用自定义*文本，您需要做一些事情。

*   您需要添加`data-autodividers="true"`到`ul`
*   您需要指定一个`autodividersSelector`输出自动分隔符文本的函数
*   您需要刷新列表视图

例如，给定以下标记的简化版本

```
 <div data-role="page" id="pageAutoDiv">
    <div data-role="header"><h3>Header</h3></div>
    <div data-role="content">
      <ul data-autodividers="true" id="usersListView" data-role="listview">
        <li> <span class="firstname_">Francisca  </span>&nbsp;<span  class="lastname" data-bind="text: lastname">Fidler</span></li>
        <li><span class="firstname_">Jolie  </span>&nbsp;<span class="lastname" data-bind="text: lastname">Jarnagin</span></li>
        <li><span class="firstname_">Quiana </span>&nbsp;<span class="lastname" data-bind="text: lastname">Quiroz</span></li>
      </ul>      
    </div>
    <div data-role="footer"><h4>Footer</h4></div>
  </div> 
```

您可以使用以下 JavaScript 使用姓氏创建自动分隔符

```
$('#pageAutoDiv').bind('pageshow', function () {
    $('#usersListView').listview({
        autodividers: true,
        autodividersSelector: function (li) {
            return $(li).find('.lastname').text();
        }
    });

    $('#usersListView').listview('refresh');
}); 
```

这是一个[jsBin](http://jsbin.com/irixat/1/edit)的链接（使用更多的标记）

# r - 向表或数据框列表中的每个元素添加新列

> ID：13404877
> 
> 赞同：56
> 
> 时间：2012-11-15T19:40:33.567
> 
> 标签：r

我有一个文件列表。我还有一个“名称”列表，我`substr()`来自这些文件的实际文件名。我想为列表中的每个文件添加一个新列。此列将包含“名称”中的相应元素，重复次数为文件中的行数。

例如：

```
df1 <- data.frame(x = 1:3, y=letters[1:3])
df2 <- data.frame(x = 4:6, y=letters[4:6])
filelist <- list(df1,df2)
ID <- c("1A","IB") 
```

伪代码

```
 for( i in length(filelist)){

       filelist[i]$SampleID <- rep(ID[i],nrow(filelist[i])

  } 
```

// 基本上在filelist中的每个数据帧中创建一个新列，并用重复的ID对应值填充该列

我的输出应该是这样的：

`filelist[1]`应该：

```
 x y SAmpleID
 1 1 a       1A
 2 2 b       1A
 3 3 c       1A 
```

`fileList[2]`

```
 x y SampleID
 1 4 d       IB
 2 5 e       IB
 3 6 f       IB 
```

等等.....

任何想法如何完成。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-15T22:30:29.327

另一种解决方案是使用 cbind，并利用 R 将循环使用较短向量的值这一事实。

例如

```
x <- df2  # from above
cbind(x, NewColumn="Singleton")
 #    x y NewColumn
 #  1 4 d Singleton
 #  2 5 e Singleton
 #  3 6 f Singleton 
```

没有必要使用`rep`. R 为您做到这一点。

因此，您可以放入 `cbind(filelist[[i]], ID[[i]])`您的`for loop`or 正如@Sven 指出的那样，您可以使用清洁器`mapply`：

```
filelist <- mapply(cbind, filelist, "SampleID"=ID, SIMPLIFY=F) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-15T19:51:53.180

这是您的循环的更正版本：

```
for( i in seq_along(filelist)){

  filelist[[i]]$SampleID <- rep(ID[i],nrow(filelist[[i]]))

} 
```

有3个问题：

*   一个决赛`)`在身体命令后丢失。
*   列表的元素由 访问`[[`，而不是由访问`[`。`[`返回长度为 1 的列表。`[[`仅返回元素。
*   `length(filelist)`只是一个值，因此循环仅针对列表的最后一个元素运行。我用`seq_along(filelist)`.

* * *

更有效的方法是`mapply`用于任务：

```
mapply(function(x, y) "[<-"(x, "SampleID", value = y) ,
       filelist, ID, SIMPLIFY = FALSE) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-02-14T00:52:49.293

`purrr`方式，使用`map2`

```
library(dplyr)
library(purrr)

map2(filelist, ID, ~cbind(.x, SampleID = .y))

#[[1]]
#  x y SampleId
#1 1 a       1A
#2 2 b       1A
#3 3 c       1A

#[[2]]
#  x y SampleId
#1 4 d       IB
#2 5 e       IB
#3 6 f       IB 
```

或者也可以使用

```
map2(filelist, ID, ~.x %>% mutate(SampleId = .y)) 
```

* * *

如果您命名列表，我们可以`imap`根据其名称使用和添加新列。

```
names(filelist) <- c("1A","IB")
imap(filelist, ~cbind(.x, SampleID = .y))
#OR
#imap(filelist, ~.x %>% mutate(SampleId = .y)) 
```

这类似于使用`Map`

```
Map(cbind, filelist, SampleID = names(filelist)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-22T17:46:29.037

这个对我有用：

为列表中的每个数据框创建一个新列；根据现有列填充新列的值。（在您的情况下，ID）。

例子：

```
# Create dummy data
df1<-data.frame(a = c(1,2,3))
df2<-data.frame(a = c(5,6,7))

# Create a list
l<-list(df1, df2)

> l
[[1]]
  a
1 1
2 2
3 3

[[2]]
  a
1 5
2 6
3 7

# add new column 'b'
# create 'b' values based on column 'a' 
l2<-lapply(l, function(x) 
  cbind(x, b = x$a*4)) 
```

结果是：

```
> l2
[[1]]
  a  b
1 1  4
2 2  8
3 3 12

[[2]]
  a  b
1 5 20
2 6 24
3 7 28 
```

在您的情况下，例如：

```
filelist<-lapply(filelist, function(x) 
  cbind(x, b = x$SampleID)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-02T20:59:26.903

一个棘手的方法：

```
library(plyr)

names(filelist) <- ID
result <- ldply(filelist, data.frame) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-11T10:52:31.940

```
data_lst <- list(
  data_1 = data.frame(c1 = 1:3, c2 = 3:1),
  data_2 = data.frame(c1 = 1:3, c2 = 3:1)
)

f <- function (data, name){
  data$name <- name
  data
}

Map(f, data_lst , names(data_lst)) 
```

# lua - 使用 LPeg 使 Lua 模式不区分大小写

> ID：13404880
> 
> 赞同：2
> 
> 时间：2012-11-15T19:40:42.323
> 
> 标签：lua, pattern-matching, case-insensitive, lua-patterns, lpeg

我有一个应用程序（除其他外）支持纯文本搜索和使用 Lua 模式的搜索。为方便起见，该应用程序支持不区分大小写的搜索。这是一个图像片段：

![(](../Images/41ff4779a5d5965cc98424c477974b97.png)

将给定 Lua 模式转换为不区分大小写的 Lua 模式的代码不太漂亮。它基本上担心一个字符前面是否有奇数或偶数个转义符 (%) 以及它是否位于方括号内。图像中显示的图案变为`%a[bB][bB]%%[cC][%abB%%cC]`

我还没有机会学习 LPeg，我想这可能是我的动力。

我的问题是这是否是 LPeg 可以轻松处理的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:51:54.850

是的，但是为了更轻松地进入 LPeg 世界，请考虑 LPeg 的“re”模块，它为您提供了类似正则表达式的语法，并且您可以指定一组规则，就像在语法中一样（想想 Yacc 等）。您基本上会为转义字符、括号组和常规字符编写规则。然后，您可以将函数与规则相关联，这将发出与输入相同的文本或不区分大小写的修改版本。

您的规则结构将自动处理奇偶区分、括号上下文等。LPeg 使用“有序选择”，因此如果您首先添加转义规则，它将正确处理 %[ 并避免将其与例如括号规则。

# django - Django 应用程序应该相互独立到什么程度？

> ID：13404881
> 
> 赞同：2
> 
> 时间：2012-11-15T19:40:41.507
> 
> 标签：django, django-models

我无法确定如何将项目的功能拆分为不同的应用程序。

简单的例子：我们有会员，会员可以再拥有一项服务。服务可以升级、降级、添加其他服务，也可以取消。（这非常简单，如果真的那么简单，我会使用预制的解决方案）

我的第一个想法是把它变成一个“会员”应用程序，然后是一个负责续订、升级/降级和取消的“服务”应用程序。

然后我想我可能应该制作一个续订应用程序、一个升级/降级应用程序和一个取消应用程序。但是，这些应用程序都将依赖于数据库中的相同表（成员和服务）。我认为应用程序应该彼此独立。是否可以制作严重依赖其他应用程序模型的应用程序？

同样，如果有这么多应用程序使用它，我应该使用哪个应用程序来存储模型以创建服务表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:54:31.907

我认为您最初的想法是正确的：将所有内容拆分为多个应用程序并没有太多好处，相反，它可能会变得混乱且难以维护。

Django 的做事方式取决于很多模型。每个对象都映射到数据模型上的一个实体。您的应用程序主要是根据此类数据模型进行组织的。因此，如果您有一个具有不同部分的实体（服务），最好将这些部分理解为同一事物的一部分。另一个实体（成员）应该是另一个实体，因为它是另一回事。

从不同的应用程序导入模型不会受到任何惩罚。无论如何，最重要的是建立数据模型以保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:56:58.820

应用程序的重点是允许旨在被第三方作为插件重用的代码。您可能不希望将您的项目拆分太多，如果有的话。

# c# - 使用 Linq 格式化数据

> ID：13404882
> 
> 赞同：0
> 
> 时间：2012-11-15T19:40:43.053
> 
> 标签：c#, linq

我有一个类似这样的数据集：

```
2,Black
2,Blue
2,Red
1,Small
1,Medium 
```

我需要将其转换为以下内容：

```
2_0
2_1
2_2
1_0
1_1 
```

我目前拥有的 LINQ 查询使用第二个数字的索引，但是从 2_ 更改为 1_ 时它不会重置为 0。我尝试使用 GroupBy，但无法获得所需的结果 - 谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:58:31.763

```
IEnumerable<string> output = input
    .GroupBy(i => i.Num)
    .SelectMany(grp => grp.Select((item, idx) => string.Format("{0}_{1}", grp.Key, idx))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:54:49.767

您可以按数字分组并使用`Select()`提供索引的版本：

```
var result = data.GroupBy(x => x.Number,
                          (key, g) => g.Select((_, i) => string.Format("{0}_{1}", key, i)))
                 .SelectMany(x => x); 
```

请注意，如果相同的数字不连续，这可能与您预期的不同：例如，`2, 2, 2, 1, 1, 2, 2`.

# c++ - 使用通用私有成员设计模板类

> ID：13404885
> 
> 赞同：0
> 
> 时间：2012-11-15T19:40:57.480
> 
> 标签：c++, templates, type-inference

我想其他人之前遇到过这个设计问题，所以我希望有人能给我一些建议：我有一个应该持有私有通用对象的类。据我所知，如果不将整个班级设为模板，我就无法逃脱。美好的。但是现在，有没有办法在构造过程中从构造函数参数推断底层对象的类型，而不显式指定它（我想省略模板参数`Derived`，当我实例化`Test`类时）：

```
#include <iostream>

template <typename T>
class Generic
{
};

class Derived : public Generic<int>
{
public:
    Derived ();
    int GetFoo ();
private:
    int m_foo;
};

template <typename T>
class Test
{
public:
    Test (T &underlying);
private:
    T m_underlying;
};

Derived::Derived ()
{
    this->m_foo = 666;
}

int Derived::GetFoo ()
{
    return this->m_foo;
}

template<typename T>
Test<T>::Test (T &underlying) : m_underlying(underlying)
{
    std::cout << this->m_underlying.GetFoo() << std::endl;
}

int main ()
{
    Derived underlying;
    Test<Derived> test(underlying);

    return 0;
} 
```

为了实现我的目标，我还应该了解其他设计策略吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:46:46.080

通常你有一个类模板和一个类型推导*函数*模板：

```
template <typename T>
struct Foo
{
    Foo(T const &);
};

template <typename T>
Foo<T> make_foo(T const & t)
{
    return Foo<T>(t);
} 
```

用法：

```
auto foo = make_foo(1728);   // makes a Foo<int> 
```

这个想法在标准库中被无数次使用（例如`make_pair`, `make_tuple`, `make_shared`）。指导原则是您应该最多说出一次所需的类型名，如果可以推断出来，则根本不说。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T19:47:18.887

只需创建一个函数来创建`Test`对象：

```
template <typename T> 
Test<T> make_test(T& underlying)
{
    return Test<T>(underlying);
}

int main ()
{
    Derived underlying;
    auto test = make_test(underlying);

    return 0;
} 
```

# javascript - YouTube API 视频供稿说明

> ID：13404888
> 
> 赞同：1
> 
> 时间：2012-11-15T19:41:00.003
> 
> 标签：javascript, api, video, youtube, feed

好吧，我已经断断续续地看了将近一年（整个三月都在尝试这样做），但我根本找不到使这项工作的代码。

这是我的问题：

我有一个代码可以在我的网站 (http://weapwn.com) 上检索我最近上传的播放器。不过，这段代码只给了我视频。我需要代码来获取描述 - 不是来自任何一个视频 ID，而是来自可变视频 ID - 但我所拥有的是：

```
 <script type="text/javascript">
    function showMyVideos2(data) {
      var feed = data.feed;
      var entries = feed.entry || [];
      var html = ['<ul>'];
      for (var i = 0; i < entries.length; i++) {
        var entry = entries[i];
        var content = entry.content.$t;
        html.push('<i>', content, '</i>');
      }
      html.push('</ul>');
      document.getElementById('featdesc').innerHTML = html.join('');
    }
    </script> 
```

现在 - 替换“内容”什么都不做，除非我使用“标题”（它只检索视频标题）。我必须知道如何让这个该死的难以捉摸的代码工作，因为 Youtube 列出的参数不起作用！

我这样做完全错误吗？或者只是在我的代码中修复了一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:45:37.920

尝试这个：

```
function showMyVideos2(data) {
  var feed = data.feed;
  var entries = feed.entry || [];
  var html = ['<ul>'];
  for (var i = 0; i < entries.length; i++) {
    var entry = entries[i];
    var title = entry.title.$t;
    var description = entry.media$group.media$description.$t.replace(/\n/g, '<br/>');
    var content = entry.content.$t;
    html.push('<i>', content, '</i>','<i>', title, '</i>','<i>', description, '</i>');
  }
  html.push('</ul>');
  document.getElementById('featdesc').innerHTML = html.join('');
} 
```

希望能帮助到你...

# iphone - 当我后台应用程序时看到推送通知

> ID：13404890
> 
> 赞同：3
> 
> 时间：2012-11-15T19:41:01.990
> 
> 标签：iphone, ios, notifications, push

我看到一些非常奇怪的东西，我希望这里有人可以帮助我。每当我关闭/后台我的 iOS 应用程序时，最后一个通过 UrbanAirship 发送到该应用程序的推送通知都会在屏幕顶部弹出。

我已经使用 UrbanAirship 及其相关库为我的 iOS 应用程序设置了推送通知。我正在使用来自 UA (1.3.3) 的最新库，并且我相信我已经正确配置了所有内容。我已经多次阅读了基本文档，而且我没有做任何我能说的不寻常的事情。

在我的`AppDelegate`中，我没有对函数`applicationWillResignActive`或中的 UA 库做任何事情`applicationDidEnterBackground`，所以我不确定为什么后台应用程序会触发此通知。该文档没有说明这些功能需要发生任何事情。在函数`applicationWillTerminate`中，我正确调用`[UAirship land]`了，但是当应用程序终止时没有弹出这个问题。

更多数据：我实际上并没有在手机的通知中心看到新通知。我只是再次看到消息弹出，就好像它是新的一样。

这个问题令人困惑，如果有人可以提供一些见解或帮助，我将不胜感激。

# iphone - 为 StoryBoard 使用修改 didSelectRowAtIndexPath，IOS

> ID：13404891
> 
> 赞同：-4
> 
> 时间：2012-11-15T19:41:05.673
> 
> 标签：iphone, objective-c, uitableview, storyboard

RootViewController.h

```
#import <UIKit/UIKit.h>

    @interface RootViewController : UITableViewController {

NSMutableArray *petsArray;
}

    @property (nonatomic, strong) NSMutableArray *petsArray;

    @end 
```

根视图控制器.m

```
#import "RootViewController.h"
#import "PetsViewController.h"

    @interface RootViewController ()

    @end

    @implementation RootViewController

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

petsArray = [[NSMutableArray alloc] init];
[petsArray addObject:@"Dog"];
[petsArray addObject:@"Cat"];
[petsArray addObject:@"Snake"];
[self setTitle:@"PETS !"];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this     view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [petsArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier];
}

// Configure the cell...
cell.textLabel.text = [petsArray objectAtIndex:indexPath.row];

return cell;
}

#pragma mark - Table view delegate 
```

我认为问题出在我无法在情节提要项目中使用的 didSelectRowAtIndexPath 中。- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { PetsViewController *pets = [[PetsViewController alloc] initWithNibName:@"PetsViewController" bundle:nil];

```
if ([[petsArray objectAtIndex:indexPath.row] isEqual:@"Dog"]) {
    pets.petsInt = 0;
    [pets setTitle:[petsArray objectAtIndex:indexPath.row]];
}

if ([[petsArray objectAtIndex:indexPath.row] isEqual:@"Cat"]) {
    pets.petsInt = 1;
    [pets setTitle:[petsArray objectAtIndex:indexPath.row]];
}

if ([[petsArray objectAtIndex:indexPath.row] isEqual:@"Snake"]) {
    pets.petsInt = 2;
    [pets setTitle:[petsArray objectAtIndex:indexPath.row]];
}

[self.navigationController pushViewController:pets animated:YES];

}

    @end 
```

PetsViewController.h

```
#import <UIKit/UIKit.h>

@interface PetsViewController : UITableViewController {
NSMutableArray *dogArray;
NSMutableArray *catArray;
NSMutableArray *snakeArray;
int petsInt;
}

@property int petsInt;

@end 
```

PetsViewController.m

```
#import "PetsViewController.h"

@interface PetsViewController ()

@end

@implementation PetsViewController
@synthesize petsInt;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{

[super viewDidLoad];

dogArray = [[NSMutableArray alloc] initWithObjects:@"HAF",@"hafo", @"hafinio", nil];
catArray = [[NSMutableArray alloc] initWithObjects:@"MYAU",@"myainio", @"mya lya lya",  nil];
snakeArray = [[NSMutableArray alloc] initWithObjects:@"fshhhhh",@"fsssss", @"xrt", nil];

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.

if (petsInt == 0) return [dogArray count];
if (petsInt == 1) return [catArray count];
if (petsInt == 2) return [snakeArray count];

[self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
static NSString *CellIdentifier = @"PetsCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:CellIdentifier];
}

// Configure the cell...
if (petsInt == 0) cell.textLabel.text = [dogArray objectAtIndex:indexPath.row];
if (petsInt == 1) cell.textLabel.text = [catArray objectAtIndex:indexPath.row];
if (petsInt == 2) cell.textLabel.text = [snakeArray objectAtIndex:indexPath.row];

[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];

return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.
/*
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc]    initWithNibName:@"<#Nib name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 */
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:43:57.843

```
[self performSegueWithIdentifier:@"SEGUE_NAME" sender:self];

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"SEGUE_NAME"]) {
        PetsViewController *pets = [segue destinationViewController];

        [pets setPetsInt:0];
        [pets setTitle:@"Title"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:54:53.480

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
NSIndexPath *indexPath = self.tableView.indexPathForSelectedRow;

if ([[gazel objectAtIndex:indexPath.row] isEqual:@"<էրեբունի> Օդանավակայան"]) {
    KangarList *kang = [segue destinationViewController];
    kang.kangarInt = 0;
    [kang setTitle:[gazel objectAtIndex:indexPath.row]];
}

if ([[gazel objectAtIndex:indexPath.row] isEqual:@"<էրեբունի> Օդանավակայան"]) {
    KangarList *kang = [segue destinationViewController];
    kang.kangarInt = 1;
    [kang setTitle:[gazel objectAtIndex:indexPath.row]];
}

if ([[gazel objectAtIndex:indexPath.row] isEqual:@"<էրեբունի> Օդանավակայան"]) {
    KangarList *kang = [segue destinationViewController];
    kang.kangarInt = 2;
    [kang setTitle:[gazel objectAtIndex:indexPath.row]];
}

if ([[gazel objectAtIndex:indexPath.row] isEqual:@"<էրեբունի> Օդանավակայան"]) {
    KangarList *kang = [segue destinationViewController];
    kang.kangarInt = 3;
    [kang setTitle:[gazel objectAtIndex:indexPath.row]];
}
} 
```

我尝试了很多方法，最终实现了正确的方法，但它只有在视图下加载方法对象只有一个描述但如果它有类似 thise 的情况下才有效

```
gazel = [[NSMutableArray alloc] init];

Data *data = [[Data alloc] init];
data.title = @"<էրեբունի> Օդանավակայան";
data.subtitle = @"Հարաֆ Արևմտյան Թաղամաս";
data.photo = 1;
[gazel addObject:data]; 
```

它不工作

# php - SQL：选择过去 2 周内没有条目的客户

> ID：13404892
> 
> 赞同：0
> 
> 时间：2012-11-15T19:41:09.383
> 
> 标签：php, mysql, join

我有一个数据库，其中包含多个表来跟踪客户以及我们与他们的交互等等。我正在使用 PHP 创建一个报告，该报告应显示所有处于打开状态且在过去 2 周内没有记录交互的客户。我试图做一个查询，然后在处理这些结果时，它会基于它运行另一个查询，但它非常慢，我无法让它正常工作。我认为 JOIN 函数是我的答案，但我不完全确定如何实现它。

我的表有这些字段：

```
customers: customer_id
customers_marketing_options: customer_id, status
customer_interactions: customer_id, created_on (yyyy-mm-dd hh:mm:ss) 
```

现在，我让它选择所有处于开放状态的客户。然后根据这些结果，我选择与该客户 ID 的所有交互，created_on 最多在 2 周前，按 created_on 日期对其进行排序并选择第一行（最近的交互）。但是，这会返回具有温暖状态的客户的交互。但是，它不会检查他们在过去 2 周内是否有互动。

这可能听起来令人困惑，但是任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:49:30.177

```
SELECT cmo.customer_id,
       Max(ci.created_on) as last_interaction
FROM customer_marketing_options cmo
     inner join customer_interactions ci
     on cmo.customer_id = ci.customer_id
WHERE
  cmo.status = 'open'
GROUP By
  cmo.customer_id
HAVING Max(ci.created_on) < DATE_SUB(CURDATE(),INTERVAL 14 DAY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:50:00.440

```
SELECT customer_ID, created_on
FROM customer_interactions
WHERE MAX(created_on) <= (now() - INTERVAL 2 week)
  AND ... status stuff ...
GROUP BY customer_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T20:02:52.790

试试这个：

```
SELECT ci.customer_id, ci.created_on FROM customer_interactions ci
LEFT JOIN customer_interactions ci2
  ON (ci.customer_id = ci2.customer_id AND ci.created_on < ci2.created_on)
JOIN customers_marketing_options cmo
  ON (ci.customer_id = cmo.customer_id AND status = 'Open')
WHERE ci2.created_on IS NULL AND ci.created_on < now() - interval 2 week 
```

[在此处](http://sqlfiddle.com/#!2/6c964/2)查看工作示例。

# c# - 如何将 FluentValidation 集成到 MVC4 中

> ID：13404893
> 
> 赞同：5
> 
> 时间：2012-11-15T19:41:12.017
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, fluentvalidation

我制作了一个包含 FluentValidation 的简单模型，但它似乎不起作用。

*   我的数据库正在使用空名称更新并通过 `TryUpdateModel()`
*   提交表单时没有收到客户端验证错误

我试图添加`FluentValidationModelValidatorProvider.Configure();`，但它显示即使我使用类添加`Application_Start()`它也找不到。`FluentValidationModelValidatorProvider`我也尝试`[Validator(typeof(Category))]`在我的模型类之上添加，但没有做任何事情。[这](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)是我们一直在寻找信息的资源。

**模型**

```
public class Category
{
    public int ID { get; set; }
    public string Name { get; set; }
    virtual public ICollection<Image> Images { get; set; }
}

public class CategoryValidator : AbstractValidator<Category>
{
    public CategoryValidator()
    {
        RuleFor(x => x.Name).NotEmpty().WithMessage("Category name is required.");
    }
} 
```

**控制器**

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Edit(Category c)
{
    var category = _db.Categories.Where(x => x.ID == c.ID).SingleOrDefault();
    if (category == null) return HttpNotFound();

    // Update model and return to category list
    if (TryUpdateModel(category)) // it passes with empty name and saves changes
    {
        _db.SaveChanges();
        return RedirectToAction("index", "category");
    }

    // Something is wrong, return view back
    return View(c);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T20:23:49.453

听起来您缺少`FluentValidation.Mvc`参考。尝试安装[FluentValidation.MVC4](http://nuget.org/packages/FluentValidation.MVC4) NuGet 包。

然后按照[MVC 说明](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)进行操作。

# ruby-on-rails - Rails：fields_for 是嵌套表单所必需的吗？

> ID：13404894
> 
> 赞同：0
> 
> 时间：2012-11-15T19:41:14.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚完成了我的第一个嵌套表单，并发现我在让它工作时遇到的大部分麻烦是我试图避免“fields_for”循环。我试图这样设置字段：

```
<%= file.field :asset, :image_url %> 
```

这将输出如下内容：

```
<input type="file" name="asset[image_url]" /> 
```

所以我的问题是：

有没有办法让字段像“fields_for”一样改变范围，或者你必须使用那个循环来嵌套表单？

# prolog - Prolog 成员函数列表

> ID：13404895
> 
> 赞同：0
> 
> 时间：2012-11-15T19:41:16.300
> 
> 标签：prolog

试图弄清楚如何为列表创建“成员”函数。到目前为止，我已经创建了这个，但我离正确答案还很近。

* * *

```
spec([system001,hard_drive(50)]).
spec([system002,hard_drive(150)]).

list1(Component):-
    spec([Component,X|Y]).

which_system(Component, Component).

which_system(Component):-
    list1(Component),
    which_system(X, Component). 
```

* * *

当我输入`which_system(system001).` 它时它可以工作，但是当我输入它时`which_system(hard_drive(50)).` 它根本不起作用......我不知道如何让它找到hard_drive（50）。

我希望有人能帮帮忙...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:28:55.973

你做的比需要的更复杂

```
which_system(Component, System) :-
  spec([System|Components]), member(Component, Components). 
```

如果系统中有更多组件，例如`spec([system001, hard_drive(50), hard_drive(100)]).`.

```
?- which_system(hard_drive(50), S). 
```

将 S 实例化到 system001。

# tridion - 添加带有下拉选项的“打开”等功能区按钮

> ID：13404896
> 
> 赞同：7
> 
> 时间：2012-11-15T19:41:18.350
> 
> 标签：tridion

我希望这只是一个简单的指针，指向我无法通过谷歌找到的现有东西。

我们的业务人员想要的是一个类似于“打开”按钮的按钮，一旦单击它，就会提供一个带有 3 个选项的下拉菜单。我不知道如何解决这个问题。

我可以轻松地添加一个按钮。我什至可以垂直添加一堆 3 个“小”按钮。我不太清楚大按钮的下拉菜单。我们的一个人认为他很久以前就这样做了，但找不到任何证据来证明这一点。;)

谁能指出我错过了什么？或者，有人确认这是不可能的吗？

谢谢，

〜华纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T20:04:34.623

Unfortunately that is implemented in a different way than how normal buttons are added to the ribbon. I am basing this on the answers I received here:

[Is it possible to remove the "Upload MM Component" button from the SDL Tridion 2011 Ribbon](https://stackoverflow.com/questions/10703177/is-it-possible-to-remove-the-upload-mm-component-button-from-the-sdl-tridion-2)

It seems you will need to create an ASCX to achieve this.

# regex - 如何删除文本文件中第一个空格后每行中的所有字符？

> ID：13404897
> 
> 赞同：2
> 
> 时间：2012-11-15T19:41:19.120
> 
> 标签：regex, string, bash, shell, text-manipulation

我有一个大的日志文件，我需要从中提取文件名。

该文件如下所示：

```
/path/to/loremIpsumDolor.sit /more/text/here/notAlways/theSame/here
/path/to/anotherFile.ext /more/text/here/differentText/here
.... about 10 million times 
```

我需要像这样提取文件名：

```
loremIpsumDolor.sit
anotherFile.ext 
```

我认为我的第一个策略是`/path/to/`用''查找/替换所有内容。但我不知道如何删除空格后的所有字符。

你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T19:42:55.917

```
sed 's/ .*//' file 
```

它不再需要了。当然，转换后的输出出现在标准输出上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:47:57.993

理论上，您还可以使用`awk`以下方式从每一行中获取文件名：

```
awk '{ print $1 }' input_file.log 
```

当然，这假设任何文件名中都没有空格。`awk`默认查找空格作为字段分隔符，因此上面的代码段将从您的日志文件（您的文件名）中为每一行获取第一个“字段”，并输出它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T19:43:19.410

将其传递给`cut`：

```
cut '-d ' -f1 yourfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T22:29:20.277

仅限 bash 的解决方案：

```
while read path otherstuff; do
    echo ${path##*/}
done < filename 
```

# iphone - 如何在不点击导航栏中突出显示 BarButton？

> ID：13404898
> 
> 赞同：1
> 
> 时间：2012-11-15T19:41:22.627
> 
> 标签：iphone, objective-c, ios, ipad

通常，当我们点击 UIBarButtonItem 时，它会突出显示。

但是，我打算向用户展示，当视图在 4 秒后加载时，该操作会自动为他们完成。

所以我想突出显示按钮而不点击它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:59:57.933

对于`UIVIew`诸如 a 之类的对象`UIButton`，您可以使用以下代码[Glow category on UIView 添加对使视图发光的支持](https://github.com/thesecretlab/UIView-Glow)或使用[此示例](http://benscheirman.com/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton)。

如果您使用的是第一个，则只需调用`startGlowing`and `stopGlowing`。当您调用`startGlowing`时，视图将开始以柔和的灯光闪烁，`stopGlowing`调用时此效果会消失。检查[这个](http://blog.secretlab.com.au/2012/06/23/glowing/)。

对于`UIBarButtonItem`，您可能必须使用[此处提供的解决方案](https://discussions.apple.com/thread/1657281?start=0&tstart=0)。

# c# - 错误：无法从 http 获取元数据 ......?wsdl

> ID：13404904
> 
> 赞同：8
> 
> 时间：2012-11-15T19:41:47.247
> 
> 标签：c#, wcf, ssl, https, metadata

我一直在使用自签名证书将 http 应用程序转换为 https 和 ssl。

出于某种原因，我必须在浏览器中访问 localhost:##### 才能启动服务。

服务启动后，我在 Visual Studio 2012 命令行提示符下使用以下调用对其进行测试：

```
svcutil.exe https://localhost:10201/?wsdl 
```

它回来了

```
Error: Cannot obtain Metadata from https://localhost:10201/?wsdl

If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.

WS-Metadata Exchange Error
    URI: https://localhost:10201/?wsdl

    Metadata contains a reference that cannot be resolved: 'https://localhost:10201/?wsdl'.

    Could not establish trust relationship for the SSL/TLS secure channel with authority 'localhost:10201'.

    The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.

    The remote certificate is invalid according to the validation procedure.

HTTP GET Error
    URI: https://localhost:10201/?wsdl

    There was an error downloading 'https://localhost:10201/?wsdl'.

    The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.

    The remote certificate is invalid according to the validation procedure.

If you would like more help, type "svcutil /?" 
```

这不利于我使用 HTTPS 的成功吗？

我的配置如下所示：

```
<system.serviceModel>

    <!--SERVICES-->
    <services>
      <service name="DuplexService.DuplexService"
         behaviorConfiguration="sb">

        <endpoint
           address="basic"
           binding="customBinding"
           bindingConfiguration="customDuplexBinding"
           contract="DuplexService.Interface.IDuplexServiceContract">
        </endpoint>

        <endpoint
            address=""
            binding="webHttpBinding"
            behaviorConfiguration="webHttpEndpointBehavior"
            bindingConfiguration="webHttpsBinding"
            contract="Interface.IPolicyRetriever">
        </endpoint>

        <endpoint
            address="mex"
            binding="mexHttpsBinding"
            contract="IMetadataExchange">
        </endpoint>

        <host>
        <baseAddresses>
          <add baseAddress="https://localhost:10201" />
        </baseAddresses>
        </host>
      </service>

    </services>

    <!--BEHAVIOURS-->
    <behaviors>
    <!--Policy-->
      <endpointBehaviors>
        <!-- For Policy Service -->
        <behavior name="webHttpEndpointBehavior">
          <webHttp  />
        </behavior>
      </endpointBehaviors>

<!--behaviour for all of the enpoints -->
      <serviceBehaviors>
        <behavior name="sb">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpsGetEnabled="true" httpsGetUrl="https://localhost:10201"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <!-- This will solve a bug that happens if too many items are sent at once from the gateway to the client -->
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
          <serviceThrottling
          maxConcurrentCalls="200"
          maxConcurrentSessions="200"
          maxConcurrentInstances="200" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <!-- BINDINGS-->
    <bindings>

    <webHttpBinding>
        <binding name="webHttpsBinding">
            <security mode="Transport">
                <transport clientCredentialType="None" />
            </security>
        </binding>
    </webHttpBinding>

      <customBinding>
        <binding name="customDuplexBinding">
          <pollingDuplex duplexMode="MultipleMessagesPerPoll"
               maxOutputDelay="00:00:01"
       serverPollTimeout="00:01:00"
       inactivityTimeout="02:00:00"
       maxPendingMessagesPerSession="2147483647"
       maxPendingSessions="2147483647" />
          <binaryMessageEncoding>
            <readerQuotas
              maxDepth="2147483647"
              maxStringContentLength="2147483647"
              maxArrayLength="2147483647"
              maxBytesPerRead="2147483647"
              maxNameTableCharCount="2147483647" />
          </binaryMessageEncoding>
          <httpsTransport
      maxBufferSize="2147483647"
      maxReceivedMessageSize="2147483647"
      transferMode="StreamedResponse" />
        </binding>
      </customBinding>

    </bindings>

    <!-- Register the binding extension from the SDK. -->
    <extensions>
      <bindingElementExtensions>
        <add name="pollingDuplex"
             type="System.ServiceModel.Configuration.PollingDuplexElement, System.ServiceModel.PollingDuplex" />
      </bindingElementExtensions>
    </extensions>
  </system.serviceModel> 
```

我怎样才能摆脱它？并使元数据工作和 GET 工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T02:48:23.477

我可以想到 4 种方法来解决这个问题。

1.  将自签名证书安装为受信任的根身份验证。MMC -> 证书
2.  使用浏览器导航到 wsdl（点击过去的证书错误），将其保存，然后直接生成 wsdl。
    *   将 wsdl 的 url 放在浏览器中，然后单击证书警告，以便您可以看到实际的 wsdl
    *   将 wsdl 保存到您的计算机。在chrome中，您可以右键单击，另存为。
    *   在 Visual Studio 中
        *   右键单击项目并选择“添加服务引用”
        *   在地址框中，输入下载的 wsdl 的物理路径 (C:\directory...)。
        *   打去
3.  启动 fiddler 并告诉它解密 https，这将安装证书并为您提供忽略远程证书错误的选项。在这里描述。[http://proq.blogspot.com/2012/02/svcutil-and-https.html](http://proq.blogspot.com/2012/02/svcutil-and-https.html)
4.  使用由受信任的根签名的证书。

我没有看到忽略证书错误的 svcutil 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T14:04:07.800

我遇到过同样的问题。对我来说，我注意到 https 正在使用另一个在到期日期方面无效的证书。不知道为什么会这样。我更改了 Https 端口号和新的自签名证书。WCFtestClinet 可以通过 HTTPS 连接到服务器！

# post - ColdFusion 发布到 Twitter 身份验证错误

> ID：13404906
> 
> 赞同：0
> 
> 时间：2012-11-15T19:41:48.560
> 
> 标签：post, twitter, coldfusion, oauth, cfhttp

首先，我的项目需要我制作自己的模块，所以我不能使用那里的各种包和产品。话虽如此，使用正确的令牌、consumer_key、c​​onsumer_secret 和 token_secret 变量，创建正确的基本签名字符串，从而从该字符串创建 OAuth 签名，通过我的 ColdFusion 模块获取 Twitter 数据没有问题。如果其中任何一个关闭，我什至无法获得 Twitter 数据。

所以知道我的变量是正确的，我仍然无法通过 ColdFusion 将简单的状态推文发布到我的 Twitter 帐户。每次我尝试都会收到相同的错误：“代码：32，消息：'无法验证你'”。因为我知道它不可能是变量，所以它必须是我通过 ColdFusion 发送 POST 的方式，但我不确定我做错了什么。以下是我用来提交 POST 的代码：

```
<cfhttp url="https://api.twitter.com/1.1/statuses/update.json" method="POST" throwonerror="yes" >
    <cfhttpparam type="header" name="Authorization" value='OAuth oauth_consumer_key="#oauthStruct.oauth_consumer_key#", oauth_nonce="#oauthStruct.oauth_nonce#", oauth_signature="#oauthStruct.oauth_signature#", oauth_signature_method="#oauthStruct.oauth_signature_method#", oauth_timestamp="#oauthStruct.oauth_timestamp#", oauth_token="#oauthStruct.oauth_token#", oauth_version="#oauthStruct.oauth_version#"'>
    <cfhttpparam type="header" name="Content-Type" value="application/x-www-form-urlencoded">
    <cfhttpparam type="formfield" name="status" value="#oauthStruct.status#">
</cfhttp> 
```

有人可以查看上面的代码并帮助我弄清楚我是否遗漏了什么或错误地提交了这个电话吗？

更新：我将上面的代码更改为：

```
 <cfhttp url="https://api.twitter.com/1.1/statuses/update.json" method="POST" throwonerror="yes" >
        <cfhttpparam type="header" name="Authorization" value='OAuth oauth_consumer_key="#oauthStruct.oauth_consumer_key#", oauth_nonce="#oauthStruct.oauth_nonce#", oauth_signature="#oauthStruct.oauth_signature#", oauth_signature_method="#oauthStruct.oauth_signature_method#", oauth_timestamp="#oauthStruct.oauth_timestamp#", oauth_token="#oauthStruct.oauth_token#", oauth_version="#oauthStruct.oauth_version#"'>
        <cfhttpparam type="header" name="Content-Type" value="application/x-www-form-urlencoded">
        <cfhttpparam type="header" name="oauth_consumer_key" value="#oauthStruct.oauth_consumer_key#">
        <cfhttpparam type="header" name="oauth_nonce" value="#oauthStruct.oauth_nonce#">
        <cfhttpparam type="header" name="oauth_signature" value="#oauthStruct.oauth_signature#">
        <cfhttpparam type="header" name="oauth_signature_method" value="#oauthStruct.oauth_signature_method#">
        <cfhttpparam type="header" name="oauth_timestamp" value="#oauthStruct.oauth_timestamp#">
        <cfhttpparam type="header" name="oauth_token" value="#oauthStruct.oauth_token#">
        <cfhttpparam type="header" name="oauth_version" value="#oauthStruct.oauth_version#">
        <cfhttpparam type="body" value="#signature_string#">
    </cfhttp> 
```

它仍然不起作用，同样的身份验证错误。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:35:25.103

我想到了。为了让其他人能够理解这个过程是如何进行的，使用新的 API (1.1)，这是您将状态更新发布到您的 Twitter 帐户的方式：

```
 <cfhttp url="https://api.twitter.com/1.1/statuses/update.json" method="POST" throwonerror="yes" >
        <cfhttpparam type="header" name="Authorization" value='OAuth oauth_consumer_key="#oauthStruct.oauth_consumer_key#", oauth_nonce="#oauthStruct.oauth_nonce#", oauth_signature="#oauthStruct.oauth_signature#", oauth_signature_method="#oauthStruct.oauth_signature_method#", oauth_timestamp="#oauthStruct.oauth_timestamp#", oauth_token="#oauthStruct.oauth_token#", oauth_version="#oauthStruct.oauth_version#"'>
        <cfhttpparam type="header" name="Content-Type" value="application/x-www-form-urlencoded">
        <cfhttpparam type="body" value="status=#oauthStruct.status#">
    </cfhttp> 
```

如果我没有 Authorization 标头参数，我最终会收到 400 Bad Request 错误。您将所有必要的 OAuth 参数（包括您的数字签名）放在逗号分隔的列表中，如上所示，指明您的内容类型，最重要的是，您在 cfhttp 调用的正文参数中提供作为 URL 查询字符串的剩余变量.

# opengl - 根据 2D 纹理的值对 1D 纹理进行采样

> ID：13404910
> 
> 赞同：4
> 
> 时间：2012-11-15T19:42:12.533
> 
> 标签：opengl, glsl

我正在用 GLubyte 从映射到 (0,1) 的 R（实数）的浮点值填充 2D 纹理并乘以 255，得到值 (0, 255)。保存为 GL_R8，因为我只需要纹理中的 1 个值。这可以例如表示一个数学函数。

我还上传了一维纹理以用作颜色图/颜色条。然后，我根据 2D 纹理的值从 1D 纹理中采样。

这就是我的片段着色器的工作方式：

```
#version 400
in vec2 f_textureCoord;

layout(location = 0) out vec4 FragColor;

uniform sampler2D textureData;
uniform sampler1D colorBar;

void main() {
    /* Values in the sampler are on (0, 1) * 255 => (0, 255) */
    vec3 texColor = texture2D(textureData, f_textureCoord).rgb;
    float s = texColor.r;

    /* Use the texture value as a coordinate in the 1D colorbar texture */
    vec3 color = texture1D(colorBar, s).rgb;

    float val = color.r;
    FragColor = vec4(val, val, val, 1);
} 
```

使用这个我得到以下错误：

> glValidateProgram：验证错误：不同类型的采样器指向同一个纹理单元

但是，我的代码按预期工作，至少是渲染结果！

我的问题是：

1) 为什么我会收到此错误/警告？---*在评论中回答...*

2）这是我想要做的正确方法吗？我应该使用另一种形式的缓冲区而不是将我的函数值保存在 2D 纹理中吗？

3) 我假设当我的数学函数（填充 2D 纹理）超过某个纹理大小限制时会遇到问题。关于我应该如何着手解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:21:22.313

1.) 在您的 glDraw* 命令之前调用 glValidateProgram 以检查您是否正确设置了统一和属性位置。因此发出错误警告，因为在程序链接后两个采样器纹理单元仍然为零。

2.）如果这是关于使用颜色索引显示函数的结果，没关系。如果我理解正确，textureData 只包含灰度值。如果您只需要纹理中的一种颜色分量，则应编写

```
float s = texture2D(textureData, f_textureCoord).r; 
```

3.) 如果您需要显示的数据多于可以放入单个纹理的数据，则必须使用平铺（即将数据拆分为多个纹理并进行多次绘制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:14:23.697

`glValidateProgram`用于检测程序是否可用于以*当前 OpenGL 状态*进行渲染。这包括纹理的当前绑定、统一缓冲区以及纹理直接访问的任何其他内容（绘制缓冲区和顶点属性不属于此列表的一部分）。

# java - FileOutputStream：流已关闭

> ID：13404912
> 
> 赞同：0
> 
> 时间：2012-11-15T19:42:13.750
> 
> 标签：java, file, io

**解决了，简而言之：问题是我写了一个已经关闭的 FileOutputStream**

我注意到使用 FileOutputStream 类的一些奇怪的语义。

如果我使用此代码创建 FileOutputStream：

```
try {
    File astDumpFile = new File(dumpASTPath);
    if(!astDumpFile.exists()) {
        astDumpFile.createNewFile();
    }
    astDumpStream = new FileOutputStream(dumpASTPath);
} catch( IOException e ) {
    dumpAST = false;
    //throw new IOException("Failed to open file for dumping AST: " + dumpASTPath);
    System.out.println("Failed to open file for dumping AST: " + dumpASTPath);
} 
```

在程序的开头（`astDumpStream`是一个成员变量）。然后，如果我稍后（约 3 秒后）将字符串数据写入文件，我会得到`IOException: stream closed`：

```
try {
    String dotGraph = gpvisitor.getDotGraph();
    astDumpStream.write(dotGraph.getBytes("UTF8"));
    astDumpStream.flush();
    astDumpStream.close();
} catch( IOException e ) {
    System.out.println("Failed to dump AST to file: " + e.getMessage());
    e.printStackTrace();
} 
```

但是，如果我`FileOutputStream`在写入之前直接复制用于创建 to 的精确代码，它会按预期工作。

现在我想知道如果我早先创建该对象为什么会出现该异常，但如果我在使用它之前直接创建它就不会。

编辑：例外：

```
java.io.IOException: Stream Closed
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(FileOutputStream.java:305)
    at MyClass.function(MyClass.java:208) 
```

我刚刚注意到，即使我得到一个异常，仍然有一些数据被写入文件。有趣的是，第一行完全写了，然后除了最后一行之外的所有后续行都丢失了。如果我用`dotGraph`更短的字符串替换写入的字符串，一切都会正确写入，但是我仍然会遇到该异常。

编辑：环境信息：

```
[~]> lsb_release -a
Distributor ID: Debian
Description:    Debian GNU/Linux testing (wheezy)
Release:        testing
Codename:       wheezy
[~]> java -version
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:44:37.017

`IOException`抱怨流已关闭的唯一原因是流已关闭。您必须跟踪您的代码以找出发生这种情况的位置。一些不太明显的地方包括对其他方法和语句`finally`块的调用。`try`要寻找的另一件事是将变量重新分配`astDumpStream`给不同的流（在`IOException`引发之前关闭 - 甚至可能在第一次分配给之前`astDumpStream`）。

除非您有一个单独的线程可能会在延迟后关闭流，否则时间似乎并不相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:48:25.540

如果`close()`函数被多次调用，则可能发生这种情况的唯一方法。我的猜测是，由于某种原因，第二个代码块被多次调用。

为了防止缩进错误，我收到了两条很好的建议：

*   始终一致地缩进。最好使用为您执行此操作的工具（如 Eclipse）。
*   始终使用花括号，即使您认为不需要它们。这有助于防止一些需要永远找到的小错误，因此键入每个错误所需的额外半秒时间远远超过了您不花时间寻找这些错误的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T15:54:16.200

对于第二个 Tedd - 如果您碰巧使用资源块的嵌套尝试并在 tryblock 之外使用流 - 您也可以在这种情况下运行，因为一旦控制脱离资源块的嵌套尝试，流将被关闭。

# search - Excel VBA - 如何选择与先前单元格中的值对应的范围？

> ID：13404914
> 
> 赞同：1
> 
> 时间：2012-11-15T19:42:19.230
> 
> 标签：search, excel, selection, vba

我有一组非常大的数据，其中包括 NAS 中飞机的开始和停止时间。我想创建一个宏来在 excel 中对这些数据进行可视化表示，如下所示：

[![](../Images/78eab3a948ee0943f1f6606f68efbd3b.png)](https://i.imgur.com/KHkKJ.png)

*（注：此图使用假数据）*

如您所见，我已经手动完成了前 7 行，但是有几个数据文件，每个文件多达 2500 多行，这使得这个过程很乏味。我试图创建一个宏，但我很困惑如何搜索和选择适当的范围来突出显示。

这是我到目前为止所拥有的：

```
Sub autofill()

    Dim rng As Range
    Dim row As Range
    Dim cell As Range

    'set the range of the whole search area
    Set rng = Range("A2:HJ121")

    For Each row In rng.Rows
        Dim callsign As Variant
        Set callsign = cell("contents", "A" & row)
        Dim valstart As Variant
        Set valstart = cell("contents", "E" & row)
        Dim valstop As Variant
        Set valstop = cell("contents", "F" & row)

        'now select the range beginning from the column whose header matches the
        'time in valstart and ends at the time which matches the time in valstop

        Selection.Merge
        Selection.Style = "Highlight"
        Selection.Value = callsign
    Next row

End Sub 
```

## 选择我需要的行的最简单方法是什么？

我不是专业的程序员；如果我的代码展示了草率的技术或违反了一些神圣的编程原则，请提前道歉。:P

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:16:04.627

这是我在 VBA 上的尝试。

```
Option Explicit

Public Sub fillSchedule()
    Dim startCol As Long
    Dim endCol As Long
    Dim i As Long
    Dim j As Long

    Dim ws As Excel.Worksheet
    Dim entryTime As Single
    Dim exitTime As Single
    Dim formatRange As Excel.Range

    Set ws = ActiveSheet

    startCol = ws.Range("H:H").Column
    endCol = ws.Range("HJ:HJ").Column

    Call clearFormats

    For i = 2 To ws.Cells(1, 1).End(xlDown).Row
        entryTime = ws.Cells(i, 5).Value
        exitTime = ws.Cells(i, 6).Value
        Set formatRange = Nothing

        For j = startCol To endCol
            If (ws.Cells(1, j).Value > exitTime) Then
                Exit For
            End If

            If ((entryTime < ws.Cells(1, j).Value) And (ws.Cells(1, j).Value < exitTime)) Then
                If (formatRange Is Nothing) Then
                    Set formatRange = ws.Cells(i, j)
                Else
                    Set formatRange = formatRange.Resize(, formatRange.Columns.Count + 1)
                End If
            End If
        Next j

        If (Not formatRange Is Nothing) Then
            Call formatTheRange(formatRange, ws.Cells(i, "A").Value)
        End If
    Next i
End Sub

Private Sub clearFormats()
    With ActiveSheet.Range("H2:HJ121")
        .clearFormats
        .ClearContents
    End With

End Sub
Private Sub formatTheRange(ByRef r As Excel.Range, ByRef callsign As String)

    r.HorizontalAlignment = xlCenter
    r.Merge

    r.Value = callsign

    ' Apply color
    With r.Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .ThemeColor = xlThemeColorLight2
        .TintAndShade = 0.799981688894314
        .PatternTintAndShade = 0
    End With

    ' Apply borders
    With r.Borders(xlEdgeLeft)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With r.Borders(xlEdgeTop)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With r.Borders(xlEdgeBottom)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With r.Borders(xlEdgeRight)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:23:05.533

条件格式解决方案怎么样？

突出显示从 H2 到（最后一个右下角单元格）的所有单元格。

使用这个公式：

```
=IF(AND((H$1>$E2),(H$1<$F2)),TRUE) 
```

然后进行填充。如果您愿意放弃填充范围内的边框和名称，它会为您工作:)。

此外，您可能希望从 G2 冻结窗格，以便您可以一直滚动到 HJ 列并且仍然可以看到 Callsign 列。

希望这可以帮助

# c# - nunit-console 不运行使用 TestCase 属性参数化的测试

> ID：13404919
> 
> 赞同：1
> 
> 时间：2012-11-15T19:42:32.480
> 
> 标签：c#, .net, unit-testing, nunit

尝试运行使用 TestCase 属性参数化的 Nunit 测试。像这样的东西：

```
[TestFixture]
public class MyClass
{
    [Test]
    [TestCase("option1")]
    [TestCase("option2")]
    public void Test1(string id)
    {

    }
} 
```

当我尝试使用 nunit 控制台运行此测试时

**nunit-console.exe MyProject.dll /run:MyNamespace.MyClass.Test1**

它工作正常。但是在尝试将其参数化运行时：

**nunit-console.exe MyProject.dll /run:MyNamespace.MyClass.Test1("option1")**

它只是显示：

*测试运行：0，错误：0，失败：0，不确定：0，时间：0.0269838 秒未运行：0，无效：0，忽略：0，跳过：0*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:55:12.670

据我所知，它的引用需要有所不同；

```
nunit-console.exe MyProject.dll /run:"MyNamespace.MyClass.Test1(\"option1\")" 
```

# wcf - WCF webHttpBinding 服务在本地工作，但在 IIS 7.5 上产生“400 Bad Request”

> ID：13404920
> 
> 赞同：0
> 
> 时间：2012-11-15T19:42:34.717
> 
> 标签：wcf, iis, request, local, webhttpbinding

我有一个带有 webHttpBinding 绑定的 WCF 服务，该服务在 Visual Studio 2010/本地 IIS 中运行良好。该服务只有一个 POST 方法，我的单独 Web 应用程序项目通过 .NET 的 HttpWebRequest 对象调用该方法。JSON 用于请求和响应。请求和响应包含由 DataContractJsonSerializer 转换为 JSON 和从 JSON 转换的对象。

一旦我将服务部署到同一网络上的另一台 Windows Server 2008 R2 机器，它会生成“400 Bad Request”以响应在本地正常工作的完全相同的调用代码。“调用代码”是指在 Visual Studio 中运行的 Web 应用程序。

通过浏览器查看 .svc 文件没有问题。

该请求小于 1 kB，因此大小似乎不是问题。以防万一我还调整了服务的 Web.config 以允许更大的请求，但这并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:18:27.143

发布问题后不久解决了这个问题。应该把事情弄清楚。

我的 Cisco RV220W 搞糊涂了。它不会正确路由请求，但它到底在做什么以及为什么行为是间歇性的，我无法理解。重新启动它解决了我的问题。

# image - MATLAB：如何向用户呈现多个图像/图形并等待点击其中一个？

> ID：13404926
> 
> 赞同：0
> 
> 时间：2012-11-15T19:42:55.813
> 
> 标签：image, matlab, user-interface, input, figures

全部。我是 Matlab 的新手，我有点卡住了。运行我的实验的最后一个难题是获得一些人工输入（专家监督系统）。这听起来很简单，但我似乎无法弄清楚这一点。

我需要向用户显示四个图像，再加上一个额外的第五个图形（按钮，甚至可以是另一个图像，没关系）。代码应该等到用户单击这些图像/图形中的*任何一个*，然后再继续（也关闭图形）。显然，我需要知道点击了哪个数字。

我似乎没有清楚地记录 Matlab 中的 GUI 编程。或者也许它只是在一个我没有天赋的领域。它肯定比 Visual Studio 更令人困惑，这是肯定的。

在此先感谢您的时间; 我非常感谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:31:02.807

你能把所有五个图像都做成按钮吗？按钮的“CData”属性可用于在 MATLAB 按钮上显示图像。请参阅以下链接以获取示例和解释（希望有意义！）。

[http://www.mathworks.com/matlabcentral/fileexchange/2378-buttons/content/buttons.m](http://www.mathworks.com/matlabcentral/fileexchange/2378-buttons/content/buttons.m)

[http://www.mathworks.com/support/solutions/en/data/1-16V03/](http://www.mathworks.com/support/solutions/en/data/1-16V03/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:58:11.330

使用`menu`：

```
figure(1)
plot...
figure(2)
plot...
figure(3)
plot...
figure(4)
plot...

% this will create a menu of labeled buttons where the user can click
m = menu('Choose a figure','Figure 1','Figure 2','Figure 3','Figure 4','None');

% close all 4 figures
close(1:4)  %will close figures 1 to 4

% --------- your program from here on ---------
if m == 5
     display('You chose no Figure');
else
     display(['You chose Figure:' num2str(m)]);
end
%--------- 
```

`menu`将返回一个与用户单击的选项相对应的数字。

# javascript - 供应商资产文件夹仅显示 .gitkeep rails

> ID：13404927
> 
> 赞同：1
> 
> 时间：2012-11-15T19:42:59.007
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, stylesheet, asset-pipeline

出于某种原因，我的供应商资产（和 lib 资产）文件夹仅将“.gitkeep”显示为样式表和 javascripts 文件夹下的文件。

如何查看其中的实际文件？我知道我使用的所有 gem 都必须有文件，但无法查看其中的样式表（仅显示 .gitkeep）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:24:16.890

这就是 rails3 资产管道的工作方式，Gem 资产根据[guides.rubyonrails.org](http://guides.rubyonrails.org/asset_pipeline.html#adding-assets-to-your-gems)

> 一个很好的例子是 jquery-rails gem，它作为标准 JavaScript 库 gem 随 Rails 一起提供。这个 gem 包含一个继承自 Rails::Engine 的引擎类。通过这样做，**Rails 被告知该 gem 的目录可能包含资产，并且该引擎的 app/assets、lib/assets 和 vendor/assets 目录被添加到 Sprockets 的搜索路径中**。

# powershell - 导出为 CSV 并在屏幕上查看输出

> ID：13404930
> 
> 赞同：7
> 
> 时间：2012-11-15T19:43:25.947
> 
> 标签：powershell

有没有办法将数据导出为 CSV 并同时在屏幕上查看输出？下面的代码产生了我需要的东西，但是如果我使用“tee”而不是 Export-CSV，则数据的存储方式与我在屏幕上看到的方式相同（如我所料）

代码：

```
Get-ChildItem  \\server\share-recurse -Filter "*.pst" | Where {$_.Length -gt 0} | 
Select-Object Directory, Name, Length, CreationTime, LastWriteTime | Export-Csv "C:\CSVs\mynew.csv" 
```

产生：

```
#TYPE Selected.System.IO.FileInfo
"Directory","Name","Length","CreationTime","LastAccessTime","LastWriteTime"
\\server\share\nightly.188\share\name","name.pst","271360","6/4/2009 2:42:21 PM","8/2/2011 12:00:32 AM","6/9/2011 8:58:50 AM" 
```

如果我使用“tee”，屏幕和文件中的输出如下所示：

```
Directory     : \\server\share\nightly.188\share\name
Name          : name.pst
Length        : 271360
CreationTime  : 6/4/2009 2:42:21 PM
LastWriteTime : 6/9/2011 8:58:50 AM 
```

有没有办法格式化屏幕和 csv 看起来像 csv？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T20:23:02.450

```
$foo | ConvertTo-Csv | Tee-Object -File output.csv | ConvertFrom-Csv 
```

# php - 输出不带括号标签的结果

> ID：13404932
> 
> 赞同：0
> 
> 时间：2012-11-15T19:43:32.560
> 
> 标签：php

如何在替换繁琐的括号标签时输出结果？

而不是 [3] => 56531631380

我想要@56531631380& 用于所有项目

```
<?php
$f = fopen ('http://fanpagelist.com/category/top_users/view/list/sort/fans/page1', 'r');
$page = '';
while ($line = fgets($f)) {
  $page .= $line;
}
fclose ($f);
preg_match_all('#(?:(?<=\bhref="/like_box\.php\?id=)|' .
                '(?<=\bsrc="https://graph\.facebook\.com/))\d+#i',
                $page, $result, PREG_PATTERN_ORDER);

print_r ($result);

?>

 <pre>
    <?php

echo preg_replace("/\([^)]+\)/","",$result);

    ?>
    </pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:11:07.813

使用 foreach 循环遍历数组 $results：

```
foreach ($results as $r) {
    echo "@" . $r . "&";
} 
```

# php - 使用 .htaccess 使 url 漂亮

> ID：13404934
> 
> 赞同：0
> 
> 时间：2012-11-15T19:43:40.133
> 
> 标签：php, .htaccess, url-rewriting

我需要采用以下方案：

1.  如果 url 包含任何文件/脚本引用，请保留它而不重写

    ```
    example.com/index.php ---> leave without rewriting url 
    ```

2.  如果 url 不包含任何引用，则类似于：

    ```
    example.com/some-thing-is-here 
    ```

    **将其重写为：**

    ```
    example.com?search.php?q=some-thing-is-here 
    ```

我找到了（1）的解决方案，但它们都因（2）而失败。我是 htaccess 的新手，所以需要有关如何做的建议，或常见的通用方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:45:27.857

以下应该按照您的要求进行。除了排除文件之外，它还排除目录。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://www.example.com/search.php?q=$1 [R,L] 
```

如果您想了解有关干净 URL 的更多信息，[这篇文章有一些很好的信息。](http://www.desiquintans.com/cleanurls)

如果您想了解有关 .htaccess 的更多信息，下面还有一些资源。该文件的使用相当复杂。一旦您知道它的功能，我建议您在需要时在 Google 上搜索所需的功能。它做了很多你可能永远不需要的事情。

1.  [更多 .htaccess 提示和技巧..](http://corz.org/serv/tricks/htaccess2.php)
2.  [终极 Htaccess 文件示例](http://www.askapache.com/htaccess/ultimate-htaccess-file-sample.html)
3.  [URL重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

# c++ - 大数和小数的 C++ 标准库常量？

> ID：13404935
> 
> 赞同：2
> 
> 时间：2012-11-15T19:43:42.087
> 
> 标签：c++, standard-library

C++ 标准库中是否有一个常量，表示“最大可表示数”和“最小可表示数”之类的东西？在 Matlab 中，我们有诸如`EPS`、`realmax`和之类的东西`realmin`。我想知道是否有 C++ 的等价物。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T19:45:51.913

在限制标题中，您可以找到最大值和最小值的模板化函数，

```
std::numeric_limits<TYPE>::max();
std::numeric_limits<TYPE>::min(); 
```

这里有一些参考：[http ://www.cplusplus.com/reference/std/limits/numeric_limits/](http://www.cplusplus.com/reference/std/limits/numeric_limits/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T19:46:18.373

在这里您可以找到现代方式：

[http://en.cppreference.com/w/cpp/types/numeric_limits](http://en.cppreference.com/w/cpp/types/numeric_limits)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:44:44.647

当然，在limits.h中查看INT_MAX等。 [http://www.cplusplus.com/reference/clibrary/climits/](http://www.cplusplus.com/reference/clibrary/climits/)

在 float.h 中查找 DBL_MAX 等。[http://www.cplusplus.com/reference/clibrary/cfloat/](http://www.cplusplus.com/reference/clibrary/cfloat/)

# c++ - 使用最新的 mingw-builds 构建的 Qt 4.8 下的正则表达式未知错误 msvcrt!_iob

> ID：13404940
> 
> 赞同：1
> 
> 时间：2012-11-15T19:44:06.463
> 
> 标签：c++, regex, qt

我刚刚使用最新的 mingw-builds 构建了 Qt 4.8，我所有的 c++ 项目都运行良好，除了这一行：`regex r("\\d+");` 它在我的朋友 PC 上运行良好，使用 Qt 4.8，但使用 msvc2010 进行了调试。如果我正在写这一行：`regex r;` 它不会在这一行中断，但是我试图用“r”做的任何事情都会导致相同的未知错误结果。

如果我查看 (Level,Function,File,Line) 表上的 Qt 调试窗口，我可以看到：

```
0   msvcrt!abort    C:\Windows\system32\msvcrt.dll      0x7fefd9c537c   
1   libstdc++-6!_ZN9__gnu_cxx27__verbose_terminate_handlerEv    C:\MinGW\bin\libstdc++-6.dll        0x6fc5cc82  
2   msvcrt!_iob C:\Windows\system32\msvcrt.dll      0x7fefda12ae0   
3   ??          0x22f530    
4   ??          0x22f530    
5   ??          0x22f962e8  
6   msvcrt!__pioinfo    C:\Windows\system32\msvcrt.dll      0x7fefd993fc0   
7   ??          0x22f5f0    
8   ??          0xffffffff  
9   ??          0x22e37900  
10  ??          0x1 
11  ??          0x22f6d8    
12  ??          0x22ea9610  
13  libstdc++-6!__dynamic_cast  C:\MinGW\bin\libstdc++-6.dll        0x6fce1190  
14  ??          0x22f5b0    
15  libstdc++-6!_ZN9__gnu_cxx27__verbose_terminate_handlerEv    C:\MinGW\bin\libstdc++-6.dll        0x6fc5cc2e  
16  ??          0x22a8c0    
17  ??          0x22f750    
18  ??          0x22f669e0  
19  ??          0x202   
20  ?? 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:02:43.833

`std::regex`是 c++11 标准库的一部分。

Mingw 肯定[还没有包含](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)对正则表达式的支持，而 VS 2010 支持它们。

但是，您可以[`QRegExp`](http://qt-project.org/doc/qt-4.8/QRegExp.html)改用。

# subset - 在不打乱顺序的情况下生成子集

> ID：13404945
> 
> 赞同：0
> 
> 时间：2012-11-15T19:44:27.363
> 
> 标签：subset

给定一组字母 S = { a, b, c, d, e}

如果输入 k = 3，我如何生成以下子集？

abc abd abe acd ace ade bcd bce bde cde

其中子集不违反 S 中的字母顺序。此类问题的名称是什么，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T10:56:15.703

1.  考虑一个由 k 个 1 和 (|S|-k) 个 0 组成的具有 5 个位置（或与 S 中的字符一样多的位置）的二进制字符串。
2.  生成上述字符串的所有 (|S|! / (k! * (|S|-k)!)) 排列。
3.  现在输出对应于 1 的字符。这不会违反 S 中的字符顺序。

# php - 减去 Session[cart] QUANTITY 到 db 中的 STOCK QUANTITY

> ID：13404948
> 
> 赞同：0
> 
> 时间：2012-11-15T19:44:34.243
> 
> 标签：php

我有一个表格，其中显示 ($_SESSION['cart'] 表格，里面有一个表格，我可以**手动**将我想要的数量引入我的 ($_SESSION['cart'] 产品。

```
 <form name="formulario2" method="POST" target="oculto"><input type="hidden" name="action" value="update">
    foreach($_SESSION['cart'] as $product_id => $quantity) { 
    echo "<td align=\"center\"><input type = \"text\" size=\"1\" name=\"qty[$product_id]\" value =\"{$_SESSION['cart'][$product_id]}\"></td>";
}
</form> 
```

然后我使用以下内容更新 ($_SESSION['cart']) 数量

```
 <?php
    if(isset($_POST['action']) && ($_POST['action'] =='update')){
    //
    foreach ($_POST['qty'] as $product_id=> $quantity){
    $qty = (int)$quantity;
    if ($qty > 0){
    $_SESSION['cart'][$product_id] = $qty;
    }
    }
    }
    ?> 
```

现在我想将我已更新到 ($_SESSION['cart']) 的那些数量减去我数据库中 STOCK 中的数量 **。**

我认为在最后一个“foreach（$_POST ['qty']”中，我还应该说将更新的数量减去数据库数量，但我不知道该怎么做。有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:59:03.720

1) 替换`value =\"{$_SESSION['cart'][$product_id]}\"`为`value =\"{$quantity}\"`。您已经在`foreach`语句中检索到它。2）对于数据库，如果您使用 mysql，我建议您使用 PDO 访问数据库（由于缺少缩进且括号不匹配，我已经重写了您的第二个代码块）：

```
<?php
  if ((isset($_POST['action']) && ($_POST['action'] == 'update'))
  {
    foreach ($_POST['qty'] as $product_id => $quantity)
    {
      $qty = intval($quantity);
      $pid = intval($product_id); // ALSO use the intval of the $product_id,
                                  // since it was in a form and it can be hacked
      $_SESSION['cart'][$pid] = $qty; // NOTE: you need to also update the
                                      // session`s cart with 0 values, or
                                      // at least to unset the respective
                                      // product:
                                      // unset($_SESSION['cart'][$pid])
      if ($qty > 0)
      {
        // now update the DB:
        $mysql_host = "127.0.0.1";
        $mysql_user = "root";
        $mysql_password = "";
        $mysql_database = "myShop";
        $dbLink = new PDO("mysql:host=$mysql_host;dbname=$mysql_database;charset=utf8", $mysql_user, $mysql_password, array(PDO::ATTR_PERSISTENT => true));
        $dbLink->setAttribute(PDO::ATTR_EMULATE_PREPARES, true);
        $query = $dbLink->prepare("update `products` set `stock` = `stock` - ? WHERE `productId` = ? limit 1");
        $query->execute(array($qty, $pid));
      }
   }
}
?> 
```

希望对你有帮助！

问候！

# c# - 使用 TagLib sharp 加载专辑封面，然后将其保存到 C# 中的相同/不同文件会导致内存错误

> ID：13404957
> 
> 赞同：5
> 
> 时间：2012-11-15T19:45:13.183
> 
> 标签：c#, mp3, taglib

我的应用程序列出了一个目录中的所有 MP3，当用户选择一个文件时，它会加载标签信息，包括专辑封面。艺术品被加载到一个变量中，以便在用户保存数据时使用。艺术作品也被加载到相框中供用户查看。

```
// Global to all methods
System.Drawing.Image currentImage = null;

// In method onclick of the listbox showing all mp3's
TagLib.File f = new TagLib.Mpeg.AudioFile(file);
if (f.Tag.Pictures.Length > 0)
{
      TagLib.IPicture pic = f.Tag.Pictures[0];
      MemoryStream ms = new MemoryStream(pic.Data.Data);
      if (ms != null && ms.Length > 4096)
      {
           currentImage = System.Drawing.Image.FromStream(ms);
           // Load thumbnail into PictureBox
           AlbumArt.Image = currentImage.GetThumbnailImage(100,100, null, System.IntPtr.Zero);
      }
      ms.Close();
}

// Method to save album art
TagLib.Picture pic = new TagLib.Picture();
pic.Type = TagLib.PictureType.FrontCover;
pic.MimeType = System.Net.Mime.MediaTypeNames.Image.Jpeg;
pic.Description = "Cover";
MemoryStream ms = new MemoryStream();
currentImage.Save(ms, ImageFormat.Jpeg); // <-- Error occurs on this line
ms.Position = 0;
pic.Data = TagLib.ByteVector.FromStream(ms);
f.Tag.Pictures = new TagLib.IPicture[1] { pic };
f.save();
ms.Close(); 
```

如果我加载图像并尝试立即保存它，我会收到“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。” 如果我尝试将 currentImage 保存为 ImageFormat.Bmp，我会收到“GDI+ 中发生一般错误”。

如果我从这样的 url 加载图像，我的保存方法可以正常工作：

```
WebRequest req = WebRequest.Create(urlToImg);
WebResponse response = req.GetResponse();
Stream stream = response.GetResponseStream();
currentImage = Image.FromStream(stream);
stream.Close(); 
```

所以我猜当用户从列表框中选择 MP3 时，我将图像加载到 currentImage 的方式存在问题。

我发现了很多将图像加载和保存到 mp3 的示例，但是当他们在加载后立即尝试保存时似乎没有人遇到这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:13:29.897

感谢吉姆的帮助，但我无法真正使用“使用”块让它工作，所以我猜测流仍在某个地方关闭。我找到了另一种通过存储/保存字节 [] 而不是图像来完成我正在寻找的事情的方法。然后使用以下方法保存它：

```
using (MemoryStream ms = new MemoryStream(currentImageBytes))
{
    pic.Data = TagLib.ByteVector.FromStream(ms);
    f.Tag.Pictures = new TagLib.IPicture[1] { pic };
    if (save)
        f.Save();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T08:29:56.783

您的方法并不是真的错误，只需要更改几件事：

```
// Method to save album art
TagLib.Picture pic = new TagLib.Picture();
pic.Type = TagLib.PictureType.FrontCover;
pic.MimeType = System.Net.Mime.MediaTypeNames.Image.Jpeg;
pic.Description = "Cover";
MemoryStream ms = new MemoryStream();
currentImage.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg); // <-- Error doesn't occur anymore
ms.Position = 0;
pic.Data = TagLib.ByteVector.FromStream(ms);
f.Tag.Pictures = new TagLib.IPicture[1] { pic };
f.save();
ms.Close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T05:19:07.940

您的流媒体内容应该在使用块中，这将自动[处理](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)您的商品并关闭它们。不是很重要，但更容易管理。

您的通用 GDI+ 错误可能是因为您正尝试对流已关闭的文件执行操作或调用方法。

[一探究竟...](https://stackoverflow.com/questions/336387/image-save-throws-a-gdi-exception-because-the-memory-stream-is-closed "通用 GDI+ 错误")

# ios - IOS应用如何存储海量数据？

> ID：13404963
> 
> 赞同：0
> 
> 时间：2012-11-15T19:45:36.470
> 
> 标签：ios, database, core-data, icloud

我知道有 Core Data 可以将信息存储到您的手机上，但是如果您正在制作一个社交媒体应用程序，例如 Instagram，该怎么办。他们在哪里设法存储每个用户的所有信息？我的主要问题是，当应用程序需要存储大量数据时，应用程序设计人员在哪里存储这些信息？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:37:46.707

您可以使用 coredata 来存储数据。图像可以存储在文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:52:24.470

数据以数据库的形式存储在他们的服务器上。

[http://en.wikipedia.org/wiki/Database](http://en.wikipedia.org/wiki/Database)

当应用程序需要检索一些用户的信息，如喜欢、照片等时......向服务器发出 HTTP 请求以从数据库中请求数据。

[http://en.wikipedia.org/wiki/Http_request#Request_message](http://en.wikipedia.org/wiki/Http_request#Request_message)

PHP 和 MySQL 是标准的低端语言和数据库，易于学习和熟悉。更高级的数据库倾向于在数据库上使用缓存层和其他类型的层，以防止数据丢失、提高读写速度、缓存请求数据等。此外，其他公司可能会选择使用 NoSQL 数据库。

这里有 NoSQL 和 SQL 数据库之间的比较：http: [//metadata-standards.org/Document-library/Documents-by-number/WG2-N1501-N1550/WG2_N1537_SQL_Standard_and_NoSQL_Databases%202011-05.pdf](http://metadata-standards.org/Document-library/Documents-by-number/WG2-N1501-N1550/WG2_N1537_SQL_Standard_and_NoSQL_Databases%202011-05.pdf)

可以在此处找到更详细的比较图表：[http ://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems](http://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems)

一种数据已被请求并传送到您的 iOS 设备，它可以被操纵以多种不同的方式存储。

Core Data 和 SQLite 是存储数据的常用方法，因为它们相互派生，大多数 SQL 数据库在模式方面都非常熟悉。

# git - 带有专有代码的 Git

> ID：13404966
> 
> 赞同：0
> 
> 时间：2012-11-15T19:45:46.327
> 
> 标签：git, version-control

我正在考虑从中央存储版本系统转移到 git。我怎么会担心这将如何影响源代码的安全性？我知道版本控制系统在这里并不是我的问题，但我不禁担心源代码的可用性如何影响开发人员处理它的方式？这个事情谁有经验？迁移到分布式版本系统时是否会增加泄漏风险。我需要更具体地担心什么？可以做些什么来保证我的来源安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:09:59.197

一旦有人复制了你的源代码，无论是 git、svn 还是一些高端解决方案，你总是冒着有人复制它的风险。与其他一些源代码控制解决方案相比，Git 确实为窃取它的人提供了更多的历史记录。

话虽如此，我们使用 gitolite，您可以使用 ssh 密钥管理来控制谁可以访问各个存储库以及他们可能拥有哪些访问控制。您还可以在服务器上实现挂钩以记录使用情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T20:10:22.790

分布式 VCS 的安全性与集中式 VCS 相同。大多数人也将 Git 作为集中式 VCS 运行——它绝对适合这一点。唯一的区别是版本历史可供本地客户端使用。

如果问题严重，可以添加一个 Hook 来检查谁在 repo 中做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T20:09:35.260

我对大多数集中式版本控制系统不是很熟悉，主要是`svn`. 但至少这样，开发人员仍然可以通过向服务器询问项目的整个历史来访问它。他们甚至可以使用`git-svn`该历史记录创建自己的 git 存储库。

即使有一些版本控制系统会阻止访问历史，开发人员仍然需要能够获得当前版本的完整副本，这可能具有绝大多数价值。

没有办法标记谁签出了副本，即使没有任何东西可以阻止想要发布代码而违背所有者意愿的人删除任何此类标记。

# razor - 可编辑的详细信息模板 Kendo UI 网格

> ID：13404967
> 
> 赞同：5
> 
> 时间：2012-11-15T19:45:48.687
> 
> 标签：razor, kendo-ui

**更新** 我已经设法获得带有值和编辑器模板的表单渲染（见图）。

![抱歉，标签涂黑了。 保密协议的东西。](../Images/a50a6a5e513f88305b4a7b607737a0ec.png) 抱歉，标签涂黑了。保密协议要求...

这现在适用于多行，因为我正在使用该行的 uid 为详细信息模板提供一个唯一的名称：

```
@(Html.Kendo().TabStrip()
    .Name("Details_#=uid#") 
```

我已将下面的源更新为最新版本，并包含了我仍然希望帮助解决的问题列表。

显着的问题：

*   保存更改时将详细信息模板与网格一起序列化
*   使用视图模型上的数据注释分配标签和验证规则（这似乎不起作用，因为我似乎无法让 Html 助手工作。建议会很棒！

**原文贴文（源代码已更新）**

我正在尝试创建一个批处理网格，其中每个项目都包含一个详细信息模板。

每个详细信息模板都包含一个标签条，我想在其中保存额外的表单数据。

现在，我有标准的批处理网格工作，但我似乎无法在屏幕上获取每个项目的信息并使其可编辑。此外，当存在多于一行时，详细信息模板会中断。模板仍然呈现，但按钮不起作用，因为两个模板具有相同的 id 可以理解地破坏用户的交互能力，但我不确定如何确保每个行模板的唯一标识符（可能以某种方式使用父 uid？）

完成第一步后，我也不确定如何序列化此表单数据，但如果证明有必要，我可以为此提出一个单独的问题。

**网格**

```
@(Html.Kendo().Grid(Model.ItemModelList)
.Name("ItemGrid")
.Columns(columns =>
{
    //Other columns omitted for brevity
    columns.Bound(i => i.Description).Width(100);
    columns.Command(command =>
    {
        command.Destroy();
    }).Width(60);
})
.ClientDetailTemplateId("ItemDetails")
.ToolBar(toolbar =>
{
    toolbar.Create();
    toolbar.Save();
})
.Editable(editable => editable.Mode(GridEditMode.InCell).CreateAt(GridInsertRowPosition.Bottom))
.Pageable()
.Sortable()
.Scrollable()
.Resizable(resize => resize.Columns(true))
.DataSource(dataSource => dataSource
    .Ajax()
    .Batch(true)
    .ServerOperation(false)
    .Events(events => 
    {
        events.Error("ItemGrid_ErrorHandler");
    })
    .Model(model =>
    {
        model.Id(i => i.ItemModelID);
        model.Field(i => i.DimensionUOM).DefaultValue("in");
        model.Field(i => i.WeightUOM).DefaultValue("lbs");
    })
    .Create(create => create.Action("CreateProducts", "ItemGrid"))
    .Read(read => read.Action("GetProducts", "ItemGrid"))
    .Update(update => update.Action("UpdateProducts", "ItemGrid"))
    .Destroy(destroy => destroy.Action("DeleteProducts", "ItemGrid"))
) 
```

)

**详细模板**

```
<script id="ItemDetails" type="text/kendo-tmpl">

@(Html.Kendo().TabStrip()
    .Name("Details_#=uid#")
    .SelectedIndex(0)
    .Items(items =>
    {
        items.Add().Text("test").Content(@<div>      
            <table id="testForm">
                <tr>
                    <td>TEST</td>
                </tr>
                <tr>
                </tr> 
            </table> 
        </div>);

        items.Add().Text("test2").Content(@<div>      
            <table id="test2Form">
                <tr>
                    <td><label>A</label></td>
                    <td><label>B</label></td>
                    <td><label>C</label></td>
                    <td><label>D</label></td>
                    <td><label>E</label></td>
                </tr>
                <tr>
                    <td>
                        <input class="k-textbox" value="#=objectA#">
                    </td>
                    <td>
                        @(Html.Kendo().DropDownList()
                            .Name("objectB")
                            .Value("#=objectB#")
                            .DataTextField("Text")
                            .DataValueField("Value")
                            .BindTo(new SelectList((System.Collections.IEnumerable)ViewBag.objectBListing, "Value", "Value"))
                            .ToClientTemplate()
                        )
                    </td>
                    <td>
                        @(Html.Kendo().DropDownList()
                            .Name("objectC")
                            .Value("#=objectC#")
                            .DataTextField("Text")
                            .DataValueField("Value")
                            .BindTo(new SelectList((System.Collections.IEnumerable)ViewBag.objectCListing, "Value", "Value"))
                            .ToClientTemplate()
                        )
                    </td>
                    <td><input class="k-textbox" value="#=objectD#"></td>
                    <td><input class="k-textbox" value="#=objectE#"></td>
                </tr>
            </table> 
        </div>);
    })
    .ToClientTemplate()
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-22T04:54:35.293

1.  您应该为您的额外信息创建一个模型并将其添加为 ItemModelList 的属性，如下所示：

    ```
    public class BaseMode
    {
        public string UID { get; set; } // Create your own UID, distinguished from Telerik UID by casing.
    }

    public class ExtraInfoModel : BaseModel
    {
        [DisplayName("Object A")]
        [Required] // For example
        public string ObjectA { get; set; }

        [DisplayName("Object B")]
        [UIHint("DropDownList")]
        public int? ObjectB { get; set; }

        [DisplayName("Object C")]
        public int? ObjectC { get; set; }

        public ExtraInfoModel(string uid)
        {
            this.UID = uid;
        }
    }

    public class ItemModelList : BaseModel
    {
        public ExtraInfoModel ExtraInfo { get; set; }

        public ItemModelList()
        {
            this.UID = Guid.NewGuid().ToString(); // Not sure about syntax, please review.
            this.ExtraInfo = new ExtraInfoModel(this.UID); // Guarantee ExtraInfo.UID is the same as parent UID when you get model from DB.
        }
    } 
    ```

2.  使用第二个选项卡中的剑道网格为您的详细额外信息创建部分视图：

    ```
    @model ExtraInfoModel

    @(Html.Kendo().TabStrip()
        .Name("Details_#=UID#")
        .SelectedIndex(0)
        .Items(items =>
        {
            items.Add().Text("test").Content(@<text>
                <div>      
                    <table id="testForm">
                        <tr>
                            <td>TEST</td>
                        </tr>
                        <tr></tr> 
                    </table> 
                </div>
            </text>);

            items.Add().Text("test2").Content(@<text>
                @(Html.Kendo().Grid<ExtraInfoModel>()
                    .Name("gvDetail_#=UID#")
                    .Columns(c =>
                    {
                        c.Bound(m => m.ObjectA).ClientTemplate(Html.Kendo().TextBox()
                            .Name("ObjectA")
                            .HtmlAttributes(new { id = "ObjectA_#=UID#" })
                            .Value(Model.AgencyCode)
                            .ToClientTemplate()
                            .ToHtmlString());
                        c.Bound(m => m.ObjectB).ClientTemplate(Html.Kendo().DropDownList()
                            .Name("ObjectB")
                            .HtmlAttributes(new { id = "ObjectB_#=UID#" })
                            .Value((Model != null && Model.ObjectB.HasValue) ? Model.ObjectB.ToString() : string.Empty)
                            .OptionLabel("Select B...")
                            .BindTo(ViewBag.Data)
                            .ToClientTemplate()
                            .ToHtmlString());

                         // Config ObjectC same as ObjectB.
                    })
                    .BindTo(new ExtraInfoModel[] { Model }) // Your detail grid has only one row.
                )
            </text>);
        })
    ) 
    ```

3.  在您的主视图页面中，使用服务器详细信息模板而不是客户端详细信息模板。我建议使用服务器模板，因为我在步骤 2 中使用的是服务器绑定。当然，您可以将其更改为 ajax 绑定或本地绑定（通过定义事件 OnDetailExpand）

    ```
    @Html.Kendo().Grid(Model.ItemModelList)
        ...
        .DetailTemplate(@<text>
            @Html.Partial("YourPartialName", item.ExtraInfo) // item stands for ItemModelList, which is the binding data item.
        </text>) 
    ```

4.  最后一个，对于您的第一个问题，在保存时序列化额外的信息数据，我们应该处理每个额外的信息属性的更改事件，以为主数据项设置值和脏标志。请记住，批量编辑中的剑道网格仅提交脏数据项。返回第 2 步：

    ```
     c.Bound(m => m.ObjectB).ClientTemplate(Html.Kendo().DropDownList()
                            .Name("ObjectB")
                            .HtmlAttributes(new { id = "ObjectB_#=UID#" })
                            .Value((Model != null && Model.ObjectB.HasValue) ? Model.ObjectB.ToString() : string.Empty)
                            .OptionLabel("Select B...")
                            .BindTo(ViewBag.Data) 
                            .Events(e => e.Change("onChangeObjectB")) // Added this line
                            .ToClientTemplate()
                            .ToHtmlString());

    <script type="text/javascript">
        function onChangeObjectB(e) {
            var selectedValue = this.value();

            var sender = e.sender;
            if (sender != undefined && sender.length > 0) {
                var detailRow = sender.closest(".k-detail-row");
                var masterRow = detailRow.prev();
                var mainGrid = $("#ItemGrid").data("kendoGrid");
                if (mainGrid != null) {
                    var masterRowIndex = masterRow.parent().find(".k-master-row").index(masterRow);

                    var dataItem = mainGrid.dataSource._data[masterRowIndex];
                    dataItem.ObjectB = selectedValue;
                    dataItem._dirty = true;
                }
            }
        }
    </script> 
    ```

    保存操作将正常工作。

# iphone - 运行时捕获方法

> ID：13404969
> 
> 赞同：0
> 
> 时间：2012-11-15T19:45:51.540
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [如何使对象接收到的每条消息都是线程安全的？](https://stackoverflow.com/questions/8763028/how-can-i-make-every-message-an-object-receives-thread-safe)

在做一些事件时我需要捕捉另一个类的动作

例如在做一些事件时，SomeClass 调用 someMethod，我需要 catch someMethod

```
@implementation MyClass

- (void)viewDidLoad
{
    [super viewDidLoad];

    Class newClass = objc_getClass("SomeClass");

}
@end 
```

# python - 使用全局变量

> ID：13404972
> 
> 赞同：0
> 
> 时间：2012-11-15T19:46:01.693
> 
> 标签：python, global-variables

我的问题是指我之前的 python 问题，我能够解决并使其完美运行。 [我如何打印一些东西然后它的列表？](https://stackoverflow.com/questions/13382293/how-do-i-print-something-and-then-its-list)

最近，我被介绍了全局变量，但我不知道如何使用它们，我有两个不允许更改的函数：

```
def who_exports(product):
    return products[product]

def what_exports(country):
    return countries[country] 
```

我必须编写一个名为 prepare_data() 的函数来准备数据并使所有变量和这两个函数工作。它为 who_exports 和 what_exports 准备数据。它应该像这样工作：

```
who_exports("nickel")
{'Botswana', 'Colombia', 'Cuba'} 
```

接着

```
what_exports("Yemen")
{' oil, coffee, fish, liquefied natural gas'} 
```

我一直在尝试，我要么得到全局名称“产品，国家，国家，......”未定义或 keyerror：“nickel”。

```
def prepare_data():
    global products
    global product
    global countries
    global country

    countries={}
    products={} 
```

帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:19:27.237

我不清楚你为什么需要`country`和`product`作为全局变量，因为你可以调用`who_exports('nickel')`，指定特定的`product`.

不过，这就是我要为`countries`and做的事情`products`。

```
def prepare_data():
    countries = {'Yemen' : 'oil, coffee, fish, liquefied natural gas'}
    products = {'nickel' : ['Botswana', 'Colombia', 'Cuba']}
    return countries, products

countries, products = prepare_data() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:54:06.633

考虑使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)而不是字面字典。

# ios - 安装 Xcode 和 iOS SDK 问题？

> ID：13404974
> 
> 赞同：1
> 
> 时间：2012-11-15T19:46:05.703
> 
> 标签：ios, xcode

我最近刚下载`Xcode 3.2.6`到我的电脑上。安装好后打开发现没有安装iOS SDK。为什么？需要单独下载吗？有没有地方让我下载它而不是重新安装 Xcode？

我做了一些研究，看到了这个，但不记得我是否看到了`iOS SDK`要安装的。我想它只是说`Xcode Toolset`。

![](../Images/a08fe763849fd5244a408a5e1c1d816e.png)

# android - Dalvik 内存碎片处理

> ID：13404979
> 
> 赞同：2
> 
> 时间：2012-11-15T19:46:39.900
> 
> 标签：android

你能告诉我 Dalvik 内存碎片是如何处理的吗？例如，如果我有一个应用程序分配一些小内存。但释放其中一些，然后尝试分配一大块。Dalvik 如何处理这样的请求，堆中的所有“漏洞”？

我需要帮助从 logcat 中理解这一点：

```
11-15 02:50:21.837 D/dalvikvm(  990): GC_BEFORE_OOM freed 16K, 40% free 9830K/16384K, paused 90ms, total 90ms
11-15 02:50:21.837 E/dalvikvm-heap(  990): Out of memory on a 5032864-byte allocation. 
```

它说我的应用程序使用了 16384K 中的 9830K。而且我知道 16M 是最大堆大小，它不能再增长了。

但这应该使 6554K 空闲（16384k - 9830K）。为什么 dalvik 说“在 5032864 字节分配上内存不足。那是4914K，比我留下的要小。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T19:53:17.850

看看这个，它可能会帮助您了解如何处理 dalvik 内存碎片

[链接1](http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-15T19:58:37.097

像垃圾收集器 (GC) 的大多数实现一样，Dalvik/Java 的 GC 使用双重引用：内存中的引用变量不直接指向它们的对象，而是指向最终指向单个对象的第二个引用。因此，当应用程序需要大内存分配时，GC 可以自由地移动内存分配并将漏洞融合在一起，而不会以任何方式影响 Java 分配的各种引用变量。

# xml - 解组此 xml 时遇到问题

> ID：13404985
> 
> 赞同：2
> 
> 时间：2012-11-15T19:46:56.920
> 
> 标签：xml, go

试图了解如何在 Go 中解组 XML。通读多个示例和 stackoverflow 问题。我想要的是一个包含系统上安装的所有补丁的切片。我什至无法将补丁解组，没有错误，只是一个空切片。可能做一些基本错误的事情，提前感谢您的任何建议。

```
<probe version="1.3" date="2012-03-26:17:10">
     <properties>
     </properties>
     <patches group="server">
        <file name="5002012-02-09CR00000server.jar"/>
        <file name="5002012-02-17CR00001server.jar"/>
     </patches>
     <patches group="client">
        <file name="5002012-02-09CR00000client.jar"/>
        <file name="5002012-02-17CR00001client.jar"/>
     </patches>
</probe> 
```

```
type Patch struct {
    group string `xml:"group,attr"`
}

type Probe struct {
    XMLName xml.Name `xml"probe"`
    Patches []Patch `xml:"patches"`
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T20:38:34.700

我相信你遇到的问题是`xml`包没有填充未导出的字段。xml文档说：

> 因为 Unmarshal 使用反射包，它只能分配给导出的（大写）字段。

您需要做的就是更改`group`为`Group`：

```
type Patch struct { Group string `xml:"group,attr"` } 
```

您在这里有一个工作示例： [http ://play.golang.org/p/koSzZr-Bdn](http://play.golang.org/p/koSzZr-Bdn)

# drupal-7 - 在用户页面上显示相关用户

> ID：13404995
> 
> 赞同：0
> 
> 时间：2012-11-15T19:47:34.453
> 
> 标签：drupal-7, drupal-views

在用户页面（例如 /user/20）上，我想显示一些相关用户的视图。每个用户都有一个指向用户的实体引用类型的字段。如果用户指向同一个用户，则这些用户是相关的。

我尝试使用 Entity Views Attach 模块执行此操作，但没有成功（尽管我认为应该可以使用它）。

有人可以给我一些关于如何做到这一点的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:03:15.363

我将使用上下文过滤器创建一个块（或 eva）视图，并使用您的参考字段，该字段将来自 url（或节点的作者）的 uid 作为父级。

也许其他[帖子](https://stackoverflow.com/a/11956167/1437542)可以提供帮助

公关

# ruby-on-rails - 在低服务器负载下超过heroku postgres 20个连接

> ID：13404998
> 
> 赞同：0
> 
> 时间：2012-11-15T19:47:50.177
> 
> 标签：ruby-on-rails, heroku

我的应用程序是否做错了什么，以某种方式将数据库连接保持得太久，或者即使在应用程序从高活动期消退到低活动期后，postgres 连接数仍保持高水平是正常行为？

我的一个 Heroku 应用程序在基本计划上运行（允许 20 个连接），当我使用监视服务器活动时，`heroku logs --tail`我无法在另一个 shell 窗口中使用连接到控制台`heroku console`

当我运行时，`heroku pg:info`我注意到连接被固定在最大值，20，尽管当时服务器负载非常低......几个并发用户。

唯一不同的是我在 30 分钟前启动了 2 个 web dynos 和 4 个 worker dynos 来监控使用更多 worker 运行一些电子邮件作业的吞吐量。但之后连接数保持在 20 个。

在非常低的负载条件下，Heroku dyno 的数量（通常是空闲的）会影响保持打开的数据库连接的数量吗？

（目前我的服务器回到了 2 个 web dyno 和 1 个 worker dyno 并且正在经历中等负载 - 一封电子邮件正在发出，人们正在点击链接。连接稳定在 12 ......让我想知道是否有一些关于如果您的数据库仅限于 X 连接，您可以可靠地运行多少个测功机。）

# asp.net - 页面回发网页闪烁

> ID：13404999
> 
> 赞同：0
> 
> 时间：2012-11-15T19:47:55.417
> 
> 标签：asp.net, postback

我在页面上有 15 个下拉菜单，它们是级联下拉菜单。第二个下拉列表根据第一个下拉加载数据。

每当我更改下拉项目时。它被发回，页面闪烁我可以将其删除，以便在下一个下拉列表加载时我的页面保持静止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:29:37.233

您想做以下两件事之一：要么完全避免回发，要么将其设置为不刷新整个页面。我可以想到几种方法来解决这个问题：

1）看一下asp.net AJAX工具包中的[CascadingDropDown控件](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

2) 研究使用 UpdatePanel 控件使具有级联内容的页面部分异步回发

3) 如果级联下拉菜单的内容是静态的，您可能需要在客户端脚本中实现下拉菜单；使用原生 JavaScript 事件或 jQuery 等 JavaScript 框架。 [例子](http://www.c-sharpcorner.com/UploadFile/vemuhemanth/cascading-dropdown-in-Asp-Net-using-jquery/)