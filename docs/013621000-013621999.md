# StackOverflow 问答 13621000-13621999

# javascript - 如何在不使用 JavaScript 中的 XHR 对象的情况下获取 http 请求

> ID：13621009
> 
> 赞同：0
> 
> 时间：2012-11-29T07:42:50.997
> 
> 标签：javascript, jquery, ajax, http

是否可以在不使用 XmlHttpRequest 的情况下从 URL 获取信息。

我正在尝试通过 XHR 对象从 URL 从我的 noSqlDatabase 获取文档，但它不起作用。**但是**如果我在浏览器中输入 URL，我会得到数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:52:15.847

如果“获取信息”是指从第 3 方 url 加载数据而不使用 XHR 请求，那么答案是肯定的，但需要注意。

一种常用的跨域加载json数据的方法叫做jsonp。本质上，您在页面上定义了一个函数：

```
var x = function(data){ //do something with data } 
```

然后，您创建一个脚本标记并将其附加到您的页面，其中 src 属性指向其他一些返回 js 文件的 url，如下所示：

```
x({ param: 'some data' }); 
```

然后 x 函数在您的页面上执行并可以访问对象中的“参数”数据。您还可以使用此方法传递字符串或数字。

还有另一种方法涉及 iframe 和 iframe 的 window.name 属性。这种技术有点老，但仍然有效，但我不会在这里详细介绍它。您可以在这里阅读更多相关信息，[http://skysanders.net/subtext/archive/2010/10/11/leveraging-window.name-transport-for-secure-and-efficient-cross-domain-communications.aspx](http://skysanders.net/subtext/archive/2010/10/11/leveraging-window.name-transport-for-secure-and-efficient-cross-domain-communications.aspx)，和其他地方。

# gmail - Google 协作平台：单击链接 mailto: my.name@domain.com 不再打开 gmail

> ID：13621010
> 
> 赞同：-1
> 
> 时间：2012-11-29T07:42:56.853
> 
> 标签：gmail, google-sites

在我的 Google 站点上单击链接 mailto: my.name@domain.com 不再打开 gmail。有什么改变吗？谢谢你给的信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:48:46.880

不知道你用的是哪个浏览器。可能是浏览器特定的问题。

检查不同的浏览器，看看它是否对所有人都一样。

另外，试试这个链接。它可以帮助你——

[http://googlesystem.blogspot.in/2012/02/open-mailto-links-using-gmail-in-google.html](http://googlesystem.blogspot.in/2012/02/open-mailto-links-using-gmail-in-google.html)

# scrapy - Scrapy如何过滤爬取的url？

> ID：13621014
> 
> 赞同：3
> 
> 时间：2012-11-29T07:43:15.967
> 
> 标签：scrapy

我想知道 Scrapy 是如何过滤那些爬取的 url 的？它是否存储了所有被抓取的 url `crawled_urls_list`，当它获得一个新的 url 时，它会查找列表以检查该 url 是否存在？

**CrawlSpider** (/path/to/scrapy/contrib/spiders/crawl.py)的这个过滤部分的代码在哪里？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:50:50.517

默认情况下，scrapy 保留已见请求的指纹。此列表保存在 python 集中的内存中，并在 JOBDIR 变量定义的目录中附加了一个文件调用 requests.seen。如果您重新启动scrapy，文件将重新加载到python集中。控制这个的类在 scrapy.dupefilter 如果你需要不同的行为，你可以重载这个类。

# windows-phone-7 - 如何在 Bing 地图、Windows Phone 中切换图钉信息框的显示/隐藏状态？

> ID：13621021
> 
> 赞同：0
> 
> 时间：2012-11-29T07:43:53.083
> 
> 标签：windows-phone-7, toggle, bing-maps, pushpin, infobox

这是一个简单的应用程序。它显示基于数据绑定的动态多个图钉。

当用户点击图钉时，信息框将显示在上方，如图所示。

![在此处输入图像描述](../Images/ddf728812608b6d2fc70f57853bf705b.png)

当用户再次点击图钉时。信息框将折叠。

如果用户点击地图中不是图钉的任何区域。所有图钉的信息框都将折叠。

另一件事是；点击信息框时，它将导航到该位置的详细信息页面。

这是我的资源部分。

```
<phone:PhoneApplicationPage.Resources>
    <ControlTemplate x:Key="currentPushPin" TargetType="my:Pushpin">
        <Grid x:Name="ContentGrid"
           Width="58"
           Height="76"
           Margin="0">
            <Image Source="images/currentPin.png" Stretch="Fill"/>
        </Grid>
    </ControlTemplate>

    <ControlTemplate x:Key="normalPushPin" TargetType="my:Pushpin">
        <StackPanel>
            <ContentPresenter x:Name="content" HorizontalAlignment="Center"/>
            <Path Data="M0,0 L0,1 L1,0"
                        Fill="Black" Stretch="Fill" Margin="15,0" Height="12"
                                Width="18" Visibility="{Binding RelativeSource={RelativeSource TemplatedParent},
                                Path=Content.Visibility, Mode=TwoWay}" HorizontalAlignment="Left" />
            <Image Source="images/Pin.png" Stretch="None" HorizontalAlignment="Left"/>
        </StackPanel>
    </ControlTemplate>

    <DataTemplate x:Key="LogoTemplate">
        <my:Pushpin Background="#FFB6DE2E" Location="{Binding location}" Tap="Pushpin_Tap">
            <my:Pushpin.Content>
                <Border Background="Black" Width="130" Visibility="Collapsed" x:Name="border"  HorizontalAlignment="Center" >
                    <StackPanel>
                        <TextBlock TextAlignment="Center" Text="{Binding title}"/>
                    </StackPanel>
                </Border>
            </my:Pushpin.Content>
        </my:Pushpin>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

这是我的地图和 MapItemControl。

```
<my:Map ZoomLevel="10"  Margin="0,-21,0,0" Name="myMap" CredentialsProvider="AsbJ8nhHrawCJNpgYLyPRSunojuLOKcZtMj_ZUEgEGW5dSsczqrQHDZwbi0i2bFY" Tap="map_Tap">
            <my:Pushpin Name="currentPin" Template="{StaticResource currentPushPin}" Margin="0,-22,0,0">
            </my:Pushpin>
            <my:MapItemsControl ItemTemplate="{StaticResource LogoTemplate}" ItemsSource="{Binding PushpinCollection}" >
            </my:MapItemsControl>
        </my:Map> 
```

问题是我应该在这些事件处理程序中编写什么代码？另一个问题是如何让信息框在被点击时导航到其他页面。

```
//Event Handler for pushpins
    private void Pushpin_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        //What I should write here?
    }

    private void map_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        //What I should write here?
    } 
```

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T15:49:45.807

我知道这一点很晚，但是为有类似问题的人省去一些痛苦 - 看看[http://igrali.com/2012/01/07/show-a-tooltip-for-tapped-pushpin-on -Windows-电话/](http://igrali.com/2012/01/07/show-a-tooltip-for-tapped-pushpin-on-windows-phone/)

它可能会给你一些关于如何进行的指导。

# android - Android - .read() 方法

> ID：13621022
> 
> 赞同：1
> 
> 时间：2012-11-29T07:43:54.260
> 
> 标签：android, audiorecord

我正在尝试将记录的数据读入短数组。我想继续记录和阅读，直到写满为止。我的代码： [http://pastebin.com/r6yuPn82](http://pastebin.com/r6yuPn82) 不幸的是，应用程序在调用 startRecording 方法后崩溃。错误： [http](http://pastebin.com/9jwrPLNc) ://pastebin.com/9jwrPLNc 请问您能帮我修复它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T07:59:04.903

您的 AudioRecord 未正确初始化。

“由：java.lang.IllegalStateException：在**未初始化的 AudioRecord**上调用 startRecording() 引起。”

把它放在你的清单中：

```
<uses-permission android:name="android.permission.RECORD_AUDIO"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:12:01.347

在从 MIC 读取到缓冲区之前，请确保您正在录音。

[请参阅此帖子](https://stackoverflow.com/questions/9742259/android-audiorecord-class-does-not-read-data-audiodata-and-fftarray-return-ze)中的答案，内容如下：

```
 short[] audioData = new short[bufferSize];

 int offset =0;
 int shortRead = 0;

 //start tapping into the microphone
 audioRecored.startRecording();

 //start reading from the microphone to an internal buffer - chuck by chunk
 while (offset < bufferSize)
 {
    shortRead = audioRecored.read(audioData, offset ,bufferSize - offset);
        offset += shortRead;
 }

 //stop tapping into the microphone
 audioRecored.stop(); 
```

# android - 遇到“没有这样的表”的随机 SQLiteException

> ID：13621023
> 
> 赞同：1
> 
> 时间：2012-11-29T07:43:56.140
> 
> 标签：android, database

奇怪的异常随机引发（不在特定场景/模式中），异常如下所示`"Caused by: android.database.sqlite.SQLiteException: no such table: Courses: , while compiling: SELECT * FROM Courses"`

每次它运行完美但有时它会抛出异常，所以很明显数据库总是在那里，表也在该数据库中。

[日志输出](http://pastebin.com/M84gHf1b)

下面相关的 logcat 输出

```
11-29 01:16:02.570: E/AndroidRuntime(13916): FATAL EXCEPTION: main
11-29 01:16:02.570: E/AndroidRuntime(13916): java.lang.RuntimeException: Unable to resume activity {com.nobel.biocare/com.nobel.biocare.Courses_Events}: android.database.sqlite.SQLiteException: no such table: Courses: , while compiling: SELECT * FROM Courses
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2124)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2139)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1672)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.os.Looper.loop(Looper.java:123)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.ActivityThread.main(ActivityThread.java:3687)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at java.lang.reflect.Method.invokeNative(Native Method)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at java.lang.reflect.Method.invoke(Method.java:507)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at dalvik.system.NativeStart.main(Native Method)
11-29 01:16:02.570: E/AndroidRuntime(13916): Caused by: android.database.sqlite.SQLiteException: no such table: Courses: , while compiling: SELECT * FROM Courses
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1235)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1189)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at com.nobel.biocare.database.DBHelper.read_Courses(DBHelper.java:444)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at com.nobel.biocare.Courses_Events.onResume(Courses_Events.java:131)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.Activity.performResume(Activity.java:3832)
11-29 01:16:02.570: E/AndroidRuntime(13916):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2114)
11-29 01:16:02.570: E/AndroidRuntime(13916):    ... 12 more 
```

[DBHelper 类](http://pastebin.com/u0Vr37Bk)

下面是 DBHelper 类的相关代码片段

```
public Cursor read_Courses(SQLiteDatabase db) {
    return db.query(TBL_Courses, null, null, null, null, null, null);
} 
```

[发生此异常的活动类](http://pastebin.com/Mc2at369)

下面是相关的活动代码片段

```
protected void onResume() {
    super.onResume();
    MyOpenDB();
    setTab_Images(Common.Courses_Events);

    if (!myApp.checkNetworkRechability()) {
        Show_No_Internet();
    }

    if (is_DB_DBHelper_Null() && isDBOpen()) {
        fetch_Courses_from_DB(dbHelper.read_Courses(MyDb));
        fetch_Events_from_DB(dbHelper.read_Events(MyDb));
    }

} 
```

我对如何解决这个异常一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:53:08.987

> 所以很明显数据库总是在那里

同意，错误应该是不同的。

> ...并且表也在该数据库中。

不，SQLite 不会说谎。`no such table`意味着该连接在那个时间点无法看到具有该名称的表。

一些原因可能是

*   数据库创建中的错误，有时不会创建该表、使用不同的名称或删除该表
*   你在错误的数据库中查找
*   您从多个线程同时使用数据库，但创建尚未完成。

看看你的代码：你的 DBHelper 有那个`createDatabaseFile`无处被调用的方法。相反，您使用创建空数据库的`MyOpenDB`方法。`SQLiteDatabase.openDatabase(.... SQLiteDatabase.CREATE_IF_NECESSARY)`我根本不明白这将如何运作。您必须使用创建数据库的代码:)

[https://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)是一个看起来做对了的小型库。互联网上的其他资产数据库示例都`SQLiteOpenHelper`以 IMO 不安全的方式滥用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:41:55.557

我觉得这种方法是异常的，因为

返回 db.query（TBL_Courses，空，空，空，空，空，空）；

您没有传递列值 na！

查询应该像

return db.query(TBL_Courses, allColumns, null, null, null, null, null);

其中 allColumns 是私有 String[] allColumns = { DB.column_name, DB.column_name1, DB.column_name1, DB.column_name2,DB.column_name3 };

由于列未通过，因此显示该错误。

# html - Ul li style-type:decimal 在 IE7 中不起作用？

> ID：13621024
> 
> 赞同：0
> 
> 时间：2012-11-29T07:43:55.407
> 
> 标签：html, css, html-lists

在 ul li 中使用 style-type:decimal 时，IE7 浏览器最多占用 9 个数字，之后它以 0 而不是 10 开头。这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:18:52.190

ul 表示“无序列表”
ol 表示“有序列表”

OL 是您尝试实现的目标。因此，将您的 ul-Tag 更改为 ol：

```
<ol>
    <li>test</li>
</ol> 
```

见这里：[小提琴](http://jsfiddle.net/GkBpA/1/)

小心css-resets。有些会覆盖 ol 列表样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:18:31.137

属性名称是`list-style-type`，但我想这就是您所拥有的，如果您首先获得数字而不是项目符号 a `ul`。

左边的数字可能会被截断，因为在项目内容的左边没有足够的空间容纳多于一位的数字。这取决于`ul`and`li`元素的左边距和左边距（以浏览器相关的方式），因此您可能已经在 CSS 中设置了它们，现在您必须修改这些设置以留出更多空间。

# rspec - 运行从 Gmail 发送消息的失败 Rspec，它在 RubyMine 中运行良好

> ID：13621025
> 
> 赞同：0
> 
> 时间：2012-11-29T07:44:05.117
> 
> 标签：rspec, terminal, gmail, rubymine

我在 RubyMine 中有一些 rspec 测试，当我从 RubyMine 界面运行它们时，它们运行良好。但是当我尝试从终端运行相同的测试时，它们失败了。我使用 ruby​​-gmail gem 使用这种结构发送邮件槽 gmail：

```
@gmail.deliver do
        to current_unread_mail.reply_to
        subject "Re: " + current_unread_mail.title
        body reply_body
end 
```

如果我从 RubyMine 运行，它会成功发送邮件，但是当我像这样运行我的 rspec 时没有发送邮件（但没有引发任何类型的异常）

```
rspec test_spec.rb 
```

所以我认为这是因为 RubyMine 在运行时添加了一些额外的 rspec 参数。

RubyMine 中 Rspec 输出的第一行是这样的：

```
/home/user/.rvm/rubies/ruby-1.9.2-p318/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /home/user/.rvm/gems/ruby-1.9.2-p318@global/bin/rspec /home/user/path_to_spec/test_spec.rb --require teamcity/spec/runner/formatter/teamcity/formatter --format Spec::Runner::Formatter::TeamcityFormatter 
```

但是如果我从终端运行这段代码，我会得到错误

```
bash: syntax error near unexpected token `$0=ARGV.shift' 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:13:42.910

您不应该运行与 RubyMine 相同的行来在命令行上运行您的规范。RubyMine 所做的只是包含它自己的格式化程序，因此它可以在 GUI 中为您提供结果，因此，如果您得到了这个工作，那么仅使用它就具有更大的价值`rspec spec/...`

Rspec 应该仅与 rspec 命令一起使用，您的测试将正确运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:00:32.420

发现了一个问题。我使用了[Ruby-Gmail](https://github.com/dcparker/ruby-gmail) gem，但是当我切换到[Gmail](https://github.com/nu7hatch/gmail) gem（[Ruby-Gmail](https://github.com/dcparker/ruby-gmail)的分支）并将语法更改为

```
email = @gmail.compose do
 to (current_unread_mail.reply_to.mailbox + '@' + current_unread_mail.reply_to.host).to_s
 subject "Re: " + current_unread_mail.title
 body reply_body
end
email.deliver! 
```

这对我来说可以。

# windows-phone-7 - Windows Phone 8 上的 Windows Phone 7 应用程序

> ID：13621026
> 
> 赞同：2
> 
> 时间：2012-11-29T07:44:20.627
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我已经看到在 windows phone 8 上支持 windows phone 7 应用程序。我在 windows phone 7 上开发了一些应用程序，我想在 windows phone 8 模拟器上运行它来测试我的应用程序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T08:22:31.140

是的，只需在安装了 Windows Phone 8 SDK 的 Visual Studio 2012 中打开您的 Windows Phone 7 解决方案，选择目标 Windows Phone 8 模拟器并运行您的应用程序。您甚至可以在各种屏幕分辨率之间进行选择。
运行 Windows Phone 8 模拟器的最低系统要求如下：运行 Windows Phone 8 模拟器需要
[什么？](https://stackoverflow.com/questions/13145464/what-does-it-take-to-run-the-windows-8-phone-emulator/13145586#13145586)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:02:30.027

一旦您在 VS 2012 中使用带有 WP8 目标平台的 WP SDK 8.0 打开您的 WP7 应用程序，您就不能再将此项目用作 WP7 项目。如果你想在 VS 2012 的新环境中继续开发你需要使用目标平台：WP 7.1

最好的祝福

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:44:06.627

您还可以使用 XAP 部署工具，这样您就不必在 Visual Studio 中打开项目。

# ios - iOS 阻止异步回调在 View Controller 被释放后导致崩溃

> ID：13621028
> 
> 赞同：2
> 
> 时间：2012-11-29T07:44:33.223
> 
> 标签：ios, crash, block

我有一个单例类，其方法将成功和失败块作为参数，它调用另一个异步执行的方法，也使用成功和失败块。我的方法的成功块由异步方法的成功块调用。一切都很好，除非我的视图控制器在成功块返回之前被释放，在这种情况下应用程序崩溃。

这种情况似乎类似于在 dealloc 方法中将委托设置为 nil。我应该如何用块处理这个？

这是我的代码的样子：

```
- (void)getObjectsWithId:(NSInteger)id success:(void (^)(NSArray *objects))success failure:(void (^)(NSInteger statusCode, NSError *error))failure {

    NSString *path = [NSString stringWithFormat:@"/my_objects/%d/objects", id];

    [self getPath:path parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSMutableArray *objects = [[NSMutableArray alloc] initWithCapacity:[responseObject count]];

        for (NSDictionary *dict in responseObject) {
            Object *object = [[Object alloc] initWithDictionary:dict];
            [objects addObject:object];
        }

        success(objects);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        failure(operation.response.statusCode, error);
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T12:34:49.153

您可以使用通知中心来侦听视图何时被释放并将块设置为 nil，这样它就不会尝试返回任何内容..

在视图被释放之前发布通知：

```
[[NSNotificationCenter defaultCenter]
 postNotificationName:@"myNotificationName"
 object:broadcasterObject]; 
```

并注册一个活动：

```
[[NSNotificationCenter defaultCenter]
 addObserver:listenerObject
 selector:@selector(receivingMethodOnListener:)
 name:@"myNotificationName"
 object:nil]; 
```

# testing - 如何在 iMacros 脚本中插入注释？

> ID：13621029
> 
> 赞同：3
> 
> 时间：2012-11-29T07:44:35.833
> 
> 标签：testing, automated-tests, ui-automation, imacros

如何在`iMacros`脚本中插入注释？什么是字符的组合来实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:06:14.743

根据[http://wiki.imacros.net/'_(评论)](http://wiki.imacros.net/%27_%28Comment%29)

`The single quote character ' indicates a comment.`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-28T22:53:59.777

您还可以使用 Ctrl + Q 并注释多行。

```
'type you comment here
'and here as well 
```

# java - HTML 到 Java 字符的变化

> ID：13621039
> 
> 赞同：0
> 
> 时间：2012-11-29T07:45:25.383
> 
> 标签：java, html, jsp, servlets, utf-8

我在 jsp 中使用带有 \u00e8 之类的字符的字符串填充下拉列表框。我将使用下拉列表中的选定值来过滤表中的显示，其中包含从 DB 检索到的值。但是，当我通过 request.getAttribute 将它们发送回 servlet 时，它的值发生了变化。我使用了[org.apache.commons.lang.StringEscapeUtils.escapeJava()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeJava%28java.lang.String%29)，发现它的值从\u00e8变成了\u00C3\u00A8。网页的内容类型为 UTF-8。如何使 HTML 和 Java 具有一致的字符？

抱歉，如果我不能发表评论、接受答案、投票评论，因为我的工作站中的 javascript 被禁用（这真的很糟糕）。我一回家就做。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:51:39.397

这就是我在多部分文件上传中所做的。

```
List formItems = upload.parseRequest(request);
            Iterator iter = formItems.iterator();

            while (iter.hasNext()) {
                FileItem item = (FileItem) iter.next();

                String field = "";
                String value = "";
                if (item.isFormField()) {
                    try{
                        field=item.getFieldName();
                        value=item.getString("UTF-16");                  
                    }
                    catch(Exception e){                     
                    }
                } 
```

# wpf - 拉伸项目以填充画布

> ID：13621041
> 
> 赞同：22
> 
> 时间：2012-11-29T07:45:34.647
> 
> 标签：wpf, canvas, controls, components

我有一个 Dockpanel，其中包含 Canvas 内的项目。我放置在画布内的 Dockpanel 和任何其他项目（网格等）仅占用它们所需的最小空间。如何拉伸这些项目以填充整个画布？

```
 <Canvas x:Name="InfoCanvas" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="72,53,0,0">
        <DockPanel VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0,0,0,0" x:Name="ReferenceInfo" Canvas.Left="0" Canvas.Top="0">
            <TextBox x:Name="ReferenceAuthor" GotFocus="FieldEnter" LostFocus="FieldLeave" FontSize="16" FontFamily="Segoe UI Light" Text="Author" Foreground="Gray" Background="Transparent" DockPanel.Dock="Top" VerticalAlignment="Top" HorizontalAlignment="Stretch" BorderThickness="0" Margin="0,2,0,2"/>
            <TextBox x:Name="ReferenceTitle" GotFocus="FieldEnter" LostFocus="FieldLeave" FontSize="16" FontFamily="Segoe UI Light" Text="Title" Foreground="Gray" Background="Transparent" DockPanel.Dock="Top" VerticalAlignment="Top" HorizontalAlignment="Stretch" BorderThickness="0" Margin="0,2,0,2"/>
            <TextBox x:Name="ReferenceDate" GotFocus="FieldEnter" LostFocus="FieldLeave" FontSize="16" FontFamily="Segoe UI Light" Text="Date" Foreground="Gray" Background="Transparent" DockPanel.Dock="Top" VerticalAlignment="Top" HorizontalAlignment="Stretch" BorderThickness="0" Margin="0,2,0,2"/>
        </DockPanel>  
    </Canvas> 
```

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-29T08:08:22.410

`Canvas`小组并不真正支持这一点。

这是非常基本的 - 它只允许您通过使用上、下、左和右来绝对定位孩子，并且它总是为他们提供他们需要的空间。

所以通常你会使用`Grid`只有 1 列和 1 行的 a 。

但是，您可以将 的宽度和高度绑定`DockPanel`到 的宽度和高度`Canvas`。这样，`DockPanel`将始终填充`Canvas`.

```
<DockPanel VerticalAlignment="Stretch" HorizontalAlignment="Stretch" 
            Margin="0,0,0,0" x:Name="ReferenceInfo" Canvas.Left="0" Canvas.Top="0"
            Width="{Binding ActualWidth, ElementName=InfoCanvas}"
            Height="{Binding ActualHeight, ElementName=InfoCanvas}"> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-18T19:50:44.233

你可以做的是：

```
<Grid>
    <Canvas x:Name="InfoCanvas">
        <!--Elements with canvas layout here-->
    </Canvas>
    <DockPanel x:Name="ReferenceInfo">
        <!--Elements with dockpanel layout here-->
    </DockPanel>
</Grid> 
```

通过像这样将两个面板包裹在一个网格中，您可以在画布中放置您无法相对于左侧、顶部等定位的元素。画布和停靠面板都将填满可用空间。请注意，当在 xaml 中定义停靠面板时，停靠面板中的元素将呈现在画布中的元素之上。

我假设您发布的代码是伪代码，如果不是，您应该删除画布。

# iphone - 使用 DB 使用表格视图将数据保存在表单上并显示

> ID：13621043
> 
> 赞同：1
> 
> 时间：2012-11-29T07:45:42.443
> 
> 标签：iphone, objective-c, xcode

我正在创建一个电子邮件签名，到目前为止我已经制作了两个视图“ViewController 和“ListView”编码是这样的

视图控制器.h

```
 #import <UIKit/UIKit.h>
 #import "ListView.h"
 #import "sqlite3.h"

@interface ViewController:UIViewController<UITextViewDelegate,UIImagePickerControllerDelegate>
 {
UIImageView *imageView;
UIImage *signimage;
UIImagePickerController *imagePicker;
NSMutableArray *hello;
NSMutableArray *hellocontent;

ListView *listview;
UITextField *signaturename;
UITextView *textView; // UITextView *scontent;
 // IBOutlet UIScrollView *scrollview;
 // BOOL keyboardIsShown;
  //IBOutlet UITextField *recordTextField;

NSString   *databasePath;
sqlite3 *Dummy2;
 }
 @property(nonatomic,retain) IBOutlet UIImageView *imageView;
 @property(nonatomic,retain) UIImage *signimage;
 -(IBAction)btnLoadImage:(id) sender;
  -(IBAction)clearFields:(id)sender;
  -(IBAction)show:(id)sender;
 // @property (nonatomic,retain) UITextField *recordsTextField;

 //@property(nonatomic,retain) IBOutlet UIScrollView *scrollview;
   @property(nonatomic, retain) IBOutlet UITextField *signaturename;
   @property(nonatomic, retain) IBOutlet UITextView *textView;  // scontent

   -(IBAction) btnsave:(id) sender;
    -(IBAction) keyboard:(id) sender;
    -(IBAction)next:(id)sender;

  -(IBAction) bgtouch:(id) sender;
   // -(IBAction)show:(id)sender;
   // -(IBAction)records:(id)s;
   // -(IBAction)updateQuery:(id)sender;

   //Static methods.
   + (void) getInitialDataToDisplay:(NSString *)dbPath;
   + (void) finalizeStatements;

   //Instance methods.
   - (id) initWithPrimaryKey:(NSInteger)pk;
    - (void) saveAllData;

   @end 
```

视图控制器.m

```
#import "ViewController.h"
#import"ListView.h"

 @implementation ViewController
 @synthesize signaturename,imageView,textView,signimage; // recordsTextField

     // scrollview;
   -(IBAction)next:(id)sender{

    sqlite3_stmt    *statement;

    const char *dbpath = [databasePath UTF8String];
     hello = [[NSMutableArray alloc]init]; 
    //  hellocontent = [[NSMutableArray alloc]init];

    if (sqlite3_open(dbpath, &Dummy2) == SQLITE_OK)
   {
    NSString *updateSQL = @"SELECT * FROM PROFILE";

    const char *update_stmt = [updateSQL UTF8String];

    sqlite3_prepare_v2(Dummy2, update_stmt, -1, &statement, NULL);
    while(sqlite3_step(statement) == SQLITE_ROW) {
          [hello addObject:[NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 1)]];
    //    [hellocontent addObject:[NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 2)]];
    }
    sqlite3_finalize(statement);
    sqlite3_close(Dummy2);
}   
listview = [[ListView alloc]initWithNibName:@"ListView" bundle:nil];
listview.arr=[[NSMutableArray alloc]init];
 listview.arr = hello;

 [self.view addSubview:listview.view];

  }

 - (void)setCoffeeImage:(UIImage *)theCoffeeImage {

// self.isDirty = YES;
[signimage release];
signimage = [theCoffeeImage retain];
  }

  -(IBAction) btnsave:(id) sender
  {

if (([self.signaturename.text length] && [self.textView.text length]) != 0) {

  //  NSData *data = UIImagePNGRepresentation(self.signimage);      

    sqlite3_stmt    *statement;

    const char *dbpath = [databasePath UTF8String];
    hello = [[NSMutableArray alloc]init]; 

    if (sqlite3_open(dbpath, &Dummy2) == SQLITE_OK)
    {

        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO profile (sname,scontent) VALUES (\"%@\", \"%@\")", signaturename.text,textView.text];

        const char *insert_stmt = [insertSQL UTF8String];                          
       //  sqlite3_bind_blob(statement, 3, [data bytes], [data length], NULL);
        sqlite3_prepare_v2(Dummy2, insert_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            // status.text = @"Contact added";
            signaturename.text = @"";            //address.text = @"";
            textView.text = @"";
            // imageUrl.text=@"";

        } else {
            // status.text = @"Failed to add contact";
        }
        sqlite3_finalize(statement);
        sqlite3_close(Dummy2);
    }

       }   
else
    {  
    UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Warning" message:@"Signature Name and Content Field Should Not Be Empty" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show]; 

   }

    }
 -(IBAction)show:(id)sender{
const char *dbpath = [databasePath UTF8String];
sqlite3_stmt    *statement;

if (sqlite3_open(dbpath, &Dummy2) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat: @"SELECT sname, scontent FROM profile WHERE sname=\"%@\"", signaturename.text];

    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(Dummy2, query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        if (sqlite3_step(statement) == SQLITE_ROW)
        {
            NSString *addressField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
            textView.text = addressField;

           // status.text = @"Match found";

            [addressField release];

        } else {
          //  status.text = @"Match not found";
           textView.text = @"";

        }
        sqlite3_finalize(statement);
    }
    sqlite3_close(Dummy2);
  }
  }

  -(IBAction)clearFields:(id)sender
   {
signaturename.text=@"";

textView.text=@"";
    NSLog(@"clear is working");

    }

    - (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    if([text isEqualToString:@"\n"]) {
    [textView resignFirstResponder];
    return NO;
    }

    return YES;
    }
  -(IBAction) bgtouch:(id) sender
    {
    [signaturename resignFirstResponder];
    // [textView resignFirstResponder];
    }

    -(IBAction) keyboard:(id)sender
     {
    [sender resignFirstResponder];
    // [self.signaturecontent resignFirstResponder];
    }
  - (void)didReceiveMemoryWarning
 {
[super didReceiveMemoryWarning];
// Release any cached data, images, etc that aren't in use.
}

 #pragma mark - View lifecycle

- (void)viewDidLoad
{
imagePicker =[[UIImagePickerController alloc]init];
[super viewDidLoad];

NSString *docsDir;
NSArray *dirPaths;
// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"Dummy2.sqlite"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: databasePath ] == NO)
{
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &Dummy2) == SQLITE_OK)
    {
        char *errMsg;
        const char *sql_stmt = "CREATE TABLE IF NOT EXISTS profile(ID INTEGER PRIMARY KEY AUTOINCREMENT, SNAME TEXT, SCONTENT TEXT)";

        if (sqlite3_exec(Dummy2, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
        {
           // status.text = @"Failed to create table";
        }

        sqlite3_close(Dummy2);

    } else {
        // status.text = @"Failed to open/create database";
    }
}

[filemgr release];
// Do any additional setup after loading the view, typically from a nib.
  }
  -(IBAction)btnLoadImage:(id)sender
   {
imagePicker.delegate =self;
imagePicker.sourceType =UIImagePickerControllerSourceTypePhotoLibrary;

// show the image picker
[self presentModalViewController:imagePicker animated:YES];

   }

   -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
UIImage *image;
NSURL *mediaUrl;
mediaUrl =(NSURL *)[info valueForKey:UIImagePickerControllerMediaURL];

if(mediaUrl == nil){
    image = (UIImage *)[info valueForKey:UIImagePickerControllerEditedImage];
    if(mediaUrl == nil){
        // original image selected
        image =(UIImage *)[info valueForKey:UIImagePickerControllerOriginalImage];

        // display the image
        imageView.image = image;
    }
    else {
        // edited image picked 
        CGRect rect = [[info valueForKey:UIImagePickerControllerCropRect]CGRectValue];

        // display the image
        imageView.image = image;
    }
        }

     // hide the image picker
     [picker dismissModalViewControllerAnimated:YES];
   }
 -(void) imagePickerControllerDidCancel:(UIImagePickerController *)picker{
// user did not select image; hide the image picker
[picker dismissModalViewControllerAnimated:YES];
  }
 - (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{

[super viewWillAppear:animated];
}

 - (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{

[super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
[super viewDidDisappear:animated];
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

列表视图.h

```
 #import <UIKit/UIKit.h>

 @interface ListView : UIViewController<UITableViewDataSource,UITableViewDelegate>
  {
 NSMutableArray *arr;

 }
@property(nonatomic,retain) NSMutableArray *arr;
-(IBAction)back:(id)sender;
@end 
```

列表视图.m

```
#import "ListView.h"

 @implementation ListView
 @synthesize arr;

 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
 }
-(IBAction)back:(id)sender
{
[super.view removeFromSuperview];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//  return 6;

return [arr count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}
NSString *cellvalue = [arr objectAtIndex:indexPath.row];
cell.textLabel.text=cellvalue;
// Configure the cell.
return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

 }

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
 }

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
 }

- (BOOL)shouldAutorotateToInterfaceOrientation:UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

 @end 
```

数据库“Dummy2.sql”是这样的

```
PROFILE = table
id = field = INTEGER PRIMARY KEY
sname = field = TEXT
scontent = field = TEXT
simage = field = BLOB

Schema 
CREATE TABLE PROFILE(id INTEGER PRIMARY KEY, sname TEXT, scontent TEXT, simage BLOB) 
```

这就是我到目前为止所做的，我应该在 didselectrowAtIndexpath 中编码什么，以便当我从表中选择任何名称时，它应该出现在“ListView.xib”的文本视图中......任何帮助我也无法将图像保存在DB我还必须根据从“ListView.xib”中的tableView中选择的名称显示图像，以便在底部我可以在UIimage和textview字段中看到该名称的图像和内容..有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:24:17.600

如果您想将名称传递给 ListView，只需使用以下代码：

创建一个对象类来保存有关某个人的所有数据。

```
@interface Person

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *content;
@property (nonatomic, assign) int profileId;

@end

@implementation Person

@synthesize name,content;
@synthesize profileId;

@end 
```

更改数据获取方法，例如：

```
Person *person = nil;
NSString *updateSQL = @"SELECT * FROM PROFILE";

const char *update_stmt = [updateSQL UTF8String];

sqlite3_prepare_v2(Dummy2, update_stmt, -1, &statement, NULL);
while(sqlite3_step(statement) == SQLITE_ROW) {
      person = [[Person alloc] init];
      [person setProfileId:(int)sqlite3_column_int(statement, 0)];
      [person setName:[NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 1)];
      [person setContent:[NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 2)];
      [hello addObject:person];
} 
```

在 tableView 类中

更改`cellForRowAtIndexPath`类似：

```
Person *cellvalue = [arr objectAtIndex:indexPath.row];
cell.textLabel.text=cellvalue.name; 
```

之`didSelectRowAtIndexPath`类的：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
    Person *selected = [arr objectAtIndex:indexPath.row];
    txtView.txt =  selected.content
 } 
```

**1 建议。**

不要将图像保存在数据库中，这会使您的数据库太重，数据库操作太慢。

一种替代方法是将图像保存到文档目录并保存到数据库的路径。

# ruby-on-rails - 为 rails 3 has_many 创建的数据库记录不正确：通过关联

> ID：13621053
> 
> 赞同：0
> 
> 时间：2012-11-29T07:46:26.537
> 
> 标签：ruby-on-rails, associations, has-many-through

我有一个 has_many :through 关联。球员有很多球队，球队有很多球员。加入模型 Affiliation 属于 Players 和 Teams，并且还具有每年`year`跟踪玩家的团队隶属关系（或就业）的属性。

我似乎无法根据以下规则找出建立关联的正确方法：

1.  创建一个新玩家。
2.  关联一个可能是新的或现有的团队。所以找到它或创建它，但只有在保存玩家时才创建它。
3.  关联可能包括也可能不包括一年，但只有在保存球员和球队的情况下才能创建关联。

Player 模型如下所示：

```
class Player < ActiveRecord::Base
  attr_accessible :name

  has_many :affiliations, :dependent => :destroy
  has_many :teams, :through => :affiliations
end 
```

团队模型如下所示：

```
class Team < ActiveRecord::Base
  attr_accessible :city

  has_many :affiliations, :dependent => :destroy
  has_many :players, :through => :affiliations
end 
```

隶属关系模型如下所示：

```
class Affiliation < ActiveRecord::Base
  attr_accessible :player_id, :team_id, :year
  belongs_to :player
  belongs_to :team
end 
```

我已经成功地使用 PlayersController 中的创建操作创建了没有连接模型属性的关联记录，如下所示：

```
class PlayersController < ApplicationController
  def create
    @player = Player.new(params[:player].except(:teams))

    unless params[:player][:teams].blank?
      params[:player][:teams].each do |team|
        team_to_associate = Team.find_or_initialize_by_id(team[:id], team.except(:year)
        @player.teams << team_to_associate
      end
    end

    @player.save
    respond_with @player
  end
end 
```

使用以下参数创建具有两支球队的新球员后：

```
{"player"=>{"name"=>"George Baker", "teams"=>[{"city"=>"Buffalo"}, {"city"=>"Detroit"}]}} 
```

数据库看起来像：

球员

> id：1，姓名：George Baker

团队

> id：1，城市：布法罗
> 
> id：2，城市：西雅图

隶属关系

> id: 1, player_id: 1, team_id: 1, year: null
> 
> id: 2, player_id: 1, team_id: 2, year: null

当我试图介绍这一年时，事情就崩溃了。我最近在 PlayersController 中创建操作的尝试如下所示：

```
class PlayersController < ApplicationController
  def create
    @player = Player.new(params[:player].except(:teams))

    unless params[:player][:teams].blank?
      params[:player][:teams].each do |team|
        team_to_associate = Team.find_or_initialize_by_id(team[:id], team.except(:year)
        // only additional line...
        team_to_associate.affiliations.build({:year => team[:year]})
        @player.teams << team_to_associate
      end
    end

    @player.save
    respond_with @player
  end
end 
```

现在，当使用以下参数创建具有两支球队的新球员时：

```
{"player"=>{"name"=>"Bill Johnson", "teams"=>[{"id"=>"1"}, {"city"=>"Detroit", "year"=>"1999"}]}} 
```

数据库看起来像：

球员

> id：1，姓名：George Baker
> 
> id：2，姓名：Bill Johnson

团队

> id：1，城市：布法罗
> 
> id：2，城市：西雅图
> 
> id：3，城市：底特律

隶属关系

> id: 1, player_id: 1, team_id: 1, year: null
> 
> id: 2, player_id: 1, team_id: 2, year: null
> 
> id: 3, player_id: 2, team_id: 1, year: null
> 
> id: 4, player_id: null, team_id: 3, 年份: 1999
> 
> id: 5, player_id: 2, team_id: 3, year: null

因此，在应该只创建两个的情况下创建了三个记录。隶属关系记录 id: 3 是正确的。对于 id: 4，缺少 player_id。对于 id: 5，缺少年份。

显然这是不正确的。我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:59:27.283

**编辑**

好的，我想我有更好的解决方案。AFAIK，你不能在两个深度级别上使用嵌套属性（虽然你可以测试它，也许它有效），但没有什么能阻止我们*模拟*这种行为：

```
class Player < ActiveRecord::Base
  has_many :affiliations
  has_many :teams, through: :affiliations
  accespts_nested_attributes_for :affiliations, allow_destroy: true
end

class Affiliation < ActiveRecord::Base
  belongs_to :player
  belongs_to :team

  validates :player, presence: true
  validates :team,   presence: true

  attr_accessor :team_attributes 

  before_validation :link_team_for_nested_assignment

  def link_team_for_nested_assignment
    return true unless team.blank?
    self.team = Team.find_or_create_by_id( team_attributes )
  end 
```

现在，这样做：

```
@player = Player.new( 
            name: 'Bill Johnson', 
            affiliations_attributes: [
              {year: 1999, team_attributes: {id: 1, city: 'Detroit}},
              {team_attributes: {city: 'Somewhere else'}}
            ]
          )
@player.save 
```

应该创建所有必需的记录，并且在出现问题时仍然回滚所有内容（因为它`save`本身已经包含在事务中）。作为奖励，所有错误都将与`@player`！

~~这个怎么样 ？~~

 ~~```
class PlayersController < ApplicationController
  def create

    ActiveRecord::Base.transaction do

      @player = Player.new(params[:player].except(:teams))
      raise ActiveRecord::Rollback unless @player.save # first check

      unless params[:player][:teams].blank?
        @teams = []
        params[:player][:teams].each do |team|

          team_to_associate = Team.find_or_initialize_by_id(team[:id], team.except(:year))
          raise ActiveRecord::Rollback unless team_to_associate.save # second check

          if team[:year]
            affiliation = team_to_associate.affiliations.build(player: @player, year: team[:year])
            raise ActiveRecord::Rollback unless affiliation.save # third check
          end
          @teams << team_to_associate # keep the object so we have access to errors
        end
      end
    end

      flash[:notice] = "ok"
  rescue ActiveRecord::Rollback => e
    flash[:alert]  = "nope"
  ensure
    respond_with @group
  end
end 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:40:22.257

这个解决方案最终对我有用。但是，如果有人将此代码用于他们自己的项目，请知道我没有测试除 create 之外的任何其他操作。我敢肯定，一旦我处理读取、更新和删除，其中一些会改变。

```
class Player < ActiveRecord::Base
  attr_accessible :name

  has_many :affiliations, :dependent => :destroy
  has_many :teams, :through => :affiliations
  accepts_nested_attributes_for :affiliations, :allow_destroy => true
  attr_accessible :affiliations_attributes
end

class Team < ActiveRecord::Base
  attr_accessible :city

  has_many :affiliations, :dependent => :destroy
  has_many :players, :through => :affiliations
end

class Affiliation < ActiveRecord::Base
  attr_accessible :player_id, :team_id, :team_attributes, :year
  belongs_to :player
  belongs_to :team
  accepts_nested_attributes_for :team

  def team_attributes=(team_attributes)
    self.team = Team.find_by_id(team_attributes[:id])
    self.team = Team.new(team_attributes.except(:id)) if self.team.blank?
  end
end

class PlayersController < ApplicationController
  def create
    player_params = params[:player].except(:teams)
    affiliation_params = []

    unless params[:player][:teams].blank?
      params[:player][:teams].each do |team|
        affiliation = {}
        affiliation[:year] = team[:year] unless team[:year].blank?
        affiliation[:team_attributes] = team.except(:year)
        affiliation_params << affiliation
      end
    end

    player_params[:affiliation_attributes] = affiliation_params unless affiliation_params.blank?

    @player = Player.new(player_params)
    @player.save

    respond_with @player
  end
end 
```~~

# c# - c# - Outlook 功能区控件上的键盘钩子

> ID：13621061
> 
> 赞同：1
> 
> 时间：2012-11-29T07:46:37.660
> 
> 标签：c#, setwindowshookex

我想挂钩特定控件（组合框）并接收在该控件中键入的所有键。组合框是 Outlook 功能区的一部分，没有按键或其他事件（只是 onChange 行为非常奇怪）。

这是代码：

```
 private const int WH_KEYBOARD_LL = 13;
    private const int WM_KEYDOWN = 0x0100;
    private LowLevelKeyboardProc _proc;
    private IntPtr _hookID = IntPtr.Zero;

    private void SetHook(IntPtr handle)
    {
        uint PID; //not needed
        _proc = HookCallback;
        uint threadid = GetWindowThreadProcessId(handle, out PID);
        _hookID = SetWindowsHookEx(WH_KEYBOARD_LL, _proc, IntPtr.Zero, threadid );

    }

    private delegate IntPtr LowLevelKeyboardProc(
            int nCode, IntPtr wParam, IntPtr lParam);

    private IntPtr HookCallback(int nCode, IntPtr wParam, IntPtr lParam)
    {
        if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
        {
            int vkCode = Marshal.ReadInt32(lParam);
            System.Diagnostics.Debug.WriteLine("Key: " + (Keys)vkCode);
        }
        return CallNextHookEx(_hookID, nCode, wParam, lParam);
    } 
```

我拥有的句柄和我得到的 ThreadID 是正确的（通过 Spy++ 验证）但没有捕获任何密钥。使用“0”作为 SetWindowsHookEx 函数的最后一个参数可以正常工作，但它当然是一个全局挂钩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:29:47.140

我为任何有同样问题的人添加这个。键盘挂钩是全局的，不能挂钩到特定控件。您需要做的是捕获给定句柄的消息。为此，您必须对窗口/句柄进行子类化。

```
 [DllImport("user32")]
    private static extern IntPtr SetWindowLong(IntPtr hWnd, int nIndex, Win32WndProc newProc);
    [DllImport("user32")]
    private static extern int CallWindowProc(IntPtr lpPrevWndFunc, IntPtr hWnd, int Msg, int wParam, int lParam);

    // A delegate that matches Win32 WNDPROC:
    private delegate int Win32WndProc(IntPtr hWnd, int Msg, int wParam, int lParam);

    // from winuser.h:
    private const int GWL_WNDPROC = -4;
    private const int WM_KEYDOWN = 0x0100;

    // program variables
    private IntPtr oldWndProc = IntPtr.Zero;
    private Win32WndProc newWndProc = null;

    private void SubclassHWnd(IntPtr hWnd)
    {
        // hWnd is the window you want to subclass..., create a new 
        // delegate for the new wndproc
        newWndProc = new Win32WndProc(MyWndProc);
        // subclass
        oldWndProc = SetWindowLong(hWnd, GWL_WNDPROC, newWndProc);
    }

    private const int ENTER_KEY = 1835009;

    // this is the new wndproc, just show a messagebox on left button down:
    private int MyWndProc(IntPtr hWnd, int Msg, int wParam, int lParam)
    {

        switch (Msg)
        {
            case WM_KEYDOWN:
                int vkCode = lParam;
                if (vkCode == ENTER_KEY)
                    doSomething();
                return 0;

            default:
                break;
        }

        return CallWindowProc(oldWndProc, hWnd, Msg, wParam, lParam);
    } 
```

# c - C中没有程序输出

> ID：13621062
> 
> 赞同：-3
> 
> 时间：2012-11-29T07:46:38.347
> 
> 标签：c

```
#include<stdio.h>
#include<malloc.h>

typedef struct node_t {
    int i;
    struct node_t* link;
} node;

node* head = NULL;

int main() {
    int i = 10;
    node* temp = NULL;
    head = (node *)malloc(sizeof(node));
    temp = (node *)malloc(sizeof(node));
    if(temp == NULL) {
        printf("\n malloc for temp node failed! \n");
    }
    else {
        /* linked list logic to add the elements in the beginning */
        while(i<=10) {
            temp->i = i;
            temp->link = NULL;
            if(head == NULL) {
                head = temp;
            }
            else {
                temp->link = head;
                head = temp;
            }
            i++;
        }
    }
    for(temp = head; temp->link != NULL; temp = temp->link) {
        printf("\n The data is:%d \n",temp->i);
    }
    free(temp);
    free(head);
    return 0;
} 
```

我正在尝试一个简单的链表程序。我没有得到输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:49:01.870

你似乎有一个无限循环！（i 的值不变）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:03:18.013

`tmp`1)每次为 分配值时都必须分配节点 ( ) `tmp`。而不是只分配一次`tmp`. 请参阅以下固定代码以了解如何操作

2）以下`for`循环是错误的：

```
for(temp = head; temp->link != NULL; temp = temp->link) { 
```

此`for`循环在以下代码中修复

3）`free`你必须浏览整个链表，然后释放每个节点。请参阅以下固定代码。

```
#include<stdio.h>
#include<malloc.h>
#include<stdlib.h>

typedef struct node_t{
    int i;
     struct node_t* link;
}node;

node* head = NULL;

int main(){
     int i = 1;
     node* temp = NULL;

     /* linked list logic to add the elements in the beginning */
     while(i<=10){
         temp = (node *)malloc(sizeof(node));
         if(temp == NULL){
             printf("\n malloc for temp node failed! \n");
             exit(1);
         }
         temp->i = i;
         temp->link = NULL;
         if(head == NULL){
             head = temp;
         }
         else{
             temp->link = head;
             head = temp;
         }
         i++;
     }

     for(temp = head; temp != NULL; temp = temp->link){
         printf("\n The data is:%d \n",temp->i);
     }

     while (head!=NULL)
     {
        temp = head->link;
        free(head);
        head = temp;
     }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T07:49:05.440

您不会`i`在 while 循环中更改变量的值，因此您永远不会退出 while 循环。

你需要类似的东西：

```
int i=1;
while(i<=10){
  // insert i in loop
  i++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T07:49:52.150

您没有更改循环变量的值，即`i`。

您还需要`malloc`在 while 循环内创建单独的节点。现在，您的代码正在一次又一次地修改同一个节点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T08:03:08.637

除了关于无限循环的节点之外，由于你从来没有修改过的值`i`还有其他的错误。

```
 22         /* linked list logic to add the elements in the beginning */
 23         while(i<=10){
 24             temp->i = i;
 25             temp->link = NULL;
 26             if(head == NULL){
 27                 head = temp;
 28             }
 29             else{
 30                 temp->link = head;
 31                 head = temp; 
```

看看你在这个循环中做了什么。如果 head 为 NULL（这不太可能，因为您在第 15 行重新分配了它，尽管分配可能会失败）您将 'head' 设置为 temp。

如果 head 不为 NULL，则将 temp 的“链接”设置为 head。然后你将 head 设置为 temp。然后你循环并重新做一遍。

所以你最终会得到指向 temp 的 head 和指向 temp 的 temp->link ... 一个恰好包含一个节点的循环列表。

试试这个：

```
int main()
{   
    int i = 0;
    node *temp;

    /* linked list logic to add the elements in the beginning */
    while(i != 10) 
    {
        /* First, allocate a new node */
        temp = (node *)malloc(sizeof(node));

        if(temp == NULL) 
            return -1; /* yikes */

        /* now set its value */
        temp->i = i++;

        /* and link it into the list, at the beginning */
        temp->link = head;
        head = temp;        
     }

     /* Now traverse the list, starting from 'head' */
     temp = head;

     while(temp != NULL)
     {
        /* save the current node in a temporary variable */
        node *temp2 = temp;

        /* and move 'temp' to point to the next node in the list */
        temp = temp->link;

        /* print the current node */
        printf("\n The data is: %d\n", temp2->i);

        /* and free the memory */
        free(temp2);
     }   

     return 0;
} 
```

# ruby - 如何使用 GridFS 上传文件并将其直接保存到 MongoDB

> ID：13621066
> 
> 赞同：2
> 
> 时间：2012-11-29T07:46:54.040
> 
> 标签：ruby, mongodb, sinatra, gridfs

我有一个托管在 heroku 上的 Sinatra 应用程序，我正在尝试启用文件上传。我知道 heroku 不允许保存到文件系统，所以我尝试直接使用 GridFS 将图像保存到 MongoDB。但我不知道怎么做。使用下面的代码，我可以保存到文件系统

```
base_dir = Dir.pwd + "/static/images/channels/"
File.open("#{base_dir}" + params['logo'][:filename], "w") do |f|
  f.write(params['logo'][:tempfile].read)
end 
```

如何在不先将文件保存到文件系统的情况下将文件直接保存到 MongoDB？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:57:21.827

您可以使用 GridFS API 基本上完成您在上面所做的事情，但写入 MongoDB：[http](http://api.mongodb.org/ruby/current/Mongo/GridFileSystem.html#open-instance_method) ://api.mongodb.org/ruby/current/Mongo/GridFileSystem.html#open-instance_method 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:07:56.730

我认为您需要将文件作为二进制数据上传到数据库。您可以使用`PaperClip`上传文件，然后将它们作为二进制文件存储到 MangoDB。这里[这个链接](http://blog.wyeworks.com/2010/2/10/making-paperclip-work-with-sinatra-datamapper/)可能会帮助你：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-31T04:13:22.160

如果您的文件实际上小于 16 mb，请尝试使用此转换器将格式 jpeg / png 的图像更改为保存到 mongodb 的格式，您可以将其视为 gridfs 的简单替代方案，

请关注此 github 存储库以获取更多详细信息

[https://github.com/saran-surya/Mongo-Image-Converter](https://github.com/saran-surya/Mongo-Image-Converter)

# excel - 运行时错误“13”VBA 宏 Excel

> ID：13621067
> 
> 赞同：0
> 
> 时间：2012-11-29T07:47:08.157
> 
> 标签：excel, vba, runtime-error

我创建了这个宏，我在该行收到一个运行时错误“13”

```
Set objDomAttribute = objDomElement3.Attributes.setNamedItem(objDomDoc.createAttribute("Name4")) 
```

我的 Excel 文件有 2727 行。我测试了更少的行并且它工作得很好，但是对于 2727 它不起作用。我应该怎么做才能解决这个问题？

```
Option Explicit
Public Sub MakeXMLWithDom() 

Dim Q As String 
Q = Chr$(34) 

Dim objDomDoc As New MSXML2.DOMDocument60 

objDomDoc.LoadXML ("<?xml version=" & Q & "1.0" & Q & "encoding=" & Q & "utf-8" & Q & "?>") 

Dim objDomElement As MSXML2.IXMLDOMElement 
Dim objDomAttribute As MSXML2.IXMLDOMAttribute 
Dim nodeSet As MSXML2.IXMLDOMNodeList 

Set objDomElement = objDomDoc.createElement("Containers") 
Set objDomElement = objDomDoc.appendChild(objDomElement) 

 'finding the amount of rows in the excel
Dim numofrows As Long 
numofrows = Worksheets("EXAMPLE").Range("E1").Offset(Worksheets("EXAMPLE").Rows.Count - 1, 0).End(xlUp).Row 

Dim iRow As Integer 

Dim Value11 As Variant 
Dim Value12 As Variant 
Dim Value13 As Variant 

Dim objDomElement1 As Variant
Dim objDomElement2 As Variant
Dim objDomElement3 As Variant

For iRow = 10 To (numofrows + 1) 

    If Worksheets("EXAMPLE").Cells(iRow - 1, 5) = Worksheets("EXAMPLE").Cells(iRow, 5) Then 
        Value11 = Worksheets("EXAMPLE").Cells(iRow - 1, 11).Value & ", " & Worksheets("EXAMPLE").Cells(iRow, 11).Value 
        Value12 = Worksheets("EXAMPLE").Cells(iRow - 1, 12).Value & ", " & Worksheets("EXAMPLE").Cells(iRow, 12).Value 
        Value13 = Worksheets("EXAMPLE").Cells(iRow - 1, 13).Value & ", " & Worksheets("EXAMPLE").Cells(iRow, 13).Value 
    Else 
        Value11 = Worksheets("EXAMPLE").Cells(iRow, 11).Value 
        Value12 = Worksheets("EXAMPLE").Cells(iRow, 12).Value 
        Value13 = Worksheets("EXAMPLE").Cells(iRow, 13).Value 
    End If 

    If Worksheets("EXAMPLE").Cells(iRow, 5) <> Worksheets("EXAMPLE").Cells(iRow + 1, 5) And Worksheets("EXAMPLE").Cells(iRow, 3) <> "" And Worksheets("EXAMPLE").Cells(iRow, 5) <> "" Then 

        Set objDomElement1 = objDomElement.appendChild(objDomDoc.createElement("Data")) 
        Set objDomAttribute = objDomElement1.Attributes.setNamedItem(objDomDoc.createAttribute("Relevant")) 
        objDomElement1.Attributes.getNamedItem("Relevant").Text = "True" 

        Set objDomElement2 = objDomElement1.appendChild(objDomDoc.createElement("Info")) 

        Set objDomElement3 = objDomElement2.appendChild(objDomDoc.createElement("Part")) 
        Set objDomAttribute = objDomElement3.Attributes.setNamedItem(objDomDoc.createAttribute("Name1")) 
        Set objDomAttribute = objDomElement3.Attributes.setNamedItem(objDomDoc.createAttribute("Name2")) 
        Set objDomAttribute = objDomElement3.Attributes.setNamedItem(objDomDoc.createAttribute("Name3")) 
        Set objDomAttribute = objDomElement3.Attributes.setNamedItem(objDomDoc.createAttribute("Name4")) 

        objDomElement3.Attributes.getNamedItem("Name1").Text = Trim$(Worksheets("EXAMPLE").Cells(iRow, 5).Value) 
        objDomElement3.Attributes.getNamedItem("Name2").Text = Value11 
        objDomElement3.Attributes.getNamedItem("Name3").Text = Value12 
        objDomElement3.Attributes.getNamedItem("Name4").Text = Value13 

    End If 
Next iRow 

objDomDoc.Save ("c:\Example.xml") 
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:35:06.670

您说`Value13`在 Locals 窗口中显示为`Value: Error 2015`和`Type: Variant/Error`。好吧，好吧，继续调查……`Value13`从哪里来？查看该行的 Excel 工作表。我敢打赌你会在`#VALUE!`那里发现一个错误。

所以这是您输入数据的问题，而不是您的代码。解决这个问题，你的问题就会消失。

# wpf - XAML 无法从 Resx 文件中读取值

> ID：13621072
> 
> 赞同：3
> 
> 时间：2012-11-29T07:47:43.727
> 
> 标签：wpf

我有一个复合应用程序，它有一个外壳窗口和一些模块，每个模块都使用 MEF（Microsfot Prism）加载到外壳上。Shell 本身有一个资源文件默认（Resource.resx）和其他语言（如 Resource.ar-SA.resx）也支持本地化。

*   对于 Xaml：我用过`x:Static Resource.KeyName`
*   在 c# 代码中：我曾经`GetString(keyName, culture)`获取所需的字符串。

为了支持本地化，我添加了一行代码来获取系统的当前文化并加载所需的 Resx 文件。用于设置当前文化。

```
Resource.Culture = 
    new System.Globalization.CultureInfo(System.Globalization.CultureInfo.CurrentCulture.Name); 
```

在 App.Xaml.cs 中

所有这些工作都很好。

同样，使用 MEF 加载的每个模块都有上面提到的资源文件。但是对于模块，在 Xaml 中为特定语言文件定义的资源键不起作用。它总是从默认（Resource.Resx）文件中获取值。但是使用 ResourceManager 类的代码中使用的任何键都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:04:54.433

我最终将所有资源保存在一个“基础设施”项目中，因此所有资源都从一个地方加载，它只是让它变得更简单。

我的 xaml 绑定看起来像这样

获取对您的 resx 课程的参考。

```
xmlns:resources="clr-namespace:Infrastructure.resources;assembly=Infrastructure" 
```

现在获取文本

```
Content="{x:Static resources:Resources.Activity_Regarding}" 
```

你可能已经这样做了，但我看不到。您需要确保命名空间与您要使用的 resx 匹配。所以你的模块命名空间。

# python - 从 QTDesigners 样式类过渡到更经常引用的样式

> ID：13621078
> 
> 赞同：0
> 
> 时间：2012-11-29T07:48:36.050
> 
> 标签：python

所以我正在努力让一个弹出窗口在多个导入的文件中工作，并得到许多答案，它们都有相同的格式（参见：[Displaying pop-up windows in Python (PyQt4)](https://stackoverflow.com/questions/9074195/displaying-pop-up-windows-in-python-pyqt4)）

他们使用这个（总结）：

```
class MyForm(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent)

        # Usual setup stuff
        self.ui = Ui_Dialog()
        self.ui.setupUi(self)
if __name__ == "__main__":
   app = QtGui.QApplication(sys.argv)
   myapp= MyForm()
   myapp.show()
   sys.exit(app.exec_()) 
```

这很重要，因为要打开弹出窗口，您需要保留对它的引用，就像 myapp 在这里所做的那样。

在 QTDesigner 中，它在`if (__name__ == '__main__')`

```
app = QtGui.QApplication(sys.argv)
m = Ui_Frame()
Frame = QtGui.QWidget()
m.setupUi(Frame)
Frame.show() 
```

使用像这样的实际类/用户界面设置：

```
class Ui_Frame(object):

    def setupUi(self, Frame): 
```

我试图合并这两者，但我只是得到一个空白的弹出窗口，就像 setupUi 没有运行一样。我的代码：

编辑：具有消失窗口问题的新代码：

导入文件.py

```
from PyQt4 import QtCore, QtGui
try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_Frame(QtGui.QWidget):
def __init__(self, xlist, y, parent=None):
    QtGui.QWidget.__init__(self, parent)
    self.setupUi(xlist,y)

def setupUi(self, xlist, y):
    self.setObjectName(_fromUtf8("Frame"))
    self.resize(800, 400)
    self.tableWidget = QtGui.QTableWidget(self)
    ...

def startup(xlist, y):
     myapp= Ui_Frame(xlist, y)
     myapp.show()

if __name__ == "__main__":
     app = QtGui.QApplication(sys.argv)
     myapp= Ui_Frame()
     myapp.show()
     sys.exit(app.exec_()) 
```

other.py 只是一个简单的：

```
import importedfile
#app = QtGui.QApplication(sys.argv) and sys.exit are somewhere up here for the other       frame
...code...
tempholder = importedfile.startup(xlist,y)
#Using a var for the startup() or not using has the same results 
```

我显然错过了一些简单的东西。setupUi 实际上正在运行，因为其中的所有内容都在打印等，但主窗口中没有显示任何内容，只是一个空白框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:50:13.797

您`Ui_Frame`是小部件，因此您不需要单独的`Frame`：

```
class Ui_Frame(QtGui.QWidget):
    def __init__(self, parent=None):
        # Here, you should call the inherited class' init, which is QDialog
        QtGui.QWidget.__init__(self, parent)
        xlist = [1,2,3]
        y = "Default"
        self.setupUi(xlist,y)

    def setupUi(self, xlist, y):
        self.setObjectName(_fromUtf8("Frame"))
        self.resize(800, 400)
        self.tableWidget = QtGui.QTableWidget(self)
        ... 
```

# php - 如何使用 php 为 simplesamlphp 创建 SSL 自签名证书

> ID：13621082
> 
> 赞同：0
> 
> 时间：2012-11-29T07:48:47.987
> 
> 标签：php, openssl, ssl-certificate

我想创建一个自签名证书。*请参阅simplesamlphp*所需的证书：[http](http://simplesamlphp.org/docs/stable/simplesamlphp-idp#section_7) : //simplesamlphp.org/docs/stable/simplesamlphp-idp#section_7

```
openssl req -newkey rsa:2048 -new -x509 -days 3652 -nodes 
            -out example.org.crt -keyout example.org.pem 
```

我遵循了[如何在 PHP 中创建数字证书并导出到 .p12 文件？](https://stackoverflow.com/questions/8341999/how-to-create-a-digital-certificate-and-export-to-p12-file-in-php#answer-9569156)

```
<?php
$dn = array(
    "countryName" => "UK",
    "stateOrProvinceName" => "Somerset",
    "localityName" => "Glastonbury",
    "organizationName" => "The Brain Room Limited",
    "organizationalUnitName" => "PHP Documentation Team",
    "commonName" => "Wez Furlong",
    "emailAddress" => "wez@example.com"
);

$privkey = openssl_pkey_new();
$csr = openssl_csr_new($dn, $privkey);
$sscert = openssl_csr_sign($csr, null, $privkey, 365);

openssl_csr_export($csr, $csrout) and var_dump($csrout);
openssl_x509_export($sscert, $certout) and var_dump($certout);
openssl_pkey_export($privkey, $pkeyout, "mypassword") and var_dump($pkeyout);

// Show any errors that occurred here
while (($e = openssl_error_string()) !== false) {
   echo $e . "\n";
} 
```

?>

我得到了输出：

```
string(749) "-----BEGIN CERTIFICATE REQUEST-----
MIIB7zCCAVgCAQAwga4xCzAJBgNVBAYTAlVLMREwDwYDVQQIEwhTb21lcnNldDEU
MBIGA1UEBxMLR2xhc3RvbmJ1cnkxHzAdBgNVBAoTFlRoZSBCcmFpbiBSb29tIExp
bWl0ZWQxHzAdBgNVBAsTFlBIUCBEb2N1bWVudGF0aW9uIFRlYW0xFDASBgNVBAMT
C1dleiBGdXJsb25nMR4wHAYJKoZIhvcNAQkBFg93ZXpAZXhhbXBsZS5jb20wgZ8w
DQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMIGCb4LaB9eS6nF8oijsPaYr7nEM0Vi
GdQwbqGdmyTA9TN+nvb3tIbdz7TAW8mrFzCyFv/32q0HNpU75x7HoVq19E9SP7EZ
FYPoCXYnjiWocoStb3zTvE7aXGPx60VNhRDy2RsXEnmO02McdIUDwP13SIXof2w1
xYwBc0aJczpdAgMBAAGgADANBgkqhkiG9w0BAQQFAAOBgQCLn0cLtRc/lJBG4ZvM
5DcdaKdkZRLoH+l2ikJh7y0EkHLbwfNo0ZagK93Ffr+ZrfsXlSS8eUIJTyTXnpi0
E0fow7SIxzEWBGz3fLASlSJ6F6+fUussfPlZpVD/uVpQ+80I5S6w/u2GZWkC82xb
JYOLSyBCvj+MGkdqFAWOai07jQ==
-----END CERTIFICATE REQUEST-----
"
string(1411) "-----BEGIN CERTIFICATE-----
MIID5TCCA06gAwIBAgIBADANBgkqhkiG9w0BAQQFADCBrjELMAkGA1UEBhMCVUsx
ETAPBgNVBAgTCFNvbWVyc2V0MRQwEgYDVQQHEwtHbGFzdG9uYnVyeTEfMB0GA1UE
ChMWVGhlIEJyYWluIFJvb20gTGltaXRlZDEfMB0GA1UECxMWUEhQIERvY3VtZW50
YXRpb24gVGVhbTEUMBIGA1UEAxMLV2V6IEZ1cmxvbmcxHjAcBgkqhkiG9w0BCQEW
D3dlekBleGFtcGxlLmNvbTAeFw0xMjExMjkwNzMzMDFaFw0xMzExMjkwNzMzMDFa
MIGuMQswCQYDVQQGEwJVSzERMA8GA1UECBMIU29tZXJzZXQxFDASBgNVBAcTC0ds
YXN0b25idXJ5MR8wHQYDVQQKExZUaGUgQnJhaW4gUm9vbSBMaW1pdGVkMR8wHQYD
VQQLExZQSFAgRG9jdW1lbnRhdGlvbiBUZWFtMRQwEgYDVQQDEwtXZXogRnVybG9u
ZzEeMBwGCSqGSIb3DQEJARYPd2V6QGV4YW1wbGUuY29tMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQDCBgm+C2gfXkupxfKIo7D2mK+5xDNFYhnUMG6hnZskwPUz
fp7297SG3c+0wFvJqxcwshb/99qtBzaVO+cex6FatfRPUj+xGRWD6Al2J44lqHKE
rW9807xO2lxj8etFTYUQ8tkbFxJ5jtNjHHSFA8D9d0iF6H9sNcWMAXNGiXM6XQID
AQABo4IBDzCCAQswHQYDVR0OBBYEFO5v9O1tR+XtzOtJgohJ9iISwaY9MIHbBgNV
HSMEgdMwgdCAFO5v9O1tR+XtzOtJgohJ9iISwaY9oYG0pIGxMIGuMQswCQYDVQQG
EwJVSzERMA8GA1UECBMIU29tZXJzZXQxFDASBgNVBAcTC0dsYXN0b25idXJ5MR8w
HQYDVQQKExZUaGUgQnJhaW4gUm9vbSBMaW1pdGVkMR8wHQYDVQQLExZQSFAgRG9j
dW1lbnRhdGlvbiBUZWFtMRQwEgYDVQQDEwtXZXogRnVybG9uZzEeMBwGCSqGSIb3
DQEJARYPd2V6QGV4YW1wbGUuY29tggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcN
AQEEBQADgYEAsUHeLNGmFUv45vpSN2Z6xDrfzZ9vD+VJmkn6cHTmdBfHK1EcNksE
3vxWGnwoAcg4BrExi7uQxNR49FJpr33faMPTbknHDCcqVjvJYH80/LNlZeCl7Col
PvaZyj2KxsVwiVpB6qHTeSuKWR0tIRblYcGi/ZxkJ1eAcoQFsXJc61g=
-----END CERTIFICATE-----
"
string(963) "-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,CD49113D33A48581

vrIEErD2tusgVcXJfDroidd2u/0Es+JVkYVOf9zV1DVR0vBUpB3+urV8tjDtVpe4
8aAFXjEVMJbEBKyHOJc0200OA0PGR1I13jSlP+4xkg1Yj/1e1AiYrXRQZDlKLpIX
CLLRDmxdqW6FfLap9rRLEnON1RS6AdKWLAd9bij6/gV9/ogzHIDZEc1KJwE88ZiZ
LE0aFWXVm8++LJKOy4M0MOpRDAOUa+IeD+Urb9zBKUzRmZWMeJhshXeP9ll5Q4gX
Jy2EwNLXS61sKD24EGLtZNGiL6wIOxfOteo2T+TfJgStfxAX3fmnlT5z+/a94zuo
hl9BiLYKbNmsNnurVuLRuvQPhwKBczsGljKvuem4/VHxwTeZERU/bTKpXuJWrJi5
+klLouoburLf5OKAKk5dZPLh+KVIa1UWNEkI+GP3JYD+/N6hqsGO/4uOXD30zpOD
9yA5HrYflKMEwzirfeNeLfaUwHFoa7bFKEOqzfJqqVBDXKcBCyrNXqmtQn+SkWk4
j/w8+3Rc+FRAZL8ndPmoZRpvJUPR3K+NzLPdOnQ157srxNbh9ckRk0cTMIaAlhxn
+UqJUDeWBJX1qkDp4gG1gG11Nu2LoF/xfkScu0JG9xcev1Ib6auuJI82vau/6Q8w
qapNpTjUYVsc+aviz10mXCMwF2x5okSmzelHk4U42234XgCec6Gj6ml7fqkIS+P7
bHx1x9Ov8LLmnjZPHVv/p6Nqpb3j1IkEDDkZ8M1s5+Eky5gw9vDNdox3bZLEyEfL
OW7PXvfIggHmyfnsFyIfzdZGVfTSXv9Gsq/QMfbrXeRcGb9yEG5Hng==
-----END RSA PRIVATE KEY-----
"
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value 
```

我拿了`$pkeyout`as *server.pem*和`$certout`as *server.crt*。

但我收到错误：

```
Warning: openssl_sign(): supplied key param cannot be coerced into a private key in
/var/www/sso/simplesamlphp/lib/xmlseclibs.php on line 478
Warning: openssl_sign(): supplied key param cannot be coerced into a private key in
/var/www/sso/simplesamlphp/lib/xmlseclibs.php on line 478 
```

# actionscript-3 - AMF 解码示例

> ID：13621083
> 
> 赞同：1
> 
> 时间：2012-11-29T07:48:50.203
> 
> 标签：actionscript-3, apache-flex, amf, fluorinefx

我正在尝试阅读一些 flex/amf 流量，但缺乏适当的文档/示例使其非常困​​难。

有人可以引导我完成以下 rtmp/amf3 数据包的解码：

```
0x43, 0x00, 0x68, 0xcd, 0x00, 0x01, 0x33, 0x11, 0x00, 0x05, 0x00, 0x40, 0x33, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x11, 0x0a, 0x81, 0x13, 0x4f, 0x66, 0x6c, 0x65, 0x78, 0x2e, 0x6d, 0x65, 0x73, 0x73, 0x61, 0x67, 0x69, 0x6e, 0x67, 0x2e, 0x6d, 0x65, 0x73, 0x73, 0x61, 0x67, 0x65, 0x73, 0x2e, 0x52, 0x65, 0x6d, 0x6f, 0x74, 0x69, 0x6e, 0x67, 0x4d, 0x65, 0x73, 0x73, 0x61, 0x67, 0x65, 0x0d, 0x73, 0x6f, 0x75, 0x72, 0x63, 0x65, 0x13, 0x6f, 0x70, 0x65, 0x72, 0x61, 0x74, 0x69, 0x6f, 0x6e, 0x0f, 0x68, 0x65, 0x61, 0x64, 0x65, 0x72, 0x73, 0x17, 0x64, 0x65, 0x73, 0x74, 0x69, 0x6e, 0x61, 0x74, 0x69, 0x6f, 0x6e, 0x13, 0x6d, 0x65, 0x73, 0x73, 0x61, 0x67, 0x65, 0x49, 0x64, 0x11, 0x63, 0x6c, 0x69, 0x65, 0x6e, 0x74, 0x49, 0x64, 0x15, 0x74, 0x69, 0x6d, 0x65, 0x54, 0x6f, 0x4c, 0x69, 0x76, 0x65, 0x13, 0x74, 0x69, 0x6d, 0x65, 0xc3, 0x73, 0x74, 0x61, 0x6d, 0x70, 0x09, 0x62, 0x6f, 0x64, 0x79, 0x01, 0x06, 0x29, 0x6c, 0x69, 0x73, 0x74, 0x41, 0x6c, 0x6c, 0x50, 0x72, 0x61, 0x63, 0x74, 0x69, 0x63, 0x65, 0x47, 0x61, 0x6d, 0x65, 0x73, 0x0a, 0x0b, 0x01, 0x21, 0x44, 0x53, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x54, 0x69, 0x6d, 0x65, 0x6f, 0x75, 0x74, 0x04, 0x3c, 0x15, 0x44, 0x53, 0x45, 0x6e, 0x64, 0x70, 0x6f, 0x69, 0x6e, 0x74, 0x06, 0x11, 0x6d, 0x79, 0x2d, 0x72, 0x74, 0x6d, 0x70, 0x73, 0x09, 0x44, 0x53, 0x49, 0x64, 0x06, 0x49, 0x42, 0x45, 0x32, 0x34, 0x31, 0x32, 0x33, 0x34, 0x2d, 0x31, 0x45, 0x31, 0x39, 0x2d, 0x30, 0x33, 0x43, 0x33, 0x2d, 0x39, 0x30, 0x34, 0x43, 0x2d, 0x32, 0x31, 0x36, 0x33, 0x36, 0x36, 0x30, 0x41, 0x42, 0x34, 0x37, 0x46, 0x01, 0x06, 0x17, 0x67, 0x61, 0x6d, 0x65, 0x53, 0x65, 0xc3, 0x72, 0x76, 0x69, 0x63, 0x65, 0x06, 0x49, 0x31, 0x34, 0x43, 0x30, 0x46, 0x42, 0x38, 0x30, 0x2d, 0x46, 0x37, 0x43, 0x34, 0x2d, 0x42, 0x42, 0x34, 0x42, 0x2d, 0x31, 0x46, 0x32, 0x34, 0x2d, 0x34, 0x39, 0x36, 0x32, 0x38, 0x30, 0x42, 0x38, 0x39, 0x33, 0x42, 0x38, 0x01, 0x04, 0x00, 0x04, 0x00, 0x09, 0x01, 0x01 
```

我的尝试：

0x43 - 0100 0011 : [01] - 类型 1 = rtmp 标头将是 7 个字节。流 ID - 3，将在这个单字节中。

还设法通过移动 UTF 1 位来读取以下内容以获得长度：

0x4f: flex.messaging.messages.RemotingMessage

0x0d：源

0x13：操作

0x0f：标题

0x17：目的地

0x13：消息ID

0x11：客户标识

0x15：生存时间

在这里我的猜测停止了，“时间”/“邮票”似乎不起作用。当然，我无法理解所有其他字节是如何编码的（对象/数组等）；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T07:57:50.477

使用 Charles 解析 AMF！[http://www.charlesproxy.com/documentation/additional/amf/](http://www.charlesproxy.com/documentation/additional/amf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:25:44.693

```
0x43, 0x00, 0x68, 0xcd, 0x00, 0x01, 0x33, 0x11 
```

1byte+7bytes RTMP头数据[ [0](http://www.adobe.com/devnet/rtmp.html) ]

```
0x00, 0x05, 0x00, 0x40, 0x33, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05 
```

Flex 魔术字节，与调用版本、id 等有关

```
0x11 
```

AMF3 数据的开始

```
0x0a..... 
```

AMF3 对象和常规 AMF3 编码 [ [1](http://osflash.org/documentation/amf3) ]

关于 RTMP，它会将 AMF 数据分块为至少 128 个字节，然后是单个标头字节（不是 AMF 的一部分），例如上例中的 0xc3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:12:18.300

我会从阅读开始

[AMF0](http://download.macromedia.com/pub/labs/amf/amf0_spec_121207.pdf)

[AMF3](http://download.macromedia.com/pub/labs/amf/amf3_spec_121207.pdf)

更多示例可以在[Wikipedia](http://en.wikipedia.org/wiki/Action_Message_Format)上找到。

然后是您可能不需要的[RTMP 规范。](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/rtmp/pdf/rtmp_specification_1.0.pdf)

接下来，您可以查看 FluorineFX 的源代码。这让我开始理解事情。[来源 FluorineFX](http://code.google.com/p/fluorinefx/source/checkout)。我所做的是在 FluorineFX 源代码中设置断点，然后从 Flex 应用程序进行调用。然后我可以逐步通过 FluorineFX 源代码来理解事物（旁边是 AMF 规范）。

规范很难阅读，但它们确实是解析字节所需的全部内容。

也许还可以看看[这个 JavaScript AMF 项目](https://github.com/jamesward/JSAMF)。

# objective-c - NSAttributedString 的 boundingRectWithSize 返回错误的大小

> ID：13621084
> 
> 赞同：159
> 
> 时间：2012-11-29T07:48:50.137
> 
> 标签：objective-c, nsattributedstring

我正在尝试获取属性字符串的矩形，但 boundingRectWithSize 调用不尊重我传入的大小，并且返回一个具有单行高度而不是大高度的矩形（它是一个长字符串）。我已经通过在下面的代码中传递一个非常大的高度值和 0 来进行实验，但是返回的矩形总是相同的。

```
CGRect paragraphRect = [attributedText boundingRectWithSize:CGSizeMake(300,0.0)
  options:NSStringDrawingUsesDeviceMetrics
  context:nil]; 
```

这是坏了，还是我需要做其他事情才能让它返回一个包装文本的矩形？

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2013-03-14T01:48:29.773

看起来您没有提供正确的选项。对于包装标签，至少提供：

```
CGRect paragraphRect =
  [attributedText boundingRectWithSize:CGSizeMake(300.f, CGFLOAT_MAX)
  options:(NSStringDrawingUsesLineFragmentOrigin|NSStringDrawingUsesFontLeading)
  context:nil]; 
```

注意：如果原始文本宽度在 300.f 以下，则不会换行，因此请确保绑定大小正确，否则仍然会得到错误的结果。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-12-04T08:25:36.910

出于某种原因，boundingRectWithSize 总是返回错误的大小。我想出了一个解决办法。UItextView -sizeThatFits 有一种方法可以返回文本集的正确大小。因此，不要使用 boundingRectWithSize，而是创建一个带有随机框架的 UITextView，并使用相应的宽度和 CGFLOAT_MAX 高度调用它的 sizeThatFits。它返回具有适当高度的尺寸。

```
 UITextView *view=[[UITextView alloc] initWithFrame:CGRectMake(0, 0, width, 10)];   
   view.text=text;
   CGSize size=[view sizeThatFits:CGSizeMake(width, CGFLOAT_MAX)];
   height=size.height; 
```

如果你在while循环中计算大小，不要忘记将它添加到自动释放池中，因为会创建n个UITextView，如果我们不使用自动释放池，应用程序的运行时内存会增加。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-06-14T21:09:36.863

Ed McManus 无疑提供了实现这一点的关键。我发现了一个不起作用的案例

```
UIFont *font = ...
UIColor *color = ...
NSDictionary *attributesDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                     font, NSFontAttributeName,
                                     color, NSForegroundColorAttributeName,
                                     nil];

NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString: someString attributes:attributesDictionary];

[string appendAttributedString: [[NSAttributedString alloc] initWithString: anotherString];

CGRect rect = [string boundingRectWithSize:constraint options:(NSStringDrawingUsesLineFragmentOrigin|NSStringDrawingUsesFontLeading) context:nil]; 
```

*rect*没有正确的高度。请注意，*anotherString*（附加到*string*）是在没有属性字典的情况下初始化的。这是*anotherString*的合法初始化程序，但**boundingRectWithSize:**在这种情况下没有给出准确的大小。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2014-09-19T19:31:26.537

经过长时间的调查，我的最终决定：
`- boundingRectWithSize`函数只为不间断的字符序列返回正确的大小！如果字符串包含空格或其他内容（由 Apple "Some of the glyphs" 调用），则无法获得显示文本所需的实际矩形大小！
**我用字母替换了字符串中的空格并立即得到了正确的结果。**

苹果在这里说： [https ://developer.apple.com/documentation/foundation/nsstring/1524729-boundingrectwithsize](https://developer.apple.com/documentation/foundation/nsstring/1524729-boundingrectwithsize)

"此方法返回字符串中字形的实际边界。某些字形（例如空格）被允许与传入的尺寸指定的布局约束重叠，因此在某些情况下尺寸分量的宽度值返回的`CGRect`可以超过 size 参数的宽度值。”

所以有必要找到另一种方法来计算实际的矩形......

* * *

经过长时间的排查过程终于找到解决办法！！！我不确定它是否适用于与 相关的所有情况`UITextView`，但主要和重要的事情被发现了！

`boundingRectWithSize``CTFramesetterSuggestFrameSizeWithConstraints`当使用正确的矩形时，函数以及（和许多其他方法）将计算正确的大小和文本部分。例如 - `UITextView`has `textView.bounds.size.width`- 这个值不是系统在绘制文本时使用的实际矩形`UITextView`。

我发现了非常有趣的参数并在代码中进行了简单的计算：

```
CGFloat padding = textView.textContainer.lineFragmentPadding;  
CGFloat  actualPageWidth = textView.bounds.size.width - padding * 2; 
```

还有神奇的作品——我所有的文字现在都计算正确了！享受！

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-07-04T04:17:33.470

**斯威夫特四版**

```
let string = "A great test string."
let font = UIFont.systemFont(ofSize: 14)
let attributes: [NSAttributedStringKey: Any] = [.font: font]
let attributedString = NSAttributedString(string: string, attributes: attributes)
let largestSize = CGSize(width: bounds.width, height: .greatestFiniteMagnitude)

//Option one (best option)
let framesetter = CTFramesetterCreateWithAttributedString(attributedString)
let textSize = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, CFRange(), nil, largestSize, nil)

//Option two
let textSize = (string as NSString).boundingRect(with: largestSize, options: [.usesLineFragmentOrigin , .usesFontLeading], attributes: attributes, context: nil).size

//Option three
let textSize = attributedString.boundingRect(with: largestSize, options: [.usesLineFragmentOrigin , .usesFontLeading], context: nil).size 
```

使用 CTFramesetter 测量文本效果最好，因为它提供整数大小并很好地处理表情符号和其他 unicode 字符。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-09-28T06:31:44.097

这些建议中的任何一个我都没有运气。我的字符串包含 unicode 要点，我怀疑它们在计算中引起了悲伤。我注意到 UITextView 处理绘图很好，所以我查看了它来利用它的计算。我做了以下操作，这可能不如 NSString 绘图方法最佳，但至少它是准确的。它也比初始化 UITextView 来调用`-sizeThatFits:`.

```
NSTextContainer *textContainer = [[NSTextContainer alloc] initWithSize:CGSizeMake(width, CGFLOAT_MAX)];
NSLayoutManager *layoutManager = [[NSLayoutManager alloc] init];
[layoutManager addTextContainer:textContainer];

NSTextStorage *textStorage = [[NSTextStorage alloc] initWithAttributedString:formattedString];
[textStorage addLayoutManager:layoutManager];

const CGFloat formattedStringHeight = ceilf([layoutManager usedRectForTextContainer:textContainer].size.height); 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-06-10T18:25:27.617

事实证明，如果您希望 boundingRectWithSize 实际工作，则 NSAttributedString 的每个部分都必须具有至少设置了 NSFontAttributeName 和 NSForegroundColorAttributeName 的字典集！

我在任何地方都没有看到记录。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-07-06T00:22:02.803

如果您想通过截断尾部来获得边界框，[这个问题](https://stackoverflow.com/questions/20631464/how-to-specify-nslinebreakmode-in-boundingrectwithsize)可以帮助您。

```
CGFloat maxTitleWidth = 200;

NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc] init];
paragraph.lineBreakMode = NSLineBreakByTruncatingTail;

NSDictionary *attributes = @{NSFontAttributeName : self.textLabel.font,
                             NSParagraphStyleAttributeName: paragraph};

CGRect box = [self.textLabel.text
              boundingRectWithSize:CGSizeMake(maxTitleWidth, CGFLOAT_MAX)
              options:(NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading)
              attributes:attributes context:nil]; 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-11-13T16:32:19.697

我发现首选解决方案不处理换行符。

我发现这种方法适用于所有情况：

```
UILabel* dummyLabel = [UILabel new];
[dummyLabel setFrame:CGRectMake(0, 0, desiredWidth, CGFLOAT_MAX)];
dummyLabel.numberOfLines = 0;
[dummyLabel setLineBreakMode:NSLineBreakByWordWrapping];
dummyLabel.attributedText = myString;
[dummyLabel sizeToFit];
CGSize requiredSize = dummyLabel.frame.size; 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2014-03-27T11:17:47.643

@warrenm 很抱歉，framesetter 方法对我不起作用。

我明白了。这个函数可以帮助我们确定给定 Width 的 iphone/Ipad SDK 中 NSAttributedString 的字符串范围所需的帧大小：

可用于 UITableView Cells 的动态高度

```
- (CGSize)frameSizeForAttributedString:(NSAttributedString *)attributedString
{
    CTTypesetterRef typesetter = CTTypesetterCreateWithAttributedString((CFAttributedStringRef)attributedString);
    CGFloat width = YOUR_FIXED_WIDTH;

    CFIndex offset = 0, length;
    CGFloat y = 0;
    do {
        length = CTTypesetterSuggestLineBreak(typesetter, offset, width);
        CTLineRef line = CTTypesetterCreateLine(typesetter, CFRangeMake(offset, length));

        CGFloat ascent, descent, leading;
        CTLineGetTypographicBounds(line, &ascent, &descent, &leading);

        CFRelease(line);

        offset += length;
        y += ascent + descent + leading;
    } while (offset < [attributedString length]);

    CFRelease(typesetter);

    return CGSizeMake(width, ceil(y));
} 
```

感谢 HADDAD ISSA >>> [http://haddadissa.blogspot.in/2010/09/compute-needed-heigh-for-fixed-width-of.html](http://haddadissa.blogspot.in/2010/09/compute-needed-heigh-for-fixed-width-of.html)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-10-10T15:14:06.817

使用这些技术无法获得准确的尺寸时，我遇到了同样的问题，我已经改变了我的方法以使其发挥作用。

我有一个很长的属性字符串，我一直在尝试将其放入滚动视图中，以便它正确显示而不会被截断。为了使文本可靠地工作，我所做的是根本不将高度设置为约束，而是允许固有大小接管。现在文本正确显示而不会被截断，我不必计算高度。

我想如果我确实需要可靠地获取高度，我会创建一个隐藏的视图和这些约束，并在应用约束后获取框架的高度。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-01-12T14:48:09.657

我玩游戏有点晚了 - 但我一直在尝试找出一种方法来找到适合属性字符串的边界框，从而像在 Finder 中编辑文件一样制作焦点环。当字符串末尾有空格或字符串中有多个空格时，我尝试的所有操作都失败了。`boundingRectWithSize`为此以及`CTFramesetterCreateWithAttributedString`.

`NSLayoutManager`到目前为止，在我发现的所有情况下，使用以下代码似乎都可以解决问题，并返回一个完美绑定字符串的矩形。奖励：如果您选择文本，则选择的边缘会直接到达返回的矩形的边界。下面的代码使用来自`NSTextView`.

```
NSLayoutManager* layout = [self layoutManager];
NSTextContainer* container = [self textContainer];

CGRect focusRingFrame = [layout boundingRectForGlyphRange:NSMakeRange(0, [[self textStorage] length]) inTextContainer:container]; 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-02-20T19:17:05.057

这里的许多答案都很棒，David Rees 很好地总结了这些[选项](https://stackoverflow.com/a/44896950/4691224)。

但有时当有特殊字符或多个空格时，大小似乎总是错误的。

无效字符串的示例（对我而言）：

```
"hello    .   .  world" 
```

我发现将[紧缩](https://developer.apple.com/documentation/foundation/nsattributedstring/key/1527891-kern)设置为`NSAttributedString`有助于`1`返回正确的大小。

像这样：

```
NSAttributedString(
    string: "some string",
    attributes: [
        .font: NSFont.preferredFont(forTextStyle: .body), 
        .kern: 1]) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-04-02T15:17:10.647

```
textView.textContainerInset = UIEdgeInsetsZero;
NSString *string = @"Some string";
NSDictionary *attributes = @{NSFontAttributeName:[UIFont systemFontOfSize:12.0f], NSForegroundColorAttributeName:[UIColor blackColor]};
NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:string attributes:attributes];
[textView setAttributedText:attributedString];
CGRect textViewFrame = [textView.attributedText boundingRectWithSize:CGSizeMake(CGRectGetWidth(self.view.frame)-8.0f, 9999.0f) options:(NSStringDrawingUsesLineFragmentOrigin|NSStringDrawingUsesFontLeading) context:nil];
NSLog(@"%f", ceilf(textViewFrame.size.height)); 
```

完美适用于所有字体！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-12-11T08:02:10.217

我遇到了同样的问题，但我认识到高度约束已正确设置。所以我做了以下事情：

```
-(CGSize)MaxHeighForTextInRow:(NSString *)RowText width:(float)UITextviewWidth {

    CGSize constrainedSize = CGSizeMake(UITextviewWidth, CGFLOAT_MAX);

    NSDictionary *attributesDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                          [UIFont fontWithName:@"HelveticaNeue" size:11.0], NSFontAttributeName,
                                          nil];

    NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:RowText attributes:attributesDictionary];

    CGRect requiredHeight = [string boundingRectWithSize:constrainedSize options:NSStringDrawingUsesLineFragmentOrigin context:nil];

    if (requiredHeight.size.width > UITextviewWidth) {
        requiredHeight = CGRectMake(0, 0, UITextviewWidth, requiredHeight.size.height);
    }

    return requiredHeight.size;
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-05-21T15:43:40.230

```
 NSDictionary *stringAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                      [UIFont systemFontOfSize:18], NSFontAttributeName,
                                      [UIColor blackColor], NSForegroundColorAttributeName,
                                      nil];

    NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:myLabel.text attributes:stringAttributes];
    myLabel.attributedText = attributedString; //this is the key!

    CGSize maximumLabelSize = CGSizeMake (screenRect.size.width - 40, CGFLOAT_MAX);

    CGRect newRect = [myLabel.text boundingRectWithSize:maximumLabelSize
                                                       options:(NSStringDrawingUsesLineFragmentOrigin|NSStringDrawingUsesFontLeading)
                                                    attributes:stringAttributes context:nil];

    self.myLabelHeightConstraint.constant = ceilf(newRect.size.height); 
```

我尝试了此页面上的所有内容，但仍然有一个 UILabel 格式不正确的案例。实际上在标签上设置属性文本最终解决了这个问题。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-03-06T08:08:29.080

我注意到的一件事是，将从中返回的矩形`(CGRect)boundingRectWithSize:(CGSize)size options:(NSStringDrawingOptions)options attributes:(NSDictionary *)attributes context:(NSStringDrawingContext *)context`的宽度比我传入的宽度要大。发生这种情况时，我的字符串将被截断。我是这样解决的：

```
NSString *aLongString = ...
NSInteger width = //some width;            
UIFont *font = //your font;
CGRect rect = [aLongString boundingRectWithSize:CGSizeMake(width, CGFLOAT_MAX)
                                        options:(NSStringDrawingUsesFontLeading | NSStringDrawingUsesLineFragmentOrigin)
                                     attributes:@{ NSFontAttributeName : font,
                                                   NSForegroundColorAttributeName : [UIColor whiteColor]}
                                        context:nil];

if(rect.size.width > width)
{
    return rect.size.height + font.lineHeight;
}
return rect.size.height; 
```

有关更多上下文；我有多行文本，我试图找到合适的高度来显示它。boundRectWithSize 有时返回的宽度大于我指定的宽度，因此当我使用过去的宽度和计算出的高度来显示我的文本时，它会截断。从 boundingRectWithSize 使用错误宽度的测试来看，它会使高度缩短的量是 1 行。所以我会检查宽度是否更大，如果是，则添加字体的 lineHeight 以提供足够的空间以避免截断。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-11-29T09:33:04.463

```
 NSAttributedString *attributedText =[[[NSAttributedString alloc]
                                          initWithString:joyMeComment.content
                                          attributes:@{ NSFontAttributeName: [UIFont systemFontOfSize:TextFont]}] autorelease];

    CGRect paragraphRect =
    [attributedText boundingRectWithSize:CGSizeMake(kWith, CGFLOAT_MAX)
                                 options:(NSStringDrawingUsesLineFragmentOrigin|NSStringDrawingUsesFontLeading)
                                 context:nil];
    contentSize = paragraphRect.size;

    contentSize.size.height+=10;
    label.frame=contentSize; 
```

如果标签的框架不加 10，此方法将永远无效！希望这可以帮到你！祝你好运。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-02-15T03:28:12.180

我想补充一下我的想法，因为我遇到了完全相同的问题。

我正在使用`UITextView`它，因为它具有更好的文本对齐方式（justify，当时在 中不可用`UILabel`），但为了“模拟”非交互式非滚动`UILabel`，我将完全关闭滚动、弹跳和用户交互.

当然，问题是文本是动态的，虽然宽度是固定的，但每次我设置新的文本值时都应该重新计算高度。

`boundingRectWithSize`据我所见，对我来说根本不起作用，`UITextView`在顶部添加了一些边距，这`boundingRectWithSize`不会计入计数，因此，从中检索到的高度`boundingRectWithSize`小于应有的高度。

由于文本不会快速更新，它只是用于一些可能最多每 2-3 秒更新一次的信息，我决定采用以下方法：

```
/* This f is nested in a custom UIView-inherited class that is built using xib file */
-(void) setTextAndAutoSize:(NSString*)text inTextView:(UITextView*)tv
{
    CGFloat msgWidth = tv.frame.size.width; // get target's width

    // Make "test" UITextView to calculate correct size
    UITextView *temp = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, msgWidth, 300)]; // we set some height, really doesn't matter, just put some value like this one.
    // Set all font and text related parameters to be exact as the ones in targeted text view
    [temp setFont:tv.font];
    [temp setTextAlignment:tv.textAlignment];
    [temp setTextColor:tv.textColor];
    [temp setText:text];

    // Ask for size that fits :P
    CGSize tv_size = [temp sizeThatFits:CGSizeMake(msgWidth, 300)];

    // kill this "test" UITextView, it's purpose is over
    [temp release];
    temp = nil;

    // apply calculated size. if calcualted width differs, I choose to ignore it anyway and use only height because I want to have width absolutely fixed to designed value
    tv.frame = CGRectMake(tv.frame.origin.x, tv.frame.origin.y, msgWidth, tv_size.height );
} 
```

*以上代码不是直接从我的源代码中复制的，我必须对其进行调整/从本文不需要的一堆其他东西中清除它。不要把它当作复制粘贴和工作代码。

明显的缺点是每次调用都有分配和释放。

但是，优点是您避免依赖于 boundingRectWithSize 如何绘制文本并计算它的大小和文本绘制的实现之间的兼容性`UITextView`（或者`UILabel`您也可以使用替换`UITextView`为`UILabel`）。通过这种方式可以避免 Apple 可能存在的任何“错误”。

PS看起来你不应该需要这个“临时”`UITextView`并且可以`sizeThatFits`直接从目标询问，但这对我不起作用。虽然逻辑会说它应该工作并且`UITextView`不需要临时分配/释放，但它没有。但是这个解决方案对于我要设置的任何文本都完美无缺。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-12-19T06:30:12.580

```
Add Following methods in ur code for getting correct size of attribute string 
1.
    - (CGFloat)findHeightForText:(NSAttributedString *)text havingWidth:(CGFloat)widthValue andFont:(UIFont *)font
 {
    UITextView *textView = [[UITextView alloc] init];
    [textView setAttributedText:text];
    [textView setFont:font];
    CGSize size = [textView sizeThatFits:CGSizeMake(widthValue, FLT_MAX)];
    return size.height; 
```

}

```
2\. Call on heightForRowAtIndexPath method
     int h = [self findHeightForText:attrString havingWidth:yourScreenWidth andFont:urFont]; 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-11-29T03:44:01.380

好的，所以我花了很多时间调试这个。我发现我的`boundingRectWithSize`允许显示文本定义的最大文本高度`UITextView`低于框架大小。

在我的情况下，框架最多为 140pt，但 UITextView 最多允许文本 131pt。

我必须手动计算并硬编码“真实”最大高度。

这是我的解决方案：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    NSString *proposedText = [textView.text stringByReplacingCharactersInRange:range withString:text];
    NSMutableAttributedString *attributedText = [[NSMutableAttributedString alloc] initWithString:proposedText];
    CGRect boundingRect;
    CGFloat maxFontSize = 100;
    CGFloat minFontSize = 30;
    CGFloat fontSize = maxFontSize + 1;
    BOOL fit;
    NSLog(@"Trying text: \"%@\"", proposedText);
    do {
        fontSize -= 1;
        //XXX Seems like trailing whitespaces count for 0\. find a workaround
        [attributedText addAttribute:NSFontAttributeName value:[textView.font fontWithSize:fontSize] range:NSMakeRange(0, attributedText.length)];
        CGFloat padding = textView.textContainer.lineFragmentPadding;
        CGSize boundingSize = CGSizeMake(textView.frame.size.width - padding * 2, CGFLOAT_MAX);
        boundingRect = [attributedText boundingRectWithSize:boundingSize options:NSStringDrawingUsesLineFragmentOrigin|NSStringDrawingUsesFontLeading context:nil];
        NSLog(@"bounding rect for font %f is %@; (max is %f %f). Padding: %f", fontSize, NSStringFromCGRect(boundingRect), textView.frame.size.width, 148.0, padding);
        fit =  boundingRect.size.height <= 131;
    } while (!fit && fontSize > minFontSize);
    if (fit) {
        self.textView.font = [self.textView.font fontWithSize:fontSize];
        NSLog(@"Fit!");
    } else {
        NSLog(@"No fit");
    }
    return fit;
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-08-10T09:17:49.493

遇到完全相同的问题。

对我来说，这个问题是由[TTTAttributedLabel](https://github.com/TTTAttributedLabel/TTTAttributedLabel)解决的

```
+ (CGSize)sizeThatFitsAttributedString:(NSAttributedString *)attributedString
                       withConstraints:(CGSize)size
                limitedToNumberOfLines:(NSUInteger)numberOfLines 
```

方法，因为它提供了准确的结果。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-03-20T14:29:48.807

我在计算`NSTextField`. 我尝试的任何方法总是返回太小的值。
对我来说，问题原来是，出于某种原因，`NSTextField`' 的`attributedStringValue`属性从未包含我通过 Interface Builder 设置的任何属性。如果我没有以编程方式设置属性字符串，它实际上根本不包含任何属性。连字体都没有。这就是为什么所有的高度计算都搞砸了。

为了让它工作，我创建了`Category`一个`NSTextField`自定义函数来获取正确的属性字符串。

这是它的实现文件`Category`：

```
//
// --------------------------------------------------------------------------
// NSTextField+Additions.m
// Created for Mac Mouse Fix (https://github.com/noah-nuebling/mac-mouse-fix)
// Created by Noah Nuebling in 2021
// Licensed under MIT
// --------------------------------------------------------------------------
//

#import "NSTextField+Additions.h"

@implementation NSTextField (Additions)

// Copy paste template for adding attributes to an attributed string. Contains all possible attributes

//    [str addAttributes:@{
//        NSFontAttributeName:                NSNull.null,
//        NSParagraphStyleAttributeName:      NSNull.null,
//        NSForegroundColorAttributeName:     NSNull.null,
//        NSBackgroundColorAttributeName:     NSNull.null,
//        NSLigatureAttributeName:            NSNull.null,
//        NSKernAttributeName:                NSNull.null,
//        NSStrikethroughStyleAttributeName:  NSNull.null,
//        NSUnderlineStyleAttributeName:      NSNull.null,
//        NSStrokeColorAttributeName:         NSNull.null,
//        NSStrokeWidthAttributeName:         NSNull.null,
//        NSShadowAttributeName:              NSNull.null,
//        NSTextEffectAttributeName:          NSNull.null,
//        NSAttachmentAttributeName:          NSNull.null,
//        NSLinkAttributeName:                NSNull.null,
//        NSBaselineOffsetAttributeName:      NSNull.null,
//        NSUnderlineColorAttributeName:      NSNull.null,
//        NSStrikethroughColorAttributeName:  NSNull.null,
//        NSObliquenessAttributeName:         NSNull.null,
//        NSExpansionAttributeName:           NSNull.null,
//        NSWritingDirectionAttributeName:    NSNull.null,
//        NSVerticalGlyphFormAttributeName:   NSNull.null,
//    } range:NSMakeRange(0, str.length)];

/// In my testing NSTextField.attributedStringValue actually returned a string without _any_ attributes. Not even a font or anything.
/// This lead to issues when trying to calculate the fitting height for a certain width of the NSTextField.
/// This function takes some of the properties of the NSTextField and returns an NSAttributed string based on those.
/// I'm not sure this is perfect, but the returned attributed string describes the way that the text of the NSTextField is rendered close enough to be usable for my height calculations
- (NSAttributedString *)effectiveAttributedStringValue {

    NSMutableAttributedString *str = self.attributedStringValue.mutableCopy;

    // Create paragraph style from NSTextField properties

    // Not sure if we're setting these properties correctly, and there could be more properties we should be setting
    NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
    paragraphStyle.alignment = self.alignment;
    paragraphStyle.baseWritingDirection = self.baseWritingDirection;
    paragraphStyle.lineBreakMode = self.lineBreakMode;
    paragraphStyle.allowsDefaultTighteningForTruncation = self.allowsDefaultTighteningForTruncation;
    if (@available(macOS 10.15, *)) paragraphStyle.lineBreakStrategy = self.lineBreakStrategy;

    // Add attributes to AttributedString based on NSTextField properties

    [str addAttributes:@{
        NSFontAttributeName:                self.font,
        NSParagraphStyleAttributeName:      paragraphStyle,
        NSForegroundColorAttributeName:     self.textColor,
        NSBackgroundColorAttributeName:     self.backgroundColor,
//        NSLigatureAttributeName:            NSNull.null,
//        NSKernAttributeName:                NSNull.null,
//        NSStrikethroughStyleAttributeName:  NSNull.null,
//        NSUnderlineStyleAttributeName:      NSNull.null,
//        NSStrokeColorAttributeName:         NSNull.null,
//        NSStrokeWidthAttributeName:         NSNull.null,
//        NSShadowAttributeName:              NSNull.null, //self.shadow,
//        NSTextEffectAttributeName:          NSNull.null,
//        NSAttachmentAttributeName:          NSNull.null,
//        NSLinkAttributeName:                NSNull.null,
//        NSBaselineOffsetAttributeName:      NSNull.null, //self.baselineOffsetFromBottom,
//        NSUnderlineColorAttributeName:      NSNull.null,
//        NSStrikethroughColorAttributeName:  NSNull.null,
//        NSObliquenessAttributeName:         NSNull.null,
//        NSExpansionAttributeName:           NSNull.null,
//        NSWritingDirectionAttributeName:    NSNull.null, //self.baseWritingDirection,
//        NSVerticalGlyphFormAttributeName:   NSNull.null,
    } range:NSMakeRange(0, str.length)];

    // return NSAttributedString

    return str;

}

@end 
```

* * *

**随机旁注**

*   我`UILabel`在这个线程中读到的一些关于人们的问题听起来很像他们可能相关。
*   我最终决定使用`NSTextView`over，`NSTextField`因为它获取属性字符串的方法是开箱即用的，并且`NSTextField`用于可点击链接的方法也完全拙劣。我的印象`NSTextField`是，除了最基本的用例之外，您应该避免的只是一个错误的混乱。

# c++ - 为所有项目 Visual Studio 2010 配置 OpenCV

> ID：13621085
> 
> 赞同：2
> 
> 时间：2012-11-29T07:48:51.883
> 
> 标签：c++, opencv

我在 Visual Studio 2010 上使用 OpenCV，它工作正常，但我想知道是否可以进行对 windows 中的所有项目都有效的配置。而不是配置每个项目。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:01:29.610

Yes it is. You need to use **CMake**. Make a folder that contains all the projects of OpenCV in different subfolders. You will need a cmakelists.txt file in the top folder that includes all the subfolders. On each subfolder you will need to have your source codes in **src** folder and your headers in a **include** folder. CMake will create a VS studio project for all your opencv different projects and will find authomatically the libs and link them.

Now, how to create the cmakelists.txt of each OpenCV project? Something like this:

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT( project_name )

FIND_PACKAGE( OpenCV REQUIRED )

TARGET_LINK_LIBRARIES( ${PROJECT_NAME} {OpenCV_LIBS} ) 
```

Also check this [links](http://opencv.willowgarage.com/wiki/FindOpenCV.cmake) to set your cmake opencv projects. It is a pain the first time, but believe me that then is realy easy to create your projects, it is automatic.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:01:18.293

指定每个用户的目录列表

1.在视图菜单上，单击属性管理器。

2.在属性管理器中，单击配置和平台节点；例如，调试 | 赢32。

该节点展开并显示一个用户属性表，例如 Microsoft.Cpp.%platform%user，其中 %platform% 是系统定义的值，例如 Win32 或 X64。%platform% 值和项目的平台必须相同。

3\. 双击用户属性表，或单击用户属性表，然后单击快捷菜单中的属性。

将显示 %user Property Sheet%Property Pages 对话框，并突出显示 VC++ Directories 节点。

4\. 编辑目录列表，如前面“指定项目目录列表”的步骤 3 中所述。

# javascript - 使用 javascript 读取文本文件时出错

> ID：13621088
> 
> 赞同：0
> 
> 时间：2012-11-29T07:49:01.530
> 
> 标签：javascript, ajax

我一直在尝试学习如何使用 JavaScript 和 Ajax 在本地读取文本文件。我一直在网上查看一些教程，并遵循它们，但无论我做什么，我都无法让我的文本显示 .txt 文件中的内容。

```
function loadDoc(){
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange=function(){
                    if (xmlhttp.readyState==4 && xmlhttp.status==200){
                        xmlhttp.open("GET","names.txt",true);
                        allText = xmlhttp.responseText; 
                        lines = xmlhttp.responseText.split("\n");
                    }
                }
                xmlhttp.send(null);

                document.getElementById("myDiv").innerHTML=allText;
            } 
```

我认为这是为了更改我拥有的 div (id "myDiv") 以读取文本文件中的内容，但无论我尝试什么，它似乎都没有这样做。任何帮助将不胜感激 - 我还是 JavaScript 和 Ajax 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:51:10.257

使用 Firebug 或 Chrome 的开发人员工具确保 AJAX 调用返回正确的文本。

是否`names.txt`与 HTML 页面位于同一目录中？

# ios - 移动照片捕获的图像不稳定性度量[稳定性检测]

> ID：13621089
> 
> 赞同：1
> 
> 时间：2012-11-29T07:49:01.480
> 
> 标签：ios, image, mobile, detection, stability

正如您在标题中所读到的，我有一个关于在移动设备上拍摄照片的项目。我应该检测移动设备摄像头的实时输入是否稳定。但到目前为止，我所看到的只是稳定性本身，主要是视频......而不是查看输入是否稳定。而且我还没有阅读或看过任何有关图像不稳定性的论文。虽然有一些关于模糊和焦点的项目，但它们并不十分具体。有没有办法量化图像的“不稳定性”（假设它不仅仅是模糊、抖动和聚焦）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:54:48.390

实时输入显示为一系列预览图像。如果相机静止而物体静止，那么这些图像中的每一个都将与前一个非常相似。就个人而言，我会保留每张预览图像，当下一张出现时，逐个像素地比较它们。计算：

```
totalDifference = 0;
for (each pixel n) 
    for (each colour R, G, B) 
        totalDifference += abs(oldValue - newValue);

stability = 1/(1 + totalDifference); // a value of 1 is stable, near 0 is unstable 
```

尽管这不会考虑到黑暗物体的不稳定性。也许你应该使用

```
 totalDifference += abs((oldValue - newValue)/(oldValue + newValue)); // watch for divide by 0! 
```

反而。祝你好运！

# objective-c - 切换xib时在willRotateToInterfaceOrientation中获取正确的帧

> ID：13621091
> 
> 赞同：0
> 
> 时间：2012-11-29T07:49:02.180
> 
> 标签：objective-c, ios

> **可能重复：**
> [iOS 边界在旋转到横向后发生变化，然后又回到纵向](https://stackoverflow.com/questions/12412240/ios-bounds-change-after-rotating-to-landscape-then-back-to-portrait)

我有一个 UIViewController，根据它的方向，将底层 xib 从横向切换到纵向，反之亦然。

其机制非常简单。在 willRotateToInterfaceOrientation 中，我检查我们要更改的方向，然后加载正确的 xib 并调用 [self viewDidLoad]。

结果是我所有的视图都得到了正确的出口，所有的标准 UI 组件看起来都很好。

问题出现在我在旋转期间再次布局的自定义组件上。它的问题是，当我读取该组件的帧时，willRotateToInterfaceOrientation 中的结果帧不是预期在新控制器中的帧。它介于两者之间，就像它是动画的帧一样。

这曾经发生在任何人身上吗？有没有更好的方法来实现这一点？

# css - 背景 CSS 问题 - 不重复

> ID：13621094
> 
> 赞同：0
> 
> 时间：2012-11-29T07:49:08.130
> 
> 标签：css, html

我有一个快速的问题，希望答案也很快。如何让我的背景在整个页面中重复出现？我试过css repeat，由于某种原因它不起作用。

```
#main_container{
    background:url(../images/cb.jpg)  top left repeat;
    margin:0 auto;
    padding:100px 0 150px 0;
    z-index:9999;   

body{
    background-color:#000;
    color:#fff;
    padding:0 0 0 0;
    margin:0 0 0 0;
    width:100%;
    display:table;
    overflow-x:hidden;
    position:relative;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:06:31.437

您看到的问题是因为您的#main-container 没有填满整个页面，您需要将其扩展为页面的整个高度。你为什么使用

```
 body { display: table } 
```

在你的CSS？我会删除它，因为它可能会混淆某些浏览器并且不应该有任何意义......

一个简单的解决方法是将背景图像放在`body`标签中，如果这是您的选择？

否则，您始终可以将 css 添加到您的#main-container：

#main_container { 位置：绝对；顶部：100 像素；底部：0；边距：0 自动；}

并保持你的`body { position: relative; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:55:36.597

你可以使用[`background-repeat`](http://reference.sitepoint.com/css/background-repeat)：

```
#main_container{
    ...
    'background-repeat:repeat;'
} 
```

如果您不使用 netscape 或类似的 smthn，它应该可以在您的浏览器上运行 ^^

# c - Go 中有 mmseg 还是我可以从 Go 调用自定义的 C 函数？

> ID：13621095
> 
> 赞同：3
> 
> 时间：2012-11-29T07:49:07.907
> 
> 标签：c, nlp, go

我想在 Go 中像在其他语言中一样使用 mmseg，例如，在 python 中你可以使用 pymmseg

那么，有没有类似的 Go 包？

或者，我如何从 Go 中调用 C 函数？或者，如何像在 python 中一样从 Go 调用共享库 (*.so)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:52:19.847

您可以按照本教程中的描述调用 use C Libs：

[http://cheesesun.blogspot.de/2009/12/basic-cgo.html](http://cheesesun.blogspot.de/2009/12/basic-cgo.html)

和：

[http://siganakis.com/linking-c-libraries-with-go-lang-and-stdc99](http://siganakis.com/linking-c-libraries-with-go-lang-and-stdc99)

或者你可以看看这个库：

[https://github.com/awsong/MMSEGO](https://github.com/awsong/MMSEGO)

它是中文的，但你可以用它把你自己的算法放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:44:58.320

用于`cgo`从 Go 调用 C 代码。

[命令 cgo](http://golang.org/cmd/cgo/)

[C？去？加油！](http://blog.golang.org/2011/03/c-go-cgo.html)

# java - 结果集没有进入while循环并设置值

> ID：13621097
> 
> 赞同：0
> 
> 时间：2012-11-29T07:49:15.160
> 
> 标签：java, servlets

观察到这段代码的奇怪行为，因为结果集没有给出空值（执行 SOP 很清楚）但没有进入 while 循环（这很奇怪！）而且它是简单的 dao 类，*它无法设置值在用户对象中*：

```
public class DAO{

 public List<User> searchAllUsers(int offset ,int noOfRecords, String column, String value){
    String query="select SQL_CALC_FOUND_ROWS * from info where '"+column+"' like '%"+value+"%' order by serialNo asc limit " + offset + "  ,  " + noOfRecords;
    //  String query="select * from info where '"+select+"' like '%"+search+"%' order by serialNo asc";
    System.out.println("1");
    List<User> list = new ArrayList<User>();
    User user=null;

    try {
        System.out.println("b4 Connection");
        connection = getConnection();
        System.out.println("After Connection");
        stmt = connection.createStatement();
        System.out.println("Create statement");
        ResultSet rs=stmt.executeQuery(query);
        if(rs!=null)
        System.out.println("1> Hi rs:"+rs);
        while(rs!= null && rs.next()){
            System.out.println("hi...!!");
            user=new User();
            user.setSerial(rs.getInt(1));
            System.out.println("Serial : "+rs.getInt(1));
            user.setName(rs.getString(2));
            user.setEmail(rs.getString(3));
            user.setImei(rs.getString(4));
            System.out.println("I'm here !");
            user.setModel(rs.getString(5));
            user.setManufacturer(rs.getString(6));
            user.setOsversion(rs.getString(7));
            user.setHdyk(rs.getString(8));
            user.setDate(rs.getString(9));
            user.setAppname(rs.getString(10));
            list.add(user);
            System.out.println("Last..");
            }
        rs.close();
        rs = stmt.executeQuery("SELECT FOUND_ROWS()");
        System.out.println("2> :" +rs);
        if(rs.next()){
            this.noOfRecords = rs.getInt(1); 
        System.out.println("3> :" +this.noOfRecords);
        }
        rs.close();
    } catch (SQLException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
      finally
    {
        try {
            if(stmt != null)
                stmt.close();
            if(connection != null)
                connection.close();
            } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    return list;

}

public int getNoOfRecords() {
    return noOfRecords;
}
} 
```

它对应的输出是：

```
1
b4 Connection
After Connection
Create statement
1> Hi rs:com.mysql.jdbc.JDBC4ResultSet@35e6e3
2> :com.mysql.jdbc.JDBC4ResultSet@c9630a
3> :0 
```

即使我也使用与它相同的代码来选择所有用户，并且那个时间点我得到了正确的 o/p。

花了这么多时间，但无法解决它 - 我哪里出错了......所以您的评论和评论将永远受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T07:51:32.270

那是因为您`query`没有获取任何行。因此`rs.next()`将返回`false`，因此执行不会进入`while loop`：

```
while(rs!= null && rs.next()) 
```

而且您不必检查`rs != null`. 它不会为空。`stmt.executeQuery`总是返回`ResultSet`一个. 只要`rs.next()`在你的`while`：

```
while(rs.next()) 
```

是的，你应该用它[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)来执行你的`query`而不是`Statement`. 这是一个可以帮助您入门的[教程。](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

# knockout.js - 有什么方法可以控制 ko.toJS / ko.toJSON？

> ID：13621099
> 
> 赞同：2
> 
> 时间：2012-11-29T07:49:22.447
> 
> 标签：knockout.js, knockout-mapping-plugin

```
var mappingSetting = {
  'user' : {
      create: function(options.data){
          options.data.isActive = options.data.isActive == 1 ? 'Yes' : 'No';
          options.data.startDate = $.datepicker.format('dd/MM/yy', options.data.startDate)
          return options.data;
          }
     }
};

var viewModel = {};

$.ajax({
   url: '/api/users/GetAll',
   .....
   success: functions (data) {
       viewModel = ko.mapping.fromJS(data, mappingSetting);
       ko.applyBindings(viewModel);
   },
});

$("#savebtn").click(function(){
    var dataToSave = ko.toJS(viewModel);
    // ajax call to save
}); 
```

ajax结果

```
[{username: 'users1', isActive:1, startDate:'2001-03-22T00:00:00CET'}, {username: 'users2', isActive:0, startDate:'2008-03-22T00:00:00CET'}] 
```

我必须在 isActive 的基础上显示是/否，但在保存时我必须将其更改回 0 / 1。

我有很多领域，还有日期（当地文化格式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T04:02:25.917

将 isActive 保留为布尔值可能会更好，并使用计算函数或自定义绑定处理程序在给定 isActive 值的情况下显示“是”/“否”。

**自定义绑定处理程序**

```
ko.bindingHandlers.formatBool = {
  update: function(element, valueAccessor, allBindingsAccessor) {
     var value = ko.utils.unwrapObservable(valueAccessor());
     var text = value ? "Yes" : "No";

     ko.bindingHandlers.text.update(element, function() { return text; });
  }
}; 
```

这里以[jsFiddle](http://jsfiddle.net/nathanjones/4EZFJ/)为例。

**计算的“格式化”值**

由于您使用映射插件来构建整个视图模型，这可能不是最佳解决方案，但使用计算来格式化其他可观察值通常很有用。

```
viewModel.options.data.isActive.formatted = ko.computed(function(){
  return viewmodel.options.data.isActive ? "Yes" : "No";
}); 
```

**覆盖 toJSON**

也就是说，如果你真的更喜欢覆盖你的 toJS/toJSON 函数，你可以在你的视图模型上覆盖这些方法。

```
viewModel.toJSON = function(){
  var copy = ko.toJS(this);
  copy.isActive = copy.isActive === "Yes" ? 1 : 0;
  return copy;
} 
```

这是 Ryan Niemeyer 的一篇[很棒的文章](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html)，它准确地解释了这是如何完成的。

# objective-c - 为什么我们需要更改 willDisplayCell 中单元格的背景颜色？

> ID：13621104
> 
> 赞同：0
> 
> 时间：2012-11-29T07:49:43.193
> 
> 标签：objective-c, ios, uitableview

> 注意：如果要更改单元格的背景颜色（通过 UIView 声明的 backgroundColor 属性设置单元格的背景颜色），您必须在委托的 tableView:willDisplayCell:forRowAtIndexPath: 方法中进行，而不是在 tableView :cellForRowAtIndexPath: 数据源的。更改组样式表视图中单元格的背景颜色在 iOS 3.0 中产生的效果与以前版本的操作系统不同。它现在影响圆角矩形内部的区域，而不是它外部的区域。

我注意到更改 cellForRowAtIndexPath 中单元格的背景颜色对普通样式单元格没有任何作用，尽管它在组单元格上工作正常。

谁能解释设计决策？

尽管如此，更改 cell.contentView 的背景颜色也有效。

注意：我知道简单地放置 UIView 并在我们的自定义 TableView Cell 上设置背景。我问为什么而不是问如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:09:49.433

似乎苹果用表格的背景覆盖了背景。

要真正改变背景，我们需要在覆盖之后这样做，这意味着：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath { ... } 
```

我试过了，它有效。

# iphone - 将小数点向右移动 2 位？

> ID：13621105
> 
> 赞同：-5
> 
> 时间：2012-11-29T07:49:46.477
> 
> 标签：iphone, objective-c, xcode, int

我用此代码划分 2 个双精度值：

```
 float final = cw / q ;
  label.text = [NSString stringWithFormat:@"%g", final]; 
```

这段代码运行良好，但我如何将小数点向右移动两个空格。

像这样：0.500000 到 50.000 或只有 50

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T07:52:09.717

嗯，在转换为文本之前乘以 100 怎么样？

```
float final =  ( cw / q ) * 100.0; 
```

# python - sqlalchemy 中的 RIGHT() 函数

> ID：13621110
> 
> 赞同：3
> 
> 时间：2012-11-29T07:50:04.440
> 
> 标签：python, sqlalchemy

我可以在 SQLAlchemy 中实现以下内容吗？

```
SELECT * 
FROM TABLE 
WHERE RIGHT(COLUMN_CODE, 2) = 'AX' 
```

此处`RIGHT( )`返回具有指定字符数的字符串的右侧部分。

是否有该`RIGHT`函数的 SQLAlchemy 实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T08:39:56.697

您最好使用以下`.endswith()`方法：

```
select([tabledef]).where(tabledef.c.column_code.endswith('AX')) 
```

或者，当使用映射器配置和会话进行过滤时：

```
session.query(mappedobject).filter(mappedobject.column_code.endswith('AX')) 
```

该`column_code.endswith()`方法将被转换为最适合您的特定引擎的任何 SQL，匹配以 . 结尾的列值`AX`。

如果*必须*直接使用sql 函数，则始终可以使用[函数生成器](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html?highlight=function#sqlalchemy.sql.expression.func)创建任意 SQL 函数：*`RIGHT()`*

 *```
from sqlalchemy.sql.expression import func

select([tabledef]).where(func.right(tabledef.c.column_code, 2) == 'AX') 
```

并且`func.right()`调用将由`RIGHT(column_code, 2)`SQL 生成层翻译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:09:03.937

文档没有说清楚，但是您可以使用sytle编写*任何*函数。不必由 SQLAlchemy 模块本地定义。SQLAlchemy 知道诸如 min、max 等常见函数，如果这些函数之间存在方言变体，SQLAlchemy 会为您处理。`func.funcname``funcname`

但是 SQLAlchemy 不知道的函数*按原样*传递。因此，您可以创建查询，生成带有所需`RIGHT`函数的 SQL 语句，如下所示

```
>>> from sqlalchemy import func
>>> select([table]).where(func.RIGHT(users.c.column_code, 2)='AX') 
```*

# c# - 在视图asp.net mvc 3中读取传递的值

> ID：13621113
> 
> 赞同：0
> 
> 时间：2012-11-29T07:50:23.353
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我是 asp.net mvc 和学习的新手。我有一个将值传递给我的方法的视图。这是下面用于传递该值的代码：

```
 @Html.ActionLink("CPD Details", "Details1", new { id=item.ID, item.LastName}) 
```

以下是我的 Details1 的方法。部分代码已省略。

```
 public ActionResult Details1(int id, string LastName)

   return View() 
```

以下是我的 Details1 视图的一部分：

```
@model IEnumerable<onlineCPD.Models.cpd_certificates> 
```

请注意，该值来自另一个模型并且是独立的，即没有映射或关系集。如何在我的 Details1 视图中显示这个传递的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:59:50.310

如果您只想在视图中查看这些变量，您应该使用 ViewBag。阅读此网页以获取有关 ViewBag - [MVC 3 中的 ViewBag的更多信息](http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx)

控制器

```
public ActionResult Details1(int id, string LastName)
{
   ViewBag.Id = id;
   ViewBag.LastName = LastName;

   return View();
} 
```

您的详细信息1 查看

```
@model IEnumerable<onlineCPD.Models.cpd_certificates>

@{
   ViewBag.Title = "Details";
 }

 <p>
   id = @ViewBag.Id 
   <br/>
   Last Name =  @ViewBag.LastName
</p> 
```

阅读本教程以了解更多信息。[MVC-音乐商店教程](http://www.asp.net/mvc/tutorials/mvc-music-store)

# javascript - HTML5 Colspan - 替代品

> ID：13621126
> 
> 赞同：3
> 
> 时间：2012-11-29T07:51:18.030
> 
> 标签：javascript, html, html-table

我在我的 HTML 中的一个 td 标签中使用了“colspan”。我不想在我的 HTML 中使用“colspan”。但是我仍然需要实现'colspan'实现的功能。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:00:48.853

`colspan`可以使用带有虚拟空单元格的表来模拟`<td></td>`要跨越的插槽并绝对定位应该跨越它们的单元格的效果。您需要一个相对定位的表格包装器`div`，因为您不能直接使表格成为定位的参考框架。

它变得相当难看，特别是因为您需要担心行高——因为使单元格绝对定位会使它远离表格格式。您可以通过使用单元格内容的副本作为要跨越的虚拟单元格的内容来处理此问题。见[jsfiddle](http://jsfiddle.net/pp6wz/)。

它变得复杂，因此任何不能处理简单的软件也`colspan`可能无法处理这个问题（至少如果它负责*呈现*文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:03:19.230

```
$(document).on('click', 'input#submitHtml', function(){
    $('htmlToSend').find('tr').removeAttr('colspan');
    // Submit the form.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:10:46.203

您可以使用网格状结构，使用 div。

```
<div>
    <div class='headerrow'>

    </div>
    <div class='bodyrow'>
        <div class='bodycell'>

        </div>
        <div class='bodycell'>

        </div>
    </div>
</div> 
```

# c# - 如何使用c#在表格中创建链接文本

> ID：13621128
> 
> 赞同：-1
> 
> 时间：2012-11-29T07:51:28.950
> 
> 标签：c#, html

我想创建一个包含两列的表格格式，其中每一行都有一个 ProductTitle 及其对应的 URL。

我正在使用以下代码以表格格式提供信息。我在第二列中显示整个锚标记。

但我只想将文本显示为第二列中的链接。单击它应该打开 URL 页面。

```
DataTable dt = new DataTable();

dt.Columns.Add("ProductTitle");
dt.Columns.Add("Link");

DataRow dr = dt.NewRow();
dr["ProductTitle"] = "GOOGLE";
dr["Link"] = "<" + "a href=\"" + "http://www.google.com" + "\">Google" + "</a>";
dt.Rows.Add(dr);

Gridview1.DataSource = dt;
Gridview1.DataBind(); 
```

任何人都可以建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:03:39.777

试试这个

```
dr["Link"] = "<a href='http://www.google.com'>Google</a>"; 
```

我试过

```
Label1.Text = "<a href='http://www.google.com'>Google</a>"; 
```

有用。

**第二次尝试：**

除了 .NET 类型（如 string、int .etc）之外，我们无法保存任何其他内容，因此请尝试像这样的 asp:HyperLink

```
<ItemTemplate>
 <asp:HyperLink ID="HyperLink1" runat="server" Text='<%# Eval("ProductTitle")%>' NavigateUrl='<%# Eval("Link") %>'></asp:HyperLink>
</ItemTemplate> 
```

和

```
dr["ProductTitle"] = "Goole";
dr["Link"] = "http://www.google.com"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:09:32.587

`.aspx`您可以按如下方式修改文件：

```
 ...
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:BoundField DataField="ProductTitle" HeaderText="Product Title" />
            <asp:BoundField DataField="Link" HtmlEncode="false" HeaderText="Link" />
        </Columns>
    </asp:GridView>
    ... 
```

因此，您应该通过设置`AutoGenerateColumns="false"`和格式化`Columns`. `GridView`请注意此处链接渲染的关键元素，即`HtmlEncode="false"`属性。您还可以在代码隐藏文件中设置所有内容：

```
 GridView1.AutoGenerateColumns = false;

    var productTitleField=new BoundField();
    productTitleField.DataField="ProductTitle";
    productTitleField.HeaderText="Product Title";

    var linkField=new BoundField();
    linkField.DataField="Link";
    linkField.HeaderText="Link";
    linkField.HtmlEncode=false;

    GridView1.Columns.Add(productTitleField);
    GridView1.Columns.Add(linkField); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:47:18.183

实际上有一个专门为您想要做的事情而设计的专栏，它就是`HyperLinkField`专栏。

```
<asp:HyperLinkField 
            HeaderText="Header"
            DataTextField="LinkText"
            DataNavigateUrlFields="LinkURL" 
            DataNavigateUrlFormatString="http://google.com/q={0}" /> 
```

然后，您可以确保您的数据源具有链接文本和导航 url 字段的适当列。

如果您有固定文本或固定 url 以使用`Text`或`NavigateURL`属性而不是 Data... 对应项，则可以对其进行配置，并且您可以根据需要使用或不使用格式字符串。

# java - 如何使用 EVP_Sign 函数计算签名

> ID：13621137
> 
> 赞同：0
> 
> 时间：2012-11-29T07:51:56.657
> 
> 标签：java, c, openssl, digital-signature

我在 C 中有以下代码，与 java[相比，java 代码在 c 中的 openssl 摘要不同](https://stackoverflow.com/questions/13608286/openssl-digest-different-in-c-compared-to-java/13610789)。

```
EVP_MD_CTX md_ctx;
unsigned char sig_buf[4096];
/* Do the signature */
int err;
unsigned int sig_len;
String testSign = "c14N string ";
EVP_SignInit(&md_ctx, EVP_sha256());
EVP_SignUpdate(&md_ctx, testSign.c_str(), testSign.size());
sig_len = sizeof(sig_buf);
err = EVP_SignFinal(&md_ctx, sig_buf, &sig_len, privKey);
if (err != 1) {
    perror("Error While generating Signature for Security Token");
    return "Null Signature";
}
return calculateBase64(sig_buf,sig_len); 
```

我面临的问题是 java 计算的签名与 C 不同。这必须使用私钥来完成，并且我有来自 OpenSSL 的 SSL 对象可用。

也只是添加以下命令行生成匹配的签名

```
echo -n "String here" | openssl dgst -dss1 -sha256 -sign client.key |openssl base64 
```

这方面的任何指示都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:45:52.977

替换以下并得到正确的结果。

```
EVP_MD_CTX_init(&md_ctx);
EVP_SignInit_ex(&md_ctx, EVP_sha256(),NULL);
EVP_MD_CTX_cleanup(&md_ctx); 
```

参考： [http ://www.nlnetlabs.nl/downloads/publications/hsm/hsm_node22.html](http://www.nlnetlabs.nl/downloads/publications/hsm/hsm_node22.html)

# c# - 根据 XML 元素的值创建 if 语句块

> ID：13621144
> 
> 赞同：2
> 
> 时间：2012-11-29T07:52:22.743
> 
> 标签：c#, asp.net, xml

如何根据 id 的值（XML 元素）创建 if 语句块

```
string filepath = Server.MapPath("XMLFile2.xml");

XmlDocument xdoc1 = new XmlDocument();
xdoc1.Load(filepath);

XmlNode root = xdoc1.DocumentElement;
XmlNode idNode = root.SelectSingleNode("/students/student/id");

   if (idNode.Value == 1.ToString()){my code} 
```

恐怕这段代码会选择文件中的第一个节点，或者这有另一种方式我可以根据节点的 id 值选择节点？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:07:04.140

替换您的此代码

**以前的代码**

```
XmlNode idNode = root.SelectSingleNode("/students/student/id"); 
```

**新代码**

```
XmlNode idNode = root.SelectSingleNode("//students/student/id"); 
```

而且，如果您想根据 id 的值搜索节点而不是使用以下值，则主要是这样。

```
XmlNode idNode = root.SelectSingleNode("//students/student/[id='"+<YOUR id>+"']"); 
```

它会工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:01:57.340

您可以使用`LINQ2XML`

```
XElement doc =XElement.Load(filepath);
var xpath = String.Format("//students/student/[id='{0}']", "1");
                                                            -
                                                            |->your ID value goes here
var StudentNodeWithID1= doc.XPathSelectElement(xpath);
//selects a single student node with id as 1 or would return NULL if there are no students with id as 1 
```

**或者**

```
var StudentNodeWithID1= doc.Elements("student")
                           .Where(s => s.Element("id").Value == "1")
                           .SingleOrDefault();

StudentNodeWithID1.Element("id");//id node
StudentNodeWithID1.Element("id").Value;//id value 
```

# php - preg_split 混合 HTML 和 PHP 标记，引号和注释除外

> ID：13621145
> 
> 赞同：5
> 
> 时间：2012-11-29T07:52:24.457
> 
> 标签：php, regex, preg-match, preg-split

我有一个混合了 HTML 的 php 页面。一些示例代码：

```
<?php echo "<p>some text</p>"; ?>/* <? some php in comments ?> */
<p>some HTML text</p> <!-- <h1>some HTML in comments</h1> -->
<? $header_info = <<<END 
\$some="<?php @ob_start(); @session_set_save_handler(); ?>";
END; ?>
<h2>Some more HTML</h2> 
```

我想在每个 PHP 和 HTML 标记处拆分，但保留引号或注释中的任何 PHP 标记或 HTML 标记不变/忽略。这是我到目前为止所拥有的：

```
$array = preg_split("/((^<\?php)|([^'|\"]<\?php)|([^'|\"]<\?)|([^'|\"]\?>)|(<\%)|(\%>))/i", $string, -1); 
```

我遇到的问题是最终 $array 中缺少一些 HTML 右括号“>”。我想保持 HTML 打开和关闭标签完好无损。有时我最终得到

```
<p></p instead of <p></p> 
```

它应该如下所示：

```
[0] echo "<p>some text</p>";  
[1] <p>some HTML text</p> 
[2] $header_info = <<<END 
\$some="<?php @ob_start(); @session_set_save_handler(); ?>";
END; 
[3] <h2>Some more HTML</h2> 
```

任何注释都不需要是数组的一部分，只要 preg_split 不将它们视为任何分隔符并忽略它们中的任何一个。

我也刚刚意识到一些 php 标签，尤其是在使用 eval() 时可能会像这样结束：

```
"?> <p>some HTML text</p> <?"; 
```

这意味着我的正则表达式中的引用与任何这些情况都不匹配。

Preg_match() 可能是一个更好的选择，但不确定。

任何帮助都将不胜感激，因为我在正则表达式方面不是很聪明，而且在这一点上陷入了困境。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:31:39.663

**前言**
由于提出了正则表达式解决方案，因此以下解决方案将依赖于正则表达式。但是，在这种特殊情况下，*PHP 解析器会更适合*.

**正则表达式**

```
#(?<!"|\')<\\?(?:php)?\\s+(.+?)\\?>(?!"|\')|/\*.+\*/|<!--.+-->#is 
```

**小脚本**

```
$subject = '<?php echo "<p>some text</p>"; ?>/* <? some php in comments ?> */
<p>some HTML text</p> <!-- <h1>some HTML in comments</h1> -->
<? $header_info = <<<END
\\$some="<?php @ob_start(); @session_set_save_handler(); ?>";
END; ?>
<h2>Some more HTML</h2>';

$returnValue = preg_replace('#(?<!"|\')<\\?(?:php)?\\s+(.+?)\\?>(?!"|\')|/\*.+\*/|<!--.+-->#is', '$1', $subject, -1);

var_dump(preg_split('#\\r?\\n#s', $returnValue)); 
```

**结果**

```
array(6) {
  [0]=>
  string(25) "echo "<p>some text</p>"; "
  [1]=>
  string(22) "<p>some HTML text</p> "
  [2]=>
  string(21) "$header_info = <<<END"
  [3]=>
  string(60) "\$some="<?php @ob_start(); @session_set_save_handler(); ?>";"
  [4]=>
  string(5) "END; "
  [5]=>
  string(23) "<h2>Some more HTML</h2>"
} 
```

**演示**
[http://sandbox.onlinephpfunctions.com/code/017a51877b50f272f151feade7b59e142757481e](http://sandbox.onlinephpfunctions.com/code/017a51877b50f272f151feade7b59e142757481e)

**讨论**

```
1\. # 
2\. (?<!"|\')
3\. <\\?(?:php)?\\s+
4\. (.+?)
5\. \\?>
6\. (?!"|\')
7\. |/\*.+\*/
8\. |<!--.+-->
9\. #is 
```

**第 1 行**我使用这个正则表达式分隔符，因为它允许避免 /
**第 2 行**的转义这是正则表达式的*关键*。否定的**lookbehind**用于确保下一个开始的php标签前面没有任何单引号或双引号。
**第 3 行**这里定义了一个开始的 php 标记是什么。为了也支持 ASP 标签，这行可以这样修改：`<\\?(?:php|%)?\\s+`
**第 4 行**因为我们检测到一个 php 代码序列的开始，我们匹配这个 php 代码序列中出现的任何字符。请注意，在**第 9 行**，我们使用`s`标志来指示我们在 php 代码序列中也需要新行。
**第 5 行**我们标记了 php 代码序列的结束。
**第 6 行**我们确保前面匹配的 php 标记后面没有任何带有**否定前瞻**断言的单/双引号。
**第 7,8 行**如果我们发现一些 php/HTML 注释，它们将被简单地忽略。
**第 9 行**结束 f 正则表达式。

**已知的问题**

*   在 上执行正则表达式后`$subject`，行简单地用换行符（前面是可选的回车符）分隔符分隔。
*   不努力处理 php heredoc 或 newdoc 语法。
*   此正则表达式不应**被**视为针对任何 php 代码的防弹正则表达式。PHP 解析器更适合。

# asp.net-mvc - 如何在MVC4中重构[音乐商店]？

> ID：13621147
> 
> 赞同：0
> 
> 时间：2012-11-29T07:52:25.690
> 
> 标签：asp.net-mvc

刚刚下载了 MS 2012 express 并建立了 MVC4 web 示例。我在使用 2012 express 加载音乐商店时遇到问题，它返回有关数据库崩溃的错误，任何人都可以就如何更改数据库内容给出一些解释。

最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:32:48.327

我不确定我是否完全理解这个问题。但我认为您要查找的内容位于名为“Web.config”的文件中。

定义了与数据库的连接。在那里寻找以下行：

```
<connectionStrings>
    <add name="MusicStoreEntities"
     connectionString="Data Source=|DataDirectory|MvcMusicStore.sdf"
     providerName="System.Data.SqlServerCe.4.0"/>
  </connectionStrings> 
```

您可以将其更改为您的数据库连接。

现在我写了这个，我看到它使用 SQL Server Compact Edition。如果 Express 版附带 SQL Server Compact，我现在不知道，但您可以在以下位置阅读更多信息：http: [//msdn.microsoft.com/en-us/library/aa983341 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa983341(v=vs.110).aspx)

# c# - 绑定到类成员

> ID：13621154
> 
> 赞同：3
> 
> 时间：2012-11-29T07:53:03.380
> 
> 标签：c#, wpf, data-binding

这似乎是基本的，并且可以以某种方式复制，但是我在互联网上找到的任何答案都没有使这件事对我有用..

我想将我的 UI (XAML) 中的元素绑定到我拥有的类实例的成员。所以，让我们有一个简单的 XAML

```
<Window x:Class="gUSBampReader.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="601" Width="857" xmlns:my="clr-namespace:binding;assembly=binding">

   <TextBlock Name="UITextBlock"/>  <!-- THIS IS THE TEXT BOX TO BE BINDED -->

</Window> 
```

在另一边我有一堂课

```
public class foo
{
    objectThatImplementsINotify a; //lets say that's equivalent to an string
}

public partial class mainWindow : Window
{
    public foo externalMembers;

    public mainWindow()
    {
       externalMembers = new foo();
       //Let's show externalMembers.a in UITextBlock!
    }
} 
```

我想了解如何从 XAML 和 C# 进行此绑定。因为有时外部成员在那里，我可以在开发时绑定，但其他时候是动态的，它必须在执行时创建和绑定

最后..你能推荐一个关于数据绑定的好教程和一些例子吗？XAML 有很多东西（但我一直无法使它工作）。但对于 C# 来说并不算多。

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:00:00.243

您需要将窗口的 DataContext 设置为自身：

```
public mainWindow()
{
   externalMembers = new foo();
   DataContext = this;
   //Let's show externalMembers.a in UITextBlock!
} 
```

然后你需要绑定文本块：

```
<TextBlock Name="UITextBlock" Text="{Binding externalMembers.a}"/> 
```

要使其工作，您还需要更改`externalMembers.a`为属性，而不是字段：

```
public class foo
{
    objectThatImplementsINotify a { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:59:17.177

据我所知，绑定仅适用于属性，不适用于字段。请参阅此处了解更多详细信息，包括如何在代码中创建绑定：http: [//msdn.microsoft.com/en-us/library/ms752300.aspx](http://msdn.microsoft.com/en-us/library/ms752300.aspx)。您应该更改您的类以使用属性而不是字段。

# php - 无法将大视频上传到服务器

> ID：13621155
> 
> 赞同：0
> 
> 时间：2012-11-29T07:53:09.513
> 
> 标签：php, cakephp

我在我的项目中使用 cakephp。这是我的服务器的设置：

```
<?php
$config['PHP']['max_execution_time'] = '10000';     // session timeout (second) セッション有効期間 (秒単位) 
$config['PHP']['max_input_time'] = '10000';         

// File upload
$config['PHP']['post_max_size'] = '5000M';
$config['PHP']['memory_limit'] = '20000M';
$config['PHP']['upload_max_filesize'] = '5000M'; 
```

当我提交上传大尺寸视频（>100M）的表单时，它丢失了所有提交的参数。但是，如果我提交小尺寸视频，一切都会好起来的。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:11:01.507

基本上 php.ini 中有四个选项可以避免这种情况。要在运行时更改它，您可以使用以下命令：

**内存限制**

```
ini_set( 'memory_limit', '256M' ); 
```

**max_execution_time**

```
ini_set( 'max_execution_time', 3600 ); or set_time_limit( 3600 ); 
```

**post_max_size**

```
Must be set in php.ini 
```

应该大于upload_max_filesize

**上传最大文件大小**

```
Must be set in php.ini as of the file would already be uploaded when the script is executed. 
```

看起来 cakephp 正在使用它自己的配置系统。

您可以通过在脚本末尾运行以下代码来验证这一点：

```
var_dump( ini_get( 'memory_limit' ) );
var_dump( ini_get( 'max_execution_time' ) );
var_dump( ini_get( 'max_execution_time' ) );
var_dump( ini_get( 'post_max_size' ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:33:50.080

您在文件**php.ini中更改****post_max_size**的值， 例如：**post_max_size = 500M**

 ****请在这里阅读更多：http: [//jp2.php.net/manual/en/ini.core.php#ini.post-max-size](http://jp2.php.net/manual/en/ini.core.php#ini.post-max-size)****

# c++ - 编译器如何实现继承？

> ID：13621160
> 
> 赞同：0
> 
> 时间：2012-11-29T07:53:29.823
> 
> 标签：c++, inheritance

> **可能重复：**
> [C++：隐藏规则背后的基本原理](https://stackoverflow.com/questions/4837399/c-rationale-behind-hiding-rule)

假设我有一个代码：

```
class  A
{       
    public:
    void f(int s) {}
};

class B:public A
{      
    public:
    void f() {}
};

int main()
{      B ob;
   ob.f(4);
} 
```

然后在这种情况下，编译器会生成一个错误“没有匹配函数调用'B::f(int)'”但是类B已经继承了A作为公共所以B必须具有函数“void f(int s)”。不知道为什么编译器会在这里产生错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T07:55:23.397

那是因为`B`定义了一个不同的`f`，它*隐藏*了`f`继承自`A`。如果您希望两者都可用（很可能），则必须*使用 using-declaration*`B`将其纳入范围：

 *```
class B : public A
{
  void f() {}
  using A::f;
}; 
```

此行为在 [class.member.loopkup] 中指定，尤其是第 4 段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T07:55:47.563

当您在 中声明时`void f()`，`B`这会*隐藏*`void f(int)`继承自`A`。您可以使用以下命令将其重新纳入范围`using`：

```
class B: public A
{      
public:
    void f() {}
    using A::f;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T07:57:49.503

这称为隐藏 - 您可以查看[C++ 常见问题解答条目](http://www.parashift.com/c++-faq/hiding-rule.html)。它描述了问题和解决方案。*

# java - 石英无法释放文件句柄

> ID：13621176
> 
> 赞同：0
> 
> 时间：2012-11-29T07:55:31.993
> 
> 标签：java, multithreading, quartz-scheduler

这是我的代码：

```
public class Test {
 public static void main(String[] args) throws Exception {
  String logPath = "D:\\mywork\\OMS\\Tymon\\testlog\\testlog.log";
  File file = new File(logPath);

  SchedulerFactory schedFact = new StdSchedulerFactory();
  Scheduler sched = schedFact.getScheduler();
  sched.start();
  JobDetail jobDetail = new JobDetail("a", "b", TestJob.class);

  CronTrigger trigger = new CronTrigger("c", "d");
  trigger.setCronExpression("0/23 * * * * ?");
  sched.scheduleJob(jobDetail, trigger);
 }
} 
```

作业运行时，无法重命名和删除文件**“D:\mywork\OMS\Tymon\testlog\testlog.log” 。**

似乎文件句柄总是被持有

如何修复它？请帮忙~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:17:42.737

你打开了文件：

文件文件 = 新文件（日志路径）；

但是你在哪里关闭它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:03:29.360

为什么创建 File file = new File(logPath) 对象。

似乎您从未在逻辑中的其他地方使用过。

# c++ - 无操作函数模板

> ID：13621177
> 
> 赞同：2
> 
> 时间：2012-11-29T07:55:33.677
> 
> 标签：c++, templates

我需要在 C++ 中实现一个无操作，它保留所有类型扩展（const、rvalue ref、lvalue ref）。我可以这样做吗？

```
template<class T>
T && noop (T && t) { return std::forward<T> (t); } 
```

并称它为

```
... noop (value) ... 
```

（即使用类型推断）？即确实`noop (value)`具有与 ? 完全相同的类型`value`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:06:24.343

是的，它确实。但是，这与仅在客户端代码本身中调用 std::forward 没有什么不同（除了 std::forward 没有自动模板参数推导）。

# regex - 正则表达式 - 结合贪婪和懒惰模式

> ID：13621186
> 
> 赞同：1
> 
> 时间：2012-11-29T07:56:24.980
> 
> 标签：regex

例如，对于一个字符串：

```
http://www/host/a/b/c/topic/d/e/f/topic/last.html 
```

我想获得“b”和“c”的值，它们是第一个“主题”之前的字符串值。

如果我使用：`.+/(.+)/(.+)/topic/(.+)`，我会得到“e”和“f”。我知道这是贪婪模式，所以它匹配了第二个“主题”。但是，如果我更改为惰性模式，例如`.+?/(.+?)/(.+?)/topic/(.+)`，它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:01:15.347

我倾向于使用类似的东西：

```
[^/]+/([^/]+)/([^/]+)/topic/(.+) 
```

这个想法不是匹配*任何*字符，而是匹配下一个斜杠。方括号 ,`[]`定义了一个字符类，波浪号`~`, 表示“不”，因此`[^/]`匹配除斜线之外的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:01:20.667

用这个怎么样？

```
^.+?/([^/]+)/([^/]+)/topic 
```

这是一个演示：[http ://rubular.com/r/F97qwqjLRj](http://rubular.com/r/F97qwqjLRj)

# ldap - 什么 LDAP 查询得到 0 个结果？

> ID：13621193
> 
> 赞同：1
> 
> 时间：2012-11-29T07:56:55.870
> 
> 标签：ldap, ldap-query

在 Alfresco 中有一个字段，我可以使用 LDAP 查询指定要同步的组。

我不想同步组，那么我可以输入什么查询来始终返回 0 结果？

我想我可以写一个查询来搜索一个疯狂的条件，但是有没有更可读的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:37:12.080

你可以只使用 X == NOT X 类型的条件吗？

只要条件突出，大家应该都能理解。

# android - 将 Android 应用程序移植到 BlackBerry 10 - 图像大小文档？

> ID：13621194
> 
> 赞同：0
> 
> 时间：2012-11-29T07:57:02.807
> 
> 标签：android, blackberry-10, blackberry-android

我可以通过 BlackBerry 提供的 eclipse 插件成功地将我的 android 应用程序移植到 bb10，并在 BlackBarry 10 模拟器中启动我的应用程序。

这是我的问题。我的应用程序中的图像似乎不正常。它们被缩放和扭曲。我搜索但找不到有关正确图像大小的文档（应用程序图标除外）

有这方面的文件吗？或者你如何使用你的图像？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:41:09.893

您是否在应用程序中提供了 xHDPI 图像？如果不是，这是预期的行为

# model - 贝叶斯模型：找到 mu 的最小值

> ID：13621195
> 
> 赞同：1
> 
> 时间：2012-11-29T07:57:14.727
> 
> 标签：model, bayesian, winbugs

我一直在尝试使用贝叶斯方法解决问题，但我不知道如何编写模型。

我试图找到值 mu 使得 x = mu + Error, Error ~ Gamma(a, b) （或其他分布）。

基本上我希望能够说类似的话：

```
for(i in 1:N) {
  x[i] <- mu + tau[i]
  tau[i] ~ dgamma(0.001, 0.001)
}
mu ~ dunif(0.0, 1000) 
```

但是，这不起作用，因为 x[i] 需要有一个分布，我想不出如何做到这一点（我试过让 x[i] ~ dgamma(0.001, 0.001)，但这没有't a. 将 x 限制为 > mu，并且 b. 不能帮助我估计 mu。

如果您能提供帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:04:05.430

如果我理解正确，我认为您应该导出 BUGS 之外的 x 值的最小值（mu）并将其作为数据的一部分传递，或者直接给出 tau。这是必要的，因为 BUGS 中的 min 函数不适用于整个向量。也许这样的模型（和数据）是合适的：

```
#BUGS model
model{
    #data manipulations
    for(i in 1:N){
        tau[i] <- x[i]-mu
    }

    #model
    for(i  in 1:N){
        y[i] ~ dlnorm(tau[i], y.tol)
        log.y[i] <- log(y[i])
    }

    #prior
    y.tol ~ dunif(0,1000)
}

#data
list(x=c(5,3,8,9,3,6,8,2,4,11), N=10, mu=2) 
```

我的另一个想法是，也许您想将最小值建模为极值建模练习的类型？在这种情况下，您应该检查 OpenBUGS 中的 dgev。

# node.js - 需要调用 child_process.exec 两次才能工作

> ID：13621197
> 
> 赞同：0
> 
> 时间：2012-11-29T07:57:27.000
> 
> 标签：node.js

在 node.js 应用程序中，我有以下代码应该启动一个名为时间戳的程序：

```
var exec = require('child_process').exec, child;

child = exec('./timestamp 207.99.83.228 5000 -p 5500 &', function (error, stdout, stderr) {
    if (error !== null) {
        console.log('exec error: ' + error);
    } else {
        // Code to be executed after the timestamp program has started
        ...
    }
}); 
```

但是，这**不会**启动时间戳程序，除非我通过以下方式调用 exec **：**

```
exec('./timestamp 207.99.83.228 5000 -p 5500 &', null); 
```

如果我省略这一行，则什么都没有，甚至没有错误消息。

因此，为了成功启动程序的一个实例，我必须调用 exec**两次**。这是 node.js 或 ChildProcess 类中的一些错误，还是我在这里遗漏了什么？

# delphi - 我可以假设 Delphi NOW 函数是线程安全的吗？

> ID：13621199
> 
> 赞同：4
> 
> 时间：2012-11-29T07:57:34.473
> 
> 标签：delphi, time, thread-safety

如果我现在从多个线程中调用，我可以假设这没问题还是我需要为此实现锁定？我知道日期时间格式不安全，但是日期时间读取呢？另外，QueryPerformanceCounter 呢？我已经查看但找不到任何关于这些低级函数的线程安全的权威文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:32:57.800

你有访问权限`SysUtils.pas`吗？我有旧的 Delphi4 源代码，其中`Source\Rtl\Sys\SysUtils.pas`有`Now()`. 似乎它使用了 Win API`GetLocalTime()`和它自己的`EncodeDate()`和`EncodeTime()`函数。它们都是线程安全的，所以`Now()`也是线程安全的。

# java - 错误解析日期

> ID：13621200
> 
> 赞同：1
> 
> 时间：2012-11-29T07:57:38.193
> 
> 标签：java, date

```
String dateString="2001/03/09";
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/mm/dd");
Date convertedDate = dateFormat.parse(dateString);
System.out.println("Converted string to date : " + convertedDate); 
```

我得到如下输出：将字符串转换为日期：Tue Jan 09 00:03:00 IST 2001

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T07:58:46.197

使用`MM`而不是`mm`几个月 -`mm`意味着几分钟，而不是几个月。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd"); 
```

请参阅[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html).

# ef-code-first - Entity Framework 5 code first - 数据库在哪里创建

> ID：13621203
> 
> 赞同：5
> 
> 时间：2012-11-29T07:57:57.403
> 
> 标签：ef-code-first, entity-framework-5, dbcontext

我正在关注[本教程](http://msdn.microsoft.com/en-US/data/jj193542)！一切都很好，博客名称从数据库中保存和检索（假设），因为它们显示在控制台中。然而，我没有在本地数据库中找到为它创建的任何数据库，也没有在我的机器上找到 sql express。如何查找在代码优先方法中创建的数据库在哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T21:23:12.873

您可以通过使用来获取连接字符串，`ctx.Database.Connection.ConnectionString`这将告诉您您正在使用什么数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:29:18.250

我在这里遇到了一个非常相似的问题。我的连接字符串设置为 .\SQLEXPRESS 和生成的初始目录名称，但是当我使用 SSMS 连接到 .\SQLEXPRESS 时，什么也没有出现。

在 VS 2010 中使用 IntelliTrace，我能够看到 ADO.NET 命令，并且在 Autos 网格中，它向我显示了 SQL 命令和以下连接字符串：Data Source=(localdb)\v11.0;AttachDbFilename=|DataDirectory |(my_context_name_here).mdf。然后，使用服务器资源管理器，我可以连接到 (localdb) 并查看数据。

出现这个问题是因为我的上下文是从 DbContext 派生的，但它没有使用 base(connectionStringName) 构造函数（就像 MVC4 模板附带的 UsersContext 一样）。改变它，我可以在 .\SQLEXPRESS 中看到数据库。

# python - 如何获得 cv2.CascadeClassifier.detectMultiScale() 的分数？

> ID：13621208
> 
> 赞同：10
> 
> 时间：2012-11-29T07:58:33.437
> 
> 标签：python, opencv, computer-vision

使用**Python**时，

openCV 函数

```
cv.HaarDetectObjects() 
```

返回找到的对象以及检测分数。

如果我改用 opencv2 函数，

```
cv2.CascadeClassifier.detectMultiScale() 
```

我得到检测到的物体，但没有得分。这使得难以获得良好的检测“置信度”度量。

有没有办法以某种方式使用CV2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:19:57.717

根据[文档](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)

```
cv2.CascadeClassifier.detectMultiScale(image, rejectLevels, levelWeights[, scaleFactor[, minNeighbors[, flags[, minSize[, maxSize[, outputRejectLevels]]]]]]) → objects 
```

该列表`rejectLevels`是表示检测结果置信度的分数。

相应的（但未记录的）[C++ API](https://github.com/Itseez/opencv/blob/master/modules/objdetect/include/opencv2/objdetect.hpp#L155)是：

```
CV_WRAP virtual void detectMultiScale( const Mat& image,
                               CV_OUT vector<Rect>& objects,
                               vector<int>& rejectLevels,
                               vector<double>& levelWeights,
                               double scaleFactor=1.1,
                               int minNeighbors=3, int flags=0,
                               Size minSize=Size(),
                               Size maxSize=Size(),
                               bool outputRejectLevels=false ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-26T12:02:29.813

您可以通过以下代码在 %100 到 %99 之间找到权重百分比：

```
cascade_01 = cv2.CascadeClassifier(<type here path of .xml file>)
found_object = cascade_01.detectMultiScale(image_gray, scaleFactor=1.05, minNeighbors=15, minSize=(20, 20))
    score_rejlevels= cascade_01.detectMultiScale3(image_gray, outputRejectLevels=True)
    if len(found_object) != 0:
        if len(score_rejlevels[2]) <2:
            if len(score_rejlevels[2])!=0:
                score=100-1/float(score_rejlevels[2])
                print(score) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T14:19:53.117

我知道这是一个非常古老的问题，但是有一个未回答的评论：可以使用`detectMultiScale3`接受`outputRejectLevels`布尔参数并返回置信度分数的方法。

```
weights='data/haarcascades/haarcascade_frontalface_alt.xml'
face_cascade = cv2.CascadeClassifier()
face_cascade.load(cv2.samples.findFile(weights))
face_cascade.detectMultiScale3(image, outputRejectLevels=True) 
```

# ios - 在下面的行中我得到内存泄漏

> ID：13621209
> 
> 赞同：0
> 
> 时间：2012-11-29T07:58:33.300
> 
> 标签：ios

```
NSDate *today = [[NSDate alloc] init];
    NSCalendar *calender = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *onset = [[NSDateComponents alloc] init];
    [onset setMonth:monthsStart];
    NSDate *fromDate = [gregorian dateByAddingComponents:onset toDate:today options:0];
    [onset setMonth:monthsEnd];
    NSDate *toDate = [gregorian dateByAddingComponents:onset toDate:today options:0]; 
```

它说以下内容：-

1.  方法返回一个具有 +1 保留计数的 Objective-C 对象
2.  对象泄漏：分配和存储到`today`的对象在此执行路径中稍后未引用，并且保留计数为 +1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:03:31.507

泄漏是因为您没有释放`today`. 请使用`[today release]`和释放相同。`calender`和的情况也是如此`onset`。在行之后`NSDate *toDate = [gregorian dateByAddingComponents:onset toDate:today options:0];`，请立即释放所有这些参数。

```
NSDate *today = [[NSDate alloc] init];
NSCalendar *calender = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *onset = [[NSDateComponents alloc] init];
[onset setMonth:monthsStart];
NSDate *fromDate = [gregorian dateByAddingComponents:onset toDate:today options:0];
[onset setMonth:monthsEnd];
NSDate *toDate = [gregorian dateByAddingComponents:onset toDate:today options:0];
//After you are done with the below variables, you can release it
[today release];
[calender release];
[onset release]; //you cannot use these variables after this line. 
```

另**请**阅读此文档，[高级内存管理编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1)

# c# - 更快地处理队列

> ID：13621216
> 
> 赞同：0
> 
> 时间：2012-11-29T07:59:02.740
> 
> 标签：c#, arrays, multithreading, queue

我有一个队列，它接收数据超时。我使用多线程出列并保存到数据库。我创建了一个线程数组来完成这项工作。

```
for (int i = 0; i < thr.Length; i++)
{
    thr[i] = new Thread(new ThreadStart(SaveData));
    thr[i].Start();
} 
```

保存数据

注意：eQ 和 eiQ 是 2 个全局队列。我用while来保持线程活着。

```
public void SaveData()
{

    var imgDAO = new imageDAO ();
    string exception = "";
    try
    {
        while (eQ.Count > 0 && eiQ.Count > 0)
        {
            var newRecord = eQ.Dequeue();
            var newRecordImage = eiQ.Dequeue();                        

            imageDAO.SaveEvent(newEvent, newEventImage);

            var storepath = Properties.Settings.Default.StorePath;
            save.WriteFile(storepath, newEvent, newEventImage);
        }
    }
    catch (Exception e)
    {                
        Global._logger.Info(e.Message + e.Source);
    }
} 
```

它确实创建了多线程，但是当我调试时，只有 1 个线程活着，其余的都死了。我不知道为什么？有人知道吗？Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:17:48.023

您正在使用`WriteFile`该线程函数。

这是否可能，您尝试编写可能被另一个线程（相同的文件名或其他内容）锁定的文件？

还有一件事-通过多个线程将数据保存在磁盘上-我不喜欢它。

我认为您应该创建一些缓冲区而不是许多线程，并每隔几条记录/条目写入一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:22:03.663

正如评论中所提到的，只要队列中有元素，您的线程就会存活，只要两者都被清空，线程就会终止。这可以解释为什么您在调试时只看到一个活动线程。

您的问题的一个潜在答案是使用[System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)类中的 BlockingCollection 而不是队列。它具有执行阻塞出队的能力，这将停止线程，直到有更多元素可用于处理。

另一个问题是*eQ*和*eiQ*之间的良好竞争条件- 考虑使用具有 Tuple 或自定义数据类型的单个队列，以便您可以在单个操作*中将 newRecord*和*newRecordImage出队。*

# algorithm - 非特定方向计算中的动态规划方法

> ID：13621218
> 
> 赞同：1
> 
> 时间：2012-11-29T07:59:09.813
> 
> 标签：algorithm, dynamic-programming

我正在尝试解决[topcoder 上的 Ball Removal 问题](http://community.topcoder.com/stat?c=problem_statement&pm=12157)，将问题声明粘贴到此处，因为需要登录才能访问此链接。

* * *

> 问题陈述
> 
> 你有 N 个球，其中 N 是奇数。球的编号从 0 到 N-1。按此顺序，它们从左到右排列成一排。
> 
> 除了数字之外，每个球上都写有“左”字或“右”字。为简单起见，我们将使用字符“<”代替“left”，使用字符“>”代替“right”。您将获得所有球上的标签作为字符串标签。对于每个 i，label 的字符 i 代表球 i 上的单词。
> 
> 您现在将重复以下过程：
> 
> *   选择一个不在球排两端的球。
> *   如果选择的球有标签'<'，删除选择的球和紧邻它左边的球。否则，删除选定的球以及它右侧的球。
> *   在不重新排列剩余的球的情况下，将它们推在一起以消除上一步中产生的间隙。
> 
> 当该行中只剩下一个球时，该过程结束。那个球叫做幸存者。请注意，球上的数字在此过程中不会改变。
> 
> 找到所有可能的幸存者。您的方法必须返回一个正好包含 N 个字符的字符串。如果球 i 可以是幸存者，则返回值的字符 i 必须是 'o'（小写 oh）。否则，对应的字符必须是'.' （一段时间）。
> 
> 约束
> 
> *   标签将包含 3 到 49 个字符（包括 3 到 49 个字符）。
> *   标签将包含奇数个字符。
> *   标签的每个字符将是“>”或“<”。
> 
> 示例
> "<<>" 返回："..o"
> 
> 最初，你有三个球。由于您无法选择行尾的球，因此您必须选择球 1。由于其标签为“<”，因此您删除了球 0 和 1。因此唯一可能的幸存者是球 2。1) >>>< <" 返回："o...o"
> 
> 如果先选2球或3球，接下来要选1球，幸存者是0号球。如果先选1号球，接下来要选3号球，幸存者是4号球。
> 
> 2) "<<><<" 返回："..o"
> 
> 3) "<><<><>" 返回："o.....o"
> 
> 4) >>><<<>>>>><<<>" 返回："o.....oo..o"

* * *

我正在考虑一种动态编程方法来解决这个问题，我正在考虑使用一个布尔数组来标记哪些字符已被删除，然后找到下一个左边和下一个右边，但这使得该方法效率非常低，我必须写一个递归方法。为了实现动态编程方法，我需要维护一个状态。但是我无法弄清楚我应该保持什么状态，在我看来，状态是当前字符串和当前索引的组合，但是维护状态字符串对我来说似乎不正确。

我面临的另一个问题是，在这种情况下，如果我改变方向，结果也会改变，如果我从左向右移动，我可能也需要从右向左移动。请帮助我找到解决此问题的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:13:20.717

状态可以是布尔值 - `DP[left][right][isLeftBoundary][isRightBoundary]`。

这意味着如果可以完全消除开始于`left`和结束于的子字符串。`right`

`isLeftBoundary``left`如果符号是字符串的最左边，则只是一个布尔标志。

`isRightBoundary``right`如果符号是字符串的最右边，则只是一个布尔标志。

if`DP[0][i - 1][1][0]`和`DP[i + 1][N][0][1]`are `true`，表示该位置的球`i`可以保留。

```
 int canDelete(int l, int r, int st, int en)
    {
        if (l > r) return 1; //we succeeded in removing the whole string

        if (DP[l][r][st][en] != -1)
           return DP[l][r][st][en];

        int ans = 0;

        //i is the last removed ball, which will eliminate the whole string[l, r]
        for (int i = l + st; i <= r - en; i++) 
        {
            if (inp[i] == '<') //it will remove a ball to the left, but which one?
            {
                for (int j = l; j < i; j++) //ball i will remove ball j
                {       
                     if (canDelete(l, j - 1, st, 0) 
                      && canDelete(j + 1, i - 1, 0, 0) 
                      && canDelete(i + 1, r, 0, en))
                         ans = 1;       
                }
            }
            else
            if (inp[i] == '>') //it will remove a ball to the right, but which one?
            {
                for (int j = i + 1; j <= r; j++) //ball i will remove ball j
                {       
                     if (canDelete(l, i - 1, st, 0) 
                      && canDelete(i + 1, j - 1, 0, 0) 
                      && canDelete(j + 1, r, 0, en))
                         ans = 1;       
                }       
            }
        }

        return ans;
    } 
```

# php - PHP：正则表达式只有字母数字和一些特殊字符

> ID：13621223
> 
> 赞同：8
> 
> 时间：2012-11-29T07:59:50.733
> 
> 标签：php, regex

我想使用正则表达式来限制允许的字符。那是：

```
a - z /* a to z */
A - Z /* A to Z */
0 - 9 /* 0 to 9 */
_ - /* underscore & dash */
~ ! @ # $% ^ & * () /* allowed special characters */ 
```

这是我的正则表达式函数：

```
function validChr($str) {
    return preg_match('/^[A-Za-z0-9_~\-!@#\$%\^&*\(\)]+$/',$str);
} 
```

我实际上已经尝试过它并获得了我想要的结果，但我仍然不确定。我的正则表达式是否正确？还是有其他形式的正则表达式？请帮忙，因为我对这个正则表达式还是新手。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T08:14:00.963

它可以正常工作。

您应该只在 * 之前添加 \ 来转义它。

在这里查看：[正则表达式测试](http://rubular.com/r/zpKXm2edcd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-26T06:23:44.363

你可以使用我前一段时间做的这个函数来输入密码。您可以通过修改 if 条件将其用于任何字符串。把每个特殊字符用**\**放在前面。它还检查字符串是否为 8-20 个字符长

```
 function isPasswordValid($password){
            $whiteListed = "\$\@\#\^\|\!\~\=\+\-\_\.";
            $status = false;
            $message = "Password is invalid";
            $containsLetter  = preg_match('/[a-zA-Z]/', $password);
            $containsDigit   = preg_match('/\d/', $password);
            $containsSpecial = preg_match('/['.$whiteListed.']/', $password);
            $containsAnyOther = preg_match('/[^A-Za-z-\d'.$whiteListed.']/', $password);
            if (strlen($password) < 8 ) $message = "Password should be at least 8 characters long";
            else if (strlen($password) > 20 ) $message = "Password should be at maximum 20 characters long";
            else if(!$containsLetter) $message = "Password should contain at least one letter.";
            else if(!$containsDigit) $message = "Password should contain at least one number.";
            else if(!$containsSpecial) $message = "Password should contain at least one of these ".stripslashes( $whiteListed )." ";
            else if($containsAnyOther) $message = "Password should contain only the mentioned characters";
            else {
                $status = true;
                $message = "Password is valid";
            }
            return array(
                "status" => $status,
                "message" => $message
            );
    } 
```

输出

```
$password = "asdasdasd"
print_r(isPasswordValid($password));
// [
//   "status"=>false,
//   "message" => "Password should contain at least one number."
//]

$password = "asdasd1$asd"
print_r(isPasswordValid($password));
// [
//   "status"=>true,
//   "message" => "Password is valid."
//] 
```

# vb.net - 从头开始读取海量文本文件

> ID：13621225
> 
> 赞同：2
> 
> 时间：2012-11-29T07:59:50.820
> 
> 标签：vb.net

我会问你是否可以在我的问题中给我一些替代方案。

基本上我正在阅读一个平均为 800 万行的 .txt 日志文件。大约 600megs 的纯原始 txt 文件。

我目前正在使用 streamreader 对 800 万行进行 2 次传递，对日志文件中的重要部分进行排序和过滤，但要这样做，我的计算机需要大约 50 秒才能完成 1 次完整运行。

我可以优化这一点的一种方法是使第一遍在最后开始读取，因为最重要的数据大约位于最后的 200k 行。不幸的是，我搜索并且流式阅读器无法做到这一点。有什么想法吗？

一些一般限制

*   # 行数不同
*   文件大小不同
*   重要数据的位置有所不同，但大约在最后 200k 行

这是日志文件第一遍的循环代码，只是为了给你一个想法

```
Do Until sr.EndOfStream = True                                                                              'Read whole File
            Dim streambuff As String = sr.ReadLine                                                      'Array to Store CombatLogNames
            Dim CombatLogNames() As String
            Dim searcher As String

    If streambuff.Contains("CombatLogNames flags:0x1") Then                                             'Keyword to Filter CombatLogNames Packets in the .txt

        Dim check As String = streambuff                                                                'Duplicate of the Line being read
        Dim index1 As Char = check.Substring(check.IndexOf("(") + 1)                                    '
        Dim index2 As Char = check.Substring(check.IndexOf("(") + 2)                                    'Used to bypass the first CombatLogNames packet that contain only 1 entry

        If (check.IndexOf("(") <> -1 And index1 <> "" And index2 <> " ") Then                           'Stricter Filters for CombatLogNames

            Dim endCLN As Integer = 0                                                                   'Signifies the end of CombatLogNames Packet
            Dim x As Integer = 0                                                                        'Counter for array

            While (endCLN = 0 And streambuff <> "---- CNETMsg_Tick")                                    'Loops until the end keyword for CombatLogNames is seen

                streambuff = sr.ReadLine                                                                'Reads a new line to flush out "CombatLogNames flags:0x1" which is unneeded
                If ((streambuff.Contains("---- CNETMsg_Tick") = True) Or (streambuff.Contains("ResponseKeys flags:0x0 ") = True)) Then

                    endCLN = 1                                                                          'Value change to determine end of CombatLogName packet

                Else

                    ReDim Preserve CombatLogNames(x)                                                    'Resizes the array while preserving the values
                    searcher = streambuff.Trim.Remove(streambuff.IndexOf("(") - 5).Remove(0, _
                    streambuff.Trim.Remove(streambuff.IndexOf("(")).IndexOf("'"))                       'Additional filtering to get only valuable data
                    CombatLogNames(x) = search(searcher)
                    x += 1                                                                              '+1 to Array counter

                End If
            End While
        Else
            'MsgBox("Something went wrong, Flame the coder of this program!!")                          'Bug Testing code that is disabled
        End If
    Else
    End If

    If (sr.EndOfStream = True) Then

        ReDim GlobalArr(CombatLogNames.Length - 1)                                                      'Resizing the Global array to prime it for copying data
        Array.Copy(CombatLogNames, GlobalArr, CombatLogNames.Length)                                    'Just copying the array to make it global

    End If
Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:14:31.823

您可以将 BaseStream 设置为所需的读取位置，但不能将其设置为特定的 LINE（因为计数行需要读取完整的文件）

```
 Using sw As New StreamWriter("foo.txt", False, System.Text.Encoding.ASCII)
        For i = 1 To 100
            sw.WriteLine("the quick brown fox jumps ovr the lazy dog")
        Next

    End Using
    Using sr As New StreamReader("foo.txt", System.Text.Encoding.ASCII)
        sr.BaseStream.Seek(-100, SeekOrigin.End)
        Dim garbage = sr.ReadLine ' can not use, because very likely not a COMPLETE line
        While Not sr.EndOfStream
            Dim line = sr.ReadLine
            Console.WriteLine(line)
        End While
    End Using 
```

对于以后对同一文件的任何读取尝试，您可以简单地保存（基本流的）最终位置，并在下一次读取时前进到该位置，然后再开始读取行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-14T09:48:29.487

对我有用的是跳过前 4M 行（只是一个简单的 if counter > 4M 围绕循环内的所有内容），然后添加进行过滤的后台工作人员，如果重要的话，将行添加到数组中，而主线程继续读取线。这在一天结束时节省了大约三分之一的时间。

# linux - linux find命令操作

> ID：13621229
> 
> 赞同：1
> 
> 时间：2012-11-29T08:00:20.637
> 
> 标签：linux, find, command

我的 shell 脚本找到所有 90 天前的文件

```
find /var/www/html/zip/data/*/*/*/*/* -type f -mtime +90 
```

返回像这样的输出

```
/var/www/html/zip/data/2011/jan/11/333333/Photos/a.jpeg

/var/www/html/zip/data/2011/jan/11/333333/Photos/b.jpeg

/var/www/html/zip/data/2011/jan/11/333333/Photos/c.jpeg

/var/www/html/zip/data/2011/feb/11/333333/Photos/a.jpeg

/var/www/html/zip/data/2011/feb/11/333333/Photos/b.jpeg 
```

我需要做什么才能使用相同的 Find 命令从上面的输出中获取唯一的文件夹路径，所以输出应该是

```
/var/www/html/zip/data/2011/jan/11/333333/Photos

/var/www/html/zip/data/2011/feb/11/333333/Photos 
```

所以我相信需要在上面的 Find 命令中添加一些东西，但不知道是什么

**注意：**我想将唯一路径保存在变量中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:06:01.737

尝试

```
find /var/www/html/zip/data/*/*/*/*/* -type f -mtime +90 -printf "%h\n" | sort | uniq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:05:38.393

我不确定是否`find`可以直接执行此操作，但您始终可以使用`sed`对结果进行后处理：

```
find /var/www/html/zip/data/*/*/*/*/* -type f -mtime +90  | sed 's|/[^/]*$||' 
```

将结果进一步传递`uniq`应该删除重复项（您可能需要先这样做`sort`，但我对此表示怀疑）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:29:30.617

您可以通过这种方式找到解决方案

```
find /var/www/html/zip/data -type d -mtime +90 | uniq 
```

这背后的想法是，每当更新或修改文件夹内的文件时，文件夹也被标记为已修改。因此，在这种情况下，您将获得过去 90 天内未更新的所有文件夹...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T08:30:56.413

添加到jonathanasdf的答案，

您可以添加一个 for 循环，

```
$i=1;
for uniq_dir in `find /var/www/html/zip/data/*/*/*/*/* -type f -mtime +90 -printf "%h\n" | sort | uniq`;
do
a[$i]=$uniq_dir;
let "i = $i + 1";
done; 
```

# c# - 从同一视图内的不同控制器调用方法

> ID：13621231
> 
> 赞同：0
> 
> 时间：2012-11-29T08:00:44.673
> 
> 标签：c#, ajax, forms

我需要将模型从视图发布到两个不同的操作，而不是在同一个控制器中。

我已经尝试过 ActionLink 但我丢失了数据，因为模型是完整的，例如其中一个属性是

```
public IEnumerable<Lot> Lots { get; set; } 
```

我尝试过的另一个选项是这里解释的例子

[处理 2 个按钮在单个视图/表单中提交操作 - ASP.NET MVC 2 RTM](https://stackoverflow.com/questions/2444245/handling-2-buttons-submit-actions-in-a-single-view-form-asp-net-mvc-2-rtm)

但是我面临在两个不同的控制器中执行操作的问题。

我想我可以用 ajax 帖子来做到这一点，但我已经读过根本不推荐这样做，所以我很想听听我想不到的任何其他选择。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:13:55.910

> 我需要将模型从视图发布到两个不同的操作，而不是在同一个控制器中。

可能我不明白您在寻找什么，但这是一个在两个控制器中发布到操作的视图：

```
@using (Html.BeginForm("Action1", "Controller1"))
{
    ...
    <input type="submit" ... />
}
@using (Html.BeginForm("Action2", "Controller2"))
{
    ...
    <input type="submit" ... />
} 
```

这看起来太简单了，无法满足您的需求，您能详细说明一下吗？

# sql - 删除和插入的 SQL 触发器

> ID：13621233
> 
> 赞同：0
> 
> 时间：2012-11-29T08:00:48.783
> 
> 标签：sql, sql-server, triggers

我有一个看起来像这样的触发器：

```
ALTER TRIGGER [dbo].[trSeasonHotelsSupplierOfferUpdate]
  ON  [dbo].[SeasonHotelsSupplierOffers]
  AFTER UPDATE
AS
BEGIN
  IF ((SELECT COUNT(*) FROM inserted) = 1 AND (SELECT COUNT(*) FROM deleted) = 1)
  BEGIN
       INSERT INTO SeasonHotelsSupplierOffersHistory (SeasonHotelSupplierOfferID, ColumnEN, OldValue, NewValue, UpdateDate, UpdatedByID)
         SELECT 
            i.SeasonHotelSupplierOfferID, 'Name', d.Name, i.Name, i.UpdateDate, i.UpdatedByID 
         FROM 
            inserted i, deleted d       
         WHERE 
            ISNULL(i.Name,'')<>ISNULL(d.Name,'')
    END
END 
```

我也需要对插入的数据和删除的数据进行这项工作。这一切都保存到一个名为 SeasonHotelsSupplierOffersHistory 的表中，该表具有以下列：

SeasonHotelSupplierOfferID、ColumnEN、OldValue、NewValue、UpdateDate、UpdateByID

我知道我必须说更新后，删除，插入`，但仅此而已。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:46:39.873

我不是 100% 确定你在问什么，因为唯一的实际问题似乎是如何让触发器为 INSERT 和 DELETE 工作，但你已经在你的问题中回答了这个问题。我只能假设您正在努力让触发器中的插入操作用于插入和删除。我会想象这样的事情会起作用。

```
CREATE TRIGGER trSeasonHotelsSupplierOfferUpdate 
ON dbo.SeasonHotelsSupplierOffers
AFTER UPDATE, INSERT, DELETE
AS
BEGIN
    INSERT  SeasonHotelsSupplierOffersHistory (SeasonHotelSupplierOfferID, ColumnEN, OldValue, NewValue, UpdateDate, UpdatedByID)
    SELECT  COALESCE(inserted.SeasonHotelSupplierOfferID, deleted.SeasonHotelSupplierOfferID),
            'Name', 
            deleted.Name, 
            inserted.Name, 
            COALESCE(inserted.UpdateDate, deleted.UpdateDate),
            COALESCE(inserted.UpdatedByID, deleted.UpdatedByID)
    FROM    inserted
            FULL JOIN deleted
                ON inserted.SeasonHotelSupplierOfferID = deleted.SeasonHotelSupplierOfferID
    WHERE   COALESCE(inserted.Name, '') != COALESCE(deleted.Name, '')   -- ONLY INSERT WHERE NAME HAS CHANGED
END 
```

您将能够将插入识别为`OldValue`空，并将删除识别为`NewValue`空。

# android - Android探索ORM进行关系映射

> ID：13621234
> 
> 赞同：0
> 
> 时间：2012-11-29T08:00:53.517
> 
> 标签：android

我现在有时在我的 Android 应用程序中使用 SQLLite，并且已经厌倦了使用游标和插入我的 java 代码。我正在探索适用于 Android 的各种 ORM。一个很好的起点就[在这里](http://chicagoandroid.com/forum/topics/simplify-your-db-layer-in)。任何人都可以分享他们在 Android 中使用 ORM 的经验。您会在 Android 应用程序中推荐任何特定的 ORM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:15:34.973

我一直在使用[ORMLite](http://ormlite.com/sqlite_java_android_orm.html)。它是一个很好的 ORM、开源和大量支持。不过还没有真正尝试过其他的，它的使用时间最长，而且非常好。

# jquery - jQuery - 在下拉选择更改我的确认框不起作用

> ID：13621241
> 
> 赞同：-1
> 
> 时间：2012-11-29T08:01:06.097
> 
> 标签：jquery

```
$(document).ready(function () {

    $(".test123").live("change", function () {
        var ddlBrand = "";
        ddlBrand = $('#<%= ddlBrand.ClientID %>').val();

        if (ddlBrand > 0) {
            return confirm('The values entered for this brand will reset. Are you sure you want to change the Brand.');
        });
    }
});
return false;
}); 
```

我对上述代码的问题是在取消确认框时我无法保留页面状态。同样对于第一个下拉选择，我不想要确认框。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:26:43.157

如果我正确理解您的问题，您不想确认 ddlBrand 是否第一次更改，如果确认调用，取消确认将您的 ddlBrand 值恢复为先前选择的值。你可以试试这个。

```
$(document).ready(function () {

    $(".test123").on("change", function (e) {
        e.preventDefault();
        var ddlBrand = $('#<%= ddlBrand.ClientID %>');
        var value = ddlBrand.val();
        var prevValue = ddlBrand.data('prev');

        if ( value > 0 && prevValue && prevValue  != 0) {
            if(confirm('The values entered for this brand will reset. Are you sure you want to change the Brand.')){
                ddlBrand.data('prev', value)
            }else{
                ddlBrand.val(prevValue )
            }
        }else{
            ddlBrand.data('prev', value)
        }
    });
}); 
```

并检查此**[演示](http://jsfiddle.net/V6qyQ/)**

# sql - Go 和 SQL 参数

> ID：13621242
> 
> 赞同：1
> 
> 时间：2012-11-29T08:01:10.930
> 
> 标签：sql, go

我对 SQL 查询的参数有疑问。在这种情况下，我从 ORDER BY 查询中得到了意想不到的结果。我在 OSX 上运行 PostgreSQL[1] 并运行 v1.0.3。

我有一个包含两列的表：*name varchar，gophers int*

插入的行是：("Alice", 2) 和 ("Bob", 1)

如果我像这样运行我的查询：`rows, err := db.Query("SELECT name FROM foo ORDER BY gophers")`我得到了我想要的（“Bob”，“Alice”）

但是如果我像这样运行它，`rows, err = db.Query("SELECT name FROM foo ORDER BY $1", "gophers")`我会通过插入顺序（“Alice”，“Bob”）得到它们

为什么？

完整代码： http: [//paste2.org/p/2537881](http://paste2.org/p/2537881)

[1] [https://github.com/bmizerany/pq](https://github.com/bmizerany/pq)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:48:44.020

我根本不知道这是一个问题。在 psql 我做了

```
PREPARE  test (text) AS SELECT name FROM foo  ORDER BY $1;
EXECUTE test('a'); 
```

我得到了

```
 name  
 -------
 alice
 bob
 (2 rows) 
```

我想知道您是否可以按 1 美元订购。我用谷歌搜索了一下，但找不到任何有用的东西。我知道这不是答案，但在我看来这可能是问题所在。如果 ORDER BY 支持参数，我希望我能找到一些东西。

# ios - 如何为 NSString 中的子字符串获取 NSRange(s)？

> ID：13621245
> 
> 赞同：4
> 
> 时间：2012-11-29T08:01:17.387
> 
> 标签：ios, nsstring, uitextview, nsattributedstring, nsrange

```
NSString *str = @" My name is Mike, I live in California and I work in Texas. Weather in California is nice but in Texas is too hot..."; 
```

我如何遍历这个 NSString 并为每次出现的“California”获取 NSRange，我想要 NSRange 因为我想在 NSAttributed 字符串中更改它的颜色。

```
 NSRange range = NSMakeRange(0,  _stringLength);
 while(range.location != NSNotFound)
 {
    range = [[attString string] rangeOfString: @"California" options:0 range:range];

    if(range.location != NSNotFound)
    {

        range = NSMakeRange(range.location + range.length,  _stringLength - (range.location + range.length));

        [attString addAttribute:NSForegroundColorAttributeName value:_green range:range];
    }
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-29T08:33:00.453

提到了很多解决这个问题的方法`NSScanner`；`rangeOfString:options:range`等等。为了完整起见，我会提到`NSRegularExpression`. 这也有效：

```
 NSMutableAttributedString *mutableString = nil;
    NSString *sampleText = @"I live in California, blah blah blah California.";
    mutableString = [[NSMutableAttributedString alloc] initWithString:sampleText];

    NSString *pattern = @"(California)";
    NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:nil];

    //  enumerate matches
    NSRange range = NSMakeRange(0,[sampleText length]);
    [expression enumerateMatchesInString:sampleText options:0 range:range usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
        NSRange californiaRange = [result rangeAtIndex:0];
        [mutableString addAttribute:NSForegroundColorAttributeName value:[NSColor greenColor] range:californiaRange];
    }]; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-29T08:03:41.130

和

```
[str rangeOfString:@"California"] 
```

和

```
[str rangeOfString:@"California" options:YOUR_OPTIONS range:rangeToSearch] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:08:20.660

您可以使用 rangeOfString:options:range: 或 NSScanner （还有其他可能性，例如正则表达式，但无论如何）。使用第一种方法更新范围更容易，即搜索第一次出现，然后根据结果更新搜索范围。当搜索范围为空时，您已找到所有内容；

# youtube - Youtube 授予权限消息显示两次

> ID：13621246
> 
> 赞同：1
> 
> 时间：2012-11-29T08:01:19.977
> 
> 标签：youtube

在授权注册的应用程序时`youtube`，对于服务器端流程，我在授权页面上显示了两条相同的授予权限消息。

应用程序中使用的范围是：`("http://gdata.youtube.com,http://uploads.gdata.youtube.com")`

是否可以获得上述两个范围的单个授予权限消息？

# android - SharedPreferences 文本视图

> ID：13621249
> 
> 赞同：0
> 
> 时间：2012-11-29T08:01:31.460
> 
> 标签：android

我有按钮，单击按钮后它将列出到 ListView，选择 ListView 项目，该项目将显示在按钮的左侧，我希望在我重新启动程序后显示选择的 listItem。如果有人知道这个，请帮助我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:38:56.907

有两种可能的简单方法：

1.  SharedPreference（最简单）
2.  SQLite（也许对你的目的没用）

如果您必须只保存从微调器中选择的文本，那么 SharedPreference 可能是解决方案。这是如何使用它：

从您的 PREFERENCES_LIST 读取值

```
// set name of your preferences list
private static String MY_PREFERENCES = "my_preferences_list";

// set key for retrieving text you saved
private static String TEXT_DATA_KEY = "last_text_spinner_choise";

// create a pointer to your preferences list specifying name and access typology
SharedPreferences prefs = getSharedPreferences(MY_PREFERENCES, Context.MODE_PRIVATE);

// get String from preferences list specifying KEY of Text you want retrieve and a default string if key doesn't exist
String textData = prefs.getString(TEXT_DATA_KEY, "No Preferences!");

// your textView or something else
TextView outputView = (TextView) findViewById(R.id.outputData); 

// set textView with value taken from your preference list
outputView.setText(textData); 
```

在您的 PREFERENCES_LIST 中写入值

```
// Same as before
SharedPreferences prefs = getSharedPreferences(MY_PREFERENCES, Context.MODE_PRIVATE);
// Editor pointer for changing value in your preference list
SharedPreferences.Editor editor = prefs.edit();

// your editText or spinner from which you want take text value
EditText outputView = (EditText) findViewById(R.id.inputData);
CharSequence textData = outputView.getText();

if (textData != null) {

   // Here you save textData in your preferences_list. You have to specify key and value. Key is important for retrieving text as seen before
   editor.putString(TEXT_DATA_KEY, textData.toString());
   // Confirm your choice by commit()
   editor.commit();
} 
```

希望能帮助到你

# extjs4 - Extjs4 更改条形图中的每个条形颜色

> ID：13621259
> 
> 赞同：0
> 
> 时间：2012-11-29T08:02:28.280
> 
> 标签：extjs4

我有一个条形图，我希望每个条形图以不同的颜色呈现。所以我尝试使用它们，示例代码是：

```
 Ext.define('Ext.chart.theme.FancyTheme',{
extend : 'Ext.chart.theme.Base',

constructor : function(config){
    this.callParent([Ext.apply({
        colors : ['#9CC5C9','#D5544F','#D5544F','#5288DB']
    },config)])
}
}); 
```

我的图表代码是：

```
 var tc = Ext.create('Ext.chart.Chart',{
        renderTo: Ext.getBody(),
        width: 500,
        height: 300,
        animate : true,
        insetPadding : 20,
        theme: 'FancyTheme', 
```

但是所有的条形颜色都变成了相同的颜色，即上面例子中的'#9cc5c9'。但我希望条形图以主题中提到的不同颜色呈现。我不想使用渲染功能来渲染颜色的另一件事。

所以 wat 是获得不同颜色的解决方案。谁能帮我吗！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:06:25.587

抱歉，使用渲染器是正确的解决方案。该`colors`属性用于图表中的连续系列，例如同一绘图空间中的多个区域。

我不明白您为什么不想使用渲染器，但您需要做的就是：

```
renderer: function(sprite, record, attr, index, store) {
    var colors = ['#9CC5C9','#D5544F','#D5544F','#5288DB'];

    return Ext.apply(attr, {
        fill: colors[index % colors.length]
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:02:10.073

您还可以扩展`Ext.chart.series.Bar`. 例如：

```
Ext.define('Ext.chart.series.MyBar', {
    extend: 'Ext.chart.series.Bar',
    //type: 'mybar',
    alias: 'series.mybar',

    getPaths: function() {
        this.callParent(arguments);

        var items = this.items, 
            i, iLen = items.length,
            colors = this.colorArrayStyle,
            colorsLength = colors && colors.length || 0;
        for (var i = 0; i < iLen; ++i) {
            items[i].attr.fill = colors[i % colorsLength];
        }
    }
}); 
```

然后在系列中你应该使用`mybar`而不是`bar`.

# c# - DataGridView 中的自动滚动

> ID：13621260
> 
> 赞同：5
> 
> 时间：2012-11-29T08:02:30.740
> 
> 标签：c#, winforms, datagridview

当我向表单上最后一个可见行下方的单元格添加值时，可以执行自动滚动吗？我在 DataGridView 中找不到任何自动滚动属性。唯一可能的方法是找到最后一个可见单元格的索引并更改 FirstDisplayedScrollingRowIndex？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T08:23:22.397

您可以使用该`FirstDisplayedCell`属性来显示该单元格。
由于您知道将值添加到哪个单元格，因此您可以这样做：

```
dataGridView1.FirstDisplayedCell = yourCell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:26:21.690

这个可以试试

```
gv.FirstDisplayedCell = gv.Rows[gv.Rows.Count - 1].Cells[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T10:38:04.470

这 3 行真的相当于自动向下滚动

```
System.Int16 i_NotDisplayableRowCount = dataGridView1.RowCount - dataGridView1.DisplayedRowCount(false); // false means partial rows are not taken into acount
if (i_NotDisplayableRowCount > 0)
    dataGridView1.FirstDisplayedScrollingRowIndex = i_NotDisplayableRowCount; 
```

# java - 将 Jlist 添加到 JScrollPane

> ID：13621261
> 
> 赞同：2
> 
> 时间：2012-11-29T08:02:48.837
> 
> 标签：java, swing, jscrollpane, jlist

我有一个 JList 需要放置在滚动窗格中，因为我从数据库中获取 JList 并且值可以大大增加。我需要能够向下滚动它们，所以我写道：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;

import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ListSelectionModel;
public class Checkboxlistener extends JFrame {

private JPanel jpAcc = new JPanel();
private JList checkBoxesJList;

Checkboxlistener() {
   // super("Deposit base", false, true, false, true);
    setSize(1300, 600);
    jpAcc.setLayout(null);
    jpAcc.setBackground(Color.LIGHT_GRAY);
    String labels[] = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J"};
    checkBoxesJList = new JList(labels);

    checkBoxesJList.setBounds(10, 30, 80, 600);
    checkBoxesJList.setBackground(Color.LIGHT_GRAY);
    checkBoxesJList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    JScrollPane scrollPane = new JScrollPane(checkBoxesJList);

    jpAcc.add(checkBoxesJList);
    jpAcc.add(scrollPane);

    getContentPane().add(jpAcc);
    setVisible(true);
}

public static void main(String args[]) {
   Checkboxlistener cbl = new Checkboxlistener();
}
} 
```

我做错了什么，因为我没有看到任何 ScrollPane？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T08:07:12.767

该列表已包含在滚动窗格中，因此您不得将列表添加到主面板。只有滚动窗格。

您做错的另一件事是没有使用[布局管理器](http://download.oracle.com/javase/tutorial/uiswing/layout/using.html)，并设置组件的边界和大小。不要那样做。让布局管理器为您定位和调整组件大小。

最后，您不应该在主线程中使用 Swing 组件。仅在[事件派发线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)中。

这是您的代码的修改版本，可以正常工作。我删除了背景颜色，因为这应该由 L&F 处理：

```
public class Checkboxlistener extends JFrame {

    private JPanel jpAcc = new JPanel();
    private JList<String> checkBoxesJList;

    Checkboxlistener() {
        jpAcc.setLayout(new BorderLayout());
        String labels[] = { "A", "B", "C", "D", "E", "F", "G", "H", "I", "J" };
        checkBoxesJList = new JList<String>(labels);

        checkBoxesJList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        JScrollPane scrollPane = new JScrollPane(checkBoxesJList);

        jpAcc.add(scrollPane);

        getContentPane().add(jpAcc);
        pack();
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Checkboxlistener cbl = new Checkboxlistener();
                cbl.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-02T10:42:30.863

如前所述，列表已添加到`JScrollPane`，因此无需再次添加。此外，为了滚动工作，它需要定义 list 方法`setVisibleRowCount(int)`。我已经在`CheckBoxListener`方法中修改了上面的代码以使其工作。

```
Checkboxlistener() 
{   
    setSize(1300, 600);

    String labels[] = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J"};
    checkBoxesJList = new JList(labels);
    checkBoxesJList.setBounds(10, 30, 80, 600);
    checkBoxesJList.setBackground(Color.LIGHT_GRAY);
    checkBoxesJList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

    checkBoxesJList.setVisibleRowCount(5);

    JScrollPane scrollPane = new JScrollPane(checkBoxesJList);  

    jpAcc.add(scrollPane);

    add(jpAcc);

    setVisible(true);

} 
```

# c++ - 使用 ifstream 打开文件后的 Cin.get()

> ID：13621271
> 
> 赞同：0
> 
> 时间：2012-11-29T08:03:33.737
> 
> 标签：c++

我之前发布了类似的代码，但我认为现在这是一个不同的问题。我只是无法弄清楚为什么我的运行代码不会超过“infile open”。（“-e”打印出来，“-d”不打印）我正在尝试打开我的文件，使用命令行选项来确定我是否会打印出一定倍数的字符。

例如，*a.out -d 2 < sample.txt*将每隔一个字母打印一次。

```
int main (int argc, char *argv[])
{
   ifstream infile; 

   if (infile.good())
      printf("infile open \n");

   int c;    
   int number = 0;
   int count = 0; 

   string str1 = argv[1];
   string str2 = "-d";
   string str3 = "-e";

   if (str1.compare(str2) == 0)
   { 
      printf("entered -d\n");
      c = infile.get();       

         while(!infile.eof()) {

             number = atoi(argv[2]);  

              if (count == number)
            {
              cout.put(c);
                      count = 0;
                }
                  else
                      count++;

             c = infile.get();         

}//end while 

}//end if

           if (str1.compare(str3) == 0)       
                printf("entered -e\n");

}//end main 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T08:08:09.630

`infile`从未打开：

```
ifstream infile; // Does not open a file as no file name is supplied. 
```

使用或作为另一个命令行参数`cin`传递并打开它：`"sample.txt"`

```
ifstream inFile(argv[3]);
if (inFile.is_open())
{
} 
```

其他要点：

*   使用`std::cout`而不是混合`printf()`和`std::cout`。
*   `atoi()``0`如果参数无效或参数有效则返回`0`。请参阅[`strtol()`](http://en.cppreference.com/w/cpp/string/byte/strtol)替代方案。
*   没有理由`argv[2]`在`while`. 只需在`while`.
*   `argc`在访问 的元素之前始终检查`argv`，以避免无效的内存访问。
*   `std::string`可以使用 比较实例[`operator==`](http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:14:41.157

在命令行上运行这样的东西时：“a.out < sample.txt”，没有指定要打开的实际文件名，Unix 中的“<”命令只会将 sample.txt 的内容传递给 a.out通过标准输入...因此，就像 hmjd 指出的那样，您应该使用 cin。如果文件是作为参数提供的，您可能希望以物理方式打开文件，即“a.out sample.txt”而不是“a.out < sample.txt”。

# html - CSS如何多重背景+渐变？

> ID：13621276
> 
> 赞同：0
> 
> 时间：2012-11-29T08:04:03.400
> 
> 标签：html, css

我从 css graident generator 得到这段代码，它在渐变的底部是透明的

```
background: -moz-linear-gradient(top,  rgba(248,246,247,1) 0%, rgba(248,246,247,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(248,246,247,1)), color-stop(100%,rgba(248,246,247,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(248,246,247,1) 0%,rgba(248,246,247,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(248,246,247,1) 0%,rgba(248,246,247,0) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(248,246,247,1) 0%,rgba(248,246,247,0) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(248,246,247,1) 0%,rgba(248,246,247,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f8f6f7', endColorstr='#00f8f6f7',GradientType=0 ); /* IE6-9 */ 
```

现在我想在渐变背景上添加一个背景

```
background: url('../images/letter_head.png') left top repeat-x, #f8f6f6; 
```

我如何将它们结合起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:05:38.680

CSS

```
.bg{
    width:800px; height:750px;
    background: #38BAC9 url(http://www.google.com/logos/2012/india12-hp.jpg) 10% no-repeat;
    background:url(http://www.google.com/logos/2012/india12-hp.jpg) center no-repeat, -webkit-gradient(linear, 0% 0%, 0% 100%, from(#57BEED), to(#38BAC9));
    background:url(http://www.google.com/logos/2012/india12-hp.jpg) center no-repeat, -moz-linear-gradient(top, #57BEED 0%, #38BAC9 100%);    
}​ 
```

**[演示](http://jsfiddle.net/6kgcE/8/)**

检查此链接以获取更多信息

[http://userinterfacehome.blogspot.in/2012/09/css-multiple-background.html](http://userinterfacehome.blogspot.in/2012/09/css-multiple-background.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:06:08.027

只需将图像的网址添加到您的每个规则中即可。

```
background: url(someurl), -moz-linear-gradient(top,  rgba(248,246,247,1) 0%, rgba(248,246,247,0) 100%); /* FF3.6+ */ 
```

或者，如果您不想添加`url(etc)`每个规则，您可以只指定一个`background-image`规则：

```
background: -moz-linear-gradient(top,  rgba(248,246,247,1) 0%, rgba(248,246,247,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(248,246,247,1)), color-stop(100%,rgba(248,246,247,0))); /* Chrome,Safari4+ */
...
background-image:url("someurl"); 
```

# android - Detect Incoming Call Before Default Phone App

> ID：13621277
> 
> 赞同：2
> 
> 时间：2012-11-29T08:04:11.380
> 
> 标签：android, phone-call

Is it possible to detect incoming call before default phone application, and prevent to active default phone application in Android?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:38:19.993

看起来它可能不完全可能根据这个 ->[创建一个自定义呼叫处理 Application](https://stackoverflow.com/questions/4257242/create-a-custom-call-handling-application)。

无论如何，您可能需要更多的研究来检查它是否可以。电话广播接收器上的多个帖子可以作为参考。

# ios - Send automated touch event coordinates to a UIView

> ID：13621279
> 
> 赞同：2
> 
> 时间：2012-11-29T08:04:40.490
> 
> 标签：ios, opengl-es, uiview, uitouch, uievent

Is there a way to fake touch events by faking a tap on the screen at a certain coordinate? The problem im trying to solve is rendering a webpage to a opengl texture on a quad. Touches inside the quad need to be mapped to the view the webpage is rendered on. So if I could give the view the webpage a coordinate that the user touched, and the view can react to that touch as if it was a normal touch, that would be great.

so far ive found this, but the author claims your app will get rejected for using the undisclosed api calls [http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html](http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:48:06.593

其实你可以做到的，有一个类用于管理设备中的所有事件（但它只是为了测试原因而创建的），确实会被拒绝或像camera+一样拉出，你应该尝试不同的方法如果您仍然想尝试它，我认为最好创建自己的 UIEvent 子类并使用 [[UIApplication sharedApplication] sendEvent:yourEvent] 如果事件中的触摸包含在视图边界中，它将通过命中测试并且就像触摸是用户生成的一样，将事件发送到视图。

# erlang - hipe compile option meaning and where is the native file

> ID：13621285
> 
> 赞同：1
> 
> 时间：2012-11-29T08:04:57.503
> 
> 标签：erlang, hipe

When reading rabbitmq's rabbit.erl，it contain hipe compilation related code.

```
hipe_compile() ->
    Count = length(?HIPE_WORTHY),
    io:format("HiPE compiling:  |~s|~n                 |",
              [string:copies("-", Count)]),
    T1 = erlang:now(),
    PidMRefs = [spawn_monitor(fun () -> [begin
                                             {ok, M} = hipe:c(M, [o3]),
                                             io:format("#")
                                         end || M <- Ms]
                              end) ||
                   Ms <- split(?HIPE_WORTHY, ?HIPE_PROCESSES)],
    [receive
         {'DOWN', MRef, process, _, normal} -> ok;
         {'DOWN', MRef, process, _, Reason} -> exit(Reason)
     end || {_Pid, MRef} <- PidMRefs],
    T2 = erlang:now(),
    io:format("|~n~nCompiled ~B modules in ~Bs~n",
              [Count, timer:now_diff(T2, T1) div 1000000]). 
```

But there is no explanation about hipe in the erlang's reference doc. What's the meaning of `'o3'`?

```
(emacs@chen-yumatoMacBook-Pro.local)51> hipe:c(xx_reader,[o3]).
{ok,xx_reader} 
```

After I use hipe:c as above, No new compiled file can be found the in the pwd() directory? Where it is?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T09:08:41.687

`o3`表示编译器使用的优化级别。还有等级`o0`, `o1`, `o2`. 各级别详情如下：

```
 o1 = [inline_fp,pmatch,peephole],
   o2 = [icode_range,icode_ssa_const_prop,icode_ssa_copy_prop,icode_type,
         icode_inline_bifs,rtl_lcm,rtl_ssa,rtl_ssa_const_prop,spillmin_color,
         use_indexing,remove_comments,concurrent_comp,binary_opt] ++ o1,
   o3 = [{regalloc,coalescing},icode_range] ++ o2. 
```

您可以使用`hipe:help_option(Option)`进一步调查不同选项的含义。例如，

```
3> hipe:help_option(regalloc).
regalloc - Select register allocation algorithm. Used as {regalloc, METHOD}.
  Currently available methods:
    naive - spills everything (for debugging and testing)
    linear_scan - fast; not so good if few registers available
    graph_color - slow, but gives OK performance
    coalescing - slower, tries hard to use registers
    optimistic - another variant of a coalescing allocator
ok
4> hipe:help_option(icode_range).
icode_range - Performs integer range analysis on the Icode level
ok 
```

* * *

我认为 HiPE 是 JIT 编译，就像 Java 中使用的那样。本机部分仅在运行时可用，因此文件系统中不应有明确的表示。

另外，`hipe:c`确实需要一个`.beam`文件。例如，如果你`test.erl`用一些东西创建了一个，并且没有将它编译到`.beam`文件中，`hipe:c`直接调用会导致错误：

```
1> hipe:c(test, [o3]).
<HiPE (v 3.9.3)> EXITED with reason {cant_find_beam_file,test} @hipe:419

=ERROR REPORT==== 29-Nov-2012::17:03:02 ===
<HiPE (v 3.9.3)> Error: [hipe:418]: Cannot find test.beam file.** exception error: {hipe,419,{cant_find_beam_file,test}}
     in function  hipe:beam_file/1 (hipe.erl, line 419)
     in call from hipe:c/2 (hipe.erl, line 313)
2> c(test).
{ok,test}
3> hipe:c(test, [o3]).
{ok,test} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:17:52.980

erlang的文档中有一些。见[这里](http://www.erlang.org/doc/man/HiPE_app.html)。但是文档确实不多。HiPE的[索引页面最近才更新。](http://www.erlang.org/doc/apps/hipe/index.html)

此外，您可以在 erlang shell 中查看一些帮助。

```
> hipe:help().
> hipe:help_options().
> hipe:help_option(Option). 
```

# xquery - How add more chapter in chapter metadata xml

> ID：13621286
> 
> 赞同：0
> 
> 时间：2012-11-29T08:04:58.277
> 
> 标签：xquery, marklogic

A `chapter-metadata.xml` store in each book isbn folder(there are 100 isbn folder so there is 100 `chapter-metadata.xml`) which store in marklogic database server and chapter-metadata. Xml either contain data of one chapter or empty. If `chapter-metadata.xml` contain only one chapter information then I want to add more chapter information(my chapter infomation is common for all chapter) under chapter element with attribute and value of that chapter up to how many chapter store in book isbn folder(that I can fetch and store in a variable `$chapter_sequence` like ch001 ch002 ch003 ch004..) or if `chapter-metadata.xml` does not have any chaper information then it will create chapter element with attribute and value of chapter number and add my information, below I have put some xml structure if there is one chapter information and my information is from element keywordset

```
<?xml version="1.0" encoding="UTF-8" ?> 
<chaptermetadata>
<bookisbn>isbn number</bookisbn>
<booktitle>Copyright</booktitle>
<chapter id="ch001"">
<keywordset>
<keyword role="primary">context</keyword> 
<keyword role="secondary">Copyright</keyword> 
<keyword role="tertiary">subject</keyword>
</keywordset> 
</chapter>
</chaptermetadata> 
```

I want like below:

```
<?xml version="1.0" encoding="UTF-8" ?> 
<chaptermetadata>
<bookisbn>isbn number</bookisbn>
<booktitle>Copyright</booktitle>
<chapter id="ch001"">
<keywordset>
<keyword role="primary">context</keyword> 
<keyword role="secondary">Copyright</keyword> 
<keyword role="tertiary">subject</keyword>
</keywordset> 
</chapter>

<chapter id="ch002"">
<keywordset>
<keyword role="primary">context</keyword> 
<keyword role="secondary">Copyright</keyword> 
<keyword role="tertiary">subject</keyword>
</keywordset> 
</chapter>
so on to last chapter which I store in veriable
</chaptermetadata> 
```

thanks,

raj

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:17:22.000

这个问题很难理解，但从[http://docs.marklogic.com/xdmp:directory](http://docs.marklogic.com/xdmp:directory)和一个 FLWOR 表达式开始。假设您将其放入一个函数中。我将手动介绍一些您还必须实现的辅助函数，但该函数可能看起来像这样：

```
declare function chaptermetadata($isbn as xs:string)
as element(chaptermetadata) {
  <chaptermetadata>
  {
    <bookisbn>{ $isbn }</bookisbn>
    <booktitle>{ title($isbn) }</booktitle>
    for $chapter in xdmp:directory(isbn-uri($isbn), 'infinity')
    return element { fn:node-name($chapter) } {
      $chapter/@*,
      $chapter/keywordset }
  }
  <chaptermetadata>
}; 
```

现在，除非您了解它所做的一切，否则此代码将无济于事，因此您可以对其进行修改以满足您的需求。这是其中一个 XQuery 用例的变体，因此您可能会发现有助于完成和理解这些用例：http: [//www.w3.org/TR/xquery-use-cases/](http://www.w3.org/TR/xquery-use-cases/)

# ms-word - Word generated XML - Picture 100% width

> ID：13621290
> 
> 赞同：1
> 
> 时间：2012-11-29T08:05:25.103
> 
> 标签：ms-word

Currently I'm transforming an XML into another XML with XSLT. I'm using the following to transform the pictures:

```
<w:p wsp:rsidR="005963F5" wsp:rsidRDefault="005963F5" wsp:rsidP="00503709">
  <w:pict>
    <v:shapetype id="_x0000_t75" >
      <v:stroke joinstyle="miter"/>
      <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
      <o:lock v:ext="edit" aspectratio="t"/>
    </v:shapetype>
    <w:binData w:name="wordml://00000003.png" xml:space="preserve"><xsl:value-of select="mtext/text()"/></w:binData>
    <v:shape id="Picture1" type="#_x0000_t75" style="width:100%; height:auto">
      <v:imagedata src="wordml://00000003.png" o:title="Network"/>
    </v:shape>
  </w:pict>
</w:p> 
```

The problem is that the `style="width:100%; height:auto"` doesn't work the way I expect: the pictures are still small like 20x20 in size (or something), but their native size is much larger.

If I use the following, the pictures are as large as their original size, but when opening the XML in Word, the pictures are too large, since they cross the page sheet width boundary:

```
style="width:0px; height:0px" 
```

What can I use to make the pictures as large as the width of the Word document. I've also tried this, but only the width is being accounted for, but the height is ignored

```
style="width:600px; height:auto" 
```

Any thoughts?

# windows-8 - 如何根据 Platform::String^ 的空间执行字符串拆分

> ID：13621292
> 
> 赞同：1
> 
> 时间：2012-11-29T08:05:28.113
> 
> 标签：windows-8, microsoft-metro, windows-runtime, c++-cx

在 C++/CX Windows App Store 中，我们如何执行基于空间的字符串拆分，对于`Platform::String^`？我只是找不到拆分功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:36:33.707

可能没有拆分方法，因为微软已经（目前）表示他们不打算添加一个。在[Platform::String](http://msdn.microsoft.com/en-us/library/windows/apps/hh699879.aspx)类的文档中，他们声明：

> Windows 运行时中的文本在 C++/CX 中由 Platform::String 类表示。当您将字符串来回传递给 Windows 运行时类中的方法时，或者当您跨应用程序二进制接口 (ABI) 边界与其他 Windows 运行时组件交互时，请使用 Platform::String 类。Platform::String 类为几种常见的字符串操作提供了方法，但它并没有被设计成一个功能齐全的字符串类。在您的 C++ 模块中，使用标准 C++ 字符串类型（例如 wstring）进行任何重要的文本处理，然后将最终结果转换为 Platform::String^，然后再将其传递到公共接口或从公共接口传出。在 wstring 或 wchar_t* 和 Platform::String 之间进行转换既简单又高效。（来源：[http://msdn.microsoft.com/en-us/library/windows/apps/hh699879.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh699879.aspx)）

鉴于您最好的选择是使用 std 中的字符串并使用拆分的许多不同实现之一。[这里](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)有一些很棒的建议。

我希望这有帮助。

# jquery - Inertial desktop browser scrolling

> ID：13621299
> 
> 赞同：2
> 
> 时间：2012-11-29T08:05:46.900
> 
> 标签：jquery, scrollbar, parallax

How do I get an easing effect with my browser's scroll? I have a parallax website set up and am trying to achieve something like the following:

[Example](https://victoriabeckham.landrover.com/INT)

```
So I go:

$('window').scroll(function() {

}); 
```

# php - Yii 中的 Bulid Ajax

> ID：13621300
> 
> 赞同：0
> 
> 时间：2012-11-29T08:05:55.140
> 
> 标签：php, yii

我需要了解如何在 Yii 中构建 Ajax 请求。我在 Yii 网站上搜索，发现以下文章：

[http://www.yiiframework.com/wiki/24/](http://www.yiiframework.com/wiki/24/)

我编写了代码并在本地主机上对其进行了测试？但由于某种原因它不起作用。

对于第一次尝试，我只想做一些简单的事情。我想使用 Ajax 在我的页面上打印另一个操作的结果。我想要显示的文本是“嗨”。

这是该操作的 mu 代码的样子：

查看/索引

```
<?php
/* @var $this CurrentController */

$this->breadcrumbs=array(
        'Current'=>array('/current'),
        'index',
);
?>
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
        'id'=>'users-index-form',
        'enableAjaxValidation'=>true,
)); ?>
<?php
echo CHtml::dropDownList('country_id','', array(1=>'USA',2=>'France',3=>'Japan'),
array(
'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('currentController/dynamiccities'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#city_id', //selector to update
//'data'=>'js:javascript statement' 
//leave out the data key to pass all form values through
))); 

//empty since it will be filled by the other dropdown
echo CHtml::dropDownList('city_id','', array());

?>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

控制器

```
<?php

class CurrentController extends Controller
{

public function accessRules()
    {
        return array(
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('create','update','dynamiccities'),
                'users'=>array('@'),
            ),
        );
    }
public $country_id;
    public function actionIndex()
    {
        $this->render('index');
    }

public function actionDynamiccities() /// Called Ajax
{

        echo CHtml::tag('option',
                   array('value'=>'2'),CHtml::encode('Text'),true);

}  

} 
```

不幸的是，我没有得到想要的结果。我得到的是：

1.  下拉列表包含国家/地区数组。
2.  另一个下拉列表但为空？！

我应该如何修复我的示例代码以使其正常工作？谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:23:13.947

```
echo CHtml::dropDownList('city_id','', array()); 
```

使用 id 作为

```
echo CHtml::dropDownList('city_id','', array('id'=>'city_id')); 
```

# c# - ASP.NET MVP 模式

> ID：13621302
> 
> 赞同：3
> 
> 时间：2012-11-29T08:06:03.750
> 
> 标签：c#, asp.net, design-patterns, mvp

我正在尝试在我的应用程序中实现 Model-View-Presenter 设计模式。MVP 模式的一般概念对我来说是众所周知的，但我更难以使用嵌套的用户控件来完成它。

我有一些可能的方案我可以实现，但在这样做之前，我想听听你的意见。

我认为发布我的任何代码都没有关系，因为它更像是我试图理解的“概念”。

所以场景是：

1 个页面用于连接 2 个用户控件。这些用户控件之一包含一个子用户控件。在这种情况下，我如何使用 MVP 模式？

```
1 Page
  1 UC
  1 UC
     1 SubUC 
```

编辑：

所以基本上我想知道的是我们如何在两个用户控件中使用 MVP 在两个视图（父视图和子视图）之间进行交互。

我将在没有 MVP 的 ASP.net 中向您展示一个示例：http: [//pastie.org/5452134](http://pastie.org/5452134)

现在有了 MVP，我们是否仍然使用 CodeBehind 注册这种事件？知道这个父用户控件和子用户控件都将使用 MVP 模式。或者演示者是否包含在此交互中？

最终我可以将代码更改为： http: [//pastie.org/5452180](http://pastie.org/5452180)

但我想知道这是否可行，考虑到 MVP 模式......

还是我们更需要这样的方法：http: [//pastie.org/5452174](http://pastie.org/5452174)

上面所有的例子都写在父视图的CodeBehind中。这是正确的吗？如果没有，我们如何使用更好的方法来实现这一点

编辑 2：我在示例方法中添加了一个解决方案：[https](https://github.com/frederikprijck/ASP.NET-MVP) ://github.com/frederikprijck/ASP.NET-MVP 我认为这应该是我想要的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T09:13:47.103

我没有看到问题 - 用户控件只不过是一个视图。演示者可以一次与多个视图进行交互。因此，在这种情况下，您的演示者可以参考 4 个视图（一个用于页面，两个用于用户控件，最后一个用于子用户控件）。

或者，您希望每个演示者有一个视图，在这种情况下，您可以将用户控件视为父视图（页面）的子视图，因此父视图需要为演示者上下冒泡视图交互。但是，我更喜欢演示者处理交互多个视图的早期方法。

请参阅有关如何完成布线的相关问题：[https ://softwareengineering.stackexchange.com/questions/60774/model-view-presenter-implementation-thoughts](https://softwareengineering.stackexchange.com/questions/60774/model-view-presenter-implementation-thoughts)

最后，您可能想看看 MVVM 模式，我认为它非常适合组合 UI。您将拥有控制视图和模型之间交互的视图模型，而不是演示者 - 但是，与演示者不同，视图模型不知道视图 - 而是视图观察（和更新）视图模型以呈现自身。在这里看到这篇文章（视图模型被称为演示模型）： http: [//www.codeproject.com/Articles/23340/Presentation-Model-in-Action](http://www.codeproject.com/Articles/23340/Presentation-Model-in-Action)

**编辑**：

老实说，我不喜欢你的任何方法。我喜欢 MVP 实现，其中演示者通过接口（无紧密耦合）持有对视图的引用，并且视图进行接线，即创建演示者实例并注入视图引用。演示者侦听视图事件并调用视图上的方法。View 从不直接调用演示者的方法。（MVP 的其他变体是可能的 - 请参阅我寻求的 SO 答案）。有了这个，我将解释我之前解释过的两种方法。

**方法1**：

每个用户控件都是一个独立的视图。将有一个共同的演示者来处理多个视图。例如，

```
public class Presenter1
{
    IView1 _view1;
    IView2 _view2;

    public Presenter1(IView1 view1, IView2 view2)
    {
        _view1 = view1;
        _view2 = view2;

        _view1.OnSave += OnSave;
        _view1.OnSomeEvent += OnSomeEvent;
        _view2.OnFoo += OnFoo;
    }

    public void OnSave()
    {
        var data1 = _view1.GetData();
        var data2 = _view2.GetData();
        // update model
        ...
    }

    public void OnSomeEvent()
    {
       // inform view2 about it
       _view2.DoOnSomeEvent();
    }

    ...
}

public partial class MyPage : Page, IView1
{
   public void Page_Load(...)
   {
     //do wire up
     _presenter = new Presenter(this, usercontrol1);
   }
   ...
} 
```

基本思想是视图不做串扰。如果用户控件需要通知页面某些事情，它会引发一个被演示者捕获的事件并将其通知页面。视图是被动的并处理 UI。

**方法二：**

用户控件和页面交互。在这种情况下，Page 将充当最终视图，Presenter 将对其进行引用。控件的事件将由页面处理，如有必要，页面将冒泡事件。例如，

```
IView1 : IView2 { }

public class Presenter1
{
   IView1 _view1;

   public Presenter1(IView1 view1)
   {
       _view1 = view1;

       _view1.OnSave += OnSave;
       _view1.OnSomeEvent += OnSomeEvent;
       _view1.OnFoo += OnFoo;
   }
   ...
}

public partial class MyPage : Page, IView1
{
       public void Page_Load(...)
       {
         //do wire up
         _presenter = new Presenter(this);

         // handle user control events
         UserControl1.Foo += UserControl1_OnFoo();
         UserControl1.XyzEvent += UserControl1_XyzEvent();

       }
       ...

       private void UserControl1_OnFoo(...)
       {
          // bubble up to presenter
          OnFoo(..)
       }

       private void UserControl1_XyzEvent(...)
       {
          // private interaction (purely about some UI manipulation), 
          // will not be bubble up to presenter
          ...
       }
} 
```

# visual-studio-2008 - 数组 ' : 基类未定义

> ID：13621303
> 
> 赞同：0
> 
> 时间：2012-11-29T08:06:05.243
> 
> 标签：visual-studio-2008, visual-c++, mfc

我将使用现有的库在 Visual C++ 中创建一个新的静态库。我从旧库中复制了一个现有文件并将其添加到新创建的库中。（（头文件和 cpp 文件）头文件使用一个名为 QArray.h 的文件，所以我也复制了该文件。构建时出现以下错误：

> 错误 C2079：“CDawesRun::m_HeadRatio”
> 
> 使用未定义的类'CArray'
> 
> 和
> 
> [类型=双，
> 
> ARG_TYPE=双
> 
> ]

这个错误的原因是什么？我已将库创建为 Win32 静态库并单击了 MFC 选项。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:17:04.633

请参阅[编译器错误 C2504](http://msdn.microsoft.com/en-us/library/dw443zc0%28v=vs.71%29.aspx)。您可能缺少定义 CArray 的 #include 。

另见[CArray Class](http://msdn.microsoft.com/en-us/library/4h2f09ct%28v=vs.80%29.aspx)， CArray 似乎是在 afxtempl.h 中定义的。

# c# - SSL 连接错误

> ID：13621306
> 
> 赞同：1
> 
> 时间：2012-11-29T08:06:15.403
> 
> 标签：c#, mysql, ssl, certificate, mysql-connector

我正在尝试使用 ssl 从 ac# 应用程序连接到 mysql。以下是我的连接字符串：

```
 server = "xxx.xxx.xxx.xxx";
        database = "sqlserver";
        uid = "sqlserver";
        password = "password";
        cert_file = "client-cert.pfx";      
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" + database + ";" + "UID=" + uid + "; CertificateFile=" + cert_file + "; CertificatePassword=admin; SslMode=Required"; 
```

这是错误：

> System.IO.IOException：从传输流接收到意外的 EOF 或 0 字节。在 System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count) at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest) 在 System.Net.Security.SslState .StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest) 在 System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest) 在 System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult) 在 MySql。 Data.MySqlClient.NativeDriver.StartSSL() 在 MySql.Data.MySqlClient.NativeDriver.Open() 在 MySql.Data.MySqlClient.Driver.Open() 在 MySql.Data.MySqlClient.Driver.Create(MySqlConnectionStringBuilder 设置) 在 MySql。数据。

我以为问题出在我的文件上，但现在我知道不是……所以我迷路了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:05:21.910

```
server = "xxx.xxx.xxx.xxx"; 
```

大多数时候，SSL 证书定义了一个主机名模式（例如 *.google.com）。在 SSL 身份验证期间，主机名被验证为来自正确的域。使用服务器的 IP 地址将导致此检查失败。

我会尝试将主机名设置为服务器，看看你是否得到不同的结果。

# iis - 在 prod 环境中使端口范围从 1024 到 65535 是否安全

> ID：13621307
> 
> 赞同：5
> 
> 时间：2012-11-29T08:06:15.357
> 
> 标签：iis, networking, tcp, udp, ports

我知道在 WS2K8R2 上，新的默认起始端口是 49152，对于 IPV4 和 IPV6，TCP 和 UDP 的默认结束端口都是 65535。我想知道我是否可以安全地将动态范围扩展到：1025 - 65535。如果我这样做是否安全。如果不安全，有什么顾虑吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T09:42:00.177

49152-65535 范围内的任何内容都是 IANA 中不可保留的端口号，因此这些数字通常是安全的。因此，使用这个安全范围意味着它不太可能与任何正在运行的应用程序发生冲突，从而减少了找到合适端口号的时间。

[http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Dynamic.2C_private_or_ephemeral_ports](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Dynamic.2C_private_or_ephemeral_ports)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:48:17.803

不，您需要仔细查看[RFC 1700](http://www.ietf.org/rfc/rfc1700.txt)及其在 IANA 的当前继任者。这些文档中提到的*所有端口都是为指定的应用程序**保留*的，通常不应被其他应用程序使用。

# java - Eclipse rcp开发中Actions的访问方式

> ID：13621308
> 
> 赞同：1
> 
> 时间：2012-11-29T08:06:16.867
> 
> 标签：java, eclipse, eclipse-rcp

我想知道一旦创建和注册了 Actions、ActionBar o ActionBarAdvisor，是否有任何访问方式。

谢谢约瑟夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:56:15.950

在扩展 ActionBarAdvisor 的 rcp 应用程序类中，您可以在方法 protected void fillCoolBar(ICoolBarManager coolBar) {

# android - CapSentence 问题

> ID：13621309
> 
> 赞同：0
> 
> 时间：2012-11-29T08:06:18.317
> 
> 标签：android

我有 s3 的问题

我已经设置了字段的输入类型，例如

> 盖句
> 
> 大写字
> 
> 大写字母造成混乱的场景是，当我在三星 Galaxy NoteII 上测试应用程序时，应用程序运行得非常好，这意味着编辑文本字段的输入类型正在相应地执行它们的功能

虽然在 Galaxy s3 上运行相同的应用程序时，编辑文本字段无法作为其输入类型工作，但这些设备都是 XHDPi

> 分辨率 = 720x1280

任何人都可以告诉谁来解决这个问题谢谢问候乌斯曼库尔德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:07:33.150

我发现解决方案这可能会在未来帮助其他人这件事可以通过以下转到设置然后处理

> 语言和输入类型

选项并转到

> 三星键盘设置

并选择选项

> 自动大写

现在它将在应用程序中完美运行![S3 屏幕1](../Images/423dd530f1128138d08ccb890bd1885b.png)

![S3 屏幕 2](../Images/1e5e17f8bc0de66778ca55fcd5e8dacf.png)

![S3 屏幕 3](../Images/7aa7357a9db5ece7ab53e4dfd2bb9242.png)

# c++ - Windows Phone 中的进程关联

> ID：13621314
> 
> 赞同：4
> 
> 时间：2012-11-29T08:06:34.560
> 
> 标签：c++, visual-studio-2012, windows-phone-8, affinity, setthreadaffinitymask

我的 WP 库项目，我正在尝试将繁重的进程绑定到硬件线程（0 或 1）。因此，使用该库的应用程序使用其他可用核心。

我们可以在 Windows Phone 8 应用程序中设置进程关联吗？我找不到关于`SetProcessAffinity`WP8 之类的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:16:11.850

处理器亲和力和许多硬件功能在 Windows Phone（和大多数移动平台）上无法在低级别访问，因此可以随着时间的推移升级硬件（例如，未来的 Windows Phone 可能有超过 2 个内核）而不会导致应用程序不兼容.

解决方案是使用平台提供的抽象库，这些库在当时的硬件条件下做得最好。对于 Windows Phone 8，一些选项是...

1.  [Threads、ThreadPool 和 BackgroundWorker](https://stackoverflow.com/a/8058222/247257)（在之前的回答中介绍过）
2.  [Async 的 Task.Run](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.threading.tasks.task.run%28v=vs.105%29.aspx)

微软的[Channel 9 最近发布了一些视频，解释了如何以及何时使用异步](http://channel9.msdn.com/Series/Three-Essential-Tips-for-Async)和其他形式的线程。

# scala - 如何编写 Build.scala 来更改在 build.sbt 中分配的 SettingKey

> ID：13621318
> 
> 赞同：2
> 
> 时间：2012-11-29T08:06:45.783
> 
> 标签：scala, build, sbt

我有一个`build.sbt`：

```
name := "name" 
```

还有一个`project/Build.scala`：

```
import sbt._
object MyBuild extends Build {
  val root = Project(id = "root", base = file("."))
  override def settings = super.settings :+ (
    Keys.name in root ~= { oldName => oldName + "-in-scala" }
  )
} 
```

我想要一个变压器`project/Build.scala`，它可以`name`变成`name-in-scala`。但它不起作用。

我怎样才能写一个变压器`Build.scala`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:23:13.860

我不认为这是可能的。该页面 [http://www.scala-sbt.org/release/docs/Getting-Started/Full-Def.html#relating-build-sbt-to-build-scala](http://www.scala-sbt.org/release/docs/Getting-Started/Full-Def.html#relating-build-sbt-to-build-scala)说明了 SBT 0.12.1：

> build.sbt 中的设置应该“胜过”Build.scala 中的设置。

和

> .sbt 文件中的设置附加到 .scala 文件中的设置。

# java - 一次使用的变量定义是否已优化？

> ID：13621324
> 
> 赞同：7
> 
> 时间：2012-11-29T08:07:28.477
> 
> 标签：java, variables, optimization

考虑以下方法：

```
private static long maskAndNegate(long l) {
    int numberOfLeadingZeros = Long.numberOfLeadingZeros(l)
    long mask = CustomBitSet.masks[numberOfLeadingZeros];
    long result = (~l) & mask;
    return result;
} 
```

该方法可以简写为：

```
private static long maskAndNegate(long l) {
    return (~l) & CustomBitSet.masks[Long.numberOfLeadingZeros(l)];
} 
```

这两种表示在实际运行时是否相等？换句话说，Java 编译器是否优化了我为可读性和调试而放置的额外变量的不必要定义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T08:13:19.330

Java 编译器本身几乎不做任何优化。几乎所有事情都是由 JIT 完成的。

不过，局部变量本身与优化无关——多运算符表达式仍然需要*逻辑上*的各种操作数才能进入堆栈，只是在未命名的“槽”中。如果非常相似，您可能会发现为您的两个实现生成的字节码非常相似，只是在第二种情况下没有名称。

*更重要的是，减少使用的局部变量的数量偶尔**可能*会带来的任何性能优势几乎肯定是微不足道的。第一种方法的可读性优势更可能是显着的。与往常一样，避免在没有证据证明您尝试优化的地方是瓶颈的情况下进行微优化，然后只允许进行已经*证明*其价值的优化。

 **（当您证明您*需要*优化特定方法时，您已经拥有测试任何潜在优化的工具，因此您无需猜测。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:45:17.097

代码不够大，无法针对初学者进行优化。而在第二种方式中，您只是节省了用于存储对`numberOfLeadingZeros`所有引用的内存。

但是，当您在运行时足够显着地使用此代码（例如至少 10000 次）时，JIT 会将其识别为 HOT 代码，然后使用诸如方法内联和类似排序之类的巧妙技巧对其进行优化。

但在您的情况下，**首选选项是第一个**，因为它更具**可读性**。

*你不应该为了小的优化而牺牲可读性。***

# java - Java从数组中拆分字符串

> ID：13621326
> 
> 赞同：1
> 
> 时间：2012-11-29T08:07:30.317
> 
> 标签：java, android

我有一个包含一些信息的字符串数组。

例子：

```
 String [] testStringArray;

 testStringArray[0]= Jim,35
                     Alex,45 
                     Mark,21

 testStringArray[1]= Ana,18
                    Megan,44 
```

这正是信息的样子。现在我的问题是我想使每个元素成为数组中的单独元素，并且我想根据 \n 字符对其进行拆分。

所以我想要

```
 newArray[0]=Jim,35
        newArray[1]=Alex,45
        newArray[2]=Mark,21
        newArray[3]=Ana,18 
```

等等等等。我知道 split 方法，但这不会只是将每个数组元素拆分成一个全新的数组而不是组合它们吗？

如果有人可以提供帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:13:49.270

像这样的东西：

```
 // Splits the given array of Strings on the given regex and returns
    // the result in a single array.
    public static String[] splitContent(String regex, String... input) {
        List<String> list = new ArrayList<>();
        for (String str : input) {
            for (String split : str.split(regex)) {
                list.add(split);
            }
        }
        return list.toArray(new String[list.size()]);
    } 
```

你可以这样称呼它：

```
 String[] testStringArray = ...;
    String[] newArray = splitContent("\n", testStringArray); 
```

由于使用了**可变参数**，您也可以这样称呼它：

```
 String[] newArray = splitContent("\n", str1, str2, str3, str4); 
```

`strX`变量在哪里`String`。你可以使用任何你想要的数量。所以要么传递一个字符串数组，要么传递你喜欢的任意数量的字符串。

如果您不再需要*旧*数组，您也可以像这样使用它：

```
 String[] yourArray = ...;
    yourArray = splitContent("\n", yourArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:15:29.287

```
 String[] testStringArray = new String[2];
    ArrayList<String> result = new ArrayList<String>();
    testStringArray[0]= "Jim,35\nAlex,45\nMark,21";
    testStringArray[1]= "Jiam,35\nAleax,45\nMarak,21";
    for(String s : testStringArray) {
        String[] temp = s.split("\n");
        for(String t : temp) {
            result.add(t);
        }
    }
    String[] res = result.toArray(new String[result.size()]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:16:23.167

您可以先将字符串合并为一个字符串，然后对合并的字符串使用 split 方法。

```
testStringArray[0]= Jim,35
                     Alex,45 
                     Mark,21

testStringArray[1]= Ana,18
                    Megan,44

StringBuffer sb = new StringBuffer();

for(String s : testStringArray){

    s = s.trim();
    sb.append(s);
    if (!s.endWith("\n")){
        sb.append("\n");
    }

}

String[] array = sb.toString().split("\n"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T08:21:50.873

试试这是工作代码>>

```
String[] testStringArray = new String[2]; // size of array

    ArrayList<String> result = new ArrayList<String>();

    testStringArray[0]= "Jim,35\nAlex,45\nMark,21"; // store value
    testStringArray[1]= "Ana,18\nMegan,44";

    for(String s : testStringArray) {
        String[] temp = s.split("\n"); // split from \n
        for(String t : temp) {
            result.add(t);   // add value in result
            System.out.print(t);

        }
    }
    result.toArray(new String[result.size()]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T08:26:32.643

试试这个。它简单易读。

```
ArrayList<String> newArray = new ArrayList<String>(); 

for (String s : testStringArray) {
    newArray.addAll(Arrays.asList(s.split("\\n"));
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-29T08:18:34.657

首先，你不能写你刚刚做了什么。你制作了一个字符串数组，它只能包含字符串。此外，字符串必须位于标记“”中，例如“此处的某些文本”。

此外，数组中的一个位置只能有一个字符串，例如：

```
 newArray[0] = "Jim";
newArray[1] = "Alex"; 
```

不喜欢：

```
newArray[0] = Jim; 
```

当然不喜欢：

```
// Here you're trying to put 2 things in 1 place in the array-index
newArray[0] = Jim, 35; 
```

如果你不想结合 2 件事，比如名字和年龄，你必须使用 2D 数组 - 或者在你的情况下 ArrayList 可能更好。

使用以下对象创建一个新类：

```
 public class Person {

    String name;
    int age;

    public Person(String name, int age) {
    this.name = name;
    this.age = age;
    }
    } 
```

然后去你想使用原始数组的班级，然后写：

```
ArrayList<Person> someNameOfTheArrayList = new ArrayList<Person>();

someNameOfTheArrayList.add(new Person("Jim", 32));
someNameOfTheArrayList.add(new Person("Alex", 22)); 
```

# django - 将字符串评估为模板标签 - Django

> ID：13621327
> 
> 赞同：2
> 
> 时间：2012-11-29T08:07:37.290
> 
> 标签：django, django-templates

我有一个 Django 模板，其中包含一个模板标记，该标记接受一个变量（shop.id）并根据商店是否在数据库模型中返回两个字符串之一，如下所示

```
{% is_shop_claimed shop.id %} 
```

模板标签返回的两个可能的字符串是

```
return '<p>Taken</p>' 
```

或者

```
return '<a href="/claim_shop/{{shop.id}}/">Claim shop now</a>' 
```

当代码运行时，如果返回第二个字符串，它会出现在模板中（在浏览器中查看页面源代码）就像

```
<a href="/claim_shop/{{shop.id}}/">Claim shop now</a> 
```

并在浏览器中显示为这样的链接

立即索取店铺

**问题是**Django 模板引擎没有将 href 中的 shop.id **评估**为数字。

例如，商店 123 的链接应如下所示

```
<a href="/claim_shop/123/">Claim shop now</a> 
```

我检查了 Django 文档中的过滤器以应用于模板标签或模板中的字符串，以便字符串不会被转义但没有运气。

我看过[这个](https://stackoverflow.com/questions/1278042/in-django-is-there-an-easy-way-to-render-a-text-field-as-a-template-in-a-templ)，但似乎应该有一种简单的方法在模板中对 {{shop.id}} 进行评估。

我还让模板标签返回一个 Bool 而不是两个字符串，像我喜欢的那样将演示文稿留在模板中，但是在这样的模板标签周围使用 if 语句

```
{% if is_shop_claimed shop.id %}
    <p>Taken</p>
{% elif not is_shop_claimed shop.id %}
    <a href="/claim_shop/{{shop.id}}/">Claim shop now</a>
{% endif %} 
```

不起作用，因为我不能将模板标签放在 if 语句中。

有关如何将 {{shop.id}} 评估为数字的任何建议？任何帮助，将不胜感激。我正在学习 Django 和 Python，我在这个问题上花了几个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:42:55.000

您正在传递值，所以只需将其替换。

```
return '<a href="/claim_shop/%s/">Claim shop now</a>' % (shop_id,) # or however you refer to it in the code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:51:22.670

我建议您在`is_claimed`商店模型中添加一个属性：

```
class Shop(models.model):

    # you fields are here

    @property
    def is_claimed(self):
        # logik for determining if the shop is claimed
        if claimed:
            return True
        else:
            return False 
```

然后你可以在你的模板中使用：

```
{% if shop.is_claimed %}
    <p>Taken</p>
{% else %}
    <a href="/claim_shop/{{shop.id}}/">Claim shop now</a>
{% endif %} 
```

您甚至可以将其移动到一个片段中，您可以根据需要将其包含在内，或者（更进一步）为其创建一个[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)。

# c - 在回车和putchar（）之后执行跳过getchar（）循环？

> ID：13621329
> 
> 赞同：2
> 
> 时间：2012-11-29T08:07:49.100
> 
> 标签：c

这是我第一次在这里发帖，所以希望这能按预期进行。

我正在做 K&R 的早期练习之一。目标是使用 getchar() 从用户那里获取一堆字符，然后使用 putchar() 打印它们，但跳过任何额外的空格。我对练习的解决方案效果很好，但我不明白为什么。

这是程序：

```
#include <stdio.h>

int main()
{
    int c, spc;
    c = 0;
    spc = 0;

    while(c != EOF)
    {
        c = getchar();

        if(c == ' ')
        {
            if(spc != 1)
            {
                putchar(c);
                spc = 1;
            }
        }
        if(c != ' ')
        {
            spc = 0;
            putchar(c);
        }
    }
    return 0;
} 
```

只有一个循环，并且执行在第一次迭代期间按预期命中 getchar() 时停止。一旦按下回车，程序就会继续打印出用户在缓冲区中输入的任何内容，没有多余的空格——这正是它应该做的。

但我不明白的是，为什么在遇到 getchar() 时，循环的每次后续迭代都不会停止执行。/n 字符是否与它有关？我确实注意到它还会打印换行符，并且在打印完所有内容后，它会再次在 getchar() 处停止。那么，为什么它会在每次迭代开始时跳过 getchar() 而打印缓冲区中的所有内容？

我一直在玩 C 很长时间，但直到最近才努力以“正确”的方式学习它。由于我有一些经验，因此您不必*过多*地降低答案（因此，就像您向 10 岁而不是 5 岁的孩子解释它一样）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T08:10:51.503

当您键入内容并按 Enter 键时，所有内容都存储在内部缓冲区中。所以每次循环执行时，它会命中`getchar`谁 **确实 **去那个缓冲区并拉出一个字符。

> 但我不明白的是为什么执行不会随着循环的每次后续迭代而停止

`getchar`仅当在该缓冲区中找不到任何内容时，程序才会停止。现在`\n`在这种情况下没有什么特别的。这只是 CLI 实际上不会将您键入的内容“发送”到程序的约定，直到您按回车键（即您可以按退格键等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:13:26.117

`while (c != EOF)`击中后结束`EOF`。输入一些内容后尝试按下`Ctrl + D`。

# iphone - 从包装类访问视图

> ID：13621331
> 
> 赞同：1
> 
> 时间：2012-11-29T08:07:55.870
> 
> 标签：iphone, objective-c, ios, unity3d, objective-c++

在 Unity 的回调方法中，我添加了一个 UIButton

```
int OpenEAGL_UnityCallback(UIWindow** window, int* screenWidth, int* screenHeight,  int* openglesVersion) {
CGRect rect = [[UIScreen mainScreen] bounds];

// Create a full-screen window
_window = [[UIWindow alloc] initWithFrame:rect];
EAGLView* view = [[EAGLView alloc] initWithFrame:rect];

if (wrapperObj == nil)
{
    wrapperObj = [[WrapperClass alloc] init];
}

UIImage *buttonImage = [UIImage imageNamed:@"imageButton.png"];
UIButton *backButton = [[UIButton alloc] initWithFrame:CGRectMake(view.bounds.origin.x+35, view.bounds.size.height-72, 36, 39)];
[backButton setImage:buttonImage forState:UIControlStateNormal];

[backButton addTarget:wrapperObj action:@selector(goToPreviousScreen:) forControlEvents:UIControlEventTouchUpInside];
[view addSubview:backButton];

} 
```

**如何访问已实例化 Unity3D 的类 (MyViewController) 的视图？我想换个视角**

```
@implementation MyViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        QCARUnityPlayer::getInstance().QCARInit([orientation UTF8String]);
        [self startUnity];
    }
    return self;
}

@end 
```

# objective-c - 使用 ASL API -Objective C 获取存储在 ASL 日志文件中的日志的时间

> ID：13621343
> 
> 赞同：1
> 
> 时间：2012-11-29T08:08:28.117
> 
> 标签：objective-c

众所周知，我们可以在 Objective C 中使用 ASL（Apple System Logger）API 来读取日志，并且使用 asl_search 可以检索特定的应用程序日志。但问题是 asl 的输出不包括创建日志的时间。例如，当您使用 Apple System Logger 打开目录 /var/log 中的 system.log 时，您会看到如下日志：

> **11 月 28 日 09:19:37 本地主机引导日志 [0]：BOOT_TIME 1354123177 0**

但是当用objective C查询asl时，它会报告日志的每个属性，除了创建日志的时间，这意味着在上面提到的例子中，asl_search没有报告11月28日09:19:37
无论如何要包括创建日志的时间在目标 C 中查询 asl？如果这是不可能的，那么检索日志时间的另一种方法是什么？

* * *

这是我的代码，请注意我们可以在 /var/log 的 system.log 文件中看到的日志时间不会出现在我的代码输出中。

int main (int argc, const char * argv[]) {

```
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
aslmsg q, m;
int i;
const char *key, *val;
q = asl_new(ASL_TYPE_QUERY);
asl_set_query(q, ASL_KEY_SENDER, "bootlog", ASL_QUERY_OP_EQUAL);

aslresponse r = asl_search(NULL, q);

while (NULL != (m = aslresponse_next(r)))
{
    NSMutableDictionary *tmpDict = [NSMutableDictionary dictionary];

    for (i = 0; (NULL != (key = asl_key(m, i))); i++)
    {
        NSString *keyString = [NSString stringWithUTF8String:(char *)key];

        val = asl_get(m, key);

        NSString *string = [NSString stringWithUTF8String:val];
        [tmpDict setObject:string forKey:keyString];
    }

    NSLog(@"%@", tmpDict);

}
aslresponse_free(r);

[pool drain];
return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:15:49.203

日志消息的时间戳是消息中`ASL_KEY_TIME`键的值。该值是 UNIX 时间（自 1.1.1970 以来的秒数）。

您可以将日志消息的时间戳转换`NSDate`为

```
NSDate *time = [NSDate dateWithTimeIntervalSince1970:(strtod(asl_get(m, ASL_KEY_TIME), NULL))]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T18:11:46.063

[如果您使用的是 Swift，那么有一个名为CleanroomASL](https://github.com/emaloney/CleanroomASL)的新开源项目，它提供了一个类型安全的 API，用于读取和写入 Apple 系统日志条目。

查询日志会返回每个条目的时间戳：

```
let client = ASLClient()
let query = ASLQueryObject()

client.search(query) { record in
    if let record = record {
        // we've gotten a log entry for the search.
        // 'record' is of type ASLQueryObject.ResultRecord;
        // you can access the timestamp as an NSDate
        // using the record.timestamp property
    }
    else {
        // there are no more log entries to process
    }
    // return true while we still want to get results
    // or return false when we don't want to process more
    return true
} 
```

您可以通过设置其他查询键来限制您的搜索查询：

```
query.setQueryKey(.Message, value: nil, operation: .KeyExists, modifiers: .None)
query.setQueryKey(.Time, value: Int(NSDate().timeIntervalSince1970 - (60 * 60)), operation: .GreaterThanOrEqualTo, modifiers: .None) 
```

上面的代码将返回过去 5 分钟内记录的所有 ASL 日志条目，这些条目也具有该`.Message`属性的值。

**注意：**在 iOS 设备上，ASL*只会*返回您的进程创建的日志条目。此外，日志会被相当积极地修剪，并且可能只包含当前运行应用程序的条目。如果您想在此之外保留日志条目，您可能需要研究更强大的 Swift 日志记录包，例如[CleanroomLogger](https://github.com/emaloney/CleanroomLogger)。

Mac/iOS 模拟器和 iOS 设备上的 ASL 行为之间的差异在 GitHub 上的 CleanroomASL 项目页面上*的设备和模拟器之间的差异部分中进一步解释。*

# algorithm - 找到比其他数字有更大差异的数字

> ID：13621345
> 
> 赞同：-1
> 
> 时间：2012-11-29T08:08:40.783
> 
> 标签：algorithm, graph, numbers

我有一个队列包含不同数量的消息，并且我有脚本来读取队列并处理消息。我的问题是：一些队列的消息数量非常多，而且比平时多。因此，为了改进处理，我想处理所有具有更多计数的队列。如果队列有线性差异（例如：1000、1200、1300、1800、1900）我想处理完整的队列。如果假设计数像 (1000, 1200, 1300, 1800, 1900, 4000, 4500, 4900, 5200) - 这里 4000+ 是非常大的队列所以我只想拿这些队列。

我希望一些数学计算标准偏差等会有所帮助，但我不知道如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:20:47.813

我会这样开始：

*   取第一个数字（在本例中为 1000）并将数组中的每个数字除以这个数字，并根据每个数字保存该分数。
*   取具有您定义为这些分数中的每一个“非常不同”（例如 5 或 10）的基数的日志，并根据每个数字保存它们。
*   将所有数字放在分数对数介于 -1 和 1 之间的组中，然后从所有数字的数组中删除这些数字。
*   从剩余号码重新开始并继续，直到您只剩下 1 个（您将把它放入一个新组中）或没有剩余号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:30:34.323

1.  从排序开始。
2.  收集相邻元素之间差异的统计数据。
3.  选择几个“大”跳跃

“大”的定义可能不同。如果您知道他们的数量（例如只有两组），只需选择适当数量的最大跳跃（比组数少 1）。或者，您可以采取一些百分比的大跳跃或分析平均值和变化来选择一些阈值。

# android - Android Is it acceptable to start a new Intent service from another intent service and how to notifty service when one has finished?

> ID：13621351
> 
> 赞同：1
> 
> 时间：2012-11-29T08:09:19.337
> 
> 标签：android, broadcastreceiver, google-cloud-messaging, intentservice

I have an application design question

My intention is to have 3 intent services

1) A class based on GCMBaseIntentService

2) Web Registration Service - Register with a website

3) Data Refresh Service - Updates application data with latest data from a website

The GCM Service is used to register a new app installation with Google GCM if the device the app is installed on is capable of handling GCM. Both the WebRegistration and Data Refresh Services can be instantiated totally independently at appropriate times, on Application start up or in the case of the data refresh service at various points with the app and therefore it seems appropriate to have these as separate services.

Both the Web Registration Service and the Data Refresh Service should broadcast a message when they are done

On first time load of the app The GCM service needs to both register with the web server and update the applications data

Is it acceptable for the GCM Intent Service to register a broadcast receiver, fire off the Web registration intent service and when it receives a message in the broadcast receiver that this service is finished fire off the data refresh service?

If this approach is not acceptable I'd love to hear a more appropriate solution

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:13:06.570

yes it is fine ... intentservices run as queues ... read the documentation at developer.android.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:14:12.977

You can call ***bindService*** from a Service exactly the same way you can call it from an Activity. You'll notice from the javadoc that the only place you can't call bindService is in a BroadcastReceiver. You can use a ServiceConnection as well to receive the Binder.

# wpf - WPF TabControl 使用命令更改 TabItem

> ID：13621355
> 
> 赞同：6
> 
> 时间：2012-11-29T08:09:46.420
> 
> 标签：wpf, mvvm, command

我有一个 WPF 应用程序，在主窗口中我有一个`TabControl`. 我希望在他们被选中时`TabItems`触发`RelayCommand`我拥有的一个`ViewModel`（每个命令都有不同的命令`TabItem`）。我不想为命令函数`TabItem`中设置的某些条件选择a 。`CanExecute`这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T08:57:49.620

我认为正确的方法不是“ICommand”，而只是一个 ViewModel 属性，它将双向绑定到 TabControl.SelectedIndex（或 SelectedItem），然后您可以在 ViewModel 中做出决定。这比定义许多特定于每个 TabItem 的命令要好

```
<TabControl SelectedIndex="{Binding VMSelectedTabIndex, Mode=TwoWay}">
//OR
<TabControl SelectedItem="{Binding VMSelectedItem, Mode=TwoWay}"> 
```

# javascript - 用页面中的两个框架实现平滑滚动

> ID：13621358
> 
> 赞同：0
> 
> 时间：2012-11-29T08:09:55.073
> 
> 标签：javascript, jquery, html, css

我有一个两框网页，其中右侧框架中的选项卡和左侧框架中的内容。当在右侧框架中单击导航选项卡时，我已经设置了锚标记以链接内容。我需要为此实现平滑滚动。我可以在同一页面中执行此操作，但我不知道如何处理两个框架。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:08:25.940

您可以窃取我为模拟公司制作的代码，该代码完全符合您的要求：[https ://github.com/Rovanion/JC](https://github.com/Rovanion/JC)

我将它克隆到我的网络服务器上供您观赏：[http ://rovanion.se/jc/](http://rovanion.se/jc/)

我可以补充一点，这不是一个直接解决的问题，特别是如果您希望哈希地址在滚动的同时实际工作。因为那时你必须抑制浏览器的内置导航。

但简而言之，您可以查看我的代码并编写自己的代码，或者在我刚刚添加的许可下使用我的代码。

# javascript - 使用javascript优化解析（提取）json数据

> ID：13621359
> 
> 赞同：0
> 
> 时间：2012-11-29T08:09:56.780
> 
> 标签：javascript, jquery

我向我的服务器发送 http 请求（使用 ajax），它返回 json 字符串，例如：

```
{

    "neighbors":{
        "data":[
            {
                "id":"7f40cb24-603e-4943-9a0b-e16e024c8bd5",
                "name":"jeff ferry",
                "picture":"url",
                "location":{
                    "data":[
                        {
                            "latitude":"xxx",
                            "longitude":"yyy"
                        }
                    ]
                }
            }
        ]
    }
} 
```

并在 html 页面 ajax 回调中访问数据，例如：

```
success: function (data) {

    var outerObj = data.neighbor.data;    
    var res = ""; 

    for (i in outerObj )          
    {
    if (outerObj .hasOwnProperty(i)) {
        // my outer stuff              
            var innerObj = outerObj.data;
            for (j in innerObj)          
            {
            // my inner stuff
                if (innerObj.hasOwnProperty(j)) {
                }
            }
        }                                            
    }
} 
```

但我想知道我是否可以通过某种优化（更短）的方式访问它？

任何可观的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:29:07.840

也许您可以收紧从服务器返回的数据结构？由于 1) location 属性实际上只是一个 lat/long 元组，并且 2) 内部`data`数组周围的对象只是一个冗余包装器，这样怎么样：

```
{
    "neighbors":[
        {
            "id":"7f40cb24-603e-4943-9a0b-e16e024c8bd5",
            "name":"jeff ferry",
            "picture":"url",
            "location":["xxx","yyy"]
        }
    ]
} 
```

这样，你的 JavaScript 就变成了这样：

```
success: function (data) {

    var res = ""; // what was this for, anyway?

    for (var n in data.neighbors) if (data.neighbors.hasOwnProperty(n) {
        var neighbor = data.neighbors[n];
        // actions on the neighbor object here

        var location = neighbor.location;
        // actions on the location here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:29:45.400

如果你更喜欢使用 jQuery

```
var data
$.getJSON(thejsonfile, function(e) {
   data = e.neighbors.data[0]
}) 
```

现在“邻居”中的所有数据都在数据中，您可以使用“数据”引用它们

所以想得到 id 以这种方式引用它`var id = data.id`

注意：这些方括号中的任何内容都`[]`指一个循环，如果“邻居”列表中有一个或多个数据，则必须使用循环`$.map() or $.each()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T08:21:13.807

假设您只关心内部属性，我会将其包装在 try-catch 块中。

```
var outer, inner;
try {
    outer = data.neighbors.data[0];
    inner = outer.location.data[0];
    delete outer.location;
} catch (e) {
    // no good
} 
```

即，[像这样](http://jsfiddle.net/4szft/1)。

**外**

> {"id":"7f40cb24-603e-4943-9a0b-e16e024c8bd5","name":"杰夫渡轮","图片":"url"}

**内**

> {"纬度":"xxx","经度":"yyy"}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T08:28:48.233

`neighbours.data`是一个数组。如果您希望遍历它们，则使用 for 循环而不是 foreach。

```
var i = 0,
    outerLength = (neighbours.data && neighbours.data.length) || 0,
    innerLength, j,
    outerObj, innerObj;

for (; i < length; i++) {
    outerObj = neighbours.data[i];

    j = 0;
    innerLength = (outerObj.data && outerObj.data.length) || 0;

    for (; j < innerLength; j++) {

        innerObj = outerObj.data[j];
        // do what you wish! 
    }

} 
```

# actionscript-3 - 检索给定日期的日期

> ID：13621361
> 
> 赞同：0
> 
> 时间：2012-11-29T08:10:08.503
> 
> 标签：actionscript-3, apache-flex, datetime

当给定年、月和日期时，我想检索日期所属的日期。ActionScript 中是否有可用的功能？

```
Input : 
Year : 2012
Month : 11
Date : 29

Output : Thursday 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:08:37.247

如果您想花哨，还可以输出特定于用户区域设置的日期名称：

```
 var d:Date = new Date(2012, 10, 29); // November 29, 2012
        trace ("The day of week (number) is: ", d.day); // outputs: The day of week (number) is:  4
        var f:DateTimeFormatter = new DateTimeFormatter( LocaleID.DEFAULT, DateTimeStyle.SHORT, DateTimeStyle.SHORT);
        f.setDateTimePattern("EEEE");
        trace(f.format(d)); // outputs: "Thursday" 
```

编辑：

我使用了 Flash 类`flash.globalization.DateTimeFormatter`，但也有针对此的 Flex 特定类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:50:53.860

好的最后我得到了它的工作。在 Date() 构造函数中，年份和日期的索引似乎相同，但月份索引应为 -1；

```
//this returns Day of September 1st. Not August 1st.
var d:Date = new Date(2012,8,1); 
Alert.show(" "+d.day); 
```

# javascript - 如何在 JavaScript、jQuery 中获取包含 \\ 字符的编码字符串原始长度？

> ID：13621362
> 
> 赞同：0
> 
> 时间：2012-11-29T08:10:10.790
> 
> 标签：javascript, jquery

我在使用 JavaScript 时遇到了一些问题。我从数据库中获取编码字符串并放入它的 JavaScript 数组。字符串包含 \\ 并且当我警告字符串长度大于它时。我怎样才能得到原始字符串？这是我的字符串

```
var a = "eir~FdezuOha@ha_@rPzjQbnChxI~_Gf}\\|aAfnu@exNjmm@ilDvi]~Ttnz@tmLlyg@vi@nj`@`vIlrZznB`d^dd@zsVbvFdia@~bK~yT~uQxsPpmA|wL_bD|cCwiEfaEil@d`s@keEzri@u`Erw~Am|Dp{x@qJjbfBx}AdyrDkPtme@tgClei@feAziLrwFhJl}Ax`LvwHz||@nmHtrp@hGnnc@_D~j}@a@hskA_GjfuAlj]t_`@`sTheWjs@h{\\|AbxOj}LnxK`fN|gXtyH~cBrvElnKhaPxk`@jxB~v\\tqK~lLuUvkh@kBz~|As@tyfCfCbck@dbJhfh@h_QprrAcaC|czAunHbsr@qkMpm`@osk@|opB}nPvjvAthDp_kBhQdvt@zyK`pdAjlIx|OdiJln_@ngKzzu@l`YtdeAlqQrjZfzc@|y\\v{`@zks@h_@xcWf_CjoaArzNrbkAbfNb~c@nsVzeYjlTno]|hJxzU|~AflJvyDncJpnJdkKabBn`ToeE|pYcr@thRqpAh{NraHvkKnfCv}Js`@pmRx}EroV`dItwQnpQlcM~jAzrGikJdaHujMjxJs`@bxQzsEjlKmyCnrJc|FzrXu`FzhJ`eE`|LvfD`}`@rrDrr_@diHbdQbaBzrRajAd`[rzL~rwAtfDbhTn|HvvKluRvqWjiNxjHnlE|@ppKpfJbtDroDth@vre@oFnxRigF|nO{bEbwRwpGhmLld@rrKxuCbbRbnKbhSnve@vrr@}sBxqs@f{AnwZvZh{a@qnGdnSa~AlrKfmLjhe@q|AfmOj|FvlYzvE|br@j{Axr_@hkFfre@jhIdrg@udJbuRknHpbBgzBpdFc~AhyJorBzaOu|AffTpzFnaLv_W`{d@lhPrfJvxEfnJ~`KvuJ`nE~bTgzGztVwf@vsHngJ`eI~vV`yFv`m@sgAhhGwcC~iHtiH`ed@ruUbtO`tYv~Vlf^hdHlq@bnFvqLxin@p|Rxp[rkWnyTzka@jtVfqLvtF|aa@vcF`|Erc@~cIp}MjyUzuC|{O`lGp~Qhn@|rc@~mS|eg@vtZzi_@hqL|uSpkOrqHldHhkHl|Kjk[bgLdxItqa@jtDjiPbbDhwQryQlou@beVh|LnrJw}@~yRdk`@hhsAf~RtwSnbRblZp|CtgZfs]radA~~Bf_[zvArjTrcFfjNtzb@xgWziUtsN|af@tp\\blEluFpuFmsDn|FaoCdwCqlB~hFb|D|nMthQl_FfvFsxA|tYl|AnwP_Fzca@zbApjr@x]xP"

alert(a.length) //length is 1279

$.ajax({
    cache : false,
    url : 'get_polylines.action',
    type : 'post',
    dataType : 'json',
    async : false,
    success : function(result) {
       var polyline = result.polyline;

       var arr = new Array();
       var k = 0;
       for ( var j = 0; j < polyline.length; j++) {
          arr [k] = polyline[j];
          k++;
       }
      for(var i=0; i<arr.length; i++){
        alert(arr[i].length); //length is 1284
       }
    },

}); 
```

当我将此字符串放入输入隐藏字段然后获取值时，它也会警告长度为 1284。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:04:05.940

用于`String.split()`切割你的数组，而不是遍历字符串：

```
var a = "eir~FdezuOha@ha_@rPzjQbnChxI~_Gf}\\|aAfnu@exNjmm@ilDvi]~Ttnz@tmLlyg@vi@nj`@`vIlrZznB`d^dd@zsVbvFdia@~bK~yT~uQxsPpmA|wL_bD|cCwiEfaEil@d`s@keEzri@u`Erw~Am|Dp{x@qJjbfBx}AdyrDkPtme@tgClei@feAziLrwFhJl}Ax`LvwHz||@nmHtrp@hGnnc@_D~j}@a@hskA_GjfuAlj]t_`@`sTheWjs@h{\\|AbxOj}LnxK`fN|gXtyH~cBrvElnKhaPxk`@jxB~v\\tqK~lLuUvkh@kBz~|As@tyfCfCbck@dbJhfh@h_QprrAcaC|czAunHbsr@qkMpm`@osk@|opB}nPvjvAthDp_kBhQdvt@zyK`pdAjlIx|OdiJln_@ngKzzu@l`YtdeAlqQrjZfzc@|y\\v{`@zks@h_@xcWf_CjoaArzNrbkAbfNb~c@nsVzeYjlTno]|hJxzU|~AflJvyDncJpnJdkKabBn`ToeE|pYcr@thRqpAh{NraHvkKnfCv}Js`@pmRx}EroV`dItwQnpQlcM~jAzrGikJdaHujMjxJs`@bxQzsEjlKmyCnrJc|FzrXu`FzhJ`eE`|LvfD`}`@rrDrr_@diHbdQbaBzrRajAd`[rzL~rwAtfDbhTn|HvvKluRvqWjiNxjHnlE|@ppKpfJbtDroDth@vre@oFnxRigF|nO{bEbwRwpGhmLld@rrKxuCbbRbnKbhSnve@vrr@}sBxqs@f{AnwZvZh{a@qnGdnSa~AlrKfmLjhe@q|AfmOj|FvlYzvE|br@j{Axr_@hkFfre@jhIdrg@udJbuRknHpbBgzBpdFc~AhyJorBzaOu|AffTpzFnaLv_W`{d@lhPrfJvxEfnJ~`KvuJ`nE~bTgzGztVwf@vsHngJ`eI~vV`yFv`m@sgAhhGwcC~iHtiH`ed@ruUbtO`tYv~Vlf^hdHlq@bnFvqLxin@p|Rxp[rkWnyTzka@jtVfqLvtF|aa@vcF`|Erc@~cIp}MjyUzuC|{O`lGp~Qhn@|rc@~mS|eg@vtZzi_@hqL|uSpkOrqHldHhkHl|Kjk[bgLdxItqa@jtDjiPbbDhwQryQlou@beVh|LnrJw}@~yRdk`@hhsAf~RtwSnbRblZp|CtgZfs]radA~~Bf_[zvArjTrcFfjNtzb@xgWziUtsN|af@tp\\blEluFpuFmsDn|FaoCdwCqlB~hFb|D|nMthQl_FfvFsxA|tYl|AnwP_Fzca@zbApjr@x]xP"
arr = a.replace(/\\/g,"\\\\").split("");
console.log(arr.length); //1284 
```

所以用这个替换你的ajax调用的“成功”位：

```
success : function(result) {
   var polyline = result.polyline;

    var arr = polyline.replace(/\\/g,"\\\\").split("");
    var k = arr.length; //1284
} 
```

输出不同长度的原因是因为您`"\"`的字符串中有反斜杠 ( ) 字符。这些通常用于转义特殊字符，并且需要在从字符串构建数组之前进行转义。
替换是用 完成的`.replace(/\\/g,"\\\\")`，将所有单反斜杠 ( `"\"`) 替换为双引号 ( `"\\"`)。这导致数组返回 1284 的长度，这实际上是正确的：

```
console.log(arr);
==> [<...> "G", "f", "}", "\", "\", "|", "a", "A", <...>]
//Representing:
"Gf}\\|aA"; 
```

# php - 缩放 HTML 表格以适应 TCPDF 中的 PDF 页面

> ID：13621363
> 
> 赞同：7
> 
> 时间：2012-11-29T08:10:18.630
> 
> 标签：php, tcpdf

是否可以使用 TCPDF 将 HTML 表格呈现为 PDF 并对其进行缩放以适应页面？我的表中有很多列。是否可以缩小或缩小它以使其适合？

![被 PDF 页面边缘截断的彩色表格](../Images/d96c9745e770fb1c790ffc13ad468a0d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:30:31.863

TCPDF 允许您编写 HTML。这样，您的表结构就无关紧要了。

例子：

```
$tbl = <<<EOD
<table border="1">
<tr>
<th rowspan="3">Left column</th>
<th colspan="5">Heading Column Span 5</th>
<th colspan="9">Heading Column Span 9</th>
</tr>
<tr>
<th rowspan="2">Rowspan 2<br />This is some text that fills the table cell.</th>
<th colspan="2">span 2</th>
<th colspan="2">span 2</th>
<th rowspan="2">2 rows</th>
<th colspan="8">Colspan 8</th>
</tr>
<tr>
<th>1a</th>
<th>2a</th>
<th>1b</th>
<th>2b</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</table>
EOD;

$pdf->writeHTML($tbl, true, false, false, false, ''); 
```

[查看完整的完整代码](http://www.tcpdf.org/examples/example_048.phps)| [请参阅 PDF 输出](http://www.tcpdf.org/examples/example_048.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T09:28:24.317

发送页面尺寸以避免这种情况。像这样使用宽度和高度设置数组变量。

```
$pageDimension = array('500,300'); //width,height 
```

在您使用此预定义的 TCPDF 变量 ( `PDF_PAGE_FORMAT`)的位置替换此数组值

替换`PDF_PAGE_FORMAT`为`$pageDimension`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T18:53:49.860

您不必为表格提供自定义列宽以获得所需的结果，但根据您的内容会有很多包装。我认为更好的方法是选择不同的页面类型，如 A3 而不是 A4 并横向放置。

# crystal-reports - 从 Crystal Reports 的报表中排除具有特定项目的订单

> ID：13621365
> 
> 赞同：0
> 
> 时间：2012-11-29T08:10:21.053
> 
> 标签：crystal-reports

我正在构建一个计算订单处理时间的报告，但我们希望从报告中排除所有包含特定项目的订单。有什么想法可以做到这一点吗？

数据库的（相关部分）非常简单。

*   包含订单 ID、客户 ID、下订单时间、订单发货时间等的订单表。
*   有项目的表。
*   链接订单表和项目表的表。（订单项）

链接订单和订单项，然后排除特定项目仍然计算和处理包含该项目的订单，所以我必须找出一种基于 order_id 排除的方法。

使用 SQL，我可以通过一个简单的查询获得要排除的订单列表：

```
SELECT DISTINCT order_id FROM orderitems WHERE item_id = 'Excluded item ID' 
```

但是如何在 Crystal Reports 中使用此记录选择？我尝试将其作为 SQL 命令输入，并将其与其余报告表取消链接，然后在记录选择中使用

```
not ({orders.order_id} in [{ordersToBeExcluded.order_id}]) 
```

但这并没有给出正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:09:48.247

一些选项浮现在脑海中 - 按优先顺序排列：

1.  在 SQL 中完成工作。使用视图向 Crystal 显示已排除的订单的数据

2.  使用子查询创建一个 sql 表达式，例如`isnull((select top 1 1 from orderitems where orderid = X and orderitemid = Y),0)`. 然后在您的选择标准中使用它`and sqlexpression = 0`

3.  使用组选择专家来抑制 count({specialitem},{group}) > 0 的组

4.  使用仅在 count({specialitem},{group}) > 0 时计算的运行总计

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:30:31.840

您还可以使用排除 (!=) 进行完全外部联接，或尝试使用 {orders.orders_id}<>{ordersToBeExcluded.orders_id} 进行报告过滤器（报告 --> 选择公式 --> 记录）

# geolocation - Windows 上 Web 应用程序中的离线地图。从 .osm.pbf 文件中提取数据

> ID：13621366
> 
> 赞同：0
> 
> 时间：2012-11-29T08:10:23.940
> 
> 标签：geolocation, maps, location, openstreetmap

我们正在尝试在我们的 Web 应用程序中显示离线地图。我的基本用法是在 GUI 上输入纬度/经度并显示点的位置。

> 此外，一旦我找到一个点，我想显示一些关于该点的自定义信息。这可以使用 JavaScript 轻松插入。

然而离线地图是我印象深刻的地方。经过一番研究后，我以以下形式下载了我感兴趣的地图区域

> .osm.pbf

完成此操作后，我完全不知道如何现在读取数据并将其显示在 Web 应用程序内的 GUI 上。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:57:45.187

osm.pbf 格式用于 OSM 中的原始数据。它不包含瓷砖/图像。在应用程序中，您通常从在线服务器获取图块。

如果您想让切片离线，那么您应该尝试自己渲染它们（基于 osm 数据）或缓存您从服务器获得的切片。要生成您自己的图块，您可以先阅读[有关离线地图的 openstreetmap wiki](http://wiki.openstreetmap.org/wiki/Offline_Openstreetmap)、[有关创建地图的问题](https://help.openstreetmap.org/questions/8279/how-to-create-map-tiles-from-openstreetmap-offline-and-display-it-on-android)和[此博](http://sk53-osm.blogspot.be/2011/08/creating-off-line-openstreetmap-tiles.html)文。要缓存它们，您可以在openstreetmap wiki（上面发布的链接）或使用[这篇文章中获得一些灵感](http://forum.openstreetmap.org/viewtopic.php?id=7443)

# python - 在 django 中查看页面时如何让用户下载文件

> ID：13621367
> 
> 赞同：0
> 
> 时间：2012-11-29T08:10:26.810
> 
> 标签：python, django, file

我正在制作视图以像这样在我的视图中列出数据

```
class DownloadView(ListView):
    template_name = 'mytemplate.html' 
```

现在在我的那个视图中，我希望当页面加载时我在那个视图中生成一个 pdf 文件（我可以这样做），然后它应该提示用户保存文件选项。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:32:10.517

查看[django 文档](https://docs.djangoproject.com/en/dev/howto/outputting-pdf/#write-your-view)，它显示填充`response['Content-Disposition']`with `'attachment; filename="somefilename.pdf"'`，但我认为以下可能有效，如果您已将 pdf 文件数据读入`pdf_data`.

```
from django.http import HttpResponse

def serve_pdf_view(request):
    pdf_data = magically_create_pdf()
    return HttpResponse(pdf_data, content_type='application/pdf') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:36:21.957

我不建议在请求期间生成 PDF 或使用 Django 提供静态文件。

最好的办法是将所有 PDF 保存到一个文件夹并使用 Apache 或 Nginx 来提供它们并将内容类型标头设置为 application/octet-stream 以指示要保存响应。

- 编辑 -

我相信正确的解决方案是动态生成 PDF，但使用任务队列而不是在请求期间执行。如果您需要对请求 PDF 的用户进行身份验证和授权，请在 Django 中进行，但使用 X-Accel (nginx)、X-Sendfile (apache) - 或等效的 - 告诉您的网络服务器提供实际文件。

Django 不打算提供静态文件。引用 django 文档，“仅仅因为它可以，并不意味着它应该”。

在请求期间生成 PDF 不是一个好主意，因为它使用户等待，请求可以并且将会超时，长时间运行的请求会占用您的服务器，不耐烦的用户会（反复）刷新，最后，这是一个 DOS 攻击面。

# objective-c - 在 UIStoryboard 中分配初始化对象

> ID：13621369
> 
> 赞同：1
> 
> 时间：2012-11-29T08:10:40.780
> 
> 标签：objective-c, ios, interface-builder, uistoryboard

考虑在情节提要文件中有一个对象链接到 的情况`IBOutlet`，如下所示。

```
@property (nonatomic, strong) IBOutlet UIImageView *imageView; 
```

留给自己的设备，`ViewController`它将愉快地加载并在正确的框架内显示正确的图像，等等，如 Interface Builder 中所确定的。但是，如果将以下代码添加到 View Controller 的`viewDidLoad`方法中，则会获得（显然）相同的结果。

```
- (void)viewDidLoad {
    _imageView = [[UIImageView alloc] init];
    //...
} 
```

这是否意味着程序化的分配初始化`IBOutlets`是完全可选的？还是添加这条线会产生稍微不同的结果？

我之所以问是因为我一直在实现中添加 alloc-init，然后在我最新的项目中我忘记了它，令我惊讶的是，它仍然按预期工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T08:21:58.907

故事板或 xib 文件是其中包含的对象的序列化。加载故事板时，所有对象都被实例化（使用`initWithCoder:`，因为我们正在反序列化它们）。这与 allo/init 完成相同的工作，除了设置在 xib 中定义的对象的所有属性。

xib 包含有关您的图像视图的足够信息以完全创建它。如果您随后分配/初始化一个新的图像视图并将其分配给用于出口的变量，那么您只是替换了从情节提要创建的对象，这是毫无意义的，因为您的出口现在没有指向屏幕。

总之- alloc/init 每个出口都不是*可选*的，这是*错误*的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:28:20.103

当您将对象添加到 NIB 时，对象的生命周期完全由 UIViewController（或子类）和 ARC 引用控制，默认情况下它很弱，因为 ViewController 将在加载时正确处理对象的分配、初始化和释放视图，所以您在那里所做的是将 ARC 引用更改为强，因此对象不会在您引用它后立即释放，它会按照您的尝试工作，但理论上您将以在 Interface Builder 中创建的对象结束，并且您刚刚在其中创建的那个，如果您没有设置任何框架或添加到任何视图并且您没有在对象 ARC 后面进行任何引用，则会释放它，您将以您创建的图像视图结束界面生成器，但是当您将 _imageView 引用到您刚刚创建的新 [[UIImageView alloc] init] 时，没有任何指向它的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T08:19:49.733

如果您使用的是 Xcode 4.4，它将自动为您合成属性。这可能是你正在经历的？[参考](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T08:58:53.400

故事板中对象的分配/初始化基本上是一个错误。

加载视图时，所有子视图将被初始化并自动加载。如果再次初始化它，将创建另一个实例，并且该对象的前一个实例将未使用。

事实上，为了使最近初始化的对象实例能够正常工作，您必须将该实例（在您的 UIImageView 实例中）添加为子视图。

# charts - 以编程方式显示 Highstocks 图例

> ID：13621370
> 
> 赞同：1
> 
> 时间：2012-11-29T08:10:40.830
> 
> 标签：charts, highcharts

使用 Highstocks 1.2.4。

通过配置启用整体图例，同时启用所有系列的 showInLegend 选项。所以图例不显示播放默认罚款....如何通过单击按钮启用/显示图例？

```
chart.options.legend.enabled = true
chart.redraw()
chart.legend.render() 
```

没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:36:21.590

我发现的最好方法：

$("#remove").click(function() {

```
item.options.showInLegend = false;
item.legendItem = null;
chart.legend.destroyItem(item);
chart.legend.render(); 
```

});

阅读完整的例子

[http://jsfiddle.net/jugal/MtwGc/](http://jsfiddle.net/jugal/MtwGc/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T13:04:56.813

你可以使用这个结构

```
$('#btn').click(function() {
            chart.options.legend.enabled = true;
            chart.options.legend = new Highcharts.Legend(chart);
            chart.redraw();
        }); 
```

[http://jsfiddle.net/grNfK/1/](http://jsfiddle.net/grNfK/1/)

# android - 返回上一个活动时android崩溃

> ID：13621372
> 
> 赞同：1
> 
> 时间：2012-11-29T08:10:45.180
> 
> 标签：android, android-activity, back

我已经修改了“CameraTestActivity”，所以当它扫描二维码时，它将进入下一个活动。但每次我按下返回按钮返回“CameraTestActivity”时。应用程序将崩溃。

我怀疑是因为 onPuase 会 releaseCamera() 所以当它回来时找不到对象。如果我不释放相机，那么相机应用程序将被锁定。

所以任何人都可以教我如何设计活动流程？

```
public class CameraTestActivity extends Activity

private Camera mCamera;
private CameraPreview mPreview;
private Handler autoFocusHandler;
private boolean barcodeScanned = false;
private boolean previewing = true;

TextView scanText;
Button scanButton;
ImageScanner scanner;
Context tx;
static Intent anotherActivityIntent;

static {
    System.loadLibrary("iconv");
} 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    autoFocusHandler = new Handler();
    mCamera = getCameraInstance();

    tx = this.getApplicationContext();
    /* Instance barcode scanner */
    scanner = new ImageScanner();
    scanner.setConfig(0, Config.X_DENSITY, 3);
    scanner.setConfig(0, Config.Y_DENSITY, 3);

    mPreview = new CameraPreview(this, mCamera, previewCb, autoFocusCB);
    FrameLayout preview = (FrameLayout)findViewById(R.id.cameraPreview);
    preview.addView(mPreview);

    scanText = (TextView)findViewById(R.id.scanText);

    scanButton = (Button)findViewById(R.id.ScanButton);

    scanButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (barcodeScanned) {
                    barcodeScanned = false;
                    scanText.setText("Scanning...");
                    mCamera.setPreviewCallback(previewCb);
                    mCamera.startPreview();
                    previewing = true;
                    mCamera.autoFocus(autoFocusCB);
                }
            }
        });
}

public void onBackPressed() {
    super.onBackPressed();
    releaseCamera();
}

public void onPause() {
    super.onPause();
    releaseCamera();
}

public void onResume() {
    super.onResume();       
}

/** A safe way to get an instance of the Camera object. */
public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open();
    } catch (Exception e){
    }
    return c;
}

private void releaseCamera() {
    if (mCamera != null) {
        previewing = false;
        mCamera.setPreviewCallback(null);
        mCamera.release();
        mCamera = null;
    }
}

private Runnable doAutoFocus = new Runnable() {
        public void run() {
            if (previewing)
                mCamera.autoFocus(autoFocusCB);
        }
    };

PreviewCallback previewCb = new PreviewCallback() {
        public void onPreviewFrame(byte[] data, Camera camera) {
            Camera.Parameters parameters = camera.getParameters();
            Size size = parameters.getPreviewSize();

            Image barcode = new Image(size.width, size.height, "Y800");
            barcode.setData(data);

            int result = scanner.scanImage(barcode);
            String fileName = "";
            if (result != 0) {
                previewing = false;
                mCamera.setPreviewCallback(null);
                mCamera.stopPreview();

                SymbolSet syms = scanner.getResults();
                for (Symbol sym : syms) {
                    scanText.setText("barcode result " + sym.getData());
                    fileName += sym.getData();
                    barcodeScanned = true;
                }

                anotherActivityIntent = new Intent(tx, TakePhoto.class);
                anotherActivityIntent.putExtra("fileName",fileName +".jpg");                    

                startActivity(anotherActivityIntent);
            }
        }
    };

// Mimic continuous auto-focusing
AutoFocusCallback autoFocusCB = new AutoFocusCallback() {
        public void onAutoFocus(boolean success, Camera camera) {
            autoFocusHandler.postDelayed(doAutoFocus, 1000);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:33:02.360

如果您释放里面的摄像头，`onPause()`您必须在里面重新连接到摄像头`onResume()`。

所以：

```
 public void onResume() {
     super.onResume();      
     mCamera = getCameraInstance();
 } 
```

然后您可以从`onCreate`

# php - regexp php，我需要替换模板的所有单词

> ID：13621376
> 
> 赞同：3
> 
> 时间：2012-11-29T08:10:58.243
> 
> 标签：php, regex

我需要替换模板的所有单词，但是这些单词包含在 {} 和 [] 中。请帮忙

```
$content = '<div class="header header">{header} {header2} [header][/header]</div>';
$content = preg_replace("/(\s|\"|\')(^$)header(^$)(\s|\"|\')/is",'new_class',$content); 
```

**输出**应如下：`<div class="new_class new_class">{header} {header2} [header][/header]</div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:27:53.080

```
$result = preg_replace('/header(?![^{}[\]]*[\]}])/', 'new_class', $subject); 
```

仅当下一个括号或大括号不是右括号或大括号时才替换`header`为。`new_class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:19:55.610

这应该工作

```
$content = '<div class="header header">{header} {header2} [header][/header]</div>';
$content = preg_replace("/([\\s\"'])header(?=[\\s\"'])/is",'$1new_class',$content); 
```

`"'`这将替换由空格或空格包围的所有“标题” 。

# sqlplus - SQLPLUS 表查询问题

> ID：13621384
> 
> 赞同：0
> 
> 时间：2012-11-29T08:11:34.633
> 
> 标签：sqlplus

我在 SQLPLUS 中的一个查询有问题。

我被要求显示满足以下限制的所有供应商的 SuppCode、SuppName 和 PostCode： 他们提供的每个库存商品的价格都高于所有库存商品的平均价格。

我正在使用的三张表是；供应商、库存和 SupplyItems。

供应商表如下所示：

```
SUPPCODE SUPPNAME STREET TOWN COUNTRY POSTCODE TELNO FAXNO 
```

有 8 个单独的样本数据（8 个供应商），并且没有空字段。

股票表如下所示：

```
ITEMNO STORECODE ITEMDESC QUANTITY UNITS REORDER PRICE SUPPCODE 
```

有 40 个单独的样本数据（40 个库存项目），并且没有空字段。

SupplyItems 表如下所示：

```
SUPPCODE CATNO STOCKNO PRICE 
```

有 60 个单独的样本数据（60 个供应项目），并且没有空字段。

我写了以下查询：

```
select distinct SU.SuppCode, Su.SuppName, PostCode
from Suppliers SU
LEFT JOIN SupplyItems SI ON SU.SuppCode = SI.SuppCode
where Price >
(select AVG(Quantity) from Stocks ST
where SI.StockNo = ST.StockNo); 
```

我得到以下输出（4个值）：

```
SUPPCODE SUPPNAME POSTCODE
S6       BSS LTD. B10 8SS
S2       ITX LTD. IT5 3TX
S3       FFG LTD. FY9 6FG
S4       OMM LTD. OM5 4MM 
```

现在，我已经知道输出应该包含 2 或 3 条记录，所以我的查询是错误的，尽管我不明白为什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:25:19.670

这个：

```
where Price >
(select AVG(Quantity) from Stocks ST 
```

看起来不对——不应该是这样吗

```
AVG(price) 
```

?

**编辑：**还有，

```
select distinct SU.SuppCode, Su.SuppName, PostCode
from Suppliers SU
LEFT JOIN SupplyItems SI ON SU.SuppCode = SI.SuppCode
where Price > ... 
```

可能不符合您的要求 - 这将返回所有提供*至少一件*价格高于平均水平的商品的供应商；要获得*仅*提供价格高于平均水平的商品的供应商，您必须使用不同的方法，例如（未经测试）

```
select distinct SU.SuppCode, Su.SuppName, PostCode
from Suppliers SU
where not exists (
  select null from SupplyItems si 
  where su.SuppCode = si.SuppCode
  and su.price <= (
      select AVG(price) from Stocks ST
      where SI.StockNo = ST.StockNo)
) 
```

# c - 什么是 C 中的编译指示对齐？

> ID：13621386
> 
> 赞同：2
> 
> 时间：2012-11-29T08:11:41.527
> 
> 标签：c, memory-management, operating-system

最近在查看代码时，我发现#pragma DATA_ALIGN(var, 4*1024)。var 是一个大约 20k 长的结构变量。我在互联网上搜索了这个，找不到任何有用的东西。任何人都可以提供链接或对此有所了解吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T08:12:52.560

这意味着`var`结构将是页面对齐的（大多数计算机体系结构中的标准页面大小为 4K=4096 字节），即它将存储在地址可被 4096 整除的位置。这种方法提高了性能，因为操作系统以块的形式获取数据`paged memory`通过执行所谓的`page fault`. 每个`page fault`都是处理器和 I/O 系统的额外工作。最小化数量`page faults`是提高性能的重要手段。如果数据不是页面对齐的，访问它可能需要一个额外的`page fault`，而只需要一部分带来的数据。

**编辑**：虽然在大多数情况下对齐到 4K 是由于内存管理，但可能还有其他对齐原因，主要是硬件限制 - 正如@CodePainters 正确指出的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:22:56.867

#pragma 指令为每个编译器提供了一种方法来提供特定于机器和操作系统的功能，同时保持与 C 和 C++ 语言的整体兼容性。根据定义，编译指示是特定于机器或操作系统的，并且通常对于每个编译器都不同。

我认为[http://www.songho.ca/misc/alignment/dataalign.html](http://www.songho.ca/misc/alignment/dataalign.html)将有助于理解数据对齐。&正如你所说的 var 是一个大小约为 20k 的结构，那么分配给这个结构的内存将被对齐为页面对齐 &@icepack 的答案已经解释过了。

# java - 如何使用盐解密 SHA-512 哈希码？

> ID：13621391
> 
> 赞同：5
> 
> 时间：2012-11-29T08:12:09.767
> 
> 标签：java, encryption

我已经使用 sha-512 Algo 及其 salt 对数据进行了加密，我想解密该数据，请任何人告诉我如何使用 Java 对其进行解码。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-29T08:23:19.613

SHA-512 是一种[加密散列函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。加密散列函数是**一种方法**- 您可以计算数据块的散列，但是当您只有散列时无法取回原始数据。因此，您无法解密哈希码以取回原始数据。

密码散列函数通常用于在数据库中存储密码。要检查用户输入的密码是否正确，您可能首先想到的是“好的，所以我必须解密数据库中的密码并检查它是否与用户输入的密码相同”。然而，这不是你如何做到这一点的。

相反，您所做的是对用户输入的密码进行哈希处理，并将该哈希值与存储在数据库中的哈希值进行比较。如果哈希值相同，则用户输入了正确的密码。您不需要“解密”哈希。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T08:22:32.963

SHa 512 不是加密。散列算法被设计为**仅**用于验证数据完整性的一种方法。

简而言之：不，您**不能**“解密”任何哈希算法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T08:23:01.747

您可以使用 MessageDigest 类让 Java 计算散列。

```
String plainText = "text" + "salt";

MessageDigest messageDigest = MessageDigest.getInstance("SHA-512");
byte[] hash = messageDigest.digest( plainText.getBytes() );

System.out.println("Result: " + new String(hash)); 
```

如果您知道可能的纯文本值，则可以找到匹配的哈希值。但是，如果您对原始数据一无所知，那么暴力破解基本上会持续到世界末日。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-09T11:09:59.693

**如何实现 SHA512 而不是 MD5**

**这里是MD5代码**

```
public class RijndaelSimple
{
    public static string Decrypt
    (
        string cipherText,
        string passPhrase,
        string saltValue,
        string hashAlgorithm,
        int passwordIterations,
        string initVector,
        int keySize
    )
    {

        byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
        byte[] saltValueBytes = Encoding.ASCII.GetBytes(saltValue);

        byte[] cipherTextBytes = Convert.FromBase64String(cipherText);

        PasswordDeriveBytes password = new PasswordDeriveBytes
        (
            passPhrase,
            saltValueBytes,
            hashAlgorithm,
            passwordIterations
        );

        byte[] keyBytes = password.GetBytes(keySize / 8);
        RijndaelManaged symmetricKey = new RijndaelManaged();

        symmetricKey.Mode = CipherMode.CBC;

        ICryptoTransform decryptor = symmetricKey.CreateDecryptor
        (
            keyBytes,
            initVectorBytes
        );

        MemoryStream memoryStream = new MemoryStream(cipherTextBytes);

        CryptoStream cryptoStream = new CryptoStream
        (
            memoryStream,
            decryptor,
            CryptoStreamMode.Read
        );

        byte[] plainTextBytes = new byte[cipherTextBytes.Length];

        int decryptedByteCount = cryptoStream.Read
        (
            plainTextBytes,
            0,
            plainTextBytes.Length
        );

        memoryStream.Close();
        cryptoStream.Close();

        string plainText = Encoding.UTF8.GetString
        (
            plainTextBytes,
            0,
            decryptedByteCount
        );

        return plainText;
    }
}

public class RijndaelSimpleTest
{

    [STAThread]
    static void Main(string[] args)
    {
        string plainText = "Hello, World!";    // original plaintext

        string passPhrase = "Pas5pr@se";        // can be any string
        string saltValue = "kplcs@1tValue";        // can be any string
        string hashAlgorithm = "SHA1";             // can be "MD5"
        int passwordIterations = 2;               // can be any number
        string initVector = "@1B2c3D4e5F6g7H8"; // must be 16 bytes
        int keySize = 256;                // can be 192 or 128

        Console.WriteLine(String.Format("Plaintext : {0}", plainText));

        string cipherText = RijndaelSimple.Encrypt
        (
            plainText,
            passPhrase,
            saltValue,
            hashAlgorithm,
            passwordIterations,
            initVector,
            keySize
        );

        Console.WriteLine(String.Format("Encrypted : {0}", cipherText));

        plainText = RijndaelSimple.Decrypt
        (
            cipherText,
            passPhrase,
            saltValue,
            hashAlgorithm,
            passwordIterations,
            initVector,
            keySize
        );

        Console.WriteLine(String.Format("Decrypted : {0}", plainText));}} 
```

# ruby - 在 Selenium Ruby Webdriver 中调用 autoit exe 文件

> ID：13621393
> 
> 赞同：0
> 
> 时间：2012-11-29T08:12:31.557
> 
> 标签：ruby, selenium, webdriver, autoit

请帮助指导我如何在 Selenium Ruby Webdriver 脚本中运行由 AutoIT 工具生成的 .exe 文件？

我的场景是我需要通过单击 Flash 按钮上传文件，然后在“打开”窗口弹出窗口中选择一个文件。但是，Selenium 无法与弹出窗口交互，因此我使用 AutoIT 工具填充文件路径并生成为 .exe 文件。我想做的是，现在我希望 Selenium 在显示“打开”窗口弹出窗口后运行由 AutoIT 工具生成的 exe 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:12:24.920

试试这个 ：

```
f = IO.popen("path to your autoit exe")
puts f.readlines 
```

# android - 检测 getView() 调用已完成。

> ID：13621400
> 
> 赞同：4
> 
> 时间：2012-11-29T08:12:54.383
> 
> 标签：android, adapter

我一直在搜索最后一个 getView() 完成执行时调用的任何回调方法，或者我可能会说 AdapterView 中的所有项目都已绘制/放置。

我发现没有任何特定的 android api 方法可以作为回调方法。

请大家帮我找到一种方法，我们如何检测对特定数据源列表的最后一个 getView() 的调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:30:07.300

没有最后一个 getView()

`getView`当您在列表中滚动时，将调用每个可见的项目。即使它已经出现在屏幕上。

因此，如果您想知道 a 中的每个项目`ListView`是否可见，您必须自己计算:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:36:43.547

这是因为它总是被调用。每次`getView()`滚动`ListView`. 当一个项目被弹出`ListView`（对用户不可见）时，它作为一个回收视图（`convertView`）传递`getView()`给它，以填充它将成为将从滚动的另一侧弹出的新项目的数据。您也无法预测此操作，因为屏幕中可见项目的数量`ListView`会因屏幕大小而异。您可以覆盖`getView()`并检查您需要在什么时候触发您的操作。

# asp.net-mvc - 登录后出现错误 404.0。Asp.Net MVC 和 IIS 7.5

> ID：13621401
> 
> 赞同：1
> 
> 时间：2012-11-29T08:13:02.320
> 
> 标签：asp.net-mvc, iis, iis-7, asp.net-mvc-4, iis-7.5

我有一个在 IIS 7.5 上运行的 ASP.NET MVC 应用程序。已启用经过身份验证的表单

我可以访问登录页面。（这意味着路由没问题）但是当我登录应用程序时应该发送一个帖子数据`http://localhost/tgpwebged/Account/Login`来验证用户。

问题是我的应用程序正在寻找 /Account/Login `http://localhost/Account/Login`（这不是路径）。

我正在尝试改变这种行为但没有成功。

这是我的**route.config**

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Account", action = "Login", id = UrlParameter.Optional } 
```

**网络配置**

```
<authentication mode="Forms">
  <forms loginUrl="Account/Login"/>
</authentication> 
```

**看法**

```
<form method="post" action="/Account/Login"> 
```

IIS 也设置为接受匿名登录，以便用户能够访问登录页面。

这是我收到的错误消息：

TTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。

**一些详细信息：**

请求的 URL `http://localhost:8081/Account/Login`（正确路径`http://localhost:8081/tgpwebged/Account/Login`：） 物理路径 S:\Projects\Account\Login（应为 S:\Projects\tgpwebged\Account\Login） 登录方法 匿名 登录用户 匿名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:18:30.640

POST 将指向错误的 URL，因为这是您在视图中提到的。看

```
<form method="post" action="/Account/Login"> 
```

这将始终发布到`<host name>/Account/Login`

尝试给出相对路径（或使用 ResolveUrl 方法替换绝对路径） - 例如，在 aspx 视图中，您可以使用

```
<form method="post" action='<%= this.ResolveUrl("~/Account/Login") %>' > 
```

在剃刀（cshtml）视图中，您可以尝试（未经测试）

```
<form method="post" action='@Url.Content("~/Account/Login")' > 
```

# android - 获取视图的当前背景 id

> ID：13621407
> 
> 赞同：6
> 
> 时间：2012-11-29T08:13:34.303
> 
> 标签：android, android-layout, drawable

我有一个在drawable中定义背景的布局，我想在某些条件下将其更改为另一个。如何获取当前背景的标识符以知道它是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-08-30T04:51:36.713

这可能是一个非常古老的问题，但以防万一人们仍在寻找它：

```
if(yourView.getBackground().getConstantState().equals(
    getResources().getDrawable(R.drawable.yourdrawable).getConstantState()){

  //do something if this is the correct drawable
} 
```

提醒检查是否为空。在某些情况下，`yourView.getBackground()`如果源是矢量可绘制的，则可以返回 null。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T08:20:26.467

嗨，你可以试试这个例子，

```
btnNew =(Button)findViewById(R.id.newButton); 

 // compare newlist
if(newButton.getBackground()!=(findViewById(R.id.imgAdd)).getBackground()) 
{ 
   btnNew.setBackgroundResource(R.drawable.imgDelete); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T08:25:43.770

你可以通过这种方式尝试。

将 id 分配给要根据条件更改背景的布局。并这样做

```
 linear1 = (LinearLayout) findViewById(R.id.bg_l_l);

        if(condition==true)
        {
            linear1.setBackgroundDrawable(R.drawable.sample_thumb_0);
        }
        else if (condition2==true)
        {
            linear1.setBackgroundDrawable(R.drawable.sample_thumb_1);
        }
        else
        {
            linear1.setBackgroundDrawable(R.drawable.sample_thumb_2);
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T10:46:33.113

`Drawable`你可以简单地得到整个`Drawable beforeClickDrawalbe=view.getBackground();`

并通过执行以下操作更改视图的背景：`view.setBackgroundDrawable(getResources().getDrawable(R.drawable.YOUR_DRAWABLE));`

然后，如果您想将其设置回初始背景，则不需要 id，因为您拥有整个 Drawable，因此请执行以下操作： `view.setBackgroundDrawable(beforeClickDrawalbe));`

就这样！

# iphone - 访问 ACAccountStore 时出现奇怪的崩溃

> ID：13621408
> 
> 赞同：0
> 
> 时间：2012-11-29T08:13:38.597
> 
> 标签：iphone, objective-c, ios6

我刚刚重构了我的代码，该代码使用 Social Framework 发布到社交网络（以前的代码在相同的 fmw 上运行良好！）。现在我收到如下错误：

`[ACAccountStore requestAccessToAccountsWithType:options:completion:]: unrecognized selector sent to instance`

我已经记录了帐户存储对象并且它存在 -`store is: <ACAccountStore: 0x8c2cec0>`

它崩溃的代码：

```
NSLog(@"[SocialSharingManager sharedInstance].accountStore is:
 %@", [SocialSharingManager sharedInstance].accountStore);   
ACAccountType * facebookAccountType = [[SocialSharingManager sharedInstance].accountStore
 accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
NSDictionary * options = @{ACFacebookAppIdKey : kFacebookAppId, ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceEveryone};
[[SocialSharingManager sharedInstance].accountStore
 requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *error) {

            if (granted) {...} 
```

第二种错误：

![在此处输入图像描述](../Images/dd9d4ee5456f8836611ad187686db274.png)

当我尝试访问 FB 或 Twitter 帐户时会出现这些错误。有什么建议么？PS-所有事情都在主线程上进行-您可以在屏幕截图上看到它

编辑：不知道为什么图片这么小，所以请使用缩放

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:16:35.127

这不好笑 = ) 我不小心将方案更改为 iPhone Simulator 5.0，所以崩溃的原因很明显 - 社交框架出现在 iOS 6.0 中。我很困惑，因为项目编译时没有任何警告。

# javascript - 如何制作一个选择下拉菜单以根据当前时间选择一个选项值

> ID：13621409
> 
> 赞同：2
> 
> 时间：2012-11-29T08:13:39.423
> 
> 标签：javascript, jquery

我有一个选择下拉列表，时间间隔为 30 分钟，例如

```
11:00 AM, 11:30 AM, 12:00 PM, 12:30 PM, 1:00 PM 
```

从上午 0:00 开始，到晚上 11:30 结束

```
<select id='time'>
  <option value="11:30 AM">11:30 AM</option>
  <option value="12:00 PM">12:00 PM</option>
  <option value="12:30 PM">12:30 PM</option>
  <option value="1:00 PM">1:00 PM</option>
 <option value="1:30 PM">1:30 PM</option>
 <option value="2:00 PM">2:00 PM</option>
 <option value="2:30 PM">2:30 PM</option>
 <option value="3:00 PM">3:00 PM</option>
 <option value="3:30 PM">3:30 PM</option>
 <option value="4:00 PM">4:00 PM</option>
 <option value="4:30 PM">4:30 PM</option>
</select>

$(document).ready(function(){

  $('#time').val(.now()); // this wouldnt work it gives the current time which may be between 30 min 

}); 
```

我希望此选择下拉菜单默认为根据当前时间四舍五入到最近的较高时间。

例如。如果当前时间为上午 10:46，则所选值应为上午 11:00，如果当前时间为上午 10:31，则还应默认为上午 11:00。

有关使用 jquery 或普通 javascript 实现此目的的任何指针。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:28:38.573

您可以使用该`Math.round`函数将值获取到最接近的半小时：

```
Math.round(Date.now()/(30*60*1000))*(30*60*1000)); 
```

从中构造一个日期对象并获取时间。

```
var date = new Date(Math.round(Date.now() / (30 * 60 * 1000)) * (30 * 60 * 1000));
$('#time').val(date.getHours()%12 + ":" + ("0"+date.getMinutes()).slice(-2) + " " + (date.getHours() >= 12 ? "PM" : "AM")); 
```

这是一个演示：http: [//jsfiddle.net/GsR6v/9/](http://jsfiddle.net/GsR6v/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:42:09.757

您可以尝试对 Date 的值进行四舍五入，如下所示：

```
var date = new Date(Math.round(Date.now()/(30*60*1000))*(30*60*1000)); 
```

然后使用它来设置日期：

```
$("select option").filter(function() {
  //may want to use $.trim in here
  return $(this).text() == <YourDate>; 
}).attr('selected', true);​ 
```

在我的小提琴上试试这个：http: [//jsfiddle.net/mC869/](http://jsfiddle.net/mC869/)

# maven - 如何控制 Maven 工件的 Group/Artifact/Version 坐标？

> ID：13621415
> 
> 赞同：2
> 
> 时间：2012-11-29T08:13:55.103
> 
> 标签：maven, deployment, maven-assembly-plugin, maven-deploy-plugin

在我的 Maven 构建结束时，为此目的而存在的一个模块从各种其他模块收集工件，并使用 Assembly 插件将它们压缩到存档中。完成后，它会使用 Deploy 插件将它们部署到 Nexus。

由于历史原因，这个打包模块被称为`bundle`，所以工件最终被称为`mygroup:bundle`并因此被归类在 Nexus 中。

我宁愿让它们出现在 下`mygroup:myprojectname`，但我不知道如何将它们部署到该位置。我尝试配置 Deploy 插件的`deploy-file`目标以更改坐标，但没有成功。作为一个额外的复杂因素，项目的主要代码模块已经被调用`myprojectname`，因此该组在部署时不是空的。不过，多亏了分类器和类型，什么都不需要被覆盖。

没有重命名模块，我可以以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T10:24:15.013

部署插件具有所有必要的功能：
您可以在其配置中设置 G/A/V 坐标，并将任意数量的附加工件部署到您想要的任何坐标。但是，它不会自动部署到您`distributionManagement`部分中给出的存储库 URL。

为了避免重复，我最后求助于 GMaven 插件，用它来检查项目版本（是否`-SNAPSHOT`以`distributionManagement`.

这是两个插件的配置：

```
 <plugin>
            <groupId>org.codehaus.groovy.maven</groupId>
            <artifactId>gmaven-plugin</artifactId>
            <executions>
                <execution>
                    <id>choose-target-repository</id>
                    <phase>initialize</phase>
                    <goals>
                        <goal>execute</goal>
                    </goals>
                    <configuration>
                        <source>
                            if (project.version.endsWith("-SNAPSHOT")){
                              project.properties.targetrepository = project.distributionManagement.snapshotRepository.url;
                            }
                            else {
                              project.properties.targetrepository = project.distributionManagement.repository.url;
                            }
                        </source>
                    </configuration>
                </execution>
            </executions> 
```

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-deploy-plugin</artifactId>
            <version>2.7</version>
            <configuration>
                <skip>true</skip>
            </configuration>
            <executions>
                <execution>
                    <id>deploy-myclassifier</id>
                    <phase>deploy</phase>
                    <goals>
                        <goal>deploy-file</goal>
                    </goals>
                    <configuration>
                        <file>
                            ${project.build.directory}/${project.artifactId}-${project.version}-myclassifier.zip
                        </file>
                        <groupId>${project.groupId}</groupId>
                        <artifactId>myprojectname</artifactId>
                        <version>${project.version}</version>
                        <classifier>myclassifier</classifier>
                        <repositoryId>nexus</repositoryId>
                        <url>http://url-to-nexus</url>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-06T13:59:43.973

在 maven-deploy-plugin 中，您可以提供存储库 url 和 id，如下所示：

```
<repositoryId>${targetrepositoryid}</repositoryId>
<url>${targetrepository}</url> 
```

因此，类似于`project.distributionManagement.repository.url`，您也可以定义`project.properties.targetrepositoryid = project.distributionManagement.snapshotRepository.id;`

# jquery - 动态添加的 div 影响容器 mouseover 和 mouseout 事件

> ID：13621417
> 
> 赞同：2
> 
> 时间：2012-11-29T08:13:58.490
> 
> 标签：jquery

这是我的代码。请查看它。让我发疯的问题是为什么如果我将鼠标移动到克隆的 div`funCudDiv`即使它位于`divContainer`. 所以，如果你将鼠标悬停在 上，`funCudDiv`你会看到所有的东西都在闪烁。

请帮我 。谢谢。

```
<!-- language: lang-js -->
<style type="text/css">
        .canSelectedNodeHover
        {
            background-color: #E8F0F5;
        }
</style>

<script language="javascript" type="text/javascript">
    $(function () {
        var foundDiv = $("#divContainer");
        foundDiv.mouseover(function () {
            var cloneDiv = $("#divRight").clone();
            cloneDiv.attr('id', 'funCudDiv');
            $("#divContainer").append(cloneDiv);
            $("#divContainer").addClass("canSelectedNodeHover");
        }).mouseout(function () {
            $("#divContainer").removeClass("canSelectedNodeHover");

            $("#funCudDiv").remove();
        });
    });
    </script>
<div id="divContainer" style=" border:1px solid black; width:400px; height:400px">
</div>

<div id="divRight" style="border:1px solid blue;width:200px; height:20px; float:right;">
</div> 
```

**编辑**

全部。如果所有的 html 元素都是提前添加的，而不是使用`clone`. 一切安好 。请注意。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:18:28.710

使用`mouseenter`和`mouseleave`事件代替，以防止在您跨越容器内的边界时触发处理程序：

```
$(function () {
    var foundDiv = $("#divContainer");
    foundDiv.mouseenter(function () {
        var cloneDiv = $("#divRight").clone();
        cloneDiv.attr('id', 'funCudDiv');
        $("#divContainer").append(cloneDiv);
        $("#divContainer").addClass("canSelectedNodeHover");
    }).mouseleave(function () {
        $("#divContainer").removeClass("canSelectedNodeHover");

        $("#funCudDiv").remove();
    });
}); 
```

这是一个演示：http: [//jsfiddle.net/cRnBx/](http://jsfiddle.net/cRnBx/)

# php - 无法从查询中获取数组

> ID：13621419
> 
> 赞同：0
> 
> 时间：2012-11-29T08:14:07.927
> 
> 标签：php, mysqli, mysqli-multi-query

我需要将查询的结果变成一个数组，并使用该数组在第二个 php mysqli 查询中从数据库中提取数据。

```
<?php
include"connection.php";
$pos = mysqli_query($not,"SELECT * FROM equipos");
$logos = array();
while($row= mysqli_fetch_assoc($pos)){
$logos[] = "<br>'".$row['abrv']."'=>"."'".$row['logo']."'";
}
$logos = implode(",", $logos);

$enjuego = mysqli_query($not,"SELECT * FROM partidos WHERE dprt='ftbls'");
while($part=mysqli_fetch_array($enjuego)){
$liga=$part['serie'];
$eq1= $part['eq1'];
$eq1s= strtoupper($eq1);
$eq2= $part['eq2'];
$eq2s= strtoupper($eq2);

echo $logos[$eq1].'<br>';
}
?> 
```

它一遍又一遍地给我同样的错误。这是我来的最近的一次，但就是行不通。有人可以告诉我我做错了什么吗？

我得到的错误是：Warning: Illegal string offset 'gua' in line 18

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:19:46.200

在这里，您将`$logos`数组变量转换为字符串类型：

```
$logos = implode(",", $logos); 
```

然后在最后你想再次访问它，就好像它是一个数组一样：

```
echo $logos[$eq1].'<br>'; 
```

这就是你得到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:24:08.723

你有一个用于 $logos 的有序数组。你不能仅仅通过 implode(",", $logos) 来内爆它，这样你就试图内爆一个逗号分隔的数组，（它应该看起来像 $logos=array("foo","bar"); 内爆为逗号分隔的数组。

$logo[] => 这应该是这样的；$logo=array("0"=>"foo", "1"=>​​"bar") 尝试转储你的数组，你会在第一个 while 循环之后看到什么是错误的 (var_dump($logo);)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:42:29.817

首先，删除内爆，因为这会将您的数组转换为字符串。

然后你试图从 $logos 数组中的表“partidos”中获取键“eq1”，它可能不存在（因为数组会喜欢这个数组（0 => 'first', 1 => 'second', 2 =>'第三'））。

您必须在“equipos”和“partidos”之间有一些共同点，可以说“abrv”与 eq1 相同，解决方案将是：

```
<?php

include"connection.php";

$pos = mysqli_query($not, "SELECT * FROM equipos");

$logos = array();
while($row = mysqli_fetch_assoc($pos)){
    $logos[$row['abrv']] = "<br>'".$row['abrv']."'=>"."'".$row['logo']."'";
}

$enjuego = mysqli_query($not, "SELECT * FROM partidos WHERE dprt='ftbls'");

while($part = mysqli_fetch_array($enjuego)){
    $liga = $part['serie'];
    $eq1 = $part['eq1'];
    $eq1s = strtoupper($eq1);
    $eq2 = $part['eq2'];
    $eq2s = strtoupper($eq2);

    echo $logos[$eq1].'<br>';
} 
```

# magento - 在 magento 中创建包含阿拉伯语主题的阿拉伯语 storeview 的最佳方法是什么？

> ID：13621431
> 
> 赞同：0
> 
> 时间：2012-11-29T08:14:58.270
> 
> 标签：magento, themes

我有 magento 网站，有两个英文和阿拉伯文的 storeviews。我为英文 storeview（默认 storeview）创建了一个主题。现在我想让阿拉伯语商店视图出现在阿拉伯语中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:51:47.510

虽然这不是这样的问题，但可以这样做：

如果您已经创建了阿拉伯语商店视图，您需要从[Magento 网站](http://www.magentocommerce.com/translations)或[Magento connect](http://www.magentocommerce.com/magento-connect/catalogsearch/result/?id=&s=1&pl=0&te=0&q=arabic&t=1&p=1)中找到阿拉伯语翻译包，下载并上传到您网站的 app/locale 文件夹中

之后，您需要进入系统 -> 配置，选择所需的商店视图并在常规选项卡下找到区域设置选项部分。接下来，从区域设置下拉菜单中选择正确的选项（第一个是语言，第二个是国家，例如，沙特阿拉伯阿拉伯语是阿拉伯语（沙特阿拉伯））。

刷新缓存后，可以通过 _store=store_code">http://yoursite.com/index.php?_store=store_code 访问商店视图。还有一个设置可以将 store_code 添加到 URL 中，例如[http://site。 com/index.php/store_code](http://site.com/index.php/store_code) . 可以在 System -> Config -> Web -> Url Options -> Add Store Code to Urls 中设置。

# android - android - 列表视图标题中的映射

> ID：13621432
> 
> 赞同：2
> 
> 时间：2012-11-29T08:14:59.860
> 
> 标签：android, header, android-listview, android-mapview

在我的应用程序中，我有一个活动，其中包含底部的图像和列表视图。以下是活动中要做的事情。

```
1\. the image view at the top of the page must be of swipe type to show other images.
2\. when the list view gets scrolled the image must get moved along with it.
3\. in the same activity i have a button, when the button is clicked the image must be switcher over to be a mapview. 
```

我所做的是，

```
1\. I have the image view and mapview in view switcher of a separate layout named as header
2\. The header layout is been added in the list view header part. 
```

现在，当列表视图滚动时，标题部分随之滚动，同样，当视图切换时，我能够在图像视图和地图视图之间切换。但是地图似乎是固定的，无法移动以查看各个点

如何在列表视图标题的地图视图内移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:22:12.990

这是一个例子，但不是解决方案。在这个例子中，我制作了一个自定义的滚动视图，它在 x 方向滚动时返回 false（表示事件尚未处理，应该传递到下一个视图）：

```
public class CustomScrollView extends ScrollView {
    private GestureDetector mGestureDetector;
    View.OnTouchListener mGestureListener;

    public CustomScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mGestureDetector = new GestureDetector(new YScrollDetector());
        setFadingEdgeLength(0);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        return super.onInterceptTouchEvent(ev) && mGestureDetector.onTouchEvent(ev);
    }

    // Return false if we're scrolling in the x direction  
    class YScrollDetector extends SimpleOnGestureListener {
        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
            if(Math.abs(distanceY) > Math.abs(distanceX)) {
                return true;
            }
            return false;
        }
    }
} 
```

您需要在视图切换器的某个区域执行类似的操作。因此，您需要修改基本的 viewswitcher 组件并制作自己的变体。

作为上述建议的替代方案，我会考虑不这样做。如果您查看使用地图的应用程序，这确实不是一种正常行为，我怀疑它会运行非常流畅或进行良好的用户交互。一般来说，地图在获得尽可能多的空间时效果最好。看看一些基本的地图应用程序：谷歌导航、谷歌地图、谷歌纬度、Yelp。

# spring - Spring 资源导入失败

> ID：13621433
> 
> 赞同：0
> 
> 时间：2012-11-29T08:15:04.100
> 
> 标签：spring, resources

我在 netbeans 的一个春季项目中遇到了一个奇怪的问题。我有一组上下文 xml 说 - jms/myjms-context.xml - 它使用属性占位符在内部加载 jms.properties，类似地使用 jdbc 上下文 xml - jdbc/myjdbc-context.xml - 它在内部使用属性加载 jdbc.properties -placeholder 并且这些上下文需要作为资源导入到我的 app-context.xml 中。

现在，如果我只导入其中一个应用程序加载，但是当我导入两个时，我在第二个导入的上下文（无论是 jms-context 还是 jdbc-context ）！！

出了什么问题？

-我正在使用 Spring 3.0 和 Spring 集成 2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:15:45.257

如果您有多个`PropertyPlaceHolderConfigurer`加载到 spring 上下文中，就像您的情况一样，您需要将其设置`ignoreUnresolvablePlaceholders`为 true 以便将加载的第一个将忽略它无法解析的任何占位符。

希望这可以帮助。

# uitableview - 尝试在 iphone 中使用自定义单元格视图关闭文本字段中的键盘？

> ID：13621434
> 
> 赞同：1
> 
> 时间：2012-11-29T08:15:21.170
> 
> 标签：uitableview, ios4, delegates, uitextfield, dismiss

我已经尝试了一些代码，但没有工作文本字段返回键盘请任何人帮忙。

我也尝试了一些链接： [如何使表格单元格中的 UITextField 成为第一响应者？](https://stackoverflow.com/questions/7661271/how-to-make-a-uitextfield-in-a-table-cell-become-first-responder) ![在此处输入图像描述](../Images/c5e5831a7d5a68ee8f32efa2d1eb9aa1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:38:39.620

确认您将创建的文本字段的委托与视图控制器绑定。并使用此委托方法：-

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

这将在按下返回键时隐藏键盘。

# mysql - 请解决这个问题 - mysql

> ID：13621439
> 
> 赞同：-4
> 
> 时间：2012-11-29T08:15:56.677
> 
> 标签：mysql

我有下表，我在其中存储问题和带有问题 ID 的多个答案，如下所示

```
table
ID Content QID
1  Q1      0
2  Q2      0
3  A1      1
4  A1      2
5  A2      1
6  A2      2 
```

在上面的示例中，Q 代表问题，A 代表答案

现在我需要结果作为问题，然后是它的答案等等，例如

我需要像第一个问题这样的输出，然后是该问题的所有答案..然后是第二个问题和该问题的所有答案...

```
1 Q1
3 A1
5 A2
2 Q2
4 A1
6 A2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:35:35.350

这是一个便宜的解决方案（用 MySQL 测试）：

```
SET @max_id = (SELECT MAX(ID) FROM `table`);
SELECT * FROM `table` ORDER BY IF(QID > 0, @max_id * QID + ID, @max_id * ID) 
```

它仅适用于一级问题/答案。因此，如果答案可以包含子问题和子答案，则此解决方案将不适合您。我确信有更好的解决方案。

如果你想在一个查询中运行它，你可以这样做：

```
SELECT * FROM `table`
ORDER BY IF(QID > 0,
  (SELECT MAX(ID) FROM `table`) * QID + ID,
  (SELECT MAX(ID) FROM `table`) * ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:40:48.397

首先，我真的认为这是存储数据的不好方法。其次，我什至认为这是检索数据的不好方法......

无论如何，我还没有为您的结果找到 SQL 语句，但也许这可以帮助您：

```
SELECT question.ID as QuestionID, question.Content as Question, 
answer.ID as AnswerID, answer.Content as Answer 
FROM Test question, Test answer 
WHERE question.ID = answer.QID 
ORDER BY question.Content ASC 
```

这应该允许你对结果做你想做的事......（用 SQL Server 测试）

# sql - 如何将存储过程值插入其他存储过程中的参数

> ID：13621440
> 
> 赞同：1
> 
> 时间：2012-11-29T08:15:55.960
> 
> 标签：sql

我有两个存储过程，我想将值从第一个存储过程发送到第二个存储过程中的变量。

这是我的代码：

```
create procedure proc_pos
@pilihan varchar(3),
@kd varchar (10),
@ket varchar (50)

as
begin
declare @id2 varchar (10)
        select @id2=exec gen_number 'IP'

    if @pilihan='ins' 
        begin 
            insert into posisi 
                values (@id2, @ket,GETDATE(), 'Admin',0)
            update master_number set last_number=@id2
        end
    else if @pilihan='upd'
        begin
        update posisi set kd_pos=@kd, keterangan=@ket
                    where kd_pos=@kd
        end
    else if @pilihan='del'
        begin
            update posisi set is_deleted=1
                where kd_pos=@kd
        end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:22:48.503

创建第二个过程：

```
create procedure proc_pos2
as
begin
decalre 
  @pilihan varchar(3),
  @kd varchar (10),
  @ket varchar (50)

  select @pilihan = 'val1',
         @kd  = 'val2',
         @ket = 'val3'

   exec proc_pos @pilihan, @kd, @ket
end 
```

并运行它：

```
exec proc_pos2 
```

它将发送到 proc_pos values `val1`, `val2`,`val3`作为第二个过程的参数。

您必须将此值更改为您需要的值。

# php - Jira API 问题 - 启用安全模式或在共享主机上设置 open_basedir 时无法激活 CURLOPT_FOLLOWLOCATION

> ID：13621442
> 
> 赞同：0
> 
> 时间：2012-11-29T08:16:05.000
> 
> 标签：php, curl, jira, open-basedir, php-safe-mode

我在 Atlassian Jira 错误系统 API 上运行一些代码，这是我使用的代码

```
$username = 'xxx';
$password = 'xxx';

$url = 'https://xxx.atlassian.net/rest/api/2/issues/?filter=12202';
//$url = 'https://xxx.atlassian.net/rest/api/2/issue/bug-5555';

$curl = curl_init();
curl_setopt($curl, CURLOPT_USERPWD, "$username:$password");
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);

$issue_list = curl_exec($curl);
$issue_json = json_decode($issue_list);
print_r($issue_json); 
```

这基本上就是所有代码，现在如果我运行该代码，我会收到服务器错误：

当启用安全模式或在第 388 行的 /usr/local/pem/vhosts/117355/webspace/httpdocs/morny.me/jira_filters.php 中设置 open_basedir 时，无法激活 CURLOPT_FOLLOWLOCATION

但是，如果我改为运行注释代码：

```
$url = 'https://xxx.atlassian.net/rest/api/2/issue/bug-5555'; 
```

这很好用，没有问题。

老实说，我不知道问题出在哪里，所以我给我的托管公司发了一封电子邮件

嗨，保罗，

默认情况下，我们的服务器禁用安全模式。请记住，您为第二种解决方案提供的链接描述了单站点手动配置，这不是我们在共享主机上执行的操作。

当我尝试访问 conf 文件夹或 .htaccess 文件或 httpdocs 文件夹之外的任何内容时，它说我没有权限，所以看起来我限制了我可以更改的内容。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T21:58:08.957

使用 YQL 作为相关 URL 的代理。这是一个例子：

*   [按 Pushlog 目录路径过滤 Mercurial Changelog 提要](https://developer.mozilla.org/en-US/docs/Mercurial_FAQ/Filter_a_Mercurial_Changelog_feed_by_Pushlog_directory_paths)

*   [开发 Speakeasy 扩展](https://developer.atlassian.com/display/DOCS/Developing+Speakeasy+Extensions)

# iphone - 文本字段十进制输入格式

> ID：13621443
> 
> 赞同：3
> 
> 时间：2012-11-29T08:16:11.217
> 
> 标签：iphone, uitextfield

我想在文本字段中显示浮点数，直到在 ATM 机中输入的小数点后两位以提取金额。比如，0.03。如果我输入一个新数字，比如 6，它会像 0.36 等等。请建议我这样做的方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:48:27.263

嘿，检查一下，就像 ATM 功能一样...

```
 NSString *str = @"1234987";
    NSUInteger len = str.length;
    if (len>0) {
        if (len==1) {
            str = [NSString stringWithFormat:@"0.0%@",str];
            NSLog(@"%@",str);
        }
        else if (len==2) {

            str = [NSString stringWithFormat:@"0.%@",str];
            NSLog(@"%@",str);
        }
        else {
            NSString  *pointstr = [str substringWithRange:NSMakeRange(len - 2,2)];
            NSString *Bstr = [str substringWithRange:NSMakeRange(0,len-2)];
            str = [NSString stringWithFormat:@"%@.%@",Bstr,pointstr];
            NSLog(@"\n\n FullString %@",str);
        }
    }
    else{
          str = @"0.0";
    } 
```

**输出为：FullString 12349.87**

享受这段代码..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:20:36.563

```
 NSNumberFormatter* decimalFormatter = [[NSNumberFormatter alloc] init];
        [decimalFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
        [decimalFormatter setMaximumFractionDigits:2];
        [decimalFormatter setMinimumFractionDigits:2];
NSString *enteredPrice=[decimalFormatter stringFromNumber:[NSNumber numberWithDouble:unitprice]]; 
```

您可以使用十进制格式化程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:19:46.537

干得好：

```
float yourFloat = 2.45678;
NSString *text = [NSString stringWithFormat:@"%.2f", yourFloat];
textField.text = text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T12:47:31.920

~~我已经开源了内置此功能的[SATextField 。](https://github.com/Stunner/SATextField)您需要设置`fixedDecimalPoint`为“是”。~~

**编辑：**我创建了一个包含此功能的新项目：[STAControls](https://github.com/Stunner/STAControls)（特别是使用[`STAATMTextField`](https://github.com/Stunner/STAControls/blob/master/STAControls/STAControls/TextField/STAATMTextField.h)——*它甚至支持`.`输入！*）。不同的是，这个项目已经作为一个合法的子类来实现，`UITextField`而`SATextField`仅仅是一个包含`UITextField`实例的容器类。

# c# - 没有 app.config 的 System.Net.Sockets 跟踪

> ID：13621448
> 
> 赞同：1
> 
> 时间：2012-11-29T08:16:44.000
> 
> 标签：c#, sockets, system.diagnostics

我需要在运行时设置跟踪输出`System.Net.Sockets`而不使用`app.config`文件方法。

`System.Diagnostics`在部分工作中设置东西`app.config`效果很好，但由于我需要偶尔在现场使用它，我宁愿在运行时配置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:44:53.617

我不得不在几年前工作的大型应用程序上做类似的事情（动态启用跟踪）。可以在代码中完成所有操作。基本思想是在启用跟踪的情况下进行编译（即设置 TRACE 条件）并最初将默认跟踪侦听器设置为空输出设备。所有跟踪信息都将进入位桶。

当您想要启用跟踪时，您初始化并安装一个[TraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx)，它将跟踪信息输出到您想要的位置。

[Tracing and Instrumenting Applications](http://msdn.microsoft.com/en-us/library/zs6s4h68%28v=vs.110%29.aspx)的文档展示了如何在代码中启用和配置跟踪，而不依赖于配置文件。

[如何：配置网络跟踪](http://msdn.microsoft.com/en-us/library/ty48b824.aspx)解释了启用网络跟踪所需的配置文件设置。您必须重新转换才能在代码中执行此操作。特别是，您需要创建与该示例配置文件中定义的源和开关相对应的[TraceSource](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource.aspx)和[TraceSwitch](http://msdn.microsoft.com/en-us/library/system.diagnostics.traceswitch.aspx)实例。

这当然是可行的，尽管你需要花点时间来了解所有不同的移动部件。

# android - 关闭设备 Android 后警报不会触发通知

> ID：13621454
> 
> 赞同：2
> 
> 时间：2012-11-29T08:17:25.420
> 
> 标签：android, alarmmanager

在我的应用程序中，我需要设置警报，并在状态栏中显示通知。我将预定事件存储在数据库中，并在通知出现时删除事件。

当我关闭设备并再次打开时。base 中的列表存在，但永远不会触发警报事件。当我关闭设备时，似乎挂起的事件被取消了。

如何防止这种情况？我需要在设备打开时显示通知，并且警报时间到了。

这就是我设置警报的方式：

```
 Intent intent = new Intent(activity, TimeAlarm.class);
    intent.putExtra(SHOW_NAME, showName);
    intent.putExtra(SHOW_START_TIME, showStartTime);
    intent.putExtra(CHANNEL_NAME, channelName);
    intent.putExtra(VIBRATION_ENABLED, isVibrate);
    intent.putExtra(SOUND_ENABLED, isSound);

    int alarmId = (int) System.currentTimeMillis();

    intent.putExtra(ALARM_ID, alarmId);

    PendingIntent pendingIntent = PendingIntent.getBroadcast(activity,
            alarmId, intent, PendingIntent.FLAG_ONE_SHOT);

    am.set(AlarmManager.RTC_WAKEUP,
            System.currentTimeMillis() + delayMilis, pendingIntent); 
```

在清单文件中，我只有这个：

```
 <receiver
        android:name="com.moleandroid.tvprogramgui.alarm.TimeAlarm"
 /receiver> 
```

TimeAlarm 类是我的接收器，从那里我在状态栏中显示通知。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:33:38.140

在这里，您需要做些什么来解决此问题。通常当设备关闭时，它会取消警报的所有pendingIntent，因此在设备再次打开时它不会触发。警报应用程序在内部执行的操作是当设备关闭/打开时，它将启动服务以注册事件

请参考此链接以在代码中实现关机和开机意图。因此，当设备开机时，将所有事件安排到 AlarmManager，我相信这会起作用

[当用户关闭设备时，有什么方法可以接收通知？](https://stackoverflow.com/questions/2190126/is-there-any-way-to-get-a-notice-when-a-user-power-off-their-android-phone)

# c# - 如何在 Asp.Net MVC 中处理 Global.asax 文件中抛出的错误

> ID：13621456
> 
> 赞同：1
> 
> 时间：2012-11-29T08:17:36.097
> 
> 标签：c#, asp.net-mvc, error-handling

我搜索并尝试了很多文章，但仍然无法解决这个问题。我在 Global.asax 文件中有这段代码：

```
LogInClient("username", "password"); 
```

由于 Windows Azure 中发生了更新，我的所有服务 (REST) 都找不到（但这是另一回事）。Web 显示错误请求错误。我想要发生的是这样的，对于任何类型的错误，网站都会重定向到错误页面。

但我总是被重定向到这个

```
http://127.0.0.1:81/Error?aspxerrorpath=/
https://127.0.0.1/Error?aspxerrorpath=/ 
```

我正在通过 Cloud 项目运行我的 Asp.Net MVC 项目。

这是我到目前为止所做的：

![在此处输入图像描述](../Images/d262fd77634c8fa75ad6da1bae9d4758.png)

网络配置

```
<customErrors mode="On" defaultRedirect="Error"/> 
```

Global.asax 文件

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
} 
```

![在此处输入图像描述](../Images/365f922a04fd78a7c376302290532eef.png)

我在这里迷路了。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:52:54.270

你可以在你的 global.asax 中有这个：

```
 void Application_Error( object sender, EventArgs e )
    {
        Boolean errorRedirect = false;
        Boolean redirect404 = false;
        try
        {
            var exception = Server.GetLastError();
            var httpException = exception as HttpException;
            Response.Clear();
            Server.ClearError();
            var routeData = new RouteData();
            routeData.Values[ "controller" ] = "Errors";
            routeData.Values[ "action" ] = "General";
            routeData.Values[ "exception" ] = exception;
            Response.StatusCode = 500;
            if ( httpException != null )
            {
                Response.StatusCode = httpException.GetHttpCode();
                switch ( Response.StatusCode )
                {
                    case 403:
                        redirect404 = true;
                        break;
                    case 404:
                        redirect404 = true;
                        break;
                    default:
errorRedirect = true;
                        //todo: log errors in your log file here
                        break;
                }
            }

        }
        catch ( Exception ex )
        {
            errorRedirect = true;
        }

        if ( redirect404 )
        {
            //redirect to 404 page
            Response.Redirect( "~/404.htm" );
        }
        else if ( errorRedirect )
        {
            //redirect to error page
            Response.Redirect( "~/error.htm" );
        }
    } 
```

还有一些错误不能被 global.asax 捕获，因此您还需要通过将以下内容放入所有 aspx 代码隐藏中或最好放在扩展的单个类中来捕获 aspx 错误，`System.Web.UI.Page`然后让所有代码隐藏从该类继承。放在那里的代码如下：

```
 protected override void OnError( EventArgs e )
    {
        try
        {
            //todo: log errors in your log files
        }
        catch ( Exception ex ) { }
        //redirect to error page
        Response.Redirect( "~/error.htm" );
    } 
```

# r - 让 match.call() 与 *apply & plyr 一起工作？（re：递归引用数据框）

> ID：13621464
> 
> 赞同：4
> 
> 时间：2012-11-29T08:18:13.733
> 
> 标签：r, plyr, apply, assign, sapply

以下函数的目的是更容易地进行自引用分配。（如此处建议：[递归引用数据框](https://stackoverflow.com/questions/13615385/referencing-a-dataframe-recursively/13620608)）

所以，而不是

```
 # this  
 myDataFrame$variable[is.na(myDataFrame$variable)] <- 0

 # we can have this: 
 NAto0(myDataFrame$variable) 
```

这些函数适用于矢量，但在 *ply'ing 时效果较差

我遇到了关于`match.call()`函数部分的两个问题`selfAssign()` （代码如下）。问题是：

1.  如果它是从 *apply-type 函数调用的，我如何从函数中确定它？
2.  如何将调用追溯到正确的变量环境？

我在结尾处包含了适用于该`n`陈述的论点。我想知道我是否可以以某种方式利用类似于`selfAssign(.)``eval``n`

```
 sapply(df, NAto0, n=2) 
```

也许在 selfAssign 中有类似的东西`sys.parent(n)`（我试过了，要么我没有做对，要么它不起作用）

任何建议将不胜感激。

* * *

* * *

### 功能

这些函数是 selfAssign 的包装器，将在`*apply`调用中使用。

```
NAtoNULL <- function(obj, n=1) {
# replace NA's with NULL
  selfAssign(match.call()[[2]], is.na(obj), NULL, n=n+1)
}

NAto0 <- function(obj, n=1) {
# replace NA's with 0
  selfAssign(match.call()[[2]], is.na(obj), 0, n=n+1)
}

NAtoVal <- function(obj, val, n=1) {
  selfAssign(match.call()[[2]], is.na(obj), val, n=n+1)  
}

ZtoNA <- function(obj, n=1) {
# replace 0's with NA

  # TODO: this may have to be modified if obj is matrix
  ind <- obj == 0
  selfAssign(match.call()[[2]], ind, NA, n=n+1)
} 
```

`selfAssign`是执行工作的函数以及错误的来源

```
selfAssign <- function(self, ind, val, n=1, silent=FALSE) {
## assigns val to self[ind] in environment parent.frame(n)
## self should be a vector.  Currently will not work for matricies or data frames

  ## GRAB THE CORRECT MATCH CALL
  #--------------------------------------
      # if nested function, match.call appropriately
      if (class(match.call()) == "call") {
        mc <- (match.call(call=sys.call(sys.parent(1))))   ## THIS LINE PROBABLY NEEDS MODIFICATION
      } else {
        mc <- match.call()
      }

      # needed in case self is complex (ie df$name)
      mc2 <- paste(as.expression(mc[[2]]))

  ## CLEAN UP ARGUMENT VALUES
  #--------------------------------------
      # replace logical indecies with numeric indecies
      if (is.logical(ind))
        ind <- which(ind) 

      # if no indecies will be selected, stop here
      if(identical(ind, integer(0)) || is.null(ind)) {
        if(!silent) warning("No indecies selected")
        return()
      }

      # if val is a string, we need to wrap it in quotes
      if (is.character(val))
        val <- paste('"', val, '"', sep="")

      # val cannot directly be NULL, must be list(NULL)
      if(is.null(val))
        val <- "list(NULL)"

  ## CREATE EXPRESSIONS AND EVAL THEM
  #--------------------------------------
     # create expressions to evaluate
     ret <- paste0("'[['(", mc2, ", ", ind, ") <- ", val)

     # evaluate in parent.frame(n)
     eval(parse(text=ret), envir=parent.frame(n))
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T00:12:50.237

请注意，我不赞同这种类型的东西，但赞同理解 R 是如何工作的愿望，以便您可以根据需要做这些东西。

以下内容`sapply`仅适用，因此仅部分回答了您的问题，但确实列出了您可以采取的策略。正如我在之前的评论中所指出的那样，要使它变得健壮是非常困难的，但是我可以在`sapply`通话的特定上下文中回答 1 和 2

1.  用于`sys.calls`获取跟踪堆栈
2.  使用`sys.frame`并`sys.parents`获得合适的评估环境

使用您想要的策略类型将列表中的所有向量转换为 NA 的非稳健说明性实现：

```
get_sapply_call <- function(x) get_sapply_call_core(x)  # To emulate your in-between functions
get_sapply_call_core <- function(x) {
  if((c.len <- length(s.calls <- sys.calls())) < 4L) return("NULL")
  if(s.calls[[c.len - 2L]][[1L]] == quote(lapply) &     # Target sapply calls only
     s.calls[[c.len - 3L]][[1L]] == quote(sapply) &
     s.calls[[c.len - 1L]][[1L]] == quote(FUN)) {
    mc.FUN <- s.calls[[c.len - 1L]]
    mc.sa <- match.call(definition=sapply, s.calls[[c.len - 3L]])  # only need to match sapply b/c other calls are not user calls and as such structure is known
    call.txt <- paste0(
      as.character(mc.sa[[2L]]), "[[", mc.FUN[[2L]][[3L]], 
      "]] <- rep(NA, length(", as.character(mc.sa[[2L]]), "[[", mc.FUN[[2L]][[3L]], 
      "]]))"
    )
    call <- parse(text=call.txt)
    eval(call, envir=sys.frame(sys.parents()[c.len - 3L]))
    return(call.txt)
  }
  return("NULL")
}
df <- data.frame(a=1:10, b=letters[1:10])
sapply(df, get_sapply_call)
#                                     a                                     b 
# "df[[1]] <- rep(NA, length(df[[1]]))" "df[[2]] <- rep(NA, length(df[[2]]))" 
df
#     a  b
# 1  NA NA
# 2  NA NA
# 3  NA NA
# 4  NA NA
# ... 
```

对于不同的函数，您将需要不同的逻辑，`*apply`如果您的函数以其他方式间接调用，则需要更多不同的逻辑。此外，这绝对是一个快速而肮脏的实现，因此即使`sapply`您可能需要添加一些东西以使其更健壮。并且不能保证`sapply`实现在未来不会改变上述所有内容。

编辑：请注意，您可以完全回避您遇到的问题`match.call`

# python - pytest 和覆盖率组合不起作用

> ID：13621466
> 
> 赞同：8
> 
> 时间：2012-11-29T08:18:22.580
> 
> 标签：python, code-coverage, pytest

我从这里安装了 pytest 插件：http: [//pypi.python.org/pypi/pytest-cov](http://pypi.python.org/pypi/pytest-cov)。然后我有一个简单的测试代码：

pytest.py：

```
class TestNumbers:
    def test_int_float(self):
        assert 1 == 1.0

    def test_int_str(self):
        assert 1 == 1 
```

我试图用命令测试它：`py.test --cov-report term --cov pytest.py`。但它不起作用。即使我给出了 pytest.py 的整个绝对路径，它仍然没有数据可供收集。但是，如果我使用`py.test pytest.py`，肯定它测试正常。

我对这个问题感到非常困惑，感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T10:16:48.373

尝试：

```
py.test --cov-report term --cov=. test.py 
```

该`--cov`参数接受一个参数，说明要覆盖哪些路径。在您的示例中，`--cov`将 consume `test.py`，但是 py.test 没有关于要测试哪些文件的参数。

**更新**：正如@hpk42 指出的那样，您需要将您的示例称为`pytest.py`. 当我在本地执行此操作时，我`test.py`改为调用它。

# c# - 如何使用 C# 查找默认 Web 浏览器？

> ID：13621467
> 
> 赞同：37
> 
> 时间：2012-11-29T08:18:25.037
> 
> 标签：c#

有没有办法可以使用 C# 找出我的默认 Web 浏览器的名称？（火狐、谷歌浏览器等）

你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-07-11T16:55:00.253

当Internet Explorer 设置为默认浏览器时，[另一个答案](https://stackoverflow.com/a/13621571/590790)对我不起作用。在我的 Windows 7 PC 上，`HKEY_CLASSES_ROOT\http\shell\open\command`没有为 IE 更新。这背后的原因可能是从 Windows Vista 开始对默认程序的处理方式进行了更改。

您可以在注册表项 中找到默认选择的浏览器 `Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice`，其值为`Progid`。（[感谢破碎的像素](https://stackoverflow.com/q/12358432/590790)）

```
const string userChoice = @"Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice";
string progId;
BrowserApplication browser;
using ( RegistryKey userChoiceKey = Registry.CurrentUser.OpenSubKey( userChoice ) )
{
    if ( userChoiceKey == null )
    {
        browser = BrowserApplication.Unknown;
        break;
    }
    object progIdValue = userChoiceKey.GetValue( "Progid" );
    if ( progIdValue == null )
    {
        browser = BrowserApplication.Unknown;
        break;
    }
    progId = progIdValue.ToString();
    switch ( progId )
    {
        case "IE.HTTP":
            browser = BrowserApplication.InternetExplorer;
            break;
        case "FirefoxURL":
            browser = BrowserApplication.Firefox;
            break;
        case "ChromeHTML":
            browser = BrowserApplication.Chrome;
            break;
        case "OperaStable":
            browser = BrowserApplication.Opera;
            break;
        case "SafariHTML":
            browser = BrowserApplication.Safari;
            break;
        case "AppXq0fevzme2pys62n3e0fbqa7peapykr8v":
            browser = BrowserApplication.Edge;
            break;
        default:
            browser = BrowserApplication.Unknown;
            break;
    }
} 
```

如果您还需要浏览器可执行文件的路径，您可以按如下方式访问它，`Progid`使用`ClassesRoot`.

```
const string exeSuffix = ".exe";
string path = progId + @"\shell\open\command";
FileInfo browserPath;
using ( RegistryKey pathKey = Registry.ClassesRoot.OpenSubKey( path ) )
{
    if ( pathKey == null )
    {
        return;
    }

    // Trim parameters.
    try
    {
        path = pathKey.GetValue( null ).ToString().ToLower().Replace( "\"", "" );
        if ( !path.EndsWith( exeSuffix ) )
        {
            path = path.Substring( 0, path.LastIndexOf( exeSuffix, StringComparison.Ordinal ) + exeSuffix.Length );
            browserPath = new FileInfo( path );
        }
    }
    catch
    {
        // Assume the registry value is set incorrectly, or some funky browser is used which currently is unknown.
    }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-29T08:25:17.110

您可以[在此处](http://www.dreamincode.net/forums/blog/143/entry-2054-get-default-browser-more-in-c#/)查看示例，但主要可以这样做：

```
internal string GetSystemDefaultBrowser()
{
    string name = string.Empty;
    RegistryKey regKey = null;

    try
    {
        //set the registry key we want to open
        regKey = Registry.ClassesRoot.OpenSubKey("HTTP\\shell\\open\\command", false);

        //get rid of the enclosing quotes
        name = regKey.GetValue(null).ToString().ToLower().Replace("" + (char)34, "");

        //check to see if the value ends with .exe (this way we can remove any command line arguments)
        if (!name.EndsWith("exe"))
            //get rid of all command line arguments (anything after the .exe must go)
            name = name.Substring(0, name.LastIndexOf(".exe") + 4);

    }
    catch (Exception ex)
    {
        name = string.Format("ERROR: An exception of type: {0} occurred in method: {1} in the following module: {2}", ex.GetType(), ex.TargetSite, this.GetType());
    }
    finally
    {
        //check and see if the key is still open, if so
        //then close it
        if (regKey != null)
            regKey.Close();
    }
    //return the value
    return name;

} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-03T05:42:16.513

我刚刚为此做了一个函数：

```
 public void launchBrowser(string url)
    {
        string browserName = "iexplore.exe";
        using (RegistryKey userChoiceKey = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice"))
        {
            if (userChoiceKey != null)
            {
                object progIdValue = userChoiceKey.GetValue("Progid");
                if (progIdValue != null)
                {
                    if(progIdValue.ToString().ToLower().Contains("chrome"))
                        browserName = "chrome.exe";
                    else if(progIdValue.ToString().ToLower().Contains("firefox"))
                        browserName = "firefox.exe";
                    else if (progIdValue.ToString().ToLower().Contains("safari"))
                        browserName = "safari.exe";
                    else if (progIdValue.ToString().ToLower().Contains("opera"))
                        browserName = "opera.exe";
                }
            }
        }

        Process.Start(new ProcessStartInfo(browserName, url));
    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-01T10:03:23.710

这已经过时了，但我只会添加我自己的发现供其他人使用。的值`HKEY_CURRENT_USER\Software\Clients\StartMenuInternet`应该为您提供此用户的默认浏览器名称。

如果要枚举所有已安装的浏览器，请使用 `HKEY_LOCAL_MACHINE\SOFTWARE\Clients\StartMenuInternet`

您可以使用在中找到的名称`HKEY_CURRENT_USER`来识别默认浏览器，`HKEY_LOCAL_MACHINE`然后以这种方式查找路径。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-25T16:16:50.930

视窗 10

```
internal string GetSystemDefaultBrowser()
    {
        string name = string.Empty;
        RegistryKey regKey = null;

        try
        {
            var regDefault = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\FileExts\\.htm\\UserChoice", false);
            var stringDefault = regDefault.GetValue("ProgId");

            regKey = Registry.ClassesRoot.OpenSubKey(stringDefault + "\\shell\\open\\command", false);
            name = regKey.GetValue(null).ToString().ToLower().Replace("" + (char)34, "");

            if (!name.EndsWith("exe"))
                name = name.Substring(0, name.LastIndexOf(".exe") + 4);

        }
        catch (Exception ex)
        {
            name = string.Format("ERROR: An exception of type: {0} occurred in method: {1} in the following module: {2}", ex.GetType(), ex.TargetSite, this.GetType());
        }
        finally
        {
            if (regKey != null)
                regKey.Close();
        }

        return name;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-19T10:12:29.240

这是我将这里的响应与正确的协议处理结合起来的东西：

```
/// <summary>
///     Opens a local file or url in the default web browser.
///     Can be used both for opening urls, or html readme docs.
/// </summary>
/// <param name="pathOrUrl">Path of the local file or url</param>
/// <returns>False if the default browser could not be opened.</returns>
public static Boolean OpenInDefaultBrowser(String pathOrUrl)
{
    // Trim any surrounding quotes and spaces.
    pathOrUrl = pathOrUrl.Trim().Trim('"').Trim();
    // Default protocol to "http"
    String protocol = Uri.UriSchemeHttp;
    // Correct the protocol to that in the actual url
    if (Regex.IsMatch(pathOrUrl, "^[a-z]+" + Regex.Escape(Uri.SchemeDelimiter), RegexOptions.IgnoreCase))
    {
        Int32 schemeEnd = pathOrUrl.IndexOf(Uri.SchemeDelimiter, StringComparison.Ordinal);
        if (schemeEnd > -1)
            protocol = pathOrUrl.Substring(0, schemeEnd).ToLowerInvariant();
    }
    // Surround with quotes
    pathOrUrl = "\"" + pathOrUrl + "\"";
    Object fetchedVal;
    String defBrowser = null;
    // Look up user choice translation of protocol to program id
    using (RegistryKey userDefBrowserKey = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\Shell\Associations\UrlAssociations\" + protocol + @"\UserChoice"))
        if (userDefBrowserKey != null && (fetchedVal = userDefBrowserKey.GetValue("Progid")) != null)
            // Programs are looked up the same way as protocols in the later code, so we just overwrite the protocol variable.
            protocol = fetchedVal as String;
    // Look up protocol (or programId from UserChoice) in the registry, in priority order.
    // Current User registry
    using (RegistryKey defBrowserKey = Registry.CurrentUser.OpenSubKey(@"SOFTWARE\Classes\" + protocol + @"\shell\open\command"))
        if (defBrowserKey != null && (fetchedVal = defBrowserKey.GetValue(null)) != null)
            defBrowser = fetchedVal as String;
    // Local Machine registry
    if (defBrowser == null)
        using (RegistryKey defBrowserKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Classes\" + protocol + @"\shell\open\command"))
            if (defBrowserKey != null && (fetchedVal = defBrowserKey.GetValue(null)) != null)
                defBrowser = fetchedVal as String;
    // Root registry
    if (defBrowser == null)
        using (RegistryKey defBrowserKey = Registry.ClassesRoot.OpenSubKey(protocol + @"\shell\open\command"))
            if (defBrowserKey != null && (fetchedVal = defBrowserKey.GetValue(null)) != null)
                defBrowser = fetchedVal as String;
    // Nothing found. Return.
    if (String.IsNullOrEmpty(defBrowser))
        return false;
    String defBrowserProcess;
    // Parse browser parameters. This code first assembles the full command line, and then splits it into the program and its parameters.
    Boolean hasArg = false;
    if (defBrowser.Contains("%1"))
    {
        // If url in the command line is surrounded by quotes, ignore those; our url already has quotes.
        if (defBrowser.Contains("\"%1\""))
            defBrowser = defBrowser.Replace("\"%1\"", pathOrUrl);
        else
            defBrowser = defBrowser.Replace("%1", pathOrUrl);
        hasArg = true;
    }
    Int32 spIndex;
    if (defBrowser[0] == '"')
        defBrowserProcess = defBrowser.Substring(0, defBrowser.IndexOf('"', 1) + 2).Trim();
    else if ((spIndex = defBrowser.IndexOf(" ", StringComparison.Ordinal)) > -1)
        defBrowserProcess = defBrowser.Substring(0, spIndex).Trim();
    else
        defBrowserProcess = defBrowser;

    String defBrowserArgs = defBrowser.Substring(defBrowserProcess.Length).TrimStart();
    // Not sure if this is possible / allowed, but better support it anyway.
    if (!hasArg)
    {
        if (defBrowserArgs.Length > 0)
            defBrowserArgs += " ";
        defBrowserArgs += pathOrUrl;
    }
    // Run the process.
    defBrowserProcess = defBrowserProcess.Trim('"');
    if (!File.Exists(defBrowserProcess))
        return false;
    ProcessStartInfo psi = new ProcessStartInfo(defBrowserProcess, defBrowserArgs);
    psi.WorkingDirectory = Path.GetDirectoryName(defBrowserProcess);
    Process.Start(psi);
    return true;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-21T16:58:24.477

正如我在[史蒂文的回答](https://stackoverflow.com/a/17599201/2704659)下评论的那样，我遇到了这种方法不起作用的情况。我正在运行 Windows 7 Pro SP1 64 位。我下载并安装[了Opera浏览器](https://www.opera.com/?utm_campaign=%2301%20-%20US%20-%20Search%20-%20EN%20-%20Branded%20-%202017&gclid=Cj0KCQjwgLLoBRDyARIsACRAZe53grDCRoswqqXhzWh71aiH-8l13LbU45BIri0DTsfu8Wg0IIg8EwQaAsy_EALw_wcB)，发现`HKEY_CURRENT_USER\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\https\UserChoice`他的回答中描述的reg键是空的，即没有`ProgId`值。

我使用[Process Monitor](https://docs.microsoft.com/en-us/sysinternals/downloads/procmon)观察在默认浏览器中打开 URL 时发生的情况（通过单击开始 > 运行并键入“ [https://www.google.com](https://www.google.com) ”）并在检查上述注册表项后发现并且未能找到该`ProgId`值，它找到了它需要的内容`HKEY_CLASSES_ROOT\https\shell\open\command`（在检查并未能在少数其他键中找到它之后）。虽然 Opera 被设置为默认浏览器，但`Default`该键中的值包含以下内容：

```
"C:\Users\{username}\AppData\Local\Programs\Opera\launcher.exe" -noautoupdate -- "%1" 
```

我继续在 Windows 10 上对此进行了测试，它的行为有所不同——更符合 Steven 的回答。它`ProgId`在`HKEY_CURRENT_USER\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\https\UserChoice`. 此外，`HKEY_CLASSES_ROOT\https\shell\open\command`Windows 10 计算机上的密钥*不会*将默认浏览器的命令行路径存储在`HKEY_CLASSES_ROOT\https\shell\open\command`-- 我在那里找到的值是

```
"C:\Program Files\Internet Explorer\iexplore.exe" %1 
```

因此，根据我在 Process Monitor 中观察到的情况，这是我的建议：

先试试 Steven 的流程，如果没有`ProgID`in `HKEY_CURRENT_USER\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\https\UserChoice`，再看 in 的默认值`HKEY_CLASSES_ROOT\https\shell\open\command`。当然，我不能保证这会起作用，主要是因为我在找到它之前看到它在一堆其他位置中查找。但是，如果我或其他人遇到不符合我描述的模型的场景，当然可以在此处改进和记录该算法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-09T22:27:43.420

```
 public void launchBrowser(string url)
    {
        using (RegistryKey userChoiceKey = Registry.CurrentUser.OpenSubKey(@"Software\Clients\StartMenuInternet"))
        {
            var first = userChoiceKey?.GetSubKeyNames().FirstOrDefault();
            if (userChoiceKey == null || first == null) return;
            var reg = userChoiceKey.OpenSubKey(first + @"\shell\open\command");
            var prog = (string)reg?.GetValue(null);
            if (prog == null) return;
            Process.Start(new ProcessStartInfo(prog, url));
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-12T08:49:37.823

在 rory.ap（下）之后，我发现这适用于今天的 Windows 10 中的 Firefox、iexplore 和 edge。

我检查了在设置中更改默认应用程序正确更改了注册表项。

您可能会因为 iexplore 和 edge 的 hmtl 文件名中的空格而遇到麻烦。所以“C#”在使用返回的字符串时会有所作为。

```
private string FindBrowser()
{
    using var key = Registry.CurrentUser.OpenSubKey(
        @"SOFTWARE\Microsoft\Windows\Shell\Associations\URLAssociations\http\UserChoice");
    var s = (string) key?.GetValue("ProgId");
    using var command = Registry.ClassesRoot.OpenSubKey($"{s}\\shell\\open\\command");
    // command == null if not found
    // GetValue(null) for default value.
    // returned string looks like one of the following:
    // "C:\Program Files\Mozilla Firefox\firefox.exe" -osint -url "%1"
    // "C:\Program Files\Internet Explorer\iexplore.exe" %1
    // "C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe" --single-argument %1
    return (string) command?.GetValue(null);
} 
```

# spring - Spring：将惰性单例 bean 注入渴望的单例 bean

> ID：13621474
> 
> 赞同：1
> 
> 时间：2012-11-29T08:18:48.397
> 
> 标签：spring, dependency-injection

最近我遇到了这个需求，我们有一个 Foo bean 和一个 Bar bean；两者都是单例，Bar 需要注入到 Foo 中。

但是，Bar 是资源/内存的重量级 bean，因此我们需要将其实例化延迟到 Foo 实际调用它的方法的地步。问题是，Foo 必须急切地实例化。那么有哪些不同的方法呢？

我在下面的答案中分享了我的解决方案。学习任何其他方法都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:18:48.397

本质上，这就是我所做的：

1)`Bar`懒惰地实例化，

2）使用a`LazyInitTargetSource`并将其指向上面的bean，

3）使用指向上面目标源的`ProxyFactoryBean'，

4）`Foo`热切实例化并将上面的代理注入其中。

此解决方案比使用`lookup-method`解决方案更冗长、更复杂。然而`lookup-method`，解决方案很难进行单元测试，我觉得与其他解决方案相比，它与 Spring 的耦合更紧密。

以下是配置：

```
<bean id="barTarget" class="bar.Bar" lazy-init="true">
    <constructor-arg value="423" />
</bean>
<bean id="singletonTargetSource" class="org.springframework.aop.target.LazyInitTargetSource">
    <property name="targetBeanName" value="barTarget" />
</bean>
<bean id="bar" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="targetSource" ref="singletonTargetSource" />           
</bean>
<bean id="foo" class="foo.Foo">
    <property name="bar" ref="bar" />
</bean> 
```

# c# - 如何使用 C# 删除 word 中当前选择的表行？

> ID：13621475
> 
> 赞同：3
> 
> 时间：2012-11-29T08:18:47.737
> 
> 标签：c#, ms-word

情况是这样的：我的选择是表格中的两行数据，我想删除这两行。当我使用下面的代码时，行中的内容被删除了，但行仍然存在。所以，我的问题这是：如何删除整行？谢谢。顺便说一句，我使用“书签”来操作选择。

```
/// <summary>
/// Delete table row
/// </summary>
/// <param name="bookmark"></param>
public void DeleteTableRow(string bookmark)
{
    object oBookmark = bookmark;
    if (doc.Bookmarks.get_Item(ref oBookmark) != null) {
        doc.Bookmarks.get_Item(ref oBookmark).Select();
        object wdLine = WdUnits.wdLine;
        object wdParagraph = WdUnits.wdParagraph;
        object wdTableRow = WdUnits.wdRow;
        object wdCharacter = WdUnits.wdCharacter;
        object wdExtend = WdMovementType.wdExtend;
        object oCount = 1;

        Selection selection = app.Selection;
        selection.HomeKey(ref wdLine, ref nullobj);
        selection.MoveDown(ref wdLine, ref oCount, ref wdExtend);
        selection.Delete(ref wdCharacter, ref nullobj);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-05T05:56:22.567

有一个类似的问题，需要删除未使用的表行，采用这种方法：如果您有选择 2 行的“书签”，您可以像这样删除它们（至少在 Word2016 中）：

```
object oBookmark = bookmark;
if (doc.Bookmarks.get_Item(ref oBookmark) != null)
    doc.Bookmarks.get_Item(ref oBookmark).Range.Rows.Delete(); 
```

似乎有效（至少在 Word2016 中），但不知何故我的格式被破坏了（那是一个噩梦模板），然后使用“选择”（它运行顺利）：

```
bookmark.Select();
app.Selection.Rows.Delete(); 
```

不确定它从哪个版本开始工作，但如果有人遇到同样的问题，我会把它留在那里。

The main pint that both Range and Selection objects have Rows property, that have Delete method, that works like "Delete Rows" action in Word.

# perforce - 如何将 2 个挂起的更改列表与常用文件合并

> ID：13621479
> 
> 赞同：3
> 
> 时间：2012-11-29T08:18:55.053
> 
> 标签：perforce

我的工作区中有一个待处理的 CL，其中包含文件“A”、“B”、“C”。我的磁盘上保存了一个本地未提交的更改列表，其中包含文件“A”、“C”、“D”。因此，在将此本地 CL 与 p4merge 合并到现有工作区时，它显示以下错误，“文件已在此工作区中签出” 是否有正确的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T03:51:36.790

我不确定本地未提交的更改列表在这里意味着什么。

如果我认为带有文件“A”、“C”、“D”的 CL 是同一工作空间中的另一个待处理 CL，在该工作空间中您有带有文件“A”、“B”、“C”的待处理 CL，那么我认为力量整合或合并可以帮助您...

# android - canvas.getHeight 等于平板设备上的 view.getHeight

> ID：13621482
> 
> 赞同：1
> 
> 时间：2012-11-29T08:19:22.577
> 
> 标签：android, scrollview, android-canvas

我有一个滚动视图，我将它添加到我的自定义视图中，在 customview 中覆盖 onMeasure 和 onTouchEvent，但是当我滚动它时没有绘制任何内容。

```
 protected final void onDraw(Canvas paramCanvas)
  {     
    int text_width;
    int yCanvas;
    yCanvas = paramCanvas.getClipBounds().top;
    int h = paramCanvas.getClipBounds().height() ;
    int hView = this.getHeight() ;
    int topView = this.getTop();
    paramCanvas.drawText("text...yCanvas :"+yCanvas + " --- hCanvas:"+h   +"--- hView" + hView + " ----topView"+topView, 20, yCanvas+200, new Paint());

  }

@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean res = super.onTouchEvent(event);
    postInvalidate();
    System.out.println("result: " + res);
    return res;
}
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {     
    int h = 1000;
    setMeasuredDimension(View.MeasureSpec.getSize(widthMeasureSpec), h);} 
```

有趣的是，在所有平板电脑中 mycanvas 高度与视图高度相等，但在其他设备中 canvas.heigh() 与高度显示完全相等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:27:48.433

你的问题可能是，为什么你没有看到任何被绘制的东西。

您可能想查看您的 Paint 对象，它基本上没有设置任何有意义的值。您可以创建一个成员变量并设置您需要的所有属性（颜色等）。每次调用 drawText （或其他绘制方法）时都重用该对象。

编辑：如果 Paint 对象不是问题；）您可能需要仔细检查您正在构建的坐标。你正在使用`ScrollView`- 所以也许它是关于那个的`canvas.getClipBounds`。为什么不直接在 处绘制文本`0,0`？

# c++ - C++ 错误“'[macroname]' 之前的预期初始化程序”

> ID：13621485
> 
> 赞同：2
> 
> 时间：2012-11-29T08:19:44.253
> 
> 标签：c++

我正在尝试使用 Eclipse IDE 运行程序，但出现上述错误。

```
#if defined(__cplusplus) || defined(c_plusplus)
extern "C" {
#endif

tCRU_BUF_CHAIN_HEADER *CRU_BUF_Allocate_MsgBufChain ARG_LIST((UINT4 u4Size,UINT4 u4ValidOffsetValue));

[some more macros where this error comes]

#if defined(__cplusplus) || defined(c_plusplus)
}
#endif 
```

是错误之一，出现错误：

“'ARG_LIST'之前的预期初始化程序”

准确地说，有 18 个相同类型的宏会给出这个错误，在我删除“ARG_LIST”的那一刻，错误就消失了，但是因为这不是我创建的代码，所以我不想删除这部分.

我试图在网上找到解决方案，但找不到任何东西，现在我希望这里有人可以帮助我。

如果您需要更多信息，我会尽可能快地回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:34:36.733

我认为您可以安全地删除 ARG_LIST 部分。像 ARG_LIST 这样的宏在 C++ 的旧（1970 年代）版本中使用，其中函数/方法没有指定它们所采用的参数。例如，您声明了一个这样的函数：

```
tCRU_BUF_CHAIN_HEADER *CRU_BUF_Allocate_MsgBufChain(); 
```

你可以用任意数量的参数来调用它。

然后，当完整的函数签名被添加到语言中时，程序员定义宏以利用支持它的编译器中的类型检查，但仍然使代码与不支持它的编译器兼容：

```
#ifdef FULL_SIGNATURES_SUPPORTED
#define ARG_LIST(list) list
#else
#define ARG_LIST(list) ()
#endif 
```

现在所有的编译器都支持完整的签名，所以没有必要使用这样的宏。

# javascript - 隐藏haml，如果不是桌面的话

> ID：13621494
> 
> 赞同：0
> 
> 时间：2012-11-29T08:20:15.347
> 
> 标签：javascript, haml

我有一个 js 类，它能够定义我使用的设备类型。如果我要求`desktop`or ，该课程将返回一个 bool `phone`。问题是我希望我的 html/haml 基于 javascript bool 是动态的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:10:08.480

有很多方法可以解决这个问题。您可以在文件中**同时**包含`desktop`和`phone`html，并有选择地显示适当的 HTML。

```
<body>
<div id="desktop_content">
...
</div>
<div id="mobile_content">
...
</div>
</body>

<script type="text/javascript">
if (desktop) {
  document.getElementById('desktop_content').display = 'block';
  document.getElementById('mobile_content').display = 'none';
} else {
  document.getElementById('mobile_content').display = 'block';
  document.getElementById('desktop_content').display = 'none';
}
</script> 
```

或者，您可以使用 AJAX 请求（使用 jQuery）提取内容：

```
<body>
<div id="content"></div>
</body>

<script type="text/javascript">
if (desktop) {
  $('#content').load('desktop_content.html');
} else {
  $('#content').load('mobile_content.html');
}
</script> 
```

# sql - 是否有任何工具或网站可以将 Oracle 10g SQL 查询转换为 SQL Server 2005？

> ID：13621499
> 
> 赞同：0
> 
> 时间：2012-11-29T08:20:39.047
> 
> 标签：sql, sql-server, oracle10g

我正在通过 ithit.com 为这个 Java WebDAV 服务器创建一些 Webdev 服务器的演示应用程序，他们为我提供了 Oracle 10g 数据类型格式的 SQL 查询，并且有很多查询。

有没有办法将此查询转换为可在 SQL Server 2005 上运行的格式？这样我就可以使用 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:26:35.233

参考这个，可能对你有帮助。

[http://www.swissql.com/products/sql-translator/sql-converter.html](http://www.swissql.com/products/sql-translator/sql-converter.html)

## 更新 (2016-02-03)

看起来SwisSQL 已经停产了。

> SwisSQL - 生命周期结束通知
> 
> 感谢您对 SwisSQL 的关注
> 
> 很遗憾地通知您，我们已决定停止对该产品的任何开发和投资，以最好地符合我们的业务目标和方向。SwisSQL 的现有客户可以从我们这里获得产品支持，直到他们当前的支持合同到期。如需进一步查询，请发送电子邮件至 support@swissql.com，我们将很乐意为您提供帮助。

# ios - NSFileWrapper 是否将所有内容加载到内存中？

> ID：13621502
> 
> 赞同：7
> 
> 时间：2012-11-29T08:20:48.267
> 
> 标签：ios, uidocument, nsfilewrapper

假设我有一个`NSFileWrapper`目录。该目录由多级目录和文件组成。有些文件很大。所有这些文件都加载到内存中，还是延迟加载？

如果它们被加载到内存中，是否有`NSFileWrapper`类似功能的替代方法不会将文件加载到内存中？我可以挂钩的东西`UIDocument`？

* * *

这适用于基于文档的应用程序，它使用`UIDocument`与 iCloud 同步的 's。文档中可以嵌入图像和视频。每个图像/视频都有一个预览图像（缩略图），显示在 HTML 文档中。不应将完整尺寸的图像或视频加载到内存中，而应按需加载。

我还需要一种方法来添加资源而不将其加载到内存中。像“initWithAsset:(ALAsset *)”这样的东西是理想的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-27T11:01:54.667

不久前我制作了一个生成视频的应用程序。然后使用 UIDocument 子类将此视频保存为特定的文件格式。

使应用程序在执行时不会耗尽内存的唯一方法`contentsForType:error:`是将视频输出到 tmp 目录中的文件，并使用`NSFileWrapperReadingWithoutMapping`-option 使用视频的 url 初始化文件包装器，以防止它将视频加载到内存中，而只是复制到文件中。

```
- (id)contentsForType:(NSString *)typeName error:(NSError **)outError {
    if (self.fileWrapper == nil) {
        self.fileWrapper = [[NSFileWrapper alloc] initDirectoryWithFileWrappers:nil];
    }

        if (self.videoURL != nil) {

            NSError *fileReadError;
            NSFileWrapper *videoFileWrapper = [[NSFileWrapper alloc] initWithURL:self.videoURL options:NSFileWrapperReadingWithoutMapping error:&fileReadError];

            if(fileReadError){
                NSLog(@"File read error: %@", [fileReadError localizedDescription]);
            }else {
                [videoFileWrapper setPreferredFilename:@"video.mov"];
                [self.fileWrapper addFileWrapper:videoFileWrapper];
            }        

        }
//...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T10:19:16.947

从文档中并不完全清楚，但我 99% 肯定`NSFileWrapper`会记忆映射*所有内容*。的主要用例`NSFileWrapper`是将文件嵌入文档中，您可能需要始终访问所述文件。

你想用文件包装器做什么？我假设如果您要映射整个目录，则不一定要将媒体嵌入文档中，但也许我弄错了。如果您可能会更多地谈论您的用例，因为这将影响您可能选择的替代方案。

# typo3 - 错字3 css_styled 内容编辑源

> ID：13621505
> 
> 赞同：2
> 
> 时间：2012-11-29T08:21:05.567
> 
> 标签：typo3

我有以下问题：

我正在使用typo3 4.7.7，并在后端添加自定义列。我可以通过在 /typo3conf/extTables.php 中放置一个配置数组来做到这一点

```
$TCA["tt_content"]["columns"]["colPos"]["config"]["items"] = array (
"3" => array ("Border,"3"),
"2" => array ("Right","2"),
"1" => array ("Left","1"),
"0" => array ("Normal","0"),
"5" => array ("Central","5"),
"6" => array ("Border","6"),
"4" => array ("Footer","4")
); 
```

然后设置：

```
mod.SHARED.colPos_list=0,1,2,3,4,5,6 
```

在 TSconfig 中。

它正在工作，我喜欢我的新专栏 :)，但有一个问题。我希望能够使用 css_styled_content 将我的新列映射到我的 html 模板。这是不可能的，因为 css_styled_content 的“get”常量是硬编码的，我无法使用“content.getFooter”之类的东西。目前，我可以获得我的内容的唯一方法是这样的：

```
...
page.10 = CONTENT
page.10.table = tt_content
page.10.select {
  orderBy = sorting
  where = colPos = 4
}
  page.10.renderObj = COA
  page.10.renderObj {
  10 = TEXT
  10.field = header
  20 = TEXT
  20.field = bodytext
}
... 
```

这是很多代码，所以我想知道是否有办法“让”CSC 识别我的新列，这样我就可以使用“content.getMYCUSTOM_COLUMN_NAME”。

PS 我不想使用 templavoila，我在 /static/setup.txt 下的 CSC 源代码中找到了一些东西：

```
# Clear out any constants in this reserved room!
styles.content >

# get content
styles.content.get = CONTENT
styles.content.get {
    table = tt_content
    select.orderBy = sorting
    select.where = colPos=0
    select.languageField = sys_language_uid
}

# get content, left
styles.content.getLeft < styles.content.get
styles.content.getLeft.select.where = colPos=1

# get content, right
styles.content.getRight < styles.content.get
styles.content.getRight.select.where = colPos=2

# get content, margin
styles.content.getBorder < styles.content.get
styles.content.getBorder.select.where = colPos=3

# get news
styles.content.getNews < styles.content.get
styles.content.getNews.select.pidInList = {$styles.content.getNews.newsPid}

# Edit page object:
styles.content.editPanelPage = COA
styles.content.editPanelPage {
    10 = EDITPANEL
    10 {
        allow = toolbar,move,hide
        label.data = LLL:EXT:css_styled_content/pi1/locallang.xml:eIcon.page
        label.wrap = |&nbsp;<b>%s</b>
    }
} 
```

然后我尝试添加：

```
# get content, footer
styles.content.getFooter < styles.content.get
styles.content.getFooter.select.where = colPos=4 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:14:01.940

你在正确的轨道上。尝试创建自己的内容对象：

```
temp.footer < styles.content.get
temp.footer.select.where = colPos=4

page = PAGE
page.100 < temp.footer 
```

# android - 圆形页面指示器

> ID：13621508
> 
> 赞同：3
> 
> 时间：2012-11-29T08:21:17.950
> 
> 标签：android

在为页面滑动制作圆形页面指示器时，我遇到了错误

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >    

      <RelativeLayout  android:orientation="horizontal" android:id="@+id/winyear"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:background="#36648B" >   

    <TextView android:layout_width="wrap_content" android:text="Product" android:layout_centerInParent="true"
             android:layout_height="wrap_content" android:id="@+id/produt" />

        </RelativeLayout>

    <android.support.v4.view.ViewPager
        android:id="@+id/pager" android:layout_below="@+id/winyear"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />

   <com.viewpagerindicator.CirclePageIndicator
        android:id="@+id/indicator" android:layout_below="@+id/pager"
         android:padding="10dip" 
         android:layout_height="wrap_content"
          android:layout_width="fill_parent" /> 

</RelativeLayout> 
```

* * *

```
public class Details extends FragmentActivity{

    ViewPager pager;
  MyFragmentPagerAdapter pagerAdapter;     

 CirclePageIndicator mIndicator;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.detail);    
    pager = (ViewPager) findViewById(R.id.pager);

    FragmentManager fm = getSupportFragmentManager();      
    pagerAdapter = new MyFragmentPagerAdapter(fm,currency);   
      pager.setAdapter(pagerAdapter);

      mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
      mIndicator.setViewPager(pager);
   } 
```

> findClass(PathClassLoader.java:240) 11-29 13:08:52.579: E/AndroidRuntime(470): at java.lang.ClassLoader.loadClass(ClassLoader.java:551) 11-29 13:08:52.579: E/ AndroidRuntime(470): at java.lang.ClassLoader.loadClass(ClassLoader.java:511) 11-29 13:08:52.579: E/AndroidRuntime(470): at android.view.LayoutInflater.createView(LayoutInflater.java:471 ) 11-29 13:08:52.579: E/AndroidRuntime(470): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 11-29 13:08:52.579: E/AndroidRuntime(470): .. . 20 more 11-29 13:13:52.652: I/Process(470): 发送信号。PID：470 SIG：9 loadClass(ClassLoader.java:511) 11-29 13:08:52.579: E/AndroidRuntime(470): 在 android.view.LayoutInflater.createView(LayoutInflater.java:471) 11-29 13:08:52.579: E/ AndroidRuntime(470): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 11-29 13:08:52.579: E/AndroidRuntime(470): ... 20 更多 11-29 13:13:52.652: I/Process(470)：发送信号。PID：470 SIG：9 loadClass(ClassLoader.java:511) 11-29 13:08:52.579: E/AndroidRuntime(470): 在 android.view.LayoutInflater.createView(LayoutInflater.java:471) 11-29 13:08:52.579: E/ AndroidRuntime(470): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 11-29 13:08:52.579: E/AndroidRuntime(470): ... 20 更多 11-29 13:13:52.652: I/Process(470)：发送信号。PID：470 SIG：9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-07T15:43:51.687

当我遇到同样的问题时，这对我来说很奇怪。我正在开发的应用程序运行良好，直到我在应用程序的 build.gradle 文件中重新排序了几个依赖库。恢复到原始顺序后，应用程序运行成功。

** 发现同时使用这两种方法也会产生相同的问题，因此请仅使用您需要的一种。

```
compile 'com.google.android.gms:play-services:7.5.0'*/
compile 'com.google.android.gms:play-services-analytics:7.5.0' 
```

** 对我来说，只使用 compile 'com.google.android.gms:play-services-analytics:7.5.0' 解决了这个问题。

# mysql - 如何在不改变表结构的情况下更新

> ID：13621512
> 
> 赞同：0
> 
> 时间：2012-11-29T08:21:29.003
> 
> 标签：mysql

我有一个表，其结构如下。

```
create table test_table (id INT NOT NUll AUTO_INCREMENT
                         , name varchar(100),
                         primary key (id))ENGINE=INNODB
Select * from test_table;
id   name
1    a
2    b
3    c 
```

现在我想将 id 增加一个数字让我们说 2 所以最终结果应该是

```
Select * from test_table;
id   name
3    a
4    b
5    c 
```

我可以这样做的方法是，首先删除 PK 和自动增量，然后更新表：

```
update test_table set id=id+2; 
```

另一种方法是制作一个没有 PK 和自动增量的临时表，然后将结果提取到主表。

有没有其他方法可以在不破坏表结构的情况下做到这一点？我正在使用 MYSQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:26:18.050

这是在 SQL 中更新表的查询：- 它的通用

```
UPDATE table_name SET column1=value, column2=value2,WHERE some_column=some_value; 
```

请点击链接了解更多信息

[更新查询](http://www.w3schools.com/sql/sql_update.asp)

谢谢，帕万

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:58:17.113

在您的示例中，您需要先删除 PK 以`id`在更新过程中允许（临时）重复。为避免重复，您必须执行有序更新：

```
UPDATE test_table SET id = id + 2 ORDER BY id DESC; 
```

这将更新最大值为`id`first 的记录，从而避免冲突。

显然，如果要减小 的值`id`，请使用“ `ORDER BY id ASC`”。

# node.js - 为什么node.js path.resolve空字符串到当前工作目录？

> ID：13621513
> 
> 赞同：1
> 
> 时间：2012-11-29T08:21:29.903
> 
> 标签：node.js

根据[文档](http://nodejs.org/api/path.html#path_path_resolve_from_to)，node.js 的`path.resolve`函数将传递的参数转换为绝对路径。但是，当我将不存在的文件传递给它时`''`，它会返回当前工作目录：

```
~$ node -v
v0.8.14
~$ node
> require('path').resolve('')
'/Users/perimosocordiae'
> require('fs').statSync('')
Error: ENOENT, no such file or directory '' 
```

这是预期的行为吗？当输入路径不存在时，是否存在“已解析”路径存在的任何其他情况，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:26:54.310

文档的其他部分说：

> 如果使用所有`from`路径后仍然没有找到绝对路径，则也使用当前工作目录。

和

> 不同的路径不需要存在，也可能是文件。

`path.resolve`可以将文档视为一系列`cd`命令 - 例如，如果我从`from`（或者`process.cwd()`如果没有`from` 指定，如您的示例）开始并使用`to`.

# postgresql - 表和索引的预期存储大小

> ID：13621514
> 
> 赞同：0
> 
> 时间：2012-11-29T08:21:31.087
> 
> 标签：postgresql

我在 Oracle Linux Server 6.3 版上使用 postgresql 9.2.1。

我正在努力获取表和索引的预期存储大小。

感谢这个网站的一些建议，我为下面的表格制作了我的公式......

-- 如果是 TABLE...

```
postgres=# \d test
           Table "public.test"
    Column     |         Type          | Modifiers 
---------------+-----------------------+-----------
 c1            | integer               | not null
 c2            | character varying(20) | not null
 c3            | character varying(8)  | not null
 c4            | character varying(6)  | not null
 c5            | character varying(15) | 
 c6            | character varying(20) | 
 c7            | character varying(20) | 
 c8            | character varying(20) | 
Indexes:
    "idx_test" PRIMARY KEY, btree (c1, c3, c4, c5)
Tablespace: "test"

postgres=# insert into test values(1, 
                                   '11111111111111111111', -- 20(exactly same with max length of each column)
                                   '11111111',             -- 8
                                   '111111',               -- 6
                                   '111111111111111',      -- 15
                                   '11111111111111111111', -- 20
                                   '11111111111111111111', -- 20
                                   '11111111111111111111');-- 20
INSERT 0 1

postgres=# select * from pgstattuple('test');           
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent                          
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------
      8192 |           1 |        81 |          0.99 |                0 |              0 |                  0 |       8072 |        98.54 

postgres=# insert into test values(2, 
                                   '11111111111111111111', -- 20(exactly same with max length of each column)
                                   '11111111',             -- 8
                                   '111111',               -- 6
                                   '111111111111111',      -- 15
                                   '11111111111111111111', -- 20
                                   '11111111111111111111', -- 20
                                   '11111111111111111111');-- 20      
INSERT 0 1

postgres=# select * from pgstattuple('test');
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent 
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------
      8192 |           2 |       162 |          1.98 |                0 |              0 |                  0 |       7980 |        97.41 
```

所以，我发现每个页面可以容纳 88(X) 个元组。

*   实际存储中的元组大小：8072（第一次插入后的空闲空间）-7980（第二次插入后的空闲空间）= 92
*   页面默认值 = 8192 - 8072（第一次插入后的空闲空间） - 92（元组大小）= 28
*   9182 - 28 = 92 * X（每页的最大元组数）

如果是索引...

```
postgres=# \d test_pkey
           Index "public.idx_test"
    Column     |         Type          |  Definition   
---------------+-----------------------+---------------
 c1            | integer               | c1
 c2            | character varying(20) | c2
 c3            | character varying(8)  | c3
 c4            | character varying(6)  | c4
primary key, btree, for table "public.test"

postgres=# truncate table test;
postgres=# vacuum;
postgres=# analyze;

postgres=# insert into test values(1, 
                                   '11111111111111111111', -- 20(exactly same with max length of each column)
                                   '11111111',             -- 8
                                   '111111',               -- 6
                                   '111111111111111',      -- 15
                                   '11111111111111111111', -- 20
                                   '11111111111111111111', -- 20
                                   '11111111111111111111');-- 20
INSERT 0 1

postgres=# select * from pgstattuple('idx_test');
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent 
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------
     16384 |           1 |        56 |          0.34 |                0 |              0 |                  0 |       8088 |        49.37
(1 row)

postgres=# select * from pgstatindex('idx_test');
 version | tree_level | index_size | root_block_no | internal_pages | leaf_pages | empty_pages | deleted_pages | avg_leaf_density | leaf_fragmentation 
---------+------------+------------+---------------+----------------+------------+-------------+---------------+------------------+--------------------
       2 |          0 |       8192 |             1 |              0 |          1 |           0 |             0 |             0.79 |                  0
(1 row)

postgres=# insert into test values(1, 
                                   '11111111111111111111', -- 20(exactly same with max length of each column)
                                   '11111111',             -- 8
                                   '111111',               -- 6
                                   '111111111111111',      -- 15
                                   '11111111111111111111', -- 20
                                   '11111111111111111111', -- 20
                                   '11111111111111111111');-- 20

INSERT 0 1       

postgres=# select * from pgstattuple('idx_test');                                                                                                                                                                                                                                                   
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------             
     16384 |           2 |       112 |          0.68 |                0 |              0 |                  0 |       8028 |           49              
(1 row)                                                                                                                                                

postgres=# select * from pgstatindex('idx_test');                                                                                            
 version | tree_level | index_size | root_block_no | internal_pages | leaf_pages | empty_pages | deleted_pages | avg_leaf_density | leaf_fragmentation 
---------+------------+------------+---------------+----------------+------------+-------------+---------------+------------------+--------------------
       2 |          0 |       8192 |             1 |              0 |          1 |           0 |             0 |             1.52 |                  0 
(1 row) 
```

再次，我发现每个页面可以容纳 135(Y) 个元组。

*   实际存储中的元组大小：8088（第一次插入后的空闲空间）-8028（第二次插入后的空闲空间）= 60
*   页面默认值 = 8192 - 8088（第一次插入后的空闲空间） - 60（元组大小）= 44
*   8192 - 44 = 60 * Y（每页中的最大元组数）

当我在表中插入 1350 行时......我得到了这个......

```
postgres=# select * from pgstattuple('test');
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent 
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------
    131072 |        1350 |    109350 |         83.43 |                0 |              0 |                  0 |       6424 |          4.9
(1 row)

postgres=# select * from pgstattuple('idx_test');
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent 
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------
     90112 |        1350 |     54000 |         59.93 |                0 |              0 |                  0 |      13580 |        15.07
(1 row)

postgres=# select * from pgstatindex('idx_test');
 version | tree_level | index_size | root_block_no | internal_pages | leaf_pages | empty_pages | deleted_pages | avg_leaf_density | leaf_fragmentation 
---------+------------+------------+---------------+----------------+------------+-------------+---------------+------------------+--------------------
       2 |          1 |      81920 |             3 |              0 |          9 |           0 |             0 |            81.49 |                  0
(1 row) 
```

表格的文件大小？

1350(行数) / 88(X) = 15.34 --> 这意味着需要 16 页，这意味着文件大小为 16*8192 = 131072。看起来不错。

但是，索引大小不同...

1350（行数）/ 135（Y）= 10 正好...文件大小需要 10*8192，但需要 90112。

再插入 1 行，除此之外，应该扩展 index_size（如果我是对的）所以我尝试了但没有更改。

```
postgres=# insert into test values(27108,'sanjuk1052','20121022','233338','172,20,30,177','win7','IE','9,0');
INSERT 0 1
postgres=# select * from pgstattuple('test');
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent 
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------
    131072 |        1351 |    109431 |         83.49 |                0 |              0 |                  0 |       6332 |         4.83
(1 row)

postgres=# select * from pgstattuple('idx_test');
 table_len | tuple_count | tuple_len | tuple_percent | dead_tuple_count | dead_tuple_len | dead_tuple_percent | free_space | free_percent 
-----------+-------------+-----------+---------------+------------------+----------------+--------------------+------------+--------------
     90112 |        1351 |     54040 |         59.97 |                0 |              0 |                  0 |      13536 |        15.02
(1 row)

postgres=# select * from pgstatindex('idx_test');
 version | tree_level | index_size | root_block_no | internal_pages | leaf_pages | empty_pages | deleted_pages | avg_leaf_density | leaf_fragmentation 
---------+------------+------------+---------------+----------------+------------+-------------+---------------+------------------+--------------------
       2 |          1 |      81920 |             3 |              0 |          9 |           0 |             0 |            81.55 |                  0
(1 row) 
```

我什至不能确定这种方法是否合理，但即使不完美，也必须完成工作......

我需要我自己的公式，特别是为了获得预期的索引大小，包括由 TOAST 决定的附加文件......

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:21:04.933

您在这里遇到的真正问题之一是 varchar 不使用恒定数量的空间。随着时间的推移，这可能会使您的页面估算值下降（您的估算值基本上是最大值，可能会更少）。使用您的表格结构，我认为任何东西都不会被烘烤。

这也会影响您的索引，因为您有可变长度字段。因此，您可以预期您的估计代表一个最大的、未知的准确数量。实际大小将取决于您的实际数据，而不仅仅是架构和行数。

# php - MySQL 报告语法错误，但我没有看到？

> ID：13621515
> 
> 赞同：-2
> 
> 时间：2012-11-29T08:21:34.567
> 
> 标签：php, mysql

我正在尝试运行此查询：

```
INSERT INTO table_a (fb_uid, from, to, time) VALUES (12345,'blah','test','2012-12-13 11:30:00') 
```

但我得到：

```
You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near
'from, to, time) VALUES (12345,'blah','test','2012-12-13 11:3' at line 1 
```

查询对我来说似乎很好，它有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T08:22:45.507

在你的字段上使用反引号来防止与 MySQL 保留字的冲突：

```
INSERT INTO table_a (`fb_uid`, `from`, `to`, `time`) VALUES (12345,'blah','test','2012-12-13 11:30:00') 
```

**在这种情况下，`from`和`to`是保留字**

[有关更多信息和保留字的完整列表，请参见此处](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:28:26.063

`FROM`并且`TO`是保留关键字，

```
INSERT INTO table_a (fb_uid, `from`, `to`, time).... 
```

*   [MySQL 保留关键字列表](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:24:55.477

时间是一个受限词，这是否有帮助：

```
INSERT INTO table_a (`fb_uid`, `x`, `y`, `time`) VALUES (12345,'blah','test','2012-12-13 11:30:00') 
```

逃避一切以确保。

# ios - 如何使用 IOS 库将 xls 转换为 csv？

> ID：13621523
> 
> 赞同：1
> 
> 时间：2012-11-29T08:22:21.810
> 
> 标签：ios, cocoa-touch, excel, csv

我需要在我的 IOS 应用程序中读取 xls 文件。首先，我想将xls文件转换为csv格式文件，然后我的应用程序解析csv文件，但是我找不到任何将xls转换为csv的ios库，请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:21:50.083

如果您有一个 .xls 文件，您可以使用开源[DHlibxls](https://github.com/dhoerl/DHlibxls)库将该文件读入您​​的应用程序。这是一个包装了基于 C 的库的 ObjectiveC 框架。图书馆相当成熟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:42:34.957

ios 或任何 objecive-framework 不提供任何东西来访问微软的 xls :(

将-xls 转换为/从 csv 本身就是其中的一个项目！！！

除此之外，还有不同格式的 xls，现在是 xlsx 文件。编写一个 xls 并以正确的方式读回它是一项非常繁琐的任务。然而，我们已经设法阅读了它，但它不是 100% 有效的 :(

我想在不久的将来你可能想要移动到 xlsx 文件，那么你的任务会变得更加困难。您可以检查自己，将文件扩展名更改为 .zip 并解压缩，您会看到许多文件，一个有行号，另一个有列，第三个有链接，第四个有内容等等。映射和获得正确的形式并非不可能，但需要大量工作。

可以有很多其他的方法，我可以建议使用java api来做，或者甚至将你的xls从excel保存到csv目录，那么你的工作会很容易。

# python - Python：当从另一个类中调用初始方法时，类方法调用其他类方法

> ID：13621533
> 
> 赞同：1
> 
> 时间：2012-11-29T08:22:55.960
> 
> 标签：python, class, methods

我正在开发一个精心制作的文件切换器（没有更好的术语），并且遇到了问题。简化，考虑下面的代码：

```
class Foo(object):
    def __init__(self):
        self.foo = Bar()
        self.foo.baz()

class Bar(object):
    def baz(self):
        print("baz")
        self.qux()
    def qux(self):
        print("qux") 
```

当 Foo 类启动并调用“self.foo.baz()”时，输出中不会打印任何内容。怎么会？在这种情况下，有没有办法从 Foo 中正确调用 Bar 类中的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:25:28.157

`__init__`在创建实例之前不会调用。如果您创建一个实例：

```
a = Foo() 
```

然后你应该看到打印的东西。

# python - 从不同目录导入文件

> ID：13621540
> 
> 赞同：6
> 
> 时间：2012-11-29T08:23:23.880
> 
> 标签：python, python-2.7

我正在使用python 2.7。我写了一个脚本，我需要从不同文件夹中的其他文件导入一个函数。我的脚本在路径中

```
C:\python\xyz\xls.py 
```

具有我需要调用的功能的文件路径是

```
C:\python\abc.py 
```

我试过这样

```
from python.abc import * 
```

但它不工作。有没有其他方法可以调用该函数，或者我需要将文件移动到同一目录中？请帮忙谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T08:28:22.507

您可以从文件中动态加载模块：

```
import imp
modl = imp.load_source('modulename', '/path/to/module.py') 
```

[imp 模块文档](http://docs.python.org/2/library/imp.html)将为您提供更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T08:26:57.977

你 cat 设置 PYTHONPATH 环境变量：

```
c:\> set PYTHONPATH=c:\python 
```

然后，通常：

```
from abc import * 
```

或者，如果您不想或无法更改环境，则可以在运行时更改路径：

```
import sys
sys.path.append(r'c:\Python')
from abc import * 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T08:27:12.943

加入`C:\python`_`sys.path`

还添加一个`__init__.py`文件，`C:\python`以便 python 解释器可以从这个文件夹中导入文件

你应该通过[链接](http://docs.python.org/2/library/sys.html#sys.path)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T08:30:56.383

也看看[import_file](http://pypi.python.org/pypi/import_file/1.11)。一些例子：

`>>>from import_file import import_file`

`>>>mylib = import_file('c:\mylib.py')`

`>>>another = import_file('relative_subdir/another.py')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-21T10:38:34.243

对于 python 3.5 及更高版本，请使用它。

```
import importlib.util
spec = importlib.util.spec_from_file_location("name", "path/to/file")
foo = importlib.util.module_from_spec(spec)
spec.loader.exec_module(foo)
foo.MyClass() 
```

# windows - 是否可以将非控制台 Win32 应用程序附加到调用 cmd shell？

> ID：13621542
> 
> 赞同：6
> 
> 时间：2012-11-29T08:23:28.877
> 
> 标签：windows, winapi, visual-c++, console-application, cmd

当我有一个 Win32 非控制台应用程序（AFAIK，Win32 应用程序的控制台功能链接到 exe）时，从控制台启动它`cmd.exe`会立即返回命令提示符，“在后台”运行应用程序（oc它可以有各种各样的 GUI，甚至可以打开自己的控制台窗口）

是否可以在非控制台可执行文件中检测到它是从 cmd.exe 启动的并将其“附加”到启动的 cmd.exe 上？

请注意，有各种与此相关的问题/答案，但似乎尚未调查这种确切的方法。（也许那样不可能。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T08:49:30.353

你可以很容易地做到这一点。只需传递`ATTACH_PARENT_PROCESS`给[`AttachConsole`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681952.aspx).

最终结果是否合理或实用，我不能说。两个进程都会读取和写入同一个控制台，这可能会变得很奇怪。

# javascript - 使用 jQuery 动态插入 MathML

> ID：13621545
> 
> 赞同：1
> 
> 时间：2012-11-29T08:23:34.397
> 
> 标签：javascript, jquery, xml, dom, mathml

我编写了一个讨厌的小 javascript 函数，它创建了一个 MathML Matrix DOM。我的问题是，当我使用 jQuery 的 append(MathMLDOM) 插入 DOM 时；它没有正确显示。但是当我复制粘贴生成的 XML 并将其手动插入 HTML 文档时，它显示得很好。为什么不追加工作，有什么方法可以动态插入 MathML DOM？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:32:23.130

您是否附加了正确的 XML 命名空间？这对我有用：

```
$('#foo').append('<math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>a</mi><mi>i</mi></msup><mo>+</mo><mi>b</mi></math>') 
```

没有命名空间，没有 MathML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T18:19:38.650

是的，您需要命名空间，它需要在元素创建时提供。文档对象的 createElementNS() 方法完成了这个：

```
document.createElementNS("http://www.w3.org/1998/Math/MathML", "element"); 
```

其中“element”是一个字符串，如“mo”、“mfrac”、“math”等。您可以将其包装在插入正确命名空间的函数中。无论如何，它可以在 Firefox 中运行。

```
var mathml = function(el) {
    return document.createElementNS("http://www.w3.org/1998/Math/MathML", el);
}; 
```

之后您可以从中创建一个 jQuery 对象：

```
$mi1 = $( mathml("mi") ).text(a);
$mn1 = $( mathml("mn") ).text(2);
$term1 = $( mathml("msup") ).append($mi1).append($mn1); 
```

会给你一个内容为²的 $term1 jQuery 对象。

# c# - WPF 中 TextBox 中的 ScrollToCaret 在哪里？

> ID：13621549
> 
> 赞同：5
> 
> 时间：2012-11-29T08:23:41.510
> 
> 标签：c#, wpf, textbox

我找不到那个功能。基本上我有一个多行文本框，当我执行搜索时，我会突出显示结果。但是，如果结果不在视图中，我将不得不手动向下滚动，直到找到突出显示的结果，这超出了“查找”功能的目的。

我不想使用 RichTextBox，因为我遇到了一些性能问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T08:33:56.047

您可以[`GetLineIndexFromCharacterIndex`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.getlineindexfromcharacterindex.aspx)结合使用[`ScrollToLine`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.scrolltoline.aspx)：

```
var selectionStart = x;
var selectionLength = y;
textBox.Select(selectionStart, selectionLength);
textBox.ScrollToLine(textBox.GetLineIndexFromCharacterIndex(textBox.SelectionStart)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-13T00:48:49.367

ScrollToLine 对我来说不够准确。我的文本框启用了换行，因此行索引不可靠。相反，我使用了这个：

```
textBox.CaretIndex = selectionStart;
textBox.ScrollToEnd();
textBox.Select(selectionStart, selectionLength); 
```

基本上， ScrollToEnd 执行滚动到插入符号。

# loops - 一个与嵌套循环有关的谜题

> ID：13621550
> 
> 赞同：4
> 
> 时间：2012-11-29T08:23:46.557
> 
> 标签：loops, time, for-loop, nested-loops

对于给定的输入 N，包含的语句执行了多少次？

```
for i in 1 … N loop
  for j in 1 … i loop
    for k in 1 … j loop
      sum = sum + i ;
    end loop;
  end loop;
end loop; 
```

任何人都可以找出一个简单的方法或公式来做到这一点。请解释。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T09:11:47.870

*   First, I written a `C` code to generate sum:

> ```
> int main(){
>   int i =0, k =0, j =0, n =0;
>   int N =0; 
>   int sum =0;
>   N =10;
>   for (n=1; n <= N; n++){
>   // unindented code here
>   sum =0;
>   for (i=1; i<=n; i++)
>       for (j=1; j<=i; j++)
>           for (k=1; k<=j; k++)
>               sum++;
> 
>   printf("\n N=%d  sum = %d",n, sum); 
>   }
>   printf("\n");
> } 
> ```

*   Simple compile and generate result for `N=1 to N=10` :

`$ gcc sum.c`
`$ ./a.out`

```
 N=1  sum = 1
 N=2  sum = 4
 N=3  sum = 10
 N=4  sum = 20
 N=5  sum = 35
 N=6  sum = 56
 N=7  sum = 84
 N=8  sum = 120
 N=9  sum = 165
 N=10  sum = 220 
```

*   Then, Tried to explore `How this works?` with some diagrams:

    For, `N=1`:

> ```
> i<=N,     (i=1)       
>             |
> j<=i,     (j=1)       
>             |
> k<=j,     (K=1)       
>             |
> sum=0\.    sum++       ---> sum = 1 
> ```

That is (1) = 1

For, `N=2`:

> ```
> i<=N,     (i=1)-------(i=2)
>             |     |-----|-----|
> j<=i,     (j=1) (j=1)      (j=2)
>             |     |     |----|----|
> k<=j,     (K=1) (K=1) (K=1)    (K=2)               
>             |     |     |        |    
> sum=0,    sum++  sum++ sum++   sum++  --> sum = 4 
> ```

That is (1) + (1 + 2) = 4

For, `N=3`:

> ```
> i<=N,     (i=1)-------(i=2)--------------------(i=3)
>             |     |-----|-----|        |---------|-------------|
> j<=i,     (j=1) (j=1)      (j=2)     (j=1)      (j=2)        (j=3)
>             |     |     |----|----|    |     |----|----|    |-----|-----|
> k<=j,     (K=1) (K=1) (K=1)    (K=2) (K=1) (K=1)    (K=2) (K=1) (K=2) (K=3)
>             |     |     |        |     |     |        |     |     |        |
> sum=0,    sum++  sum++ sum++  sum++ sum++  sum++    sum++  sum++ sum++  sum++
>             --> sum = 10 
> ```

That is (1) + (1 + 2) + ( 1 + 2 + 3 ) = 10

```
N = 1, (1)    = 1                                           

N = 2, (1) + (1 + 2)    = 4

N = 3, (1) + (1 + 2) + (1 + 2 + 3)  = 10

N = 4, (1) + (1 + 2) + (1 + 2 + 3) + (1 + 2 + 3 + 4)  = 20

N = 5, (1) + (1 + 2) + (1 + 2 + 3) + (1 + 2 + 3 + 4) + (1 + 2 + 3 + 4 + 5)  = 35 
```

Finally, I could understood that sum of `N` in three loop is:

(1) + (sum 0f 1 to 2) + ... + (sum of 1 to (N-2)) + (sum of 1 to (N-1) ) + (sum of 1 to N)

or we can write it as:

=> (1) + (1 + 2) + ...+ (1 + 2 +....+ i) + ... + (1 + 2 + ....+ N-1) + (1 + 2 + ....+ N)

=> ( N * 1 ) + ( (N-1) * 2) + ( (N-2) * 3) +...+ ( (N -i+1) * i ) +... + ( 1 * N)

You can refer here for simplification calculations: [(I asked **HERE** )](https://math.stackexchange.com/questions/247150/how-to-simplify-this-equation)
![enter image description here](../Images/a706d30292a0038eabcc9563b36a6281.png)

[**YOUR ANSWER**]

`= ( ((N) * (N+1) * (N+2)) / 6 )`

And, I think its correct. I checked as follows:

```
N = 1,    (1 * 2 * 3)/6  = 1

N = 2,    (2 * 3 * 4)/6 = 4

N = 3,    (3 * 4 * 5)/6 = 6

N = 4,    (4 * 5 * 6)/6 = 10

N = 5,    (5 * 6 * 7)/6 = 35 
```

Also, The complexity of this algorithm is O(n³)

**EDIT**:

The following loop also has same numbers of count, that is `= ( ((N) * (N+1) * (N+2)) / 6 )`

```
for i in 1 … N loop
  for j in i … N loop
    for k in j … N loop
      sum = sum + i ;
    end loop;
  end loop;
end loop; 
```

# uml - UML BPMN 示例

> ID：13621553
> 
> 赞同：3
> 
> 时间：2012-11-29T08:24:00.170
> 
> 标签：uml, bpmn

我正在寻找使用**UML**和/或**BPMN**建模的基本业务流程（订购服务或类似的东西）用于学习目的。有没有我可以掌握的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-31T15:50:02.580

你可以在这里找到一些例子：

*   BPMN 示例：[https ://repository.genmymodel.com/diagrams/bpmn](https://repository.genmymodel.com/diagrams/bpmn)
*   UML 示例：[https ://repository.genmymodel.com/diagrams/uml](https://repository.genmymodel.com/diagrams/uml)

选择一个项目并单击绿色按钮以克隆一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:18:16.253

您可以在 bpmn 主网站上找到一些示例：[www.bpmn.org](http://www.bpmn.org)；您可以单击“示例”选项卡，您将找到一些 BPMN 模型示例。

我还建议下载 BonitaStudio，您可以在其中找到一些示例并运行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:51:59.103

You may try downloading Bonita Open Solution from Bonitasoft's site. The tool comes with a set of Business Processes provided as example like a hiring process. You'll also have the possibility to find some processes on BOS community.

Check here: [http://www.bonitasoft.com/products/BPM_downloads](http://www.bonitasoft.com/products/BPM_downloads)

*(Disclaimer: I work at Bonitasoft.)*

Maybe other vendors/tools/community provide some examples.

# javascript - Javascript中的数字和toFixed，toPrecision？

> ID：13621558
> 
> 赞同：4
> 
> 时间：2012-11-29T08:24:14.100
> 
> 标签：javascript, numbers

关于其中的著名问题 `1.01+1.02`是`2.0300000000000002`

一种解决方法是使用`toFixed`：例如

```
(1.01+1.02).toFixed(2) --->"2.03" 
```

但我看到了 toPrecision 的解决方案

```
parseFloat((1.01+1.02).toPrecision(10))-->"2.03" 
```

`n`但是让我们看看

*   `toFixed(n)`

*   `toPrecision(n)`

我怎么知道 n 是什么？

```
 0.xxxxxxxxxxx
+
  0.yyyyyyyyyyyyy
---------------------
  0.zzzzzzzzzzzzzzzzzzzzzzzzz
                ^ 
                |
-----??????------ 
```

添加的每个数字都可以有不同的十进制数字...

例如 ：

`1.0002+1.01+1.03333`--> 3.0435300000000005

我将如何计算`n`这里？这个（特定）问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:34:59.920

对于在这种情况下的加法，我会检查每个操作数中的小数位数。

在最简单的情况下，小数位数最多的操作数的小数位数是 n 的值。

一旦你有了这个，使用你喜欢的任何方法来截断你的值。然后摆脱尾随零。

在 1.06 + 1.04 等情况下，您可能会遇到尾随零，第一步将带您到 1.10，然后截断零将得到 1.1

**在您的最后一个示例中，1.0002+1.01+1.03333 最大小数位数为 5，因此您剩下 3.04353 并且没有尾随零要截断。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:40:14.360

这将返回预期的输出：

```
function add(){
    // Initialize output and "length" properties
    var length = 0;
    var output = 0;
    // Loop through all arguments supplied to this function (So: 1,4,6 in case of add(1,4,6);)
    for(var i = 0; i < arguments.length; i++){
        // If the current argument's length as string is longer than the previous one (or greater than 0 in case of the first argument))
        if(arguments[0].toString().length > length){
            // Set the current length to the argument's length (+1 is to account for the decimal point taking 1 character.)
            length = arguments[0].toString().length +1;
        }
        // Add the current character to the output with a precision specified by the longest argument.
        output = parseFloat((output+arguments[i]).toPrecision(length));
    }
    // Do whatever you with with the result, here. Usually, you'd 'return output;'
    console.log(output);
}
add();                     // Returns 0
add(1,2,3);                // Returns 6
add(1.01,2.01,3.03);       // Returns 6.05
add(1.01,2.0213,3.3333);   // Returns 6.3646
add(11.01,2.0213,31.3333); // Returns 44.3646 
```

`parseFloat`甚至为您摆脱尾随零。

此函数接受任意数量的数字作为参数，然后在添加它们时将这些数字相加，同时考虑数字的字符串长度。添加中使用的精度会动态修改以适应“当前添加的”参数的长度。

[小提琴](http://jsfiddle.net/F9HKX/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-15T09:51:25.073

如果你在做计算，你有几个选择：

*   将数字乘以例如 100，以转换为整数，然后进行计算，然后再次转换回来
*   做计算，不用担心舍入误差，然后在显示时舍入结果

如果您正在处理货币/货币，第一个选择可能不是一个坏选择。如果你只是在做科学数学，我个人不会担心，只需在显示时将结果四舍五入，例如到 6 个有效数字，这是我的 c++ 编译器的默认值（gcc；不确定它是否在 c++ 中标准与否，但如果您`1.234567890`在 gcc c++ 中打印，则输出为`1.23457`，并且可以避免问题）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T03:51:22.267

```
var a = 216.57421;

a.toPrecision(1); // => '200' because 216 with 1 < 5;
a.toPrecision(2); // => '220' because 216 with 6 >= 5;

a.toFixed(1); // => 216.6 because 7 >= 5;
a.toFixed(2); // => 216.57 because 4 < 5; 
```

# sql - Postgresql 在函数调用中嵌套 SELECT 语句

> ID：13621560
> 
> 赞同：1
> 
> 时间：2012-11-29T08:24:28.620
> 
> 标签：sql, postgresql, tsvector

我目前在 Postgresql 数据库中设置全文搜索，如本手册页所述：[http ://www.postgresql.org/docs/9.0/static/textsearch-tables.html](http://www.postgresql.org/docs/9.0/static/textsearch-tables.html)

目前我提出了这个声明：

```
CREATE FUNCTION fts_update() RETURNS trigger AS $$
begin
  new.tsv :=
       to_tsvector('pg_catalog.english', coalesce(new.title,'')) ||
       to_tsvector('pg_catalog.english', coalesce(new.description,'')) ||
       to_tsvector('pg_catalog.english',
        SELECT array_to_string(array_accum(name), ' ') FROM agencies where id = new.agency_id
       );
  return new;
end
$$ LANGUAGE plpgsql;
CREATE TRIGGER ftsupdate_trigger BEFORE INSERT OR UPDATE ON camps FOR EACH ROW EXECUTE PROCEDURE fts_update()" 
```

在这里，我需要将另一个表中的一些字段添加到索引中，但 Postgresql 不允许我：

```
PG::Error: ERROR:  syntax error at or near "SELECT"
LINE 9:         SELECT array_to_string(array_accum(name), ' ') FROM ... 
```

有什么好的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:56:56.560

我认为您需要做的就是将选择括在括号中，例如

```
 select to_tsvector('english',(select array_to_string(array['one','two','three'],' '))); 
```

# wcf - 在 WCF 生成的 wsdl 中命名 XSD

> ID：13621561
> 
> 赞同：4
> 
> 时间：2012-11-29T08:24:32.457
> 
> 标签：wcf, xsd, wsdl, bpel

我们正在开发一项`WCF`正在被`BPEL`. `BPEL`导入时，`WSDL`它的内容`XSDs`如下：

_

```
http://Server_Name/Service1.svc?xsd=xsd0

_http://Server_Name/Service1.svc?xsd=xsd1

_http://Server_Name/Service1.svc?xsd=xsd2 
```

等等等等。

这种随机命名`XSDs`会造成大量流失，因为每当有合同更改时，都会`BPEL`再次重新加载整个文件`WSDL`，并且每个 . 文件都会添加一个随机数后缀`XSD`。`BPEL`团队将不得不再次打开每个`XSD`以找出变化。

有没有办法`WCF`可以停止生成这些随机`XSDs`数并给每`XSD`一个正确的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:50:11.410

如何在设计时下载并正确命名这些 XSD 而不是链接到这些资源？好处是架构更改在您的控制之下。我认为这是可取的，只要尚不清楚 BPEL 引擎是否以及在什么情况下可以从这些资源重新加载 XSD。如果模式发生变化，我应该明确地知道它，并且应该部署新版本的流程模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:10:55.560

为了克服这个问题，我们安装了 .NET 4.5 来生成单个 wsdl，它可以正确命名 XSD 并且没有 XSD 导入语句。

# android - Android：列表视图滚动条

> ID：13621564
> 
> 赞同：3
> 
> 时间：2012-11-29T08:24:44.887
> 
> 标签：android, android-listview

![在此处输入图像描述](../Images/8446514afc9ccc155de5653e7d4f19ca.png)我可以自定义列表视图滚动条吗？？？？？？

a）拇指应该是可点击和可拖动的。

b) 应在每一侧包含按钮，相应地向上和向下滑动列表视图。

c) 滚动条轨道应该更宽。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T08:28:43.747

要自定义滚动条，您可以使用以下样式。将此样式应用于滚动条。

```
<style name="your_style_name">  
<item name="android:scrollbarAlwaysDrawVerticalTrack">true</item>
<item name="android:scrollbarStyle">outsideOverlay</item>
<item name="android:scrollbars">vertical</item>
<item name="android:fadeScrollbars">false</item>
<item name="android:scrollbarThumbVertical">@drawable/scroller_image</item> 
```

scroller_image 是滚动拇指的图像。如果要添加向上和向下按钮，可以在 Scrollview 的上方和下方放置两个按钮。并以编程方式在按钮单击时滚动滚动条。为此，您可以使用以下代码，

```
scrollview.scrollTo(5, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T03:16:11.430

我解决了这个问题，在 ListView 上使用 OnScrollListener，在 VerticalSeekbar 上使用 OnTouchListener，如下所示：

```
mListView.setOnScrollListener(this);
mScrollbar.setOnTouchListener(this);

@Override
public void onScroll(AbsListView view, int firstVisibleItem,
    int visibleItemCount, int totalItemCount) {
    // TODO Auto-generated method stub
    mCurrentPosition = firstVisibleItem;
    if (totalItemCount - visibleItemCount > 0) {
        int progress = mScrollbar.getMax() * firstVisibleItem
                    / (totalItemCount - visibleItemCount);
        mScrollbar.setProgress(progress);
    }
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    Adapter adapter = mListView.getAdapter();
    if (adapter == null) {
        return false;
    }
    if (adapter instanceof HeaderViewListAdapter) {
            adapter = ((HeaderViewListAdapter) adapter).getWrappedAdapter();
        }

        int itemCount = adapter.getCount();
        if (itemCount == 0)
            return false;
        switch (event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN:
            scroll(event.getY());
            return true;
        case MotionEvent.ACTION_MOVE:
            scroll(event.getY());
            return true;
        case MotionEvent.ACTION_UP:
            scroll(event.getY());
            return true;
        default:
            return false;
   }
}

private void scroll(float height) {
        mItemCount = mListView.getAdapter().getCount();
        int scrollHeight = mScrollbar.getHeight();
        Log.e(TAG, "Scrollbar height: " + scrollHeight);
        int position = (int) ((height / mScrollbar.getHeight()) * mItemCount);
        Log.e(TAG, "Position scroll: " + position);
        if (position < 0)
            position = 0;
        else if (position >= mItemCount)
            position = mItemCount - 1;
        mListView.setSelection(position);
    } 
```

# objective-c - 如何使用 DLog() 记录 NSRect 值？

> ID：13621565
> 
> 赞同：2
> 
> 时间：2012-11-29T08:24:45.363
> 
> 标签：objective-c

我想记录包含 NSRect 值的“frame”的值。除了在 DLog() 中使用 %@ 之外，正确的方法是什么？

```
DLog(@"frame = %@", frame); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T08:27:37.373

```
Dlog(@"frame = %@", NSStringFromRect(frame)); 
```

# ruby - SASS 和 Jekyll 集成

> ID：13621568
> 
> 赞同：7
> 
> 时间：2012-11-29T08:24:59.247
> 
> 标签：ruby, sass, jekyll

我只是想知道是否有办法将 SASS 集成到 Jekyll 中。我只需要在启动 Jekyll 时将 .scss 自动编译为 .css。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:54:34.217

我认为在您启动时编译资产没有任何问题（我认为这是运行）`jekyll`。运行的重点`jekyll`是预编译您的站点，这对性能**有好处**。

至于资产转换 - 有许多插件专注于此。我喜欢[Jekyll Asset Pipeline](http://www.matthodan.com/2012/11/22/jekyll-asset-pipeline.html) gem，它支持任何语言（例如，Scss、Less、CoffeeScript、Erb 等），并具有许多使其与众不同的特性（例如，资产标记、压缩、gzip 等）。它似乎也是近来增长最快的与 Jekyll 相关的宝石，我认为这意味着它在社区中越来越受欢迎。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T04:17:22.953

如果你想让它尽可能简单，`compass watch`你可以使用[Guard](https://github.com/guard/guard) gem 以及[guard-jekyll](https://github.com/therabidbanana/guard-jekyll)和[guard-compass](https://github.com/guard/guard-compass)（如果你喜欢样式注入，请使用[guard-livereload](https://github.com/guard/guard-livereload)）。

Guard 在单个终端窗口下捆绑多个“监视”操作，并且比强大的资产管道更容易设置。安装 gems，`.guardfile`根据 guard-compass 和 guard-jekyll 指令配置`cd`到你的目录并输入`guard`. 每当相关文件更改您的 sass 文件和/或 jekyll 站点时，都会重新编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-13T09:23:14.430

原生 Sass 和 CoffeeScript 处理在 Jekyll v2.0 中首次亮相：

[http://jekyllrb.com/docs/assets/#sassscss](http://jekyllrb.com/docs/assets/#sassscss)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-14T05:37:24.673

全面披露：我是这个项目背后的首席开发人员。

我见过的用 Jekyll 设置 Sass 的最简单方法是使用[`jekyll-compass`](https://github.com/mscharley/jekyll-compass). 该 gem 将完全按照您的描述进行：任何时候 jekyll 构建您的网站（`jekyll build`、`jekyll serve`等），您的 Sass 都会与您网站的其余部分一起编译到输出文件夹中。查看上面链接的自述文件，了解完整的使用详情。

Jekyll 的人目前也在进行一些工作，以使 Jekyll 的核心支持 Sass，以便每个人至少可以基本访问 Sass 及其提供的精彩功能集。

# c# - 枚举和两个“子枚举”

> ID：13621579
> 
> 赞同：0
> 
> 时间：2012-11-29T08:25:48.887
> 
> 标签：c#, architecture, enums

这是一个建筑师的问题！

有两个条件独立的枚举

```
enum OpenID
{
  Google,
  Aol
}

enum OAuth
{
  Facebook,
  Twitter
}

class Provider 
{ 
  public OpenID openid;
  public OAuth oauth;
} 
```

将 Providers 集的所有成员分成 OpenID 和 OAuth 对我来说是非常合乎逻辑的。

If (openid==null) // 一种行为，If (oauth==null) // 另一种行为。

将有一组需要排序的 Provider 实例。

有没有什么办法

*   支持这个部门（openid vs oauth）和

*   添加功能以任意安排所有 X 成员，例如 { Facebook、Google、Aol、Twitter} 而不实施 3D 枚举？

意思是，如果一个值被添加到任何枚举中，比如说 OAuth： enum OAuth { Facebook, Twitter, Instagram }

无需在代码中的其他位置显式写入此值（Instagram）以实际添加对排序的支持。

我牢记的想法：

*   无论如何都有一个枚举，但添加前缀，即枚举 X { OpenID_Google, OpenID_Aol, OAuth_Facebook, OAuth_Twitter }。

缩小 - 无法使用枚举 A（或 B）特定操作进行操作。现在我有一个 bool 变量来指示类型： bool IsOpenId; 布尔 ISOAuth;

*   XML 列表 { Facebook }，表示首先包含/处理 Facebook，然后是 OpenID 的成员，然后是 OAuth 的其余部分。

你有什么惊天动地的想法吗？甚至可能有代码示例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:44:31.383

我想您可以执行以下操作：

```
enum Provider
{
    None = 0,
    OpenID = 0x1,
    OAuth =  0x2,
    Google =   0x10 | OpenID,
    Aol =      0x20 | OpenID,
    Facebook = 0x30 | OAuth,
    Twitter =  0x40 | OAuth | OpenID // can set both flags!
}

static bool IsOpenID(Provider p)
{
    return (p & Provider.OpenID) == Provider.OpenID;
}
static bool IsOAuth(Provider p)
{
    return (p & Provider.OAuth) == Provider.OAuth;
} 
```

这样，您可以为提供者定义排序顺序，而不管它们是`OpenID`还是`OAuth`.

这意味着您的枚举的最后 8 位为每种身份验证类型提供了 8 个潜在的“标志”，其中`IsOpenID`的最后一位采用倒数第二位`OAuth`；还有 2 个标志的空间以供将来扩展，由`0x4`和给出`0x8`。`0`进一步扩展将需要对非标志值进行额外的尾随。

`IsOpenID`检查`OpenID flag`is`1`或`0`; 同样`IsOAuth`检查`OAuth`标志。

因为标志使用枚举的*低位*，所以对这些值的任何排序都将反映“提供者 ID”部分而不是标志。

# android - 如何为我的自定义适配器实现过滤器？

> ID：13621581
> 
> 赞同：2
> 
> 时间：2012-11-29T08:25:53.630
> 
> 标签：android, android-listview

我一直在尝试向我的列表视图添加一个过滤器，该过滤器显示一系列火车站及其相应的 GPS 坐标，专门针对名称进行过滤。然而，每当我输入超过几个字母时，应用程序似乎就会崩溃，因为索引应该超出范围。我认为，这样做的原因是，每当发布过滤时，原始的未过滤数据集都会被修改。

如何正确过滤？

```
@Override
public Filter getFilter() {
    return new Filter() {
        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            Log.d("FILTER", "**** PUBLISHING RESULTS for: " + constraint);
            data = (List<Station>) results.values;
            StationAdapter.this.notifyDataSetChanged();
        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            Log.d("FILTER", "**** PERFORM FILTERING for: " + constraint);
            List<Station> filteredResults = getFilteredResults(constraint);

            FilterResults results = new FilterResults();
            results.values = filteredResults;

            return results;
        }

        List<Station> getFilteredResults(CharSequence constraint) 
        {
            List<Station> filteredResult = new ArrayList<Station>();

            if(constraint != null)
            {
                for(Station s : data)
                {
                    if(s.getName().toLowerCase().contains(constraint.toString()))
                        filteredResult.add(s);
                }
            }

            return filteredResult;
        }
    };
} 
```

StationAdapter 实现一个 ArrayAdapter 以防万一。

堆栈跟踪 ：

```
 11-29 09:17:52.025: E/AndroidRuntime(21615): FATAL EXCEPTION: main
11-29 09:17:52.025: E/AndroidRuntime(21615): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
11-29 09:17:52.025: E/AndroidRuntime(21615):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at java.util.ArrayList.get(ArrayList.java:304)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at com.liteapps.handin_3.StationAdapter.getView(StationAdapter.java:50)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.AbsListView.obtainView(AbsListView.java:2257)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.ListView.onMeasure(ListView.java:1156)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.View.measure(View.java:15172)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.RelativeLayout.measureChild(RelativeLayout.java:602)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:415)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.View.measure(View.java:15172)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.View.measure(View.java:15172)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.View.measure(View.java:15172)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2435)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.View.measure(View.java:15172)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.Choreographer.doFrame(Choreographer.java:525)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.os.Handler.handleCallback(Handler.java:615)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.os.Looper.loop(Looper.java:137)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at android.app.ActivityThread.main(ActivityThread.java:4931)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at java.lang.reflect.Method.invokeNative(Native Method)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at java.lang.reflect.Method.invoke(Method.java:511)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-29 09:17:52.025: E/AndroidRuntime(21615):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:55:38.953

您需要覆盖 ArrayAdapter 类中的 getCount() 方法。

```
 @Override
     public int getCount() {
            return YOURLIST.size();
     } 
```

# java - 谁将 JVM file.encoding 重置回原来的？

> ID：13621582
> 
> 赞同：1
> 
> 时间：2012-11-29T08:25:55.923
> 
> 标签：java, encoding, character-encoding, jar, jvm

> System.setProperty("file.encoding", "utf-8");

下面的评论暗示 file.encoding 将针对在同一 JVM 上运行的所有应用程序进行更改，但是，我没有观察到这种行为。

> 以编程方式设置系统属性将影响在同一 JVM 中运行的所有代码，这是很危险的，尤其是在讨论此类低级系统属性时。

[我已阅读此问题并了解缓存和 Java 1.5设置默认 Java 字符编码](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)存在许多问题？

请现在考虑以下代码：

```
public class FileEncodingTest {
    public static void main (String[] args) {
        System.out.println(System.getProperty("file.encoding"));
        System.setProperty("file.encoding", "UTF-8");
        System.out.println(System.getProperty("file.encoding"));
    }
} 
```

然后我使用项目配置中设置的 Eclipse 和 Java 1.6 创建一个 jar 文件。
然后我用 Java 1.7 运行 jar-file，这一切都发生在 Windows 7 下。

```
java -jar FileEncodingTest.jar
Cp1251
UTF-8

java -jar FileEncodingTest.jar
Cp1251
UTF-8 
```

**那么谁以及为什么将 back 的值重置`file.encoding`为`Cp1251`？**

**UPD：** 任何人都可以解释或提供一个链接，逐步解释在我键入时在 JVM 和进程方面会发生什么`java -jar MyClass.jar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:27:19.963

就像你打开一个 IE 浏览器一样，它首先进入主页。如果你访问另一个网站，然后你打开另一个 IE，它仍然是主页。JVM 非常相似。java程序的2个不同进程使用不同的JVM。这意味着当程序结束时，文件编码属性将再次默认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:35:41.900

你启动了 2 个虚拟机。每个“java -jar”命令一个。

您可以通过在 Eclipse 中编辑项目属性来更改项目使用的编码。

但请注意，当您对依赖文件格式的内容进行硬编码并且另一个项目使用您的实现时，将会出现问题。这就是评论的意思。

# php - 配置文件 2 模块在每个表单上显示普通用户注册表单元素

> ID：13621583
> 
> 赞同：1
> 
> 时间：2012-11-29T08:25:57.913
> 
> 标签：php, drupal, drupal-7, user-registration

我们使用为某些特定用户创建不同的注册表单**我们使用PROFILE2 模块**

但是每个用户注册表单上都会出现普通用户注册表单元素。

喜欢用户名>>电子邮件>>时事通讯订阅和全名

这些字段无法从管理部分的配置文件 2 设置页面管理

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:46:26.147

在配置文件类型中管理此字段并将其从管理面板隐藏

# c# - 如何将 queryString 值更改为 (int)

> ID：13621591
> 
> 赞同：4
> 
> 时间：2012-11-29T08:26:35.283
> 
> 标签：c#, int

> **可能重复：**
> [如何将 String 转换为 Int？](https://stackoverflow.com/questions/1019793/how-can-i-convert-string-to-int)

如何将 queryString 值更改为 (int)

```
string str_id;
str_id = Request.QueryString["id"];
int id = (int)str_id; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T08:29:02.613

使用[Int32.TryParse 方法](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)安全地获取`int`值：

```
int id;
string str_id = Request.QueryString["id"];
if(int.TryParse(str_id,out id))
{
    //id now contains your int value
}
else
{
    //str_id contained something else, i.e. not int
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T08:28:20.660

换成这个

```
string str_id;
str_id = Request.QueryString["id"];
int id = Convert.ToInt32(str_id); 
```

或者更简单、更有效的

```
string str_id;
str_id = Request.QueryString["id"];
int id = int.Parse(str_id); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T08:29:15.203

```
int id = Convert.ToInt32(str_id, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T08:31:00.140

有几种方法可以做到这一点

```
string str_id = Request.QueryString["id"];

int id = 0;

//this prevent exception being thrown in case query string value is not a valid integer
Int32.TryParse(str_id, out id); //returns true if str_id is a valid integer and set the value of id to the value. False otherwise and id remains zero 
```

其他

```
int id = Int32.Parse(str_id); //will throw exception if string is not valid integer
int id = Convert.ToInt32(str_id);  //will throw exception if string is not valid integer 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T08:28:22.833

你必须使用`int.Parse(str_id)`

**编辑** ：不要相信用户输入

最好在解析之前检查输入是否为数字，为此使用[int.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

# crystal-reports - Crystal Reports：创建数组或从列中获取值

> ID：13621596
> 
> 赞同：1
> 
> 时间：2012-11-29T08:27:05.737
> 
> 标签：crystal-reports

假设我正在编写一份报告，在一个名为`someTable.someColumn`. 我需要的是拥有 ReportHeader 中的所有值。我知道我可以创建一个子报表，将这一列传递给他们并在细节中对其进行迭代，但我想知道是否可以在没有子报表的情况下做到这一点。

如果我使用以下内容，我会得到正确的结果，在我的例子中是 9：

```
COUNT(someTable.someColumn) 
```

我也尝试了以下方法，但它不起作用 - 它只随机取 9 个值之一。

```
Local NumberVar i := 0;
Local StringVar Array items := {someTable.someColumn};
Local StringVar output := "";
while (i < count(items)) do (
  i := i+1;
  output := output + items[i];
);

output; 
```

是否可以遍历列以获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:03:47.067

您不能在报告标题中执行此操作。您必须使用详细信息部分来读取每个值。

想到的唯一解决方案是使用子报表。虽然你不会`pass them this column and iterate it in the details`。因为它只会传递列中的第一个值。您可以将报告参数传递给它，它可以用来从数据库中获取列值，就像您的主报告一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:45:58.590

我还没有找到在报表页眉中执行此操作的方法，但您可以使用以下公式将其放在报表*页脚中：*

```
global StringVar output;
output := output + {someTable.someColumn} + ","; 
```

这将在报告生成过程中每次`someTable.someColumn`更改时执行，并将其附加到全局变量中。不幸的是，它不会使所有实例都保持最新 - 例如，如果您将其包含在某处的报告详细信息中，您将能够看到`output`报告过程中的演变。在标题中，它只会显示第一个值。

*注意：*您不想`output := ""`在此公式中进行设置，因为每次都会重置该值。不过，Crystal 似乎在创建变量时会自动为您初始化变量，并且仅使用上述公式我没有遇到任何错误（即，我不需要创建第二个公式来初始化`output`）。我还包括一个分隔符 ( `+ ","`)，以帮助分隔每个值，但您可以轻松地将其删除。

# ios - Facebook IOS SDK 3.1.1 与 Xcode 4.5.2 错误

> ID：13621599
> 
> 赞同：5
> 
> 时间：2012-11-29T08:27:17.173
> 
> 标签：ios, facebook, sdk, xcode4.5

我是 iOS 中 Facebook SDK 的新手。为什么我在构建项目时收到此错误...

我刚刚使用 Facebook SDK 的 ios 教程中的基本步骤创建了一个新项目。

*   下载 Facebook SDK（我用的是 3.1.1）
*   Xcode（我使用 4.5.2）
*   添加“-lsqlite3.0 `Other Linker Flags`”`Build Setting`
*   添加 FacebookSDK.framework
*   添加 FacebookSDKResources.bundle
*   添加 FBUserSettingsViewResources.bundle

我尝试构建，一切都好..所以我继续在 AppDelegate 上编写基本实现

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    return [FBSession.activeSession handleOpenURL:url];
} 
```

和

```
#import <FacebookSDK/FacebookSDK.h> 
```

当我尝试构建时，出现错误...这是日志

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_ACAccountStore", referenced from:
      objc-class-ref in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceFriends", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAppIdKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACAccountTypeIdentifierFacebook", referenced from:
      +[FBSession renewSystemAuthorization] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceOnlyMe", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookPermissionsKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_OBJC_CLASS_$_ASIdentifierManager", referenced from:
      objc-class-ref in FacebookSDK(FBSettings.o)
  "_ACFacebookAudienceEveryone", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我发现这很奇怪，因为我使用与示例相同的 SDK 和相同的设置`Scrumptious`，并且示例运行良好.. 同时我得到了这个错误......

任何想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-29T08:52:38.720

我得到了答案... Facebook IOS SDK 3.1 需要更多的框架来使用.. 它需要**IOS6**上可用的“Accounts”、“AdSupport”和“Social”框架。因为`Facebook SDK 3.1`是基于`IOS6`..

注意：如果您希望您的应用程序也为旧版本的操作系统构建，您应该为 iOS6 特定框架使用**OPTIONAL标志。**它看起来像这样。

![在此处输入图像描述](../Images/ec2fe265b310914078c6a6fb6d9d67c8.png)

# mercurial - 一条线的Mercurial轨迹变化

> ID：13621600
> 
> 赞同：0
> 
> 时间：2012-11-29T08:27:19.183
> 
> 标签：mercurial

我很好奇是否有可能以使用 Mercurial 的行自动发生的方式查看文件的更改...

具体案例：在过去的某个时间，几个月前，我们的代码中的一行（文件：MainWindow.cpp 第 219 行）被某人更改，没有人记得之前的时间和内容，我们只知道这些东西我们现在不工作:(我们想看看为什么（最重要的是**什么时候**）会发生这种变化。手动浏览数千个提交不是一种选择:(

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:09:58.697

是的，您可以使用`hg annotate`，并且注释的默认输出将显示您上次更改 sting 时的修订版本

```
hg ann functions.php
0: <?php
0:
0: if ( ! isset( $content_width ) ) $content_width = 550;
0:
3: add_theme_support('automatic-feed-links');
6: add_theme_support('custom-background');
... 
```

（第一列是修订号）。使用 -d 选项，您可以将修订日期添加到输出

```
hg ann -d -n functions.php
0 Sat Aug 06 01:13:35 2011 +0600: <?php
0 Sat Aug 06 01:13:35 2011 +0600:
0 Sat Aug 06 01:13:35 2011 +0600: if ( ! isset( $content_width ) ) $content_width = 550;
0 Sat Aug 06 01:13:35 2011 +0600:
3 Wed Dec 14 04:01:33 2011 +0600: add_theme_support('automatic-feed-links');
6 Sun Jun 24 15:20:24 2012 +0600: add_theme_support('custom-background'); 
```

使用修订号（仅），您可以查看处于此修订状态的文件：`hg cat -r N <filename>`

但是，如果您想查看相关字符串的所有更改历史记录（并且您有*一些当前或历史*内容，而不仅仅是数字），您可以[使用`hg grep`](https://stackoverflow.com/a/13549925/960558)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:33:12.537

尝试：

```
hg annotate MainWindow.cpp 
```

它类似于`svn blame`, 并显示文件的所有行以及更改时的修订号。

# ruby-on-rails - 使用 Redis 建模 ActiveRecord 对象之间的关联：避免多次查询

> ID：13621603
> 
> 赞同：0
> 
> 时间：2012-11-29T08:27:23.967
> 
> 标签：ruby-on-rails, nosql, foreign-keys, redis, relationship

我一直在阅读/玩弄使用 Redis 来补充我的 ActiveRecord 模型的想法，特别是作为一种建模关系的方式。还观看了一些像这样的截屏视频：[http ://www.youtube.com/watch?v=dH6VYRMRQFw](http://www.youtube.com/watch?v=dH6VYRMRQFw)

在您想要一次获取一个对象的情况下，这似乎是一个好主意，但是当您需要显示对象列表及其每个关联时（例如，在视图中或在对于 API 的 JSON 响应）。

而在纯粹使用 ActiveRecord 的情况下，您可以使用`includes`预先加载来避免运行 N 多个查询，但当纯粹依赖 Redis 来建模关系时，我似乎无法想到如何做到这一点。

例如，假设您有以下内容（取自非常有用的[redis_on_rails](https://github.com/obie/redis_on_rails)项目）：

```
class Conference < ActiveRecord::Base

  def attendees
    # Attendee.find(rdb[:attendee_ids])
    Attendee.find_all_by_id(rdb[:attendee_ids].smembers)
  end

  def register(attendee)  
    Redis.current.multi do
      rdb[:attendee_ids].sadd(attendee.id)
      attendee.rdb[:conference_ids].sadd id
    end
  end

  def unregister(attendee)
    Redis.current.multi do
      rdb[:attendee_ids].srem(attendee.id)
      attendee.rdb[:conference_ids].srem id
    end
  end

end 
```

如果我做了类似的事情

```
conferences = Conference.first(20)
conferences.each {|c|
    c.attendees.each {|a| puts a.name}
} 
```

我只是获取前 20 个会议并获取每个会议的与会者并将它们打印出来，但您可以想象这样一种情况，我在视图中的列表中呈现会议以及与会者列表。在上述情况下，我会遇到经典的 N+1 查询问题。

如果我将 SQL 中的关系与 一起建模`has_many`，我将能够使用该`includes`函数来避免同样的问题。

欢迎提出想法，链接，问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:38:29.363

Redis 可以为您的应用程序的基础架构提供重大优势，但我发现，由于您可以对各种数据类型执行特定操作，您确实需要提前考虑如何访问您的数据。在此示例中，如果您经常迭代一堆会议并输出与会者，并且没有从 Redis 执行丰富集合操作（​​如交集、联合等）的能力中受益，那么这可能不是一个好方法适合该数据模型。

另一方面，如果您在应用程序的性能密集型部分从 Redis*中*受益，则可能值得在 Redis 上偶尔使用 N+1 GET 以获得这些好处。您必须对您关心的应用程序部分进行分析，以查看权衡是否值得。

您还可以在 Redis/您的应用程序中以一种可以避免 N+1 GET 的方式来构造您的数据；例如，如果您可以预先获取所有密钥，则可以使用[MGET](http://redis.io/commands/mget)一次获取所有密钥，这是一个快速的 O(N) 操作，或者使用[流水线](http://redis.io/topics/pipelining)来避免多次查找的网络延迟。

在我工作的一个应用程序中，我们构建了一个缓存层，用于缓存 has_many 关系的外键 ID，以便我们可以快速查找相互之间具有复杂关系的大量模型的缓存版本；在通过 SQL 获取这些内容时，我们会生成非常大、相对较慢的 SQL 查询，但是通过使用 Redis 和缓存的外键，我们可以执行一些 MGET，而根本不会访问数据库。但是，我们只是通过调查瓶颈所在并讨论如何避免它们来得出该解决方案。

# php - Javascript 和 PHP 不会很好玩

> ID：13621614
> 
> 赞同：0
> 
> 时间：2012-11-29T08:28:03.163
> 
> 标签：php, javascript, arrays, forms

我有一组使用这种语法的复选框：

```
echo "<form name=\"myform\" method=\"POST\" action=\"csvbuilder.php\">";
echo "<input type=\"checkbox\" name=\"list[]\" value=\"".$res['id']."\" />"; 
```

在底部我有一个“检查所有”按钮..

```
echo "<input type=\"button\" name=\"UnCheckAll\" value=\"Uncheck All\" onClick=\"uncheckAll(document.myform.list)\" /> 
```

这是指以下JS脚本..

```
function checkAll(field) {
  for (i = 0; i < field.length; i++)
    field[i].checked = true ;
} 
```

问题是：检查所有按钮仅在我从输入名称中删除方括号时才有效，即`name="list"`与`name="list[]"`. 我需要括号，否则 PHP 表单处理程序将无法工作。我已经尝试将括号添加到 JS，即，`onClick="uncheckAll(document.myform.list[])"`但这也不起作用。

如何让 JS 和 PHP 玩得很好？

感谢所有响应者。我特别感谢任何参考/解释/jfiddles。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:35:29.450

您错过了粘贴`checkAll`按钮

JS函数：

```
function checkAll(frm){
    var checkBoxes = frm.elements['list[]'];
    for (i = 0; i < checkBoxes.length; i++){
        checkBoxes[i].checked = (frm.CheckAll.value == "Check All") ? 'checked' : '';
    }
    frm.CheckAll.value = (frm.CheckAll.value == "Check All") ? "Uncheck All" : 'Check All';
} 
```

点击：

```
echo "<input type=\"button\" name=\"CheckAll\" value=\"Check All\" onClick=\"checkAll(document.myform)\" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:39:41.253

它可以通过以下方式访问`document.myform['list[]']`：

```
echo "<input type=\"button\" name=\"UnCheckAll\" value=\"Uncheck All\" onClick=\"uncheckAll(document.myform['list[]'])\" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:38:06.663

试试这个：

```
function checkAll(fieldName) {
    var fields = document.getElementsByName(fieldName);
    for (i=0; i<fields.lengh; i++) {
        fields[i].checked = true;
    }
} 
```

然后使用以下 PHP 片段从 HTML 调用它：

```
echo "<input type=\"button\" name=\"UnCheckAll\" value=\"Uncheck All\" onClick=\"uncheckAll('list[]')\" /> 
```

请注意，`onClick`按钮的 -function 现在调用`checkAll`-function 传递元素名称而不是元素。

# java - PopUp-Window 作为后台任务 Android 应用程序

> ID：13621615
> 
> 赞同：1
> 
> 时间：2012-11-29T08:28:05.720
> 
> 标签：java, android, http, android-networking

我有一个功能问题，我想实现。我知道一些应用程序，例如 whatsapp、gmail 或其他应用程序，它们在后台运行并在收到某些内容时通知用户......

我想对我的应用程序做同样的事情。我有一个 http-network-connection 并想通知用户，即使他没有启动应用程序。这样的事情可能吗？

是否有可能出现像接收短信一样的弹出窗口？（如果没有，标题栏中的通知方式就足够了）

我不知道，我应该用谷歌搜索什么或在哪里可以找到帮助

十分感谢！

编辑：我发现了另一个非常酷的处理通知的框架。有一个战利品：[https ://www.parse.com/tutorials/android-push-notifications](https://www.parse.com/tutorials/android-push-notifications)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:33:15.607

你应该看看服务。您可以在其中监听 http 连接。对于通知，我将使用 NotificationManager 类。通知比弹出窗口的侵入性要小得多。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:07:42.150

[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/gs.html)肯定会为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:21:01.007

如果您的服务器可以实例化此“操作”或“事件”，请务必不要尝试定期提取数据，因为这会给您的应用程序带来额外的复杂性，也会给您的用户带来电池消耗。

但是，如果你真的、真的、非常需要这种行为，你可以从你的应用程序的进程中实例化一个服务。这可以从许多地方完成，例如您的主要活动或其他一些用户操作，甚至可以从广播侦听器完成。例如，我们的应用程序有一些并行工作要做，因此我们将其传递给服务，并且该服务由监听电话事件（如电话或短信）的广播侦听器启动。

另一方面，就像您的应用程序的主要活动一样，您的后台服务可以随时被操作系统任意终止。所以你不应该依赖它永远运行。您应该有办法检查它是否仍在后台工作。检查警报事件或任何其他相关的广播监听器。

# mysql - 将一个查询结果除以另一个结果

> ID：13621616
> 
> 赞同：3
> 
> 时间：2012-11-29T08:28:09.170
> 
> 标签：mysql, sql

我可以跑

```
SELECT killedby, COUNT(killedby) killcount FROM games_playerinfo WHERE killedby != '' GROUP BY killedby 
```

得到

```
killedby    killcount
Player1         1
Player2         1 
```

我可以跑

```
SELECT ign, COUNT(ign) numberofgames FROM games_playerinfo GROUP by ign 
```

并得到

```
ign numberofgames
player1 7
player2 3
player3 3
player4 3 
```

我想将第一个查询的每个结果除以第一个查询中每个用户的第二个查询的结果。

所以结果应该是

```
ign      avgkillcount
player1  0.1429
player2  0.333333 
```

我想在一个查询中执行此操作，以便限制结果。我试过使用 INNER JOINS，但我认为我对连接的理解不够好，甚至不知道它是否可以实现我想要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:33:28.460

尝试这个：

```
SELECT
  t1.ign,
  (t1.numberofgames / t2.killcount) AS avgkillcount
FROM
(
    SELECT 
      ign, 
      COUNT(ign) numberofgames 
    FROM games_playerinfo 
    GROUP by ign
) t1
INNER JOIN
(
    SELECT 
      killedby, 
      COUNT(killedby) killcount
    FROM games_playerinfo 
    WHERE killedby != ''
    GROUP BY killedby
) t2 ON t1.ign = t2.killedby; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/12e47/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:34:14.087

询问：

```
SELECT g1.killedby ign,
       COUNT(g1.killedby)/(SELECT COUNT(ign) numberofgames 
                                  FROM games_playerinfo 
                                  WHERE ign = g1.killedby
                                  GROUP by ign) avgkillcount
FROM games_playerinfo g1
WHERE g1.killedby != '' 
GROUP BY g1.killedby 
```

# c# - 如何使用 C# 在多行文本框中最后一行之后的新行处设置光标位置？

> ID：13621623
> 
> 赞同：0
> 
> 时间：2012-11-29T08:28:25.530
> 
> 标签：c#, asp.net, textbox, updatepanel

我创建了一个聊天应用程序，并使用多行文本框来显示聊天消息。

```
**Aspx page :**

<asp:UpdatePanel runat="server" ID="up1" UpdateMode="Conditional">
<ContentTemplate>
 <asp:TextBox ID="TextBox1" runat="server" Height="163px" Font-Size="0.81em" 
  Font-Names="Verdana" TextMode="MultiLine"></asp:TextBox> 
</ContentTemplate>
 <Triggers>
   <asp:AsyncPostBackTrigger ControlID="refreshTimer" EventName="Tick" />
 </Triggers>
 </asp:UpdatePanel>  

 <asp:Timer runat="server" ID="refreshTimer" Interval="2000" Enabled="true" 
 ontick="refreshTimer_Tick" />

 **Behind code :**

 protected void refreshTimer_Tick(object sender, EventArgs e)
 {
     up1.Update();
 } 
```

一切正常，但是在收到更多消息后，TextBox1 刷新并且最后一行被隐藏并显示垂直滚动条，我怎样才能将光标位置放在最后一行之后的新行上。

提前致谢....... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:59:02.267

我认为您可以为文本框设置 ClientIDMode="Static"，如下所示：

```
<asp:TextBox ID="TextBox1" runat="server" Height="163px" ClientIDMode="Static" Font-Size="0.81em" Font-Names="Verdana" TextMode="MultiLine"></asp:TextBox> 
```

然后将以下javascript放在页面上：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#TextBox1').live('change', function () {
            $('#TextBox1').scrollTop($('#TextBox1')[0].scrollHeight - $('#TextBox1').height());
        });
    });
</script> 
```

# java - Android Preferences：是否可以优化 OnPreferenceChangeListener？

> ID：13621624
> 
> 赞同：0
> 
> 时间：2012-11-29T08:28:37.557
> 
> 标签：java, android, optimization, android-preferences

目前我有这样的代码：

```
back.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        //DO STUFF
        return true;
    }
});
music.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        //DO OTHER STUFF
        return false;
    }
});
sound.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        //DO MORE STUFF
        return true;
    }
}); 
```

是否有可能以某种方式优化这段代码？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:37:58.240

感谢 njzk2，我得到了关于如何将所有已实现的方法合并到一个大对象中的提示。只需创建一个嵌套类并使用它来实现接口。

# ruby - ruby 黄瓜自动化中无法从 SQL 服务器获取 utf8 字符

> ID：13621628
> 
> 赞同：1
> 
> 时间：2012-11-29T08:28:43.377
> 
> 标签：ruby, cucumber, watir-webdriver

我正在使用 Ruby cucumber 来自动化我的应用程序。我正在使用 DSN ODBC 驱动程序和“dbi”连接到我的 sql server 2012 DB。它连接成功，我可以得到记录。但是，当我尝试从 ruby​​ 脚本中的表中获取 unicode (utf-8) 数据时，我得到了垃圾字符 ( `???????`)。

请帮我从数据库中获取 unicode 字符。

下面是我用来连接和从数据库检索数据的代码。

```
# encoding: UTF-8
require 'rubygems'
require 'DBI'
 def run_select_query_verifyText(query,verifyString)
    connection = nil
        status = false
      begin
          #puts "Connecting to DataBase"
                connection = DBI.connect('DBI:ODBC:ODBCDriver','test','xxxxx')
         rescue DBI::DatabaseError => e
           puts "An error occurred"
           puts "Error code:    #{e.err}"
           puts "Error message: #{e.errstr}"
           return false
      end

        #execute sql query
        dataset = connection.execute(query)#.fetch_all
        dataset.each do |row|
            row.each do |data|
            puts "cell data is #{data}"

                if data == verifyString then

                    status = true
                    break
                end
            end
            if status then
                break
            end
        end
        connection.disconnect

       return status
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:09:25.470

我有类似的问题，已通过 env.rb 文件中的以下行修复

```
ENV['CUCUMBER_OUTPUT_ENCODING'] = 'UFT-8' 
```

# javascript - 我们如何仅使用我们的酒店信息设置 Google 地图？

> ID：13621632
> 
> 赞同：0
> 
> 时间：2012-11-29T08:28:51.053
> 
> 标签：javascript, google-maps

我们正在与酒店业相关的网站上进行与谷歌地图集成相关的项目。我想知道，我们可以在谷歌地图上整合我们的酒店列表吗？没有在地图上显示其他酒店。

**例如**

```
http://www.booking.com/searchresults.html?src=index&error_url=http%3A%2F%2Fwww.booking.com%2Findex.en-us.html%3Fsid%3D79af128e4feda3d8c3dce29a0c4b378e%3Bdcid%3D1%3B&dcid=1&sid=79af128e4feda3d8c3dce29a0c4b378e&si=ai%2Cco%2Cci%2Cre%2Cdi&ss=Favignana%2C+Italy&checkin_monthday=29&checkin_year_month=2012-11&checkout_monthday=30&checkout_year_month=2012-11&org_nr_rooms=1&org_nr_adults=2&org_nr_children=0&group_adults=2&group_children=0&dest_type=city&dest_id=-117329&ac_pageview_id=118b20a24c910096 
```

在[此 URL](http://www.booking.com/searchresults.html?src=index&error_url=http%3A%2F%2Fwww.booking.com%2Findex.en-us.html%3Fsid%3D79af128e4feda3d8c3dce29a0c4b378e%3Bdcid%3D1%3B&dcid=1&sid=79af128e4feda3d8c3dce29a0c4b378e&si=ai%2Cco%2Cci%2Cre%2Cdi&ss=Favignana%2C+Italy&checkin_monthday=29&checkin_year_month=2012-11&checkout_monthday=30&checkout_year_month=2012-11&org_nr_rooms=1&org_nr_adults=2&org_nr_children=0&group_adults=2&group_children=0&dest_type=city&dest_id=-117329&ac_pageview_id=118b20a24c910096)左侧有一个“显示地图”选项。在此地图上，booking.com 在地图上显示选定的酒店列表，而其他酒店未显示在此地图上。

谢谢山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:30:52.750

这可以通过使用不显示“兴趣点”(poi)的[样式化地图来完成。](https://developers.google.com/maps/documentation/javascript/styling)

# objective-c - UIButton.titleLabel 阴影正在剪裁

> ID：13621637
> 
> 赞同：1
> 
> 时间：2012-11-29T08:29:08.383
> 
> 标签：objective-c, ios, uibutton, uilabel, frame

因为 UIButton.titleLabel.shadowOffset 属性使阴影清晰，所以我更改了 drawTextInRect 方法以创建具有如下半径的自定义阴影：

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
float colorValues[] = {0, 0, 0, opacity};
CGColorRef shadowColor = CGColorCreate(colorSpace, colorValues);
CGSize shadowOffset = CGSizeMake(offsetX, offsetY);
CGContextSetShadowWithColor (context, shadowOffset, radius, shadowColor); 
```

这工作正常。它会产生阴影。我更改了 titleLabel 的边界并调用了 drawTextInRect 方法，例如：

```
button.titleLabel.bounds = CGRectMake(button.titleLabel.bounds.origin.x, button.titleLabel.bounds.origin.y, button.titleLabel.bounds.size.width, button.titleLabel.bounds.size.height);
[button.titleLabel drawTextInRect:button.titleLabel.bounds];
[button setNeedsLayout]; 
```

由于 titleLabel 的边界，阴影被剪裁了。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:46:58.517

您是否尝试过与图层相同的操作。我认为它会解决您的问题，并且可能不需要您所做的。

简单地说，为你的按钮创建 layer(CALayer) 对象并使用任何你需要的属性。记住，使用 layer 你需要 QuartzCore 框架来导入。

试试看，如果有任何问题，请大喊大叫。

# java - 迭代器中对话框的struts2-jquery唯一ID

> ID：13621640
> 
> 赞同：0
> 
> 时间：2012-11-29T08:29:18.083
> 
> 标签：java, jquery, struts2, struts2-jquery

我有一个包含很多行的表，每一行都有一个使用 struts2-jquery 的模式对话框的链接。我需要为每个对话框设置一个唯一的 ID 才能进行设置，但我尝试了多个选项，但没有运气。

```
 <s:iterator value="myBeanList" var="rrSum" status="status">
            <tr>
                <td>
                    <s:url id="ajax%{status.index}" action="smoRiskRegister" var="ajaxURL">
                        <s:param name="requestRiskID"><s:property value="#rrSum.rid" /></s:param>
                    </s:url>

                    <sj:dialog id="dialog3" href="%{ajaxURL}" title="Testing" />
                    <sj:a openDialog="dialog3"><s:property value="#rrSum.rid" /></sj:a>

                </td>
            </tr>
        </s:iterator> 
```

因此，我想要的不是“dialog3”，而是 dialog%{status.index}。我可以将 ID 设置为此...但是如何在锚标记中引用它？不幸的是，对话框没有 var 参数:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:16:09.757

`%{#status.index}`也可以在锚标签中使用。

```
<sj:dialog id="dialog%{#status.index}" href="%{ajaxURL}" title="Testing" />
<sj:a openDialog="dialog%{#status.index}"><s:property value="#rrSum.rid" /></sj:a> 
```

注意`#`符号，当访问的对象不在 OGNL 根中时必须使用它。

> Action 实例总是被压入值栈。因为 Action 在堆栈上，并且堆栈是 OGNL 根，所以对 Action 属性的引用可以省略 # 标记。但是，要访问 ActionContext 中的其他对象，我们必须使用 # 符号，以便 OGNL 知道不查看根对象，而是查看 ActionContext 中的其他对象。

阅读 Struts2 中的 OGNL：http: [//struts.apache.org/2.x/docs/ognl.html](http://struts.apache.org/2.x/docs/ognl.html)。

# javascript - 如何使用 javascript 编辑 HTML 内容？

> ID：13621643
> 
> 赞同：1
> 
> 时间：2012-11-29T08:29:37.790
> 
> 标签：javascript

我的网站中有一个部分，用户可以在其中输入问题的答案。例如，问题指出：

我看过最多的电影：答案：婚礼破坏者

我在问题旁边有一个编辑按钮。当用户单击编辑按钮时，我希望网站在与原始答案框相同的位置打开一个带有婚礼破坏者的文本框。用户可以编辑答案并将其更改为另一部电影。文本框下方应该有一个保存和取消按钮。一旦用户将答案从《Wedding Crashers》更改为另一部电影并单击“保存”，文本框就会消失，新的答案会显示在网站上。现在我只希望能够编辑硬涂层的 HTML 内容。稍后我将连接到数据库并根据他/她的回答进行查询以更新用户数据库。我认为这与 javascript 和 display:block 和 display:hide 的 CSS 属性有关。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:02:12.873

看到您与 Rails 相关的其他问题，您可以使用就地编辑解决方案，例如

[https://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place)

那是你需要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:20:35.607

哇！单击编辑按钮对我来说听起来像是 1999 年......

您是否考虑过使用在悬停/聚焦时显示为可编辑的纯文本输入（具有适当的样式、无边框等）？您仍然需要一些 javascript 来在输入时发送请求（AJAX 以获得更好的 UX 或禁用 js 时的正常 POST）并从字段中移除焦点。我在工作中就是这样做的。它真的很好用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:36:17.387

你可以使用这样的东西：

```
document.getElementById('someid').innerHTML = 'Fred Flinstone'; 
```

以及更改 CSS 属性：

```
document.getElementById('someid').style.borderWidth = '4px'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T08:36:18.227

文本框是绝对必要的吗？

您可以将 HTML5 ( [http://html5demos.com/contenteditable](http://html5demos.com/contenteditable) ) 的奇迹用于支持它的浏览器。

# c++ - 平行减少

> ID：13621645
> 
> 赞同：9
> 
> 时间：2012-11-29T08:29:56.030
> 
> 标签：c++, c, cuda, parallel-processing, gpu

我读过 Mark Harris 的文章 Optimizing Parallel Reduction in CUDA，我发现它非常有用，但有时我仍然无法理解 1 或 2 个概念。它写在第 18 页：

```
//First add during load

// each thread loads one element from global to shared mem

unsigned int tid = threadIdx.x;

unsigned int i = blockIdx.x*blockDim.x + threadIdx.x;

sdata[tid] = g_idata[i];
__syncthreads(); 
```

优化代码：有 2 次加载和第一次添加减少：

```
// perform first level of reduction,

// reading from global memory, writing to shared memory
unsigned int tid = threadIdx.x;                                    ...1

unsigned int i = blockIdx.x*(blockDim.x*2) + threadIdx.x;          ...2

sdata[tid] = g_idata[i] + g_idata[i+blockDim.x];                   ...3

__syncthreads();                                                   ...4 
```

我无法理解第 2 行；如果我有 256 个元素，并且如果我选择 128 作为我的块大小，那么为什么我将它乘以 2？请解释如何确定块大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T15:32:06.510

基本上，它正在执行下图所示的操作：

![在此处输入图像描述](../Images/9ffbfb4f01b7a191192f678be05ae0a6.png)

这段代码基本上是*说*一半的线程将执行从全局内存读取和写入共享内存，如图所示。

你执行了一个内核，现在你想减少一些值，你限制了对上面代码的访问，只有运行的线程总数的一半。假设您有 4 个块，每个块有 512 个线程，您将上面的代码限制为仅由前两个块执行，并且您有`g_idate[4*512]`：

```
unsigned int i = blockIdx.x*(blockDim.x*2) + threadIdx.x;  

sdata[tid] = g_idata[i] + g_idata[i+blockDim.x]; 
```

所以：

```
thread 0 of block = 0  will copy the position 0 and 512,  
thread 1 of block = 0 position 1 and 513;
thread 511 of block = 0 position 511 and 1023;
thread 0 of block 1 position 1024 and 1536
thread 511 of block = 1 position 1535 and 2047 
```

使用`blockDim.x*2`是因为每个线程都将访问位置`i`，`i+blockDim.x`因此您需要乘以`2`保证下一个`id`块上的线程不会计算`g_idata`已计算的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:11:12.517

在优化的代码中，您运行内核的块大小是未优化实现的一半。

让我们在非优化代码中调用块的大小`work`，让这个大小的一半被调用`unit`，并且让这些大小对于优化代码也具有相同的数值。

在非优化代码中，您使用尽可能多的线程运行内核`work`，即`blockDim = 2 * unit`. 每个块中的代码只是将部分复制`g_idata`到共享内存中的数组，大小为`2 * unit`。

在优化后的代码`blockDim = unit`中，现在有 1/2 的线程，共享内存中的数组小了 2 倍。在第 3 行中，第一个和来自偶数单位，而第二个来自奇数单位。通过这种方式，减少所需的所有数据都被考虑在内。

示例：如果您使用`blockDim=256=work`(single block, `unit=128`) 运行未优化的内核，则优化后的代码有一个`blockDim=128=unit`. 由于这个块得到`blockIdx=0`，`*2`没关系；第一个线程确实如此`g_idata[0] + g_idata[0 + 128]`。

如果您有 512 个元素，并且使用 2 个大小为 256 ( `work=256`, `unit=128`) 的块运行未优化，则优化代码有 2 个块，但现在大小为 128。第二个块 ( `blockIdx=1`) 中的第一个线程执行`g_idata[2*128] + g_idata[2*128+128]`。

# asp.net - 使用“异步”（即使它应该完成）作为 MVC 路由的一部分会使路由死锁；如何避免这种情况？

> ID：13621647
> 
> 赞同：20
> 
> 时间：2012-11-29T08:29:54.733
> 
> 标签：asp.net, .net, asp.net-mvc, asynchronous, task-parallel-library

考虑以下（基于默认的 MVC 模板），它是在后台发生的一些“东西”的简化版本 - 它完成得很好，并显示了预期的结果，20：

```
public ActionResult Index()
{
    var task = SlowDouble(10);
    string result;
    if (task.Wait(2000))
    {
        result = task.Result.ToString();
    }
    else
    {
        result = "timeout";
    }

    ViewBag.Message = result;
    return View();
}
internal static Task<long> SlowDouble(long val)
{
    TaskCompletionSource<long> result = new TaskCompletionSource<long>();
    ThreadPool.QueueUserWorkItem(delegate
    {
        Thread.Sleep(50);
        result.SetResult(val * 2);
    });
    return result.Task;
} 
```

但是，现在如果我们`async`在混合中添加一些：

```
public static async Task<long> IndirectSlowDouble(long val)
{
    long result = await SlowDouble(val);

    return result;
} 
```

并将路线中的第一行更改为：

```
var task = IndirectSlowDouble(10); 
```

然后它**不起作用**；它会超时。如果我们添加断点，方法中的`return result;`in`async`只会在路由已经完成**之后**发生- 基本上，系统似乎不愿意使用任何线程来恢复`async`操作，直到请求完成之后。更糟糕的是：如果我们使用过`.Wait()`（或访问过`.Result`），那么它将完全死锁。

那么：那是怎么回事？明显的解决方法是“不涉及”，但这在使用库等时并不容易。最终，和之间`async`没有*功能*差异（尽管存在明显的结构差异）。`SlowDouble``IndirectSlowDouble`

~~注意：控制台/winform/等~~中完全相同的东西可以正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T09:15:05.900

这与在 ASP.NET（Pre .NET 4.5）中实现同步上下文的方式有关。关于这种行为有很多问题：

[Task.WaitAll 在 ASP.NET 中挂起多个等待任务](https://stackoverflow.com/questions/12981490/task-waitall-hanging-with-multiple-awaitable-tasks-in-asp-net)

[Asp.net SynchronizationContext 为异步延续锁定 HttpApplication？](https://stackoverflow.com/questions/11369614/asp-net-synchronizationcontext-locks-httpapplication-for-async-continuations)

在 ASP.NET 4.5 中，本文介绍了同步上下文的新实现。

[http://blogs.msdn.com/b/webdev/archive/2012/11/19/all-about-httpruntime-targetframework.aspx](http://blogs.msdn.com/b/webdev/archive/2012/11/19/all-about-httpruntime-targetframework.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T09:05:58.367

当您使用`.Result`时，总是有可能出现死锁，因为`.Result`本质上是阻塞的。避免死锁的方法是不要阻塞任务（你应该使用`async`并`await`一直向下）。此处详细描述了该主题：

*   [不要阻塞异步代码](http://nitoprograms.blogspot.ch/2012/07/dont-block-on-async-code.html)

一种解决方法是添加`ConfigureAwait`：

```
public static async Task<long> IndirectSlowDouble(long val)
{
    long result = await SlowDouble(val).ConfigureAwait(false);

    return result;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-29T09:18:00.910

另一个解决方法是在整个过程中使用`async`/ `await`：

```
public async Task<ActionResult> Index()
{
    var task = IndirectSlowDouble(10);
    long result = await task;
    ViewBag.Message = result.ToString();
    return View();
} 
```

# matrix - Python 矩阵邻居检查

> ID：13621651
> 
> 赞同：2
> 
> 时间：2012-11-29T08:30:23.607
> 
> 标签：matrix, python-3.x

我有一个包含 0 和 1 的 7*7 矩阵，其中每个 (x,y) 将检查有多少邻居是 1。我是 python 的初学者，只会使用基本的编程过程。

我有：

```
for x in range(rows):
        for y in range(cols):
            lives = 0
            lives = neighbors(matrix, rows, cols)

def neighbors(matrix, rows, cols):

            if matrix[x][y+1] == 1:
                lives += 1
            if matrix[x-1][y+1] == 1:
                lives += 1
            #All 8 positions are checked like this
    return lives 
```

我收到 ol 索引错误。这似乎是一个非常简单的问题，我似乎无法弄清楚如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:04:27.740

首先，当你做 y+1 时会出现索引错误。由于您处于 cols 数量的范围内，因此最终将是 cols+1，超出范围。您可以做的是使用 try-except 块，或者仅通过循环到 cols-1 来确保它不会超出范围。

此外，您的函数定义是多余的，因为您不使用所有输入参数，并且您在全局范围内访问 x 和 y 变量。最简单的做法可能就是删除定义和返回语句。

这应该有效：

```
for x in range(rows):
    for y in range(cols-1): #Loop until the second to last element.
        lives = 0
        if matrix[x][y+1] == 1:
            lives += 1
        if x == 0:  #You probably don't want to check x-1 = -1
            continue 
        if matrix[x-1][y+1] == 1:
            lives += 1 
```

# sql - 如何检查表中的列数据是否存在于同一个表中？

> ID：13621653
> 
> 赞同：3
> 
> 时间：2012-11-29T08:30:29.883
> 
> 标签：sql, vb.net, comparison

如何在 SQL 选择语句中执行此操作..

考虑到我有这张桌子

```
ID_A - DATE1 - DATE2
=====================
CD99 - 11/25 - 12/08
AB23 - 11/20 - 11/22
AB23 - 11/22 - 12/01
XP72 - 11/23 - 12/08 
```

您会注意到 ID_A=AB23 有两个条目**，第一行的 DATE2 等于第二行的 DATE1**，这意味着这两行是连接的。

**那么，如何获取或创建我的 select 语句来查看这些相互连接的行？**

编辑：我在选择语句中试图做的是：a。检查 DATE2 是否不为空 b。从那里，检查 DATE2 是否存在于整个表的 DATE1 中并返回列的值。

我想得到的应该是这样的：

```
ID_A - DATE1 - DATE2
=====================
AB23 - 11/20 - 11/22
AB23 - 11/22 - 12/01 
```

PS我希望不要使用循环来执行此操作。因为当我拥有太多数据时，这会使服务器响应速度太慢。- 请注意，我正在比较同一数据库中的列..

@fthiella 这是我的示例数据，我指的是场景。

```
ID_A - DATE1 - DATE2
=====================
CD99 - 11/25 - 12/08
AB23 - 11/20 - 11/22
AB23 - 11/22 - 12/01
XP72 - 11/23 - 12/08
PQ10 - 11/20 - -n/a-
LM88 - 11/21 - -n/a-
PQ10 - 11/15 - 11/20 
```

从那里我想得到这些：

```
ID_A - DATE1 - DATE2
=====================
CD99 - 11/25 - 12/08
AB23 - 11/22 - 12/01
XP72 - 11/23 - 12/08 
```

这是我为什么排除其他人的快速解释：

```
ID_A - DATE1 - DATE2
=====================
CD99 - 11/25 - 12/08 - not excluded
AB23 - 11/20 - 11/22 - excluded because DATE2 is connected to DATE1 of same ID_A
AB23 - 11/22 - 12/01 - not excluded
XP72 - 11/23 - 12/08 - not excluded
PQ10 - 11/20 - -n/a- - excluded because DATE2 is null
LM88 - 11/21 - -n/a- - excluded because DATE2 is null
PQ10 - 11/15 - 11/20 - excluded because DATE2 is connected to DATE1 of same ID_A (regardless if DATE2 of that line is null) 
```

条件的优先级可以是 - 首先排除 null DATE2，然后检查比较并排除那些在其他行之前的行。

很抱歉花这么多时间，我真的很感谢你给我的每一个帮助.. 现在这个问题可以标记为已回答，再次感谢 fthiella..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T03:21:52.040

```
SELECT date1.* FROM DATES date1 JOIN DATES date2 On date1.ID_A = date1.ID_A
WHERE date1.DATE2 = date2.DATE1
UNION
SELECT D2.* FROM DATES date1 JOIN DATES date2 On date1.ID_A = date2.ID_A
WHERE date1.DATE2 = date2.DATE1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:43:43.097

你可以试试这个

```
SELECT D1.* FROM DATES D1
JOIN DATES D2
On D1.ID_A = D2.ID_A
WHERE D1.DATE2 = D2.DATE1

UNION

SELECT D2.* FROM DATES D1
JOIN DATES D2
On D1.ID_A = D2.ID_A
WHERE D1.DATE2 = D2.DATE1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:51:46.850

我会这样做：

```
SELECT
  your_table.*
FROM
  your_table inner join your_table your_table_1
  on your_table.ID_A=your_table_1.ID_A
     and (your_table.DATE2 = your_table_1.DATE1
          or your_table.DATE1 = your_table_1.DATE2) 
```

我`your_table`使用 加入自身，`inner join`因此只有在每一行都有一个连接（相同的 ID_A、DATE2=DATE1 或 DATE1=DATE2）时，它才会返回行。

**编辑：**根据您的评论，这应该为您提供没有连接的记录：

```
SELECT your_table.*
FROM
  your_table left join your_table your_table_1
  on your_table.ID_A=your_table_1.ID_A
     and (your_table.DATE2 = your_table_1.DATE1)
WHERE your_table_1.ID_A is null
      and your_table.DATE2 is not null 
```

在这里，我`your_table`使用左连接加入自身，并且 ID_A 的过滤结果为空。这意味着此查询将返回 your_table 中的每条记录，但同一表中 DATE2 等于 DATE1 的记录除外。如果 DATE2 已经为空，则连接不会成功，因此将返回行。

# cassandra - 无法使用 jconsole 连接到 cassandra

> ID：13621658
> 
> 赞同：0
> 
> 时间：2012-11-29T08:30:54.663
> 
> 标签：cassandra, jmx, jconsole

我在远程服务器上安装了 cassandra。该机器有 2 个 IP -**内部**和**外部**。在 cassandra 的 jvm opts 中，我将*java.rmi.server.hostname*设置为**内部**ip。*nodetool*连接得很好。但是我无法通过**外部ip 使用***jconsole*进行连接- 它挂断了很长时间，然后（在*-debug*模式下）打印一个超时的*java.net.ConnectException*。这不是防火墙问题 - 服务器上没有防火墙，而且我可以使用*telnet连接到***外部**ip 和 jmx 端口。我也尝试连接到*********通过 ssh 隧道的内部**ip - 但结果仍然相同。*******

 *******谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:24:03.670

**conf/cassandra-env.sh**

```
JVM_OPTS="$JVM_OPTS -Djava.rmi.server.hostname=public_name" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:41:03.173

很可能您尚未配置远程 JMX。 [这应该会有所帮助。](http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-25T09:13:26.337

默认情况下，Cassandra 只允许从 localhost 访问 JMX。要启用远程 JMX 连接，您需要将Cassandra-env.sh 文件中的
***“LOCAL_JMX=yes”***更改为***“LOCAL_JMX=no”***
此属性。
可选地，如果您想启用身份验证，您可以设置与身份验证相关的属性，否则只保留注释。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-03T14:15:13.433

关键点是`JVM_OPTS="$JVM_OPTS -Djava.rmi.server.hostname=x.x.x.x"`

我在这里粘贴我的完整片段以帮助其他人：

```
LOCAL_JMX=no

# Specifies the default port over which Cassandra will be available for
# JMX connections.
# For security reasons, you should not expose this port to the internet.  Firewall it if needed.
JMX_PORT="7199"

if [ "$LOCAL_JMX" = "yes" ]; then
  JVM_OPTS="$JVM_OPTS -Dcassandra.jmx.local.port=$JMX_PORT"
  JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.authenticate=false"
else
  JVM_OPTS="$JVM_OPTS -Dcassandra.jmx.remote.port=$JMX_PORT"
  # if ssl is enabled the same port cannot be used for both jmx and rmi so either
  # pick another value for this property or comment out to use a random port (though see CASSANDRA-7087 for origins)
  JVM_OPTS="$JVM_OPTS -Djava.rmi.server.hostname=192.168.42.101"
  JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.rmi.port=$JMX_PORT"
  JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote"
  JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.ssl=false"

  # turn on JMX authentication. See below for further options
  JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.authenticate=false"

  # jmx ssl options
  #JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.ssl=true"
  #JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.ssl.need.client.auth=true"
  #JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.ssl.enabled.protocols=<enabled-protocols>"
  #JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.ssl.enabled.cipher.suites=<enabled-cipher-suites>"
  #JVM_OPTS="$JVM_OPTS -Djavax.net.ssl.keyStore=/path/to/keystore"
  #JVM_OPTS="$JVM_OPTS -Djavax.net.ssl.keyStorePassword=<keystore-password>"
  #JVM_OPTS="$JVM_OPTS -Djavax.net.ssl.trustStore=/path/to/truststore"
  #JVM_OPTS="$JVM_OPTS -Djavax.net.ssl.trustStorePassword=<truststore-password>"
fi 
```*******

# c# - MVC DropDownListFor 列表中的项目

> ID：13621665
> 
> 赞同：0
> 
> 时间：2012-11-29T08:31:16.700
> 
> 标签：c#, asp.net-mvc, html.dropdownlistfor

我有一个 ViewModel 如下

```
public string Name {get; set;}
public List<Item> Items {get; set;} 
```

并且项目类是：

```
public int ItemID {get; set;}
public bool IsMaster {get; set;} 
```

在我看来，我有 2 个输入，一个用于名称的文本框和一个下拉列表。

我希望下拉列表将一个项目添加到列表中，这可以使用 dropdownlistfor 还是我必须从 FormCollection 中拉出它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:19:47.703

我认为你正在以错误的方式解决这个问题。如果您的模型中有一个可以绑定到下拉列表的项目，那么您可以从那里获取所选项目

```
public List<SelectListItems> Items {get;set;} 
```

否则您必须使用表单集合来获取所选值，然后手动添加项目。即使使用上述方式，您仍然需要从所选项目手动将其添加到列表中。

# mvvm - WPF - 如何等待所有视图被加载

> ID：13621667
> 
> 赞同：0
> 
> 时间：2012-11-29T08:31:25.917
> 
> 标签：mvvm, loaded

我对 MVVM 设计有几个看法。加载所有视图（和 ViewModel）后，我需要执行一些逻辑。我可以为每个视图注册到 Loaded 事件，但我需要知道所有视图/视图模型何时加载。

WPF 支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:17:09.677

开箱即用我不知道 WPF 提供的任何构造。但是，根据您加载视图的实现，提供解决方案不会太难。例如，每个视图的加载方法可以向外部管理对象发出信号。一旦它接收到所需数量的信号，您就可以根据需要做出反应。

# java - 获取所有数据库并转换为字符串数组

> ID：13621668
> 
> 赞同：0
> 
> 时间：2012-11-29T08:31:30.757
> 
> 标签：java, sql, database, arrays, jooq

java - 如何将服务器中的所有数据库添加到Java中的String数组？我正在使用 JOOQ api 执行 SQL 语句，我需要在组合框中获取所有数据库，我可以在其中选择特定数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:34:36.963

你有几个选择。例如，您可以使用从 jOOQ-meta 生成的类（或自己生成 information_schema），然后编写：

```
Factory create = new Factory(connection, dialect);
String[] array =
create.selectDistinct(TABLES.TABLE_SCHEMA)
      .from(TABLES)
      .fetchArray(TABLES.TABLE_SCHEMA); 
```

当然，同样可以通过纯 SQL 实现：

```
String[] array =
create.selectDistinct(field("table_schema"))
      .from("information_schema.TABLES") // Watch for case-sensitivity on MySQL
      .fetchArray(0, String.class); 
```

或者，使用以下`SHOW TABLES`命令：

```
String[] array =
create.fetch("SHOW TABLES")
      .intoArray(0, String.class); 
```

另一种选择是从 JDBC 的 DatabaseMetaData 中读取：

```
Connection connection = ...;
DatabaseMetaData meta = connection.getMetaData();
String[] array = create.fetch(meta.getSchemas()).intoArray(0, String.class); 
```

在 jOOQ 3.0 中，您还可以通过 jOOQ API 读取元数据：

```
List<Schema> schemas = create.meta().getSchemas(); 
```

# python - 为什么 QT tcpsocket.write 不起作用？

> ID：13621673
> 
> 赞同：1
> 
> 时间：2012-11-29T08:32:00.897
> 
> 标签：python, sockets, qt4

这是 Clinet 的代码：

```
QString text = ui->lineEdit->text();
if(text.isEmpty())
    return;
tcpsocket->waitForBytesWritten(300);
tcpsocket->write(text.toStdString().c_str(),text.length());
qDebug("State:%d\n",tcpsocket->state());
qDebug("%d\n",tcpsocket->flush());
ui->lineEdit->clear(); 
```

状态为 3 并且刷新返回 1 但是为什么我的服务器无法收到消息？我的服务器是py写的，可以telnet成功！

# html - iframe 中的 SSRS 报告出现然后消失

> ID：13621678
> 
> 赞同：3
> 
> 时间：2012-11-29T08:32:13.263
> 
> 标签：html, iframe, reporting-services

我正在使用 iframe 显示 SSRS 报告，但遇到了一个奇怪的问题。当我尝试通过图表显示不包含任何内容的报告时，一切正常，但是当我尝试显示包含客户列表的报告时，内容会在加载后立即消失。

主要区别在于图表报表是通过SSRS存储为图像转换为数据库中的二进制数据，而客户列表报表是通过SSRS存储为文本数据转换为数据库中的二进制数据。客户列表报表呈现为许多不同的 JavaScript 函数和 HTML 代码，而图表报表呈现为许多不同的 JavaScript 函数和一些 HTML 代码以呈现最终的图表图像。

我只是无法理解为什么这会崩溃。我原以为在 iframe 中呈现完整的 HTML 文档在 HTML 方面是完全安全的。有没有人知道为什么列表报告首先出现然后当图表报告完美运行时突然又消失了？

编辑：我只在 Chrome 中遇到这种行为。Firefox 和 IE 都呈现列表报表和图表报表，虽然在 Firefox 中存在表格重叠问题，但首先要做的是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:30:23.203

我刚刚将谷歌浏览器升级到最新版本，这解决了这个问题。我在网上做了一些研究，我的结果表明，加载后 iframe 内容突然消失是某个以前版本的 Chrome 的已知问题。我没有版本号，但如果其他人遇到类似问题，那么他们应该尝试升级到最新版本。

# android - 选择要读取 NDEF 消息的 NDEF 记录？

> ID：13621692
> 
> 赞同：0
> 
> 时间：2012-11-29T08:33:40.910
> 
> 标签：android, tags, nfc, rfid, ndef

我开发了 2 个 Android 应用程序。第一个，写入NFC标签，第二个读取我写的内容。

所以，*第一个应用程序（WriteNFC）：我正在写入标签，一个涉及两个 NDEF 记录的 NDEF 消息：第一个记录是“文本”类型，第二个是“URL”类型。

第二个应用程序（ReadNFC）：我扫描标签，以读取 NDEF 消息，并显示它，但不完全。我只在屏幕上显示第二条记录（URL）。我想做的是，当用户选择他安装的另一个用于读取 NFC 标签的 android 应用程序时，这个应用程序应该只能显示第一条记录（文本），而不是第二条记录（URL）？

总而言之，当我们扫描 NFC 标签时，使用我的应用程序 (ReadNFC)，我们只能看到一个 URL (http://www.stackoverflow.com)，而使用其他应用程序，我们只能看到一个文本 (Hello World) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:05:53.773

使用标准 NDEF 文本和 URI 记录类型是不可能的。

但是您可以使用只有您的应用程序可以使用的外部类型记录或未知记录来创建自己的记录负载类型。

另请查看 Android 应用程序记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:41:57.210

这就是我在第一个应用程序（WriteNFC）中所做的

```
private NdefRecord createRecord1(String data)
{  
   byte[] payload = data.getBytes(Charset.forName("UTF-8"));
   byte[] empty = new byte[] {};
   return new NdefRecord(NdefRecord.TNF_ABSOLUTE_URI, empty, empty, payload);
}
private NdefRecord createRecord2(String data)
{  
   byte[] payload = data.getBytes(Charset.forName("UTF-8"));
   byte[] empty = new byte[] {};
   return new NdefRecord(NdefRecord.TNF_ABSOLUTE_URI, payload, empty, empty);
} 
```

在第二个应用程序中（ReadNFC）

```
NdefRecord cardRecord = msg.getRecords()[1];//Extract the second Record
String url_data = new String(cardRecord.getType());//Read data type 
```

结果：

当我使用自己的应用程序（ReadNFC）阅读时，屏幕上当然只有第二条记录的有效负载，我通过“记录类型”存储了它。但是对于第三方应用程序，尤其是本机安装的（“标签”），它会正确显示第一条记录，而第二条记录是一个空字段。所以，它仍然不起作用，因为它仍然看到第二条记录 ![截屏](../Images/fd6b471d7ec5fce1e0f248e8e14b5efb.png)

# c# - 甚至在创建安装程序之前，Outlook 插件就已添加到我的 Outlook Express 中

> ID：13621702
> 
> 赞同：0
> 
> 时间：2012-11-29T08:34:48.920
> 
> 标签：c#, vsto, outlook-addin

我正在尝试使用 c# 创建一个 Outlook 2010 加载项。我创建了一个项目和一个带有一些按钮的表单，为其添加了一些功能并进行了编译。我已经在 Startup 上启动了表单，如下所示，

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    SndRcvFrm frm = new SndRcvFrm(this.Application);
    frm.Show();
} 
```

到现在为止还挺好。当我试图打开我的 Outlook 时，它实际上正在加载加载项，甚至显示了表单。我想知道这是怎么发生的。我没有创建任何安装程序来安装这个插件，即使我没有在任何地方添加任何参考。Outlook 是如何自动检测到我的加载项并启动它的。然后我从 Outlook 的加载项管理器中删除了加载项。下次以后，加载项没有加载。

我的问题是，如果安装程序/clickonce 是将加载项添加到 Outlook 的唯一方法，我的加载项是如何在安装之前出现在 Outlook 中的。在这种情况下，在我的开发阶段是否可以将我的加载项添加到 Outlook 并在不实际安装的情况下查看它的运行情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:37:55.713

当你使用 Visual Studio 构建插件时，Visual Studio 会为你在你的机器上注册插件，这样你就可以在你的机器上运行和调试它。

当您想将其部署到另一台机器时，您需要使用 ClickOnce 或传统安装程序创建安装程序/安装程序。

# php - 每分钟将选定的 MySQL 数据传输到另一台 MySQL 服务器的最佳方式是什么？

> ID：13621704
> 
> 赞同：1
> 
> 时间：2012-11-29T08:35:06.403
> 
> 标签：php, mysql

好吧，我正在寻找一种方法，我可以每分钟或至少每几分钟将选定的 MySQL 数据从一台服务器传输到另一台服务器。这里有一个例子：

（连接到源 SQL 服务器并选择需要的数据）

```
SELECT name, email, online, session FROM example_table WHERE session!=0 
```

（处理数据，连接到外部目标 SQL 服务器和 INSERT/REPLACE 数据）

我只想将查询的输出传输到当然具有合适的表结构的目标服务器。

我已经制作了一个简单的 PHP 脚本，它每分钟都由 Linux 上的 cronjob 执行，但我想有更好的性能方式，它现在也不支持数组。

**欢迎任何与 Linux 兼容的建议/代码示例。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:45:26.263

这是一个很好的开源复制引擎：

[http://code.google.com/p/tungsten-replicator/](http://code.google.com/p/tungsten-replicator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:40:01.767

我不完全确定您要传输的数据是什么，但幸运的是 MySQL 支持不同服务器之间的复制。如果您将数据保存在本地源服务器上并将目标服务器设置为从源服务器获取所有更新，您将拥有两个相同的数据库。这样，您将不需要任何脚本或 cronjobs。

[您可以在http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)找到更多信息。

# javascript - 如何在不重新加载的情况下返回特定页面？

> ID：13621705
> 
> 赞同：0
> 
> 时间：2012-11-29T08:35:11.600
> 
> 标签：javascript, jquery, html, mobile

我正在尝试使用 Javascript 开发移动应用程序。我想创建一个链接，让您无需重新加载此页面即可返回已访问过的特定页面。

我试过这段代码：

```
$('#ajouter').live('click',function(e) {
  window.localStorage.setItem("phrase", $("label[for='" + ($('input[name=opt1]:checked').attr('id') ) + "']").text());
  //Id Rubrique
  $.mobile.changePage('../z.html');
});
$("#z").live('pageshow', function() {
  .....
} 
```

但这让我重新加载页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:41:04.480

使函数返回 false 以避免重新加载页面的默认行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:57:43.900

用这个：

```
$('body').on('click','#ajouter',function(e) {
   e.preventDefault(); // stops default behaviour ie reloading
  ... 
```

还建议更改为 on() 函数而不是 live()

注意，如果您使用的是 1.8 之前的 jQuery 版本，则保持问题中的 live() 处理程序，只需添加 preventDefault：

```
$('#ajouter').live('click',function(e) {
   e.preventDefault(); 
```

# jquery - 使用 onSubmit 访问 $.ajax 函数中的变量

> ID：13621706
> 
> 赞同：0
> 
> 时间：2012-11-29T08:35:16.343
> 
> 标签：jquery, ajax

我今天花了几个小时来找到我的问题的解决方案。我有一个标签 onsubmit="return checks();"。检查（）函数将进行输入验证。

```
function checking(){
    var filename = $("#filename").val();
    $.ajax({
        type: "POST",
        url: url,
        data: $(".myform").serialize(),
        success: function(data){
            if(data == "something"){
               return true;
            }
            else{
               return false;
            }
        }
    });
return false;     // this will trigger my onSubmit
} 
```

但是这个不起作用，因为返回值是 true 或 false 在 $.ajax 函数中。那么如何在我的表单中触发 onsubmit 呢？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:40:05.760

我建议不要使用提交按钮，而是使用这样的普通旧按钮：

```
<input id="submit" type="button" value="Submit" /> 
```

然后，更改您的处理程序，以便仅在验证通过时提交，而不是在验证失败时尝试停止提交：

```
function checking(){
    var filename = $("#filename").val();
    $.ajax({
        type: "POST",
        url: url,
        data: $(".myform").serialize(),
        success: function(data){
            if(data == "something"){
               $('#myform')[0].submit(); //submit your form here
            }
            else{
               return false;
            }
        }
    });
    return false;
} 
```

# android - 在 Activity 中捕获系统事件

> ID：13621707
> 
> 赞同：2
> 
> 时间：2012-11-29T08:35:19.593
> 
> 标签：android, android-activity, android-event

我计划在一个活动中有一个按钮，单击该按钮将启动一项服务。但是，需要启用 GPS 才能使服务正常工作，因此如果禁用了 GPS，我希望禁用该按钮。有没有办法让android在启用/禁用GPS时通知我的活动，以便我可以相应地启用/禁用按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:03:10.440

此链接描述了如何创建位置监听器： [http ://blog.doityourselfandroid.com/2010/12/25/understanding-locationlistener-android/](http://blog.doityourselfandroid.com/2010/12/25/understanding-locationlistener-android/)

我已经复制了下面的重要部分，以防网站将来出现故障。第一步是创建一个 LocationListener：

```
private final class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location locFromGps) {
        // called when the listener is notified with a location update from the GPS
    }

    @Override
    public void onProviderDisabled(String provider) {
       // called when the GPS provider is turned off (user turning off the GPS on the phone)
       // Dim the button here!
    }

    @Override
    public void onProviderEnabled(String provider) {
       // called when the GPS provider is turned on (user turning on the GPS on the phone)
       // Brighten the button here!
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
       // called when the status of the GPS provider changes
    }
} 
```

然后你会想要注册那个监听器。这可能应该在你的`onCreate()`

```
LocationListener locationListener = new MyLocationListener();
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 35000, 10, this.locationListener); 
```

requestlocationupdates 中的第二个和第三个参数你可能应该做得很大，这样你就不会得到 locationupdates，因为你并不真正关心那些，只关心提供者启用/禁用的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:44:51.193

请使用此代码获取 GPS 状态。在活动的 onResume 中使用此代码

```
private LocationManager mLocationManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
boolean GPSprovider = mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 
```

并根据 GPSProvider 您可以启用和禁用该按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:47:07.140

试试这个

```
final String GpsProvider = Settings.Secure.getString(
                getContentResolver(),
                Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
if (GpsProvider.equals(""){
//No GPS
}else{
 //GPS available 
} 
```

# infovis - 如何正确地将节点与多个父节点对齐

> ID：13621708
> 
> 赞同：19
> 
> 时间：2012-11-29T08:35:21.257
> 
> 标签：infovis, space-tree

这是屏幕截图

![空间树](../Images/cf0f317259b6e4fd56978ed4cd656490.png)

我一直在处理这个问题，并试图修改*Y*位置，但没有任何运气。请注意，**Meli Job B**似乎没有对齐。仅当父框附加到多个父框时才会发生这种情况。我尝试了下面的代码来了解一个盒子是否有多个父母，但我无法确定如何定位*Y 轴*，因为它们都落在同一个地方。

**代码：**

```
var pos = node.getPos();
var parents = node.getParents();
if(parents.length > 1) {
    var subnodes = node.getSubnodes();
    for(var i=0; i<subnodes.length; i++) {
        var yPos = subnodes[i].getPos();
        yPos.y = pos.y;
    }
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-03T23:33:26.323

```
var pos = node.getPos();
var parents = node.getParents();
var subnodes = node.getSubnodes();
for(var i=0; i<subnodes.length; i++) 
{
    var yPos = subnodes[i].getPos();
    if(parents.length > 1) 
        yPos.y = pos.y;
    else
        yPos.y = 0
} 
```

# android - setOnitemSelectedListener 未使用以编程方式创建的微调器 Android 触发

> ID：13621711
> 
> 赞同：2
> 
> 时间：2012-11-29T08:35:25.130
> 
> 标签：android

我的需要是

1.  在按钮单击时创建动态微调器
2.  选择微调器值并将值设置到编辑文本字段中。

为此，我以编程方式创建了一个动态微调器。将该代码放在按钮单击侦听器中。它的工作正常到这里。

但是`setOnitemSelectedListener`动态微调器根本不起作用.. Logcat中没有错误...请帮助我..

------------这些是onCreate里面的方法------------

```
Spinner spnOutHospitalList = new Spinner(Referance.this);

// list button on click event
btnList = (Button) findViewById(R.id.btn_list);
btnList.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
    // function to create spinner dynamically
    createDynamicSpinner();
    }
});

// Out Hospital List Spinner on item click listener
spnOutHospitalList.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long arg3) {
    // TODO Auto-generated method stub
    outHospitalName = hospitalNameListArray.get(position);
    outHospital.setText(outHospitalName);
    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
    }
});

------------ These are the functions outside onCreate but inside the Activity------------

// to create spinner dynamically
private void createDynamicSpinner() {
    // TODO Auto-generated method stub
    spnOutHospitalList.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    loadOutHospitalListSpinner();
    spnOutHospitalList.performClick();
}

// to load out hospital/ clinic data into spinner
private void loadOutHospitalListSpinner() {
    // TODO Auto-generated method stub
    try {
        if (getFirstRun()) {
        sampleDB = dbAdapter.getDatabase();
        setRunned();
        } 
        else {
        sampleDB = dbAdapter.getWritableDatabase();
        }
        Cursor c1 = sampleDB.rawQuery("select DISTINCT EPR_OUT_HOSPITAL from EMR_PT_REFERNCE",null);
        System.out.println("count is " + c1.getCount());

        if (c1 != null && c1.getCount() != 0) {
            hospitalNameListArray.clear();
                if (c1.moveToFirst()) {
                    do {
                        hospitalNameListArray.add(c1.getString(c1.getColumnIndex("EPR_OUT_HOSPITAL")));
                    } while (c1.moveToNext());  
                }
            }
            c1.close();

            ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, hospitalNameListArray);

            // dropdownlist
            dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

            spnOutHospitalList.setAdapter(dataAdapter);

        } 
        catch (Exception e) {
            // TODO: handle exception
            System.out.println("CAT LIST ERROR IS: " + e.getMessage());
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T10:36:31.820

尝试这个

写`setOnItemSelectedListener`在里面`createDynamicSpinner`

```
private void createDynamicSpinner() {

//Remove this line from top in your code and add here
Spinner spnOutHospitalList = new Spinner(Referance.this);

    spnOutHospitalList.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    //Pass Spinner Object to this function to load data in it!
    loadOutHospitalListSpinner(spnOutHospitalList);
    spnOutHospitalList.performClick();

spnOutHospitalList.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long arg3) {
    // TODO Auto-generated method stub
    outHospitalName = hospitalNameListArray.get(position);
    outHospital.setText(outHospitalName);
    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
    }
});
} 
```

# c# - 创建可观察的 来自 observablecollection

> ID：13621719
> 
> 赞同：3
> 
> 时间：2012-11-29T08:36:06.093
> 
> 标签：c#, .net, system.reactive, reactive-programming, reactiveui

我有 ObservableCollection<T> 并且我需要创建 observable<bool> 如果集合包含任何元素则返回 true

我试着这样做

```
var collectionHasElementsObservable =
            Observable.FromEventPattern<NotifyCollectionChangedEventHandler,NotifyCollectionChangedEventArgs>(
                ev => ((ObservableCollection<MyType>)_items).CollectionChanged += ev,
                ev => ((ObservableCollection<MyType>)_items).CollectionChanged -= ev); 
```

但我不知道如何将其转换为 IObservable<bool>

如何从中创建 observable<bool> ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T15:24:39.123

您可以使用`Select`将事件映射到具有元素之一：

```
 ObservableCollection<int> coll = new ObservableCollection<int>();

        var hasElements = 
        Observable.FromEventPattern<NotifyCollectionChangedEventHandler,NotifyCollectionChangedEventArgs>(
            a => coll.CollectionChanged += a,
            a => coll.CollectionChanged -= a)
        .Select(_ => coll.Count > 0); 
```

例子：

```
 hasElements.Subscribe(Console.WriteLine);

        coll.Add(1);
        coll.Add(2);
        coll.Remove(1);
        coll.Remove(2); 
```

输出：

```
True
True
True
False 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T18:45:25.347

我注意到你有 ReactiveUI 标签 - 如果你使用 ReactiveCollection，这会更容易：

```
coll.CollectionCountChanged.Select(x => x > 0); 
```

# python - 处理 Twisted Web 服务器中的所有资源

> ID：13621721
> 
> 赞同：2
> 
> 时间：2012-11-29T08:36:13.843
> 
> 标签：python, rest, twisted

我正在开发一个响应 GET 和 PUT 请求的 REST API。

由于多种原因，此 API 将使用 Python 和 Twisted 编写。也就是说，扭曲的网络似乎是基于我找到的所有示例的资源。

这意味着据我了解，我必须设置单独的资源并为每个资源定义 GET 和 POST 处理程序。

我想做的是设置 GET 和 POST 处理程序，它们被称为请求的任何资源。

在伪代码中：

```
import *the appropriate modules*

class Callback(resource.Resource):
    def render_GET(self,request):
        print "GET!"
    def render_POST(self,request):
        print "POST!"

def main():
    *magic*
    reactor.listenTCP(settings.port,factory)
    reactor.run()
    print "Started callback server on port %d" % settings.port

if __name__ == '__main__':
    main() 
```

不幸的是，我在网上搜索的例子没有办法做到这一点。

任何关于如何设置“包罗万象”资源或使用不同反应器类型来处理此问题的意见都将受到赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T14:08:22.533

[Twisted Web in 60 Seconds](http://twistedmatrix.com/documents/current/web/howto/web-in-60/)文档系列回答了这个问题（可能还有其他问题：） 。

特别是，您询问的是 Twisted Web 中所谓的“动态 URL 调度”。听起来您已经找到了`Resource.putChild`可以让您处理静态 URL 调度的 API。使用动态 URL 调度，您不必为要处理的所有 URL 预先设置处理程序。相反，您重写`getChild`以实现您自己的逻辑来按需创建资源。

有关更多详细信息，请参阅[动态调度](http://twistedmatrix.com/documents/current/web/howto/web-in-60/dynamic-dispatch.html)文档，但要点是：

```
class Calendar(Resource):
   def getChild(self, name, request):
       return YearPage(int(name)) 
```

这是一个通过创建一个`YearPage`知道该整数是什么的资源来处理任何整数子级的资源。您应该能够执行类似的操作来创建`Callback`资源。

# android - 需要 ListView 中的自定义滚动条不会根据项目进行拉伸/收缩

> ID：13621733
> 
> 赞同：0
> 
> 时间：2012-11-29T08:37:13.090
> 
> 标签：android, listview, scrollbar

我为我的 ListView 使用了自定义滚动条。我使用了以下代码。

```
<ListView
            android:id="@+id/bars"
            android:layout_width="fill_parent"
            android:layout_height="260dp"
            android:layout_marginTop="10dp"
            android:divider="@null"
            android:dividerHeight="0dp"
            android:fadeScrollbars="false"
            android:fadingEdge="none"
            android:scrollbarStyle="outsideInset"
            android:scrollbarThumbVertical="@drawable/scrollbar_large1"
            android:scrollingCache="false" /> 
```

滚动条会根据该 ListView 中的项目数量进行拉伸或收缩。如果项目较少，滚动条会被拉伸并且看起来不太好。如何制作滚动条图像，而不取决于列表项的数量？

# jquery - 使用 kendoComboBox 时，列表值未从 web 服务绑定到 kendoComboBox

> ID：13621735
> 
> 赞同：-1
> 
> 时间：2012-11-29T08:37:31.007
> 
> 标签：jquery, asp.net-mvc-3, kendo-ui

我想通过 web 服务将值列表从数据库绑定到 kendoCombobox。

这是代码：

```
<select id = "CbxArea" style="width:200px">
</select>

$(document).ready(function () {
    var cmbArea = $("#CbxArea"),
        area;        
    cmbArea.kendoComboBox();  

    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "FlashReportWebService.asmx/GetAreaNames",
        dataType: "json",
        success: function (data) {
            for (i = 0; i < data.d.length; i++) {
                area = data.d[i].AreaName;
                cmbArea.append($("<option> </option>").val(area).html(area));
            }
        }
    });
}); 
```

值列表成功出现，但问题是组合框中仅显示第一个值，其余值未显示（列表中有 16 个值）。

如果我写`cmbArea;`而不是在`cmbArea.kendoComboBox();`组合框中显示总共 16 个值。`kendoComboBox`从 .asmx 页面绑定值有什么问题吗？

我必须`kendoComboBox`只显示值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:24:10.537

正如我在剑道论坛上回答的那样，剑道组合框不会显示`<option>`附加到原始的元素`<select>`。创建选项后，您需要初始化组合框：

```
$(document).ready(function () {
    var cmbArea = $("#CbxArea"),
        area;        

    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "FlashReportWebService.asmx/GetAreaNames",
        dataType: "json",
        success: function (data) {
            for (i = 0; i < data.d.length; i++) {
                area = data.d[i].AreaName;
                cmbArea.append($("<option> </option>").val(area).html(area));

            }

            cmbArea.kendoComboBox(); 
        }
    });
}); 
```

使用 Kendo DataSource 也是一种选择，它会大大减少您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:04:24.957

由于您已经“转换”了您`select`的 a `combobox`，因此您不能直接用 . 填充组合框`options`。如果要向组合框添加新项目，则应将这些项目添加到 dataSource ：

```
var dataSource = cmbArea.data("kendoComboBox").dataSource;
for (i = 0; i < data.d.length; i++) {
    area = data.d[i].AreaName;
    dataSource.add({ text : area, value : area });
} 
```

另一种方法是保持您的营养`select`，并在此营养之后将其转换为组合框：您必须`cmbArea.kendoComboBox();`在成功回调结束时移动（在`for`循环之后）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:25:06.467

作为 Samuel Caillerie 建议的优化并避免`dataSource.add`多次调用，我建议使用接收到的数据构建一个数组，并且`dataSource`只调用一次：

```
var dataSource = cmbArea.data("kendoComboBox").dataSource;
var areas = [];
for (var i = 0; i < data.d.length; i++) {
    areas[i] = data.d[i].AreaName;
}
dataSource.data(areas); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:01:44.163

如果您可以使用 kendo 数据源，则可以使用它。

```
$(document).ready(function () {
    var cmbArea = $("#CbxArea"),
        area;    
    cmbArea.kendoComboBox({
    dataSource: new kendo.data.DataSource({
        transport: {
            read: {
                url: "FlashReportWebService.asmx/GetAreaNames",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                type: "POST"
            }
        },
        dataTextField: "text", //Your Text value in JSON payload
        dataValueField: "value" //Your Value value in JSON payload
    });
}); 
```

# web-services - 带有 Web 服务的 Apache ODE BPEL 部署（文件传输）

> ID：13621738
> 
> 赞同：1
> 
> 时间：2012-11-29T08:37:42.863
> 
> 标签：web-services, deployment, axis2, bpel, apache-ode

我想编写一个axis2 webservice，用于在Apache ODE 上部署BPEL 流程。

目前我有两个主要问题/疑问。

1.  我写了一个简单的 WS 来创建一个文件。它在带有axis2的集成apache tomcat的eclipse中运行良好。但是，如果我在没有 ecplise 的情况下在完全相同的服务器上运行该服务，它将无法工作，并且我会收到“未处理的 IOException”错误，尽管我已经实现了处理（否则 ecplise 会一直为此哭泣）。

    > 编辑：我通过不使用axis2上传service.aar而是将它放在/webapps文件夹中来解决它。

2.  如果我需要放置 BPEL 文件，如何访问该文件夹？服务是否必须与 ODE 在同一台服务器上运行？

    > 编辑：使用 1 访问同一服务器上的文件夹很容易。

3.  如何使用网络服务传输文件？更好：我如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:41:01.497

关于 2) 您可以使用 ODE 公开的部署 API。这允许通过 SOAP 将部署单元（包含 BPEL、WSDL、DD 的 zip 文件）传输到 ODE 并开始部署。

WSDL 在`http://.../processes/DeploymentService?wsdl`, 在默认安装上可用`http://localhost:8080/ode/processes/DeploymentService?wsdl`

# ios - Delphi，FireMonkey：如何在 OSX 和 iOS 中找到唯一的硬件 ID

> ID：13621740
> 
> 赞同：1
> 
> 时间：2012-11-29T08:37:53.133
> 
> 标签：ios, macos, delphi, firemonkey

我有一个 Delphi/Vcl 应用程序，现在正在移植到 FireMonkey 以供跨平台使用。在 Vcl 应用程序中，许可证安全性是基于磁盘序列号的，但我只有在 Windows 中获取它的代码。虽然我希望很多 Delphi 开发人员也需要这种用于 OSX 和 iOS 的代码，但我无法在互联网上找到任何代码。

所以，我需要的是 Delphi/FireMonkey 代码，它在任何可以运行 FireMonkey 应用程序的 iPad 或 Mac（据我所知的任何英特尔 Mac）上返回一个唯一的硬件 ID。

如果我能找到这样的代码，我将不胜感激任何其他处理许可证安全问题的创意代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:47:49.607

不可能。

将第三方应用程序绑定到特定的独特硬件违反了用户体验的基金会规则。如果用户将 ir 应用程序带到应用程序商店，则他有权将其安装到他的所有设备上。每个用户的设备数量是有限的，并且受到适当的保护以防止滥用。

# c# - 如何将对象转换为其实际类型

> ID：13621743
> 
> 赞同：7
> 
> 时间：2012-11-29T08:37:54.983
> 
> 标签：c#, .net, upcasting

考虑以下代码：

```
class MyClass
{
}

class MyClass2 : MyClass
{
}

private void Foo(MyClass cl)
{
    //cl is actually MyClass2 instance
    TestGeneric(cl);
}

private void TestGeneric<T>(T val)
{
     //do smth
} 
```

调用**Foo()**后，TestGeneric 中的 T 是**MyClass**，而不是**MyClass2**。如何实现将*val*视为**MyClass2**实例？提前致谢。

更新：我实际上并不知道该对象是使用**MyClass2** ctor 创建的，而是可以通过调用 val.GetType() 来推断这一点，因此简单的**MyClass2**将不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T12:07:10.167

可以使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)来完成。这是一种很好的面向对象方法，当您在单个处理程序类中拥有所有处理代码（而不是在每个消息中）并且如果需要更多消息类型，只需添加额外的处理程序方法。

```
// Your message classes
public class MyClass : IMessage
{
    // Implement acceptance of handler:
    public void AcceptHandler(IMessageHandler handler)
    {
        handler.HandleMessage(this);
    }
}

public class MyClass2 : MyClass
{
     // Nothing more here
}

// Define interface of message
public interface IMessage
{
    void AcceptHandler(IMessageHandler handler)
}

// Define interface of handler
public interface IMessageHandler
{
    // For each type of message, define separate method
    void HandleMessage(MyClass message)
    void HandleMessage(MyClass2 message)
}

// Implemente actual handler implementation
public class MessageHandler : IMessageHandler 
{
    // Main handler method
    public void HandleSomeMessage(MyClass message) // Or it could be IMessage
    {
         // Pass this handler to message. Since message implements AcceptHandler
         // as just passing itself to handler, correct method of handler for MyClass
         // or MyClass2 will be called at runtime.
         message.AcceptHandler(this);
    }

    public void HandleMessage(MyClass message)
    {
         // Implement what do you need to be done for MyClass
    }

    public void HandleMessage(MyClass2 message)
    {
         // Implement what do you need to be done for MyClass2
         // If code of MyClass should be run too, just call 
         // this.HandleMessage((MyClass)message);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:49:51.470

假设您可以更改`Foo`，但不能更改其签名，您可以这样做：

```
private void Foo(MyClass cl)
{
    TestGeneric((dynamic)cl);
} 
```

这将解决`TestGeneric`在运行时而不是在编译时调用的版本，调用`TestGeneric<MyClass2>`when`cl`是该类型的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:46:20.853

那么当你调用一个泛型方法时，类型参数将根据变量的类型来解析，而不是基于实际值的类型。

例如，如果您有：

```
var x = int as object;
Foo(x); 
```

然后你有这个：

```
void Foo<T>(T value)
{
} 
```

那么 T 的类型将是`object`而不是`int`，因为那是变量的类型。

一种可能的解决方案是使用反射或编译表达式将值动态转换为最低的子类。

您还有其他一些选择是使用反射来检查传递的值的实际类型并将您的逻辑基于该类型，或者使用其他语言机制，例如虚拟方法。

如果您描述您要解决的方案，有人可能会建议一个合适的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T09:08:38.870

最好的解决方案是将`Foo`方法也更改为通用的，以便您可以保存类型信息。你应该这样做：

```
private void Foo<T>(T cl) where T : MyClass
{
    TestGeneric(cl);
} 
```

否则，你会有一个**糟糕**设计的例子。简单的出路是

```
private void Foo(MyClass cl)
{
    if (cl is MyClass2)
        TestGeneric((MyClass2)cl);
    else
        TestGeneric(cl);
} 
```

你也可以使用反射来做一个更广泛的解决方案，但这会滥用工具来修补糟糕的设计。

以下将是一个基于反射的解决方案，但我没有运行它，所以请耐心等待并尝试修复可能的错误。

```
private void Foo(MyClass cl)
{
    Type genMethodType = typeof(TestGenericMethodClass);
    MethodInfo genMethod = genMethodType.GetMethod("TestGeneric");
    MethodInfo methodConstructed = genMethod.MakeGenericMethod(cl.GetType());
    object[] args = new object[] { cl };
    methodConstructed.Invoke(instanceOfTestGenericMethodClass, args);
} 
```

所以

1.  `TestGeneric`获取定义方法的类的类型
2.  使用[Type.GetMethod](http://www.google.rs/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDUQFjAB&url=http://msdn.microsoft.com/en-us/library/system.type.getmethod.aspx&ei=yC-3UNWdLuW00QXzjIH4Cw&usg=AFQjCNHPI_LQCS83ll6Ijhhuu0vj7_qAXA)检索方法定义
3.  检索`cl`变量的实际类型以构造泛型方法
4.  使用[MethodInfo.MakeGenericMethod](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)构造特定类型的方法
5.  使用[MethodBase.Invoke](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)调用构造方法

您的代码将根据您当前的实现而有所不同（取决于类型名称、方法可访问性等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T09:10:22.830

（从评论中回答问题）

这是一个庞大的解决方案，您依赖于具体的实现，但您可以按照以下方式做一些事情：

```
//initialization
Dictionary<Type, Action> typeActions = new Dictionary<Type, Action>();
typeActions.Add(typeof (MyClass), () => {Console.WriteLine("MyClass");});
typeActions.Add(typeof (MyClass2), () => {Console.WriteLine("MyClass2");});

private void TestGeneric<T>(T val)
{
   //here some error checking should be in place, 
   //to make sure that T is a valid entry class
   Action action = typeActions[val.GetType()];
   action();
} 
```

这种方法的一个缺点是它依赖于变量的类型**恰好**是 MyClass 或 MyClass2，因此如果后来有人添加了另一个级别的继承，这将中断，但它仍然比 if-else 或 switch 更灵活通用方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T09:32:11.210

强制转换是指您对对象类型的了解比编译器从静态代码中推断出的更多。

当您需要更多当前拥有的类型信息时，这为您提供了两种选择。

*   更改声明以使信息在声明时显式
*   制作演员表

或动态

在您的情况下，第一个也需要将 Foo 更改为通用的

```
private void Foo<T>(T cl)
{
    //cl is actually MyClass2 instance
    TestGeneric(cl);
} 
```

第二个选项需要强制转换，我猜你有多种类型，所以你需要很多 if-else-if，这通常是一个不好的迹象，特别是当条件基于对象的类型时

```
private void Foo(MyClass cl)
{
    var mc2 = tcl as MyClass2;
    if(mc2 != null) {
        TestGeneric(mc2);
        return;
    }
    var mc3 = tcl as MyClass3;
    if(mc3 != null) {
        TestGeneric(mc3);
        return;
    }
    throw new InvalidOperationException("Type not recognised");
} 
```

最后你可以去动态

```
private void TestDynamic(dynamic val)
{
    TestGeneric(val);
} 
```

还有其他动态执行此操作的方法，例如运行时生成代码，但简单地使用 DLR 比尝试自己扮演角色要容易得多

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T10:19:27.297

您不想在这里调用通用方法。一旦你进入`TestGeneric<T>`，即使`T`是`MyClass2`你想要的，你也不能写任何代码反对`MyClass2`（甚至`MyClass`，除非你在 上添加限制`T`）所以它没有帮助！

你当然不需要走反思路线或`dynamic`.

最明显的方法是：将特定于类的行为放在类本身中：

```
class MyClass
{
    public virtual void Test()
    {
        // Behaviour for MyClass
    }
}

class MyClass2 : MyClass
{
    public override void Test()
    {
        // Behaviour for MyClass2
    }
}

private void Foo(MyClass cl)
{
    cl.Test();
} 
```

Next-best：分支代码取决于传递的类型：

```
private void Foo(MyClass cl)
{
    if (cl is MyClass2)
    {
        Test((MyClass2)cl);
    }
    else
    {
        Test(cl);
    }
}

private void Test(MyClass cl)
{
    // Behaviour for MyClass
}

private void Test(MyClass2 cl2)
{
    // Behaviour for MyClass2
} 
```

在这两种情况下，您都可以直接针对`MyClass2`（或`MyClass`）编写代码，而无需进行任何反射、使用`dynamic`或……无论您计划在通用方法中做什么 - 分支上`typeof(T)`？

# jquery - jquery如何获取多个节点

> ID：13621748
> 
> 赞同：2
> 
> 时间：2012-11-29T08:38:24.500
> 
> 标签：jquery

虽然对于单个元素，我们可以使用 jQuery('#elem').get(0)，但有没有一种方法可以获取节点元素以进行多选：

比如：jQuery('.elements').getAll(0) ？

我正在寻找一个没有循环迭代的解决方案（如果存在）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:41:57.510

没有单一的方法可以做到这一点。您唯一的其他选择是通过不将参数传递给来获取*所有*[`.get()`](http://api.jquery.com/get/)匹配的节点：

```
var all = jQuery('.elements').get(); 
```

但是，您可以在调用之前将匹配集减少到您需要的元素`.get()`以实现相同的目标。您可以使用[`.slice()`](http://api.jquery.com/slice/)返回两个索引之间的匹配元素的子集：

```
var all = jQuery('.elements').slice(1, 3).get(); 
```

除此之外，您最好的选择可能是使用某种形式的迭代（例如[`.filter()`](http://api.jquery.com/filter/)）返回特定索引处的元素，然后`.get()`再次使用：

```
var all = jQuery('.elements').filter(function (i) {
    return i === 2 || i === 5 || i === 9;
}).get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:42:26.883

只需使用选择...

单班

```
$('.elements').get() // It will return all the DOM elements have class="elements <other_classes>" 
```

对于多个班级

```
$('.elements, .nav, .address').get() // It will get all the DOM elements has either of these classes. 
```

# mpi - mpi collect 收集数据

> ID：13621751
> 
> 赞同：0
> 
> 时间：2012-11-29T08:38:40.723
> 
> 标签：mpi, collect

我确信它会`MPI_Gather`从包括根进程本身在内的所有进程中收集数据。

如何`MPI_Gather`从不包括根进程本身的所有进程中收集数据？或者有什么替代功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T08:48:40.057

复制`MPI_Gather`使用的功能，`MPI_Gatherv`但指定`0`为根等级的块大小。像这样的东西：

```
int rank, size, disp = 0;
int *cnts, *displs;

MPI_Comm_size(MPI_COMM_WORLD, &size);

cnts = malloc(size * sizeof(int));
displs = malloc(size * sizeof(int));
for (rank = 0; rank < size; rank++)
{
    cnts[i] = (rank != root) ? count : 0;
    displs[i] = disp;
    disp += cnts[i];
}

MPI_Comm_rank(MPI_COMM_WORLD, &rank);

MPI_Gatherv(data, cnts[rank], data_type,
            bigdata, cnts, displs, data_type,
            root, MPI_COMM_WORLD);

free(displs); free(cnts); 
```

请注意，这`MPI_Gatherv`可能比`MPI_Gather`因为 MPI 实现很可能无法优化通信路径并且会退回到收集操作的一些愚蠢的线性实现而慢得多。`MPI_Gather`因此，在根进程中仍然使用并提供一些虚拟数据可能是有意义的。

您还可以提供`MPI_IN_PLACE`根进程发送缓冲区的值，它不会向自身发送数据，但是您必须再次在接收缓冲区中为根数据保留位置（就地操作期望根将将其数据直接放在接收缓冲区内的正确位置）：

```
if (rank != root)
    MPI_Gather(data, count, data_type,
               NULL, count, data_type, root, MPI_COMM_WORLD);
else
    MPI_Gather(MPI_IN_PLACE, count, data_type,
               big_data, count, data_type, root, MPI_COMM_WORLD); 
```

# asp.net - 使用纯 HTML 而不是 ASPX 是个好主意吗

> ID：13621754
> 
> 赞同：0
> 
> 时间：2012-11-29T08:38:46.370
> 
> 标签：asp.net, html

我正在开发一个 ASP.NET 网站。有时某些模块包含的内容太少，以至于我将它们显示在 jQUEyUI 对话框中并通过 AJAX 与服务器通信。我将这些内容保存在一个单独的文件中，并根据相应的模块将它们加载到 jQueryUI 对话框中。我想知道将这些内容作为纯 HTML 元素而不是 asp 元素是否是个好主意。不知何故，我认为这可能会减少从 asp 元素转换为 html 元素可能导致的开销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:54:03.650

我总是使用 aspx 页面，因为动态页面在开始时需要更多工作，但最终它几乎可以节省时间。特别是当您不确定将在那里显示的内容时，它会更好。我这样做的一个原因是让一切都一样。一种风格一种编码方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:42:17.570

我会说这可能是过早的优化。aspx 页面的开销几乎在所有情况下都可以忽略不计。我相信有一天您更有可能需要在该页面中放置动态内容，在这种情况下，您必须将 html 文件转换为 aspx，并更改 ajax 对话框的 url - 这将花费时间/金钱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T08:49:32.263

如果您有实际不使用/运行任何代码的 aspx 页面或 ascs 用户控件，则可以将`AutoEventWireup`,`EnableViewState`或者 设置`EnableSessionState`为**false**并停止调用 PageLoad 和其余函数并减少开销。因此，在您声明的控件之上：

```
<%@ Control AutoEventWireup="false" EnableViewState="false" ... 
```

或页面：

```
<%@ Page AutoEventWireup="false" EnableViewState="false" EnableSessionState="false" ... 
```

session的禁用是让页面并行加载，EnableViewState的禁用是减小大小，AutoEventWireup是减少回调钩子和调用。

一般来说，你可以使用任何你想要的东西——如果你的页面可以工作，但如果你想保持它的健壮性并且易于更改或更新，或者在将来添加新功能，那么使用动态 aspx 页面。

类似问题：[母版页和性能](https://stackoverflow.com/questions/13256441/master-page-and-performance)

# android - Android中的MS DPAPI？

> ID：13621756
> 
> 赞同：3
> 
> 时间：2012-11-29T08:38:58.367
> 
> 标签：android

有谁知道Android中有任何类似MS DPAPI的相关机制？那就是Android中的系统级密钥存储机制是什么？

# android - 下载文件和显示过程，如谷歌播放

> ID：13621757
> 
> 赞同：2
> 
> 时间：2012-11-29T08:38:58.957
> 
> 标签：android, google-play

> **可能重复：**
> [Android：在下载应用程序时显示通知栏](https://stackoverflow.com/questions/11135389/android-show-notification-bar-on-downloading-application)

我想让我的 android 应用程序可以像 google play 一样下载文件。

我有几个问题，所以感谢任何人都可以帮助我，谷歌使用通知更新状态栏（如下载..）并通过自定义通知中的扩展视图更新下载文件，或者他们创建了一个可以在下载文件时显示的进程栏和在主布局中完成时隐藏？哪个是对的？

但展开/折叠通知视图仅适用于 Android 4.1 及更高版本。他们怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:58:15.500

基本上，Google play 用于下载的是 API DownloadManager。它自己处理通知栏，因此您不必担心。下载完成后会取消通知，通知您下载完成。

如果您不想使用它，那么您可能必须编写自己的下载管理器并自己处理所有事情。

# javascript - 水平幻灯片 - 定义开始和结束

> ID：13621759
> 
> 赞同：3
> 
> 时间：2012-11-29T08:39:11.833
> 
> 标签：javascript, jquery, css, html

我在 div 上有一个水平幻灯片（使用相对定位），如下所示：

![在此处输入图像描述](../Images/8cbbc625ef88d54d0654aac5262399ea.png)

它相应地左右滑动，但我无法让它在幻灯片容器的开始和结束处停止，所以它最终是这样的：

![在此处输入图像描述](../Images/decccfe1a18681330fd41ee83e98f77d.png)

这是JS（jquery）：

```
$('.timeline-nav').on('click', function() {

    if (!anim)
    {
        anim = true;

        var pos = $(this).hasClass('left') ? 320 : -320;

        pos = parseInt($('.timeline-content-wrapper').css('left')) + pos;

        $('.timeline-content-wrapper').animate({'left': pos}, 600, function() {
            anim = false;
        });
    }

    return;
}); 
```

**编辑**：[现场示例](http://sofia-silva.com/agenda/test.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:23:59.673

```
pos = parseInt($('.timeline-content-wrapper').css('left')) + pos;
if (pos < -1120) pos = -1120;
if (pos > 0) pos = 0; 
```

代码可能更短，但这更容易理解:)。第一个 if 取决于元素的宽度；也许您需要在运行时更改或计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T09:36:18.870

在这里查看所有工作：

[http://jsfiddle.net/yUe23/1/](http://jsfiddle.net/yUe23/1/)

我已经将一些类 (timeline-content-wrapper) 更改为 ids，并在它周围想象了一些 HTML (timeline-content-mask)

```
var anim=false;
var pos=0;
var originalPos=0;

$(function() {

    originalPos=$('#timeline-content-wrapper').offset().left;

    $('.timeline-nav').click( function() {

        if (!anim) {

            var $wrapper=$('#timeline-content-wrapper');
            var $mask=$('#timeline-content-mask');        

            var pos = $(this).hasClass('left') ? 200 : -200;
            var wid=$wrapper.width();
            var maskWid=$mask.width();
            var oldPos=$wrapper.offset().left;

            anim = true;

            // alert(parseInt($wrapper.offset().left)+" "+pos+" "+originalPos+" "+originalPos+" "+wid+" "+maskWid);

            pos = parseInt($wrapper.offset().left)-originalPos + pos;

            if(pos<-wid+maskWid) pos=-wid+maskWid;
            else if(pos>0) pos=0;

            $wrapper.animate({'left': pos}, 600, function() {
                anim = false;
            });

        }

        return;
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:23:35.043

这个怎么样：

```
pos = Math.min(parseInt($('.timeline-content-wrapper').css('left')) + pos, 0); 
```

我假设包装器 div 不应该具有正的左值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T09:55:50.167

在小提琴上：http: [//jsfiddle.net/ktszm/5/](http://jsfiddle.net/ktszm/5/)

```
 var max_width = 250;      
        var width_of_viewport = 200;            
        var stopper = max_width - width_of_viewport;  
        var container_position = $('.timeline-content-wrapper').position().left;

        if(container_position == 0 && $(this).hasClass('left')) 
        { 
           pos = 0; 
        }
        else if(container_position == (stopper*-1) && !$(this).hasClass('left')) 
        { 
           pos = 0; 
        }
        else 
        { 
           $('.timeline-content-wrapper').animate({'left': '+='+pos}, 600, function() {
                anim = false;
            });
        }
    } 
```

​</p>

# stored-procedures - 作为 INOUT 或 OUT 参数所需的动态参数或变量

> ID：13621761
> 
> 赞同：1
> 
> 时间：2012-11-29T08:39:28.087
> 
> 标签：stored-procedures, hsqldb

现在我正在尝试为 HSQL-DB 创建一些存储过程。

我想创建一个新用户并返回新用户的 ID。

例如，我尝试这样创建程序。

```
create procedure test(out param int)
modifies sql data
begin atomic
set param = 1;
end; 
```

=> 调用它

```
declare param int ;
call test(param);
call param; 
```

=> 错误

```
dynamic parameter or variable required as INOUT or OUT argument 
```

我找不到错误-.-

太长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:30:04.593

这就是您调用该过程的方式：

```
 declare param int;

 call test(param)

 call param 
```

看起来一样，但是每条语句都是单独执行的！

# android - 如何在填充有数组的 AutoCompletetextview 中找到项目的位置

> ID：13621762
> 
> 赞同：22
> 
> 时间：2012-11-29T08:39:31.857
> 
> 标签：android, autocompletetextview

我有一个数组（*array1* with `States`）`AutoCompleteTextview`，我用*array1*填充它。当我从中选择值时，`AutocompleteTextView`我`state`从 AutoCompleteTextView 下拉列表中选择

我想要的是从我选择的*array1中获取项目的***位置。** 我试过的是. *`OnClickEvent``AutocompelteTextView`*

 *```
STATE.setOnItemClickListener(new OnItemClickListener(){

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long rowId) {
        String selection = (String) parent.getItemAtPosition(position);
        String num = selection;
    }
}); 
```

它给了我从下拉列表中选择的值，但我想获取`position of the value`in *array1*。例如，我有一个大小为 4 的数组，例如 array1 = {A,B,C,D}，如果我选择 B，它应该返回我在数组中的 B 位置，即 2。

我希望我说清楚了。提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-29T08:43:11.730

使用中的**位置**变量`onItemClick`。

```
STATE.setOnItemClickListener(new OnItemClickListener(){

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long rowId) {
        String selection = (String) parent.getItemAtPosition(position);
        int pos = -1;

        for (int i = 0; i < yourarray.length; i++) {
            if (yourarray[i].equals(selection)) {
                pos = i;
                break;
            }
        }
        System.out.println("Position " + pos); //check it now in Logcat
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-18T08:58:56.257

使用列表而不是数组。为 AutoCompleteTextView 实现 onItemClickListener，然后在列表中使用 indexOf 来查找所选项目的索引。

```
actvCity.setOnItemClickListener(new OnItemClickListener() {

     @Override
     public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
          long arg3) {
          int index = cityNames.indexOf(actvCity.getText().toString());
          // Do Whatever you want to do ;)
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T05:30:05.967

```
 @Override
            public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
            {
                TextView txtvw=(TextView) view;
                String str=txtvw.getText().toString();
                int index = contactNames.indexOf(str);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T06:59:30.497

```
Item.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    //// id contains item if from database
                    ItemNoSelected = id;
                }
            }); 
```

id 来自数据库，我们可以使用它

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-11-22T16:34:49.623

您可以在 clickItem 侦听器中找到父字符串。在这种情况下，OSchools 是自定义的 ArrayList。

```
Object item = parent.getItemAtPosition(position);
for(OSchools d : data){
Log.e("name",d.getName());
String name = d.getName();
if(d.getName() != null && name.contains(item.toString())){
       ID = d.getID();
} 
```*

# c# - 何时使用接口类型而不是具体类型的变量

> ID：13621766
> 
> 赞同：1
> 
> 时间：2012-11-29T08:39:46.240
> 
> 标签：c#

我有一个派生自接口的类。现在该类必须实现接口中的所有方法 + 它还定义了另外 2 个方法。现在我的问题是，这样做有什么好处/用例：

```
IMyInterface varInt= new ConcreteImp(); 
```

超过，

```
ConcreteImp varInt= new ConcreteImp(); 
```

我看到这种模式在代码块中的每个地方都使用过，但不确定为什么要使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:45:50.487

使用接口的好处是减少了部件对软件组件具体实现的依赖。在您发布的一行中，您将看不到好处。该接口的消费者可以从中受益。

> 编辑：你会很高兴[阅读这篇关于抽象](http://odetocode.com/blogs/scott/archive/2012/11/14/abstractions-patterns-and-interfaces.aspx)的文章。

例如，假设您有一个方法接受这样的接口`Rent(IMovie)`。另一个人将能够编写`Rent()`方法的实现，而无需知道`IMovie`调用方法时将传入的类型的细节。然后，您将能够创建多个不同的`IMovie`实现，这些实现可能具有不同的计费方法，但`Rent()`方法不必考虑这一点。

```
void Rent(IMovie movie)
{
    var price = movie.Price();
    movie.MarkReserved();
}

public interface IMovie { }

public class Oldie : IMovie
{
    private decimal _oldieRate = 0.8;

    public decimal Price()
    {
        return MainData.RentPrice * _oldieRate;
    }
    public decimal MarkReserved()
    {
        _oldiesDb.MarkReserved(this, true);
    }
}

public class Blockbuster : IMovie
{
    private decimal _blockbusterRate = 1.2;

    public decimal Price()
    {
        return MainData.RentPrice * _blockbusterRate ;
    }
    public decimal MarkReserved()
    {
        _regularDb.MarkReserved(this, true);
    }
} 
```

这是为什么接口有用的示例，但不是代码设计的很好示例。

根据经验，您应该编写方法，以便它们需要最少的输入来工作，并且它们的输出提供尽可能多的信息供其他人调用时使用。例如，看一下以下签名：

```
public List<Entity> Filter(IEnumerable<Entity> baseCollection){ ... } 
```

此方法仅请求`IEnumerable<Entity>`，因此它可以采用不同的集合类型，例如`List<Entity>`，`Entity[]`或某些工具返回的自定义类型。但是您返回`List<Entity>`，因此您不会立即将调用者限制为可枚举的元素。例如，她可以立即在返回值上使用 Linq。

还有更多好处，例如在单元测试中，您可以创建模拟对象并告诉它们在与其余代码交互期间如何表现。虽然，您现在可以使用具有虚拟方法的类来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:43:14.750

当您需要在派生类使用接口中强制执行功能时。

当您需要将数据从超类传递到子类时，您可以使用具体类。它是接口和子类背后的基本 oop 思想。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T08:46:42.387

在您的具体示例中，我会说这并不重要，因为您正在使用`new`并创建一个具体类型。当您开始使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)时，它开始变得更加有用。

它更有用的场景如下所示：

```
public SomeResultType DoSomething(ISomeType obj)
{
    //to something with obj
    // return someResultType
} 
```

上面可以使用任何类型调用，只要它实现`ISomeType`. 但是在您使用`new`关键字的示例中，我会改用`var`. 您仍然可以将其视为它实现的类型，因为它继承了该类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T08:47:12.733

假设 IMyInterface 有“Draw”方法，现在所有派生类都必须实现“Draw”方法。如果您有一个带有方法“Render(IMyInterface shape)”的类“Engine”，那么无论形状是什么，您都只需要调用“Draw”方法。并且每个形状都随心所欲地绘制自己。你可以看看设计模式，你会看到接口的魔力；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T08:41:44.777

假设您希望在代码的其他地方能够为变量分配不同的`IMyInterface`实现`varInt`。然后该变量需要用 type 声明`IMyInterface`。

或者，如果您想让任何代码阅读者清楚地知道您打算`varInt`使用的只是使用定义的接口`IMyInterface`，那么类型声明就会清楚地说明这一点。

# javascript - 添加逗号作为千位分隔符（javascript） - 输出被删除

> ID：13621769
> 
> 赞同：9
> 
> 时间：2012-11-29T08:40:00.453
> 
> 标签：javascript, jquery

我正在尝试动态调整输入的数值以包含千位分隔符

这是我的代码：

```
function addCommas(nStr) {
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
}

<input type="number"  onkeyup="this.value=addCommas(this.value);" /> 
```

但是，当我在 4 之后输入数字时，该字段被清除。

有什么想法我哪里出错了吗？如果有一个 jQuery 解决方案，我已经在我的网站上使用它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T08:46:48.203

试试这个正则表达式：

```
function numberWithCommas(x) {
  return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-02T16:37:00.933

要添加千位分隔符，您可以像这样对调用进行字符串拆分、反转和替换：

```
function addThousandsSeparator(input) {
    var output = input
    if (parseFloat(input)) {
        input = new String(input); // so you can perform string operations
        var parts = input.split("."); // remove the decimal part
        parts[0] = parts[0].split("").reverse().join("").replace(/(\d{3})(?!$)/g, "$1,").split("").reverse().join("");
        output = parts.join(".");
    }

    return output;
}

addThousandsSeparator("1234567890"); // returns 1,234,567,890
addThousandsSeparator("12345678.90"); // returns 12,345,678.90 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-29T08:56:19.873

尝试

```
<input type="text" onkeyup="this.value=addCommas(this.value);" /> 
```

反而。由于该函数使用的是文本而不是数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-13T15:11:16.120

在格式化之前的每种情况下，首先尝试删除现有的逗号，例如：[Removing commas in 'live' input fields in jquery](https://stackoverflow.com/questions/17112426/removing-commas-in-live-input-fields-in-jquery)

例子：

```
function addThousandsSeparator(x) {
    //remove commas
    retVal = x ? parseFloat(x.replace(/,/g, '')) : 0;

    //apply formatting
    return retVal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T09:43:20.873

正如狄龙提到的，它必须是一个字符串（或者你可以使用 typeof(n) 和 stringify 如果不是）

```
function addCommas(n){
    var s=n.split('.')[1];
    (s) ? s="."+s : s="";
    n=n.split('.')[0]
    while(n.length>3){
        s=","+n.substr(n.length-3,3)+s;
        n=n.substr(0,n.length-3)
    }
    return n+s
} 
```

# ruby-on-rails-3 - Rails 3 Active Record 和 client_side_validations

> ID：13621778
> 
> 赞同：0
> 
> 时间：2012-11-29T08:40:30.300
> 
> 标签：ruby-on-rails-3, activerecord

我希望了解以下情况

我有一个消息模型

```
 class Message 
 include ActiveModel::Validations
 include ActiveModel::Conversion
 extend ActiveModel::Naming 
```

我想通过 gem client_side_validations 使用 validates_uniqueness_of :email，但是 gem 似乎依赖于使用

```
< ActiveRecord::Base 
```

所以我的模型应该是这样的

```
class Message  < ActiveRecord::Base
 include ActiveModel::Validations
 include ActiveModel::Conversion
 extend ActiveModel::Naming 
```

但是，如果我包含继承，我会收到一条错误消息

```
undefined method [] 
```

有些事情不对，我想知道是否有人可以解释为什么会这样

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:18:46.517

不确定它是否与错误有关，但`ActiveModel`如果您从 继承，则不应包含/扩展所有这些模块`ActiveRecord::Base`，因为它们将通过继承包含在内。我会首先尝试将它们取出，看看是否有效。

# asp.net - 我有一个从数据库填充的 gridview 控件！我想在gridview的每一行的末尾添加一个带有文本属性“reserve”的按钮。

> ID：13621779
> 
> 赞同：0
> 
> 时间：2012-11-29T08:40:35.930
> 
> 标签：asp.net, sql

根据按下哪个按钮，我必须获取下一个表单中需要的 excursion_date_id！

所以最好使用什么 - 也许是 buttonfield 属性！

这是我的代码

首先是 Dates.class

```
public class Dates
   {
        private int excursionID;
        private DateTime startdates;
        private double prices;
    public  int ExcursionID
    {
        get { return excursionID; }
        set { excursionID = value; }

    }
    public DateTime StartDates
    {
        get { return startdates; }
        set { startdates = value; }

   }

    public  double Prices
    {
        get { return prices; }
        set { prices = value; }
    }

    public Dates()
    { }

   } 
```

}

然后我用我的数据库中的日期填充gridview 我想在gridview 的每一行的末尾有一个带有文本属性“reserve”的按钮！

```
protected void Page_Load(object sender, EventArgs e)
        {
           string excursionnId = Request.QueryString["ExcursionId"];

        Dates date = new Dates();
        List<Dates> listDate = new List<Dates>();
        listDate = GetDates();
        gvDates.DataSource = listDate;
        gvDates.DataBind();

    }

    public List<Dates> GetDates()
    {
        List<Dates> datesList = new List<Dates>();

        string connectionString = "Server=localhost\\SQLEXPRESS;Database=EXCURSIONSDATABASE;Trusted_Connection=true";
        string excursionnID = Request.QueryString["ExcursionID"];
        string query =
    "SELECT Excursion_date_ID, Excursion_ID, Start_date, Price FROM EXCURSION_DATES WHERE EXCURSION_ID='" + excursionnID + "'";
        SqlConnection conn = new SqlConnection(connectionString);
        SqlCommand cmd = new SqlCommand(query, conn);
        try
        {
            conn.Open();
            SqlDataReader rd = cmd.ExecuteReader();
            int s=0;
            while (rd.Read())
            {
                Dates dates = new Dates();

                dates.ExcursionID = Convert.ToInt32(rd["Excursion_ID"]);
                dates.StartDates = Convert.ToDateTime(rd["Start_date"]);
                dates.Prices = Convert.ToDouble(rd["Price"]);
                datesList.Add(dates);

            }
        }
        catch (Exception EX)
        {

        }
        return datesList;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:51:05.423

```
 <asp:GridView ID="gvDates" runat="server" Width="100%" AutoGenerateColumns="false"  
                    OnRowCommand="grd_RowCommand" >
                    <Columns>
                        <asp:TemplateField>
                              <ItemTemplate>
                                 <asp:Button ID="btn" CausesValidation="false"    CommandName="YourCommandName" 
                         CommandArgument='<%#Eval("Excursion_ID") %>' runat="server" Text="Text" />

                              </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView> 
protected void grd_RowCommand(object sender, GridViewCommandEventArgs e)
    {

        string number = (string)e.CommandArgument;
        if (number==null) return;
        switch (e.CommandName)
        {
          case "YourCommandName":
                Load(number);
                break;

        // some others command
         }
    } 
```

或不带行命令

```
 <asp:GridView ID="gvDates" runat="server" Width="100%" AutoGenerateColumns="false"  >
                <Columns>
                    <asp:TemplateField>
                          <ItemTemplate>
                             <asp:Button ID="btn" CausesValidation="false"     OnClick="btnClick" 
                     CommandArgument='<%#Eval("Excursion_ID") %>' runat="server"  Text="Text" />

                          </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
protected void btnClick(object sender, EventArgs e)
{
    Button btn=(Button)sender;
    if(btn==null) return;
    string number = (string)btn.CommandArgument;
    if (number==null) return;

    Load(number);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:49:00.727

在您的 .aspx 页面中，将 GridView 按钮的 ID 指定为 ExcursionID。您可以为此使用按钮字段或在模板列中放置一个按钮。

# ios - 带有部分的 FetchedResultsController

> ID：13621783
> 
> 赞同：4
> 
> 时间：2012-11-29T08:40:49.097
> 
> 标签：ios, nsfetchedresultscontroller

我正在编写一个使用 coredata 的小应用程序，我有像主题这样的数据，其中包含数学、科学和其他书籍。

其他书籍可以添加或删除，但数学和科学不能删除，添加新学生时默认添加。当我获取我的结果时，我应该得到所有的书名，包括数学和科学。

我想要做的是在三个部分中显示数据，标题为数学、科学和其他。数学和科学将只包含一行，即数学或科学。所有其他书籍都应该在阅读部分。

如何着手实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T09:02:37.140

当您创建 NSFetchResultsController 时，请在获取请求中使用 books 表的实体名称。

然后用这个...

```
NSFetchedResultsController *aController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"typePropertyName" cacheName:nil]; 
```

typePropertyName 将是从一本书到它所在部分的名称的路径。

如果您直接在 Book 表中拥有它，它可能只是 @"typeName"；如果您与名为的表有关系，那么它可能是 @"type.name" `type`，然后该表有一个名为 的字段`name`。

无论如何，这将创建一个 NSFetchedResultsController 中的部分...

完整的代码将类似于...

```
#pragma mark - fetched results controller

- (NSFetchedResultsController*)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Book"];
    [request setFetchBatchSize:20];

    NSSortDescriptor *sdType = [[NSSortDescriptor alloc] initWithKey:@"type.name" ascending:YES];
    NSSortDescriptor *sdName = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    [request setSortDescriptors:@[sdType, sdName]];

    NSFetchedResultsController *aController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"type.name" cacheName:nil];

    aController.delegate = self;
    self.fetchedResultsController = aController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    return _fetchedResultsController;
} 
```

然后在 tableViewController 你可以有这个......

```
- (NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];

    return [sectionInfo name]
} 
```

然后，这将使用节名称作为每个节的标题。

# java - Eclipse 误解了异常抛出方面

> ID：13621785
> 
> 赞同：0
> 
> 时间：2012-11-29T08:40:56.437
> 
> 标签：java, eclipse, annotations, aspectj

在 Eclipse + AJDT 中，我实现了一个方法注释来检查授权，如下所示。

注解：

```
@Retention(RetentionPolicy.RUNTIME)
public @interface Secured {} 
```

方面：

```
public aspect SecurityCheck {
  pointcut checkSecurity(Secured annotation) : execution(@Secured * *.*(..)) && @annotation(annotation);

  Object around(Secured annotation) throws PermissionException:
    checkSecurity(annotation) {
    ...
    if (...) throw new PermissionException();
    ...
    return proceed(annotation);
  }
} 
```

用法：

```
@Secured
public void someMethod() {} 
```

注释标记了应该应用方面的所有方法。Aspect 检查授权并抛出`PermissionException`失败。

但是，由于它是一个检查异常，`someMethod()`需要声明它：

```
@Secured
public void someMethod() throws PermissionException {} 
```

Eclipse 不喜欢这样：里面没有东西`someMethod()`可以 throw `PermissionException`，所以它会抱怨。我必须做一个解决方法：

```
@Secured
public void someMethod() throws PermissionException {
  warn();
}

@SuppressWarnings("unused")
public static void warn() throws PermissionException {} 
```

这让 Eclipse 很高兴，并且工作得很好。但是，`warn()`每次都调用只是为了让 Eclipse 闭嘴是相当丑陋的。

有什么可以做得更好？这是一个简单的 Eclipse 错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:53:30.650

我相信您在这里偶然发现了一个错误（https://bugs.eclipse.org/bugs/show_bug.cgi?id=240608），我相信它没有得到修复。

你需要它是一个检查异常吗？

# logging - 如何在 Windows Azure 上为所有 Web 角色更改 Web.config 中的日志记录设置？

> ID：13621787
> 
> 赞同：0
> 
> 时间：2012-11-29T08:41:06.323
> 
> 标签：logging, azure, log4net

Windows Azure 上的 ASP.NET 应用程序。该应用程序具有可扩展性，可在 1..N 个 Web 角色实例上运行。

我们将 log4net 写入 Windows 事件日志，并将 Windows Azure 诊断整合到 Azure 存储。

目前 log4net 配置存储在 Web.config 中。

对于应用程序日志记录，我们有以下要求：

1.  能够指定要写入日志的一种或多种类型的日志条目的列表

2.  能够指定将日志条目写入日志的级别（每个日志条目）

记录器命名约定满足第一个要求。记录器定义了一个层次结构，并让程序员在运行时控制打印或不打印哪些语句。

```
ILog log = LogManager.GetLogger("Davanti.WMS.Core.Logic.Inventory"); 
```

第二个要求可以通过使用日志级别 DEBUG、INFO、WARN、ERROR 和 FATAL 来实现。

```
log.Debug("Process has completed"); 
```

**现在的情况**

我们在重定向到 Windows 事件日志的 Web.config 文件中只有一个 log4net 配置。并根据存储在中央数据库中的设置控制应用程序代码中记录的内容（参见要求 1）和记录的深度（级别）（参见要求**2**）**。**

这种方法将对应用程序性能产生负面影响，因为应用程序本身必须检查是否需要（同步）记录某些消息，而不是在记录框架上（异步）。

**所需情况**

我们想从 log4net 设置中控制要记录的内容和记录级别。问题是我们必须在**所有**Windows Azure Web 角色实例上应用 log4net 设置。最好的方法是什么？

此外，我们希望有一种更加用户友好的方式来启用日志记录（例如通过顾问）。有哪些可能性？

例如使用企业库配置编辑器。配置设置的可视化表示。 [http://img651.imageshack.us/img651/930/logging.jpg](http://img651.imageshack.us/img651/930/logging.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:57:44.203

默认配置提供程序将根据您的情况查看 app.config 或 web.config。但是，您可以使用 XmlConfigurator 类从 Stream 加载配置

[http://logging.apache.org/log4net/release/sdk/log4net.Config.XmlConfigurator.Configure_overload_7.html](http://logging.apache.org/log4net/release/sdk/log4net.Config.XmlConfigurator.Configure_overload_7.html)

在您的角色配置中，您可以指定一个 blob 位置，然后使用 Azure 存储 SDK 中的一个 blob 客户端对象并从单个 blob 位置加载 xml。

Log4Net 配置： http: [//logging.apache.org/log4net/release/manual/configuration.html](http://logging.apache.org/log4net/release/manual/configuration.html)

这类似于使用 xml blob 的 Azure 诊断配置。

需要注意的是，如果您想对日志进行实时更改，则需要执行更多实现，例如定期排队以更新文件。

# wolfram-mathematica - 用数学插值

> ID：13621789
> 
> 赞同：-2
> 
> 时间：2012-11-29T08:41:17.570
> 
> 标签：wolfram-mathematica, interpolation

我有一个 69 点 X= {x1,x2,....x69} 的列表。我如何对点进行插值并从曲线的插值中创建一个新的列表 X1 但有 2059 个点？我可以对点进行插值，而不是为获得的函数制作表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:27:35.943

单程：

```
to = 10;
oldData = {#, RandomReal[]} & /@ Range[to];
f = Interpolation[oldData, InterpolationOrder -> 3];
newData = {#, f[#]} & /@ FindDivisions[{1, to}, 40];

ListPlot[{newData, oldData}, 
 PlotStyle -> {{Directive[PointSize[Medium]], Red}, Blue}, 
 Joined -> True, Mesh -> All, AxesOrigin -> {0, 0}, 
 PlotLegends -> {"new data", "old data"}] 
```

给

![在此处输入图像描述](../Images/9ec9e14aa28749fd67ee009f1bd19adf.png)

(ps. 使用带有新`PlotLegend`选项的 V9)

# macros - 如何在 M4 中嵌套宏定义？

> ID：13621802
> 
> 赞同：0
> 
> 时间：2012-11-29T08:42:08.180
> 
> 标签：macros, m4

我想定义一个可以定义更多宏的宏：

```
define(`master_macro',
`foreachq(`slave_macro', `$*',
define(`slave_macro', ...)' 
```

然后我可以使用`master_macro`将更多类似`slave_macro`的 s 定义为：

```
master_macro(m1, m2, m3, ...) 
```

之所以需要这个，是`slave_macro`因为我写M4宏的时候不知道个数和名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:07:54.907

你所要求的当然可以做到。这是一个例子：

```
$ cat file
changequote(`[',`]')dnl
define([factory],[dnl
define($1,banana)dnl
define($2,split)dnl
])dnl
factory(hello,world)dnl
hello world
$ m4 file
banana split 
```

我认为问题在于您对未定义宏的使用`foreachq`。

# python - 猎豹#include不工作

> ID：13621806
> 
> 赞同：0
> 
> 时间：2012-11-29T08:42:21.800
> 
> 标签：python, flask, cheetah

`#include`似乎不起作用，我收到“500 内部服务器错误”。我尝试了没有包含的相同代码，将所有代码放在一个文件中，它可以工作。我正在使用网络框架烧瓶

头文件.tmpl

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>$title</title>

        #for $css in $css_sheets
        <link rel="stylesheet" href="../$css">
        #end for
        #for $js in $js_scripts
        <script src="../$js"></script>
        #end for
    </head>
    <body> 
```

主页.tmpl

```
#include "header.tmpl"
<p id="x">HELLO</p> 
#include "footer.tmpl" 
```

页脚.tmpl

```
 </body>
</html> 
```

引擎.py

```
from flask import Flask, redirect, request
from Cheetah.Template import Template

app = Flask(__name__)

css_list = ['css/main.css']
js_list = ['js/main.js']
default_title = 'Default Title'

namespace={
    'css_sheets' : css_list,
    'js_scripts' : js_list,
    'title' : default_title
}

@app.route('/')
def main_route():
    return redirect('/index')

@app.route('/index')
def index():
    namespace['title']= 'THIS IS THE INDEX'
    return render("cheetah/home.tmpl", namespace)

def render(template, context):
    """Helper function to make template rendering less painful."""
    return str(Template(file=template, namespaces=[context]))

if __name__ == "__main__":
    app.run() 
```

我的第二个问题是关于 header.tmpl 中的 $css 和 $js 变量：

`<link rel="stylesheet" href="../$css">`$css 设置为 'css/main.css' 有效

`<link rel="stylesheet" href="$css">`将 $css 设置为 '../css/main.css' 失败，它会将其读取为纯文本 '$css' 而不是获取变量的值。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:01:03.240

问题是在中使用的路径`#include`不是相对于调用它的模板（home.tmpl），我认为是这种情况，而是python文件（engine.py）在这种情况下不一样位置，所以程序没有找到我试图包含的文件。

```
../web/engine.py
../web/templates/home.tmpl
../web/templates/header.tmpl
../web/templates/footer.tmpl
../web/css/main.css
../web/js/main.js 
```

# c# - 从查询 SQL 在 ComboBox (C#) 中显示数组

> ID：13621814
> 
> 赞同：0
> 
> 时间：2012-11-29T08:42:34.360
> 
> 标签：c#, sql, arrays, combobox, windows-mobile

我正在尝试在 ComboBox 中显示表格的所有行（例如“颜色”列的颜色）（在 WindowsMo​​bile 的 C# 上），但我不知道如何用表格的字段填充数组。我有一个数据库和表'tableColours'。

```
... //load database... OK
SqlCeConnection connection = new SqlCeConnection(conSTR);
SqlCeCommand cmd = new SqlCeCommand("SELECT colour FROM tableColours", connection);
connection.Open(); 
```

现在我需要用表格的所有颜色填充一个对象或数组...有什么想法吗？...

最后，我将在带有前向代码的 ComboBox 中显示此颜色（但此字符串 [] 颜色必须用表的语句 SQL 填充）：

```
string[] colours = new string[] {"Red", "White", "Black", "Blue"}; //provisional

foreach (string col in colours)
{
    comboBoxEESS.Items.Add(col);
}
connection.Close(); 
```

对不起我的英语不好。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:59:44.087

```
 SqlCeConnection connection = new SqlCeConnection(conSTR);
                SqlCeCommand cmd = new SqlCeCommand("SELECT colour FROM tableColours", connection);
                connection.Open();
                DataTable colours = new DataTable();
                colours.Load(cmd.ExecuteReader());
                DataRow dr = null;
                for (int i = 0; i < Colors.Rows.Count; i++)
                {
                    dr = colours.Rows[i];
                    comboBoxEESS.Items.Add(dr[0].ToString());

                }
                connection.Close(); 
```

我使用 DataTable 而不是 Array。

# objective-c - NSCache 为 UITableView 存储图像

> ID：13621819
> 
> 赞同：3
> 
> 时间：2012-11-29T08:42:59.350
> 
> 标签：objective-c, ios, uitableview, nscache

我有一个带有表格视图的视图控制器。在表格视图的每个单元格中，我都有一个从网上获取的图像 - 但其中许多具有相同的图像。所以，我目前正在做的是将获取的图像存储在 NSCache 对象中。它是这样发生的：

```
- (void)fetchAvatarForUser:(NSString *)uid completion:(void (^)(BOOL))compBlock
{
if (!imageCache) {
    imageCache = [[NSCache alloc] init];
}
if (!avatarsFetched) {
    avatarsFetched = [[NSMutableArray alloc] initWithCapacity:0];
}

if ([avatarsFetched indexOfObject:uid] != NSNotFound) {
    // its already being fetched
} else {
    [avatarsFetched addObject:uid];
    NSString *key = [NSString stringWithFormat:@"user%@",uid];

    NSString *path = [NSString stringWithFormat:@"users/%@/avatar",uid];
    [crudClient getPath:path parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"%@",[operation.response allHeaderFields]);
        UIImage *resImage = [UIImage imageWithData:[operation responseData]];
        [imageCache setObject:resImage forKey:key];
        compBlock(YES);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Got error: %@", error);
        compBlock(NO);
    }];
}
}

- (UIImage *)getAvatarForUser:(NSString *)uid
{
NSString *key = [NSString stringWithFormat:@"user%@",uid];
NSLog(@"Image cache has: %@",[imageCache objectForKey:key]);
return [imageCache objectForKey:key];

} 
```

imageCache 是一个实例变量，也是 avatarsFetched，crudClient 是一个 AFHTTPClient 对象。并且，在表格视图中：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
    static NSString *CellIdentifier = @"Cell";

    PostCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[PostCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Post *curPost = [displayedPosts objectAtIndex:indexPath.section];

    cell.nickname.text = [curPost nickname];

    UIImage *avatarImage = [self.delegateRef.hangiesCommunicator getAvatarForUser:curPost.userID];
    if (avatarImage) {
        cell.avatar.image = avatarImage;
        NSLog(@"Its not null");
    } else {
        cell.avatar.image = [UIImage imageNamed:@"20x20-user-black"];
    }
} 
```

self.delegateRef.hangiesCommunicator 以 imageCache 作为实例变量返回对象（这是应用程序委托的保留属性），以及顶部的两个方法。

当我滚动时，我在控制台中看到 @"Its not null"，但我没有看到获取的图像，而是默认的 20x20-user-black 图像。有人知道吗，为什么会这样？我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:32:09.380

您的代码缺少一些东西。我看不到您在 hangiesCommunicator 上调用 fetchAvatarForUser:completion: 方法的位置，而您的 tableView:cellForRowAtIndexPath: 方法没有返回单元格，因此我认为您发布的代码不会编译干净。

# xquery - 将 xml 加载到 Marklogic 时将 xml 十六进制实体更改为字符串

> ID：13621822
> 
> 赞同：-1
> 
> 时间：2012-11-29T08:43:20.653
> 
> 标签：xquery

如果我将 xml 加载到 marklogic 数据库中，它会自动将十六进制实体转换为字符串，所以如果有任何解决方案而不使用 XSLT CharMAP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:37:57.417

您是否考虑过将 ML 应用服务器的输出格式更改为 ASCII？

# php - Drupal 如何使用正则表达式或特定关键字作为菜单参数

> ID：13621823
> 
> 赞同：2
> 
> 时间：2012-11-29T08:43:26.740
> 
> 标签：php, regex, url, drupal, drupal-7

我有一个 drupal 网站，我想在其中添加一个新 URL。这个菜单有两个参数，应该从客户端传递。

```
function campaign_management_menu() {
    $items = array();
    $items['campaign-management/test/%/%'] = array(
        'title' => 'Campaign Management',
        'description' => 'A section where you can manage your campaigns',
        'page callback' => 'cm_home',
        'page arguments' => array(3, 4),
        'access callback' => TRUE,
    );
    return $items
} 
```

在这里，对于第四个参数，应该只有两个选项 {add/edit}。drupal 中是否有任何选项可以明确设置这两个关键字。IE，

```
$items['campaign-management/test/%/{add|edit}'] = array(
        'title' => 'Campaign Management',
        'description' => 'A section where you can manage your campaigns',
        'page callback' => 'cm_home',
        'page arguments' => array(3, 4),
        'access callback' => TRUE,
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:04:40.290

就 hook_menu 文档而言，没有这样的功能：[http ://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)

您必须使用通配符：'%'。但是在 cm_home 函数中，您可以检查第二个参数，它是“添加”还是“编辑”。因此，您将在那里验证输入。

# objective-c - 移除 UITableView 中的编辑按钮

> ID：13621825
> 
> 赞同：1
> 
> 时间：2012-11-29T08:43:49.270
> 
> 标签：objective-c, ios, uitableview

我有一个带有几个可以编辑的单元格的表格视图。如果表格中没有单元格，我想删除工具栏中的编辑按钮

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:01:51.610

设置`rightBarButtonItem'`为零：

```
self.navigationItem.rightBarButtonItem = nil; 
```

当您想再次显示编辑按钮时，请将其设置为`self.editButtonItem`：

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-29T08:58:04.417

你应该实现这个方法

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
```

在 tableview 委托中。在那里您可以为您的单元格返回适当的编辑样式： UITableViewCellEditingStyleDelete 用于可删除单元格， UITableViewCellEditingStyleNone 用于其他单元格

所以如果你没有任何行，把你的表格视图样式 UITableViewCellEditingStyleNone

# c# - 使用 C# 使用 XPAth 获取 xml 属性

> ID：13621828
> 
> 赞同：0
> 
> 时间：2012-11-29T08:44:02.893
> 
> 标签：c#, xml, xpath

我正在尝试从 XML 中获取属性，但出现错误：

> *表达式必须评估为节点测试*

我是 XPath 的新手。

XML 文件示例：

```
<Message>
   <Head>
      <Sender Identifier="id" ref=""/>
   </Head>
</Message> 
```

代码：

```
XPathDocument xDoc = new XPathDocument("documentName.xml");
XPathNavigator nav = xDoc.CreateNavigator();
XPathNodeIterator xpathNode = nav.Select("/Message/Head/Sender/[@Identifier]");
//This is where I get the error. 
```

而且我也不确定如何显示属性值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:48:34.933

它应该是

```
/Message/Head/Sender[@Identifier]
                    ^
                    |->no need of / here since Identifier is an attribute of sender 
```

所以，

`/Message/Head/Sender[@Identifier]``Identifier`如果它有一个属性只会选择发件人

`/Message/Head/Sender[@Identifier='id']``Identifier`仅当 Sender 具有带值的属性时才会选择`id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:46:07.927

这是评估给定 XML 的 Xpath 的绝妙工具

转到此链接[http://www.xmltoolbox.com/](http://www.xmltoolbox.com/)并尝试将您的 xml 粘贴到文本区域并将光标移动到您想要的节点 Xpath.Xpath 将在下面生成

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T08:47:16.267

```
 XmlIO xml = new XmlIO(xmlPath);
                ProductName = xml.SelectNodeValue(@"//PRODUCTINFO/Application/@ProductName");
                IDictionary<string, string> keyValList = xml.SelectNodesList(@"//PRODUCTINFO/Application/Parameters"); 
```

看一看

# c# - 重复拳击做出不同的参考？

> ID：13621829
> 
> 赞同：4
> 
> 时间：2012-11-29T08:44:04.330
> 
> 标签：c#, equals, boxing, equals-operator

我试着理解这段代码：

```
double b = 3;
object o = b;
Console.WriteLine(o.Equals(3));//false
Console.WriteLine(o.Equals(b));//true
Console.WriteLine( o == (object)b );//false 
```

1.  每个新的拳击都对对象 b 进行不同的引用？
2.  如果 1\. 是真的，为什么`o.Equals(b)`是`true`？
3.  如果`Equals`不检查引用，为什么`o.Equals(3)`是`false`？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T08:55:24.787

1.  是的，每次对值类型进行装箱时，都会创建一个新对象。[更多关于拳击在这里。](http://msdn.microsoft.com/en-us/library/yz2be5wk%28v=vs.110%29.aspx)
2.  `Equals`检查值相等，而不是引用相等。两者`o`和`b`是相同的： a`double`的值为`3.0`。
3.  `3`这里是a ，而`int`不是 a `double`，并且`Equals`对于不同的类型不会进行任何转换以使它们兼容，就像编译器通常做的那样。`o.Equals(3.0)`将返回`true`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:59:28.560

```
double b = 3; 
```

在堆栈中创建一个值为 3 的新变量

```
object o = b; 
```

在堆中创建一个对象，该对象引用`b`堆栈中的相同位置，**因此您具有具有两个引用的相同变量** *这是装箱*

```
o.Equals(3) 
```

为假，因为它创建了一个 值为 3**而不是 b的新****匿名变量**

 **```
o.Equals(b) 
```

是真的，因为它是同一个变量

```
o == (object)b 
```

为假，因为`==`正在比较内存地址中的引用，**但**比较`Equals`变量本身的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:52:18.503

看到[这个](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx) 它解释了关于等于行为的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T23:42:16.600

每次尝试将值类型转换为引用类型时，都必须将其装箱到新的对象实例中。在不破坏兼容性的情况下，系统无法做任何其他事情。除此之外，虽然人们可能期望装箱的值类型是不可变的（*），但它们都不是。 *每个*值类型在装箱时都会产生一个可变对象。虽然 C# 和 vb.net 没有提供任何方便的方法来改变这些对象，但用 C++/CLI 编写的可信且可验证的代码可以轻松做到这一点。即使系统知道一个堆对象包含一个`Int32`当前值为 23 的值，该语句`Object foo = 23;`也必须生成一个新的`Int32`堆对象的值为 23，因为系统无法知道是否有什么东西可能计划将现有对象的值更改为 57。

(*)我认为他们应该是；与其使所有的装箱对象都可变，不如提供一种方法来让结构类型（如`List<T>.Enumerator`可以指定可定制的装箱行为）更好。不过，我不确定现在是否有任何方法可以在不完全破坏与现有代码的兼容性的情况下解决这个问题。**

# android - 从多个选项卡中的编辑文本字段中获取文本

> ID：13621831
> 
> 赞同：4
> 
> 时间：2012-11-29T08:44:17.283
> 
> 标签：android

我正在尝试创建一个使用选项卡作为输入表单的 android 应用程序。基本上我希望它进行设置，以便用户可以在一个选项卡上输入一些信息，然后提交该信息，或者转到另一个选项卡并输入更多信息，然后从两个选项卡提交信息。

我正在使用操作栏和片段来显示来自一项活动的选项卡。

如果我在一个选项卡中输入文本然后切换到另一个，然后切换回来，文本仍然存在，但我似乎可以弄清楚如何从单击提交按钮时当前未显示的选项卡中获取文本。

有没有办法做到这一点？

好的继承人我的代码到目前为止。我是新来这里发帖抱歉。

我的标签是这样设置的：

```
ActionBar bar = getActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

//initiate tabs, set text and set listeners
Tab tab = bar.newTab();
tab.setText("Details");
tab.setTabListener(new TabListener<DetailsFragment>(this, "Details", DetailsFragment.class));
bar.addTab(tab);

tab = bar.newTab();
tab.setText("Comments");
tab.setTabListener(new TabListener<CommentsFragment>(this, "Details", CommentsFragment.class));
bar.addTab(tab); 
```

我的 TabListener：

```
private class TabListener<T extends Fragment> implements ActionBar.TabListener{
private Fragment mFragment;
private final Activity mActivity;
private final String mTag;
private final Class<T> mClass;

public TabListener(Activity activity, String tag, Class<T> clz){
   mActivity = activity;
   mTag = tag;
   mClass = clz;
}

public void onTabSelected(Tab tab, FragmentTransaction ft) {
     //check if the fragment is already initialized
if(mFragment == null){
//if not, instantiate and add it to the activity
mFragment = Fragment.instantiate(mActivity, mClass.getName());
ft.add(android.R.id.content, mFragment, mTag);
    }
else{
//if it exists, attach it in order to show it
ft.attach(mFragment);
}
 } 
```

我的点击监听器：

```
 public void onClick(View v) {

            titleText = (EditText)findViewById(R.id.textTitle);
            authorText = (EditText)findViewById(R.id.textAuthor);
            seriesText = (EditText)findViewById(R.id.textSeries);
            pubText = (EditText)findViewById(R.id.textPublisher);
            isbnText = (EditText)findViewById(R.id.textISBN);
            commentsText = (EditText)findViewById(R.id.textComments);

            String title = titleText.getText().toString();
            String author = authorText.getText().toString(); 
            String series = seriesText.getText().toString(); 
            String pub = pubText.getText().toString(); 
            String isbn = isbnText.getText().toString();
            String comments = commentsText.getText().toString(); 
```

我的片段类如下所示：

```
public class DetailsFragment extends Fragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    return inflater.inflate(R.layout.detailsfragment, container, false);
} 
```

}

以及他们的布局示例：

```
<LinearLayout 
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/detailsTab"
   android:layout_width="match_parent" 
   android:layout_height="match_parent" 
   android:orientation="vertical"
   android:gravity="center_horizontal">

<EditText android:id="@+id/textTitle" 
    android:hint="@string/textTitle" 
    android:inputType="textCapWords" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:ems="10"
    android:layout_marginBottom="15dp"
    android:layout_marginTop="25dp">
    <requestFocus />
</EditText>

<EditText android:id="@+id/textAuthor" 
    android:hint="@string/textAuthor" 
    android:inputType="textCapWords" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:ems="10"
    android:layout_margin="15dp"/> 
```

如果您想查看任何其他代码，我也可以发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:49:45.527

好的，所以我想出了一种方法让它按我想要的方式工作。我怀疑这是最好的方法，但这是我所做的。

在 TabListener 的 onTabUnselected 中，我在分离片段之前添加了一个函数，以检查即将分离的片段，然后将数据保存到活动中存储的变量中。

```
 public void onTabUnselected(Tab tab, FragmentTransaction ft) 
    {
    if(mFragment != null)
    {
            saveData(mFragment);

            //Detach the fragment
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        //do nothing
    }
}

private void saveData(Fragment frag){
    if(frag.getTag() == "Details")
    {
        titleText = (EditText)findViewById(R.id.textTitle);
        title = titleText.getText().toString();
        authorText = (EditText)findViewById(R.id.textAuthor);
        author = authorText.getText().toString();
    }
    else if(frag.getTag() == "Comments")
    {
        commentsText = (EditText)findViewById(R.id.textComments);
        comments = commentsText.getText().toString();
    }
} 
```

我仍然觉得必须有更好的方法来做到这一点，因为当我在文本框中的选项卡之间切换时数据会被保留。

# ajax - 预加载 ajax 加载的内容

> ID：13621837
> 
> 赞同：1
> 
> 时间：2012-11-29T08:44:36.457
> 
> 标签：ajax, jquery, preloading

在我的网站上，我使用一个核心/框架 PHP 文件。如果用户点击我的链接之一（如联系人，我们的 about..etc..），则通过 ajax 加载内容。我使用以下代码片段来实现这一点：

```
var AjaxContent = function(){
    var container_div = ''; 
    var content_div = ''; 
    return {
        getContent : function(url){
            $(container_div).animate({opacity:0}, 
                function(){ // the callback, loads the content with ajax
                    $(container_div).load(url, //only loads the selected portion
                        function(){                        
                           $(container_div).animate({opacity:1}); 
                    }

                );        
            });
        },
        ajaxify_links: function(elements){
            $(elements).click(function(){
                AjaxContent.getContent(this.href);

                return false; 

            });
        },
        init: function(params){ 
            container_div = params.containerDiv; 
            content_div = params.contentDiv;

            return this; 
        }
    }
}(); 
```

我需要帮助如何集成预加载，所以如果访问者点击我的一个链接（例如画廊菜单）会看到一个小的加载图像，因为现在他们看到大的白色没有很长时间 - 很长的几秒钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:51:16.760

在 ajax 调用之前添加加载图像，在您从服务器获得响应后，只需将该图像替换为如下所示的数据

```
 function(){ // the callback, loads the content with ajax
        $(container_div).html("<img src='loading.gif' />");//add image before ajax call
        $(container_div).load(url, //only loads the selected portion
        function(){
         $(container_div).html(data);//replace image with server response data                        
        $(container_div).animate({opacity:1}); 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:48:21.330

试试这个

```
var AjaxContent = function(){
    var container_div = ''; 
    var content_div = ''; 
    return {
        getContent : function(url){
            $(container_div).html('Loading...');  //replace with your loading img html code
            $(container_div).load(url, //only loads the selected portion
                function(){
                    $(container_div).css({opacity:0});
                    $(container_div).animate({opacity:1}); 
            });
        },
        ajaxify_links: function(elements){
            $(elements).click(function(){
                AjaxContent.getContent(this.href);

                return false; 

            });
        },
        init: function(params){ 
            container_div = params.containerDiv; 
            content_div = params.contentDiv;

            return this; 
        }
    }
}(); 
```

# javascript - 将由 javascript 填充的下拉列表中的选定项目添加到文本框

> ID：13621839
> 
> 赞同：0
> 
> 时间：2012-11-29T08:44:49.327
> 
> 标签：javascript, html, drop-down-menu, asp-classic

嗨，我有一个下拉列表，其项目由 javascript 填充，并且没有选项标签。当页面加载时，下拉列表会通过外部 JavaScript 文件加载所有选项。当用户从这个下拉列表中选择一个项目时，我希望这个选定的项目用他们的选择更新一个文本框（在同一页面上），这样我就可以通过电子邮件发送它。

我可以让它在一个正常的下拉菜单上工作，实际选项标签不是由 javascript 填充的，但不能让它与我的 Populated 下拉菜单一起工作。我已经阅读了各种帖子，这些帖子将使用 JavaScript 填充的下拉项目不会被服务器读取，因为它都是在客户端完成的，并且解决方法涉及将填充的下拉选择添加到隐藏字段，但我找不到方法这样做。我也在使用经典的 ASP 来发送表单

希望有人能帮忙，

嗨，我忘了提到下拉列表由内联 JavaScript 填充，而不是来自外部 JS 文件

嗨，我使用过的一些代码，对于正常的下拉菜单工作正常，但不是我用 JS 填充的代码

```
function ChooseContact(data) {

document.getElementById ("friendName").value = data.value;

}

<select onchange="ChooseContact(this)"><option value='1'>1</option><option  value='2'>2</option></select> 
```

谢谢R

嗨 - 这一切都使用这个外部脚本 [http://www.dynamicdrive.com/dynamicindex1/chainedmenu/index.htm](http://www.dynamicdrive.com/dynamicindex1/chainedmenu/index.htm)

嗨这是填充下拉列表的外部 JS 文件的片段

```
/var hide_empty_list=true; //uncomment this line to hide empty selection lists 
```

var disable_empty_list=true；//取消注释此行以禁用空选择列表

var onclickaction="alert" //设置为“alert”或“goto”。前者用于调试目的，告诉您将用作目标 URL 的最终选定列表的值。根据需要设置以下配置时设置为“goto”。

var newwindow=0 //是否在新窗口中打开链接？1=是，0=否。

/////在下面定义您的菜单列表和项目///////////////

```
addListGroup("chainedmenu", "First-Select");

addOption("First-Select", "Select a course type", "", 1); //HEADER OPTION
addList("First-Select", "New Staff", "", "NewStaff");
addList("First-Select", "All Staff", "", "AllStaff");
addList("First-Select", "Learning, Teaching, Research and Knowledge Exchange", "",   "Learning"); 
```

addList("First-Select", "Leaders and Managers", "", "Leaders");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:58:35.030

使用您发布的代码，应该完全有可能实现您想要做的事情。我已经构建了一个扩展您的代码的示例，以向您展示如何更新输入字段。

看到这个[jsFiddle](http://jsfiddle.net/Klors/NHD4p/2/)

如果所有选项都是通过 JavaScript 生成的，还有一个向您展示它应该仍然有效。所以也许你遇到的问题在其他地方？

```
<select id="selecty" onchange="ChooseContact(this)"></select>
<input type="text" id="friendName" />

<script>
    var opt = document.createElement("option");
    opt.text = "One";
    opt.value = "1";
    document.getElementById("selecty").add(opt,null);

    opt = document.createElement("option");
    opt.text = "Two";
    opt.value = "2";
    document.getElementById("selecty").add(opt,null);

    opt = document.createElement("option");
    opt.text = "Three";
    opt.value = "3";
    document.getElementById("selecty").add(opt,null);

    function ChooseContact(data) {
        document.getElementById("friendName").value = data[data.selectedIndex].value;
    }
</script> 
```

看到这个[jsFiddle](http://jsfiddle.net/Klors/NHD4p/9/)

# vim - Vim pumvisible() 调用放入随机文本

> ID：13621845
> 
> 赞同：10
> 
> 时间：2012-11-29T08:45:08.877
> 
> 标签：vim

我正在为 Vim 使用 spf13 包。但是，每当我输入一些文本并按转义键时，就会附加一些奇怪的字符。

例如，如果我输入这个并按下退出键，

```
hello 
```

我明白了：

```
hellopumvisible() ? "\" : "\ 
```

我的 .vimrc 文件上有一个映射，如下所示，我认为这可能是负责任的：

```
" some convenient mappings
inoremap <expr> <Esc>      pumvisible() ? "\<C-e>" : "\<Esc>"
inoremap <expr> <CR>       pumvisible() ? "\<C-y>" : "\<CR>"
inoremap <expr> <Down>     pumvisible() ? "\<C-n>" : "\<Down>"
inoremap <expr> <Up>       pumvisible() ? "\<C-p>" : "\<Up>"
inoremap <expr> <C-d>      pumvisible() ? "\<PageDown>\<C-p>\<C-n>" : "\<C-d>"
inoremap <expr> <C-u>      pumvisible() ? "\<PageUp>\<C-p>\<C-n>" : "\<C-u>" 
```

我猜它取自[http://vim.wikia.com/wiki/Improve_completion_popup_menu](http://vim.wikia.com/wiki/Improve_completion_popup_menu)。但由于某种原因，这给了我奇怪的行为。有什么建议吗？

**编辑：** 这是输出`:inoremap <esc>`

`i <Esc> *@pumvisible() ? '<C-E>' : '<C-R>=<SNR>32_FlushBuffer()<CR>pumvisible() ? "\<C-E>" : "\<Esc>"'`

`i <Esc> * pumvisible() ? "\<C-E>" : "\<Esc>"`

我在 Windows 8 上使用 Vim 7.3。

## 解决方案

自动关闭插件干扰映射。我在这里写了删除它的步骤：http: [//crossplatform.net/dev/vim-spf13-writes-random-characters-when-pressing-escape.html](http://crossplatform.net/dev/vim-spf13-writes-random-characters-when-pressing-escape.html)。它现在工作正常。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T00:09:23.017

可能，这可能是常见问题解答。这对其他人会有所帮助。所以我从上面的评论行复制了答案。

# 当您对 vim 映射有疑问时。

首先检查`:verbose inoremap`。

如果您知道有问题的键，则使用指定的键进行操作，例如`:verbose inoremap <esc>`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-12T22:13:44.367

这为我修复了它，在您的 ~/.vimrc 或 ~/.config/nvim/init.vim 文件中添加：

```
let g:AutoClosePreserveDotReg = 0 
```

# ios - 启动图像显示不规则 iOS5 / iOS6

> ID：13621846
> 
> 赞同：0
> 
> 时间：2012-11-29T08:45:11.320
> 
> 标签：ios

我正在测试我的启动图像，我依赖于我的启动图像的定位和纵横比是正确和一致的，因为我在启动图像消失后执行了一些动画。我的启动图像的定位/纵横比不一致。在此处查看结果：

[http://imgur.com/a/TnZVH](http://imgur.com/a/TnZVH)

第一个图像在（iOS5）上运行，第二个（iOS6）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:49:08.003

iOS5 将初始图像缩小到状态栏下方的左侧空间，而
iOS6 显示初始图像与状态栏重叠。

您的应用程序是否显示状态栏？
如果没有：
验证您在 .plist 文件中正确禁用它并将其从启动图像中删除。
如果是这样：
只需将其从启动图像中删除即可。你的标志在 iOS5 上会缩小一点，但如果你幸运的话，你可以依赖你的动画操作系统版本来隐藏这个问题。

# ios - iOS - 在使用 NSTimer 移动其框架时旋转 UIImageView 或 UIImage

> ID：13621849
> 
> 赞同：0
> 
> 时间：2012-11-29T08:45:18.900
> 
> 标签：ios, uiimageview, rotation, uiimage

我需要旋转我`UIImageView`的 或`UIImage`中的`UIImageView`，同时用 移动它的框架`NSTimer`。这是`NSTimer`运动：

```
timer = [NSTimer scheduledTimerWithTimeInterval:time target:self selector:@selector(animate) userInfo:nil repeats:YES]; 
```

这是动画方法（它的一部分，最重要的）：

```
CGRect viewLocation = [[[self layer] presentationLayer] frame];
                self.frame = CGRectMake(viewLocation.origin.x, viewLocation.origin.y + 0.2, viewLocation.size.width, viewLocation.size.height); 
```

这是我试图用来旋转 UIImage 的方法：

```
- (UIImage *)imageRotatedByDegrees:(CGFloat)degrees
{
    // calculate the size of the rotated view's containing box for our drawing space
    UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,self.size.width, self.size.height)];
    CGAffineTransform t = CGAffineTransformMakeRotation(DegreesToRadians(degrees));
    rotatedViewBox.transform = t;
    CGSize rotatedSize = rotatedViewBox.frame.size;
    [rotatedViewBox release];

    // Create the bitmap context
    UIGraphicsBeginImageContext(rotatedSize);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

    // Rotate the image context
    CGContextRotateCTM(bitmap, DegreesToRadians(degrees));

    // Now, draw the rotated/scaled image into the context
    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), [self CGImage]);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

此代码位于 的子类中`UIImageView`，因此引用了 self `UIImageView`。

我也尝试`UIImageView`用 CGAffineTransform 旋转，但`UIImageView`它被拉伸并以一种奇怪的方式旋转。这是方法：

```
- (void)rotateWithDegrees:(CGFloat)degrees {
    CGAffineTransform transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
    self.transform = transform;
} 
```

这是宏：

```
#define DEGREES_TO_RADIANS(angle) (angle / 180.0 * M_PI) 
```

重要的是您始终可以使用计时器来移动对象，因此该部分是不可更改的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:17:06.743

我找到了解决方案！首先，我们排除提供调整大小的解决方案`UIImage`。所以，我们旋转了`UIImageView`，但是当使用 CGAffineTransform 时，框架没有被修改！因此，要`UIImageView`使用计时器移动 ，我们必须修改`UIImageView`. 这是删除：

```
CGRect viewLocation = [[[self layer] presentationLayer] frame];
self.frame = CGRectMake(viewLocation.origin.x, viewLocation.origin.y + 0.2, viewLocation.size.width, viewLocation.size.height); 
```

这是要补充的：

```
self.center = CGPointMake(self.frame.origin.x + (self.frame.size.width / 2), self.frame.origin.y + 0.2 + (self.frame.size.height / 2)); 
```

然后，我们可以使用该`rotateWithDegrees:`方法来旋转`UIImageView`：

```
- (void)rotateWithDegrees:(CGFloat)degrees {
    CGAffineTransform transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
    self.transform = transform;
    _degrees+=0.5;
    if (_degrees == 360) {
        _degrees = 1;
    }
} 
```

因此，我们可以添加以下行：

```
[self rotateWithDegrees:_degrees]; 
```

以下 ：

```
self.center = CGPointMake(self.frame.origin.x + (self.frame.size.width / 2), self.frame.origin.y + 0.2 + (self.frame.size.height / 2)); 
```

移动是由于其中心的`UIImageView`变化，而不是由于其框架的变化，这允许`CGAffineTransform`用于旋转。

# r - 如何在 adobe windows (R plot) 上阅读俄语文本？

> ID：13621852
> 
> 赞同：0
> 
> 时间：2012-11-29T08:45:27.173
> 
> 标签：r, adobe, multilingual

我正在使用带有俄语标签的 R 绘图，但在 windows (adobe) 上看不到俄语文本。我是否需要安装一些软件包才能查看它。

```
pdf("sample.pdf",width = 6.6 ,height = 4.2,family= "URWHelvetica",  encoding="KOI8-R") 
x<-c(1,2,3,4,5) 
y<-c(2,3,4,5,6) 
xlable<-c("ручка","книга","часы","ложка","смотреть") 
plot(x,y,xlab=xlable) 
dev.off() 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:23:54.487

看起来您正在尝试标记这些点。但是你告诉 R 把你想要的东西写成点标签作为 x 轴标签。`xlab`是 x 轴的标签。

我想你真的只是在寻找`text()`

试试这个，例如：

```
x <- c(1,2,3,4,5) 
y <- c(2,3,4,5,6) 
xlable<-c("ручка","книга","часы","ложка","смотреть") 
plot(x,y,xlab=xlable)
text(x,y,xlable,pos=c(4,1,1,1,2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:25:12.653

如果需要 x 轴下的标签，则需要使用 axis() 函数。这应该工作

```
pdf("sample.pdf",width = 6.6 ,height = 4.2,family= "URWHelvetica",  encoding="KOI8-R") 
x<-c(1,2,3,4,5) 
y<-c(2,3,4,5,6) 
xlable<-c("ручка","книга","часы","ложка","смотреть") 
plot(x,y,xaxt="n")
axis(1,at=1:5,labels=xlable)
dev.off() 
```

# javascript - 在 chrome 中打印嵌入的 PDF

> ID：13621853
> 
> 赞同：5
> 
> 时间：2012-11-29T08:45:33.490
> 
> 标签：javascript, google-chrome

所以我认为 Chrome 和 Firefox 对 DOM 的解释让我很困惑。我正在尝试从浏览器（动态创建）打印 pdf，因为我无法在打印 HTML 页面时正常打印页眉和页脚。现在我只是使用 fpdf 从 php 页面发送 PDF 并使用工具栏或右键单击并打印，但现在客户想要页面上的一个按钮来启动打印对话框，但当然除了 PDF 之外不打印任何其他内容...... .所以我嵌入了它：

```
 <embed
        type="application/pdf"
        src="print_pdf.php"
        id="pdfDocument"
        width="100%"
        height="100%" /> 
```

和一个按钮的 onClick 调用

```
 <script type="text/javascript">

        function printDocument(documentId) {

        ((function(){return document.getElementById(documentId);})()).print();

        //Wait until PDF is ready to print    
        if (typeof document.getElementById(documentId).print == 'undefined') {

            setTimeout(function(){printDocument(documentId);}, 1000);

        } else {

            var x = document.getElementById(documentId);
            x.print();
        }
    }
    </script> 
```

其中documentID =“pdfDocument”

这在 IE9 中效果很好，但 chrome 和 mozilla 都说“Uncaught TypeError: Object # has no method 'print'”

所以我尝试使用 Thinking embed 导致 chrome 中的对象解释不正确：

```
<object data="print_pdf.php" type="application/pdf" width="100%" height="100%" id="pdfD2"> 
```

替代：test.pdf

并调用了相同的 onClick，其中 documentID = "pdfD2"... "Uncaught TypeError: Object # has no method 'print'"

然后我尝试了一个 Iframe：...“未捕获的类型错误：对象 # 没有方法‘打印’”

考虑到 Chrome 是我的首选，我感到非常沮丧......我什至禁用了 chrome 的内置 PDF 视图并使用了 Adob​​e 10.xxx .. 啊！！！

仅供参考，我的简单按钮标签是：

```
<input type="button" value="Print Rx" onclick="printDocument('pdfDocument')">
<input type="button" value="Print Rx2" onclick="printDocument('pdfD2')">
<input type="button" value="Print Rx3" onclick="printDocument('pdfD3')"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:45:05.927

我认为错误在于：

```
((function(){return document.getElementById(documentId);})()).print(); 
```

这意味着您将（很可能）未完成的 DOM “打包”到闭包中。

它位于检查“未定义”打印的下一行之前。

除此之外，为什么你使用超时，而不仅仅是使用`onload`或`DOMReady`事件？

# webdev.webserver - lisp 的土地 src webserver.lisp

> ID：13621854
> 
> 赞同：1
> 
> 时间：2012-11-29T08:45:35.193
> 
> 标签：webdev.webserver, usocket, land-of-lisp

当我在“lisp 之地”第 12 章和第 13 章学习“socket”时。我使用的是lispbox，所以我需要安装一个socket。最后，我发现**usocket**可用。这是一个关于如何使用**usocket**来构建网络服务器的示例。

```
(defun serve (request-handler)
  "serve as a web server,used to handle request 
   like 'http://127.0.0.1:8080/greeting'"
 (let ((socket (usocket:socket-listen "0.0.0.0" 8080 :reuse-address t)))
 (unwind-protect
   (loop (with-open-stream (stream 
                            (usocket:socket-stream 
                                      (usocket:socket-accept socket)))
            (let* ((url    (parse-url (read-line stream)))
                    (path   (car url))
                    (header (get-header stream))
                    (params (append (cdr url) 
                                    (get-content-params stream header)))
                    (*standard-output* stream))
               (funcall request-handler path header params))))
   (usocket:socket-close socket)))) 
```

[http://landoflisp.com/webserver.lisp](http://landoflisp.com/webserver.lisp)中的原始“服务”功能

```
(defun serve (request-handler)
 (let ((socket (socket-server 8080)))
 (unwind-protect
   (loop (with-open-stream (stream (socket-accept socket))
             (let* ((url    (parse-url (read-line stream)))
                    (path   (car url))
                    (header (get-header stream))
                    (params (append (cdr url) 
                                    (get-content-params stream header)))
                    (*standard-output* stream))
               (funcall request-handler path header params))))
   (socket-server-close socket)))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:54:39.697

# API 定义

*   usocket（类）
*   流 usocket（类；usocket 衍生）
*   流服务器 usocket（类；usocket 衍生）
*   socket-connect (function) [ to create an active/connected socket ] socket-connect host port &key element-type where `host' 是向量化的 ip 或点分 ip 地址的字符串表示或用于在 DNS 系统中查找的主机名
*   socket-listen (function) [ to create a passive/listening socket ] socket-listen host port &key reuseaddress backlog element-type where `host' 定义同上
*   socket-accept (method) [ to create an active/connected socket ] socket-accept socket &key element-type 返回（服务器端）从侦听/被动套接字派生的连接套接字。
*   socket-close (method) socket-close socket where socket 先前返回的套接字
*   socket（usocket 插槽访问器），内部/实现定义的套接字表示
*   socket-stream（usocket插槽访问器），socket-stream socket，返回值满足普通流接口

# python - Django in Google App Engine - Python 2.7

> ID：13621855
> 
> 赞同：0
> 
> 时间：2012-11-29T08:45:45.813
> 
> 标签：python, django, google-app-engine

I am in the process of migrating some GAE apps from Python 2.5 to 2.7\. It seems much more difficult to import Django templates (any version) into this version of Python. I followed Google's instructions to the T and scoured the web for help, but ultimately failed. So here is what I tried, and I was wondering if any of you guys would be able to help me! Thanks in advance.

In app.yaml:

```
libraries:
- name: django
  version: "1.2" 
```

In main.yaml:

```
import os
# specify the name of your settings module
os.environ['DJANGO_SETTINGS_MODULE'] = 'myapp.settings'
import django.core.handlers.wsgi
app = django.core.handlers.wsgi.WSGIHandler() 
```

The main class:

```
class Main(webapp2.RequestHandler):
  def get(self):
    self.response.out.write(template.render('index.html', None)) 
```

The Error I get:

> NameError: global name 'template' is not defined

Interestingly, it worked with Jinja2 templates. However, all HTML code was written using Django templates and I think it would be too time consuming to convert them all. Here's the Jinja2 code that worked (all in one code block for simplicity).

```
libraries:
- name: jinja2
  version: latest

import jinja2
import os

jinja_environment = jinja2.Environment(
loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class Main(webapp2.RequestHandler):
  def get(self):
    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:54:08.477

Your `template` is undefined; you'll need to import it from `webapp`:

```
from google.appengine.ext.webapp import template 
```

`webapp2` is backwards compatible with `webapp` but you'll need to use the template engine from `webapp` still, see [Using templates](http://webapp-improved.appspot.com/tutorials/gettingstarted/templates.html).

# sqlite - 如何比较sqlite3中的日期？

> ID：13621857
> 
> 赞同：1
> 
> 时间：2012-11-29T08:45:50.697
> 
> 标签：sqlite

有一个包含unix时间戳字段的表，我试图获取超过一小时的记录

```
select * from table_name where (date('now','unixepoch') - table_field) > 3600 
```

但这根本不显示任何记录，但有些*字段*包含几天前的时间戳。如果有一些简单的条件，比如`table_field > 1`它确实会输出所有记录。但是为什么顶部的语句不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:14:16.153

修饰符将Unix 时间戳数字转换为函数可以理解`'unixepoch'`的格式。`date`但是，您希望将日期字符串转换为 Unix 时间戳：

```
SELECT *
FROM table_name
WHERE strftime('%s', 'now') - field > 3600 
```

除了计算秒数，您还可以使用[修饰符](http://www.sqlite.org/lang_datefunc.html)（但没有减法，返回的字符串`strftime`不会自动转换为数字）：

```
SELECT *
FROM table_name
WHERE CAST(strftime('%s', 'now', '-1 hours') AS INT) > field 
```

# php - 防止用户在未登录的情况下打开其他页面

> ID：13621867
> 
> 赞同：2
> 
> 时间：2012-11-29T08:46:30.900
> 
> 标签：php, security

我对 php 很陌生（4 天前开始学习），我有很多问题......

我有一个名为 index.php 的登录页面，在登录/验证用户名过程后，用户被带到 chat.php，它有一个链接到其他一些名为 someOtherPage.php 的 php 页面......我的问题是，如何防止用户无需登录即可直接访问 someOtherPage.php，只需在“www.nameOfMyWebsite.com/someOtherPage.php/”之类的 url 中输入

在回答了这个问题之后，我想再问一些关于 php 的问题......在同一个线程中问一个稍微不相关的问题（关于标题）是否有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T08:49:25.920

您需要在用户登录时维护会话。在登录时，使用用户名或用户 ID 设置会话变量。然后在受保护的页面上，检查此会话变量是否存在，然后再允许他们查看该页面。

一个基本的例子：

登录成功后：

```
$_SESSION['userId'] = x; 
```

在请求受保护的页面时：

```
if(!isset($_SESSION['userId']))
{
    // not logged in
    header('Location: login.php');
    exit();
} 
```

[有关PHP 会话](http://php.net/manual/en/features.sessions.php)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:52:57.410

大多数时候，会话变量用于完成您想做的事情。会话本身在每个页面的开头使用 session_start() 启动。

然后登录页面在成功登录后设置一个会话变量： $_SESSION['userId']=$userId; //不管id是什么。

第二页使用 if 来查看是否设置了会话变量。

```
if (isset($_SESSION['userId']))
{
     .......//here is your page text
}
else
{
     echo 'Sorry please login first before visiting this page!'; //also a redirect can be made here instead.
} 
```

如果你有一个注销页面，你可以在那里使用 session_destroy() （在页面开头也使用 session_start() 之后）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T08:59:08.963

把它放在你每一页的顶部

```
if(!isset($_SESSION['xxx']))
{
   header('Location:index.php');
}
else
{
   header('Location:home.php');
}
//xxx indicate your session name which you had set after login 
```

# objective-c - 根据输入的文本调整 UITextField 的大小和位置

> ID：13621872
> 
> 赞同：0
> 
> 时间：2012-11-29T08:46:59.713
> 
> 标签：objective-c, ios, cocoa-touch, uitextfield

我的应用程序中有一个`UITextField`宽度为 150 像素。当用户添加文本时，当文本大小超过 的宽度时`textfield`，`textfield`应相应增加宽度，以便位置相同，所有输入的文本都能正常显示。我使用了以下代码，但没有运气。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    float width = [textField.text sizeWithFont:textField.font
                             constrainedToSize:CGSizeMake(300, textField.bounds.size.height)].width;

    if (width  > (textField.frame.size.width +50 )) {

        CGRect rect = textField.frame;
        rect.size.width +=10 ;

        textField.frame =rect;
    }

    return YES ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:36:58.887

正如你所说，它将是固定长度的，那么你可以这样做：

设置 UITextField 的最大宽度，并使文本居中对齐。

# c# - 保存编码图像返回 GDI+ 错误

> ID：13621873
> 
> 赞同：-1
> 
> 时间：2012-11-29T08:47:05.913
> 
> 标签：c#, winforms, image

这是交易。我正在尝试使用一个函数来压缩笔记本相机中的图像，同时使用标准代码来执行此操作：

```
 public static byte[] EncodeImage(this Image image)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            ImageCodecInfo jpegCodec = GetEncoderInfo("image/jpeg");
            EncoderParameter qualityParam = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, 80);
            EncoderParameters encoderParams = new EncoderParameters(1);
            encoderParams.Param[0] = qualityParam;

            image.Save(ms, jpegCodec, encoderParams);
            return ms.ToArray();
        }
    } 
```

压缩完成后，我将其保存到数据库中。效果很好，为我提供了大量的压缩（500 000 字节 vs 32 000）。一段时间后，我需要在 winforms 应用程序中向用户显示图像。

```
using (MemoryStream ms = new MemoryStream(entity.Photo))
    fotoPictureBox.Image = Image.FromStream(ms); 
```

同样，这显示了一个很好的图像。但是，我希望用户能够下载图像并保存在他认为合适的位置。这就是所有问题出现的时候。

如果我使用此代码：

```
fotoPictureBox.Image.Save(imageSaveFileDialog.FileName); 
```

我收到一个典型的`generic GDI+`错误。如果我尝试使用已编码的代码保存图像

```
 public static void SaveEncodedImage(this Image image, string targetPath)
    {
        ImageCodecInfo jpegCodec = Pomocne.GetEncoderInfo("image/jpeg");
        EncoderParameter qualityParam = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, 80);
        EncoderParameters encoderParams = new EncoderParameters(1);
        encoderParams.Param[0] = qualityParam;

        image.Save(targetPath, jpegCodec, encoderParams);
    } 
```

我收到此错误（指向行`image.Save(targetPath, jpegCodec, encoderParams);`）：

`An unhandled exception of type System.ArgumentException occurred in System.Drawing.dll Additional information: Parameter is not valid.`

可以请任何人帮忙吗？比较急，谢谢。

要解决一些问题/答案，您可能会开始 - 如果我不使用此代码压缩图像，我可以将图像保存到所选路径而不会出现任何问题。因此，解码或类似的东西显然存在一些问题。不要问我是否有足够的权限，因为我有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:56:56.670

出于某种原因，这段代码效果很好：

```
File.WriteAllBytes(targetPath, byteArray); 
```

我想有时最简单的解决方案是正确的。不确定确切的解释（你可以提供一个，我肯定会投赞成票），但这已经解决了。不管怎么说，还是要谢谢你。

# php - Yii - 在下拉列表中显示具有两个以上级别的树视图

> ID：13621881
> 
> 赞同：0
> 
> 时间：2012-11-29T08:47:26.787
> 
> 标签：php, database, yii, relationship

我有一个具有这种结构的数据库表

```
id title parent_id is_parent 
```

parent_id 是父级的 id，我将 is_parent 添加为布尔值以显示作为父级的元素。

我想从该数据库中提取树视图并将其显示在下拉列表中。这是我正在寻找的内容：

```
level1
   level2
      child1
      child2
   level2_2
      child1
      child2
level1_2
  ... 
```

现在，如果我的模型中只有两个级别（父级和子级），我可以这样做：

```
public function relations()
{
    return array(
                'getparent' => array(self::BELONGS_TO, 'Region', 'parent_id'),
                'childs' => array(self::HAS_MANY, 'Region', 'parent_id', 'order' => 'title ASC'),
    );
} 
```

在视图中：

```
 <?php echo $form->dropDownListRow($model,'region',CHtml::listData(Region::model()->findAll('is_parent=0'),'id', 'title','getparent.title'),array('prompt'=>'Choose')); ?> 
```

我不知道如何改变模型中的关系或改变listData结构两个得到我想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:18:06.337

Optgroup（在下拉列表中）不能嵌套，因此您必须放弃组。只需创建自己的 $model::getList() 函数。

我认为你不应该使用'is_parent'，'parent_id'就足够了。getList() 看起来像这样：

```
public static function getList($id=0) {
    $list = array();
    $models = Region::model()->findAllByAttributes(array('parent_id'=>$id));
    foreach ($models as $model) {
        $childList = Region::getList($model->id);
        array_merge($list, array($model->id => $model->title, $childList);
    }
    return $list;
} 
```

它是递归的，当您在没有参数的情况下调用它时 - 您从`parent_id=0`获取所有树开始。

如果您需要缩进，请在此函数中使用附加参数来设置它（并在每个级别增加它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-27T08:29:04.830

```
 public static function getList($parent_id=null,$dash='',$list=array()) {
        $parents = ObjectCategory::find()->where(['parent_id' => $parent_id])->all();
        foreach($parents as $id => $p) {
             $list[$p->id] = $dash.$p->name;
             $list = ObjectCategory::getList($p->id,"-".$dash,$list);
        }
        return $list;
    }
// call on view 
echo  $form->field($model, 'parent_id')->dropDownList(backend\models\ObjectCategory::getList(null,''),['prompt' => 'Parent Category']); 
```

# eclipse - Java Eclipse SWT OSX 错误

> ID：13621882
> 
> 赞同：4
> 
> 时间：2012-11-29T08:47:26.127
> 
> 标签：eclipse, swt, osx-mountain-lion

所以我对这个问题进行了很多研究，但还没有发现任何对我有用的东西。

这主要是关于这个错误：

```
[Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000 
```

这似乎与Eclipse自己知道的一个bug有关。

我尝试过运行 Eclipse Indigo、Eclipse 4.2.1 和 Eclipse 4.3，结果相同。我尝试按照某处“-XStartThreadSecond”<--- 类似的建议在第二个线程上启动 Eclipse，但 Eclipse 似乎不再认识到这一点。那么也许有人在这么长时间后找到了解决方案？

我在 Eclipse 之上运行 OSX Mountain Lion，JRE 6，我还尝试让 JRE 7 在我的 Eclipse 中工作，但是 JRE 7 VM 不存在于它应该存在的文件夹中（我没有安装在其他任何地方）。

编辑：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=212617](https://bugs.eclipse.org/bugs/show_bug.cgi?id=212617)

[http://www.eclipse.org/forums/index.php/m/809088/](http://www.eclipse.org/forums/index.php/m/809088/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T23:35:27.277

我在使用 JFreeChart 时遇到了同样的问题，但是没有一个解决方案有效。每次我尝试运行创建 JFrame 的 java 应用程序时，它都会在 Mac 上崩溃。

但是，我意识到我已经在项目构建路径中包含了 JFreeChart 附带的所有库。如果您有同样的问题，请检查您的库：项目 -> 属性 -> Java 构建路径 -> 库

您只需要：jcommon-1.0.17.jar 和 jfreechart-1.014.jar

如果你没有使用 JFreeChart，如果你使用了一些冲突的库，仍然检查你的构建路径。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T18:32:41.647

我在 OSX 上使用带有 Eclipse 的 JFreeChart 时遇到了同样的问题。似乎只将 jcommon-1.0.17.jar 和 jfreechart-1.014.jar 添加到您的 JAR 引用路径中，而不是整个库列表是解决方案。

谢谢

# php - 通过 $.each 函数 TypeError 迭代 json

> ID：13621884
> 
> 赞同：0
> 
> 时间：2012-11-29T08:47:38.003
> 
> 标签：php, javascript, jquery, json, each

我从 php 得到的响应为：

```
{"success":false,"errors":{"category_id":"category id must not be empty","name":"name must not be empty","uri":"uri must not be empty","price":"price must not be empty","status":"status must not be empty"}} 
```

并希望显示错误：

```
form.submit(function(ev) {
    ev.preventDefault();

    $('.help-inline').remove();

    var data = $(this).serialize();

    $.post($(this).attr('action'), {'data': data}, function(result) {

        if (result.success == true) {
            console.log('true');
        } else {
            $.each(result.errors, function(label, error) {
                console.log(label+' '+error);
            });
        }
    });
}); 
```

但它让我`TypeError: e is undefined`

在旧版本上它可以工作，但在 1.8.3 上则不行。我做错了什么？

我的PHP代码是：

```
 $errors = $post->errors('');
            $this->response->body(json_encode(array(
                'success' => FALSE,
                'errors' => $errors,
            ))); 
```

$errors 是关联数组：

```
array(5) (
    "category_id" => string(29) "category id must not be empty"
    "name" => string(22) "name must not be empty"
    "uri" => string(21) "uri must not be empty"
    "price" => string(23) "price must not be empty"
    "status" => string(24) "status must not be empty"
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:54:59.233

您`result.errors`是一个只有一个元素的数组，即您要迭代的元素，`$.each`因此只需替换以下行：

```
$.each(result.errors, function(label, error) { 
```

对于这个：

```
$.each(result.errors[0], function(label, error) { 
```

那应该做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:55:39.843

在您的 JSON 中，您的错误数组似乎只包含一个元素，该元素是具有属性的对象，请尝试使用：

```
$.each(result.errors[0], function(label, error) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:02:01.783

PHP 和响应似乎没问题，但我看不出你会在哪里对 javascript 说你将使用 json 数据类型。您可以在使用 console.log(result) 代码时验证这一点。并查看您的结果是对象还是字符串。作为

```
form.submit(function(ev) {
    ev.preventDefault();

    $('.help-inline').remove();

    var data = $(this).serialize();

    $.post($(this).attr('action'), {'data': data}, function(result) {
        console.log('Result is: ' + typeof(result));
        if (result.success === true) {
            console.log('true');
        } else {
            $.each(result.errors, function(label, error) {
                console.log(label+' '+error);
            });
        }
    });
}, "json"); 
```

# android - 如何使 Android 客户端请求安全？

> ID：13621890
> 
> 赞同：1
> 
> 时间：2012-11-29T08:47:58.550
> 
> 标签：android, security

我有一个 android 应用程序，它发送有关服务器购买的更新。我现在要做的是，我在服务器端和 Android 客户端使用相同的密钥生成器将购买和其他一些共享细节加密到 MD5 中。但是，如果有人解码 APK 文件，该人可以通过生成密钥轻松进行调用。防止此类攻击的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:07:56.630

最佳解决方案是您实现一些 Web 服务，该服务将返回您一个访问密钥（每次您想要获取访问密钥时都会更改），您每次都将使用该访问密钥以 POST 方法与您的服务器通信。这是最安全的方法，并且被 Facebook、Twitter 等所有优秀网站使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:22:44.447

使用 HTTPS 与您的服务器通信，以保护传输中的数据。不要试图发明安全协议。如果您想限制对服务器 API 的访问，请使用某种形式的身份验证：用户名和密码（通过 HTTPS）或更好的是某种身份验证令牌（OAuth 等）。如果您将密钥和/或密码存储在 APK 中，任何人都可以通过反编译 APK 来提取它们。如果您想防止这种情况发生，您需要使用令牌身份验证，其中令牌过期并且如果受到损害可能会失效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:26:21.420

因为我的问题基本上是关于使用应用内购买更新服务器，我最终在服务器端进行了公钥/私钥身份验证。Android 建议在客户端验证收据，但我们只是将收据转发到服务器并使用公钥在那里进行验证。

# php - preg_replace 具有多个值

> ID：13621892
> 
> 赞同：2
> 
> 时间：2012-11-29T08:48:07.723
> 
> 标签：php, regex

我有一个包含多个值的数组，称为`$my_replacements`.

我有一个名为`$my_string`.

我希望能够遍历 $my_replacements 并在 $my_string 上执行 preg_replace，所以现在我有这个：

```
foreach($my_replacements as $replacement) {
    preg_replace($replacement, '', $my_string);
} 
```

这很好用，但是我希望循环在对 $my_string 进行替换时停止，并且当发生这种情况时，我想获取这个新 $my_string 的值，并将值替换掉。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:51:58.420

在替换某些内容之前，您需要将结果与字符串进行比较：

```
foreach($my_replacements as $replacement) {
     $new_string = preg_replace($replacement, '', $my_string);
     if($new_string !== $my_string) {
         break;
     }
} 
```

[从文档](http://php.net/manual/en/function.preg-replace.php)：

> 如果找到匹配项，将返回新的主题，**否则主题将保持不变**，如果发生错误则返回 NULL。

如果不是这种情况，我们会中断，即退出循环。

# jquery - 如何在 jquery 中使用 preventDefault() 和粘贴事件

> ID：13621895
> 
> 赞同：0
> 
> 时间：2012-11-29T08:48:32.327
> 
> 标签：jquery

我有一个问题，我在 TextBox 上进行了验证，以防止用户输入超过 10 个字符的数据，我已经在 keyprees 上应用了验证，但我无法限制用户粘贴长度超过 10 的数据。我已经搜索并尝试粘贴事件，但它不工作它不限制用户粘贴值，preventDefault(); 不管用。

代码-

```
$('#EMName').bind('paste', function (e) {
        var self = $(this);
        var v = false;
        var flag = setTimeout(function () {

            var len = $(self).val().length;
            if (len > 10) {
                alert("false");
                v = false;
                return false
            }
            else {
                alert("true");
                v = true;
                return true;
            }

        }, 0);
        if (v == false)
            e.preventDefault();   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:51:43.163

这也是我们在应用程序中遇到的问题。它不仅仅是粘贴的文本，还有各种浏览器插件，它们将为您预填充字段或在浏览器本身中存储表单数据，不会触发任何事件。

我们能够克服这个问题的唯一方法是使用 setInterval() 进行定期检查，因此我们不会错过这些事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:55:11.497

好的，所以您实际上不会允许用户粘贴。如果您不这样做，以下将起作用

```
<input id="EMName" value="" onpaste="return false" maxlength="10" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:56:08.660

本质上，您希望尽可能多地监控允许更改值的输入的事件。我在我的一个网站上使用了类似的东西，这就是我所做的：

```
$(document).ready(function(){
    $('#target').on('propertychange keyup input paste', function(){
        var target = $(this);
        var text = target.val();
        if (text.length > 10) {
            target.val(text.substring(0, 9));
        }
    });
});​ 
```

[**演示**](http://jsfiddle.net/8U8ZK/2/)

这适用于键入、ctrl+v、右键单击粘贴和大多数其他操作。如果浏览器插件填充它，我不确定它是否会起作用。

# maven - 如何通过maven测试Jenkins项目下的特定模块？

> ID：13621896
> 
> 赞同：17
> 
> 时间：2012-11-29T08:48:33.947
> 
> 标签：maven, maven-2, jenkins, continuous-integration

我使用 Jenkins 构建具有多个模块的项目。该项目有一个根 pom.xml，用于构建该项目下的所有模块。我将此 pom.xml 指定为根 POM。

现在我想将测试作为**“构建后步骤”**运行。但是，我不想在所有模块下运行所有​​测试。我只想在特定模块下运行测试。

我尝试使用 shell 命令将目录更改为必须运行测试然后触发 maven 的模块。我还尝试使用 -f 开关为该特定模块指定 pom.xml。这两个步骤都不起作用。

请帮助我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-29T09:12:00.270

只需从根路径运行：

```
mvn -pl :submodule test 
```

专家提示：`mvn --help`

# matlab - 如何在交叉验证的每一折中获得错误分类率？

> ID：13621900
> 
> 赞同：5
> 
> 时间：2012-11-29T08:48:44.883
> 
> 标签：matlab, cross-validation

我目前在 matlab 中使用这种语法来获得 10 倍交叉验证的误分类率：

```
target = [repmat(1,ntrial,1);repmat(2,ntrial,1)];
cvo = cvpartition(target,'k',10);
func = @(XTRAIN,ytrain,XTEST)(classify(XTEST,XTRAIN,ytrain));
mcr = crossval('mcr',pooling,target,'predfun',func,'partition',cvo); 
```

（其中“池化”是我想用分类器分类的 2 类特征集）

根据我的阅读，`mcr`将返回 10 倍的平均错误分类率。现在，如果我想从*每个*折叠中获得错误分类率，我该怎么办？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:25:01.603

我想说，在这种情况下，您希望对培训/验证过程有更多的控制权。您是否考虑过分解流程以获得更多控制权？首先`cvpartition`为交叉验证创建 10 折，然后分别对每个折采取行动。

# tfs - tfs teambuild 持续集成是否总是构建最新的资源？

> ID：13621901
> 
> 赞同：0
> 
> 时间：2012-11-29T08:48:46.970
> 
> 标签：tfs, tfsbuild

我们有很长的构建时间，有时会有一小部分 CI 构建等待构建，在我看来 CI 总是构建“最新源”，而不一定是“存储库头加上签入时的变更集”——是吗正确的？如果是这样，等待队列的每个构建完成是没有意义的，我还不如取消除最后一个之外的所有构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:23:26.993

如果您想累积直到上一个构建完成，听起来您更喜欢使用[滚动构建。](http://msdn.microsoft.com/en-us/library/ee308011%28v=vs.100%29.aspx)

# node.js - 使用 node.js 进行 Paypal IPN 验证 - 快速应用

> ID：13621906
> 
> 赞同：3
> 
> 时间：2012-11-29T08:49:09.747
> 
> 标签：node.js, paypal, express, paypal-ipn, paypal-sandbox

我正在尝试在我的 node.js 应用程序中实现 Paypal IPN 验证。我正在使用 express 框架。

这是我的代码：

```
app.post('/paypal', function(req,res){
console.log("IN PAYPAL !! req.body : "+req.body);
var ipn = require('paypal-ipn');
ipn.verify(req.body, function callback(err, msg) {
      if (err) {
        console.log("Error:"+err);
      } else {
        //Do stuff with original params here
          console.log("req.body.payment_status :"+req.body.payment_status+" msg: "+msg);
          res.end();
        if (req.body.payment_status == 'Completed') {
          //Payment has been confirmed as completed

        }
      }
    });
}); 
```

我为此使用[paypal-ipn](https://github.com/andzdroid/paypal-ipn)。

当我尝试从 Paypal Sandbox 发送 IPN 消息时，我收到了这条消息

> IPN 传送失败。无法连接到指定的 URL。请验证 URL，然后重试。

但是当我在 curl 的帮助下尝试从终端发送示例消息时，我在我的服务器应用程序上收到了请求，它正在显示日志

> 在贝宝！req.body : [object Object] req.body.payment_status :Pending msg: VERIFIED POST /paypal 200 572ms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:00:24.883

我得到了它。我没有在我的服务器中监听端口 443 (https)。

```
var https = require('https'),
    fs = require('fs');

var httpsOptions = {
    key: fs.readFileSync('path/to/private/key'),
    cert: fs.readFileSync('path/to/certs')
}

http.createServer(app).listen(app.get('port'), function() {
    console.log("server listening on port " + app.get('port'));
});

https.createServer(httpsOptions, app).listen(443,function () {
    console.log("server listening on port " + 443);
}); 
```

Paypal 将 IPN 消息发送到 https 端口 443（我认为）。反正我明白了...

# .net - 即使“特定版本”为真，也会加载以前版本的程序集

> ID：13621910
> 
> 赞同：0
> 
> 时间：2012-11-29T08:49:27.800
> 
> 标签：.net, gac, .net-assembly

我正在开发一个应用程序的插件。我的插件使用 WPF Toolkit 1.6.0.0。WPF Toolkit 程序集是强命名的，我确保我对程序集的所有引用都是特定版本的。

宿主应用程序使用以前版本的 WPF Toolkit (1.5.0.0)。当我的插件尝试加载 WPFToolkit 时，它会从主机应用程序加载版本，即使正确的程序集与我的插件程序集位于同一文件夹中（我从该文件夹加载其他依赖项没有问题）。

如何确保加载了正确版本的库？

下面是装配活页夹日志。

```
*** Assembly Binder Log Entry  (29.11.2012 @ 09:35:17) ***

The operation failed.
Bind result: hr = 0x80131040\. No description available.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  C:\Path\To\Host\Application\Application.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = XXXXXXXXXXXXX
LOG: DisplayName = WPFToolkit.Extended, Version=1.6.0.0, Culture=neutral, PublicKeyToken=3e4669d2f30244f4
 (Fully-specified)
LOG: Appbase = file:///C:/Path/To/Host/Application/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = application.exe
Calling assembly : PresentationFramework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Path\To\Host\Application\petrel.exe.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: WPFToolkit.Extended, Version=1.6.0.0, Culture=neutral, PublicKeyToken=3e4669d2f30244f4
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///C:/Path/To/Host/Application/WPFToolkit.Extended.DLL.
LOG: Assembly download was successful. Attempting setup of file: C:\Path\To\Host\Application\WPFToolkit.Extended.dll
LOG: Entering run-from-source setup phase.
LOG: Assembly Name is: WPFToolkit.Extended, Version=1.5.0.0, Culture=neutral, PublicKeyToken=3e4669d2f30244f4
WRN: Comparing the assembly name resulted in the mismatch: Minor Version
ERR: The assembly reference did not match the assembly definition found.
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:25:56.543

我仍然不知道为什么会遇到这个问题，但我找到了解决方法。通过连接`AppDomain.CurrentDomain.AssemblyResolve`并手动加载程序集，我能够正确加载程序集。

这是解析器的代码：

```
private static Assembly HandleAssemblyResolve(object sender, ResolveEventArgs args)
{
    Assembly requestingAssembly = (args.RequestingAssembly ?? Assembly.GetExecutingAssembly());
    AssemblyName assemblyName = new AssemblyName(args.Name);

    string currentLocation = requestingAssembly.Location;
    string baseDirectory = Path.GetDirectoryName(currentLocation);
    string assemblyLocation = Path.Combine(baseDirectory, assemblyName.Name + ".dll");

    if (File.Exists(assemblyLocation))
    {
        return Assembly.LoadFile(assemblyLocation);
    }

    return null;
} 
```

# ruby - 启动或捆绑应用程序时是否可以从 TideSDK 中选择非系统 Ruby？

> ID：13621913
> 
> 赞同：3
> 
> 时间：2012-11-29T08:49:37.437
> 
> 标签：ruby, rvm, tidesdk, rvmrc

我正在通过 TideSDK Developer 应用程序测试应用程序的捆绑，包括使用 TideSDK 的 Ruby 脚本。我的系统上安装了几个 Ruby，使用 RVM，并且想知道是否有任何方法可以使用 .rvmrc 文件或 TideSDK ruby​​ 模块可以理解的类似文件来指定应该使用哪个。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:15:52.440

你打算如何运行你的 ruby​​ 脚本？通过 Ti.Process? 否则，TideSDK ruby​​ 模块就是它的样子 - 没有其他版本可以与 rvm (Afaik) 一起使用。

更新/扩展：我应该指出 TideSDK 捆绑了它自己的 Ruby——它不使用系统 ruby​​。否则，您可以通过 Ti.Process 执行 ruby​​ 脚本（就像您将从 CLI 执行的任何其他脚本一样）。所以，在你的脚本中，`#!/usr/bin/ruby`你可以做`#!/usr/bin/env ruby`. 当然，如果您在目标系统上依赖 rvm，这将不是很便携，但是如果您对已知目标执行有限的 ditrib（即：在内部，您知道每个人都有 rvm 的系统设置），您可能会得到一些东西在职的。

# android - Android：显示另一个活动的活动视图

> ID：13621914
> 
> 赞同：1
> 
> 时间：2012-11-29T08:49:42.523
> 
> 标签：android, android-activity

嗨，我有两个活动，第一个活动有三个图标，一个是不可见的......当我点击第一个活动时，它使用意图进入第二个活动..我的第二个活动是登录屏幕，当登录成功时我应该来返回第一个活动并使图标在第一个活动中可见..我如何从第二个活动返回到第一个活动并使图标在第一个活动中可见..以下是我的登录屏幕代码

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.fyelogin);                    
            etPassword = (EditText)findViewById(R.id.password);
            btnLogin = (Button)findViewById(R.id.login_button);
            btnCancel = (Button)findViewById(R.id.cancel_button);
            lblResult = (TextView)findViewById(R.id.result);

            final ImageView details = (ImageView)findViewById(R.id.red); 

            btnLogin.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    String password = etPassword.getText().toString();

                    if(password.equals("guest")){
                        lblResult.setText("password successful.");

              // details.setVisibility(View.VISIBLE);

                    } else {
                        lblResult.setText("password doesn't match.");

                    }                                      
                    finish();}}); 
```

任何建议/帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:51:38.567

用于`startActivityforResult`打开登录活动..然后`onActivityResult(int, int, Intent)`在您的第一个活动中显示图标..

例子：

```
public class MyActivity extends Activity {
 ...

 static final int PICK_CONTACT_REQUEST = 0;

 protected boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
         // When the user center presses, let them pick a contact.
         startActivityForResult(
             new Intent(Intent.ACTION_PICK,
             new Uri("content://contacts")),
             PICK_CONTACT_REQUEST);
        return true;
     }
     return false;
 }

 protected void onActivityResult(int requestCode, int resultCode,
         Intent data) {
     if (requestCode == PICK_CONTACT_REQUEST) {
         if (resultCode == RESULT_OK) {
             // A contact was picked.  Here we will just display it
             // to the user.
             startActivity(new Intent(Intent.ACTION_VIEW, data));
         }
     }
 }
} 
```

检查[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# nginx - Nginx 错误页面 - 一个适合它们的位置规则？

> ID：13621915
> 
> 赞同：38
> 
> 时间：2012-11-29T08:49:51.653
> 
> 标签：nginx, error-handling, http-status-code-404

具有以下 nginx vhost 配置：

```
server {
    listen 80;
    listen 443 ssl;
    server_name default;
    root /var/www/default/html;
    error_log /var/www/default/log/error.log;
    access_log /var/www/default/log/access.log;
    ssl_certificate /etc/ssl/certs/ssl-cert-snakeoil.pem;
    ssl_certificate_key /etc/ssl/private/ssl-cert-snakeoil.key;

    autoindex on;
    index index.html index.php;

    location / {
        try_files $uri $uri/ @php;
    }

    location @php {
        rewrite ^/(.*)/?$ /index.php/$1 last;
    }

    location ~* /(?:[.]|.*[.](?:bak|fla|inc|ini|log|psd|sh|sql|swp)|(?:file|upload)s?/.*[.](?:php)) {
        deny all;
    }

    location ~* [.](?:php) {
        fastcgi_buffer_size             128k;
        fastcgi_buffers                 4 256k;
        fastcgi_busy_buffers_size       256k;
        fastcgi_connect_timeout         30;
        fastcgi_ignore_client_abort     off;
        fastcgi_index                   index.php;
        fastcgi_intercept_errors        on;
        fastcgi_pass                    unix:/var/run/php5-fpm.sock;
        fastcgi_read_timeout            60;
        fastcgi_send_timeout            60;
        fastcgi_split_path_info         ^(.+[.]php)(/.*)$;
        fastcgi_temp_file_write_size    256k;

        include /etc/nginx/fastcgi_params;
    }

    error_page 403 /403.html; location = /403.html {
        root /var/www/default/error;
    }

    error_page 404 /404.html; location = /404.html {
        root /var/www/default/error;
    }

    error_page 405 /405.html; location = /405.html {
        root /var/www/default/error;
    }

    error_page 500 501 502 503 504 /5xx.html; location = /5xx.html {
        root /var/www/default/error;
    }
} 
```

单个位置规则是否可以提供 40 倍和 50 倍的错误？就像是：

```
error_page 403 /403.html;
error_page 404 /404.html;
error_page 405 /405.html;
error_page 500 501 502 503 504 /5xx.html;

location ~ /(?:40[345]|5xx)[.]html$ {
    root /var/www/default/error;
} 
```

如果我在上面，我总是得到 nginx 默认 404 错误。字符串匹配（无运算符）和完全匹配（`=`运算符）有效，但对于区分大小写 [in] 的正则表达式运算符 ( `~[*]`) 则无效。

我想问题是处理位置块的顺序。

有没有办法克服这个问题来减少不必要的`root`冗余？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-29T10:52:51.430

```
error_page 403 /error/403.html;
error_page 404 /error/404.html;
error_page 405 /error/405.html;
error_page 500 501 502 503 504 /error/5xx.html;

location ^~ /error/ {
    internal;
    root /var/www/default;
} 
```

*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/r/error_page](http://nginx.org/r/error_page)
*   [http://nginx.org/r/root](http://nginx.org/r/root)

# safari - Safari IOS6“位置：固定”打开键盘并改变方向

> ID：13621917
> 
> 赞同：4
> 
> 时间：2012-11-29T08:49:53.790
> 
> 标签：safari, ios6

我在 Ipad`position: fixed`和`width: 100%`我的网站中有顶部菜单，当在 Safari IOS5 中显示*键盘并更改方向*（fe，从横向到纵向）时，该菜单显示良好，但在 IOS6 中**没有。**

在 IOS6 中，此操作后顶部菜单在**128px**处向右移动。我发现了一些非常接近的问题，与 StackOverflow [iOS6 Safari 方向更改错误中的 128px 完全相关？](https://stackoverflow.com/questions/12515058/ios6-safari-orientation-change-bug)，但解决方案不适用于我的情况。

因此，稍微调查了一下，我在 javascript 事件“orientationchange”中将顶部菜单的 CSS 属性更改`position:fixed`为`position:relative`.

这有帮助，我的顶部菜单正确重绘。但是，正如我`position:fixed`稍后对我的网站所需要的那样，我添加了`setTimeout()`方法，该方法将 CSS`position`返回到 value `fixed`。

```
$(window).bind("orientationchange", function(e){
        $('#framecontentTop').css('position', 'relative');
        setTimeout(function(e){
             $('#framecontentTop').css('position', 'fixed');
        }, 500)
}); 
```

我认为，这是临时解决方案。有人知道问题的真正根本原因，还是 IOS6 错误？

# iphone - 正则表达式多行匹配

> ID：13621918
> 
> 赞同：0
> 
> 时间：2012-11-29T08:49:56.830
> 
> 标签：iphone, ios, regex, cocoa-touch

我想知道是否可以创建一个正则表达式来查找以下两个字符串之间的所有文本：

```
mutablePath = CGPathCreateMutable();
...
CGPathAddPath(skinMutablePath, NULL, mutablePath); 
```

基本上，第一行和最后一行总是相同的，中间会有一大堆随机的东西。我正在使用 xCode 中的查找功能，并希望从上面计算出现在第一行和最后一行的所有实例之间的行数。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:59:30.447

Xcode 不支持多行正则表达式匹配。你必须搜索你的第一行和最后一行，并自己计算中间的行。

# ruby - Ruby 系统命令给了我一个输出

> ID：13621922
> 
> 赞同：0
> 
> 时间：2012-11-29T08:50:26.517
> 
> 标签：ruby, multithreading, shell, stdout

这个红宝石“系统”给了我一个输出；在 irb 上：

```
system("sudo airodump-ng -w sidney wlan0") 
```

Airodump-ng 来自 Airocrack-ng 包。

但是，红宝石“系统”不应该给我一个标准输出。问题是，正在创建一个“sh”进程，它没有输出。但是“sh”进程有一个子进程，这给了我一个我根本不希望在终端上显示的输出。

问题的第二部分，如何使用线程以及使用 ruby​​ 调用 shell 命令的不同方式（并且不显示该子进程的输出）获取该子进程的 pid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:26:52.537

如果您不关心输出，请将其丢弃：

```
system("sudo airodump-ng -w sidney wlan0 >/dev/null 2>&1") 
```

我*认为*子进程将继承父进程的文件描述符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:57:53.440

利用

```
out = `sudo airodump-ng -w sidney wlan0` 
```

相反，输出不会显示在屏幕上，而是存储`out`在

# java - 在射弹路径中移动物体

> ID：13621923
> 
> 赞同：-2
> 
> 时间：2012-11-29T08:50:41.077
> 
> 标签：java, android, physics

我正在开发一个 android 项目，我想在射弹路径中移动一个对象，但不知道该怎么做..

我得到了初始 X 和初始 Y，即横向模式下手机的左下角。我还获取了用户触摸手机时的 X 和 Y，所以我也可以通过 tan-1(y/x) 计算角度，但是如何计算曲线路径，即对象的 X 和 Y。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:59:48.700

您在初始点 p1 (X, Y) 处投掷弹丸。你有一个用户触摸屏幕的点，比如 p2。因此，找到方向向量，如 dir = p2 - p1 并将其归一化。然后执行以下操作：

1.  你有初始速度，v = speed * dir，其中速度是标量因子
2.  然后，在每个游戏滴答上附加到您当前的位置向量`v = v + (0, -10); v *= dt`，其中 (0, -10) 是重力因子和 dt - 游戏帧之间的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:05:32.293

您可以通过使用抛射体方程的参数形式来消除必须按时间间隔递增的情况。

您需要做的就是确定您想要在屏幕上移动多远（从左到右）。我称之为X方向。然后，对于 X 方向上的每个位置（可能是一个像素，可能是一些像素），您计算 Y（从下到上）方向上的相应位置。

您需要为重力引起的向下加速度设置一个值。无论您选择什么值，我都称它为 g。您还需要为射弹开始运动的速度设置一个值。无论你选择什么值，我都称它为 V。

那么参数方程为：

Y = X * tan(theta) - (g * X^2) / (2 * V^2 * (cosine(theta))^2)

所以，一旦你有了用户接触点，你就可以计算角度、theta、确定 V、g 和 X 的最大值，然后从 0 迭代到最大 X，你会得到一个点 (X,Y)对于每次迭代。

# mysql - 为 MySql 中的视图生成唯一长 ID

> ID：13621924
> 
> 赞同：4
> 
> 时间：2012-11-29T08:50:46.787
> 
> 标签：mysql, hibernate, view, auto-generate

我对三张桌子有一个看法。它有 6 列，如下所示：

```
ID | NAME | PRINCIPAL_ID | DESCRIPTION | GROUP_ID | TYPE 
```

当我`hibernate`用来从数据库中检索数据时，我不得不将`ID`列放在这个视图中。问题是，我无法生成正确加载数据`ID`所需的唯一值。`hibernate`

如何在此视图中为每一行设置唯一 ID？

*也许这会有所帮助，我不确定*：`PRINCIPAL_ID`和的组合`GROUP_ID`可以制作一个唯一的 ID。这三个都是`Long`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T09:49:11.603

更新：当您坚持将其作为数字时，请像这样创建您的视图：

```
SELECT
(@rownum:=@rownum + 1) AS rownumber,
yourTable.*
FROM
yourTable
, (SELECT @rownum:=0) r 
```

但事实就是如此——没有其他可能性了。就像我在评论中所说的那样投射 rownumber `long`，如果真的，真的必须是`long`.

或者在一个[过程](http://dev.mysql.com/doc/refman/5.1/de/create-procedure.html)中：

```
DELIMITER $$
CREATE PROCEDURE selectFromWhatever()
BEGIN
SELECT
(@rownum:=@rownum + 1) AS rownumber,
yourTable.*
FROM
yourTable
, (SELECT @rownum:=0) r;
END $$
DELIMITER ; 
```

然后得到结果

```
CALL selectFromWhatever() 
```

**原答案：**

来自 MySQL 手册：

**[UUID()](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)**

> 返回根据“DCE 1.1：远程过程调用”（附录 A）CAE（通用应用程序环境）规范生成的通用唯一标识符 (UUID)，该规范由 The Open Group 于 1997 年 10 月发布（文档编号 C706， [http://www.opengroup .org/public/pubs/catalog/c706.htm](http://www.opengroup.org/public/pubs/catalog/c706.htm)）。
> 
> UUID 被设计为在空间和时间上全球唯一的数字。对 UUID() 的两次调用预计会生成两个不同的值，即使这些调用是在未相互连接的两台独立计算机上执行的。
> 
> UUID 是一个 128 位数字，由五个十六进制数字组成的 utf8 字符串表示，格式为 aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee：
> 
> 前三个数字是从时间戳生成的。
> 
> 第四个数字保留时间唯一性，以防时间戳值失去单调性（例如，由于夏令时）。
> 
> 第五个数字是提供空间唯一性的 IEEE 802 节点号。如果后者不可用（例如，因为主机没有以太网卡，或者我们不知道如何在您的操作系统上找到接口的硬件地址），则替换为随机数。在这种情况下，无法保证空间唯一性。然而，碰撞的概率应该非常低。
> 
> 目前，接口的 MAC 地址只在 FreeBSD 和 Linux 上被考虑在内。在其他操作系统上，MySQL 使用随机生成的 48 位数字。
> 
> mysql> 选择 UUID(); -> '6ccd780c-baba-1026-9564-0040f4311e29'
> 
> 警告
> 
> 尽管 UUID() 值旨在是唯一的，但它们不一定是不可猜测或不可预测的。如果需要不可预测性，则应以其他方式生成 UUID 值。笔记
> 
> UUID() 不适用于基于语句的复制。

**另一种方法**是使用`CONCAT()`来构建您的唯一 ID。

```
SELECT CONCAT(PRINCIPAL_ID, '-', GROUP_ID) AS myUniqueID
FROM yourTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-20T02:19:17.100

替代方案是使用`ROW_NUMBER() OVER ()`

```
SELECT ROW_NUMBER() OVER () AS ROW_NUM ... COLUMN... FROM TABLE 
```

# c# - AsEnumerable().Take

> ID：13621927
> 
> 赞同：3
> 
> 时间：2012-11-29T08:51:00.250
> 
> 标签：c#, linq, datatable, linq-to-dataset

我想从数据表中获取第 n 条记录。

我不想运行我已经知道的循环。

我正在尝试这样做

```
DataTable dt = dtResult.AsEnumerable().Take(n) 
```

是正确的方法..？

使这个“n条记录”在另一个数据表中的过程是什么..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T08:53:05.520

是的，这是从数据表中获取前 N 行的正确方法。使用[CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb396189.aspx)扩展从查询结果创建新的数据表：

```
DataTable dt = dtResult.AsEnumerable()
                       .Take(n)
                       .CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T09:03:08.140

lazyberezovsky 的回答是正确的，但是也许您想使用`AsQueryable`而不是如果您想做一些更花哨的事情，`AsEnumerable`而不仅仅是界面让您有更多的自由来针对您还没有进入内存的集合编写表达式。我想说它比现在更适合与数据库交互。更多信息：[IQueryable 和 IEnumerable 有什么区别？](https://stackoverflow.com/questions/252785/what-is-the-difference-between-iqueryablet-and-ienumerablet)`Take``IQueryable``IQueryable``IEnumerable`

```
DataTable dt = dtResult.AsQueryable()
                       .Take(n)
                       .CopyToDataTable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:54:20.513

试试这个`.CopyToDataTable()`。例如

```
DataTable dt = dtResult.AsEnumerable().Take(5).CopyToDataTable(); 
```

# twitter-bootstrap - 将 Twitter 引导程序与 Wild Apricot 的主题覆盖集成

> ID：13621928
> 
> 赞同：0
> 
> 时间：2012-11-29T08:51:04.080
> 
> 标签：twitter-bootstrap

有没有人做过这个集成或有教程推荐？他们有一种古怪的“覆盖”方法来实际修改 HTML：

[http://help.wildapricot.com/display/DOC/Theme+overrides](http://help.wildapricot.com/display/DOC/Theme+overrides)

Bootstrap 对我来说是一个熟悉的平台，但它们的默认 HTML 框架就不那么熟悉了。当然，最有用的是如果有人能指出我现有的片段开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T18:16:51.000

对此没有简单的解决方案。WA 使用不同的模板语言，您必须手动检查类名并比较差异以将两者结合在一起。

# c# - ValidateAntiForgeryToken 用途、解释和示例

> ID：13621934
> 
> 赞同：337
> 
> 时间：2012-11-29T08:51:16.117
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

你能解释一下[ValidateAntiForgeryToken](http://msdn.microsoft.com/en-us/library/system.web.mvc.validateantiforgerytokenattribute%28v=vs.100%29.aspx)的目的并给我看`ValidateAntiForgeryToken`MVC 4 中的例子吗？

我找不到任何解释此属性的示例？

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2012-11-29T08:58:24.430

MVC 的防伪支持将唯一值写入仅 HTTP cookie，然后将相同的值写入表单。提交页面时，如果 cookie 值与表单值不匹配，则会引发错误。

重要的是要注意该功能可以防止[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。也就是说，来自另一个站点的表单发布到您的站点，以尝试使用经过身份验证的用户的凭据提交隐藏内容。攻击涉及欺骗登录用户提交表单，或者在页面加载时简单地以编程方式触发表单。

该功能不能防止任何其他类型的数据伪造或基于篡改的攻击。

要使用它，请使用属性装饰操作方法或控制器，并在发布到该方法的表单中[`ValidateAntiForgeryToken`](http://msdn.microsoft.com/en-us/library/system.web.mvc.validateantiforgerytokenattribute.aspx)调用 to 。[`@Html.AntiForgeryToken()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper.antiforgerytoken.aspx)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-11-11T04:40:59.173

ValidateAntiForgeryToken 属性的基本目的是防止跨站请求伪造攻击。

跨站点请求伪造是一种从受信任用户的浏览器发送有害脚本元素、恶意命令或代码的攻击。有关这方面的更多信息，请访问 [http://www.asp.net/mvc/overview/security/xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages](http://www.asp.net/mvc/overview/security/xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages)。

它使用简单，您需要使用 ValidateAntiForgeryToken 属性来装饰方法，如下所示：

```
[HttpPost]  
[ValidateAntiForgeryToken]  
public ActionResult CreateProduct(Product product)  
{
  if (ModelState.IsValid)  
  {
    //your logic 
  }
  return View(ModelName);
} 
```

它派生自 System.Web.Mvc 命名空间。

在您看来，添加此代码以添加令牌，以便在提交时用于验证表单。

```
@Html.AntiForgeryToken() 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-10-27T13:12:07.950

在 ASP.Net Core 中，防伪令牌会自动添加到表单中，因此`@Html.AntiForgeryToken()`如果您使用 razor 表单元素或使用 IHtmlHelper.BeginForm 并且表单的方法不是 GET，则无需添加。

它将为您的表单生成类似于以下内容的输入元素：

```
<input name="__RequestVerificationToken" type="hidden" 
       value="CfDJ8HSQ_cdnkvBPo-jales205VCq9ISkg9BilG0VXAiNm3Fl5Lyu_JGpQDA4_CLNvty28w43AL8zjeR86fNALdsR3queTfAogif9ut-Zd-fwo8SAYuT0wmZ5eZUYClvpLfYm4LLIVy6VllbD54UxJ8W6FA"> 
```

并且当用户提交表单时，如果启用了验证，则在服务器端验证此令牌。

`[ValidateAntiForgeryToken]`属性可用于操作。除非请求包含有效的防伪令牌，否则对应用了此过滤器的操作发出的请求将被阻止。

`[AutoValidateAntiforgeryToken]`属性可用于控制器。此属性与 ValidateAntiForgeryToken 属性的工作方式相同，只是它不需要使用以下 HTTP 方法发出的请求的令牌： `GET HEAD OPTIONS TRACE`

附加信息： [docs.microsoft.com/aspnet/core/security/anti-request-forgery](https://docs.microsoft.com/en-us/aspnet/core/security/anti-request-forgery)

# sql - Spring 的 SimpleJdbcTemplate 和加载 SQL 脚本

> ID：13621935
> 
> 赞同：1
> 
> 时间：2012-11-29T08:51:20.903
> 
> 标签：sql, spring, jdbc

我有一个包含许多方法的 DAO，每个方法都包含要执行的 SQL 语句。我不想将 SQL 字符串硬编码到 DAO Java 类中，那么管理这种场景的最佳方法是什么？我正在考虑注射它们，但如何最好地做到这一点？

干杯，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:13:27.507

您可以在应用程序初始化期间注入您的 SQL 语句。

```
class MyDAO {
   private String someQuery;

   public void setSomeQuery(String someQuery) {
       this.someQuery = someQuery;
   }

} 
```

然后，您可以将 SQL 语句放在 XML 文件中，而不是硬编码。

```
<bean class="some.package.MyDAO">
    <property name="someQuery">
        <value>
            SELECT * FROM user WHERE id = ?
        </value>
    </property>
</bean> 
```

您甚至可以将 SQL 语句外部化为`.properties`文件。

看看：[http ://www.summa-tech.com/blog/2009/04/20/6-tips-for-managing-property-files-with-spring/](http://www.summa-tech.com/blog/2009/04/20/6-tips-for-managing-property-files-with-spring/)

# mysql - MySQL外键定义？

> ID：13621936
> 
> 赞同：2
> 
> 时间：2012-11-29T08:51:21.813
> 
> 标签：mysql, database, foreign-keys, relational-database, foreign-key-relationship

我正在玩mysql，我发现了两种定义外键的方法：

```
CREATE TABLE posts(
    id INT NOT NULL AUTO_INCREMENT,
    user_id INT NOT NULL,
    post_title VARCHAR(255) NOT NULL,
    PRIMARY KEY(id),
    FOREIGN KEY name (user_id) REFERENCES users(id)
); 
```

和：

```
CREATE TABLE posts(
    id INT NOT NULL AUTO_INCREMENT,
    user_id INT NOT NULL,
    post_title VARCHAR(255) NOT NULL,
    PRIMARY KEY(id),
    CONSTRAINT name
        FOREIGN KEY(user_id) 
        REFERENCES users(id)
); 
```

这两者有什么区别？它们是否相同，只是您喜欢如何编写的偏好问题？还是有一些不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:58:20.680

如[`FOREIGN KEY`约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)中所述：

> `CREATE TABLE`or语句中 InnoDB 外键约束定义的语法`ALTER TABLE`如下所示：
> 
> ```
> [约束[*符号*]]外键
>     [ *index_name* ] ( *index_col_name* , ...)
>     参考*tbl_name* ( *index_col_name* ,...)
>     [ON DELETE*参考*选项]
>     [ON UPDATE*参考*选项]
> 
> *参考选项*：
>     限制 | 级联 | 设置空 | 无动作
> 
> ```
> 
> ***`index_name`***表示外键 ID。如果给定，如果明确定义了外键的索引，则忽略它。否则，如果`InnoDB`为外键创建索引，它将***`index_name`***用于索引名称。
> 
> 外键定义受以下条件约束：
> 
> `[ deletia ]`
> 
> *   如果给定子句，则该值在数据库中必须是唯一的。如果没有给出子句，则自动创建名称。`CONSTRAINT ***symbol***`***`symbol`***`InnoDB`
> 
> `[ deletia ]`
> 
> 如果在创建外键时`FOREIGN KEY`子句包含`CONSTRAINT`名称，则可以引用该名称来删除外键。否则，该***`fk_symbol`***值是`InnoDB`在创建外键时在内部生成的。

因此，您的第一个示例创建了一个自动命名的外键约束，其索引名为`name`（如果尚不存在）；而您的第二个示例创建了一个`name`以自动生成的索引名称命名的外键约束（如果尚不存在）。

除此之外，它们是相同的。

# postgresql - SQL 代码中的语法错误

> ID：13621938
> 
> 赞同：3
> 
> 时间：2012-11-29T08:51:23.463
> 
> 标签：postgresql, syntax-error

我遇到了一个奇怪的语法错误，请帮助我解决它。

```
WITH A as (
SELECT ambtemp,
       date_trunc('hour', dt)+
       CASE WHEN date_part('minute', dt) >= 30
            THEN interval '30 minutes'
            ELSE interval '0 minutes'
       END as t
FROM temm),

B as(
SELECT ambtemp,t,

       max(ambtemp::float(23)) OVER (PARTITION BY t) as max_temp,
       min(ambtemp::float(23)) OVER (PARTITION BY t) as min_temp
FROM A),

 H AS (
SELECT *      
FROM B
WHERE (max_temp - min_temp) <= 0.2 )

UPDATE temm
SET ambtemp = (NULL)
WHERE dt IN H 
```

正如您在代码中看到的，所有代码都正常运行，除了“WHERE dt IN H”，当我忽略这部分代码运行但存在代码时，我遇到了以下错误：

```
ERROR:  syntax error at or near "H"
LINE 25: WHERE dt IN H
                     ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:06:34.383

尝试这个：

```
UPDATE temm
SET ambtemp = (NULL)
WHERE dt IN ( SELECT ambtemp FROM H ) 
```

# django - Django 1.4：同一个 CharField 上的 PasswordInput 和 Placeholder

> ID：13621939
> 
> 赞同：3
> 
> 时间：2012-11-29T08:51:26.270
> 
> 标签：django, django-forms

Django 应该创建一个用于输入密码的 CharField，它也应该显示在 CharField 上：

在 HTML 中：`<input id="password" type="password" placeholder="Password" value="">`

对于[密码 CharField](https://code.djangoproject.com/wiki/PasswordField)我使用：

```
class AuthForm(forms.Form):
    username  = forms.CharField(label="Your Username" )
    pw = forms.CharField( widget=forms.PasswordInput(render_value=False), label="Your Password" ) 
```

对于占位符，我会使用：

```
pw = forms.CharField(widget=forms.TextInput(attrs={'placeholder': 'Password'})) 
```

* * *

解决方案：

它接缝你不需要`(render_value=False)`，所以解决方案是：

```
forms.CharField(widget=forms.PasswordInput(attrs={'placeholder': 'Password'})) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:57:20.473

根据要求复制粘贴；）

```
forms.CharField(widget=forms.PasswordInput(attrs={'placeholder': 'Password'})) 
```

# c# - 如何在客户资料项目中引用 system.design？

> ID：13621940
> 
> 赞同：0
> 
> 时间：2012-11-29T08:51:25.853
> 
> 标签：c#, .net, vb.net, .net-client-profile

我有一个纯粹由.net 客户端配置文件组成的项目。

我需要使用一个控制螺母，这个控制使用参考 system.design，它在客户端配置文件中不可用，

我无法更改我的项目框架，并且我需要这个库，所以我尝试将它拉出来并将其作为我项目的参考 dll，但没有用..

为了在客户端配置文件环境中使用 system.design，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:53:57.390

简单地说：你不能。

您必须更改目标框架或重新实现客户端配置文件的控件。

有关更多信息，请参阅[这篇 Scott Hanselman 文章的第六条评论。](http://www.hanselman.com/blog/TowardsASmallerNET4DetailsOnTheClientProfileAndDownloadingNET.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:10:38.603

*这假定您的解决方案以 .NET Framework 版本 3.5 或 4.0 为目标以使用客户端配置文件。*

客户端配置文件只是将框架限制为允许某些程序集，因此基本上不可能引用此程序集。

您应该注意到的一件事是，在 .NET Framework 4.5 版中，Microsoft 取消了客户端配置文件，因此期待，如果您要构建针对 .NET Framework 4.5 版的解决方案，您将只能无论如何都要使用完整配置文件，在这种情况下，是的，您可以引用此程序集。

# wpf - 如何绑定到 DataContext 项的父项的属性？

> ID：13621946
> 
> 赞同：0
> 
> 时间：2012-11-29T08:51:48.507
> 
> 标签：wpf, binding

我在 StackPanel 容器中有一组控件，在用户控件中，将不同的属性绑定到作为容器的 DataContext 的项目，设置为 {Binding MyItem}

如果 MyItem 对象具有指向其父级的属性，我将如何将这些控件之一绑定到此 MyItem 的逻辑父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:06:30.523

如果 MyItem 有一个指向其父级的属性，那么您可以直接使用该属性来引用父级。没有什么特别的要求，比如：

```
{Binding Parent.PropertyName} 
```

（除非我误解了这个问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:08:44.490

事实证明 {Binding Path=Parent.IsEnabled} 就足够了，前提是作为 DataContext 的项目具有公共属性 Parent。可能早期的错误是由于其他原因造成的。

# iphone - 在我的 iPhone 应用程序项目中出现内存泄漏我应该如何解决它？

> ID：13621955
> 
> 赞同：1
> 
> 时间：2012-11-29T08:52:26.337
> 
> 标签：iphone, ios, memory-leaks

我在我的 iOS 项目中使用的一种方法中出现内存泄漏。因为我是 iOS 开发的新手，所以我无法找出正在发生的事情。

[http://screencast.com/t/y2lOtssY2NjO](http://screencast.com/t/y2lOtssY2NjO)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T09:01:03.417

您在 alertView 上调用了两次 init。我认为这就是问题所在。

更改如下：

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:str message:kAlertMessage delegate:self cancelButtonTitle:nil otherButtonTitles:@"Install now", @"Cancel", nil]; 
```

请参考这个问题：[如果我多次调用 init 会发生什么](https://stackoverflow.com/questions/8036569/what-happens-if-i-call-nsobject-init-more-than-once-does-it-increase-retain-cou)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:03:08.023

`static analyser`指出`UIAlertView`在 .Initialize alertView 上的泄漏仅一次。

`UIAlertView *alert = [[UIAlertView alloc]initWithTitle:str`.....等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:57:36.533

您可以通过仪器找到这里的教程，[点击这里](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)将告诉您或 Xcode->product->analyze

# ruby-on-rails-3.1 - Faye 在网络中的另一台计算机上使用浏览器时不发布

> ID：13621961
> 
> 赞同：2
> 
> 时间：2012-11-29T08:52:45.127
> 
> 标签：ruby-on-rails-3.1, localhost, faye

我在我的 Rails 应用程序中有 faye 实现。当两个浏览器在同一台计算机上时，发布方法可以正常工作。当我从另一台计算机上的另一个浏览器访问该应用程序时，它只能在客户端到服务器之间工作，而不会发布到其他客户端。此外，当服务器上的浏览器发生更改时，发布事件也不会推送到客户端。
**控制器发布代码：**

```
def publish(channel, data)
    message = {
      :channel => channel,
      :data => data,
      :ext => {:faye_token => FAYE_OUTGOING_AUTH_TOKEN}
    }
    uri = URI.parse('http://localhost:9292/faye')
    Net::HTTP.post_form(uri, :message => message.to_json)
end 
```

**运行 faye 的命令：**

```
rackup faye.ru -s thin -E production -d 
```

示例：
A：服务器，B：客户端 1，C：客户端 2

AB 和 C 是同一网络中的不同计算机，并且都订阅了同一频道。

1.  如果我在 B 上输入数据，A 会看到数据，但 C 在刷新页面之前不会看到数据（这是从 db 获取数据）。
2.  如果我在 A 上输入数据，它不会发布给其他客户端。
3.  如果我在 C 上输入数据到只有 C 和 B 订阅的频道，只有 C 可以看到数据，并且不会发布到 B。

如果 A、B 和 C 是同一台计算机上的不同浏览器，则上述所有情况都可以工作。

我已经在开发模式下运行了它，并尝试过 WEBrick、Unicorn 和 Thin。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:24:56.173

为了解决这个问题，我将所有“localhost”实例替换为运行 Faye 的服务器的地址。这也包括为客户订阅频道。

希望它有帮助，干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T07:56:26.743

Hey Babak：我也面临同样的问题，我正在使用 nodejs + express + faye。所以我应该将 ip_addr:port 添加到每个订阅，客户端

```
var client = new Faye.Client('/faye',{
        endpoints:{
                 websocket:'http:ws.chat-yummyfoods.rhcloud.com'
              }
        ,timeout: 20
    });
client.disable('websocket');
console.log("client:"+client);
var subscription=client.subscribe('/channel', function(message) {
        console.log("Message:"+message.text);
        $('#messages').append('<p>'+message.text+'</p>');
    });
subscription.then(function(){
        console.log('subscribe is active');
        alert('subscribe is active');
    }); 
```

# jquery - 通过拖放以表单形式上传jquery图像

> ID：13621963
> 
> 赞同：1
> 
> 时间：2012-11-29T08:52:45.280
> 
> 标签：jquery, asp.net-mvc, drag-and-drop

我目前正在使用 asp.net mvc 4。我正在为最新的浏览器构建一个应用程序。起初，我用于上传。这工作得很好。然后我的雇主决定它必须通过拖放来工作。所以这就是我现在卡住的地方。

我在网上找到了一个不错的脚本，并对其进行了一些小修改。不过，我避开了上传功能。我确实删除了上传按钮。这是我正在谈论的脚本：http: [//www.inserthtml.com/2012/08/file-uploader/](http://www.inserthtml.com/2012/08/file-uploader/) 我在尝试一些东西时确实稍微调整了上传的图像。现在是

```
('#dropped-files').append('<div class="image" name="picture" id="Picture" style="left: ' + z + 'px; background: url(' + image + '); background-size: cover;"> </div>'); 
```

我用来处理上传的方法如下：

```
[HttpPost]
public ActionResult MyMethod(String authorEmail, string buyerEmail, HttpPostedFileBase picture,
                                                string comments, int legalUsageCategoryId) 
```

图片变量永远不会填写，除非我使用 type="file"。看到只有在提交表单时才需要上传图片，我该如何最好地处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:07:27.600

ProDinner 有这个

这是拖放上传的视频演示：http: [//youtu.be/12tePYmNsoM ?hd=1](http://youtu.be/12tePYmNsoM?hd=1)

你可以从这里下载：http: [//prodinner.codeplex.com](http://prodinner.codeplex.com)

并在这里现场试用：http: [//prodinner.aspnetawesome.com/meal](http://prodinner.aspnetawesome.com/meal)

# checkbox - 如何在 Ext JS 3.4 中取消选择第一行复选框

> ID：13621964
> 
> 赞同：0
> 
> 时间：2012-11-29T08:52:50.560
> 
> 标签：checkbox, default, extjs3

如何防止在加载我的网格（EditorGridPanel）时选择第一个复选框我的问题是它总是检查第一行。

我正在使用 Ext JS 3.4。

代码片段：

```
 var chkboxSelModelUser = new com.thecompany.ux.grid.CheckboxSelectionModel();
 var userGrid = new com.thecompany.ux.grid.EditorGridPanel({
    store: that.userStore,     
    selModel: chkboxSelModelUser
    region:'center',
    margins: '0 5 5 5',
    frame: false,
    border: false,
    columns: [chkboxSelModelUser, new com.thecompany.ux.grid.RowNumberer()
    ... 
 ]... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:51:45.013

如果你使用普通的 ExtJS 3.4 它不应该发生。通常在`viewready`事件处理程序中选择默认行。

看我的小提琴：http: [//jsfiddle.net/ak3vB/1/](http://jsfiddle.net/ak3vB/1/)

# javascript - 同步视图/数据加载

> ID：13621966
> 
> 赞同：0
> 
> 时间：2012-11-29T08:52:59.890
> 
> 标签：javascript, ajax

我将执行 2 个 AJAX 调用：

1.  加载 HTML 部分模板。
2.  加载模板的 JSON 数据并将其渲染到加载的模板中。

JSON 应该与模板分开加载，因为用户可以触发某种“刷新”操作。无法在第一个页面加载时加载模板，因为页面上有选项卡控件，并且每个选项卡都应“按需”加载。

所以让我们说一些`function loadData`被称为。所以我需要做以下事情：

1.  如果模板已加载，则转到步骤 3。
2.  **同时**发送 AJAX 用于模板使用`$().load`和 AJAX 用于 JSON 数据。事实上，我们可以将它们一起发送而无需等待模板加载，对吗？`$.getJSON`
***   如果 JSON 已加载，则检查模板是否已在此处。如果是这样，则将数据渲染到模板中。否则等待模板加载，然后在成功时渲染数据。**

 **所以我想知道这种活动的最佳做法是什么？有没有完整的解决方案？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:06:16.573

是的。您可以使用 jQuery Deferreds (http://api.jquery.com/category/deferred-object/) 来协调这一切。

JS代码：

```
var templatePromise = null;

function loadData() {
    if (!templatePromise) {
        templatePromise = $.get('templateUrl');
    }

    var dataPromise = $.getJSON('dataUrl');

    $.when(templatePromise, dataPromise)
        .done(function (template, data) {

            // you have both template and data. 

        })
        .fail(function () {
            // either the template or the data failed to be fetched properly.
        });
} 
```**

# php - 一个斜线添加到 coation 后的字符串 - PHP

> ID：13621970
> 
> 赞同：0
> 
> 时间：2012-11-29T08:53:23.413
> 
> 标签：php, mysql

为了将字符串插入数据库，我在字符串上应用了这个函数：

```
$string = strip_tags($string);
$string = htmlspecialchars($string);
$string = preg_replace('/\s+/', ' ', $string); // removing multiple spaces :-)
$string = preg_replace('/(?:\s\s+|\n|\t)/', ' ', $string);
$string = mysql_real_escape_string($string); 
```

在我测试应用程序时，在我的本地主机上，我输入：`Life's Interesting`

并且确切的字符串保存到db（Life's Interesting）中，然后我将我的应用程序上传到真实服务器上，当我输入相同的字符串时，它保存：`Life\'s Interesting`在数据库中！

为什么这*仅发生在服务器上而不是我的本地主机上*？我在我的本地主机上使用 Wamp。我需要在服务器上更改什么配置才能将其保存在数据库中？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:56:04.250

因为`magic_quotes_gpc`

```
var_dump(magic_quotes_gpc()) 
```

var_dump 在你的两台服务器中都引用了 gpc。你的真实服务器我认为魔术引号是默认启用的。

> Magic Quotes 是一个自动将传入数据转义到 PHP 脚本的过程。最好在关闭魔术引号的情况下进行编码，并根据需要在运行时转义数据。

更多阅读[PHP 手册 - 魔术引号](http://www.php.net/manual/en/security.magicquotes.whynot.php)

# java - JPA在同一个父类中两次映射相同的子关系（不同的基数）

> ID：13621972
> 
> 赞同：0
> 
> 时间：2012-11-29T08:53:45.273
> 
> 标签：java, hibernate, jpa, orm, entity-relationship

给定 2 个对象，Person 和 Phone，其中它们的关系是 Person(one)-Phone(many)。电话有变量类型，可以有 4 个可能的值：住宅、办公室、移动、传真。

是否可以在 Person 中映射电话关系两次，如下所示：

```
class Person {

   @OneToMany(mappedBy = "person")
   <Phone> phones; //this is for : Residential, Office, Fax only

   @OneToOne(mappedBy = "person")
   Phone mobile; //this is for Mobile
}

class Phone {
   @ManyToOne
   @JoinColumn(name = "person_fk")
   Person person;
} 
```

隔离的原因是有些屏幕我会显示手机号码但不需要加载其他电话号码，所以我想我不需要 jpa 将所有手机加载到列表中，只需要手机...

这是可以做到的吗？如果是这样，这是正常做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:00:39.063

我认为您的示例行不通，因为实际上`Phone`每个人都有多个 s 。Hibernate 不会区分手机并将手机映射到您的手机`mobile`

除非您为每种类型的手机子类化您的手机，并且给定您有一个`MobilePhone`类，否则您可以将您的手机更改`Person`为

```
class Person {

   @OneToMany(mappedBy = "person")
   <Phone> phones; //this is for : Residential, Office, Fax only

   @OneToOne(mappedBy = "person")
   MobilePhone mobile; //this is for Mobile
} 
```

这应该有效（我相信：P）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:01:03.397

你有没有尝试过？这是完全有效的，但你也可以考虑`Phone`用类型标记类（无论如何你都需要它来区分住宅、办公室等），除非你住在一个电话号码*很*长的国家，否则获取它们的开销一切都不是那么大:-)

干杯，

# c# - 在 C# 中移动文件

> ID：13621975
> 
> 赞同：21
> 
> 时间：2012-11-29T08:53:58.197
> 
> 标签：c#, file, move

我正在将一些图像（文件名是`(1).PNG`，`(2).PNG`等等）从一个目录移动到另一个目录。我正在使用以下代码：

```
for (int i = 1; i < n; i++)
{
    try
    {
        from = "E:\\vid\\(" + i + ").PNG";
        to = "E:\\ConvertedFiles\\" + i + ".png";
        File.Move(from, to); // Try to move
        Console.WriteLine("Moved"); // Success
    }
    catch (IOException ex)
    {
        Console.WriteLine(ex); // Write error
    }
} 
```

但是，我收到以下错误：

`System.IO.FileNotFoundException`mscorlib.dll 中发生了第一次机会类型的异常

```
System.IO.FileNotFoundException: Could not find file 'E:\vid\(1).PNG'. 
```

另外，我打算重命名文件，以便转换后的文件名为`00001.png`, `00002.png`, ...`00101.png`等等。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-29T09:00:26.087

我建议您使用`'@'`以便以更易读的方式转义斜杠。也可以`Path.Combine(...)`用来连接路径并`PadLeft`让您的文件名作为您的具体信息。

```
for (int i = 1; i < n; i++)
{
    try
    {
        from = System.IO.Path.Combine(@"E:\vid\","(" + i.ToString() + ").PNG");
        to = System.IO.Path.Combine(@"E:\ConvertedFiles\",i.ToString().PadLeft(6,'0') + ".png");

        File.Move(from, to); // Try to move
        Console.WriteLine("Moved"); // Success
    }
    catch (IOException ex)
    {
        Console.WriteLine(ex); // Write error
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T09:07:05.160

你为什么不使用这样的东西？

```
var folder = new DirectoryInfo(@"E:\vid\"));

if (folder.Exists)
{
    var files = folder.GetFiles(".png");
    files.toList().ForEach(f=>File.Move(from,to));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T08:57:19.683

异常意味着该文件`E:\vid(1).PNG`不存在。你的意思是`E:\vid1.PNG`？

使用`System.IO.Path`类构建路径，它比连接字符串更好。您不必担心转义反斜杠。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T08:57:46.877

```
i.ToString() 
```

可能会帮助你。你正在路过

```
from = "E:\\vid\\(" + i + ").PNG";
to = "E:\\ConvertedFiles\\" + i + ".png"; 
```

I 作为整数，因此连接不起作用，
而不是使用`\\`，`@`像这样添加

```
from = @"E:\vid\(" + i + ").PNG"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T10:21:06.187

我刚刚在 Visual Studio 中运行了它。有效。

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2

{

    class Program
    {
        static void Main()
        {
            int n = 3;
            for (int i = 1; i < n; i++)
            {
                string from = "C:\\vid\\(" + i + ").PNG";
                string to = "C:\\ConvertedFiles\\" + i + ".png";
                {
                    try
                    {
                        File.Move(from, to); // Try to move
                        Console.WriteLine("Moved"); // Success
                    }
                    catch (System.IO.FileNotFoundException e)
                    {
                        Console.WriteLine(e); // Write error
                    }
                }
            }
        }
    }

} 
```

也许当您将文件移动到 vid 目录以开始测试时，windows 剃掉了括号。(1).png 变为 1.png...我从该现象中得到了一个文件未找到错误...否则，您的代码是可靠的。我的版本几乎相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-15T18:07:59.923

```
var folder = new DirectoryInfo(sourcefolder);

if (folder.Exists)
{
    var files = folder.GetFiles("*.png");
    files.ToList().ForEach(f => File.Move(sourcefolder + f, newFolderName + f));
} 
```

我相信这会有所帮助。

# php - 基于传入 URL 的重定向

> ID：13621982
> 
> 赞同：0
> 
> 时间：2012-11-29T08:54:21.560
> 
> 标签：php, wordpress, redirect

我刚刚将一个很久以前编写的网站迁移到 wordpress。

这样做会导致现在使用 mod-rewrite 的 url 结构有所不同。在我将新网站上线后，我意识到已经发送了一些电子邮件供客户使用旧 URL 从该网站兑换他们的礼券。

我的问题是，使用 htaccess 是否有我可以执行的 url 重定向并保留获取信息。例如，我需要这个网址：

`www.test.com/redeem.php?id=123`

重定向到：

`www.test.com/redeem/now/?id=123`

如果没有解决方案`.htaccess`，是否有人对 PHP 有任何解决方案？

这是我的 htaccess 文件现在的样子：

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </IfModule> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:04:32.403

是否会如你所愿

```
http://test.com/redeem/now/read/2 
```

.htaccess

```
 # BEGIN WordPress
 <IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteRule ^index\.php$ - [L] 
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
 </IfModule>
 # END WordPress 
```

[使用永久链接 wordpress](http://codex.wordpress.org/Using_Permalinks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:48:25.683

我最终做的是在头文件中编写这段代码并且它可以工作。

```
 <?php 
   if (array_shift(explode('?', $_SERVER['REQUEST_URI'])) == "/redeem.php") {
      header ('Location: /gift-certificates/redeem/?id=' . $_GET["id"] );
   }?> 
```

# jsp - 如何在 Servlet 中发送重定向到 JSP 页面

> ID：13621998
> 
> 赞同：29
> 
> 时间：2012-11-29T08:55:19.513
> 
> 标签：jsp, redirect, servlets

当我在 servlet 中完成处理并且结果有效时，我需要将响应重定向到另一个 JSP 页面，比如`welcome.jsp`在 web 内容文件夹中。我该怎么做？

例如：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {

         // Some processing code here ...

         // How do I redirect to another JSP here when I'm ready?

    } catch (Exception e) {
        throw new ServletException(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-29T09:13:38.407

看[`HttpServletResponse#sendRedirect(String location)`](https://javaee.github.io/javaee-spec/javadocs/javax/servlet/http/HttpServletResponse.html#sendRedirect-java.lang.String-)方法。

将其用作：

```
response.sendRedirect(request.getContextPath() + "/welcome.jsp") 
```

或者，看[`HttpServletResponse#setHeader(String name, String value)`](https://javaee.github.io/javaee-spec/javadocs/javax/servlet/http/HttpServletResponse.html#setHeader-java.lang.String-java.lang.String-)方法。

通过添加位置标头来设置重定向：

```
response.setHeader("Location", request.getContextPath() + "/welcome.jsp"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T09:20:29.833

请使用下面的代码让我知道

```
try{

            Class.forName("com.mysql.jdbc.Driver").newInstance();
            con = DriverManager.getConnection(c, "root", "MyNewPass");
            System.out.println("connection done");

            PreparedStatement ps=con.prepareStatement(q);
            System.out.println(q);
            rs=ps.executeQuery();
            System.out.println("done2");
            while (rs.next()) {
               System.out.println(rs.getString(1));
               System.out.println(rs.getString(2));

            }

         response.sendRedirect("myfolder/welcome.jsp"); // wherever you wanna redirect this page.

        }
            catch (Exception e) {
                // TODO: handle exception
                System.out.println("Failed");
            } 
```

**`myfolder/welcome.jsp`**是您`jsp`页面的相对路径。因此，请根据您的`jsp`页面路径进行更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-25T16:56:41.840

```
 String u = request.getParameter("username");
    String p = request.getParameter("password");

    try {
        st = con.createStatement();
        String sql;
        sql = "SELECT * FROM TableName where USERNAME = '" + u + "' and PASSWORD = '"
                + p + "'";
        ResultSet rs = st.executeQuery(sql);
        if (rs.next()) {
            RequestDispatcher requestDispatcher = request
                    .getRequestDispatcher("/home.jsp");
            requestDispatcher.forward(request, response);
        } else {

            RequestDispatcher requestDispatcher = request
                    .getRequestDispatcher("/invalidLogin.jsp");
            requestDispatcher.forward(request, response);

        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    finally{
        try {
            rs.close();
            ps.close();
            con.close();
            st.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# multithreading - 如何在 Qt 中使用信号和插槽进行线程间通信

> ID：13621999
> 
> 赞同：1
> 
> 时间：2012-11-29T08:55:19.170
> 
> 标签：multithreading, qt, slot

我想制作一个应用程序，用户将在其中点击 QPushButton，这将触发辅助线程，该线程将向主窗口中的 QListWidget 添加一些文本。但是由于我无法弄清楚的原因，尽管从线程到主窗口的信号被发出，但它永远不会到达目的地。可能是因为连接失败。但是为什么会发生这种情况是我的代码（我的应用程序是使用 Visual Studio 2010 编译的）：

我的线程.h

```
#ifndef MY_THREAD_H
#define MY_THREAD_H
#include <QThread>
#include <QString>
class mythread:public QThread
{
    Q_OBJECT

public:
    void setName(QString& name);
signals:
    void sendMsg(QString& msg);
protected:
    void run();
private:
    QString m_name;
    QString msg;
};
#endif 
```

我的线程.cpp

```
#include "mythread.h"
void mythread::setName(QString& name)
{
    m_name=name;
}
void mythread::run()
{
    msg="Hello "+m_name;
    emit sendMsg(msg);
} 
```

mydialog.h：

```
#ifndef MY_DIALOG_H
#define MY_DIALOG_H
#include <QtGui>
#include "mythread.h"
class mydialog:public QDialog
{
    Q_OBJECT
public:
    mydialog();
public slots:
    void receiveMsg(QString& msg);
    void fillList();
private:
    QListWidget list1;
    QPushButton btn1;
    QGridLayout layout;
    mythread thread;
};
#endif 
```

mydialog.cpp：

```
#include "mydialog.h"
mydialog::mydialog()
{
    layout.addWidget(&list1,0,0);
    btn1.setText("Find");
    layout.addWidget(&btn1,0,1);
    setLayout(&layout);
    QString myname="leonardo";
    thread.setName(myname);
    connect(&btn1,SIGNAL(clicked()),this,SLOT(fillList()));
    connect(&thread,SIGNAL(sendMsg(QString&)),this,SLOT(receiveMsg(Qstring&)));
}
void mydialog::fillList()
{
    thread.start();
}
void mydialog::receiveMsg(QString& msg)
{
    list1.addItem(msg);
} 
```

查找.cpp：

```
#include <QApplication>
#include "mydialog.h"
int main(int argc,char* argv[])
{
    QApplication app(argc,argv);
    mydialog window;
    window.setWindowTitle("Find");
    window.show();
    return app.exec();
} 
```

查找.pro：

```
TEMPLATE = app
TARGET = 
DEPENDPATH += .
INCLUDEPATH += .

# Input
HEADERS += mydialog.h mythread.h
SOURCES += find.cpp mydialog.cpp mythread.cpp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:30:01.027

两件事情：

1.  在您的第二次连接呼叫中，`Qstring`必须更改为`QString`
2.  默认情况下， Qt 不能`QString&`跨线程传递。有两种方法可以解决这个问题：
    1.  更改您的信号和插槽以及连接以使用`QString`而不是`QString&`
    2.  使用[qRegisterMetaType](https://doc.qt.io/qt-5/qmetatype.html#qRegisterMetaType)以使其`QString&`可用。

我仍然建议阅读

[https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong](https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong)

和卡里的评论

[https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong#commento-comment-name-a6fad43dec11ebe375cde77a9ee3c4331eb0c5f0bcac478ecbe032673e8ebc82](https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong#commento-comment-name-a6fad43dec11ebe375cde77a9ee3c4331eb0c5f0bcac478ecbe032673e8ebc82)

但是，在使用线程时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:11:28.013

`const`如果您不打算修改它，首先使用限定符作为参数。在修复连接中的错字`SLOT(receiveMsg(Qstring&))`并将信号和插槽签名更改为 const 引用后一切正常