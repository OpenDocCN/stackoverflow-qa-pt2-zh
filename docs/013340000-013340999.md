# StackOverflow 问答 13340000-13340999

# ruby-on-rails - 为什么 Rails.cache.fetch 的 :race_condition_ttl 选项仍然阻塞第一个请求？

> ID：13340000
> 
> 赞同：3
> 
> 时间：2012-11-12T07:53:22.210
> 
> 标签：ruby-on-rails, caching

Rails.cache.fetch 的 :race_condition_ttl 选项似乎非常接近我想要的：[http ://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html#method-i-fetch](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html#method-i-fetch)

但它似乎仍然阻止遇到过期值的第一个请求（只有在此之后的后续请求才会获取旧值并在更新缓存时快速返回）。

我想我很惊讶它没有以同样的方式服务第一个过期的请求，并且想知道是否有一个共同的模式或者它是否必须是自定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:14:38.550

我现在用猴子修补了这样的东西：[https ://gist.github.com/4062316](https://gist.github.com/4062316)

不确定它有多安全，但似乎正在工作。不过，在标准的 Rails.cache 中看到这样的东西会很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T12:51:23.050

我使用了另一种方法来解决这个问题：**不要设置 expires_in，只有在管理员请求时才强制缓存未命中。**

我在两个环境中有 Rails 应用程序：管理员和生产。生产永不过期缓存。管理员总是在页面上强制缓存未命中。

一旦你建立了所有的缓存。它永不过期。除非您可以从管理员那里执行此操作。由于管理员可以保证第一次访问这些网页，使用 :race_condition_ttl，这种方法效果很好。

# ssrs-2008 - 在第一页或最后一页隐藏页脚保留页脚空间

> ID：13340003
> 
> 赞同：0
> 
> 时间：2012-11-12T07:53:43.497
> 
> 标签：ssrs-2008

在第一页或最后一页隐藏页脚保留页脚空间如果您在第一页或最后一页隐藏页脚，SSRS 会为页眉保留空间，但它会隐藏内容。我如何使用这个空间，因为它影响我的设计（一些记录表在下一页中单独查看）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:56:59.020

通常当您隐藏**页眉/页脚**时，空间将可供您使用

通常在**报表属性**中您可以设置边距顶部，底部以满足您的要求，
并且可能是[报表正文](http://msdn.microsoft.com/en-us/library/dd255278.aspx)和边距需要一些调整。

如果您的所有报告元素都在限制范围内`[Width, Height]`，**`Report Body`**那么您的报告应该可以正常呈现。

# c++ - MFC项目组合：如何将没有文档类的SDI应用程序添加到MDI应用程序中？应该使用子窗口吗？[MFC]

> ID：13340011
> 
> 赞同：1
> 
> 时间：2012-11-12T07:54:12.850
> 
> 标签：c++, view, mfc, mdi

我现在正在使用 MDI MFC 应用程序并希望向该应用程序添加控制台/命令行功能。我想从 QuickWin（见下文）中获得的唯一功能是使用它的文本区域和捕获输入的过程功能。如果我可以将它添加到弹出对话框或停靠栏，那就太好了！我得到了一个没有像这样的文档类的 SDI 应用程序的 src 代码（[链接：http://www.codeproject.com/.../QuickWin-...](http://www.codeproject.com/Articles/777/QuickWin-Turn-a-console-application-into-a-Windows)）：

我的问题是：我可以将应用程序添加到我的 MDI 应用程序中，以及如何处理源文件或头文件，例如：MainFrm.cpp/MainFrm.h 和类：CQuickWinApp/CQuickView？（如果我可以弹出一个子窗口来实现功能，更好:))

![在此处输入图像描述](../Images/dfeb1a6f7ad00f33991a3b27241cb281.png)

*在QuickWin的大型机中，它与客户区有关，处理起来比较困难：*

```
BOOL CMainFrame::OnCreateClient(LPCREATESTRUCT lpcs, CCreateContext* pContext) 
{
    // create splitter without views
    m_wndSplitter.CreateStatic(this, 2, 1);

    CCreateContext Context;
    Context.m_pNewViewClass = RUNTIME_CLASS(CQuickView);
    Context.m_pCurrentDoc = NULL;
    Context.m_pNewDocTemplate = NULL;
    Context.m_pLastView = NULL;
    Context.m_pCurrentFrame = this;

    // Create the Stdio QuickView
    m_pStdioView  = (CQuickView*)CreateView(&Context, AFX_IDW_PANE_FIRST);
    if (m_pStdioView == NULL)
    {
        TRACE("Failed to create QuickWin Stdio View\n");
        return FALSE;       // fail to create
    }

    // Create the Stderr QuickView
    m_pStderrView  = (CQuickView*)CreateView(&Context, AFX_IDW_PANE_FIRST);
    if (m_pStderrView == NULL)
    {
        TRACE("Failed to create QuickWin Stderr View\n");
        return FALSE;       // fail to create
    }
    m_pStderrView->SetReadOnly(TRUE);

    ShowSplitter(theApp.m_bShowSplitter);
    return TRUE;
} 
```

在我的 MDI 应用程序中：

MDI 应用程序有 3 个文档模板：

//BCGPVisualStudioGUIDemo.cpp

```
m_pDocTemplateCpp = new CMultiDocTemplate(
    IDR_BCGDEVTYPE_CPP,
    RUNTIME_CLASS(CBCGPVisualStudioGUIDemoDoc),
    RUNTIME_CLASS(CChildFrame), // custom MDI child frame
    RUNTIME_CLASS(CBCGPVisualStudioGUIDemoView));
AddDocTemplate (m_pDocTemplateCpp);

m_pDocTemplateWeb = new CMultiDocTemplate(
    IDR_BCGDEVTYPE_WEB,
    RUNTIME_CLASS(CBCGPVisualStudioGUIDemoDoc),
    RUNTIME_CLASS(CChildFrame), // custom MDI child frame
    RUNTIME_CLASS(CBCGPVisualStudioGUIDemoView));
AddDocTemplate (m_pDocTemplateWeb);

m_pStartDocTemplate = new CMultiDocTemplate(
    IDR_BCGDEVTYPE0,
    RUNTIME_CLASS(CNetworkMapEditorDemoDoc),
    RUNTIME_CLASS(CChildFrame), // custom MDI child frame
    RUNTIME_CLASS(CNetworkMapEditorDemoView));
AddDocTemplate(m_pStartDocTemplate); 
```

该应用程序还有一些停靠栏：

//MainFrm.cpp

```
 //------------------
    // Create config bar:
    //------------------    

if (!m_wndClassView.Create (_T("config"), this, CRect (0, 0, 200, 200),
        TRUE, 
        ID_VIEW_CLASS,
        WS_CHILD | WS_VISIBLE | WS_CLIPSIBLINGS | WS_CLIPCHILDREN | CBRS_LEFT | CBRS_FLOAT_MULTI))
    {
        TRACE0("Failed to create Class View bar\n");
        return FALSE;      // fail to create
    }

    //------------------
    // Create output bar:
    //------------------

    if (!m_wndOutputView.Create (_T("output"), this, CRect (0, 0, 200, 100),
        TRUE, 
        ID_VIEW_OUTPUT,
        WS_CHILD | WS_VISIBLE | WS_CLIPSIBLINGS | WS_CLIPCHILDREN | CBRS_BOTTOM | CBRS_FLOAT_MULTI))
    {
        TRACE0("Failed to create output bar\n");
        return FALSE;      // fail to create
    }

    //------------------
    // Create help bar:
    //------------------

    if (!m_wndDynamicHelpView.Create (_T("help"), this, CRect (0, 0, 200, 200),
        TRUE, 
        ID_VIEW_DYNAMICHELP,
        WS_CHILD | WS_VISIBLE | CBRS_RIGHT | CBRS_FLOAT_MULTI))
    {
        TRACE0("Failed to create Dynamic Help Bar\n");
        return FALSE;       // fail to create
    }

    //------------------
    // Create watch bar:
    //------------------

    if (!m_wndWatchBar.Create (_T("watch"), this, CRect (0, 0, 300, 100),
        TRUE, 
        ID_VIEW_WATCH,
        WS_CHILD | WS_VISIBLE | WS_CLIPSIBLINGS | WS_CLIPCHILDREN | CBRS_BOTTOM | CBRS_FLOAT_MULTI))
    {
        TRACE0("Failed to create watch bar\n");
        return FALSE;      // fail to create
    }

    //------------------
    // Create property bar:
    //------------------

    if (!m_wndPropertiesBar.Create (_T("property"), this, CRect (0, 0, 300, 200),
        TRUE, 
        ID_VIEW_PROPERTIES,
        WS_CHILD | WS_VISIBLE | WS_CLIPSIBLINGS | WS_CLIPCHILDREN | CBRS_RIGHT | CBRS_FLOAT_MULTI))
    {
        TRACE0("Failed to create Properties Bar\n");
        return FALSE;       // fail to create
    } 
```

*我可以将 QuickWin 应用程序的文本功能添加到我的应用程序的停靠栏或文档模板或只是一个弹出窗口中吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:24:48.810

将 QuickWin 的功能集成到应用程序中所需的只是 3 个文本框（一个用于标准输入、标准输出和标准错误）以及 Quickwin 项目中的以下类：

*   重定向
*   目录
*   CParamDlg（只是视觉上的绒毛，不是必需的）

CRedirect 类管理新进程的创建以及 stdin/stdout/stderr 的重定向（与 CRedir 结合使用）。

您必须修改`CRedir::OnChildWrite`和 -Started 和 -Terminate 以满足您的需求。这些方法实际上将内容写入视图/文本框/任何东西。查看`CMainFrame::OnCopyData`和`CQuickView::Append`了解如何做到这一点很有帮助。

# cakephp - CakePHP 可包含查找中的多个 HABTM 关联

> ID：13340013
> 
> 赞同：1
> 
> 时间：2012-11-12T07:54:27.600
> 
> 标签：cakephp, find, associations, has-and-belongs-to-many, contain

我在两个模型之间有 HABTM 关联，​​但只能找到返回一个级别。我可以通过其他关联返回多个级别，但我认为我必须在 HABTM 中遗漏一些东西。

**控制器/SchedulesController.php**

```
$this->Schedule->find('first', array(
  'contain' => array(
    'Association' => array(
      'Schedule'
    )
  )
)); 
```

**模型/Schedule.php**

```
public $actsAs = array('Containable');
public $hasAndBelongToMany = array(
  'Association'
); 
```

**模型/关联.php**

```
public $actsAs = array('Containable');
public $hasAndBelongsToMany = array(
  'Schedule'
); 
```

目前我只得到...

```
array(
  'Schedule' => array(
     ...
  ),
  'Association' => array(
    (int) 0 => array(
      ...
    'AssociationsSchedule' => array(
      ...
    )
  )
) 
```

...但我想要时间表 -> 协会 -> 时间表

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T01:41:19.103

虽然 contains() 应该可以工作，但另一个选项是`recursive`在 find 之前使用该选项，如下所示：

```
$this->Schedule->recursive = 3; //2 might work, but I think you need 3 levels
$this->Schedule->find('first'); 
```

[还值得一提的是，这里](https://stackoverflow.com/a/12515931/1473653)也提出了类似的问题。

# wordpress - 所有评论在 Wordpress 上的评论作者链接

> ID：13340016
> 
> 赞同：0
> 
> 时间：2012-11-12T07:54:44.003
> 
> 标签：wordpress, comments

[在 Wordpress 上评论作者链接](https://stackoverflow.com/questions/2742246/comment-author-link-on-wordpress)

这是基于上述帖子中提供的解决方案的问题。

对于那些没有链接的人，它在那里替换了评论作者链接。是否可以对所有评论执行此操作。（所有评论作者都将链接到作者页面”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:32:37.080

你试试这个怎么样

```
function force_comment_author_url($comment)
{
    // does the comment have a valid author URL?
    $no_url = !$comment->comment_author_url || $comment->comment_author_url == 'http://';

    $comment->comment_author_url = get_author_posts_url($comment->user_id);

   return $comment;
}
add_filter('get_comment', 'force_comment_author_url'); 
```

[get_author_posts_url](http://codex.wordpress.org/Function_Reference/get_author_posts_url)文档

# php - 正则表达式提取字符串的一部分

> ID：13340023
> 
> 赞同：1
> 
> 时间：2012-11-12T07:55:02.603
> 
> 标签：php, regex, string

我有以下来自核心银行系统的交易格式

```
This is a <test>  and only <test> hope <u> understand 
```

从我想要的地方

```
<test><test><u> (along with <>) 
```

使用简单的子字符串我可以做到这一点，但它会太慢..有没有办法在`< and >`使用正则表达式函数之间捕获文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:34:10.103

我能想到的最简单的方法是使用`preg_match_all()`然后`join()`将结果一起形成最终的字符串：

```
function get_bracketed_words($str) 
{
    if (preg_match_all('/<[a-z]+>/', $str, $matches)) {
        return join('', $matches[0]);
    }
    return '';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:03:37.467

如果你使用这个，它应该不会太慢（这里以 Perl 代码为例）：

```
while (my $line = <FILE>) {
    my ($request) = ($line =~ /RequestArray:(.*)/);
    next unless $request;
    # here, you can split $requests to sub-pieces using another regex
    # ...
} 
```

# c# - 带有可选参数的 C# 递归函数

> ID：13340027
> 
> 赞同：4
> 
> 时间：2012-11-12T07:55:26.383
> 
> 标签：c#, .net-4.0, recursion, optional-parameters

我遇到了`optional parameters`问题`recursive functions`

这是一个示例代码：

```
private static void RecursiveFunction(int x, int optional = 0)
{
    if (x < 5)
        RecursiveFunction(x + 1, optional++);
} 
```

调用函数时：

```
RecursiveFunction(0); 
```

我得到了以下结果（只需`string.Format("{0} - {1}", x, optional)`在即时窗口中调用此代码）：

```
"0 - 0"
"1 - 0"
"2 - 0"
"3 - 0"
"4 - 0" 
```

我在这里错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T07:57:12.607

更改自：

```
RecursiveFunction(x + 1, optional++);
//                               ^^ 
```

至：

```
RecursiveFunction(x + 1, ++optional);
//                       ^^ 
```

第一个执行操作，然后递增`optional`。
第二个在递增后执行操作`optional`。

来自[MSDN](http://msdn.microsoft.com/en-us/library/36x43w8w%28v=vs.71%29.aspx)：

```
++ var
var ++ 
```

> 第一种形式是前缀递增操作。操作的结果是操作数增加后的值。
> 
> 第二种形式是后缀递增操作。操作的结果是操作数在递增之前的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T07:57:38.337

你先跟注`RecursiveFunction`，然后再增加`optional`。你需要先增加它。

```
private static void RecursiveFunction(int x, int optional = 0)
{
    if (x < 5)
        RecursiveFunction(x + 1, ++optional);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T07:58:34.310

您需要在调用之前递增

```
RecursiveFunction(x + 1, ++optional); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T07:57:20.297

在您的方法调用中使用`++optional`而不是。`optional++`

通过使用`optional++`，您不会将增量值作为参数传递给函数，而是`0`传递给每个函数调用。你的电话应该是：

```
RecursiveFunction(x + 1, ++optional); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T07:57:48.370

是的，

你需要做`++optional`而不是`optional++`

# android - AlarmManager：除非我手动更改日期，否则不会触发警报

> ID：13340029
> 
> 赞同：1
> 
> 时间：2012-11-12T07:55:30.350
> 
> 标签：android, android-intent, alarmmanager

我有一个应该在每天凌晨 12 点运行的闹钟（它不是重复的闹钟，我每次需要 cz 时都会设置它，在某些情况下我不想让它运行）

```
Intent myIntent = new Intent(AlarmService.this, AlarmService.class);
pendingIntent = PendingIntent.getService(this, 0, myIntent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY, 12);
cal.set(Calendar.AM_PM, Calendar.AM);
cal.set(Calendar.MINUTE, 0);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);
cal.add(Calendar.DAY_OF_MONTH, 1);
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

奇怪的是，如果我手动将日期/时间更改为第二天的凌晨 12 点，就会触发警报。但是，如果我将时间设置为今天晚上 11:59 并等到凌晨 12 点，则没有任何反应，如果时间/日期是自动设置的，它也不会在上午 12 点触发。知道为什么会这样，或者我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:08:36.583

你的代码有一些问题，看看[这个](http://blog.mikesir87.io/2013/04/android-creating-an-alarm-with-alarmmanager/)我在它完美之前使用它，它会改进你的代码。

# delphi - 在 Delphi 中更改 GroupBox 的边框颜色

> ID：13340031
> 
> 赞同：3
> 
> 时间：2012-11-12T07:55:42.203
> 
> 标签：delphi, colors, border, groupbox

如何在 Delphi 中更改 GroupBox 的边框颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-12T09:58:25.367

示例源代码来自[这里](http://elists.org/pipermail/delphi-talk/2003-November/018524.html)：

```
(*
TEXSColoredGroupBox - Eddie Shipman

 TGroupBox that allows colored and flat colored bevels.

 Added three properties:
*******************************************************************************
 property: - BevelShadowColor-

    This is the color of the Bevel's Shadow, Default clBtnShadow.
    Change this color to change the color of the Bevel's Shadow.

*******************************************************************************
 property: BevelHighlightColor-

    This is the color of the Bevel's Highlight, Default clBtnHighlight.
    Change this color to change the color of the Bevel's Highlight.

*******************************************************************************
 property: BevelWidth-

    This is the width of the Bevel.

*******************************************************************************
  This component will also draw the frame in "flat mode" if Ctl3D is False
  using the BevelShadowColor.

  It still has some problems with redrawing controls in design-time but it is
  usable...

*******************************************************************************
*)
unit ColoredBorderGroupBox;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  ExtCtrls, StdCtrls;

type
  TEXSColoredGroupBox = class(TGroupBox)
  private
    { private declarations }
    FBevelLowColor: TColor;
    FBevelHiColor : TColor;
    FBevelWidth : Integer;
    procedure SetBvlLowColor(Value: TColor);
    procedure SetBvlHiColor(Value: TColor);
    procedure SetBevelWidth(Value: Integer);
    procedure CMDialogChar(var Message: TCMDialogChar); message CM_DIALOGCHAR;
    procedure CMTextChanged(var Message: TMessage); message CM_TEXTCHANGED;
    procedure CMCtl3DChanged(var Message: TMessage); message CM_CTL3DCHANGED;
    procedure WMSize(var Message: TMessage); message WM_SIZE;
  protected
    { protected declarations }
    procedure CreateParams(Var Params:TCreateparams); override;
    procedure Paint; override;
    procedure SetParent(AParent:TWinControl); override;
    procedure AlignControls(AControl: TControl; var Rect: TRect); override;
    procedure DrawFrame(Rect:TRect);
    procedure DrawFlatFrame(Rect:TRect);
    procedure InvalidateFrame;
  public
    { public declarations }
    Constructor Create(AOwner:TComponent); override;
  published
    { published declarations }
    property BevelShadowColor :TColor read FBevelLowColor
                                        write SetBvlLowColor;
    property BevelHighlightColor:TColor read FBevelHiColor
                                        write SetBvlHiColor;
    property BevelWidth :Integer read FBevelWidth
                                        write SetBevelWidth
                                      default 1;
    property Align;
    property Caption;
    property Color;
    property Ctl3D;
    property DragCursor;
    property DragMode;
    property Enabled;
    property Font;
    property ParentColor;
    property ParentCtl3D;
    property ParentFont;
    property ParentShowHint;
    property PopupMenu;
    property ShowHint;
    property TabOrder;
    property TabStop;
    property Visible;
    property OnClick;
    property OnDblClick;
    property OnDragDrop;
    property OnDragOver;
    property OnendDrag;
    property OnEnter;
    property OnExit;
    property OnMouseDown;
    property OnMouseMove;
    property OnMouseUp;
    property OnStartDrag;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('SST', [TEXSColoredGroupBox]);
end;

constructor TEXSColoredGroupBox.Create (AOwner: TComponent);
begin
  inherited Create(AOwner);
    ControlStyle := [csAcceptsControls, csCaptureMouse, csClickEvents,
    csSetCaption, csDoubleClicks, csReplicatable];
  FBevelLowColor := clBtnShadow;
  FBevelHiColor := clBtnHighlight;
  FBevelWidth := 1;
end;

procedure TEXSColoredGroupBox.CreateParams(Var Params:TCreateparams);
begin
  inherited CreateParams (Params);
  with Params.WindowClass do
    Style := Style and not (CS_HREDRAW or CS_VREDRAW);
end;

procedure TEXSColoredGroupBox.Paint;
var
  H: Integer;
  R: TRect;
begin
  // No call to inherited needed.
  // inherited Paint;
  with Canvas do
  begin
    Font := Self.Font;
    H := TextHeight('0');
    R := Rect(0, H div 2 - 1, Width, Height);
    if Ctl3D then
    begin
      DrawFrame(R);
    end else
    begin
      Brush.Color := FBevelLowColor;
      DrawFlatFrame(R);
    end;
    if Text <> '' then
    begin
      R := Rect(8, 0, 0, H);
      Brush.Style := bsClear;
      DrawText(Handle, PChar(Text), Length(Text), R, DT_LEFT or DT_SINGLELINE
or
DT_CALCRECT);
      // **********************
  if not Enabled then
  begin
    OffsetRect(R, 1, 1);
    Canvas.Font.Color := clBtnHighlight;
    DrawText(Canvas.Handle, PChar(Text), Length(Text), R, DT_LEFT or
DT_SINGLELINE);
    OffsetRect(R, -1, -1);
    Canvas.Font.Color := clBtnShadow;
    DrawText(Canvas.Handle, PChar(Text), Length(Text), R, DT_LEFT or
DT_SINGLELINE);
  end
  else
    DrawText(Canvas.Handle, PChar(Text), Length(Text), R, DT_LEFT or
DT_SINGLELINE);
  // ****************************
      // DrawText(Handle, PChar(Text), Length(Text), R, );
    end;
  end;
end;

procedure TEXSColoredGroupBox.AlignControls(AControl: TControl; var Rect:
TRect);
begin
  Canvas.Font := Font;
  Inc(Rect.Top, Canvas.TextHeight('0'));
  InflateRect(Rect, -1, -1);
  if Ctl3d then InflateRect(Rect, -1, -1);
  inherited AlignControls(AControl, Rect);
end;

procedure TEXSColoredGroupBox.SetParent(AParent:TWinControl);
begin
  inherited SetParent(AParent);
  if Parent <> nil then
    SetWindowLong(Parent.Handle, GWL_STYLE,
       GetWindowLong(Parent.Handle, GWL_STYLE)
          and not WS_ClipChildren);
end;

procedure TEXSColoredGroupBox.SetBvlLowColor(Value: TColor);
begin
  if FBevelLowColor <> Value then
    FBevelLowColor := Value;
  InvalidateFrame;
  Realign;
end;

procedure TEXSColoredGroupBox.SetBvlHiColor(Value: TColor);
begin
  if FBevelHiColor <> Value then
    FBevelHiColor := Value;
  InvalidateFrame;
  Realign;
end;

procedure TEXSColoredGroupBox.DrawFrame(Rect: TRect);
var
  CaptionLength: Integer;
begin
  with Canvas do
  begin
    Inc(Rect.Left, FBevelWidth); // 0,5 199,5
    Inc(Rect.Top, FBevelWidth); //
    Dec(Rect.Right, FBevelWidth); //
    Dec(Rect.Bottom, FBevelWidth); // 0,198 198,198
    CaptionLength := TextWidth(Text); //
    Pen.Color := FBevelHiColor; //
    Pen.Width := FBevelWidth; // 1,7 200,7
    MoveTo(Rect.Left, Rect.Top); //
    LineTo(6,Rect.Top); //
    MoveTo(8+CaptionLength+2, Rect.Top); // 1,200 200,200
    LineTo(Rect.Right,Rect.Top); //
    LineTo(Rect.Right,Rect.Bottom);
    LineTo(Rect.Left,Rect.Bottom);
    LineTo(Rect.Left, Rect.Top);
    Pen.Color := FBevelLowColor;
    Pen.Width := FBevelWidth;
    OffsetRect(Rect, -FBevelWidth, -FBevelWidth);
    MoveTo(Rect.Left, Rect.Top);
    LineTo(6,Rect.Top);
    MoveTo(8+CaptionLength+2, Rect.Top);
    LineTo(Rect.Right,Rect.Top);
    LineTo(Rect.Right,Rect.Bottom);
    LineTo(Rect.Left,Rect.Bottom);
    LineTo(Rect.Left, Rect.Top);
  end;
end;

procedure TEXSColoredGroupBox.DrawFlatFrame(Rect: TRect);
var
  CaptionLength: Integer;
begin
  with Canvas do
  begin
    Dec(Rect.Right);
    Dec(Rect.Bottom);
    CaptionLength := TextWidth(Text);
    Pen.Color := FBevelLowColor;
    Pen.Width := FBevelWidth;
    MoveTo(Rect.Left, Rect.Top);
    LineTo(6,Rect.Top);
    MoveTo(8+CaptionLength+2, Rect.Top);
    LineTo(Rect.Right,Rect.Top);
    LineTo(Rect.Right,Rect.Bottom);
    LineTo(Rect.Left,Rect.Bottom);
    LineTo(Rect.Left, Rect.Top);
  end;
end;

procedure TEXSColoredGroupBox.CMDialogChar(var Message: TCMDialogChar);
begin
  with Message do
    if IsAccel(CharCode, Caption) and CanFocus then
    begin
      SelectFirst;
      Result := 1;
    end else
      inherited;
end;

procedure TEXSColoredGroupBox.CMTextChanged(var Message: TMessage);
begin
  inherited;
  InvalidateFrame;
  Realign;
end;

procedure TEXSColoredGroupBox.CMCtl3DChanged(var Message: TMessage);
begin
  inherited;
  InvalidateFrame;
  Realign;
end;

procedure TEXSColoredGroupBox.WMSize(var Message: TMessage);
begin
  if (csDesigning in ComponentState) then
    InvalidateFrame;
  inherited;
end;

procedure TEXSColoredGroupBox.InvalidateFrame;
var
  R: TRect;
begin
  R := BoundsRect;
  InflateRect(R, 1, 1);
  If (Parent <> Nil) and Parent.HandleAllocated then
    InvalidateRect(Parent.Handle, @R, True)
  Else
    inherited Invalidate;
end;

procedure TEXSColoredGroupBox.SetBevelWidth(Value:Integer);
begin
  if Value <> FBevelWidth then
    FBevelWidth := Value;
  Repaint;
end;

end. 
```

# javascript - jQuery zclip 仅在第一次单击时不起作用

> ID：13340034
> 
> 赞同：1
> 
> 时间：2012-11-12T07:56:00.470
> 
> 标签：javascript, jquery, zclip

jJuery zclip 在第一次点击时不起作用。它适用于第二次点击？

```
<script type="text/javascript">  function initiateCopy(){

            $("a#copyDetails").zclip({
                path:'{% get_static_prefix %}scripts/ZeroClipboard.swf',
                copy:function(){
                                        userDetails = '';
                                        user = JSON.parse($("#copyDetails").attr('rel'));
                                        $.each(user, function(key, value) {
                                            userDetails += key+": "+value;
                                        });
                                        return userDetails;
                                    }
            });

        } </script> <a id="copyDetails" href="javascript:initiateCopy()">Copy Details</a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:13:47.123

复制事件的处理程序在initialCopy 方法中定义。

第一次点击标签时，运行initialCopy 并为zclip 添加事件处理程序。第二次，clip 事件被 zclip 捕获。

尝试：

```
<script type="text/javascript">  function initiateCopy(){

        $("a#copyDetails").zclip({
            path:'{% get_static_prefix %}scripts/ZeroClipboard.swf',
            copy:function(){
                                    userDetails = '';
                                    user = JSON.parse($("#copyDetails").attr('rel'));
                                    $.each(user, function(key, value) {
                                        userDetails += key+": "+value;
                                    });
                                    return userDetails;
                                }
        });

    }
    initiateCopy(); </script> <a id="copyDetails">Copy Details</a> 
```

如果可行，您可以使用 onready 或更优雅的东西。

# javascript - 黑莓中的 Facebook access_token 错误

> ID：13340036
> 
> 赞同：1
> 
> 时间：2012-11-12T07:56:07.517
> 
> 标签：javascript, facebook, cordova, blackberry

在我使用 phonegap 的黑莓应用程序中，我有 Facebook 共享功能，我正在使用 phonegap 的 childbrowser 执行此操作。登录 Facebook 后，将重新请求 access_token。为此，我使用以下代码：

```
$.ajax({
            url:'https://graph.facebook.com/oauth/access_token?client_id='+my_client_id+'&client_secret='+my_secret+'&redirect_uri=http://www.facebook.com/connect/login_success.html',
            data: {},
            dataType: 'text',
            type: 'POST',
            success: function(data, status){
                alert(22);
                // We store our token in a localStorage Item called facebook_token
                localStorage.setItem(facebook_token, data.split("=")[1]);
                                                    window.plugins.childBrowser.close();

                app.init();
            },
            error: function(error) {
                alert("fail"+error['message']);
                window.plugins.childBrowser.close();
            }
        }); 
```

但是控件没有进入成功部分，而是进入错误部分。可能是什么问题。当我尝试使用“ `alert("fail"+error['message']);`”查找错误时，它是未定义的。请帮我解决这个问题。

# image - 存储在 CDN (Amazon S3) 上的 Opencart 产品图像

> ID：13340039
> 
> 赞同：0
> 
> 时间：2012-11-12T07:56:27.267
> 
> 标签：image, amazon-s3, cdn, opencart

我一直在为我们的网站使用 OpenCart，我对它非常满意，它是一个很棒的平台，具有许多功能和一个围绕它的大型社区。我有兴趣将我所有的图像从本地服务器移动到某种 CDN，也许是 Amazon S3。我还没有为此找到任何模块，所以我正在考虑更新代码。任何想法/指南从哪里开始？

干杯，
伊拉克利斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:57:24.597

您可以使用这个新的 OpenCart 模块[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=10702](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=10702) 它是为 Cloudinary CDN 开发的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:51:27.787

我选择了 CloudCache CDN 扩展，它就像一个魅力，[http://www.opencart.com/index.php? route=extension/extension/info&extension_id=6351](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6351)

# syntax - Erlang 在记录构造上给出语法错误

> ID：13340040
> 
> 赞同：1
> 
> 时间：2012-11-12T07:56:39.123
> 
> 标签：syntax, erlang, record, erlang-shell

我在模块中有以下代码：

```
-module(my_server).

-record(server_opts,
        {port, ip = "127.0.0.1", max_connections = 10}).

Opts1 = #server_opts{port=80}. 
```

当我尝试在 Erlang shell 中编译它时，会出现类似 `syntax error before Opts1`. 知道上面的代码可能有什么问题。请注意，代码取自以下网站： [Record example in Erlang](http://20bits.com/article/erlang-an-introduction-to-records)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:01:19.020

以下行：

```
Opts1 = #server_opts{port=80}. 
```

应该包含在函数体中：

```
foo() ->
    Opts1 = #server_opts{port=80},
    ... 
```

请记住导出函数，以便您可以从模块外部调用它：

```
-export([test_records/0]). 
```

一个完整的例子如下：

```
-module(my_server).

-export([test_records/0]).

-record(server_opts, {port,
                      ip = "127.0.0.1",
                      max_connections = 10}).

test_records() ->
    Opts1 = #server_opts{port=80},
    Opts1#server_opts.port. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T10:08:13.660

也许，你认为这`Opts1`是一个全局常量，但是 erlang 中没有全局变量。

您可以使用[宏定义](http://www.erlang.org/doc/reference_manual/macros.html#id80492)来获得类似全局常量的东西（实际上在编译时被替换）：

```
-module(my_server).

-record(server_opts,
        {port,
     ip="127.0.0.1",
     max_connections=10}).

%% macro definition:    
-define(Opts1, #server_opts{port=80}).

%% and use it anywhere in your code:

my_func() ->
     io:format("~p~n",[?Opts1]). 
```

PS **使用 shell 中的记录。**假设 - 您已经创建了`my_server.hrl`包含记录定义的文件`server_opts`。首先，您必须使用 function 加载记录定义，`rr("name_of_file_with_record_definition")`之后您就可以在 shell 中处理记录了：

```
1> rr("my_record.hrl").
[server_opts]
2> 
2> Opts1 = #server_opts{port=80}.
#server_opts{port = 80,ip = "127.0.0.1",
             max_connections = 10}
3> 
3> Opts1.
#server_opts{port = 80,ip = "127.0.0.1",
             max_connections = 10}
4> 
```

# git - 如何将 github 克隆推送到新的 github 仓库？

> ID：13340043
> 
> 赞同：2
> 
> 时间：2012-11-12T07:56:45.307
> 
> 标签：git, github

我对自己的 github repo 做了一个本地克隆，做了一个不同的项目，现在我想把它作为一个新的 repo 推送到 github。我被迫先在 github 上创建一个空白仓库，然后推入它，因为通过推入它似乎不可能创建一个新的仓库。现在，当我这样做时，我会收到一条常见的错误消息：

```
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to matc
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'. 
```

将远程（空）存储库克隆到一个虚拟分支（其他地方的建议）在这里不起作用，我也无法修改远程存储库的设置。我不想强迫任何事情，我希望历史清楚，有一次它是另一个 github 存储库。

我还尝试分叉原始的 github 存储库，并与之合并，但是在 github 上分叉我自己的存储库并没有做任何事情。

实现我想要的最好/最干净的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:26:40.860

您需要首先在本地仓库中注册一个仓库（您在 github 上创建的空白仓库）。

```
$ git remote add another_repo git@github.com:XXX.git 
```

然后你可以推送到这个 repo

```
$ git push -u another_repo master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:05:37.983

你有没有尝试过：

```
$ git push --set-upstream origin master 
```

它将创建远程分支`master`并将其设置为默认推送分支。

# javascript - javascript将字符串连接到对象

> ID：13340048
> 
> 赞同：2
> 
> 时间：2012-11-12T07:57:25.633
> 
> 标签：javascript, object

请检查下面的代码。这里所有的变量值都是静态的。

`var o = { level_a:{}, level_b:{}, . . . .};`

`var levelVar = "b";`

`var selected_tab = 'level'+'_'+levelVar; \\level_b`

`var result = o.selected_tab;`

在这里你可以看到`var o`是对象和`var levelVar`是`selected_tab`字符串。现在我希望我应该得到`o.level_b`inside的值`result`，但它不起作用，因为我们不能将字符串连接到对象。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T07:59:08.280

使用这个符号：

```
result = o[selected_tab]; 
```

更一般地说，当您拥有 var 时，您可以同时使用和`obj={a:'b'}`访问该属性。`a``obj.a``obj['a']`

这是[有关使用对象和属性的 MDN 参考](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

# php - 在 php 上使用 .htaccess 文件重写 URL

> ID：13340059
> 
> 赞同：2
> 
> 时间：2012-11-12T07:58:28.123
> 
> 标签：php, html, .htaccess

我正在使用 htaccess 进行动态 url 重写。我想将 test.php 显示为 test.html

htaccess 代码是

```
Options +FollowSymlinks

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ $1.php [nc] 
```

运行 test.php 后，浏览器在地址栏显示 test.php。但是如果我将 test.php 更改为 test.html 页面会给出相同的内容。我的 apache 配置文件很好。我该如何解决这个问题？谢谢帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:03:27.893

你不能拒绝访问你的 .php

你需要在你的 a 标签中添加 html 链接，它会在后台转到 php。

如果您仍然想只播种 html 地址，您可以将 regex 放入您的 php 文件并检查扩展名是否为 php.ini。如果是这样，将页面重定向到 html。

例子：

```
<?php 
     $temp = $_SERVER['PHP_SELF'];
     $temp = explode('.', $temp);
     if($temp[count($temp)-1] == "php"){
         header("Location: test.html", true, 301);
     }
?> 
```

*** 没吃过！！！***

# html - 响应式布局 - 确定缩放

> ID：13340065
> 
> 赞同：1
> 
> 时间：2012-11-12T07:58:48.833
> 
> 标签：html, css, responsive-design

在响应式布局中，手机如何确定它降落在网站上时的放大程度？

这是一个例子：

[http://eldoradodrillingcompany.com](http://eldoradodrillingcompany.com)

如果您在浏览器中查看它，它看起来很棒，但是当您真正在手机上登陆它时，它就像放大得太远了。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:01:32.393

尝试在`<head>`

`<meta name="viewport" content="width=device-width, initial-scale=1">`

# ruby-on-rails - Rails 托管小型应用程序

> ID：13340071
> 
> 赞同：2
> 
> 时间：2012-11-12T07:59:10.857
> 
> 标签：ruby-on-rails, hosting

我有带有 mysql2 数据库（2 个表）、主干和引导程序的小型 Rails 应用程序。我认为，该访问量每周最多 50 人次，所以我想为它找到便宜（~10 美元/米或更便宜）的托管服务。我找到了dreamhost，好还是不好？你还能给我什么建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T08:03:01.790

如果您的应用程序低于 100meg，我通常会在**heroku.com**上运行我所有的小型 Rails 应用程序（如果您使用免费套餐，您在 amazon s3 上放置的图像也是免费的）。Heroku 的部署也非常简单：D 希望这会有所帮助。

* * *

这是 Heroku 的操作方法
[https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)

* * *

这是亚马逊 s3 的方法（存储您的图像或您喜欢存储的任何内容） [http://doganberktas.com/2010/09/14/amazon-s3-and-paperclip-rails-3/](http://doganberktas.com/2010/09/14/amazon-s3-and-paperclip-rails-3/)

* * *

heroku 的替代品

*   EngineYard - [http://www.engineyard.com/products/cloud](http://www.engineyard.com/products/cloud)
*   Openshift - [https://openshift.redhat.com/app/](https://openshift.redhat.com/app/)
*   亚马逊 -[将 Rails 应用程序部署到亚马逊云的教程？](https://stackoverflow.com/questions/1401155/tutorial-on-deploying-rails-apps-to-the-amazon-cloud)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:04:40.250

[http://www.heroku.com/](http://www.heroku.com/) - 0$/m 用于小项目。我在heroku上有两个项目超过一年。其中没有一个还没有成为高负载。我一直都付了 0 美元。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T08:13:25.933

我使用 Linode (linode.com) 已经很多年了，几乎没有任何问题。不过，他们最便宜的计划起价为 19.9 美元。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:03:40.793

查看[Heroku](http://heroku.com)和[亚马逊网络服务](http://aws.amazon.com/)。

# c++ - C++ 静态 const 成员覆盖

> ID：13340074
> 
> 赞同：13
> 
> 时间：2012-11-12T07:59:31.707
> 
> 标签：c++, static-members

考虑以下。

```
struct A {
    static const int X = 1;
    static void printX() {std::cout << "X " << X << std::endl; };
};

struct B: public A {
    static const int X = 2;
};

int main(argc argv){
    B b;
    b.printX();
} 
```

如何强制`b.printX()`打印值 2？
常量和方法都必须是静态的。因此，虚方法不适合。

对于那些认为他们比我更了解我的任务并希望看到我重新思考它的人，我将解释我努力的目标:)
想象一下具有基于一组静态常量的行为的类。实现具有不同常量集并因此具有不同行为的子类的最简单方法是从具有特定常量值集的前一个类派生类。可以使用虚函数来解决该任务。当然可能，毫无疑问。但是根据模型化实体的理论，这种解决方案将不是很纯粹。在这种情况下，虚拟方法的使用将比正确的实现更像是一种技巧。
例如，IR 通道具有不同的脉冲持续时间和封装结构时序。用一组特定的常量值定义一组子类（不同的 IR 通道实现）很方便。这些值是静态的，因为它们对于 class 和 const 的每个对象都是通用的，因为它们仅在编译时需要。并且由于基类和子类的内部实现略有不同，它们之间的最佳关系是`super class - child class`.
现在是我原来的问题的理由吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T09:47:29.717

正如您将看到的，您将需要一个模板，并更改继承以使用该模板。诀窍是无论派生类是否有一个 X 来掩盖基类 X ，它都可以工作。

```
template<class C>
struct A {
    static const int X = 1;
    template<typename T>
    static int getX(decltype(T::X)*) 
        { return T::X; }
    template<typename T>
    static void getX(...)
        { return X; }
    static void printX()
        { std::cout << "X " << getX<C>(0) << std::endl; }
};

struct B: public A<B> {
    static const int X = 2;
};

struct B2: public A<B2> {
    // No X
};

int main(){
    B b;
    b.printX(); // Prints X 2
    B2 b2;
    b2.printX(); // Prints X 1
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-31T14:47:38.317

只需将 X 的值作为模板参数：

```
#include <iostream>

template<int XValue=1>
struct A {
        static const int X = XValue;
        static void printX() {std::cout << "X " << X << std::endl; };
};

template<int XValue=2>
struct B: public A<XValue> {
};

struct C: public B<3> {
};

int main(int, char**){
        B<> b;
        b.printX();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T08:03:23.613

根据定义，您对静态成员所做的任何事情都将是“遮蔽”，而不是“覆盖”。您可以在“B”中重新实现“printX()”，但不会真正覆盖该行为；因为这会使用遮蔽，所以行为将完全取决于编译时类型，而不是运行时类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-15T09:31:58.397

我不会使用`static`and `template`，而是使用常规常量属性和构造函数。

例如：

```
#include <iostream>

struct A {
    A(const char* fn, const int X) : filename(fn), X(X) {};
    void print() { std::cout << "X = " << X << ", FN = " << filename << std::endl; };

  protected:
    const char* filename;
    const int X;
};

struct B : public A {
    B() : A("data.dat", 5) {};
};

int main(int, char **) {
    B b;
    b.print();
} 
```

从功能上讲，它完全符合您的要求。输出：

```
X = 5, FN = data.dat 
```

— 现在是编译器的工作来优化这些常量。如果您不打算使用数千个对象`B`，则可能不值得担心制作这些常量`static`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T08:55:35.190

好的，我会一起玩......你想嵌套不止一层。美好的。

```
#include <iostream>

template <int XX> struct T
{
    static const int X = XX;

    static void printX()
    {
        std::cout << "X=" << X << std::endl;
    }   
};

struct AA 
{
    static const int X = 1;

    /* all other members go here */
};

struct A : public AA, public T<AA::X>
{
    /* empty - put stuff in AA instead */
};

struct BB : public AA
{
    static const int X = 2;
};

struct B : public BB, public T<BB::X>
{
};

struct CC : public BB
{
    static const int X = 3;
};

struct C : public CC, public T<CC::X>
{
};

struct DD : public CC
{
    static const int X = 4;
};

struct D : public DD, public T<DD::X>
{
};

int main(int, char **)
{
    A a;
    B b;
    C c;
    D d;

    a.printX();
    b.printX();
    c.printX();
    d.printX();

    return 0;
} 
```

您甚至可以`static const int X = ...;`在每节课中跳过 ，并根据需要做`public T<1>`,`public T<2>`等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T08:16:05.643

简短的回答：你不能。

稍微长一点，更复杂的答案：嗯，也许你可以。带*模板*！

```
#include <iostream>

template <typename T> struct A 
{
    static const int X = 1;

    static void printX() 
    { 
        std::cout << "X=" << T::X << std::endl; 
    }
};

struct B : public A<B> 
{
    static const int X = 2;
};

int main(int, char **)
{
    B b;

    b.printX();

    return 0;
} 
```

# c# - 如何将 C# aspx 连接到数据集？

> ID：13340075
> 
> 赞同：1
> 
> 时间：2012-11-12T07:59:46.603
> 
> 标签：c#

我想要一个简单的网页来在 gridview 中显示数据集数据。我正在创建数据集 wita winform，我希望网页每 5 秒自动更新一次 gridview。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:04:33.133

您可以使用[UpdatePanel](http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx) Control 和[Timer](http://msdn.microsoft.com/en-us/library/bb398865%28v=vs.100%29.aspx) Control 来实现您想要的行为。

Microsoft Ajax **Timer**控件以定义的时间间隔执行回发。如果将 Timer 控件与**UpdatePanel**控件一起使用，则可以按定义的时间间隔启用部分页面更新。您还可以使用 Timer 控件发布整个页面。

有关 Microsoft Ajax 的更多信息，请参阅：

**[微软阿贾克斯](http://msdn.microsoft.com/en-us/library/ee341002%28v=vs.100%29.aspx)**

# java - Android读取NFC标签数据

> ID：13340079
> 
> 赞同：0
> 
> 时间：2012-11-12T07:59:50.430
> 
> 标签：java, android, nfc, rfid

我目前正在开发一个应用程序，该应用程序将读取`NFC tags`当前我已经编写了代码以获取`TAG id`下一步我应该做什么？`intent`如果额外命名`EXTRA_NDEF_MESSAGES`为空，我如何读取所有数据。

我现在拥有的读取 RFID 的代码是

```
public void onNewIntent(Intent intent) {
        Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

        String zin =  tag.getTechList()[0];
        info.setText("TagID: " + bytesToHex(tag.getId())+" Saturs: "+zin);    

 } 
```

我想知道如何读取其中的所有数据`NFC tag`。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T17:07:29.310

有各种类型的 nfc 标签（例如 Mifare Ultralight、Mifare Ultralight C、Mifare Classic、felica...）。每个标签都有不同的内存大小和读取程序。例如：Mifare Ultralight 有 64 字节，但 mifare Classic 1k 包含 1 KB 内存。从 mifare ultralight 读取数据不需要额外的身份验证，但 Mifare classic 需要身份验证。当您获得 New Intent 时，您可以对其进行解析以获取标签信息：

```
@Override
    protected void onNewIntent(Intent intent){    
        getTagInfo(intent)
         }
    private void getTagInfo(Intent intent) {
    Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    String[] techList = tag.getTechList();
   for (int i = 0; i < techList.length; i++) {
    if (techList[i].equals(MifareClassic.class.getName())) {

        MifareClassic mifareClassicTag = MifareClassic.get(tag);
        switch (mifareClassicTag.getType()) {
        case MifareClassic.TYPE_CLASSIC:
            //Type Clssic
            break;
        case MifareClassic.TYPE_PLUS:
            //Type Plus
            break;
        case MifareClassic.TYPE_PRO:
            //Type Pro
            break;
        }
    } else if (techList[i].equals(MifareUltralight.class.getName())) {
    //For Mifare Ultralight
        MifareUltralight mifareUlTag = MifareUltralight.get(tag);
        switch (mifareUlTag.getType()) {
        case MifareUltralight.TYPE_ULTRALIGHT:
            break;
        case MifareUltralight.TYPE_ULTRALIGHT_C:

            break;
        }
    } else if (techList[i].equals(IsoDep.class.getName())) {
        // info[1] = "IsoDep";
        IsoDep isoDepTag = IsoDep.get(tag);

    } else if (techList[i].equals(Ndef.class.getName())) {
        Ndef.get(tag);

    } else if (techList[i].equals(NdefFormatable.class.getName())) {

        NdefFormatable ndefFormatableTag = NdefFormatable.get(tag);

    }
    }
    }
    } 
```

当您获得确切标签时，您必须开始读取该标签的程序。阅读标签完整项目在[我的 GitHub 存储库中](https://github.com/mesuk08/NFC-UTILS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:17:29.180

取决于您的 TAG 类型。超轻型 mifare 的示例

```
Tag tagFromIntent = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
MifareUltralight uTag = MifareUltralight.get(tagFromIntent);
uTag.connect(); //You should enclose this into a try-catch because of probably IOException
byte[] data = uTag.readPages(INDEX_OF_PAGES_YOU_WANT); //This returns 4 consecutive pages from the offset you declared. Each page weights 4 bytes
uTag.close(); 
```

# python - Python 快速静态文件服务

> ID：13340080
> 
> 赞同：4
> 
> 时间：2012-11-12T07:59:51.773
> 
> 标签：python

在 Python 中提供静态文件的最快方法是什么？我正在寻找与 Nginx 的静态文件服务相等或足够接近的东西。

我知道 SimpleHTTPServer，但不确定它是否可以有效可靠地处理多个文件。

另外，我不介意它是某种 lib/framework 的一部分，只要它的 lib/framework 是轻量级的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:05:09.193

**编辑：这个项目似乎已经死了。**

* * *

[FAPWS3](https://github.com/william-os4y/fapws3)怎么样？卖点之一：

> **静态文件服务器**
> 
> FAPWS 可用于处理大量静态文件请求。借助后端的异步数据库，您可以将 FAPWS 用作您自己的 Amazon S3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:59:53.973

如果您寻找 oneliner，您可以执行以下操作：

> $> python -m SimpleHTTPServer

这不会完成所需的所有任务，但值得一提的是，这*是*最简单的方法 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T08:05:15.060

我强烈建议使用第 3 方 HTTP 服务器来提供静态文件。

像 nginx 这样的服务器针对手头的任务进行了大量优化，并行化并以快速语言编写。

Python 绑定到一个处理器并被解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-07T11:06:06.153

来自 python 标准库的原始[SimpleHTTPServer](https://docs.python.org/2.7/library/simplehttpserver.html)不会“*有效且可靠地处理多个文件的服务*”。例如，如果您正在从其中下载一个文件，则另一个对它的 HTTP 访问必须悬停，因为它`SimpleHTTPServer.py`是**一个简单的单线程 HTTP 服务器**，它**只能支持一个同时连接**。

幸运的是，注意`SimpleHTTPServer.py`使用[BaseHTTPServer.HTTPServer](https://docs.python.org/2.7/library/basehttpserver.html#BaseHTTPServer.HTTPServer)作为处理程序，它可以被[SocketServer.ForkingMixIn](https://docs.python.org/2.7/library/socketserver.html#SocketServer.ForkingMixIn)和[SocketServer.ThreadingMixIn](https://docs.python.org/2.7/library/socketserver.html#SocketServer.ThreadingMixIn)包装，也来自 python 标准库，以支持多进程和多线程模式，可以大大提高简单 HTTP 服务器的“*效率和可靠性*” ”。

根据这个想法，在原来的基础上修改了一个**支持多线程/多进程的 SimpleHTTPServer，**如下所示：

```
$ python2.7 ModifiedSimpleHTTPServer.py
usage: ModifiedSimpleHTTPServer.py [-h] [--pydoc] [--port PORT]
                                   [--type {process,thread}] [--root ROOT]
                                   [--run]

Modified SimpleHTTPServer with MultiThread/MultiProcess and IP bind support.

Original:    https://docs.python.org/2.7/library/simplehttpserver.html
Modified by: vbem@163.com

optional arguments:
  -h, --help            show this help message and exit
  --pydoc               show this module's pydoc

run arguments:

  --port PORT           specify server port (default: 8000)
  --type {process,thread}
                        specify server type (default: 'thread')
  --root ROOT           specify root directory (default: cwd '/home/vbem')
  --run                 run http server foreground

NOTE: stdin for input, stdout for result, stderr for logging 
```

例如，`ModifiedSimpleHTTPServer.py --run --root /var/log --type process`将运行一个以“/var/log”为根目录的多进程 HTTP 静态文件服务器。

修改后的代码是：

```
#! /usr/bin/env python2.7
# -*- coding: utf-8 -*-
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
r"""Modified SimpleHTTPServer with MultiThread/MultiProcess and IP bind support.

Original:    https://docs.python.org/2.7/library/simplehttpserver.html
Modified by: vbem@163.com
"""

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
import os, sys, pwd, posixpath, BaseHTTPServer, urllib, cgi, shutil, mimetypes, socket, SocketServer, BaseHTTPServer
from cStringIO import StringIO

USERNAME = pwd.getpwuid(os.getuid()).pw_name
HOSTNAME = socket.gethostname()
PORT_DFT = 8000

class SimpleHTTPRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):

    server_version = "SimpleHTTP/0.6"

    def do_GET(self):
        f = self.send_head()
        if f:
            self.copyfile(f, self.wfile)
            f.close()

    def do_HEAD(self):
        f = self.send_head()
        if f:
            f.close()

    def send_head(self):
        path = self.translate_path(self.path)
        f = None
        if os.path.isdir(path):
            if not self.path.endswith('/'):
                self.send_response(301)
                self.send_header("Location", self.path + "/")
                self.end_headers()
                return None
            for index in "index.html", "index.htm":
                index = os.path.join(path, index)
                if os.path.exists(index):
                    path = index
                    break
            else:
                return self.list_directory(path)
        ctype = self.guess_type(path)
        try:
            f = open(path, 'rb')
        except IOError:
            self.send_error(404, "File not found")
            return None
        self.send_response(200)
        self.send_header("Content-type", ctype)
        fs = os.fstat(f.fileno())
        self.send_header("Content-Length", str(fs[6]))
        self.send_header("Last-Modified", self.date_time_string(fs.st_mtime))
        self.end_headers()
        return f

    def list_directory(self, path):
        try:
            list = ['..'] + os.listdir(path) # 
        except os.error:
            self.send_error(404, "No permission to list directory")
            return None
        list.sort(key=lambda a: a.lower())
        f = StringIO()
        displaypath = cgi.escape(urllib.unquote(self.path))
        f.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">')
        f.write("<html>\n<title>%s %s</title>\n<body>" % (HOSTNAME, displaypath))
        f.write("%s@%s:<strong>%s</strong>\n" % (USERNAME, HOSTNAME, path.rstrip('/')+'/'))
        f.write("<hr>\n<ul>\n")
        for name in list:
            fullname = os.path.join(path, name)
            displayname = linkname = name
            if os.path.isdir(fullname):
                displayname = name + "/"
                linkname = name + "/"
            if os.path.islink(fullname):
                displayname = name + "@"
            f.write('<li><a href="%s">%s</a>\n'
                    % (urllib.quote(linkname), cgi.escape(displayname)))
        f.write("</ul>\n<hr>\n<pre>%s</pre>\n</body>\n</html>\n" % __doc__)
        length = f.tell()
        f.seek(0)
        self.send_response(200)
        encoding = sys.getfilesystemencoding()
        self.send_header("Content-type", "text/html; charset=%s" % encoding)
        self.send_header("Content-Length", str(length))
        self.end_headers()
        return f

    def translate_path(self, path):
        path = path.split('?',1)[0]
        path = path.split('#',1)[0]
        path = posixpath.normpath(urllib.unquote(path))
        words = path.split('/')
        words = filter(None, words)
        path = os.getcwd()
        for word in words:
            drive, word = os.path.splitdrive(word)
            head, word = os.path.split(word)
            if word in (os.curdir, os.pardir): continue
            path = os.path.join(path, word)
        return path

    def copyfile(self, source, outputfile):
        shutil.copyfileobj(source, outputfile)

    def guess_type(self, path):
        base, ext = posixpath.splitext(path)
        if ext in self.extensions_map:
            return self.extensions_map[ext]
        ext = ext.lower()
        if ext in self.extensions_map:
            return self.extensions_map[ext]
        else:
            return self.extensions_map['']

    if not mimetypes.inited:
        mimetypes.init()
    extensions_map = mimetypes.types_map.copy()
    extensions_map.update({'': 'text/plain'})

class ProcessedHTTPServer(SocketServer.ForkingMixIn, BaseHTTPServer.HTTPServer):
    r"""Handle requests in multi process."""

class ThreadedHTTPServer(SocketServer.ThreadingMixIn, BaseHTTPServer.HTTPServer):
    r"""Handle requests in a separate thread."""

SERVER_DICT = {
    'thread'    : ThreadedHTTPServer,
    'process'   : ProcessedHTTPServer,
}
SERVER_DFT = 'thread'

def run(sCwd=None, sServer=SERVER_DFT, nPort=PORT_DFT, *lArgs, **dArgs):
    r"""
    """
    sys.stderr.write('start with %r\n' % sys._getframe().f_locals)
    if sCwd is not None:
        os.chdir(sCwd)
    cServer = SERVER_DICT[sServer]
    oHttpd = cServer(("", nPort), SimpleHTTPRequestHandler)
    sys.stderr.write('http://%s:%s/\n' % (HOSTNAME, nPort))
    oHttpd.serve_forever()

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# main

def _main():
    r"""Main.
    """
    import argparse

    oParser = argparse.ArgumentParser(
        description = __doc__,
        formatter_class = argparse.RawTextHelpFormatter,
        epilog = 'NOTE: stdin for input, stdout for result, stderr for logging',
    )
    oParser.add_argument('--pydoc', action='store_true',
        help = "show this module's pydoc",
    )

    oGroupR = oParser.add_argument_group(title='run arguments', description='')
    oGroupR.add_argument('--port', action='store', type=int, default=PORT_DFT,
        help = 'specify server port (default: %(default)r)',
    )
    oGroupR.add_argument('--type', action='store', default=SERVER_DFT, choices=SERVER_DICT.keys(),
        help = 'specify server type (default: %(default)r)',
    )
    oGroupR.add_argument('--root', action='store', default=os.getcwd(),
        help = 'specify root directory (default: cwd %(default)r)',
    )
    oGroupR.add_argument('--run', action='store_true',
        help = '\n'.join((
            'run http server foreground',
    )))

    oArgs = oParser.parse_args()

    if oArgs.pydoc:
        help(os.path.splitext(os.path.basename(__file__))[0])
    elif oArgs.run:
        return run(sCwd=oArgs.root, sServer=oArgs.type, nPort=oArgs.port)
    else:
        oParser.print_help()
        return 1

    return 0

if __name__ == "__main__":
    exit(_main()) 
```

同时，只有200行的单个python文件，可以满足你“ *in Python* ”和“*轻量级*”的需求。

最后但并非最不重要的一点是，这`ModifiedSimpleHTTPServer.py`可能是临时使用的“杀手级应用程序”，但是建议长期使用 Nginx。

# java - 在Java中计算曲线下的精确面积

> ID：13340088
> 
> 赞同：12
> 
> 时间：2012-11-12T08:00:43.847
> 
> 标签：java, math

有没有这样做的方法？我有一个需要曲线下面积的应用程序，并且我得到了公式，所以如果我可以手头进行集成，我应该能够以编程方式进行吗？我找不到我所指的方法的名称，但这张图片展示了它： http: [//www.mathwords.com/a/a_assets/area%20under%20curve%20ex1work.gif](http://www.mathwords.com/a/a_assets/area%20under%20curve%20ex1work.gif)

编辑：回复大家，我已经实现了矩形、梯形和辛普森规则。但是，它们需要 10k+ 条才能准确，我是否应该无法以编程方式找到功能的集成版本？如果没有，那肯定有一个该死的充分理由。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:09:18.737

**数值积分**
有多种方法，可以使用。有关描述，请查看[数值食谱：科学计算的艺术](http://apps.nrbook.com/empanel/index.html?pg=155#)。
对于 Java，有 Apace Commons 库，可以使用。积分例程在[数值分析](http://commons.apache.org/math/userguide/analysis.html)部分。

**符号集成**
查看[jScience](http://jscience.org/)。[函数](http://jscience.org/api/org/jscience/mathematics/function/package-summary.html#package_description)模块“为相当简单的符号数学分析提供支持（求解代数方程、积分、微分、计算表达式等）”。
如果给定函数类型，则在特定情况下集成速度可能比使用某些标准库时更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:10:38.803

要准确计算它，您需要某种[计算机代数系统](http://en.wikipedia.org/wiki/Computer_algebra_system)库来执行符号操作。这样的系统实现起来相当复杂，而且我不熟悉任何高质量的 Java 开源库。但是，假设它满足您的要求，另一种方法是使用[梯形规则](http://en.wikipedia.org/wiki/Trapezoidal_rule)估计曲线下的面积。根据您要求结果的准确程度，您可以相应地改变细分的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:06:18.583

您可以使用[数值积分](http://en.wikipedia.org/wiki/Numerical_integration)，使用一些规则，例如已经提到的辛普森、梯形或[蒙特卡罗模拟](http://en.wikipedia.org/wiki/Monte_Carlo_integration)。它使用伪随机生成器。

您可以尝试一些用于符号积分的库，但我不确定您是否可以获得每个积分的符号表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:06:23.513

我建议使用辛普森规则或梯形规则，因为集成每种类型的图可能过于复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T08:08:13.527

请参阅[数值分析](http://en.wikipedia.org/wiki/Numerical_analysis)，特别是数值积分。使用[黎曼和](http://en.wikipedia.org/wiki/Riemann_sum)法怎么样？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-30T03:49:37.567

这是一个简单但有效的方法：

```
public static double area(DoubleFunction<Double> f, double start, double end, int intervals) {
  double deltaX = (end - start)/intervals;
  double area = 0.0;
  double effectiveStart = start + (deltaX / 2);
  for (int i=0; i<intervals; ++i) {
    area += f.apply(effectiveStart + (i * deltaX));
  }
  return deltaX * area;
} 
```

这是使用中点规则的黎曼和，它是梯形规则的变体，除了计算梯形的面积之外，我在区间中间使用 f(x) 的矩形。这更快并给出更好的结果。这就是为什么我的 x 的有效起始值位于第一个间隔的中间。通过循环一个整数，我避免了任何舍入问题。

我还通过等到循环结束再乘以来提高性能`deltaX`。我可以这样写循环：

```
for (int i=0; i<intervals; ++i) {
  area += deltaX * f.apply(effectiveStart + (i * deltaX)); // this is x * y for each rectangle
} 
```

但是`deltaX`是恒定的，因此等待循环完成会更快。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-14T20:07:56.410

最流行的数值积分形式之一是 Runge-Kutta order 4 (RK4) 技术。它的实现如下：

```
double dx,  //step size 
       y ;  //initial value
for(i=0;i<number_of_iterations;i++){
    double k1=f(y);
    double k2=f(y+dx/2*k1);
    double k3=f(y+dx/2*k2);
    double k4=f(y+dx*k3);
    y+= dx/6*(k1+2*k2+2*k3+k4);
} 
```

并且会比矩形、梯形和辛普森规则收敛得更快。它是物理模拟中最常用的集成技术之一。

# android - Thread run() 函数中的 Android 内存泄漏

> ID：13340089
> 
> 赞同：2
> 
> 时间：2012-11-12T08:00:50.297
> 
> 标签：android, memory-leaks

我有这个从服务运行的线程。run 的循环运行大约 15 分钟没有问题。在那之后 - 我的 GC 因内存泄漏而发疯，然后该功能就不能再正常工作了。

我已经使用 DDMS Allocation Tracker 来查找泄漏，并且似乎泄漏在`input = in.readLine();`线路内。我真的不知道如何解决它，但这是我的代码、堆栈跟踪和分配跟踪器快照：

**代码**：

```
@Override
public void run() {
    startKeepAliveTimer();  
    try {
            socket = new Socket(host, port);
            if (socket != null)
            {
                Log.i("ServerConnection", "Server connection opened");
                this.app.setConnectedToServer(true);
                serverManager.loginToServer();
            }
            else
                app.setConnectedToServer(false);                
            InputStreamReader inputStreamReader = new InputStreamReader(socket.getInputStream());
            BufferedReader in = new BufferedReader(inputStreamReader);
            String input;
            while (app.isConnectedToServer()) 
            {
                app.getFacebookManager().refreshAccessToken();                                      
                input = in.readLine();
                if (input != null)
                {
                    lastOnline = System.currentTimeMillis();
                    input = input.trim();
                    input = app.decrypt(input);
                    Log.e("Server Reponse", input);                 
                    serverManager.processData(app.convertToJSONObject(input));
                }
            }
        } catch (IOException e) {
            Log.e("ServerConnection", e.toString());
        }           

        Log.i("ServerConnection", "Server connection closed");
}

private void startKeepAliveTimer() {
    Timer timer = new Timer("keepAlive", true);
    timer.scheduleAtFixedRate(new TimerTask() {         
        @Override
        public void run() {
            keepAlive();                
        }
    }, 0, keepAlive);
} 
```

**堆栈跟踪**

```
11-12 09:55:38.349: D/dalvikvm(2251): GC_CONCURRENT freed 1164K, 23% free 9987K/12871K, paused 1ms+1ms
11-12 09:55:38.899: D/dalvikvm(2251): GC_CONCURRENT freed 1072K, 23% free 9989K/12871K, paused 1ms+1ms
11-12 09:55:39.439: D/dalvikvm(2251): GC_CONCURRENT freed 1075K, 23% free 9967K/12871K, paused 0ms+1ms
11-12 09:55:39.959: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 0ms+1ms
11-12 09:55:40.499: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9992K/12871K, paused 0ms+0ms
11-12 09:55:41.069: D/dalvikvm(2251): GC_CONCURRENT freed 1079K, 23% free 9983K/12871K, paused 1ms+1ms
11-12 09:55:41.749: D/dalvikvm(2251): GC_CONCURRENT freed 1094K, 23% free 9967K/12871K, paused 2ms+2ms
11-12 09:55:42.379: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:42.909: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:43.459: D/dalvikvm(2251): GC_CONCURRENT freed 1061K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:43.979: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:44.549: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:45.079: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:45.629: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:46.179: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:46.709: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:47.229: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:47.749: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:48.299: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:48.839: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9989K/12871K, paused 1ms+0ms
11-12 09:55:49.379: D/dalvikvm(2251): GC_CONCURRENT freed 1075K, 23% free 9991K/12871K, paused 1ms+0ms
11-12 09:55:49.909: D/dalvikvm(2251): GC_CONCURRENT freed 1078K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:50.429: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 3ms+1ms
11-12 09:55:50.949: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:51.499: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:52.019: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 0ms+0ms
11-12 09:55:52.539: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+1ms
11-12 09:55:53.069: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 2ms+1ms
11-12 09:55:53.609: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 1ms+0ms
11-12 09:55:54.139: D/dalvikvm(2251): GC_CONCURRENT freed 1045K, 23% free 9967K/12871K, paused 0ms+1ms 
```

**分配跟踪器：** ![DDMS 内存分配跟踪器](../Images/e0968d0999eaa6038eaf4f8e41d481f1.png)

# ajax - 循环ajax调用，在服务器上完成冗长的操作

> ID：13340100
> 
> 赞同：0
> 
> 时间：2012-11-12T08:01:49.817
> 
> 标签：ajax, loops

我有一个使用 ajax 的函数，需要很长时间才能完成。
问题是我在服务器上有很多文件需要处理，而我试图制作的页面就像一个状态页面。

它有一个开始处理和文件计数的链接。它看起来像这样：

* * *

点击这里开始流程

文件 0/500

* * *

当我单击链接时，它会运行此功能：

```
function generate_book_link_clicked(){
    $.getJSON("/generate_book", function(data){
      if (data['last'] == 'true'){
        $('#done').fadeIn(200);
      }else{
        $('#current_count').html(parseInt($('#current_count').text())+1);
        $('#generate_book_link').click();
     }
    });
} 
```

这是链接代码：

```
<a href="#" id="generate_book_link" onclick="generate_book_link_clicked">click me</a> 
```

这是计数器 html 的代码（“<%= @isbn_count.to_s %>”只返回计数）：

```
<span id="current_count">0</span>/<span id="total_count"><%= @isbn_count.to_s %></span> 
```

但是发生的情况是，当 ajax 完成时，它不会重新开始该过程，而是计数只是在没有 ajax 调用的情况下开始快速增加。就像，第一个成功完成，但随后它开始快速将值添加到“current_count”，即使超过原始计数（1000/500），它也会永远这样。

目前，我不知道如何重新开始该过程。

我希望我把一切都说清楚了，并且有人能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:22:27.780

代替

```
$('#generate_book_link').click(); 
```

直接调用你的函数：

```
generate_book_link_clicked(); 
```

# eclipse - Tycho 无法解析 Require-Bundle：org.sample.ide.common;bundle-version="1.0.0.qualifier"

> ID：13340102
> 
> 赞同：2
> 
> 时间：2012-11-12T08:01:56.647
> 
> 标签：eclipse, plugins, tycho, pde

我用 Tycho 构建了一个 Eclipse 插件项目。

我收到此错误消息。

```
[ERROR] Cannot resolve project dependencies:
[ERROR]   Software being installed: org.sample.ide.core 1.0.0.qualifier
[ERROR]   Missing requirement: org.sample.ide.core 1.0.0.qualifier requires 'bundle org.sample.ide.common 1.0.0' but it could not be found 
```

org.sample.ide.core-1.0.0.qualifier 具有 org.sample.ide.common-1.0.0.qualifier 作为必需的捆绑包。

当我使用 Eclipse PDE 导出功能导出插件项目时，依赖项目在同一个工作空间内被识别。

我的 manifest.mf 有 1.0.0.qualifier 之类的版本，我的 pom.xml 有 1.0.0-SNAPSHOT。那是问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:56:21.550

支持具有`.qualifier`版本的工件，因此这不是问题的原因。

但是，我不确定 Tycho 的哪些扩展还支持*依赖*`.qualifier`项中的替换，例如标题。（至少，这是有问题的[。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=373817)）因此，您应该尝试使用依赖于版本而不是.*`Require-Bundle``1.0.0``1.0.0.qualifier`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T04:01:04.257

*Tycho 在所有*清单文件中的 reactor 构建中将 .qualifier 替换为时间戳或固定字符串。它从附加的目标文件定义的存储库和本地存储库中解析文件。如果这些都不包含完全匹配的依赖项，则 tycho 将不会成功构建。请注意，PDE 导出的分辨率基于 Eclipse 中设置的*当前目标*，并且 PDE 将替换工作区中打开的所有包的限定符。Tycho 不知道这些，它的范围是在构建过程中包含在*反应器中的内容。**

# asp.net-mvc - 如何在超时时重定向 Ajax 方法会话

> ID：13340104
> 
> 赞同：0
> 
> 时间：2012-11-12T08:02:09.517
> 
> 标签：asp.net-mvc

所以我得到了一个返回 JSON 结果的 ajax 方法，但是该方法的一部分是检查会话是否有效。

因此，如果用户刷新了一个页面，就会调用 ajax 方法，在该方法中它会在会话过期时引发异常，现在该方法想要返回 JSON 结果，但我想将它们重定向到登录页面。

我该怎么做呢？

```
public JsonResult GetClients()
{
var usertoken = new UserToken(this.User.Identity.Name);
if (usertoken.AccountId != null)
{
return new JsonResult() {Data = model, JsonRequestBehavior = JsonRequestBehavior.AllowGet};
}
else
{
 //Redirect Here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:50:37.787

AFAIK 您只能通过 JavaScript 执行此操作，因为您的调用使用的是 ajax，其他帖子的解决方案将不起作用，因为 ajax 请求不会尊重重定向标头。

您可能希望在返回结果中添加 status 或 hasExpire 属性：

```
[HttpPost]
public ActionResult GetClients()
{
var usertoken = new UserToken(this.User.Identity.Name);
if (usertoken.AccountId != null)
{
return Json(new { data = model, status = true });
}
else
{
  return Json(new { data = null, status = false });
} 
```

在您的 ajax 调用中：

```
$.ajax('/controller/getclients', { }, function(data) {
  if(data.status == true) {
    // same as before you've got your model in data.data...
  } else {
    document.location.href = '/account/login';
  }
}); 
```

希望有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:55:22.400

在控制器代码中，检查会话有效性。例如

```
 if (Session["UserName"] == null)
        {
            return Json(new
            {
                redirectUrl = ConfigurationManager.AppSettings["logOffUrl"].ToString(),
                isTimeout = true
            });
        } 
```

在 .js 文件中检查如下

```
 success: function (data) {
        if (data != '' && typeof data != 'undefined') {
            if (data.isTimeout) {
                window.location.href = data.redirectUrl;
                return;
            } 
```

# iphone - CCSpriteBatchNode：Child of Child 是否获得绘图性能提升？

> ID：13340108
> 
> 赞同：6
> 
> 时间：2012-11-12T08:02:18.363
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我有一个`CCSpriteBatchNode`这样的配置：

```
CCSpriteBatchNode
    ChildA1
        ChildB1
        ChildB2
        ....
        ChildB999
    ChildA2
    ChildA3
    ... 
```

所有孩子（ChildA1，ChildB1，ChildA2 ...）都是`CCSprite`对象。`CCSpriteBatchNode`和所有子代但是`ChildA1`通过以下方式创建：

```
[CCSprite spriteWithSpriteFrameName:@"FileName.png"]; 
```

`ChildA1`是这样创建的：

```
// Create Parent Sprite
CCSprite* childA1 = [[CCSprite alloc] init];
childA1.contentSize = CGSizeMake(37.5,37.5);
childA1.anchorPoint = ccp(0,0);
[batchNode addChild:childA1 z:0 tag:1];

// Add Child Sprites
[childA1 addChild:childB1 z:0 tag:1];
[childA1 addChild:childB2 z:0 tag:1];
[childA1 addChild:childB3 z:0 tag:1];
// Continue adding childB4-childB999 
```

注意：这渲染得很好，我看到了我期望的输出，其中`childB1`的位置相对于`childA1`，并且移动`childA1`导致`childB1`移动。

我的问题是：我是否会在每个`childB1`-的绘图中看到性能提升`childB999`？据我了解，通过将所有子元素绘制在一起来`CCSpriteBatchNode`优化 a 中所有子元素的`CCSpriteBatchNode`绘制`CCSprites`。这是否也适用于那些孩子`CCSprites`？

对于那些想知道我为什么这样做的人：这个游戏中有很多层，并且`CCSprites`在 a`CCSprite`内分组`CCSpriteBatchNode`允许我`CCSprites`通过仅操纵该组精灵的父级来操纵一组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T06:02:18.477

简短的回答是，是的，`CCSpriteBatchNode`将对所有子节点（包括所有间接后代）进行一次绘制调用。

但是，这是否比使用常规效果更好`CCSprites`取决于您修改精灵的频率。使用 a`CCSpriteBatchNode`时，每次修改精灵时，都需要使用 CPU 而不是 GPU 重新计算该精灵及其所有子对象的纹理图集四边形坐标。对于您的示例，如果您移动 的位置，则将在渲染下一帧之前重新计算to`ChildA1`的坐标。在大多数应用程序中，openGL 绘制调用的减少会加重额外计算的成本，因为绘制调用相对昂贵，但最终它将取决于您的应用程序以及它如何使用精灵——所以我建议对如果这是一个性能瓶颈，您的应用程序。`ChildB1``ChildB999`

# exim4 - 错误：[Errno 111] 在 Plone 中发送电子邮件时连接被拒绝错误

> ID：13340116
> 
> 赞同：1
> 
> 时间：2012-11-12T08:03:04.487
> 
> 标签：exim4

我的网站确实存在严重问题，我修复了其中一些问题。最近我遇到了这个错误

```
We’re sorry, but there seems to be an error…

Here is the full error message:

Display traceback as text

Traceback (innermost last):

Module ZPublisher.Publish, line 127, in publish
Module ZPublisher.mapply, line 77, in mapply
Module ZPublisher.Publish, line 47, in call_object
Module Products.CMFFormController.FSControllerPythonScript, line 105, in __call__
Module Products.CMFFormController.Script, line 145, in __call__
Module Products.CMFCore.FSPythonScript, line 130, in __call__
Module Shared.DC.Scripts.Bindings, line 324, in __call__
Module Products.PloneHotfix20121106.python_scripts, line 63, in _patched_bindAndExec
Module Shared.DC.Scripts.Bindings, line 361, in _bindAndExec
Module Products.PythonScripts.PythonScript, line 344, in _exec
Module script, line 42, in content_status_modify
<FSControllerPythonScript at /clkmis/content_status_modify used for /clkmis/news/news-archive/anti-child-labor-portal-advocates-real-time-monitoring-1>
Line 42
Module Products.CMFCore.WorkflowTool, line 244, in doActionFor
Module Products.CMFCore.WorkflowTool, line 573, in _invokeWithNotification
Module zope.event, line 23, in notify
Module zope.component.event, line 24, in dispatch
Module zope.component._api, line 136, in subscribers
Module zope.component.registry, line 321, in subscribers
Module zope.interface.adapter, line 575, in subscribers
Module plone.app.contentrules.handlers, line 189, in workflow_action
Module plone.app.contentrules.handlers, line 132, in execute_rules
Module plone.app.contentrules.handlers, line 99, in execute
Module plone.contentrules.engine.executor, line 27, in __call__
Module plone.contentrules.rule.rule, line 48, in __call__
Module collective.contentrules.mailtolocalrole.actions.mail, line 178, in __call__
Module zope.deprecation.deprecation, line 152, in deprecated_method
Module Products.CMFPlone.patches.securemailhost, line 95, in secureSend
Module Products.MailHost.MailHost, line 342, in _send
Module Products.CMFPlone.patches.sendmail, line 11, in _catch
Module zope.sendmail.mailer, line 46, in send
Module smtplib, line 239, in __init__
Module smtplib, line 295, in connect
Module smtplib, line 273, in _get_socket
Module socket, line 561, in create_connection
error: [Errno 111] Connection refused 
```

弄清楚后我发现我在 /var/log/exim4 和 /var/spool/exim4 上有所有权问题

我通过 chown -Rv Debian-exim /var/log/exim4 和 chown -Rv Debian-exim /var/spool/exim4 修复了这个错误

现在我可以通过 CLI 发送电子邮件，但剩下的问题是我的 plone，我有一个内容规则，如果项目的状态发生更改并且我收到上述错误，我会向用户发送电子邮件，我尝试删除内容规则并状态更改成功，我真的认为这是关于所有权和权限错误，因为 /var 文件夹的所有权被意外更改了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:54:25.573

解决方案：

将 /var/log/exim4/ 和 /var/spool/exim4 的所有者更改为 Debian-exim

chown chown -Rv Debian-exim.Debian-exim /var/log/exim4 chown chown -Rv Debian-exim.Debian-exim /var/spool/exim4

# java - 将数据导出到 csv 并使用 Java 和 Struts2 下载文件

> ID：13340122
> 
> 赞同：0
> 
> 时间：2012-11-12T08:03:39.933
> 
> 标签：java, mysql, struts2, export-to-csv

我正在尝试将数据从 mysql 数据库导出到 csv 文件，但我不明白。我有下一件事。

在jsp中我有这个：

```
<s:url id="fileDownload" namespace="/" action="download" ></s:url>
<a href="%{fileDownload}"><s:submit value="Exportar CSV" id="btn_exportar_csv" name="btn_exportar_csv" cssClass="botones" width="50px"></s:submit></a> 
```

在struts文件中我有这个：

```
<action name="download" class="es.uniway.action.pedidos.ExportarFicherosAction">
<result name="success" type="stream">
  <param name="contentType">application/octet-stream</param>
  <param name="inputName">fileInputStream</param>
  <param name="contentDisposition">attachment;filename="fileABC.txt"</param>
  <param name="bufferSize">1024</param>
</result> 
```

在行动中我有这个：

```
package es.uniway.action.pedidos;

import java.io.ByteArrayInputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import java.util.Map;

import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.axis.MessageContext;
import org.apache.struts2.interceptor.ServletRequestAware;

import Services.Web.CCIS.BasicHttpBinding_PublicApiServiceStub;
import Services.Web.CCIS.PublicApiService_PortType;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

import es.uniway.bean.TPedidosClientes;
import es.uniway.bean.TRespuestaPedidosClientes;
import es.uniway.bean.Tdatoscuentas;
import es.uniway.wscloud.WscloudImplServiceLocator;
import es.uniway.wscloud.WscloudImplSoapBindingStub;

public class ExportarFicherosAction extends ActionSupport implements ServletRequestAware{

Map session;
Tdatoscuentas [] datoscuentas;
private HttpServletRequest servletRequest;
private HttpServletResponse response;
TRespuestaPedidosClientes pedidosClientes;
TPedidosClientes [] pedClientes;
private List<Date> FechaAprobacion;
public boolean submit=false;
Date dateC=null;
Date dateI=new Date();
Date dateF=new Date();
Date date1=new Date();
Date date2= new Date();
Date []fechas= null;
Date []fechasI = null;
Date []fechasF = null;
private String cuentasID;
public String nuevaBusqueda;

@Override
public void setServletRequest(HttpServletRequest request) {
    // TODO Auto-generated method stub

}

@Override
public String execute() throws Exception {
    // TODO Auto-generated method stub

    response.setContentType("application/octet-stream");
    response.setHeader("Content-Disposition","attachment;filename=temp.csv");

    ServletOutputStream out = response.getOutputStream();

    java.net.URL portAddressCloud = new java.net.URL("http://localhost:8080/webServiceCloud2/services/WscloudImpl");

    WscloudImplServiceLocator wscloudServiceLocator = new WscloudImplServiceLocator();
      //WscloudImpl wscloud = wscloudServiceLocator.getWscloudImpl(portAddress);

      WscloudImplSoapBindingStub bsStubcloud=null;
      bsStubcloud=(WscloudImplSoapBindingStub) wscloudServiceLocator.getWscloudImpl(portAddressCloud);

    session = ActionContext.getContext().getSession();
    PublicApiService_PortType puerto=(PublicApiService_PortType) session.get("puerto");
    ((BasicHttpBinding_PublicApiServiceStub)puerto).setMaintainSession(true);
     MessageContext ctx=(MessageContext) session.get("contexto");
     session.put("date1", date1);
     session.put("date2", date2);
     String usuario=(String) session.get("usuario");
     System.out.println("Usuario es:"+usuario);
     String id_tipo_cuenta = (String) session.get("id_tipo_cuenta");
     String n_cuenta = (String) session.get("n_cuenta");
     System.out.println("El id_tipo_cuenta es:"+id_tipo_cuenta+" y el número de cuenta es:"+n_cuenta);
     Tdatoscuentas[] params=bsStubcloud.consultarCuentas(Integer.parseInt(id_tipo_cuenta),n_cuenta);
     System.out.println("Params es"+params.length);
     System.out.println("el id de params es:"+params[0].getId_cuenta());
     System.out.println("EL id de params de cuenta padre es:"+params[0].getId_cuenta_padre());
     session.put("params", params);
     int cliente=Integer.valueOf(servletRequest.getParameter("cuentasID").toString());

     if(cliente!=-1){

            String esquema=(String) session.get("Id_esquema_asociado_session");
            String proveedor=(String) session.get("Id_proveedor_cloud_session");

            System.out.println("El esquema es:"+esquema);
            System.out.println("El proveedor es:"+proveedor);
            System.out.println("La fecha es:"+servletRequest.getParameter("date1"));
            System.out.println("Esto es:"+servletRequest.getParameter("edt_pedido"));
            int nivel=Integer.valueOf(id_tipo_cuenta);
            int cuenta=Integer.valueOf(servletRequest.getParameter("cuentasID"));
            DateFormat formatter ; 
              Date date ; 
               formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
               date = (Date)formatter.parse(servletRequest.getParameter("date1")); 
              Calendar cal=Calendar.getInstance();
              cal.setTime(date);
              System.out.println("Today is " +date );
              System.out.println("Today dos:"+cal.getTime());
              Date f_inicioAux=cal.getTime();
              Date date2 = (Date)formatter.parse(servletRequest.getParameter("date2")); 
              Calendar calF=Calendar.getInstance();
              cal.setTime(date2);
              System.out.println("Today is " +date.toString());

             pedidosClientes=bsStubcloud.consultarPedidosClientes(params[0].getId_cuenta_padre(), nivel, cuenta, cal, calF, 0, servletRequest.getParameter("edt_pedido").toString(),date.toString(),date2.toString());
             pedClientes=pedidosClientes.getDatosPedidosClientes();

             fechas= new Date[pedidosClientes.getDatosPedidosClientes().length];
             fechasI = new Date[pedidosClientes.getDatosPedidosClientes().length];
             fechasF = new Date[pedidosClientes.getDatosPedidosClientes().length];
             for(int i=0;i<pedidosClientes.getDatosPedidosClientes().length;i++){
                    System.out.println("iiiiiiiii"+pedidosClientes.getDatosPedidosClientes().length);
                    dateC=pedidosClientes.getDatosPedidosClientes()[i].getF_creacion().getTime();
                    dateI=pedidosClientes.getDatosPedidosClientes()[i].getF_inicio_contrato().getTime();
                    dateF=pedidosClientes.getDatosPedidosClientes()[i].getF_fin_contrato().getTime();

                    fechas[i]=dateC;
                    fechasI[i]=dateI;
                    fechasF[i]=dateF;
                    System.out.println(dateF);

                    //FechaAprobacion.add(dateC);
                 }

             setFechas(fechas);
             setFechasI(fechasI);
             setFechasF(fechasF);

             setPedClientes(pedClientes);

             System.out.println("Pedidos clientes ha devuelto:"+pedidosClientes.getDatosPedidosClientes().length);

             StringBuffer sb = exportar_CSV(pedClientes);
            //session.put("pedidos",pedidosClientes);

             InputStream in = 
                        new ByteArrayInputStream(sb.toString().getBytes("UTF-8"));

            byte[] outputByte = new byte[4096];
            //copy binary contect to output stream
            while(in.read(outputByte, 0, 4096) != -1)
            {
                out.write(outputByte, 0, 4096);
            }
            in.close();
            out.flush();
            out.close();

          }

          return "SUCCESS";
     }

     public HttpServletRequest getServletRequest() {
            return servletRequest;
        }

        public Tdatoscuentas[] getDatoscuentas() {
            return datoscuentas;
        }

        public void setDatoscuentas(Tdatoscuentas[] datoscuentas) {
            this.datoscuentas = datoscuentas;
        }

        public boolean isSubmit() {
            return submit;
        }

        public void setSubmit(boolean submit) {
            this.submit = submit;
        }

        public TRespuestaPedidosClientes getPedidosClientes() {
            return pedidosClientes;
        }

        public void setPedidosClientes(TRespuestaPedidosClientes pedidosClientes) {
            this.pedidosClientes = pedidosClientes;
        }

        public TPedidosClientes[] getPedClientes() {
            return pedClientes;
        }

        public void setPedClientes(TPedidosClientes[] pedClientes) {
            this.pedClientes = pedClientes;
        }

        public Date[] getFechas() {
            return fechas;
        }

        public void setFechas(Date[] fechas) {
            this.fechas = fechas;
        }

        public Date[] getFechasI() {
            return fechasI;
        }

        public void setFechasI(Date[] fechasI) {
            this.fechasI = fechasI;
        }

        public Date[] getFechasF() {
            return fechasF;
        }

        public void setFechasF(Date[] fechasF) {
            this.fechasF = fechasF;
        }

        public String getCuentasID() {
            return cuentasID;
        }

        public void setCuentasID(String cuentasID) {
            this.cuentasID = cuentasID;
        }

        public HttpServletResponse getResponse() {
            return response;
        }

        public void setResponse(HttpServletResponse response) {
            this.response = response;
        }

        public Date getDateI() {
            return new Date();
        }

        public void setDateI(Date dateI) {
            this.dateI = dateI;
        }

        public Date getDateF() {
            return new Date();
        }

        public void setDateF(Date dateF) {
            this.dateF = dateF;
        }

        public Date getDate1() {
            return date1;
        }

        public void setDate1(Date date1) {
            this.date1 = date1;
        }

        public Date getDate2() {
            return date2;
        }

        public void setDate2(Date date2) {
            this.date2 = date2;
        }

        public String getNuevaBusqueda() {
            return nuevaBusqueda;
        }

        public void setNuevaBusqueda(String nuevaBusqueda) {
            this.nuevaBusqueda = nuevaBusqueda;
        }

        private static StringBuffer exportar_CSV(TPedidosClientes[] pedClientes2) throws IOException {
            // TODO Auto-generated method stub

            StringBuffer writer = new StringBuffer();
                writer.append("NºPedido");
                writer.append(',');
                writer.append("Estado");
                writer.append(',');
                writer.append("Fecha_Pedido");
                writer.append(',');
                writer.append("Fecha_Inicio");
                writer.append(',');
                writer.append("Fecha_Final");
                writer.append(',');
                writer.append("PVP");
                writer.append(',');
                writer.append("Coste");
                writer.append('\n');

               for(int i=0;i<pedClientes2.length;i++){
                   writer.append(pedClientes2[i].getN_pedido());
                   writer.append(',');
                   writer.append(pedClientes2[i].getEstado_pedido());
                   writer.append(',');
                   writer.append(pedClientes2[i].getF_creacion().getTime().toString());
                   writer.append(',');
                   writer.append(pedClientes2[i].getF_inicio_contrato().getTime().toString());
                   writer.append(',');
                   writer.append(pedClientes2[i].getF_fin_contrato().getTime().toString());
                   writer.append(',');
                   writer.append(pedClientes2[i].getPvp().toString());
                   writer.append(',');
                   writer.append(pedClientes2[i].getP_coste().toString());

                   writer.append('\n');
               } 

               return writer;

        }

} 
```

我在做什么坏事？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:32:30.607

在您`struts.xml`声明`inputName`中，`fileInputStream`您必须在您的操作中使用它，`private InputStream fileInputStream;`并在执行方法中将文件放入其中。请参阅此链接，例如[http://www.mkyong.com/struts2/struts-2-download-file-example/](http://www.mkyong.com/struts2/struts-2-download-file-example/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:14:35.350

您可以使用[SELECT](http://dev.mysql.com/doc/refman/5.1/en/select.html)语句轻松完成。只需运行这样的命令 -

```
SELECT * FROM table INTO OUTFILE 'file name'; 
```

# azure - Azure 云服务 + SQL Azure 和防火墙配置

> ID：13340125
> 
> 赞同：0
> 
> 时间：2012-11-12T08:04:05.453
> 
> 标签：azure, azure-sql-database

我有一个运行东南亚的 Web 角色云服务实例，并且在同一区域运行 SQL Azure 数据库。我遇到了防火墙问题并且连接被阻止，除非我将云服务公共虚拟 IP 添加到 SQL 服务器防火墙。

从我读过的所有内容来看，如果两个系统位于同一区域，并且启用了“允许的 Windows Azure 服务”（将 0.0.0.0 添加到防火墙），那么两者应该能够在内部进行通信吗？

我有些担心路由不正确（数据是否会流出网络/我是否需要为此付费），并且如果 VIP 发生更改，则必须重新配置防火墙。

是否有其他地址我应该通过（当前访问 blah.database.windows.net）访问 SQL azure 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:57:04.007

你的理解是正确的。如果我是你，我会向微软开一张支持票；我以前听说过这个问题，虽然我自己从未经历过。这听起来像是一个问题，因此请报告并仔细查看您的下一张发票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-28T08:01:58.070

首先，

允许的 Windows Azure 服务 - 将仅允许 azure 服务访问数据库。

第二，

为了能够从任何其他端点访问数据库服务器，您需要添加防火墙规则以允许这些特定 IP 范围。如果要从 ip 为 132.99.xx.xx 的机器连接，则需要添加一条规则，起始 IP 和结束 IP 为 132.99.xx.xx

希望这可以帮助！

# javascript - String.prototype.replaceAll() 不工作

> ID：13340131
> 
> 赞同：112
> 
> 时间：2012-11-12T08:04:48.190
> 
> 标签：javascript

我需要替换变量中的所有字符串。

```
var a = "::::::";
a = a.replace(":", "hi");
console.log(a);
```

上面的代码只替换了第一个字符串，即。`hi::::::` 我用过`replaceAll`，但它不起作用。

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-11-12T08:06:29.987

JavaScript中没有`replaceAll`：错误控制台可能报告了错误。

相反，使用`/g`("match global") 修饰符和正则表达式参数`replace`：

```
const a = "::::::";
const replaced = a.replace(/:/g,"hi");
console.log(replaced);
```

MDN中介绍了它[：String.replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)（和其他地方）。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-11-12T08:08:42.837

JavaScript中没有`replaceAll`函数。

您可以使用带有全局标识符的正则表达式，如 pst 的答案所示：

`a.replace(/:/g,"hi");`

`split`一些人喜欢的替代方法是使用 JavaScript和`join`函数，因为它消除了对正则表达式的需要，如下所示：

```
a.split(":").join("hi"); 
```

值得注意的是，第二种方法速度较慢。

# c# - 为什么要安装 Microsoft Visual C++ 2010 Redistributable Package x86 来使用 SQLite？

> ID：13340132
> 
> 赞同：2
> 
> 时间：2012-11-12T08:04:50.087
> 
> 标签：c#, sqlite, visual-c++

我用 C# 和 SQLite 编写了 Windows 应用程序。当 Microsoft Visual C++ 2010 Redistributable Package x86 安装在 PC 上时，应用程序运行正常，但如果 Microsoft Visual C++ 2010 Redistributable Package x86 未安装，则应用程序无法运行。为什么？
SQLite 是否依赖于 Microsoft Visual C++ 2010 Redistributable Package x86 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:06:56.103

SQLite 的版本是 VS2010 编译的，它依赖于 C 运行时库，因此它需要 Visual C++ 2010 Redistributable Package x86。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:07:32.473

是的。SQLite 可能是用 C++ 编写的。它使用 /MD 选项编译，这意味着它在运行时需要 msvcrt#.dll。Retributable Package 安装了它，没有它它就无法运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-21T21:31:58.673

因为 SQLite 显然是用 C++ 开发了 SQLite.Interop.dll，而且他们这样说：

> **(11) 为什么在尝试运行我的应用程序时会出现 DllNotFoundException（对于“sqlite3.dll”或“SQLite.Interop.dll”）？**
> 
> 找不到指定的动态链接库 (DLL)，或者由于缺少依赖项而无法加载它。确保命名的动态链接库位于应用程序目录或系统 PATH 沿线的目录中，然后重试。**此外，请确保已安装必要的 Visual C++ 运行时可再发行组件，除非您使用的是静态链接到它的动态链接库。**

强调我的最后一部分。您需要[system.data.sqlite 下载页面](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)中的静态二进制文件，以便不需要 C++ 运行时。在提供二进制文件的同一页面上，那些确实需要它的人会告诉您它是 - 例如，4.0 需要 x64 的 Visual C++ 2010 SP1 运行时，.NET 4.5 需要更新 4，根据页面。我使用了 2015 版 Update 3 和 .NET 4.0 版本，没有任何问题。

注意 - 您可能不知道，但如果您尝试在文件共享上托管使用 SQLite DLL 的应用程序并从工作站通过网络连接到该应用程序，则该工作站仍需要 C++ 运行时，因为它正在运行该应用程序在它的记忆中。

**参考：** [http ://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki#q11](http://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki#q11)

链接到**Microsoft Visual C++ 2015 Redistributable Update 3**，我知道它适用于 SQLite 二进制文件的 64 位 .NET 4.0 版本： [https ://www.microsoft.com/en-us/download/details.aspx?id =53840](https://www.microsoft.com/en-us/download/details.aspx?id=53840)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T18:19:27.983

SQLite 依赖于 Visual C++ 运行时，但您**不需要**在客户端计算机上安装它。[system.data.sqlite](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)下载页面包含几个已经包含运行时的“静态”包。

> 所有“静态”包都包含静态链接到适当版本的 Visual C++ 运行时的本机或混合模式程序集二进制文件。通常，这些包用于客户机器可能没有安装必要版本的 Visual C++ 运行时并且由于权限有限而无法安装的情况。

例如，在我的机器上，我运行的是 Windows 8.1 x64，所以我进入**了 64 位 Windows (.NET Framework 4.0) 的预编译静态链接二进制文件**并下载**了 sqlite-netFx40-static-binary-x64-2010-1.0.90.0。拉链**。

> 此二进制包包含 x64 版本的 System.Data.SQLite 1.0.90.0 (3.8.2) 包的所有二进制文件。x64 的 Visual C++ 2010 SP1 运行时是静态链接的。需要 .NET Framework 4.0。

然后我解压缩包并运行**test.exe**以确保一切正常。需要零安装。

# php - 默认显示附件窗格

> ID：13340133
> 
> 赞同：1
> 
> 时间：2012-11-12T08:05:00.937
> 
> 标签：php, pdf, tcpdf

我正在使用最新版本的**TCPDF**来生成我的 PDF 文件，它工作正常

我卡住的问题是**我想默认显示文件附件注释窗格，**因为它在用户单击附件图像时打开...

我尝试了以下方法：

```
$pdf->SetDisplayMode($zoom, $layout, $mode='UseAttachments'); 
```

但它不工作。

请告诉我这怎么可能....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:18:28.013

在我的 TCPDF 版本中，`SetDisplayMode`函数如下所示：

```
public function SetDisplayMode($zoom, $layout='SinglePage', $mode='UseNone') {
        if (($zoom == 'fullpage') OR ($zoom == 'fullwidth') OR ($zoom == 'real') OR ($zoom == 'default') OR (!is_string($zoom))) {
            $this->ZoomMode = $zoom;
        } else {
            $this->Error('Incorrect zoom display mode: '.$zoom);
        }
        switch ($layout) {
            //layout is set here
        }
        //page mode
        switch ($mode) {
            case 'UseNone': {
                $this->PageMode = 'UseNone';
                break;
            }
            case 'UseOutlines': {
                $this->PageMode = 'UseOutlines';
                break;
            }
            case 'UseThumbs': {
                $this->PageMode = 'UseThumbs';
                break;
            }
            case 'FullScreen': {
                $this->PageMode = 'FullScreen';
                break;
            }
            case 'UseOC': {
                $this->PageMode = 'UseOC';
                break;
            }
            case '': {
                $this->PageMode = 'UseAttachments';
                break;
            }
            default: {
                $this->PageMode = 'UseNone';
            }
        }
    } 
```

看最后一个案例。它将 PageMode 设置为“UseAttachments”，但它看起来是以错误的方式定义的。而`case 'UseAttachments':`不是`case '':`.

因此，尝试将您的代码更改为：

```
$pdf->SetDisplayMode($zoom, $layout, ''); 
```

# java - 如何使用 net.sf.json 在 Java 中生成 JSON 字符串？

> ID：13340138
> 
> 赞同：10
> 
> 时间：2012-11-12T08:05:16.847
> 
> 标签：java, json

我正在努力在 Java 中生成 JSON 字符串。

```
import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

JSONArray ja = new JSONArray();
JSONObject js = new JSONObject();
JSONObject j = new JSONObject();

String s = "[{\"shakil\",\"29\",\"7676\"}]";

js.put("id", "1");
js.put("data", s);
ja.add(js);

j.put("rows", ja);

System.out.println(j.toString()); 
```

实际输出：

```
{"rows":[{"id":"2","data":"[{\"shakil\",\"29\",\"7676\"}]"}]} 
```

预期输出：

```
{"rows":[{"id":"2","data":["shakil", "29","7676"]}]}; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-12T08:20:23.627

你`s`是 a在进入 a`String`时*没有*被引用。您必须为以下值构建另一个：`put``JSONObject``JSONArray``data`

```
// using http://jettison.codehaus.org/
JSONObject outerObject = new JSONObject();
JSONArray outerArray = new JSONArray();
JSONObject innerObject = new JSONObject();
JSONArray innerArray = new JSONArray();

innerArray.put("shakil");
innerArray.put("29");
innerArray.put("7676");

innerObject.put("id", "2");
innerObject.put("data", innerArray);

outerArray.put(innerObject);

outerObject.put("rows", outerArray);

System.out.println(outerObject.toString()); 
```

结果：

```
{
    "rows": [
        {
            "id": "2",
            "data": [
                "shakil",
                "29",
                "7676"
            ]
        }
    ]    
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T09:16:21.050

写

```
String[] s = new String[] {"shakil", "29" , "7676"}; 
```

代替

```
String s = "[{\"shakil\",\"29\",\"7676\"}]"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T08:09:12.810

查看[gson](https://sites.google.com/site/gson/gson-user-guide)，它将为您提供大量用于将 Java 对象序列化/反序列化到 JSON 的选项。

**取自页面的示例**

```
Gson gson = new Gson();
int[] ints = {1, 2, 3, 4, 5};
String[] strings = {"abc", "def", "ghi"};

//(Serialization)
gson.toJson(ints);     ==> prints [1,2,3,4,5]
gson.toJson(strings);  ==> prints ["abc", "def", "ghi"]

//(Deserialization)
int[] ints2 = gson.fromJson("[1,2,3,4,5]", int[].class); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T10:03:33.757

终于找到了 net.sf.json 的答案

```
JSONArray data1 = new JSONArray();
data1.add("shakil");
data1.add("29");
data1.add("100");

JSONObject inner1 = new JSONObject();
inner1.put("id", "1");
inner1.put("data", data1);

JSONArray list2 = new JSONArray();
list2.add(inner1);

JSONObject finalObj = new JSONObject();
finalObj.put("rows", list2);

System.out.println(finalObj); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-05T22:21:23.177

无法在 Java 中声明 JSON 字符串是一件非常痛苦的事情。主要是由于（a）没有多行字符串（b）转义双引号使其可读性一团糟。

我通过使用单引号来声明 JSON 字符串（使用标准的多行连接）来解决这个问题。没有什么花哨：

```
String jsonStr = 
    "{" +
        "'address': " + 
        "{" +
            "'name': '" + name + "'," +
            "'city': '" + city + "'," +
            "'street1': '"+ street1 +"'," +
            "'street2': '"+ street2 +"'," +
            "'zip': '" + zip + "', " +
            "'state':'" + state + "'," +
            "'country': '" + country + "'," +
            "'phone': '" + phone + "'" +
        "}" +
    "}";
jsonStr = MyUtil.requote(jsonStr);
System.out.println(jsonStr); 
```

我的实用程序

```
public static String requote(String jsonString) {
    return jsonString.replace('\'', '"');
} 
```

有些人可能会觉得这比声明 Map 更麻烦，但是当我必须使用字符串语法构建 JSON 时，这对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-05T23:48:03.157

在不使用 Objectmapper 或类似工具的情况下直接将 json 编写为 String 时，我看到了很多问题。

我建议你写你的 Json （正如你定义的那样）：

```
{"rows":[{"id":"2","data":["shakil", "29","7676"]}]} 
```

然后只需使用这个小在线工具： http: [//www.jsonschema2pojo.org/](http://www.jsonschema2pojo.org/)

它可以将简单的 Json 转换为具有多个类的 Java-Class。如果您想稍后使用 Gson 或 Jackson，您可以在生成期间进行选择。

Gson 稍微轻一些，可能更适合开始使用。我更喜欢 Jackson，因为你可以创建类似计算属性的东西——但这已经很详细了。

[https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/)

添加 Gson 后，您需要做的就是：

```
Gson gson = new Gson();
MyGeneratedClass target = new MyGeneratedClass();
String json = gson.toJson(target); 
```

瞧：您已经生成了一个简单的 json，而没有考虑以后如何更改它！

# codeigniter - 如何更改数据库中会话存储的默认行为

> ID：13340140
> 
> 赞同：0
> 
> 时间：2012-11-12T08:05:20.503
> 
> 标签：codeigniter

我启用了将会话数据存储在数据库中，并且在每次刷新页面时都会插入一条新记录，并最终用许多行填充会话表。我如何将其设置为仅在其 ip 不存在条目并更新现有 ip 时才插入记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:20:13.313

会话有一个超时，您可以在 config.php 文件中设置它（即`$config['sess_expiration'] = 7200`）。一旦达到该时间，它们就会过期并被删除（通过会话垃圾收集机制）。

> . 我如何将其设置为仅在其 ip 不存在条目时才插入记录

它不会为每次更新创建一个新的会话记录，如果选择该选项，它只是从给定 IP 和用户代理的现有会话记录中添加/删除数据（除非会话已过期，在这种情况下它会创建一个新记录）。Codeigniter 有一个内置的垃圾回收机制，它最终（如果不是立即）会删除过期的会话。

> 并更新现有的IP？

为什么它会更新现有的 ip 并覆盖其会话数据？这是没有意义的。您最终可能会覆盖当前正在使用会话的用户的会话数据。如果用户停止使用系统，会话将最终过期并被删除。

根据codeigniter [session class page](http://codeigniter.com/user_guide/libraries/sessions.html)：

> 加载页面时，会话类将检查用户的会话 cookie 中是否存在有效的会话数据。如果会话数据不存在（或已过期），则会创建一个新会话并将其保存在 cookie 中。如果会话确实存在，则其信息将被更新并且 cookie 将被更新。每次更新都会重新生成 session_id。

# viewmodel - MVVM Light Dynamic ViewModel 最佳实践

> ID：13340145
> 
> 赞同：1
> 
> 时间：2012-11-12T08:05:59.177
> 
> 标签：viewmodel, mvvm-light

在我们的应用程序中，客户可以设计他们的用户界面。为此，我们在运行时加载生成的 XAML。

我们使用 MvvmLight 作为 Mvvm 框架。

但我不确定获得某种动态视图模型的最佳方法是什么。

因此，如果客户想要一个新的 Datafield，它应该在模型中可用。

我的想法是动态生成和编译模型程序集，或者让转换器从放置在视图模型上的字典中获取数据。

有没有更好的想法或一些经验以及如何最好地解决这个问题？

# asp.net - DevExpress MVC 扩展：如何设置 GridViewSettings.Caption 样式？

> ID：13340146
> 
> 赞同：0
> 
> 时间：2012-11-12T08:06:00.003
> 
> 标签：asp.net, asp.net-mvc-3, devexpress

我正在开发一个简单的 ASP.NET MVC 3（ASPX 视图引擎）应用程序。我在页面上有一个 GridView 控件。所以我用这段代码设置了必要的 GridViewSettings：

```
<%
Html.DevExpress().GridView(settings => 
{
    settings.Name = "gvMyGridView";
    settings.CallbackRouteValues = new { Controller = "Home", Action = "MyGridView" };

    settings.Caption = string.Format("My caption");

    settings.Columns.Add(column =>
    {
        column.Width = Unit.Percentage(10.0);
        column.FieldName = "MyField";
        column.Caption = string.Format("MyField Name");
        column.ColumnType = MVCxGridViewColumnType.TextBox;
    });

    ...

}).Bind(Model).Render(); 
%> 
```

我有一个问题：**如何更改网格视图标题的样式（背景和字体大小）？**

我可以使用以下代码设置标题：

```
settings.Caption = string.Format("My caption"); 
```

而且我可以使用 GridViewSettings.Styles.Header 更改 HeaderRow 样式，但我找不到如何设置标题样式属性的方法。请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:12:46.530

[**`ASPxGridView.Styles.TitlePanel`**](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxGridViewGridViewTitleStyletopic)您可以通过属性访问标题样式：

```
// Example:
settings.Styles.TitlePanel.BackColor = Color.Red; 
```

# debugging - Visual Studio 2010 版本找不到 dll

> ID：13340153
> 
> 赞同：0
> 
> 时间：2012-11-12T08:06:31.453
> 
> 标签：debugging, dll, release, exe

我用opencv构建了一个项目，当我在其他电脑上共享我的.exe时，他们找不到一些dll，这发生在发布和调试模式下，我在网上搜索，我知道我必须配置项目的属性，我尝试配置 MFC，但所有配置问题仍然存在。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:28:47.670

似乎缺少 opencv 的运行时库。我不熟悉opencv，但VS提供了一种查找所有依赖项的方法：http: [//msdn.microsoft.com/en-us/library/vstudio/dd293568.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd293568.aspx)。您可以为您的应用程序构建安装包。

另一种查找所有依赖项的方法是使用depends.exe，详细信息在：http://msdn.microsoft.com/en-us/library/ms235265.aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:12:15.473

它们是 SystemFramework 库吗？或者它们是您的应用程序专门使用的库，您已导入到项目中的库？

如果它们是您的自定义/导入库，请确保将它们复制到输出，并将它们与 exe 一起发送。安装程序的目的是让客户端将需要引用的文件的可执行文件编译成一个文件。

# xcode - 为什么 textmate 不使用典型的 Xcode 项目？

> ID：13340154
> 
> 赞同：0
> 
> 时间：2012-11-12T08:06:52.967
> 
> 标签：xcode, cocoa, textmate

我已经克隆了一个[Textmate](https://github.com/textmate/textmate)源代码，并构建了它。当我阅读 Textmate 的一些代码时，我发现它并没有使用典型的 Xcode 项目。那么，这是为什么呢？Apple 的 cocoa 框架似乎不方便开发-不使用-Xcode。

我想知道在 OS X 上开发可可应用程序是否有一些好的工作流程？

或者他们这样做只是想让我们知道他们很酷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:14:37.503

Odgaard 在博客中分两部分介绍了这一点：

[http://sigpipe.macromates.com/2010/01/15/build-automation-part-1/](http://sigpipe.macromates.com/2010/01/15/build-automation-part-1/)

[http://sigpipe.macromates.com/2010/01/23/build-automation-part-2/](http://sigpipe.macromates.com/2010/01/23/build-automation-part-2/)

# c# - 将 C# 类对象传递给 Python 文件

> ID：13340155
> 
> 赞同：4
> 
> 时间：2012-11-12T08:06:54.907
> 
> 标签：c#, python, object, parameter-passing, ironpython

好的...我正在尝试将我在 C# 中声明的对象传递给带有 IronPython 的 Python 文件。

所以这就是我的想法：

C#类：

```
public class ParamObj
{
   private string Obj_String;
   private int Obj_Int;

   public ParamObj(string lObjS, string lObjI)
   {
      Obj_String = lObjS;
      Obj_Int = lObjI;
   }

   public string getString()
   {
      return Obj_String;
   }

   public int getInt()
   {
      return Obj_Int;
   }

   public setString(string lStr)
   {
      Obj_String = lStr;
   }

   public setInt(int lInt)
   {
      Obj_Int = lInt;
   }
} 
```

所以我有我的类.. 现在我在我的 C# 项目中声明类并将它传递给 PYthon 文件：

```
ParamObj Test_Object = new ParamObj("Test Object from C#", 1337);
var ipy = Python.CreateRuntime();
dynamic Test = ipy.UseFile("Test.py");

Test_Object = Test.ObjectAsParam(Test_Object);

Console.WriteLine(Test_Object.getString(), Convert.ToString(Test_Object.getInt())); 
```

现在我想在我的 Pythoin 文件中使用 Object 并调用它的方法。因此，我的 Test.py 中的代码如下：

```
def ObjectAsParam(Obj):

    print Obj.getString()
    print str(Obj.getInt())

    Obj.setString("Changed!")
    Obj.setInt(1338)

    return Obj 
```

但是我的编译器说 python 脚本不知道方法 getString()、getInt() 等。

那么有没有办法管理呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T17:58:00.913

确保 ParamObj 是一个公共类。

# iphone - 使用 CCDecrypt 解密时的 EXC_BAD_ACCESS

> ID：13340158
> 
> 赞同：0
> 
> 时间：2012-11-12T08:07:01.943
> 
> 标签：iphone, objective-c, ios5, encryption

我正在尝试解密用 Java 加密的 ios 中的数据。以下是代码：

```
+(NSString*) decryptData:(NSString*) data:( NSData*) passKey {

    NSString * strKey = [Base64Util encodeBase64WithData:passKey];
    NSLog( @" decryption key: %@" ,strKey);

    //decrypt `data
    NSData * nsData = [Base64Util decodeBase64WithString:data];
    NSLog(@"here 1: %@",nsData);

    size_t numOfBytesDecrypted;
    size_t bufferSize = nsData.length + kCCBlockSizeAES128;
    NSMutableData * buffer = [NSMutableData dataWithLength:bufferSize];
    CCCrypt(kCCDecrypt, kCCKeySizeAES128, kCCOptionECBMode , derivedKey.bytes, derivedKey.length, Nil , passCodeData.bytes, passCodeData.length, buffer. mutableBytes, bufferSize, &numOfBytesDecrypted);

    return [NSData dataWithBytesNoCopy:buffer. mutableBytes length :numOfBytesDecrypted]; 
```

}

但是当 CCCrypt 函数执行时，它会抛出一个 EXC_BAD_ACCESS 代码 2。我启用了 ARC。我无法找到错误的原因。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:10:48.080

我真是傻。

第二个参数应该是`kCCAlgorithmAES128`

# javascript - 使用 jQuery 自定义 JavaScript 分页元素的标签

> ID：13340160
> 
> 赞同：2
> 
> 时间：2012-11-12T08:07:15.283
> 
> 标签：javascript, jquery, pagination, label, customization

这是未经编辑的脚本：

```
// for each slide create a list item and link
control.children().each(function(){
    $('.' + option.paginationClass, elem).append('<li><a href="#'+ number +'">'+ (number+1) +'</a></li>');
    number++;
}); 
```

这是分页脚本的一部分。脚本的这种作用将标记附加到幻灯片中的每个幻灯片链接，首先将第一个链接标记为“1”，然后为每个附加的幻灯片链接添加 1；因此，创建一组导航链接来控制幻灯片。我有四张幻灯片，所以链接列表看起来像：'1 2 3 4'......我相信你已经知道“分页”是什么......

**我该怎么做：**我希望能够编辑上述脚本以在每个幻灯片链接附加时输出特定的特定标记（**而不是 '1 2 3 4'**）。下面是我的脚本编辑版本，其中混入了一些伪代码。您可以阅读它以获得更好的想法。

这是我自定义每个单独链接的尝试：

```
// for each slide create a list item and link
control.children().each(function(){

     if (number = 1) {LABEL = 'Link for slide 1 blah'}
     if (number = 2) {LABEL = 'Lnk for slide 2 boo'}
     if (number = 3) {LABEL = 'Link fore slide 3 foo'}
     if (number = 4) {LABEL = 'Linkage fo slide 4 yoooou'}

     $('.' + option.paginationClass, elem).append('<li><a href="#'+ number +'">'+ (LABEL) +'</a></li>');
     number++;
}); 
```

这是一个在没有可视化演示的情况下提出的棘手问题，但具有出色 JavaScript/jQuery 技能的人肯定可以看到缺少什么或需要添加哪些行。这将有助于大量 UI / UX 开发人员想要更轻松地自定义分页链接以进行基本导航甚至幻灯片放映。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:20:31.960

好吧，您正在设置值而不是比较它们，因此您的所有`if`语句都是`true`, 更改：

```
 if (number = 1) {LABEL = 'Link for slide 1 blah'} 
```

到：

```
 if (number === 1) {LABEL = 'Link for slide 1 blah'} 
```

请注意，`each`函数的第一个参数是因此不需要`index`使用运算符。`++`

```
control.children().each(function(number){ 
```

您还可以定义一个数组：

```
var labels = [
    'The First Label',
    'Second One',
    '...'
]; 
```

和代码：

```
 $('.' + option.paginationClass, elem)
   .append('<li><a href="#'+ number +'">'+ labels[number] +'</a></li>'); 
```

# excel - Excel 文本到列自动更新

> ID：13340163
> 
> 赞同：0
> 
> 时间：2012-11-12T08:07:26.387
> 
> 标签：excel

我正在使用 Web 查询将分号分隔的文件导入 excel，并使用 excel 中的文本到列功能对其进行解析。但是，这是一次解析，选项卡中的值不会更改以反映原始列中的更改（即，每次我进行全部刷新时，我希望分隔符分隔的列反映更改）。

每次原始内容发生变化时，如何自动将文本运行到列功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:15:42.750

由于它已经是一个文本文件，您还可以使用“数据”>“来自文本”选项，这将自动应用文本到列的功能。

现在，您可以在工作簿中将其作为 Connection 主动链接，并且每当它更新时，都会应用文本到列。

# c# - 将 ItemsControl 中的项目属性绑定到 ItemsSource 之外的值？

> ID：13340176
> 
> 赞同：1
> 
> 时间：2012-11-12T08:08:43.250
> 
> 标签：c#, wpf, xaml

我有一个 ItemsControl 和一个人员列表。人员列表中的每个元素都包含人员的姓名，没有其他内容。在 c# 代码中，我将 testItemsControl.ItemsSource 设置为包含每个人的姓名的可观察集合。公司在代码隐藏中定义。下面的 xaml 代码正确地找到了名称，但当然没有找到公司。

```
 <ItemsControl x:Name="testItemsControl">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <TextBlock Text="{Binding Name}"/>
                    <TextBlock Text="{Binding Company}"/>
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

如何正确绑定公司？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:11:16.080

您必须使用 RelativeSource 绑定。

后面的代码。

```
public partial class Window3 : Window
{
    public Window3()
    {
        InitializeComponent();
        this.DataContext = this;
        BuildData();
        Company = "XYZ";
        testItemsControl.ItemsSource = Persons;
    }

    private void BuildData()
    {
        Persons.Add(new Person() { Name = "R1" });
        Persons.Add(new Person() { Name = "R2" });
        Persons.Add(new Person() { Name = "R3" });
    }

    public string Company { get; set; }

    private ObservableCollection<Person> _persons = new ObservableCollection<Person>();

    public ObservableCollection<Person> Persons
    {
        get { return _persons; }
        set { _persons = value; }
    }
} 
```

XAML 代码

```
<ItemsControl x:Name="testItemsControl">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name}" Margin="5"/>
                    <TextBlock Text="{Binding Company, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Margin="5" />

                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

谢谢， 拉吉尼坎特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:32:56.500

您定义的每个 DataTemplate 都使用 ItemsControl.ItemsSource 中的一个对象作为 DataContext。在您的情况下，它是一个人类。

因此，在 DataTemplate 中，它正在寻找 Contents Name 和 Company 属性。在本例中，Person.Name、Person.Company。

如果要查找公司，可以在人员类中添加公司属性，或设置绑定路径以查找公司属性。后者取决于您相对于 itemsSource 定义公司属性的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:58:37.627

创建一个包含 Name 和 Company 的类，使用新创建类型的对象组成列表并将其设置为 itemssource。

```
internal class Worker 
{
    public string Name { get; set; }
    public string Company { get; set; }
} 
```

# ios5 - 如何在不更改 Xcode 版本的情况下知道 iOS 5 应用程序是否可以在 iOS 6 上运行？

> ID：13340182
> 
> 赞同：0
> 
> 时间：2012-11-12T08:09:15.320
> 
> 标签：ios5, ios6, xcode4.3, compatibility

我如何检查我的应用程序的兼容性，基于在 Lion 上使用 Xcode 4.3.3 创建的 IOS 5.0.1，在 IOS 6 上，而无需更改我当前的 MAC OS 版本和 Xcode？有什么办法吗？作为对这个问题的补充，如果我将我的申请提交到 Apple Store，它是否会因为创建与 IOS 5 兼容而不是与 IOS 6 兼容的简单原因而被拒绝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:19:32.053

目前尚不清楚您所说的“兼容”是什么意思。一件事是你链接的 SDK 版本，一件事是你的部署目标设置，然后是关于 iOS 5 和 6 之间各种 API、UI 和行为差异的实际代码兼容性。

*   [看来](http://www.cocos2d-iphone.org/forum/topic/41104)您必须至少使用 iOS 6 SDK 进行开发才能提交您的应用程序。

*   但是，您的部署目标设置可能会尽可能低，以便您的应用仍然支持旧的 iOS 版本。

*   您的应用程序不必与 iOS 6“兼容”，因为您在 iOS 6 上对其进行了测试并处理了从 iOS 5 迁移到 iOS 6 时可能出现的所有潜在问题。当然，用户体验在这种情况下，iOS 6 可能会受到影响，但除非存在重大错误，否则审阅者不会在意。

# c# - 链接图像的 SourceFullName 与实际链接不同

> ID：13340185
> 
> 赞同：2
> 
> 时间：2012-11-12T08:10:05.213
> 
> 标签：c#, ms-word, office-interop

我正在使用 Office Interop 和 C# 3.5 开发的单词自动化程序中有一个奇怪的案例

该程序的一项任务是将word文档中的任何链接图像复制到不同的位置，并将这些图像的链接源重写到新位置。

现在，在一个文档中，当我检查链接文件（使用 Word 2010）时，它会将图像指向类似于以下位置的位置`images\image_file.jpg`- 因此，图像位于文档所在文件夹的子文件夹中。这是完全正确的。

![链接图像编辑屏幕](../Images/c9327945370b7e3aff8042529502e199.png)

但是，当我的程序运行到该图像`LinkFormat.SourceFullName`时，同一图像的 为我提供了我们本地网络上的路径，例如，与我期望的**实际**`\\net-storage\customer\001 - customername\data\images\documents\image_file.jpg`图像链接没有任何关联。

 **这里出了什么问题？如何在我的程序中获得**正确**的图像源？

编辑*sw_lasse*：我确定这是一个相对路径，因为（在其他文档中）删除相对路径中的图像并更新 word 中的字段后，找不到图像。所以它绝对是一个相对路径。

此外，两条路径（网络和相对路径）彼此之间没有关联。网络上的图像使用完全不同的文件夹层次结构，这就是为什么有一个`document`子文件夹，而它不存在于相对路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:35:55.207

我知道您编写 VSTO C# 代码，这是 VBA，但我相信这可以解释您看到的奇怪行为。

您不能使用：

```
myPicPath = Options.DefaultFilePath(wdPicturesPath) 
```

**...因为如果用户插入了来自不同文件夹的图片，默认文件路径将返回该文件夹，而不是对话框中的实际设置。**相反，您可以使用：

```
With Dialogs(wdDialogToolsOptionsFileLocations)
    .Path = "PICTURE-PATH"
    .Update
    myPicPath = .Setting

    If Not Right$(myPicPath, 1) = "\" Then
        myPicPath = myPicPath + "\"
    End If

    MsgBox myPicPath 
End With 
```

同样，您不能使用：

```
myDocPath = Options.DefaultFilePath (wdDocumentsPath) 
```

获取默认文档路径，因为这会返回当前 FileOpen 路径，而不是默认文档路径！！

相反，使用：

```
Dim myDocPath As String
myDocPath = Dialogs(wdDialogToolsOptionsFileLocations).Setting

'Add a "\" at the end of the path, unless the setting is already followed by a "\" -
'which it will be if the setting is set to a root folder 
If Not Right$(myDocPath, 1) = "\" Then
    myDocPath = myDocPath + "\"
End If

MsgBox myDocPath 
```

这些天我很擅长将 VBA 转换为 C#，如果你提供一些不起作用的代码，我会转换这个 VBA 以适应。

[参考：如何检索 Word 的默认文档路径或图片路径设置](http://word.mvps.org/faqs/macrosvba/GetDocPath.htm)**

# sql - 替换或删除字符，然后转换为十进制

> ID：13340190
> 
> 赞同：3
> 
> 时间：2012-11-12T08:10:25.750
> 
> 标签：sql, sql-server

我需要删除或替换一个不需要`(%)`的字符，它位于字符串的末尾，然后将字符串转换为小数，因为我需要得到2 个名为和的字段的**总和**`discount1``discount2`

我尝试的最后一个组合是：

```
replace ((p16.pa_value,'%','')CAST (p16.pa_value AS DECIMAL (3,0))) as discount2, 
```

这似乎是超级错误的，因为`CAST`在`replace`声明中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T08:14:06.567

试试这个：

```
CAST (replace (p16.pa_value,'%','') AS DECIMAL (3,0)) as discount2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:43:32.057

好的，我不知道为什么小数点后有三位：`DECIMAL (3,0)`因为如果转换为十进制，它应该是：十进制（10；后面有多少个零，）-[更多信息在这里](http://msdn.microsoft.com/en-us/library/aa258271%28v=sql.80%29.aspx)

试试这个：

```
(cast(replace(p16.pa_value, '%','')  as decimal (10,2))) as discount 
```

# iphone - 根据内容大小改变 UIWebView 的高度

> ID：13340191
> 
> 赞同：0
> 
> 时间：2012-11-12T08:10:33.267
> 
> 标签：iphone, ios, uiwebview

我正在创建一个 webview 以在我的应用程序中显示一些文本。

```
CGRect frame = CGRectMake(lblContent.frame.origin.x, 
                          lblContent.frame.origin.y,
                          lblContent.frame.size.width,
                          lblContent.frame.size.height);

NSString *htmlText = HTML_DIV_TAG;
htmlText = [htmlText stringByAppendingFormat:@"%@%@", _artistDetail.strContent, @"</div>"];
htmlText = [htmlText stringByReplacingOccurrencesOfString:@"''" withString:@"'"];

UIWebView *webView = [[UIWebView alloc]initWithFrame:frame];
[webView loadHTMLString:htmlText baseURL:nil];
webView.scrollView.bounces = NO;
[self addSubview:webView]; 
```

这是我将其放入我的应用程序的一组代码。

但是需要根据内容大小调整web view的高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:15:16.173

尝试 -

```
 float height=   [iText sizeWithFont:[UIFont fontWithName:@"FontSpecifiedInTheHtmlText" size: -SpecifiedInHTMLText- constrainedToSize:CGSizeMake(320, 100000)lineBreakMode:UILineBreakModeWordWrap].height; 
```

在您获得内容文本的高度后，您可以设置 WebView 的框架/边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:47:04.367

如果您设置`webview.delegate = self`，您可以添加`UIWebViewDelegate`协议方法`webViewDidFinishLoad:`并调用一小段 javascript 来确定高度：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *output = [webview stringByEvaluatingJavaScriptFromString:@"document.body. scrollHeight;"];
    NSLog(@"height: %@", output);
} 
```

另一种方法是在此方法中确定 webView 的 scrollView `contentSize`，因为在调用此方法时它应该适合整个网站。

*此方法的唯一问题是，当页面*完成加载时会调用此方法。图像的处理方式不同，这意味着 webView 可能会由于完成加载的图像而改变大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:26:08.530

UIWebview 是可滚动的。因此，当您在 UIWebview 中打开页面时，您无需根据页面内容调整高度。您可以通过滚动 UIWebView 来查看所有内容。您应该检查是否为您的 web 视图启用了用户交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:16:50.937

你可能想要这个：

```
[webView.scrollView setContentInset:UIEdgeInsetsMake(0, 0, 20, 0)]; 
```

# c++ - 在 C++ 中打印到标准输出时 /* 注释的行为

> ID：13340192
> 
> 赞同：1
> 
> 时间：2012-11-12T08:10:34.440
> 
> 标签：c++, comments, stdout

我的问题来自以下 2 行简单的 C++ 代码：

```
cout<<"/*";
cout<<"*/"; 
```

在我看来，注释定界符`/* */`会吃掉字符`";`以及`cout<<"`它们内部的字符。所以这两行必须等于：

```
cout<<""; 
```

令人惊讶的是，当我编译和测试代码时，程序会打印：

```
/**/ 
```

程序很可能将注释分隔符识别为普通字符。怎么可能？代码在 gcc-c++-4.7.2 中编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:14:43.983

C 标准告诉我们如何运行解析器，事实证明（由于各种原因）当您开始解析字符串文字时，您不会停止，直到到达双引号结尾，即使有注释字符中间。尝试其中一些：

```
cout<<"// this won't give an error";

cout<<"Does it print /* this here */?"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T08:14:44.907

来自 C[常见问题解答](http://c-faq.com/misc/nestcomment.html)。

> 字符序列 /* 和 */ 在双引号字符串中并不特殊，因此不会引入注释，因为程序（特别是生成 C 代码作为输出的程序）可能想要打印它们。（很难想象为什么有人想要或需要在带引号的字符串中放置注释。很容易想象一个程序需要打印“/*”。）

# c++ - 通过引用传递的对象未按预期工作

> ID：13340195
> 
> 赞同：1
> 
> 时间：2012-11-12T08:10:42.630
> 
> 标签：c++, function, object

我有一个带有树视图类、控制台类和选项类的程序。

我想将树视图对象传递给选项对象，并能够访问树视图内部的动态值（文件列表等）。

我试过通过引用传递，它编译，但通过一些调试消息，我可以告诉它不是同一个对象，所以值都是空的。

选项面板`Init`标题：

```
public:
    void Init (HWND, PnlConsole&, PnlTree&);
    ...
private:
    PnlTree tree_;
    PnlConsole console_;
    ... 
```

选项面板`Init`功能：

```
void PnlOptions::Init(HWND hwnd0, PnlConsole& console0, PnlTree& tree0) {
    tree_ = tree0;
    console_ = console0;
    ... 
```

文件中类的实例化`main`：

```
PnlTree pnl_tree;
PnlOptions pnl_options;
PnlConsole pnl_console; 
```

调用`Init`内部`main`函数：

```
pnl_options.Init(hwnd0, pnl_console, pnl_tree); 
```

我已经在这方面工作了很长时间（因为有些人已经阅读了我以前的问题），这非常令人沮丧。有人可以帮我完成这项工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:14:07.037

`console0`and`tree0`是通过引用传递到`Init()`的，但是由于 and 的类型，函数内的赋值导致参数的`tree_`副本`console_`。

在此上下文中无法更改`tree_`and的类型，因为不是必须立即分配构造函数和引用类型（在构造函数初始值设定项列表中）。`console_``Init()`

一种解决方案是制作类型指针并获取参数的地址。请注意，有一个生命周期要求，即所引用的对象`console0`必须`tree0`存在，只要`PnlOptions`需要它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T08:14:42.977

从上面的代码来看，传递给 init 的 pnl_console 和 pnl_tree 似乎是结构，所以它们只会存在一段时间，当带有 Init 函数的块将存在时。

在您的 Init 函数中，您通过 & 传递引用，但将其分配给结构。我会推荐，通过 *

```
 void PnlOptions::Init(HWND hwnd0, PnlConsole * console0, PnlTree * tree0)

 PnlTree * pnl_tree;
 PnlOptions pnl_options;
 PnlConsole * pnl_console;

 pnl_options.Init(hwnd0, &pnl_console, &pnl_tree); 
```

# java - 获取 Math.abs 的十进制数输入/输出

> ID：13340196
> 
> 赞同：4
> 
> 时间：2012-11-12T08:10:45.483
> 
> 标签：java, exception, java.util.scanner

所以我的问题如下：我在第 12 行收到一个我想解决但没有找到结果的错误。我使用 Eclipse 来运行和编写我的代码。

这就是我所做的：

1.  我写绝对
2.  我输入一个带小数的数字
3.  弹出一个错误说

    ```
    Exception in thread "main" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at java.util.Scanner.nextDouble(Unknown Source)
    at apples.main(apples.java:12) 
    ```

这怎么行不通？另外，我也尝试在 Eclipse 之外的 CMD 中运行它，但没有成功。

```
import java.util.Scanner;

class apples
{
   public static void main(String args[])
   {
      Scanner scan = new Scanner(System.in);
      System.out.println("Select one of the following(absolute,ceil,floor,max,min,power,squareroot):  ");
      String code = scan.nextLine();
      if (code.contains("absolute"))
      {
         System.out.println("Enter a number to get absolute value: ");
         Scanner num1 = new Scanner(System.in);
         double numberone;
         double numberone1 = num1.nextDouble();
         System.out.println(Math.abs(numberone1));
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:23:07.140

如果我为您的程序输入有效的输入，您的代码对我有用。

如果您收到[InputMismatchException](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/InputMismatchException.html)意味着您没有向 Scanner 提供预期的输入。

```
double numberone1 = num1.nextDouble(); 
```

为此，从您的命令中，您应该只给出 Double 值，否则它会抛出`InputMismatchException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:13:18.793

**InputMismatchException**，由 Scanner 引发的此异常，表示检索到的令牌与预期类型的​​模式不匹配，或者令牌超出预期类型的​​范围。

`num1.nextDouble()`-> 这里你的传递值与双正则表达式不匹配，或者超出范围。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-21T21:47:56.873

导入 java.util.Scanner；

```
public class Test{

    private static Scanner scan;
    private static Scanner num1;
    public static void main(String[] args){

        scan = new Scanner(System.in);
        String code;
        do{  
        System.out.println("Select one of the following(absolute,ceil,floor,max,min,power,squareroot):  ");
            code = scan.nextLine();
        if (code.contains("absolute"))
          {

             System.out.println("Enter a number to get absolute value: ");
             num1 = new Scanner(System.in);
             //double numberone;
             double numberone1 = num1.nextDouble();
             System.out.println(Math.abs(numberone1));
             }
          }while(!code.contains("absolute"));

    }
} 
```

# c# - 使用 NHibernate 读取未知的附加字段

> ID：13340197
> 
> 赞同：0
> 
> 时间：2012-11-12T08:10:46.210
> 
> 标签：c#, nhibernate, nhibernate-3

我有一张用 NHibernate 映射的表：

```
 Person
 ------
 Firstname
 Lastname 
```

还有一个 DTO，称为`Person`.

现在，有可能存在比设计时已知的更多的领域。用户可以在运行时添加客户定义的字段。在这种情况下，我的表中会生成额外的字段（这是历史数据，我无法更改）。

“新”表现在看起来像：

```
Person
------
Firstname
Lastname
IF_Field1
IF_Field2 
```

现在，我正在寻找一种使用 NHibernate 将这些值（从 IF_Field1、IF_Field2 等）获取到 DTO 的方法`Person`。例如作为 Hashtable 或类似的东西。

有没有办法达到我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:45:32.630

看看动态组件： http: [//nhibernate.info/doc/nh/en/index.html#components-dynamic](http://nhibernate.info/doc/nh/en/index.html#components-dynamic)

# c++ - 覆盖 ADL 选择的重载

> ID：13340204
> 
> 赞同：1
> 
> 时间：2012-11-12T08:11:49.730
> 
> 标签：c++, operator-overloading, argument-dependent-lookup, using-declaration

我正在使用一个有缺陷的库`operator<<`，我想用我自己的版本替换它。它遵循 ADL 根据参数在库名称空间中的成员资格选择重载的习惯用法。有没有办法让 C++ 选择我自己的`operator<<`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:15:54.337

一种次优的解决方案是围绕库类型声明一个包装类。

一般实现如下所示：

```
/* Namespace-specific reference wrapper type.
   Associates a function argument with the desired namespace.
   Declare a new use_local_t for each namespace with an overriding overload */
template< typename t >
struct use_local_t
    { t ref; };

template< typename t >
use_local_t< t && >
use_local( t &&o )
    { return { std::forward< t >( o ) }; }

/* The overriding overload.
   Instead of overloading on a specialization of use_local_t, use the
   general template and enable_if. This allows for the various kinds of
   references that use_local_t might forward, and conversion of the function
   argument to the expected library_type parameter. */
template< typename t >
inline
typename std::enable_if<
    std::is_convertible< t, library_type const & >::value,
    std::ostream &
>::type
operator<< ( std::ostream &s, use_local_t< t > ul ) {
    return s << ul.ref.foo;
}

std::cout << my_namespace::use_local( library_obj ); 
```

这经过测试可以与表达式模板一起使用。请注意，如果覆盖重载不匹配，则来自 GCC 4.7 的错误消息是一条红鲱鱼……它指的是`std::`涉及流右值引用的重载：

> /opt/local/include/gcc47/c++/ostream:600:5: error: initializing argument 1 of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&)

# android - 使用 jquery 更改颜色或单选按钮

> ID：13340207
> 
> 赞同：0
> 
> 时间：2012-11-12T08:12:02.807
> 
> 标签：android, jquery, cordova

在 android phonegap 应用程序中，我需要使用 jquery 更改所选单选按钮中心圆的颜色，因为我的 html 页面有蓝色背景。如何执行此操作。

这是我的代码：

```
input[type=radio]:active
{
 background-color:orange
} 
```

我已经尝试了上面的代码，但它对我没有帮助。请指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:21:09.207

您无法更改单选按钮本身的背景颜色，但您可以创建自己的自定义单选按钮。

请参阅此示例： http:
[//www.maratz.com/blog/archives/2006/06/11/fancy-checkboxes-and-radio-buttons/](http://www.maratz.com/blog/archives/2006/06/11/fancy-checkboxes-and-radio-buttons/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:26:10.970

使用 JQuery Mobile 怎么样？还有一个很棒的[ThemeRoller](http://jquerymobile.com/themeroller/)。

# windows-phone-7 - WP7 我们应该在 XAML 中添加事件处理程序吗？

> ID：13340214
> 
> 赞同：1
> 
> 时间：2012-11-12T08:12:19.367
> 
> 标签：windows-phone-7, xaml, event-handling, unsubscribe

我见过很多 WP7 应用程序，一些在代码中放置事件处理程序，一些在 XAML 中放置事件处理程序

我们应该在 XAML 中添加事件处理程序吗？

当从 导航页面时，该处理程序是否会自动取消订阅该事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:39:33.250

两者都可以，真的没关系！不，当用户从一页导航到下一页时，您不必担心添加/删除事件处理程序。当一个页面不再需要时，它就会被销毁。

唯一可能想要以不同方式处理事情的情况是，如果您使用的是 MVVM 模式，那么您可能想要使用命令而不是事件处理程序。

# android - Light.DarkActionBar 菜单项文本颜色不可更改？

> ID：13340215
> 
> 赞同：21
> 
> 时间：2012-11-12T08:12:27.033
> 
> 标签：android, android-actionbar, actionbarsherlock, android-menu

我一直在开发的应用程序使用ActionBarSherlock，主旋律继承自Theme.Sherlock.Light.DarkActionBar。该设计要求溢出菜单弹出窗口具有深色背景和白色文本。这适用于没有物理菜单按钮的设备，并且文本按预期显示为白色。但是，如果设备确实有物理菜单按钮，则显示的菜单中显示的文本仍为黑色。

我的主题包含

```
<item name="android:panelBackground">@drawable/menu_hardkey_panel</item> 
```

...@drawable/menu_hardkey_panel 是一个深色的 9patch。

菜单弹出的最终外观是......![Light.DarkActionbar 问题](../Images/4a75c7c01560c925eb78de811b105f84.png)

我无法确定为什么会发生这种情况，或者如何手动更改文本的颜色。在我的主题中，我尝试了以下所有方法......

```
<item name="android:actionMenuTextColor">@android:color/white</item>
<item name="android:textAppearanceLargePopupMenu">@style/MyMenuTextAppearance.Large</item>
<item name="android:textAppearanceSmallPopupMenu">@style/MyMenuTextAppearance.Small</item> 
```

我什至试过

```
<item name="android:actionBarWidgetTheme">@style/Theme.MyApp.Dark</item> 
```

... Theme.MyApp.Dark 在哪里...

```
<style name="Theme.MyApp.Dark" parent="@style/Theme.Sherlock">
    <item name="android:dropDownListViewStyle">@style/DropDownListView</item>
    <item name="dropDownListViewStyle">@style/DropDownListView</item>
</style> 
```

没有人让我将文本更改为白色。如果我让我的基本主题继承自 Theme.Sherlock，问题就解决了，文本是白色的，但不幸的是，这不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:04:57.820

对此并不完全确定，但我相信弹出菜单使用与溢出菜单相同的样式。在这种情况下，你只会做这样的事情。

```
<item name="android:itemTextAppearance">@style/your_new_text_appearance</item>

<style name="your_new_text_appearance">
    <item name="android:textColor">@android:color/white</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:24:03.123

给它一个机会：有一个名为`actionMenuTextAppearance`. 你试过吗？

**更新：**我做了更多的挖掘，我相信这个文件是[布局](http://androidxref.com/4.1.1/xref/frameworks/base/core/res/res/layout/list_menu_item_layout.xml)，他们指的是`textAppearanceListItemSmall`和`textAppearanceSmall`. 但是，它从一个特殊的主题中获取这个值，该主题指定[如下`Theme.Holo.Light`](http://androidxref.com/4.1.1/xref/frameworks/base/core/res/res/values/themes.xml#1335)

```
<item name="panelMenuListTheme">@android:style/Theme.Holo.Light.CompactMenu</item> 
```

像这样`Theme.Holo`：

```
<item name="panelMenuListTheme">@android:style/Theme.Holo.CompactMenu</item> 
```

问题来自于的父级`Sherlock.__Theme.DarkActionBar`是`Theme.Sherlock.Light`. 这对深色操作栏无效。取线`Theme.Holo`应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T20:34:42.357

在我的研究中，我还没有找到改变文本颜色的方法，但你至少可以优雅地处理硬键菜单。

这个链接为我提供了一个可以解决的问题： [https ://github.com/jgilfelt/android-actionbarstylegenerator/issues/30](https://github.com/jgilfelt/android-actionbarstylegenerator/issues/30)

从我生成的主题中注释掉“android:panelBackground”项允许文本至少在硬键菜单上可见，即使它与主题不完全匹配。

您也可以尝试用适合您的主题和黑色文本的东西替换“menu_hardkey_panel_whatever .9.png”drawable *。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:54:12.103

我找到了解决方案，使用：

```
getSupportActionBarContext() 
```

例如

```
ArrayAdapter<CharSequence> list =
            ArrayAdapter.createFromResource(getSupportActionBarContext(), R.array.navigation, layout.simple_spinner_item);
    list.setDropDownViewResource(layout.simple_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:32:55.347

对我来说，这解决了问题，试试这个：

```
<style name="MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    ...
    <item name="actionBarWidgetTheme">@null</item>
    <item name="android:actionBarWidgetTheme">@null</item>
    ...
</style> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-20T23:02:44.767

我认为，由于 Theme.Sherlock.Light.DarkActionBar 没有正确设置其内容的样式，这是由于 actionWidgetTheme 属性与 ContextThemeWrapper 一起使用来膨胀动作栏视图（杰克沃顿自己的话），因此类似于将需要以下（未经测试）来满足您的需求，尽管以一种方式打破了您不使用 Theme.Sherlock 作为父母的需要：

```
<style name="MyColorTheme" parent="Theme.Sherlock">
    <item name="android:actionMenuTextColor">@android:color/white</item>
    <item name="actionMenuTextColor">@android:color/white</item>
</style>

<style name="YourMainTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:actionMenuTextAppearance">@style/MyColorTheme</item>
    <item name="actionMenuTextAppearance">@style/MyColorTheme</item>
</style> 
```

可能工作或不工作。这就是问题所在 ：）

# html - HTML 生成的带有页眉、页脚和水印的 Microsoft Word 文档

> ID：13340216
> 
> 赞同：14
> 
> 时间：2012-11-12T08:12:41.693
> 
> 标签：html, ms-word, watermark

我正在寻找由 HTML 生成的 Microsoft Word 文档的示例。它应该包含页眉、页脚和水印。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-12T08:12:41.693

这是一些示例，希望它可以帮助其他尝试使用 HTML 生成 ms word .doc 文件的人。

```
<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">
<head><meta http-equiv=Content-Type content="text/html; charset=utf-8"><title></title>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<style>
@page
{
    mso-page-orientation: landscape;
    size:29.7cm 21cm;    margin:1cm 1cm 1cm 1cm;
}
@page Section1 {
    mso-header-margin:.5in;
    mso-footer-margin:.5in;
    mso-header: h1;
    mso-footer: f1;
    }
div.Section1 { page:Section1; }
table#hrdftrtbl
{
    margin:0in 0in 0in 900in;
    width:1px;
    height:1px;
    overflow:hidden;
}
p.MsoFooter, li.MsoFooter, div.MsoFooter
{
    margin:0in;
    margin-bottom:.0001pt;
    mso-pagination:widow-orphan;
    tab-stops:center 3.0in right 6.0in;
    font-size:12.0pt;
}
</style>
<xml>
<w:WordDocument>
<w:View>Print</w:View>
<w:Zoom>100</w:Zoom>
<w:DoNotOptimizeForBrowser/>
</w:WordDocument>
</xml>
</head>

<body>
<div class="Section1">

    <p>&nbsp;</p>
<br/>
    <table id='hrdftrtbl' border='0' cellspacing='0' cellpadding='0'>
    <tr><td>        <div style='mso-element:header' id=h1 >
        <!-- HEADER-tags -->
            <p class=MsoHeader >HEADER</p>
        <!-- end HEADER-tags -->
        </div>
    </td>
    <td>
    <div style='mso-element:footer' id=f1><span style='position:relative;z-index:-1'> 
        <!-- FOOTER-tags -->
        FOOTER

        <span style='mso-no-proof:yes'><!--[if gte vml 1]><v:shapetype
         id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
         path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
         <v:formulas>
          <v:f eqn="if lineDrawn pixelLineWidth 0"/>
          <v:f eqn="sum @0 1 0"/>
          <v:f eqn="sum 0 0 @1"/>
          <v:f eqn="prod @2 1 2"/>
          <v:f eqn="prod @3 21600 pixelWidth"/>
          <v:f eqn="prod @3 21600 pixelHeight"/>
          <v:f eqn="sum @0 0 1"/>
          <v:f eqn="prod @6 1 2"/>
          <v:f eqn="prod @7 21600 pixelWidth"/>
          <v:f eqn="sum @8 21600 0"/>
          <v:f eqn="prod @7 21600 pixelHeight"/>
          <v:f eqn="sum @10 21600 0"/>
         </v:formulas>
         <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
         <o:lock v:ext="edit" aspectratio="t"/>
        </v:shapetype><v:shape id="Picture_x0020_1" o:spid="_x0000_s3073" type="#_x0000_t75"
         alt="VHB" style='position:absolute;
         margin-right:0pt;margin-top:-400pt;
         z-index:-1;
         visibility:visible;mso-wrap-style:square;mso-wrap-distance-left:9pt;
         mso-wrap-distance-top:0;mso-wrap-distance-right:9pt;
         mso-wrap-distance-bottom:0;mso-position-horizontal:absolute;
         mso-position-horizontal-relative:text;mso-position-vertical:absolute;
         mso-position-vertical-relative:text'>
         <v:imagedata src="https://www.google.bg/logos/2012/Rodin-2012-homepage.png"/>
        </v:shape><![endif]--></span>
           <p class=MsoFooter>
           <span style='mso-tab-count:2'></span>
           Page <span style='mso-field-code: PAGE'><span style='mso-no-proof:yes'></span> from <span style='mso-field-code: NUMPAGES'></span>

        <!-- end FOOTER-tags -->
   </span>

        </p>
    </div>

    <div style='mso-element:header' id='fh1'>
        <p class='MsoHeader'><span lang='EN-US' style='mso-ansi-language:EN-US'>&nbsp;<o:p></o:p></span></p>
        </div>
        <div style='mso-element:footer' id='ff1'>
        <p class='MsoFooter'><span lang='EN-US' style='mso-ansi-language:EN-US'>&nbsp;<o:p></o:p></span></p>
    </div>

    </td></tr>
    </table>
</div>

</body></html> 
```

您可以通过在元素 v:shape id="Picture_x0020_1" 上设置宽度、高度、margin-top、margin-right 来调整水印图片：内联样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-21T12:37:01.480

尝试：

```
<img src="http://www.website.com/path/to/image.jpg" width="width_in_points" height="height_in_points" style="width:width_in_poits;height:height_in_points;" /> 
```

一个完整的例子：

```
<img src="http://www.website.com/path/to/image.jpg" width="233" height="54" style="width:233pt;height:54pt;" /> 
```

我对 VML 和在 Word 中嵌入图像并不是很熟悉，但就事情而言，它适合我的目的，我能够将它嵌入到 Word 文档中。Word 将在首次加载时自动处理嵌入。

请记住，Word 中的默认度量是厘米和磅，因此您必须全部以磅为单位。可能一个好方法是先嵌入图像，在 Word 中打开，如果需要，调整大小并通过 Word 获取图像测量值。然后返回您的应用程序并设置宽度和高度。尽量保持与 Word 设置的比例相同，否则它会调整图像大小。至少这就是 Word 对我所做的。

编辑：

我修改了上面的图像示例 - 它适用于某些版本的 word，但不嵌入图像。每次打开文件时都会收到一条警报，询问您是否要下载外部文件。如果您的办公室安全设置阻止您这样做，您需要使用第一个答案嵌入文件，我已确认可与 office 2007+ 一起使用：

```
 <div style='mso-element:header' id=h1 >
            <span style='mso-no-proof:yes'>
                <!--[if gte vml 1]>
                <v:shapetype id="_x0000_t75"
                    coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
                    filled="f" stroked="f">
                    <v:stroke joinstyle="miter"/>
                    <v:formulas>
                        <v:f eqn="if lineDrawn pixelLineWidth 0"/>
                        <v:f eqn="sum @0 1 0"/>
                        <v:f eqn="sum 0 0 @1"/>
                        <v:f eqn="prod @2 1 2"/>
                        <v:f eqn="prod @3 21600 pixelWidth"/>
                        <v:f eqn="prod @3 21600 pixelHeight"/>
                        <v:f eqn="sum @0 0 1"/>
                        <v:f eqn="prod @6 1 2"/>
                        <v:f eqn="prod @7 21600 pixelWidth"/>
                        <v:f eqn="sum @8 21600 0"/>
                        <v:f eqn="prod @7 21600 pixelHeight"/>
                        <v:f eqn="sum @10 21600 0"/>
                    </v:formulas>
                    <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
                    <o:lock v:ext="edit" aspectratio="t"/>
                </v:shapetype>
                <v:shape id="_x0000_s1025" type="#_x0000_t75" alt="" style='position:absolute;
                    margin-left:0;margin-top:2pt;width:537pt;height:57pt;z-index:251659264'>
                    <v:imagedata src="http://www.website.com.au/path/to/image.jpg"/>
                    <w:wrap type="square"/>
                </v:shape>
                <![endif]-->
            </span>
        </div> 
```

将其放在以下部分：

```
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);} 
```

只需确保所有测量值都以点为单位。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-12T21:08:15.567

下面的例子：

*   非常简洁，因为它去除了额外的 HTML 标记，并提供了一个示例，其中包含大约一半的代码行与其他答案
*   将页眉/页脚元素所需的额外空间降低到 1pt（其他答案会在您的文档中添加几厘米的不可见内容，这通常会导致最后出现额外的空白页）
*   将页眉/页脚代码定位在内容的***顶部***，这是一个更好的位置，因为无论内容长度如何，它都不会改变
*   包含使用页码参考的工作示例（其他一些答案的参考代码已损坏）

```
<html>
<head>
    <style type="text/css">
    @page Section1 {
        margin:0.75in 0.75in 0.75in 0.75in;
        size:841.7pt 595.45pt;
        mso-page-orientation:landscape;
        mso-header-margin:0.5in;
        mso-header: h1;
        mso-footer-margin:0.5in;
        mso-footer: f1;
    }

    div.Section1 {page:Section1;}

    p.headerFooter { margin:0in; text-align: center; }
    </style>
</head>
<body><div class=Section1>

<!-- header/footer:
  This element will appears in your main document (unless you save in a separate HTML),
  therefore, we move it off the page (left 50 inches) and relegate its height
  to 1pt by using a table with 1 exact-height row
-->
<table style='margin-left:50in;'><tr style='height:1pt;mso-height-rule:exactly'>
    <td>
      <div style='mso-element:header' id=h1>
        <p class=headerFooter>
            Header content goes here
         </p>
      </div>
      &nbsp;
    </td>

    <td>
      <div style='mso-element:footer' id=f1>
        <p class=headerFooter>
        Page
        <span style='mso-field-code:PAGE'></span>
        of
        <span style='mso-field-code:NUMPAGES'></span>
      </p>
      </div>
      &nbsp;
</td></tr></table>

Main content goes here.
Here's a page break:
<br clear=all style='mso-special-character:line-break; page-break-before:always'>
This is page 2

</div></body>
</html> 
```

# wpf - WPF 如何在 MVVM 中执行从主视图模型到子视图模型的命令

> ID：13340219
> 
> 赞同：1
> 
> 时间：2012-11-12T08:13:01.867
> 
> 标签：wpf, mvvm

我正在使用 MVVM。我的 MainView 中有一个 tabcontrol 和多个按钮。当我单击某个按钮时，它将在 tabitem 中加载子视图。这个子视图也有tabcontrol。现在，当我单击其他按钮时，子子视图应作为 tabitem 加载到子视图选项卡控件中。

设置这样的导航的最佳做法是什么？

我不想使用 EventAggregator。还有另一种方法可以做到这一点吗？

那么如何在子视图中执行命令以从主视图或主窗口将子选项卡控件中的子子视图加载为 tabitem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:54:53.190

您始终可以使用**[复合命令](http://www.silverlightshow.net/items/Working-with-Prism-4-Part-3-Composite-Command-and-Pub-Sub-Events.aspx)**。
使按钮命令复合，并让子视图**[注册](http://msdn.microsoft.com/en-us/library/gg405494%28v=pandp.40%29.aspx#sec3)**到这些命令

顺便说一句，是否有不想使用 EventAggregator 的特定原因？

# javascript - SCORM Adob e Presenter 7 Content 没有在 LMS 中调用 doInitialize

> ID：13340222
> 
> 赞同：0
> 
> 时间：2012-11-12T08:13:16.237
> 
> 标签：javascript, asp.net, adobe, scorm

我正在开发一个使用 Adob​​e Presenter 7 SCORM 内容的基于 ASP.NET 的 LMS。根据SCORM 2004 RTE 文档，SCO 将自动搜索SCORM API 并初始化通信。我已经在一页中包含了 SCORM 内容和 API Wrapper。当我尝试运行代码时，SCO确实找到了API，但没有调用API中的doInitialize()函数。我做错了什么？我非常感谢您的回复。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <iframe src="JS/SCORM_2004_APIWrapper.js" name="API_1484_11" width="0" height="0"></iframe>
        <iframe src="SCORM2004Sample/SCORM.htm" width="800" height="600"></iframe>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:06:01.077

您的 SCORM 2004 API 必须有一个 Initialize() 方法（不是 doInitialize）来启动通信。

外汇

# objective-c - CA的iphone应用程序崩溃：事务

> ID：13340225
> 
> 赞同：0
> 
> 时间：2012-11-12T08:13:43.230
> 
> 标签：objective-c, iphone, ios6, core-animation

当我尝试使用 ios 6 推送视图控制器时，我的应用程序崩溃了，它似乎在 ios 5 中运行良好。崩溃详细信息如下

0x17aebd0 CA::Transaction::ensure 崩溃。

![在此处输入图像描述](../Images/b4095697d37ea00bcdf8143418668bef.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:03:08.933

我找到了解决方案，这是因为为两个不同的 tableviews 设置了相同的背景视图，我通过为 tableviews 设置不同的背景视图来解决这个问题

UIView *lView=[[UIView alloc]init]; [self.mTableView setBackgroundView:lView]; [l查看发布]；lView=nil;

lView=[[UIView 分配]init]; [self.mTableView2 setBackgroundView:lView]; [l查看发布]；lView=nil;

# oop - 外观模式和对象状态

> ID：13340226
> 
> 赞同：0
> 
> 时间：2012-11-12T08:13:44.187
> 
> 标签：oop, design-patterns

一个对象应该有一个状态和行为。在实现外观模式时，外观对象通常缺少状态并且只有行为。

这种模式可以接受吗？这是一个悬而未决的问题，所以请提供更多信息然后是/否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:40:46.287

没有像“一个对象应该*总是*有一个状态和行为”这样的规则。相反，有一些模式建议您的对象具有很少或没有状态（如[无状态服务](http://en.wikipedia.org/wiki/Service_statelessness_principle)）和很少或没有行为（如[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)）。至于外观设计模式，我相信它并没有明确说明它的状态和行为，所以这取决于你如何实现它，但大多数情况下它只是不需要任何状态......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:19:39.450

好吧，答案在问题的正文中。Facade 对于它自己来说是无用的，并且总是伴随着另一个确实有状态的对象。Facade 只增加了耦合对象接口。所以是的，没关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:15:25.473

门面可能有状态，因为它们可能必须自己做一些工作，例如审计日志或统计信息生成。

如果他们不需要状态，那也是完全可以接受的。

# android - 检测 Android 上支持的音频编码器以防止崩溃“未找到给定的音频编码器 2”

> ID：13340227
> 
> 赞同：5
> 
> 时间：2012-11-12T08:13:50.353
> 
> 标签：android, media, mediarecorder, amr, stagefright

当 Android 设备不支持强制音频编码器时，您会得到：（X=编码器的数字索引）

E/MediaProfiles(4048)：找不到给定的音频编码器 X A/AudioSource(4048)：frameworks/base/media/libstagefright/AudioSource.cpp:58 CHECK(channels == 1 || channels == 2) 失败。A/libc(4048): 0xdeadbaad (code=1) 处的致命信号 11 (SIGSEGV) 在本机代码中。没有例外的反应。应用程序只是强制关闭。

如果实际支持 AAC AMR-NB 和 AMR-WB，有什么方法可以查询 Android >3.x 设备？文档（[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)）说这些是核心媒体格式，因此始终受支持。一些实际和普通的手机（主要品牌）没有。

[`MediaCodec.createByCodecName(String name)`](http://developer.android.com/reference/android/media/MediaCodec.html#createByCodecName%28java.lang.String%29)和 [Get supported Codec for Android device](https://stackoverflow.com/questions/11791473/get-supported-codec-for-android-device) 仅适用于 API16=Android 4.1 但有问题的设备是 4.0.x 。它也没有列出 AMR-NB 和 AAC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:11:33.617

在您的 Android 设备上，媒体配置文件/功能存储在名为 media_profiles.xml（在 ICS/4.0 上）的配置文件中。

通常，此文件位于设备上的 /etc 文件夹中。

所以你能做的是

1.  将您的设备连接到 pc 并使用 adb pull 命令拉取 /etc/media_profiles.xml 文件
2.  检查 AudioEncoderCap 属性。广告中的每个功能都将有多个条目。例如：

    **AudioEncoderCap name="aac" enabled="true" minBitRate="8192" maxBitRate="96000" minSampleRate="8000" maxSampleRate="16000" minChannels="1" maxChannels="1"**

3.  如果如上所述将“启用”标志设置为“真”，则设备应支持该功能。如果不支持，“启用”标志将设置为“假”。

AFAIK，jb（4.1）上引入的媒体编解码器框架读取此/类似配置文件以将设备功能公开给应用程序层。

希望这可以帮助。

谢谢！

# php - 如何在 PHP 中使用 ArrayObject 跳过重复出现的一行数据？

> ID：13340228
> 
> 赞同：0
> 
> 时间：2012-11-12T08:13:51.157
> 
> 标签：php

我试图只打印出唯一值。因为我收到了一个巨大的对象数组，所以我现在尝试使用 PHP 的 ArrayObject 类进行迭代

```
$arrayobject = new ArrayObject($data);

$iterator = $arrayobject->getIterator();

while($iterator->valid()){
    echo $iterator->current()->USERID. " : " .$iterator->current()->SUBCATID."<br/>";
    $iterator->next();
} 
```

这是目前的结果

```
201087 : 1
201146 : 1
201087 : 3
201087 : 2 
```

如您所见，第一个数据有两个其他重复项，并且第一个和第二个数据具有相似的 subcatid .. 目标是，仅打印唯一的 userid 和 subcatid .. 鉴于示例代码，如何跳过这些重复数据我的起点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:59:16.550

不太确定我是否理解这个问题，但也许......
您可以对数组进行排序并记住当前的用户 ID，以便您的脚本可以跳过重复项，直到它到达另一个 ID。

```
<?php
$data = data();
usort(
    $data,
    function($a,$b) {
        return strnatcmp($a->USERID, $b->USERID);
    }
);
$current = null;
foreach( $data as $e ) {
    if ( $current!=$e->USERID ) {
        $current = $e->USERID;
        echo $e->USERID, ' ', $e->SUBCATID, "\n";
    }
}   

function data() {

    $x = array(
        array(201087,1),
        array(201146,1),
        array(201087,3),
        array(201087,2),
        array(222222,3)
    );
    foreach($x as $y) {
        $o = new StdClass;
        $o->USERID = $y[0];
        $o->SUBCATID = $y[1];
        $data[] = $o;
    }
    return $data;
} 
```

或者脚本会记住所有先前处理的 id，例如在 hashmap/array 中

```
<?php
$data = data();

$processed = array();
foreach( $data as $e ) {
    if ( !isset($processed[$e->USERID]) ) {
        $processed[$e->USERID] = true;
        echo $e->USERID, ' ', $e->SUBCATID, "\n";
    }
}   

function data() {

    $x = array(
        array(201087,1),
        array(201146,1),
        array(201087,3),
        array(201087,2),
        array(222222,3)
    );
    foreach($x as $y) {
        $o = new StdClass;
        $o->USERID = $y[0];
        $o->SUBCATID = $y[1];
        $data[] = $o;
    }
    return $data;
} 
```

两个脚本都打印

```
201087 1
201146 1
222222 3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T08:25:45.167

```
$ids = array(1,2,3,4,4);
$ids = array_unique($ids); // remove duplicates 
```

# c#-4.0 - 如何设计数据库表和类？

> ID：13340236
> 
> 赞同：2
> 
> 时间：2012-11-12T08:14:07.113
> 
> 标签：c#-4.0, design-patterns, database-design

以下是我系统中的表结构。场景是，系统有客户端。客户可以是多种类型，例如：个人、公司、银行等。我的数据库设计如下。

**表：客户**

```
===============================
| ID    | NAME_CODE | TYPE    |
-------------------------------
| 1000  | Martin    | PERSON  |
| 1002  | George    | PERSON  |
| 1003  | Max_Group | COMPANY |
------------------------------- 
```

**表：人**

```
==================================================
|  ID | CLIENT_ID  | FIRST_NAME   | LAST_NAME    |
--------------------------------------------------
| 1   | 1001       | Martin       | XXXXXXXXXXX  |
| 2   | 1002       | George       | XXXXXXXXXXX  |
-------------------------------------------------- 
```

**表：公司**

```
===================================================
| ID | CLIENT_ID  | NAME           | Location     |
---------------------------------------------------
| 1  | 1003       | Max Group Inc. | XXXXXXXXXXX  |
--------------------------------------------------- 
```

编辑：为 PERSON 和 COMPANY 表添加了 ID。

如果有人可以建议我更好的结构，我欢迎。

对于上述结构，我需要创建类模型。以下是我创建的。

```
class Client
{
   int ID;
   string NameCode;
}

class Person : Client
{
    int ID;
    int ClientId;
    string FirstName;
    stirng LastName;
    //........
}

class Company : Client
{
    int ID;
    int ClientId;
    string Name;
    string Location;
    //.........
} 
```

我觉得上面的模型不合适。可以有一个正确的方法。请建议我一个更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:03:59.883

经过一番讨论，我认为你的桌子设计得很好。

我会这样设计你的桌子：

**表：客户**

```
==============================
| ID   | NAME_CODE | TYPE    |
------------------------------
| 1    | Martin    | 1       |
| 2    | George    | 1       |
| 3    | Max_Group | 2       |
------------------------------ 
```

枚举在哪里`Type`，而不是任何硬编码，以便查询更快。

**表：人**

```
============================================
| CLIENT_ID  | FIRST_NAME   | LAST_NAME    |
--------------------------------------------
| 1          | Martin       | XXXXXXXXXXX  |
| 2          | George       | XXXXXXXXXXX  |
-------------------------------------------- 
```

**表：公司**

```
==============================================
| CLIENT_ID  | NAME           | Location     |
----------------------------------------------
| 3          | Max Group Inc. | XXXXXXXXXXX  |
---------------------------------------------- 
```

这些类看起来像：

```
class Client
{
   int ID;
   string NameCode;
    //........
}

class Person : Client
{
    string FirstName;
    stirng LastName;
    //........
}

class Company : Client
{
    string Name;
    string Location;
    //.........
} 
```

Client 表现在具有每个客户端实体的父 ID。它可以通过为个人和银行设置单独的 id 然后在父客户端表中引用一个外键来逆转，我认为从 db 的角度来看它更容易操作（如果你要进行[组合](http://en.wikipedia.org/wiki/Object_composition)，它可以很好地扩展）。但是在应用程序中我喜欢继承和多态性，所以我发布了直接将它用于数据库设计的内容。

# c++ - c++ 11中二维数组的展开

> ID：13340238
> 
> 赞同：-1
> 
> 时间：2012-11-12T08:14:30.180
> 
> 标签：c++, c++11, multidimensional-array

我有个问题。如果我读取txt文件如下：

> 12.5,14.8,17.4
> 
> 21.6,25.9,32.4
> 
> 27.8,36.2,45.1
> 
> 23.8,28.6,40.5

我读取的值要存储在一个二维数组中`2 x 3`

如何使用 C++11 编写

我原本`2 x 3`二维数组可以长成`4 x 3`数组

如何写数组可以增加行数

当我原本阵列满

并且数据值在新的更大的数组中是完整的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:37:58.340

根据[http://www.cplusplus.com/articles/EzywvCM9/](http://www.cplusplus.com/articles/EzywvCM9/)

“C++11 提供了 std::array，其目的是替换 C 数组。它是动态大小的 std::vector 的固定大小、轻量级的替代方案。”

强调“固定大小”。所以我想，你必须创建一个更大的数组并将条目复制到新数组中。

更多细节在这里[http://en.cppreference.com/w/cpp/container/array](http://en.cppreference.com/w/cpp/container/array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:19:48.667

如果数组的大小发生变化，请不要使用数组。而是使用`std::vector`，它可以动态增长。在二维数据结构的情况下，使用向量的向量。在 C++11ish 伪代码中：

```
using namespace std;

vector<vector<double> > data;
vector<double> dataLine;

vector<double>* readDataLine(istream file) {
    vector<double>* line = new vector<double>;
    for (each row...) {
         double value;
         file >> value;
         line->append(value);
    }
    return line;
}

void readFile() {
    for (each line...) {
         vector<double>* line = readLine(someFileStream)
         data.append(line);
    }

    // access a single element like in an array:
    double element = data[lineNo][rowNo];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:17:46.973

重新声明具有新大小的数组并复制数据，或使用 std::vector

# eclipse - 从 maven 生成 eclipse 文件时使用插件中的 checkstyle 配置

> ID：13340242
> 
> 赞同：2
> 
> 时间：2012-11-12T08:14:37.167
> 
> 标签：eclipse, maven, checkstyle

我有一个通用工件，用于存储构建工具配置文件，例如 checkstyle、pmd 等。

当我从控制台运行时，我可以访问文件并且一切都按预期工作。`mvn site`配置文件包含在我的项目中，并且当我从控制台运行时会按预期生成报告。

`mvn eclipse:eclipse`但是，找不到 eclipse 所需且在运行时应包含的文件。我收到一条错误消息，告诉我找不到文件。

这是我的 POM.xml 文件的重要部分：

```
<build>
  <extensions>
    <extension>
      <groupId>com.foo</groupId>
      <artifactId>build-tools</artifactId>
      <version>1.0</version>
    </extension>
  </extensions>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-eclipse-plugin</artifactId>
      <version>2.9</version>
      <configuration>
        <additionalBuildcommands>
          <buildcommand>net.sf.eclipsecs.core.CheckstyleBuilder</buildcommand>
        </additionalBuildcommands>
        <additionalProjectnatures>
          <projectnature>net.sf.eclipsecs.core.CheckstyleNature</projectnature>
        </additionalProjectnatures>
        <additionalConfig>
          <file>
            <name>.checkstyle</name>
            <location>${basedir}/eclipse-checkstyle.xml</location>
          </file>
        </additionalConfig>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

所以我的问题是如何让 maven 了解这些位于我的构建工具工件中的文件在我运行`eclipse:eclipse`命令时包含在其中？

编辑：找不到的是 eclipse-checkstyle.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-17T22:02:16.533

您应该将包含相关源的 jar 添加为插件的依赖项，而不是扩展：

```
 <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-eclipse-plugin</artifactId>
      <version>2.9</version>
      <configuration>
        ...
      </configuration>
      <dependencies>
        <dependency>
          <groupId>com.foo</groupId>
          <artifactId>build-tools</artifactId>
          <version>1.0</version>
        </dependency>
      </dependencies>
    </plugin>
  </plugins> 
```

# c - 由于 EOF 字符，什么情况导致该程序提前离开 for 循环？

> ID：13340251
> 
> 赞同：1
> 
> 时间：2012-11-12T08:15:06.137
> 
> 标签：c, codeblocks, kernighan-and-ritchie

继续查看这篇文章的底部以了解实际问题

我可能试图过多地理解真正简单的事情，但在我弄清楚这一点之前我无法继续。

在阅读 K&R 1.9 字符数组时，您遇到了一个示例程序，该程序接受输入并确定哪一行最长，然后重新打印它。

为了理解这个程序的getline函数，我稍微修改了一下，在它的运行过程中打印了一些信息。现在我发现了一些输入，一旦我理解了这些输入，应该会大大增强我对 getchar() 的理解。

* * *

附带说明一下，当我尝试从库中读取源代码时，我完全不知所措。例如，我尝试寻找 getchar() 并最终目瞪口呆地盯着`#endif`stddef.h 的第 300 行某处的 18 座塔。我将通过在不久的将来停止对 stdio.h 中的功能的追求来避免这种头痛。图书馆很难找到东西是正常的吗？该函数不应该作为可读源存在，还是我只是抱有希望？

* * *

为方便起见，我将继续从 K&R 发布整个修改后的程序：

```
#include <stdio.h>
#define MAXLINE 5   /* maximum input line length */

int getline(char line[], int maxline);
void copy(char to[], char from[]);

/* print the longest input line */
main()
{
    int len;            /* current line length */
    int max;            /* maximum length seen so far */
    char line[MAXLINE];    /* current input line */
    char longest[MAXLINE]; /* longest line saved here */
    max = 0;
    while ((len = getline(line, MAXLINE)) > 0)
        if (len > max) {
            max = len;
            copy(longest, line);
        }
    if (max > 0)  /* there was a line */
        printf("%s\n", longest);
        printf("INFO: max = %d\n", max);
        printf("INFO: sizeof s[] = %d", sizeof longest);
    return 0;
}

/* getline:  read a line into s, return length  */
int getline(char s[],int lim)
{
    int c, i;
    for (i=0; i < lim-1 && (c=getchar())!=EOF && c!='\n'; ++i){
        s[i] = c;
        printf("INFO: s[%d] = %c\n", i, c);
    if (c == '\n') {
        printf("INFO: %d\n", i);
        printf("INFO: s[%d] = \\n\n", i);
        s[i] = c;
        ++i;}
    }
    s[i] = '\0';
    return i;
}

/* copy:  copy ’from’ into ’to’; assume to is big enough */
void copy(char to[], char from[])
{
    int i;
    i = 0;
    while ((to[i] = from[i]) != '\0')
        ++i;
} 
```

* * *

这是一些示例输入/输出：我正在使用 CodeBlocks 和 Windows 7

![sampleIO](../Images/61728bf1bbe12f056d86da7d9cd28537.png)

Finally, **my question** is why does the for loop in the getline() function leave the loop after it gets to `F` and therefore places the null terminator after `F` as `\0`

My hypothesis is that perhaps putting the EOF character shown as `^Z` in the windows terminal, the array is truncated to a length of 4 characters plus a null terminator. It turns out if I put the EOF character inside a line to be read, the saved line `s[]` will only contain a maximum size of 5\. What also confuses me is that the variable `len` will always be 0, is that because `len` is assigned during the while loop in main(), and does not have its value saved once that while loop is broken?

Something interesting to me, but probably not to experienced C users, is that the if statement right after the for loop in getline() can either be inside the for loop, or outside and it does not change the program. Interesting, because won't that mean that whether or not the for loop executes any code in the body, at the very least (c=getchar()) is executed?

Sorry the question is so wordy, I appreciate any helpful comments/answers.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T08:18:34.053

Because `MAXLINE` is 5, and the `getline` function never reads more than `MAXLINE - 1` characters.

# ios - 将声音输出到接收器而不是扬声器

> ID：13340252
> 
> 赞同：2
> 
> 时间：2012-11-12T08:15:15.723
> 
> 标签：ios, avaudioplayer, avaudiosession

我的音频从扬声器播放，我希望它从接收器播放（带有按钮）。起初我试图强迫声音从接收器输出。（我想兼容iOS 3.2）

这是我在 [super viewDidLoad] 之后的内容；

```
 [[AVAudioSession sharedInstance] setDelegate: self];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: nil];

    // UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_None;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

  [[AVAudioSession sharedInstance] setActive:YES error:nil]; 
```

后来当我打电话时：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:lblText.text
                                         ofType:@"mp3"]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc]
                   initWithContentsOfURL:url
                   error:&error];
    if (error)
    {
        NSLog(@"Error in audioPlayer: %@", 
              [error localizedDescription]);
    } else {
        audioPlayer.delegate = self;

    }

    [self playAudio];

    MPVolumeView *volumeView = [[[MPVolumeView alloc] initWithFrame:[volumeSlider frame]] autorelease];
    [volumeSlider removeFromSuperview];
    [self.view addSubview:volumeView]; 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:23:49.137

答案如下：覆盖仅适用于 kAudioSessionCategory_PlayAndRecord 类别，不适用于 AVAudioSessionCategoryPlayback。

[https://developer.apple.com/library/ios/#qa/qa1754/_index.html](https://developer.apple.com/library/ios/#qa/qa1754/_index.html)

# php - Apache Cookie 保存位置

> ID：13340255
> 
> 赞同：1
> 
> 时间：2012-11-12T08:15:33.760
> 
> 标签：php, apache, cookies, curl

我正在使用 CURL 连接到邮件 API 服务。我想将登录 cookie 的位置保存到我自己的目录中，但似乎 CURL 忽略了我的 OPT 参数，并且 cookie.txt 文件保存在我的 Apache 目录的根目录中。

我有：

```
$urlString = $urlStringS."/api/login1?name=$username&cleartext=$password" ;
$ch = curl_init($urlString) ;
curl_setopt($ch, CURLOPT_COOKIEJAR, 'http://localhost:8080/IMS3/cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'http://localhost:8080/IMS3/cookies.txt');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_CAINFO, dirname(__FILE__)."/cacert.pem");

$result = curl_exec($ch) ;
$http_status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch) ; 
```

我还尝试了 cookies.txt 文件的各种路径形式，例如 /cookies.txt 等，但无济于事。

如何控制 cookies.txt 的保存位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:17:08.013

您需要将 cookie 存储在*文件*系统上的文件中，而不是*http 资源*中。

# facebook-like - 点赞按钮，只显示点赞

> ID：13340258
> 
> 赞同：0
> 
> 时间：2012-11-12T08:15:39.507
> 
> 标签：facebook-like

是否可以仅使用“喜欢按钮”显示页面喜欢？我知道这是不同类型的总和，但我唯一想知道并向我的访问者展示的就是喜欢。

有没有一种简单的方法可以禁用总计数并只显示类似的计数？

问候，雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:18:09.607

只需在 display:none 上设置“按钮”或使用 facebook API

# blackberry - 清除发送/接收的数据包

> ID：13340269
> 
> 赞同：2
> 
> 时间：2012-11-12T08:16:33.800
> 
> 标签：blackberry

是否可以清除发送/接收的数据包数量并重新从 0 开始？

获取发送或接收数据包的代码：

```
long  no_of_packet_Sent = RadioInfo.getNumberOfPacketsSent();

long  no_of_packet_Received = RadioInfo.getNumberOfPacketsReceived(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:48:59.780

我从来没有找到答案，但另一种选择是将数据写入文本文件，然后从“获取数据包数”中减去文本文件中的数据。

```
private static String fileFormatString(String filename) {
    return filename.replace(" ".charAt(0),"_".charAt(0));
}
public static String readTextFile(String fName) {
    fName = fileFormatString(fName);
    String result = null;
    FileConnection fconn = null;
    DataInputStream is = null;
    try {
        fconn = (FileConnection) Connector.open(fName, Connector.READ_WRITE);
        is = fconn.openDataInputStream();
        byte[] data = IOUtilities.streamToBytes(is);
        result = new String(data);
    } catch (IOException e) {
        System.out.println("Error on read: "+fName+" - " + e.getMessage());
    } finally {
        try {
            if (null != is) is.close();
            if (null != fconn) fconn.close();
        } catch (IOException e) {
            System.out.println("Error on read IO: "+fName+" - " + e.getMessage());
        }
    }
    return result;
}
public static void writeTextFile(String fName, String text) {
    fName = fileFormatString(fName);
    DataOutputStream os = null;
    FileConnection fconn = null;
    try {
        fconn = (FileConnection) Connector.open(fName, Connector.READ_WRITE);
        if (fconn.exists());
        if (!fconn.exists()) fconn.create();
        os = fconn.openDataOutputStream();
        os.write(text.getBytes());
    } catch (IOException e) {
        System.out.println("Error on write: "+fName+" - " + e.getMessage());
    } finally {
        try {
            if (null != os) os.close();
            if (null != fconn) fconn.close();
        } catch (IOException e) {
            System.out.println("Error on write IO: "+fName+" - " + e.getMessage());
        }
    }
}
long no_of_packet = RadioInfo.getNumberOfPacketsSent()+RadioInfo.getNumberOfPacketsReceived();
DTHelper.writeTextFile(text_file_name,""+no_of_packet );

String readnumberofkbytes=readTextFile(text_file_name);
long Longreadnumberofbytes = Long.parseLong(readnumberofbytes);

long CurrentNumberofDataUsed= no_of_packet -Longreadnumberofbytes; 
```

# compilation - chdir 未声明，编译错误 g++

> ID：13340270
> 
> 赞同：4
> 
> 时间：2012-11-12T08:16:43.960
> 
> 标签：compilation, g++, chdir

我正在尝试编译一个从网上获得的相对简单的应用程序..

运行 make 时出现以下错误：

```
In file included from main.cpp:2:0:
os.h: In function ‘void myOpenDir(const char*)’:
os.h:13:16: error: ‘chdir’ was not declared in this scope 
```

文件 os.h 如下所示：

```
#ifndef OS_H
#define OS_H

#if defined(__GNUG__)

#define INT64 long long
#define UINT64 unsigned long long
#include <dirent.h>
#define SPRTR '/'
void myOpenDir(const char* dirpath)
{
    chdir(dirpath);
}

#elif defined(_MSC_VER)
    #define INT64 __int64
    #define UINT64 unsigned __int64
    #include <direct.h>
    #define SPRTR '\\'
    void myOpenDir(const char* dirpath)
    {
        _chdir(dirpath);
    }
        #else
        #error "Platform not supported. Need to update source code"
        #endif 
#endif 
```

有人知道为什么它不会编译？

我还通过 g++-4.7.real -c main.cpp 使用了 g++ 编译器，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T08:19:11.333

`#include <unistd.h>`根据[chdir 手册](http://www.kernel.org/doc/man-pages/online/pages/man2/chdir.2.html)添加。

# linux - 如何使用 sed 或 awk 正则表达式在 linux shell 中解析这些数据

> ID：13340277
> 
> 赞同：0
> 
> 时间：2012-11-12T08:17:26.173
> 
> 标签：linux, shell, sed, awk

我的文件中有这些数据

```
 65 ---
 66 FieldType: Text
 67 FieldName: STATE
 68 FieldNameAlt: STATE
 69 FieldFlags: 4194304
 70 FieldJustification: Left
 71 FieldMaxLength: 2
 72 ---
 73 FieldType: Text
 74 FieldName: ZIP
 75 FieldNameAlt: ZIP
 76 FieldFlags: 0
 77 FieldJustification: Left
 78 ---
 79 FieldType: Signature
 80 FieldName: EMPLOYEE SIGNATURE
 81 FieldNameAlt: EMPLOYEE SIGNATURE
 82 FieldFlags: 0
 83 FieldJustification: Left
 84 ---
 85 FieldType: Text
 86 FieldName: Name_Last
 87 FieldNameAlt: LAST
 88 FieldFlags: 0
 89 FieldValue: Billa
 90 FieldJustification: Left
 91 --- 
```

我怎样才能把它做成一个数组并作为键值对存储在数组中，比如

```
array['fieldtype']
array['fieldName'] 
```

对于所有的对象。

我认为分隔符只是“---”但我不知道我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:45:41.133

这是使用 GNU awk 的一种方法。它将输入拆分为记录，然后可以对其进行处理。

*解析.awk*

```
BEGIN {
  RS = " +[0-9]+ +---\n"
  FS = "\n"
}

{
  for(i=1; i<=NF; i++) {             # for each line
    sf = split($i, a, ":")
    if(sf > 1) {                     # only accept successfully split lines
      sub("^ +[0-9]+ +", "", a[1])   # trim key
      sub("^ +", "",  a[2])          # trim value
      array[a[1]] = a[2]             # save into array hash
    }
  }
}

{
  print "Record: " NR
  for(k in array) {
    print k " -> " array[k]
  }
  print ""
} 
```

将上面的内容保存到*parse.awk*并像这样运行它：

```
awk -f parse.awk infile 
```

where`infile`包含您要解析的数据。输出：

```
Record: 1

Record: 2
FieldFlags -> 4194304
FieldNameAlt -> STATE
FieldJustification -> Left
FieldType -> Text
FieldMaxLength -> 2
FieldName -> STATE

Record: 3
FieldFlags -> 0
FieldNameAlt -> ZIP
FieldJustification -> Left
FieldType -> Text
FieldMaxLength -> 2
FieldName -> ZIP

Record: 4
FieldFlags -> 0
FieldNameAlt -> EMPLOYEE SIGNATURE
FieldJustification -> Left
FieldType -> Signature
FieldMaxLength -> 2
FieldName -> EMPLOYEE SIGNATURE

Record: 5
FieldFlags -> 0
FieldNameAlt -> LAST
FieldJustification -> Left
FieldType -> Text
FieldMaxLength -> 2
FieldValue -> Billa
FieldName -> Name_Last 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:43:55.020

你可以使用这样的东西：

```
sed -n '/FieldType/,/FieldName/{N};s/FieldType: \([^\n]*\)\nFieldName: \([^\n]*\)/a["\2"]=\1/gp' input >> tmp.sh 
```

并做：

```
source tmp.sh 
```

或使用`eval`而不是重定向和`source`，但是员工签名字段中的空格会导致问题。

不过，使用 Perl 更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T03:30:34.717

在任何类型的 awk 中：

```
#!awk -F':[[:blank:]]*' -f
BEGIN {
    counter = 0
}
/:/ {
    array[counter,$1] = $2
}
/---/ {
    counter++;
}
END {
  # Deal with the array.
} 
```

这将创建一个数组，其中由“计数器”计数的每个单元格都包含如上所述的字段，其中 array[x,key] = value。

# android - getLocalActivityManager 在 Android 2.2 中不起作用

> ID：13340279
> 
> 赞同：1
> 
> 时间：2012-11-12T08:17:36.830
> 
> 标签：android, android-activity

我正在使用一个扩展 ActivityGroup 的类，并且有一个方法：

```
public void startChildActivity(String Id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(Id,intent);
    if (window != null) {
        mIdList.add(Id);
        setContentView(window.getDecorView()); 
    }  
} 
```

在 Android 2.2 中调试时，

```
getLocalActivityManager().startActivity(Id,intent) 
```

正在返回 null。在 4.0 中它工作正常。

有没有人遇到过这个问题？请建议怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:46:17.277

你读过[这个笔记](http://developer.android.com/reference/android/app/LocalActivityManager.html#startActivity%28java.lang.String,%20android.content.Intent%29)吗？

> 警告：存在一个问题，如果 Intent 不包含显式组件，我们可以恢复与之前保存状态时运行的不同活动类的状态（如果可用活动集在这些点之间发生变化）。

这也许可以解释你的问题。顺便说一句，您似乎正在尝试实现片段之类的东西。更好地使用[ActionBarSherlock](http://actionbarsherlock.com/)这是旧 android 版本的向后移植。

# c# - 移除 Listview 跳转

> ID：13340281
> 
> 赞同：0
> 
> 时间：2012-11-12T08:17:53.397
> 
> 标签：c#, listview

我有一个`ListView`我不断添加项目的。

我可以在`ListView`添加项目时滚动。

但是，在 中选择一个项目后，在`ListView`添加项目时我无法滚动。对于我调用的每个 ListView.Items.Add(Object)，我将恢复到最初选择的项目的焦点。

清除 SelectedItems 和 SelectedIndices 后，我仍然可以继续向下滚动，`ListView`因为我会在添加项目时不断弹回最初选择的项目。

谁能建议如何解决这个问题？

谢谢你。

问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:06:37.497

如果您使用的是 WPF，您使用的是`ObservableCollection`? 听起来 DataContext 正在更改导致 ListView 重新加载。如果你绑定到一个`ObservableCollection`你可能会有更多的运气。

# c++ - 如何修复“'std::cout”中的“'operator<<'不匹配”错误？

> ID：13340282
> 
> 赞同：0
> 
> 时间：2012-11-12T08:17:57.533
> 
> 标签：c++, compiler-errors, output

`|55|error: no match for 'operator<<' in 'std::cout << DetermineElapsedTime(((const MyTime*)(& tm)), ((const MyTime*)(& tm2)))'|`

我意识到 cout 不了解如何正确输出。然而，此时此刻，我也没有。

这是我的代码。问题一直接近底部。

```
#include <iostream>
#include <cstdlib>
#include <cstring>

using namespace std;
struct MyTime { int hours, minutes, seconds; };
MyTime DetermineElapsedTime(const MyTime *t1, const MyTime *t2);

const int hourSeconds = 3600;
const int minSeconds = 60;
const int dayHours = 24;

MyTime DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
{
    long hourDiff = ((t2->hours * hourSeconds) - (t1->hours * hourSeconds));
    int timeHour = hourDiff / hourSeconds;
    long minDiff = ((t2->minutes * minSeconds) - (t1->minutes * minSeconds));
    int timeMin = minDiff / minSeconds;
    int timeSec = (t2->seconds - t1 -> seconds);
    MyTime time;
    time.hours = timeHour;
    time.minutes = timeMin;
    time.seconds = timeSec;
    return time;
}

main(void)
{
    char delim1, delim2;
    MyTime tm, tm2;
    cout << "Input two formats for the time. Separate each with a space. Ex: hr:min:sec\n";
    cin >> tm.hours >> delim1 >> tm.minutes >> delim2 >> tm.seconds;
    cin >> tm2.hours >> delim1 >> tm2.minutes >> delim2 >> tm2.seconds;

    if (tm2.hours <= tm.hours && tm2.minutes <= tm.minutes && tm2.seconds <= tm.seconds)
        {
            tm2.hours += dayHours;
        }
    cout << DetermineElapsedTime(&tm, &tm2); // Problem is here

    return 0;

} 
```

另外，如果需要，我如何将经过的时间输出为 01:01:01 的任何提示？我知道 setfill .. 有点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:19:50.977

MyTime 是一个结构。重载此类型的 << 运算符

```
std::ostream& operator<< (ostream& os, const MyTime& m) {
       os << m.hours << ":" << m.minutes << ":" << m.seconds;
       return os;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:20:41.377

您必须为您的`MyTime`结构声明流运算符：

```
struct MyTime
{
    int hours, minutes, seconds;
    friend ostream& operator<<(ostream& sm)
    {
         sm << "hours: "<<hours<<" seconds: "<<seconds<<" minutes: "<<minutes;
         return sm;
    }
}; 
```

如果你不能改变结构然后声明自由运算符：

```
ostream& operator<<(ostream& sm, const MyTime& my_time)
{
     sm << "hours: "<<my_time.hours<<" seconds: "<<my_time.seconds<<" minutes: "<<my_time.minutes;
     return sm;
} 
```

# html - 输入字段长于其包含的表格单元格 (HTML)

> ID：13340290
> 
> 赞同：1
> 
> 时间：2012-11-12T08:18:32.713
> 
> 标签：html

尝试使用 HTML 格式化字段。我有以下内容：

```
<table style="width: 100%;" cellpadding="0px" cellspacing="0px">
    <tr>
        <td style="width: 65px;">
            <asp:Label ID="lblKeywords" runat="server" Text="Keywords"
                 AssociatedControlID="txtKeywords" Font-Bold="true"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="txtKeywords" Width="100%" runat="server"
                 MaxLength="256" placeholder="Use comma to seperate keywords." />
        </td>
    </tr>
</table> 
```

检查结果，文本框`txtKeywords`比其单元格长 4 个像素。

我假设那些是边框的 4 个像素；处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:23:26.040

[https://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

最简单的方法是将输入设置为使用`box-sizing: border-box;`

```
input.myClass {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

这适用于*大多数*浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:24:29.890

您可以使用以下 CSS 规则将 box-sizing 更改为“border-box”：

```
* { 
    -moz-box-sizing: border-box; 
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
} 
```

恕我直言，这会导致更容易理解的行为。例如，“100%”的宽度意味着 100%，包括边框、边距和填充。你可以在这里阅读更多关于它的信息：http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

另外，作为旁注，请考虑不要使用表格来对齐表单字段。看看我的博客文章：[http ://davidtanzer.net/css_vertical_align](http://davidtanzer.net/css_vertical_align)

# c# - 我的 C# 应用程序崩溃或挂起

> ID：13340293
> 
> 赞同：-3
> 
> 时间：2012-11-12T08:18:40.657
> 
> 标签：c#, .net, crash

在使用我的 C# Windows 应用程序时，它挂起并进入无响应模式。有时它会引发 DR.Watson 调试器错误。

我已经提到了从 Windows 错误报告中获得的错误详细信息，

```
**事件类型：错误
事件源：.NET 运行时 2.0 错误报告
事件类别：无
事件 ID：1000
日期：2012 年 11 月 12 日
时间：下午 1:01:58
用户：不适用
电脑：我的电脑
描述：
错误应用程序 aod_gfvt.exe，版本 1.0.0.0，标记 50a0a39d，错误模块
wininet.dll，版本 7.0.6000.17114，标记 503bc6a7，调试？0，故障地址
0x00004606。
有关详细信息，请参阅http://go.microsoft.com/fwlink/events.asp

上的帮助和支持中心。 **
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:21:34.983

您不会从 Watson 日志中获得任何信息。

将全局异常处理添加到您的应用程序或应用程序域。

例如[AppDomain.CurrentDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

```
 [STAThread]
    static void Main()
    {
      AppDomain.CurrentDomain.UnhandledException += 
        new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
      Application.EnableVisualStyles();
      Application.SetCompatibleTextRenderingDefault(false);
      Application.Run(new Form1());
    } 
```

添加全局异常处理程序时，您将获得更多信息。Watson 正在拦截您的错误，因为一些严重的未经处理的异常导致您的应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:37:53.833

您可以使用 windbg 并进行故障转储。并查找导致崩溃的线程。

[http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

# asp.net - 为 favicon 添加忽略路由后如何修复“文件不存在”错误

> ID：13340295
> 
> 赞同：2
> 
> 时间：2012-11-12T08:18:53.347
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, autofac, mvcextensions

我正在使用`ASP.NET MVC 3`. 我也在使用`Autofac`and `MVC Extensions`。我最初得到的错误是：

```
The controller for path '/favicon.ico' was not found or does not implement IController. 
```

我阅读了几篇文章，他们都建议我输入以下内容：

```
Routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" }); 
```

然后我开始收到以下错误：

```
File does not exist.
ExceptionType:HttpException Stacktrace:
     at System.Web.StaticFileHandler.GetFileInfo(String virtualPathWithPathInfo, String physicalPath, HttpResponse response)
     at System.Web.StaticFileHandler.ProcessRequestInternal(HttpContext context, String overrideVirtualPath)
     at System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state)
     at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
     at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

该错误并没有告诉我太多，因为我不知道它试图打开什么文件？我将如何解决这个问题？我没有使用网站图标，我不想要一个。我正在使用`Internet Explorer 8`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:12:18.917

大多数现代浏览器都盲目地发出对 favicon.ico 的请求，如果没有 favicon（这是正确的行为） ，他们会期待*404（未找到文件）。*[您可以在下面找到 HTML5 工作草案中关于链接类型“icon”](http://www.w3.org/TR/2011/WD-html5-20110525/links.html#rel-icon)的引用 ：

> 在没有带有 icon 关键字的链接的情况下，对于通过 HTTP 或 HTTPS 获取的文档，用户代理可能会尝试获取并使用具有绝对 URL 的图标，该绝对 URL 是通过将 URL /favicon.ico 与文档地址解析获得的，就好像该页面已使用 icon 关键字声明了该图标。

您看到异常的原因是配置为使用*托管/集成管道模式*的 Web 开发服务器或 IIS将所有请求都通过*Global.asax*（包括错误）。

您可以尝试通过创建以下指向 favicon 的虚拟链接来阻止浏览器发出请求：

```
<html>
    <head>
        <link rel="shortcut icon" href="#" />
        ...
    </head>
...
</html> 
```

您还可以为自己创建一个 favicon 的空文件，或者通过检查`HttpException.GetHttpCode()`404*和*/favicon.ico*来*`((System.Web.HttpApplication)Sender).Context.Request.Url`过滤掉错误。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:17:31.103

如果您不想`favicon`在您的站点中使用 a 但仍想摆脱此错误，则可以创建一个大小为 0 字节的文件并将其命名为`favicon.ico`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:46:15.750

尝试的替代规则简单明了：

```
// add ignore route for favicon.ico
routes.IgnoreRoute("favicon.ico"); 
```*

# arrays - $size, $bits, verilog

> ID：13340301
> 
> 赞同：17
> 
> 时间：2012-11-12T08:19:35.250
> 
> 标签：arrays, verilog, system-verilog

`$size`verilog中的和运算符有什么区别`$bits`？如果我有变量`[9:0]a`，，，，`[6:0]b`。`[31:0]c`

```
c <= [($size(a)+$size(b)-1]-:$bits(b)]; 
```

上述表达式的“c”处的输出是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-12T14:58:22.153

`$size()`给出单个维度的位数. `$bits()`给出完全表示变量的位数.

例如：

```
reg [9:0] a;
reg [9:0] b [5:0];

initial begin
  $display("a Size ", $size(a));
  $display("a Bits ", $bits(a));
  $display("b Size ", $size(b));
  $display("b Bits ", $bits(b)) ;
end 
```

给出：

```
a Size          10
a Bits          10
b Size           6 // Depth of memory
b Bits          60 // Width * Depth 
```

在您的情况下，您只有一维数组，而不是内存或结构，因此`$size()`是`$bits()`同一回事。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-12T13:28:30.363

`$size`应返回维度中的元素数，相当于`$high - $low + 1`. 它与尺寸有关，而不仅仅是位数。如果类型是一维压缩数组或整数类型，则等于`$bits`。

`$bits`system 函数返回将表达式保存为位流所需的位数。

```
$bits ( [expression|type_identifier] ) 
```

当使用当前为空的动态大小的类型调用时，它返回 0。`$bits`直接使用带有动态大小的类型标识符的系统函数是错误的。

我不知道你的问题，`c <= [($size(a)+$size(b)-1]-:$bits(b)];`。它是 RHS 中的有效表达式吗？您是在谈论数组范围表达式，`[n +: m]`还是`[n -: m]`？

# c++ - 最后在 C++ 的链表中添加节点

> ID：13340302
> 
> 赞同：0
> 
> 时间：2012-11-12T08:19:35.217
> 
> 标签：c++, linked-list

我试图实现单链表。我的 addAtLast() 函数没有正确执行。执行此函数时程序崩溃。请提出一些更改。

```
class LList
{
public:
    int noOfNodes;
    Node const *start;/*Header Node*/

    LList()
    {
        start=new Node;
        noOfNodes=0;start=0;
    }

    void addAtFront(Node* n)
    {
        /*
        cout<<endl<<"class"<<n;
        cout<<"start"<<start;
        cout<<"data in node";n->print();
        */
        n->next=const_cast<Node*>(start);
        start=n;
        // cout<<" next=";start->print();
        noOfNodes++;
    }

    void addAtLast(Node* n)
    {
        Node *cur=const_cast<Node*>(start);
        if (start==NULL)
        { 
            start=n;
            return;
        }
        while(cur->next!=NULL)
        {
            cur=cur->next;
        }
        cur->next=n;
        noOfNodes++;
    }

    int getPosition(Node data)
    {
        int pos=0;
        Node *cur=const_cast<Node*>(start);
        while(cur!=NULL)
        {
            pos++;
            if(*cur==data)
            {
                return pos;
            }
            cur=cur->next;
        }
        return -1;//not found
    }

    Node getNode(int pos)
    {
        if(pos<1)
            return -1;// not a valid position
        else if(pos>noOfNodes)
            return -1; // not a valid position

        Node *cur=const_cast<Node*>(start);
        int curPos=0;
        while(cur!=NULL)
        {
            if(++curPos==pos)
                return *cur;
            cur=cur->next;
        }
    }

    void traverse()
    {
        Node *cur=const_cast<Node*>(start);
        while(cur!=NULL)
        {
            //   cout<<"start"<<start;        
            cur->print();
            cur=cur->next;
        }
    }  

    ~LList()
    {
        delete start;
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:32:09.387

```
void addAtLast(Node* n) {
    Node *cur=const_cast<Node*>(start);
    if(start==NULL) {
        start=n;
        n->next = NULL;
        noOfNodes++;
        return;
    }
    while(cur->next!=NULL) {
        cur=cur->next;
    }
    cur->next=n;
    n->next = NULL;  // Added
    noOfNodes++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:28:58.940

从一开始就..

```
start=new Node;
noOfNodes=0;start=0; 
```

应该这样吗？

```
start=new Node;
noOfNodes=0;start->next=NULL; 
```

在 2 行内，您已经创建了内存泄漏。我不知道你为什么要设置`start=0`. 不要那样做，你只是给它分配了内存！

至于崩溃，@liulinhuai 的回答已解决。您将取消引用未初始化的指针以尝试获取它的`next`成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T08:36:12.057

在您的 ctor 中，您将 start 设置为 0。在您的崩溃函数中，您首先检查它`NULL`：

```
if (start==NULL)
{ 
   start=n;
   //n->next is now points to nowhere
   return;
} 
```

下一次调用`addAtLast`迭代，直到找到`NULL`但先前的分配没有设置`next`指针，`NULL`所以第二次迭代将导致`access violation`：

```
while(cur->next!=NULL) {
   //first time it's ok but second call on cur will crash
   cur=cur->next;
} 
```

解决方案是 - 所有 new`Node`必须将`next`指针设置为`NULL`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T08:54:50.840

我在评论中提到了这个，但将在这里作为答案解决。此函数的*调用者*必须确保两件事：

1.  传入的节点列表（它*是*一个列表，即使只有一个元素长）**必须**以设置为 NULL 的 end-next-pointer 正确终止。*调用者*必须确保这一点，因为此代码不能假定它并盲目设置`node->next = NULL;`

2.  确保*调用者*知道一旦它执行，**这个列表现在拥有传入的节点和它可能启动**的任何列表，因此调用者**不能**在调用者端释放它或它指向的任何东西。

除了节点计数管理问题之外，该`addAtLast()`功能没有任何问题，尽管我会以不同的方式实现它：

```
void addAtLast(Node* n)
{
    // no nulls allowed
    if (n == NULL)
        return;

    // set start if first in list
    if (start == NULL)
    {
        start = n;
        noOfNodes = 1;
    }

    // else walk list to find end
    else
    {
        Node *cur = const_cast<Node*>(start);
        while(cur->next != NULL)
            cur = cur->next;
        cur->next = n;
        ++noOfNodes;
    }

    // adjust count to contain any nodes from 'n'
    while (n->next != NULL)
    {
        ++noOfnodes;
        n = n->next;
    }
} 
```

# java - 无法启动嵌入式 Google App Engine 服务器进行集成测试

> ID：13340303
> 
> 赞同：4
> 
> 时间：2012-11-12T08:19:37.620
> 
> 标签：java, google-app-engine, maven, integration-testing

我正在尝试在由 maven 故障安全插件运行的测试套件的 @BeforeClass 内启动嵌入式 Google App Engine 开发服务器（sdk 1.7.3）。应该启动它的代码如下所示：

```
private static final String HOST = "0.0.0.0";
private static final int PORT = 8887;
private static DevAppServer devAppServer;

@BeforeClass
public static void setup() throws Exception {
    log.debug("Starting development server");
    File appRootDir = new File("target/visualize-1.0.war");
    DevAppServerFactory devAppServerFactory = new DevAppServerFactory();
    devAppServer = devAppServerFactory.createDevAppServer(appRootDir, HOST, PORT); 
    devAppServer.start();
} 
```

然而，在调用 createDevAppServer 期间，我得到了一个安全异常：

```
java.security.AccessControlException: access denied (java.lang.RuntimePermission setContextClassLoader)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
at java.security.AccessController.checkPermission(AccessController.java:546)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at java.lang.Thread.setContextClassLoader(Thread.java:1394)
at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:366)
at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021) 
```

使用 -Djava.security.debug=access,failure 调试安全异常我看到：

```
 access: access allowed (java.io.FilePermission    /home/me/.m2/repository/com/google/appengine/appengine-tools-sdk/1.7.3/appengine-tools-sdk-1.7.3.jar read)
 access: access denied (java.security.SecurityPermission getPolicy)
java.lang.Exception: Stack trace
at java.lang.Thread.dumpStack(Thread.java:1249)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:364)
at java.security.AccessController.checkPermission(AccessController.java:546)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at java.security.Policy.getPolicy(Policy.java:133)
at com.google.apphosting.utils.security.SecurityManagerInstaller.install(SecurityManagerInstaller.java:81)
at com.google.appengine.tools.development.DevAppServerFactory.createDevAppServer(DevAppServerFactory.java:152)
at com.google.appengine.tools.development.DevAppServerFactory.createDevAppServer(DevAppServerFactory.java:69)
at com.google.appengine.tools.development.DevAppServerFactory.createDevAppServer(DevAppServerFactory.java:53) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T10:20:50.680

实际上，您不应该像以前那样称呼 GAE（提示：GAE 有这么多用于处理安全问题的补丁，根本不值得）

但是，maven-gae-plugin 确实有专门用于 IT 的 gae:start 和 gae:stop。

这就是我将它用于 IT 的方式：

```
<plugin>
    <groupId>net.kindleit</groupId>
    <artifactId>maven-gae-plugin</artifactId>
    <version>0.9.4</version>
    <dependencies>
        <dependency>
            <groupId>net.kindleit</groupId>
            <artifactId>gae-runtime</artifactId>
            <version>1.6.6</version>
            <type>pom</type>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <id>start-integration-test</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>start</goal>
            </goals>
        </execution>
        <execution>
            <id>stop-integration-test</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.12</version>
    <executions>
        <execution>
            <id>it</id>
            <phase>integration-test</phase>
            <goals>
                <goal>integration-test</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# c# - 找出 c# 枚举数

> ID：13340311
> 
> 赞同：3
> 
> 时间：2012-11-12T08:20:09.570
> 
> 标签：c#, ienumerable

我正在尝试使用以下示例来理解枚举器

```
public class Garage : IEnumerable
{
    private Car[] cars = new Car[4];
    public Garage()
    {
        cars[0] = new Car() { Id = Guid.NewGuid(), Name = "Mazda 3", CurrentSpeed = 90 };
        cars[1] = new Car() { Id = Guid.NewGuid(), Name = "Mazda 6", CurrentSpeed = 80 };
    }

    public IEnumerator GetEnumerator()
    {
        // return the array object's IEnumerator
        return cars.GetEnumerator();
    }
}

static void Main(string[] args)
    {
        IEnumerator i = cars.GetEnumerator();
        i.MoveNext();
        Car myCar = (Car)i.Current;
        Console.WriteLine("{0} is going {1} km/h", myCar.Name, myCar.CurrentSpeed);
        Console.ReadLine();

    } 
```

如何在不使用 foreach 循环的情况下在控制台第二辆车上显示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T08:24:00.983

```
foreach (Car myCar in cars)
{
    Console.WriteLine("{0} is going {1} km/h", myCar.Name, myCar.CurrentSpeed);
} 
```

大约扩大到

```
IEnumerator i = cars.GetEnumerator();
while (i.MoveNext())
{
    Car myCar = (Car)i.Current;
    Console.WriteLine("{0} is going {1} km/h", myCar.Name, myCar.CurrentSpeed);
} 
```

（实际上，由 C# 编译器执行的语句扩展[有点](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)`foreach`复杂；请参阅[语句](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)。）[`foreach`](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T08:23:58.233

```
IEnumerator i = cars.GetEnumerator();
i.MoveNext();
Car firstCar = (Car)i.Current;
i.MoveNext();
Car secondCar = (Car)i.Current; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:25:08.387

您可以公开索引器以访问您的内部数组：

```
public class Garage : IEnumerable
{
  public Car this[int i]
  {
    return this.cars[i];
  }
} 
```

这不是枚举器，因为 C# 中的枚举器专门用于按顺序而不是随机地迭代元素。但是鉴于您使用数组来存储您的汽车，因此可以公开索引器。

顺便说一句，您可能希望实现通用`IEnumerable<Car>`接口以使其明确且类型安全，以便可以迭代`Car`对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:25:35.353

您可以使用：

```
cars.Skip(1).Take(1).Single(); 
```

拥有第二辆车（你跳过第一辆车，然后只拿一辆）；

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-12T08:24:46.730

IEnumerator 类与 foreach 循环一起使用。如果没有 foreach 循环，就无法访​​问第二个项目。（除非您深入了解 C# 的内部结构，否则不建议这样做。）

# c# - 在 oledb 连接中合并数据库

> ID：13340316
> 
> 赞同：0
> 
> 时间：2012-11-12T08:20:25.600
> 
> 标签：c#, .net, sql, oledb

我已经开发了带有 OLEDB 连接的 c# 应用程序。

我已经在两个地方安装了该应用程序。

首先，我的客户已经为房产详细信息（房地产代理应用程序）输入了条目。此数据已存储在 propDetails 表中。

在另一个比赛中，他已经为购买者详细信息输入了条目。此数据已存储在 purchaserDetails 表中。

现在我想以编程方式合并两个文件中的表。

那么在 C# 中有什么方法可以将数据库合并到两个不同的文件中吗？

# sharepoint-2010 - 如何在 Visual Studio (Sharepoint) 中检索选定列表项的特定元数据？

> ID：13340324
> 
> 赞同：1
> 
> 时间：2012-11-12T08:21:00.143
> 
> 标签：sharepoint-2010, properties, metadata, hashtable, splistitem

我正在使用 Visual Studio 为我的共享点站点创建一个 Web 部件，我需要其中的一部分来检索与所选文档相关的文档。

我在共享点站点上为测试目的创建的每个文档都有自己的元数据，我希望检索具有特定元数据的文档（例如，“文件名”或“作者”等）

因此，在我为这个特定函数编写的方法中，我设法*将元数据集中检索到哈希表中*（或者我认为我有），但我似乎无法从中提取**单个**元数据.

```
protected void displayFileNames(object sender, EventArgs e) {
    String selectedDocLib = TypeOfDocument.SelectedValue;
    objCurrentWeb = SPContext.Current.Web;
    SPListCollection objDocLibList =     objCurrentWeb.GetListsOfType(SPBaseType.DocumentLibrary);

    String tempStr = "";
    SPList tempDocLib;
    Hashtable hT = new Hashtable();

    foreach (SPList docLibList in objDocLibList) {
        tempStr = docLibList.Title;
        if (tempStr.Equals(selectedDocLib)) {

            tempDocLib = objDocLibList.TryGetList(selectedDocLib);

            foreach (SPListItem objTempDocLibItem in tempDocLib.Items) {
                hT = objTempDocLibItem.Properties;
                int isOriginal = hT.GetHashCode();

                ListBox1.Items.Add(objTempDocLibItem.Name);

            }
        }
    }
} 
```

请帮帮我！

谢谢！！！

海莉

# matlab - 压缩多页 tiff

> ID：13340328
> 
> 赞同：1
> 
> 时间：2012-11-12T08:21:14.977
> 
> 标签：matlab, compression, tiff, libtiff

为了在 MATLAB 中更快地加载图像，我使用了多页 TIFF 文件，这对我来说比 MATLAB 的简单读取要快得多。但我的问题是 TIFF 文件的大小比普通图像大得多（比如大十倍），所以我正在寻找压缩选项。我已经尝试了其中一些选项（我在下面附上了代码）其中一些不起作用并产生空文件，其余的会降低速度。

有没有办法兼顾大小和速度？

谢谢

PS：我把我的代码放在这里。如果我做错了，请告诉我。

```
#include <stdio.h>
#include <time.h>
#include "tiffio.h"
#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
using namespace std;

#define XSIZE 1280
#define YSIZE 720
#define NPAGES 1000
#define CHANNEL 3

int main (int argc, char **argv)
{
uint32 image_width, image_height;
float xres, yres;
uint16 spp, bpp, photo, res_unit;
TIFF *out;
int i, j;
uint16 page;
Mat img;
int COMPRESSION_TAG = atoi(argv[1]);

unsigned char *array = new unsigned char [XSIZE * YSIZE*3];

char name[20];

out = TIFFOpen("myfile.tif", "w");
image_width = XSIZE;
image_height = YSIZE;

spp = CHANNEL; /* Samples per pixel */
bpp = 8; /* Bits per sample */
photo = PHOTOMETRIC_MINISBLACK;
for (page = 0; page < NPAGES; page++)
{
    sprintf(name, "5_29%03d.jpg", page);
    img = imread(name);
    array = img.data;
    TIFFSetField(out, TIFFTAG_IMAGEWIDTH, image_width );
    TIFFSetField(out, TIFFTAG_IMAGELENGTH, image_height);
    TIFFSetField(out, TIFFTAG_BITSPERSAMPLE, bpp);
    TIFFSetField(out, TIFFTAG_SAMPLESPERPIXEL, spp);
    TIFFSetField(out, TIFFTAG_PLANARCONFIG, PLANARCONFIG_CONTIG);
    TIFFSetField(out, TIFFTAG_PHOTOMETRIC, photo);
    TIFFSetField(out, TIFFTAG_ORIENTATION, ORIENTATION_BOTLEFT);
    TIFFSetField(out, TIFFTAG_COMPRESSION, COMPRESSION_TAG);
    /* It is good to set resolutions too (but it is not nesessary) */
    xres = yres = 100;
    res_unit = RESUNIT_INCH;
    TIFFSetField(out, TIFFTAG_XRESOLUTION, xres);
    TIFFSetField(out, TIFFTAG_YRESOLUTION, yres);
    TIFFSetField(out, TIFFTAG_RESOLUTIONUNIT, res_unit);

    /* We are writing single page of the multipage file */
    TIFFSetField(out, TIFFTAG_SUBFILETYPE, FILETYPE_PAGE);
    /* Set the page number */
    TIFFSetField(out, TIFFTAG_PAGENUMBER, page, NPAGES);

    for (j = 0; j < image_height; j++)
        TIFFWriteScanline(out, &array[3*j * image_width], j, 0);

    TIFFWriteDirectory(out);
}

TIFFClose(out);

    return 0;
} 
```

# git - 如何从 Windows cmd 保存 git commit 消息？

> ID：13340329
> 
> 赞同：230
> 
> 时间：2012-11-12T08:21:15.583
> 
> 标签：git, git-commit

我从命令行运行 git。

如何保存提交消息？

我的意思是我应该按什么键才能通过这个屏幕：

![提交消息接口](../Images/7e48a80b260dec449b9dbfc0cff505de.png)

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2012-11-12T08:23:48.197

你在 vim 里面。要保存更改并退出，请键入：

```
<esc> :wq <enter> 
```

这意味着：

*   按`Escape`。这应该确保您处于命令模式
*   输入`:wq`
*   按`Return`

stdcall 在评论中提到的另一种选择是：

*   按`Escape`
*   按`shift`+ `Z` `shift`+ `Z`（大写`Z`两次）。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-07-25T12:25:38.653

我相信这个问题的**真正**答案是解释如何配置默认使用的编辑器，如果您对 Vim 不满意。

例如，这是配置记事本的方法，在 Windows 中很有用：

```
git config --global core.editor "notepad" 
```

Gedit，对 Linux 更友好：

```
git config --global core.editor "gedit" 
```

您可以像这样读取当前配置：

```
git config core.editor 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2016-06-28T20:25:35.993

您也可以使用`git commit -m "Message goes here"`That's easy 提交。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-09-25T02:33:49.803

按 Shift-zz。保存更改并退出。逃脱对我不起作用。

我在 Windows 中使用 Git Bash。也无法超越这一点。我的提交消息很简单，所以我不想添加另一个编辑器 atm。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-08-17T21:31:22.137

如果您`git commit`使用参数输入但省略输入注释`–m`，则 Git 将打开默认编辑器供您编辑签入注释。默认情况下是 Vim。现在你可以做两件事：

**备选方案 1 – 退出 Vim 而不输入任何注释并重复**

空白或未保存的注释将被视为提交更改的中止尝试，您可以按照以下步骤退出 Vim：

1.  按下`Esc`以确保您未处于编辑模式（`Esc`如果不确定，可以按几次）

2.  键入`:q!` `enter`
    （即冒号、字母 q、感叹号、回车），这告诉 Vim 放弃任何更改并退出）
    Git 将响应：

    > 由于空提交消息而中止提交

    你可以再次自由地使用：

    ```
    git commit –m "your comment here" 
    ```

**备选方案 2 – 使用 Vim 写评论**

按照以下步骤使用 Vim 编写您的评论

1.  按`i`进入编辑模式（或插入模式）。
    这将在第一行留下一个闪烁的光标。添加您的评论。按下`Esc`以确保您未处于编辑模式（如果不确定，可以按几次 Esc）
2.  输入`:wq` `enter`
    （即冒号，字母 w，字母 q，回车），这将告诉 Vim 保存更改并退出）

[来自https://blogs.msdn.microsoft.com/kristol/2013/07/02/the-git-command-line-101-for-windows-users/](https://blogs.msdn.microsoft.com/kristol/2013/07/02/the-git-command-line-101-for-windows-users/)的回复

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-08-12T21:05:40.083

使用[atom](https://atom.io/)编辑器，您只需要安装[git-plus](https://atom.io/packages/git-plus)包。

# php - 如何将sql查询结果分成小部分

> ID：13340330
> 
> 赞同：0
> 
> 时间：2012-11-12T08:21:29.613
> 
> 标签：php, sql

我将把一个 sql 查询结果分成两部分。我想这样做的原因是我只想让我的服务器首先处理 20 个项目，然后处理`sleep`其余部分。

在sql中如何将查询分成多个查询，`mysql_query`以便我可以一个接一个地单独处理这些部分？

我的愿景是这样的：

```
if(mysql_row_nums($sql)>20){
  handle only 20 items
} else {
  handle all
} 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:25:05.033

您可以通过`limit 0,20`在查询中设置来做到这一点

**限制**用于将您的 MySQL 查询结果限制在指定范围内。您可以使用它来显示前 X 个结果，或显示 X - Y 结果的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:26:10.500

查看 SQL LIMIT 参数： [LIMIT](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T08:29:07.747

尝试

```
if(mysql_num_rows($sql)>20){
   $i = 0;
   while($result = mysql_fetch_array($sql)){
        $i++;
        if($i <= 20){
           // do some thing with first 20 result
           var_dump($result);
        }
        if($i == 20){
            // if we have arrived to result #20 stop excuting script for minute
            sleep(60); // 60 = 1 minute ; 
        }
        if($i > 20){

            // continue dealing with result after first 20 result. 
        } 
   }
} 
```

# sql - 'CREATE VIEW' 必须是查询批处理中的第一条语句

> ID：13340332
> 
> 赞同：27
> 
> 时间：2012-11-12T08:21:36.907
> 
> 标签：sql, sql-server-2008

基本上就是标题所说的。这是我的代码。

```
USE Assignment2;
GO

/* Player View (2 marks)
    Create a view which shows the following details of all players:
        • The ID number of the player
        • The first name and surname of the player concatenated and given an alias of “full_name”
        • The team ID number of the player (if applicable)
        • The team name of the player (if applicable)
        • The coach ID number of the player (if applicable)
        • The name of the player’s coach (if applicable)

   Creating this view requires a select statement using multiple joins and concatenation of names.  
   Make sure that you use the appropriate type of join to ensure that players without teams or coaches are still included in the results.

*/

-- Write your Player View here
PRINT 'Creating Player View'

CREATE VIEW playerView AS 
SELECT player.id, player.firstName + ' ' + player.surname AS 'Full name', player.team, team.name, player.coach, coach.firstName, coach.surname 
FROM player
LEFT OUTER JOIN team
    ON player.team = team.id
    LEFT OUTER JOIN player as coach
        ON player.coach = coach.id;

GO
/* Race View (3 marks)
   Create a view which shows the following details of all races:
        • All of the columns in the race table
        • The name of the race type, course and team involved in the race
        • The full name of the player observing the race and the full name of the MVP (if applicable)
        • A calculated column with an alias of “unpenalised_score”, which adds the points penalised to the final score

   Creating this view requires a select statement using multiple joins and concatenation of names.  
   Make sure that you use the appropriate type of join to ensure that races without MVPs are still included in the results.
*/

-- Write your Race View here
PRINT 'Creating Race View'

CREATE VIEW raceView AS 
SELECT race.id, race.dateOfRace, race.raceType, raceType.name AS raceTypeName, race.course, course.name AS courseName, race.team, team.name AS teamName, race.observer, obs.firstName + ' ' + obs.surname AS observer_name, race.mvp, mvp.firstName + ' ' + mvp.surname AS mvp_name, race.pointsPenalised, race.finalScore + race.pointsPenalised AS unpenalised_score, race.finalScore
FROM race
INNER JOIN raceType
    ON race.raceType = raceType.id
    INNER JOIN course
        ON race.course = course.id
        INNER JOIN team
            ON race.team = team.id
            LEFT OUTER JOIN player AS mvp
                ON race.mvp = mvp.id
                LEFT OUTER JOIN player AS obs
                    ON race.observer = obs.id;
GO 

SELECT * 
FROM playerView

SELECT *
FROM raceView

/* Additional Information:
   The views are very convenient replacements for the tables they represent, as they include the names and calculated values that you will often need in queries.
   You are very much encouraged to use the views to simplify the queries that follow.  You can use a view in a SELECT statement in exactly the same way as you can use a table.

   If you wish to create additional views to simplify the queries which follow, include them in this file.
*/ 
```

当我`CREATE VIEW`分别运行每个时，它似乎可以正确运行而没有错误。但是当我尝试运行整个脚本时，它给了我这个错误。

> *Msg 111, Level 15, State 1, Line 20
> 'CREATE VIEW' 必须是查询批处理中的第一条语句。
> 消息 111，级别 15，状态 1，第 15 行
> “CREATE VIEW”必须是查询批处理中的第一条语句。
> 消息 208，级别 16，状态 1，第 2 行
> 无效的对象名称“playerView”。*

在尝试运行此脚本之前，我首先删除数据库、重新创建表、填充它们，然后运行此脚本。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-12T08:22:57.053

放在`GO`后面`PRINT 'Creating Player View'`，它应该可以工作：

```
PRINT 'Creating Player View'
GO

CREATE VIEW playerView AS 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-12T08:24:28.670

批次由单词分隔`GO`- 这是对客户端工具的说明，而不是对 SQL Server 的说明，专门告诉这些工具如何将查询拆分为批次。

该错误告诉您`CREATE VIEW`必须是批处理中的第一条语句：

```
USE Assignment2;
GO

/* Player View (2 marks)
    Create a view which shows the following details of all players:
        • The ID number of the player
        • The first name and surname of the player concatenated and given an alias of “full_name”
        • The team ID number of the player (if applicable)
        • The team name of the player (if applicable)
        • The coach ID number of the player (if applicable)
        • The name of the player’s coach (if applicable)

   Creating this view requires a select statement using multiple joins and concatenation of names.  
   Make sure that you use the appropriate type of join to ensure that players without teams or coaches are still included in the results.

*/

-- Write your Player View here
PRINT 'Creating Player View'

GO -->-- New GO here

CREATE VIEW playerView AS 
```

所以我之前加了`GO`一个`CREATE VIEW`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-07T10:03:35.780

将 CREATE VIEW 代码放入 EXECUTE

```
SOME CONDITION..

EXECUTE('CREATE  VIEW vwName...') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-27T11:18:07.720

如果尝试从实体框架迁移执行脚本，您也可能会遇到此问题。我认为这是由于 EF 在事务中运行这些脚本（如该问题的另一个答案中所述）。您可以使用这种类型的语法来解决这个问题：

```
IF NOT EXISTS (SELECT * FROM sys.views WHERE object_id = OBJECT_ID(N'[dbo].[V_MovieActors]'))
EXEC dbo.sp_executesql @statement = N'CREATE VIEW [dbo].[V_MovieActors]
AS
SELECT       NEWID() AS Id, dbo.Movie.Title, dbo.Movie.ReleaseDate, dbo.Actor.FirstName + '' '' + dbo.Actor.LastName AS Actor, dbo.Actor.DateOfBirth
FROM            dbo.Actor INNER JOIN
                         dbo.Movie ON dbo.Actor.Id = dbo.Movie.Actor_Id
' 
```

这将整个事情变成了一个 SQL 执行的命令。该方法来自[Morgan Kamoga 的这篇非常有用的文章 Using SQL Views With Entity Framework Code First](https://laboremus.ug/?p=1708)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-28T00:05:19.587

这通常会发生，因为能够创建 VIEW 或任何 DBO，您需要整个脚本位于 TRANSACTION 中，或者您需要打开 SET QUOTED_IDENTIFIER。

IE

```
USE [yourdatabase]
GO

SET NUMERIC_ROUNDABORT, IMPLICIT_TRANSACTIONS OFF
SET ANSI_PADDING, ANSI_NULLS, QUOTED_IDENTIFIER, ANSI_WARNINGS, CONCAT_NULL_YIELDS_NULL, ARITHABORT, XACT_ABORT ON
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
GO

BEGIN TRANSACTION
GO

SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON

...
...

-- Write your Race View here
PRINT 'Creating Race View'
GO

CREATE VIEW raceView AS 
SELECT race.id, race.dateOfRace, race.raceType, raceType.name AS raceTypeName, race.course, course.name AS courseName, race.team, team.name AS teamName, race.observer, obs.firstName + ' ' + obs.surname AS observer_name, race.mvp, mvp.firstName + ' ' + mvp.surname AS mvp_name, race.pointsPenalised, race.finalScore + race.pointsPenalised AS unpenalised_score, race.finalScore
FROM race
INNER JOIN raceType
    ON race.raceType = raceType.id
    INNER JOIN course
        ON race.course = course.id
        INNER JOIN team
            ON race.team = team.id
            LEFT OUTER JOIN player AS mvp
                ON race.mvp = mvp.id
                LEFT OUTER JOIN player AS obs
                    ON race.observer = obs.id;
GO 

IF @@ERROR <> 0 BEGIN IF @@TRANCOUNT > 0 ROLLBACK SET NOEXEC ON END
GO

IF @@TRANCOUNT>0 COMMIT TRANSACTION
GO

SET NOEXEC OFF 
```

# python - 在 Python 中重用名称以节省内存

> ID：13340338
> 
> 赞同：1
> 
> 时间：2012-11-12T08:22:34.943
> 
> 标签：python, variables, memory, memory-management, copy

[Hitchhiker's Guide to Python](http://docs.python-guide.org/en/latest/writing/structure/#dynamic-typing)指出重用变量名是件好事。

```
foo = Spam()
bar = foo.eggs() 
```

我同意。它使代码可读。

如果变量是 40 MB 的数据怎么办？它会复制自己并总共有 80 MB 吗？

```
foo = buffer  # 40 MB.
bar = foo.resize((50, 50))  # +40? 
```

我知道当函数执行时内存会被释放，但我仍然不认为仅仅因为可读性而在一个应用程序状态下使用两倍高的内存使用量是一个好主意。这就像一个特例，但另一方面，特例还不够特别，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T08:25:57.760

Python 赋值只是将引用值复制到目标对象。没有数据复制。Python 变量只是 Python 系统字典中的名称加上作为对象引用值的值。

实际上，你应该小心分配。任何 Python 赋值都意味着共享参考值。Python 赋值从不意味着复制目标对象。使用字符串或数字等不可变对象时，不会出现任何问题。但是，当您分配任何可变对象（列表、字典、集合、某些用户对象）时，您应该知道之后您只是给目标对象一个不同的名称（通过引用值的另一个副本访问）。

将对象作为函数/方法参数传递也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T08:43:42.930

*如果您在调整数据大小之前*绝对必须将该数据完全保存在内存中（而不是只读取您关心的位），您可以这样做：

```
foo = buffer()
bar = foo.resize((50, 50))
del foo 
```

或等效地：

```
bar = buffer().resize((50, 50)) 
```

`buffer`一旦运行此代码，这两者都会使结果立即可用于垃圾收集。

此外，在这种情况下重用变量名是完全合理的——如果代码中的行是一个接一个，特别是如果`foo.resize`返回与 foo 相同类型的对象（看起来如此），那么：

```
foo = buffer
foo = foo.resize((50, 50)) 
```

很好。建议不要为完全不相关的变量重用名称——这样阅读您的代码的人就可以看到该变量，然后直接跳到第一次分配它的位置以了解它是什么。当其中一个只是获得您关心的实际对象的一次性“垫脚石”时，混淆读者的风险很小。

# android - 来自不同应用的两个无障碍服务可以同时运行吗？

> ID：13340341
> 
> 赞同：1
> 
> 时间：2012-11-12T08:22:47.903
> 
> 标签：android, sqlite, push, accessibility

我已经实现了无障碍服务来保存推送通知。它工作正常，但问题是当我在两个不同的应用程序中实现此服务时，只有一个之前注册的应用程序正在保存推送，而其他应用程序同样失败。我正在使用 sqlite 来保存推送消息。

# java - Listeners in forms with JComponents

> ID：13340351
> 
> 赞同：0
> 
> 时间：2012-11-12T08:23:35.583
> 
> 标签：java, swing, listener

Right now, when I have a form with many JComponents, mainly JTextFields, JTextAreas, JComboboxes, JCheckBoxes and JButtons and want to control their behaviour, for instance the change of focus after a certain key was released, I do the following:

I put all my components in a JComponent[] and cycle through it, adding the appropriate listener. When an event is registered by said listener, I check with "instanceof" what kind of JComponent fired the event and assign the proper reaction.

I use this method for instance to cycle with VK_ENTER through the form, or to "firePropertyChange(..)" after a DocumentListener fires, or to add UndoRedoListeners and so on.

My question : is there a better way to do this and if yes, can you explain to me the benefits ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:01:10.123

> but my question refers to the general practice of putting all JComponents in an array and cycling through them for every listener and every fired event. It works fine enough, but it feels a bit "uneconomic",so I wanted to know if it is recommended practice, or if there is a better way of doing it.

I usually write a custom listener (often as an anonymous class) per type/ instance if I have type/ instance specific behavior so that I can avoid instanceof and other other checks.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:25:14.003

You'll want to customise the focus tranfersal system.

Take a look at [How to Use the Focus Subsystem](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html), in particular [Customizing Focus Traversal](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#customFocusTraversal)

# math - 超平面之间的距离

> ID：13340353
> 
> 赞同：11
> 
> 时间：2012-11-12T08:23:45.500
> 
> 标签：math, image-processing, machine-learning, classification, image-recognition

我正在尝试自学一些机器学习，并且一直在使用 MNIST 数据库（[http://yann.lecun.com/exdb/mnist/](http://yann.lecun.com/exdb/mnist/)）这样做。该网站的作者在 98 年写了一篇关于所有不同类型的手写识别技术的论文，可在[http://yann.lecun.com/exdb/publis/pdf/lecun-98.pdf](http://yann.lecun.com/exdb/publis/pdf/lecun-98.pdf)获得。

提到的第 10 种方法是“切线距离分类器”。这个想法是，如果将每个图像放置在 (NxM) 维向量空间中，则可以将两个图像之间的距离计算为由每个图像形成的超平面之间的距离，其中超平面是通过取点和旋转图像来给出的，重新缩放图像，翻译图像等。

我想不出足以填补缺失的细节。我知道其中大多数确实是线性算子，那么如何使用这一事实来创建超平面呢？一旦我们有了一个超平面，我们如何计算它与其他超平面的距离？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T22:19:48.723

我会给你一些提示。您需要一些图像处理方面的背景知识。详见[2、3](https://web.archive.org/web/20130102144212/http://www-i6.informatik.rwth-aachen.de/~keysers/td/)。_ [_](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)

*   [2](https://web.archive.org/web/20130102144212/http://www-i6.informatik.rwth-aachen.de/~keysers/td/)是`c`切线距离的实现
*   [3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)是一篇更详细地描述切线距离的论文

## 图像卷积

根据[3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)，您需要做的第一步是平滑图片。下面我们展示了 3 种不同平滑操作的结果（查看第 4 节 of [3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)）（左列显示结果图像，右列显示原始图像和卷积算子）。这一步是将离散向量映射到连续向量，使其可微。作者建议使用高斯函数。如果你需要更多关于图像卷积的背景知识，[这里](https://web.archive.org/web/20131009161116/http://www.aishack.in/2010/08/convolutions/)有一个例子。

![在此处输入图像描述](../Images/371c01172e6d49e4c962cd96d1c38bb7.png)

完成此步骤后，您已经计算了水平和垂直偏移：

![在此处输入图像描述](../Images/ccb6546c018e8438f4429ef8cbc1ff21.png) ![在此处输入图像描述](../Images/fb6288bc21069982757e02d2f08df0e2.png)

## 计算缩放正切

[在这里，我向您展示了在2](https://web.archive.org/web/20130102144212/http://www-i6.informatik.rwth-aachen.de/~keysers/td/)中实现的切线计算之一——缩放切线。从[3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)，我们知道转换如下：

![在此处输入图像描述](../Images/745a20f81073f69f3191fd09a864f6e4.png)

```
/* scaling */
for(k=0;k<height;k++)
  for(j=0;j<width;j++) {
    currentTangent[ind] = ((j+offsetW)*x1[ind] + (k+offsetH)*x2[ind])*factor;
    ind++;
  } 
```

在`td.c`in [2](https://web.archive.org/web/20130102144212/http://www-i6.informatik.rwth-aachen.de/~keysers/td/)的实现开始时，我们知道以下定义：

```
factorW=((double)width*0.5);
offsetW=0.5-factorW;
factorW=1.0/factorW;

factorH=((double)height*0.5);
offsetH=0.5-factorH;
factorH=1.0/factorH;

factor=(factorH<factorW)?factorH:factorW; //min 
```

作者使用尺寸为 16x16 的图像。所以我们知道

```
factor=factorW=factorH=1/8, 
```

和

```
offsetH=offsetW = 0.5-8 = -7.5 
```

另请注意，我们已经计算过

*   `x1[ind]`= ![](../Images/ccb6546c018e8438f4429ef8cbc1ff21.png),
*   `x2[ind]`=![](../Images/fb6288bc21069982757e02d2f08df0e2.png)

因此，我们插入这些常量：

```
currentTangent[ind] = ((j-7.5)*x1[ind] + (k-7.5)*x2[ind])/8
                    = x1 * (j-7.5)/8 + x2 * (k-7.5)/8. 
```

由于`j`(also `k`) 是 0 到 15 之间的整数（图像的宽度和高度为 16 像素），`(j-7.5)/8`因此只是 到 之间的`-0.9375`分数`0.9375`。

所以我猜`(j+offsetW)*factor`是每个像素的位移，它与像素到图像中心的水平距离成正比。同样你知道垂直位移`(k+offsetH)*factor`。

## 计算旋转正切

[旋转切线在3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)中定义如下：

![在此处输入图像描述](../Images/c66115630802c36d5b333d6839844a43.png)

```
/* rotation */
for(k=0;k<height;k++)
  for(j=0;j<width;j++) {
    currentTangent[ind] = ((k+offsetH)*x1[ind] - (j+offsetW)*x2[ind])*factor;
    ind++;
  } 
```

使用前面的结论，我们知道`(k+offsetH)*factor`对应于`y`。同样`- (j+offsetW)*factor`对应`-x`。所以你知道这正是[3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)中使用的公式。

您可以在[2处找到](https://web.archive.org/web/20130102144212/http://www-i6.informatik.rwth-aachen.de/~keysers/td/)[3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)中描述的所有其他切线。我喜欢[3](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)中的下图，它清楚地显示了不同变换切线的位移效果。 ![在此处输入图像描述](../Images/15b9ff2626266dcba07d1da22768cfb3.png)

## 计算图像之间的切线距离

只需按照`tangentDistance`函数中的实现：

```
// determine the tangents of the first image
calculateTangents(imageOne, tangents, numTangents, height, width, choice, background);

// find the orthonormal tangent subspace 
numTangentsRemaining = normalizeTangents(tangents, numTangents, height, width);

// determine the distance to the closest point in the subspace
dist=calculateDistance(imageOne, imageTwo, (const double **) tangents, numTangentsRemaining, height, width); 
```

我认为以上内容应该足以让您入门，如果缺少任何内容，请仔细阅读[3并查看](http://yann.lecun.com/exdb/publis/pdf/simard-98.pdf)[2](https://web.archive.org/web/20130102144212/http://www-i6.informatik.rwth-aachen.de/~keysers/td/)中的相应实现。祝你好运！

# android - Android服务的新线程错误：线程已经启动

> ID：13340358
> 
> 赞同：0
> 
> 时间：2012-11-12T08:24:15.380
> 
> 标签：android, service

有broadcastReceiver 接收启动消息并设置一个alarmmanager。

它每隔 DELAY 分钟启动一项服务：

```
 Intent intent = new Intent();
 intent.setAction("org.jxdwinter.getMessageServcie");
 PendingIntent pendingintent = PendingIntent.getService(arg0, 0, intent, 0);
 am = (AlarmManager) arg0.getSystemService(Context.ALARM_SERVICE); 
 am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), DELAY, pendingintent); 
```

来自 romate 服务器的服务轮询数据在一个新线程中：

```
public int onStartCommand(Intent intent, int flags, int startId)
{
    this.getMessage.start();
    return Service.START_NOT_STICKY;
}
private class GetMessage extends Thread
{
    public void run()
    {
       ... ....
    }       
} 
```

当应用程序启动时，我可以在第一时间获取数据并且没有错误。

然后在 DELAY mins 内再次启动服务，出现错误：线程已启动。

为什么会发生？请帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:29:49.767

也许您可以在每次需要运行时创建线程的新实例：

```
public int onStartCommand(Intent intent, int flags, int startId)
{
    new GetMessage().start();
    return Service.START_NOT_STICKY;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:30:46.180

您正在使用的 GetMesdsage 类的实例是否是静态的？如果是，请不要这样做 - 初始化新的

# r - R 包无法通过“opencpu knitr app”访问

> ID：13340362
> 
> 赞同：2
> 
> 时间：2012-11-12T08:24:32.980
> 
> 标签：r, knitr, rapache, opencpu

几周前我开始玩 OpenCPU 并迷上了它。我能够成功安装“knitr”和“opencpu.demo”应用程序。我遇到的问题是当我尝试调用我打包在一个新的 r 包下的 R 函数并从 knitr-app 中调用它时。我收到一条消息说不存在这样的包。我从 R shell 和 knitr-app 界面运行了 installed.packages(lib.loc="/usr/lib/R/library") ，确实我的包出现在前者中，但没有出现在后一种情况下。不知道这里发生了什么！如果有人能回答这个问题，将不胜感激。

评论：当我通过 /R/pub/base/identity/json API 运行 find.package("DummyPkg") 时，我确实回来了

```
[
    "/usr/lib/R/library/DummyPkg"
] 
```

然而，来自 knitr-app 网页的相同查询返回：

```
# write R code here

find.package("DummyPkg")

## Error: there is no package called 'DummyPkg' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:31:01.603

knitr 应用程序的默认 html 页面具有指向 opencpu.org 服务器的链接，因此 POST 将转到公共服务器而不是转到我的服务器，难怪我的包没有出现！

评论：当我通过 /R/pub/base/identity/json API 运行 find.package("DummyPkg") 时，我确实返回 ["/usr/lib/R/library/DummyPkg"]

然而，来自 knitr-app 网页的相同查询返回：

# git - 用于将白标签实例部署到不同子域的 Git 策略。

> ID：13340366
> 
> 赞同：10
> 
> 时间：2012-11-12T08:24:54.037
> 
> 标签：git, git-branch, git-submodules

我有一种情况适合使用哪种 git 策略？

**情况 ：**

我们有一个具有 git 存储库的应用程序。在其中我们遵循分支策略，

1.  分支：**开发**：所有开发人员都使用它来实现功能

2.  分支：**测试**：部署到当前开发的代码以测试应用程序。

3.  分支：**生产**：在测试团队批准后，我们​​将测试分支合并到生产并将其部署到生产环境。

**问题 ：**

1.  现在我们有 3 个不同的产品安装（site1.mainDomain.com、site2.mainDomain.com、site3.mainDomain.com），这 3 个安装现在有不同的标题（徽标、标题颜色）。

2.  site1.mainDomain.com 可能有一些功能可以在未来开发并且只能用于 site1.mainDomain.com。

3.  site1.mainDomain.com、site2.mainDomain.com 的某些未来功能可能是通用的，但 site3.mainDomain.com 则不通用。

4.  现在，如果 site1.mainDomain.com 的生产有任何问题，这是基础分支的主要问题，我们将如何管理这件事。

那么为了实现这一点，哪个 git 策略有用？我正在阅读有关子模块、git 子树、git 补丁的信息。但做出决定时有点困惑。请提出最佳解决方案和可遵循的策略。

提前致谢。维杰

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T09:22:32.173

我认为您正在寻找解决此问题的错误位置（版本控制系统）。在这种情况下，我通常会为不同的上下文创建不同的设置文件，将所有设置文件保存在同一个 git 分支中，并且每个部署只有一个小的本地配置文件（主要是选择正确的上下文）。然后您的代码可以根据上下文检查要显示的内容类型。

我强烈建议不要为每个站点创建不同的功能分支，因为这会让你陷入混乱，并且持续不断的合并冲突解决得非常快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T09:36:58.540

我强烈建议不要使用 git 来解决问题。我可以从经验中看出，因为我正在从事的项目陷入了无缘无故需要维护两个 git 分支的陷阱。Github Firewall Install（Github:FI，Github Enterprise 的前身）也有同样的问题。

我建议看看功能标志（功能切换）模式来解决您的问题 - [http://martinfowler.com/bliki/FeatureToggle.html](http://martinfowler.com/bliki/FeatureToggle.html)

# jasper-reports - iReport - 连接具有不同评估时间的两个变量

> ID：13340370
> 
> 赞同：1
> 
> 时间：2012-11-12T08:25:12.673
> 
> 标签：jasper-reports, concatenation, ireport

我有两个变量

`$V{from}`将评估值设置为**Now**并将 `$V{to}`评估值设置为**Group**。

两者似乎都工作正常。

现在我需要附加它们。目前我有`$V{fromTo}`表达式 $V{from} + "-" + $V{to}。其评估时间值为**Group**。我想要的只是简单地附加两个首先提到的变量的当前值。当前表达式给了我结果（例如从 = 1，到 = 45）

45-45

似乎该表达式也采用了在组执行期间评估的 $V{from} 的值。知道怎么做吗？

（注意，要求不允许我只是简单地拖动两个字段，我非常需要将它存储在一个变量中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:11:48.520

我有同样的问题。我在我的文本字段中`Evaluation Time`解决了设置问题。`Auto`

# oop - OOP：A 类和 B 类相互依赖。这是很好的设计吗？

> ID：13340371
> 
> 赞同：0
> 
> 时间：2012-11-12T08:25:27.150
> 
> 标签：oop, uml

我已经阅读了一些 UML 类图。我以这种方式看到了一些 UML 设计：

例如：有两个类：Student 类和 Transcript 类。每个学生都有一份成绩单，每一份成绩单都和一个学生在一起。因此，班级学生和班级成绩单是相互依赖的。那么，这是一门精心设计的课程吗？

如果没有，我们该如何解决这个问题。如果这没问题，我怎样才能很好地实现这种关系？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:41:07.860

我不会说这是一个非常好的设计：显然，你想要`student.transcript.student == student`并且`transcript.student.transcript == transcript`在任何特定时刻都是真实的，对吧？但是没有成绩单的学生呢？没有学生的成绩单？如果这些被禁止，您可能会以一个有趣的情况结束：您必须同时创建相应的`Student`和`Transcript`！

好吧，在数据库领域，这通常用三个表建模（可能直接对应于实际物理表，也可能不直接对应）：

```
TABLE Student ( studentId ID PRIMARY KEY, ... )

TABLE Transcript ( transcriptId ID PRIMARY KEY, ... )

TABLE StudentTranscriptLink (
    studentId ID NOT NULL UNIQUE REFERENCES Student(studentId),
    transcriptID Id NOT NULL UNIQUE REFERENCES Transcript(transcriptId)
) PRIMARY KEY ( studentId, transcriptId ) 
```

`UNIQUE`约束确保如果您选择学生，获取其成绩单，并获得该成绩单的学生，您将返回到您开始使用的原始学生；`Transcript->Student->Transcript`导航也是如此。

在 OOP 世界中，您可能会有某种`StudentTranscriptDispatcher`内部信息`List<Pair<Student, Transcript>>`，以及`Student`转入`Transcript`和返回的方法。

然而，这种双向关系是……不寻常的。它基本上是将一个大物体切成两半——但仍然将这两半紧紧地绑*在一起*。你为什么要这样做？相反，它并没有消除任何复杂性：它引入了以前没有的新的、人为的复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:34:27.523

您可能应该在这里考虑的是可导航性。听起来这种关系是完全合适的，但是，您是否必须从 to`Transcript`导航`Student`？如果不是，则您的关系不是双向的，并且`Transcript`不再依赖于`Student`. 你总是`Student`先找到 a 再找到 a`Transcript`吗？

老实说，我不会担心太多。如果它适合你 - 去吧！

# api - gdata API 不返回任何结果

> ID：13340374
> 
> 赞同：1
> 
> 时间：2012-11-12T08:25:42.553
> 
> 标签：api, search, youtube, gdata, feed

我只是使用这个网址在 youtube 上查找带有“害怕”一词的评分最高的视频。

[http://gdata.youtube.com/feeds/api/standardfeeds/top_rated?q=scared](http://gdata.youtube.com/feeds/api/standardfeeds/top_rated?q=scared)

我没有使用类别或关键字，因为如果我使用它，Youtube 不会返回没有标签的视频。我希望 Youtube 按标题和描述寻找“害怕”，所以我使用“搜索查询词”：“q=”。

但是，使用“q=scared”，此链接仅返回 1 个视频。为什么？

另一个没有结果的例子——使用“most_recent”和关键字“scary”：

/feeds/api/standardfeeds/most_recent/-/%7Bhttp%3A%2F%2Fgdata.youtube.com%2Fschemas%2F2007%2Fkeywords.cat%7Dscary

并且使用 q="scary"，也没有结果：/feeds/api/standardfeeds/most_recent?q=scary

如何使用“搜索”字词获取视频？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:50:25.107

尝试使用这个：

[http://gdata.youtube.com/feeds/api/videos?q=scared](http://gdata.youtube.com/feeds/api/videos?q=scared)

希望这会奏效。

# android - 蜂窝网络连接问题

> ID：13340376
> 
> 赞同：11
> 
> 时间：2012-11-12T08:25:50.870
> 
> 标签：android

我们在我们的 Android 应用程序中发现了一个奇怪的错误，即该应用程序无法在某些 Android 型号/移动网络上通过蜂窝网络连接到互联网（通过 WiFi 连接非常有效）。然而，应用程序尝试访问的 URL 可以使用设备的普通浏览器访问，这排除了 URL 被上游阻止的可能性。任何可能导致这种情况的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:12:04.690

> 这排除了上游被阻止的 URL

不必要。正如其中一位评论者指出的那样，您没有说明您如何在应用程序中使用此 URL。如果这是一个 HTTP 请求，并且它在浏览器中运行，但在您的应用程序中不起作用，请尝试更改`User-Agent`请求的 HTTP 标头以匹配来自浏览器的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:26:39.377

您没有提供错误日志，但根据经验，我在连接到服务器时遇到了一些不一致的情况。

在 HoneyComb 及更高版本上设置了使用`HttpsUrlConnection`SNI 标头，但在以前的版本上没有设置，这可能会改变服务器的响应方式。除此之外，API 级别之间存在一些一般的 SSL 处理不一致，例如证书中通配符域的处理在某些 api 级别中是错误的。

其次，一些电话/api级别向`HttpUrlConnection`请求添加了一个标头，指定了请求的发送时间，如下所示：

```
X-Android-Sent-Millis=1353085024868 
```

一些服务器似乎使用这些标头来检测移动流量并更改响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:36:03.833

我在使用双卡时遇到了问题。是否连接了更多设备？尝试关闭它们。

# c - 只用一个循环排序。帮我看看它的效率

> ID：13340379
> 
> 赞同：-3
> 
> 时间：2012-11-12T08:26:08.747
> 
> 标签：c, arrays, sorting

我提出了一种新的排序算法，其中只有一个 do while 循环，但我不知道如何计算它在最佳、平均和最坏情况下的效率，所以请帮助我计算它。
循环以 i=1 开始，while 循环的结束条件是 i<=n-2，有时 i 的值会在循环中增加，有时 i 的值会根据某些条件减少。

如果你通过简单的例子来说明，我想我会更好地理解。请帮助我............
提前感谢那些帮助我的人......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:36:51.637

> 有时我的价值会根据某些条件递减

这种模糊性使我们无法分析。如果“条件”始终为真并且`i`递减为零，则循环将永远运行。所以根据你所说的，时间复杂度可能是`Theta(n)`无穷大。

计算时间复杂度的方法是计算（或设置上限）执行的操作数，作为 的函数`n`。在排序的情况下，“操作”通常意味着比较和复制/移动，但如果你的算法做任何不寻常的事情，那么当然必须包括在内。

# html - 网页和 IE7+ 打印预览中的不同字段宽度

> ID：13340384
> 
> 赞同：0
> 
> 时间：2012-11-12T08:26:32.440
> 
> 标签：html, css, internet-explorer, internet-explorer-8, internet-explorer-7

我需要为 IE7+ 实现像素完美的标记。我遇到的问题如下：网页视图和打印预览中字段的宽度不同。请参见以下示例：

```
<html>
    <style type="text/css">
    .input_multiline {
                    border:0;
                    height: 30px;
                    padding-left: 10px;
                    padding-top: 10px;
                    border-bottom:1px solid black;
                    font-family: monospace;
                    font-size:13pt;
                    margin-top:10px;
                }
    </style>

    <body>
        <input readonly = "readonly" class="input_multiline" style="width: 960px;" type="text" value="012345679 123456789 123456789 123456789 123456789 123456789 123456789 123456789 123456789 95chr"/>
    </body>
</html> 
```

这里的输入字段可以容纳 95 个字符，但是当我打印它时，它只显示 91 个字符。使用不同的宽度和 CSS 设置，我得到的差异是一行最多 10 个字符。

有没有办法以某种方式解决这个问题并确保我在浏览器中看到的页面将被打印出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:02:04.483

要在屏幕上显示相同宽度的线条并打印在纸上，应以厘米或英寸为单位指定宽度，而不是以像素为单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:38:27.303

打印介质中一行的字符数取决于纸张尺寸、纸张方向和页边距。您无法在 HTML 或 CSS 中控制它们。（`@page`IE 不支持 CSS3 中的内容。）

它还取决于字体，因此如果您需要像素完美，请设置`font-family`为特定字体（不是`monospace`，这取决于浏览器设置）。

任何不适合打印行的内容通常都会被忽略。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T08:32:51.297

我认为您正在寻找“大小”属性： [W3School 链接](http://www.w3schools.com/tags/att_input_size.asp)

但是要检查为什么打印时它看起来不同，您必须考虑整个样式表。打印布局也有不同的媒体查询。也许您可以调整打印布局，使其看起来与正常布局相同。

# iphone - Xcode 错误实例方法 - addAttachment withImageNamed not found

> ID：13340385
> 
> 赞同：0
> 
> 时间：2012-11-12T08:26:40.437
> 
> 标签：iphone, objective-c, ios, xcode, compiler-errors

我的项目出现错误，我收到 Xcode 错误实例方法 -addAttachment withImageNamed not found，下面是我的一些代码：

**HegakaDragAndDropRecycleBinViewController.h**

```
@interface HegakaDragAndDropRecycleBinViewController : UIViewController {
IBOutlet GalleryScrollView *gallery;

}
-(NSString*)withImageNamed;

@property (nonatomic, retain) IBOutlet GalleryScrollView *gallery;
@end 
```

**HegakaDragAndDropRecycleBinViewController.m**

```
#import "HegakaDragAndDropRecycleBinViewController.h"
#import "AttachmentItem.h"

@implementation HegakaDragAndDropRecycleBinViewController

@synthesize gallery;

- (void)dealloc
{
[super dealloc];
}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
 {
[super viewDidLoad];
self.gallery.mainView = self.view;

AttachmentItem *item = [[AttachmentItem alloc] initWithData:1 data:nil];
[self.gallery addAttachment:item withImageNamed:@"recyclebin"];
[self.gallery addAttachment:item withImageNamed:@"canadian-maple"];
[self.gallery addAttachment:item withImageNamed:@"light-cherry"];
[self.gallery addAttachment:item withImageNamed:@"mozambique-wenge"];
[self.gallery addAttachment:item withImageNamed:@"canadian-maple"];

[item release];
}

 - (void)viewDidUnload
 {
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

我在实施行和此处收到警报警告：

```
[self.gallery addAttachment:item withImageNamed:@"recyclebin"];
[self.gallery addAttachment:item withImageNamed:@"canadian-maple"];
[self.gallery addAttachment:item withImageNamed:@"light-cherry"];
[self.gallery addAttachment:item withImageNamed:@"mozambique-wenge"];
[self.gallery addAttachment:item withImageNamed:@"canadian-maple"]; 
```

该项目仍在运行，但有这 6 个警告。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:33:20.690

Make sure your class `AttachmentItem` declares `addAttachment:withImageNamed:` in its header file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:30:29.253

首先：

*   警告说什么？

What I think is happening is that you should import the GalleryScrollView in your .m file. Since you are trying to use a method from that specific class, I guess Xcode, is not able to see that it has `-addAttachment:withImageNamed:`. That's why it runs ok (the method exists in fact), but gives a warning because from a `HegakaDragAndDropRecycleBinViewController` you can't see it. Also, you should [treat warnings as errors](http://mobiledevelopertips.com/xcode/treat-warnings-as-errors.html). This can help you solving nasty things that can happen latter in development.

# python - 查找列表中最大的匹配项

> ID：13340391
> 
> 赞同：1
> 
> 时间：2012-11-12T08:27:19.610
> 
> 标签：python, list, max, min, dictionary

我一直试图在列表中找到最大的结果 - 使用置信度值。

列表示例：

```
[[{u'categories': [u'health-beauty'], u'confidence': 0.3333333333333333},
 {u'categories': [u'activities-events'], u'confidence': 0.6666666666666666}]] 
```

将返回**活动事件**字典

```
[[{u'categories': [u'home-garden'], u'confidence': 0.3333333333333333},
 {u'categories': [u'None of These'], u'confidence': 0.3333333333333333},
 {u'categories': [u'toys-kids-baby'], u'confidence': 0.3333333333333333}]] 
```

将返回**所有三个**，因为它们是相等的

```
[[{u'categories': [u'entertainment'], u'confidence': 1.0}]] 
```

会回归**娱乐**

我试图利用 python 的 max 函数：

```
seq = [x['confidence'] for x in d[0]]
max(seq) 
```

但这只是返回值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:47:37.073

您可以在自己的示例中找到最大置信度，然后使用它`filter`来创建所有最大记录的列表：

```
max_conf = max(x['confidence'] for x in d[0])
filter(lambda x: x['confidence']==max_conf, d[0]) 
```

如以下评论中所述，`filter`可以用列表理解替换：

```
max_records = [x for x in d[0] if x['confidence'] == max_conf] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:28:45.937

```
max(d[0], key=lambda x: x['confidence']) 
```

`d[0]`返回具有最高`confidence`属性的整个元素。

其他方式：

```
import operator as op

max(d[0], key=op.attrgetter('confidence')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:42:51.107

```
sorted(d[0], key=lambda k: k['confidence'])[-1] 
```

只是另一种方法。`d[0]`还返回具有最高`confidence`属性的整个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:55:28.783

如果您想以最高的置信度检索所有匹配项，`max`则不是选项。您首先需要按 key = confidence 对其进行排序（您可以为此目的使用[sorted ，并使用](http://wiki.python.org/moin/HowTo/Sorting/)[operator.itemgetter](http://docs.python.org/2/library/operator.html#operator.itemgetter)来检索密钥），然后根据置信度对元素进行分组（您可以使用[itertools.groupby ）。](http://docs.python.org/2/library/itertools.html#itertools.groupby)最终归还信心最高的群体

```
from itertools import groupby
from operator import itemgetter
groups = groupby(sorted(inlist[0], key = itemgetter(u'confidence'), reverse = True),
                 key = itemgetter(u'confidence'))
[e[u'categories'] for e in next(groups)[-1]] 
```

例子

```
>>> inlist = [[{u'categories': [u'health-beauty'], u'confidence': 0.3333333333333333}, {u'categories': [u'activities-events'], u'confidence': 0.6666666666666666}]]
>>> groups = groupby(sorted(inlist[0], key = operator.itemgetter(u'confidence'), reverse = True),key = operator.itemgetter(u'confidence'))
>>> [e[u'categories'] for e in next(groups)[-1]]
[[u'activities-events']]
>>> inlist = [[{u'categories': [u'home-garden'], u'confidence': 0.3333333333333333}, {u'categories': [u'None of These'], u'confidence': 0.3333333333333333}, {u'categories': [u'toys-kids-baby'], u'confidence': 0.3333333333333333}]]
>>> groups = groupby(sorted(inlist[0], key = operator.itemgetter(u'confidence'), reverse = True),key = operator.itemgetter(u'confidence'))
>>> [e[u'categories'] for e in next(groups)[-1]]
[[u'home-garden'], [u'None of These'], [u'toys-kids-baby']]
>>> inlist = [[{u'categories': [u'entertainment'], u'confidence': 1.0}]]
>>> groups = groupby(sorted(inlist[0], key = operator.itemgetter(u'confidence'), reverse = True),key = operator.itemgetter(u'confidence'))
>>> [e[u'categories'] for e in next(groups)[-1]]
[[u'entertainment']]
>>> 
```

# iphone - 围绕中心旋转矩形

> ID：13340392
> 
> 赞同：10
> 
> 时间：2012-11-12T08:27:32.173
> 
> 标签：iphone, ios, core-animation, core-graphics

我正在玩[Brad Larsen 改编](http://www.sunsetlakesoftware.com/2008/10/22/3-d-rotation-without-trackball)的轨迹球应用程序。
我有两个彼此成 60 度角的视图，想知道如何让旋转位于这个（非闭合）矩形的中心？

在下面的图片中，我希望旋转发生在蓝线内。

![在此处输入图像描述](../Images/c1a5dc7742775a022d55dee9b34c5220.png) ![在此处输入图像描述](../Images/8a9f77372f16e080dbd4f91f09398b23.png) ![在此处输入图像描述](../Images/74002a72e97e5a639dfd9f858e270dac.png)

代码（修改为只绕x轴旋转）：

```
#import "MyView.h"

//=====================================================
// Defines
//=====================================================

#define DEGREES_TO_RADIANS(degrees) \
    (degrees * (M_PI / 180.0f))

//=====================================================
// Public Interface
//=====================================================

@implementation MyView

- (void)awakeFromNib
{
    transformed = [CALayer layer];
    transformed.anchorPoint = CGPointMake(0.5f, 0.5f);

    transformed.frame = self.bounds;
    [self.layer addSublayer:transformed];

    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = CGRectMake(10.0f, 4.0f, self.bounds.size.width / 2.0f, self.bounds.size.height / 2.0f);
    imageLayer.transform = CATransform3DMakeRotation(DEGREES_TO_RADIANS(60.0f), 1.0f, 0.0f, 0.0f);
    imageLayer.contents = (id)[[UIImage imageNamed:@"IMG_0051.png"] CGImage];
    imageLayer.borderColor = [UIColor yellowColor].CGColor;
    imageLayer.borderWidth = 2.0f;
    [transformed addSublayer:imageLayer];

    imageLayer = [CALayer layer];
    imageLayer.frame = CGRectMake(10.0f, 120.0f, self.bounds.size.width / 2.0f, self.bounds.size.height / 2.0f);
    imageLayer.transform = CATransform3DMakeRotation(DEGREES_TO_RADIANS(-60.0f), 1.0f, 0.0f, 0.0f);
    imageLayer.contents = (id)[[UIImage imageNamed:@"IMG_0089.png"] CGImage];
    imageLayer.borderColor = [UIColor greenColor].CGColor;
    imageLayer.borderWidth = 2.0f;

    transformed.borderColor = [UIColor whiteColor].CGColor;
    transformed.borderWidth = 2.0f;
    [transformed addSublayer:imageLayer];

    UIView *line = [[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height / 2.0f, self.bounds.size.width, 2)];
    [line setBackgroundColor:[UIColor redColor]];
    [self addSubview:line];

    line = [[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height * (1.0f / 4.0f), self.bounds.size.width, 2)];
    [line setBackgroundColor:[UIColor blueColor]];
    [self addSubview:line];

    line = [[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height * (3.0f / 4.0f), self.bounds.size.width, 2)];
    [line setBackgroundColor:[UIColor blueColor]];
    [self addSubview:line];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    previousLocation = [[touches anyObject] locationInView:self];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint location = [[touches anyObject] locationInView:self];
    //location = CGPointMake(previousLocation.x, location.y);

    CATransform3D currentTransform = transformed.sublayerTransform;

    //CGFloat displacementInX = location.x - previousLocation.x;
    CGFloat displacementInX = previousLocation.x - location.x;
    CGFloat displacementInY = previousLocation.y - location.y;

    CGFloat totalRotation = sqrt((displacementInX * displacementInX) + (displacementInY * displacementInY));

    CGFloat angle = DEGREES_TO_RADIANS(totalRotation);
    CGFloat x = ((displacementInX / totalRotation) * currentTransform.m12 + (displacementInY/totalRotation) * currentTransform.m11);

    CATransform3D rotationalTransform = CATransform3DRotate(currentTransform, angle, x, 0, 0);

    previousLocation = location;
    transformed.sublayerTransform = rotationalTransform;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
}

- (void)dealloc {
  [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:01:55.087

您需要将`imageLayer.zPosition`每个三角形边的 设置为距三角形中心的距离（在您的情况下为等边三角形）。

如果`sideHeight = self.bounds.size.height / 2.0f;`
那么`distanceFromCenter = ((sideHeight / 2.0f) / sqrt(3));`

此外，当在侧面设置旋转时，您需要将它们移动到所需的位置（在您的代码中它们是硬编码的）。

**更新代码**

```
- (void)awakeFromNib
{
    transformed = [CALayer layer];
    transformed.anchorPoint = CGPointMake(0.5f, 0.5f);

    transformed.frame = self.bounds;
    [self.layer addSublayer:transformed];

    CGFloat sideHeight = self.bounds.size.height / 2.0f;
    CGFloat distanceFromCenter = ((sideHeight / 2.0f) / sqrt(3));

    CGFloat sideC = sideHeight / 2.0f;
    CGFloat sideA = sideC / 2.0f;
    CGFloat sideB = (sqrt(3) * sideA);

    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = CGRectMake(10.0f, (self.bounds.size.height / 2.0f) - (sideHeight / 2.0f), self.bounds.size.width / 2.0f, sideHeight);
    imageLayer.transform = CATransform3DConcat(CATransform3DMakeRotation(-DEGREES_TO_RADIANS(60.0f), 1.0f, 0.0f, 0.0f),
                                               CATransform3DMakeTranslation(0, -sideA, -sideB));
    imageLayer.contents = (id)[[UIImage imageNamed:@"IMG_0051.png"] CGImage];
    imageLayer.borderColor = [UIColor yellowColor].CGColor;
    imageLayer.borderWidth = 2.0f;
    imageLayer.zPosition = distanceFromCenter;
    [transformed addSublayer:imageLayer];

    imageLayer = [CALayer layer];
    imageLayer.frame = CGRectMake(10.0f, (self.bounds.size.height / 2.0f) - (sideHeight / 2.0f), self.bounds.size.width / 2.0f, sideHeight);
    imageLayer.transform = CATransform3DConcat(CATransform3DMakeRotation(DEGREES_TO_RADIANS(60.0f), 1.0f, 0.0f, 0.0f),
                                               CATransform3DMakeTranslation(0, sideA, -sideB));
    imageLayer.contents = (id)[[UIImage imageNamed:@"IMG_0089.png"] CGImage];
    imageLayer.borderColor = [UIColor greenColor].CGColor;
    imageLayer.zPosition = distanceFromCenter;
    imageLayer.borderWidth = 2.0f;

    transformed.borderColor = [UIColor whiteColor].CGColor;
    transformed.borderWidth = 2.0f;
    [transformed addSublayer:imageLayer];

    UIView *line = [[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height / 2.0f, self.bounds.size.width, 2)];
    [line setBackgroundColor:[UIColor redColor]];
    [self addSubview:line];

    line = [[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height * (1.0f / 4.0f), self.bounds.size.width, 2)];
    [line setBackgroundColor:[UIColor blueColor]];
    [self addSubview:line];

    line = [[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height * (3.0f / 4.0f), self.bounds.size.width, 2)];
    [line setBackgroundColor:[UIColor blueColor]];
    [self addSubview:line];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:49:29.050

还可以使用其他转换（我认为您需要翻译）并将它们与旋转连接起来。这个例子甚至缩放了图像，所以你得到了一个缩放、移动和旋转的图层：

```
CATransform3D translate = CATransform3DMakeTranslation(yourShiftByX, yourShiftByY, 0);
CATransform3D scale = CATransform3DMakeScale(yourRateX, yourRateY, 1);
CATransform3D rotate = CATransform3DMakeRotation(DEGREES_TO_RADIANS(60.0f), 1.0, 0.0, 0.0);
CATransform3D transform = CATransform3DConcat(CATransform3DConcat(rotate, scale), translate);
// the order is important: FIRST we rotate, THEN we scale and AT LAST we position the object

// now apply 'transform' to your layer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:01:29.503

你应该让你的 imageView superView 显示透视图：

```
CATransform3D tranfrom = CATransform3DIdentity;
tranfrom.m34 = -1.0 / z;
imageView.superview.layer.transform = transfrom; 
```

# sql - 使用 XML 路径的 SQL 连接 - 具有多个表引用的多行

> ID：13340395
> 
> 赞同：1
> 
> 时间：2012-11-12T08:27:52.800
> 
> 标签：sql, tsql, sql-server-2008-r2

我正在尝试使用 XML 路径来运行 SQL 连接，但我遇到了一些问题。我有一个表用作要连接的值的参考表。参考表中有 3 列（M.PROD、S.PROD 和 REF NUMB）。

*   M.PROD=====>S.PROD======>参考麻木
*   1===========> **_** ===========>981024583
*   2===========> **_** ===========>981024719
*   3===========> **A** ===========>981024605
*   3===========> **B** ===========>981024669
*   4===========> **A** ===========>981024688
*   4===========> **B** ===========>981024706
*   4===========> **C** ===========>981024723
*   5===========> **_** ===========>981024742
*   6===========> **_** ===========>981024742

我有主表，其中 m.prod 和 s.prod 用于匹配 Ref Numb 值的参考表。我想要做的是根据主表中选择的内容连接 Ref Numb 值。我正在寻找的输出是这样的：

*   M.Prod======>参考麻木
*   1===========>981024583
*   2===========>981024719
*   3===========>981024605、981024669
*   4===========>981024688、981024706、981024723
*   5===========>981024742
*   6===========>981024742

我正在使用以下查询：

```
SELECT DISTINCT P.PRODUCT, 
    (STUFF((SELECT DISTINCT ',' + P1.REFNUMB AS [text()]
            FROM PRODUCT P1
            WHERE P1.PRODUCT = P.PRODUCT 
            FOR XML PATH('')), 1, 1, ''))
FROM PRODUCT P 
```

这给了我以下输出：

*   M.Prod======>参考麻木
*   1===========>981024583
*   2===========>981024719
*   3===========>981024605、981024669
*   4===========>981024688、981024706、981024723
*   5===========>981024742
*   6===========>981024742

但是，有时所有 s.prod 都不在主表中。所以为此我使用这个查询：

```
SELECT DISTINCT P.PRODUCT, 
    (STUFF((SELECT DISTINCT ',' + P1.REFNUMB AS [text()]
            FROM PRODUCT P1
            WHERE P1.PRODUCT = P.PRODUCT AND P1.SUBID = P.SUBID
            FOR XML PATH('')), 1, 1, ''))
FROM PRODUCT P 
```

此查询为我生成以下输出：

*   M.Prod======>参考麻木
*   1===========>NULL
*   2============>NULL
*   3===========>981024605
*   3===========>981024669
*   4===========>981024688
*   4===========>981024723
*   5===========>NULL
*   6===========>NULL

在这些情况下我需要的输出是：

*   M.Prod======>参考麻木
*   1===========>981024583
*   2===========>981024719
*   3===========>981024605、981024669
*   4===========>981024688、981024723
*   5===========>981024742
*   6===========>981024742

对此的任何解决方案将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:11:15.720

我不确定我是否正确理解了你的问题，但试试这个：

```
SELECT DISTINCT P.PRODUCT, 
    (STUFF((SELECT DISTINCT ',' + P1.REFNUMB AS [text()]
            FROM PRODUCT P1
            WHERE P1.PRODUCT = P.PRODUCT 
            AND (P1.SUBID = P.SUBID OR P1.SUBID IS NULL AND P.SUBID IS NULL)
            FOR XML PATH('')), 1, 1, ''))
FROM PRODUCT P 
```

# python - 将数据附加到未声明的列表中

> ID：13340398
> 
> 赞同：4
> 
> 时间：2012-11-12T08:27:58.473
> 
> 标签：python, python-3.x

当我在 Python 中编码时，每隔一段时间就会出现以下场景：

我遍历一个循环，发现我想将一个变量的中间值存储在一个列表中以供以后使用。以下是一个非常基本的示例代码：

```
for x in range(0,10):
    y = x*x
    temp_list.append(y) 
```

问题是`temp_list`尚未声明。所以我通常导航到循环的顶部，然后添加以下内容：

```
temp_list = []
for x in range(0,10):
    y = x*x
    temp_list.append(y) 
```

虽然这可能看起来微不足道，但我只是想知道是否有任何 pythonic 方法来创建一个列表，如果它不存在然后附加一个值，或者如果它存在，只是附加？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T08:29:48.633

对于您的基本示例，可以使用列表理解来完成：

```
l = [x*x for x in range(0, 10)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T08:32:14.553

变量是否被声明应该总是很清楚。您希望如何访问它？

您可以动态执行的是 dict 条目：

```
a = {}

for x in range(0,10):
    y = x*x
    a.setdefault('temp_list', []).append(y) 
```

只有在`a['temp_list']`需要时才会创建。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T09:03:27.627

根据您的问题，处理这种结构的一种好的“pythonic”方式可能是将其抽象为生成器。对于您的简单示例：

```
def squares():
    for x in range(0,10):
        y = x*x
        yield y 
```

然后：

```
temp_list = [i for i in squares()] 
```

很多时候，当您需要这样的临时列表时，因为您正在对数据运行一系列操作，每个操作都涉及另一个循环。使用生成器可以显着提高性能和内存使用率，因为它们只产生一个循环。

请注意，对于简单的示例，编写生成器表达式通常更容易：

```
temp_list = (x*x for x in range(0, 10)) 
```

如果你想要一种不那么 Python 的方式，你可以编辑 locals 字典，但这并不是一个好主意，因为它会导致代码混淆：

```
for x in range(0, 10):
    y = x*x
    locals().setdefault('temp_list', []).append(y) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-19T14:33:39.030

根据 OPs 模板使用本地人解决的另一种方法，

```
for x in range(0,10):
   y = x * x
   temp_list = temp_list + [y] if "temp_list" in locals() else [y]

print(temp_list) 
```

给，

```
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]

[Program finished] 
```

但是是的，这可能应该通过列表理解来解决

# ruby-on-rails-3 - Capybara 2.0.0.beta4 有未定义的路径

> ID：13340400
> 
> 赞同：5
> 
> 时间：2012-11-12T08:28:13.233
> 
> 标签：ruby-on-rails-3, capybara, rspec-rails

我刚刚使用 rspec-rails 2.11.4 升级到 Capybara 2.0.0.beta4，并且按照 RSpec-Rails 存储库中[Capybara-Readme](https://github.com/rspec/rspec-rails/blob/master/Capybara.md)`spec/features`的建议将我的请求规范（我只有一个）移动到了。当我现在运行测试时，它找不到任何路径。所以对于下面的测试块：

```
it "should be able to access the signup page through the front page" do
  visit root_path
  click_link "Signup For Free Now"
  page.should have_content("Signup")
end 
```

我收到错误消息：

```
Failure/Error: visit root_path
NameError: undefined local variable or method `root_path' for #<RSpec...> 
```

当我尝试使用它运行测试时，`visit "/"`它工作正常。其他 gem 版本是：

*   导轨 3.2.1
*   rspec 2.11.0
*   机架测试 0.6.2

路径问题的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T22:32:51.860

运行“bundle update rspec-rails”来获取版本 2.12.0 为我解决了同样的问题。

# android - Android，如何从 URL 加载“gz”文件并在加载时自动解压缩内容？

> ID：13340403
> 
> 赞同：1
> 
> 时间：2012-11-12T08:28:34.640
> 
> 标签：android, http, gzip

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:35:50.283

# javascript - 如何通过 JavaScript 重定向到 404 错误页面？

> ID：13340409
> 
> 赞同：0
> 
> 时间：2012-11-12T08:28:59.113
> 
> 标签：javascript, redirect

该网站仅由 index.php 组成，内容通过 JavaScript 更改，当我输入随机地址而不是一些真正的导航链接时，它只会显示标题，没有内容，没有重定向。在`ErrorDocument 404 /404.html`.htaccess 中没有帮助。

有没有办法解决这个问题？

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?q=$1 [NE,L]

  ErrorDocument 404 /404.html

</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:32:14.570

Javascript 需要加载实际页面...如果您收到 404，则没有 javascript 可用于处理重定向。

您的虚拟主机是否支持自定义 .htaccess 文件？它应该被命名为别的东西吗？此外，请确保 .htaccess 位于网页的根目录中，以便包含所有子文件夹。

如果您想将 .htaccess 与 javascript 结合使用，请尝试以下操作：

```
ErrorDocument 404 "<script>//do something</script>" 
```

**编辑**

由于您的 .htaccess 中的这一行

```
RewriteRule ^(.*)$ index.php?q=$1 [NE,L] 
```

您永远不会收到实际的 404 错误。原因是诸如“www.example.com/page1”之类的 url 将重定向到：“www.example.com/index.php?q=page1”

为了防止错误页面无法加载，在检测到“q”变量的 PHP 脚本中执行以下操作：

```
if($_REQUEST['q'] == ""){
    //Show the home page
}else if($_REQUEST['q'] == "portfolio"){
    //Show portfolio page
}else{
    //No page for provided arguments, show an error or redirect to error page.
} 
```

# c++ - 简单的 C++ 指针混淆

> ID：13340415
> 
> 赞同：0
> 
> 时间：2012-11-12T08:29:18.223
> 
> 标签：c++, pointers

```
void changeStr(char *str)
{
    str = "D";
}

void changeStr(char **str)
{
    *str = "S";
}

    char str[] = "Good";
    changeStr(str); 
    cout<<str<<endl;
    char *p = str;
    //*p = 'j';
    changeStr(&p);
    cout<<str<<endl; 
```

我只是尝试更改该`str[]`数组的值。不退不换！

我认为第一个`changeStr`只是传入指针`str`并更改该值，但实际上它并没有更改它。

第二个我使用指针指针但也无法工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T08:48:27.133

让我们一步一步来。

```
char str[] = "Good"; 
```

您正在创建一个字符数组，长度为 5 个字符，内容如下：

`{ 'G', 'o', 'o', 'd', '\0' }`

```
changeStr(str); 
```

在这里，您将该数组传递给一个函数。由于数组衰减为指针，所以这个调用完全没问题。

```
void changeStr(char *str)
{
    str = "D";
} 
```

现在，第一个问题来了。您可能会感到困惑`"D"`并且`'D'`. 如果要更改数组中的第一个字符，则需要按以下方式进行：

```
str[0] = 'D'; 
```

这会很好。更改指针不会做任何事情，因为它是一个局部变量，它保存指向数组开头的指针，而不是数组本身。如果你想用 just 替换数组的全部内容`{ 'D', '\0' }`，你需要使用`strcpy`.

```
strcpy(str,"D"); 
```

现在，让我们检查最后一部分。在这里你把事情搞混了。

```
char *p = str;
changeStr(&p); 
```

您正在创建一个指向数组开头的新变量，并将指向该变量的指针传递给下一个函数。

```
void changeStr(char **str)
{
    *str = "S";
} 
```

这确实改变了传递的原始变量，但请记住，这`p`不是数组。你所做的是改变`p`点。它现在指向一个常数`"S"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:36:35.170

在`changeStr`函数的第一个版本中，参数`str`被认为是局部变量，并且所有局部变量对它们的更改仅在实际函数内部进行更改。

第二个版本将字符串作为参考传递。基本上，当您指定一个变量应作为`&`规范的引用传递时，就会发生这种情况：

```
void changeStr(char *&str) 
```

在内部，编译器将引用作为指针传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:45:10.843

要更改 str 的值，您必须通过引用传递它。

它必须像

```
void changeStr(char* &str) 
```

这将确保变量通过引用传递，因此如果您对函数中的变量进行任何更改，它将是全局更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:34:09.240

您不应该使用赋值运算符将字符串存储在变量中，即使它是一个指针。包含 string.h 后使用 strcpy

```
void changeStr(char *str)
{
    strcpy(str, "D");
} 
```

这应该改变 str 指针指向的数据......即使在进行函数调用的范围内......

# c# - c#打印格式化数据的简单方法

> ID：13340416
> 
> 赞同：6
> 
> 时间：2012-11-12T08:29:22.897
> 
> 标签：c#, .net, xml, winforms, printing

我正在寻找一种简单的方法来打印带有数据库数据的 DIN-A4 纸。数据应填写到多个带边框的表格中。某些数据应具有不同的文本格式，例如粗体或下划线。我还应该能够在这张纸上打印多个图像。

该程序应该是一个 Windows 窗体应用程序或用 C# 编写的控制台应用程序。

哪种是格式化数据并像这样打印数据的最简单/最常见的方法？

任何建议都值得赞赏:)

编辑：

这是我当前的代码，几乎没有成功。它实际上是打印的，但我得到的只是打印的 xml 文件。

```
 private void printButton_Click(object sender, EventArgs e)
    {

        string printPath = System.Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
        fileToPrint = new System.IO.StreamReader(printPath + @"\test.xml");
        printFont = new System.Drawing.Font("Arial", 10);

        PrintDocument printDocument1 = new PrintDocument();
        printDocument1.PrintPage += new PrintPageEventHandler(printDocument1_PrintPage);
        printDocument1.Print();
        fileToPrint.Close();
    }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        float yPos = 0f;
        int count = 0;
        float leftMargin = e.MarginBounds.Left;
        float topMargin = e.MarginBounds.Top;
        string line = null;
        float linesPerPage = e.MarginBounds.Height / printFont.GetHeight(e.Graphics);
        while (count < linesPerPage)
        {
            line = fileToPrint.ReadLine();
            if (line == null)
            {
                break;
            }
            yPos = topMargin + count * printFont.GetHeight(e.Graphics);
            e.Graphics.DrawString(line, printFont, Brushes.Black, leftMargin, yPos, new StringFormat());
            count++;
        }
        if (line != null)
        {
            e.HasMorePages = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:56:00.437

如果没有额外的工具，在 .NET 中打印是相当困难的。

1.  Visual Studio 2008 和[报表向导](http://www.c-sharpcorner.com/uploadfile/john_charles/report-wizard-in-visual-studio-2008/)

    它是我最喜欢的工具。它基于 Visual Studio 2008 中提供的 Microsoft Reporting Services。它的工作方式类似于 MS Access 报告功能。

    不幸的是，我无法在其他 Visual Studio 版本中运行它并设计报告。Reporting Services 在 .NET Framework 中可用，您可以将它们与任何 Visual Studio 一起使用，但在 2008 以外的版本中没有报表设计器/向导工具）。

2.  Crystal Reports（昂贵但非常好）。

3.  如果您有时间，您可能会与这样的像素作斗争：

    [在 codeproject.com 上使用 C# Dave Brighton 简化 .NET 打印](http://www.codeproject.com/Articles/9282/Simplified-NET-Printing-in-C)

4.  WebBrowser 控件，正如@colosso 在另一个答案中所写，但这取决于 Internet Explorer 版本，我个人不喜欢这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:46:48.480

我发现了两种可能性：

**1）**在我看来，这是最糟糕的一个。我找到了一个名为“Antena house formatter”的第三方软件。您可以在[www.antennahouse.com](http://www.antennahouse.com/)上找到它，但遗憾的是它既不是开源软件也不是免费软件。该软件允许您将 xml、xsl 或 xsl-fo 数据转换为 pdf 和其他格式。从那里您可以使用标准 c# 打印它。由于某些原因，我没有选择这种方式：在我看来，沉迷于第三方软件并不是一个好的解决方案，尽管这个 Antennahouse 格式化程序是一个非常好的、可靠和快速的软件。

**2）**这是我选择的解决方案。您可以创建一个简单的 WebBrowser 控件并使用保存的 html 文件填充它，也可以只使用动态创建的字符串填充它。我现在生成一个包含整个 html 文档的字符串，并将其加载到 Webbrowser 控件中：

```
webBrowser1.Document.OpenNew(true);
string strHtml = "<html><head></head><body></body></html>";
webBrowser1.Document.Write(strHtml); 
```

加载表单时，我打开一个新的“选项卡”：

```
webBrowser1.Navigate("about:blank"); 
```

您可以显示 Webbrowser 控件以“预览”正在打印的站点，也可以将其隐藏。最后，当您将 html 文件加载到控件中时，您可以使用以下命令进行打印：

```
webBrowser1.Print(); 
```

它将使用您的默认打印机打印文档。我知道，使用 html 文件来打印这样的网站感觉有点“hacky”，但这是我发现做类似事情的最简单方法。特别是如果您要打印非常复杂的站点，其中包含许多不同的内容。

**很高兴知道：**

*   我必须打印 DIN-A4 站点。我将我的内容设置为 670 像素，这很合适。
*   您正在使用 Webbrowser 控件进行打印。他将从您本地安装的 Internet Explorer（或注册表，如果我们想要的话）中获取打印机设置。如果您想更改它，请进入您的 IE > 打印 > 页面设置...并设置您想要的选项，或者只是在您的注册表中更改它。

希望这可以帮助某人:)

# javascript - 如果我有相同的图像，如何在页面上一遍又一遍地重复加载页面？

> ID：13340425
> 
> 赞同：-3
> 
> 时间：2012-11-12T08:30:48.517
> 
> 标签：javascript, jquery, html, image

我可以使用 JavaScript Image 对象吗？如果是这样，有人可以给我一个例子吗？可以用 jQuery 来完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:32:29.197

在这种情况下，javascript 图像对象不会为您保存任何东西。浏览器将在第一次加载图像时缓存图像，然后在页面上引用它时从缓存中检索它。Javascript 不会帮助您解决此问题的页面加载速度。

更少的图像或更小的图像会有所帮助。如果您有很多不同的图像，有时可以将它们组合成一个精灵，然后加载速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:41:11.937

通常你不需要做任何事情：浏览器只会缓存对图像（或任何其他远程资源）的远程请求，你不能以任何方式用实际数据“复制”节点。

无论出于何种原因，以某种方式绕过此方案的唯一方法是以[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)的形式内联数据。这样，您可以将您的图像或其他资源重新映射到 JS 变量中的数据 URI，您可以将其分配给节点`src`或类似属性，并避免任何其他请求的尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:32:41.430

如果您在同一页面上一遍又一遍地使用相同的图像，浏览器会将其缓存并仅在第一次加载

# javascript - 我应该如何调用函数以便一个接一个地执行它们？

> ID：13340428
> 
> 赞同：-1
> 
> 时间：2012-11-12T08:31:35.567
> 
> 标签：javascript, sqlite

我正在尝试开发移动应用程序，我使用框架（PhoneGap），我有sql操作所以我选择这个单独的，每个操作放在一个函数下，这些函数将按顺序调用。

我的问题是这些函数没有按顺序调用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:33:17.180

JavaScript SQL 库往往是异步的并使用回调。将对下一个函数的调用放入您在上一个函数中使用的回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:39:28.557

Javascript代码一般是异步的，为了保证代码的执行顺序，一般会使用回调，库中的函数可能是这样的：

```
function doWork(params, callback){
  //do stuff

  //when done call the callback function
  callback()
} 
```

这允许你使用这个函数并传递一个函数，当这个函数完成它需要做的事情时调用它。

```
doWork(params, function() { 
  //this code is not executed until doWork has completed and called its callback 
}) 
```

看看你正在使用的库，他们可能使用回调

# ios - NSURL 请求？注册和登录

> ID：13340429
> 
> 赞同：0
> 
> 时间：2012-11-12T08:31:45.677
> 
> 标签：ios, nsurlconnection

这是我的代码：

```
//login method
- (int) authenticateClient {
NSString *loginWeb = [NSString stringWithFormat:(@"http://192.168.118.1/login.php?uname=%@&pass=%@&submit=Log%%20In"), user, pass];
NSURL *login = [NSURL URLWithString:loginWeb];
NSData *loginData = [NSData dataWithContentsOfURL: login];
NSString *result = [[NSString alloc] initWithData:loginData encoding:NSUTF8StringEncoding];
NSMutableURLRequest *loginRequest = [[NSMutableURLRequest alloc] init];
[loginRequest setURL:login];
[loginRequest setTimeoutInterval:1];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:loginRequest delegate:self startImmediately:YES];
[connection start];
   return [result integerValue];
} 
```

我的问题是，在模拟没有网络连接时，我的应用程序冻结并且在指定的时间间隔内没有加载或超时（1 秒只是为了看看它是否有效）。

我读了一些关于立即开始强制运行当前威胁的内容，导致其他一切“暂停”，直到行动完成。

我有两个问题：

1.) 让 URL 基本上在后台运行而不是暂停所有内容的更好方法是什么？

2.) 我怎样才能得到一个真正有效的超时方法？

非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:48:32.880

好吧，一秒钟的超时时间真的很低。如果要模拟不同的网络条件，可以使用类似[这样](http://mschrag.github.com/)的东西。你不需要这样的舞蹈：

```
NSData *loginData = [NSData dataWithContentsOfURL: login];
NSString *result = [[NSString alloc] initWithData:loginData encoding:NSUTF8StringEncoding]; 
```

您也不需要这个，因为连接已经开始：

```
[connection start]; 
```

同样来自[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)：

> NSURLConnection 的委托方法——由 NSURLConnectionDelegate 协议协议定义——允许对象接收有关 URL 请求异步加载的信息回调。其他委托方法提供允许委托自定义执行异步 URL 加载过程的工具。在为关联的 NSURLConnection 对象启动异步加载操作的线程上调用这些委托方法。

所以对于你的问题：

*   实现`NSURLConnection’s`委托
*   检查[这个](https://stackoverflow.com/questions/1424608/nsurlconnection-timeout)和[这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)。

# c# - 来自 wav 文件的 C# 语音识别，我需要获取每个单词的时间 - lipsync

> ID：13340430
> 
> 赞同：2
> 
> 时间：2012-11-12T08:31:53.800
> 
> 标签：c#, speech-recognition, wav, timespan

我已经从 wav 文件构建了一个语音识别解决方案，并将单词分解为口型同步应用程序，我需要语音识别系统中的单词 + 它与 wav 文件的时间。我需要得到每个单词的时间，甚至字符（字母）任何类型的时间都可以工作，它不能在“`SpeechRecognizedEventArgs`我尝试的事件”下完成，`SpeechDetected`它返回检测的开始，可能会工作。我试过了：

```
static void recognizer_SpeechDetected(object sender, SpeechDetectedEventArgs e)
{
Console.WriteLine("  Speech detected at AudioPosition = {0}", e.AudioPosition);
// TimeSpan interval = new TimeSpan(0, 0, 01);
// Console.WriteLine(interval.ToString())
} 
```

在音频开始之前我只有几毫秒。

识别事件中的 AudioPosition 为我提供了 wav 文件的全部时间。

我的想法是`"foreach"`，如果没有其他方法可以通过单词识别事件来获取时间，或者第二个选项是像 2 秒那样播放 wav 文件并识别一个或一半单词然后完成. 一切都是为了获得某种时机。

也许所有这些都是复杂的想法，因为我不懂 C#。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-06T20:18:22.607

如果您不想自己编写整个代码，该公司提供的产品符合您的描述：

[http://www.freakngenius.com/](http://www.freakngenius.com/)

如果您确实想制定自己的解决方案，那么一个想法可能是查看不同点的音频音量。音量的下降可能表示单词之间的中断。

# windows - 在 Windows Phone 中按下按钮期间执行某些操作

> ID：13340432
> 
> 赞同：0
> 
> 时间：2012-11-12T08:32:08.980
> 
> 标签：windows, windows-phone-7, windows-phone, winrt-xaml, windows-phone-8

在有人按下按钮期间，我该如何做某事（我想增加一个变量并将其显示在屏幕上）。实际上，Windows Phone 中的按钮没有称为 OnPressed 的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:36:28.483

有`Button`一个`Click`事件，您可以处理并使用它来执行您的逻辑。

为了在按下期间执行逻辑，请处理`ManipulationStarted`和`ManipulationEnded`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:56:10.870

除了点击事件，你还可以使用 Tap 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:03:37.067

问题是您的按钮将处理该事件并防止它冒泡 - 如果不是这种情况，您可以使用 MouseLeftButtonDown/Up 事件来执行此操作。但是，有一种方法可以解决这个问题，并且仍然可以使用更繁琐的 UIElement.AddHandler 方法来获取事件。例如：myButton.AddHandler(UIElement.MouseLeftButtonDownEvent, new MouseButtonEventHandler(myMouseEventHandlerMethod), true);

最后一位（'true'）很重要，因为它会覆盖事件冒泡。'myMouseEventHandlerMethod' 是您通常用于处理 MouseLeftButtonDown 事件的方法。处理“向上”是一回事。您可能还想处理“离开”，或者在按下触发器时使用 CaptureMouse()。

# java - JFrame + JDialog's to JFrame

> ID：13340450
> 
> 赞同：1
> 
> 时间：2012-11-12T08:33:22.077
> 
> 标签：java, swing, jframe, jdialog, cardlayout

我有一个游戏。菜单通过`JFrame`，游戏通过`JDialog`，但我想创建一帧（1280x1024）并将我的所有菜单、弹出窗口和游戏都放在一个窗口中。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:37:28.877

当然 ！看看 JMenuBar 和 JInternalFrame :)

# sql - SQL 触发器创建问题

> ID：13340451
> 
> 赞同：2
> 
> 时间：2012-11-12T08:33:44.000
> 
> 标签：sql, oracle, triggers, database

我有电影行政桌

> 电影执行官

与列

> （名称 varchar2(20)，地址 varchar2(20)，cert# number(10)，networth float）

我想创建一个计算平均净值的触发器，如果​​它超过某个数量，比如 400000，则应该无法进一步插入，并且应该显示一条错误消息。

我实现了以下代码：

```
CREATE OR REPLACE TRIGGER pronet
AFTER INSERT
ON movieexec
FOR EACH ROW
DECLARE netavg float;
BEGIN
  SELECT AVG(networth) INTO netavg FROM movieexec;
  IF(netavg>400000) THEN
     RAISE_APPLICATION_ERROR(-20000,'average limit reached, cannot insert');
  ENDIF;
END 
```

但是出现以下错误

```
ERROR at line 7: PLS-00103: Encountered the symbol ";" when expecting one of the following:
  if
5\. DECLARE netavg float;
6\. BEGIN
7\. **SELECT AVG(networth) INTO netavg FROM movieexec;**
8\. IF(netavg>400000) THEN
9\. RAISE_APPLICATION_ERROR(-20000,'average limit reached, cannot insert'); 
```

请协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:40:54.910

创建表为

```
CREATE TABLE movieexec
(
    name          VARCHAR2 (20),
    address   VARCHAR2 (20),
    cert_no   NUMBER (10),
    networth   FLOAT
); 
```

并将触发器创建为

```
CREATE OR REPLACE TRIGGER pronet
    AFTER INSERT
    ON movieexec
    FOR EACH ROW
DECLARE
    netavg  FLOAT;
BEGIN
    SELECT  AVG (networth)
      INTO  netavg
      FROM  movieexec;

    IF (netavg > 400000)
    THEN
        raise_application_error (-20000,
                                         'average limit reached, cannot insert'
                                        );
    END IF;
END;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:21:44.730

使用触发器没有安全的方法来做到这一点，因为总会有办法颠覆它。

在 Oracle EE 中，您可以在提交物化视图上创建快速刷新以存储聚合，并对其放置检查约束。

此外，切勿使用 SYS 或 SYSTEM 帐户来创建您自己的对象。

# android - Android VideoView 播放 HLS 使整个应用无响应

> ID：13340452
> 
> 赞同：0
> 
> 时间：2012-11-12T08:33:56.770
> 
> 标签：android, response, android-videoview

我一直在使用Android VideoView播放HLS（Http Live Stream），但是如果我暂停视频一段时间并继续播放它。即使我单击后退按钮，应用程序也会冻结。

如何在不停止整个应用程序的情况下完成 VideoView 线程？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:35:00.740

这是Android固有的问题。有两种方法可以解决这个问题。

1）禁用VideoView的暂停按钮，需要重写canPause（）。

2) 使用 ffmpeg 库，例如 Vitamio 插件。但是这些第三方库都不稳定，可能会出现影音不同步、不能拖拽等缺陷。

# php - 从字符串php读取数组

> ID：13340455
> 
> 赞同：1
> 
> 时间：2012-11-12T08:34:04.777
> 
> 标签：php, arrays, string, filter

我有一个这样的字符串

```
$php_string = '$user["name"] = "Rahul";$user["age"] = 12;$person["name"] = "Jay";$person["age"] = 12;'; 
```

或者像这样

```
 $php_string = '$user = array("name"=>"Rahul","age"=>12);$person= array("name"=>"Jay","age"=>12);'; 
```

我需要从字符串中获取数组，

预期结果是

```
print_r($returned);

Array
(
    [name] => Rahul
    [age] => 12
) 
```

**请注意，字符串上可能还有其他内容，包括注释、其他 php 代码等**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:55:15.003

与其依赖一些神奇的正则表达式，我会走一条更简单的路线，用它[`token_get_all()`](http://www.php.net/token_get_all)来标记字符串并创建一个非常基本的解析器，它可以基于两种数组构造方法创建必要的结构。

我不认为很多人自己推出了这个，但它可能是最稳定的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:35:31.220

使用`eval`和`preg_match_all`这样的组合：

```
if(preg_match_all('/array\s*\(.*\)/U', $php_string, $arrays)){
    foreach($arrays as $array){
        $myArray = eval("return {$array};");
        print_r($myArray);
    }
} 
```

只要您的数组不包含`)`但可以进一步修改以处理这种情况，这将起作用

或者正如杰克建议的那样使用`token_get_all()`：

```
$tokens = token_get_all($php_string);
if(is_array($tokens)){
    foreach($tokens as $token){
        if($token[0] != T_ARRAY)continue;
        $myArray = eval("return {$token[1]};");
        print_r($myArray);
    }
} 
```

# scala - 函数式编程世界中的“世界”是什么意思？

> ID：13340458
> 
> 赞同：25
> 
> 时间：2012-11-12T08:34:20.570
> 
> 标签：scala, haskell, f#, functional-programming

我已经潜入函数式编程 3 年多了，并且我一直在阅读和理解函数式编程的许多文章和方面。

但我经常偶然发现许多关于副作用计算中的“世界”以及在 IO monad 样本中携带和复制“世界”的文章。在这种情况下，“世界”意味着什么？这是所有副作用计算上下文中的同一个“世界”还是仅适用于 IO 单子？

此外，有关 Haskell 的文档和其他文章也多次提到“世界”。

关于这个“世界”的一些参考：http: [//channel9.msdn.com/Shows/Going+Deep/Erik-Meijer-Functional-Programming](http://channel9.msdn.com/Shows/Going+Deep/Erik-Meijer-Functional-Programming)

这个： http: [//www.infoq.com/presentations/Taming-Effect-Simon-Peyton-Jones](http://www.infoq.com/presentations/Taming-Effect-Simon-Peyton-Jones)

我期待一个样本，而不仅仅是对世界概念的解释。我欢迎 Haskell、F#、Scala、Scheme 中的示例代码。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-12T09:56:07.973

“世界”只是一个抽象概念，它捕捉了“世界的状态”，即当前计算之外的一切状态。

以这个 I/O 函数为例：

```
write : Filename -> String -> () 
```

这是无效的，因为它会通过副作用更改文件（其内容是世界状态的一部分）。然而，如果我们将世界建模为一个显式对象，我们可以提供这个函数：

```
write : World -> Filename -> String -> World 
```

这将获取当前世界并在功能上产生一个“新”世界，修改文件，然后您可以将其传递给连续调用。World 本身只是一个抽象类型，没有办法直接看到它，只能通过`read`.

现在，上面的接口有一个问题：如果没有进一步的限制，它会允许程序“复制”世界。例如：

```
w1 = write w "file" "yes"
w2 = write w "file" "no" 
```

你使用了同一个世界`w`两次，产生了两个不同的未来世界。显然，这作为物理 I/O 的模型毫无意义。为了防止出现这样的例子，需要一个更花哨的类型系统来确保世界是*线性*处理的，即从不使用两次。Clean 语言就是基于这个想法的一个变体。

或者，您可以封装世界，使其永远不会变得明确，从而不能通过构造来复制。这就是 I/O monad 所实现的——它可以被认为是一个状态 monad，其状态是世界，它隐含地穿过 monadic 动作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-12T18:30:48.393

“世界”是一种将命令式编程嵌入到纯函数式语言中的概念。

你肯定知道，纯函数式编程要求函数的结果完全依赖于参数的值。所以假设我们想将一个典型的`getLine`操作表示为一个纯函数。有两个明显的问题：

1.  `getLine`每次使用相同的参数调用它时都会产生不同的结果（在这种情况下没有参数）。
2.  `getLine`具有消耗流的某些部分的副作用。如果您的程序使用`getLine`，那么（a）它的每次调用都必须消耗输入的不同部分，（b）程序输入的每个部分都必须被某些调用消耗。（您不能两次调用`getLine`两次读取同一输入行，除非该行在输入中出现两次；您也不能让程序随机跳过一行输入。）

所以`getLine`不能是一个函数，对吧？好吧，不是那么快，我们可以做一些技巧：

1.  多次调用`getLine`可以返回不同的结果。为了使其与纯函数行为兼容，这意味着纯函数`getLine`可以接受一个参数：`getLine :: W -> String`. 然后，我们可以通过规定每次调用必须使用不同的`W`参数值来调和每次调用的不同结果的想法。你可以想象它`W`代表了输入流的状态。
2.  多次调用`getLine`必须以某种确定的顺序执行，并且每次调用都必须消耗上一次调用留下的输入。更改：给出`getLine`type `W -> (String, W)`，并禁止程序`W`多次使用一个值（我们可以在编译时检查）。现在要`getLine`在您的程序中多次使用，您必须注意将先前调用的`W`结果提供给后续调用。

只要您可以保证`W`s 不被重用，您就可以使用这种技术将任何（单线程）命令式程序转换为纯函数式程序。您甚至不需要为该`W`类型提供任何实际的内存中对象——您只需对程序进行类型检查并分析它以证明每个`W`只使用一次，然后发出不引用任何类型的代码.

所以“世界”就是这个想法，但被概括为涵盖所有命令式操作，而不仅仅是`getLine`.

* * *

现在已经解释了所有这些，您可能想知道您是否最好知道这一点。我的意见是不，你不是。看，IMO，整个“环游世界”的想法是诸如 monad 教程之类的东西之一，其中太多的 Haskell 程序员选择以实际上没有的方式“提供帮助”。

“Passing the world around”通常作为“解释”提供，以帮助新手了解 Haskell IO。但问题是（a）对于许多人来说，这是一个非常奇特的概念（“你的意思是我要绕过**整个世界的状态**？”），（b）非常抽象（很多人都无法接受这样的想法，即您的程序几乎每个函数都有一个未使用的虚拟参数，既不会出现在源代码中，也不会出现在目标代码中），并且（c）无论如何都不是最简单，最实用的解释.

恕我直言，Haskell I/O 最简单、最实用的解释是这样的：

1.  Haskell 是纯函数式的，所以`getLine`不能是函数。
2.  但是 Haskell 有类似的东西`getLine`。这意味着这些东西是其他不是功能的东西。我们称之为**行动**。
3.  Haskell 允许您将操作视为值。您可以拥有产生动作的函数（例如，`putStrLn :: String -> IO ()`），接受动作作为参数的函数（例如，`(>>) :: IO a -> IO b -> IO b)`等）。
4.  然而，Haskell 没有执行动作的函数。不可能有一个，`execute :: IO a -> a`因为它不是一个真正的功能。
5.  *Haskell 具有用于组合*动作的内置函数：从简单动作中生成复合动作。使用基本动作和动作组合器，您可以将任何命令式程序描述为动作。
6.  Haskell 编译器知道如何将动作翻译成可执行的本机代码。`main :: IO ()`因此，您通过根据子动作编写动作来编写可执行的 Haskell 程序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T07:12:21.320

传递代表“世界”的值是在纯声明式编程中创建用于执行 IO（和其他副作用）的纯模型的一种方法。

纯声明式（不仅仅是函数式）编程的“问题”是显而易见的。纯声明式编程提供了一种计算*模型*。这些模型可以表达任何可能的计算，但在现实世界中，我们使用程序让计算机做理论上不是计算的事情：接受输入、渲染到显示器、读写存储、使用网络、控制机器人等等。您可以直接将几乎所有此类程序建模为计算（例如，鉴于此输入是计算，应将什么输出写入文件），但与程序外部事物的实际交互并不是纯模型的一部分.

命令式编程实际上也是如此。作为 C 编程语言的计算“模型”没有提供写入文件、从键盘读取或任何东西的方法。但是命令式编程中的解决方案是微不足道的。在命令式模型中执行计算是执行一系列指令，每条指令实际执行的操作取决于程序执行时的整个环境。因此，您只需提供执行 IO 操作的“神奇”指令即可。*而且由于命令式程序员习惯于从操作*上考虑他们的程序¹，这与他们已经在做的事情非常自然地吻合。

但是在所有*纯*计算模型中，给定的计算单元（函数、谓词等）将做什么应该只取决于它的输入，而不是取决于每次都可能不同的任意环境。因此，不仅执行 IO 操作，而且执行*依赖*于程序外部宇宙的计算是不可能的。

不过，解决方案的想法相当简单。您为 IO 操作如何在整个纯计算模型中工作构建模型。那么，所有适用于纯模型的原则和理论也将适用于它对 IO 建模的部分。然后，在语言或库实现中（因为它不能在语言本身中表达），您将 IO 模型的操作连接到实际的 IO 操作。

这使我们能够传递一个代表世界的值。例如，Mercury 中的“hello world”程序如下所示：

```
:- pred main(io::di, io::uo) is det.
main(InitialWorld, FinalWorld) :-
    print("Hello world!", InitialWorld, TmpWorld),
    nl(TmpWorld, FinalWorld). 
```

程序被给定`InitialWorld`，类型中的一个值`io`代表程序之外的整个宇宙。它将这个世界传递给`print`，它把它还给它`TmpWorld`，那个世界就像`InitialWorld`“Hello world！”一样，但在其中。已打印到终端，并且在此期间发生的任何其他事情`InitialWorld`也`main`被包含在内。然后它传递`TmpWorld`给`nl`，它返回`FinalWorld`（一个非常相似的世界，`TmpWorld`但它包含换行符的打印，以及同时发生的任何其他效果）。是传回操作系统`FinalWorld`的世界的最终状态。`main`

当然，我们并没有真正将**整个宇宙**作为程序中的值传递。在底层实现中，通常*根本没有*类型的值`io`，因为没有实际传递有用的信息；这一切都存在于程序之外。但是使用传递`io`值的模型允许我们**像**整个宇宙是受它影响的每个操作的输入和输出一样进行编程（因此看到任何*不*接受输入和输出`io`参数的操作**都可以'不受**外部世界的影响）。

事实上，通常你甚至不会真正*想到*执行 IO 的程序，就好像它们在宇宙中传递一样。在真正的 Mercury 代码中，您将使用“状态变量”语法糖，并像这样编写上面的程序：

```
:- pred main(io::di, io::uo) is det.
main(!IO) :-
    print("Hello world!", !IO),
    nl(!IO). 
```

感叹号语法表示 that`!IO`真的代表两个参数，`IO_X`和`IO_Y`，其中`X`和`Y`部分由编译器自动填充，以便状态变量按照编写顺序通过目标“线程化”。这不仅在 IO 的上下文中很有用，顺便说一句，状态变量是 Mercury 中非常方便的语法糖。

因此，程序员实际上倾向于将其视为一系列步骤（取决于并影响外部状态），这些步骤按照编写顺序执行。`!IO`几乎变成了一个魔术标签，只标记了适用的调用。

在 Haskell 中，IO 的纯模型是 monad，“hello world”程序如下所示：

```
main :: IO ()
main = putStrLn "Hello world!" 
```

解释`IO`monad 的一种方法类似于`State`monad。它会自动将状态值通过线程，并且 monad 中的每个值都可以依赖或影响该状态。只有在`IO`状态被线程化的情况下才是整个宇宙，就像在 Mercury 程序中一样。使用 Mercury 的状态变量和 Haskell 的 do 表示法，这两种方法最终看起来非常相似，“世界”以一种尊重源代码中编写调用顺序的方式自动穿过，=但仍然具有`IO`明确的操作标记。

`sacundim`正如's answer中很好解释的那样，将Haskell 的monad*解释*`IO`为 IO-y 计算模型的另一种方法是想象这`putStrLn "Hello world!"`实际上不是“宇宙”需要线程化的计算，而是它`putStrLn "Hello World!"`本身描述可以采取的 IO 操作的数据结构。基于这种理解，`IO`monad 中的程序正在使用纯 Haskell 程序在运行时生成命令式程序。在纯 Haskell 中，没有办法实际执行该程序，但由于`main`is 类型`IO ()` `main`本身评估为这样的程序，我们只知道在操作上 Haskell 运行时将执行该`main`程序。

由于我们将这些纯IO*模型*与与外部世界的实际交互联系起来，因此我们需要小心一点。我们正在编程*，就好像*整个宇宙是一个我们可以像其他值一样传递的值。但是其他值可以传递到多个不同的调用中，存储在多态容器中，以及许多其他对实际宇宙没有任何意义的东西。所以我们需要一些限制来阻止我们对模型中的“世界”做任何与现实世界实际可以做的事情不对应的事情。

Mercury 采用的方法是使用唯一模式来强制`io`保持值唯一。这就是为什么输入和输出世界被分别声明为`io::di`和的原因`io::uo`；它是声明第一个参数的类型是`io`，它的模式是`di`（“破坏性输入”的缩写）的简写，而第二个参数的类型是`io`，它的模式是`uo`（“唯一输出”的缩写）。由于`io`是抽象类型，没有办法构造新的，所以满足唯一性要求的唯一方法是始终将`io`值传递给最多一次调用，这也必须给你一个唯一的`io`值，然后输出您调用的最后一件事的最终`io`值。

Haskell 中采用的方法是使用 monad 接口允许`IO`从纯数据和其他`IO`值构造 monad 中的值，但不公开任何`IO`允许您从`IO`monad 中“提取”纯数据的值的函数。这意味着只有`IO`包含在其中的值`main`才能做任何事情，并且这些动作必须正确排序。

我之前提到过，`IO`使用纯语言工作的程序员仍然倾向于从操作上考虑他们的大部分 IO。那么，如果我们只是像命令式程序员一样思考它，为什么还要费尽心思来为 IO 提出一个纯模型呢？最大的优势是现在所有适用于所有语言的理论/代码/任何东西也适用于 IO 代码。

例如，在 Mercury 中，等效于`fold`逐个元素处理列表以建立累加器值，这意味着`fold`将某个任意类型的变量的输入/输出对作为累加器（这是 Mercury 中非常常见的模式标准库，这就是为什么我说状态变量语法在 IO 之外的其他上下文中通常非常方便）。由于“世界”在 Mercury 程序中明确显示为 type 中的值`io`，因此可以将`io`值用作累加器！在 Mercury 中打印字符串列表就像`foldl(print, MyStrings, !IO)`. 同样在 Haskell 中，通用 monad/functor 代码在`IO`价值观。我们得到了一大堆“高阶” IO 操作，这些操作必须用一种完全特殊的机制来处理 IO 的语言重新专门针对 IO 实现。

此外，由于我们避免通过 IO 破坏纯模型，因此即使存在 IO，计算模型的正确理论仍然适用。这使得程序员和程序分析工具的推理不必考虑是否可能涉及 IO。例如，在像 Scala 这样的语言中，尽管许多“普通”代码实际上是纯代码，但适用于纯代码的优化和实现技术通常是不适用的，因为编译器必须假定每个调用都可能包含 IO 或其他影响。

* * *

¹从操作上考虑程序意味着根据计算机在执行它们时将执行的操作来理解它们。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-13T13:54:22.970

我认为我们应该阅读关于这个主题的第一件事是[解决尴尬的小队](http://research.microsoft.com/Users/simonpj/Papers/marktoberdorf/mark.pdf)。（我没有这样做，我很后悔。）作者实际上将 GHC 的内部表示描述`IO`为`world -> (a,world)`“有点骇人听闻”。我认为这种“黑客”是一种无辜的谎言。我认为这里有两种谎言：

1.  GHC 假装“世界”可以用某个变量来表示。
2.  该类型`world -> (a,world)` 基本上说，如果我们可以以某种方式实例化世界，那么我们世界的“下一个状态”在功能上由运行在计算机上的一些小程序决定。由于这显然无法实现，原语（当然）被实现为具有副作用的函数，忽略无意义的“世界”参数，就像在大多数其他语言中一样。

作者在两个基础上为这种“黑客行为”辩护：

1.  通过将 IO 视为 type 的瘦包装器`world -> (a,world)`，GHC 可以对 IO 代码复用很多优化，因此这种设计非常实用和经济。
2.  如果编译器满足某些属性，则可以证明如上实现的 IO 计算的操作语义是合理的。[这篇论文](http://www.cs.indiana.edu/hyplan/sabry/papers/imperative-need.ps)被引用来证明这一点。

问题（我想在这里问，但你先问了，所以请原谅我在这里写）是在标准的“延迟 IO”功能的存在下，我不再确定 GHC 的操作语义是否仍然正确.

标准的“惰性 IO”功能，例如`hGetContents`内部调用`unsafeInterleaveIO`，这又相当于 `unsafeDupableInterleaveIO`单线程程序。

```
unsafeDupableInterleaveIO :: IO a -> IO a
unsafeDupableInterleaveIO (IO m)
     = IO ( \ s -> let  r = case m s of (# _, res #) -> res
                   in  (# s, r #)) 
```

假设等式推理仍然适用于这种程序（注意 m 是一个不纯的函数）并忽略构造函数，我们有 `unsafeDupableInterleaveIO m >>= f`==> `\world -> f (snd (m world)) world`，它在语义上与上面描述的 Andreas Rossberg 具有相同的效果：它“复制”了世界。由于我们的世界不能以这种方式复制，而且 Haskell 程序的精确评估顺序几乎是不可预测的 --- 我们得到的是对一些宝贵的系统资源（如文件句柄）的几乎不受约束和不同步的并发竞争。这种操作在[Ariola&Sabry](http://www.cs.indiana.edu/hyplan/sabry/papers/imperative-need.ps)中当然是从来没有考虑过的。所以我在这方面不同意 Andreas —— IO monad 没有*（这就是为什么有些人说惰性 IO 不好）。*

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-12T10:09:58.353

世界就是这个意思——物理的、真实的世界。（只有一个，请注意。）

通过忽略仅限于 CPU 和内存的物理进程，可以对每个功能进行分类：

1.  那些在物理世界中没有影响的（除了短暂的，在 CPU 和 RAM 中几乎无法观察到的影响）
2.  那些确实有可观察到的效果。例如：在打印机上打印东西、通过网络电缆发送电子、发射火箭或移动磁盘磁头。

这种区别有点人为，因为即使在现实中运行最纯粹的 Haskell 程序*也确实*有明显的影响，比如：你的 CPU 变热，这会导致风扇打开。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-12T09:16:11.093

基本上您编写的每个程序都可以分为两部分（在 FP 中，在命令式/OO 世界中没有这样的区别）。

1.  核心/纯部分：这是您的应用程序的实际逻辑/算法，用于解决您构建应用程序的问题。（今天 95% 的应用程序缺少这部分，因为它们只是一堆带有 if/else 的 API 调用，人们开始称自己为程序员） 例如：在图像处理工具中，将各种效果应用于图像的算法属于这个核心部分。因此，在 FP 中，您使用纯度等 FP 概念构建这个核心部分。您构建的函数接受输入并返回结果，并且在您的应用程序的这一部分中没有任何变化。

2.  外层部分：现在假设您已经完成了图像处理工具的核心部分，并通过调用具有各种输入的函数并检查输出来测试算法，但这不是您可以发布的东西，用户应该如何使用这个核心部分，没有它的面子，只是一堆功能而已。现在要从最终用户的角度制作这个核心`usable`，您需要构建某种 UI，从磁盘读取文件的方法，可能是使用一些嵌入式数据库来存储用户偏好等等。这种与其他各种东西的交互，这不是您的应用程序的核心概念，但仍然是使其可用所必需的，称为`world`in FP。

练习：考虑一下您之前构建的任何应用程序，并尝试将其分为上述两部分，希望这会使事情变得更清楚。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-12T09:20:12.533

世界是指与现实世界互动/有副作用 - 例如

```
fprintf file "hello world" 
```

这有一个副作用 - 文件已`"hello world"`添加到其中。

这与纯粹的功能代码相反

```
let add a b = a + b 
```

没有副作用*

# google-closure-compiler - 如何在 plovr 中使用模块模式

> ID：13340463
> 
> 赞同：1
> 
> 时间：2012-11-12T08:34:34.663
> 
> 标签：google-closure-compiler, plovr

plovr 适用于像这样的单个文件：

```
{
    id:"main",
    paths:".",
    pretty-print:true,
    inputs:["eval.js","util.js","ui.js"],
    output-wrapper:"\n(function(){%output%}).call(this);\n",
} 
```

如配置所示，`inputs`将一起编译，这是`core`我应用程序中的模块。

然后我在 /modules 目录中有一些子模块。

现在我想一起编译它们，但我不知道如何配置它们：

我试过这个：

```
{
    id:"main",
    paths:".",
    pretty-print:true,
    modules:{
        core:{
            inputs:["eval.js","util.js","ui.js"],
            deps:[]
        },
        panel:{
            inputs:["modules/panel.js"],
            deps:"core"         
        }
        window:{
            inputs:["modules/window.js"],
            deps:"core"
        }
    }
} 
```

然后它不起作用。

对于模块呢`output-wrapper`？`core`

子模块编译到哪里？

顺便说一句，这是我的应用程序目录：

```
src
    eval.js
    util.js
    ui.js

    modules
        panel.js
        window.js
    plovr.jar
    plovr-config.js 
```

# iphone - 使用 vDSP 的 iPhone4s、iPhone 5 每秒最大 FFT

> ID：13340464
> 
> 赞同：1
> 
> 时间：2012-11-12T08:34:47.103
> 
> 标签：iphone, ios, fft, vdsp

我和我的团队正计划为 iOS 构建一个外部附件，它将以 256KHZ 采样超声波。这很多，我想知道 iOS vDSP 是否可以以 256,000 个样本/秒的速度进行从时域到频域的转换，或者我们需要为 FFT 提供基于硬件的解决方案。

Apple 的示例项目（例如 aurioTouch）非常有用，但我找不到比专业音频采样频率更多的采样率。我需要帮助弄清楚以下内容：

1.  vDSP FFT 可以每秒处理 256,000 个样本吗？如果没有，除了在硬件中进行转换之外，还有其他创造性的方法来做同样的事情吗？

我发现与此相关的最接近的讨论是

[我可以在智能手机上每秒执行多少次 FFT？（用于执行语音识别）](https://stackoverflow.com/questions/7957907/how-many-ffts-per-second-can-i-do-on-my-smartphone-for-performing-voice-recogn)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:59:21.707

256 kHz 的数据速率比普通 44100 音频快不到 6 倍。在最新的 iOS 设备上，使用 vDSP/Accelerate 框架对实时音频数据进行浮点 FFT 的使用仅占 1 个 CPU 的 1% 或更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:28:30.257

FFT 计算时间将是可用时间的一小部分。

资料来源：我编写了 vDSP FFT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:50:46.420

为什么不看看这些设备如何处理上采样信号，从 aurioTouch 开始。

如果您需要更快，您应该测量基于整数的 FFT 实现的速度。

# android - 像 Google play 一样滚动标题

> ID：13340467
> 
> 赞同：9
> 
> 时间：2012-11-12T08:34:56.917
> 
> 标签：android, tabs, actionbarsherlock

在android上创建标签时遇到问题。我希望它们看起来像 Google play 中的样子。我已经按照[这个示例](http://code.google.com/p/android-playground/source/browse/#svn%2Ftrunk%2FSwipeyTabsSample%2Fsrc%253Fstate%253Dclosed)制作了滚动标签，但标题仍然看起来像 i.imgur.com/SKYd2.png。

但我希望它们像[这样](https://i.stack.imgur.com/OWV1J.jpg)滚动。

我正在使用 ActionBarSherlock。我已经搜索了几天以找到解决方案，但我并不幸运。我所遇到的只是滑动标签，而不是标题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:58:16.420

您可以`TabPageIndicator`从[http://viewpagerindicator.com/使用](http://viewpagerindicator.com/)

# graph - 如何在 HPC Graph（SSCA2）中获取给定机器的最大概率大小

> ID：13340470
> 
> 赞同：1
> 
> 时间：2012-11-12T08:35:09.793
> 
> 标签：graph, benchmarking, hpc

我是一名 HPC 人员，最近在我的工作中使用 SSCA2（C 代码）。

在大多数论文中，多次提到“给定机器的最大问题大小”，但我找不到计算这个值的方法。

在他们使用 Sun E4500 的论文中，可以很快得出 21 可能是最大问题大小（此处忽略将数据写入磁盘）。这是我怀疑的。

还有一个问题是关于 Performance Metrix-TEPS 的。在 Linpack 中，显示最好的性能不大于 80% 的总内存，那么 SSCA2 的最佳性能是多少？

参考：[https ://www.dropbox.com/s/vwyysn4woarp3am/Design%20and%20Implementation%20of%20the%20HPCS%20Graph%20Analysis%20Benchmark%20on%20Symmetric%20Multiprocessors.pdf](https://www.dropbox.com/s/vwyysn4woarp3am/Design%20and%20Implementation%20of%20the%20HPCS%20Graph%20Analysis%20Benchmark%20on%20Symmetric%20Multiprocessors.pdf)

# android - Android Google Maps onTap 未被调用

> ID：13340471
> 
> 赞同：0
> 
> 时间：2012-11-12T08:35:19.573
> 
> 标签：android, events, maps, call, tap

不知何故，当我点击添加到地图的图标时，未调用 onTap 事件有人可以告诉我为什么：S？它与我添加到地图中的所有用户叠加在一起，他们都有相同的图标但所有不同的标题。但是当我点击没有任何反应时，如果 Log.d 发生任何事情但没有任何反应，我也尝试记录它。这是代码：

```
private class MyUsersOverlay extends ItemizedOverlay<OverlayItem> {
    private List<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public MyUsersOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    public void addOverlayItem(int lat, int lon, String title, String... message) {
        GeoPoint point = new GeoPoint(lat, lon);
        OverlayItem overlayItem = new OverlayItem(point, title, null);
        addOverlayItem(overlayItem);
    }

    public void addOverlayItem(OverlayItem overlayItem) {
        mOverlays.add(overlayItem);
        populate();
    }

    @Override
    protected boolean onTap(int index)
    {
        Log.d("Test Message", "It works");
        OverlayItem item = mOverlays.get(index);

        //Do stuff here when you tap, i.e. :
        //AlertDialog.Builder dialog = new AlertDialog.Builder(cMainActivity);
        //dialog.setTitle(item.getTitle());
        //dialog.setMessage(item.getSnippet());
        //dialog.show();

        Toast.makeText(cMainActivity, item.getTitle(),
                Toast.LENGTH_SHORT).show();

        return true;
    }

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow)
    {
        super.draw(canvas, mapView, shadow);

        if (shadow == false)
        {
            //cycle through all overlays
            for (int index = 0; index < mOverlays.size(); index++)
            {
                OverlayItem item = mOverlays.get(index);

                // Converts lat/lng-Point to coordinates on the screen
                GeoPoint point = item.getPoint();
                Point ptScreenCoord = new Point() ;
                mapView.getProjection().toPixels(point, ptScreenCoord);

                //Paint
                Paint paint = new Paint();
                paint.setTextAlign(Paint.Align.CENTER);
                paint.setTextSize(10);
                paint.setARGB(150, 0, 0, 0); // alpha, r, g, b (Black, semi see-through)

                //show text to the right of the icon
                canvas.drawText(item.getTitle(), ptScreenCoord.x, ptScreenCoord.y+10, paint);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:53:45.797

如果您想单击叠加层并且有用于单击一般地图视图的事件，这可能是一个问题。如果这是您想要达到的目标，请查看[本教程](http://androiddev101.com/episode-5-mapviews-and-overlays/)。即使您遇到不同的问题，本教程也可能会帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:49:43.603

你记得`mapView.setClickable(true);`输入你的`oncreate()`方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:52:20.897

问题不在上面的代码中，而在其他地方。您有另一个视图`touch`从您的“ItemizedOverlay”中窃取事件。

`Possibilities`

*   您可能`dispatchTouchEvent()`在您的地图活动中玩耍并一直返回`true`，通知事件已被使用并且不应发生进一步的调度。
*   在您定义的布局中`MapView`，您可能已经添加了一个视图，`MapView`该视图部分覆盖了它。从最后添加的视图开始调度运动事件。
*   您可能添加了另一个`MapView`覆盖`ItemizedOverlay`.

# java - 将现有数据更新到表中

> ID：13340472
> 
> 赞同：1
> 
> 时间：2012-11-12T08:35:23.650
> 
> 标签：java, jsp

我想更新现有记录，但要创建新记录。

在下图中的用户界面中，我单击提交按钮，它应该更新它已经在数据库中的数据。

![在此处输入图像描述](../Images/2e3511b302451e6d3f698baacdfedb16.png)

这不起作用，因为创建了一个新条目。

```
public void onSave()
    {
        carRepository.save(car);

// (idea:on save  if the data exists update the one or create new one)
} 
```

# javascript - 拖放和计算宽度

> ID：13340473
> 
> 赞同：0
> 
> 时间：2012-11-12T08:35:27.913
> 
> 标签：javascript, jquery, sorting, drag-and-drop

我想在我的拖放应用程序中计算并选择放置区域。

我想做的：

1.  当我将框拖到可放置 div 的顶部或底部时，宽度必须为 100%
2.  当我将框拖到另一个框附近时，（如果连续一个框）它们的宽度必须为 50% - 50%
3.  如果一个拖动框并更改了哪个框已经在包装器中，则必须再次计算它们。

[这是我的示例代码](http://jsfiddle.net/Kpp4x/)

```
$(".box").draggable({
    snap: '#droppable',
    snapMode: 'outer',
    revert: "invalid",
    cursor: "move",
    helper: "clone"
    //connectToSortable: "#droppable"
});

$("#wrapper").droppable({
    drop: function(event, ui) {
        var dropped = $(ui.draggable).clone();
        var droppedOn = $(this);
        $(dropped).detach().css({
            top: 0,
            left: 0
        }).appendTo(droppedOn);
        $(this).addClass("ui-state.highlight").find("p").html("");
    }
}); 
```

你能告诉我我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:23:16.780

看看这个[JQFAQ.com](http://jqfaq.com/how-to-set-calculated-width-in-drag-and-drop/)主题，这将帮助您设置计算的宽度，我们可以将元素放置在指定区域。还有更多示例常见问题解答。

# asp.net-mvc - 如何将构造函数参数传递给asp.net mvc DI中的ninjectcontrollerfactory

> ID：13340474
> 
> 赞同：1
> 
> 时间：2012-11-12T08:35:29.733
> 
> 标签：asp.net-mvc, dependency-injection, ninject.web.mvc

我正在研究asp.net mvc 4。我正在尝试使用ninject和具有代码​​优先模型的存储库模式来实现依赖注入。

**IMessage 存储库**

```
public interface IMessageRepository
{
void IsMessageRead();
} 
```

**消息库**

```
 public class MessageRepository:IMessageRepository
 {
 string id="";
 public MessageRepository(string idparam)
 {
   id=idparam;
 }
 EFMsgContext context=new EFMsgContext(id);
 public void IsMessageRead()
 {
  ...
 }
 } 
```

**EFMsg上下文**

```
public class EFMsgContext:Dbcontext
{
public EFMsgContext(string id):base("MyContext")
{
 //based on id i will construct a connection string from my database.
}
....
} 
```

**我的控制器**

```
public class MYController:Controller
{
private IMessageRepository repo;
public MYController(IMessageRepository repoparam)
{
repo=repoparam;
}
public ActionResult Index()
{
  repo.IsMessageRead();
}
} 
```

我正在使用 Ninject 进行依赖注入我将我的接口与具体类绑定，例如，

```
ninjectKernel.Bind<IMessageRepository>().To<MessageRepository>(); 
```

在这里，我如何将构造函数参数传递给绑定，有没有办法在 ninjectcontrollerfactory 中编写构建连接字符串的逻辑。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:59:54.500

您必须使用`WithConstructorArgument`扩展方法

```
ninjectKernel.Bind<IMessageRepository>().To<MessageRepository>().WithConstructorArgument("idparam", value); 
```

您甚至可以将 a`Func`作为第二个参数传递。

```
ninjectKernel.Bind<IMessageRepository>().To<MessageRepository>()
             .WithConstructorArgument("idparam", (c) => {
                   // read from somewhere and return
              }); 
```

# haskell - 如何在 Haskell 中使用 rpar 策略并行评估元组？

> ID：13340477
> 
> 赞同：6
> 
> 时间：2012-11-12T08:35:48.757
> 
> 标签：haskell, parallel-processing

我偶然发现了`Eval`monad 和`rpar` `Strategy`Haskell 的问题。考虑以下代码：

```
module Main where

import Control.Parallel.Strategies

main :: IO ()
main = print . sum . inParallel2 $ [1..10000]

inParallel :: [Double] -> [Double]
inParallel xss = runEval . go $ xss
    where
      go []  = return []
      go (x:xs) = do
        x'  <- rpar $ x + 1
        xs' <- go xs
        return (x':xs')

inParallel2 :: [Double] -> [Double]
inParallel2 xss = runEval . go $ xss
    where
      go []  = return []
      go [x] = return $ [x + 1]
      go (x:y:xs) = do
        (x',y') <- rpar $ (x + 1, y + 1)
        xs'     <- go xs
        return (x':y':xs' 
```

我像这样编译并运行它：

```
ghc -O2 -Wall -threaded -rtsopts -fforce-recomp -eventlog eval.hs
./eval +RTS -N3 -ls -s 
```

当我使用`inParallel`函数并行性按预期工作时。在输出运行时统计信息中，我看到：

```
SPARKS: 100000 (100000 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled) 
```

当我切换到`inParallel2`功能时，所有并行性都消失了：

```
SPARKS: 0 (0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled) 
```

为什么元组的评估不能并行工作？在将元组传递给 rpar 之前，我尝试强制执行该元组：

```
rpar $!! (x + 1, y + 1) 
```

但仍然没有结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T09:46:00.783

该`rpar`策略注释了一个可能并行计算的术语，但仅限于**弱头范式**，这基本上意味着，直到最外层的构造函数。所以对于一个整数或双精度数，这意味着完整的评估，但对于一对，只有对构造函数，而不是它的组件，将被评估。

在传递给之前强迫这对`rpar`是没有帮助的。现在，您正在本地评估该对，然后再注释已评估的元组以进行可能的并行评估。

您可能希望将`rpar`与`rdeepseq`策略结合起来，从而声明应该完全评估该术语，如果可能的话并行。你可以这样说

```
(rpar `dot` rdeepseq) (x + 1, y + 1) 
```

`dot`运算符用于组合策略。

但是，您的代码还有另一个问题：模式匹配强制立即评估，因此对`rpar`带注释的表达式使用模式匹配通常是个坏主意。特别是，线

```
(x',y') <- (rpar `dot` rdeepseq) (x + 1, y + 1) 
```

将破坏所有并行性，因为在另一个线程可以拾取火花进行评估之前，本地线程已经开始评估它以匹配模式。您可以通过使用惰性/无可辩驳的模式来防止这种情况：

```
~(x',y') <- (rpar `dot` rdeepseq) (x + 1, y + 1) 
```

或者使用`fst`和`snd`访问该对的组件。

最后，如果您创建的火花与将整数加一一样便宜，请不要指望实际的加速。虽然火花本身相对便宜，但它们并不是免费的，因此如果您为并行评估注释的计算有点昂贵，它们会更好地工作。

您可能想阅读一些关于使用策略的教程，例如 Simon Marlow 的 [Parallel and Concurrent Programming using Haskell](http://community.haskell.org/~simonmar/papers/par-tutorial-cefp-2012.pdf)或我自己的[Deterministic Parallel Programming in Haskell](http://www.well-typed.com/Hal6/Presentation.pdf)。

# javascript - Chrome扩展如何访问脚本中设置的全局变量

> ID：13340479
> 
> 赞同：1
> 
> 时间：2012-11-12T08:35:50.183
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

我在 js 文件中的 chrome 扩展中有这个。

```
 function App() { alert(1) } 
```

当我右键单击-> 显示控制台并尝试触发方法时，方法 App 未定义。

为什么 ？这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:42:01.033

确保您的控制台在插件上下文而不是页面中工作。控制台底部有一个选择框。将“页面上下文”更改为“chrome 扩展”

![chrome 页面上下文](../Images/cc2320c4424c9523eb6e170e264534b2.png)

# jquery - 如何让图片在移动时随机移动页面和旋转角度（使用jQuery或CSS）

> ID：13340480
> 
> 赞同：3
> 
> 时间：2012-11-12T08:36:08.073
> 
> 标签：jquery, css, html, animation

我让 div 在页面上随机移动。

[老问题](https://stackoverflow.com/questions/10385950/how-to-get-a-div-to-randomly-move-around-a-page-using-jquery-or-css)

我用“箭头”之类的图片替换了 div，现在我希望它随机移动，并指向正确的方向，（移动时改变旋转角度），而不是总是指向上方。

![箭](../Images/8720fa36bc6131ee519f309259f73f22.png)

我想移动时可能会旋转一些角度，但我不知道如何计算旧点和新点之间的角度。

提前致谢！！！

![在此处输入图像描述](../Images/906ea7e0e080cd65c9fa88be5a949119.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:39:32.067

尝试这个

```
$(document).ready(function(){
    animateIMG();

});

function makeNewPosition(){

    // Get viewport dimensions (remove the dimension of the div)
    var h = $(window).height() - 50;
    var w = $(window).width() - 50;

    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);

    return [nh,nw];    

}

function animateIMG(){
    var newq = makeNewPosition();
    $('img').animate({ top: newq[0], left: newq[1] }, function(){
      animateIMG();        
    });

}; 
```

[](http://jsfiddle.net/hEFYr/)**带速度控制的[**JsFiddle**](http://jsfiddle.net/hEFYr/) [http://jsfiddle.net/D6Svc/](http://jsfiddle.net/D6Svc/)**

# c# - 如何制作不允许阿拉伯字符的电子邮件模式

> ID：13340489
> 
> 赞同：0
> 
> 时间：2012-11-12T08:36:58.787
> 
> 标签：c#, javascript, regex, arabic

我在正则表达式方面不是很有经验，所以这就是我问你的原因:) 我的问题是我在验证电子邮件时使用这种模式。

```
/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zAZ\-0-9]+\.)+[a-zA-Z]{2,}))$/ 
```

添加到此模式以禁止阿拉伯字符是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T08:42:27.190

**[不应该使用](https://stackoverflow.com/a/201378/1379664)**正则表达式来验证电子邮件。

验证电子邮件地址的正确方法是使用如下`MailAddress`类：

```
try 
{
    string address = new MailAddress(address).Address;
} 
catch(FormatException) 
{
    //address is invalid
} 
```

* * *

关于问题本身，*在*您看到它是一个有效的电子邮件地址后 - 您可以**[检查阿拉伯字符](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/48facc69-9506-4146-b1b9-e1f3ef4e0ce7)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:58:24.297

使用字符属性：

```
/\p{sc=Arabic}/ 
```

匹配所有阿拉伯字符。

然后反转表达式匹配的字符

```
/[^\p{sc=Arabic}]/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:46:02.207

我打赌你可以用[括号表达式（又名字符集又名字符类）](http://www.regular-expressions.info/charclass.html)和 unicode 转义（在[javascript](http://mathiasbynens.be/notes/javascript-escapes#unicode)和[C#](http://msdn.microsoft.com/en-us/library/aa664669%28v=vs.71%29.aspx)中可用）来做到这一点：

```
[^\u####-\u%%%%] 
```

... 其中主题标签 ( `####`) 表示第一个阿拉伯字符（即具有最低 unicode 值的字符），百分号 ( `%%%%`) 表示最后一个阿拉伯字符（即具有最高 unicode 值的字符）。

[维基百科告诉我](http://en.wikipedia.org/wiki/Arabic_script_in_Unicode)有多个范围的阿拉伯字符，所以你需要重复上面的片段。

# ios - 核心数据不保存我的数据

> ID：13340493
> 
> 赞同：3
> 
> 时间：2012-11-12T08:37:10.977
> 
> 标签：ios, core-data, ios6

我正在使用核心数据来保存一些整数（速率），然后在上下文中调用 save ：

```
HeartRateBeat * beat = [HeartRateBeat heartRateWithHeartRate:rate
                            ofRecordTitle:self.recordTitle
                   inManagedObjectContext:document.managedObjectContext];

NSError * error;
[document.managedObjectContext save:&error]; 
```

在那个方便的方法中，我使用 NSEntityDescription 创建对象，如下所示：

```
heartRateBeat = [NSEntityDescription insertNewObjectForEntityForName:@"HeartRateBeat" inManagedObjectContext:context]; 
```

（我只复制了一些重要的代码，只是为了展示我所做的。）

在插入每个心跳并保存托管对象上下文（我立即保存）后，我立即执行一个 fetch 请求，并且该请求显示心跳似乎确实存储在 Core Data 中（随着心跳数组的增加），但是如果我重新启动我的应用程序（我正在使用模拟器顺便说一句）我知道事情实际上并没有保存到磁盘，因为它重新开始。使用 SQLite3 命令行检查会显示空表。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:43:02.013

我遇到了同样的问题，但我认为这只是因为，我假设，像我一样，您只是通过 xcode 停止应用程序，而不是真正关闭它。我使用此代码强制写入。我使用的是通过 appdelegate 共享的 UIManagedDocument，而不是手动设置所有内容。

```
NSError *error = nil;

if (![self.managedObjectContext save:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

[[AppDelegate sharedAppDelegate].userDatabase saveToURL:[AppDelegate sharedAppDelegate].userDatabase.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T06:52:05.030

我不了解你们，但是当我想要我的核心数据保存时，我的核心数据更好地保存。

这里有一些代码肯定会保存你所有的核心数据。

```
-(void)forceSave {
        NSManagedObjectContext * context = self.managedObjectContext; //Get your context here. 
    if (!context) {
        NSLog(@"NO CONTEXT!");
        return;
    }

    NSError * error;
    BOOL success = [context save:&error];
    if (error || !success) {
        NSLog(@"success: %@ - error: %@", success ? @"true" : @"false", error);
    }

    [context performSelectorOnMainThread:@selector(save:) withObject:nil waitUntilDone:YES];
    [context performSelector:@selector(save:) withObject:nil afterDelay:1.0];
    [context setStalenessInterval:6.0];
    while (context) {
        [context performBlock:^(){
            NSError * error;
            bool success =  [context save:&error];
            if (error || !success)
                NSLog(@"success: %@ - error: %@", success ? @"true" : @"false", error);

        }];
        context = context.parentContext;
    }

    NSLog(@"successful save!");

} 
```

请注意，这是错误代码。除其他问题外，它不是线程安全的并且需要太长时间。但是，请尝试使用它并删除其中的某些部分以使您满意:)

# c - AES 加密结果只有部分数据正确（使用 mcrypt lib）

> ID：13340494
> 
> 赞同：3
> 
> 时间：2012-11-12T08:37:14.880
> 
> 标签：c, aes, mcrypt

[我从https://gist.github.com/2436364](https://gist.github.com/2436364)下载了一个 AES 加密的示例代码 我修改了部分源代码以满足我的项目要求，如下所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <mcrypt.h>
#include <math.h>
#include <stdint.h>

int encrypt(void* buffer, int buffer_len, char* IV, char* key, int key_len){
  MCRYPT td = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);
  int blocksize = mcrypt_enc_get_block_size(td);
  if( buffer_len % blocksize != 0 )
    return 1;

  mcrypt_generic_init(td, key, key_len, IV);
  mcrypt_generic(td, buffer, buffer_len);
  mcrypt_generic_deinit (td);
  mcrypt_module_close(td);

  return 0;
}

int decrypt(void* buffer, int buffer_len, char* IV, char* key, int key_len){
  MCRYPT td = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);
  int blocksize = mcrypt_enc_get_block_size(td);
  if( buffer_len % blocksize != 0 )
    return 1;

  mcrypt_generic_init(td, key, key_len, IV);
  mdecrypt_generic(td, buffer, buffer_len);
  mcrypt_generic_deinit (td);
  mcrypt_module_close(td);

  return 0;
}

void display(char* ciphertext, int len){
  int v;
  for (v=0; v<len; v++){
    if(v % 16 == 0) putchar('\n');
    printf("%02X ", (unsigned char)ciphertext[v]);
  }
  printf("\n");
}

int main()
{
  unsigned char plaintext[256];
  unsigned char IV[16] = {0xFA,0x8D,0x46,0x54,0x83,0xC6,0xED,0xD8,
    0x37,0x5A,0x9D,0xC1,0x3E,0x69,0x1B,0x04};
  unsigned char key[16] = {0x53, 0x75, 0x7a, 0x79, 0x26, 0x52, 0x69, 0x63,
    0x68, 0x42, 0x65, 0x72, 0x67, 0x69, 0x6e, 0x20};
  int keysize = 16; /* 128 bits */
  char* buffer;
  int buffer_len = 256;
  FILE *fp;

  fp = fopen("readbuf.bin", "r");
  fread(plaintext, 1, 256, fp);
  fread(plaintext, 1, 256, fp);
  fclose(fp);

  buffer = calloc(1, buffer_len);
  strncpy(buffer, plaintext, buffer_len);

  //printf("plain:   %s\n", plaintext);
  encrypt(buffer, buffer_len, IV, key, keysize); 
  printf("cipher:  "); display(buffer , buffer_len);
  //decrypt(buffer, buffer_len, IV, key, keysize);
  //printf("decrypt: %s\n", buffer);

  return 0;
} 
```

我需要加密[readbuf.bin](https://docs.google.com/file/d/0Bx-G2vInJIsLWEpoNmVDY0NBRzQ/edit)的字节 255~511 我得到结果字节 0~0x6F 是正确的，但是由于字节 0x70 结果不正确 源代码有错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:59:17.283

感谢大家关心这个问题，我通过一次又一次的查看源代码找到了根本原因......

根本原因是函数调用：

```
strncpy(buffer, plaintext, buffer_len); 
```

一切顺利，而我将 strncpy() 替换为 memcpy()

```
memcpy(buffer, plaintext, buffer_len); 
```

另外，我按照 WhozCraig 的建议修改源代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <mcrypt.h>
#include <math.h>
#include <stdint.h>

int encrypt(void* buffer, int buffer_len, char* IV, char* key, int key_len)
{
  MCRYPT td = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);
  int blocksize = mcrypt_enc_get_block_size(td);
  int n_blocks = buffer_len / blocksize;
  if( buffer_len % blocksize != 0 )
    return 1;

  mcrypt_generic_init(td, key, key_len, IV);
  for (int i = 0; i < n_blocks; i++) 
    mcrypt_generic(td, ((unsigned char* )buffer) + (i * blocksize), blocksize);
  mcrypt_generic_deinit (td);
  mcrypt_module_close(td);

  return 0;
}

int decrypt(void* buffer, int buffer_len, char* IV, char* key, int key_len){
  MCRYPT td = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);
  int blocksize = mcrypt_enc_get_block_size(td);
  int n_blocks = buffer_len / blocksize;
  if( buffer_len % blocksize != 0 )
    return 1;

  mcrypt_generic_init(td, key, key_len, IV);
  for (int i = 0; i < n_blocks; i++) 
    mdecrypt_generic(td, ((unsigned char *)buffer) + (i * blocksize), blocksize);
  mcrypt_generic_deinit (td);
  mcrypt_module_close(td);

  return 0;
}

void display(char* ciphertext, int len){
  int v;
  for (v=0; v<len; v++){
    if(v % 16 == 0) putchar('\n');
    printf("%02X ", (unsigned char)ciphertext[v]);
  }
  printf("\n");
}

int main()
{
  unsigned char plaintext[256];
  unsigned char IV[16] = {0xFA,0x8D,0x46,0x54,0x83,0xC6,0xED,0xD8,
    0x37,0x5A,0x9D,0xC1,0x3E,0x69,0x1B,0x04};
  unsigned char key[16] = {0x53, 0x75, 0x7a, 0x79, 0x26, 0x52, 0x69, 0x63,
    0x68, 0x42, 0x65, 0x72, 0x67, 0x69, 0x6e, 0x20};
  int keysize = 16; /* 128 bits */
  char* buffer;
  int buffer_len = 256;
  FILE *fp;

  fp = fopen("readbuf.bin", "r");
  fread(plaintext, 1, 256, fp);
  fread(plaintext, 1, 256, fp);
  fclose(fp);

  buffer = calloc(1, buffer_len);
  //strncpy(buffer, plaintext, buffer_len);
  memcpy(buffer, plaintext, buffer_len);

  printf("plain:   %s\n", plaintext);
  encrypt(buffer, buffer_len, IV, key, keysize); 
  printf("cipher:  "); display(buffer , buffer_len);
  decrypt(buffer, buffer_len, IV, key, keysize);
  printf("decrypt: %s\n", buffer);

  return 0;
} 
```

# java - Solr在组合查询中按分数排序

> ID：13340495
> 
> 赞同：0
> 
> 时间：2012-11-12T08:37:16.783
> 
> 标签：java, solr, lucene

我使用 3 个参数运行 Solr 查询，我希望结果按与参数之一的相关性（而不是与参数组合的相关性）进行排序。

例子：

```
SolrQuery solrQuery = new SolrQuery();
solrQuery.add("title", "some title");
solrQuery.add("date", "some date");
solrQuery.add("description", "some description");

solrQuery.addSortField("score", SolrQuery.ORDER.desc); 
```

查询结果将按标题+日期+描述组合的相关性排序，但我只需要按标题评分。

我怎么能做到？

PS 我使用 Solr 4.0 BETA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:28:33.523

由于您仅按一个字段对相关性进行评分，因此您可以将搜索限制在“qf”查询字段中的那个字段。

编辑或添加到 solrconfig.xml 中的现有 requestHandler

```
<requestHandler name="/relevant_by_one_field" class="solr.SearchHandler">
   <lst name="defaults">
      <str name="defType">edismax</str>
      <str name="qf">title</str>
   </lst>
</requestHandler> 
```

您还可以在 'qf' 参数中指定特定的提升，但在单个查询字段的情况下，提升不会做任何事情，因为提升只与其他字段的上下文相关。

这是一个搜索多个字段的示例，然后对在“标题”中找到的结果进行评分最高。

```
<requestHandler name="/relevant_by_multiple_field" class="solr.SearchHandler">
   <lst name="defaults">
      <str name="defType">edismax</str>
      <str name="qf">title^2 description^0.7 date^0.5</str>
   </lst>
</requestHandler> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:51:08.690

Score 中可能没有选择性排序选项。
但是，您可以将标题匹配的结果提高到一个非常高的值，以便字段日期和描述的分数没有任何影响。
因此，当您按分数排序时，您会得到按标题排序的结果。

# php - 按 Column1 值选择行以选择同一行的 Column2

> ID：13340499
> 
> 赞同：0
> 
> 时间：2012-11-12T08:37:36.630
> 
> 标签：php, mysql, sql, select

我有一张这样的桌子：

```
id       count
23432    0
34242    1
12345    5
32235    20
45645    3 
```

如何通过列（id）值**32235选择 ROW 列（计数）值****20**？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:39:14.650

我认为这应该很简单。

```
SELECT `count`
FROM tablename
WHERE id = 32235 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/bd260/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:40:34.250

用这个：

```
SELECT * FROM table_name WHERE count = 20 && value=32235; 
```**

# c# - 使用反射将处理程序添加到任何事件，动态处理

> ID：13340503
> 
> 赞同：1
> 
> 时间：2012-11-12T08:37:49.060
> 
> 标签：c#, .net, events, reflection, event-handling

我正在编写一个框架，其中一个功能涉及远程处理事件（我认为现在不相关的细节）。但是，需要的是能够在给定目标对象引用和事件名称的情况下将事件处理程序挂钩到任何事件。

处理事件的方法将编组/以其他方式将参数代理到某些处理程序代码，然后将返回类型转换为事件处理程序的返回类型。实际上，它包装了处理程序。

我相信由于事件处理程序可能需要具有任意数量的任何类型的参数，处理按需挂钩事件的请求的唯一方法是使用反射/发射（代码生成）来构建自定义代理方法。我发布这个问题是为了检查这个假设，看看是否有人有任何其他/更简洁的想法。

目前，我创建了一个`DynamicMethod`，然后做这种事情。它几乎可以工作，但是这个动态代理方法调用的包装器方法必须是静态的（声明非常多`public static object GenericHandler(object[] parameters)`）；我不想这样。所以我当前的任务是动态创建一个完整的类型，使用这个方法，还要一个字段来存储对象的实例来调用包装器。但是，这不是重点（我认为）——我想检查我关于必须创建动态代码的假设是否正确。但是，对于参考：

```
 // obj = target object, eventName = event name
        var evtInfo = obj.GetType().GetEvent(eventName);

        var handlerType = evtInfo.EventHandlerType;

        var eventInvokeMethod = handlerType.GetMethod("Invoke");
        var paramTypes = eventInvokeMethod.GetParameters().Select(p => p.ParameterType).ToArray();
        var returnType = eventInvokeMethod.ReturnType;

        var handlerMethod = new DynamicMethod(
            "evtHandler_" + eventName,
            MethodAttributes.Static | MethodAttributes.Public,
            CallingConventions.Standard,
            returnType,
            paramTypes,
            typeof(my container class).Module,
            false);

        var il = handlerMethod.GetILGenerator();

        // locals: [0] = parameter array
        il.DeclareLocal(typeof(object[]));

        // create an appropriately-sized array objects, for the parameters
        il.Emit(OpCodes.Ldc_I4, (int)paramTypes.Count());
        il.Emit(OpCodes.Newarr, typeof(object));
        il.Emit(OpCodes.Stloc_0);

        for (int i = 0; i < paramTypes.Length; i++)
        {
            // for the array: load the parameter into the same index of the array
            il.Emit(OpCodes.Ldloc_0);
            il.Emit(OpCodes.Ldc_I4, i);
            il.Emit(OpCodes.Ldarg, i);
            if (!paramTypes[i].IsClass)
            {
                // box the value first..
                il.Emit(OpCodes.Box, paramTypes[i]);
            }
            il.Emit(OpCodes.Stelem_Ref);
        }

        // call our generic handler with the array of parameters, then convert the return
        // value to the target type via unboxing or a cast
        il.Emit(OpCodes.Ldloc_0);
        il.Emit(OpCodes.Call, wrapper.GetMethodInfo());
        if (!returnType.IsClass)
        {
            il.Emit(OpCodes.Unbox_Any, returnType);
        }
        else
        {
            il.Emit(OpCodes.Castclass, returnType);
        }
        il.Emit(OpCodes.Ret); 
```

如果没有响应并且我得到了上述理论与包装器类型的工作，我将发布更新的代码.. 但如果他们在那里，我很想听听这种方法的替代品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:35:27.577

有必要实现（并改进）上述代码。使用动态生成的程序集、类型和方法，我可以将任何触发的事件代理到通用`object HandleEvent(object[] parameters)`方法。

# javascript - 拉斐尔视框动画缩放

> ID：13340509
> 
> 赞同：3
> 
> 时间：2012-11-12T08:38:30.360
> 
> 标签：javascript, svg, raphael

我正在使用 javascript 和 Raphael lib 构建一种 javascript 地图。单击时我可以放大对象，但我希望它具有动画效果（例如慢慢潜入等等）。有没有办法在不重新发明轮子的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T01:38:37.040

没有理由不能为 svg 对象的视图框设置动画——Raphael 根本不提供开箱即用的此类功能。但是，创建插件相当简单。例如：

```
Raphael.fn.animateViewBox = function animateViewBox( x, y, w, h, duration, easing_function, callback )
{
    var cx = this._viewBox ? this._viewBox[0] : 0,
        dx = x - cx,
        cy = this._viewBox ? this._viewBox[1] : 0,
        dy = y - cy,
        cw = this._viewBox ? this._viewBox[2] : this.width,
        dw = w - cw,
        ch = this._viewBox ? this._viewBox[3] : this.height,
        dh = h - ch,
        self = this;;
    easing_function = easing_function || "linear";

    var interval = 25;
    var steps = duration / interval;
    var current_step = 0;
    var easing_formula = Raphael.easing_formulas[easing_function];

    var intervalID = setInterval( function()
        {
            var ratio = current_step / steps;
            self.setViewBox( cx + dx * easing_formula( ratio ),
                             cy + dy * easing_formula( ratio ),
                             cw + dw * easing_formula( ratio ),
                             ch + dh * easing_formula( ratio ), false );
            if ( current_step++ >= steps )
            {
                clearInterval( intervalID );
                callback && callback();
            }
        }, interval );
} 
```

安装此插件后实例化的任何纸张都可以使用与 Raphael 内置的 animate 方法完全相同的方法使用 animateViewBox。例如...

```
var paper = Raphael( 0, 0, 640, 480 );
paper.animateViewBox( 100, 100, 320, 240, 5000, '<>', function()
    {
        alert("View box updated!  What's next?" );
    } ); 
```

示威在[这里](http://voidblossom.com/tests/easedViewBox.php)上演。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:55:12.663

Raphael 动画通过动画元素属性来工作。当你调用 element.animate 时，你提供了最终的对象参数，到达那里所需的时间，如果你不希望它是线性的，可能还有一个缓动函数。

例如，要放大/缩小一个圆圈，您可以考虑以下示例：http: [//jsfiddle.net/eUfCg/](http://jsfiddle.net/eUfCg/)

```
// Creates canvas 320 × 200 at 10, 50
var paper = Raphael(10, 50, 320, 200);

// Creates circle at x = 50, y = 40, with radius 10
var circle = paper.circle(50, 40, 10);
// Sets the fill attribute of the circle to red (#f00)
circle.attr("fill", "#f00");

// Sets the stroke attribute of the circle to white
circle.attr("stroke", "#fff");

var zoomed = false;

circle.click(function () { 
    if (zoomed) {
        this.animate({ transform: "s1" }, 500);
        zoomed = false;
    } else {
        this.animate({ transform: "s4" }, 500);
        zoomed = true;
    }
});​ 
```

它为圆的变换属性设置动画。要缩放您的地图，您应该将所有元素放在一个组中，并为组的变换属性设置动画，同时考虑您想要最终得到的比例和平移。

有关 transform 属性的更多信息，请参阅[http://raphaeljs.com/reference.html#Element.transform](http://raphaeljs.com/reference.html#Element.transform)。

# c# - 黑盒测试的最佳实践

> ID：13340511
> 
> 赞同：1
> 
> 时间：2012-11-12T08:38:42.240
> 
> 标签：c#, .net, unit-testing, black-box-testing, white-box-testing

我有几个使用 sql server 的 Windows 服务应用程序。我想为我的应用程序执行黑盒测试。我不想使用单元测试，因为我没有足够的时间为我的所有方法编写测试逻辑。我只想向我的应用程序发送请求并检查系统的响应和数据库的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:01:04.473

始终建议对应用程序进行单元测试，但对于“黑盒”/“端到端”/“黄金”测试，它们没有帮助。

话虽如此，单元测试的一些原则仍然适用于您的任务：

1.  自动化流程 - 除了点击“运行”之外，不应有任何人为参与。
    为此使用专用平台 - [Teamcity](http://www.jetbrains.com/teamcity/)就是其中之一。
2.  隔离所有测试 - 您应该以任何顺序运行它们的任何子集，并获得相同的结果。
    如果您有数据库，请在每次测试之前和之后运行一些脚本，以便每次测试都获得一个干净的环境（适用于所有其他有状态的模块，如文件系统、Web 缓存等）。
3.  您不妨使用已经内置了 Setup、Test 和 Teardown 入口点的测试框架（如 NUnit），并从那里调用您的设置脚本、API 和清理脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:41:43.980

[黑盒测试](http://en.wikipedia.org/wiki/Black-box_testing)是一种测试风格——它与单元测试无关。通过黑盒测试，您可以在不了解内部结构的情况下“练习”对象的公共 API。

对于黑盒测试，请考虑覆盖所有可能的输入和输出类别（使用[等价分区](http://en.wikipedia.org/wiki/Equivalence_partitioning)）。

# python - 试图拆分字符串

> ID：13340512
> 
> 赞同：1
> 
> 时间：2012-11-12T08:38:59.557
> 
> 标签：python

> **可能重复：**
> [Python：使用多个分隔符拆分字符串](https://stackoverflow.com/questions/4998629/python-split-string-with-multiple-delimiters)

我有一个小语法问题。我有一个字符串和另一个包含分隔符列表的字符串。我需要通过`.split`方法拆分它。

我似乎无法弄清楚如何，这肯定会产生类型错误。

```
String.split([' ', '{', '=']) 
```

如何用多个分隔符拆分它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T08:42:25.543

[`str.split()`](http://docs.python.org/2/library/stdtypes.html?highlight=split#str.rsplit)只接受一个分隔符。

用于使用[`re.split()`](http://docs.python.org/2/library/re.html?highlight=split#re.split)正则表达式进行拆分。

```
import re

re.split(r"[ {=]", "foo bar=baz{qux") 
```

输出：

```
['foo', 'bar', 'baz', 'qux'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:43:33.477

这不是内置`[split()](http://docs.python.org/2/library/stdtypes.html#str.split)`方法的工作方式。它只是使用单个字符串作为分隔符，而不是单字符分隔符列表。

您可以改为使用[基于正则表达式的](http://docs.python.org/2/library/re.html#re.split)拆分。这可能意味着构建一个正则表达式，它是所有所需分隔符的“或”：

```
splitters = "|".join([" ", "{", "="])
re.split(splitters, my_string) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:44:07.643

您可以使用`re`(regex) 库执行此操作，如下所示：

```
import re
result=re.split("[abc]", "my string with characters i want to split") 
```

方括号中的字符是您要分割的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:45:15.690

改用正则表达式的拆分：

```
>>> import re
>>> s = 'toto + titi = tata'
>>> re.split('[+=]', s)
['toto ', ' titi ', ' tata']
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T08:47:33.310

```
import re
string_test = "abc cde{fgh=ijk"
re.split('[\s{=]',string_test) 
```

# r - 如何用前面和后面的数据点平均 R 数据集中的异常值？

> ID：13340514
> 
> 赞同：0
> 
> 时间：2012-11-12T08:39:08.963
> 
> 标签：r, dataset, average, outliers, datapoint

我有一个大型数据集，并将异常值定义为高于 99 或低于第 1 个百分位数的值。

我想用它们之前和之后的数据点来取这些异常值的平均值，然后用新数据集中的平均值替换所有 3 个值。

如果有人知道如何做到这一点，我将非常感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:54:18.160

如果您有一个索引列表指定向量中的异常值位置，例如使用：

```
out_idx = which(df$value > quan0.99) 
```

您可以执行以下操作：

```
for(idx in out_idx) {
  vec[(idx-1):(idx+1)] = mean(vec[(idx-1):(idx+1)])
} 
```

您可以将其包装在一个函数中，使带宽和函数成为可选参数：

```
average_outliers = function(vec, outlier_idx, bandwith, func = "mean") {
   # iterate over outliers
   for(idx in out_idx) {
    # slicing of arrays can be used for extracting information, or in this case,
    # for assiging values to that slice. do.call is used to call the e.g. the mean 
    # function with the vector as input.
    vec[(idx-bandwith):(idx+bandwith)] = do.call(func, out_idx[(idx-bandwith):(idx+bandwith)])
  }      
  return(vec)
} 
```

允许您也使用`median`2 的带宽。使用此功能：

```
# Call average_outliers multiple times on itself,
# first for the 0.99 quantile, then for the 0.01 quantile.
vec = average_outliers(vec, which(vec > quan0.99))
vec = average_outliers(vec, which(vec < quan0.01)) 
```

或者：

```
vec = average_outliers(vec, which(vec > quan0.99), bandwith = 2, func = "median")
vec = average_outliers(vec, which(vec < quan0.01), bandwith = 2, func = "median") 
```

使用 2 的带宽，并替换为中值。

# java - 字符串数组中的随机元素

> ID：13340516
> 
> 赞同：30
> 
> 时间：2012-11-12T08:39:17.603
> 
> 标签：java, android, arrays, string, random

我有一个字符串数组：

```
String[] fruits = {"Apple","Mango","Peach","Banana","Orange","Grapes","Watermelon","Tomato"}; 
```

我通过以下方式从中获得随机元素：

```
String random = (fruits[new Random().nextInt(fruits.length)]); 
```

现在我想得到当我点击按钮得到随机水果时苹果出现的数字，就像当我按下随机按钮时它给了我香蕉..并且也应该给我那个元素编号是`3`

我得到了元素，但在获取元素编号时遇到问题，所以请帮帮我

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-12T08:44:24.567

只需将生成的索引存储在变量中，然后使用此变量访问数组：

```
int idx = new Random().nextInt(fruits.length);
String random = (fruits[idx]); 
```

* * *

PS 我通常不喜欢`Random`每次随机化生成新对象——我更喜欢在程序中使用单个对象`Random`——并重新使用它。如果我以后在程序中发现任何错误，它可以让我轻松地重现有问题的序列。

根据这种方法，我将在`Random r`某处有一些变量，我将只使用：

```
int idx = r.nextInt(fruits.length) 
```

但是，您的方法也可以，但是如果以后需要，您可能很难重现特定序列。

# android - 服务中的睡眠功能是否会影响android启动时间

> ID：13340519
> 
> 赞同：1
> 
> 时间：2012-11-12T08:39:29.183
> 
> 标签：android, shell, android-source

我需要编写一个服务，该服务必须在 android 启动时从 init.rc 启动。

如果我在具有睡眠功能的服务守护进程 shell 脚本中给出了巨大的延迟，这种延迟是否会增加 android 启动时间？

该服务不依赖于任何其他事件。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:29:48.523

我猜它不会影响启动时间。init 在新的分叉进程中启动新服务，因此服务中的睡眠不会影响启动时间。

但是，也许值得在启动后添加您的服务？

# c++ - C++ 中的 REST 客户端

> ID：13340523
> 
> 赞同：8
> 
> 时间：2012-11-12T08:39:47.447
> 
> 标签：c++, xml, rest, client

有没有人在他们的企业产品中成功尝试过任何 C++ REST 库（客户端）？它可以是软件堆栈的集合，但它应该具有在所有平台上运行的能力，即：Windows、Linux、Solaris、AIX、HP-UX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-21T12:31:53.540

[C++ REST SDK](https://github.com/Microsoft/cpprestsdk)是一个积极开发的 C++ REST 客户端，目前在 Windows、Mac OS X、iOS 和 Android 中受支持。它还获得了 Apache 许可证 2.0 的许可，该许可证在库上开放了一系列自定义以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:50:51.473

我不能推荐任何集成解决方案，但您可以使用：

1.  运输：neon、serf 或 libcurl（它们都有 advs 和 disadvs）
2.  XML 解析：libexpat 或 libxml2
3.  JSON 解析：Jansson 或 JSON Spirit

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-10T18:10:43.980

[您可能需要在https://github.com/mrtazz/restclient-cpp](https://github.com/mrtazz/restclient-cpp)检查 C++ 瘦 REST 客户端。

它是一个围绕良好且稳定的多协议、多平台[libcurl](https://curl.haxx.se/libcurl/)库的 C++ 包装器。

# php - 如何在 yii 中打印我的 sql 字符串？

> ID：13340524
> 
> 赞同：3
> 
> 时间：2012-11-12T08:39:51.823
> 
> 标签：php, yii

我正在使用 yii 框架来实现一个新项目。我想在它在服务器上运行之前查看 sql 字符串。我已经在我的配置文件中启用了这个代码，但我仍然没有得到任何结果

```
array('class'=>'CWebLogRoute',), 
```

当我运行网页时，我应该怎么做才能查看 sql 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:34:08.043

尝试将其放在 main.php (config) 中的组件下：

```
'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array(
        'weblogging'=>array(
            'class'=>'CWebLogRoute',
            'enabled'=>true,
            ),
        ),
    ), 
```

然后它将显示调试信息以及该页面上运行的所有 sql。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:06:41.440

您可以制作简单的记录器将您的字符串记录到文件中：

```
$file = fopen("my.log", "a+");
fwrite($file, $logString."\r\n");
fclose($file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:16:21.927

在您的**config/main.php**中，在 db 数组之后添加如下：

```
'db'  => array(
 //your db array listing
),
//add following
'log' => array(
    'class'=>'CLogRouter',
    'routes'=>array(
        array(
            'class'=>'CFileLogRoute',
            'levels'=>'error, warning',
        ),
        array(
            'class'=>'CWebLogRoute',
            'levels'=>'trace',
            'categories'=>'system.db.*',
        ),

    ),
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T09:53:45.580

配置数组有一个键`components`，你必须在其中添加`log`组件，并且`log`应该在其中将 声明`CWebLogRoute`为路由。您还必须使用`preload`该`log`组件。

最小示例（*project-name/protected/config/main.php*）：

```
return array(
    // other configurations
    // ...

    // preloading 'log' component
    'preload'=>array('log'), // this is also necessary

    // ...
    'components'=>array(
        // other components
        // ...

        'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CWebLogRoute'
                ),
                // ... other routes ...    
            )
        ),

        // ...
    )

); 
```

阅读[指南](http://www.yiiframework.com/doc/guide/1.1/en/topics.logging "http://www.yiiframework.com/doc/guide/1.1/en/topics.logging")以获取有关日志记录的更多提示。

# javascript - 带有 getElementsByTagName 的嵌套标签名称不起作用

> ID：13340525
> 
> 赞同：2
> 
> 时间：2012-11-12T08:39:56.853
> 
> 标签：javascript, jquery, html, css, sorting

我有以下 div 包含从数据库查询的表及其数据

```
<div id="content">
<table>
<tbody>
   <tr>
       <th class="header" colspan="2">Food items include:</th>
   </tr>
   <tr>
      <td id="15" class="fruits">Papaya+salt</td>
      <td><p>This includes papaya and salt</p></td>
   </tr>
   <tr>
      <td class="meat">Baked chicken</td>
      <td><p>This includes a chicken thide and kethup</p></td>
   </tr>
   <tr>
      <td id="1" class="Juices">Strawberry Sting</td>
      <td><p>Sugar, color and water</p></td>
   </tr>
<table>
</div> 
```

该表在 page.aspx 中定义

这是我用来按字母顺序对表格数据进行排序的代码

```
OldFunc = window.onload;
window.onload = OnLoad;

function OnLoad(){
    try{
        var pathName = window.location.pathname.toLowerCase();
        if( pathName=="/Resources/Glossary.aspx") {
                sort_it();
            }   
        OldFunc();
    }
    catch(e) {
    }
} 

function TermDefinition(def_term,def_desc)
{    
    this.def_term=def_term;  
    this.def_desc=def_desc; 
}    

function sort_it()
{
    var gloss_list=document.getElementsByTagName('td');    
    var desc_list=document.getElementsByTagName('td p');    
    var gloss_defs=[];   
    var list_length=gloss_list.length;     
    for(var i=0;i<list_length;i++)    
    {      
       gloss_defs[i]=new TermDefinition(gloss_list[i].firstChild.nodeValue,desc_list[i].firstChild.nodeValue);      
    }     
    gloss_defs.sort(function(a, b){
      var termA=a.def_term.toLocaleUpperCase(); 
      var termB=b.def_term.toLocaleUpperCase();
      if (termA < termB) 
       return -1;
      if (termA > termB)
       return 1;
      return 0; 
    })    
    for(var i=0;i<gloss_defs.length;i++)
    {
       gloss_list[i].firstChild.nodeValue=gloss_defs[i].def_term;
       desc_list[i].firstChild.nodeValue=gloss_defs[i].def_desc;  
    }
} 
```

请看一下这两个 getElementsByTagName，我认为我滥用了它的内容，因为对输出没有做任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:41:37.947

**无效**：

```
desc_list=document.getElementsByTagName('td p'); 
```

您不能将 css 选择器传递给该函数，只能将标签名称传递给`div`\ `span` `input`etc'。

您可能想使用：

```
desc_list = $('td p'); 
```

由于您使用 jQuery 或`document.querySelectorAll`vanilla js 标记了问题：

```
desc_list = document.querySelectorAll('td p'); 
```

# automation - 如何自动化交互式 telnet 命令？

> ID：13340530
> 
> 赞同：2
> 
> 时间：2012-11-12T08:40:21.923
> 
> 标签：automation, telnet

我想查询一个105端口的telnet服务器，我目前要做的就是启动一个交互式会话，稍后一个一个地输入命令。

由于我已经知道命令，我想自动化这个过程并在没有任何人工干预的情况下获取结果。

当我尝试在登录时使用管道推送命令时，这不起作用。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:49:32.683

您可能正在寻找类似[expect](http://expect.sourceforge.net/)的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:51:18.323

由于您没有说您使用什么操作系统，以及您想使用哪种脚本语言，我将仅提供一些建议以供进一步阅读。

[这个](https://stackoverflow.com/questions/709801/creating-a-script-for-a-telnet-session "这")问题可能会回答您正在寻找的内容。

我也发现[这](http://www.unix.com/shell-programming-scripting/19165-how-use-telnet-script.html)可以帮助你一点。

# .net - 如何解决错误 26：错误定位生产环境中指定的服务器/实例？

> ID：13340531
> 
> 赞同：7
> 
> 时间：2012-11-12T08:40:24.330
> 
> 标签：.net, sql-server-2012

我在生产环境中有一个奇怪的错误，但在开发环境中没有。在我的开发环境中，使用 Visual Studio 2010，我可以毫无问题地连接到 Sql Server 2012。当我将我的 Windows Form 应用程序复制到同一网络中的其他 PC 时，我收到“错误 26：错误定位服务器/指定实例”。

同一个应用程序在带有 Sql Server 2008 的旧数据库实例上运行良好。我不知道要检查什么以及从哪里开始！

编辑：另一个奇怪的行为是，如果我使用这样的代码，它会很好用

```
conn.Open()

dr = cmd.ExecuteReader() 
```

但是，如果我打开带有 datagridview、数据集和 BindingSource 的表单，请停止工作！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:00:24.363

[此](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)博客文章包含有关错误 26 的详细信息。

从帖子：

> 总之，我们收到此错误消息的原因是客户端堆栈无法接收来自 SQL Browser 的 SSRP 响应 UDP 数据包。很容易隔离问题。以下是步骤：
> 
> 1.  确保您的服务器名称正确，例如，名称没有拼写错误。
> 2.  确保您的实例名称正确，并且您的目标机器上实际上存在这样的实例。[更新：某些应用程序将 \ 转换为 . 如果您不确定您的应用程序，请在连接字符串中同时尝试 Server\Instance 和 Server\\Instance]
> 3.  确保服务器机器可访问，例如，DNS 可以正确解析，您可以 ping 服务器（并非总是如此）。
> 4.  确保 SQL Browser 服务正在服务器上运行。
> 5.  如果服务器上启用了防火墙，则需要将 sqlbrowser.exe 和/或 UDP 端口 1434 置于异常中。
> 
> 完成这些步骤后，您应该不会再看到此错误消息。您可能仍然无法连接 SQL 服务器，但错误消息应该有所不同，并且您现在遇到了不同的问题。[更新：如果仍然失败，您可以将 server\instance 替换为 tcp:server\instance 和/或 np:server\instance 并查看它是否使用 TCP 或 NP 协议成功。这样，您可以稍微隔离问题。]

# sql - 如何在不知道输入参数的情况下获取存储过程返回的列？

> ID：13340538
> 
> 赞同：0
> 
> 时间：2012-11-12T08:40:59.100
> 
> 标签：sql, sql-server, stored-procedures, fmtonly

我想虚拟地执行一个存储过程并获取返回的列。我使用`fmtonly`如下：

```
set fmtonly on
exec spName null
set fmtonly off 
```

但是使用 fmtonly 导致运行所有代码行并且这项工作的结果是错误。有什么解决方案可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:54:47.813

您需要使用[`sp_describe_first_result_set`](http://msdn.microsoft.com/en-us/library/ff878602.aspx)SQL Server 2012 的新功能。请注意，这需要您提供输入参数（至少是类型）。

在 T-SQL 开发中，人们希望知道正在调用什么过程以及预期的结果集是什么。在 SQL Server 2012 之前，对动态、运行时、过程输出发现和所需参数的支持很少。这个新程序以及其他类似[`sp_describe_undeclared_parameters`](http://msdn.microsoft.com/en-us/library/ff878260.aspx)程序可用于创建需要探索可用编程 API 表面的工具。这些被添加到 2012 年的事实应该表明，在 2012 年之前无法正确处理等价物。环回链接服务器等解决方案存在许多问题，主要是因为它们实际上执行的代码具有潜在的灾难性影响。

# python - 如何以matlab样式复制numpy数组

> ID：13340541
> 
> 赞同：2
> 
> 时间：2012-11-12T08:41:26.120
> 
> 标签：python, matlab

在 matlab/GNU Octave（我实际使用的）中，我使用这种方法将 2D 数组的特定元素复制到另一个 2D 数组：

```
B(2:6, 2:6) = A 
```

在哪里

```
size(A) = (5, 5) 
```

我的问题是，“如何使用 numpy 在 python 中实现这一点？” 目前，例如，我在 python 中使用以下嵌套循环：

```
>>> import numpy as np
>>> a = np.int32(np.random.rand(5,5)*10)
>>> b = np.zeros((6,6), dtype = np.int32)

>>> print a
[[6 7 5 1 3]
 [3 9 7 2 0]
 [9 3 7 6 7]
 [9 8 2 0 8]
 [8 7 7 9 9]]
>>> print b
[[0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0]]

>>> for i in range(1,6):
        for j in range(1,6):
            b[i][j] = a[i-1][j-1]
>>> print b
[[0, 0, 0, 0, 0, 0],
 [0, 6, 7, 5, 1, 3],
 [0, 3, 9, 7, 2, 0],
 [0, 9, 3, 7, 6, 7],
 [0, 9, 8, 2, 0, 8],
 [0, 8, 7, 7, 9, 9]] 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:44:47.007

它与 MATLAB 几乎相同：

```
b[1:6, 1:6] = a 
```

唯一的问题是 Python 使用基于 0 的索引，因此第二个元素是 1 而不是 2。

# javascript - 在js脚本中获取mongodb数据类型

> ID：13340546
> 
> 赞同：1
> 
> 时间：2012-11-12T08:41:56.333
> 
> 标签：javascript, shell, mongodb

```
db.foo.find();

_id    | type
-------------
10001     1
10002    'a'
10003    [1, 2, 3, 4] 
```

如您所知，**$type**将匹配 mongo 查询中的类型代码，如下所示：

```
db.foo.find({type: {$type: 4}}); 
```

**_id | 类型**

*----------*

**10003, [1, 2, 3, 4]**

然后，我编写了一个名为**test.js的 javascript shell 脚本**

```
var curs = db.foo.find();
curs.forEach(showTypeCode);
function showTypeCode(cur) {
  print(cur.type + '-' + typeof(cur.type));
}; 
```

**结果：**

```
1-number
a-string
1,2,3,4-object (this is an array, it's 4 in mongo) 
```

这是我的问题，如何在 mongo shell 中获取数组类型代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:57:15.563

您的第一个查询：

```
db.foo.find({type: {$type: 4}}); 
```

由于错误，实际上不会工作。这是 MongoDB 中的一个已知错误，它在使用运算符时将数组作为对象读取`$type`。您可以投票并支持此 JIRA：[https ://jira.mongodb.org/browse/SERVER-1475](https://jira.mongodb.org/browse/SERVER-1475)

至于用JS解决问题，这个问题可能对你有帮助：[Detect if parameter passing is an array? Javascript](https://stackoverflow.com/questions/2763024/detect-if-parameter-passed-is-an-array-javascript)

数组是类 Array 的对象，因此这就是您要取回对象的原因。如果您测试一个实例，`Array`那么它应该可以工作。

# javascript - Firefox 扩展中 loadSubScript 和 loadFrameScript 的区别

> ID：13340550
> 
> 赞同：1
> 
> 时间：2012-11-12T08:42:11.807
> 
> 标签：javascript, firefox-addon

我知道这两个 api 都用于将 Javascript 注入网页。Firefox 扩展开发中 loadSubScript 和 loadFrameScript 有什么区别吗？你会在什么情况下使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:39:06.570

我假设您在询问[mozIJSSubscriptLoader.loadSubScript()](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/mozIJSSubScriptLoader#loadSubScript%28%29)和[nsIChromeFrameMessageManager.loadFrameScript()](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChromeFrameMessageManager#loadFrameScript%28%29)。这是两种完全不同的机制，唯一的相似之处是两者都可以加载和执行代码。

`mozIJSSubscriptLoader`并不意味着将代码加载到网页中 - 它的主要目标是动态加载扩展的部分内容。这是一种非常古老的机制，甚至早于[JavaScript 代码模块](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules)。

然而，目标`loadFrameScript()`是加载内容脚本，最初是为了支持多进程设置（[e10s 项目](https://wiki.mozilla.org/Electrolysis)）而引入的。它将加载将在网页上下文中以网页权限运行的脚本。无法与加载它的代码直接交互，只能进行消息传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:52:25.607

大多数扩展没有任何理由使用 loadFrameScript。它的目标是[远程调试](http://mxr.mozilla.org/mozilla-central/source/content/base/public/nsIMessageManager.idl)。

# python - if循环语法错误

> ID：13340551
> 
> 赞同：2
> 
> 时间：2012-11-12T08:42:20.880
> 
> 标签：python

以下语法在 Python 中是否正确？

```
(if 'SU' in line or 'AU' in line or 'VU' in line or 'rf' in line and line.find('/*') == -1) and (BUILDROOT in line):
    lineMatch = False 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T08:48:20.727

试试这个：

```
if any(x in line for x in ('SU', 'AU', 'VU', 'rf')) and '/*' not in line and BUILDROOT in line:
    lineMatch = False 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T08:44:10.793

不，`if`不应该在括号内。

# java - h:inputHidden 中的 JSF 2.0 对象值？

> ID：13340554
> 
> 赞同：0
> 
> 时间：2012-11-12T08:42:38.280
> 
> 标签：java, jsf-2

我对 JSF 2.0 很陌生，所以这可能是一个非常简单的问题。

我现在想使用 h:inputHidden 将自定义对象从一个页面传递到另一个页面，所以我可以使用`request.getParameter("obj01")`.

我已将整个对象传递到 h:inputHidden 的 value 属性中，

但是我收到以下错误：

```
Cannot convert com.project01.obj.web.obj01@10562017 of type class java.lang.String to class com.project01.obj.web.obj01 
```

所以我想我做错了什么。

谁能给我一些建议？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:54:30.450

您只能通过请求传递字符串。但是有一个解决方案：

写一个转换器。一些代码示例可以在这里找到。

[http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/](http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/)

编辑：

例如，我通过 SelectOneMenu 传递了对象。

```
<h:selectOneMenu id="inputX" value="#{someBean.someObject}" converter="someConverter">
    <f:selectItems value="#{someBean.someObjectList}"/>
</h:selectOneMenu> 
```

将您的转换器放入您的面孔配置中。

```
<converter>
    <description>Converter - X</description>
    <converter-id>someConverter</converter-id>
    <converter-class>de.package.company.SomeConverter</converter-class> 
</converter> 
```

转换器：

```
public class SomeConverter implements Converter
{

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {

        if (value != null)
            return (YourBean) new YourBeanDAO().find(Long.parseLong(value));

        return null;
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) throws ConverterException {

        if (arg2 != null && arg2 instanceof YourBean)
            return Long.toString(((YourBean) arg2).getId());

        return null;
    }
} 
```

# java - 如何将对象输出到我的 JTable 中，以便编辑字段影响原始对象的状态？

> ID：13340559
> 
> 赞同：0
> 
> 时间：2012-11-12T08:42:52.357
> 
> 标签：java, swing, jtable

我有一个包含书籍对象的 LinkedHashSet。每次打开应用程序时，它都会从序列化文件中将对象读入 LinkedHashSet。

我使用迭代器运行 LinkedHashSet 并将每个对象字段的数据输出到多维数组中以填充我的 JTable，但是如果我单击可编辑的布尔列，它会更新数组而不是原始对象？

如何填充 JTable 以便选择复选框更改实际对象的字段，然后触发表进行更新？（然后该表将需要拉入新数据，因为该对象的布尔字段设置了另一个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:51:52.227

我建议实现自定义表模型，例如。基于列表。

这是我曾经写过的一个基于列表的只读表模型示例：

[http://puces-samples.svn.sourceforge.net/viewvc/puces-samples/tags/sessionstate-1.0/sessionstate-suite/sessionstate-sample/src/blogspot/puce/sessionstate/sample/ParticipantTableModel.java?revision= 13&view=标记](http://puces-samples.svn.sourceforge.net/viewvc/puces-samples/tags/sessionstate-1.0/sessionstate-suite/sessionstate-sample/src/blogspot/puce/sessionstate/sample/ParticipantTableModel.java?revision=13&view=markup)

按照教程实现一个可写的表模型：

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

# php - PHP中的ASP等效加密？

> ID：13340560
> 
> 赞同：1
> 
> 时间：2012-11-12T08:43:01.047
> 
> 标签：php, forms, jsp, encryption, asp-classic

以下是在 asp 中发送到 .jsp 页面用于解码和处理数据的示例加密，

```
requestparameter = "somedata";
Key = "someKey";
requestparameter = AES128Bit.encrypt(requestparameter, Key);

<form name="form1" method="post" action="https://someurl/somepage.jsp">
    <input type="hidden" name=" requestparameter " value="<%= requestparameter %>">
    <input type="submit" name="submit" value="Submit">
</form> 
```

我正在尝试通过以下方式在 PHP 中进行类似的加密：-

```
$requestparameter = "somedata";
$Key = "someKey";
$method = 'aes128';
$requestparameter = openssl_encrypt ($requestparameter, $method, $Key);

<form name="form1" method="post" action="https://someurl/somepage.jsp">
    <input type="hidden" name=" requestparameter " value="<?php echo $requestparameter ?>">
    <input type="submit" name="submit" value="Submit">
</form> 
```

*我已启用 OpenSSL 支持。*

但是目标页面总是显示

> 解码时出错

url 显示如下错误代码

> pageUrl?errorCode=isDecoded

我认为这意味着我在 PHP 中用来加密的加密方法无法被 .jsp 页面正确解码。我的问题是...

> ***ASP 等效的 PHP 加密方法/代码是什么？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:53:29.660

尝试改用 php mcrypt 函数，这可能会起作用。Mcrypt 和 openssl_encrypt 将返回不同的结果，即使使用相同的加密方法，因为它们的工作方式略有不同。将 ASP 函数的输出与 PHP 中两种方法的结果进行比较，看看其中一种方法是否返回相同的结果。

# php - PHP SESSION 数组 vars 到 XML

> ID：13340563
> 
> 赞同：0
> 
> 时间：2012-11-12T08:43:21.837
> 
> 标签：php, xml, session

我有一堆要导出到 XML 文件的 SESSION 变量。客户详细信息很好，因为它们不是 foreach 循环的一部分。但是，我客户的订单是 foreach 循环的一部分。

SESSION 变量 $_SESSION['invoice'] 在 cart.php 中定义。$_SESSION['invoice'] 数组中的每个单独的值都需要检索并放入 XML。

例如

```
<title1>comic title1</title1><qty1>10</qty1><price1>$2.50</price1><cost1>$25.00</cost1><title2>comic title2</title2><qty2>5</qty2><price2>$2.00</price2><cost2>$10.00</cost2> 
```

购物车.php 代码：

```
$_SESSION['invoice'][$comic_id]=$name . " " . $qty . " $" . $price . " $" . $cost; 
```

xml.php 代码：

```
<?php
if(!isset($_SESSION)) {
     session_start();
}
foreach ($_SESSION['invoice'] as $value);

$test_array = array (
  $_SESSION['firstname'] => 'firstname',
  $_SESSION['lastname'] => 'lastname',
  $_SESSION['email'] => 'email',
  $_SESSION['addressline1'] => 'addressline1',
  $_SESSION['towncity'] => 'towncity',
  $_SESSION['postcode'] => 'postcode',
  'order' => array (
  $_SESSION['total'] => 'total',
  $_SESSION['invoice']  => 'order',
  ),
);
$xml = new SimpleXMLElement('<customer/>');
array_walk_recursive($test_array, array ($xml, 'addChild'));
print $xml->asXML(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:40:20.363

$order = json_encode($_SESSION['invoice']);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:51:01.683

```
 $_SESSION['invoice'][$comic_id]=$name . " " . $qty . " $" . $price . " $" . $cost; 
```

使用此代码，您可以连接字符串。尝试调试创建的值，例如：

```
 echo '<pre>'.print_r($_SESSION['invoice'][$comic_id], 1).'</pre>';
    echo '<pre>'.print_r($_SESSION['invoice'], 1).'</pre>'; 
```

你必须创建这样的东西：

```
 $_SESSION['invoice'][$comic_id]['firstname'] = 'Firstname';
    $_SESSION['invoice'][$comic_id]['price'] = $myPrice';
    // and so on... 
```

但要注意。恕我直言，不建议您参加此类发票处理的会议！

# java - 如何在不下载的情况下从 url 读取 pdf？

> ID：13340569
> 
> 赞同：1
> 
> 时间：2012-11-12T08:43:45.723
> 
> 标签：java, swing, url, pdf

我正在尝试从 url 读取 pdf 而无需下载，然后我试图将其展平。

这是代码：

```
import java.io.FileOutputStream;

import com.lowagie.text.pdf.AcroFields;
import com.lowagie.text.pdf.PdfReader;
import com.lowagie.text.pdf.PdfStamper;

public class FormFillAndMakeItFlattenPDF {
   public static void main(String[] args) {
      try {
         PdfReader reader = new PdfReader("http://www.irs.gov/pub/irs-pdf/fw4.pdf");
         PdfStamper stamp2 = new PdfStamper(reader, new FileOutputStream("C:\\Flattened.pdf"));
         AcroFields form2 = stamp2.getAcroFields();
         stamp2.setFormFlattening(true);
         stamp2.close();
      }
      catch (Exception de) {
         de.printStackTrace();
      }
   }
} 
```

但是，这会引发错误/异常。这是堆栈跟踪：

```
 java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:352)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:214)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:201)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:377)
    at java.net.Socket.connect(Socket.java:530)
    at java.net.Socket.connect(Socket.java:480)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:406)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:541)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:245)
    at sun.net.www.http.HttpClient.New(HttpClient.java:318)
    at sun.net.www.http.HttpClient.New(HttpClient.java:335)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:832)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:773)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:698)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1021)
    at java.net.URL.openStream(URL.java:1009)
    at com.lowagie.text.pdf.RandomAccessFileOrArray.<init>(Unknown Source)
    at com.lowagie.text.pdf.RandomAccessFileOrArray.<init>(Unknown Source)
    at com.lowagie.text.pdf.PRTokeniser.<init>(Unknown Source)
    at com.lowagie.text.pdf.PdfReader.<init>(Unknown Source)
    at com.lowagie.text.pdf.PdfReader.<init>(Unknown Source)
    at FormFillAndMakeItFlattenPDF.main(FormFillAndMakeItFlattenPDF.java:18) 
```

谁能告诉我，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:56:34.373

如果问题是由于代理而发生的，请在应用程序启动时调用它。

```
System.setProperty("http.proxyHost", Config.PROXY_HOST);
System.setProperty("http.proxyPort", Config.PROXY_PORT); 
```

您将 Config.X 更改为系统值的位置。

注意：对于 https，您需要使用 https.proxyHost 和 https.proxyPort 添加类似的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:54:53.413

您的确切代码对我有用。我在带有 Java 7 的 Windows 上使用 iText-4.2.0 (*)。

这是我运行的代码，测试是绿色的并且“Flattened.pdf”被正确创建：

```
public class PdfTest {
    @Test
    public void testFlatten() throws Exception {
        PdfReader reader = new PdfReader("http://www.irs.gov/pub/irs-pdf/fw4.pdf");
        PdfStamper stamp2 = new PdfStamper(reader, new FileOutputStream("C:\\Users\\david\\Flattened.pdf"));
        AcroFields form2 = stamp2.getAcroFields();
        stamp2.setFormFlattening(true);
        stamp2.close();
    }
} 
```

(*) [https://github.com/ymasory/iText-4.2.0](https://github.com/ymasory/iText-4.2.0)

# jstl - JSTL 将单选按钮拆分为两个列表

> ID：13340573
> 
> 赞同：1
> 
> 时间：2012-11-12T08:44:08.127
> 
> 标签：jstl

我正在尝试根据行数将我的单选按钮列表拆分为“n”个列。这就是我正在尝试的，这里的程序是我的列表，目前有 17 个单选按钮。我目前正在尝试划分 (17/2) 行和 2 列。

```
 <c:set var="numRows" value="${fn:length(programs)/2-0.5}" />
    <c:set var="totalRows" value="${fn:length(programs)}" />
      <c:forEach begin="0" end="${numRows }" varStatus="i">
      <c:out  value="i=${i.index} " /> 
      <c:set var="rowStart" value="${i.index * numColumns}" />
      <fmt:formatNumber var="numColumns" value="${fn:length(programs) / numRows}"
         maxFractionDigits="0" />
      <c:forEach begin="0" end="${numColumns - 1}" varStatus="j" >
         <c:set var="index" value="${rowStart + j.index}"/>
         <c:out  value="j=${j.index} " /> 
              <c:choose>
                 <c:when test="${index lt fn:length(programs)}">
                      <c:forEach var="prgip" items="${programs}"> 
              <c:forEach begin="0" end="${totalRows }" varStatus="k"  var="prgip"             items="${programs}">
                      <input type="radio" value="${prgip.program_id}" name="program">  ${prgip.program_name} 
                       <c:out  value="k=${k.count} " /> 
                  </c:forEach>
               </c:forEach> 
               </c:when>
               <c:otherwise>&nbsp;</c:otherwise>
            </c:choose>
          </c:forEach>
    </c:forEach> 
```

在此先感谢-米姆琼斯。

# java - 带有复选框的java gwt celltable

> ID：13340581
> 
> 赞同：1
> 
> 时间：2012-11-12T08:44:32.790
> 
> 标签：java, gwt, checkbox, celltable

我有一个单元格表，其中最后一列是一个复选框。我想添加一个 Check-All-Box 作为页脚，单击该页脚时会选择每一行的每个复选框。不知何故，它在这里不起作用是我到目前为止得到的：

```
Column<Object, Boolean> select = new Column<Object, Boolean>(new CheckboxCell()) { 
        @Override 
        public Boolean getValue(Object object) { 
            return msm.isSelected(object); 
        } 
    }; 

    select.setFieldUpdater(new FieldUpdater<Object, Boolean>() { 
        public void update(int index, Object object, Boolean value) {
            msm.setSelected(object, value); 
        } 
    }); 

    final Header selectAllHeader = new Header(new CheckboxCell()) { 
        @Override 
        public Boolean getValue(){ 
            return msm.getSelectedSet().size() == getRowCount(); 
        } 
    }; 

    selectAllHeader.setUpdater(new ValueUpdater<Boolean>() { 
        @Override 
        public void update(Boolean value) { 
            for (Object o : getVisibleItems) { 
                msm.setSelected(o, value); 
            }
        }
    }); 
        //works
    addColumn(select, selectAllHeader);
        //does not work
    //addColumn(select, HEADER, selectAllHeader); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:32:14.133

我使用了这里提出的解决方案：

[http://code.google.com/p/google-web-toolkit/issues/detail?id=7014](http://code.google.com/p/google-web-toolkit/issues/detail?id=7014)

它工作得很好。您可以在页脚中使用它。

# perl - WWW::Mechanize::Firefox 疑难解答

> ID：13340582
> 
> 赞同：3
> 
> 时间：2012-11-12T08:44:37.220
> 
> 标签：perl, firefox, www-mechanize, mozrepl

我在浏览器中安装了 MozRepl，并设置为在启动时启动并接受外部连接。

所以我的问题如下 1）将简单地运行代码`my $mech = WWW::Mechanize::Firefox->new();`启动Firefox浏览器？

2) 我已将 MozRepl 设置为接受外部连接，但是，当 firefox 未启动时，当我的脚本到达 1) 中的代码时，它会告诉我`unable to connect, problem connecting to localhost, on port 4242`。我尝试通过`telnet localhost 4242`未启动的Firefox浏览器进行调试。它也给了我这个错误`Could not open connection to the host, on port 4242: Connect failed`。

我应该期待这个结果吗？

3) 鉴于我在上面遇到的困难，我决定在创建 mechanize::firefox 实例之前使用 system() 来启动浏览器。浏览器能够启动，但是它永远不会到达要创建 mechanize::firefox 实例的代码。

```
#where i manually fire up firefox.
system('"C:\Program Files\Mozilla Firefox\firefox.exe"'); 

my $mech = WWW::Mechanize::Firefox->new(ssl_opts => { verify_hostname => 0});
$mech->get( 'https://192.168.1.23' ); 
```

我该怎么做才能确保可以启动 firefox 浏览器但它不会影响代码的顺序，以便可以创建 mechanize::firefox 实例来操作浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:04:39.073

您必须在测试前启动浏览器，它不会自动启动。

我需要一些时间来启动 firefox，但系统会在 firefox 启动后立即返回。我需要几秒钟来初始化它的所有插件等。

最简单的方法是通过 sleep 等待 30 秒，或者您启动一个 while 循环以等待它响应。

防火墙规则可能会阻止您访问 mozrepl。默认端口是 4242。通过 telnet 检查端口：

```
telnet 192.168.1.23 4242
telnet 127.0.0.1 4242 
```

# ruby - 带有 JRuby 1.7.0 “未知 Ruby 解释器”的 RVM

> ID：13340587
> 
> 赞同：5
> 
> 时间：2012-11-12T08:44:55.457
> 
> 标签：ruby, rvm, jruby, bundler

我使用以下 Gemfile 设置了一个基本的 Rails 应用程序：

```
source 'https://rubygems.org'    
ruby '1.9.3', engine: 'jruby', engine_version: '1.7.0'
gem 'rails', '3.2.8' 
```

每当我切换到项目目录时，我都会收到以下消息：

> 未知的 ruby​​ 解释器版本：'1.9.3，engine：jruby，engine_version：1.7.0'。

我正在运行 RVM 1.16.17 并安装了“jruby-1.7.0”。我的 Gemfile 引擎是否配置错误或者我需要更改 RVM 中的某些内容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T13:32:14.647

RVM 对 ruby​​ 指令的支持有限，您可以使用注释覆盖 RVM 将使用的内容：

```
#ruby=jruby-1.7.0 
```

# android - 从 SD 卡和相机获取图片

> ID：13340593
> 
> 赞同：4
> 
> 时间：2012-11-12T08:45:40.510
> 
> 标签：android, android-intent, media, android-camera

我目前正在启动此意图时显示标准图像选择（来自 SD 卡）对话框：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"), PICK_IMAGE); 
```

这列出了所有可以返回图像的应用程序/活动（例如图库）。

在同一个标​​准列表中，我还想包含一个选项，该选项将启动相机并返回用它拍摄的图像。问题是我无法弄清楚如何以非自定义方式执行此操作（使用自定义布局、应用程序图像+标题等构建我自己的对话框）。

相机活动可以这样启动：

```
Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
URI pictureUri = Uri.fromFile(new File("dummyPath"));
camera.putExtra(MediaStore.EXTRA_OUTPUT, pictureUri); 
```

**是否有允许我从 SD 卡中选择图像或使用相机拍摄的图像的意图？**

更新：我找到了一个解决方案，稍后会仔细检查并在此处发布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:00:10.220

您可以有警报对话框来显示选项。源代码如下：

```
AlertDialog.Builder getImageFrom = new AlertDialog.Builder(MainActivity.this);
            getImageFrom.setTitle("Select Image");
            final CharSequence[] opsChars = {"Take Picture", "Open Gallery"};
            getImageFrom.setItems(opsChars, new android.content.DialogInterface.OnClickListener(){
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if(which == 0){
                         File file = new File( _path );
                         outputFileUri = Uri.fromFile( file );

                        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                        cameraIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);   

                        startActivityForResult(cameraIntent, 7);
                    }else
                        if(which == 1){
                            Intent intent = new Intent();
                            intent.setType("image/*");
                            intent.setAction(Intent.ACTION_GET_CONTENT);
                            startActivityForResult(Intent.createChooser(intent,
                                "Open Gallery"), 6);
                        }
                    dialog.dismiss();
                }
            });

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == 6) {
            Uri selectedImageUri = data.getData();
         pickerImageView.setPadding(0, 0, 0, 0);
         pickerImageView.setScaleType(ScaleType.FIT_XY);
         System.gc();
           String filepath = getPath(selectedImageUri);
           File imagefile = new File(filepath);
           try {
            FileInputStream fis = new FileInputStream(imagefile);
            BitmapFactory.Options options=new BitmapFactory.Options();
            options.inPurgeable=true;
            options.inSampleSize =4;
            bi= BitmapFactory.decodeStream(fis,null,options);
            fis.close();
            Bitmap bitmapToRecycle = ((BitmapDrawable)pickerImageView.getDrawable()).getBitmap();  
            bitmapToRecycle.recycle();
            pickerImageView.setImageBitmap(bi); 
            pickerImageView.setPadding(0, 0, 0, 0);
            pickerImageView.setScaleType(ScaleType.FIT_XY);

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
           pickImageTextView.setText("");
        }
        else if(requestCode == 7){
            Log.i("return", "#####");
            BitmapFactory.Options options=new BitmapFactory.Options();
            options.inPurgeable=true;
            options.inSampleSize =4;
            //Bitmap photo = BitmapFactory.decodeFile( _path, options );
             Bitmap photo = (Bitmap) data.getExtras().get("data"); 
             pickerImageView.setImageBitmap(photo); 
             pickerImageView.setPadding(0, 0, 0, 0);
             pickerImageView.setScaleType(ScaleType.FIT_XY);

        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T08:50:32.460

您可以像这样以编程方式将图像添加到图库：

```
Intent media = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE); 
```

//mCurrentPhotoPath 是图片的路径。

```
File f = new File(mCurrentPhotoPath);
Uri contentUri = Uri.fromFile(f);
media.setData(contentUri);
this.sendBroadcast(media); 
```

# python - 如果语句为 False，我可以引发异常吗？

> ID：13340599
> 
> 赞同：6
> 
> 时间：2012-11-12T08:46:10.930
> 
> 标签：python, exception, try-catch

```
try:
    content = my_function()
except:
    exit('Could not complete request.') 
```

我想修改上面的代码来检查它的值`content`是否包含字符串。我想过使用`if 'stuff' in content:`or 正则表达式，但我不知道如何将它放入`try`; 所以如果匹配是`False`，它会引发异常。当然，我总是可以`if`在该代码之后添加一个，但有没有办法把它挤进去？

伪代码：

```
try:
    content = my_function()
    if 'stuff' in content == False:
        # cause the exception to be raised
except:
    exit('Could not complete request.') 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T08:50:57.650

要引发异常，您需要使用`raise`关键字。[我建议您在手册](http://docs.python.org/2/tutorial/errors.html)中阅读有关异常的更多信息。假设`my_function()`有时 throws `IndexError`，请使用：

```
try:
    content = my_function()
    if 'stuff' not in content:
        raise ValueError('stuff is not in content')
except (ValueError, IndexError):
    exit('Could not complete request.') 
```

此外，你**永远不**应该使用`except`它，因为它会比你想要的更多。`MemoryError`例如，它将捕获`KeyboardInterrupt`和`SystemExit`。它会让你的程序更难被杀死（`Ctrl`+`C`不会做它应该做的事情），在低内存条件下容易出错，并且`sys.exit()`不会按预期工作。

**更新：**您也不应该只捕获`Exception`更具体的异常类型。`SyntaxError`也继承自`Exception`. 这意味着您文件中的任何语法错误都将被捕获并且不会正确报告。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-12T08:47:39.827

```
try:
    content = my_function()
    if 'stuff' not in content:
        raise ValueError('stuff not in content')

    content2 = my_function2()
    if 'stuff2' not in content2:
        raise ValueError('stuff2 not in content2')

except ValueError, e:
    exit(str(e)) 
```

如果您的代码可能有多个可能的异常，您可以为每个异常定义一个特定的值。捕获它并退出将使用此错误值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T09:22:26.490

一个更好的方法是断言密钥在那里：

```
assert 'stuff' in content, 'Stuff not in content' 
```

如果断言不正确，`AssertionError`则将使用给定的消息引发 an。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-12T08:49:17.383

`raise`如果这就是您所要求的，您可以提出一个例外：

```
if 'stuff' not in content:
    raise ValueError("stuff isn't there") 
```

请注意，您需要决定引发什么样的异常。在这里，我提出了 ValueError。同样，您不应该使用 bare `except`，而应该使用`except ValueError`等来仅捕获您要处理的错误类型。事实上，在这种情况下，这一点尤为重要。您可能想要区分由您引发的真正错误`my_function`和您正在测试的“内容不包含”条件。

# c# - 在asp中对GridView中的数据进行排序

> ID：13340600
> 
> 赞同：0
> 
> 时间：2012-11-12T08:46:24.547
> 
> 标签：c#, asp.net, .net, gridview

我有一个 GridView 填充了数据库中的数据。我使用 mssql 函数获取我的数据。这就是我获取数据的方式：

```
private void GetNoLocationScanAddress(GridView grid, int week)
        {
            try
            {
                FunctionDataContext function = new FunctionDataContext();
                List<Fn_GetNoLocationAddressGroupedResult> address = function.Fn_GetNoLocationAddressGrouped("0X", week).ToList();
                grid.DataSource = address;
                grid.DataBind();
            }
            catch (Exception exception)
            {
                Console.WriteLine("ERROR in GetNoLocationScanAddress() method. Error Message : " + exception.Message);
            }
        } 
```

问题是我已经在我的函数中对数据进行排序。我还使用 Switch case 来确定选择查看哪些数据。

```
 protected void WeekSelector_OnIndexChanhed(object sender, EventArgs e)
        {
            switch (RadioButtonList.SelectedIndex)
            {
                case 0:
                    GetScanErrorsAddress(Grid, Convert.ToInt32(WeekSelector.SelectedValue));
                    Grid.DataBind();
                    break;

                case 1:
                    GetScanErros(Grid, Convert.ToInt32(WeekSelector.SelectedValue));
                    Grid.DataBind();
                    break;

                case 2:
                    GetNoLocationScanAddress(Grid, Convert.ToInt32(WeekSelector.SelectedValue));
                    Grid.DataBind();
                    break;

                case 3:
                    GetNoLocationScan(Grid, Convert.ToInt32(WeekSelector.SelectedValue));
                    Grid.DataBind();
                    break;
            }
        } 
```

函数sql：

```
SELECT     TOP (100) PERCENT Request1.RequestID, TrackIT.dbo.Sending.Barcode, TrackIT.dbo.Address_View.AdrID, TrackIT.dbo.Address_View.Name, 
                      TrackIT.dbo.Address_View.Street, TrackIT.dbo.Address_View.HouseNo, TrackIT.dbo.Address_View.Postal, TrackIT.dbo.Address_View.City, 
                      TrackIT.dbo.Address_View.Country, Request1.Latitude +','+  Request1.Longitude AS Location,  Case when(Request1.Latitude<>'')then cast(1 as bit) else cast(0 as bit) end AS showLocation, Request1.ReceivedDate
FROM         (SELECT DISTINCT RequestID, LTRIM([Content]) AS Barcode, Latitude, Longitude, ReceivedDate
                       FROM          dbo.RequestWithLocation
                       WHERE      (Site LIKE @Site) AND ([Content] <> '') AND (AddressID = '0') AND (ReceivedDate > DATEADD(day, -@ReceivedDate, GETDATE()))) AS Request1 INNER JOIN
                      TrackIT.dbo.Sending ON Request1.Barcode = TrackIT.dbo.Sending.Barcode INNER JOIN
                      TrackIT.dbo.Address_View ON TrackIT.dbo.Sending.DeliveryAdrID = TrackIT.dbo.Address_View.AdrID

ORDER BY TrackIT.dbo.Address_View.AdrID 
```

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:16:55.610

您可以使用**-Linq (OrderBy 或 OrderByDescending)**对您的`List<Fn_GetNoLocationAddressGroupedResult>`.

例如。

```
address.OrderBy(x => x.Country);            // ascending
address.OrderByDescending(x => x.Country);  // descending 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:29:17.790

根据您的评论，如果用户必须能够通过按列标题对 gridview 进行排序，并且如果您使用的是标准 ASP.NET System.Web.UI.WebControls.GridView，您可以简单地在通过将“AllowSorting”设置为 true 或通过控件右上角的“弹出窗口”选中“启用排序”来设置属性窗格。

# python - Python Tkinter 上的错误“if c > 255”语句

> ID：13340602
> 
> 赞同：1
> 
> 时间：2012-11-12T08:46:31.800
> 
> 标签：python, tkinter

我的代码遇到了一些问题。如果值不在 0-255 之间，我希望我的代码弹出一个消息框，但它不起作用。我现在只是使用 c>255 进行故障排除，但我不知道问题似乎是什么。即使如果 c>255，它仍然会在值低于 255 时显示消息框。有人可以告诉我我做错了什么：\

```
 def clicked_wbbalance(self):
    self.top = Toplevel()
    self.top.title("LASKJDF...")
    Label(self.top, text="Enter low level").grid(row=0, column=0,padx=10)
    Label(self.top, text="Enter high level").grid(row=1, column=0,padx=10)
    Label(self.top, text="Values must be between 0 to 255").grid(row=3, column=0)

    self.a = Entry(self.top)
    self.b = Entry(self.top)
    self.a.grid(row=0, column=1,padx=10)
    self.b.grid(row=1, column=1,padx=10)
    Button(self.top, text="Ok", command=self.get).grid(row=3, column = 1)

def get(self):
    self.c = self.a.get()
    self.d = self.b.get()
    if self.c > 255:
        tkMessageBox.showerror("Error", "Please enter a value between 0-255")
        self.clicked_wbbalance()
    else:
        print "asdfasd" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T08:49:45.307

`self.c`不是数字而是字符串，并且字符串将始终大于任何数字（参见[此处以了解有关此比较的说明](https://stackoverflow.com/q/3270680/718618)）。

在比较之前尝试转换`self.c`为 int ：

```
try:
    c_as_int = int(self.c)
except ValueError:
    tkMessageBox.showerror("Error", "Please enter a value between 0-255")
    self.clicked_wbbalance()
else:
    if c_as_int > 255:
        tkMessageBox.showerror("Error", "Please enter a value between 0-255") 
```

        self.clicked_wbbalance()

在 Python3 中，这种不同类型的比较会引发`TypeError`.

# css - css：在 chrome 中，为什么表格宽度超出其容器宽度？

> ID：13340603
> 
> 赞同：0
> 
> 时间：2012-11-12T08:46:42.860
> 
> 标签：css, firefox

请访问[holiday.ge](http://holiday.ge)并向下滚动到日历。在 Firefox 中，日历的行为与预期一样，但在 chrome 中，日历超出了其专用空间。我可以用最大宽度限制链接本身的空间。但从逻辑上讲，它应该像现在一样正常工作。

请问，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:52:14.043

你试过没有tds的边界吗？我也会在没有 td 宽度的情况下尝试它，然后从那里开始。您可能需要设置像素宽度。

# android - 在哪里放置 Nexus7 的位图？

> ID：13340608
> 
> 赞同：0
> 
> 时间：2012-11-12T08:47:07.670
> 
> 标签：android

Nexus7 的规格是 7 英寸屏幕、1280 x 800 分辨率和 216 像素/英寸。我制作了 drawable-xlarge-hdpi 文件夹并将图像放入该文件夹中。但是当我检查位图大小时，我得到的尺寸比实际尺寸小。怎么了？我试过drawable-large-hdpi，但结果是一样的。

```
image = BitmapFactory.decodeResource(res, R.drawable.image);
int width = image.getWidth(); // this returns smaller than actual size. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:04:35.767

这来自博客文章标题：[让您的应用程序为 Jelly Bean 和 Nexus 7 做好准备](http://android-developers.blogspot.in/2012/07/getting-your-app-ready-for-jelly-bean.html)

> 作为开发人员，我们将其视为大约 600 * 960 密度的独立像素和 tvdpi 的密度。

同一行中的帖子还要求您不要急于为这种密度创建新资产。

[Dianne Hackborn](https://plus.google.com/105051985738280261832/posts)（她在 Google 工作）在这里再次概述了这一事实：https: [//plus.google.com/105051985738280261832/posts/6eWwQvFGLV8](https://plus.google.com/105051985738280261832/posts/6eWwQvFGLV8)

如果您查看[Google IO 2012 源代码](http://code.google.com/p/iosched/source/browse/)，它还暗示（当然，我可能错过了显而易见的）没有为 Nexus 7 创建特殊资产，但它看起来和在它上面工作得很好。如果您浏览这两个链接，您会发现一些提示，以确保您的`hdpi`资产在 Nexus 7 上也看起来不错。

# emacs - 为 Org-mode 中的每个条目分配 ID

> ID：13340616
> 
> 赞同：10
> 
> 时间：2012-11-12T08:47:40.647
> 
> 标签：emacs, elisp, org-mode

[Org-mode](http://orgmode.org)有一个名为 的捆绑扩展[`org-id`](http://orgmode.org/worg/org-api/org-id-api.html)，它实现了 org-mode 文件的全局唯一 ID。每个条目（带有正文的标题）都可以在其`:PROPERTIES:`抽屉中具有 ID 属性。

可以使用函数为单个条目分配新 ID `org-id-get-create`。

**如何为 org-mode 文件中的每个条目分配一个 ID？**

我可以使用 Emacs 方法自动执行此操作，例如调用`org-id-get-create`每个以 . 开头的字符串的宏`*`。但我想知道 org-mode 是否已经具备这种能力。如果没有，请推荐为此目的编写 elisp 代码的最惯用方式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-27T00:25:22.570

我同意 Stuart 的观点——我认为 org-id 中没有任何东西可以自动执行此操作，所以它真的归结为您*何时*想要添加 id。

如果您使用[org-capture](http://orgmode.org/manual/Capture.html)添加所有项目，那么`org-capture-prepare-finalize-hook`放置代码的逻辑位置是：

```
(add-hook 'org-capture-prepare-finalize-hook 'org-id-get-create) 
```

或者，您可以按照 Stuart 的建议进行操作，并为 org-mode 文件添加一个保存挂钩。我认为处理文件中所有标题的最惯用方法是使用[映射 API](http://www.gnu.org/software/emacs/manual/html_node/org/Using-the-mapping-API.html)：

```
(defun my/org-add-ids-to-headlines-in-file ()
  "Add ID properties to all headlines in the current file which
do not already have one."
  (interactive)
  (org-map-entries 'org-id-get-create)) 
```

最后我们只需要添加一个`before-save-hook`只在 org-mode 下运行的：

```
(add-hook 'org-mode-hook
          (lambda ()
            (add-hook 'before-save-hook 'my/org-add-ids-to-headlines-in-file nil 'local))) 
```

应该这样做！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-12T18:59:19.943

我搜索了源代码，但找不到任何明显可以做到这一点的东西。我知道它被*Org-mobile*使用，但我没有太多经验。

首先，以下代码片段将遍历当前文件中的所有大纲标题（Org 模式标题基本上是标准 Emacs 大纲标题），如果那里还没有 ID，则添加一个 ID：

```
 (require 'org-id)
   (save-excursion
      (goto-char (point-max))
      (while (outline-previous-heading)
        (org-id-get-create))) 
```

（如果你想知道为什么这个循环在缓冲区上向后而不是向前，这是因为`while`循环总是会至少调用一次大纲导航函数，如果你的 Org 模式文件以标题开头，如果向前移动，则会跳过.)

这可以很容易地在 Org 模式议程已知的所有文件的循环中使用，方法是遍历 function 返回的条目`(org-agenda-files)`，或者添加到 Org 模式文件的保存挂钩中。

如果比我更灵活的人没有先到达那里，如果您可以确定*何时*需要添加 ID，我可能会将上述内容扩展为一个完整的解决方案。

# pdfbox - PDFBox 显示十六进制代码而不是内容

> ID：13340617
> 
> 赞同：3
> 
> 时间：2012-11-12T08:47:42.633
> 
> 标签：pdfbox, letters

我正在使用 PDFBox 解析大量文件，问题是对于两个文件，输出仅包含十六进制数字（0-9A-F）。例如，单词“Datum:”表示为“123456”。有什么方法可以获取文件的正确内容（这些文件是使用 GPL Ghostscript v9.xx 创建的）？

先感谢您！

# php - 无法从php连接到oracle数据库

> ID：13340618
> 
> 赞同：0
> 
> 时间：2012-11-12T08:47:55.177
> 
> 标签：php, oracle, database-connection

我在从 php 连接到 mydatabase 时遇到问题。我可以像这样从我的 C# 代码中毫无问题地连接：

```
 private void test()  
    {
        string connect = "Driver={Microsoft ODBC for Oracle};CONNECTSTRING=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=XE)));Uid=user;Pwd=pass";
        string queryString = "DELETE FROM myTabel";

        using (OdbcConnection connection = new OdbcConnection(connect))
        {
            try
            {
                OdbcCommand command = new OdbcCommand(queryString, connection);
                command.Connection.Open();
                command.ExecuteNonQuery();
                connection.Close();
                log.Debug("Lokalni podatki pobrisani!");
            }
            catch (Exception e)
            {
                Console.WriteLine("ne dela" + e.ToString());
                deluje = false;
            }
        }
    } 
```

这真的删除了所有数据，因为我与我没有问题连接到的 oracle SQL Developer 进行了检查。但是当我尝试运行该代码时：

```
 $tnsname = '(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
        (CONNECT_DATA = (SERVICE_NAME = XE)))';
    }

    $db['default']['hostname'] = $tnsname;
     $db['default']['username'] = "esz";
      $db['default']['password'] = "test";
      $db['default']['database'] = "esz";
     $db['default']['dbdriver'] = "oci8";
     $db['default']['dbprefix'] = "";
      $db['default']['pconnect'] = FALSE;
     $db['default']['db_debug'] = TRUE;
     $db['default']['cache_on'] = FALSE;
     $db['default']['cachedir'] = "";
     $db['default']['char_set'] = "utf8";
     $db['default']['dbcollat'] = "utf8_general_ci"; 

  echo 'Trying to connect to database: ' .$db['default']['database'];
  $dbh=mysql_connect( $db['default['hostname'],$db['default'['username'],$db['default']['password'])
   or die('Cannot connect to the database because: ' . mysql_error()); 
```

我得到这些错误：

```
 mysql_connect() [function.mysql-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. 
 mysql_connect() [function.mysql-connect]: [2002] php_network_getaddresses: getaddrinfo failed: No such host is kn (trying to connect via tcp://(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521)) (CONNECT_DATA = (SERVICE_NAME = XE))):3306)
 php_network_getaddresses: getaddrinfo failed: No such host is known. 
```

在我尝试执行mysql_connect（）的地方。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:41:39.967

使用 oci_connect 如下：

```
$user = ...;
$password = ...;
$url = '//dbserver:1521/dbname';
$connection = oci_connect ($user, $password, $url);
...
$query = '...';
$stid = oci_parse ($connection, $query);
oci_execute ($stid);
oci_fetch ($stid); 
```

之类的

# azure - Azure 移动服务（推送通知）

> ID：13340619
> 
> 赞同：0
> 
> 时间：2012-11-12T08:48:06.783
> 
> 标签：azure, push-notification, azure-mobile-services

我正在将我的 PNS 从 php 移动到 Azure 移动服务。在 PHP 中，我必须编写一个脚本来读取一些 html 页面并每 10 分钟将消息推送到注册设备。

如何使用 Azure 移动服务做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:47:19.297

我不确定您是否仍在寻找答案，但 Azure 移动服务已[在最新版本中添加了计划作业](http://www.windowsazure.com/en-us/develop/mobile/tutorials/schedule-backend-tasks/)。截至目前，我认为最快的间隔是每 15 分钟运行一次后台作业，即便如此，也只有在保留实例上运行移动服务时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:52:57.043

目前，您无法编写计划作业（每 X 分钟运行一次）以在 Azure 移动服务中运行。我将此作为建议添加到要实施的[Azure 移动服务 UserVoice](http://mobileservices.uservoice.com/forums/182281-feature-requests/suggestions/3345850-allow-scheduled-tasks-to-be-executed-in-the-backen)。

# java - Java和正则表达式中的lookbehind

> ID：13340626
> 
> 赞同：5
> 
> 时间：2012-11-12T08:48:33.630
> 
> 标签：java, regex, string

我正在尝试为以下内容查找正则表达式：

`@WORD@`与where 完全匹配的所有世界`WORD`都可以是任何单词，但仅在`=`. 我做了以下内容：
`(?<==)#.*?#)`这适用于但仅适用于`=@SOMEWORD@`或`@ANOTHERWORD@`但**不适**用于`= @WORD@`.
我也有兴趣**不**被跟踪，`=`但无法弄清楚。
无论如何使用类似的东西：`(?<=\\s*=\\s*)#.*?#)`但它不起作用。
有任何想法吗？

注意：奇怪，但从[这里](https://stackoverflow.com/questions/7543746/java-regex-error-look-behind-group-does-not-have-an-obvious-maximum-length)它说Java**不**支持可变长度后视，但这并没有给我一个例外

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:10:32.823

如果您使用后视，我假设您正在使用`Pattern`and`Matcher`直接捕获单词 clean (`"@WORD@"`而不是`"= @WORD@"`)。

如果确实如此，您需要做的就是在后视中添加一个可选的空白：

`(?<==\\s?)@.*?@`

* * *

这是一个测试代码，返回`"@WORD@"`：

```
Matcher m = Pattern.compile("(?<==\\s?)@.*?@").matcher("= @WORD@");
m.find();
System.out.println(m.group()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:04:00.180

此模式匹配一​​个等号，后跟一个可选空格和一个用 @ 符号括起来的单词：

```
Pattern pattern = Pattern.compile("= ?@(.*)@");
Matcher matcher = pattern.matcher("=@WORD@");
if (matcher.matches()) {
  System.out.println(matcher.group(1));
}

// Prints: "WORD" 
```

除非我误解了您希望完成的任务，否则看不到需要向后看。但是，以下应该有效：

```
Pattern pattern = Pattern.compile("(?<== ?)@(.*)@");
Matcher matcher = pattern.matcher("= @WORD@");
if (matcher.find()) {
  System.out.println(matcher.group(1));
}

// Prints: "WORD" 
```

然后按如下方式完成否定模式：

```
Pattern pattern = Pattern.compile("(?<!= ?)@(.*)@");
Matcher matcher = pattern.matcher("=@WORD@");
System.out.println(matcher.find());

// Prints: "false" 
```

# freemarker - 谁能发现这个 freemarker 宏中的语法错误

> ID：13340628
> 
> 赞同：0
> 
> 时间：2012-11-12T08:48:46.240
> 
> 标签：freemarker

```
<#macro inputValidatedTextCell name size=30  vreq="N" vtype="" class="" maxlength="" default="" index=-1 password=false readonly=false onChange="" id="" ignoreParameters=false errorField="" tabIndex="" colspan="" tooltip="">
   <#if ( vreq.equals("Y") && (!vtype.equals("")))><#assign vclass = "validation[required,custom[${vtype}}]]"><#elseif vreq.equals("Y")><#assign vclass = "validate[required]"><#else><#assign vclass = "validation[custom[${vtype}]]"></#if>
  <td<#if colspan?has_content>colspan="${colspan}"</#if>>
  <@inputText name=name id=name class=vclass
  size=size maxlength=maxlength default=default index=index password=password readonly=readonly onChange=onChange ignoreParameters=ignoreParameters errorField=errorField tabIndex=tabIndex tooltip=tooltip/>
  </td>
</#macro> 
```

我收到此错误： `Expected hash. vreq evaluated instead to freemarker.template.SimpleScalar on line 300, column 11 in opentapsFormMacros. The problematic instruction: ---------- ==> if-else [on line 300, column 4 in opentapsFormMacros] in user-directive inputValidatedTextCell [on line 17, column 5 in component://multitenancy-support/webapp/multitenancy-support/controlpanel/replenishmentConfigForm.ftl] in user-directive frameSection [on line 2, column 1 in ....etc....`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:18:09.133

这不是语法错误，而是运行时错误。它基本上说这`vreq`只是一个字符串，所以它没有子变量（之后的东西`.`）。你应该只写：

```
<#if vreq == "Y" && vtype != ""> 
```

# android - 可能缺少 RAM 崩溃应用程序？

> ID：13340631
> 
> 赞同：0
> 
> 时间：2012-11-12T08:49:19.693
> 
> 标签：android, memory-management, ram

我目前正在开发一个非常简单的 Android 2D 游戏。为了测试，我有两个 Android 设备：

*   **中兴刀片**
*   **华为u8650**

我的游戏在**ZTE**中运行良好，但在显示加载屏幕时在**华为**中加载一点后崩溃。

我知道**华为 u8650的****RAM 内存**很小，但我已经设法从中释放了至少**70 兆**内存（在运行时以编程方式检查），而且我的游戏到目前为止并没有使用那么多。

今天我很无知。

谁能带来一些亮光并告诉我们这里还会发生什么？

我感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:16:51.300

你可以 ：

1.  检查您的应用程序是否存在内存泄漏
2.  如果你确定没有什么需要优化的，你可以在你的标签中使用`android:largeHeap="true"`属性`application``Android Manifest`

# yii - 完整网站的搜索功能 - yii

> ID：13340632
> 
> 赞同：0
> 
> 时间：2012-11-12T08:49:20.977
> 
> 标签：yii

我想在我的网站中添加搜索功能，以便能够搜索完整的网站（如用户资料、帖子等）

我在搜索页面上创建了选项卡（用户、帖子、评论），并在每个选项卡上单击我调用了每个模型的默认 Search() 函数，它正在显示完整的记录。现在我陷入了特定的搜索，比如如果用户输入了一些东西在搜索框中，只有三个选项卡应该显示在搜索框中具有该关键字的内容。

这是我的代码：

在我的 SiteController 中：

此控制器用于主搜索框`main.php`

```
public function actionSearch() {

           $model = new TblUserProfile;

        $this->render('search'
                ,  array('model'=>$model)

);

//        } 

        } 
```

然后在配置文件控制器中：

```
public function actionProfileSearch() {

        $model = new TblUserProfile;

        $this->layout = 'null';
        $this->render('/tblUserProfile/profilesearch', array('model' => $model));
    } 
```

然后在帖子和评论控制器中同样的事情！

## 这是我的搜索页面（站点/搜索）：

```
<?php 
$this->widget('zii.widgets.jui.CJuiTabs', array(
    'tabs'=>array(
        'People'=>array('ajax'=>array('/tblUserProfile/profilesearch','view'=>'/tblUserProfile/profilesearch')),

         'Blogs'=> array('ajax'=>array('/tblPost/postsearch','view'=>'/tblPost/postsearch')),

        'Comments'=> array('ajax'=>array('/tblComments/commentsearch','view'=>'/tblComments/commentsearch','search'=>'omer')),
    ),
    'options'=>array(
        'collapsible'=>true,
        'selected'=>0,
    ),
    'htmlOptions'=>array(
        'style'=>'width:900px;'
    ),
));
?> 
```

现在我需要帮助从搜索框中获取价值，并且在每次搜索中我只能使关键字搜索不完整，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:55:49.990

您可以查看第三方服务，例如[google 站点搜索](http://www.google.co.za/enterprise/search/products_gss.html)

但是，如果您想要一个自定义解决方案，它可能会变得非常复杂。其中一种方法是创建索引数据库表。该表的结构将取决于它需要存储的内容。

这背后的概念是，任何时候将数据插入任何其他“可索引”表（用户配置文件、帖子等），都会在索引表中创建一个索引，该索引将存储：

*   可搜索文本（用户搜索查询将与之比较的内容）
*   内容的类型（用户个人资料/帖子等...）
*   内容的 URL（或引用链接到相关内容的方法）

这样，当用户搜索时，您只需将查询与索引进行比较，然后返回结果。您甚至可以包括类型过滤器（例如：用户可以选择要搜索的内容类型的下拉菜单）

# c# - IIS 7.5 无法使用代码隐藏文件加载自定义 HTTP 处理程序

> ID：13340635
> 
> 赞同：4
> 
> 时间：2012-11-12T08:49:51.960
> 
> 标签：c#, asp-classic, iis-7.5

在过去的 2 天里，我试图让我的自定义 HTTP 处理程序工作，但没有结果。我收到以下错误：

> 无法加载类型“AlarmHandler”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：无法加载类型“AlarmHandler”。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

我遵循了几个教程，但我想我错过了一些小东西。我正在使用以下配置：

*   IIS 7.5
*   DefaultPool 设置为集成模式
*   所有文件都在根目录 (C:\inetpub\wwwroot)
*   *IIS7.5 中没有定义处理程序映射*
*   网络项目

**AlarmHandler.ashx.cs**：

```
using System.Web;
public class AlarmHandler : IHttpHandler
{
    // Constructor.
    public AlarmHandler() { }

    public void ProcessRequest(HttpContext context)
    {
        HttpRequest Request = context.Request;
        HttpResponse Response = context.Response;

        // Test code.
        Response.Write("<html>");
        Response.Write("<body>");
        Response.Write("<h1>Hello from a synchronous custom HTTP handler.</h1>");
        Response.Write("</body>");
        Response.Write("</html>");
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

**警报.ashx**：

```
<% @ WebHandler language="C#" class="AlarmHandler" codebehind="AlarmHandler.ashx.cs" %> 
```

**网络配置**：

```
<configuration>
    <system.webServer>
        <handlers>
            <add name="AlarmHandler" path="*.ashx" verb="*" type="IHttpHandler" />
        </handlers>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:14:37.350

对我有用的是改变：

```
<% @ WebHandler language="C#" class="AlarmHandler" codebehind="AlarmHandler.ashx.cs" %> 
```

到：

```
<% @ WebHandler language="C#" class="Namespace.AlarmHandler" codebehind="AlarmHandler.ashx.cs" %> 
```

`Namespace`声明的命名空间在哪里`AlarmHandler`。

考虑到这一点，我认为将处理程序注册更改为此可能是一个好主意：

```
<add name="AlarmHandler" path="*.ashx" verb="*" type="Namespace.AlarmHandler" /> 
```

顺便说一句，我在很多场合都使用过 HTTP 处理程序，并且从未费心注册它们（在我的例子中，我倾向于通过 Ajax 显式调用它们），所以这行甚至可能不是必需的。

**编辑：**

在这种情况下，您没有使用 Visual Studio，这使事情有些不同，因为您没有 bin 目录，因此我们必须对处理程序进行一些不同的处理。

目前，您的处理程序分为 ASHX 和 CS 文件。这通常没问题，但在您的情况下，我们需要将它们结合起来。

这应该是您`Alarms.ashx`文件的内容（您不再需要该`AlarmHandler.ashx.cs`文件）：

```
<% @ WebHandler language="C#" class="AlarmHandler" %>

using System.Web;

public class AlarmHandler : IHttpHandler
{
    // Constructor.
    public AlarmHandler() { }

    public void ProcessRequest(HttpContext context)
    {
        HttpRequest Request = context.Request;
        HttpResponse Response = context.Response;

        // Test code.
        Response.Write("<html>");
        Response.Write("<body>");
        Response.Write("<h1>Hello from a synchronous custom HTTP handler.</h1>");
        Response.Write("</body>");
        Response.Write("</html>");
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

顺便说一句，您所遵循的教程几乎肯定会假设您使用的是 Visual Studio，这可能解释了您遇到的一些困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-31T19:40:34.607

仅仅因为这出现在关于 httphandlers 和 codebehind 文件的 Google 搜索中：您需要做的就是将 .cs 文件放到 App_Code 文件夹中，然后从 .ashx 文件中引用该类。

# jquery - CSS 背景颜色和文本随 jquery/javascript 变化

> ID：13340638
> 
> 赞同：4
> 
> 时间：2012-11-12T08:50:10.647
> 
> 标签：jquery, css

单击链接时，一段代码无法更改背景颜色和文本颜色......

```
<div id="main_nav">
    <ul class="navigation">
        <li class="tab1"><a href="javascript:void(0);">My Account</a></li>
        <li class="tab1"><a href="javascript:void(0);">Available Times</a></li>
        <li class="tab1"><a href="javascript:void(0);">Completed Jobs</a></li>
        <li class="tab1"><a href="javascript:void(0);">New Jobs [<span class="menu_count2"></span>]</a></li>
        <li class="tab1"><a href="javascript:void(0);">Todays Jobs [<span class="menu_count"></span>]</a></li>
    </ul>
</div> 
```

这是jquery....

```
$(document).on('click', '.tab1', function(){
    $('.tab1').css({'background-color' : '#5B1762'});
    $('.tab1 a').css({'color' : '#fff'});
    $(this, '.tab1').css({'background-color': '#ccc'});
    $(this, '.tab1 a').css({'color': 'red'});
}); 
```

这会改变背景颜色，但文本保持白色，就像在 css 文件中一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T08:53:15.937

您正在编码`$(context, selector)`而不是`$(selector, context)`, 更改：

```
$(this, '.tab1').css({'background-color': '#ccc'});
$(this, '.tab1 a').css({'color': 'red'}); 
```

到：

```
$(this).css({'background-color': '#ccc'});
$('a', this).css({'color': 'red'}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:04:15.690

也可以这样做：

```
$('.tab1').click( function(){
    $('.tab1').css({'background-color' : '#5B1762'}).find('a').css({'color' : '#fff'});
    $(this).css({'background-color': '#ccc'}).find('a').css({'color': 'red'});
}); 
```

# asp.net-mvc-3 - Telerik Grid ASP.NET MVC 中的自定义命令作为 LinkBut ton 而不是 Button

> ID：13340639
> 
> 赞同：2
> 
> 时间：2012-11-12T08:50:11.530
> 
> 标签：asp.net-mvc-3, telerik, telerik-grid

我的 cshtml 中有 Telerik Grid，它在 Telerik Grid 中有两个自定义列命令。现在自定义命令呈现为按钮，我希望它们显示为链接而不是按钮.. 可能吗？如何实现？

自定义列命令代码如下

```
 columns.Command(commands => commands
        .Custom("Edit")
        .Text("Edit")
        .SendState(false)
        .DataRouteValues(route =>

     {

route.Add(o => o.SuppliersInvoiceNumber).RouteKey("InvoiceNumber");

    })

    .Ajax(true));

    columns.Command(commands => commands

    .Custom("remove")

    .Text("Delete")

    .SendState(false)

    .DataRouteValues(route =>

     {

route.Add(o => o.PONumber).RouteKey("PONumber");

     })

     .Ajax(true)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T09:40:49.687

使用`HtmlAttributes`命令按钮的 来设置按钮的样式。事实上，设置`background:none`会暴露按钮确实是一个超链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T17:34:17.547

命令“按钮”是引擎盖下的链接。只需覆盖主题应用的 css，您将获得真正的链接。

```
.t-button {
   border: 0 none transparent;
   min-width: 0;
   border-radius: 0; 
   margin: 0;
   background:none;
   background-color:transparent;
} 
```

也许您将不得不添加其他属性来覆盖。

# android - 对移动自动化的数据驱动支持

> ID：13340646
> 
> 赞同：2
> 
> 时间：2012-11-12T08:50:49.313
> 
> 标签：android, robotium

我想知道Robotium是否支持数据驱动测试，如果支持，请提供有用的链接和方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:10:26.820

应该是可以的。Android 有内置的 SQLite 数据库。您可以使用它来驱动测试集的数据

# sql - SQL：需要使用 group by 或任何其他方式对值进行排序

> ID：13340648
> 
> 赞同：3
> 
> 时间：2012-11-12T08:50:50.667
> 
> 标签：sql, sql-server

这是我桌子的示例风景。首先我必须找到，按 ITime asc 排序，但是如果有任何记录在 ITime 中相同，那么记录顺序将是“通过->失败->撤回”。请检查下面的临时表。

```
if object_id('tempdb.dbo.#temp321','U') is not null
drop table tempdb.dbo.#temp321
create table #temp321(
id int,
uname varchar(50),
ITime datetime,
Result varchar(10)
)
INSERT into #temp321 values('1','a','2012-11-12 13:12:28.103','pass')
INSERT into #temp321 values('2','b','2012-11-12 13:12:28.103','fail')
INSERT into #temp321 values('3','c','2012-11-12 12:58:30.000','pass')
INSERT into #temp321 values('4','d','2012-11-12 13:12:28.103','withdrow')
INSERT into #temp321 values('5','e','2012-11-12 12:58:41.360','withdraw')
INSERT into #temp321 values('6','f','2012-11-12 13:12:28.103','pass')
INSERT into #temp321 values('7','g','2012-11-12 13:12:28.103','fail')
select ID from #temp321 ORDER BY ITime ASC
drop table #temp321

Expected outcomes ID value : 3,5,1,6,2,7,4 
```

我怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:52:42.313

```
ORDER BY ITIME ASC,
         CASE Result WHEN 'pass' THEN 1
                     WHEN 'fail' THEN 2
                     WHEN 'withdraw' THEN 3
                     ELSE 4
                     END,
         ID; 
```

# javascript - 如何将数据从商店加载到 Form.Panel？

> ID：13340662
> 
> 赞同：0
> 
> 时间：2012-11-12T08:51:44.547
> 
> 标签：javascript, extjs, extjs3

我有一个 form.Panel，我在其中显示了一些数据。我从服务器接收数据作为 XML 并使用直接将其加载到字段中

```
podform.getForm().load({url:url_servlet+'kadastr_zemform.jsp' ... 
```

连同一个 XMLReader。

现在我想以 3 个单独的 form.Panel 显示数据。但我只是不想在将数据加载到面板之前加载一次。我猜 form.load() 在这种情况下不再适用于我。

如何将数据加载到多个面板中？我应该使用商店，因为我还需要能够编辑数据并将其发回吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:00:05.983

您可以使用一个包含 3 个子面板的主表单面板，其中包含您需要的字段。然后，如果您在表单上调用 load()，如果字段位于不同的子面板中（因为元素包含在主表单中），它们也会被初始化：

```
Ext.create('Ext.form.Panel',{
   layout: 'vbox',
   items: [
   {itemId: 'panel1', xtype: 'panel', layout: 'form', items: [{xtype: 'textfield', name: 'text1'}
   ]},
   {itemId: 'panel2', xtype: 'panel', layout: 'form', items: [{xtype: 'textfield', name: 'text2'},
   {itemId: 'panel3', xtype: 'panel', layout: 'form', items: [{xtype: 'textfield', name: 'text3'}]
}); 
```

否则，如果您不能只管理一个带有子面板的表单面板，您应该考虑直接管理 Ajax 调用（使用 Ext.Ajax.request），然后使用生成的对象来初始化每个表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:16:19.203

我找到了两个商店的解决方案。

```
var store = new Ext.data.Store({                
            url: url_servlet+"kadastr_zemform.jsp",
            reader: new Ext.data.XmlReader({
            totalProperty: "results", 
            record: "contact",
                            fields: [
                                    ]})
});
store.load(); 
```

1.  您可以使用

    ```
     podform.getForm().setValues(store.getRange(0)[0].data); 
    ```

2.  或这个：

    ```
    var record = store.getAt(0);
    podform.getForm().loadRecord(record); 
    ```

这个答案来自sencha论坛。[http://www.sencha.com/forum/showthread.php?248760-How-to-load-data-from-store-to-FormPanel&p=912235#post912235](http://www.sencha.com/forum/showthread.php?248760-How-to-load-data-from-store-to-FormPanel&p=912235#post912235)

# c++ - 没有“新”的多态性

> ID：13340664
> 
> 赞同：7
> 
> 时间：2012-11-12T08:51:46.050
> 
> 标签：c++, c++11

可以说我有以下内容：

```
class A { virtual void g() = 0 }

class B : public A { virtual void g() { ... } }
class C : public A { virtual void g() { ... } }

... f(bool x)
{
  if (x) { return B(); } else { return C(); }
}

bool get_boolean();

int main()
{
  bool b = get_boolean();
  ... x = f(b);
  x.g();
} 
```

无论如何都可以在没有调用的情况下执行上述操作`new`，即仅在堆栈上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:36:22.983

避免动态分配的一种简单方法是使用**静态分配**，这与动态分配尽可能相反。但是，必须小心执行，因为即使使用非线程程序，也可能会无意中陷入代码的两个或多个部分各自认为他们“拥有”某个静态分配的对象的情况。更糟糕的是，这些本质上是*全局变量*（即使伪装成单例，或者在下面的代码中作为局部静态变量）本质上充当了*意大利面条式通信*的中心枢纽，在那里，引发混乱的信息在你无法想象的地方之间自由传播，完全没有你的控制。

所以，静态分配方案有一些缺点...... :-)

但让我们从那里开始：

```
// Using static allocation.

#include <iostream>
using namespace std;

struct A { virtual void g() = 0; };

struct B : A { virtual void g() override { wcout << "A\n"; } };
struct C : A { virtual void g() override { wcout << "B\n"; } };

A& f( bool const x )
{
    static B    theB;
    static C    theC;

    if( x ) { theB = B(); return theB; } else { theC = C(); return theC; }
}

bool get_boolean() { return false; }

int main()
{
    bool const b = get_boolean();
    A& x = f( b ); 
    x.g();
} 
```

为了避免静态分配方案的错误所有权缺陷，您可以提供堆栈上的存储，使用 C++**自动分配**（C++ 自动分配根据定义是一个堆栈，一种 LIFO 分配方案）。但这意味着将存储向下传递给函数。然后该函数可以返回对相关对象的引用：

```
// Using automatic storage (the stack)

#include <iostream>
using namespace std;

struct A { virtual void g() = 0; };

struct B : A { virtual void g() override { wcout << "A\n"; } };
struct C : A { virtual void g() override { wcout << "B\n"; } };

A& f( bool const x, B& b, C& c )
{
    if( x ) { b = B(); return b; } else { c = C(); return c; }
}

bool get_boolean() { return false; }

int main()
{
    bool const b = get_boolean();
    B   objBStorage;
    C   objCStorage;
    A&  x   = f( b, objBStorage, objCStorage ); 
    x.g();
} 
```

但是，即使我们选择忽略诸如带有副作用的构造等问题，即当我们轻率地假设类`B`并且`C`被设计为与这样的方案很好地配合时，上述内容也会*浪费存储*。如果`B`和`C`实例很大，则可以考虑使用 C++ 的工具在预先存在的存储中构造对象，称为**放置新**。由于内存对齐问题，在 C++03 中正确执行有点困难，但 C++11 提供了更好的支持，如下所示：

```
#include <iostream>
#include <memory>           // unique_ptr
#include <new>              // new
#include <type_traits>      // aligned_storage
using namespace std;

typedef unsigned char Byte;

struct A { virtual void g() = 0; };

struct B : A { virtual void g() override { wcout << "A\n"; } };
struct C : A { virtual void g() override { wcout << "B\n"; } };

A* f( bool const x, void* storage )
{
    return (x? static_cast<A*>( ::new( storage ) B() ) : ::new( storage ) C());
}

bool get_boolean() { return false; }

void destroyA( A* p ) { p->~A(); }

int main()
{
    enum{ enoughBytes = 
        (sizeof( B ) > sizeof( C ))? sizeof( B ) : sizeof( C ) };
    typedef aligned_storage< enoughBytes >::type StorageForBOrC;

    bool const b = get_boolean();
    StorageForBOrC storage;
    A* const pX = f( b, &storage );
    unique_ptr<A, void(*)(A*)> const cleanup( pX, destroyA );
    pX->g();
} 
```

现在，我会选择以上哪个？

我会选择严格限制但简单且即时的静态分配，还是选择浪费内存的自动分配，或者……优化但有些复杂的就地对象构造？

答案是，我一个都不选！

我不会专注于微观效率，而是专注于*清晰度*和*正确性*，因此只需承受动态分配的性能损失。为了正确起见，我将对函数结果使用智能指针。如果事实证明这真的会减慢速度，我可能会考虑使用专用的*小对象分配器*。

总之，不要为小事烦恼！:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T08:54:42.820

在函数`f`对象中`B()`或者`C()`都是临时的，所以你只能`f`按值返回它们。

也许[boost::variant](http://www.boost.org/doc/libs/1_52_0/doc/html/variant.html)适合你。然后，您甚至不需要虚拟方法或从公共基类派生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:54:34.600

多态性也适用于引用，但您不能通过引用返回临时值，因此：

```
A& f(bool x)
{
  static B b;
  static C c;
  if (x) { return b; } else { return c; }
} 
```

和

```
A& x = f(b); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:57:24.163

> 无论如何，是否可以在不调用 new 的情况下执行上述操作，即仅在堆栈上？

你可以只使用*Placement`new`*。这允许您为您的对象指定一个内存位置（例如，在`char`您在堆栈上声明的缓冲区中）。

* * *

示例： http: [//www.parashift.com/c++-faq-lite/placement-new.html](http://www.parashift.com/c++-faq-lite/placement-new.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T08:58:03.237

我会重构它以使用函数参数：

```
class A { virtual void g() = 0 }

class B : public A { virtual void g() { ... } }
class C : public A { virtual void g() { ... } }

template<typename FunOb>
typename std::result_of<FunOb(A&)>::type f(bool x, FunOb fo)
{
  if (x) { B b; return fo(b); } else { C c; return fo(c); }
}

bool get_boolean();

int main()
{
  bool b = get_boolean();
  f(b, [](A& x) { x.g(); } );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T09:00:00.537

我在这个问题中有什么遗漏吗？为什么不像下面这样简单

```
void CallGFunc(A *obj){
   obj->g();
}

int main(){
    ....
    B b;
    C c;

    CallGFunc(booleanvar? &b:&c)
    ....
} 
```

这是你想要的吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T09:11:38.310

您可以使用对象引用，但不能返回对在堆栈中创建的对象的引用，因为调用完成后该对象将被删除。

这里有一个建议：

```
#include <iostream>

class A
{
public:
virtual void g() const = 0;
};

class B : public A
{
public:
virtual void g() const {std::cout << "B" << std::endl;};
};

class C : public A
{
public:
virtual void g() const {std::cout << "C" << std::endl;};
};

const A &f(bool b)
{
  if (b) return B(); else return C();
}

void doStuff(const A &a)
{
  a.g();
}

int main(void)
{
  doStuff(B()); //"B"
  doStuff(C()); //"C"

//  A &a = f(true); //ERROR! a will be deleted right after call is made, giving you a reference to an invalid object!

return 0;
} 
```

另一种解决方案是返回静态对象的引用，请记住该对象将由调用该方法的所有实例共享。效果很好，您不必修改对象，否则这不是一个好的解决方案。

```
#include <iostream>

class A
{
public:
virtual void g() const = 0;
};

class B : public A
{
public:
virtual void g() const {std::cout << "B" << std::endl;};
};

class C : public A
{
public:
virtual void g() const {std::cout << "C" << std::endl;};
};

const A &f(bool b)
{
static B ret1;
static C ret2;
   if (b) return ret1; else return ret2;
}

void doStuff(const A &a)
{
  a.g();
}

int main(void)
{
  doStuff(f(true)); //"B"
  doStuff(f(false)); //"C"

return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-12T10:27:49.200

并不真地。问题是复制操作不是多态的；如果您的函数返回一个`A`，那么只会`A`复制一个。（这称为切片。）如果没有复制，您需要对象的任意生命周期，而不是基于范围的生命周期。通常唯一可用的其他可能性是动态分配。

如果函数只被调用一次，并且对象或多或少是一个单例，您可以使用静态实例，尽管您可能希望在单独的范围内定义它们，以避免系统地构造它们：

```
A*
f( bool c )
{
    A* results = NULL;
    if ( c ) {
        static B b;
        results = &b;
    } else {
        static C c;
        results = &c;
    }
    return results;
} 
```

当然，总是有将复制与多态性结合起来的信封惯用语。但这在实践中会导致更多的动态分配，即使它们都发生在“幕后”，所以客户端代码看不到它们。（如果对象是不可变的，字母信封习惯用法可以使用引用计数指针，并避免大多数额外的分配。）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-12T13:00:48.397

如果您真的想将所有内容都保留在堆栈上，最好编写一个处理`A`接口的函数，然后在您想要的对象上调用它：

```
void actionsWithA(A& a){
    a.g();
}

void doItWithB(){
    B b;
    actionsWithA(b);
}

void doItWithC(){
    C c;
    actionsWithA(c);
}

bool get_boolean();

int main()
{
    bool b = get_boolean();
    if(b) { doItWithB(); } else { doItWithC(); }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-16T23:21:19.590

当然。这很简单。

```
class Fighter {
public:
  virtual const char *attack() const { return "no power"; }
};

class Ryu : public Fighter {
public:
  const char *attack() const override { return "Hadoken"; }
};

class Guile : public Fighter {
public:
  const char *attack() const override { return "Alec full"; }
};

int main() {
  Fighter *ryu_dynamic = new Ryu;
  Fighter *guile_dynamic = new Guile();
  cout << ryu_dynamic->attack() << endl;
  cout << guile_dynamic->attack() << endl;
  delete ryu_dynamic;
  delete guile_dynamic;

  const Fighter &ryu_static_1 = Ryu();
  const Fighter &guile_static_1 = Guile();
  cout << ryu_static_1.attack() << endl;
  cout << guile_static_1.attack() << endl;

  Fighter &&ryu_static_2 = Ryu();
  Fighter &&guile_static_2 = Guile();
  cout << ryu_static_2.attack() << endl;
  cout << guile_static_2.attack() << endl;

  Fighter *ryu_static_3 = &Ryu();
  Fighter *guile_static_3 = &Guile();
  cout << ryu_static_3->attack() << endl;
  cout << guile_static_3->attack() << endl;

  return 0;
} 
```

**输出**：

> Hadoken
> Alec 完整
> 的 Hadoken
> Alec 完整 的

# jquery - 粘性标题 css 和 jquery 效果

> ID：13340670
> 
> 赞同：0
> 
> 时间：2012-11-12T08:52:21.957
> 
> 标签：jquery, css, positioning, css-position

我有以下代码：

```
function fixDiv() {
    var $div = $("#navwrap");
    if ($(window).scrollTop() > $div.data("top")) { 
        $('#navwrap').css({'position': 'fixed', 'top': '0', 'width': '100%'}); 
    }
    else {
        $('#navwrap').css({'position': 'static', 'top': 'auto', 'width': '100%'});
    }
}

$("#navwrap").data("top", $("#navwrap").offset().top); 
// set original position on load
$(window).scroll(fixDiv); 
```

```
 <div class="nav" id="navwrap">
        <style type="text/css">
    .nav
    {
        width: 100%;
        margin: 0 auto;
        background: black;
        height: 40px;
    }
    </style>
        <ul>
            <li id="home_link"><a href="#"><img src="images/nav_logo.jpg" /></a></li>
            <li><a href="#">Services &amp; Pricing</a></li>
            <li><a href="#">About us</a></li>
            <li><a href="#">Blog</a></li>
        </ul>
    </div> 
```

这与[http://creuna.com](http://creuna.com)上的效果类似，导航栏在滚动超过其位置后会粘在顶部。我遇到的问题如下：

当导航栏滚动时，它的位置从静态变为“固定”。这导致导航栏高度的大小跳跃。如何让#navwrap div 保持 40px 的高度同时防止跳跃？

抱歉，如果这个问题看起来有点具体，只是被困在这个问题上很久了，并且认为有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:41:35.637

只需这样做：

CSS：

```
#sticky_nav_wrapper { height:40px; }
#sticky_nav {
    height:35px;
    border:1px solid #C9D6E6;
    border-bottom:none; z-index:1;
}
#sticky_nav ul {
    list-style:none;
    margin:0;
    padding:5px;
}
#sticky_nav ul li {
    margin:0;
    padding:0;
    display:inline;
}
#sticky_nav ul li a {
    float:right;
    margin:0 0 0 5px;
} 
```

HTML：

```
<div id="sticky_nav_wrapper">
    <div id="sticky_nav">
        <ul>
            <li><a href="#">Services &amp; Pricing</a></li>
            <li><a href="#">About us</a></li>
            <li><a href="#">Blog</a></li>
        </ul>
    </div>
</div> 
```

jQuery :

```
$(function () {
    var sticky_nav_offset_top = $('#sticky_nav').offset().top;
    var sticky_nav = function () {
        var sticky_nav_wraper_width = $('#sticky_nav_wrapper').width();
        var scroll_top = $(window).scrollTop();
        if (scroll_top > sticky_nav_offset_top) {
            $('#sticky_nav').css({ 'position': 'fixed', 'top': 0, width: '100%' });
        } else {
            $('#sticky_nav').css({ 'position': 'relative', width: 'auto' });
        }
    };
    sticky_nav();
    $(window).scroll(function () {
        sticky_nav();
    });
}); 
```

# java - 如何分解转换为字节的大文本文件，可以分解为通过 UDP 发送的数据包？

> ID：13340671
> 
> 赞同：0
> 
> 时间：2012-11-12T08:52:28.363
> 
> 标签：java, udp, byte, datagram

```
public boolean FileToByteArray(DatagramSocket socket, InetAddress dst_addr, int dst_port) throws Exception{
        File file = new File("input.txt");
        InputStream is = new FileInputStream(file);
        long length = file.length();
        byte[] bytes = new byte[(int) length];
        int offset = 0, n = 0;
        DatagramPacket out_pkt = null;

            while (offset < bytes.length && (n = is.read(bytes, offset, bytes.length - offset)) >= 0) {
                offset += n;
                out_pkt = new DatagramPacket(bytes, pkt_size, dst_addr, dst_port);
                packetCount++;
                System.out.println("*****************" + packetCount);
                System.out.println(out_pkt.getLength());
                socket.send(out_pkt);
            }
            is.close();

            String s = new String(bytes);
            System.out.println(s + " " + s.length()) ;
            return true;

      } 
```

大家好， 我正在处理一个需要我通过 UDP 发送大文本文件的任务。我能够读取 10000 字节，但是当我将 pkt_size 设置为 1000 时，它只传送 1000 字节，即超过 1KB 的数据。我如何将大文件分成小数据包发送？

# linux-kernel - 从 Linux 内核空间获取进程列表

> ID：13340672
> 
> 赞同：3
> 
> 时间：2012-11-12T08:52:33.230
> 
> 标签：linux-kernel, linux-device-driver

如何`process_name -> process_pid`从内核模块获取所有对（用户空间和内核空间）的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T05:38:00.897

在您的内核模块中，您可以执行以下操作：

```
 rcu_read_lock();
    for_each_process(g) {
            printk("%s --> %d\n", g->comm, task_tgid_vnr(g));
    }
    rcu_read_unlock(); 
```

# javascript - 扩展 javascript 通用视图模型。（昏死）

> ID：13340677
> 
> 赞同：1
> 
> 时间：2012-11-12T08:53:16.573
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin

背景：我对我喜欢的“严肃的javascript/jquery编码”很陌生，我以前的尝试可能会被认为是叛国罪：P。

**我的问题：我注意到我们的一些客户端视图模型中有一种模式，并希望将其中一些合并到一个 .js 文件中。**

一切似乎都适用于大多数场景，除了我需要创建一组额外的可观察对象的屏幕，这些屏幕不一定映射到我从服务器返回的 JS 对象。

```
 var AdminPages = AdminPages || {};  

 AdminPages.SimplePageVM: function (options) {

            var self = this;

            self.hasChanges = function () {};        
            self.isValid = function () {};

            // CRUD Actions
            self.get = function () {
                $.ajax({
                   url: options.getUrl,
                   dataType: 'json',
                   data: !$.isEmptyObject(options.someId) ? { someId: options.someId} : null,
                   success: function (result) {            
                       self.observables = ko.mapping.fromJS(result);
                       ko.editable(self.observables);
                       ko.applyBindings(self, $('form')[0]);
                   },
                   error: function (result) {}
                });
            };
            self.save = function () {};
            self.edit = function () {};
            self.cancel = function () {};

            // Initialise the viewmodel on create
            self.get();                      
  } 
```

我想将以下内容添加到视图模型中。我在想我需要创建一个全新的对象（因为 self.observables 仅在 get 函数成功时创建），然后在项目绑定上添加我的新对象及其属性。

想添加什么ID：

```
 self.newObject.IsPercentageEvaluation = 
            ko.computed(function () {
                var isPercentage = self.observables.IsPercentageBased() == 'true';    
                  if (isPercentage) {                        
                      self.observables.BalancePercentage('40');
                  } else {
                      self.observables.BalancePercentage('');
                  }
                return isPercentage;
            }); 
```

并称之为：

```
$(function () {
        var obj = {
             IsPercentageEvaluation = ko.computed(...);
        };

        AdminPages.SimplePageVM({
            getUrl: '@Url.Action("Get", "SomeController")',
            editUrl: '@Url.Action("Update", "SomeController")',
            organisationId: '@ViewBag.OrganisationID',
            newObject: obj
        });

} ($)); 
```

我只是想确认这是否是处理这种情况的正确方法？或者，如果有更好的方法，例如使用某种 java 脚本模式，或者某种程度的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:45:21.097

去年春天我参与了一个大型项目，我们尝试遵循与您正在使用的模式类似的模式。

有一些问题需要考虑——

*   在您的 ajax.success 函数中，我们通常需要能够修改返回的视图模式。例如，添加 ko.computed 的。我建议您在 ko.applybindings 之前为此添加一个可覆盖的函数。
*   您需要能够处理应用程序在返回数据时遇到问题的情况。例如，数据库已关闭或 Web 服务处于脱机状态。您需要有一种优雅的方式来处理这些情况。我们通过扩展我们的视图模型来做到这一点，以便在单独的属性上返回这些条件。
*   如果要返回要在表数据中显示的行数据，则可能必须修改 ajax.success 函数以处理数据数组。我们似乎总是遇到这个问题。

我确实喜欢你的视图模型。它是一段灵活且可扩展的代码。我将在我们的下一个项目中借用它。

# asp.net - C# 中的时间范围选择

> ID：13340679
> 
> 赞同：0
> 
> 时间：2012-11-12T08:53:22.033
> 
> 标签：asp.net, c#-3.0

我怎么知道当前时间（不是日期）在 JobStart 和 Job End Time 之间

```
 var JobStartTime  = new DateTime(2012,1,1,9,0,0,DateTimeKind.Local);    //09:00AM
    var JobEndTime = new DateTime(2012,1,1,18,0,0,DateTimeKind.Local);      //06:00PM
    var CurrentTime = DateTime.Now; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:55:22.680

使用[DateTime.TimeOfDay](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)属性

```
if (CurrentTime.TimeOfDay >= JobStartTime.TimeOfDay &&
    CurrentTime.TimeOfDay <= JobEndTime.TimeOfDay)
{

} 
```

# asp.net-mvc - MVC 视图渲染不尊重视图模型中传递的数据

> ID：13340685
> 
> 赞同：3
> 
> 时间：2012-11-12T08:53:50.893
> 
> 标签：asp.net-mvc, model-view-controller, model-binding, asp.net-mvc-views, asp.net-mvc-viewmodel

我正在尝试创建一个 MVC 操作方法，该方法允许用户逐步查看一系列数据库记录。每次用户发布更新时，都会将其提交到数据库并检索和呈现新记录以供审查。

但是，我的 MVC 视图似乎正在组合来自发布的视图模型和作为数据库查询结果创建的新视图模型的数据。当视图简单地呈现来自视图模型的属性值时，它会正确地使用来自视图模型实例的那些传递给它的值，但是当它将 HTML 表单控件绑定到视图模型属性时，它会使用来自发布的视图模型的值。这意味着单个视图能够为单个视图模型实例上的单个属性显示两个不同的值：

![在此处输入图像描述](../Images/719812443accb46537f9f1fc09cdb830.png)

这是动作方法的一个非常简化的版本......

```
public ActionResult Index(MyViewModel model)
{
    if (ModelState.IsValid)
    {
        // Write the posted model data to the repository
        // ...

        // Retrieve a new entity for the user to work on
        var alternate = new MyViewModel { Name = "New Name" };

        return View(alternate);
    }

    return View(model);
} 
```

...和视图模型...

```
public class MyViewModel
{
    [Required]
    public string Name { get; set; }
} 
```

...以及用于创建上述图像的视图...

```
@model Mvc4TestApplication.ViewModels.MyViewModel

Name: @Model.Name
@using (Html.BeginForm())
{
    @Html.LabelFor(model => model.Name)
    @Html.TextBoxFor(model => model.Name)
    <input type="submit" value="Submit"/>
} 
```

似乎我误解了 MVC 视图发现其模型数据的方式。我应该使用一些替代语法来明确告诉视图将其表单控件绑定到传递给它的视图模型吗？

谢谢，

蒂姆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:30:33.937

尝试清除 ModelState。htmlhelpers 使用 ModelState 来获取值。

```
ModelState.Clear(); 
```

在返回 View() 之前

# asp.net-mvc - 为什么 Visual Studio 不会在发布时移动某些文件？

> ID：13340687
> 
> 赞同：7
> 
> 时间：2012-11-12T08:54:13.447
> 
> 标签：asp.net-mvc, visual-studio-2010, publish

当我尝试发布我的项目时，Visual Studio 不会将某些文件移动到目标发布文件夹。目前我对文件有这个问题`.json`。我正在使用 Visual Studio 2010 和 MVC4。

是否有关于应该发布哪些文件或 mime 类型并将其移动到目标文件夹的任何配置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T09:16:51.380

当您想要 Visual Studio 将文件移动到目标发布文件夹时，在解决方案资源管理器中单击文件并选择属性，然后将生成操作设置为内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:56:29.623

您可以在 Visual Studio 中设置文件的**复制到输出目录**属性。单击文件名，按`F4`打开属性，然后设置`Copy to Output Directory`为`Copy always`或`Copy if newer`。

# c# - 如何从 FIFO 队列中返回最新的对象而不删除它

> ID：13340689
> 
> 赞同：1
> 
> 时间：2012-11-12T08:54:24.583
> 
> 标签：c#

`Peek`返回队列开头的对象而不删除它。

如果我想对“队列中的最后一个对象”做同样的事情怎么办。即“最新”的一个（刚刚插入的那个）。

我试过`queue.Reverse().Peek()`了，但这不能编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:59:33.703

尝试以下操作：

```
queue.Last() 
```

`queue.Reverse().Peek()`不起作用，因为`Reverse()`返回的实例`IEnumerable<T>`没有定义`Peek()`方法。

# events - GWT、TextField、Alt-Codes 和获取事件

> ID：13340690
> 
> 赞同：0
> 
> 时间：2012-11-12T08:54:25.757
> 
> 标签：events, gwt

我在使用 GWT 和 TextField 事件时遇到了一些问题。

我想编写一个搜索字段并能够输入丹麦和瑞典名称（即 Ø = alt + 0216 ）并更新应用过滤器/格式化程序并呈现生活结果。

虽然普通的字母和数字使用 keyup-events 可以正常工作，但 alt 组合使它变得非常困难。在这里工作 FF16 似乎在发布 alt*之后绝对没有任何事件。*

有没有办法为 TextField 获取一个简单的 ChangeEvent？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:06:39.317

您可以将 ValueChangeHandler 添加到 TextBox，但它只会在 TextBox 失去焦点时触发。

如果我正确理解您的用例，则释放 ALT 键时您不需要 KeyUpEvent 。您需要知道在释放另一个键时是否按下了 ALT 键。本机浏览器事件有一个标志：event.altKey。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:45:03.190

没有自己尝试。我认为它应该使用[public void addListener(FieldListener listener)](http://gwt-ext.com/docs/2.0.4/com/gwtext/client/widgets/form/Field.html#addListener%28com.gwtext.client.widgets.form.event.FieldListener%29)工作。

[FieldListener](http://gwt-ext.com/docs/2.0.4/com/gwtext/client/widgets/form/event/FieldListener.html)有_

```
onChange() 
```

和

```
onSpecialKey() 
```

# c++ - VC++ 6显示中文

> ID：13340694
> 
> 赞同：0
> 
> 时间：2012-11-12T08:54:34.810
> 
> 标签：c++, unicode, cjk, chinese-locale

> **可能重复：**
> [在 C++ 中同时显示韩文和中文](https://stackoverflow.com/questions/13301849/display-both-of-korean-and-chinese-language-in-c)

我有一个用VC++ 6构建的游戏的源代码。问题是当我尝试在消息框（在游戏界面中显示的自定义消息框）中显示中文消息时，中文消息总是破碎的。

这是功能：

```
BOOL Message_Box(char * msg, int Button, void (*pProcOK)(), void (*pProcCancel)()){
  CMsgDlg dlg;
  int nCnt = 100;
  int nIndex = 0;
  do {
    nIndex = FindMsgDlg(nCnt);
    if(nIndex == -1)
      break;
    nCnt++;
  } while(true);
  dlg.SetDlg(g_hMainWnd, nCnt, Button, msg, pProcOK, pProcCancel);
  g_vtDlgList.push_back(nCnt);
  g_vtMsgBox.push_back(dlg);
  ShowDlg(dlg.GetIndex());
  return FALSE;
} 
```

我打电话：

```
Message_Box("你没有足够的钱进入房间。", MB_OK); 
```

这是显示在消息框上的结果：

```
??有足?的??入房? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:04:45.097

您应该使用 unicode API 来显示中文字符，也应该将它们存储在 unicode

# sql-server - T-SQL IS NOT NULL vs NOT NULL 性能

> ID：13340702
> 
> 赞同：4
> 
> 时间：2012-11-12T08:55:07.413
> 
> 标签：sql-server, tsql, null, comparison

我已经阅读了很多不使用负运算符（例如*NOT IN*和*NOT EXISTS*）以及如何将逻辑反转为正运算符，例如使用*IN*而不是*NOT IN*可以带来非常好的性能。

无论如何，我对很多 CASE WHEN 运算符和检查一些条件有一个看法。我想知道（我仍然能够找到任何专门针对此的文章、问题或示例）在使用*IS NOT NULL*和*IS NULL*时会产生性能差异吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:06:54.463

两者都可以作为索引查找来执行。

其中一个寻找索引的开头，读取所有行，`NULL`然后在遇到第一个行时停止，`NOT NULL`另一个寻找第一个`NOT NULL`值，然后读取索引的整个其余部分。

除非索引被覆盖，否则在任何一种情况下都不能使用搜索，因为它归结为选择性。如果您有很多`NULL`值，因此`NOT NULL`具有高度选择性，您可能需要考虑[按照此处的示例在](http://technet.microsoft.com/en-us/library/cc280372.aspx)该列上创建过滤索引。

# java - FileOutputStream.getChannel() 可以返回 null 吗？

> ID：13340706
> 
> 赞同：2
> 
> 时间：2012-11-12T08:55:17.173
> 
> 标签：java, fileoutputstream

我正在分析`FileOutputStream`.

方法可以`getChannel()`返回`null`吗？如果有，在什么情况下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:12:30.193

方法`FileOutputStream` `getChannel()`代码

```
 public FileChannel getChannel() {
    synchronized (this) {
        if (channel == null) {
           channel = FileChannelImpl.open(fd, false, true, this, append);

           /*
             * Increment fd's use count. Invoking the channel's close()
            * method will result in decrementing the use count set for
            * the channel.
             */
            fd.incrementAndGetUseCount();
        }
        return channel;
    }
} 
```

调用`FileChannelImpl.open()`并且此代码始终创建一个新对象

```
public static FileChannel open(FileDescriptor fd,
                                boolean readable, boolean writable,
                                Object parent, boolean append)
 {
    return new FileChannelImpl(fd, readable, writable, parent, append);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:09:33.177

```
public FileChannel getChannel() {
    synchronized (this) {
        if (channel == null) {
            channel = FileChannelImpl.open(fd, false, true, append, this);
            fd.incrementAndGetUseCount();
        }
        return channel;
    }
} 
```

显示`null`无法退货。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T09:13:48.690

[看下FileChannelImpl#open](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/nio/ch/FileChannelImpl.java.html)的源码

方法`Open()`
`return new FileChannelImpl(...)`
，所以它创建新的参考，它不能`null`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T09:12:16.180

来自 Java 源代码：

```
 /**
 * Returns the unique {@link java.nio.channels.FileChannel FileChannel}
 * object associated with this file output stream. </p>
 *
 * <p> The initial {@link java.nio.channels.FileChannel#position()
 * </code>position<code>} of the returned channel will be equal to the
 * number of bytes written to the file so far unless this stream is in
 * append mode, in which case it will be equal to the size of the file.
 * Writing bytes to this stream will increment the channel's position
 * accordingly.  Changing the channel's position, either explicitly or by
 * writing, will change this stream's file position.
 *
 * @return  the file channel associated with this file output stream
 *
 * @since 1.4
 * @spec JSR-51
 */
public FileChannel getChannel() {
    synchronized (this) {
        if (channel == null) {
            channel = FileChannelImpl.open(fd, false, true, append, this);

            /*
             * Increment fd's use count. Invoking the channel's close()
             * method will result in decrementing the use count set for
             * the channel.
             */
            fd.incrementAndGetUseCount();
        }
        return channel;
    }
} 
```

所以不能退货`null`。

# asp.net - 如何使用 asp.net 中的菜单控件从数据库创建动态菜单？

> ID：13340709
> 
> 赞同：2
> 
> 时间：2012-11-12T08:55:25.610
> 
> 标签：asp.net, recursion, menu, menuitem

我想从数据库创建一个菜单并在菜单控件中显示。

.aspx 页面中的代码：

```
 <asp:Menu ID="Menu1" Orientation="horizontal" StaticMenuItemStyle-CssClass="menuItem"
                            DynamicMenuItemStyle-CssClass="menuItem" runat="server"> 
```

在 Master 的 .cs 页面中：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {

            populateMenuItem();
        }

    }

    private void populateMenuItem()
    {

        DataTable menuData = GetMenuData();
        AddTopMenuItems(menuData);

    }
    /// Filter the data to get only the rows that have a
    /// null ParentID (This will come on the top-level menu items)

    private void AddTopMenuItems(DataTable menuData)
    {
        DataView view = new DataView(menuData);
        view.RowFilter = "DepartmentParentID IS NULL";
        foreach (DataRowView row in view)
        {
            //MenuItem newMenuItem = new MenuItem(row["DepartmentName"].ToString(), row["DepartmentID"].ToString());
            MenuItem newMenuItem = new MenuItem(row["DepartmentName"].ToString(), row["DepartmentID"].ToString());

            Menu1.Items.Add(newMenuItem);
            AddChildMenuItems(menuData, newMenuItem);
        }

    }
    //This code is used to recursively add child menu items by filtering by ParentID

    private void AddChildMenuItems(DataTable menuData, MenuItem parentMenuItem)
    {
        DataView view = new DataView(menuData);
        view.RowFilter = "DepartmentParentID=" + parentMenuItem.Value;
        foreach (DataRowView row in view)
        {
            MenuItem newMenuItem = new MenuItem(row["DepartmentName"].ToString(), row["DepartmentID"].ToString());
            parentMenuItem.ChildItems.Add(newMenuItem);
            AddChildMenuItems(menuData, newMenuItem);
        }
    }

    private DataTable GetMenuData()
    {
        using (SqlConnection con = new SqlConnection(conStr))
        {

            using (SqlCommand cmd = new SqlCommand("SELECT  DepartmentID,OfficeID,DepartmentName,DepartmentParentID,IsActive,CreatedByID,CreatedDate,LastModifiedByID,LastModifiedDt FROM DepartmentMst", con))
            {
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataTable dt = new DataTable();
                da.Fill(dt);
                return dt;
            }

        }
    } 
```

问题出在 AddTopMenuItems() 方法中，它在 Menu1.Items.Add(newMenuItem); 行显示“对象引用未设置为对象的实例”；不知道为什么？

这是 SQLSERVER2008 DepartmentMst 中的数据：

```
DepartmentID  DepartmentName IsActive   DepartmentParentID
1               HR            1            NULL
2               IT            1            NULL
3            Operations    1                NULL
4            Desktop Engineer 1             2
5           Network Engineer  1             2
6           Employee Salary   1             1 
```

当 DepartmentParentID 为 NULL 时，它是 Main Menu，如果不为 null，则它是 Child 节点，并尊重其 Parent ID。

示例[http://chandradev819.wordpress.com/2011/07/03/how-to-bind-asp-net-menu-control-with-database/](http://chandradev819.wordpress.com/2011/07/03/how-to-bind-asp-net-menu-control-with-database/)

帮助赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:32:33.793

我怀疑您已将菜单控件**放置**在母版页的内容占位符内：

```
<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
            <asp:Menu ID="Menu1" Orientation="horizontal" StaticMenuItemStyle-CssClass="menuItem"
                DynamicMenuItemStyle-CssClass="menuItem" runat="server" />
        </asp:ContentPlaceHolder> 
```

ContentPlaceHolder 控件用于定义母版页的一个区域，该区域可以用与母版页关联的另一个页面的内容替换（显示子页）。

由于菜单将是从母版页继承的所有页面之间的共享控件，只需将菜单移动到内容占位符**之外**的任何位置，您就可以开始了：

```
<asp:Menu ID="Menu1" Orientation="horizontal" StaticMenuItemStyle-CssClass="menuItem"
    DynamicMenuItemStyle-CssClass="menuItem" runat="server" />
<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
</asp:ContentPlaceHolder> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-09T11:39:47.177

```
 **Creating Dynamic CSS Menu From Database SQL Server in ASP.Net Using C#.Net OR create dynamically menu and submenu from database in asp .net**

    <%@ Page Language="C#" AutoEventWireup="true" CodeFile="DynamicCSSMenu.aspx.cs" Inherits="DynamicCSSMenu" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title>Creating Dynamic CSS Menu From Database SQL Server in ASP.Net Using C#.Net/VB.NET
        </title>
        <style type="text/css">
            .ParentMenu
            {
                font-size: small;
                font-family: Tahoma;
                font-weight: bold;
                padding-left: 6px;
                padding-right: 6px;
                text-align: center;
                background-color: #8B008B;
                color: White;
                border: 1px solid black;
            }

            .ParentMenu:hover
            {
                font-family: Tahoma;
                font-weight: bold;
                padding-left: 6px;
                padding-right: 6px;
                text-align: center;
                border: 1px solid black;
                font-size: small;
            }

            .ChildMenu
            {
                background-color: #8B008B;
                font-weight: bold;
                font-family: Tahoma;
                padding-top: 4px;
                padding-bottom: 4px;
                padding-right: 5px;
                padding-left: 5px;
                text-align: left;
                font-size: small;
                color: White;
                border: 1px solid black;
            }
            .ChildMenu:hover
            {
                font-weight: bold;
                font-family: Tahoma;
                padding-top: 4px;
                padding-bottom: 4px;
                padding-right: 6px;
                padding-left: 6px;
                text-align: left;
                font-size: small;
                border: 1px solid black;
                background-color: Black;
            }
        </style>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
            <asp:Menu DynamicSelectedStyle-Font-Italic="true" ID="dynamicMENU" runat="server"
                Orientation="Horizontal" DynamicVerticalOffset="4" OnMenuItemClick="dynamicMENU_MenuItemClick">
                <StaticMenuItemStyle Width="100" CssClass="ParentMenu" />
                <DynamicMenuItemStyle Width="250" CssClass="ChildMenu" />
            </asp:Menu>
        </div>
        </form>
    </body>
    </html>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Configuration;
using System.Data.SqlClient;

public partial class DynamicCSSMenu : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            GetMenu();
        }
    }

    public void GetMenu()
    {
        DataSet dsParentMenu = getPARENTMENU();
        DataRowCollection drcParentMenu = dsParentMenu.Tables[0].Rows;
        DataSet dsChildMenuAll = getCHILDMENU();
        DataTable drcChildMenuAll = dsChildMenuAll.Tables[0];

        MenuItem mainMENUITEM;
        MenuItem childMENUITEM;
        foreach (DataRow drParentMenu in drcParentMenu)
        {
            mainMENUITEM = new MenuItem(drParentMenu["ParentMenu_Name"].ToString());
            dynamicMENU.Items.Add(mainMENUITEM);
            DataRow[] drcChildMenu = drcChildMenuAll.Select("Parent_ID=" + "'" + drParentMenu["ID"].ToString() + "'");
            foreach (DataRow drSUBMENUITEM in drcChildMenu)
            {
                childMENUITEM = new MenuItem(drSUBMENUITEM["ChildMenu_Name"].ToString());
                mainMENUITEM.ChildItems.Add(childMENUITEM);

                childMENUITEM.NavigateUrl = drSUBMENUITEM["ChildMenu_URL"].ToString();
            }
        }
        mainMENUITEM = new MenuItem("Logout");
        dynamicMENU.Items.Add(mainMENUITEM);
    }

    public DataSet getPARENTMENU()
    {
        SqlConnection myConnection = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["con"].ToString());
        string str_query = string.Empty;
        str_query = "SELECT * FROM Parent_Menu";
        SqlDataAdapter daPARENT = new SqlDataAdapter(str_query, myConnection);
        DataSet dsTEMP = new DataSet();
        daPARENT.Fill(dsTEMP, "tablePARENT");
        return dsTEMP;
    }

    public DataSet getCHILDMENU()
    {
        SqlConnection myConnection = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["con"].ToString());
        string str_querychild = string.Empty;
        str_querychild = "SELECT * FROM Child_Menu";
        SqlDataAdapter daCHILD = new SqlDataAdapter(str_querychild, myConnection);
        DataSet dsTEMP = new DataSet();
        daCHILD.Fill(dsTEMP, "tableCHILD");
        return dsTEMP;
    }
    protected void dynamicMENU_MenuItemClick(object sender, MenuEventArgs e)
    {
        Response.Redirect("~/index.aspx");
    }
} 
```

# c# - 允许重音字符可搜索？

> ID：13340712
> 
> 赞同：2
> 
> 时间：2012-11-12T08:55:43.880
> 
> 标签：c#, .net, string, cultureinfo, string-comparison

解决了：

我使用了以下代码：

```
var compareinfo = CultureInfo.CurrentCulture.CompareInfo;
var index = compareinfo.IndexOf(strA, strB, CompareOptions.IgnoreNonSpace | CompareOptions.IgnoreCase);
return index > -1; 
```

> **可能重复：**
> [忽略字符串比较中的重音字母](https://stackoverflow.com/questions/359827/ignoring-accented-letters-in-string-comparison)

我有一个公共信息亭应用程序，用户使用它来搜索感兴趣的地方。假设我有一个带有 Café 字样的商店名称。信息亭只允许通过屏幕键盘输入英文字母。问题是当我输入 Cafe（没有重音 é）时，搜索无效，因为用户无法输入字符 é。我希望应用程序允许普通 e 可以搜索到所有重音 e 并且同样适用于所有其他相应的字符。我怎样才能做到这一点？

编辑：商店名称是“Bruce Café”，我搜索“cafe”，它应该显示在我的搜索结果中。

使用

```
string.Compare("Bruce Café", "cafe", CultureInfo.CurrentCulture, CompareOptions.IgnoreCase | CompareOptions.IgnoreNonSpace) 
```

返回 -1

和

```
string.Compare("Ben-Gurion University (BGU)", "cafe", CultureInfo.CurrentCulture, CompareOptions.IgnoreCase | CompareOptions.IgnoreNonSpace) 
```

也返回 -1

我不知道为什么会这样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:02:37.397

如果您在代码中执行此操作：

```
string.Compare(s1, s2, CultureInfo.CurrentCulture, CompareOptions.IgnoreNonSpace); 
```

如果您在 T-SQL 中执行此操作：

```
SELECT *
FROM YourTable
WHERE
   ColumnName COLLATE Latin1_general_CI_AI Like '%cafe%' COLLATE Latin1_general_CI_AI 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:03:07.297

如果您要进行自己的字符串比较，则可以通过将CompareOptions.IgnoreNonSpace 指定为接受 CompareOptions 参数的字符串比较方法之一来忽略重音，例如[此](http://msdn.microsoft.com/en-us/library/cc190529%28v=vs.100%29.aspx)[String.Compare](http://msdn.microsoft.com/en-us/library/system.globalization.compareoptions%28v=vs.100%29.aspx)

# spring - 在 applicationContext.xml 中找不到 Spring 配置资源

> ID：13340713
> 
> 赞同：0
> 
> 时间：2012-11-12T08:55:46.957
> 
> 标签：spring, web.xml

我的所有 Spring 配置文件都位于 package.json 下`org.huahsin.resources`。以`web.xml`这种方式配置：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath*:/org/huahsin/resources/applicationContext.xml,
               classpath*:/org/huahsin/resources/applicationContext-security.xml
  </param-value>
</context-param>

<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

并且`applicationContext.xml`还包括这样的其他资源：

```
<import resource="init-spring-context.xml "/> 
```

我在运行时遇到了这个错误。有关解决此错误的任何线索？

```
 [ERROR   ] SRVE0283E: Exception caught while initializing context: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from relative location [init-spring-context.xml]
Offending resource: URL [file:/D:/workspace/ProjectA/build/classes/org/huahsin/resources/applicationContext.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from URL [file:/D:/workspace/ProjectA/build/classes/org/huahsin/resources/init-spring-context.xml]; nested exception is java.io.FileNotFoundException: D:\workspace\ProjectA\build\classes\org\huahsin\resources\init-spring-context.xml (The system cannot find the file specified)
    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:201)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:147)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:132)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:92)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1975)
    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:748)
    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:5694)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.createRunnableHandler(DynamicVirtualHost.java:220)
    at com.ibm.ws.http.internal.VirtualHostImpl.discriminate(VirtualHostImpl.java:165)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.ready(HttpDispatcherLink.java:157)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:444)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleNewRequest(HttpInboundLink.java:378)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.processRequest(HttpInboundLink.java:278)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.ready(HttpInboundLink.java:249)
    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:174)
    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:83)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:502)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:550)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:899)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:981)
    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)
    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from URL [file:/D:/workspace/ProjectA/build/classes/org/huahsin/resources/init-spring-context.xml]; nested exception is java.io.FileNotFoundException: D:\workspace\ProjectA\build\classes\org\huahsin\resources\init-spring-context.xml (The system cannot find the file specified)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:349)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:190)
    ... 37 more
Caused by: java.io.FileNotFoundException: D:\workspace\ProjectA\build\classes\org\huahsin\resources\init-spring-context.xml (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at java.io.FileInputStream.<init>(FileInputStream.java:79)
    at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:70)
    at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161)
    at org.springframework.core.io.UrlResource.getInputStream(UrlResource.java:123)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
    ... 39 more

[ERROR   ] SRVE0321E: The [springSecurityFilterChain] filter did not load during start up.
[ERROR   ] SRVE0315E: An execption occurred: com.ibm.ws.webcontainer.webapp.WebAppErrorReport: javax.servlet.ServletException: Filter [springSecurityFilterChain]: could not be initialized
    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:153)
    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:194)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1078)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:4173)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:302)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.handleRequest(DynamicVirtualHost.java:296)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1006)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$1.run(DynamicVirtualHost.java:253)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:457)
    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)
    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.servlet.ServletException: Filter [springSecurityFilterChain]: could not be initialized
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.init(FilterInstanceWrapper.java:156)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager._loadFilter(WebAppFilterManager.java:579)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.loadFilter(WebAppFilterManager.java:480)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.getFilterInstanceWrapper(WebAppFilterManager.java:299)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.getFilterChain(WebAppFilterManager.java:372)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:903)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1036)
    ... 9 more
Caused by: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from relative location [init-spring-context.xml]
Offending resource: URL [file:/D:/workspace/ProjectA/build/classes/org/huahsin/resources/applicationContext.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from URL [file:/D:/workspace/ProjectA/build/classes/org/huahsin/resources/init-spring-context.xml]; nested exception is java.io.FileNotFoundException: D:\workspace\ProjectA\build\classes\org\huahsin\resources\init-spring-context.xml (The system cannot find the file specified)
    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:201)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:147)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:132)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:92)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1975)
    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:748)
    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:5694)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.createRunnableHandler(DynamicVirtualHost.java:220)
    at com.ibm.ws.http.internal.VirtualHostImpl.discriminate(VirtualHostImpl.java:165)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.ready(HttpDispatcherLink.java:157)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:444)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleNewRequest(HttpInboundLink.java:378)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.processRequest(HttpInboundLink.java:278)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.ready(HttpInboundLink.java:249)
    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:174)
    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:83)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:502)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:550)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:899)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:981)
    ... 3 more
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from URL [file:/D:/workspace/ProjectA/build/classes/org/huahsin/resources/init-spring-context.xml]; nested exception is java.io.FileNotFoundException: D:\workspace\ProjectA\build\classes\org\huahsin\resources\init-spring-context.xml (The system cannot find the file specified)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:349)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:190)
    ... 37 more
Caused by: java.io.FileNotFoundException: D:\workspace\ProjectA\build\classes\org\huahsin\resources\init-spring-context.xml (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at java.io.FileInputStream.<init>(FileInputStream.java:79)
    at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:70)
    at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161)
    at org.springframework.core.io.UrlResource.getInputStream(UrlResource.java:123)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T00:47:19.370

回复晚了，请原谅。我已经解决了这个问题。永远不要执行以下代码，因为这不是一个好习惯（我猜）：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath*:/org/huahsin/resources/applicationContext.xml,
               classpath*:/org/huahsin/resources/applicationContext-security.xml
  </param-value>
</context-param> 
```

就我而言，当我将 Spring`org.huahsin.resources`配置文件`resources`定位在. 接下来是修改如下：`source folder``resources``classpath``contextConfigLocation`

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:/applicationContext.xml,
               classpath:/applicationContext-security.xml
  </param-value>
</context-param> 
```

请注意，类路径是从根目录开始的，这是由于`classpath`我在上面设置的。在 ANT 构建期间，这是我在 WAR 任务期间执行的操作，以确保可以从 WebSphere 服务器访问 Spring 配置文件。

```
 <target name="build_war">
    <war destfile="${dist.dir}/theWar.war" webxml="WebContent/WEB-INF/web.xml">
        <classes dir="${build.dir}/classes"/>
        <classes dir="${resource.dir}/spring" includes="**/*.xml"/>
                    ....
                    ....
    </war>
</target> 
```

上述 ANT 构建的输出是所有 Spring 配置文件将放在`theWar.war/WEB-INF/classes`.

我不确定这是否是一个好习惯（但我确实希望如此），至少它解决了我的问题。;)

# java - 尝试从数据库中删除时出错

> ID：13340716
> 
> 赞同：2
> 
> 时间：2012-11-12T08:55:56.907
> 
> 标签：java, hibernate, oracle11g

您好我正在使用 Hibernate 并尝试从我的数据库（Oracle 11g）中删除一些信息我有这样的代码：

```
 Session session = sessionFactory.getCurrentSession();
    session.beginTransaction();
    Query query = session.createQuery(DELETE_NEWS_BY_ID);
    query.setParameterList(ID, Arrays.asList(idList));
    query.executeUpdate();
    session.getTransaction().commit(); 
```

和 DELETE_NEWS_BY_ID 字段如下所示：

```
private static final String DELETE_NEWS_BY_ID = "delete from News where id IN (:idList)"; 
```

当我尝试处理此代码时，IDE 给了我这个：

```
java.lang.ClassCastException: [I cannot be cast to java.lang.Integer
    at org.hibernate.type.descriptor.java.IntegerTypeDescriptor.unwrap(IntegerTypeDescriptor.java:36)
    at org.hibernate.type.descriptor.sql.IntegerTypeDescriptor$1.doBind(IntegerTypeDescriptor.java:57)
    at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:92)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:280)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:275)
    at org.hibernate.param.NamedParameterSpecification.bind(NamedParameterSpecification.java:66)
    at org.hibernate.hql.internal.ast.exec.BasicExecutor.execute(BasicExecutor.java:95)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.executeUpdate(QueryTranslatorImpl.java:413)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performExecuteUpdate(HQLQueryPlan.java:282)
    at org.hibernate.internal.SessionImpl.executeUpdate(SessionImpl.java:1267)
    at org.hibernate.internal.QueryImpl.executeUpdate(QueryImpl.java:116)
    at com.epam.newsmanagement.dao.HibernateNewsDao.deleteNewsById(HibernateNewsDao.java:61)
    at com.epam.newsmanagement.action.NewsAction.delete(NewsAction.java:155) 
```

我不知道什么是我`I cannot be cast to java.lang.Integer`什么是我`I`

请帮忙

**更新**

idList 它是 int[] idList

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:28:33.590

我觉得您的问题出在 Arrays.asList(idList) 调用中。看看这个帖子：

[Arrays.asList() 不能正常工作？](https://stackoverflow.com/questions/1467913/arrays-aslist-not-working-as-it-should)

似乎 asList 方法不适用于原始类型（您报告的 int ），这可能是您的 Cast 异常问题的原因。

将 idList 形式 int 更改为 Integer：

整数 []idList;

然后再试一次。祝你好运。

# regex - JSON数字正则表达式

> ID：13340717
> 
> 赞同：13
> 
> 时间：2012-11-12T08:56:02.537
> 
> 标签：regex, json

我正在尝试为 JSON 中的数字字符串编写正则表达式。我对编写正则表达式还是新手，我在[这里](http://www.json.org/)找到了一个 JSON 数字的机器图，但我不知道如何攻击它。

以下是正则表达式应该找到的一些字符串。"22", "55.75466", "-44.565" "55e-2" "69234.2423432 E78" 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-12T09:04:35.393

作为参考，这是来自[http://www.json.org/fatfree.html](http://www.json.org/fatfree.html)的“数字”图：

![JSON 编号](../Images/20ad3ba8c17b560b11076a7062a20fcf.png)

应该匹配的正则表达式是：

```
-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-29T02:09:13.270

基于[Andrew Cheong](https://stackoverflow.com/users/925913/andrew-cheong)的好[答案](https://stackoverflow.com/a/13340826/3697870)，这里有一个兼容**Bash的版本。**细微的差异需要一段时间才能变得恰到好处。

```
-?(0|[1-9][[:digit:]]*)(\.[[:digit:]]+)?([eE][+-]?[[:digit:]]+)? 
```

最后，差异只是替换子句中的`\d`替换`[[:digit:]]`和`?:`删除。

这是一个脚本，您可以将其粘贴到 Bash shell 中以验证其性能。正则表达式被包围`^`并`$`分别匹配行的开始和结束，以检查杂散的尾随或前导字符。

```
while read line; do
    if [[ $line =~ ^-?(0|[1-9][[:digit:]]*)(\.[[:digit:]]+)?([eE][+-]?[[:digit:]]+)?$ ]]
    then
        echo "$line is a number"
    else 
        echo "$line NOT a number"
    fi
done << END
1
-1
a
1a
a1
-1.0
1.
.0
.
-.0
+
+0
+.0
22
55.75466
-44.565
55e-2
69234.2423432 E78
69234.2423432E78
-
0123
END 
```

在 Bash 4.4.12 中，我得到：

```
1 is a number
-1 is a number
a NOT a number
1a NOT a number
a1 NOT a number
-1.0 is a number
1\. NOT a number
.0 NOT a number
. NOT a number
-.0 NOT a number
+ NOT a number
+0 NOT a number
+.0 NOT a number
22 is a number
55.75466 is a number
-44.565 is a number
55e-2 is a number
69234.2423432 E78 NOT a number
69234.2423432E78 is a number
- NOT a number
0123 NOT a number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:18:56.027

acheong87 的答案应该提供您需要的正则表达式。但是，如果您只是想检查通过 JSON 返回的字符串是否“是一个数字”，那么您可以这样做：

```
var valueAsString = "55e-2";
var isANumber = !isNaN(valueAsString); 
```

# android - android webview jquery mobile pageshow在导航返回时未触发

> ID：13340718
> 
> 赞同：0
> 
> 时间：2012-11-12T08:56:03.560
> 
> 标签：android, web-applications, jquery-mobile

Android WebView 中发生了一件奇怪的事情。页面显示仅在第一次加载页面时触发一次。然后如果我导航到另一个 jquery 移动页面然后导航回来。页面显示不会被调用。Windows手机上的Firefox，Chrome，IE和IE9的桌面版，一切正常，它们都调用页面显示，每当页面显示时，除了android Webview我做错了什么吗？

我在 Android 2.3 Emulator 上使用 webview

```
$(document).off('pageshow', '#HomePage');
$(document).on('pageshow', '#HomePage', getMessage);
function getMessage(evt) {
alert("hi");
} 
```

我使用了 webview.setWebChromeClient ，它可以很好地显示其他警报。

# android - 如何在 Android 中通过触摸在运行时拉伸（添加弹性）图像

> ID：13340719
> 
> 赞同：-2
> 
> 时间：2012-11-12T08:56:19.400
> 
> 标签：android, andengine, game-engine, game-physics

我是 Android 游戏开发的新手，我正在使用**Andengine**进行游戏开发。我想`stretch`通过触摸图像来获得图像。

请注意，我只想拉伸被触摸的图像部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:49:55.450

Sprite 可以在 x 和/或 y 维度上缩放。在您的 onAreaTouched 回调中执行此操作。这就是问题的简单解决方案，特别感谢大家的帮助 正宗白布鞋</p>

# objective-c - self.variableName 和 _variableName 之间的区别

> ID：13340720
> 
> 赞同：1
> 
> 时间：2012-11-12T08:56:22.523
> 
> 标签：objective-c, memory-management, cocos2d-iphone, dealloc

我有这样的代码：

# 我的类.h

```
@interface MyClass : CCLayer {

}

@property (nonatomic, retain) CCSprite *spriteName;  //retain count = 1
@property (nonatomic, retain) CustomClass *customVariable; //retain count = 1

@end 
```

# 我的班级.m

```
@implementation MyClass
@synthesize spriteName;
@synthesize customVariable;

//rough init method
-(void)init 
{
    self.spriteName = [CCSprite spriteWithFileName:@"a.png"]; //retain count = same
    self.customVariable = [[CustomClass alloc] init]; //retain count = 2
}

-(void)dealloc
{
    [self.spriteName release]; //retain count = 0
    self.spriteName = nil;

    [self.customVariable release]; //retain count = 1?
    self.customVariable = nil;

    [super dealloc];
} 
```

我对此有一些疑问：

1) 我有一个 CCSprite，我已经将它做成了一个属性，但是当我将它分配给 时`[CCSprite spriteWithFileName:@"a.png"]`，它是一个自动释放的对象。但是因为我有`@property (nonatomic, retain) CCSprite *spriteName`，我必须释放它是吗？

2）对于我的customVariable，以上述方式释放它时似乎出现错误，但是当我将它们更改为下划线时`[_customVariable release]; _customVariable = nil`，我没有收到错误。为什么会这样，两者有什么区别？

3）我释放这些对象对吗？我在保留计数中发表了评论，我认为我无法理解。如果有分配或保留，我知道基本知识，那么我应该 +1，但在属性方面我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:16:19.533

因此，对这些 iVar 的完整处理如下。编译器会像这样默默地处理您的代码：

```
@interface MyClass : CCLayer {
    CCSprite *_spriteName;
}

@property (nonatomic,readwrite, retain) CCSprite *spriteName;  //retain count = 1

@end

@implementation MyClass
@synthesize spriteName=_spriteName;

@end 
```

在您的代码中，“readwrite”和 iVar 的名称是隐式的 (_spriteName)，编译器会生成相应的代码。但是，您可以使用不同名称的 iVar 来指向实际的 CCSprite。使用 self.spriteName 语义，编译器在后台转换（自动生成）代码。在您的示例中，编译器为“self.spriteName”（合成）生成了一个 setter 和一个 getter，如下所示：

```
-(void) setSpriteName:(CCSprite*) theSpriteName {
   // this setter can be quite tricky depending on the @property clause 
   // but for this example, a simplified setter :

    [_spriteName autorelease];  
    _spriteName = [theSpriteName retain]; 

}
-(CCSprite*) spriteName {
    return _spriteName;
} 
```

因此，当您使用 self.spriteName 时，根据上下文（lhs 或 rhs），会调用适当的“隐藏”例程。所以这条线

```
self.spriteName = [CCSprite spriteWithFileName:@"a.png"]; 
```

实际上调用上面生成的设置器（setSpriteName）。反过来

```
CCSprite *tempSprite = self.spriteName; 
```

调用生成的 getter。您始终可以自由使用“基础”iVar。

```
CCSprite *otherTempSprite = _spriteName; // exactly the same. 
```

但是，在更改 _spriteName 的内容或更改其生命周期时要非常谨慎，因为您可能会意外地造成泄漏或僵尸，直到您完全了解其内部结构。在 dealloc 中，使用

```
[_spriteName release]; // in dealloc, release immediately. 
```

或者

```
self.spriteName=nil;   // will invoke the setter above, and the 
                       //   actual release could be delayed 
```

最后，回到您的 customVariable 问题。你的代码实际上变成了

```
[_customVariable release];  // retain count is 0 !!! 
[self setCustomVariable:nil]; 

which when called will execute :

[_customVariable autorelease]; // bad access : message sent to a deallocated variable 
_customVariable=nil; 
```

# iphone - 如何在 iphone 的 UITableView 的两个不同部分中将两种颜色设置为备用行

> ID：13340722
> 
> 赞同：0
> 
> 时间：2012-11-12T08:56:31.170
> 
> 标签：iphone, tableview

我有`UITableView`两个部分，部分`0`包含`1`行，部分 1 包含两行。我的问题如何将两种颜色设置为替代行。我尝试了休闲方式，但`section0`第一行和`section1`第一行显示相同的颜色。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

static NSString *cellIdentifier=@"cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell==nil)
    {
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
 if(indexPath.row%2==0)
    {
        cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Light.png"]];

    }
    else
    {
        cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Dark.png"]];

    }
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:14:02.697

使用 tableView:willDisplayCell: 并在那里设置背景颜色/图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:23:02.147

希望这可以帮助...

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *cellIdentifier=@"cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell==nil)
    {
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    int cellCount = 0;
    for(int sections=0;sections<indexPath.section;sections++)
    {
        cellCount = cellCount+[self tableView:self.tableView numberOfRowsInSection:sections];
    }
    cellCount = cellCount + indexPath.row
    if(cellCount%2==0)
    {
        cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Light.png"]];
    }
    else
    {
        cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Dark.png"]];
    }

return cell;
} 
```

# sql-server-ce - 更改 SDF 数据库文件的密码 (SQL Server Compact 4.0)

> ID：13340725
> 
> 赞同：0
> 
> 时间：2012-11-12T08:57:13.317
> 
> 标签：sql-server-ce, sql-server-ce-4

我想更改我的 SQL Server Compact 4.0 数据库的密码。这可能在 Visual Studio 2010（Ultimate，SP1）之外吗？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T20:19:39.943

VS 2012 Professional 中的屏幕截图：

![服务器资源管理器 > 数据库属性](../Images/22d8c0657b4b810c38f23e843e9efcf5.png)

![数据库属性 > 设置密码](../Images/a3559be3218662c648ca0c5276a06192.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:12:27.070

好的，只要我在这里发布问题，我就找到了解决方案。首先在 Visual Studio 的服务器资源管理器中右键单击 .sdf 文件并选择数据库属性。

![在此处输入图像描述](../Images/72fd1d083df08b15443ea03819b7fa2c.png)

在新对话框中可以更改密码：

![在此处输入图像描述](../Images/9ed0c1edd97b031dd77b9874f180aeb9.png)

# c# - 参数异常：参数字典包含非可空类型参数的空条目

> ID：13340727
> 
> 赞同：0
> 
> 时间：2012-11-12T08:57:21.430
> 
> 标签：c#, javascript, jquery

我收到一个用户的错误报告，告诉我在这个方法上发生了一个错误：

```
public string SaveItem(int item_id,
                       string item_name,
                       int item_temp,
                       string item_number)
    {...} 
```

错误是针对“item_temp”参数的。

所以这个参数被称为null。但这是我在 ajax 调用中在 jquery 中填充此参数的方式：

```
item_temp: ($('#myTextBox').val().length > 0 ? parseInt($('#myTextBox').val()) : -99999999), 
```

它怎么能被称为null？

# c# - 在当前目录/项目而不是根目录中制作 ajax 调用控制器

> ID：13340730
> 
> 赞同：0
> 
> 时间：2012-11-12T08:57:40.670
> 
> 标签：c#, .net, ajax, asp.net-mvc, visual-studio-2010

我有一个项目，我们将其命名为 App1。在网络服务器上，我在“App1”内创建了另一个应用程序，我们将其命名为 App2。问题是在 App2 内部，我正在调用“RegisterData”方法，但它在 App1 文件夹 HomeController 中查找，而不是在 App2 的 HomeController 中，因此抛出在 App1 中找不到 RegisterData 的异常。如何让它在当前文件夹/项目 Homecontroller 而不是 root 中显示？

```
 $.ajax({
             async: "false",
             url: 'Home/RegisterData/',
             data: JSON.stringify(data),
             type: 'POST',
             dataType: 'json',
             contentType: 'application/json; charset=utf-8;',
             success: function (response) {

             },
             error: function (response) {

             }
         }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T12:27:04.547

我改用 Url.Content 并解决了问题。

# c# - 找不到实体框架 4 注释

> ID：13340733
> 
> 赞同：4
> 
> 时间：2012-11-12T08:57:47.563
> 
> 标签：c#, .net, entity-framework, entity-framework-4, annotations

我正在尝试使用注释将 POCO 类映射到我的数据库表。我需要使用`Table`注释来指定我的表的名称，但我无法解析`Table`注释。

注意：我导入`System.Data.Entity`了命名空间，但它不起作用。

我必须导入哪个命名空间才能使用 EF 注释？

**注 1** 我的意思是：

```
[Table("my_table")]
public class MyClass
{
    // ...
} 
```

**注意 2**我的实体框架 dll 是 v4.0.30319

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T09:01:43.167

您应该导入[`System.ComponentModel.DataAnnotations`](http://msdn.microsoft.com/en-us/library/cc490428.aspx)命名空间。

编辑 .net 4.5 和 EF 5.0：你应该使用`System.ComponentModel.DataAnnotations.Schema.Table`Attribute

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:22:29.250

> 我需要使用`Table`注释

您需要导入[System.Data.Linq](http://msdn.microsoft.com/en-us/library/bb515105.aspx)库，可以从命名空间中引用[TableAttribute](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.tableattribute.aspx)`System.Data.Linq.Mapping`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T13:27:30.213

```
using System.ComponentModel; 
```

和

```
[DisplayName("My friendly table name")] 
```

足以使其与 EF 5/6 和 .Net 4.5 一起使用，这些版本不需要*System.ComponentModel.DataAnnotations*命名空间或*System.Data.Linq*。

# windows - FindBoost.cmake：使用不同的编译器版本（vc90 而不是 vc100）

> ID：13340735
> 
> 赞同：2
> 
> 时间：2012-11-12T08:57:57.877
> 
> 标签：windows, boost, cmake, vc90

我正在使用带有`MSVC90`编译器的 Visual Studio 2010。因此，我只安装了 Boost `VC90`。

现在我有一个第三方组件，它依赖于 Boost 并且我想使用它。这个组件构建系统是 CMake。

当我尝试从给定的 CMake 脚本生成 Visual Studio 解决方案时，我遇到了 FindBoost.cmake 的问题。似乎 CMake 猜测我的编译器是`VC100`因为我安装了 Visual Studio 2010。我找不到 CMake-Variable 或类似的东西来手动将编译器设置为`VC90`.

我已经尝试过使用变量`CMAKE_CXX_COMPILER`，`BOOST_COMPILER`但没有成功。

有没有一种我没有找到让 FindBoost.cmake 搜索`VC90`库而不是`VC100`库的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:47:17.457

有一个 CMake 变量，称为`BOOST_COMPILER`. 将此变量设置为`-vc90`

# php - 在php中获取当前IST时间

> ID：13340737
> 
> 赞同：23
> 
> 时间：2012-11-12T08:58:10.287
> 
> 标签：php

我正在使用以下代码来获取当前的 IST 时间。但它只给了系统时间。由于某种原因，我更改了系统时间。所以我只得到系统时间而不是当前时间。

```
$time_now=mktime(date('h')+5,date('i')+30,date('s'));
$date = date('d-m-Y H:i', $time_now);
echo $date; 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-12T09:08:21.903

正确设置您的系统时间，以便您的系统知道其正确的时区和那里的正确时间。在 PHP 中，设置您想要的时区，然后打印日期：

```
date_default_timezone_set('Asia/Kolkata');
echo date('d-m-Y H:i'); 
```

除非您确切知道自己在做什么，否则不要进行手动偏移计算，这太善变了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-12T07:20:18.637

在 PHP 中获取准确的当前印度时间

```
$date = date_default_timezone_set('Asia/Kolkata');

//If you want Day,Date with time AM/PM
echo $today = date("F j, Y, g:i a T");

//Get Only Current Time 00:00 AM / PM 
echo $today = date("g:i a"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-12T12:35:03.453

使用给出当前时间的**now()**方法。

$query = "UPDATE (表名) SET (列) = **now()** WHERE (条件)";

**注意**：*确保数据库中列的类型必须是* **DATETIME** *类型。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T09:09:09.440

要获取用户当前时间，您将需要 javascript。如果您想在页面上设置默认时区，您可以使用`date_default_timezone_set`

您可以阅读以下内容：[这里](http://il1.php.net/manual/es/function.date-default-timezone-set.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T09:35:08.097

使用`date_default_timezone_set`：

```
if (function_exists('date_default_timezone_set'))
{
  date_default_timezone_set('Asia/Kolkata');
}

echo date('Y-m-d h-i-s'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-13T08:06:45.743

**注意：** `date_default_timezone_set()` : 时区 ID`'Asia/Mumbai'`在`D:\Program Files\wamp\www\PHP\...`

仅`date_default_timezone_set('Asia/Kolkata')`在 PHP 5.4.16 Ver 中显示有效:) :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-12T12:54:26.187

```
// set the timezone first
if(function_exists('date_default_timezone_set')) {
    date_default_timezone_set("Asia/Kolkata");
}

$date = date("m/d/Y");
echo $date; 
```

在添加日期函数之前，首先使用时区声明。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-03-16T10:47:23.017

正确设置您的系统时间，以便您的系统知道其正确的时区和那里的正确时间。在 PHP 中，设置您想要的时区，然后打印日期：

date_default_timezone_set('亚洲/加尔各答'); 回显日期（'dmY H:i'）；

# jquery - $(window).scroll 上的动画反应时间慢

> ID：13340738
> 
> 赞同：0
> 
> 时间：2012-11-12T08:58:12.643
> 
> 标签：jquery, animation, scroll, scrolltop

这是一个[例子](http://bramvanroy.be/webdevs/)。当您向下滚动时，导航栏会变成动画。当您滚动回顶部时，它应该动画回来。不幸的是，这发生**得非常**缓慢。这可能与每次滚动都必须检查和计算坐标这一事实有关。

换句话说，我正在寻找一种方法来使这个片段更有效：

```
$(window).scroll(function(){
    var supra = $("div#supra-top-wrap"),
        topWrap = supra.children("div#top-wrap"),
        subNav = supra.children("nav#sub-nav");

    if ($(window).scrollTop() > 0){
        topWrap.animate({"top":"-38px"}, 400);
        subNav.animate({"top":"-70px"}, 400);
    }
    else {
        topWrap.animate({"top":"0"}, 400, function() {
            subNav.animate({"top":"0"}, 400);
        });
    }
}); 
```

哦，这里有一个[Fiddle](http://jsfiddle.net/BramVanroy/FrcjR/)可以让你随心所欲。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:27:52.930

我认为这是一个简单的动画排队案例，所以它们只有在之前的动画完成后才会执行，所以大约在 400 毫秒之后。尝试添加 stop()，如下所示：

```
topWrap.stop().animate(...)
subNav.stop().animate(...) 
```

这应该会停止任何正在运行的动画并立即开始新的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T11:31:09.743

我尝试了其他方法 - 这有助于动画更快地做出反应，但仍然不如 .stop() @EvidentAgenda 提到的那么有效。我已经比较了动画字符串并检查它是否相同/如果不是那么我们触发动画

```
var tt = {'top': 0}; // Animation string
$(window).scroll(function(){
  var scroll = $(window).scrollTop();
  if(scroll > h) { var tt2 = {'top': 0}; }
  else { var tt2 = {'top': FHh*-1}; }
  //FHh is global var that is Div's height
  if(tt2 != tt) {
    $('#fixedHeader').stop().animate(tt2, 150);
    // can use together with .stop() - which even more faster
    tt = tt2;
  }
}); 
```

# java - Quartz 调度器 Crontrigger 格式

> ID：13340739
> 
> 赞同：1
> 
> 时间：2012-11-12T08:58:16.047
> 
> 标签：java, quartz-scheduler, crontrigger

我真的对 crontrigger 的格式感到困惑

[http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/crontrigger](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/crontrigger)

我已经创建自己的格式几个小时但无济于事:(

已编辑*

我需要的是根据特定日期每 10 个月触发一次。

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:37:52.757

cron 语法太有限，无法支持“*每 10 个月*”语义，因为 10 不是 12 的偶数（您可以使用 cron 轻松地表示每 2、3、4 或 6 个月）。

你需要的是一个[`CalendarIntervalTrigger`](http://quartz-scheduler.org/api/2.1.5/org/quartz/CalendarIntervalTrigger.html)：

> 这个触发器可以实现不可能的计划`SimpleTrigger`（例如，因为月份不是固定的秒数）或`CronTrigger`（例如，因为“*每 5 个月*”不是 12 的偶数除数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T10:06:02.703

A cron expression is a string comprised of 6 or 7 fields separated by white space [quartz-scheduler.org](http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html). Fields can contain any of the allowed values, along with various combinations of the allowed special characters for that field. The fields are as follows:

```
S.NO.  |   Field Name   |   Mandatory   |  Allowed Values   |  Special Characters 
 1\.    |   Seconds      |     YES       |  0-59             |    , - * /
 2\.    |   Minutes      |     YES       |  0-59             |    , - * /
 3\.    |   Hours        |     YES       |  0-23             |    , - * /
 4\.    |   Day of month |     YES       |  1-31             |    , - * ? / L W
 5\.    |   Month        |     YES       |  1-12 or JAN-DEC  |    , - * /
 6\.    |   Day of week  |     YES       |  1-7 or SUN-SAT   |    , - * ? / L #
 7\.    |   Year         |      NO       |  empty            |    , 1970-2099 - * / 
```

I used [cronguru](https://crontab.guru/) for creating my own cron expression.

# html - ie9 html选择选项不显示长文本

> ID：13340741
> 
> 赞同：0
> 
> 时间：2012-11-12T08:58:19.670
> 
> 标签：html, internet-explorer, select

我在 ie9 上的 html 选择有这个问题（浏览器模式：兼容性视图和文档模式：ie7 标准）。

```
<select ...>
   <option title="test1">test1</option>
   <option title="test2">test2</option>
   <option title="longer text....more than 255">longer text....more than 255</option>
</select> 
```

在 ie7 中显示了选项以及更长的文本……但在 ie9 中，问题是下拉菜单不再起作用（它不显示选项）。它只显示第一项。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:50:30.507

我会建议你两个选择：

1.  使用向下拉列表添加波纹管属性，即使在加载页面时未显示完整的文本，您也可以使用工具提示显示完整的消息。 **工具提示="你的字符串"**

2.  将下拉菜单的宽度设置为其最大长度，据我所知，它将是 256。（但它不会很好，b 'cz 它会反映你的 GUI）

# css - HTML5: How to specify the width of a file input?

> ID：13340747
> 
> 赞同：13
> 
> 时间：2012-11-12T08:58:46.247
> 
> 标签：css, html

The W3C validator says: "Attribute size not allowed on element input at this point."

```
<input type="file" name="foo" size="40" /> 
```

What is the correct way to specify the width of a file input in HTML5?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T09:07:20.530

In the input field use the style attribute, this allow you to use css.

`<input type="file" name="foo" style="width: 40px" />`

Or with separate css:

```
input[name="foo"] {
  width: 40px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T09:06:10.367

In your css file, specify the width as such:

```
input[type=file] { width: 300px; border: 2px solid red; } 
```

[http://jsfiddle.net/VbTAV/](http://jsfiddle.net/VbTAV/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-12T09:01:48.350

```
<form  class="upload-form">
    <input class="upload-file" data-max-size="2048" type="file" >
    <input type=submit>
</form>
<script>
$(function(){
    var fileInput = $('.upload-file');
    var maxSize = fileInput.data('max-size');
    $('.upload-form').submit(function(e){
        if(fileInput.get(0).files.length){
            var fileSize = fileInput.get(0).files[0].size; // in bytes
            if(fileSize>maxSize){
                alert('file size is more then' + maxSize + ' bytes');
                return false;
            }else{
                alert('file size is correct- '+fileSize+' bytes');
            }
        }else{
            alert('choose file, please');
            return false;
        }
    });
});
</script> 
```

[http://jsfiddle.net/9bhcB/2/](http://jsfiddle.net/9bhcB/2/)

# phpexcel - PHPExcel阅读专栏

> ID：13340753
> 
> 赞同：1
> 
> 时间：2012-11-12T08:59:30.727
> 
> 标签：phpexcel

我是使用 PHPExcel 的新手，并且正在努力实现一个基本的阅读器，该阅读器可用于仅读取指定的列，将电子表格中的所有行放入一个数组中，我想在网页中呈现。

在阅读了提供的文档和示例之后，我正在努力解决一些示例的实现，因此非常感谢任何帮助。

我正在使用以下代码将默认工作表的内容放入数组中：

```
for ($row = 2; $row <= $highestRow; $row++) {
    $dataRow = $objWorksheet->rangeToArray('A'.$row.':'.$highestColumn.$row,null, true, true, true);

    if ((isset($dataRow[$row]['A'])) && ($dataRow[$row]['A'] > '')) {
        ++$r;
        foreach($headingsArray as $columnKey => $columnHeading) {
            $columnHeading = rtrim($columnHeading);
            $columnHeading = preg_replace('/\s+/', ' ',$columnHeading);
            $columnHeading = preg_replace('/\ /', '_',$columnHeading);
            $columnHeading = strtolower($columnHeading);
            $namedDataArray[$r][$columnHeading] = $dataRow[$row][$columnKey];
       }
    }
} 
```

上面的代码读取了所有的列和行以及构建和数组，但我希望能够添加一个配置数组，该数组将声明应该读取的列......确保这是可能的，所以任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T20:01:29.443

在此处的 PHPExcel 论坛下找到了一些解决方案的提示：http: [//phpexcel.codeplex.com/discussions/266895](http://phpexcel.codeplex.com/discussions/266895)

# c# - TransactionScope 产生 System.Transactions.TransactionException

> ID：13340758
> 
> 赞同：0
> 
> 时间：2012-11-12T08:59:48.477
> 
> 标签：c#, mysql, transactionscope

我有一个数据库类，其方法如下所示。两者`foo`和`bar`都是全有或全无的操作。因此需要交易。请注意，我将`MySQL`5.5.21 与`MySQL .NET Connector 6.6.4`.

```
public void foo()
{
    using (var transaction = new TransactionScope())
    {
        // This call yields a 'System.Transactions.TransactionException'
        bar();

        insertStuff();

        transaction.Complete();
    }
}

public void bar()
{
    using (var transaction = new TransactionScope())
    {
        insertStuff();
        insertStuff();

        transaction.Complete();
    }
}

private void insertStuff()
{
    using (var connection = CreateConnection()) // Using the same connection string!
    {
        connection.ConnectionString = ConnectionString;
        connection.Open();
    }
} 
```

我确实尝试`TransactionScopeOption.RequiresNew`在构造函数中指定，但没有帮助。我还尝试在每个事务范围之前显式打开一个连接，但仍然没有成功。

**我想要的是这样的：**

*   如果我一个`bar`人打电话，应该有*一笔*交易。
*   如果我打电话`foo`（反过来打电话`bar`），应该有*一笔*交易。

**问：**我是否面临限制`MySQL .NET Connector`或我做错了什么？

**编辑：**确切的错误是：*该操作对事务状态无效。* 所以，一旦我调用`Open()`连接，交易就会退出......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:07:08.303

最有可能的是，您正在打开 2 个或更多与数据库的连接，并且在事务范围内，MSDTC 被调用。通常，如果您想要一个事务，您将创建连接，然后将其传递给每个操作。这将确保您始终在同一连接上进行更改。如果您有 2 个连接，则必须协调每个连接上的更改。

但是，如果您提供更多异常消息，则可能会更清楚原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:22:52.027

使用 bar 如图所示：

```
public void bar()
{
        insertStuff();
        insertStuff();
} 
```

工作吗？

为获得最佳实践，您可以使用 IDbConnection.BeginTransaction() 创建事务，因为事务是连接范围的。

```
public void foo()
{
    using(IDbConnection connection = new MySqlConnection(/*connection string*/))
    {
        connection.Open();
        using(IDbTransction transaction = connection.BeginTransaction())
        {
            bar(connection);
            insertStuff(connection);

            transaction.Commit();
        }

    }
}

public void bar(IDbConnection connection)
{
        insertStuff(connection);
        insertStuff(connection);
}

private void insertStuff(IDbConnection connection)
{
     // do stuff
} 
```

# html - Chrome html-video invisible start playing until I scroll the page

> ID：13340763
> 
> 赞同：0
> 
> 时间：2012-11-12T09:00:06.887
> 
> 标签：html, html5-video

I have built a site trying to play a video as a big background image.The element is invisible until i start scrolling. I have no javascript.

```
<!DOCTYPE html>

<video class="background_video" poster="video/rain.jpg" autoplay muted="true" preload="auto" >
  <source type="video/mp4" src="video/rain.mp4">
  <source type="video/ogv" src="video/rain.ogv">
  <source type="video/webm" src="video/rain.webm">
</video> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T13:24:08.237

Seems to be a bug with chrome and use of the poster-attribute. Found the js in the reply on this one do the trick.

[video disappears when poster attribute and preload is defined](https://stackoverflow.com/questions/13492198/video-disappears-when-poster-attribute-and-preload-is-defined/17216002#17216002)

# ruby-on-rails-3 - Rails 嵌套表单 (simple_form_for) 帮助 has_many belongs_to 关联

> ID：13340768
> 
> 赞同：0
> 
> 时间：2012-11-12T09:00:27.013
> 
> 标签：ruby-on-rails-3, simple-form

我正在使用多态关系，因为我有 3 个这样的模型：

```
class Food < ActiveRecord::Base
   has_many :images, as: :imageable, foreign_key: :imageable_uuid, dependent: :destroy
   accepts_nested_attributes_for :images, :allow_destroy => true
end
class MenuPhoto < ActiveRecord::Base
   has_one :image, as: :imageable, foreign_key: :imageable_uuid, dependent: :destroy
   accepts_nested_attributes_for :image
end
class Image < ActiveRecord::Base
   belongs_to :imageable, foreign_key: :imageable_uuid, :polymorphic => true
end 
```

所以在我的“菜单照片表格”中，我是这样写的：

```
= simple_form_for @menu_photo do |f|
    = f.simple_fields_for :image_attributes do |d|
        = d.input :photo, as: :file 
        = f.submit 
```

当我提交此表格时，它给了我这样的信息：

```
{"menu_photo"=>{
    "image_attributes"=>
        {"photo"=>"user image upload"}
     }
} 
```

它是正确的。所以在“食物形式”中我也这样做：

```
= simple_form_for @food do |f|
    = f.simple_fields_for :images_attributes do |d|
        = d.input :photo, as: :file 
        = f.submit 
```

我的期望：

```
{"food"=>{
    "images_attributes"=>[
        {"photo"=>"user image upload one"}, 
        {"photo"=>"user image upload two"}
    ]}
} 
```

我得到了什么：

```
{"food"=>{
    "images_attributes"=>
        {"photo"=>"user image upload one"}
     }
} 
```

这给了我一个错误。关于这个有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:06:26.013

如果您定义了`has_many`关联：

```
has_many :images 
```

`has_many`关联将添加一些方法来帮助您构建和创建对象：

```
collection.build(attributes = {}, …)
collection.create(attributes = {}) 
```

`collection`这里是`images`。你可以在这里阅读更多[has_many](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)

当您定义`has_one`关联时：

```
has_one :image 
```

`has_one`关联将添加一些方法来帮助您构建和创建对象：

```
build_association(attributes = {})
create_association(attributes = {}) 
```

`create_association`这里是`image`。你可以在这里阅读更多[has_one](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)。

因此，您将有不同的方式来创建与`has_many`和关联的新对象`has_one`。

# javascript - 属性“addEvent”的值为 null 或未定义，不是 Function 对象

> ID：13340769
> 
> 赞同：0
> 
> 时间：2012-11-12T09:00:28.317
> 
> 标签：javascript, css, dom-events, moodle, curvycorners

我正在尝试在 IE7 和 8 的 Moodle 主题中添加圆角边框，并且我正在使用 JavaScript curvycorners.js 脚本来执行此操作。我在脚本中添加了以下代码：-

```
<html <?php echo $OUTPUT->htmlattributes() ?>>
<head>
    <title><?php echo $PAGE->title ?></title>
    <link rel="shortcut icon" href="<?php echo $OUTPUT->pix_url('favicon', 'theme')?>" />
    <meta name="description" content="<?php p(strip_tags(format_text($SITE->summary, FORMAT_HTML))) ?>" />
    <?php echo $OUTPUT->standard_head_html() ?>
    <script src="/curvycorners.src.js" type="text/javascript"></script>
</head>
<script type="text/JavaScript">
addEvent(window, 'load', initCorners);
function initCorners() {
var setting = {
tl: { radius: 10 },
tr: { radius: 10 },
antiAlias: true
}
curvyCorners(setting, ".navbar");
curvyCorners(setting, ".minicalendar");
curvyCorners(setting, ".block-region .block .header");
curvyCorners(setting, ".coursebox");
curvyCorners(setting, "#news_header");
}
</script> 
```

但是，在 IE7 中出现错误：- 尝试运行脚本时，属性“addEvent”的值为 null 或未定义，而不是 Function 对象。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:07:51.387

我猜你说的是`attachEvent`（IE/Opera）或`addEventListener`（Chrome/Safari/Firefox）：

```
attachEvent(window, 'onload', initCorners);     // IE/Opera
addEventListener(window, 'load', initCorners);  // Chrome/Firefox/Safari 
```

# javascript - Javascript中括号内的括号是什么意思？

> ID：13340773
> 
> 赞同：0
> 
> 时间：2012-11-12T09:00:54.967
> 
> 标签：javascript, jquery

我有以下代码：

```
oTable.fnSort([[columnIndex, 'asc']]); 
```

有人可以向我解释 ([[]]) 的含义。我以前从未见过括号内的括号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:01:57.703

您正在将一个数组传递给该`fnSort`方法。该数组包含一个元素，恰好是另一个数组，包含两个元素：

```
[] // An empty array
[[]] // An array with one element (an empty array)
[[columnIndex, "asc"]] // An array with one element (an array with 2 elements) 
```

这被称为*数组字面*量语法，它通常优于替代方案（`Array`构造函数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:01:54.370

方括号是 JavaScript 数组的符号。这段代码意味着函数的参数是一个包含一个元素的数组，该元素本身就是一个数组。

包含两个元素的数组：

```
[columnIndex, 'asc'] 
```

具有一个元素的数组，即包含两个元素的数组：

```
[[columnIndex, 'asc']] 
```

# c++ - 在数据结构之前需要 OOP 的高级知识？

> ID：13340774
> 
> 赞同：0
> 
> 时间：2012-11-12T09:00:56.027
> 
> 标签：c++, oop

我正在努力将书中的数据结构实现为正式的可用代码。我开始相信这是我对 OOP 概念（例如继承）的无知。

我了解链表、树和一些图形概念等数据结构在概念上是如何工作的，即使在使用和调试人们在线的代码之后也是如此。我迷失在类/头文件和他们使用的继承中。

所以，我想知道学习数据结构是否需要深入了解 OOP 的工作原理？诸如构造函数和析构函数之类的基础知识相当简单，但是诸如将指针对象传递给另一个类对象之类的概念却变得非常混乱。

任何关于在学习数据结构时对您最有帮助的经验以及在学习数据结构时您认为必要的知识的任何输入都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:03:59.683

不，理解数据结构不需要 OOP 知识。即使在不支持 OOP 的语言中也存在数据结构。这可能取决于您所指的数据结构以及您想要实现它们的语言。

# android - 使用搜索栏在两个可绘制对象之间转换

> ID：13340775
> 
> 赞同：0
> 
> 时间：2012-11-12T09:01:04.077
> 
> 标签：android, seekbar, transitions, nine-patch

我设置了一个搜索栏，用于调整图像的透明度。

我还有两个九个补丁图像（一个只是另一个的透明版本）。

我想做的是让搜索栏进度设置一个可绘制对象和另一个可绘制对象之间的过渡量。这可能吗？我该怎么办？

```
@Override
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {

//Set percentage of transition between image1 and image2 equal to progress here.

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:04:14.393

```
image1.setAlpha(progress);
Image2.setAlpha(100-progress); 
```

随着一个变得更加透明，另一个变得更加不透明。

# c# - Amazon SES：当一个被列入黑名单或无效时仍然发送邮件（ASP NET）

> ID：13340780
> 
> 赞同：0
> 
> 时间：2012-11-12T09:01:29.627
> 
> 标签：c#, asp.net, amazon-web-services, sendmail, amazon-ses

我有一个包含数千封邮件的数据源，我需要做的是，它循环发送这封邮件，但是当邮件被列入黑名单或无效时，我收到一个错误，而其他邮件永远不会发送。

这很重要，因为后来的联系人永远不会收到我的传单，有可能忽略失败的邮件并继续发送吗？

这是我的代码的一部分：

```
 DataView dv = (DataView)contactosSource.Select(DataSourceSelectArguments.Empty);
        for (int i = 0; i < dv.Count; i++)
        {
            string correo = "" + dv[i][0];

            MailMessage m = new MailMessage();
            SmtpClient sc = new SmtpClient();

            m.From = new MailAddress("carlos.ancona@dotstudio.com", "Carlos Ancona");
            m.To.Add(new MailAddress(correo, correo));
            m.Subject = subjectLabel.Text;
            m.Body = "This is a Test Mail";

            String username = "SMTPusername";  
            String password = "password";

            sc.Host = "email-smtp.us-east-1.amazonaws.com";
            sc.Port = 587;
            sc.Credentials = new System.Net.NetworkCredential(username, password);
            //sc.UseDefaultCredentials = true;
            sc.EnableSsl = true;
            sc.DeliveryMethod = SmtpDeliveryMethod.Network;
            sc.Send(m);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:28:07.003

```
try
{
    sc.Send(m);
}
catch
{
    Response.Clear();
    Response.Write(Encoding.UTF8.GetString(Convert.FromBase64String(@"WW91IHNodWxkIG5vdCBzcGFtIHBlb3BsZSE=")));
} 
```

# javascript - 如何在 Visual Studio 2010 中将值从 HTML 传递到 ASPX 文件

> ID：13340783
> 
> 赞同：0
> 
> 时间：2012-11-12T09:01:43.070
> 
> 标签：javascript, asp.net, html, variables

我的 HTML 文件中有以下代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
<script type="text/javascript">

    function myFunction() {
        debugger;
        var checkedvalue = "";
        var arrChecks = document.getElementsByName("theCheckbox");

        for (i = 0; i < arrChecks.length; i++) 
        {
            // if the current state is checked, unchecked and vice-versa
            if (arrChecks[i].checked) {
                arrChecks[i].checked = false;
            } else {
                arrChecks[i].checked = true;
                checkedvalue = checkedvalue + " " + arrChecks[i].getAttribute('value');
            }

        }

        document.getElementById("demo").innerHTML = checkedvalue;
    }

    function makeCheckboxes(str) {
        var a = document.getElementById("blah");
        var arr = str;
        var returnStr = "";
        for (i = 0; i < arr.length; i++) {
            returnStr += '<input type="checkbox" name="theCheckbox" value="' + arr[i] + '" />' + arr[i];
        }
        a.innerHTML = returnStr;
    }

    window.onload = function () {
        var arrt = ["test1", "test2", "apple", "samsung", "nokia"];

        makeCheckboxes(arrt);
    };

</script>
<style type="text/css"></style>
</head>
<body>
   <table border="1">
      <tr>
         <td id="blah"></td>
         <td>checkboxes should appear left of here</td>
         <button onclick="myFunction()">Click me</button>
      </tr>
   </table>

         <p id="demo"></p>
</body>
</html> 
```

那么，如何将单个 HTML 文件中的值传递给 ASPX 文件，该文件是为了将单个 HTML 文件中的值存储到数据库而构建的？

假设用户选中 的复选框`test1`，`test2`然后`nokia`单击`Click me`按钮。该变量将被传输到 ASPX 文件`samsung`并`apple`作为变量存储，我以后可以将其存储到数据库中。

为了您的信息，我不希望使用 URL 将变量信息传递给 aspx 文件。（例如[http://website.com/info.aspx?var=samsung&var=apple](http://website.com/info.aspx?var=samsung&var=apple)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:25:37.500

这是一个 html 页面示例，将变量发送到 aspx 页面，在 aspx 页面的 cs 文件中，您可以在 aspx 的 cs 代码中 正常使用来自 html 页面的变量

```
protected void Page_Load(object sender, EventArgs e)
        {
            string s = Request.Form.Get("param1");
        } 
```

在 HTML 中

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Untitled Page</title>

    <script src="jquery-1.7.1.min.js" type="text/javascript"></script>

    <script src="jquery.mobile-1.1.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        myFunction = function() {
            var txtValue = document.getElementById("mytxt" ).value;
            try {
                $.ajax({
                    type: "POST",
                    url: "Default.aspx",
                    data:"param1=" + txtValue ,
                    contentType: "application/x-www-form-urlencoded; charset=utf-8",
                    dataType: "html",
                    success: function(msg) {
                    },
                    error: function(xhr, status, error) {
                        alert('Error');
                    }
                });
            }
            catch(e)
            {
                alert(e);
            }

        };

    </script>

</head>
<body>
    <table >
        <tr>
            <td id="blah">
                <input id="mytxt" type="text" />
            </td>
        </tr>
        <tr>
            <td>
                <input type="button" value="Redirect" onclick="myFunction()" />
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:05:09.447

在您的 HTML 文件中制作一个 Javascript 标记并将此代码放在上面

```
$.ajax({
            type: "POST",
            url: "../YourAspxpath/yourAspxFile.aspx",
            data: { param1: "value", param2: "value" },
            contentType: "application/x-www-form-urlencoded; charset=utf-8",
            dataType: "html",
            success: function (msg) {
                //do what ever you wnt here in case of success
            },
            error: function (xhr, status, error) {
                alert('Error');
            }
        }); 
```

# android - java.lang.SecurityException：不允许停止服务意图？

> ID：13340784
> 
> 赞同：0
> 
> 时间：2012-11-12T09:01:47.240
> 
> 标签：android, service

我想通过第三个应用程序中的 ActivityManager.RunningServiceInfo 杀死另一个应用程序的服务器。例如，我想保持活动的某些应用程序的服务，否则服务（不适合服务 START_STICK）将被杀死。这是我的代码：

```
 ActivityManager actManager = (ActivityManager) mContext.getSystemService(Context.ACTIVITY_SERVICE);

            List killapplist = actManager.getRunningAppProcesses();

            List killservicelist = actManager.getRunningServices(100);

            for (Object aKillapplist : killapplist) {

                ActivityManager.RunningAppProcessInfo localRunningAppProcessInfo = (ActivityManager.RunningAppProcessInfo)
                        aKillapplist;

                String appname = localRunningAppProcessInfo.processName;

                if (localRunningAppProcessInfo.pkgList != null) {

                    for (Object aKillservicelist : killservicelist) {
                        ActivityManager.RunningServiceInfo localRunningServiceInfo = (ActivityManager.RunningServiceInfo) aKillservicelist;
  //some condition start
                        try {
                            Intent intentstop = new Intent();

                            intentstop.setComponent(localRunningServiceInfo.service);
                            mContext.stopService(intentstop);
                        } catch (SecurityException e) {
                            e.printStackTrace();

                        }
 //some condition end
                    }

                }

            }

        } else {
            throw new MyException("kill list is empty");
        } 
```

然后总是收到警告信息

```
WARN/ActivityManager(363): Permission Denial: Accessing service ComponentInfo
WARN/System.err(5992): java.lang.SecurityException: Not allowed to stop service Intent 
```

是系统签名的问题吗？我使用了一些权限

```
uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES"
uses-permission android:name="android.permission.SHUTDOWN"
uses-permission android:name="android.permission.FORCE_STOP_PACKAGES" 
```

如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:14:28.417

你不能使用这些权限`"android.permission.SHUTDOWN"`，`"android.permission.FORCE_STOP_PACKAGES"`除非你的包是用系统证书签名的。拥有该权限`"android.permission.KILL_BACKGROUND_PROCESSES"`将允许您仅终止您的进程。

# objective-c - 属性应该是带有内部变量的@synthesize

> ID：13340785
> 
> 赞同：2
> 
> 时间：2012-11-12T09:01:47.740
> 
> 标签：objective-c, properties, xcode4.5, synthesize

我有点困惑，因为在某些教程中只是

在小时

```
@property (readwrite,nonatomic) NSUInteger DirectProp; 
```

在米

```
@synthesize DirectProp; 
```

但在其他是这样的

在小时

```
@interface MyClass : CCNode {
    NSUInteger throuVarProp;

}
@property (readwrite,nonatomic) NSUInteger ThrouVarProp; 
```

在米

```
@synthesize ThrouVarProp = throuVarProp; 
```

哪种方式是正确的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:10:00.480

**两个都对...**

不同之处在于新旧的写作风格。

在最新版本的 Xcode 中，您会看到甚至`synthesize`不是必需的，它会自动作为 _yourIvarName

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:16:01.917

使用一个参数：

```
@synthesize directProp; 
```

合成的 getter/setter 方法的调用方式与用于存储值的实例变量相同。这可能会让人感到困惑。例如：

```
self.directProp = YES;

[self setDirectProp:YES];

directProp = YES; 
```

都是有效的。

使用附加`= ivar`，您可以命名实例变量（约定使用前导下划线），这是一个好主意，因此您不会感到困惑：

```
@synthesize directProp = _directProp;

self.directProp = YES;

[self setDirectProp:YES];

_directProp = YES; 
```

如前所述，对于较新的运行时，您无需在使用前声明实例变量，这也是一个坏主意，而且似乎会促进惰性。总有一天你会后悔使用此功能...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:13:19.583

他们都是对的。

和：

```
@interface MyClass : CCNode {
    NSUInteger throuVarProp;

} 
```

您对编译器说该对象具有 NSUInteger 类型的**实例变量**。这在形式上是正确的，但是现在当你使用@property 时，这个代码是由 Xcode 和编译器自动生成的。

@syntesize，在实现中使用，创建 getter 和 setter：用于从“外部”访问您的实例变量的特殊实例方法。

在最后一个 XCode（来自 4.4 的 AFAIK）中，甚至 @syntesize 也是自动生成的，格式为

```
@syntesize var = _var; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:14:26.083

较新的运行时不需要您定义 iVar。事实上，他们甚至会为您自动合成 iVar。

```
// .h
@property (…) Type name; 
```

这将自动合成属性，就像您编写的一样：

```
// .m
@synthesize name = _name; 
```

因此，您甚至可以访问底层变量，但我不建议这样做，因为我认为它是底层实现细节。

请注意，如果您覆盖 getter，则自动合成将不再发生：

```
// .m
@synthesize lazyProperty = _lazyProperty;
- (NSString *)lazyProperty {
    if (!_lazyProperty)
        _lazyProperty = @"Foobar";

    return _lazyProperty;
} 
```

# php - PHP：如何使用正则表达式匹配某些约束而不是另一个？

> ID：13340791
> 
> 赞同：0
> 
> 时间：2012-11-12T09:02:27.287
> 
> 标签：php, regex

我需要一个匹配的正则表达式`[a-zA-Z][a-zA-Z0-9_-]*`，但前提是它不匹配`admin`。

这个想法是阻止`admin`并让其他所有内容与上面的正则表达式匹配。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:04:19.200

使用[负前瞻](http://www.regular-expressions.info/lookaround.html)排除“管理员”：

```
^(?!admin$)[a-zA-Z][a-zA-Z0-9_-]*$ 
```

这个想法是你需要`(?!^admin$)`在开始时断言输入与“admin”不匹配。

# unit-testing - “为 mscorlib 添加 Moles 组件”时出现许多错误

> ID：13340792
> 
> 赞同：0
> 
> 时间：2012-11-12T09:02:29.300
> 
> 标签：unit-testing, moles, pex, pex-and-moles

我想将一些方法调用引入 mscorlib 程序集，因此我尝试为 mscorlib 生成一个 Mole 程序集。但它给了我成千上万的错误。

我正在使用Win8 + VS2010，我的盒子上也安装了VS2012。

我所做的是：

步骤 0：在 VS2010 中创建一个空的测试项目。

第 1 步：右键单击 Reference 并选择“Add Moles Assembly for mscorlib”。

第 2 步：构建解决方案。

它给了我成千上万的错误，如下所示：

![在此处输入图像描述](../Images/1f8afe487c5d8a15ded996fb6ea119e2.png)

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:20:42.960

Net 4.5 和 moles 互不喜欢，请参阅 Microsoft 的以下解决方法 [http://research.microsoft.com/en-us/projects/moles/molesdev11.aspx](http://research.microsoft.com/en-us/projects/moles/molesdev11.aspx)

# ios - 是否值得在 iOS6 上添加 armv7s 切片？

> ID：13340798
> 
> 赞同：16
> 
> 时间：2012-11-12T09:03:14.253
> 
> 标签：ios, xcode4.5, iphone-5, armv7

所以我知道 armv7s 针对 iPhone 5 进行了优化，添加它会使我的代码在该设备上运行得更快一些。

有谁知道有什么区别？有没有基准等？

权衡是应用程序的大小。我估计的应用程序大小从 3.3MB 到 5MB，加上 armv7s，下载量增加了 50%。

我在想，除非速度提升令人信服，否则下载成本可能不值得，但我似乎找不到太多关于好处的讨论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T21:56:30.737

如果您想利用 VFPv4 支持（这是 A6 SoC 的新增功能）来加快浮点计算，那么值得添加 armv7s 支持。如果您查看下面的链接，还有更多详细信息，这些链接仍然是我最初进行研究时找到的最佳资源。我不知道有任何基准可以指向，但是由于应用程序之间的好处可能会有所不同（取决于您的应用程序对浮点计算的处理器约束程度），无论如何自己运行它们可能会很好。

[anandtech 文章](http://www.anandtech.com/show/6292/iphone-5-a6-not-a15-custom-core)

[苹果开发者论坛链接](https://devforums.apple.com/message/727666#727666)

[相关的 SO 文章](https://stackoverflow.com/questions/12416761/could-use-some-clarification-on-arm-architecture-settings-in-xcode)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:14:56.750

您正在构建什么样的应用程序？armv7s 增加了 vfp4 和整数除法。因此，除非您的应用程序是浮点重的（融合乘法累加〜信号处理）或通过变量除法执行大量变量（通过常量除法的变量在编译时高度优化）您应该没有armv7s支持就可以了。如果您的应用程序在最新硬件上运行，所有由框架提供的软件（如布局）无论如何都将使用这些改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:47:24.487

我的建议是衡量它。ARMv7 的改进非常具体（硬件整数除法，而 VFPv4 几乎是融合乘加），基准测试的改进可能适用于您的代码，也可能不适用于您的代码，所以我认为没有什么可以替代您的计时iPhone 5 上的应用程序，无论是否存在 ARMv7s 切片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T09:44:26.220

要了解性能差异，您可以做的最简单的事情是在 iPhone 5 中安装您的应用程序，使用而不是使用“armv7s”支持。根据我的经验，我可以看到每种 iPhone 型号的性能差异。我的建议是为您的应用程序添加 armv7s 支持并在“极端”情况下进行测试，如果您能看到任何性能差异，请忘记 ipa 大小和其他事情。

# mysql - 维护点表以减少行数

> ID：13340802
> 
> 赞同：1
> 
> 时间：2012-11-12T09:03:17.610
> 
> 标签：mysql, sql

我正在努力设计一个有效的自动化任务来清理声誉积分表，类似于我想的 SO。

如果用户阅读文章、评论文章和/或分享文章，我会给我的成员一些声誉积分。例如，如果我的成员执行所有这三个操作，则该数据库表中将有三个单独的行。在显示成员积分时，我只是使用 SUM 查询来计算该成员的所有积分。

现在，拥有一百万活跃会员，享有很高的声誉，我的表中有很多很多行，并且想以某种方式清理它们。使用 Cron 作业，我想将超过 3 个月的每个成员的所有声誉行合并为一行。例如：

```
 user     |  repTask                      |  repPoints   |  repDate
-----------+-------------------------------+--------------+-----------------------
  10001    +  Commented on article         |  5           |  2012-11-12 08:40:32
  10001    +  Read an article              |  2           |  2012-06-12 12:32:01
  10001    +  Shared an article            |  10          |  2012-06-04 17:39:44
  10001    +  Read an article              |  2           |  2012-05-19 01:04:11 
```

会成为：

```
 user     |  repTask                      |  repPoints   |  repDate
-----------+-------------------------------+--------------+-----------------------
  10001    +  Commented on article         |  5           |  2012-11-12 08:40:32
  10001    +  (merged points)              |  14          |  Now() 
```

或（合并月份）：

```
 user     |  repTask                      |  repPoints   |  repDate
-----------+-------------------------------+--------------+-----------------------
  10001    +  Commented on article         |  5           |  2012-11-12 08:40:32
  10001    +  (Merged for 06/2012)         |  12          |  Now()
  10001    +  (Merged for 05/2012)         |  2           |  Now() 
```

3 个月后的任何事情都被认为是合法的，之前的任何事情都可能需要被撤销以防作弊，因此我说 3 个月。

首先，这是个好主意吗？我试图避免，比如说在 3 年内，有 100 的数百万行。如果合并点不是一个好主意，有没有更好的方法来存储输入的数据。我显然无法更改已经输入的内容，但可以为将来做得更好。

如果这是一个好主意，我正在努力想出一个有效的查询来修改数据。我不是在寻找确切的代码，但是如果有人可以帮助描述一个合适的查询，该查询可以为每个用户合并所有超过 3 个月的点，或者为每个用户将所有超过 3 个月的点合并到单独的月份中，它会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:07:46.707

您*可以*使用 cron 作业这样做，但是如何：创建一个[触发器](http://dev.mysql.com/doc/refman/5.6/en/triggers.html)或[过程](http://dev.mysql.com/doc/refman/5.6/en/create-procedure.html)，以便无论何时添加一个点，它都会更新`total`用户表中的一列，并且无论何时撤销一个点，都会`total`从中减去该列？

这样，无论积分表中有多少百万或数十亿行，您都不必查询那些以获得总积分结果。您甚至可以有几个月或几年的单独列。此外，由于您没有删除任何行，因此如果需要，您可以返回并追溯撤销一年前的某个点。

# asp.net - 如何在多层应用程序中连接域事件处理程序

> ID：13340804
> 
> 赞同：1
> 
> 时间：2012-11-12T09:03:26.000
> 
> 标签：asp.net, asp.net-mvc, domain-driven-design, domain-events

所以我的问题与这个问题非常相关：[使用存储库和实体框架的领域事件中的实体持久性？](https://stackoverflow.com/questions/5970449/entity-persitance-inside-domain-events-using-a-repository-and-entity-framework)

**编辑：**关于该主题的更好的讨论也在这里：[在哪里引发依赖于持久性的域事件 - 服务、存储库或 UI？](https://stackoverflow.com/questions/5886174/where-to-raise-persistence-dependent-domain-events-service-repository-or-ui?rq=1)

但是，假设我采用了正确的方法，我的问题会更加简单和技术性。

假设我有以下项目：

```
MyDomainLayer -> very simple classes, Persitence Ignorance, a.k.a POCOs
MyInfrastructureLayer -> includes code for repositories, Entity Framework
MyApplicationLayer -> includes ASP.Net MVC controllers 
MyServicesLayer -> WCF-related code 
MyWebApplication -> ASP.Net MVC (Views, Scripts, etc) 
```

引发事件时（例如，已授予组成员资格），则应做两件事（在两个不同的层中）：

1.  持久化数据（在数据库中插入新的组成员记录）
2.  为相关用户创建通知（与 UI 相关）

我将举一个我在简介中写的最后一个参考的简单示例：

领域层有以下代码：

```
public void ChangeStatus(OrderStatus status)
{
    // change status
    this.Status = status;
    DomainEvent.Raise(new OrderStatusChanged { OrderId = Id, Status = status });
} 
```

假设通风处理程序位于 MyApplicationLayer 中（以便能够与服务层对话）。它有以下代码：

```
DomainEvent.Register<OrderStatusChanged>(x => orderStatusChanged = x); 
```

线入是如何发生的？我猜是结构图，但是这个输入代码看起来如何呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:32:23.150

首先，您的分层并不完全正确。更正：

应用层 - ASP.NET MVC 控制器通常被认为是在应用层和 HTTP/HTML 之间形成一个适配器。因此，控制器本身并不是应用层的一部分。属于应用层的是应用服务。

MyServicesLayer - WCF 相关代码。WCF 实现的服务是 Dennis Traub 引用的六边形体系结构中的适配器。

MyWebApplication - ASP.Net MVC（视图、脚本等）。同样，这形成了六边形架构中的适配器。MVC 控制器也属于这里——实际上它们是这个适配器的实现细节。该层与使用 WCF 实现的服务层非常相似。

接下来，您将描述为响应事件而应该发生的 2 件事。持久性通常是通过在事务中提交工作单元来实现的，而不是作为响应事件的处理程序。此外，应该在持久化完成后发出通知，或者换句话说，在事务提交后发出通知。这最好以最终一致的方式完成，该方式在最初生成领域事件的工作单元之外。

有关如何实现域事件发布/订阅系统的详细信息，请查看[此处](http://www.udidahan.com/2009/06/14/domain-events-salvation/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:10:36.313

我的第一个建议是摆脱*层*的概念，让自己熟悉[*六边形架构*的概念，即*端口和适配器*](http://c2.com/cgi/wiki?PortsAndAdaptersArchitecture)。

使用这种方法，更容易理解域模型如何保持独立于任何周围的关注点。基本上这是架构级别的面向对象。图层是程序化的。

对于您的特定问题，您可以创建一个项目，其中包含将事件投射到数据库中的事件处理程序。这些处理程序可以直接访问数据库或通过 ORM。您可能不需要任何存储库，因为事件应该包含所有需要的信息。

# c++ - 我的cout怎么了？

> ID：13340811
> 
> 赞同：1
> 
> 时间：2012-11-12T09:03:42.243
> 
> 标签：c++, linux, cout

在 C++，Ubunt 12.04 中，我有一个名为的文件`config.txt`，其中包含`user name`和`password`. 我有 2 个`public static string`变量： `USER`和`PASSWORD`. 这是我的代码：

```
// Read file from config
string text[2];
int count = 0;
while(!fin.eof()){
    getline(fin,text[count]);
    count++;
    if(count == 2){
        break;
    }
}
CONNECTOR::USER = text[0];
CONNECTOR::PASSWORD = text[1];

string userAndPassword =  CONNECTOR::USER + ":" + CONNECTOR::PASSWORD;
cout << CONNECTOR::USER << endl; // It's fine, right user: qsleader
cout << CONNECTOR::PASSWORD << endl; // ok, right password: 123456
cout <<"user and password: " <<  userAndPassword << endl; // It's weird text! Problem here! 
```

奇怪的文字结果是：`:123456d password: qsleader`!! 这不是我所期望的！但我不知道为什么会这样？谁能给我一个建议？（如果我打印：`cout << "user and password: qsleader:123456"`，结果很好！！）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:20:49.617

当您读取值时会产生问题。事实上，我猜你的文件在两个不同的行上有这两个项目。此外，我猜这个文件使用 Windows 行尾。因此，当您读取第一项时，它会读取`qsleader\r`然后停止，因为下一个提取的字符是`\n`，提取但未附加到字符串。

当您创建`userAndPassword`字符串时，它实际上是`qsleader\r:123456`. 这个特殊字符`\r`是回车。它使光标移动到行首。因此，在最后一行，您首先输出`user and password: qsleader`，然后返回第一列并写入`:123456`，结果为`:123456d password: qsleader`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:11:56.463

您正在设置`userAndPassword`一个涉及分配的地狱般的表达式。我猜你的意图是：

```
string userAndPassword = CONNECTOR::USER + ":" + CONNECTOR::PASSWORD 
```

# android - GCM- 在 GCMBaseIntentService 中显示 AlertDialog

> ID：13340813
> 
> 赞同：1
> 
> 时间：2012-11-12T09:03:50.450
> 
> 标签：android

嘿伙计们。我已经在我的应用程序中实现了 Google Cloud Messaging，但是当我尝试向用户显示从服务器接收到的消息时出现问题。我设法在祝酒词中显示消息，但我想使用警报对话框。这是我的 GCMBaseIntentService：

```
 public class GCMIntentService extends GCMBaseIntentService {

    public static final String SENDER_ID = "546677596418"; 

    public GCMIntentService() {
       super(SENDER_ID);
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        // TODO Auto-generated method stub
         Log.e("Registration", "Got an error!");
         Log.e("Registration", arg0.toString() + arg1.toString());
    }

    @Override
    protected void onMessage(final Context arg0, final Intent arg1) {
        // TODO Auto-generated method stub
        Log.i("Registration", "Got a message!");
        Log.i("Registration", arg1.getStringExtra("message"));

        Handler h = new Handler(Looper.getMainLooper());
        h.post(new Runnable(){

            public void run() {
                // TODO Auto-generated method stub
            Toast.makeText(arg0, arg1.getStringExtra("message"), Toast.LENGTH_LONG).show();

                /*  String msg = arg1.getStringExtra("message");
                if(msg != null){
                    new AlertDialog.Builder(arg0)
                    .setTitle("New Notification")
                    .setMessage(msg)
                    .setNeutralButton("OK", new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int which) {
                                dialog.cancel();
                            }
                    }).create().show();
                }
              */  
            }         
        });

    }
    } 
```

评论部分是我尝试显示警报对话框。我认为上下文是问题，但我真的不知道如何解决它。如果我为此使用通知会更好吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T14:42:57.247

我已经使用通知解决了这个问题。我想这将不得不这样做:)

```
@Override
    protected void onMessage(final Context arg0, final Intent arg1) {
        // TODO Auto-generated method stub
        Log.i("Registration", "Got a message!");
        Log.i("Registration", arg1.getStringExtra("message"));
        String message= arg1.getStringExtra("message");

      generateNotification(getApplicationContext(), message);

private  void generateNotification(Context context, String message)
        {

            // Creates an explicit intent for an Activity in your app
            Intent resultIntent = new Intent(context, BBCAndroid.class);

            NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(context);

            mBuilder.setContentTitle("BBC Android")
                    .setContentText(message)
                    .setSmallIcon(R.drawable.notification);

            PendingIntent in = PendingIntent.getActivity(getApplicationContext(), 0, resultIntent, 0);
            mBuilder.setContentIntent(in);

            mNotificationManager.notify(0, mBuilder.build());
        } 
```

# jquery - 处理标签外文本的正确方法是什么？

> ID：13340818
> 
> 赞同：0
> 
> 时间：2012-11-12T09:04:03.990
> 
> 标签：jquery

> **可能重复：**
> [如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)

处理标签外文本的正确方法是什么

我尝试了所有方法，但都失败了

我对此进行了实验

```
 <script>

  $(function(){
  var A = $(".A").text();
  var B = $(".B").text();
  var C = $(".C").text();
  var D = $(".D").text();
  $("#BD").text(A+B+C+D);
      });

  </script>

  <body>

   <div>
    <span class="A"></span>6
    <span class="B"></span>8
    <span class="C"></span>3
    <span class="D"></span>9
  </div>

  <div id="BD"></div>
  </body> 
```

还有这个

```
<script>

$(function(){
 var A = $(".A").text();
 var B = $(".B").text();
 var C = $(".C").text();
 var D = $(".D").text();
  alert(A+B+C+D);
});

 </script> 
```

但他们都没有工作

我怎样才能正确收集数字？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:07:19.377

**更新的答案**

[http://jsfiddle.net/BramVanroy/dS3ab/2/](http://jsfiddle.net/BramVanroy/dS3ab/2/)

从[詹姆斯那里借来的](https://stackoverflow.com/questions/6925088/get-the-text-after-span-element-using-jquery#answer-6925135)

```
var a = $("div").contents().filter(function() {
    return this.nodeType == 3;
}).text();

$("#BD").text(a);​ 
```

请注意，此解决方案仅适用于获取 div 标记内的所有文本节点！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:08:33.447

您可以克隆 div 并删除其中的 span 元素，然后使用 检索 div 文本`.text()`，只需执行以下操作：

```
$('#BD').text( $('.A').parent().clone().children('span').remove().end().text() ); 
```

查看工作[**演示**](https://tinker.io/0b1b8)

# ios - 如何让 xcode 在依赖项之前运行脚本？

> ID：13340823
> 
> 赞同：19
> 
> 时间：2012-11-12T09:04:24.053
> 
> 标签：ios, xcode, build

设想：

我有`TargetA`，这是一个 iOS 应用程序。这个应用程序使用一个静态库，由`TargetB`. 显然，`TargetB`是 的依赖项`TargetA`，并且`TargetB`总是在 之前构建`TargetA`。到现在为止还挺好。

现在，我希望`TargetA`构建一个运行脚本，但**即使在`TargetB`**.

## 我尝试了什么：

1.  添加“设置”聚合/外部构建目标，并使其成为`TargetA`. 它成功了一半：Xcode 同时运行`setup`，`TargetB`因此`TargetB`可能构建得太早。还不够好。
2.  相同，但在方案中指定不要并行构建。这可行，但很浪费，因为还有其他**可以**并行构建的目标。
3.  `pre-action`在方案内的构建步骤中运行脚本。这可行，但似乎是错误的（为什么？该步骤的输出不会进入构建日志；所以也许我不打算以这种方式使用它？）。

## 我不想做的事情：

将脚本添加为`TargetB`. 这会奏效；但是，`TargetB`实际上来自另一个子项目，并且在构建它的上下文中，脚本的参数尚不清楚（主要是`TargetA`项目的根目录）。

我错过了什么，还是我必须满足于上面的#2 或#3？

**编辑：**在上面的选项 #2 中，更改依赖关系的顺序（在我的情况下，介于两者之间`Setup`并`TargetB`没有帮助——Xcode 仍然任意选择顺序。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-08T06:07:31.080

运行脚本作为`pre-action`方案内的构建步骤是完成您想要的最佳方式。这种方法的一个常见用途是根据源代码控制状态（[示例](http://yourhead.tumblr.com/post/49944504605/xcode-build-numbers-and-git-a-simple-solution-in)）调整项目的内部版本号。至于捕获脚本输出，不幸的是，您唯一能做的就是[将脚本的标准输出重定向到日志文件](https://stackoverflow.com/questions/10723174/where-is-the-logfile-located-for-xcode-scheme-post-actions)。该日志文件可能是您项目的一部分，因此很容易从 Xcode 中查看。

# c++ - 如何将一个点附加到opencv c中的另一个点

> ID：13340828
> 
> 赞同：2
> 
> 时间：2012-11-12T09:04:37.137
> 
> 标签：c++, opencv

< 我现在有一个二进制图像（Canny 检测器的输出）。我想将具有 1 的点的所有坐标保存到另一个名为 Imp_Points 的变量中（由向量 Point2f 定义）。

我尝试在图像中使用 for 循环来检查“1”并将这些坐标分配给“Imp_Points”，但我不确定如何在 C++ 中执行此操作。

关于如何使用 opencv 在 c++ 中做到这一点的任何建议？提前致谢！>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:29:12.830

**首先看看如何遍历 cv::Mat： http:** [//opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#mat](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#mat)

[使用 Mat OpenCV 访问像素](https://stackoverflow.com/questions/7183359/access-pixels-with-mat-opencv)

然后，当像素值为 255 时，您需要将坐标添加到向量。假设您有 8 位 Canny 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:41:27.553

```
Vector <Point2f>Imp_Points;
for(int i=0;i<bn_img.rows;i++) {
 for(int j=0;j<bn_img.cols;j++)`{
    Point p=new Point(j,i);
    int v=bn_img<uchar>.at(p);//check the datatype of Mat here
    if(v==1)
      Imp_Points.push_back(p);
} 
```

# android - 如何在 Android 的 GridView 中获取文本并将其设置为 EditText？

> ID：13340836
> 
> 赞同：0
> 
> 时间：2012-11-12T09:05:32.377
> 
> 标签：android

我有一个显示矩阵元素的 GridView，每个元素都由一个 EditText 和一个 TextView 对象组成。

如何访问 GridView 中的特定 EditText 和 TextView 对象？

我想动态获取文本并将其设置为 EditText 和 TextView 对象。我已经开发了一些代码来将文本设置为 EditText row+col 和 TextView (row, col) 但所有 EditText 显示 2 和所有 TextView 显示 (1,1) 请检查我的代码并帮助我，我将非常感谢你.

```
public class GridAdapter extends BaseAdapter
    {
        Context mContext;

        TextView elementSubscript;
        EditText elementValue ;
        int matrixIndex =0;

        public GridAdapter(Context c)
        {
            mContext = c;
        }

        public View getView(int position, View convertView, ViewGroup parent) 
        {
            // TODO Auto-generated method stub
            View elementLayout;
            if(convertView==null)
            {
                LayoutInflater layoutInflater = getLayoutInflater();
                elementLayout = layoutInflater.inflate(R.layout.matrix_element, null);

                elementSubscript = (TextView)elementLayout.findViewById(R.id.elementSubscript);
                elementValue = (EditText)elementLayout.findViewById(R.id.elementValue);

                for(int row=1; row<=5; row++)
                {
                    for(int col=1; col<=4; col++)
                    {
                        if(position == matrixIndex)
                        {
                            int mIndex =row+col;
                            elementSubscript.setText("( "+row+","+col+" )");
                            elementValue.setText(mIndex+"");

                            matrixIndex++;
                        }

                    }
                }

            }
            else
            {
                elementLayout = convertView;
            }

            return elementLayout;
        }

        public int getCount() 
        {
            // TODO Auto-generated method stub
            return 20;
        }

        public Object getItem(int arg0) 
        {
            // TODO Auto-generated method stub
            return null;
        }

        public long getItemId(int position) 
        {
            // TODO Auto-generated method stub
            return 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:21:02.623

您没有更新回收的视图。请通过这样的适当[教程](http://www.vogella.com/articles/AndroidListView/article.html)。检查第 5.5 节

修改后的代码：

```
public class GridAdapter extends BaseAdapter
{
    Context mContext;

    TextView elementSubscript;
    EditText elementValue ;
    int matrixIndex =0;

    public GridAdapter(Context c)
    {
        mContext = c;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {

        View elementLayout = convertView;

        if(convertView==null)
        {
            LayoutInflater layoutInflater = getLayoutInflater();//If view is null inflate a view
            elementLayout = layoutInflater.inflate(R.layout.matrix_element, null);
        }
            elementSubscript = (TextView)elementLayout.findViewById(R.id.elementSubscript);
            elementValue = (EditText)elementLayout.findViewById(R.id.elementValue);

            for(int row=1; row<=5; row++)
            {
                for(int col=1; col<=4; col++)
                {
                    if(position == matrixIndex)
                    {
                        int mIndex =row+col;
                        elementSubscript.setText("( "+row+","+col+" )");
                        elementValue.setText(mIndex+"");

                        matrixIndex++;
                    }
                }
            }
      //updating the view in case of view reuse and new view
        return elementLayout;
    }

    public int getCount() 
    {
        // TODO Auto-generated method stub
        return 20;
    }

    public Object getItem(int arg0) 
    {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) 
    {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

# objective-c - 是否有可用于双精度的字符串格式化程序？

> ID：13340839
> 
> 赞同：3
> 
> 时间：2012-11-12T09:05:47.913
> 
> 标签：objective-c, cocoa, nsnumberformatter

我正在寻找一种在满足以下格式要求的 NSString 中表示双精度值的方法：

1.) 没有尾随零：x = 0.5000000 -> @"0.5"

2.) 至少十进制：x = 45 -> @"45.0"

3.) 最多 8 个十进制字符（最后一位四舍五入）：x = 0.000000005 -> @"0.00000001"

我尝试使用@"%.8f"、@"%g" 或@"%.8g"，但至少满足一项要求都失败了。

我想我可以用 @"%.8f" 来做，然后将从字符串的最后一个字符开始的字符串循环到前面删除“0”字符，

或者，如果字符串不包含小数点，则以“%.8g”开头并附加“.0”。

有没有更智能的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:24:09.527

您可以使用数字格式化程序执行此操作，但您需要先使用 double 创建一个 NSNumber：

```
NSNumber *halfNumber            = [NSNumber numberWithDouble:0.5000000];    
NSNumber *wholeNumber           = [NSNumber numberWithDouble:45];           
NSNumber *longNumber            = [NSNumber numberWithDouble:0.000000005];  

NSNumberFormatter *formatter    = [NSNumberFormatter new];
formatter.numberStyle           = NSNumberFormatterDecimalStyle;
formatter.roundingMode          = NSNumberFormatterRoundHalfUp;
formatter.minimumFractionDigits = 1;
formatter.maximumFractionDigits = 8;

NSString *halfString            = [formatter stringFromNumber:halfNumber];
NSString *wholeString           = [formatter stringFromNumber:wholeNumber];
NSString *longString            = [formatter stringFromNumber:longNumber];

NSLog(@"%@", halfString);
NSLog(@"%@", wholeString);
NSLog(@"%@", longString);

// Output is:
// 2012-11-12 04:22:41.181 Testing App[48069:fb03] 0.5
// 2012-11-12 04:22:41.182 Testing App[48069:fb03] 45.0
// 2012-11-12 04:22:41.183 Testing App[48069:fb03] 0.00000001 
```

# java - 在 Java 中测试任何类型（网络）代理的有效性

> ID：13340841
> 
> 赞同：2
> 
> 时间：2012-11-12T09:06:12.660
> 
> 标签：java, proxy, network-protocols

我在这里检查了与代理相关的标准 Java API：http: [//docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)，它似乎非常有限。

据我所知，代理支持的协议比 Proxy.Type ( [http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Proxy.Type中列出的协议多得多.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Proxy.Type.html) ) 和一些代理受登录名/密码保护：我在 java.net.Proxy 中看不到任何与身份验证相关的方法。

我的主要用例是检查给定代理是否可访问。有没有办法在 JDK 或第三方 Java 库中实现这一点？

提前致谢， 罗尔夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:41:43.310

我建议连接到代理：

```
boolean isReachable = false;
try {
   URL url = new URL( "http://" + proxyHost + ":" + proxyPort );
   url.openStream().close();
   isReachable = true;
}
catch( Throwable t ){
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:23:04.283

我最终最终使用了 org.apache.http.impl.client.DefaultHttpClient。这不是一个 100% 令人满意的解决方案，但它是一个开始。

# php - 将 jquery 请求发送到 PHP 脚本

> ID：13340843
> 
> 赞同：0
> 
> 时间：2012-11-12T09:06:29.783
> 
> 标签：php, jquery, ajax

我有一个功能可以检查接送地址中的搜索是否包含机场，如下所示：-

```
function checkIsAirport(str) {

var myRegExp = /\bAIRPORT\b/i;

return str.match(myRegExp);

}

// Check if label contains an airport..
    if (checkIsAirport(label.html()) != null &&
        label.parent().parent().attr('title') == "Pickup") {

//FUNCTION

} 
```

基本上我需要做的是如果接送包含机场地址，则添加“x”金额的“附加费”。因此，如果将机场设置为盖特威克机场，则会将其发送到关税.fare.controller.php，这将在票价中添加“x”。我只是想知道如何做到这一点的最佳方式。

此外，如果用户将接机从机场更改为非机场地址，则必须从票价中减去“x”。

任何帮助将非常感激！

：： 编辑 ：：

只是补充一下，为了实现这一点，我想使用 AJAX。一旦用户在取货地址中输入机场，就需要将请求发送到我的 TariffFareController 类到以下函数：

```
private static function getFinalFare($fare) {

    $final_fare = ($fare * self::$fare_factor);

    if (self::$str_wait_return == "true") {
        $final_fare = $final_fare * 2;
    }

    if (self::$str_return == "true" && self::$return_date != "false" && self::$return_time != "false") {

        // We need to calc to fare based on the return date and time
        $return_fare = self::getFare(1);

        // Append to final fare
        $final_fare = $final_fare + $return_fare;

    }

    // Create new journey object with the info that we have so far

    /*$journey = new Journey($journey_id,$pickup,$dropoff,$vias,$distance,$vehicle,
                    $date_time,$return_journey,$meet_greet,$extras);*/

    return number_format($final_fare,2);

} 
```

这样我就可以从数据库中读取“附加费”值，然后将其添加到票价计算中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:19:04.673

我不会在你的 JS 中检查 AIRPORT。如果用户决定打开 Firebug 并编辑 JS，他们可以轻松绕过额外费用。此外，如果用户在浏览器中禁用了 JS，则可能根本不会添加关税。最好的解决方案是使用 PHP 在服务器端处理所有这些逻辑。

不过，这里有一个对 PHP 脚本的 AJAX POST 请求的示例：

```
$.post("checkTarriff.php", { id: identifyingId },
 function(data){
   console.log(data);
 }, "json"); 
```

# emacs - org-mode 中的 POM（点或标记）

> ID：13340846
> 
> 赞同：6
> 
> 时间：2012-11-12T09:06:36.683
> 
> 标签：emacs, org-mode

我正在尝试使用函数`org-entry-properties`和`org-id-get`，它们都使用可选参数`pom`。例如，`org-entry-properties`文档说：

> 在点或标记 POM 处获取条目的所有属性。

[Emacs 手册](http://www.gnu.org/software/emacs/manual/html_node/emacs/index.html)几乎没有提到“标记”这个词，但是有几个以 . 结尾的函数`-marker`。现在我有几个问题。

1.  那个点或标记是什么？
2.  和mark ring中的mark一样吗？
3.  如何在组织模式缓冲区中获取标记？
4.  如何在上述函数调用中使用此标记？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T10:18:37.767

缓冲区中的（绝对）位置由一个数字给出，该数字大致是该位置之前的字符数。另一方面，标记允许在缓冲区中标记“相对位置”：如果在它之前添加文本，它会向前移动（就像它是一个不可见的 0 宽度字符）。

您可以随时将标记转换为（绝对）位置（整数）。这就是为什么许多参数想要一个 POM：他们想要一个位置，但接受它是作为标记给出的。

emacs 中的“mark”，是一种特定的标记，可以通过适当的键和弦轻松访问（C-SPC 设置它，Cx Cx 交换标记和点等）。/a“标记环”是所有先前“标记”标记的历史（在给定缓冲区中，即本地标记环，或全局，用于所谓的全局标记环）。

elisp 手册中的更多信息：

*   从emacs内部：（信息“（elisp）标记”）
*   在网上：[http ://www.gnu.org/software/emacs/manual/html_node/elisp/Markers.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Markers.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T10:11:49.770

除了 Emacs 手册，请查看[Emacs Lisp 参考手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Markers.html)以获取有关标记的更多信息：

> 标记是一个 Lisp 对象，用于指定缓冲区中相对于周围文本的位置。每当插入或删除文本时，标记都会自动更改其从缓冲区开头的偏移量，以便它与两侧的两个字符保持一致。

因此，您提到的函数的 POM 元素可以是一个标记，即一个包含缓冲区和该缓冲区中位置的 lisp 对象，或者只是一个位置。在第一种情况下，函数将首先切换到标记的缓冲区并移动`point`到标记的位置，然后再执行其余的函数。

在第二种情况下，它将停留在当前缓冲区中，但`point`在执行函数的其余部分之前移动到给定位置。

也就是说，函数相对于给定的缓冲区/位置执行。在函数体的末尾，`point`恢复原来的位置。

# ios - 配置 iOS plist 以便关联文件仅在我的应用程序中打开

> ID：13340848
> 
> 赞同：3
> 
> 时间：2012-11-12T09:06:37.070
> 
> 标签：ios, plist, file-association, uti

我已将文件类型与我的 iOS 应用程序相关联，效果很好。但是我希望文件类型是独占的，以便其他应用程序不提供“打开”我的文件。

我有另一个开发人员的应用程序可以执行此操作，但我无法弄清楚它是如何完成的。我已经为这个应用程序提取了 plist，但我看不到它正在做什么来实现这一点。

这就是我想要做的：

![在此处输入图像描述](../Images/76a9f670b69432ae079ea5839b2296b1.png)

这就是我的应用程序中发生的事情：

![在此处输入图像描述](../Images/2ba9504fc93828d0c896a6c88b2af95f.png)

这就是我在 plist 中设置文件关联的方式：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>abcd</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>My File</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.myapp.abcd</string>
        </array>
    </dict>
</array>
<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>com.myapp.abcd</string>
        </array>
        <key>UTTypeDescription</key>
        <string>My File</string>
        <key>UTTypeIconFile</key>
        <string>icon</string>
        <key>UTTypeIdentifier</key>
        <string>com.myapp.abcd</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <array>
                <string>abcd</string>
            </array>
        </dict>
    </dict>
</array> 
```

我错过了什么？？有谁知道如何启用此功能？

谢谢

邓肯

# php - 如何使用 IF 将普通 sql 选择重写为 Zend Framework 选择？

> ID：13340852
> 
> 赞同：5
> 
> 时间：2012-11-12T09:06:47.693
> 
> 标签：php, mysql, zend-framework

我有一个普通的 mysql select，我想将它重写为 Zend Framework mysql select。这是我的选择：

```
$sql = "
     SELECT 
        IF(mu.recieverUserId = '{$userId}', u.senderUserId, 
            mu.recieverUserId) friend1,
            u.mesaj, u.senderUserId, mu.recieverUserId,
            u.created
        FROM 
            (SELECT * 
            FROM mesaje
            ORDER BY `created` desc) AS u
        LEFT JOIN `mesaje_utilizatori` AS `mu` ON u.id=mu.mesajId   
        WHERE (mu.recieverUserId = '{$userId}' OR   u.senderUserId='{$userId}')             
              GROUP BY friend1 ASC 
          ORDER BY `u`.`created` DESC, u.id DESC
        "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:45:50.413

这是文档：[Zend_Db_Statement](http://framework.zend.com/manual/1.12/en/zend.db.statement.html)

**Zend 查询**

```
$sql = $db->query(
   'SELECT 
   IF(mu.recieverUserId = ?, u.senderUserId, 
     mu.recieverUserId) friend1,
   u.mesaj, u.senderUserId, mu.recieverUserId,
   u.created
    FROM 
   (SELECT * 
   FROM mesaje
   ORDER BY `created` desc) AS u
   LEFT JOIN `mesaje_utilizatori` AS `mu` ON u.id=mu.mesajId 
    WHERE (mu.recieverUserId = ? OR u.senderUserId = ? )    
    GROUP BY friend1 ASC 
    ORDER BY `u`.`created` DESC, u.id DESC',
   array($userId, $userId,$userId)
  ); 
```

**Zend 结果**

```
 while ($row = $sql->fetch()) {
   Zend_Debug::dump($row);
  } 
```

# python - Python中的除非语句

> ID：13340856
> 
> 赞同：23
> 
> 时间：2012-11-12T09:07:07.707
> 
> 标签：python

是否有与`unless`Python 中的语句等效的语句？如果标签中有一行，我不想在标签上附加一行`p4port`：

```
for line in newLines:
    if 'SU' in line or 'AU' in line or 'VU' in line or 'rf' in line  and line.find('/*') == -1:
        lineMatch = False
    for l in oldLines:
        if '@' in line and line == l and 'p4port' not in line:
            lineMatch = True
            line = line.strip('\n')
            line = line.split('@')[1]
            line = line + '<br>\n'
            labels.append(line)
    if '@' in line and not lineMatch:
        line = line.strip('\n')
        line = line.split('@')[1]
        line="<font color='black' style='background:rgb(255, 215, 0)'>"+line+"</font><br>\n"
        labels.append(line) 
```

我收到一个语法错误：

```
 if '@' in line and not lineMatch:
   UnboundLocalError: local variable 'lineMatch' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-12T09:08:00.077

“不在”呢？

```
if 'p4port' not in line:
    labels.append(line) 
```

另外我猜你的代码可以修改为：

```
if '@' in line and line == l and 'p4port' not in line:
    lineMatch = True
    labels.append(line.strip('\n').split('@')[1] + '<br>\n') 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-12T09:09:36.147

没有“除非”声明，但你总是可以写：

```
if not some_condition:
    # do something 
```

还有`not in`Artsiom提到的运营商 - 所以对于你的代码，你会写：

```
if '@' in line and line == l:
    lineMatch = True
    line = line.strip('\n')
    line = line.split('@')[1]
    line = line + '<br>\n'
    if 'p4port' not in line:
        labels.append(line) 
```

...但是Artsiom 的版本更好，除非您打算`line`稍后对修改后的变量做一些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:35:37.750

您在（相当彻底）编辑的问题中遇到的错误是告诉您该变量`lineMatch`不存在 - 这意味着您为设置它指定的条件没有得到满足。`LineMatch = False`在外部`for`循环中（在第一条语句之前）添加一条类似于第一行的行可能会有所帮助`if`，以确保它确实存在。

# ruby-on-rails - 无法重新索引 Sunspot SOLR - 错误 - RSolr::Error::Http - 500 内部服务器错误

> ID：13340859
> 
> 赞同：14
> 
> 时间：2012-11-12T09:07:17.587
> 
> 标签：ruby-on-rails, ruby, solr, sunspot

每次我尝试使用重新索引...

> 耙太阳黑子：solr：reindex

这些错误消息总是显示：

> 错误 - RSolr::Error::Http - 500 内部服务器错误 - 重试... 错误 - RSolr::Error::Http - 500 内部服务器错误 - 忽略... 错误 - RSolr::Error::Http - 500 内部服务器错误 - 重试... 错误 - RSolr::Error::Http - 500 内部服务器错误 - 忽略...

我试图停止然后开始使用...

```
rake sunspot:solr:stop
rake sunspot:solr:start 
```

但是什么也没发生。

现在每次我尝试在 localhost 中运行我的应用程序...

这是错误：

```
RSolr::Error::Http - 500 Internal Server Error
Error: Severe errors in solr configuration.

Check your log files for more detailed information on what may be wrong.

If you want solr to continue after configuration errors, change: 

 <abortOnConfigurationError>false</abortOnConfigurationError>

in null

-------------------------------------------------------------

Request Data: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Trip</query></delete>" 
```

比我在终端中看到的更详细的错误消息。

我尝试了很多来自网络的解决方案，例如将 Abort Configuration 设置为 false，但没有任何反应。

错误仍然存​​在。

任何解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-06-27T04:52:42.543

解决方案：

1.  `rake sunspot:solr:stop`
2.  `rm -rvf solr`（删除你的 /solr 目录）
3.  `rake sunspot:solr:start`
4.  `rake sunspot:solr:reindex`

享受

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-30T14:42:54.010

根据@professormeowingtons 提供的答案，在生产中对我有用的是以下内容：

1.  `$ rake sunspot:solr:stop RAILS_ENV=production`
2.  `$ rm -rvf solr # delete your /solr directory`
3.  `$ sudo reboot # reboot the machine RAILS_ENV=production`
4.  `$ rake sunspot:solr:start RAILS_ENV=production`
5.  `$ rake sunspot:solr:reindex RAILS_ENV=production`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-25T18:11:51.313

参考@professormeowingtons，您不必删除整个 solr 目录，因为您可能不想删除 solr 配置，例如`schema.xml`和`solrconfig.xml`。您收到错误的原因可能是由于索引损坏，您可以做的是删除 'solr/env' 即`solr/development`或/`solr/data/development`并重新启动 solr 服务器。

```
 1\. rake sunspot:solr:stop

 2\. rm -rf solr/development (Delete your solr/development directory)

 3\. rm -rf solr/data/development

 4\. rake sunspot:solr:start

 5\. rake sunspot:solr:reindex 
```

如果问题仍然存在，请回滚您最近的更改，因为您可能添加了一些错误的配置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-05T10:52:32.973

我已经通过重新启动我的电脑来完成这项工作。我猜有一个 solr 实例错误地停止了:-？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T04:19:44.660

通过 localhost:8982（开发）检查您的太阳黑子服务器。如果您遇到与控制台相同的错误。通过 localhost:8983（生产）再试一次。就我而言，端口 8983 工作正常，我将 rails/config/sunspot.yml 中的太阳黑子配置更改为端口：8983。并解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T11:13:58.740

这意味着您的配置文件中存在问题，并且 solr 无法启动。检查太阳黑子日志。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-12T16:33:52.017

对于那些在 Heroku 生产中使用 Websolr 并在重新索引时遇到此错误的人：

请记住，在查看索引时，您必须在 Websolr 管理 GUI 的“*高级配置”选项卡下手动上传您的 schema.xml。*这是直接链接：`https://websolr.com/slices/<index_uri>/schema`

您可以`<index_uri>`从运行中`heroku config`获取并从 WEBSOLR_URL 的最后一部分获取它，如下所示：`http://index.websolr.com/solr/<index_uri>`

我遇到了这个错误，因为我错误地认为 Websolr 只会使用`schema.xml`我提交给 git 并与所有其他文件一起推送到 heroku 的`<appname>/solr/conf`文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-20T09:30:48.263

将 Rsolr gem 升级到对我有用的最新版本 1.0.10.pre1。

现在我能够重新索引我的模型，并且在生产中一切看起来都很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-22T12:58:41.420

本质是重置每个sunspot solr部分，这可能会出现问题。

删除整个`solr`目录。**这肯定会删除完整的 solr 目录 - 请仔细检查！**

```
rm -rf solr 
```

删除 sunspot solr 配置文件`config/sunspot.yml`。

```
rm config/sunspot.yml 
```

停止太阳黑子 solr。

```
bundle exec rake sunspot:solr:stop 
```

检查 sunspot solr 是否不再运行。如果有`solr`进程在运行，请注意有**PID**

```
ps aux | grep solr 
```

**通过PID**手动终止 solr 进程。`bundle exec rake sunspot:solr:stop`仅当不成功时才需要此命令。

```
kill -9 PID # (fully turns off solr - double check `ps aux|grep solr`) 
```

删除您的数据库，**仔细检查您是否确定！**然后重新创建数据库并从迁移文件中恢复架构。

```
bundle exec rake db:drop
bundle exec rake db:create
bundle exec rake db:migrate 
```

创建一个新的太阳黑子配置`config/sunspot.yml`。

```
rails generate sunspot_rails:install 
```

重新创建 solr 目录

```
bundle exec rake sunspot:solr:start 
```

创建一个新的 solr 索引

```
bundle exec rake sunspot:reindex 
```

最后用您的种子数据重新填充空数据库。

```
bundle exec rake db:seed 
```

# c++ - Boost shared_ptr 断言失败，但值不为 NULL

> ID：13340862
> 
> 赞同：1
> 
> 时间：2012-11-12T09:07:27.697
> 
> 标签：c++, boost, shared-ptr

在我的一个应用程序中，我在 boost shared_ptr 取消引用运算符中的断言中得到了一个断言失败异常：

```
T * operator-> () const // never throws
{
    BOOST_ASSERT(px != 0); <------ fails!
    return px;
} 
```

问题是使用调试器我看到 px 的值与 0 不同，类似于 0x7ff ....！这种情况可能吗？断言怎么会失败？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:25:32.063

正如您自己所说，断言并没有失败。相反，它内部引发了异常。这不一样。

我的猜测是该`boost::shared_ptr::px`成员指向了一个不正确的内存位置，它确实这样做了，因为该`boost::shared_ptr`对象本身是无效的。

例如，您是否`boost::shared_ptr`被用作某个班级的成员？如果是，请检查对象是否有效（`this`有效，它的内存是否已损坏）？

**更新：**

好的-在您澄清断言确实失败之后：您是否曾经分配过`mysocket`或什至调用过`mysocket.reset()`？

# android - 是否有关于数据类型转换函数的渲染脚本文档？

> ID：13340869
> 
> 赞同：0
> 
> 时间：2012-11-12T09:07:52.530
> 
> 标签：android, type-conversion, renderscript

在观看[了 Jeff Sharkey 精彩的 Google I/O 演示](https://developers.google.com/events/io/sessions/gooio2012/103/)并开始编写一些渲染脚本以加速我现有的音频处理项目之后。第一个问题是在给出的示例代码中，第一行代码中的转换函数没有在任何地方记录。至少不在[http://developer.android.com/guide/topics/renderscript/reference.html](http://developer.android.com/guide/topics/renderscript/reference.html)

```
float4 inColor = convert_float4(*inPixel); 
```

示例中的函数**convert_float4()**很明显，足以理解它的作用。但就我而言，我想知道它是否存在其他内置转换，例如从 char 到 float 我猜可能是 convert_float(char*) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:22:57.830

通用的答案是 RS 支持从所有基本向量数值类型到具有相同向量大小的其他类型的转换。转换的完成就像它们是用于四舍五入的普通 C 转换一样。

表格是：

```
convert_[dest type](source type) 
```

支持(2,3,4) 个向量`char,uchar,int,uint,short,ushort, and float`。

避免：

```
float4 f = (float4)myInt4; 
```

它没有做你期望它做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:51:04.420

看起来没有这样的内置插件。`convert_float4()`是 中声明的唯一转换函数[`rc_core.c`](http://androidxref.com/4.1.1/xref/frameworks/compile/libbcc/lib/ScriptCRT/rs_core.c)。

# java - 如何在 Google AppEngine 中使用 OAuth2 在 Java 中调用 API

> ID：13340872
> 
> 赞同：0
> 
> 时间：2012-11-12T09:08:08.160
> 
> 标签：java, google-app-engine, oauth-2.0

我有一个托管在 Google 应用引擎中的网络应用程序，我需要处理一些 API（日历）。我需要通过 OAuth 对用户进行身份验证并调用 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:07:52.907

我猜你说的是谷歌日历 API，因为你没有指定。有关使用 Google Calendar API（Java）的信息[在这里](https://developers.google.com/google-apps/calendar/firstapp)。该文档不是专门为 App Engine 量身定制的，但您可以在客户端库分发中看到一些[App Engine 示例](http://code.google.com/p/google-api-java-client/source/browse/?repo=samples#hg/calendar-appengine-sample)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:01:10.797

你可以试试[`scribe-java`](https://github.com/fernandezpablo85/scribe-java)。它适用于 GAE。或者，[`scribe-up`](https://github.com/leleuj/scribe-up)它可能是它的扩展，并且支持开箱即用地获取用户配置文件。

# javascript - 向下滚动时始终位于顶部的Javascript浮动div

> ID：13340876
> 
> 赞同：2
> 
> 时间：2012-11-12T09:08:25.770
> 
> 标签：javascript, html, google-chrome-extension

`div`使用位于顶部且在向下滚动时始终可见的 Javascript（或以编程方式的 CSS）构建简单浮动 s 的正确方法是什么？

现在我已经看到了这样的[例子](http://www.jtricks.com/javascript/navigation/floating.html)。当您向下滚动时，您会看到 div 跳跃和延迟。当页面的内容不是我的时，我希望它始终位于顶部，
脚本将通过 chrome 扩展注入

可以吗？像 [这样](http://jsfiddle.net/c47Qp/)的东西；但不太复杂，不依赖于页面内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:33:24.557

使用您想要保持在顶部的元素的`class`or ，您应该应用一些 CSS 规则，`id`

例如，如果您的元素类是`.topnavigation`

您可以在 jQuery 中执行以下操作

```
<style>
.topnavigation {
    width:;/* add the width here */
    position:static;
}
.topnavigation.scrolling {
    position:fixed;
    top:0px;
}
</style>
<script>
$(window).scroll(function () { 
    if($(this).scrollTop() > 50) // change 50 to what you want (work out how far the nav is from the top of the page alraedy and add it there, that'll make it smoother transition)
    {
        $('.topnavigation').addClass('scrolling');
    } else {
        $('.topnavigation').removeClass('scrolling');
    }
});
</script> 
```

如果您不能使用 jQuery，您可以使用普通的 javascript 执行以下操作：

**更新：2017 年 1 月 6 日** 我已经更新了它以使用 document.querySelector 和 Element.classList 方法。所有现代浏览器和 IE 10 > 都支持这些方法。

```
window.addEventListener('scroll',checkPosition,false);
function checkPosition()
{
    // #theid or #theclass or standard element selector
    var xNAV = document.querySelector("#topnav"); 
    if(window.scrollY > 50)
    {
        xNAV.classList.add("scrolling");
    } else {
        xNAV.classList.remove("scrolling");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:11:02.440

使用 JavaScript，确定您希望它何时浮动，然后添加 css：`position:fixed`

# outlook - Outlook 加载项：从邮件中获取联系人

> ID：13340877
> 
> 赞同：1
> 
> 时间：2012-11-12T09:08:31.777
> 
> 标签：outlook, vsto, contacts, outlook-addin, outlook-2010

我正在为 Outlook 2010 进行一些加载项开发，并且正在尝试将其`ContactItems`关联到电子邮件 ( *`MailItem`*)。我认为`MailItem.Links`集合应该返回我想要的，但它是空的。也许我走错了路，但我现在没有想法。

我有一个`Outlook.MailItem`并且我喜欢获得相关的`Outlook.ContactItem`. 当您使用 Outlook 打开一封邮件并将鼠标悬停在邮件地址上时，会出现一个联系人弹出窗口，因此链接必须位于 中的某个`MailItem`位置，但我不知道在哪里。

例如，我尝试使用`MailItem.Links`在工具提示中表示它代表项目链接到的联系人的集合。

```
Explorer explorer = application.ActiveWindow() as Explorer;
MailItem mail = explorer.Selection as MailItem;

foreach (Link l in mail.Links)
{
    System.Diagnostics.Debug.WriteLine("Link: " + l.Name);
} 
```

`MailItem`到目前为止是正确的，我可以用它做任何我想做的事情，但集合`MailItem.Links`是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:54:30.863

您应该尝试使用[`MailItem.Recipients`](http://msdn.microsoft.com/en-us/library/office/bb175516%28v=office.12%29.aspx)包含邮件将发送或已发送到的地址的集合（*即 To、CC、BCC*）。您必须检查以查看**联系人通讯录**(CAB)[`Recipient.AddressEntry`](http://msdn.microsoft.com/en-us/library/office/bb176626%28v=office.12%29.aspx)中是否存在该地址 via ，否则[您将必须使用](https://stackoverflow.com/a/11398836/175679)via解决它。**[`GetContact`](http://msdn.microsoft.com/en-us/library/office/bb175073%28v=office.12%29.aspx)[`ExchangeUser`](https://stackoverflow.com/a/11398836/175679)[`GetExchangeUser`](http://msdn.microsoft.com/en-us/library/office/bb175075%28v=office.12%29.aspx)**

 **[`AddressEntry.AddressEntryUserType`](http://msdn.microsoft.com/en-us/library/office/bb175079%28v=office.12%29.aspx)它将告诉您邮件中包含哪种类型的收件人 - Exchange[用户或列表、CAB 或基本 SMTP 地址](http://msdn.microsoft.com/en-us/library/office/bb208051%28v=office.12%29.aspx)。**

# php - PHP：在新浏览器窗口中打开重定向。可能/如何？

> ID：13340882
> 
> 赞同：0
> 
> 时间：2012-11-12T09:09:02.070
> 
> 标签：php, html, redirect

我希望你能帮助我。我们有脚本来重定向我们网络上的人。如果有人接受了我们的条款，他们将被重定向到我们的新闻页面。

现在我们希望这种重定向，作为通过单击按钮接受条款的动作`<a href="<?php print $grant_url ?>">`将在一个全新的浏览器窗口中打开（不是弹出窗口）

我们可以使用 window.open 吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:21:16.163

如果您知道登录到您系统的用户，您可以检查他是否同意您的条款或其他任何内容，然后当他单击您时，您将打开窗口或带有特定目标所需参数的标题 window.open("x.PHP ?var=&Var=,目标")

# actionscript-3 - 在 Flex 3 中以编程方式创建背景图像

> ID：13340889
> 
> 赞同：2
> 
> 时间：2012-11-12T09:09:41.560
> 
> 标签：actionscript-3, apache-flex, flex3, visualization

我正在使用 Flex 3 为仓库的某些部分开发可视化。在这个可视化中有很多块可以放置 1 到 x 个托盘，其中 x 介于 9 到 15 之间。我需要用黑色方块表示每个托盘，每个已分配到托盘但未实际占用的位置用灰色方块表示，每个空闲位置用白色方块表示。我首先想到只为块上的每个位置使用画布，并在状态发生变化时更改它们的颜色。但是由于这种方法而存在的数百个画布对于我的目的来说更新得不够快（屏幕冻结了几秒钟）。

我不想使用嵌入图像，因为我必须在应用程序中嵌入大量图像（这些图像以 4 个方向出现）。

我的想法是创建仅在特定状态需要时反映整个块状态的背景图像并缓存它们，以便计算时间分布在整个运行时。

我现在的问题是我不知道如何以可以将它们用作“背景图像”的方式创建它们。据我了解，我需要它们作为类对象，但我不知道如何在不嵌入图像时实现这一点。

我当然愿意接受更好的方法来解决我的问题。谢谢你的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:08:43.267

例如，我建议使用Sprite 的[Graphics](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html)属性。它提供了基本的绘图 API，如画线、圆和矩形。

此外，您可以在 Graphics 上绘制位图图像以产生更高级的结果。

# vb.net - 在 vb.net 应用程序的 System.Data.dll 中发生了“System.Data.SqlClient.SqlException”类型的第一次机会异常

> ID：13340890
> 
> 赞同：1
> 
> 时间：2012-11-12T09:09:54.990
> 
> 标签：vb.net

我正在创建一个 vb.net 应用程序，其中出现错误“我不知道如何解决此错误，并且表中有 4 个字段，`'System.Data.SqlClient.SqlException'`发生了第一次机会异常类型`System.Data.dll"`

1.  o_id 主键自动递增 1
2.  `c_id`静止的
3.  所有者名称`varchar()`
4.  投资

    ```
    Dim connetionString As String

    Dim cnn As SqlConnection

    Dim cmd As New SqlCommand

    connetionString = "Data Source=.\SQLEXPRESS;AttachDbFilename='C:\Users\javed\Documents\Visual Studio 2008\Projects\WindowsApplication1\WindowsApplication1\bin\Debug\Database1.mdf';Integrated Security=True;User Instance=True"

    cnn = New SqlConnection(connetionString)

    Try

        cnn.Open()
        MsgBox("Connection is Open ! ")
        cmd.Connection = cnn
        cmd.CommandText = "INSERT INTO owner_detail(c_id, o_name, investment) values(@cid,'" + TextBox1.Text + "','" + TextBox2.Text + "')"
        cmd.ExecuteNonQuery()
        MsgBox("Data is Successfully Inserted! ")
        cnn.Close()

    Catch ex As Exception

        MsgBox("Can not open connection ! ")

    End Try 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:25:56.350

您没有在任何地方添加参数@cid。

```
cmd.Parameters.Add(new SqlParameter("@cid", SqlDbType.Int))
cmd.Parameters("@cid").Value = Idvalue 
```

# c++ - 如何在 C++ 中正确使用 setfill()？

> ID：13340891
> 
> 赞同：1
> 
> 时间：2012-11-12T09:09:56.893
> 
> 标签：c++

所以我一直在解决这个问题一段时间，在成员的帮助下，我几乎完成了。我的最后一个问题在上面。

如有必要，我需要将 cout 时间格式化为 01:01:01，但是，我的输出是 1:1:1

问题在这里：

```
std::ostream& operator<< (ostream& os, const MyTime& m)
{
    os << setfill('0') << m.hours << ":" << setfill ('0') << m.minutes << ":" << setfill ('0') << m.seconds;
    return os;
} 
```

这是整个代码。

```
#include <iostream>
#include <cstdlib>
#include <cstring>
#include <iomanip>

using namespace std;
struct MyTime { int hours, minutes, seconds; };
MyTime DetermineElapsedTime(const MyTime *t1, const MyTime *t2);

const int hourSeconds = 3600;
const int minSeconds = 60;
const int dayHours = 24;
const char zero = 0;

MyTime DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
{
    long hourDiff = ((t2->hours * hourSeconds) - (t1->hours * hourSeconds));
    int timeHour = hourDiff / hourSeconds;
    long minDiff = ((t2->minutes * minSeconds) - (t1->minutes * minSeconds));
    int timeMin = minDiff / minSeconds;
    int timeSec = (t2->seconds - t1 -> seconds);
    MyTime time;
    time.hours = timeHour;
    time.minutes = timeMin;
    time.seconds = timeSec;
    return time;
}

std::ostream& operator<< (ostream& os, const MyTime& m)
{
    os << setfill('0') << m.hours << ":" << setfill ('0') << m.minutes << ":" << setfill ('0') << m.seconds;
    return os;
}

int main(void)
{
    char delim1, delim2;
    MyTime tm, tm2;
    cout << "Input two formats for the time. Separate each with a space. Ex: hr:min:sec\n";
    cin >> tm.hours >> delim1 >> tm.minutes >> delim2 >> tm.seconds;
    cin >> tm2.hours >> delim1 >> tm2.minutes >> delim2 >> tm2.seconds;

    if (tm2.hours <= tm.hours && tm2.minutes <= tm.minutes && tm2.seconds <= tm.seconds)
        {
            tm2.hours += dayHours;
        }
    cout << DetermineElapsedTime(&tm, &tm2);

    return 0;

} 
```

任何解决此问题的见解将不胜感激。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T09:11:53.607

您还需要调用[`setw`](http://www.cplusplus.com/reference/iostream/manipulators/setw/)以让流知道它必须填充输出。请记住，与 相比`setfill`，`setw`仅适用于下一段输出。

```
std::ostream& operator<< (ostream& os, const MyTime& m)
{
    return os << setfill('0') << setw(2) << m.hours << ":"
              << setw(2) << m.minutes << ":"
              << setw(2) << m.seconds;
} 
```

# python - OSError: [Errno 11] 资源暂时不可用。这是什么原因造成的？

> ID：13340893
> 
> 赞同：10
> 
> 时间：2012-11-12T09:10:04.727
> 
> 标签：python, pipe, fifo

**背景**

我有两个需要相互通信的 python 进程。通信由一个名为 Pipe 的类处理。我为此创建了一个单独的类，因为需要传达的大部分信息都以字典的形式出现，因此 Pipe 实现了一个非常简单的协议来执行此操作。

这是管道构造函数：

```
def __init__(self,sPath):
    """
    create the fifo. if it already exists just associate with it
    """
    self.sPath = sPath
    if not os.path.exists(sPath):
        try:
            os.mkfifo(sPath)
        except:
            raise Exception('cannot mkfifo at path \n {0}'.format(sPath))
    self.iFH = os.open(sPath,os.O_RDWR | os.O_NONBLOCK)
    self.iFHBlocking = os.open(sPath,os.O_RDWR) 
```

所以理想情况下，我会在每个进程中构建一个具有相同路径的管道，他们就能很好地交谈。

我将跳过有关协议的内容，因为我认为这在很大程度上是不必要的。

所有读取和写入操作都使用以下“基本”函数：

```
def base_read_blocking(self,iLen):
    self.lock()
    lBytes = os.read(self.iFHBlocking,iLen)
    self.unlock()
    return lBytes

def base_read(self,iLen):
    print('entering base read')
    self.lock()
    lBytes = os.read(self.iFH,iLen)
    self.unlock()
    print('exiting base read')
    return lBytes

def base_write_blocking(self,lBytes):
    self.lock()
    safe_write(self.iFHBlocking,lBytes)
    self.unlock()

def base_write(self,lBytes):
    print('entering base write')
    self.lock()
    safe_write(self.iFH,lBytes)
    self.unlock()
    print('exiting base write') 
```

在另一篇文章中建议使用 safe_write

```
def safe_write(*args, **kwargs):
    while True:
        try:
            return os.write(*args, **kwargs)
        except OSError as e:
            if e.errno == 35:
                import time
                print(".")
                time.sleep(0.5)
            else:
                raise 
```

锁定和解锁是这样处理的：

```
def lock(self):
    print('locking...')
    while True:
        try:
            os.mkdir(self.get_lock_dir())
            print('...locked')
            return
        except OSError as e:
            if e.errno != 17:
                raise e

def unlock(self):
    try:
        os.rmdir(self.get_lock_dir())
    except OSError as e:
        if e.errno != 2:
            raise e
    print('unlocked') 
```

**问题**

这*有时*会发生：

```
....in base_read
lBytes = os.read(self.iFH,iLen)
OSError: [Errno 11] Resource temporarily unavailable 
```

有时这很好。

**神奇的解决方案**

我似乎已经阻止了问题的发生。请注意，这不是我在回答我自己的问题。我的问题将在下一节中解释。

我将读取函数更改为看起来更像这样，它整理了一些东西：

```
def base_read(self,iLen):
    while not self.ready_for_reading():
        import time
        print('.')
        time.sleep(0.5)

    lBytes = ''.encode('utf-8')
    while len(lBytes)<iLen:
        self.lock()
        try:
            lBytes += os.read(self.iFH,iLen)
        except OSError as e:
            if e.errno == 11:
                import time
                print('.')
                time.sleep(0.5)
        finally:
            self.unlock()
        return lBytes

def ready_for_reading(self):
    lR,lW,lX = select.select([self.iFH,],[],[],self.iTimeout)
    if not lR:
        return False
    lR,lW,lX = select.select([self.iFHBlocking],[],[],self.iTimeout)
    if not lR:
        return False
    return True 
```

**问题**

我正在努力找出它暂时不可用的确切原因。由于锁定机制，这两个进程无法同时访问实际的命名管道（除非我弄错了？）所以这是由于我的程序没有考虑到 fifos 更基本的东西吗？

我真正想要的只是一个解释......我找到的解决方案有效，但它看起来很神奇。任何人都可以提供解释吗？

**系统**

*   Ubuntu 12.04，
*   Python3.2.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:53:18.840

我之前在[Java 上也遇到过类似的问题](https://stackoverflow.com/questions/8384000/java-io-ioexception-error-11)。看看接受的答案——问题是我在循环中创建新线程。我建议您查看创建管道的代码，并确保您没有创建多个管道。

# jquery - jQuery：如何在选中“可以编辑”选项的情况下获取所有电子邮件？

> ID：13340894
> 
> 赞同：1
> 
> 时间：2012-11-12T09:10:08.717
> 
> 标签：jquery

```
 <table >
        <tr>
            <td>test1@gmail.com</td>
            <td>
                <select name="limit">
                    <option selected="selected">Can Edit</option>
                    <option>Can View</option>
                </select>
            </td>
            <td>
                <i class="icon-remove"></i>
            </td>
        </tr>
        <tr>
            <td>test2@gmail.com</td>
            <td>
                <select name="limit">
                    <option>Can Edit</option>
                    <option selected="selected">Can View</option>
                </select>
            </td>
            <td>
                <i class="icon-remove"></i>
            </td>
        </tr>
    </table> 
```

考虑上面的 HTML，如何获取所有`Can Edit`使用 jQuery 选择选项的电子邮件？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:11:57.780

```
var emails = [];

$('option:selected').each(function()
{
  if ( $(this).html() == 'Can Edit' )
    emails.push( $(this).closest('tr').find('td:first').html() );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:18:29.090

*试试这个：（显示每封邮件，里面有一个选项+可以编辑）*

```
$("tr:has(td:eq(1):has(option:selected:contains('Can Edit')))").each(function (i,n){

  alert($(this).find("td:first").text());

}) 
```

警报：

```
test1@gmail.com 
test22221@gmail.com 
```

[http://jsbin.com/aroxuw/4/edit](http://jsbin.com/aroxuw/4/edit)

# sql-server - 在 WindowsPhone8 中连接外部数据库的任何类？

> ID：13340896
> 
> 赞同：1
> 
> 时间：2012-11-12T09:10:32.970
> 
> 标签：sql-server, c#-4.0, windows-phone-8

我检查了[http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.aspx) 但似乎 DbConnection 的每个实现都不能在 WP8 环境中使用。

WP8中有没有类似Sqlconnection的类？？？

谢谢，贾维斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:31:29.720

WP8 中没有。所有数据访问都是通过云层ala REST 或某种http 层。您在手机上安装了 SQLCE，并且可以使用 SQL Lite，但是没有“让我的 WP8 应用程序在某处删除 SQL 数据库”类型的功能。

# youtube - 我可以在不使用 FormData 刷新整页的情况下上传到 youtube 吗？

> ID：13340903
> 
> 赞同：3
> 
> 时间：2012-11-12T09:11:06.847
> 
> 标签：youtube, xmlhttprequest, cors

我正在尝试从单页应用程序对 Youtube API 使用 CORS。关键是要避免重新加载整个页面（就像[http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html](http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html)正在做的那样）。通常有两种方法可以做到这一点：

*   使用隐藏的 iframe

或者

*   将 XMLHttpRequest 与 FormData 一起使用

后者最优雅，但在一些劣质浏览器中不支持。我很幸运，我可能会忽略那些浏览器。

现在我写了以下代码：

```
 var fd = new FormData();
    fd.append('token', token);
    fd.append('file', element.files[0]);
    var xhr = new XMLHttpRequest();
    xhr.upload.addEventListener("progress", uploadProgress, false);
    xhr.addEventListener("load", uploadComplete, false);
    xhr.addEventListener("error", uploadError, false);
    xhr.addEventListener("abort", uploadAbort, false);
    xhr.open("POST", $scope.uploadData.uploadUrl + '?nexturl=' + $location.absUrl());
    xhr.send(fd); 
```

这有效（例如，它上传整个文件，同时愉快地发出进度事件），但最后它出错了。我不确定我做错了什么，但我真的很想看到一个使用这种策略而不是整页刷新的示例。尤其是处理我很好奇的响应和 id。

你有这样的工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:01:43.080

可以使用[Direct Uploading API v2](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)和 FormData + XHR2。就像是：

```
var DEV_KEY = '<here application key: you can find at https://code.google.com/apis/youtube/dashboard/gwt/index.html>';
var ACCESS_TOKEN = '<here oAuth2 token>';
var TOKEN_TYPE = 'Bearer ';

// Helper method to set up all the required headers for making authorized calls to the YouTube API.
function generateYouTubeApiHeaders() {
    return {
      Authorization: TOKEN_TYPE + ACCESS_TOKEN,
      'GData-Version': 2,
      'X-GData-Key': 'key=' + DEV_KEY,
      'X-GData-Client': 'App',
      'Slug': Math.random().toString()
    };
} 
// Helper method to set up XML request for the video.
function generateXmlRequest(title, description, category, keywords) {
    return '<?xml version="1.0"?> <entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007"> <media:group> <media:title type="plain">' + title + '</media:title> <media:description type="plain">' + description + '</media:description> <media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">' + category + '</media:category> <media:keywords>' + keywords + '</media:keywords></media:group> </entry>';
}

// Create XHR and add event listeners
var xhr = new XMLHttpRequest();
xhr.upload.addEventListener("progress", uploadProgress, false);
xhr.addEventListener("load", uploadComplete, false);
xhr.addEventListener("error", uploadError, false);
xhr.addEventListener("abort", uploadAbort, false);

// Specify POST target
xhr.open("POST", 'https://uploads.gdata.youtube.com/feeds/api/users/default/uploads');

// Prepare form data
var fd = new FormData();

// The order of attachments is absolutely important
fd.append('xmlrequest', generateXmlRequest('Test', 'Video', 'Autos', 'dsdfsdf, sdsdf'));
fd.append('video', document.forms.uploadNewVideoForm.file.files[0]);

// Add authentication headers
var headers = generateYouTubeApiHeaders();
for(var header in headers) {
    xhr.setRequestHeader(header, headers[header]);
}

// Send request
xhr.send(fd); 
```

# php - POST 值未出现在 recaptcha 中

> ID：13340907
> 
> 赞同：3
> 
> 时间：2012-11-12T09:11:40.723
> 
> 标签：php, post, recaptcha

我有这个页面，其中包含一个表格。这些值被编辑到处理这些值`POST`的下一页（ ）。`check_values.php`现在我想添加一个验证码。但它要求您将表单重定向到 a `verify.php`，当我重定向到时，它似乎清除了发布的变量`check_values.php`。在这种情况下，我不想使用会话变量。是否有任何其他方法可以实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:16:56.543

以下作品完美 [http://www.jquery4u.com/forms/setup-user-friendly-captcha-jqueryphp/](http://www.jquery4u.com/forms/setup-user-friendly-captcha-jqueryphp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:15:36.350

是的，POST 在页面请求后不会持续存在。你必须以某种方式重新发送它们。

如果你想坚持使用 POST，在验证页面中，你可以使用`POST`ed 变量填充表单，然后使用 Javascript 提交它。就像是

```
<form id='blah' method='post' action='check_values.php'>
    <input type='hidden' value='<?php echo $_POST['var1']; ?>' />
    <input type='hidden' value='<?php echo $_POST['var2']; ?>' />
</form>

<script type='text/javascript'>
    document.getElementById("blah").submit();
</script> 
```

另一个选项是[stream_context_create](http://php.net/manual/en/function.stream-context-create.php)，您可以在其中发送带有 POST 数据的重定向标头。但这可能仅对打开流有用，并且重定向可能很困难。

* * *

当然，最简单的方法是使用重定向标头并使用 GET 发送数据，正如@asprin 解释的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:18:29.630

您也可以使用查询字符串

在您的`verify.php`页面中，将查询字符串添加到该位置，即

```
header('Location: check_values.php?captcha='.$postedValue.''); 
```

然后在 中`check_values.php`，您可以使用`$_GET`来捕获该值。

```
$value = $_GET['captcha']; 
```

但请确保清理来自查询字符串的所有数据

# android - 在没有响铃的情况下以编程方式拒绝呼叫

> ID：13340912
> 
> 赞同：9
> 
> 时间：2012-11-12T09:12:04.050
> 
> 标签：android, phone-call, telephonymanager

我正在创建一个应用程序来拒绝来自特定号码的呼叫，甚至没有给呼叫者一个铃声。

我有一个代码在部分响铃后拒绝来电。请不要说这个问题是重复的。我一直在搜索代码以拒绝没有响铃的呼叫很长时间仍然没有找到解决方案。请帮助我！

```
public void onReceive(Context context, Intent intent) {
    Bundle b = intent.getExtras();
    incommingNumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

     String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

        for(int i=0;i<blockedNumbers.length;i++)
        {
            if(incommingNumber.equalsIgnoreCase(blockedNumbers[i]))
            {
                TelephonyManager telephony = (TelephonyManager) 
                context.getSystemService(Context.TELEPHONY_SERVICE);  
                  try {
                   Class c = Class.forName(telephony.getClass().getName());
                   Method m = c.getDeclaredMethod("getITelephony");
                   m.setAccessible(true);
                   telephonyService = (ITelephony) m.invoke(telephony);
                   telephonyService.silenceRinger();
                   telephonyService.endCall();
                  } catch (Exception e) {
                   e.printStackTrace();
                  }
            }
        }

    } 
```

这是我用来拒绝来电的代码。但它用一环拒绝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T07:47:07.437

你必须在清单中定义优先级..例如：

```
 <receiver android:name=".CallReceiver">
    <intent-filter android:priority="100">
        <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
 </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:24:19.520

我相信您必须致电：

```
setResultData(null); 
```

通过这样做，您“杀死”了通过所有接收器传递的消息。

如果这对您没有帮助，您应该尝试找到一种方法，让您的接收器在系统中具有更高的优先级，以便您可以接管并将结果数据设置为所有后续接收器调用的 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-22T12:15:46.817

在 android manifest 文件中使用这些权限；

```
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

第一个权限“MODIFY_PHONE_STATE”非常重要，因为它处理在通话期间禁用电话铃声。当有人打电话给你时，你的手机会显示来电号码的FLASH TYPE。没有响铃。

这项工作在我的最后。如果发现任何问题，请告诉我。

# jquery - 从javascript设置asp图像src属性

> ID：13340920
> 
> 赞同：0
> 
> 时间：2012-11-12T09:12:37.323
> 
> 标签：jquery, asp.net

我正在尝试从 javascript 设置 asp 图像元素 src 属性，但未设置 url 属性。

```
function slideshow() {
  $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/RollingScreen.aspx/GetNextImage",
    dataType: "json",
    data: "{}",
    success: function (data) {
      //this changes the image on the web page
      $('#imgSlideShow').attr("src","~/1.png");
      $("#txt1").val(data.d);
      //fires another sleep/image cycle
      setTimeout(slideshow,5000);
    },
    error: function (result) {
      alert(result.message);
    }
  });
}

$(document).ready(function () {
  //Kicks the slideshow
  slideshow();
}); 
```

我的 aspx 图像元素是

```
<asp:Image ID="imgSlideShow" runat="server" Height="300px" Width="600px" ImageAlign="Middle" ImageUrl="~/1.png"/>.... 
```

谁能帮帮我吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:18:19.710

您的错误是您尝试使用您在 asp.net 中设置的 ID。但是 runat="server" 元素使用不同的 ID 呈现。类似的东西`Content1_Content2_imgSlideShow`。您可以`imgSlideShow.ClientID`在服务器端使用它而不是`$('#' + jsVariableWithClientID)`. 但我更喜欢使用一些独特的类（将客户端 ID 传递给 JS 没有问题）：

`<asp:Image ID="imgSlideShow" CssClass="imgSlideShow" runat="server" Height="300px" Width="600px" ImageAlign="Middle" ImageUrl="~/1.png"/>`

并且比在 JS 中，使用类选择器：

```
$('.imgSlideShow').attr("src","/1.png"); 
```

另一个问题是 JS 不知道`~`- 这只是 asp.net 功能。您应该像这样为 src 指定图像 url：（ `"/1.png"`假设它位于根目录中）

# .net - 执行存储过程返回多个表而不使用 SqlDataAdapter.Fill()？

> ID：13340921
> 
> 赞同：4
> 
> 时间：2012-11-12T09:12:42.653
> 
> 标签：.net, sql-server, dataset

我知道通常推荐的从存储过程填充 DataSet 实例的方法是使用 SqlDataAdapter.Fill(DataSet)。我能找到的每个答案都说要以开箱即用的方式使用它。我通常会同意，它工作得很好。

但是，当您需要处理存储过程输出和 DataSet 输入之间的数据时，它就会崩溃。具体来说，当在输出中使用自定义 CLR 类型时，它会中断使用 CLR的列的列索引`InvalidOperationException: DataReader.GetFieldType(n) returned null.`在哪里`n`（在其中一个表中；似乎没有明显的方法可以告诉列索引引用哪个表）输入它的输出。这是可以理解的，因为读者不知道相关列中的数据类型。

我可以打破CLR类型的反序列化逻辑并在两个地方使用它，**但**我似乎没有时间在Fill（）发生故障之前调用任何这样的反序列化方法。

我知道`SqlCommand.ExecuteReader()`，但似乎只能从那张桌子中取出一张桌子。

有问题的 CLR 类型旨在用更严格的内容替换核心系统字段之一（当前存储为自由格式文本）。遍历数据库并向此类字段的每个返回实例添加方法调用的问题已被讨论为一种可能性，但肯定是一项不平凡的工作。因此，人们认为可以在 DAL 中进行转换（只要求可以以编程方式识别这些列，这是可行的），从而使存储对客户端透明，*并且*客户端对数据的使用对数据库仍然透明。

**因此：**如何在不使用 SqlDataAdapter.Fill() 的情况下访问存储过程输出中的所有表？**或者**，我如何挂钩 SqlDataAdapter.Fill() 的执行以在 SP 的执行和填充 DataSet 之间进行手动处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:16:16.677

您**可以** 使用 选择多个表`DataReader`。您可以使用[`reader.NextResult`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.nextresult.aspx)来检查是否有更多结果集并将数据阅读器推进到它：

```
using (var con = new SqlConnection(Properties.Settings.Default.ConnectionString))
{
    using (var cmd = new SqlCommand("StoredProcedureName", con))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        int rowCount = 0;
        con.Open();
        using (IDataReader rdr = cmd.ExecuteReader())
        {
            while (rdr.Read())
            {
                Console.WriteLine("Object 1 in Row {0}: '{1}'", ++rowCount, rdr[0]);
            }
            if (rdr.NextResult())
            {
                rowCount = 0;
                while (rdr.Read())
                {
                    Console.WriteLine("Object 1 in Row {0}: '{1}'", ++rowCount, rdr[0]);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:52:37.067

看起来它实际上比我想象的要容易。虽然[Tim Schmelter 的回答](https://stackoverflow.com/a/13340975/486504)让我进行了实验，但真正的诀窍是简单地**将 CLR 类型程序集添加到 DAL 项目**中。然后一切都到位了`SqlDataAdapter.Fill(DataSet)`; 突然之间，它知道如何处理从 SQL Server 接收到的二进制数据，显然（未经验证，但合理）调用类型的`ToString()`. 我还没有验证当 DAL 代码创建一个在其他地方使用的 DataSet 时会发生什么，但在这两者之间，我认为有可能提出一个可行的解决方案。

# artificial-intelligence - 决策树。噪音策略

> ID：13340922
> 
> 赞同：0
> 
> 时间：2012-11-12T09:12:45.603
> 
> 标签：artificial-intelligence, data-mining, decision-tree

在决策树中对抗噪声的好策略是什么？

在我的训练数据中，

我有两条具有相同属性的记录，但它们给出不同的分类。

1.  女，奢华，LV，是的
2.  女、奢华、LV、无

根据我的阅读，它说要返回这两条记录的复数分类。

但是，当我想进行预测时，这会引发一个问题，因为我的预测的输出应该是是或否。

因此，试图找出在这种情况下我可以使用哪些策略来预测。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:18:55.763

当类别预测未定时：

1.  最简单（也是常见）的方法是**预测多数类**。
2.  **获取更多信息**。例如，包括附加属性（如果可用）或获取更多训练样本（如果可用）。
3.  **删除一些信息**。目的是在尽可能多地保留预测信息的同时去除尽可能多的噪声源。通常它是通过删除无用的属性来完成的。在树的情况下，可以通过修剪来完成。最终，您可以删除异常值（例如错误测量的样本），但您必须知道哪个样本是异常值。

# bash - 如何在bash中编写条件

> ID：13340925
> 
> 赞同：0
> 
> 时间：2012-11-12T09:13:15.307
> 
> 标签：bash

检查偶数 - 好的

```
if [ $(( $n % 2 )) -eq 0 ]
then
  echo "$n is even number"
fi 
```

怎么查奇数？

```
if [ $(( $n % ????? )) -eq 0 ]
then
  echo "$n is odd number"
fi 
```

感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:19:28.567

使用“不等于 0”：

```
if [ $(( $n % 2)) -ne 0 ]
then
    echo "$n is odd"
fi 
```

另见：[http ://tldp.org/LDP/abs/html/comparison-ops.html](http://tldp.org/LDP/abs/html/comparison-ops.html)

您也可以使用“n%2 等于 1”，因为奇数除以 2 的余数是 1：

```
if [ $(( $1 % 2)) -eq 1 ]
then
    echo "$1 is odd"
fi 
```

但前者（不等于0）是更一般的情况，所以我更喜欢它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:49:04.890

上面的所有答案都使用一个`[`已过时的方括号`bash`（我们正在谈论`bash`，对吗？）。确定奇数或偶数的**最佳**`n`做法是：

```
if (( n%2==0 )); then
    printf "%d is even\n" $n
else
    printf "%d is odd\n" $n
fi 
```

或者，按照 OP 的要求，即检查是否`n`为奇数：

```
if (( n%2 )); then
    printf "%d is odd\n" $n
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:21:17.587

```
echo -n "Enter numnber : "
read n 
rem=$(( $n % 2 )) 
if [ $rem -eq 0 ]then  
   echo "$n is even number"
else  
  echo "$n is odd number"
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T17:25:51.763

我更喜欢简单的：

```
x=8; ((x%2)) || echo even

x=7; ((x%2)) && echo odd 
```

# r - 在前瞻性的基础上计算滚动已实现波动率

> ID：13340926
> 
> 赞同：0
> 
> 时间：2012-11-12T09:13:16.370
> 
> 标签：r, xts

我正在寻找一种在滚动前瞻基础上快速计算已实现波动率的方法。所以我想用今天作为接下来 n 天的第一次观察来计算标准偏差。

目前，我使用以下代码计算反向的实际波动率：

```
index.realized <- xts(apply(index.ret,2,runSD,n=125), index(index.ret))*sqrt(252)
index.realized <- na.locf(index.realized, fromLast=TRUE) 
```

我尝试设置`n = -125`但不出所料，这不起作用。

谢谢你。

**编辑**

为了澄清我正在尝试做的事情，这是我用来完成此操作的 for 循环：

```
for(i in 1:nrow(index.ret)){   
   bear.realized[i,] = sd(bear.ret[i:(i+124),]) * sqrt(252)   
   index.realized[i,] = sd(index.ret[i:(i+124),]) * sqrt(252) 
} 
```

对于我没有足够数据来计算波动率的最后 124 个观察值，我希望它采用最后一个“正确”计算并将其用于该系列的其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:41:50.657

一种方法是用否定“滞后”你的系列`k`（注意在than和`k`中的解释不同）。`lag.xts``lag.ts``lag.zoo`

```
getSymbols("SPY")
spy <- ROC(Cl(SPY))
# note that k is interpreted differently from lag.ts and lag.zoo
spy$SPY.Lag <- lag(spy,-125)
# remove trailing NA
spy <- na.omit(spy)
rv <- runSD(spy$SPY.Lag,n=125)*sqrt(252) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:33:09.817

好的，我解决了。这实际上很简单，只是想这个完全错误的方式。

```
index.realized <- xts(apply(index.ret,2,runSD,n=125), index(index.ret))*sqrt(252)
index.realized <- lag(index.realized, -124)
index.realized <- na.locf(index.realized) 
```

只需按正常计算已实现的波动率，然后将其滞后适当的数字，使其具有“前瞻性”。

# iphone - MKReverseGeocoder 已弃用

> ID：13340932
> 
> 赞同：2
> 
> 时间：2012-11-12T09:13:25.743
> 
> 标签：iphone, ios6, mapkit, cllocationmanager, clgeocoder

我刚刚看到 MKReverseGeocoder 已被弃用。问题是，如何以最简单的方式更改为 CLGeocoder？很抱歉源代码太长（我认为你认为它很简单，但我对此很陌生）。这是我之前得到的...

StoreLocation.h

```
@interface StoreLocation : NSObject <MKAnnotation> {

    CLLocationCoordinate2D coordinate;

}

@property (nonatomic, readwrite) CLLocationCoordinate2D coordinate;
@property (nonatomic, readwrite) NSString *subtitle;

-(id)initWithCoordinate:(CLLocationCoordinate2D) coordinate;

- (NSString *)subtitle;

- (NSString *)title;

@end 
```

StoreLocation.m

```
@implementation StoreLocation
@synthesize coordinate,subtitle;

-(NSString *)subtitle{

    NSUserDefaults *userDef = [NSUserDefaults standardUserDefaults];
    if ([userDef boolForKey:@"SavedAddress"]) {
        NSString *savedAddress = [[NSUserDefaults standardUserDefaults] stringForKey:@"SavedAddress"];
        return savedAddress;
    }
    else {
        return subtitle;
    }
}

-(id)initWithCoordinate:(CLLocationCoordinate2D) coor{
    self.coordinate=coor;
    return self;
}

- (void)setCoordinate:(CLLocationCoordinate2D)coor {
    MKReverseGeocoder *geocoder = [[MKReverseGeocoder alloc] initWithCoordinate:coor];
    geocoder.delegate = self;
    coordinate = coor;
    [geocoder start];
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFailWithError:(NSError *)error {
    NSLog(@"fail %@", error);
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark {
    self.subtitle = [placemark.addressDictionary valueForKey:@"Street"];

    NSUserDefaults *userDef = [NSUserDefaults standardUserDefaults];
    [userDef setValue:subtitle forKey:@"SavedAddress"];
} 
```

MapViewController.m

```
 -(void) locationManager: (CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation*)oldLocation{

    MKGeocoder *geocoder = [[MKReverseGeocoder alloc] initWithCoordinate:location];
        [geocoder start];
    }

    - (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark{
        NSString *streetAddress = [NSString stringWithFormat:@"%@, %@",
                                   [placemark.addressDictionary objectForKey:(NSString *)kABPersonAddressStreetKey],
                                   [placemark.addressDictionary objectForKey:(NSString *)kABPersonAddressCityKey]];

        mapView.userLocation.subtitle = streetAddress;      
    }
-(IBAction)storeLocation {

    StoreLocation *position=[[StoreLocation alloc] initWithCoordinate:location];    [mapView addAnnotation:position]; }

    - (MKAnnotationView *)mapView:(MKMapView *)mapview
                viewForAnnotation:(id <MKAnnotation>)dropPin
    {
        if ([dropPin isKindOfClass:MKUserLocation.class])
        {
            return nil;
        }

        MKPinAnnotationView *pinView = (MKPinAnnotationView*)[mapview dequeueReusableAnnotationViewWithIdentifier:@"annot"];
        if (!pinView)
        {
            pinView = [[MKPinAnnotationView alloc] initWithAnnotation:dropPin reuseIdentifier:@"annot"];
            pinView.canShowCallout = YES;
        }
        else {
            pinView.annotation = dropPin;
        }
        return pinView;
    } 
```

感谢一千遍！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:27:45.537

也许像这样？

MKReverseGeocoder 在 iOS4 之后的所有固件中都已弃用。这只是意味着它现在已经过时并且不赞成使用过时的类。请改用 CLGeocoder，如下所示：

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    [geocoder reverseGeocodeLocation:self.locationManager.location // You can pass aLocation here instead 
                   completionHandler:^(NSArray *placemarks, NSError *error) {

                       dispatch_async(dispatch_get_main_queue(),^ {
                           // do stuff with placemarks on the main thread

                       if (placemarks.count == 1) {

                       CLPlacemark *place = [placemarks objectAtIndex:0];

                       NSString *zipString = [place.addressDictionary valueForKey:@"ZIP"];

                       [self performSelectorInBackground:@selector(showWeatherFor:) withObject:zipString];

                       }

 }); 
```

}]; 如果你想对一对硬编码的坐标进行反向地理编码——

用您的纬度和经度初始化 CLLocation 位置：

```
CLLocation *aLocation = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude]; 
```

我还想指出，您仍然可以使用 MKReverseGeocoder。不过，它可能会在未来的 iOS 更新中被删除。

# xcode - 是否可以在 Windows 7 机器上安装 xcode？

> ID：13340933
> 
> 赞同：-3
> 
> 时间：2012-11-12T09:13:43.297
> 
> 标签：xcode, windows

我有一个关于在 Windows 操作系统中运行 XCode 的问题

是否可以在 Windows 7 机器上安装 xcode？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:17:55.967

让你这样做不符合 Apple 的利益，所以他们不会让事情变得容易......你可能会使用 VM 或 Hackintosh（我知道有一段时间使用 hackintosh 的开发人员）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T09:15:50.963

使用虚拟机（例如 VirtualBox）在 Windows 中运行 OSX。

# objective-c - 识别特定的声音

> ID：13340937
> 
> 赞同：2
> 
> 时间：2012-11-12T09:14:07.113
> 
> 标签：objective-c, ios, core-audio

我正在尝试识别一种特定的声音——棒球被球棒击中。我已经测量了许多被击球记录的赫兹，并为击球建立了一个相对可靠的赫兹范围。我希望使用记录的声音所在的赫兹范围来识别麦克风记录的打击。这通常效果很好，但某些像哨子一样的声音确实在同一范围内。如何更可靠地识别特定声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:25:16.590

除了频率之外，您的程序还可以评估随时间变化的幅度（包络）。如果一个声音是一秒钟，那么它就没有资格。如果它的攻击速度太慢，它就没有资格。

除了基本频率之外，您还可以检测/匹配频率波动以及音色/谐波。

# ios - 如何为 2 个不同的 UIImageView 调用 TouchesMoved

> ID：13340938
> 
> 赞同：0
> 
> 时间：2012-11-12T09:14:16.320
> 
> 标签：ios, uitouch

你好，我有 2`UIImageViews`个`UIView`。

一旦我接触到`UIImageView` `touchesBegan`方法就会被调用。但是一旦我拖动`UIImageView`然后`touchesMoved`被调用。但同时也称为`touchesMoved`第二个。`UIImageView`

你能帮我如何获得`touchesMoved`这两个事件`UIImageViews`吗？

这是我的代码

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];

    if (CGRectContainsPoint(iv1.frame,currentPoint)==YES)
        NSLog(@"iv1 Begin");
    if (CGRectContainsPoint(iv2.frame,currentPoint)==YES)
        NSLog(@"iv2 Begin");
}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    if(CGRectContainsPoint(iv1.frame,currentPoint)==YES)
        NSLog(@"iv1 Moved NO");
    if(CGRectContainsPoint(iv2.frame,currentPoint)==NO)
        NSLog(@"iv1 Moved YES");
    if(CGRectContainsPoint(iv2.frame,currentPoint)==YES)
        NSLog(@"iv2 Moved NO");
    if(CGRectContainsPoint(iv2.frame,currentPoint)==NO)
        NSLog(@"iv2 Moved NO");
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];

    if (CGRectContainsPoint(iv1.frame,currentPoint)==YES)
        NSLog(@"iv1 End");
    if (CGRectContainsPoint(iv1.frame,currentPoint)==YES)
        NSLog(@"iv2 End");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:26:38.443

您可以使用链接到两个视图的两个插座，这是在触摸方法中重新识别两个视图的代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   UITouch *t = [touches anyObject];
   touchedView = t.view;
   if (t.view == view1) {

    //todo something with view1;

   } else if (t.view == view2) {

      //todo something with view2

   }
} 
```

# plone - 是否可以在 Ploneboard 论坛中将线程从一个论坛移动到另一个论坛？

> ID：13340942
> 
> 赞同：0
> 
> 时间：2012-11-12T09:14:25.933
> 
> 标签：plone, forum

目前，我们使用 Plone 3.3.5 和 Ploneboard 2.2，并且我们在我们的网站上有几个不同主题的论坛。有时用户在错误的论坛中发布他们的消息，我们希望将这些帖子移至适当的论坛。不幸的是，这不起作用。

更准确地说：在论坛“A”中显示线程“xyz”时，我可以使用“操作”>“剪切”下拉菜单并获取“xyz”被剪切的消息。但这并没有发生，“xyz”仍在论坛“A”中。当我随后在论坛“B”中使用“操作”>“粘贴”下拉菜单时，我收到不允许粘贴页面的消息。当我在论坛“B”的线程“abc”中做同样的事情时，什么也没有发生。

我的问题是，Ploneboard 是否旨在剪切一个论坛中的线程并将其粘贴到另一个论坛中，或者是否根本不提供此功能。

我们计划升级到 Plone 4。在更新版本的 Ploneboard 中是否可以将线程从一个论坛移动到另一个论坛？如果没有，是否有具有此功能的替代留言板/论坛解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:44:54.200

我发现了你同样的问题。对于 Plone 3.3.x，我开发了这个产品：Products.PloneboardPasteObject 你可以在 pypi 上找到它：[http ://pypi.python.org/pypi/Products.PloneboardPasteObject](http://pypi.python.org/pypi/Products.PloneboardPasteObject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:21:01.600

我建议启动 Plone 4 的测试实例并试用最新版本的 Ploneboard (3.3)。因为线程只是内容对象，我认为 Ploneboard 不需要做任何特别的事情来“支持”线程的剪切和粘贴。所以，我的猜测是，要么 A）它是一个错误，并且可能在更新的版本中得到修复，要么 B）有一些深层原因为什么不能支持它，在这种情况下，它不太可能在更新的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:14:11.193

A`Ploneboard`允许`PloneboardForum`s。PloneboardForum 允许`PloneboardConversation`s。PloneboardConversation 允许`PloneboardComment`s。

看：

*   [https://github.com/collective/Products.Ploneboard/tree/master/Products/Ploneboard/profiles/default/types](https://github.com/collective/Products.Ploneboard/tree/master/Products/Ploneboard/profiles/default/types)

了解更多信息。特别是，请参阅上述每种类型的以下属性（这个来自 Ploneboard.xml）：

```
 <property name="filter_content_types">True</property>
 <property name="allowed_content_types">
  <element value="PloneboardForum"/>
 </property> 
```

您只能将对象粘贴到允许您尝试粘贴的对象类型的其他对象中。**这就是 Plone 的一般工作方式，**而不是 Ploneboard 特定的。

Re: Plone 4\. 升级不会改变这个基本的 Plone 功能。

回复：其他 Plone 论坛软件：使用其他论坛软件不会改变这个基本的 Plone 功能，除了定义不同内容类型和约束的其他论坛软件可能例外。

# asp.net - 处理动态 HtmlInputSubmit 控件的 ServerClick 事件

> ID：13340954
> 
> 赞同：0
> 
> 时间：2012-11-12T09:15:17.257
> 
> 标签：asp.net, event-handling, submit

我是 ASP .Net 编程的初学者。
我正在开发一个小的培训网络应用程序。
我开发了一个 Web 表单，用户可以在其中将商品添加到购物车中。
用户的购物车与会话变量匹配。

我在 Page_PreRender 事件处理程序中检查用户的购物车是否为空。
如果购物车不为空，则将表格插入到表单中。
购物车中的每一项都与表格中的一行相匹配。
一个项目行包含一个 HtmlInputSubmit 以从购物车中删除该项目。

这是我编写的用于动态创建“删除项目” HtmlInputSubmit 的代码：

```
submitSupprimerArt = new HtmlInputSubmit();
cellTblCaddie.Controls.Add(submitSupprimerArt);

submitSupprimerArt.Value = "Supprimer " + article.Id;
submitSupprimerArt.Attributes.Add("articleId", article.Id);
submitSupprimerArt.ServerClick += new EventHandler(submitSupprimerArt_Click); 
```

当用户单击 HtmlInputSubmit 时，会进行回发，但不会调用 submitSupprimerArt_Click 事件处理程序。
有人可以给我一个理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:20:36.390

我不想，但我终于看到了培训应用程序的解决方案。
我可以描述解决我的问题所需的操作，但我无法准确解释为什么必须执行这些操作。

诀窍是在 ASPX 页面中声明 PlaceHolder 控件。
PlaceHolder 必须用 Page_Load 事件处理程序中的“删除项目”按钮填充，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    // ...

    caddie = (ListeArticles)this.Session["caddie"];
    if (caddie != null)
    {
        foreach (Article article in caddie)
        {
            btnSupprimerArt = new Button();
            this.phBoutonsSupprArt.Controls.Add(btnSupprimerArt);

            btnSupprimerArt.ID = "btnSupprimerArt" + article.Id;
            btnSupprimerArt.Command += new CommandEventHandler(btnSupprimerArt_Command);
            btnSupprimerArt.CommandName = article.Id;
            btnSupprimerArt.Text = "Supprimer " + article.Id;
        }
    }
} 
```

PlaceHolder 的 Controls 属性从 Page_PreRender 事件处理程序中清除。
然后从 Page_PreRender 事件处理程序中创建“删除项目”按钮。
这次“删除项目”按钮被插入到表格单元格中。

**结论（可能需要修订）：**
将处理程序注册到动态控制事件似乎有点棘手。
显然，每个事件处理程序都必须在 Page_Load 事件之后注册。

# c++ - 将线性数组转换为二维矩阵

> ID：13340955
> 
> 赞同：6
> 
> 时间：2012-11-12T09:15:17.687
> 
> 标签：c++, opencv

我有一个浮点指针（数组），它代表一个图像。它的元素计数和索引具有宽度*高度。图像不像矩阵，它的原点位于左上角。相反，它的原点位于左下方，就像在笛卡尔坐标系中一样。达到最大宽度后，它从左侧的下一行开始。

所以我想有效地将​​这个数组转换为二维矩阵（可选：opencv）。

我如何以一种良好而有效的方式做到这一点？以及如何将其转换回来？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:44:13.217

我会在湖里扔一块石头，看着涟漪。注意：我*不*知道调用者希望对 xformed 数据做什么，这主要是由于我对 OpenCV 的初步了解。然而，转型的核心问题似乎很简单。如果我离基地很远，请发表评论，我会放弃答案。我提出了两种方法，一种用于就地数据反转，另一种用于使用 C++ 类进行简单的访问器包装。

**就地反转**：如果调用者需要反转行以适应传递给 API 的使用，则可以就地完成。使用完反转数据后，请务必再次执行此操作。一个纯粹面向字节的例子是：

```
// in-place inversion of the linear matrix to re-origin.
void mat_invert(float *data, size_t height, size_t width)
{
    // must be at least 2 rows high for this to mean anything.
    if (height < 2)
        return;

    // setup a pair of pointers to walk the rows in byte-form
    unsigned char* top = (unsigned char*)data;
    unsigned char *bottom = (unsigned char *)(data + (height-1)*width);
    size_t row_width = sizeof(data[0]) * width;
    while (top < bottom)
    {
        for (size_t i=0; i<row_width; i++)
        {
            *top ^= *bottom;
            *bottom ^= *top;
            *top++ ^= *bottom++;
        }
        bottom -= 2*row_width;
    }
} 
```

示例用法：

```
int main(int argc, char *argv[])
{
    const size_t w = 10;
    const size_t h = 5;

    float ar[h*w];
    memset(ar, 0, sizeof(ar));

    ar[0]       = 0.1;
    ar[1*w + 1] = 1.1;
    ar[2*w + 2] = 2.1;
    ar[3*w + 3] = 3.1;
    ar[4*w + 4] = 4.1;

    // dump original
    for (size_t i=0; i<h; i++)
    {
        for (size_t j=0; j<w; j++)
            cout << ar[i*w+j] << ' ';
        cout << endl;
    }
    cout << endl;

    // invert original
    mat_invert(ar, h, w);
    for (size_t i=0; i<h; i++)
    {
        for (size_t j=0; j<w; j++)
            cout << ar[i*w+j] << ' ';
        cout << endl;
    }
    cout << endl;

    // invert again
    mat_invert(ar, h, w);
    for (size_t i=0; i<h; i++)
    {
        for (size_t j=0; j<w; j++)
            cout << ar[i*w+j] << ' ';
        cout << endl;
    }
    cout << endl;

    return EXIT_SUCCESS;
} 
```

结果：

```
0.1 0 0 0 0 0 0 0 0 0 
0 1.1 0 0 0 0 0 0 0 0 
0 0 2.1 0 0 0 0 0 0 0 
0 0 0 3.1 0 0 0 0 0 0 
0 0 0 0 4.1 0 0 0 0 0 

0 0 0 0 4.1 0 0 0 0 0 
0 0 0 3.1 0 0 0 0 0 0 
0 0 2.1 0 0 0 0 0 0 0 
0 1.1 0 0 0 0 0 0 0 0 
0.1 0 0 0 0 0 0 0 0 0 

0.1 0 0 0 0 0 0 0 0 0 
0 1.1 0 0 0 0 0 0 0 0 
0 0 2.1 0 0 0 0 0 0 0 
0 0 0 3.1 0 0 0 0 0 0 
0 0 0 0 4.1 0 0 0 0 0 
```

* * *

**隐式访问类**：如果您只需要为您完成虚拟化行/高度数学，则以下内容就足够了：

```
#include <iostream>
#include <exception>
#include <stdexcept>
using namespace std;

class matrix_xform
{
private:
    size_t width, height;
    float *data;

public:
    matrix_xform(float *data, size_t height, size_t width)
        : data(data), width(width), height(height)
    {
    }

    float * operator[](size_t x)
    {
        if (x > (height-1))
            throw std::out_of_range("matrix_xform[x]");
        return data + (width * (height - 1 - x));
    }

    const float * operator[](size_t x) const
    {
        if (x > (height-1))
            throw std::out_of_range("matrix_xform[x]");
        return data + (width * (height - 1 - x));
    }
}; 
```

示例用法：

```
int main(int argc, char *argv[])
{
    const size_t w = 10;
    const size_t h = 5;

    float ar[h*w];
    memset(ar, 0, sizeof(ar));

    matrix_xform mat(ar, h, w);
    mat[0][0] = 1.0;
    mat[1][1] = 1.0;
    mat[2][2] = 1.0;
    mat[3][3] = 1.0;
    mat[4][4] = 1.0;

    // dump original
    for (size_t i=0; i<h; i++)
    {
        for (size_t j=0; j<w; j++)
            cout << ar[i*w+j] << ' ';
        cout << endl;
    }
    cout << endl;

    // dump using accessor
    for (size_t i=0; i<h; i++)
    {
        for (size_t j=0; j<w; j++)
            cout << mat[i][j] << ' ';
        cout << endl;
    }

    return EXIT_SUCCESS;
} 
```

结果：

```
0 0 0 0 1 0 0 0 0 0 
0 0 0 1 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 0 
0 1 0 0 0 0 0 0 0 0 
1 0 0 0 0 0 0 0 0 0 

1 0 0 0 0 0 0 0 0 0 
0 1 0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 0 
0 0 0 1 0 0 0 0 0 0 
0 0 0 0 1 0 0 0 0 0 
```

我希望涵盖 OP 正在寻找的每个基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:01:16.913

将您的图像处理 API 规划为

```
 void my_func (int *src, int *dst, int x_stride, int y_stride, int N); 
```

可以轻松地在连续内存中进行迭代，同时在左 <-> 右之间以及上 <-> 下之间翻转扫描方向。

如果 API 设计用于不同的输入和输出*步幅*，还可以更改每个图像元素的字节数（例如将颜色模式从 RGBA 更改为 RGB 或从 24 位 RGB 更改为 16 位 R5G6B5，从 int 更改为 float 等.）还有图像宽度（和高度也......）。

关键是无论图像的每一行的位置如何，数学都应该是相同的。

这些功能之一可以是：

```
 copy_row(int *src, int* dst, int N, int x_stride);
 copy_2D_mem(int *src_base, int* dst_base, int N, int M, int y_stride, int x_stride); 
```

话又说回来，很可能许多现有的 opencv 算法并不关心图像的方向。并且自己编写，可以使用相同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:41:35.543

据我了解您的问题，您希望将数组传递给 OpenCV API，以便将其解释为`(top,left)`索引二维矩阵。以下示例说明了一种无需重新排列任何数组的简单方法：

```
float a[8] = {1,2,3,4,5,6,7,8};  //your array containing the image
int img_width = 2;
int img_height = 4;
float** b = new float*[img_height];
for(int i=img_height ; i>0; i--)
    b[img_height-i] = a+ (i-1)*img_width;

//call your API
do_something(b,img_height,img_width); 

//your OpenCV API that expects a 2-d matrix 
void do_something(float** x , int r, int c){}; 
```

如果你愿意，你可以把它变成一个方便的函数/宏，你可以在调用 OpenCV API 之前调用它来获取所需格式的二维矩阵。此外，一旦完成，不要忘记为为此目的创建的临时数组取消分配内存。

# objective-c - 如何知道用户仍在 UIScrollView 中触摸屏幕？

> ID：13340956
> 
> 赞同：0
> 
> 时间：2012-11-12T09:15:18.680
> 
> 标签：objective-c, xcode, uiscrollview

我有一个滚动视图。典型的 tableView 单元。我在 viewDidScroll 上做了很多事情。

viewDidScroll 在 2 种情况下被调用。

1.  用户滚动
2.  有时用户已经停止滚动，但由于动量、弹跳等原因，滚动视图仍然滚动。

那么我怎么知道用户是否还在触摸滚动视图呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:34:59.170

`UIScrollView`有一个[`BOOL`名为的属性`tracking`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922-CH3-SW3)，即`YES`当滚动视图有触摸时，`NO`否则。在我的测试中，它被设置`NO`为一旦触摸结束，即使视图正在减速（并且仍然发送`scrollViewDidScroll:`给它的委托）。这似乎正是您所要求的。

在我的测试中，当触摸结束后视图正在减速时，该[`dragging`属性](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922-CH3-SW2)似乎并没有变得可靠。`NO`

该[`decelerating`属性](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922-CH3-SW30)在我的测试中也不可靠。如果我在减速时触摸滚动视图，即使视图已停止滚动，它`decelerating`仍然存在。`YES`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:25:12.813

`scrollViewWillBeginDragging:`当用户开始拖动时调用委托，当用户离开他/她的手指时调用`scrollViewDidEndDragging:willDecelerate:`& `scrollViewWillEndDragging:withVelocity:targetContentOffset:`（iOS 5+ 没有启用分页）。

您可能还需要检查`scrollViewWillBeginDecelerating:`和`scrollViewDidEndDecelerating:`。

参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)

# android - 试图扫描我的 SQLite 数据库。安卓

> ID：13340958
> 
> 赞同：1
> 
> 时间：2012-11-12T09:15:28.607
> 
> 标签：android, sqlite, database-scan

我有一个保存按钮，基本上应该在我的 SQLite 数据库中创建一个新条目，如果还没有一个具有相同“名称和编号”的条目（两者都存储为字符串）。如果已经有一个具有相同名称和编号的条目，它应该弹出一个询问他们是否要覆盖的窗口。

实际发生的是，无论该条目是否已存在，它都会创建一个新条目。单击保存时运行的代码：

```
final String thename=TeamName.getText().toString()
final String thenum=TeamNum.getText().toString();
if ((thename.length()!=0) && (thenum.length()!=0)){
    ScoutingFormData info1 = new ScoutingFormData(this);
    info1.open();
    final long returnedId=info1.scanFor(thename,thenum);
    if (returnedId==-1){
        info1.createEntry(thename,thenum);
    }
    else
    {
        final Dialog overw=new Dialog(this);
        ....//The code that goes here is unimportant to my question so I'm hiding it.
        overw.show();
    }
    info1.close();  
} 
```

ScoutingFormData.java 中的代码：

```
public long scanFor(String thename, String thenum) {
    String[] columns=new String[]{KEY_ROWID,KEY_NAME,KEY_NUM};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    int iID = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iNum = c.getColumnIndex(KEY_NUM);
    for (c.moveToFirst(); !c.isAfterLast();c.moveToNext()){
        if ((c.getString(iName)==thename) && (c.getString(iNum)==thenum)){
            return Long.parseLong(c.getString(iID));
        }
    }
    return -1;
} 
```

如果已存在具有相同名称+编号的条目，我看不出它如何可能返回-1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:18:49.433

用于[`equals`](http://developer.android.com/reference/java/lang/String.html#equals%28java.lang.Object%29)比较[`String`](http://developer.android.com/reference/java/lang/String.html)值。

# sharepoint - 如何在 sharepoint 上备份用户权限和 Web 部件？

> ID：13340961
> 
> 赞同：0
> 
> 时间：2012-11-12T09:15:40.517
> 
> 标签：sharepoint, backup, web-parts, user-permissions

我想备份我的共享点上的所有用户权限和 Web 部件，以便我可以随时恢复它们。因为几周前，我的共享点上的所有用户权限和 Web 部件都神秘地消失了。我已经备份了所有内容，但没有备份用户权限和 Web 部件。不使用第三方软件可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:41:40.697

为什么不使用常规网站集备份？它包括权限和 Web 部件： [http ://technet.microsoft.com/en-us/library/ff607901.aspx](http://technet.microsoft.com/en-us/library/ff607901.aspx)

或者，您可以定期进行内容数据库备份： http: [//msdn.microsoft.com/en-us/library/ms191304](http://msdn.microsoft.com/en-us/library/ms191304(v=sql.105).aspx) (v=sql.105).aspx 它还将包含所有权限和 Web 部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:17:26.870

如果没有自定义开发，我不知道有什么方法可以做到这一点，我认为备份所有内容会更好，但打开网站集的审核报告可能对您很有用。使用此报告，您可以跟踪网站集的更改，甚至是权限更改。要配置审核，请查看[此链接](http://office.microsoft.com/en-us/sharepoint-server-help/configure-audit-settings-for-a-site-collection-HA102031737.aspx)。您还可以查看第三方工具进行审计。

# ruby-on-rails - 在 database.yml 中没有用户名或密码的 JRuby JDBC

> ID：13340976
> 
> 赞同：2
> 
> 时间：2012-11-12T09:16:18.003
> 
> 标签：ruby-on-rails, ruby, odbc, jruby, jdbc-odbc

是否可以使用 JDBC Postgres (jRuby) 驱动程序而不在 database.yml 文件中指定用户名和密码？我的项目数据库文件目前是：

```
test: &test
  adapter: postgresql
  encoding: unicode
  database: app_test
  pool: 5

development: &development
  adapter: postgresql
  encoding: unicode
  database: app_development
  pool: 5

production: &production
  adapter: postgresql
  encoding: unicode
  database: app_production
  pool: 5

cucumber:
  <<: *test 
```

但是，这会在启动服务器/控制台时导致以下错误：

> ActiveRecord::JDBCError: 驱动程序遇到未知错误: FATAL: no PostgreSQL user name specified in startup packet

如果可能，最好不要在 database.yml 配置文件中包含用户名和密码（这适用于 MRI 和`pg`gem）。每个团队成员都使用不同的用户名进行本地安装。

# twitter-bootstrap - twitter bootstrap datepicker 国际化

> ID：13340982
> 
> 赞同：7
> 
> 时间：2012-11-12T09:16:33.770
> 
> 标签：twitter-bootstrap, datepicker

我正在使用[Stefan Petre 的这个 twitter bootstrap 风格的日期选择器](http://www.eyecon.ro/bootstrap-datepicker)

但是，我不知道如何将日期选择器的格式设置为法语，除了直接从源代码更改之外，还有更好的方法吗？

谢谢大家

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-15T13:06:19.563

dtjmsy，您也可以使用它：

```
$('.datepicker').datepicker({
   language: "pt-BR"
}); 
```

这里有一个很好的沙箱链接，您可以在其中尝试一些配置： [http ://eternicode.github.io/bootstrap-datepicker/?#sandbox](http://eternicode.github.io/bootstrap-datepicker/?#sandbox)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T16:50:00.197

我一直在使用Stefan Petre 的 datepicker的[修改版本，](https://github.com/eternicode/bootstrap-datepicker)[在文档的底部，](https://github.com/eternicode/bootstrap-datepicker#i18n)它说在包含主 datpicker 文件后包含您的语言环境文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-31T07:20:14.373

只需在您的代码中添加 bootstrap-datepicker/js/locales/bootstrap-datepicker.fr.js 即可。和

> $('.datepicker').datepicker({ language: "fr-FR" });

而已

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T13:41:27.310

在 3.x 版本中，您必须将 moment.js 国际化

[在这里检查源](http://code.ohloh.net/file?fid=6J48qV3uQb15hkyHvGWae7RzJ34&cid=TomyYseviyc&s=&fp=538208&mp&projSelected=true#L0)

如下...

```
// moment.js language configuration
// language : brazilian portuguese (pt-br)
// author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira

(function (factory) {
    if (typeof define === 'function' && define.amd) {
        define(['moment'], factory); // AMD
    } else if (typeof exports === 'object') {
        module.exports = factory(require('../moment')); // Node
    } else {
        factory(window.moment); // Browser global
    }
}(function (moment) {
    return moment.locale('pt-br', {
        months : "janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),
        monthsShort : "jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),
        weekdays : "domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),
        weekdaysShort : "dom_seg_ter_qua_qui_sex_sáb".split("_"),
        weekdaysMin : "dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),
        longDateFormat : {
            LT : "HH:mm",
            L : "DD/MM/YYYY",
            LL : "D [de] MMMM [de] YYYY",
            LLL : "D [de] MMMM [de] YYYY [às] LT",
            LLLL : "dddd, D [de] MMMM [de] YYYY [às] LT"
        },
        calendar : {
            sameDay: '[Hoje às] LT',
            nextDay: '[Amanhã às] LT',
            nextWeek: 'dddd [às] LT',
            lastDay: '[Ontem às] LT',
            lastWeek: function () {
                return (this.day() === 0 || this.day() === 6) ?
                    '[Último] dddd [às] LT' : // Saturday + Sunday
                    '[Última] dddd [às] LT'; // Monday - Friday
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : "em %s",
            past : "%s atrás",
            s : "segundos",
            m : "um minuto",
            mm : "%d minutos",
            h : "uma hora",
            hh : "%d horas",
            d : "um dia",
            dd : "%d dias",
            M : "um mês",
            MM : "%d meses",
            y : "um ano",
            yy : "%d anos"
        },
        ordinal : '%dº'
    });
})); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-05T15:37:17.093

如果你想从服务器指定本地化文本，你可以添加它（称它为（例如）“somename”）：

```
jQuery.fn.datepicker.dates.somename = {
    days: ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"],
    daysShort: ["Вск", "Пнд", "Втр", "Срд", "Чтв", "Птн", "Суб"],
    daysMin: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
    months: ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"],
    monthsShort: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек"],
    today: "Сегодня",
    clear: "Очистить",
    format: "dd.mm.yyyy",
    weekStart: 1
}; 
```

在调用函数上方（给语言参数值“somename”）：

```
jQuery('#datepicker-container input').datepicker({
    language: "somename"
}); 
```

然后，您可以从 resx 文件中指定您喜欢的任何值和语言。

# c++ - 指定本地文件而不是远程文件

> ID：13340990
> 
> 赞同：0
> 
> 时间：2012-11-12T09:17:25.580
> 
> 标签：c++, wininet

有没有办法将本地文件（在我的硬盘上）指定给 WinInet 函数，例如 FtpGetFile？我愿意这样做，因为我的宽带有限，而且我希望在开发我的软件时会有很多成功和失败，我真的不想在上面浪费我的宽带。
有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-03T11:43:22.117

满足您需求的最彻底的解决方案是在本地运行 FTP 服务器。

这使您可以进行更好的“原样”测试，而不是将调用挂接到`FtpGetFile`.

要安装本地 FTP 服务器，请使用[`FileZilla FTP server`](https://filezilla-project.org/download.php?type=server)或优秀的[`winscp`](https://winscp.net/eng/docs/guide_windows_ftps_server).

# python - Tkinter 条目小部件 - 如果条目不是 int 则出错

> ID：13340993
> 
> 赞同：4
> 
> 时间：2012-11-12T09:17:39.820
> 
> 标签：python, tkinter

我想知道如果条目不是整数，如何显示错误。我能够做到，所以我的代码将只接受一定范围的整数，但如果给出字母，我没有办法显示错误。我想知道是否有人可以提供一些知识.. 谢谢！

```
def get(self):
    c = int(self.a.get())
    d = int(self.b.get())
    if c>255 or c<0 or d>255 or d<0 :
        print c
        tkMessageBox.showerror("Error2", "Please enter a value between 0-255")
        self.clicked_wbbalance()
    if c<255 and c>0 and d<255 and d>0:
        print "it worked"
        pass 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:20:52.200

用于`str.isdigit()`检查输入是否为整数：

```
In [5]: "123".isdigit()
Out[5]: True

In [7]: "123.3".isdigit()
Out[7]: False

In [8]: "foo".isdigit()
Out[8]: False 
```

所以你的代码变成了这样：

```
def get(self):
    c = self.a.get()
    d = self.b.get()
    if c.isdigit() and d.isdigit():
        c,d=int(c),int(d)
        if c>255 or c<0 or d>255 or d<0 :
            print c
            tkMessageBox.showerror("Error2", "Please enter a value between 0-255")
            self.clicked_wbbalance()
        elif c<255 and c>0 and d<255 and d>0:
            print "it worked"
            pass
    else:
         print "input is not an integer" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:21:15.073

当输入无效时，您可以捕获异常。

```
try:
    c = int(self.a.get())
    d = int(self.b.get())
except ValueError:
    # Show some sort of error message, input wasn't integers
else:
    # Input was integers, continue as normal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:20:35.887

嗯......你总是可以格式化你的字符串，例如：

```
msg = "Error. Invalid value %d. Value must be between 0-255" % c 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:25:21.303

```
num = 123
if isinstance(num, int):
True 
```

# facebook-graph-api - 为什么我墙上的应用程序帖子标记为链接？

> ID：13340996
> 
> 赞同：2
> 
> 时间：2012-11-12T09:18:00.837
> 
> 标签：facebook-graph-api

我的应用程序在用户的墙上创建帖子，但它被标记为链接。我看到其他应用程序也在做同样的事情，但由于某种原因，facebook 没有将他们的帖子标记为链接。试图在graph api explorer中找到他们和我之间的区别，唯一的区别是status_type属性（甚至没有记录）。我的设置为“shared_story”，在其他应用程序中是“app_created_story”。尝试手动设置，但即使我将其设置为 app_created_story，facebook 仍然使用 shared_story

来自 graph api explorer 的数据（首先是我的应用程序）

```
[{
  "id": "100001302536317_168939309896943", 
  "from": {
    "name": "Андрей Реаскович", 
    "id": "100001302536317"
  }, 
  "story": "Андрей Реаскович shared a link.", 
  "story_tags": {
    "0": [
      {
        "id": "100001302536317", 
        "name": "Андрей Реаскович", 
        "offset": 0, 
        "length": 16, 
        "type": "user"
      }
    ]
  }, 
  "picture": "http://external.ak.fbcdn.net/safe_image.php?d=AQBcrRQnipKHB6g6&w=90&h=90&url=http%3A%2F%2Fstatic.jackpotrush.com%2Fimages%2Fviral%2Fgames%2Fjoker_jester.png", 
  "link": "http://apps.facebook.com/jackrush/?ref=bonus-game", 
  "name": "I Won Big on a Bonus Round at Jackpot Rush!", 
  "caption": " ", 
  "description": "I Just Won 200 Coins at a Jackpot Rush Bonus Round and it Feels Amazing!", 
  "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif", 
  "actions": [
    {
      "name": "Comment", 
      "link": "http://www.facebook.com/100001302536317/posts/168939309896943"
    }, 
    {
      "name": "Like", 
      "link": "http://www.facebook.com/100001302536317/posts/168939309896943"
    }
  ], 
  "privacy": {
    "description": "Only Me", 
    "value": "SELF"
  }, 
  "type": "link", 
  "status_type": "shared_story", 
  "application": {
    "name": "Jackrush Development", 
    "namespace": "jackrush", 
    "id": "434595133235542"
  }, 
  "created_time": "2012-11-12T08:48:18+0000", 
  "updated_time": "2012-11-12T08:48:18+0000", 
  "comments": {
    "count": 0
  }
},

{
  "id": "100001302536317_420171444702936", 
  "from": {
    "name": "Андрей Реаскович", 
    "id": "100001302536317"
  }, 
  "picture": "http://platform.ak.fbcdn.net/www/app_full_proxy.php?app=242829452408559&v=1&size=z&cksum=cd0fa7a15202d05700bf1464fd989d42&src=http%3A%2F%2Fc.cdn.blueshellgames.com%2Fs%2F%3Aac05b878%2Fmonte%2Fi%2Ffeed_story_image-logo_black.png", 
  "link": "http://apps.facebook.com/luckyslotsgame/?action=shareLevelUpReward&posterID=fb%3A100001302536317&k_utag=df3f4636aabab65e&levelUpToken=6553%3AsVFCJmW43zW_Nni9vBB9xg%3D%3D&level=4&refID=fb%3A100001302536317&utm_medium=viral&utm_source=levelUp", 
  "name": "First 5 Clickers get 150 Free Coins!", 
  "caption": "Андрей just reached level 4 and is giving away 150 Free Coins to celebrate!", 
  "description": "Play the best slots on Facebook! Get free chips daily! Unlock new slot machines and new bonus games! Don't miss out, play now!", 
  "icon": "http://photos-d.ak.fbcdn.net/photos-ak-snc7/v85006/51/242829452408559/app_2_242829452408559_9481.gif", 
  "actions": [
    {
      "name": "Comment", 
      "link": "http://www.facebook.com/100001302536317/posts/420171444702936"
    }, 
    {
      "name": "Like", 
      "link": "http://www.facebook.com/100001302536317/posts/420171444702936"
    }, 
    {
      "name": "Claim BONUS Coins", 
      "link": "http://apps.facebook.com/luckyslotsgame/?action=shareLevelUpReward&posterID=fb%3A100001302536317&k_utag=df3f4636aabab65e&levelUpToken=6553%3AsVFCJmW43zW_Nni9vBB9xg%3D%3D&level=4&refID=fb%3A100001302536317&utm_medium=viral&utm_source=levelUp"
    }
  ], 
  "privacy": {
    "description": "Public", 
    "value": "EVERYONE"
  }, 
  "type": "link", 
  "status_type": "app_created_story", 
  "application": {
    "name": "Lucky Slots", 
    "namespace": "luckyslotsgame", 
    "id": "242829452408559"
  }, 
  "created_time": "2012-11-12T08:13:25+0000", 
  "updated_time": "2012-11-12T08:13:25+0000", 
  "comments": {
    "count": 0
  }
}] 
```

# ios6 - 使用 MKMapView 的 iOS6 应用程序可接受的“实时字节”指南

> ID：13340999
> 
> 赞同：5
> 
> 时间：2012-11-12T09:18:11.443
> 
> 标签：ios6, mkmapview, instruments

我希望确保我的应用程序不会在仍然相当资源受限的设备上消耗太多内存。几天前，我使用*Instruments*来确定我的应用程序使用了多少内存，而*Live Bytes*大约有 4-8 兆字节。今天我再次运行 Instruments，Live Bytes 增加了大约 30-35 兆字节。我不相信我在这两次之间对我的代码进行了任何重大更改。

我的应用程序使用`MKMapView`带有自定义图块覆盖的 。我推迟更新 XCode 很长一段时间，所以我怀疑差异可能是几天前我的 iOS 模拟器仍在使用 Google 而不是 Apple 地图，直到我升级 XCode。

作为一个小测试，我创建了一个新的测试应用程序，它只有一个`MKMapView`，没有别的，并在其上运行 Instruments。这个应用程序的 Live Bytes 通常为**50-90**兆字节，即使它没有任何自定义代码 - 我只是将 MKMapView 拖放到上面。

我不知道这是否代表 Apple 有意让新地图使用这么多内存。也许地图图块在应用程序之间共享，这很好。不管怎样，考虑到大多数早期的建议大约是 5-20MB，而 Apple 的 MKMapView 本身消耗 50-90MB，因此想出一个我可以安全使用多少 Live Bytes 的合理近似值变得复杂了。

是否有另一个有用的指标可以让 Live Bytes 现在没有任何用处？

**编辑：**对于其他人来说，这是一个合法的内存管理问题并导致应用程序崩溃：[iOS6 MKMapView 使用大量内存，导致应用程序崩溃，还有其他人注意到这一点吗？](https://stackoverflow.com/questions/12641658/ios6-mkmapview-using-a-ton-of-memory-to-the-point-of-crashing-the-app-anyone-e)