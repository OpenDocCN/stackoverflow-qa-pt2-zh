# StackOverflow 问答 13785000-13785999

# iphone - Objective-C：处理内存中的大量图像

> ID：13785005
> 
> 赞同：0
> 
> 时间：2012-12-09T05:44:08.810
> 
> 标签：iphone, objective-c, image, cocoa-touch, memory

在内存中处理大量图像可能是一个可接受的解决方案？

目前我正在构建一个照片共享应用程序（在某种意义上类似于 Instagram）。我已经能够模仿他们在提要中快速加载许多图像（结合图像的预加载和延迟加载），但我有点坚持如何处理这些图像可能占用的大量内存有。

CoreData 是临时图像存储的选项吗？使用 NSCoder 将对象写入临时目录是另一种选择吗？我正在尝试主动避免内存崩溃，并且我不确定 CoreData、临时文件夹或其他方式是否足够体面，以减少（可能）数百张图像的内存占用，如果用户在他们的提要中滚动漂亮远的。这些也不会是永久性的。

（对于它的价值，现在我为每个包含元数据和图像的图像都有一个对象表示，它们存储在一个基本的数组结构中。它现在运行良好，但我想确保我是否正在加载数百张图像我可以减少内存占用但仍然能够快速访问这些对象）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:51:44.203

在我自己的几个应用程序中，我遇到了这个确切的困境，我不得不在表格视图中显示数百个 UIImage 对象。

我为我的应用程序所做的解决方案之一是不在内存中存储全分辨率图像，而是将缩略图（我使用[可用的 UIImage+Resize.h 类别扩展缩小并在此处描述](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)）。一旦用户决定编辑或使用照片，我就会加载整个全分辨率图像。

您还可以将这些缩略图（或至少它们的图像数据）保存到“ `~/Library/Caches/`”文件夹中的小文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:50:31.997

如果性能是问题，那么核心数据会给你更多的粒度。在这里您可以按部分保存它，也可以使用延迟加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:51:17.067

如果您非常简单地存储一堆图像，CoreData 就太过分了。为了提高效率，无论如何您都必须将其设置为将图像存储在数据库之外，因此最终可能需要*更多*工作。

显而易见的方法 - 将所有图像保存到某个地方的缓存文件夹中的文件 - 是合理的（尽管我将很快解释，可能没有必要）。然后，您可以根据需要重新创建它们。通过将图像保存在 NSCache 中，其中它们的“成本”是它们的文件大小，并且您施加了一些总成本限制，您可以限制总内存消耗。

但理想情况下，您可以找到一种方法将图像存储在磁盘上，以便可以直接映射它们。这将让您同时将它们全部映射，VM 系统本质上将为您提供一个有效的 LRU 缓存。不过，它包含的内容较少 - 它们还可能会从您的应用程序的其他部分窃取内存。使用高级图像类（例如 UIImage）找到一种方法也可能很棘手。但是你可以很容易地接近 - UIImage 文档说：

> 在内存不足的情况下，可能会从 UIImage 对象中清除图像数据以释放系统上的内存。这种清除行为只影响 UIImage 对象内部存储的图像数据，而不影响对象本身。当您尝试绘制数据已被清除的图像时，图像对象会自动从其原始文件重新加载数据。然而，这个额外的加载步骤可能会导致小的性能损失。

因此，您可以使用创建 UIImage `imageWithContentsOfFile:`，它们会根据需要清除内存中的图像副本，并在必要时重新加载（即再次绘制时）。不过，他们实际上可能不会映射文件 -`-[NSData initWithContentsOfMappedFile:]`不幸的是，从 iOS 5 开始不推荐使用。

哪种方法有意义取决于您的使用要求 - 如果您能够可靠地预测您将需要哪些图像，手动管理它们可能会给您带来更好的用户体验，因为您将提前加载它们并避免实际过程中的延迟绘画。

# php - 如何从Mysql中的当前系统时间获取一周前的日期？

> ID：13785006
> 
> 赞同：0
> 
> 时间：2012-12-09T05:44:15.720
> 
> 标签：php, mysql, sql, mysqli

我有一个下拉框，我在其中选择持续时间。如果我选择 1 周，我必须从 Mysql 数据库中检索过去一周的数据。我在以下查询的帮助下做到了这一点。

```
 SELECT * FROM rpt_machine_log WHERE (timestamp between date_sub(now(),INTERVAL $interval) and now()) 
```

当我选择两周时，我必须得到两个结果集，一个包含当周的数据，可以通过上面的查询来完成，我还想要包含当周前一周数据的结果集。

同样，如果我选择 3 周，我应该得到 3 个包含过去 3 周数据的结果集，每周作为单独的结果集。

我想在不更改查询的情况下实现这种情况，我只想将日期范围传递给查询以获得结果。因此，我需要从当前系统时间获取每周的结束日期。

**已编辑** **举例说明情况：* *

如果当天是星期二，日期是 2012 年 4 月 12 日，当我选择 3 周时，我想在这几天之间设置记录。27-11-2012 到 4-12-2012 作为一周结果集，20-11-2012 到 27-11-2012 作为第二周结果集和 13-11-2012 到 20-11-2012 作为第三周结果集. 这可能从您的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:14:38.413

我执行了一个查询，您可以在其中找到表中给定日期的 week_start_date 和 week_end_date。我已经为相同的创建了一个示例表

```
create table tbl(
  orderid int(10),
  dt date);

insert into tbl values(1,'2012-12-04');

insert into tbl values(2,'2012-11-27');

insert into tbl values(3,'2012-11-20');

SELECT orderid,dt, 
 DATE_ADD(dt, INTERVAL(1-DAYOFWEEK(dt)) DAY) week_start,
   DATE_ADD(dt, INTERVAL(7-DAYOFWEEK(dt)) DAY) week_end
FROM tbl 
WHERE (dt between date_sub(now(),INTERVAL 3 WEEK) and now())
group by week_start,week_end
order by week_start,week_end; 
```

希望这有助于对日期 o/p(s) 进行分组

# python - 关于列表中的最小值

> ID：13785008
> 
> 赞同：0
> 
> 时间：2012-12-09T05:44:26.640
> 
> 标签：python

```
 def min_value(L) 
```

'''L 是 >= -1 的整数列表。返回 L 中 >-1 的最小值。如果 L 除了 -1 之外没有任何值，则返回 -1。'''

```
 ans = -1
 for n in L:
     if n> -1:
        if ans == -1: <------------?? Can someone explain why they are doing this. Isn't ans already equal -1?? Thus processing ans = n every time??
           ans = n 
        else:
           ans = min(ans, n)
 return ans 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:46:59.407

`ans`开始为`-1`，但值发生变化：

```
 if ans == -1:
            ans = n             # Right here
        else:
            ans = min(ans, n)   # And right here 
```

如果`ans`停留在`-1`，则列表中没有大于 的数字`-1`。

一种更易读的方法是：

```
def min_value(L):
    filtered = [n for n in L if n > -1]

    if not filtered:
        return -1
    else:
        return min(filtered) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:07:46.560

如果您省略这些`if ans == -1: ans = n`行，而总是只执行`ans = min(ans, n)`，`ans`则将保持在 -1 而不是更改为大于 -1 的最小值。

这是一些稍短的替代代码：

```
def min_value(L)
    ans = -1
    for n in L:
        if n > -1:
            ans = min(n, max(ans,n))
    return ans 
```

例如：
`min_value([-2, 3, -4, -5])`给出 3，
`min_value([-2, 3, -4, 2])`给出 2，然后
`min_value([-2, -3, -4, -5])`给出 -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:54:36.390

```
def min_value(L):
    return min([i for i in L if i >= -1] or [-1]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T06:21:53.160

我认为这更清楚：

```
def min_value(L):
    try:
        return min(n for n in L if n > -1)
    except ValueError:
        # this gets raised if all n in L are not > -1
        return -1 
```

# c# - 控制组件添加参考

> ID：13785010
> 
> 赞同：-1
> 
> 时间：2012-12-09T05:44:43.413
> 
> 标签：c#, .net, vb.net, dll, class-library

假设我有一个从类库生成的“.dll”文件，我希望这个类库被我拥有的某些项目引用，但如果其他人想将该类库引用到他自己的项目，他将无法为此，它就像控制谁可以使用这个库。

有没有办法在 Microsoft .Net 中实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:48:18.940

以下问题说明了如何执行您的要求：

[如何禁止引用 .NET DLL 类库](https://stackoverflow.com/questions/4323339/how-to-forbid-a-net-dll-class-library-to-be-referenced)

[如何防止其他人使用我的 .Net 程序集？](https://stackoverflow.com/questions/96624/how-to-prevent-others-from-using-my-net-assembly)

[如何防止我的 .Net dll 被添加为参考？](https://stackoverflow.com/questions/1161977/how-do-i-prevent-my-net-dll-from-being-added-as-a-reference)

我希望这有帮助。

PS：我会将此添加为评论，但我目前无法添加。

# servlets - 为什么 response.sendRedirect() 返回客户端浏览器

> ID：13785012
> 
> 赞同：-1
> 
> 时间：2012-12-09T05:44:49.560
> 
> 标签：servlets, httpresponse

众所周知，在 servlet 中，当我们调用 response.sendRedirect() 时，它会返回客户端浏览器并请求新 URL 的新请求。在一次技术面试中，有人问，当我们调用 response.sendRedirect() 时，“为什么”它会回到客户端浏览器？这个“为什么”的预期答案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:47:01.707

问：它*还能*如何工作？

# python - 如何在 python 运行、销毁和重用中使用 Glade 使用对话框

> ID：13785014
> 
> 赞同：5
> 
> 时间：2012-12-09T05:45:27.860
> 
> 标签：python, dialog, gtk, builder, glade

我正在使用 Glade 编写一个带有对话框的 python GUI。

如果我不使用 Glade，我会使用一个类来创建一个对话窗口 (dialag)，运行它 (dialog.run)，做任何事情，然后删除它 (dialog.destroy)。然后，当我再次需要该对话框时，我将重新实例化它。

格莱德在其中放了一把活动扳手。调用 Gtk.Builder 后，我可以通过以下方式获取对象：

```
dialog = builder.get_object("dialog")
response = dialog.run()
#do stuff
dialog.destroy() 
```

我更喜欢运行、使用、销毁的工作方式，因为它将它从内存中删除。

但是，使用 Glade，在完成上述操作后，我无法让它再次工作，因为调用已被破坏，而且我不知道如何让 Glade 重新实例化它。

在我过去编写的程序中，我做了这个：

```
dialog = builder.get_object('dialog')
response = dialog.run()
# use it
dialog.hide() 
```

当我再次需要它时，我会做一个：

```
dialog.show()
response = dialog.run()
# do stuff
dialog.hide() 
```

为了绕过这个限制，但我对这种方式并不满意，感觉它有点像 hack（我猜对于 Glade，一切都是从一开始就创建的）。有没有办法让 Glade 库重新实例化一个对话框，而不是进行所有这些显示和隐藏？

谢谢，

纳尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:36:07.787

是的——你必须创建一个新`builder`对象并重新加载 Glade 文件。一个`builder`对象创建一个对话框，如果你销毁它，它就消失了。

我不一定认为隐藏和显示对话框是一种技巧。如果内存是一个严重的问题，您可能想要破坏和重新创建，但否则我认为这不会有太大的不同。

# ruby-on-rails - 保存散列文字（告诉 Rails 不要将散列解释为嵌套属性）？

> ID：13785015
> 
> 赞同：0
> 
> 时间：2012-12-09T05:45:34.973
> 
> 标签：ruby-on-rails, ruby, activerecord

我认为 Rails 将我的哈希文字解释为嵌套属性。我实际上只是想将哈希转换为字符串。它不是与某个模型相关的嵌套属性，也不应该与模型相关。在这里，嵌套值只是一种通过表单传递数据的便捷方式，而无需太多繁琐的工作。

:params 是

```
{"utf8"=>"✓",
 "authenticity_token"=>"[deleted for SO]",
 "scorecard"=>{"1"=>"2",
 "2"=>"2",
 "3"=>"2",
 "4"=>"2",
 "5"=>"2",
 "6"=>"2",
 "7"=>"2",
 "8"=>"2",
 "9"=>"2",
 "10"=>"2",
 "11"=>"2",
 "12"=>"2"}},
 "commit"=>"Create Assessment"} 
```

..但是当我这样做时：

```
assessment = Assessment.new(params[:assessment])
...
@assessment.save 
```

...我得到：

```
unknown attribute: scorecard 
```

有趣的是，当

```
attr_accessible :scorecards 
```

.. 在模型中（注意复数形式），我得到：

```
Can't mass-assign protected attributes: scorecard 
```

因为当 attr_accessible 是我真正想要的 (:scorecard) 时，我得到“未知属性：记分卡”，看来 Rails 认为它​​正在处理嵌套属性。

我可以告诉 Rails 不要将 :scorecard 视为嵌套属性吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:38:49.780

您的意思是在 attr_accessible 中省略*“s”吗？*

```
attr_accessible :scorecard(s) 
```

**编辑**

你很多人会收到下一个错误，因为你的桌子上缺少一`scorecard`列

```
unknown attribute: scorecard 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:25:35.020

您可以发布表格的列名吗？您似乎缺少“记分卡”列。还是您将其命名为“记分卡”？以防万一。

您还必须声明 serialized :scorecard 以保存序列化值。将其保存为 JSON 也是一种选择。只需要额外的解析。

# python-2.7 - py2app - 保留目录结构

> ID：13785017
> 
> 赞同：1
> 
> 时间：2012-12-09T05:46:15.503
> 
> 标签：python-2.7, py2app

我想制作一个 mac os x 应用程序来分发我的程序。

问题是当前脚本将“images/Diagram.png”和“images”文件夹下的其他文件放入“Resources”，但没有按预期放入“Resources/images”

为了将 png 文件放在图像下，我可以在 setup.py 部分中进行哪些更改？

```
mainscript, ico, icns = "aproxim.py", "sum.ico", "sum.icns"

files = ["images/Diagram.png", "images/document.png", "images/Exit.png", "images/floppydisc.png",
         "images/folder.png", "images/Info.png", "images/settings.png"]
scripts = ["app_settings_dialog", "app_window", "approximator", "approximator2", "data_format",
           "easy_excel", "functions", "main_window", "settings_dialog",
           "util_data", "util_parameters"]

description = "Approximator is program for experimental data approximation and interpolation (20 dependencies for select)"

common_options = dict(name = "Approximator", version = "1.7", description = description)

if sys.platform == 'darwin':
    setup(
        setup_requires = ['py2app'],
        app = [mainscript],
        options = dict(py2app = dict(includes = scripts, resources = files, iconfile = icns)),
        **common_options) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:00:05.940

很简单，希望对其他 Python 开发者有用：

```
resources = [('images', files), ('', [ico])] 
```

# vb.net - 如何在vb中从WebBrowser控件获取Cookies值到文本框

> ID：13785024
> 
> 赞同：-1
> 
> 时间：2012-12-09T05:47:37.083
> 
> 标签：vb.net, webbrowser-control, session-cookies

我正在寻找如何以 VB 的形式将 Cookie 从 WebBrowser 控件获取到 TextBox。

我在另一个软件上检查但我需要将其传输到 TextBox CFID=683314 的示例 cookie；CFTOKEN=29469955

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:41:40.133

我想这就是你要找的。

`TextBox1.Text = WebBrowser1.Document.Cookie`

# java - 按字母数字对 HashMap 进行排序的最快方法是什么（在一个整数数组的键上）？

> ID：13785029
> 
> 赞同：2
> 
> 时间：2012-12-09T05:48:41.703
> 
> 标签：java

```
HashMap<ArrayList<Integer>, String> 
```

迭代这个结构，我得到：

```
[1 1 0], "gh"
[0 4 2], "gh"
[0 5 2], "qh" 
```

但是，我想对键进行排序（按递增顺序），以获得

```
[0 4 2], "gh"
[0 5 2], "qh"
[1 1 0], "gh" 
```

第一个组件首先排序，然后是第二个，然后是第三个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:50:23.283

[`HashMap`s 没有固有的顺序。](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)

> 此类不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变。

在迭代之前使用[不同的数据结构](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)，或者自己对键进行外部排序。无论哪种方式，您都需要编写一个`Comparator<List<Integer>>`因为`List<E>`不扩展`Comparable<List<E>>`

```
List<List<Integer>> keys = new ArrayList<>(map.keySet());
Collections.sort(keys, new Comparator<List<Integer>>() {
    @Override public int compare(List<Integer> a, List<Integer> b) {
        // TODO handle edge cases, like lists of differing size

        for (int i=0; i<Math.min(a.size(), b.size()); i++) {
            int result = Integer.compare(a.get(i), b.get(i));
            if (result != 0) {
                return result;
            }
        }

        return 0;
    }
});

for (List<Integer> key : keys) {
    String value = map.get(key);
    // do something interesting with the value
} 
```

**注意** ，在任何类型[的映射中使用可变键通常是一个坏主意。](https://stackoverflow.com/questions/7842049/are-mutable-hashmap-keys-a-dangerous-practice)就个人而言，我从来没有需要——至少使用[一个不可变的整数列表来](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html)代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:56:49.313

TreeMap 可能对您有用。有几种方法可以处理这个问题。我个人不会使用 ArrayList 作为 Map 的索引。相反，我会从 ArrayList 中制作一个键，并将实际的 ArrayList 包含在值中。

在上述情况下， Map 的值将是这种类型：

```
class SomeClass() {
    ArrayList<Integer> aList;
    String aString;  // gh and qh in your example.
    public Integer getKey() {
        // Do something here to create a suitable key from aList and return it.
    } 
} 
```

（从结构上讲，这种类可能更多地是您想要的 - 如果 List 和 String 相关，您不希望它们分开，它们显然似乎是。）

现在您将创建 TreeMap 而不是 HashMap 并添加 SomeClass 实例：

```
TreeMap treeMap = new TreeMap();
SomeClass someClass = new SomeClass(...); // construct it somehow
treeMap.add(someClass.getKey(), someClass); 
```

鲍勃是你的叔叔。

# matlab - 如何在一个块中读取二进制文件而不是在matlab中使用循环

> ID：13785031
> 
> 赞同：3
> 
> 时间：2012-12-09T05:49:19.237
> 
> 标签：matlab, binary, block, fread

我有这个文件，它是一系列超过 3400 万个粒子的 x、y、z 坐标，我正在按如下方式读取它们：

```
parfor i = 1:Ntot
 x0(i,1)=fread(fid, 1, 'real*8')';
 y0(i,1)=fread(fid, 1, 'real*8')';
 z0(i,1)=fread(fid, 1, 'real*8')';
end 
```

有没有办法在不循环的情况下阅读它？这将大大加快读取速度。我只想要三个带有 x、y、z 的向量。我只是想加快读取过程。谢谢。欢迎提出其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:15:50.373

我没有装有 Matlab 的机器，也没有要测试的文件，但我认为`coordinates = fread (fid, [3, Ntot], 'real*8')`应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:02:29.137

也许[fread](http://matlab.izmiran.ru/help/techdoc/ref/fread.html)是您正在寻找的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T06:15:30.310

你是对的。大批量读取数据通常是加快文件读取速度的关键部分。另一部分是预先分配目标变量零，例如`zeros`调用。

我会做这样的事情：

```
%Pre-allocate
x0 = zeros(Ntot,1);
y0 = zeros(Ntot,1);
z0 = zeros(Ntot,1);

%Define a desired batch size.  make this as large as you can, given available memory.
batchSize = 10000;

%Use while to step through file    
indexCurrent = 1;           %indexCurrent is the next element which will be read
while indexCurrent <= Ntot

    %At the end of the file, we may need to read less than batchSize
    currentBatch = min(batchSize,  Ntot-indexCurrent+1);

    %Load a batch of data
    tmpLoaded = fread(fid, currentBatch*3, 'read*8')';

    %Deal the fread data into the desired three variables
    x0(indexCurrent + (0:(currentBatch-1))) = tmpLoaded(1:3:end);
    y0(indexCurrent + (0:(currentBatch-1))) = tmpLoaded(2:3:end);
    z0(indexCurrent + (0:(currentBatch-1))) = tmpLoaded(3:3:end);

    %Update index variable
    indexCurrent = indexCurrent + batchSize;
end 
```

当然，请确保您进行测试，因为我没有。我总是怀疑这类工作中的一个接一个错误。

# loops - unity unityscript 错误

> ID：13785037
> 
> 赞同：0
> 
> 时间：2012-12-09T05:50:29.123
> 
> 标签：loops, unity3d, conditional-statements, unityscript

我有一个数组 learnnum，看起来像 [0,1,1,0,1,1,1,1,0]。

我基本上需要询问用户输入鼠标左键或鼠标右键。如果 Left，则 [i] 的 learnnum 的值被翻转，否则什么也不会发生。我只对 i=1,3,5,7 这样做。我已经写了下面的代码，但是它不能正常工作，而不是去所有4个条件......它直接进入4。似乎它没有等待输入条件......有什么办法我可以纠正这个吗？

```
function changeNumba(i)
{       //check1=true;
        print ("PRINTT "+check1);
                    while(!Input.GetButtonDown("Fire1") && !Input.GetButtonDown("Fire2"))
                    {
                    if(Input.GetButtonDown("Fire1"))
                    {
                    check1++;
                    }
                if(Input.GetButtonDown("Fire2"))
                    {
                    learnednum[i]=0 ? 1 : 0;
                    check1++;
                    }
                }

}

function changelearn()
{       

        //FIRST STEP
        //if(check1)    
        if(move1==9 && check1==0)
            {changeNumba(1);

            }
        //SECOND STEP   
        if(move1==9 && check1==1)
            {changeNumba(3);

            }
        if(move1==9 && check1==2)
            {changeNumba(5);

            }
        if(move1==9 && check1==3)
            {changeNumba(7);

            }
}

var check1=0;

//1,3,5,7
function Update () {

if(move1==9)//this is just a game condition. Do not bother about it.
{
changelearn();
}

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:59:26.213

通过查看统一脚本 api： [http ://docs.unity3d.com/Documentation/ScriptReference/Input.GetButtonDown.html](http://docs.unity3d.com/Documentation/ScriptReference/Input.GetButtonDown.html)

您的 Update() 方法中不应有 while() 循环。

更改 changeNumba() 如下：

```
function changeNumba(i)
{
if(Input.GetButtonDown("Fire1")){
    check1++;
}
if(Input.GetButtonDown("Fire2")){
    learnednum[i] = learnednum[i]==0 ? 1 : 0;
    check1++;
}
} 
```

# c - 在废弃部分 '.bss' 中定义的 main.o 的部分 '.text' 中引用的全局变量

> ID：13785039
> 
> 赞同：0
> 
> 时间：2012-12-09T05:50:32.893
> 
> 标签：c, gcc

在我的 main.c 中，我有`int cursor = 0;`.

这稍后在我使用的函数中使用`cursor += 1`.

当我编译/链接时，我得到一个错误：

`cursor' referenced in section .text' of main.o: defined in discarded section .bss' of main.o`

我对使用 GCC 比较陌生。我以前使用过 MSVC，但我从来没有遇到过这样的错误。有什么我需要添加到链接器脚本中以便它不会丢弃 BSS 部分吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:55:50.480

我不确定它是否会有所帮助。你可以试试：

```
static int cursor = 0; 
```

您可以尝试的另一件事是：

```
int cursor; 
```

作为全局然后在 main() 中放置 cursor=0; 也许它不喜欢初始化全局？

BSS 用于未初始化的全局变量。因此，出于某种原因，我认为它没有初始化您的游标变量。因此，将初始化移入 main() 例程可能会修复它。

# android - 在Android的Paint Object中一次设置多个标志

> ID：13785040
> 
> 赞同：0
> 
> 时间：2012-12-09T05:50:40.617
> 
> 标签：android

那么问题是我想一次在android的paint对象中设置两个不同的标志

例如

```
Paint paint=new Paint(Paint.ANTI_ALIAS_FLAG);
 Bitmap bitmap = Bitmap.createBitmap((int) getWindowManager()
            .getDefaultDisplay().getWidth(), (int) getWindowManager()
            .getDefaultDisplay().getHeight(), Config.ARGB_4444);
    Canvas canvas=new Canvas(bitmap);
    paint.setTextSize(40);
    paint.setFlags(Paint.UNDERLINE_TEXT_FLAG); 
```

或者

```
 paint.setFlags(Paint.STRIKE_THRU_TEXT_FLAG); 
```

接着

```
 canvas.drawText("Setting Two Flags", 10, 30, paint);
     imageView.setImageBitmap(bitmap); 
```

但是，如果我将 UNDERLINE_TEXT_FLAG 设置为消除抗锯齿的效果，则不会发生这种情况。如果我希望我的文本有 Strike 和下划线这两个效果怎么办。有没有办法在 Paint 中同时设置两个标志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:53:29.887

在标志上尝试 OR 运算符。

```
 paint.setFlags(Paint.STRIKE_THRU_TEXT_FLAG | Paint.UNDERLINE_TEXT_FLAG); 
```

# java - 有效java中的静态工厂方法

> ID：13785045
> 
> 赞同：6
> 
> 时间：2012-12-09T05:51:29.213
> 
> 标签：java, static-methods, effective-java

在 Effective Java 的第 1 项中，它说静态工厂方法使 Collections 框架比原本要小得多。有人可以解释一下吗？我无法理解仅因为使用静态工厂方法而可能发生以下情况？我的意思是我们仍然必须实现那些单独的实现，不是吗？

> Collections Framework API 比导出 32 个独立的公共类（每个便利实现一个）时要小得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:45:00.147

“更小”是指“更少的课程”。

不是为每个实现的变体提供大量类，而是提供了返回此类实现的工厂方法，而无需将它们的类声明为顶级类（减少“类膨胀”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:39:41.687

我认为这里的意思是java集合API中只有核心实现，如果你需要同步等“包装器”由静态工厂提供。

所以有 8 个实现，没有“包装器”会有更多（大小增益）。

有关详细信息，请参阅[http://docs.oracle.com/javase/7/docs/technotes/guides/collections/overview.html](http://docs.oracle.com/javase/7/docs/technotes/guides/collections/overview.html)

# angularjs - 如何在角度的局部视图中跳转到锚点？

> ID：13785052
> 
> 赞同：6
> 
> 时间：2012-12-09T05:52:31.403
> 
> 标签：angularjs

我在长列表视图中有很多项目。我的用户如何通过访问 mypage.html#the_item_id 跳转到（即书签）到特定项目？

实际上，当我使用内联视图 [Sample 1] 时可以，但当我使用局部视图 [Sample 2] 时不会。在后一种情况下是否存在错误，或者我必须使用任何解决方法？

提前致谢！

示例 1：您可以访问 page.html#a100 以查看 item 100 ::

```
<!doctype html>
<html ng-app>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <script>
        function MainCtrl($scope){
            $scope.items = [];
            for(var i=0; i<200; i++){$scope.items.push({id: i})}
        }
    </script>
  </head>
  <body ng-controller='MainCtrl'>
    <div>
      <ul>
        <li ng-repeat="i in items"><a id='a{{i.id}}'>{{i.id}}</a></li>
      </ul>
    </div>
  </body>
</html> 
```

示例 2：无法访问 page2.html#a100 以查看项目 100，为什么？::

```
<!doctype html>
<html ng-app>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <script>
        function MainCtrl($scope){
            $scope.items = [];
            for(var i=0; i<200; i++){$scope.items.push({id: i})}
        }
    </script>
  </head>
  <body ng-controller='MainCtrl'>
    <div ng-include="'scroll_view.html'"><!-- MUST use "'...'" notation here --></div>
  </body>
</html> 
```

这是示例 2 所需的 scroll_view.html::

```
<div>
  <ul>
    <li ng-repeat="i in items"><a id='a{{i.id}}'>{{i.id}}</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:04:59.760

您必须在 ng-include 上使用**autoscroll属性。**

在此处查看文档：http://docs.angularjs.org/api/ng.directive: [ngInclude](http://docs.angularjs.org/api/ng.directive:ngInclude)

> autoscroll(optional) – {string=} – ngInclude 是否应该调用 $anchorScroll 在内容加载后滚动视口。如果未设置该属性，则禁用滚动。如果属性设置为没有值，则启用滚动。否则，仅当表达式计算为真值时才启用滚动。

所以在你的情况下：

```
<div ng-include="'scroll_view.html'" autoscroll></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:28:15.077

我认为 html5Mode 需要设置为 true，但我不确定。看看这是否对你有用（它对我有用，但我只在 Chrome 23 上使用 file:///... 加载页面进行了测试）：

```
<!doctype html>
<html ng-app="app">
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <script src="app.js"></script>
    <script type="text/ng-template" id="scroll_view.html">
      <div>
        <ul>
          <li ng-repeat="i in items"><a id='a{{i.id}}'>{{i.id}}</a></li>
        </ul>
      </div>
    </script>
    <script>
        function MainCtrl($scope){
            $scope.items = [];
            for(var i=0; i<200; i++){$scope.items.push({id: i})}
        }
    </script>
  </head>
  <body ng-controller='MainCtrl'>
    <div ng-include="'scroll_view.html'"><!-- MUST use "'...'" notation here --></div>
  </body>
</html> 
```

应用程序.js：

```
var app = angular.module('app', []).
  config(function($locationProvider) {
     $locationProvider.html5Mode(true);
  }) 
```

# php - MS ACCESS 中的佼佼者

> ID：13785059
> 
> 赞同：0
> 
> 时间：2012-12-09T05:53:48.927
> 
> 标签：php, sql, ms-access

请让我知道如何转换以下查询以使其在 ms 访问中完美运行：

```
$sql  = "SELECT * FROM Registration Limit 100,200"; 
```

我尝试使用以下内容，但它并没有像上面的查询在 SQL 中那样工作。

```
$sql  = "SELECT TOP 100,200 * FROM Registration"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:14:08.147

你不能直接这样做；Access 不支持`LIMIT`or`TOP <countstart>, <countend>`语句。

如果您的表中有一个自动增量（标识）列（或者您可以使用其他东西来代替对行进行排序），您可以解决它：

```
SELECT 
  Top 100 reg.* 
FROM 
  registration reg
WHERE 
  reg.RegistrationID > 
  (
   SELECT 
     Top 100 r.RegistrationID 
   FROM 
    registration r
   ORDER BY
    r.RegistrationID
  )
ORDER BY
  reg.RegistrationID 
```

# html - 图像未出现在 HTML 页面中

> ID：13785062
> 
> 赞同：0
> 
> 时间：2012-12-09T05:53:58.203
> 
> 标签：html

我的 HTML 代码是否有问题会导致我的图像不显示？

```
<tbody>
       <tr>
   <td>1517 N Lotus</td>
      <td><img src = "0004livingroombrown.jpeg" alt ="livingroom" width="92"height="120"></td>
         <td>hello3</td>
         <td>hello4</td>
         <td>hello5</td>
       </tr>
      </tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:37:31.480

您的代码没有显示任何问题。
如果您确定图像位于代码所在的同一文件夹中，请
尝试将扩展名 .jpeg 更改为 .jpg
以解决您的问题。

# c++ - 为什么你会选择“a.out file”而不是“a.out < file”，反之亦然？C++

> ID：13785063
> 
> 赞同：2
> 
> 时间：2012-12-09T05:54:03.027
> 
> 标签：c++, unix, command-line

我想我很难理解这些差异。这很重要，因为用户如何知道在命令行中键入什么内容？在命令行中，*a.out 文件*用于需要显式打开文件的文件处理。*a.out < 文件*是重定向输入，您不需要打开文件。优点和缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:06:50.943

当您希望能够将一个程序的输出通过管道传输到另一个程序的输入时，Stdin 特别有用，以此类推，如下所示：

```
cat myfile.txt | grep MyKeyword | wc -l 
```

（这将打印出 myfile.txt 中包含字符串 MyKeyword 的行数）

如果将“grep”和“wc”实用程序设置为仅从指定文件读取，而不是从标准输入读取，上述任务将更加困难；您必须分多个步骤执行此操作：

```
grep MyKeyword myfile.txt > temp.txt
wc -l temp.txt
rm temp.txt 
```

...这会很尴尬，并且还需要将临时文件写入磁盘，这可能会出现问题（例如，如果当前目录中已经有一个 temp.txt 文件怎么办？哎呀，你只是覆盖了它，太糟糕了！或者如果您没有对驱动器的写访问权限怎么办？那么没有办法写出临时文件）

另一方面，有时您的程序需要读取多个文件。例如，如果您想将多个文件连接在一起，您可以这样做：

cat part1.txt part2.txt part3.txt > wholething.txt

如果“cat”只支持从标准输入读取，那么做这样的事情会很困难，因为你需要一些方法将多个文件通过管道传输到 cat 的标准输入流中。

此外，如果程序需要以非线性顺序读取文件（例如 fseek() 在文件中向前或向后读取，而不是直接读取），则无法使用 stdin 执行此操作，因为您可以不要在管道上寻找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:24:47.067

有一个标准的 Unix 习惯用法，“过滤器”程序将读取命令行上指定的每个文件，或者如果命令行上没有指定文件，则从标准输入读取，并将输出写入标准输出。此类过滤器的示例是`sort`和`grep`。该程序`tr`是纯过滤器的罕见例外之一；它只读取标准输入，只写入标准输出。

在命令行上接受文件名的好处是程序的一次调用可以读取多个文件；该程序还可以识别每行输入来自哪个文件。读取标准输入的好处是您不必编写代码来打开文件。显然，有一些方法可以处理不读取文件的程序；例如，您可以使用`cat`读取文件并将输出通过管道传输到程序的标准输入。缺点是程序无法判断任何给定行来自哪个文件（即使它是重定向的单个文件）。

因此，这两种符号通常不等价。两者都很有用。许多有用的程序支持这两种表示法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T06:08:21.077

如果您`cin>>`在程序中使用并且不想从键盘提供输入，则将其存储在文件（例如文件）中并使用`./a.out < file`. 这称为输入重定向。

`./a.out file`没有任何意义。

`./a.out < file > file_output`意味着从程序中获取输入`file`并写入程序的输出`file_output`

# database - ASP.NET MVC 4 MvcMovie 教程 按多个搜索条件过滤查询

> ID：13785065
> 
> 赞同：1
> 
> 时间：2012-12-09T05:54:08.140
> 
> 标签：database, asp.net-mvc-4

我正在阅读 MvcMovie 教程，并试图修改 MoviesController 中的 SearchIndex() 调用以按多个条件进行搜索。本教程向您展示了如何使用以下代码按标题和流派进行搜索：

```
 var movies = from m in db.Movies 
             select m; 

   if (!String.IsNullOrEmpty(searchString)) 
   { 
       movies = movies.Where(s => s.Title.Contains(searchString)); 
   } 

   if (string.IsNullOrEmpty(movieGenre)) 
       return View(movies); 
   else 
   { 
       return View(movies.Where(x => x.Genre == movieGenre)); 
   } 
```

因此，如果我没看错，他们会返回所有电影，然后过滤流派。这对于双重情况​​很好，但是当您添加第三个或第四个搜索条件时，您会将 if 语句调用的数量增加 2 倍（到 n） - 1 个案例。如果假设您有 10 个左右的列可供搜索，这将变得非常不守规矩。

我尝试使用更直接的东西，例如：

```
var movieQry = from m in db.Movies
                where ((m.Title !=null && m.Title == searchString) ||
                       (m.Rating != null && m.Rating == movieRating) ||
                       (m.Genre != null && m.Genre == movieGenre))
                select m; 
```

但是当您第一次访问该页面时不会返回任何内容，并且仅适用于单个过滤器（如果我选择流派 - 我会得到很好的结果，但当我选择流派和评级时不会）并且当我输入搜索词时我什么也没有返回为标题。

有没有更简单的方法来完成？（在某些时候，我将需要能够为我将要编写的项目搜索几十个过滤器......我还有其他关于如何搜索数据库条目的问题，但这不会让我朝着正确的方向前进）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T06:04:22.677

如果您想在条件中包含该列（如果它不为空），请尝试以下操作：

```
 string Title = Request.QueryString["Title"];
  string Rating= Request.QueryString["Rating"];
  string Genre = Request.QueryString["Genre"];

   var movieQry = from m in db.Movies
                    where ((string.IsNullOrEmpty(Title) ? true : m.Title == Title ) &&
                           (string.IsNullOrEmpty(Rating) ? true : m.Rating == Rating ) &&
                           (string.IsNullOrEmpty(Genre)  ? true : m.Genre == Genre ))
                    select m; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T14:26:43.580

Behnam 走在了正确的轨道上。我修改了代码如下：

```
var movieQry2 = from m in db.Movies
    where ((string.IsNullOrEmpty(searchString) ? true : m.Title.Contains(searchString)) &&
           (string.IsNullOrEmpty(movieRating) ? true : m.Rating == movieRating) &&
           (string.IsNullOrEmpty(movieGenre) ? true : m.Genre == movieGenre))
    select m; 
```

这有效并产生了良好的结果。抱歉，Behnam 无法给您一个可接受的答案，但我确实认为它很有用。感谢您为我指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T18:01:50.413

试试这个：

```
var movieQry = db.Movies
  .Where(x=> (Title == null || x.Title ==Title)
   && (Rating == null || x.Rating == Rating)
   && (Genre == null || x.Genre == Genre))                       
 .ToList(); 
```

有关其他分页和排序，请参阅[MVC 多字段搜索](http://www.advancesharp.com/blog/1141/mvc-multiple-field-search-with-webgrid-step-5)

# java - 为什么 goto 在 Java 和其他高级编程语言中被认为是邪恶的？

> ID：13785068
> 
> 赞同：3
> 
> 时间：2012-12-09T05:55:32.560
> 
> 标签：java, goto

> **可能重复：**
> [java中是否有goto语句？](https://stackoverflow.com/questions/2545103/is-there-a-goto-statement-in-java)

为什么 goto 在 Java 中被认为是邪恶的，为什么不适合在高级编程语言中使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T05:59:58.043

最简单的答案是它使代码在超过某些代码行后变得难以管理和难以遵循。

更好的理由..![xkcd](../Images/783cd5b649330bc8cae328b54d6bf620.png)

图片由[xkcd提供](http://xkcd.com/292)

# adapter - 如何在 Windows 8 中创建新的虚拟网络适配器？

> ID：13785074
> 
> 赞同：-3
> 
> 时间：2012-12-09T05:56:02.727
> 
> 标签：adapter, vpn

我尝试在 Windows 8（64 位）上安装 Packetix VPN 客户端。它无法在我的系统上创建网络适配器。我尝试手动制作网络适配器，但似乎找不到创建选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:07:08.057

您可以在 Windows 8 中使用命令提示符（管理员）来设置虚拟网络适配器：使用以下命令：

```
 netsh wlan set hostednetwork ssid=mynetwork key=12345678 mode=allow keyusage=persistent

            // and when you press enter,there will be three messages in command prompt
           //after that you can start your virtual network
      netsh wlan start hostednetwork 
```

这对我有用

# php - 根据 php 变量在 mysql 中按周、月分组。如果在分组条件下

> ID：13785075
> 
> 赞同：0
> 
> 时间：2012-12-09T05:56:11.983
> 
> 标签：php, mysql, sql, dynamic-sql

我有一个表`prescription`，其中的字段

*   处方ID
*   描述
*   患者编号
*   pres_date
*   标题

我知道如何按月、周或天分组。我的问题是，我希望这是动态的。我在 UI 中有一个界面，用户可以在其中选择类别、月、日或周。我将其存储在变量 $category 中。有没有办法在 group by 中使用 if 条件来查看用户选择了哪个类别，并以该格式返回 sql 查询。

例如，如果用户选择月份，在我的 sql 查询中，我希望它返回，按月分组（pres_date），如果用户选择天，我希望 sql 按天返回分组（pres_date）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:02:11.207

代码将是这样的

```
if($_POST['select'] == 'month')
{
    $sql = "select * from table group by month(pres_date)";
}
else if($_POST['select'] == 'day')
{
    $sql = "select * from table group by day(pres_date)";
}
else
{
    $sql = "select * from table group by week(pres_date)";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:04:30.547

您甚至不需要使用条件逻辑。只需执行以下操作：

```
$sql = "SELECT * FROM prescription GROUP BY " . $category . "(pres_date)"; 
```

这样，您的查询就可以使用一行来构建。当然，请确保在运行查询之前验证 $category 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T06:01:05.983

最简单的方法是在 PHP 中，使用 if 或 switch 语句：

```
$sql = "SELECT ... FROM ... ";
switch($category) {
    case 'month':
        $sql .= "GROUP BY month(pres_date)";
        break;
    case 'day':
        $sql .= "GROUP BY day(pres_date)";
        break;
    //... etc ...
    default:
        //bad category value; do some error handling
}

// now do $mysqli->query($sql) or $PDO->query($sql) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T06:01:17.650

听起来你已经让自己走上了正确的道路。您应该能够构建查询的基本形式，然后根据他们选择的值对其进行修改。`group by month(pres_date)`如果他们选择月份等，请尝试以您添加的方式做一些事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T06:05:47.103

不需要多重条件检查，在变量中获取选中的选项，在sql查询中使用，

```
if(isset($_POST['selected_option']))
    $grp_option=$_POST['selected_option'];  
$sql = "SELECT .... GROUP BY".$grp_option."(pres_date)"; 
```

# android - android wifi网络延迟galaxy s2

> ID：13785076
> 
> 赞同：0
> 
> 时间：2012-12-09T05:56:15.867
> 
> 标签：android, networking, wifi

我正在尝试估计通过 WiFi 连接的两个 android 设备之间的网络延迟以同步时钟。但网络延迟从 2ms 到 1024ms 变化很大。有时我得到的延迟值在 2-10 毫秒之间变化，连续 100 次读数。但有时值在 2ms 到 1024ms 之间，连续 100 个读数，如 2、100、570、640、2、5、150。

我正在使用套接字时间戳来确定数据包的确切接收和发送时间。我的设置使用一台笔记本电脑作为 wifi 接入点和两部手机。网络负载不大。我的问题是为什么它有时变化较小，为什么有时变化如此之大。

如何让它变化更小。我是否缺少android上的任何配置。给我一些这种行为的可能原因......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:01:03.350

与有线链路不同，无线链路受到许多不同因素的影响。只有在没有电磁或机械干扰的[无菌环境](http://en.wikipedia.org/wiki/Faraday_cage)中才能获得稳定的结果。

大多数延迟波动是射频冲突的直接结果。WiFi 网络实施[CSMA/CA](http://en.wikipedia.org/wiki/CSMA/CA)协议来处理冲突。一般来说，它会检测空气中是否有任何活动，如果有噪音则推迟传输。

您可以尝试将外部影响降到最低，但这仍然不能保证任何事情：

*   执行 WiFi 扫描，看看哪些频道噪音最大。为我们的链接选择占用较少的。请记住，各个频道之间存在重叠，因此移动到不同的频道不需要消除所有噪音。有关频道重叠以及如何选择频道的信息，请参见此处：[http](http://en.wikipedia.org/wiki/List_of_WLAN_channels) ://en.wikipedia.org/wiki/List_of_WLAN_channels 。

*   清除环境中的机械障碍。

*   从设备的 SW 配置中增加设备的传输 (Tx) 功率。

*   检查设备[的服务质量](http://en.wikipedia.org/wiki/Quality_of_service)(QoS) 配置，在那里进行一些调整可能会产生改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:35:01.997

通过使用 WIFI_MODE_FULL_HIGH_PERF 解决了这个问题。获得此锁后，我观察到持续的网络延迟。

[http://developer.android.com/reference/android/net/wifi/WifiManager.html#WIFI_MODE_FULL_HIGH_PERF](http://developer.android.com/reference/android/net/wifi/WifiManager.html#WIFI_MODE_FULL_HIGH_PERF)

# java - Java 的 String.format 方法中的可变宽度

> ID：13785077
> 
> 赞同：13
> 
> 时间：2012-12-09T05:56:19.363
> 
> 标签：java, string, string-formatting

我正在做一个需要显示文本树的项目。我正在尝试使用 Java 的 String.format 方法来简化格式化过程，但是在尝试应用可变宽度时遇到了麻烦。

当前我有一个称为深度的变量（一个int）。

我尝试执行以下操作：

```
String.format("%"+depth+"s"," ") + getOriginalText() + "\n"; 
```

但是我收到以下错误。

```
java.util.FormatFlagsConversionMismatchException: Conversion = s, Flags = 0 
```

关于如何做到这一点的任何建议，还是我应该满足于循环？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T06:29:27.850

这有效：

```
int depth = 5;
String str= "Hello"+ String.format("%"+depth+"s"," ") + "world" + "\n";
System.out.println(str); 
```

它打印 5 而中间有空格。

> 你好世界。

请检查您的代码并确保为其`depth`分配了有效值`int`。最有可能的是（invalid value in `depth`）是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-31T15:48:53.610

您可以使用“System.out.printf”命令尝试以下操作：

```
int depth = 10;

System.out.printf("%s" + "%" +depth + "s", "Hello","World" ); 
```

> 你好世界

# android - 从资产加载和播放 soundpool

> ID：13785078
> 
> 赞同：4
> 
> 时间：2012-12-09T05:56:47.457
> 
> 标签：android, soundpool

我有一堆声音，分配给一组按钮，我需要播放它们。我所有的声音都在资产文件夹中。但是，它不起作用。**目的是：** *从assetFodler 加载并播放声音*。我将从我的项目中拿出代码示例：

```
//set up  audio player
    mSoundPool = new SoundPool(20, AudioManager.STREAM_MUSIC, 0);
    mAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    streamVolume = streamVolume / mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);

 //getting files lists from asset folder
    aMan = this.getAssets();
    try {
        filelist = aMan.list("");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

为了没有很多代码行，我创建了一个*加载*和*播放*声音的基本程序：

```
public void loadSound (String strSound, int stream) {

    try {
        stream= mSoundPool.load(aMan.openFd(strSound), 1);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     mSoundPool.play(stream, streamVolume, streamVolume, 1, LOOP_1_TIME, 1f);
} 
```

如您所见，我传递了文件（字符串名称）和流ID。

最后，这是我如何使用它：

```
 case R.id.button1:
        //if button was clicked two or more times, when play is still on im doing stop
    mSoundPool.stop(mStream1);
    loadSound(filelist[0],mStream1);
        break; 
```

当我运行项目时，什么也没有发生，logcat 说：

```
12-09 10:38:34.851: W/SoundPool(17331):   sample 2 not READY 
```

任何帮助，将不胜感激。

UPD1：当我这样做时，没有 loadSound 过程它可以正常工作，以下代码是 onCreate：

```
//load fx
    try {
        mSoundPoolMap.put(RAW_1_1, mSoundPool.load(aMan.openFd(filelist[0]), 1));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

和 Onclick 按钮：

```
 //resourcePlayer.stop();
        mSoundPool.stop(mStream1);
        mStream1= mSoundPool.play(mSoundPoolMap.get(RAW_1_1), streamVolume, streamVolume, 1, LOOP_1_TIME, 1f); 
```

我只是不想有这么多的代码行，我想让它看起来不错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:04:28.893

[在使用SoundPool.setOnLoadCompleteListener](http://developer.android.com/reference/android/media/SoundPool.OnLoadCompleteListener.html)播放之前，您需要检查文件是否加载成功

`loadSound`将您的方法代码更改为：

```
public void loadSound (String strSound, int stream) {
     boolean loaded = false;
     mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
            @Override
            public void onLoadComplete(SoundPool soundPool, int sampleId,
                    int status) {
                loaded = true;
            }
        });
    try {
          stream= mSoundPool.load(aMan.openFd(strSound), 1);
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
   // Is the sound loaded already?
   if (loaded) {
     mSoundPool.play(stream, streamVolume, streamVolume, 1, LOOP_1_TIME, 1f);
    }
} 
```

# animation - 使用 Kinetic 在画布上看不到精灵甚至是矩形？

> ID：13785081
> 
> 赞同：0
> 
> 时间：2012-12-09T05:57:35.853
> 
> 标签：animation, canvas, sprite, requirejs, kineticjs

我正在使用 requirejs 在 Kinetic 中加载，并且我有一个简单的脚本来创建精灵并将其加载到画布上。它以一帧的默认空闲状态加载精灵：

```
require(['libraries/kinetic'], function(Kinetic){

  console.log('Initializing....');

  var stage  = new Kinetic.Stage({
    container : 'canvas',
    width     : 578,
    height    : 200
  }),
  layer      = new Kinetic.Layer(),
  animations = {
    idleRight: [{
      x      : 343,
      y      : 2,
      width  : 26,
      height : 58
    }]
  },
  imageObj     = new Image();
  imageObj.src = '/assets/images/billy.png';

  imageObj.onload = function() {

    var billy = new Kinetic.Sprite({
      x          : 25,
      y          : 25,
      image      : imageObj,
      animation  : 'idleRight',
      animations : animations,
      frameRate  : 7
    });

    // add the shape to the layer
    layer.add(billy);

    // add the layer to the stage
    stage.add(layer);

    // start sprite animation
    billy.start();

    console.log('Done.');

  }; // .onload

}); // require 
```

我正在为 require 使用 shim 配置，以便正确加载动力学：

```
requirejs.config({
    baseUrl: '/assets/js',
    shim: {
        'libraries/kinetic' : {
          exports : 'Kinetic'
        },
    }
}); 
```

无论我尝试什么，我都无法显示精灵/图像！任何帮助将不胜感激！

我使用谷歌的这张图片作为测试精灵：

```
http://www.nes-snes-sprites.com/ImagesSheet/SuperDoubleDragonSheet2.gif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:34:18.177

最终使用了 domeReady requirejs 模块，并按如下方式加载它：

```
require(['libraries/require/domReady!',
        'libraries/kinetic'], function(document, Kinetic){... etc 
```

# javascript - 如何在javascript中获取与数字等效的文本

> ID：13785083
> 
> 赞同：1
> 
> 时间：2012-12-09T05:58:37.117
> 
> 标签：javascript, javascript-events

如何将数字转换为等效的文本。

示例：假设如果我在文本框中输入 3 或 23，我希望它们的文本相当于 3 或 23，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:03:09.270

有关更多详细信息，请参阅此答案：

[JavaScript 数字转单词](https://stackoverflow.com/questions/5529934/javascript-numbers-to-words)

对于工作实施：

[http://javascript.about.com/library/bltoword.htm](http://javascript.about.com/library/bltoword.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:02:51.267

这将帮助您完成任务。

[数字转单词](http://javascript.about.com/library/bltoword.htm)

# javascript - 检查 JavaScript 对象是否包含 X？

> ID：13785085
> 
> 赞同：4
> 
> 时间：2012-12-09T05:58:56.090
> 
> 标签：javascript

我需要知道一个 JavaScript 对象是否包含某个变量。

EG：检查“地图”是否包含“这里”

```
var map = {
    '10': '0',
    '20': '0',
    '30': 'here',
    }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T06:01:35.480

你必须遍历对象来测试它：

```
var chk = false;
for(var key in map){
    if(map[key] == "here"){
        chk = true;
        break;
    }
}
alert(chk?"Yup":"Nah"); 
```

你也可以把它放在`Object`原型中：

```
Object.prototype.ifExist = function(txt){
    var chk = false;
    for(var key in this){
        if(this[key] == txt){
            chk = true;
            break;
        }
    }
    return chk;
}

//map.ifExist("here");
//return true 
```

演示：http: [//jsfiddle.net/DerekL/yWnYy/](http://jsfiddle.net/DerekL/yWnYy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:02:22.383

`for..in`您必须使用以下语法迭代对象：

```
function in_object(value, object) {
    for (var key in map) {
        if (map[key] == value) {
            return true;
        }
    }

    return false;
} 
```

这是一个例子：

```
> in_object('heres', map)
false
> in_object('here', map)
true 
```

# php - 在 PHP 中以格式化方式编辑 XML

> ID：13785087
> 
> 赞同：1
> 
> 时间：2012-12-09T05:59:07.780
> 
> 标签：php, xml

我是 PHP 新手，我想使用 PHP 编辑 XML 文件。当我在我的 xml 文件中添加子项时，我没有以正确的格式获取它们。这会在文件中进一步编辑时产生麻烦。请帮我编辑我的 xml 文件，以便生成的 xml 格式正确。

提前致谢。

我正在使用此代码编辑我的 xml 文件

```
<?php

$xml_file = simplexml_load_file('editing.xml');

$xml_file->formatOutput = true;

$xml_file->preserveWhiteSpace = false;

$xml_file->addChild('article',' ')->addAttribute('id', 'id3');

file_put_contents('editing.xml', $xml_file->asXML());
?> 
```

这是我正在使用的 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<userva>
    <user id="BPL000001" first_name="f_name" last_name="l_name">

        <article id="wersomething">
            <title>Some title</title>
            <description>he does play well all the time</description>
            <posted_on>11/Nov/2012</posted_on>
            <text_contents>Some contents.. Some Contents..Some contents.. Some Contents..Some contents.. Some Contents..</text_contents>
            <images>
                <image>image1.jpg</image>
                <image>image2.jpg</image>
            </images>
            <links>
                <link>link1</link>
                <link>link2</link>
            </links>
            <likes>
                <like>like11</like>
                <like>like12</like>
                <like>like13</like>
                <like>like14</like>
                <like>like15</like>
            </likes>
            <comments>
                <comment by="523423440"/>
                <comment by="054232130"/>
                <comment by="15849584200"/>
            </comments>
       </article>

        <article id="id2">
            <title>Some title</title>
            <description>he does play well all the time</description>
            <posted_on>95956262</posted_on>
            <text_contents>Some contents.. Some Contents..Some contents.. Some Contents..Some contents.. Some Contents..</text_contents>
            <images>
                <image>imageva1.jpg</image>
                <image>imageva2.jpg</image>
            </images>
            <links>
                <link>link1</link>
                <link>link2</link>
            </links>
            <likes>
                <like>like21</like>
                <like>like22</like>
                <like>like23</like>
                <like>like24</like>
                <like>like25</like>
            </likes>
            <comments>
                <comment by="0142264340"/>
                <comment by="0523412130"/>
                <comment by="5523484200"/>
            </comments>
        </article>
    </user>
</userva> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:10:15.160

参考这个

[http://php.net/manual/en/function.simplexml-element-asXML.php](http://php.net/manual/en/function.simplexml-element-asXML.php)

试试这个：

```
$dom = dom_import_simplexml($simpleXml)->ownerDocument;
$dom->formatOutput = true;
echo $dom->saveXML(); 
```

# replace - 如果 c++ 语言中空格等于 4 或大于 4，如何用字符串中计算的空格数替换空格？

> ID：13785089
> 
> 赞同：0
> 
> 时间：2012-12-09T05:59:53.287
> 
> 标签：replace, whitespace

假设给你一个准备不好的文本文件，例如，单词之间有多个字符空格、文本中的空行、重复的字符序列等。你的任务是阅读这个文本文件并执行一些简单的编辑，然后将结果写入单独的文件。以下是您必须完成的具体任务：

(i) 编写一个函数 compress()，在文本行中用字符 $n$ 替换所有四个或更多空格的序列，其中 n 是空格的数量。如果在输入文本中找到字符 $ 必须做什么？将结果存储在单独的文本文件中。

(ii) 编写一个函数 expand()，将上面由 compress() 函数创建的文本文件转换为重新生成原始文本。

您可以使用以下示例文本文件 original-text.txt 测试 (i) 和 (ii) 的 compress() 和 expand() 函数

1: ^^^^假设^你^是^给定^with^a^text^^^^^^^^^文件^那个^已经^已经^^^糟糕^^^

2：准备^^^如^如^更多^^^^比^一个^字符^^^^^^^^^^^^^^^^之间的空格^^

3：单词，^^^行^in^the^^^^text^^^^^^that^are^empty，^repeated^sequence^^^^^^^^

4：空格^^^^^由^^^^^个字符^^^^$n$^^^^^,^其中^^^n^是^^个^个^个^空格

5: ^^^^^$^What^must^be^^^^^^done^if^^^the^character^$^is^found^in^the^input^text

6: ?.Storetheresultinaseparatetext^file^^^^^^。

7: ^^^^^^^^^^^^^^^^^^^^^^^^

8：写^a^函数^^^^^expand()^that^converts^^^^^^$n$^the^text^file^create。

请注意，上面显示的每个文本行开头的数字不是文本文件的一部分，并且上例中文本文件中的字符空格由“^”字符表示（在实际的文本文件中，空格字符' ' 将会被使用）。

使用文件 original-text.txt 作为输入的 compress() 函数的示例输出：

1：$4$假设给你一个文本$10$的文件已经很糟糕了

2：准备如more$4$than一个字符$16$之间的空格

3：$4$text$6$中为空的单词、行，重复序列$8$

4：空格$5$按字符$5$$n$$5$，其中n为空格数

5: $5$$ 如果在输入文本中找到字符 $ 必须是 $6$done

6: ?.Storetheresultinaseparatetext 文件$6$。

7：24美元

8: 编写一个函数$5$expand() 来转换$6$$n$ 的文本文件创建。

expand() 函数的输出与 original-text.txt 中的一样。

这就是我想要做的..

```
int main()
{
    ifstream input("original-text.txt");

    //Read Data
    string data;
    while (!input.eof())
    {
        getline(input,data);
        cout << data << endl;
    }

    int i,n;
    n= 0;
    for( i = 0; data[i] != '\0'; i++ )
    {
        if( data[i] == ' ' )
            n++;

        cout << "$" << n << "$";
    }

    input.close();

    return 0;
} 
```

# delphi - 如何在后台线程中使用 LoadKeyboardLayout？

> ID：13785090
> 
> 赞同：10
> 
> 时间：2012-12-09T05:59:54.270
> 
> 标签：delphi, keyboard-layout, tthread

我正在使用[LoadKeyboardLayout](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx)函数以这种方式加载和激活键盘布局：

```
procedure TfrmMain.eSearchEnter(Sender: TObject);
begin
  LoadKeyboardLayout('00000429', KLF_ACTIVATE);
end; 
```

它工作得很好，但它会冻结活动表单 1-2 秒，因为此更改需要一些时间。为了防止这种情况，我已将此代码移至这样的后台线程：

```
type
  FLangChangeThread = class(TThread)
  private
    FLang: string;
  protected
    procedure Execute; override;
  public
    property Lang: string read FLang write FLang;
  end;

implementation

procedure FLangChangeThread.Execute;
begin
  if FLang = 'EN' then
    LoadKeyboardLayout('00000409', KLF_ACTIVATE)
  else
  if FLang = 'FA' then
    LoadKeyboardLayout('00000429', KLF_ACTIVATE);
end; 
```

然后我以这种方式运行这个后台线程：

```
procedure TfrmMain.ChangeWritingLanguage(ALang: string);
begin
  with FLangChangeThread.Create(True) do
  begin
    FreeOnTerminate := True;
    Lang := ALang;
    Resume;
  end;
end;

procedure TfrmMain.eSearchEnter(Sender: TObject);
begin
  ChangeWritingLanguage('FA');
end; 
```

问题是，它没有按预期改变键盘布局。我已经调试了代码并且所有的行都被执行了；只是[LoadKeyboardLayout](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx)功能还没有发挥作用。

如何使[LoadKeyboardLayout](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx)函数从后台线程工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T06:04:18.473

首先，您应该检查[`LoadKeyboardLayout`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx)函数的结果，如果失败，您应该检查[`GetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)函数返回的错误以确定错误所在。

但是即使这个函数调用成功，它也会激活输入的语言环境标识符，但是对于你的工作线程。作为标志的[`LoadKeyboardLayout`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx)参考状态[`KLF_ACTIVATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx#KLF_ACTIVATE)（由我强调）：

> **KLF_ACTIVATE**
> 
> 如果指定的输入语言环境标识符尚未加载，则该函数加载并激活**当前线程**的输入语言环境标识符。

* * *

虽然，如果您想为整个过程加载和激活键盘布局，您可以尝试将[`KLF_ACTIVATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx#KLF_ACTIVATE)标志与以下标志结合起来[`KLF_SETFORPROCESS`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646305%28v=vs.85%29.aspx#KLF_SETFORPROCESS)：

```
const
  KLF_SETFORPROCESS = $00000100;
begin
  if LoadKeyboardLayout('00000429', KLF_ACTIVATE or KLF_SETFORPROCESS) = 0 then
    RaiseLastOSError;
end; 
```

# css - 为什么实际尺寸小于指定尺寸？

> ID：13785094
> 
> 赞同：2
> 
> 时间：2012-12-09T06:00:08.647
> 
> 标签：css, html, input

考虑一个代码：

```
<div style="width: 10em; float: left; padding: 0; margin: 0">
  <input type="text" style="width: 10em"/>
</div> 
```

事实上，文本字段并没有像预期的那样占据整个父 DIV。为什么？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:06:49.993

答案是字体大小。

em 是“相对于当前字体大小的大小”的度量。

由于输入元素的默认字体大小小于 div（由于浏览器默认设置），因此 10em 等同于不同的宽度。

您可以使用 '%' 单位轻松解决此问题：

```
<input type="text" style="width:100%"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:05:16.117

尝试使用 100% 宽度而不是`em`宽度：

```
<div style="width: 10em; float: left; padding: 0; margin: 0">
  <input type="text" style="width: 100%"/>
</div> 
```

请注意，文本字段仍将具有填充和边框 - 因此 100% 的宽度将溢出包含的 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T06:04:12.687

```
<!DOCTYPE html>
<html>
    <head>
        <title> problem </title>
    </head>
    <body>
       <div style="width: 10em; float: left; padding: 0; margin: 0;background-color:red;">
  <input type="text" style="width: 100%; padding:0; margin:0"/>
</div>
    </body>
</html> 
```

# vb.net - 为什么运行媒体播放器会消除我的 VB.NET 应用程序的音频延迟？

> ID：13785095
> 
> 赞同：1
> 
> 时间：2012-12-09T06:00:32.723
> 
> 标签：vb.net, audio, latency

在我的 VB.NET 应用程序中播放作为资源嵌入的 wav 文件（0.034 秒长）时，我遇到了一个奇怪的问题。

我的应用程序应该在按下按钮时异步循环声音，并在释放按钮时停止声音。

问题是按钮被快速按下和释放时似乎有延迟，尤其是在连续多次单击的情况下。

这种延迟使音频听起来断断续续，它还会挂起应用程序，直到对 play() 和 stop() 的调用队列结束。

但是，我注意到如果在运行我的应用程序时同时运行音频播放器（播放声音文件或暂停，而不是停止），延迟或延迟就消失了。

我测试过的播放器有：Windows Media Player、Windows Media Player Classic - Home Cinema、Foobar2000 和 QuickTime。

这是代码：

```
Option Explicit On
Option Strict On

Public Class frmMain

    Private btnPlayPressed As Boolean

    Public Sub New()
        ' This call is required by the designer.
        InitializeComponent()
        ' Add any initialization after the InitializeComponent() call.
        btnPlayPressed = False
    End Sub

    Private Sub btnPlay_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles btnPlay.MouseDown
        If Not btnPlayPressed Then
            My.Computer.Audio.Play(My.Resources.Beep, AudioPlayMode.BackgroundLoop)
            btnPlayPressed = True
        End If
    End Sub

    Private Sub btnPlay_MouseUp(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles btnPlay.MouseUp
        If btnPlayPressed Then
            My.Computer.Audio.Stop()
            btnPlayPressed = False
        End If
    End Sub

    Private Sub btnPlay_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles btnPlay.KeyDown
        If e.KeyCode.Equals(Keys.Space) Then
            btnPlay_MouseDown(sender, Nothing)
        End If
    End Sub

    Private Sub btnPlay_KeyUp(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles btnPlay.KeyUp
        If e.KeyCode.Equals(Keys.Space) Then
            btnPlay_MouseUp(sender, Nothing)
        End If
    End Sub

End Class 
```

我还使用了 VB.NET 中提供的各种其他音频功能，它们都有这个问题，但我坚持使用 My.Computer.Audio，因为它简单易读。

为什么运行音频播放器会消除 My.Computer.Audio.play 的延迟？
有没有办法从我的代码中消除延迟？

其他详细信息：
IDE：Visual Studio 2010 Express
操作系统：Vista sp2 x86/Windows 7 x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:06:14.250

这可能有几个原因。第一个可能是其他软件专门降低了播放缓冲区的大小。完成此操作后，延迟会降低。

第二个原因可能与采样率有关。如果以字节为单位设置缓冲区大小并且采样率加倍，则该缓冲区的持续时间是原来的一半。如果您在应用程序中以一定的速率播放音频，而其他软件以不同的速率播放，那么 Windows 的音频混合服务可能会以不同的方式调整缓冲区。

没有办法完全远程延迟。这不是数字音频的工作方式。但是，您可以通过使用 ASIO 或类似工具来显着减少它。

# windows-phone-7 - WP7 崩溃报告“.__c__DisplayClass1._Run_b__0”

> ID：13785106
> 
> 赞同：1
> 
> 时间：2012-12-09T06:02:47.557
> 
> 标签：windows-phone-7, crash, crash-reports

我是分析崩溃报告的新手，所以请多多包涵。我得到了这个崩溃报告：

```
Frame    Image             Function                                           

    Offset    
0        coredll.dll       xxx_RaiseException                                     19        
1        mscoree3_7.dll                                                           520892    
2        mscoree3_7.dll                                                           461967    
3        mscoree3_7.dll                                                           534468    
4                          TransitionStub                                         0         
5                          .__c__DisplayClass1._Run_b__0                          140       
6                          .__c__DisplayClassa._InvokeGetResponseCallback_b__8    76        
7                          .WorkItem.WaitCallback_Context                         104       
8                          System.Threading.ExecutionContext.Run                  324       
9                          .WorkItem.doWork                                       220       
10                         System.Threading.Timer.ring                            296       
11       mscoree3_7.dll                                                           507848    
12       mscoree3_7.dll                                                           509212    
13       mscoree3_7.dll                                                           440663    
14       mscoree3_7.dll                                                           440417    
15       mscoree3_7.dll                                                           439375    
16       mscoree3_7.dll                                                           317155    
17       coredll.dll       ThreadBaseFunc                                         144 
```

我能理解的是，第 5 行和第 6 行指向了崩溃的原因。此跟踪是否意味着计时器触发事件​​导致了问题？如果是这样，我的应用程序没有任何计时器触发事件​​，只有一个设置为每 30 秒刷新一次广告的广告 SDK。是否有可能当广告控件无法获取广告（因为没有 Internet 连接）时它会崩溃？

# opengl-es - 在离散层中渲染，然后合成

> ID：13785109
> 
> 赞同：1
> 
> 时间：2012-12-09T06:03:01.020
> 
> 标签：opengl-es, webgl, three.js

在我的项目中，我知道有 3 个不显眼的层。

1.  背景
2.  中地
3.  前景

这些层中的每一层都可能具有截然不同的单位比例和可能重叠的几何形状。但我不希望它们渲染得好像它们占据了相同的“空间”。我希望它们以逻辑层顺序呈现，而不是它们在 3D 空间中的顺序。

例如，假设**背景**是一个狭窄的管子，半径为 10 个单位，我将它放在相机上以实现类似隧道的效果。然后我想在远离相机的场景中放置一个大立方体作为**Foreground ，每边 100 个单位。**

在这种情况下，立方体和隧道相交并相互遮蔽。我正在寻找一种方法来渲染整个隧道，然后渲染整个立方体，然后将渲染的立方体放在渲染隧道的顶部。而且我希望该立方体中的纹理/着色器中的任何 alpha 透明度都被干净地合成，显示透明像素后面的渲染隧道。

所以：

1.  我是在描述一种存在的技术或功能吗？如果有，那叫什么？
2.  WebGL 可以做到这一点吗？
3.  three.js 可以做到这一点吗？
4.  与一次性渲染整个帧相比，这会导致性能大幅下降吗？
5.  如何在 three.js 中构建我的渲染来设置它？

*图形编程仍然是新的`*GL`，如果我的词汇不准确，请见谅。迂腐的词汇更正表示赞赏，因为它会帮助我谷歌！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:35:25.427

在对这个例子进行一些逆向工程之后，我想我管理了这个：http: [//mrdoob.github.com/three.js/examples/webgl_rtt.html](http://mrdoob.github.com/three.js/examples/webgl_rtt.html)

基本上

```
renderer.autoClear = false; 
```

然后不是像这样渲染一个场景：

```
render: function() {
  renderer.render(scene, camera);
} 
```

我在渲染多个场景之前手动清除：

```
render: function() {
  renderer.clear()
  renderer.render(background, camera);
  renderer.render(midground,  camera);
  renderer.render(foreground, camera);
} 
```

但是，仍然不能完全确定性能影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:14:22.513

首先，您可以渲染 3 个不同的画布并设置它们的 z-index 和位置，使它们重叠，浏览器将合成它们。

如果您想在 1 个画布中完成所有操作，那么基本上您只需在绘制一些内容后清除深度缓冲区即可。

```
drawStuffInBack();

// clear the depth (and stencil buffers)
gl.clear(gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);

drawStuffInMiddle();

// clear the depth (and stencil buffers)
gl.clear(gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);

drawStuffInFront(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-09T06:42:58.533

以下是一个工作示例，它有一个`VisualLayers`用于管理任意数量层的类，它使用`renderer.autoClear = false`Alex Waynes 和 gman 的答案所暗示的技术和清除深度技术。

这种方法很好，因为`renderOrder`对象没有被修改（这是另一种方法），因此不会引入其他问题。

尝试使用 UI 中的选项来查看它的作用：

```
// @ts-check

////////////////////////
// LAYER SYSTEM
////////////////////////

/** @typedef {{name: string, backingScene: THREE.Scene, order: number}} Layer */

class VisualLayers {
    /**
     * @type {Array<Layer>}
     * @private
     */
    __layers = [];

    constructor(
        /** @private @type {THREE.WebGLRenderer} */ __renderer,
        /** @private @type {typeof THREE.Scene} */ __Scene = THREE.Scene
    ) {
        this.__renderer = __renderer;
        this.__Scene = __Scene;
    }

    defineLayer(/** @type {string} */ name, /** @type {number=} */ order = 0) {
        const layer = this.__getLayer(name);

        // The default layer always has order 0.
        const previousOrder = layer.order;
        layer.order = name === "default" ? 0 : order;

        // Sort only if order changed.
        if (previousOrder !== layer.order)
            this.__layers.sort((a, b) => a.order - b.order);

        return layer;
    }

    /**
     * Get a layer by name (if it doesn't exist, creates it with default order 0).
     * @private
     */
    __getLayer(/** @type {string} */ name) {
        let layer = this.__layers.find((l) => l.name === name);

        if (!layer) {
            layer = { name, backingScene: new this.__Scene(), order: 0 };
            layer.backingScene.autoUpdate = false;
            this.__layers.push(layer);
        }

        return layer;
    }

    removeLayer(/** @type {string} */ name) {
        const index = this.__layers.findIndex((l) => {
            if (l.name === name) {
                l.backingScene.children.length = 0;
                return true;
            }

            return false;
        });

        if (index >= 0) this.__layers.splice(index, 1);
    }

    hasLayer(/** @type {string} */ name) {
        return this.__layers.some((l) => l.name === name);
    }

    /** @readonly */
    get layerCount() {
        return this.__layers.length;
    }

    addObjectToLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {string | string[]} */ layers
    ) {
        if (Array.isArray(layers)) {
            for (const name of layers) this.__addObjectToLayer(obj, name);
            return;
        }

        this.__addObjectToLayer(obj, layers);
    }

    addObjectsToLayer(
        /** @type {THREE.Object3D[]} */ objects,
        /** @type {string | string[]} */ layers
    ) {
        for (const obj of objects) {
            this.addObjectToLayer(obj, layers);
        }
    }

    /** @private @readonly */
    __emptyArray = Object.freeze([]);

    /** @private */
    __addObjectToLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {string} */ name
    ) {
        const layer = this.__getLayer(name);
        const proxy = Object.create(obj, {
            children: { get: () => this.__emptyArray }
        });
        layer.backingScene.children.push(proxy);
    }

    removeObjectFromLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {string | string[]} */ nameOrNames
    ) {
        if (Array.isArray(nameOrNames)) {
            for (const name of nameOrNames) {
                const layer = this.__layers.find((l) => l.name === name);
                if (!layer) continue;
                this.__removeObjectFromLayer(obj, layer);
            }
            return;
        }

        const layer = this.__layers.find((l) => l.name === nameOrNames);
        if (!layer) return;
        this.__removeObjectFromLayer(obj, layer);
    }

    /** @private */
    __removeObjectFromLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {Layer} */ layer
    ) {
        const children = layer.backingScene.children;
        const index = children.findIndex(
            (proxy) => /** @type {any} */ (proxy).__proto__ === obj
        );

        if (index >= 0) {
            children[index] = children[children.length - 1];
            children.pop();
        }
    }

    removeObjectsFromAllLayers(/** @type {THREE.Object3D[]} */ objects) {
        for (const layer of this.__layers) {
            for (const obj of objects) {
                this.__removeObjectFromLayer(obj, layer);
            }
        }
    }

    render(
        /** @type {THREE.Camera} */ camera,
        /** @type {(layerName: string) => void} */ beforeEach,
        /** @type {(layerName: string) => void} */ afterEach
    ) {
        for (const layer of this.__layers) {
            beforeEach(layer.name);
            this.__renderer.render(layer.backingScene, camera);
            afterEach(layer.name);
        }
    }
}

//////////////////////
// VARS
//////////////////////

let camera, stats, geometry, material, object, object2, root;
let time = 0;
/** @type {THREE.Scene} */
let scene;
/** @type {THREE.WebGLRenderer} */
let renderer;
/** @type {VisualLayers} */
let visualLayers;
const clock = new THREE.Clock();
const greenColor = "#27ae60";
const options = {
    useLayers: true,
    showMiddleBox: true,
    rotate: true,
    layer2Order: 2
};

//////////////////////
// INIT
//////////////////////

~(function init() {
    setup3D();
    renderLoop();
})();

////////////////////////////////
// SETUP 3D
////////////////////////////////

function setup3D() {
    const container = document.createElement("div");
    container.id = "container";
    document.body.appendChild(container);

    // CAMERA
    camera = new THREE.PerspectiveCamera(
        70,
        window.innerWidth / window.innerHeight,
        1,
        10000
    );
    camera.position.x = 0;
    camera.position.z = 500;
    camera.position.y = 0;

    scene = new THREE.Scene();

    // RENDERERS

    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setClearColor(0x111111);
    container.appendChild(renderer.domElement);

    // LAYERS

    visualLayers = new VisualLayers(renderer);
    // Layers don't have to be defined. Adding an object to a layer will
    // automatically create the layer with order 0\. But let's define layers with
    // order values.
    visualLayers.defineLayer("layer1", 1);
    visualLayers.defineLayer("layer2", 2);
    visualLayers.defineLayer("layer3", 3);

    // LIGHTS

    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(300, 0, 300);
    scene.add(directionalLight);
    visualLayers.addObjectToLayer(directionalLight, [
        "layer1",
        "layer2",
        "layer3"
    ]);

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
    scene.add(ambientLight);
    visualLayers.addObjectToLayer(ambientLight, ["layer1", "layer2", "layer3"]);

    // GEOMETRY

    root = new THREE.Object3D();
    scene.add(root);

    geometry = new THREE.BoxGeometry(100, 100, 100);
    material = new THREE.MeshPhongMaterial({
        color: greenColor,
        transparent: false,
        opacity: 1
    });

    object = new THREE.Mesh(geometry, material);
    root.add(object);
    visualLayers.addObjectToLayer(object, "layer1");
    object.position.y = 80;
    object.position.z = -20;
    // object.rotation.y = -Math.PI / 5

    object2 = new THREE.Mesh(geometry, material);
    object.add(object2);
    visualLayers.addObjectToLayer(object2, "layer2");
    object2.position.y -= 80;
    object2.position.z = -20;
    object2.rotation.y = -Math.PI / 5;

    const object3 = new THREE.Mesh(geometry, material);
    object2.add(object3);
    visualLayers.addObjectToLayer(object3, "layer3");
    object3.position.y -= 80;
    object3.position.z = -20;
    object3.rotation.y = -Math.PI / 5;

    // GUI

    const pane = new Tweakpane({
        title: "VisualLayers"
    });
    pane.addInput(options, "useLayers", { label: "use layers" });
    pane.addInput(options, "showMiddleBox", { label: "show middle box" });
    pane.addInput(options, "rotate");
    pane
        .addInput(options, "layer2Order", {
            label: "layer2 order",
            options: {
                0: 0,
                2: 2,
                4: 4
            }
        })
        .on("change", () => visualLayers.defineLayer("layer2", options.layer2Order));

    // STATS
    // SEE: https://github.com/mrdoob/stats.js

    stats = new Stats();
    stats.domElement.style.position = "absolute";
    stats.domElement.style.left = "0px";
    stats.domElement.style.top = "0px";
    stats.setMode(0);
    document.body.appendChild(stats.domElement);
}

//////////////////////
// RESIZE
//////////////////////

(window.onresize = function (event) {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
})();

//////////////////////
// RAF RENDER LOOP
//////////////////////

function render() {
    stats.begin();

    if (options.rotate) {
        time += clock.getDelta();
        object.rotation.y += 0.02;
        root.rotation.y = Math.PI / 2 + (Math.PI / 6) * Math.sin(time * 0.001);
    }

    object2.visible = options.showMiddleBox;

    if (options.useLayers) {
        scene.updateWorldMatrix(true, true);
        renderer.autoClear = false;
        renderer.clear();
        visualLayers.render(camera, beforeEachLayerRender, afterEachLayerRender);
    } else {
        renderer.autoClear = true;
        renderer.render(scene, camera);
    }

    stats.end();
}

function renderLoop() {
    render();
    requestAnimationFrame(renderLoop);
}

function beforeEachLayerRender(layer) {}
function afterEachLayerRender(layer) {
    renderer.clearDepth();
}
```

```
html,
body,
#container {
    margin: 0px;
    padding: 0px;
    width: 100%;
    height: 100%;
}

canvas {
    background: transparent;
    display: block;
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
}
```

```
<script src="https://cdn.jsdelivr.net/npm/tweakpane@1.5.5/dist/tweakpane.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/stats.js/r11/Stats.min.js"></script>
<script src="//unpkg.com/three@0.121.1/build/three.min.js"></script>
<script src="//unpkg.com/postprocessing@6.17.4/build/postprocessing.js"></script>
```

（[codepen 上的示例](https://codepen.io/trusktr/pen/fba5c480de9f08357152dad3c79b378b?editors=0010)）

# floating-point - 将浮点数存储在堆栈中

> ID：13785112
> 
> 赞同：1
> 
> 时间：2012-12-09T06:03:19.490
> 
> 标签：floating-point, mips

我正在尝试使用堆栈指针将浮点数从寄存器 $f1 存储到堆栈中。我总是收到地址超出范围的错误。在我这样做之后，我想从堆栈中弹出单词并将它们打印到屏幕上。我正在使用火星。这是一些示例代码。

# 示例代码

```
 li, $t3, 0      # set counter register
l.s $f1, zero       # load floating point 0.00 into $f1
li $sp, 252     # start the stack size
swc1 $f1, ($sp)     # store the floating point as a word in the stack
loop:
addi $sp, $sp, -4   # decrement the stack pointer
swc1 $f1, ($sp)     # store the floating point as a word in the stack   
bgt $sp, $t3, loop  # continue loop until all stack is populated

print to screen after this line

li $t2, 7
li $sp, 252     # start the stack size
lwc1 $f12, ($sp)    # pop from stack
li $v0, 2
syscall
printloop:
addi $sp, $sp, -4   # decrement the stack pointer
lwc1 $f12, ($sp)    # pop from stack
li $v0, 2       
syscall
addi $t2, $t2, -1
bnez $t2, printloop
lw $a0, newline
li $v0, 4
syscall
li $t2, 7
printloop2:
addi $sp, $sp, -4   
lwc1 $f12, ($sp)
li $v0, 2
syscall
addi $t2, $t2, -1
bnez $t2, printloop2
lw $a0, newline
li $v0, 4
syscall
li $t2, 7
printloop3:
addi $sp, $sp, -4   
lwc1 $f12, ($sp)
li $v0, 2
syscall
addi $t2, $t2, -1
bnez $t2, printloop3
lw $a0, newline
li $v0, 4
syscall
li $t2, 7
printloop4:
addi $sp, $sp, -4   
lwc1 $f12, ($sp)
li $v0, 2
syscall
addi $t2, $t2, -1
bnez $t2, printloop4
lw $a0, newline
li $v0, 4
syscall
li $t2, 7
printloop5:
addi $sp, $sp, -4   
lwc1 $f12, ($sp)
li $v0, 2
syscall
addi $t2, $t2, -1
bnez $t2, printloop5
lw $a0, newline
li $v0, 4
syscall
li $t2, 7
printloop6:
addi $sp, $sp, -4   
lwc1 $f12, ($sp)
li $v0, 2
syscall
addi $t2, $t2, -1
bnez $t2, printloop6
lw $a0, newline
li $v0, 4
syscall
li $t2, 7
printloop7:
addi $sp, $sp, -4   
lwc1 $f12, ($sp)
li $v0, 2
syscall
addi $t2, $t2, -1
bnez $t2, printloop7
lw $a0, newline
li $v0, 4
syscall
li $t2, 7   
printloop8:
addi $sp, $sp, -4   
lwc1 $f12, ($sp)
li $v0, 2
syscall
addi $t2, $t2, -1
bnez $t2, printloop8
li $v0, 10
syscall 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:21:09.920

我认为您的问题是您在`text`段中设置了堆栈。我会删除这一行

```
li $sp, 252     # start the stack size 
```

和改变

```
li, $t3, 0 
```

至

```
subu $t3, $sp, 252 
```

这样你循环直到堆栈充满 64 个项目

# php - PHP & MySQL 为相同的时间戳返回不同的日期

> ID：13785113
> 
> 赞同：3
> 
> 时间：2012-12-09T06:03:23.383
> 
> 标签：php, mysql, date, time, format

我遇到了一个有点令人沮丧的问题，我觉得有一个简单的解决方案。当我将相同的 UNIX 时间戳传递给 PHP`date`和 MySQL`FROM_UNIXTIME`方法时，它们将返回两个非常不同的日期。我想从 MySQL 返回一个与 PHP 返回的值匹配的值。

这是我当前使用的代码及其输出。提供的时间戳代表日期`Tue, 01 Jan 2013 (01/01/2013)`。也供参考，这里是格式值。

**MySQL 格式**

*   %j = 一年中的某一天 (001..366)。
*   %m = 月份，数字 (00..12)。
*   %y = 年份，数字（两位数）。

**PHP 格式**

*   z = 从 0 开始的一年中的某一天（0 到 365）。
*   m = 月份的数字表示，带有前导零（01 到 12）。
*   y = 年份的两位数表示（例如：99 或 03）。

**MySQL 查询**

```
SELECT FROM_UNIXTIME(1357018200, '%j-%m-%y');
-> 366-12-12 
```

**PHP 代码**

```
echo date('z-m-y', 1357018200);
-> 0-01-13 
```

任何帮助将不胜感激，感谢您的时间。:)

**其他信息**

*   **MySQL 版本**：5.5.23
*   **MySQL system_time_zone** : CDT
*   **MySQL 时区**：系统
*   **PHP date_default_timezone_get** : 美国/芝加哥 (CDT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:20:16.707

您的 PHP 和 MySQL 在时间上不一致。在以下位置使用时间转换器：

[http://www.4webhelp.net/us/timestamp.php?action=stamp&stamp=1357018200&timezone=-6](http://www.4webhelp.net/us/timestamp.php?action=stamp&stamp=1357018200&timezone=-6)

给出结果“2012 年 12 月 31 日星期一 23:30:00 (GMT -6)”，因此您的 PHP 给出了错误的结果。尽管您已经给出了 PHP 运行的时区，但您可以通过运行来仔细检查：

```
date_default_timezone_set ("America/Chicago");
echo date('z-m-y', 1357018200)."\r\n"; 
```

哪个应该给出“365-12-12”。

我想可能是某些东西在其他地方错误地设置了时区，或者“美国/芝加哥（CDT）”可能是您的 php.ini 文件中旧版本 PHP 中的旧设置。

查看来自[http://php.net/manual/en/timezones.america.php](http://php.net/manual/en/timezones.america.php)的允许时区值列表，没有列出“America/Chicago (CDT)”，因此您应该弄清楚它的设置位置虚假价值，因为它可能会导致其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:12:16.380

解决时区问题后，实际问题的答案是：

```
function    sqlStyleDate($timestamp){

    $dayOfYear = date("z", $timestamp) + 1;
    $year = date("y", $timestamp);
    $month = date("n", $timestamp);

    $result = "$dayOfYear-$year-$month";

    return $result;
}

echo sqlStyleDate(1357018200)."\r\n"; 
```

这会将 PHP 一年中的 0-365 天转换为与 MySQL 一年中的 1-366 天相同。

# three.js - 透明圆柱体的轮廓渲染

> ID：13785114
> 
> 赞同：0
> 
> 时间：2012-12-09T06:03:46.467
> 
> 标签：three.js

我正在尝试为类似 CAD 的项目渲染圆柱体。由于其中多个将相互嵌套，我希望显示它们类似于： http: [//mrwadeturner.pbworks.com/f/1305815353/FC_Cylinder_41702_lg.gif](http://mrwadeturner.pbworks.com/f/1305815353/FC_Cylinder_41702_lg.gif)

即我想要勾勒出轮廓以及底部和底部的圆圈，其余的应该是（半）透明的。

请注意，这与使用常规线框设置不同，因为这将描绘圆柱体侧面的每个面。我发现的另一种方法 - 渲染对象两次，一次是彩色并略微放大，一次是顶部的“常规”版本 - 不幸的是也不起作用，因为将嵌套多个圆柱体。

我认为这应该可以通过自定义顶点和片段着色器实现，但我对使用它们不是很熟练。实现这种效果的最佳方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:23:31.963

听起来你只需要将各种纹理应用到相同的面上。接下来，您要尝试创建自定义纹理，该纹理将是一个简单的透明 .png 图像，带有实心虚线边框。`side:THREE.FrontSide`然后你必须设置`side:THREE.BackSide`你的纹理并使用`depthTest`.

另一种方法是使用您老化的线来逐个顶点地创建。有关自定义线的实现，请参见此示例：[希尔伯特曲线](http://mrdoob.github.com/three.js/examples/webgl_lines_colors.html)和[形状生成](http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html)

希望有帮助！

# symfony - 从应用目录安装资产

> ID：13785121
> 
> 赞同：11
> 
> 时间：2012-12-09T06:04:51.537
> 
> 标签：symfony, assets

这是我的目录结构

```
/app/Resources/public
/app/Resources/public/css
/app/Resources/public/iamges
/app/Resources/public/js 
```

我需要将这些资产安装到*/web*目录。正确的方法是什么？我已经尝试过`app/console install:assets`，但它仅从捆绑包中安装资产。是否可以将全局资产存储在 app 目录中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T09:14:53.827

您的全局资产应直接进入 web 文件夹。无需将它们放在应用程序文件夹中然后复制它们！

`install:assets`or命令用于仅属于一个捆绑包的`assetic:dump`资产，这些资源保留在该捆绑包中以使其可重用。

您可以做的是将属于您的应用程序的资产保留在“应用程序包”中。大多数时候，您至少有一个不可重用的捆绑包，代表您的应用程序核心。我保留了我的基本模板 ( `base.html.twig`) 和主要资产，以便我可以使用`assetic:dump`它们！

# c++ - 如何检查另一个源字符串中的特定字符串

> ID：13785122
> 
> 赞同：0
> 
> 时间：2012-12-09T06:04:53.060
> 
> 标签：c++, visual-c++

任何人都可以让我知道如何使用 VC++ 2003 检查另一个字符串中的特定字符串吗？

例如：

Soruce string - “我说这里引用的站点不在配置数据库中，需要检查”；要查找的字符串 - “此处引用的站点不在配置数据库中”

有人可以帮我吗？让我知道是否需要更多清晰度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:12:42.890

`std::string::find`可能会满足你想要的，看看[这个](http://en.cppreference.com/w/cpp/string/basic_string/find)

```
string s1 = "I say that the site referenced here is not in configuration database. need to check"; 
string s2 = "the site referenced here is not in configuration database";

if (s1.find(s2) != std::string::npos){
    std::cout << " found " << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:12:25.653

string sourceString = "我说这里引用的站点不在配置数据库中，需要检查";

string stringToFind = "此处引用的站点不在配置数据库中";

**sourceString.find(stringToFind);** 此方法调用将返回**size_t类型的位置**

希望这可以帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T06:13:19.677

对于 C/C++，您可以使用`strstr()`：

> const char * strstr ( const char * str1, const char * str2 );
> 
> 定位子串
> 
> 返回指向 str1 中第一次出现 str2 的指针，如果 str2 不是 str1 的一部分，则返回空指针。

如果您坚持使用纯 C++，请使用`std::string::find`：

> size_t find (const std::string& str, size_t pos);
> 
> 在字符串中查找内容
> 
> 在字符串中搜索 str、s 或 c 中指定的内容，并返回字符串中第一次出现的位置。

# c++ - Xcode 4.5.2 中的 boost::regex 链接问题

> ID：13785126
> 
> 赞同：3
> 
> 时间：2012-12-09T06:05:12.130
> 
> 标签：c++, regex, boost, xcode4.5

我确信这个问题已经以许多不同的形式被问过（提前道歉）-我使用的是 Xcode 4.5.2

非常简单的无操作终端应用程序如下...

```
#include <boost/regex.hpp>
int main(int argc, const char * argv[])
{
    boost::regex regday_pattern("\\");
    return 0;
} 
```

欣赏 boost 中的正则表达式需要一个库，而不仅仅是一个 boost 标头。对于 xcode 和下面的 unix 环境相对较新，我对如何需要我的设置有点困惑，这样我就不会收到以下链接错误...

架构 x86_64 的未定义符号：“boost::basic_regex

对此问题的任何帮助将不胜感激 - 我已经阅读了几个对类似问题的回复，并且无法将这些回复与我的情况联系起来。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T09:00:10.667

您可能会遇到链接器错误，因为您实际上并未构建 Boost.Regex 库。

请遵循 Boost 文档中的[**构建说明**](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#prepare-to-use-a-boost-library-binary)：

> 在 shell 中发出以下命令（不要键入 $；它代表 shell 的提示符）：

```
$ cd path/to/boost_1_53_0 
$ ./bootstrap.sh --help 
```

> 选择您的配置选项并再次调用 ./bootstrap.sh 而不使用 --help 选项。除非您在系统的 /usr/local/ 目录中具有写入权限，否则您可能至少希望使用

```
$ ./bootstrap.sh --prefix=path/to/installation/prefix 
```

> 安装在其他地方。此外，考虑使用`--show-libraries`和 `--with-libraries=library-name-list`选项来限制构建所有内容时将经历的长时间等待。最后，

```
$ ./b2 install 
```

> 会将 Boost 二进制文件保留在`lib/`安装前缀的子目录中。您还将`include/ subdirectory`在安装前缀中找到 Boost 标头的副本，因此您以后可以使用该目录作为`#include`路径来代替 Boost 根目录。

最后，确保您可以构建和运行 Boost 文档中的[**Regex 示例**](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#link-your-program-to-a-boost-library)。

# android - android 位图的 2 个问题

> ID：13785130
> 
> 赞同：0
> 
> 时间：2012-12-09T06:06:07.770
> 
> 标签：android, bitmap

我有一个 ListView，大约有 50 行。每个项目都有一个图像。有时，图像会被下载，但有时，我只是显示来自应用程序资源的特定图像。

问题：

1.  有时我只为我的项目显示大约 20 张来自资源的图像，所有这些都是相同的图像。这意味着我只显示 20 行相同的图像。它是否加载位图并为每个项目获取内存量？或者它只是加载图像并将其显示给其他项目？

2.  每个项目的图像视图大小为 100*70 dp 。所以我想做一些事情，比如在我将它们位图并在我的应用程序中显示它们之前调整大小或减小图像 dp，这样我就可以减少它们占用的内存量。可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:16:52.163

> 多次显示同一张图片

如果将所有图像设置为相同的 Drawable（变量），则从资源中获得，只有 1 个位图 Drawable 驻留在 RAM 中。此外，ListView 回收它的行，它并没有真正创建 20 行，所有 20 个位图都加载到 RAM 中。

> 设置图像的 DPI

BitmapDrawable 类可以自动决定渲染的 DPI，这就是它在其[构造函数](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#BitmapDrawable%28android.content.res.Resources%29)中要求 Resources 的原因。或者你可以[`setTargetDensity(int)`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#setTargetDensity%28int%29)稍后再打电话。*注意：更改 DPI 与缩放图像并不完全相同。*

> 加载按比例缩小的图像

这肯定会节省 RAM，阅读有关如何加载按比例缩小的图像的[答案。](https://stackoverflow.com/q/2577221/1531054)

# sql - 有很多连接的慢查询

> ID：13785133
> 
> 赞同：0
> 
> 时间：2012-12-09T06:06:19.850
> 
> 标签：sql, postgresql, join

提前为混合格式道歉，我把它拆了一点，这样看起来会更好。

我通常能够使用成本来确定查询的缓慢部分，但在这一次中，它似乎真的分散了，没有什么太明显的。由于某种原因，当我通过 random() 对其进行排序时，它会从几毫秒减慢到 8 秒：

```
EXPLAIN for:
  SELECT songs.*
  FROM "songs"
    INNER JOIN "posts" ON "posts"."id" = "songs"."post_id"
    INNER JOIN broadcasts on broadcasts.song_id = songs.id
    inner join stations as ss on ss.id = broadcasts.station_id
    inner join artists on artists.station_slug = ss.slug
    inner join artists_genres on artists_genres.artist_id = artists.id
    inner join genres on genres.id = artists_genres.genre_id
    inner join broadcasts bb on bb.song_id = songs.id
    inner join stations sss on sss.id = bb.station_id
    inner join blogs b on b.station_slug = sss.slug
    inner join blogs_genres on blogs_genres.blog_id = b.id
    inner join genres gg on gg.id = blogs_genres.genre_id
    INNER JOIN "stations" on "stations"."blog_id" = "songs"."blog_id"
    INNER JOIN blogs on blogs.id = posts.blog_id
  WHERE "songs"."working" = 't'
    AND "songs"."processed" = 't'
    AND (genres.id = 20 and gg.id = 20)
    AND (NOT EXISTS(
      SELECT NULL
      FROM authors
      WHERE authors.song_id = songs.id
      AND authors.role IN ('remixer', 'mashup')
    ))
    AND (songs.source != 'youtube')
    AND (songs.seconds < 600)
    AND (songs.matching_id = songs.id)
    ORDER BY random() desc
                                                                                                             QUERY PLAN
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Sort  (cost=3770.97..3770.98 rows=1 width=2132)
    Sort Key: (random())
    ->  Nested Loop  (cost=3142.28..3770.96 rows=1 width=2132)
          Join Filter: ((b.station_slug)::text = (sss.slug)::text)
          ->  Nested Loop Anti Join  (cost=3142.28..3762.68 rows=1 width=2150)
                ->  Nested Loop  (cost=2526.24..3135.35 rows=1 width=2150)
                      Join Filter: (posts.blog_id = blogs.id)
                      ->  Nested Loop  (cost=2526.24..3128.65 rows=1 width=2127)
                            ->  Nested Loop  (cost=2526.24..3127.39 rows=1 width=2131)
                                  ->  Hash Join  (cost=2515.19..3112.87 rows=1 width=2113)
                                        Hash Cond: (stations.blog_id = songs.blog_id)
                                        ->  Seq Scan on stations  (cost=0.00..475.49 rows=19549 width=40)
                                        ->  Hash  (cost=2515.15..2515.15 rows=3 width=2077)
                                              ->  Nested Loop  (cost=1265.66..2515.15 rows=3 width=2077)
                                                    ->  Nested Loop  (cost=1265.66..2506.44 rows=1 width=2077)
                                                          ->  Nested Loop  (cost=1265.66..2499.97 rows=1 width=1809)
                                                                ->  Nested Loop  (cost=1265.66..2498.71 rows=1 width=1813)
                                                                      ->  Hash Join  (cost=1265.66..2357.90 rows=277 width=8)
                                                                            Hash Cond: (broadcasts.station_id = ss.id)
                                                                            ->  Seq Scan on broadcasts  (cost=0.00..895.98 rows=51598 width=8)
                                                                            ->  Hash  (cost=1264.35..1264.35 rows=105 width=8)
                                                                                  ->  Hash Join  (cost=714.50..1264.35 rows=105 width=8)
                                                                                        Hash Cond: ((ss.slug)::text = (artists.station_slug)::text)
                                                                                        ->  Seq Scan on stations ss  (cost=0.00..475.49 rows=19549 width=18)
                                                                                        ->  Hash  (cost=713.20..713.20 rows=104 width=18)
                                                                                              ->  Nested Loop  (cost=5.06..713.20 rows=104 width=18)
                                                                                                    ->  Bitmap Heap Scan on artists_genres  (cost=5.06..99.85 rows=104 width=8)
                                                                                                          Recheck Cond: (genre_id = 20)
                                                                                                          ->  Bitmap Index Scan on index_artists_genres_on_genre_id_and_artist_id  (cost=0.00..5.03 rows=104 width=0)
                                                                                                                Index Cond: (genre_id = 20)
                                                                                                    ->  Index Scan using artists_pkey on artists  (cost=0.00..5.89 rows=1 width=18)
                                                                                                          Index Cond: (artists.id = artists_genres.artist_id)
                                                                      ->  Index Scan using index_songs_on_shared_id on songs  (cost=0.00..0.50 rows=1 width=1805)
                                                                            Index Cond: (songs.matching_id = broadcasts.song_id)
                                                                            Filter: (songs.working AND songs.processed AND ((songs.source)::text <> 'youtube'::text) AND (songs.seconds < 600) AND (songs.id = songs.matching_id))
                                                                ->  Seq Scan on genres  (cost=0.00..1.25 rows=1 width=4)
                                                                      Filter: (genres.id = 20)
                                                          ->  Index Scan using posts_pkey on posts  (cost=0.00..6.46 rows=1 width=268)
                                                                Index Cond: (posts.id = songs.post_id)
                                                    ->  Index Scan using index_songs_stations_on_song_id_and_station_id on broadcasts bb  (cost=0.00..8.67 rows=3 width=8)
                                                          Index Cond: (bb.song_id = broadcasts.song_id)
                                  ->  Hash Join  (cost=11.05..14.39 rows=13 width=18)
                                        Hash Cond: (blogs_genres.blog_id = b.id)
                                        ->  Bitmap Heap Scan on blogs_genres  (cost=4.35..7.51 rows=13 width=8)
                                              Recheck Cond: (genre_id = 20)
                                              ->  Bitmap Index Scan on index_blogs_genres_on_genre_id_and_blog_id  (cost=0.00..4.35 rows=13 width=0)
                                                    Index Cond: (genre_id = 20)
                                        ->  Hash  (cost=5.20..5.20 rows=120 width=18)
                                              ->  Seq Scan on blogs b  (cost=0.00..5.20 rows=120 width=18)
                            ->  Seq Scan on genres gg  (cost=0.00..1.25 rows=1 width=4)
                                  Filter: (gg.id = 20)
                      ->  Seq Scan on blogs  (cost=0.00..5.20 rows=120 width=31)
                ->  Bitmap Heap Scan on authors  (cost=616.04..623.56 rows=2 width=4)
                      Recheck Cond: (authors.song_id = songs.id)
                      Filter: ((authors.role)::text = ANY ('{remixer,mashup}'::text[]))
                      ->  Bitmap Index Scan on index_authors_on_artist_id_and_song_id_and_role  (cost=0.00..616.04 rows=2 width=0)
                            Index Cond: (authors.song_id = songs.id)
          ->  Index Scan using stations_pkey on stations sss  (cost=0.00..8.27 rows=1 width=18)
                Index Cond: (sss.id = bb.station_id) 
```

知道是什么导致了减速吗？在 Mac 上使用 Postgres 9.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:11:48.110

您要确保已为要加入的所有列建立索引。您还应该尽量避免嵌套查询（根据我的经验），因此您可能需要重新编写 NOT EXISTS() 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:49:51.740

据我了解，问题是为什么`order by random()`会对查询速度产生巨大影响。我不确定，也不能没有`EXPLAIN ANALYSE`两个版本的查询，但我怀疑这个问题与处理易失性函数有关。可变函数不能被内联，在这种情况下，PostgreSQL 很可能会返回并`random()`为每一行添加一个值，然后在已经扫描表等之后进行排序。这可能是你的问题。

更好的方法可能是将 random() 添加到列列表中，然后按别名或列号排序。这将允许在过程中更早地计算 random() ，因为它可以更有效地完成。

# c# - 选择gridview行/单元格错误“输入字符串格式不正确”

> ID：13785143
> 
> 赞同：2
> 
> 时间：2012-12-09T06:07:46.220
> 
> 标签：c#, asp.net, gridview

我设置了gridview，用户可以在其中“选择”他们想要的行，而这些行又应该通过数据库并重定向它们。但是，当我为任何给定的结果行单击“选择”时，我在此行收到错误“输入字符串格式不正确”： myEvent.EventID = Convert.ToInt32(row.Cells[0].Text); 我把这件作品拿出来，我得到了永远与 Convert 一致的错误。所以我知道它写得不正确，但我不确定如何写。任何帮助都会很棒！

抱歉，我是新手！

我的 girdview 代码：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Event myEvent = new Event();
        GridViewRow row = GridView1.SelectedRow;
        myEvent.EventID = Convert.ToInt32(row.Cells[0].Text);
        myEvent.Sport = row.Cells[1].Text;
        myEvent.EventName = row.Cells[2].Text;
        myEvent.Section = Convert.ToInt32(row.Cells[3].Text);
        myEvent.TicketsAvailable = Convert.ToInt32(row.Cells[4].Text);
        myEvent.EventDate = Convert.ToDateTime(row.Cells[5].Text);
        Session["myEvent"] = myEvent;

        Response.Redirect("Complete.aspx");
    } 
```

如果您还需要它，我的事件代码：

```
public class Event
{
    public int EventID { get; set; }
    public string EventName { get; set; }
    public string Sport { get; set; }
    public int Section { get; set; }
    public int TicketsAvailable { get; set; }
    public DateTime EventDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:11:10.407

只需检查天气，您要转换的值不为空。尝试调试代码并检查您从该特定行获得的值是什么。

另一件事是，如果您在 gridview 中创建了生成的 Select Button，则该选择按钮的位置位于 gridview 的 0 单元格。所以你可以像这样尝试你的代码。

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Event myEvent = new Event();
        GridViewRow row = GridView1.SelectedRow;
        myEvent.EventID = Convert.ToInt32(row.Cells[1].Text);
        myEvent.Sport = row.Cells[2].Text;
        myEvent.EventName = row.Cells[3].Text;
        myEvent.Section = Convert.ToInt32(row.Cells[4].Text);
        myEvent.TicketsAvailable = Convert.ToInt32(row.Cells[5].Text);
        myEvent.EventDate = Convert.ToDateTime(row.Cells[6].Text);
        Session["myEvent"] = myEvent;

        Response.Redirect("Complete.aspx");
    } 
```

# html - CSS边框图像不起作用

> ID：13785144
> 
> 赞同：0
> 
> 时间：2012-12-09T06:07:52.343
> 
> 标签：html, css

我目前正在尝试使用 CSS 的边框图像将自定义边框应用于 div。我觉得我有所有正确的代码，但我的图像没有显示为边框。有人可以看看这个 html/css 代码并告诉我我做错了什么吗？

**HTML：**

```
<div id="box">
&nbsp;
</div> 
```

**CSS：**

```
 body { text-Align: center; } /* CENTER ALIGN FOR IE */

#PC_Attack_Lightbox {

  /*** CENTER ALIGN BOX ***/
  text-Align: left;
  margin: 0 auto;

  /*** SET WIDTH & HEIGHT ***/
  width: 500px;
  height: 500px;

  background: #EBF5FF; /* SET BG */

  /*** APPLY BORDER-IMAGE ***/
    border:35px outset brown;
    -moz-border-image:url(img/wood2.jpg) 25 30 10 20 repeat;
    -webkit-border-image:url(img/wood2.jpg) 25 30 10 20 repeat;
    border-image:url(img/wood2.jpg) 25 30 10 20 repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:13:28.787

因为你在#PC_Attack_Lightbox上使用box div和你写的css所以使用PC_Attack_Lightbox

```
<div id="PC_Attack_Lightbox">
&nbsp;
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:13:34.497

```
<div id="PC_Attack_Lightbox">

// your code here

</div>

body { text-Align: center; } /* CENTER ALIGN FOR IE */

#PC_Attack_Lightbox {

  /*** CENTER ALIGN BOX ***/
  text-Align: left;
  margin: 0 auto;

  /*** SET WIDTH & HEIGHT ***/
  width: 500px;
  height: 500px;

  background: #EBF5FF; /* SET BG */

  /*** APPLY BORDER-IMAGE ***/
    border:35px outset brown;
    -moz-border-image:url(img/wood2.jpg) 25 30 10 20 repeat;
    -webkit-border-image:url(img/wood2.jpg) 25 30 10 20 repeat;
    border-image:url(img/wood2.jpg) 25 30 10 20 repeat;
} 
```

# javascript - 尝试在 javascript 中运行几个 for 循环来填写图表信息但出现错误

> ID：13785147
> 
> 赞同：-1
> 
> 时间：2012-12-09T06:08:21.630
> 
> 标签：javascript, json, highcharts

尝试在 javascript 中运行几个 for 循环来填充图表的信息，但出现错误用户选择一定数量的食物，然后填充具有食物名称的食物数组，然后是对应的蛋白质卡路里和脂肪数组对每一种食物。

这是我现在拥有的代码。目前我收到一个错误，上面写着 Uncaught `SyntaxError`: Unexpected token `var`:

```
var fat = $.parseJSON('<?php print(json_encode($fat, true)); ?>');
var calorie = $.parseJSON('<?php print(json_encode($calorie, true)); ?>');
var protein = $.parseJSON('<?php print(json_encode($protein, true)); ?>');
var food = $.parseJSON('<?php print(json_encode($food, true)); ?>');

series: [{
    for (var i=0;i<food.length;i++){
        name: food[i],
        data: for (var j=0;j<fat.length;j++){
                    calorie[j], protein[j], fat[j]
                }
        }
    }] 
```

我从一个网站上复制了图表，他们有这样的系列

```
series: [{
                name: 'London',
                data: [48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]

            }, {
                name: 'Berlin',
                data: [42.4, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]   
            }] 
```

我将如何修复我的 for 循环以使其工作。

```
script type="text/javascript">
$(function () {
    var chart;
    var fat = $.parseJSON('<?php print(json_encode($fat, true)); ?>');

    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'MComparing foods is Awesome'
            },

            tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +' mm';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
            series : []
    for (var i=0; i<food.length; i++) 
{
        series.push({
        name: food[i],
        data: [calorie[i], protein[i], fat[i]]});
}
        });
    }); 
});
</script> 
```

和之前

```
series:  [{
                name: 'Tokyo',
                data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
            }, {
                name: 'New York',
                data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
            }, {
                name: 'London',
                data: [48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]

            }, {
                name: 'Berlin',
                data: [42.4, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]   
            }],
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T06:12:22.917

一个对象的属性不能是一个`for`循环，就像你试图做的那样。它根本不是有效的 JavaScript 语法。（当然，在 Python 中，列表推导会起作用——但这不是 Python。）

您需要创建一个数组，*然后*将其分配为属性的值：

```
var series = [];

for (var i=0; i<food.length; i++) {

    series.push({
        name: food[i],
        data: [calorie[i], protein[i], fat[i]]
    });
} 
```

您问题中的代码表明对 JavaScript 语法缺乏基本的理解；我建议[阅读有关对象文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T06:23:36.613

嗨，我实际上还没有尝试过，但我在想类似的事情：

```
series = new Array();
for (i=0;i<food.length;i++) {
    item = new Object();
    item.name = food[i];
    item.data = new Array();
    item.data = item.data.concat(calorie,protein,fat);
    series.concat(item);
} 
```

好的，感谢马特的建议：

```
series = [];
for (i=0;i<food.length;i++) {
    item = {name: food[i], data: Array.concat(calorie,protein,fat)};
    series.push(item);
} 
```

# python - 如何为命名元组（使用 autodoc）提供 Sphinx 文档？

> ID：13785150
> 
> 赞同：12
> 
> 时间：2012-12-09T06:08:53.147
> 
> 标签：python, python-sphinx, autodoc

我正在尝试用 Sphinx 记录一个 Python 项目，但是我在将`autodoc`扩展名与`namedtuple`生成的类结合起来时遇到了麻烦。

在一份文件中`gammatone.rst`，我有：

```
:mod:`gammatone` -- gammatone filterbank toolkit
================================================

.. automodule:: gammatone
   :members:
.. automodule:: gammatone.coeffs
   :members: 
```

在我的`gammatone/coeffs.py`，我有：

```
from collections import namedtuple

ERBFilterCoeffs = namedtuple(
    'ERBFilterCoeffs', # Most parameters omitted
    [
        'A0',
        'gain',
    ]) 
```

生成的代码`namedtuple`包含 Sphinx`autodoc`模块提取并包含的非常通用的文档字符串。我宁愿自己正确地记录课程，而不放弃`autodoc`模块的其余部分。

我试过在上课前放这样的东西：

```
"""
.. class:: ERBFilterCoeffs(A0, gain)
:param A0: A0 coefficient
:param gain: Gain coefficient

Magic coefficients.
""" 
```

...但它没有出现在生成的文档中。将它放在类之后会导致它嵌套在通用类文档下面，而不是替换它。

我如何简单地告诉 Sphinx（和`autodoc`扩展）使用我的`ERBFilterCoeffs`类文档而不是生成的类`namedtuple`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-13T18:23:17.460

您实际上根本不需要扩展 namedtuple。您可以将文档字符串放在命名元组之后。这实际上也适用于常量和属性。

```
ERBFilterCoeffs = namedtuple('ERBFilterCoeffs', ['A0', 'gain', ])
""" Magic coefficients.

.. py:attribute:: A0

    The A0 attribute is something

.. py:attribute:: gain

    The gain attribute is blah blah

""" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T06:14:45.710

在使用 namedtuple定义之后`ERBFilterCoeffs`，尝试将该文档字符串分配给`ERBFilterCoeffs.__doc__`?

编辑：好的，那么这个怎么样：

```
class ERBFilterCoeffs(namedtuple('ERBFilterCoeffs','a b c')):
    """
    this is the doc string for ERBFilterCoeffs
    """ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-22T21:31:44.640

一般来说，我更喜欢对生成的内容进行更好的控制，而不是在给定中添加`:members:`指令`automodule`。因此，我建议`ERBFilterCoeffs`使用`.. autoclass:: ERBFilterCoeffs`. 我不会在这里添加指令，因为这将包括为每个字段创建`:members:`的非常通用的默认文档。`namedtuple`相反，我会在您的文档字符串中使用`.. py:attribute:: ...` 元素，您可以使用特殊`#:`注释将其放在类定义之前：

```
#: Magic coefficients.
#:
#: .. py:attirbute:: A0
#:
#:    A0 coefficient
#:
#: .. py:attribute:: gain
#:
#:    Gain coefficient
ERBFilterCoeffs = namedtuple(
    'ERBFilterCoeffs', [# Most parameters omitted
        'A0',
        'gain',
    ]
) 
```

# android - 在 Android 中使用 JSON 时出错

> ID：13785162
> 
> 赞同：0
> 
> 时间：2012-12-09T06:11:00.840
> 
> 标签：android, json, registration

我在我的 Android 应用程序中使用 JSON 进行帐户注册时遇到问题。这是我在调试后发现的有问题的部分：

```
// check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        registerErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS); 
                        if(Integer.parseInt(res) == 1){
                            // user successfully registered
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        
                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);
                            // Close Registration Screen
                            finish();
                        }else{
                            // Error in registration
                            registerErrorMsg.setText("Error occured in registration");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                } 
```

完整的 LogCat：

12-09 14:31:02.360: D/dalvikvm(5339): GC_EXTERNAL_ALLOC 释放 118K, 52% 空闲 2666K/5447K, 外部 943K/1034K, 暂停 30ms 12-09 14:31:08.735: W/System.err(5339 ): java.net.SocketException: Permission denied 12-09 14:31:08.735: W/System.err(5339): at org.apache.harmony.luni.platform.OSNetworkSystem.socket(Native Method) 12-09 14 :31:08.735: W/System.err(5339): 在 dalvik.system.BlockGuard$WrappedNetworkSystem.socket(BlockGuard.java:335) 12-09 14:31:08.740: W/System.err(5339): 在org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:216) 12-09 14:31:08.740: W/System.err(5339): at java.net.Socket.checkOpenAndCreate(Socket.java :821) 12-09 14:31:08.740: W/System.err(5339): 在 java.net.Socket.connect(Socket.java:967) 12-09 14:31:08.740: W/System.err (5339)：在 org.apache.http.conn.scheme.PlainSocketFactory。connectSocket(PlainSocketFactory.java:119) 12-09 14:31:08.740: W/System.err(5339): 在 org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:156) 12-09 14:31:08.740: W/System.err(5339): 在 org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164) 12-09 14:31:08.740: W/System.err (5339): 在 org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119) 12-09 14:31:08.740: W/System.err(5339): 在 org.apache.http。 impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359) 12-09 14:31:08.740: W/System.err(5339): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java :555) 12-09 14:31:08.740: W/System.err(5339): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 12-09 14:31:08.740: W/System.err(5339): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 12-09 14:31: 08.740: W/System.err(5339): 在 com.example.musicshare.library.JSONParser.getJSONFromUrl(JSONParser.java:42) 12-09 14:31:08.740: W/System.err(5339): 在 com .example.musicshare.library.UserFunctions.registerUser(UserFunctions.java:59) 12-09 14:31:08.740: W/System.err(5339): at com.example.musicshare.RegisterActivity$1.onClick(RegisterActivity.java :55) 12-09 14:31:08.740: W/System.err(5339): 在 android.view.View.performClick(View.java:2538) 12-09 14:31:08.740: W/System.err (5339): 在 android.view.View$PerformClick.run(View.java:9152) 12-09 14:31:08.740: W/System.err(5339): 在 android.os.Handler.handleCallback(Handler. java:587) 12-09 14:31:08.740: W/System.err(5339):在 android.os.Handler.dispatchMessage(Handler.java:92) 12-09 14:31:08.740: W/System.err(5339): 在 android.os.Looper.loop(Looper.java:123) 12- 09 14:31:08.760: W/System.err(5339): 在 android.app.ActivityThread.main(ActivityThread.java:3691) 12-09 14:31:08.760: W/System.err(5339): 在java.lang.reflect.Method.invokeNative(Native Method) 12-09 14:31:08.760: W/System.err(5339): 在 java.lang.reflect.Method.invoke(Method.java:507) 12- 09 14:31:08.760: W/System.err(5339): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847) 12-09 14:31:08.760: W/System。错误（5339）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:605）12-09 14:31:08.760：W/System.err（5339）：在 dalvik.system.NativeStart.main （本机方法）12-09 14:31:08.760：E/Buffer 错误（5339）：转换结果 java.lang 时出错。NullPointerException 12-09 14:31:08.760：E/JSON Parser(5339)：解析数据 org.json.JSONException 时出错：12-09 14:31:08.760 字符 0 处的输入结束：D/AndroidRuntime(5339)：关闭 VM 12-09 14:31:08.760: W/dalvikvm(5339): threadid=1: 线程退出未捕获异常 (group=0x4001e578) 12-09 14:31:08.765: E/AndroidRuntime(5339): FATAL例外：主要 12-09 14:31:08.765：E/AndroidRuntime(5339)：java.lang.NullPointerException 12-09 14:31:08.765：E/AndroidRuntime(5339)：在 com.example.musicshare.RegisterActivity$1。 onClick(RegisterActivity.java:59) 12-09 14:31:08.765: E/AndroidRuntime(5339): 在 android.view.View.performClick(View.java:2538) 12-09 14:31:08.765: E/ AndroidRuntime(5339)：在 android.view.View$PerformClick.run(View.java:9152) 12-09 14:31:08.765：E/AndroidRuntime(5339)：在 android.os.Handler。handleCallback(Handler.java:587) 12-09 14:31:08.765: E/AndroidRuntime(5339): 在 android.os.Handler.dispatchMessage(Handler.java:92) 12-09 14:31:08.765: E/ AndroidRuntime(5339): 在 android.os.Looper.loop(Looper.java:123) 12-09 14:31:08.765: E/AndroidRuntime(5339): 在 android.app.ActivityThread.main(ActivityThread.java:3691 ) 12-09 14:31:08.765: E/AndroidRuntime(5339): at java.lang.reflect.Method.invokeNative(Native Method) 12-09 14:31:08.765: E/AndroidRuntime(5339): at java. lang.reflect.Method.invoke(Method.java:507) 12-09 14:31:08.765: E/AndroidRuntime(5339): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847 ) 12-09 14:31:08.765: E/AndroidRuntime(5339): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605) 12-09 14:31:08.765: E/AndroidRuntime(5339 ): 在 dalvik.system.NativeStart。main(Native Method) 12-09 14:31:08.800: D/dalvikvm(5339): GC_CONCURRENT freed 208K, 51% free 2789K/5639K, external 1350K/1690K, paused 3ms+4ms

所以这是我的 JSON 解析代码：

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);            
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:34:25.113

正如日志所说：

```
java.net.SocketException: Permission denied 
```

确保您已添加所有必需的权限，包括 Internet 访问权限`AndroidMainfest.xml`：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

# javascript - JS：需要一个基于字符串的css颜色代码

> ID：13785164
> 
> 赞同：2
> 
> 时间：2012-12-09T06:11:21.987
> 
> 标签：javascript, css, string, random, colors

我需要一个函数来根据范围为`min: #000000`and的字符串生成 CSS 颜色`max: #FFFFFF`。如果输入字符串中的长度或任何字符发生变化，该函数应返回不同的颜色（但它必须始终在相同的字符串输入上返回相同的颜色）。

例如：

```
f("Reddit") ==>#FF0000

f("Smith") ==>#FFC0CB   

f("Smixh")==>#F008FF

f("Smith") ==>#FFC0CB

f("foo")==>#FF00FF

f("Reddit") ==>#FF0000 
```

等等。知道怎么做吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-09T06:18:22.727

我会[散列字符串](https://github.com/blueimp/JavaScript-MD5)并使用十六进制校验和的前六个字符作为您的十六进制颜色代码：

```
function color(string) {
    return '#' + md5(string).slice(0, 6);
} 
```

**演示：http: [//jsfiddle.net/4PMnA/48/](http://jsfiddle.net/4PMnA/48/)**

# parameters - Paypal IPN 和付款人电子邮件

> ID：13785165
> 
> 赞同：2
> 
> 时间：2012-12-09T06:11:28.410
> 
> 标签：parameters, paypal, paypal-ipn

我正在使用 Paypal 接收捐款，并使用 IPN 来跟踪通过的信息。我是新手。什么情况下payer_email不会从IPN传输？在频谱的一端，参数是否*总是*包含 payer_email 因为它需要它？另一方面，payer_email 通常会因为付款人选择保密而无法使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:16:13.563

在大多数情况下，您都会收到一个 payer_email。唯一可能没有的情况是当您因争议而获得 IPN 时，但我认为即使这样也会包括在内。

您可以参考[PayPal 的 IPN 变量列表](https://developer.paypal.com/docs/ipn/integration-guide/IPNandPDTVariables/)，了解有关您对每种 IPN 类型的期望的更多详细信息。

# dynamics-crm-2011 - 是否可以控制查找对话框的大小？- CRM 2011 在线

> ID：13785166
> 
> 赞同：2
> 
> 时间：2012-12-09T06:11:34.120
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

有没有办法改变查找对话框的默认显示大小？用户经常不得不重新调整大小。可能无法实现不受支持的方法，但想知道两者之一。我环顾四周，但没有发现任何可用于在线场景的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:06:35.793

像这样的东西怎么样：

[http://lakshmanindian.wordpress.com/2012/10/02/open-crm-2011-lookup-window-in-a-custom-html-page/](http://lakshmanindian.wordpress.com/2012/10/02/open-crm-2011-lookup-window-in-a-custom-html-page/)

# mysql - MySQL 到 XML 文件

> ID：13785172
> 
> 赞同：0
> 
> 时间：2012-12-09T06:12:36.160
> 
> 标签：mysql, xml

我正在尝试将 MySQL 数据库转换为 xml 文件；这是我的代码：

```
 <?php

  header("Content-type: text/xml");

    include 'dbc.php';

      $query = "SELECT * FROM airports LIMIT 50";
      $result = mysql_query($query, $link)
      or die('Error querying database.');

  $xml = new SimpleXMLElement('<xml/>');

  while($row = mysql_fetch_assoc($result)) {
   $draw = $xml->addChild('draw');
   $draw->addChild('ident',htmlentities(iconv("UTF-8", "ISO-8859-1//IGNORE",$row['ident'])));
   $draw->addChild('name',htmlentities(iconv("UTF-8", "ISO-8859-1//IGNORE",$row['name'])));
  }

  mysql_close($link);
  $fp = fopen("links2.xml","wb");
  fwrite($fp,$xml->asXML());
  fclose($fp); 
```

这是我得到的错误：

```
 XML Parsing Error: no element found
  Location: /sql2xml2.php
  Line Number 1, Column 2: 
  -^ 
```

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:26:24.663

由于抛出的警告，您的 XML 在您的 XML 阅读器中被视为无效，因此存在`XML Parsing Error: junk after document element`问题。

至于警告本身，您需要转义特殊实体（即`&`，在您`<`的`>`内容中添加它时（使用[`str_replace`](http://php.net/manual/en/function.str-replace.php)通常仅适用于 XML 的那些 3，[`htmlentities`](http://php.net/manual/en/function.htmlentities.php)可能会产生不希望的效果，除非您提供 PHP 5.4' s`ENT_XML1`模式）。

有关发生这种情况的更多信息，请参阅[相关答案](https://stackoverflow.com/questions/552957/rationale-behind-simplexmlelements-handling-of-text-values-in-addchild-and-adda)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-25T20:17:31.820

如果您只想将 MySQL 数据库导出到本地 XML 文件，您可以使用 mysqldump 工具：

```
mysqldump --xml -u username -p databasename [tablename] > filename.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T09:38:45.627

让它与这段代码一起工作：

```
 <?
 header("content-type:text/xml");
 function getXML($query="SELECT * FROM airports limit 50")
 {
    include 'dbc.php';

     $result = mysql_query($query, $link)
     or die('Error querying database.');

 $columns="";
 echo "<xml>\n";
 while($row=mysql_fetch_assoc($result))
 {
    $columns.="\t<airport>\n";
    foreach($row as $key => $value)
        {
        $value = htmlentities(iconv("UTF-8", "ISO-8859-1//TRANSLIT",$value));
        $value = htmlentities(iconv("UTF-8", "ISO-8859-1//IGNORE",$value));
        $columns.="\t\t<$key>$value</$key>\n";
    }
$columns.="\t</airport>\n";
 }
 echo $columns;
 echo "</xml>\n";
 }

 getXML();

 ?> 
```

# solr - 基于 Solr 自动完成关键字和地理位置

> ID：13785178
> 
> 赞同：0
> 
> 时间：2012-12-09T06:13:29.473
> 
> 标签：solr, autocomplete, geolocation

我正在寻找使用基于关键字和地理位置的 Solr 获得自动完成建议。有没有办法让“Suggester”组件或任何其他方式，Solr 可以在多个字段中自动完成？

例如，如果我有一个餐馆数据库，并且我想使用关键字“Piz”获得建议，那么结果应该基于关键字“Piz”以及接近某个纬度、经度的位置。

有没有办法在 Solr 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:27:12.407

您创建一个处理程序：

*   在索引分析器 chaing 中，使用 EdgeNGram 计算用户到目前为止输入的内容
*   使用 geodist() 提升结果：玩弄 recip() 等，直到你在位置提升上获得所需的权重

调用该处理程序并传递当前位置和用户输入的字符，你就完成了

# php - 未显示所有错误以进行表单验证

> ID：13785181
> 
> 赞同：0
> 
> 时间：2012-12-09T06:13:45.197
> 
> 标签：php

我想显示下面所有错误的列表，但它一次只显示一个错误，有谁知道为什么我的代码没有显示错误列表？下面是显示存储错误的数组的代码，说明没有错误时会发生什么的代码，以及说明有错误时会发生什么的代码。

```
 <?php 

  $getcourseid = (isset($_POST['courseid'])) ? $_POST['courseid'] : '';
  $getcoursename = (isset($_POST['coursename'])) ? $_POST['coursename'] : '';
  $getduration = (isset($_POST['duration'])) ? $_POST['duration'] : '';

        $errors = array();

                  if (!$getcourseid){
                      $errors[] = "You must enter in Course's ID";
              }else if (!$getcoursename){
                  $errors[] = "You must enter in Course's Name";
              }else if (!$getduration){
                      $errors[] = "You must select Course's Duration";
                  }   

          if(!$errors) {

         $insertsql = "
        INSERT INTO Course
            (CourseNo, CourseName, Duration)
          VALUES
            (?, ?, ?)
        ";
        if (!$insert = $mysqli->prepare($insertsql)) {
          // Handle errors with prepare operation here
        }                                           

        $insert->bind_param("sss", $getcourseid, $getcoursename, $getduration);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();

         // don't use $mysqli->prepare here
    $query = "SELECT CourseNo FROM Course WHERE CourseNo = ?";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("s",$getcourseid);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbCourseId);
    //get number of rows
    $stmt->store_result();
    $numrows = $stmt->num_rows();  

              }  

            if(empty($errors)) {
                if ($numrows == 1){
               $errormsg = "<span style='color: green'>Course " . $getcourseid .  " - "  . $getcoursename . " has been Created</span>";
               $getcourseid = "";
               $getcoursename = "";
               $getduration = "";
            }else{
                $errormsg = "An error has occured, Course has not been Created";
            }
            } else {
                if (count($errors) > 0)
                {
                    foreach ($errors AS $Errors)
                    {
                        $errormsg = "{$Errors} <br>"; 
                    }
                }
            }     
        ?>

**ADDITIONAL QUESTION:**

    $form = "
    <form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
      <table>
      <tr>
      <td></td>
      <td id='errormsg'>$errormsg</td>
      </tr>
      <tr>
      <td>Course ID:</td>
      <td><input type='text' name='courseid' value='$getcourseid' /></td>
      </tr>
      <tr>
      <td>Course Name:</td>
      <td><input type='text' id='nameofcourse' name='coursename' value='$getcoursename' /></td>
      </tr>
      <tr>
      <td>Duration (Years):</td>
      <td>{$durationHTML}</td>
      </tr>
      <tr>
      <td></td>
      <td><input type='submit' value='Create Course' name='createbtn' /></td>
      </tr>
      </table>
      </form>";

      echo $form; 
```

上面的表格位于此问题顶部的 php 代码下方。现在发生的事情是验证错误列表都显示在表单的顶部。但我真正想要的是每个验证错误都低于它所指的表单功能。

例如，如果我没有填写课程 ID 文本输入，那么我希望验证错误`"You must enter in Course's ID"`显示在课程 ID 文本输入下方。

如果我没有填写课程名称文本输入，那么我希望验证错误`"You must enter in Course's Name"`显示在课程名称文本输入下方。

等等。为了做到这一点，需要对代码进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:16:20.793

尝试

```
 if (!$getcourseid){
          $errors[] = "You must enter in Course's ID";
       } 
     if (!$getcoursename){
         $errors[] = "You must enter in Course's Name";
      }
      if (!$getduration){
          $errors[] = "You must select Course's Duration";
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:17:41.667

```
if (!$getcourseid)
{
   $errors[] = "You must enter in Course's ID";
} 
if (!$getcoursename)
{
   $errors[] = "You must enter in Course's Name";
} 
if (!$getduration)
{
   $errors[] = "You must select Course's Duration";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T07:11:18.950

我还没有完成与持续时间相关的代码，您需要弄清楚我在这里为您提供了输入 courseid 和 coursename 的逻辑。

```
 <?php 

    $errors = array();
    $getcourseid    = "";
    $getcoursename  = "";
    $errormsg = "";
        if($_POST)
        {
            $getcourseid    = $_POST['courseid'];
            $getcoursename  = $_POST['coursename'];
            if (!$getcourseid){
                  $errors['course_id'] = "You must enter in Course's ID";
            }if (!$getcoursename){
              $errors['course_name'] = "You must enter in Course's Name";
            }
        }

      if(!$errors && $_POST) {

     $insertsql = "
    INSERT INTO Course
        (CourseNo, CourseName, Duration)
      VALUES
        (?, ?, ?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
      // Handle errors with prepare operation here
    }                                           

    $insert->bind_param("sss", $getcourseid, $getcoursename, $getduration);

    $insert->execute();

    if ($insert->errno) {
      // Handle query error here
    }

    $insert->close();

     // don't use $mysqli->prepare here
$query = "SELECT CourseNo FROM Course WHERE CourseNo = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s",$getcourseid);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbCourseId);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows();  

          }  

$getcourseid = (!empty($getcourseid))?$getcourseid:"";
$getcoursename = (!empty($getcoursename))?$getcoursename:"";
$durationHTML  = (!empty($durationHTML))?$durationHTML:"";

$error_c_id = (!empty($errors['course_id']))?$errors['course_id']:"";
$error_c_name = (!empty($errors['course_name']))?$errors['course_name']:"";

$form = "
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
  <table>
  <tr>
  <td>Course ID:</td>
  <td><input type='text' name='courseid' value='".$getcourseid."' />".$error_c_id."</td>
  </tr>
  <tr>
  <td>Course Name:</td>
  <td><input type='text' id='nameofcourse' name='coursename' value='".$getcoursename."' />".$error_c_name."</td>
  </tr>
  <tr>
  <td>Duration (Years):</td>
  <td>{$durationHTML}</td>
  </tr>
  <tr>
  <td></td>
  <td><input type='submit' value='Create Course' name='createbtn' /></td>
  </tr>
  </table>
  </form>";

  echo $form;
?> 
```

# php - UTF-8 字符无法从 PHP 中的 JPEG IPTC 数据正确显示

> ID：13785186
> 
> 赞同：2
> 
> 时间：2012-12-09T06:14:40.660
> 
> 标签：php, exif, iptc

从图像中读取 IPTC 数据时，通过 PHP 读取时，UTF-8 重音字符无法正确显示。

例如：é、ø 和 ü

将标题内容类型设置为 UTF8，而不是字符，我得到一个黑色菱形的问号。� 如果没有设置内容类型，那么我会得到一个破折号：—</p>

以下是用于读取 IPTC 块的代码：

```
$file = '/path/to/image.jpg';
getimagesize($file, $info);
$iptc = iptcparse($info['APP13']); 
```

我还尝试将完全相同的图像上传到同一服务器上的 WordPress 安装，它会正确去除重音字符并将其替换为基本的拉丁语等价物。我不介意这是否是最终结果，我只想正确阅读字符。

关于如何从图像中获取完整和正确数据的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:56:16.263

回答有点晚，但由于我在显示特殊字符时遇到了同样的问题`č š ž`（出现在斯洛文尼亚字母表中），我也可以回答以供将来参考。

这个问题的解决方法其实和php无关，而是和IPTC数据编码有关。默认情况下，大多数可以写入 IPTC 数据的软件都会以纯 ASCII 格式存储它。起初我使用了 Adob​​e Bridge——当你开始标记图像时它实际上会显示所有特殊字符——但是一旦你想在 PHP 中解析这些数据，你实际上不会看到特殊字符。（我必须再次检查这部分，但主要的问题是发生了两种不同的编码——一种在图像上编码 IPTC 数据，另一种在可以处理 IPTC 数据的程序中显示该数据——或类似的东西） .

为了解决这个问题，我使用了一个名为[ExifTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)的程序，这是一款了不起的软件，可以让您管理图像上的几乎所有数据。

比我用它来将所有 IPTC 编码转换为 UTF-8 - 从那时起我只需要重新标记具有损坏字符的图像（Adobe Bridge 正确显示但显然没有以正确的编码保存）。

在文件夹中的所有图像上完成此操作的命令是：

```
exiftool -tagsfromfile @ -iptc:all -codedcharacterset=utf8 
```

如果您不熟悉使用 cmd 工作，您可能还想下载[ExifTool GUI 。](http://u88.n24.queensu.ca/~bogdan/)

我还没有找到任何更好的程序可以更快地完成同样的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-13T10:06:28.087

要将字符集设置为 utf8，请使用以下代码：

```
$iptc = array(
  '1#090' => "\x1B%G" //utf8
); 
```

像这样更改那部分代码：

```
// Convert the IPTC tags into binary code
$data = '';

foreach($iptc as $tag => $string) 
{
  $rec = substr($tag, 0,1);
  $tag = substr($tag, 2);
  $data .= iptc_make_tag($rec, $tag, $string);
}

// Embed the IPTC data
$content = iptcembed($data, $path); 
```

# ruby-on-rails - 如何跟踪 ActiveRecord 中的连续行？

> ID：13785193
> 
> 赞同：-1
> 
> 时间：2012-12-09T06:15:51.893
> 
> 标签：ruby-on-rails, ruby, activerecord

我需要规范化一些数据，而且我是后端/数据库编程的新手，所以这可能很明显，但我已经搜索过并且找不到任何东西。

我有一张`'empires'`桌子。每个帝国可以是`'civilization'`以下之一：

```
- British
- French
- Dutch
- Ottoman
- Spanish 
```

现在，该`empires`表包含一个类型为 VARCHAR(255) 的列，`civilization`其中存储了上述字符串之一。

现在，当然，后来我意识到它的可扩展性不是很好，也不是一个好主意，所以我决定创建另一个名为的表`civilization`，其中包含 2 列，id 和包含它的名称的字符串。

我现在的问题是，例如，我如何确保所有帝国都指向table`'British'`中完全相同的行？`civilization`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:32:55.517

**更新 2**：1 到多关联

```
class Empire < ActiveRecord::Base
  attr_accessible :name
  belongs_to :civilization
end

class Civilization < ActiveRecord::Base
  attr_accessible :name
  has_many :empires
end

british = Civilization.new(:name => 'British')
british.empires.build(:name => 'Britian')
british.empires.build(:name => 'India')
british.save

india = Empire.where(:name => 'India')
britain = Empire.where(:name => 'Britain')

puts india.civilization == britain.civilization # => true
puts india.civilization.inspect                 # => <Civilization:0x04121231 @name="British">
puts india.civilization.empires.inspect         # => [ <Empire:0x0123443 @name="Britain">, <Empire:0x0124543 @name="India"> ] 
```

你需要`civilization_id`在你的桌子上存储你的记录`empires`中的 id 。`civilizations`

# c++ - glActiveTexture 不起作用

> ID：13785200
> 
> 赞同：0
> 
> 时间：2012-12-09T06:16:49.793
> 
> 标签：c++, opengl, glsl

以下：

```
glActiveTexture(GL_TEXTURE0 + 0);

unsigned i, w;
unsigned tex_test = Memento::_LoadImageIntoTexture("ground.png", i, w);

glBindTexture(GL_TEXTURE_2D, tex_test);
glUniform1ui(program.GetUniformLocation("tex"), 0); 
```

将运行良好，并且我期望的图像正确显示。然而...

```
glActiveTexture(GL_TEXTURE0 + 1);

unsigned i, w;
unsigned tex_test = Memento::_LoadImageIntoTexture("ground.png", i, w);

glBindTexture(GL_TEXTURE_2D, tex_test);
glUniform1ui(program.GetUniformLocation("tex"), 1); 
```

当我尝试将活动纹理更改为 0 以外的任何值时，什么都不会显示。这让我发疯，因为我找不到任何解决方案，而且没有任何意义。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:20:55.723

我的猜测是纹理加载功能与活动纹理单元混淆。我个人认为应该引入一个新的“代理”纹理单元，它不能用作采样源，但可以用于加载图像数据。这将允许执行纹理加载而不会弄乱纹理单元的状态。

无论如何，如果您将代码更改为此会发生什么：

```
unsigned i, w;
unsigned tex_test = Memento::_LoadImageIntoTexture("ground.png", i, w);

unsigned int texture_unit = 1;
glActiveTexture(GL_TEXTURE0 + texture_unit);
glBindTexture(GL_TEXTURE_2D, tex_test);
glUniform1ui(program.GetUniformLocation("tex"), texture_unit); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:36:50.803

来自 OpenGL 规范`glActiveTexture`：

> 一个纹理单元由纹理启用状态、纹理矩阵堆栈、纹理环境和当前绑定的纹理组成。修改任何这些状态仅对活动纹理单元有影响。

您可能忘记调用`glEnable(GL_TEXTURE_2D)`，和/或`glTexEnv(...)`如果您使用非默认值。

# java - 在 Java 中附加字符串并添加“...”

> ID：13785205
> 
> 赞同：0
> 
> 时间：2012-12-09T06:18:02.643
> 
> 标签：java, android, string

我找到了一个可以做到这一点的课程，这似乎正是我所需要的。

```
public static class StringUtil
{
  public static String limit(String value, int length)
  {
    StringBuilder buf = new StringBuilder(value);
    if (buf.length() > length)
    {
      buf.setLength(length);
      buf.append("…");
    }

    return buf.toString();
  }
} 
```

我有一个名为 的字符串`review`，我以这种方式使用该类：

```
StringUtil.limit(review, 50); 
```

它似乎没有附加。

对于它的价值，它适用于 Android 应用程序。这是在内部的`PostExectute`方法中完成的。`AsyncTask``ListFragement`

我这样做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:21:18.057

您发送（审阅）的字符串是否超过 50 个字符？请注意，该函数仅在结果长于限制时才修改结果。

您似乎也不接受该方法的返回值。此方法不会修改参数值（因为它不能），它返回一个带有新值的新字符串。

尝试

```
String newreview = StringUtil.limit( review, 50 );
System.out.println( newreview ); 
```

好的，您要求进行修改以先转到下一个空间。我没有编译这个，但它应该很接近。

```
public static String limit(String value, int length)
  {
    // note to Test this first, so you don't create a Buffer unnecessarily.
    String ret = value;
    if ( value.length() > length ) {
       StringBuilder buf = new StringBuilder(value);
       buf.setLength( length );
       int cur = length;
       while( cur < value.length() && value.charAt(cur) != ' ' ) {
           buf.append( value.charAt(cur) );
       }
       if ( cur == value.length() ) {
          ret = value;  // we copied the whole string, as it turns out.
       } else {
          buf.append( "..." );
          ret = buf.toString();
       }
    }
    return value;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:20:52.163

```
public static String limit(String value, int length)
  {
    return value+"...";
  } 
```

# java - 为什么在 Java 中 (high + low) / 2 是错误的，但 (high + low) >>> 1 不是？

> ID：13785210
> 
> 赞同：30
> 
> 时间：2012-12-09T06:19:12.100
> 
> 标签：java, bit-manipulation, bitwise-operators, binary-search

我理解`>>>`溢出的修复：当添加两个大的正多头时，你最终可能会得到一个负数。有人能解释一下这种按位移位如何神奇地解决溢出问题吗？和它有什么不同`>>`？

* * *

我的怀疑：我认为这与 Java 使用二进制补码这一事实有关，因此如果我们有额外的空间，溢出是正确的数字，但因为我们没有，所以它变成了负数。因此，当您移位并用零填充时，由于二进制补码，它会神奇地固定。但我可能是错的，有位头脑的人必须确认。:)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-09T06:37:42.513

简而言之，`(high + low) >>> 1`这是一种使用未使用的符号位对非负数进行正确平均的技巧。

* * *

`high`在和都是非负的假设下`low`，我们肯定知道最高位（符号位）为零。

所以两者`high`实际上`low`都是 31 位整数。

```
high = 0100 0000 0000 0000 0000 0000 0000 0000 = 1073741824
low  = 0100 0000 0000 0000 0000 0000 0000 0000 = 1073741824 
```

当您将它们加在一起时，它们可能会“溢出”到顶部。

```
high + low =       1000 0000 0000 0000 0000 0000 0000 0000
           =  2147483648 as unsigned 32-bit integer
           = -2147483648 as signed   32-bit integer

(high + low) / 2   = 1100 0000 0000 0000 0000 0000 0000 0000 = -1073741824
(high + low) >>> 1 = 0100 0000 0000 0000 0000 0000 0000 0000 = 1073741824 
```

*   作为带符号的 32 位整数，它溢出并翻转为负数。因此`(high + low) / 2`是错误的，因为`high + low`可能是负面的。

*   作为无符号 32 位整数，总和是正确的。所需要的只是将它除以 2。

当然 Java 不支持无符号整数，所以我们最好除以 2（作为无符号整数）是逻辑右移`>>>`。

在具有无符号整数的语言（例如 C 和 C++）中，它变得更加棘手，因为您的输入可以是完整的 32 位整数。一种解决方案是：`low + ((high - low) / 2)`

* * *

`>>>`最后列举、`>>`和之间的区别`/`：

*   `>>>`是逻辑右移。它用零填充高位。
*   `>>`是算术右移。它用原始最高位的副本填充其上部。
*   `/`是除法。

数学上：

*   `x >>> 1`将`x`其视为无符号整数并将其除以 2。它四舍五入。
*   `x >> 1`将`x`其视为有符号整数并将其除以 2。它向负无穷大舍入。
*   `x / 2`将`x`其视为有符号整数并将其除以 2。它向零舍入。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-09T06:25:21.860

它对最高位进行零填充，而不是对它们进行符号填充。

```
int a = 0x40000000;
(a + a)  /  2 == 0xC0000000;
(a + a) >>> 1 == 0x40000000; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-09T07:08:53.473

我建议阅读 Joch Bloch 的[http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html#!/2006/06/extra-extra-read- all-about-it-nearly.html](http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html#!/2006/06/extra-extra-read-all-about-it-nearly.html)关于高低

> “我为 JDK 编写的二进制搜索版本包含相同的错误。在等待了 9 年左右之后，它最近破坏了某人的程序，因此向 Sun 报告了该错误。”

# ios - iOS Novocaine 在扬声器上播放

> ID：13785215
> 
> 赞同：2
> 
> 时间：2012-12-09T06:19:47.030
> 
> 标签：ios, audio, core-audio, playback, speaker

我正在尝试使用 Novocaine 播放一些高性能的音频，但我找到的示例代码仅在耳机中播放音频，但我希望它在扬声器上播放......这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T01:32:43.457

我已经实现了这样的路线更改，它似乎有效。只需用`sessionPropertyListener`下面的代码替换并添加`updateAudioRoute`.

```
void sessionPropertyListener(void *                  inClientData,
                             AudioSessionPropertyID  inID,
                             UInt32                  inDataSize,
                             const void *            inData){

    if (inID == kAudioSessionProperty_AudioRouteChange)
    {
        Novocaine *sm = (Novocaine *)inClientData;
        [sm checkSessionProperties];
        [sm updateAudioRoute];
    }
}

//Quick and dirty way to override the audioRoute whenever the audioRoute is changed.
- (void)updateAudioRoute {
  CFStringRef newRoute;
  UInt32 size = sizeof(CFStringRef);
  CheckError(AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &size, &newRoute), 
             "couldn't get new audio route");
  if (newRoute)
  {
    CFShow(newRoute);
    if (CFStringCompare(newRoute, CFSTR("ReceiverAndMicrophone"), (UInt32)NULL)== kCFCompareEqualTo)
    {
      UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
      AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);
    }
    else if (CFStringCompare(newRoute, CFSTR("HeadsetInOut"), (UInt32)NULL) == kCFCompareEqualTo)
    {
      UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_None;
      AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T05:07:38.080

有几乎同样的问题。快速而肮脏的修复，添加：

```
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride); 
```

到 iOS 部分的末尾 - (void)setupAudio in your Novocaine.m
请注意，即使插入了耳机，这也会通过扬声器播放音频！

在我看来，路由更改尚未实现，因为 -(void)selectAudioDevice 为空。

# android - , 标签不被视为 Android 浏览器中的块元素

> ID：13785218
> 
> 赞同：0
> 
> 时间：2012-12-09T06:20:01.950
> 
> 标签：android, html

我对 Android 浏览器有一个奇怪的问题。div、p 标签在我手机的 Android 浏览器中不被视为块。我在样式表的开头使用了 Eric Myer 的重置。这是我的 HTML 代码 -

```
<body>
<div id="mainwrap">
     <p>Some paragraph</p>
</div>  
</body> 
```

在那个 Android 浏览器中，p 标签只是 mainwrap 的 50%。我尝试将 p 宽度 = 100%，但没有奏效。我尝试用 div 替换 p，但它仍然只显示 50%。知道有什么问题吗？谢谢。

# machine-learning - 与 svm 相 关的困惑

> ID：13785220
> 
> 赞同：2
> 
> 时间：2012-12-09T06:20:35.843
> 
> 标签：machine-learning, artificial-intelligence, svm

我试图理解这个与 svm 有关的例子[http://www.mathworks.com/help/bioinfo/ref/svmclassify.html](http://www.mathworks.com/help/bioinfo/ref/svmclassify.html)

我运行了获取虹膜数据的示例，并按照示例中给出的方式绘制了 svm。然而，当我查看 svmstruct 中的支持向量时，我得到了很多新值。AFAIK，支持向量应该是样本本身，位于边缘的那些。但是，当我打印 svmStruct.SupportVectors 时，我会得到不同的值，例如

```
-0.0073   -0.4143
   -0.3706   -0.4143
   -0.2495   -0.1789
   -0.1284    0.2919
   -0.0073   -0.4143
   -0.1284   -0.6498
    0.1139    0.0565
    0.2350   -0.1789
   -0.4918   -0.1789
   -0.2495   -0.4143
   -0.4918    0.0565
    0.1139   -0.4143
   -0.0073    0.2919
   -0.1284    0.2919
   -0.0073    0.2919
    0.2350   -0.4143
    0.8406   -0.6498
   -0.1284    0.2919
    0.2350    0.2919 
```

这些不在样本点中。任何澄清

我也尝试运行我自己的示例，这就是我得到的。

我不明白分离边界恰好位于样本点之一上。我不认为这是最好的超平面。我猜它应该定义了一些稍微低一些的决策边界。它也圈出了支持向量，我不确定那些应该是支持向量。最奇怪的是超平面到点的margin并不大。为什么会这样？

![在此处输入图像描述](../Images/b398277c2a29fd54953d27f53710eac0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:44:46.330

我根本不知道mathworks，但是根据您的链接，您使用了该`svmtrain()`函数（[在此处](http://www.mathworks.de/de/help/bioinfo/ref/svmtrain.html)描述）：

> `SupportVectors`— 数据点矩阵，每行对应于标准化数据空间中的支持向量。该矩阵是训练输入数据矩阵的子集，在根据“AutoScale”参数应用归一化之后。

所以你的数据点只是被标准化。尝试设置`autoscale=false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:24:02.960

是的，snøreven 是对的。我只是让它更笼统：

每个 ML 问题都有两个阶段：

1.  训练模型
2.  测试/使用训练好的模型

更好的是，如果你有三个阶段：

1.  训练模型
2.  评估模型（它是否足以满足我的目的？）
3.  测试/使用训练好的模型

[非常简短和基本的机器学习介绍](http://www.cs.nyu.edu/~mohri/mlu/mlu_lecture_1.pdf)

[机器学习课程](https://www.coursera.org/course/ml)

在您的特定情况下，您需要在 Matlab 中训练一个用于 SVM 分类的模型，然后您可以通过该`svmclassify`函数使用它。

# javascript - 使用 jquery/javascript 触发选择标签

> ID：13785222
> 
> 赞同：-1
> 
> 时间：2012-12-09T06:20:45.680
> 
> 标签：javascript, jquery, html

我有一个问题，当我想触发我的标签和我的选择标签时，结构如下：

```
<label class="label"></label>
<select class="select">
</select> 
```

和我的jQuery代码：

```
$(".label").click(function(){
   $(".select").click();
}); 
```

我`mousedown`也在尝试使用，但它仍然无法打开选择标签......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:23:08.663

尝试

```
<label class="label" for='blabla'>my select</label>
<select class="select" id='blabla'>
</select> 
```

这是[文档和示例](http://www.w3schools.com/tags/tag_label.asp)

编辑：解决方案2

```
<label class="label"></label>
<select class="select">
</select>
<script>
$('.label').click(function(){
   $('.select').attr('size', 3);
});
</script> 
```

[例子](http://jsfiddle.net/roine/eZMKd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:23:36.043

`<label for="the_select">whatever</label><select id="the_select"></select>`

注意标签上的“for”，它与选择的 id 匹配。如果您正确使用标签，则不需要 javascript

# javascript - 谷歌地图标记精灵图像位置

> ID：13785226
> 
> 赞同：9
> 
> 时间：2012-12-09T06:21:30.167
> 
> 标签：javascript, image, google-maps-api-3, sprite

我们如何将精灵图像定位为谷歌地图标记。例如：在 css 中，我们将图像定位为

```
background: url('../images/bodycss/pointer.png') 28px -32px; 
```

现在如何将上面的代码包含到下面的 google api-v3 函数中？

```
function setMarkers(map, markers) {

    var google_image = new google.maps.MarkerImage("http://example.com/images/bodycss/pointer.png");

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            zIndex: sites[3],
            html: sites[4],
            icon: google_image
        });

        google.maps.event.addListener(marker, "mouseover", function () {
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T04:51:33.897

要从 sprite 图像创建 MarkerImage，您需要指定要用于创建图标的图像部分的原点和大小。

```
var icon = new google.maps.MarkerImage("http://domain/path/sprite.png", new google.maps.Size(12, 20), new google.maps.Point(100, 34)); 
```

你可以看看这篇描述得很好的[博客文章](http://blog.mridey.com/2010/03/using-markerimage-in-maps-javascript.html)

**更新**- 看到这个工作小提琴 -[~~**演示**~~](http://jsfiddle.net/FChNK/1/.)（精灵网址已死）

我使用了这张图片-http://www.ipreferjim.com/site/wp-content/uploads/2012/10/markers.png?9d7bd4 ~~（~~精灵网址已失效）并调整了图标的大小和点值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-30T10:18:50.810

在 MarkerImage 类被弃用（这意味着它仍然受支持，但应该被替换）以支持 Icon 对象之前，您可能已经为一个简单的图像编写了类似的内容：

```
var qthIconHouse20 = new google.maps.MarkerImage( 'grafx/house_icon_20.png',
                                    new google.maps.Size(20, 20),
                                    new google.maps.Point(0, 0),
                                    new google.maps.Point(10, 10) ); 
```

现在，使用 Icon 对象，你可以这样写：

```
var qthIconHouse20 = {  
  url:        'grafx/house_icon_20.png',
  size:       new google.maps.Size(20, 20),
  origin:     new google.maps.Point(0, 0),
  anchor:     new google.maps.Point(10, 10),
  scaledSize: new google.maps.Size(20, 20)
}; 
```

注意额外的 scaledSize 参数：对于简单图像，这是原始图像的大小 - 在这种特殊情况下，它与 size 参数相同。

对于 sprite，在单个图像文件中包含多个图像，您可以使用如下内容：

```
var qthIconBlueSpot16 = {
  url:        'grafx/qth_icon_spots_16.png',
  size:       new google.maps.Size(16, 16),
  origin:     new google.maps.Point(0, 32),
  anchor:     new google.maps.Point(8, 8),
  scaledSize: new google.maps.Size(16, 48)
}; 
```

请注意，在此示例中，原点已在包含多个 16*16 像素图像的精灵中指定为 (0, 32)：因此，在这里，我们选择精灵中的**第三张**图像。在图像的那个部分中，我们将锚点设置为 (8, 8) - 即在要显示的图像的选定部分的中间。最后，这里的scaledSize指的是***整个***精灵图的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T06:26:12.327

您可以使用a which的`anchor`属性，如此[处](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)所述，将覆盖默认位置：`MarkerImage`

> 与地图上标记的位置相对应的锚定图像的位置。默认情况下，锚点位于图像底部的中心点。

ps MarkerImage 已弃用，您应该考虑改用[icon](https://developers.google.com/maps/documentation/javascript/reference#Icon)。

# javascript - 断开连接后访问套接字对象

> ID：13785227
> 
> 赞同：1
> 
> 时间：2012-12-09T06:21:30.733
> 
> 标签：javascript, node.js, tcp

下面是一个简单的 Node.js tcp 服务器。

```
var net = require('net');

var conn = [];

var server = net.createServer(function(client) {//'connection' listener
    var i = conn.push(client) - 1;
    //console.log('[conn',i,']', client.remoteAddress, ':', client.remotePort);
    console.log('[disc]', conn[i].remoteAddress, ':', conn[i].remotePort);

    client.on('end', function() {
        console.log('[disc]', conn[i].remoteAddress, ':', conn[i].remotePort);
    });

    client.on('data', function(msg) {
        console.log('[data]', msg.toString());
    })

    client.write('hello\r\n');
    //client.pipe(client);
});

server.listen(8080); 
```

当客户端连接、发送或断开连接时，它将打印有关客户端的信息。但是，只有当客户端断开连接时，它才会打印`undefined`而不是套接字信息。例子：

```
[conn] 127.0.0.1 : 52711
[data] 127.0.0.1 : 52711 world!
[disc] undefined : undefined 
```

为什么会这样？这是因为当它关闭时，套接字被破坏了吗？我需要知道有关关闭套接字的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:25:23.550

断开连接的套接字没有远程端点，因此没有远程地址或远程端口。套接字没有被破坏，只是不再连接。如果您需要在套接字断开连接后知道远程地址和端口，您需要自己跟踪它。

# asp.net - ASP.Net CrystalReportViewer 只渲染垂直线

> ID：13785228
> 
> 赞同：2
> 
> 时间：2012-12-09T06:21:32.630
> 
> 标签：asp.net, crystal-reports

我有一个包含 CrystalReportViewer 的普通 asp.Net 页面。我在 Page_Load 方法中使用以下代码来显示报告：

```
ReportDocument report = new ReportDocument();
                    TableLogOnInfos crtableLogoninfos = new TableLogOnInfos();
                    TableLogOnInfo crtableLogoninfo = new TableLogOnInfo();
                    ConnectionInfo crConnectionInfo = new ConnectionInfo();
                    Tables CrTables;

                    report.Load(Server.MapPath("Reports\\" + Request.Params[0]));

                    crConnectionInfo.ServerName = ConfigurationManager.AppSettings["ReportSQLServer"];
                    crConnectionInfo.DatabaseName = ConfigurationManager.AppSettings["ReportSQLDatabase"];
                    crConnectionInfo.UserID = ConfigurationManager.AppSettings["ReportSQLUsername"];
                    crConnectionInfo.Password = ConfigurationManager.AppSettings["ReportSQLPassword"];

                    CrTables = report.Database.Tables;
                    foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
                    {
                        crtableLogoninfo = CrTable.LogOnInfo;
                        crtableLogoninfo.ConnectionInfo = crConnectionInfo;
                        CrTable.ApplyLogOnInfo(crtableLogoninfo);
                    }

                    Session["Report"] = report;
                    rptViewer.ReportSource = report;
                    rptViewer.RefreshReport(); 
```

但是，无论我加载什么报告，它都会显示如下：

![这是它的显示方式](../Images/91c83fe4a8ee215698c0bbc6000f1617.png)

当我在 WinForms 应用程序中使用完全相同的逻辑在其中填充 CrystalReportsViewer 时，报表会按预期显示。

请告知我在 asp.net 网络表单中缺少什么以使报告正确显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:43:25.760

我在 IE10 中遇到了同样的问题，在 IE10 浏览器模式下，reportviewer 中显示的是垂直条纹而不是数据。

解决方法是切换**“IE10兼容模式”，**一切正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T17:23:07.013

尝试设置 HasDrilldownTabs="False" 示例

```
<CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" AutoDataBind="true" ReportSourceID="CrystalReportSource1"
                        HasDrilldownTabs="False"/> 
```

同样适用于我的情况谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T13:04:50.593

或者，附加`<meta http-equiv="x-ua-compatible" content="IE=9">`在页面的头部。

# php - 动态创建数学表达式

> ID：13785231
> 
> 赞同：1
> 
> 时间：2012-12-09T06:22:07.143
> 
> 标签：php, math, dynamic

我有一个网站需要根据 3 个参数生成随机数学问题：运算符（加法、减法、乘法、除法）、重组（进位或不进位）和列（一或二）。我一直在努力思考如何去做这件事，但我想出的每件事都在某种程度上存在缺陷。

这是我目前正在使用的内容：

```
function create_problem($operator, $regrouping, $columns){
    $top = rand(1,9);
    $bottom = rand(1,9);

    if($operator == "+"){
        if($columns == 1 && $regrouping === false){
            $result = array(
                'top' => $top,
                'bottom' => $bottom,
                'formula' => "$top.$operator.$bottom"
            );
        }
        if($columns == 2){
            if($regrouping === false){
                if($top+$bottom > 9){
                    $diff = ($top+$bottom)-10;
                    $top = $diff+rand(1, 3);    
                }
                $result = array(
                    'top' => $top,
                    'bottom' => $bottom,
                    'formula' => "$top.$operator.$bottom"
                );
            }else{
                if($top+$bottom < 10){
                    $top = rand(1, $bottom+1);
                }
            }
        }
    }
    return $result;
} 
```

如果有人处理过这个问题，或者如果有人有任何指示，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:37:23.510

此函数首先检查重组，并生成随机数，使公共列数的总和小于 10（对于无进位）或大于或等于 10（对于进位）。

```
function create_problem($operator, $regrouping, $columns){
$x1 = '';
$x2 = '';
$y1 = '';
$y2 = '';
if ($regrouping){
    if ($columns == 2){
    $x1 = rand(1,9);
    $x2 = rand(0,9);
    $y1 = rand(9-$x1,9);
    $y2 = rand(10-$x2,9);
    } else {
    $x1 = rand(1,9);
    $y1 = rand(9-$x1,9);
    }
} else {
    if ($columns == 2){
    $x1 = rand(1,8);
    $x2 = rand(0,8);
    $y1 = rand(1,9-$x1);
    $y2 = rand(0,9-$x2);
    } else {
    $x1 = rand(1,8);
    $y1 = rand(1,9-$x1);
    }
}

return $x1.$x2.$operator.$y1.$y2;
} 
```

前任..

31 +54

..其中 3=$x1 1=$x2 5=$y1 4=$y2

# jquery - JQuery Colorbox：是否可以通过单独的关闭按钮并排显示两个或多个颜色框？

> ID：13785233
> 
> 赞同：0
> 
> 时间：2012-12-09T06:22:18.977
> 
> 标签：jquery, jquery-ui, jquery-plugins, colorbox

我需要在 onClick 事件上并排显示两到四个颜色框。我是 JQuery 的新手。是否已经内置了某些东西，或者是否有任何现有的网站正在使用它？我不确定是否有可能。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:47:48.377

Not with colorbox. You might want to try the jQuery UI modal dialog.

# jquery - 带参数的 Jquery Mobile 更改页面

> ID：13785237
> 
> 赞同：0
> 
> 时间：2012-12-09T06:23:06.940
> 
> 标签：jquery, jquery-mobile, mobile

我有两个页面：SRDashboard.html 和 SREventInfo.html

仪表板包含一个事件列表，另一个页面用于查看其中一个事件。我进行了设置，以便在单击列表中的一个事件后，调用 loadEvent 方法，并执行以下代码：

```
$.mobile.changePage(Config.PageNames.EventInfo, { dataUrl : Config.PageNames.EventInfo + "?eventId=" + eventId, data : { eventId: eventId }, reloadPage : true, changeHash : true }); 
```

如您所见，它正在传递 eventId。我可以看到它是通过 firebug 执行此操作的，并且参数就在那里，就像我需要它一样。

在 SREventInfo.html 我有以下块：

```
<div data-role="page" id="EventInfoPage">
            <script type="text/javascript">
                $("#EventInfoPage").live('pageinit', function () {
                        var url = $.url(document.location);
                        alert(document.location);
                        var eventId = url.param("eventId");
                        alert(eventId);
                });
    </script>
</div> 
```

这里发生的情况是，我的第一个警报出现的 url 是 SRDashboard.html，而 eventId 是未定义的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:58:43.750

我正在使用这种方法，这是一种 jQM 方式，至少适用于 1.0 和 1.1 版本：

```
$("#EventInfoPage").live('pagebeforeshow', function () {
    var eventId = $(this).data("url").split("?")[1];;
    eventId = eventId.replace("eventId=","");   
    alert(eventId);
}); 
```

# git - 如何为 TortoiseGit 设置默认忽略选项？

> ID：13785239
> 
> 赞同：0
> 
> 时间：2012-12-09T06:23:17.697
> 
> 标签：git, tortoisegit

每次我在 TortoiseGit 资源管理器上下文菜单中单击“添加到忽略列表”命令时，都会弹出一个询问 .gitIgnore 文件必须位于何处的弹出窗口，以及我是否只想忽略顶级项目，还是递归地忽略。

我在 TortoiseGit 中找不到任何设置，但我可能错过了一些东西。如何为此设置默认值并避免一直存在且烦人的对话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:57:21.320

直到 TortoiseGit 1.7.15，忽略文件没有可配置的默认选项，忽略对话框也不会记住最后选择的选项。

# c++ - 为什么 Double 数据类型在这里有效

> ID：13785240
> 
> 赞同：2
> 
> 时间：2012-12-09T06:23:27.323
> 
> 标签：c++, c, algorithm

我在 UVa 上做一个[问题。](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=99&page=show_problem&problem=49)问题陈述如下：

我们必须找到一个数 p 的 n 次根，并且存在一个整数 k，使得 k^n=p。所以基本上我们必须找到整数k。

约束：

**p<10^101**，n<200，k<10^9。所有变量都是整数和正数。

c中问题的AC解决方案简单地计算，

```
pow(p,1/n); 
```

我知道 double 可以保存高达 e308 的数据，但据我所知，精度可达小数点后 15 位。

所以我的问题是为什么上面的解决方案有效，不会有任何精度错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:44:25.530

数字 10^101 看起来很大。如果 n 为 2，则您无法将 k 存储在任何地方。

但是如果您查看其他约束 - k 限制为 10 ^ 9。这需要 30 位的无符号类型。double 的尾数可以很容易地保持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:30:43.923

提示：问题陈述需要多少个小数位？

# linux - 从 shell 脚本启动 GDB

> ID：13785244
> 
> 赞同：2
> 
> 时间：2012-12-09T06:23:55.833
> 
> 标签：linux, shell, terminal, gdb

要开始调试，我需要执行以下步骤：

`screen -S gdb_program gdb /path/to/program`

`handle SIGPIPE nostop noprint pass`- 是 gdb 命令

`c`- 是 gdb 命令

如何编写一个我可以运行的单个 shell 脚本：

> ./gdb.sh

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T06:39:30.563

使用[此处文档](http://tldp.org/LDP/abs/html/here-docs.html)：

```
#!/bin/bash
screen -S gdb_program gdb /path/to/program <<EOF
handle SIGPIPE nostop noprint pass
EOF 
```

# sql - SQL Server 中的 MS Project 数据

> ID：13785245
> 
> 赞同：4
> 
> 时间：2012-12-09T06:24:08.837
> 
> 标签：sql, sql-server, sharepoint, business-objects, ms-project

我的任务是将我们公司的所有项目数据从 MS Project 加载到 SQL Server 中，以便能够从项目数据创建报告和仪表板。

我知道您可以将特定项目的数据导出到 access 数据库中，但每个项目都必须有自己的 access 数据库。所以我的第一个想法是创建某种动态访问 SSIS 连接器和 ETL。这样项目经理就可以导出他们的项目以供访问，而 SSIS 包会负责其余的工作。

有没有更简单的方法来做到这一点？

我的公司还有一个 SharePoint 基础架构和 SAP BusinessObjects 基础架构。有没有一种方法可以通过使用 SharePoint 或 bobj 来完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:27:47.467

最简单但成本高昂的方式称为 MS Project Server - 它已经将所有数据存储在 MS SQL 数据库中，具有预先计算的报告数据库等。这是一个链接[http://technet.microsoft.com/en-us/evalcenter/hh973404.aspx](http://technet.microsoft.com/en-us/evalcenter/hh973404.aspx)。最后一个版本可以在本地安装或由 Microsoft 托管。

我看到的另一个选择是在 MS Project 周围使用某种自动化，它将加载项目计划，提取所有感兴趣的信息并上传到您的数据库。这个解决方案没有什么大魔法。

第三种选择是将项目导出为 XML，然后使用 XML 将数据上传到 SQL Server 数据库。该解决方案也可通过项目自动化实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:55:38.987

在 SQL Server 中定义数据库和列结构后，只需使用 Project VBA 来 A）将项目和任务数据收集到一个数组中，B）设置一个连接字符串到您的数据库，然后 C）发送它。我围绕这个过程创建了几个应用程序，并且效果很好。

# php - 如果 XLS 文件包含大量数据，则保存到 CSV 会失败

> ID：13785246
> 
> 赞同：0
> 
> 时间：2012-12-09T06:24:20.100
> 
> 标签：php, csv, type-conversion, xls

我编写了一个脚本，将 .xls 文件转换为 PHP 中的 .csv 文件。如果 .xls 文件包含大约 80K（以行计）记录，则脚本工作得非常好，但是当记录超过 4LACS（大量数据）时，脚本根本不起作用，并且没有显示错误消息并且屏幕保持白色。请让我知道如何使我的脚本以某种方式工作，无论 .xls 文件脚本中的数据有多大，无论花费多少时间都应该可以正常工作。

此外，我对我的 php.config 文件进行了以下修改，但对我来说没有用。谢谢，

```
set_time_limit = 0

max_execution_time = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:25:49.207

尝试增加 memory_limit php 设置的大小

# windows-phone - windows phone 支持的捕获格式

> ID：13785247
> 
> 赞同：2
> 
> 时间：2012-12-09T06:24:29.170
> 
> 标签：windows-phone, pcm, audio-capture

我正在为 Windows Phone 开发一个项目，我需要将 PCM 编码为 G.711。所以我需要设备来捕获具有以下功能的音频：16 位，8000 样本/秒。

capturesource.AudioCaptureDevice.SupportedFormats

返回不同支持的捕获格式的列表。当我在我的电脑上运行 Silverlight 应用程序时，此代码返回 10 种不同的格式，其中包括我需要的上述格式。但是，当我使用 windows phone 应用程序的代码并在 windows 模拟器上运行它时仅返回 6 种格式，其中不包括适合我的目的的格式。但我的问题是：

使用 windows phone 模拟器显示的 supportedformats 属性是否与真实 windows phone 设备相同，或者可以不同？

有没有办法改变设备的捕获功能？

# c - 使用非常量初始化器定义全局变量

> ID：13785250
> 
> 赞同：7
> 
> 时间：2012-12-09T06:24:55.537
> 
> 标签：c, global-variables

```
#include <stdio.h>

int i=10;
int j=i;
int main()
{
    printf("%d",j);
} 
```

我收到一条错误消息，指出初始化元素不是常量？这背后的原因是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T06:28:35.507

> **这背后的原因是什么？**

C（与 C++ 不同）不允许使用非常量值初始化全局值。

**C99 标准：第 6.7.8 节：**

> 具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T07:07:11.800

您可以尝试使用：

```
int i=10;
int j=0;

int main()
{
   j=i;//This should be the first statement in the main() and you achieve the same functionality as ur code
   return 0;
} 
```

唯一真正的 C 方法是在运行时对其进行初始化。尽管在 C++ 中您的代码可以正常工作，但不会出现任何编译错误。

C 标准明确禁止使用非常量值初始化全局对象。`Section 6.7.8`C99 标准中说：

> 具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

对象的定义`static storage duration`在第 6.2.4 节中：

> 使用外部或内部链接或存储类说明符 static 声明其标识符的对象具有静态存储持续时间。它的生命周期是程序的整个执行过程，它的存储值只在程序启动之前初始化一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T07:29:14.947

The idea behind this requirement is to have all static storage duration object initialized at compile time. The compiler prepares all static data in pre-initialized form so that it requires no additional initializing code at run time. I.e. when the compiled program is loaded, all such variables begin their lives in already initialized state.

In the first standardized version of C language (C89/90) this requirement also applied to aggregate initializers, even when they were used with local variables.

```
void foo(void)
{
  int a = 5;
  struct S { int x, y; } s = { a, a }; /* ERROR: initializer not constant */
} 
```

Apparently the reason for that restriction was that the aggregate initializers were supposed to be built in advance in the pre-initialized data segment, just like global variables.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T18:52:40.190

用这个：-

```
int i=10,j=1;
int main()
{
  printf("%d",j);
} 
```

虽然这是一个微小的变化，但它会起作用

# ruby-on-rails - 访问用于 Rspec 和 Capybara 测试的设计配置消息

> ID：13785261
> 
> 赞同：5
> 
> 时间：2012-12-09T06:27:18.190
> 
> 标签：ruby-on-rails, rspec, devise, capybara

我正在尝试测试未登录用户在尝试访问安全内容时是否被定向到设计注册页面。我正在使用 RSpec 和 Capybara 进行测试。

为了确保他们到达登录页面，我确保他们最终到达的页面具有设计登录页面通知哈希的内容。（默认情况下，这是`You need to sign in or sign up before continuing.`：）

而不是像这样编写测试：

```
page.should have_content "You need to sign in or sign up before continuing." 
```

有没有办法访问配置的消息（以防我稍后更改）？就像是：

```
page.should have_content Devise::Messages.Login_required 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T06:50:55.500

设计消息存储在 中`config/locales/devise.*.yml`，因此您可以像访问任何其他翻译一样访问它们：

```
page.should have_content I18n.t("devise.failure.unauthenticated") 
```

# jquery - jquery show() 正在工作，而 toogle() 不工作

> ID：13785262
> 
> 赞同：-1
> 
> 时间：2012-12-09T06:27:22.930
> 
> 标签：jquery, show, show-hide

jquery show() 方法可以工作，但是 toogle() 不工作，为什么？

```
<!DOCTYPE html>
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
.past{height:100%}
.past ul{list-style:none;float:left}
.past li{float:left}
.past .he{display:block;background:#eee;padding:10px;color:#3d3d3d;text-decoration:none;
margin-left:5px;
}
.past .he:hover{background:#fff}
.past ul ul{float:none;margin:0;padding:0;position:absolute}
.past li li{float:none;margin:0;padding:0}
.past .sub{background:#EDEDED;padding:7px;color:#3d3d3d;text-decoration:none;display:block;
border-bottom:1px solid #ccc;
margin-left:5px;
}
.past .sub:hover{background:#F7F7F7}
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<div class="past">
<h1 class="lcolh">Midterm Term Past Papers & MCQs</h1>
<ul><li><a href="javascript:;" id="41" class="he"> CS501 </a><script>
$( "#41" ).click(function() {
    $( "#41DIV" ).toogle();
});
</script><ul id="41DIV" style="display:none">       
        <li><a href="http://vubscs.com/thread-49.html" class="sub">CS501 Midterm Solved Subjective With References by Moaaz</a></li></ul></li><li><a href="javascript:;" id="37" class="he"> CS504 </a><script>
$( "#37" ).click(function() {
    $( "#37DIV" ).toogle();
});
</script><ul id="37DIV" style="display:none">       
        <li><a href="http://vubscs.com/thread-52.html" class="sub">CS504 Solved Midterm MCQs with Reference</a></li>        
        <li><a href="http://vubscs.com/thread-54.html" class="sub">CS504 Midterm Solved MCQs and Subjectives Mega file</a></li></ul></li>
</ul>
</div>

<br/>
<br/>
<br/>
<br/>
<br/>
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:32:37.387

应该`$("#your-id").toggle();`不是`.toogle();`

# javascript - 由于某种原因，Javascript 函数不能与某些 if/else 语句一起使用

> ID：13785265
> 
> 赞同：0
> 
> 时间：2012-12-09T06:27:34.183
> 
> 标签：javascript, arrays, function, if-statement

由于一些我无法弄清楚的奇怪原因，当我在其中包含这些 if/else 语句时，代码将无法工作，当它们不存在时它可以正常工作。我认为这与我附加到 if/else 语句的条件有关，因为当使用更简单的条件时，它似乎没问题。有人可以告诉我我做错了什么吗？

```
 function wordSplit(){
        var sentence = document.getElementById("two").value;
        var userWords=sentence.split(" ");
        while(t<userWords.length){
            alert(userWords[t]);
            t++
        };
        x = 0;
        for (var x = 0; x < userWords.length; x++){
            y = 0;
            for (var y = 0; y < vocab.length; y++){

                if (y<vocab.length) {
                    y++
                };
                else if (vocab[y] == userWords[x]){
                    y = 0;
                    x++
                };
                else if(y<vocab.length) {
                    y++
                };
                else if (y == vocab.length){
                    y = 0;
                };
                else if (y == 0)
                {
                    vocab.push(userWords[x]);
                    x++
                };

            };

        };
    }; 
```

重申一下，据我所知，问题肯定出在 if else 部分，当它被删除或更改为更简单时，它突然起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:33:37.513

@DCoder 是正确的，您需要删除额外的`;`

HTML：

```
<input type="text" id="two" value="What the hell is wrong here??" />​ 
```

JavaScript：

```
wordSplit();

function wordSplit() {
    var vocab = [];
    var sentence = document.getElementById("two").value;
    var userWords = sentence.split(" ");
    var t = 0;
    while (t < userWords.length) {
        alert(userWords[t]);
        t++
    };
    x = 0;
    for (var x = 0; x < userWords.length; x++) {
        y = 0;
        for (var y = 0; y < vocab.length; y++) {

            if (y < vocab.length) {
                y++
            } else if (vocab[y] == userWords[x]) {
                y = 0;
                x++
            } else if (y < vocab.length) {
                y++
            } else if (y == vocab.length) {
                y = 0;
            } else if (y == 0) {
                vocab.push(userWords[x]);
                x++
            }

        }

    }
}​ 
```

[**固定现场演示**](http://jsfiddle.net/gNFM5/6/)

# image - Jquery Image Preview on Hover with AJAX data

> ID：13785266
> 
> 赞同：0
> 
> 时间：2012-12-09T06:28:29.763
> 
> 标签：image, jquery, rollover

我有一个图像预览插件。它与页面中已经存在的图像完美配合。像：

```
<a href='ImgHandler.ashx?Id=5' class='preview' title='Landscape'>
<img height='18' width='18' class='ImgInCell' src='ImgHandler.ashx?Id=5' alt='Landscape' /></a> 
```

但是当我通过 Ajax 在 DIV 层上加载相同类型的代码时，图像悬停预览不起作用。

```
<a id="LinkPic" class="preview" title="Land Scape" href="ImgHandler.ashx?Id=5">
<img id="ImgPic" style="height:50px;width:50px;" src="ImgHandler.ashx?Id=5" alt="Land Scape">
</a> 
```

然后我使用firebug并在加载AJAX后复制了源代码；创建了一个html页面；然后在加载它时，我看到图像悬停在 AJAX 图像上工作正常。图像预览的 Jquery 代码如下调用。

```
$(document).ready(function () {
    imagePreview();
}); 
```

我认为由于`document.ready`. 如何使图像预览适用于 AJAX 数据（图像）？

`imagePreview();`在 AJAX 调用之后调用没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:24:44.953

我发现除了将 jquery 代码插入到名为 document (partial view) 的 AJAX 中之外别无他法，并在类中进行了更改`imgpreview2`，现在它工作正常。

# antlr - 无法使用 Eclipse 调试 ANTLR 中的简单通道标志

> ID：13785271
> 
> 赞同：2
> 
> 时间：2012-12-09T06:29:31.727
> 
> 标签：antlr, antlr3, antlrv3ide

我遵循 antlr 教程并编写与教程所说的完全相同的代码。但是当我尝试添加时

```
$channel = HIDDEN; 
```

它不断给我错误

```
Multiple markers:
-(100): syntax error: antlr: MissingTokenException(inserted [@-1,0:0='<missing RPAREN>',<69>,22:41] 
 at channel)
-(100): syntax error: antlr: NoViableAltException(86@[])
-(100): syntax error: antlr: NoViableAltException(75@[]) 
```

在“$channel”的红色错误栏下，以及

```
(100): syntax error: antlr: MissingTokenException(inserted [@-1,0:0='<missing EOF>',<-1>,22:58] 
 at )) 
```

在';'的红色错误栏下

这是代码：

```
grammar Sample;

options {
  language = Java;
}

@header {
  package a.b.c;
}

@lexer::header {
  package a.b.c;
}

programe
    :   'program' IDENT '=' 
        'begin'
        'end' IDENT '.'
    ;

IDENT:'a'..'z'+;
WS : (' '| 't' | '\n' | '\r' | 'f' )+ ($channel = HIDDEN;); 
```

这是我尝试保存时的错误消息

```
error(100): /ANTLR 3.x Tutorial/src/sample/Sample.g:22:40: syntax error: antlr: NoViableAltException(86@[])
 |---> WS : (' '| 't' | '\n' | '\r' | 'f' )+ ($channel = HIDDEN;);

error(100): /ANTLR 3.x Tutorial/src/sample/Sample.g:22:41: syntax error: antlr: NoViableAltException(75@[])
 |---> WS : (' '| 't' | '\n' | '\r' | 'f' )+ ($channel = HIDDEN;);

error(100): /ANTLR 3.x Tutorial/src/sample/Sample.g:22:41: syntax error: antlr: MissingTokenException(inserted [@-1,0:0='<missing RPAREN>',<69>,22:40] at channel)
 |---> WS : (' '| 't' | '\n' | '\r' | 'f' )+ ($channel = HIDDEN;);

error(100): /ANTLR 3.x Tutorial/src/sample/Sample.g:22:58: syntax error: antlr: MissingTokenException(inserted [@-1,0:0='<missing EOF>',<-1>,22:57] at ))
 |---> WS : (' '| 't' | '\n' | '\r' | 'f' )+ ($channel = HIDDEN;);

error(10):  internal error: /ANTLR 3.x Tutorial/src/sample/Sample.g : java.lang.IllegalStateException: java.lang.NullPointerException
org.deved.antlride.runtime.AntlrErrorListener$DynamicToken.invokeMethod(AntlrErrorListener.java:59)
org.deved.antlride.runtime.AntlrErrorListener$DynamicToken.getLine(AntlrErrorListener.java:64)
org.deved.antlride.runtime.AntlrErrorListener.report(AntlrErrorListener.java:131)
org.deved.antlride.runtime.AntlrErrorListener.message(AntlrErrorListener.java:113)
org.deved.antlride.runtime.AntlrErrorListener.error(AntlrErrorListener.java:103)
org.antlr.tool.ErrorManager.syntaxError(ErrorManager.java:768)
org.antlr.grammar.v3.AssignTokenTypesWalker.reportError(AssignTokenTypesWalker.java:208)
org.antlr.grammar.v3.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java:2419)
org.antlr.grammar.v3.AssignTokenTypesWalker.ebnf(AssignTokenTypesWalker.java:3439)
org.antlr.grammar.v3.AssignTokenTypesWalker.element(AssignTokenTypesWalker.java:3166)
org.antlr.grammar.v3.AssignTokenTypesWalker.alternative(AssignTokenTypesWalker.java:2483)
org.antlr.grammar.v3.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java:2389)
org.antlr.grammar.v3.AssignTokenTypesWalker.ruleBody(AssignTokenTypesWalker.java:1947)
org.antlr.grammar.v3.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java:1569)
org.antlr.grammar.v3.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java:1505)
org.antlr.grammar.v3.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java:713)
org.antlr.grammar.v3.AssignTokenTypesWalker.grammar_(AssignTokenTypesWalker.java:383)
org.antlr.tool.CompositeGrammar.assignTokenTypes(CompositeGrammar.java:337)
org.antlr.Tool.process(Tool.java:462)
org.deved.antlride.runtime.Tool2.main(Tool2.java:24)
5 errors

BUILD FAIL
Total time: 879 milliseconds 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:32:02.460

刚刚解决了.. 我需要使用 '{}' 而不是 '()' 对不起这个简单的问题

# css - td {位置：相对；left} 不移动边框

> ID：13785273
> 
> 赞同：0
> 
> 时间：2012-12-09T06:30:04.090
> 
> 标签：css, position

请参阅以下示例：http: [//jsfiddle.net/6t6hq/7/](http://jsfiddle.net/6t6hq/7/)

当我使用带有相对位置的 td 来移动它时，它只移动内容而不移动边框。如何移动内容的边框？

```
<table>
    <tr>
        <td id="relativeTD">1</td>
        <td>2</td>
    </tr>
    <tr>
        <td>3</td>
        <td>4</td>
    </tr>
</table>
<div id="expected">expected</div>​
<style>
td{
    border:1px solid #000;
    min-width:100px;
}
#relativeTD{
    position:relative;
    left:60px;
}
#expected{
    border:1px solid #000;
    position:relative;
    left:60px;
}​
</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T06:31:58.833

TD是`display: table-cell;`！

所以你不能使用`relative position`ing 移动它。相反，`<div>`在里面创建另一个`<td>`并给予`border`和东西。

* * *

相反，`position: absolute`为`td`. 有用！`position: relative`另外，你需要给`table`.

小提琴：http: [//jsfiddle.net/6t6hq/9/](http://jsfiddle.net/6t6hq/9/)

* * *

否则，您也可以`margin-left`使用`td`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T06:33:20.807

您无法移动单个 td 边框，您需要移动整个表格

[**演示**](http://jsfiddle.net/6t6hq/8/)

```
table {
   margin-left: 60px;
} 
```

你可以做的就是给你的桌子，在你的桌子里面`border: 0;`放一个 宽度，边框和带，你就可以走了`div``td``position: relative``left: 60px;`

# c++ - 函数重载、继承和隐式构造函数：奇怪的优先级

> ID：13785275
> 
> 赞同：1
> 
> 时间：2012-12-09T06:30:13.867
> 
> 标签：c++, inheritance, constructor, c++11, overloading

这是一个测试代码：

```
#include <iostream>
#define OPTION 1

template<typename T>
class Base
{
    public:
        Base() : _x() 
        {std::cout<<"Base()"<<std::endl;}

        Base(const T& source) : _x(source) 
        {std::cout<<"Base(const T& source)"<<std::endl;}

        Base(const Base<T>& source) : _x(source.x) 
        {std::cout<<"Base(const Base<T>& source)"<<std::endl;}

    public:
        inline void set(const T& source) 
        {std::cout<<"Base::set(const T& source)"<<std::endl; 
        this->_x = source;}

        inline T get() const 
        {std::cout<<"Base::get(const T& source)"<<std::endl; return _x;}

    protected:
        T _x;
};

template<typename T>
class Derived : public Base<T>
{
    public:
        Derived() : Base<T>() 
        {std::cout<<"Derived()"<<std::endl;}

        Derived(const T& source) : Base<T>(source) 
        {std::cout<<"Derived(const T& source)"<<std::endl;}

        Derived(const Derived<T>& source) : Base<T>(source) 
        {std::cout<<"Derived(const Derived<T>& source)"<<std::endl;}

    public:
        #if OPTION == 0
        inline void set(const T& source) 
        {std::cout<<"Derived::set(const T& source)"<<std::endl; 
        this->_x = source;}
        #endif

        inline void set(const Base<T>& source) 
        {std::cout<<"Derived::set(const Base<T>& source)"<<std::endl; 
        this->_x = source.get();}
};

int main(int argc, char* argv[])
{
    Derived<double> d;
    double x = 4.5;
    d.set(x);
    return 0;
} 
```

对我来说`OPTION 0`，`OPTION 1`它们是等价的，但它们不是，我想了解原因。

使用`OPTION 0`，当`main`调用时`d.set(x)`编译器可以在`Derived<T>::set(const T& source)`和之间进行选择`Derived<T>::set(const Base<T>& source)`，当然，`T x`他选择`Derived<T>::set(const T& source)`.

现在`OPTION 1`，当`main`调用时`d.set(x)`，我认为编译器可以在 和 之间进行`Base<T>::set(const T& source)`选择`Derived<T>::set(const Base<T>& source)`。

`Base<T>::set(const T& source)`但是，编译器（此处为 GCC 4.6.3）不是选择，而是隐式转换`x`为`Base<T>`并调用`Derived<T>::set(const Base<T>& source)`.

正常吗？

为了拥有`OPTION 0`和`OPTION 1`等价的避免这种情况（不改变构造函数）的常用技术（如果存在）是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T06:54:38.697

当从派生类中的基类重载函数时，基类函数是隐藏的，除非使用`using`声明，否则重载决议永远不会选择基类函数。也就是说，为了允许编译器选择`Base<T>::set(const T&)`，您添加了

```
using Base<T>::set; 
```

在您的派生类中。

# unix - 我可以轻松地用纯 C++（或任何类似语言）实现一小部分 Curses 吗？

> ID：13785276
> 
> 赞同：1
> 
> 时间：2012-12-09T06:30:20.220
> 
> 标签：unix, terminal, curses

（我找不到与此相关的任何内容，因为我不知道要搜索哪些关键字）。

我想要一个简单的功能 - 打印 3 行，然后擦除 3 行并用新行替换。如果它是一行，我可以打印`\r`或`\b`覆盖它。

如果没有 Curses 库，我怎么能做到这一点？必须有一些转义码或其他东西。

我找到了一些转义码来打印彩色文本，所以我猜有类似的东西覆盖前面的行。

我希望它至少可以在 OSX 和 Ubuntu 上运行。

编辑：我发现了这个 - [http://www.perlmonks.org/?displaytype=displaycode;node_id=575125](http://www.perlmonks.org/?displaytype=displaycode;node_id=575125)

是否有所有此类可用命令的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:54:33.890

（简短回答：是的。有关 ANSI 序列的完整列表，请参阅 Wikipedia 中的“ [ANSI Escape code](http://en.wikipedia.org/wiki/ANSI_escape_code) ”。您的终端可能是也可能不是 ANSI，但 ANSI 序列支持似乎很常见——至少是一个很好的起点）。这些命令取决于您使用的终端，或者这些天当然是终端模拟器。过去，有一些物理盒子，名称如“VT-100”或“Ontel”。每个人都实现了他们选择的任何一组转义序列命令。

当然，最近我们只使用模拟器。几乎每一种命令行类型的界面都在模拟某些东西的文本窗口中运行。

Curses 是一个库，它允许您的普通程序员编写代码来操作终端，而不必知道如何为那里的许多不同终端中的每一个编写代码。类似于打印机驱动程序，您无需了解任何特定打印机的详细信息即可进行打印。

首先，您需要了解您使用的是哪种终端。然后你可以查找具体的命令。一个可能的答案在[这里](https://stackoverflow.com/questions/7052683/how-can-i-identify-the-current-terminal-emulator-from-a-bash-script)。“ [ANSI](http://en.wikipedia.org/wiki/ANSI_escape_code) ”是一个常见的，典型的MSDOS。

或者，使用诅咒并为此感到高兴:-)

# python - python中的可逆加密

> ID：13785277
> 
> 赞同：1
> 
> 时间：2012-12-09T06:30:31.183
> 
> 标签：python, encryption

简短的问题：是否有经过证明的强可逆加密方法（在 Python 中）？

要求：不需要 Python 库的第 3 部分。
应用环境：通过网络传输数据。

我看到了一种使用`str.translate()`键生成表的方法。这是表格生成函数：

```
def get_table(key):
    m = hashlib.md5()
    m.update(key)
    s = m.digest()
    (a, b) = struct.unpack('<QQ', s)
    table = [c for c in string.maketrans('', '')]
    for i in xrange(1, 1024):
        table.sort(lambda x, y: int(a % (ord(x) + i) - a % (ord(y) + i)))
    return ''.join(table) 
```

关于这个功能的问题：

1.  这是一个好的/强大的可逆加密吗？
2.  在函数中 1024 是一个很大的数字，我们需要循环这么多次才能得到一个足够强的表吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:58:53.667

如果你想*在没有*第三方库的情况下进行强加密，那你就走运了——Python 标准库只有散列函数。如果您想要安全加密，您必须自己实现类似[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)的东西（这不是一个好主意，因为在实现加密算法时，没有经验的人很容易搞砸），或者更改您的要求并使用[PyCrypto](https://www.dlitz.net/software/pycrypto/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T06:49:42.440

异或密码可以很好地工作（如果您将消息的每个字符与密钥中的对应字符按位异或，则可以通过再次将密文与密钥进行异或来再次返回消息）。

[异或密码](http://en.wikipedia.org/wiki/XOR_cipher)

编辑：您获取密钥的确切方式将决定此密码的安全性，但它是一种快速、易于可逆的密码。

EDIT2：具体来说，请参阅 Wiki 中的这些行，了解如何使它成为一个安全的密码系统......

“如果密钥是随机的并且至少与消息一样长，则 XOR 密码比消息中存在密钥重复的情况要安全得多。[3] 当密钥流由伪随机数生成器生成时，结果是一个流密码。使用真正随机的密钥，结果是一次性的，即使在理论上也是牢不可破的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-13T10:56:59.673

您可以使用偏移因子制作自己的加密程序。IE; 使用 ord() 将每个字母转换为数字。使用随机生成的偏移键添加到数字。使用 chr() 转换回字母

并解密：使用 ord() 将每个字符转换为数字，通过偏移键减去使用 chr() 转换回字母，您知道有原始消息。

希望对你有帮助

# android - Android 可见性和布局 GONE VISIBLE 循环与布局重叠

> ID：13785280
> 
> 赞同：2
> 
> 时间：2012-12-09T06:31:03.553
> 
> 标签：android, visibility, android-relativelayout, cycle, visible

如果你不介意看视频

[http://www.youtube.com/watch?v=kWFsmeBJ4l0](http://www.youtube.com/watch?v=kWFsmeBJ4l0)

我有一个与父级的布局：相对布局，3 个线性布局作为子级：标题、菜单和内容。菜单在创建时被操作为 GONE，然后在特定事件之后可见，并且在事件相反之后再次 GONE。问题是在 GONE VISIBLE GONE 的第一个循环之后，再次执行 GONE 会破坏 UI，然后内容与菜单重叠。谁能告诉我发生了什么？

这是布局的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/metro_dark_blue"
    android:clipChildren="true" >

    <LinearLayout
        android:id="@+id/titleBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/header_gradient"
        android:orientation="horizontal"
         >

        <LinearLayout
            android:id="@+id/collaborationButton"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:background="@drawable/collaboration_button_xml"
            android:clickable="true" >
        </LinearLayout>
    </LinearLayout>

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/titleBar"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:background="@null"
        android:gravity="center_vertical"
        android:text="@string/presento"
        android:textSize="25dp" />

    <LinearLayout
        android:id="@+id/connectButton"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignBottom="@+id/titleBar"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/connect_button_xml"
        android:clickable="true" >
    </LinearLayout>

    <View
        android:id="@+id/titleDropShadow"
        android:layout_width="match_parent"
        android:layout_height="3dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/titleBar"
        android:background="@drawable/drop_shadow"
        android:orientation="horizontal" />

    <LinearLayout
        android:id="@+id/menuBar"
        android:layout_width="match_parent"
        android:layout_height="65dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/titleDropShadow"
        android:background="@drawable/header_gradient"
        android:baselineAligned="true"
        android:visibility="visible" >

        <LinearLayout
            android:id="@+id/remote_button"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.50"
            android:background="@drawable/menu_button_xml"
            android:clickable="true"
            android:gravity="center_horizontal" >

            <ImageView
                android:id="@+id/imageView_remote"
                android:layout_width="85.5dp"
                android:layout_height="58.5dp"
                android:background="@null"
                android:contentDescription="@null"
                android:src="@drawable/remote_control_button" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/file_manager_button"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.50"
            android:background="@drawable/menu_button_xml"
            android:clickable="true"
            android:gravity="center_horizontal" >

            <ImageView
                android:id="@+id/imageView_file_manager"
                android:layout_width="85.5dp"
                android:layout_height="58.5dp"
                android:background="@null"
                android:contentDescription="@null"
                android:src="@drawable/file_manager_button" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/desktop_button"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="0.50"
            android:background="@drawable/menu_button_xml"
            android:clickable="true"
            android:gravity="center_horizontal" >

            <ImageView
                android:id="@+id/imageView_desktop"
                android:layout_width="85.5dp"
                android:layout_height="58.5dp"
                android:background="@null"
                android:contentDescription="@null"
                android:src="@drawable/desktop_mode_button" />
        </LinearLayout>
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/fragment_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="false"
        android:layout_below="@+id/menuBar"
        android:baselineAligned="true"
        android:orientation="vertical"
        android:visibility="visible" >

    </RelativeLayout>

</RelativeLayout> 
```

这是处理可见性的代码

```
public void connectService(String ip, String hostType, String name) {
    server = new ConnectedServer(ip, hostType, "Presento");
    Toast.makeText(getApplicationContext(), "You have been connected to Presento Server with IP: " + ip, Toast.LENGTH_LONG).show();

    //RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) fragmentContainer.getLayoutParams();
    //RelativeLayout.LayoutParams param2 = (RelativeLayout.LayoutParams) belowMenu.getLayoutParams();
    //param2.height = 65;
    //param2.addRule(RelativeLayout.ABOVE, R.id.fragment_container);
    //param2.addRule(RelativeLayout.BELOW, R.id.titleBar);
    belowMenu.setVisibility(View.VISIBLE);
        belowMenu.startAnimation(new MyScaler(1.0f, 1.0f, 0.0f, 1.0f, 500, belowMenu, false));

    //belowMenu.setLayoutParams(param2);
    //params.addRule(RelativeLayout.BELOW,R.id.menuBar);
    //fragmentContainer.setLayoutParams(params);
    //fragmentContainer.setVisibility(View.GONE);
    //fragmentContainer.setVisibility(View.VISIBLE);

} 
```

这是 GONE 时处理的代码

```
connectButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                //if not yet connected to a server, find a server through jmdns and get the ip
                if (server == null) {
                    //setting device's ip address
                    myIpAddress = getMyIpAddress();
                    InetAddress inet = intToInetAddress(ipStringToInt(myIpAddress));
                    if (myIpAddress.equals("")) alertMessage("You don't seem to be connected to a Wi-Fi Service, please make sure that you are connected and try to connect again.", "Something went wrong");
                    else {
                        new SeekServer(inet, MenuActivity.this).execute(jmdns);
                    }
                }
                //server already connected
                else {
                    FragmentManager FM = getSupportFragmentManager();
                    FragmentTransaction FT = FM.beginTransaction();
                    String sessionID = pref.getString("sessionID", "0");
                    FT.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left);
                    try {
                    RemoteControlFragment remote = (RemoteControlFragment)FM.findFragmentById(R.id.fragment_container);
                    if (sessionID.equals("0")) {
                        join = new JoinSessionFragment();
                        FT.replace(R.id.fragment_container, join);
                        FT.commit();
                    } else {
                        String accountName = pref.getString("accountName", "");
                        status.setText(accountName);
                        FT.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left);
                        TutorialFragment tutor = new TutorialFragment();
                        FT.replace(R.id.fragment_container, tutor);
                        FT.addToBackStack(null);
                        FT.commit();
                    }
                    } catch (ClassCastException ex) {
                        try {
                        FileManagerFragment manager = (FileManagerFragment)FM.findFragmentById(R.id.fragment_container);
                        if (sessionID.equals("0")) {
                            join = new JoinSessionFragment();
                            FT.replace(R.id.fragment_container, join);
                            FT.commit();
                        } else {
                            String accountName = pref.getString("accountName", "");
                            status.setText(accountName);
                            FT.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left);
                            TutorialFragment tutor = new TutorialFragment();
                            FT.replace(R.id.fragment_container, tutor);
                            FT.addToBackStack(null);
                            FT.commit();
                        }
                        }
                        catch (ClassCastException ex2) {

                        }
                    }

                    Toast.makeText(getApplicationContext(), "You have been disconnected from server", Toast.LENGTH_LONG).show();
                    belowMenu.startAnimation(new MyScaler(1.0f, 1.0f, 1.0f, 0.0f, 500, belowMenu, true));

                    server = null;
                        if (jmdns != null) {
                        jmdns.unregisterAllServices();
                        try {
                            jmdns.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

                }
            }
        }); 
```

动画类

```
public class MyScaler extends ScaleAnimation {

        private View mView;

        private LayoutParams mLayoutParams;

        private int mMarginBottomFromY, mMarginBottomToY;

        private boolean mVanishAfter = false;

        public MyScaler(float fromX, float toX, float fromY, float toY, int duration, View view,
                boolean vanishAfter) {
            super(fromX, toX, fromY, toY);
            setDuration(duration);
            mView = view;
            mVanishAfter = vanishAfter;
            mLayoutParams = (LayoutParams) view.getLayoutParams();
            int height = mView.getHeight();
            mMarginBottomFromY = (int) (height * fromY) + mLayoutParams.bottomMargin - height;
            mMarginBottomToY = (int) (0 - ((height * toY) + mLayoutParams.bottomMargin)) - height;
        }

        @Override
        protected void applyTransformation(float interpolatedTime, Transformation t) {
            super.applyTransformation(interpolatedTime, t);
            if (interpolatedTime < 1.0f) {
                int newMarginBottom = mMarginBottomFromY
                        + (int) ((mMarginBottomToY - mMarginBottomFromY) * interpolatedTime);
                mLayoutParams.setMargins(mLayoutParams.leftMargin, mLayoutParams.topMargin,
                    mLayoutParams.rightMargin, newMarginBottom);
                mView.getParent().requestLayout();
            } else if (mVanishAfter) {
                mView.setVisibility(View.GONE);
            }
        }

    } 
```

我首先怀疑是动画造成的，但后来我清楚地使用 GONE 和 VISIBLE 没有动画，得出与视频中相同的结论。

# c# - 检测数据上下文的属性更改

> ID：13785282
> 
> 赞同：4
> 
> 时间：2012-12-09T06:31:24.887
> 
> 标签：c#, wpf, datacontext, inotifypropertychanged

克莱门在这里的好答案的另一个问题：[DataContext values in view code behind](https://stackoverflow.com/questions/13753228/datacontext-values-in-view-code-behind) . 如果使用这种方法，此时是否可以检测到 VM 上的属性更改？这些都是通过正确实现的`INotifyPropertyChanged`。

```
var viewModel = DataContext as MyViewModel;
//How would one detect a property change on viewModel?
//Tried viewModel.PropertyChange which doesn't fire. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T06:41:14.697

我认为你一定做错了你在帖子中没有提到的事情。以下代码按预期工作，并将 MyTestPropertyName 打印到控制台窗口。

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        DataContext = new MyViewModel();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        MyViewModel viewModel = DataContext as MyViewModel;
        viewModel.PropertyChanged += MyPropertyChangedEventHandler;
        viewModel.NotifyPropertyChanged();
    }

    private void MyPropertyChangedEventHandler(object sender, PropertyChangedEventArgs e)
    {
        Console.WriteLine(e.PropertyName);
    }

}

public class MyViewModel : INotifyPropertyChanged
{
    public void NotifyPropertyChanged()
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs("MyTestPropertyName"));
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

应该注意的是，这是一个糟糕的设计，并且仅作为概念证明而设计，您确实可以在代码隐藏中订阅 ViewModel 上的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:35:48.547

您需要订阅`PropertyChanged`每个依赖属性（即实现的属性`INotifyPropertyChanged`）的事件，或者修改您的`MyViewModel`类以从您有兴趣收到通知的属性（依赖或其他）的设置器中引发事件，并且然后订阅公共事件。

# android - 从互联网下载 .txt 文件

> ID：13785290
> 
> 赞同：1
> 
> 时间：2012-12-09T06:33:10.397
> 
> 标签：android, url, text, storage

> **可能重复：**
> [使用 android 下载文件](https://stackoverflow.com/questions/8645166/file-download-with-android)

如何从互联网上的给定 URL 下载 .txt 文件并将其保存到 Android 手机中？它可以保存到内部存储、SD 存储或任何真正可供应用使用的地方。

我用来测试加载 URL WebViews 的 URL 是[http://base.google.com/base/products.txt](http://base.google.com/base/products.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:56:08.173

这应该可以解决问题。它将文件下载到`sdcard/Download/products.txt`. 您可以在下面更改它。

```
try {
    URL url = new URL("http://base.google.com/base/products.txt");
    URLConnection conexion = url.openConnection();
    conexion.connect();
    int lenghtOfFile = conexion.getContentLength();
    InputStream is = url.openStream();
    File testDirectory = new File(Environment.getExternalStorageDirectory() + "/Download");
    if (!testDirectory.exists()) {
        testDirectory.mkdir();
    }
    FileOutputStream fos = new FileOutputStream(testDirectory + "/products.txt");
    byte data[] = new byte[1024];
    long total = 0;
    int count = 0;
    while ((count = is.read(data)) != -1) {
        total += count;
        int progress_temp = (int) total * 100 / lenghtOfFile;
        /*publishProgress("" + progress_temp); //only for asynctask
        if (progress_temp % 10 == 0 && progress != progress_temp) {
            progress = progress_temp;
        }*/
        fos.write(data, 0, count);
    }
    is.close();
    fos.close();
} catch (Exception e) {
    Log.e("ERROR DOWNLOADING", "Unable to download" + e.getMessage());
} 
```

# android - 上传谷歌室内地图？& 我如何检查和查看它？

> ID：13785292
> 
> 赞同：6
> 
> 时间：2012-12-09T06:33:26.327
> 
> 标签：android, google-maps, gis

我正在尝试为我的大学校园创建一个 android 导航系统应用程序，作为我的一门课程的项目。我搜索了很多不同的解决方案来实施我的项目。“谷歌室内地图”解决方案引起了我的注意。

*   首先，我准备了质量合适的大学地图。
*   其次，我按照[本网站](http://support.google.com/gmm/bin/answer.py?hl=en&answer=1685896&topic=1685871&ctx=topic)上提到的步骤进行操作。
*   第三，我[在这里](http://maps.google.com/help/maps/floorplans/)上传了我的室内地图。
*   第四，我提交了我的作品，并提到它将被谷歌审核接受（我可能从 3 天开始提交）。

现在，我怎么知道我的地图被接受了？如何查看？我真的需要它。

我注意到[这里](http://support.google.com/gmm/bin/answer.py?hl=en&answer=1685896&topic=1685871&ctx=topic)写的一条重要评论。这是**评论**：

> “注意：此选项仅在美国、英国和日本可用。此外，您只能从计算机上传平面图。”

**为什么？！** 这是真的？！！！那么，这是否意味着我将无法使用谷歌地图查看我上传的大学室内地图？？

拜托，我需要你尽快的帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T11:17:54.753

尝试解除移动设备中的区域互联网限制

通过使用 vpn 应用程序。为此目的有很多应用程序。试试这个：

[https://play.google.com/store/apps/details?id=com.aed.droidvpn&hl=en](https://play.google.com/store/apps/details?id=com.aed.droidvpn&hl=en)

# django - 由于 self.object 为 None，Django get_absolute_url() 在通用视图中失败

> ID：13785298
> 
> 赞同：0
> 
> 时间：2012-12-09T06:34:40.853
> 
> 标签：django, views, django-class-based-views

所以我一直遇到这个问题，我的基于类的编辑（CreateView 和 UpdateView）视图未能在我的模型的随机选择上一致地重定向，说 get_absolute_url 没有定义，即使它是针对这些模型的。我在实际的基于类的视图中进行了一些调试，我意识到这是因为在 get_success_url() 方法中，self.object 为 None，但运行 self.get_object() 返回正确的对象。我很好奇为什么 self.object 不会，但 self.get_object 在这种情况下会起作用，我有点知道如何解决这个问题，但我觉得我可能不应该这样做可能意味着我的部分过程不正确，虽然我不知道什么，因为我正在编写简单的模型，在我的 CreateView 和 UpdateViews 中定义 get_absolute_url 并设置 model 和 form_class。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:39:44.683

我刚刚意识到问题是我已经在我的 ModelForm 中为这些类覆盖了 save ，尽管我保存了对象，但我没有返回它们。退回他们解决了这个问题。查看 ModelFormMixin 的 form_valid 向我展示了解决方案。

# stream - Prolog 管道部分输入，其余部分由用户输入

> ID：13785300
> 
> 赞同：1
> 
> 时间：2012-12-09T06:35:03.270
> 
> 标签：stream, prolog, pipe, gnu-prolog

我正在编写一个带有输入循环的序言程序。大量输入已预先编写在响应文件中。我将其执行为`prolog < response.txt`. 响应文件完成后，我希望程序通过键盘用户输入继续。但是，当响应文件完成时，它不会从键盘读取/1，而是继续在无限循环中读取`end_of_file`作为其输入。

一旦管道到达文件末尾，我希望程序恢复为用户键入的输入。我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:16:58.260

可以询问和重定向您的输入流。

不确定您使用的是哪个版本的 Prolog，但 SWI-Prolog 有很多[方法](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.16%27,swi%28%27/doc/Manual/IO.html%27%29%29 "方法")可以重定向您的输入流。

如果输入来自键盘，`TTY`则等于`true`：

```
current_input(Stream), stream_property(Stream, tty(TTY)). 
```

如果输入来自文件，`Filename`则当前读取的每个文件输入的名称：

```
current_input(Stream), stream_property(Stream, file_name(Filename)). 
```

您可以将 设置`Stream`为用作`set_input/1`谓词的输入：

```
{obtain a Stream handle}, set_input(Stream). 
```

我希望你能以此为基础，因为我还没有弄清楚你应该如何要求键盘输入 Stream。

您可能必须确定您在哪个操作系统上运行，并为每个操作系统设置不同的方法来将您的输入设置为键盘流。

# r - 将矩阵保存到 R 中的 .csv 文件而不会丢失格式

> ID：13785303
> 
> 赞同：5
> 
> 时间：2012-12-09T06:35:47.297
> 
> 标签：r, csv, matrix, filewriter

我正在尝试使用 MASS 中的 write.matrix 将矩阵写入 .csv 文件，但我遇到了一些问题。当我打印矩阵时，它看起来像这样

```
 p q         s         S2         R2      R2adj          Cp      AIC     PRESS
1   0 1 167.27779 27981.8583         NA         NA 3679.294476       NA        NA
2   1 2 160.32254 25703.3165 0.08866209 0.08142925 3343.909110 1666.993 3338167.3
3   1 2  86.73559  7523.0630 0.73326195 0.73114498  891.016823 1509.726 1045980.3
4   1 2  67.50458  4556.8690 0.83843145 0.83714916  490.815893 1445.555  693993.5 
```

但是当我这样做时 `write.matrix(moDat2, file = paste(targetPath, "dat2.csv", sep="/"), sep=",")`

它像这样将其保存到文件中

```
p,q,s,S2,R2,R2adj,Cp,AIC,PRESS
0.000000e+00,1.000000e+00,1.672778e+02,2.798186e+04,          NA,          NA,3.679294e+03,          NA,          NA
1.000000e+00,2.000000e+00,1.603225e+02,2.570332e+04,8.866209e-02,8.142925e-02,3.343909e+03,1.666993e+03,3.338167e+06
1.000000e+00,2.000000e+00,8.673559e+01,7.523063e+03,7.332620e-01,7.311450e-01,8.910168e+02,1.509726e+03,1.045980e+06 
```

无论如何我可以将它保存到文件中而无需将数据转换为科学记数法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T07:26:11.880

您可以`format`在`write.matrix`通话中使用。

```
 write.matrix(format(moDat2, scientific=FALSE), 
               file = paste(targetPath, "dat2.csv", sep="/"), sep=",") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:56:57.893

MASS::write.table 的帮助（页面不建议有可用的控件。这是`write.table`帮助页面关于格式化数字的内容：

“在几乎所有情况下，数字量的转换都由选项“scipen”（参见选项）控制，但内部等效于digits=15。为了更好地控制，使用格式来制作字符矩阵/数据框，然后调用write.table 就在上面。”

# python - 在python中读取文件后更改excel工作表的名称

> ID：13785306
> 
> 赞同：0
> 
> 时间：2012-12-09T06:36:04.490
> 
> 标签：python, excel, xlrd

嗨，我正在使用该`xlrd`模块来读取`excel`文件。如何重命名每个 Excel 文件的第一个工作表。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:36:43.470

我认为您不能使用`xlrd`或修改文件`xlwt`。但是，您可以使用 复制文件，`xlrd`然后使用 修改和写入副本`xlwt`。

这是一个改编自此处的示例：[使用 xlwt 写入现有工作簿](https://stackoverflow.com/questions/2725852/writing-to-existing-workbook-using-xlwt)：

```
from xlutils.copy import copy
from xlrd import open_workbook

# open the file you're interested
rb = open_workbook('some_document.xlsx')

# copy it to a writable variant
wb = copy(rb)

# find the index of a sheet you wanna rename,
# let's say you wanna rename Sheet1
idx = rb.sheet_names().index('Sheet1')

# now rename the sheet in the writable copy
wb.get_sheet(idx).name = u'Renamed Sheet1'

# save the new spreadsheet
wb.save('new_some_document.xlsx')

# done 
```

# javascript - Meteor 的电子邮件未定义

> ID：13785312
> 
> 赞同：1
> 
> 时间：2012-12-09T06:37:10.683
> 
> 标签：javascript, node.js, email, meteor

添加 Meteor 的电子邮件包并重新启动服务器后（为了好的措施），我这样做：

```
Template.messaging.events({
  'click #send-message' : function () {
    Email.send({
      from: 'test@gmail.com',
      to:   'test2@gmail.com',
      html: 'heyo buddy.'
    });
  }
}); 
```

当我触发事件时，控制台会吐出：

```
Uncaught ReferenceError: Email is not defined 
```

文档说即使未配置， Email.send() 也应该输出到标准输出。部署到meteor.com时我遇到了同样的问题，应该使用Mailgun自动设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T10:10:52.907

如[文档](http://docs.meteor.com/#email)中所述，电子邮件是仅服务器端的包。您正在尝试在模板回调中在客户端调用它。我建议您通过 Meteor.methods 将上述调用移动到服务器端方法中，然后通过 Meteor.call 在客户端调用它

# robotium - 使用 Robotium 测试多个 APK 以进行 android 测试

> ID：13785313
> 
> 赞同：1
> 
> 时间：2012-12-09T06:37:11.077
> 
> 标签：robotium

我想使用单个机器人项目测试由多个 APK 组成的应用程序。我无法做到这一点，因为我找不到在清单文件中提供多个包名称的方法。有什么解决办法吗？我可以有一个测试 APK 来测试多个 APK 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T03:01:12.437

您无法在单个 robotsium 项目中测试包含多个 APK 的应用程序。您可以一次测试一个 APK。

# jquery - jQuery nth-child 选择器跳过数字

> ID：13785319
> 
> 赞同：3
> 
> 时间：2012-12-09T06:37:55.913
> 
> 标签：jquery, html, css-selectors

我是 jquery 的初学者，所以我可能不会理解太多高级的东西，但问题是：当我尝试选择 时`nth-child(1)`，它选择了第一个，正如预期的那样（我知道我可以使用第一个孩子，但我不喜欢它）。但是，如果更改为`nth-child(2)`，则不会选择任何内容。`nth-child(3)`选择`Something2`，并`nth-child(5)`选择`something3`。这对我来说太多了！

```
<div id="navigation">
    <a href="#">Something</a> <br />
    <a href="#">Something2</a> <br />
    <a href="#">Something3</a> <br />
</div>

<script>
$('#navigation').find(">:nth-child(1)").css("font-weight", "bold");
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T06:43:02.953

`:nth-child(1)` 应该选择第二个元素，因为您传入的索引是从零开始的。

问题是您的选择器包含`<br />`标签，这是不期望的（从我的角度来看）。

HTML：

```
<div id="navigation">
    <a href="#">Something</a> <br />
    <a href="#">Something2</a> <br />
    <a href="#">Something3</a> <br />
</div>​ 
```

JavaScript：

```
$('#navigation').children().not('br').eq(1).css("font-weight", "bold");​ 
```

[**现场演示**](http://jsfiddle.net/tZDnp/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:44:01.733

nth-child 选择器起初有点令人困惑，因为它是 parent 的 nth-child，而不仅仅是与 parent 的选择器匹配的 nth-child，选择器与该选择器的位置无关。

要获得所需的 div，请像这样执行 3n+1：

```
$('#navigation:nth-child(3n+1)').css("font-weight", "bold"); 
```

# java - 如何从文本文件存储到数组行标记？

> ID：13785328
> 
> 赞同：2
> 
> 时间：2012-12-09T06:40:38.520
> 
> 标签：java

我有一个包含以下内容的文本文件：

```
First Name : Javier Last Name : Smith E-mail : smith@.com Password: jsmith Date of Birth: Jan 1, 1987

First Name : Jade Last Name : Tux E-mail : nicholson@.com Password: jade123 Date of Birth: Jan 1, 1954

First Name : Bruce Last Name : Porto E-mail : bruce_porto@.com Password: br11 Date of Birth: Feb 25, 1946 
```

我想在第一行获取字符串 Javier、Smith、smith@.com、jsmith 等等，并将这些字符串存储在 person 类型（字符串、字符串、字符串、字符串）的数组列表中，并对每一行执行相同操作。

到目前为止，这是我的代码：

```
try
{
    searchUser = new Scanner(new FileInputStream("src/users.txt")).useDelimiter(":");
    String storeFirst = "", storeLast = "", storeEmail = "", storePassword = "";
    usersArray = new ArrayList<Person>();
    String line = null;

    while(searchUser.hasNextLine())
    {
        line = searchUser.nextLine();
            storeFirst = searchUser.next();
        storeLast = searchUser.next();
        storeEmail = searchUser.next();
        storePassword = searchUser.next();
        line = searchUser.nextLine();

        usersArray.add(new Person(storeFirst, storeLast, storeEmail, storePassword));

        for(Person ae : usersArray)
        {
            System.out.println(ae.toString());
        }
        System.out.println(storeFirst);
        System.out.println(storeLast);
        System.out.println(storeEmail);
        System.out.println(storePassword);

    }
    searchUser.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:47:02.533

更改您的 while 循环以首先读取和填充数组，然后在外部打印循环：

```
 while(searchUser.hasNextLine()){
  //read the tokens first ignoring tag tokens
  searchUser.next();//ignore "First Name"
  storeFirst = searchUser.next().split(" ")[0];//split the 3 words and take 1st
  storeLast = searchUser.next().split(" ")[0];//split the 2 words and take 1st
  storeEmail = searchUser.next().split(" ")[0];//split the 2 words and take 1st
  storePassword = searchUser.next().split(" ")[0];//split the 2 words and take 1st
  //read and ignore remaining text including the new line character in the end
  searchUser.nextLine();

  Person person = new Person(storeFirst, storeLast, storeEmail, storePassword);
  usersArray.add(person);
} 
```

现在打印代码为：

```
 for(Person ae : usersArray){
   System.out.println(ae.toString());
 } 
```

# html - 为什么图标在ie6中移到顶部？

> ID：13785333
> 
> 赞同：0
> 
> 时间：2012-12-09T06:41:14.677
> 
> 标签：html, css, internet-explorer, internet-explorer-6

为什么ie6中的图标移到顶部
它在其他浏览器中显示正常但在ie6中没有，发生了什么
如何解决这个问题？
谁能告诉我如何编写演示中显示的更好的代码结构？
演示： http: [//linjuming.pydra.org/leb/ie6_cw/index.html](http://linjuming.pydra.org/leb/ie6_cw/index.html)
![在此处输入图像描述](../Images/b3fe18050e871a5ef4919557132de2f2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:49:33.953

尝试使用`display: inline-block;`而不是`display: inline;`

```
.summary .grade_world {
    display: inline-block; <------- Here
    float: left;  <------ You don't need this
    background: url(grade_world.png) no-repeat scroll 0 0 transparent;
    height: 19px;
    width: 82px;
    position: relative; 
    top: 3px;
} 
```

# php - MySQL使用具有计算字段的相关子查询插入重复键更新的选择数据

> ID：13785334
> 
> 赞同：0
> 
> 时间：2012-12-09T06:42:09.207
> 
> 标签：php, mysql

1.emp_ot表**用于** 定义员工在特定时期内可以做的最大ot hours

2\. **daily_attend**描述实际发生的事情

3.我的表格缩短形式如下

```
mysql> select punchDate,empNO,ot from daily_attend;
+------------+--------+----------+
| punchDate  | empNO  | ot       |
+------------+--------+----------+
| 2012-02-20 | 000123 | 02:00:00 |
| 2012-02-02 | 000123 | 01:00:00 |
| 2012-02-01 | 000126 | 01:00:00 |
| 2012-02-01 | 000123 | 01:00:00 |
+------------+--------+----------+
4 rows in set (0.01 sec)

mysql> select permitId,permitMonth,empNo,dayFrom,dayTO,permitOt from 
emp_ot;
+----------+-------------+--------+------------+------------+----------+
| permitId | permitMonth | empNo  | dayFrom    | dayTO      | permitOt |
+----------+-------------+--------+------------+------------+----------+
|        1 |          02 | 000123 | 2012-02-01 | 2012-02-10 | 02:00:00 |
|        2 |          02 | 000123 | 2012-02-20 | 2012-02-25 | 03:00:00 |
|        3 |          02 | 000126 | 2012-02-01 | 2012-01-10 | 02:00:00 |
|        4 |          03 | 000123 | 2012-03-01 | 2012-03-10 | 05:00:00 |
+----------+-------------+--------+------------+------------+----------+
4 rows in set (0.00 sec) 
```

4.在这里我想更新**emp_ot.workedOt**以了解员工在每个**permitId**下工作了多少小时

前任：

```
+----------+------------+----------+----------+
| permitId |  empNo     | workedOt | permitOt |
+----------+----------+----------+----------+
|        1 |  000123    | 02:00:00 | 02:00:00 |
|        2 |  000123    | 02:00:00 | 03:00:00 |
|        3 |  000126    | 01:00:00 | 02:00:00 |
|        4 |  000123    | 00:00:00 | 05:00:00 |
+----------+------------+----------+----------+ 
```

5.我正在使用 mysql 事件，它在每天 00:00:01 驱动，因为表应该自动更新而不会弄乱旧数据

6.我的尝试如下：

```
 DROP EVENT IF EXISTS make_emp_ot;

    DELIMITER |

    CREATE EVENT make_emp_ot

        ON SCHEDULE EVERY 1 DAY STARTS 
TIMESTAMP(CURRENT_DATE,'00:00:01')

        DO

          BEGIN 

        INSERT INTO emp_ot( permitMonth,empNo, dayFrom, dayTo, workedOt)

             SELECT  o.permitId,EXTRACT(MONTH FROM CURRENT_DATE)AS 
permitMonth ,o.empNo,'','',(
               SELECT ifnull( SEC_TO_TIME(SUM(TIME_TO_SEC(d.ot))) 
,'00:00:00')  

               FROM  daily_attend d

               WHERE d.punchDate BETWEEN o.dayFrom  AND o.dayTo
               GROUP BY o.empNo)AS ot

             FROM emp_ot o

             LEFT JOIN daily_attend d on o.empNo=d.empNo

             WHERE o.permitMonth=EXTRACT(MONTH FROM CURRENT_DATE)
          ON DUPLICATE KEY UPDATE

          workedOt=VALUES(workedOt) ;
    END; |

    DELIMITER ; 
```

7.我怀疑有坏表加入，实际上我不想插入部分，如何只使用更新部分？

8.请帮我纠正这些事情。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:58:41.953

1.  > 我正在使用每天 00:00:01 驱动的 mysql 事件，因为表应该自动更新而不会弄乱旧数据

    您是否考虑过使用[触发器](http://dev.mysql.com/doc/en/triggers.html)？

2.  > 我怀疑有坏表加入

    `INSERT ... ON DUPLICATE KEY UPDATE`你的说法有很多问题：

    *   您在该部分中仅指定了五列`INSERT`，但`SELECT`返回六列（我怀疑您不打算这样做`SELECT permitId`；

    *   空字符串`''`不是插入`dayFrom`和`dayTo`列的有效日期文字（假设它们是 MySQL 的`DATE`类型）；

    *   您的`GROUP BY`子查询内部没有多大意义，因为外部查询只需要一条记录：您应该将其记录集限制为匹配`empNo`并删除其`GROUP BY`子句（所有行将由聚合函数隐式分组）；

    *   由于您有相关的子查询，因此在外部查询中加入表是不必要且错误的（但是，您可以通过使用这样的联接然后对外部查询进行分组，从而在没有相关子查询的情况下获得相同的结果，这将提高性能）；

    *   目前尚不清楚您是否`UNIQUE`定义了适当的键以使`ON DUPLICATE KEY UPDATE`部件按预期运行。

    > 实际上我不想插入部分，如何只使用更新部分？

    使用`UPDATE`代替`INSERT`：

    ```
    UPDATE emp_ot e
    SET    permitOt := (
             SELECT IFNULL(SEC_TO_TIME(SUM(TIME_TO_SEC(d.ot))),0)
             FROM   daily_attend d
             WHERE  d.empNo = e.empNo
                AND d.punchDate BETWEEN e.dayFrom AND e.dayTO
           )
    WHERE  permitMonth = EXTRACT(MONTH FROM CURRENT_DATE) 
    ```

    在[sqlfiddle](http://sqlfiddle.com/#!2/b9744/1)上查看。

# asp.net - 在 ASP.NET 网页中显示动态内容（来自数据库）的最佳方式

> ID：13785336
> 
> 赞同：0
> 
> 时间：2012-12-09T06:42:18.810
> 
> 标签：asp.net, html, c#-4.0

我想显示我的数据库表的一行内容，如下图所示。表格有照片和描述栏。我还想要图像中提到的两个按钮来执行某些操作。我的数据库表有大约 100 多条记录。所以在我的网页中，我想在运行时显示如下所示的 100 帧，因为将来这条记录可能会上升到 1000。

![在此处输入图像描述](../Images/bc1137dbcf0d698d360e5c5e50acc482.png)

我是 Web 应用程序开发的新手。任何人都建议我使用 ASP.NET 实现我的目标的最佳 GUI 控件。任何教程或示例链接都会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:46:28.900

首先，您使用该设计创建一个用户控件，正如我在此处看到的那样。

然后，您在转发器中使用此用户控件并将数据库参数传递给用户控件以进行正确的渲染。另外您可以使用和DataView 相同的方式。

## 工作示例

自定义控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ShowData.ascx.cs" Inherits="Dokimes_StackOverFlow_ShowData" %>

<asp:Literal runat="server" ID="txtTheID" EnableViewState="false" />

<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />

<hr /><br /> 
```

以及背后的代码：

```
public partial class Dokimes_StackOverFlow_ShowData : System.Web.UI.UserControl
{
    public int cValueID = -1;

    protected void Page_Load(object sender, EventArgs e)
    {
        txtTheID.Text = cValueID.ToString();
    }

    protected void Button1_Click(object sender, EventArgs e)
    {

    }
} 
```

以及使用它的主页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>    
        <asp:Repeater ID="Repeater1" runat="server">
            <ItemTemplate>
                <uc1:ShowData ID="ShowData1" runat="server" cValueID="<%# GetID(Container.DataItem) %>" />          
            </ItemTemplate>
        </asp:Repeater>    
    </div>    
    </form>
</body>
</html> 
```

和背后的代码

```
public partial class Dokimes_StackOverFlow_ShowRepeatedData : System.Web.UI.Page
{
    List<int> oMainIds = new List<int>();

    override protected void OnInit(EventArgs e)
    {
        for (int i = 0; i < 10; i++)
        {
            oMainIds.Add(i);
        }

        Repeater1.DataSource = oMainIds;
        Repeater1.DataBind();

        base.OnInit(e);
    }

    protected void Page_Load(object sender, EventArgs e)
    {
    }

    public int GetID(object oItem)
    {
        return (int)oItem;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:48:01.110

您可以使用[listview](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)控件，因为它支持自定义格式。中继器是第二个选项，但列表视图比中继器具有更多功能。

# java - BufferedWriter 不写第一行文本

> ID：13785337
> 
> 赞同：0
> 
> 时间：2012-12-09T06:42:27.060
> 
> 标签：java, file, text, merge, bufferedwriter

我正在将两个文本文件分别与`123456`它们`abcdefg`自己的行合并。我遇到的现象是`23456abcde`在同一行上创建的文件，因此与我在此处键入的完全一样。

我的问题是

1.  为什么没有`1`从第一个文件写入
2.  他们为什么不在自己的路线上。
3.  为什么不写'fg'。（七行文本数据，但只有六次写入，因为七次写入将输出“23456”而根本没有字母数字字母）。

.

```
public static String mergeRecords(String in1, String in2, String out) {
    BufferedReader br1 = null;
    BufferedReader br2 = null;
    BufferedWriter bw1 = null;

    try{
        FileReader fr1 = new FileReader(in1);
        FileReader fr2 = new FileReader(in2);
        br1 = new BufferedReader(fr1);
        br2 = new BufferedReader(fr2);
        bw1 = new BufferedWriter(new FileWriter(out));
        ////File Writing
        while(!(br1.readLine()==null)||(br2.readLine()==null)){
            //alternating between the two filles
            if((f%2)==0){
                bw1.write(br1.read());
                bw1.write(br1.readLine());
                bw1.write(br1.readLine());
                bw1.write(br1.readLine());
                bw1.write(br1.readLine());
                bw1.write(br1.readLine());
            }
            else{
                bw1.write(br2.read());
                bw1.write(br2.readLine());
                bw1.write(br2.readLine());
                bw1.write(br2.readLine());
                bw1.write(br2.readLine());
                bw1.write(br2.readLine());
            }
            /////
            //File ALternator Value
            f++;
        }
        bw1.close();
    }
    catch(IOException iox){
    }
    return "'mergeRecords' not yet implemented";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T06:54:51.590

问题是：

```
 while(!(br1.readLine()==null)||(br2.readLine()==null)){ 
```

消耗 br1 的第一行。它不会评估第二个语句，因为第一个语句已经为真。你从来没有对那条线做任何事情，所以它丢失了。

# java - 文本区域或选项窗格中的两列

> ID：13785339
> 
> 赞同：1
> 
> 时间：2012-12-09T06:42:46.593
> 
> 标签：java, swing, jtextarea, joptionpane

例如，我需要制作两列：

```
Item Name          Item Price          Item ID
Hello              42.25               10041
Another Item       822.00              12405
...                ...                 ... 
```

有什么我可以做两列的吗？它可以在 a`JTextArea`或 inside `JOptionPane.showMessageDialog`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:29:01.927

你可以这样做

```
 StringBuilder builder = new StringBuilder() ;
        builder.append("<html><table border=1><tr><td>Item Name</td><td>Item Price</td><td>Item Code</td></tr>");
        for( Item item_ : itemList ) {
            builder.append("<tr><td>");
            builder.append(item_.getItemName());
            builder.append("</td><td>");
            builder.append(item_.getItemPrice());
            builder.append("</td><td>");
            builder.append(item_.getItemID());
            builder.append("</td></tr>");
        }
        builder.append("</table></html>");
        JOptionPane.showMessageDialog(parentDialog,
                builder.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:09:53.333

你应该使用[`JTable`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)，因为使用它会更好

但是，即使你想这样做，你也可以这样做

```
jTextArea.setText("Items Name\t\tItem Price\t\tItem ID\n");  
jTextArea.append("Hello\t\t42.25\t10041\t\t?\n");  
jTextArea.append("Another Item\t\t822.00\t\t12405\t?\n"); 
```

# php - 访问 stdClass PHP 的属性

> ID：13785341
> 
> 赞同：0
> 
> 时间：2012-12-09T06:43:02.443
> 
> 标签：php, json

我正在向 Google 的反向地理编码系统发出请求，它们返回一个大型 JSON 对象，我似乎无法访问这些属性。响应看起来像这样：

```
{
    "results" : [
        "address_components" : [
             {
                 "long_name" : "123",
                 "short_name" : "123",
                 "types" : [ "street_number" ]
             },
             { 
                 etc.
             }
         ],
        "formatted_address" : "123 Broadway, New York City, NY 10002, USA"
    ]
} 
```

解码后它看起来像这样：

```
stdClass Object ( 
     [results] => Array ( 
         [0] => stdClass Object (  
             [address_components] => Array ( 
                 [0] => stdClass Object ( 
                     [long_name] => 123 
                     [short_name] => 123 
                     [types] => Array ( [0] => street_number ) 
                 )
             )
         ) 
         [formatted_address] => 123 Broadway, New York City, NY 10002, USA
     )
 ) 
```

如何访问 [formatted_address] 属性？我试过`$geoCode->["results"]->formatted_address`了，但没有返回值。我被难住了，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:48:29.927

尝试

```
$geoCode->results[0]->formatted_address 
```

# javascript - 如何根据选择的选项执行 jquery 代码

> ID：13785348
> 
> 赞同：1
> 
> 时间：2012-12-09T06:44:30.713
> 
> 标签：javascript, jquery, html, jsfiddle

我[这里有一个 jsfiddle](http://jsfiddle.net/7sARw/8/)

请按照以下步骤使用小提琴中的小应用程序：

1.  单击“打开网格”链接并选择一个编号按钮。下面会出现一堆字母按钮。如果您开始选择答案按钮，那么它们会变为绿色，并且在上面的“答案数量”文本框中将开始计算您打开了多少按钮。

2.  但是，如果您取消选择所有答案按钮，从而没有打开任何答案按钮，则上面的文本框不会显示`0`，而是显示`1`。

这是因为下面的代码：

```
var container = $btn.closest(".optionAndAnswer");
// here the zero gets assigned
var answertxt = $(".answertxt", container);
var numberison = $(".answerBtnsOn", container).length;
if (answertxt.val() == 1 && numberison == 0) {
    numberison = 1;
}
answertxt.val(numberison); 
```

我在 jsfiddle 的大写字母中包含了一条注释，以说明该代码块在小提琴中的位置。

我想要做的是，如果从网格中选择的选项是“真或假”或“是或否”，则执行上面的代码，如果没有突出显示答案按钮，则文本框值为 1。如果是如果没有选择任何其他选项，则文本框值应为 0。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:19:48.803

修复了它，如下所示，我正在检查所选输入类型是否为真/假是/否，并由此确定要运行的代码：

```
// ... 
var maxRowValue = $('.gridTxt', container).val();
if (maxRowValue === 'True or False' || maxRowValue === 'Yes or No') {
    if (answertxt.val() == 1 && numberison == 0) {
        numberison = 1;
    }
}
answertxt.val(numberison); 
```

# python - Python 概率

> ID：13785349
> 
> 赞同：3
> 
> 时间：2012-12-09T06:44:33.657
> 
> 标签：python, math, probability

我们有一个六面骰子，面数从 1 到 6。在第 n 次掷骰上第一次看到 1 的概率随着 n 的增加而降低。我想找到最小的掷骰数，以使该概率小于某个给定的限制。

```
def probTest(limit):
    prob = 1.0
    n = 1
    while prob > limit:
        prob = (1/6)**n
        n += 1        
    return n-1 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T06:52:23.620

在第 n 次掷骰的概率是 5/6^(n-1)*1/6，而不是 1/6^n。*1/6^n 是在所有*n 卷
上滚动一个的概率。

 *前 n-1 个掷骰各有 5/6 的机会不是一个。
第 n 次滚动有 1/6 的机会成为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T14:08:39.763

正确的是：prob = (5.0/6)**(n-1)*1/6.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:02:49.703

谢谢。请考虑其他因素。

probTest(25/216.0) 返回 4 而不是正确的结果 n=3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-13T05:33:46.750

获得一次成功所需的伯努利试验次数的概率分布`X`，遵循几何分布（[https://en.wikipedia.org/wiki/Geometric_distribution](https://en.wikipedia.org/wiki/Geometric_distribution) ），我们可以直接用以下公式`X=n`计算相应的概率：`p`

```
p = 1./6 # prob of successes
geom_prob = []
for n in range(1,25):
    geom_prob.append((1-p)**(n-1)*p) 
print geom_prob 
# [0.16666666666666666, 0.1388888888888889, 0.11574074074074076, 0.09645061728395063, 0.08037551440329219, 0.06697959533607684, 0.05581632944673069, 0.04651360787227558, 0.038761339893562986, 0.032301116577969156, 0.02691759714830763, 0.022431330956923026, 0.018692775797435855, 0.015577313164529882, 0.012981094303774901, 0.010817578586479085, 0.009014648822065905, 0.0075122073517215875, 0.006260172793101323, 0.005216810660917769, 0.0043473422174314744, 0.003622785181192896, 0.0030189876509940797, 0.002515823042495067]
import matplotlib.pyplot as plt
plt.plot(geom_prob)
plt.xlabel('n')
plt.ylabel('probability')
plt.title('Probability of getting first head on nth roll of a die')
plt.show() 
```

[![在此处输入图像描述](../Images/93da49d7d5e903471a6576201323a0d5.png)](https://i.stack.imgur.com/mef3j.png)

我们也可以使用模拟来找到概率，如下所示：

```
import numpy as np
sim_geom = np.random.geometric(p=p, size=1000)
import seaborn as sns   
sns.distplot(sim_geom)
plt.show() 
```

[![在此处输入图像描述](../Images/ae838d7a0d898952b9d9813d327f804a.png)](https://i.stack.imgur.com/i7ZUv.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-09T11:52:50.503

```
def probTest(limit):
    n=1
    prob = 1.0
    while prob > limit:
        prob = prob * (1/6.0)*((5/6.0)**n-1)
        n +=1
    return n-1 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-09T12:49:07.747

```
def probTest(limit):
    prob = 1.0
    n = 1
    while prob > limit:
        prob =  5/6^(n-1)*1/6.0
        n += 1        
    return n 
```*

# java - equals 和 hashCode：Objects.hash 方法是否损坏？

> ID：13785353
> 
> 赞同：6
> 
> 时间：2012-12-09T06:45:50.297
> 
> 标签：java, equals, hashcode

我正在使用 Java 7，并且下面有以下类。我正确地实现了`equals`，`hashCode`但问题是在下面的 main 方法中返回却`equals`为两个对象返回了相同的哈希码。我可以让更多的眼睛来看看这门课，看看我在这里做错了什么吗？`false``hashCode`

**更新：**`Objects.hash`我用自己的哈希函数替换了调用该方法的行： `chamorro.hashCode() + english.hashCode() + notes.hashCode()`. 它返回一个不同的哈希码，这是`hashCode`当两个对象不同时应该做的。`Objects.hash`方法坏了吗？

对你的帮助表示感谢！

```
import org.apache.commons.lang3.StringEscapeUtils;

public class ChamorroEntry {

  private String chamorro, english, notes;

  public ChamorroEntry(String chamorro, String english, String notes) {
    this.chamorro = StringEscapeUtils.unescapeHtml4(chamorro.trim());
    this.english = StringEscapeUtils.unescapeHtml4(english.trim());
    this.notes = notes.trim();
  }

  @Override
  public boolean equals(Object object) {
    if (!(object instanceof ChamorroEntry)) {
      return false;
    }
    if (this == object) {
      return true;
    }
    ChamorroEntry entry = (ChamorroEntry) object;
    return chamorro.equals(entry.chamorro) && english.equals(entry.english)
        && notes.equals(entry.notes);
  }

  @Override
  public int hashCode() {
    return java.util.Objects.hash(chamorro, english, notes);
  }

  public static void main(String... args) {
    ChamorroEntry entry1 = new ChamorroEntry("&Aring;guigan", "Second island south of Saipan. &Aring;guihan.", "");
    ChamorroEntry entry2 = new ChamorroEntry("&Aring;guihan", "Second island south of Saipan. &Aring;guigan.", "");
    System.err.println(entry1.equals(entry2)); // returns false
    System.err.println(entry1.hashCode() + "\n" + entry2.hashCode()); // returns same hash code!
  }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T07:00:45.313

其实，你碰巧触发了纯属巧合。:)

`Objects.hash`碰巧是通过连续添加每个给定对象的哈希码然后将结果乘以 31 来实现的，而`String.hashCode`对其每个字符也是如此。巧合的是，您使用的“English”字符串中的差异与“Chamorro”字符串中的相同差异发生在距字符串末尾的恰好多一个偏移处，因此一切都完美地抵消了。恭喜！

尝试使用其他字符串，您可能会发现它按预期工作。正如其他人已经指出的那样，严格来说，这种效果实际上并没有错，因为即使哈希码表示的对象不相等，也可能正确地发生冲突。如果有的话，尝试找到更有效的哈希可能是值得的，但我认为在现实情况下几乎没有必要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T06:54:25.287

不要求不相等的对象必须具有不同的 hashCode。相等的对象应该具有相等的 hashCodes，但不禁止哈希冲突。 `return 1;` 如果不是很有用，那将是 hashCode 的完全合法的实现。

毕竟，只有 32 位可能的哈希码和无限数量的可能对象 :) 有时会发生冲突。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T07:37:33.337

HashCode 是 32 位 int 值，总是有可能发生冲突（两个对象的哈希码相同），但它很少/巧合。**你的例子是非常巧合的例子之一**。这是解释。

当您调用 时`Objects.hash`，它会在内部`Arrays.hashCode()`使用如下逻辑调用：

```
public static int hashCode(Object a[]) {
    if (a == null)
        return 0;
    int result = 1;
    for (Object element : a)
        result = 31 * result + (element == null ? 0 : element.hashCode());
    return result;
} 
```

对于您的 3 参数 hashCode，结果如下：

```
 31 * (31 * (31 *1 +hashOfString1)+hashOfString2) + hashOfString3 
```

对于您的第一个对象。单个字符串的哈希值是：

> 查莫罗 --> 1140493257 英文 --> 1698758127 注释 --> 0

对于第二个对象：

> 查莫罗 --> 1140494218 英文 --> 1698728336 注释 --> 0

**如果您注意到，两个对象中哈希码的前两个值是不同的。**

但是当它计算最终的哈希码时：

```
 int hashCode1 = 31*(31*(31+1140493257) + 1698758127)+0;
  int hashCode2 = 31*(31*(31+1140494218) + 1698728336)+0; 
```

**巧合的是，它会产生相同的哈希码`1919283673`，因为`int`它是以 32 位存储的。**

验证您自己使用以下代码段的理论：

```
 public static void main(String... args) {
    ChamorroEntry entry1 = new ChamorroEntry("&Aring;guigan", 
                         "Second island south of Saipan. &Aring;guihan.", "");
    ChamorroEntry entry2 = new ChamorroEntry("&Aring;guihan", 
                         "Second island south of Saipan. &Aring;guigan.", "");
    System.out.println(entry1.equals(entry2)); // returns false
    System.out.println("&Aring;guigan".hashCode());
    System.out.println("&Aring;guihan".hashCode());
    System.out.println("Second island south of Saipan. &Aring;guihan.".hashCode());
    System.out.println("Second island south of Saipan. &Aring;guigan.".hashCode());
    System.out.println("".hashCode());
    System.out.println("".hashCode());
    int hashCode1 = 31*(31*(31+1140493257) + 1698758127)+0;
    int hashCode2 = 31*(31*(31+1140494218) + 1698728336)+0;
    System.out.println(entry1.hashCode() + "\n" + entry2.hashCode()); 
    System.out.println(getHashCode(
                    new String[]{entry1.chamorro, entry1.english, entry1.notes}) 
                    + "\n" + getHashCode(
                    new String[]{entry2.chamorro, entry2.english, entry2.notes})); 
    System.out.println(hashCode1 + "\n" + hashCode2); // returns same hash code!
  }

    public static int getHashCode(Object a[]) {
        if (a == null)
            return 0;
        int result = 1;
        for (Object element : a)
            result = 31 * result + (element == null ? 0 : element.hashCode());
        return result;
    } 
```

如果你使用一些不同的字符串参数，希望它会导致不同的hashCode。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T06:55:41.513

两个不相等的对象不必具有不同的哈希值，重要的是两个相等的对象具有相同的哈希值。

我可以像这样实现 hashCode() ：

```
public int hashCode() {
    return 5;
} 
```

它将保持正确（但效率低下）。

# php - preg_replace PHP 不工作？

> ID：13785358
> 
> 赞同：2
> 
> 时间：2012-12-09T06:47:31.843
> 
> 标签：php, preg-replace

为什么 preg_replace 在这种情况下不返回任何东西？我整晚都在试图弄清楚。

**这是 $postContent 中包含的文本：**

测试这个。这是一个报价： [Quote]1[/Quote] 报价现已结束。

**这是我的代码：**

```
echo "Test I'm Here!!!";
                    $startQuotePos = strpos($postContent,'[Quote]')+7;
                    $endQuotePos = strpos($postContent,'[/Quote]');
                    $postStrLength = strlen($postContent);
                    $quotePostID = substr($postContent,$startQuotePos,($endQuotePos-$postStrLength));
                    $quotePattern = '[Quote]'.$quotePostID.'[/Quote]';
                    $newPCAQ = preg_replace($quotePattern,$quotePostID,$postContent);
                    echo "<br />$startQuotePos<br />$endQuotePos<br />$quotePostID<br />Qpattern:$quotePattern<br />PCAQ: $newPCAQ<br />"; 
```

**这是我的结果：**

测试我来了！！！

35

36

1

Qpattern:[报价]1[/报价]

PCAQ：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:07:19.550

For `preg_replace()`,`"[Quote]"`匹配以下之一的单个字符：*q*、*u*、*o*、*t*或*e*。

如果你想`preg_replace()`找到文字`"[Quote]"`，你需要将它转义为`"\[Quote\]"`. [preg_quote()](http://php.net/manual/en/function.preg-quote.php)是您应该使用的函数：`preg_quote("[Quote]")`.

您的代码也是错误的，因为正则表达式应该以分隔符开头。在`preg_replace()`我在答案末尾显示的呼叫中，即*@*，但您可以使用另一个字符，只要它不出现在正则表达式中，并且它也在正则表达式的末尾使用。（在我的例子中，*@*后跟一个模式修饰符，而模式修饰符是模式分隔符后唯一允许的字符。）

如果要使用`preg_replace()`，首先找到 where is 是没有意义`"[Quote]"`的。我宁愿使用以下代码：

```
$newPCAQ = preg_replace('@\[Quote\](.+?)\[/Quote\]@i', '\1', $postContent); 
```

我将解释我正在使用的正则表达式：

*   最后`'@i'`是说要`preg_replace()`忽略小写和大写字符之间的区别；该字符串可以包含`"[QuOte]234[/QuOTE]"`，并且该子字符串将与正则表达式相同。

*   我在中使用问号`"(.+?)"`来避免`".+"`过于贪婪，并匹配过多的字符。没有它，正则表达式可以在单个匹配中包含一个子字符串，`"[Quote]234[/Quote] Other text [Quote]475[/Quote]"`而这应该作为两个子字符串匹配：`"[Quote]234[/Quote]"`和`"[Quote]475[/Quote]"`.

*   `'\1'`我用作替换字符串的字符串是说使用`preg_replace()`从子组匹配的字符串`"(.+?)"`作为替换。换句话说，调用`preg_replace()`是删除`"[Quote]"`，并`"[/Quote]"`围绕其他文本。（它不会替换`"[/Quote]"`与 不匹配的内容`"[Quote]"`，例如在 中`"[/Quote] Other text [Quote]"`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T06:51:28.683

您的正则表达式必须以“/”开头和结尾：

```
$quotePattern = '/[Quote]'.$quotePostID.'[/Quote]/'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T07:10:51.500

[preg_replace](http://php.net/preg-replace)的返回值看不到任何内容的原因是它已返回`NULL`（*有关详细信息，请参阅手册链接*）。这是发生错误时 preg_replace 返回的内容，这就是您的情况。的字符串值`NULL`是一个**长度为零的字符串**。您可以通过使用[var_dump](http://php.net/var-dump)来查看这一点，它会告诉您 preg_replace 返回 NULL。

您的正则表达式无效，因此 PHP 将抛出一个`E_WARNING`级别错误`Warning: preg_replace(): Unknown modifier '['`

这有几个原因。首先，您需要为您的正则表达式指定一个开始和结束分隔符，因为 preg_* 函数使用[PCRE 样式的](http://php.net/pcre)正则表达式。其次，您还想考虑在您的模式（*没有分隔符）上使用*[preg_quote](http://php.net/preg-quote)以确保它被正确转义。

 *```
$postContent = "Test this. Here is a quote: [Quote]1[/Quote] Quote is now over.";
/* Specify a delimiter for your regular expression */
$delimiter = '@';

$startQuotePos = strpos($postContent,'[Quote]')+7;
$endQuotePos = strpos($postContent,'[/Quote]');
$postStrLength = strlen($postContent);
$quotePostID = substr($postContent,$startQuotePos,($endQuotePos-$postStrLength));
/* Make sure you use the delimiter in your pattern and escape it properly */
$quotePattern = $delimiter . preg_quote("[Quote]{$quotePostID}[/Quote]", $delimiter) . $delimiter;
$newPCAQ = preg_replace($quotePattern,$quotePostID,$postContent);
echo "<br />$startQuotePos<br />$endQuotePos<br />$quotePostID<br />Qpattern:$quotePattern<br />PCAQ: $newPCAQ<br />"; 
```

**输出将是：**

35

36

1

Qpattern:@[Quote]1[/Quote]@

PCAQ：测试一下。这是一个报价： 1 报价现已结束。*

# php - PHP，管理员用户系统

> ID：13785359
> 
> 赞同：0
> 
> 时间：2012-12-09T06:47:35.280
> 
> 标签：php

我想知道你是否认为这是可能的：好的，所以我有一个存储用户名的数据库，我想回显一个名为 admins.php 的文件中的管理员，如果他们与数据库中的用户名匹配，到目前为止我得到了：

```
admins.php;
$admins = array("username","username2","username3"); 
```

和

```
$users="SELECT username from usrsys";
$query_users=mysql_query($users);
while loop here. 
```

while 循环应该有望回显与 admins.php 文件匹配的用户。我想我应该使用（inarray（））之类的东西，但我真的不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:47:42.977

您绝对应该`IN`在 SQL 中使用子句来执行此操作。从表中选择所有内容以便在 PHP 中确定它是否包含您要查找的用户名是没有意义的，而且非常浪费。你能想象如果你有一个有 100 万用户的表并且你需要查看其中两个是否在该列表中会发生什么吗？您将要求您的 DBMS 将 100 万行返回给 PHP，以便您可以搜索每个名称，然后确定它们中的任何一个是否是您要查找的名称。您要求您的 DBMS 做很多工作（发送表中的所有行），并且您还要求 PHP 做很多工作（将所有这些行存储在内存中并计算匹配），这是不必要的.

根据您的需要，有一个更有效和更快的解决方案。

首先，如果您只需要知道所有这些用户都存在于表中，那么`SELECT COUNT(username)`请改为使用，并且您的数据库将返回单行，其中包含在表中找到的行数的值。这样你就有了一个全有或全无的方法（如果这是你正在寻找的）。要么在表中找到 3 行，在数组中找到 3 个元素，要么没有。这也利用了您的表索引（您应该已正确索引）并意味着更快的结果。

```
$admins = array("username","username2","username3");
// Make sure you properly escape your data before you put in your SQL
$list = array_map('mysql_real_escape_string', $admins);
// You're going to need to quote the strings as well before they work in your SQL
foreach ($list as $k => $v) $list[$k] = "'$v'";
$list = implode(',', $list);
$users = "SELECT COUNT(username) FROM usrsys WHERE username IN($list)";
$query_users = mysql_query($users);
if (!$query_users) {
    echo "Huston we have a problem! " . mysql_error(); // Basic error handling (DEBUG ONLY)
    exit;
}
if (false === $result = mysql_fetch_row($query_users)) {
    echo "Huston we have a problme! " . mysql_error(); // Basic error handling (DEBUG ONLY)
}
if ($result[0] == count($admins)) {
    echo "All admins found! We have {$result[0]} admins in the table... Mission complete. Returning to base, over...";
} 
```

如果您确实想要所有数据，`COUNT`则从 SQL 中删除，您将简单地获取这些用户的所有行（*如果找到的话*）。

```
$admins = array("username","username2","username3");
// Make sure you properly escape your data before you put in your SQL
$list = array_map('mysql_real_escape_string', $admins);
// You're going to need to quote the strings as well before they work in your SQL
foreach ($list as $k => $v) $list[$k] = "'$v'";
$list = implode(',', $list);
$users = "SELECT username FROM usrsys WHERE username IN($list)";
$query_users = mysql_query($users);
if (!$query_users) {
    echo "Huston we have a problem! " . mysql_error(); // Basic error handling (DEBUG ONLY)
    exit;
}
// Loop over the result set
while ($result = mysql_fetch_assoc($query_users)) {
    echo "User name found: {$result['username']}\n";
} 
```

* * *

但是，我真的强烈建议您重新考虑使用旧的 ext/mysql API 与 PHP 中的 MySQL 数据库进行交互，因为它已被弃用并且在很长一段时间内一直不鼓励使用。我真的强烈建议您开始使用新的替代 API，例如 PDO 或 MySQLi，并查看手册中的指南以获取有关选择 API 的帮助。

例如，在 PDO 中，此过程对于准备好的语句和参数化查询将非常简单，因为您不必担心所有这些转义。

[PDOStatement::Execute 页面](http://php.net/pdostatement.execute)中有一个示例（**示例 #5**），它向您展示了如何将 IN 子句与准备好的语句一起使用...然后您可以在代码中的其他位置重用此语句，它提供了一个性能优势以及使您更难无意中将自己暴露于 SQL 注入漏洞。

```
// Connect to your database
$pdo = new PDO("mysql:dbname=mydb;host=127.0.0.1", $username, $password);

// List of admins we want to find in the table
$admins = array("username","username2","username3");

// Create the place holders for your paratmers
$place_holders = implode(',', array_fill(0, count($admins), '?'));

// Create the prepared statement
$sth = $dbh->prepare("SELECT username FROM usrsys WHERE username IN ($place_holders)");

// Execute the statement
$sth->execute($admins);

// Iterate over the result set
foreach ($sth->fetchAll(PDO::FETCH_ASSOC) as $row) {
    echo "We found the user name: {$row['username']}!\n";
} 
```

**您的 PHP 代码使用 PDO 甚至看起来好多了 :)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:36:56.803

尝试这个：

```
<?php
# include admins.php file that holds the admins array
include "admins.php";

# join all values in the admins array using "," as a separator (to use them in the sql statement)
$admins = join(",", $admins);

# execute the query
$result = mysql_query("
    SELECT username
    FROM usrsys
    WHERE username IN ($admins)
");

if ($result) {
    while ($row = mysql_fetch_array($result)) {
        echo $row["username"] . "<br>";
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T07:01:20.730

如果您正在寻找仅从数组中提取的语法，`users`那么`$admins`您可以使用以下内容：

```
$users="SELECT username FROM usrsys WHERE username IN ('".join("','",$admins)."')"; 
```

php 函数`JOIN`将在哪里打印`username,username2,username3`. 您生成的 MySQL 语句将如下所示：

```
SELECT username FROM usrsys WHERE username IN ('username','username2','username3') 
```

或者，如果您希望遍历您的`$query_vars`数组并将管理员与非管理员分开，那么您可以使用以下内容：

```
<?php
while($row = mysql_fetch_assoc($query_users)){
    if(in_array($row['username'],$admins)){
        //do admin stuff here
    }else{
        //do NON-admin stuff here
    }
}?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T07:06:30.537

只需包含 admins.php 文件并在循环中使用下一个构造：

```
while ($row = mysql_fetch_array($users)) {
if (in_array($users[0], $admins))
    echo $users[0];
} 
```

# javascript - 在 Javascript 中读取 YAML 文件

> ID：13785364
> 
> 赞同：16
> 
> 时间：2012-12-09T06:47:50.633
> 
> 标签：javascript, parsing, yaml

我正在尝试将 YAML 文件中的参数读入 Javascript。有什么好的图书馆可以做到这一点吗？

我已经尝试过这些库：[https](https://github.com/nodeca/js-yaml) ://github.com/nodeca/js-yaml和[http://code.google.com/p/javascript-yaml-parser/](http://code.google.com/p/javascript-yaml-parser/)

但是这两个库都只有在 YAML 以字符串形式给出时解析 YAML 的函数，而不是直接从 .yml 或 .yaml 文件中解析出来。是否有任何解析器从文件中读取 YAML 并将它们转换为 JS 对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-26T20:08:10.410

似乎很难找到在浏览器中使用 js-yaml 的好例子。可能是因为他们强调在 node.js 中使用解析器。

解析器位于[https://github.com/nodeca/js-yaml](https://github.com/nodeca/js-yaml)。使用 NPM 安装

```
npm install js-yaml 
```

并从 node_modules/js-yaml/bin 目录中获取 js-yaml.js 文件。

这是一个快速、简单的演示，它加载一个 YAML 文件，使用 js-yaml 将其解析为对象，然后（用于验证）它执行原生 JSON.stringify 将 JSON 转换为字符串，最后使用 jquery $.parseJSON验证生成的 JSON。

```
(function () {
"use strict";
    $(document).ready(function () {
        $.get('/common/resources/LessonContentsLv01Ln01.yml')
        .done(function (data) {
          console.log('File load complete');
          console.log(jsyaml.load(data));
          var jsonString = JSON.stringify(data);
          console.log(jsonString);
          console.log($.parseJSON(jsonString));
      });
    });
}()); 
```

和 HTML

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Read YAML</title>
                 <script src="//code.jquery.com/jquery-2.1.0.js">
        </script><script src='/vendor/js/js-yaml.js'>
        </script><script src='/test/readYaml.js'>
    </script>
</head>
<body>
</body>
</html> 
```

Github 仓库[https://github.com/nodeca/js-yaml](https://github.com/nodeca/js-yaml)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-09T07:04:27.007

[js-yaml](https://github.com/nodeca/js-yaml)可以。我通过谷歌搜索“node js yaml”找到了这一点，因为从 JavaScript 中的文件读取是使用 node.js（或类似的东西）在服务器端完成的，而不是从浏览器。

js-yaml 的自述文件开始

> 用法：js-yaml [-h] [-v] [-c] [-j] [-t] 文件
> 
> 位置参数：
> 
> 带有 YAML 文档的文件

这是一个非常有力的证据，它*确实*直接从文件中处理 YAML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T11:35:05.727

如果你想在浏览器中解析它，你可以在`script`标签中加载你想要解析的 yaml 文件，并使用 js 代码读取它的内容，这将为你提供字符串结果。如果你想在nodejs环境中解析yaml，你可以直接读取文件，也可以得到字符串。我不认为这是直接解析 yaml 或从字符串解析 yaml 的问题。

# java - 如何正确为 JasperReport 中的子报表提供参数

> ID：13785365
> 
> 赞同：2
> 
> 时间：2012-12-09T06:48:14.903
> 
> 标签：java, jasper-reports, subreport

我有一个包含子报表的报表模板；
在主报告中，我有一些参数也应该在子报告中可用。
主要报告参数定义如下：

```
<parameter name="PID" class="java.lang.Integer"/> 
```

在子报告中，我定义了具有相同名称的相同参数：

```
<parameter name="PID" class="java.lang.Integer"/> 
```

我为子报告提供了主报告的参数，如下所示：\

```
 <subreport>
            <reportElement x="0" y="0" width="555" height="50"/>
            <parametersMapExpression>
                 new HashMap($P{REPORT_PARAMETERS_MAP})
            </parametersMapExpression>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
            <subreportExpression class="java.lang.String"><![CDATA["subRPT.jasper"]]></subreportExpression>
     </subreport> 
```

但这抛出了这个：

```
SEVERE: null
net.sf.jasperreports.engine.JRRuntimeException: net.sf.jasperreports.engine.JRException: Incompatible java.lang.Integer value assigned to parameter PID in the subRPT dataset.
    at net.sf.jasperreports.engine.fill.JRFillSubreport.prepare(JRFillSubreport.java:711)
    at net.sf.jasperreports.engine.fill.JRFillElementContainer.prepareElements(JRFillElementContainer.java:329)
    at net.sf.jasperreports.engine.fill.JRFillBand.fill(JRFillBand.java:419)
    at net.sf.jasperreports.engine.fill.JRFillBand.fill(JRFillBand.java:378)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2035)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:760)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:270)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:128)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:946)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:845)
    at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:58)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
    at biorec.control.reporting$1.doInBackground(reporting.java:177) 
```

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:20:12.017

首先将子报表 JRXML 保存在 Jasper 服务器中，然后将相同的子报表保存在要使用的桌面中，然后从调色板中拖动子报表元素。

第1步：-

```
 Select "Use an existing report" option and select the same subreport 
```

下一个

```
 it will ask for database, if you are using the same database 
```

然后点击下一步按钮

```
 then it will ask for parameters , select all the parameter expression 
```

接下来

```
 choose "Store the directory name in  a parameter" option 
```

然后完成。

现在选择子报表，然后转到属性选项卡，它不会在 Ireport 中运行并选择“子报表表达式”，您必须在此处提供 Jasperserver 中的子报表的路径

```
 format "repo:/path_of_subreport in jasper". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:56:07.513

```
<subreportParameter name="PID">
    <subreportParameterExpression>
        <![CDATA[$P{PID}]]> 
    </subreportParameterExpression>
</subreportParameter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T18:50:54.200

大家好，
但问题在于我的 JasperReport 库和 iReport 之间的版本不匹配。
使用相同的版本解决了这个问题。

# jquery - 如何使用自动时间更改课程

> ID：13785375
> 
> 赞同：2
> 
> 时间：2012-12-09T06:49:44.443
> 
> 标签：jquery, html, css, slide

html

```
<ul class="slider">
   <li>Lipsum</li>
    <li>lipsum</li>
    <li>lipsum</li>
     <li>lipsum</li>
</ul> 
```

css

```
.active{
    color:#9c0;
} 
```

javascript (jquery)

```
$(document).ready(function(){
        $(".slider li:first-child").addClass("active");
        $("li").click(function () {
         $(".active").removeClass("active");
         $(this).addClass("active");

    });

}); 
```

在页面上加载第一个 li 激活类，单击每个 li 它的激活类并删除其他活动类。我希望班级自动更改间隔，例如幻灯片，我该如何实现。

[http://jsfiddle.net/awkTU/](http://jsfiddle.net/awkTU/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:19:46.280

这有帮助吗：

```
$(document).ready(function(){
        $(".slider li:first-child").addClass("active");
        setTimeout(autoAddClass, 1000);
});

function autoAddClass(){
    var next = $(".active").removeClass("active").next();
    if(next.length)
        $(next).addClass('active');
    else
        $('.slider li:first-child').addClass('active');
    setTimeout(autoAddClass, 1000);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T07:16:41.677

HTML：

```
<ul class="slider">
 <li>Hong Kong - Lorem ipsum dolor sit amet consectetur adipiscing...</li>
 <li>Hong Kong - Lorem ipsum dolor sit amet consectetur adipiscing...</li>
 <li>Hong Kong - Lorem ipsum dolor sit amet consectetur adipiscing...</li>
 <li>Hong Kong - Lorem ipsum dolor sit amet consectetur adipiscing...</li>
 <li>Hong Kong - Lorem ipsum dolor sit amet consectetur adipiscing...</li>
 <li>Hong Kong - Lorem ipsum dolor sit amet consectetur adipiscing...</li>
</ul>​ 
```

JavaScript：

```
$(document).ready(function() {

    // Cache all list items
    var $liCollection = $(".slider li");

    // Cache the first list item for later use
    var $firstListItem = $liCollection.first();

    // Give the first list item the active state
    $liCollection.first().addClass("active");

    // Each 500 ms
    setInterval(function() {

        // Get the active list item
        var $activeListItem = $(".active")

        // Remove its active state
        $activeListItem.removeClass("active");

        // Try to find the next list item
        var $nextListItem = $activeListItem.closest('li').next();

        // If the next list item (jQuery object) length property is 0
        // (this means that this list item was the last in the list)
        if ($nextListItem.length == 0) {

            // The next list item is actually the first list item
            $nextListItem = $firstListItem;
        }

        $nextListItem.addClass("active");
    }, 500);
});​ 
```

CSS：

```
.active{
    color:#9c0;
} 
```

[**现场演示**](http://jsfiddle.net/G7xzn/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T10:22:57.793

```
$(document).ready(function(){
    setInterval(function(){
if($("#last").hasClass('active'))
{
$("#last").removeClass('active');
$("#first").addClass('active');
}
$("li.active").next().addClass("active").prev().removeClass("active");
},2000);  
});
```

```
.active {
    color: blue;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<body>
<ul>
<li id="first" style="display:none"></li>
<li  class="active">1111</li>
<li>2222</li>
<li>3333</li>
<li id="last" >4444</li>
</ul>
<br>

<lable style="border:1px solid black;border-radius:5px;background-color:gray">class cycling through li elements</lable>

</body>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-26T05:44:51.637

只需添加一个**计数器**并使用`:eq()`选择器

```
var $item= $(".item");
$item.first().addClass("active");
var count = 0;
setInterval(function() {
    $(".item:eq("+count+")").removeClass("active");
    if (count < 2) {
        count++
    }else {
        count = 0
    }
    $(".item:eq("+count+")").addClass("active");
}, 1000); 
```

# jquery - 如何使用 jQuery 验证 JSF 照片上传

> ID：13785378
> 
> 赞同：1
> 
> 时间：2012-12-09T06:50:19.307
> 
> 标签：jquery, jsf, tomahawk

我正在尝试通过 jQuery validate 验证 JSF 照片上传，但它不起作用。形式 ：

```
<h:form id="uploadForm" name="uploadForm" enctype="multipart/form-data">
                <table>
                <tr>
                    <h:outputText for="file" value="Select Photo : " />
                    <t:inputFileUpload id="file1" name="file1" value="#{companyService.uploadedFile}" required="true" />
                    <h:message for="file" style="color: red;" />
                </tr>
                <tr>
                <td></td>
                <h:commandButton value="Upload" styleClass="add" action="#{companyService.uploadPhoto}" />
                    <h:message for="uploadForm" infoStyle="color: green;" errorStyle="color: red;" />
                </tr>
                </table>
 </h:form> 
```

脚本 ：

```
<script type="text/javascript">
$(document).ready(function(){
    //$('textarea').elastic();
    $("#uploadForm").validate({
        rules: {
            file1: {
                required: true,
                accept: "jpg|gif|png|jpeg"
            }
        },
        messages: {
            file1: "jpg,gif,png,jpeg extensions are allowed"
        }
    });
})
</script> 
```

我也导入了 jQuery 库...

# javascript - 以编程方式声明变量？

> ID：13785383
> 
> 赞同：4
> 
> 时间：2012-12-09T06:52:11.447
> 
> 标签：javascript

我正在尝试创建一堆这样的变量：

```
function l(){
    var a1 = 2,
        a2 = 4,
        a3 = 6,
        a4 = 8,
          .
          .
        a20 = 40;
} 
```

但这需要太多的线路，我正在寻找一种更聪明的方法。这就是我想出的：

```
function l(){
    for(var i=0; i<20; i++){
        var ("a"+i) = 2*i;
    }
} 
```

但它可能不起作用，~~如果它起作用（它不起作用），变量仍将在`for`范围内。~~有任何想法吗？

```
window["a"+i] or eval(...) 
```

这些不起作用，因为我不希望它们在全局范围内。

通常一个数组就可以了，但我只是在试验这在 JavaScript 中是否可行。也许将来我会遇到这样的事情。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-09T06:55:26.023

不要这样做。做。不是。做。这。**使用数组。**

* * *

*考虑到您以编程方式创建*它们时遇到的麻烦，您认为如何以编程方式*引用*它们？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T06:59:54.913

我想你最好使用一个数组，比如：

```
function l(){
    var a = [];
    for(var i=0; i<20; i++){
        a[i] = 2*i;
    }
} 
```

或者如果你真的想要一长串变量，试试这个。但它使用 eval()

```
function l(){
    var js = '';
    for(var i=0; i<20; i++){
        js += 'var a'+i+' = '+2*i+';'
    }
    eval (js);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T11:30:58.157

事实上，我认为使用对象是一个好主意。

```
var scope = {}
for (var i=1;i<=20;i++) {
  scope['a'+i] = 'stuff';   
} 
```

结果将是您拥有一个`scope`包含您想要的每个新创建变量的对象！

# jquery - jQuery 验证表单

> ID：13785394
> 
> 赞同：0
> 
> 时间：2012-12-09T06:55:22.843
> 
> 标签：jquery, jquery-validate

我是 jQuery 的新手.. 现在尝试学习和创建一个带有 jQ​​uery 验证的表单。然后，有人可以告诉我如何验证 IC 值。I/C 值需要 12 位数字，并且只有一个数字。

从下面的代码：

```
IC: {
                    required: true,
                    minlength: 12
                    }, 
```

用户可以输入超过 12 位数字。我希望用户只能输入 12 位数字，并且只能输入一个数字。我怎样才能做到这一点 。？

这里有一个完整的代码。

```
(function($,W,D){
var JQUERY4U = {};

JQUERY4U.UTIL =
{
    setupFormValidation: function()
    {
        $("#register-form").validate({
            rules: {
                regPassword: {
                    required: true,
                    minlength: 4
                },
                Designation: "required",
                IC: {
                    required: true,
                    },
            },
            messages: {
                regPassword: {
                    required: "<br><font color='red'>Enter Your Password</font>",
                    minlength: "<br><font color='red'>Your password must be at least 4 characters long</font>"
                },
                IC: "<br><font color='red'>Enter Your I/C Number</font>",
            },
            submitHandler: function(form) {
                form.submit();
            }
        });

    }
}

//when the dom has loaded setup form validation rules
$(D).ready(function($) {
    JQUERY4U.UTIL.setupFormValidation();
}); })(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:50:16.793

**引用操作：**

> 告诉我如何验证 IC 值......将需要 12 位数字，并且只需要一个数字。

* * *

使用`required: true`、`number: true`和`rangelength: [12, 12]`仅需要 12 位数字。[有关所有方法/规则的列表，](http://docs.jquery.com/Plugins/Validation#List_of_built-in_Validation_methods)请参阅文档。

```
rules: {
    IC: {
        required: true,
        number: true,
        rangelength: [12, 12]
    }
}, 
```

**[工作演示：](http://jsfiddle.net/DR5Aw/1/)**

[http://jsfiddle.net/DR5Aw/1/](http://jsfiddle.net/DR5Aw/1/)

# c# - 查询未执行且未获得结果

> ID：13785397
> 
> 赞同：0
> 
> 时间：2012-12-09T06:55:42.093
> 
> 标签：c#, asp.net, linq

```
 const string keyword = "manoj";
        rsp.DataSource = company.GetCompanySearch(keyword);
        rsp.DataBind();
    using (var context = huntableEntities.GetEntitiesWithNoLock())
    {
        IEnumerable<Company> query = context.Companies.ToList();
        if (!string.IsNullOrEmpty(keyword))
        {
            keyword = keyword.ToLower();
            query =  query.Where(u=>u.CompanyName.Contains(keyword)
                || u.EmailAdress.Contains(keyword)
                ||u.MasterCountry.Description.Contains(keyword)
                ||u.MasterIndustry.Description.Contains(keyword)
                ||u.CompanyDescription.Contains(keyword)
                ||u.CompanyHeading.Contains(keyword));
        }
        return query.ToList();
    } 
```

查询没有得到结果。该数据库有 27 条名为 manoj 的记录。内部异常为 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:37:39.563

如果将行更改为，它应该可以按预期`IEnumerable<Company> query = ...`工作

```
var query = context.Companies; 
```

这变成`query`了一个`IQueryable<Company>`，其中的表达式将被行扩展`query = query.Where(...`。这将通过将`Contains`表达式转换为 SQL ( `LIKE`) 的方式完成。

在您当前的代码中，您将所有公司获取到内存中，`Contains`并由 linq-to-objects 执行。这是区分大小写的，我认为你没有得到任何匹配的原因。SQL 可能不区分大小写。这取决于您的数据库的排序规则。

# starling-framework - Starling Feathers 扩展主题 - 自定义按钮

> ID：13785398
> 
> 赞同：0
> 
> 时间：2012-12-09T06:55:45.103
> 
> 标签：starling-framework

我正在尝试研究如何使用添加到主题精灵表中的精灵作为按钮，但运气不佳。

我已经创建了带有单击状态和标签的整个按钮，并添加到主题精灵表中，需要在按钮上使用。我有一些我想使用的自定义按钮，但我也想使用一些主题皮肤（最小皮肤）。

我查看了扩展主题部分，但不确定如何将信号精灵图像用于 1 个按钮，将另一个用于另一个按钮，将主题皮肤用于其他按钮。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T15:27:10.710

查看 names 属性，这就是主题“知道”要调用什么初始化函数的方式

# javascript - 将事件侦听器添加到 ListView 中的按钮 - WinJS

> ID：13785401
> 
> 赞同：3
> 
> 时间：2012-12-09T06:56:18.157
> 
> 标签：javascript, html, windows-8, winjs

我在 ListView 中有一个包含按钮的项目列表。我找不到将事件侦听器添加到按钮的方法...

* * *

这是代码：

JS：

```
downloadsListView = document.getElementById('downloads').winControl
downloadsListView.itemDataSource = JobList.dataSource
downloadsListView.onloadingstatechanged = function() {
      var _this = this;
      return WinJS.Utilities.query("button.play_pause_button", document.getElementById('downloads')).forEach(function(element) {
        console.log(element);
        return element.onclick = _this._play_pause_download;
      });
    }; 
```

* * *

我可以确保该功能确实通过控制台输出循环遍历按钮。但是点击按钮什么也不会触发。

我希望有人能帮帮忙。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:32:09.673

我认为多米尼克的评论是你最好的选择。MSDN 上的[ListView.itemTemplate 属性](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700705.aspx)页说...

> **向项目模板添加交互元素**项目模板可以包含大多数其他控件，但不能包含 FlipView 或其他 ListView。
> 
> 通常，当用户与元素交互时，ListView 会捕获该交互并使用它来确定用户是否选择或调用了某个项目或正在平移项目。对于交互元素（例如控件）要接收输入，您必须将 win-interactive 类附加到交互元素或其父元素之一。该元素及其子元素接收交互并且不再触发 ListView 的事件。
> 
> 当您将 win-interactive 附加到项目模板中的元素时，请确保该元素不会填充整个项目，否则用户将无法选择或调用该项目。
> 
> 要将交互式元素添加到您的项目模板，您必须使用模板函数而不是 WinJS.Binding.Template。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T14:54:22.880

为什么不向 ListViewItem 添加一个事件侦听器，当用户点击/单击元素时触发？这是正确的做法。

ListView 有 onItemInvoked。更多信息可以[在这里找到](http://msdn.microsoft.com/en-us/library/windows/apps/br211827.aspx)。

你的例子：

```
 <div id="downloads" data-win-control="WinJS.UI.ListView" 
data-win-options="{oniteminvoked : _play_pause_download}">
</div> 
```

# nullpointerexception - JApplet 游戏中的 java.lang.NullPointerException

> ID：13785405
> 
> 赞同：1
> 
> 时间：2012-12-09T06:57:22.483
> 
> 标签：nullpointerexception

堆栈和Java的新人。

首先，这是我的代码，AsteroidsGame.java

```
 import java.applet.*;
   import java.awt.*;
   import java.awt.event.*;
   import javax.swing.*;
   import java.net.*;
   import java.util.*;

public class AsteroidsGame extends JApplet implements Runnable, KeyListener {

    Thread thread;

    Dimension dim;

    Image img;

    Graphics g;

    long endTime, startTime, framePeriod;

    Ship ship;

    boolean paused;

// True if the game is paused. Enter is the pause key

    Shot[] shots;

    int numShots;

    boolean shooting;
    Asteroid[] asteroids;

    int numAsteroids;

    double astRadius;

    double minAstVel;

    double maxAstVel;

    int astNumHits;

    int astNumSplit;

    int level;

    private AudioClip audioClip;

public void init() {

    resize(500, 500);

    shots = new Shot[41];

    numAsteroids = 0;

    level = 0;

    astRadius = 60;

    minAstVel = .5;

    maxAstVel = 5;

    astNumHits = 3;

    astNumSplit = 2;

    endTime = 0;

    startTime = 0;

    framePeriod = 25;

    addKeyListener(this);

    setFocusable(true);

    requestFocusInWindow();

    dim = getSize();

    img = createImage(dim.width, dim.height);

    g = img.getGraphics();

    thread = new Thread(this);

    thread.start();

    URL urlAudioClip = getClass().getResource("audio/minorcircuit.wav");

    audioClip = Applet.newAudioClip(urlAudioClip);

    audioClip.loop();

}

public void start() {

    audioClip.loop();

}

public void stop() {

    audioClip.stop();

}

public void setUpNextLevel() {

    level++;

    ship = new Ship(250, 250, 0, .35, .98, .1, 12);

    numShots = 0;

    paused = false;

    shooting = false;

    asteroids = new Asteroid[level * (int)Math.pow(astNumSplit, astNumHits - 1) + 1];

    numAsteroids = level;

    for(int i = 0; i < numAsteroids; i++) {

        asteroids[i] = new Asteroid(Math.random() * dim.width, Math.random() * dim.height, astRadius, minAstVel, maxAstVel, astNumHits, astNumSplit);

    }

}

public void paint(Graphics gfx) {

    g.setColor(Color.black);

    g.fillRect(0, 0, 500, 500);

    for(int i = 0; i < numShots; i++) {

        shots[i].draw(g);

    }

    for(int i = 0; i < numAsteroids; i++) {

        asteroids[i].draw(g);

    }

    ship.draw(g);

//draw the ship

    g.setColor(Color.cyan);

    g.drawString("Level " + level, 20, 20);

    gfx.drawImage(img, 0, 0, this);

}

public void update(Graphics gfx) {

    paint(gfx);

}

public void run() {

    for(;;) {

        startTime = System.currentTimeMillis();

//start next level when all asteroids are destroyed

        if(numAsteroids <= 0) {

            setUpNextLevel();

        }

        if(!paused) {

            ship.move(dim.width, dim.height);

//move the ship

            for(int i = 0; i < numShots; i++) {

                shots[i].move(dim.width, dim.height);

                if(shots[i].getLifeLeft() <= 0) {

                    deleteShot(i);

                    i--;

                }

            }

            updateAsteroids();

            if(shooting && ship.canShoot()) {

//add a shot on to the array

                shots[numShots] = ship.shoot();

                numShots++;

            }

        }

        repaint();

        try {

            endTime = System.currentTimeMillis();

            if(framePeriod - (endTime - startTime) > 0) {

                Thread.sleep(framePeriod - (endTime - startTime));

            }

        }

        catch(InterruptedException e) {

        }

    }

}

private void deleteShot(int index) {

//delete shot and move all shots after it up in the array

    numShots--;

    for(int i = index; i < numShots; i++) {

        shots[i] = shots[i + 1];

        shots[numShots] = null;

    }

}

private void deleteAsteroid(int index) {

//delete asteroid and shift ones after it up in the array

    numAsteroids--;

    for(int i = index; i < numAsteroids; i++) {

        asteroids[i] = asteroids[i + 1];

        asteroids[numAsteroids] = null;

    }

}

private void addAsteroid(Asteroid ast) {

//adds asteroid in at end of array

    asteroids[numAsteroids] = ast;

    numAsteroids++;

}

private void updateAsteroids() {

    for(int i = 0; i < numAsteroids; i++) {

// move each asteroid

        asteroids[i].move(dim.width, dim.height);

//check for collisions with the ship

        if(asteroids[i].shipCollision(ship)) {

            level--;

//restart this level

            numAsteroids = 1;

            return;

        }

//check for collisions with any of the shots

        for(int j = 0; j < numShots; j++) {

            if(asteroids[i].shotCollision(shots[j])) {

//if the shot hit an asteroid, delete the shot

                deleteShot(j);

//split the asteroid up if needed

                if(asteroids[i].getHitsLeft() > 1) {

                    for(int  k = 0; k < asteroids[i].getNumSplit(); k++) {

            addAsteroid(

                asteroids[i].createSplitAsteroid(

        minAstVel, maxAstVel));

                    }

                }

//delete the original asteroid

                deleteAsteroid(i);

                j=numShots;

                i--;

            }

        }

    }

}

public void keyPressed(KeyEvent e) {

    if(e.getKeyCode() == KeyEvent.VK_ENTER) {

        if(!ship.isActive() && !paused) {

            ship.setActive(true);

        }

        else {

        paused = !paused;

//enter is the pause button

            if(paused) {

//grays out the ship if paused

                ship.setActive(false);

            }

            else {

                ship.setActive(true);

            }

        }

    }

    else if(paused || !ship.isActive()) {

        return;

    }

    else if(e.getKeyCode() == KeyEvent.VK_SPACE) {

        ship.setAccelerating(true);

    }

    else if(e.getKeyCode() == KeyEvent.VK_LEFT) {

        ship.setTurningLeft(true);

    }

    else if(e.getKeyCode() == KeyEvent.VK_RIGHT) {

        ship.setTurningRight(true);

    }

    else if(e.getKeyCode() == KeyEvent.VK_CONTROL) {

        shooting=true;

    }

    else if(e.getKeyCode() == KeyEvent.VK_M) {

        audioClip.stop();

    }

    else if(e.getKeyCode() == KeyEvent.VK_S) {

        audioClip.loop();

    }

}

public void keyReleased(KeyEvent e) {

    if(e.getKeyCode() == KeyEvent.VK_UP) {

        ship.setAccelerating(false);

    }

    else if(e.getKeyCode() == KeyEvent.VK_LEFT) {

        ship.setTurningLeft(false);

    }

    else if(e.getKeyCode() == KeyEvent.VK_RIGHT) {

        ship.setTurningRight(false);

    }

    else if(e.getKeyCode() == KeyEvent.VK_CONTROL) {

        shooting=false;

    }

}

public void keyTyped(KeyEvent e) {

}

} 
```

这是小行星的“克隆”。你们中的一些人可能比我长一点，可能在街机中玩过它。无论如何，我为我的 Java 课程的一个期末项目写了这个，但永远无法完全工作。它启动得很好，你可以转身射击，但不能向前移动。不过我现在不担心搬家。小程序启动后发生的是音乐播放和“小行星”穿过屏幕。如果你向小行星射击或向任何方向射击 3 次，就会发生线程异常。

```
Exception in thread "Thread-3" java.lang.NullPointerException
at AsteroidsGame.updateAsteroids(AseroidsGame.java:161)
at AsteroidsGame.run(AsteroidsGame.java:115)
at java.lang.Thread.run(Thread.java:722) 
```

在网上四处看看对我没有什么好处。我学到的大部分东西都是自学的，并不那么容易理解。我不完全确定在这里做什么来解决这个异常。在堆栈上的另一个线程中，提到使用 ArrayList，因为该数组以前没有用大小声明。修修补补；从来没有让它工作。

我需要想法/建议/批评。我想让它工作，这样我就可以说我完成了。

其他类，Asteroid.java

```
import java.awt.*;

public class Asteroid {

double x, y, xVelocity, yVelocity, radius;

int hitsLeft, numSplit;

public Asteroid(double x,double y,double radius,double minVelocity, double maxVelocity,int hitsLeft,int numSplit) {

    this.x = x;

    this.y = y;

    this.radius = radius;

    this.hitsLeft = hitsLeft;

    this.numSplit = numSplit;

    double vel = minVelocity + Math.random() * (maxVelocity - minVelocity);

    double dir = 2 * Math.PI * Math.random();

    xVelocity = vel * Math.cos(dir);

    yVelocity = vel * Math.sin(dir);

}

public void move(int scrnWidth, int scrnHeight) {

    x += xVelocity;

    y += yVelocity;

    if(x < 0 - radius) {

        x += scrnWidth + 2 * radius;

    }

    else if(x > scrnWidth + radius) {

        x -= scrnWidth + 2 * radius;

    }

    if(y < 0 - radius) {

        y += scrnHeight + 2 * radius;

    }

    else if(y > scrnHeight + radius) {

        y -= scrnHeight + 2 * radius;

    }

}

public void draw(Graphics g) {

    g.setColor(Color.gray);

    g.fillOval((int)(x - radius + .5), (int)(y - radius + .5), (int)(2 * radius), (int)(2 * radius));

}

public Asteroid createSplitAsteroid(double minVelocity,double maxVelocity) {

    return new Asteroid(x, y, radius / Math.sqrt(numSplit), minVelocity, maxVelocity, hitsLeft - 1, numSplit);

}

public boolean shipCollision(Ship ship) {

    if(Math.pow(radius + ship.getRadius(), 2) > Math.pow(ship.getX() - x, 2) + Math.pow(ship.getY() - y, 2) && ship.isActive()) {

        return true;

    }

    return false;

}

public boolean shotCollision(Shot shot) {

    if(Math.pow(radius, 2) > Math.pow(shot.getX() - x, 2) + Math.pow(shot.getY() - y, 2)) {

        return true;

    }

    return false;

}

public int getHitsLeft() {

    return hitsLeft;

}

public int getNumSplit() {

    return numSplit;

}

} 
```

Ship.java

```
import java.awt.*;

public class Ship {

final double[] origXPts = {14,-10,-6,-10}, origYPts = {0,-8,0,8}, origFlameXPts = {-6,-23,-6}, origFlameYPts = {-3,0,3};

final int radius = 6;

double x, y, angle, xVelocity, yVelocity, acceleration, velocityDecay, rotationalSpeed;

//used for movement

boolean turningLeft, turningRight, accelerating, active;

int [] xPts, yPts, flameXPts, flameYPts;

//current location of ship

int shotDelay, shotDelayLeft;

//rate of fire

public Ship(double x, double y, double angle, double acceleration, double velocityDecay, double rotationalSpeed, int shotDelay) {

    this.x = x;

    this.y = y;

    this.angle = angle;

    this.acceleration = acceleration;

    this.velocityDecay = velocityDecay;

    this.rotationalSpeed = rotationalSpeed;

    xVelocity = 0;

    yVelocity = 0;

    turningLeft = false;

    turningRight = false;

    accelerating = false;

    active = false;

    xPts = new int[4];

    yPts = new int[4];

    flameXPts = new int[3];

    flameYPts = new int[3];

    this.shotDelay = shotDelay;

    shotDelayLeft = 0;

}

public void draw(Graphics g) {

    if(accelerating && active) {

        for(int i = 0; i < 3; i++) {

            flameXPts[i] = (int)(origFlameXPts[i] * Math.cos(angle) - origFlameYPts[i] * Math.sin(angle) + x + .5);

            flameYPts[i] = (int)(origFlameXPts[i] * Math.sin(angle) + origFlameYPts[i] * Math.cos(angle) + y + .5);

        }

        g.setColor(Color.red);

//color of flame

        g.fillPolygon(flameXPts, flameYPts, 3);

    }

    for(int i = 0; i < 4; i++) {

        xPts[i] = (int)(origXPts[i] * Math.cos(angle) - origYPts[i] * Math.sin(angle) + x + .5);

        yPts[i] = (int)(origXPts[i] * Math.sin(angle) + origYPts[i] * Math.cos(angle) + y + .5);

    }

    if(active) {

        g.setColor(Color.white);

    }

    else {

        g.setColor(Color.darkGray);

    }

    g.fillPolygon(xPts, yPts, 4);

}

public void move(int scrnWidth, int scrnHeight) {

    if(shotDelayLeft > 0) {

        shotDelayLeft--;

    }

    if(turningLeft) {

        angle -= rotationalSpeed;

    }

    if(turningRight) {

        angle += rotationalSpeed;

    }

    if(angle > (2 * Math.PI)) {

        angle -= (2 * Math.PI);

    }

    else if(angle < 0) {

        angle += (2 * Math.PI);

    }

    if(accelerating) {

        xVelocity += acceleration * Math.cos(angle);

        yVelocity += acceleration * Math.sin(angle);

    }

    x += xVelocity;

    y += yVelocity;

    xVelocity *= velocityDecay;

    yVelocity *= velocityDecay;

    if(x<0) {

        x += scrnWidth;

    }

    else if(x > scrnWidth) {

        x -= scrnWidth;

    }

    if(y < 0) {

        y += scrnHeight;

    }

    else if(y > scrnHeight) {

        y -= scrnHeight;

    }

}

public void setAccelerating(boolean accelerating) {

    this.accelerating = accelerating;

//start or stop accelerating the ship

}

public void setTurningLeft(boolean turningLeft) {

    this.turningLeft = turningLeft;

//start or stop turning the ship

}

public void setTurningRight(boolean turningRight) {

    this.turningRight = turningRight;

}

public double getX() {

    return x;

//returns the ship’s x location

}

public double getY() {

    return y;

//returns the ship's y location

}

public double getRadius() {

    return radius;

//returns radius of circle that approximates the ship

}

public void setActive(boolean active) {

    this.active = active;

//used when the game is paused or unpaused

}

public boolean isActive() {

    return active;

}

public boolean canShoot() {

    if(shotDelayLeft > 0) {

        return false;

    }

    else {

        return true;

    }

}

public Shot shoot() {

    shotDelayLeft=shotDelay;

//set delay till next shot can be fired

//a life of 40 makes the shot travel about the width of the

//screen before disappearing

    return new Shot(x, y, angle, xVelocity, yVelocity, 40);

}

} 
```

Shot.java

```
import java.awt.*;

public class Shot {

final double shotSpeed = 12;

double x, y, xVelocity, yVelocity;

int lifeLeft;

public Shot(double x, double y, double angle, double shipXVel, double shipYVel, int lifeLeft) {

    this.x = x;

    this.y = y;

    xVelocity = shotSpeed * Math.cos(angle) + shipXVel;

    yVelocity = shotSpeed * Math.sin(angle) + shipYVel;

    this.lifeLeft = lifeLeft;

}

public void move(int scrnWidth, int scrnHeight) {

    lifeLeft--;

    x += xVelocity;

    y += yVelocity;

    if(x < 0) {

        x += scrnWidth;

    }

    else if(x > scrnWidth) {

        x -= scrnWidth;

    }

    if(y < 0) {

        y += scrnHeight;

    }

    else if(y > scrnHeight) {

        y -= scrnHeight;

    }

}

public void draw(Graphics g) {

    g.setColor(Color.yellow);

    g.fillOval((int)(x - .5), (int)(y - .5), 3, 3);

}

public double getX() {

    return x;

}

public double getY() {

    return y;

}

public int getLifeLeft() {

    return lifeLeft;

}

} 
```

感谢您的关注。

---------------------编辑 2012 年 12 月 9 日----------- -

尝试使用 NetBeans IDE 7.2.1 进行调试。它不正确地描述了船的转向并给出了完全不同的错误：

```
Exception in thread "Thread-3" java.lang.NullPointerException
at AsteroidsGame.run(AsteroidsGame.java:122)
at java.lang.Thread.run(Thread.java:722) 
```

它将注意力指向 run 方法中的 Shot[] 镜头数组。这是可以预料的，因为 Asteroid[] 和 Shot[] 的数组设置相同。

# c - “不太可能（）”有什么意义？

> ID：13785407
> 
> 赞同：0
> 
> 时间：2012-12-09T06:57:35.257
> 
> 标签：c, linux-kernel, c-preprocessor, likely-unlikely

> **可能重复：**
> [Linux 内核中可能/不太可能的宏](https://stackoverflow.com/questions/109710/likely-unlikely-macros-in-the-linux-kernel)

在 Linux 内核中，我遇到了[./linux/include/shed.h](http://lxr.linux.no/linux+v3.6.9/include/linux/sched.h#L2283)中的一行：

```
 if (unlikely(atomic_dec_and_test(&mm->mm_count))) 
```

不太可能的确切意义是什么？我在[.arch/x86/tools/insn_sanity.c](http://lxr.linux.no/linux+v3.6.9/arch/x86/tools/insn_sanity.c#L31)中找到了它的定义，但它只是：

```
#define unlikely(cond) (cond) 
```

对我来说，似乎根本没有使用的意义`unlikely()`。的预期目的是`unlikely`什么？

# android - Android 在 LockScreen 上显示信息

> ID：13785409
> 
> 赞同：1
> 
> 时间：2012-12-09T06:58:04.213
> 
> 标签：android, lockscreen

是否可以从 Android 应用程序在锁定屏幕上显示信息。我遇到了一些应用程序，它们允许您在屏幕上显示电子邮件和日历信息，但找不到用于实现相同功能的 API。

![在此处输入图像描述](../Images/39f530455db56fe04a2d48ed4d27f6db.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:23:35.640

Android 4.2[支持锁屏上的应用小部件](http://developer.android.com/guide/topics/appwidgets/index.html#lockscreen)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T08:17:13.003

根据[您提到的应用程序](https://play.google.com/store/apps/details?id=com.noamwolf.android.androidfound)（描述很差，评分很低），我怀疑他们每次遇到电源关闭（或打开）事件时都会禁用键盘保护（默认锁定屏幕）。

也许他们正在使用的活动具有透明背景并且在正常锁定屏幕上方。

有很多类似的应用程序，例如“widget Locker”、“magic Locker”和“quick Launch”，都做同样的事情来替换键盘锁。他们中的大多数还具有更换启动器的能力（但仍然会显示用户的启动器，当然），以获得更流畅的体验。

屏幕截图属于您提到的应用程序，还是您希望实现的目标？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:02:18.447

如果您查看开源项目[联系人所有者](http://code.google.com/p/contactowner/)的来源，您也可以了解如何做到这一点，该联系人也将消息添加到锁定屏幕。

# ruby-on-rails - 下拉菜单并在视图之间传递选定的值 Ruby on Rails

> ID：13785420
> 
> 赞同：0
> 
> 时间：2012-12-09T07:01:33.420
> 
> 标签：ruby-on-rails, drop-down-menu, controller, views

我有一个使用此代码的模型中的所有对象的下拉菜单：

```
 <h2>Upload Grades Using "New Grades"</h2>
 <%= collection_select :course, :course_id, Course.all, :id, 
          :name, :prompt => "Select a Course:" %>
 <%= link_to 'New Grade', new_grade_path(:course => :course ) %> 
```

在这种情况下，我的模型是课程。如何访问用户的选择，然后将其传递给 new.html.erb 视图。据我所知，我使用控制器来检索值，例如

```
 @course = params[:course][:course_id] 
```

然后在我看来，我可以显示课程的名称

```
 <%= @course.name %> 
```

在 new.html.erb 内部。

然后，如果课程有一个像 A course has_many students 这样的关联，那么我可以检索并显示所有学生的列表，这些学生正在做类似的事情

@students = @course.students

但是，我的想法是错误的，因为我的代码不起作用。有人可以指出我在这里出错的地方吗？我已经在这几个小时了...

## 更新 - 包括 config/routes.rb 和 rake 路由

```
 MygradesSr::Application.routes.draw do

    resources :evals

    resources :teams

    resources :categories

    resources :grades

    resources :categories

    resources :tasks

    resources :students

    resources :courses

    post 'grades/upload_grade'

    post 'students/upload_student'

    root :to => "home#index"
    end 
```

耙路线：

```
 evals GET    /evals(.:format)                   evals#index
                    POST   /evals(.:format)                   evals#create
           new_eval GET    /evals/new(.:format)               evals#new
          edit_eval GET    /evals/:id/edit(.:format)          evals#edit
               eval GET    /evals/:id(.:format)               evals#show
                    PUT    /evals/:id(.:format)               evals#update
                    DELETE /evals/:id(.:format)               evals#destroy
              teams GET    /teams(.:format)                   teams#index
                    POST   /teams(.:format)                   teams#create
           new_team GET    /teams/new(.:format)               teams#new
          edit_team GET    /teams/:id/edit(.:format)          teams#edit
               team GET    /teams/:id(.:format)               teams#show
                    PUT    /teams/:id(.:format)               teams#update
                    DELETE /teams/:id(.:format)               teams#destroy
         categories GET    /categories(.:format)              categories#index
                    POST   /categories(.:format)              categories#create
       new_category GET    /categories/new(.:format)          categories#new
      edit_category GET    /categories/:id/edit(.:format)     categories#edit
           category GET    /categories/:id(.:format)          categories#show
                    PUT    /categories/:id(.:format)          categories#update
                    DELETE /categories/:id(.:format)          categories#destroy
             grades GET    /grades(.:format)                  grades#index
                    POST   /grades(.:format)                  grades#create
          new_grade GET    /grades/new(.:format)              grades#new
         edit_grade GET    /grades/:id/edit(.:format)         grades#edit
              grade GET    /grades/:id(.:format)              grades#show
                    PUT    /grades/:id(.:format)              grades#update
                    DELETE /grades/:id(.:format)              grades#destroy
                    GET    /categories(.:format)              categories#index
                    POST   /categories(.:format)              categories#create
                    GET    /categories/new(.:format)          categories#new
                    GET    /categories/:id/edit(.:format)     categories#edit
                    GET    /categories/:id(.:format)          categories#show
                    PUT    /categories/:id(.:format)          categories#update
                    DELETE /categories/:id(.:format)          categories#destroy
              tasks GET    /tasks(.:format)                   tasks#index
                    POST   /tasks(.:format)                   tasks#create
           new_task GET    /tasks/new(.:format)               tasks#new
          edit_task GET    /tasks/:id/edit(.:format)          tasks#edit
               task GET    /tasks/:id(.:format)               tasks#show
                    PUT    /tasks/:id(.:format)               tasks#update
                    DELETE /tasks/:id(.:format)               tasks#destroy
           students GET    /students(.:format)                students#index
                    POST   /students(.:format)                students#create
        new_student GET    /students/new(.:format)            students#new
       edit_student GET    /students/:id/edit(.:format)       students#edit
            student GET    /students/:id(.:format)            students#show
                    PUT    /students/:id(.:format)            students#update
                    DELETE /students/:id(.:format)            students#destroy
            courses GET    /courses(.:format)                 courses#index
                    POST   /courses(.:format)                 courses#create
         new_course GET    /courses/new(.:format)             courses#new
        edit_course GET    /courses/:id/edit(.:format)        courses#edit
             course GET    /courses/:id(.:format)             courses#show
                    PUT    /courses/:id(.:format)             courses#update
                    DELETE /courses/:id(.:format)             courses#destroy
grades_upload_grade POST   /grades/upload_grade(.:format)     grades#upload_grade
students_upload_student POST   /students/upload_student(.:format) students#upload_student
               root        /                                  home#index 
```

# php - 将变量传递给选项数组中的 CakePHP Helper

> ID：13785421
> 
> 赞同：0
> 
> 时间：2012-12-09T07:01:43.480
> 
> 标签：php, cakephp, helper

这是设置面包屑，但可以用于我假设的任何助手。我正在尝试链接到我在面包屑中查看的当前文章，但不确定如何在视图/ URL 之后添加帖子 ID，就像我在它之前添加新闻标题一样？

```
$this->Html->addCrumb($news['News']['title'], array('controller' => 'news', 'action' => 'view/'$news['News']['id'])); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:51:45.070

我通常更喜欢 CakePHP 格式 :)

```
$this->Html->addCrumb(
    $news['News']['title'], array(
        'controller' => 'news', 
        'action' => 'view',
         $news['News']['id']
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:26:44.797

你的意思是：

```
$this->Html->addCrumb(
    $news['News']['title'], array(
        'controller' => 'news', 
        'action' => 'view/' . $news['News']['id']
    )
); 
```

# variables - 如何双击文件以对其执行多个 CMD 命令（使用“打开方式...”）？

> ID：13785423
> 
> 赞同：1
> 
> 时间：2012-12-09T07:02:07.720
> 
> 标签：variables, command, cmd, directory, filenames

*   我有一组具有通用文件扩展名的文件，例如 *.EXT。
*   这些文件位于我 PC 上的不同文件夹中。
*   我有一个 cmd 脚本“Script.bat”，位于 C:/foo/ 文件夹中

我已经为要由这个“Script.bat”CMD 脚本打开的 *.EXT 文件设置了一个“打开方式...”文件关联。

问题是：

*   我必须使用哪个变量来指定脚本中双击的 EXT 文件**的文件名**和**位置**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:21:45.293

关联的应用程序，在您的情况下是您的批处理文件，将使用“双击”文件作为第一个命令行参数来调用。因此，该文件的完全限定文件名（包括“位置”）将在`%1`.

示例（有点）：

```
 @echo off
 REM assuming this is your "Script.bat"
 echo You double clicked on "%~1" 
```

请注意，使用`%~1`而不是简单地`%1`删除封闭的引号，Windows 在调用您的应用程序（批处理文件）时会自动添加这些引号。

例如，Windows 会像您这样输入它一样调用它`CMD.EXE`：

```
 Script.bat "C:\Wherever it is\file.ext" 
```

要提取单个部分，您有几个选项：

```
 echo Filename only: %~n1
 echo Filename and extension: %~nx1
 echo Drive and directory only: %~dp1 
```

要获得完整的可能性列表，`FOR /?`请在提示和页面上一直输入到最后（例如，将“%I”替换为“%1”）。

# design-patterns - 数据转换：最佳实践和设计模式

> ID：13785426
> 
> 赞同：0
> 
> 时间：2012-12-09T07:03:37.410
> 
> 标签：design-patterns, data-transfer

这是一个比较理论的问题。我正在构建一个 MVC 数据驱动的应用程序。我的问题是将数据从数据库字段转换为可显示的数据。例如，我想将布尔值 1 或 0 转换为字符串“是”或“否”。我想将 firstName 字段和 lastName 字段转换为“FullName”字段。（即：“John”和“Smith”变为“Smith, John”）。我想将包含 user_id 的字段转换为指向详细信息页面的超链接. （即，将 17 的 user_id 转换为包含：userdetails.php?id=17 的链接）

我知道我可以在 SQL 查询中做到这一点。(SELECT CONCAT(lastName .", " .firstName) AS fullName)。我知道我可以为我需要的每种类型的列表编写一个对象，并在所述对象中手动进行转换。我知道我什至可以在视图级别使用助手来完成其中的一些操作。

但我在想的是一种类似于“数据转换对象”的东西。它将在构造函数中使用一组记录。然后它将有一个“转换对象”分配给将转换数据的每个字段。然后它将有一种方法将转换后的数据作为数组获取。

为什么要做这一切？嗯，一个原因是因为它似乎是很酷的面向对象设计。另一个原因是我们可以使用纯形式的数据，但我们可以轻松地将其转换为可显示的格式。

伪代码如下：

```
class yesNoTransform extends dataTransform {

    public function ($field) {
        if($field == true) {
            return "TRUE";
        } else {
            return "FALSE"
        }
    }

    public function transform ( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:07:18.137

看看[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。它符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:44:08.137

If you can avoid code bloating, prefer that, this would mean prefer doing these small post-processig transformations right at SQL. Do more with less, less code to maintain, less bugs. If you absolutely must do the transformation in code, then I would actually recommend a "Filter"-based approach. You have filters that comply to a common abstraction and they process result sets saved in e.g. `List` of `Map` instances. You create a chain of filters, where each filter delegates to the next for processing and each applies a specific transformation to the result set. That's the [Chain of Responsibility](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern) pattern.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T07:11:50.780

会建议你使用 Java EE **DAO 模式**。

通过这个，您可以抽象所有与数据库相关的东西。确保在 DAO 中处理所有 DB 异常，然后将响应转换为值对象或 DTO。所以你的 DAO 会将 DTO 对象返回给调用方法或控制器。

# multithreading - Scala接收（演员）没有收到任何东西？

> ID：13785428
> 
> 赞同：0
> 
> 时间：2012-12-09T07:04:08.800
> 
> 标签：multithreading, scala, actor

我一直在尝试和演员一起玩，但我遇到了问题。当我尝试将某些内容发送回给调用者时，它似乎根本没有通过，即使它正在处理不同的案例。我在父演员中收到的信息如下所示：

```
 receive {
            case (x,1) => { // case of html
              println("reaches here!")
            }
            case (url,name,2) => {
                              println("doesnt reach here!")
            }
            case _ => println("Error on callback")
        } 
```

我的演员（处理器类）的行为方法（释义）：第一个演员的行为方法将调用以下代码：

```
 {
        println()
        caller ! (s,1)
        println(caller)
        val processUrls = new Processor(2, s.toString, caller, map, queue)
        processUrls.start()
    } 
```

所以上面的工作。它产生同一个类的另一个actor，它调用不同的方法，但将它传递给同一个调用者，以便原始调用者将接收到消息。它在其行为中调用以下方法：

```
{
...
...
println(caller)
caller ! (url, name.get, 2)
} 
```

到目前为止，调用者是完全相同的（在两个地方打印出来会产生完全相同的东西。

但是，当我尝试用第二种方法发回该消息时，绝对不会打印任何内容。就像来电者甚至没有收到消息一样。即使是包罗万象的 _ 案例也不会被打印出来。我不知道是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:08:02.847

没关系，我没有用循环包围接收......

# batch-file - 将文件移动到一个目录

> ID：13785430
> 
> 赞同：0
> 
> 时间：2012-12-09T07:05:09.100
> 
> 标签：batch-file, dos

DOS bat 我想查找具有特定扩展名的文件，例如
/R c:\ *.ppx
并将它们全部移动到指定目录，例如 c:\PPS
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:18:40.817

将输出重定向`WHERE`到文件

```
WHERE /R C:\ *.ppx > ppxlist.txt 
```

然后使用`FOR`循环移动它们

```
FOR /f %i in (ppxlist.txt) do move %i c:\pps\ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:20:39.890

这是一个类似的问题，它提出了一些方法：

[如何递归地将特定模式的文件复制到 Windows 上的单个平面文件夹中？](https://stackoverflow.com/questions/246559/how-can-i-recursively-copy-files-of-a-specific-pattern-into-a-single-flat-folder)

# c++ - 在 Visual Studio 2012 中使用 DirectX 11

> ID：13785431
> 
> 赞同：2
> 
> 时间：2012-12-09T07:05:14.627
> 
> 标签：c++, visual-studio-2012, directx, directx-11

我正在尝试在我的 C++ 项目中使用 DirectX 11，但是当我编译时出现错误消息：

```
D3D11 ERROR: D3D11 header version mismatch.
The application was compiled against and will only work with D3D11_SDK_VERSION (1), but the currently installed runtime is version (7).
Recompile the application against the appropriate SDK for the installed runtime. 
```

我不知道是什么原因造成的。有没有办法切换它试图编译的运行时？我从 2010 年 6 月开始安装 DirectX SDK。我尝试按照 Microsoft 的指示在这里 (http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275(v=vs.85).aspx) 确保使用 DirectX 已正确设置。我仍然得到这个错误。有谁知道可能导致此问题的原因以及如何解决？我正在使用 Windows 8 64 位和 Visual Studio 2012。

**以供参考**

我将其作为一个空的 C++ 解决方案开始，而不是作为 DirectX 应用程序。这是我处理 DirectX 的代码部分

```
#include <amp.h>
#include <amp_math.h>
#include <amp_graphics.h>
#include <d3d11.h>
#include <dxgi.h>

#pragma comment(lib, "d3d11")
#pragma comment(lib, "dxgi")

// Inside main()
    IDXGIAdapter* pAdapter = nullptr; // Use default adapter

    unsigned int createDeviceFlags = D3D11_CREATE_DEVICE_DISABLE_GPU_TIMEOUT;
    ID3D11Device *pDevice = nullptr;
    ID3D11DeviceContext *pContext = nullptr;
    D3D_FEATURE_LEVEL featureLevel;
    HRESULT hr = D3D11CreateDevice(pAdapter,
                                    D3D_DRIVER_TYPE_UNKNOWN,
                                    NULL,
                                    createDeviceFlags,
                                    NULL,
                                    0,
                                    D3D11_SDK_LAYERS_VERSION,
                                    &pDevice,
                                    &featureLevel,
                                    &pContext);
    if(FAILED(hr) ||
        ((featureLevel != D3D_FEATURE_LEVEL_11_1) &&
        (featureLevel != D3D_FEATURE_LEVEL_11_0)))
    {
        std::wcerr << "Failed to create Direct3D 11 device" << std::endl;
        return 10;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:20:39.217

代替`D3D11_SDK_LAYERS_VERSION`您需要使用[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476082.aspx)`D3D11_SDK_VERSION`记录的内容。

# php - PHP - 将文件上传到另一台服务器而不卷曲

> ID：13785433
> 
> 赞同：4
> 
> 时间：2012-12-09T07:05:27.647
> 
> 标签：php, file-upload, curl

我有一个问题，我可以在没有 curl 的情况下将文件上传到另一台服务器。因为不是每个服务器都有 CURL ...谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T07:17:58.827

是的，可以将纯 PHP fopen 与 stream_context_create 一起使用。以下示例来自在线 PHP 手册（[http://php.net/manual/en/function.stream-context-create.php](http://php.net/manual/en/function.stream-context-create.php)）：

```
function do_post_request($url, $postdata, $files = null) 
{ 
    $data = ""; 
    $boundary = "---------------------".substr(md5(rand(0,32000)), 0, 10); 

    //Collect Postdata 
    foreach($postdata as $key => $val) 
    { 
        $data .= "--$boundary\n"; 
        $data .= "Content-Disposition: form-data; name=\"".$key."\"\n\n".$val."\n"; 
    } 

    $data .= "--$boundary\n"; 

    //Collect Filedata 
    foreach($files as $key => $file) 
    { 
        $fileContents = file_get_contents($file['tmp_name']); 

        $data .= "Content-Disposition: form-data; name=\"{$key}\"; filename=\"{$file['name']}\"\n"; 
        $data .= "Content-Type: image/jpeg\n"; 
        $data .= "Content-Transfer-Encoding: binary\n\n"; 
        $data .= $fileContents."\n"; 
        $data .= "--$boundary--\n"; 
    } 

    $params = array('http' => array( 
           'method' => 'POST', 
           'header' => 'Content-Type: multipart/form-data; boundary='.$boundary, 
           'content' => $data 
        )); 

   $ctx = stream_context_create($params); 
   $fp = fopen($url, 'rb', false, $ctx); 

   if (!$fp) { 
      throw new Exception("Problem with $url, $php_errormsg"); 
   } 

   $response = @stream_get_contents($fp); 
   if ($response === false) { 
      throw new Exception("Problem reading data from $url, $php_errormsg"); 
   } 
   return $response; 
} 

//set data (in this example from post) 

//sample data 
$postdata = array( 
    'name' => $_POST['name'], 
    'age' => $_POST['age'], 
    'sex' => $_POST['sex'] 
); 

//sample image 
$files['image'] = $_FILES['image']; 

do_post_request("http://example.com", $postdata, $files); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T07:10:57.357

可以使用[ftp_put](http://php.net/manual/en/function.ftp-put.php)：

```
define("LOCAL_FILE","PATH_TO_LOCAL_FILE");
define("FTP_ADDRESS","ftp.domain.com");
define("FTP_FILE","PATH_TO_REMOTE_FILE");
define("FTP_USERNAME","USERNAME");
define("FTP_PASSWORD","PASWORD");

$conn = ftp_connect(FTP_ADDRESS);
$login = ftp_login($conn, FTP_USERNAME, FTP_PASSWORD);
ftp_put($conn, FTP_FILE, LOCAL_FILE, FTP_ASCII);
ftp_close($conn); 
```

而 ftp 域将为您提供 ftp 文件的位置以及用户名和密码。

# ruby-on-rails - 允许以下 HTML 元素（例如代码、pre）是否存在安全风险？

> ID：13785435
> 
> 赞同：1
> 
> 时间：2012-12-09T07:06:21.563
> 
> 标签：ruby-on-rails, security, wysihtml5

我正在使用以下插件：[https ://github.com/jhollingworth/bootstrap-wysihtml5/](https://github.com/jhollingworth/bootstrap-wysihtml5/)

这就是我在 Rails 应用程序中清理输入/输出的方式：

**post.rb:**

```
 protected

  def clean_input
    self.content = sanitize(self.content, :tags => %w(b i u br p span blockquote pre code), :attributes => %w(id class style))
  end 
```

**帖子/show.html.rb：**

```
 <p><%= sanitize @post.content, :tags => %w(b i u p span br blockquote pre code), :attributes => %w(id class style) %></p> 
```

此解析器规则适用于**wysihtml5**（当然，编辑器默认允许 b、i 等标签）：

**共享/编辑器工具栏：**

```
 parserRules: {
      classes: {
        "ruby": 1,
        "variable": 1,
        "string": 1
      },
      tags: {
        span: {},
        code: {},
        pre: {}
      }
    }, 
```

所以，现在用户可以输入，应用程序可以输出如下内容：

```
 <pre class="ruby">
   <code>
    <span class="variable">
    $(</span><span class="string">'.wysihtml5'</span>).wysihtml5({<span class=
    "string">'stylesheets'</span>: false});
   </code>
  </pre> 
```

（用户可以从视觉和html视图切换）

我希望这不是一个愚蠢的问题（我对安全性不是很熟悉），但这相对安全还是危险？如果有，如何预防？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:56:45.477

我真的不了解 Ruby，但是在 PHP 中你可以允许这样的标签，从我的实验来看，它根本不安全......原因是因为这些授权标签上的属性没有被清理所以任何**用户**可以输入一个非常温和且无害的`<span></span>`标签，但将其添加到其中：

`<span onmouseover="hack_the_whole_fucking_website();">contenthere</span>`

这样，当用户将鼠标移到它上面时，JavaScript 就会被执行！从那里我猜黑客可能会窃取用户的 cookie + 窃取会话 cookie + 劫持用户会话 + 可能劫持管理会话，然后炸毁你的网站。这是为黑客敞开的大门。

**我为此使用的解决方案**是 BBcode 标签。它们是现有 HTML 标记的一种“替代品”。一些例子 ：

*   `<i>`=`[i]`
*   `<img src="#">`=`[img=#]`
*   `<a href="#">text</a>`=`[url=#]text[/url]`
*   ...

编辑器的输出应该是这种格式，这样您就可以运行一个清理脚本来正确删除所有真实的 HTML 标记。然后，当需要将此数据输出给用户时，您可以使用一些正则表达式将这些替换标记替换为真正的 HTML 标记。:)

# validation - 如何启用 Symfony2 回调验证错误消息的翻译？

> ID：13785441
> 
> 赞同：7
> 
> 时间：2012-12-09T07:07:21.273
> 
> 标签：validation, symfony, translation

我在一个项目的早期，我已经创建了一些基本功能，包括一个自定义回调验证器（验证结束日期在开始日期之后）。从那以后，我开始重构以启用翻译。到目前为止，我没有任何问题......直到我开始考虑翻译我的自定义回调验证。

我在网上阅读了一篇帖子，声称我可以将我的翻译键值作为我的错误消息，Symfony 会自动翻译……但对我来说似乎并非如此。有人可以告诉我如何或提供文档链接以在我的自定义验证中启用翻译吗？

这是我当前的验证代码，其中包含翻译密钥：

```
<?php
namespace CG5\BFG\CoreBundle\Validators;

use Symfony\Component\Validator\ExecutionContext;

class EndDateValidator
{
    static public function isEndDateValid($entity, ExecutionContext $context)
    {
        if ($entity->getEndDate() <= $entity->getStartDate())
            $context->addViolationAtSubPath('endDate', 'validation.invalid.enddate', array(), null);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T10:33:01.167

我遇到了同样的问题。因为 symfony2 在“验证器”目录中查找这些消息，所以您必须将自定义错误消息也放入该目录中。例如在 app/Resources/translations/validators.en.yml 下。

您需要清除缓存才能使其正常工作。

# function - GUI 运行文件部分工作

> ID：13785443
> 
> 赞同：1
> 
> 时间：2012-12-09T07:07:45.377
> 
> 标签：function

您好我制作了一个 gui，当您选中一个框并单击启动脚本时，它将自动打开该文件并运行它。

前 7 个工作，但之后的工作没有。而且我不理解这个问题，因为那些不起作用的问题与那些可以正常工作的问题的编写方式相同。

这是我使用的代码，也许我错过了一些东西或出错并且我自己没有看到它=[

```
Gui, Add, Text, x2 y0 w490 h20 +Center cred, Auto Castlot Babel Tower 

Scripts
Gui, Add, CheckBox, x2 y20 w70 h20 cwhite vfloor1, Floor 1
Gui, Add, CheckBox, x72 y20 w70 h20 cwhite vfloor2, Floor 2
Gui, Add, CheckBox, x142 y20 w70 h20 cwhite vfloor3, Floor 3
Gui, Add, CheckBox, x212 y20 w70 h20 cwhite vfloor4, Floor 4
Gui, Add, CheckBox, x282 y20 w70 h20 cwhite vfloor5, Floor 5
Gui, Add, CheckBox, x352 y20 w70 h20 cwhite vfloor6, Floor 6
Gui, Add, CheckBox, x422 y20 w70 h20 cwhite vfloor7, Floor 7
Gui, Add, Text, x2 y60 w490 h20 +Center cred, Auto Castlot Explore Mode 

Avalon Scripts
Gui, Add, CheckBox, x2 y80 w70 h20 cwhite v70ava, 70 Avalon
Gui, Add, CheckBox, x72 y80 w70 h20 cwhite v71ava, 71 Avalon
Gui, Add, CheckBox, x142 y80 w70 h20 cwhite v72ava, 72 Avalon
Gui, Add, CheckBox, x212 y80 w70 h20 cwhite v73ava, 73 Avalon
Gui, Add, CheckBox, x282 y80 w70 h20 cwhite v74ava, 74 Avalon
Gui, Add, CheckBox, x352 y80 w70 h20 cwhite v75ava, 75 Avalon
Gui, Add, CheckBox, x422 y80 w70 h20 cwhite v76ava, 76 Avalon
Gui, Add, CheckBox, x2 y100 w70 h20 cwhite v77ava, 77 Avalon
Gui, Add, CheckBox, x72 y100 w70 h20 cwhite v78ava, 78 Avalon
Gui, Add, CheckBox, x142 y100 w70 h20 cwhite v79ava, 79 Avalon
Gui, Add, CheckBox, x212 y100 w70 h20 cwhite v80ava, 80 Avalon
Gui, Add, CheckBox, x282 y100 w70 h20 cwhite v81ava, 81 Avalon
Gui, Add, CheckBox, x352 y100 w70 h20 cwhite v82ava, 82 Avalon
Gui, Add, CheckBox, x422 y100 w70 h20 cwhite v83ava, 83 Avalon
Gui, Add, CheckBox, x2 y120 w70 h20 cwhite v84ava, 84 Avalon
Gui, Add, CheckBox, x72 y120 w70 h20 cwhite v85ava, 85 Avalon
Gui, Add, Text, x2 y160 w490 h20 +Center cred, Auto Castlot Levy Troops 

Scripts
Gui, Add, CheckBox, x2 y180 w80 h20 cwhite, 1 Pages
Gui, Add, CheckBox, x82 y180 w80 h20 cwhite, 2 Pages
Gui, Add, CheckBox, x162 y180 w80 h20 cwhite, 3 Pages
Gui, Add, CheckBox, x242 y180 w80 h20 cwhite, 4 Pages
Gui, Add, CheckBox, x322 y180 w80 h20 cwhite, 5 Pages
Gui, Add, CheckBox, x402 y180 w80 h20 cwhite, 6 Pages
Gui, Add, CheckBox, x2 y200 w80 h20 cwhite, 7 Pages
Gui, Add, CheckBox, x82 y200 w80 h20 cwhite, 8 Pages
Gui, Add, CheckBox, x162 y200 w80 h20 cwhite, 9 Pages
Gui, Add, CheckBox, x242 y200 w80 h20 cwhite, 10 Pages
Gui, Add, CheckBox, x322 y200 w80 h20 cwhite, 15 Pages
Gui, Add, CheckBox, x402 y200 w80 h20 cwhite, 20 Pages
Gui, Add, CheckBox, x2 y220 w80 h20 cwhite, 25 Pages
Gui, Add, CheckBox, x82 y220 w80 h20 cwhite, 50 Pages
Gui, Add, CheckBox, x162 y220 w80 h20 cwhite, 75 Pages
Gui, Add, CheckBox, x242 y220 w80 h20 cwhite, 100 Pages
Gui, Add, CheckBox, x322 y220 w80 h20 cwhite, 150 Pages
Gui, Add, CheckBox, x402 y220 w80 h20 cwhite, 200 Pages
Gui, Add, Button, x162 y260 w150 h20 default gAuto cwhite, Start Selected 

Script
Gui, Show, x262 y115 h300 w521 , Auto Castlot - Castlot Empire
Gui, Color, Black
Return

Auto:

Gui, submit, nohide
If Floor1 = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 1.ahk
 }
 return
 If Floor2 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 2.ahk
 }
return
 If Floor3 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 3.ahk
}
return
If Floor4 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 4.ahk
 }
Return
If Floor5 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 5.ahk
 }
return
If Floor6 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 6.ahk
}
return
If Floor7 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 7.ahk
 }
return
 If 70ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
 }
return

If ava71 = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\71 ava.ahk
 }
return

If 72ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
}
return
If 73ava = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
}
return
If 74ava = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
}
return
If 75ava = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
}
return
If 76ava = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
}
return
If 77ava = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
}
return
If 78ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
 }
return
If 79ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
 }
return
If 80ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
 }
return
If 81ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
}
return
If 82ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\82 ava.ahk
 }
return
If 83ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
 }
return
 If 84ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
 }
 return
If 85ava = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\unfinished.ahk
 }
 return

GuiClose:
ExitApp 
```

^这是整个代码（部分未完成）

```
Gui, submit, nohide
If Floor1 = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 1.ahk
 }
 return
 If Floor2 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 2.ahk
 }
return
 If Floor3 = 1
{Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 3.ahk
}
return
If Floor4 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 4.ahk
}  
 Return
If Floor5 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 5.ahk
 }
return
If Floor6 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 6.ahk
}
return
If Floor7 = 1
 {Run C:\Users\Lord Of Death\Desktop\AHK Scripts\floor 7.ahk
}
return 
```

这可以正常工作，但是从那里开始的代码减去关闭没有=[

对我可能做错的事情有任何帮助吗？

# html - 如何将图像和跨度标签放在同一个div中以在同一行显示它们的内容

> ID：13785450
> 
> 赞同：6
> 
> 时间：2012-12-09T07:09:20.017
> 
> 标签：html, css

我有以下代码

```
 <div class="expense"><img class="money"/><span class="total"></span></div> 
```

这将生成 div 并将图像放在一行上，并将 span 标签中的内容放在另一行上。我怎样才能把它们放在同一条线上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T07:11:17.173

CSS：`display: inline-block`或`display: inline`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T07:14:23.797

你也可以这样做：

```
<div class="expense" style="display:table-row">
    <img class="money" style="display:table-cell" />
    <span class="total" style="display:table-cell"></span>
</div> 
```

这不是最整洁的，但它是另一种选择

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-17T11:32:01.320

您可以使用 vertical-align : super 来跨越。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-01T21:37:36.510

你可以使用弹性：

```
.expense {
  display: flex;
  align-items: center;
} 
```

# java - JDBC 驱动程序不支持 XA 问题

> ID：13785451
> 
> 赞同：7
> 
> 时间：2012-12-09T07:09:40.960
> 
> 标签：java, jdbc, transactions, soa, xa

我收到“JDBC 驱动程序不支持 XA 问题”

提交事务时出错：; 嵌套异常是：javax.transaction.xa.XAException：JDBC 驱动程序不支持 XA，因此不能参与两阶段提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-03-24T17:11:08.697

在 Weblogic 控制台中，转到`Services`> `Datasources`。

单击您的数据源。然后，单击`Transaction`选项卡：

*   `Supports Global Transactions`应该已经被选中。
*   选择`Emulate Two-Phase Commit`。

保存此配置并重新启动服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T07:12:35.123

将 GlobalTransactionsProtocol 属性设置为 LoggingLastResource（推荐）或数据源的 EmulateTwoPhaseCommit。这应该有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-14T07:11:55.387

您仍然面临此问题，请重新启动 weblogic 服务器并检查。

# ios - iOS App Bundle 中的多个本地化 .strings 文件

> ID：13785455
> 
> 赞同：9
> 
> 时间：2012-12-09T07:10:25.093
> 
> 标签：ios, localization, uikit, nsbundle, nslocalizedstring

我有一个相当复杂的项目，由几个大型本地化子项目组成。

我的大多数子项目都通过单个**Localizable.strings**文件进行本地化。该文件被复制到一个目标中，该目标与主项目中`SubProjectName.bundle`的静态库一起使用。`SubProjectName.a`这工作正常。

但是，我的一个子项目包含许多本地化的 .strings 文件。无论设备（或模拟器）如何配置，*该项目都无法读取除 English 以外的任何语言的字符串。*

例如，这行代码总是返回英文字符串：

```
[[NSBundle myResourcesBundle] localizedStringForKey:@"MY_TEST_STRING" value:@"" table:@"MyTable"] 
```

其中`MyTable`对应于本地化为多种语言的 MyTable.strings 文件。当我查看 .app 包时，所有的本地化都在那里，位于应用程序内的“MyBundle.bundle”资源中。

但是，以下代码可以在所有本地化中正确找到给定字符串的翻译：

```
for (NSString *language in [[NSUserDefaults standardUserDefaults] objectForKey:@"AppleLanguages"])
{
    NSBundle *bundle = [NSBundle bundleWithPath:[[NSBundle myResourcesBundle] pathForResource:language ofType:@"lproj"]];
    NSLog(@"%@: %@", language, NSLocalizedStringFromTableInBundle(@"MY_TEST_STRING", @"MyTable", bundle, nil));
} 
```

因此，当捆绑包是实际`MyBundle.bundle/<LanguageCode>.lproj`文件夹时，字符串查找有效。但这显然违背了 iOS 提供的自动查找的目的。

（请注意，`[NSBundle myResourcesBundle]`上面只是为子项目获取我的自定义包的静态便捷方法）。

--

**编辑**：我一直在尝试这个，如果我`en.lproj`从我的子项目的包中删除文件夹，那么它会正确使用设备或模拟器的语言环境。

例如，我有：

```
MyApp.app/
 |
  - MyResources.bundle/
      |
       - en.lproj/
      |
       - zh-Hans.lproj/ 
```

当我将模拟器（或设备）设置为简体中文*时，`en.lproj`即使语言环境是`zh-Hans`*. 如果我删除`en.lproj`文件夹并重新启动应用程序，它会正确使用 zh-Hans 本地化。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T14:44:20.360

我能够重现并修复该问题，尽管该解决方案确实暗示 NSBundle 中存在错误。

我用以下捆绑结构复制了它：

```
MyApp.app/
 |
  - MyResources.bundle/
      |
       - en.lproj/
      |
       - fr.lproj/ 
```

和代码：

```
 NSLog(@"A key: %@", NSLocalizedString(@"A key", nil));
  NSBundle *bundle = [NSBundle bundleWithPath: [[NSBundle mainBundle] pathForResource: @"MyResources" ofType: @"bundle"]];
  NSLog(@"Current locale: %@", [[NSLocale currentLocale] localeIdentifier]);
  NSLog(@"Bundle localizations: %@", [bundle localizations]);
  NSLog(@"Key from bundle: %@", [bundle localizedStringForKey: @"A key" value: @"Can't find it." table: nil]);
  NSLog(@"Key using bundle macro: %@", NSLocalizedStringFromTableInBundle(@"A key",
                                                                             nil,
                                                                             bundle,
                                                                             nil)); 
```

将语言环境设置为 fr_FR（即法语），捆绑包从英语字符串表中挑选了字符串——即使字符串“找不到它”也不会出现。

在不更改代码的情况下，我可以使用以下结构来获取法语字符串：

```
MyApp.app/
 |
  - MyResources.bundle/
      |
       - Resources/
          |
           - en.lproj/
          |
           - fr.lproj/ 
```

看起来 NSBundle 仍然期望旧的 Mac OS X 包结构而不是 iOS 应该使用的结构。所以一个简单的bundle结构改变应该可以解决这个问题......

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-04T03:06:18.270

补充一下大卫·多伊尔所说的话。

确保在包和应用程序本身的项目的信息部分中设置可用语言。因此，例如，如果您的应用程序支持法语和英语，请确保您的包和您的应用程序都具有在您的项目的可用本地化中定义的法语和英语语言。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-09T07:21:48.193

我现在对此有一个 hacky 解决方案，但如果有人有更好的答案（或解释为什么上述方法不起作用），我将不胜感激。

我扩展了我的 NSBundle 类别以包含首选语言资源：

标题

```
@interface NSBundle (MyBundle)

+ (NSBundle*) myResourcesBundle;
+ (NSBundle*) myPreferredLanguageResourcesBundle;

@end 
```

执行

```
@implementation NSBundle (MyBundle)

+ (NSBundle*) myResourcesBundle
{
    static dispatch_once_t onceToken;
    static NSBundle *myLibraryResourcesBundle = nil;

    dispatch_once(&onceToken, ^
    {
        myLibraryResourcesBundle = [NSBundle bundleWithURL:[[NSBundle mainBundle] URLForResource:@"MyResources" withExtension:@"bundle"]];
    });

    return myLibraryResourcesBundle;
}

+ (NSBundle*) myPreferredLanguageResourcesBundle
{
    static dispatch_once_t onceToken;
    static NSBundle *myLanguageResourcesBundle = nil;

    dispatch_once(&onceToken, ^
                  {
                      NSString *language = [[[NSBundle myResourcesBundle] preferredLocalizations] firstObject];
                      myLanguageResourcesBundle = [NSBundle bundleWithPath:[[NSBundle myResourcesBundle] pathForResource:language ofType:@"lproj"]];

                      if( myLanguageResourcesBundle == nil )
                      {
                          myLanguageResourcesBundle = [NSBundle myResourcesBundle];
                      }                
                  });

    return myLanguageResourcesBundle;
}

@end 
```

然后我有一个简单的宏来获取我的本地化字符串：

```
#define MyLocalizedDocumentation(key, comment, chapter) \
  NSLocalizedStringFromTableInBundle((key),(chapter),[NSBundle myPreferredLanguageResourcesBundle],(comment)) 
```

该解决方案只是从中获取首选语言代码`NSLocale`，然后检查该语言是否存在捆绑包。如果没有，它会退回到主资源包（也许它应该遍历 NSLocale 首选语言索引以检查包是否存在？有人知道吗？）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T06:31:18.613

不清楚你的问题，但我使用这个宏来使用多个本地化字符串文件：

```
#define CustomLocalizedString(key, comment) \
  [[[NSBundle mainBundle] localizedStringForKey:(key) value:nil table:nil] isEqualToString:(key)] ? \
  [[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:@"MyTable"] : \
  [[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:nil] 
```

或者你可以试试

```
[[NSBundle mainBundle] localizedStringForKey:(key) value:[[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:@"MyTable"] table:nil] 
```

这将首先检查**Localizable.strings**，如果密钥不存在，它将返回密钥本身，然后检查并使用**MyTable.strings**。当然，您最好使用前缀命名您的密钥。例如`"KYName" = "Name";`。

如果这是您想要的，请随时查看我之前提出的[这个问题。](https://stackoverflow.com/questions/12552843/how-to-define-a-function-macro-to-check-key-between-multiple-localized-string-fi);)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-20T00:43:29.430

我有另一个解决方案。

```
#define localizedString(key)    [NSLocalizedString(key, nil) isEqualToString:key] ? \
                            [[NSBundle bundleWithPath:[[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"]]  localizedStringForKey:key value:@"" table:nil] : \
                            NSLocalizedString(key, nil) 
```

例如，如果我们要找到一个键 "title" = "Manager"; 在 Localizable.strings (fr) 中，如果不存在，则键“title”的结果将与键相同。

在这种情况下，我们可以在 localizable.string (en) 中找到键“title”，但如果可以在 (fr) 中找到，我们就可以使用它。

# sed - sed：如何确定第 1 行是否包含在第 2 行中

> ID：13785464
> 
> 赞同：2
> 
> 时间：2012-12-09T07:12:33.400
> 
> 标签：sed

我的文本文件按字母顺序排序。我想确定每一行是否包含在下一行中，如果是，则删除两者中的第一行。所以，例如，如果我有...

```
car 
car and trailer
train 
```

......我想结束......

```
car and trailer
train 
```

我找到了“sed one-liners”页面，其中包含搜索重复行的代码：

sed '$!N; /^(.*)\n\1$/!P; D'

...我认为删除 ^ 可以解决问题，但事实并非如此。

（使用不连续的行来执行此操作也很好，但我的文件运行到数千行，并且可能需要脚本数小时或数天才能运行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:56:26.883

sed 是在单行上进行简单替换的出色工具，其他任何事情只需使用 awk：

```
awk '$0 !~ prev{print prev} {prev=$0} END{print}' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T07:30:25.883

The original command

```
sed '$!N; /^\(.*\)\n\1$/!P; D' 
```

Looks for an exact line match. As you want to check if the first line is contained in the second, you need to add some wild cards:

```
sed '$!N; /^\(.*\)\n.*\1.*$/!P; D' 
```

Should do it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T08:35:45.350

你说：

> 用不连续的行来做这件事也很好。

这是一个`bash`脚本，用于删除另一行中包含的所有较短的行，不一定是连续的，不区分大小写：

```
#!/bin/bash
# sed with I and Q are gnu extensions:
cat test.txt | while read line; do
   echo Searching for: $line
   sed -n "/.$line/IQ99;/$line./IQ99" test.txt # or grep -i
   if [ $? -eq 99 ]; then
      echo Removing: $line
      sed -i "/^$line$/d" test.txt
   fi   
done 
```

测试：

```
$ cat test.txt
Boat
Car
Train and boat
car and cat

$ my_script
Searching for: Boat
Removing: Boat
Searching for: Car
Removing: Car
Searching for: Train and boat
Searching for: car and cat

$ cat test.txt
Train and boat
car and cat 
```

# google-maps - 美国的默认中心？

> ID：13785466
> 
> 赞同：20
> 
> 时间：2012-12-09T07:12:44.633
> 
> 标签：google-maps, google-maps-api-3

默认情况下，谷歌提供了这个如何在伊利诺伊州芝加哥居中地图的示例：

```
var chicago = new google.maps.LatLng(41.850033, -87.6500523); 
```

是否可以让默认中心专注于整个美国？我在任何地方都找不到这个。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-09T07:43:42.410

以芝加哥为中心，然后将`zoom`.

这里有一个[例子](https://stackoverflow.com/a/5663492/62576)。略微修改的版本（未经测试！）：

```
gMap = new google.maps.Map(document.getElementById('map')); 
gMap.setCenter(new google.maps.LatLng(41.850033, -87.6500523));
gMap.setZoom(ANewZoomLevel); 
```

您需要尝试找到适合您需要的缩放级别。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-04-24T00:19:00.250

使用美国本土地理中心：
黎巴嫩、堪萨斯。可能是地球上最无聊的地方。

[http://www.kansastravel.org/geographicalcenter.htm](http://www.kansastravel.org/geographicalcenter.htm)

我发现**3、4 或 5 的缩放**是完美的。

```
gMap = new google.maps.Map(document.getElementById('map')); 
gMap.setCenter(new google.maps.LatLng(39.8097343, -98.5556199));
gMap.setZoom(3); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-09T08:08:44.093

一种选择是使用地理编码器。如果您[对 "United States of America" 进行地理编码](http://www.geocodezip.com/v3_example_geo2.asp?addr1=United%20States%20of%20America&geocode=1)，它会返回一个“建议的视口”，可用于居中和缩放地图：

```
"viewport": {
  "Z": {
    "b": 25.82,
    "d": 49.38
  },
  "ca": {
    "b": -124.38999999999999,
    "d": -66.94
  }
} 
```

地理编码器返回的中心/位置是：`37.09024, -95.712891`

翻译为：

```
"viewport": {
  NorthEast: { lat:49.38, lng:-66.94 },
  SouthWest: { lat:25.82, lng:-124.39 }
} 
```

[小提琴](http://jsfiddle.net/74p6041g/)

有两条相似的信息，边界和建议的视口。我相信边界包括阿拉斯加和夏威夷，视口可能更适合您的需求。

最简单的方法是手动将地图居中并按您喜欢的方式缩放，然后使用 getCenter() 和 getZoom() 获取当前值，然后使用这些值来初始化地图。

这是一个[使用地理编码从下拉列表中缩放到国家/](http://geocodezip.com/v3_zoom2countrySelectList.html)地区的示例，（它使用边界，而不是视口，这对于美国来说是不同的）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-28T12:58:43.287

既然是整个美国，用 LatLng 进小数似乎很愚蠢。我喜欢：

```
new google.maps.Map($map, {
    center: new google.maps.LatLng(39, -95),
    zoom: 3
}); 
```

[jsfiddle 示例](http://jsfiddle.net/b9chris/AQpwW/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-21T21:20:55.037

Fit bounds 效果最好，因为缩放取决于设备宽度。在一台设备上看起来不错的东西对于另一台设备来说太大或太小。因此：

```
var bounds = new google.maps.LatLngBounds(
  new google.maps.LatLng(25.82, -124.39),
  new google.maps.LatLng(49.38, -66.94)
);

map.fitBounds(bounds); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-07T16:37:42.530

使用芝加哥不是很灵活。在美国的极端红衣主教处取点，本质上是创建一个边界框，然后将它们添加到边界对象并使用它来适应您的边界并在地图上缩放：

```
var bounds = new google.maps.LatLngBounds();
bounds.extend(new google.maps.LatLng(24.891752, -98.4375));
bounds.extend(new google.maps.LatLng(40.351289, -124.244385));
bounds.extend(new google.maps.LatLng(44.488196, -70.290656));
bounds.extend(new google.maps.LatLng(49.000282, -101.37085));
map.setCenter(bounds.getCenter());
map.fitBounds(bounds); 
```

无论画布大小如何，这都适合您的地图。

# mysql - 将帖子从一个博客复制到另一个博客后出现 W3C RSS 错误

> ID：13785468
> 
> 赞同：5
> 
> 时间：2012-12-09T07:13:12.827
> 
> 标签：mysql, wordpress, rss

将最后一篇文章从一个 Wordpress 博客复制到不同域中的另一个的脚本有问题。

一切正常，我们已经使用该脚本一年多了。尽管如此，所复制帖子的 RSS 提要从未经过 W3C 验证。

W3C 为这些帖子显示的典型错误是：

> 此提要未验证。第 25 行，第 43 列：pubDate 必须是 RFC-822 日期时间：Wed, 30 Nov -0001 00:00:00 +0000 [help] Wed, 30 Nov -0001 00:00:00 +0000 此外，互操作性通过实施以下建议，可以改进使用范围最广的提要阅读器。第 28 行，第 28 列：guid 不应为空（出现 8 次）[帮助]

该脚本在外部执行，无法访问 WP 函数或`wpdb`类。

所有函数都在一个类中。这是代码：

```
 /**

 */
class CopyPostClass {

  /**
   * @param $PostTitle
   * @param $PostContent
   * @param $PostSlug
   * @param $PostType
   * @param $AuthorID
   * @return bool
   */
  public function SavePostTarget( $PostTitle, $PostContent, $AuthorID, $PostSlug, $PostType ) {

    global $TargetLink;

    $PostDate  = new DateTime( date( 'Y-m-d H:i:s' ) );
    $PostTitle = str_replace( "'", '"', $PostTitle );

    $SavePostQuery = "INSERT INTO  wp_posts  (
     post_title,
     post_content,
     post_author,
     post_name,
     post_type,
     post_date,
     post_modified,
     post_status
     )
     VALUES (
     '" . $PostTitle . "',
     '" . $PostContent . "',
     '" . $AuthorID . "',
     '" . $PostSlug . "',
     '" . $PostType . "',
     '" . $PostDate->format( 'Y-m-d H:i:s' ) . "',
     '" . $PostDate->format( 'Y-m-d H:i:s' ) . "',
     'publish'
     )";

    $SavePostResult = mysql_query( $SavePostQuery, $TargetLink );
    $SavedRows      = mysql_affected_rows( $TargetLink );
    if ( $SavePostResult && $SavedRows > 0 ) {
      return TRUE;
    }
    else {
      echo "ERROR Saving new post to target WP Blog!<br /><br />";
      echo mysql_error() . "<br /><br />";
      return FALSE;
    }
  }

  /**
   * @return resource
   */
  public function ConnectSource() {

    $SourceHost     = 'SourceDomainn.com';
    $SourceUsername = 'SourceDomainUserName';
    $SourcePassword = 'SourceDomainPass';
    $SourceDatabase = 'SourceDomainDataBase';

    $SourceLink = mysql_connect( $SourceHost, $SourceUsername, $SourcePassword );
    mysql_select_db( $SourceDatabase, $SourceLink ) or die( "Unable to select Source database" );
    mysql_set_charset( 'utf-8', $SourceLink );

    if ( !$SourceLink ) {
      echo "Conection to source WP Blog Database FAILED!<br /><br />";
      die;
    }
    else {
      return $SourceLink;
    }
  }

  /**
   * @return resource
   */
  public function ConnectTarget() {

    $TargetHost     = 'TargetDomain.com';
    $TargetUsername = 'TargetDomainUserName';
    $TargetPassword = 'TargetDomainPass';
    $TargetDatabase = 'TargetDomainDataBase';

    $TargetLink = mysql_connect( $TargetHost, $TargetUsername, $TargetPassword );
    mysql_select_db( $TargetDatabase, $TargetLink ) or die( "Unable to select Target database" );
    mysql_set_charset( 'utf-8', $TargetLink );

    if ( !$TargetLink ) {
      echo "Conection to target WP Blog Database FAILED!<br /><br />";
      die;
    }
    else {
      return $TargetLink;
    }
  }
} 
```

我不知道如何解决这个问题，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:37:09.250

W3C 错误显示日期格式错误并且缺少 guid。

创建帖子时添加这些字段可以解决第一个错误：

`post_date_gmt`和`post_modified_gmt`

另一方面，`guid`添加此字段可以满足有关的建议：

`guid`

像这样：

```
 public function SavePostTarget( $PostTitle, $PostContent, $AuthorID, $PostSlug, $PostType ) {

  $PostDate   = new DateTime( date( 'Y-m-d H:i:s' ) );
  $PostTitle  = str_replace( "'", '"', $PostTitle );

  $GMTDate    = gmdate( 'Y-m-d H:i:s' ); // ADDED - GMT Date Time should be included to avoid RSS errors
  $TargetHost = 'TargetDomain.com'; // ADDED
  $PostGuid   = "$TargetHost/$PostSlug"; // ADDED - Guid should be included to avoid RSS errors

  $SavePostQuery = "INSERT INTO  wp_posts  (
     post_title,
     post_content,
     post_author,
     post_name,
     post_type,
     post_date,
     post_modified,
     post_status,
     post_date_gmt,
     post_modified_gmt,
     guid
     )
     VALUES (
     '" . $PostTitle . "',
     '" . $PostContent . "',
     '" . $AuthorID . "',
     '" . $PostSlug . "',
     '" . $PostType . "',
     '" . $PostDate->format( 'Y-m-d H:i:s' ) . "',
     '" . $PostDate->format( 'Y-m-d H:i:s' ) . "',
     'publish',
     '" . $GMTDate . "',
     '" . $GMTDate . "',
     '" . $PostGuid . "'
     )";

  ... 
```

# java - 将图像放入 res/drawable 目录后的语法错误

> ID：13785469
> 
> 赞同：0
> 
> 时间：2012-12-09T07:13:19.970
> 
> 标签：java, syntax-error, android-2.2-froyo

> **可能重复：**
> [Android：带有数字的可绘制资源。是否可以？](https://stackoverflow.com/questions/7096892/android-drawable-resource-with-numbers-is-it-possible)

我正在创建一个包含图像的 android 应用程序。

每对图像都包含以下命名约定：

```
001a.jpg
001b.jpg

002a.jpg
002b.jpg
... 
```

因为我将图像处理到 res/drawable 目录，所以我复制的每个图像都有语法错误。我复制了 40 张图片，因此有 40 条语法错误消息。

语法错误消息仅包含图像的编号，而不包含所有图像名称。例如： 而不是`001a.jpg`and`001b.jpg`我只看到以下两次：

```
Syntax error on token: "001". delete this token 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:18:30.553

资源必须遵循名称模式（在您的情况下不是以数字开头），因为文件名用作`R`. 所以它必须是一个有效的java标识符。

# cakephp-2.1 - 使用索引操作传入 id - CakePHP 2.1

> ID：13785471
> 
> 赞同：1
> 
> 时间：2012-12-09T07:14:00.020
> 
> 标签：cakephp-2.1

我的 CakePHP 应用程序中有一个名为“Profiles”的控制器，这就是我称为 index 的操作：

```
function index($id = NULL) {
    $this->set('profile', $this->Profile->findById($id));
} 
```

因此，使用此方法传入 id，然后我可以根据链接中的 id 返回正确的配置文件。

当我在一个名为 view 的操作上执行此操作时，这很好用，但是当我尝试在 index 操作上执行此操作时，它会将我的 id 视为一个操作，并返回一个错误，指出该操作不存在。有没有办法在 CakePHP 中的索引动作上传递 id，或者它必须在索引之外的动作上，例如视图动作？

干杯，

亚当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:14:09.310

如果您想将 id 传递给您的方法，则必须访问其中包含 id 的 url。

```
/profiles/index/<id_here> 
```

蛋糕会`/profiles`神奇`/profiles/index`地加载。您不能`/profiles/<id>`开箱即用，这需要一个新的 Route 才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:11:37.530

如果您使用 Bake 函数创建控制器，则 Index 方法将用于显示 Profile 模型中的多个记录。

您在问题中显示的三行代码是控制器的实际代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T20:34:17.040

这可以通过自定义路由来完成。将参数传递给操作...

```
Router::connect('/mycontroller/:id', array('controller' => 'mycontroller', 'action' => 'index'), array('pass' => array('id') ) ); 
```

在你的控制器中......

```
public function index( $id ) 
```

[http://book.cakephp.org/3.0/en/development/routing.html#passing-parameters-to-action](http://book.cakephp.org/3.0/en/development/routing.html#passing-parameters-to-action)

# php - 基于部分字符串取消设置数组值

> ID：13785472
> 
> 赞同：0
> 
> 时间：2012-12-09T07:14:01.177
> 
> 标签：php, arrays

我有以下数组

```
Array ( 
[0] => 1_09122012070025_img1_L.jpg 
[1] => 1_09122012070025_img_L.jpg 
[2] => 1_09122012070025_img2_S.jpg 
[3] => 1_09122012070025_img1_S.jpg 
[4] => 1_09122012070025_img_S.jpg 
[5] => 1_09122012070025_img2_L.jpg 
) 
```

我正在尝试取消设置具有 S 的值，以便我留下键 0、1、5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:17:02.237

```
<?php
$array = Array(
    '1_09122012070025_img1_L.jpg',
    '1_09122012070025_img_L.jpg',
    '1_09122012070025_img2_S.jpg',
    '1_09122012070025_img1_S.jpg',
    '1_09122012070025_img_S.jpg',
    '1_09122012070025_img2_L.jpg'
);

foreach($array as $k=>$a){
    if(preg_match("/_S.jpg/",$a)){
        unset($array[$k]);
    }
}

echo '<pre>';
print_r($array);
echo '</pre>';?> 
```

注意：我匹配“_S.jpg”，而你可以只匹配“S”。

# wpf - 棱镜：外壳区域视图更改未反映在 xaml 视图中

> ID：13785477
> 
> 赞同：1
> 
> 时间：2012-12-09T07:14:32.453
> 
> 标签：wpf, module, prism, region, bootstrapper

我在 shell 中定义了两个区域：MainRegion 和 ToggleRegion。切换区域包含一个按钮，单击该按钮我想更改主区域中的区域。

这是我在 shell 中注册区域的 xaml 代码。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" ></RowDefinition>
        <RowDefinition Height="30"></RowDefinition>
    </Grid.RowDefinitions>

    <ContentControl Grid.Row="0" Regions:RegionManager.RegionName="MainRegion"></ContentControl>
    <ContentControl Grid.Row="1" Regions:RegionManager.RegionName="ToggleRegion"></ContentControl>

</Grid> 
```

我的 Bootstrapper 添加 MainModule 我在 Region 中注入视图的位置

```
 protected override IModuleCatalog CreateModuleCatalog()
    {
        var catalog = new ModuleCatalog();
        catalog.AddModule(typeof (MainModule));
                   return catalog;
    } 
```

我的 MainModule 类

```
 public void Initialize()
    {
        regionManager.RegisterViewWithRegion("MainRegion", typeof(MainView));
        regionManager.RegisterViewWithRegion("ToggleRegion", typeof(ToggleView));

     } 
```

在运行应用程序时，我可以看到 MainRegion 和 ToggleRegion 中加载了 MainView 和 ToggleView。但是当我单击切换区域中的按钮以更改主区域中的视图时。主要区域视图没有改变。

我的按钮单击事件中的代码

```
{
     IRegion region = regionManager.Regions["MainRegion"];

        var view = region.Views.SingleOrDefault();
        region.Remove(view);
        regionManager.RegisterViewWithRegion("MainRegion", typeof(ViewOnButtonClick));
        region.Activate(view); 
```

}

在调试时，我可以看到区域首先删除 MainView，然后激活 viewonbuttonclick，但同样没有反映在我的 xaml 视图中。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:46:51.150

I think the problem is here

```
var view = region.Views.SingleOrDefault();
    region.Remove(view);
    regionManager.RegisterViewWithRegion("MainRegion", typeof(ViewOnButtonClick));
    region.Activate(view); 
```

What I would do is register all the views upfront..

```
regionManager.RegisterViewWithRegion("MainRegion", typeof(MainView));
regionManager.RegisterViewWithRegion("ToggleRegion", typeof(ToggleView));
regionManager.RegisterViewWithRegion("MainRegion", typeof(ViewOnButtonClick)); 
```

and then instead of removing a view from the region get the view by the view name you've given it.. and then activate

```
 var view = region.Views.SingleOrDefault(v => v != null && v.GetType() == typeof     (ViewOnButtonClick); 

      region.Activate(view); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:27:25.860

问题出在我的引导程序类上。我是这样启动应用程序的：-

```
protected override DependencyObject CreateShell()
    {
        Shell shell = new Shell();
       Application.Current.MainWindow = null;
       Application.Current.StartupUri = new Uri("Shell.xaml", UriKind.RelativeOrAbsolute);
       return (DependencyObject)shell;
    } 
```

使用 shell.show() 而不是 current.startupuri 允许我更改按钮单击时的视图。

# jquery - jQuery - 使用退格按键事件删除列表项？

> ID：13785479
> 
> 赞同：0
> 
> 时间：2012-12-09T07:14:57.620
> 
> 标签：jquery

我希望能够单击列表项，然后按退格键将其删除。我将如何使用 jQuery 来做到这一点？

```
$('<li>Click Me</li>')
.appendTo('#list')
.click(function(){
   $(this).addClass('delete');
   $(this).focus(); // doesn't seem to do anything maybe??
})
.keypress(function(e){
    // this event handler doesn't fire
    var key = (e.keyCode ? e.keyCode : e.which);
    if (key === 8) {
        if ($(this).hasClass('delete'))
            $(this).remove();
    }
}); 
```

这是我的jsfiddle：

[http://jsfiddle.net/prRVc/](http://jsfiddle.net/prRVc/)

看起来我无法将按键事件附加到列表项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:27:37.003

您不能在列表元素上使用焦点。您将一无所获：) 尝试使用另一种解决方案，为文档按键创建单独的处理程序，并使用“删除”类处理列表：

```
$(document).keypress(function(e){
    var key = (e.keyCode ? e.keyCode : e.which);
    if (key === 8) {
        $('li.delete').remove();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:34:26.687

您需要尝试在文档级别使用密钥处理程序。此外，使用“keydown”而不是“keypress”更安全。工作示例：http: [//jsfiddle.net/DwX4e/](http://jsfiddle.net/DwX4e/)

```
$('<li>Click Me</li>')
.appendTo('#list')
.click(function(){
   $(this).addClass('delete');
   $(this).focus();
})

$(document).on('keydown', function(e){
    if(e.keyCode === 8){
       $('li.delete').remove();
    }
}); 
```

# vb.net - vb.net 网络浏览器控制 javascript 和 php

> ID：13785480
> 
> 赞同：0
> 
> 时间：2012-12-09T07:15:05.137
> 
> 标签：vb.net

我是 VB.NET 的新手。我创建了一个简单的 Web 浏览器，其中包含刷新、返回和转到按钮以及 Web 浏览器控件。现在我的问题是，每当我使用 javascript 加载网站时，都会弹出一条错误消息。我想要的是在网络浏览器控件上自动启用 javascript。此外，每当我加载一个 php 站点时，加载时间太长。请帮助我。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:49:30.210

您是否尝试将`ScriptErrorsSuppressed`WebBrowser 的属性设置为`True`？这应该可以防止出现对话框。

# java - 拖动文本区域

> ID：13785490
> 
> 赞同：3
> 
> 时间：2012-12-09T07:16:59.717
> 
> 标签：java, swing, draggable, jtextarea

**有问题的代码：**

```
 textArea.addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            posX = e.getX();
            posY = e.getY();
        }
    });
    textArea.addMouseMotionListener(new MouseAdapter() {
        public void mouseDragged(MouseEvent e) {
            setLocation(e.getXOnScreen() - posX, e.getYOnScreen() - posY);
        }
    }); 
```

**背景：**

我有一个 JFrame，在那个 JFrame 中有一个 JScrollPane，在 JScrollPane 中有一个名为“textArea”的 JTextArea。这个 JTextArea 占据了整个 JFrame 并且 JFrame 是未修饰的。所以给出一些观点，这通常是 JFrame 的样子......

![示例图像](../Images/8b0da0ff264bf1c383693305272cb776.png)

当鼠标在 JTextArea 内单击并移动时，整个窗口被拖动。一切都设置为无法专注于这项工作，这意味着它是一个覆盖。

**问题：**

上面列出的代码运行良好，世界和平。但是一旦有足够的文本出现垂直滚动条（由于换行，没有水平滚动条），拖动窗口就会成为问题。当您单击并开始移动时，JFrame 会立即在屏幕上移动得更高。JTextArea 中的行，当您尝试移动它时，它会向上移动。我认为 get*OnScreen() 方法是有问题的，因为它都与 JTextArea 相关。

**有问题的班级：**

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Main extends JFrame {
    private JTextArea textArea;
    private JScrollPane textAreaScroll;
    private int posX = 0;
    private int posY = 0;

public Main() {
    initComponents();
    initListeners();
    for(int i = 0; i < 20; i++){
        addLine(i+" Hello");            
    }
}

public void addLine(String line){
    textArea.append("\n> "+line);
    textArea.setCaretPosition(textArea.getDocument().getLength());
}

private void initListeners(){
    textArea.addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            posX = e.getX();
            posY = e.getY();
        }
    });
    textArea.addMouseMotionListener(new MouseAdapter() {
        public void mouseDragged(MouseEvent e) {
            setLocation(e.getXOnScreen() - posX, e.getYOnScreen() - posY);
        }
    });
}

private void initComponents() {
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (UnsupportedLookAndFeelException | ClassNotFoundException | InstantiationException | IllegalAccessException e) {}

    textAreaScroll = new JScrollPane();
    textArea = new JTextArea();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setUndecorated(true);
    setAlwaysOnTop(true);
    setAutoRequestFocus(false);
    setBackground(new Color(130,210,255,130));
    setFocusCycleRoot(false);
    setFocusable(false);
    setFocusableWindowState(false);
    setName("main");
    setOpacity(0.4f);
    setResizable(false);

    textAreaScroll.setBorder(null);
    textAreaScroll.setFocusable(false);
    textAreaScroll.setRequestFocusEnabled(false);

    textArea.setEditable(false);
    textArea.setBackground(new Color(0, 0, 0));
    textArea.setColumns(20);
    textArea.setFont(new Font("Consolas", 0, 14));
    textArea.setForeground(new Color(255, 255, 255));
    textArea.setLineWrap(true);
    textArea.setRows(5);
    textArea.setText("> Hello world!\n> another line!");
    textArea.setBorder(null);
    textArea.setFocusable(false);
    textArea.setRequestFocusEnabled(false);
    textAreaScroll.setViewportView(textArea);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(textAreaScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 400, Short.MAX_VALUE)
            );
    layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(textAreaScroll, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 214, Short.MAX_VALUE)
            );

    pack();
}

public static void main(String args[]) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            new Main().setVisible(true);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:11:55.340

您是说*JFrame 在屏幕上立即移动得更高。JTextArea 中的行，*但实际上它是向下滚动的，因此只有最后几行可见。

如果您想从顶部查看 textArea 内容，请在此处进行更改

```
initComponents();
initListeners();
for (int i = 0; i < 20; i++) {
   addLine(i + " Hello");
}
//set scrolling position to top
textArea.setCaretPosition(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:18:17.963

好吧，您的诊断绝对正确：

> 当您单击并开始移动时，JFrame 会立即在屏幕上移动得更高。JTextArea 中的行，当您尝试移动它时，它会向上移动。我认为 get*OnScreen() 方法是有问题的，因为它都与 JTextArea 相关。

因此，要解决此问题，请使用GlassPane[*附加*](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)`JFrame`s `MouseXXXListener`，因此我们可以在拖动时获得正确的坐标，此解决方案的主要问题是*glasspane*将消耗用于其他组件的事件`JFrame`，这可以通过`MouseEvent`适当地重新分配 s 来克服） ：

*   创建`JPanel`（此*glassPane* /`JPanel`将通过 透明`setOpaque(false)`），附在`xxxAdapters`此处。

*   创建自定义侦听器类以 redispacth`MouseEvent`到必要的组件（因为*glasspane*将使用`JTextArea`/的所有事件`JScollPane`）

*   设置`JPanel`为您`JFrame`via的 GlassPane `JFrame#setGlassPane(..)`。

*   设置`JFrame`可见而不是通过设置*glassPane*可见`setVisible(true)`（如果您在框架可见之前将其设置为可见，这已经是一段时间的 Swing 故障，它将不会显示）。

这是您的固定代码：

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.MouseInputAdapter;

public class Main extends JFrame {

    private JTextArea textArea;
    private JScrollPane textAreaScroll;
    private JPanel glassPane;//create variable for glasspane

    public Main() {
        initComponents();
        initListeners();
        for (int i = 0; i < 20; i++) {
            addLine(i + " Hello");
        }
    }

    public void addLine(String line) {
        textArea.append("\n> " + line);
        textArea.setCaretPosition(textArea.getDocument().getLength());
    }

    private void initListeners() {
        GlassPaneListener gpl = new GlassPaneListener(textAreaScroll.getVerticalScrollBar(), this);
        //add the adapters/listeners to the glasspane
        glassPane.addMouseMotionListener(gpl);
        glassPane.addMouseListener(gpl);
    }

    private void initComponents() {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (UnsupportedLookAndFeelException | ClassNotFoundException | InstantiationException | IllegalAccessException e) {
        }

        textAreaScroll = new JScrollPane();
        textArea = new JTextArea();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setUndecorated(true);
        setAlwaysOnTop(true);
        setAutoRequestFocus(false);
        setBackground(new Color(130, 210, 255, 130));
        setFocusCycleRoot(false);
        setFocusable(false);
        setFocusableWindowState(false);
        setName("main");
        setOpacity(0.4f);
        setResizable(false);

        textAreaScroll.setBorder(null);
        textAreaScroll.setFocusable(false);
        textAreaScroll.setRequestFocusEnabled(false);

        textArea.setEditable(false);
        textArea.setBackground(new Color(0, 0, 0));
        textArea.setColumns(20);
        textArea.setFont(new Font("Consolas", 0, 14));
        textArea.setForeground(new Color(255, 255, 255));
        textArea.setLineWrap(true);
        textArea.setRows(5);
        textArea.setText("> Hello world!\n> another line!");
        textArea.setBorder(null);
        textArea.setFocusable(false);
        textArea.setRequestFocusEnabled(false);
        textAreaScroll.setViewportView(textArea);
        textAreaScroll.setPreferredSize(new Dimension(200, 200));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(textAreaScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 400, Short.MAX_VALUE));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(textAreaScroll, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 214, Short.MAX_VALUE));

        //create and make glasspane not opaque
        glassPane = new JPanel();
        glassPane.setOpaque(false);

        //set glasspane as JFrame glassPane
        setGlassPane(glassPane);

        pack();

        setVisible(true);//set JFrame visible

        //glassPane can only be setVisible after JFrame is visible
        glassPane.setVisible(true);
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Main();
            }
        });
    }
}

class GlassPaneListener extends MouseInputAdapter {

    private int posX = 0;
    private int posY = 0;
    Toolkit toolkit;
    private final Container contentPane;
    private final Component textAreaScroll;
    private final Component glassPane;
    private final JFrame frame;
    private boolean wasClickOnInterestedComponent = false;

    public GlassPaneListener(Component textAreaScroll, JFrame frame) {
        toolkit = Toolkit.getDefaultToolkit();
        this.textAreaScroll = textAreaScroll;
        this.frame = frame;
        this.glassPane = frame.getGlassPane();
        this.contentPane = frame.getContentPane();
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        if (!redispatchMouseEvent(e)) {
            frame.setLocation(e.getXOnScreen() - posX, e.getYOnScreen() - posY);
        }
    }

    @Override
    public void mousePressed(MouseEvent e) {
        if (!redispatchMouseEvent(e)) {//check if event was redispatched if not its meant for us :)
            posX = e.getX();
            posY = e.getY();
        }
    }

    @Override
    public void mouseReleased(MouseEvent me) {
        wasClickOnInterestedComponent = false;
    }

    private boolean redispatchMouseEvent(MouseEvent e) {
        Point glassPanePoint = e.getPoint();
        Container container = contentPane;
        Point containerPoint = SwingUtilities.convertPoint(glassPane, glassPanePoint, contentPane);

        // The mouse event is probably over the content pane.
        // Find out exactly which component it's over.
        Component component = SwingUtilities.getDeepestComponentAt(container, containerPoint.x,
                containerPoint.y);

        if ((component != null) && (component.equals(textAreaScroll)) || wasClickOnInterestedComponent) {
            wasClickOnInterestedComponent = true;//so that if we drag iur cursor off JScrollBar tghe window wont be moved
            // Forward events over the scrollbar
            Point componentPoint = SwingUtilities.convertPoint(glassPane, glassPanePoint, component);
            component.dispatchEvent(new MouseEvent(component, e.getID(), e.getWhen(), e.getModifiers(),
                    componentPoint.x, componentPoint.y, e.getClickCount(), e.isPopupTrigger()));
            return true;//the event was redispatched
        } else {
            return false;//event was not redispatched
        }
    }
} 
```

# sharepoint - Sharepoint仪表板性能点服务？

> ID：13785493
> 
> 赞同：2
> 
> 时间：2012-12-09T07:17:31.110
> 
> 标签：sharepoint, sharepoint-designer

如何使用性能点服务在共享点仪表板中创建多级向下钻取图表？

# javascript - 使用 AJAX 执行 CakePHP JavaScript

> ID：13785503
> 
> 赞同：0
> 
> 时间：2012-12-09T07:20:07.193
> 
> 标签：javascript, ajax, cakephp

我在视图中有一个 JavaScript，但是在使用 AJAX 加载不同的内容后它没有再次执行，所以我想将它放在`<head>`视图中以与 AJAX 隔离，而不必将它放在文件中，因为它使用 PHP 数组控制器。我该怎么做？有没有办法以 CakePHP 的方式编写 JavaScript 代码并将其设置为 inline false 与 JavaScript 文件一样？

似乎即使是头部的 JavaScript 代码也不会使用 AJAX 执行，所以我应该怎么做呢？我应该将与 JavaScript 相关的 div 放在内容 div 之外还是什么？

这是我的看法：

```
 <script>
    var geocoder, lat, lng;
    function initialize() {
        var location = <?php echo "\"" . $location . "\""?>;
        location = location.replace(/\+/g, ' ');
        document.getElementById("address").innerHTML = location + " Weather";
        var latlng = new google.maps.LatLng(<?php echo $loc['lat'];?>, <?php echo $loc['lng'];?>);
        var mapOptions = {
            zoom: 12,
            center: latlng,
            navigationControl: false,
            mapTypeControl: false,
            scaleControl: false,
            draggable: false,
            scrollwheel: false,
            disableDoubleClickZoom: true,
            zoomControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        <?php $i = 0 ?>
        <?php foreach ($posts as $post): ?>
        var markerLatlng = new google.maps.LatLng(<?php echo h($post['Post']['latitude']); ?>, <?php echo h($post['Post']['longitude']); ?>);
        var marker = new google.maps.Marker({
        position: markerLatlng,
        map: map,
        title: '<?php echo h($post['Post']['temperature']); ?>',
        icon: 'http://chart.apis.google.com/chart?chst=d_map_spin&chld=0.6|0|FF0000|12|_|<?php echo h($post['Post']['temperature']); ?>',
        url: '<?php echo $this->Html->url(array('controller' => 'posts', 'action' => 'view', $post['Post']['id'])); ?>'
        });
        google.maps.event.addListener(marker, 'click', function() {
            window.location.href = this.url;
        });
        <?php endforeach; ?>
    }

    function loadScript() {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyBoEBzeiYi-bCaTIlcK7lrNKUyvUfLQqGM&sensor=false&callback=initialize&region=LB";
        document.body.appendChild(script);
    }

    $(document).ready(function(){
        $(".post .toggle").toggle(function(){
            $(".post .toggle").css('background-image','url(../../img/down.png)');
            $(this).css('background-image','url(../../img/up.png)');
            $(".post .description").hide();
            $(this).parent().find(".description").show("slow");
            $(".post").height(100);
            $(this).parent().height(200);},
            function() {$(".post .toggle").css('background-image','url(../../img/down.png)');$(".post").height(100);$(".post .description").hide();$(this).css('background-image','url(../../img/down.png)');
        });
    });

    window.onload = loadScript;
    </script>
    <div id="weather">
    <center><div id="address">&nbsp;</div>
    <p><div id="coords"><?php echo $loc['lat'] . ", " . $loc['lng'];?></div></p></center>
    <div id="weather-menu">
    <?php echo $this->Html->link('Today', 'today/' . $location);?>
    <?php echo $this->Html->link('Yesterday', 'yesterday/' . $location);?>
    <?php echo $this->Html->link('Custom', 'custom/' . $location);?>
    <?php echo $this->Html->link('All', 'all/' . $location);?>
    </div>
    <div id="post-container">
    <?php /*
    if ($posts) {
    echo "<div id=\"post\"><div id=\"temperature\">";
    echo $posts[0]['Post']['temperature'] . "°C</div>";
    if ($posts[0]['Humidity']['humidity'])
        echo "<div id=\"humidity\">" . $posts[0]['Humidity']['humidity'] . "%</div>";
    echo "<div id=\"created\">" . $this->Time->niceShort($posts[0]['Post']['created']) . "              </div>";
        echo "<div id=\"username\">" . $posts[0]['User']['username'] . "</div>";
        echo "<div id=\"condition\">";
        if (strtotime($posts[0]['Post']['created']) > date_sunrise(strtotime($posts[0]         ['Post']['created']), SUNFUNCS_RET_TIMESTAMP, $posts[0]['Post']['latitude'], $posts[0] ['Post']['longitude'],90, 2) && strtotime($posts[0]['Post']['created']) < date_sunset(strtotime($posts[0]['Post']['created']), SUNFUNCS_RET_TIMESTAMP, $posts[0]['Post']['latitude'], $posts[0]['Post']['longitude'],90, 2))      
        echo $this->Html->image('/img/weather-icons/' . $posts[0]['Post']['condition'] . 'A.png');
    else
        echo $this->Html->image('/img/weather-icons/' . $posts[0]['Post']['condition'] . 'B.png');
    echo "</div></div>";
}*/
?>
     <?php

    //$posts = $this->requestAction('/weather/fetch');
        foreach (array_slice($posts, 0) as $post) {
        echo "<div class=\"post\"><div class=\"temperature\">";
        echo $this->Html->link($post['Post']['temperature'] . "°C", array('controller' =>     'posts', 'action' => 'view', $post['Post']['id'])) . "</div>";
    if ($post['Humidity']['humidity'])
        echo "<div class=\"humidity\">" . $post['Humidity']['humidity'] . "%</div>";
    echo "<div class=\"created\">" . $this->Time->niceShort($post['Post']['created']) . "</div>";
    echo "<div class=\"username\">" . $this->Html->link($post['User']['username'], array('controller' => 'users', 'action' => 'view', $post['Post']['user_id'])) . "</div>";
    echo "<div class=\"condition\">";
    if (strtotime($post['Post']['created']) > date_sunrise(strtotime($post['Post']

['created']), SUNFUNCS_RET_TIMESTAMP, $post['Post']['latitude'], $post['Post']['longitude'],90, 2) && strtotime($post['Post']['created']) < date_sunset(strtotime($post['Post']['created']), SUNFUNCS_RET_TIMESTAMP, $post['Post']['latitude'], $post['Post']['longitude'],90, 2))      
        echo $this->Html->image('/img/weather-icons/' . $post['Post']['condition'] . 'A.png');
    else
        echo $this->Html->image('/img/weather-icons/' . $post['Post']['condition'] . 'B.png');
    echo "</div>";
    echo "<div class=\"description\">" . $post['Description']['description'] . "</div>";
    echo "<div class=\"toggle\"></div>";
    echo "</div>";
}
?>
</div>
<div id="side-container">
<div id="map_canvas"></div>
<br/>
<div id ="current"><?php if (isset($w_temp)) echo "Current Temperature: " . $w_temp . "°C" . $this->Html->image('/img/wg.png');?></div>
</div>
<?php
$this->Paginator->options(array(
    'update' => '#content',
    'before' => $this->Js->get('#busy-indicator')->effect('fadeIn', array('buffer' => false)),
    'complete' => $this->Js->get('#busy-indicator')->effect('fadeOut', array('buffer' => false))
));
echo $this->Paginator->prev('« Previous ', null, null, array('class' => 'disabled'));
echo $this->Paginator->next('Next »', null, null, array('class' => 'disabled'));
echo $this->Js->writeBuffer();
?>
<div id="busy-indicator"></div>
</div> 
```

这是我的控制器索引操作：

```
public function index($date, $location = null) {
    $this->set('location', $location);
    $address = urlencode($location);
    $loc = $this->getLocation($address);
    $this->set('loc', $loc);
    $this->loadModel('Post');
    if ($date == 'all') {
        $this->paginate = array('conditions' => array(
                'latitude BETWEEN ? AND ?' => array(
                    $loc['lat'] - 0.05, $loc['lat'] + 0.05), 
                'longitude BETWEEN ? AND ?' => array(
                        $loc['lng'] - 0.05, $loc['lng'] + 0.05)
                ),
            'order' => array('Post.created' => 'desc'),
            'limit' => '5');
        $this->set('posts', $this->paginate('Post'));
    }
    else if ($date == 'today') {
        $this->set('posts', $this->Post->find('all', array(
            'conditions' => array(
                'latitude BETWEEN ? AND ?' => array(
                    $loc['lat'] - 0.05, $loc['lat'] + 0.05), 
                'longitude BETWEEN ? AND ?' => array(
                        $loc['lng'] - 0.05, $loc['lng'] + 0.05),
                'Post.created >' => date('Y-m-d H:i:s', strtotime("-1 day"))
                ),
            'order' => array('Post.created' => 'desc'))));
    }
    else if ($date == 'yesterday') {
        $this->set('posts', $this->Post->find('all', array(
            'conditions' => array(
                'latitude BETWEEN ? AND ?' => array(
                    $loc['lat'] - 0.05, $loc['lat'] + 0.05), 
                'longitude BETWEEN ? AND ?' => array(
                        $loc['lng'] - 0.05, $loc['lng'] + 0.05),
                'Post.created >' => date('Y-m-d H:i:s', strtotime("-2 day")),
                'Post.created <' => date('Y-m-d H:i:s', strtotime("-1 day"))
                ),
            'order' => array('Post.created' => 'desc'))));
    }
    $this->wunder($location);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:45:53.657

谢谢你们。我只需要将它添加到我的 javascript 代码中：

```
var pathname = window.location.pathname;
window.onload = loadScript;
$(document).ready(function() {
    $.ajax({
        url: pathname,
        success: function(){
          loadScript();
        }
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:40:54.760

你写了：

> 我在视图中有一个 JavaScript，但在使用 AJAX 加载不同的内容后它没有再次执行

我只是简单地查看了您在做什么，但我没有立即看到您在哪里发出 AJAX 请求。正如其他人所指出的那样，澄清这一点会很有帮助。但是，请注意，在使用 AJAX 加载新内容后，如果您的脚本对任何替换的内容都有事件处理程序，那么您将需要在 Javascript 中销毁并重新创建事件处理程序（即使您将其替换为相同的 DOM 元素）。

至此：

> 有没有办法以 CakePHP 的方式编写 JavaScript 代码并将其设置为 inline false 与 JavaScript 文件一样？

因此，您执行此操作的方式与在 cakePHP 中引用外部源文件的方式基本相同，您可以替换：

```
<script>
...
</script> 
```

具有以下内容：

```
$this->Html->ScriptBlock('your javascript here', array('inline'=>false)); 
```

然后在该部分中确保您拥有（对于 cakePHP 2.1 或更高版本）：

```
echo $this->fetch('script'); 
```

或（对于 cakePHP 2.0x 或更早版本）

```
$scripts_for_layout(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:16:18.480

由于您使用“AJAX”将脚本注入页面我想，您这样做的方式可能是使用 jQuery 或任何东西通过 element.innerHTML = content 将您的内容拉入 DOM，我错了吗？

但是在 element.innerHTML 中传递的脚本将不会执行，这就是 jQuery 用来分割您的 HTML 响应的内容！

恕我直言，最好的方法是仅使用“AJAX”将数据从您的 CakePHP 应用程序获取到 javascript 前端（带有 JSON 响应），然后您将在您的 javascript 代码中使用这些数据来显示您的图表。它会更有效率，而且你不会遇到鞋底所说的丢失 DOM 元素引用的问题。

或者您可以使用以下 hack 以懒惰的方式执行此操作：

```
<img style="display:none" src="data:image/png,script" onerror="
 console.log('Hey I am javascript code running as long as javascript isnt disabled!');
"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-13T09:59:35.123

```
<script>

// this is new invention like JSON  it seem cute function but it is not

function connect_php() {
jQuery(document).ready(function($){

    setTimeout(function() {
       $("#final_result").css('display', 'block');
    }, 4000); //here 1000 means 1 second

});

}

jQuery(document).ready(function($){

    (function a(x) {
        // The following condition
        // is the base case.
        if ( ! x) {
            return;
        }
        a(--x);
        event.preventDefault();
        $( "#aform" ).submit();
        connect_php();
    })(10);

});

</script> 
```

如果你有 php for 循环做某事必须等待这将在 php 完成或你的循环完成后从 php 发送消息到 JS 中定义的 JavaScript 从开始

# ruby-on-rails - 更新具有图像但没有图像的 _form 部分时，出现错误

> ID：13785504
> 
> 赞同：0
> 
> 时间：2012-12-09T07:20:15.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, fog

我正在使用 Carrierwave & Fog 将图像 str8 推送到 S3。

创建操作工作得很好。问题是每当我去更新记录，比如更改`name`属性，并且我不对图像字段做任何事情时，我都会收到如下所示的错误：

```
Started PUT "/vendors/7" for 67.230.41.62 at 2012-12-09 07:00:51 +0000
2012-12-09T07:00:51+00:00 app[web.1]:   app/controllers/vendors_controller.rb:65:in `update'
2012-12-09T07:00:51+00:00 app[web.1]: NoMethodError (undefined method `thumb_image_changed?' for #<Vendor:0x00000005940750>):
2012-12-09T07:00:51+00:00 app[web.1]: 
2012-12-09T07:00:51+00:00 app[web.1]:   app/controllers/vendors_controller.rb:66:in `block in update' 
```

我`VendorsController#update`看起来很正常：

```
def update
  @vendor = Vendor.find(params[:id])

respond_to do |format|
  if @vendor.update_attributes(params[:vendor])
    format.html { redirect_to @vendor, notice: 'Vendor was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @vendor.errors, status: :unprocessable_entity }
  end
end 
```

结尾

违规行是`update_attributes`.

这是我的`views/vendors/_form.html.erb`

```
<%= simple_form_for(@vendor) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <div class="span8">
        <%= f.input :name, :label => "Vendor Name", :wrapper_html => { :class => "span6" } %>
    </div>
    <div class="span8">
        <%= f.input :intro_text, :label => "The headline for your storefront", :as => :text, :wrapper_html => { :class => "span6" }, :input_html => { :rows => 1 } %>
    </div>    
    <div class="span8">
        <%= f.input :description, :label => "The description of your store", :as => :text, :wrapper_html => { :class => "span6" }, :input_html => { :rows => 5 } %>
    </div>
    <div class="span8">
        <%= f.input :banner_image, :label => "Upload Banner", :wrapper_html => { :class => "span6" } %>    
    </div>
    <div class="span8">
        <%= f.input :logo_image, :label => "Upload Logo", :wrapper_html => { :class => "span6" } %>    
    </div>
    <div class="span8">
        <%= f.button :submit, :class => "btn", :wrapper_html => { :class => "span6" } %>
    </div>
  </div> <!-- /.form-inputs -->

<% end %> 
```

对于它的价值，我的图像尺寸之一`image_uploader.rb`是`thumb`：

```
 version :thumb, :from_version => :main_banner do
    process :resize_to_limit => [170, 120]
  end 
```

关于如何解决这个问题的想法？

**编辑 1**

`Vendor`型号：

```
class Vendor < ActiveRecord::Base
  attr_accessible :name, :description, :banner_image, :logo_image, :intro_text, :thumb_image
    mount_uploader :banner_image, ImageUploader
    mount_uploader :logo_image, ImageUploader
    mount_uploader :thumb_image, ImageUploader

    acts_as_tagger

    has_many :products

    def tags
        self.owned_tags
    end

    def taggings
        self.owned_taggings
    end
end 
```

**编辑 2**：

我的`Vendor`表的架构如下所示：

```
 create_table "vendors", :force => true do |t|
    t.string   "name"
    t.text     "description",  :limit => 255
    t.datetime "created_at",                  :null => false
    t.datetime "updated_at",                  :null => false
    t.string   "banner_image"
    t.string   "logo_image"
    t.string   "intro_text"
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:21:12.730

结果我不得不删除`mount_uploader :thumb_image`我的`Vendor`模型上的调用，因为我没有`thumb_image`在那个模型上调用列。

# javascript - 是否可以使用javascript构建顺序代码

> ID：13785505
> 
> 赞同：0
> 
> 时间：2012-12-09T07:20:15.443
> 
> 标签：javascript

是否可以使用 javascript 构建与数据库交互的代码，然后使用该信息将查看器发送到下一个连续步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:24:06.930

您将需要某种服务器端脚本来查询数据库。然后，您可以使用 javascript 中的 AJAX 调用那些将执行数据库功能并将结果返回给 javascript 的服务器端脚本，然后 javascript 可以将页面移动到下一步。

您将无法使用 javascript 直接连接到数据库。

# java - 谁能告诉我为什么我的更改数量按钮没有更改数量？

> ID：13785507
> 
> 赞同：1
> 
> 时间：2012-12-09T07:20:55.600
> 
> 标签：java, swing, for-loop, arraylist, inventory

谁能告诉我为什么我的更改数量按钮没有更改数量？buttonlistener2 应该将 arrayCount[x] 中的项目数更改为 count JTextfield 中的数字，但它不是，可以使用一组新的眼睛。谢谢大家

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class ProduceInventory extends JFrame
{
ArrayList<String> arrayName = new ArrayList<String>();
ArrayList<Integer> arrayCount = new ArrayList<Integer>();
// declares panels and items
private final int WINDOW_WIDTH = 450;
private final int WINDOW_HEIGHT = 350;

private JPanel panel1;
private JPanel panel2;
private JPanel panel3;

private JLabel messageLabel1;
private JLabel messageLabel2;

private JTextField name;
private JTextField count;
private JTextArea output;

private JButton add;
private JButton changeQTY;
private JButton delete;
private JButton clear;
private JButton report;
private JButton save;
private JButton load;

public ProduceInventory()
{
//creates Jframe
setTitle("Produce Inventory"); 

setSize(WINDOW_WIDTH, WINDOW_HEIGHT);

setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

setLayout(new BorderLayout());

panel1(); //build panels
panel2();
panel3();

add(panel1, BorderLayout.NORTH); //add panels
add(panel2, BorderLayout.SOUTH);
add(panel3, BorderLayout.CENTER);
setVisible(true);
}
private void panel1() //builds panel 1
{
messageLabel1 = new JLabel("Name");
messageLabel2 = new JLabel("Count");

name = new JTextField(20);
count = new JTextField(5);

    panel1 = new JPanel();

panel1.add(messageLabel1);
panel1.add(name);
panel1.add(messageLabel2);
panel1.add(count);
}
private void panel2() //builds panel 2
{
add = new JButton("Add");
changeQTY = new JButton("CHANGE QTY");
delete = new JButton("Delete");
clear = new JButton("Clear");
report = new JButton("Report");
save = new JButton("Save File");
load = new JButton("Load File");

add.addActionListener(new ButtonListener());
changeQTY.addActionListener(new ButtonListener2());

panel2 = new JPanel();
panel2.setLayout(new GridLayout(2,4));  

panel2.add(add);    
panel2.add(changeQTY);
panel2.add(delete);
panel2.add(clear);
panel2.add(report);
panel2.add(save);
panel2.add(load);
}
private void panel3() //builds panel 3
{
output = new JTextArea(10,30);

panel3 = new JPanel();

panel3.add(output);
}
private class ButtonListener implements ActionListener //add listener
{
    String nameIn;
    String countIn;
    int number;
    public void actionPerformed(ActionEvent e)
    {   

        String actionCommand = e.getActionCommand();
        if (actionCommand.equals("Add"))
        {
        nameIn = name.getText(); 
        arrayName.add(name.getText());
        countIn = count.getText(); 
        number = Integer.parseInt(countIn);
        arrayCount.add(number);

output.setText(name.getText() + " " + count.getText() + " Item     Added");

        for(int x = 0; x <= arrayName.size() - 1; x++)
            {

System.out.print((x+1)+ ".  " + arrayName.get(x) + " " + arrayCount.get(x) + "\n");
            }

        }
    }
}
private class ButtonListener2 implements ActionListener //add listener
{

    public void actionPerformed(ActionEvent e)
    {   
        String nameIn;
        String countIn;
        int number;

        String actionCommand = e.getActionCommand();
        if (actionCommand.equals("CHANGE QTY"))
        {
        nameIn = name.getText();
        countIn = count.getText(); 
        number = Integer.parseInt(countIn);

        for(int x = 0; x <= arrayName.size() - 1; x++)
        {
                if(arrayName.get(x) == nameIn)
                {
                arrayCount.set(x, number);
                }
        }
        output.setText("Qty is updated to: " + number);
        for(int x = 0; x <= arrayName.size() - 1; x++)
            {

System.out.print((x+1)+ ".  " + arrayName.get(x) + " " + arrayCount.get(x) + "\n");
            }

        }
    }
}

public static void main(String[] args)
{
new ProduceInventory(); //runs program
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:47:32.877

在动作监听器中，就行了

```
 if(arrayName.get(x) == nameIn) 
```

您正在检查两个变量是否引用同一个对象。相反，您必须检查它们引用的对象是否相等：

```
 if(nameIn.equals(arrayName.get(x))) 
```

# java - 使用 JUnit 进行简单的 JDBC 连接测试

> ID：13785508
> 
> 赞同：5
> 
> 时间：2012-12-09T07:21:19.123
> 
> 标签：java, testing, jdbc, junit

我想要对 JDBC 连接进行简单测试，我不使用框架，只使用 JDBC 和 JUnit。我可以用 JUnit 执行这个测试吗？我什至不知道如何测试加载驱动程序，请给我一些连接测试的例子。

连接客户端：

```
package newpackage.db;

import java.sql.Connection;
import java.util.logging.Level;
import java.util.logging.Logger;

public class SqlConnection {
    private Connection con;
    private String name;
    private String url;
    private String password;
    private String driver;

    public SqlConnection() {
        this.name = "root";
        this.password = "12345";
        this.url = "";
        this.driver = "com.mysql.jdbc.Driver";
    }

    public Connection getConnection() {
        try {
            Class.forName(driver);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(SqlConnection.class.getName()).log(Level.SEVERE, null, ex);
        }

        return null;
    }
} 
```

测试用例：

```
public void testDriverManager() {
    SqlConnection conClient = new SqlConnection();
    assertEquals(conClient.getConnection(),...);
    or
    assertTrue(conClient.getConnection(),...);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T10:31:19.123

基本上，您可以按照驱动程序管理器的本指南来建立连接。

[http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)

对连接的最佳测试是从数据库中读取一些基本内容。例如从对偶中选择 1

请注意，此测试需要一个正在运行的数据库！将这些集成测试的数量保持在较低水平，因为它们不能很好地扩展并且需要给定的特定环境。它使持续集成例如 Hudson 变得更加困难，因为您必须在所有持续集成服务器节点上安装数据库并保持其运行。

# java - hql 相当于 sql 时的 case

> ID：13785509
> 
> 赞同：0
> 
> 时间：2012-12-09T07:21:20.533
> 
> 标签：java, sql, hibernate, hql

我有一个 sql 查询，上面写着

```
select case when col='city' then (select name from Table) end AliasName 
    from SomeOtherTable 
```

我无法在 hql case-when-then 表达式中使用子查询。有没有其他方法我可以完成同样的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:35:59.270

这是一种解决方法，而不是直接的答案；在数据库中创建一个视图并在您的应用程序中创建一个新类。现在你完全摆脱了你的 hql。

当然，这个链接是关于另一个问题，但不知何故与您的问题有关，并讨论了 HQL 不支持或难以实现的功能： [Hibernate Union Alternatives](https://stackoverflow.com/questions/201023/hibernate-union-alternatives)

# macos - Mac OS X 和在区分大小写的文件系统上测试应用程序

> ID：13785511
> 
> 赞同：1
> 
> 时间：2012-12-09T07:21:30.843
> 
> 标签：macos, filesystems, hfs

我有两台 MacBook Pro，但它们附带了不区分大小写的文件系统。我想在区分大小写的文件系统上测试我的一些实用程序。无论如何，每个应用程序都区分大小写吗？也许还有另一种不需要重新格式化硬盘的解决方案？

我还阅读了[技术说明 TN2096：调试应用程序中的大小写敏感错误](http://developer.apple.com/library/mac/#technotes/tn2096/_index.html)。但它没有详细说明如何设置测试环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:46:09.777

没有办法为单个应用程序“打开区分大小写”。卷上的文件系统结构是否区分大小写。

您可以使用“磁盘工具”以几种不同的方式进行设置：

*   如果您只是测试读写文件：制作磁盘映像，使用格式“Mac OS Extended (Case-sensitive, Journaled)”。挂载该磁盘映像并让您的应用程序使用它。

*   如果您想在从区分大小写的文件系统引导的系统上进行测试：将分区添加到您的驱动器，为新分区选择区分大小写的格式，然后在其上安装 OS X。或者使用外部磁盘。

我敢肯定还有更棘手的方法，但那些应该让你开始。

# email - EC2 上的电子邮件服务器，带有弹性负载均衡器

> ID：13785512
> 
> 赞同：7
> 
> 时间：2012-12-09T07:21:31.340
> 
> 标签：email, amazon-web-services, amazon-ec2, email-client

假设我有几个带有弹性负载均衡器的 ec2 实例，我想在它们上运行一个电子邮件服务器，这样我就可以从多个地址发送和接收电子邮件。这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:41:33.040

这是一个广泛的问题，但我可以给你一个（希望）有帮助的具体答案。电子邮件是 AWS 很少讨论的话题。事实上，这就是云的好处可能有点……多云的地方。

在我看来，**关键问题是电子邮件的可传递性**——确保从云发送的电子邮件被预期的收件人可靠地接收。由于电子邮件提供商采用了反垃圾邮件措施，这意味着使用具有良好声誉的 IP 地址。不幸的是，这并不是 AWS 的一大优势。事实上，**许多垃圾邮件过滤器只是丢弃从 AWS** IP 发送的电子邮件，其他云服务提供商也是如此。

因此，每当我从 AWS 发送任何电子邮件时，我**总是使用**诸如[SendGrid 之](http://sendgrid.com/)类的转发服务。这些公司以安全的方式提供 SMTP 转发，并为您提供可靠地发送批量和交易电子邮件所需的所有工具。

在入门级，您使用共享 IP 并获得 DKIM、打开和点击跟踪以及退回/阻止报告的好处。SendGrid 帮助管理您的域在大型提供商中的声誉。在更高的服务级别，他们可以帮助您预热和维护您自己的专用电子邮件发送 IP 地址，以确保您不会受到其他 SendGrid 客户的负面影响。

当然，亚马逊也有销售**Simple Email Service**，还有其他的选择，比如通过**Gmail**发送。我绝不隶属于这些公司中的任何一家，但我对希望从云提供商发送任何类型的电子邮件的人的主要建议是始终使用第三方服务以最大限度地提高可交付性。

至于接收电子邮件，Elastic Load Balancer 对 SMTP 没有帮助，但如果您提供 webmail，那么它可以帮助平衡您的端口 80 流量。对于 SMTP，使用多个具有相同权重的 MX 记录，指向一组可以接收电子邮件的主机。

对于您的邮件传输代理，我推荐 Postfix，但这是一个偏好问题。你会发现很多人也推荐 Qmail 和 Sendmail。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T00:04:17.230

我同意@platforms 关于在“云”（即 AWS）中**接收电子邮件的大部分回答。**特别是关于平衡端口 80 流量和无法平衡 SMTP（使用多个 MX 记录代替）的说明。只是为了对这个问题给出不同的看法，我总是为这些任务设置一个 MS Exchange 边缘传输服务器。在[Microsoft TechNet 的](http://technet.microsoft.com/en-us/magazine/2007.10.edge.aspx)一篇文章中，他们提到由 6 台这样的服务器组成的场每天能够安全地处理大约 1300 万条消息（即使在峰值负载下）。

不过，关于从“云”（即 AWS）**发送**电子邮件的问题，我必须不同意。我强烈推荐使用 Amazon Simple Email Service (SES)。它与您的其他基础设施完全集成，并且 AWS 开发工具包具有大多数编程语言/平台所需的所有绑定。只要您正确设置您的域记录、DKIM 等，您就不会遇到交付问题。您也有关于退回、阻止、投诉等的相同报告。来源：我使用 SES 多年，没有关于可交付性的单一投诉。

# xml - 使用 XSLT 连接多个重复元素

> ID：13785513
> 
> 赞同：0
> 
> 时间：2012-12-09T07:21:31.733
> 
> 标签：xml, xslt, tibco

我有以下示例 xml 数据。场景是当 type=# 时 productNo 元素必须与 type 元素值和 number 元素值连接。连接的输出必须与该 orderItem 记录中的每个 serialNumber 元素连接。

最后的要求是： 1\. 当 type 元素为 '#' 时， productNo 与每个 type 元素连接， number 元素应与每个 orderItem 记录中的每个 serialNumber 元素连接。2.当type元素没有'#'时，productNo应该与每个orderItem记录中的每个serialNumber元素连接

```
 <orderItems>
              <orderItem itemNo="0100" sapItemNo="10">
                 <productNo>WK302EA</productNo>
                 <itemShipDetails>
                    <itemShipDetail>
                       <serialNumber>CZC132BM61</serialNumber>
                    </itemShipDetail>
                    <itemShipDetail>
                       <serialNumber>CZC1331JR2</serialNumber>
                    </itemShipDetail>
                    <itemShipDetail>
                       <serialNumber>CZC1331JR3</serialNumber>
                    </itemShipDetail>
                 </itemShipDetails>
                 <options>
                    <option ln="01" type="" sapItemNo="10">
                       <number>WK302EA</number>
                    </option>
                    <option ln="02" type="#" sapItemNo="10">
                       <number>ABN</number>
                    </option>
                    <option ln="03" type="#" sapItemNo="10">
                       <number>ASZ</number>
                    </option>
                 </options>
              </orderItem>
              <orderItem itemNo="0200" sapItemNo="20">
                 <productNo>VY623AA</productNo>
                 <itemShipDetails>
                    <itemShipDetail>
                       <serialNumber>CN3129300D</serialNumber>
                    </itemShipDetail>
                    <itemShipDetail>
                       <serialNumber>CN3129300Z</serialNumber>
                    </itemShipDetail>
                    <itemShipDetail>
                       <serialNumber>CN3129306S</serialNumber>
                    </itemShipDetail>
                    <itemShipDetail>
                       <serialNumber>CN312930LM</serialNumber>
                    </itemShipDetail>
                 </itemShipDetails>
                 <options>
                    <option ln="04" type="" sapItemNo="20">
                       <number>VY623AA</number>
                    </option>
                    <option ln="05" type="#" sapItemNo="20">
                       <number>ABN</number>
                    </option>
                 </options>
              </orderItem>
              <orderItem itemNo="0300" sapItemNo="30">
                 <productNo>VY623AS</productNo>
                 <itemShipDetails>
                    <itemShipDetail>
                       <serialNumber>CN3129300X</serialNumber>
                    </itemShipDetail>
                    <itemShipDetail>
                       <serialNumber>CN3129300P</serialNumber>
                    </itemShipDetail>
                 </itemShipDetails>
                 <options>
                    <option ln="06" type="" sapItemNo="30">
                       <number>VY623AS</number>
                    </option>
        <option ln="07" type="M" sapItemNo="30">
                       <number>ABC</number>
                    </option>
                 </options>
              </orderItem>
            </orderItems> 
```

预期的输出是：

```
 <orders>
    <serialNO>WK302EA#ABN|CZC132BM61</serialNO>
    <serialNO>WK302EA#ABN|CZC1331JR2</serialNO>
    <serialNO>WK302EA#ABN|CZC1331JR3</serialNO>
    <serialNO>WK302EA#ASZ|CZC132BM61</serialNO>
    <serialNO>WK302EA#ASZ|CZC1331JR2</serialNO>
    <serialNO>WK302EA#ASZ|CZC1331JR3</serialNO>

    <serialNO>VY623AA#ABN|CN3129300D</serialNO>
    <serialNO>VY623AA#ABN|CN3129300Z</serialNO>
    <serialNO>VY623AA#ABN|CN3129306S</serialNO>
    <serialNO>VY623AA#ABN|CN312930LM</serialNO>

    <serialNO>VY623AS|CN3129300X</serialNO>
    <serialNO>VY623AS|CN3129300P</serialNO>
    </orders> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:19:34.063

Some easy templates with proper selects should do it. 模板可以像函数一样具有参数。

（测试了代码，所以它应该产生正确的输出）

```
<xsl:template match="orderItems">
    <orders>
        <xsl:apply-templates select="orderItem/options/option[@type != '']"/>
    </orders>
</xsl:template>

<xsl:template match="option[@type = '#']">
    <xsl:apply-templates select="../../itemShipDetails/itemShipDetail/serialNumber">
        <xsl:with-param name="productNo" select="concat(../../productNo, '#', number)"/>
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="option[@type != '#']">
    <xsl:apply-templates select="../../itemShipDetails/itemShipDetail/serialNumber">
        <xsl:with-param name="productNo" select="../../productNo"/>
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="serialNumber">
    <xsl:param name="productNo"/>
    <serialNO><xsl:value-of select="concat($productNo, '|', .)"/></serialNO>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:38:48.480

让我用伪代码为你写。

  如果至少有一个选项，则
 每个 orderItem 需要一个输出行 where type = #    For each options/option where type = #     For each itemShipDetail      一个输出元素 Serial No productNo + # + this-option/number + | + this-itemShipDetail/Number   else    对于每个 ItemShipDetail     一个输出元素 序列号 productNo + # + this-itemShipDetail/Number

用一些 (.) 和 (..) 填充它以获得最终输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T18:57:01.450

如果这是`serialNO`需要项目的顺序，那么这个转换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

<xsl:template match="orderItems">
  <orders>
    <xsl:apply-templates select="orderItem/productNo"/>
  </orders>
</xsl:template>

<!-- option(s) type '#' present: work with those as base -->
<xsl:template match="productNo[following-sibling::options/option/@type='#']">
  <xsl:apply-templates select="following-sibling::options/option[@type='#']"/>
</xsl:template>

<!-- no options type '#' present: just process its serial numbers
     (passing the product number) -->
<xsl:template match="productNo">
  <xsl:apply-templates select="following-sibling::itemShipDetails/itemShipDetail/serialNumber">
    <xsl:with-param name="productNoAndOptionNo"
      select="."/>
  </xsl:apply-templates>
</xsl:template>

<!-- option type '#': now process the serial numbers
     (passing the product number and option number concatenation -->
<xsl:template match="option[@type='#']">
  <xsl:apply-templates select="../preceding-sibling::itemShipDetails/itemShipDetail/serialNumber">
    <xsl:with-param name="productNoAndOptionNo"
      select="concat(../preceding-sibling::productNo, '#', number)"/>
  </xsl:apply-templates>
</xsl:template>

<!-- output formatted serial number -->
<xsl:template match="serialNumber">
  <xsl:param name="productNoAndOptionNo"/>
  <serialNO>
    <xsl:value-of select="concat($productNoAndOptionNo, '|', .)"/>
  </serialNO>
</xsl:template> 

</xsl:stylesheet> 
```

当应用于您的文档时，会产生以下结果：

```
<orders>
<serialNO>WK302EA#ABN|CZC132BM61</serialNO>
<serialNO>WK302EA#ABN|CZC1331JR2</serialNO>
<serialNO>WK302EA#ABN|CZC1331JR3</serialNO>
<serialNO>WK302EA#ASZ|CZC132BM61</serialNO>
<serialNO>WK302EA#ASZ|CZC1331JR2</serialNO>
<serialNO>WK302EA#ASZ|CZC1331JR3</serialNO>
<serialNO>VY623AA#ABN|CN3129300D</serialNO>
<serialNO>VY623AA#ABN|CN3129300Z</serialNO>
<serialNO>VY623AA#ABN|CN3129306S</serialNO>
<serialNO>VY623AA#ABN|CN312930LM</serialNO>
<serialNO>VY623AS|CN3129300X</serialNO>
<serialNO>VY623AS|CN3129300P</serialNO>
</orders> 
```

# c++ - VS2008 中的 Libssh 服务器身份验证不顺利

> ID：13785517
> 
> 赞同：0
> 
> 时间：2012-12-09T07:22:43.333
> 
> 标签：c++, authentication, ssh, libssh

我正在使用 libssh 库来创建与在远程服务器上创建的 ssh 服务器的连接。连接一切顺利，直到代码从服务器获取公钥并询问用户是否要保存它。那里的代码由于某种未知原因而崩溃。我正在使用此[链接](http://api.libssh.org/master/libssh_tutor_guided_tour.html)中给出的教程。

这是我到目前为止编写的代码。任何有关这方面的帮助都会很棒。

```
#include <libssh/libssh.h>
#include <iostream>

using namespace std;

int verifyServer(ssh_session);

int main(){

    ssh_session my_ssh_session = ssh_new();
    if (my_ssh_session == NULL)
        exit(-1);

    int verbosity = SSH_LOG_PROTOCOL;
    int port = 22;
    int connect;

    ssh_options_set(my_ssh_session, SSH_OPTIONS_HOST, "hostname");
    ssh_options_set(my_ssh_session, SSH_OPTIONS_PORT, &port);
    ssh_options_set(my_ssh_session, SSH_OPTIONS_LOG_VERBOSITY, &verbosity);
    ssh_options_set(my_ssh_session, SSH_OPTIONS_USER, "username");

    connect = ssh_connect(my_ssh_session);
    if(connect != SSH_OK){
        cout<<"Connection error!"<<endl;
        ssh_free(my_ssh_session);
        exit(-1);
    }
    int result = verifyServer(my_ssh_session);
    if(result < 0){
        ssh_disconnect(my_ssh_session);
        exit(-1);
    }
    connect = ssh_userauth_password(my_ssh_session, NULL, "password");

    if(connect != SSH_AUTH_SUCCESS){
        cout<<"Password authentication failed!"<<endl;
        ssh_disconnect(my_ssh_session);
        ssh_free(my_ssh_session);
        exit(-1);
    }

    ssh_free(my_ssh_session);

}

int verifyServer(ssh_session session){
    int state, hlen;
    unsigned char* hash = NULL;
    char* hexa;
    char buffer[10];

    state = ssh_is_server_known(session);

    hlen = ssh_get_pubkey_hash(session, &hash);
    if(hlen < 0){
        cout<<"Server public key hash error!"<<endl;
        return -1;
    }

    switch(state){
        case SSH_SERVER_KNOWN_OK:
            break;

        case SSH_SERVER_KNOWN_CHANGED:
            cout<<"Host key for the server has been changed to: \n";
            ssh_print_hexa("Public Key Hash", hash, hlen);
            cout<<"For security reasons, connection will now be stopped.\n";
            free(hash);
            return -1;

        case SSH_SERVER_FOUND_OTHER:
            cout<< "The host key for this server was not found but an other"
                "type of key exists.\n";
            cout<<"An attacker might change the default server key to"
                "confuse your client into thinking the key does not exist\n";
            free(hash);
            return -1;

        case SSH_SERVER_FILE_NOT_FOUND:
            cout<<"Could not find known host file.\n";
            cout<<"If you accept the host key here, the file will be"
                "automatically created.\n";

        case SSH_SERVER_NOT_KNOWN:
            hexa = ssh_get_hexa(hash, hlen);
            cout<<"The server is unknown. Do you trust the host key?\n";
            cout<<"Public key hash : "<<hexa<<endl;
            free(hexa);
            if (fgets(buffer, sizeof(buffer), stdin) == NULL)
            {
                free(hash);
                return -1;
            }
            if (_strnicmp(buffer, "yes", 3) != 0)
            {
                free(hash);
                return -1;
            }
            if (ssh_write_knownhost(session) < 0)
            {
                fprintf(stderr, "Error %s\n", strerror(errno));
                free(hash);
                return -1;
            }
            break;

        case SSH_SERVER_ERROR:
            cout<<ssh_get_error(session);
            free(hash);
            return -1;
    }

    free(hash);
    return 0;
} 
```

这是给出错误的输出窗口。

![在此处输入图像描述](../Images/803349d5dc555612f768745931790162.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:42:34.597

我没有看到您调用 ssh_init() 这很重要。你看过[http://api.libssh.org](http://api.libssh.org)上的教程和源代码中的例子吗？

# sql-server - 导致循环的 FK SET NULL 设计的替代方案

> ID：13785520
> 
> 赞同：5
> 
> 时间：2012-12-09T07:24:00.270
> 
> 标签：sql-server, sql-server-2008, database-design, foreign-key-relationship, referential-integrity

> **可能重复：**
> [外键约束可能导致循环或多个级联路径？](https://stackoverflow.com/questions/851625/foreign-key-constraint-may-cause-cycles-or-multiple-cascade-paths)

我有一个包含四个主表的联系方式数据库：

*   组织
    *   部门
        *   部分
            *   人们

这是一个图表（箭头表示外键约束）：

***重要提示****：我不小心将绿色箭头标记为指向`per_PerID`。它应该指向`per_SecID`*

![在此处输入图像描述](../Images/b91ec09de3f0c21640e782730632b195.png)

我已经创建了约束，以确保每个部门的记录都属于一个组织，每个部分都属于一个部门，等等。这些外键约束将其操作设置为`CASCADE`，因此删除组织将删除所有相应的部门等。

问题是每个组织都需要有一个负责人。这转化为包含负责人 ID 的字段的外键约束。创建约束很容易，但是当我尝试将`ON DELETE`操作设置为 时`SET NULL`，出现以下错误：

> 在表上引入 FOREIGN KEY 约束 ... 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

`CASCADE`我的推理是，只有当我将操作设置为, not时才会发生循环`SET NULL`，但显然这是不正确的。

> 1.  个人记录已删除
> 2.  `org_incharge_PerID`在相应的组织记录中设置为空
> 3.  不会发生进一步的传播。如果组织被删除了，就会有问题，因为部门也指组织。就目前的情况来看，应该没有问题。

是否有另一种方法来确保引用完整性，或者我应该重新考虑我的表结构，以完全避免循环问题？

我想要的是`org_incharge_PerID`被限制`per_PerID`在 people 表中的 s 集合中。`NULL`此外，如果该人被删除，我希望将值设置为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T08:14:22.857

一旦遇到循环警告，在不更改数据库结构的情况下确保引用完整性的唯一另一种方法是对其中一个约束使用触发器。触发警告的问题是双重的：

1.  该表与该`Sections`表共享两个相反方向的外键约束`Persons`。
2.  所有四个表都有一个完整的循环，所有这些表都以相同的方向进行，Person->Section->Department->Organization。

此外，表格设计存在一个问题：它的构造方式，一个人可能负责他不属于的部分。

`InCharge`您可以通过从 中删除列`Sections`并引入另一个表来解决这三个问题`SectionInCharge`， 包含列`PerID`和`SecID`，在 上具有聚集索引/唯一约束，并且在两列上都具有表`SecID`的复合外键。`Persons`您需要向表中的两列添加 UNIQUE 约束，`Persons`以便 FK 可以与它​​们相关联。

现在您可以将新的 FK 设置为 ON DELETE CASCADE 并删除。

使用行的存在或不存在来表示某事而不是使用可为空的列通常是一种优越的数据库设计模式。

现在我想一想，其他带有“负责人”列的表在允许分配不正确的成员的人方面也存在类似的问题。我知道使用 FK 解决这个问题的唯一方法（在我看来这是触发器的最佳实践）是通过表传播列并将它们包含在复合键中。这具有使事情变得有点尴尬的不幸副作用，但它还不错，因为您可以将最具体的列放在第一位，并仅在可能的情况下加入它。因此，您可以将 OrgID 放入`Section`表中，并在 Dept 表上使用复合 FK `(DeptID, OrgID)`，然后将`DeptID`and`OrgID`也放入`Persons`表中。然后，您将需要`DeptInCharge`和`OrgInCharge`表。

您可能感兴趣的关于这一点（这并不是真正解决您提出的核心问题）的另一个注意事项是将您的三个底部表格组合成一个表格的可能性，`OrgUnit`. 添加一个`OrgUnitType`列和一个 ParentOrgID 列。当事物不具有该属性时添加将为 NULL 的列（如在没有传真号码的部分中），或者使现有的组织、部门和部分表成为 OrgUnit[的子类型（数据库超类型/子类型的示例](http://technet.microsoft.com/en-us/library/cc505839.aspx)）。这样做的好处是，你可以在任何地方引用这三种类型中的任何一种：如果 FK 是 OrgUnit，它可以是其中任何一种。但是，如果它只允许作为一个部分，那么您将改为对那个表进行 FK。事实上，这对于单身人士来说是完美的`OrgUnitInCharge`表，带有 FK 到`OrgUnit (OrgUnitID, OrgUnitTypeID)`.

我知道这里有一些松散的结尾，我还没有将它们完全捆绑成一个漂亮的包给你，但我希望到目前为止我所描述的内容是有帮助的。

PS我希望你能原谅我增加了风格上的考虑。*对我来说，在每个表的每一*列上放置一个表表示前缀是很多额外的不必要的装饰。根据我的感觉，我输入 90-110 wpm，但我仍然讨厌打字。此外，我坚信在我的代码中保持高信噪比，而对我来说，到处爆炸的前缀大大降低了这一点。在 SQL 查询中，最佳实践是使用表别名，然后在每列上使用这些别名，如`SELECT P.Name FROM dbo.Person P`. 为了解决多个表具有相同列名的问题，我已经开始将表中的典型`WidgetName`列`Widget`也设置为`Widget`. 作为为什么高信噪比如此重要的一个例子： vrbaux 可以让您阅读艺术这句话 advQuickly conAnd advEasily？确实，附加前缀包含*有用*的信息，但这些有用的信息只有*一点*用处，而且*很*分散注意力。如果您现在从头开始设计数据库，我想请求您不要使用这些前缀，因为某个奇怪的巧合有一天最终会维护它（发生了奇怪的事情）。:)

PPS 我喜欢 PascalCase 而不是 under_scores，因为它更容易输入。下划线位于最上面一行并被最弱的手指击中 - 所以它更慢且容易出错。

PPPS 我也更喜欢单数表名，但这既不是这里也不是那里？我提前为你对风格的批评感到抱歉。

# asp.net - 如何在 asp.net 中将超链接动态添加到 GridView Row

> ID：13785523
> 
> 赞同：1
> 
> 时间：2012-12-09T07:24:24.057
> 
> 标签：asp.net, vb.net, gridview, hyperlink

我`GirdView`从后面的代码中填充了一个文本，我想让一行包含一个文本，另一行包含一个`HyperLink`.

我使用以下代码：

```
 Dim dtFull As New DataTable()
            ' Create four typed columns in the DataTable.
        dtFull.Columns.Add("Self Assessment", GetType(Object))
        dtFull.Columns.Add("Staff Development", GetType(Object))
        dtFull.Columns.Add("Mid Meeting", GetType(Object))
        dtFull.Columns.Add("Objectives Rating", GetType(Object))
        dtFull.Columns.Add("Overall Rating", GetType(Object))
        dtFull.Columns.Add("Second Supervisor Approval", GetType(Object))
        dtFull.Columns.Add("Staff Sign Off", GetType(Object))
        dtFull.Columns.Add("Total", GetType(Object))

        dtFull.Rows.Add("", "", "", "", "", "", "", "")
        gvGeneralStatistics.DataSource = dtFull
        gvGeneralStatistics.DataBind() 
```

如何将超链接添加到`GridView`行：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:53:38.530

尝试在您的 GridView 中有一个 TemplateField。并在模板字段中添加超链接。您可以从 GridView 列手动设置超链接值，或者从后面的代码中甚至行数据绑定！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:43:56.170

我更喜欢使用 TemplateField 因为它的简单性。但是如果你想动态添加，你可以这样做

**C＃：**

```
HyperLinkField hplnk = new HyperLinkField();
hplnk.DataTextField = "YourValue";
hplnk.HeaderText = "yourHeaderTextValue";
gvGeneralStatistics.Columns.Add(hplnk); 
```

**VB.net：**

```
Dim hplnk As New HyperLinkField()
hplnk.DataTextField = "YourValue"
hplnk.HeaderText = "yourHeaderTextValue"
gvGeneralStatistics.Columns.Add(hplnk); 
```

# javascript - 捕获按键，指向 Chrome 中的特定元素

> ID：13785525
> 
> 赞同：3
> 
> 时间：2012-12-09T07:24:47.497
> 
> 标签：javascript, google-chrome, focus, onkeypress

我正在构建一个聊天应用程序，并且我试图确保无论何时用户按下某个键，他们按下的键最终都会输入到特定元素中（iframe ui.rteIFrame 中的可编辑 HTML 文档 ui.rte1Content，到准确无误）。无论页面上的哪个元素当前具有焦点，都应该发生这种情况。我只关心支持 Firefox 和 Chrome。

到目前为止，我已经在 window.onkeydown 事件上注册了一个处理程序：

```
function captureKeyDown(e) {
    console.log("Capturing: " + e.keyCode);

    // We ignore certain keys such as page up, as well as keys pressed with
    // alt or ctrl, except for a few select combos like ctrl+b
    if(!ignoreKeys.contains(e.keyCode) && !e.altKey && 
      (!e.ctrlKey || (e.ctrlKey && validCtrlKeys.contains(e.keyCode)))) {
        ui.rte1Content.focus(); // Chrome prefers this.
        if(!rteHasFocus) {
            ui.rteIFrame.focus(); // Firefox prefers this
        }
        //alert("A commented out alert");
    }
} 
```

这在 Firefox 中完美运行： rteIFrame 获得焦点，被按下的键出现，然后我们继续。然而，在 Chrome (23.0.1271.95) 中，当 rte1Content 及时正确地获得焦点以显示 NEXT 字母时，第一个触发事件的首字母消失在以太中。

对于它的价值，如果我取消注释警报声明，这封信在 Chrome 中显示得很好。我不知道为什么会这样。

有人对我如何让它工作有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:22:42.283

对于“alert() 事情”，这仅仅是因为在 Chrome 中发生 alert() 时焦点会丢失。为了测试这一点，尝试打开 JavaScript 控制台（在 Chrome 中为 CTRL+SHIFT+J，在 Firefox 中为 CTRL+SHIFT+K），选择某些内容或关注任何页面上的某些内容，然后在控制台中输入`alert("test");`，你会看到焦点是丢失的。然后在Firefox中尝试，焦点保持不变。

我也觉得你在用复杂的方式做事啊哈！为什么不只使用`<textarea>`标签来存储键盘输入？此外，如果您打算通过使用 COMET 技术或一些长池等通过 iframe 传递数据来制作聊天应用程序。我真的建议您使用 google WebSockets，因为您将能够进行更现代和优化的聊天有了这个。在您的情况下也将是完美的，因为您只关注 Firefox 和 Chrome，这两种浏览器都正确支持 WebSockets。:)

# javascript - JavaScript 原型命名标准

> ID：13785528
> 
> 赞同：1
> 
> 时间：2012-12-09T07:25:30.130
> 
> 标签：javascript, naming-conventions, prototype

命名 JavaScript 原型是否有某种标准或约定？

我发现自己经常需要在原生函数和用户定义函数的原型上添加方法，因此我通常将原型本身存储在局部变量中：

```
var functionPrototype = Function.prototype;
var objectPrototype = Object.prototype;
var arrayPrototype = Array.prototype; 
```

尽管名称非常具有描述性，但它们的长度却是不必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:04:48.150

我相信命名原型对象没有标准约定。所以我创建了自己的标准。

正如我在上面的评论中提到的，选择标准只是风格或偏好的问题。但是，一旦你选择了一个，你就应该坚持下去。

这是我现在使用的标准：

```
var functProto = Function.prototype;
var objectProto = Object.prototype;
var arrayProto = Array.prototype;

var boolProto = Boolean.prototype;
var numberProto = Number.prototype;
var stringProto = String.prototype;

var classProto = Class.prototype;
var rectProto = Rectangle.prototype;
var myClassProto = MyClass.prototype; 
```

一般来说，这里是命名原型的指南：

1.  它应该是骆驼案。
2.  它应该以`Proto`.
3.  如果构造函数名称的缩写超过 3 个字符，则使用它。
4.  否则使用构造函数的全名。

这会保留很长的构造函数名称，例如`Function`,`Boolean`并且`Rectangle`很短，同时保持较长的名称。

# jquery - 将正则表达式添加到 jquery.validate

> ID：13785529
> 
> 赞同：12
> 
> 时间：2012-12-09T07:25:45.123
> 
> 标签：jquery, jquery-plugins

需要向我的 jquery.validate 脚本添加正则表达式检查。

我有这个：

```
$().ready(function() {
  $("#myBlahForm").validate({

    rules: {
        someName: {
            required: true,
            minlength: 5,
            maxlength: 8,
        },
        somePassword: {
            required: true,
                            minlength: 5,
            maxlength: 8,
        },
        someConfirmPassword: {
            required: true,
            equalTo: "#somePassword"
        },
    },
    messages: {
        someName:  {
            required: "Please create your username",
        },
        somePassword: {
            required: "Please create a password",
        },
        someConfirmPassword: {
            required: "Please re-enter your password",
            equalTo:  "Passwords must match"
        },
    }
}); 
```

});

当用户在此处输入数据时，我想检查数据库中允许的特定字符的密码：

```
 <label for="someName">Username</label>
    <input type="text" id="someName" name="someName" placeholder="Create a Username"/>

    <label for="somePassword">Password</label>
    <input type="password" id="somePassword" name="somePassword" placeholder="Create a Password"/>

    <label for="someConfirmPassword">Confirm Password </label>
    <input type="password" id="someConfirmPassword" name="someConfirmPassword" placeholder="Verify your Password"/> 
```

使用来自 bassisstance 的 jquery.validate 插件将正则表达式检查添加到必填字段（例如密码或用户名）的最佳方法是什么：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

基本上，我需要确保他们创建的密码和用户名只有 0-9、字母和几个特殊字符。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-09T07:47:24.253

好吧，您可以使用添加自定义验证方法[`addMethod`](https://jqueryvalidation.org/jQuery.validator.addMethod/)，例如

```
$.validator.addMethod("regx", function(value, element, regexpr) {          
    return regexpr.test(value);
}, "Please enter a valid pasword."); 
```

和 ，

```
...
$("#myBlahForm").validate({

    rules: {
        somePassword: {
            required: true ,
            //change regexp to suit your needs
            regx: /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}$/,
            minlength: 5,
            maxlength: 8
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T07:37:35.300

```
required: function(element){
    return /[a-zA-Z0-9]/.test($('#someConfirmPassword').val());
} 
```

如果正则表达式通过，上面的表达式将返回 true，否则返回 false。更改它以满足您的需求。

# java - 序列化列表 with manytoone & onetomany relational to json I have class Menu, it's a self to self with manytoone and onetomany relational. package models; import java.util.*; import javax.persistence.*; import play. 问问题 问问题 2012-12-09T07:26:09.537 1707 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have class Menu, it's a self to self with manytoone and onetomany relational. package models; import java.util.*; import javax.persistence.*; import play.db.ebean.*; import play.data.format.*; import play.data.validation.*; import static play.data.validation.Constraints.*; import javax.validation.*; import org.codehaus.jackson.annotate.JsonBackReference; import org.codehaus.jackson.annotate.JsonIgnore; import org.codehaus.jackson.annotate.JsonManagedReference; import com.avaje.ebean.*; import play.i18n.Messages; @Entity public class Menu extends Model { @Id @GeneratedValue(strategy = GenerationType.AUTO) public Long id; @Required @MinLength(4) @MaxLength(30) public String name; public String url; @Transient public boolean hasChild() { return url.isEmpty(); } public Integer idx; @Temporal(TemporalType.TIMESTAMP) @Formats.DateTime(pattern = "yyyy/MM/dd hh:mm:ss") public Date created; @Required public boolean enabled; @ManyToOne @JsonBackReference public Menu parent; @OneToMany @JsonManagedReference("parent") public List

<menu>children; public static Model.Finder <long, menu="">find = new Model.Finder<long, menu="">(Long.class, Menu.class); public static List

<menu>findTops() { return find.where().eq("parent_id", null).eq("enabled", true).orderBy("idx asc").findList(); } public static List

<menu>findChildsByParent(Menu parent) { return findChildsByParent(parent, true); } public static List

<menu>findChildsByParent(Menu parent, boolean enabled) { return find.where().eq("parent_id", parent.id).eq("enabled", enabled).orderBy("idx asc").findList(); } public static boolean hasChilds(Menu parent) { return hasChilds(parent, true); } public static boolean hasChilds(Menu parent, boolean enabled) { return find.where().eq("parent_id", parent.id).eq("enabled", enabled).findList().size() > 0; } public static Page

<menu>findPage(int page, int size) { return find.findPagingList(size).getPage(page - 1); } public Menu() { } } In Controller code is : @BodyParser.Of(BodyParser.Json.class) public static Result menuJson() { if (menus == null) { menus = Menu.find.all(); } JsonNode json = new ObjectMapper().valueToTree(menus); return ok(json); } Error details is: [RuntimeException: java.lang.IllegalArgumentException: Query threw SQLException:Unknown column 't1.menu_id' in 'on clause' Bind values:[1] Query was: select t0.id c0 , t1.id c1, t1.name c2, t1.url c3, t1.idx c4, t1.created c5, t1.enabled c6, t1.parent_id c7 from menu t0 left outer join menu t1 on t1.menu_id = t0.id where t0.id = ? order by t0.id (through reference chain: com.avaje.ebean.common.BeanList[0]->models.Menu["children"])] It's there have good solution to solve them or how to declare a custom serialize? For the tree model i don't have good object to class design,is't there a better design for this env.? Jquery Dynamic Table. Adding a div for each cell to make it draggable I am trying to create a dynamic table using JQuery. Right now, I want each cell to be a div but I am not sure how I should go about doing it. My ultimate goal is wanting each element to be draggable and changing them to be a div seems like a good idea. Please do suggest any possible ways of doing it or how I could go about changing each cell to be a div so I could make it draggable. This are the relevant codes. //create table function function createDynamicTable(tbody, rows, cols) { if(tbody == null || tbody.length < 1) return; for(var r=1; r<=rows; r++){ var trow=$(""); for(var c=1; c<=cols; c++){ //first column data if (c==1){ if(r==1){ $("") .addClass("tableCell") .text("Subject") .data("col", c) .appendTo(trow); } if(r==2){ $("") .addClass("tableCell") .text("Monday") .data("col", c) .appendTo(trow); } if(r==3){ $("") .addClass("tableCell") .text("Tuesday") .data("col", c) .appendTo(trow); } if(r==4){ $("") .addClass("tableCell") .text("Wednesday") .data("col", c) .appendTo(trow); } if(r==5){ $("") .addClass("tableCell") .text("Thursday") .data("col", c) .appendTo(trow); } if(r==6){ $("") .addClass("tableCell") .text("Friday") .data("col", c) .appendTo(trow); } if(r==7){ $("") .addClass("tableCell") .text("Saturday") .data("col", c) .appendTo(trow); } if(r==8){ $("") .addClass("tableCell") .text("Sunday") .data("col", c) .appendTo(trow); } } else{ //for first row if(r==1){ if(c==2){ $("") .addClass("tableCell") .text("101") .data("col", c) .appendTo(trow); } if(c==3){ $("") .addClass("tableCell") .text("102") .data("col", c) .appendTo(trow); } if(c==4){ $("") .addClass("tableCell") .text("103") .data("col", c) .appendTo(trow); } if(c==5){ $("") .addClass("tableCell") .text("104") .data("col", c) .appendTo(trow); } if(c==6){ $("") .addClass("tableCell") .text("105") .data("col", c) .appendTo(trow); } } else{ var cellText = "Cell " + r + "." + c $("") .addClass("tableCell") .text(cellText) .data("col", c) .appendTo(trow); } } } trow.appendTo(tbody); } } javajsonplayframeworkplayframework-2.0jsonserializer 4 1 回答 1 This answer is useful 1 I solve them. Add a mapped on OneToMany is works. package models; import java.util.*; import javax.persistence.*; import play.db.ebean.*; import play.data.format.*; import play.data.validation.*; import static play.data.validation.Constraints.*; import javax.validation.*; import org.codehaus.jackson.annotate.JsonBackReference; import org.codehaus.jackson.annotate.JsonIgnore; import org.codehaus.jackson.annotate.JsonManagedReference; import com.avaje.ebean.*; import play.i18n.Messages; @Entity public class Menu extends Model { @Id @GeneratedValue(strategy = GenerationType.AUTO) public Long id; @Required @MinLength(4) @MaxLength(30) public String name; public String url; @Transient public boolean hasChild() { return url.isEmpty(); } public Integer idx; @Temporal(TemporalType.TIMESTAMP) @Formats.DateTime(pattern = "yyyy/MM/dd hh:mm:ss") public Date created; @Required public boolean enabled; @ManyToOne @JsonBackReference public Menu parent; @OneToMany(mappedBy = "parent", cascade = CascadeType.PERSIST) @JsonManagedReference public List

<menu>children; public static Model.Finder <long, menu="">find = new Model.Finder<long, menu="">(Long.class, Menu.class); public static List

<menu>findTops() { return find.where().eq("parent_id", null).eq("enabled", true).orderBy("idx asc").findList(); } public static List

<menu>findChildsByParent(Menu parent) { return findChildsByParent(parent, true); } public static List

<menu>findChildsByParent(Menu parent, boolean enabled) { return find.where().eq("parent_id", parent.id).eq("enabled", enabled).orderBy("idx asc").findList(); } public static boolean hasChilds(Menu parent) { return hasChilds(parent, true); } public static boolean hasChilds(Menu parent, boolean enabled) { return find.where().eq("parent_id", parent.id).eq("enabled", enabled).findList().size() > 0; } public static Page

<menu>findPage(int page, int size) { return find.findPagingList(size).getPage(page - 1); } public Menu() { } } 于 2012-12-09T07:45:10.463 回答 Related 2 eclipse - 如何向 Eclipse 添加插件，以便我可以从 Eclipse 运行 QML 1 jquery - 将使用 jquery 的页面包含在 iframe 中的缺点？ 1 android - 如何设置地图视图的缩放级别，使三个大头针可见？ 1 c++ - 为什么在向量向量上使用的 clear() 不会清除这些向量的值？ 1 html - 在 iframe 中使用锚标记 1 mongodb - MongoDB。从三个集合中查询 3 spring - 自动装配在 Spring 3.1.2、JUnit 4.10.0 中不起作用 1 android - android smack订阅用户不起作用 2 php - 从 csvdata 表中获取数据我如何显示 branch_name 而不是 branch_code 1 c# - 网络设备可以ping通但没有tcp连接 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</menu>

</menu>

</menu>

</menu></long,></long,> </menu>

</menu>

</menu>

</menu>

</menu></long,></long,> </menu>

> ID：13785530
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, json, playframework, playframework-2.0, jsonserializer

I have class Menu, it's a self to self with manytoone and onetomany relational.

```
package models;

import java.util.*;
import javax.persistence.*;
import play.db.ebean.*;
import play.data.format.*;
import play.data.validation.*;
import static play.data.validation.Constraints.*;
import javax.validation.*;

import org.codehaus.jackson.annotate.JsonBackReference;
import org.codehaus.jackson.annotate.JsonIgnore;
import org.codehaus.jackson.annotate.JsonManagedReference;

import com.avaje.ebean.*;
import play.i18n.Messages;
@Entity
public class Menu extends Model {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
public Long id;

@Required
@MinLength(4)
@MaxLength(30)
public String name;

public String url;

@Transient
public boolean hasChild() {
    return url.isEmpty();
}

public Integer idx;

@Temporal(TemporalType.TIMESTAMP)
@Formats.DateTime(pattern = "yyyy/MM/dd hh:mm:ss")
public Date created;

@Required
public boolean enabled;

@ManyToOne
        @JsonBackReference
public Menu parent;

@OneToMany
@JsonManagedReference("parent")
public List<Menu> children;

public static Model.Finder<Long, Menu> find = new Model.Finder<Long, Menu>(Long.class, Menu.class);

public static List<Menu> findTops() {
    return find.where().eq("parent_id", null).eq("enabled", true).orderBy("idx asc").findList();
}

public static List<Menu> findChildsByParent(Menu parent) {
    return findChildsByParent(parent, true);
}

public static List<Menu> findChildsByParent(Menu parent, boolean enabled) {
    return find.where().eq("parent_id", parent.id).eq("enabled", enabled).orderBy("idx asc").findList();
}

public static boolean hasChilds(Menu parent) {
    return hasChilds(parent, true);
}

public static boolean hasChilds(Menu parent, boolean enabled) {
    return find.where().eq("parent_id", parent.id).eq("enabled", enabled).findList().size() > 0;
}

public static Page<Menu> findPage(int page, int size) {
    return find.findPagingList(size).getPage(page - 1);
}

public Menu() {
}
} 
```

In Controller code is :

```
@BodyParser.Of(BodyParser.Json.class)
public static Result menuJson() {
    if (menus == null) {
        menus = Menu.find.all();
    }

    JsonNode json = new ObjectMapper().valueToTree(menus);

    return ok(json);
} 
```

Error details is:

```
[RuntimeException: java.lang.IllegalArgumentException: Query threw SQLException:Unknown column 't1.menu_id' in 'on clause' Bind values:[1] Query was: select t0.id c0 , t1.id c1, t1.name c2, t1.url c3, t1.idx c4, t1.created c5, t1.enabled c6, t1.parent_id c7 from menu t0 left outer join menu t1 on t1.menu_id = t0.id where t0.id = ? order by t0.id (through reference chain: com.avaje.ebean.common.BeanList[0]->models.Menu["children"])] 
```

It's there have good solution to solve them or how to declare a custom serialize? For the tree model i don't have good object to class design,is't there a better design for this env.?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:45:10.463

I solve them.

Add a mapped on OneToMany is works.

```
package models;

import java.util.*;
import javax.persistence.*;
import play.db.ebean.*;
import play.data.format.*;
import play.data.validation.*;
import static play.data.validation.Constraints.*;
import javax.validation.*;

import org.codehaus.jackson.annotate.JsonBackReference;
import org.codehaus.jackson.annotate.JsonIgnore;
import org.codehaus.jackson.annotate.JsonManagedReference;

import com.avaje.ebean.*;
import play.i18n.Messages;

@Entity
public class Menu extends Model {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public Long id;

    @Required
    @MinLength(4)
    @MaxLength(30)
    public String name;

    public String url;

    @Transient
    public boolean hasChild() {
        return url.isEmpty();
    }

    public Integer idx;

    @Temporal(TemporalType.TIMESTAMP)
    @Formats.DateTime(pattern = "yyyy/MM/dd hh:mm:ss")
    public Date created;

    @Required
    public boolean enabled;

    @ManyToOne
    @JsonBackReference
    public Menu parent;

    @OneToMany(mappedBy = "parent", cascade = CascadeType.PERSIST)
    @JsonManagedReference
    public List<Menu> children;

    public static Model.Finder<Long, Menu> find = new Model.Finder<Long, Menu>(Long.class, Menu.class);

    public static List<Menu> findTops() {
        return find.where().eq("parent_id", null).eq("enabled", true).orderBy("idx asc").findList();
    }

    public static List<Menu> findChildsByParent(Menu parent) {
        return findChildsByParent(parent, true);
    }

    public static List<Menu> findChildsByParent(Menu parent, boolean enabled) {
        return find.where().eq("parent_id", parent.id).eq("enabled", enabled).orderBy("idx asc").findList();
    }

    public static boolean hasChilds(Menu parent) {
        return hasChilds(parent, true);
    }

    public static boolean hasChilds(Menu parent, boolean enabled) {
        return find.where().eq("parent_id", parent.id).eq("enabled", enabled).findList().size() > 0;
    }

    public static Page<Menu> findPage(int page, int size) {
        return find.findPagingList(size).getPage(page - 1);
    }

    public Menu() {
    }
} 
```

# javascript - Jquery 动态表。为每个单元格添加一个 div 以使其可拖动

> ID：13785533
> 
> 赞同：0
> 
> 时间：2012-12-09T07:26:49.173
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在尝试使用 JQuery 创建一个动态表。

现在，我希望每个单元格都是一个 div，但我不确定我应该如何去做。

我的最终目标是希望每个元素都是可拖动的，并将它们更改为 div 似乎是个好主意。

请建议任何可能的方法，或者我如何将每个单元格更改为 div，以便我可以使其可拖动。

这是相关的代码。

```
//create table function
function createDynamicTable(tbody, rows, cols) {
if(tbody == null || tbody.length < 1) return;
for(var r=1; r<=rows; r++){
  var trow=$("<tr>");
  for(var c=1; c<=cols; c++){
//first column data
    if (c==1){

        if(r==1){
      $("<td>")
        .addClass("tableCell")
        .text("Subject")
        .data("col", c)
        .appendTo(trow);
    }

        if(r==2){
      $("<td>")
        .addClass("tableCell")
        .text("Monday")
        .data("col", c)
        .appendTo(trow);
    }

        if(r==3){
      $("<td>")
        .addClass("tableCell")
        .text("Tuesday")
        .data("col", c)
        .appendTo(trow);
    }

        if(r==4){
      $("<td>")
        .addClass("tableCell")
        .text("Wednesday")
        .data("col", c)
        .appendTo(trow);
    }

        if(r==5){
      $("<td>")
        .addClass("tableCell")
        .text("Thursday")
        .data("col", c)
        .appendTo(trow);
    }

        if(r==6){
      $("<td>")
        .addClass("tableCell")
        .text("Friday")
        .data("col", c)
        .appendTo(trow);
    }   

        if(r==7){
      $("<td>")
        .addClass("tableCell")
        .text("Saturday")
        .data("col", c)
        .appendTo(trow);
    }

        if(r==8){
      $("<td>")
        .addClass("tableCell")
        .text("Sunday")
        .data("col", c)
        .appendTo(trow);
    }
    }
    else{

   //for first row
    if(r==1){
        if(c==2){
        $("<td>")
            .addClass("tableCell")
            .text("101")
            .data("col", c)
            .appendTo(trow);
        }
        if(c==3){
        $("<td>")
            .addClass("tableCell")
            .text("102")
            .data("col", c)
            .appendTo(trow);
        }

        if(c==4){
        $("<td>")
            .addClass("tableCell")
            .text("103")
            .data("col", c)
            .appendTo(trow);
        }
        if(c==5){
        $("<td>")
            .addClass("tableCell")
            .text("104")
            .data("col", c)
            .appendTo(trow);
        }
        if(c==6){
        $("<td>")
            .addClass("tableCell")
            .text("105")
            .data("col", c)
            .appendTo(trow);
        }
    }
    else{
            var cellText = "Cell " + r + "." + c
            $("<td>")
            .addClass("tableCell")
            .text(cellText)
            .data("col", c)
            .appendTo(trow);

    }
}
  }
  trow.appendTo(tbody);
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:38:21.817

只是为了回答这个问题。我执行以下操作将 div 添加到表中。

```
 var tcol=$("<td>")
        $("<div>")
            .addClass("Div1")
            .text("Div works")
            .appendTo(tcol);

            $(tcol)
            .addClass("TableCell")
            //.text("101")
            .data("Col",c)
            .appendTo(trow); 
```

# java - Regex in java keeps on missing data

> ID：13785534
> 
> 赞同：1
> 
> 时间：2012-12-09T07:27:01.750
> 
> 标签：java, android, regex

Here is the scenario, I have this regex pattern:

```
\"category\",([0-9]+)\n(\"subcategory\",[0-9]+\n)* 
```

this pattern should match the following data:

```
"category",1
"subcategory",1
"subcategory",2
"subcategory",3
"category",2
"subcategory",1
"subcategory",2
"subcategory",3 
```

and I'm using the following regex function:

```
public static List<String> regexFindMultiStrings(String pattern, String input) {
    Pattern p = Pattern.compile(pattern, Pattern.CASE_INSENSITIVE);
    Matcher m = p.matcher(input);
    List<String> data = new ArrayList<String>() ;

    while (m.find()) 
    {

         for (int i = 0; i <= m.groupCount(); i++) 
         {
             data.add(m.group(i));
             //Log.e("Array", m.group(i));
         }
    }
    return data;
} 
```

here is the problem, now when I use this pattern to match all the data it gives only the following:

```
1
"subcategory",1
2
"subcategory",1 
```

which is something I'm not looking for how to get all of the data something like:

```
1
"subcategory",1
"subcategory",2
"subcategory",3
2
"subcategory",1
"subcategory",2
"subcategory",3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:40:58.393

You are missing a pair of parentheses:

```
\"category\",([0-9]+)\n((\"subcategory\",[0-9]+\n)*) 
```

The problem lies in the fact that you can not expect to obtain the capture of multiple matches of the same group.

Optionally you can make the inner group non-capturing:

```
\"category\",([0-9]+)\n((?:\"subcategory\",[0-9]+\n)*) 
```

# python - Key/value pairs in custom widget

> ID：13785535
> 
> 赞同：0
> 
> 时间：2012-12-09T07:27:20.237
> 
> 标签：python, django

So let's say I have jQuery convert a simple text input from this

```
<input class='employee_list' name='requestor' type='text' /> 
```

to this

```
<div name='requestor' class='ajax_picker'>
    <input class='search_box' class='employee_list' name='requestor_text' type='text'/>
    <input class='id' name='requestor' type='hidden' value='' /> 
    <div class='results'></div>
</div> 
```

And load the hidden input value with AJAX + JSON. Problem is, `if form.is_valid() is not True`, then how can I create a custom Widget that will render both values? Thinking I could do two different fields, but that seems ugly. I could also customize the form rendering, but that's even worse. Maybe the form can pass all of the POST data to the widget, but can't seem to figure out how to get that to work.

There must be an elegant way to achieve this!

```
from django import forms

class AjaxPickerWidget(forms.TextInput):
    def render(self, name, value, attrs=None):
        # ... now what?
        return super(AjaxPickerWidget, self).render(name, value, attrs=attrs) 
```

**My Solution**

Thanks for your help, I took a variant approach. Since I am using this strictly for Models (hence needing a key/value pair) I made the widget interact directly with the model and create a `data-id` attribute that the jQuery would catch to move to the hidden field.

```
from django import forms

class AjaxPickerModelWidget(forms.TextInput):
    def __init__(self, css_class, queryset, id_name, value_name, attrs={}):
        attrs['class'] = css_class
        self.queryset = queryset
        self.id_name = id_name
        self.value_name = value_name
        super(AjaxPickerModelWidget, self).__init__(attrs=attrs)

    def render(self, name, value, attrs={}):
        try:
            instance = self.queryset.get(**{self.id_name: value})
            attrs['data-id'] = value
            value = getattr(instance, self.value_name)
        except:
            value = ''
        return super(AjaxPickerModelWidget, self).render(name, value,
                                                         attrs=attrs) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:53:56.993

好吧，我不知道这是否称得上优雅，但是像这样的东西怎么样。在这里，我将搜索字符串作为属性存储在小部件上，并从表单构造函数中的 POST 数据设置属性。我还使用 name="foo_picker_text" 来指示名为“foo”的相应输入的搜索输入。

```
class AjaxPickerWidget(HiddenInput):
  search_text_suffix = "_picker_text"

  def __init__(self, **kwargs):
    super(AjaxPickerWidget, self).__init__(**kwargs)
    self.search_text = None

  def render(self, name, value, attrs=None):
    start = '<div name="%s" class="ajax_picker">' % (name) + \
             '<input class="search_box" name="%s%s" ' % (name, self.search_text_suffix)+ \
             'type="text" value="%s" />' % (self.search_text or "")
    end = super(AjaxPickerWidget, self).render(name, value, attrs=attrs) + '</div>'
    return '%s%s' % (start, end)

class MyForm(Form):
  requestor = CharField(widget = AjaxPickerWidget())

  def __init__(self, *args, **kwargs):
    super(MyForm, self).__init__(*args, **kwargs)
    # find picker text in POST data and tell the corresponding widget about it
    for name in self.data:
      if name.endswith(AjaxPickerWidget.search_text_suffix):
        field_name = name.split(AjaxPickerWidget.search_text_suffix)[0]
        self.fields[field_name].widget.search_text = self.data[name] 
```

您可能需要对其进行一些调整以使属性显示在您想要的位置等，但希望这基本上可以满足您的需求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:18:40.740

您可以代替调用`is_valid()`表单创建自定义函数

```
from django import forms

class AjaxPickerWidget(forms.TextInput):
    def render(self, name, value, attrs=None):
        return super(AjaxPickerWidget, self).render(name, value, attrs=attrs)
    def validate(self):
        values = self.cleaned_data.items():
        # Modify the values to fit the original form (delete, change etc)
        return whateversleft.is_valid() # Perhaps with some additional checks 
```

# email - Check if paypal email address is a verified user

> ID：13785537
> 
> 赞同：11
> 
> 时间：2012-12-09T07:27:57.433
> 
> 标签：email, paypal, fraud-prevention

I would like to check if a paypal user who tries to buy something from my site has a verified account before he makes purchase.

Once the user isn't verified, any payment he/she makes would fail. Funds will be returned back to user automatically.

Is there any code I can add or edit to make this work due to fraud issues.

Well I found this

[https://www.paypal.com/us/verified/pal=emailhere](https://www.paypal.com/us/verified/pal=emailhere)

where if i replace emailhere with any email i get verified or unverified.

I would like to add this to the code. Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:40:32.503

如果您还没有，我建议您使用[Express Checkout API](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。这将允许您在完成付款之前检查付款人状态。

[SetExpressCheckout](https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-nvp) API 将生成您的令牌，您可以使用该令牌将用户重定向到 PayPal。然后他们将登录，查看订单，然后单击继续，这会将他们发送回您的站点。

此时，您可以调用[GetExpressCheckoutDetails](https://www.x.com/developers/paypal/documentation-tools/api/getexpresscheckoutdetails-api-operation-nvp)以获取所有买家详细信息，包括他们的验证状态。

要完成整个事情，您将调用[DoExpressCheckoutPayment](https://www.x.com/developers/paypal/documentation-tools/api/doexpresscheckoutpayment-api-operation-nvp)。但是，如果付款人未经过验证，您可以简单地停止流程并忽略此呼叫。不会发生任何付款，因此无需退款。您可以简单地显示一条消息，表明他们需要在向您购买之前验证他们的帐户。

如果您碰巧使用 PHP，我建议您查看我[的 PayPal 类库](http://www.angelleye.com/overview-of-php-class-library-for-paypal/)。它使所有这一切对您来说都非常简单。

# mysql - Remote Connection to MySQL database to bypass through Squid proxy server

> ID：13785539
> 
> 赞同：4
> 
> 时间：2012-12-09T07:27:59.130
> 
> 标签：mysql, squid

I am using Squid as a proxy server for web cache in my local network. I have developed a utility in VB.NET that requires a remote connection to a MySQL database on a remote server over internet. I am able to connect to remote server if I disable the proxy server but can not if the proxy is enabled.

I don't know if I can use MySql Proxy in this scenario on my local proxy server and what configurations will I have to make.

Below is my squid configuration;

> ACL to define ports allowed to passthrough Squid
> acl SSL_ports port 443
> acl Safe_ports port 80 # http
> acl Safe_ports port 21 # ftp
> acl Safe_ports port 1025-65535 # unregistered ports
> acl Safe_ports port 3306 # mysql remote connection
> acl CONNECT method CONNECT
> 
> http_access deny !Safe_ports
> http_access allow Safe_ports
> http_access allow CONNECT !SSL_ports

What alternative I can have to achieve a similar setup that is web cache + remote connection to mysql database.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:16:31.023

Squid 根本无法代理 MySQL。您必须配置防火墙（或使用直接连接、nat 等）才能使用远程连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T17:17:18.813

我也一直在研究代理数据库流量。Squid 不能代理 MySQL 流量，但是你确实想代理 MySQL 流量，你可以试试[SQLProxy](http://www.sqldata.com/sqlproxy.htm)，这是一个代理 MySQL 流量的 IIS 插件。

在 Windows、Mac 和 Linux 上运行的基于 Java 的解决方案是[TcpCatcher](http://www.tcpcatcher.org)。它主要用于监控和更改 TCP 流量，但它也可以用作[纯代理服务器](http://www.tcpcatcher.org/pure_proxy.php)。

如果您对基于 *nix 的解决方案持开放态度，则可以使用[高可用性代理（“HAProxy”）](http://haproxy.1wt.eu/#desc)，它作为 TCP/HTTP 负载平衡器，可用于代理 MySQL 数据库连接以及 HTTP 连接。

[在http://www.severalnines.com/resources/clustercontrol-mysql-haproxy-load-balancing-tutorial](http://www.severalnines.com/resources/clustercontrol-mysql-haproxy-load-balancing-tutorial)有一个关于使用 HAProxy 代理 MySQL 连接的教程和信息页面（截至 2013 年 6 月）。这是使用 HAProxy 代理单个 MySQL 连接的示例：http: [//flavio.tordini.org/a-more-stable-mysql-with-haproxy](http://flavio.tordini.org/a-more-stable-mysql-with-haproxy)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:57:29.553

我已经设法让它与 Microsoft Forefront TMG 一起工作。将使用端口 3306 为所有用户从内部到外部的出站连接创建访问规则。防火墙客户端也应该安装在客户端机器上。

Squid 和 Polipo 不能在需要远程连接到 MySql 的环境中使用。在这种情况下，在代理之前设置本地服务器以及与远程服务器或 VPN/SSH 的一些同步机制是可能的。

希望对其他相关读者有所帮助。

# c++ - Spherical Area Light Source for Soft Shadows

> ID：13785541
> 
> 赞同：1
> 
> 时间：2012-12-09T07:28:15.750
> 
> 标签：c++, graphics, geometry, raytracing

I'm attempting to implement soft shadows in my raytracer. To do so, I plan to shoot multiple shadow rays from the intersection point towards the area light source. I'm aiming to use a spherical area light--this means I need to generate random points on the sphere for the direction vector of my ray (recall that ray's are specified with a origin and direction).

I've looked around for ways to generate a uniform distribution of random points on a sphere, but they seem a bit more complicated than what I'm looking for. Does anyone know of any methods for generating these points on a sphere? I believe my sphere area light source will simply be defined by its XYZ world coordinates, RGB color value, and r radius.

I was referenced this code from *Graphics Gems III*, page 126 (which is also the same method discussed [here](http://mathworld.wolfram.com/SpherePointPicking.html) and [here](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQxQEwAA&url=https://docs.google.com/viewer?a=v&q=cache%3akTqau7SL04cJ%3awww.cs.sjsu.edu/~teoh/teaching/previous/cs116b_sp08/lectures/lecture16_raytracing.ppt%2b&hl=en&gl=us&pid=bl&srcid=ADGEEShB6t6HDEyDqZcXPJFDZnfVHgbPjJvwT-TgQ53dqblQC4FPNBc72AQPPqEYLpZkXyaxyCZXe-NK9TcoVj3H9KQrdIHAntMdp1TCKphcGrH8xqgIrvTpTpw4kGvXSKlmH0GBmeSX&sig=AHIEtbR3QDZeODZ7gA7kxghijcZqt4qPaQ&ei=bjzEUKaHCeSDjAKhjIHQDQ&usg=AFQjCNGn2M-iEes-tunLK3tAhEUTm9G8rw&bvm=bv.1354675689,d.cGE)):

```
void random_unit_vector(double v[3]) {    
double theta = random_double(2.0 * PI);
double x = random_double(2.0) - 1.0;
double s = sqrt(1.0 - x * x);
v[0] = x;
v[1] = s * cos(theta);
v[2] = s * sin(theta); 
```

}

This is fine and I understand this, but my sphere light source will be at some point in space specified by 3D X-Y-Z coordinates and a radius. I understand that the formula works for unit spheres, but I'm not sure how the formula accounts for the location of the sphere.

Thanks and I appreciate the help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:53:10.440

您似乎混淆了生成方向的公式 - 即球体上的一个点 - 以及您试图生成方向 /toward/ 球体的事实。

您给出的公式均匀地采样随机射线：它在单位球体上找到一个 X、Y、Z 三元组，可以将其视为一个方向。

您实际尝试实现的是仍然生成一个方向（球体上的一个点），但它有利于指向一个球体的特定方向（或仅限于一个锥体：您从相机中心获得的锥体和球体光源的轮廓）。这样的事情可以通过两种方式完成：

*   使用余弦波瓣对球形光源中心进行重要性采样。
*   上述定义的锥体中的均匀采样。

在第一种情况下，公式在“全球照明指南”中给出：http://people.cs.kuleuven.be/~philip.dutre/GI/TotalCompendium.pdf [（](http://people.cs.kuleuven.be/~philip.dutre/GI/TotalCompendium.pdf) 第 38 页第 21 页）。在第二个在这种情况下，你可以做一些拒绝抽样，但我很确定有一些封闭的公式。

最后，还有最后一个选项：您可以使用您的公式，将生成的 (X,Y,Z) 视为场景中的一个点，然后将其转换为球体的位置，并从您的相机制作一个指向矢量朝着它。但是，它会带来严重的问题：

*   您将生成朝向球体光背面的矢量
*   对于生成的方向集的 pdf，您将没有任何公式，您将在以后的蒙特卡洛积分中需要这些公式。

# android - Compare downloaded apk file version with installed one version programmaticaly

> ID：13785546
> 
> 赞同：1
> 
> 时间：2012-12-09T07:29:51.670
> 
> 标签：android, version, apk

I wanted to know that is it possible to find version of an apk file that i've downloaded from the server? i can retrieve the version of my app that is installed on device but i want to check installed app version on device with the downloaded apk file version.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:24:37.383

在安装之前，您无法轻松获取下载的 APK 文件的版本。

话虽如此，您可以解压缩 APK 文件（它只是一个 zip 文件）并解析 AndroidManifest.xml 以获取版本代码的值。由于您提取的 AndroidManifest.xml 是一个二进制文件，因此您需要编写一些代码来解析它。它不像检查纯文本文件那么简单。

查看这篇文章，了解如何解析从 APK 中提取的 AndroidManifest。

[如何解析 .apk 包中的 AndroidManifest.xml 文件](https://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:32:13.740

```
PackageManager manager = this.getPackageManager();
PackageInfo info = manager.getPackageInfo("com.whatsapp", 0);
String packageName = info.packageName;
int versionCode = info.versionCode;
String versionName = info.versionName; 
```

Replace `com.whatsapp` with your package name.

# objective-c - Restkit mapping relationship

> ID：13785548
> 
> 赞同：0
> 
> 时间：2012-12-09T07:30:14.603
> 
> 标签：objective-c, cocoa-touch, mapping, restkit, relationship

Here is my json

```
{  

     "status":"ok",
     "count":1,
     "count_total":164,
     "pages":164,
     "posts":[{"id":2966,
                "type":"post",
                "title":"title here",
                "content":"here content",
                "date":"",
                "attachments [
                              "comment_count":0,
                              "thumbnail":""]
              }]
   } 
```

one class Attachments and one class articles

Attachments.h

```
 #import <Foundation/Foundation.h>
 @interface Attachments : NSObject
 @property (strong, nonatomic) NSString *thumbnail;
 @end 
```

Attachments.m

```
 #import "Attachments.h"
 @implementation Attachments
 @synthesize thumbnail;
 @end 
```

articles.h

```
 #import <UIKit/UIKit.h>
 #import "Attachments.h"

 @interface articles : NSObject
 @property (strong, nonatomic) NSString *title;
 @property (strong, nonatomic) Attachments *attachments;
 @property (strong, nonatomic) NSString *date;
 @end 
```

articles.m

```
 #import "articles.h"

 @implementation articles
 @synthesize title;
 @synthesize attachments;
 @synthesize date;
 @end 
```

viewcontroller.h

```
 #import <UIKit/UIKit.h>
 #import <RestKit/RestKit.h>
 #import "articles.h"
 #import "postCell.h"
 @interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource,         UISearchBarDelegate, RKObjectLoaderDelegate>  {
  __weak IBOutlet UISearchBar *_searchBar;
  __weak IBOutlet UITableView *_tableView;
    }
 @property (weak, nonatomic) IBOutlet UITableView *tableView;
 @property (weak, nonatomic) IBOutlet UISearchBar *searchBar;
 @property (strong, nonatomic) NSMutableArray *post;
 @end 
```

in viewcontroller.m

```
 RKObjectMapping* attachmentsMapping = [RKObjectMapping mappingForClass:[Attachments class]];
 [attachmentsMapping mapKeyPathsToAttributes:@"thumbnail", @"thumbnail", nil];

 RKObjectMapping *postMapping = [RKObjectMapping mappingForClass:[articles class]];
 [postMapping mapKeyPathsToAttributes:@"title",@"title",@"date",@"date",nil];

 [postMapping mapKeyPath:@"attachments" toRelationship:@"attachments" withMapping:attachmentsMapping];    
 [objectManager.mappingProvider setMapping:postMapping forKeyPath:@"posts"];

 [self searchRequest];

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects {

   NSLog(@"objects[%d]", [objects count]);
  [posts removeAllObjects];
  for (articles *t in objects) {
    [posts addObject:t];
     }
   [self.tableView reloadData];
    } 
```

i get this error

> [RKObjectMappingOperation transformValue:atKeyPath:toType:] Failed transformation of value at keyPath 'attachments'. No strategy for transforming from '__NSArrayM' to 'Attachments'

What's wrong?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:04:17.630

Change

```
@property (strong, nonatomic) Attachments *attachments; 
```

To

```
@property (strong, nonatomic) NSMutableArray *attachments; 
```

The relationship mapping returns an array of data, even if there's only one.

# objective-c - 如何将 CCsprite 添加到数组中的图层

> ID：13785549
> 
> 赞同：1
> 
> 时间：2012-12-09T07:30:23.613
> 
> 标签：objective-c, xcode, cocos2d-iphone, sprite, ccsprite

嗨，伙计们，我真的需要一些帮助，我已经在游戏的这一部分卡住了一个多星期了，我似乎无法解决这个问题，所以看看我下面的代码，

> #import "HelloWorldLayer.h"
> #import "AppDelegate.h"

```
@implementation HelloWorldLayer

+(CCScene *) scene
{
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
HelloWorldLayer *layer = [HelloWorldLayer node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
}

-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super's" return value
if( (self=[super init]) ) {
    moles = [[NSMutableArray alloc] init];
    winSize = [[CCDirector sharedDirector]winSize];
    CCSprite *mole1 = [CCSprite spriteWithFile:@"lightsabericonblue.png"];

   [self starCreateCurrentLevel:mole1];

}
return self;
}

-(void)starCreateCurrentLevel:(CCSprite *)mole1{
starCountCurrentLevel = 10;
for (int i = 0; i < starCountCurrentLevel;) {

    [moles addObject:mole1];        
    starCountCurrentLevel--;

}

[self schedule:@selector(tryPopMoles:) interval:1];

}

- (void)tryPopMoles:(ccTime)dt {
if(moles.count !=   0){
    for (CCSprite *mole in moles) {
        if (arc4random() % moles.count == 0) {
                    if (mole.numberOfRunningActions == 0) {
                        [self popMole:mole];
                    }
        }
    }

}else if(moles.count == 0){
    NSLog(@"No More Moles To Spawn");
    [self unschedule:@selector(tryPopMoles:)];
}

}

- (void) popMole:(CCSprite *)mole {
mole.position = ccp(150, 150);
[self addChild:mole];  
}

- (void) dealloc
{
[moles release];
moles = nil;
[super dealloc];
}

@end 
```

当我运行此代码时，我收到以下错误，*** Assertion failure in -[HelloWorldLayer addChild:z:tag:], /Users/....../libs/cocos2d/CCNode.m:335。

当我在 init 方法中添加孩子时，它很好，但我不想这样做，我希望能够调用 try pop 痣，然后根据是否还有精灵留在里面来调用 pop 痣数组，我有一种感觉我错过了什么或做错了什么。

**更新 -**

```
#import "HelloWorldLayer.h"
#import "AppDelegate.h"

#pragma mark - HelloWorldLayer
CGSize winSize;
int enemyX;
int enemyY;
int randomAngleY;
int randomAngleX;
int winSizeX;
int winSizeY;
int minDuration = 1;
int maxDuration = 4.0;
int rangeDuration;
int actualDuration;
int starCountCurrentLevel;
int test = 0;

@implementation HelloWorldLayer

+(CCScene *) scene
{
CCScene *scene = [CCScene node];
HelloWorldLayer *layer = [HelloWorldLayer node];
[scene addChild: layer];
return scene;
}

-(id) init
{
if( (self=[super init]) ) {

moles = [[NSMutableArray alloc] init];
winSize = [[CCDirector sharedDirector]winSize];
[self starCreateCurrentLevel];

}
return self;
}

-(void)starCreateCurrentLevel{
starCountCurrentLevel = 10;
for (int i = 0; i < starCountCurrentLevel;) {
[moles addObject:[CCSprite spriteWithFile:@"lightsabericonblue.png"]];
starCountCurrentLevel--;
}
[self schedule:@selector(tryPopMoles:) interval:3];

}

- (void)tryPopMoles:(ccTime)dt {
 NSMutableArray *tempArray = [NSMutableArray arrayWithArray:moles];
for (int randomIndex = tempArray.count -1; randomIndex < tempArray.count; randomIndex--) {
        CCSprite * sprite = (CCSprite *)[tempArray objectAtIndex:randomIndex];
        //CCSprite *sprite = [tempArray objectAtIndex:randomIndex];
        [self popMole:sprite];
        NSLog(@"Enemy Added");
        [tempArray removeObject:sprite];
    }
 if([tempArray count] == 0){
    NSLog(@"No More Moles To Spawn");
    [self unschedule:@selector(tryPopMoles:)];
}

}

- (void) popMole:(CCSprite *)sprite {

winSizeX = winSize.width - sprite.contentSize.width + 25;
winSizeY = winSize.height - 25 - sprite.contentSize.height + 17;
randomAngleX = arc4random() % winSizeX;
randomAngleY = arc4random() % winSizeY;
enemyX = arc4random() % winSizeX ;
enemyY = arc4random() % winSizeY;
rangeDuration = maxDuration - minDuration;
actualDuration = (arc4random() % rangeDuration) + minDuration;
sprite.position = ccp(enemyX, enemyY);
[self addChild:sprite];

}

- (void) dealloc
{
[moles release];
moles = nil;
[super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:57:55.580

您只创建了一次精灵，但尝试添加了几次。（记住，这些是指向对象的指针，所以你总是指的是完全相同的精灵。）如果你想要同一个精灵的 10 个版本（在不同的位置、比例、速度，等等），你需要创建sprite（通过 creator 方法）10 次。您可以在原始副本上进行复制，或者只是动态创建它：

```
-(void)starCreateCurrentLevel:(CCSprite *)mole1{
starCountCurrentLevel = 10;
for (int i = 0; i < starCountCurrentLevel;) {

    //[moles addObject:mole1];  
    // ^^ You're adding the same sprite (meaning same pointer reference) again and again.  Try this instead:
    [moles addObject:[CCSprite spriteWithFile:@"lightsabericonblue.png"]];      

    starCountCurrentLevel--;
} 
```

当然，现在您不需要将mole1 传递到您的方法中。您可以（根据您的需要）考虑传入 spriteFrameName 或其他内容。

# java - Java：显式设置哈希图的键并保持对它的引用

> ID：13785551
> 
> 赞同：0
> 
> 时间：2012-12-09T07:30:49.213
> 
> 标签：java

```
public static HashMap<ArrayList<Integer>, String> map = new HashMap<ArrayList<Integer>, String>();  
public static ArrayList<ArrayList<Integer>> keys = new ArrayList<>(map.keySet()); 
```

然后在`main`

```
map.put(key, "c"); 
```

（假设`key`是一个有效的 ArrayList）。但`keys`在那之后仍然有大小 0。

我怎样才能使关系`keys`更牢固，以便它实际上与 HashMap 绑定并包含其所有键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:33:38.640

ArrayList 的复制构造函数将映射中的所有键复制到 ArrayList，但如果在此之后更改映射，它将不会被反映。

我可以想到3个选项：

*   编写自己的地图实现，嵌入 ArrayList 并使其保持最新
*   每次更新地图时手动更新 ArrayList
*   根本不使用 ArrayList （`keySet()`当您需要访问密钥时是否存在，所以我不确定您为什么需要一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:33:39.170

你不能。

`Map.keySet()`返回 Map 的当前键集，然后将其加载到列表中。之后对地图的更改对列表的内容没有影响。

如果需要，大多数人只会重新获得密钥集。你为什么不这样做呢？

# php - 为什么我的 foreach 循环不起作用？

> ID：13785554
> 
> 赞同：0
> 
> 时间：2012-12-09T07:32:10.043
> 
> 标签：php, arrays, multidimensional-array

我的 foreach 循环没有显示与它们所属的键匹配的值。我正在循环通过这个 foreach 循环来检索我的 twitter 关注者的名称和图像，但它没有显示值，我很确定关键名称是正确的.. 因为当我只是使用 $value 变量时，它会回显名称和图像链接是相同的，但我想捕获图像链接，将其放入 img src html 格式以显示图像。 . 下面是我的代码。

```
 for ($i=0; $i <= count($array); $i++) {
     if (is_array($array[$i])) {
         foreach($array[$i] as $key => $value) {
             if ($key =='name' || $key =='profile_image_url') { 
                 echo "<b>". $key["name"]."</b><br />";
                 echo "<img src='".$key['profile_image_url']."' width='100' height='100'/>";
             } else {
                 unset($key);
             }
         }

      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:37:09.007

你必须打印

```
$value 
```

并不是

```
$key['name'] 
```

因为正如你所说：

```
if($key =='name' || $key =='profile_image_url') 
```

然后逻辑上

```
 $key["name"] 
```

不存在。

$key，在这种情况下是 'name' 或 'profile_image_url'。这是一个字符串，而不是一个数组。

你需要这样做：

```
for ($i=0; $i <= count($array); $i++)
                      {

                       if(is_array($array[$i]))
                      {
                         foreach($array[$i] as $key => $value) {

                        if ($key =='name' || $key =='profile_image_url') 
                               { 
                                 echo "<b>". $value."</b><br />";
                              //echo "<img src='".$key['profile_image_url']."' width='100' height='100'/>";

                                   }
                         else {

                              unset($key);

                                 }
                        }

               }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:37:45.663

你用

```
$key["name"] 
```

显示一个项目。不应该`$value`吗？

# java - 如何在jscrollpane中为jtree设置preferedsize

> ID：13785559
> 
> 赞同：4
> 
> 时间：2012-12-09T07:33:10.697
> 
> 标签：java, swing, jscrollpane, jtree, preferredsize

我正在尝试在borderlayout（WEST）中为jscrollpane设置首选宽度。但它不起作用

请查看我的示例代码

```
JTree tree=new JTree(root);  
JScrollPane jsp=newJScrollPane(tree);
jsp.setBounds(0,0,200,100);
Jframe.add(jsp,BorderLayout.WEST); 
```

但它显示默认宽度。

或者，我尝试为 JTree 设置首选大小，它工作正常但 jscrollpane 无法正常工作。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:50:54.637

布局管理器根据组件的大小（最小/最大/首选）确定组件的位置。因此，您的调用`setBounds`将被忽略，而是`BorderLayout`将确定它放置您的组件的位置。

通常这种机制工作得很好。a 的问题`JScrollPane`在于它的大小提示可能与您想要的行为不同步（由于滚动窗格可以有滚动条，因此它可以确定自己的大小）。

`setPreferredSize`解决方案：在`JScrollPane`添加之前调用。这也是在[官方教程](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)中完成的，也是我唯一一次想到调用这个方法是可以接受的。

# ajax - 如何使用 jquery 响应 ajax

> ID：13785566
> 
> 赞同：0
> 
> 时间：2012-12-09T07:34:25.753
> 
> 标签：ajax, jquery

我使用 jquery-ajax 并拥有三个文件。我的文件是：

> jquery-1.8.3.min.js
> 
> 索引.html
> 
> res.html

`jquery-1.8.3.min.js`文件是 jquery 文件的主要文件。
index.html 代码是：

```
<html>
    <head>
        <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $.ajax({url:'res.html',type:"POST",data:'',success:function(result){
                        $("#responsediv").html(result);
                    }
                });
            });
            $(document).ready(function(){
                $('#state_id').change(function(){
                    alert($(this).val());
                });
            });
        </script>
    </head>
    <body>
        <div id="responsediv">

        </div>
    </body>
</html> 
```

res.html 代码是：

```
<select id="state_id" name="state_id">
    <option value="1">first</option>
    <option value="2">second</option>
    <option value="3">third</option>
    <option value="4">forth</option>
</select> 
```

我不知道为什么这段代码没有运行。

```
$(document).ready(function(){
    $('#state_id').change(function(){
        alert($(this).val());
    });
}); 
```

这是示例和简单的代码。我在另一个项目上检查了这个并面临这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:46:50.873

我认为这应该在这里：

```
<script type="text/javascript">
        $(document).ready(function(){
            $.ajax({url:'res.html',type:"POST",data:'',success:function(result){
                    $("#responsediv").html(result);
                }
            });
            $(document).on('change', '#country_id', function(){
                alert($(this).val());
            });
        });
</script> 
```

笔记：

```
you don't need two doc ready handlers. 
```

试试这个，看看这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:36:52.933

您的 HTML 中缺少国家/地区的选择框。尝试修改如下：

```
<html>
    <head>
        <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $.ajax({url:'res.html',type:"POST",data:'',success:function(result){
                        $("#responsediv").html(result);
                    }
                });

                $('#country_id').change(function(){
                    alert($(this).val());
                });
            });
        </script>
    </head>
    <body>
        <select id="country_id">
            <option value="0">Select Country...</option>
            <option value="1">Country One</option>
            <option value="2">Country Two</option>
        </select>
        <div id="responsediv">

        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T07:36:53.977

您的 html 中似乎没有`$('#country_id')`可以引用的元素。

# php - 我希望能够使用 PHP 删除或编辑数据库中已有的用户

> ID：13785568
> 
> 赞同：0
> 
> 时间：2012-12-09T07:35:22.960
> 
> 标签：php, database

我正在尝试使用删除和编辑用户的最终选项来查看当前用户。$dbc 在我的 header.html 文件中的另一个文件中。我收到的唯一不包括页眉/页脚的输出是：警告：mysqli_fetch_array() 期望参数 1 是 mysqli_result，在 C:\xampp\htdocs\Kyle_Site\Programming Rite\controle\view_users.php 中给出的布尔值在线76 编辑 删除 姓 名 注册日期

警告：mysqli_free_result() 期望参数 1 为 mysqli_result，布尔值在 C:\xampp\htdocs\Kyle_Site\Programming Rite\controle\view_users.php 第 89 行给出

```
<?php # Script 10.5 - #5
// This script retrieves all the records from the users table.
// This new version allows the results to be sorted in different ways.

$page_title = 'View the Current Users';
include ('header.html');
echo '<h1>Registered Users</h1>';

// Number of records to show per page:
$display = 5;

   // Determine how many pages there are...
if (isset($_GET['p']) && is_numeric($_GET['p'])) { // Already been determined.
    $pages = $_GET['p'];
} else { // Need to determine.
    // Count the number of records:
     $q = "SELECT COUNT(user_id) FROM `kb2360716_entity_users`";
    $r = mysqli_query ($dbc, $q);
    $row = mysqli_fetch_array ($r, MYSQLI_NUM);
    $records = $row[0];
    // Calculate the number of pages...
    if ($records > $display) { // More than 1 page.
        $pages = ceil ($records/$display);
    } else {
        $pages = 1;
     }
} // End of p IF.

// Determine where in the database to start returning results...
if (isset($_GET['s']) && is_numeric($_GET['s'])) {
    $start = $_GET['s'];
 } else {
$start = 0;
}

// Determine the sort...
// Default is by registration date.
$sort = (isset($_GET['sort'])) ? $_GET['sort'] : 'rd';

// Determine the sorting order:
switch ($sort) {
    case 'ln':
         $order_by = 'last_name ASC';
         break;
    case 'fn':
        $order_by = 'first_name ASC';
        break;
    case 'rd':
        $order_by = 'registration_date ASC';
        break;
    default:
        $order_by = 'registration_date ASC';
        $sort = 'rd';
        break;
}

// Define the query:"SELECT last_name, first_name, DATE_FORMAT(registration_date, '%M        %d, %Y') AS dr, user_id FROM `kb2360716_entity_users` ORDER BY $order_by LIMIT $start,   $display";        
$q = "SELECT `id`,`username`,`firstname`,`lastname`,`email` FROM `kb2360716_entity_users` ORDER BY `id` ASC";
$r = mysqli_query ($dbc, $q); // Run the query.

// Table header:
echo '<table align="center" cellspacing="0" cellpadding="5" width="75%">
<tr>
    <td align="left"><b>Edit</b></td>
    <td align="left"><b>Delete</b></td>
    <td align="left"><b><a href="view_users.php?sort=ln">Last Name</a></b></td>
    <td align="left"><b><a href="view_users.php?sort=fn">First Name</a></b></td>
    <td align="left"><b><a href="view_users.php?sort=rd">Date Registered</a></b>  </td>
</tr>
';

// Fetch and print all the records....
$bg = '#eeeeee'; 
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
    $bg = ($bg=='#eeeeee' ? '#ffffff' : '#eeeeee');
         echo '<tr bgcolor="' . $bg . '">
         <td align="left"><a href="edit_user.php?id=' . $row['user_id'] .   '">Edit</a></td>
        <td align="left"><a href="delete_user.php?id=' . $row['user_id'] . '">Delete</a></td>
        <td align="left">' . $row['last_name'] . '</td>
        <td align="left">' . $row['first_name'] . '</td>
        <td align="left">' . $row['dr'] . '</td>
    </tr>
    ';
 } // End of WHILE loop.

echo '</table>';
mysqli_free_result ($r);
mysqli_close($dbc);

// Make the links to other pages, if necessary.
if ($pages > 1) {

     echo '<br /><p>';
     $current_page = ($start/$display) + 1;

     // If it's not the first page, make a Previous button:
     if ($current_page != 1) {
        echo '<a href="view_users.php?s=' . ($start - $display) . '&p=' . $pages . '&sort=' . $sort . '">Previous</a> ';
    }

    // Make all the numbered pages:
    for ($i = 1; $i <= $pages; $i++) {
        if ($i != $current_page) {
            echo '<a href="view_users.php?s=' . (($display * ($i - 1))) . '&p=' . $pages . '&sort=' . $sort . '">' . $i . '</a> ';
        } else {
            echo $i . ' ';
         }
    } // End of FOR loop.

    // If it's not the last page, make a Next button:
    if ($current_page != $pages) {
            echo '<a href="view_users.php?s=' . ($start + $display) . '&p=' . $pages . '&sort=' . $sort . '">Next</a>';
    }

     echo '</p>'; // Close the paragraph.

} // End of links section.
echo mysqli_error();
include ('footer.html');
?> 
```

这是我的 header.html 的顶部：

```
<?php
require 'connect.inc.php';
require 'core.inc.php';
if (!loggedin()) 
    {
        header("Location: index2.php");
        exit;
    }
?> 
```

这是我的 connect.inc.php：

```
<?php
$mysql_host='209.129.8.3';
$mysql_user='47278';

$conn_error='Could not connect';
$mysql_db='47278';

$dbc = @mysqli_connect ($mysql_host, $mysql_user, $mysql_pass);
if(!@mysql_connect($mysql_host, $mysql_user, $mysql_pass) || !@mysql_select_db($mysql_db)){
die($conn_error);
}

?> 
```

我进行了更改并删除了 3 个@，现在我有一个新错误以及两个旧的警告：mysqli_fetch_array() 期望参数 1 是 mysqli_result，在 C:\xampp\htdocs\Kyle_Site\Programming Rite 中给出的布尔值\controle\view_users.php 第 21 行

警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值在 C:\xampp\htdocs\Kyle_Site\Programming Rite\controle\view_users.php 第 76 行给出

警告：mysqli_free_result() 期望参数 1 为 mysqli_result，布尔值在 C:\xampp\htdocs\Kyle_Site\Programming Rite\controle\view_users.php 第 89 行给出

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T07:45:13.443

the problem is here:

```
$r = @mysqli_query ($dbc, $q); 
```

remve the @ infront of it and you will see the mySQL error that gives you. This way you suppressed the error and it results as FALSE, which is why the next lines fails after.

# ftp - 什么时候应该从 FTP 服务器发送 226？

> ID：13785584
> 
> 赞同：2
> 
> 时间：2012-12-09T07:37:50.560
> 
> 标签：ftp, ftp-server

我正在 Qt 中创建一个 FTP 服务器，但我不确定何时发送 RETR 命令的 226 成功响应代码。

在所有数据写入之后，但在数据连接套接字关闭之前，我是否发送它：

```
 reply(226);
    dataSocket()->disconnectFromHost(); 
```

还是在数据连接套接字关闭后发送它：

```
 dataSocket()->disconnectFromHost();
    dataSocket()->waitForDisconnected();
    reply(226); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:47:56.113

[http://www.ietf.org/rfc/rfc959.txt](http://www.ietf.org/rfc/rfc959.txt)

> 为防止此处出现竞争条件，服务器在关闭数据连接后发送回复 (226)。

# java - PDF Read text and add image references

> ID：13785589
> 
> 赞同：1
> 
> 时间：2012-12-09T07:38:43.687
> 
> 标签：java, pdf, itext, pdfbox

I am writing application which gets questions from pdf format and converts it into moodle format. However, i have a problem. How can I read pdf file so that text and images will be extracted and there will be references for this images in text?

For example, if I read the question from pdf with picture i will get

text:

QUESTION 2

View the Exhibit to examine the description for the SALES table. Which views can have all DML operations performed on it? (Choose all that apply.)

[image.jpg]

A. CREATE VIEW v3 AS SELECT * FROM SALES WHERE cust_id = 2034 WITH CHECK OPTION;

B. CREATE VIEW v1 AS SELECT * FROM SALES WHERE time_id <= SYSDATE - 2*365 WITH CHECK OPTION;

C. CREATE VIEW v2 AS SELECT prod_id, cust_id, time_id FROM SALES WHERE time_id <= SYSDATE - 2*365 WITH CHECK OPTION;

D. CREATE VIEW v4 AS SELECT prod_id, cust_id, SUM(quantity_sold) FROM SALES WHERE time_id <= SYSDATE - 2*365 GROUP BY prod_id, cust_id WITH CHECK OPTION; Answer: AB Section: (none) Explanation/Reference:

and image.jpg with picture of table will be saved in the specified folder.

Thanks for any help in advance. =)

# regex - Client denied by server configuration with tomcat

> ID：13785591
> 
> 赞同：-1
> 
> 时间：2012-12-09T07:39:02.957
> 
> 标签：regex, apache, tomcat, permissions

I have found at least a dozen entries for this error even in this forum, and many outside. All are basically saying that inside `<Directory></Directory>`, I have "deny all" directive, and no "allow" directive.

I cannot write a fixed directory to match because it is created on the fly by a backend tomcat server.

When I entered "myUrl/test/request/user1/1234567890/download", I get

> 403 Forbidden: You don't have permission to access /test/request/user1/1234567890/download.

httpd error log shows:

```
[error] [client xxx.xx.xx.xxx] client denied by server configuration: /data/test, referer: myUrl/test/request/user1/1234567890 
```

The part beginning with "test" is created by the backend tomcat, in which "user1" and "1234567890" vary, while the other parts of the directory structure remain fixed.

In my httpd.conf, I do have:

```
<VirtualHost *:80>    
    DocumentRoot /data
    ---
    ---
    RewriteRule ^/test - [L]
    ---
</VirtualHost> 
```

How do I solve this? Even if I create a different and create another document root, I will need a regex. Somewhere outside , I tried this:

```
<Directory "/data/test/request/*/*/download">
    Options -Indexes -FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

But no success.

I am using "ajp" to talk to backend tomcat and have necessary module in place and I can telnet the backend tomcat server (on 8009) . So it should not be ajp communications problem.

The "test" piece in above url is actually a "context" inside /webapps directory of tomcat. Owner in that "test" context is tomcat, but I have added read permission for everyone.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T09:45:12.760

首先，我不得不为“/”“全部拒绝”

```
Directory  
    Deny from all
/Directory 
```

只有这样“/data”才“允许所有人”

```
Directory /data
    ---
    ---
    Allow from all
/Directory 
```

然后我在里面重新排列了 RewriteRule、Redirect、ProxyPass、ProxyPassReverse

```
VirtualHost *:80 
/VirtualHost 
```

它奏效了！

# java - Writing decoded base64 byte array as image file

> ID：13785594
> 
> 赞同：0
> 
> 时间：2012-12-09T07:39:52.147
> 
> 标签：java

```
 String base64Code = dataInputStream.readUTF();

    byte[] decodedString = null;

    decodedString = Base64.decodeBase64(base64Code);

    FileOutputStream imageOutFile = new FileOutputStream(
    "E:/water-drop-after-convert.jpg");
    imageOutFile.write(decodedString);

    imageOutFile.close(); 
```

The problem is the data is transferred completely and if the data is in text format it is displayed correctly however when i am trying to decode image and write it on output file,it doesnt simply show up in photo viewer.

Any help would be highly appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:06:00.550

DataInputStream.readUTF 可能是问题所在。此方法假定文本是由 DataOutputStream.writeUTF 写入文件的。如果不是这样，并且您要阅读常规文本，请选择不同的类，例如 BufferedReader 或 Scanner。或 Java 1.7 的 Files.readAllBytes。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:51:17.507

一旦我不得不将图像转换为base 64并将该图像作为流发送（这里的编码和解码内容是代码）

要将文件转换为 base64 ：

```
String filePath = "E:\\water-drop-after-convert.jpg";
File bMap =  new File(filePath);
byte[] bFile = new byte[(int) bMap.length()];
        FileInputStream fileInputStream = null;
        String imageFileBase64 = null;

        try {
            fileInputStream = new FileInputStream(bMap);
            fileInputStream.read(bFile);
            fileInputStream.close();
            imageFileBase64 = Base64.encode(bFile);   
        }catch(Exception e){
            e.printStackTrace();
        } 
```

然后在服务端我做了类似的事情将base 64 String中的图像转换回文件，以便我可以显示。我在服务器端使用过这个库`import sun.misc.BASE64Decoder;`

```
//filePath is where you wana save image
                String filePath = "E:\\water-drop-after-convert.jpg";
                File imageFile = new File(filePath);
            FileOutputStream fos = null;
            try {
                fos = new FileOutputStream(imageFile);
            } catch (FileNotFoundException e1) {
                e1.printStackTrace();
            }
            BASE64Decoder decoder = new BASE64Decoder();
            byte[] decodedBytes = null;
            try {
                decodedBytes = decoder.decodeBuffer(imageFileBase64);//taking input string i.e the image contents in base 64
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            try {
                fos.write(decodedBytes);
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                fos.flush();
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

# c# - 如何读取存储在 Windows Phone 联系人中的所有电子邮件地址、电话号码等？

> ID：13785598
> 
> 赞同：1
> 
> 时间：2012-12-09T07:41:37.463
> 
> 标签：c#, .net, windows-phone-7

我们可以使用此代码获取联系人的“一个”电话号码、电子邮件地址等。

```
Contacts ContactsObj = new Contacts();
ContactsObj.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(func);
ContactsObj.SearchAsync(String.Empty, FilterKind.None, null); 
```

/

```
void func(object sender, ContactsSearchEventArgs e)
    {
        foreach (var result in e.Results)
        {
            txtBlock.Text += result.PhoneNumbers.FirstOrDefault()+ "," + result.EmailAddresses.FirstOrDefault();

        }
    } 
```

但是因为一个联系人中可以存储更多的电子邮件/号码。有没有办法在字符串中获取联系人的所有电话号码、电子邮件地址等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T08:54:44.243

您可以使用 foreach 访问多个电子邮件 ID 和电话号码。以下代码对我有用。

```
foreach (Microsoft.Phone.UserData.ContactEmailAddress ad in result.EmailAddresses)
{
    txtBlock.Text += ad.EmailAddress;
}
foreach (Microsoft.Phone.UserData.ContactPhoneNumber ph in result.PhoneNumbers)
{
txtBlock.Text += ph.PhoneNumber;
} 
```

# javascript - 如何解析 querySelectorAll 选择器引擎的结果并允许方法链接？

> ID：13785601
> 
> 赞同：2
> 
> 时间：2012-12-09T07:42:51.990
> 
> 标签：javascript, html, css, css-selectors

简化示例代码：

```
var $ = function(selector, node) { // Selector engine
    var selector = selector.trim(), node = node || document.body;
    if (selector != null) {
        return Array.prototype.slice.call(node.querySelectorAll(selector), 0); }
    }
} 
```

我想像这样使用它......：

```
$("div").innerHTML='It works!'; 
```

...不是这样的...：

```
$("div")[0].innerHTML='It works only on the specified index!'; 
```

...或这个：

```
for(i=0;i<$('div');i++) {
        $("div")[i].innerHTML='It works great but it's ugly!';
} 
```

这是我得到的最接近的。我希望链接工作并使其与本机方法兼容：

```
if(!Array.prototype.innerHTML) { 
    Array.prototype.innerHTML = function(html) {
        for (var i = 0; i < this.length; i++) {
            this[i].innerHTML = html;
        }
    }
}

$("div").innerHTML('It works, but it ruins method chaining!'); 
```

我决定构建这个引擎来更好地学习 JavaScript；它正在工作，但我希望我能从 Stack Overflow 的好心成员那里学到更多东西。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T07:47:53.547

> 我想像这样使用它......：
> 
> ```
> $("div").innerHTML='It works!'; 
> ```
> 
> ...不是这样的...：
> 
> ```
> $("div")[0].innerHTML='It works only on the specified index!'; 
> ```

听起来您希望将一`innerHTML`组结果分配给*所有*结果。`innerHTML`

 *为此，您必须直接或间接使用一个函数。

直接地：

```
var $ = function(selector, node) { // Selector engine
    var selector = selector.trim(),
        node = node || document.body,
        rv;
    if (selector != null) {
        rv = Array.prototype.slice.call(node.querySelectorAll(selector), 0); }
        rv.setInnerHTML = setInnerHTML;
    }
    return rv;
}
function setInnerHTML(html) {
    var index;

    for (index = 0; index < this.length; ++index) {
        this[index].innerHTML = html;
    }
}

// Usage
$("div").setInnerHTML("The new HTML"); 
```

在那里，我们定义了一个函数，并将它分配给您作为属性返回的数组。然后，您可以在数组上调用该函数。`Object.defineProperty`（如果它可用于设置属性，您可能想要使用它`setInnerHTML`，因此您可以使其不可枚举。）

间接（需要启用 ES5 的 JavaScript 引擎）：

```
var $ = function(selector, node) { // Selector engine
    var selector = selector.trim(),
        node = node || document.body,
        rv;
    if (selector != null) {
        rv = Array.prototype.slice.call(node.querySelectorAll(selector), 0); }
        Object.defineProperty(rv, "innerHTML", {
            set: setInnerHTML
        });
    }
    return rv;
}
function setInnerHTML(html) {
    var index;

    for (index = 0; index < this.length; ++index) {
        this[index].innerHTML = html;
    }
}

// Usage
$("div").innerHTML = "The new HTML"; 
```

在那里，我们使用[`Object.defineProperty`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.6)为属性定义一个 setter。

在下面的评论中你说

> 我有一些原型在单独附加到 $ 函数时可以工作。示例：`$('div').makeClass('this');`当它们被链接在一起时，它们不起作用。例子：`$('div').makeClass('this').takeClass('that');`

要使链接工作，您可以`return this;`从每个函数中执行（所以 end`makeClass`会执行`return this;`）。那是因为当您链接时，例如`obj.foo().bar()`，您正在调用`bar`的返回值`foo`。所以为了使链接工作，你确保`foo`返回`this`（`foo`被调用的对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:11:24.000

这是有效的；它与我在前面的示例中给出的语法略有不同，但最终结果是相同的。我从其他 Stack Exchange 成员那里得到了很大的帮助，再次感谢大家。

```
var $ = function(selector, node) { // Selector engine
    var selector = selector.trim(), node = node || document.body;
    if (selector != null) {
        return Array.prototype.slice.call(node.querySelectorAll(selector), 0); }
    }
}

if(!Array.prototype.html) { 
    Array.prototype.html = function(html) {
        for (var i = 0; i < this.length; i++) {
            this[i].innerHTML = html;
        }
        return this; //<---- Silly me, my original code was missing this.
    }
} 
```

当我运行它时，一切（包括链接）都按需要工作：

```
$("div").html('hello world'); 
```

输出：

```
<div>hello world</div> 
```

干杯!*

# ios5 - 带有活动指示器的启动画面在 iOS6 中可以正常工作，但在 iOS5 中则不行

> ID：13785604
> 
> 赞同：0
> 
> 时间：2012-12-09T07:43:12.737
> 
> 标签：ios5, ios6, splash-screen

我想显示一个带有活动指示器的启动屏幕视图，以便在进入我的应用程序之前从服务器加载一些信息。以下是我的做法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    FeedViewController *feedViewController = [[FeedViewController alloc] initWithNibName:@"FeedViewController" bundle:nil];

    MenuViewController *menuViewController=[[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];
    self.navController = [[UINavigationController alloc] initWithRootViewController:feedViewController];

    IIViewDeckController* deckController =  [[IIViewDeckController alloc] initWithCenterViewController:self.navController leftViewController:menuViewController rightViewController:nil];
    deckController.panningMode=IIViewDeckNoPanning;
    deckController.panningView=menuViewController.view;
    self.window.rootViewController = deckController;

    [self.window makeKeyAndVisible];

    // show splash screen until data is loaded
    SplashScreenViewController *controller = [[SplashScreenViewController alloc] initWithNibName:@"SplashScreenViewController" bundle:nil];
    controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [feedViewController presentModalViewController:controller animated:NO];

     return YES;
} 
```

在 FeedViewController.m 中，我做了这样的事情：

```
- (void)viewDidLoad
{
    // load data from a server

    [self performSelector:@selector(dismissSplashScreen) withObject:nil afterDelay:0.0];
} 
```

这段代码在 iOS6 上运行得很好，但是当我用 iOS5 测试它时，带有活动指示器旋转的初始屏幕并没有消失。我怀疑我可能会以错误的方式实现启动画面。（但我不明白为什么这在 iOS6 中有效？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:40:48.370

我自己解决了这个问题，方法是使用 bool 变量来检查是否应该显示启动画面。显示初始屏幕的代码被移到`viewDidLoad`FeedViewController 中。

这种方法似乎适用于 iOS5 和 iOS6。

# ruby-on-rails - 如何使用 RoR 显示 d3.js 圆包图？

> ID：13785607
> 
> 赞同：1
> 
> 时间：2012-12-09T07:43:39.103
> 
> 标签：ruby-on-rails, json, d3.js, sqlite, circle-pack

我正在尝试使用 d3.js设置这样的图表[http://bl.ocks.org/4063269#index.html ：](http://bl.ocks.org/4063269#index.html)

![在此处输入图像描述](../Images/1e9b851411556fb84a1390bc947dcef2.png)

我需要通过将方法放在控制器中并将 js 放在 .html.haml 文件中来做到这一点。我已经制作了控制器，但完全不知道如何编写方法。

这些方法需要从 sqlite3 数据库中获取值并将其转换为 JSON 以供 d3.js 使用。有人可以让我开始吗？我不知道现在该怎么办...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:41:37.357

不幸的是，你提出的问题太开放了，更多的细节你会得到更多的帮助；）

所以 javascript 库将对您的应用程序进行 ajax 调用，您的应用程序应该以 json 响应？

在这种情况下，您可以在 config/routes.rb 上进行路由，然后您只需编写如下方法：

```
class MyController < ApplicationController

  def values_for_js
    my_data = MyModel.calculate_data
    respond_to do |format|
      format.json { render json: my_data.to_json }
    end
  end
end 
```

并且您的 js 应该请求类似[http://mywebsite.com/values_for_js.json](http://mywebsite.com/values_for_js.json)的内容（或者它可以在 ajax 请求中说需要 json 格式）。如果您无法发出 json 请求，您可以使用 format.js 而不是 format.json

# mysql - 在返回的数据集中创建自定义值/列

> ID：13785608
> 
> 赞同：2
> 
> 时间：2012-12-09T07:43:40.010
> 
> 标签：mysql, union

我有一种情况，我正在使用这样的 UNION：

```
$query = "SELECT bigimage, heading, fullarticle, dateadded FROM news ";
$query .= "WHERE (state = '" . $USER->state . "' OR state = 'ALL') AND status = 1 AND newstype != 1 AND frontpage = 1 AND bigimage > '' ";
$query .= "UNION ";
$query .= "SELECT image, eventname, details, dateadded FROM events ";
$query .= "WHERE (state = '" . $USER->state . "' OR state = 'ALL') AND status = 1 AND frontpage = 1 AND image > '' ";
$query .= "ORDER BY dateadded DESC LIMIT 10";
$restresult = mysql_query($query); 
```

现在，我想知道每个结果来自哪个表，所以我想知道是否可以为返回的每个结果添加某种自定义结果，以某种形式指示它来自哪个表。

我可以在返回的结果中以某种方式添加一个额外的“动态”列吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:49:10.753

当然。去掉不相关的 php 代码，您的查询可能是：

```
SELECT 'news' as type, bigimage, heading, fullarticle, dateadded FROM news
WHERE (state = ? OR state = 'ALL') AND status = 1 AND newstype != 1 AND frontpage = 1 AND bigimage > ''
UNION
SELECT 'event', image, eventname, details, dateadded FROM events 
WHERE (state = ? OR state = 'ALL') AND status = 1 AND frontpage = 1 AND image > ''
ORDER BY dateadded DESC 
LIMIT 10 
```

这只是添加了一个具有不同值的常量列（我称为“type”）（我在从中选择行的表之后使用了“news”和“event”），具体取决于该行来自联合的哪一侧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T07:51:23.083

试试这个：

```
$query = "SELECT bigimage, heading, fullarticle, dateadded, 'news' as TableName FROM news ";
$query .= "WHERE (state = '" . $USER->state . "' OR state = 'ALL') AND status = 1 AND newstype != 1 AND frontpage = 1 AND bigimage > '' ";
$query .= "UNION ";
$query .= "SELECT image, eventname, details, dateadded, 'event' FROM events ";
$query .= "WHERE (state = '" . $USER->state . "' OR state = 'ALL') AND status = 1 AND frontpage = 1 AND image > '' ";
$query .= "ORDER BY dateadded DESC LIMIT 10";
$restresult = mysql_query($query); 
```

# objective-c - facebook style menu stop position

> ID：13785617
> 
> 赞同：0
> 
> 时间：2012-12-09T07:46:31.910
> 
> 标签：objective-c, ios, facebook, cocoa-touch

I successfully implemented this tutorial in my app but when I slide more than the position of the bottom view, you can see a white line. I want to implement a maximum position of the topLayer (like in Facebook, you can't slide more).

How can I do that? here is my code of the .m file:

[http://img705.imageshack.us/img705/9153/screenshot20121209at084.png](http://img705.imageshack.us/img705/9153/screenshot20121209at084.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:22:49.537

你可以试试这个存储库，它非常灵活，可以让你轻松编辑它。

[https://github.com/edgecase/ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)

# simple-form - 简单的表单配置

> ID：13785622
> 
> 赞同：0
> 
> 时间：2012-12-09T07:47:02.303
> 
> 标签：simple-form

在 simple_form.rb 我如何设置 time_zone_priority 和 country_priority。以下不起作用。

```
config.time_zone_priority = ["IN", "US", "CA", "UK"]

config.country_priority = ['India', 'United States'] 
```

然而，在视图文件中，以下工作：

```
= f.country_select :country_code, priority: %w(IN US CA UK) 
```

请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:46:12.440

我刚才也有这个问题。然后，在初始化程序中，当我尝试使用国家代码而不是完整的国家名称时，它起作用了。

```
config.country_priority = ['IN', 'US', 'CA', 'UK'] 
```

# python - 像从浏览器复制一样捕获可见的网页内容（或文本）

> ID：13785630
> 
> 赞同：0
> 
> 时间：2012-12-09T07:48:12.637
> 
> 标签：python, selenium, screen-scraping, web-scraping, screenshot

有没有办法捕获可见的网页内容或文本，就像从浏览器显示复制以稍后解析（可能使用正则表达式等）？我并不是要清理 html 标签、javascript 等，只显示剩余文本。我想复制所有可见文本，因为某些样式元素可能会隐藏一些 html 文本，而在浏览器中显示时会显示其他文本。到目前为止，我已经研究了 nltk、lxml Cleaner 和 selenium，但没有运气。也许我可以在 selenium 中捕获屏幕截图，然后使用 ocr 提取文本，但这似乎是计算机密集型的？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:01:23.927

当然。使用 Selenium 并循环遍历所有可见的、可显示的元素。

# javascript - 如何获取 jPlayer 中播放歌曲的当前时间？

> ID：13785631
> 
> 赞同：2
> 
> 时间：2012-12-09T07:48:25.900
> 
> 标签：javascript, jquery, jplayer

我使用 jPlayer 控件来播放音乐部分和歌曲。我想在 jPlayer 播放期间获得具体时间，但我不能。

如何获取歌曲播放的当前时间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T09:21:02.567

拿着这个：

```
$("#yourPlayer").data("jPlayer").status.currentTime 
```

另外，看看这里：[jPlayer 2.0 Elapsed/Remaining Time](https://stackoverflow.com/questions/6377441/jplayer-2-0-elapsed-remaining-time)

# c++ - Glew+GLFW Win32 无依赖 Visual Studio

> ID：13785633
> 
> 赞同：0
> 
> 时间：2012-12-09T07:48:31.680
> 
> 标签：c++, opengl, glew, glfw

是否可以在不将文件复制到 C: 的情况下构建和链接 Glew 和 GLFW？

我找不到任何说明如何在不将 DLL 复制到 C: 上的 Visual Studio 目录的情况下使用这些库的文档。

我只想在我的项目目录中包含所有需要的 .dll 和 .lib 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:18:08.383

您不必将 DLL 放在 Visual Studio 目录中。您可以将它们放在 VS 项目的 Debug 或 Release（基于您的编译模式）文件夹中。并且您必须包含这些 DLL。其余的设置是相当简单。右键单击您的项目并选择**“属性” 。在****C/C++** -> **“附加包含目录”**下包含两个库的标题。然后：**链接器**-> **“附加库目录”**包含包含库文件的文件夹。最后在**链接器**->**输入**-> **“附加依赖项”**下添加 glew 和 GLFW 库的名称（**glew32.lib**，**GLFW.**) 你准备好了。

# java - 服务层和 DAO 层的职责和使用

> ID：13785634
> 
> 赞同：38
> 
> 时间：2012-12-09T07:48:46.260
> 
> 标签：java, jakarta-ee, service, architecture, dao

我目前正在使用带有 Spring 插件和休眠的 Struts2 开发 Web 应用程序，当我查看在线示例时，我看到了 Service 和 DAO 层的使用，现在我想到了 Service 和数据访问对象层的真正用途是什么？如果 Service 层只是调用 DAO 层的方法来执行 CRUD 操作。直接调用 DAO 层方法不明智吗？

比方说这个 Dao 和服务层的例子

人事服务

```
 @Transactional
    public class PeopleService {

        private PeopleDao pDao;

        public PeopleDao getPDao() { return pDao; }

        public void setPDao(PeopleDao peopleDao) { this.pDao = peopleDao;   }

        public void createPerson(String name){
            pDao.createPerson(name);
        }

        public List<Person> getPeople(){
            return pDao.getPeople();
        }

    } 
```

人道

```
public class PeopleDao {

    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public Session sess() {
        return sessionFactory.getCurrentSession();
    }

    public Person getPersonById(long id) {
        return (Person) sess().load(Person.class, id);
    }

    public void deletePersonById(long id) {
        sess().delete(getPersonById(id));
    }

    public void createPerson(String name) {
        Person p = new Person();
        p.setName(name);
        sess().save(p);
    }

    @SuppressWarnings("unchecked")
    public List<Person> getPeople() {
        return sess().createQuery("from Person").list();
    }

} 
```

我的问题是，如果服务层仅由其代表 DAO 注入然后调用其方法，那么它们的真正用途是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-09T08:48:50.337

当您的业务逻辑比数据逻辑更复杂时，拥有这两个层是一个好主意。服务层实现业务逻辑。在大多数情况下，这一层必须执行更多操作，而不仅仅是从 DAO 对象调用方法。如果您正在考虑使您的应用程序更大，这可能是最好的解决方案。

想象一下，您想要包含一个 City 实体并在 People 和 City 之间创建关系。这是一个例子：

```
@Transactional
public class PeopleService {

    ....
    private PeopleDAO pDAO;
    private CityDAO cDAO;

    ...

    public void createPerson(String name, String city)
     throws PeopleServiceException {
        Person p = new Person();
        p.setName(name);

        City c = cDAO.getCityByName(city);
        if (c == null) throw new ServiceException(city + " doesn't exist!");
        if (c.isFull()) throw new ServiceException(city + " is full!");
        c.addPeople(p);

        sess().save(p);
        sess().save(c);
    }

    ...
} 
```

在此示例中，您可以实现更复杂的验证，例如检查数据的一致性。并且 PersonDAO 没有被修改过。

另一个例子：

[使用 Spring 的 DAO 和服务层](http://www.javacodegeeks.com/2012/09/spring-dao-and-service-layer.html)

[服务层模式的定义](http://en.wikipedia.org/wiki/Service_layers_pattern)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-06T09:33:54.237

如果您的应用程序将随着新的和不断变化的需求而增长，那么为您的软件的这两个不同方面（持久性-> DAO，业务用例-> 服务）提供不同的层会非常有用。

一方面是您的持久性模型及其关系、验证、事务和许多访问模式。

服务由具有非常不同粒度的业务用例驱动。一开始，您可能拥有非常简单的服务，这些服务除了调用 DAO 来交出他们从网页接收到的数据外，并没有做更多的事情。但这可能会随着时间的推移而改变，服务将成长为协作对象的小型网络，这些网络可以为业务用例提供更多服务。如果你不使用 DAO，那么

*   您的服务将包含处理查询对象、事务处理、验证的代码，所有这些都与实际业务需求无关
*   服务代码看起来很乱，很难找出代码的哪些部分实际上与业务相关
*   如果您随后更改持久性模型，您可能最终会更改许多服务

此外，您不能轻松地对持久性模型进行单元测试，而只能在服务层上编写测试。不要忘记解耦和封装是最小化变更影响的重要技术。

如果做得好，拥有一个 DAO 层不会引入太多的实现开销，因此拥有它不会有太多额外的成本。它很快就会得到回报，你会很高兴拥有这个专用层。

查看这篇文章：[http](http://codeblock.engio.net/?p=180) ://codeblock.engio.net/?p=180 。它还带有托管在 github 上的完整实现

# html - 让两个图像触摸 CSS

> ID：13785635
> 
> 赞同：0
> 
> 时间：2012-12-09T07:48:48.243
> 
> 标签：html, css

我试图让两个图像与 CSS 接触。

```
<div>
 <image src="scroll><br>
 <image src="scroll>
</div>

* {
  margin: 0px;
  padding: 0px;
}

body {font-family:Courier New, Courier New, Courier New;
  background-image: url(background.jpg);
  background-repeat: repeat; 
  width:100%;
  height:100%;
} 
```

使用此代码时，我得到 ![问题](../Images/95a17eabe6a5b3d7aaf1059ab3220f9c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:51:19.733

他们不接触的原因是因为线高。图像默认是内联的，这意味着文本行之间的间隙仍然存在。你必须关闭它。更好的方法是使图像块，而不是内联：

```
img { display: block } 
```

或`inline-block`。

另一种方法是设置`line-height: 0`包含`div`

确保您还使用了正确的标签。图片使用`<img>`不`<image>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T07:51:28.193

我不明白你在说哪个图像，没有给出活生生的例子，如果它是黄色 1，那么你为什么要使用`<br>`？

```
<div>
 <image src="#" />
 <image src="#" />
</div> 
```

还要确保您已重置默认浏览器样式

```
* {
   margin: 0;
   padding: 0;
} 
```

如果需要，还可以尝试`line-height: 0;`按照 Nicholas 告诉您的方式进行设置..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T07:51:50.327

您的图像本身有额外的间距，或者使用这个 css：

```
img {
padding:0;
margin:0;
} 
```

# boost - 使用 boost::asio::io_service::post()

> ID：13785640
> 
> 赞同：4
> 
> 时间：2012-12-09T07:49:53.373
> 
> 标签：boost, boost-asio, boost-thread, boost-bind

首先我问这个[在主线程上从 boost 线程运行一个函数并将参数传递给该函数](https://stackoverflow.com/q/13680770/435706)

所以现在我正在尝试这个：

以下是我完美模拟我的大项目的控制台 c++ 项目

TestServicePost.cpp

```
#include "stdafx.h"
#include "SomeClass.h"

int _tmain(int argc, _TCHAR* argv[])
{
    SomeClass* s = new SomeClass();
    while(true)
    {
        s->update();
    }
    return 0;
} 
```

一些类.h

```
#include <boost/thread.hpp>
#include <boost/asio.hpp>
#include <queue>

class ServiceNote
{
public:
    std::string getType()
    {
        std::stringstream typeSS;
        typeSS << "LamasaTech.MultiWall.PostNote." << (NoteType.compare("Normal") == 0 ? "Node" : "Header") << "." << Shape << "." << Colour;
        return typeSS.str();
    }
    int Action; 
    int CNoteId;    
    std::string Colour; 
    int NoteId; 
    std::string NoteType;   
    int SessionId;  
    std::string Shape;  
    std::string Style;  
    std::string Text;   
    int X;  
    int Y;  
};

class SomeClass
{
public:
    SomeClass();
    ~SomeClass();
    void update();

private:
    std::queue<ServiceNote> pendingNotes;
    void addToQueue(ServiceNote sn);
    void pollService(boost::asio::io_service* svc);
    int getMessage(boost::asio::io_service* svc, std::string sessionId, int messageId);
    boost::thread servicePoller;
}; 
```

SomeClass.cpp

```
#include "stdafx.h"
#include "SomeClass.h"
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/asio/signal_set.hpp>

#define POLL_SERVICE = 0;
#define POLLING_WAIT_TIME 1000
#define SAVE_SESSION_EVERY 1800000

SomeClass::SomeClass()
{
    boost::asio::io_service io_servicePoller;
    io_servicePoller.run();
    servicePoller = boost::thread(boost::bind(&SomeClass::pollService, this, &io_servicePoller));
    /*boost::asio::io_service io_sessionSaver;
    boost::asio::signal_set signalsSaver(io_sessionSaver, SIGINT, SIGTERM);
    signalsSaver.async_wait( boost::bind(&boost::asio::io_service::stop, &io_sessionSaver));
    sessionSaver = boost::thread(&SomeClass::saveSessionEvery, io_sessionSaver);*/
}

SomeClass::~SomeClass()
{
}

void SomeClass::update()
{   
    while(!pendingNotes.empty())
    {
        ServiceNote sn = pendingNotes.front();

        pendingNotes.pop();
    }
}

void SomeClass::addToQueue(ServiceNote sn)
{
    pendingNotes.push(sn);
}

void SomeClass::pollService(boost::asio::io_service* svc)
{
    int messageId = 1;
    while(true)
    {
        if(boost::this_thread::interruption_enabled() && boost::this_thread::interruption_requested())
            return;
        int currentId = messageId;
        messageId = getMessage(svc, "49", messageId);
        if(currentId == messageId)
            boost::this_thread::sleep(boost::posix_time::milliseconds(POLLING_WAIT_TIME));
    }
}

int SomeClass::getMessage(boost::asio::io_service* svc, std::string sessionId, int messageId)
{
    try
    {
        boost::asio::io_service io_service;

        // Get a list of endpoints corresponding to the server name.
        boost::asio::ip::tcp::resolver resolver(io_service);
        boost::asio::ip::tcp::resolver::query query("mw.rombus.com", "http");
        boost::asio::ip::tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);

        // Try each endpoint until we successfully establish a connection.
        boost::asio::ip::tcp::socket socket(io_service);
        boost::asio::connect(socket, endpoint_iterator);

        // Form the request. We specify the "Connection: close" header so that the
        // server will close the socket after transmitting the response. This will
        // allow us to treat all data up until the EOF as the content.
        boost::asio::streambuf request;
        std::ostream request_stream(&request);
        request_stream << "GET " "/Service.svc/message/" << sessionId << "/" << messageId << " HTTP/1.0\r\n";
        request_stream << "Host: " << "mw.rombus.com" << "\r\n";
        request_stream << "Accept: */*\r\n";
        request_stream << "Connection: close\r\n\r\n";

        // Send the request.
        boost::asio::write(socket, request);

        // Read the response status line. The response streambuf will automatically
        // grow to accommodate the entire line. The growth may be limited by passing
        // a maximum size to the streambuf constructor.
        boost::asio::streambuf response;
        boost::asio::read_until(socket, response, "\r\n");

        // Check that response is OK.
        std::istream response_stream(&response);
        std::string http_version;
        response_stream >> http_version;
        unsigned int status_code;
        response_stream >> status_code;
        std::string status_message;
        std::getline(response_stream, status_message);
        if (!response_stream || http_version.substr(0, 5) != "HTTP/")
        {
            //std::cout << "Invalid response\n";
            return messageId;
        }
        if (status_code != 200)
        {
            //std::cout << "Response returned with status code " << status_code << "\n";
            return messageId;
        }

        // Read the response headers, which are terminated by a blank line.
        boost::asio::read_until(socket, response, "\r\n\r\n");

        // Process the response headers.
        std::string header;
        std::string fullHeader = "";
        while (std::getline(response_stream, header) && header != "\r")
            fullHeader.append(header).append("\n");

        // Write whatever content we already have to output.
        std::string fullResponse = "";
        if (response.size() > 0)
        {
            std::stringstream ss;
            ss << &response;
            fullResponse = ss.str();
            try
            {
                boost::property_tree::ptree pt;
                boost::property_tree::read_json(ss, pt);
                ServiceNote sn;
                sn.Action =  pt.get<int>("Action");
                sn.CNoteId =  pt.get<int>("CNoteId");
                sn.Colour =  pt.get<std::string>("Colour");
                sn.NoteId =  pt.get<int>("NoteId");
                sn.NoteType =  pt.get<std::string>("NoteType");
                sn.SessionId =  pt.get<int>("SessionId");
                sn.Shape =  pt.get<std::string>("Shape");
                sn.Style =  pt.get<std::string>("Style");
                sn.Text =  pt.get<std::string>("Text");
                sn.X =  pt.get<int>("X");
                sn.Y =  pt.get<int>("Y");
                svc->post(boost::bind(&SomeClass::addToQueue, this, sn));
                //pendingNotes.push(sn);
            }
            catch (std::exception const& e)
            {
                std::string test = e.what();
                //std::cerr << e.what() << std::endl;
            }
            messageId++;
        }

        // Read until EOF, writing data to output as we go.
        std::string fullSth = "";
        boost::system::error_code error;
        while (boost::asio::read(socket, response,
                boost::asio::transfer_at_least(1), error))
        {
            std::ostringstream ss;
            ss << &response;
            fullSth = ss.str();
        }
        if (error != boost::asio::error::eof)
            throw boost::system::system_error(error);
    }
    catch (std::exception& e)
    {
        std::string test = e.what();
        std::cout << "Exception: " << e.what() << "\n";
    }
    return messageId;
} 
```

但我得到`Unhandled exception at 0x771215de in TestServicePost.exe: 0xC0000005: Access violation writing location 0xcccccce4.`，就在这一行执行之后：

```
svc->post(boost::bind(&SomeClass::addToQueue, this, sn)); 
```

我无法将 io_service 定义为类成员，因此我可以在析构函数中使用它`~SomeClass()`，也希望能提供帮助

如果 io_service.post 对我来说不是最好的解决方案，请推荐一些东西，正如你所看到的，我有一个构造函数、析构函数和一个更新方法，每个滴答声都会被调用，我尝试单独使用这个和队列，但它不是线程安全的，是否有一个简单的线程安全 FIFO 可以使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:02:55.570

在`SomeClass`构造函数中，您实际上执行以下操作：

1.  定义一个*本地* `io_service`实例。
2.  调用它的`run()`成员函数，[它立即返回](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service/run/overload1.html)，因为 io_service 没有工作。
3.  *将本地*对象的地址传递给另一个线程。

这肯定行不通。

请注意，这`io_service::run()`是一种“消息循环”，因此它应该阻塞调用线程。不要在对象构造函数中调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T09:39:39.560

我想出了如何将 io_service 声明为类成员：

```
boost::shared_ptr< boost::asio::io_service > io_servicePoller; 
```

在构造函数中我做了以下事情：

```
SomeClass::SomeClass()
{
    boost::shared_ptr< boost::asio::io_service > io_service(
        new boost::asio::io_service
    );
    io_servicePoller = io_service;
    servicePoller = boost::thread(boost::bind(&SomeClass::pollService, this, io_servicePoller));
} 
```

一些清理

```
SomeClass::~SomeClass()
{
    servicePoller.interrupt();
    io_servicePoller->stop();
    servicePoller.join();
} 
```

在更新中我调用了 run 将这些东西添加到队列中，然后在 while 循环中读取它们

```
void SomeClass::update()
{   
    io_servicePoller->run();
    io_servicePoller->reset();
    while(!pendingNotes.empty())
    {
        ServiceNote sn = pendingNotes.front();

        pendingNotes.pop();
    }
} 
```

并将我的成员签名更改为`void SomeClass::pollService(boost::shared_ptr< boost::asio::io_service > svc)`

所以会发生什么：

1.  应用程序启动
2.  开始我的课
3.  我的班级提供服务并启动线程
4.  线程从服务中获取项目
5.  主线程检查io服务队列并退出
6.  然后它使用队列

感谢 Igor R。没有他我无法做到

还有[http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg=4](http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg=4)我知道如何制作共享指针

# ruby - 在 Ubuntu 中安装 Ruby 1.9.3 出现错误

> ID：13785642
> 
> 赞同：0
> 
> 时间：2012-12-09T07:49:59.373
> 
> 标签：ruby, ubuntu, rubygems

当我尝试安装 Ruby 1.9.3 时，我不得不做很多杂耍，社区中提到`ruby1.9.1`要为 Ruby 1.9.3 安装的包。现在，如果我跑步`ruby`，我会得到

```
<internal:gem_prelude>:1:in `require': 
        cannot load such file -- rubygems.rb (LoadError)
        from <internal:gem_prelude>:1:in `<compiled>' 
```

我能做些什么？

仅供参考，我通过以下方式卸载了我的comp中的所有内容`sudo apt-get remove --purge ruby1.8 libruby1.8`

然后我安装了Ruby1.9.1`sudo apt-get install ruby1.9.1 libruby1.9.1`

我该怎么办？

**编辑**：

在评论之后，我使用 rvm 安装了更新的 ruby​​ 1.9.3，现在一切都很完美。

**道德**：

*不要*将 apt-get 用于红宝石。使用 rvm、gem 和其他 ruby​​ 工具。这个棒极了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:09:07.123

如果您在系统范围内安装了 Ruby，`apt`那么最新的 RubyGems 将不会包含在安装中。Ruby 是语言，RubyGems 是必须单独安装的包管理器。

要安装 RubyGems，只需转到[此处](http://rubygems.org/pages/download)并按照说明进行操作：

> 1.  从上面下载。
> 2.  解压到一个目录并 cd 到那里
> 3.  安装方式：（**`ruby setup.rb`**您可能需要管理员/root 权限）
> 4.  有关更多详细信息和其他选项，请参阅：**`ruby setup.rb --help`**

# java - 春季 3 中的 initbinder 问题

> ID：13785643
> 
> 赞同：0
> 
> 时间：2012-12-09T07:50:18.490
> 
> 标签：java, spring, hibernate, spring-mvc

我创建了一个模型类

```
@Entity
@Table(name = "tblcoustomer")
public class Customer {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO, generator = "tblcoustomer_cid_gen")
    @SequenceGenerator(name = "tblcoustomer_cid_gen", sequenceName = "tblcoustomer_cid_seq")
    @Column(name = "cid")
    private int id;

    @ManyToOne(targetEntity = FinancialMonth.class, fetch = FetchType.EAGER)
    @JoinColumn(name = "monthId", nullable = false)
    private FinancialMonth monthId;

    @ManyToOne(targetEntity = Company.class, fetch = FetchType.EAGER)
    @JoinColumn(name = "companyId", nullable = false)
    private Company companyId;

    @ManyToOne(targetEntity = CustomerType.class, fetch = FetchType.EAGER)
    @JoinColumn(name = "customerType", nullable = false)
    private CustomerType customerType;

    private String firstName;
    private String lastName;
    private String gender;
    private int age;
    private String designation;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public FinancialMonth getMonthId() {
        return monthId;
    }

    public void setMonthId(FinancialMonth monthId) {
        this.monthId = monthId;
    }

    public Company getCompanyId() {
        return companyId;
    }

    public void setCompanyId(Company companyId) {
        this.companyId = companyId;
    }

    public CustomerType getCustomerType() {
        return customerType;
    }

    public void setCustomerType(CustomerType customerType) {
        this.customerType = customerType;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getGender() {
        return gender;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getDesignation() {
        return designation;
    }

    public void setDesignation(String designation) {
        this.designation = designation;
    }
} 
```

现在，当我尝试使用加载此对象`@ModelAttribute`时出现错误

```
@RequestMapping(value = "/saveCustomer")
public ModelAndView addUser(HttpServletRequest request,
        @ModelAttribute("custome") Customer customer) {
    Map<String, Object> model = new HashMap<String, Object>();
    return new ModelAndView("addCustomer", model);
} 
```

我知道我必须覆盖@initBinder 但是我该如何绑定任何人都可以帮我我收到这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:43:06.493

我无法在不知道异常的情况下回答您的问题，但是您的代码中有一个错字可能会导致问题：

你有：

```
public ModelAndView addUser(HttpServletRequest request,
    @ModelAttribute("custome") Customer customer) 
```

但我认为它应该是模型属性“customer”，末尾带有“r”。

```
public ModelAndView addUser(HttpServletRequest request,
    @ModelAttribute("customer") Customer customer) 
```

# java - 为android开发phonegap cordova 2.2.0插件时出错

> ID：13785644
> 
> 赞同：0
> 
> 时间：2012-12-09T07:50:32.750
> 
> 标签：java, javascript, android, cordova

我正在尝试为 Android 编写一个 PhoneGap Cordova 2.2.0 插件，但我遇到了问题，我不确定原因是什么。

这是我的 JS：

**PushCapure.js**

```
var PushCapture = { 
        init : function () { 
            console.log('Attempting to call the PushCapture plugin');
            return cordova.exec(function() {
                alert('PushCapture was successful');
            }, function(error) {
                alert('PushCapture failed');
            }, "PushCapture", "capture", []);
        } 
}; 
```

现在这是我要运行的本机代码

**com.ron.camanon.PushCapture.java**

```
package com.ron.camanon;

import org.apache.cordova.api.CordovaPlugin;
import android.util.Log;

public class PushCapture extends CordovaPlugin {  

    public void capture()
    {
        Log.i("PushCapture", "PushCapture called, capture video stream intended...");
    }
} 
```

这对我不起作用，我还将此行添加到我的**res/config.xml**：

```
<plugin name="PushCapture" value="com.ron.camanon.PushCapture"/> 
```

错误回调是我尝试插件时唯一执行的操作。

我究竟做错了什么？

这是适用于 Android 的 Cordova 2.2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:02:38.610

这不是插件在 Android 中的工作方式，看起来你正在使用它调用某个方法的 iOS 模型。在 Android 中，插件的“方法”或特定命令将在 exec 函数中作为字符串发送，请参阅下面的代码示例，来自[Android 上的插件的 Phonegap 教程](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

```
@Override
public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
    if ("beep".equals(action)) {
        this.beep(args.getLong(0));
        callbackContext.success();
        return true;
    }
    return false;  // Returning false results in a "MethodNotFound" error.
} 
```

# android-studio - intellij-idea中的多项选择？

> ID：13785660
> 
> 赞同：16
> 
> 时间：2012-12-09T07:53:07.320
> 
> 标签：android-studio, intellij-idea, sublimetext2

是否可以像在 sublimetext2 编辑器 ( [sublimetext](http://www.sublimetext.com/) ) 中一样进行多项选择并同时更改它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T13:05:56.973

有**列选择模式**，但它不提供相同的功能，请投票支持此请求：

*   [IDEA-80056](http://youtrack.jetbrains.com/issue/IDEA-80056)列选择模式改进

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-14T19:14:22.843

这终于可用了！

> IntelliJ IDEA 13.1 引入了 Sublime 风格的多项选择，这是我们跟踪器中投票最多的编辑器功能！

有关其工作原理的详细信息和示例，请参阅[官方公告](http://blog.jetbrains.com/idea/2014/03/intellij-idea-13-1-rc-introduces-sublime-text)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T12:01:38.417

当我们等待它在 IDE 中本地实现时，您可以这样[做](https://stackoverflow.com/a/16130587/1306903)！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-19T18:16:18.327

### 现有热键

**窗口：** `CTRL` + `CTRL`（按住）+`↑ / ↓</kbd>`

**苹果电脑：** `⌘</kbd> + `⌘</kbd>(Hold) + `↑ / ↓</kbd>.```

要将插入符号放在行的末尾：将插入符号移动到顶行，克隆到底部，然后单击`END`。

### 更改多插入符号热键

要添加自定义 Keymap，`CTRL`++ ，键入并单击带有作为子`SHIFT`文本的那个。搜索和。`A``keymap``Settings``Clone Caret Above``Clone Caret Below`

我将我的映射到`ALT`+ `SHIFT`+`↑ / ↓</kbd> on Windows and `⌘</kbd>+`↑ / ↓</kbd> on Mac.```

### 奖金

尝试按住 、 和 箭头的组合`CTRL`以`SHIFT`提高选择能力。

# html - 如何在 MVC3 中使用 HTML 助手构建 html

> ID：13785665
> 
> 赞同：4
> 
> 时间：2012-12-09T07:54:06.507
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, html-helper

我有一个这样的助手，我在里面使用原始 HTML 创建了它，如下所示：

```
private static readonly Core Db = new Core();
        // Main menu
public static MvcHtmlString MainMenu()
{
    IQueryable<Page> primaryPages = Db.Pages.Where(p => p.IsItShowInMenu);
    var sb = new StringBuilder();
    sb.Clear();
     string pagecode = Convert.ToString(HttpContext.Current.Request.RequestContext.RouteData.Values["url"]);
    sb.Append("<div id=\"Logo\">");
    sb.Append("<a href=\"/\"><span id=\"Logo_Text\">Dr. Shreekumar</span></a> <span id=\"Logo_Sub_Text\">Obstetrician & Gynecologist</span>");
    sb.Append("</div>");
    sb.Append("<div id=\"Primary_Menu\">");
    sb.Append("<ul>");
    foreach (Page page in primaryPages)
    {
        if (page.PageCode != "Home")
        {
             Page currentPage = Db.Pages.SingleOrDefault(p => p.PageCode == pagecode);
             if (currentPage != null)
             {
                  Page parentPage = Db.Pages.Find(currentPage.ParentId);
                  if (parentPage != null)
                  {
                      sb.AppendFormat((page.PageCode == parentPage.PageCode ||
                      page.PageCode == currentPage.PageCode)
                      ? "<li class=\"active\"><a href=\"/pages/{0}\">{1}</a></li>"
                        : "<li><a href=\"/pages/{0}\">{1}</a></li>", page.PageCode,
                              page.Name.Trim());

                  }
                  else
                  {
                     sb.AppendFormat("<li><a href=\"/pages/{0}\">{1}</a></li>", page.PageCode,page.Name);
                  }
              }
              else
              {
                  sb.AppendFormat("<li><a href=\"/pages/{0}\">{1}</a></li>", page.PageCode, page.Name);
              }
        }
    }
    sb.Append("</ul>");
    sb.Append("</div>");
    return new MvcHtmlString(sb.ToString());
 } 
```

任何人都可以建议我如何使用 MVC HTML 助手（锚、列表（li）、div 等的助手）转换它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:15:10.787

作为应用程序的架构师，定义助手将生成什么以及不生成什么是您角色的重要组成部分，因为这取决于在您的代码中重复的位置和频率。我不会告诉你构建助手的目的是什么，因为这取决于整个应用程序的架构。但是，为了帮助您做出决定，请考虑您可以构建的两种一般类型的帮助器：全局和本地。

全局帮助程序用于在您的站点中经常重复的代码块，可能有一些小的更改可以通过传递不同的参数来处理。本地助手做同样的工作，但在给定页面上是本地的。具有在其他任何地方都找不到的重复代码段的页面应该实现本地帮助程序。接着...

全局助手：创建一个新的静态类来包含您的助手。然后，在容器类中创建如下所示的静态方法：

```
public static MvcHtmlString MyHelper(this HtmlHelper helper, (the rest of your arguments here))
{
    // Create your HTML string.
    return MvcHtmlString.Create(your string);
} 
```

`Html.`这样做是在 Html 助手类上创建一个扩展方法，它允许您使用标准语法访问您的助手。请注意，您必须在要使用自定义助手的任何文件中包含此类的命名空间。

本地助手：当您希望它们位于单个视图的本地时，另一种方法可以使用助手。也许您的视图中有一段代码被一遍又一遍地重复。您可以使用以下语法；

```
@helper MyHelper()
{
    // Create a string
    @MvcHtmlString.Create(your string here);
} 
```

然后，您可以使用以下命令将其输出到您的页面上：

```
@MyHelper() 
```

我们总是创建`MvcHtmlString`对象的原因是因为作为 MVC 内置的安全功能，输出的字符串被编码为在页面上的文本中显示。这意味着 a`<`将被编码，以便您在页面上实际看到一个“<”。默认情况下，它不会启动 HTML 标记。

为了解决这个问题，我们使用了这个`MvcHtmlString`类，它绕过了这个安全特性并允许我们将 HTML 直接输出到页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:18:08.100

我建议您将所有这些逻辑移到一个单独`Section`的中，因为它`Menu`是正在呈现的。

`Razor`与从代码中构建 HTML 不同，使用's构建它更简洁、更方便`helper`。请参阅[此](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)文章以及Scott Gu 的[这篇](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)文章，了解如何渲染部分以获得快速入门指南。

考虑使用 Helper 方法，例如

[`@Html.DropDownListFor()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions.dropdownlistfor%28v=vs.108%29.aspx) 或者
`@Html.DropDownList()`

# html - Phonegap：我的移动应用程序移植到 phonegap 后会“感觉”更快还是更慢？

> ID：13785668
> 
> 赞同：0
> 
> 时间：2012-12-09T07:55:39.173
> 
> 标签：html, cordova, mobile, memory-management, responsive-design

所以我在移动 Safari 中设计所有东西，我知道 phonegap 本质上是一个剥离的 webview，但是......

**问题：**我的应用程序会在 phonegap 中运行得更好吗？*（以下修改）*

a）我想我的导航和核心应用程序加载速度会更快，因为脚本和图像都在硬盘上。这是真的？

b）我认为，既然他们已经为此工作了 2 年，他们可能已经进行了一些优化，以使其比普通的 safari 窗口更快。这是真的？

（假设两个 html5/js/css 代码库几乎相同，并且应用程序在 iOS 上运行。）

**更新：**对不起，我的意思是将苹果与略有不同的苹果进行比较。

* * *

**问题 1 已修改：** 我的应用程序在 phonegap 环境中与标准移动 safari 相比是否会看到任何性能优势？（比较手机 - 到手机）

1b) 除了加载时间之外，phonegap 在哪些方面优化了标准移动 safari 的性能？

**跟进：** 1）除了大型库之外，是否有任何陷阱可能导致 phonegap 遭受严重的性能打击而不是站立移动 safari？

2) 我可以混合使用原生和 webview 渲染吗？（即我的应用程序的上半部分是用 html/css/js 呈现的，下半部分是原生的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:16:12.120

只要您以最新版本的 iOS 为目标，性能就不成问题。Mobile safari 在 webview 控件之前获得了新功能，但是现在两个版本都具有硬件加速渲染之类的功能，这并不重要。

您可能会看到的唯一性能改进是本地加载文件的明显改进——它是在同一设备上运行的相同代码。

在需要的地方，您可以根据需要混合本地代码。不过，我通常会尽量将其保持在最低限度 - 在浏览器中进行调试比将代码部署到设备并使用本机调试器要容易得多。

# javascript - 将变量从 this.evaluate 传递给 casper.then

> ID：13785670
> 
> 赞同：4
> 
> 时间：2012-12-09T07:55:57.910
> 
> 标签：javascript, webkit, scope, phantomjs, casperjs

我一定对此失去了理智，但为什么它没有打印`"1: Google Search"`出来`"2: Google Search"`？基本上：如何在 this.evaluate 中获取变量并在 casper.js 范围的其余部分使用它？

```
var casper = require("casper").create();
var buttonText;

casper.start("http://google.com");

casper.then(function() {
  buttonText = this.evaluate(function () {
    var myTxt = document.querySelector('#gbqfsa').innerText;
    console.log('1: ' + myTxt);

    return myTxt;
  }); 
});

casper.then(function() {
  this.echo('2: ' + buttonText);
});

casper.on('remote.message', function(msg) {
    this.echo('remote message caught: ' + msg);
});

casper.run(); 
```

我在这里使用这些库：

[https://github.com/ariya/phantomjs](https://github.com/ariya/phantomjs)

[http://casperjs.org/index.html](http://casperjs.org/index.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T21:03:45.960

问题在于，由于某些非常模糊的原因，当使用不同的用户代理浏览时，Google 似乎提供了不同的版本。我怀疑浏览器/用户代理嗅探很重。

在我们的例子中，使用[`Casper.debugHTML()`](http://docs.casperjs.org/en/latest/modules/casper.html#debughtml)显示代码不包含与`#gbqfsa`选择器匹配的按钮（而 Chrome 显示一个）；取而代之的是标准提交`<input name="btnG">`。

所以这是使用按钮的实际选择器的脚本：

```
var casper = require("casper").create();
var buttonText;

casper.start("http://google.com/", function() {
    buttonText = this.evaluate(function () {
        var myTxt = document.querySelector('input[name="btnG"]').getAttribute('value');
        __utils__.echo('1: ' + myTxt);
        return myTxt;
    });
    this.echo('2: ' + buttonText);
});

casper.run(); 
```

只是一个想法，尝试使用[`Casper.userAgent()`](http://docs.casperjs.org/en/latest/modules/casper.html#useragent)将 UA 设置为更常见的东西，例如。最近的 chrome 版本。

PS：还要注意[`__utils__.echo()`](http://docs.casperjs.org/en/latest/modules/clientutils.html#echo)直接从内部打印东西的使用`evaluate()`。

**编辑：**它通过设置一个通用的 UA 来工作：

```
casper.start();

casper.userAgent("Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16");

casper.thenOpen('http://google.com/', function() {
    this.test.assertExists('#gbqfsa'); // PASS
});

casper.run(function() {
    this.test.done();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:20:12.870

我认为 casper.js 或 phantom.js 在评估（）中的调试存在严重问题。如果我替换下面的行，它可以工作

```
var myTxt = document.querySelector('.gbts').innerHTML; 
```

问题是：当evaluate() 中出现javascript 错误时如何调试？没有办法知道...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:46:06.400

你试过这个调试吗？

```
casper.on('remote.message', function(message) {
    this.echo('remote console message: ' + message);
}); 
```

查看[事件和过滤器 - 在运行时挂钩和更改 CasperJS 环境](http://docs.casperjs.org/en/latest/events-filters.html)。

# html - 使用 perl 的 HTML 解析器

> ID：13785672
> 
> 赞同：2
> 
> 时间：2012-12-09T07:56:26.823
> 
> 标签：html, perl, parsing

我正在尝试使用 perl 脚本解析 html 文件。我正在尝试使用 html 标签 grep 所有文本`p`。如果我查看源代码，则数据是以这种格式写入的。

> `<p>`指标都是特定于虚拟化的，并按如下方式划分优先级和分组：`</p>`

这是以下代码。

```
use HTML::TagParser();

use URI::Fetch;

//my @list = $html->getElementsByTagName( "p" );

    foreach my $elem ( @list ) {
        my $tagname = $elem->tagName;
        my $attr = $elem->attributes;
        my $text = $elem->innerText;

        push (@array,"$text");

        foreach $_  (@array) {
           # print "$_\n"; 
           print $html_fh "$_\n";   
          chomp ($_);        
           push (@array1, "$_");
         }
       } 
    }

$end = $#array1+1;

print "Elements in the array: $end\n";

close $html_fh; 
```

我面临的问题是生成的输出是 4.60 Mb 并且很多数组元素只是重复的句子。我怎样才能避免这种重复？有没有其他有效的方法来 grep 我感兴趣的行。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:11:45.103

如果您改用[Web::Scraper](https://metacpan.org/module/Web%3a%3aScraper)，您的代码会变得更加简单和清晰（只要您能够构造 CSS 选择器或 XPath 查询）：

```
#!/usr/bin/env perl
use strict;
use warnings qw(all);

use URI;
use Web::Scraper;

my $result = scraper {
    process 'p',
        'paragraph[]' => 'text';
}->scrape(URI->new('http://www.perl.org/'));

for my $test (@{$result->{paragraph}}) {
    print "$test\n";
}

print "Elements in the array: " . (scalar @{$result->{paragraph}}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T08:12:36.073

您看到重复行的原因是您为其中的每个元素打印整个数组一次。

```
foreach my $elem ( @list ) {
    my $tagname = $elem->tagName;
    my $attr = $elem->attributes;
    my $text = $elem->innerText;

    push (@array,"$text");      # this array is printed below

    foreach $_  (@array) {      # This is inside the other loop
       # print "$_\n"; 
       print $html_fh "$_\n";   # here comes the print
      chomp ($_);        
       push (@array1, "$_");
     }
   } 
```

例如，如果你有一个数组`"foo", "bar", "baz"`，它会打印：

```
foo   # first iteration
foo   # second
bar
foo   # third
bar
baz 
```

因此，要修复您的重复错误，请将第二个循环移到第一个循环之外。

**其他一些注意事项：**

您应该始终使用这两个编译指示：

```
use strict;
use warnings; 
```

他们将提供比您可以做的任何其他单一事情更多的帮助。与修复出现的错误相关的较短的学习曲线足以弥补大量减少的调试时间。

```
//my @list = $html->getElementsByTagName( "p" ); 
```

perl 中的注释以`#`. 不确定这是否是一个错字，因为您在下面使用了这个数组。

```
foreach my $elem ( @list ) { 
```

除非您需要数组，否则您不需要将标签实际存储到数组中。这仅在这种情况下是一个中间变量。您可以简单地执行以下操作（注意`for`和`foreach`完全相同）：

```
for my $elem ($html->getElementsByTagName("p")) { 
```

这些变量也是中间变量，其中两个未使用。

```
my $tagname = $elem->tagName;
my $attr = $elem->attributes;
my $text = $elem->innerText;
push (@array,"$text"); 
```

另请注意，您永远不必以这种方式引用变量。你可以简单地这样做：

```
push @array, $elem->innerText; 
```

* * *

```
foreach $_  (@array) { 
```

该`$_`变量默认使用，无需显式指定。

```
print $html_fh "$_\n";   
chomp ($_);        
push (@array1, "$_"); 
```

我不确定为什么在打印变量*之后*`chomp`，但在将其存储在另一个数组中之前，为什么要对变量进行ing ，但这对我来说似乎没有意义。此外，这个另一个数组将包含与另一个数组完全相同的元素，只是重复。

 *```
$end = $#array1+1; 
```

这是另一个中间变量，也可以简化。`$#`印记会给你最后一个元素的索引，但是标量上下文中的数组本身会给你它的大小：

```
$end = @array1;   # size = last index + 1 
```

但是你可以一口气做到这一点：

```
print "Elements in the array: " . @array1 . "\n"; 
```

请注意，`.`此处使用连接运算符会在数组上强制执行标量上下文。如果您使用了逗号运算符`,`，它将具有列表上下文，并且该数组将被扩展为其元素的列表。这是根据上下文进行操作的典型方式。

```
close $html_fh; 
```

不需要显式关闭文件句柄，因为它会在脚本结束时自动关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T16:01:03.313

这是从标签之间获取所有内容的另一种方法`<p>`，这次使用项目[`Mojo::DOM`](http://p3rl.org/Mojo%3a%3aDOM)的一部分[`Mojolicious`](http://mojolicio.us)。

```
#!/usr/bin/env perl

use strict;
use warnings;
use v5.10; # say

use Mojo::DOM;

my $html = <<'END';
<p>Paragraph 1</p>
<p>Paragraph 2</p>
<div>Should not find this</div>
<p>Paragraph 3</p>
END

my $dom = Mojo::DOM->new($html);
my @paragraphs = $dom->find('p')->pluck('text')->each;

say for @paragraphs; 
```*

# scala - IDEA 12 创建 Scala Play 2.0：项目文件已更改

> ID：13785673
> 
> 赞同：1
> 
> 时间：2012-12-09T07:56:29.417
> 
> 标签：scala, intellij-idea, playframework-2.0

## 问题：

当我在 IntelliJ IDEA 12 中使用 Scala Play 2.0.4 应用程序时，我收到很多红色语法高亮错误，当我在 Play 中运行应用程序时，这些错误不会显示为错误！在命令行。

## 问题：

是否还有其他人在 IntelliJ IDEA 12 中成功运行 Scala Play 2.0 应用程序？如果是这样，你能否给我一些关于我如何做到这一点的建议。

## 背景资料：

当我在 IntelliJ 中创建一个新项目时，我将 Play 2 主页设置为 ~/bin/opt/play-2.0.4，它会创建该项目，然后出现一个名为“Project Files Changed”的对话框，上面写着“Project file . ../.idea/misc.xml 已外部更改。建议重新加载项目以使更改生效。" 如果我忽略重新加载项目的提示，并且我在 app/ 上 ctl-ins，我会得到以下选项：

1.  Java 类
2.  斯卡拉类
3.  文件
4.  包裹

    * * *

然后我创建一个包'models'和一个scala文件'Models.scala'，代码如下所示，'Hello'在语法上突出显示为红色，当我将鼠标悬停在代码上时，IDEA指示它找不到'你好'在对象 MyDB 中：

```
package models

case class Hello(id: Int, name: String)

object MyDB {
  val hellos: List[Hello] = List(Hello(1, "Foo"), Hello(2, "Bar"))
} 
```

我现在可以使用上面的代码创建 create app/models/Models.scala 并且没有突出显示错误。但是，当我转到项目设置-> 模块-> 依赖项时，它说'sbt-and-plugins' 路径损坏并且“模块'无标题'：依赖项列表中的无效项目'scala-2.9.1'”

另一方面，如果我单击“确定”以重新加载项目以使更改生效，那么如果在 app/ 上使用 II ctl-ins，我将获得以下选项：

1.  文件
2.  目录

    * * *

如果我在命令行（以及 with-sources）中从 play 中生成想法，并且如果我编译项目（在我运行想法之前或之后），也会出现第二个选项。

作为进一步的提示，如果我不重新加载项目，应用程序目录将显示为蓝色，但是一旦我重新加载它，应用程序目录图标就会变成褐色（就像其他人一样）。

无论是使用自己下载的play-2.0.4，还是新建项目时让IntelliJ下载，都是一样的。无论我有 Play 2.0 Support 的 playframework 还是只有 Play 2.0 Support 本身，都是一样的。

有关更多信息，我正在运行 Arch Linux、Oracle Java 1.7.0_09、scala-2.9.1.final、Play 2.0.4、IntelliJ 12.0 IU-123.72。插件：Scala (0.6.371)、Play 2.0 Support (0.1.86)、Playframework Support（无论有没有这个，我都会遇到同样的错误）。

# 更新：

下面是stacktrace [http://pastebin.com/uWEpv5Gd](http://pastebin.com/uWEpv5Gd)，显示IDEA在创建项目时抛出了异常，如下：

```
[  87553]  ERROR - com.intellij.ide.IdeEventQueue - Error during dispatching of java.awt.event.InvocationEvent[INVOCATION_DEFAULT,runnable=com.intellij.openapi.progress.util.ProgressWindow$MyDialog$1@3b5a26d6,notifier=null,catchExceptions=false,when=1355073846201] on sun.awt.X11.XToolkit@1bd172ba 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:47:34.393

我通常通过以下方式让 Play 项目在 IntelliJ 12 中运行：

1.  使用 play new "projectname" 从终端创建项目
2.  进入新文件夹“projectname”
3.  运行游戏理念
4.  使用 IntelliJ 打开该文件夹并启用语法突出显示

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:35:46.670

问题不在于 JVM，而在于 Play 2.0 插件。我在 1.7 和 1.6 中使用各种 JVM 对其进行了测试，但仍然遇到同样的问题。我通过删除配置目录尝试全新安装 Intellij IDEA 12，它也在做同样的事情。当我使用 IDEA 12 创建一个新项目时，目标的目录结构如下所示：

```
[ambantis@okosmos target]$ tree
.
├── scala-2.9.1
│   └── cache
│       └── update
│           ├── inputs
│           └── output
└── streams
    └── $global
        ├── ivy-configuration
        │   └── $global
        │       └── out
        ├── ivy-sbt
        │   └── $global
        │       └── out
        ├── project-descriptors
        │   └── $global
        │       └── out
        └── update
            └── $global
                └── out

13 directories, 6 files 
```

缺少的是/target/scala-2.9.1/classes 和/target/scala-2.9.1/classes_managed。解决方法如下：

在构建过程之后，如果您看到一个显示“项目文件已更改”的对话框，如下所示： ![在此处输入图像描述](../Images/51b70bab80904294276bb3c7af129df8.png)

不要单击确定，而是转义。然后打开播放控制台并编译应用程序。此时它将起作用。您只会看到存在未使用的 jar 文件的错误，否则一切都会正常工作。

# c# - 用 Json 数组 MVC 4 填充 jquery 数据表

> ID：13785674
> 
> 赞同：2
> 
> 时间：2012-12-09T07:56:34.340
> 
> 标签：c#, jquery, asp.net-mvc, datatable

我得到了一个带有 jquery 数据表的视图，我想在一个按钮上立即用另一个 Json 列表或他从控制器收到的任何数组重新填充表中的数据。

这是我认为的代码：

```
$.ajax({
    type: "GET",
    url: "EmpTruck/getJson/",
    data: { search: station },
    dataType: "Json",
    error: function (xhr, status, error) {
        alert(error);
    },
    success: function (json) {

        alert(json.aaData);
        var table = $(".dynamicTableEmployee").dataTable();
        table.fnClearTable();
        table.LoadDataRow(json);
    }
}); 
```

这是来自控制器的代码：

```
 [AcceptVerbs(HttpVerbs.Get)]
    public JsonResult getJson()
{

    List<Employees> list = new List<Employees>();
    list = db.Employees.Where(c => c.Station.Equals("ATL")).ToList();

    return this.Json(list, JsonRequestBehavior.AllowGet); 
```

}

此代码仅清除数据表。我已经设置了一个断点来查看Json数组中是否有东西并且有。

我不知道如何从 json 数组中填充数据表，我需要序列化它吗？json 是否需要与数据表的大小相同？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:54:00.380

如果您只是想重新加载数据，您可以使用 fnReloadAjax() API 插件：[http ://datatables.net/plug-ins#api_fnReloadAjax](http://datatables.net/plug-ins#api_fnReloadAjax)

如果您想完全更改表格，例如更改列等...我只需核对旧表格并将其替换为新表格。只需将代码粘贴到您的脚本中（在初始化表格之前！），然后每当您想要重新加载数据时，请在表格对象上调用 fnReloadAjax()。

这个例子可能会有所帮助：[http ://datatables.net/examples/example_plugin_api.html](http://datatables.net/examples/example_plugin_api.html)

* * *

（来自[http://www.datatables.net/forums/discussion/52/load-new-data-via-ajax/p1](http://www.datatables.net/forums/discussion/52/load-new-data-via-ajax/p1)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T22:23:31.227

```
 <link href="@Url.Content("~/Content/Table.css")" rel="stylesheet"    type="text/css" />
  @section scripts
  {
    <script src="@Url.Content("~/Scripts/ datatable.js")"   type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/test.js")" type="text/javascript">  </script>
  }
   <div id="tabs-SecDeal" style=" background-color: white">
    <table id="secdeal" class="display">
        <thead>
            <tr>
                <th style="background-color: #990033">col1</th>
                <th style="background-color: #990033"> col2</th>
                <th style="background-color: #990033"> col3 </th>
                <th style="background-color: #990033"> col4</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="4" class="dataTables_empty"></td>
            </tr>
        </tbody>
    </table>
  </div>
```

```
$(function () {
         Loadtestview();
    function Loadtestview () {
        var divSecTable = $('#secdeal');
            oSecTable = divSecTable.dataTable({
                "processing": true,
                "serverSide": true,
                "aaSorting": [1, 'asc'],
                "info": true,//localtable.bInfo,
                "autoWidth": false,//localtable.AutoWidth,            
                "scrollY": 700,
                "scrollX": "150%",
                "scrollCollapse": true,
                'destroy': true,
                "pagingType": "full_numbers",
                'lengthChange': false,
                "searching": false,
                'sAjaxSource': '../ReportsMvc/GetSecuritizationDeal',
                "iDisplayLength": 100,
                "columns": [
{ "targets": 0,"data":"col1","title":"col1", "className": "center textNoWrap" },
{ "targets": 1,"data":"col2","title":"col2", "className": "center textNoWrap" },
{ "targets": 2,"data":"col3","title":"col3", "className": "center textNoWrap" },
{ "targets": 3,"data":"col4","title":"col4", "className": "center textNoWrap" },
                ],

                'fnServerData': function (sSource, aoData, fnCallback) {       
                      aoData.push({ "name": "rgid", "value": $("#ddlBatchdate").val() });
                    $.get(sSource, aoData, function (rsp) {
                        fnCallback(rsp);
                    });
                },
                "fnInitComplete": function () {
                    new $.fn.dataTable.FixedColumns(oSecTable, { leftColumns: 4 });       
                }
            });
    }
});
```

```
 [HttpGet]
    public JsonResult GetSecuritizationDeal(jQueryDataTableParamModel param)
    {
        if (param.rgid <= 0)
        {
            return Json(new
            {
                sEcho = "1",
                iTotalRecords = 0,
                iTotalDisplayRecords = 0,
                aaData = (IEnumerable<SecDealDatacs>)new List<SecDealDatacs>()
            },
                JsonRequestBehavior.AllowGet);
        }
        try
        {
            //No session cache for reports page!!!
            List<SecDealDatacs> listObj =   _bao.GetSecuritizationDeal(param.rgid);
            if (listObj == null)
                throw new HttpException(500, "Data Server Errors...");
            int totalRecords = listObj.Count();
            //Pagenation            
            IEnumerable<SecDealDatacs> listObjDisplay = listObj
                .Skip(param.iDisplayStart)
                .Take(param.iDisplayLength);

            var result = listObjDisplay.Select((o, index) => new
            {
                o.col1,
                o.col2,
               col3= o.col3.ToString("#,#"),
                col4=o. col4.ToString("0.0000"),
            }).ToList();

            var listObj1 = result;

            return Json(new
            {
                sEcho = param.sEcho,
                iTotalRecords = totalRecords,
                iTotalDisplayRecords = totalRecords,
                aaData = result
            },JsonRequestBehavior.AllowGet);
        }
        catch (Exception ex)
        {
            //log error into DB and File
            throw new HttpException(500, ex.Message);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T22:26:52.857

```
$(function () {
         Loadtestview();
    function Loadtestview () {
        var divSecTable = $('#secdeal');
            oSecTable = divSecTable.dataTable({
                "processing": true,
                "serverSide": true,
                "aaSorting": [1, 'asc'],
                "info": true,//localtable.bInfo,
                "autoWidth": false,//localtable.AutoWidth,            
                "scrollY": 700,
                "scrollX": "150%",
                "scrollCollapse": true,
                'destroy': true,
                "pagingType": "full_numbers",
                'lengthChange': false,
                "searching": false,
                'sAjaxSource': '../ReportsMvc/GetSecuritizationDeal',
                "iDisplayLength": 100,
                "columns": [
{ "targets": 0,"data":"col1","title":"col1", "className": "center textNoWrap" },
{ "targets": 1,"data":"col2","title":"col2", "className": "center textNoWrap" },
{ "targets": 2,"data":"col3","title":"col3", "className": "center textNoWrap" },
{ "targets": 3,"data":"col4","title":"col4", "className": "center textNoWrap" },
                ],

                'fnServerData': function (sSource, aoData, fnCallback) {       
                      aoData.push({ "name": "rgid", "value": $("#ddlBatchdate").val() });
                    $.get(sSource, aoData, function (rsp) {
                        fnCallback(rsp);
                    });
                },
                "fnInitComplete": function () {
                    new $.fn.dataTable.FixedColumns(oSecTable, { leftColumns: 4 });       
                }
            });
    }
});
```

# android - 无法在android中向朋友Facebook墙发布消息

> ID：13785677
> 
> 赞同：0
> 
> 时间：2012-12-09T07:56:53.987
> 
> 标签：android, facebook

我尝试了很多方法将消息发布到朋友墙但没有成功：

[通过 android 应用程序在用户的朋友 facebook 墙上](https://stackoverflow.com/questions/5896863/post-on-users-friends-facebook-wall-through-android-application#answer-5898193)
[发布 从 android fb sdk 将消息发布到 facebook 墙总是错误](https://stackoverflow.com/questions/3726429/post-message-to-facebook-wall-from-android-fb-sdk-always-error/3927541#3927541)
我还测试了我的帐户 ID 和朋友 ID 不会被 facebook 阻止，他们可以在浏览器中一起发布消息。
这是我的尝试：

```
 try { 
    Bundle params = new Bundle();

    params.putByteArray("message", "Test".getBytes());
    params.putByteArray("name", "American Virgin".getBytes());
    params.putByteArray("link", "http://bit.ly/12345".getBytes());
    params.putByteArray("description", "A Freshman College Girl on a scholarship from an ...".getBytes());
    params.putByteArray("picture", "http://xxx/MOV1026.jpg".getBytes());

    mAsyncRunner.request(((friendId == null) ? "me" : friendId) + "/feed", params,  new WallPostRequestListener());
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但它响应错误：

```
 {"error": {"message":"An access token is required to request this resource.",
    "type":"OAuthException","code":104}} 
```

然后我尝试将令牌添加到参数但不起作用

```
 params.putString(Facebook.TOKEN, mFacebook.getAccessToken()); 
```

问题是我可以登录成功而不会出错。
因此，我需要正确的方式将消息发布到对我有用的朋友墙。

# java - Java 数组问题。对一个对象进行排序，同时保持对应的值

> ID：13785678
> 
> 赞同：-3
> 
> 时间：2012-12-09T07:57:25.953
> 
> 标签：java, arrays, data-structures

我有一个数组`author-->bookName`，我想用 bookName(s) 对其进行排序。我需要在 Java 中排序`bookName-->author`（通讯作者姓名）的答案

**编辑：评论中的代码：**

```
Arrays.sort(book, new Comparator<LibraryBook>() { 
    public int compare(LibraryBook arg0, LibraryBook arg1) { 
        return arg0.getBookTitle().compareTo(arg1.getBookTitle()); 
    }
}); 
printBooks(book); 

private static void printBooks(LibraryBook[] book){ 
    for (int x = 0; x < book.length; ++x) { 
        String title = book[x].getBookTitle(); 
        String author = book[x].getBookAuthor(); 
        System.out.println(String.format("%30s%30s", title, author)); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:05:15.183

你需要的是[`Arrays.sort()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D,%20java.util.Comparator%29)两个比较器。

```
Arrays.sort(yourArray, new Comparator<YourObject>() {
    public int compare(YourObject o1, YourObject o2) {
        // here use author or bookname
    }
}); 
```

# c# - 使用泛型类型的超类的泛型方法？

> ID：13785679
> 
> 赞同：1
> 
> 时间：2012-12-09T07:57:36.710
> 
> 标签：c#, generics

假设我有一个通用类：

```
public class MyGenericClass<T> { 
  ...
} 
```

现在在这个类中，我想要一个允许我与另一个泛型交互的方法，它可以是泛型类型`T`或任何超类`T`，例如：

```
public void DoSomething<T1>(List<T1> things) 
  where T : T1 // of course this won't compile
{
  ...
} 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T08:01:03.430

你不能，我害怕。您最接近的方法是在*非泛型*类中有一个方法 - 可能是一个扩展方法：

```
public static MyGenericClassExtensions
{
    public static void DoSomething<T, T1>(this MyGenericClass<T> @this,
                                          List<T1> things)
        where T : T1
    {
        ...
    }
} 
```

这很好，因为它同时引入了两个类型参数。

当然，另一种方法是将方法作为实例方法保留在 内`MyGenericClass<T>`，没有约束，并在执行时检查约束。就泛型的编译时安全性和一般声明性而言，这将是不幸的，但它最终*可能*对您更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:19:22.550

@JonSkeet 的回答一如既往地正确，但我确实找到了另一种方法来做到这一点，而不会导致我的代码发生任何剧变。我创建了另一个泛型类并修改了现有的类，如下：

```
public class MyGenericClass<T, TBase> 
  where T : TBase
{ 
  public void DoSomething(List<TBase> things) 
  {
    ...
  }
}

public class MyGenericClass<T> : MyGenericClass<T, T>
{
  ...
} 
```

通过这种方式，我获得了所需的功能，同时仍然保持向后兼容性，即所有使用原始单类型泛型的现有代码仍然可以工作。

# php - PHP - 如何从 MySQL 查询中获取所有行

> ID：13785680
> 
> 赞同：1
> 
> 时间：2012-12-09T07:57:43.410
> 
> 标签：php, mysql

这是我的代码：

```
if($login_check > 0) {
    $results = mysql_query("SELECT * FROM messageInfo WHERE senderUsername='$username' UNION ALL SELECT * FROM messageInfo WHERE recieverUsername='$username';");
    var_dump(mysql_fetch_assoc($results));

} 
```

当我应该返回两行时，我只得到一行“var_dumped”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T08:17:53.757

试试下面的代码：

```
$result = mysql_query("SELECT * FROM messageInfo WHERE senderUsername='$username' OR recieverUsername='$username'");

while ($row = mysql_fetch_assoc($result)) {
    print_r($row);
} 
```

我认为`UNION`在这个查询中并不真正需要，`OR`声明就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T11:11:23.697

```
 $sqlriz = "Select * FROM `tablename`";

    $Rslt = mysqli_query($Conn,$sqlriz);

    while($r=mysqli_fetch_object($Rslt))
    {
        $res[]=$r;
    }

print_r($res); 
```

# c++ - 是否允许以不同于调用 allocator::allocate() 的顺序调用 allocator::deallocate()？

> ID：13785690
> 
> 赞同：3
> 
> 时间：2012-12-09T08:02:01.623
> 
> 标签：c++, allocator

N3485 20.6.9.1 [allocator.members]/1 说：

> 对分配或解除分配特定存储单元的这些函数的调用应以单个总顺序发生，并且每个此类解除分配调用应在此顺序的下一次分配（如果有）之前发生。

最后一个要求让我感到困惑。看起来标准是说，如果一个人分配了一块内存（我们称之为 block `a`），然后分配另一个块（我们称之为 block ），那么在释放 block之前`b`不允许释放 block 。`a``b`

如果这确实是本段所包含的内容，我看不出如何`vector`以一种节省空间的方式实现类似 's 的增长；因为无法分配更大的缓冲区，然后释放先前分配的（太小）缓冲区。

这实际上是这一段的意思，还是我误读了这一段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:11:46.837

> **对分配或解除分配特定存储单元的**这些函数的调用应以单个总顺序发生，并且每个此类解除分配调用应在此顺序的下一次分配（如果有）之前发生。

在我看来，它只在分配和释放之间建立了先发生的关系（以防止可能由不正确的编译器优化引起的并发问题）。它绝对不会在不同的分配区域之间`a`建立关系。`b``a``b`

请记住，编译器遵循规范，而不是人类逻辑。该规范帮助编译器程序员记住所有需要注意的细节（如果它遵循规范，那是正确的）。这就是为什么规范包含人们认为显而易见的细节的原因。其中一个细节是释放/分配构成了内存屏障。

比较

```
reads -> deallocation -> allocation -> writes 
```

和

```
reads -> deallocation
allocation -> writes 
```

如果没有发生之前的关系，两个线程可能会同时使用相同的内存区域（存储单元），正如内存区域所观察到的那样。使用happens-before关系，释放线程的所有访问必须在分配线程开始使用之前刷新。

# qt - 为什么 Qt+QML 应用程序部署需要一些额外的库

> ID：13785692
> 
> 赞同：0
> 
> 时间：2012-12-09T08:02:35.477
> 
> 标签：qt, qml

当您想要部署您的**Qt + QML**应用程序时，您需要将**QtGui4、QtCore4 和 QtDeclarative4**库放在您的项目之外，这是合理的。但它们还不够，如果您还没有在项目中使用它们，您还需要包含**QtNetwork4、QtSql、QtXmlPattern4 和 QtScript4事件。**为什么需要？它们在 QtDeclarative4 中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:16:49.153

简短的回答：是的。

`QtDeclarative`包含一大堆东西。QML 支持许多透明使用需要在 C++ 中额外连接的功能的好处来自`QtDeclarative`为您捆绑了很多东西。因此依赖关系。

我想，没有完美的生活。

# c++ - 在 C++ 中使用静态类

> ID：13785695
> 
> 赞同：0
> 
> 时间：2012-12-09T08:03:20.390
> 
> 标签：c++, file, compilation, header

我在 C++ 中有一些简单的假设静态类：

```
#ifndef __STAT_H_
#define __STAT_H_

class Stat {

 private:
  static vector<int> v;

 public:

  static void add_num(int num);
  static void clear_nums();
  static void get_count();
};

#endif 
```

而ccp文件是这样的：

```
#include "Stat.h"

vector<int> v;

void Stat::add_num(int num) {
  v.push_back(num);
}

void Stat::clear_nums() {
  v.clear();
}

int Stat::get_num_count() {
  return v.size();
} 
```

现在，当我包含在 main.cpp 文件“Stat.h”中并尝试使用一些静态方法时：

```
Stat::add_num(8); 
```

编译期间的错误是

未定义对 'Stat::add_num(int)' 的引用

在这种情况下可能会出现什么问题？谢谢你。

编辑：对不起地址向量，它应该是 v 那里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:07:44.843

听起来您没有在编译中包含 stat.cpp 。所以你的链接器找不到静态方法的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T08:11:22.217

您需要在 g++ 命令中链接 Stat.o，例如：

```
g++ -c -o Stat.o Stat.cpp
g++ -o Stat main.cpp Stat.o 
```

我猜在你的 Stat.cpp 中：

```
vector<int> v; 
```

应该：

```
vector<int> Stat::v; 
```

如果您在 Stat.cpp 中定义本地 v，则没有编译错误，但我猜您打算使用`Stat::v`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T09:20:06.047

这是我对您的程序的看法，仅供参考。

*Stat.h*

```
#ifndef STAT_H
#define STAT_H

#include <vector>
using std::vector;

class Stat
{
 public:
  static void add_num(int num);
  static void clear_nums();
  static int get_count();

 private:
  static vector<int> v;
};

#endif 
```

*统计数据*

```
#include "Stat.h"

vector<int> Stat::v;

void Stat::add_num(int num) { v.push_back(num); }

void Stat::clear_nums() { v.clear(); }

int Stat::get_count() { return v.size(); } 
```

*主文件*

```
#include "Stat.h"

int main()
{
  Stat s;
  s.add_num(8);
} 
```

*生成文件*

```
CC = g++
OBJS = Stat.o
DEBUG = -g
CFLAGS = -Wall -c $(DEBUG)
LFLAGS = -Wall $(DEBUG)

all: build clean

build: $(OBJS)
        $(CC) main.cpp $(LFLAGS) $(OBJS) -o stat

Stat.o: Stat.h
        $(CC) $(CFLAGS) Stat.cpp

clean:
        -rm -f *.o 
```

# java - 在免费/专业组合中正确扩展 AppWidgetProvider 和 IntentService

> ID：13785701
> 
> 赞同：0
> 
> 时间：2012-12-09T08:04:47.203
> 
> 标签：java, android, android-widget

我有一个具有工作小部件的代码库。这个的基本结构是

```
MyAppWidget extends AppWidgetProvider
MyWidgetService extends IntentService 
```

`MyWidgetService`更新`MyAppWidget`并且一切都很好，直到我决定将我的应用程序变成一个库以从相同的代码库创建一个“免费/专业”组合。现在我有这样的东西

```
com.example.myapp.free.MyAppWidget extends com.example.myapp.library.MyAppWidget
com.example.myapp.pro.MyAppWidget extends com.example.myapp.library.MyAppWidget
com.example.myapp.library.MyAppWidget extends AppWidgetProvider
com.example.myapp.library.MyWidgetService extends IntentService 
```

`MyWidgetService`运行*MyAppWidget.update()*方法以更新显示。

在这种情况下，小部件会根据应用程序的版本进行微调，一切正常，但`MyWidgetService`不会更新小部件。

我已经验证它`MyWidgetService`实际上按计划运行，但它不知道要调用什么更新方法。就目前而言，`MyWidgetService`将调用*com.example.myapp.library.MyAppWidget.update()*而不是专业版或免费版。

我能够传递一个标志并告诉它它是哪个小部件类，但这意味着我的父类（库`MyWidgetService`）需要了解有关要更新的专业/免费类的详细信息。这打破了正确的面向对象模型。

我的问题是，传达应该更新哪个小部件类的正确方法是什么？

由于这是一件很难解释的事情，下面是我的课程的一些骨架细节，以防它有助于解释事情。

任何帮助表示赞赏。

**图书馆 MyWidgetService**

```
public class MyWidgetService extends IntentService {

    public MyWidgetService() {
        super(MyWidgetService.class.getSimpleName());
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // this calls the update method of the widget
        // but it doesn't know which object to call
        MyAppWidget.update();
        scheduleNextUpdate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);       
        return START_STICKY;
    }

    private void scheduleNextUpdate() {         
        // schedule next time for the service to work
    }   
} 
```

**库 MyAppWidget**

```
public class MyAppWidget extends AppWidgetProvider {

    @Override
    public void onEnabled(Context context) {
        super.onEnabled(context);
        Intent intent = new Intent(context, MyWidgetService.class);
        context.startService(intent);
    }

    public static void update() {
        // update widget display
    }
} 
```

**扩展库 MyAppWidget 的免费 MyAppWidget**

```
public class MyAppWidget extends com.example.myapp.library.MyAppWidget {

    @Override
    public void onEnabled(Context context) {
        super.onEnabled(context);
        // setup free widget
        // what can I do here to pass down to the service
        // to make sure it updates this widget class
    }
} 
```

**免费应用清单**

```
<!-- use the extended widget from com.example.myapp.free -->
<receiver
    android:name=".MyWidgetApp"
    android:label="@string/clock_widget_name">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_ENABLED" />
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>

    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/clock_widget" />
</receiver>
<!-- use the service from the library project -->
<service android:name="com.example.myapp.library.MyWidgetService" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:27:58.683

> 我能够传递一个标志并告诉它它是哪个小部件类，但这意味着我的父类（库 MyWidgetService）需要了解有关要更新的专业/免费类的详细信息。这打破了正确的面向对象模型。

不要传递标志，而是传递完全限定的类名，并使用反射来访问它。

或者，make`update()`是一个实例方法，由`onReceive()`. 然后让服务发送匹配的广播。

# android - android：即时取消选中复选框（状态已选中=true）

> ID：13785704
> 
> 赞同：1
> 
> 时间：2012-12-09T08:05:09.980
> 
> 标签：android

我已经阅读了几个主题，但找不到任何好的解决方案来解决我的问题。

我有一个复选框，它是标准的“选中”状态，状态为 TRUE。如果我取消选中它，我想知道停止我的背景音乐 - 即时运行，没有按钮。**我知道有些东西不见了，但我无法得到它！感谢您的帮助！**

**我正在使用没有错误但无法正常工作的代码。**

```
private CheckBox chkBoxMusic;
private MediaPlayer mp_music;
OnClickListener checkboxListener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.sound);
    mp_music = MediaPlayer.create(this,R.raw.menusong);

    chkBoxMusic = (CheckBox) findViewById(R.id.checkBoxMusic);

    checkboxListener = new OnClickListener() {
         public void onClick(View v) {

            boolean checked = ((CheckBox) v).isChecked();

               if (!checked) {

                   mp_music.stop();
               }     
            }
    };

   chkBoxMusic.setOnClickListener(checkboxListener);

   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:07:43.563

通过使用[CompoundButton.OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)复选框更改您的代码：

```
chkBoxMusic.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( !isChecked )
        {
            // perform logic
             mp_music.stop();
        }

    }
}); 
```

# ajax - 在 wordpress 主题中使用 jQuery Ajax 回调

> ID：13785710
> 
> 赞同：0
> 
> 时间：2012-12-09T08:06:36.280
> 
> 标签：ajax, wordpress, jquery

我正在为 WP 开发自定义主题，我遇到了 ajax 回调问题......这是我的标题：

```
<script>    
//alert("Data Loaded");
    $('#domaincheck').submit(function(){
        alert("Button pressed");
        $.post('<?php bloginfo('template_directory'); ?>/check.php', $(this).serialize(), function(data){
        alert("Data Loaded: " + data);
        });             
        return false;
    });
</script> 
```

在我的主题文件中，我有简单的形式，例如：

```
<form id="domaincheck">
Name: <input type="text" name="urname">
Birthplace: <input type="text" name="urbirth">
<input type="submit" name="submit" value="Submit">
</form> 
```

现在，当我单击提交按钮时-页面只是重新加载:(当我将其移出 WordPress 时，一切正常。有没有办法让它在 WordPress 中工作？另外一个奇怪的事情是当我将 JS 代码包装在“文档准备就绪”中时“ - javascript根本不工作......没有documentready它显示警报 - 但不是回调 - 它只是重新加载页面......再一次 - 在wordpress模板之外它可以正常工作。

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:18:42.107

我已经在我的本地主机上完成了，这很好地进行了 ajax 调用：

我`added one main jquery plugin`在`header.php`文件中引用`<head>`

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
<script type='text/javascript'>
   $(function(){
       $('#domaincheck').submit(function(e){
           e.preventDefault();
           alert("Button pressed");
           $.post('<?php bloginfo('template_directory'); ?>/check.php',$(this).serialize(), function(data){
               alert("Data Loaded: " + data);
           });
       });
   });
</script> 
```

这是`check.php`文件php代码：

```
<?php
    if((isset($_POST['urname'])) && (isset($_POST['urbirth']))){
        echo $_POST['urname'];
        echo $_POST['urbirth'];
    }
?> 
```

and i got the alert of the posted data.

try this and see if this helps.

# php - 排除数组在 PHP 中不起作用

> ID：13785712
> 
> 赞同：1
> 
> 时间：2012-12-09T08:06:39.923
> 
> 标签：php

下面是我的代码，我试图通过它从 SQL 数据库中获取某些值到下拉框中。我还试图在加载到下拉框之前排除一些数据。

在我的代码`$excld[]`中工作正常，并且在填充下拉列表时未显示预期的零值，但我希望排除的值`$exclude=$rec['chkNum'];`不起作用，否则我不想在下拉列表中显示的值仍然显示。有人可以告诉我这种方法有什么问题吗？谢谢。

```
$exclude = array();
$query = "SELECT * FROM invoentry WHERE dist_inv='$distUsr'";
$runx=mysqli_query($db,$query) or die ("SQL Error");
$norx=mysqli_num_rows($runx);

while ($rec = mysqli_fetch_array($runx))
{
    $exclude[] = $rec['chkNum']; $excld[] = '0';
}

$SQLx="SELECT * FROM newchk WHERE dist_chk='$distUsr'";
$runx=mysqli_query($db,$SQLx) or die ("SQL Error");
$norx=mysqli_num_rows($runx);

while ($rec = mysqli_fetch_array($runx))
    {
        if($rec['sbstart'] != '0' & $rec['sbend'] != '0') {
        for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
        {
            if (!in_array($i, $exclude, $excld))
            {
                echo "<option id='options' value='$i'>$i<br></option>";
            }
        } }

         if($rec['gwstart'] != '0' & $rec['gwend'] != '0') {
        for($i=$rec['gwstart']; $i<=$rec['gwend']; $i++)
        {
            if (!in_array($i, $exclude, $excld))
            {
                echo "<option id='options' value='$i'>$i<br></option>";
            }
        } }
    } 
```

**编辑 ：**

数据库结构如下；数据库名称：regional_data 同一个数据库中的两个表 invoentry 和 newchk

**发票：**

```
usr_inv dist_inv chkNum InvoNum
---------------------------------
John     Guardian   300455   457gXT 
```

**纽奇克：**

```
usr_chk  dist_chk sbstart sbend totsb gwstart gwend totgw
----------------------------------------------------------
John     Guardian 300400  300550 151   300     310   10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:24:16.340

我不明白它是如何工作的~~任何情况~~（好的，在第一次迭代中它可以工作，因为那时`$i`仍然是字符串）。看看`in_array`接受哪些参数

> bool **in_array** ( 混合*$needle* , array *$haystack* [, bool *$strict* = **FALSE** ] )

在您的情况下，您正在传递： integer `$i`，字符串数组`$exclude`（从数据库中获取的所有内容都是一个字符串，除非您自己转换它）和`$excld`用字符串“0”填充的非空数组。最后一个参数的计算结果为`TRUE`（数组不为空），因此 php 不仅要检查值，还要检查类型。由于您传递整数和字符串数组，php 不会在其中找到任何具有相同类型和值的元素，因此它将打印所有元素。

改变什么使它工作：

```
while ($rec = mysqli_fetch_array($runx))
{
    $exclude[] = $rec['chkNum']; //remove $excld[] = '0';
}
// add 0 to $exclude
$exclude[] = '0'; 
```

和

```
if (!in_array($i, $exclude)) //remove , $excl 
```

# magento - Magento - 上传图片时出错

> ID：13785714
> 
> 赞同：5
> 
> 时间：2012-12-09T08:07:12.337
> 
> 标签：magento

我无法将图像上传到 magento 中的产品，即我无法添加产品图像。当我尝试上传大图像（约 600kb）时，它说

> SSL 错误：无效或自签名证书

当我尝试上传小图片（大约 3 kb）时，它说

> 上传 HTTP 错误

我确实需要帮助。请帮助我。非常感谢。

另外：我在 Ubuntu 中使用 xampp 运行 magento。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:50:46.967

过去，当配置设置错误时，我遇到过 SSL 的上传问题。转到**系统 > 配置 > Web > 安全**并仔细检查您在那里设置的内容。

*   **基本 URL**通常与不安全部分中的相同，但使用`https:`而不是`http:`
*   **基本链接 URL** `{{secure_base_url}}`
*   **基础皮肤 URL** `{{secure_base_url}}skin/`
*   **基本媒体 URL** `{{secure_base_url}}media/`
*   **基本 JavaScript URL** `{{secure_base_url}}js/`

如果这些 URL 不同，则基于 Flash 的上传器存在安全问题。有时 URL 无法使用`{{secure_base_url}}`- 可能用于 CDN - 因此绕过它的方法是使用[No Flash Image Uploader](http://www.magentocommerce.com/magento-connect/no-flash-image-uploader.html)扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T14:17:53.457

假设您使用的是自签名证书（而不是使用 htaccess 来密码保护站点），那么

Magento 产品上传通常存在自签名证书问题，因此要解决此问题，您可以通过将 admin 中的 use secure url 设置为 false 来关闭 ssl，或者只输入不安全（常规）网站 URL（在 Admin -> System ->配置 -> 网络 -> 安全）

如果您仍然对文件大小有疑问，请查看您的 php.ini 值

```
upload_max_filesize = 64M
post_max_size = 96M 
```

您还可以将[自签名证书安装为受信任的根 CA](https://stackoverflow.com/questions/22837347/ssl-error-invalid-or-self-signed-certificate-magento-image-upload-in-products/22838033#22838033)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:22:12.123

如果您要使用自签名证书，则必须将自己设置为 CA 并将其密钥导入浏览器。此时，您的证书现在是附加到受信任 CA 的有效安全证书。然后，您将拥有一个功能齐全的安全站点，允许您测试 Magento 的所有功能，因为它们可以在您的实时电子商务服务器上运行。Flash Uploader 也将不再抱怨它。

创建一些不错的新 10 年证书并安装它们。该程序相当简单。

从**(1B)**在此网页上生成您自己的 CA（证书颁发机构）开始：[创建证书颁发机构和自签名 SSL 证书](http://www.tc.umn.edu/~brams006/selfsign.html)并生成您的 CA 证书和密钥。一旦你有了这些，生成你的服务器证书和密钥。创建证书签名请求 (CSR)，然后使用 CA 证书对服务器密钥进行签名。现在像往常一样在 Web 服务器上安装您的服务器证书和密钥，并将 CA 证书导入 Internet Explorer 的受信任的根证书颁发机构存储（由 Flex 上传器和 Chrome 也使用）和 Firefox 的证书管理器颁发机构存储在每个需要的工作站上使用自签名、CA 签名的服务器密钥/证书对访问服务器。

您现在应该不会看到任何有关使用自签名证书的警告，因为浏览器会在信任库中找到 CA 证书并验证服务器密钥已由该受信任证书签名。同样在 Magento 等电子商务应用程序中，Flex 图像上传器现在可以在 Firefox 中运行，而不会出现可怕的“自签名证书”错误消息。

# android - Android onClose 事件

> ID：13785720
> 
> 赞同：12
> 
> 时间：2012-12-09T08:07:52.050
> 
> 标签：android, events

我想在应用程序关闭时显示“感谢使用”消息。

处理应用程序关闭的事件是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T08:28:59.803

假设你的活动是 A->B->C->D。当用户从 D 活动按返回按钮然后转到 C 然后从 C 活动按返回按钮时，他将再次转到 B 活动按返回按钮用户将进入 A Launcher 活动。因此，按下后退按钮时，您可以向用户发送消息。

```
@Override
public void onBackPressed() {
    Toast.makeText(context,"Thanks for using application!!",Toast.LENGTH_LONG).show()l
    finish();
    return;
} 
```

或者

从任何活动中按直接主页键时，您需要

```
@Override
public void onAttachedToWindow() {
    super.onAttachedToWindow();
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);           
} 
```

覆盖上述方法后，现在您可以使用 onKeyDown() 方法轻松地在您的活动中收听 HOME 按键。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {     

    if(keyCode == KeyEvent.KEYCODE_HOME)
    {
       Toast.makeText(context,"Thanks for using application!!",Toast.LENGTH_LONG).show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-09T08:13:17.630

您可以在主/启动器活动中使用`onDestroy()`或回调`onBackPressed()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-07T12:11:02.663

假设您希望对话框仅在应用程序完全关闭时显示（也从后台删除），您可以`onDestroy()`在第一个活动中覆盖方法。

# c# - 从 LINQ 的另一个列表中按键选择

> ID：13785721
> 
> 赞同：0
> 
> 时间：2012-12-09T08:08:05.237
> 
> 标签：c#, linq

假设我有两个对象：

```
class Apple
{
     public int ID {get;set;}
     public string Name {get;set;}
     public string Color {get;set;}
}

class UsedApple
{
     public int ID {get;set;}
     public int AppleID {get;set;}
} 
```

如何选择所有使用过的苹果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:10:28.537

使用[Join](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.join.aspx)方法（与 SQL 中的内连接相同）：

```
IEnumerable<Apple> query = from ua in usedApples
                           join a in apples on ua.AppleID equals a.ID
                           select a; 
```

# ruby-on-rails - 如何使用 collection_select？

> ID：13785722
> 
> 赞同：0
> 
> 时间：2012-12-09T08:08:30.547
> 
> 标签：ruby-on-rails, ruby, activerecord, views, controllers

我想使用collection_select，我已经做了一些研究，让它显示带有正确对象集合的下拉菜单，我可以选择我选择的特定对象。但是从那里我不知道如何通过它。

这是我的代码：

```
 <%= collection_select :course, :course_id, Course.all, :id, :name, :prompt => "Select a Course:" %>
    <%= link_to 'New Grade', new_grade_path(:course => :course_id ) %> 
```

这是将其传递给控制器​​中的“新”方法的正确方法吗？

如果我在控制器中，这是检索该对象的正确代码吗？

```
 @course = Course.find(params[:course]) 
```

另外，如果我要在视图“new.html.erb”中显示这个，我会使用这个代码吗？

```
 <%= @course.name %> 
```

**编辑：**

我认为将我的关联包括在内可能会有所帮助：

```
 class Grade < ActiveRecord::Base
    belongs_to :course
    belongs_to :task
    belongs_to :student
  end       

  class Course < ActiveRecord::Base
    has_many :students, :dependent => :destroy
    has_many :grades
    has_many :tasks, :through => :grade
    has_many :teams
  end

  class Task < ActiveRecord::Base
    belongs_to :course
    has_many :grades
    has_many :categories
    has_one :eval
  end 
```

我想做的是在 views/grades/index.html.erb 页面中创建下拉菜单，以便用户可以在该课程中选择课程和任务，因此当用户单击“输入新成绩”时，它'会将用户在下拉菜单中选择的那些参数传递给views/grades/new.html.erb，以便我可以执行诸如显示课程名称和我尝试在新中上传成绩的任务之类的操作。链接到“输入新成绩”的 html.erb 表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:50:55.523

您应该在视图页面上创建表单以将参数传递给控制器​​。

**意见/成绩/index.html.erb**

```
<%= form_tag(new_grade_path, method: 'get') do %>
  <%= label_tag "Courses" %>
  <%= select_tag(
    :choose_course,
    options_from_collection_for_select(Course.all, "id", "name")
  ) %>
  <%= submit_tag "Choose course" %>
<% end -%> 
```

**控制器/grades_controller.rb**

```
def new
  @course  = Course.find(params[:choose_course])
end 
```

然后在**views/grades/new.html.erb**中，您可以使用`@course.name`显示用户在上一页中选择的课程。

# ruby-on-rails - 在 Rails 中创建控制器以获取数据后的下一步是什么

> ID：13785723
> 
> 赞同：-2
> 
> 时间：2012-12-09T08:08:34.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

在我的 Rails 应用程序中，我创建了一个控制器来从数据库中获取数据，其中还包括模型中的参数，如下所示。

问题是views文件夹中没有html页面。我需要运行控制器吗？？？我想要输出我的 json 格式.. html 页面是如何创建的，我在哪里可以看到我的 json 格式的数据...

```
# shoppingDemo.rb (controller)
class ShoppingDemo < ApplicationController
  def index
    @lists=products.all;
    respond_to do |format|
      format.html
      format.json { render json: @lists}
    end
  end

  def show
    @products = products.find(params[:prod_id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @products }
    end
  end
end

# products(model)
class products < Activerecord::Base
  attr_accessible :model_name, :brand_name, :price, :discount, :qty_available
end 
```

创建 html 页面或以 json 格式从数据库中查看我的数据的下一步是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:35:58.390

你应该解决一些问题：

1) 在模型中

`class Product`

2) 在控制器中

`@lists = Product.all`

`@products = Product.find(params[:id])`

3）您应该在`config/routes.rb`

```
resources :products 
```

它将为索引、显示、新建、创建、更新、销毁操作创建路由。[在这里](http://guides.rubyonrails.org/routing.html)阅读更多。

之后，您可以通过 http 请求访问您的产品列表，`http://localhost:3000/products`并在 id=1 上显示您的产品`http://localhost:3000/products/1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T08:54:01.800

只需手动执行即可。为此，只需`shopping_demo`在视图目录中创建文件夹。然后在`shopping_demo`目录中创建**index.html.erb**和**show.html.erb**文件。

现在，如果您想访问 json 数据，只需像这样附加 .json 格式说明符`http://localhost:3000/path_to_resource/1.json`。确保将 path_to_resource 替换为您尝试访问的资源的名称。

首先将您的**shoppingDemo.rb**文件重命名为**shopping_demo_controller.rb**。然后在**shopping_demo_controller.rb**文件中将类名更改为**ShoppingDemoController**。最后将其`resources :shopping_demo`放在`ShoppingDemo::Application.routes.draw do`您的 routes.rb 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:26:11.617

Rails 是一个 MVC 框架。MVC 代表模型视图控制器。

您说的html存在于视图中。

对于 ShoppingDemo 控制器的索引操作，创建此文件

```
app/views/shoppingdemo/index.html.erb 
```

并在里面编写适当的代码。例如

```
<% @lists.each do |list| %>
  <%= list %>
<% end %> 
```

你也有错别字。当您调用模型时，您应该使用首字母大写。

例如，而不是

```
@lists = products.all #WRONG 
```

做

```
@lists = Product.all #Plural the first letter and singular for the model. 
```

# html - 固定标题滚动表中的表标题未正确显示

> ID：13785724
> 
> 赞同：2
> 
> 时间：2012-12-09T08:08:36.373
> 
> 标签：html, css, jsfiddle

下面是小提琴，只需点击“添加问题”按钮 3 次，滚动条就会出现在表格中：

[http://jsfiddle.net/6rCyH/16/](http://jsfiddle.net/6rCyH/16/)

问题是表格标题单元格与其余列的单元格不匹配。`<th>`现在每个和的列单元格的类`<td>`是相同的，但单元格的宽度不一样，因此会导致沿列向下的单元格之间的对齐不正确。

下面是表格的html：

```
<table id="qandatbl" align="center">
<thead class="tblhead">
<tr>
    <th class="qid">Question No</th>
    <th class="question">Question</th>
    <th class="optandans">Option and Answer</th>

</tr>
</thead>
<tbody class="tblbody">
</tbody>
</table> 
```

下面是控制表格和每一列的主要css：

```
body{
    font-size:85%;  
}           

.extratd{
    border:1px black solid;
    border-collapse:collapse;
}

.qid { 
    min-width:3%;
    max-width:3%;
    font-weight:bold;
    border:1px black solid;
    border-collapse:collapse;
}

.question { 
    min-width:14%;
    max-width:14%;
    border:1px black solid;
    border-collapse:collapse;
}

.question textarea {
    min-width:auto;
    max-width:auto;
    resize:none;
    height:100%;
    font-size:100%;
}

.noofanswers{
    min-width:15%;
    max-width:15%;
    padding-top:5%;
    padding-bottom:5%;
}

.optandans{
    min-width:30%;
    max-width:30%;
    border:1px black solid;
    border-collapse:collapse;
}

.option{
    min-width:100%;
    max-width:100%;
    padding-top:5%;
    padding-bottom:5%;
}

.answer { 
    min-width:100%;
    max-width:100%;
    padding-top:5%;
    padding-bottom:5%;
     }   

.tblbody{
    background-color: #ddd;
    height: 400px;
    overflow: auto; 
}

.tblhead, .tblbody {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T16:23:30.627

请参阅更新的小提琴[http://jsfiddle.net/6rCyH/51/](http://jsfiddle.net/6rCyH/51/)

**演示：http:** [//jsfiddle.net/6rCyH/51/embedded/result/](http://jsfiddle.net/6rCyH/51/embedded/result/)

HTML：

```
<div id="details">
    <table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
      <thead>
        <tr>
          <th width="9%" class="qid">Question No</th>
          <th width="29%" class="question">Question</th>
          <th width="62%" class="optandans">Option and Answer</th>
        </tr>
      </thead>
    </table>
    <div id="qandatbl_onthefly_container">
    <table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0" border="0" width="100%">
      <tbody>
      </tbody>
    </table>
    </div>
  </div> 
```

**更新的 CSS：**

```
#qandatbl_onthefly_container
{
    width:100%;
    overflow:scroll;
    max-height:600px;
}

#qandatbl, #qandatbl_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
}
#qandatbl
{
    width:100%;
    margin-left:0;
}
#qandatbl_onthefly
{
    width:100%;
}

.qid {
    /*width:15%;*/
    font-weight:bold;
    border:1px black solid;
    border-collapse:collapse;
}

/*.question {
    width:30%;
    border:1px black solid;
    border-collapse:collapse;
}*/

.question {
    /*min-width:14%;
    max-width:14%;*/
    max-width:0.1%;
    border:1px black solid;
    border-collapse:collapse;
      line-height: 0;
}

.noofanswers{
    min-width:15%;
    max-width:15%;
    /*padding-top:5%;
    padding-bottom:5%;*/
}

.optandans{
    /*min-width:30%;
    max-width:30%;*/
    border:1px black solid;
    border-collapse:collapse;
}

.option{
    min-width:100%;
    max-width:100%;
    /*padding-top:5%;
    padding-bottom:5%;*/
}

.answer {
    min-width:100%;
    max-width:100%;
    /*padding-top:5%;
    padding-bottom:5%;*/
} 
```

**查询：**

```
function insertQuestion(form)
{
//updated variables

var $tbody = $('#qandatbl_onthefly > tbody');
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $td = $("<td class='extratd'  width='62%'>");
    var $qid = $("<td class='qid' width='9%'></td>").text(qnum);
    var $question = $("<td class='question' width='29%'></td>");

.................
 you function code here
.................

setWidth();

}

function setWidth() {
    var questionCellWidth = $("#qandatbl_onthefly tbody .question").width();
    console.log(questionCellWidth);
    var questionCellHeight = $("#qandatbl_onthefly tbody .question").height();
    console.log(questionCellHeight);
    $(".textAreaQuestion").css({
        "width": (questionCellWidth - 6) + "px",
        "height": (questionCellHeight) + "px"
    });
}

$(document).ready(function(){
var flag = true;
    if(flag == true)
    {
        var tbl_qanda = $("#qandatbl").width();
        $("#qandatbl").css({"width": (tbl_qanda - 16)+ "px"});
    }
    var tbl_qanda_onthefly = $("#qandatbl_onthefly").width();
    if(tbl_qanda > tbl_qanda_onthefly)
    {
         $("#qandatbl").css({"width": (tbl_qanda_onthefly - 16)+ "px"});
         $("#qandatbl_onthefly_container").css({"width": (tbl_qanda_onthefly)+ "px"});
    }
}); 
```

**注意：**我刚刚在此代码中创建了滚动功能，并添加了垂直滚动表格行的**`setwidth()`**功能，查看设置 textarea 宽度的**`$(document).ready(function(){});`** 功能和查看滚动功能的功能。外观和感觉完全取决于您。您可以根据需要微调代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:36:06.483

为 TH 和 TD 提供相同的 CSS 宽度值。

# javascript - 类型错误：对象# 在 Joomla ChronoForm 中没有方法“getSelected”

> ID：13785733
> 
> 赞同：1
> 
> 时间：2012-12-09T08:10:39.680
> 
> 标签：javascript, forms, joomla, mootools

我的代码出现了这个 JS 错误：

错误：`TypeError: Object #<HTMLSelectElement> has no method 'getSelected'`

代码：

```
window.addEvent('domready', function() {
$('hide_me1').setStyle('opacity', '0');
$('hide_me2').setStyle('opacity', '0');
$('recipe').addEvent('change', function() {
var opt;
opt = this.getSelected().getProperty('data-serial').toString();
if ( opt.length > 0 ) {
  $('modelnumber').value = opt;
  $('hide_me1').setStyle('opacity', '1');
  $('hide_me2').setStyle('opacity', '1');
} else {
  $('modelnumber').value = '';
  $('hide_me1').setStyle('opacity', '0');
  $('hide_me2').setStyle('opacity', '0');
}
});
}); 
```

有人可以告诉我我做错了什么吗？我已经尝试了一切。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:42:14.380

不知道问题是什么，因为在我看来代码适用于此[Fiddle](http://jsfiddle.net/9G3by/2/)。

在您的情况下，似乎`this`没有被 MooTools 包装。我会尝试更改`this.getSelected`并`$(this.id).getSelected()`查看是否有效。

# javascript - 使用重力的 2D 碰撞检测 - JavaScript

> ID：13785735
> 
> 赞同：1
> 
> 时间：2012-12-09T08:11:29.783
> 
> 标签：javascript, html, canvas, 2d, collision-detection

我正在尝试使用 HTML5 画布制作游戏以获得乐趣，但由于重力，我无法检测到两个精灵之间的碰撞。

我的 Player 类中有一个 tick() 方法，在每个刻度上，玩家的 x 和 y 坐标分别通过它的 velocityX 和 velocityY 递增。然后，我将重力添加到velocityY。然后我想检查玩家和屏幕上的块之间的碰撞，这些块排列在屏幕底部并存储在一个数组中。

这是代码：

```
Player.prototype.tick = function() {

    this.x += this.velocityX;
    this.y += this.velocityY;
    this.velocityY += GRAVITY;

    var blocks = world.getOnScreenBlocks();
    for (var i=0; i<blocks.length; i++) {
            //Check for collision of this object (Player) with blocks[i]
        }
    }
} 
```

我花了几个小时试图让碰撞检测工作但放弃了。我知道如何将玩家的坐标与每个块的坐标进行比较以检测碰撞，但问题是在发生碰撞时进行调整。

如果我检测到块顶部的碰撞，我可以将velocityY 设置为0，导致玩家停止垂直移动。然而，在下一个滴答声中，速度 Y 将增加，因为重力被添加到它上面，导致再次检测到碰撞，并且玩家在许多滴答声后慢慢穿过块。

如果我在碰撞时将velocityY 设置为0 并将玩家的位置固定在块的上方，它会有点工作，除非在站在块上时会检测到不断的碰撞，因为重力试图将它向下推。

这是我最接近在块的所有四个侧面进行碰撞检测的方法：

```
var blocks = world.getOnScreenBlocks();
for (var i=0; i<blocks.length; i++) {
    var block = blocks[i];
    var left1 = this.x;
    var left2 = block.getX();
    var right1 = this.x + this.sprite.getWidth();
    var right2 = block.getX() + block.getSprite().getWidth();
    var top1 = this.y - this.sprite.getHeight();
    var top2 = block.getY() - block.getSprite().getHeight();
    var bottom1 = this.y;
    var bottom2 = block.getY();

    //Check for collision at top
    if (this.velocityY > 0) {
        if (left1 < right2 && right1 > left2 && bottom1 >= top2 && bottom1 <= bottom2) {
            this.y = top2;
            this.velocityY = 0;
        }
    }

    //Check for collision at bottom
    else if (this.velocityY < 0) {
        if (left1 < right2 && right1 > left2 && top1 <= bottom2 && top1 >= top2) {
            this.y = bottom2 + this.sprite.getHeight();
            this.velocityY = 0;
        }
    }

    //Check for collision on right
    if (this.velocityX > 0) {
        if (top1 < bottom2 && bottom1 > top2 && right1 >= left2 && right1 <= right2) {
           this.x = left2 - this.sprite.getWidth();
            this.velocityX = 0;
        }
    }

    //Check or collision on left
    else if (this.velocityX < 0) {
       if (top1 < bottom2 && bottom1 > top2 && left1 <= right2 && left1 >= left2) {
            this.x = right2;
            this.velocityX = 0;
        }
    }
} 
```

这有点工作，但确实有问题。我真的想避免在发生碰撞时设置精灵的 x 和 y 坐标，而只设置速度，因为我认为这样会减少故障。

我还尝试为碰撞设置布尔值，以便在检测到碰撞但没有任何效果时不增加重力。有没有标准的、正确的方法来做到这一点？请帮忙。

另外，为了提高效率，我真的希望它只通过循环来检查玩家是否在移动时是否发生碰撞，但我不确定如何，因为由于重力，velocityY 将始终高于零。

谢谢。

编辑：我应该在上面的第二个示例中包含这一点，玩家和块的 x 和 y 坐标基于左下角，而不是典型的左上角。我这样做是因为我的精灵高度不同，我想让碰撞在精灵脚与地面碰撞的底部起作用。

# php - PHP - MySQL 如何在选择中仅显示供应商名称，但下一页我可以获取供应商 ID？

> ID：13785736
> 
> 赞同：0
> 
> 时间：2012-12-09T08:11:36.780
> 
> 标签：php, mysql

我用过explode，但它不起作用。这是我的代码。

```
$sup="SELECT supplier_id,supplier_name FROM tblSupplier";
    $s=mysql_query($sup);
   <?php

while($suppl=mysql_fetch_array($s)){
            ?><option value=<?echo $suppl[0].'_'.$suppl[1]?> selected> <?php echo $suppl[1];?></option>
            <?php } ?></select></td>  

$supplier = explode("_", $_POST['supplier_name']);
$supplier_id = $supplier['0'];
$supplier_name = $supplier['1']; 
```

另一个问题是我需要循环，因为我想在一页中输入 10 个输入。

在此先感谢您花费时间和精力帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:24:52.963

您需要在使用循环之前放置爆炸代码，试试这个：

```
<?php
   $sup="SELECT supplier_id,supplier_name FROM tblSupplier";
   $s=mysql_query($sup);
   if (!$s) { echo 'Sorry, there was an error!'; }
   $supplier = explode("_", $_POST['supplier_name']);
   $supplier_id = $supplier[0];
   $supplier_name = $supplier[1]; # you don't need this
   echo '<select name="supplier_name">';
   while ($suppl = mysql_fetch_array($s)) {
        echo '<option value="'.$suppl[0].'_'.$suppl[1].'"';
        if ($suppl[0] == $supplier_id) {
             echo 'selected';
        }
        echo '>'.$suppl[1].'</option>';
   echo '</select>';
?> 
```

# java - Java：从字符串中删除前三个字符

> ID：13785738
> 
> 赞同：-4
> 
> 时间：2012-12-09T08:11:49.370
> 
> 标签：java

我得到一个字符串值

```
String A = KS!BACJ
String B = KS!KLO
String C = KS!MHJU
String D = KS!GHHHY 
```

是否可以删除KS！来自字符串，所以它看起来只像 BACJ

```
public class Main {
    public static void main(String args[])  {
     String A = "KS!BACJ";
     if(A.startsWith("KS!"))
     {
     }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T08:15:09.083

尝试`String a = A.substring(3);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T08:15:06.147

您可以使用[`String#substring(int idx)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29).

在您的情况下`yourString.substring(3)`，它将返回一个没有前三个字符的字符串，例如：

```
String newString = yourString.substring(3); 
```

**注意：**我们不能“从字符串中删除前三个字符”（至少不容易），因为`String`它是*不可变*的- 但我们可以创建一个没有前 3 个字符的新字符串。

* * *

**奖金：**

要“从字符串中删除第一个字符” - 您将需要努力工作并使用反射。
**不建议使用**，仅用于教育目的！

```
String A = "KS!BACJ";
Field offset = A.getClass().getDeclaredField("offset");
offset.setAccessible(true);
offset.set(A, (Integer)offset.get(A) + 3);
Field count = A.getClass().getDeclaredField("count");
count.setAccessible(true);
count.set(A, A.length()-3);
System.out.println(A); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T08:16:07.497

试试这个。

```
String.substring(String.indexOf("!")+1 , String.length()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T08:20:22.180

使用 Apache 通用语言[`StringUtils`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#removeStart%28java.lang.String,%20java.lang.String%29)：

```
String aString = "KS!BACJ";
String bString = StringUtils.removeStart("KS!"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-11T10:40:51.710

请改用 StringBuilder。它不会生成新`String`对象。它只是从给定的字符串中删除前 3 个或更多字母。

```
String st = "HELLO";
StringBuilder str = new StringBuilder(st);
str.delete(0, 3);
Log.d("str", str.toString()); 
```

输出：

> 洛

# java - 无法解密 MD5 散列字节数组

> ID：13785739
> 
> 赞同：1
> 
> 时间：2012-12-09T08:12:01.437
> 
> 标签：java, hash, bytearray, md5, spring-ldap

我正在使用带有 Spring LDAP 的 Apache DS 进行身份验证和用户管理。Apache DS 将密码字段作为散列字节数组发送，因此我需要将其解密为字符串。我正在使用**MD5**哈希。

例如，这是用于使用 Apache DS Studio 输入密码的窗口：

（为了演示，我想告诉输入的密码是**1**）

![在此处输入图像描述](../Images/89edf46b671bb7c0bd42ff43efd3fcf1.png)

Apache DS 将密码字段作为散列字节数组发送。当我尝试使用下面的 Spring LDAP 获取它时，我得到了**[B@66ca6254**。我需要解密它并得到它的十六进制值，即**c4ca4238a0b923820dcc509a6f75849b**，如上所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:21:11.760

你这里有两个问题：

*   您使用“解密”一词，就好像您实际上能够恢复原始密码一样。事实并非如此。希望您已经理解这一点，并且您只是不恰当地使用了“解密”一词
*   您正在调用`toString()`一个字节数组。这就是给出值“[B@66ca6254”的原因，这表明您调用它的对象是一个字节数组，然后是一个哈希。您真正感兴趣的是字节数组的十六进制表示。

基本上你只需要将字节数组转换为十六进制字符串。有多种方法可以做到这一点 - 在您自己的代码中，或使用第三方库，如[Apache Commons Code](http://commons.apache.org/codec/)及其[`Hex`](http://commons.apache.org/codec/api-release/org/apache/commons/codec/binary/Hex.html)类。如果您不想包含额外的库，则在 Stack Overflow 上有*大量*用于字节数组到十六进制字符串转换的代码片段，例如[此处](https://stackoverflow.com/a/9855338/22656)。（还有`javax.xml.bind.DataTypeConverter`，但我个人不想将它用于一般转换 - 它对我来说太像特定于 XML 的类型。我敢说它可以正常工作，它只是在代码中给人一种错误的印象。）

编辑：既然你已经告诉我们你得到的字节，你*不*只是想使用十六进制。您已经获得了 的 ASCII 编码形式`"{MD5}xMpCOKC5I4INzFCab3WEmw=="`，它本身表明它是 MD5，然后具有 base64 编码的版本。因此，您应该：

*   使用将字节数组转换为字符串`new String(data, "ASCII")`
*   检查字符串是否以`"{MD5}"`
*   *将字符串的其余部分*解码为base64（即去掉前5 个字符，然后通过base64 解码运行其余部分）。同样，您可以为此使用 Apache Commons Codec，或[此公共域 base64 解码器](http://iharder.net/base64)（或许多其他解决方案）。
*   此时，您已经获得了哈希的*真正*原始二进制数据。然后，您可以根据需要将其转换为十六进制，如前所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:19:51.167

您无法解密 MD5 哈希，它是一种方式的哈希函数。

# javascript - 错过或最后尝试后

> ID：13785740
> 
> 赞同：8
> 
> 时间：2012-12-09T08:12:09.190
> 
> 标签：javascript, node.js, express

我正在使用 Node、Express 和 EJS 视图引擎、nano（用于 couchdb），但我遇到了这个非常令人费解的错误，我通过 SO 或 Goog 找不到任何关于 Node/JS 的特定信息。我的代码区域似乎触发了这一点，它涉及嵌套的异步回调，它从 CouchDB 中获取一个文档，通过它查看一些匹配项，并将一个对象推送到我的私有范围内的一个数组中。

和错误：

```
Express
500 SyntaxError: Missing catch or finally after try
at Object.Function (unknown source)
at exports.compile (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/node_modules/ejs/lib/ejs.js:234:12)
at Object.exports.render (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/node_modules/ejs/lib/ejs.js:273:10)
at View.exports.renderFile [as engine] (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/node_modules/ejs/lib/ejs.js:303:22)
at View.render (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/node_modules/express/lib/view.js:75:8)
at Function.app.render (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/node_modules/express/lib/application.js:501:10)
at ServerResponse.res.render (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/node_modules/express/lib/response.js:719:7)
at exports.dashboard.res.render.msg (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/routes/index.js:19:29)
at module.exports.read (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/api/Character.js:56:25)
at Request._callback (/Users/Keith/Desktop/netPoetica/1- Projects/dcc-chargen/node_modules/nano/nano.js:296:11) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-09T08:52:17.377

错误是我的 EJS 模板中的 if 语句中缺少括号。如该跟踪所示，发生此错误的是在exports.compile函数（由res.render（）调用）中-lib作者使用字符串创建一个新函数，该函数将我的EJS文件功能包含在一个try 块，它变成了一个悬空尝试，因为我的 if 块中缺少左括号导致新匿名函数中的语法错误，该函数创建为字符串并使用“new Function('str')”构建。

@TJCrowder 指出，堆栈跟踪非常清楚，并最终导致了这个解决方案。我删除了一些示例代码，因为它肯定与最终问题无关。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-12T13:55:04.490

对我来说，下面的 for 循环中缺少 { 导致了错误。寻找适当的关闭或打开括号。

```
<% for(var i=0;i<users.length;i++) %>   
    <li> <%= users[i]   %>  </li>
    <%}%>
    </ul>
    </p> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-03T10:23:23.500

此错误的一些“hello world”示例。

## 场景一（额外`,`）

`,`之间的额外`try...catch`（来自“if-else”语法的习惯）。

```
/* Throw "message": "Uncaught SyntaxError: Missing catch or finally after try" */
try {
  /* do something */
},catch (error) {
  /* do something */
}
```

[![在此处输入图像描述](../Images/592d66fe82fa04d4f57bf670b265ac9b.png)](https://i.stack.imgur.com/neCCQ.png)

**有效代码：**

```
/* Valid code */
try {
 /* do something */
}
catch (error) {
 /* do something */
}
```

## 方案 2

使用 try 而不使用 catch -or- finally。

```
/* Throw error: Error: Missing catch or finally after try */
try {
  /* do something */
}
```

**MDN 文档：** [https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch)

# android - Android下拉菜单项未与文本一起显示图标

> ID：13785741
> 
> 赞同：1
> 
> 时间：2012-12-09T08:12:13.373
> 
> 标签：android, android-menu

这是我的菜单项。

```
 <item
    android:id="@+id/stores"
    android:orderInCategory="100"
    android:icon="@drawable/stores"
    android:showAsAction="never"
    android:title="@string/favoritestores"/> 
```

它仅显示文本，而不是下拉菜单中的图标。我在路径中有正确的drawable。我在 API 级别 14+ 中使用它。这可能是什么问题？

我试图通过代码设置图标。但我仍然看不到图标

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.home, menu);
    MenuItem menuItem = menu.findItem(R.id.menu_settings);
            menuItem.setIcon(R.drawable.action_search);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:49:17.497

自 Android 3.0 Honeycomb（API 级别 11+）起不再显示图标。如果您在某些较旧的 Android 上运行它，您应该会看到它们...

但是，如果您想显示这些图标，则必须在 ActionBar 中使用它们

# asp.net-mvc - MVC 应用程序中具有 UnitOfWork 模式的数据库存储库

> ID：13785743
> 
> 赞同：3
> 
> 时间：2012-12-09T08:12:59.043
> 
> 标签：asp.net-mvc, design-patterns, unit-of-work

今天我想为数据库连接实现存储库模式+工作单元模式。我的代码是否正确？因为这是我第一个实现数据库连接的工作单元。

第一个存储库：

```
public class NotesRepository : INotesRepository
{
    private DatabaseContext context;

    public NotesRepository(DatabaseContext context)
    {
        this.context = context;
    }

    public IQueryable<Notes> GetAllNotes()
    {
        return (from x in context.Notes
                select x);
    }
} 
```

第二个仓库：

```
public class CommentsRepository : ICommentsRepository
{
    private DatabaseContext context;

    public CommentsRepository(DatabaseContext context)
    {
        this.context = context;
    }

    public IQueryable<Comments> GetAllComments()
    {
        return (from x in context.Comments
                select x);
    }
} 
```

数据库连接的工作单元类：

```
public class UnitOfWork
{
    private DatabaseContext context = new DatabaseContext();
    private INotesRepository notesRepository;
    private ICommentsRepository commentsRepository;

    public INotesRepository NotesRepository
    {
        get
        {
            if (this.notesRepository == null)
            {
                this.notesRepository = new NotesRepository(context);
            }
            return notesRepository;
        }
    }

    public ICommentsRepository CommentsRepository
    {
        get
        {
            if (this.commentsRepository == null)
            {
                this.commentsRepository = new CommentsRepository(context);
            }
            return commentsRepository;
        }
    }
} 
```

和控制器，我可以在其中使用多个具有单个数据库连接的存储库：

```
public class HomeController : Controller
    {
        private UnitOfWork unitOfWork = new UnitOfWork();        

        public ViewResult Index()
        {
            var a = unitOfWork.NotesRepository.GetAllNotes();
            var b = unitOfWork.CommentsRepository.GetAllComments();

            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:54:36.263

您的实现非常正确:)

**但我建议您使用 IUnitOfWork 接口并在构造函数中传递 DatabaseContext 实例。**

**另一件事是在 UnitOfWork 中创建一个 SaveChanges 方法以将数据提交到数据库。**

# java - 机器人类 - 未处理的异常类型 AWTException

> ID：13785747
> 
> 赞同：1
> 
> 时间：2012-12-09T08:14:13.827
> 
> 标签：java, compiler-errors, awt, awtrobot

所以，我正在修补 Java 中的机器人类。我是一个非常新的 Java 程序员，但我对其他语言有更深的根基。这是我的代码：

```
import java.awt.*;

public class Main {

    public static void main(String[] args) {
        Robot bot = new Robot();
        bot.mouseMove(50, 50);  
    }
} 
```

我所做的只是看看我是否可以控制鼠标，例如将鼠标移动到 50、50。但是，在 Eclipse 中，它会在旁边放置一个红色 X

```
Robot bot = new Robot(); 
```

..说..

```
Unhandled exception type AWTException 
```

并且不会让我运行它。谁能帮我弄清楚为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T08:20:58.170

您需要尝试/捕获异常：

```
import java.awt.*;
public class Main{

public static void main(String[] args) {

    try
    {
    Robot bot = new Robot();
    bot.mouseMove(50, 50);  
    }
    catch (AWTException e)
    {
    e.printStackTrace();
    }
}
} 
```

或抛出异常：

```
import java.awt.*;
public class Main throws AWTException{

public static void main(String[] args) {
    Robot bot = new Robot();
    bot.mouseMove(50, 50);  
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T12:18:38.610

```
import java.awt.*;

public class remote{

     public static void main(String[] args) {

         try
            {
            Robot bot = new Robot();
            bot.mouseMove(50, 50);
            trace("działam");
            }
            catch (AWTException e)
            {
            e.printStackTrace();
            }
        }

     public static void trace(String s){
         System.out.print(s.toString());
     }

} 
```

在我将 bot.mouseMove(50, 50) 添加到 TRY 指令之前，这对我有用。

# c# - 如何从 sqlite 获取整个字段并将其复制到文本文件中

> ID：13785750
> 
> 赞同：0
> 
> 时间：2012-12-09T08:14:29.997
> 
> 标签：c#, sqlite, console-application

我正在使用控制台应用程序，我想在其中从 sqlite 获取整行（字段）并将其复制到文本文件（Unicode）

从下面的代码中，我连接到 sqlite 并选择整行

```
 class Program
{
    static void Main(string[] args)
    {
        SQLiteConnection connection = new SQLiteConnection(@"Data Source = C:\APTRABuilder.sqlite;Version=3;");
        connection.Open();
        string conncommand = "Select language1 from builderScreenResourceBundleTBL";
        SQLiteCommand cmd = new SQLiteCommand(conncommand, connection);
        cmd.ExecuteNonQuery();
    }
} 
```

现在我想获取该数据并将其复制到文本文件中，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:18:45.797

```
 class Program
{
    static void Main(string[] args)
    {
        SQLiteConnection connection = new SQLiteConnection(@"Data Source = C:\APTRABuilder.sqlite;Version=3;");
        connection.Open();
        string conncommand = "Select language1 from builderScreenResourceBundleTBL";
        SQLiteCommand cmd = new SQLiteCommand(conncommand, connection);
        DataReader dr = cmd.ExecuteReader()
        while(dr.Read())
           {
             //fetch the Rows here.
           }
    }
} 
```

# string - 迭代 Scheme-vector 的元素会导致合同违约

> ID：13785751
> 
> 赞同：1
> 
> 时间：2012-12-09T08:14:34.880
> 
> 标签：string, vector, functional-programming, scheme, racket

我正在尝试编写一个函数来检查给定的输入是否包含除数字以外的任何字符。但是，我`contract violation`在 Scheme 下进入 DrRacket。

这是代码：

将字符串分隔为字符的方法：

```
(define (breaking str) (list->vector (string->list str))) 
```

为数字创建一个向量：

```
(define myNumber (breaking "123498765")) 
```

在这里我检查给定的数字：

```
(define (vectorFunc myVector)
(define i 0)                      
(do ()                             
  ((= i (vector-length myVector))) ; run until the end of the vector
  (cond ((< (vector-ref myVector i) #\0) 'incorrect)
        ((> (vector-ref myVector i) #\9)  'also-incorrect))
  (set! i (+ i 1))    ; inc "i+ by 1
); end of do
) 
```

的输出`(vectorFunc myNumber)`是：

```
. . >: contract violation
  expected: real?
  given: #\1
  argument position: 1st
  other arguments...:
   #\0
> 
```

它出什么问题了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:12:10.967

正如 Racket 正确告诉您的那样，您正在比较 - 分支中的苹果和橙子`cond`，即字符与实数；`string->list`创建一个*chars*列表。您可以编写自己的谓词来克服这个问题并将其映射到一个向量上（这将是一个更实用的解决方案——您的代码看起来不像方案；））

```
(define (breaking str)
  (list->vector (string->list str)))

(define my-number
  (breaking "1234987650"))

(define (represents-char-number? char)
  (if (member char '(#\0 #\1 #\2 #\3 #\4 #\5 #\6 #\7 #\8 #\9))
      #t
      #f))

(define (vector-func vec)
  (vector-map represents-char-number? vec))

(vector-func my-number)
===> #(#t #t #t #t #t #t #t #t #t #t) 
```

`vector-map`在 R6RS 内标准化。还请考虑 lisp 系列语言的一些[样式规则](http://mumble.net/~campbell/scheme/style.txt)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T15:41:35.793

如果您需要确定一个值是否是 and 之间的字符`#\0`，`#\9`最好使用[`char-numeric?`](http://docs.racket-lang.org/reference/characters.html#%28def._%28%28quote._%7E23%7E25kernel%29._char-numeric%7E3f%29%29)谓词：

```
(char-numeric? a-char) 
```

从文档中：

> 如果 char 具有 Unicode “数字”属性，则返回 #t。

就您的代码而言，它看起来像这样：

```
(cond ((not (char-numeric? (vector-ref myVector i)))
       'incorrect)
      (else ...)) 
```

我同意@LudwigMeier 的评论——你的代码看起来不像 Scheme。您正在尝试将 Scheme 当作一种类 C 语言来使用，它看起来有点奇怪。在方案中，事情已经完成......不同。

# haskell - 为什么 Template Haskell 在编译期间允许任意 IO 操作？

> ID：13785753
> 
> 赞同：7
> 
> 时间：2012-12-09T08:15:01.887
> 
> 标签：haskell, compiler-construction, io, template-haskell

当我试图了解 TH 时，我发现它允许`IO`在编译期间进行任意操作（请参阅[Template Haskell 有什么不好？](https://stackoverflow.com/q/10857030/1333025)）。这对我来说似乎很危险。这是为什么？某些任务真的有必要吗？还是只是对其设计的简化，“把不纯的东西都扔进`IO`罪仓”？

**更新：**如果有任何努力制作一个不允许任意操作的 TH[安全子](http://hackage.haskell.org/trac/ghc/wiki/SafeHaskell)集，我也会感兴趣。`IO`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T08:36:50.433

模板 Haskell 的主要预期用途之一是从外部资源构建常量，例如来自文件的大文本值或构建信息（版本、时间、环境）。显然，这样做需要系统访问权限。

然后归结为尝试为此构建一个安全的 API，或者只允许任意 IO。选择后者是因为它很简单，而且很容易让安全的 API 出错。

# c++ - 对 namespace::class::constructor 的未定义引用

> ID：13785757
> 
> 赞同：0
> 
> 时间：2012-12-09T08:15:58.000
> 
> 标签：c++, class, undefined-reference

我有以下代码，每次编译时，它都会给我一个错误，提示存在对 ns::player::player() 的未定义引用

这以前从未发生在我身上，所以说实话，我很困惑。我只知道这很简单。顺便说一句，下面的代码并不*完全*是我正在使用的代码，但它是相同的想法。我只是缩短了它并更改了名称以使其更易于阅读。

另外，如果我把它全部放在一个文件中，它会很好玩。

主文件

```
#include "space.hpp"
int main()
{
   ns::player kyle;
   return 0;
} 
```

空间.hpp

```
#ifndef SPACE_HPP_INCLUDED
#define SPACE_HPP_INCLUDED
namespace ns
{
   class player
   {
      private:
         int stat1, stat2, stat3;
      public:
         player();
         player(int, int, int);
   };
}
#endif 
```

空间.cpp

```
#include "space.hpp"
ns::player::player()
{
   stat1 = 100;
   stat2 = 200;
   stat3 = 300;
}
ns::player::player(int a, int b, int c)
{
   stat1 = a;
   stat2 = b;
   stat3 = c;
} 
```

# visual-studio-2010 - 在水晶报表 2008 中使用存储过程声明表

> ID：13785762
> 
> 赞同：1
> 
> 时间：2012-12-09T08:16:58.883
> 
> 标签：visual-studio-2010, sql-server-2008, c#-4.0, crystal-reports-2008

我正在创建会计系统。但是我在创建试算表时遇到了麻烦。所以我从互联网上找到了这个可以进行跟踪平衡的存储过程但问题是我如何使用 Visual Studio 2008 在水晶报表中使用这种类型的存储产品4.0 网络 C#。因为在这个存储过程中，表正在创建并且一些数据作为墙插入

```
USE [data_base]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER procedure [dbo].[gettrial]
    @startdate datetime,
    @enddate datetime
AS
declare @tab1 table
(
debit decimal(18,2),
credit decimal(18,2),
account varchar(20),
balance decimal(18,2),
accountname varchar(50)
)
insert into @tab1
select sum(dr),sum(cr),jdetail.accountno,sum(dr)-sum(cr),accountname 
from jdetail
join account on account.accountno=jdetail.accountno
where date>=@startdate and date<=@enddate
group by jdetail.accountno,account.accountname

select accountname as 'AccountTitle' ,account as 'Account No.', 
'Debit'=case when sign(balance)=1
then balance 
end,
'Credit'=case when sign(balance)=-1
then balance*-1
end
from @tab1
--where balance<>0
ORDER BY 'Credit','Debit' asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:21:43.367

您可以将上述过程指定为报表的数据源，并且只有结果集将用于显示报表中的数据。使用的临时表是程序将存在于当前会话的范围内，不会影响报告的工作

# c# - 如何在 C# 中使用正则表达式阻止或在评论框中

> ID：13785774
> 
> 赞同：1
> 
> 时间：2012-12-09T08:18:58.530
> 
> 标签：c#, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:39:30.637

```
^[A-Za-z0-9 ]*$ 
```

这将只匹配数字、字母和空格。您将必须根据您的具体情况确定句点、逗号、分号等是否可以接受。请记住，极其严格的规则可能会让用户感到厌烦，最好在服务器端删除任何不需要的字符。

* * *

更新：

您可以创建一个像这样 [^] 的否定组，其中不允许插入符号后面的任何字符。请参阅 codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial，这是一篇关于正则表达式的好文章。

# ruby-on-rails - 处理重复的数据库条目

> ID：13785775
> 
> 赞同：0
> 
> 时间：2012-12-09T08:19:25.737
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

我正在尝试处理多个数据库条目。我们一直在从网站上删除数据，但有人忘记对已经创建的当前数据进行检查。我们现在有大约 12,000 个条目。

我正在查看每个条目并删除重复的条目。这是我到目前为止所拥有的：

```
for Listing.each(:order => "street_address DESC") do |listing| 
  if listing.scraped == true
    if previous_street_address && listing.street_address == previous_street_address
      listing.delete
    end
  end
  previous_street_address = listing.street_address
end 
```

这是数据库架构：

```
 create_table "listings", :force => true do |t|
    t.integer  "category"
    t.string   "street_address"
    t.string   "city"
    t.string   "state"
    t.datetime "availability"
    t.integer  "bedrooms"
    t.integer  "bathrooms"
    t.integer  "square_footage"
    t.string   "short_description"
    t.text     "long_description"
    t.integer  "price"
    t.integer  "period"
    t.datetime "created_at",                              :null => false
    t.datetime "updated_at",                              :null => false
    t.integer  "landlord_id"
    t.float    "latitude"
    t.float    "longitude"
    t.datetime "expires_at"
    t.boolean  "warned_of_expiration"
    t.integer  "views",                :default => 0,     :null => false
    t.boolean  "fake"
    t.string   "short_web_url"
    t.string   "apartment_no"
    t.string   "zipcode"
    t.datetime "delisted_at"
    t.integer  "daily_rate"
    t.integer  "photos_count"
    t.string   "delisted_reason"
    t.boolean  "scraped"
    t.boolean  "cats",                 :default => false
    t.boolean  "dogs",                 :default => false
  end 
```

我知道我需要以有意义的方式对数据进行排序，但我不认为 Street Address 的工作方式就像地址是“123 Anywhere Street”一样，我 Listing.street_address.to_i 它将其转换为 123，然后按这些数字排序这可能会导致问题。我正在寻找一些新的眼光来解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T08:41:14.267

12,000 在内存中并不多。这个解决方案怎么样：

```
all = Listing.all
to_remove = all-all.uniq{|el| [el.street_address, ..., ...] }
to_remove.each(&:delete) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:04:50.003

您可能会发现直接在 Postgres 中更容易做到这一点。[这个线程](https://stackoverflow.com/questions/1746213/how-to-delete-duplicate-entries-in-postgresql)有几个例子。

# html - 这是在没有数据库交互的情况下加载数据的最佳方法

> ID：13785780
> 
> 赞同：0
> 
> 时间：2012-12-09T08:20:09.437
> 
> 标签：html, xml, database, jquery, text

在我的新项目中，我的主页上有很多动态数据块。例如

*   **最新消息**（显示来自 DB 的前 2 条消息，包含小图像、摘要文本和阅读更多链接）
*   **本周特卖**（显示来自 DB 的前 2 名特卖，包含小图片、标题、副标题、摘要文本和阅读更多链接）

为了实现这样的事情，我打算采用以下方法之一。

**方法 A：**将此类数据存储在单独的 HTML 文件中，并使用**Jquery ajax() 调用**或**MVC RenderPage()进行渲染**

**方法 B：**将此类数据存储在单独的文本文件中，并使用**Jquery ajax() 调用呈现该文件**

**方法 C：**将此类数据存储在单独的 XML 文件中，并通过读取 XML 并构建 HTML 数据来使用**Jquery ajax() 调用呈现该数据**

那么有人可以建议我哪个是最好的方法吗？我不会在主页加载期间进行数据库交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:25:43.280

我会推荐 XML 路线。原因是如果这些内容要经常更新并显示在您的主页上，您需要一种相对受限的数据格式。

如果您将数据存储在 HTML 中，那么您将存储结构数据和可能的图形数据以及要显示的实际文本。这使修改器能够更改（或意外破坏）您的内容的外观。

如果您将数据存储为原始文本，则没有给定的格式可以遵循。如果您需要文章的标题、作者和文本来发布，则没有预定义的模板说明此人必须包含这些数据。

存储为 XML 解决了这两个问题。您可以只存储内容，然后在您的页面上将其解析为您（页面作者）预定义的 HTML 元素。此外，您可以指定一种文档格式，以列出文档中允许的标签。这意味着您作为页面作者可以更好地控制将发送给您的数据类型。

# android - 如何为动态创建的文本视图设置 OnClickListener？

> ID：13785781
> 
> 赞同：0
> 
> 时间：2012-12-09T08:20:17.620
> 
> 标签：android

我创建了文本视图行，并且我想创建一个 OnClickListener 以便在单击它们时返回文本。我有这样的事情：

```
for (int i = 0; i < json.length(); i++) {
    tv1.setText("Some text");

    public boolean onLongClick(View v) {
        //something should go here
    }

    tableLayout.addView(tv1);
} 
```

我应该怎么做才能在执行 onLongClick 时获得对我正在选择的 textView 的引用，而不是我添加的最后一个？我不能只在 onLongClick 中调用 tv1，因为它不是静态的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:34:26.843

设置监听器`TextView`并使用`onClick`回调的参数：

```
for (int i = 0; i < json.length(); i++) {
    tv1.setText("Some text");
    tv1.setOnClickListener(new OnClickListener() {

         @Override
         public void onClick(View v) {
              // v is the TextView that was clicked
              String theText =  ((TextView)v).getText().toString();
         }

    });
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:38:55.687

有一个技巧。如果我正确理解了您的问题，您可以将所有动态 TextView 放入 ArrayList 中。像下面

```
ArrayList<TextView> listTextView = new ArrayList<TextView>();

for (int=0; i<json.length; i++) {
     TextView textView = new TextView(this);
     textView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
     textView.setText("Some Text");
     textView.setOnClickListener(new OnClickListener() {

         @Override
         public void onClick(View v) {
           TextView text = (TextView) v;
           String theText = text.getText().toString();
         }

    });
    listTextView.add(textView);
} 
```

# php - 为什么for循环完全处理后会出现进度条

> ID：13785783
> 
> 赞同：1
> 
> 时间：2012-12-09T08:20:22.300
> 
> 标签：php, javascript

以下是我的脚本，我在其中放置进度条来告诉用户正在处理的工作表数据的进度问题是进度条出现在将 xls 保存到 csv 的整个过程完成后请告诉我如何修改以下内容，以便在当前工作表正在进行时进度条正确显示。谢谢，

```
 $excel = new Spreadsheet_Excel_Reader();
    $excel->setOutputEncoding('UTF-16');
    $excel->read('Student2.xls');
    $x=1;
    $sep = ",";

   $nbSheets = count($excel->sheets);
  echo $x." -  ".$nbSheets;

  $total = $nbSheets - 1;

for($i = 0; $i < $nbSheets; $i++) {

    // Calculate the percentation
    $percent = intval($i/$total * 100)."%";

    // Javascript for updating the progress bar and information
    echo '<script language="javascript">
    document.getElementById("progress").innerHTML="<div style=\"width:'.$percent.';background-color:#ddd;\">&nbsp;</div>";
    document.getElementById("information").innerHTML="'.$i.' row(s) processed.";
    </script>';

    // This is for the buffer achieve the minimum size in order to flush data
    echo str_repeat(' ',1024*64);

    // Send output to browser immediately
    flush();
    //sleep(1);

   ob_start();
    while($x<=$excel->sheets[$i]['numRows']) {
        $y=1;
        $row="";
        while($y<=$excel->sheets[$i]['numCols']) {
            $cell = isset($excel->sheets[$i]['cells'][$x][$y]) ? $excel->sheets[$i]['cells'][$x][$y] : '';
            $row.=($row=="")?"\"".$cell."\"":"".$sep."\"".$cell."\"";
            $y++;
        } 
        echo $row."\n"; 
        $x++;
    }
    $x = 1; $y = 1;
    $fp = fopen("data.csv",'a');
    fwrite($fp,ob_get_contents());
    fclose($fp);
    ob_end_clean();

}

echo "CSV file created successfully";
// Tell user that the process is completed
echo '<script language="javascript">document.getElementById("information").innerHTML="Process completed"</script>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:17:47.750

我查看了您的代码和您提到的链接。您的代码有一个不同之处，不同之处在于您注释了`sleep(1);`，并且由于仅此命令，您无法正确看到工作进度条。

所以请取消注释`sleep(1);`，您的代码将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:00:58.847

也许这可以解决您的问题：

[问题#6556790 : echo-string-while-every-long-loop-iteration-flush-not-working](https://stackoverflow.com/questions/6556790/echo-string-while-every-long-loop-iteration-flush-not-working)

另外，为什么要使用输出缓冲区写入`data.csv`文件？正如它所说，输出缓冲区用于输出数据，所以在这种情况下，我认为简单地传递函数会更合乎`$row."\n"`逻辑`fwrite`。如果我在这里遗漏了什么，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T10:06:39.650

您需要使用 AJAX 或某种客户端-服务器通信框架来实现这一点。

您可以尝试查看[此示例代码](http://www.redips.net/javascript/ajax-progress-bar/)（通过文章底部附近的链接下载代码）。

[这个 SO question](https://stackoverflow.com/questions/9878161/php-ajax-upload-progress-bar)和[this question](https://stackoverflow.com/questions/2160335/php-ajax-progress-indicator)似乎解决了类似的问题。

尽管我不想这么说，但搜索“ajax php 进度条”可能会出现大量示例。

# javascript - 使用 Cordova 的 Android 本地通知插件

> ID：13785784
> 
> 赞同：2
> 
> 时间：2012-12-09T08:20:32.697
> 
> 标签：javascript, android, cordova, localnotification

我正在尝试使用 phonegap 的[本地 Notification Plugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)来提醒通知，它会在应用程序运行时提醒通知，但我不知道如何配置它以在特定时间提醒插件。

这是执行通知操作的函数：

```
plugins.localNotification.add({ date: new Date(), message: 'Test', id: 123 }); 
```

当我试图把：

```
date: new Date(12,09,09,2,00,00) 
```

它没有显示任何警报。那么，如何修改它以使用不同的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:41:04.943

我使用适用于 Android 的[mobiscroll](http://mobiscroll.com/) DatePicker，它以这种形式返回日期时间：

```
yyyy-mm-ddThh:mm:ssZ. 
```

所以，它与插件使用的形式不同...... [关于如何升级插件以使用 2.2 检查[这个](https://stackoverflow.com/questions/13720071/cordova-local-notification-android-plugin-2-2-upgrade)问题]

所以我尝试了这个解决方案来在特定日期提醒通知：

```
 if (typeof plugins !== "undefined")
                       {
                        var RId = 0;
                        var rDate =new Date();
                        var RemDate = reminder_deadline.split("T")[0];
                        var RemTimeB = reminder_deadline.split("T")[1];
                        var RemTime = RemTimeB.split("Z")[0];
                        var RYear = RemDate.split("-")[0];
                        var RMonth = RemDate.split("-")[1];
                        var RMonth = RMonth-1;
                        var RDay = RemDate.split("-")[2];
                        var RHour = RemTime.split(":")[0];
                        var RMinute = RemTime.split(":")[1];
                        var RSecond = RemTime.split(":")[2];
                        alert(RYear+".."+RMonth+".."+RDay+".."+RHour+".."+RMinute+".."+RSecond);
                        rDate.setFullYear(RYear);
                        rDate.setMonth(RMonth);
                        rDate.setDate(RDay);
                        rDate.setHours(RHour);
                        rDate.setMinutes(RMinute);
                        rDate.setSeconds(RSecond);
                        plugins.localNotification
                        .add({ 
                            date: rDate,
                            message: reminder_name, 
                            id: RId
                             });
                             }
                             RId++;
             } 
```

希望能帮助到你 ：）

# html - Phonegap - Android 虚拟键盘和文本字段可见性问题

> ID：13785786
> 
> 赞同：1
> 
> 时间：2012-12-09T08:20:41.270
> 
> 标签：html, css, cordova, jquery-mobile, android-keypad

我正在使用 JQuery Mobile 为 android 创建一个 Phonegap 应用程序。我有一个特定页面，用户需要在其中注册并发送表格。但是，我在页面底部的文本字段中遇到了一个非常奇怪的问题。当 android 虚拟键盘弹出打开时，它隐藏了我的文本字段，用户将无法看到他/她正在输入的内容。

任何人都可以建议我可以做什么，以便始终可见具有焦点的文本字段吗？另外，有没有一种方法可以让当用户从 android 虚拟键盘单击下一步/转到时，焦点会转到下一个文本字段？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:12:13.823

我找到了解决方案。

只需将以下内容添加到清单中即可：)：

活动 android:windowSoftInputMode="adjustResize" />

# c# - 尝试上传重图像时出现“连接已重置”浏览器错误

> ID：13785787
> 
> 赞同：1
> 
> 时间：2012-12-09T08:20:56.480
> 
> 标签：c#, asp.net, file-upload, jpeg

我正在尝试从 ASP:fileupload 控件上传图片。当用户从本地磁盘中选择 JPG 文件并单击按钮时，它将上传到服务器。

这工作正常并按预期上传图片。

但是，当用户提供像 8MB 这样的重图像时，浏览器会出现错误。

```
The connection was reset. The connection to the server was reset while the page was loading. 
```

我调试代码并尝试找出发生的位置。但是我无法指出这个问题。它也不会触发页面加载事件或按钮单击事件。

请帮助我避免此错误或在文件上传图像之前验证文件大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:25:43.150

尝试在 web.config 中设置这些（如果文件上传旁边有一个嵌套的，那么有两个）：

```
<system.web>
      <httpRuntime maxRequestLength="16384" executionTimeout="120" />
    </system.web> 
```

上述设置意味着：所有数据（帖子、文件等）的最大请求长度为 16 MB，请求将在 120 秒后超时。当然，您可以调整这些值。

# emacs - Emacs 告诉 IDO 从哪里开始搜索

> ID：13785790
> 
> 赞同：0
> 
> 时间：2012-12-09T08:21:10.630
> 
> 标签：emacs, ido

我在 emacs 中使用 IDO 有一段时间了，但它开始在 /usr/bin 文件夹中打开，而不是通常的主文件夹。我该如何改回来？

初始化文件的内容（如果有帮助的话）：

```
(add-to-list 'load-path "~/.emacs.d/")
(defun toggle-fullscreen ()
  (interactive)
  (x-send-client-message nil 0 nil "_NET_WM_STATE" 32
       '(2 "_NET_WM_STATE_MAXIMIZED_VERT" 0))
  (x-send-client-message nil 0 nil "_NET_WM_STATE" 32
       '(2 "_NET_WM_STATE_MAXIMIZED_HORZ" 0))
)
(toggle-fullscreen)
(global-linum-mode 1)
(ido-mode 1)
(setq ido-enable-flex-matching t)
(setq ido-everywhere t)
(setq inhibit-startup-message t
inhibit-startup-echo-area-message t)
(require 'recentf)
(recentf-mode 1)
(setq recentf-max-menu-items 25)
(global-set-key "\C-x\ \C-r" 'recentf-open-files)

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:inherit nil :stipple nil :background "#000000" :foreground "#ffffff" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 110 :width normal :foundry "unknown" :family "Monospace"))))
 '(highlight ((((class color) (min-colors 88) (background dark)) (:background "#2f4f4f"))))
 '(hl-line ((t (:background "gray10")))))

(delete-selection-mode 1) 
(global-hl-line-mode 1) 
(setq make-backup-files nil) 
(setq auto-save-default nil) 
(global-visual-line-mode 1) 
(setq TeX-auto-save t)
(setq TeX-parse-self t)
(setq-default TeX-master nil)
(load "tabbar")
(tabbar-mode 1)
(load "bar-cursor")
(bar-cursor-mode 1)
(setq deft-directory "~/Dropbox/")
(setq deft-extension "org") (setq deft-text-mode 'org-mode)
(global-set-key [f8] 'deft)
(setq deft-use-filename-as-title t)
(require 'screenwriter)
(global-set-key (kbd "<f7>") 'screenwriter-mode)
(setq auto-mode-alist (cons '("\\.scp" . screenwriter-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.screenplay" . screenwriter-mode) auto-mode-alist))
(load "prelude-packages") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:16:00.867

使用`M-x cd`. 它改变了`default-directory`, 是本地缓冲区（每个缓冲区可以有不同的值），对于有文件的缓冲区，它默认为缓冲区文件的目录。我想您可以遍历所有缓冲区以设置所有缓冲区`default-directory`，但这听起来像是倒退了一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:46:33.263

在我看来，当打开一个新文件（Cx Cf）时，它将从当前缓冲区的目录开始。

当然，由于更改的自定义设置，您可能会有一些默认设置。由于您没有发布任何与您的配置相关的内容，我建议您执行以下操作：

1.  检查您的 .emacs / .emacs.d/init.el 文件以自定义默认目录位置
2.  检查custom.el
3.  使用 Mx customize-group 完成 ido 自定义

如果一切都失败了，也许您可​​以发布一些您最近的配置更改？

希望能帮助到你，

阿尔让

# php - 使用变体 PHP MySql 将记录复制到同一个表中

> ID：13785792
> 
> 赞同：2
> 
> 时间：2012-12-09T08:21:11.810
> 
> 标签：php, mysql

一直在寻找这方面的例子，但显然我不太了解术语来找到答案：

利用 PHP / MySql，我试图在编辑部分数据时复制表中的记录。

有一个看起来像这样的现有表“信息”：

```
1 ID - Int11 AutoIncrement

2 elementID - Int11 Unique

3 text - text utf8

4 loopID - Int11

5 created - datetime

6 modified - datetime 
```

“elementID”和“loopID”字段都包含最后四位数字表示嵌入标识符的值，在这种情况下是系统中的“页面”。例如：

页面 '9000' elementID 记录为

```
100019000
100029000
100039000 
```

和页面 '9000' loopID's 记录为

```
1009000
1019000
1029000 
```

页面'9001' elementID 的记录被记录为

```
100019001
100029001
100039001 
```

和页面 '9001' loopID 的记录被记录为

```
1009001
1019001
1029001 
```

希望你明白这一点。

我想要做的是当创建一个新页面时（例如在这种情况下为 9002），最终用户可以选择复制前一页中的所有记录数据（例如在这种情况下他们想要复制 9001）。

在我深入研究之前，我真的需要了解最好的方法是什么。

起初我想我想将所有匹配 9001 的记录查询到一个数组中，替换 elementID 中的所有最后 4 位 9001 并用 9002 循环，将“创建”和“修改”日期替换为今天，然后写生成的数组作为新条目返回数据库？如果是这样，在查询期间或写回数据库期间应该在什么时候进行替换？

然后，当我开始进一步思考时，这让我想知道是否应该以类似于此的方式来完成：

```
INSERT INTO information...
SELECT REPLACE... 
FROM information
[WHERE ..] 
```

我可以看到其中涉及到足够多的元素，对于像我这样的数据库业余爱好者来说，生成它并不容易......如果有人能指出这个过程的适当示例，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:34:47.780

类似的东西

```
declare newId int;
declare copyFromId int;
declare diff int;

set newId := 9002;
set copyFromId := 9001;
setdiff := newId - copyFromId; -- in this case it will be 1

select into your_table 
  select null,
         elementID + diff, -- so for 100019000 it will be 100019001
         text,
         loopID + diff, -- same as above
         now(),
         now()         
    from your_table
   where elementID mod 10000 = copyFromId; -- all lines with en elementId ending in copyFromId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:37:22.807

我认为您的第一个想法是可以接受的。

从数据库中提取您要复制的所有记录，然后在对数据进行更改后在数据库上执行查询以将这些记录重新添加。除非您需要进行 10,000 次查询，否则这将非常快。

在 SQL 语句本身中执行此操作将非常复杂且没有必要。它可能是一个存储过程，但最好的地方是在你的`php`.

# c# - 验证失败后无法删除文件错误：“进程无法访问文件...”（SwfReader 库）

> ID：13785793
> 
> 赞同：0
> 
> 时间：2012-12-09T08:21:14.070
> 
> 标签：c#, asp.net, webforms

我正在使用以下[教程链接](http://www.codeproject.com/Articles/16834/How-to-create-a-simple-SWF-decompiler-with-the-Swf)在我的 Web 项目中使用它，以便我可以在`.swf`扩展名中验证 Flash 文件的高度和宽度。

我上传闪存文件并检查所需的高度和高度，如果它不在所需的尺寸内，那么我必须删除文件并显示用户验证错误消息。

删除文件时，它会生成以下错误消息

`The process cannot access the file 'C:\PROJECTS\xyz\images\banners\file.swf' because it is being used by another process.`

我使用以下 Close & dispose 方法来释放对象，但它仍然会产生错误。我注意确定使用哪种方法来释放对象，以便如果文件不在所需的域中，我可以删除文件

示例代码

```
 //Upload files
  string path = Server.MapPath("../images/banners/") + fileName;
  FileUploadBanner.PostedFile.SaveAs(path);
  Session["bannerImage"] = fileName.ToString();
    try
    {
            SwfReader swfReader = new SwfReader(path);
            Swf swf = swfReader.ReadSwf();
            int swfHeight =    swf.Header.Height;
            int swfWidth = swf.Header.Width;
            swfReader.Close();
            ((IDisposable)swfReader).Dispose();

            //   ((IDisposable)swfReader).Dispose();
               if ((swfHeight > int.Parse(hdnBannerHeight.Value)) || (swfWidth > int.Parse(hdnBannerWidth.Value)))
              {
                    lblImageUploadMessage1.Text = "File cant be upload as it has invalid dimensions";
                    lblImageUploadMessage1.CssClass = "lblErrorMSG";
                    Session["bannerImage"] = null;
                    if (System.IO.File.Exists(path)) { System.IO.File.Delete(path); }
                 }
              }
        catch (Exception ex)
          { }
        finally
       {
         //((IDisposable)swfReader).Dispose();

       } 
```

上传图片和flash文件的完整代码

```
 try
    {
        lblImageUploadMessage1.Text = "";
        String filePath = string.Empty;
        String CurrentGUID = Guid.NewGuid().ToString();
        string errMsg = string.Empty;

        if (FileUploadBanner.HasFile)
        {
            string fileName = System.IO.Path.GetFileName(FileUploadBanner.FileName);
            System.IO.FileInfo f = new System.IO.FileInfo(FileUploadBanner.PostedFile.FileName);
            double fileSize = (double)FileUploadBanner.FileBytes.Length;
            if (fileSize < 1024000) // 1 MB current size size in bytes 102400=100kb  512000 = 500kb
            {
                if ((f.Extension.ToLower() == ".jpg") || (f.Extension.ToLower() == ".png") || (f.Extension.ToLower() == ".gif") || (f.Extension.ToLower() == ".jpeg") || (f.Extension.ToLower() == ".swf"))
                {
                    fileName = CurrentGUID + f.Extension;
                    string fExtension = f.Extension.ToString();
                    filePath = Server.MapPath("../images/banners/") + fileName;

                    if (System.IO.File.Exists(filePath))
                    {
                        return;
                    }
                    else
                    {
                        //Upload files
                        string path = Server.MapPath("../images/banners/") + fileName;
                        FileUploadBanner.PostedFile.SaveAs(path);
                        Session["bannerImage"] = fileName.ToString();
                        errMsg = "Banner Uploaded Successfully";
                        lblImageUploadMessage1.Text = errMsg;
                        lblImageUploadMessage1.CssClass = "lblMSG";
                        if (f.Extension.ToLower() != ".swf")
                        {
                            System.Drawing.Image imgInfo = System.Drawing.Image.FromFile(filePath);
                            int imgH = imgInfo.Height;
                            int imgW = imgInfo.Width;
                            imgInfo.Dispose();
                            //Check Dimension of image & delete image if height,width is greater than specified  dimension
                            if ((imgH > int.Parse(hdnBannerHeight.Value)) || (imgW > int.Parse(hdnBannerWidth.Value)))
                            {
                                lblImageUploadMessage1.Text = "File cant be upload as it has invalid dimensions";
                                lblImageUploadMessage1.CssClass = "lblErrorMSG";
                                Session["bannerImage"] = null;
                                if (System.IO.File.Exists(path)) { System.IO.File.Delete(path); }
                            }
                        }
                        //If Flash object
                        else
                        {
                           try{

                               lblImageUploadMessage1.Text = "You cant upload flash banner";
                               lblImageUploadMessage1.CssClass = "lblErrorMSG";

                               /* Not using below case as i not able to dispose the swfReader object which can result in unnecessary memory*/

                               ////// Create a swf stream reader
                               ////SwfReader swfReader = new SwfReader(path);
                               ////// Read the completed swf file
                               ////Swf swf = swfReader.ReadSwf();
                               ////// Read only headers of file to optimize read speed
                               //////Swf swf = swfReader.ReadSwfHeader();
                               ////int swfHeight = swf.Header.Height;
                               ////int swfWidth = swf.Header.Width;
                               ////swfReader.Close();
                               ////if ((swfHeight > int.Parse(hdnBannerHeight.Value)) || (swfWidth > int.Parse(hdnBannerWidth.Value)))
                               ////{
                               ////    lblImageUploadMessage1.Text = "File cant be upload as it has invalid dimensions";
                               ////    lblImageUploadMessage1.CssClass = "lblErrorMSG";
                               ////    Session["bannerImage"] = null;
                               ////    if (System.IO.File.Exists(path)) { System.IO.File.Delete(path); }
                               ////}

                           }
                           catch (Exception ex)
                           {
                               lblErrorMessages.Text = ex.Message.ToString();
                           }
                           finally
                           {
                               //((IDisposable)swfReader).Dispose();
                           }

                        }

                    }
                    return;
                }
                //client-side error
                else
                {
                    errMsg = "File must be an Image type of .jpg, .png, .gif, .jpeg, .swf";
                    lblImageUploadMessage1.Text = errMsg;
                    return;
                }
            }
            else
            {
                errMsg = "File size is greater the 1MB";
                //client-side error
                lblImageUploadMessage1.Text = errMsg;
                return;
            }
        }
        else
        {
            errMsg = "Cant Upload File due to some error";
            //client-side error
            lblImageUploadMessage1.Text = errMsg;
            return;
        }
    }
    catch (Exception ex)
    {
        //Response.Write("ERROR MESSAGE : " + ex.Message.ToString());
        lblErrorMessages.Text = "ERROR MESSAGE : " +  ex.Message.ToString();
    }

} 
```

# tfs - 如何恢复 TFS 中的回滚更改

> ID：13785797
> 
> 赞同：3
> 
> 时间：2012-12-09T08:21:43.573
> 
> 标签：tfs

**这是场景：**

*   我对代码库进行了更改，将其带到了变更集 10。
*   我回滚了变更集 10，使得变更集 11 是 10 的回滚。
*   其他人所做的更改使代码库达到了变更集 20。

现在我有兴趣恢复我在变更集 10 中所做的更改。

**问题：**在 TFS 2012 中执行此操作的最佳方法是什么？

**我尝试过的事情：**从变更集 10 创建一个分支，然后尝试将其合并回主分支。TFS 表示没有要合并的更改。

PS 假设变更集 10 中的变更，以及变更集 20 之前的变更，跨越数十到数百个文件，因此这里最好采用相对自动化的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:22:05.297

用于`get specific version`获取版本 10。
检查文件（确保您仍有 v10）。
`Get latest version`合并更改。
报到。

如果上述方法失败，那么您可能需要执行额外步骤以确保您拥有正确的版本：
获取特定版本，v10
备份文件签
出
恢复您的备份
获取最新，合并，签入。

另一种选择是获取变更集中文件的历史记录，并（逐个文件）在两个版本之间进行比较（只需选择历史记录中的任意两个版本，然后从上下文菜单中进行比较）。然后手动应用必要的更改以恢复 v10 行为。如果更改很小，这可能是一种更简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:09:38.163

在团队项目的根目录中打开命令提示符

> tf 差异 /version:c9~C10 。/递归 /格式：统一

然后检查您的整个项目（仅当您使用服务器工作区时才需要）

使用第 3 方工具应用统一差异，不幸的是内置工具似乎不支持应用差异。

查看您的更改，如果需要，您可以运行以下命令来撤消对尚未编辑的文件的签出

> tfpt uu /noget

# sql-server-2008 - 在存储过程中循环数据表

> ID：13785798
> 
> 赞同：1
> 
> 时间：2012-12-09T08:21:45.713
> 
> 标签：sql-server-2008, tsql, c#-4.0

我有一个存储过程，必须单击一次按钮输入超过 8000 行，用于关闭员工的日常考勤。

我计划将输入作为数据表发送到存储过程，而不是每次都逐行发送

我设法创建了一个表类型用户定义类型并使用具有该用户定义类型的参数作为输入参数

```
 USE [ATCHRM.MDF]
GO

/****** Object:  UserDefinedTableType [dbo].[employeeswipedclose123]    Script Date: 12/11/2012 12:04:34 ******/
CREATE TYPE [dbo].[employeeswipedclose123] AS TABLE(
    [empid] [int] NULL,
    [datetoday] [datetime] NULL,
    [Swipepk] [int] NULL
)
GO
  CREATE PROCEDURE dbo.CloseAttendance (@closingemployee dbo.employeeswipedclose123 READONLY )
AS
BEGIN

   MERGE EmployeSwipeDaily_tbl AS Target

   USING @closingemployee AS Source

   ON (Target.empid = Source.empid) and (Target.Date = Source.datetoday)

   WHEN MATCHED THEN 
       BEGIN 
           UPDATE    Target
            SET Target. IsCompleted = N'Y'
             WHERE     (Source.swipePK = Target.Swipepk) AND (Source.empid = Target.empid) AND (Target.Date = Source.datetoday)   

         WHEN NOT MATCHED THEN

       INSERT INTO Target
       (empid, Swipin, SwipeOut, Date, Duration, deviceid, InStatus, Outstatus, Invalue, OutValue, IsCompleted, CompletedDate)
        VALUES     (@empid, CONVERT(DATETIME, ' 00:00:00', 102), CONVERT(DATETIME, ' 00:00:00', 102),@datetoday, CONVERT(DATETIME, 
                      ' 00:00:00', 102), 0, N'A', N'A', 0, 0, N'Y',(select GETDATE()) )

END

GO 
```

但现在我想要的是在存储过程中我想循环`Datatable`并检查一个条件

比如像这样

```
for(int i=0 ;i<dt.count;i++)
{
   if(dt.rows[i][swipepk]==0)
   {
       insert into employe swipe tbl()
   }
   else 
   {
       update employee tbl
   }
} 
```

谁能建议一个更好的解决方案来循环存储过程中的数据表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T08:53:47.800

由于您使用的是 SQL Server 2008 - 这**正是**使用该`MERGE`语句的场景！无需循环或任何需要 - 只需一条`MERGE`语句即可！

```
CREATE PROCEDURE dbo.CloseAttendance (@closingemployee dbo.Employeedata READONLY)
BEGIN
   -- this is the target of your MERGE - where the data is supposed to go
   MERGE dbo.Employees AS Target
   -- this is the source where the data to be merged comes from
   USING @closingemployee AS Source
   -- set up a "join" condition for those two sets of data
   ON Target.empid = Source.empid
   -- now define what to do when that JOIN condition matches
   WHEN MATCHED THEN 
       UPDATE 
          SET Target.SomeColumn = Source.Swipepk  --- or WHATEVER you need to update here!
   -- now define what to do when that JOIN condition DOES NOT match (e.g. new employee)
   WHEN NOT MATCHED THEN
      INSERT(EmpId, CategoryName, Swipepk)
      VALUES(Source.EmpId, Source.CategoryName, Source.Swipepk) ;
END 
```

当然，您还可以做其他事情 - 如果需要，您可以定义更多匹配/不匹配标准。

该`MERGE`语句运行一次，并且一次完成所有工作 - 没有循环，没有 RBAR（逐行痛苦）处理 - 没有那种类型。一个不错的、快速的、基于集合的语句，你就完成了！

**更新：**从您更新的问题中，我看到您的陈述中有**三个**主要错误：`MERGE`

```
 WHEN MATCHED THEN 
    BEGIN                                 <=== ERROR #1 : you CANNOT have a BEGIN here!
        UPDATE Target
        SET Target.IsCompleted = N'Y'
        WHERE (Source.swipePK = Target.Swipepk)  <=== ERROR #2 : you CANNOT have 
          AND (Source.empid = Target.empid)                      additional WHERE 
          AND (Target.Date = Source.datetoday)                   clause on the UPDATE

WHEN NOT MATCHED THEN
   INSERT INTO Target              <=== ERROR #3: you CANNOT define a INSERT INTO ....
                                      the "INTO" table is already a given by the MERGE
   (empid, Swipin, SwipeOut, Date, Duration, deviceid, InStatus, Outstatus, Invalue, OutValue, IsCompleted, CompletedDate)
    VALUES     (@empid, CONVERT(DATETIME, ' 00:00:00', 102), CONVERT(DATETIME, ' 00:00:00', 102),@datetoday, CONVERT(DATETIME, 
                  ' 00:00:00', 102), 0, N'A', N'A', 0, 0, N'Y',(select GETDATE()) ) 
```

# jquery - 当元素具有 .focus 时触发 Jquery 函数

> ID：13785799
> 
> 赞同：0
> 
> 时间：2012-12-09T08:21:54.870
> 
> 标签：jquery

我有一个 this 函数，它在表单下拉框有焦点时触发 .cascade 函数，这工作正常，但它只在第一次加载页面时工作。

```
jQuery(document).ready(function($){
$('#country_select').focus(function() {
$('#country_select').cascade();
});
}); 
```

因此，当您单击元素以使其获得焦点时，该功能不会运行...

我该如何编码，以便每次有人单击该元素或该元素具有焦点时它都会运行..？

我可以使用任何事件处理程序，如果单击#country_select 元素，我只需要运行.cascade 函数......？

有任何想法吗...？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:49:32.803

在查看 jquery-cascade 的源代码后，我相信它没有被正确使用。无需将其绑定到焦点或作为事件处理程序绑定到选择。它处理绑定事件处理程序到父选择本身。

以下应该有效：

```
jQuery(document).ready(function($) {
    $('#country_select').cascade();
}); 
```

# css - 在 tinyMCE 编辑器中更改粗体图标

> ID：13785802
> 
> 赞同：1
> 
> 时间：2012-12-09T08:22:43.937
> 
> 标签：css, tinymce

我想将 tinyMCE 编辑器中的粗体图标文本更改为“Bold”而不是“B”！那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:09:22.783

是的，这是可能的。例如，对于简单的主题，您必须将图像更改为：

![在此处输入图像描述](../Images/e41afb79dd55bd6ea412e84b3918635f.png)

如果添加图像，则必须更改粗体宽度和其他元素背景位置偏移量，为此您必须更改此主题的 UI css，例如：

原来的：

```
/* Theme */
.defaultSimpleSkin span.mce_bold {background-position:0 0;}
.defaultSimpleSkin span.mce_italic {background-position:-60px 0}
.defaultSimpleSkin span.mce_underline {background-position:-140px 0}
.defaultSimpleSkin span.mce_strikethrough {background-position:-120px 0}
.defaultSimpleSkin span.mce_undo {background-position:-160px 0}
.defaultSimpleSkin span.mce_redo {background-position:-100px 0}
.defaultSimpleSkin span.mce_cleanup {background-position:-40px 0}
.defaultSimpleSkin span.mce_insertunorderedlist {background-position:-20px 0}
.defaultSimpleSkin span.mce_insertorderedlist {background-position:-80px 0} 
```

编辑：

```
/* Theme */
.mce_bold{width: 40px !important;}
.defaultSimpleSkin span.mce_bold {background-position:0 0;width:40px !important;}
.defaultSimpleSkin span.mce_italic {background-position:-90px 0}
.defaultSimpleSkin span.mce_underline {background-position:-170px 0}
.defaultSimpleSkin span.mce_strikethrough {background-position:-150px 0}
.defaultSimpleSkin span.mce_undo {background-position:-190px 0}
.defaultSimpleSkin span.mce_redo {background-position:-130px 0}
.defaultSimpleSkin span.mce_cleanup {background-position:-70px 0}
.defaultSimpleSkin span.mce_insertunorderedlist {background-position:-50px 0}
.defaultSimpleSkin span.mce_insertorderedlist {background-position:-110px 0} 
```

我为此添加了图像空间，我强制将 30px 添加到所有背景位置以修复添加的新空间。之后你就可以享受这种形式了：D

如果你说我的话，我会附上编辑过的文件。

# controller - Yii 从控制器获取 url 部分

> ID：13785803
> 
> 赞同：2
> 
> 时间：2012-12-09T08:22:55.263
> 
> 标签：controller, yii, rewrite, slug

我有这样的**URL 规则**：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'rules'=>array(
        '' => 'site/index',
        '<controller:pages>/<slug>' => '<controller>/inPage',
    ),
    'showScriptName'=>false,
), 
```

在行动中，我可以得到像争论一样的蛞蝓

```
public function actionInPage($slug)
{
    echo$slug;
} 
```

但是如何从主控制器（*protected/components/controller.php*）或*控制器视图*中获取该参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:01:15.647

在视图中，您可以将 $slug 作为控制器的参数传递..

顺便说一句，在控制器和视图中，您应该能够通过`$_GET['slug']`..访问 slug。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:34:15.867

尝试以下推荐的方式框架。

```
Yii::app()->request->getParam('slug'); 
```

# c# - 如何使用 javascript 为 asp.net 网站创建水平下拉菜单？

> ID：13785806
> 
> 赞同：0
> 
> 时间：2012-12-09T08:23:29.117
> 
> 标签：c#, javascript, asp.net, css, drop-down-menu

我正在使用**母版页**开发我的网站，该母版页没有任何菜单，但我想为其中一个**内容页面**创建一个 javascript 菜单，该页面将导航到其他页面，相同的菜单总是出现在那里。

我正在使用 c# 和 asp.net 那么如何做到这一点并使这个菜单也固定在所有选定的项目中（并查看某些 css 选择了哪一个）。

我希望我能很好地描述我需要什么，因为我很困惑很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:34:03.807

你不需要 JS。有很多解决方案，您只是没有使用正确的关键字。尝试搜索：*水平下拉菜单 css*

第一步是创建一个嵌套的 ul-li-ul-li 结构：

```
<ul id="coolMenu">
    <li><a href="#">Lorem</a></li>
    <li><a href="#">Mauricii</a></li>
    <li>
        <a href="#">Periher</a>
        <ul>
            <li><a href="#">Hellenico</a></li>
            <li><a href="#">Genere</a></li>
            <li><a href="#">Indulgentia</a></li>
        </ul>
    </li>
    <li><a href="#">Tyrio</a></li>
    <li><a href="#">Quicumque</a></li>
</ul> 
```

然后应用一些 CSS 规则。

```
#coolMenu,
#coolMenu ul {
    list-style: none;
}
#coolMenu {
    float: left;
}
#coolMenu > li {
    float: left;
}
#coolMenu li a {
display: block;
    height: 2em;
    line-height: 2em;
    padding: 0 1.5em;
    text-decoration: none;
}
#coolMenu ul {
    position: absolute;
    display: none;
z-index: 999;
}
#coolMenu ul li a {
    width: 80px;
}
#coolMenu li:hover ul {
    display: block;
} 
```

更多代码：[http ://www.cssnewbie.com/horizo​​ntal-dropdown-menus/](http://www.cssnewbie.com/horizontal-dropdown-menus/)

其他解决方案：http: [//matthewjamestaylor.com/blog/centered-dropdown-menus](http://matthewjamestaylor.com/blog/centered-dropdown-menus)

# objective-c - 方法效果不佳

> ID：13785807
> 
> 赞同：0
> 
> 时间：2012-12-09T08:23:35.810
> 
> 标签：objective-c, pointers, parameters, static-methods

我是 iPhone 开发的新手，对 C 风格的编程（即指针）非常生疏。我创建了一个 RGBColor 类，其中包含红色、绿色和蓝色的三个整数。在这个类中，我有一个静态方法来为三个 RGB int 值返回一个 UIColor。我使用该方法从三个滑块更改背景颜色。

这是静态方法：

```
+(UIColor *)getColorFromRed:(int)redValue green:(int)greenValue blue:(int)blueValue
{
    UIColor *color = [[UIColor alloc]initWithRed:redValue/256
                                           green:greenValue/256
                                            blue:blueValue/256
                                           alpha:1.0];
    return color;
} 
```

我最初是这样编写方法的，但是当它不起作用时改变了它：

```
+(UIColor *)getColorFromRGB:(int)redValue :(int)greenValue :(int)blueValue
{
    UIColor *color = [[UIColor alloc]initWithRed:redValue/256
                                           green:greenValue/256
                                            blue:blueValue/256
                                           alpha:1.0];
    return color;
} 
```

根据我的理解，第一种或第二种都是编写方法的有效方式。

现在，我使用该方法通过 changeBackgroundColor 函数更改视图中的背景颜色，但它不起作用：

```
- (void)changeBackgroundColor
{
    UIColor *color = [RGBColor getColorFromRed:redSlider.value
                                         green:greenSlider.value
                                          blue:blueSlider.value];

    [background setBackgroundColor:color];
} 
```

如果我完全绕过我的静态方法，只让 changeBackgroundColor 方法创建 UIColor，背景颜色就会改变。

```
- (void)changeBackgroundColor
{
    UIColor *color = [[UIColor alloc]initWithRed:redSlider.value/256
                                           green:greenSlider.value/256
                                            blue:blueSlider.value/256
                                           alpha:1.0];

    [background setBackgroundColor:color];
} 
```

这个问题很容易解决：只是不要使用静态方法。我只是不明白为什么它不起作用。是否有某种指针与对象传输我弄乱了返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:33:44.113

你的问题是滑块的值是类型的`float`，当你将它传递给你的静态方法时，它们被转换为类型`int`（因为参数类型是`int`），这意味着当你除以 256 时，结果被截断为零，因为你是`int`用 and划分一个`int`（我假设你的滑块值总是 < 256，所以整数部分总是为零）。

只需将您的静态方法参数类型更改为`float`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T08:34:50.260

int/int 给整数.... 类型 case 要么 1 浮动，所以 0.0 到 1.0 的值会出现，否则 255/256 会给你 0，acutally 它会是 0.9 的东西，因为目标是 int，只有整数部分会是考虑，结果为0。

```
+(UIColor *)getColorFromRGB:(float)redValue :(float)greenValue :(float)blueValue
{
    UIColor *color = [[UIColor alloc]initWithRed:redValue/256.0
                                           green:greenValue/256.0
                                            blue:blueValue/256.0
                                           alpha:1.0];
    return color;
} 
```

# jquery - 你能得到第一个子 div 的样式并将其附加到父级然后删除所有 div

> ID：13785809
> 
> 赞同：1
> 
> 时间：2012-12-09T08:24:08.707
> 
> 标签：jquery

我正在使用的程序可以用 div 包装图像，
并且可以将其命名为 ID，如下所示：

```
<div id="caro" style=" position:absolute; top:0px; left:0px; width:602px; height:0px;  z-index:2;">

          <div id="SGROBJ7DCC09717112EB0" style=" position:absolute; top:68px; left:148px; width:602px; height:200px;  z-index:3;">
            <img src="Untitled_1/goim003.jpg" width=602 height=200 border=0 alt="">
          </div>

          <div id="SGROBJ7DCC09717112FF0" style=" position:absolute; top:68px; left:148px; width:602px; height:200px;  z-index:4;">
            <img src="Untitled_1/goim004.jpg" width=602 height=200 border=0 alt="">
          </div>

          <div id="SGROBJ7DCC09717113140" style=" position:absolute; top:68px; left:148px; width:600px; height:200px;  z-index:5;">
            <img src="Untitled_1/goim005.jpg" width=600 height=200 border=0 alt="">
          </div>
 </div> 
```

我想从第一个孩子那里获得这种风格并将其附加到父 #caro div
然后删除图像周围的所有 div。（那些 SGROBJ ...... ID 的变化）
然后我可以将这些用于轮播
**所以我想结束：**

```
<div id="caro" style=" position:absolute; top:68px; left:148px; width:602px; height:200px;  z-index:3;">
            <img src="Untitled_1/goim003.jpg" width=602 height=200 border=0 alt="">
            <img src="Untitled_1/goim004.jpg" width=602 height=200 border=0 alt="">
            <img src="Untitled_1/goim004.jpg" width=602 height=200 border=0 alt="">
            <img src="Untitled_1/goim005.jpg" width=600 height=200 border=0 alt="">
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:35:55.237

你的意思是这样的：

```
var childStyle = $("div#caro > div:first").attr("style");
$("div#caro").attr("style", childStyle);
$("div#caro").find("img").each(function() {
    $(this).unwrap("div");
}); 
```

[jsFiddle](http://jsfiddle.net/Sj6rq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T08:37:00.030

要应用第一个孩子的样式：

```
$('#caro').attr('style', $('#caro > div:first').attr('style')); 
```

要删除 DIV，使图像保持不变：

```
$('#caro > div > img').unwrap(); 
```

一句话概括：

```
$('#caro').attr('style', $('#caro > div:first').attr('style')).find('div > img').unwrap(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T08:41:29.927

```
$('#caro').attr('style', $('#caro').children('div').first().attr('style'))
  .children('div').each(function(i,elem) {
      $(elem).replaceWith($('img', elem));
}); 
```

[**小提琴**](http://jsfiddle.net/g6Qxh/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T08:35:00.590

尝试：

```
function removeDiv(){
    var imgs = $('#caro').find('img').clone();
    console.log(imgs);
    $('#caro').empty();
    $('#caro').append(imgs);
} 
```

# sql - 整理错误

> ID：13785814
> 
> 赞同：43
> 
> 时间：2012-12-09T08:25:02.150
> 
> 标签：sql, sql-server-2008-r2

我正在使用 Microsoft SQL Server Management Studio。我有两个数据库，一个是系统数据库，它有主数据库，另一个是我的数据库，称为`CCTNS_CAS_DE_DB`. 当我尝试通过使用`CCTNS_CAS_DE_DB`数据库的工具生成报告时。

我收到以下错误：

> *无法解决等于操作中“Latin1_General_CI_AI”和“SQL_Latin1_General_CP1_CI_AS”之间的排序规则冲突*

我浏览了 SQL Server 并检查了主数据库的属性，它显示排序规则，`Latin1_General_CI_AI`但是当我转到`CCTNS_CAS_DE_DB`数据库的属性时，它显示排序规则为`SQL_Latin1_General_CP1_CI_AS`.

我在网上搜索了错误，但大多数解决方案都告诉了如何更改特定表的排序规则，但我没有遇到任何将我的数据库的排序规则更改为`Latin1_General_CI_AI`.

我遇到了一个问题：-

```
ALTER DATABASE CCTNS_CAS_DE_DB COLLATE Latin1_General_CI_AI 
```

当我在我的 SQL Server 中运行此查询时，它引发了以下错误：-

> *消息 5030，级别 16，状态 2，第 1 行
> 无法以独占方式锁定数据库以执行操作。
> 消息 5072，级别 16，状态 1，第 1 行
> ALTER DATABASE 失败。数据库“CCTNS_CAS_DE_DB”的默认排序规则不能设置为 Latin1_General_CI_AI。*

我知道这个问题已经在这里发布，但我认为那是在不同的背景下。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-06-29T07:14:23.897

需要先将其设置为 SINGLE_USER。

```
ALTER DATABASE [database] SET SINGLE_USER WITH ROLLBACK IMMEDIATE; 

GO 

ALTER DATABASE [database] COLLATE SQL_1xCompat_CP850_CI_AS; 

GO 

ALTER DATABASE [database] SET MULTI_USER; 

GO 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-09T08:29:59.397

这是您问题的最大提示：

> 消息 5030，级别 16，状态 2，第 1 行 无法以独占方式锁定数据库以执行操作。

您需要做的是在运行`ALTER DATABASE`语句之前将数据库设置为单用户模式，然后在完成后将其设置回多用户模式。这将锁定数据库并使其仅可用于当前连接，这将允许您成功运行该`ALTER DATABASE ... COLLATE`语句。

您可以[使用 SQL Server Management Studio 或 T-SQL 命令](http://msdn.microsoft.com/en-us/library/ms345598.aspx)来执行此操作。

# android - 自动调整图像和 ImageView 之间的 TextView 长度

> ID：13785816
> 
> 赞同：0
> 
> 时间：2012-12-09T08:25:20.123
> 
> 标签：android, android-layout

我创建了一个`Listview`. 每行包含一个`ImageView`,`TextView`和一个`ImageButton`。无论文本长度如何，我都希望它`ImageButton`具有固定大小。`TextView's`这应该很简单，但我无法让它工作。

这是我的布局文件。

[http://i.stack.imgur.com/C3jFa.png](http://i.stack.imgur.com/C3jFa.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:padding="6dip">

<ImageView
    android:id="@+id/androidAccountImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_gravity="center_vertical"
    android:layout_marginRight="10dp"
    android:src="@drawable/droidalt" />

<TextView
    android:id="@+id/profileName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:layout_toRightOf="@id/androidAccountImage"
    android:bufferType="spannable"
    android:ellipsize="end"
    android:gravity="center_vertical"
    android:singleLine="true"
    android:text="@string/strTryDemo"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ImageButton
    android:id="@+id/androidProfileEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_gravity="center_vertical"
    android:layout_toRightOf="@+id/profileName"
    android:src="@drawable/edit_account_button" />

</RelativeLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:29:19.797

试试下面的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:padding="6dip">

<ImageView
    android:id="@+id/androidAccountImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_gravity="center_vertical"
    android:layout_marginRight="10dp"
    android:src="@drawable/droidalt" />

<ImageButton
    android:id="@+id/androidProfileEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_gravity="center_vertical"
    android:src="@drawable/edit_account_button" />

<TextView
    android:id="@+id/profileName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:layout_toRightOf="@id/androidAccountImage"
    android:layout_toLeftOf="@id/androidProfileEdit"
    android:bufferType="spannable"
    android:ellipsize="end"
    android:gravity="center_vertical"
    android:singleLine="true"
    android:text="@string/strTryDemo"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

# c++ - 如何将C++中的类对象写入文件

> ID：13785818
> 
> 赞同：-4
> 
> 时间：2012-12-09T08:25:41.367
> 
> 标签：c++

请告诉我们如何将类的对象写入文件

写入后，如果数据成员的值发生更改，那么如何在文件中更新它而不导致重复条目

在写入文件时，如果数据成员在写入时未初始化，是否会导致任何问题

文件在准确处理类对象时如何工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:28:47.333

创建一个 ofstream 对象并写入所需的路径。

如果您想更新，只需循环并寻找该对象并写入。

由于文件将以二进制创建，您无法在记事本中读取它，您必须通过 ifstream 对象将其读回并将其输出到控制台或文本文件中。

检查此链接[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)

# c# - 改进 MS 图表控件的自定义标记图像性能

> ID：13785821
> 
> 赞同：4
> 
> 时间：2012-12-09T08:26:26.913
> 
> 标签：c#, mschart, microsoft-chart-controls

我在我的 WindowsForms 应用程序中使用 MS Chart，我希望在图表上显示很多不同的标记。原则上，它是通过指定`MarkerImage`for`Series`或来完成的`DataPoint`。问题是该`MarkerImage`属性是字符串类型，[没有](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.DATAVISUALIZATION.CHARTING.DATAPOINTCUSTOMPROPERTIES.MARKERIMAGE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)关于它的使用文档。根据 MS Chart 示例，它是图像文件的路径。

我设法通过将图像放入项目/图像文件夹中，为它们指定“复制到输出目录”，然后`series.MarkerImage = "images/image.bmp";`在代码中使用来使其工作。它原则上可以工作，但在运行时，当第一次在图表上显示标记图像时，应用程序会冻结一段时间。我认为这是因为加载新文件的磁盘访问时间。每次新图像首次出现在屏幕上时都会发生这种情况，这使得应用程序在所有图像都被缓存之前真的没有响应。

我正在寻找的是一些解决方案来改善这一点。充其量我宁愿将所有图像存储为嵌入式资源，这比使用应用程序发送额外的图像文件夹要好得多。根据（具有类似含义）的[文档](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.DATAVISUALIZATION.CHARTING.LEGENDCELL.IMAGE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)，该字符串实际上是一个 URL。`LegendCell.Image`我发现可以使用 ASP.NET 应用程序获取嵌入式资源的 URL `Page.ClientScript.GetWebResourceUrl`，但我的应用程序如果只是普通的 WindowsForms。是否可以在 Windows 窗体中为嵌入的资源获取某种 URL？

我已经在考虑实现我自己的 Series 或 DataPoint 后代来处理资源引用，但似乎不是正确的方法，因为我看不到与我可以覆盖的 Series 的实际渲染相关的任何内容......

我想到的另一个解决方案是在应用程序启动时自己预加载所有图像文件，但这似乎是一个 hack。如果我想将标记与单独的程序集 (.dll) 一起提供怎么办？

**更新。**我试过了：

*   使用 File.ReadAllBytes 预加载图像。不会加速任何事情。
*   使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)。失败并出现文本“不支持给定路径的格式”的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-23T14:58:26.860

即使对您来说可能为时已晚，但这个答案可能会帮助像我这样今天遇到类似问题的人。

MSChart 控件提供了一个图像属性，它是命名图像的集合。这些图像是唯一标识符和可以从您的资源加载的图像的组合：

1.  如果尚未完成 - 创建一个资源文件并将其添加到您的项目中
2.  结合唯一标识符（例如 MyImage）将图像添加到该文件。确保将要嵌入的图像的持久性属性设置为“嵌入 .resx”
3.  在您的代码中定义您添加到 Chart.Images 集合的 NamedImages。

    NamedImage namedImage1 = new NamedImage(" **UniqueIdentifier** ", Resources.MyImage); Chart.Images.Add(namedImage1);

在您的图表中，您现在可以在通常需要图标路径的地方使用**UniqueIdentifier 。**

这可以防止从磁盘加载图像，并且可能会加速您的应用程序，因为图像被缓存为资源。

此致

# .net - 石英调度程序作业在新线程.net中为空

> ID：13785823
> 
> 赞同：3
> 
> 时间：2012-12-09T08:26:57.130
> 
> 标签：.net, quartz.net

我正在使用 .net 版本的石英。当我在线程 1 中将作业添加到调度程序时，线程 2 中不存在作业。我将调度程序包装在一个单例中并查看 HashCode 它应该是调度程序的同一实例。这似乎只发生在 IIS 中。知道它为什么会这样做吗？

# android - 如何通过影子分页更新 SQLite 数据库替换 roolback 日志

> ID：13785824
> 
> 赞同：0
> 
> 时间：2012-12-09T08:26:59.823
> 
> 标签：android, database, sqlite, database-design

Sqlite 是适用于闪存的安卓设备的原生数据库。回滚日志使用就地更新技术。由于在闪存驱动器的特定数据段上可以进行有限的写入操作，因此在它无法使用之前，影子分页（就地更新）可以延长闪存驱动器的使用寿命。

由于 sqlite 中的页面大小很小，因此影子分页可以成为回滚日志的更好选择。影子分页可以提高这些应用程序的执行速度，这是任何人在智能手机或平板电脑上寻找的重要因素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:21:43.737

在 SQLite 中，最类似于影子分页的机制称为[预写日志](http://www.sqlite.org/wal.html)；通过执行启用它`PRAGMA journal_mode=WAL;`。

与影子分页的区别在于，页面在逻辑上被原地修改（物理上，它们被写入日志），并且不时将这些修改的页面合并回实际的数据库中（称为[检查点](http://www.sqlite.org/wal.html#ckpt)）。

# gnuplot - 月抽动，如何设置

> ID：13785832
> 
> 赞同：12
> 
> 时间：2012-12-09T08:28:15.767
> 
> 标签：gnuplot

在 GnuPlot 中：

如何将 xtics 设置为每个月的第一天？

set xtics 对我不起作用，因为每月的秒数会有所不同。

```
设置 xmtics
```

对我不起作用，因为月份显示没有年份，并且没有显示月份属于哪一年。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-14T01:24:35.387

在我看来，gnuplot 处理时间的能力出奇地好。我假设您的数据采用以下（或类似）格式：

```
05/17/12    0.8188064359
05/18/12    0.97297057
05/21/12    0.9012782504 
```

我使用了一年半的随机数来测试这一点。

所以首先你需要告诉 gnuplot 你的 x 坐标是时间，它是用什么格式写的：

```
set xdata time
set timefmt "%m/%d/%y" 
```

从现在开始，gnuplot 需要指定格式的所有范围，包括`xtics`and`xrange`命令。唯一的例外是增量`xtics`应该以秒为单位。

```
set xrange ["05/01/12":"08/01/13"]
set xtics "01/01/12",2592000,"08/01/18" 
```

现在您可能会争辩说，每个月的秒数相差一整天（实际上是 2 月的 2 天）。然而，gnuplot 作者似乎也考虑到了这一点，他们按照我们的喜好解决了这个问题。换句话说，以上将确保每个月的​​第一天抽动一次。在这里，我只能建议指定打印格式`xtics`

```
set format x "%d %b %Y" 
```

这将导致“2012 年 5 月 1 日”等。在此之后，`plot`您的数据。哦，当在 x 轴上使用时间时，命令中需要 gnuplot `using`，`plot`所以即使我有一个微不足道的数据文件，我也必须使用

```
plot 'data.txt' using 1:2 
```

我使用了 gnuplot 4.6 补丁级别 0 并输出到 postscript 终端。如果您对您的版本或终端有不同的体验，请在评论中告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-28T08:30:53.103

`set xtics`如果您将秒数设置为一个月的平均秒数，则可以正常工作。

我假设平均一年有 365.2425 天，除以 12 得到每月平均天数（大约 30.4），然后乘以每天的小时数和每小时的秒数，即：

```
365.2425 / 12 * 24 * 3600 = 2629746 
```

假设您的数据格式为年月和值，即：

```
2016-01 10000
2016-02 12000
2016-03 10500 
```

然后您需要以下命令：

```
set xdata time
set timefmt "%Y-%m"
set format x "%b/%y" # Or some other output format you prefer
set xtics "2016-01", 2629746, "2016-03"
plot "mydata.dat" using 1:2 with linespoints 
```

如果您想以几个月的倍数设置 xtics，那么只需在该`set xtics`行中添加一个乘数，例如获得季度分数：

```
set xtics "2016-01", 3*2629746, "2016-12" 
```

我发现，如果我假设一个月中的天数是 30 或 31 天，那么在图表中的某个时间点，几个月会丢失它们的 xtics。

# c# - `EventLog` 日志在哪里？

> ID：13785833
> 
> 赞同：1
> 
> 时间：2012-12-09T08:28:16.680
> 
> 标签：c#, event-log, error-logging

[`EventLog`](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)日志在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:31:59.440

[您可以使用 Windows事件查看器](http://en.wikipedia.org/wiki/Event_Viewer)查看事件日志。根据ServerFault 上的[答案](https://serverfault.com/questions/70328/where-how-does-windows-store-the-data-in-the-event-logs)，实际日志位于`%SystemRoot%\System32\Config`带有`.evt`扩展名的目录中。

# c++ - 为什么我的析构函数被调用的次数比预期的要多？

> ID：13785834
> 
> 赞同：2
> 
> 时间：2012-12-09T08:28:21.920
> 
> 标签：c++, destructor

我编写了这段代码来检查 c++ 中析构函数的行为

```
#include <vector>
#include <iostream>

using namespace std;

class WrongDestructor
{
private:
    int number;
public:
    WrongDestructor(int number_) :
    number(number_)
    {}

    ~WrongDestructor() {

    cout<<"Destructor of " <<number<<endl;

//  throw int();
    }
};
int main(int argc, char *argv[])
{
    std::vector<WrongDestructor> wrongs;

    for(int i = 0; i < 10; ++i) {
    wrongs.push_back(WrongDestructor(i));
    }

    return 0;
} 
```

我发现有趣的是我的程序的输出：

```
Destructor of 0
Destructor of 0
Destructor of 1
Destructor of 0
Destructor of 1
Destructor of 2
Destructor of 3
Destructor of 0
Destructor of 1
Destructor of 2
Destructor of 3
Destructor of 4
Destructor of 5
Destructor of 6
Destructor of 7
Destructor of 0
Destructor of 1
Destructor of 2
Destructor of 3
Destructor of 4
Destructor of 5
Destructor of 6
Destructor of 7
Destructor of 8
Destructor of 9
Destructor of 0
Destructor of 1
Destructor of 2
Destructor of 3
Destructor of 4
Destructor of 5
Destructor of 6
Destructor of 7
Destructor of 8
Destructor of 9 
```

这意味着创建的对象比我想象的要多得多。当我在 for 循环中填充集合时，我希望集合中显然有 10 个，并且可能会创建下 10 个作为临时对象。但是它们的数量更多，其中一些甚至比其他更频繁地创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T08:31:02.690

当`vector`必须分配更大的内存块来保存元素时，新元素被移动构造到新的更大的内存块中。因为您的类型没有定义移动构造函数或复制构造函数，所以您将获得编译器提供的默认复制构造函数。默认的复制构造函数对类中的所有成员进行简单的成员复制。

此外，使用插入元素本身`push_back`需要将其移动或复制到`vector`. 因此，假设您的编译器没有对此进行优化，您也将在那里获得副本。（请注意，您可以使用 避免这些副本`emplace_back`。）

结果，您会提前将多个实例副本插入到容器中，因为当 eg`1`被复制到 内部的较大内存缓冲区中时`vector`，它会在旧的较小缓冲区中被销毁。

您可以通过定义复制和/或移动构造函数更清楚地看到此行为：

```
#include <vector>
#include <iostream>

using namespace std;

class WrongDestructor
{
private:
    int number;
public:
    WrongDestructor(int number_) :
    number(number_)
    {}

    // Copy constructor
    WrongDestructor(WrongDestructor const& copied)
        : number(copied.number)
    {
        cout << "Copied " << this->number << endl;
    }

    ~WrongDestructor() {

    cout<<"Destructor of " <<number<<endl;

//  throw int();
    }
};
int main(int argc, char *argv[])
{
    std::vector<WrongDestructor> wrongs;

    for(int i = 0; i < 10; ++i) {
    wrongs.push_back(WrongDestructor(i));
    }

    return 0;
} 
```

该程序提供以下输出：http: [//ideone.com/S5Zf41](http://ideone.com/S5Zf41)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T08:30:42.200

您的向量没有预先确定的大小。当您将对象推回向量时，它必须重新分配向量本身以容纳新条目。这意味着将对象从内存缓冲区复制到新缓冲区。因此，您会在执行此操作时看到更多副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T08:32:50.507

您可以使用`std::vector::reserve`为向量分配足够的空间。否则，向量需要为传入元素重新分配连续空间，这会导致大量副本。

```
std::vector<WrongDestructor> wrongs;
wrongs.reserve(10); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T08:42:22.747

是的，看起来你在向量中添加了 10 个对象，但实际上又创建了 10 个对象，所以最后会销毁另外 10 个对象。

你应该知道，当vector的内容越来越多时，vector会增加它的容量来容纳更多的对象，在这个过程中发生了什么？

如果 vector 没有空间存放新对象，它将为更多对象创建更大的内存块，并**复制**它拥有的对象。然后添加新的（通过 push_back），然后它会**破坏**对象并释放满足它们的原始内存。

因此，当**复制**更多创建的对象时，在销毁原始对象时，会调用更多的析构函数。

最好的方法是您提供复制构造函数，并在其中提供 printf 内容。并且还在ctor中打印一些东西，你会看到整个过程。

您需要了解的更多是vector的容量和储备。

# android - HoloEverywhere xml 解析错误/应用程序崩溃

> ID：13785836
> 
> 赞同：2
> 
> 时间：2012-12-09T08:28:40.903
> 
> 标签：android, parsing, android-xml, android-logcat, android-holo-everywhere

出于某种原因，我在使用 HoloEverywhere 时遇到了这个错误。我的应用程序在创建时崩溃，并且我的 xml 布局在 3.0 以下时不显示。这是我的 xml 错误。

```
Failed to configure parser for C:\Users\Akhil\HoloEverywhere\hololib\res\color\secondary_text_holo_light.xml
Failed to configure parser for C:\Users\Akhil\HoloEverywhere\hololib\res\drawable\background_cache_hint_selector_holo_light.xml
Failed to configure parser for C:\Users\Akhil\HoloEverywhere\hololib\res\color\primary_text_holo_light.xml
Exception details are logged in Window > Show View > Error Log 
```

这是我的日志。它引用了我活动的 onCreate 第 57 行的错误。第 57 行扩充了 xml 文件。这只发生在 HoloEverywhere 上。请帮忙！

```
12-09 03:01:20.893: E/AndroidRuntime(327): FATAL EXCEPTION: main
12-09 03:01:20.893: E/AndroidRuntime(327): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sample/com.example.sample.CourseListActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.os.Looper.loop(Looper.java:123)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-09 03:01:20.893: E/AndroidRuntime(327):  at java.lang.reflect.Method.invokeNative(Native Method)
12-09 03:01:20.893: E/AndroidRuntime(327):  at java.lang.reflect.Method.invoke(Method.java:521)
12-09 03:01:20.893: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-09 03:01:20.893: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-09 03:01:20.893: E/AndroidRuntime(327):  at dalvik.system.NativeStart.main(Native Method)
12-09 03:01:20.893: E/AndroidRuntime(327): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
12-09 03:01:20.893: E/AndroidRuntime(327):  at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:278)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-09 03:01:20.893: E/AndroidRuntime(327):  at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:263)
12-09 03:01:20.893: E/AndroidRuntime(327):  at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:258)
12-09 03:01:20.893: E/AndroidRuntime(327):  at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:253)
12-09 03:01:20.893: E/AndroidRuntime(327):  at org.holoeverywhere.app.Activity.setContentView(Activity.java:242)
12-09 03:01:20.893: E/AndroidRuntime(327):  at com.example.sample.CourseListActivity.onCreate(CourseListActivity.java:57)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-09 03:01:20.893: E/AndroidRuntime(327):  ... 11 more
12-09 03:01:20.893: E/AndroidRuntime(327): Caused by: java.lang.ClassNotFoundException: Could not find class: fragment
12-09 03:01:20.893: E/AndroidRuntime(327):  at org.holoeverywhere.LayoutInflater.onCreateView(LayoutInflater.java:318)
12-09 03:01:20.893: E/AndroidRuntime(327):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
12-09 03:01:20.893: E/AndroidRuntime(327):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:37:51.517

看起来这已在 HoloEverywhere 1.4.1 中修复：[https ://github.com/ChristopheVersieux/HoloEverywhere/issues/](https://github.com/ChristopheVersieux/HoloEverywhere/issues/)

更新到 1.4.1 是否为您解决了问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:40:26.793

错误日志说

```
Could not find class: fragment 
```

[片段](http://developer.android.com/guide/components/fragments.html)需要 API 级别 11 或更高 :)

如果你想`Fragments`在 API < 11 上使用，你需要为此使用[Support Library](http://developer.android.com/tools/extras/support-library.html)包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:11:31.487

尝试以编程方式添加您的片段。也就是说，您的 xml 应该只有布局“内容”和 onCreate：

```
if (savedInstanceState == null) {
    // Add the fragment on initial activity setup
    MyFragment myFragment = new MyFragment();
    getSupportFragmentManager().beginTransaction().
         add(R.id.content, myFragment).commit();
} 
```

# c# - 需要帮助优化此查询

> ID：13785844
> 
> 赞同：0
> 
> 时间：2012-12-09T08:29:10.630
> 
> 标签：c#, entity-framework, .net-3.5, query-optimization, sql-server-ce-3.5

我的[SQL Server CE](http://en.wikipedia.org/wiki/SQL_Server_Compact)数据库首次运行查询时遇到了一个大问题。

我已经应用了这个优化[Performance 和 Entity Framework](http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework)，但是第一个查询仍然需要`15 sec`运行。

当我第一次运行我的应用程序第一次查询时我注意到的东西大约需要 15 秒才能运行。

如果我关闭我的应用程序并再次运行，第一个查询会立即运行。因此，如果我重新启动 PC 并再次运行应用程序，则第一个查询需要 15 秒才能运行。

总的来说，经过两周的互联网研究，我找不到解决问题的好方法。

我使用了[ANTS Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)，我注意到我的第一个查询大约需要 11 秒，而每个页面的表单初始化第一次需要 4 秒。

**我有一些问题：**

1.  我想知道我的应用程序启动时加载到 Ram 的资源是什么？
2.  为什么我的应用程序在第二次运行时速度很快？
3.  如何在应用程序启动之前将这些资源加载到 Ram 中？
4.  为什么这些资源保留在 Ram 中，直到 Windows 重新启动？

也许 15 秒很好，但是当我从 DVD 运行我的应用程序时，运行第一个查询需要 45 秒。

**已编辑**

我为我的应用程序的每个部分使用了多个数据库。

例如这个查询 Take 11 sec to run form first time：

```
public void GetContent(short SubjectID)
{
   new QuranOtherEntities(CDataBase.CSQuranOtherEntities))
   {
      CHtmlDesign.HtmlFile = QODB.AdabTbls.First(data => data.ID == SubjectID).Content;
   }
} 
```

**表结构**

![在此处输入图像描述](../Images/cf57cc9a106c0377c142ff44f16bcaf1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:25:50.870

> 首先（数据 => 数据.ID == 主题 ID）

好的，忘记实体框架。获取生成的 SQL 代码，通过分析器运行它。

这闻起来像“我不知道索引是什么”。选中“使用-the-index-luke.com”。

还要确保

> 也许 15 秒很好，但是当我从 DVD 运行我的应用程序时，运行第一个查询需要 45 秒

实际上是sql语句。它可以很容易地加载和初始化您的应用程序，在这种情况下，您会在这里问一个完全不相关的问题。在这种情况下，您无能为力 - 仍然有优化等，但您必须在这里提出具体问题，即做好功课，然后这里的问题就完全无关紧要了。顺便说一句，这包括初始化实体框架所需的时间——这与查询本身无关，但可能发生在您运行的第一个查询上。

# c# - 使用依赖属性和异步 ctp

> ID：13785849
> 
> 赞同：2
> 
> 时间：2012-12-09T08:29:58.987
> 
> 标签：c#, mvvm, async-ctp, xunit.net

我创建了一些示例 ViewModel 来测试 DP 与 asyncCtp 的使用情况：

```
public class SampleVm : DependencyObject
{

    public static readonly DependencyProperty SampleDependencyPropertyProperty =
        DependencyProperty.Register("SampleDependencyProperty", typeof (int), typeof (SampleVm), new PropertyMetadata(default(int)));

    public int SampleDependencyProperty
    {
        get { return (int) GetValue(SampleDependencyPropertyProperty); }
        set { SetValue(SampleDependencyPropertyProperty, value); }
    }
    public ISampleModel _model;
    public SampleVm(ISampleModel model)
    {
        _model = model;
    }

    public async Task SetDependencyProperty()
    {
        var modelData = await TaskEx.Run(() => _model.GetSomeIntegerValue());
        SampleDependencyProperty = modelData;
    }
} 
```

注入 ViewModel 的模型是：

```
public interface ISampleModel
{
    int GetSomeIntegerValue();
}

public class SampleModel : ISampleModel
{
    public int GetSomeIntegerValue()
    {
        return 10;
    }
} 
```

当我运行 WPF 应用程序时没有问题，但是当我想使用以下代码对其进行测试时：

```
[Fact]
public async Task CheckValueSetting()
{
    var model = new Mock<ISampleModel>();
    model.Setup(x => x.GetSomeIntegerValue()).Returns(5);
    var viewModel =new SampleVm(model.Object);

    await viewModel.SetDependencyProperty();

    Assert.Equal(5, viewModel.SampleDependencyProperty);
} 
```

我收到以下错误：

```
System.InvalidOperationException: The calling thread cannot access this object because a different thread owns it.

Server stack trace: 

    at System.Windows.Threading.Dispatcher.VerifyAccess()
    at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
    at WpfApplication4.SampleVm.set_SampleDependencyProperty(Int32 value) in SampleVM.cs: line 19
    at WpfApplication4.SampleVm.<SetDependencyProperty>d__1.MoveNext() in SampleVM.cs: line 30

    Exception rethrown at [0]: 
    at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
    at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
    at WpfApplication4.SampleVmFixture.<CheckValueSetting>d__0.MoveNext() in SampleVmFixture.cs: line 16 
```

那么解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:36:44.550

首先，我建议您使用[Microsoft.Bcl.Async 包](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)升级到 VS2012 。这将使您能够使用最新工具来定位 .NET 4.0。Async CTP 存在无法修复的已知错误，并且存在安装问题（无法修复），这将使设置新的开发机器变得相当困难。

但在删除 Async CTP 之前，请检查`(C# Testing) Unit Testing`Async CTP 目录下的目录。您会发现几种类型可以帮助进行单元测试，例如`GeneralThreadAffineContext`：

```
[Fact]
public async Task CheckValueSetting()
{
    var model = new Mock<ISampleModel>();
    model.Setup(x => x.GetSomeIntegerValue()).Returns(5);
    SampleVm viewModel;
    await GeneralThreadAffineContext.Run(async () =>
    {
        viewModel = new SampleVm(model.Object);
        await viewModel.SetDependencyProperty();
    });

    Assert.Equal(5, viewModel.SampleDependencyProperty);
} 
```

# c# - C# 键值对 列表 - 到 不保留 int 值

> ID：13785852
> 
> 赞同：3
> 
> 时间：2012-12-09T08:30:21.363
> 
> 标签：c#, list, key-value

我的初始化是：

```
List<string> convertedList = new List<string>();  
List<KeyValuePair<string, int>> originalList = new List<KeyValuePair<string, int>>(); 
```

而且我基本上只想填充`convertedList`So if has some items:中*的*字符串值，我想包含： 到目前为止，我已经尝试过：`originalList`
`originalList``["foo",5],["bar",16],["baz",100]`
`convertedList``["foo"],["bar"],["baz"]`

```
for (int i = 0; i <= originalList.Count; i++)
{
    convertedList.Add(actions.ToString());
} 
```

但没有运气。
哦，请记住，我是一个新手，这个问题的答案可能非常明显。
谢谢你的协助！
**如果我只想转换前 X 个项目，我将如何继续？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T08:39:25.823

```
 List<String> convertedList = originalList.Select(x => x.Key).ToList(); 
```

或者：

```
 convertedList.AddRange(originalList.Select(x => x.Key)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T08:35:44.817

坚持原来的语法：

```
foreach (KeyValuePair<string, int> kvp in originalList)
{
    convertedList.Add(kvp.Key);
} 
```

# field - Paillier密码系统中的逆元

> ID：13785854
> 
> 赞同：1
> 
> 时间：2012-12-09T08:30:30.423
> 
> 标签：field

据我所知，在 Paillier 密码系统中，消息 m 的加密 c 计算为 c=g^mr^n mod n^2

现在，我想知道如果我知道 c、r 和 n，我是否可以推导出 g^m mod n^2？

似乎“mod n^2”操作不构成有限域。并非每个元素在 Z*_{n^2} 中都有相应的乘法逆元。因此，似乎并不总是不可能找到一个合适的 (r^n)^-1 来得到 g^m=g^mr^n (r^n)^-1 mod n^2

如果是这样，我们是否可以找到或限制使用 r 以便始终可以找到 (r^n)^-1 ？

# postgresql - 如何在 postgresql 中记录数据更改？

> ID：13785855
> 
> 赞同：14
> 
> 时间：2012-12-09T08:30:37.150
> 
> 标签：postgresql, postgresql-8.4, audit-trail

此问题似乎与与此主题相关的其他一些问题可能重复。我发现了一些类似的问题（几年前有人问过一些问题，关于这个话题的讨论似乎几乎结束了）。但是我的问题没有找到可行的解决方案。我有一个包含大量表的数据库，其中包含大量数据。我需要记录存储在特定数据库表中的数据发生的每一个变化。

例如，我有一个用于存储员工详细信息的表。

```
id    employeename
 1    ab 
```

并且，此数据更改为

```
id    employeename
 1    cd 
```

所以我需要记录这些数据。

即，员工姓名

> 抗体

改为

> 光盘

在表员工详细信息中

每次更改存储在表中的内容时，我都需要记录数据。真的有可能吗？如果是这样，我该怎么做？其中涉及哪些步骤？在这种情况下，我非常担心日志文件的大小。在这种情况下，有什么好的选择？我正在使用postgresql8.4。任何好的建议都会对我有很大帮助。提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-04-17T07:29:55.293

非常通用的触发功能，在那里找到：[https ://www.cybertec-postgresql.com/en/tracking-changes-in-postgresql/](https://www.cybertec-postgresql.com/en/tracking-changes-in-postgresql/)

存储历史的表：

```
CREATE SCHEMA logging;
CREATE TABLE logging.t_history (
        id             serial,
        tstamp         timestamp DEFAULT now(),
        schemaname     text,
        tabname        text,
        operation      text,
        who            text DEFAULT current_user,
        new_val        json,
        old_val        json
); 
```

触发：

```
CREATE FUNCTION change_trigger() RETURNS trigger AS $$
       BEGIN
         IF TG_OP = 'INSERT'
         THEN INSERT INTO logging.t_history (
                tabname, schemaname, operation, new_val
              ) VALUES (
                TG_RELNAME, TG_TABLE_SCHEMA, TG_OP, row_to_json(NEW)
              );
           RETURN NEW;
         ELSIF  TG_OP = 'UPDATE'
         THEN
           INSERT INTO logging.t_history (
             tabname, schemaname, operation, new_val, old_val
           )
           VALUES (TG_RELNAME, TG_TABLE_SCHEMA, TG_OP, row_to_json(NEW), row_to_json(OLD));
           RETURN NEW;
         ELSIF TG_OP = 'DELETE'
         THEN
           INSERT INTO logging.t_history
             (tabname, schemaname, operation, old_val)
             VALUES (
               TG_RELNAME, TG_TABLE_SCHEMA, TG_OP, row_to_json(OLD)
             );
             RETURN OLD;
         END IF;
       END;
$$ LANGUAGE 'plpgsql' SECURITY DEFINER; 
```

应用触发器：

```
CREATE TRIGGER t BEFORE INSERT OR UPDATE OR DELETE ON your_table
        FOR EACH ROW EXECUTE PROCEDURE change_trigger(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-09T08:57:26.450

这是触发器的示例，而不是记录此类更改：[Audit trigger](http://wiki.postgresql.org/wiki/Audit_trigger)。

# c++ - 访问模板类型实例成员

> ID：13785858
> 
> 赞同：1
> 
> 时间：2012-12-09T08:31:03.763
> 
> 标签：c++, templates

我试图了解模板是如何工作的。到目前为止，我阅读了大量关于这个主题的文献，但我仍然有很多问题。

我不明白为什么这段代码没有编译：

```
#include <iostream>
using std::cout;
using std::endl;

struct SimpleVertex
{
    float x, y, z;
    float r, g, b, a;
};

struct TexturedVertex
{
    float x, y, z;
    float u, v;
};

// Template class declaration
template<class T>
class Primitive
{
public:
    Primitive(const T& vertex)
    {
        cout << "Usual constructor" << endl;
    };

    ~Primitive();

};

// Template function
template<class T>
void printVertex (const T& vertex)
{
    cout << "Printing r, g, b, a" << endl;
    cout << vertex.r << " " << vertex.g << " " << vertex.b << " " << vertex.a;
}

int main()
{
    SimpleVertex simple;
    simple.r = 264;
    simple.g = 123;
    simple.b = 731;
    simple.a = 0;

    Primitive<SimpleVertex> prim(simple);
    //printVertex<SimpleVertex>(simple);

    system("pause");
    return 0;
} 
```

我的编译器来自 MSVS2012 IDE。当我调用`Primitive<SimpleVertex> prim(simple)`line - 它不起作用并引发错误：`Source.obj : error LNK2019: unresolved external symbol "public: __thiscall Primitive<struct SimpleVertex>::~Primitive<struct SimpleVertex>(void)" (??1?$Primitive@USimpleVertex@@@@QAE@XZ) referenced in function _main`，但是当我调用时`printVertex<SimpleVertex>(simple)`- 一切正常。

所以我不知道调用简单模板函数和调用模板类构造函数有什么区别？

另外我不明白为什么我不能在 Primitive 的构造函数中访问 SimpleVertex 的成员（r、g、b、a），但可以在单独的模板函数中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:33:27.373

这与模板无关。您只需要为`Primitive`. 该类有一个声明但没有定义。您可以添加一个空的析构函数体：

```
~Primitive() {} // empty destructor 
```

对于这个非模板类，您会得到相同类型的链接器错误：

```
struct Foo
{
  ~Foo();
}; 
```

# android - android如何获得“android.app.SuperNotCalledException”？

> ID：13785860
> 
> 赞同：1
> 
> 时间：2012-12-09T08:32:08.457
> 
> 标签：android, exception

我很好奇android如何检测我是否`super.onCreate`在我的方法中调用（或其他一些方法）`onCreate`。

我猜它使用了一个标志并`boolean mCalled;`在 Activity.class 中看到了一个标志，但不确定它是否用于此检测。如果是这样，那么它让我感到困惑，因为有许多超方法需要覆盖，但这些方法只有一个“mCalled”标志来检测是否调用了超方法，这似乎是不可能的。

谢谢回复~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:34:58.813

该模式的工作原理如下：

```
private boolean superCalled;

private someFunction(...) {
    superCalled = false;
    someMethodThatRequiresSuperToBeCalled(...);
    if (!superCalled) {
        throw new SuperNotCalledException();
    }
}

protected void someMethodThatRequiresSuperToBeCalled(...) {
    superCalled = true;
} 
```

如果您仔细阅读代码，您会发现框架一次仅将标志用于一种方法。因此，即使有许多方法需要调用`super.whatever()`，它们也可以共享相同的标志。

# qt - hotmail.com 上的 QT ssl 错误：找不到本地查找证书的颁发者证书

> ID：13785862
> 
> 赞同：6
> 
> 时间：2012-12-09T08:32:56.747
> 
> 标签：qt, ssl, openssl, qtwebkit

当我使用 QtWebkit（内部使用 QSslSocket）连接到 www.hotmail.com 时，登录后出现以下 ssl 错误：

1.  找不到本地查找证书的颁发者证书
2.  为此目的不信任根 CA 证书
3.  无法验证任何证书。

在登录之前，我可能会在 mail.yahoo.com 上遇到相同的错误。我发现与这两个服务器的安全连接会触发 ssl 错误：

1.  [https://gfx8.hotmail.com](https://gfx8.hotmail.com)
2.  [https://csc.beap.bc.yahoo.com](https://csc.beap.bc.yahoo.com)

QT 中包含一个名为securesocketclient 的小型ssl 演示程序。如果我使用这个小客户端连接到上述两台服务器的 443 端口，我会产生同样的错误。我 99% 确定这是 QT 的一个错误，因为我们已经在许多开发系统上产生了这个问题。它影响 linux、mac 和 windows QT。它一直影响 QT 4.7.4 到 QT 4.8.4（没有尝试早期版本）。使用 openssl 0.9.8 重现该错误。

有些人可能错误地声称通过使用带有预编译 QT 二进制文件的 openssl 1.0.0 修复了该错误。这是错误的，因为预编译的 QT 二进制文件是使用 openssl 0.9.8 头文件编译的。Openssl 0.9.8 与 openssl 1.0.0 的二进制不兼容。如果您使用一个版本的 openssl 编译 QT 但使用另一个版本的 openssl 二进制文件，某些结构成员将被误解。为了得出这个结论，我对 QT 和 openssl 源代码进行了大量的逐步跟踪。

由于 hotmail 和 yahoo email 是非常受欢迎的网站，我认为这个 bug 在 QT 的安全性方面是一个严重的 bug。我已经向 QT 错误系统 ( [https://bugreports.qt.io/browse/QTBUG-23625](https://bugreports.qt.io/browse/QTBUG-23625) ) 报告了它，根据我过去的经验，我怀疑 digia 什么时候会得到它。

请随时分享您对如何修复此错误的想法。我确实知道如何调用 ignoreSslErrors 并假装没有问题。但这不是 openssl 的用途。

* * *

**对此问题进一步调查的一些更新。**

[https://gfx8.hotmail.com](https://gfx8.hotmail.com)的证书路径为：

*   根 CA：Versign 3 类公共主要证书颁发机构 - G5
*   中级 CA：Versign Class 3 扩展验证 SSL SGC CA
*   服务器证书：gfx-ecn.hotmail.com

根 CA 确实位于 Windows 证书存储中，并在启动时正确加载。我想也许不知何故 QT 没有获得中间证书。我使用 openssl 命令行程序运行测试，如下所示：

> openssl s_client -showcerts -connect gfx8.hotmail.com:443

输出在这里：

> CONNECTED(000001AC) depth=0 1.3.6.1.4.1.311.60.2.1.3 = US, 1.3.6.1.4.1.311.60.2.1.2 = Washington, businessCategory = Private Organization, serialNumber = 600413485, C = US, postalC ode = 98052，ST = 华盛顿，L = 雷德蒙德，街道 = 1 Microsoft Way，O = 微软公司，OU = Windows Azure CDN，CN = gfx-ecn.hotmail.com
> 
> 验证错误：num=20：无法获取本地颁发者证书验证返回：1
> 
> depth=0 1.3.6.1.4.1.311.60.2.1.3 = 美国，1.3.6.1.4.1.311.60.2.1.2 = 华盛顿，商业类别 = 私人组织，序列号 = 600413485，C = 美国，邮政编码 = 98052， ST = 华盛顿，L = 雷德蒙德，街道 = 1 Microsoft Way，O = 微软公司，OU = Windows Azure CDN，CN = gfx-ecn.hotmail.com
> 
> 验证错误：num=27：证书不可信验证返回：1
> 
> depth=0 1.3.6.1.4.1.311.60.2.1.3 = 美国，1.3.6.1.4.1.311.60.2.1.2 = 华盛顿，商业类别 = 私人组织，序列号 = 600413485，C = 美国，邮政编码 = 98052， ST = 华盛顿，L = 雷德蒙德，街道 = 1 Microsoft Way，O = 微软公司，OU = Windows Azure CDN，CN = gfx-ecn.hotmail.com
> 
> 验证错误：num=21：无法验证第一个证书验证返回：1
> 
> 证书链 0 s:/1.3.6.1.4.1.311.60.2.1.3=US/1.3.6.1.4.1.311.60.2.1.2=Washington/businessCategory=Private Organization/serialNumber=600413485/C=US/postalCode=98052 /ST=Washington/L=Redmond/street=1 Microsoft Way/O=Microsoft Corporation/OU=Windows Azure CDN/CN=gfx-ecn.hotmail.com i:/C=US/O=VeriSign, Inc./OU =VeriSign Trust Network/OU= [https://www.verisign.com/rpa](https://www.verisign.com/rpa) (c)06/CN=VeriSign Class 3 Extended Validation SSL SGC CA的使用条款
> 
> -----开始证书-----
> 
> MIIG0DCCBbigAwIBAgIQfRbsuTLd2GrmU38TPnVOCTANBgkqhkiG9w0BAQUFADCB vjELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQL ExZWZXJpU2lnbiBUcnVzdCBOZXR3b3JrMTswOQYDVQQLEzJUZXJtcyBvZiB1c2Ug YXQgaHR0cHM6Ly93d3cudmVyaXNpZ24uY29tL3JwYSAoYykwNjE4MDYGA1UEAxMv VmVyaVNpZ24gQ2xhc3MgMyBFeHRlbmRlZCBWYWxpZGF0aW9uIFNTTCBTR0MgQ0Ew HhcNMTIxMTA3MDAwMDAwWhcNMTQxMTA4MjM1OTU5WjCCAR0xEzARBgsrBgEEAYI3 PAIBAxMCVVMxGzAZBgsrBgEEAYI3PAIBAhMKV2FzaGluZ3RvbjEdMBsGA1UEDxMU UHJpdmF0ZSBPcmdhbml6YXRpb24xEjAQBgNVBAUTCTYwMDQxMzQ4NTELMAkGA1UE BhMCVVMxDjAMBgNVBBEUBTk4MDUyMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYD VQQHFAdSZWRtb25kMRgwFgYDVQQJFA8xIE1pY3Jvc29mdCBXYXkxHjAcBgNVBAoU FU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEaMBgGA1UECxQRV2luZG93cyBBenVyZSBD RE4xHDAaBgNVBAMUE2dmeC1lY24uaG90bWFpbC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC+jRmBRv2iw1N2LirFdhgqmZ3G+BBc8gAn50O6TT1u zNqrjicf3KJ+BDHSGcnkysvWovwnUhDhMzAWf521iYi2lFZqC3txewGvjrKM0Gqz DhHrF+bzvNjyrIION89354cFxU1eK2okegYHkWIuyPHyCN6PFGK52OlkBixb34xv WvAZfjSu/hr+f+lkedFZvJdd6KS4e8N/tGJ/dndfmReaKSiNFWBFbwhkndLdXU3p ZnVLCysETMuUoIsDIPcgDfji1XkoKLsri9WijVhjNH1MFf/t6/g4PpWqZGl4si3t yQ0rdefDGfgX8lvq63aXnaap4SbjTYLviFRle/PMkXV7AgMBAAGjggJmMIICYjCB 0AYDVR0RBIHIMIHFghBnZngxLmhvdG1haWwuY29tghBnZngyLmhvdG1haWwuY29t ghBnZngzLmhvdG1haWwuY29tghBnZng0LmhvdG1haWwuY29tghBnZng1LmhvdG1h aWwuY29tghBnZng2LmhvdG1haWwuY29tghBnZng3LmhvdG1haWwuY29tghBnZng4 LmhvdG1haWwuY29tghRncmFwaGljcy5ob3RtYWlsLmNvbYIIYS5nZngubXOCE2dm eC1lY24uaG90bWFpbC5jb20wCQYDVR0TBAIwADAdBgNVHQ4EFgQUH0b2ApITW9WB /LA+oaz+2ZnW/dwwDgYDVR0PAQH/BA​​QDAgWgMD4GA1UdHwQ3MDUwM6AxoC+GLWh0dHA6Ly9FVkludGwtY3JsLnZlcmlzaWduLmNvbS9FVkludGwyMDA2LmNybDBEBgNV HSAEPTA7MDkGC2CGSAGG+EUBBxcGMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3 LnZlcmlzaWduLmNvbS9jcHMwNAYDVR0lBC0wKwYIKwYBBQUHAwEGCCsGAQUFBwMC BglghkgBhvhCBAEGCisGAQQBgjcKAwMwHwYDVR0jBBgwFoAUTkPIHXbvN1N6T/JY b5TzOOLVvd8wdgYIKwYBBQUHAQEEajBoMCsGCCsGAQUFBzABhh9odHRwOi8vRVZJ bnRsLW9jc3AudmVyaXNpZ24uY29tMDkGCCsGAQUFBzAChi1odHRwOi8vRVZJbnRs LWFpYS52ZXJpc2lnbi5jb20vRVZJbnRsMjAwNi5jZXIwDQYJKoZIhvcNAQEFBQAD ggEBAFdVsrzkxJ6aRnaGIO1hbCDlekEMCT6OTlZXckzZeaIrNfSFLXHe89pWkRr1 AKz43nnM0pLxVuEHRE9pMZH6Om7SjqU5BR1qd6xp+ZJhuJA2I2319PCSbKCpv67X 82J8/JKjH8e4fpOzb70dKUlNNr7x0aIMYuCq6unXXZQ5u83Uny42jcIQWLOlZRKC dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461m6HohhhDw=HSAEPTA7MDkGC2CGSAGG+EUBBxcGMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3 LnZlcmlzaWduLmNvbS9jcHMwNAYDVR0lBC0wKwYIKwYBBQUHAwEGCCsGAQUFBwMC BglghkgBhvhCBAEGCisGAQQBgjcKAwMwHwYDVR0jBBgwFoAUTkPIHXbvN1N6T/JY b5TzOOLVvd8wdgYIKwYBBQUHAQEEajBoMCsGCCsGAQUFBzABhh9odHRwOi8vRVZJ bnRsLW9jc3AudmVyaXNpZ24uY29tMDkGCCsGAQUFBzAChi1odHRwOi8vRVZJbnRs LWFpYS52ZXJpc2lnbi5jb20vRVZJbnRsMjAwNi5jZXIwDQYJKoZIhvcNAQEFBQAD ggEBAFdVsrzkxJ6aRnaGIO1hbCDlekEMCT6OTlZXckzZeaIrNfSFLXHe89pWkRr1 AKz43nnM0pLxVuEHRE9pMZH6Om7SjqU5BR1qd6xp+ZJhuJA2I2319PCSbKCpv67X 82J8/JKjH8e4fpOzb70dKUlNNr7x0aIMYuCq6unXXZQ5u83Uny42jcIQWLOlZRKC dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461m6HohhhDw=HSAEPTA7MDkGC2CGSAGG+EUBBxcGMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3 LnZlcmlzaWduLmNvbS9jcHMwNAYDVR0lBC0wKwYIKwYBBQUHAwEGCCsGAQUFBwMC BglghkgBhvhCBAEGCisGAQQBgjcKAwMwHwYDVR0jBBgwFoAUTkPIHXbvN1N6T/JY b5TzOOLVvd8wdgYIKwYBBQUHAQEEajBoMCsGCCsGAQUFBzABhh9odHRwOi8vRVZJ bnRsLW9jc3AudmVyaXNpZ24uY29tMDkGCCsGAQUFBzAChi1odHRwOi8vRVZJbnRs LWFpYS52ZXJpc2lnbi5jb20vRVZJbnRsMjAwNi5jZXIwDQYJKoZIhvcNAQEFBQAD ggEBAFdVsrzkxJ6aRnaGIO1hbCDlekEMCT6OTlZXckzZeaIrNfSFLXHe89pWkRr1 AKz43nnM0pLxVuEHRE9pMZH6Om7SjqU5BR1qd6xp+ZJhuJA2I2319PCSbKCpv67X 82J8/JKjH8e4fpOzb70dKUlNNr7x0aIMYuCq6unXXZQ5u83Uny42jcIQWLOlZRKC dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461m6HohhhDw=LnZlcmlzaWduLmNvbS9jcHMwNAYDVR0lBC0wKwYIKwYBBQUHAwEGCCsGAQUFBwMC BglghkgBhvhCBAEGCisGAQQBgjcKAwMwHwYDVR0jBBgwFoAUTkPIHXbvN1N6T/JY b5TzOOLVvd8wdgYIKwYBBQUHAQEEajBoMCsGCCsGAQUFBzABhh9odHRwOi8vRVZJ bnRsLW9jc3AudmVyaXNpZ24uY29tMDkGCCsGAQUFBzAChi1odHRwOi8vRVZJbnRs LWFpYS52ZXJpc2lnbi5jb20vRVZJbnRsMjAwNi5jZXIwDQYJKoZIhvcNAQEFBQAD ggEBAFdVsrzkxJ6aRnaGIO1hbCDlekEMCT6OTlZXckzZeaIrNfSFLXHe89pWkRr1 AKz43nnM0pLxVuEHRE9pMZH6Om7SjqU5BR1qd6xp+ZJhuJA2I2319PCSbKCpv67X 82J8/JKjH8e4fpOzb70dKUlNNr7x0aIMYuCq6unXXZQ5u83Uny42jcIQWLOlZRKC dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461m6HohhhDw=LnZlcmlzaWduLmNvbS9jcHMwNAYDVR0lBC0wKwYIKwYBBQUHAwEGCCsGAQUFBwMC BglghkgBhvhCBAEGCisGAQQBgjcKAwMwHwYDVR0jBBgwFoAUTkPIHXbvN1N6T/JY b5TzOOLVvd8wdgYIKwYBBQUHAQEEajBoMCsGCCsGAQUFBzABhh9odHRwOi8vRVZJ bnRsLW9jc3AudmVyaXNpZ24uY29tMDkGCCsGAQUFBzAChi1odHRwOi8vRVZJbnRs LWFpYS52ZXJpc2lnbi5jb20vRVZJbnRsMjAwNi5jZXIwDQYJKoZIhvcNAQEFBQAD ggEBAFdVsrzkxJ6aRnaGIO1hbCDlekEMCT6OTlZXckzZeaIrNfSFLXHe89pWkRr1 AKz43nnM0pLxVuEHRE9pMZH6Om7SjqU5BR1qd6xp+ZJhuJA2I2319PCSbKCpv67X 82J8/JKjH8e4fpOzb70dKUlNNr7x0aIMYuCq6unXXZQ5u83Uny42jcIQWLOlZRKC dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461m6HohhhDw=bnRsLW9jc3AudmVyaXNpZ24uY29tMDkGCCsGAQUFBzAChi1odHRwOi8vRVZJbnRs LWFpYS52ZXJpc2lnbi5jb20vRVZJbnRsMjAwNi5jZXIwDQYJKoZIhvcNAQEFBQAD ggEBAFdVsrzkxJ6aRnaGIO1hbCDlekEMCT6OTlZXckzZeaIrNfSFLXHe89pWkRr1 AKz43nnM0pLxVuEHRE9pMZH6Om7SjqU5BR1qd6xp+ZJhuJA2I2319PCSbKCpv67X 82J8/JKjH8e4fpOzb70dKUlNNr7x0aIMYuCq6unXXZQ5u83Uny42jcIQWLOlZRKC dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461m6HohhhDw=bnRsLW9jc3AudmVyaXNpZ24uY29tMDkGCCsGAQUFBzAChi1odHRwOi8vRVZJbnRs LWFpYS52ZXJpc2lnbi5jb20vRVZJbnRsMjAwNi5jZXIwDQYJKoZIhvcNAQEFBQAD ggEBAFdVsrzkxJ6aRnaGIO1hbCDlekEMCT6OTlZXckzZeaIrNfSFLXHe89pWkRr1 AKz43nnM0pLxVuEHRE9pMZH6Om7SjqU5BR1qd6xp+ZJhuJA2I2319PCSbKCpv67X 82J8/JKjH8e4fpOzb70dKUlNNr7x0aIMYuCq6unXXZQ5u83Uny42jcIQWLOlZRKC dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461m6HohhhDw=dYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461mw6HodYSqW3JalTYVZNvdEoQVuUEJJLcY1qMVJ9NFtdnrzrmcpK+52+nZQXbCkM7W8Vl1 WM/dbOnqsu0+SIPZ4Q2wIAnT1azmBvxZ2ULvzW98HIAn4/RdPuimnox8T9R2yrv1 xd5P6oAZWvmnX6e461mw6Ho
> 
> -----结束证书-----
> 
> 服务器证书主题=/1.3.6.1.4.1.311.60.2.1.3=US/1.3.6.1.4.1.311.60.2.1.2=Washington/businessCategory=Private Organization/serialNumber=600413485/C=US/postalCode=98052/ ST=Washington/L=Redmond/street=1 Microsoft Way/O=Microsoft Corporation/OU=Windows Azure CDN/CN=gfx-ecn.hotmail.com issuer=/C=US/O=VeriSign, Inc./OU= VeriSign Trust Network/OU= [https://www.verisign.com/rpa](https://www.verisign.com/rpa) (c)06/CN=VeriSign Class 3 Extended Validation SSL SGC CA上的使用条款
> 
> 未发送客户端证书 CA 名称
> 
> SSL 握手已读取 1933 字节并写入 480 字节
> 
> 新的，TLSv1/SSLv3，密码是 AES256-SHA 服务器公钥是 2048 位 支持安全重新协商 压缩：无 扩展：无 SSL-会话：协议：SSLv3 密码：AES256-SHA 会话 ID：3CC559C15AF17B09346C371A1CB292DF77C272A37FDC47DF69EEE0EE-CCC06：主密钥：F626E23FDCC89B1329FD4F5D1ED5A940F0CB14A1C377BFDB6ABA6238B91F9C11390EC16FD117C090B3171FBEE762B792 密钥参数：无 PSK 身份：无 PSK 身份提示：无 开始时间：1355423684 验证超时证书：2120 秒（可验证第一个返回码）：2720 秒

从 openssl 的输出中，我们可以看到 openssl 程序产生了类似的错误（这使它看起来更像是一个 openssl 错误？）。我们还注意到，hotmail 服务器只返回服务器证书，而不返回中间证书。这可能是导致错误的原因。我对其他 https 服务器尝试了相同的 ssl 命令。它们还返回服务器证书和中间证书。我测试过的一些银行网站甚至将整个证书链一直返回到根 CA。所以，问题是，如果没有返回中间证书，我应该如何以及从哪里获得它？其他浏览器如 IE 和 chrome 是如何处理这个问题的？

* * *

**更多发现在这里。**

实际上，我提到的两台服务器都用于下载 hotmail 和 yahoo 邮件的页内组件。雅虎邮件主登录页面本身确实返回了完整的证书链。当其他浏览器访问主页时，它会将中间证书存储在本地以供以后使用。但是，QTWebkit 不会自动缓存中间证书，因此会导致问题。如果我访问服务器[https://gfx8.hotmail.com](https://gfx8.hotmail.com)直接使用新的Firefox副本，我得到同样的错误。但是如果我先访问 https:/www.hotmail.com 再登录 hotmail，虽然登录后从 gfx8 服务器下载了一些组件，但没有错误。我发现 QTWebkit 既不会从系统证书存储中加载中间证书，也不会将中间证书添加到系统证书存储中。它也不会在内存内部缓存中间证书。这将导致某些不返回完整证书链的服务器出现问题。

我确实尝试将中间证书保存到 PEM 文件并在我的应用程序启动时加载它。它在 Windows 和 Linux 上运行良好。但不知何故，它对Mac没有影响。不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:25:50.590

为了在您的应用程序中支持安全连接，而不会忽略 ssl 错误，您必须拥有您正在加载的站点正在访问的所有域的根证书，例如，如果它访问 CDN（在您的浏览器），还获取该服务器的证书（例如，您可以从 chrome 下载它们，通过查看当前站点的证书，并获取整个链，但单独下载它们）。将所有这些证书存储在一个单独的文件夹中后，在应用程序初始化后的某处添加此代码，它将在开始时加载所有这些证书，因此 QT 可以访问它们：

```
import os

from PySide.QtNetwork import QSsl, QSslConfiguration, QSslCertificate
from PySide.QtCore import QFile, QIODevice

def load_certs(cert_path):
    # cert_path is a string "/path/to/cert/files"
    ssl_config = QSslConfiguration.defaultConfiguration()
    ssl_config.setProtocol(QSsl.SecureProtocols)

    certs = ssl_config.caCertificates()

    for cert_filename in os.listdir(cert_path):
        if os.path.splitext(cert_filename)[1] in ('.cer', '.crt', '.pem'):
            cert_filepath = os.path.join(cert_path, cert_filename)
            cert_file = QFile(cert_filepath)
            cert_file.open(QIODevice.ReadOnly)
            cert = QSslCertificate(cert_file)
            certs.append(cert)

    ssl_config.setCaCertificates(certs)
    QSslConfiguration.setDefaultConfiguration(ssl_config) 
```

现在，当站点需要证书验证时，它不会失败。然而，openssl 在 Debian 系统上的 TLS 实现确实存在问题，在这些情况下，您将遇到诸如页面无法加载之类的问题，或者当您没有有效证书时会出现类似错误。在这些情况下，您必须对这些页面强制使用 SSLv3 才能使它们正常工作。您可以通过将自定义虚函数绑定到*QNetworkAccessManager*的*createRequest*并为每个请求覆盖 ​​ssl 协议来实现这一点。这样您就不必为所有站点依赖旧的 ssl 版本（因为您也可以全局设置默认 ssl 协议，但这不是最好的主意），仅适用于有问题的站点：

```
class Browser(object):

    def __init__(self):
        self.network_manager = QNetworkAccessManager()
        self.network_manager.createRequest = self._create_request
        self.web_page = QWebPage()
        self.web_page.setNetworkAccessManager(self.network_manager)
        self.web_view = QWebView()
        self.web_view.setPage(self.web_page)
        self._override_ssl = None

    def _create_request(self, operation, request, data):
        ssl_protocols = {'sslv2': QSsl.SslV2,
                         'sslv3': QSsl.SslV3,
                         'tlsv1': QSsl.TlsV1,
                         'tlsv1sslv3': QSsl.TlsV1SslV3,
                         'unknownprotocol': QSsl.UnknownProtocol,
                         'secureprotocols': QSsl.SecureProtocols}

        if self._override_ssl is not None:
            ssl_config = QSslConfiguration.defaultConfiguration()
            ssl_config.setProtocol(ssl_protocols[self._override_ssl])
            request.setSslConfiguration(ssl_config)

        reply = QNetworkAccessManager.createRequest(self.network_manager,
                                                    operation,
                                                    request,
                                                    data)

        return reply

    def override_ssl(self, protocol_id):
        # protocol id is a string like 'sslv3' or 'tlsv1'
        self._override_ssl = protocol_id 
```

好的，我从内存中输入了大部分代码，如果有问题，请报告。

# php - 如果用户没有直接登录到我的网站，则阻止用户喜欢/分享/添加评论

> ID：13785863
> 
> 赞同：0
> 
> 时间：2012-12-09T08:33:05.663
> 
> 标签：php, jquery, facebook

我正在尝试在我的网站中集成 facebook 登录、喜欢、分享、评论。我成功地“单独”完成了这项工作，当遵循 fb 文档时，这显然很容易。

现在有趣的是我被要求以这样的方式整合这些

*   当且仅当他使用他的 Facebook 凭据登录我的网站时，用户应该能够喜欢/评论/分享。否则应该会出现一个弹出窗口，要求用户在执行这些操作之前登录（喜欢/评论/分享）

*   用户不应该自动登录到网站，即使他已经在另一个选项卡中打开了 facebook（我试图实现，但即使没有实际登录到我应该阻止的网站，用户也能够喜欢/分享/评论）。

请说明如何完成此任务。我正在使用 PHP 和 jQuery。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:42:38.787

我从未做过这样的事情，但我认为您的页面上有一些或其他“小部件”可以执行您提到的任务。我还假设这些小部件是由 facebook 提供的。

我建议不要渲染相关的小部件，除非您的用户登录到您的网站。

您可以渲染一些看起来像可以弹出登录页面的原始图像的“禁用”图像。

# php - 如何说明是否选择了选项并在下拉菜单中显示正确的值

> ID：13785867
> 
> 赞同：0
> 
> 时间：2012-12-09T08:33:31.693
> 
> 标签：php

下面我有一个下拉菜单，如果表单中存在验证错误，它将保留在下拉菜单中选择的选项的显示，否则如果表单没有错误，则下拉菜单将返回显示“请选择”选项：

```
 $validSubmission = isset($_POST['registerbtn']) isset($getyear);

    $min_year = 1;
    $max_year = 10;
    $years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
    $yearHTML = '';
    $yearHTML .= '<select name="year" id="yearDrop">'.PHP_EOL; 
    $yearHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
        foreach ($years as $year) {
            if ($validSubmission && $year == $_POST['year'] && $numrows != 1) {
                $yearHTML .= "<option value='" . $year . "' selected='selected'>$year</option>" . PHP_EOL;
            } else {
                $yearHTML .= "<option value='" . $year . "'>$year</option>" . PHP_EOL;
            }
        }

    $yearHTML .= '</select>'; 
```

上述下拉列表的值为：

```
1
2
3
4
5
...

10 
```

但是我在使用与下面的下拉列表相同的方法时遇到问题，因为下拉列表包含两种类型的选项，其中包含一年的单个数字，以及显示一年中多个值的选项，其中 / 如下所示：

```
1
1/2
2
2/3
3
3/4
4
4/5
5
....
10 
```

我的问题是，如果表单中有错误，我如何将上面的格式用于下面的下拉菜单代码，以便保持选中的选项，否则如果表单没有错误，则返回显示“请选择”值在下拉菜单中？

```
 $validSubmission = (isset($_POST['createbtn']) && isset($getcourseid) && isset($getcoursename) && isset($getduration));

$durationHTML = '';
$durationHTML .= '<select name="duration" id="durationDrop">'.PHP_EOL; 
$durationHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

foreach ($years as $year) {
    $durationHTML .= "<option>$year</option>".PHP_EOL;  
    if ($year != $max_year) {
         $nextYear = $year + 1;
         $durationHTML .= "<option>$year/$nextYear</option>".PHP_EOL;              
    }
}
$durationHTML .= '</select>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:34:44.527

试试这样：

```
foreach ($years as $year) 
{
    $nextYear = $year + 1;

    //check for the "simple years"
    if ($validSubmission && $year == $_POST['duration'])
    {
        $durationHTML .= "<option selected>$year</option>".PHP_EOL;  
    }
    else
    {
        $durationHTML .= "<option>$year</option>".PHP_EOL; 
    }

    //check for the timespans
    if ($year != $max_year) 
    {
        $nextYear = $year + 1;

        if ($validSubmission && ($year . "/" . $nextYear) == $_POST['duration'])
        {
            $durationHTML .= "<option selected>$year/$nextYear</option>".PHP_EOL;    
        }
        else
        {
            $durationHTML .= "<option>$year/$nextYear</option>".PHP_EOL;  
        }
    }
} 
```

即使它没有经过测试，它应该让你开始。希望能帮助到你！

# node.js - socket.io.js 在哪里？

> ID：13785871
> 
> 赞同：0
> 
> 时间：2012-12-09T08:34:10.137
> 
> 标签：node.js, socket.io, mod-proxy

> **可能重复：**
> [未找到 socket.io.js](https://stackoverflow.com/questions/10191048/socket-io-js-not-found)

我安装了一个简单的网络聊天演示： [https ://github.com/sorensen/node-chat-demo](https://github.com/sorensen/node-chat-demo)

我想通过 apache 代理服务器连接到它，而不是：

[http://ip.address:3000/](http://ip.address:3000/) ...

地址将是：

[http://proxy.server/erel/](http://proxy.server/erel/) ...

这适用于静态页面，例如地址：

[http://proxy.server/erel/javascripts/chat.js](http://proxy.server/erel/javascripts/chat.js)

正确翻译为：

[http://ip.address:3000/javascripts/chat.js](http://ip.address:3000/javascripts/chat.js)

但是，它不适用于 socket.io.js：

[http://proxy.server/erel/socket.io/socket.io.js](http://proxy.server/erel/socket.io/socket.io.js)

不翻译为：

[http://ip.address:3000/socket.io/socket.io.js](http://ip.address:3000/socket.io/socket.io.js)

因为 socket.io.js 实际上并不存在......

那么它在哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:10:44.810

socket.io.js 不是静态的。根据客户端的能力，不同的版本被发送到浏览器（例如本地套接字支持、闪存套接字、jsonp）

# playframework-2.0 - 玩 2.1 Java 承诺

> ID：13785876
> 
> 赞同：0
> 
> 时间：2012-12-09T08:34:56.313
> 
> 标签：playframework-2.0, playframework-2.1

我有一个从 Play 2.0.4 迁移到 2.1 的应用程序。在 Play 2.1 中编译时，抛出此错误。

```
[error] /Users/XXX/app/controllers/SomePost.java:93: cannot find symbol
[error] symbol  : constructor Promise(org.codehaus.jackson.node.ObjectNode)
[error] location: class play.libs.F.Promise<org.codehaus.jackson.node.ObjectNode>
[error]         return new Promise<ObjectNode>(result); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:26:12.390

这就是我解决它的方法。以前，是这样的：

```
return new Promise<ObjectNode>(result); 
```

在我改成这个之后，它起作用了！

```
Future<ObjectNode> ft = Futures.successful(result);
return new Promise<ObjectNode>(ft); 
```

# git - 在 Git 存储库中增量保存 Clojure 数据结构

> ID：13785878
> 
> 赞同：3
> 
> 时间：2012-12-09T08:34:58.763
> 
> 标签：git, clojure

## 笔记：

这是故意标记为 Clojure 和 Git 的，因为我很高兴在软件的 Clojure 和 Git 端重新设计以使事情正常运行。

## 问题：

我有一堆 clojure 数据结构。当写入磁盘（使用 pr）时，它们平均每个大约 100 kb。我有大约 1000 个这样的文件。这些文件是“结构化”文档——将它们视为等同于 SVG。

现在，我正在对这些文件中的每一个进行大量小更新（添加/删除节点，更改节点上的属性）。（然后我（写（pr ...））这些文件出来。

最后，我将所有这些文件存储在我的 git 存储库中。

## 问题：

我想知道是否有一种有效的方法来存储这些文件（因为不同的写入只有很小的修改）——也就是说，如果我在内存中有一个文档的两个副本，它将是 1MB + epsilon，而不是 2MB（因为这两个文档只有细微的差别，并且共享大部分结构。）

我想以某种方式利用这个事实，当它被存储到 git 中时，是否可以利用这种相似性。

## 可能考虑的解决方案：

1）在clojure方面，不要写出整个文件，而是只写一个“与前一个文件的差异[由assoc，dissoc]组成”。<-- 这需要大量的工程。

2) 在 FS 方面，不是存储单个文件，而是将整个目录放入 bzip，然后将其作为单个 *.bz2 提交（因此，相似的文件将具有相似的块）。不利的一面是，在 git 中查找 *.bz2 文件似乎不是一个坏主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:38:18.727

您是否考虑过使用[Datomic](http://www.datomic.com/)而不是 Git？

你正在做的事情听起来像是 Datomic 的一个大致理想的用例，它本质上是一个 Clojure 风格的“事实图”数据库——这几乎就是你的结构化数据的样子。

Datomic 以非常类似于 Clojure 的不可变数据结构的方式存储数据，即它使用结构共享来确保小的更改只需要少量的额外空间。它以类似于 git 的方式保存整个历史记录 - 甚至还有一个工具可以在 Datomic ( [codeq](https://github.com/Datomic/codeq) )中模拟 git repos

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:31:18.447

这是一个有趣的问题。让我们看看我们能做些什么。

在内部，Git 将您添加到存储库的文件的完整副本保存在其数据库中。但是，当您运行`git gc`以优化本地存储库时，Git 会将松散的对象打包到包文件中。类似的文件使用增量压缩存储在包文件中。引用[Pro Git](http://git-scm.com/book/en/Git-Internals-Packfiles)：

> 当 Git 打包对象时，它会查找名称和大小相似的文件，并仅存储从一个文件版本到下一个文件版本的增量。

因此，优化了 Git 中类似文件的存储并减少了空间使用。

让我们从内部转到用户界面部分。从用户的角度来看，Git 是基于差异的。当您浏览提交、合并补丁和查看更改时，您主要处理的是差异。差异是面向行的。因此，单个行中的最小更改会导致该行的旧版本和新版本作为一个整体存储在生成的差异中。我们如何使您描述的文件之间的差异更易于阅读？使线条更短。我看到了两种简单的方法来实现它。

首先，不要保存 Clojure 数据结构，而是将它们转换为[YAML](https://en.wikipedia.org/w/index.php?title=YAML&oldid=526510344#Examples)。以 YAML 格式存储数据的文件具有相对较短的行，可以解决问题。[clj-yaml](https://github.com/lancepantz/clj-yaml)应该会派上用场。

如果您坚持将数据存储为 s 表达式，则第二个想法是将生成的文件中的所有空格替换为换行符。如果可读性很重要，您可以在之后缩进它们。在应用一个简单的正则表达式替换每个空格之前，`\n`请检查您是否有任何带有空格的字符串。

# vb.net - VB.NET 如何隔离类访问外部函数

> ID：13785880
> 
> 赞同：0
> 
> 时间：2012-12-09T08:34:59.467
> 
> 标签：vb.net, oop, class, module

我们正在努力更新一个随着时间的推移变得非常混乱的代码项目。有许多模块包含可以在任何地方使用的公共功能。

我们希望将尽可能多的代码移动到类中，以便最终可以在下一代应用程序中重用这些代码。有没有办法阻止这些类使用任何（非系统）函数？

例子：

```
public module annoyingModule
 public function addOneAndOne() as int
     return 2
 end function
 .....(load more functions)....
end module

public class pricer
 ...(class code)...
end class 
```

我想确保团队中的任何人都不会意外引用 addOneAndOne 函数 - 如果他们需要不属于类的模块的功能，他们需要在新类中重新实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:12:00.073

您需要将新类移动到单独的类库项目中。只要您的新类库项目不引用旧项目并且不包含旧模块的副本，则该类库项目中的类将无法访问所有这些内容。然后，您需要在旧项目中添加对新类库项目的引用。这样，旧代码可以使用新类，但新类将无法使用旧模块。

# android - 从 json 解析时间。具体格式

> ID：13785887
> 
> 赞同：2
> 
> 时间：2012-12-09T08:36:17.983
> 
> 标签：android, json

我收到以下 JSON，并且能够解析描述和日期。我一直在尝试解析时间，但我尝试的一切都给了我糟糕的输出。

时间对象应该是 5:30，但我不知道我是否能够解析该格式。我以为是`public String format3339 (boolean allDay)` 我发布了 JSON 输入、我的 JSON 解析和输出。

输入

```
{"object":[{"description":"blah blah blah","date":"2012-12-11","time":"2000-01-01T05:30:00Z"}]} 
```

主要是我担心`"time":"2000-01-01T05:30:00Z"`

解析

```
JSONArray arr = null;
list = new ArrayList<HashMap<String, String>>();
}
for (int i = 0; i < arr.length(); i++) {
    JSONObject d = arr.getJSONObject(i);
    Time time = new Time();
    String etime = d.getString(TIME_TAG);
    String description = d.getString(DESCRIPTION_TAG);
    String date = d.getString(DATE_TAG);
            //************************************************************************
            //********I suspect that i might be converting the time object incorrectly but whatever 
            //********i put here either does not work or gives me bad output. 
    Boolean mtime = time.parse3339(etime);
    if (mtime == true) {
        etime = time.toString();
    }
            //************************************************************************
    HashMap<String, String> map = new HashMap<String, String>();
    map.put(DATE_TAG, date);
    map.put(DESCRIPTION_TAG, description);
    map.put(TIME_TAG, etime);

    list.add(map); 
```

OutPut- 我不明白这个输出我认为输入是 3339 格式，但输出很难处理。我想我可以制作一个解析器来从给定的字符串中解析出 530，但我认为我的输出将是来自 toString() 操作的 YYYYMMDDTHHMMSS 格式。

```
20000101T053000UTC(0,0,0,-1,946704600) 
```

编辑::这是我拼凑起来的东西，可以毫不费力地得到我想要的东西。它现在有效。

```
JSONArray arr = null;
list = new ArrayList<HashMap<String, String>>();
}
for (int i = 0; i < arr.length(); i++) {
    JSONObject d = arr.getJSONObject(i);
    String etime = d.getString(TIME_TAG);
    String description = d.getString(DESCRIPTION_TAG);
    String date = d.getString(DATE_TAG);

        if (eTime.charAt(11) == '0')
    eTime = eTime.substring(12, 16);
    else
    eTime = eTime.substring(11, 16);

            HashMap<String, String> map = new HashMap<String, String>();
    map.put(DATE_TAG, date);
    map.put(DESCRIPTION_TAG, description);
    map.put(TIME_TAG, etime);

    list.add(map); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:45:03.613

解决大多数 Json 格式问题的最佳方法是反之亦然：创建您的时间，转换为 Json 对象并研究字符串表示。我想你会很快找到你的问题。

关于您的问题：`DateTime`您发布的格式是 ISO 8601。JSON 没有为日期/时间指定这种格式。

您可以尝试使用[Joda Time](http://joda-time.sourceforge.net/)来获取 Json 可以解析的正确日期类型。

或[ISO 时间格式](http://joda-time.sourceforge.net/api-release/org/joda/time/format/ISODateTimeFormat.html)

或者其他很好的使用`GSON`库的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:40:04.597

您拥有的时间格式是 SQL。您可以使用 java.SQL.date 类对其进行解析。

# ruby-on-rails - Client_Side_Validation - 显示验证位置“密码不匹配确认”

> ID：13785888
> 
> 赞同：4
> 
> 时间：2012-12-09T08:36:25.927
> 
> 标签：ruby-on-rails, devise, client-side-validation

我已经为我的验证表单应用程序尝试了 client_side_validations gem，这真的很棒。我正在为我的用户模型使用设计，当我转到`new_user_registration`表单时，当我输入密码并将 [点击选项卡] 更改为字段密码确认时，在字段密码一侧显示验证“与确认不匹配”。

查找我的应用程序以进行注册：[示例设计](http://exampledevise.herokuapp.com/users/sign_up)

在模型上

```
validates_confirmation_of :password, :only => :create
validates_presence_of :password 
```

如何在字段密码确认中显示“与密码不匹配”的验证位置？

![在此处输入图像描述](../Images/01fc32cf01ba83095eac4bb8deb635c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T16:38:04.123

我正在分享我的解决方案。

我破解了代码，以便正确显示 password_confirmation 错误，并且仅在输入错误确认密码后才显示。适用于 Zurb-Foundation 表单错误。

该文件位于 app/assets/rails.validators.js

```
//= require rails.validations

window.ClientSideValidations.formBuilders['ActionView::Helpers::FormBuilder'] = {
  add: function(element, settings, message) {
    var form = $(element[0].form);

    if (element.data('valid') !== false) {
      var for_id = element.attr('id');
      if (form.find("label.error[for='" + for_id + "']")[0] == null) {
        form.find("label[for='" +  for_id + "']").addClass('error');
        element.addClass('error');
        element.after('<small class="message error" for="' + for_id + '">' + message + '</small>');
      } 
    }

    return form.find("small.message[for='" + (element.attr('id')) + "']").text(message);
  },
  remove: function(element, settings) {
    var form = $(element[0].form);

    if (element.hasClass('error')) {
      var for_id = element.attr('id');
      form.find("label[for='" +  for_id + "']").removeClass('error');
      element.removeClass('error');
      form.find("small.error[for='" + for_id + "']").remove();
    }
    return element;
  }
}

window.ClientSideValidations.callbacks.element.fail = function(element, message, callback, event) {
  if (message.indexOf("doesn't match") != -1) {

    var eid = element.attr('id');
    var conf_el = $(element[0].form).find('#' + eid + '_confirmation');

    var form_id = $(element[0].form).attr('id');

    var settings = window.ClientSideValidations.forms[form_id];

    if (conf_el.data('interacted')) {
        ClientSideValidations.formBuilders[settings['type']].add(conf_el, settings, message);
    }
    ClientSideValidations.formBuilders[settings['type']].remove(element, settings);
    //callback();
  } else {
    callback();
  }
}

window.ClientSideValidations.callbacks.element.pass = function(element, callback, event) {
  var eid = element.attr('id');
  var conf_el = $(element[0].form).find('#' + eid + '_confirmation');

  if (conf_el.size() > 0) {
    var form_id = $(element[0].form).attr('id');
    var settings = window.ClientSideValidations.forms[form_id];
    //var settings = window.ClientSideValidations.forms['new_user'];
    ClientSideValidations.formBuilders[settings['type']].remove(conf_el, settings);
  } 

  callback();
}

$(function() {
  //bind change keyup keypress
  $("input[id$=_confirmation]").on('keyup keypress change', function(e) {
    $(this).data('interacted', true);
    $(this).off('keyup keypress change');
  });
}); 
```

# jquery - 如何使用jquery从div底部更改滚动条+100 px的位置？

> ID：13785889
> 
> 赞同：0
> 
> 时间：2012-12-09T08:36:26.720
> 
> 标签：jquery, scrollbar

我创建了我的代码，但我不知道如何获取标题所说的内容

```
 var scrolltop=$('#scrollbox').attr('scrollTop');
    var scrollheight=$('#scrollbox').attr('scrollHeight');
    var windowheight=$('#scrollbox').attr('clientHeight');

    if(scrolltop ==(scrollheight-windowheight)){
        loaddata(form_data , size);
    }
    else{

    } 
```

使用此脚本，我将检查滚动是否到达 div 的底部，如果到达，我将启动 loaddata 函数，但问题是当此触发 ajax 脚本时，如果滚动到达底部会发生许多 ajax 调用。现在我需要更改位置滚动条不允许这样做。

直到现在我都做了这样的事情，但不幸的是没有成功。

```
 $('#content').animate({scrollTop : 100}, "slow"); 
```

诅咒我需要为这个卷轴制作动画，但什么也没发生。

提前致谢

**更新**

问题很清楚如何通过 jquery 更改滚动条位置？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T10:08:28.443

我发现问题出在哪里..在 jquery 中，您可以使用 scrollTop 转到 y 轴区域，但您必须选择正确的 div ..在我的情况下，我必须滚动 $('scrollbox') 而不是内容 div.problem解决了

# c# - 日期时间的 MVC3 ValidationAttribute？在 IsValid(...) 中返回 DateTime.Max

> ID：13785892
> 
> 赞同：3
> 
> 时间：2012-12-09T08:37:05.563
> 
> 标签：c#, asp.net-mvc-3, validationattribute

我正在尝试为 DateTime 编写自定义 ValidationAttribute？

但是，当它达到`IsValid(object value)`该值时`DateTime.Max`

我在代码中看到的任何内容都没有设置此值，但这意味着我正在努力验证它。

我想要的规则是“Null or After Today”——这意味着如果有 Null 值，那很好，但如果有值，那么我想验证。

```
public class AfterTodayAttribute : ValidationAttribute, IClientValidatable
{
    public AfterTodayAttribute()
    {
    }

    //Tried this as well...same result
    //protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    //{
    //    return base.IsValid(value, validationContext);
    //}

    public override bool IsValid(object value) 
    {
        //value is already a DateTime and set to DateTime.Max
        var valid = false; // for testing only
        return valid;
    }
}

...
[Display(Description = "Expiry Date")]
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
[DataType(DataType.Date)]
[AfterToday(false, ErrorMessage = "The Limit Expiry Date must be later than Today")]
public DateTime? NewExpiryDate { get; set; }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:47:24.083

这应该可以解决问题：

```
public override bool IsValid(object value)
{
    var dt = value as DateTime?;

    return dt == null || dt.Value.Date > DateTime.Today.AddDays(1).AddSeconds(-1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:47:48.277

尝试这个 ：

```
 public override bool IsValid(object value) 
    {           
        var dateValue = (DateTime ?) value;
        return dateValue.HasValue ? dateValue.Value > DateTime.Now : true;
    } 
```

# c - 使用 fgets() 在同一行打印两个字符串

> ID：13785895
> 
> 赞同：0
> 
> 时间：2012-12-09T08:37:51.243
> 
> 标签：c, string, linked-list, printf, fgets

我想打印两个字符串，它们是用户使用 fgets() 输入的。fgets() 允许我存储带有空格的字符串并用回车键终止它。以下是示例代码：

```
fgets(tTemp ->string, 51, stdin); fflush(stdin); 
```

现在将其打印到屏幕上：

```
printf("%s", temp->string); printf(":%s", temp->string2); 
//assuming there are 2 strings 
```

我现在希望它们以如下格式打印在同一行：

> 字符串：字符串 1

但是以下代码的结果是：

```
string

:string 
```

`\n`当我打印以获得我想要的格式时，如何使from fgets 不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:06:17.040

删除字符串中换行符的最简单方法是将其字符 ( `\n`) 替换为空字符 ( `\0`)：

```
char *ptr = tTemp->string;
ptr[strlen(ptr)-1] = '\0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:50:12.143

你必须把它剥掉。首先获取一个指向末尾的指针，然后检查它是否是换行符，在这种情况下用 NUL 字节替换它。

```
char *eptr = tTemp->string + strlen(tTemp->string) - 1;

if (eptr >= tTemp->string && *eptr == '\n')
    *eptr = '\0'; 
```

之所以需要，`eptr >= tTemp->string`是因为您可能已经从 fgets 返回空字符串，在这种情况下， eptr 会在开始之前指向。

您还需要检查 fgets 是否返回 NULL，不清楚您是否这样做。如果返回 NULL，则字符串缓冲区不变，之前存在的内容仍将存在。

编辑：实际上，阅读手册页似乎无法返回空字符串。如果未返回 NULL，则至少读取一个字符。尽管如此，检查仍然没有什么坏处。

# c# - 函数/方法的合适名称

> ID：13785896
> 
> 赞同：3
> 
> 时间：2012-12-09T08:37:56.020
> 
> 标签：c#, java, oop

我有一个带有方法的类，在它内部我获取复杂对象，并从中创建具有简单结构的新对象，用户可以以更方便的方式使用它。我将此对象实例存储在内存中并为其提供简单的 api。我给它命名为**Serializable**但我不确定这是正确的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:39:48.747

*   `Transform`
*   `TransformToX`（`X`结果对象的名称在哪里）
*   `ToX`（你会看到很多，例如`ToString`，，`ToInt32`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T08:41:01.660

我使用类似的名称来命名类似的方法`asThing()`。我想在 C# 中应该是`AsThing()`. 另一种选择可能是效仿 Java 的`Number`class:`Number.intValue()`等示例。

# c++ - Game of Life 哈希表 .h 文件模板问题

> ID：13785898
> 
> 赞同：2
> 
> 时间：2012-12-09T08:38:50.617
> 
> 标签：c++, key, hashtable, conways-game-of-life

我正在尝试使用我创建的实现文件来模拟康威的生活游戏，我取得了不错的进展，但不幸的是，我遇到了一个让我感到困惑的错误。我认为问题在于我对如何正确编码模板函数的无知，无论如何这是我的实现文件：

```
#include <list>

#ifndef HashTable_h
#define HashTable_h

using namespace std;

#define HASHTABLE_CAPACITY 1009

template <class DataType>
class HashTable
{
  public:
    HashTable(); // constructor
    bool insert(DataType &a); // insert function for inserting value of dataType into table
    bool retrieve(DataType &a); // retrieve function for retrieving value from table
    bool replace(DataType &a); // function for replacing the value from the table with the parameter
    bool remove(DataType& a);//removed function written and checked
    //int getSizeOf() const;
    void clear(); // for clearing the table
    int size() const;

  private:
    list<DataType> table[HASHTABLE_CAPACITY]; // static array
    int count;
    int currentIndex;
    typename list<DataType>::const_iterator it;
};

// constructor
template <class DataType>
HashTable<DataType>::HashTable()
{
  list<DataType> table[HASHTABLE_CAPACITY];
  count = 0;
  currentIndex = -1;
}

// retrieve function
template <class DataType>
bool HashTable<DataType>::retrieve(DataType &a)
{
  // get wrapped index
  int wrappedIndex = a.hashCode() % HASHTABLE_CAPACITY;
  if (wrappedIndex < 0) wrappedIndex = wrappedIndex + HASHTABLE_CAPACITY;

  // if the array location isn't occupied, fail
  if (wrappedIndex < 0 || wrappedIndex >= HASHTABLE_CAPACITY || table[wrappedIndex].empty()) return false;

  // iterator for traversing table values
  typename list<DataType>::const_iterator it; 

  // if the keys match then replace the data
  // if a collision occurs then return false
  it = find(table[wrappedIndex].begin(), table[wrappedIndex].end(), a);
  if(it == table[wrappedIndex].end()) 
    return false; 
  a = *it;

  return true;
}

// overloaded operator function

// function for inserting values
template <class DataType>
bool HashTable<DataType>::insert(DataType &value)
{
  // get wrapped index
  int wrappedIndex = value.hashCode() % HASHTABLE_CAPACITY;
  if (wrappedIndex < 0) wrappedIndex = wrappedIndex + HASHTABLE_CAPACITY;

  // iterator for traversing values in table
  typename list<DataType>::iterator it;

  // if array location is not "occupied", copy into array
  // else if keys match, replace the data
  if (table[wrappedIndex].empty())
  {
    table[wrappedIndex].push_back(value);
    count++;
    return true;
  }
  else
  {
    it = find(table[wrappedIndex].begin(), table[wrappedIndex].end(), value); 
    if (it != table[wrappedIndex].end()) *it = value;
    else {table[wrappedIndex].push_back(value); count++;}
  }

  return true;
}

// function for replacing values
template <class DataType>
bool HashTable<DataType>::replace(DataType &value)
{
  // get wrapped index
  int wrappedIndex = value.hashCode() % HASHTABLE_CAPACITY;
  if (wrappedIndex < 0) wrappedIndex = wrappedIndex + HASHTABLE_CAPACITY;

  if(table[wrappedIndex].empty()) return false;

  // iterator for traversing the values in table
  typename list<DataType>::const_iterator it;

  it = find(table[wrappedIndex].begin(), table[wrappedIndex].end(), value);
  if(it == table[wrappedIndex].end()) return false;

  value = *it;
  table[wrappedIndex].erase(it);
  count--;

  return true;
}

template <class DataType>
bool HashTable<DataType>::remove(DataType &value)
{
  // get wrapped index
  int wrappedIndex = value.hashCode() % HASHTABLE_CAPACITY;
  if (wrappedIndex < 0) wrappedIndex = wrappedIndex + HASHTABLE_CAPACITY;

  if(table[wrappedIndex].empty()) return false;

  // iterator for traversing the values in table
  typename list<DataType>::iterator it;

  // if array location is not "occupied", copy into array
  // else if keys match, remove the data
  it = find(table[wrappedIndex].begin(), table[wrappedIndex].end(), value);
  if(it == table[wrappedIndex].end()) return false;

  value = *it;
  table[wrappedIndex].erase(it);
  count--;

  return true;
}

// function for clearing the table of it's values
template <class DataType>
void HashTable<DataType>::clear()
{
  count = 0;
  currentIndex = -1;

  for(int i = 0; i < HASHTABLE_CAPACITY; i++) 
    if( !table[i].empty()) table[i].clear();
}

template <class DataType>
int HashTable<DataType>::size() const
{
  return count;
}

#endif 
```

这是实际的 Game Of Life 驱动程序文件：

```
// Lab 11b
#include <iostream>
using namespace std;

struct cell
{
  int value; // equal to 1, so 0,0 is not a blank
  int row; // any +/0/- value
  int col; // any +/0/- value

  bool operator==(const cell& c) const {return row == c.row && col == c.col;}
  bool operator<(const cell& c) const {return (1000000 * row + col) < (1000000 * c.row + c.col);}
  int hashCode() const {return 31 * row + col;}
};

#include "HashTable.h"
HashTable<cell> grid;
HashTable<cell> newGrid;

const int MINROW = -25;
const int MAXROW = 25;
const int MINCOL = -35;
const int MAXCOL = 35;

int neighborCount(int row, int col)
{
  cell temp;
  int count = 0;
  for (temp.row = row - 1; temp.row <= row + 1; temp.row++)
    for (temp.col = col - 1; temp.col <= col + 1; temp.col++)
      if (temp.row != row || temp.col != col)
        if (grid.retrieve(temp))
          ++count;
  return count;
}

void initialize()
{
  cout << "List the coordinates for living cells.\n";
  cout << "Terminate the list with a special pair -1 -1\n";

  cell temp;
  while (true)
  {
    cin >> temp.row >> temp.col;
    if (temp.row == -1 && temp.col == -1) break;
    grid.insert(temp);
  }
  cin.ignore();
}

void print()
{
  cell temp = {1};
  cout << "\nThe current Life configuration is:\n";
  for (temp.row = MINROW; temp.row <= MAXROW; temp.row++)
  {
    for (temp.col = MINCOL; temp.col <= MAXCOL; temp.col++)
      if (grid.retrieve(temp)) 
        cout << '*';
      else
        cout << ' ';
    cout << endl;
  }
  cout << endl;
}

void update()
{
  cell temp = {1};
  newGrid.clear();
  for (temp.row = MINROW; temp.row <= MAXROW; temp.row++)
    for (temp.col = MINCOL; temp.col <= MAXCOL; temp.col++)
      switch (neighborCount(temp.row, temp.col))
      {
        case 2:
          if (grid.retrieve(temp)) newGrid.insert(temp);
          break;
        case 3:
          newGrid.insert(temp);
          break;
      }

  grid = newGrid;    
};

int main()
{
  cout << "Welcome to Conway's game of Life\n";
  cout << "This game uses a grid in which\n";
  cout << "each cell can either be occupied by an organism or not.\n";
  cout << "The occupied cells change from generation to generation\n";
  cout << "according to the number of neighboring cells which are alive.\n";

  initialize();
  print();

  for (int i = 1; grid.size(); i++)
  {
    cout << "Generation " << i << ". Press ENTER to continue, X-ENTER to quit...\n";
    if (cin.get() > 31) break;
    update();
    print();
  }
  return 0;
} 
```

当我尝试编译这些文件时，出现此错误：

```
In file included from GameOfLife.cpp:16:
HashTable.h: In member function ‘bool HashTable<DataType>::retrieve(DataType&) [with DataType = cell]’:
GameOfLife.cpp:32:   instantiated from here
HashTable.h:74: error: no matching function for call to ‘find(std::_List_iterator<cell>, std::_List_iterator<cell>, cell&)’
HashTable.h: In member function ‘bool HashTable<DataType>::insert(DataType&) [with DataType = cell]’:
GameOfLife.cpp:47:   instantiated from here
HashTable.h:117: error: no matching function for call to ‘find(std::_List_iterator<cell>, std::_List_iterator<cell>, cell&)’ 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:43:42.560

你需要`#include <algorithm>`得到[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find). 这大概是您在调用`find`. 你应该避免`using namespace std`，特别是在标题中。

# jquery - 浮动图标签奇怪的行为

> ID：13785915
> 
> 赞同：1
> 
> 时间：2012-12-09T08:40:53.167
> 
> 标签：jquery, flot

我刚开始使用 flot 并有奇怪的行为。

我画饼图：

```
$.plot($(control), data, {
        series: {
            pie: {
                show: true,
                radius: 3 / 4,
                label: {
                    show: true,
                    radius: 3 / 4,
                    formatter: function(label, series) {
                        return '<div class="graph-label">' + label + '<br/>' + Math.round(series.percent) + '%</div>';
                    },
                    background: {
                        opacity: 0.5,
                        color: '#000'
                    }
                }
            },
            legend: {
                show: false
            }
        },
        grid: {
            hoverable: true
        }
    }); 
```

数据 =

```
 [{label:"CHO-180", data:12560},{label:"CHO-60", data:54355},{label:"CHO-sol", data:12187}] 
```

当我在浏览器中绘制第一次图表时，我看到了[图表](http://i.imgur.com/ruiwp.png)（http://i.imgur.com/ruiwp.png）

但是然后我按下第二个绘图按钮，我看到了一个[不同的图表](http://i.imgur.com/oIVxw.png)(http://i.imgur.com/oIVxw.png) 对不起，我是新手，我不能添加图像。

在第二张图片上添加了标签的背景。如何使该背景立即出现在第一张图像上？

在这两种情况下，标签的 HTML 代码是相同的。第一的：

```
<span class="pieLabel" id="pieLabel1" style="position: absolute; top: 525px; left: 347px;">
<div class="graph-label">
    CHO-60
    <br>
    69%
</div>
</span> 
```

第二：

```
<span class="pieLabel" id="pieLabel1" style="position: absolute; top: 505px; left: 293px;">
<div class="graph-label">
    CHO-60
    <br>
    69%
</div>
</span> 
```

# php - Nginx：如果重定向后返回响应 200，则删除 404 日志

> ID：13785916
> 
> 赞同：1
> 
> 时间：2012-12-09T08:40:58.933
> 
> 标签：php, nginx, http-status-code-404

使用 Nginx，我截获文件夹中某些 JS 文件的 404 错误，并重定向到尝试创建/返回好文件的 PHP 脚本，成功时响应代码为 200。

但 Nginx 继续写入 error.log，因为第一次尝试返回 404 标头。

如果重定向导致 200 响应代码，我可以禁用此写入吗？

我在 Nginx 中对这些文件的配置：

```
 location /assets/js/minified/ {
            error_page 404 /index.php?controller=404&action=create_js;
    } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:48:03.833

我想`try_files`更适合您的用例

```
location /assets/js/minified/ {
  try_files $uri /index.php?controller=404&action=create_js;
} 
```

请参阅[文档](http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files)

否则（如果您出于任何原因不喜欢`try_files`），有一个[`log_not_found`](http://nginx.org/en/docs/http/ngx_http_core_module.html#log_not_found)指令禁止将 404 写入 error.log。

# javafx - 从 bin 文件夹以外的文件夹加载 fxml 文件时出错

> ID：13785919
> 
> 赞同：2
> 
> 时间：2012-12-09T08:41:25.730
> 
> 标签：javafx, fxml, scenebuilder

我是一个相当新的java程序员。我只有大约五周的经验，从零开始，如果在 Scene Builder 中创建的 javafx fxml 文件与控制器类不在同一个文件夹中，我无法正确加载它们。

我在用

```
Win7x64 running jre7x86 for this build

Eclipse Juno Service Release 1
Build id: 20120920-0800

jre version 1.7.0_07

javaFx version 2.2.1-b03

SceneBuilder version 1.0-b50 
```

我的场景加载器代码是

```
private static final String RESOURCE_PATH = "/resources/";
public static Stage buildStage(@SuppressWarnings("rawtypes") Class pClass,
         String stageTitle, String resourceLocation)
   {
      Stage temp = new Stage();
      Pane page = null;
      try
      {
         page = FXMLLoader.load(pClass.getResource(RESOURCE_PATH + resourceLocation), null,
               new JavaFXBuilderFactory());
      }
      catch (IOException e)
      {
         e.printStackTrace();
      }
      Scene scene = new Scene(page);
      temp.setScene(scene);
      temp.setTitle(stageTitle);
      temp.setResizable(false);
      return temp;
   } 
```

我知道项目目录是`/workspace/projectName/`理论上加载器应该能够找到文件，如果它给出了相对路径，对吗？我得到的错误是

```
Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException: Location is required.
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2737)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2721)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2707)
    at outofunit.system.StageFactory.buildStage(StageFactory.java:32)
    at outofunit.desktop.ArcMaster.start(ArcMaster.java:28)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    ... 1 more 
```

我也试过给加载器一个绝对路径，但它只是不接受任何不在同一个目录中的东西。我在这里抓住稻草试图解决这个问题。

我试图自己研究这个，但我没有得到太多，这里的几个看起来相似的答案似乎没有帮助，或者我太密集和/或没有经验来理解它们。它们是[JavaFX 2.0 加载带有事件处理程序的 fxml 文件失败](https://stackoverflow.com/questions/10411164/javafx-2-0-loading-fxml-files-with-event-handlers-fails)和[JavaFX 2.0 FXML 资源加载错误](https://stackoverflow.com/questions/10405288/javafx-2-0-fxml-resource-loading-error)

我的一个朋友通过使用此代码能够克服这个问题

```
public void load(String pFileName, Stage pStage, String pTitle)
   {
      String fName = RESOURCE_PATH + pFileName;

      try
      {
         String externalForm = getClass().getResource(fName)
            .toExternalForm();

         InputStream inStream = new URL(externalForm).openStream();

         FXMLLoader loader = new FXMLLoader();
         Pane p = (Pane)loader.load(inStream);

         pStage.setTitle(pTitle);
         pStage.setScene(new Scene(p));

         mWindowControl = loader.getController();
         mWindowControl.setUp(pStage);

         pStage.show();
      }
      catch (Exception e)
      {
         e.printStackTrace();
      }
   } 
```

最大的区别和我没有使用他的代码的原因是因为我的根窗格是锚窗格而不是普通窗格，并且他的 URL instream 方式强制使用普通窗格。我没有使用普通窗格作为我的基础有错吗？我希望你们能提供任何帮助或意见。谢谢你。

编辑：所以我一直在解决这个问题，错误信息已经改变。

我把代码改成了这个

```
private final String RESOURCE_PATH = "resources/";
public void load(String pFileName, Stage pStage, String pTitle)
   {
      String fName = RESOURCE_PATH + pFileName;

      Pane page = null;

      FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(fName));

      try
      {
         page = (Pane) fxmlLoader.load();
      }
      catch (IOException exception)
      {
         throw new RuntimeException(exception);
      }

      Scene scene = new Scene(page);
      pStage.setScene(scene);
      pStage.setTitle(pTitle);

      mWindowControl = fxmlLoader.getController();
      mWindowControl.setUp(pStage);

      pStage.show();
   } 
```

但我现在得到的错误是

```
java.lang.IllegalStateException: Location is not set.
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2021)
    at outofunit.desktop.WindowLoader.load(WindowLoader.java:136)
    at outofunit.desktop.WindowLoader.load(WindowLoader.java:62)
    at outofunit.desktop.ArcMaster.start(ArcMaster.java:30)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Unknown Source) 
```

我不明白如何没有设置位置

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-27T05:02:03.053

这是一个路径问题，java 需要知道从包层次结构中获取文件的位置。所以使用`"/package1/resourcename.fxml"`应该从树的根部找到源。`"/"`由于您已经在包树的顶部，因此您通常会在开始时不使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T17:29:55.847

这两个例外都说“在您提供的位置找不到您尝试加载的（FXML）文件”。您的文件名或路径错误。给出您的包结构或至少包含`load(String pFileName, Stage pStage, String pTitle)`方法的类文件的路径以及您要加载的 FXML 文件的路径。阅读网上的 javadoc API`getResource()`并检查有关它的示例代码。

# c++ - 在 dll 中嵌入 SWI-Prolog

> ID：13785922
> 
> 赞同：2
> 
> 时间：2012-12-09T08:41:41.937
> 
> 标签：c++, dll, prolog, swi-prolog

我正在构建一个 C++ 库（windows、DLL），我想嵌入 swi-prolog 以获得一些功能。
我正在做的是：

```
#include <Windows.h>
#include <SWI-Prolog.h>

BOOL WINAPI DllMain(
    HINSTANCE hinstDLL,  // DLL モジュールのハンドル
    DWORD fdwReason,     // 関数を呼び出す理由
    LPVOID lpvReserved   // 予約済み
)
{
    BOOL result = TRUE;

    switch(fdwReason)
    {
        case DLL_PROCESS_ATTACH:
        {
            char* av[]{"libswipl.dll"};

            _putenv(R"(SWI_HOME_DIR=C:\Program Files (x86)\swipl\)");

            if(!PL_initialise(1, av))
            {
                result = TRUE;
            }
            else
            {
                PL_halt(1);
                result = FALSE;
            }

            break;
        }

        case DLL_PROCESS_DETACH:
        {
            result = PL_cleanup(1);
            break;
        }
        case DLL_THREAD_ATTACH:
        case DLL_THREAD_DETACH:
            break;
    }

    return result;
} 
```

并包括“libswipl.lib”，从“swipl\lib\libswipl.dll.a”重命名。

首先，由于缺少 dll，它会出错，所以我将它们复制到我的可执行文件夹中，直到它满意为止（特别是 libswipl.dll；libgmp-10.dll；pthreadGC2.dll）。

我不需要在可执行文件中包含 pl 文件（这是 swipl-ld 的作用吗？），因为我想稍后通过代码动态地添加事实和规则，因此可以使用清晰的状态进行初始化。

我想知道的是，如何摆脱依赖项（SWI_HOME_DIR）并使其独立？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T15:42:33.153

首先，我不建议在**DllMain**中初始化 prolog ，请参见此处：

*   [这里](https://stackoverflow.com/a/1688373/1909893)
*   [这里](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/8573e40b-1c56-4ead-9d1b-d2bc284638da)
*   [和这里](http://www.voyce.com/index.php/2009/12/03/dont-do-anything-in-dllmain-please/)

但是，您仍然可以使用它并检查是否存在依赖库，不仅**libswipl.dll** ~~从版本 5.10~~~~更改为**swipl.dll**~~，而且：

*   64 位的 pthreadVC2.dll 或 32 位的 pthreadVC.dll
*   plterm.dll（可选，终端仿真）

然后，我将添加和导出一个函数来初始化 prolog，并设置所需的参数（例如：保存状态文件名或 boot32.prc/boot64.prc、标志等）。

而且，当您将所有必需的参数传递给您的 PL_initialise 函数时，您不需要**SWI_HOME_DIR 。**

此外，在多线程环境的情况下，需要这些调用：**PL_thread_attach_engine**和**PL_thread_destroy_engine**。

有关该主题的更多信息在这里：[swi-prolog](http://www.swi-prolog.org/pldoc/doc_for?object=section%280,%270%27,swi%28%27/doc/packages/pl2cpp.html%27%29%29)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:57:11.430

我从未使用过 SWI-Prolog，但查看已[安装](http://www.swi-prolog.org/windows.html#sec:3.3)的文件，那里安装的一些文件似乎是运行 prolog 引擎所必需的。

如果您的意思是要将所有内容嵌入到您的 dll 中，那可能是不可能的，唯一的方法是修改 swi-prolog 本身。但这并不容易。

如果您只是不想安装 swi-prolog 来运行您的程序。您可以创建自己的安装程序，其中包含运行 swi-prolog 的所有文件，并将其包含在您自己的（子）目录中。您仍然需要设置 SWI_HOME_DIR，但您将知道可执行文件的相对目录。

如果不想使用 _putenv 设置 SWI_HOME_DIR，也可以在 windows 系统设置中将 SWI_HOME_DIR 设置为正确的值。

# java - 微调器选择到字符串

> ID：13785923
> 
> 赞同：1
> 
> 时间：2012-12-09T08:41:52.893
> 
> 标签：java, android, string, android-intent, spinner

我有这个代码

```
go_btn.setOnClickListener(new View.OnClickListener() {

          public void onClick(View v) {
              Intent myIntent = new Intent(LoginActivity.this, WebActivity.class);
              myIntent.putExtra("id", ed_txt.getText().toString());
              myIntent.putExtra("type", spinner.getText().toString());
              LoginActivity.this.startActivity(myIntent); 
```

我希望将微调器中的选定选项添加到我的字符串中。

这给了我一个错误

```
myIntent.putExtra("type", spinner.getText().toString()); 
```

当我使用

```
myIntent.putExtra("type", spinner.getContext().toString()); 
```

我正在获取我的包裹名称。

我如何获得我选择的项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:45:20.067

采用

```
myIntent.putExtra("type", spinner.getSelectedItem().toString()); 
```

代替

```
myIntent.putExtra("type",spinner.getText().toString()); 
```

从 Spinner 获取选定的项目文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:53:39.887

您必须向微调器添加一个侦听器才能获取所选项目。它应该是这样的

```
String selection = null;
//Initialise Spinner (you may have done this already)

Spinner spinner = (Spinner) findViewById(R.id.[your spinner id]);

    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            selection = parent.getItemAtPosition(pos).toString();
        }
        public void onNothingSelected(AdapterView<?> parent) {
        }
    }) 
```

然后，您可以使用将“选择”字符串放入您的意图中。祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:45:49.593

只需检查此代码，我希望此代码有用，

```
String getSelectItem = "null"; 
```

Spinner spinner = (Spinner) findViewById(R.id.[your spinner id]);

```
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        getSelectItem = spinner.getSelectedItem().toString();
    }
    public void onNothingSelected(AdapterView<?> parent) {
    }
}); 
```

# date - 如何舍入 Pandas `DatetimeIndex`？

> ID：13785932
> 
> 赞同：14
> 
> 时间：2012-12-09T08:42:47.233
> 
> 标签：date, datetime, numpy, pandas, date-format

我有一个`pandas.DatetimeIndex`，例如：

```
pd.date_range('2012-1-1 02:03:04.000',periods=3,freq='1ms')
>>> [2012-01-01 02:03:04, ..., 2012-01-01 02:03:04.002000] 
```

我想将日期（`Timestamp`s）四舍五入到最接近的秒数。我怎么做？预期结果类似于：

```
[2012-01-01 02:03:04.000000, ..., 2012-01-01 02:03:04.000000] 
```

是否可以通过将 Numpy 舍入`datetime64[ns]`为秒而不更改`dtype` `[ns]`?

```
np.array(['2012-01-02 00:00:00.001'],dtype='datetime64[ns]') 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-09T14:28:02.343

更新：如果您对 DatetimeIndex / datetime64 列执行此操作，更好的方法是`np.round`直接使用而不是通过应用/映射：

```
np.round(dtindex_or_datetime_col.astype(np.int64), -9).astype('datetime64[ns]') 
```

旧答案（有更多解释）：

虽然@Matti 的答案显然是处理您的情况的正确方法，但我想我会添加一个答案，您可以如何将时间戳四舍五入到最接近的秒数：

```
from pandas.lib import Timestamp

t1 = Timestamp('2012-1-1 00:00:00')
t2 = Timestamp('2012-1-1 00:00:00.000333')

In [4]: t1
Out[4]: <Timestamp: 2012-01-01 00:00:00>

In [5]: t2
Out[5]: <Timestamp: 2012-01-01 00:00:00.000333>

In [6]: t2.microsecond
Out[6]: 333

In [7]: t1.value
Out[7]: 1325376000000000000L

In [8]: t2.value
Out[8]: 1325376000000333000L

# Alternatively: t2.value - t2.value % 1000000000
In [9]: long(round(t2.value, -9)) # round milli-, micro- and nano-seconds
Out[9]: 1325376000000000000L

In [10]: Timestamp(long(round(t2.value, -9)))
Out[10]: <Timestamp: 2012-01-01 00:00:00> 
```

因此，您可以将其应用于整个索引：

```
def to_the_second(ts):
    return Timestamp(long(round(ts.value, -9)))

dtindex.map(to_the_second) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-09-03T19:02:03.680

`round()`pandas 0.18.0 中为 DatetimeIndex、Timestamp、TimedeltaIndex 和 Timedelta 添加了方法。现在我们可以执行以下操作：

```
In[114]: index = pd.DatetimeIndex([pd.Timestamp('2012-01-01 02:03:04.000'), pd.Timestamp('2012-01-01 02:03:04.002'), pd.Timestamp('20130712 02:03:04.500'), pd.Timestamp('2012-01-01 02:03:04.501')])

In[115]: index.values
Out[115]: 
array(['2012-01-01T02:03:04.000000000', '2012-01-01T02:03:04.002000000',
       '2013-07-12T02:03:04.500000000', '2012-01-01T02:03:04.501000000'], dtype='datetime64[ns]')

In[116]: index.round('S')
Out[116]: 
DatetimeIndex(['2012-01-01 02:03:04', '2012-01-01 02:03:04',
               '2013-07-12 02:03:04', '2012-01-01 02:03:05'],
              dtype='datetime64[ns]', freq=None) 
```

`round()`接受频率参数。[它的字符串别名在此处](http://pandas.pydata.org/pandas-docs/stable/timeseries.html#offset-aliases)列出。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T14:17:10.880

更改索引本身没有什么意义 - 因为您可以`date_range`像您的问题一样使用所需的频率参数生成使用。

我假设您尝试做的是更改包含数据的时间序列的频率，在这种情况下您可以使用`resample`（[文档](http://pandas.pydata.org/pandas-docs/stable/timeseries.html#up-and-downsampling)）。例如，如果您有以下时间序列：

```
dt_index = pd.date_range('2012-1-1 00:00.001',periods=3, freq='1ms')
ts = pd.Series(randn(3), index=dt_index)

2012-01-01 00:00:00           0.594618
2012-01-01 00:00:00.001000    0.874552
2012-01-01 00:00:00.002000   -0.700076
Freq: L 
```

然后您可以使用重新采样将频率更改为秒，指定您希望如何聚合值（平均值、总和等）：

```
ts.resample('S', how='sum')

2012-01-01 00:00:00    0.594618
2012-01-01 00:00:01    0.174475
Freq: S 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-28T22:01:29.727

`Timestamp`对于更一般的舍入，您可以利用 Pandas对象主要使用标准库`datetime.datetime`API的事实，包括[`datetime.datetime.replace()`](https://docs.python.org/2/library/datetime.html#datetime.datetime.replace)方法。

因此，要解决您的微秒舍入问题，您可以这样做：

```
import datetime
import pandas as pd

times = pd.date_range('2012-1-1 02:03:04.499',periods=3,freq='1ms')
# Add 5e5 microseconds and truncate to simulate rounding
times_rounded = [(x + datetime.timedelta(microseconds=5e5)).replace(microsecond=0) for x in times]

from IPython.display import display
print('Before:')
display(list(times))
print('After:')
display(list(times_rounded)) 
```

输出：

```
Before:
[Timestamp('2012-01-01 02:03:04.499000', offset='L'),
 Timestamp('2012-01-01 02:03:04.500000', offset='L'),
 Timestamp('2012-01-01 02:03:04.501000', offset='L')]
After:
[Timestamp('2012-01-01 02:03:04', offset='L'),
 Timestamp('2012-01-01 02:03:05', offset='L'),
 Timestamp('2012-01-01 02:03:05', offset='L')] 
```

您可以使用相同的技术，例如，四舍五入到最近的一天（只要您不关心闰秒等）：

```
times = pd.date_range('2012-1-1 08:00:00', periods=3, freq='4H')
times_rounded = [(x + datetime.timedelta(hours=12)).replace(hour=0, second=0, microsecond=0) for x in times] 
```

受此 SO 帖子的启发：[https ://stackoverflow.com/a/19718411/1410871](https://stackoverflow.com/a/19718411/1410871)

# php - 交替出现错误（文档末尾的额外内容）

> ID：13785933
> 
> 赞同：2
> 
> 时间：2012-12-09T08:43:28.403
> 
> 标签：php, xml

加载 xml 文件时出现错误。我得到了许多与该主题相关的答案，但我真的找不到为什么这个错误可能会出现在我的文件中。

```
Warning: DOMDocument::load() [<a href='domdocument.load'>domdocument.load</a>]: Extra content at the end of the document 
```

当我运行该文件时，它运行成功，但是当我重新加载它时，它给出了上述错误，而不是添加另一个节点。但是，下次我重新加载时它会再次成功运行。这种情况交替发生。请有人告诉我为什么会发生这种情况以及如何解决问题。

我正在使用这个 php 代码来编辑 xml 文件：

```
<?php
$dom = new DomDocument("1.0", "UTF-8");
$dom->load('filename.xml');

$noteElem = $dom->createElement('note');
$toElem = $dom->createElement('to', 'Chikck');
$fromElem = $dom->createElement('from', 'ewrw');

$noteElem->appendChild($toElem);
$noteElem->appendChild($fromElem);

$dom->appendChild($noteElem);
$dom->formatOutput = TRUE;
//$xmlString = $dom->saveXML();
//echo $xmlString;
$dom->save('filename.xml');
?> 
```

这是我正在编辑的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<note>
  <to>Chikck</to>
  <from>ewrw</from>
</note> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T11:54:18.480

额外的内容错误是由两个相同的节点（在本例中为`note`节点）作为根元素引起的。

例如，您可以添加一个新的根元素`notes`，然后`note`在其中添加更多元素。

这是一个使用 simplexml 库的示例（只是因为我使用了这个并且我熟悉它）

新文件名2.xml：（添加`notes`元素作为根）

```
<?xml version="1.0" encoding="UTF-8"?>
<notes>
    <note>
        <to>Chikck</to>
        <from>ewrw</from>
    </note>
</notes> 
```

PHP 脚本：

```
<?php
    $xml = simplexml_load_file('filename2.xml');
    $note = $xml->addChild('note');
    $to = $note->addchild('to', 'Chikck');
    $from = $note->addChild('from', 'ewrw');
    $xml->asXML('filename2.xml');
?> 
```

运行脚本后的filename2.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<notes>
    <note>
        <to>Chikck</to>
        <from>ewrw</from>
    </note>
    <note>
        <to>Chikck</to>
        <from>ewrw</from>
    </note>
</notes> 
```

# java - 从 JSP 迁移到 ASP.Net，如何使用数据库操作 page.aspx？

> ID：13785934
> 
> 赞同：0
> 
> 时间：2012-12-09T08:43:38.787
> 
> 标签：java, asp.net, .net, jsp, jakarta-ee

当我以前在 JSP 页面上工作时，我曾经做过这样的事情：

```
<% rset = stmt.execute ("select * from users");
   while(rset.next()) {    %>
   <div> <%=rset.getString(1)%> </div>
<% } %> 
```

我曾经根据数据库结果来操纵页面的外观。

现在我在 ASP.Net 上工作，使用 Visual Studio 和 sqlserver，我还是个新手，我怎么能在 ASP 中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:46:00.087

我认为您正在处理网络表单！最基本的方法是放置“文字”而不是您的 JSP 标记，并在 page_load 或回发的代码中设置这些文字的值。

# javascript - 识别输入的结束和开始并将它们保存为变量

> ID：13785938
> 
> 赞同：0
> 
> 时间：2012-12-09T08:44:41.803
> 
> 标签：javascript, regex

我在 JS 中寻找可以帮助我识别一组数字何时开始和结束的东西（通过空格或其他不是数字或字母的字符）。

例如：假设用户输入 - `2424+345`（是的，我正在构建一个计算器）。我想确定数字何时开始和结束（在`+`标志开始时结束）。然后它将它保存为一个变量供以后使用，并继续读取第二组数字并将其分配给一个变量。我可以遍历输入，但我不知道如何编写执行所有检查和分配的规则。

`Regex`似乎是要走的路，但我对它的经验很少（已经用它做了一些简单的表单验证）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:46:45.703

要查找字符串中的第一个数字，正则表达式将是`/^\d+/`，例如：

```
var str = "2424+345";
var match = /^\d+/.exec(str);
if (match) {
    // match[0] now contains "2424"
} 
```

把它放在一个循环中，消耗运营商......

# php - 将 AIML 与 PHP 结合使用

> ID：13785940
> 
> 赞同：5
> 
> 时间：2012-12-09T08:44:56.290
> 
> 标签：php, aiml

简单地说，我可以将 AIML 与 PHP 一起使用吗？如果是，那我该怎么做？

我试过在谷歌上搜索它，但我找不到有帮助的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T09:34:39.657

是的，这是绝对可能的。

[Program O](http://blog.program-o.com/)将是一个无需重新发明轮子就可以开始制作机器人的好方法，Program O 是一个用 PHP 编写的 AIML 解释器，并使用 MySQL 数据库存储聊天机器人信息，包括用于制定聊天机器人响应的 AIML 文件。

你也可以在[gitHub](https://github.com/Program-O/Program-O)上获得它

# objective-c - 对具有日期的数组进行排序

> ID：13785943
> 
> 赞同：-4
> 
> 时间：2012-12-09T08:45:06.327
> 
> 标签：objective-c

我有一个`NSMutableArray`，我想按日期对它进行降序排序。日期看起来像：

2012 年 12 月 7 日星期五 08:40:33 +0100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:46:17.057

如果数组中只有日期，则可以按以下方式排序：

```
NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: NO];
return [myArray sortedArrayUsingDescriptors: [NSArray arrayWithObject: sortOrder]]; 
```

或使用块

```
NSArray *reverseOrderUsingComparator = [dateArray sortedArrayUsingComparator: 
                                       ^(id obj1, id obj2) {
                                           return [obj2 compare:obj1];
                                       }]; 
```

编辑：

根据讨论，请检查代码：

假设您有一个具有以下属性的类：

```
//MyClass.h
@interface MyClass : NSObject

@property(strong) NSString *title;
@property(strong) NSString *description;
@property(strong) NSDate *pubDate;

@end 
```

* * *

```
//MyClass.m
@implementation MyClass
- (id)init
{
    self = [super init];
    if (self) {
        _title=[NSString new];
        _description=[NSString new];
        _pubDate=[NSDate new];
    }
    return self;
}

-(NSComparisonResult)comparePubDate:(MyClass *)pd{
    return [_pubDate compare:[pd pubDate]];
}
@end 
```

* * *

在你有对象数组的类中

在.h

```
@property(strong) NSMutableArray *myClassObjects; 
```

在.m

```
-(NSDate *)dateInMyFormat:(NSString *)dateString{
    NSDateFormatter *dateFormatter = [NSDateFormatter new];
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss z"];
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"EN"]];
    NSDate *myDate=[dateFormatter dateFromString:dateString];

    return myDate;    
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    MyClass *obj1=[MyClass new];
    [obj1 setTitle:@"obj1 title"];
    [obj1 setDescription:@"obj1 description"];
    [obj1 setPubDate:[self dateInMyFormat:@"Fri, 07 Dec 2012 08:40:33 +0100"]];

    MyClass *obj2=[MyClass new];
    [obj2 setTitle:@"obj2 title"];
    [obj2 setDescription:@"obj2 description"];
    [obj2 setPubDate:[self dateInMyFormat:@"Fri, 08 jan 2012 08:40:33 +0100"]];

    MyClass *obj3=[MyClass new];
    [obj3 setTitle:@"obj3 title"];
    [obj3 setDescription:@"obj3 description"];
    [obj3 setPubDate:[self dateInMyFormat:@"Fri, 08 jan 2012 06:40:33 +0100"]];

    MyClass *obj4=[MyClass new];
    [obj4 setTitle:@"obj4 title"];
    [obj4 setDescription:@"obj4 description"];
    [obj4 setPubDate:[self dateInMyFormat:@"Fri, 01 Jan 2012 08:40:33 +0100"]];

    [_myClassObjects addObject:obj1];
    [_myClassObjects addObject:obj2];
    [_myClassObjects addObject:obj3];
    [_myClassObjects addObject:obj4];

    for (MyClass *object in _myClassObjects) {
        NSLog(@"Title:%@, %@, %@",object.title, object.description, object.pubDate);
    }

    //for sorting
    NSArray *sortedArray=[_myClassObjects sortedArrayUsingSelector:@selector(comparePubDate:)];
    _myClassObjects=(NSMutableArray *)sortedArray;

    NSLog(@"After sorting");
    for (MyClass *object in _myClassObjects) {
        NSLog(@"Title:%@, %@, %@",object.title, object.description, object.pubDate);
    }
} 
```

# css - 如何在 div 中垂直居中 img？

> ID：13785947
> 
> 赞同：1
> 
> 时间：2012-12-09T08:45:50.560
> 
> 标签：css, vertical-alignment

我有一个`<img>`我想以`<div>`. 我在这里找到的所有以前的答案都使用了一些技巧或要求您知道图像的宽度，这在我的情况下有所不同。

在父对象上水平居中`text-align: center`很容易。我不知道如何垂直对齐。

**[jsFiddle 示例](http://jsfiddle.net/ZfMYy/)**

仅供参考，Facebook 仅使用 HTML 和 CSS 就可以很好地做到这一点。所以请不要`<table>`或javascript hacks。看起来他们正在使用一些东西`line-height`来使他们的`<img>`垂直中心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:10:13.540

请记住，`vertical-align: middle;`它本身没有用，您还需要设置 line-height: `line-height:400px;`。

`<div>`如果您的文本中没有其他文本（可能只有一行），这很有用。

工作示例：http: [//jsfiddle.net/kobi/ZfMYy/5/](http://jsfiddle.net/kobi/ZfMYy/5/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T08:50:56.307

在您的 css 类中添加一条规则：

```
 {vertical-align:middle;} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T08:51:46.237

```
html, body, #wrapper {
   height:100%;
   width: 100%;
   margin: 0;
   padding: 0;
   border: 0;
}
#wrapper td {
   vertical-align: middle;
   text-align: center;
}

<html>
<body>
   <table id="wrapper">
      <tr>
         <td><img src="logo.png" alt="" /></td>
      </tr>
   </table>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-09T09:08:52.340

正如@kobi 在评论中提到的那样，您需要做的就是`line-height`在您的contains 上设置 a `div`。没有桌子。

[垂直居中图像的 jsFiddle 示例](http://jsfiddle.net/kobi/ZfMYy/5/)

# ruby - 在哈希数组中查找值

> ID：13785949
> 
> 赞同：-1
> 
> 时间：2012-12-09T08:46:03.763
> 
> 标签：ruby

```
taglist = [{:name=>"Daniel_Xu_Forever", :tag=>["helo", "world"]},   
{:name=>"kcuf", :tag=>["hhe"]},  
{:name=>"fine", :tag=>[]},   
{:name=>"how hare you", :tag=>[]},  
{:name=>"heki", :tag=>["1", "2", "3"]}, 
{:name=>"railsgirls", :tag=>[]},  
{:name=>"_byoy", :tag=>[]},   
{:name=>"ajha", :tag=>[]},  
{:name=>"nimei", :tag=>[]}] 
```

如何从 taglist 中获取指定名称的标签

例如，我想提取用户`"fine"`的标签？

这可以在没有`do`迭代器的情况下实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:08:21.453

这将返回`:tag`任何用户名的密钥内容`== 'fine'`

```
taglist.select { |x| x[:name] == 'fine' }.map { |u| u[:tag] } 
```

首先，您只选择您感兴趣的用户[`.select`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-select)。

然后使用[`.map`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)来收集只有你想要的东西的数组。

在这种情况下，最终结果将是：`[]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:21:00.263

不，没有循环就无法完成。

即使你找到了一个解决方案，你的代码可以避免循环，你调用的库函数肯定会包含一个循环。在数组中查找元素需要循环。时期。

例如，举这个（人为的）例子

```
 pattern = "fine"
  def pattern.===(h); self == h[:name]; end
  taglist.grep(pattern) 
```

这似乎没有使用循环，而是`grep`使用循环实现的调用。

或者另一个同样人为的例子

```
 class Hash; def method_missing(sym); self[sym]; end; end
  taglist.group_by(&:name)["fine"] 
```

这似乎确实在`group_by`没有循环的情况下调用，但实际上确实如此。

所以答案是，不。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T09:34:54.747

真的`do`是迭代器吗？

```
taglist.find{|tl| tl[:name] == 'fine'}[:tag] 
```

只是愚蠢的如何：

```
eval taglist.to_s[/:name=>"fine", :tag=>(.*?)}/, 1]
#=> [] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T09:35:07.463

所以我的第一个答案错过了没有`do`规则。这是一个不使用`do`块的答案。

```
i=0
begin
  if taglist[i][:name] == 'fine'
    tag = taglist[i][:tag]
    break
  end
  i+=1
end while i < taglist.length - 0 
```

从技术上讲，我认为这仍在使用块。但可能满足限制。

# c# - System.TypeCode 枚举中异常的字符串类型代码

> ID：13785952
> 
> 赞同：3
> 
> 时间：2012-12-09T08:46:42.683
> 
> 标签：c#, string

在 .NET`System.TypeCode`枚举中，值如下：

```
public enum TypeCode {
  ...
  Double=14,
  Decimal=15,
  DateTime=16,
  String=18,
  } 
```

字符串等于 18.. 为什么不是 17？逻辑在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T08:48:54.533

您可以按任何顺序将任何数字（在您的情况下为整数）分配给枚举元素。如果 value 没有明确分配，那么默认情况下第一个 value 将是`0`. 所有其他未明确分配的值都会将前一个元素的值加一：

```
public enum TypeCode 
{
   Double = 42,
   Decimal, // 43
   DateTime = 0,
   String = 18  
} 
```

**更新**

为什么缺少`System.TypeCode`值`17`- 因为曾经有`TimeSpan`类型，但[它被删除了](http://blogs.ugidotnet.org/adrian/archive/2008/03/17/91755.aspx)。

# c - 标准 C 中移位或算术运算的扩展

> ID：13785955
> 
> 赞同：0
> 
> 时间：2012-12-09T08:46:47.847
> 
> 标签：c, c99, c11

抱歉英语不好。

```
uint16_t a, c;
uint8_t b = 0xff;

a = b<<8;
c = b*10; 
```

什么是价值，`a`我们`c`得到了什么？任意整数类型的情况如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:36:11.893

```
uint16_t a, c;
uint8_t b = 0xff;

a = b<<8; 
```

首先，整数提升是在 的参数上执行的`<<`。常数`8`是一个`int`，因此不被转换。由于 的转换等级`uint8_t`小于 的`int`，并且 的所有值`uint8_t`都可以表示为`int`s，`b`因此将其转换为 - 保留其值 - 为`int`。然后将结果`int`值左移八位。

如果`int`仅 16 位宽，则该值`0xff * 2^8`不能表示为`int`，然后移位调用未定义的行为 - n1570 和 C99 中的 6.5.7 (4)：

> 如果 E1 有带符号类型和非负值，并且 E1 × 2 ^(E2)在结果类型中是可表示的，那么这就是结果值；否则，行为未定义。

否则，结果为`255*256 = 65280 = 0xFF00`。由于该值可以以 的类型表示`a`，`int`因此将移位结果转换为`uint16_t`保留该值；如果结果超出范围（例如，如果移位距离为 9 [并且`int`足够宽]），则将对其进行模数减少`2^16`以获得范围`0`为`2^16 - 1`的值`uint16_t`。

```
c = b*10; 
```

通常的算术转换是在 的操作数上执行的`*`。两个操作数都具有整数类型，因此首先执行整数提升。由于`10`is an和's 类型的`int`所有值都可以表示为 an ，因此整数提升使两个操作数具有相同的类型，，并且通常的算术转换不需要任何进一步的转换。乘法是在 type 处完成的，其结果 ,再次可以在 的类型中表示，因此在将值存储到保留值之前完成到该值的转换。`b``int``int``int``2550``c``uint16_t``c`

> 任意整数类型的情况如何？

对于`<<`：

1.  整数促销；整数类型的值/表达式，其转换等级小于或等于`int`(and `unsigned int`) [宽度`<=`为] 的整数类型，类型为,和`(unsigned) int`的位域转换为or (如果可以表示原始类型，否则）。`_Bool``int``signed int``unsigned int``int``unsigned int``int``unsigned int`

2.  如果（提升的）右操作数（移位距离）为负数或大于或等于（提升的）左操作数的宽度（值位加符号位的数量；有一个符号位或没有），则行为是不明确的。如果（提升的）左操作数的值为负数，则行为未定义。如果（提升的）左操作数的类型是无符号的，则结果是`value * 2^distance`，减少模`2^width`。如果（提升的）左操作数的类型是有符号的且值为非负数，则结果是`value * 2^distance`如果该类型可表示，否则行为未定义。

3.  如果 2\. 中没有发生未定义的行为，则将结果转换为存储它的变量的类型。

    *   如果目标类型是`_Bool`（或其别名），则将非零结果转换为 1，将零结果转换为 0，否则
    *   如果结果可以用目标类型表示，则保留其值，否则
    *   如果目标类型是无符号的，则结果是减少模`2^width`，否则
    *   结果以实现定义的方式转换或引发实现定义的信号。

对于`*`：

1.  执行通常的算术转换，以便两个（转换后的）操作数具有相同的类型。
2.  乘法是在结果类型上执行的；如果那是有符号整数类型并且乘法溢出，则行为未定义。
3.  结果以与上述相同的方式转换为目标类型。

* * *

这就是抽象机的定义方式，如果实现可以以另一种方式实现相同的结果（定义行为的地方），它可以在 as-if 规则下为所欲为。

# javascript - 在jquery dataTable中显示只是日期而不是时间部分，而是在日期和时间部分上进行排序？

> ID：13785958
> 
> 赞同：0
> 
> 时间：2012-12-09T08:47:02.497
> 
> 标签：javascript, jquery-ui, datetime, datatables

我正在从服务器发送日期作为字符串，如下所述，其中包含日期和时间部分，如 2010-12-07 17:35:04.127。我想要的只是在数据表列中显示日期而不是时间部分，即 2010-12-07。但我也希望排序发生在完整的日期，包括时间部分。因此，在 2010-12-07 18:35:04.12 创建的客户应显示在 dataTable 列中的 2010-12-07 17:35:04.12 上方。这是我在数据表中的特定日期列代码片段

```
 "aoColumns": [ { "mDataProp": "customerCreated","bSearchable": false,
                           "fnRender": function ( o, val  ) 
                               {
                               var javascriptDate = new Date(o.aData["customerCreated"]);
                               javascriptDate = javascriptDate.getFullYear()+"/"+javascriptDate.getMonth()+"/"+javascriptDate.getDate();
                               return "<div class= date>"+javascriptDate+"<div>";
                               }

                       } ] 
```

我面临的问题是： -

1) 在 IE 和 Mozilla 上，日期显示为 NaN/NaN/NaN。**不明白为什么？**

2）在Chrome上显示日期但月份显示减1。**为什么javascriptDate.getMonth（）返回月份减1？**

**3）如果采取上述路线，我只显示日期部分但希望在包括日期部分的完整日期进行排序，我不确定排序是否有效？**

仅供参考，我将 bserverSide 用作 false 。基本上我是一次性从服务器获取数据并在客户端进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:55:31.320

JS 月份以 0 开头，日期需要 / 而不是 -

[与使用不同浏览器的 JavaScript 中的日期格式问题](https://stackoverflow.com/a/3566222/295783)相关

试试这个[演示](http://jsfiddle.net/mplungjan/YRKLt/)

```
function getFormattedDate(dString) {
  var d = new Date(dString.split(".")[0].replace(/-/g,"/")); // assuming 2010-12-07 17:35:04.127
  var mm = d.getMonth()+1;
  var dd = d.getDate();
  if (mm<10)mm="0"+mm;
  if (dd<10)dd="0"+dd;
  return d.getFullYear()+"/"+mm+"/"+dd;
}

"aoColumns": [ { "mDataProp": "customerCreated","bSearchable": false,
  "fnRender": function ( o, val  ) {
    return "<div class= date>"+getFormattedDate(o.aData["customerCreated"])+"<div>";
  }
} ] 
```

如果你也需要时间，那就是

```
function getFormattedDate(dString) {
  var d = new Date(dString.split(".")[0].replace(/-/g,"/")); // assuming 2010-12-07 17:35:04.127
  var mm = d.getMonth()+1;
  var dd = d.getDate();
  if (mm<10)mm="0"+mm;
  if (dd<10)dd="0"+dd;
  var hh = d.getHours();
  var min = d.getMinutes();
  if (hh<10) hh="0"+hh;
  if (min<10) min="0"+min;
  return d.getFullYear()+"/"+mm+"/"+dd+" "+hh+":"+min;
} 
```

# translation - gettext 的合并过程 - 如何删除旧字符串

> ID：13785967
> 
> 赞同：1
> 
> 时间：2012-12-09T08:48:05.443
> 
> 标签：translation, gettext, xgettext

我想改进我的 gettext 翻译文件流程，所以我只有一个 .po 文件用于应用程序，以避免在将文件发送到翻译机构时重复翻译工作并减少加载合并。

挑战在于初始解析将始终创建两个单独的文件（一个使用 poedit 从 PHP 解析，一个使用 tsmarty2c.php 从 smarty 解析）。所以我查看了 msgcat 并想出了这个过程：

```
1\. parse from PHP files (using poedit)
2\. $php tsmarty2c.php templates > templates.c
3\. $xgettext templates.c -d templates -p /path/locale/en_GB/LC_MESSAGES -j 
4\. $msgcat templates.po controllerClasses.po complete.po -o complete.po 
```

这可以正常工作，但有一个例外，现在仍然保留了在 1/2 中删除的不推荐使用的字符串，因为我需要在合并过程中包含 complete.po（因为它具有该机构的最新翻译）。

关于如何创建类似过程的任何提示，但也确保从 complete.po 中删除旧字符串？

# core-data - 控制 NSArrayController 和核心数据关系

> ID：13785969
> 
> 赞同：1
> 
> 时间：2012-12-09T08:48:41.553
> 
> 标签：core-data, xcode4.5

我是 stackoverflow 的新手，因为我几乎从不在论坛上提问，因为已经有很多问题已经回答了。然而，我的脑袋即将因为试图弄清楚如何做这个应用程序而爆炸。

首先，我使用 XCode 4.5.2 for OSX 10.8 部署个人（仅供我使用）复式记账软件。

每个会计条目都包含各种文本字段的标题，例如条目日期、序列号等。我创建了一个名为“条目”的实体。此外，每个这样的条目都有多行，例如与该条目相关的各种帐户、金额等，称为实体“EntryLine”，该实体在模型中链接得很好且简单。

问题是我打算将文本字段用于基本标题信息，并在其下方为每一行链接一个表格视图。作为一个会计软件，我需要进行几项检查（验证），并且我需要完全控制正在发生的事情。已经尝试绑定两个数组控制器，每个实体一个，并将两者链接并将它们保存到 sqlite 文件，但无济于事！

现在我有一个只有标题的应用程序，通过手动获取和设置顶部文本字段中的信息并将它们保存到文件中来运行。但我不知道如何使用表格视图中的条目行来完成该部分。我也可以手动执行此操作，还是通过数组控制器进行绑定更好？

也尝试过使用数组控制器，但是当我在表格中添加新行时，我得到“表格视图单元格”。有什么想法吗？

在表视图中，还有一个“帐户名称”部分，它不是 EntryLine 实体的一部分，但我的意图是从另一个名为“帐户”的实体获取此信息，该实体存储帐号和帐户名称。在输入帐号时，应用程序将跳过名称字段并移至详细信息进行输入，但还会显示已输入的帐户名称。这甚至可能吗？

抱歉我的问题有点含糊，但我来自常规的面向程序的语言，而不是面向对象的语言，尽管我有一些 Java 经验。任何帮助，将不胜感激。没有截图对不起，因为我还不允许:(

# c# - 如何仅向注册用户显示一些菜单链接

> ID：13785971
> 
> 赞同：2
> 
> 时间：2012-12-09T08:48:49.587
> 
> 标签：c#, asp.net, html

谁能帮我在 ASP.Net 中显示菜单？

我的`Site.master`页面带有导航菜单

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
   <Items>
      <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
      <asp:LoginView>
         <LoggedInTemplate>
            <asp:MenuItem NavigateUrl="~/Securedpage.aspx" Text="Securedpage"/>
         </LoggedInTemplate>
      </asp:LoginView>
   </Items>
</asp:Menu> 
```

我必须向所有人显示第一个菜单链接，第二个仅向登录用户显示。但是，`<asp:LoginView>`菜单块中似乎无法识别。有什么出路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:57:22.893

您可以将菜单项绑定到站点地图并使用角色属性。您需要在您的 Web.Config 中启用 Security Trimming 才能执行此操作。这是最简单的方法。

站点导航概述：http: [//msdn.microsoft.com/en-us/library/e468hxky.aspx](http://msdn.microsoft.com/en-us/library/e468hxky.aspx)

安全修整信息：http: [//msdn.microsoft.com/en-us/library/ms178428.aspx](http://msdn.microsoft.com/en-us/library/ms178428.aspx)

站点地图绑定信息：[http ://www.w3schools.com/aspnet/aspnet_navigation.asp](http://www.w3schools.com/aspnet/aspnet_navigation.asp)

好的教程/概述：[http ://weblogs.asp.net/jgalloway/archive/2008/01/26/asp-net-menu-and-sitemap-security-trimming-plus-a-trick-for-when-你的菜单和安全不匹配-up.aspx](http://weblogs.asp.net/jgalloway/archive/2008/01/26/asp-net-menu-and-sitemap-security-trimming-plus-a-trick-for-when-your-menu-and-security-don-t-match-up.aspx)

另一个可行但不太理想的选项是使用 loginview 控件，它可以根据角色显示控件。这可能是最快（但最不灵活/性能）的选项。您可以在此处找到指南：[http ://weblogs.asp.net/sukumarraju/archive/2010/07/28/role-based-authorization-using-loginview-control.aspx](http://weblogs.asp.net/sukumarraju/archive/2010/07/28/role-based-authorization-using-loginview-control.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:54:49.140

我会选择代码背后的方法：如果用户已登录，仅将 LoginView 项目添加到 Items 集合中。使用 Membership API，您可以通过以下方式检查：

```
System.Web.HttpContext.Current.User.Identity.IsAuthenticated 
```

另一个传授者是保护该页面，而不仅仅是隐藏在菜单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T09:33:24.323

您可以为登录用户和匿名用户使用单独的主模板。匿名用户的主模板只能有所有人可以查看的链接。并将登录的用户主模板应用于登录后要显示的页面，以便用户获得预期的菜单。希望这会有所帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-27T21:57:46.607

如果您想禁用任何页面的菜单项，它将起作用。

在 masterpage.cs 文件上。

```
public bool UserMenu
{   
    set { Menu1.Visible = value; }
} 
```

对于要禁用菜单的 page_load。

```
this.Master.UserMenu = false; 
```

# c++ - CRTP 和默认赋值运算符

> ID：13785973
> 
> 赞同：3
> 
> 时间：2012-12-09T08:48:59.557
> 
> 标签：c++, c++11, operator-overloading, assignment-operator, crtp

在下面的 ：

```
template<typename Derived>
class Base:
{
    inline Derived& operator=(const Base<Derived>& x);
} 
```

此声明是否删除了默认的复制赋值运算符或者我有两个运算符：

```
inline Derived& operator=(const Base<Derived>& x); 
// (declared by me) 
```

和

```
inline Base<Derived>& operator=(const Base<Derived>& x); 
// (declared by the compiler) 
```

在这种情况下，当我调用函数时，编译器将如何获得正确的运算符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:04:29.377

如果您声明*任何*可以传递给赋值运算符的方法：

```
XXX Foo::operator=(Foo&);
XXX Foo::operator=(Foo const&);
XXX Foo::operator=(Foo volatile&);
XXX Foo::operator=(Foo const volatile&); 
```

那么编译器将不会生成默认版本`Foo& operator=(Foo const&);`。

请注意，与其他方法一样，返回类型是完全免费的。你可以使用`void`, `bool`, 不管什么。返回对 self 的引用以允许*赋值链接*只是*惯用*的（但不是必需的） ：这本身源于重载运算符应遵循其内置对应物的语义的准则。*`a = b = c = 0;`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:07:10.803

你有没有尝试过？仅通过返回类型重载将是一个编译错误，所以我的猜测是定义的那个替换了默认的那个。*

# ant - 自动化构建过程的 Ant 脚本

> ID：13785975
> 
> 赞同：0
> 
> 时间：2012-12-09T08:49:11.877
> 
> 标签：ant, build, build-automation, antbuilder

我想自动化 ANT 构建过程以部署应用程序。

我想编写一个 ANT 脚本，它会反复在文件夹中查找 build.xml 文件并运行它们，如果子构建失败，它应该跳过并通过写入日志继续执行其他脚本。任何人都可以发布可以提供帮助的想法或示例。

```
根文件夹
    |
    |-----文件夹1
    | |
    | |--子文件夹1
    | | 构建.xml
    | |--子文件夹2
    | | 构建.xml
    |-----文件夹2
    | 构建.xml
    |
    |-----文件夹3
             构建.xml

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:45:39.413

我建议使用[subant](http://ant.apache.org/manual/Tasks/subant.html)任务

```
<project name="Subant demo" default="deploy-everything">
    <target name="deploy-everything">
        <subant>
            <fileset dir="." includes="**/build.xml" excludes="build.xml"/>
            <target name="clean"/>
            <target name="deploy"/>
        </subant>
    </target>
</project> 
```

这将找到所有“build.xml”文件并在每个文件上调用“干净部署”目标。

虽然自动拾取子文件夹构建很整洁，但它很少在大型项目中工作，除非构建彼此独立（构建顺序很重要）。

以下示例使用显式文件列表，而不是无序的文件集：

```
<project name="Subant demo" default="deploy-everything">
    <target name="deploy-everything">
        <subant>
            <filelist dir=".">
                <file name="Folder1/SubFolder1/build.xml"/>
                <file name="Folder1/SubFolder2/build.xml"/>
                ..
            </filelist>
            <target name="clean"/>
            <target name="build"/>
        </subant>
    </target>
</project> 
```

最后，最先进的解决方案是使用像[ivy](http://ant.apache.org/ivy/)这样的依赖管理器在“ivy.xml”文件中声明每个模块的依赖。正确设置，这使得每个子模块构建更加独立。为了解决构建“一切都只做问题”，ivy 提供了一个[构建列表](http://ant.apache.org/ivy/history/latest-milestone/use/buildlist.html)任务，可以自动确定正确的构建顺序：

```
<target name="deploy-everything">
    <ivy:buildlist reference="build-path">
        <fileset dir="." includes="**/build.xml" excludes="build.xml"/>
    </ivy:buildlist>

    <subant buildpathref="build-path">
        <target name="clean"/>
        <target name="build"/>
    </subant>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:00:03.510

我已经解决了我的问题，谢谢大家的回复，我使用以下技术来处理这种情况。

```
<?xml version="1.0" ?> 
<project name="MasterBuildPrj" default="MasterBuild">
    <macrodef name="iterate">
        <attribute name="target"/>
        <sequential>
            <subant target="@{target}">
                <fileset dir="." 
                         includes="**/build.xml"
                         excludes="build.xml"/>
            </subant>
        </sequential>
    </macrodef>
    <target name="MasterBuild"  description="Build all sub projects">
        <iterate target="build"/>
    </target>

    <target name="clean"  description="Clean all sub projects">
        <iterate target="clean"/>
    </target>   
</project> 
```

# php - PHP - MySQL：当我在选项下拉列表中选择 item_name 时如何在同一页面中获取 item_id

> ID：13785979
> 
> 赞同：0
> 
> 时间：2012-12-09T08:49:55.140
> 
> 标签：php, mysql

`item_id`当我单击`item_name`下拉列表中的一个列表时，我需要显示。当我点击提交时，`item_name`并`item_id`得到了`$_POST`。javascript可以用来做到这一点吗？

```
<?php
    $brg="SELECT item_id, item_name FROM tblItem";
    $b=mysql_query($brg);
?>
<td align="center">
    <select name="item_name">
        <?php while($br=mysql_fetch_array($b)){ ?>
        <option value=<?echo $br[0].'_'.$br[1]?> selected>
            <?php echo $br[1]; ?>
        </option>
        <?php } ?>        
    </select>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:01:56.943

Jup，这可以通过 Javascript 实现。

您的 HTML：

```
<select name="item_name">
    <option value="1_Cheese">Cheese</option>
    <option value="2_Cars">Cars</option>
    <option value="3_Planes">Planes</option>
</select>

<input type="button" onclick="alert(getSelectedValue())" value="Get Select Id" />​ 
```

以及您的 Javascript，从选项值访问 ID：

```
function getSelectedValue()
{
    var sel = document.getElementsByName('item_name')[0];
    return sel.options[sel.selectedIndex].value.split("_")[0];
} 
```

看到这个小提琴：http: [//jsfiddle.net/acz6Q/](http://jsfiddle.net/acz6Q/)

使用 jQuery 会更容易一些（还附加了一个事件处理程序）：

```
$(document).ready(function()
{
    $("select[name=item_name]").on("change", function()
    {
         alert("new item id = " + $(this).val().split("_")[0]);
    });    ​
}); 
```

这是 jQuery 版本的小提琴：http: [//jsfiddle.net/acz6Q/1/](http://jsfiddle.net/acz6Q/1/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:19:55.167

尝试这个：

```
<form action="" method="post">
    <input type="hidden" id="item_id" name="item_id" />
    <input type="hidden" id="item_name" name="item_name" />
    <select id="my_select" name="my_select">
        <option value="item_id_1">item_name_1</option>
        <option value="item_id_2">item_name_2</option>
        <option value="item_id_3">item_name_3</option>
    </select>
</form>

<script type="text/javascript">
    $(document).ready(function() {
        $("#my_select").change(function() {
            $("#item_id").val($("#my_select").val());
            $("#item_name").val($("#my_select option:selected").text());
        });
    });
</script> 
```

请注意，您需要首先包含 jQuery 库。[你也可以从这里jsfiddle.net/2FsNP/3](http://jsfiddle.net/2FsNP/3)看到它是如何工作的。使用这种方法，您不需要将选项标签的值和文本与下划线结合起来。

# jquery - 如何在一行中使用 jQuery cookie 插件设置多个 cookie？

> ID：13785981
> 
> 赞同：1
> 
> 时间：2012-12-09T08:50:17.597
> 
> 标签：jquery, jquery-cookie

我使用[**jquery Cookie 插件**](https://github.com/carhartl/jquery-cookie)已经有一段时间了。对于设置多个 cookie，我通常这样做：

```
$.cookie('cookie1', 'value1');
$.cookie('cookie2', 'value2');
$.cookie('cookie3', 'value3'); 
```

而对于删除多个 cookie，我通常会这样做：

```
$.cookie('cookie1', null);
$.cookie('cookie2', null);
$.cookie('cookie3', null); 
```

我只是想知道，有什么方法可以做到这一点吗？就像是：

```
// For setting multiple cookies
$.cookie({'cookie1', 'value1'},{'cookie2', 'value2'},{'cookie3', 'value2'});

// For deleting multiple cookies
$.cookie({'cookie1', null},{'cookie2', null},{'cookie3', null}); 
```

提前致谢！

***PS****上面的代码只是我的假设。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:41:25.053

我认为，目前是不可能的。我们必须使用普通的方式来设置多个 cookie，如下所示：

```
$.cookie('cookie1', 'value1');
$.cookie('cookie2', 'value2');
$.cookie('cookie3', 'value3'); 
```

# vb.net - 动态更改样式背景颜色；适用于 Windows 8 的 Visual Studio Express 2012 中的 XAML/VB

> ID：13785987
> 
> 赞同：2
> 
> 时间：2012-12-09T08:51:25.853
> 
> 标签：vb.net, xaml, visual-studio-2012

在 StandardStyles.xaml 的 DataTemplate 中，我有这个 StackPanel：

```
<DataTemplate x:Key="Standard160x160ItemTemplate">
    <Grid HorizontalAlignment="Left" Width="160" Height="160">
        ...
        <StackPanel 
            VerticalAlignment="Top" 
            Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
            <TextBlock Text="{Binding UniqueID}" 
                       Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" 
                       Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,15,0"/>
        </StackPanel>
        ...
    </Grid>
</DataTemplate> 
```

“uniqueID”是“产品”类的属性：

```
Public NotInheritable Class Product
    Private Property _sUID As String = String.Empty
    Public Property UniqueID As String
        Get
            Return Me._sUID
        End Get
        Set(value As String)
            Me.SetProperty(Me._sUID, value)
        End Set
    End Property
    ...
End Class 
```

我在这样的网格视图项中使用上面的模板“Standard160x160ItemTemplate”：

```
 <GridView Height="210" 
                        x:Name="ItemView"
                        SelectionMode="None"
                        ItemsSource="{Binding Source={StaticResource itemsViewSource}}">
                        <GridViewItem
                            x:Name="GridViewItem"
                            ContentTemplate="{StaticResource Standard160x160ItemTemplate}" 
                            Tapped="GridViewItem_Tapped">
                            <GridViewItem.Style>
                                <Style TargetType="FrameworkElement">
                                    <Setter Property="Margin" Value="0,0,0,0"/>
                                </Style>
                            </GridViewItem.Style>
                        </GridViewItem>
                    </GridView> 
```

这运作良好，并做了它应该做的。

但是，在某些情况下（取决于“产品”对象的其他两个属性，特别是如果其中一个的 UInt 值低于另一个）我想将 StackPanel 的背景更改为纯“红色”而不是“{StaticResource ListViewItemOverlayBackgroundThemeBrush}”。

我不怀疑这是可能的，但我是 XAML 的新手（虽然不是 VB），并且仍然被成千上万的 XAML 标记所淹没，并且真的很难找到解决方案。

所以问题是：如何根据“产品”属性“A”和“B”动态更改模板的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:29:13.210

最好的方法可能是使用自定义 IValueConverter。[这是来自 MSDN 的示例](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.ivalueconverter.aspx)。

# windows-server-2008 - AWS EC2 Windows Server 2008 上的第一次 File.Copy 操作很慢

> ID：13785988
> 
> 赞同：2
> 
> 时间：2012-12-09T08:51:33.363
> 
> 标签：windows-server-2008

在亚马逊 (AWS) EC2 Windows Server 2008 上

这行 C# 代码

```
File.Copy(file1, file2); 
```

第一次执行大约一分钟，重复时 - 很快有什么想法吗？

# java - 找不到带有自定义图标的 showInputDialog 的符号方法 charAt(int)

> ID：13785993
> 
> 赞同：1
> 
> 时间：2012-12-09T08:52:24.093
> 
> 标签：java, joptionpane

好吧，我有一个错误，我不知道为什么。我为我的 JOptionPane.showInputDialog 创建了一个自定义图标，但我不能让它等于例如：

```
final ImageIcon icon2 = new ImageIcon("test.png");
lettrependu = JOptionPane.showInputDialog(null, sortie,"Dat Title",JOptionPane.INFORMATION_MESSAGE, icon2, null, "").charAt(0); 
```

给了我这个错误：找不到符号方法charAt（int）......它也不适用于String，int等......

如果我删除它，我无法对我的自定义图标赋予任何价值，它可以工作，但我想要它。

谢谢。

# html - 如何选择没有特定类的所有其他元素？

> ID：13785995
> 
> 赞同：1
> 
> 时间：2012-12-09T08:52:53.370
> 
> 标签：html, css, css-selectors

我有一个`<div>`s 列表。每个`<div>`都有类`zebra`。到目前为止，我已经使用以下内容对列表进行了条带化​​：

```
.zebra:nth-child(2n) { /* colors */ } 
```

现在我正在实现一个过滤功能，这样其中一些`<div>`s 将有一个 class `hidden`。我尝试将我的 CSS 更新为

```
.zebra:not(.hidden):nth-child(2n) { /* colors */ } 
```

但这没有任何效果。我错过了什么？如何组合这些选择器，以便`.zebra` `<div>`在`:nth-child(2n)`?

这是我所描述的一个[小提琴。](http://jsfiddle.net/NYvcv/)

**更新**：

*   元素数量未知，`.hidden`元素总数未知。（该列表是数据驱动的，而不是静态的）。

我真的宁愿不做任何事情：

1.  每次触摸过滤器控件时运行一个javascript，只是为了重新着色显示的列表项。
2.  隐藏时完全删除元素。这使得重新添加它变得不简单（afact）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:24:30.287

*您可以用不同标签*的元素替换它，而不是像[Justin 建议](https://stackoverflow.com/a/13786084/237285)的那样删除元素。我们可以使用，例如：*`details`*

 *```
var placemarker = document.createElement("details");
node.parentNode.replaceChild(placemarker, node);
placemarker.appendChild(node); 
```

然后，不要使用 ，而是`:nth-child`使用`:nth-of-type`。

```
details { display:none; }
div.zebra:nth-of-type(2n) { /* colors */ } 
```

然后可以通过以下方式取消隐藏元素：

```
placemarker.parentNode.replaceChild(placemarker.firstChild); 
```

请参阅[此静态示例](http://jsfiddle.net/SbvKN/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:07:50.770

如果你不介意钻研 jquery ..

```
$('#yourHiddenElement').remove(); 
```

将删除它，以便您的 css 阴影交替出现。

[http://jsfiddle.net/NYvcv/1/](http://jsfiddle.net/NYvcv/1/)

我建议使用它而不是将“隐藏”类应用于要隐藏的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T09:14:37.127

如果您知道项目数量有限`.hidden`，则可以执行以下操作：

```
.zebra2:nth-child(2n) {
    background: lightgrey;
}

.zebra2.hidden ~ .zebra2:nth-child(2n) {
    background: inherit;
}
.zebra2.hidden ~ .zebra2:nth-child(2n+1) {
    background: lightgrey;
}

.zebra2.hidden ~ .zebra2.hidden ~ .zebra2:nth-child(2n) {
    background: lightgrey;
}
.zebra2.hidden ~ .zebra2.hidden ~ .zebra2:nth-child(2n+1) {
    background: inherit;
} 
```

等等。如果有超过 2 个隐藏项，则此特定[示例会中断。](http://jsfiddle.net/X3LNJ/)​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T09:26:09.953

一种可能的解决方案：

使用 jQuery 将`.hidden`元素的类型更改为`<li>`. 使用`:nth-of-type`而不是`:nth-child`.

[http://jsfiddle.net/Nb68T/1/](http://jsfiddle.net/Nb68T/1/)*

# php - 在坏服务器上插入多个表失败

> ID：13785996
> 
> 赞同：0
> 
> 时间：2012-12-09T08:53:09.347
> 
> 标签：php, mysql

我制作了一个 Web 应用程序，`onclick`提交按钮事件将来自同一表单的值保存到 3 个不同的表中。我面临的问题是，当用户单击提交按钮后服务器或互联网断开连接时，某些表中的值会被保存，而在某些表中，它不会因为我的整个 Web 应用程序提供错误的报告输出而被保存。请让我知道如何处理此类问题。我想到的一种解决方案是使用一张桌子而不是三张桌子，但这是最坏的情况。任何帮助将不胜感激谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:56:10.910

听起来您需要使用[事务](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)来确保您的更新是原子的。[这](http://www.databasejournal.com/features/mysql/article.php/3382171/Transactions-in-MySQL.htm)是一些包含示例的文档的链接。

# c - strcat 上的段错误

> ID：13785997
> 
> 赞同：0
> 
> 时间：2012-12-09T08:53:29.810
> 
> 标签：c, strcat

所以我的代码中出现了段错误，我似乎无法弄清楚是什么原因造成的。有没有人能够捕捉到我没有捕捉到的东西？

从逻辑上讲，我试图通过将事物连接到末尾来创建一个 char 数组（一个字符串），然后将其添加到一个字符串数组中。

它最终应该是这样的'word1，word2，word3，word4，word5 ...等'

段故障发生在`strcat(str, ", ");`

```
void save_ladder(graphNode *curNode) {

    char *str = malloc(1000 * sizeof(char));

    strcpy(str, "");
    strcat(str, curNode->word);
    strcat(str, ", ");

    graphNode *prev = curNode->prevWord;
    while (prev != NULL) {
            if (prev->prevWord != NULL) {
                strcat(str, prev->word);
                strcat(str, ", "); // SEG FAULT HAPPENS HERE
            }
            else 
                strcat(str, prev->word);

            prev = prev->prevWord;
    }

    ladders[numLadders++] = str;
} 
```

gdb 堆栈跟踪：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004013d1 in save_ladder (curNode=0x6420f0) at wordladder.c:150
150             strcat(str, ", "); 
```

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:12:12.217

可能是缓冲区溢出。将以下代码放在`while`循环中并检查是否是这种情况：

```
printf ("%d %d\n", strlen (str), strlen (prev->word)); 
```

如果这两个数字的总和接近 1000，则您的缓冲区可能需要更大。

或者，如果第二个似乎有点大或似乎有太多单词，那么列表中的数据或列表结构本身都是可疑的。

此外，还有另外两点。第一个是您永远不需要乘以，`sizeof(char)`因为它始终为 1（您还应该检查 的返回值`malloc`，以防它失败）。

第二个是您可以因此简化字符串构造，而无需以下`if`语句`while`：

```
strcpy(str, curNode->word);
graphNode *prev = curNode->prevWord;
while (prev != NULL) {
    strcat (str, ", ");
    strcat(str, prev->word);
    prev = prev->prevWord;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:24:11.923

我有两件事要注意/评论/回复：

1.  您正在使用[Schlemiel the Painter](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)的算法：在 every 上`strcat()`，收集到现在的字符串再次被遍历。您应该考虑使用指向您当前所在位置的“光标指针”：`strcat(str, ...)`用 a`strcpy(crsr, ...)`后跟 a替换每个指针`crsr += strlen(crsr)`，以便将其设置为到目前为止的字符串末尾。`crsr`应该`str`在开始时设置为。

2.  正如其他人所写，您的代码最多只能使用 1000 个字符。要么你的 structor 坏了，要么其中一个字符串太长。无论如何，您的算法太不灵活了。您应该考虑在附加之前检查每个字符串的长度，如果它不适合，则`realloc()`适当`str`。（不要忘记更新您`crsr`的。）在这种情况下，您不再有任何限制。

    最后调整你`str`的大小`strlen(str) + 1`，以免浪费内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:42:25.563

我同意缓冲区溢出的答案。我也同意代码清理。但是，我认为也许您应该研究 asprintf 或 snprintf。使用 asprintf，您提供一个 char ** 并返回新字符串的位置。如果您不需要自己仔细管理内存，这将非常有用。这个例程也是一个 GNU 扩展，所以请注意。Snprintf 让我们传递一个 char * 和剩余缓冲区的长度，以确定其余的格式是否适合。这将捕获溢出。

下面是一个使用 asprintf 的例子：

```
char *output = NULL;
char *last = NULL;

prev = curNode;
while (prev != NULL) {
    last = output;
    if (asprintf(&output, "%s,", prev->word) < 0) {
        break;  // error
    }
    if (last != NULL)
        free(last);
    }
    prev = prev->prevWord;
}

// remove trailing ',' here 
```

注意：上面的代码没有经过测试（我是在平板电脑上写的。）

# logging - android通知日志历史

> ID：13785998
> 
> 赞同：2
> 
> 时间：2012-12-09T08:53:32.090
> 
> 标签：logging, notifications

嗨，有什么方法可以查看通知日志文件的历史记录。我尝试使用 andriod sdk ( db shell logcat > log.txt ) 但没有得到我想要的日志。

例如，如果联系人加入 viber。您将收到联系人加入 viber 的通知。我试图获取此日志的历史记录。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T08:13:05.383

[您可以使用AccessibilityService](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html)观察通知。

但是你不能去历史，你必须观察，保存到你的数据库，然后你必须使用自己的历史......