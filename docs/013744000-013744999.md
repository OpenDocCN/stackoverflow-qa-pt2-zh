# StackOverflow 问答 13744000-13744999

# c++ - 稍后执行指令

> ID：13744000
> 
> 赞同：2
> 
> 时间：2012-12-06T12:50:16.880
> 
> 标签：c++

我想给出一个指令作为参数：

```
execute_at_frame(int frame_number, <instruction>)
{
    for(f = 1 ; f < F_MAX ; f++)
    {
        /* other instructions */
        if (f == frame_number)
            /* execute <instruction> */
        /* other instructions */
    }
} 
```

*   一种调用方式：`execute_at_frame(5,execute(42));`
*   另一种调用方式：`execute_at_frame(6,process());`

那（或类似的）可能吗？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:55:30.087

是的，如果您使用[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)(C++11)：

```
template <class F>
void execute_at_frame(int frame_number, F instruction)
{
    for(int f = 1 ; f < F_MAX ; f++)
    {
        /* other instructions */
        if (f == frame_number)
            instruction();
        /* other instructions */
    }
}

/* ... */

execute_at_frame(5,process); // no bind for functions without parameters
execute_at_frame(5,std::bind(execute,42)); 
```

否则，您将不得不准备一个界面以获取说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:54:24.080

您的`<instruction>`参数可以是函数指针（即指向函数的指针`execute`）；或者，它可以是对具有`execute`方法的类实例的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:57:18.933

您可以传递函数指针以及（如果需要）一些参数。它可能看起来像这样：

```
typedef void (*Instruction)(int);

void foo(int)
{
    // do something
}

void execute_at_frame(int frame_number, Instruction ins, int param)
{
    for(int f = 1 ; f < F_MAX ; f++)
    {
        /* other instructions */
        if (f == frame_number)
            ins(param);
    }
} 
```

示例用法：

```
execute_at_frame(1000, foo, 42); 
```

如果您使用可变参数模板，则可以使其与任何签名一起使用。简化示例：

```
void foo(int)
{
}

float bar(int, char, double)
{
    return 1.0;
}

template<typename F, typename... Args>
void execute(F ins, Args... params)
{
    ins(params...);
}

int main()
{
    execute(foo, 1);
    execute(bar, 1, 'a', 42.0);
} 
```

为此，您需要 C++11 编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:43:43.127

使用函数作为参数的代码：

```
#include <functional>
#include <iostream>
using namespace std;

int instruction(int instruc)
{
     return instruc ;
}

template<typename F>
void execute_at_frame(int frame, const F& function_instruction)
{
     std::cout << function_instruction(frame) << '\n';
}

int main()
{
     execute_at_frame(20, instruction);  //  use reference
     execute_at_frame(40, &instruction); //  use pointer

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T13:01:55.507

您的参数也可以是基类指针，指向具有虚函数的派生类

# java - 使用接口类型 (Set) 而不是实现类型 (HashSet) 创建集合还有哪些其他好处

> ID：13744002
> 
> 赞同：0
> 
> 时间：2012-12-06T12:50:19.557
> 
> 标签：java, collections

> **可能重复：**
> [编码到接口？](https://stackoverflow.com/questions/1970806/coding-to-interfaces)

我正在阅读 Java 中的 Collections 教程，它强烈建议使用其接口类型而不是其实际实现类型来实现引用 Collections 的代码。例如：

```
Set<String> s = new HashSet<String>(); 
```

它说如果我以后决定更改它，它将给我更改实现的灵活性。

```
Set<String> s = new TreeSet<String>(); 
```

除了灵活性之外，使用其接口类型实现集合还有其他好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:54:26.163

是的，当使用接口类时，您将只能访问最默认的方法。这些方法保证是直观的。在使用实现类时，您可能会看到更多可能使您感到困惑或被滥用的方法。

例如：一个集合接口将有一个返回元素数量的方法，比如说：`size()`. 但是实现类也可能提供一个`capacity()`方法来告诉你底层数组有多大。

但正如教程告诉你的那样，最重要的原因是你可以毫不费力地更改实现。在非常特殊的情况下，更改实现可能对性能优化很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:55:07.513

我认为这里不仅仅是集合，它与多态性有关：最好将接口用作声明的类型，因为您可以更改实现和/或具体类以在运行时绑定。（这里的讨论可能会更长 - 有很多关于此的文档/教程 - Java 基础知识）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:03:03.110

接口类型通常包含比实际实现更少的方法，因此很容易使用后者，因为它允许访问它们。

但是，这会以一种重要的方式束缚您的双手。例如，如果您决定`Vector`从使用向量的类的公共方法中公开返回类型 ，但后来意识到您的模块可以更好地使用 a `LinkedList`，那么您现在遇到了一些问题——这将破坏任何使用返回向量的方法。

另一方面，如果你一开始就使用了返回类型，`List`那么就不会有问题——你可以将内部 Vector 切换为 LinkedList，或者实现你自己的实现接口 List 的东西。以我的经验，这是一个常见的事件（当然，如果你让它变得困难或不可能，那么它就会发生更少）。

因此，*除非您有特定的理由不这样做*（例如，您需要提供对仅可用于向量的方法的访问），否则请始终使用通用接口类型作为返回值。

我意识到这仍然与*灵活性*有关，但是从您的帖子中不清楚您是否了解灵活性的重要性。如果您要求使用接口的*更好理由*，即。“如果我不在乎灵活性，是否可以使用特定的实现”，即。“我不关心灵活性，想要使用特定类型，可以吗？” 答案是**您应该关心灵活性**；) 正如其他人所说，这是良好的 Java 编程的重要基础。

# php - Codeigniter 运行多个应用程序

> ID：13744008
> 
> 赞同：5
> 
> 时间：2012-12-06T12:51:36.980
> 
> 标签：php, codeigniter

我在使用相同安装的 codeigniter 的两个应用程序（管理员和客户端）时运气不佳。

我参考了很多教程并做了

*   我在应用程序文件夹中创建了子文件夹“admin”，并将所有子目录剪切并粘贴到其中。
*   我将管理文件夹复制并粘贴到应用程序文件夹中，并将其重命名为“客户端”

*   在主 index.php 中，我将应用程序文件夹路径设置为“application/admin”。但这仅适用于管理部分，并且要运行客户端，我必须在 index.php 中再次更改应用程序文件夹路径。这样我就不能同时运行管理员和客户端。

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T07:36:57.150

您会发现以下解决方案很有帮助：

1.在CodeIgniter的根目录下创建一个文件夹'admin'。

2.复制“admin”文件夹中的“index.php”文件。

3.更改'admin'文件夹内'index.php'文件的以下变量

```
$system_path = '../system';
$application_folder = '../application/admin'; 
```

4.在“admin”文件夹中创建一个“.htaccess”文件并使用以下代码：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

5.在 'application/admin/config/config.php' 中将 $config['base_url'] 设置为 'your url/admin' 并自动加载 'url' 助手。

6.现在您可以使用“您的 url/admin”访问管理面板。

7.对“客户”执行相同的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:17:37.247

从 codeigniter 文档中：

> 注意：您的每个应用程序都需要自己的 index.php 文件来调用所需的应用程序。index.php 文件可以任意命名。

[http://ellislab.com/codeigniter/user-guide/general/managing_apps.html](http://ellislab.com/codeigniter/user-guide/general/managing_apps.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:08:51.040

我找到了更好解释的 3 种方法来完成它。我更喜欢第二个

[http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter](http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter)

# ruby-on-rails - Rails prawnto gem 从多个数据库生成 pdf

> ID：13744009
> 
> 赞同：1
> 
> 时间：2012-12-06T12:51:38.857
> 
> 标签：ruby-on-rails, pdf, model, prawn, prawnto

我有这样的模型：

```
class WorkOrder < ActiveRecord::Base
  self.table_name = "work_orders"
  set_primary_key "id"
  has_many :work_order_details
  belongs_to :type
  belongs_to :client
def get_action_name(id)
    n = Action.find(id)
    logger.warn("!!!!!!!!!!!!!!! AAAA !!!!!!!!!!!!!!!!!!!")
    logger.warn(n.name)
    n.name
  end

  def get_price_name(id)
    n = ActionDetail.find_by_action_id(id)
    logger.warn("!!!!!!!!!!!!!!! AAAA !!!!!!!!!!!!!!!!!!!")
    n.price
  end

  def get_master_name(id)
    n = Master.find(id)
    logger.warn("!!!!!!!!!!!!!!! AAAA !!!!!!!!!!!!!!!!!!!")
    a = n.lastname + " " + n.firstname
    a
  end
end

class WorkOrderDetail < ActiveRecord::Base
  self.table_name = "work_order_details"
  set_primary_key "id"
  belongs_to :master
  belongs_to :action
  belongs_to :work_order
end

class Action < ActiveRecord::Base
  self.table_name = "actions"
  set_primary_key "id"
  belongs_to :specialization
  has_many :action_details
  has_many :work_order_details
end

class Master < ActiveRecord::Base
  self.table_name = "masters"
  set_primary_key "id"
  has_many :master_specializations
  has_many :work_order_details
end 
```

我必须生成这样的类似视图的pdf

```
%table.zebra
  %tr
    %th id
    %th Услуга
    %th Мастер
    %th Стоимость
    %th Бонус
    %th
    %th
    %th
  -if @work_order.work_order_details.kind_of?(Array)
    - @work_order.work_order_details.each do |work_order_detail|
      %tr{:class => cycle("zebra-stripe zebra-grey zebra1", "zebra-stripe zebra-grey zebra2")}
        %td= work_order_detail.work_order_id
        %td= work_order_detail.get_action_name(work_order_detail.action_id)
        %td= work_order_detail.get_master_name(work_order_detail.master_id)
        %td= work_order_detail.get_price_name(work_order_detail.action_id)
        - count = count + work_order_detail.get_price_name(work_order_detail.action_id)
        %td= work_order_detail.bonus
    Общая сумма:
    = count
  -else
    %tr{:class => cycle("zebra-stripe zebra-grey zebra1", "zebra-stripe zebra-grey zebra2")}
      %td= @work_order.work_order_details.work_order_id
      %td=# @work_order.work_order_details.get_action_name(@work_order.work_order_details.action_id)
      %td= @work_order.work_order_details.master_id
      %td= @work_order.work_order_details.bonus
  = link_to 'Добавить услугу', new_work_order_detail_path 
```

它的工作很好，但是当我尝试做这样的pdf时：

```
pdf.font_families.update(
      "Verdana" => {
        :bold => "C:/verdanab.ttf",
        :italic => "C:/verdanai.ttf",
        :normal  => "C:/verdana.ttf" })
    pdf.font "Verdana", :size => 10
pdf.text "Заказ-наряд ##{@work_order.id}", :size => 20, :style => :bold
pdf.text "##{@work_order.date_of_work_start}", :size => 8, :style => :bold

pdf.move_down(30)

 items = @work_order.work_order_details.map do |item|
  [   
    item.work_order_id
    item.get_action_name(item.action_id)
    item.get_master_name(item.master_id)
    item.get_price_name(item.action_id)
    item.bonus
  ]
end

pdf.table items, :border_style => :grid,
  :row_colors => ["FFFFFF","DDDDDD"],
  :headers => ["id", "Услуга", "Мастер", "Стоимость"]

pdf.move_down(10) 
```

它给了我错误的...

控制器方法：

```
def show
    @work_order = WorkOrder.find(params[:id])
    @work_order_details = WorkOrderDetail.find_all_by_work_order_id(@work_order.id)
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @work_order }
      format.pdf { render :layout => false }
    end
  end 
```

错误：

```
C:/_Projects/CarService/app/views/work_orders/show.pdf.prawn:18: syntax error, unexpected tIDENTIFIER, expecting ']'
    item.get_action_name(item.action_id)
        ^
C:/_Projects/CarService/app/views/work_orders/show.pdf.prawn:22: syntax error, unexpected ']', expecting keyword_end
C:/_Projects/CarService/app/views/work_orders/show.pdf.prawn:34: syntax error, unexpected keyword_ensure, expecting keyword_end
C:/_Projects/CarService/app/views/work_orders/show.pdf.prawn:36: syntax error, unexpected $end, expecting keyword_end 
```

那么如何从另一个表中提取数据来做pdf呢？

还有当我写

```
@work_order.work_order_details.each do |item|  
  pdf.text item.get_action_name(item.action_id)
end 
```

一切都好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:44:01.803

呵呵）看看

```
items = @work_order.work_order_details.map do |item|
  [   
    item.work_order_id
    item.get_action_name(item.action_id)
    item.get_master_name(item.master_id)
    item.get_price_name(item.action_id)
    item.bonus
  ]
end 
```

我忘记了逗号。和：

```
 items = @work_order.work_order_details.map do |item|
  [   
    item.work_order_id,
    item.get_action_name(item.action_id),
    item.get_master_name(item.master_id),
    item.get_price_name(item.action_id),
    item.bonus
  ]
end 
```

一切正常）

# c++ - 在进行终端输入时闪烁匹配括号，就像 CLISP 一样？

> ID：13744025
> 
> 赞同：1
> 
> 时间：2012-12-06T12:52:20.463
> 
> 标签：c++, c, ruby, input, readline

如果您在[CLISP](http://www.clisp.org/)（我相信还有更多）终端中键入`}`after `{`、`)`after`(`或`]`after ，则相应的左括号会突出显示大约一秒钟，然后返回正常状态。`[`

`gets`至少在 Ruby、`cin`C++ 和C 中，我怎样才能得到这种行为`scanf`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:32:16.967

要控制光标位置、文本格式等内容，您必须直接与终端对话，这种方式无法`cin`通过`scanf`. 不确定Ruby，但我想这也适用于那里。在 POSIX 系统上，这种控制是通过一组 I/O 控制 ( [`ioctl`](http://linux.die.net/man/2/ioctl)) 实现的，这些控制提供与终端设备的带外通信。有些库在与终端交谈时提供了一定程度的可移植性。最常用的可能是[ncurses](http://invisible-island.net/ncurses/) ， David Rodríguez已经[提到过。](https://stackoverflow.com/questions/13744025/blink-matching-brackets-when-doing-terminal-input-bash-zsh-like-clisp-does#comment18886119_13744025)

# php - 字符串比较 ANYmax >= ANYmin

> ID：13744027
> 
> 赞同：0
> 
> 时间：2012-12-06T12:52:32.753
> 
> 标签：php, string

使用字符串函数和大量的 if-else 会使这变得一团糟？将字符串转换为十六进制数组可能是另一种方式？似乎正则表达式可能与它有关？也许这里的一位专家可以指导我做一些有意义的事情？

可能的 $min 和 $max 总是相似的。

$min 是一个存储变量。$max 是客户端输入。

可以是任何字符 [az, 0-9, AZ]

由单个空格分隔的字符对。

示例：'p1'、'1 1'、'p1 h11'、'P3 h2'...

期望结果：ANY $max >= ANY $min

例子：

```
$minA = 'p1 p2 h3'; $maxA = 'h2'; // false h2<=h3
$minB = '1 2 3'; $maxB = '4'; // true 4>=3
$minC = 'P2 p3'; $maxC = 'p2'; // true p2>=P2
$minD = 'p2 H33'; $max = 'p1 H34 y2'; // true H34>=H33 
```

这是它的工作原理---感谢您的帮助

```
 $min = 'p1 h3 t3'; 
        $max = 'p1 h2';
        echo ratingCheck($max, $min);

        function ratingCheck($max, $min)
        {
            $minRank = strConv($min);
            $maxRanks =strConv($max);

            foreach ($maxRanks as $letter => $value)
            {
                echo ($value >= $minRank[$letter]) ? ' true ' : ' false ';
            }   
        }
        function strConv($str)
        {
            $exploded = explode(' ', $str);
            foreach ($exploded as $rating)
            {
                 preg_match('`([a-z]+)(\d+)`', $rating, $m);var_dump($m);
                 list(, $rating_letter, $rating_rank) = $m;
                 if (!isset($ratings[$rating_letter]))
                 {
                      $ratings[$rating_letter] = $rating_rank;
                 }
                 else
                 {
                      // for $min you should keep the highest value : max()
                      // for $max you should keep the lowest value : min()
                      $ratings[$rating_letter] = max($ratings[$rating_letter], $rating_rank);
                 }
            }
            return $ratings;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:59:08.923

所以根据我的理解。

1.  您不关心大小写，首先将所有内容都放在小写/大写中。

2.  在“空格字符”上拆分每个 $min 和 $max。

    `explode(' ', 'p1 p2 h3') == array('p1', 'p2', 'h3);`

3.  将每个字母的最低/最高评级存储在一个数组中。

    ```
    $ratings = array();
    foreach ($exploded as $rating)
    {
        preg_match('`([a-z]+)(\d+)`', $rating, $m);
        list(, $rating_letter, $rating_rank) = $m;
        if (!isset($ratings[$rating_letter]))
        {
            $ratings[$rating_letter] = $rating_rank;
        }
        else
        {
            // for $min you should keep the highest value : max()
            // for $max you should keep the lowest value : min()
            $ratings[$rating_letter] = max($ratings[$rating_letter], $rating_rank);
        }
    } 
    ```

在这一点上回顾一下：

```
// If you had
$min = 'p1 p2 h3';
// Then you end up with an array like this:
$minRanks = array(
    'p' => 2,
    'h' => 3,
);

// If you had
$max = 'h2';
// Then you end up with an array like this:
$maxRanks = array(
    'h' => 2,
); 
```

4-然后您需要遍历 $max 以检查是否有任何评级高于任何 $min

```
foreach ($maxRanks as $letter => $value)
{
    if ($value >= $minRank[$letter])
    {
        return true;
    }
} 
```

# html - 无法让我的 div 并排排列并填充页面的高度

> ID：13744028
> 
> 赞同：1
> 
> 时间：2012-12-06T12:52:35.403
> 
> 标签：html, css

我有以下（[jsfiddle](http://jsfiddle.net/PaJ3r/)）：

```
<div class="content_wrap">
    <div class="left_container">
    </div>

    <div class="right_container">
        <div style="background-color: blue; margin:20px; height: 1500px;"></div>
    </div>

    <div class="clearfix"></div>
</div>

</body>
</html> 
```

CSS：

```
body,html {
    height: 100%;
    width: 100%;
    background-color: #f8f8f8;
}

div.content_wrap {
    width: 100%;
    height: 100%;
}

div.left_container {
    float:left;
    width: 220px;
    height: 100%;
    background-color: red;
}

div.right_container {
    position: relative;
    padding: 15px;
    padding-top: 100px;
    width: 1000px;
}

.clear { clear: both; } 
```

我想要做的是将`div`s 并排排列，并让左侧栏（红色）拉伸到页面的高度，或者内容占据的高度（蓝色），无论哪个更大（如此处所示[的](http://demo.themezilla.com/artiste/)布局）

我现在的问题是： 右容器的内容（蓝色框只是为了说明内容）与左容器没有正确对齐左容器没有根据右容器的内容调整其高度。

我已经进行了明确的修复，但老实说，我并不完全理解它是如何工作的。

希望得到一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:04:21.283

请看一下[这个 jsfiddle](http://jsfiddle.net/PaJ3r/2/)。

很少有评论：我在 s`float: left;`上都使用过`div`，而且，正如巴特所说，你没有为 . 使用正确的名称`clearfix`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:04:32.330

首先，您应该嵌套您的 div，以便`left` `div`可以与正确的 div 一起增长。

[查看更新的小提琴](http://jsfiddle.net/PaJ3r/3/)

对于`left` `div`不设置`height`，而是设置`min-heigth`为 100%。此外，您需要使用边距和填充来获得最后一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:07:04.077

请参阅此演示： http: [//jsfiddle.net/PaJ3r/9/](http://jsfiddle.net/PaJ3r/9/) 这里是更新的 CSS：

```
body,html {
    height: 100%;
    width: 100%;
    background-color: #f8f8f8;
}

div.content_wrap {
    width: 100%;
    position: relative;
}

div.left_container {
    float:left;
    position:absolute;
    width: 220px;
    height: 100%;
    background-color: red;
}

div.right_container {
    position: relative;
    padding: 15px;
    margin-left: 220px;
    padding-top:100px;
    width: 1000px;
}

.clear { clear: both; } 
```

`position:relative`需要in`div.content_wrap`才能将左侧边栏拉伸到内容的高度。
`position:absolute;`in`div.left_container`允许左容器适合包装器 div 的高度。在`div.right_container`那里`margin-left: 220px;`，左侧边栏可见

# jquery - Phonegap - ReferenceError：调用 db.transaction 时找不到变量

> ID：13744029
> 
> 赞同：0
> 
> 时间：2012-12-06T12:52:43.100
> 
> 标签：jquery, cordova, jquery-mobile

我正在使用[Phonegap](http://phonegap.com/) & [jQuery mobile](http://jquerymobile.com/)开发一个 iPhone 应用程序。该应用程序通过[Phonegap 存储 API](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage)使用 WebSQL 进行本地存储。

我一直在 Chrome 中进行开发和测试，一切正常，但是在 Safari 中测试时出现以下错误：

```
ReferenceError: Can't find variable: loadBookingItems 
```

这发生在我的 pageinit 函数中：

```
 $(document).on('pageinit', '#booking_page',  function(){              
     db.transaction(loadBookingItems);
  }); 
```

loadBookingItems*函数*位于 .js 文件中：

```
function loadBookingItems(tx){
    tx.executeSql("SELECT * FROM booking", [], loadBookingItemsSuccess, loadBookingItemsFail);
} 
```

该文件正在加载，就像我说的，它在 Chrome 中运行。jQuery 肯定会被加载。

*db*被定义为全局变量：

```
var db = window.openDatabase("mydb", "1.0", "mydb", 200000); 
```

关于问题是什么以及为什么它只发生在野生动物园中的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:34:10.370

正如评论中所讨论的那样，`pageshow`或者`pagebeforeshow`比`pageinit`您想在每次显示页面时更新加载的项目更合适的事件 - 显然它在那里工作正常。

# android - 删除与我的应用程序具有相同 linux 用户 ID 并使用相同密钥签名的应用程序数据

> ID：13744033
> 
> 赞同：0
> 
> 时间：2012-12-06T12:52:49.703
> 
> 标签：android

在android中我想删除其他应用程序的数据，实际上其他应用程序也是我的，所以可以通过共享userId并使用相同的密钥库签名来删除其他应用程序数据。

如果可能还有其他技巧，请告诉我。

谢谢

# c# - 在固定时间间隔后重新启动 Windows 服务

> ID：13744034
> 
> 赞同：3
> 
> 时间：2012-12-06T12:52:56.000
> 
> 标签：c#, windows, service, timer

我正在开发一个每隔 15 分钟自动发送电子邮件的 Windows 服务。我正在使用计时器在固定时间间隔（15 分钟）后再次使用该服务，但它不起作用。

```
namespace Mailer
{
  public partial class Mailer : ServiceBase
  {
    System.Timers.Timer createOrderTimer;
    public Mailer()
    {
      InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
      sendmail();  //function to send email.

      createOrderTimer = new System.Timers.Timer();                      
      createOrderTimer.Elapsed += new  System.Timers.ElapsedEventHandler(createOrderTimer_Elapsed);
      createOrderTimer.Interval = 15000;
      createOrderTimer.Enabled = true;
      createOrderTimer.AutoReset = true;                      
      createOrderTimer.Start();
    }

    protected void createOrderTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs args)
    {
      createOrderTimer.Stop();
      ServiceController controller = new ServiceController("Mailer");
      controller.Start();
    }

    protected void sendmail
    {
      //code to send email.
    }

    protected override void OnStop() {  }
  }
} 
```

最初发送电子邮件，但我希望每 15 分钟执行一次电子邮件发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:22:24.553

**您需要像这样更改代码**

```
namespace Mailer
{
  public partial class Mailer : ServiceBase
  {
    System.Timers.Timer createOrderTimer;
    public Mailer()
    {
      InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
      createOrderTimer = new System.Timers.Timer();                      
      createOrderTimer.Elapsed += new  System.Timers.ElapsedEventHandler(sendmail);
      createOrderTimer.Interval = 900000; // 15 min
      createOrderTimer.Enabled = true;
      createOrderTimer.AutoReset = true;                      
      createOrderTimer.Start();
    }

    protected void sendmail(object sender, System.Timers.ElapsedEventArgs args)
    {
      //code to send email.
    }

    protected override void OnStop() {  }
  }
} 
```

# python - Google App Engine 启动器无法启动

> ID：13744038
> 
> 赞同：2
> 
> 时间：2012-12-06T12:53:17.857
> 
> 标签：python, google-app-engine

我在使用 Google App Engine Launcher（GUI 东西）时遇到问题。

我把它安装在两台电脑上。两台 PC 都有 Python。在两者上，启动器在安装后（第一次）成功运行。在两者上，起初它都未能部署我提供给它的应用程序，显然是由于无法检测到 Python。

在我的家用电脑上，我打开了首选项并手动设置了 Python 的路径。之后，应用程序被部署，启动器从那时起一直运行良好，从未启动失败。在我的工作 PC 上，我错过了设置 Python 路径的机会，并且启动器无法启动。日志告诉我：`ConfigParser.NoOptionError: No option 'name' in section: '0'`。我怀疑这可能是由于缺少 Python 变量。

不幸的是，似乎没有任何类型的配置文件包含此 GAE 设置。搜索 Windows 注册表也没有任何用处。我尝试在网站上搜索启动器的问题，或者如何在不使用 GUI 的情况下设置 Python 路径，但只找到了有关*应用程序*问题的信息，而不是启动器本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:00:03.157

一个快速的谷歌建议：

> 尝试查找并删除文件 google_appengine_projects.ini

[这里](http://code.google.com/p/google-appengine-wx-launcher/issues/detail?id=6)

或者

> 在 Google 文件夹中，您有 google_appengine_projects.ini 文件。删除它的 [0] 部分。

或者只是卸载并重新安装启动器。

如果仍然没有，请下载一个 IDE - 我使用[pycharm](http://www.jetbrains.com/pycharm/)。它不是免费的（那里有免费的），但它确实为您管理启动器。

# c# - 如何使用 FakeItEasy 断言选择的调用

> ID：13744042
> 
> 赞同：0
> 
> 时间：2012-12-06T12:53:33.447
> 
> 标签：c#, unit-testing, fakeiteasy

使用 FakeItEasy，如何断言发生了任何调用？

用例是我正在编写一个与存储库一起使用的类，并且作为一个方法的结果，该类应该通过调用 DeleteAll 或为所有元素调用 Delete 从存储库中删除一些元素。

现在，我使用了这样的 try-catch：

```
try // either
{
    A.CallTo(() => module.CardRepo.Delete(A<CardData>.That.IsEqualTo(dummy.CardData[0]))).MustHaveHappened();
    A.CallTo(() => module.CardRepo.Delete(A<CardData>.That.IsEqualTo(dummy.CardData[1]))).MustHaveHappened();
}
catch (ExpectationException) // or
{
    A.CallTo(() => module.CardRepo.DeleteAll(A<IEnumerable<CardData>>.That.Contains(dummy.CardData[0]))).MustHaveHappened();
    A.CallTo(() => module.CardRepo.DeleteAll(A<IEnumerable<CardData>>.That.Contains(dummy.CardData[1]))).MustHaveHappened();
} 
```

但我不喜欢这样，如果有更多选择，它很快就会变得非常难看。有没有更好的办法？我在 FakeItEasy wiki 上找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:48:18.360

这是一个示例，说明如何验证是否在假对象上调用了多个方法之一。

```
 public interface IBlah
{
    void Delete(int x);
    int Add(int x, int y);
    int Subtract(int x, int y);
}

public class Something
{
    private readonly IBlah _blah;

    public Something(IBlah blah) { _blah = blah; }

    public void DoSomething(int x, int y )
    {
      //  _blah.Add(x, y);
        _blah.Subtract(x, y);
    }
} 
```

以上只是一个简单的系统来测试

```
 [Fact]
    public void TestFeature()
    {
        var fake = A.Fake<IBlah>();
        var something = new Something(fake);

        something.DoSomething(1, 2);

        var callResults = Fake.GetCalls(fake).Any(call =>
         {
             var x = call.GetArgument<int>("x");
             var y = call.GetArgument<int>("y");
             return call.Method.Name == "Add" || call.Method.Name == "Subtract"
                 && x == 1 && y == 2;
         });

        Assert.True(callResults);
    } 
```

上面的直接代码片段是一个 XUnit 测试，它验证是否使用参数 x =1、y = 2 的给定值调用了 Add 或 Subtract

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:28:17.117

老实说，不确定您是否可以使用 FakeItEasy 做到这一点，您可能可以编写一个扩展方法来使您的代码看起来“更好”，尽管我同意这通常不是一个很好的解决方案。

我真正想说的是，通过单元测试你正在测试确定性行为，所以通过方法的输入你不应该知道是否应该调用 Delete 或 DeleteAll 吗？重点是不应该将这些分成不同的测试吗？也许我在这里没有关于你的案子的足够信息。

# oracle - DBD::Oracle 列以异常格式返回数字

> ID：13744045
> 
> 赞同：1
> 
> 时间：2012-12-06T12:53:47.857
> 
> 标签：oracle, perl, numbers, dbi

我正在使用 DBD::Oracle 查询 Oracle 数据库，然而，奇怪的是，小数返回如下：

```
0.1 will be returned as .1
0.97 will be returned as .97 
```

任何想法为什么会发生这种情况。

我正在使用最新版本的 DBI 和 DBD::Oracle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:36:07.287

这将是您会话中的默认数字格式。DBD::Oracle 将列检索为字符串，因此 Oracle 将执行隐式 TO_CHAR。如果您想要不同的格式，请执行 TO_CHAR(column_name, 'FORMAT')。例如，

```
use strict;
use warnings;
use DBI;
use Devel::Peek;

my $h = DBI->connect('dbi:Oracle:host=xxx;sid=xxx','xxx','xxx',
                     {RaiseError => 1});
eval {
    $h->do(q/drop table mje/);
};

$h->do(q/create table mje (a number)/);
my @n = (0.1, 0.97);

my $s = $h->prepare(q/insert into mje values(?)/);

foreach (@n) {
    $s->execute($_);
}

$s = $h->prepare(q/select * from mje/);
$s->execute;
while (my @row = $s->fetchrow) {
    Dump($row[0]);
}

$s = $h->prepare(q/select TO_CHAR(a, '09D99') from mje/);
$s->execute;
while (my @row = $s->fetchrow) {
    Dump($row[0]);
} 
```

输出

```
SV = PV(0x9b72810) at 0x9c57ed8
  REFCNT = 1
  FLAGS = (POK,pPOK)
  PV = 0x9d11ec0 ".1"\0
  CUR = 2
  LEN = 12
SV = PV(0x9b72810) at 0x9c57ed8
  REFCNT = 1
  FLAGS = (POK,pPOK)
  PV = 0x9d18230 ".97"\0
  CUR = 3
  LEN = 12
SV = PV(0x9b72840) at 0x9c57ff8
  REFCNT = 1
  FLAGS = (POK,pPOK)
  PV = 0x9d0d600 " 00.10"\0
  CUR = 6
  LEN = 12
SV = PV(0x9b72840) at 0x9c57ff8
  REFCNT = 1
  FLAGS = (POK,pPOK)
  PV = 0x9d0d600 " 00.97"\0
  CUR = 6
  LEN = 12 
```

我添加了 Devel::Peek 只是为了向您展示默认情况下它们是字符串（参见 PV），因此添加 TO_CHAR 没有区别。

# c - 在 SDL 中升级屏幕以获得像素化外观的更快方法？

> ID：13744053
> 
> 赞同：0
> 
> 时间：2012-12-06T12:54:25.727
> 
> 标签：c, performance, sdl, pixel, hardware-acceleration

我正在用 C 语言制作一个 2D SDL 游戏。游戏的原始分辨率为 160 × 120，就在将其显示在屏幕上按某个（整数）比例因子（x1，x2，...）放大之前给出一个很好的别名和像素化的独立外观。那里没有什么令人惊讶的。但是，它对游戏的性能有相当（可见的）影响：比例因子越高，影响越大（显然）。

处理缩放和显示的代码如下：

```
#define GET_PIXEL(surface, x, y) *(Uint32 *)((Uint32 *)surface->pixels + (y * surface->w) + x)

void draw(void) {
    if (SDL_MUSTLOCK(screen.native))
        SDL_LockSurface(screen.native);
    for (int i = 0; i < 120; ++i)
        for (int j = 0; j < 160; ++j) {
            SDL_Rect rect = { j * screen.scale, i * screen.scale, screen.scale, screen.scale };
            SDL_FillRect(screen.scaled, &rect, GET_PIXEL(screen.native, j, i));
        }
    if (SDL_MUSTLOCK(screen.native))
        SDL_UnlockSurface(screen.native);
    SDL_Flip(screen.scaled);
} 
```

该`draw()`函数在每一帧都被调用。`screen.native`是 160 × 120 的游戏表面，`screen.scaled`是缩放后的最终表面。`SDL_HWSURFACE`两者都是使用标志创建的 32 位表面。

有没有更好的方法来提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:15:35.820

找到了解决方案。我编译了最新的不稳定版本的 SDL 2.0（它支持全硬件加速）并且只使用`SDL_Texture`s 来获得一个不错的恒定高 FPS，无论分辨率如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:59:44.553

一种简单的解决方案是在 . 上`load`而不是在`draw`函数中升级所有内容，然后存储升级后的版本并重用它。您将用内存换取更好的性能。

# java - 类型不匹配：无法从 ViewGroup.LayoutParams 转换为 LinearLayout.LayoutParams

> ID：13744056
> 
> 赞同：3
> 
> 时间：2012-12-06T12:54:25.420
> 
> 标签：java, android, xml, android-layout

我正在尝试按照发布的示例编写每周日历：
[如何为 Android Honeycomb 应用程序创建每周日历视图？](https://stackoverflow.com/questions/9355747/how-can-i-create-a-weekly-calendar-view-for-an-android-honeycomb-application)
我已在 XML 文件中添加了一个时间标记行，该行假设在当前时间。为此，我使用：

```
<LinearLayout
    android:id="@+id/currentTimeMarkerLinearLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="0dp"
    android:layout_marginTop="120dp"
    android:baselineAligned="false"
    android:orientation="horizontal"
    android:padding="0dp" >

  <View
      android:layout_width="0dp"
      android:layout_height="3dp"
      android:layout_weight="1" />

  <View
      android:id="@+id/currentTimeLineView"
      android:layout_width="0dp"
      android:layout_height="1dp"
      android:layout_weight="14"
      android:background="@color/dark_blue" />
</LinearLayout> 
```

这`LinearLayout`是在 a 内`RelativeLayout`，它们都在 a 内`ScrollView`。
我试图通过编程“移动”这一行，通过修改`layout_margintTop`这些行：

```
int dipValue = 720; // we want to convert this dip value to pix
Resources r = getResources();
float pix = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
    dipValue, r.getDisplayMetrics());

LinearLayout lay =(LinearLayout) findViewById(R.id.currentTimeMarkerLinearLayout);
LinearLayout.LayoutParams lp = lay.getLayoutParams();
lp.setMargins(0, (int) pix, 0, 0);
lay.setLayoutParams(lp); 
```

但是我`lp = lay.getLayoutParams()`告诉我它不能从转换`ViewGroup.LayoutParams`为`LinearLayout.LayoutParams`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T15:41:55.690

> 但是我在 lp =lay.getLayoutParams() 中收到一个错误，告诉我它无法从 ViewGroup.LayoutParams 转换为 LinearLayout.LayoutParams。

如果 a 被 the`LinearLayout`包裹，则`RelativeLayout`它`LayoutpParams`的类型是`RelativeLayout.LayoutParams`（孩子`LayoutParams`从父母那里获取）。您也很可能为`LayoutParams`您在代码中使用的类导入了错误的类。

```
LinearLayout lay = (LinearLayout) findViewById(R.id.currentTimeMarkerLinearLayout);
RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams)lay.getLayoutParams(); 
```

# c# - 使用 ExpertPDF 从 HTML 生成的 PDF 的质量差异

> ID：13744058
> 
> 赞同：2
> 
> 时间：2012-12-06T12:54:41.140
> 
> 标签：c#, asp.net, .net, pdf-generation, html-to-pdf

我正在使用 ExpertPDF HtmlToPdf 转换器通过我的 ASMX Web 服务生成 PDF。但是质量很差，并且随着同一台机器上的 Windows 窗体版本而异。我使用该库的代码在两个应用程序中完全相同。

有什么不同？

样品：

使用 .NET Web 服务生成的 PDF（Windows Server 2008，ExpertPDF 版本 8）： [使用 .NET Web 服务生成的 PDF（Windows Server 2008，ExpertPDF 版本 8）](http://i.stack.imgur.com/C1Zin.jpg)

使用 Windows 窗体应用程序生成的 PDF（Windows Server 2008，ExpertPDF 版本 8）： [使用 Windows 窗体应用程序生成的 PDF（Windows Server 2008，ExpertPDF 版本 8）](http://i.stack.imgur.com/sFtx8.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:32:03.923

解决方案在常见问题解答中，您必须在 IIS7 的应用程序池高级设置中将“加载用户配置文件”设置为 TRUE。

常见问题解答：

问：我在运行转换器的计算机上安装了 IE9 后，生成的 PDF 不再包含可搜索的文本。

答：首先检查您是否没有错误地将 PdfConverter.PdfDocumentOptions.GenerateSelectablePdf 属性设置为 false。默认情况下，此属性为 true。如果该属性为 true，则该问题一定是由 IE9 安装引起的。安装 IE9 后，转换器的 7.0 版（以及 PDF Creator 的 6.0 版）应该可以正常工作。但是，当转换器在没有用户配置文件的身份（如 ApplicationPoolIdentity 身份）下在 IIS 中运行时，即使使用了版本 7 的转换器，也可能会看到此问题。NetworkService 身份始终具有配置文件，并且转换器应在此身份下运行良好。

要解决此问题，您可以在 IIS 的高级设置池中将“加载用户配置文件”设置为 True，也可以按 IE9Config 实用程序中的“配置”按钮以获得相同的效果。您可以在安装的 bin 文件夹中找到 IE9Config.exe 实用程序。IE9Config 实用程序必须以管理员身份执行。为此，您可以在 Windows 资源管理器中选择可执行文件，右键单击它并从弹出菜单中选择“以管理员身份运行”。

重要提示：将加载用户配置文件设置为 True 或按下 IE9Config 实用程序中的配置按钮后，您必须回收 IIS 池或重新启动 IIS。

# php - 比较表中的mysql数据

> ID：13744067
> 
> 赞同：3
> 
> 时间：2012-12-06T12:55:09.183
> 
> 标签：php, mysql

我有一个mysql表`tbl_exam`

```
user_ID | User_name | semester | math | english |
1       | John      | 1st      | 67   |  73     |
1       | John      | 2nd      | 82   |  59     | 
```

在此之后，我想将第一学期的成绩与第二学期的成绩进行比较。即数学在提高，英语在下降

```
user_ID | User_name | math  | english  |
1       | John      | good  | bad      | 
```

我只是获取结果，但不知道如何解决。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:05:05.460

试试这个：

```
SELECT A.user_id, A.user_name, IF((B.math - A.math) > 0, 'good', 'bad') math, 
         IF((B.english - A.english) > 0, 'good', 'bad') english
FROM (SELECT user_id, user_name, math, english 
FROM tbl_exam WHERE semester = '1st') AS A 
INNER JOIN 
(SELECT user_id, user_name, math, english 
FROM tbl_exam WHERE semester = '2nd') AS B ON A.user_id = B.user_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:10:53.147

你的桌子似乎有点不对劲，因为`John`有 2 `user_ID`。应该是这样的

```
 ID |user_ID | User_name | semester | math | english |
   1 |1       | John      | 1st      | 67   |  73     |
   2 |1       | John      | 2nd      | 82   |  59     | 
```

就像`user_ID`约翰一样，只会`ID`增加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:46:02.130

你有`semester`专栏，但学期每年都会重复。因此，如果您跟踪约翰的完整学术生涯，您将无法判断特定的第二学期属于哪一年。

其次，您的架构未标准化。应该有一张`students`带有`user_id`和的表`user_name`。应该有一个`courses`带有`course_id`, `course_name`,的表`course_date`。并且应该有一个`marks`带有`mark_id`, `course_id`, `semester enum('1st','2nd') not null`, `user_id`,的表`mark`。该`marks`表可能有一个由`course_id`and`semester`和组成的唯一 id `user_id`，这将防止学生每学期每门课程获得超过一个分数，并且从逻辑上讲，即使该课程，课程表每年都会获得每门课程的新记录与去年的课程相同。

鉴于上述情况，查询将类似于：

```
SELECT m1.user_id, m1.course_id, 
  CASE WHEN m1.mark > m2.mark THEN 'bad' 
       WHEN m1.mark < m2.mark THEN 'good' 
       ELSE 'same' END AS trend
FROM marks m1 JOIN marks m2 
  ON (m1.user_id = m2.user_id AND m1.course_id= m2.course_id)
WHERE m1.semester=1 AND m2.semester=2; 
```

这将给出：

```
user_id, course_id, trend
      1,         1, 'good'
      1,         2, 'bad' 
```

用英语代替 ids，

```
SELECT user_name, course_name, 
      CASE WHEN m1.mark > m2.mark THEN 'bad' 
           WHEN m1.mark < m2.mark THEN 'good' 
           ELSE 'same' END AS trend
FROM marks m1 JOIN marks m2 
  ON (m1.user_id = m2.user_id AND m1.course_id= m2.course_id)
  JOIN users u ON (m1.user_id=u.user_id)
  JOIN courses c ON (m1.course_id=c.course_id)
WHERE m1.semester=1 AND m2.semester=2; 
```

这将给出：

```
user_id, course_id, trend
   John,      math, 'good'
   John,   english, 'bad' 
```

您可以摆弄聚合函数并旋转输出。但由于您使用 PHP 进行输出，我可能会在那里进行支点。这使您可以处理任意数量的课程，而无需提前知道它们将是什么。

# c# - 迭代注册表，寻找值

> ID：13744070
> 
> 赞同：2
> 
> 时间：2012-12-06T12:55:14.547
> 
> 标签：c#, registry, iteration

场景：我们不关心性能。我们有一个需要在注册表中检查的值数组。//这些值前面可以有任何东西。我们需要改变这一点。

现在，我不觉得它迭代了所有的值，就像它跳过了一些，最后变成了 null 并崩溃了。

这是一个控制台程序，主要看起来像这样：

```
static void Main(string[] args)
    {

        string[] FASKeyWords = new string[] { "DummyValue1", "DummyValue2" };
        RegistryKey BaseKey = Registry.LocalMachine;
        foreach (string FASKeyWord in FASKeyWords)
        {
            Console.WriteLine("Looking in " + BaseKey.Name);
            Console.WriteLine("Looking for : " + FASKeyWord);
            GetSubKeys(BaseKey, FASKeyWord);
        }
    } 
```

现在，Main 称之为 Void

```
private static void GetSubKeys(RegistryKey SubKey,string KeyWord)
        {
            foreach (string valueName in SubKey.GetValueNames())
            {
                string Value = SubKey.GetValue(valueName).ToString();
//Check for any values at all.
                MessageBox.Show(valueName + " with data : " + Value);

                if (Value.Contains(KeyWord))
                    MessageBox.Show("Found '" + KeyWord + "' At " + SubKey.Name);
            }

            foreach (string Key in SubKey.GetSubKeyNames())
            {
                MessageBox.Show(SubKey.Name);
                GetSubKeys(SubKey.OpenSubKey(Key), KeyWord);
            }
        } 
```

我与 Registry 类的合作远非最佳，但据我所知，这应该没问题吧？，我一直在盲目地主演它太久了，我认为再有一双眼睛会很好:)

崩溃发生在：string Value = SubKey.GetValue(valueName).ToString(); 带有 NullReferenceException 此外，它不会显示带有键内所有值的消息框，就像它只是随机挑选出来一样。

视觉问题。 [http://peecee.dk/uploads/122012/Untitled2.png](http://peecee.dk/uploads/122012/Untitled2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:08:48.210

来自[MSDN](http://msdn.microsoft.com/en-us/library/fdf576x1.aspx)：

> GetValue 不支持读取 REG_NONE 或 REG_LINK 类型的值。在这两种情况下，都会返回默认值 (null) 而不是实际值。

您最好处理这种情况（至少使用简单的`if`）：

```
object RawValue = SubKey.GetValue(valueName);
string Value = RawValue != null ? RawValue.ToString() : ""; 
```

# android - Android 平板电脑和软件按钮，菜单没有触摸

> ID：13744073
> 
> 赞同：2
> 
> 时间：2012-12-06T12:55:24.200
> 
> 标签：android, menu, touches

首先..我对Android世界相当陌生（我只是从iOS开发扩展）并且在互联网上做了相当多的研究，但我有点被这个难住了..

我的应用程序是一个相当基本的应用程序，MainActivity 由一个 MapActivity 和一个 Menu..

我这里的测试设备如下：

*   HTC One X - 4.0.4 - 硬件返回/主页/多任务 - 软件菜单
*   Asus Nexus 7 - 4.2.1 - 软件返回/主页/多任务/菜单
*   华为 Ascend G 300 - 2.3.6 - 硬件 返回/主页/菜单

我的应用程序似乎在所有这些设备上都可以正常工作，我将构建发送给我的客户进行测试..

他的设备如下：

*   三星 Galaxy Tab "10 - 3.1 - 软件返回/主页/多任务/菜单

该应用程序似乎对他来说启动得很好，但只要他点击软件菜单（溢出），他就会看到 3 个按钮（搜索、历史记录和设置），但是一旦点击就没有响应，甚至没有选择的图像表示正在接收新闻！

我在相同的规格上运行 Android 模拟器，并且可以重新创建问题（使用“10.1in WXGA（平板电脑）”模板）。此外，当按下地图注释时，它会执行相同的操作并且不响应触摸。 ..

我的最小 SDK 版本是 10 我的目标 SDK 版本是 17

我还在 3.1 上运行了一个 320x480 设备（有硬件按钮）并且没有问题（MapView 上的触摸也没有问题）所以这让我尝试了一个带硬件按钮的 10 英寸平板电脑。

然后，我在 AVD 管理器中克隆了“10.1in WXGA（平板电脑）”模板，并将软件按钮更改为硬件，看看发生了什么，但它忽略了它们，仍然显示软件按钮..

然后我在 4.2 上运行“10.1in WXGA（平板电脑）”模板，它运行起来就像我的物理 Nexus 7 一样没有问题，因此排除了 10 英寸平板电脑的问题。

这真的让我很困惑，因为我对如何解决这个问题已经没有想法了，所以我把它作为我最后的手段..

这是我的菜单 XML（我将设置作为溢出用于测试目的，因为我将在实时版本的空间中使用）

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_search"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/menu_search" android:enabled="true" android:checkable="false" android:visible="true"/>

<item
    android:id="@+id/menu_history"
    android:orderInCategory="101"
    android:showAsAction="ifRoom"
    android:title="@string/menu_history" android:enabled="true" android:checkable="false" android:visible="true"/>

<item
    android:id="@+id/menu_settings"
    android:orderInCategory="102"
    android:showAsAction="collapseActionView"
    android:title="@string/menu_settings" android:enabled="true" android:checkable="false" android:visible="true"/></menu> 
```

这是`onCreateOptionsMenu()`和 `onOptionsItemSelected()`功能..

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);  
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    Log.i("NOTE","Menu Item Pressed: "+item.getItemId());
    switch (item.getItemId()) {
        case R.id.menu_search:
            showSearch();
            return true;
        case R.id.menu_history:
            Intent history = new Intent(this, HistoryActivity.class);
            startActivityForResult(history, HISTORY_REQUEST_CODE);
            return true;
        default:
            Intent settings = new Intent(this, SettingsActivity.class);
            startActivity(settings);
            return super.onOptionsItemSelected(item);
    }
} 
```

顺便说一句，应用程序构建目标是 Google APIs 4.2 (API 17)

如果您需要更多信息，请告诉我，我会提供。我还应该提醒您，此错误也会影响在 PolarisMapView 库上选择叠加层，因此它可能不仅仅是本地化到菜单。

ActionBar 中显示的其他两个 MenuItems 也可以正常工作.. 似乎只是在溢出框中显示时... 地图周围的导航也可以正常工作，因此地图的大部分部分都获得了触摸事件..

这是我的 MainActivity 的布局，它可能是相关的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.cyrilmottier.polaris.PolarisMapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapview"
android:layout_height="fill_parent"
android:layout_width="match_parent"
android:apiKey="MY API KEY HERE" />

<RelativeLayout
    android:id="@+id/adsdkContent"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" >
</RelativeLayout>
</RelativeLayout> 
```

感谢阅读的人！

# java - Windows 控制台中的 unicode 字符比预期的要多

> ID：13744076
> 
> 赞同：9
> 
> 时间：2012-12-06T12:55:42.803
> 
> 标签：java, windows, unicode, console

我想在 Windows 控制台中打印俄语和德语字符。所以我写了一个小测试程序来了解它的工作原理：

```
PrintStream ps = new PrintStream(System.out, false, "UTF-8");
ps.println("öäüß гджщ"); 
```

然后我启动了 cmd.exe，将其字体更改为支持 Unicode 的 Lucida Console，将代码页更改为带有“chcp 65001”的 Unicode 并执行我的程序。

打印了德语和俄语字符，但文本比我预期的要多一点（用红色下划线）： ![在此处输入图像描述](../Images/7a165e710599aa409ded114738f7e7c5.png)

但是文本在 Eclipse 控制台中正确打印。有没有办法在 Windows 控制台中正确打印它？我使用 Windows 7。

我刚刚用 JNI 解决了这个问题，但是对于纯 java 是否可行仍然很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:38:32.800

每次打开或写入文件时，都会应用某种编码。但有时我们忘记了我们的 IDE（在您的情况下为 Eclipse）也有编码。

当您在引号之间键入某个文本时，它会以某种编码（即您的 IDE 的编码）显示和输入。您的假设是您的输出流（UTF-8）的编码也将保证文本以该特定编码显示。但是，我认为这里也再次应用了您的 IDE 的编码。

我建议仔细检查您对 eclipse 的编码。也许这可以解决您的问题。当然值得一试，不是吗？:)

对于全局编码设置，将以下代码添加到 eclipse.ini 文件中

```
-Dfile.encoding=UTF-8 
```

**编辑：**

我只想添加以下内容。我执行了以下步骤作为实验。

1.  我打开记事本++并创建了一个新文件
2.  I modified the encoding setting to UTF-8
3.  I copied your Russian text and pasted it in my new text file and saved it.
4.  Next I opened my windows console ("cmd")
5.  I executed the "chcp 65001" command.
6.  Next I printed the content of the file in my console: "type file.txt"
7.  Everything shows correctly.

This does not confirm much, but it does confirm the fact that DOS can do the job if the content is foreseen in the right encoding.

**EDIT2:**

@ka3ak It's been over 2 years, but while reading a book about Java I/O I stumbled upon the following.

> `System.console().printf(...)` has better support for special characters than the `System.out.println(...)` method.

Since the `PrintStream` just wraps around the `System.out` stream, I guess you have the same limitations. I am wondering if this could have solved the problem. If it still matters, please give it a try. :)

Other posts on stackoverflow report similar things: [console.writeline and System.out.println](https://stackoverflow.com/questions/4005378/console-writeline-and-system-out-println)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:18:32.773

After reading the answers and recommendations here I concluded that there must be a problem with JRE. Maybe this problem only exists in Windows 7 (unfortunately I don't have other Windows systems to experiment with).

The solution is to use JNI or if you want a simpler solution then use JNA. I've found a useful JNA example, which solves my problem, here [https://stackoverflow.com/a/8921509/971355](https://stackoverflow.com/a/8921509/971355)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-17T08:38:09.673

This is due to the a in ¼-hearted implementation of cp65001 in Windows. See the complete disclosure in [@eryksun’s answer](https://stackoverflow.com/a/39745938/9106292).

简短的总结：只有 7 位（原文如此！）输入/输出在 cp65001 中可靠地工作（除非 CRTL 做出变通办法）直到 Windows 7。输出问题在 Windows 8 中得到修复。输入问题出现在 Windows 10 中。

# java - 如何根据程序启动时生成的数据初始化全局矩阵？

> ID：13744084
> 
> 赞同：0
> 
> 时间：2012-12-06T12:56:13.473
> 
> 标签：java, exception

我正在创建一个程序，该程序必须保存许多信息，其中一个存储一个矩阵，其想法是根据项目是否存在（0）保持0或-1，在其他情况下（-1）。但是当我试图在一个方法中初始化这个矩阵时会生成一个 nullPointerException。

我试图修复它，像这样初始化矩阵：

```
public static int libros[][]= new int[arrayListLibros.size()][numeroMayor()]; 
```

但它会产生另一个错误

```
Exception in thread "main" java.lang.ExceptionInInitializerError
at Modelo.Main.main(Main.java:26)
Caused by: java.lang.NullPointerException
at Modelo.SistemaDeGestion.<clinit>(SistemaDeGestion.java:19)
... 1 more 
```

我没有找到如何解决它

这是代码：

```
 public void cargarMatrizLibros() throws Exception{
    int numeroMayor = numeroMayor();
    for (int j = 0; j < arrayListLibros.size(); j++){
        for (int k = 0; k < numeroMayor; k++){
            if( k < Integer.getInteger(arrayListLibros.get(j).getEjemplares())){
                libros[j][k] = 0;
            }
            else{
                libros[j][k] = -1;
            }
        }
    }
}

public static int numeroMayor(){
    int numeroMayor = 0;
    for (int i = 0; i < arrayListLibros.size(); i++) {
        if(Integer.getInteger(arrayListLibros.get(i).getEjemplares()) > numeroMayor){
            numeroMayor = Integer.getInteger(arrayListLibros.get(i).getEjemplares());
        }
    }
    return numeroMayor;
} 
```

arrayListLibros 之前在程序的 main 方法中进行了初始化：

```
SistemaDeGestion sistema = new SistemaDeGestion();
    try {
        sistema.cargarDatosEmpleados();
        sistema.cargarDatosUsuarios();
        sistema.cargarDatosLibros();
        sistema.cargarMatrizLibros();
    } catch (Exception ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

其中 sistema 引用了创建的类...而 cargarDatosLibros 的代码在这里：

```
public void cargarDatosLibros() throws Exception {
    arrayListLibros = new ArrayList<>();
    ArrayList<String> lineas = leerArchivo("libros.txt");

    for (int i = 0; i < lineas.size(); i++) {
        String libro[] = {"", "", "", "", "", "", ""};
        int c1 = lineas.get(i).indexOf("~T");
        int c2 = lineas.get(i).indexOf("~A");
        libro[0] = lineas.get(i).substring(c1 + 2, c2);
        int c3 = lineas.get(i).indexOf("~A");
        int c4 = lineas.get(i).indexOf("~E");
        libro[1] = lineas.get(i).substring(c3 + 2, c4);
        int c5 = lineas.get(i).indexOf("~E");
        int c6 = lineas.get(i).indexOf("~Tem");
        libro[2] = lineas.get(i).substring(c5 + 2, c6);
        int c7 = lineas.get(i).indexOf("~Tem");
        int c8 = lineas.get(i).indexOf("~Edi");
        libro[3] = lineas.get(i).substring(c7 + 4, c8);
        int c9 = lineas.get(i).indexOf("~Edi");
        int c10 = lineas.get(i).indexOf("~Anho");
        libro[4] = lineas.get(i).substring(c9 + 4, c10);
        int c11 = lineas.get(i).indexOf("~Anho");
        int c12 = lineas.get(i).indexOf("~I");
        libro[5] = lineas.get(i).substring(c11 + 5, c12);
        int c13 = lineas.get(i).indexOf("~I");
        int c14 = lineas.get(i).indexOf("~End");
        libro[6] = lineas.get(i).substring(c13 + 2, c14);
        int z = i + 1;
        Libro temp = new Libro(libro[0], libro[1], libro[2], libro[3], libro[4], libro[5], libro[6], z);
        arrayListLibros.add(temp);
    }
} 
```

所以我不知道是哪个问题，因为它之前已初始化。

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:59:52.287

我猜你`arrayListLibros`的没有初始化。加载类时加载静态内容。

```
public static int libros[][]= new int[arrayListLibros.size()][numeroMayor()]; 
```

`arrayListLibros`尚未初始化，因此导致`NullPointerException`调用 size() 时，从而导致`ExceptionInInitializerError`.

**来自 API：**

> 表示静态初始化程序中发生了意外异常。抛出 ExceptionInInitializerError 以指示在评估静态初始化程序或静态变量的初始化程序期间发生异常。

## 编辑：

如下所示：

```
public class StaticTestForLaura {
    static List<String> arrayListLibros;
    static {
            arrayListLibros= new ArrayList<String>();
        arrayListLibros.add("Laura");
    }
    public static int libros[]= new int[arrayListLibros.size()];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:06:11.610

您正在从您的 arrayListLibros 中请求数据，而无需检索该数据。有一个空指针异常可能意味着一些东西还没有初始化（例如它的值为空）。

如果你调试这段代码，你会看到你的arraylist 的值被设置为null。发生这种情况时，您应该查找您的arraylist 的初始化，如果没有则初始化它。根据我的经验，另一个常见的错误是在初始化之前调用与对象的特定交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:03:01.347

对我来说，它看起来`arrayListLibros`在初始化时还没有`libros`被初始化。

# python - Biopython 翻译脚本不起作用？

> ID：13744086
> 
> 赞同：0
> 
> 时间：2012-12-06T12:56:21.927
> 
> 标签：python, translation, sequence, biopython

我是 Biopython 的新手，我只是想翻译一个 DNA Fasta 文件并将输出写入一个新文件。我认为这很容易，但我无法让脚本正常工作。
这是我的尝试：

```
#!/usr/bin/env python
import sys
from Bio.Seq import Seq
from Bio.Alphabet import IUPAC

in = open(sys.argv[1],'r')
out = open(sys.argv[2],'w')

messenger_rna = Seq(in, IUPAC.unambiguous_rna)
out = messenger_rna.translate()

out.close()
in.close() 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:01:23.333

虽然我不知道所有这些[biopython](/questions/tagged/biopython "显示标记为“biopython”的问题")等是什么，但我很确定您错误地处理了这些文件。

尤其

```
out = open(sys.argv[2],'w')
out = messenger_rna.translate()
out.close() 
```

对我来说似乎错了。

将中间线替换为

```
out.write(messenger_rna.translate()) 
```

如果那是`.translate()`返回的字符串。

进一步优化的版本：

```
#!/usr/bin/env python

import sys
from Bio.Seq import Seq
from Bio.Alphabet import IUPAC

with open(sys.argv[1],'r') as infile: # for auto-closing
    messenger_rna = Seq(infile, IUPAC.unambiguous_rna)
    # if Seq() takes a string rather than a file, do infile.read() instead.

with open(sys.argv[2],'w') as outfile:
    outfile.write(messenger_rna.translate()) 
```

# matlab - 相同的 MATLAB 代码适用于 R2012a，但不适用于 R2009a

> ID：13744088
> 
> 赞同：-2
> 
> 时间：2012-12-06T12:56:56.393
> 
> 标签：matlab, for-loop

我在自己的电脑上安装了 Matlab R2012a，在朋友的电脑上安装了 Matlab R2009a（多线程）。由于我的电脑只有 2gb 内存，而我朋友的内存只有 128gb 和更好的处理器，我决定在我朋友的电脑上执行我的代码。

我通过远程桌面连接程序连接到他的计算机，从 Dropbox 下载了我的代码和数据集并执行了我的代码。但是，即使一个小时过去了，我的代码的执行也没有完成。（*在我的电脑上花了大约 20 分钟，如果你认为我朋友的系统比我的好得多，那应该不到 20 分钟。*）然后我又等了几个小时，但执行没有完成。

然后，为了了解问题出在哪里，我一步一步地评估了代码，并注意到它无法完成以下循环的执行：

```
l=1;
for n=1:max_t
    for m=1:t(1,n).numberofPoints
        x_t(l)=t(1,n).matrix(m,1);
        y_t(l)=t(1,n).matrix(m,2);
        z_t(l)=t(1,n).matrix(m,3);
        l=l+1;
    end
end
minx = min(x_t(:));
miny = min(y_t(:));
minz = min(z_t(:)); 
```

这只是一个简单的循环来获得我在 x,y,z 坐标中的最小点。（*我确信这个循环没有任何问题。它可以在我的 PC 上成功运行。*）我知道我不需要循环来获取结构的最大和最小点，但我是 MATLAB 新手，不太了解。因此，这对我来说似乎是最简单的选择。

我真的必须能够使用我朋友的电脑，因为我的内存不足以进行进一步的处理。因此我需要解决这个问题。

相同的代码在我的计算机上运行但在我朋友的计算机上运行的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:55:37.150

[Matlab R2011a在循环增长数组](http://blogs.mathworks.com/steve/2011/05/16/automatic-array-growth-gets-a-lot-faster-in-r2011a/)时引入了显着的性能改进，我相信 R2012a 进一步改进了这些。

因此，在 R2009 中，循环只需要更长的时间来运行，因为您没有预先分配`x_t`.

还有其他方法可以改进您的代码，这里我将简单地修复预分配：

```
l=1;

%# preallocate with NaN, so that the values don't interfere with
%# taking the minimum later
lMax = sum([t(1,1:max_t).numberofPoints)]);
[x_t,y_t,z_t] = deal(NaN(lMax,1));

for n=1:max_t
    for m=1:t(1,n).numberofPoints
        x_t(l)=t(1,n).matrix(m,1);
        y_t(l)=t(1,n).matrix(m,2);
        z_t(l)=t(1,n).matrix(m,3);
        l=l+1;
    end
end
minx = min(x_t(:));
miny = min(y_t(:));
minz = min(z_t(:)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:12:38.787

我不知道为什么它不会在你朋友的电脑上执行。很明显，除了处理器和 RAM 之外还有一些不同的东西。

我想知道为什么有人会编码你所做的事情。您有两个循环将数据加载到向量中，然后您找到 x、y 和 z 的最小值。为什么不只是在循环值时找到最小值？无需调用 min。

我不像我想的那样熟悉 Matlab，但我也想知道为什么你需要从矩阵中复制出来才能做到这一点。矩阵行可以被认为是向量或数组。您不能只搜索 x、y、z 列上的最小值而不必复制数据吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:33:21.717

由于多种原因，您编写的代码很慢......您没有预先分配`x_t`和朋友，而是在循环中增长它们。最后你什么都不做，只计算它们的最大值......

我同意达菲莫；为什么不摆脱整个双循环并编写

```
minx = min( [t(1,:).matrix(:,1)] ) 
```

或者

```
minx = min( cellfun(@(x)min(x(:)), {t(1,:).matrix(:,1)}, 'uni',0) ); 
```

或适用于您的案例的那些工具的其他排列？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:02:13.293

除非您掌握了一些相当基本的故障排除技能，否则调试代码（因此通常是编写代码和编程）对您来说将是非常困难、痛苦和不愉快的。我第十次问你：

**它取得了多大的进步？当您停止执行（即按 Ctrl-C）时， 的值是`l`多少？**

如果 l 的值为 1，则您可能会遇到一些奇怪的 Matlab 许可问题。尝试解决这个问题。

**它是在进步但进展缓慢吗？当你停止执行时，什么是`size(x_t)`？**

如果`size(x_t)`是 l（或接近 l），则您的数组尚未充分初始化。您可能应该看看 Jonas 的出色回复。

坦率地说，我已经投票结束这个问题，因为它过于本地化。也许您应该尝试以这样一种方式解决它，它显示您的一些努力（除了强调您的朋友和他的机器和他的 RAM）强调您为解决问题及其结果所做的操作。

# c# - 排序列表 使用数组按索引

> ID：13744095
> 
> 赞同：0
> 
> 时间：2012-12-06T12:57:18.400
> 
> 标签：c#, arrays, list

我在使用数组作为排序源按索引对列表进行排序时遇到问题。

假设我的班级有 5 条记录

```
class Program
{
    static void Main(string[] args)
    {
     int[] myInt {2,1,0,3,4}
     List<Tests> myTests = new List<Tests>; 

     //this part doesn't work

     for (int i = 0; i < 4; i++)
        {
         myInt[i] = myTests[i];
         }
     myTests.ForEach(i => Console.WriteLine("{0} {1}", i.id, i.myString));
    }
} 
```

我的班级定义

```
class Tests
{
     public int iD {get; set;}
     public string myString {get; set;}

     public Tests (int iD, string myString)
    {
       this.iD = iD;
       this.myString = myString
    }
{ 
```

我想看到的出来

```
 record 2
     record 1
     record 0
     record 3
     record 4 
```

我尝试对列表使用排序函数，但我找不到任何使用数组作为排序标准的示例，所以我有点迷路了。我感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:02:34.983

在我的脑海中，这样的事情应该可以解决问题：

```
var sortedTests = myInt
    .Select((x,index) => new {test = myTests[x], sortIndex = index})
    .OrderBy(x => x.sortIndex)
    .Select(x => x.test)
    .ToList() 
```

唔。事实上，使用 Linq-to-objects 会更容易一些：

```
var sortedTests = myInt
    .Select(x => myTests[x])
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:03:28.150

您应该将 myTests 的值分配给另一个 List

```
List<Tests> newTests = new List<Tests>();
for (int i = 0; i < 4; i++)
{
    newTests.Add(myTests[myInt[i]]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:03:56.467

**第一的：**

`myList[i]`除非您在 position 中创建了列表项，否则您无法使用`i`。

**第二：**

您没有调用`Tests`构造函数来创建新`Tests`对象

**第三：**

您分配给`myInt[i]`一个空的参考`myTests[i]`

你应该有类似的东西：

```
for (int i = 0; i < 4; i++) {

    myTests.Add(new Tests(i, "foo"))

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:27:47.683

您提供的代码有点模糊，所以我编造了几个不同的场景。
1.基于索引创建。
2.根据索引排序。

将其粘贴到您的 IDE 中，它将起作用。

```
 class Program
  {
    static void Main(string[] args)
    {
      int[] myInt = new[] { 2, 1, 0, 3, 4 };

      // there is nothing to sort at this time, but this is how I would make a new list matching your index....
      var myTests = (from x in myInt select new Tests(x, "whatever")).ToList();

      myTests.ForEach(i => Console.WriteLine("{0} {1}", i.iD, i.myString));

      // So assuming that you are starting with an unsorted list....
      // We create and priont one....
      myTests = new List<Tests>();
      for (int i = 0; i < myInt.Length; i++)
      {
        myTests.Add(new Tests(i, "number " + i));
      }

      Console.WriteLine("unsorted ==");
      myTests.ForEach(i => Console.WriteLine("{0} {1}", i.iD, i.myString));

      // And this will perform the sort based on your criteria.
      var sorted = (from x in myInt
                    from y in myTests
                    where y.iD == x
                    select y).ToList();

      // And output the results to prove it.
      Console.WriteLine("sorted ==");
      sorted.ForEach(i => Console.WriteLine("{0} {1}", i.iD, i.myString));

      Console.Read();
    }
  } 
```

# asp.net - 复选框周围的空间

> ID：13744102
> 
> 赞同：0
> 
> 时间：2012-12-06T12:57:39.947
> 
> 标签：asp.net, html, css

我很困惑。

使用以下代码：

```
<div>
   <table class="filter_component_css">
      <tr>
         <td>purchase order</td>
         <td><asp:TextBox CssClass="search_format" ID="po_textbox" runat="server"></asp:TextBox></td>
      </tr>
      <tr>
         <td>material desc</td>
         <td><asp:TextBox CssClass="search_format" ID="material_desc_textbox" runat="server"></asp:TextBox></td>
      </tr>
      <tr>
          <td>supplier</td>
          <td><asp:TextBox CssClass="search_format" ID="supplier_textbox" runat="server"></asp:TextBox></td>
      </tr>
      <tr>
          <td>manufacturer</td>
          <td><asp:TextBox CssClass="search_format" ID="manufacturer_textbox" runat="server"></asp:TextBox></td>
      </tr>

       <tr>
          <td>special tools</td>              
          <td><asp:Checkbox CssClass="checkbox_format" ID="tools_checkbox" runat="server"/></td>
      </tr>

      <tr>
            <td colspan="2">
                <asp:Button ID="buttonReset" runat="server" Text="Reset" OnClick="submitResetClick"/>
                <asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="submitSearchClick"/>
            </td>
      </tr>

    </table>
</div> 
```

和 CSS 类：

```
.checkbox_format
{
        border: 1px solid black;    
} 
```

结果，我看到复选框周围有空格。我正在 IE7 中测试应用程序。我的问题 - 是否可以删除复选框周围的空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:14:36.213

试试这个 CSS。希望这会有所帮助。

```
.checkbox_format
{
        margin:0 !important;
        display: block;
        border: 1px solid black;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:06:16.873

尝试将其放在一行中，例如：

```
<tr><td colspan="2"><asp:Button ID="buttonReset" runat="server" Text="Reset" OnClick="submitResetClick"/><asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="submitSearchClick"/></td></tr> 
```

如果我还不错，那解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:08:51.047

众所周知，复选框很难设置样式。对于每个复选框周围应该有多少空间，浏览器往往有不同的想法。

您最好的选择是添加一条规则，从复选框中删除边距和填充。

```
.checkbox_format
{
    border: 1px solid black;    
    margin:0; padding:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T04:29:36.677

这已经超过一年了，但我遇到了同样的问题并试图解决它。问题是 asp.net 复选框在没有正确传播样式的 html 中实现时包含在跨度中。我的解决方案是使用：

```
.checkbox_format input
{
    border: 1px solid black;    
    margin:0; padding:0;
} 
```

希望它可以帮助别人！

# javascript - 查找字符串的第一个字母是否大写

> ID：13744105
> 
> 赞同：3
> 
> 时间：2012-12-06T12:57:50.773
> 
> 标签：javascript, jquery

> **可能重复：**
> [检查单词的第一个字母是否为大写字母](https://stackoverflow.com/questions/8334606/check-if-first-letter-of-word-is-a-capital-letter)

我想编写一个函数，在其中将字符串作为参数传递。然后我想知道这个字符串的第一个字母是不是大写。如果是大写，则返回 true，否则返回 false。我怎样才能在javascript中实现这一点？任何简单的demo，后面我会根据需要修改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:59:58.077

```
var myString = "Whatever you want to test"
console.log(myString[0] == myString[0].toUpperCase());
//Returns true

myString = "whatever you want to test"
console.log(myString[0] == myString[0].toUpperCase());
//Returns false 
```

`myString[0]`不适用于（某处）IE7/IE8 及更低版本，`myString.charAt(0)`如果您需要脚本与这些浏览器兼容，请使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T13:01:05.543

您可以使用 String.charCodeAt()。此函数返回字符的 unicode 值。大写字母与小写字母的值不同。

检查文档： [http ://dochub.io/#javascript/string.charcodeat](http://dochub.io/#javascript/string.charcodeat)

```
function isFirstLetterCapital(string) {
  return string.charCodeAt(0) === string.toUpperCase().charCodeAt(0);
} 
```

**编辑：**

charAt 实际上更快 - [http://jsperf.com/string-operations-order](http://jsperf.com/string-operations-order)。感谢 Cerbrus 指出这一点。

```
function isFirstLetterCapital(string) {
  return string.charAt(0) === string.charAt(0).toUpperCase();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T13:01:38.887

```
if(yourString.match(/^[A-Z]/)) ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:00:31.470

```
function isFirstLetterUpperCase(string) {
   var firstLetter = string.charAt(0);
   return firstLetter == firstLetter.toUpperCase();
} 
```

# c - 在 cuda 中执行一次部分代码

> ID：13744109
> 
> 赞同：1
> 
> 时间：2012-12-06T12:58:06.527
> 
> 标签：c, cuda

我想知道是否可以在 GPU 中做一个静态语句

这是我的代码的一部分

```
__global__ void run_state(float *oldv, float* newv, float* w, int t)
{
  int i = threadIdx.x;

  nextState(i, oldv, newv, w, t);

  newv[0]   = newv[1];
  newv[N+1] = newv[N];

} 
```

我想知道是否 `newv[0] = newv[1];`并且`newv[N+1] = newv[N];`可以在`nextState`循环后执行并且只执行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:43:57.960

我不清楚您到底想达到什么目标（*按什么*执行一次？），所以我将展示一些替代方案：

**如果你想每个 block**执行一次语句，你可以简单地通过测试线程索引来做到这一点：

```
__syncthreads();
if ((threadIdx.x | threadIdx.y | threadIdx.z) == 0) {
    // statements that are only executed once per block
}
__syncthreads(); 
```

**如果您想在每次内核调用**时执行一次语句，则需要更具体地说明该语句何时执行，因为内核的块执行没有特定的顺序。

上面示例的简单扩展产生了一个版本，其中语句在每次内核调用时执行一次，但在未指定的时间：

```
if ((threadIdx.x | threadIdx.y | threadIdx.z
     | blockIdx.x | blockIdx.y | blockIdx.z) == 0) {
    // statements that are executed once per kernel invocation,
    // at an unspecified time
} 
```

可以使用全局内存中的原子操作指定语句何时执行，但会消耗额外的全局内存带宽。为了限制性能影响，通常每个块只执行一次这些原子操作是一个好主意。

如果您想**在第一个块到达它时立即**执行该语句，一个全局标志的简单测试就足够了：

```
__global__ volatile unsigned int statementHasExecuted;

...

__syncthreads();
if ((threadIdx.x | threadIdx.y | threadIdx.z) == 0) {
    unsigned int state = atomicMin((unsigned int*)&statementHasExecuted, 1);
    if (state == 0) {
        // statements that are executed once per kernel invocation,
        // as soon as the first block reaches the statement

        // now make the results visible to the other blocks:
        __threadfence();
        // and signal that we are done:
        atomicMin((unsigned int*)&statementHasExecuted, 2);
    } else {
        while (state < 2) {
            // busy wait until execution of statement in other block has finished:
            state = statementHasExecuted;
        }
    }
}
__syncthreads(); 
```

`statementHasExecuted`在每次内核启动之前都需要将其重置为零。

您所追求的可能是相反的情况，一段仅**在所有其他块完成后**执行的代码。[编程指南的附录 B.5“内存栅栏功能”](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#memory-fence-functions)给出了示例代码。

（请注意，所有代码都已在浏览器中编写并且未经测试 - 它可能包含错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:16:40.193

您指定一个线程来完成最后的工作。例如：

```
__global__ void run_state(float *oldv, float* newv, float* w, int t)
{
  int i = threadIdx.x;

  nextState(i, oldv, newv, w, t);

  if (i == 0) {
    newv[0]   = newv[1];
    newv[N+1] = newv[N];
  }
} 
```

# c - 根据 2 级 C-mex S-Function 中的输入端口数据类型设置 Simulink 模块的输出端口数

> ID：13744112
> 
> 赞同：1
> 
> 时间：2012-12-06T12:58:19.087
> 
> 标签：c, matlab, mex, simulink

我正在尝试创建一个用 C 语言编写的 2 级 S-Function，它具有*不同数量的输出端口，*具体取决于连接到输入端口的*信号数据类型。*

实际背景是我有一些其他的 S-Function，它们通过调用来定义自定义数据类型`ssRegisterDataType`。这些数据类型描述了指向某些数据的指针。

我现在想要另一个可以使用这些自定义数据类型（指针）的 S-Function，并根据输入的指针类型输出某些数据。

`ssSetNumOutputPorts`我尝试通过设置输出端口的数量

```
static void mdlSetInputPortDataType(SimStruct *S, int portIndex,DTypeId dType)
{
    if( portIndex == 0 )
    {
        if(      dType == ssGetDataTypeId(S, "ptrtype1" ) )
        {
            if (!ssSetNumOutputPorts(S, nOutportsPtr1)) return;
        }
        else if( dType == ssGetDataTypeId(S, "ptrtype2" ) )
        {
            if (!ssSetNumOutputPorts(S, nOutportsPtr2)) return;
        }
        else if( dType == ssGetDataTypeId(S, "ptrtype3" ) )
        {
            if (!ssSetNumOutputPorts(S, nOutportsPtr3)) return;
        }
        else if( dType == ssGetDataTypeId(S, "ptrtype4" ) ) 
        {
            if (!ssSetNumOutputPorts(S, nOutportsPtr4)) return;
        }
        else
        {
            ssSetErrorStatus(S, "Input data type is not supported."); return;
        }

        if (!ssSetInputPortDataType(S, portIndex, dType)) return;
    }
} /* mdlSetInputPortDataType */ 
```

在`mdlInitializeSizes`我将 inport 的数据类型设置为`DYNAMICALLY_TYPED`.

但是 Simulink 一直告诉我我应该在`mdlSetInputPortDataType`调用`ssSetNumOutputPorts`. 我假设在这个函数内部只有输入端口的数据类型可以改变。

有人知道这个问题的解决方案吗？我能想到的唯一解决方法是屏蔽 S-Function 并让用户手动选择他希望处理的指针类型。但是，对于数据类型传播，这似乎是混乱且不必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:40:40.173

您需要在 mdlInitializeSizes 中设置端口数。在那个函数之后你不能改变它。唯一的解决方法是你提到的那个。

# .net - IIS 7.5 在预定时间回收应用程序池

> ID：13744113
> 
> 赞同：0
> 
> 时间：2012-12-06T12:58:21.827
> 
> 标签：.net, iis, pool

我们遇到了应用程序池在指定时未回收的问题（可能是因为它们已关闭，这是问题的一部分）。我们有大约 20 个应用程序池，主要运行 .net 4 mvc 站点和 wcf 服务。所有应用程序池都已配置为在同一特定时间回收，并已配置为仅记录此类事件。在检查事件查看器时，实际上只有 2 或 3 个被回收。问题似乎通过应用程序表现出来，然后以有时奇怪的方式表现。

在重新启动工作进程时，正在关闭的应用程序池是否构成应用程序池的回收？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T09:30:19.960

这是我的 2 美分——

如果您指的是关机，答案是否定的。

如果您指的是自行回收应用程序池，则该进程会在杀死旧的worker之前创建一个新的worker，因此没有停机时间。

关闭后启动时，工作进程将是新启动的进程。

因此，由于存在停机时间，我不会说关机和重启构成回收过程。

希望澄清。

# asp.net-mvc-3 - NHibernate：枚举以在数据库中列出和存储值

> ID：13744115
> 
> 赞同：3
> 
> 时间：2012-12-06T12:58:32.360
> 
> 标签：asp.net-mvc-3, nhibernate

我正在使用`enum`'s 和一个自定义`Selector`类来帮助在单选按钮、下拉菜单、复选框等之间进行选择。我正在使用 NHibernate。通过单个选择（单选按钮、下拉菜单），来自属性的值`[Display(Name = "[Some Text]")]`将填充到数据库表中（注意：我使用的是扩展名`Display(Name)`）。但是，对于多个选择（复选框、多列表），我无法弄清楚如何将`enum`选择的值输入数据库。

这是我的模型的一部分（每个都在单独的文件中）（编辑：我给了它们通用名称，以免进一步混淆问题）：

```
public enum MyEnum
{
    [Display(Name = "Text for enum1")]
    enum1,
    //Left out 2 - 10 for brevity
    [Display(Name = "Text for enum10")]
    enum10
}
...
public class MyEnumSelectorAttribute : SelectorAttribute
{
    public override IEnumerable<SelectListItem> GetItems()
    {
        return Selector.GetItemsFromEnum<MyEnum>();
    }
}
...
[Display(Name = "This is a checkboxlist (select one or more check boxes)?")]
[MyEnumSelector(BulkSelectionThreshold = 10)]
public virtual List<string> MyEnumCheckBox { get; set; }
...
public List<string> MyEnumCheckBox
{
    get { return Record.MyEnumCheckBox; }
    set { Record.MyEnumCheckBox = value; }
} 
```

这是`Selector.cs`帮助选择单选按钮、复选框、下拉菜单等的类（如果它与问题相关）：

```
public class Selector
{
    public IEnumerable<SelectListItem> Items { get; set; }

    public string OptionLabel { get; set; }

    public bool AllowMultipleSelection { get; set; }

    public int BulkSelectionThreshold { get; set; }

    public static string GetEnumDescription(string value, Type enumType)
    {
        var fi = enumType.GetField(value.ToString());
        var display = fi
            .GetCustomAttributes(typeof(DisplayAttribute), false)
            .OfType<DisplayAttribute>()
            .FirstOrDefault();
        if (display != null)
        {
            return display.Name;
        }
        return value;
    }

    public static IEnumerable<SelectListItem> GetItemsFromEnum<T>
        (T selectedValue = default(T)) where T : struct
    {
        return from name in Enum.GetNames(typeof(T))
               let enumValue = Convert.ToString((T)Enum.Parse
                   (typeof(T), name, true))

               select new SelectListItem
               {
                   Text = GetEnumDescription(name, typeof(T)),
                   Value = enumValue,
                   Selected = enumValue.Equals(selectedValue)
               };
    }
}

public static class SelectorHelper
{
    public static IEnumerable<SelectListItem> ToSelectList
        (this IEnumerable data)
    {
        return new SelectList(data);
    }

    public static IEnumerable<SelectListItem> ToSelectList
        (this IEnumerable data, string dataValueField, 
        string dataTextField)
    {
        return new SelectList(data, dataValueField, dataTextField);
    }

    public static IEnumerable<SelectListItem> ToSelectList<T>
        (this IEnumerable<T> data, Expression<Func<T, object>> 
        dataValueFieldSelector, Expression<Func<T, string>> 
        dataTextFieldSelector)
    {
        var dataValueField = dataValueFieldSelector.ToPropertyInfo().Name;
        var dataTextField = dataTextFieldSelector.ToPropertyInfo().Name;
        return ToSelectList(data, dataValueField, dataTextField);
    }
} 
```

该类`Selector`与一个模板配对，该模板`Selector.cshtml`具有一些逻辑来确定选择哪个（单选按钮、复选框等）。

我在尝试`List<string>`、`List<MyEnum>`、`IList<string>`、`IList<MyEnum>`和`IEnumerable<MyEnum>`时遇到各种错误`IEnumerable<MyEnum>`。此错误仅与复选框或多列表一起出现，因为它们使用`List<string>`. 例如，下拉菜单可以正常工作，没有错误。这是一个示例下拉模型（可以`enum`在上面重复使用），它可以通过 NHibernate 映射到数据库：

```
[Required(ErrorMessage = "Please select one option")]
[Display(Name = "This is a dropdown list (select one option)?")]
[MyEnumSelector(BulkSelectionThreshold = 0)] //0 selects dropdown
public virtual MyEnum? MyEnumDropDown { get; set; }

public MyEnum? MyEnumDropDown
    {
        get { return Record.MyEnumDropDown; }
        set { Record.MyEnumDropDown = value; }
    } 
```

根据我的尝试，以下是我遇到的一些错误：

**`List<string>`错误：**

> NHibernate.Transaction.ITransactionFactory - DTC 事务准备阶段失败 NHibernate.PropertyAccessException: Invalid Cast (检查你的映射是否有属性类型不匹配); MyNameSpace.Models.MyRecord 的 setter ---> System.InvalidCastException：无法转换类型为“NHibernate.Collection.Generic.PersistentGenericBag `1[System.String]' to type 'System.Collections.Generic.List`1[System.String]”的对象。

**`List<MyEnum>`错误：**

> NHibernate.Transaction.ITransactionFactory - DTC 事务预处理阶段失败 System.InvalidCastException：无法转换类型为“System.Collections.Generic.List `1[MyNameSpace.Models.MyEnum]' to type 'System.Collections.Generic.ICollection`1 [System.String]”的对象。

**`IList<string>`错误：**

> NHibernate.AdoNet.AbstractBatcher - 无法执行命令：INSERT INTO MyEnumCheckBox (MyRecord_id, Value) VALUES (@p0, @p1) System.Data.SqlServerCe.SqlCeException (0x80004005)：指定的表不存在。[我的枚举检查框]

我尝试的其他变体是类似的错误，除了如果我使用`<MyEnum>`它会显示如下错误：

> System.Collections.Generic.List `1[MyNameSpace.Models.MyEnum]' to type 'System.Collections.Generic.ICollection`1 [System.String]'。

`enum`在尝试`enum`使用 NHibernate 插入多个选定的 s时，关于如何在这种情况下使用 's 的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T14:13:02.177

由于在 Nhibernate 中默认使用列表用于单独的表，因此您必须使用映射函数将数据库中的单个值映射到模型中的值列表。

[我已经用一个工作示例在这里](https://stackoverflow.com/questions/13870455/trying-to-save-checkbox-selections-based-on-enums-in-orchard-nhibernate/13875372#comment19131858_13875372)演示了如何做到这一点，但我会在你的问题上再次总结一下。

根据您的问题，有 2 种主要的映射函数类型。它们都包括您：

1.  将您的`MyEnumSelector`属性从`Record`类移动到模型类，
2.  改变你`Record`的`MyEnumCheckBox`财产的类型和
3.  更改模型的`MyEnumCheckBox`属性，使其映射到您`Record`的`MyEnumCheckBox`属性

所以这些映射函数是：

1.  `int`to `List<MyEnumSelector>`- 这是我在链接帖子中展示的相同技术。它包括用属性标记你的`MyEnumSelector`枚举`[Flags]`并将它的项目设置为 2 的后续幂的值。你`Record`的`MyEnumCheckBox`属性应该是 type `int`。然后，映射部分涉及将`Record`'`MyEnumCheckBox`属性的位映射到对应值列表和从对应`MyEnumSelector`值列表映射出
2.  `string`to-`List<MyEnumSelector>`这涉及将您`Record`的`MyEnumCheckBox`属性设置为类型`string`。然后，映射部分涉及将`Record`'`MyEnumCheckBox`属性的分隔字符串映射到相应值列表和从相应`MyEnumSelector`值列表映射。分隔符可以是逗号或分号或其他一些您不会用作`MyEnumSelector`项目值名称的字符。

这两种方法的主要区别是：

1.  枚举大小 - 当`int`用作您的数据库类型时，您被限制为 32 位数据。这意味着您的枚举中不能有超过 32 个项目。`String`s没有这种限制
2.  易于在数据库中搜索特定值 - 使用时`int`，您必须处理非常混乱且不易使用的按位数据库运算符，而在使用映射`LIKE`时可以使用简单运算符`string`
3.  数据库中`int`使用的大小 - 始终使用 4 个字节（32 位），而`string`映射使用该数量（32 位）仅用于字符串中的一个字符（如果它的类型为`char`,`varchar`或, 并且大小加倍 - 使用,`text`时为 64 位或) 因此它将为数据库中的每一行使用更多空间`nchar``nvarchar``ntext`
4.  Speed of mapping - bit-wise mapping used in `int` mapping is quite fast while `string` mapping uses string manipulation functions which are much slower. This shouldn't be the problem though if you're dealing with a small amount of data. But if you're going to deal with a massive amount of data this could be a huge issue.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:40:56.720

我会将复选框值设为枚举的 int 值。

几点建议：

*   使用[System.DayOfWeek](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)枚举代替您自己的枚举。
*   枚举可以映射为 NHibernate 中的自定义类型。
*   由于一周中的几天是一个词，因此不需要 Display 属性。控制值应该是枚举的 int 值（您可以直接转换）。
*   对不同的控件集（下拉菜单、单选按钮等）使用部分视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:25:24.007

PersistentGenericBag 绝对不是 List<string>，但它确实实现了 IList<string>：

```
public class PersistentGenericBag<T> : PersistentBag, IList<T> 
```

当您改用 IList<string> 时，您确定您从代码中的同一位置得到完全相同的错误吗？

# sql - ORACLE SQL：查找按年份排序的给定值的所有列值

> ID：13744116
> 
> 赞同：0
> 
> 时间：2012-12-06T12:58:31.780
> 
> 标签：sql, oracle, oracle11g

我正在寻找`GRANT_ID`用户 '3392398' 的 APPLIES_TSSA/CD/CTT 表中的值，并将返回按`YEAR`.

这是我当前的代码：

```
SELECT GRANT_ID
  FROM APPLIES_TSSA, APPLIES_CD, APPLIES_CTT
 WHERE ( APPLIES_TSSA.COYOTE_ID
       , APPLIES_CD.COYOTE_ID
       , APPLIES_CTT.COYOTE_ID = ('3392398')
 GROUP BY to_date('DD-MM-YYYY') <= to_date('DD-MM-YYYY') 
```

我的架构如下[（链接）](https://i.stack.imgur.com/Jbyb9.jpg)：

![图式](../Images/635c9e03711838cb9866a0bff061dc08.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:26:34.197

如果您想按年份排序，请使用`order by`，而不是`group by`。此外，学习使用正确的连接语法。我认为查询类似于：

```
SELECT GRANT_ID, tss.year
FROM APPLIES_TSSA tssa join
       APPLIES_CD cd
       on tssa.COYOTE_ID = cd.COYOTE_ID join
       APPLIES_CTT ctt
       on tssa.Coyote_ID = ctt.COYOTE_ID
 where CTT.COYOTE_ID = ('3392398')
 order by tssa.year desc 
```

# php - cookie 复选框故障

> ID：13744118
> 
> 赞同：1
> 
> 时间：2012-12-06T12:58:39.120
> 
> 标签：php

当我勾选复选框（cookie）并按登录时，它没有进入会员页面。它标头到索引页面（当前页面）。

但是当我勾选复选框（cookie）并再次按日志时，它的标题是会员页面

任何人都可以帮助我问题出在哪里？

```
<?PHP
session_start();

function loggedin(){
    if(isset($_SESSION['log_email']) || isset($_COOKIE['log_email'])){
    $loggedin=TRUE;
    return $loggedin;   
    }
}

$log_email="";

if(loggedin()){
header("Location:member.php");}

if(isset($_POST['login'])){

    $log_email=strtolower($_POST['log_email']);
    $log_password=$_POST['log_password'];

    if(isset($_POST['cookie'])){
    $cookie=$_POST['cookie'];
    }

    if($log_email && $log_password){
        $connect=mysql_connect("localhost", "root", "");
        $database=mysql_select_db("phplogin", $connect);

        $SQL=mysql_query("SELECT * FROM users WHERE email='$log_email'");
        $numrows=mysql_num_rows($SQL);

        if($numrows!=0){
            while($result=mysql_fetch_assoc($SQL)){
                $db_email=$result['email'];
                $db_password=$result['password'];
                $db_firstname=$result['firstname'];
                $db_lastname=$result['lastname'];
            }

            if($log_email==$db_email && md5($log_password)==$db_password){      
                    if($cookie){
                        setcookie("log_email", $log_email, time()+7200);
                    }
                    else{
                    $_SESSION['log_email']=$log_email;
                    header("location:member.php");
                    exit();
                    }
            }
            else{echo"wrong username or password";}
        }
        else{echo "Can't find the user";}
    }
    else{echo "Please enter email or password";}
}

?>

<html>
<body>
<div id="container">
<div id="logo"></div>
    <div id="search"></div>
    <div id="top_search"></div>

    <div id="login">
        <form action="index.php" method="POST">
        <table>
            <tr>
                <td><lable id="td_1">Email</lable></td>
                <td><lable id="td_1">Password</lable></td>
            </tr>
            <tr>
                <td><input type="text" name="log_email" value="<?PHP echo $log_email; ?>" maxlength="50"/></td>
                <td><input type="password" name="log_password" maxlength="25" /></td>
                <td><input id="log_btn" type="submit" name="login" value="" /></td>
            </tr>
              <tr>
                <td><div id="td_2"><input type="checkbox" name="cookie"/>Remember me</div></td>
                <td><div id=td_2><a href="forgot_password.php">Forgot your password?</div></a></td>
            </tr>
        </table>
        </form>
    </div>   

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:21:20.140

在打开此页面`<html>`之前，您会使用 以及更多数据`<?php`。仅当浏览器还没有输出时，标头才会起作用，因此这将不起作用（除非在您显示的代码之前页面上有某种输出缓冲处于活动状态。）

只需从 php 代码开始`<?php`并将其`<html>`和其他标签（包括换行符）移动到之后以检查登录。

然后不是直接输出错误消息，而是`echo`将它们存储在 var 中`$error = "wrong username or password";`，然后稍后在 HTML 代码中使用`<?php echo $error; ?>`

```
 <?PHP
    session_start();

    function loggedin(){
        if(isset($_SESSION['log_email']) || isset($_COOKIE['log_email'])){
        $loggedin=TRUE;
        return $loggedin;   
        }
    }

    $log_email="";
    $error = "";

    if(loggedin()){
    header("Location:member.php");}

    if(isset($_POST['login'])){

        $log_email=strtolower($_POST['log_email']);
        $log_password=$_POST['log_password'];

        if(isset($_POST['cookie'])){
        $cookie=$_POST['cookie'];
        }

        if($log_email && $log_password){
            $connect=mysql_connect("localhost", "root", "");
            $database=mysql_select_db("phplogin", $connect);

            $SQL=mysql_query("SELECT * FROM users WHERE email='$log_email'");
            $numrows=mysql_num_rows($SQL);

            if($numrows!=0){
                while($result=mysql_fetch_assoc($SQL)){
                    $db_email=$result['email'];
                    $db_password=$result['password'];
                    $db_firstname=$result['firstname'];
                    $db_lastname=$result['lastname'];
                }

                if($log_email==$db_email && md5($log_password)==$db_password){      
                        if($cookie){
                            setcookie("log_email", $log_email, time()+7200);
                            header("location:member.php");
                        }
                        else{
                        $_SESSION['log_email']=$log_email;
                        header("location:member.php");
                        exit();
                        }
                }
                else{$error = "wrong username or password";}
            }
            else{$error = "Can't find the user";}
        }
        else{$error = "Please enter email or password";}
    }

    ?>

    <html>
    <link href="CSS/login.css" rel="stylesheet" type="text/css" />

    <body>
    <div id="container">
    <div id="logo"></div>
        <div id="search"></div>
        <div id="top_search"></div>

        <div id="login">

            <?php
            if (strlen($error)>0)
              echo $error;
            ?>

            <form action="index.php" method="POST">
            <table>
                <tr>
                    <td><lable id="td_1">Email</lable></td>
                    <td><lable id="td_1">Password</lable></td>
                </tr>
                <tr>
                    <td><input type="text" name="log_email" value="<?PHP echo $log_email; ?>" maxlength="50"/></td>
                    <td><input type="password" name="log_password" maxlength="25" /></td>
                    <td><input id="log_btn" type="submit" name="login" value="" /></td>
                </tr>
                  <tr>
                    <td><div id="td_2"><input type="checkbox" name="cookie"/>Remember me</div></td>
                    <td><div id=td_2><a href="forgot_password.php">Forgot your password?</div></a></td>
                </tr>
            </table>
            </form>
        </div>   

    </div>
    </body>
    </html> 
```

# c# - 工作日的文化变化

> ID：13744119
> 
> 赞同：3
> 
> 时间：2012-12-06T12:58:48.527
> 
> 标签：c#

我有一个字符串“Saturday”，我想将其更改为其他语言文化，例如 Ploish（波兰）。如何在 C# 中进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:01:42.590

此代码示例将文化信息更改为意大利语：

```
CultureInfo itCI = new CultureInfo("it-IT");
Thread.CurrentThread.CurrentCulture = itCI; 
```

然后，要获得正确的星期几（今天），您可以执行以下操作：

```
DayOfWeek giornoSet = DateTime.Now.DayOfWeek;
string giornoSetS =CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(giornoSet); 
```

以下是从字符串中获取 DayOfWeek 的方法：

```
DayOfWeek wednesday = 
  (DayOfWeek)Enum.Parse(typeof(DayOfWeek), "Wednesday"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:02:14.283

用于`CultureInfo.CreateSpecificCulture()`创建`CultureInfo`您想要的实例，然后用于`DateTimeFormat.GetDayName()`获取您想要的特定日期的名称。

```
CultureInfo.CreateSpecificCulture("pl-PL").DateTimeFormat.GetDayName(DayOfWeek.Saturday) 
```

要获取`DayOfWeek`原始字符串，您可以使用`Enum.TryParse<DayOfWeek>("Saturday")`：

```
DayOfWeek day;

if (Enum.TryParse<DayOfWeek>("Saturday", out day))
{
    var dayInPolish = CultureInfo.CreateSpecificCulture("pl-PL").DateTimeFormat.GetDayName(day);
} 
```

请注意，`Enum.TryParse`仅当输入值为英文时才有效。您可以使用`CultureInfo.DateTimeFormat.DayNames`其他语言查找日期名称。

[这是其他文化代码的列表。](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:08:20.773

你可以试试这个：

```
DateTime.Now.ToString("dddd", System.Globalization.CultureInfo.CreateSpecificCulture("pl-PL")) 
```

**[编辑]**

您可以使用此功能：

```
private static string TranslateDay(string dayInStringFormat, string culture)
{
    try
    {
        return CultureInfo.CreateSpecificCulture(culture).DateTimeFormat
            .GetDayName((DayOfWeek)Enum.Parse(typeof(DayOfWeek), dayInStringFormat));
    }
    catch (Exception)
    {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:13:18.163

您可以使用[`DateTimeFormat.GetDayName`](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.getdayname%28v=vs.110%29.aspx)：

```
var culturePoland = CultureInfo.CreateSpecificCulture("pl-PL");
DayOfWeek dow;
if (Enum.TryParse<DayOfWeek>("Saturday", out dow))
{
    string day = culturePoland.DateTimeFormat.GetDayName(dow);
    Console.Write(day); // sobota
} 
```

[**演示**](http://ideone.com/VZAx8o)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T13:15:34.710

以下应该有效：

```
var inputDay = "Saturday";
var SourceCulture = new System.Globalization.CultureInfo("en-gb");
var DestinationCulture = new System.Globalization.CultureInfo("pl-pl");
var dayInt = Array.IndexOf(SourceCulture.DateTimeFormat.DayNames, inputDay);
Console.WriteLine(DestinationCulture.DateTimeFormat.GetDayName((DayOfWeek)dayInt)); 
```

请注意，正如所写的那样，它在星期几是区分大小写的，如果找不到星期几，则会抛出错误，因此需要添加一些检查。

值得注意的是，这指定了源文化，因此如果您有法语名称，您可以通过更改源文化来使用它。

# wcf - WCF 代理创建

> ID：13744121
> 
> 赞同：2
> 
> 时间：2012-12-06T12:58:54.980
> 
> 标签：wcf, proxy

我有一个关于 WCF 代理创建的问题，它可能是初学者级别，但必须问。我使用 VS 添加服务引用在客户端中创建了 wcf 服务的代理。现在因为该服务中的某些方法可能需要更长的时间来执行并阻止所有可用的代理连接，所以我想使用来自我的客户端的同一服务的不同代理来调用每个方法。

现在的问题是：

1.  我的方法是否正确，我的意思是这会解决我的目的吗？
2.  对于使用不同的代理，我是否需要添加多个具有不同名称的服务引用？
3.  作为第 2 点的一个选项，我可以只添加一次服务引用并在配置中使用不同的名称复制相同的端点吗？所以每次我想创建一个新的代理时，我都会在代理的构造函数中将不同端点的名称传递给相同的服务？
4.  也是（多个代理=代理的多个实例）？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:14:47.037

我认为最好的方法是对单个代理实例使用异步操作。它就像网络浏览器 - 您可以在许多选项卡中看到相同的网页。它们都独立工作，但使用相同的端点资源。尝试阅读[这样的内容](http://blogs.msdn.com/b/endpoint/archive/2010/11/13/simplified-asynchronous-programming-model-in-wcf-with-async-await.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:25:31.727

您可以将单个服务引用与单个配置和单个端点一起使用。要在服务上并行调用多个方法，您可以在不同线程中创建多个代理实例，或者在标记为 的不同方法中创建多个代理实例`async`。

# php - 在 codeigniter 中使用超级对象有什么好处

> ID：13744127
> 
> 赞同：4
> 
> 时间：2012-12-06T12:59:26.750
> 
> 标签：php, codeigniter

我正在研究代码点火器。我遇到了这个超级物体。

代码点火器具有加载类并将它们存储在实例变量中的功能。每次我们需要包含一个新类或之前加载的类时，代码点火器首先在实例数组中搜索它，如果没有找到，则加载它并包含在实例数组中。

我的问题是在课堂上，当我们可以通过 load_class 函数包含类时（因为这个函数首先在实例数组中搜索，所以减少了一次又一次包含同一个类的开销，）那么声明超级对象包含预定义或加载的需要是什么新课程。

我们什么时候可以做到这一点。

```
class CLASSNAME
{
  function functionname()
  {
     $object = load_class(classname, location);
     $object->callfunction();
  }
} 
```

那么为什么我们需要这样做

```
class CLASSNAME
{
  function functionname()
  {
    $superobject = & get_instance();
    $superobject->classobject->function(); 
  }
} 
```

只想知道使用超级对象的好处。它只是包含所有预定义的对象，还是我无法理解的更深入和有益的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:36:11.453

在您给出的示例中（如果您只需要对库的引用） - 没有任何好处。`get_instance()`只是一个更常见（和记录）的功能，而`load_class()`仅供内部使用。

可能的好处是`get_instance()`让您可以访问控制器拥有的*所有内容*，例如，如果您想检查控制器属性、调用模型方法等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-17T21:06:18.630

有时您需要拥有一个类并扩展另一个类以进行继承。像这样：

```
class Car extends Garage {
  // properties and functions
} 
```

但是在**Codeigniter**中，您必须扩展*`CI_Controller`*以加载库、帮助程序等。

为了同时使用（除了加载 CodeIgniter 的本机资源之外扩展您自己的类），您可以使用超级对象。一个例子：

```
class Car extends Garage {

    protected $CI;

    // We'll use a constructor, as you can't directly call a function
    // from a property definition.
    public function __construct()
    {
            // Assign the CodeIgniter super-object
            $this->CI =& get_instance();
    }

    public function foo()
    {
            $this->CI->load->helper('url');
            redirect();
    }

    public function bar()
    {
            $this->CI->config->item('base_url');
    }
} 
```

见[这里](https://codeigniter.com/user_guide/general/ancillary_classes.html)：

> 在某些情况下，您可能希望开发与控制器不同但能够利用所有 CodeIgniter 资源的类。如您所见，这很容易实现。

# android - 在 Android 中用光标填充 ListView

> ID：13744131
> 
> 赞同：0
> 
> 时间：2012-12-06T12:59:48.837
> 
> 标签：android

我正在尝试用光标填充 Android 中的 ListView。为此，我创建了一个 ArrayAdapter 对象并将其类型作为 Cursor 传递。我没有得到我想要的结果。我只想知道我这样做是正确的还是错误的？如果它错了，任何人都可以建议我完成这项任务。我想显示所有行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:55:53.750

你可以按照这个不错的[教程](http://www.vogella.com/articles/AndroidSQLite/article.html)

请注意，您需要将 a 传递`List<YourDataModelClass>`给`ArrayAdapter`的构造函数。（可能很简单`List<String>`）这就是我的意思：

```
List<YourDataModelClass> values = datasource.getAllYourDataModelClass();

ArrayAdapter<YourDataModelClass> adapter = new ArrayAdapter<YourDataModelClass>(this,
    android.R.layout.simple_list_item_1, values);
listView.setListAdapter(adapter); 
```

`datasource.getAllYourDataModelClass();`上面是 Cursor 保存为`List`您设计的类的地方。

希望这可以帮助。

# mysql - 如何使用数据计数按月和年分组

> ID：13744136
> 
> 赞同：0
> 
> 时间：2012-12-06T12:59:51.397
> 
> 标签：mysql

我有一个包含这样数据的表：

```
id | question | pub_date
1  | qeustion1| 2012-12-03
2  | qeustion2| 2012-12-06 
3  | qeustion3| 2012-11-03 
4  | qeustion4| 2011-12-03 
```

我想要这样的输出：它应该根据年份、月份结果计数和 Desc 顺序来计算记录，并且还应该显示每一行数据。

就我而言：

*   年份：2012年有3条记录
*   月份：2012 年的 12 有 2 条记录
*   年份：2011年有1条记录
*   Month:12 in 2011 有 1 条记录。

我试过这个：

```
SELECT
    EXTRACT(MONTH FROM pub_date) as month, 
    EXTRACT(YEAR FROM pub_date) as year, 
    Count(id)
FROM 
    mytable
GROUP BY 
    month,
    year
ORDER BY 
    year DESC, 
    month DESC 
```

我需要显示这样的数据，请参阅[网站的](http://darnnews.blogspot.com/)**博客存档**部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:06:10.660

试试这个：

```
select count(id)
from mytable
group by year(pub_date), month(pub_date)
order by year(pub_date) desc, month(pub_date) desc 
```

如果您想知道有哪些月份和年份，请使用：

```
select year(pub_date) as year, month(pub_date) as month, count(id), *
from mytable
group by year(pub_date), month(pub_date)
order by year(pub_date) desc, month(pub_date) desc 
```

从月份和年份中获取数据

```
select year(pub_date) as year, year_count, month(pub_date) as month, count(rowid) as month_count
from mytable u
, (
select year(pub_date) as year, count(rowid) year_count
from mytable
group by year(pub_date)
) as tab
where tab.year = year(u.pub_date)
group by year(pub_date), month(pub_date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:31:30.977

我假设你想要的结果是这样的：

```
2012           3
2012 12        2
2012 11        1
2011           1
2011 11        1 
```

您可以通过使用`union`两个聚合查询来获得此信息：

```
select s.*
from ((select year(pub_date) as yr, NULL as month, count(*) as cnt
       from t
       group by year(pub_date)
      ) union all
      (select year(pub_date) as yr, month(pub_date) as mon, count(*) as cnt
       from t
       group by year(pub_date), month(pub_date)
      )
     ) s
order by yr desc,
         (case when mon is null then -1 else mon end) 
```

# c++ - 如何使用winapi知道Windows文件系统中何时以及哪些文件被更改

> ID：13744138
> 
> 赞同：9
> 
> 时间：2012-12-06T13:00:09.650
> 
> 标签：c++, winapi, hook

我为教育制作了带有间谍软件功能的程序，我需要在程序中知道文件系统何时更改文件，以及正在更改的文件。

我怎样才能在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T13:11:52.653

您可能正在寻找 Win32 [Directory Change Notifications](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261%28v=vs.85%29.aspx)。还有一个称为[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)的 .NET API ，它公开了相同的功能。

链接页面为订阅文件系统通知提供了一个很好的示例。要获得对文件系统更改的更多低级访问，您必须查看[Change Journals](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363798%28v=vs.85%29.aspx)。该 API 要复杂得多，因此第一个目录更改通知可能是您最好的起点。

为方便起见，Linux 内核为此提供了一个名为[inotifiy](http://en.wikipedia.org/wiki/Inotify)的子系统。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-07T01:29:23.180

在 Windows 上，查看[`SHChangeNotifyRegister()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762120.aspx). 它不仅告诉您发生了什么样的更改，而且还告诉您更改了哪些确切的文件。

# sql - 插入带有父 ID 的子表记录

> ID：13744139
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:00:17.010
> 
> 标签：sql, oracle, sql-server-2008, oracle10g, oracle11g

我有两个表父表和子表。我想同时插入父表和子表记录。但是子表具有父ID。对不起我的英语不好。

```
Table 1
=======
fld_id name desc
 1     sasi new_customer
 2     arun old_customer

Table 2
=======
fld_id fld_parent_id  product
 1       1             Dress
 2       1             watch
 3       1             phone
 4       2             Clock
 5       2             pen

My input value like this
========================

1,sasi ,Dress|watch|phone
2,Arun ,Clock|pen 
```

请帮我这样做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:14:41.330

```
begin

insert into parent_table;  --insert statement for parent table
insert into child table ;  --insert statement for child table

commit;
end; 
```

# proxy - 如果IP地址是任何类型的代理，检查IP地址的有效方法是什么？

> ID：13744141
> 
> 赞同：0
> 
> 时间：2012-12-06T13:00:20.703
> 
> 标签：proxy, geolocation, ip, ip-address, tor

如果 IP 地址是某种代理（包括 TOR 和可能的 TOR 替代方案），如何检查它？

关于优雅可靠的方式的任何想法？可能是一些在线列表、工具、服务、本地方法也是一种选择？

PS我问这个，因为我有点困惑是否扫描特定端口以尝试服务，或者只是依赖一些关于TOR节点的在线列表/ dnsbl，或者两者兼而有之，或者可能有更通用的方法，因为也可能有TOR替代品？我至少见过一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:03:16.933

您可以在此处查看 TOR 列表：

[TOR（洋葱路由器）服务器 - IP 列表](http://proxy.org/tor.shtml)

或在这里：[Torstatus](http://torstatus.blutmagie.de/)

您必须扫描每个端口并尝试通过它建立连接以解决问题的其他部分，代理可以在任何端口上提供服务。所以不是，这真的不可能。

# javascript - Raphael - 添加到元素的数据意外更改

> ID：13744144
> 
> 赞同：0
> 
> 时间：2012-12-06T13:00:28.247
> 
> 标签：javascript, parameters, raphael

这将是每个人都喜欢“给我们看一些代码”而我必须说“抱歉，相关代码大约有 300 行长”。所以我会尽可能详细地提供。提出问题，提出疯狂的想法，在这一点上，即使是正确方向的提示也会为我节省一些头发。

我正在使用 Raphaeljs 创建一些弧段。没什么大不了的，效果很好！我在一个`for`循环中一次创建几个，并将它们分配一个“参考角度”（除其他外）作为“数据”，以便我知道稍后在其他函数中用于计算它们的角度。

非常缩短的版本：

```
//pieces being the number of arcs I'm creating
for (var i = 0; i < pieces; ++i){
    var refAngle = foo + bar;
    var my_arc = paper.path().attr({
        arc: [foo, bar, etc]
    });
    my_arc.node.cmdata = params[0][i];
    my_arc.node.cmdata[4] = refAngle;
    //when checked here, my_arc.node.cmdata[4] === refAngle and is the value I am looking for
} 
```

`Params`是用于绘制弧线的多级静态数据数组。需要修改 refAngle，因为如果要在屏幕外渲染，弧会被移动，并且可能不再满足该`params`值。

我可以 100% 确认正在计算正确的角度。我可以 100% 确认存储了正确的角度。我可以 100% 确认存储后立即可以正确检索。但是，以一致的方式（如果我执行相同的操作，我会得到相同的结果），在一个或多个后面的循环中，一些先前创建的弧正在`my_arc.node.cmdata[4]`发生变化 - 我发现这个记录了所有创建的弧`my_arc.node.cmdata[4]`循环上的每次迭代中的属性`for`。

这……没有任何意义。我不知道是拉斐尔在做某事（不应该）还是我正在失去理智（可能是手提包），但这些数据不应该改变。这是我正在处理的测试页面，因此没有任何其他可能干扰它的函数被调用。

谢谢！

# java - 在关闭/打开介绍部分之间保存状态

> ID：13744145
> 
> 赞同：2
> 
> 时间：2012-12-06T13:00:28.793
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我有 Eclipse RCP 应用程序。我自己的`IntroPart`扩展`org.eclipse.ui.part.IntroPart`。

通过继承我得到了这个方法：

```
@Override
public void saveState(IMemento memento) {
} 
```

[这里](http://wiki.eclipse.org/FAQ_How_does_a_view_persist_its_state_between_sessions%3F)说明当工作台关闭时，`saveState`在所有打开的视图上调用该方法。但这只有在我关闭整个应用程序时才是真的。

如果我只关闭这个页面而不是洞应用程序，我应该怎么做才能保存介绍页面状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:08:28.220

您指向常见问题解答的[链接](http://wiki.eclipse.org/FAQ_How_does_a_view_persist_its_state_between_sessions?)回答：

> 保持视图状态的另一种机制是 JFace IDialogSettings 工具。对话框设置优于视图保存/初始化机制的优点是您可以控制设置何时保留。

这是一个关于如何使用 IDialogSettings 在 IntroPart 关闭时保持其状态以及如何在创建时恢复它的示例。MyIntroPart 是具有`Text`小部件的 IntroPart。显示的文本在 IntroPart 关闭时保存并在创建时恢复。

为了获得该`partClosed`事件，MyIntroPart 实现 IPartListener2 并将自身注册到 PartService。

```
private static final String MY_INTRO_SETTINGS = "my_intro_settings";
private static final String MY_INTRO_TEXT_KEY = "my_intro_text";

@Override
public void createPartControl(Composite parent) {
    this.text = new Text(parent, SWT.BORDER);

    // try to load the settings
    IDialogSettings settings = Activator.getDefault().getDialogSettings();
    IDialogSettings section = settings.getSection(MyIntroPart.MY_INTRO_SETTINGS);
    if (section != null) {
        // set the restored text string in the text widget
        this.text.setText(section.get(MyIntroPart.MY_INTRO_TEXT_KEY));
    }

    // register the part listener
    getIntroSite().getWorkbenchWindow().getPartService().addPartListener(this);
} 
```

这会将文本恢复到文本小部件。

MyIntroPart 实现`partClosed`IPartListener2 以在视图关闭时保存对话框设置：

```
@Override
public void partClosed(IWorkbenchPartReference partRef) {
    // remove part listener from part service
    getIntroSite().getWorkbenchWindow().getPartService().removePartListener(this);

    IDialogSettings settings = Activator.getDefault().getDialogSettings();

    // get the section of the text
    IDialogSettings section = settings.getSection(MyIntroPart.MY_INTRO_SETTINGS);

    // if it doesn't exist, create it
    if (section == null) {
        section = settings.addNewSection(MyIntroPart.MY_INTRO_SETTINGS);
    }

    // put text from text field in section
    section.put(MyIntroPart.MY_INTRO_TEXT_KEY, this.text.getText());
} 
```

感谢 fredrik 指出此处不需要从文件加载或保存到文件。

# xml - 在 Corona 中使用 XML 将捕获的图像与录制的音频链接起来

> ID：13744154
> 
> 赞同：1
> 
> 时间：2012-12-06T13:00:49.677
> 
> 标签：xml, json, audio-recording, coronasdk, image-capture

我正在 Corona 开发一个摄像机和录像机项目，执行如下：

触摸后，相机拍照，音频开始录制。下次触摸时：

1.  上一张图片保存为“image1.jpg”
2.  录音停止和音频文件保存为“音频”
3.  拍摄下一张照片 4.next 音频开始录制。

这是记录/捕获部分，工作正常。

接下来我必须播放录制的素材。例如：从菜单中，如果选择了 image3，则屏幕上显示图像 3，并且开始播放 audio3。现在这需要使用 XML 将音频文件与图像链接起来。

我对 XML 完全陌生，我不知道如何在 Corona 中使用它。我找不到可以学习的例子。

谁能告诉我如何制作 XML 文件，如何将其链接到电晕以及如何实现所需的目标？

如果有人可以帮助我在 JSON 中做到这一点，那也很棒。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:22:25.360

为什么你需要 XML（或 JSON）？您是否将这些上传到服务器？如果您只是将它们放在您的设备本地而不共享它们，只需将条目保存在表格中即可访问它们。然后，您可以将该表保存到文件中，以便在您的应用下次运行时加载。现在 JSON 在这里变得很有用，因为 JSON 和 Lua 表可以很好地协同工作。

请参阅：http: [//developer.coronalabs.com/code/super-simple-lua-table-save-and-load-file-functions](http://developer.coronalabs.com/code/super-simple-lua-table-save-and-load-file-functions)

一个简单的表格保护器/加载器。

XML 在 Lua 中比较复杂。这篇博文涵盖了 Corona 的 XML。

# iphone - 无法通过流畅的自由手绘包括撤消/重做

> ID：13744160
> 
> 赞同：4
> 
> 时间：2012-12-06T13:01:23.557
> 
> 标签：iphone, drawrect, quartz-core

多年来一直在努力解决问题。希望我能在这里得到答案。我用[这个](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_freehand-drawing/)链接来平滑我的手绘图。在这段代码中，我能够设置线宽和颜色，但是当我尝试使用[此](http://soulwithmobiletechnology.blogspot.in/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html)链接在其中包含撤消/重做功能时，我发现它非常困难，该链接在撤消重做时工作正常，但其徒手绘制并不流畅。

经过一些研究和编码后，我知道这是我认为防止撤消/重做的绘图的目的。

在第一个链接中有一个文件“CachedLIView.h/m”，当我使用它并尝试在其中包含撤消/重做时，我在以下方法中发现：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event // (2)
{
    UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];
    [path addLineToPoint:p];

    [self drawBitmap]; // (3)
    [self setNeedsDisplay];

    [path removeAllPoints]; //(4)
} 
```

此方法调用 drawBitMap: 方法，该方法实际上是在每次用户抬起手指并同时从“路径”中删除点时生成一个临时图像。

```
- (void)drawBitmap // (3)
{
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, YES, 0.0);
    [[UIColor blackColor] setStroke];
    if (!incrementalImage) // first draw; paint background white by ...
    {
        UIBezierPath *rectpath = [UIBezierPath bezierPathWithRect:self.bounds]; // enclosing bitmap by a rectangle defined by another UIBezierPath object
        [[UIColor greenColor] setFill];
        [rectpath fill]; // filling it with white
    }
    [incrementalImage drawAtPoint:CGPointZero];
    //[path stroke];
    for (UIBezierPath *_path in pathArray)
        [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
    incrementalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

我将每条路径保存在一个数组中，以便我可以撤消/重做。（从第二个链接中获得了这个想法）。

以下是我修改为包含撤消/重做的该文件的完整代码：

```
 #import "CachedLIView.h"

@implementation CachedLIView
{
    UIBezierPath *path;
    UIImage *incrementalImage; // (1)
}

- (id)initWithFrame:(CGRect)frame // (1)
{
    if (self = [super initWithFrame:frame])
    {
        [self setMultipleTouchEnabled:NO]; // (2)
        //        [self setBackgroundColor:[UIColor whiteColor]];
//                path = [[UIBezierPath alloc] init];
//                [path setLineWidth:3];

        pathArray=[[NSMutableArray alloc]init];
        bufferArray=[[NSMutableArray alloc]init];
        [self drawBitmap];
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    NSLog(@"in drawrect pathArray[count]: %d", pathArray.count);

    [incrementalImage drawInRect:rect]; // (3)

    //[[UIColor blackColor] setStroke];
    //[path stroke];
    for (UIBezierPath *_path in pathArray)
        [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    path = [[UIBezierPath alloc] init];
    path.lineWidth = 3;

    UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];
    [path moveToPoint:p];

    [pathArray addObject:path];

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];
    [path addLineToPoint:p];

    [self setNeedsDisplay];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event // (2)
{
    UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];
    [path addLineToPoint:p];

    [self drawBitmap]; // (3)
    [self setNeedsDisplay];

    [path removeAllPoints]; //(4)
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self touchesEnded:touches withEvent:event];
}

- (void)drawBitmap // (3)
{
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, YES, 0.0);
    [[UIColor blackColor] setStroke];
    if (!incrementalImage) // first draw; paint background white by ...
    {
        UIBezierPath *rectpath = [UIBezierPath bezierPathWithRect:self.bounds]; // enclosing bitmap by a rectangle defined by another UIBezierPath object
        [[UIColor greenColor] setFill];
        [rectpath fill]; // filling it with white
    }
    [incrementalImage drawAtPoint:CGPointZero];
    //[path stroke];
    for (UIBezierPath *_path in pathArray)
        [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
    incrementalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
}

#pragma mark - undo/redo
-(void)undoButtonClicked
{
    if([pathArray count]>0){
        UIBezierPath *_path=[pathArray lastObject];
        [bufferArray addObject:_path];
        [pathArray removeLastObject];

        [self drawBitmap];
        [self setNeedsDisplay];
    }
}

-(void)redoButtonClicked
{
    if([bufferArray count]>0){
        UIBezierPath *_path=[bufferArray lastObject];
        [pathArray addObject:_path];
        [bufferArray removeLastObject];

        [self drawBitmap];
        [self setNeedsDisplay];
    }
}
@end 
```

.h 文件是：

```
#import <UIKit/UIKit.h>

@interface CachedLIView : UIView
{
    NSMutableArray *pathArray;
    NSMutableArray *bufferArray;
    UIBezierPath *myPath;

}
-(void)undoButtonClicked;
-(void)redoButtonClicked;
@end 
```

请帮我。我做错了什么。pathArray 计数工作正常。但无法在屏幕上显示撤消/重做效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:46:42.373

嘿，我无法获得您的全部代码，但我可以*建议*您如何实现这些东西，

对于手绘图像中的重做和撤消，您可以*`capture image render`*在触摸开始或触摸结束时进行*`manage stack of that renders`*。然后根据您的要求（重做/撤消）使用缓存中的渲染。所以步骤就像，

1) 触摸板时捕获渲染并保存。并在缓存中管理该序列。

*   因此，对于每次触摸开始，您都必须按顺序捕获图像并保存。

2）当您当时按撤消键时，获取最后一次渲染并将其替换为您的电路板。

3) 对于重做，您可以检查是否有比当前替换的渲染更高的渲染可用。意味着您可以通过最后更新的渲染启用和禁用该按钮。

4）完成保存图像后不要忘记清空缓存，以便您可以管理堆栈以进行下一次绘图。

* * *

*   如果你不明白这个想法，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:52:17.047

最后我得到了它，并且也能够使用撤消/重做功能进行平滑的绘制。这是导致问题的**drawBitMap**方法..

我在任何地方都删除（注释）了对这个 [self drawBitmap] 方法的调用。

我在 touchesEnded 和 undo/redo 方法中调用了这个方法。我觉得没有必要使用这种方法，因为每当用户从屏幕上抬起手指时，它都会进行缓存（以加快绘图速度），创建一个新图像并将其放置在屏幕上，然后删除旧图像，并且用户有一种错觉，他是连续画。但是只有在你真的想提高性能的极端情况下才需要这种缓存（如果你的内存不足并且你的绘图开始变得丑陋）。

所以我决定在以后的某个阶段保存这个缓存机制并删除它。尽管我无法找出为什么我的撤消/重做功能无法使用它，但我认为当我缓存了新图像并将其放置在屏幕上时（当用户抬起手指时），它就会产生问题，因为我必须保留最后缓存的图像（用于撤消/重做）。

我将在稍后阶段使用缓存，并尝试优化我的代码。

还要记得删除 [myPath removeAllPoints]; touchesEnded: method 中的这一行，否则一旦您抬起手指，您的绘图就会消失。

希望这会对某人有所帮助。这是 touchesEnded: 修改方法。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event // (2)
{
       UITouch *touch = [touches anyObject];
CGPoint p = [touch locationInView:self];
[path addLineToPoint:p];

    //[self drawBitmap]; // CAUSES PROBLEM IF UNCOMMENTED AND UNDO/REDO WILL STOP WORKING..
    [self setNeedsDisplay];

    //[myPath removeAllPoints];// LINE GETS DRAWN BUT VANISHED WHEN TOUCH LIFTED OFF FROM SCREEN..
    ctr = 0;
} 
```

后来我将此功能添加到 SmoothedBIView 并且它工作得很好。

# math - 图像旋转和频域缩放？

> ID：13744171
> 
> 赞同：7
> 
> 时间：2012-12-06T13:02:08.540
> 
> 标签：math, image-processing, numpy, fft, transformation

我正在编写一些代码来使用相位相关来恢复测试图像相对于模板的旋转、缩放和平移，[例如 Reddy & Chatterji 1996](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http%3A%2F%2Fwww.cs.brown.edu%2F~morgan%2Fpapers%2F(McGuire98)RecoveringRotationTranslationAndScale.ppt&ei=YpbAUMmyCOr34QSG9ICIBQ&usg=AFQjCNHTCoPERm5I41b5W1yH5pBekep0Yw)。我对原始测试图像进​​行 FFT 以找到比例因子和旋转角度，但随后我需要*旋转和缩放*测试图像的 FFT 以获得平移。

现在我可以在空间域中应用旋转和缩放然后进行 FFT，但这似乎有点低效 - 是否可以*直接*在频域中获得旋转/缩放图像的傅立叶系数？

**编辑1：** 好的，我按照user1816548的建议玩了一下。对于 90o 的倍数的角度，我可以得到模糊合理的旋转，尽管图像的极性发生了奇怪的变化。不是 90o 的倍数的角度给了我非常滑稽的结果。

**编辑 2：** 我对图像应用了零填充，并且在旋转它时包裹了 FFT 的边缘。我很确定我正在围绕 FFT 的直流分量旋转，但对于不是 90o 倍数的角度，我仍然会得到奇怪的结果。

**示例输出：**

* * *

![10o旋转角度](../Images/4b0caf4b2fae6343ccd14664641ce116.png)

**可执行的 Numpy/Scipy 代码：**

* * *

```
import numpy as np
from scipy.misc import lena
from scipy.ndimage.interpolation import rotate,zoom
from scipy.fftpack import fft2,ifft2,fftshift,ifftshift
from matplotlib.pyplot import subplots,cm

def testFourierRotation(angle):

    M = lena()
    newshape = [2*dim for dim in M.shape]
    M = procrustes(M,newshape)

    # rotate, then take the FFT
    rM = rotate(M,angle,reshape=False)
    FrM = fftshift(fft2(rM))

    # take the FFT, then rotate
    FM = fftshift(fft2(M))
    rFM = rotatecomplex(FM,angle,reshape=False)
    IrFM = ifft2(ifftshift(rFM))

    fig,[[ax1,ax2,ax3],[ax4,ax5,ax6]] = subplots(2,3)

    ax1.imshow(M,interpolation='nearest',cmap=cm.gray)
    ax1.set_title('Original')
    ax2.imshow(rM,interpolation='nearest',cmap=cm.gray)
    ax2.set_title('Rotated in spatial domain')
    ax3.imshow(abs(IrFM),interpolation='nearest',cmap=cm.gray)
    ax3.set_title('Rotated in Fourier domain')
    ax4.imshow(np.log(abs(FM)),interpolation='nearest',cmap=cm.gray)
    ax4.set_title('FFT')
    ax5.imshow(np.log(abs(FrM)),interpolation='nearest',cmap=cm.gray)
    ax5.set_title('FFT of spatially rotated image')
    ax6.imshow(np.log(abs(rFM)),interpolation='nearest',cmap=cm.gray)
    ax6.set_title('Rotated FFT')
    fig.tight_layout()

    pass

def rotatecomplex(a,angle,reshape=True):
    r = rotate(a.real,angle,reshape=reshape,mode='wrap')
    i = rotate(a.imag,angle,reshape=reshape,mode='wrap')
    return r+1j*i

def procrustes(a,target,padval=0):
    b = np.ones(target,a.dtype)*padval
    aind = [slice(None,None)]*a.ndim
    bind = [slice(None,None)]*a.ndim
    for dd in xrange(a.ndim):
        if a.shape[dd] > target[dd]:
            diff = (a.shape[dd]-target[dd])/2.
            aind[dd] = slice(np.floor(diff),a.shape[dd]-np.ceil(diff))
        elif a.shape[dd] < target[dd]:
            diff = (target[dd]-a.shape[dd])/2.
            bind[dd] = slice(np.floor(diff),target[dd]-np.ceil(diff))
    b[bind] = a[aind]
    return b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-29T22:41:57.200

我不确定这是否已经解决，但我相信我已经解决了您关于第三个图中观察到的效果的问题：

您观察到的这种奇怪效果是由于您实际计算 FFT 的来源。本质上，FFT 从数组的第一个像素处开始`M[0][0]`。但是，您定义围绕 的旋转`M[size/2+1,size/2+1]`，这是正确的方法，但错误:)。傅立叶域是从`M[0][0]`! 如果你现在在傅里叶域中旋转，你是在旋转`M[0][0]`而不是在旋转`M[size/2+1,size/2+1]`。我无法完全解释这里到底发生了什么，但你也会得到我以前得到的相同效果。为了在傅里叶域中旋转原始图像，您必须首先将 2D`fftShift`应用于原始图像 M，然后计算 FFT、旋转、IFFT，然后再应用`ifftShift`。这样，图像的旋转中心和傅里叶域的中心就会同步。

AFAI 记得我们还在两个单独的数组中旋转实部和虚部，然后将它们合并。我们还在复数上测试了各种插值算法，但效果不大：)。它在我们的包[pytom](http://pytom.org)中。

然而，这可能是超级损失少，但两个额外的转变并不是真的很快，除非你指定一些时髦的数组索引算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:26:11.407

好吧，旋转和缩放的图像会导致旋转和缩放（具有反比例）傅立叶变换。

另请注意，旋转和缩放在像素数上都是线性的，而 FFT 是 O(w*logw*h*logh)，因此最终它实际上并没有那么昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-19T06:08:52.527

我意识到这很晚了，但我只是想在这里回答这个问题，因为我回顾了我关于移位不变性的基本知识。问题是您在旋转之前扩展了傅立叶空间（如考虑混叠）。查看旋转图像的 FT：轴向尖峰（别名）出现在傅里叶旋转的 IFT 中没有的边缘。

您应该旋转然后处理锯齿。因为您正在考虑混叠（以周期 = 像素数循环傅立叶空间），然后通过旋转放弃该努力，所以您会导致混叠出现在最终图像中。本质上，您正在分散傅立叶别名，因此将图像空间别名集中在一起。

由于没有锯齿，旋转对于 90 度旋转工作顺利；k空间的角落完美匹配。

# javascript - 任何键位后codemirror自动完成？

> ID：13744176
> 
> 赞同：26
> 
> 时间：2012-12-06T13:02:22.833
> 
> 标签：javascript, codemirror, key-events

我正在尝试添加一个自定义自动完成功能，我想在用户输入时触发它（当然是可配置的）。我发现了几个 codemirror 的自动完成示例：

[http://codemirror.net/demo/complete.html](http://codemirror.net/demo/complete.html)和 [http://codemirror.net/demo/xmlcomplete.html](http://codemirror.net/demo/xmlcomplete.html)

但是这两个都在特定键上触发（一个是 Control-Space，另一个是 '<'）并且都使用该`extraKeys`功能来处理事件，但我想从任何键触发。我尝试了以下方法：

```
 var editor = CodeMirror.fromTextArea(document.getElementById("code"),
        {
             lineNumbers: true,
             mode: "text/x-mysql",
             fixedGutter: true,
             gutter: true,
//           extraKeys: {"'.'": "autocomplete"}
             keyup: function(e)
             {
                console.log('testing');
             },
             onkeyup: function(e)
             {
                console.log('testing2');
             }
        }); 
```

但是没有运气。关于如何从任何 keyup 事件触发的任何建议？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-10-08T17:01:42.083

对于 5.7 版，以前提出的解决方案都不适用于我（我认为即使是早期版本也有错误）。我的**解决方案**：

```
 myCodeMirror.on("keyup", function (cm, event) {
        if (!cm.state.completionActive && /*Enables keyboard navigation in autocomplete list*/
            event.keyCode != 13) {        /*Enter - do not open autocomplete list just after item has been selected in it*/ 
            CodeMirror.commands.autocomplete(cm, null, {completeSingle: false});
        }
    }); 
```

**这个怎么运作：**

仅当它尚未打开时才会打开自动完成弹出窗口（否则键盘导航会导致重新打开弹出窗口并再次选择第一个项目）。

当您单击*Enter*时，您希望关闭弹出窗口，因此这是不应触发自动补全的字符的特殊情况（但您可能会考虑一种情况，即您希望为空行显示反补全）。

然后最后一个修复是设置`completeSingle: false`，它可以防止您输入某个单词时的大小写，并且在中间它会自动完成并且您继续通过反射输入。因此，用户将始终需要从弹出窗口中选择预期的字符串（即使它是单个选项）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-25T05:21:04.497

可以通过以下方式实现最类似于 IntelliSense 的行为：

```
var ExcludedIntelliSenseTriggerKeys =
{
    "8": "backspace",
    "9": "tab",
    "13": "enter",
    "16": "shift",
    "17": "ctrl",
    "18": "alt",
    "19": "pause",
    "20": "capslock",
    "27": "escape",
    "33": "pageup",
    "34": "pagedown",
    "35": "end",
    "36": "home",
    "37": "left",
    "38": "up",
    "39": "right",
    "40": "down",
    "45": "insert",
    "46": "delete",
    "91": "left window key",
    "92": "right window key",
    "93": "select",
    "107": "add",
    "109": "subtract",
    "110": "decimal point",
    "111": "divide",
    "112": "f1",
    "113": "f2",
    "114": "f3",
    "115": "f4",
    "116": "f5",
    "117": "f6",
    "118": "f7",
    "119": "f8",
    "120": "f9",
    "121": "f10",
    "122": "f11",
    "123": "f12",
    "144": "numlock",
    "145": "scrolllock",
    "186": "semicolon",
    "187": "equalsign",
    "188": "comma",
    "189": "dash",
    "190": "period",
    "191": "slash",
    "192": "graveaccent",
    "220": "backslash",
    "222": "quote"
}

EditorInstance.on("keyup", function(editor, event)
{
    var __Cursor = editor.getDoc().getCursor();
    var __Token = editor.getTokenAt(__Cursor);

    if (!editor.state.completionActive &&
        !ExcludedIntelliSenseTriggerKeys[(event.keyCode || event.which).toString()] &&
        (__Token.type == "tag" || __Token.string == " " || __Token.string == "<" || __Token.string == "/"))
    {
        CodeMirror.commands.autocomplete(editor, null, { completeSingle: false });
    }
}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-07-20T13:49:57.370

要同时显示自动完成小部件：

```
onKeyEvent: function (e, s) {
    if (s.type == "keyup") {
        CodeMirror.showHint(e);
    }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-05-21T09:35:17.413

```
editor.on("inputRead",function(cm,changeObj){
   // hinting logic
}) 
```

据我所知，“inputRead”是在“codemirror”中显示“自动完成”的最佳事件。唯一的缺点是您不能在退格或删除时显示提示。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-26T11:27:22.980

使用此功能无需 CTRL + 空格即可自动完成 codeMirror。

在 show-hint.js 中将 completeSingle 设置为 false

```
editor.on("inputRead", function(instance) {
    if (instance.state.completionActive) {
            return;
    }
    var cur = instance.getCursor();
    var token = instance.getTokenAt(cur);
    if (token.type && token.type != "comment") {
            CodeMirror.commands.autocomplete(instance);
    }
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-07T05:50:07.913

让我分享一个完整的示例，其中包含任何 keyup 之后的自动完成（用于 hive sql）：

包括脚本和样式：

```
<link rel="stylesheet" href="/static/codemirror/lib/codemirror.css">
<link rel="stylesheet" href="/static/codemirror/theme/material.css">
<link rel="stylesheet" href="/static/codemirror/addon/hint/show-hint.css" />

<script type="text/javascript" src="/static/codemirror/lib/CodeMirror.js"></script>
<script type="text/javascript" src="/static/codemirror/mode/sql/sql.js"></script>
<script type="text/javascript" src="/static/codemirror/addon/hint/show-hint.js"></script>
<script type="text/javascript" src="/static/codemirror/addon/hint/sql-hint.js"></script> 
```

网页：

```
<textarea id="code" name="code" rows="4" placeholder="" value=""></textarea> 
```

脚本 ：

```
<script>

    $(function () {
        initSqlEditor();
        initAutoComplete();
    });

    // init sql editor
    function initSqlEditor() {

        var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
            autofocus: true,
            extraKeys: {
                "Tab": "autocomplete"
            },
            hint: CodeMirror.hint.sql,
            lineNumbers: true,
            mode: 'text/x-hive',
            lineWrapping: true,
            theme: 'material',
        });

        editor.on('keyup', function(editor, event){
            // type code and show autocomplete hint in the meanwhile
            CodeMirror.commands.autocomplete(editor);
        });
    }

    /**
     * Init autocomplete for table name and column names in table.
     */
    function initAutoComplete() {

        CodeMirror.commands.autocomplete = function (cmeditor) {

            CodeMirror.showHint(cmeditor, CodeMirror.hint.sql, {

                // "completeSingle: false" prevents case when you are typing some word
                // and in the middle it is automatically completed and you continue typing by reflex.
                // So user will always need to select the intended string
                // from popup (even if it's single option). (copy from @Oleksandr Pshenychnyy)
                completeSingle: false,

                // there are 2 ways to autocomplete field name:
                // (1) table_name.field_name (2) field_name
                // Put field name in table names to autocomplete directly
                // no need to type table name first.
                tables: {
                    "table1": ["col_A", "col_B", "col_C"],
                    "table2": ["other_columns1", "other_columns2"],
                    "col_A": [],
                    "col_B": [],
                    "col_C": [],
                    "other_columns1": [],
                    "other_columns2": [],
                }
            });
        }
    }

</script> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-07-11T09:41:30.620

我认为每个人都有自己的用例。我还必须从不同的答案中挑选部分来制作最适合我的情况的东西。

据我说，我只想显示关于字母、数字和 (.) 的建议，但按下 ctrl 键除外。因为有时我复制或粘贴一些东西，所以不应该打开建议。46 ascii 用于 (.) 我已经包含在数字中。

```
activeEditor.on("keydown", function (cm, event) {
  if (
    !(event.ctrlKey) &&
    (event.keyCode >= 65 && event.keyCode <= 90) || 
    (event.keyCode >= 97 && event.keyCode <= 122) || 
    (event.keyCode >= 46 && event.keyCode <= 57)
  ) {
    CodeMirror.commands.autocomplete(cm, null, {completeSingle: false});
  }
}); 
```

请记住包括三件事 -

1.  显示提示的 js 和 css - `<link rel="stylesheet" href="codemirror/addon/hint/show-hint.css"> <script src="codemirror/addon/hint/show-hint.js"></script>`

2.  您想要提示的语言的脚本 - 例如 - javascript `<script src="codemirror/addon/hint/javascript-hint.js"></script>`

3.  在初始化代码编辑器时包含这一行。我使用了 javascript 提示。 `hint: CodeMirror.hint.javascript`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-03-19T06:30:55.590

```
editor.on('keyup', function(){
    CodeMirror.commands.autocomplete(editor);
}); 
```

它可能有效

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-10-22T10:32:53.883

稍微改变了 Oleksandr Pshenychnyy 的回答（见[这里](https://stackoverflow.com/a/33021864/6743697)），回答因为我还不能添加评论

下面的代码仅允许在按下字母键时出现自动完成功能（可能是您想要的，而不是任何键）

```
editor.on("keyup", function (cm, event) {
if (!cm.state.completionActive &&   /*Enables keyboard navigation in autocomplete list*/
     event.keyCode > 64 && event.keyCode < 91){// only when a letter key is pressed
         CodeMirror.commands.autocomplete(cm, null, {completeSingle: false});
    }
}); 
```

（这应该是合乎逻辑的，但是如果这可行的话，有些人可以评论一下！）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-12-06T21:54:51.457

**注意**：此答案[**不适**](https://stackoverflow.com/a/29296382/55246)用于最新版本的 CodeMirror。

```
onKeyEvent: function(e , s){
                if (s.type == "keyup")
                {
                    console.log("test");   
                }
            } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-08-14T15:50:02.317

对于这种情况，更改事件是更好的选择

```
editor.on('change', (cm, event) => {
         editor.execCommand('autocomplete');
        }); 
```

# c++ - 一个奇怪的打印功能错误

> ID：13744177
> 
> 赞同：0
> 
> 时间：2012-12-06T04:21:33.980
> 
> 标签：c++

我正在处理一个 InterviewStreet 问题[https://www.interviewstreet.com/challenges/dashboard/#problem/4fcf919f11817](https://www.interviewstreet.com/challenges/dashboard/#problem/4fcf919f11817)，算法是正确的，但我仍然得到几个错误的答案，几个小时后我发现问题与打印功能：

```
void printHalf(int64_t x) {
    if (x % 2 == 0)
        printf("%lld\n", x / 2L);
    else
        printf("%lld.5\n", x / 2L);
} 
```

这个函数接受一个 64 位整数，并打印它的一半。如果我将此函数更改为以下代码，我的解决方案适用于所有测试用例：

```
void printHalf(int64_t x) {
    if (x % 2 == 0)
        printf("%lld\n", x / 2L);
    else
        printf("%.1f\n", x / 2.0);
} 
```

我觉得这有点奇怪，因为在我看来这两个函数有相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:07:05.610

您的第一个版本没有`-1`正确处理该值。如果你运行`printHalf(-1)`它会打印`0.5`，因为它不知道它需要显示`-0`而不是`0`.

对于其他负值，它将在 C++11 中正常工作，但依赖于 C++03 中实现定义的行为（C++03 标准未指定如何舍入负数的除法）。

第二个版本也可能打印不正确的结果：如果值很大，转换成浮点数会降低精度（因为双精度浮点数不能准确表示所有64位整数），所以结果可能是off一点点。

# gcc - gcc 是否在 MakeFile 中搜索 LOCAL_C_INCLUDES += \ 中的子目录

> ID：13744184
> 
> 赞同：0
> 
> 时间：2012-12-06T13:02:47.723
> 
> 标签：gcc

在 Makefile 中，

如果我有

```
LOCAL_C_INCLUDES += \
        ${TOP}/directory1 \ 
```

编译器是否足够聪明，可以在“directory1”的*子目录中搜索 .h 文件？*

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:37:22.507

不，编译器仅在以`-I`.

如果您的 makefile 足够聪明，可以扩展 LOCAL_C_INCLUDES 以包含子目录，那就不同了，但这不是 gcc 所做的。

如果您有类似的包含，`"subdir/header.h"`那么编译器当然会在子目录中找到标头，但这并不是真正的“搜索”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:39:11.037

这不是聪明与否的问题。假设用户添加`/`目录。您不希望编译器花费数小时。

如果您有子目录，您需要做的是在定义语句中添加子目录：

```
#include <sys/types.h> 
```

# qt - QT中itemismovable和drag&drop有什么区别

> ID：13744186
> 
> 赞同：0
> 
> 时间：2012-12-06T13:02:54.803
> 
> 标签：qt, drag-and-drop

我在 QGraphicsView 上有一些矩形。我需要将一个拖放到特定位置。将项目设置为可移动或拖放之间有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:38:36.387

[拖放与](http://qt-project.org/doc/qt-4.8/dnd.html)项目是否可移动无关。

> 拖放提供了一种简单的视觉机制，用户可以使用它在应用程序之间和应用程序内传输信息。（在文献中这被称为“直接操作模型”。）拖放功能类似于剪贴板的剪切和粘贴机制。

这就像您将图标从桌面拖到应用程序中一样。个人`QGraphicsItem`s 可以接受拖放事件，您可以通过实现`dragEnterEvent`、`dragMoveEvent`和来随意处理它们`dragLeaveEvent`。

Qt 中的拖放一词总是用来指​​代这一点，不应与用户使用鼠标在屏幕上移动对象的能力相混淆。

# ios - 检查 Dropbox 是否响应 可达性 iOS

> ID：13744190
> 
> 赞同：4
> 
> 时间：2012-12-06T13:03:04.300
> 
> 标签：ios, cocoa-touch, dropbox

我正在使用保管箱从保管箱帐户上传和下载共享文件。这意味着每个用户都可以下载最新版本的文件，对其进行修改，然后重新上传，替换之前的版本。如果有稳定的互联网连接，则此过程有效，但如果互联网没有响应，则文件将损坏，并且将上传不完整的文件版本。这将损害所有用户。有没有办法检查保管箱服务器是否有稳定的互联网连接？我尝试了可达性，但它只控制互联网连接，而不是 Dropbox 服务器响应。

错误代码：

```
- (void)restClient:(DBRestClient*)client uploadFileFailedWithError:(NSError*)error {
NSLog(@"File upload failed with error - %@", error);

UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"Offline mode" message:@"Your event is going to be posted when you create a new event." delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
[alert1 show];

 } 
```

关键是，即使调用了这个函数，文件还是会上传到网上！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:42:05.343

要检查您的帐户是否与 Dropbox 相关联，请使用此 。`[[DBSession sharedSession] isLinked]`返回一个`BOOL`值

```
 if ([[DBSession sharedSession] isLinked]) {         
       // write your code here..
   } 
```

然后将您的文件恢复到以前的版本..

为此，您只需要清楚地了解它们

1.  您必须加载要恢复的文件的[修订版本。](https://www.dropbox.com/developers/reference/api#revisions)为此，您可以使用其中一种方法

***获取文件先前版本的[元数据](https://www.dropbox.com/developers/reference/api#metadata)。仅提供最多 30 天的修订。***

```
/* Loads a list of up to 10 DBMetadata objects representing past revisions of the file at path */
- (void)loadRevisionsForFile:(NSString *)path;

/* Same as above but with a configurable limit to number of DBMetadata objects returned, up to 1000 */
- (void)loadRevisionsForFile:(NSString *)path limit:(NSInteger)limit; 
```

例如：[[self restClient] loadRevisionsForFile:@"YourFile" limit:10];

以及这些委托方法，您可以从中获取文件的修订值数组

```
- (void)restClient:(DBRestClient*)client loadedRevisions:(NSArray *)revisions forFile:(NSString *)path;
- (void)restClient:(DBRestClient*)client loadRevisionsFailedWithError:(NSError *)error; 
```

例如：

```
- (void)restClient:(DBRestClient*)client loadedRevisions:(NSArray *)revisions forFile:(NSString *)path {

    NSArray  *dbRevisionsArray = revisions;
}
- (void)restClient:(DBRestClient*)client loadRevisionsFailedWithError:(NSError *)error{

    [[[UIAlertView alloc] initWithTitle:@"Oops!!!" message:@"Please try again." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] show];
} 
```

因此，现在您拥有文件先前版本的元数据数组。

1.  要恢复文件***[[关于恢复]](https://www.dropbox.com/developers/reference/api#restore)***，

> 这里有两种情况：
> 
> 案例1：是在Dropbox中恢复文件（*这里您只在Dropbox中恢复了文件，要在您的APP中恢复文件，您必须像往常一样再次将文件加载到您的数据库中*）
> 
> 案例2：是恢复您的数据库中的文件（*这里您只能在应用程序的数据库中恢复您的文件，但不能在Dropbox中恢复您的文件，要在Dropbox中恢复请按照案例1：*）

**案例 1：*在 Dropbox 中恢复文件***

// 恢复路径中的文件，因为它存在于给定 rev 中，并在恢复后返回恢复文件的元数据

```
 - (void)restoreFile:(NSString *)path toRev:(NSString *)rev; 
```

// 以及它们的委托方法

```
 - (void)restClient:(DBRestClient*)client restoredFile:(DBMetadata *)fileMetadata;
 - (void)restClient:(DBRestClient*)client restoreFileFailedWithError:(NSError *)error; 
```

例如：

```
 DBMetadata *metaData = [dbRevisionsArray objectAtIndex:row];
      NSString *revStr = metaData.rev;
[[self restClient] restoreFile:@"yourFilePath" toRev:revStr]; 
```

然后将文件加载到您的数据库路径..

就是这样 ，。

**案例 2：*仅在 App 的数据库中恢复文件（不在 Dropbox 中）***

/* 这将加载一个文件，因为它存在于给定的 rev */

```
- (void)loadFile:(NSString *)path atRev:(NSString *)rev intoPath:(NSString *)destPath;

- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)destPath contentType:(NSString*)contentType metadata:(DBMetadata*)metadata;
- (void)restClient:(DBRestClient*)client loadFileFailedWithError:(NSError*)error; 
```

例如： `[[self restClient] loadFile:@"yourFile" atRev:revStr intoPath:toYourDatabasePath];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:44:33.897

您可以使用 Reachability 来检查特定主机：`reachabilityWithHostName:`

```
@implementation DDViewController {
    Reachability *r;
}

- (void)viewDidAppear:(BOOL)animated {
    self.view.backgroundColor = [UIColor yellowColor];
    if(!r) {
        r = [Reachability reachabilityWithHostName:@"dropbox.com"];
        [r startNotifier];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:kReachabilityChangedNotification object:nil];
    }
}

- (void)reachabilityChanged:(NSNotification*)note {
    NSLog(@"%@", note);
    self.view.backgroundColor = [note.object isReachable]?[UIColor greenColor] : [UIColor redColor];
} 
```

--TODO: 获取 DBRESTClient 使用的真实主机名--

# mysql - MySQL - 游标在存储过程中不起作用

> ID：13744192
> 
> 赞同：1
> 
> 时间：2012-12-06T13:03:20.427
> 
> 标签：mysql, stored-procedures, cursor

我看到以前有人问过这个问题，但没有提供答案。

我正在使用游标来解析 SELECT 语句返回的数据。但是，与在命令行中运行 SELECT 语句相比，它不会返回我期望的数据。

```
Broker                  Year    Month   Total
Houlder Insurance           2011    10  1
Houlder Insurance           2011    11  1
Houlder Insurance           2011    12  1
Incepta                 2012    6   4
Incepta                 2012    7   6
Incepta                 2012    8   4
Kay International Plc   2011    10  4
Kay International Plc   2011    11  5
Kay International Plc   2011    12  2
Kay International Plc   2012    1   1
Kay International Plc   2012    2   1
Kay International Plc   2012    4   4
Kay International Plc   2012    5   6
Kay International Plc   2012    6   2
Kay International Plc   2012    7   1
Kay International Plc   2012    8   1
Miles Smith                 2011    12  3
Miles Smith                 2012    2   1
Miles Smith                 2012    4   1
Miles Smith                 2012    5   6
Miles Smith                 2012    6   1
Miles Smith                 2012    7   2
Miles Smith                 2012    8   2 
```

当我运行以下存储过程代码时，它似乎只返回与经纪人“Kay International”和“Incepta”相关的记录！这个问题有解决方案吗？

```
 CREATE DEFINER = 'root'@'localhost'
PROCEDURE src_survey.PopulateReportMonthSurveySubmitted()
BEGIN DECLARE broker    TEXT;
  DECLARE yy        INT;
  DECLARE jan       INT;
  DECLARE feb       INT;
  DECLARE mar       INT;
  DECLARE apr       INT;
  DECLARE may       INT;
  DECLARE jun       INT;
  DECLARE jul       INT;
  DECLARE aug       INT;
  DECLARE sep       INT;
  DECLARE toct      INT;
  DECLARE nov       INT;
  DECLARE tdec      INT;

  DECLARE db_broker TEXT;
  DECLARE db_year   INT;
  DECLARE db_month  INT;
  DECLARE db_total  INT;

  DECLARE eof       INT;
  DECLARE cur1 CURSOR FOR SELECT b.company_name AS 'Broker'
                               , year(submit_date_time) AS 'Year'
                               , month(submit_date_time) AS 'Month'
                               , count(*) AS 'Total'
                          FROM
                            survey_request a
                          JOIN survey d
                          ON d.src_reference = a.src_reference
                          JOIN contacts_companies b
                          ON b.reference = a.broker_company_reference
                          JOIN src_status c
                          ON c.reference = a.src_status_reference
                          WHERE
                            underwriter_company_reference = 73
                          GROUP BY
                            broker
                          , year
                          , month
                          ORDER BY
                            broker
                          , year
                          , month;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET eof = 1;

  SET broker = '';
  SET yy = 0;
  SET jan = 0;
  SET feb = 0;
  SET mar = 0;
  SET apr = 0;
  SET may = 0;
  SET jun = 0;
  SET jul = 0;
  SET aug = 0;
  SET sep = 0;
  SET toct = 0;
  SET nov = 0;
  SET tdec = 0;

  TRUNCATE TABLE reportmonthsurveysubmitted;
  OPEN cur1;
  SET eof = 0;

  WHILE eof = 0
  DO
    FETCH cur1 INTO db_broker, db_year, db_month, db_total;
    IF broker <> db_broker THEN
      SET broker = db_broker;
      SET yy = 0;
    END IF;
    IF yy <> db_year THEN
      IF yy <> 0 THEN
        INSERT INTO reportmonthsurveysubmitted VALUES (0, broker, yy, jan, feb, mar, apr, may, jun, jul, aug, sep, toct, nov, tdec);
      END IF;
      SET yy = db_year;
      SET jan = 0;
      SET feb = 0;
      SET mar = 0;
      SET apr = 0;
      SET may = 0;
      SET jun = 0;
      SET jul = 0;
      SET aug = 0;
      SET sep = 0;
      SET toct = 0;
      SET nov = 0;
      SET tdec = 0;
    END IF;
    CASE db_month
    WHEN 1 THEN
      SET jan = db_total;
    WHEN 2 THEN
      SET feb = db_total;
    WHEN 3 THEN
      SET mar = db_total;
    WHEN 4 THEN
      SET apr = db_total;
    WHEN 5 THEN
      SET may = db_total;
    WHEN 6 THEN
      SET jun = db_total;
    WHEN 7 THEN
      SET jul = db_total;
    WHEN 8 THEN
      SET aug = db_total;
    WHEN 9 THEN
      SET sep = db_total;
    WHEN 10 THEN
      SET toct = db_total;
    WHEN 11 THEN
      SET nov = db_total;
    WHEN 12 THEN
      SET tdec = db_total;
    END CASE;

  END WHILE;
  CLOSE cur1;

  INSERT INTO reportmonthsurveysubmitted VALUES (0, broker, yy, jan, feb, mar, apr, may, jun, jul, aug, sep, toct, nov, tdec);

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:27:13.470

您的 while 循环有问题。如果您要跟踪，那么您将知道插入查询不会因为 while 循环中的“Houlder insurance”而被触发。

第一次 yy = 0，在设置 broker = db_broker 和 yy = 0 之后。然后，`IF yy <> db_year THEN`评估 TRUE，所以它会检查 yy <> 0，它是，所以评估为 FALSE。然后它设置 yy = db_year，因此 yy 变为 2011。第二次`broker <> db_broker`是 FALSE，所以它不会进一步检查，然后第三条记录也可以。现在，当“Incepta”的第四条记录出现时，`broker <> db_broker`评估为 TRUE，因为经纪人有“Houlder insurance”，而 db_broker 有“Incepta”，所以经纪人持有“Incepta”并且 yy = 0。接下来，`yy <> db_year` 评估 TRUE 为 yy = 0 并且 db_year 有2012\. Next condition yy <> 0 is FALSE，所以这次也没有执行insert，所以整体跳过了“Houlder insurance”记录。

以下是更正的程序

```
 CREATE DEFINER = 'root'@'localhost'
PROCEDURE src_survey.PopulateReportMonthSurveySubmitted()
BEGIN DECLARE broker    TEXT;
  DECLARE yy        INT;
  DECLARE jan       INT;
  DECLARE feb       INT;
  DECLARE mar       INT;
  DECLARE apr       INT;
  DECLARE may       INT;
  DECLARE jun       INT;
  DECLARE jul       INT;
  DECLARE aug       INT;
  DECLARE sep       INT;
  DECLARE toct      INT;
  DECLARE nov       INT;
  DECLARE tdec      INT;

  DECLARE db_broker TEXT;
  DECLARE db_year   INT;
  DECLARE db_month  INT;
  DECLARE db_total  INT;

  DECLARE eof       INT;
  DECLARE cur1 CURSOR FOR SELECT b.company_name AS 'Broker'
                               , YEAR(submit_date_time) AS 'Year'
                               , MONTH(submit_date_time) AS 'Month'
                               , COUNT(*) AS 'Total'
                          FROM
                            survey_request a
                          JOIN survey d
                          ON d.src_reference = a.src_reference
                          JOIN contacts_companies b
                          ON b.reference = a.broker_company_reference
                          JOIN src_status c
                          ON c.reference = a.src_status_reference
                          WHERE
                            underwriter_company_reference = 73
                          GROUP BY
                            broker
                          , YEAR
                          , MONTH
                          ORDER BY
                            broker
                          , YEAR
                          , MONTH;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET eof = 1;

  SET broker = '';
  SET yy = 0;
  SET jan = 0;
  SET feb = 0;
  SET mar = 0;
  SET apr = 0;
  SET may = 0;
  SET jun = 0;
  SET jul = 0;
  SET aug = 0;
  SET sep = 0;
  SET toct = 0;
  SET nov = 0;
  SET tdec = 0;

  TRUNCATE TABLE reportmonthsurveysubmitted;
  OPEN cur1;
  SET eof = 0;

  WHILE eof = 0
  DO
    FETCH cur1 INTO db_broker, db_year, db_month, db_total;
    IF broker <> db_broker THEN
    IF yy <> 0 THEN
        INSERT INTO reportmonthsurveysubmitted VALUES (0, broker, yy, jan, feb, mar, apr, may, jun, jul, aug, sep, toct, nov, tdec);
    END IF;
    SET broker = db_broker;
    SET yy = 0;
    END IF;
    IF yy <> db_year THEN
    IF yy <> 0 THEN
        INSERT INTO reportmonthsurveysubmitted VALUES (0, broker, yy, jan, feb, mar, apr, may, jun, jul, aug, sep, toct, nov, tdec);
    END IF;

      SET yy = db_year;
      SET jan = 0;
      SET feb = 0;
      SET mar = 0;
      SET apr = 0;
      SET may = 0;
      SET jun = 0;
      SET jul = 0;
      SET aug = 0;
      SET sep = 0;
      SET toct = 0;
      SET nov = 0;
      SET tdec = 0;
    END IF;

    CASE db_month
    WHEN 1 THEN
      SET jan = db_total;
    WHEN 2 THEN
      SET feb = db_total;
    WHEN 3 THEN
      SET mar = db_total;
    WHEN 4 THEN
      SET apr = db_total;
    WHEN 5 THEN
      SET may = db_total;
    WHEN 6 THEN
      SET jun = db_total;
    WHEN 7 THEN
      SET jul = db_total;
    WHEN 8 THEN
      SET aug = db_total;
    WHEN 9 THEN
      SET sep = db_total;
    WHEN 10 THEN
      SET toct = db_total;
    WHEN 11 THEN
      SET nov = db_total;
    WHEN 12 THEN
      SET tdec = db_total;
    END CASE;

  END WHILE;
  CLOSE cur1;

  INSERT INTO reportmonthsurveysubmitted VALUES (0, broker, yy, jan, feb, mar, apr, may, jun, jul, aug, sep, toct, nov, tdec);

END 
```

希望它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:21:11.433

尝试这个：

```
CREATE DEFINER = 'root'@'localhost'
PROCEDURE src_survey.PopulateReportMonthSurveySubmitted()
BEGIN DECLARE broker    TEXT;
  DECLARE yy        INT;
  DECLARE jan       INT;
  DECLARE feb       INT;
  DECLARE mar       INT;
  DECLARE apr       INT;
  DECLARE may       INT;
  DECLARE jun       INT;
  DECLARE jul       INT;
  DECLARE aug       INT;
  DECLARE sep       INT;
  DECLARE toct      INT;
  DECLARE nov       INT;
  DECLARE tdec      INT;

  DECLARE db_broker TEXT;
  DECLARE db_year   INT;
  DECLARE db_month  INT;
  DECLARE db_total  INT;

  DECLARE eof       INT DEFAULT 0;
  DECLARE cur1 CURSOR FOR SELECT b.company_name AS 'Broker'
                               , YEAR(submit_date_time) AS 'Year'
                               , MONTH(submit_date_time) AS 'Month'
                               , COUNT(*) AS 'Total'
                          FROM
                            survey_request a
                          JOIN survey d
                          ON d.src_reference = a.src_reference
                          JOIN contacts_companies b
                          ON b.reference = a.broker_company_reference
                          JOIN src_status c
                          ON c.reference = a.src_status_reference
                          WHERE
                            underwriter_company_reference = 73
                          GROUP BY
                            broker
                          , YEAR
                          , MONTH
                          ORDER BY
                            broker
                          , YEAR
                          , MONTH;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET eof = 1;

  SET broker = '';
  SET yy = 0;
  SET jan = 0;
  SET feb = 0;
  SET mar = 0;
  SET apr = 0;
  SET may = 0;
  SET jun = 0;
  SET jul = 0;
  SET aug = 0;
  SET sep = 0;
  SET toct = 0;
  SET nov = 0;
  SET tdec = 0;

  TRUNCATE TABLE reportmonthsurveysubmitted;
  OPEN cur1;
  curLoop: 
    LOOP 
         FETCH cur1 INTO db_broker, db_year, db_month, db_total;
        IF eof = 1 THEN 
            CLOSE cur1;
            LEAVE curLoop;
        END IF;

    IF broker <> db_broker THEN
      SET broker = db_broker;
      SET yy = 0;
    END IF;
    IF yy <> db_year THEN
      IF yy <> 0 THEN
        INSERT INTO reportmonthsurveysubmitted VALUES (0, broker, yy, jan, feb, mar, apr, may, jun, jul, aug, sep, toct, nov, tdec);
      END IF;
      SET yy = db_year;
      SET jan = 0;
      SET feb = 0;
      SET mar = 0;
      SET apr = 0;
      SET may = 0;
      SET jun = 0;
      SET jul = 0;
      SET aug = 0;
      SET sep = 0;
      SET toct = 0;
      SET nov = 0;
      SET tdec = 0;
    END IF;
    CASE db_month
    WHEN 1 THEN
      SET jan = db_total;
    WHEN 2 THEN
      SET feb = db_total;
    WHEN 3 THEN
      SET mar = db_total;
    WHEN 4 THEN
      SET apr = db_total;
    WHEN 5 THEN
      SET may = db_total;
    WHEN 6 THEN
      SET jun = db_total;
    WHEN 7 THEN
      SET jul = db_total;
    WHEN 8 THEN
      SET aug = db_total;
    WHEN 9 THEN
      SET sep = db_total;
    WHEN 10 THEN
      SET toct = db_total;
    WHEN 11 THEN
      SET nov = db_total;
    WHEN 12 THEN
      SET tdec = db_total;
    END CASE;

SET eof = 0;        
    END LOOP;

  INSERT INTO reportmonthsurveysubmitted VALUES (0, broker, yy, jan, feb, mar, apr, may, jun, jul, aug, sep, toct, nov, tdec);

END 
```

# sql - HashByte & 比较字符串

> ID：13744194
> 
> 赞同：0
> 
> 时间：2012-12-06T13:03:27.993
> 
> 标签：sql, sql-server, sql-server-2008, hash

我们目前正在运行一个脚本来将 Active Directory 用户信息转储到数据库中。

当我们进行插入时，我们将所有值散列到 Varbinary(8000) 类型的散列码列中。此列用于比较下次运行时的哈希值，以便我们只更新已更改的记录。目前，当比较完成时，它总是以不同的方式返回。

我已将脚本简化为一个基本示例，但仍然遇到同样的问题。（企业人员是我数据库中保存人员信息的本地表）

```
SELECT 
    SamAccountName
INTO
    #TmpEnterprisePerson    
FROM OPENQUERY(ADSI, 'SELECT SamAccountName
              FROM ''LDAP://MyLdapDirectory''
              WHERE SamAccountName = ''myAccount''')

    select HashBytes('MD5',COALESCE(EP.SamAccountName, '') ) as originalHash
        , HashBytes('MD5',COALESCE(T.SamAccountName, '')) as NewHash
        , EP.SamAccountName as originalName
        , T.SamAccountName as newName
        , '"' + EP.SamAccountName + '"' as originalName2
        , '"' + T.SamAccountName + '"' as newName2
        , CAST(COALESCE(EP.SamAccountName, '') AS VARbinary(max)) as oriBinaryName
        , CAST(COALESCE(T.SamAccountName, '') AS VARbinary(max)) as newBinaryName
        , len(ep.samaccountName) as originallength
        , len(T.samaccountName) as newLength
    FROM
        [dbo].[EnterprisePerson] AS EP
        INNER JOIN #TmpEnterprisePerson T ON T.SamAccountName = EP.SamAccountName
where ep.SamAccountName= 'myAccount'

drop table #TmpEnterprisePerson 
```

结果如下

```
OriginalHash = 0xEB4A732C6372E7F1558D4C95E34CE6FF
NewHash      = 0x82DDB9733D5A7532D1C2C734807BE756
OriginalName = MyAccount
NewName      = MyAccount //Same as originalName
OriginalNam2 = "MyAccount"
NewName2     = "MyAccount" //Same as originalName2
oriBinaryName= 0x4C415245415541
newBinaryName= 0x4C00410052004500410055004100
OriginalLen  = 7
NewLength    = 7 
```

我不确定在比较哈希时我做错了什么或为什么它们的结果不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:25:03.823

我相信您有数据类型问题。转换`T.SamAccountName`为 varchar(N) - 与存储在数据库中的类型相同（或转换，如果您更喜欢转换）。

```
SELECT 
    SamAccountName
INTO
    #TmpEnterprisePerson    
FROM OPENQUERY(ADSI, 'SELECT SamAccountName
              FROM ''LDAP://MyLdapDirectory''
              WHERE SamAccountName = ''myAccount''')

    select HashBytes('MD5',COALESCE(EP.SamAccountName, '') ) as originalHash
        , HashBytes('MD5', convert(varchar(50), COALESCE(T.SamAccountName), ''))) as NewHash
        , EP.SamAccountName as originalName
        , T.SamAccountName as newName
        , len(ep.samaccountName) as originallength
        , len(T.samaccountName) as newLength
    FROM
        [dbo].[EnterprisePerson] AS EP
        INNER JOIN #TmpEnterprisePerson T ON T.SamAccountName = EP.SamAccountName
where ep.SamAccountName= 'myAccount'

drop table #TmpEnterprisePerson 
```

# linq - 是否可以按 linq 中的列位置排序？

> ID：13744206
> 
> 赞同：0
> 
> 时间：2012-12-06T13:04:17.900
> 
> 标签：linq

我是Linq的新手。我只想知道如何在 Linq 中使用 c# 表达式按列位置排序。如果可能，请告诉我，如果不是，那么背后的原因是什么？就像在 Sql 中一样

```
SELECT Title, FirstName, LastName
FROM Employees
ORDER BY 1,3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:09:01.477

这在 LINQ 中是不可能的，在 SQL 中是不好的做法。只需指定您要订购的列/属性。

等效的 LINQ 查询是这样的：

```
employees.Select(x => new { x.Title, x.FirstName, x.LastName })
         .OrderBy(x => x.Title)
         .ThenBy(x => x.LastName); 
```

或者在查询语法中：

```
from e in employees
order by e.Title, e.LastName
select new { x.Title, x.FirstName, x.LastName }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:14:21.207

不完全确定您的意思，但如果您的意思是：

```
SELECT Title, FirstName, LastName FROM Employees ORDER BY Title, LastName 
```

然后，您将执行以下操作之一：

```
var results = from e in context.Employees
              order by e.Title, e.Lastname
              select e; 
```

或者

```
var results = context.Employees.OrderBy(e => e.Title).ThenBy(e => e.LastName) 
```

未来使用的一个很好的参考：

*   [101 个 LINQ 示例 (C#)](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)
*   [101 个 LINQ 示例（VB.Net）](http://msdn.microsoft.com/en-us/vstudio/bb688088.aspx)

# pentaho - Pentaho 数据集成“获取文件名”不加载大文件列表

> ID：13744208
> 
> 赞同：3
> 
> 时间：2012-12-06T13:04:21.580
> 
> 标签：pentaho, kettle

我在远程驱动器（如 \remote\location）中有大量（超过 200k）pdf 文件。我必须从该目录中读取所有文件名并将文件名插入数据库。

我已经尝试过“获取文件名”步骤。但是，它不会加载文件名，并且转换会立即停止。
我尝试过使用较少数量的记录，这些记录位于同一远程目录中，但位于子目录中。它工作正常。
但是，当我尝试所有文件（包括子目录）时，它崩溃了。内存不足。 `(Failed to execute runnable (java.lang.OutOfMemoryError: Java heap space))`

有没有一种方法可以为每 1000 个文件处理一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:16:38.650

你内存不足。编辑spoon.sh 文件并搜索这一行。

`PENTAHO_DI_JAVA_OPTIONS="-Xmx512m -XX:MaxPermSize=512m"`

如果你有 4gb 的可用内存，你可以设置 2gb，（这取决于你）。

`PENTAHO_DI_JAVA_OPTIONS="-Xmx2048m -XX:MaxPermSize=1024m"`

重新启动你的勺子，然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:55:38.970

水壶非常消耗内存。例如，我通常需要 8 GB 才能对只有 250,000 条记录的文件运行相对较长且复杂的进程。所以在我运行厨房或平底锅之前，我总是设置`JAVAMAXMEM`适当的高。您以 MB 为单位设置它，因此对于 4 GB，您将设置

```
JAVAMAXMEM=4096 kitchen.sh ... 
```

# java - 从 DateTimeObject 获取 LocalDateTime

> ID：13744211
> 
> 赞同：2
> 
> 时间：2012-12-06T13:04:29.567
> 
> 标签：java, timezone, jodatime

我在使用 Joda Time 库获取本地时间时遇到问题。这是我正在尝试做的一个简单示例。

```
package simple;

import org.joda.time.DateTime;
import org.joda.time.DateTimeZone;
import org.joda.time.LocalDateTime;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

public class TestJodaLocalTime {

    public static void main(String[] args) {
        //time in UTC standard
        DateTime processingDate = DateTime.now();
        //local time
        LocalDateTime localDateTime = processingDate.
                withZone(DateTimeZone.getDefault()).toLocalDateTime();

        DateTimeFormatter fmtDate = DateTimeFormat.forPattern("dd/MM/yyyy");
        DateTimeFormatter fmtHour = DateTimeFormat.forPattern("HH:mm:ss");

        System.out.println("Date: " + fmtDate.print(processingDate));
        System.out.println("Time: " + fmtHour.withZone(DateTimeZone.UTC).
                print(processingDate));
        System.out.println("Local date: " + fmtDate.print(localDateTime));
        System.out.println("Local time: " + fmtHour.print(localDateTime));

    }

} 
```

我期待在打印本地时间时，我会从我的应用程序运行的时区获得时间，但我得到的时间与 UTC DateTime 相同。

```
Date: 06/12/2012
Time: 12:55:49
Local date: 06/12/2012
Local time: 12:55:49 
```

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:46:35.577

您可以尝试以下方法（我在 GMT+2:00 时区）：

```
public class TestJodaLocalTime {

    public static void main(String[] args) {
        DateTime utcNow = DateTime.now(DateTimeZone.UTC);
        DateTime localNow = utcNow.withZone(DateTimeZone.getDefault());

        DateTimeFormatter fmt = ISODateTimeFormat.dateHourMinuteSecond();

        System.out.println("UTC   now: " + fmt.print(utcNow));
        System.out.println("Local now: " + fmt.print(localNow));
    }

} 
```

输出：

```
UTC   now: 2012-12-07T17:43:43
Local now: 2012-12-07T19:43:43 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:20:25.677

此评论可能是问题的一部分：

```
//time in UTC standard
DateTime processingDate = DateTime.now(); 
```

否，`DateTime.now()`返回默认时区的当前时间。因此，当您以后使用时`withZone(DateTimeZone.getDefault())`，这是无操作的。

但是，我仍然希望`fmtHour.withZone(DateTimeZone.UTC).print(processingDate)`转换为 UTC。

确实，当我手动将默认时区设置为 UTC 以外的其他值时，我得到的结果是：

```
import org.joda.time.*;
import org.joda.time.format.*;

public class Test {
    public static void main(String[] args) {
        DateTimeZone pacific = DateTimeZone.forID("America/Los_Angeles");
        DateTimeZone.setDefault(pacific);

        DateTime processingDate = DateTime.now();
        //local time
        LocalDateTime localDateTime = processingDate.
            withZone(DateTimeZone.getDefault()).toLocalDateTime();

        DateTimeFormatter fmtDate = DateTimeFormat.forPattern("dd/MM/yyyy");
        DateTimeFormatter fmtHour = DateTimeFormat.forPattern("HH:mm:ss");

        System.out.println("Date: " + fmtDate.print(processingDate));
        System.out.println("Time: " + fmtHour.withZone(DateTimeZone.UTC).
                           print(processingDate));
        System.out.println("Local date: " + fmtDate.print(localDateTime));
        System.out.println("Local time: " + fmtHour.print(localDateTime));
    }
} 
```

输出：

```
Date: 06/12/2012
Time: 13:19:35
Local date: 06/12/2012
Local time: 05:19:35 
```

您确定问题不只是您的默认时区*是*UTC 吗？

# c++ - 用于临时更改对象的 const 方法

> ID：13744214
> 
> 赞同：2
> 
> 时间：2012-12-06T13:04:36.457
> 
> 标签：c++, constants, const-correctness

我有一个类`Reader`提供对二进制文件的访问以对其执行读取操作。

该文件包含同一文件中的多个偏移列表，可以在其中找到数据。这意味着，要获取某些数据段，必须从某个位置读取偏移量，然后跳转到该偏移量，再次读取偏移量，跳转到那里，等等，直到最终到达实际数据。

该类维护一个阅读位置，每次调用类似的方法时都会调整该位置

```
// reads 4 bytes and advances the position by 4 bytes
uint32 Reader::readOffset() { /* */ } 
```

或者

```
// moves the position to offset
void Reader::jumpTo(uint32 offset) { /* */ } 
```

这些方法显然不能`const`，因为它们正在移动阅读位置。

为了方便在文件的多个级别之间导航，该类提供了一个堆栈，可以根据需要在其中推送和弹出偏移量：

```
uint32 someOffset = reader.readOffset();
reader.pushOffset(); // remember position
reader.jumpTo(someOffset); // do something on another position
reader.popOffset(); // go back to where we were before 
```

那些 push/pop 方法也不行`const`，因为它们改变了偏移堆栈。

现在的问题在于便利方法，这些方法应该从文件中的内部已知位置提取数据。无论当前阅读位置如何，它们都必须工作，并且不应触摸它。按照设计，它们应该是`const`，但这不起作用：

```
uint32 Reader::readSomeDataFromKnownLocation() const
{
    pushOffset();

    jumpTo(1234ul);
    uint32 data = readData();

    popOffset();

    return data;
} 
```

我*确实*知道此方法会使对象保持与调用前相同的状态，但我仍然无法做到，`const`因为我在其中使用的每个方法都是非`const`.

所以，我的问题是，当必须在“按设计”`const`方法中临时更改对象的状态时，最好的方法是什么？

我想过，`const_cast<Reader*>(this)`但这似乎是一种骇人听闻的方法。或者您认为在这种情况下是否合理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:08:46.877

您可以制作位置字段`mutable`，然后将逻辑只读方法标记为`const`.

如果您想在公共 API 中保留`pushOffset`和`popOffset`方法，您应该引入私有版本`const`，并在您的`readSomeDataFromKnownLocation`方法中使用私有版本。

# html - 带有图像背景的无序列表，如果 1 或 2 行，则使其高度相同

> ID：13744215
> 
> 赞同：0
> 
> 时间：2012-12-06T13:04:44.993
> 
> 标签：html, css, html-lists

我正在尝试使用背景图像作为项目符号的无序列表。图像高度为 80 像素，因此我将内联高度定义为 80 倍。问题是我的一些子弹太长而进入第二行。我想让这第二行适合原来的 80 像素。我将如何做到这一点，以便我有一些带有 1 行的项目符号与项目符号图像垂直居中，以及一些项目符号是 2 行并且也与图像垂直居中，无论数量多少，每个项目符号行都将是 80px线。

这是我当前的代码：

```
<ul id="star-wars">
      <li id="one">blablabla</li>
      <li id="two">blablavla</li>
</ul>

#star-wars
{
    margin-left: 0;
    padding-left: 0;
    list-style: none;
    font-size: 18px;
    list-style-position:inside;
}

#star-wars li
{
    background-image: url(images/star-wars-icons/Han-Solo-02-icon.png);
        padding-left: 100px;
    background-repeat: no-repeat;
    line-height: 80px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:10:14.113

看起来您只是忘记将高度值设置为列表。

```
#star-wars li {
    height:80px;
} 
```

# django - 带有 FCGI 的 Apache 上的 Django - 高负载下的 500 内部服务器错误

> ID：13744216
> 
> 赞同：2
> 
> 时间：2012-12-06T13:04:46.137
> 
> 标签：django, windows, apache, fastcgi

我使用 Windows Server 2008、Apache 2.2 Python 2.7 和 Django 作为 FCGI 服务器

FCGI 服务器作为 SrvAny 服务启动：

 `python c:\amebas_site\amoeba\manage.py runfcgi host=127.0.0.1 port=8881 daemonize=True method=threaded outlog=c:\amebas_site\logs\access.log errlog=c:\amebas_site\logs\error.log maxchildren=100 maxspare=90 minspare=50 maxrequests=10 debug=True`

我尝试了不同的 maxspare、minspare、maxrequests 和 maxchildren 值，但没有任何帮助。在高负载下，我总是收到“500 服务器错误”。

阿帕奇配置：

`FastCGIExternalServer c:\amebas_site\fcgi.hook -host 127.0.0.1:8881`

 ````
 RewriteEngine On
 ...
 RewriteCond ${REQUEST_FILENAME} !-f
 RewriteRule ^/(.*)$ /fcgi.hook/$1 [QSA,L] 
````  `当有 5-6 个用户在线时，我的 django 网站运行良好，没有错误。但是当我进行压力测试（通过 loadimpact.com 的 50 个虚拟用户）时，该站点显示“500 个内部服务器错误”页面，并且我在我的 apache 日志中收到一条错误消息：

`[Thu Dec 06 16:29:48 2012] [error] [client 54.246.71.7] (OS 10054)An existing connection was forcibly closed by the remote host. : FastCGI: comm with server "C:/amebas_site/fcgi.hook" aborted: read failed [Thu Dec 06 16:29:48 2012] [error] [client 54.246.71.7] FastCGI: incomplete headers (0 bytes) received from server "C:/amebas_site/fcgi.hook"`

但是在 Django 日志中有注释。我怎样才能调试这个问题并摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:13:03.550

Look, you have maxchildren=100 1\. If your request is more then 1-2seconds (possible in debug), then your server just couldn't handle all 50 connections 2\. If you have static file and it's served by django - then it also uses additional connections

Solution: you could analyse logs and calculate how many requests you have during 5 seconds for example`

# javascript - 使用 JS 替换 id 的非贪婪正则表达式

> ID：13744224
> 
> 赞同：0
> 
> 时间：2012-12-06T13:05:13.143
> 
> 标签：javascript, regex

我正在寻找一种解决方案来替换前后没有括号的子字符串（id）。

这是我当前的代码，非常简单：

```
'deal[ptions_attributes][0][price]'.replace(/\[\d+\]/, '[new_id]'));
result: deal[ptions_attributes][new_id][price] 
```

所以我真的不会在新 id 中使用括号 - '[new_id]' 来替换子字符串。有没有办法在替换并保持干净的 'new_id' 时忽略第一个 '[' 括号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:17:50.483

这假设没有其他字符串`[...]`以数字结尾

```
/\d+(?=\])/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:15:53.113

您可以通过环视来做到这一点：

```
/(?<=\[)\d+(?=\])/ 
```

将匹配括号之间的数字，该数字必须存在才能使匹配成功，但不会成为匹配的一部分。

但正如评论中所说，后面的 (`(?<=...)`在 javascript 中不起作用。所以我不确定你想要的是否可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:32:49.057

你可以试试这样的。

```
'deal[ptions_attributes][0][price]'.replace(
    /(\[)\d+(\])/,
    function(matchedString,firstCaptureGroup,secondCaptureGroup){
        return firstCaptureGroup + 'new_id' + secondCaptureGroup;
    }
); 
```

You're basically capturing the "[" and "]" in capture groups and then putting them back into the output. This ensures that you capture the correct content but doesn't end up forcing you to include the brackets in your output string. You could easily extend this to match any strings before and after the ID you want to replace.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:36:04.977

I am unsure as to the exact nature of your problem but can you not use :

```
 '[' + 'new_id' + ']' 
```

This allows you to use a variable in place of `'new_id'` which may be your intent.

# jquery - jQuery 日期选择器样式

> ID：13744225
> 
> 赞同：1
> 
> 时间：2012-12-06T13:05:23.847
> 
> 标签：jquery, css, datepicker

在我的页面[http://pagina.chalupakoseckerovne.sk/](http://pagina.chalupakoseckerovne.sk/)在上一节中，我使用了 jQuery Datepicker 内联。但是我的样式有问题，即使更改该 div 的 css 也是如此。它仍然继承。

```
#rezervovane
{
    font: 16px/24px Georgia, "Times New Roman", Times, serif !important;
    text-transform:none !important;
    vertical-align:auto !important;
    float:none !important;
} 
```

我还在左侧、第 6 和第 7 个输入的表单中使用了 Datepicker，但样式还可以。你能拦住我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:14:26.193

我发现大多数问题发生`layout.css`在`line: 171`

注释掉以下 CSS 可以解决大部分问题

```
.contact-section span {
  float: right;
  font-family: "Oswald", sans-serif;
  font-weight: normal;
  text-transform: uppercase;
  padding-top: 10px;
} 
```

尝试找到一种不会影响 DatePicker css 的方式来重写上面的 CSS

# java - JSP 在按钮单击时运行方法

> ID：13744227
> 
> 赞同：0
> 
> 时间：2012-12-06T13:05:24.907
> 
> 标签：java, javascript, jsp, netbeans, scriptlet

我抬头看了看，即使有类似的问题和答案，我似乎也无法理解。问题是，当我运行一个包含 JavaScript 的 jsp 文件时，它会在我启动页面时运行，而不是在设置的表单上运行 onClick="..."; 另外，我知道我正在使用不鼓励使用的 scriptlet，但我对 jsp 完全陌生，所以我不知道如何为它创建类。我正在使用 Netbeans。

```
<script LANGUAGE="JavaScript">
function connect(){
<% ConnectToServer(); %>
};

function startApp(){
<% InvokeStartApplicationInstance(); %>   
<% InvokeStartApplication(); %>  
};

function stopApp(){
<% InvokeShutdownApplication(); %> 
};
</script>

<FORM name="myform">
    <INPUT NAME="connectbtn" TYPE="button" VALUE="Connect" onClick="connect()">
     <INPUT NAME="startbtn" TYPE="button" VALUE="Start" onClick="startApp()">
      <INPUT NAME="stopbtn" TYPE="button" VALUE="Stop" onClick="stopApp()">
</FORM> 
```

`ConnectToServer();`和JavaScript中的其他方法是我在同一个jsp页面中包含的方法`<%! and %>`

问题是这些方法有效，但 JavaScript 无论如何都在页面加载上运行。因此，例如，如果最后一个`<% InvokeShutdownApplication(); %>` 在 JavaScript 中，它会执行这个，因此无法启动。我需要它来工作`onClick`。

我不知道如何直接用 Java 调用方法。下面的方法不起作用：

```
<INPUT NAME="connectbtn" TYPE="button" VALUE="Connect" onClick="<% ConnectToServer(); %>"> 
```

任何帮助都将不胜感激，因为我需要做一个基于 web 的 mbeans（它是基于 java 的）应用程序，它让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:09:10.160

发生这种情况的原因是，在解析 JSP 时，运行嵌入的 Java 代码，并将结果替换为最终的 HTML。您在这里要做的是对服务器进行 Ajax 回调，以使其调用您想要的方法。恐怕它会比你所拥有的要复杂一些。我建议查看[jQuery 及其 Ajax API](http://api.jquery.com/jQuery.ajax/)。

# pdf - 替换 PDF 文件中的重复图像

> ID：13744228
> 
> 赞同：1
> 
> 时间：2012-12-06T13:05:31.023
> 
> 标签：pdf, itext

我正在尝试用 PDF 文件中的可用图像替换重复的图像，但结果已损坏。 `PdfReader.KillIndirect`将重复图像归零，但`writer.AddDirectImageSimple`不会将其替换为先前可用图像的引用。这里有什么问题？

这是代码：

```
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Security.Cryptography;
using System.Text;
using iTextSharp.text;
using iTextSharp.text.pdf;

namespace ReplaceDuplicateImages
{
    class Program
    {
        /// <summary>
        /// Adding one image, 2 times.
        /// </summary>
        private static void createSampleFile()
        {
            using (var pdfDoc = new Document(PageSize.A4))
            {
                var pdfWriter = PdfWriter.GetInstance(pdfDoc, new FileStream("Test.pdf", FileMode.Create));
                pdfDoc.Open();

                var table = new PdfPTable(new float[] { 1, 2 });
                table.AddCell(Image.GetInstance("01.png")); 
                table.AddCell(Image.GetInstance("01.png"));
                pdfDoc.Add(table);
            }
        }

        private static void RemoveDuplicateImagesFromPdfFile(string inFile, string outFile)
        {
            var pdfReader = new PdfReader(inFile);
            var pdfStamper = new PdfStamper(pdfReader, new FileStream(outFile, FileMode.Create));
            var writer = pdfStamper.Writer;

            var md5Service = new MD5CryptoServiceProvider();
            var enc = new UTF8Encoding();
            var imagesDictionary = new Dictionary<string, PRIndirectReference>();

            int pageNum = pdfReader.NumberOfPages;
            for (int i = 1; i <= pageNum; i++)
            {
                var page = pdfReader.GetPageN(i);
                var resources = PdfReader.GetPdfObject(page.Get(PdfName.RESOURCES)) as PdfDictionary;
                if (resources == null) continue;

                var xObject = PdfReader.GetPdfObject(resources.Get(PdfName.XOBJECT)) as PdfDictionary;
                if (xObject == null) continue;

                foreach (var name in xObject.Keys)
                {
                    var pdfObject = xObject.Get(name);
                    if (!pdfObject.IsIndirect()) continue;

                    var imgObject = PdfReader.GetPdfObject(pdfObject) as PdfDictionary;
                    if (imgObject == null) continue;

                    var subType = PdfReader.GetPdfObject(imgObject.Get(PdfName.SUBTYPE)) as PdfName;
                    if (subType == null) continue;

                    if (!PdfName.IMAGE.Equals(subType)) continue;

                    var imageBytes = PdfReader.GetStreamBytesRaw((PRStream)imgObject);
                    var md5 = enc.GetString(md5Service.ComputeHash(imageBytes));

                    if (!imagesDictionary.ContainsKey(md5)) // is it duplicate?
                    {
                        imagesDictionary.Add(md5, (PRIndirectReference)pdfObject);
                    }
                    else
                    {
                        PdfReader.KillIndirect(pdfObject); // nulls the duplicate image

                        // trying to replace it with the reference of the available image
                        var imageRef = imagesDictionary[md5];
                        var image = Image.GetInstance(imageRef);
                        Image maskImage = image.ImageMask; // it's always null here.
                        if (maskImage != null)
                            writer.AddDirectImageSimple(maskImage);
                        writer.AddDirectImageSimple(image, (PRIndirectReference)pdfObject);
                    }
                }
            }

            pdfReader.RemoveUnusedObjects();
            pdfReader.Close();
            pdfStamper.Close();
        }

        static void Main(string[] args)
        {
            createSampleFile();
            RemoveDuplicateImagesFromPdfFile("test.pdf", "Optimized.pdf");
            Process.Start("Optimized.pdf");
        }
    }
} 
```

我知道`PdfCopy`和`PdfSmartCopy`。我不想使用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:13:48.167

如果您想删除冗余信息（重复的图像、重复的 XObject、重复的字体，...），请不要通过尝试使用 iTextSharp 的低级功能来重新发明轮子。请改用 PdfSmartCopy，它会为您完成所有困难的工作。

您的代码的主要问题是您删除了重复的图像，但您从未更新对这些图像的引用。通过这样做，您破坏了 PDF。

假设您有一个 PDF，其中包含两个相同（按字​​节）的图像，并且冗余存储（相同的字节在 PDF 中出现两次）。假设对象具有以下引用：（`10 0 R`第一个图像）和`20 0 R`（第二个图像）。

您循环遍历每个页面的 Image XObject，然后遇到`10 0 R`. 您*保留*该图像，并存储它的 MD5 哈希：

```
imagesDictionary.Add(md5, (PRIndirectReference)pdfObject); 
```

然后你遇到`20 0 R`。您会发现此图像与 相同，`10 0 R`因为这两个图像的 md5 哈希对应。您删除该图像`20 0 R`：

```
PdfReader.KillIndirect(pdfObject); 
```

然后你做了一些非常奇怪的事情。不是将复制图像`20 0 R`的引用 ( ) 更改为图像的第一个实例的引用 ( `10 0 R`)，而是获取第一个实例 ( `image`) 并使用其原始引用 ( `10 0 R`) 重新添加它：

```
writer.AddDirectImageSimple(image, (PRIndirectReference)pdfObject); 
```

换句话说：您尝试向 PDF 添加第二个对象编号为 10 的对象，这是非法的（每个对象编号都是唯一的）。iText 将忽略该行；它只会返回`PdfName`用于图像的原件。

最终，您会得到一个 PDF，其中包含一个正确引用`10 0 R`的图像和一个引用的图像，该图像引用了`20 0 R`一个不再存在的对象，因为您删除了对象编号为 20 的图像。

这解释了您遇到的问题，您将其描述为：

> “结果已损坏”。第一张图片没问题，但第二张完全消除了，Adobe 阅读器显示有关此损坏文件的错误消息。

# elasticsearch - 弹性搜索_时间戳

> ID：13744233
> 
> 赞同：9
> 
> 时间：2012-12-06T13:05:57.420
> 
> 标签：elasticsearch, elasticsearch-mapping

我试图`_timestamp`在索引上定义属性。所以首先，我创建索引

`curl -XPUT 'http://elasticsearch:9200/ppe/'`

来自服务器的响应：`{"ok":true,"acknowledged":true}`

然后我尝试用`_timestamp`

```
curl -Xput 'http://elasticsearch:9200/ppe/log/_mapping' -d '{
  "log": {
    "properties": {
      "_ttl": {
        "enabled": true
      },
      "_timestamp": {
        "enabled": true,
        "store": "yes"
      },
      "message": {
        "type": "string",
        "store": "yes"
      },
      "appid": {
        "type": "string",
        "store": "yes"
      },
      "level": {
        "type": "integer",
        "store": "yes"
      },
      "logdate": {
        "type": "date",
        "format": "date_time_no_millis",
        "store": "yes"
      }
    }
  }
}' 
```

我从服务器收到答案

```
{
  "error": "MapperParsingException[No type specified for property [_timestamp]]",
  "status": 400
} 
```

我的映射有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T13:36:17.690

必须在与对象相同的级别上定义特殊字段，例如`_ttl`和：`_timestamp``properties`

```
curl -Xput 'http://elasticsearch:9200/ppe/log/_mapping' -d '{
    "log": {
        "_ttl": {
            "enabled": true
        },
        "_timestamp": {
            "enabled": true,
            "store": "yes"
        },
        "properties": {
            "message": {
                "type": "string",
                "store": "yes"
            },
            "appid": {
                "type": "string",
                "store": "yes"
            },
            "level": {
                "type": "integer",
                "store": "yes"
            },
            "logdate": {
                "type": "date",
                "format": "date_time_no_millis",
                "store": "yes"
            }
        }
    }
}
' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-27T13:08:29.840

请注意，虽然`_timestamp`是在顶层定义的，但它会在内部返回`fields`：

```
curl 'http://localhost:9200/myindex/mytype/AUqL0PW7YDMmKSIKO1bk?pretty=true&fields=_timestamp'
{
  "_index" : "myindex",
  "_type" : "mytype",
  "_id" : "AUqL0PW7YDMmKSIKO1bk",
  "_version" : 1,
  "found" : true,
  "fields" : {
    "_timestamp" : 1419684935099
  }
} 
```

请注意，`_timestamp`必须由`fields=_timestamp`or明确请求`fields=_timestamp,_source`。

请注意，`_timestamp`仅当该字段标记为 时才能返回`'store': true`。但是有一种方法可以在按 排序时访问此值`_timestamp`，如下所示：

```
curl 'http://localhost:9200/myindex/mytype/_search?pretty=true' -d ' 
   { "sort": [ "_timestamp" ], "size": 1}
 ' 
```

给出结果：

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 3,
    "max_score" : null,
    "hits" : [ {
       "_index" : "myindex",
       "_type" : "mytype",
       "_id" : "AUqL0PDXYDMmKSIKO1bj",
       "_score" : null,
       "sort" : [ 1419684933847 ]
     } ]
  }
} 
```

现在`sort[0]`是第一个（在这种情况下也是唯一一个）排序值的值：`_timestamp`. 以这种方式使用时`_timestamp`不必标记为。`"store": true`

# jquery - 语法错误 else {，这是什么意思？

> ID：13744236
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:06:08.557
> 
> 标签：jquery

当它在下面的代码中一直说 else { 时，我不太会遇到这种语法错误：

```
$(document).ready(function () {

    var courseinfo = <?php echo json_encode($courseInfo);?> ;

    $('#coursesDrop').change(function () {
        var courseId = $(this).val();

        /*
            You only need to do all of this if user selects a course, so check that first.
        */
        if (courseId !== '') {
            /*
                Iterate over courses and, if the one we want exists, populate its info.
            */
            for (var i = 0, l = courseinfo.length; i < l; i++) {
                if (courseinfo[i].CourseId == courseId) {
                    $('#currentDuration').val(courseinfo[i].Duration);
                    $('#newDuration').val(courseinfo[i].Duration);
                    $('#currentCourseId').val(courseinfo[i].CourseId);
                    $('#newCourseId').val(courseinfo[i].CourseId);

                    var text = $(this).find('option:selected').text();
                    var split = text.split(' - ');
                    $('#currentCourseNo').val(split[0]);
                    $('#currentCourseName').val(split[1]);

                    /*
                        Without this break, the loop will continue until i = l.
                        We've already found our match, no need to continue.
                    */
                    break;
                }
            }
        } else {
            $('#currentCourseNo,#currentCourseName,#currentDuration,#currentCourseId').val('');
        }
    });
}); 
```

括号似乎是正确的，但为什么我在上面的代码中会出现这个语法错误？

确切的错误说`Syntaxerror: syntax error`，然后在视图页面源中它只是突出显示 this `else{`。

`var courseinfo = <?php echo json_encode($courseInfo);?> ;`在页面源代码中输出以下内容：

```
var courseinfo = [{"CourseId":1,"CourseNo":"INFO101","CourseName":"Bsc Information Communication Technology","Duration":"4"},{"CourseId":2,"CourseNo":"INFO102","CourseName":"Bsc Computing","Duration":"3\/4"},{"CourseId":8,"CourseNo":"INFO103","CourseName":"Business and Finance","Duration":"3"},{"CourseId":9,"CourseNo":"INFO107","CourseName":"Mathematics","Duration":"4"}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:11:22.950

您应该在浏览器中打开页面，得到错误，然后查看源代码以查看浏览器的实际内容。

可能的罪魁祸首是这一行：

```
var courseinfo = <?php echo json_encode($courseInfo); ?> ; 
```

三种可能：

1.  ~~我不是 PHP 专家，`<? php`（后面有空格`?`）真的是有效的开始标签（而不是`<?php` **没有**空格）吗？因为如果不是，则可能是 PHP 没有处理它，因此文本被逐字发送到浏览器。这自然会成为一个问题。~~你声称这个空间并不真的存在。

2.  ~~如果不是这样，我怀疑`$courseInfo`在 PHP 中不是您所期望的那样，因此无法正确获得输出。~~您现在已经引用了输出的内容，这是一个有效的数组文字。

3.  ~~如果您引用的文本不在 PHP 将预处理的文件中，那将是一个问题，因为代码将被发送到浏览器。通常，Web 服务器被配置为使用 PHP 来预处理`.php`文件，而不是`.js`文件。因此，如果您引用的文本在`.js`文件中，它将按原样（其中包含 PHP 代码）进入浏览器，这可能不是您想要的。~~我猜你已经将输出引用为已处理，它必须进行预处理。

4.  我最后的想法是，您的文本`else`中有问题附近的隐形字符。尝试删除整行（可能是两边的几行，以防万一）并重新输入（小心）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T13:13:12.980

如果评论中和 TJ Crowder 显示的行确实在您的 javascript 中，请返回您的`php`脚本并删除空格`<? php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:21:53.493

我不能确定问题所在......因为你不显示任何 html 行......但是你想试试这个代码：

```
$(function(){
var courseinfo = <?php echo json_encode($courseInfo);?>;
$('#coursesDrop').change(function(){
    var courseId = $(this).val();

    /*
        You only need to do all of this if user selects a course, so check that first.
    */
    if (courseId != ''){
        /*
            Iterate over courses and, if the one we want exists, populate its info.
        */
        for (i = 0;i < courseinfo.length;i++){
            if (courseinfo[i].CourseId == courseId){
                $('#currentDuration').val(courseinfo[i].Duration);
                $('#newDuration').val(courseinfo[i].Duration);
                $('#currentCourseId').val(courseinfo[i].CourseId);
                $('#newCourseId').val(courseinfo[i].CourseId);

                var text = $(this).find('option:selected').text();
                var split = text.split(' - ');
                $('#currentCourseNo').val(split[0]);
                $('#currentCourseName').val(split[1]);

                /*
                    Without this break, the loop will continue until i = l.
                    We've already found our match, no need to continue.
                */
                break;
            }
        }
    } else {
        $('#currentCourseNo,#currentCourseName,#currentDuration,#currentCourseId').val('');
    }
    });
}); 
```

如果它不起作用，我说对不起好吧....祝你好运

# django - 当创建图像的函数需要参数（如坐标列表）时，如何在模板上显示动态图像？

> ID：13744240
> 
> 赞同：2
> 
> 时间：2012-12-06T13:06:24.050
> 
> 标签：django

***简而言之问题：***

当创建图像的函数需要参数时，如何在模板上显示动态图像，例如任意长的坐标列表..？

*例如`<img src="{% url getComplexImg coords %}"/>`，其中 coords 是由整数或整数元组组成的任意长度的列表，getComplexImg 是一个视图，它以 HttpResponse 的形式返回图像，其中 mimetype 是 image/png，并且图像是使用坐标列表生成的。*

**编辑：**我在底部添加了一个解决方案（受第一个答案的启发）。

***问题，长版本***

以下是我正在尝试做的事情的简化

网址.py：

```
urlpatterns = patterns('',
    url(r'^getSimpleImg$', views.getSimpleImg, name='getSimpleImg'),
    url(r'^getComplexImg$', views.getComplexImg, name='getComplexImg'),
    url(r'^showAllImgs$', views.showAllImgs, name='showAllImgs')
    ) 
```

视图.py：

```
...
from django.template import Context, loader
...

def getSimpleImg(request):
    return HttpResponse(getImg.simple(), mimetype="image/png")

def getComplexImg(request, coords_1, coords_2):
    return HttpResponse(getImg.complex(coords_1,coords_2), mimetype="image/png")

def showAllImgs(request):
    coords_1, coords_2 = data_module.get_all_coordinates()
    context = Context({
        'coords_1':coords_1,
        'coords_2':coords_2})
    template = loader.get_template('showall.html')
    return HttpResponse(template.render(context)) 
```

'data_module.get_all_coordinates()' 只是一个返回两个任意长度列表的方法（这些列表可以包含整数或整数元组）。

showall.html：

```
<html>
...
<img src="{% url getSimpleImg %}"/>
<img src="{% url getComplexImg coords_1 coords_2 %}"/>
...
</html> 
```

让 Django 显示从“getSimpleImg”返回的图像非常容易，因为它不需要任何列表参数。但是我正在努力让 Django 显示复杂的图像，因为我不知道如何将任意列表作为模板的参数传递。

上面的代码显然不起作用，因为 Django 无法在 urls.py 中查找 '{% url getComplexImg coords_1 coords_2 %}'。

**这种问题应该如何解决？**

例如，我应该以某种方式发送带有上下文的图像吗？像：

视图.py：

```
...
def showAllImgs(request):
coords_1, coords_2 = data_module.get_all_coordinates()
context = Context({
    'img_1':getImg.simple(),
    'img_2':getImg.complex(coords_1,coords_2)})
template = loader.get_template('showall.html')
return HttpResponse(template.render(context)) 
```

showall.html：

```
<html>
...
<img src="{{ img_1 }}"/>
<img src="{{ img_2 }}"/>
...
</html> 
```

（以上不起作用，只是为了说明我的意思）

或者我应该以某种方式将我需要的所有东西导入模板，然后从那里创建和显示图像..？像：

showall.html：

```
{% import data_module %}
{% import getImg %}
<html>
...
<img src="{% getImg.simple() %}"/>
<img src="{% getImg.complex(data_module.get_all_coordinates()) %}"/>
...
</html> 
```

# 解决方案，灵感来自第一个答案

我现在通过将上下文传递为来解决它：

`Context({'coords_1':"_".join([str(v) for v in coords_1])})`

并在 urls.py 中捕获 url：

`url(r'^getComplexImg/(?P<coords_1>[0-9_\-]+)/$', views.getComplexImg, name='getComplexImg')`

在我的 getComplexImg 视图中，我将字符串列表转换回真实列表：

```
coords_1 = [int(v) for v in coords_1.split('_')] 
```

*它有效，我现在很满意，但我有一种不好的感觉，这可能不是最佳解决方案*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:10:18.863

看起来你`urls.py`的格式不正确。

您可以通过您的网址传递变量。`url()`通过使用正确的语法（变量作为正则表达式），您可以在调用or时引用这些变量`{% url %}`，就像您尝试做的那样。

这个简单的例子来自这里： http: [//www.djangobook.com/en/2.0/chapter08.html#using-default-view-arguments](http://www.djangobook.com/en/2.0/chapter08.html#using-default-view-arguments)

网址.py

```
urlpatterns = patterns('',
    (r'^blog/$', views.page),
    (r'^blog/page(?P<num>\d+)/$', views.page),
) 
```

视图.py

```
def page(request, num='1'):
    # Output the appropriate page of blog entries, according to num.
    # ... 
```

这里重要的是：**`(?P<num>\d+)`**

然后，您可以将任何内容传递`<here>`给您的视图函数，例如：`def my_view(request, here): ...`

在您的情况下，您将替换以下内容：

```
url(r'^getSimpleImg$', views.getSimpleImg, name='getSimpleImg'),
... 
```

对于这样的事情：

```
url(r'^getSimpleImg/(?P<coord1>\d+)/(?P<coord2>\d+)/$', views.getSimpleImg, name='getSimpleImg'),
... 
```

你很多人不想在你的 url 中使用命名变量，但如果是这种情况，你不能使用`{% url %}`任何一个并且需要找到另一个解决方案。

# asp.net-mvc - 在 mvc 的弹出窗口中显示图像

> ID：13744241
> 
> 赞同：1
> 
> 时间：2012-12-06T13:06:31.710
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4, aspose

我正在使用 aspose 生成 word 文档，我想在用户决定保存文档之前向他们展示某种预览。我有一个视图，用户可以在其中输入他们的信息：

```
@model WordAutomation.Models.Document

@{
    ViewBag.Title = "Document";
}

<h2>Document</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Document</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.ClientTitle)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ClientTitle)
            @Html.ValidationMessageFor(model => model.ClientTitle)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ClientFullName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ClientFullName)
            @Html.ValidationMessageFor(model => model.ClientFullName)
        </div>      

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Preview", "Preview")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

现在我有了预览控制器：

```
 public ActionResult Preview()
        {
            return View();
        } 
```

当用户单击预览时，我想生成 word 文档（该部分已经完成）并将其显示为用户屏幕上的弹出窗口。一旦我进入预览控制器，我需要的是如何在屏幕上显示图像。这有可能吗？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:17:59.983

您可以使用 jquery ui 对话框来创建一个模态并像这样使用它。不要使用 Access [http://ui.jquery.com](http://ui.jquery.com)的弹出窗口来下载库并在您的应用程序上引用。

在您看来，您可以添加此代码来创建对话框模式并从服务器加载它：

```
<script type="text/javascript">
    $(function () {
        $('#previewDocumentDialog').dialog({
            autoOpen: false,
            resizable: false,
            title: 'Preview',
            modal: true,
            width: 400,
            height: 500,
            open: function(event, ui) {
                //Load the PreviewWordDocument action which will return a partial view called _PreviewWordDocument
                $(this).load("@Url.Action("PreviewWordDocument")"); //add parameters if necessary
            },
            buttons: {
                "Close": function () {
                    $(this).dialog("close");
                }
            }
        });

        // an event click for you preview link to open the dialog
        $('#previewLink').click(function () {
            $('#previewDocumentDialog').dialog('open');
        });
    });
</script> 
```

创建一个 Div 和您的链接预览，添加一个 id 以创建/打开 jquery ui 的对话框

```
<div id="previewDocumentDialog" title="Preview" style="overflow: hidden;">

<div>
    @Html.ActionLink("Preview", "Preview", null, new { id = "previewLink" })
</div> 
```

在你的控制器上，你需要有一个动作来返回这个 PartialView

```
public ActionResult PreviewWordDocument(/*add parameters if necessary*/) {  
    var model = "path of your word image";  
    return PartialView("_PreviewWordDocument", model);
} 
```

您可以使用字符串上的图像路径键入您的 partialView

```
@model string

<img src="@model" style="width:400;height:500px;" /> 
```

并记住[不要使用浏览器的弹出窗口。](http://uxmovement.com/forms/why-modal-windows-have-killed-popup-windows/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:16:17.930

[您可以使用JQuery Lightbox](http://leandrovieira.com/projects/jquery/lightbox)之类的东西来显示图像，该操作使用返回您创建[的预览图像作为图像源的 href 的操作。](https://stackoverflow.com/questions/186062/can-an-asp-net-mvc-controller-return-an-image)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:31:56.970

如果您使用模式而不是弹出窗口，则可以使用 javascript 或 jquery 触发它（如果您愿意）。[JQuery Modal](http://jqueryui.com/dialog/#modal)是一个不错的选择。

[然后，您可以使用JQuery](http://api.jquery.com/clone/)克隆您想要显示的内容的 html，并为您的模态 div 使用不同的 CSS 样式。

# php - 通过 JSONP 检查会话 Cookie

> ID：13744247
> 
> 赞同：0
> 
> 时间：2012-12-06T13:06:58.340
> 
> 标签：php, javascript, jquery, ajax, bookmarklet

我创建了一个书签，当单击时从页面中提取所有图像并`src`通过 JSONP 将 img 发送回另一个（远程）服务器。

**问题：**远程服务器必须检查会话身份验证 cookie 以确保发送 JSONP 请求的用户在将 img 添加`src`到数据库之前已登录。我可以通过 JSONP 检查会话 cookie，现在如果用户未登录并且我希望此时允许用户登录，我应该如何显示登录屏幕？

此外，通过 JSONP 检查会话 cookie 是否存在任何安全风险？

**书签的 jQuery**

*我`.getJSON`用来做 JSONP 的方式可能是错误的`*

```
$('.thing').on('click', function() {
    var jsonp_url = 'http://mydomain.com/bookmark.js?callback=?';
    var data = {
        type: 'addToLibrary',
        thingImgSrc: 'http://google.com/someimage.jpg';
    };
    $.getJSON(jsonp_url, data, function(resp) {
        // console.log('done');
    });
}); 
```

**登录时的服务器响应**

```
addToLibrary(["1"]) 
```

**未登录时的服务器响应**

```
addToLibrary(["0"]) 
```

**回调函数**

```
addToLibrary = function(data) {
    if(data == '0') {
        // show login screen
    } else {
        // show OK screen
    }
} 
```

**用户登录的想法**

1.  收到`["0"]`指示错误后，弹出一个显示登录表单的窗口，登录将正常完成，因为弹出窗口包含来自远程服务器的页面。
2.  在收到`["0"]`错误提示时，在当前页面上弹出一个包含登录表单的 AJAX 样式模式框，登录将通过 JSONP 完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:15:12.570

为什么不寄回一个对象？

```
addToLibrary( { "result" : ["registereduser@gmail.com"] } );
addToLibrary( { "error" : true, message : "must log in"  } ); 
```

在您的函数中，您检查错误或结果并以这种方式处理它。不知道零是什么。

```
function addToLibrary(resp) {
    if (resp.error) {
        showLoginPrompt();
    } else {
        addItems(resp.result);
    }
} 
```

# iphone - iPad和网站的自动调整大小/重新缩放

> ID：13744251
> 
> 赞同：2
> 
> 时间：2012-12-06T13:07:06.200
> 
> 标签：iphone, ios, ipad

当我设计一个不流畅/不响应的网站然后在 iPad 上查看该网站以了解我看到的不同结果时，我总是有点困惑。

我想知道 iPad 究竟是如何调整/缩放网站的？

一位开发人员在一次讨论中告诉我，如果您说创建一个 1200 像素宽的网站，那么您无需担心，因为 iPad 会自动缩放。通过这种缩放，我的意思是整个站点将始终可见，无需水平滚动。

有时这往往是这种情况，但是当您查看同一站点的某些页面时，情况并非如此。

哪些页面正确显示，哪些页面显示不正确，这似乎有点随机，这可能非常令人沮丧。

基于上述情况，我想再极端一点，我希望一个 4000 像素的网站在 iPad 上水平显示，即使内容非常小并且需要放大以使其清晰可见。这是一个正确的假设吗？

当方向改变时，网站上似乎还有一些自动缩放，这又很烦人。对此有解释吗？

最后，我阅读了很多关于禁用夹点的解决方案。这对于 iPad 来说似乎很好，但对于 iPhone 来说就更棘手了，因为几乎所有用户都需要缩放才能使内容清晰易读。是否可以为一个设备禁用它而不是另一个？

感谢所有输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:15:20.960

重击

```
<meta name = "viewport" content = "initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no, width = device-width"> 
```

在您的 HTML`<head>`中。它告诉设备不要缩小它。

您可以使用 PHP 来确定设备并在必要时切换该行代码。

# vbscript - 安装期间未启动 Vbs 脚本

> ID：13744257
> 
> 赞同：2
> 
> 时间：2012-12-06T13:07:22.380
> 
> 标签：vbscript, wix, wix3.6

我目前是 Wix 的新手，并且在安装过程结束时应该运行的 vbs 脚本遇到问题。

到目前为止我有什么：

我能够将几个文件和注册表调用插入到我的 msi 文件中。安装过程正常，所有文件都存储在适当的文件夹中，并且正在更新注册表。现在，我试图在安装过程结束时调用一个 vbs 脚本。脚本本身并没有什么特别之处，对于初学者来说，它应该只是显示一个消息框。

我在本文档之前创建了一个自定义操作（自定义操作类型 6）：http: [//blogs.technet.com/b/alexshev/archive/2008/02/21/from-msi-to-wix-part-5-自定义actions.aspx](http://blogs.technet.com/b/alexshev/archive/2008/02/21/from-msi-to-wix-part-5-custom-actions.aspx)

运行 msi 文件时显示以下内容：

'此 Windows 安装程序包有问题。无法运行完成此安装所需的脚本。联系您的支持人员或包裹供应商。

我试图在 wix 中实现和运行脚本，如下所示：

```
<Binary Id="dasd" SourceFile="C:\Dokumente und Einstellungen\administrator\Desktop\dasd.vbs" />
<CustomAction Id="DoSomething" BinaryKey="dasd" HideTarget="no" Impersonate="no" VBScriptCall="" Execute="deferred" Return="check" />
    <InstallExecuteSequence>
        <Custom Action="DoSomething" Before="InstallFinalize" />
    </InstallExecuteSequence> 
```

属性“VBScriptCall”以前的值为“Main”。我删除了它，因为我没有使用名为“Main”的函数。我认为“主要”只会运行完整的脚本。但是，它既不能与“Main”一起使用，也不能与它一起使用。

我的印象是文件系统上不需要脚本文件（在执行 msi 文件期间）。我可能错了吗？

可能有人知道这里出了什么问题吗？

最好的问候，马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:57:17.340

您的假设是错误的：“我的印象是文件系统上不需要脚本文件（在执行 msi 文件期间）。我可能错了吗？”

该文件需要存在于文件系统中。使用您的 WIX 脚本将其复制到特定位置，然后一切都应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:17:14.707

最后，我能够解决问题。vbs 脚本的路径错误：

```
<Binary Id="dasd" SourceFile="C:\Dokumente und codeEinstellungen\administrator\Desktop\dasd.vbs" /> 
```

我错误地将 wxs 文件中的路径编辑为“C:\Dokumente und Einstellungen[...]\dasd.vbs”。WixEdit 只是将其设置为“dasd.vbs”，在这种情况下是正确的。

也许有人可能会发现这很有帮助，并且不必搜索太长时间来解决此案；-)。

最好的问候，马库斯

# nvd3.js - 在 Nvd3.js 中使用图像作为标签

> ID：13744259
> 
> 赞同：0
> 
> 时间：2012-12-06T13:07:27.560
> 
> 标签：nvd3.js

我想使用图像代替文本标签绘制带有 Nvd3 的离散条形图。可能吗 ？如果是这样，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:13:21.820

我认为这是不可能的，但您可以直接使用 d3 将图像放在任何您想要的位置，例如：

```
d3.select("#chart1 svg").append("svg:image")
        .attr("xlink:href", "img/20.png")
        .attr("width", 70)
        .attr("height", 105)
        .attr("x", 160)
        .attr("y",100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T11:24:10.783

它不是 API 的一部分，但你可以破解它。

例如，要将 x-labels 替换为图像，请执行以下操作：

```
d3.selectAll('#yourChartId svg .nv-x.nv-axis.nvd3-svg g g g.tick')
  .select('text')
  .remove();

d3.selectAll('#yourChartId svg .nv-x.nv-axis.nvd3-svg g g g.tick')
  .append('svg:image')
  .attr('xlink:href', 'images/myimage.png')
  .attr('width', 40)
  .attr('height', 40); 
```

# html - 为什么在 iFrame 中加载的网页在 Internet Explorer 7 中没有应用 css

> ID：13744265
> 
> 赞同：7
> 
> 时间：2012-12-06T13:07:54.503
> 
> 标签：html, css, internet-explorer, iframe

我有一个网页，里面有很多 CSS。我使用 iframe 来加载它。它几乎在每个浏览器上都能完美运行，但在 IE 版本 7 上根本没有应用 CSS。当我在 IE7 下的单独选项卡中打开页面时，它可以工作，但是 iframe 甚至没有应用一行 CSS？

谁能给我一些从哪里开始搜索的提示？

任何帮助将不胜感激。

编辑：主网页具有以下文档类型：

```
!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd" 
```

我不确定这是否属实，但我读过严格的文档类型可能会导致旧浏览器上的 iframe 出现问题。这会破坏框架的css吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:11:42.530

尝试

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/> 
```

我用这个解决了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T18:36:57.303

CSS 信息不会级联到 iframe。您需要将 CSS 引用添加到放入 iframe 的页面上。将 CSS 放入页面的一些方法包括：

## 带有样式标签

```
<style type="text/css">
h1 {color:red;}
p {color:blue;}
</style> 
```

使用 iframe，您将不得不一遍又一遍地复制它。（不建议）

参考：[http ://www.w3schools.com/tags/tag_style.asp](http://www.w3schools.com/tags/tag_style.asp)

## 参考样式表

```
<link rel="stylesheet" type="text/css" href="theme.css"> 
```

使用 iframe，您只需将链接部分复制到`<head>`页面区域

参考：[http ://www.w3schools.com/tags/tag_link.asp](http://www.w3schools.com/tags/tag_link.asp)

这不是 IE7 的事情。这适用于所有支持 CSS 的浏览器

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T07:20:21.593

1）希望iframe标签正确关闭

```
<IFRAME SRC='gnagna.htm' STYLE='width:100%;'></IFRAME> 
```

使用 css 或设置宽度

```
<iframe src="somepage.htm"  frameborder=0 scrolling="auto" width="800" height="600"> This browser can not use IFRAME. </iframe> 
```

2）可以尝试使用这些

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

或者

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"> 
```

3)

您可以通过在 head 部分添加它来强制 Ie7 兼容性

```
<head>
<meta http-equiv="X-UA-Compatible" content="IE=7" />
</head> 
```

或者

更快的方法是将以下行添加到 .htaccess

```
Header set X-UA-Compatible IE=EmulateIE7 
```

4)

或者您可以为 ie7/ie6 应用 css 样式技巧

```
.somediv
{
height:30px;
*height:30px; //hack for ie7 
_height:30px; //hack for ie6
} 
```

希望能帮助到你

# android - Android 中的实时视频录制

> ID：13744267
> 
> 赞同：0
> 
> 时间：2012-12-06T13:08:02.920
> 
> 标签：android, video, recording

我们需要一个可以从相机录制实时视频并将其保存到文件的 android 应用程序。该应用程序将检测手机的纵向/横向模式，并将绘制一个矩形作为覆盖在相机的实时视频上。此矩形将始终以横向模式绘制，并且具有 16:9 的纵横比。只需要记录矩形内的内容。是否可以只记录矩形内的内容

问候萨巴里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T19:15:04.510

What you can do is record the video as the camera on the device will give it to you and you process it afterwards: either using a library on the device (might cost you a lot of battery) or off-device, on a server the app connects to. On the server you crop the video using one of the many tools out there: Virtualdub, AVI Demux, AVISynth, Xvid4PSP up to Vegas, Premiere and FCP.

"Cropping" a video means decode, and re-encode.

I have only worked with audio and maybe you find something similar to the audio APIs where you have:

*   high-level API [MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html) which does almost all the job for you (you can only change a few recording and encoding parameters)
*   low-level API [AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html) which allows live processing of the audio stream while recording.

[这个答案](https://stackoverflow.com/questions/5886872/android-audiorecord-vs-mediarecorder-for-recording-audio)解释了差异。

也许您会在视频世界中找到类似的东西。

# jquery - 带有 jquery ui datepicker 的 Knockout.js 可以在除 IE 之外的任何地方使用

> ID：13744270
> 
> 赞同：3
> 
> 时间：2012-12-06T13:08:19.973
> 
> 标签：jquery, jquery-ui, internet-explorer, knockout.js, datepicker

我使用了一个 knockout.js 模板脚本来创建一个可以复制和删除的表单。小提琴可以在[这里](http://jsfiddle.net/rniemeyer/7RDc3/)找到。

我在 SE 的帮助下编辑了脚本以添加 jquery-ui 日期选择器。可以在 [这里][2] 找到小提琴的简短版本。到目前为止一切都很好，但是在测试时我发现除了 IExplorer（各种版本）之外，一切都可以在任何浏览器中运行。

问题出在这个特定的部分，但我不知道在哪里。

```
script type='text/javascript'>//<![CDATA[ 
ko.bindingHandlers.datepicker = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var options = allBindingsAccessor().datepickerOptions || {};

        console.log("datepicker");                        
        $(element).datepicker(options);

        //handle the field changing
        ko.utils.registerEventHandler(element, "change", function () {
            var observable = valueAccessor();
            observable($(element).datepicker("getDate"));
        });

        //handle disposal (if KO removes by the template binding)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).datepicker("destroy");
        });

    }
}; 
```

现在我们也开始了。当您在框外单击时，日期选择器不会关闭。这发生在任何浏览器中。

**附加问题**

1.  我用这个（和许多其他的）来自动更正一个字段。在这种情况下，输入大写。这在第一种形式上效果很好。但不是在任何重复的表格上。

    $(".hoofdletters").keyup(function(e) { $(".hoofdletters").val(($(".hoofdletters").val()).toUpperCase()); });

2.  当我使用 uniqueName: true 时，每个字段（也是重复的表单）都将得到验证。但是我的 $_POST 名称都被重命名了。我想要原始字段名称，例如 year[] 而不是 ko_unique_1。删除 uniqueName 时有效，但重复的表单不再有效。

    [2]：http: [//jsfiddle.net/QUxyy/5/](http://jsfiddle.net/QUxyy/5/)`enter code here`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:32:03.767

1.  要使代码在 IE 上运行：删除“console.log”指令
2.  要更改日期格式，您可以定义如下绑定：

    data-bind='datepicker: beschikkingsdatum, datepickerOptions **: {dateFormat: "dd/mm/yy"}** , uniqueName: true'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T15:41:08.573

2件事：

就像我在评论中所说的那样，使用 window.console.log （或包装函数）而不是 console.log 来防止不知道控制台对象的旧浏览器出现错误。

> 我用这个（和许多其他的）来自动更正一个字段。在这种情况下，输入大写。这在第一种形式上效果很好。但不是在任何重复的表格上。

代替：

```
$(".hoofdletters").keyup(function(e) { $(".hoofdletters").val(($(".hoofdletters").val()).toUpperCase()); }); 
```

和 ：

```
$(".hoofdletters").on('keyup', '#<some root element>', function(e) { $(".hoofdletters").val(($(".hoofdletters").val()).toUpperCase()); }); 
```

这样您就可以保证将来的元素接收到 keyup 处理程序。需要根元素来限制 on 函数的 DOM 监视范围。理想情况下，这将是一个`DIV`元素

# python - 如果 var 不存在，则 Python

> ID：13744276
> 
> 赞同：0
> 
> 时间：2012-12-06T13:08:34.190
> 
> 标签：python, if-statement, imap, imaplib

我正在开发一些 IMAP 检查器。现在收件箱计数以以下布局打印一条消息：[' *number* ']。

现在该数字被拆分为 var num 中的*数字*。请参阅以下代码：

```
for num in data[0].split():
    print num 
```

现在的问题是，如果没有任何新电子邮件 num 不存在，那么我想要这样的 if 语句：

```
if <num doesn't exist>: print "No new emails found." 
```

但是那个 if 语句应该是什么样子的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:20:10.077

实现您似乎想要的最pythonic方法是：

```
nums = data[0].split()
for num in nums:
   print num
if not nums:
   print "No new emails found" 
```

因为代码准确地反映了意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:10:19.573

检查[这个站点](http://code.activestate.com/recipes/59892-testing-if-a-variable-is-defined/)，他们有一个有用的片段来检查变量是否存在或者它是否为无：

```
# Ensure variable is defined
try:
   num
except NameError:
   num = None

# Test whether variable is defined to be None
if num is None:
    some_fallback_operation()
else:
    some_operation(num) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:14:32.587

检查拆分数据的大小并将其用作您的条件：

```
for num in data[0].split():
    print num
if len(data[0].split()) == 0:
    print "No new emails found." 
```

更优雅的方式：

```
for num in data[0].split():
    print num
if not data[0].split():
    print "No new emails found." 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:24:13.507

我会做

```
num = None
for num in data[0].split(): 
    print num
if num is None:
    print "No new emails found." 
```

如果`None`是有效的数据部分，请使用

```
num = sentinel = object()
for num in data[0].split(): 
    print num
if num is sentinel:
    print "No new emails found." 
```

反而。

# sql - 查询包含 CLOB 数据类型的两个表

> ID：13744282
> 
> 赞同：1
> 
> 时间：2012-12-06T13:08:48.733
> 
> 标签：sql, oracle, clob

我有两张桌子：`Table1`和`Table2`。`Table1`有列`RECORDID`,`DATASOURCETYPE`和`STRINGCLOB`, 而`Table2`有 列`RECORDID`,`TIMESTAMP`和`CLICKTYPE`. 我编写了一个查询来从`STRINGCLOB`列中查找 clob XML 字符串“book”，前提是它与给定的 匹配`DATASOURCETYPE`，如下所示：

```
SELECT SUBSTR(stringclob, instr(stringclob, 'type>')+5
                        , instr(stringclob,'</type') 
                             - instr(stringclob, 'type>')-5
             ) r_type from Table1
 where DataSourceType = 'Source1'
   AND SUBSTR(stringclob, instr(stringclob,'type>')+5
                        , instr(stringclob, '</type')
                              - instr(stringclob, 'type>')-5
             )
     like '%book%' 
```

现在，我想从上个月（类似于 AND ）和 of记录的`STRINGCLOB`列 ( ) 中查找并计算所有出现的 '%book%' 字符串。我正在努力从两个不同的表中查询数据，知道吗？`Table1``TIMESTAMP > '01-Nov-12' AND TIMESTAMP < '01-Dec-12'``CLICKTYPE <> 'Type1'`

确实谢谢

一世。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:44:34.880

这就是您获得值为 的记录类型的计数的方式`book`。

```
WITH t
       AS (SELECT   '<?xml version="1.0" encoding="UTF-8"?>
                       <record>
                        <record_number>12345</record_number>
                         <record_type> book </record_type>
                       </record>'
                       STRINGCLOB
             FROM   DUAL
           UNION ALL
           SELECT   '<?xml version="1.0" encoding="UTF-8"?>
                          <record>
                            <record_number>6789</record_number>
                            <record_type> book </record_type>
                         </record>'
                       STRINGCLOB
             FROM   DUAL)
SELECT   COUNT (1) total
  FROM   t
 WHERE   xmltype (t.STRINGCLOB).EXTRACT ('//record_type/text()') LIKE '%book%'; 
```

**全部的**

2

现在，如果你想加入表 2，基于 record_id

```
 SELECT   COUNT (1) total
   FROM   table1 t1, table2 t2
  WHERE   xmltype (t1.STRINGCLOB).EXTRACT ('//record_type/text()') LIKE
            '%book%'
         AND t1.record_id = t2.record_id
         AND t1.DataSourceType = 'Source1'
         AND (TRUNC (t2.timestamp) > '01-Nov-12'
              AND TRUNC (t2.timestamp) < '01-Dec-12')
         AND t2.clicktype <> 'Type1' 
```

# android - 如何从 android 中的 youtube 链接在视频视图中播放视频？

> ID：13744287
> 
> 赞同：2
> 
> 时间：2012-12-06T13:09:09.690
> 
> 标签：android

我已尝试使用以下代码在视频视图中运行 YouTube 视频。但它说该视频无法播放...

```
video = (VideoView) findViewById(R.id.VideoView);
        String path = "rtsp://v5.cache4.c.youtube.com/CjYLENy73wIaLQmiWeecHAQBrBMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYMWyte6X6MbcUAw=/0/0/0/video.3gp";

        Uri uri = Uri.parse(path);

        video.setVideoURI(uri);
        video.start(); 
```

请问有什么解决办法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:33:44.583

针对问题评论，这是如何使用可能导致 YouTube 应用播放 YouTube 视频的意图。

```
Intent viewIntent = new Intent("android.intent.action.VIEW", "url_to_video");                   
startActivity(viewIntent); 
```

显然，必须安装 YouTube 应用程序，如果有多个可以处理播放的应用程序，如果用户尚未选择默认应用程序，则可能会提示用户选择一个。

如果您想看到它的实际效果，您可以在我们的免费应用程序之一的视频部分中看到它。我们弹出一个[对话框](http://developer.android.com/reference/android/app/Dialog.html)询问用户是否想在有限带宽连接（例如 3G）上观看视频。

[https://play.google.com/store/apps/details?id=wisemandesigns.android.robgreen&hl=en](https://play.google.com/store/apps/details?id=wisemandesigns.android.robgreen&hl=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:13:06.180

一旦你得到 You tube url...，从 Url 中对 Video_ID 进行子串化。请参阅下面我给出的示例。

您可以使用[http://gdata.youtube.com/feeds/mobile/videos/VIDEO_ID](http://gdata.youtube.com/feeds/mobile/videos/VIDEO_ID) api 从实际的您管 url 获取 rtsp 链接。数据是 XML 格式

获得 rtsp 链接后，您可以在 VideoView 中播放视频，这是示例

**例如**：如果这个链接是视频[http://www.youtube.com/watch?v=sMM0R19IisI](http://www.youtube.com/watch?v=sMM0R19IisI)

然后`sMM0R19IisI`是Video_ID。所以您可以将此视频ID传递给上面的api以获取rtsp链接

要`JSON format`使用此[http://gdata.youtube.com/feeds/mobile/videos/](http://gdata.youtube.com/feeds/mobile/videos/) "+videoid+"?alt=json获取数据

参考这两个链接：

[链接1](https://stackoverflow.com/questions/8716146/rtsp-youtube-link)

[链接2](https://stackoverflow.com/questions/6520313/how-to-get-rtsp-links-android)

获得 rtsp 链接后，您可以在 VideoView 中播放

# jquery - 如果滑块元素没有绝对定位，如何为它们设置动画？

> ID：13744288
> 
> 赞同：0
> 
> 时间：2012-12-06T13:09:11.830
> 
> 标签：jquery, css, animation, jquery-animate

我正在尝试为我的网站创建一个动画滑块，我正在使用浮动和边距来定位滑块的元素，我正在寻找可以集成到我的滑块中的任何东西来为元素设置动画，我发现我需要使用 CSS3 过渡，并且这些元素需要绝对定位在它们的父级内部，这就是问题所在。我不想绝对定位元素，因为我现在定位它们的方式以及元素的大小可变。

那么如何在不使用绝对位置的情况下为这些元素设置动画或过渡？我想用不同的持续时间和方向为每个元素设置不同的动画。

谢谢。

UPADTE：我正在使用 WooThemes 的 Flexslider

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:14:37.610

你可以通过 javascript 向 CSS 做广告

```
'+=10px' or '-=10px' 
```

所以增加或减少你想要动画的元素的值，而不必说明结果的确切数量。希望能帮助到你

编辑

您也可以在您的 @keyframes 中使用它，而无需任何 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:19:00.697

使用[`transform: translate(x,y)`](https://developer.mozilla.org/en-US/docs/CSS/transform). 变换独立于周围的标记/样式（例如`position: absolute`）和甚至在移动设备上加速的硬件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T20:16:31.300

如果您使用 jQuery，您可以使用[.animate()](https://api.jquery.com/animate/)修改 DOM 元素的任何属性，这意味着您可以为元素的边距和填充设置动画，保持它们的相对位置。

# c# - 实体框架句柄删除实体

> ID：13744294
> 
> 赞同：0
> 
> 时间：2012-12-06T13:09:20.950
> 
> 标签：c#, entity-framework, frameworks, entity

我对 EF 很陌生，我在寻找一个干净的解决方案时绊倒了，用于删除参考实体：

```
public class UserAccess : CloneableBaseEntity<UserAccess>
{
    public User User { get; set; }
    public Site Site { get; set; }
    public CostCenter CostCenter { get; set; }
    public Product Product { get; set; }
} 
```

情况1：

删除用户时，还应删除用户访问权限

案例2

删除产品后，用户访问权限应该仍然存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:17:13.167

标记 User 和 UserAccess 之间的关系以进行级联删除。

# java - Runtime 如何在外部类方法和超类之间选择调用方法？

> ID：13744295
> 
> 赞同：2
> 
> 时间：2012-12-06T13:09:30.950
> 
> 标签：java, oop, jvm

我注意到以下情况：内部类正在调用它的超类和外部类中的方法。这里的代码：

```
 public class Main
    {

        class Inner extends InnerBase{
           public void callMethod(){
               method();
           }
        }

        void method(){
            System.out.println ("Called Main's method");
        }

        class InnerBase{
            void method(){
                System.out.println ("Called InnerBase's method");
            }
        }
    } 
```

现在当 callMethod() 被调用时，它会调用超类的方法并打印“Called InnerBase's method”。如果我试图在调用方法（）的方法（）上从 IDE（Eclipse）“打开声明”，那么它将转到外部类中的方法。哪个是真实的令人困惑。您能否建议或提供一些材料来解释在外部类和超类中选择同名执行方法的情况。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:14:06.870

通过使用[合格的 this](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4)（JLS §15.8.4\. Qualified this），您可以毫无疑问地指定所选方法是什么。

```
public void callMethod()
{
    Main.this.method();
} 
```

规则很简单：它总是选择最接近的方法。

`InnerBase.method()`是它自己方法的一部分。所以这比`Main.method()`, 因为`Main.method()`是另一个不相关类的一部分。如果你有另一个`method()`in `Inner`，那么它会选择那个方法，因为它在同一个类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:16:12.630

你在这里有三个类-`Main`和。是 的*孩子*，但与他们完全无关。所以，当你调用时，它会调用它的 OWN实现，它*继承*自.`Inner``InnerBase``Inner`*`InnerBase``Main``callMethod()``InnerBase``method()`*`InnerBase`**

 **如果您想调用`Main`s `method()`，则必须明确限定它。

如果eclipse跳转到了错误的方法，那么很可能是eclipse的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:18:31.180

通过使用“合格的这个”。

Main.this.method()

看

[java中的“qualified this”构造是什么意思？](https://stackoverflow.com/questions/11276994/what-does-qualified-this-construct-mean-in-java)**

# http - GET 请求 HEAD 或 BODY 中存储的 URI 属性在哪里？

> ID：13744297
> 
> 赞同：0
> 
> 时间：2012-12-06T13:09:45.283
> 
> 标签：http, get, http-headers, request

GET 请求不包含任何 HTTP 正文数据，但如果它以查询字符串的形式提供一些补充数据属性，它们在 GET 请求的 Header 或 Body 中存储在哪里？它们是否也存储在标题中？

**例子**

```
...form?email=hi@world.com&comments=good%20site 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:17:06.700

URI 属性随`GET`请求一起发送。如果您从服务器请求页面，则浏览器正在向网络服务器发送请求，如下所示：

```
<open the connection to www.server.com>
GET /form HTTP/1.1
<server sends document> 
```

如果您`GET`发出包含数据的请求，您已经指出的字符串将被简单地添加到 URI

```
<open the connection to www.server.com>
GET /form?email=hi@world.com@comments=good%20site HTTP/1.1
<server sends document> 
```

这样做的缺点是，在默认 web 服务器日志记录打开的情况下，客户端发送的所有数据都将写入服务器日志，因为它是请求 URI 的一部分！

如需参考，请查看此处：[超文本传输​​协议 -- HTTP/1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:15:32.247

您引用的属性实际上称为查询字符串（“？”之后的所有内容都被视为查询字符串），并且查询字符串只是整个 URL 的一部分，因此是标头的一部分。它们没有被放入体内。

# android - 我在两个活动之间的 SharedPreferences 遇到问题

> ID：13744299
> 
> 赞同：0
> 
> 时间：2012-12-06T13:09:50.500
> 
> 标签：android, android-activity, sharedpreferences

**我有一个使用sharedpreferences**保存一些数据的活动，如下所示：

```
public void birthDateSharedPreferences(int calculatedBirthYear, int calculatedBirthMonth, int calculatedBirthDay)
    {
      SharedPreferences birthDatePreferences = PreferenceManager.getDefaultSharedPreferences(this);
      SharedPreferences.Editor editor = birthDatePreferences.edit();
      editor.putInt("birthChosenDay",calculatedBirthDay);
      editor.putInt("birthChosenMonth",calculatedBirthMonth);
      editor.putInt("birthChosenYear",calculatedBirthYear);
      editor.commit();
      Toast.makeText(birthDate.this,"The date was saved", Toast.LENGTH_LONG).show();
      Intent saved = new Intent(birthDate.this,MenuActivity.class);
      startActivity(saved);
      finish();
} 
```

* * *

这是第二个活动

```
SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
                   int birthChosenDay = prefs.getInt("birthChosenDay", MODE_APPEND); 
```

我有另一个活动，我想*使用我在第一个活动中保存的数据*，我搜索并尝试了一些代码，但没有任何效果！**那么如何将第一个活动中保存的数据用于第二个活动**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:12:55.787

在第二个活动中，您应该获得默认的共享首选项（保存时使用的首选项）..

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
int birthChosenDay = prefs.getInt("birthChosenDay", MODE_APPEND); 
```

作为：

```
 PreferenceManager.getDefaultSharedPreferences(this); 
```

将提供对整个应用程序包的全局首选项文件的访问；任何活动都可以访问首选项（在内部，保存首选项的 xml 文件将被命名`your.application.package_preferences.xml`）。

```
getPreferences(Context.MODE_PRIVATE); 
```

将只为 contextInstance 类提供首选项：只有上下文类的实例可以访问这些首选项（说你的包仍然是`your.application.package`并且你在`your.application.package.SecondActivity`，内部首选项文件是`SecondActivity.xml`）。

# android - 无法在 android 中将 EditText 添加到 Popup 中

> ID：13744300
> 
> 赞同：0
> 
> 时间：2012-12-06T13:09:51.390
> 
> 标签：android, dialog, popup, android-edittext

我将显示一个弹出屏幕，用于从用户那里获取一些描述。除了EditText，我几乎可以毫无问题地添加所有控件（文本视图、按钮、复选框等）。它给了我一个错误，如下所示。

```
Caused by: android.view.InflateException: Binary XML file line #12: Error inflating class <unknown> 
```

**代码端**

```
 public RouteAdapter(Activity a, RouteResultDto list, boolean editMode, BaseFollower userInfo, boolean isFavoriteStatus) {
    this.activity = a;
    this.routeList=list;
    this.editMode = editMode;
    this.userInfo = userInfo;
    this.isFavorite = isFavoriteStatus;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());

//throws the exception at line below
    lnPopupMain = (LinearLayout) LayoutInflater.from(activity).inflate(R.layout.popup_route_edit, null);

    float width = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 200, activity.getResources().getDisplayMetrics());
    float height = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 250, activity.getResources().getDisplayMetrics());
    popupEditRoute = new PopupWindow(lnPopupMain, (int)width, (int)height, true);

    popupEditRoute.setBackgroundDrawable(new BitmapDrawable());
    popupEditRoute.setOutsideTouchable(true);
} 
```

**布局面**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:padding="10dip"
              android:layout_width="200dip"
              android:layout_height="160dip"
              android:background="@color/black"
              android:id="@+id/lnPopupMain"
              android:focusable="true"
        >

    <EditText android:layout_width="match_parent"
              android:layout_height="80dip"
              android:id="@+id/txtRouteEdit"
            android:background="@color/white">
    </EditText>
</LinearLayout> 
```

（如果我使用 TextView 或 Button 而不是 EditText，也不例外。EditText 有什么问题？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:14:36.797

LayoutInflater 不对它运行的线程做任何假设。在其文档中没有提到这一点。它的代码接缝也与线程无关。

另一方面，由 LayoutInflater 创建的视图可能会在其构造函数中实例化处理程序。好吧，他们可能不应该那样做，但是没有要求他们不在构造函数中创建/使用处理程序。

总的来说，我想说的是，因为没有明确要求视图在其构造函数中不使用处理程序和 Loopers，所以你不能假设从非 UI 线程膨胀视图是安全的。

您实际上可以创建[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)并尝试在其中膨胀视图。但我会说这是非常冒险的，因为在三星 Galaxy S 示例中，视图假定该线程在视图生命周期内将处于活动状态，并将使用其 Looper 处理所有消息。这可能会导致以后崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:17:13.947

解决。我不知道为什么，但你应该在监听器中创建弹出窗口。

```
 imgEditOk.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                lnPopupMain = (LinearLayout)inflater.inflate(R.layout.popup_route_edit, null);
                float width = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 200, activity.getResources().getDisplayMetrics());
                float height = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 250, activity.getResources().getDisplayMetrics());
                popupEditRoute = new PopupWindow(lnPopupMain, (int)width, (int)height, true);
                popupEditRoute.setBackgroundDrawable(new BitmapDrawable());
                popupEditRoute.setOutsideTouchable(true);
                popupEditRoute.showAtLocation(lnPopupMain, Gravity.CENTER, 10, 10);
            }
        }); 
```

# ajax - 替代 MSXML2 用于 VBA 检索大型 HTTP 请求，并访问 readyState 3？

> ID：13744301
> 
> 赞同：2
> 
> 时间：2012-12-06T13:09:53.287
> 
> 标签：ajax, vba

**编辑：**这个问题已经改变，因为我一直在等待答案并进行了外部研究。我已经改写了标题，问题实际上是我正在寻找 MSXML2 的替代方案（即使这意味着编写套接字代码）。问题的原始正文留在这里以供参考，并帮助将来进行类似搜索的人。

> 在 VBA 中，使用 MSXML2 对象，有没有办法在 readyState = 3 时访问流数据？
> 
> 我正在使用该`OnReadyStateChange`方法，但是在readyState为4之前我似乎无法访问。`responseText`当readyState为3时，似乎没有任何数据。
> 
> VBA 中是否有任何方法可以在 HTTP 流响应进入时访问它？我可以在 MSXML2 中使用的另一种方法，还是更好的（免费的、可分发的）对象来进行“AJAX”调用？
> 
> 更多信息：如果我尝试阅读`responseStream`（或 `responseText`），错误描述为：
> 
> `The data necessary to complete this operation is not yet available.`
> 
> 第二次编辑，更多信息：这个链接基本上说这是`INTERACTIVE`（3）状态下的预期行为：http:
> [//msdn.microsoft.com/en-us/library/windows/desktop/ms753800(v=vs.85) .aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms753800(v=vs.85).aspx)

**所以我肯定在寻找“还有其他选择吗？” 回答。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:36:36.417

这是我编写的一段旧代码，用于使用 WinInet API 读取块，它不是异步的，但它在每 512 个字节后公开一个读取缓冲区（我添加了一个 Debug.Print "READ" & lngTotalBytesRead 来说明） - [http:// pastebin.com/6uMhkBUF](http://pastebin.com/6uMhkBUF)

据我所知，它工作正常，但我不得不稍微解开它。

*   您将需要删除对`App.`in的调用`HTTPGetUAString`（最初是 VB6）等等`HTTPGetUAString = "MyThing"`。

*   `If (lngContentLen = 0&) Then lngContentLen = (BUFF_LEN * DUMMY_BUFF_MULTIPLIER)`是剩菜；您可以删除该行。（随后，如果 lngContentLen 为零，则大小预先未知）

# java - 带有 knockout.js 和 Spring MVC / JSP 的初始状态

> ID：13744303
> 
> 赞同：2
> 
> 时间：2012-12-06T13:10:01.680
> 
> 标签：java, spring, jsp, spring-mvc, knockout.js

我只是想知道如何最好地解决这个问题。我想加载一个将通过 JSP 生成的初始页面，这将是我的淘汰视图。但是，在页面加载时必须立即执行 Ajax 请求以获取数据以设置字段值，这似乎是一种耻辱。

理想的情况是，如果我可以加载设置了值的初始视图，然后从中剔除以进行初始化。我不确定这是否可能？我的另一个想法是生成一个空视图，然后在底部放置一个部分，我在其中编写与我试图避免的 Ajax 请求等效的 JSON 输出。

当然其他人已经解决了同样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T17:25:20.587

您可以在呈现视图时简单地将 json 数据模板化到 javascript 中，并让您的淘汰赛访问该数据（或将其传递到 viewmodel）。

```
<script type="text/javascript">
    var data = /*INSERT TEMPLATED DATA HERE*/;

    var model = new Model(data);
    ko.applyBindings(model);
</script> 
```

**编辑：**

我通常在通用模板化方法中构建用于淘汰的视图模型，以支持初始状态以及延迟状态，例如来自 ajax 调用。这将与我上面列出的方法很好地配合：

```
function Model(data, parent)
{
    var self = this;
    self.parent = parent;

    self.Load = function(data) {
        if (data) {
            //initialize data here
        }
    };
    self.Load(data); //call initially here in case of initial state

    //other functionality
} 
```

# c# - 在 SharePoint 2010 列表中导入 SQL 表数据的最佳方法是什么？

> ID：13744307
> 
> 赞同：1
> 
> 时间：2012-12-06T13:10:17.413
> 
> 标签：c#, sql-server-2008, sharepoint-2010

我有一个包含数据的 SQL 服务器表。我想在 SharePoint 2010 列表中导入这些数据。

将此数据导入我的 SharePoint 2010 列表的最佳方法是什么？

这在部署到生产环境中应该很有用，我的客户可以轻松使用。

请建议我不同的方法以及如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:21:24.550

1.  SQL Server 集成服务[http://msdn.microsoft.com/en-us/library/hh368261.aspx](http://msdn.microsoft.com/en-us/library/hh368261.aspx)
2.  编写程序来读取 SQL Server 表并使用其中一种对象模型写入 SharePoint，例如，使用 SharePoint 服务器对象模型写入列表的 C# 程序。

如果您将 SQL Server 表导出到 Execl，那么您有以下附加选项：

1.  从 Excel 导入：在 SharePoint 中：创建、列出、导入电子表格。
2.  从 Excel 导出：http: [//office.microsoft.com/en-us/excel-help/export-an-excel-table-to-a-sharepoint-list-HA010131472.aspx](http://office.microsoft.com/en-us/excel-help/export-an-excel-table-to-a-sharepoint-list-HA010131472.aspx)
3.  从 Excel 粘贴到现有 SharePoint 列表的数据表视图中：复制 Excel 中的行；切换到 SharePoint 到数据表视图（至少包含必填字段）；将数据表与 Excel 列相同；然后右键单击第一个单元格并选择粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T05:23:06.850

以下步骤对我有用：

1.  将 sql server 表导出为 excel。
2.  创建一个共享点列表视图，保持列顺序与 Excel 相同。
3.  将行复制到数据表视图并保存..

# c# - 如何从 VS 2010 发布 Web 服务？

> ID：13744309
> 
> 赞同：5
> 
> 时间：2012-12-06T13:10:28.220
> 
> 标签：c#, visual-studio-2010, web-services, web, raspberry-pi

我在 VS 2012 上创建了一个 Web 服务。 **现在我想做的是从客户端调用此 Web 服务，但诀窍是客户端正在另一台计算机上运行（在 Raspberry Pi 计算机上并用 Java 编写——尽管我认为这无关紧要）。**

当这两个程序在同一台机器上时，它运行良好，但现在我想从另一台计算机启动客户端。

根据我的阅读，我知道我需要在我的计算机上发布这个 Web 服务，但我还没有找到合适的指南来说明如何去做（阅读 IIS——我需要它吗？）？此外，我是否需要对我的客户端进行一些更改，以便它不会在本地机器上查找 Web 服务？客户端是使用来自 Web 服务服务器的 WSDL 文件创建的。

谢谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:23:04.303

您只需要发布 Web 服务。为了发布，您应该在解决方案资源管理器中右键单击项目，然后选择发布。然后在指向发布文件夹的 IIS 管理器中创建新的虚拟目录。我不知道你有哪些系统和 IIS 版本，无论如何[这里](http://beyondrelational.com/modules/2/blogs/48/posts/10055/walkthrough-on-creating-wcf-40-service-and-hosting-in-iis-75.aspx)是指南。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T15:21:01.917

好的，我已经设法解决了这个问题。首先在处理 IIS 之前，验证这一点：[你配置得很好](http://www.netomatix.com/Development/IIS7_404Error.aspx)

我花了几个小时浏览论坛才发现这个问题。之后，在您的 IIS 上创建新站点，如果您打算从远程位置使用它，请给它主机名，如：`http://192.168.1.21`。[将此](https://stackoverflow.com/questions/1028010/the-test-form-is-only-available-for-requests-from-the-local-machine)添加到您的 Web.config 文件（仅适用于远程会话）。

然后转到您的 VS 2010 Web 服务器项目（以管理员身份打开 VS），转到属性 --> 使用本地 IIS --> 输入 URL（在我的情况下 `http://192.168.1.21/18.RaspPI_WEBSERVICE`） --> 推送创建虚拟目录。

在这些操作之后，新目录应该出现在您的站点下（我的站点主机名是 192.168.1.21 ）。

按管理网站面板下的**开始，基本上它...**

我已经设法在远程 Raspberry PI 上运行 Web 服务客户端，并通过 IIS 将收集到的信息上传到我的 Web 服务器。

# android - 在警报对话框中显示蓝牙设备名称

> ID：13744313
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:10:45.020
> 
> 标签：android, bluetooth, android-alertdialog

我有一个菜单选项，允许用户设置蓝牙设备名称。目前，对话框在选择时实际上并未显示设备的当前名称。我想在可编辑的文本字段中向用户显示现有的设备名称，以便用户在更改设备之前可以看到设备的名称。

当前方法如下所示。

```
private void changeName() {
        if (D)
        Log.d(TAG, "changeName");
            // Open the alert dialog box
        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("Change Device Name");

        // Set an EditText view to get user input
        final EditText input = new EditText(this);
        alert.setView(input);
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int mButton) {
                String mDevicename = input.getText().toString();
                mBluetoothAdapter.setName(mDevicename);
                Toast.makeText(getApplicationContext(),
                        "Update device name to: " + mDevicename,
                        Toast.LENGTH_SHORT).show();

            }
        });
        alert.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int mButton) {
                        // Canceled.
                    }
                });

        alert.show();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:05:24.690

我必须用调用 BluetoothAdapter 类的 getName() 方法返回的值初始化一个 String 变量。然后我将此字符串变量传递给 AlertDialogue 类的 setText() 方法。

```
private void changeName() {
    if (D)
        Log.d(TAG, "changeName");
            // Open alert dialogue box
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Change Device Name");
    // Set an EditText view and insert the existing device name
    String mDevicename = mBluetoothAdapter.getName();
    final EditText input = new EditText(this);
    input.setText(mDevicename);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int mButton) {
            String mDevicename = input.getText().toString();
            mBluetoothAdapter.setName(mDevicename);
            Toast.makeText(getApplicationContext(),
                    "New device name is " + mDevicename, Toast.LENGTH_SHORT)
                    .show();

        }
    });

    alert.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int mButton) {
                    // Canceled.
                }
            });
    alert.show();
} 
```

# jquery - 如何在 Kendo UI Grid 中设置行背景颜色？

> ID：13744315
> 
> 赞同：2
> 
> 时间：2012-12-06T13:10:50.233
> 
> 标签：jquery, kendo-ui

我有 21 行的网格。我的要求是设置一些行的背景颜色为浅绿色（如 1、5、13 行）这是否可以实现。

```
$("#gridSellIn")
     .kendoGrid({
         width: 1500,
         dataSource: data.d,
         resizable: true,
         selectable: true,                                
         rowTemplate: kendo.template($("#SellInrowTemplate").html()),
                            height: 500,
                            columns: [
                                            { title: 'RevProduct Name', field: 'ProductName', width: '22%', sortable: true },
                                            { title: 'Actuals', field: 'Actual', width: '8%', sortable: true },

                                      ]
                        }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-17T20:57:46.823

你可以试试这个条件方法

```
var grid = $("#gridSellIn").data("kendoGrid");
var data = grid.dataSource.data();
$.each(data, function (i, row) {
  if (row.ProductName == 'Apples')
     $('tr[data-uid="' + row.uid + '"] ').css("background-color", "green");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T13:24:27.100

您可以使用 jQuery 设置任何 HTML 元素的任何 CSS 属性。这包括表格行和背景颜色。这里有一些让你开始的东西：

```
$("#gridSellIn tr").css("background-color", "red"); 
```

有关更多信息，请参阅 jQuery 文档：

*   jQuery [CSS](http://api.jquery.com/css/)
*   jQuery[选择器](http://api.jquery.com/category/selectors/)（检查[eq()](http://api.jquery.com/nth-child-selector/)和[nth-child()](http://api.jquery.com/nth-child-selector/)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-09T20:04:12.577

在数据绑定事件中，您可以：

```
var rows = e.sender.tbody.children();

for (var j = 0; j < rows.length; j++) {
    var row = $(rows[j]);
    var dataItem = e.sender.dataItem(row);

    if (dataItem.get("PropertyName") != 0) {
        row.addClass("someCssColorClass");
    }
}
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T00:52:30.493

```
 var grid = $("#Grid").data("kendoGrid");
    var data = grid.dataSource.data();
    // the section below is using JQuery each function to loop
    // over the grid data then checking the row index if its an odd or even number
    //by finding the modulus of the number.
    // In this case i'm checking for odd number

    $.each(data, (i, row) => {        
        if (i % 2) {
            $('tr[data-uid="' + row.uid + '"]').css("background-color","rgb(247, 244, 244)");
        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-11T15:33:50.287

我注意到您正在使用行模板：

```
rowTemplate: kendo.template($("#SellInrowTemplate").html()) 
```

如果数据集中有一个值绑定到确定需要突出显示的行的网格，则可以在模板中设置绑定颜色：

```
# if (data.columnvalue === condition) { #
<tr class="highlight">
#} else {#
<tr>
#} # 
```

# html - 如何在 span 标签内实现块链接？

> ID：13744319
> 
> 赞同：0
> 
> 时间：2012-12-06T13:11:04.090
> 
> 标签：html, css, block

我已经从以下来源阅读了如何实现块链接：[http](http://green-beast.com/blog/?p=74) ://green-beast.com/blog/?p=74 但是，我不知道如何将它应用于位于标签内的标签。由于我的 html 代码遵循这种格式：

```
<li class="">
    <span>
        <strong>
           <a href="#">Text</a>
        </strong>
        <span class="Count">Number</span>
    </span>
</li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:18:54.477

A`<span>`是一个内联元素，因此它不应包含块链接。这是因为内联元素不应该包含块元素。试试这个 HTML（已删除`<span>`）：

```
<li class="myList">
    <strong>
       <a href="#">Text</a>
    </strong>
    <span class="Count">Number</span>
</li> 
```

和 CSS：

```
li.myList strong a { display:block; } 
```

如果有什么看起来令人困惑，您可能需要阅读“CSS 选择器”和“CSS 中的内联和块元素”。

# c++ - 如何让 wndproc 处理到多个窗口的消息

> ID：13744320
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:11:07.407
> 
> 标签：c++, winapi, wndproc

我一直在尝试让 wndproc 成功接收来自消息队列的消息并根据我的代码处理它们，但它没有按照我想要的方式工作，我希望它做的是确定接收到哪个窗口WM_DESTROY 或 WM_CLOSE 并调用特定于哪个窗口关闭的代码，但由于某种原因，目前它什么也没做。经过大量实验后，我已经让它以不同的方式部分发挥作用，但似乎每个实现都不能以正确的方式发挥作用。这是我最新的不成功代码：

```
 while (GetMessage (&messages, NULL, 0, 0))
{
    /* Translate virtual-key messages into character messages */
    TranslateMessage(&messages);
    /* Send message to WindowProcedure */
    DispatchMessage(&messages);
}

/* The program return-value is 0 - The value that PostQuitMessage() gave */
return messages.wParam;
}

/*  This function is called by the Windows function DispatchMessage()  */

LRESULT CALLBACK Proc2(HWND mainwin, UINT message, WPARAM wParam, LPARAM lParam )
{
switch (message)                  /* handle the messages */
{
                       case WM_DESTROY:
                       const HWND active_window = GetActiveWindow();
                       if (active_window == mainwin)
                                {
                                   PostQuitMessage(0);
                                }
                                   if (active_window == hwnd2)
                                   {
                                                 PostQuitMessage(0);
                                                EnableWindow (mainwin, true);
                                   }
                                   break;
} 
 switch (wParam)                  /* handle the messages */
{
              case ID_2 :
            PostQuitMessage(0);
            break;
              case ID_1 :
               ShowWindow (hwnd2, SW_SHOW);     
               break;
                            default:                      /* for messages that we don't deal with */
        return DefWindowProc (mainwin, message, wParam, lParam); 
                    break;
}  

    return 0;
} 
```

这是我尝试使用多个窗口过程的代码

```
while (GetMessage (&messages, NULL, 0, 0))
{
    /* Translate virtual-key messages into character messages */
    TranslateMessage(&messages);
    /* Send message to WindowProcedure */
    DispatchMessage(&messages);
}

/* The program return-value is 0 - The value that PostQuitMessage() gave */
return messages.wParam;
}

/*  This function is called by the Windows function DispatchMessage()  */

LRESULT CALLBACK Proc2(HWND mainwin, UINT message, WPARAM wParam, LPARAM lParam )
{
switch (message)                  /* handle the messages */
{
                       case WM_DESTROY:
                                   PostQuitMessage(0);
                                   break;
} 
 switch (wParam)                  /* handle the messages */
{
              case ID_2 :
            PostQuitMessage(0);
            break;
              case ID_1 :
               ShowWindow (hwnd2, SW_SHOW);     
               break;
                            default:                      /* for messages that we don't deal with */
        return DefWindowProc (mainwin, message, wParam, lParam); 
                    break;
}  

    return 0;
}    
LRESULT CALLBACK Proc3(HWND hwnd2, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
           case WM_DESTROY:
EnableWindow (mainwin, false);
                break;
case WM_CLOSE:
EnableWindow (mainwin, false);
break;
}
switch (wParam)
{
   default:
           return DefWindowProc (hwnd2, message, wParam, lParam);
           break;
           }
           return 0;
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:20:25.197

你说，

> “我想做的是确定哪个窗口收到 WM_DESTROY 或 WM_CLOSE”

简单的答案是接收的窗口`UINT message`是`HWND mainwin`.

如果您想知道“是的，但我的哪个窗户是`HWND mainwin`？” 那么一种方法是，当你创建一个窗口时，你记住它的窗口句柄是什么，并将它存储在某个地方（例如作为一个全局变量）。

* * *

除此之外，尚不清楚您为什么要调用`GetActiveWindow()`，也不清楚您要实现什么功能。

# tsql - 聚集索引和覆盖查询

> ID：13744330
> 
> 赞同：2
> 
> 时间：2012-12-06T13:11:47.597
> 
> 标签：tsql

我有一个表格，其中包含按年份、州和县的数据。县标识符存储为对州和县进行编码的 FIPS 代码。

我已经创建了一个关于年份和县的 CLUSTERED INDEX，并且我知道数据将以这种排列方式物理存储。

**问题**：

*   由于数据是通过 FIPS 代码存储的，它们是否会自动按状态顺序排列？

*   在我看来，在 State 上添加非聚集索引不会给我带来任何好处。这是真的？

*   更一般地说，如果我对几个变量有一个聚集索引，那么在索引的组件上是否有 WHERE、GROUP BY 或 ORDER BY 子句“覆盖”，因此不需要索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:33:36.440

在没有状态索引的情况下，查询无法知道状态恰好是有序的。
对 state 的查询不会使用 year 和 fips 的复合索引。

州将从指数中受益。
你可以有一个单独的状态索引。
或者在综合指数中包括州 - 年、州、FIPS。

假设您有一个复合索引 col1、col2、col3。Col3 上的位置。查询可以使用复合索引，但它会是一次扫描。如果你有很多或关键的查询使用 col3，那么在 col3 上放置一个索引，看看你是否得到好处。你需要测试加载数据。另一个因素是如果复合索引被大量使用，那么它可能已经在内存中。

# c# - Windows CE/WinMobile 6.1 中多线程的速度问题

> ID：13744333
> 
> 赞同：0
> 
> 时间：2012-12-06T13:11:52.810
> 
> 标签：c#, windows, windows-mobile, windows-ce

我有一个在 Windows CE/WindowsMo​​bile 6.1 中没有明显原因的应用程序非常慢，该应用程序直接使用线程，我正在尝试调查这是问题的原因，我编写了一个简单的程序：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Text;
using System.Threading;

namespace SmartDeviceProject6
{
    class Program
    {
        static void Main(string[] args)
        {
            DateTime mtStart = DateTime.Now;
            System.Diagnostics.Debug.WriteLine("{0} MainThread - START", mtStart.ToString("MM/dd/yyyy hh:mm:ss.fff tt"));

            System.Diagnostics.Debug.WriteLine("Main Thread - Starts Here!");
            Thread t = new Thread(WriteY);          // Kick off a new thread
            t.Start();                               // running WriteY()

            // Simultaneously, do something on the main thread.
            for (int i = 0; i < 250; i++)
            {
                Console.Write("x");
                System.Diagnostics.Debug.WriteLine("x");
                System.Diagnostics.Debug.WriteIf(i == 249, "X is OVER");
                if (i == 50)
                {
                    System.Diagnostics.Debug.WriteLine("MAIN - sleep");
                    //Thread.Sleep(1000);
                }
            }
            DateTime mtEnd = DateTime.Now;
            System.Diagnostics.Debug.WriteLine("{0} MainThread - END", mtEnd.ToString("MM/dd/yyyy hh:mm:ss.fff tt"));
        }

        static void WriteY()
        {
            DateTime wtStart = DateTime.Now;
            System.Diagnostics.Debug.WriteLine("{0} WorkerThread - START", wtStart.ToString("MM/dd/yyyy hh:mm:ss.fff tt"));

            System.Diagnostics.Debug.WriteLine("Worker Thread - Starts Here!");
            for (int i = 0; i < 250; i++)
            {
                Console.Write("Y");
                System.Diagnostics.Debug.WriteLine("Y");
                System.Diagnostics.Debug.WriteIf(i == 249, "Y is OVER");
                if (i == 100)
                {
                    System.Diagnostics.Debug.WriteLine("HIT - 100!!!");
                    //Thread.Sleep(500);
                }
            }

            DateTime wtEnd = DateTime.Now;
            System.Diagnostics.Debug.WriteLine("{0} WorkerThread - END", wtEnd.ToString("MM/dd/yyyy hh:mm:ss.fff tt"));
        }
    }
} 
```

这是输出：

> 'SmartDeviceProject6.exe'（托管）：加载 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\mscorlib.dll' 'SmartDeviceProject6.exe'（托管）：加载 'c: \users\icreate\documents\visual studio 2008\projects\smartdeviceproject6\smartdeviceproject6\bin\debug\SmartDeviceProject6.exe'，已加载符号。'SmartDeviceProject6.exe'（托管）：已加载 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.dll' 12/06/2012 01:02:36.000 PM：{ 0} MainThread - 开始主线程 - 从这里开始！xxxxxxxxxxxxxxxxxxxxx XXXXXXXX xxxxxxxxxxxxxxxxxxxxx x主 - 睡眠XXXXXXX xxxxxxxxxxxxxxxxxxxxx XXXXXXXXXXXXXX xxxxxxxxxxxxxxxxxxxxx XXXXXXXXXXXXXX xxxxxxxxxxxxxxxxxxxxx XXXXXXXXXXXXXX xxxxxxxxxxxxxxxxxxxxx XXXXXXXXXXXXXX xxxxxxxxxxxxxxxxxxxxx XXXXXXXXXXXXXX xxxxxxxxxxxxxxxxx X是OVER12 / 06/2012 01：02：38.000 PM：{0} MainThread - END 0xf6b1b7d6已经与代码0（为0x0）退出该线程. 12/06/2012 01:02:38.000 PM：{0} WorkerThread - 启动工作线程 - 从这里开始！YYYYYYYYYYYYYYYYYYYY YYY YYYYYYYYYYYYYYYYYYYY YYYYYYYYYYYYYY YYYYYYYYYYYYYYYYYYYY YYYYYYYYYYYYYY YYYYYY 命中 - 100！YYYYYYYYYYYYYYYYYYYYY Y YYYYYYYYYYYYYYYYYYYYY YYYYYYYYYYYYYY YYYYYYYYYYYYYYYYYY YYYYYYYYYYYYYY YYYYYYYYYYYYYYYYYYYY YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY YY 已超过 12/06/2012 01:02:38.000 PM：{0} WorkerThread - 已结束线程代码为 0x30009。线程 0xd7be774a 以代码 0 (0x0) 退出。程序“[0xF7D3F6F6] SmartDeviceProject6.exe: Managed”已退出，代码为 0 (0x0)。

有两件事困扰我...

1）是没有明显的线程进行...所有的X都被打印出来，然后是所有的Y，如果我做一个睡眠我可以交错代码，但似乎没有多线程进行......

2）这些是几个非常简单的 for 循环，它们不应该花一秒钟的时间来运行。

有谁知道 WinMobile 6.1 是否以正确的方式支持线程？我应该使用不同的线程模型吗？我能做些什么来加快速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:23:19.980

您看到的“缓慢”与您的调试器连接有关。 `Debug.Writeline`是同步且缓慢的（`Console.Writeline`也不是那么快）。例如，在我面前的 PXA270 设备上，我删除了它们并在两个循环中计数到 2500（比您的测试大 10 倍）只需要大约 80 毫秒。即使写入文件对速度的影响也很小。

我确实看到了相同的“所有一个线程然后所有其他线程”，当我完全跑出没有屈服时，但我不能说我过于惊讶。两个线程具有相同的优先级，很可能是线程量子是原因 - 如果您运行更多迭代，您将达到量子限制并且调度程序将交换。我`Thread.Sleep(0)`在每个循环中都放了一个，这使输出更像您所期望的，并且运行到 2500 的时间仅增加到大约 180 毫秒（线程上下文切换是减速）。

```
 static void Main(string[] args)
    {
        Debug.WriteLine("Start");
        var writer = File.CreateText("\\test.txt");
        var start = Environment.TickCount;
        var are = new AutoResetEvent(false);

        var t = new Thread(delegate
            {
                for (int i = 0; i < 2500; i++)
                {
                    writer.Write(".");
                    Thread.Sleep(0);
                }
                // set an event signaling completion
                are.Set();
            });
        t.Start();

        for (int i = 0; i < 2500; i++)
        {
            writer.Write("+");
            Thread.Sleep(0);
        }
        var et = Environment.TickCount - start;
        Debug.WriteLine(string.Format("\r\nET: {0}ms", et));
        // wait for the thread to complete
        are.WaitOne();
        // this would also work
        // t.Join();
        writer.Close();

        using(var reader = File.OpenText("\\test.txt"))
        {
            var content = reader.ReadToEnd();
            Debug.WriteLine(content);
        }
    } 
```

# javascript - 在 html 中选择选项 使用键 javascript 选择

> ID：13744334
> 
> 赞同：0
> 
> 时间：2012-12-06T13:11:54.633
> 
> 标签：javascript, jquery, html, jqtransform

我习惯于`jqtransform`更改表单选择的默认外观。现在我无法使用箭头键选择选项。我需要`select options`使用`keys`. 怎么做？

这是我的html

```
<form>
<select name="test">
<option value="" selected="selected">option 1</option>
<option value="01">option 2</option>
<option value="02">option 3</option>
</select>
</form> 
```

这是我的内部脚本

```
$(function(){
    $('form').jqTransform({imgPath:'images/'});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:16:50.670

好吧，我认为插件会禁用键盘导航。您可以在此处确认： 左侧栏中的[http://j.mp/VlZNSd您可以自己尝试。](http://j.mp/VlZNSd)这没用。如果您的兴趣是将设计更改插件保持为更好的插件，例如：http: [//j.mp/VySpJ2](http://j.mp/VySpJ2)，您将保留该设计并且它将与键盘一起使用。我没有解决您的问题的方法，这是一种解决方法。

# java - java - 如何通过Java中的Jruby执行带有参数的.rb

> ID：13744335
> 
> 赞同：1
> 
> 时间：2012-12-06T13:12:01.637
> 
> 标签：java, runtime, arguments, jruby

我有 parse_files.rb ruby​​ 文件，其中包含用于解析不同文件的代码，我从控制台使用它，如下所示

```
 ruby parse_file.rb -x -l -a path/to/source/files/*filepattern 
```

我想做同样的事情，但通过 jruby 使用 java 代码。问题是：如何通过 Ruby 运行时使用“-x -l -a path/to/source/files/*filepattern”参数调用此文件的脚本执行？是否有可能与 evalScriptlet(String str) 或其他东西有关？

# php - 有没有办法用作曲家卸载开发依赖项？

> ID：13744340
> 
> 赞同：85
> 
> 时间：2012-12-06T13:12:20.857
> 
> 标签：php, composer-php

我想卸载（而不是从我的 composer.json 中删除）对项目的开发依赖项。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-06T13:40:53.547

Running`install`或`update`with`--no-dev`现在应该删除开发要求及其依赖项。

出于历史目的的原始答案：

> 其实没有。当然，您可以从供应商目录手动 rm -rf 它们，但是在您使用 --dev 进行安装后，composer 无法卸载开发需求。这不是一个巨大的用例，但如果您想在 github 上报告问题，可能需要一个新的命令行开关。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-10-15T09:38:42.257

删除文件中的依赖项后，您可以使用以下命令`composer.json`。

```
composer update 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-01-26T15:33:40.157

在寻找相同答案时遇到了这个问题。您现在只需执行以下操作即可卸载已安装的开发依赖项：

```
composer --no-dev update 
```

它将删除它找到的所有开发包。虽然它会让人们像我一样登陆这里:)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-10-28T18:45:47.323

这不是严格的答案，但可能会对某人有所帮助。

要删除**特定**的开发依赖项：

```
composer remove --dev squizlabs/php_codesniffer 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-13T15:58:17.987

我稍后回答，但它可以帮助其他人：（ `composer remove friendsofsymfony/elastica-bundle`例如）

# javascript - 函数声明和表达式的原型区别

> ID：13744344
> 
> 赞同：1
> 
> 时间：2012-12-06T13:12:26.363
> 
> 标签：javascript

```
var foo = function(){alert('foo')}
function bar(){alert('bar')} 
```

为什么`foo.prototype`指向Object，而命名函数却`bar.prototype`指向自身？

我应该补充一点，这种行为是从浏览器控制台观察到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:58:55.730

如果您使用诸如 Chrome 之类的控制台来记录`prototype`对象的值，那么我建议您不要这样做。与其他浏览器控制台一样，Chrome 控制台会格式化原型对象的输出。

因此，对于命名函数，它将记录`name`函数的 ，但对于未命名函数，它将仅记录`Object`。这并不意味着`prototype`函数指向`Object`或函数本身。只是这就是控制台向您显示的内容（有人应该为此起诉他们）。自己看看：http: [//jsfiddle.net/2xkpC/](http://jsfiddle.net/2xkpC/)

它如何从它的函数中知道函数的名称`prototype`？好吧，函数的原型有一个名为的属性`constructor`，它指向函数本身，并且函数的名称作为字符串存储在`name`函数调用的属性中。因此，如果您记录一个`prototype`对象，那么它将显示`prototype.constructor.name || "Object"`：

```
var foo = function(){alert('foo')}
console.log(foo.prototype); // logs "Object"

function bar(){alert('bar')}
console.log(bar.prototype); // logs bar.prototype.constructor.name 
```

在此处查看演示：http: [//jsfiddle.net/4bWfn/](http://jsfiddle.net/4bWfn/)

如果您打开控制台并单击记录输出附近的那个三角形，那么您将看到原型对象的`constructor`和`__proto__`属性。在下方`constructor`，您还会看到该`name`属性。

要了解有关 JavaScript 和`prototype`对象继承的更多信息，请阅读以下答案：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T13:17:08.667

因为`var foo`在您的示例中它是指向匿名函数的指针。

相比于

```
var foo = function me(){alert('foo');}
test=foo;
console.log(test.prototype); 
```

这`var foo`是指向命名函数的指针。

# javascript - 在android webview中始终在设备内显示内容？

> ID：13744345
> 
> 赞同：0
> 
> 时间：2012-12-06T13:12:26.753
> 
> 标签：javascript, android, css, webview

我在android中遇到了一些奇怪的问题，它们是-

1.  我正在开发 html 阅读器，所以为此我在 android 的 Webview 中显示网页，所以我的问题是我希望网页内容始终显示在设备宽度内，这意味着在缩放时我也不需要水平滚动条我正在使用-

2.  **w.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);**

但这是 4.0 的弃用方法，它的工作完美但 4.0.3 的内容超出了边界，请建议我任何解决方案。

1.  我有一些选项，比如适合页面，点击这个我希望任何更大的页面或普通网页都将显示在屏幕上，这意味着没有水平和垂直滚动条。为此，我尝试根据设备和网页高度设置一个因素，但对于纵向和横向，其设置不正确，有时页面带有滚动条。请大家就这个问题向我提出任何可行的解决方案或任何有用的东西。

非常感谢高级

# html - 使用 content_tag 在 ruby on rails 中构建 HTML 表

> ID：13744356
> 
> 赞同：0
> 
> 时间：2012-12-06T13:13:06.137
> 
> 标签：html, ruby-on-rails, ruby, html-table, content-tag

我正在尝试借助 content_tag 方法在 Ruby On Rails 中构建一个 html 表。

例子：

```
@template.content_tag(:tr, @template.content_tag(:td, options[:argument0])) 
```

这应该呈现为

```
<tr><td>content of argument0</td></tr> 
```

我需要的是类似

```
<tr><td>content of argument0</td><td>argument1</td> ... </tr> 
```

我可以用相同的方法构建它吗？如何传递两个 content_tags？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:16:37.597

您可以使用`concat`：

```
 @template.content_tag(:tr, 
    @template.content_tag(:td, options[:argument0]).
    concat(@template.content_tag(:td, options[:argument1])).
    concat(@template.content_tag(:td, options[:argument2]))
    # ....
 ) 
```

或使用循环 - 正如评论中建议的 OP

```
rows = returning "" do |cells|
   5.times do |i|
     cells.concat @template.content_tag(:td, options["argument#{i}".to_sym]
   end
end
@template.content_tag(:tr,rows) 
```

# intellij-idea - PHPStorm / Intellij - 导出/导入数据库设置

> ID：13744357
> 
> 赞同：7
> 
> 时间：2012-12-06T13:13:07.647
> 
> 标签：intellij-idea, phpstorm

这两个 IDE 具有我所依赖的出色数据库查询引擎。但我有时会在多台机器上工作。我知道我可以导出和导入 IDE 设置，但是有没有办法可以将数据库设置从一台机器导出/导入到另一台机器？

我已经查看并通过文件结构grepped，但没有找到任何东西。我认为它必须在某处加密。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T19:07:36.350

据我了解，您在谈论**[Database tool window](http://blog.jetbrains.com/webide/2012/11/sql-support-and-database-tools/)**。

此类设置保存在`dataSources.ids/.xml`文件对中。位置取决于数据源的声明方式：

*   **项目级别**- 在其他项目设置旁边的 .idea 子文件夹中
*   **全局**- 在`config\options\`文件夹中（例如`C:\Users\USERNAME\.WebIde60\config\options\`在 Windows 7 上）

# c# - 有自连接时如何过滤初始数据上的动态linq查询

> ID：13744361
> 
> 赞同：1
> 
> 时间：2012-12-06T13:13:16.273
> 
> 标签：c#, dynamic-linq

我有一个由动态 linq 生成的查询。问题是当我自加入初始数据集时，所有其他过滤器都在最新表上。我希望它是最初的。我怎样才能做到这一点？这是一个例子：

```
var result = dataContext.Person;
var initialData = result;
....
var subQuery = initialData.Where(String.Format(predicateEntityIn, entityPropertyName), subSelection);
report = report.Join(subQuery, propertyName, propertyName, "inner");
... 
```

然后我想过滤一个参数的初始数据

```
report = report.Where(String.Format("{0} = {1}", "PersonId", paramValue)); 
```

如果我没有内连接，则查询被正确过滤，但使用内连接，它会对初始类型的最新查询进行过滤，并且选择位于最新表上。生成的查询是这样的：

```
SELECT DISTINCT [t2].[Field1], [t2].[PersonId], [t2].[Field2]
FROM [dbo].[PersonDetails] AS [t0]
INNER JOIN [dbo].[Person] AS [t1] ON [t1].[PersonId] = [t0].[PersonId]
INNER JOIN [dbo].[PersonDetails] AS [t2] ON [t0].[PersonId] = [t2].[PersonId]
WHERE ([t2].[YearOfBirth] = 2012) 
```

但我希望它是：

```
SELECT DISTINCT [t0].[Field1], [t0].[PersonId], [t0].[Field2]
FROM [dbo].[PersonDetails] AS [t0]
INNER JOIN [dbo].[Person] AS [t1] ON [t1].[PersonId] = [t0].[PersonId]
INNER JOIN [dbo].[PersonDetails] AS [t2] ON [t0].[PersonId] = [t2].[PersonId]
WHERE ([t0].[YearOfBirth] = 2012) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:32:31.773

问题出在这一行

```
report = report.Join(subQuery, propertyName, propertyName, "inner"); 
```

它应该是

```
report = report.Join(subQuery, propertyName, propertyName, "outer"); 
```

# python - 使用 type() 方法创建具有 django 内部 Meta 类的类

> ID：13744363
> 
> 赞同：2
> 
> 时间：2012-12-06T13:13:21.620
> 
> 标签：python, django

我正在研究为指定模型生成表单并返回它的函数（在 Django 1.4、python 2.7.2+ 中）。我在使用带有 3 个参数的 type() 方法时遇到了麻烦，因为我想指定 Form 的内部 Meta 类。Django 文档给出了一个模型自动生成表单的例子：

```
class PartialAuthorForm
    m(ModelForm):
        class Meta:
            model = Author 
```

现在我想概括它并自动制作表格。所以我想在返回的表单中指定 Meta，并在其中指定属性“model = model_cls”。

```
from django.forms import ModelForm
def generate_form_for(model_cls):
    ret_cls = type(model_cls.__name__ + "Form", (ModelForm,), {???}) 
```

不知道“？？？” 应替换为。你？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:28:13.293

我已经通过执行以下操作解决了这个问题：

```
Meta = type('Meta', (), {                                                   
    'model': ExampleModel,                                                                                                           
})                                                                                                                                                           

ExampleForm = type('ExampleForm', (), {                                                                             
    'Meta': Meta,                                                                                                              
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:51:59.140

检查 Django 是如何`modelform_factory`工作的：

[https://github.com/django/django/blob/master/django/forms/models.py#L372](https://github.com/django/django/blob/master/django/forms/models.py#L372)

`Meta`是类属性。

# mongodb - 在 mongoid 中按整数排序为布尔值

> ID：13744366
> 
> 赞同：0
> 
> 时间：2012-12-06T13:13:29.343
> 
> 标签：mongodb, mongoid

我有带有 mongoid 模型的 rails 应用程序。这个模型中有一个计数器字段，它是整数。我想通过这个字段转换为布尔值对条目进行排序，比如

```
MyModel.desc("counter::boolean") # casting in postgres-like syntax 
```

所以 counter > 0 的条目首先出现，而 counter == 0 的条目最后出现。

我还在这个表达式上使用 created_at 排序，它只适用于相同的计数器值，这就是为什么我只需要两个可能的值。不一定是真/假，它可能是 1/0。

Mongodb 不支持自定义排序功能（有开放票）。

可以在 mongoid/mongodb 中进行这种转换吗？如果没有，也许有任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:25:33.287

不是很漂亮的方式，但是您可能会在文档中创建具有值的附加字段，具体取决于您的排序方案，例如：“order”：将值转换为布尔值，然后按它排序。
令人惊讶的是 - 这是绕过 mongodb 限制的一种非常常见的方法。

# mysql - 更新时触发错误

> ID：13744368
> 
> 赞同：1
> 
> 时间：2012-12-06T13:13:32.670
> 
> 标签：mysql

```
CREATE TRIGGER `update_hidden` AFTER UPDATE ON boutique
    FOR EACH ROW
    BEGIN
         UPDATE `items` SET hidden = NEW.hidden WHERE boutique_id = NEW.id;
    END 
```

我有一个表精品和表项，都有字段`hidden`，执行此代码后出现语法错误，我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:28:50.933

删除 ROW BEGIN 之间的空格：

```
CREATE TRIGGER `update_hidden` AFTER UPDATE ON boutique
    FOR EACH ROW BEGIN
         UPDATE `items` SET hidden = NEW.hidden WHERE boutique_id = NEW.id;
    END 
```

# php - ZeroMQ PUB/SUB 不适用于 PHP

> ID：13744376
> 
> 赞同：4
> 
> 时间：2012-12-06T13:14:07.080
> 
> 标签：php, sockets, zeromq

我目前正在处理一个相当大的数据处理任务，需要拆分和分配处理。我有一个使用 ZeroMQ 的 PUSH / PULL 机制的完整工作管道原型——“处理”数据正在发送并完成。

但是，一旦数据被扇出并且处理完成，我需要指示工作人员（在 while/true 循环中运行）终止。我认为为此使用 ZMQ 的 PUB/SUB 机制是明智的。但是，工作人员没有收到任何控制消息。

令人沮丧的是，如果我切换到 PUSH/PULL 机制，工作人员会收到消息并正确终止。

我在这里从原型中复制了一些代码：

[http://pastebin.com/myZyWQ1E](http://pastebin.com/myZyWQ1E)

您可以看到生产者（向工作人员发送数据的位）创建并绑定到控制套接字（第 19 行），工作人员也绑定了该套接字（第 53 行）。一旦生产者完成工作，它通过控制套接字发送终止命令，工作人员继续循环并检查控制消息。不幸的是，第 75 行永远不会测试为真，并且该过程继续循环。

```
// Control socket create / bind from producer
$this->controlSocket = $this->zmqContext->getSocket(ZMQ::SOCKET_PUB);
$this->controlSocket->bind('tcp://172.0.0.1:51001');

// Control socket create / bind from worker
$control = $this->getZmqContext()->getSocket(ZMQ::SOCKET_SUB);
$control->setSockOpt(ZMQ::SOCKOPT_SUBSCRIBE, '');
$control->connect('tcp://172.0.0.1:51001'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:31:38.183

是的，您可能遇到了“慢加入者”问题的一个实例。PUB 不会阻止，因此如果没有人可以发送消息，它会丢弃消息。因为您创建了套接字并立即发送，所以订阅者仍将连接 - 这需要非零时间，因此消息会丢失。尝试一开始就创建控制套接字，应该让连接有机会稳定下来（或者，在控制套接字中的 bind() 和 send() 之间放置一点睡眠）。有关更详细的讨论，请参阅 ZGuide：http://zguide.zeromq.org/page:all [（](http://zguide.zeromq.org/page:all)搜索“slow joiner”）。

我注意到的另一件事是您正在检查投票之外的控制套接字。poll 的目的是让你做那种事情——将它作为另一个 POLL_IN 添加到你已经创建的 pollset 中，并检查 read() 中返回的套接字是否是 === （注意，三等号！）控制套接字或数据套接字。这样，您将获得更好的响应时间。

# ruby-on-rails - Ruby on Rails 中带有 ActiveSupport::JSON.decode 的 JSON 解析错误

> ID：13744377
> 
> 赞同：3
> 
> 时间：2012-12-06T13:14:08.503
> 
> 标签：ruby-on-rails, json

这有效：

```
body = '{"name":"123"}'

json_string = ActiveSupport::JSON.decode body 
```

但这失败了

```
body = '{"name":"123//"}'

json_string = ActiveSupport::JSON.decode body 
```

如果我在字符串末尾添加一个空格，那也可以

```
body = '{"name":"123// "}' 
```

我已经验证了来自[http://jsonlint.com/的所有 3 个 json 字符串](http://jsonlint.com/)

我正在使用 Rails 2.2.2 ，任何人都可以帮助我。

我还尝试将 JSON gem 与 JSON.parse 一起使用，但无济于事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:54:58.517

嗯，确实很有趣。似乎用 ascii 符号转义 / 是可行的（至少在我的 rails 版本中，即 3.2.1，所以很可能它不适用于您的版本）。我认为作为一种解决方法，如果它适用于您的版本，这应该没问题。ActiveSupport::JSON.decode "{\"foo\":\"\57\57\"}"

# matlab - 为什么 Matlab octave origin awk 中的频率计数使用相同的数据集得到完全不同的结果？

> ID：13744378
> 
> 赞同：3
> 
> 时间：2012-12-06T13:14:10.923
> 
> 标签：matlab, awk, octave, frequency

有一个数据集（仅用于测试）如下： 0.1 0.2 0.3 0.4 0.5 1.1 1.2 1.3 1.4 1.5 0.1 0.2 0.3 0.4 0.5 我想通过 bin（步长）获得最小 0.1 和最大 1.5 之间的频率计数为 0.1。我在 Matlab、Octave、Origin 和 AWK 脚本中进行了测试。但是，我得到了**完全不同的**结果。

## 1\. MATLAB

```
data  = [0.1 0.2 0.3 0.4 0.5 1.1 1.2 1.3 1.4 1.5 0.1 0.2 0.3 0.4 0.5];
edge  = 0.1:0.1:1.5;
count = histc(data, edge); 
```

结果是：

```
count = [2 4 0 2 2 0 0 0 0 0 1 1 1 1 1] 
```

## 2.八度

```
data  = [0.1 0.2 0.3 0.4 0.5 1.1 1.2 1.3 1.4 1.5 0.1 0.2 0.3 0.4 0.5];
edge  = 0.1:0.1:1.5;
count = histc(data, edge); 
```

结果是：

```
count = [2 2 2 2 2 0 0 0 0 0 1 2 0 1 1] 
```

## 3\. 产地

使用命令“频率计数”，设置`min=0.1`, `max=1.5`,`step size=0.1.`

结果是：

```
count = [2 4 0 2 2 0 0 0 0 0 2 1 1 1] 
```

## 4\. AWK

```
{...;count[data/0.1]++;} ... 
```

结果是：

```
count = [2 4 0 2 2 0 0 0 0 0 2 0 2 0 1] 
```

为什么我会得到这些不同的结果？我做错了什么，还是我误解了“频率计数”的概念？我认为上述任何结果都不正确...您能告诉我该怎么办吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:48:12.503

一个快速的方法是将边缘移动

MATLAB：

```
data  = [0.1 0.2 0.3 0.4 0.5 1.1 1.2 1.3 1.4 1.5 0.1 0.2 0.3 0.4 0.5];
edge  = 0.05:0.1:1.55;
count = histc(data, edge) 
```

结果：

```
 Columns 1 through 9

     2     2     2     2     2     0     0     0     0

  Columns 10 through 16

     0     1     1     1     1     1     0 
```

注意：最后有一个虚假的峰值长度（边缘）=长度（数据）+1。

然后正如 Paul R 所建议的，它归结为精度和舍入。您必须进入每个频率计数功能以查看每种语言如何解释它。如果我是你，我会将所有内容乘以 10 并将它们设为整数。

```
data=int8(data.*10)
edge  = 1:15;
count = histc(data, edge) 
```

结果：

```
 Columns 1 through 9

     2     2     2     2     2     0     0     0     0

  Columns 10 through 15

     0     1     1     1     1     1 
```

重要的是人类如何解释它，而不是机器。如果您知道您乘以 10 ^（您的精度）并将它们设为整数，那么您并不关心机器的实际功能。然后，如果您的数据中有无理数并且仍然看到错误，请检查浮点数的编码方式 (http://en.wikipedia.org/wiki/Floating_point)

干杯。

# java - Android：读取 wav 文件并显示其值

> ID：13744385
> 
> 赞同：3
> 
> 时间：2012-12-06T13:14:28.377
> 
> 标签：java, android

嗨，我正在尝试读取 wav 文件中的数据，以便将其绘制为波形。以下是我尝试过的代码：

```
 try {
        RandomAccessFile file = new RandomAccessFile(myFile,"r");
        while(file.read()>-1){
         byte b1 = (byte) file.read();
         byte b2 = (byte) file.read();
         Log.d(TAG,"DATA:"+ (double) (b2 << 8 | b1 & 0xFF) / 32767.0);
        }
        file.close();

    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

我的输出最初是一个介于 -1 和 +1 之间的值，但后来它只给出 DATA:0 它似乎是一个无限循环并且有一个力关闭。据我说，当到达文件末尾时，循环应该终止。任何人都可以为循环提出一些终止条件。请帮助....谢谢是提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:35:34.017

此代码段存在以下问题：

1）`file.read()>-1`在while循环中使用你仍然读取字节，所以这段代码在每次迭代中读取3个字节。

2) WAV 文件可能（并且经常是）带有 WAV 块的 RIFF 容器。此外，不能保证值以整数编码（我在 WAV 中看到过浮点编码）。字节顺序似乎没问题，但容器的元信息也会被打印出来。

我不是 Java 专家，但使用字节 (-1, -1) 运行表达式会得到非常接近 0 的值。

要检查文件终止，请检查是否有任何字节为 -1：`while ((b1 != -1) && (b2 != -1))`

此外，从`int`to的转换`byte`似乎是[错误](https://stackoverflow.com/questions/842817/how-does-java-convert-int-into-byte)的：字节已签名，因此您将获得从 -128 到 127 的值，这不是您想要的 (0..255)。

# sql - 将多行转换为具有多列的一行

> ID：13744386
> 
> 赞同：1
> 
> 时间：2012-12-06T13:14:30.123
> 
> 标签：sql, postgresql, crosstab

我有一个包含以下信息的表格：

```
idnumber     applic_id      cctype     ccnumber
---------  ------------    --------   ----------
    1           23            1         223445
    2           23            2         345567 
```

我需要一个这样的查询：

```
idnumber     applic_id      cctype     ccnumber  idnumber     applic_id      cctype     ccnumber
---------  ------------    --------   ----------  ---------  ------------    --------   ----------
    1           23            1         223445       2           23            2         345567 
```

有人有线索吗？我正在使用 PostgreSQL 8.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:22:11.433

您可以将`CASE`语句用于简单查询。
或者使用[tablefunc](http://www.postgresql.org/docs/current/interactive/tablefunc.html)`crosstab()`模块的功能来处理更复杂的情况和更好的性能。

您可以在此相关问题下找到这两种情况的示例：
[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:17:14.563

这称为 PIVOT。

您可以使用 PostgreSQL 中不存在的 PIVOT 关键字来执行此操作，也可以像这样使用穷人的枢轴：

**穷人的支点：**

*   [需要对表格进行透视或交叉制表，但不是以传统方式。请](https://stackoverflow.com/questions/8750839/need-to-pivot-or-crosstab-a-table-but-not-in-the-conventional-way-please/8756894#8756894)
*   [穷人的 SQL 枢轴。将问题列为列并在一行中列出每个用户的答案](https://stackoverflow.com/questions/3924641/poor-mans-sql-pivot-list-questions-as-columns-and-answers-per-user-in-one-row)

# c# - 打开 OPOS 设备时出错

> ID：13744393
> 
> 赞同：1
> 
> 时间：2012-12-06T13:14:38.587
> 
> 标签：c#, .net, opos

我正在使用 .net 的 OPOS 驱动程序来访问一些 POS 外围设备。我已经使用 SetupPOS utiltiy 添加了 LDN。但是当我尝试打开（打开命令）设备时，出现错误。

**消息：“配置信息错误”**

由于我添加了 LDN 并且对象初始化正在发生。尝试打开设备时发生错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:35:10.730

OPOS 设备通常将特定于设备的配置信息存储在注册表项下，例如：

```
HKEY_LOCAL_MACHINE\SOFTWARE\OLEforRetail\ServiceOPOS\<deviceType>\<deviceName> 
```

有时设备制造商（例如 Epson）会提供实用程序来更新注册表中的配置；有时不会，您必须手动完成。

从错误消息中，我认为配置存在一些问题 - 如果您自己无法解决，请提供有关设备的更多详细信息，并可能发布 HKEY_LOCAL_MACHINE\SOFTWARE\OLEforRetail\ 注册表项的内容。

# r - 在 R 中计算 Fisher 检验功率函数的正确参数

> ID：13744395
> 
> 赞同：-2
> 
> 时间：2012-12-06T13:14:59.107
> 
> 标签：r, statistics

我正在尝试计算 Fisher 在 R 中对 2x2 列联表的精确检验的功效。但不确定我是否使用了正确的参数。谁能看看我下面的逻辑并告诉我这是否是正确的方法？

使用的 R 函数（在 中`statmod`）：

```
power.fisher.test(p1, p2, n1, n2, alpha=0.05, nsim=100, alternative="two.sided") 
```

`p1`- 第一个要比较的比例。

`p2`- 要比较的第二个比例。

`n1`- 第一个样本量。

`n2`- 第二个样本量

我的示例列联表：

```
 Yes|No

Team1 a | b

Team2 c | d 
```

我计算上面列联表的比例和样本大小的方式。这些是正确的吗？还是我需要做任何修改？

```
p1=a/(a+c)

p2=b/(b+d)

n1=a+c
n2=b+d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:46:25.907

Fisher 精确检验用于检验组间的差异。因此，您必须计算每个团队中“是”的概率：

```
p1 = a/(a + b)

p2 = c/(c + d)

n1 = a + b
n2 = c + d 
```

# oop - OOP问题：如果对象通过基础对象传输，如何将对象转换为具体对象

> ID：13744398
> 
> 赞同：0
> 
> 时间：2012-12-06T13:15:03.187
> 
> 标签：oop, interface, ooad

我的演示代码如下：

```
 class Base
{

}

class SubA:Base
{
     private int propertyA;
     public int  PropertyA     
     {
          get{return propertyA}
      }
}

class SubB:Base
{
     private string propertyB;
     public string PropertyB     
     {
          get{return propertyB}
      }
}

class Program
{
     public void Action(Base obj)
     {
         //here i wanna use PropertyB if the ture obj is an instance of SubB.
         // use PropertyA if the true obj is an instance of SubA
     }
} 
```

我传递给函数“ `Action`”的真正对象是 SubB 或 SubA 的一个实例。我想访问“”中的`PropertyB`(if `SubB`) 或`PropertyA`(if `SubA`) `Action`。我是否违反了一些基本的 OO 规则？处理这种情况的最佳方法是什么（我不想使用 C# 关键字`As`来`Is`测试我转移的 obj）。我现在完全糊涂了。非常感谢任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:01:08.923

`as`您可以通过使用类型检查和强制转换（以及在 C# 中，正如您已经看到的那样）轻松绕过技术限制`is`，但这确实违反了基本的 OO 原则。

问题是您已定义`Action`期望`Base`作为参数接收，因此这是您应该依赖的唯一信息。如果一个类型的对象`Base`没有公开你需要它公开的数据，那么你需要修改它。例如，您可以将“Property”属性直接添加到基类，并将其变为某种泛型类型，或者变为具有两个子项的基本类型，一个支持`int`值，另一个`string`值。如果您还可以考虑*为什么* `Action`需要访问数据，并可能将这些数据的使用委托给`Base`它的子代，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:01:59.393

我认为您所做的很好，但是，您可能需要通过 if (obj is SubA) {} else if (obj is SubB) {} 找出 obj 的确切类名。

根据经验，创建 void Action(Base obj) 之类的函数的原因是为了处理 obj，无论它实际上是 Base 的哪个子类。因此，选择 obj 为 Base 类型意味着您决定不在函数内部进行特定于子类型的处理。

我看到在上面的代码中，创建超类 Base 只是为了能够将 SubA 或 SubB 传递给 Action，而在 Action(Base obj) 中，您的唯一目的似乎是根据它是否处理它子 A 或子 B。让 SubA 和 SubB 成为不继承 Base 的单独类更有意义。然后，您应该为 SubA 和 SubB 分别设置一个单独的 Action 重载：

```
class Program
{
     public void Action(SubA obj)
     {
         // process exactly as SubA
     }

     public void Action(SubB obj)
     {
         // process exactly as SubB
     }
} 
```

程序中的其他代码应该被结构化以知道正在处理 SubA 或 SubB 中的哪一个。您将根据用户输入或条件实例化 SubA 或 SubB。例如：

```
protected void saveButton_onClick(Object sender, EventArgs e)
{
    if (User.IsInRole("Administrator"))
    {
         Action(new SubA());
    }
    else
    {
         Action(new SubB());
    }
} 
```

将调用适当的动作重载。让程序的逻辑决定要实例化哪个类。尽可能避免“嗅探”对象的实际类型的需要。

# php - 如何在打开 php 标记之前在整个 php 项目中搜索额外的字符

> ID：13744401
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:15:16.053
> 
> 标签：php, eclipse

这个问题可能以前被问过，但我无法通过搜索找到它。

如何在打开的 php 标记 <?php 之前搜索我的整个 php 项目中的额外字符或行，这会导致标题和 ajax 问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:39:56.167

启动具有 RegEx 搜索功能的文本编辑器并搜索 `/.+<\?php/gsm` 基于 RegEx 搜索实现，它可能 启用`.+<\?php` 了*global*、*dotall*和*multiline*标志。

注意：此正则表达式将匹配具有多个开始`<?php`标记的文件。如果您有许多此类文件，则需要更复杂的解决方案。

# javascript - jquery悬停代码上的活动状态

> ID：13744404
> 
> 赞同：1
> 
> 时间：2012-12-06T13:15:23.430
> 
> 标签：javascript, jquery, html, css

我有以下代码，它在悬停时将我的图像名称从 image_off.jpg 更改为 image_on.jpg。我将它用于画廊。

```
 $(function(){
     $(".img-swap").hover(
          function(){this.src = this.src.replace("_off","_on");},
          function(){this.src = this.src.replace("_on","_off");
     });
}); 
```

但是，当我单击其中一张图像时，我希望图像名称保留在 image_on.jpg 上。这可能吗？当我单击另一个时，是否可以将其切换回关闭状态？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:49:39.117

Hope this helps

it will work fine as you want with hover on and off and when you click the img it will be selected and will stay there and hover affect will not work

and when you click the next img all the rest which are selected will be removed and the hover affect will work on that

EDIT ** Changed the code Try it now

```
$(function(){
    $(".img-swap").hover(
    function(){
        if(!$(this).hasClass("selected")) {
            this.src = this.src.replace("_off","_on");
        }
    },
    function(){

        if(!$(this).hasClass("selected")) {
            this.src = this.src.replace("_on","_off");
        }

    }).click(function(){
        $('.img-swap').removeClass('selected').attr('src',this.src.replace("_on","_off"));;
        this.src = this.src.replace("_off","_on");
        $(this).addClass("selected").attr('src',this.src.replace("_off","_on"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:16:19.870

您可以使用切换而不是悬停：

```
 $(".img-swap").toggle(
      function(){this.src = this.src.replace("_off","_on");},
      function(){this.src = this.src.replace("_on","_off");
 }); 
```

编辑：在点击时固定图像（防止它变回关闭），你可以这样做：

```
$(".img-swap").hover(
      function(){this.src = this.src.replace("_off","_on");},
      function(){if (!pinned) this.src = this.src.replace("_on","_off");
 }).click(){
      $(this).data('pinned': !($(this).data('pinned')||false));
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:27:00.977

这是一些（未经测试的）代码：

```
 $(function(){
     $(".img-swap").hover(
      function(){
          this.src = this.src.replace("_off","_on");
      },
      function(){
          if(!this.hasClass("selected")) {
            this.src = this.src.replace("_on","_off");
          }
     }).click(function() {
         $(".img-swap.selected").removeClass("selected");
         this.addClass("selected");
     });
 }); 
```

它所做的是`.selected`为每个单击的元素添加一个类。悬停功能检查此类，并且仅在未选择图像时进行替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:27:55.493

如果可以的话，您可以简单地为类添加 css 悬停事件

.img-swap:hover { src: image_on.jpg }

# php - 2维数组用逗号分隔成字符串

> ID：13744405
> 
> 赞同：-2
> 
> 时间：2012-12-06T13:15:28.587
> 
> 标签：php, arrays, string, type-conversion, comma

我当前的 php 代码返回三个数组。我想将这三个数组转换为 3 个逗号分隔的字符串。

我的阵列回声看起来像这样..

```
array (size=3)
     0 => 
    array (size=3)
      0 => string '1' (length=1)
      1 => string 'here' (length=4)
      2 => string 'Skincare composition against free radicals' (length=42)
  1 => 
    array (size=3)
      0 => string '2' (length=1)
      1 => string 'tere' (length=4)
      2 => string 'Compositions and methods for modification of skin lipid content' (length=63)
  2 => 
    array (size=3)
      0 => string '3' (length=1)
      1 => string 'fere' (length=4)
      2 => string 'Method and apparatus for acne treatment' (length=39) 
```

用一个简单的 php 代码片段帮助我将一个数组转换为逗号分隔值。我将处理循环以将我的三个数组转换为字符串..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:33:59.323

**如果您尝试将数组转换为逗号分隔的字符串，请使用 implode() ：**

```
<?php
    $oldArray = array(array("red","green","blue"),array("Larry","Moe","Curly"),array("puppy dogs","rainbows","butterflies"));

    foreach($oldArray as $array){
        $newArray[] = implode(",",$array);
    }

    echo "<pre>";
    print_r($newArray);
    echo "</pre>";
?>

/*
Output:
Array
(
    [0] => red,green,blue
    [1] => Larry,Moe,Curly
    [2] => puppy dogs,rainbows,butterflies
)

*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:18:37.810

这会做

```
$comma_separated = implode(",", $array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:22:14.390

命名您的数组`for example: $array1`，然后使用 foreach 制作一个数组。从那里使用 implode 制作一个字符串。例如：

```
foreach ($array1 as $value1){
 foreach ($value1 as $value){
  $newString[]=$value;
 }
}
$string=implode(", ", $newString);
echo $string; //will echo comma separated string 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:25:16.627

不清楚你在问什么，但我假设你想要`implode`内部数组并最终得到一个由 3 个字符串组成的数组。如果我是对的，以下方法可以解决问题：

```
$arr = array(
  array(1, 'badger', 'longer text about badger'), 
  array(2, 'ferret', 'longer text about ferret'), 
  array(3, 'hamster', 'longer text about hamster'), 
);

// This is the line you're interested in
$newArr = array_map(function($el) { return implode(', ', $el); }, $arr);

var_dump($newArr);

/** Gives output:
array(3) {
  [0]=>
  string(35) "1, badger, longer text about badger"
  [1]=>
  string(35) "2, ferret, longer text about ferret"
  [2]=>
  string(37) "3, hamster, longer text about hamster"
}
**/ 
```

# android - 在 android.mk 的目录和子目录中创建所有 .cpp 文件的 FILE_LIST

> ID：13744406
> 
> 赞同：0
> 
> 时间：2012-12-06T13:15:31.240
> 
> 标签：android, c++, makefile, java-native-interface, cocos2d-x

我正在尝试将所有 目录和所有文件都包含`.cpp`在子目录中。但我不能这样做，请检查我的打击文件。`Classes,EasyLib and EasyLibUse``.cpp``android.mk`

我这样做是为了包含我的游戏`.cpp`文件。`cocos2dx``android`

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

FILE_LIST := $(wildcard $(LOCAL_PATH)/../../Classes/*.cpp)
FILE_LIST += $(wildcard $(LOCAL_PATH)/../../EasyLib/**/*.cpp)
FILE_LIST += $(wildcard $(LOCAL_PATH)/../../EasyLibUse/**/*.cpp)

LOCAL_SRC_FILES := hellocpp/main.cpp \
                   $(FILE_LIST:$(LOCAL_PATH)/%=%)

LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes                   
LOCAL_C_INCLUDES += $(LOCAL_PATH)/../../Lib  
LOCAL_C_INCLUDES += $(LOCAL_PATH)/../../LibUse  

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) 
```

**编辑：**

```
FILE_LIST += $(wildcard $(LOCAL_PATH)/../../EasyLib/**/*.cpp)

FILE_LIST += $(wildcard $(LOCAL_PATH)/../../EasyLibUse/**/*.cpp) 
```

这两个无法在子目录中构建 .cpp 文件。

问候， Aqif

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:17:16.533

这是我的 Android.mk，我想这就是你要找的：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

cppfiles := $(shell find $(LOCAL_PATH) -name "*.cpp" -printf "%P \n")

LOCAL_SRC_FILES := $(cppfiles)

folders := $(shell find $(LOCAL_PATH) -type d -printf "%P \n")

LOCAL_C_INCLUDES := $(folders)     

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) 
```

# vb.net - 在VB中使图像相交和重力

> ID：13744411
> 
> 赞同：0
> 
> 时间：2012-12-06T13:15:55.270
> 
> 标签：vb.net

我基本上有一堆黑盒子，我希望玩家（PictureBox1）有重力，下落，撞到盒子，所以他们必须跳过它们......我有一切的基本运动，只是“物理学”我需要编码。

下面的代码在计时器上运行，因此它总是将玩家向下推 8，如果它与一个块相交，它就会开始向另一个方向推......

我将所有“块”与 Blocks(49) = Picturebox .. 分组，然后分别执行 Blocks(1)= Pictuebox1 ， Blocks(2) = Picturebox2。很快...

```
 PictureBox1.Top += 8

    For x As Integer = 1 To 1

        If PictureBox1.Bounds.IntersectsWith(floor(x).Bounds) And floor(x).Visible = True Then
            standing = True
            PictureBox1.Top -= 1
        End If
    Next x

    For y As Integer = 1 To 49
        If PictureBox1.Bounds.IntersectsWith(blocks(y).Bounds) And blocks(y).Visible = True Then
            standing = True
            PictureBox1.Top -= 1
        End If

    Next y 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:36:07.507

> 我将所有“块”与 Blocks(49) = Picturebox .. 分组，然后分别执行 Blocks(1)= Pictuebox1 ， Blocks(2) = Picturebox2。很快...

我当然希望你不要做 Blocks(1)= Picturebox1 因为 PictureBox1 是你的播放器，而不是一个块 ;-) 此外，数组在 VB.NET 中是基于 0 的，所以你应该从索引 0 开始。在你的表单中，而不是命名你的块 PictureBox2、PictureBox3 等。我建议将它们命名为 BlockPicBox1、BlockPicBox2 等。然后你可以像这样分配你的数组：

```
Dim Blocks As PictureBox() = {BlockPicBox1, BlockPicBox2, BlockPicBox3, BlockPicBox4, ...} 
```

现在让我们看看你的代码：

```
For x As Integer = 1 To 1
    ....
Next 
```

这个循环是错误的。您想遍历所有楼层。使用 Count 属性确保循环遍历所有楼层，或者更好的是，使用 For Each 循环。

```
If PictureBox1.Bounds.IntersectsWith(floor(x).Bounds) And floor(x).Visible = True Then
    standing = True
    PictureBox1.Top -= 1
End If 
```

条件看起来不错，但为什么要将 Top 属性减去 -1？您希望您的角色站在地板上，因此请相应地设置 Top 属性。

您还应该处理您的命名，这将有助于使您的代码更具可读性。例如，使用 PlayerPicBox 代替 PictureBox1。并为数组使用复数（“floors”而不是“floor”）。那将给出：

```
For Each currentFloor As PictureBox in floors
    If currentFloor.Visible AndAlso PlayerPicBox.Bounds.IntersectsWith(currentFloor.Bounds) Then
        standing = True
        PlayerPicBox.Top = currentFloor.Top - PlayerPicBox.Height
    End If
Next 
```

同样的原则适用于您的第二个循环。

# sql - 插入循环

> ID：13744412
> 
> 赞同：1
> 
> 时间：2012-12-06T13:15:58.097
> 
> 标签：sql, sql-server, performance, insert, while-loop

我在 SQL SERVER 上有一个脚本：

```
while (@i < 100000)
begin
  insert into TABLE_NAME (id, pid, value)
    values (@i
          , (select top 1 id from TABLE_NAME order by NEWID())
          , 'b')
  set @i += 1;
end; 
```

它执行起来真的很慢。是否可以做同样的事情但更快？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:13:54.157

由于子查询，您的查询真的很慢，必须`table_name`在每次迭代中进行随机排序。

您可以使用以下方法执行此操作`rand()`：

```
while (@i < 100000)
begin
  insert into TABLE_NAME (id, pid, value)
    select @i, 
           cast(rand() * @i as int) as pid,
           'b'
  set @i += 1;
end; 
```

这将始终生成一个小于 id 的 pid。

如果这很慢，如果您的数据库处于完全恢复模式并记录所有操作，您可能会减慢速度。

而且，还有这种方法。生成 100,000 个数字，为​​每个数字分配一个随机数，然后将该随机数取模原始数 - 1：

数字为（选择0作为数字联合全部选择1联合全部选择2联合全部选择3联合全部选择4联合全部选择5联合全部选择6联合全部选择7联合全部选择8联合全部选择9），数字为（选择(d1.digit*10000+d2.digit*1000+d3.digit*100+d4.digit*10+d5.digit) as val from digits d1 交叉连接数字 d2 交叉连接数字 d3 交叉连接数字 d4 交叉连接数字 d5 ) select val as id, (case when val > 1 then seqnum % (val - 1) end) as pid, 'b' from (select *, ROW_NUMBER() over (order by newid()) seqnum from nums )

这在我的机器上运行得非常快。没有插入，它在几秒钟内完成。

# objective-c - NSTask 和 AuthorizationCreate

> ID：13744413
> 
> 赞同：1
> 
> 时间：2012-12-06T13:16:00.577
> 
> 标签：objective-c, macos, cocoa

在我的 Cocoa 应用程序中，我需要以 root 权限运行另一个应用程序，但它不起作用！NSTask 没有所需的权限。AuthorizationCreate 部分是我获得所需权限的地方。Running NSTask 是我运行另一个应用程序的部分。

myStatus 返回 errAuthorizationSuccess。

这是代码

```
//Authorization Create
    AuthorizationRef myAuthorizationRef;
OSStatus myStatus;
myStatus = AuthorizationCreate (NULL, kAuthorizationEmptyEnvironment,
                                kAuthorizationFlagExtendRights | kAuthorizationFlagInteractionAllowed , &myAuthorizationRef);
AuthorizationItem myItems[1];  

myItems[0].name = "com.myOrganization.myProduct.myRight1";
myItems[0].valueLength = 0;
myItems[0].value = NULL;
myItems[0].flags = 0;

AuthorizationRights myRights;
myRights.count = sizeof (myItems) / sizeof (myItems[0]);
myRights.items = myItems;

AuthorizationFlags myFlags;
myFlags = kAuthorizationFlagDefaults |
kAuthorizationFlagInteractionAllowed |
kAuthorizationFlagExtendRights;

myStatus = AuthorizationCopyRights (myAuthorizationRef, &myRights,
                                    kAuthorizationEmptyEnvironment, myFlags, NULL);

if (myStatus==errAuthorizationSuccess)
{

//Running NSTask
    //setting license
    NSTask *task;
    task = [[NSTask alloc] init];
    [task setLaunchPath: @"/opt/cprocsp/sbin/cpconfig"];

    NSArray *arguments;
    arguments = [NSArray arrayWithObjects:@"-license", @"-set",
             @"lalala", nil];
    [task setArguments: arguments];

    NSPipe *pipe;
    pipe = [NSPipe pipe];
    [task setStandardOutput: pipe];

    NSFileHandle *file;
    file = [pipe fileHandleForReading];

    [task launch];

    NSData *data;
    data = [file readDataToEndOfFile];

    NSString *string;
    string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
    NSLog (@"grep returned:\n%@", string);
    [_logs insertText:string];
}
myStatus = AuthorizationFree (myAuthorizationRef,
                              kAuthorizationFlagDestroyRights); 
```

我不能使用 STPrivilege，因为它是一个 ARC 项目。我做错了什么？谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:20:56.670

我不知道我做错了什么，但通过非常奇怪的解决方案解决了它:(((

```
NSDictionary *error = [NSDictionary dictionary];
NSAppleScript *run = [[NSAppleScript alloc]initWithSource:@"do shell script \"/opt/cprocsp/sbin/cpconfig   -license -set lala\" with administrator privileges"];
[run executeAndReturnError:&error]; 
```

我不太喜欢它。

# haskell - 使用 cabal-dev 避免依赖冲突

> ID：13744417
> 
> 赞同：0
> 
> 时间：2012-12-06T13:16:12.027
> 
> 标签：haskell, dependencies, dependency-management, cabal

目前，我已经按照[Volker Schatz 在全球安装 cabal](http://www.volkerschatz.com/haskell/glocabal.html)中的说明在全球范围内安装了 cabal 。在[了解 cabal 依赖消息](https://stackoverflow.com/questions/13726483/understanding-cabal-dependency-messages)的帖子中，我在尝试安装 GOA 时遇到了依赖冲突，因此想尝试通过 cabal-dev（[Rogan Creswick 的 cabal-dev](https://github.com/creswick/cabal-dev)）安装 GOA 以隔离安装（如果我理解的话正确 cabal 将来会包含沙盒功能，请参阅[Johan Tibell 的 cabal 沙盒](http://blog.johantibell.com/2012/08/you-can-soon-play-in-cabal-sandbox.html)，但由于它仍在开发中，我想试试 cabal-dev）。

**问题**：鉴于 my`~/.cabal`是一个符号链接`/usr/local/share/cabal`（如 url [1](http://www.volkerschatz.com/haskell/glocabal.html)中所做的那样），我将如何使用 cabal-dev 安装 GOA？理想情况下，安装仍将放置在 中`/usr/local/share/cabal`，但可能会放置在专门的目录中，例如`/usr/local/share/cabal/cabal-dev`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:50:41.647

As I understand it, the purpose of cabal-dev is to create an isolated environment just for compiling your project or a specific set of subprojects with compatible dependencies. The only thing you need to do is to run cabal-dev in the directory of your "cabalized" project, and it will locate the correct set of version for all your dependencies and compile and install them locally, in "cabal-dev" of your subdirectory. If you asked it to do that in a centralized location, like "/usr/local/...", then you would be defeating the whole purpose of cabal-dev. If you are still in doubt, please check virtualenv... cabal-dev works in a somewhat similar fashion.

# objective-c - 如何设置 UISegmentedControll 的样式？

> ID：13744418
> 
> 赞同：1
> 
> 时间：2012-12-06T13:16:18.230
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 创建一个 iOS 应用程序。在其中一个视图中，我使用的是 UIsegmentedcontroller，它工作正常。

我该如何自定义它。我需要为整个背景使用自定义背景图像（这不起作用）和每个按钮的图像（这有效）。

*这是我当前的代码：*

```
options = ["Selected","Unselected"]
    segment = UISegmentedControl.alloc.initWithItems(options)
    segment.addTarget(self, action: :'open:', forControlEvents:UIControlEventValueChanged)
    segment.frame = [[0, 0],[320, 40]]
    segment.segmentedControlStyle = 7
    segment.selectedSegmentIndex = 0
    segment.setImage(button, forSegmentAtIndex:0)
    segment.setImage(button2, forSegmentAtIndex:1) 
```

*我试过这段代码：*

```
segment.apperance.setBackgroundImage(button, forState:UIControlStateNormal , forBarMetrics:UIBarMetricsDefault)

segment.setBackgroundImage(button, forState:UIControlStateSelected , forBarMetrics:UIBarMetricsDefault) 
```

*但如果我这样做，我会收到此错误：*

```
undefined method `appearance' for #<UISegmentedControl:0x9655a90> (NoMethodError) 
```

*我也尝试过没有外观，但后来我得到了：*

```
undefined method `setBackgroundImage' for #<UISegmentedControl:0x946db70> (NoMethodError) 
```

**更新**

*我试过了，背景上没有显示图像：*

```
segment.setBackgroundImage(background, forState:UIControlStateNormal, barMetrics:UIBarMetricsDefault) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:29:38.990

利用 **`setBackgroundImage:forState:barMetrics:`**

它为给定的状态和条形指标设置背景图像。

您可以在[Apple.Developer 文档中查看详细信息](http://developer.apple.com/library/IOS/#documentation/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html#//apple_ref/doc/uid/TP40006807-CH3-SW38)

**示例代码：**

取自[这里](https://stackoverflow.com/questions/9114186/customizing-uisegmentedcontrol-in-ios-5)

```
[[UISegmentedControl appearance] setDividerImage:segmentUnselectedUnselected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:segmentSelectedUnselected forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:segUnselectedSelected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

[[UISegmentedControl appearance] setBackgroundImage:segmentUnselected forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setBackgroundImage:segmentSelected forState:UIControlStateSelected barMetrics:UIBarMetricsDefault]; 
```

# html - Illustrator SVG 导出不起作用（未定义命名空间前缀 inkscape）

> ID：13744422
> 
> 赞同：5
> 
> 时间：2012-12-06T13:16:29.930
> 
> 标签：html, graphics, vector, svg, inkscape

我是矢量编辑领域的新手。我正在尝试从 .AI 文件中导出 .SVG 文件。但是，当我导出它时，在生成的文件中出现以下错误：

```
Error on line 57 at column 354: Namespace prefix inkscape for cy on namedview is not defined 
```

有人可以告诉我这意味着什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-23T07:57:30.840

尝试使用文本编辑器打开 SVG 文件：您会看到一些带有 inkscape 命名空间的 XML 属性，例如

```
inkscape:label="Some label" 
```

这些属性可能来自原始 SVG 文件（我猜你是从 Wikipedia 获取的？）。您可以安全地删除它们——也许在您的文本编辑器中使用 grep 查找和替换，例如：

```
find inkscape:label="[^"]*" replace with "" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-29T19:42:08.657

我当然希望他们最终能解决这个问题。值得 Adob​​e 称赞的是，这个问题的原因是 Illustrator 试图保留它不使用的信息，以便与其他程序配合使用。

有几种解决方法。

1.  使用 InkScape 另存为纯 SVG。如果您事先了解问题，并且可以在导入 AI 之前简单地从 InkScape 保存一份普通副本，这将非常有效。或者，如果您事先不知道，但不介意重新开始并重新调整从 InkScape 导入后更改的任何“坏”元素，您可以从 InkScape 保存为普通元素，然后拉入并重新调整这些元素有问题的元素。但是，如果您想进行后处理而不是修复 AI 文件（请参阅 Chip 的回答），最快且破坏性最小的选项可能是使用正则表达式（正则表达式，见下文）而不是使用 InkScape。

2.  导出为 SVG。最新版本的 Illustrator 现在允许您导出为 SVG，以替代保存副本/另存为。即使存在最初来自 InkScape 的元素，这也会生成一个 Chrome 和 InkScape 都能够打开的文件，而两者都无法打开我使用“保存副本”创建的无效文件。警告：在我非常小的比例（16 像素高的图标）中，这种“网络优化”导出明显丢失了信息/精度——即使精度为小数点后 5 位——尽管它确实消除了严重错误。

3.  [更新：**保存副本**/另存为 SVG 现在是可行的。我刚刚升级了这两个程序，似乎 InkScape 现在能够打开由 Illustrator 创建的无效文件，尽管 Chrome 和 Illustrator 仍然不能。我希望这意味着从 Illustrator 中执行另存为，然后从 InkScape 中执行另存为纯格式是现在获得一个干净且精确的 SVG的**最快方法（尽管 InkScape 确实警告说纯格式可能会丢失某些类型的数据）。**]

4.  **修复 SVG 代码**。Philippe 的解决方案似乎是真正修复最新文件中当前损坏的内容而不会丢失（很多？）精度/信息的**最佳方法。**在记事本++中，我可以用任何东西替换这个正则表达式：`inkscape:[^"]+"[^"]+"`或者，更安全的是，`inkscape:(export-|connector-curvature)[^"]+"[^"]+"`. 将副本保存为 SVG 并手动识别并修复问题后，Illustrator 能够打开 SVG 文件，因此您可以将有问题的元素复制/粘贴回 AI 文件中，然后解决问题。唷。

注意：在不查看任何 SVG 代码的情况下手动识别“坏”元素的方法是将内容分解为画板，另存为 SVG，然后查看哪些无法打开。一旦你知道了这一点，你就可以使用上面的一种解决方法来替换那些部分（因为你仍然会失去这些部分的精度）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-07T14:30:30.043

Inkscape 允许您将文件保存为纯文本。这将摆脱 Inkscape 引用。还有一种用于批处理的命令行 (bash) 方法。

```
for i in *.svg; do inkscape -z -f $i -l $i; done 
```

这可以对从 Illustrator 创建的“另存为”SVG 文件执行（此时 Illustrator 不导出 SVG）。我还没有弄清楚如何从 Illustrator 文件中获取参考资料。现在，我坚持对所有 Illustrator 创建的 SVG 文件进行后期处理。

# android - 从资源中设置背景图片

> ID：13744423
> 
> 赞同：1
> 
> 时间：2012-12-06T13:16:36.250
> 
> 标签：android, android-layout, bitmap, background-image

我有一个视图，它有一个方法`setBackgroundImage(BitmapDrawable)`，并且我`imgbg`在 res 的 drawable 文件夹中有一个图像。

如何将此图像设置为背景图像？

`view.setBackgroundImage(R.drawable.imgbg);`不能像`R.drawable.imgbg`整数一样工作，但方法需要可绘制。

我知道这很愚蠢，但即使经过密集的谷歌搜索，我也无法解决。

任何帮助表示赞赏。

## 编辑

此代码段不属于 Activity 类，所以我没有`context`对象或`getResources()`或`getApplicationContext()`...

## 编辑2（解决方案）：

```
public class PieChartDemo01View extends View 
{
public PieChartDemo01View(Context context) 
{
    super(context);
    Drawable drawable = super.getResources().getDrawable(
        R.drawable.bg2);
    BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:24:55.143

```
view.setBackgroundImage(getResources().getDrawable(R.drawable.imgbg)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:18:39.267

试试这个 ：

```
view.setImageResource(R.drawable.imgbg); 
```

更新 ：

```
Drawable imgbg = context.getResources().getDrawable( R.drawable.imgbg );
view.setBackgroundImage(imgbg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:21:55.990

试试这个：

```
view.setBackgroundResource(R.drawable.imgbg); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:21:55.990

通过资源 id 获取 Drawable 并在您的方法中使用它：

```
Drawable drawable = context.getResources().getDrawable(R.drawable.imgbg) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T13:29:28.700

也许将其更改为

`BitmapDrawable background = new BitmapDrawable(BitmapFactory.decodeResource(getResources(),R.drawable.imgbg)) setBackgroundImage(background);`

那应该可以工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T14:16:26.740

简单 首先获取drawable，然后在bitmapDrawable 中设置cast。

```
Drawable drawable=getApplicationContext().getResources().getDrawable(R.drawable.imgbg);
            BitmapDrawable bitmapDrawable=(BitmapDrawable) drawable; 
```

Just Do It 亲爱的它的工作。

# c++ - 解决将对象传递给抛出的函数时可能出现的内存泄漏

> ID：13744426
> 
> 赞同：3
> 
> 时间：2012-12-06T13:16:47.060
> 
> 标签：c++, memory-leaks, exception-handling

考虑函数 foo(MyClass* mc) 应该将 mc 的副本保留到内部数据结构中的情况，并保证在不再使用时将删除该对象。

```
void foo(MyClass* mc) // acquires ownership of mc; may throw
{
  // code that may throw
  bar(mc); // acquires mc; may also throw
} 
```

当此函数执行可能抛出的代码（例如，OutOfMemory 异常）时，就会出现问题。如果在将指针保存到数据结构之前引发异常，则显然应该在函数展开之前释放对象，因为调用者不再对它负责（调用者甚至不知道指针是否实际保存在数据结构与否）。

可以使用 RAII 和范围保护来处理这个问题，但它看起来很笨拙，并且会产生一些开销（必须在每个获取指针的函数中完成）。

每次获取动态分配的对象时是否真的需要这样做，还是有一种更简洁的方法来做到这一点？！

```
template <class T>
struct VerifyAcq {
  T* ptr;
  bool done;
  VerifyAcq(T* ptr):ptr(ptr) { done = false; }
  ~VerifyAcq() {
    if (!done) delete ptr;
  }
};

void foo(MyClass* mc) // acquires mc; may throw
{
  VerifyAcq<MyClass> va(mc);
  // code that may throw
  bar(mc); // acquires mc; may throw; must implement the same mechanism!
  va.done = true;
}
// Note: there might be no public way of "undoing" what bar has done (no rollbak)
// and even if there was, what if it could also throw?... 
```

调用者不能为了删除指针而捕获异常，因为在抛出异常之前，函数可能已经成功地将指针添加到数据结构中，释放对象会使数据结构变得不健全（悬空指针）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:28:06.937

当我开始阅读代码时，我停在了这一点上：

```
void foo(MyClass* mc) // acquires ownership of mc; may throw 
```

评论不是记录所有权收购的最佳方式。最好的方法是使用类型系统。

```
 void foo(std::unique_ptr<MyClass> mc) // no comment required 
```

修复接口也最终解决了问题。

（如果您的标准库中没有 unique_ptr，还有其他替代方法，例如[Howard Hinnant 在 C++03 中的仿真](http://home.roadrunner.com/~hinnant/unique_ptr03.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:28:12.707

提到 RAII 时，您的想法是正确的。

在您提到的场景中，您指出删除应该只在`bar`函数以某种方式无法存储指针时发生。像这样的共享指针[`boost::shared_ptr`](http://www.boost.org/doc/libs/release/libs/smart_ptr/shared_ptr.htm)非常适合：

```
void foo(boost::shared_ptr<MyClass> mc)
{
    // code that may throw
    bar(mc); // acquires mc; may also throw
}

void bar(boost::shared_ptr<MyClass> mc)
{
    // code that may store the shared_ptr somewhere
} 
```

只要资源（指针）至少有一个共享指针处于活动状态，它就不会被删除。一旦最后一个共享指针被销毁或重置，资源就会被删除。

例如：如果函数存储了共享指针，那么函数结束`bar`时不会发生删除。`foo`或者，如果`bar`函数未能存储共享指针，则在`foo`结束时将发生删除（假设没有其他共享指针对资源处于活动状态）。

# php - 如果验证未通过 PHP 或 Jquery 传递，则停止 Jquery 显示 img

> ID：13744427
> 
> 赞同：0
> 
> 时间：2012-12-06T13:16:47.487
> 
> 标签：php, jquery, validation

好的，所以我使用 Jquery 创建了一个 ajax 添加到购物车。基本上点击一个按钮，数据被传递到一个php页面，使用jquery，然后返回数据，这些数据被转换成变量，项目被添加到购物车，购物车被弹出，“项目添加到购物车”图像是显示为确认。无论如何......这一切都很完美。

这是我的jQuery代码：

```
$(document).ready(function(){

    $("#qtyform").validationEngine({promptPosition : "topLeft:0,15", scroll: false});
    //Examples of how to assign the ColorBox event to elements

    $("#cartbtn").click(function () {
        //$('.addcartform').submit();
        $("#cbox").stop(true,false).animate({right:  0}, 500);
        Qty=document.qtyform.Qty.value;
        ProductID=document.qtyform.ProductID.value;
        CatID=document.qtyform.CatID.value;
        Price=document.qtyform.Price.value;
        <?php if(isset($_GET['cart'])) {?>
        itemid=document.qtyform.itemid.value;
        <?php }elseif(isset($_GET['del'])){ ?> 
        itemid2=document.qtyform.itemid2.value;
        <?php } ?>
        //$('#cartresult').load("process.php?Qty="+Qty+"&ProductID="+ProductID+"&CatID="+CatID+"&Price="+Price<?php if(isset($_GET['cart'])) {?>+"&itemid="+itemid<?php }else if (isset($_GET['del'])){ ?>+"&itemid2="+itemid2<?php } ?>);

        $.get("process.php?Qty="+Qty+"&ProductID="+ProductID+"&CatID="+CatID+"&Price="+Price<?php if(isset($_GET['cart'])) {?>+"&itemid="+itemid<?php }else if (isset($_GET['del'])){ ?>+"&itemid2="+itemid2<?php } ?>, function(data) {
         //alert("Data = "+data);
         mydata = data; 
         var mytext = mydata.split('#');

        var message = mytext[0];
        var linkto = mytext[1];
        var hreftext = mytext[2];
        var finalQty = mytext[3];

        $('#cartresult').html('<span style="margin:0px 0px 0px 30px"><img src="images/ajax-loader-cart.gif" width="24" height="24" alt="" /></span>');

        document.getElementById('cartresult').innerHTML = '<br /><a href="'+linkto+'">'+hreftext+'</a>';
        document.getElementById('cartnum').innerHTML = finalQty;

        });
    });
}); 
```

现在的问题是：

```
$("#qtyform").validationEngine({promptPosition : "topLeft:0,15", scroll: false}); 
```

上面的行使用 Jquery 内联验证来验证 Quantity 的输入框。如果输入的值不是数字，则不会将其添加到购物车中。这也有效，但仍显示添加到购物车的图像。我想阻止这一切。添加图像的行是这一行：

```
$('#cartresult').html('<span style="margin:0px 0px 0px 30px"><img src="images/ajax-loader-cart.gif" width="24" height="24" alt="" /></span>'); 
```

任何人都可以在 Jquery 或 PHP 中建议一种方法来检查输入的值是否为数字，或者如果没有任何内容添加到篮子中，则以某种方式停止显示图像。我对 Jquery 相当陌生，但可以弄清楚，我对 PHP 更擅长。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:21:02.667

你的意思是

```
if (message.indexOf("error") !=-1) { alert('Nope'); return false;} 
else {
    $('#cartresult').html('<span style="margin:0px 0px 0px 30px"><img src="images/ajax-loader-cart.gif" width="24" height="24" alt="" /></span>');

    document.getElementById('cartresult').innerHTML = '<br /><a href="'+linkto+'">'+hreftext+'</a>';
    document.getElementById('cartnum').innerHTML = finalQty;
} 
```

# android - SMSPlugin 无法使用 cordova-2.2.js

> ID：13744429
> 
> 赞同：0
> 
> 时间：2012-12-06T13:16:48.813
> 
> 标签：android, cordova

SMSPlugin 不适用于 phonegap 2.2

如何使用cordova phonegap 2.2发送免费短信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:30:59.030

将 this.ctx.getContext() 更改为 this.cordova.getActivity() 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:53:04.430

工作示例插件和应用程序，适用于 Cordova 2.2.0 和 Android 4.2：

[https://github.com/DavidWalley/CordovaPlugin_AndroidSmsRead](https://github.com/DavidWalley/CordovaPlugin_AndroidSmsRead)

# iphone - 如何用自定义图像替换 UIBarButton 图像？

> ID：13744439
> 
> 赞同：1
> 
> 时间：2012-12-06T13:17:21.587
> 
> 标签：iphone, image, uibarbuttonitem, appearance

我尝试将其设置为自定义并将图像放在上面，但它只会更改中间图标，我该如何更改整个按钮的外观？

我想把这个图标：[http ://cl.ly/image/3B2P0p0p1e1a](http://cl.ly/image/3B2P0p0p1e1a)

但我得到的只是：[http ://cl.ly/image/3M2j2Y292l2K](http://cl.ly/image/3M2j2Y292l2K)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:19:54.230

使用下面的代码..

```
- (void)viewDidLoad
{
        UIImage *menuButtonImage = [UIImage imageNamed:@"list.png"];// set your image Name here 
        UIButton *btnToggle = [UIButton buttonWithType:UIButtonTypeCustom];
        [btnToggle setImage:menuButtonImage forState:UIControlStateNormal];
        btnToggle.frame = CGRectMake(0, 0, menuButtonImage.size.width, menuButtonImage.size.height);
        UIBarButtonItem *menuBarButton = [[UIBarButtonItem alloc] initWithCustomView:btnToggle];
        [btnToggle addTarget:self action:@selector(toggleCalendar) forControlEvents:UIControlEventTouchUpInside];
        self.navigationItem.leftBarButtonItem = menuBarButton;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T12:23:25.930

使用下面的代码非常简单地制作自定义 UIBarButtonItem

```
- (void)viewDidLoad{
[super viewDidLoad];
    UIBarButtonItem *backButton = [[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"nav-arrow.png"] style:UIBarButtonItemStylePlain target:self action:@selector(backTabBtnPressed:)];
    self.navigationItem.leftBarButtonItem = backButton;
} 
```

之后创建后退按钮方法。

```
-(IBAction)backTabBtnPressed:(id)sender{
    //do backbutton coding
}` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:24:56.813

您可以做的是制作与 UIBar 大小相同的图像（现在您的 UIbar 已自定义），然后在其上放置自定义按钮。就是这么简单。只需转到您的 xib 或情节提要并加载您作为 UIBar 制作的 UIImage 并将其设置在您的视图上，然后将自定义按钮拖到它上面，瞧！

# java - java nio socketchannel：客户端到多个服务器

> ID：13744440
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:17:32.900
> 
> 标签：java, tcp, client, nio, socketchannel

我的项目实际上非常基本，但我找不到正确的信息（即：我只能找到如何创建一个接受多个客户端的服务器）。

这个想法很简单：
我想创建一个客户端来连接到多个服务器，并从中查询内容+等待自主消息。
给出一个粗略的想法，我想创建一个简单的程序，通过创建与它们的 SSH 连接（使用 Jsch）来监控多个服务器，进行登录，每分钟发送 1 个命令以检索服务器上的所有警报。并且服务器也会在它们出现时立即发送警报。

那么我的问题是：有没有人有任何关于如何进行的例子？任何教程？（谷歌没有太大帮助，但也许我没有足够努力）。

注意：我已经能够在线程中使用常规套接字来做同样的事情，但是由于我想轮询数千台服务器，我被告知打开相等数量的线程+套接字是个坏主意......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:47:25.280

我怀疑你会找到在 NIO 上运行的 SSH 实现。

我进一步怀疑这有什么意义。该协议足够重量级，使用 NIO 保存线程不会有任何区别，或者实际上会在您为 NIO 线程当前正在服务的任何通道进行加密和解密时使其他服务通道饥饿，从而使情况变得更糟。考虑到您实际上每隔 1 分钟轮询一次，所以一开始就没有太多理由使用 NIO。

使用 JSch 或 Ganymed SSH 或其他 SSH 库、线程之一，继续您的生活。

# xslt-1.0 - 如何参数化分组？

> ID：13744443
> 
> 赞同：1
> 
> 时间：2012-12-06T13:17:41.667
> 
> 标签：xslt-1.0

我有按给定属性分组的代码。当我给出确切的属性名称时，它工作正常。但是，我想使用 Javascript xsltProcessor.setParameter 进行参数化以设置分组的属性名称。

据我所知，XSLT 1.0 不允许在 xsl:key 匹配或使用属性中使用变量或参数。因此，如果我不能通过这种方式进行参数化，我想，我需要编写这么多的 XSL 文件，就像我想使用的按属性分组一样多。如果有人能给我一个技巧或解决方案，我将不胜感激。

这是准确给出属性的 xls，效果很好：

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes"/>

    <xsl:key name="groupName" match="stickieshighlights/item" use="@color"/>
    <xsl:key name="eachitem" match="stickieshighlights/item" use="concat(@color,'|', @id)"/>

    <xsl:template match="stickieshighlights">
        <stickieshighlights>
             <xsl:apply-templates select="item[generate-id()=generate-id(key('groupName',@color)[1])]" mode="groupby"/>
        </stickieshighlights>
    </xsl:template>

    <xsl:template match="item" mode="groupby">
        <color name="{@color}">
             <xsl:apply-templates select="key('groupName',@color)[generate-id()=generate-id(key('eachitem',concat(@color,'|', @id))[1])]" mode="list"/>
        </color>
    </xsl:template>

    <xsl:template match="item" mode="list">
        <item id="{@id}" icon="{@icon}" date="{@date}" tags="{@tags}" url="{@url}" title="{@title}" content="{@content}" >
        </item>
    </xsl:template>   

    </xsl:stylesheet> 
```

这是我尝试使用参数，但出现错误：键不能在表达式中包含变量。

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes"/>

    <xsl:param name="group_By" />

    <xsl:key name="groupName" match="stickieshighlights/item" use="$group_By"/>
    <xsl:key name="eachitem" match="stickieshighlights/item" use="concat($group_By,'|', @id)"/>

    <xsl:template match="stickieshighlights">
        <stickieshighlights>
             <xsl:apply-templates select="item[generate-id()=generate-id(key('groupName',$group_By)[1])]" mode="groupby"/>
        </stickieshighlights>
    </xsl:template>

    <xsl:template match="item" mode="groupby">
        <xsl:element name="{$group_By}" > 
        <xsl:attribute name="{{$group_By}}"><xsl:value-of select="current()"/></xsl:attribute>
             <xsl:apply-templates select="key('groupName',$group_By)[generate-id()=generate-id(key('eachitem',concat($group_By,'|', @id))[1])]" mode="list"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="item" mode="list">
        <item id="{@id}" icon="{@icon}" color="{@color}" date="{@date}" tags="{@tags}" url="{@url}" title="{@title}" content="{@content}" >
        </item>
    </xsl:template>   

    </xsl:stylesheet> 
```

# uiviewcontroller - 使用 Storyboard 通过 ViewController 传递数据

> ID：13744448
> 
> 赞同：0
> 
> 时间：2012-12-06T13:17:53.333
> 
> 标签：uiviewcontroller, uitextfield, storyboard

我在 SecondVC 上有两个视图控制器`UITextField`，我想将数据推回到`UILabel`第一个视图控制器中的 a 中。第一个 ViewController 嵌入在`UINavigationController`.

`prepareForSegue`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:14:51.257

一种简单的方法是使用块属性。

在 SecondVC 上公开一个块属性，该属性采用`NSString`：

```
@property (copy, nonatomic) void ^TextFieldBlock(NSString *textString); 
```

`prepareForSegue`在第一个视图控制器中设置此属性并更新您`UILabel`的块内部（使用weakSelf以避免保留周期问题）：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    __weak typeof(self)weakSelf = self;
    [segue.destinationViewController setTextFieldBlock:^(NSString *textString) {
        weakSelf.mainLabel.text = textString;
    }];
} 
```

然后调用 SecondVC 中的 block 属性，并在`UITextField`返回时传入 's 文本：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    [self TextFieldBlock](textField.text);
    return YES;
} 
```

# java - 我们什么时候应该使用 Observer 和 Observable？

> ID：13744450
> 
> 赞同：208
> 
> 时间：2012-12-06T13:17:55.333
> 
> 标签：java, design-patterns, observable, observer-pattern, observers

一位面试官问我：

*什么是`Observer`以及`Observable`何时应该使用它们？*

我不知道这些术语，所以当我回到家开始谷歌搜索`Observer`and`Observable`时，我从不同的资源中找到了一些要点：

> 1)[`Observable`](https://docs.oracle.com/javase/8/docs/api/java/util/Observable.html)是一个类，[`Observer`](https://docs.oracle.com/javase/8/docs/api/java/util/Observer.html)也是一个接口。
> 
> 2)`Observable`该类维护一个`Observer`s 列表。
> 
> 3）当一个`Observable`对象被更新时，它调用它`update()`的每个`Observer`s的方法来通知它，它被改变了。

我找到了这个例子：

```
import java.util.Observable;
import java.util.Observer;

class MessageBoard extends Observable
{
    public void changeMessage(String message) 
    {
        setChanged();
        notifyObservers(message);
    }
}

class Student implements Observer 
{
    @Override
    public void update(Observable o, Object arg) 
    {
        System.out.println("Message board changed: " + arg);
    }
}

public class MessageBoardTest 
{
    public static void main(String[] args) 
    {
        MessageBoard board = new MessageBoard();
        Student bob = new Student();
        Student joe = new Student();
        board.addObserver(bob);
        board.addObserver(joe);
        board.changeMessage("More Homework!");
    }
} 
```

但我不明白为什么我们需要`Observer`and `Observable`？`setChanged()`和`notifyObservers(message)`方法是干什么用的？

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-12-06T13:22:24.717

您有一个学生和留言板的具体示例。学生通过将自己添加到希望在有新消息发布到留言板时得到通知的观察者列表中进行注册。当消息被添加到消息板时，它会遍历其观察者列表并通知他们事件发生了。

想想推特。当你说你想关注某人时，Twitter 会将你添加到他们的关注者列表中。当他们发送新推文时，您会在输入中看到它。在这种情况下，您的 Twitter 帐户就是 Observer，而您关注的人就是 Observable。

这个类比可能并不完美，因为 Twitter 更可能是一个中介。但它说明了这一点。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-12-06T13:39:17.293

用非常简单的术语来说（因为其他答案无论如何都在向您介绍所有官方设计模式，因此请查看它们以获取更多详细信息）：

如果你想要一个由程序生态系统中的其他类监视的类，你说你希望这个类是可观察的。即，它的状态可能会发生一些变化，您希望将其广播到程序的其余部分。

现在，要做到这一点，我们必须调用某种方法。我们不希望 Observable 类与有兴趣观察它的类紧密耦合。只要满足某些标准，它就不会在乎自己是谁。（想象一下它是一个广播电台，它不关心谁在收听，只要他们有一个调到他们频率的 FM 收音机）。为了实现这一点，我们使用了一个称为 Observer 的接口。

因此，Observable 类将有一个 Observers 列表（即实现您可能拥有的 Observer 接口方法的实例）。每当它想要广播某些东西时，它只是一个接一个地调用所有观察者的方法。

结束这个谜题的最后一件事是 Observable 类如何知道谁感兴趣？所以 Observable 类必须提供一些机制来允许观察者注册他们的兴趣。内部等方法`addObserver(Observer o)`将 Observer 添加到观察者列表中，这样当有重要的事情发生时，它会循环遍历列表，并调用列表中每个实例的 Observer 接口的相应通知方法。

可能是在采访中他们没有明确地问你关于`java.util.Observer`和的问题，`java.util.Observable`而是关于通用概念。该概念是一种设计模式，Java 恰好提供了直接开箱即用的支持，以帮助您在需要时快速实现它。所以我建议你理解这个概念而不是实际的方法/类（你可以在需要时查找它们）。

**更新**

针对您的评论，实际[`java.util.Observable`](http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html)课程提供以下设施：

1.  维护`java.util.Observer`实例列表。有兴趣被通知的新实例可以通过添加`addObserver(Observer o)`和删除`deleteObserver(Observer o)`。

2.  维护内部状态，指定自上次通知观察者以来对象是否已更改。这很有用，因为它将您说`Observable`已更改的部分与您通知更改的部分分开。（例如，如果您有多个更改发生并且您只想在流程结束时通知而不是在每个小步骤时通知，它很有用）。这是通过`setChanged()`. 因此，当您将某些内容更改为 the 时，您只需调用它，`Observable`并且您希望其余的`Observers`最终知道它。

3.  通知所有观察者特定`Observable`状态已更改。这是通过`notifyObservers()`. `setChanged()`这会在继续通知之前检查对象是否实际发生了变化（即调用了）。有 2 个版本，一个不带参数，一个带`Object`参数，以防您想通过通知传递一些额外信息。在内部发生的事情是它只是遍历实例列表`Observer`并为每个实例调用[`update(Observable o, Object arg)`](http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html#update%28java.util.Observable,%20java.lang.Object%29)方法。这告诉了`Observer`哪个 Observable 对象发生了变化（您可能观察到多个），以及额外`Object arg`的可能携带一些额外信息的额外信息（通过`notifyObservers()`.

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-06-13T06:04:45.327

**定义**

当对象之间存在一对多关系时使用观察者模式，例如如果一个对象被修改，它的依赖对象将被自动通知，并且对所有依赖对象进行相应的更改。

**例子**

1.  比方说，你的永久地址改变了，你需要通知护照当局和泛卡当局。所以这里护照局和泛卡局是观察者，你是主体。

2.  同样在 Facebook 上，如果您订阅了某人，那么每当有新的更新发生时，您都会收到通知。

**何时使用它：**

1.  当一个对象改变其状态时，所有其他依赖对象必须自动改变其状态以保持一致性

2.  当对象不知道它拥有的观察者数量时。

3.  当一个对象应该能够在不知道对象是谁的情况下通知其他对象。

**第1步**

创建主题类。

主题.java

```
 import java.util.ArrayList;
  import java.util.List;

  public class Subject {

  private List<Observer> observers 
        = new ArrayList<Observer>();
  private int state;

  public int getState() {
    return state;
  }

 public void setState(int state) {
   this.state = state;
   notifyAllObservers();
 }

   public void attach(Observer observer){
     observers.add(observer);       
   }

  public void notifyAllObservers(){
    for (Observer observer : observers) {
     observer.update();
  }
} 
```

}

**第2步**

创建观察者类。

观察者.java

```
public abstract class Observer {
   protected Subject subject;
   public abstract void update();
} 
```

**第 3 步**

创建具体的观察者类

BinaryObserver.java

```
public class BinaryObserver extends Observer{

  public BinaryObserver(Subject subject){
     this.subject = subject;
     this.subject.attach(this);
  }

  @Override
  public void update() {
     System.out.println( "Binary String: " 
     + Integer.toBinaryString( subject.getState() ) ); 
  } 
```

}

OctalObserver.java

```
public class OctalObserver extends Observer{

   public OctalObserver(Subject subject){
     this.subject = subject;
    this.subject.attach(this);
 }

  @Override
  public void update() {
    System.out.println( "Octal String: " 
    + Integer.toOctalString( subject.getState() ) ); 
  } 
```

}

HexaObserver.java

```
public class HexaObserver extends Observer{

  public HexaObserver(Subject subject){
    this.subject = subject;
    this.subject.attach(this);
 }

  @Override
  public void update() {
     System.out.println( "Hex String: " 
    + Integer.toHexString( subject.getState() ).toUpperCase() ); 
} 
```

}

**第4步**

使用主题和具体的观察者对象。

ObserverPatternDemo.java

```
 public class ObserverPatternDemo {
    public static void main(String[] args) {
       Subject subject = new Subject();

       new HexaObserver(subject);
       new OctalObserver(subject);
       new BinaryObserver(subject);

       System.out.println("First state change: 15");    
       subject.setState(15);
       System.out.println("Second state change: 10");   
       subject.setState(10);
 } 
```

}

**第 5 步**

验证输出。

第一次状态变化：15

十六进制字符串：F

八进制字符串：17

二进制字符串：1111

第二次状态变化：10

十六进制字符串：A

八进制字符串：12

二进制字符串：1010

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-06T13:25:46.673

它们是[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)的一部分。通常一个或多个*obervers*会获知一个*observable*的变化。这是“某事”发生的通知，您作为程序员可以定义“某事”的含义。

使用此模式时，您可以将两个实体彼此分离 - 观察者变为可插入的。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-06T13:32:04.610

Observer aka 回调在 Observable 中注册。

它用于通知例如在某个时间点发生的事件。它在 Swing、Ajax、GWT 中广泛用于调度操作，例如 UI 事件（按钮单击、文本字段更改等）。

在 Swing 中，您可以找到 addXXXListener(Listener l) 之类的方法，在 GWT 中，您有（异步）回调。

由于观察者列表是动态的，观察者可以在运行时注册和注销。由于使用了接口，这也是一种将可观察对象与观察者解耦的好方法。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-03-13T09:48:50.607

如果面试官要求在不使用 Observer 类和接口的情况下实现[Observer 设计模式](http://en.wikipedia.org/wiki/Observer_pattern)，您可以使用以下简单示例！

### MyObserver 作为观察者接口

```
interface MyObserver {

    void update(MyObservable o, Object arg);
} 
```

### MyObservable 作为 Observable 类

```
class MyObservable
{
    ArrayList<MyObserver> myObserverList = new ArrayList<MyObserver>();

    boolean changeFlag = false;

    public void notifyObservers(Object o)
    {
        if (hasChanged())
        {
            for(MyObserver mo : myObserverList) {
                mo.update(this, o);
            }
            clearChanged();
        }
    }

    public void addObserver(MyObserver o) {
        myObserverList.add(o);        
    }

    public void setChanged() {
        changeFlag = true;
    }

    public boolean hasChanged() {
        return changeFlag;
    }

    protected void clearChanged() {
        changeFlag = false;
    }

    // ...
} 
```

### 您的 MyObserver 和 MyObservable 示例！

```
class MessageBoard extends MyObservable {
  private String message;

  public String getMessage() {
    return message;
  }

  public void changeMessage(String message) {
    this.message = message;
    setChanged();
    notifyObservers(message);
  }

  public static void main(String[] args) {
    MessageBoard board = new MessageBoard();
    Student bob = new Student();
    Student joe = new Student();
    board.addObserver(bob);
    board.addObserver(joe);
    board.changeMessage("More Homework!");
  }
}

class Student implements MyObserver {

  @Override
  public void update(MyObservable o, Object arg) {
    System.out.println("Message board changed: " + arg);
  }

} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-09-30T19:38:21.347

*“我试图弄清楚，为什么我们需要 Observer 和 Observable”*

正如先前的答案已经说明的那样，它们提供了订阅观察者以接收可观察对象的自动通知的方法。

一个可能有用的示例应用程序是**数据绑定**，假设您有一些 UI 可以编辑一些数据，并且您希望 UI 在数据更新时做出反应，您可以使您的数据可观察，并订阅您的 UI 组件数据

Knockout.js 是一个 MVVM javascript 框架，它有一个很棒的入门教程，要查看更多的 observables，我真的建议阅读该教程。[http://learn.knockoutjs.com/](http://learn.knockoutjs.com/)

我还在 Visual Studio 2008 起始页中找到了这篇文章（*观察者模式是模型视图控制器 (MVC) 开发的基础*） [http://visualstudiomagazine.com/articles/2013/08/14/the-observer-pattern-in -net.aspx](http://visualstudiomagazine.com/articles/2013/08/14/the-observer-pattern-in-net.aspx)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-04-17T03:44:49.763

我在这里写了观察者模式的简短描述：http: [//www.devcodenote.com/2015/04/design-patterns-observer-pattern.html](http://www.devcodenote.com/2015/04/design-patterns-observer-pattern.html)

帖子中的一个片段：

观察者模式：本质上是在对象之间建立一对多的关系，在相互依赖的对象之间进行松耦合的设计。

教科书定义：观察者模式定义了对象之间的一对多依赖关系，这样当一个对象改变状态时，它的所有依赖关系都会自动得到通知和更新。

以提要通知服务为例。订阅模型是理解观察者模式的最佳方式。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-08T06:15:04.593

当对象之间存在一对多关系时使用观察者模式，例如如果一个对象被修改，它的依赖对象将被自动通知。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-06T05:31:46.800

从 Java9 开始，这两个接口都已弃用，这意味着您不应再使用它们。请参阅[Java 9 中不推荐使用 Observer。我们应该使用什么来代替它？](https://stackoverflow.com/questions/46380073/observer-is-deprecated-in-java-9-what-should-we-use-instead-of-it)

但是，您仍然可能会收到有关他们的面试问题...

# json - 如何从不同的表中获取数据并以json格式发送

> ID：13744451
> 
> 赞同：0
> 
> 时间：2012-12-06T13:17:56.597
> 
> 标签：json, yii

我在 Yii + extjs-4 中创建功能。我有两个表作为- Poll Option -pollId -optionId -pollQuestion -option -Isactive -pollId -IsPublished

我正在创建 sendData 函数，在其中我必须从选项表中检索给定 pollId 的记录以及此 pollId 的选项，并希望以 json encoede 格式发送所有记录值。那么如何将这些不同的表数据以 json 格式一起发送呢？请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:56:02.133

在您的 Poll 模型中使用关系（我意识到 Poll 有很多选项）。所以定义：

```
public function relations()
{
    return array(
        'options'=>array(self::HAS_MANY, 'Option', 'poll_id'),
    );
} 
```

`poll_id`选项表字段在哪里。

比您需要获取包含所有数据（根据需要格式化）的数组，如下所示：

```
$data = $pollModel->getAttributes();
foreach ($pollModel->options as $option) {
    $data = array_merge($data, $option->getAttributes());
}
CJSON::encode($data); 
```

# objective-c - 启用 ARC 的泄漏

> ID：13744454
> 
> 赞同：1
> 
> 时间：2012-12-06T13:18:04.373
> 
> 标签：objective-c, automatic-ref-counting, free, memory-leaks, calloc

使用 C 数组时，我的代码似乎泄漏了，我不知道为什么。

```
/* LeakyClass.m */

@property (nonatomic, assign) char **array1;
@property (nonatomic, assign) id __strong *array2;
@property (nonatomic, assign) unsigned short currentDictCount;

//...

- (id)initWithCapacity:(unsigned short)capacity
{
    if ((self = [super init])) {
        _array1 = (char **)calloc(sizeof(char*), capacity);  //Leak
        _array2 = (id __strong *)calloc(sizeof(id), capacity);  //Leak
    }
    return self;
}

- (void)dealloc {
    free(_array1);
    free(_array2);
    _array1 = NULL;
    _array2 = NULL;
}

- (void)addObjectToArray2:(id)object andCharToArray1:(char *)str
{
    [self array2][[self currentDictCount]] = object;
    [self array1][[self currentDictCount]] = str;

    [self setCurrentDictCount:[self currentDictCount] + 1];
}

@end 
```

我`LeakyClass`用这个打电话：

```
/* OtherClass.m */

LeakyClass *leaky = [[LeakyClass alloc] initWithCapacity:20];
[leaky addObjectToArray2:object andCharToArray1:"1"];  // Leak
[leaky addObjectToArray2:@"example" andCharToArray1:"2"];  /Leak
[leaky addObjectToArray2:[NSURL URLWithString:exampleString] andCharToArray1:"3"];  /Leak 
```

Instruments 指向传递给 的每个值`LeakyClass`以添加到数组 1。在此示例中`object`，`@"example"`和`[NSURL URLWithString:exampleString]`。Instruments 也指向`calloc`s `_array1`，`_array2`但我将它们都释放在`dealloc`.

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:44:29.050

malloc/calloc 内存不计入引用，您强烈决定何时分配它以及何时释放它。将该指针设置为 NULL 不会释放它，请使用 free：

```
free(_array1); 
free(_array2); 
```

这就像一个 dealloc 消息，但处理的是原始内存，而不是 Objective-c 类。
如果您还想在垃圾收集器中包含原始内存，请使用 NSData 包装它：

```
@property (nonatomic,strong) NSData* wrapper1;
@property (nonatomic,strong) NSData* wrapper2; 
```

包装数据：

```
wrapper1= [NSData dataWithBytesNoCopy: _array1 length: capacity*sizeof(char*) freeWhenDone: YES];
wrapper2= [NSData dataWithBytesNoCopy: _array2 length: capacity*sizeof(id) freeWhenDone: YES]; 
```

And don't free it, but instead set to nil wrapper1 and wrapper2.But even without overriding the dealloc method, you'll have all the memory freed after the object dies.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:58:24.660

首先，使用`__strong`指针`id`是没有意义的，ARC 会尝试将`release`, `retain`etc 消息发送到指针，而不是每个对象（鉴于您当前的实现，它甚至不知道您动态分配了多少对象），所以，简而言之，无论有没有它，你都是一样的。至于泄漏，请尝试在分配之前释放指针。

无论如何，正如其他人提到的，为什么不使用`NSArray`or/and `NSDictionary`？

**按照以下评论进行**编辑：****

 **当我说“无论有没有它你都一样”时，我的意思是，它不会以任何方式帮助你管理内存，它毫无意义。但是，您必须拥有所有权限定符，因此仅将其删除就会导致错误（正如您所报告的那样）。你应该使用

```
@property (nonatomic, assign) id __unsafe_unretained *array2; 
```

至于你的记忆问题，你`free`以前试过`alloc`吗？如果`initWithCapacity:`被调用两次会发生什么，我知道你不会调用两次，但不能保证仪器知道。

此外[，这里](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)还有一些规格供您更好地了解 ARC 和所有限定符。**

# html - 三列 CSS 在 IE 中不起作用

> ID：13744459
> 
> 赞同：0
> 
> 时间：2012-12-06T13:18:26.707
> 
> 标签：html, css, internet-explorer

嘿，我有以下 HTML 和 CSS，我无法强制 IE 正确显示我的内容。中心和右侧 div 在每种组合中都会跳出，我尝试使用溢出，我清除了 previoud 在 html 中浮动，但它不起作用。它适用于所有其他浏览器，但不适用于 IE。

HTML：

```
<div id="container"> 
   <div id="left"> 
   </div> 
   <div id="middle">
        <div id="middleone"> 
        </div> 
        <div id="middletwo"> 
        </div> 
    </div> 
    <div id="right"> 
    </div> 
</div> 
```

CSS是：

```
#container
    {
width: 1024px; 
height:170px;
margin:auto;

    }

#left
{
    width: 415px;
    height: 89px; 
    float: left; 
    margin-top: 45px;
    margin-left: 15px; 

}

#middle
{
    height: 152px; 
    width: 300px;
        overflow: auto; 
    margin-top: 15px;   
}

     #middleone
     {

     height: 152px; 
     float: left; 

     }

     #middletwo
     {

     height: 152px; 
     float: right;

     }

#right
{
float: right; 
height: 130px; 
width: 260px;
margin-top: -132px;
margin-right: 10px; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:23:25.627

尝试以下操作：

```
#left {
    float: left;
}
#middle {
    float: left;
}
#right {
    float: left;
} 
```

您似乎缺少中心或“中间”容器上的浮动。如果“左”和“右”容器浮动，“中间”也必须浮动，否则您的布局将被丢弃。您还可以：

```
#left {
    float: left;
}
#middle {
    float: left;
}
#right {
    float: right;
} 
```

如果您有理由将该容器放在代码显示的右侧。底线，你的“中间”容器需要一个浮动。

# c# - 实体框架 5：为什么我的实体的集合属性为空？

> ID：13744461
> 
> 赞同：5
> 
> 时间：2012-12-06T13:18:33.570
> 
> 标签：c#, entity-framework, entity-framework-5

我目前正在通过 Code First 方法学习实体框架 (EF)。我想在新创建的数据库（即由 EF 创建）上建模`Professor`s 和es之间的简单一对多关系。`Class`

在我的模型中，a`Professor`有一个`Class`es 的集合。A`Class`总是有一个`Professor`与之关联的（即相应的属性永远不会为空）。我可以创建和存储 a`Class`和关联的`Professor`，但是当我访问从数据库中检索到`Classes`的 a 的属性时`Professor`，它是空的。然而，从 a 导航`Class`到它的是可能的。`Professor`

考虑以下模型：

```
class Class
{
    public int Id { get; set; }
    public string Title { get; set; }
    public virtual Professor Professor { get; set; }
}

class Professor
{
    public int Id { get; set; }
    public string Name { get; set; }
    private ICollection<Class> classes = null;

    public virtual ICollection<Class> Classes
    {
        get { return classes ?? (classes = new HashSet<Class>()); }
        set { classes = value; }
    }
}

class ClassManager : DbContext
{
    public DbSet<Professor> Professors { get; set; }
    public DbSet<Class> Classes { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Class>().HasRequired(c => c.Professor);
    }
} 
```

在我的主要方法中，我创建和访问我的数据，如下所示：

```
 using (ClassManager db = new ClassManager())
    {
        Professor p = new Professor() { Name = "McTest" };
        Class c = new Class() { Title = "Testing Tests", Professor = p };

        p.Classes.Add(c);

        db.Professors.Add(p);
        db.Classes.Add(c);

        Console.WriteLine(db.SaveChanges() + " change(s) saved.");
    }

    using (ClassManager db = new ClassManager())
    {
        foreach (Professor p in db.Professors)
            Console.WriteLine("Prof. " + p.Name + " gives " + p.Classes.Count 
                + " classes.");

        foreach (Class c in db.Classes)
            Console.WriteLine(c.Title + " (Prof. " + c.Professor.Name + ")");
    } 
```

输出是：

```
3 change(s) saved.
Prof. McTest gives 0 classes.
Testing Tests (Prof. McTest) 
```

生成的数据库模式是：

```
table Classes
    column Id (PK, int, not null)
    column Title (nvchar(max), null)
    column Professor_Id (FK, int, not null)
table Professors
    column Id (PK, int, not null)
    column Name (nvchar(max), null) 
```

如您所见，`Classes`集合属性不会出现在架构中的任何位置。这是故意的吗？

有人可以对此有所了解吗？我发现的所有示例都不会详细介绍集合属性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T16:44:47.840

好的，经过数小时的搜索，我找到了解决方案。在查询数据库时，似乎必须明确指示 EF 加载实体的集合属性：

```
foreach (Professor p in db.Professors.Include("Classes"))
    Console.WriteLine("Prof. " + p.Name + " gives " + p.Classes.Count
        + " classes."); 
```

该`Include`方法就是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:37:57.577

> 我的主代码中两个分隔的 using 语句是故意的。如果我将它们合并在一起，Classes 属性突然不为空，但我不明白为什么。

如果 2 合并为 1，那么您“查询”存储在内存中的本地实体，而不是数据库。

在您的第一个上下文中，您不需要将两者都添加`professor`到`class`上下文中。只需添加教授，`class`也将被保存。

检查数据库模式并确保实体正确映射到数据库。

最后，将`Professor`课程更改为

```
class Professor
{
    public Professor()
    {
         Classes = new List<Class>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Class> Classes {get; set;}
} 
```

我怀疑延迟加载被 is null 逻辑所取代，以返回一个散列集。

# hibernate - 具有多个表渴望连接的条件

> ID：13744463
> 
> 赞同：0
> 
> 时间：2012-12-06T13:18:35.833
> 
> 标签：hibernate, hibernate-criteria, detachedcriteria

代码

```
 DetachedCriteria criteria2 = DetachedCriteria.forClass(MasterResult.class);
        criteria2.createAlias("masterCCHolders", "masterCCHolders", CriteriaSpecification.INNER_JOIN);
        criteria2.createAlias("masterFlights", "masterFlights", CriteriaSpecification.INNER_JOIN);
        criteria2.createAlias("masterPassengers", "masterPassengers", CriteriaSpecification.INNER_JOIN);
        criteria2.createAlias("masterVendors", "masterVendors", CriteriaSpecification.INNER_JOIN); 
```

这正在生成以下查询

```
select
    this_.id as id49_4_,
    this_.adults as adults49_4_,
    this_.bookingdate as bookingd3_49_4_,
    this_.children as children49_4_,
    this_.depart_date as depart5_49_4_,
    this_.email1 as email6_49_4_,
    this_.fareprice as fareprice49_4_,
    this_.first_name as first8_49_4_,
    this_.infants as infants49_4_,
    this_.last_name as last10_49_4_,
    this_.phonenumber as phonenu11_49_4_,
    this_.selectiontime as selecti12_49_4_,
    this_.mastercurrentstatus as masterc13_49_4_,
    masterccho2_.master_booking_id as master4_49_6_,
    masterccho2_.id as id6_,
    masterccho2_.id as id47_0_,
    masterccho2_.first_name as first2_47_0_,
    masterccho2_.last_name as last3_47_0_,
    masterccho2_.master_booking_id as master4_47_0_,
    masterflig3_.master_booking_id as master5_49_7_,
    masterflig3_.id as id7_,
    masterflig3_.id as id50_1_,
    masterflig3_.direction as direction50_1_,
    masterflig3_.fromcode as fromcode50_1_,
    masterflig3_.master_booking_id as master5_50_1_,
    masterflig3_.tocode as tocode50_1_,
    masterpass4_.master_booking_id as master6_49_8_,
    masterpass4_.id as id8_,
    masterpass4_.id as id46_2_,
    masterpass4_.first_name as first2_46_2_,
    masterpass4_.last_name as last3_46_2_,
    masterpass4_.master_booking_id as master6_46_2_,
    masterpass4_.middle_name as middle4_46_2_,
    masterpass4_.type as type46_2_,
    mastervend5_.master_booking_id as master4_49_9_,
    mastervend5_.id as id9_,
    mastervend5_.id as id48_3_,
    mastervend5_.locator as locator48_3_,
    mastervend5_.master_booking_id as master4_48_3_,
    mastervend5_.name as name48_3_ 
from
    masterresult this_ 
left outer join
    masterccholder masterccho2_ 
        on this_.id=masterccho2_.master_booking_id 
left outer join
    masterflight masterflig3_ 
        on this_.id=masterflig3_.master_booking_id 
left outer join
    masterpassenger masterpass4_ 
        on this_.id=masterpass4_.master_booking_id 
left outer join
    mastervendor mastervend5_ 
        on this_.id=mastervend5_.master_booking_id 
```

查询返回 20 行，这很好，但这也会创建 masterResult 的 2o 个对象。

模型结构就像

MasterResult 包含

*   一组masterCCHolders，
*   一套masterFlights，
*   一套masterPassengers，
*   masterVendors 集

怎么解决，这个问题？

1 MasterResult 包含

*   2组masterCCHolders，
*   2组masterFlights，
*   5套masterPassengers，
*   1 套 masterVendors，

所以总共**2*2*5=20 条记录**。

我怎样才能拥有一个 masterResult 对象，其中包含一组大小为 2 的 masterCCholder、一组大小为 2 的 masterflights、一组大小为 5 的 masterpassengers 等等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:24:06.990

```
criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY); 
```

# checkbox - 带有表单 check_box 助手的未定义方法错误

> ID：13744469
> 
> 赞同：0
> 
> 时间：2012-12-06T13:18:45.507
> 
> 标签：checkbox, ruby-on-rails-3.2

我的 check_box 助手出现错误，不明白我做错了什么：

```
undefined method `prive' for #<PubContributeur:0xa63b8fc> 
```

这是我的**app/models/pub_contributeur.rb**：

```
class PubContributeur < ActiveRecord::Base

  attr_accessible :nom, :prive
  validates :nom, :presence => true
  validates :nom, :length => { :in => 2..30 }, :uniqueness => { :case_sensitive => false }

end 
```

我在我的控制器上使用命名空间**目录。**这是我的 HAML 之类的视图**app/views/catalogs/pub_contributeurs/_form.html.haml**：

```
= form_for [:catalogs, @pub_contributeur], :html => {:class => "formulaire-standard"} do |f|

  = render :partial => 'shared/error_message', :locals => { :element => @pub_contributeur, :debut_erreur => 'Ce contributeur ne peut être enregistré'}

  .groupe-champs
    .champ
      = f.label :nom
      = f.text_field :nom, :class => 'input-width-8-col', :required => 'required'
    .champ
      = f.label :prive
      = f.check_box :prive 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:06:55.643

我找到了解决方案！

当我更换

```
 = f.check_box :prive 
```

在我的 _form.rb 中对我的实例变量进行调试：

```
= debug @pub_container 
```

我可以看到一些奇怪的东西：

```
--- !ruby/object:PubContributeur
attributes:
  id: 
  nom: 
  description: 
  created_at: 
  updated_at: 
```

我确实检查了我的 db/migration/ 并发现了问题。我的迁移文件正在创建一个名为“ **description ”的字符串字段，而不是一个名为“** **prive** ”的布尔字段。

如果我们考虑一下第一个错误消息。这很奇怪，因为模型文件中的类确实有一个“prive”可访问属性，这可能会误导我们认为该类确实有“ **nom** ”和“ **prive** ”作为属性。

要了解正在发生的事情，我们必须对 Rails 和 Ruby 有深入的了解。这来自**ActiveRecord::Base**的继承。幕后 Rails 的魔力根据我的数据库的表 pub_contributeurs 中的列名称为 PubContributeur 类创建属性。

我希望 Rails 错误消息能更明确一点^^

# python - 在不同文件夹中执行命令行

> ID：13744473
> 
> 赞同：66
> 
> 时间：2012-12-06T13:18:57.157
> 
> 标签：python, shell, command-line

我正在使用调用在 python 中调用命令行程序`os.system(command)`。

如何调用此命令传递不同的文件夹以执行？有系统调用吗？或者我应该保存当前文件夹，并在执行后更改恢复它。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-12-06T13:35:03.437

该[`subprocess`](https://docs.python.org/2/library/subprocess.html)模块是一个非常好的解决方案。

```
import subprocess
p = subprocess.Popen([command, argument1,...], cwd=working_directory)
p.wait() 
```

它还具有用于修改环境变量、将输入/输出重定向到调用程序等的参数。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-06T13:22:31.473

`os.chdir(path)`在调用命令之前尝试。

从[这里](http://docs.python.org/2/library/os.html#os.chdir)：

> os.chdir(path) 将当前工作目录更改为路径。
> 
> 可用性：Unix、Windows

**编辑**

这将更改当前工作目录，您可以通过以下方式获取当前工作目录：

```
os.getcwd() 
```

如果您想保存它并稍后恢复它，如果您需要在原始工作目录中做一些工作。

**编辑 2**

[在任何情况下，您都应该按照此处](http://docs.python.org/2/library/os.html#os.system)的建议移至`subprocess`( [doc](http://docs.python.org/2/library/subprocess.html#module-subprocess) ) 。如果您使用's ，您可以选择提供参数来指定子进程的工作目录：[阅读此](http://docs.python.org/2/library/subprocess.html#popen-constructor).`subprocess``Popen``cwd`

```
subprocess.Popen(args, bufsize=0, executable=None, stdin=None,
stdout=None, stderr=None, preexec_fn=None, close_fds=False,
shell=False, cwd=None, env=None, universal_newlines=False,
startupinfo=None, creationflags=0) 
```

> ...
> 
> 如果 cwd 不为 None，则子进程的当前目录将在执行之前更改为 cwd。请注意，搜索可执行文件时不考虑此目录，因此您不能指定程序相对于 cwd 的路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-12T22:30:19.427

在这里，我做了一个小函数来改变你正在处理的路径：

```
import os
def make_path(r_path):  
    ack = 1
    try:
        root = os.path.dirname(__file__)
        rel_path = os.path.join("..", r_path)

        abs_path = os.path.join(root, rel_path)
        os.chdir(abs_path)
        ack = 0
    except Exception as details:
        print('problem to get to the path '+r_path+' (0001) : ' + str(details))
    return ack 
```

所以这里，`r_path`是你想要去的相对路径。我添加`".."`到`path.join()`方法中，因此，如果您在文件夹中并想在搜索路径之前退出它，它会自动执行。因此，如果您的相对目录如下所示：

```
-path_to_reach
    -a_random_file.txt
-your_current_folder
    -your_program.py 
```

您可以执行这些行以进入`path_to_reach`并发出命令，例如：

```
command = ls
make_path('path_to_reach/')
os.system(command) 
```

这个命令没有用，但你明白了！

# sql-server - 命名什么索引是否重要，即它们是否在表中更改？

> ID：13744474
> 
> 赞同：0
> 
> 时间：2012-12-06T13:18:59.777
> 
> 标签：sql-server, database-design

背景：表有大约 200m 行 55GB。

我需要对一个重复的表进行行复制，但具有 BIGINT 标识，当然，在从原始表生成脚本以 CREATE 时，它会保留所有内容，包括表名、PK 的 INT 值和 PRIMARY关键约束 - 所有这些都需要更改。

我的问题是，如果我更改 PRIMARY KEY CONSTRAINT 名称，并且不改回来，它会搞砸吗？存储过程或直接命令是否可以直接调用此约束，作为索引或其他东西？如果以后需要重命名，那是一个瞬时过程还是一个长的一个这么大的表？

我认为其他索引并不重要，因为我应该在重新创建新索引之前将它们放在原始表上，对吗？

还有一个问题：在这种大小的桌子上 - 和一个高容量系统，考虑到性能，我是否应该重新考虑更改以下任何值？：

```
WITH (
    PAD_INDEX  = OFF, 
    STATISTICS_NORECOMPUTE  = OFF,
    IGNORE_DUP_KEY = OFF, 
    ALLOW_ROW_LOCKS  = ON, 
    ALLOW_PAGE_LOCKS  = ON, 
    FILLFACTOR = 95
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:42:20.820

索引名称通常不会在编程 API 中直接引用。没有“从索引中选择”或“插入索引”语法，所有内容都引用表对象。尽管索引名称被暴露在少数地方，例如[table hints](http://msdn.microsoft.com/en-us/library/ms187373.aspx)。

但是您可能有了解物理布局（即索引和约束名称）的管理/维护脚本/作业。

# opengl - 带有立方体贴图纹理的 glFramebufferTexture2D

> ID：13744476
> 
> 赞同：1
> 
> 时间：2012-12-06T13:19:10.013
> 
> 标签：opengl, textures, opengl-3, fbo, render-to-texture

我正在尝试将渲染到纹理概念与立方体贴图纹理一起使用，但不知何故，纹理并未在绘制调用中应用于几何。这是我的代码

```
#define WIDTH 64
#define HEIGHT 64
glGenTextures(1, &id1);
glBindTexture(GL_TEXTURE_CUBE_MAP, id1);

glGenFramebuffers(1, &Fboid);
for(int i=0;i<6;i++)
{
glTexParameterf(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

glTexParameterf(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);

glTexImage2D(types[i], 0, GL_RGBA,WIDTH, HEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE,0);

}
glBindFramebuffer(GL_FRAMEBUFFER, Fboid);

    for(int i=0;i<6;i++)                      
glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,types[i],id1,0);

draw_cube();

glBindFramebuffer(GL_FRAMEBUFFER, 0);

draw(); 
```

我已经验证帧缓冲区绑定是否完整。draw_cube() 也可以按预期正确绘制几何图形。当我删除 FBO 并向 glteximage2D() 提供数据时，它会正确地将立方体贴图纹理应用于 draw() 调用中的几何体。宽度高度与 draw_cube 调用中设置的视口相同。

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:18:26.547

很难说究竟什么属于你的`for`循环体（提示：你的问题的正确格式会有所帮助）。但是，尽管如此，它目前的编写方式根本没有多大意义。

如果它只是语句之后的单行`for`（目前看起来），那么您将所有立方体面绑定到相同颜色的附件，因此只有最后一个调用 ( `types[5]`) 将占上风，这看起来很奇怪。如果您打算一次绑定所有六个面（从而`draw_cube`使用多个渲染目标一次性渲染所有六个面），那么您应该使用`GL_COLOR_ATTACHMENT0 + i`而不是仅使用`GL_COLOR_ATTACHMENT0`. 但在这种情况下，根据您的硬件/驱动程序，6 可能会相当高（也就是说：太高）多个活动的多个渲染目标。

但也许该`draw_cube`调用也属于`for`-loop（因此分别渲染六个面）。在这种情况下，您应该将其放入循环中：

```
for(int i=0;i<6;i++)
{
    glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,types[i],id1,0);
    draw_cube();
} 
```

**编辑：**正如*Nicol Bolas*在他的评论中指出的那样，您还可以使用分层渲染并将整个立方体贴图绑定为渲染目标，使用几何着色器输出变量`gl_Layer`来确定图元应该进入的立方体贴图面。

在这种情况下，您只需调用一次

```
//note: just ...Texture, without ...2D!
glFramebufferTexture(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, id1, 0); 
```

# android - JSON解析成textview Android

> ID：13744477
> 
> 赞同：1
> 
> 时间：2012-12-06T13:19:11.187
> 
> 标签：android, json, http, text-parsing

我创建了一个 HTTP GET 函数，该函数从我的服务器检索响应并将其显示为文本视图中的 JSON。

如何将以下内容变为字符串以供我的 textview 读取。

```
{"response":"ok"} 
```

这是我的 HTTP GET 请求

```
public class GetMethodEx {

public String getInternetData() throws Exception {

BufferedReader in = null;
String data = null;

try {
    HttpClient client = new DefaultHttpClient();
    client.getConnectionManager().getSchemeRegistry().register(getMockedScheme());

    URI website = new URI("https://server.com:8443/login?username=hm&password=123");
    HttpGet request = new HttpGet();
    request.setURI(website);
    HttpResponse response = client.execute(request);
    response.getStatusLine().getStatusCode();

    in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    StringBuffer sb = new StringBuffer("");
    String l = "";
    String nl = System.getProperty("line.separator");
    while ((l = in.readLine()) != null) {
        sb.append(l + nl);
    }
    in.close();
    data = sb.toString();
    return data;
} finally {
    if (in != null) {
        try {
            in.close();
            return data;
        } catch (Exception e) {
            Log.e("GetMethodEx", e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:27:58.997

使用下面的代码来解析 json 数据。

```
JSONObject jObject;
try {
    jObject = new JSONObject(data);
    String mResponse = jObject.getString("response");
    mTxtView1.setText(mResponse);
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:22:51.433

我想它应该是这样的：

```
String json = "{\"response\":\"ok\"}";
JSONObject object = new JSONObject(json);
String response = object.getString("response");
TextView view = findViewById(id);
view.setText(response); 
```

检查[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:24:06.457

使用 Json 解析器。

```
 //json parser for http get
 JSONParser jParser = new JSONParser();
 // getting JSON string from URL
 JSONObject json = jParser.getJSONFromUrl(url);
 String result = json.optString("response", "default"); 
```

JSONParser.java

```
public class JSONParser {
static InputStream is = null;
static JSONObject jObj = null;
static String json = "";
// constructor
public JSONParser() {
}

public JSONObject getJSONFromUrl(String url) {
    // Making HTTP request
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();   
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;
 }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:24:09.233

尝试这个 ：

```
 try {
            JSONObject jsonObject = new JSONObject(yourString);
            String response = jsonObject.getString("response");
            textView.setText(response);

    } catch (JSONException e) {

        e.printStackTrace();
    } 
```

# scala - Scala调度员-工作者演员模式

> ID：13744480
> 
> 赞同：2
> 
> 时间：2012-12-06T13:19:36.643
> 
> 标签：scala, actor, dispatcher

我正在尝试使用标准的 scala.actors 包为 Scala 设计一个调度员-工作者演员模式。

调度程序从 a 接收工作`java.util.concurrent.LinkedBlockingQueue`并将其发送给工作参与者进行处理。完成所有工作后，调度员应该告诉每个工人退出，然后它也应该退出。这是我想出的代码，但是当所有工作完成后它就会挂起（我认为`'GiveMeWork`调度程序的队列中有待处理的消息）：

```
import java.util.concurrent.LinkedBlockingQueue
import scala.actors.Actor

object Dispatcher
extends Actor {
  println("Dispatcher created")

  def act() {
    val workers = (1 to 4).map(id => (new Worker(id)).start())

    loop {
      react {
        case 'GiveMeWork =>
          // println("Worker asked for work")
          val (time, i) = workQueue.take()
          if (time == 0) {
            println("Quitting time")
            workers.foreach(_ !? 0L)
          } else {
            println("Arrival at dispatcher: i: " + i + " dispatch time: " +
                    time + ", elapsed: " + (System.nanoTime() - time))
            sender ! time
          }
        case 'Quit =>
          println("Told to quit")
          sender ! 'OffDuty
          exit()
      }
    }
  }
}

class Worker(id: Int)
extends Actor {
  println("Worker(" + id + ") created")
  var jobs = 0

  def act() {
    Dispatcher ! 'GiveMeWork

    loop {
      react {
        case time: Long =>
          if (time == 0) {
            println("Worker(" + id + ") completed " + jobs + " jobs")
            sender ! 'OffDuty
            exit()
          } else {
            println("Arrival at worker(" + id + "): dispatch time: " +
                    time + ", elapsed: " + (System.nanoTime() - time))
            Thread.sleep(id)
            jobs += 1
            Dispatcher ! 'GiveMeWork
          }
      }
    }
  }
}

val workQueue = new LinkedBlockingQueue[(Long, Int)](1000)

Dispatcher.start()

for (i <- 0 until 5000) {
  Thread.sleep(1)
  workQueue.put((System.nanoTime(), i))
}

workQueue.put((0L, 0))

println("Telling Dispatcher to quit")
Dispatcher !? 'Quit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:12:01.797

有一场比赛：

```
val (time, i) = workQueue.take() 
```

包括 在内的所有工作都已完成，`workQueue.put((0L, 0))`因此它将永远等待。

同时使用不同类型的并发是一个坏主意。

Dispatcher 可以通知任务源关于任务限制：

```
import scala.actors.{Actor, OutputChannel}
import scala.collection.mutable.Queue

case class Task(time: Long, i: Int)
case object GiveMeWork
case object Quit
case object OffDuty

object Dispatcher extends Actor {
  println("Dispatcher created")

  def act() {
    val workers = (1 to 4).map(id => (new Worker(id)).start())
    val waitingWorkers = Queue[OutputChannel[Any]](workers: _*)
    val tasks = Queue[Task]()
    var workSender: Option[OutputChannel[Any]] = None

    loop {
      react {
        case GiveMeWork =>
          if (!tasks.isEmpty) sender ! tasks.dequeue()
          else waitingWorkers enqueue sender

          workSender map { _ ! GiveMeWork }
          workSender = None
        case t: Task =>
          if (!waitingWorkers.isEmpty) waitingWorkers.dequeue() ! t
          else tasks enqueue t

          if (tasks.length < 1000) sender ! GiveMeWork
          else workSender = Some(sender)
        case Quit =>
          println("Told to quit")
          workers.foreach{ _ ! Quit }
          sender ! OffDuty
          exit()
      }
    }
  }
}

class Worker(id: Int)
extends Actor {
  var jobs = 0

  def act() {
    loop {
      react {
        case t: Task =>
          Thread.sleep(id)
          jobs += 1
          Dispatcher ! GiveMeWork
        case Quit =>
          println("Worker(" + id + ") completed " + jobs + " jobs")
          sender ! OffDuty
          exit()
      }
    }
  }
}

Dispatcher.start()

for (i <- 0 until 5000) {
  Thread.sleep(1)
  Dispatcher !? Task(System.nanoTime(), i)
}

println("Telling Dispatcher to quit")
Dispatcher !? Quit 
```

# odbc - 用于 ODBC 的 OLE DB 驱动程序可以在 ProgressDB 上工作吗？

> ID：13744481
> 
> 赞同：0
> 
> 时间：2012-12-06T13:19:41.340
> 
> 标签：odbc, oledb, progress-db

我正在准备一个小软件来连接数据库。不幸的是，我现在无法访问数据库，并希望尽可能多地准备。客户端有一个 ProgressDB 数据库，我发现不太知名的数据库使用 ODBC。我正在准备的软件使用 Microsoft OLE DB Provider for ODBC Drivers。

我是否可以假设此驱动程序将在应用了正确设置的 ProgressDB 上运行，因为它们都使用 ODBC？

不幸的是，我找不到关于 ProgressDB 的太多信息。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:25:49.293

什么版本的进度？一般来说，ODBC 在版本 9 和更好的版本中工作得相当好。

V9 于 90 年代后期发布。版本 10 于 2004 年发布，并更名为“OpenEdge”。当前版本是版本 11。

根据您拥有的版本和安装的内容，您可能需要下载 ODBC（或 JDBC）驱动程序。您应该可以通过 Progress.com 上的 ESD（电子软件交付）帐户获取它们。从好的方面来说，他们是免费的。

# javascript - 为什么我在位置移动后得到一个空数组？

> ID：13744485
> 
> 赞同：0
> 
> 时间：2012-12-06T13:19:55.707
> 
> 标签：javascript, arrays

我尝试使用此中的代码[将数组元素从一个数组位置移动到另一个位置](https://stackoverflow.com/questions/5306680/move-an-array-element-from-one-array-position-to-another)以移动数组位置

但是为什么当我将**最后移动到第一个**所以我得到一个空数组

我喜欢这样...

```
my_array.move(my_array_length,0); 
```

演示：http: [//jsfiddle.net/Jsu7R/](http://jsfiddle.net/Jsu7R/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:25:13.043

由于 javascript 数组是从 0 向上索引的，因此您的代码：

```
my_array.move(my_array_length,0); 
```

将需要更改为：

```
my_array.move(my_array_length-1,0); 
```

数组的长度有 5 个元素，但最后一个元素的索引为 4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:24:49.480

参考页面中的“move”方法获取 old_index、new_index 参数。您提供数组的长度作为第一个参数，但您的数组在此位置没有元素。

如果您使用以下参数调用“移动”：

```
my_array.move(my_array_length - 1,0) 
```

它将按预期工作

# jfreechart - 在 jfree 条形图中的条形顶部显示值

> ID：13744488
> 
> 赞同：0
> 
> 时间：2012-12-06T13:20:14.183
> 
> 标签：jfreechart, bar-chart, jfreereport

我正在使用 Jfreechart 实用程序在 Spring MVC 中创建条形图。我的要求是：

`i need to show corresponding value on top of the bar.`

我怎样才能做到这一点..请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:16:52.390

```
BarRenderer renderer = (BarRenderer) catPlot.getRenderer();
renderer.setBaseItemLabelGenerator(CategoryItemLabelGenerator generator) 
```

此方法`setBaseItemLabelGenerator(CategoryItemLabelGenerator generator)`可用于在栏上设置相应的值。[更多信息](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.html#setBaseItemLabelGenerator%28org.jfree.chart.labels.CategoryItemLabelGenerator%29)

# http - 用户刷新页面时忽略 HTTP 缓存标头

> ID：13744490
> 
> 赞同：0
> 
> 时间：2012-12-06T13:20:13.900
> 
> 标签：http, caching, browser-cache

我很想了解我注意到的一些奇怪的浏览器行为。我有一些页面（为了实验）我提供了我认为应该导致页面被缓存的标题：

```
Cache-Control:max-age=3600
Content-Length:66
Content-Type:text/html
Date:Thu, 06 Dec 2012 13:08:01 GMT
Expires:Fri, 07 Dec 2012 14:19:41 GMT
Server:Apache-Coyote/1.1 
```

正如预期的那样，当我通过其他页面之一上的链接导航到其中一个页面时，浏览器会直接从其缓存中提供该页面，并且不会调用服务器。但是，当我通过按浏览器刷新按钮重新加载这些页面之一时，与缓存相关的标头似乎被忽略了，并且请求被发送到服务器。

我在最新版本的 Chrome 和 Firefox 以及 IE9 中看到了这种行为。

HTTP标准是否要求对用户刷新发起的请求进行这种“特殊处理”（如果是的话，谷歌浏览器中“硬重新加载（Ctrl+Shitf+F5）”的目的是什么），还是有其他解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:31:39.020

通常，当您请求页面时，浏览器“应该”向服务器发送 HEAD 请求，要求（仅）您请求的文档的标题。如果您仅在 POST 或 GET 请求期间设置上述标头，它将解释为什么浏览器会认为文档已过期并重新获取它。

但是，从另一个角度来看，由于使用刷新功能的主要原因是“刷新”页面，因此浏览器不提供缓存副本而是按照您的要求执行 = 获取最新版本是有道理的，因为为什么还要点击刷新？

我可以确认，尽管某些浏览器（例如 chrome）在刷新期间不会更新所有资源（如链接的 .js 文件），但它们会更新您刷新的页面！

# java - Android MapView animateTo 和 zoomIn 同时进行（*有一个转折）

> ID：13744491
> 
> 赞同：1
> 
> 时间：2012-12-06T13:20:15.147
> 
> 标签：java, android, android-mapview

如何同时为 Map View Controller 调用 animateTo 和 zoomIn 到现在看不到女巫（例如，我看到的是美国的首都，然后我看到的是巴西的首都）？

# java - 包和接口（访问保护）

> ID：13744494
> 
> 赞同：1
> 
> 时间：2012-12-06T13:20:21.013
> 
> 标签：java

同一个包中的非子类和不同包中的子类有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:23:36.537

给定一个班级，`A`

*   同一包中的非子类`A`可以访问`A`

*   不同包中的子类`A`可以访问`A`.

* * *

注意：包私有保护没有关键字 - 它是在未指定其他保护时选择的保护。

```
public void thisIsPublic(...)

protected void thisIsProtected(...)

void thisIsPackagePrivate(...) 
```

*推荐阅读：[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:59:09.327

“同一个包中的非子类和不同包中的子类”，而问题是“当我们在同一个包中声明非子类和不同包中的子类时会发生什么？
这在您处理**Scope Specifiers**时很重要。这里是显示差异的表格。

```
 Private     No Modifier    Protected     Public

1\. Same class           Yes             Yes         Yes          Yes

2\. Same package         No              Yes         Yes          Yes
   subclass
3\. Same package         No              Yes         Yes          Yes
   non-subclass
4\. Different package    No              No          Yes          Yes
   subclass
5\. Different package    No              No          No           Yes
   non-subclass 
```

该表来自“Herbert Schildt”的“Java The Complete Reference”一书

# c# - devexpress 行删除事件

> ID：13744496
> 
> 赞同：2
> 
> 时间：2012-12-06T13:20:22.733
> 
> 标签：c#, asp.net, devexpress, aspxgridview

Deletebutton 不会引发 OnRowDeleting 事件

我在运行时创建了devexpress gridview，它运行良好，直到单击删除按钮，当我单击它时，它不起作用。在调试时它不会触发“行删除”。我能做些什么？

```
 dovizgrd.Width = Unit.Percentage(50);
    dovizgrd.EnableCallBacks = false;
    dovizgrd.Settings.ShowFooter = false;
    dovizgrd.Settings.ShowColumnHeaders = false;
    dovizgrd.Settings.ShowFilterBar = GridViewStatusBarMode.Hidden;
    dovizgrd.SettingsPager.Visible = true;
    dovizgrd.SettingsPager.Mode = GridViewPagerMode.ShowPager;
    dovizgrd.Styles.Header.Wrap = DevExpress.Utils.DefaultBoolean.True;
    dovizgrd.SettingsPager.PageSize = 10;

    DevExpress.Web.ASPxGridView.GridViewCommandColumn col0 =
    new  DevExpress.Web.ASPxGridView.GridViewCommandColumn();
    col0.ShowSelectCheckbox = true;
    col0.Caption = " ";
    col0.Width = Unit.Pixel(30);
    col0.VisibleIndex = 0;

    DevExpress.Web.ASPxGridView.GridViewDataTextColumn col1 =new DevExpress.Web.ASPxGridView.GridViewDataTextColumn();
                col1.FieldName = "example1";
                col1.Visible = false;
                col1.VisibleIndex = 1;

    DevExpress.Web.ASPxGridView.GridViewDataTextColumn col2 = 
    new DevExpress.Web.ASPxGridView.GridViewDataTextColumn();
                col2.FieldName = "example2";
                col2.Visible = false;
                col2.VisibleIndex = 2;

                DevExpress.Web.ASPxGridView.GridViewDataTextColumn col3 = new DevExpress.Web.ASPxGridView.GridViewDataTextColumn();
                col3.FieldName = "example3";
                col3.Caption = "Döviz Çeşidi";
                col3.Width = Unit.Pixel(100);
                col3.VisibleIndex = 3;

                DevExpress.Web.ASPxGridView.GridViewCommandColumn col4 = new DevExpress.Web.ASPxGridView.GridViewCommandColumn();
                col4.Caption = " ";
                //col4.EditButton.Visible = false;
                col4.DeleteButton.Visible = true;
                //col4.NewButton.Visible = false;
                col4.ButtonType = ButtonType.Image;

                col4.DeleteButton.Image.Url = "~/Images/icons/delete.gif";

                col4.Width = Unit.Pixel(35);
                col4.VisibleIndex = 4;

                dovizgrd.Columns.Add(col0);
                dovizgrd.Columns.Add(col1);
                dovizgrd.Columns.Add(col2);
                dovizgrd.Columns.Add(col3);
                dovizgrd.Columns.Add(col4);
                grdPH.Controls.Add(dovizgrd);
                dovizgrd.DataBind();

                dovizgrd.RowDeleting += new      DevExpress.Web.Data.ASPxDataDeletingEventHandler(grd_RowDeleting); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:05:16.287

您尚未发布完整的代码，但在我看来，您尚未在[ASPxGridView上设置](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxGridViewASPxGridViewtopic)[KeyFieldName](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_KeyFieldNametopic)。

文档指出：

*如果未指定 KeyFieldName 属性，则不允许进行以下操作：*
*- 数据编辑*
*- 添加新行和删除现有行*
*- 选择行*

# asp.net - 使用 C# 使用不同的标签 ID 和 AssociatedControlID 名称时，Asp.net 引发异常

> ID：13744501
> 
> 赞同：0
> 
> 时间：2012-12-06T13:20:45.930
> 
> 标签：asp.net, visual-studio-2010, exception

在 asp.net 中，我使用标签字段，其中我保持 ID 和 AssociatedControlID 相同，然后它不会抛出任何异常

```
 <asp:Label ID="Username" runat="server" AssociatedControlID="Username">Username:</asp:Label> 
```

但是当我以不同的方式使用 ID 和 AssociatedControlID 时，我会遇到异常

```
 <asp:Label ID="lblUsername" runat="server" AssociatedControlID="Username">Username:</asp:Label> 
```

我得到的例外是

无法找到与标签“lblUsername”关联的 ID 为“用户名”的控件

可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:22:52.550

通常您将标签关联到另一个控件，例如`TextBox`.

```
<asp:Label ID="myLabel" runat="server" AssociatedControlID="myTextBox">Username:</asp:Label>
<asp:TextBox runat="server" ID="myTextBox"></asp:TextBox> 
```

由于您尝试`Username`在第二个示例中将其与某些带有 id 的控件相关联，因此我可以猜测您没有另一个带有 id 的控件`Username`。这就是为什么你得到例外。

# c# - 在 DataGridView 上更改 Null/空图像的外观

> ID：13744502
> 
> 赞同：10
> 
> 时间：2012-12-06T13:20:47.287
> 
> 标签：c#, winforms

我有一个带有多个数据网格视图的 WinForms 应用程序。在其中一个上，我有一个动态填充图像的列。我在下面包含了一个屏幕截图：

![截屏](../Images/8517173eca74e8040d43ddf4b4e6b50a.png)

许多单元格不符合生成图像的要求，因此显示为空。但是，当这种情况发生时，应用程序会显示默认的红色 X 表示没有图像。我希望单元格简单地显示为空，而不是显示此默认图像。

我试过创建一个空白图像，但这会导致它自己的问题；即，因为我的 datagridview 具有交替的行背景颜色，所以白色图像显示在灰色行上，反之亦然。

实际上，我想要一个空/空或透明图像，当不满足其他图像之一的运行时间要求时，它根本不会显示在列中。

为了完整起见，我目前使用的代码如下：

```
foreach (DataGridViewRow row in dataCaseHistory.Rows)
{                    
    DataGridViewCell cell = row.Cells["DocID"];
    if (cell.Value.ToString().Length > 0)
    {
        if (((int)cell.Value) % 2 == 0)
        {
            row.Cells["Doc"].Value = (System.Drawing.Image)Properties.Resources.Paperclip___done;
        }
        else
        {
            row.Cells["Doc"].Value = (System.Drawing.Image)Properties.Resources.Bundle___done;
        }
    }
    else
    {
         row.Cells["Doc"].Value = null;
    }
} 
```

选择图像的逻辑测试是临时的。我只是想在应用真正的、更复杂的图像选择标准之前进行设置。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T13:44:59.993

试试这个：

在构造函数内部的 InitializeComponent() 调用之后，放入：

```
yourGrid.Columns["Doc"].DefaultCellStyle.NullValue = null; 
```

# sql - 将列的结果转换为单行

> ID：13744503
> 
> 赞同：-3
> 
> 时间：2012-12-06T13:20:48.330
> 
> 标签：sql, sql-server-2008, tsql, pivot

我有下表：

```
Name           Rating
Engineering    1
Financials     3
Scope          1
Schedule       2
Risks          3
People         3 
```

我希望输出如下：

```
Engineering  Financials  Scope  Schedule  Risks  People
1            3           1      2         3      3 
```

仅使用 SQL 查询。有人可以帮我获得正确的输出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:35:52.120

您正在尝试[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)数据。SQL Server 有一个`PIVOT`功能可以为您执行此操作。要执行，`PIVOT`您需要决定使用什么聚合函数。在我的示例中，我使用了，`MAX()`但您可以使用`SUM()`等。

如果您没有数据透视函数，则可以使用带有`CASE`语句的聚合函数来执行此操作。

**聚合/案例版本：**此版本要求您将所有名称硬编码到列中。

```
select 
  max(case when name = 'Engineering' then rating end) Engineering,
  max(case when name = 'Financials' then rating end) Financials,
  max(case when name = 'Scope' then rating end) Scope,
  max(case when name = 'Schedule' then rating end) Schedule,
  max(case when name = 'Risks' then rating end) Risks,
  max(case when name = 'People' then rating end) People
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/334cd/1)

**静态 PIVOT 版本：**您将名称的值硬编码到此查询中

```
select *
from
(
  select name, rating
  from yourtable
) src
pivot
(
  max(rating)
  for name in ([Engineering], [Financials], [Scope],
               [Schedule], [Risks], [People])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/334cd/6)

如果您有已知数量的列，上述版本工作得很好，但如果您的`name`值未知，那么您可以`PIVOT`对数据使用动态 sql。

**动态 PIVOT 版本：**

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Name) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
             (
                select name, rating
                from yourtable
            ) x
            pivot 
            (
                max(rating)
                for name in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/334cd/7)

所有三个版本都将产生相同的结果：

```
| ENGINEERING | FINANCIALS | SCOPE | SCHEDULE | RISKS | PEOPLE |
----------------------------------------------------------------
|           1 |          3 |     1 |        2 |     3 |      3 | 
```

# html - 让 div 占用所有剩余空间

> ID：13744505
> 
> 赞同：2
> 
> 时间：2012-12-06T13:20:51.247
> 
> 标签：html, css

我发现了几个有类似问题的帖子，但没有好的答案。我在一个 div 中有两个 div 有 display: table-row 属性。我的右侧 div 需要固定为：200px，左侧必须占用剩余空间。

```
CSS: 

.dhPictureDiv{
float:left;
height:100%;
background-color:red;}

.dhInfoWrapper{
width:200px;
float:right;
background-color:yellow;
border: 0px solid red;}

.dhDivRow {
display: table-row;} 
```

HTML：

```
<div class="dhDivRow><div class ="dhPictureDiv></div><div class ="dhInfoWrapper></div></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:30:49.603

这已经被掩盖了，但是你去：

[http://jsfiddle.net/wu7TR/](http://jsfiddle.net/wu7TR/)

我真的建议简化你的班级系统

```
.dhPictureDiv{
    background-color:red;
    height: 100px;
    display: table-cell;
    width: 100%;
}

.dhInfoWrapper{
    background-color:yellow;
    height: 100px;
    display: table-cell;
    min-width: 200px;
}

.dhDivRow {
    display: table;
}​ 
```

# ruby-on-rails - Ruby 使用 register_interceptor 和 delivery_email 修改邮件拦截器的主体

> ID：13744506
> 
> 赞同：0
> 
> 时间：2012-12-06T13:20:58.673
> 
> 标签：ruby-on-rails, ruby, email, actionmailer, interceptor

我已经在我的 Ruby on Rails 应用程序中启动并运行了一个有效的拦截器。目前我可以使用以下技术很好地修改主题，但由于某种原因我无法修改正文。

在我的 /config/initializers 中，我像这样注册拦截器：

```
ActionMailer::Base.register_interceptor(MailIntercept) 
```

在 /lib/ 我有一个名为 mail_intercept 的文件，如下所示：

```
class MailIntercept
  def self.delivering_email(message)
   message.subject = "Modified Subject"
   message.body = "Modified Body"

   if message.to.split("@").last == "olddomain.com"
    message.subject = "Domain is olddomain.com, safe to display message"
    message.body = message.body + "Domain is olddomain.com, safe to display message" 
    else
    message.subject = "Domain is NOT olddomain.com, hide message"
    message.body = "Domain is NOT olddomain.com, hide message."
   end

   end
end 
```

问题#1：身体永远不会被修改。

问题 #2：发送电子邮件的应用程序有多个电子邮件地址作为密件抄送发送。如果电子邮件发往 olddomain.com，我想显示邮件正文。否则，我想剥离消息正文并只显示一条消息。

我很确定这个 delivery_email 只在发送电子邮件时被调用一次，而不是每个 BCC 的多次调用。即使我通过 TO、CC 和 BCC 循环然后修改正文，它也会为每个人修改正文。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:22:34.123

我检查了代码，它对我来说工作正常我使用的是 Rails 3.2.6

我想问题可能出在动作邮件方法调用的地方

# c++ - 为什么 i = v[i++] 未定义？

> ID：13744507
> 
> 赞同：43
> 
> 时间：2012-12-06T13:21:00.917
> 
> 标签：c++, language-lawyer

来自 C++ (C++11) 标准的第 1.9.15 节讨论了评估的顺序，是以下代码示例：

```
void g(int i, int* v) {
    i = v[i++]; // the behavior is undefined
} 
```

如代码示例中所述，行为未定义。

（注意：另一个问题的答案与构造略有不同`i + i++`，[Why is a = i + i++ undefined and not unspecified behavior](https://stackoverflow.com/questions/12572618/why-is-a-i-i-undefined-and-not-unspecified-behaviour)*可能*适用于此处：答案本质上是由于*历史*原因，行为未定义，而不是出于必要。但是，该标准似乎暗示了一些未定义的*理由*-请参见下面的引用。此外，该链接的问题表明同意该行为应*未指定*，而在此问题中，我要问为什么该行为未*明确指定*。）

标准给出的未定义行为的推理如下：

> 如果标量对象上的副作用相对于同一标量对象上的另一个副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。

在这个例子中，我认为子表达式将在子表达式被评估*之前*`i++`被完全评估，并且子表达式的评估*结果*是（在增量之前），但是 的*值*是该子表达式之后的增量值已经完全评估。我认为在这一点上（在子表达式被完全评估之后），评估发生，然后是赋值。*`v[...]`*`i`*`i``i++``v[...]``i = ...`***

 ***因此，尽管增加`i`是没有意义的，但我仍然认为应该*定义*。

为什么这是未定义的行为？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-06T13:33:43.600

> 我认为在评估子表达式 v[...] 之前，将完全评估子表达式 i++

但你*为什么*会这样想？

这段代码是 UB 的一个历史原因是允许编译器优化在序列点之间的任何地方移动副作用。序列点越少，优化的潜在机会越多，但程序员越困惑。如果代码说：

```
a = v[i++]; 
```

该标准的目的是发出的代码可以是：

```
a = v[i];
++i; 
```

这可能是两条指令，其中：

```
tmp = i;
++i;
a = v[tmp]; 
```

会超过两个。

`a`“优化代码”在is时中断`i`，*但标准允许优化*，因为原始代码的行为在 is 时`a`未定义`i`。

该标准可以很容易地说，`i++`必须按照您的建议在分配之前进行评估。然后行为将被完全定义，优化将被禁止。但这不是 C 和 C++ 做生意的方式。

还要注意，在这些讨论中提出的许多示例比一般情况下更容易判断周围存在 UB。这导致人们说应该定义行为并且禁止优化是“显而易见的”。但请考虑：

```
void g(int *i, int* v, int *dst) {
    *dst = v[(*i)++];
} 
```

此函数的行为是在 时定义的`i != dst`，在这种情况下，您希望获得所有优化（这就是 C99 引入 的原因`restrict`，以允许比 C89 或 C++ 进行更多的优化）。为了给您优化，行为未定义 when `i == dst`。C 和 C++ 标准在别名方面走得很好，介于程序员不期望的未定义行为和禁止在某些情况下失败的理想优化之间。SO 上有关它的问题数量表明，提问者更喜欢少一点优化和多一点定义的行为，但划清界限仍然并不简单。

除了行为是否完全定义之外，还有一个问题是它应该是 UB，还是仅仅是与子表达式相对应的某些明确定义的操作的未指定执行顺序。C 选择 UB 的原因完全与序列点的概念有关，而且编译器实际上不需要知道修改对象*的*值，直到下一个序列点。因此，与其通过说“该”值在某个未指定的点发生变化来限制优化器，标准只是说（解释一下）：（1）任何依赖于在下一个序列点之前修改对象的值的代码，都有UB; (2) 任何修改被修改对象的代码都有 UB。“修改过的对象”是指任何可以修改的*对象*自子表达式求值的一个或多个合法顺序中的最后一个序列点以来已被修改。

其他语言（例如Java）一路走来，完全定义了表达式副作用的顺序，所以肯定有反对C方法的理由。C++ 只是不接受这种情况。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-06T13:50:27.547

我要设计一台病态计算机¹。它是一个多核、高延迟、单线程系统，具有线程内连接，使用字节级指令进行操作。因此，您请求某事发生，然后计算机运行（在其自己的“线程”或“任务”中）一组字节级指令，并在一定数量的周期后完成操作。

同时，执行的主线程继续：

```
void foo(int v[], int i){
  i = v[i++];
} 
```

变成伪代码：

```
input variable i // = 0x00000000
input variable v // = &[0xBAADF00D, 0xABABABABAB, 0x10101010]
task get_i_value: GET_VAR_VALUE<int>(i)
reg indx = WAIT(get_i_value)
task write_i++_back: WRITE(i, INC(indx))
task get_v_value: GET_VAR_VALUE<int*>(v)
reg arr = WAIT(get_v_value)
task get_v[i]_value = CALC(arr + sizeof(int)*indx)
reg pval = WAIT(get_v[i]_value)
task read_v[i]_value = LOAD_VALUE<int>(pval)
reg got_value = WAIT(read_v[i]_value)
task write_i_value_again = WRITE(i, got_value)
(discard, discard) = WAIT(write_i++_back, write_i_value_again) 
```

所以你会注意到我没有等到`write_i++_back`最后，与我等待的时间相同`write_i_value_again`（我从哪个值加载`v[]`）。而且，事实上，这些写入是唯一回写到内存的。

想象一下，如果写入内存是这个计算机设计中真正缓慢的部分，它们会被分批成一个队列，然后由并行内存修改单元处理，该单元按字节进行处理。

所以`write(i, 0x00000001)`and`write(i, 0xBAADF00D)`无序并行执行。每个都变成字节级写入，并且它们是随机排序的。

我们最终写入高字节，然后`0x00`写入下一个字节，然后写入下一个字节，最后写入低字节。i 中的结果值是，很少有人会想到，但对于您的未定义操作来说，这将是一个有效的结果。`0xBA``0xAD``0x00``0xF0` `0x00``0x0D` `0x01``0xBA000001`

现在，我所做的只是导致一个未指定的值。我们没有使系统崩溃。但是编译器可以自由地使其完全未定义——也许在同一批指令中向内存控制器发送两个这样的请求以获得相同的地址实际上会使系统崩溃。这仍然是编译 C++ 的“有效”方式和“有效”执行环境。

请记住，在这种语言中，将指针大小限制为 8 位仍然是有效的执行环境。C++ 允许编译成相当古怪的目标。

¹：正如@SteveJessop 在下面的评论中所指出的，开玩笑的是，这台病态计算机的行为很像现代台式计算机，直到您进行字节级操作。CPU 的非原子`int`写入在某些硬件上并不罕见（例如，当`int`CPU 未按照 CPU 希望对齐的方式对齐时）。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-06T13:37:25.090

原因不仅仅是历史原因。例子：

```
int f(int& i0, int& i1) {
    return i0 + i1++;
} 
```

现在，这个调用会发生什么：

```
int i = 3;
int j = f(i, i); 
```

当然可以对代码提出要求，`f`以便明确定义此调用的结果（Java 会这样做），但 C 和 C++ 不会施加约束；这给优化器更多的自由。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-06T13:59:35.777

您专门参考了 C++11 标准，所以我将用 C++11 的答案来回答。然而，它与 C++03 的答案非常相似，但排序的定义不同。

C++11 定义了单个线程上的求值之间的*顺序*关系。它是不对称的、传递的和成对的。如果某个评估 A 没有在某个评估 B 之前排序，并且 B 也没有在 A 之前排序，那么这两个评估是*unsequenced*。

*评估*表达式包括值计算（计算某个表达式的值）和副作用。*副作用*的一个实例是对象的修改，这是回答问题最重要的一个。其他事情也算作副作用。如果一个副作用相对于同一对象上的另一个副作用或值计算是未排序的，那么您的程序具有未定义的行为。

所以就是这样设置的。第一个重要的规则是：

> 与完整表达式关联的每个值计算和副作用在与要评估的下一个完整表达式关联的每个值计算和副作用之前排序。

因此，任何完整表达式都会在下一个完整表达式之前进行完整评估。在你的问题中，我们只处理一个完整的表达式，即`i = v[i++]`，所以我们不需要担心这个。下一个重要规则是：

> 除非另有说明，否则单个运算符的操作数和单个表达式的子表达式的求值是无序的。

这意味着在 中`a + b`，例如，对`a`和的评估`b`是无序的（它们可以按任何顺序进行评估）。现在是我们最后的重要规则：

> 运算符的操作数的值计算在运算符结果的值计算之前排序。

所以对于`a + b`，sequenced before 关系可以用一棵树来表示，其中有向箭头表示sequenced before 关系：

```
a + b (value computation)
^   ^
|   |
a   b (value computation) 
```

如果两个评估发生在树的不同分支中，则它们是无序的，因此这棵树显示 和 的评估`a`相`b`对于彼此是无序的。

`i = v[i++]`现在，让我们对您的示例做同样的事情。我们利用`v[i++]`定义为等价的事实`*(v + (i++))`。我们还使用了一些关于后缀增量排序的额外知识：

> 表达式的值计算`++`在操作对象的修改之前排序。

所以我们开始了（树的一个节点是一个值计算，除非指定为副作用）：

```
i = v[i++]
^     ^
|     |
i★  v[i++] = *(v + (i++))
                  ^
                  |
               v + (i++)
               ^     ^
               |     |
               v     ++ (side effect on i)★
                     ^
                     |
                     i 
```

`i`在这里，您可以看到, , 的副作用是在赋值运算符前面`i++`的用法的单独分支中（我用 ★ 标记了这些评估中的每一个）。`i`所以我们肯定有未定义的行为！如果您想知道您的评估顺序是否会给您带来麻烦，我强烈建议您绘制这些图表。

所以现在我们得到了一个问题，即`i`赋值运算符之前的值无关紧要，因为无论如何我们都会重写它。但实际上，在一般情况下，这是不正确的。我们可以覆盖赋值运算符并在赋值之前使用对象的值。标准并不关心我们不使用该值 - 规则被定义为使任何具有副作用的未排序的值计算都将是未定义的行为。没有但是。这种未定义的行为允许编译器发出更优化的代码。如果我们为赋值运算符添加排序，则无法使用此优化。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-06T13:33:35.633

> 在此示例中，我认为子表达式 i++ 将在评估子表达式 v[...] 之前完全评估，并且子表达式的评估结果是 i （在增量之前），但 i 的值是该子表达式被完全计算后的增量值。

`i++`必须在索引之前评估in 的增量，`v`因此在分配给 之前`i`，**但是**之前不需要将该增量的值存储回内存。在语句`i = v[i++]`中有两个修改的子操作`i`（即最终会导致从寄存器存储到变量中`i`）。该表达式`i++`等价于`x=i+1`, `i=x`，并且不要求两个操作都需要按顺序进行：

```
x = i+1;
y = v[i];
i = y;
i = x; 
```

通过这种扩展， 的结果`i`与 中的值无关`v[i]`。在不同的扩展中，`i = x`赋值可能发生*在*赋值之前，`i = y`结果将是`i = v[i]`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-06T22:41:21.843

有两条规则。

第一条规则是关于导致“写-写危险”的多次写入：*在两个序列点之间不能多次修改同一个对象。*

第二条规则是关于“读写危险”的。就是这样：*如果一个对象在表达式中被修改，并且也被访问过，那么对其值的所有访问都必须是为了计算新值。*

像`i++ + i++`和你的表达这样的表达`i = v[i++]`违反了第一条规则。他们修改一个对象两次。

like 表达式`i + i++`违反了第二条规则。`i`左边的子表达式观察被修改对象的值，而不参与其新值的计算。

因此，违反了与(bad read-write)`i = v[i++]`不同的规则 (bad write- write)。`i + i++`

* * *

规则过于简单，产生了令人费解的表达方式。考虑一下：

```
p = p->next = q 
```

这似乎有一个健全的数据流依赖性，没有危险：在`p =`知道新值之前不能进行分配。新值是 的结果`p->next = q`。该值`q`不应“领先”并进入内部`p`，这样`p->next`会受到影响。

然而，这个表达式打破了第二条规则：`p`被修改，并且还用于与计算其新值无关的目的，即确定`q`放置值的存储位置！

因此，反常地，编译器被允许部分评估`p->next = q`以确定结果是`q`，并将其存储到`p`中，然后返回并完成`p->next =`分配。或者看起来是这样。

这里的一个关键问题是，赋值表达式的值是什么？C 标准说赋值表达式的值是左值的值，*在 assignment 之后*。但这是模棱两可的：它可以解释为“一旦发生赋值，左值*将*具有的值”或“在赋值发生后可以在左值中观察到的值”。在 C++ 中，“[i] 在所有情况下，赋值都在左右操作数的值计算之后，赋值表达式的值计算之前进行排序。”，因此`p = p->next = q`看起来是有效的 C++ , 但可疑 C.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-06T13:25:53.347

如果示例是 ，我会分享您的论点`v[++i]`，但是由于`i++`修改`i`是副作用，因此未定义*何时*修改值。该标准可能会以一种或另一种方式强制要求结果，但没有*真正*的方法知道`i`应该是什么值：`(i + 1)`或`(v[i + 1])`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-31T19:41:39.737

假设给定的声明有效，请考虑以下每个赋值语句所需的机器操作序列：

```
extern int *foo(void);
extern int *p;

*p = *foo();
*foo() = *p; 
```

如果左侧下标和右侧值的求值是无序的，那么处理这两个函数调用的最有效方法可能是：

```
[For *p = *foo()]
call foo (which yields result in r0 and trashes r1)
load r0 from address held in r0
load r1 from address held in p
store r0 to address held in r1

[For *foo() = *p]
call foo (which yields result in r0 and trashes r1)
load r1 from address held in p
load r1 from address held in r1
store r1 to address held in r0 
```

在任何一种情况下，如果在调用 foo 之前将 p 或 *p 读入寄存器，那么除非“foo”承诺不会干扰该寄存器，否则编译器将需要在调用“foo”之前添加一个额外的步骤来保存其值，以及之后恢复该值的另一​​个额外步骤。可以通过使用“foo”不会干扰的寄存器来避免这个额外的步骤，但这只有在有一个这样的寄存器不包含周围代码所需的值时才会有所帮助。

让编译器在函数调用之前或之后读取“p”的值，在空闲时，将允许有效地处理上述两种模式。要求“=”的左侧操作数的地址始终在右侧之前进行评估可能会使上述第一个赋值的效率低于其他情况，并要求评估左侧操作数的地址在右侧之后会使第二次分配效率降低。***

# sql-server-2008 - 将大量记录移入 msmq？

> ID：13744510
> 
> 赞同：0
> 
> 时间：2012-12-06T13:21:06.100
> 
> 标签：sql-server-2008, msmq

将大量记录（以数百万计的数量级）移动到 msmq 的最快方法是什么？我们使用 Sql server 2008 r2。想到的是使用集成服务 - 使用我不熟悉的消息队列任务。

我偶然发现了一个类似的问题，但我认为它不能回答问题：

[将数据库行批量发送到消息队列以进行长时间运行的操作](https://stackoverflow.com/questions/2029836/bulk-database-rows-to-message-queue-for-long-running-operation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:35:31.443

您的选择是：

1.  使用 SSIS msmq 任务。
2.  在 .net 中编写一个执行此操作的组件并将其注册到 SQL CLR 中。

我更喜欢第一个选项。

# asp.net - UpdatePanel 和 ClientIDMode="Static" 的可能解决方案

> ID：13744513
> 
> 赞同：7
> 
> 时间：2012-12-06T13:21:13.727
> 
> 标签：asp.net, updatepanel

我一直在寻找解决 Asp.NET 中静态 ClientIDMode + UpdatePanel 的方法，如[http://connect.microsoft.com/VisualStudio/feedback/details/584991/clientidmode-static-in-updatepanel-fails所示-to-do-async-postback](http://connect.microsoft.com/VisualStudio/feedback/details/584991/clientidmode-static-in-updatepanel-fails-to-do-async-postback)

问题出在 Sys.WebForms.PageRequestManager 中。*uniqueIDToClientID 函数，通过将“$”字符替换为“”来将名称转换为 id*。我做了一个似乎有效的修复，但我希望你们告诉我你的想法以及我是否遗漏了什么。非常感谢！

```
var old_uniqueIDToClientID = Sys.WebForms.PageRequestManager.prototype._uniqueIDToClientID;
Sys.WebForms.PageRequestManager.prototype._uniqueIDToClientID = function (arg) {
    var element = this._form.elements[arg];
    return (element) ? element.id : old_uniqueIDToClientID(arg)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:17:56.987

我们进行了类似的修复，但我们更改了另一个与搜索导致回发的元素有关的函数。

我们在母版页底部放置了以下代码，以确保在 scriptmanager 加载其脚本后包含它。本质上，它一直在修改 id，直到找到导致回发的元素。原始代码通过从由美元符号分隔的名称右侧删除标记来搜索元素。所以“$ctl00$ddl001”会变成“$ctl00”。如果您使用的是静态 ID，那么该后缀可能永远不会存在。我们将函数修改为从左侧开始并删除容器名称，直到找到一个元素。

它现在似乎对我们有用。:)

```
 if (Sys.WebForms.PageRequestManager) {
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm._findNearestElement = function (uniqueID) {
        while (uniqueID.length > 0) {
            var clientID = this._uniqueIDToClientID(uniqueID);
            var element = document.getElementById(clientID);
            if (element) {
                return element;
            }
            var indexOfFirstDollar = uniqueID.indexOf('$', 1);
            if (indexOfFirstDollar === -1) {
                return null;
            }
            uniqueID = uniqueID.substring(indexOfFirstDollar + 1, uniqueID.length);
        }
        return null;
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T07:17:12.797

要在异步模式下工作的更新面板，您需要在表单中添加脚本管理器标签。

```
<asp:ScriptManager EnablePartialRendering="true"
 ID="ScriptManager1" runat="server"></asp:ScriptManager> 
```

或者您可以添加触发器

```
<Triggers>
     <asp:AsyncPostBackTrigger ControlID="ddl_Manufacturer" EventName="SelectedIndexChanged" />
</Triggers> 
```

# java - 在 Java 多态中调用子类

> ID：13744514
> 
> 赞同：4
> 
> 时间：2012-12-06T13:21:18.023
> 
> 标签：java, polymorphism

我有一个超类 Shape.Java 接受某种形状的颜色，以及几个计算不同多边形面积的子类。我创建了一个主类，打印出用户想要计算的不同多边形选择。

```
public static void choices() {
    System.out.println("What do you want to compute?");
    System.out.println("a. Rectangle");
    System.out.println("b. Triangle");
    System.out.println("c. Trapezoid");
} 
```

我为此使用了一个开关盒。

```
case 'a': {
    System.out.print("Enter width: ");
    double width = input.nextDouble();
    System.out.print("\nEnter height: ");
    double height = input.nextDouble();
        .....
} 
```

问题是，我将如何调用包含显示用户输入和计算区域的方法的子类 Rectangle（扩展超类 Shape）？这个对吗？

```
Shape rec = new Rectangle(); 
```

如果是这样，当我编译它时，我得到一个错误'找不到符号构造函数 Rectangle...'

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:23:25.973

你做对了。您未定义的符号可能是导入错误或不存在的结果；也许`Rectangle`没有编译，或者您在 Rectangle 上没有公共的无参数构造函数。

由于*动态调度*，当你这样做时

`Shape rec = new Rectangle();`

解释器在运行时会查看`rec`并调用 on 的方法`Rectangle`，如果您调用的是在 上定义`Shape`然后在 上覆盖的方法`Rectangle`。

# multithreading - 线程中的 Rand() 函数

> ID：13744520
> 
> 赞同：0
> 
> 时间：2012-12-06T13:21:35.660
> 
> 标签：multithreading, pthreads, srand

```
#include <pthread.h>
#ifndef __linux__
#include <windows.h>// to include the windows.h library//
#endif
#include <stdio.h>
#include <stdlib.h>
#define NUM_THREADS 5
#include <sys/timeb.h>

void *PrintHello(void *threadid)
{
   srand(time(NULL));
   long tid,a;
   tid = (long)threadid;
   a=rand()%5;
   printf("Hello World! It's me, thread #%ld!%ld\n", tid,a);
   pthread_exit(NULL);
    }

int main (int argc, char *argv[])
{
    pthread_t threads[NUM_THREADS];
    int rc;
    long t,a;
    srand(time(NULL));
    for(t=0; t<NUM_THREADS; t++){
          a=rand()%5;
           printf("In main: creating thread %ld,%ld\n", t,a);
           rc = pthread_create(&threads[t], NULL, PrintHello, (void *)t);
              if (rc){
            printf("ERROR; return code from pthread_create() is %d\n", rc);
                 exit(-1);
       }
       } 

          /* Last thing that main() should do */
      pthread_exit(NULL);
      } 
```

好吧，我有这个简单的代码，当我在 main() 中编译它时，随机数彼此不同，但是当我尝试在线程内生成随机数时，生成的所有数字都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:28:01.593

尝试从线程外部播种。问题是您为每个线程获得相同的种子

# php - 使用 str_replace 或 preg_replace 更改图像路径

> ID：13744521
> 
> 赞同：0
> 
> 时间：2012-12-06T13:21:36.520
> 
> 标签：php, str-replace

您好朋友，我无法使用`str_replace ();`PHP 的功能获得所需的结果。

**我的代码是这样的：**

```
<?php ob_start (); /* Start Buffering */

$layout = 'climate';

?>

<div>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pellentesque.</p>

<img src="images/industry/pic1.jpg"/>
<img src="products/images/industry/pic2.jpg"/>
<img src="samples/products/images/industry/pic3.jpg"/>

</div>

<?php ob_get_contents();  /* Get the Buffer */

$content = str_replace('/desktop/', $layout . '/images/', $layout);

echo $content;

ob_end_flush (); /* Send Output to the browser */

?> 
```

现在我要做的是让整个页面生成，然后我想获取生成的页面并替换其路径中的特定单词。最后将缓冲区发送到浏览器。

**请注意：**

我**对 PHP 非常陌生，**因此请您帮助我更正此代码以更正语法。

我的输出中的这些路径是由我正在使用的 CMS 生成的，因此我无法控制它们。

变量的值`$layout`由另一个 PHP 函数分配。为了避免混淆，我没有提到那个片段。

由于我的主题**是非 JavaScript**，我不打算使用任何 JavaScript。

**期望的输出：**

在将其发送到浏览器之前，我想`/industry/`将其替换为整个页面的值。`/$layout/`

```
<div>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pellentesque.</p>

<img src="images/climate/pic1.jpg"/>
<img src="products/images/climate/pic2.jpg"/>
<img src="samples/products/images/climate/pic3.jpg"/>

</div> 
```

**最后 ：**

如果您觉得比这个更好，请随时提出任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:29:52.047

您可以获取缓冲区并使用 关闭它[`ob_get_clean()`](http://php.net/ob_get_clean)，然后进行替换并回显`$content`，这会将其发送到浏览器。

```
$content = ob_get_clean();  
$content = str_replace('/industry/', '/' . $layout . '/', $content);
echo $content; 
```

# javascript - 如何从从该 iframe 打开的弹出窗口中设置 iframe 的 src

> ID：13744524
> 
> 赞同：0
> 
> 时间：2012-12-06T13:21:52.710
> 
> 标签：javascript, google-chrome, iframe, window, location

我有一个`iframe`从中打开一个弹出窗口。在该弹出窗口中进行一些重定向后，我想更改`src`，`iframe`然后关闭弹出窗口。这在 Chrome 中不起作用（在其他浏览器中起作用）。我正在尝试使用`window.opener.location.href=newURL`，但在 Chrome 中，这会将 更改`href`为页面，而不是`iframe`. 有什么建议么？我不是 javascript 开发人员，但这是我的项目所需的一小部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:39:14.807

我想这可能与 Chrome 强加的安全性有关。您可以编写用于更改 url 的函数（分配 window.location 的简单包装器），然后从弹出窗口中调用该函数，而不是直接尝试弄乱开启程序的位置。

```
// function in parent (opener window)
function navigateTo(url) {
    window.location = url;
}

// invoke that function from within pop-up like so:
window.opener.navigateTo('http://some-url.com'); 
```

如果父窗口和弹出窗口在执行上述函数时共享相同的域，它将起作用。

# jquery - jQuery 将 2 个输入文本的值相加，然后将其与总计相加

> ID：13744527
> 
> 赞同：2
> 
> 时间：2012-12-06T13:21:55.273
> 
> 标签：jquery

天哪，我不知道该怎么办，请帮助我......

我有这个 html 代码

```
<div id="project_math">
<form method="post">
 Quantity : <input type="text" name="quatity" value="1" />
 Amount : <input type="text" name="amounty" value="20" />
 <span id="total">20</span>
</form>
</div> 
```

jQuery

```
$(document).ready(function(){

    /* COMPUTATION */
    $('input[name=quantity_e]').keyup(function(){

        var sum = $('input[name=amt_e]').val();

        sum *= $('input[name=quantity_e]').val();
        $("#total").text($(this).val());

    });
}); 
```

我想要做的是，当我`keyup`输入像 2 或 10 这样的值时，它会将它的值乘以金额值，所以如果我`keyup`2 那么金额值是 20，那么总数应该是 40。

我的 jQuery 错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:23:54.260

`val`返回一个字符串。因此，您必须将其转换为数字。您可以使用`parseInt`.

```
var sum = parseInt($('input[name=amt_e]').val(), 10);
sum *= parseInt($('input[name=quantity_e]').val(), 10);
$("#total").text(sum); 
```

您在 javascript 中使用的名称与 html 中的名称不同。但这可能只是你的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:24:35.447

试试看`parseInt`：

```
 var sum = parseInt($('input[name=amt_e]').val());
    sum *= parseInt($('input[name=quantity_e]').val()); 
```

如果值不是整数，它当然会失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:27:30.590

好吧，您的选择器错误并`val`返回一个字符串，您应该首先将字符串转换为数字。

```
$('input[name=quatity]').keyup(function(){
    var sum = parseInt(this.value, 10)
    sum *= parseInt($('input[name=amounty]').val(), 10);
    $("#total").text(sum);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:29:06.797

用这个：

```
/* COMPUTATION */
$('input[name=quatity]').keyup(function(){

    var sum = parseInt($('input[name=amounty]').val());

    sum += parseInt($('input[name=quatity]').val());
    $("#total").text(sum);

});​ 
```

在小提琴上试试这个：

[http://jsfiddle.net/XwjKN/](http://jsfiddle.net/XwjKN/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T13:32:15.040

**val()返回字符串，因此使用****带有 10 radix的****[parseInt](http://www.w3schools.com/jsref/jsref_parseint.asp)**转换为 int 值，默认为 8

```
var total= parseInt($('input[name=amt_e]').val(), 10);
total*= parseInt($('input[name=quantity_e]').val(), 10);
$("#total").text(total); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T13:41:10.803

如果任何文本框为空，上述解决方案将给出 NaN。请试试这个它会给0。

变量 v1=0; 变量 v2=0;

```
if(!isNaN(parseInt($('input[name=amounty]').val()))){ v1 = parseInt($('input[name=amounty]').val()); }
if(!isNaN(parseInt($('input[name=quatity]').val()))){ v2 = parseInt($('input[name=quatity]').val()); }

sum = v1 * v2; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T13:42:22.343

您可以尝试以下方法：

```
var item1 = parseInt($('input[name=amounty]').val(), 10);
var item2 = parseInt($('input[name=quantity]').val(), 10);
if(item1 !== NaN && item2 !== NaN) {  //This is a check to make sure the values are numbers
    var product = item1 * item2;
    $('#total').text(product);
    $('input[name=total]).val(product);    //This will put the value in the hidden input field
} 
```

如果值不是两个数字，此解决方案将不会尝试计算。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-06T13:47:26.760

输入字段名称中的大量更正：

1.  数量是您可能希望的实际输入字段名称，但它在 HTML 和 Jquery 中都没有正确使用。

2.  显示总值的跨度不会随您计算的 SUM 更新，而是始终随数量值更新。

找到更正后的 HTML：

```
<div id="project_math">
<form method="post">
 Quantity : <input type="text" name="quantity" value="1" />
 Amount : <input type="text" name="amounty" value="20" />
 <span id="total">20</span>
</form>
</div>​ 
```

jQuery：

```
$(document).ready(function(){

    /* COMPUTATION */
    $('input[name=quantity]').keyup(function(){

        console.log('fired');
        var sum = $('input[name=amounty]').val();

        sum *= $('input[name=quantity]').val();
        $("#total").text(sum );

    });
});​ 
```

# rspec - 如何使用 RSpec 运行文件的特定测试？

> ID：13744529
> 
> 赞同：1
> 
> 时间：2012-12-06T13:21:55.007
> 
> 标签：rspec

> **可能重复：**
> [如何在 Rspec 中仅运行特定测试？](https://stackoverflow.com/questions/5069677/how-do-i-run-only-specific-tests-in-rspec)

我正在使用 RSpec 1.3.2，我尝试了选项 -e、-t、--tag，但没有一个可以正常工作。-l 选项有效但不具体。

# eclipse - 使用 Eclipse IDE 为 Java EE 开发人员安装 FindBugs 插件

> ID：13744530
> 
> 赞同：5
> 
> 时间：2012-12-06T13:21:59.980
> 
> 标签：eclipse, plugins, installation, findbugs

我正在努力让 Eclipse FindBugs 插件正常工作，并且确信某处出现了男生错误。

我将文件[findbugs-2.0.2-rc2.zip](http://prdownloads.sourceforge.net/findbugs/findbugs-2.0.2-rc2.zip?download)解压缩 到本地文件夹**C:\Program Files\findbugs-2.0.2-rc2**并运行**findbugs.bat**， FindBugs 在本地 Java (Eclipse) 项目上运行良好。

我添加了[FindBugs 更新站点](http://findbugs.cs.umd.edu/eclipse "FindBugs 更新站点")，它找到了“FindBugs Feature, 2.0.1.20120712”并安装了它。重新启动，右键单击打开的 Java 项目不会显示“FindBugs”选项（[此视频](http://www.youtube.com/watch?v=1AJjwsuESno&feature=youtu.be&hd=1)显示）。

我查看了**Window > Preferences**试图找到一种方法来通知插件本地 FindBugs 安装（在 Program Files 中），但找不到任何东西。

卸载“FindBug 功能”，我尝试将 FindBugs Eclipse 插件[zip 文件](http://prdownloads.sourceforge.net/findbugs/edu.umd.cs.findbugs.plugin.eclipse_2.0.2.20121204.zip?download)解压缩到 Eclipse 的插件文件夹中，但重启后，没有发现任何区别。

**Help > About Eclipse > Installation Details > Installed Software**列出“FindBugs Feature 2.0.1.20120712”。

任何人都可以提供一个关于我在这里出错的地方吗？谢谢！

Windows 7、面向 Java EE 开发人员的 Eclipse IDE Juno SR1、JDK 1.7.0_09、FindBugs 2.0.2-rc2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T16:19:34.377

如上所述，问题可能是由于对 C:\Program Files\Eclipse\plugins 文件夹没有适当的写入权限引起的。

解决方案：关闭 Eclipse。以管理员身份重新启动 Eclipse（右键单击 - 以管理员身份运行）。重新安装插件。重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:11:01.827

嗨，我也遇到了类似的问题，但根据我自己的经验，我可以建议您解决方案：-

请确保您使用的是 eclipse 3.6 或更高版本。findbugs 2.0 与 Eclipse 3.5（Eclipse Galileo）不兼容。

1) 请将 findbugs zip 文件解压缩到 eclipse 文件夹中（安装 eclipse 的位置）。这将自动将 findbug 插件移动到 eclipse 插件文件夹中。重新启动eclipse，你会发现右键单击项目的findbugs选项。

2）如果 1 步骤不起作用，请删除 eclipse 插件文件夹的所有 findbug jar，并将完整文件夹放入 eclipse dropins 文件夹中。重新启动eclipse，您将看到不同之处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:12:06.030

看起来 Findbugs 插件没有被 Eclipse 正确安装和/或禁用。可能有几个原因。

1.  同一个插件的多个版本。为确保不是这种情况，请删除所有 Findbugs 版本（手动安装并通过市场安装），然后重新安装一个（最好通过市场安装）。在安装过程中注意任何警告。
2.  与另一个插件存在（依赖）冲突。但是，如果是这种情况，我认为 Eclipse 会在日志中警告哪个插件是导致冲突的原因。
3.  权利问题。确保您在主 Eclipse 文件夹及其所有子文件夹中具有写入权限。
4.  我记得在某处读到，`C:\Program Files\`在 Windows 下安装 Eclipse 也会导致问题。尝试将 Eclipse 移动到不同的文件夹，例如`C:\Eclipse`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-27T09:41:37.593

您可以按照这些步骤使 findbugs 在您的 Eclipse 中工作。

1.从市场安装 FireBug 插件。

```
Help->Eclipse Marketplace ->then search for FindBugs 
```

2.为您的项目配置 FindBug

[在没有 Maven的情况下](https://stackoverflow.com/questions/6395546/findbugs-not-showing-the-bugs-found)[使用Maven](http://czetsuya-tech.blogspot.in/2012/04/how-to-setup-findbugs-with-maven-on.html)

这对我使用 eclipse juno 来说效果很好。

# javascript - 如何在 xcode 中查看 javascript 语法错误？

> ID：13744534
> 
> 赞同：1
> 
> 时间：2012-12-06T13:22:11.730
> 
> 标签：javascript, xcode, weinre

我正在 xcode 上构建一个混合应用程序。

在 xcode 中找出 javascript 错误令人头疼。

你知道在 eclipse 中我们可以看到所有的 javascript 语法错误以及 eclipse 控制台上的日志。在 xcode 中，我无法在 xcode 控制台中看到任何 javascript 语法错误。

是的，使用[weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)工具，您可以查看 javascript 日志，但同样无法查看 javascript 语法错误。

帮帮我，有什么办法吗？

谢谢！

# search - 批量重命名/移动/删除档案中的文件

> ID：13744541
> 
> 赞同：1
> 
> 时间：2012-12-06T13:22:38.533
> 
> 标签：search, batch-file, archive

下午好，我错过了 Total Commander 中的这个功能（不存在插件）并且没有找到 sw 可以执行以下操作：当我在档案中搜索时（菜单 - 命令 - 搜索 - 在档案中搜索），结果无法显示在“Feed到列表框”。我需要这个功能来批量重命名/移动/删除档案中的文件（搜索结果）。我会很感激一些想法或脚本或解决方法来适应这个功能......

# html - 网站的自动 Retina 图像

> ID：13744542
> 
> 赞同：113
> 
> 时间：2012-12-06T13:22:44.763
> 
> 标签：html, image, retina-display

使用配备 Retina 显示屏的新 Apple MacBook Pro，如果您在网站上提供“标准”图像，它会有点模糊。所以你必须提供视网膜图像。

有没有办法像iOS（使用Objective-C）那样自动切换到`@2x`图像？我发现的是：[CSS 用于移动和视网膜显示器上的高分辨率图像](https://stackoverflow.com/questions/11060654/how-do-i-set-retina-graphics-for-my-website)，但我希望我可以为我的所有图像找到一个自动处理，**而不需要 CSS 或 JavaScript**。

可能吗？

**更新**
我要强调[@Paul D. Waite](https://stackoverflow.com/users/20578/paul-d-waite)建议的这篇有趣的[**文章**](http://blog.netvlies.nl/design-interactie/retina-revolution/)[以及Sebastian](https://stackoverflow.com/users/351836/sebastian)链接的关于它的有趣[**讨论**](http://silev.org/test/Retina-resize.html)。[](http://silev.org/test/Retina-resize.html)

 *** * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-10-04T17:01:04.803

img 标签有一个新属性，允许您添加一个retina src 属性，即srcset。**无需 javascript 或 CSS，无需双重加载图像。**

`<img src="low-res.jpg" srcset="high-res.jpg 2x">`

浏览器支持：[http ://caniuse.com/#search=srcset](http://caniuse.com/#search=srcset)

其他资源：

*   [WebKit 发布帖](https://www.webkit.org/blog/2910/improved-support-for-high-resolution-displays-with-the-srcset-image-attribute/)
*   srcset 的[W3C 文档](http://w3c.github.io/html/semantics-embedded-content.html#element-attrdef-img-srcset)
*   [关于为什么以及如何使用 srcset 的很好的解释](http://mobile.smashingmagazine.com/2013/08/21/webkit-implements-srcset-and-why-its-a-good-thing/)
*   [Chris Coyer 的帖子](http://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-srcset/)了解更多信息

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-15T20:25:57.770

有不同的解决方案，每种都有自己的优点和缺点。哪一个最适合您取决于各种因素，例如您的网站设计方式、典型访问者使用的技术类型等。请注意，视网膜显示器不仅限于 Macbook Pro Retina 和即将推出的 iMac，还包括移动设备，它们可能有自己的需求。

通常，该问题也与响应式设计中的图像密切相关。事实上，最好使用通用响应式设计技术，而不是针对特定设备进行设计。毕竟，技术在未来也会一直在变化。

我注意到的一些解决方案/讨论：

*   尽可能使用矢量，包括 CSS 技术（渐变、圆角等）、SVG 和图标字体。
*   提供高分辨率（“视网膜”）图像，但更多地压缩它们（JPEG 质量），正如*[Yoav Weiss](http://blog.yoav.ws/2012/05/Responsive-image-format)*所建议的那样，或者让移动网络在真正需要时（即移动时）压缩它们，如*[Paul Boag](http://boagworld.com/dev/how-should-we-handle-responsive-images/)*所建议的。
*   *[自适应图像](http://adaptive-images.com/)*，（主要是）服务器端解决方案。它基于存储屏幕分辨率的 cookie、配置为通过 PHP 脚本提供图像的 Web 服务器以及用于读取 cookie 并提供适当图像的命名脚本。
*   *Smashing Magazine*上很好地描述和讨论了[一堆可能性](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)。
*   *[正如Paul Boag](http://boagworld.com/design/how-should-we-deal-with-retina-displays/)*在视频中所建议的那样，提供稍高的分辨率以稍微平滑视网膜图像。
*   *A List Apart*上[的@1.5x 技术](http://www.alistapart.com/articles/mo-pixels-mo-problems/)基本上是相同的想法。
*   在不久的将来，[`<picture>`标签](http://www.alistapart.com/articles/responsive-images-and-web-standards-at-the-turning-point/)可能会成为*[W3C 工作组](http://www.w3.org/community/respimg/)*甚至苹果公司支持的解决方案。
*   *Jake Archebald*提出的一种[JavaScript 技术](http://24ways.org/2011/adaptive-images-for-responsive-designs-again/)。
**   *Smashing Magazine*上对不同技术和一般问题的[广泛讨论](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)。*

 **正如其他答案所示，还有更多技术 - 但可能还没有最佳实践。

我想知道的一件事是如何在没有可用的相应设备的情况下测试和调试其中一些技术......

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-14T18:06:35.967

由于还没有人提到明显的，我将它浮出水面：在可能的情况下，只使用 SVG。它们毫不费力地以美丽的视网膜分辨率出现。

对它的支持很好，因为 IE8 是需要担心的主要恐龙。Gzipped 文件大小通常比位图 (png/jpg) 格式更好，并且图像更灵活；您可以在不同的分辨率下重复使用它们，并在必要时重新设计它们，从而节省开发时间和下载带宽。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-07-05T07:06:47.937

这是我用来为背景图像实现此目的的较少 mixin。如果您使用的是 dotLess，retina.js 不适用于背景图像，因为它需要自己的 mixin，而该 mixin 本身使用 dotLess 不支持的脚本评估。

所有这一切的诀窍是获得 IE8 支持。它不能轻易地做背景尺寸，所以基本情况（非移动媒体查询）必须是一个简单的、非缩放的图标。媒体查询然后处理视网膜的情况，并且可以自由使用背景大小类，因为视网膜永远不会在 IE8 上使用。

```
.retina-background-image( @path, @filename,@extension, @size )
{
     .background-size( cover );
     background-image: url( "@{path}@{filename}@{extension}" );
         @media only screen and ( -webkit-min-device-pixel-ratio: 2 ),
                only screen and ( -moz-min-device-pixel-ratio: 2 ),
                only screen and ( -o-min-device-pixel-ratio: 2/1 ),
                only screen and ( min-device-pixel-ratio: 2 )
         {
             background-image:url( "@{path}@{filename}@x2@{extension}" );
             background-size:@size @size;
         }
} 
```

使用示例：

```
.retina-background-image( "../references/Images/", "start_grey-97_12", ".png", 12px ); 
```

这需要你有两个文件：

*   `start_grey-97_12.png`
*   `start_grey-97_12@2x.png`

其中`2x`文件是视网膜的双分辨率。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-06T14:44:10.420

只需向每个人提供视网膜图像，并将图像压缩到图像元素内其原始大小的一半。就像假设您的图像`400px`又宽又高 - 只需指定图像宽度`200px`以使其看起来像这样清晰：

```
<img src="img.jpg" width="200px" height="200px" /> 
```

如果您的图像是照片，您可能可以增加它的 JPG 压缩而不会使它看起来更糟，因为当图像显示在以下位置时可能看不到 JPG 压缩伪影`2x`：请参阅[http://blog.netvlies.nl/设计交互/视网膜革命/](http://blog.netvlies.nl/design-interactie/retina-revolution/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T13:48:37.153

如果它的背景图像执行此操作的简单方法是：

```
 #image { background: url(image.png); }

@media only screen and (-webkit-min-device-pixel-ratio: 2),
       only screen and (-moz-min-device-pixel-ratio: 2),
       only screen and (-o-min-device-pixel-ratio: 2/1),
       only screen and (min-device-pixel-ratio: 2) {
           #image { background: url(image@2x.png); background-size: 50%; }
} 
```

另一种简单的方法是使用此方法：

只需更换：

```
<img src="image.jpg" alt="" width="200" height="100" /> 
```

和

```
<img src="image@2x.jpg" alt="" width="200" height="100" /> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-05T08:36:25.263

我发现了这种提供多分辨率图像的有趣方式。
它实际上使用了 CSS，这是我想避免的，并且仅适用于 Safari 和 Chrome。
我在谈论`image-set`。

这是一个由 Apple 提供的**示例**（[此处](http://developer.apple.com/library/safari/#documentation/NetworkingInternet/Conceptual/SafariImageDeliveryBestPractices/ServingImagestoRetinaDisplays/ServingImagestoRetinaDisplays.html)）：

```
header {
    background: -webkit-image-set( url(images/header.jpg)    1x,
                                   url(images/header_2x.jpg) 2x);
    height: 150px; /* height in CSS pixels */
    width: 800px; /* width in CSS pixels */
} 
```

我还想分享这两个链接：

*   [Safari 6 和 Chrome 21 添加图像集以支持视网膜图像](http://blog.cloudfour.com/safari-6-and-chrome-21-add-image-set-to-support-retina-images/)
*   [符号*@*`image-set()` W3C](http://dev.w3.org/csswg/css-images/#image-set-notation)

 ** * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-13T16:28:44.847

使用 JSF，您可以创建一个[自定义 Facelets 标记](https://stackoverflow.com/questions/14751624/how-to-create-a-custom-facelets-tag)来省去必须添加`srcset`到每个图像的麻烦。

在你的`taglib.xml`你可以有类似的东西：

```
<tag>
  <tag-name>img</tag-name>
  <source>tags/img.xhtml</source>
  <attribute>
    <name>src2x</name>
    <required>true</required>
    <type>java.lang.String</type>
  </attribute>
</tag> 
```

您的标签可能类似于：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

  <img src="#{fn:replace(src2x, '@2x', '')}"
       srcset="#{src2x} 2x"/>

</ui:composition> 
```

可以这样使用：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:myTag="http://your.com/namespace-of-taglib">
  <myTag:src2x="image@2x.jpg"/>
</html> 
```

并将呈现：

```
<img src="image.jpg"
     srcset="image@2x.jpg 2x"/> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-18T06:57:05.167

If you are not frustrated by fear of using java-script then here is a good article [http://www.highrobotics.com/articles/web/ready-for-retina.aspx](http://www.highrobotics.com/articles/web/ready-for-retina.aspx). It has very simple solution.

And the [example in JSFiddle](http://jsfiddle.net/ULGkR/1/) is worth a thousand words.

Using:

```
<img onload="getImgSrc(this,'image_x1.png')" width="100" height="100" /> 
```

JS:

```
/* RETINA READY IMG SRC */
function getImgSrc(img, src) {
    var srcResult = src;
    // if high-res screen then change _x1 on _x2
    if (window.devicePixelRatio > 1 && 
        src.indexOf("_x1.")>=0) {
          srcResult = src.replace("_x1.", "_x2.");
    }
    img.onload = null; //protect from second rasing
    img.src = srcResult;    
}

$(document).ready(function(){
  // fire onload trigger on IMG tags that have empty SRC attribute
  var images = $('img:not([src=""])');
    images.each(function(i) {
        $(this).trigger('onload');            
    });
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-15T21:07:39.537

这个问题对于响应式站点尤其棘手，其中图像的宽度可能取决于浏览器的大小。此外，在处理多个编辑可能上传 1000 张图像的 CMS 时，让我要求人们上传特别压缩的图像似乎是不切实际的。

所以我写了一个考虑到这一点的脚本，它在页面底部触发并在调整大小完成时触发。每次都要考虑像素密度和图像占用的大小。

[http://caracaldigital.com/retina-handling-code/](http://caracaldigital.com/retina-handling-code/)*****

# c# - EntityQuery OrderBy 附加过滤。WCF 里亚

> ID：13744543
> 
> 赞同：0
> 
> 时间：2012-12-06T13:22:48.003
> 
> 标签：c#, .net, lambda, ria

我有这个代码来创建 entityQuery 来加载我的实体：

```
if (filterExpresion != null)
{
    riaQuery = riaQuery.Where(
        Expression.Lambda(
            filterExpresion,
            Expression.Parameter(typeof(TEntity), "item") // NOI18N
            ) as Expression<Func<TEntity, bool>>
        );
}

if (OrderBy != null)
{
    var orderByExpression = 
        Expression.Lambda<Func<TEntity, int>>(
            OrderBy, 
            Expression.Parameter(typeof(TEntity), "item")
        );

    riaQuery.OrderBy(orderByExpression);
} 
```

所以.. Where 子句已设置，我可以在 riaQuery 的查询属性中看到它，但我看不到任何 OrderBy 子句，并且我在此查询中没有 orderby-filtering。

```
riaQuery.IsComposable == true 
```

为什么 OrderBy 不适用于 Query？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:53:57.000

OrderBy*返回*结果`IOrderedQueryable`。改成：

```
riaQuery = riaQuery.OrderBy(orderByExpression); 
```

# emacs - 在 Emacs org-table-mode 中使用命名字段来确定具有 vsum 的范围，不可能吗？

> ID：13744544
> 
> 赞同：2
> 
> 时间：2012-12-06T13:22:49.030
> 
> 标签：emacs, org-mode, org-table

我一直在尝试通过添加命名字段来简化我拥有的半复杂表，没有问题，直到我使用 vsum 运算符。我将公式设置为 $M=vsum($3..@-4) 有效，但是我必须不断地从这些字段中添加和删除项目，这会更改列编号。这导致我必须在每次更新/更改后更改 vsum 范围的字段规范。因此，我尝试命名顶部字段和底部字段，并考虑将命名变量提供给 vsum，给我一个类似于以下的表：

```
| / | <>     | <>      |
|---+--------+---------|
|   | Title1 | Title 2 |
|---+--------+---------|
| _ |        | START   |
|   | name   | 1000    |
|   | name   | 3456    |
|   | name   | 123     |
| ^ |        | END     |
|---+--------+---------|
| _ |        | MT      |
| # | Total  | #ERROR  |
| # |        |         |
|---+--------+---------|
#+TBLFM: $MT=vsum($START..$END) 
```

这是上表的调试公式输出：公式Orig的替换历史：vsum($START..$END) $xyz-> vsum((1000)..(123)) @r$c-> vsum(( 1000)..(123)) $1-> vsum((1000)..(123)) -----------^ 错误：预期为 `)'

我尝试过将命名字段变量包含在括号中，以及其他几种方法，但到目前为止还无法使其正常工作。我希望我只是错过了一些东西并且是盲目的，但也许这是不可能的？

我也尝试过 sum-up 函数，但也没有成功。预先感谢您的协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:00:46.170

以下解决方案通过使用`@II`and`@III`来引用第二条和第三条线之间的所有条目来工作。

```
| / | <>     | <>      |
|---+--------+---------|
|   | Title1 | Title 2 |
|---+--------+---------|
|   | name   | 1000    |
|   | name   | 3456    |
|   | name   | 123     |
|---+--------+---------|
| _ |        | MT      |
| # | Total  | 4579    |
| # |        |         |
|---+--------+---------|
#+TBLFM: $MT=vsum(@II..@III) 
```

文档： http: [//orgmode.org/manual/References.html#References](http://orgmode.org/manual/References.html#References)

# php - 您可以使用 api 访问 Facebook 朋友的电子邮件地址吗

> ID：13744545
> 
> 赞同：-4
> 
> 时间：2012-12-06T13:22:49.453
> 
> 标签：php, facebook, api, permissions, facebook-php-sdk

你能得到你朋友的电子邮件地址吗？[权限](http://developers.facebook.com/docs/reference/login/user-friend-permissions/)说不是。我试试这个：

```
getLoginUrl(array('scope' => 'email')) 
```

这使我可以获取登录应用程序的用户的电子邮件。我想要他朋友的电子邮件。

例如，如何将 Facebook 导入 Yahoo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:02:06.740

这是不可能的，也不应该是这样。

# sql - 棘手的 SQL。合并行

> ID：13744548
> 
> 赞同：1
> 
> 时间：2012-12-06T13:23:00.323
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个（在我看来）棘手的 SQL 问题。

我有一张订阅表。每个订阅都有一个 ID 和一组随时间变化的属性。当属性值更改时，将使用订阅键和新值创建一个新行——但仅适用于更改后的属性。未更改的属性值留空。它看起来像这样（我省略了用于正确排序结果的 ValidTo 和 ValidFrom 日期）：

```
SubID  Att1  Att2   
 1      J
 1            L 
 1      B
 1            H
 1      A     H 
```

我需要转换此表，以便获得以下结果：

```
SubID  Att1  Att2   
 1      J     
 1      J     L
 1      B     L
 1      B     H
 1      A     H 
```

所以基本上; 如果属性为空，则取该属性的前一个值。任何解决方案都可以...... 我的意思是我必须做什么来获得结果并不重要：表格顶部的视图、用于创建新表格的 SSIS 包或第三个东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:36:03.047

假设（基于您提到 SSIS 的事实）您可以`OUTER APPLY`用来获取上一行：

```
DECLARE @T TABLE (SubID INT, Att1 CHAR(1), Att2 CHAR(2), ValidFrom DATETIME);
INSERT @T VALUES
    (1, 'J', '', '20121201'),
    (1, '', 'l', '20121202'),
    (1, 'B', '', '20121203'),
    (1, '', 'H', '20121204'),
    (1, 'A', 'H', '20121205');

SELECT  T.SubID,
        Att1 = COALESCE(NULLIF(T.att1, ''), prev.Att1, ''),
        Att2 = COALESCE(NULLIF(T.att2, ''), prev.Att2, '')
FROM    @T T
        OUTER APPLY
        (   SELECT  TOP 1 Att1, Att2
            FROM    @T prev
            WHERE   prev.SubID = T.SubID
            AND     prev.ValidFrom < t.ValidFrom
            ORDER BY ValidFrom DESC
        ) prev
ORDER BY T.ValidFrom; 
```

*（我必须为 ValidFrom 添加随机值以确保 order by 正确）*

**编辑**

如果您有多个具有空白值的连续行，则上述方法将不起作用 - 例如

```
DECLARE @T TABLE (SubID INT, Att1 CHAR(1), Att2 CHAR(2), ValidFrom DATETIME);
INSERT @T VALUES
    (1, 'J', '', '20121201'),
    (1, '', 'l', '20121202'),
    (1, 'B', '', '20121203'),
    (1, '', 'H', '20121204'),
    (1, '', 'J', '20121205'),
    (1, 'A', 'H', '20121206'); 
```

如果这可能发生，您将需要两个`OUTER APPLY`：

```
SELECT  T.SubID,
        Att1 = COALESCE(NULLIF(T.att1, ''), prevAtt1.Att1, ''),
        Att2 = COALESCE(NULLIF(T.att2, ''), prevAtt2.Att2, '')
FROM    @T T
        OUTER APPLY
        (   SELECT  TOP 1 Att1
            FROM    @T prev
            WHERE   prev.SubID = T.SubID
            AND     prev.ValidFrom < t.ValidFrom
            AND     COALESCE(prev.Att1 , '') != ''
            ORDER BY ValidFrom DESC
        ) prevAtt1
        OUTER APPLY
        (   SELECT  TOP 1 Att2
            FROM    @T prev
            WHERE   prev.SubID = T.SubID
            AND     prev.ValidFrom < t.ValidFrom
            AND     COALESCE(prev.Att2 , '') != ''
            ORDER BY ValidFrom DESC
        ) prevAtt2
ORDER BY T.ValidFrom; 
```

但是，由于每个 OUTER APPLY 只返回一个值，我会将其更改为相关子查询，因为上面将评估`PrevAtt1.Att1`每一行的“PrevAtt2.Att2”，无论是否需要。但是，如果您将其更改为：

```
SELECT  T.SubID,
        Att1 = COALESCE(
                    NULLIF(T.att1, ''), 
                    (   SELECT  TOP 1 Att1
                        FROM    @T prev
                        WHERE   prev.SubID = T.SubID
                        AND     prev.ValidFrom < t.ValidFrom
                        AND     COALESCE(prev.Att1 , '') != ''
                        ORDER BY ValidFrom DESC
                    ), ''),
        Att2 = COALESCE(
                    NULLIF(T.att2, ''), 
                    (   SELECT  TOP 1 Att2
                        FROM    @T prev
                        WHERE   prev.SubID = T.SubID
                        AND     prev.ValidFrom < t.ValidFrom
                        AND     COALESCE(prev.Att2 , '') != ''
                        ORDER BY ValidFrom DESC
                    ), '')
FROM    @T T
ORDER BY T.ValidFrom; 
```

子查询仅在需要时（即 Att1 或 Att2 为空白时）而不是对每一行进行评估。执行计划没有显示这一点，实际上后者的“实际执行计划”看起来更密集，几乎可以肯定不会。但与往常一样，关键是测试，在您的数据上运行并查看哪个性能最好，并检查读取的 IO 统计信息等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:15:27.790

这个适用于 oracle 11g

```
 select  SUBID
         ,NVL(ATT1,LAG(ATT1) over(order by ValidTo)) ATT1
         ,NVL(ATT2,lag(ATT2) over(order by ValidTo)) ATT2 
  from table_name 
```

我同意 Gordon Linoff 和 Jack Douglas 的观点。这段代码有限制，因为当插入多个带有空值的记录时......但下面的代码将处理这个......

```
select SUBID
      ,NVL(ATT1,LAG(ATT1 ignore nulls) over(order by VALIDTO)) ATT1
      ,NVL(ATT2,LAG(ATT2 ignore nulls) over(order by VALIDTO)) ATT2
from Table_name 
```

请参阅 sql fiddle [http://sqlfiddle.com/#!4/3b530/4](http://sqlfiddle.com/#!4/3b530/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:16:34.333

您可以使用相关子查询执行此操作：

```
select t.subid,
       (select t2.att1 from t t2 where t2.rowid <= t.rowid and t2.att1 is not null order by rowid desc limit 1) as att1,
       (select t2.att2 from t t2 where t2.rowid <= t.rowid and t2.att2 is not null order by rowid desc limit 1) as att1
from t 
```

这假定您有一个指定行顺序的 rowid 或等效项（例如创建的日期时间）。它还`limit`用于限制结果。在其他数据库中，这可能会使用`top`。（而 Oracle 使用了稍微复杂一点的表达式。）

我会用 ValidTo 来写这个。但是，因为有ValidTo和ValidFrom，实际的表达要复杂得多。我需要这个问题来澄清在其他时间使用这些值来估算值的规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:58:10.283

```
with Tricky1 as (
    Select SubID, Att1, Att2, row_number() over(order by ValidFrom) As rownum 
    From Tricky
)
select T1.SubID, T1.Att1, T2.Att2
from Tricky1 T1
cross join Tricky1 T2
where (ABS(T1.rownum-T2.rownum) = 1 or (T1.rownum = 1 and T2.rownum = 1))
and T1.Att1 is not null
; 
```

另外，当 SQL 没有先前值的概念时，请查看访问先前值，[here。](https://stackoverflow.com/questions/710212/there-is-a-way-to-access-the-previous-row-value-in-a-select-statement)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T14:46:13.167

我从未接触过 SQL Server，但我读到它支持分析功能，就像 Oracle 一样。

```
> select * from MYTABLE order by ValidFrom;

     SUBID A A VALIDFROM
---------- - - -------------------
         1 J   2012-12-06 15:14:51
         2 j   2012-12-06 15:15:20
         1   L 2012-12-06 15:15:31
         2   l 2012-12-06 15:15:39
         1 B   2012-12-06 15:15:48
         2 b   2012-12-06 15:15:55
         1   H 2012-12-06 15:16:03
         2   h 2012-12-06 15:16:09
         1 A H 2012-12-06 15:16:20
         2 a h 2012-12-06 15:16:29

select
  t.SubID
 ,last_value(t.Att1 ignore nulls)over(partition by t.SubID order by t.ValidFrom rows between unbounded preceding and current row) as Att1
 ,last_value(t.Att2 ignore nulls)over(partition by t.SubID order by t.ValidFrom rows between unbounded preceding and current row) as Att2
 ,t.ValidFrom
from MYTABLE t;

     SUBID A A VALIDFROM
---------- - - -------------------
         1 J   2012-12-06 15:45:33
         1 J L 2012-12-06 15:45:41
         1 B L 2012-12-06 15:45:49
         1 B H 2012-12-06 15:45:58
         1 A H 2012-12-06 15:46:06
         2 j   2012-12-06 15:45:38
         2 j l 2012-12-06 15:45:44
         2 b l 2012-12-06 15:45:53
         2 b h 2012-12-06 15:46:02
         2 a h 2012-12-06 15:46:09 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-28T13:46:25.687

我已经做了很长一段时间了。我找到了一种相当简单的方法。不是最好的解决方案，因为我知道必须有其他方法，但它就在这里。

在 2008R2 中，我也必须合并重复项。

因此，如果您可以尝试创建一个包含一组重复记录的表。

根据您的示例，创建一个“ATT1”为空白的表。然后在“SubId”上使用带有内部联接的更新查询来填充您需要的数据

# jsf - JSF2/RICHFACES4 如何验证 javax.faces.ViewState 值？

> ID：13744554
> 
> 赞同：0
> 
> 时间：2012-12-06T13:23:18.713
> 
> 标签：jsf, jsf-2, richfaces

是否有任何 API 用于验证从客户端发布的 javax.faces.ViewState 值是否为有效值？它可以是标准的 JSF2 或 Richfaces4 API。

# same-origin-policy - 在没有访问权限的情况下更改 Web 服务的接口

> ID：13744557
> 
> 赞同：0
> 
> 时间：2012-12-06T13:23:26.097
> 
> 标签：same-origin-policy

我有一个`website`，让我们称之为`search`，在我的一个浏览器页面中打开。`search`有一个表单，提交时会在我没有直接访问权限的数据库上运行查询。问题`search`在于界面相当糟糕（无法保存上述查询等）

我已经分析了发送到服务器的请求（使用代理），`search`并且我能够复制它。服务器甚至发回正确的结果，但浏览器无法打开它。（同源政策）。您对我如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:08:32.790

不可能绕过 javascript 中的相同来源策略（假设您想考虑到您的问题）。您需要设置一个代理服务器端来为您执行请求并返回 html。

在 PHP 中执行此操作的简单方法如下：

```
<?php
    echo file_get_contents("http://searchdomainname.com" . "?" . http_build_query($_GET, '', '&'));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:34:56.660

你的问题的答案是：你不能。至少在不使用 Walter 回答中建议的代理的情况下，这意味着您的网站访问者将不得不使用他们其他网站的凭据故意登录到您的网站（嗯听起来不太好......）

您无法执行此操作的原因与安全性有关，如果您可以在打开站点的选项卡旁边的选项卡上运行脚本（我猜您想要这样做），您将能够做到CSRF 攻击并获取您想要的任何数据并将其发送到 hack.com

当然，这是假设在流程的某个地方必须有一个登录，否则你没有理由不能创建一个简单的表单来发布所需的查询并获取信息。

如果您确实可以访问上述网站，您将能够使用 JSONP 支持跨域 xml。

# video - 使用 Gstreamer 服务 RTSP 流，寻求工作示例

> ID：13744560
> 
> 赞同：24
> 
> 时间：2012-12-06T13:23:41.900
> 
> 标签：video, streaming, gstreamer, rtsp, vlc

我们正在尝试让 Gstreamer 在 DM368 Leopardboard* 上运行，我们已成功说服它创建一个测试视频 (videotestsrc)，对其进行编码，并将其转储到一个文件中。

有效的管道是：

```
gst-launch -v videotestsrc num-buffers=100 ! queue ! ffenc_mpeg4 bitrate=800000 ! ffmux_mp4 ! filesink location=video_test.mp4 
```

下一步是修改管道以通过网络流式传输测试卡，以便在具有 VLC 的 PC 上使用**rtsp://ip_addr:port/streamname**之类的内容进行查看，但有关如何执行此操作的文档在地面上似乎很薄（并且经常过时），并且这些示例似乎模糊了源代码和命令行方式。

我会坦率地承认，> 50% 的问题是我们对 Gstreamer 及其各个部分缺乏熟悉，我一直发现，如果我有一个工作示例可以开始，我可以用棍子戳它，然后解决剩下的问题从那里。

我已经做到了这一点：

```
gst-launch -v videotestsrc ! queue ! ffenc_mpeg4 bitrate=800000 ! rtpmp4vpay ! tcpserversink host=<PC_ip> port=5000 
```

这似乎在 VLC 中发生了*一些事情（使用***tcp://board_ip:port**） - 它似乎认为发生了一些事情（不会引发错误）但没有播放/显示任何内容。当我中断 (^C) gst 进程时，VLC 会注意到。

所以，基本上 - 任何指导/反馈都会很棒，一个工作单线会很棒。

*编辑添加：*是的，我看到了 test_video.c 示例，但它正在编译一个特殊的程序来做一些看起来应该可以从命令行调用来证明这个概念的事情。

```
* = Linux version 2.6.32-17-ridgerun /CPU: ARM926EJ-S 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-10-25T09:37:12.953

[来源](https://github.com/tik0/mat2gstreamer/blob/master/gstreamer.md)：与 RTP 相矛盾的是，RTSP 服务器按需协商 RTP 服务器和客户端之间的连接（[链接](https://stackoverflow.com/questions/4303439/what-is-the-difference-between-rtp-or-rtsp-in-a-streaming-server)）。[gst-rtsp-server](https://gstreamer.freedesktop.org/data/events/gstreamer-conference/2013/GStreamer%20Conference%202013%20-%20Wim%20Taymans%20-%20Latest%20GStreamer%20RTSP%20Server%20features.pdf)不是 gstreamer 插件，而是一个可用于实现您自己的 RTSP 应用程序的库。以下测试用例应用在 Ubuntu 12.04.5 机器上：

*   预赛
    *   使用 base/good/ugly/bad 插件安装 gstreamer-1.0
    *   安装`autoconf automake autopoint libtool`和其他缺少的基本构建工具
*   构建 gst-rtsp-server
    *   `git clone git://anongit.freedesktop.org/gstreamer/gst-rtsp-server && cd gst-rtsp-server`
    *   我们使用 gstreamer 1.2：`git checkout remotes/origin/1.2`
    *   构建：（`./autogen.sh --noconfigure && GST_PLUGINS_GOOD_DIR=$(pkg-config --variable=pluginsdir gstreamer-plugins-bad-1.0) ./configure && make`由于某种原因，pkg-config 没有设置 GST_PLUGINS_GOOD_DIR，所以我们显式设置它）
*   测试运行
    *   运行测试应用程序：`cd examples && ./test-launch "( videotestsrc ! x264enc ! rtph264pay name=pay0 pt=96 )"`
    *   现在可以通过以下地址远程访问流（例如使用 VLC）：`rtsp://HOST_IP:8554/test`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T17:37:45.707

最后在这里找到了一个工作示例：

[GStreamer rtp 流到 vlc](https://stackoverflow.com/questions/13154983/gstreamer-rtp-stream-to-vlc)

但它确实需要为 VLC 创建一个 .SDP 文件并指定 IP 地址，这并不是我们真正想要的结果......但嘿，这是一个开始！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-20T11:50:38.510

我在流程结束时遇到了一个问题，例如：

*   配置：找不到包“gstreamer-1.0”
*   配置：错误：找不到 gstreamer-1.0 >= 1.2.3 (GStreamer)

我在这篇文章中找到了解决方案：

[https://askubuntu.com/questions/384059/error-compiling-a-package-configure-error-no-gstreamer-1-0-1-0-0](https://askubuntu.com/questions/384059/error-compiling-a-package-configure-error-no-gstreamer-1-0-1-0-0)

而且效果很好！！！

# mongodb - MongoDB 和 IP 子网

> ID：13744561
> 
> 赞同：0
> 
> 时间：2012-12-06T13:23:43.383
> 
> 标签：mongodb, pymongo

假设我们有一个这样的文档集合：

```
{'ip':'10.1.1.1','someattr':'aaa'}
{'ip':'120.14.15.16','someattr':'bbb'}
{'ip':'212.12.12.12','someattr':'ccc'} 
```

我想找到**ip**在某个 IP 子网中的所有文档。我使用 python 并且可以将子网转换为数组并运行类似的东西

```
coll.find( { 'ip': { '$in': [ '10.1.1.0', '10.1.1.1', '10.1.1.2' ] } } ) 
```

但它只对小子集看起来很正常，例如 netmask /20 将有 4094。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:37:47.467

您还可以为此使用二进制键并使用 $gt/$lt 范围进行查询。应该比正则表达式版本更有效。

伪代码：

```
db.mycol.find({_id: {$gte: BinData([255,255,0,0]), $lte: BinData([255,255,255,255])}}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:30:27.760

正则表达式会帮助你吗？mongodb 支持正则表达式：

蟒蛇代码：

```
regx = re.compile('10.*', re.IGNORECASE)
coll.find( { 'ip': regex } ) 
```

应该找到所有以“10”开头的 ip - 您应该能够将其转换为您所需的 ip 地址子网掩码。

# java - android设备ID混淆

> ID：13744565
> 
> 赞同：43
> 
> 时间：2012-12-06T13:23:56.537
> 
> 标签：java, android, device

如果我拨号 `*` `#` `*` `#` `8` `2` `5` `5` `#` `*` `#` `*` ，我会得到我的 android 设备 ID，它以`android-`**`35c2acdd...`**

![来源](../Images/cf7df30f551d1256896e3cbb797ad2f2.png) [来源](http://forum.xda-developers.com/showthread.php?t=1563894)

如果我使用`Settings.Secure.getString(getContentResolver(), Settings.Secure.ANDROID_ID)`结果以**`a96b4b27...`**

如果我使用`((TelephonyManager) Context.getSystemService(Context.TELEPHONY_SERVICE)).getDeviceId()`结果以**`3538330...`**

这些ID-s有什么区别？我怎样才能得到结果

`*` `#` `*` `#` `8` `2` `5` `5` `#` `*` `#` `*` 拨号？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-12-12T00:59:07.590

**IMEI**

IMEI 是电话模块的“ [MAC](http://en.wikipedia.org/wiki/Media_access_control) ”——电话通过 GSM/GPRS/HSPDA/等连接时使用的唯一 ID。GSM 网络使用它通过 GSM 网络将电话和数据路由到网关，进入 Internet（这是一个 IP 网络）。

电话模块是处理电话网络（GSM 或 CMDA）的芯片或电路板，并且通常具有用于可移动 SIM 卡的插槽。有些电话有多个电话模块（有源双 SIM 卡或多 SIM 卡电话）。每个电话模块都有自己的 IMEI。

制造商在制造过程中为每部电话（严格来说是电话模块）赋予了唯一的 IMEI。但是，如果您拥有正确的软件，通常可以重写该数字。这通常在手机被盗后进行，以便为手机提供新的身份并通过双向被盗电话阻止系统。

可以使用[TelephonyManager.getDeviceId()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getDeviceId()) API 以编程方式获取 IMEI。

**CDMA 手机具有**[不同长度和格式](http://infusio.wordpress.com/2007/06/22/what-are-esnimeimeid/)的 ESN 或 MEID ，即使使用相同的 API 检索它也是如此。

没有电话模块的 Android 设备（例如许多平板电脑和电视设备）*没有 IMEI*。正如[Schlangi](https://stackoverflow.com/users/1576300/schlangi)评论的那样，一些没有电话模块的设备会*伪造*IMEI，因此 IMEI 的存在并不（总是）保证设备具有电话模块。

**ANDROID_ID**

ANDROID_ID 是手机上的另一个唯一编号 - 这是由操作系统在首次启动时自动生成的（这样做可以使制造商从生产线中移除一个步骤，从而使制造商变得更加容易）*。*

ANDROID_ID 可以（并且确实）改变，例如：

*   恢复出厂设置（包括重新刷新操作系统时）
*   在软件中：例如[https://play.google.com/store/apps/details?id=com.vcastroi.changeid](https://play.google.com/store/apps/details?id=com.vcastroi.changeid)

它主要由开发人员使用（例如，使用 识别和连接设备`adb`）

鉴于上述警告，ANDROID_ID 可用于识别 Android 设备，实际上意味着它在设备生命周期的重要部分内唯一地识别设备，但不能依赖。

另请注意，在 Froyo 中存在一个错误，其中许多设备为自己提供了*相同*的ANDROID_ID。这是[错误](http://code.google.com/p/android/issues/detail?id=10603)

**其他标识符**

还有许多其他的东西可以用来识别设备：

*   WiFi模块的MAC地址：[WifiManager.getConnectionInfo()](http://developer.android.com/reference/android/net/wifi/WifiManager.html#getConnectionInfo()) -> [WifiInfo.getMacAddress()](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getMacAddress())。这通常可以在软件中更改，但*通常*在设备生命周期内保持不变。此外，只有打开 WiFi 模块才能读取。
*   蓝牙模块的 MAC 地址：[BluetoothAdaptor.getAddress()](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#getAddress())。与 WiFi MAC 一样，这通常可以在软件中进行更改，并且可能会在您需要时关闭
*   订户的电话号码。如果用户从电信公司请求一个新号码，或者如果用户更换 SIM，这可能会改变。它是从[TelephonyManager.getLine1Number()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getLine1Number())获得的。这仅适用于安装了当前 SIM 卡并通过电信公司提供付费服务的 Android 手机设备。
*   SIM 包含自己的识别号 ( [IMSI](https://en.wikipedia.org/wiki/International_Mobile_Subscriber_Identity) )。这是从[TelephonyManager.getSubscriberId()](https://developer.android.com/reference/android/telephony/TelephonyManager.html#getSubscriberId()) API 获得的。显然，SIM 卡可能在任何特定时间都不存在，并且它会随着 SIM 卡的更换而改变——用户可以在保持相同号码的同时升级/更换他们的 SIM 卡，所以你不能说这是一对一的特定的电话或用户。
*   与 IMSI 相关的是[MSISDN](http://en.wikipedia.org/wiki/MSISDN)。这用作*订阅*标识（您与移动提供商签订的特定电话号码合同），因此为设备提供了电话号码。MSISDN 可能与几张 SIM 卡相关联，因此与几部电话相关联。它附带了阅读上述 SIM 卡的所有注意事项。这可以通过[TelephonyManager.getSimSerialNumber()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSimSerialNumber())检索。感谢[Schlangi](https://stackoverflow.com/users/1576300/schlangi)的更正和补充
*   Gingerbread 和后来的[android.os.Build.SERIAL](http://developer.android.com/reference/android/os/Build.html#SERIAL)是许多制造商设置的（但不是全部。Bugger）。

**其他注意事项**

您需要特定权限才能访问每个 API，因此如果您尝试所有这些，您的应用在 Google Play 商店中的权限看起来相当宽松。

我认为此链接还解释了所有其他可用选项[https://android-developers.googleblog.com/2011/03/identifying-app-installations.html](https://android-developers.googleblog.com/2011/03/identifying-app-installations.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T11:59:23.167

在网上找到：

```
private static final Uri URI = Uri.parse("content://com.google.android.gsf.gservices");
private static final String ID_KEY = "android_id";

String getAndroidId(Context ctx) {
    String[] params = { ID_KEY };
    Cursor c = ctx.getContentResolver()
            .query(URI, null, null, params, null);

    if (!c.moveToFirst() || c.getColumnCount() < 2)
        return null;

    try {
        return Long.toHexString(Long.parseLong(c.getString(1)));
    } catch (NumberFormatException e) {
        return null;
    }
} 
```

添加权限：

```
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/> 
```

但是，我怀疑这是一个记录在案的 ID，我会小心，因为如果 GTalk 得到更新，这可能不起作用。

来源： http: [//blog.codepainters.com/2012/01/17/how-to-obtain-gtalk-android-id/](http://blog.codepainters.com/2012/01/17/how-to-obtain-gtalk-android-id/)

也值得一看：[http ://www.toxicbakery.com/android-development/getting-google-auth-sub-tokens-in-your-android-applications/](http://www.toxicbakery.com/android-development/getting-google-auth-sub-tokens-in-your-android-applications/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-18T09:06:39.440

有一些方法可以在 android 手机上获取唯一标识符。

1.  Android ID 它是一个 64 位十六进制字符串，在设备首次启动时生成。除非恢复出厂设置，否则一般不会更改。

    Secure.getString(getContentResolver(), Secure.ANDROID_ID);

Android ID 被认为是不可靠的，因为它有时可能为空。该文档指出它“可以在出厂重置时更改”。此字符串也可以在有根电话上更改。

```
 String m_szAndroidID = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

Returns: 9774d56d682e549c . No special permissions required. 
```

2\. WLAN MAC 地址字符串是另一个唯一标识符，可用作设备 ID。在阅读之前，您需要确保您的项目具有 android.permission.ACCESS_WIFI_STATE 权限，否则 WLAN MAC 地址将显示为空。

```
 WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);
 String m_szWLANMAC = wm.getConnectionInfo().getMacAddress();
Returns: 00:11:22:33:44:55 (not a real address since this is a custom ROM , as you can see the MAC address can easily be faked).
WLAN doesn't have to be on, to read this value. 
```

3\. 如果您的项目具有 android.permission.BLUETOOTH 权限，则可以在带有蓝牙的 Android 设备上读取 BT MAC 地址字符串。

```
 BluetoothAdapter m_BluetoothAdapter = null; // Local Bluetooth adapter
    m_BluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
   String m_szBTMAC = m_BluetoothAdapter.getAddress(); 
```

返回： 43:25:78:50:93:38 。不必打开 BT 即可阅读。4\. IMEI 仅适用于手机使用的 Android 设备：

```
 TelephonyManager TelephonyMgr = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
 String szImei = TelephonyMgr.getDeviceId(); // Requires READ_PHONE_STATE 
```

这需要在 AndroidManifest.xml 中添加一个权限，并且在安装您的软件时会通知用户：android.permission.READ_PHONE_STATE。IMEI 对您的手机来说是独一无二的，它看起来像这样：359881030314356（除非您的预生产设备具有无效的 IMEI，例如 0000000000000）。有关更多信息，[请参阅](http://www.pocketmagic.net/?p=1662)此链接。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T06:19:39.357

IMEI

*标准化机构有一项强制性要求，公共网络的移动设备可以由 IMEI 号唯一标识*

设置 IMEI 是制造商的责任。在实践中，开发人员有时会看到像 000000... 或 123456 这样的 IMEI... 有时具有相同 IMEI 的手机会投入生产，这当然是一个*应该*修复的错误...

ANDROID_ID

*在设备首次启动时随机生成的 64 位数字（作为十六进制字符串），在设备的整个生命周期内应保持不变。（如果在设备上执行恢复出厂设置，该值可能会发生变化。）*

看起来 Android 不信任制造商并提供了一个替代的唯一 ID。

编辑：

这是我在*不是*手机的 Android 设备上获得的（而不是 IMEI）：

```
$ adb shell dumpsys iphonesubinfo
Phone Subscriber Info:
  Phone Type = GSM
  Device ID = null 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T16:38:39.390

我认为上面提供的所有信息都足以理解代码。

但是我认为您仍然“无法看到##8255##拨号的结果*”*（*如果*我在理解这一点上出错了，请原谅）

我认为这背后的原因是针对 Android 中的 USSD 代码的最新错误修复之一。（您可以阅读有关此内容的更多信息并检查您的设备是否在列表中。它遍布整个网络）

最后，如果您只是想直接获得 android ID，我建议您使用这个应用程序-

[https://play.google.com/store/apps/details?id=com.redphx.deviceid&hl=en](https://play.google.com/store/apps/details?id=com.redphx.deviceid&hl=en)

# file - 使用 Windows 批处理脚本拆分文件

> ID：13744566
> 
> 赞同：6
> 
> 时间：2012-12-06T13:23:57.640
> 
> 标签：file, batch-file, split

我有一个 csv 文件，我需要将其拆分为 n 个文件，以便每个拆分文件不应超过 100 mb。我需要在 Windows 批处理脚本中实现它。我尝试了以下方式，但由于我的未拆分文件以 GB 为单位，因此需要花费大量时间

```
@echo off
setlocal enableextensions enabledelayedexpansion
set count=1
set maxbytesize=100000000
set size=1
type NUL > output_1.csv

FOR /F  "tokens=*" %%i in (myfile.csv) do (
FOR /F "usebackq" %%A in ('!filename!_!count!.csv') do (
set size=%%~zA) 
if !size! LSS !maxbytesize! (
echo %%i>>!filename!_!count!.csv) else (
set /a count+=1 
echo %%i>>!filename!_!count!.csv 
)) 
```

请让我知道是否有更好的方法来实现这一目标。因为我的服务器是 Windows，所以我不能使用任何其他脚本语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-28T12:07:39.913

假设您的线条大小大致相同，这将起到作用。

它的优点是它只有 2 遍解决方案，一个用于计算行数，另一个用于打印它们。

```
@rem echo off

@rem usage: batchsplit.bat <file-to-split> <size-limit>
@rem it will generate files named <file-to-split>.part_NNN

setlocal EnableDelayedExpansion

set FILE_TO_SPLIT=%1
set SIZE_LIMIT=%2

for /f %%s in ('dir /b %FILE_TO_SPLIT%') do set SIZE=%%~Zs
for /f %%c in ('type "%FILE_TO_SPLIT%"^|find "" /v /c') do set LINE_COUNT=%%c

set /a AVG_LINE_SIZE=%SIZE%/%LINE_COUNT%
set /a LINES_PER_PART=%SIZE_LIMIT%/%AVG_LINE_SIZE%

set "cmd=findstr /R /N "^^" %FILE_TO_SPLIT%"

for /f "tokens=1,2* delims=:" %%a in ('!cmd!') do @(
    set /a ccc = %%a / %LINES_PER_PART%
    echo %%b >> %FILE_TO_SPLIT%.part_!ccc!
) 
```

将其另存为`batchsplit.bat`并使用以下命令运行它：

```
batchsplit.bat myfile.csv 100000000 
```

# ios - 在我的应用中检测 Twitter 和 Facebook 通知

> ID：13744567
> 
> 赞同：0
> 
> 时间：2012-12-06T13:23:58.203
> 
> 标签：ios, facebook, twitter, sdk, notifications

我正在开发一个应用程序，我需要检测我的 iPhone 何时收到 Twitter 或 Facebook 的通知，然后对我的应用程序执行操作。

示例：我是硬件开发人员，想在收到通知时制作一个应用程序，让 LED 闪烁（独立于 iPhone）。需要知道是否可以从我的应用程序通知中检测到来自其他应用程序的通知，以及这样做的方法是什么，因为我有 ios 开发方面的知识。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:32:46.580

您无法检测到来自其他应用的通知，因为应用已被沙盒化。

您只能编写自己的服务器，在该服务器上检查 twitter 和 facebook 是否有新消息，然后通过新消息的推送通知（或您不想检查的任何其他内容）通知您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:04:19.013

您可以使用 Twitter Streams API 获取有关 Twitter 活动的通知。

使用这篇文章： [Twitter iOS Streaming API：没有收到数据](https://stackoverflow.com/questions/11621211/twitter-ios-streaming-api-no-data-being-received?lq=1)

# mysql - 在 PostgreSQL 中使用 SELECT 查询加入列

> ID：13744580
> 
> 赞同：2
> 
> 时间：2012-12-06T13:24:35.847
> 
> 标签：mysql, sql, postgresql

在这个 MySQL[查询](http://sqlfiddle.com/#!2/c2e5c/36)上需要 PostgreSQL 上的等效结果。

```
select id, 'ID1' from supportContacts 
```

想法是加入一个表名和行值等于 ID1 的列。

在 PostgreSQL 上执行相同的查询会给出所需的行值，但会给出 `?column? uknown`列名。

哪个 PostgreSQL 查询会给出准确的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:33:11.747

添加*列别名*以分配您选择的*名称*。否则系统将应用默认值。
要分配*类型*，请使用显式*强制转换*。我投到`text`这里：

```
SELECT id, 'ID1'::text AS "ID1" FROM supportContacts 
```

或者使用 SQL 标准[`cast()`](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS-GENERIC)使其可移植：

```
SELECT id, cast('ID1' AS varchar) AS "ID1" FROM "supportContacts" 
```

为了可移植性，请确保 MySQL 使用[`SET sql_mode = 'ANSI'`](http://dev.mysql.com/doc/refman/5.6/en/server-sql-mode.html#sqlmode_ansi).

此外，在 PostgreSQL 中，未加引号的 CaMeL 大小写名称如`supportContacts`转换为小写。使用`"supportContacts"`或`supportcontacts`取决于实际的表名。

首先阅读[这里](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)的优秀手册，了解有关标识符的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:35:49.127

[你可以在这里](http://sqlfiddle.com/#!1/f9ece/2)找到 SQL Fiddle 的答案

# git - 在 git 的上下文中，TREESAME 这个词是什么意思？

> ID：13744583
> 
> 赞同：15
> 
> 时间：2012-12-06T13:24:51.180
> 
> 标签：git

`TREESAME`我在 git log 手册中看到了很多引用。但我不知道这是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-26T00:05:18.753

给定两棵或多棵树，`TREESAME`当且仅当各个树之间的路径规范没有明显差异时，才考虑路径规范。

更直观地，人们可以认为树之间的`TREESAME`含义*相同*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:28:42.977

正如您提到的同一[git-log 手册中所定义的那样：](http://git-scm.com/docs/git-log)

> 假设您将 foo 指定为`<paths>`. 我们将调用修改 foo !TREESAME 的提交，其余的为 TREESAME。（在为 foo 过滤的差异中，它们分别看起来不同且相等。）

# android - AsyncTask 中 onPreExecute 和 doInBackground 之间的巨大延迟

> ID：13744587
> 
> 赞同：6
> 
> 时间：2012-12-06T13:24:57.100
> 
> 标签：android, multithreading, android-asynctask

我有一个 AsynkTask：

```
new AsyncTask<Void, Void, Void>() {

            private ProgressDialog mProgressDialog;

            @Override
            protected void onPreExecute() {
                Log.i(TAG, "Pre execute: " + System.currentTimeMillis());
                super.onPreExecute();

                mProgressDialog = ProgressDialog.show(NewWeatherActivity.this, null,
                        getResources().getString(R.string.weather_is_updating));
                mProgressDialog.setCancelable(false);

                Log.i(TAG, "Pre executed: " + System.currentTimeMillis());
            }

            @Override
            protected Void doInBackground(Void... voids) {
                Log.i(TAG, "Do in background: " + System.currentTimeMillis());
                // Some actions
                Log.i(TAG, "Done in background: " + System.currentTimeMillis());
                return null;
            }

            @Override
            protected void onPostExecute(Void aVoid) {
                Log.i(TAG, "Post execute: " + System.currentTimeMillis());
                super.onPostExecute(aVoid);

                mProgressDialog.dismiss();
                Log.i(TAG, "Post executed: " + System.currentTimeMillis());
            }
        }.execute(); 
```

日志：

> I/TVLauncher/NewWeatherActivity(21691)：预执行：1354798705667 I/TVLauncher/NewWeatherActivity(21691)：预执行：1354798705713 I/TVLauncher/NewWeatherActivity(21691)：在后台执行：1354798724063 I/TVLauncher/NewWeatherActivity(2166)在后台：1354798724083 I/TVLauncher/NewWeatherActivity(21691)：执行后：1354798724083 I/TVLauncher/NewWeatherActivity(21691)：执行后：1354798725046

因此，onPreExecute 和 doInBackground 之间的延迟大约为 19 秒。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-05T16:28:48.673

您可能正在调用也使用异步任务的框架或某些库。这将在更高版本的 Android 上表现出放缓。

AsyncTasks 现在按顺序运行。这意味着新的异步任务在最后一个任务完成之前不会运行。而不是调用执行尝试调用 `executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, "");`

这可能会将延迟降低到可以忽略不计的水平。

# xml - ColdFusion：无效的 XML 控制字符（十六进制）

> ID：13744603
> 
> 赞同：4
> 
> 时间：2012-12-06T13:25:58.247
> 
> 标签：xml, coldfusion, char, hex

我正在尝试使用创建一个 xml 对象`<cfxml>`。我用`XMLFormat()`. 在 XML 中有一些无效字符，例如 '»'。我将此字符添加到 xml 文档类型中，如下所示：

```
<!ENTITY raquo "»"> 
```

HTML 文本的格式不是很好，但大部分都适用于我的代码。但在某些文本中有一些控制字符。我收到以下错误：

在文档的元素内容中发现了无效的 XML 字符 (Unicode: 0x13)。

我尝试将 unicode 添加到 doctype 并尝试了此[解决方案](http://thenitai.com/2010/11/11/coldfusion-and-invalid-xml-character/)。两个都没用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T14:03:36.253

这是清理 XML 的有效 cfscript 代码，有两种方法，一种清除较高的国际字符，另一种仅清除破坏 XML 的较低 ASCII 字符，如果发现更多字符，只需扩展过滤规则。

```
<cfscript>    
    function cleanHighAscii(text){
        var buffer = createObject("java", "java.lang.StringBuffer").init();
        var pattern = createObject("java", "java.util.regex.Pattern").compile(javaCast( "string", "[^\x00-\x7F]" ));
        var matcher = pattern.Matcher(javaCast( "string", text));

        while(matcher.find()){
            var value = matcher.group();
            var asciiValue = asc(value);

            if ((asciiValue == 8220) OR (asciiValue == 8221))
                value = """";
            else if ((asciiValue == 8216) || (asciiValue == 8217))
                value = "'";
            else if (asciiValue == 8230)
                value = "...";
            else
                value = "&###asciiValue#;";

            matcher.AppendReplacement(buffer, javaCast( "string", value ));
        }

        matcher.AppendTail(buffer);
        return buffer.ToString();
    }

    function removeSubAscii(text){

        return rereplaceNoCase(text, "\x1A","&###26#;", "all");
    }

    function XMLSafe(text){
        text = cleanHighAscii(text);
        text = removeSubAscii(text);
        return text;
    }
</cfscript> 
```

其他可能性是用户 CF10 函数 encodeForXML()：

[https://learn.adobe.com/wiki/display/coldfusionen/EncodeForXML](https://learn.adobe.com/wiki/display/coldfusionen/EncodeForXML)

或者直接使用 CF10 附带的 ESAPI，或者从 OWASP 站点[https://www.owasp.org/index.php/ESAPI_Overview](https://www.owasp.org/index.php/ESAPI_Overview)将 ESAPI jar 添加到您的旧 CF ：

```
var esapi = createObject("java", "org.owasp.esapi.ESAPI");
var esapiEncoder = esapi.encoder();
return esapiEncoder.encodeForXML(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:50:29.730

Try using `&#187;` instead of `»`. For example, this CFML:

```
<cfxml variable="x"><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE doc
[
    <!ENTITY raquo "&#187;">
]>
<doc>
    Hello, &raquo; !
</doc>
</cfxml>

<cfdump var="#x#"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-21T08:33:34.260

Pass your XML string through this method, and this will solve your problem.

It allows only valid characters to be sent in the input, if you want to replace invalids with some other character, you can modify the below method to do that

```
public String stripNonValidXMLCharacters(String in) {
    StringBuffer out = new StringBuffer(); // Used to hold the output.
    char current; // Used to reference the current character.

    if (in == null || ("".equals(in))) return ""; // vacancy test.
    for (int i = 0; i < in.length(); i++) {
        current = in.charAt(i);
        if ((current == 0x9) ||
            (current == 0xA) ||
            (current == 0xD) ||
            ((current >= 0x20) && (current <= 0xD7FF)) ||
            ((current >= 0xE000) && (current <= 0xFFFD)) ||
            ((current >= 0x10000) && (current <= 0x10FFFF)))
            out.append(current);
    }
    return out.toString();
} 
```

# c - 显示功能问题

> ID：13744605
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:26:09.043
> 
> 标签：c, linked-list

我的一个链接列表显示功能有问题。功能如下。

我只是在其中一个 switch 语句中调用该函数。但是什么都没有显示。请帮我弄清楚我哪里出错了。

代码：

```
void display ()
{
    data *cur_point;

    cur_point = head;       

    if(cur_point = NULL)
    {
        printf("The list is empty");
    }
    else
    {   
        while(cur_point != NULL)
        {
            printf("Name : %s \n Contact Number : %d \n",cur_point->name,cur_point->telno);
            cur_point = cur_point -> nextp;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:34:35.457

如果你看到这样的东西，它应该立即引发恐慌：

```
if(cur_point = NULL) 
```

`=`分配，`==`会检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:35:01.947

改变这个：

```
if(cur_point = NULL) 
```

到：

```
if(cur_point == NULL) 
```

瞧！:)（澄清：您在代码中将 cur_point 设置为`NULL`，而不是检查它是否是`NULL`）

# entity-framework - 在 EF-CF 中是否可以获取一次然后保存在内存中？

> ID：13744612
> 
> 赞同：2
> 
> 时间：2012-12-06T13:26:42.180
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我有一个属性`LeadTypeID`，如果为 null，我希望 EF 获取，然后在内存中保存应用程序的生命周期。有没有内置的方法可以做到这一点，或者有人有建议？谢谢

```
Public Class Lead
    Public Property LeadID As Integer
    Public Property Name As String
    Public Property LeadTypeID As Integer
    Public Overridable Property LeadType As LeadType
End Class

Public Class LeadType
    Public Property LeadTypeID As Integer
    Public Property Name As String
    Public Property LastUpdated As Date
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:58:42.973

没有内置方式（尽管您的 Lead 实体将在上下文的整个生命周期内保留在本地图中，但在应用程序的生命周期内保留上下文并不是一个好主意）。

我个人使用依赖注入和一个小缓存对象来解决这个问题。以下是我如何缓存整个表（使用直写缓存）的示例，缓存单个整数更简单，在构造函数中注入/创建上下文，将值设置为公共属性，并将其绑定到单例中范围。

缓存对象： [https ://github.com/lukemcgregor/StaticVoid.Blog/blob/master/Blog/Data/Entities/Blog/CachedBlogRepository.cs](https://github.com/lukemcgregor/StaticVoid.Blog/blob/master/Blog/Data/Entities/Blog/CachedBlogRepository.cs)

绑定： [https ://github.com/lukemcgregor/StaticVoid.Blog/blob/master/Blog/Data/PersistanceModule.cs](https://github.com/lukemcgregor/StaticVoid.Blog/blob/master/Blog/Data/PersistanceModule.cs)

# c++ - 错误：“void*”不是指向对象的指针类型

> ID：13744617
> 
> 赞同：2
> 
> 时间：2012-12-06T13:27:14.383
> 
> 标签：c++, object, pointers, dynamic, shared-libraries

我正在尝试从动态库访问函数，该函数实例化 Person 的实例，并将指向它的指针作为 void 指针返回。然后程序必须使用 reinterpret_cast 将 void 指针转换为 Person。但是，我收到一个错误：**错误：'void*' 不是指向对象的指针类型。**

这是代码：

库中的函数：

```
void* loadPerson (void) {
    return reinterpret_cast<void*>(new Person);
} 
```

主.cpp：

```
void* loadPerson = dlsym(lib_handle, "loadPerson");
void* person_vp = (*loadPerson)();
Person* person = reinterpret_cast<Person*>(person_vp);

if (dlerror() != NULL) 
   cout<<"Library init error."<<endl;  
else {
   //... 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:33:02.713

有问题的行是：

```
void* person_vp = (*loadPerson)(); 
```

你正在取消引用一个`void*`. 你需要这个：

```
void* person_vp = (*reinterpret_cast<void* (*)()>(loadPerson))(); 
```

**编辑：**

为了更好的可读性，可以像这样拆分演员表：

```
typedef void* VoidFunc();
VoidFunc* loadPerson_func = reinterpret_cast<VoidFunc*>(loadPerson);
void* person_vp = (*loadPerson_func)(); 
```

# regex - 在 nginx 上使用正则表达式重写测试中的变量

> ID：13744619
> 
> 赞同：4
> 
> 时间：2012-12-06T13:27:23.713
> 
> 标签：regex, nginx, rewrite

我有一个在 nginx 上运行的 Wordpress 多站点网络。我正在尝试使用 w3 总缓存设置缓存。我在那里有 99%，但我只是坚持一个规则。

我找到[了一些说明](http://elivz.com/blog/single/wordpress_with_w3tc_on_nginx/)，这些说明指向了这个重写规则，以用漂亮的 URL 重写缩小的 css 和 js 文件：

```
# Rewrite minified CSS and JS files
location ~* \.(css|js) {
    if (!-f $request_filename) {
        rewrite ^/wp-content/w3tc/min/(.+\.(css|js))$ /wp-content/w3tc/min/index.php?file=$1 last;
    }
} 
```

我像这样修改它以在我的多站点环境中工作：

```
rewrite ^/wp-content/w3tc-$host/min/(.+\.(css|js))$ /wp-content/w3tc-$host/min/index.php?file=$1 last; 
```

但是我发现测试并没有解释`$host`变量，而是实际测试了 string `"$host"`。有没有办法`$host`在测试中实际使用变量的值？或者，使用一般规则是否是个好主意，例如：

```
rewrite ^/wp-content/w3tc-.*?/min/(.+\.(css|js))$ /wp-content/w3tc-$host/min/index.php?file=$1 last; 
```

我愿意接受更好的建议 - 正则表达式对我来说不是一个强项。

最后，对于任何寻找替代答案的人：只需在缩小设置中禁用*“重写 URL 结构”即可使缩小工作。*这纯粹是为了缩小文件的漂亮 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-03T22:25:08.897

变量插值在重写正则表达式中不可用。我会使用类似的东西：

```
rewrite ^/wp-content/w3tc-(.*?)/min/(.+\.(css|js))$ /wp-content/w3tc-$1/min/index.php?file=$2 last; 
```

# python - 在 NumPy 中用（行、列、值）三元组创建一个矩阵

> ID：13744620
> 
> 赞同：2
> 
> 时间：2012-12-06T13:27:23.880
> 
> 标签：python, numpy, matrix, sparse-matrix

1.  在 Numpy 中将（行、列、值）三元组数组转换为矩阵的最简单方法是什么？
2.  如果我有任意数量的索引怎么办？
3.  另外，将矩阵转换回（行、列、值）三元组的最简单方法是什么？

以下适用于3，但感觉很迂回

```
In [1]: M = np.arange(9).reshape((3,3))

In [2]: M
Out[2]: 
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])

In [3]: (rows, cols) = np.where(M)

In [4]: vals = M[rows, cols]

In [5]: zip(rows, cols, vals)
Out[5]: 
[(0, 1, 1),
 (0, 2, 2),
 (1, 0, 3),
 (1, 1, 4),
 (1, 2, 5),
 (2, 0, 6),
 (2, 1, 7),
 (2, 2, 8)] 
```

以下适用于 1，但需要 scipy.sparse

```
In [6]: import scipy.sparse as sp

In [7]: sp.coo_matrix((vals, (rows, cols))).todense()
Out[7]: 
matrix([[0, 1, 2],
        [3, 4, 5],
        [6, 7, 8]]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:31:43.410

像这样：

```
a=empty([max(rows)+1, max(cols)+1])
a[rows,cols] = vals
array([[  3.71697611e-307,   1.00000000e+000,   2.00000000e+000],
    [  3.00000000e+000,   4.00000000e+000,   5.00000000e+000],
    [  6.00000000e+000,   7.00000000e+000,   8.00000000e+000]]) 
```

请注意，您的列表中没有 (0,0) 的值，因此是奇怪的值。应该适用于任意数量的值。取回索引：

```
unravel_index(range(9), a.shape)
(array([0, 0, 0, 1, 1, 1, 2, 2, 2]), array([0, 1, 2, 0, 1, 2, 0, 1, 2])) 
```

# python - 具有多个选择选项的处理表单

> ID：13744623
> 
> 赞同：1
> 
> 时间：2012-12-06T13:27:38.333
> 
> 标签：python, cgi

我有一个 cgi 脚本，其中包含一个选择框，最终用户可以在其中提交多个选项或只提交一个选项。这个选择标签被命名为“参数”。看这里的例子....

[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_select_multiple](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_select_multiple)

当提交此表单并选择多个选项时，URL 看起来像这样......

http........mycgiscript.py?parameters=option1value¶meters=option2values

或者如果用户只选择了一个选项，它看起来像这样......

http........mycgiscript.py?parameters=option3value

我的表格被声明为...

```
import cgi
form = cgi.FieldStorage() 
```

所以当用户选择多个选项并提交表单时，form['parameters'] 的数据类型是一个列表，而当用户只选择一个选项并提交时，form['parameters'] 的数据类型是一个实例...

**多个选项（作为列表返回）：**

```
[MiniFieldStorage('parameters', 'option1value'), MiniFieldStorage('parameters', 'option2value')] 
```

**单一选项（作为实例返回）：**

```
MiniFieldStorage('parameters', 'option3value') 
```

我的问题是……

由于 form['parameters'] 可以是列表或实例，具体取决于用户提交的内容；处理这两种数据类型的最佳方法是什么？我想要的输出是一个列表变量，其中包含在表单上选择的 optionsXvalues。到目前为止，我能做的最好的就是这个......

```
if type(form['parameters']) == type([]):
    l = [ x.value for x in form['parameters'] ]
else:
    l = [form['parameters'].value] 
```

我这样做是因为当用户选择多个选项时，简单地使用 form['parameters'].value 会产生以下异常。

```
AttributeError: 'list' object has no attribute 'value' 
```

那么有没有比我上面基于 if/else 语句的建议更好的方法？我希望你们中的一些 python 大师能够提出一个更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T20:40:05.973

你可以做的是使用：

form.getlist('参数')

这提供了具有相同名称的所有不同输入类型的值，即参数。

这是我在 20.2.2 中从[http://docs.python.org/2/library/cgi.html](http://docs.python.org/2/library/cgi.html)收集的内容，他们建议当您期望可能有多个具有相同名称字段的项目时就是这种情况。

希望这会有所帮助，尽管我认为您自己已经找到了。

# silverlight - Windows 8 上的 Silverlight

> ID：13744625
> 
> 赞同：0
> 
> 时间：2012-12-06T13:27:47.610
> 
> 标签：silverlight, windows-8

我在 Windows 8 上运行我的 SL5 应用程序（到目前为止运行良好），但运行不顺利。我有一张通常无法正确渲染的背景图片，几乎每次我浏览我的背景（包括对它的控件）都会变白，直到我调整 IE 的大小，然后它重新绘制（奇怪的是那些变白的部分位于导航框架之外，为什么要重新绘制）。（Chrome 渲染良好）

当我在浏览器外运行我的应用程序时，我的登录屏幕会弹出并正常工作，但在登录屏幕关闭后，登录屏幕的灰色背景似乎仍然存在，我无法点击任何内容，调整大小没有区别，看起来就像每个控件都被禁用一样。

我已将我的 NVidia 驱动程序更新到最新版本，但不要认为它是显示驱动程序问题。

其他人有这些问题吗？还有其他人在 Windows 8 上运行 SL5 吗？（看起来我很快就会降级回 Windows 7）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:49:58.147

Silverlight 应该在 Windows 8 中的任何桌面浏览器上运行良好，就像在 Windows 7、Vista 和 Mac 上一样。底层运行时是 100% 相同的。这并不意味着您可能找不到图形驱动程序的故障，但这意味着您不应该——而且很可能不会。

然而，我确实想澄清一点，Silverlight 不是现代 Internet Explorer（Metro Internet Explorer）的一部分。仅支持 Flash 的一个子集，并且仅在白名单站点上受支持。

这意味着您可能期望在 Surface RT（运行 Windows RT 或 Windows on Arm）上运行的 Silverlight 解决方案将不会运行（因为没有 SL 运行时）。而且，我认为我们都可以集体抱怨并一起问：“为什么不呢？” 对此没有可接受的答案。

当然，理论上的目标是编写本机 Windows 8 应用程序。如果你想写一些基于 Web 的东西，你应该用 HTML5 来写。这是官方的说法。我想我们都知道 HTML5 要赶上 Silverlight 有很长的路要走，但事实就是如此。不能改变一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:48:12.897

我在 Windows 8 上运行的任何 Silverlight 5 应用程序都没有问题 - 我主要关注业务线应用程序，但也有一些图形应用程序和其他运行良好的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:49:06.110

我只是将此标记为结束此案的答案，我们永远不会知道的问题的实际答案是什么。解决方案：自动更新。在经历了很多麻烦之后，我的机器现在运行良好。

# java - 如何识别给定文件或字符串是否为 Java 属性文件格式？

> ID：13744627
> 
> 赞同：1
> 
> 时间：2012-12-06T13:27:47.373
> 
> 标签：java, parsing, properties

如何识别给定内容（文件`String`或`InputStream`）是否为**Java 属性**文件格式？

`Properties` **内容存储在数据库中，如果**是属性文件，则应解析为。但是，通过我注意到的一个简单测试，它可以`java.util.Properties`正确解析**xml**文件`</log4j`）。它也可以“解析”一个普通的文本文件。

所以，如果它`java.util.Properties`几乎可以解析所有什么是文本，我如何识别我是否有属性文件？我需要检查这是否是任何其他可识别的格式，我可以使用一些启发式方法还是存在具有此类功能的现有库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:48:36.543

我会将流（文件或字符串）读入 BufferedReader。然后，我会检查 xml 文件形式的属性：

取自 javadoc：

```
The XML document must have the following DOCTYPE declaration:
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"> 
```

因此，您可以检查 DOCTYPE（使用阅读器并通过第一行或 - 通过使用 xml 解析器进行解析，例如 jdom）。如果 DOCTYPE 存在，请使用：

```
Properties.loadFromXML() 
```

否则，您可以查找与模式匹配的行 \s*\w+\s*=.* 这样您就会知道在那里进行了一些分配，因此它可以是您加载的属性文件：

```
Properties.load() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:10:53.293

我会这样做

```
private boolean isProperties(Scanner sc) {
    Pattern p = Pattern.compile("\\w.*[=:] *.+");
    int nProps = 0;
    while (sc.hasNextLine()) {
        String line = sc.nextLine();
        if (!line.startsWith("#")) {
            if (!p.matcher(line).matches()) {
                sc.close();
                return false;
            }
            nProps++;
        }
    }
    sc.close();
    return nProps > 0;
}

public boolean isProperties(String s) {
    return isProperties(new Scanner(s));
}

public boolean isProperties(File f) throws FileNotFoundException {
    return isProperties(new Scanner(f));
}

     ... more overloaded isProperties for different sources 
```

这只是一个原型，正则表达式可能需要改进，请参阅 Properties.load API。我会忽略 xml 版本，但如果需要，它会更简单，因为 API 中有 DTD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:32:29.140

您可以将 propertyNames() 方法发送到生成的属性对象，如果您返回一个或多个名称（您返回一个 Enumeration - 使用 hasMoreElements() 方法作为您的测试），那么您可以假设它是一个有效的属性文件。

# python - Python：找到一种计算多边形“内质心”（X，Y）的方法

> ID：13744636
> 
> 赞同：4
> 
> 时间：2012-12-06T13:28:12.040
> 
> 标签：python, geolocation, geometry, shapefile

我有一个多边形（在[Shapely](http://toblerity.github.com/shapely/manual.html)对象中转换）。我的目标是按照图形示例计算“内部质心”（也称为“表面上的点”）（返回 x,y 值）和“质心”（返回 x,y 值）：

![在此处输入图像描述](../Images/f46804043e420c1743fdca4b927953b7.png)

```
from shapely.geometry import Polygon

ref_polygon = Polygon(points)
# get the x and y coordinate of the centroid
ref_polygon.centroid.wkt
'POINT (558768.9293489187300000 6361851.0362532493000000)' 
```

我的问题是一些程序员已经在 Python 中开发了一个函数来计算内部质心或知道一些模块来做到这一点。

提前致谢

使用的点（多边形的顶点）是：

```
points = [(560036.4495758876, 6362071.890493258),
          (560036.4495758876, 6362070.890493258),
          (560036.9495758876, 6362070.890493258),
          (560036.9495758876, 6362070.390493258),
          (560037.4495758876, 6362070.390493258),
          (560037.4495758876, 6362064.890493258),
          (560036.4495758876, 6362064.890493258),
          (560036.4495758876, 6362063.390493258),
          (560035.4495758876, 6362063.390493258),
          (560035.4495758876, 6362062.390493258),
          (560034.9495758876, 6362062.390493258),
          (560034.9495758876, 6362061.390493258),
          (560032.9495758876, 6362061.390493258),
          (560032.9495758876, 6362061.890493258),
          (560030.4495758876, 6362061.890493258),
          (560030.4495758876, 6362061.390493258),
          (560029.9495758876, 6362061.390493258),
          (560029.9495758876, 6362060.390493258),
          (560029.4495758876, 6362060.390493258),
          (560029.4495758876, 6362059.890493258),
          (560028.9495758876, 6362059.890493258),
          (560028.9495758876, 6362059.390493258),
          (560028.4495758876, 6362059.390493258),
          (560028.4495758876, 6362058.890493258),
          (560027.4495758876, 6362058.890493258),
          (560027.4495758876, 6362058.390493258),
          (560026.9495758876, 6362058.390493258),
          (560026.9495758876, 6362057.890493258),
          (560025.4495758876, 6362057.890493258),
          (560025.4495758876, 6362057.390493258),
          (560023.4495758876, 6362057.390493258),
          (560023.4495758876, 6362060.390493258),
          (560023.9495758876, 6362060.390493258),
          (560023.9495758876, 6362061.890493258),
          (560024.4495758876, 6362061.890493258),
          (560024.4495758876, 6362063.390493258),
          (560024.9495758876, 6362063.390493258),
          (560024.9495758876, 6362064.390493258),
          (560025.4495758876, 6362064.390493258),
          (560025.4495758876, 6362065.390493258),
          (560025.9495758876, 6362065.390493258),
          (560025.9495758876, 6362065.890493258),
          (560026.4495758876, 6362065.890493258),
          (560026.4495758876, 6362066.890493258),
          (560026.9495758876, 6362066.890493258),
          (560026.9495758876, 6362068.390493258),
          (560027.4495758876, 6362068.390493258),
          (560027.4495758876, 6362068.890493258),
          (560027.9495758876, 6362068.890493258),
          (560027.9495758876, 6362069.390493258),
          (560028.4495758876, 6362069.390493258),
          (560028.4495758876, 6362069.890493258),
          (560033.4495758876, 6362069.890493258),
          (560033.4495758876, 6362070.390493258),
          (560033.9495758876, 6362070.390493258),
          (560033.9495758876, 6362070.890493258),
          (560034.4495758876, 6362070.890493258),
          (560034.4495758876, 6362071.390493258),
          (560034.9495758876, 6362071.390493258),
          (560034.9495758876, 6362071.890493258),
          (560036.4495758876, 6362071.890493258)] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T14:20:38.037

术语“内质心”在计算几何中不是一个定义明确的术语，但从您的帖子中可以清楚地看出您想要计算一个位于多边形内部的点（在它和附近边缘之间有一些边距），并且这相当接近真实的质心。

以下是您可以尝试的几个想法：

### 算法 A

1.  生成多边形的所有内部对角线。

2.  对于每个内部对角线，考虑中点，并根据它与最近边缘的距离以及与质心的接近程度为其打分。

3.  选择得分最高的中点。

多边形的*内部对角线*是连接两个完全位于多边形内的不相邻顶点的线。[由于 Hershberger](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.7278&rep=rep1&type=pdf)的缘故，可以使用相当复杂的算法在 O( *m* + *n* log log *n ) 中生成具有**n 个*顶点的多边形的*m*个内部对角线集，或者使用更直接的算法在 O( *n2* ^()中生成。)

 ***### 算法 B

1.  对多边形进行三角剖分。

2.  对于三角剖分中的每个三角形，考虑三角形的质心（或者可能是[内心](http://en.wikipedia.org/wiki/Incircle_and_excircles_of_a_triangle)？），并根据它与最近边的距离以及与多边形质心的接近程度为其打分。

3.  选择得分最高的三角形中心。

具有*n*个顶点的简单多边形可以使用基于[Chazelle分解为单调多边形的算法在 O(](http://www.cs.princeton.edu/~chazelle/pubs/polygon-triang.pdf) *n* ^)中进行三角剖分，或者使用“[剪耳](http://en.wikipedia.org/wiki/Polygon_triangulation#Ear_clipping_method)”等更简单的方法在 O( *n2* ) 中进行三角剖分。***

# c# - 在 Thread、ThreadPool、RegisterAsyncTask 中使用 SpSite？

> ID：13744639
> 
> 赞同：0
> 
> 时间：2012-12-06T13:28:19.557
> 
> 标签：c#, multithreading, sharepoint, threadpool, spsite

我有几个关于在 Sharepoint 中开发多线程 webpart 的问题。首先，让我解释一下这个想法。我有一个包含 5-7 个不同 Web 部件的页面。这些 webpart 都是以相同的方式构建的，这意味着：

a) 从一些 SPLists 中检索一些数据

b) 将该数据转换为 xml

c) 执行xslt转换生成html

d) 在 RenderContents 方法中输出 html 内容
这个过程对于单个 webpart 大约需要 500ms。

现在我的想法是使用线程进行一些性能调整。前面描述的所有过程都可以在最好的情况下在执行管道的早期方法（例如 OnLoad）中或在最坏的情况下在 OnPreRender 方法中由线程执行。在 RenderContents 方法中，我可以在最坏的情况下等待线程完成（当然在这里我会实现一些超时逻辑）。

Q1) 使用这种技术应该可以提高页面的性能，对吗？

我的假设：我在页面上有 5 个 webpart，一个 webpart 需要 500 毫秒

之前：执行时间为 5*500ms = 2500ms。

之后： Max(wp1, wp2, wp3, wp4, wp5) 在我的例子中是 500ms。

现在，我的第一个问题：Q2）我是对的吗？如果不是，为什么？

现在让我们更详细地谈谈实现。我应该使用哪种技术？

1.  创建一个新线程，然后调用 Thread.join()
2.  使用线程池
3.  或者在 OnPreRender 中调用 Page.RegisterAsyncTask

在这一点上，我还有一些其他问题：

Q3) 因为，我使用的是 SPSite，并且我读到这个对象是基于 COM 的，我可以使用 ThreadPool 或 Page.RegisterAsyncTask 吗？在一些博客中，我读到 ThreadPool 不支持 COM 对象，因为是公寓模式（MTA 与 STA）。此外，我认为 Page.RegisterAsyncTask 也在使用 ThreadPool。

Q4) 你会建议我哪种实施/架构？

Q5) 如果我要在 OnPreRender 方法中使用 Page.RegisterAsyncTask，我是否确定在方法中 RenderContents 仅在所有任务完成时才被调用？

我尝试使用 Threads 实现，但它似乎不起作用。一旦我尝试访问 SpSite，我就会收到以下异常：

> 在 Microsoft.SharePoint.SPGlobal.HandleComException(COMException comEx) 在 Microsoft.SharePoint.Library.SPRequest.GetTokenOfCurrentUser(Boolean bWindowsMo​​de, String bstrLogin, String bstrUserKey, String bstrRoles, UInt32 ulRoleCount) 在 Microsoft.SharePoint.SPSite.InitUserToken(SPRequest request)在 Microsoft.SharePoint.SPSite.SPSiteConstructor（SPFarm 场，Guid applicationId，Guid contentDatabaseId，Guid siteId，Guid siteSubscriptionId，SPUrlZone 区域，Uri requestUri，字符串 serverRelativeUrl，布尔 hostHeaderIsSiteName，SPUserToken userToken）在 Microsoft.SharePoint.SPSite..ctor（SPFarm场，Uri requestUri，布尔 contextSite，SPUserToken userToken) 在 Microsoft.SharePoint.SPSite..ctor(String requestUrl)

我尝试使用 Page.RegisterAsyncTask 实现，但出现以下异常：

> 试图在单线程模式下调用多个线程。（来自 HRESULT 的异常：0x80010102 (RPC_E_ATTEMPTED_MULTITHREAD)）在 Microsoft.SharePoint.SPGlobal.HandleComException(COMException comEx) 在 Microsoft.SharePoint.Library.SPRequest.SetIPAddr(String bstrIPAddr) 在 Microsoft.SharePoint.SPGlobal.CreateSPRequestAndSetIdentity(SPSite 站点，字符串名称, Boolean bNotGlobalAdminCode, String strUrl, Boolean bNotAddToContext, Byte[] UserToken, String userName, Boolean bIgnoreTokenTimeout, Boolean bAsAnonymous) 在 Microsoft.SharePoint.SPWeb.InitializeSPRequest() 在 Microsoft.SharePoint.SPWeb.GetList(String strUrl)

我怎样才能实现这样的架构？

亲切的问候

# usb - 多个 MSP430 之间是否可以同时进行 I2C、SPI 和 USB 通信？

> ID：13744640
> 
> 赞同：0
> 
> 时间：2012-12-06T13:28:20.300
> 
> 标签：usb, communication, i2c, msp430, spi

我已经编写了几个 MSP430x6xx 微控制器作为一些 I2C 从设备的主控。其中一个 MSP430 使用其内置的 USB 模块将从 I2C 从机接收的数据传输到 PC。我想扩展它以允许所有微控制器使用公共总线系统将从各自的 I2C 从机接收到的数据发送到 PC。使用 SPI 将数据从所有 MSP430 传输到单个 MSP430 主控（已经同时作为 I2C 主控和 USB 设备）然后将其传输到 PC 是否可行？我将不胜感激任何其他建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:48:47.010

是的，这是可行的，我们将不得不编写您的固件来处理这个问题。您必须在 PC 上以某种方式识别数据来自谁的 SPI/I2C 从设备。因此，您的主 MSP430xxx 将执行此操作，在数据中添加某种标头，说明从设备的 id。

# codeigniter - 将 codeigniter 项目从 localhost 移动到 cpanel

> ID：13744642
> 
> 赞同：0
> 
> 时间：2012-12-06T13:28:38.773
> 
> 标签：codeigniter, cpanel

我正在尝试在服务器上运行我的 codeigniter 网站。但我不知道应该执行哪些设置。

我找到以下[链接](https://stackoverflow.com/questions/12282450/codeigniter-and-cpanel-installation)来移动文件并进行指定的设置，但仍然没有显示我网站的主页。

这是我到目前为止所做的。

我将 codeigniter 网站的`application and system`文件夹移到了根目录中，而我的文件和我的`.htaccess`文件一起 位于 public_html 中。`assets``index.php`

这是我的目录结构。

```
-/home/mysite
    -public_html
        -index.php        <-- the path for system is set to '/home/mysite/system' and for application folder is '/home/mysite/application'
        -.htaccess
    -system
    -application 
```

我已经执行了链接中提到的以下设置。

```
$config['index_page'] = "";
$config['base_url'] = "http://myurl.com/";
$config['server_root'] = $_SERVER['DOCUMENT_ROOT'];
$config['uri_protocol'] = 'AUTO';

$route['default_controller'] = "home_controller"; 
```

这是我的`.htaccess`文件。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

现在我不知道为什么当我输入我网站的网址时我的主页仍然没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:03:04.270

在 public_html 文件夹中上传您的应用程序文件夹、系统文件夹、资产文件夹、index.php、.HTACCESS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T07:27:31.763

你需要做几个步骤：

*   更新 'application/config/config.php' 为`base_url`
*   更新“htaccess”文件`RewriteBase`（如果需要）
*   更新文件权限（如果需要）
*   更新 'aplication/config/database.php' 的`database`设置
*   如果您仍然遇到问题，那么您需要调试如下：
*   在索引控制器中打印一些东西，然后沿着调用的函数序列遍历视图。

# apache - magento中多网站所需的设置

> ID：13744643
> 
> 赞同：0
> 
> 时间：2012-12-06T13:28:39.737
> 
> 标签：apache, magento, networking, dns, webserver

我想在 magento 中管理多站点多存储。这里是域 1\. WWW.ABC.COM 2\. SECOND.XYZ.com

仅供参考：主要 URL 是 www.abc.com，次要 URL id second.xyz.com 属于另一个域 (xyz.com)。

请帮助我如何在 magento 中管理这些以及服务器上需要什么配置。

这两个站点都托管在专用服务器上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:09:07.663

在管理商店部分，为您的第二个网站添加一个条目。记住您分配给它的代码。我将在这个例子中使用“xyz”。

为新网站创建您的商店和商店视图。

备份您的 index.php 文件。

在 index.php 的底部，将 mage run code 设置为您的网站代码；将运行类型设置为“网站”：

```
/* Store or website code */
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : 'xyz'; 

/* Run store or run website */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'website'; 
```

这会将 Magento 作为您的第二个网站运行。测试以确保。

将此文件和 .htaccess 复制到 XYZ 网站的文档根目录。将所有基本目录（app、js、lib、skin、media 等）符号链接到 ABC 站点。

恢复 ABC 站点上的原始 index.php 文件。

在 System Config->Web 中设置 XYZ 站点的基本 URL。

你应该被设置。

然而，这只是一种方法。有关更多信息，请参阅[此](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/navigation/multiple-website-setup "这")。

# jquery - 检查所有空文本输入的验证不起作用

> ID：13744645
> 
> 赞同：4
> 
> 时间：2012-12-06T13:28:46.430
> 
> 标签：jquery, html, jsfiddle

我在这里有一个 jsfiddle [http://jsfiddle.net/cbyJD/76](http://jsfiddle.net/cbyJD/76/)

正如您在小提琴中看到的，有 2 个问题，但在问题 1 中它包含多个文本输入，而问题 2 仅包含一个文本输入。现在我正在尝试验证任何空文本输入，但问题是如果在问题 1 的第一个文本输入中我填写一个值并将其他值留空，当我单击提交按钮时，其他文本输入在问题 1 是空的，它应该显示一个警告，说明问题 1 中有一个错误，说明有一个空的文本输入。好吧，它没有这样做，而是直接显示问题 2 的警报，说明该问题中有一个空白输入。

所以看起来我的问题是，如果一个问题有多个输入，如果其中一个输入被填写，那么它似乎认为这很好，并且该问题中没有空文本输入错误。这显然是不正确的，因为必须填写问题中的每个输入，不能将任何文本输入留空。

如何更新小提琴以解决此问题？

Jquery 验证（）函数在这里：

```
 function validation() {

    var alertValidation = "";
    var _qid = "";
    var _msg = "";

    $("[class*='q']").each(function(i) {  
    var questions = parseInt($("[class*=q" + i + "_qnum]").text());
    var txtinput = $("[class*=q" + i + "_mark]").val(); 
    _qid = questions;
    _msg = "You have errors on Question Number: " + _qid + "\n";

if (txtinput == '') {
    alertValidation += "\n\u2022 You have not entered in a value in all the Indivdiaul Marks textbox\n";
}    

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }

        });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

下面是HTML代码：

```
<form id="Marks" action="" method="post">
<table border='1' id='markstbl'>
    <thead>
    <tr>
    <th class='questionth'>Question No.</th>
    <th class='answermarksth'>Marks per Answer</th>
    </tr>
    </thead>
    <tbody>

    <tr class="questiontd">
        <td class="questionnumtd q1_qnum" name="numQuestion" rowspan="2">1 <input type="hidden" name="q1_ans_org" class="q1_ans_org" value="5"><input type="hidden" name="q1_ans" class="q1_ans" value="5"></td>

<td class="answermarkstd">
<input class="individualMarks q1_mark"  q_group="1" name="answerMarks[]" type="text" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
</tr>

<tr class="questiontd">
<td class="answermarkstd">
<input class="individualMarks q1_mark"  q_group="1" name="answerMarks[]" type="text" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
</tr>

<tr class="questiontd">
        <td class="questionnumtd q2_qnum" name="numQuestion" rowspan="1">2 <input type="hidden" name="q2_ans_org" class="q2_ans_org" value="5"><input type="hidden" name="q2_ans" class="q2_ans" value="5"></td>
<td class="answermarkstd">
<input class="individualMarks q2_mark"  q_group="1" name="answerMarks[]" type="text" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
</tr>    </tbody>
</table>

<p><input id="submitBtn" name="submitMarks" type="submit" value="Submit Marks" /></p>

</form> 
```

表如下所示：

```
Question No.   Marks per Answer
1              (blank text input)
               (blank text input)
2              (blank text input) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:05:56.517

我更新你的小提琴。

看到[这个](http://jsfiddle.net/cbyJD/79/)

```
$("input[data-type='qmark']").each(function(i) {  
var questions = $(this).attr("data-qnum");
var marks = parseInt($("[class*=q" + i + "_ans_text]").text(), 10); 
var txtinput = $(this).val(); 
_qid = questions;
_msg = "You have errors on Question Number: " + _qid + "\n"; 
```

# asp.net - Asp.Net 访问被拒绝复制文件

> ID：13744651
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:29:17.920
> 
> 标签：asp.net, access-denied

我想用“更新”按钮更新我的网站。当我单击更新时，必须将较新的版本从源站点复制到目标站点。我所有的网站都位于同一台服务器上，我收到“拒绝访问”错误。我唯一想要的就是轻松快速地更新我的网站。

感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:33:16.053

您将不得不授予您的应用程序/IIS 对 Web 服务器上 CSS 文件的“写入”权限。然后，您将不得不在应用程序中编写代码以物理更改文件。那就是说...

```
DON'T DO THIS! 
```

如果您需要修改您的网站并且不想每次都深入研究代码，请使用众所周知且经过全面测试的 CMS。编写您自己的代码，让您网站的用户可以对其文件进行写访问，这是非常危险的。你可以保证会有你没有想到的安全漏洞，最终一些黑客会让你为你的错误付出高昂的代价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:56:13.587

您需要像 Wordpress 那样使用 FTP 类。

# seo - PageSpeed Insights 没有看到 Gzip 压缩

> ID：13744652
> 
> 赞同：16
> 
> 时间：2012-12-06T13:29:24.813
> 
> 标签：seo, compression, gzip

我正在努力加快我的网站速度。Google 洞察 ( [https://developers.google.com/speed/pagespeed/insights](https://developers.google.com/speed/pagespeed/insights) ) 告诉我一个关键问题是启用 GZip 压缩。

该站点的地址是[http://user2.net](http://user2.net) 它基于codeigniter 框架。

我已启用 gzip 压缩，并对我的 .htaccess 文件进行了以下更改：

```
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

<files *.html>
SetOutputFilter DEFLATE
</files> 
```

我已经用这个工具测试了这个网站：http: [//www.gidnetwork.com/tools/gzip-test.php](http://www.gidnetwork.com/tools/gzip-test.php) 它说 gzip 已启用。

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T18:25:47.820

您是否在 .htaccess 中尝试过这些行？

```
<IfModule mod_deflate.c>
<FilesMatch "\.(html|php|txt|xml|js|css)$">
SetOutputFilter DEFLATE
</FilesMatch>
</IfModule> 
```

它适用于我的网站。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-27T07:23:58.557

首先，检查您的服务器中是否启用了 gzip。你可以使用这个工具： [http ://checkgzipcompression.com/](http://checkgzipcompression.com/)

如果没问题，请检查压缩是否适用于所有文件。如果 Google Page Speed Test 在您的服务器没有 GZIP 压缩的单个文件上发现，则该网站未通过测试。

您可以为此使用 Google Chrome：

1.  检查您的代码；在图像中，您可以看到 html 文件的内容编码 GZIP。 [![在此处输入图像描述](../Images/d174e9d08ba1ff5340e1f81f836c1ba1.png)](https://i.stack.imgur.com/igsPP.png)

2.  点击每个文件，找到没有 GZIP 编码的文件；也许是 CSS 类型或 JS 类型。

3.  当你找到它时，将文件类型添加到你的 gzip.conf

这是 gzip.conf 的简单配置

```
gzip on;
gzip_disable "MSIE [1-6]\\.(?!.*SV1)";
gzip_proxied any;
gzip_types text/plain text/css text/javascript text/xml application/javascript application/x-javascript application/xml application/xml+rss image/x-icon image/svg+xml image/jpeg image/jpg image/png
gzip_vary on; 
```

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-01T05:38:07.433

启用 gzip 压缩的三种方法 - 通过配置服务器设置

对于阿帕奇 -

```
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript 
```

对于 nginx

```
gzip on;
gzip_comp_level 2;
gzip_http_version 1.0;
gzip_proxied any;
gzip_min_length 1100;
gzip_buffers 16 8k;
gzip_types text/plain text/html text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;
gzip_disable "MSIE [1-6].(?!.*SV1)";
gzip_vary on; 
```

并通过`.htaccess`如上所示的编辑

```
<IfModule mod_deflate.c>
<FilesMatch "\.(html|php|txt|xml|js|css)$">
SetOutputFilter DEFLATE
</FilesMatch>
</IfModule> 
```

来源：[启用压缩](https://varvy.com/pagespeed/enable-compression.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T08:34:18.927

这是重定向，它设置了 2 个标头

第一个 301（或 302，没有检查）

第二个 200 + gzip

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-18T18:03:17.523

对于在运行 SEMRush 站点审核后可能遇到“未压缩页面”问题的任何人，请尝试将以下内容添加到您的 .htaccess

```
<ifModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_dechunk Yes
mod_gzip_item_include file .(html|txt|css|js|php)$
mod_gzip_item_include handler ^cgi-script$
mod_gzip_item_include mime ^text/.*
mod_gzip_item_include mime ^application/x-javascript.*
mod_Gzip_item_exclude mime ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule> 
```

永远记得在进行任何编辑之前备份您的 .htaccess 文件，因为一个简单的输入错误可能会导致您网站的某些功能失败甚至更糟 - 破坏您的整个网站。

参考：[https ://www.semrush.com/blog/improve-page-load-times-htaccess-file/](https://www.semrush.com/blog/improve-page-load-times-htaccess-file/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-07-17T21:39:47.390

谷歌在他们的常见问题解答中解决了这个完全相同的问题，就像你为什么会收到错误来压缩/gzip你的文件一样。

从 Google 的 Insights 结帐： [https ://developers.google.com/speed/docs/insights/EnableCompression#FAQ](https://developers.google.com/speed/docs/insights/EnableCompression#FAQ)

早些时候，他们曾经有一个 chome 扩展，但现在它已被删除，因此他们将您指向[https://developers.google.com/speed/pagespeed/insights/](https://developers.google.com/speed/pagespeed/insights/)，当您输入任何 url 时，他们会告诉您哪些特定文件或脚本是仍然有资格压缩或阻止页面呈现或两者兼而有之。

希望这可以帮助。

# scala - 使用更高种类的类型访问上下文边界的类型构造函数参数

> ID：13744655
> 
> 赞同：2
> 
> 时间：2012-12-06T13:29:32.593
> 
> 标签：scala, higher-kinded-types, context-bound

是否可以在上下文绑定中访问更高种类的类型构造函数参数？我希望定义一个采用更高类型的特征，并具有一个返回构造函数参数实例的方法。

```
case class A[TContents](c: TContents) {
  def foo = c
}

case class B[TContents](c: TContents) {
  def foo = c
}

trait Fooable[TClass[_ <: TContents], TContents] {
  def foo(obj: TClass[TContents]): TContents
}

case class AFooable[TContents] extends Fooable[A, TContents] {
  def foo(obj: A[TContents]) = obj.foo
}

case class BFooable[TContents] extends Fooable[B, TContents] {
  def foo(obj: B[TContents]) = obj.foo
}

class test {
  def getFoo[TType[_] : Fooable, TContents](obj: TType[TContents]): TContents = 
    implicitly[Fooable[TType, TContents]].foo(obj)

  implicit def aFooable = AFooable

  val a = A(1)
  val foo = getFoo(a)
} 
```

这失败了，编译器错误抱怨上下文边界不能有两个类型参数，但我找不到另一种访问类型构造函数参数的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:01:04.200

你有两个选择——要么使用[类型 lambda 技巧](https://stackoverflow.com/q/8736164/334519)来部分应用`Fooable`（呃）：

```
def getFoo[TType[_]: ({type L[A[_]] = Fooable[A, TContents]})#L, TContents](
  obj: TType[TContents]
): TContents = implicitly[Fooable[TType, TContents]].foo(obj) 
```

或者对上下文绑定脱糖（在我看来更好）：

```
def getFoo[TType[_], TContents](obj: TType[TContents])(
  implicit ev: Fooable[TType, TContents]
): TContents = ev.foo(obj) 
```

请注意，无论哪种情况，您都需要提供`aFooable`类型参数：

```
implicit def aFooable[A] = AFooable[A] 
```

我强烈建议您遵守有关无参数列表案例类的警告。

# c# - 在 Azure 上远程启动进程

> ID：13744665
> 
> 赞同：0
> 
> 时间：2012-12-06T13:30:13.827
> 
> 标签：c#, windows, azure

我希望能够在 Azure 上远程启动多个并发进程（命令行程序）。我需要能够从 C# 程序调用来启动这些进程。最好的方法是什么？

1.  使用 IIS 设置 Azure VM
2.  安装我要运行的各种 .exe。
3.  在盒子上编写并安装一个 Web 服务，该服务可以接受参数并启动服务器上的进程。

有没有更简单的方法可以使用 Azure 做到这一点？我不熟悉 Azure VM 或辅助角色等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:17:07.760

为此，您可以使用 Azure Worker Roles 和 Windows Azure Storage。您可以做的是将可执行文件与辅助角色包一起打包，以便它们在您的角色中始终可用，或者您可以将它们保存在 blob 存储中，以便您可以按需下载到辅助角色中。从您的调用应用程序中，您可以将消息放入队列中，该队列将由您的工作角色不断轮询。该消息将包含足够的信息（例如要调用的 exe 等）。一旦收到消息，worker 角色将执行可执行文件。

希望这可以帮助。

# java - 在 EditText Android 中获取值

> ID：13744670
> 
> 赞同：0
> 
> 时间：2012-12-06T13:30:27.557
> 
> 标签：java, android, intellij-idea, android-edittext

我在获取程序的 editText 中的值时遇到问题。我在 textView 中设置了值，以便我可以查看代码是否得到它。但不幸的是，它显示如下：

android.widget.EditText@410e5a58 -> @ 符号后的数字在模拟器中每次运行都会改变

为什么会发生这种情况？这是我的代码：

```
package com.example.ITax;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

/**
* Created with IntelliJ IDEA.
* User: Karla Mae Jaro
* Date: 12/3/12
* Time: 3:58 PM
* To change this template use File | Settings | File Templates.
*/
public class AnnualComputation extends MyActivity
{
String civil_status2;

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.annual_computation);

    Bundle extras = getIntent().getExtras();

    if(extras != null)
    {
        civil_status2 = extras.getString("user_status");
    }

    final Button btn_compute = (Button) findViewById(R.id.btn_compute_from_annual);
    final Button btn_back = (Button) findViewById(R.id.btn_back_from_annual_computation);

    btn_back.setOnClickListener(new Button.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Intent i = new Intent(getApplicationContext(), OpenChoices.class);
            startActivity(i);
        }
    });

    btn_compute.setOnClickListener(new Button.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            final EditText net_salary = (EditText) findViewById(R.id.et_net_annual);
            final EditText tax_due = (EditText) findViewById(R.id.et_taxdue);
            final EditText tax_exe = (EditText) findViewById(R.id.et_taxexemption);

            final TextView txt3 = (TextView) findViewById(R.id.textView3);
            final TextView txt4 = (TextView) findViewById(R.id.textView4);
            final TextView txt5 = (TextView) findViewById(R.id.textView5);
            final TextView txt6 = (TextView) findViewById(R.id.textView6);
            final TextView txt7 = (TextView) findViewById(R.id.textView7);
            final TextView txt8 = (TextView) findViewById(R.id.textView8);

            double netSalary, taxDue, rate = 0, exemption = 0, additional = 0, lowerlimit = 0, total;
            String ns, td, r, e, a, t;

            ns = net_salary.getText().toString();
            netSalary = Double.parseDouble(ns);

            /* Getting the tax exemption */

            if ("SME".equals(civil_status2))
            {
                exemption = 50000;
            }

            else if ("SM1".equals(civil_status2))
            {
                exemption = 25000;
            }

            else if ("SM2".equals(civil_status2))
            {
                exemption = 50000;
            }

            else if ("SM3".equals(civil_status2))
            {
                exemption = 75000;
            }

            else if ("SM4".equals(civil_status2))
            {
                exemption = 100000;
            }

            /* Getting the rate, additional, lowerlimit */

            if(netSalary <= 10000)
            {
                rate = 0.05;
            }

            else if((netSalary > 10000) && (netSalary <=30000))
            {
                rate = 0.1;
                additional = 5000;
                lowerlimit = 10000;
            }

            else if ((netSalary > 30000) && (netSalary <= 70000))
            {
                rate = 0.15;
                additional = 2500;
                lowerlimit = 30000;
            }

            else if((netSalary > 70000) && (netSalary <= 14000))
            {
                rate = 0.20;
                additional = 8500;
                lowerlimit = 70000;
            }

            else if ((netSalary > 140000) && (netSalary <= 250000))
            {
                rate = 0.25;
                additional = 22500;
                lowerlimit = 140000;
            }

            else if((netSalary > 250000) && (netSalary <= 500000))
            {
                rate = 0.30;
                additional = 50000;
                lowerlimit = 250000;
            }

            else if (netSalary > 500000)
            {
                rate = 0.32;
                additional = 125000;
                lowerlimit = 500000;
            }

            taxDue = netSalary - exemption;
            total = taxDue - lowerlimit;
            total = total * rate;
            total = total + additional;

             /* Converting exemption from Double to String */

            td = String.valueOf(net_salary);
            e = String.valueOf(exemption);
            a = String.valueOf(additional);
            r = String.valueOf(rate);
            t = String.valueOf(total);

             /* Placing the value to the editText (textbox) */

            tax_due.setText(td);
            tax_exe.setText(e);
            txt3.setText(civil_status2);
            txt4.setText(td);
            txt5.setText(e);
            txt6.setText(t);
            txt7.setText(r);
            txt8.setText(a);

        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:34:44.380

使用`netSalary`而不是`net_salary`

```
td = String.valueOf(netSalary); 
```

当您传递编辑文本而不是双变量时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:34:09.747

您正在传递`EditText`( `net_salary`)的对象，`td`因此`td`将具有`net_salary`对象的字符串表示形式。

您已将值存储在`netSalary`varibale 中，因此请改为传递：

```
td = String.valueOf(netSalary); 
```

并供您参考：

`android.widget.EditText@410e5a58`是您的`EditText`对象的字符串表示形式（即您的对象的调用`toString`方法`Edittext`将返回此字符串）。

之后的值`@`是对象的内存地址。每次它都会发生变化，因为每次您的对象都是在不同的内存位置创建的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:35:03.287

试试这个，

```
tax_due.setText( net_salary.getText().toString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:35:51.827

如果问题在这里：

```
td = String.valueOf(net_salary); 
```

那是因为您正在尝试处理`net_salary`，其中设置了字符串值的小部件，就好像它只是一个字符串一样。尝试：

```
td = String.valueOf(net_salary.getText().toString()); 
```

# facebook - Facebook PHP SDK 在 '12 年 12 月更新后行为不端

> ID：13744673
> 
> 赞同：1
> 
> 时间：2012-12-06T13:30:30.377
> 
> 标签：facebook, facebook-javascript-sdk, oauth-2.0, facebook-php-sdk

我正在使用 PHP (with js) SDK 在我的网站周围进行身份验证。到目前为止，我从来没有遇到过访问令牌的问题，并且一切都运行顺利。由于已推送最新更新，因此我收到了很多：

> **致命错误**：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在第 1106 行扔进 /home/content/54/9505854/html/src/fb/base_facebook.php

只要有对 API 的 PHP 调用，访问令牌似乎就会失效（或无法恢复）。我制作了一个简单的页面，它总是按预期简单地返回当前的访问令牌：

```
//Facebook PHP SDK
require_once 'src/fb/facebook.php'; 

//Config
$facebook = new Facebook(array(
  'appId'  => '...id...',
  'secret' => '...secret...',
));

$accessToken = $facebook->getAccessToken();
die($accessToken); 
```

如果在 javascript 身份验证后立即加载此页面仍然有效，但任何离开此页面的导航（或确实是刷新）此脚本将返回 appID 和密码作为表单中的字符串`[appID]|[secret]`

基本上，对 Facebook 对象的任何调用都会使下一页导航未经身份验证。

此外，我目前没有将检索到的访问令牌存储为 cookie 或 mySQL。我是不是该？

对问题或解决方案的任何见解都会非常有帮助！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:00:54.493

这是一个 Facebook 错误。描述可以在这里找到：[https ://developers.facebook.com/bugs/404450666302585](https://developers.facebook.com/bugs/404450666302585)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:35:07.767

现在已解决此问题。更新到最新版本的 PHP-SDK (v3.2.2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:17:40.780

我正在使用 php-sdk "3.2.0" 得到同样的错误..

根据上面提到的新 PHD-sdk [https://github.com/facebook/facebook-php-sdk/commit/ca9472b3312dab3fdcfbffb4e45eb091f582dcb7](https://github.com/facebook/facebook-php-sdk/commit/ca9472b3312dab3fdcfbffb4e45eb091f582dcb7)

我添加了以下代码片段，它从缓存中获取保存的访问令牌，而不是使用相同的代码调用新的访问令牌。

```
if ($code && $code == $this->getPersistentData('code')) {
          // short-circuit if the code we have is the same as the one presented
          return $this->getPersistentData('access_token');
} 
```

现在，它返回缓存访问令牌而不是 [appID]|[secret] 一个。它对我有用。

# java - Java 正则表达式和 xml 标签

> ID：13744674
> 
> 赞同：0
> 
> 时间：2012-12-06T13:30:30.720
> 
> 标签：java, regex

我想解决：`<tag>alphabetic characters and space</tag>`

我建议这个：

```
<.*>([A-Za-z]+)</.*> 
```

这个对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T13:33:45.987

请，为了任何可怜的开发人员将不得不处理您的代码，请不要尝试使用正则表达式解析 XML。

请改用 SAX 或 DOM 解析器。如果您在 Google 上搜索，网络上有很多很好的指南，但这里有一个使用标准`javax.xml`包的快速示例...

```
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(xmlFile);
Node node = doc.getElementsByTagName("tag").item(0);
String value = node.getNodeValue(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:34:56.097

如果输入是：`<tag> something <inner-tag> some other thing </inner-tag> </tag>`？

我建议您使用 XML 解析器库，例如[Apache Digester](http://commons.apache.org/digester)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T13:36:15.803

您应该添加`?`字符以排除冗余选择

```
 <.*?>[A-Za-z ]*</.*?> 
```

# java - 为静态方法设置 AspectJ 建议

> ID：13744677
> 
> 赞同：8
> 
> 时间：2012-12-06T13:30:49.180
> 
> 标签：java, aspectj, spring-aop

我用原始的切入点和建议方法编写了简单的方面：

```
@Aspect
public class MyAspect {

  @Pointcut("execution(static * com.mtag.util.SomeUtil.someMethod(..))")
  public void someMethodInvoke() { }

  @AfterReturning(value = "someMethodInvoke())", returning = "comparisonResult")
  public void decrementProductCount(List<String> comparisonResult) {
    //some actions
  }
} 
```

我有以下基于 Spring 注释的应用程序配置：

```
@Configuration
@EnableAspectJAutoProxy
public class AppConfig { 
  //...
} 
```

以及 com.mtag.util 包中的实用程序类：

```
public class SomeUtil {
  static List<String> someMethod(List<String> oldList, List<String> newList) {
    //...
  } 
} 
```

但是当我打电话时

```
SomeUtil.someMethod(arg1, arg2); 
```

在单元测试中，我可以看到方法调用没有被拦截，并且我的 @AfterReturning 建议不起作用。

但是，如果我将 someMethod() 类型更改为实例（非静态）方法，则切入点

```
@Pointcut("execution(* com.mtag.util.SomeUtil.someMethod(..))") 
```

并通过添加 @Component 注释和调用目标方法来管理 SomeUtil bean，如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {AppConfig.class}, loader = AnnotationConfigContextLoader.class)
public class SomeUtilTest {

    @Autowired
    private SomeUtil someUtil;

    @Test
    public void categoriesDiffCalc() {
        List<String> result = someUtil.someMethod(...);
    }
} 
```

一切都好。

我可以通过什么方式为静态方法设置建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-11T07:44:46.303

实际上在spring框架中没有使用自动代理拦截静态方法的解决方案。您应该使用 LWT AspectJ 解决方案。

简而言之，您应该使用相同的注释，但需要一些额外的配置。

1）添加到spring上下文文件的下一行：

```
<context:load-time-weaver/> 
```

（可能在你的情况下没有必要）

2) 不幸的是，您还应该添加 META-INF/aop.xml。例子：

```
<weaver>
    <include within="com.example.ClassA"/> <!-- path to concrete class -->
    <include within="com.log.* "/> <!—- path to aspects package -->
</weaver>
<aspects>
    <aspect name="com.log.AspectA"/>
</aspects> 
```

3) 启动 JVM 时的参数

```
-javaagent:${PATH_TO_LIB }/aspectjweaver.jar 
```

应该添加。

所以这个解决方案相当费力。

有关更多信息，请阅读此处的第 7.8.4 章[http://docs.spring.io/spring/docs/3.0.0.RC2/reference/html/ch07s08.html](http://docs.spring.io/spring/docs/3.0.0.RC2/reference/html/ch07s08.html)

# php - 在创建通知/警报时，如何知道何时将通知标记为已读

> ID：13744678
> 
> 赞同：0
> 
> 时间：2012-12-06T13:30:47.953
> 
> 标签：php, notifications, alerts

我正在使用 PHP 和 MySQL 创建一个网站，目前正在处理一个处理通知的页面（例如，当有人对您的帖子发表评论时，您会收到通知）。当您登录您的帐户（Facebook 风格）时，通知不是作为电子邮件发送，而是作为网站中的警报发送。

现在我的问题是确定何时将通知标记为已读。简而言之：什么是事件（例如点击、查看），在它发生后您可以确定通知已被阅读，并且您可以将其更改为已阅读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:12:07.943

但我已经有办法解决了。让我分享一下它可能对某人有帮助：每个警报都应该将用户引导到某个 URL，例如，如果有人评论了您的帖子，点击警报时您应该被引导到例如“www.example.com/posts/? post_id = 5”。我将此称为目标 URL。生成警报时，我将其目标 URL 与警报详细信息一起存储在警报表中，并获取 AI 唯一字段（alert_id），我将使用该字段生成警报上任何链接的 href 部分，例如`<a href="changetoread.php?alert_id=56">G Thuo</a>`评论您的帖子. 这是我的方法：单击任何警报时，它首先会将您带到其状态更改为已读的位置（基于链接中的 alert_id）。将其更改为读取后，我们从表中获取目标 URL 并将用户重定向到那里。这是我的代码：

```
$alert_id=$_GET['alert_id'];
$user_id=$_SESSION['user_id'];
//create the SQL to update the read_status
$sql="UPDATE alerts_log SET read_status=1 WHERE alert_id=$alert_id AND user_id=$user_id";
$res=mysql_query($sql) or die(mysql_error());
//we can now extract the targer_url from the alerts table and redirect the user automatically to that URL
$sql="SELECT target_url FROM alerts WHERE alert_id=$alert_id";
$res=mysql_query($sql) or die(mysql_error());
$row=mysql_fetch_assoc($res);
$url=$row['target_url'];
//redirect the user to that URL
header("Location: $url"); 
```

`

# c# - 无法将日期从 c# 传递给 javascript 函数

> ID：13744687
> 
> 赞同：1
> 
> 时间：2012-12-06T13:31:24.900
> 
> 标签：c#, javascript, html

我正在从 c# 代码动态构建 html 表。这是我的代码的一部分：

```
listHTML.Append("<td onClick='GoToHourlyReport("
    + Convert.ToDateTime(dr["IntervalStartTime"]).ToString("yyyy-MM-dd")
    + ","
    + deptId
    + ");' align='center' valign='middle' class='graph_red_grid_text'>"
    + Convert.ToDateTime(dr["IntervalStartTime"]).ToString("yyyy-MM-dd hh:mm:ss")
    + "</td>"
); 
```

我正在尝试`onclick`将`td`日期传递给 JavaScript 函数。

```
onClick='GoToHourlyReport("
    + Convert.ToDateTime(dr["IntervalStartTime"]).ToString("yyyy-MM-dd")
    + ","
    + deptId
    + ");' 
```

但是当我传递一个日期时`2012-10-01`，我总是在 JavaScript 函数中得到一个值 1999。任何人都可以阐明我做错了什么吗？

这是js函数

```
 function GoToHourlyReport(date, deptId) {
    window.location.href = "CallAverageHourlyReport_BW.aspx?Date=" + date + "&Queue=" + deptId;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:33:54.553

查看页面源码，你会看到你的问题。您在生成的代码中缺少引号。

总之你在做

```
alert(2012-10-01); 
```

不是

```
alert("2012-10-01"); 
```

添加转义的“

```
listHTML.Append("<td onClick='GoToHourlyReport(\"" + Convert.ToDateTime(dr["IntervalStartTime"]).ToString("yyyy-MM-dd") + "\",\"" + deptId + "\");'... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:43:06.283

您需要将日期作为字符串传递，否则它会被解释为数字（2,010 减 10 减 1 = 1,999）：

```
listHTML.Append("<td onClick=\"GoToHourlyReport('"
    + Convert.ToDateTime(dr["IntervalStartTime"]).ToString("yyyy-MM-dd")
    + "',"
    + deptId
    + ");\" align='center' valign='middle' class='graph_red_grid_text'>"
    + Convert.ToDateTime(dr["IntervalStartTime"]).ToString("yyyy-MM-dd hh:mm:ss")
    + "</td>"
); 
```

这应该生成：

```
<td onclick="GoToHourlyReport('2010-10-01', 1)" ...> 
```

# jsf - JSF 立即=真，在应用请求值阶段之前或之后调用的操作？

> ID：13744688
> 
> 赞同：0
> 
> 时间：2012-12-06T13:31:29.617
> 
> 标签：jsf, jsf-2

在命令按钮上使用 immediate="true" 时，确实会在应用请求值阶段调用该操作，并跳过所有剩余阶段。记住这一点，我想知道它何时被调用。在应用请求值阶段之前还是之后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:31:18.473

一旦应用请求值阶段完成（即，已在树中的所有组件上调用了解码方法），UIViewRoot 就会广播在其上排队的事件，其中之一是由命令按钮排队的 Action 事件。

这发生在为应用请求值阶段调用任何阶段后阶段侦听器之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:47:55.400

您可以使用简单的 PhaseListener 来查看它。如果您有 immediate="true"，则在 APPLY_REQUEST_VALUES 阶段调用操作方法，因此在“beforePhase”和“afterPhase”之间

# matlab - 在uitable中选择一行时，它说“尝试引用非结构数组的字段”

> ID：13744689
> 
> 赞同：2
> 
> 时间：2012-12-06T13:31:29.953
> 
> 标签：matlab, matlab-uitable

问题是：

我需要点击一个Pushbottom时，会选择下一行，相关代码是：

```
function pushbutton11_Callback(hObject, eventdata, handles)
   global mtable;
   jScroll = findjobj(mtable);
   jtable=jScroll.getViewport.getView;
   row = jtable.getSelectedRow ;
   jtable.setRowSelectionInterval(row+1,row+1);
   jtable.setColumnSelectionInterval(0,99); %the number of mtable columns is 100 
```

在`openningFunction`我`mtable`如下：

```
mtable = uitable('parent',gcf,'Units','normalized','Data',data);
set(mtable,'columnName',cname);
set(mtable,'Position',[0.17 0.2 0.75 0.75]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:51:44.753

失败时很可能`jScroll`是空的。`findjobj`这*可能*会发生，因为您使用的是全局变量！

拜托，拜托，为了所有美好和神圣的事物，不要使用全局变量；他们造成的痛苦比他们所能预防的要多得多。

无论如何，请尝试删除此行末尾的分号

```
jScroll = findjobj(mtable) 
```

并查看发生错误时的输出。如果我说的是真的，你可以通过类似

```
jScroll = findjobj(mtable);
if ishandle(jScroll) %// <-- add this line
   jtable=jScroll.getViewport.getView;
   row = jtable.getSelectedRow ;
   jtable.setRowSelectionInterval(row+1,row+1);
   jtable.setColumnSelectionInterval(0,99);
end %// <-- and this one 
```

*（无论如何，这对于任何应该*是句柄的东西都是一个很好的做法

这些帮助有用？

# perl - 在 Perl 中查找数组的长度

> ID：13744697
> 
> 赞同：0
> 
> 时间：2012-12-06T13:31:44.977
> 
> 标签：perl

我有一些代码，例如：

```
my %hosts = (
    'USAmazon' => ['US','CA'],
    'EUAmazon' => ['GB', 'FR', 'IT', 'ES', 'DE'],
    'CNAmazon' => ['CN'],
    'JPAmazon' => ['JP'],
);

my @values = $hosts{$ARGV[0]}; 
```

我看到它`$values[0][0]`持有美国并`$values[0][1]`持有 CA。为什么呢？请解释。

另外，我如何找出 的长度`$values[0]`？

`scalar $values[0]`打印出诸如`ARRAY(0x12FFc)`blah..blah之类的东西...

任何链接也很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:31:30.667

你是 Perl 的*新手*，而且你已经*参考*了...

在 Perl 中，有三种标准的数据类型：

*   **标量**：这些可以包含单个值，例如`$foo`.
*   **数组**：这些可以包含值*列表*。数组有一个顺序（这个值在数组中比这个值更早），并且值是根据它们在数组中的顺序（从第零项到最后一项）来引用的。您将数组称为`@foo`，将单个项目称为`$foo[1]`。
*   **哈希**：这些是键值。每个值都有一个唯一的键。没有顺序，但您可以根据其键快速找到一个值。您将散列称为`%foo`，将单个项目称为`$foo{BAR}`。

请注意，所有这些都包含单独的值。数组或散列的每个元素只能有一个值。例如，我有一个主机哈希（`USAmazon`、`EUAmazon`等），并且我希望每个主机都与一个国家（`$host{USAmazon} = 'US';`、`$host{EUAmazon} =`GB` 等）相关联。这在 Perl 中很容易实现。

不幸的是，事实并非如此。每台主机都可以与*一系列*国家代码相关联。如何将所有可能的国家/地区代码放入我的主机哈希中？这就是引用的来源。想象一下我有一个国家代码列表。如果我能找到该列表的内存位置，我可以将该内存位置用作我的哈希中的引用。因此，我的散列包含每个键的单个值。恰好键是特定列表在内存中的位置。

这就是*引用*的含义，以及为什么有时您会看到诸如`ARRAY(0x12FFc)`. 这恰好是存储在哈希中的某个数组的内存位置。

有一个很好的关于参考的[Perl 教程](http://perldoc.perl.org/perlreftut.html)，它确实是标准 Perl 发行版的一部分。这是一个很好的起点。

一个快速的基本指南，虽然......

*   您可以通过简单地在其前面放置一个反斜杠来获得对 Perl 变量类型的引用：

例如：

```
$reference_to_foo_array = \@foo; 
```

如果我打印`$reference_to_foo_array`，我会得到类似的信息`ARRAY(0x12FFc)`，告诉我这是内存位置的一个数组`0x12FFc`。但是，我现在可以将整个数组存储`@foo`到单个哈希或数组元素中：

```
$some_array[0] = $reference_to_foo_array; 
```

*   如果我有一个引用，我可以通过在它前面放置正确的变量类型符号将它转换回 Perl 变量。这称为*取消引用*。

例如：

```
@another_array = @{$reference_to_foo_array}; 
```

在许多情况下，我可以消除花括号：

```
@another_array = @$reference_to_foo_array; 
```

我可以有非常复杂的对象。例如。我有一个人的哈希值，每个哈希值都包含一个电话类型的哈希值。每个电话类型都包含该类型电话的列表。例如，我可能有两个工作电话号码和两个手机：

```
 $person{DAVID}; 
```

这是指大卫的电话。但是，这实际上是电话类型的哈希。如果我打印出来，我会得到类似的东西`Hash(0x12b23)`：

如果我想要特定的电话类型，我会这样做：

```
 ${$person{DAVID}}{CELL}; 
```

这是大卫的手机号码列表。如果我打印这个，我会得到类似的东西，`Array(0x3458b)`因为它是一个电话号码数组的引用。

这里指的是大卫的第一部手机：

```
${${$phone{DAVID}}{CELL}}[0]; 
```

没有括号，你会看到：

```
$$$phone{DAVID}{CELL}[0]; 
```

幸运的是，Perl 有一个语法糖使它更容易阅读：

```
$phone{DAVID}->{CELL}->[0]; 
```

这表示有一个（人的）散列指代另一个（电话类型的）散列，该散列指的是电话号码数组。

Perl 还有一种无需实际命名即可创建散列或数组的方法。这将创建一个*匿名*哈希：

```
$phone{DAVID} = {}; 
```

现在，我可以得到 DAVID 的电话类型哈希值。以下是我创建*匿名数组*的方法：

```
$phone{DAVID}->{CELL} = []; 
```

现在，我可以得到 DAVID 的手机号码列表。

还有几件事：

*   查看模块[Data::Dumper](http://perldoc.perl.org/Data/Dumper.html)。这可以帮助您打印出这些非常复杂的数据类型的结构，并帮助您了解您正在查看的内容。

*   查看 Perl 函数[ref](http://perldoc.perl.org/functions/ref.html)。这可以帮助你弄清楚你在看什么。例如：

    我的 $data_type = ref $phone{DAVID}->{CELL}

将设置`$data_type`为`ARRAY`。这让我知道这`$phone{DAVID}->{CELL}`不是电话号码，而是电话号码列表（或者可能是另一个引用类型的列表）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T13:50:37.670

数组和哈希值始终是标量。在这种情况下，对于现有元素，`$hosts{$ARGV[0]}`是一个包含对数组的引用的标量。您需要取消引用该引用以获取数组。

```
my $length = @{ $hosts{$ARGV[0]} }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:40:13.580

`%hosts`hash 将数组引用保存为值。您只需要取消引用它们：

```
my @values = @{$hosts{$ARGV[0]}}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T14:08:58.887

为了

```
my @values = $hosts{$ARGV[0]}; 
```

`$ARGV[0]`您的哈希键之一在哪里，例如`'USAmazon'`，您的哈希中的相应值`%hosts`将是

```
['US','CA'] 
```

这是一个匿名数组引用。此结构`[ LIST ]`用于创建用作标量值的数组引用，例如：

```
my $foo = [ 1, 2, 3 ];    # $foo is a scalar 
```

如果您要从现有数组中进行此操作，您也可以这样做：

```
my @foo = (1, 2, 3);      # @foo is an array
my $foo = \@foo;          # reference to an array @foo 
```

但是，这将创建一个到命名数组的硬编码链接。使用匿名数组不会。

在散列（或数组）中，值只能是标量值。因此，如果您将哈希值分配给数组，则数组中的第一个元素将被分配该标量值。数组的第一个元素当然是`$array[0]`. 所以：

```
my $foo = $hosts{$ARGV[0]};   # [ 'US', 'CA' ]
my @bar = $foo;
print $bar[0];                # prints the array reference ARRAY(...)
print $foo;                   # same thing
print $foo->[0];              # 'US'
print $bar[0][0];             # 'US' (same thing) 
```

有关详细信息，请参阅[perldoc perldata](http://perldoc.perl.org/perldata.html)。

# iphone - iOS6中的横向模式在应用程序中间

> ID：13744701
> 
> 赞同：0
> 
> 时间：2012-12-06T13:32:05.300
> 
> 标签：iphone, ios

我正在使用 iOS6 设备 xcode 4.5 和山狮 mac。在我的应用程序中，我以纵向模式（3 个屏幕）开始。但是第 4 个屏幕应该是横向的，并且应该支持横向左侧和横向右侧。

大多数解释都显示了如何旋转。

在 appddelegate 中使用

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
      UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
navigationController.navigationBar.tintColor = [UIColor blackColor];

// Set RootViewController to window
if ( [[UIDevice currentDevice].systemVersion floatValue] < 6.0)
{
    // warning: addSubView doesn't work on iOS6
     [self.window addSubview: navigationController.view];
}   
else
{
     // use this mehod on ios6
     [self.window setRootViewController:navigationController];
}

}
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    if(self.shouldRotate ) //shouldRotate is my flag
    {
         self.shouldRotate = NO;
         return (UIInterfaceOrientationMaskLandscapeRight);
    }
    return (UIInterfaceOrientationMaskPortrait);
} 
```

在我的视图控制器中，它应该是横向的并且正在使用

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
     AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
         appDelegate.shouldRotate = YES;
        // Custom initialization
    }
     return self;
 }

- (BOOL)shouldAutorotate
{
     return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
      return UIInterfaceOrientationMaskLandscape;
} 
```

在我的视图控制器中，它们是 potrait 正在正常工作，正在使用

```
- (BOOL)shouldAutorotate
{
     return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
      return UIInterfaceOrientationMaskPortrait;
} 
```

有人可以建议这样做吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:44:33.587

这对我有用我删除了 NavigationController 并更改如下

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        self.viewController = [[PlashViewController alloc] initWithNibName:@"PlashViewController" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
   [self.window makeKeyAndVisible];
   return YES;
} 
```

我的应用程序将此方法放置在我的视图控制器中，如下所示，在 plist 和目标中，我指定了三个方向，如纵向、横向左和横向右 **以显示纵向视图**

```
-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

**以横向显示视图**

```
 - (BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
   return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:47:38.573

我发现只有 rootviewcontroller 在 iOs 6 中处理这些事情。在这里查看我的答案：[https ://stackoverflow.com/a/13033443/580173](https://stackoverflow.com/a/13033443/580173)

# javascript - 相交对象不起作用

> ID：13744705
> 
> 赞同：1
> 
> 时间：2012-12-06T13:32:25.640
> 
> 标签：javascript, three.js

我现在为此苦苦挣扎了几天，最后我放弃了，决定问你。我正在尝试进行简单的对象检测，并且由于 inetersectScene 已被非递归的 intersectObjects 替换，因此我正在创建一个新数组，其中存储了我想要与之交互的所有对象。我正在尝试使用纯网格和object3d，但它对它们都不起作用。然后我将我的数组传递给 intersectObjects 函数，但返回的数组始终为空。

这是一些代码：

```
// Translate page coords to element coords

var offset = $(this.renderer.domElement).offset();

var eltx = pagex - offset.left;

var elty = pagey - offset.top;

// Translate client coords into viewport x,y

var vpx = (eltx / this.container.offsetWidth) * 2 - 1;

var vpy = -(elty / this.container.offsetHeight) * 2 + 1;

var vector = new THREE.Vector3(vpx, vpy, 0.5);

this.projector.unprojectVector(vector, this.camera);

var ray = new THREE.Ray(this.camera.position, 
vector.subSelf(this.camera.position).normalize());

//console.log(ray);

var intersects = ray.intersectObjects(this.intersectedList);

console.log(intersects.length); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:39:12.703

`intersectObjects`有一个递归标志：

```
var intersects = ray.intersectObjects(this.intersectedList, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:19:42.367

您的代码不起作用，因为您的相机是多个对象的子/孙，其中一个对象已应用翻译。

```
this.camera.parent.parent.position.y 
```

返回 -249。

所以`this.camera.position`不是真实的、世界的、相机位置。

尝试`this.camera.matrixWorld.getPosition().clone()`改用。

像这样：

```
var cpos = this.camera.matrixWorld.getPosition().clone();
var ray = new THREE.Ray( cpos, vector.subSelf( cpos ).normalize() ); 
```

三.js r.53

# eclipse - Python插入额外的\'s？

> ID：13744707
> 
> 赞同：0
> 
> 时间：2012-12-06T13:32:27.393
> 
> 标签：eclipse, python-3.x, special-characters

背景：我正在使用 Eclipse SDK 4.2.1 (Juno) 中的 python 3.2，我注意到一些奇怪的事情 - 虽然我的程序在 Eclipse 中完美运行，但如果我从文件管理器中打开它们，它们总是会因错误而关闭。我设法在cmd关闭之前获得了截图：![在此处输入图像描述](../Images/deeac744cb098563e346f04c4176dc46.png)

该程序似乎在“images”和“Cy.png”之间插入了一个额外的“\”。但是，我不能只从我的程序中删除斜线 - 在其中，我使用了两个斜线，因为您需要在字符串中包含斜线。我的程序如下：

```
from PIL import Image

def pathConstruction(count, imageName):
    l = []
    l.append('images\\')
    if count == 1:
        l.append('Sepia')
    l.append(imageName)
    imagePath = ''.join(l)
    return imagePath

def grayscale(pix, width, height):
    for col in range(width):
        for row in range(height):
            r,g,b = pix[col, row]
            avg = ((r + g + b) / 3)
            r = int(avg)
            g = int(avg)
            b = int(avg)
            pix[col, row] = r,g,b

def sepia(pix, width, height):
    for col in range(width):
        for row in range(height):
            r,g,b = pix[col, row]
            newR = (r * 0.393 + g * 0.769 + b * 0.189)
            newG = (r * 0.349 + g * 0.686 + b * 0.168)
            newB = (r * 0.272 + g * 0.534 + b * 0.131)
            pix[col, row] = int(newR),int(newG),int(newB)

imageName = input("Please input the full name of your image, including extension: ")
count = 0
imagePath= pathConstruction(count, imageName)
count = count + 1

img = Image.open(imagePath)
pix = img.load()
width, height = img.size

grayscale(pix, width, height)
sepia(pix, width, height)

imagePath = pathConstruction(count, imageName)
img.save(imagePath)
img.show() 
```

问题：如何在 Eclipse 之外运行该程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:41:18.730

我认为问题不在于您在目录和文件名之间看到的额外反斜杠（我认为它只是来自`repr`字符串的），而是`\r`最后添加的反斜杠。我不知道为什么你会把它包含在值中，但是你可以通过调用字符串`input`来删除它。`strip`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:34:49.950

只需使用内置的 os.path 模块。它将更简单，更可靠。

```
def pathConstruction(count, imageName):
    import os
    dir = "images"
    if count == 1:
        imageName = "Sepia" + imageName
    return os.path.join(dir, imageName) 
```

# ruby-on-rails-3 - 设计基于子域的应用程序，当在子域下找不到用户时重定向到默认虚拟主机？

> ID：13744710
> 
> 赞同：2
> 
> 时间：2012-12-06T13:32:31.163
> 
> 标签：ruby-on-rails-3, devise, subdomain

使用用户帐户作为子域构建设计 Rails 应用程序当用户访问的子域不存在时，我无法弄清楚如何重定向到默认 (default.domain.com) 子域。

例如：

*   user.domain.com 有效（用户存在于数据库中）
*   user2.domain.com 失败（用户不在数据库中），应重定向到 default.domain.com

如何实现？我使用下面的代码，但基于 Rails.env 的重定向进入了一个永无止境的循环:(

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  layout "application"
  before_filter :account

  def account
    @user     = User.where(:subdomain => request.subdomain).first || not_found
  end

  def not_found
      # next 2 lines is a temp solution--- >
      raise ActionController::RoutingError.new('User Not Found')
      return

      # --- > this below fails results in endless loop
      if Rails.env == "development"
        redirect_to "http://default.domain.dev:3000"
        return
      else
        redirect_to "http://default.domain.com"
      end
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T07:50:07.997

不确定是否会有一种特别好的方法来做到这一点，并且在没有看到大局的情况下在这里做出正确的判断并不容易，但是，也许您应该将默认域存储为某个地方的常量，然后在重定向之前检查它，打破循环，就像它一样！

像这样的东西会更好；

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  layout "application"
  before_filter :account

  def account
    @user = User.where(:subdomain => request.subdomain).first

    if @user.nil? and DEFAULT_URL =~ request.subdomain
      port = request.server_port == 80 ? '' : ":#{request.server_port}"
      redirect_to "http://#{DEFAULT_URL}#{port}"
    end
  end

end 
```

你明白了，你可以在初始化程序中设置 DEFAULT_URL ..

# algorithm - 矩阵中的路径数

> ID：13744727
> 
> 赞同：7
> 
> 时间：2012-12-06T13:33:36.293
> 
> 标签：algorithm, math, combinatorics

给定一个 `p x q`大小矩阵，`a x b`从右上角移除一个大小矩阵。找到总数。从左上角到右下角的路径，只允许向右和向下移动。任何路径都不应进入已删除的矩阵。

例如-

```
 _
|_|_
|_|_| 
```

这是从右上角`(2x2)`删除矩阵后的矩阵。`(1x1)`不。的方式 - `5`。

我能够找出路径的总数，但是我正在考虑消除进入已删除部分的路径的方法非常基本，因此效率不高。

那么，有没有更好的算法呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T13:50:24.217

您可以利用网格的结构：

正方形网格上从一个角到另一个角的路径数由帕斯卡三角形的网格大小给出：`(x+y) choose x`

每条路径必须在每条对角线上恰好穿过一个点。

取对角线上通过内角的所有点，计算通过每个点的路径数，然后求和。

这导致`O(min(p-a, q-b))`算法假设恒定时间算术。

在您的情况下：（到中心的两条路径）*（从中心的两条路径）+（通过拐角的一条路径）=（通过中心的四条路径）+（通过拐角的一条路径）=（五条路径）

```
+-+-+
| | |
+-+-A-+-+
| | | | |
+-B-+-+-+
| | | | |
C-+-+-+-+
| | | | |
+-+-+-+-+

  (1+2) choose 1 * (2+3) choose 2 (through A)
+ (2+1) choose 2 * (3+2) choose 3 (through B)
+ (3+0) choose 3 * (4+1) choose 4 (through C)

= 3 choose 1 * 5 choose 2
+ 3 choose 2 * 5 choose 3
+ 3 choose 3 * 5 choose 4

= 3*10
+ 3*10
+ 1*5

= 30+30+5 = 65 paths 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T13:40:12.363

对代表问题的[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph) ¹进行[拓扑排序。](http://en.wikipedia.org/wiki/Topological_sorting)

然后从最后一个（接收器）迭代到第一个（源）：

```
f(v) = Sum(f(u)) for each (v,u) in E
base: f(sink) = 1 
```

复杂性与图的大小成线性关系（每个顶点只迭代一次）（使用矩阵的维度`O(p*q-a*b)`）

* * *

(1) 图 G=(V,E) 为：

```
V = { (i,j) | for each i,j in the matrix that was not deleted }
E = { ((i1,j1),(i2,j2)) | (i1,j1) is to the left/up of (i2,j2) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T17:05:07.377

```
//assume we are moving from m,n to 1,1
int  numberOfPaths(int m, int n)
{
/*If the m,n  is left-bordered to the removed matrix, then move only downwards 
  till the end of removed matrix,then we can move in two directions*/
 //l1=numberOfrows(bigMatrix)-numberOfRows(smallMatrix), similarly l2 for columns
 if(m==l1&&n>=l2)
   return numberOfPaths(l1-1,l2+2)+numberOfPaths(l1,l2+1);
// If either given row number is first or given column number is first
if (m == 1 || n == 1)
    return 1;

 return  numberOfPaths(m-1, n) + numberOfPaths(m, n-1); 
} 
```

# c# - 如何检测当前用户的审核日志？

> ID：13744739
> 
> 赞同：3
> 
> 时间：2012-12-06T13:34:13.127
> 
> 标签：c#, asp.net-mvc, entity-framework, authentication, active-directory

我正在使用 Entity Framework 5。我们使用 Microsoft Active Directory 进行用户身份验证。我们正在使用适当的 n 层架构，因此在大多数情况下，业务层完全不知道 UI。

现在我们需要保留完整的审计跟踪：每次数据库上发生任何写操作时，我们都必须将其保存到审计日志中，以及进行更改的人。

抓写应该比较简单；我将`SaveChanges()`在我的数据上下文中覆盖并使用`ObjectStateManager`查找所有插入、更新和删除。真正的问题将是检测当前用户是谁，因为身份验证是在表示层上完成的，而业务层 DLL 将托管在 IIS 上，为任意数量的客户端进程提供服务。

是否有某种方法可以在业务层内部检测客户端使用的身份验证凭据？我绝对不想将用户 ID 传递给 API 中的每个接口！

（FWIW，我也在使用 EntityFramework.Extended，据说它具有一些本机 AuditLog 功能，但[文档](https://github.com/loresoft/EntityFramework.Extended/wiki/Audit-Log)严重不足。任何有任何成功使用此经验的人都可以帮助吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:46:09.340

如果您已经适当地配置了身份验证（例如表单或 Windows 身份验证），则`Thread.CurrentPrincipal`可以保证引用发出请求的用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:38:28.423

您可以考虑将最终用户的身份带外传递，而不是将其添加到每个方法签名中。

例如，如果您使用 WCF，您可以创建一个行为，在客户端注入自定义 SOAP 标头，并在服务器端处理自定义标头。

**更新**

对该问题的评论似乎暗示 DLL 是从 ASP.NET MVC 应用程序直接访问的，而不是通过 Web 服务。我从你的陈述中假设：

> 业务层 DLL 将托管在 IIS 上，为任意数量的客户端进程提供服务

它是从多个 ASP.NET MVC 应用程序调用的 Web 服务。

如果它只是包含在您的 ASP.NET MVC 应用程序中的一个 DLL，则非常简单。

*   `HttpContext.Current.User`将包含已连接客户端的身份。

*   而不是在业务层中使用 HttpContext，您应该确保将`Thread.CurrentPrincipal`其设置为与`HttpContext.Current.User`.

    如果您使用的是 ASP.NET `RoleProvider`，这将自动为您完成。如果没有，您可能需要手动完成，例如在 global.asax 中的 AuthorizeRequest 事件处理程序中。

然后在业务层中，您访问最终用户身份为`Thread.CurrentPrincipal.Identity.Name`.

# windows - 从 IIS 的命令行列出所有托管网站

> ID：13744744
> 
> 赞同：12
> 
> 时间：2012-12-06T13:34:38.227
> 
> 标签：windows, iis, command-line

我们如何从 IIS 的命令行中列出所有托管网站？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T13:52:26.983

您可能必须以管理员身份运行它。

```
appcmd list site 
```

直接来自[http://technet.microsoft.com/en-us/library/cc771280(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771280(v=ws.10).aspx)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-04-08T18:39:16.130

正如@WolfyUK 提到的，您可能需要从 inetsrv 目录运行命令。

**64位：**

```
%windir%\system32\inetsrv\appcmd.exe list site 
```

**32位：**

```
%windir%\syswow64\inetsrv\appcmd.exe list site 
```

list site 命令将列出所有站点，但您也可以：

**按名称列出单个站点：**

```
...\appcmd.exe list site /name:"<site_name>" 
```

**按元 ID（站点 ID 号）列出单个站点：**

```
...\appcmd.exe list site /id:<site_number> 
```

**列出所有虚拟目录：**

```
...\appcmd.exe list vdir 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-04T09:07:38.190

请尝试 power shell 脚本

获取 WebApplication

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-23T14:40:16.607

请尝试以下命令。它成功显示了 IIS 站点列表。

获取网站

# ios - iOS推送风格segue过渡

> ID：13744745
> 
> 赞同：5
> 
> 时间：2012-12-06T13:34:41.043
> 
> 标签：ios, uinavigationcontroller, navigation, styles, transition

我想在推送另一个视图控制器时更改导航视图控制器的“从右向左滑动”过渡。我在故事板中找到了一个选项，但它似乎不起作用。过渡风格还是一样的。通过单击情节提要中的目标视图控制器，我发现了这一点，尽管看起来过渡适用于模态样式 segue ：

![过渡](../Images/bff41de62f158a8ea9a2deac6f3a6912.png)

所以，我的问题是，是否有可能让 push 风格的 segue 过渡看起来不同？如果是这样，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T17:27:18.560

您可以在自定义 Segue 中使用 CATransition 来实现任何类型的转换。这是示例代码。

```
-(void)perform {

__block UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
__block UIViewController *destinationController = (UIViewController*)[self destinationViewController];                    

CATransition* transition = [CATransition animation];
transition.duration = .25;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionPush; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
transition.subtype = kCATransitionFromLeft; //kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromBottom

[sourceViewController.navigationController.view.layer addAnimation:transition
                                            forKey:kCATransition];

[sourceViewController.navigationController pushViewController:destinationController animated:NO];    

} 
```

您访问此链接了解更多详情[http://blog.jambura.com/2012/07/05/custom-segue-animation-left-to-right-using-catransition/](http://blog.jambura.com/2012/07/05/custom-segue-animation-left-to-right-using-catransition/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:39:03.330

为了进行推送转换，您需要使用 UINavigationController 连接您的视图。这些都是一次性转换的模态转换选项。

出于同样的原因，如果您已经在使用 UINavigationController，那么至少在情节提要中，除了推送之外，您不能使用任何东西。

我发现解决此限制的最简单方法是在代码中执行此操作，并在没有动画的情况下将推送包装在 UIView 动画或 CAAnimation 中。

# php - Kohana 引导错误

> ID：13744749
> 
> 赞同：0
> 
> 时间：2012-12-06T13:34:48.563
> 
> 标签：php, kohana

我已经上传了我的代码（使用 Kohana），但是我收到了这个错误，我不知道该怎么做。该文件的路径似乎正确。

```
Warning: require(/home/sites/xxxx.org/web/system/classes/kohana/core.php):
  failed to open stream: No such file or directory in
  /home/sites/xxx.org/web/application/bootstrap.php on line 6

Fatal error: require(): Failed opening required
  '/home/sites/xxx.org/web/system/classes/kohana/core.php'
  (include_path='.:/usr/share/php:/usr/share/pear') in 
  /home/sites/xxx.org/web/application/bootstrap.php on line 6 
```

# php - 在日期时间函数中获取错误信息

> ID：13744756
> 
> 赞同：1
> 
> 时间：2012-12-06T13:35:11.520
> 
> 标签：php, date

我认为这应该对我有用

```
$var = date('H:i');
echo $var; 
```

并使用该`date()`功能，我将获得印度的日期和时间。但是我已将`php.ini`文件中的设置更改为，`date.timezone = 'Asia/Kolkata'`但我的时间仍然错误。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:38:43.717

利用

> [`date_default_timezone_set`](http://php.net/manual/en/function.date-default-timezone-set.php)— 设置脚本中所有日期/时间函数使用的默认时区

```
$timezone = "Asia/Calcutta";
if(function_exists('date_default_timezone_set')){
   date_default_timezone_set($timezone);

   echo date('H:i')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:38:28.323

你用过吗

```
<?php
    date_default_timezone_set('Asia/Kolkata');
?> 
```

?

# c++ - 间接运算符的 C++ 标准描述是否保证不会优化内存写入？

> ID：13744760
> 
> 赞同：13
> 
> 时间：2012-12-06T13:35:37.113
> 
> 标签：c++, optimization, compiler-construction, compiler-optimization, indirection

这基本上是[这个问题](https://stackoverflow.com/q/13268657/57428)的延续。到目前为止，如果我有这样的功能，它看起来像这样：

```
void SecureZeroMemory( void* ptr, size_t cnt )
{
   volatile char *vptr = (volatile char *)ptr;
   while (cnt) {
       *vptr = 0;
       vptr++;
       cnt--;
   }
} 
```

并这样称呼它：

```
{
    char buffer[size];
    SecureZeroMemory( buffer, size );
} 
```

那么由于`buffer`没有声明为 volatile 使用指向 volatile 的指针并不重要 - 数据本身不是 volatile，因此写入变量不构成可观察的行为（1.9/6），并且允许编译器优化它们.

但是最近我遇到了一个声明，即只有指针声明才重要。特别是 C++03 5.3.1/1 描述了这样的间接（*）：

> 一元 * 运算符执行间接 [...] 如果表达式的类型是“指向 T 的指针”，则结果的类型是“T”。</p>

因此，声称是因为在`volatile char*`我们获取`volatile char`和写入的 a 上使用了间接性，它们确实构成了可观察的行为，并且如何声明实际数据不再重要。

C++03 5.3.1/1 对间接的描述是否真的保证使用`volatile T*`上面示例中的指针覆盖内存构成可观察的行为并且不允许被优化掉？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:51:04.963

我很确定所有“新”引用添加的`*vptr`是一个带有 type 的左值表达式`volatile char`。

左值的类型不会影响该左值表达式所引用的对象的类型，原因与指向非 const 对象的指向 const 的指针不会以某种方式使对象成为 const 的原因相同。因此，原始分析不会影响此引用 - 该*对象*仍然没有 volatile-qualified 类型。

用正常的说法，我们会说 的类型`*vptr`是`volatile char &`，但 5/5 说，“如果一个表达式最初的类型是“对 T 的引用”，那么在任何进一步分析之前，该类型都会被调整为 T ”。这就是为什么`*vptr`说有 type的原因`volatile char`，而不是`volatile char &`- 在分析任何表达式之前，您从类型中删除引用，即使它是左值。

[编辑：我的回答曾经有一些关于 cv-qualifications 对于整数类型的非对象值无关紧要的文本。这是真的（非类类型的左值到右值转换丢弃了 cv 限定符，4.1/1）但无关紧要（我错误地认为，因为你引用的文本提到了非引用类型，所以它在谈论之后的类型转换）]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T14:58:23.920

这是一个有趣的问题。我认为该标准的意图是这应该有效。然而，在阅读标准（C++03，§1.9/6,7）时：

> 抽象机的可观察行为是它对易失性数据的读取和写入顺序以及对库 I/O 函数的调用。
> 
> 访问由 volatile 左值指定的对象、修改对象、调用库 I/O 函数或调用执行任何这些操作的函数都是副作用，它们是执行环境状态的变化。表达式的评估可能会产生副作用。在被称为序列点的执行序列中的某些指定点处，先前评估的所有副作用都应是完整的，并且后续评估的副作用不应发生。

这两段中的措辞差异似乎很重要：“可观察行为”是读取和写入易失性*数据*的顺序。在您的情况下，*不是*`buffer`易 失性数据，因此编译器可能可以自由地优化访问。我不认为这是意图，但这似乎是它所说的。

 *在您的情况下，优化将特别简单，因为转换为 volatile 发生在函数本身中。编译器可以很容易地确定它`vptr`不指向实际易失的数据。如果将参数类型更改为`void volatile*`，则编译器必须同时查看调用站点和函数才能安全地进行优化。

最后，不管标准怎么说，编译器对`volatile`. 在实践中，如果不是所有编译器，大多数编译器都会假设您使用 `volatile`是有原因的，并且会生成机器指令来执行写入操作。（实际上，这就是他们要做的所有事情，这意味着写入在线程之外变得可见的顺序，线程正在运行的代码仍未定义。这对您的使用来说不是问题，但它是用于许多其他用途。）*

# haskell - 如果列表只有 True 值，则使用 foldl 返回 True，否则返回 false

> ID：13744761
> 
> 赞同：0
> 
> 时间：2012-12-06T13:35:38.640
> 
> 标签：haskell

这是我的代码：

```
boolTrueList :: [Bool] -> Bool
boolTrueList xs
  | length (filterFalse xs) > 0 = False
  | otherwise = True
  where
    filterFalse = filter (==False) 
```

这是完美的工作，但是我想用 foldr/foldl 重写同样的东西，但我被卡住了。

我的想法是折叠一个列表，直到我找到一个错误的值，然后停止。有什么提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T13:42:20.397

> 我的想法是折叠一个列表，直到我找到一个错误的值，然后停止。有什么提示吗？

如果你想提前停止，你必须使用`foldr`. `foldl`总是必须遍历整个列表（因此在无限列表上根本不起作用）。

所以你要

```
foldr combine default list 
```

这`default`是一个空列表的结果，它会在`True`这里。现在，我们想如何组合？

当`False`遇到 a 时，我们想立即返回 False，所以

```
combine False _ = False 
```

当值为 时`True`，我们必须继续，所以

```
combine True more = more 
```

换句话说，`combine = (&&)`，所以

```
boolTrueList = foldr (&&) True 
```

或者，甚至更短

```
boolTrueList = and 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T14:22:21.220

有一种思考折叠的方法，我发现它非常有用和直观（我可能在某处读过这个）。请注意，这可能不会导致最有效的解决方案，但我的关注点很明确。

不要将 fold 视为从列表中构建值的函数，而应将其视为在列表元素之间插入运算符的一种方式。当你这样做时，折叠就成为将列表转换为表达式的一种方式。例如，以下内容：

```
foldr op I [A,..,Z] 
```

将产生以下扩展：

```
A op .. op Z op I 
```

如果你将这种想法应用到你的问题上，你需要做的就是问问自己应该做什么，我要确保你只有在 A .. Z 为真时才得到真？作为提示，I 通常是关于 op 的标识元素（不会改变表达式的值，例如 0 表示加法）。

好吧，我们从逻辑上知道 and (&&) 只有当它的所有操作数都为真时才为真。同样，True 是关于 && 的标识元素。话虽如此，您的扩展将是：

```
A && .. && Z && True 
```

所以你的折叠将是：

```
foldr (&&) True [A,..,Z] 
```

这意味着您的功能将是：

```
boolTrueList x = foldr (&&) True x 
```

或者以更无点的风格：

```
boolTrueList = foldr (&&) True 
```

使用高阶函数来避免迭代是不够的，我们应该避免迭代的心态。考虑开放式表达式，而不是“在这一点上，这个值会传播”。通常情况下，迭代只是生成开放式表达式的低级方式，并且由于我们的语言迫使我们这样做，我们的思维方式经常停留在它上面，即使我们有允许我们思考表达式的语言等级。

# php - 将标头身份验证信息传递给 WSDL

> ID：13744762
> 
> 赞同：1
> 
> 时间：2012-12-06T13:35:45.597
> 
> 标签：php, web-services, soap, nusoap, soap-client

我的 SOAP WSDL 请求如下所示，

```
<?xml version="1.0" encoding="UTF-8"?> 
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Body><unit>3452</unit>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

但我已在 SOAP 标头上发送 HTTP 身份验证参数并从 SOAP 服务器捕获。

```
$client = new SoapClient("call.wsdl",array(
"trace"      => 1,
"exceptions" => 0,
"login" => 'xxxxx',
"password" => 'xxxx'));

$result = $client->getCALL($unit); 
```

我的 SOAP 身份验证参数已发送到服务器，但未显示在 SOAP 请求文本上。我需要在请求消息中看到它们。

我需要在 WSDL 文件中添加哪些类型的代码来获取请求文本，如下所示。

```
<?xml version="1.0" encoding="UTF-8"?> 
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
  <SOAP-ENV:Header>
    <Login>BonZ</Login>
    <Password>xxxx</Password>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body>
    <unit>3452</unit>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:16:18.620

```
$CREDENTIALS = 'Login:Password';
        $auth = base64_encode($CREDENTIALS);
        $context = array('http' =>
            array(
                'header'  => "Authorization: Basic ".$auth
            )
        );

$trac["stream_context"]=stream_context_create($context);
$client = new SoapClient("call.wsdl",array(
"trace"      => 1,
"exceptions" => 0,
"login" => 'xxxxx',
"password" => 'xxxx'
"stream_context"=>stream_context_create($context)
)); 
```

# ubuntu - gstreamer opencv 边缘检测

> ID：13744763
> 
> 赞同：3
> 
> 时间：2012-12-06T13:35:45.707
> 
> 标签：ubuntu, opencv, gstreamer

我想将 edgedetect 与 gstreamer 一起使用。我之前检查过gst-inspect。这是我的结果：

```
login@machine:~$ gst-inspect opencv
No such element or plugin 'opencv'
login@machine:~$ gst-inspect edgedetect
No such element or plugin 'edgedetect' 
```

安装的插件是：

```
sudo apt-cache show gstreamer1.0-plugins-bad | grep Version
Version: 1.0.3-1~ubuntu12.04.1~ppa1
Gstreamer-Version: 1.0 
```

“opencv”插件必须在插件坏。我可以使用插件坏中包含的其他插件启动 gst-inspect，但不能使用 opencv 或 edgedetect。

我尝试从源代码安装插件，没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-07-24T21:45:09.730

今天，如果您想使用[此处](https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-bad/html/gst-plugins-bad-plugins-plugin-opencv.html)和[此处](https://gstreamer.freedesktop.org/documentation/opencv/?gi-language=c)描述的 GStreamer OpenCV 插件，您只需要做的是：

```
sudo apt install gstreamer1.0-opencv 
```

如果您想检查`edgedetect`插件是否可用（以及其他插件）：

```
$ gst-inspect-1.0 edgedetect
Factory Details:
  Rank                     none (0)
  Long-name                edgedetect
  Klass                    Filter/Effect/Video
  Description              Performs canny edge detection on videos and images.
  Author                   Michael Sheldon <mike@mikeasoft.com>

Plugin Details:
  Name                     opencv
  Description              GStreamer OpenCV Plugins
  Filename                 /usr/lib/aarch64-linux-gnu/gstreamer-1.0/libgstopencv.so
  Version                  1.14.5
  License                  LGPL
  Source module            gst-plugins-bad
  Source release date      2019-05-29
  Binary package           GStreamer Bad Plugins (Ubuntu)
  Origin URL               https://launchpad.net/distros/ubuntu/+source/gst-plugins-bad1.0

GObject
 +----GInitiallyUnowned
       +----GstObject
             +----GstElement
                   +----GstBaseTransform
                         +----GstVideoFilter
                               +----GstOpencvVideoFilter
                                     +----GstEdgeDetect 
```

要测试它是否工作正常：

```
$ gst-launch-1.0 videotestsrc ! videoconvert ! edgedetect ! videoconvert ! xvimagesink 
```

它在我的带有 Jetpack 4.5.1 的 Jetson Nano 4Gb 上运行良好。

有关信息：

```
$ dpkg -L gstreamer1.0-opencv
/.
/usr
/usr/lib
/usr/lib/aarch64-linux-gnu
/usr/lib/aarch64-linux-gnu/gstreamer-1.0
/usr/lib/aarch64-linux-gnu/gstreamer-1.0/libgstopencv.so
/usr/share
/usr/share/doc
/usr/share/doc/gstreamer1.0-opencv
/usr/share/doc/gstreamer1.0-opencv/AUTHORS
/usr/share/doc/gstreamer1.0-opencv/NEWS.gz
/usr/share/doc/gstreamer1.0-opencv/README.Debian
/usr/share/doc/gstreamer1.0-opencv/README.gz
/usr/share/doc/gstreamer1.0-opencv/changelog.Debian.gz
/usr/share/doc/gstreamer1.0-opencv/copyright 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:36:21.150

debian/ubuntu 中的 gst-plugins-bad 包中缺少 opencv 元素。自己编译并将安装路径（类似`/usr/local/lib/gstreamer-0.10`）添加到 gstreamer 的搜索路径（例如使用 GST_PLUGIN_PATH 环境变量）

# mysql - 选择没有关系的记录

> ID：13744768
> 
> 赞同：3
> 
> 时间：2012-12-06T13:35:54.150
> 
> 标签：mysql

我有三张桌子

*   tbl_part - 包含零件的索引列表
*   tbl_product - 包含产品的索引列表
*   tbl_part_product - 包含零件和产品之间的关系。

我想选择所有与产品无关的部分，但有一些 20k+ 部分我的查询太慢了。有谁知道我如何做到这一点的更好方法？

```
SELECT * FROM tbl_part AS p
LEFT JOIN tbl_part_product AS pp ON pp.ref_part_id = p.part_id
WHERE pp.ref_part_id IS NULL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:39:10.897

听起来像一个 INDEX 问题，通过修改它，您的查询不会比现在更快。

如果你还没有索引`ref_part_id`，试试这个，它应该会加快你的查询速度：

```
ALTER TABLE tbl_part_product  ADD INDEX (ref_part_id); 
```

# bash - 连续串行数据流上的命令行编号操作

> ID：13744771
> 
> 赞同：2
> 
> 时间：2012-12-06T13:36:02.547
> 
> 标签：bash, serial-port, numbers

我在命令行中运行以下命令：

`prog1 | prog2`

上面的输出（比如**X**）是一个 4 位十六进制数，例如 FA34。 `prog1`是一个java程序，每100ms在串口上读取一次数据。`prog2`是`cut`删除我需要的部分的命令。这工作正常，我可以在标准输出上每 100 毫秒看到一次所需的值。

我想要的是：

`prog1 | prog2 | <convert X to decimal> | <multiply by 2>`

如何**在命令行中一次性**使用管道或不使用管道？

*注意：我编写了一个 bash 脚本来将 X 转换为十进制并乘以 2。但是我无法将 X 作为参数直接输入到我的脚本中。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:58:13.117

```
prog1 | prog2 | xargs -I ^ printf "%d * 2\n" 0x^ | bc 
```

解释：

print 与 %d 将其转换为十进制， bc 进行乘法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:29:14.567

这是一个有趣的可能性：

```
{ echo "iscale=16"; prog1 | prog2; } | sed 's/$/*2/' | bc 
```

这`iscale=16`首先回显（告诉`bc`考虑用户在基数 16 中的输入）。然后`sed`附加`*2`到每一行，所有这些都通过 bc 转换为十进制并乘以 2。

有一个限制：您的程序`prog2`必须以大写形式输出所有十六进制数字（例如`FA34`not `fa34`）。如果这是一个限制，请使用：

```
{ echo "iscale=16"; prog1 | prog2; } | sed 's/\(.*\)/\U\1*2/g' | bc 
```

反而。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:02:18.940

要在管道中执行此操作，您可以使用`perl`：

```
 prog1 | prog2 | perl -ne 'printf ("%d\n",(hex "$_")*2);' 
```

这会遍历 prog2（-n 选项）的 ouptut 行并从 hex ( `hex "$_"`) 重新格式化，并在输出为十进制之前乘以 2。

**编辑**

您可能需要清除标准输出缓冲区，在 perl 中您可以使用 '$|++' 执行此操作：

```
 prog1 | prog2 | perl -e '$|++; while(<STDIN>) { chomp; printf ("%d\n",(hex "$_")*2); }' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:53:44.247

这会将 prog2 的输出读取到变量 v，然后将其转换为十进制（使用基本符号`16#v`）并乘以 2。

```
prog1 | prog2 | ( read v ; let v=16#$v*2 ; echo $v ) 
```

如果流包含多个数字，则将最后一部分更改为

```
( while read v ; do let v=16#$v*2 ; echo $v ; done ) 
```

# java - 爪哇。使用 URL 创建 FileOutputStream

> ID：13744774
> 
> 赞同：0
> 
> 时间：2012-12-06T13:36:05.497
> 
> 标签：java

我有`URL`从 获取的对象，`ServletContext#getResource()`我想使用该`URL`对象覆盖现有文件（使用`FileOuputStream`）。

*如何使用 URL 对象创建新`FileOutputStream`对象？*

`FileOuputStream(URL.toURI())`- 没有帮助，因为此 URI 的方案组件是“http”，而不是“文件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:38:19.373

你不能，因为 a`FileOutputStream`需要一个文件。而不是`getResource()`您可以尝试使用`getRealPath()`，它将为您提供文件的真实磁盘路径，而不是不透明的 URL。

但请记住，这仅在您的应用程序从扩展目录结构运行时才有效，而不是直接从 WAR 文件运行时。如果您想要一个也适用于后一种情况的解决方案，那么您需要重新考虑您的架构，也许将需要修改的文件存储在 webapp 之外的不同目录中。

# java - 将 Intellij-Idea UI 表单导出到 Eclipse

> ID：13744779
> 
> 赞同：10
> 
> 时间：2012-12-06T13:36:27.990
> 
> 标签：java, eclipse, intellij-idea

我有一个 Java 项目要为 Class 做。所以我决定使用 Inltellij-Idea 中的 Designer 来帮助我快速完成表单和窗口，并有更多时间开发应用程序。

我面临的问题是老师使用 Eclipse，所以我认为在开发结束时我可以导出我的 Intellij-Idea 项目（UI 和类）以使其在 Eclipse 上运行。

我导出类没有问题，但是 .form 文件呢？如何在我的代码中引用它们，以便 eclipse 项目可以是 Buildable ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T13:45:38.613

您可以使用`File`| `Settings`| `GUI Designer`| `Generate GUI into`：**Java源代码**。

重建项目，将从`.form`文件中生成源代码。现在您的应用程序可以在任何 IDE 中编译。不要忘记添加对`forms_rt.jar`文件的依赖项（将其与项目捆绑在一起）。`IDEA_HOME\redist\forms_rt.jar`使用 GUI Designer ( )时需要编译和运行您的应用程序。

# visual-studio-2012 - Visual Studio 2012 的 Intellisense 不再接受按空格键的建议

> ID：13744780
> 
> 赞同：7
> 
> 时间：2012-12-06T13:36:43.910
> 
> 标签：visual-studio-2012, intellisense

我一直在多台 PC 上使用 Visual Studio 2005、2008、2010，由其他人或我安装在那里。总是对它的智能感知建议是这样工作的：

我开始输入，弹出带有建议的窗口，当前建议突出显示，我可以按空格键接受建议。

但是，由于我在我当前的 PC 上安装了 Visual Studio 2012（它是一个相对较新的 Win7 64x 安装，之前安装了 VS2010）它的工作方式不同。

现在，它不再突出显示该建议。我必须使用 CTRL+ENTER 来接受建议或 DOWN 来选择它，以便空格键接受它。这个用起来真的很不方便。

我尝试重置我的设置（工具 -> 导入和导出设置 -> 重置设置），但没有帮助。它试图寻求帮助，但似乎没有人知道或有这个问题。

我究竟做错了什么？如何恢复旧行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:27:02.043

您是否在编辑 | 中选择了**切换完成模式？**智能感知菜单？如果是这样，请单击它以取消选择它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T00:30:24.370

![](../Images/effea6faedd5aff59149846f5d320a46.png)

我有同样的问题。我知道这至少在我使用 Java Script 时对我有用。转到**工具>选项>文本编辑器>JavaScript>IntelliSense**然后确保“仅使用 Tab 或 Enter 提交”已选中。希望这会有所帮助，或者至少让您走上正轨。

# wpf - 列表框绑定问题

> ID：13744781
> 
> 赞同：1
> 
> 时间：2012-12-06T13:36:57.770
> 
> 标签：wpf, windows-phone-7, xaml, data-binding

我遇到了绑定问题，我正在关注这个例子： http: [//listboxwthcheckboxes.codeplex.com/](http://listboxwthcheckboxes.codeplex.com/)

现在的简单问题是，示例已成功将列表框绑定到 ViewModelSampleData.xaml（在 sampleData 目录中）。但是这个绑定只有在我在设计视图中查看时才会出现。当我运行应用程序时，会出现一个由代码生成的新运行时数据。就我而言，这适得其反。我的应用程序可以简单地显示 xaml 数据。我知道它必须与这些线条有关。

```
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
d:DataContext="{d:DesignData SampleData/ViewModelSampleData.xaml}" 
```

你能解释一下我能做些什么来纠正这个吗？并给我一两个链接，帮助我了解冒号的用途以及如何替换使此 DataContext 与运行时使用的相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:42:36.153

`d:`命名空间仅对设计模式有效。

对于运行时模式，您必须绑定`DataContext`没有`d:`：

```
 DataContext="{Binding ...}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:11:08.947

作为初学者，我建议您遵循直接的数据绑定方法，而不是复杂的 MVVM 方法。

检查此链接[以通过代码将数据绑定到 ListBox](http://blogs.msdn.com/b/wriju/archive/2011/07/25/windows-phone-7-binding-data-to-listbox-through-code.aspx)

而这个[ListBox 数据绑定](http://3water.wordpress.com/2010/07/25/listbox-on-wp7/)也

# c# - 如何转换列表 使用 T 属性作为键，其余属性作为 List 进入 Dictionary<>

> ID：13744784
> 
> 赞同：0
> 
> 时间：2012-12-06T13:37:12.843
> 
> 标签：c#, linq, list, properties, dictionary

我有一`Product`堂课：

```
class Product
{
    public string Name { get; set; }
    public DateTime ProductionDate { get; set; }
    public int CategoryId { get; set; }
} 
```

如果我有一个`List<Product>`and 我想`GroupBy`通过`ProductionDate`and `CategoryId`。我愿意：

```
List<Product> products = GetAllProducts();

var groupedProducts = products.Groupby(p => new { p.ProductionDate, p.CategoryId })
                              .Select(pgroup => new {
                                                  prodDate = pgroup.Key.ProductionDate.ToString(),
                                                  categoryId = pgroup.Key.CategoryId.ToString(),
                                                  amount = pgroup.Count() 
                                                }); 
```

对于每一个`categoryId`，我都想知道`products`在特定的`prodDate`. 所以我创建了一个`Dictionary`对象，对于每个`categoryId`键，我存储`prodDate`和`amount`。对象是一个`Dictionary<string, List<Data>>`with

```
class Data
{
     public string xValue { get; set; }
     public string yValue { get; set; }
} 
```

为此，我尝试了：

```
Dictionary<string, List<Data>> productsPerPeriodPerCategory = new Dictionary<string, List<Data>>();
productsPerPeriodPerCategory = groupedProducts
                               .ToDictionary(p => p.categoryId, 
                                             p => new List<Data>().AddRange(
                                                  groupedProducts.Where(g => g.categoryId == p.categoryId)
                                                                 .Select(x => new Data()
                                                                    {
                                                                       xValue = x.prodDate,
                                                                       yValue = x.amount.ToString()
                                                                    }).ToList())); 
```

但它给了我以下错误：

```
Cannot convert lambda expression to type 'System.Collections.Generic.IEqualityComparer<string>' because it is not a delegate type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:45:48.203

我认为问题在于`AddRange`不返回列表，并且您已经分组，因此不需要`Where`.

这应该足够了：

```
productsPerPeriodPerCategory = groupedProducts
           .ToDictionary(p => p.categoryId, 
                         p => p.Select(x =>  new Data()
                                             {
                                                 xValue = x.prodDate,
                                                 yValue = x.amount.ToString()
                                             }).ToList()); 
```

如果您不需要中间组，您也可以在 1 步中完成所有操作

```
List<Product> products = GetAllProducts();
var groupedProducts = products.Groupby(p => new { p.ProductionDate, p.CategoryId })  
                          .ToDictionary(
                               x => x.Key.CategoryId,
                               x => new Data()
                                     { 
                                         xValue = x.Key.ProductionDate.ToString(),
                                         yValue = x.Count().ToString()
                                     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:52:06.143

试试这个：

```
productsPerPeriodPerCategory =
        groupedProducts
            .GroupBy(p => p.categoryId)
            .ToDictionary(
                g => g.Key,
                g =>
                g.Select(
                    r =>
                    new Data {xValue = r.prodDate, yValue = r.amount.ToString()})); 
```

# assembly - 将一个寄存器的内容移动到另一个寄存器

> ID：13744785
> 
> 赞同：0
> 
> 时间：2012-12-06T13:37:16.693
> 
> 标签：assembly, arm, move, cpu-registers, lpc

这是我的定义：

```
/* General Purpose Input/Output (GPIO) */
#define IOPIN          (*((volatile unsigned long *) 0xE0028000))
#define IOSET          (*((volatile unsigned long *) 0xE0028004))
#define IODIR          (*((volatile unsigned long *) 0xE0028008))
#define IOCLR          (*((volatile unsigned long *) 0xE002800C)) 
```

* * *

代码：

```
void put_on_other_port (void) {
asm("LDR R0, 0x00000080");
asm("STR R0, [0x00100000]");
} 
```

我正在为 LPC2148 编程，我正在尝试编写 ARM 汇编代码以将 P0.7 的内容移动到 P0.20。我对汇编语法一点也不熟悉，所以当我尝试修复这段代码时会遇到各种编译错误。如何轻松地将 P0.7 的位移动到 P0.20（在汇编代码中）？

* * *

在 C 代码中试过这个：

```
IODIR |= 0x00100000;
.
.
.
if (IOPIN & 0x00000080)
            IOSET = 0x00100000;
        else
            IOCLR = 0x00100000; 
```

但也没有用..在 P0.20 上没有得到任何输出。

* * *

尝试在 C 代码中模拟 PWM：

```
IODIR |= 0x00100000;
.
.
.
int i;

IOSET = 0x00100000;
for (i = 0; i < 10000; i++);

IOCLR = 0x00100000;
for (i = 0; i < 10000; i++); 
```

* * *

尝试无条件设置P0.20的值：

```
//IOSET = 0x00100000;    // commenting out to toggle between setting and clearing
IOCLR = 0x00100000; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:32:48.517

在 LPC2148 上，IO0SET 位于地址 0xE0028004，IO0CLR 位于地址 0xE002800C，IO0PIN 位于 0xE0028000。

这是一个组装解决方案，有很多方法可以做到这一点。

```
.globl copy_gpio_pin_state
copy_gpio_pin_state:
  ldr r0,=0xE0028000
  mov r2,#0x00100000
  ldr r1,[r0,#0x00]
  tst r1,#0x80
  streq r2,[r0,#0x0C]
  strne r2,[r0,#0x04]
  bx lr 
```

用 as 组装这个

```
arm-whatever-as copy.s -o copy.o 
```

然后从你的 C 代码中调用它

```
void copy_gpio_pin_state ( void );
...
copy_gpio_pin_state(); 
```

并将其链接或添加到 gcc（gcc 会将其传递给链接器）

```
arm-whatever-gcc myprog.c copy.o -o ...
or
arm-whatever-ld ... myprog.o copy.o -o ... 
```

您还可以轻松地为两者传递密码（掩码更好）并使其可重复使用。

真正的汇编比内联容易得多，要弄清楚如何正确地将真正的汇编转换为内联汇编是一个更长的研究项目（对于每个编译器和可能的版本，因为它会有所不同，汇编语言往往更具可移植性）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:52:09.280

我意识到为什么我不能做我想做的事。我将引脚/端口与寄存器混淆了。我想我要做的只是简单地将 to 的输出连接起来`P0.7`（`P0.20`这可能通过将值传递给工作寄存器来实现）但是我的老师向我解释了`PINSEL`用于选择给定端口的功能以及某些功能（例如PWM）只能绑定到指定的寄存器（在`PINSEL`LPC2xxx 手册中的表格中找到。

# excel - 从 Excel 剪切和粘贴到 Word 时出现 RPC_E_WRONG_THREAD 错误

> ID：13744786
> 
> 赞同：0
> 
> 时间：2012-12-06T13:37:17.243
> 
> 标签：excel, com, ms-word, vsto

我使用 Visual Studio 2010 为 Microsoft Excel 2007 和 2010 开发了一个插件。

它在安装了它的所有计算机（在 Windows XP 和 Windows 7 上）上都能正常工作，除了一台装有 Windows 7 和 Office 2010 的机器。

当加载项尝试自动化 Microsoft Word 2010 以创建新文档并将 Excel 工作簿中的信息复制/粘贴到其中时，将显示以下消息：

*无法将类型为“Microsoft.Office.Interop.Word.DocumentClass”的 COM 对象转换为接口类型“Microsoft.Office.Interop.Word._Document”。此操作失败，因为 IID 为“{0002096B-00000-0000-C000-0000000000046}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：应用程序调用了为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）。*

我的程序循环遍历 Excel 工作簿的工作表并将它们复制到 Word 文档中。该错误发生在几个循环之后，当使用 Range.CopyPicture 方法将 Excel 范围复制到剪贴板时，当我尝试访问我的 Word 应用程序时会引发 RPC_E_WRONG_THREAD 错误。我不使用多个线程。

有人似乎有同样的问题，但尚未提供答案： http: [//social.msdn.microsoft.com/Forums/en/vsto/thread/86abd253-9fb5-46cf-8565-dc2eaa02593b](http://social.msdn.microsoft.com/Forums/en/vsto/thread/86abd253-9fb5-46cf-8565-dc2eaa02593b)

用户具有管理权限，他尝试修复 MS Office 2010 安装，并再次卸载/安装它，但没有解决问题。在他的计算机上安装 Office 2007 后，该加载项在 Excel 2007 中运行良好，但在 Excel 2010 中仍然无法正常运行。

你有没有见过这个错误，你知道如何解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:15:20.897

您实际上没有 Word.Document 对象，Word.Document 只是一个接口。Word._Document 是 Word.Document 接口的实现（因此是您将在调试和异常中看到的类型）。

知道 Word.Document 只是一个接口：

> 当线程通过接口指针调用不属于线程单元的代理对象时，会发生 RPC_E_WRONG_THREAD 错误。

[http://support.microsoft.com/kb/172314](http://support.microsoft.com/kb/172314)

如果没有代码示例，我真的无法告诉您更多信息，但我希望这可以帮助您找到问题所在。

编辑：

实际上，查看您发布的链接，我建议您在将其放入 Word**之前**，从与 Excel 相关的任何 COM 对象中刮取所有要复制/粘贴到 Word 文档中的数据。我知道这意味着需要额外的工作来实现正确的格式/表格，但是 Office COM 有很多问题（例如数据绑定），从长远来看它可能更稳定/更少麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T00:40:42.840

据我所知，Word 应用程序和 Excel 应用程序不能在同一个进程中运行。因此，如果您同时使用 Excel 工作表和 Word 文档，则必须使用来自两个进程的对象，因此必须使用两个不同的线程（每个进程都有自己的一组线程）。

但是，如果您不创建线程，COM 将保护您不使用错误单元内的对象。例如，如果您的代码创建了一个新的 Word 文档，那么您对这个对象（位于不同的进程中）的访问将通过一个自动创建的代理对象来完成。如果您通过 Word 文档代理访问其他对象，则会创建其他代理对象。这一切都发生在你甚至没有注意到它的情况下。出乎意料的是，我会说你不可能做错了什么。

我会尝试找到一个显示此行为的最小示例并将其发布在此处。如果没有一些额外的信息，很难说你可能在哪里出错了。但我必须警告你，你可能无法为你的问题找到解决方案。我用 Excel 和自动化做了一些非常严肃的事情，我在 Excel 中发现了一些非常严重的错误，需要非常黑客的解决方法。这些错误自 2005 年以来一直没有得到修复，这一事实让我相信微软对办公自动化并不感兴趣。似乎您又发现了一个错误。

问候，斯图尔特

PS：我不想将其作为答案发送，但显然我必须获得更多声望点才能发表评论。随便。

# ruby-on-rails - 如何捕捉rails中的错误？

> ID：13744790
> 
> 赞同：0
> 
> 时间：2012-12-06T13:37:24.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我在heroku中有一个rails应用程序。这些值被传递到服务器并且它可以正常工作，有时它会显示一个错误，例如

```
<!DOCTYPE html> <html> <head>   <title>We're sorry, but something went wrong (500)</title>   <style type="text/css">
    body { background-color: #fff; color: #666; text-align: center; font-family: arial, sans-serif; }
    div.dialog {
      width: 25em;
      padding: 0 4em;
      margin: 4em auto 0 auto;
      border: 1px solid #ccc;
      border-right-color: #999;
      border-bottom-color: #999;
    }
    h1 { font-size: 100%; color: #f00; line-height: 1.5em; }   </style> </head>

<body>   <!-- This file lives in public/500.html -->   <div class="dialog">
    <h1>We're sorry, but something went wrong.</h1>
    <p>We've been notified about this issue and we'll take a look at it shortly.</p>   </div> </body> </html> 
```

所以我不想这样得到这些错误。相反，我想得到这些错误并`unexpected error`在应用程序中显示类似 json 的内容。我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:50:20.960

Add the following code in application_controller.rb

```
rescue_from "ActiveRecord::RecordNotFound" do |exception|
   render :json => {:error => 'page not found' }
end 
```

Similarly you can add all Exceptions you need in rescue_from method

```
rescue_from "Exception" do |exception|
 render :json => {:error => 'Unexpected error occurred' }
end 
```

# android - 访问用户字典android

> ID：13744792
> 
> 赞同：2
> 
> 时间：2012-12-06T13:37:33.157
> 
> 标签：android, dictionary, android-contentprovider

嗨，这是我从用户词典中获取单词的代码。这是我的代码，但我无法运行它...

```
private String getwordlist() {

        String[] mSelectionArgs={""};

    String[] mProjection ={UserDictionary.Words._ID, UserDictionary.Words.WORD, UserDictionary.Words.FREQUENCY};
    String mSelectionClause = null;

    String mSortOrder = null;

     mCursor = getContentResolver().query(
            UserDictionary.Words.CONTENT_URI,  // The content URI of the words table
            mProjection,                       // The columns to return for each row
            mSelectionClause,                // Either null, or the word the user entered
            mSelectionArgs,                    // Either empty, or the string the user entered
            mSortOrder);                      // The sort order for the returned rows

     if (mCursor.moveToFirst()) {            
            do {             
               String id = mCursor.getString(mCursor.getColumnIndex(UserDictionary.Words._ID));          
               String word = mCursor.getString(mCursor.getColumnIndex(UserDictionary.Words.WORD));
               String freq= mCursor.getString(mCursor.getColumnIndex(UserDictionary.Words.FREQUENCY));
               str=str+" id: "+id+"  word: "+"  frequency: "+freq+"\n";
               System.out.println(str);
            } while(mCursor.moveToNext());
            return str;
     }
     return null;        
} 
```

我收到错误

```
12-06 18:49:58.586: E/AndroidRuntime(17174): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.myfirstapp/com.example.myfirstapp.ScrollView}: java.lang.IllegalArgumentException: Cannot bind argument at index 1 because the index is out of range.  The statement has 0 parameters. 
```

这是什么错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:58:54.217

似乎当 mSelectionClause 为空时， mSelectionArgs 也需要为空。

```
// If the word is the empty string, gets everything
if (TextUtils.isEmpty(searchWord)) {
    // Setting the selection clause to null will return all words
    mSelectionClause = null;
    mSelectionArgs = null;
} else {
    // Constructs a selection clause that matches the word that the user entered
    mSelectionClause = UserDictionary.Words.WORD + " = ?";
    // Moves the user's input to the selection arguments
    mSelectionArgs = new String[] {searchWord};
}

// Does a query against the table and returns a Cursor object
Cursor cursor = getContentResolver().query(
    UserDictionary.Words.CONTENT_URI, // The content URI of the words table
    mProjection,                      // The columns to return for each row
    mSelectionClause,                 // Either null, or the word the user entered
    mSelectionArgs,                   // Either empty, or the string the user entered
    null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T16:28:32.903

我认为您的 do while 循环有缺陷。Content Provider 的开发人员文档 ( [http://developer.android.com/guide/topics/providers/content-provider-basics.html#AltForms](http://developer.android.com/guide/topics/providers/content-provider-basics.html#AltForms) ) 提供了以下示例代码：

```
/*
 * Only executes if the cursor is valid. The User Dictionary Provider returns null if
 * an internal error occurs. Other providers may throw an Exception instead of returning null.
 */

if (mCursor != null) {
    /*
     * Moves to the next row in the cursor. Before the first movement in the cursor, the
     * "row pointer" is -1, and if you try to retrieve data at that position you will get an
     * exception.
     */
     while (mCursor.moveToNext()) {

        // Gets the value from the column.
        newWord = mCursor.getString(index);

        // Insert code here to process the retrieved word.

        ...

        // end of while loop
    }
} else {

    // Insert code here to report an error if the cursor is null or the provider threw an exception.
} 
```

你能试着用这个逻辑来修改你的代码吗？

# python - 如何让我的代码更 Pythonic？

> ID：13744796
> 
> 赞同：1
> 
> 时间：2012-12-06T13:37:49.783
> 
> 标签：python

我需要将一些字母替换为带有数字的列表（每个字母都编码为一个数字）。我使用了这个结构：

```
r = []
for x in some_list:
    if x in "ABCDE":
        r.append({"A":10, "B":20, "C":30, "D":40, "E":50}[x])
    else:
        r.append(int(x)) # convert string digit to digit
some_list = r 
```

（some_list 在此代码中是可变的）。

我想问一下python中是否有一些更紧凑的结构（更少的代码）可以使这种编码和运行得更快。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T13:41:18.917

怎么样

```
d = {"A":10, "B":20, "C":30, "D":40, "E":50}
some_list = [int(d.get(x, x)) for x in some_list] 
```

编写该列表理解的其他方法包括：

```
some_list = [d.get(x) or int(x) for x in some_list]
some_list = [d[x] if x in d else int(x) for x in some_list] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:46:39.573

您可以将每个字符映射到一个数字

```
l=[(ord(x)-ord('A')+1)*10 if x in 'ABCDE' else int(x) for x in some_list] 
```

在更一般的情况下，您应用某些将字符转换为字母的函数

```
def f(c):
    if c in 'ABCDE':
        return (ord(c)-ord('A')+1)*10
    return int(c)

l=[f(x) for x in some_list] 
```

# android - 带有列表导航的Android ActionBar：在配置更改期间保存所选项目的位置？

> ID：13744799
> 
> 赞同：4
> 
> 时间：2012-12-06T13:38:04.763
> 
> 标签：android

我有一个带有列表导航模式的 ActionBar。问题是从导航微调器中选择项目后，当屏幕方向更改时，导航微调器选择的索引重置为 0。

如何在配置更改期间保留微调器的选定索引？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:22:15.320

您应该覆盖`onSaveInstanceState`并保存选定的导航列表位置以捆绑。不要忘记恢复位置`onCreate`。

看下面的例子：

```
public class MainActivity
{

    private static final String CURRENT_FRAGMENT_TAG = "fragmentPosition";

    @Inject @Named("navigationFragments")
    private Provider<? extends Fragment>[] fragmentProviders;

    @Override
    protected void onCreate(Bundle bundle)
    {
        super.onCreate(bundle);

        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        actionBar.setListNavigationCallbacks(ArrayAdapter.createFromResource(
            this, R.array.navigation_menu, android.R.layout.simple_list_item_1), new ActionBar.OnNavigationListener()
        {
            @Override
            public boolean onNavigationItemSelected(int itemPosition, long itemId)
            {
                final String fragmentTag = "fragment-" + itemPosition;

                // to prevent fragment re-selection and loosing early saved state
                if (getSupportFragmentManager().findFragmentByTag(fragmentTag) != null)
                {
                    return true;
                }

                final Fragment fragment = fragmentProviders[itemPosition].get();
                getSupportFragmentManager().beginTransaction().
                    replace(android.R.id.content, fragment, fragmentTag).
                    commit();
                return true;
            }
        });
        actionBar.setSelectedNavigationItem(bundle != null
            ? bundle.getInt(CURRENT_FRAGMENT_TAG)
            : 0);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);
        outState.putInt(CURRENT_FRAGMENT_TAG, getSupportActionBar().getSelectedNavigationIndex());
    }

    /*

        Additional stuff here

     */

} 
```

`Provider<? extends Fragment>[] fragmentProviders`是创建新片段的工厂方法对象的列表。如果您不使用[actionbarsherlock](http://actionbarsherlock.com/) ，请替换`getSupportActionBar()`to`getActionBar()`和`getSupportFragmentManager()`to`getFragmentManager()`

# php - 带有额外字段的 Yii 关系 3 表

> ID：13744804
> 
> 赞同：0
> 
> 时间：2012-12-06T13:38:31.240
> 
> 标签：php, yii

嗨，我是 yii 开发的新手。我有 3 张桌子。表 A,AB,B 其中 A 是一个表，AB 是包含表 A 和 B 的 FK 的中间表，B 是另一个表。我的模型中有关系函数。

```
/**
 * @return array relational rules.
 */
public function relations()
{
    return array(
        "AB"=>array(self::MANY_MANY,"AB(my model)","AB(A_id,B_id)"),
    );
} 
```

这很好用，但是现在我想在表 AB 中放置一个订单字段，该字段将用作名为 ord 的排序字段，以便以我预定义的方式对关系 AB 进行排序。

有没有人尝试过这样的事情或对如何做到这一点有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:37:52.820

对不起，我误解了你的问题。最简单的方法是使用 CDbCriteria (http://www.yiiframework.com/doc/api/1.1/CDbCriteria)，您可以使用它创建复杂的 sql 查询。

我不知道确切的情况，但是您的解决方案将类似于

```
$criteria = new CDbCriteria(); 
$criteria->select = "x"; 
$criteria->alias = "tableA"; // creates a "...From table_A AS tableA..."
$criteria->join = "LEFT JOIN A_B AS tableAB ON tableA.A=tableAB.A"; 
$models = YourModel::model()->findAll($criteria); 
```

网络上到处都是这样的东西，只需 google mysql join 或 yii join。

希望有帮助

# networking - 检查下载/上传速度，但使用外部 IP 地址

> ID：13744807
> 
> 赞同：0
> 
> 时间：2012-12-06T13:38:43.247
> 
> 标签：networking, ip

是否有任何实用程序可以检查外部 IP 地址提供的下载速度和上传速度？我试过 iftop 但它不会在我的 Mac 上使用 brew 安装。我需要检查外部服务器可以提供的最大下载速度和上传速度。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:33:39.077

我怀疑你可以做这样的事情（如果你无权访问服务器并且你不能在那里安装任何东西）。

你总是可以尝试向服务器发送一些东西（检查它的上传速度）或尝试下载一些东西（检查下载速度）。

无论如何，我不会转述这种方法。由于您不知道服务器的负载（有多少用户正在下载/上传某些内容），因此猜测会非常不准确。更重要的是，您受到自己的下载/上传速度限制的限制，并且在大多数情况下，这些限制远大于服务器限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T15:38:06.193

显然，Digital Element 的 NetAcuity 可以做到这一点，尽管价格很高。根据他们的[维基百科页面](http://en.wikipedia.org/wiki/Digital_Element)：

> NetAcuity 仅根据其 IP 地址揭示有关在线用户的地理信息、连接速度、域名、互联网服务提供商 (ISP)、语言和其他特征

他们的网站也提出了同样的主张。

# wpf - WPF 命令与事件触发命令

> ID：13744819
> 
> 赞同：4
> 
> 时间：2012-12-06T13:39:38.523
> 
> 标签：wpf, button, eventtrigger, icommand

在 WPF`Button`中，我们有一个`Command`可以绑定到`ICommand`.

```
<Button Command="{Binding SomeCommand}"/> 
```

我们也可以使用`EventTriggers`with`InvokeCommandAction`来触发`ICommand`.

```
<Button>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <i:InvokeCommandAction Command="{Binding SomeCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

它们之间有什么区别以及何时使用哪个？

更新：

我注意到以下情况的不同之处：

*   我有一个文本框，如果文本框为空，则使用 IValudationRule 进行验证。
*   我添加了 MultiDataTrigger 条件，以便在 Validation.HasError 等于 true 时将保存按钮的 IsEnabled 属性设置为 false。

使用按钮命令一切正常，但使用 EventTrigger 则不起作用。

这有什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:46:40.010

您提供的代码片段几乎相同，如果您不使用`CanExecute`. `InvokeCommandAction`不是本机`WPF`类，它是在`Interaction`库中创建的，用于不提供控件`Command`并且您必须将 Command 绑定到某个事件的情况。例如，当您需要打开命令`ListBox.SelectionChanged`等时。

因此，基于上述，我的建议是，如果可能，请始终使用 Command，并且`EventTrigger`仅在不能没有它的情况下使用。

另请注意，`ICommand`还提供`CanExecute`基于哪个按钮可以启用/禁用，这在第二种情况下不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:47:32.347

有一点不同（CanExecute），但除此之外，这只是代码的哪一部分为您订阅事件/命令的问题。An`ICommand`暴露了`Execute`and`CanExecute`方法，所以...

`ButtonBase`的 Command 属性将自动将 Click 事件中继到命令的 Execute 事件，并根据命令的 CanExecute 被引发更改它的禁用/已启用属性...在幕后（您不必担心连线）。

该`Interaction`库做同样的事情，但公开了各种类，以允许您以简单的方式“构建”您自己的连线。您基本上是在创建几个类，它们说“连接*事件名称*(ButtonBase.Click) 事件以调用*指定命令*(SomeCommand) 的 ICommand.Execute 方法”。

事实上，如果你放弃这两个选项，你甚至可以在代码隐藏中推出自己的选项......但话又说回来，当它以很好的方式提供时（除了学习它是如何工作的）没有意义，干净，引擎盖下的方式，单元测试，优化的方式？

# c++ - C++ 非整数模板常量初始化预期在 ClassName 之前的 init-declarator

> ID：13744823
> 
> 赞同：1
> 
> 时间：2012-12-06T13:40:04.140
> 
> 标签：c++, g++, initialization, constants, integral

我正在尝试初始化非整数模板常量。

请在下面找到代码：

```
#ifndef _EXETENDED_CLASS_H
#define _EXETENDED_CLASS_H

template<class T>
class BaseClass
{
            public:
                   BaseClass();
                   ~BaseClass();

};

template <class T>
BaseClass<T>::BaseClass()
{}

template <class T>
BaseClass<T>::~BaseClass()
{}

template<class T>
class ExtendedClass:public BaseClass<T>
{
            public:
                   typedef ExtendedClass<T>* position;
                   static const position NULLPOSITION;

                   ExtendedClass();
                   ~ExtendedClass();

           private:

                   position _successivo; 
};

template<class T>
const  ExtendedClass<T>::position ExtendedClass<T>::NULLPOSITION = 0;

template <class T>
ExtendedClass<T>::ExtendedClass()
{}

template <class T>
ExtendedClass<T>::~ExtendedClass()
{}

#endif 
```

问题在于线条

```
template<class T>
const  ExtendedClass<T>::position ExtendedClass<T>::NULLPOSITION = 0; 
```

我无法初始化常量内联，因为它是非整数类型。

从我在线阅读的内容来看，如果我将 const 初始化移动到 .cpp 文件中，问题就会消失。但是我不能这样做，因为我正在处理一个模板类。我收到如下详细信息的错误：

```
ExtendedClass.h:43: error: expected init-declarator before "ExtendedClass"
ExtendedClass.h:43: error: expected `;' before "ExtendedClass"
make: *** [ExtendedClass.o] Error 1 
```

有人可以帮我看看吗？非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:42:50.677

您已经编写了两次类型，并且没有限定标识符。难怪可怜的编译器会感到困惑。

```
template<class T>
const  ExtendedClass<T>::position ExtendedClass<T>::NULLPOSITION = 0; 
```

# android - Android 在 2.x 和 4.x 上的不同可视化

> ID：13744824
> 
> 赞同：0
> 
> 时间：2012-12-06T13:40:07.570
> 
> 标签：android, xml

我在项目可视化方面遇到了一些麻烦。在 android 2.x 上，xml 填充屏幕，但在 4.x 中，它们覆盖了大约 50% 的屏幕，另外 50% 是全黑的。我认为使用 fill_parent 和 wrap_content 对我有帮助！我怎样才能标准化它？这是来源

```
 <?xml version="1.0" encoding="utf-8"?>

     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:background="#0058A8" >

       <RelativeLayout
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:background="#0058A8" >

       <EditText
           android:id="@+id/smsnumber"
           android:layout_width="154dp"
           android:layout_height="wrap_content"
           android:layout_alignParentLeft="true"
           android:layout_alignParentTop="true"
           android:layout_marginLeft="14dp"
           android:layout_toLeftOf="@+id/btnRubrica"
           android:ems="10"
           android:inputType="phone" >

       </EditText>

       <Button
           android:id="@+id/btnRubrica"
           android:layout_width="119dp"
           android:layout_height="wrap_content"
           android:layout_alignParentRight="true"
           android:layout_alignParentTop="true"
           android:text="@string/phone_book" />

</RelativeLayout>

       <EditText
           android:id="@+id/smstext"
           android:layout_width="fill_parent"
           android:layout_height="64dp"
           android:inputType="textMultiLine" />

<DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="fill_parent"
        android:layout_height="138dp"
        />

   <TimePicker
       android:id="@+id/timePicker1"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
      />

   <Button
       android:id="@+id/start"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:text="@string/start" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:03:10.613

你的布局的根必须是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#0058A8"
    android:orientation="vertical" >

    <!-- The rest of your layout -->

</LinearLayout> 
```

注意`android:layout_width="fill_parent"`和`android:layout_height="fill_parent"`属性。

2.x 和 4.x 渲染布局没有区别。您看到的唯一区别是 2.x 的设备的**分辨率**比 4.x 的小，因此在较小的屏幕上，布局**填满了所有空间**。

# axapta - 如何使用资源？

> ID：13744826
> 
> 赞同：2
> 
> 时间：2012-12-06T13:40:11.223
> 
> 标签：axapta, dynamics-ax-2009, dynamics-ax-2012

我有一个关于获取资源文件的资源 ID 的问题。

我在资源中添加了一个资源文件（gif 文件），但我不知道如何获取资源 ID。

我尝试在工具-> 嵌入式资源中寻找它，但它没有出现在那里。同样在文件的属性中，id 也不会显示。

如何访问我的资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:56:07.443

在 AOT 中添加到`Resources`节点的图像不会获得资源 Id。而且它不会使其嵌入。嵌入在这个意义上意味着存储在ax32.exe中！

对于 MorphX 报告，还有[其他](http://daxrunbase.blogspot.dk/2010/08/image-resources-in-reports.html)使用资源的方法：

```
display Bitmap footerImage() 
{
    return SysResource::getResourceNodeData(SysResource::getResourceNode(resourceStr(MyImage))); 
} 
```

对于表格 fx。在 FormButton 上设置以下属性：

*   图片位置：AORessource
*   NormalImage：MyImage（或其他）

# servlets - 可以在 servlet 中使用 portlet 服务吗？

> ID：13744832
> 
> 赞同：2
> 
> 时间：2012-12-06T13:40:23.157
> 
> 标签：servlets, liferay, portlet

（如果是的话，怎么做？）

我有一个 Liferay portlet，它是使用为其他 portlet 提供服务的服务构建器构建的，我想知道是否可以在我的 servlet 中使用相同的 jar。到目前为止，我还没有成功。我尝试创建一个 portlet 并尝试从该 portlet 调用相同的服务，但这也不起作用。因此，我必须在 portlet 和 servlet 的配置中遗漏一些允许使用这些服务的东西。我错过了什么？

如果有不同的话，在 Windows 上运行 Liferay 6.1.1 Tomcat (7) 包...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T13:59:23.717

确保您的 servlet 使用`PortalDelegateServlet`Liferay。否则，它将无法访问 Liferay 服务 API（最终由服务构建器生成的类的类使用）。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app ...>
    ...
    <servlet>
        <servlet-name>my-servlet</servlet-name>
        <servlet-class>com.liferay.portal.kernel.servlet.PortalDelegateServlet</servlet-class>
        <init-param>
            <param-name>servlet-class</param-name>
            <param-value>org.example.YourOwnServlet</param-value>
        </init-param>
        <init-param>
            <param-name>sub-context</param-name>
            <param-value>do-something</param-value>
        </init-param>
    <servlet>
</web-app> 
```

不要忘记填写正确的初始化参数：

*   `servlet-class`是代表你的 servlet 的类
*   `sub-context`是你的 servlet 应该监听的子上下文

部署后，您的 servlet 将可通过以下 URL 访问：

```
http://localhost:8080/delegate/do-something 
```

# asp.net-mvc-4 - Jquery 验证和调用远程函数 Asp.net Razor View Engine

> ID：13744833
> 
> 赞同：0
> 
> 时间：2012-12-06T13:40:34.640
> 
> 标签：asp.net-mvc-4, jquery-validate

我正在尝试将一个半旧的 MVC2 站点翻译成一个新的、时髦的 MVC4 站点。到目前为止一切顺利，我真的只停留在网站的验证部分。我有一个 jquery 函数，它应该检查某个值的唯一性，如果它确实是唯一的，则允许表单提交，否则它不会提交。此外，仅当设置了某个变量时才需要...“isFlagSet”，如果您愿意的话。如果是，则 required 为真……然后您将远程检查唯一性。jquery验证函数如下

```
$('#eEncId').validate({
    rules: {
        HospitalFinNumber: {
            required: function (element) {
                debugger;
                return '@isFlagSet' != 'True'; //$('AddEnc').val() === 'AddEnc';
            },
            minlength: 6,
            remote: function () {
                debugger;
                return {
                    url: '@Url.Action("ValidateHosFin", "EditEncounter")',
                    data: { hospitalFin: $('#HospitalFinNumber').val(), encflag: '@encflag' }
                };
            }
        },
        DateOfBirth: {
            required: true
        },
        AdminDate: {
            required: true
        },
        Comment: {
            required: function (element) {
                return $(element).val().length > 4000;
            },
            maxlength: 4000
        }
    },
    messages: {
        HospitalFinNumber: 'Please Enter a valid Hospital Fin number',
        DateOfBirth: 'Please enter a valid Date Of Birth',
        AdmitDate: 'Please select an Admit Date',
        Comment: 'Why dont you stop attempting to put in more than 4000 characters?  Thanks...'
    }
}); 
```

看起来，很简单，对吧？嗯，它在 MVC2 中。现在我遇到了一些逻辑上的不一致（在我自己微弱的头脑中），而且似乎我没有调用远程函数。即使我正在进入远程调试器。难道我做错了什么？即使我不使用 unobtrusive-ajax，我是否需要在 Model 字段上放置一个远程属性？你们会推荐什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:00:40.607

看起来好像要成功调用远程函数，您还需要在返回参数列表中包含类型参数......

```
remote: function () {
    debugger;
    return {
        url: '@Url.Action("ValidateHosFin", "EditEncounter")',
        type: "POST",
        data: { hospitalFin: $('#HospitalFinNumber').val(), encflag: '@encflag' }
    };
} 
```

# javascript - 代码未通过第一次验证

> ID：13744834
> 
> 赞同：7
> 
> 时间：2012-12-06T13:40:35.690
> 
> 标签：javascript, jquery, regex

我有一个函数，我首先检查作为参数传递的字符串是否只有字母。但它总是返回为假。下面是我的[jsfiddle](http://jsfiddle.net/XLDGf/)

```
function takeString (str) {
    var regex = "/^[A-Za-z]+$/";

    if (str.match(regex)) {
        if (str.charCodeAt(0) === str.toUpperCase().charCodeAt(0)) {
            alert('true');
            return true;
        } 
        else {
            alert('false');
            return false;
        }
    } 
    else {
        alert('Only letters please.');
    }
}

takeString('string'); 
```

​ 上面的代码总是提醒`Only letters please`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T13:44:25.110

您需要去掉引号来制作`regex`正则表达式文字：

```
var regex = /^[A-Za-z]+$/; 
```

这是一个[更新的小提琴](http://jsfiddle.net/XLDGf/2/)。

目前，`regex`指的是字符串文字。当您将不是正则表达式对象或文字的内容传递给 时`String#match`，它会将该参数隐式转换为正则表达式对象（请参阅[ES5 15.5.4.10](http://es5.github.com/#x15.5.4.10)）：

> *   如果 Type( *regexp ) 为 Object 且**regexp*的 [[Class]] 内部属性的值为，则令*rx*为*regexp*；`"RegExp"`
> ***   否则，设*rx*是一个新的 RegExp 对象，就像由表达式`new RegExp(` *regexp*`)`创建的一样，其中`RegExp`是具有该名称的标准内置构造函数。**

 **因此，您的正则表达式被解释为这样（因为字符串包含您希望分隔正则表达式文字的正斜杠字符）：

```
var regex = /\/^[A-Za-z]+$\//; 
```

那不能匹配任何东西，因为它正在寻找一个正斜杠，然后是字符串的开头。**

# powershell - Powershell - 写入文本文件

> ID：13744838
> 
> 赞同：0
> 
> 时间：2012-12-06T13:40:56.293
> 
> 标签：powershell

基本上，我从事件日志中提取一些日志条目，对其进行格式化，然后将其写入文本文件，然后我将通过电子邮件发送。这是出于 Windows Server Backup 监视目的。

```
New-Item -ItemType directory -Path C:\WSBReports\
New-Item -ItemType file -Path C:\WSBReports\DailyReport.txt

$yestDate = (Get-Date) - (New-TimeSpan -day 1)
# echo $yestDate
Get-WinEvent -logname "Microsoft-Windows-Backup" |
            where {$_.timecreated -ge $yesterday} |

Format-Table TimeCreated, ID, ProviderName, Message -AutoSize -Wrap > C:\WSB_Reports\DailyReport.txt 
```

首先 - 它说它不能写入文件，因为它不存在？即使我在上面创建了它。

而且 - 我认为逻辑是错误的，因为每次脚本运行时我都需要覆盖这个文件，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:58:59.460

```
 Get-WinEvent -logname "Microsoft-Windows-Backup" |
            where {$_.timecreated -ge **$yesterday**} | 
```

$yesterday 未定义，因为您对变量的拼写是 $yestDate！

我的以下脚本按预期工作

```
 Get-WinEvent -logname "Application" | where {$_.timecreated -ge $yestDate} | format-table ItemCreated,ID,ProviderName,Message  -AutoSize -Wrap > C:\WSBReports\DailyReport.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:45:56.453

尝试：

```
New-Item -Type directory -Path C:\WSB_Reports\

$yesterday = (Get-Date) - (New-TimeSpan -day 1)
Get-WinEvent -logname "Microsoft-Windows-Backup" |
            where {$_.timecreated -ge $yesterday} |

Format-Table TimeCreated, ID, ProviderName, Message -AutoSize -Wrap | 
out-file  C:\WSB_Reports\DailyReport.txt 
```

# java - 在 Java 6 JRE 而不是 JRE 7 中打开 JNLP 文件

> ID：13744841
> 
> 赞同：15
> 
> 时间：2012-12-06T13:41:05.167
> 
> 标签：java, windows, java-web-start

我有需要在 Windows 机器上打开的基于 Java 6 的 Java Web Start 应用程序。机器安装了 JRE 7，并将 JRE 6 手动复制到`Program Files`文件夹中。问题是每当我想打开 JWS 应用程序时，它都会使用 Java 7 打开。即使我使用`javaws`JRE 6 中的可执行文件，某些属性仍然引用 JRE 7 文件（我通过使用验证了这一点`javaws -verbose app.jnlp`。如何强制 JRE 6只是为了这个应用程序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T08:04:52.370

> 我有基于 Java 6 的 Java Web Start 应用程序..我怎样才能只为这个应用程序强制 JRE 6？

在元素中使用适当的`version`属性。`j2se`

```
<resources>
    <!-- Any 1.6 JRE -->
    <j2se version='1.6*'>
    ...
</resources> 
```

* * *

## 警告

此解决方案似乎不再适用于安装早期版本的 JVM！

我能想到为什么它无法工作的最好原因是，Oracle 厌倦了为早期 Java 版本发布安全更新 - 所以强迫每个用户使用最新的 JVM。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-21T13:44:46.030

我意识到这是有史以来最古老的帖子，但是当我搜索类似的问题时它出现了。处理此问题的最简单方法（作为不会影响整个系统的一次性解决方案）是安装并行的旧版 Java，并将 jnlp 拖到 javaws.exe 上。（我有一个使用 Java 5 的 Web 应用程序，否则无法打开）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-21T08:42:35.647

我有一台装有 Windows 7 和两个 Java 版本（1.8 和 1.7）的 UAC 控制的笔记本电脑。sesWebstart.jnlp 必须从较旧的 Java 版本开始，在我的例子中是 1.7。这对我有用：在 Java 控制面板中，删除应用程序 sesWebstart.jnlp 的所有条目（如果存在）。您可以在命令行中启动 Java Cache Viewer：

```
C:\Program Files (x86)\Java\jre1.7.0_55\bin> javaws -viewer 
```

该命令启动 Java 控制面板和 Java Cache Viewer。转到 Java Cache Viewer，选择应用程序列表并删除 sesWebstart.jnlp 条目（如果存在）。

关闭 Java 缓存查看器并转到 Java 控制面板。转到临时 Internet 文件的设置并删除缓存文件和应用程序本身。之后，关闭 Java 控制面板。

创建一个新的批处理文件，它将使用正确的 Java（较旧的 Java）启动 sesWebstart.jnlp：

```
"C:\Program Files (x86)\Java\jre1.7.0_55\bin\javaws.exe" "D:\Users\christian\Desktop\sesWebstart.jnlp" 
```

现在，sesWebstart Applet 可以通过执行这个批处理文件来启动。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-13T17:35:22.627

另一个对我有用的合理解决方案是重命名最新 JRE/JDK 的 javaws.exe(javaws2) 程序文件，因为 JVM 总是搜索安装的最新版本。如果您需要回滚更改，只需再次重命名为原始值即可

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-30T13:26:00.180

只需显式使用`javaws.exe`您想要的 JRE 中的 ，如下所示：

> C:\Program Files\Java\jdk1.6.0_45\jre\bin\javaws.exe 文件.jnlp

但请记住其他答案，例如 j2se 版本设置和 jnlp 规范。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-10T05:07:25.277

我建议还添加 -verbose 标志。*例如* javaws.exe -verbose http....

就我而言，我仍在调用一些 java1.8 参数（参见[屏幕截图](https://i.stack.imgur.com/18jot.jpg)），因此我还必须在 Java 控制面板中禁用 Java 8。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-17T07:08:46.413

Jnlp jre 设置位于控制面板中的 Java 设置下。

转到控制面板并搜索“Java”。就我而言，它是 Java（32 位）。打开它并选择 Java 选项卡，然后选择 Java Application Runtime Settings

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-06T13:49:59.370

您必须通过以下简单过程手动完成，

1.  右键单击 jnlp 文件 --> 属性。转到属性打开 --> 单击更改按钮。
2.  选择浏览。
3.  选择您想要的 JRE 版本的 javaws.exe 的路径，无论是 6 还是 7\. ex。C:\Program Files (x86)\Java\jre7\bin\javaws.exe （在我的例子中）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-09T10:20:47.193

我有同样的问题。我创建了一个更改 JAVA_HOME 变量的 bat 文件，然后使用 javaws 运行 jnlp 文件，它对我有用。

bat文件内容：

```
SET "JAVA_HOME=[path to your jre folder]"
javaws [path to your jnlp] 
```

希望能帮助到你 ：）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-11T08:03:48.003

只需将 jnlp 文件的链接拖到适当版本的 javaws 上，它“打开方式”[图片如何用 javaws 打开 jnlp](https://i.stack.imgur.com/2V3Tk.png) MacOS 用户通常以相同的方式打开文件

# android - 使用偏好的getLong错误

> ID：13744844
> 
> 赞同：1
> 
> 时间：2012-12-06T13:41:11.503
> 
> 标签：android, long-integer

我用

```
long lvalue = Long.parseLong(string);
prefEditor.putLong(m_strfileName, lvalue);
prefEditor.commit(); 
```

然后我做

```
SharedPreferences oSettings = getSharedPreferences("FONECLAY", 0);
long strValue =  (long) oSettings.getLong(string, 0l); 
```

这里我收到错误 E/AndroidRuntime(20770): java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:25:34.147

尝试包装类来存储长值

```
long lvalue = Long.parseLong(string);
prefEditor.putLong(m_strfileName, new Long(lvalue));
prefEditor.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:54:35.677

使用下面的代码将值存储到 sharedpreferences 中。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();
prefsEditor.putLong("Value", mLongValue);
prefsEditor.commit(); 
```

使用下面的代码从 sharedpreferences 中检索 long 值。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
long mVal = myPrefs.getLong("Value", 0.0); 
```

# matrix - 根据某些函数值填充矩阵

> ID：13744847
> 
> 赞同：1
> 
> 时间：2012-12-06T13:41:18.977
> 
> 标签：matrix, populate, angle, diagonal

我想在某些位置填充一个 10x10 矩阵。例如 eye(10) 产生一个沿对角线的矩阵，如果你愿意的话，对应于一个 45 度向量。

是否可以沿着比方说 40 度向量的单元创建一个？我对此的看法是定义一个像 f(x) = -tan(40 deg) * x + 10 这样的函数，并将它与一个用零填充的矩阵匹配，创建一个函数具有函数值的矩阵。

我不确定如何去做，所以非常感谢任何帮助。非常感谢。

彼得

# java - 如何使 x 是一个整数在 Java 中的一个条件

> ID：13744848
> 
> 赞同：2
> 
> 时间：2012-12-06T13:41:19.543
> 
> 标签：java

我正在为学校编写十进制到二进制到八进制到十六进制到以 20 为底的计算器（我添加了以 36 为底的功能）计算器。它可以工作并捕获一些异常，除了在输入小数（如 4.5，而不是数字系统）值时会做一些奇怪的事情。我希望它抓住它并将用户带回我的代码顶部并说“请再试一次并输入一个整数”，我想我应该使用 if 语句来做到这一点，我只需要知道如何使“x 是整数”成为条件。顺便说一句，我正在使用Java。

这是我正在处理的代码的一部分：

```
public class mainconvert //creates my main class

{ //start mainconvert

    public static int manualparse(String m)//initializes an int method for a manual parse instead of using the library
    {//start manualparse

        int parsedvalue = 0;//creates an int that the parsed value will go into
        char[] split = m.toCharArray();//takes the input and splits it into an array of characters so we can take each individual character and convert it to an int
        int n = 0;//creates an int that will be used for the power that 10 is raised to while converting the input place

        for(int o=m.length()-1; o>=0; o--)//creates a for loop that takes each place in the array and loops through the conversion process until every place is converted
        {//start conversion for
            parsedvalue += Math.pow(10,n)*(split[o]-'0');//does the math, takes the char in each place, gets its ascii value, subtracts ascii 0 from that and multiplies it by 10^n, seen previously
            n++;//increases n (the exponent) by 1 after each loop to match the place that is being worked on
        }//end conversion for

        return parsedvalue;//returns the final parsed value
    }//end manualparse

    public static void main(String args[])//creates the main entry point
    {//start main

        JOptionPane pane = new JOptionPane();//makes JOptionPane "pane" so I don't have to type out "JOptionPane"

        boolean binput = false;

        do{//start do for do while loop for the reset on the exception catcher

            try{//start try for exception catcher

                String input = pane.showInputDialog("Enter value for conversion");//makes a Jpane with an input box for the value to be converted
                StringTokenizer toke = new StringTokenizer(input);//makes a string tokenizer for the input
                String k = toke.nextToken();//uses toke.nextToken to grab the token put into the input box so it can be used, it is made into a string
                int x = manualparse(k);//uses the manual parsing method created earlier to parse the token grabbed in string k into an int for use in our conversions

// then a bunch of calculator stuff and here's the end of the try/catch and do while loop

}//end try for exception catcher

catch(Exception ex)//catches exception

{//start catch

binput = true;//changes boolean to true to trigger do while loop

pane.showMessageDialog(null, "Please try again and input an integer");//displays error

}//end catch

}while(binput==true);//while for do while loop, triggers while the boolean binput is true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:43:12.807

用户以字符串形式输入输入。只需检查该字符串的格式是否正确。

```
boolean valid;
int input;
String inputString = ...;
try
{
    input = Integer.parseInt(inputString, 36);
    valid = true;
} catch (NumberFormatException e)
{
    valid = false;
    input = 0;
} 
```

或者更直观的解决方案：

```
boolean valid = inputString.matches("(+|-)?[0-9a-zA-Z]+"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:49:27.617

Integer.parseInt() is restricted to parsing a number within the int range, so it may be too restrictive if you are handling larger numbers. There is the corresponding Long.parseLong(), but for arbitrarily large numbers, use this:

```
try {
    new BigInteger(input, 36); // or whatever base
} catch (NumberFormatException e) {
    // bad input
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:00:21.477

问题是你做

```
parsedvalue += Math.pow(10,n)*(split[o]-'0'); 
```

没有验证这`split[o]`是一个数字。它可以是任何字符，甚至是`.`;)

您需要验证文本，因为`- '0'`无论您从什么中减去它，doing 都不会引发异常，您也不希望它发生。

顺便说一句：创建对象或使用 pow 解析数字非常昂贵。你应该尽量避免两者。

这是一个处理负数、不同基数、验证字符但不创建对象或使用 Math.pow 的示例。

```
public static long parseLong(String s, int base) {
    boolean negative = false;
    long num = 0;
    for (int i = 0; i < s.length(); i++) {
        char ch = s.charAt(i);
        int value = Character.getNumericValue(ch);
        if (value >= 0 && value < base)
            num = num * base + value;
        else
            throw new NumberFormatException("Unexpect character '" + ch + "' for base " + base);
    }
    return negative ? -num : num;
} 
```

# android - android重新打开应用设置默认活动

> ID：13744849
> 
> 赞同：-5
> 
> 时间：2012-12-06T13:41:21.733
> 
> 标签：android, exit, lifecycle

如果按下主页按钮，它将“退出”应用程序。退出并重新打开时，它会显示退出时的活动/视图。如何使应用程序在重新打开时显示默认启动器活动？

和其他问题。我有 3 个选项卡（tabactivity），其中 2 个是列表视图，第三个是“非列表视图”。在 listview 活动中按下返回按钮将退出应用程序。但在第三个 tabview 中，它什么也不做。为什么 ？我没有编写任何与返回按钮有关的程序。它的默认行为。我想要第三个像其他两个一样的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:40:23.767

您可以从您的 AndroidManifest.xml 文件中实现它，只需添加

android:noHistory="true" 你想要的属性，即

除了上面写在清单文件中的其他活动的启动器活动

因此，当按下 Home 按钮后启动活动时，只有启动器活动才会

启动，因为其他活动将从堆栈中删除。

希望这是您正在寻找的

# memory - 如何知道 Java 程序使用的内存

> ID：13744853
> 
> 赞同：1
> 
> 时间：2012-12-06T13:41:53.677
> 
> 标签：memory, jetty, monitoring, jmx, jconsole

我有一个在服务器上运行的程序（使用 Jetty）。我现在正在测试它。为此，我使用了一个名为 Gatling 的压力测试平台。为了监控，我使用 jconsole 来显示远程服务器上 JVM 的内存、cpu ...使用情况。但是，在运行我的测试时，jconsole 向我显示使用了 500 Mo，但是在我的服务器上使用 top 命令显示 java 进程使用了​​将近 1 Gig。

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                                                  
2328 ubuntu    20   0 2627m 942m  12m S 98.9 57.0  57:33.23 java 
```

好吧，我在解释这些结果时遇到了麻烦，我必须在这里误解一些东西，但无法弄清楚是什么。

任何帮助都会很棒，干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:13:46.933

java进程使用的内存包括

*   堆空间（在您的情况下为 500 mb）
*   permgen sizem 取决于您的设置，默认情况下应为 64mb
*   堆栈大小
*   JVM 进程大小本身

查看[链接](http://www.yourkit.com/docs/kb/sizes.jsp)以获取更多详细信息。

# linq-to-entities - 与 STE 一起使用的 Linq to Entities 生成具有重复项的图形

> ID：13744856
> 
> 赞同：0
> 
> 时间：2012-12-06T13:42:11.107
> 
> 标签：linq-to-entities, entity-framework-5, self-tracking-entities

我对 Linq to Entities 有一个奇怪的问题，有时会生成带有重复的图形。使用包含的查询，在请求的图的基础上有一个简单的限制，不会生成重复项。

当同一查询与图表中其他地方的另一个限制一起使用时，我有重复项。

考虑下图：

```
Entity1
  Entity2
    Entity3
      Entity4
         Entity5
           Entity6
      Entity7
      Entity8 
```

现在，这个查询：

```
var query = context.Entity1.Where(u => (u.StringProp.StartsWith(someValue)));
query = query.Include(@"NavpropEntity2.NavPropEntity3.NavPropEntity4.NavPropEntity5.NavEntity6");
query = query.Include(@"NavpropEntity2.NavPropEntity3.NavPropEntity7");
query = query.Include(@"NavpropEntity2.NavPropEntity3.NavPropEntity8"); 
```

不会为图中的 entity6 生成重复项。

但是下面的查询可以！

```
query = context.Entity1.Join(context.Entity3, u => u.Entity2.Entity3.Entity4Id, g => g.Id, (u, g) => new NotSoAnonymousTypeWithParameterLessConstructor { Entity4= g, Entity1 = u })
                                .Where(
                                    ApplyNotSoAnonymousTypeRestrictions(
                                    StringProp,
                                    Id)
                                ).Select(z => z.Entity1);
    query = query.Include(@"Navprop1.NavProp2.NavProp3.NavProp4.NavProp5");
    query = query.Include(@"Navprop1.NavProp2.NavProp3.NavProp6");
    query = query.Include(@"Navprop1.NavProp2.NavProp3.NavProp7"); 
```

为 Entity6 生成副本。

请注意，实体图在 linq 查询的末尾有问题。所以这是一个 EF/STE 问题而不是 STE 问题。

这是在将图表发送回服务器以保持更改时发出的，如本[博](http://blogs.msdn.com/b/diego/archive/2010/10/06/self-tracking-entities-applychanges-and-duplicate-entities.aspx)文中所述。

我希望有人遇到同样的问题并找到了解决方案。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:44:31.093

使用 EF5 中引入的 AsNoTracking() 扩展时会出现问题。这与查询结构无关。我的数据访问代码是从模板 (.tt) 生成的，我们今天遇到了同样的问题，我能够将一种不返回重复项的方法与另一种返回的方法进行比较。唯一的区别是。

# actionscript-3 - 计算速度

> ID：13744859
> 
> 赞同：-3
> 
> 时间：2012-12-06T13:42:22.233
> 
> 标签：actionscript-3, math, physics

我想计算一个物体的起始 x 和 y 速度，以及在到达目的地点之前制作曲线的速度。我试图计算它，但它从未达到完全相同的 x 和 y 位置。
![演示](../Images/7622f480d8381fa0f8199e2c640b980e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:05:06.217

由于您没有指定，我假设加速度是重力作用在**-y**方向。

您知道起点和终点（**P**和**S**）以及飞行时间 (T)，因此这分解为运动问题：

在**x**中，没有加速度，所以描述运动的公式是

x = v [x] t
v [x] = x/t
v [x] = (x [S] -x [P] )/T

在**y**中存在恒定的向下加速度（g>0）：

y = v [i] t - gt ² /2
v [i] = y/T + g T/2
v [y] = (y [S] -y [P] )/T + g T/2

# c - 如何使用递归查找C中元素的索引

> ID：13744863
> 
> 赞同：1
> 
> 时间：2012-12-06T13:42:29.080
> 
> 标签：c, list, indexing, element

我有这个，它检查元素是否在列表中，但是如何获取元素的索引？

```
// function that check if element is in list
int checklist(struct list *my_list, int n) {
  while (my_list != NULL) {
    if(my_list->info == n) return 1;
    my_list = my_list->next;
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:58:49.497

使用附加变量来记住当前索引：

```
int checklist (struct list *my_list,int n) {
int i=0;
while (my_list != NULL) {
 if(my_list->info == n) return i;
 my_list = my_list->next;
 i++;
 }
return -1; 
} 
```

或者

```
int checklist (struct list *my_list,int n) {
int i;
for (i=0;my_list != NULL; i++, my_list = my_list->next) 
 if(my_list->info == n) return i;
return -1; 
} 
```

顺便说一句，您的代码与递归无关，我认为它称为链表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:45:45.527

对带有您当前正在查看的索引的函数使用附加参数。尽管您需要一种方法来返回它：如果列表已用尽，则返回 -1，否则返回第一个找到的项目的索引。

PS我在这里看不到任何递归。

# java - 如何在java中使用泛型类型启动

> ID：13744864
> 
> 赞同：0
> 
> 时间：2012-12-06T13:42:32.683
> 
> 标签：java, generics

我的代码是：

```
class ReferenceRangeBuilder<T extends DvOrderedBuilder> {

private DvTextBuilder meaningBuilder;
private DvIntervalBuilder<T> rangeBuilder;
   public ReferenceRangeBuilder() throws ClassNotFoundException, InstantiationException, IllegalAccessException {

} 
```

}

我想启动 rangeBuilder，以便我可以在其中设置值。我想在构造函数中做到这一点。对于 DvIntervalBuilder rangeBuilder 我这样做了：

```
 public DvIntervalBuilder() throws NoSuchFieldException, InstantiationException, IllegalAccessException, ClassNotFoundException {
        ParameterizedType pt = (ParameterizedType) getClass().getGenericSuperclass();
        // You may need this split or not, use logging to check
        String parameterClassName = pt.getActualTypeArguments()[0].toString().split("\\s")[1];

        T lower = (T) Class.forName(parameterClassName).newInstance();
        T upper = (T) Class.forName(parameterClassName).newInstance();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:17:33.817

我自己通过编写这样的构造函数解决了这个问题，感谢大家宝贵的时间和意见。

我的解决方案是：

```
public ReferenceRangeBuilder(Class<T> claz) {
    try {
        lowerReferenceRange = claz.newInstance();
        upperReferenceRange = claz.newInstance();
    } catch (InstantiationException ex) {
        Logger.getLogger(ReferenceRangeBuilder.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        Logger.getLogger(ReferenceRangeBuilder.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:54:00.730

您是在问是否可以在`T`构造函数内部创建实例？由于泛型在 Java 中的实现方式，此信息在运行时不可用。阅读“类型擦除”以获取更多信息。[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:54:43.593

要使这种方法起作用，您的构建器必须是子类的，否则在运行时类型是未知的。

```
public class Main {
    static class Builder<T> {
        private final Class clazz;

        protected Builder() {
            Type type = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
            if (type instanceof Class)
                clazz = (Class) type;
            else
                throw new AssertionError("Builder needs to be sub-classed as " + type + " is unknown");
        }

        public Class<T> getClazz() {
            return clazz;
        }
    }

    public static void main(String... args) {
        // works fine as sub-class records that the type is BigDecimal.
        Builder<BigDecimal> bigDecimalBuilder = new Builder<BigDecimal>() {
        };
        System.out.println(bigDecimalBuilder.getClazz());
        // doesn't work.
        Builder<BigDecimal> bigDecimalBuilder2 = new Builder<BigDecimal>();
    }
} 
```

印刷

```
class java.math.BigDecimal

Exception in thread "main" java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType
    at Main$Builder.<init>(Main.java:21)
    at Main.main(Main.java:37) 
```

# php - 使用 for 时 PHP 将零 (0) 值保存到 MySQL 错误

> ID：13744871
> 
> 赞同：0
> 
> 时间：2012-12-06T13:42:49.883
> 
> 标签：php

我有一个表格，我有很多价值观。当我尝试将这些值保存到 MySQL 时，它不会保存来自表单的零值。这是我的代码。

```
for($i=0;$i<count($cevap_deger);$i++){
  $cevapkontrol = trim($cevap_deger[$i]);
  if(!empty($cevapkontrol)){
    $sorgu = mysql_query("insert into CRM9001(CRM9107,CRM9102,CRM9103,CRM9105,CRM9109,CRM9108) values ('".$cevap_deger[$i]."','".$sinav_id[$i]."','".$bolum_id[$i]."','".$soru_id[$i]."','".$birey_id[$i]."','".$kullanici_id[$i]."') ");
    header("Refresh: 0; url=dashboard.php");
  }
} 
```

它保存其他值，但只有 0 不保存。我也试过这个；

```
for($i=0;$i<=count($cevap_deger);$i++){ 
```

如果你帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:47:37.407

[php.net](http://php.net/empty)说：

以下内容被认为是空的：

```
"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

`$cevapkontrol`请注意，仅当不像`empty`in`if(!empty($cevapkontrol)){}`并且 0 被认为是空的时才将数据插入数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:47:52.243

0, false 和其他值的负载被[认为是空](http://php.net/manual/en/function.empty.php)的。

不要使用该`empty`功能。这很糟糕，因为它认为所有类型的值都是空的，而普通人不会认为是空的。

# sbt - 在 sbt 项目中编译 Scala 2.10-RC3 宏

> ID：13744872
> 
> 赞同：4
> 
> 时间：2012-12-06T13:42:53.210
> 
> 标签：sbt, scala-2.10, scala-macros

我在我的项目中使用 SBT，最近我决定向它添加宏。

所以我遵循了这个项目中的例子：

[https://github.com/adamw/scala-macro-debug/tree/15fc8af48a6e7772c44b726513949a8ac9c9e3b7](https://github.com/adamw/scala-macro-debug/tree/15fc8af48a6e7772c44b726513949a8ac9c9e3b7)

在`project/Build.scala`我有这个：

```
object ScalaMacroDebugBuild extends Build {
  import BuildSettings._

  lazy val root: Project = Project(
    "root",
    file("."),
    settings = buildSettings) aggregate (macros, src)

  lazy val macros: Project = Project(
    "macros",
    file("macros"),
    settings = buildSettings ++ Seq(
      libraryDependencies <+= (scalaVersion)("org.scala-lang" % "scala-compiler" % _)))

  lazy val src: Project = Project(
    "src",
    file("src"),
    settings = buildSettings) dependsOn (macros)

} 
```

我的目录结构是：

```
 MyProject
           src                  macros          project         build.sbt
    main         test                       Build.scala
scala   java   scala java 
```

所以 SBT 一直在 src 下编译所有东西，而且效果很好。

但是当我编译宏目录中的文件时，src 目录中的文件无法使用它，因此出现编译错误。

如何编译我的宏，然后让它们可用，以便使用它的项目可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:57:08.050

正常的源目录是`<project-base>/src/main/scala`. 在示例中，存在一个其基目录为的项目会使`MyProject/src/`事情变得混乱。

首先，有根项目，它的基目录是`MyProject`，因此它的主要 Scala 源代码来自`MyProject/src/main/scala/`. `src`子项目的基本目录是并`MyProject/src/`从中获取其来源`MyProject/src/src/main/scala/`（双倍`src/`是有意的）。

因此，解决方案可能是重命名`src`项目的基本目录，然后将源代码放在预期的目录布局中。

您可以使用`show root/compile:sources`, `show src/compile:sources`, `show root/compile:source-directories`, etc... 查看 sbt 认为的源和源目录。这可以帮助确认事情是否符合您的预期，并了解可能出现的问题。另请参阅`inspect`命令。

# php - socket_recv 数据包丢失字节 PHP

> ID：13744878
> 
> 赞同：4
> 
> 时间：2012-12-06T13:43:15.960
> 
> 标签：php

我试图在 PHP 上接收数据包，但看起来 socket_recv 丢失了一些字节。

我知道数据包发送正常：

```
0:13:58.951742 IP 192.168.0.101.1458 > 192.168.0.107.8000: Flags [P.], seq 1:7, ack 1, win 64240, length 6
    0x0000:  4500 002e 631d 4000 8006 158c c0a8 0065  E...c.@........e
    0x0010:  c0a8 006b 05b2 1f40 6557 d628 4e87 cadd  ...k...@eW.(N...
    0x0020:  5018 faf0 e808 0000 0068 6f6c 6100       P........hola. 
```

发送的数据是：0000 0068 6f6c 6100

但惠特：

```
socket_recv($socket, $buffer, 100, 0);
echo bin2hex($buffer); 
echo unpack("H*", $buffer); 
```

我得到了两个回声：00686f6c6100

这意味着：

```
sended:  0000 0068 6f6c 6100
receive:   00   68 6f6c 6100 
```

我做错了什么？

谢谢。

编辑：我发现了问题。在代码上。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:49:31.593

尝试：

> echo sprintf("%02x", unpack("H*", $buffer));

不过，您可能必须先将字节分成两部分。IE 我不确定 0x0000 是否被翻译为 0x0 到 0（两次）或 0x0000 到 00。

# ios - 如何链接两个滑块？当slider1 值上升slider2 值必须下降。但是怎么做？

> ID：13744879
> 
> 赞同：-4
> 
> 时间：2012-12-06T13:43:19.530
> 
> 标签：ios, xcode, uislider

我有两个 UISlider，它们的值范围都是 1 到 8。当应用程序启动时，slider1 的值为 1，slider2 的值为 8。当 slider1 移动到值 2 时，我希望 slider2 自动移动到值 7。因此，当一个滑块值上升时，另一个滑块值下降。

如何将这些滑块链接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:27:23.633

出色地。我创建了自己的小应用程序并轻松实现了该功能。就是这样。您需要做的是将动作连接到每个滑块。每次值更改时都会调用该操作。每个动作里面。做这样的事情。在.m

```
@synthesize slider1;
@synthesize slider2;

...

- (IBAction)slider2DidChange:(id)sender {
    NSLog(@"Value did change");
    int value = [slider2 value];
    NSLog(@"%d", value);
    int newValue = 8 - value;
    [slider1 setValue:newValue animated:YES];
}

- (IBAction)slider1DidChange:(id)sender {
    NSLog(@"Value did change");
    int value = [slider1 value];
    NSLog(@"%d", value);
    int newValue = 8 - value;
    [slider2 setValue:newValue animated:YES];
} 
```

当然，这也要求您有四个连接。

```
@property (assign) IBOutlet UISlider *slider1; //Connect to slider1
@property (assign) IBOutlet UISlider *slider2; //Connect to slider2

- (IBAction)slider2DidChange:(id)sender; //Connect action to slider2
- (IBAction)slider1DidChange:(id)sender; //Connect action to slider1 
```

而已。我将把我的小应用程序发布到 Infinite Open Syntax 并很快提供链接。这样您就可以下载源代码并自己查看。干杯!

# vim - 是否存在 vim 插件类管理器？

> ID：13744880
> 
> 赞同：0
> 
> 时间：2012-12-06T13:43:23.667
> 
> 标签：vim, vim-plugin, taglist

我有一些新手问题。存在 vim 插件，如 eclipse 或 netbeans 或 geany 中的一些“类管理器”或“类透视图”？我的意思是我看到一个类结构、所有方法和函数的透视图。我正在寻找这个 Java 插件，它会对我来说非常有用。我在谷歌中寻找这个，我找到了 C++ 的东西，但不是 java 的。我将不胜感激任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:56:23.423

是的，有几个插件可以在侧边栏中显示当前文件的结构；它们需要*Exuberant Ctags*工具 ( `ctags`) 从源文件中提取类信息。

*   [taglist.vim - 源代码浏览器（支持 C/C++、java、perl、python ...](http://www.vim.org/script.php?script_id=273)
*   [Tagbar - 显示当前文件的标签，按范围排序](http://www.vim.org/scripts/script.php?script_id=3465)
*   [JavaBrowser - 显示 java 文件类，包在树中，就像在 IDE 中一样](http://www.vim.org/script.php?script_id=588)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:55:26.940

Vim 不是一个 IDE，所以你不会找到你*想要*的东西。无论如何，请尝试[TagBar](http://majutsushi.github.com/tagbar/)或[TagList](http://vim-taglist.sourceforge.net/)。

# javascript - 从javascript中的拖放事件中提取css类

> ID：13744881
> 
> 赞同：0
> 
> 时间：2012-12-06T13:43:25.993
> 
> 标签：javascript, html, events, drag-and-drop

我的 html 页面上有几个带有某些 css 类的可拖动图像元素和一个画布元素。画布元素也可以捕获和`dragStart`事件。如何在事件中找出图像 css 类？我可以使用以下代码获得图像 src ：.`dragOver``drop``drop``e.dataTransfer.getData('text')`

**更新：**

这是我的 javascript 函数（使用 ScriptSharp 从 C# 生成）：

```
_drop: function Collage$_drop(e) {
    /// <param name="e" type="ElementEvent">
    /// </param>
    e.preventDefault();
    var x = _privateUtils.getMouseX(e) - 20;
    var y = _privateUtils.getMouseY(e) - 20;
    this._loadCollageImage(x, y, e.dataTransfer.getData('text'));
} 
```

是否可以从`e`或通过其他方式获取 css 图像类或另一个独特的元素特征（属性、id）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:51:01.080

`drop`如果您希望信息在事件中可用，请将其添加到事件中的`dataTransfer`对象中`drag`。或者只是将文本设置为元素的 ID，然后从 DOM 中获取所需的信息。

# mysql - MySQL - 删除了 10 亿行 - 负载仍然很高，表没有响应

> ID：13744882
> 
> 赞同：1
> 
> 时间：2012-12-06T13:43:27.533
> 
> 标签：mysql, innodb

我正在使用 MySQL 5.5 (Percona Server)，我刚刚从我的 InnoDB 表中删除了所有记录，这些记录大约有 11 亿行。这花了大约 3 到 4 天。

两天前完成，之后我在现在空的表上做了一个简单的选择（限制 50）：

选择没有完成，事实上我不得不杀死它，但它仍然（2天后）在进程列表（`SHOW PROCESSLIST`）中。此外，服务器的响应时间仍然更高（例如提交需要几秒钟而不是 ~20-100 毫秒）并且服务器负载增加。

我确定 I/O 已经上升，但我不知道为什么。

*   我做错了什么？
*   我该如何改善这种情况？

也许这会有所帮助：我的配置在这里[http://pastebin.com/BvnhcB1X](http://pastebin.com/BvnhcB1X)

# mysql - MySQL 创建时间戳的 ORMLite 问题

> ID：13744883
> 
> 赞同：4
> 
> 时间：2012-12-06T13:43:26.430
> 
> 标签：mysql, timestamp, ormlite

我在使用 MySql 创建时间戳时遇到问题。遵循[此处](https://stackoverflow.com/questions/10957983/creating-timestamp-column-with-ormlite)的建议，不使用定义中的特定`DataType.TIME_STAMP`条目`@DatabaseField`。

我现在的`@DatabaseField`样子是这样的：

```
 @DatabaseField(format="yyyy-MM-dd HH:mm:ss", defaultValue="CURRENT_TIMESTAMP")
 private Timestamp updatedAt; 
```

仍然在 Table create 上出现错误：

```
Unable to create table because of [Problems parsing default date
string 'CURRENT_TIMESTAMP' using 'yyyy-MM-dd HH:mm:ss.SSSSSS'] 
```

所以似乎是忽略了格式定义，没有格式定义，我还是得到这个错误：

```
Unable to create table because of [Problems parsing default date
string 'CURRENT_TIMESTAMP' using 'yyyy-MM-dd HH:mm:ss.SSSSSS'] 
```

我已经尝试指定 dataType，将其更改为`DATE_TIME`等。我还没有找到一个组合（除了根本不使用 Timestamp 并且只创建一个`DATE_TIME`，它可以工作，但不能使用`CURRENT_TIMESTAMP`）。

我真的被困住了，因为我过去手动更新了表格，但现在数量正在增长，我希望使用 ORMLite 中的 Create Table 选项完全自动化流程，而不必手动弄乱稍后的架构。

任何关于如何使其工作的指针都将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:38:16.360

现在似乎没有办法实现这一点，除非使用`@DatabaseFiled(version = true)`which 不适用于`Timestamp`字段。这已在主干中得到纠正，并将在 4.46 中工作：

> [http://ormlite.com/docs/version-field](http://ormlite.com/docs/version-field)

让它与 4.45 中的 Timestamp 字段一起工作是很不错的。您将需要`extends TimeStampType`并覆盖以下方法。有关更多详细信息，请参阅此答案的底部：

```
@Override
public Object moveToNextValue(Object currentValue) {
    long newVal = System.currentTimeMillis();
    if (currentValue == null) {
        return new java.sql.Timestamp(newVal);
    } else if (newVal == ((java.sql.Timestamp) currentValue).getTime()) {
        return new java.sql.Timestamp(newVal + 1L);
    } else {
        return new java.sql.Timestamp(newVal);
    }
} 
```

然后将您的字段指定为：

```
@DatabaseField(persisterClass = LocalCurrentTimeStampType.class, version = true)
java.sql.Timestamp timestamp; 
```

* * *

[[以下适用于创建日期，但不适用于其他更新。我会把它留作一般信息。]]

这很重要，但我终于想出了使用主干最新版本的方法。在 4.46 中，我们将添加对`@DatabaseField(readOnly = true)`只读字段的支持。这使您可以说：

```
@DatabaseField(defaultValue = "CURRENT_TIMESTAMP()", readOnly = true)
java.sql.Timestamp timestamp; 
```

永远不会创建或更新只读字段——仅在查询中返回。问题是`TimeStampType`当它试图验证`CURRENT_TIMESTAMP()`. 要解决此问题，您需要定义一个自定义持久性：

```
public class LocalCurrentTimeStampType extends TimeStampType {
    private static final LocalCurrentTimeStampType singleton =
        new LocalCurrentTimeStampType();
    private String defaultStr;
    public LocalCurrentTimeStampType() {
        super(SqlType.DATE, new Class<?>[] { java.sql.Timestamp.class });
    }
    public static LocalCurrentTimeStampType getSingleton() {
        return singleton;
    }
    @Override
    public boolean isEscapedDefaultValue() {
        if ("CURRENT_TIMESTAMP()".equals(defaultStr)) {
            return false;
        } else {
            return super.isEscapedDefaultValue();
        }
    }
    @Override
    public Object parseDefaultString(FieldType fieldType, String defaultStr) throws SQLException {
        this.defaultStr = defaultStr;
        if ("CURRENT_TIMESTAMP()".equals(defaultStr)) {
            return defaultStr;
        } else {
            return super.parseDefaultString(fieldType, defaultStr);
        }
    }
} 
```

然后您的字段定义变为：

```
@DatabaseField(persisterClass = LocalCurrentTimeStampType.class,
    defaultValue = "CURRENT_TIMESTAMP()", readOnly = true)
java.sql.Timestamp timestamp; 
```

您可以从 github 代码中获取最新版本：[https ://github.com/j256/ormlite-core](https://github.com/j256/ormlite-core)

# sql - 如何进行基本的 vb.net eof 控制？

> ID：13744884
> 
> 赞同：-2
> 
> 时间：2012-12-06T13:43:29.430
> 
> 标签：sql, vb.net

我是 VB.Net 的新手 我的旧 VB 6 代码是：

```
Set conn = my connection string
conn.open
Set ce = conn.Execute("select * from table where id = 1")
If ce.EOF Then conn.Execute ("insert into table set name = '" & Text1.Text & "'") 
```

我想获取 sql 表字段，如果 eof 然后使用**VB.NET**添加记录。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:21:28.393

您的旧 vb6 代码很糟糕：它容易受到 sql 注入的影响，而且效率极低，因为无需将结果返回给客户端。即使在 vb6 中，也没有任何借口。让我们通过 vb.net 迁移来解决这两个问题。您的新代码应如下所示：

```
Public Sub InsertName(ByVal Name As String)
    'This sql code will update your database in the same way as your original, but
    ' will do so faster because you only need to make one call to the database
    ' and you never need to read any data back to the client
    Dim sql As String = _
        "INSERT INTO Table (Name) " & _ 
           " SELECT @Name WHERE NOT EXISTS (select * from table where id = 1)"

    'The using blockwill make sure the connection is closed, even if an exception is thrown
    Using cn As New SqlConnection("My connection string"), _
          cmd As New SqlCommand(sql, cn)

        'Query parameters are the ONLY acceptable way to substitute data in your sql statements
        'NEVER use string concatenation. This is IMPORTANT
        'I have to guess at your column type here. Use the actual column type in your own code
        cmd.Parameters.Add("@Name", SqlDbType.NVarChar, 50).Value = Name

        cn.Open()
        cmd.ExecuteNonQuery()
    End Using
End Sub 
```

然后像这样调用函数：

```
InsertName(Text1.Text) 
```

请注意，我在这段代码中展示的大多数技术也是可用的，并且 vb6 中的最佳实践——即更好的 sql 和查询参数——即使你处理它们的方式在 vb6 中看起来不同。

# magento - 寻找关于 config.xml 的特定节点的解释

> ID：13744885
> 
> 赞同：1
> 
> 时间：2012-12-06T13:43:32.410
> 
> 标签：magento, magento-1.7

我正在准备认证，我对 config.xml 的特定节点（如 <customer>、<sales>、<payment> 等）有疑问……另一个疑问是关于 <default> 节点中各种模块使用的自定义节点，例如以下一项：

```
<default>
    <monkey>
    <custom_groupings>
        <customer_grouping_name><![CDATA[MAGE_CUSTOMER_GROUPS]]>      
    </customer_grouping_name>
    <segment_grouping_name><![CDATA[MAGE_CUSTOMER_SEGMENTS]]></segment_grouping_name>
    </custom_groupings>
        <general>
            <active>0</active>
            <double_optin>System->Configuration->Customers->Newsletter->
 SubscriptionOptions->Need to Confirm</double_optin>
            <ecommerce360>0</ecommerce360>
            <checkout_subscribe>0</checkout_subscribe>
            <transactional_emails>false</transactional_emails>

        </general>
    </monkey>
</default> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:28:15.033

配置 XML 只需要具有有效的语法。结构/内容是否影响应用程序是模块设计的功能。因此，最好的问题是，“哪些信息和技术可用于深入了解 Magento 的配置 XML？”

网上有多种资源，质量和准确性各不相同。对于专业资源，我建议查找任何名为`Config.php`. 例如，[`Mage_Sales_Model_Order_Config`[链接]](https://github.com/benmarks/magento-mirror/blob/1.5.1.0/app/code/core/Mage/Sales/Model/Order/Config.php)的内容介绍了应用程序对`global/sales/order`xpath的使用，例如。

要构建详尽的列表，请使用 grep 查找以下文本的来源：

*   获取存储配置
*   获取配置
*   *.xml

祝你好运。请记住，当前版本的 MCD 考试（a/o Dec 2012）基于 CE 1.5。

# php - 没有用户在场的 Paypal DoDirectPayment（例如，使用 cron 作业）

> ID：13744887
> 
> 赞同：2
> 
> 时间：2012-12-06T13:43:41.193
> 
> 标签：php, service, paypal, paypal-adaptive-payments, paypal-nvp

是否可以在没有实际用户在场的情况下在 cron 作业或其他脚本执行中使用存储的用户数据（信用卡信息、姓名、地址等）进行 Paypal 付款？

我想在我的服务上实现自动付款，但由于其复杂性，我不能使用标准的 Paypal 自动收费功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:18:43.803

您要查找的内容称为参考事务。您可以使用[DoReferenceTransaction](https://www.x.com/developers/paypal/documentation-tools/api/doreferencetransaction-api-operation-nvp) API 来实现您的目标。

使用此 API，您只需传入先前授权或销售交易的交易 ID 以及您要处理的新金额。它将使用以前的交易 ID 查找保存在 PayPal 系统上的账单信息，然后为新交易处理相同的来源。

这适用于 Payments Pro 和 Express Checkout。

我注意到你也用自适应支付标签发布了这个。那将是[Preapproval](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation) API 和[Pay](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation) API，但不涉及 DoDirectPayment。

# javascript - 下拉列表根据文本字段值而变化

> ID：13744888
> 
> 赞同：2
> 
> 时间：2012-12-06T13:43:41.107
> 
> 标签：javascript

我对javascript不是很好，我什至不知道这是否可能。

我试图根据文本字段的值选择一个下拉列表

我有以下文本字段，它是通过将成人和儿童人数相加计算得出的。

```
<input type="text" name="Total" id="Total" onfocus="this.blur()"/> 
```

我想做的是取决于 Total 的值有以下下拉更改。即如果 Total 小于 10，则下拉显示 1 小时，10 到 20 之间显示 2 小时等

```
<select name="Duration">
<option value="1">1 Hr</option>
<option value="2">2 Hrs</option>
<option value="3">3 Hrs</option>
<option value="4">4 Hrs</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:51:31.407

I think this is the general direction that you would need to go (I am only including the case where the total is less than 10, so you would need to add the other situations to the if statement):

```
<input type="text" name="Total" id="Total" onfocus="this.blur()" onblur="if(this.value < 10) { document.getElementById('totalDropDown').value = 1; }"/>

<select name="Duration" id="totalDropDown">
    <option value="1">1 Hr</option>
    <option value="2">2 Hrs</option>
    <option value="3">3 Hrs</option>
    <option value="4">4 Hrs</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:20:09.450

试试这个我认为这是你需要的

```
<script type="text/javascript">

    function chkVal(ele){
        var val = ele.value;
        console.log(val);
        if(val < 10){
            $('#totalDropDown').val(1)
        }
        else if(val <= 20){
            $('#totalDropDown').val(2)
        }
        else if(val <= 30){
            $('#totalDropDown').val(3)
        }
        else if(val > 30){
            $('#totalDropDown').val(4)
        }

    }

</script>

<input type="text" onkeyup="chkVal(this)"/>

<select name="Duration" id="totalDropDown">
    <option value="1">1 Hr</option>
    <option value="2">2 Hrs</option>
    <option value="3">3 Hrs</option>
    <option value="4">4 Hrs</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:51:43.540

你可以看看这个小提琴：http: [//jsfiddle.net/knnw8/1/](http://jsfiddle.net/knnw8/1/)

我会从

```
<input type="text" name="Total" id="Total" onChange="fillCombobox(this)"/> 
```

然后在组合框中分配您想要的选项，如您在小提琴中看到的那样（您当然也可以使用 onBlur 而不是 onChange）

编辑：我已经根据您的需要更新了小提琴

# html - Favicon 未在 Internet Explorer 中显示

> ID：13744890
> 
> 赞同：4
> 
> 时间：2012-12-06T13:43:46.747
> 
> 标签：html, wordpress, favicon

Favicon 未在 Internet Explorer 上显示

```
 <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /> 
```

我尝试了很多在 IE 上显示 Favicon 但失败了，谁能知道解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T13:48:33.063

我在 IE 中遇到了同样的问题。就我而言，这是因为 favicon.ico 实际上有一个 image/png 内容类型，而不是 image/x-icon。即使我用图标编辑器创建它。

[使用http://www.convertico.com/](http://www.convertico.com/)转换常规 png 文件后，它工作了。

请记住，尽管 IE 缓存这一点非常严格。您可能需要重新启动浏览器和/或清除缓存才能看到它。

# git - Git 在拉取时删除了未跟踪的文件

> ID：13744894
> 
> 赞同：11
> 
> 时间：2012-12-06T13:44:15.037
> 
> 标签：git

我在计算机上创建了一个 git 存储库并将其推送到我的服务器。然后我进入另一台计算机上的一个文件夹，该文件夹应该与存储库的内容合并。

这是我执行的确切步骤（我复制了它）：在第一个存储库中：

```
git init
git remote add origin *repo adress*
git remote update
echo "abc" > a
git add a
git commit -a -m "Intial commit"
git push --set-upstream origin master 
```

在第二个（文件被删除的那个）：

```
git init
echo "def" > b
git add b
git remote add origin *repo adress*
git remote update
git pull origin master 
```

我期望发生的是 git 会拉取这些文件，然后我可以提交我的本地文件并将其推回。但现在我的本地文件不见了。git 真的只是在没有警告的情况下删除了本地文件吗（我没有使用任何强制选项或类似选项）？

是否有可能将它们取回，或者这种预期和预期的行为只是删除未跟踪的文件？

的输出只是`git status`说：

```
# On branch master
nothing to commit, working directory clean 
```

我刚刚用一个测试存储库报告了这些步骤，它按照描述发生：文件“a”被拉入第二个存储库，但文件“b”没有消失（只有 a 由 'ls' 显示）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:40:38.737

好吧，我发现了另一个奇怪的事情。

在 的帮助下`git pull`，有这样一句话：

> “在其默认模式下，git pull 是 git fetch 后跟 git merge FETCH_HEAD 的简写”

所以，我使用`$git fetch`然后`$git merge FETCH_HEAD`而不是`git pull origin master`上面。那么令人惊奇的是， **文件 b 仍然存在。**

所以，我真的不知道具体是做什么`git pull origin master`的。

另外，我看到了一个解释

[http://git.661346.n2.nabble.com/pulling-the-root-commit-overwrites-untracked-files-without-warning-1-7-2-3-td5658622.html](http://git.661346.n2.nabble.com/pulling-the-root-commit-overwrites-untracked-files-without-warning-1-7-2-3-td5658622.html)

那就是“git merge发现它没有有效的HEAD，因此进行了硬重置，这显然会覆盖已经存在的任何文件。”

但我真的很怀疑这一点，因为我可以`$git merge FETCH_HEAD`成功使用。

如果你想找到丢失的文件，你可以去查看@ellotheth 提供的[Git pull 删除的未提交的更改](https://stackoverflow.com/questions/10268940/git-pull-deleted-uncommitted-changes?rq=1#)

# c++ - cin 函数是否在输入末尾添加 null 终止？

> ID：13744897
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:44:26.593
> 
> 标签：c++, user-input, c-strings

如果我声明一个字符数组：`char arr[200]` 然后我随后使用函数 cin 将值读入`arr[200]` 并在命令行窗口中键入：abcd

是否有一个空终止：`\0`在输入末尾自动添加到数组中？

（我不这么认为，因为我使用 cin 函数对其进行了测试： cin>>abcd ）

有人可以向我解释为什么吗？

下面是我用来测试的代码片段

```
 char arr[200]
    int count=0;
    int i=0;
    cin>>arr // i type into command window:abcd

    while (arr[i] != '\0')
    {
       count++;
        i++

    } 
```

我的计数值不会是 4，而是像 43，因此我得出结论，字符数组在 cin 函数之后不是空终止的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:23:25.463

从 a 到字符数组的格式化输入`std::istream`将以空值终止输入，如 C++11 27.7.2.2.3/9 中所指定：

> `operator>>``charT()`然后在下一个位置存储一个空字节 ( )

一旦明显的语法错误得到修复，您发布的代码就会给出预期的结果。但请注意，这是非常危险的；没有检查数组的长度，所以太多的输入会溢出它。我强烈建议您使用`std::string`类而不是纯字符数组来管理字符串。

您通过[链接](http://ideone.com/bgqJnM)在评论中发布的代码如下所示：

```
char array[20];
int length=getlength(array);
cin>>array; 
```

在尝试测量未初始化数组的字符串长度*后*读入数组。这可能会产生任何结果、崩溃或导致任何其他未定义行为的示例。

将来，您应该确保您在问题中发布的代码与展示您所询问的行为的代码相同；否则，不可能回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:48:18.763

是的，输入将是零终止的。否则，例如，您将无法在输入后不打印随机字符的情况下打印它。

# wordpress - 帖子缩略图不会改变大小

> ID：13744899
> 
> 赞同：0
> 
> 时间：2012-12-06T13:44:40.957
> 
> 标签：wordpress

我在一页上列出了很多产品，直到最近我使用的尺寸为 390px*238px。现在我必须将尺寸更改为其他内容，`get_the_post_thumbnail`使用新参数更新方法，重新加载页面并显示我想要的所有内容。

但是，在下一次刷新时，一切都会恢复原状。当我检查元素时，显示的图像确实有 class `attachment-390x501`，但它是`width`，`height`并且 src 属性显示 390、238 和`path/to/website/uploads/2012/11/Profile_IS_20180-390x238.jpg`.

有没有办法改变我的缩略图尺寸？这是我目前使用的代码：

```
<?php 
     // previous dimensions were 390x238
     echo get_the_post_thumbnail($product->ID, array(390,501)); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:46:56.217

您可以通过在 functions.php 文件中添加一行来设置缩略图的大小，然后显示新的图像大小。

将此添加到functions.php，如果需要，您可以更改数字，因为那是尺寸。此外，您可以根据需要多次重复此行以设置不同尺寸的缩略图，只需`new_custom_size`为每个新尺寸更改为唯一名称。

`add_image_size( 'new_custom_size', 390, 501, true );`

然后用这个显示你的特色图片：

`<?php the_post_thumbnail('new_custom_size'); ?>`

在 functions.php 文件中设置大小后，在页面/帖子上显示它之前，您需要重新生成缩略图。我强烈推荐 Regenerate Thumbnails 插件：[http ://wordpress.org/extend/plugins/regenerate-thumbnails/](http://wordpress.org/extend/plugins/regenerate-thumbnails/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T14:26:56.717

使用[add_image_size](http://codex.wordpress.org/Function_Reference/add_image_size)并[重建缩略图](http://wordpress.org/extend/plugins/ajax-thumbnail-rebuild/)

# windows - cmd for 循环转义？在集合？

> ID：13744901
> 
> 赞同：2
> 
> 时间：2012-12-06T13:44:48.063
> 
> 标签：windows, for-loop, batch-file, cmd, wildcard

有没有办法在 for 循环中转义问号，以便以下工作？

```
for %%a in (%*) do (
for %%b in (/? /h /help -h -help --help) do if %%a==%%b goto usage
) 
```

它会比单独的 if 干净得多。在单独的 if 子句中 %%a==/^? 工作，但不在这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:08:04.167

没有办法保留通配符 * ？在 FOR (no /F) 命令中，唯一的方法是通过 FOR /F。请注意，在这种情况下，*两个*FOR 都存在问题，因此此解决方案也不起作用：

```
for %%a in (%*) do (
   if %%a == /? goto usage
   if %%a == /h goto usage
   . . . .
) 
```

...当然，除非 /? 没有给出参数。

尽管可以组装一个循环来迭代包括 /? 在内的多个开关，但生成的代码比单个 IF 更复杂。您可以尝试此解决方案：

```
setlocal EnableDelayedExpansion

set params=%*
if "%params:/?=%" neq "%params%" goto usage
for %%b in (/h /help -h -help --help) do if "!params:%%b=!" neq "%params%" goto usage 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-14T10:22:28.617

除了 %* 为空时的“params”变通方法失败：如果您在 %* 前加上空格: `set params= %*`，它在 中不会为空，`%params:/?=%"`并且比较也不会失败。

# titanium - 当前用户的 Titanium SDK 更新

> ID：13744905
> 
> 赞同：0
> 
> 时间：2012-12-06T13:45:19.807
> 
> 标签：titanium, titanium-mobile, titanium-modules

我的系统有 2 个用户，一个用户安装了钛工作室并开发了一些应用程序。但他使用的是旧的钛 SDK 1.6。

他安装了共同的钛，即）它可供两个用户使用。

现在我只想为我的用户级别升级钛 SDK，这不应该影响他的钛 SDK。

这可以在 MAC OSX-Lion 中实现吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:23:57.610

当您更新 Titanium SDK 时，旧的 SDK 也会保留。

您可以在 tiapp.xml 中对此进行更新，您可以在其中选择用于特定 App 的 SDK。（不是 xml 编辑器，而是另一个）。

创建新应用时也是如此，您可以选择 SDK 版本。

对于当前的应用程序，SDK 链接到它。更新时它不会改变。

结论：不要担心更新，只要去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:07:48.390

Robin，您可以选择您的旧 SDK，如图所示。

![钛SDK](../Images/e702d2f96f890636c597aab4531a435a.png)

看看圈出来的部分。您可以在创建新项目时选择 SDK，也可以在创建项目后，通过打开 tiApp.xml 概览（底部圆角）选择项目配置并选择所需的 SDK。

您还可以通过编辑在 tiApp.xml 中编辑 SDK 版本

`<sdk-version>2.1.3.GA</sdk-version>` 到 `<sdk-version>required version</sdk-version>`

正如Rene 先生所说，更新您的SDK 不会有任何问题。更新您的 SDK 将有助于改进您的 SDK 并修复 SDK 中的错误

# primefaces - 更改复选框选择时的 DataTable 行颜色

> ID：13744906
> 
> 赞同：0
> 
> 时间：2012-12-06T13:45:27.817
> 
> 标签：primefaces

我有一个`<p:dataTable>`, 最后一列有一个复选框。我想根据复选框的状态为表格的行着色。

```
<p:dataTable var="acs" value="#{myBean.listaRevogaveis}"
emptyMessage="#{rotulo.mensagemSemDados}" paginator="true"
rows="10" id="tableacs"
paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
<p:column headerText="Nome" sortBy="#{acs.nome}"
filterBy="#{acs.nome}">
<h:outputText value="#{acs.nome}" />
</p:column>
<p:column headerText="Address" sortBy="#{acs.address}" filterMatchMode="contains"
filterBy="#{acs.address}" filterMaxLength="8">
<h:outputText value="#{acs.address}" />
</p:column>
<p:column headerText="Perfil" sortBy="#{acs.cdPerfil}"
filterBy="#{acs.cdPerfil}"  filterMaxLength="2">
<h:outputText value="#{acs.cdPerfil}" />
</p:column>
<p:column headerText="Cadastramento">
<h:outputText value="#{acs.tsSolicitacao}">
<f:convertDateTime pattern="dd/MM/yyyy" />
</h:outputText>
</p:column>
<p:column headerText="Concedido">
<h:outputText value="#{acs.concedidoPor}" />
</p:column>
<p:column headerText="Revogar">
    <p:selectBooleanCheckbox value="#{acs.ativo}" >
<p:ajax event="valueChange" oncomplete="toggleColor(this, #{acs.ativo}" listener="#{myBean.checkBox}" update="@form"/>
</p:selectBooleanCheckbox>
</p:column>
</p:dataTable> 
```

因此，在切换时，`#{acs.ativo}`我希望该行接收不同的背景颜色。

按照[这个问题](https://stackoverflow.com/questions/7173262/change-background-color-of-a-row-in-richdatatable)的答案，我尝试将其添加到我的 xhtml 中：

```
<style type="text/css">
.linhaDestacada {   background-color: red !important;}
</style>
<script type="text/javascript">
    function toggleColor(col, status) {

        var linha = jQuery(col).parent();

        if(status) {
            linha.removeClass('linhaDestacada');
        } else {
            linha.addClass('linhaDestacada');           
            }
        }

</script> 
```

但这没有用。我放了一些警报，看看函数是否被调用，是的。但是，尝试查看 tagName 或`linha`变量的任何属性都会返回 null。

还有一个有趣的点，回调是用复选框的前一个值调用的。当复选框被选中时，javascript`toggleColor()`在 上接收 false `status`，当它未选中时，它接收 true。

如何使行背景与复选框切换一起切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:45:27.817

好的，那个有很多错误和问题。

**第一的：**

primefaces 将行的背景设置为空白图像（取决于皮肤）。你必须覆盖`url()`背景，所以 CSS 应该如下所示：

.linhaDestacada { 背景： url('') 红色 !important;}

**第二：**

从 ajax 标记调用 javascript 导致 jQuery 找到空值（不知道为什么）。`onchange`使用其属性将回调移动到复选框标记。

最后的 javascript 片段是：

```
 <script type="text/javascript">
    function toggleColor(col, status) {

        var linha = jQuery(col).parent().parent().parent().parent().parent();

        if(status) {
            linha.removeClass('linhaDestacada');
            //alert("remove " + linha.html());
        } else {
                linha.addClass('linhaDestacada');
                //alert("add "  + linha.html());

            }
        }

     </script> 
```

**第三：**

更新整个表单是一个禁忌（您使用 javascript 添加的 css 类已被删除）......您应该只更新真正重要的内容（在这种情况下，复选框和命令按钮。

```
<p:selectBooleanCheckbox value="#{acs.ativo}" onchange="toggleColor(this, #{acs.ativo})">
    <p:ajax event="valueChange" listener="#{myBean.checkBox}" update="@this :formAcesso:btnRevogaNuke" />
</p:selectBooleanCheckbox> 
```

**第四：**

commandButton 未呈现。它将在 ajax 响应上更新，但浏览器没有显示它。找到[了这个答案](https://stackoverflow.com/questions/4573190/jsf-primefaces-update-attribute-does-not-update-component)`btnRevogaNuke`，并在封装元素上移动了 id ：

```
<h:panelGroup id="btnRevogaNuke" layout="block">
    <p:commandButton icon="ui-icon-alert" value="Confirmar rendered="#{myBean.confirmar()}" style="margin-left:600px;" action="#{acessoBean.revogaTodos()}" process="@this @form" update="@form" />
</h:panelGroup> 
```

# iphone - 登录检查 Plist 中的凭据

> ID：13744907
> 
> 赞同：1
> 
> 时间：2012-12-06T13:45:28.487
> 
> 标签：iphone, ios, ipad, plist

我有一个`plist`带有`Array`标题和`item0`,`item1`的`item2`字典来存储我的应用程序的标题和密码。现在我想检查登录过程

![进入这里](../Images/e40e289ef2be12425a5bdeff2255f49e.png) 现在我想检查通过，当我按下提交按钮登录时，项目应该匹配。我尝试了下面的代码，但 xcode 崩溃

```
-(void)authenticateCredentials 
{ 
NSMutableArray *plistArray = [NSMutableArray arrayWithArray:[self readFromPlist]]; 

for (int i = 0; i< [plistArray count]; i++) 
{ 
 if ([[[plistArray   objectAtIndex:i]objectForKey:@"pass"]isEqualToString:emailTextFeild.text] && [[[plistArray objectAtIndex:i]objectForKey:@"title"]isEqualToString:passwordTextFeild.text]) 
{ 
NSLog(@"Correct credentials"); 
} 

 } 
 } 
```

和

```
-(NSArray*)readFromPlist
 {
   NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
  NSUserDomainMask, YES); 
  NSString *documentsDirectory = [documentPaths objectAtIndex:0];
 NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"XYZ.plist"];

   NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

   NSArray *valueArray = [dict objectForKey:@"title"];

   return valueArray;

 } 
```

xcode 崩溃了..请检查 `-(void)authenticateCredentials`我不正确的地方？

“编辑”当我选择`submit`按钮时崩溃，它在 nslog 中给出正确的输出但随后崩溃，并带有错误

```
 2012-12-07 16:52:54.025 NavTutorial[3029:f803] emailEntry: emailemail@gmail.com
 2012-12-07 16:52:54.057 NavTutorial[3029:f803] passwordEntry: abcd
 2012-12-07 16:52:54.081 NavTutorial[3029:f803] Correct credentials
 2012-12-07 16:52:54.081 NavTutorial[3029:f803] Correct credentials
 2012-12-07 16:52:54.082 NavTutorial[3029:f803] -[__NSCFString objectForKey:]:     unrecognized selector sent to instance 0x68e9c30
 2012-12-07 16:52:54.083 NavTutorial[3029:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x68e9c30'
 *** First throw call stack:
(0x14d7052 0x11c2d0a 0x14d8ced 0x143df00 0x143dce2 0x3e71 0x14d8ec9 0x3735c2 0x37355a 0x418b76 0x41903f 0x417e22 0x39893f 0x398c56 0x37f384 0x372aa9 0x1bcdfa9 0x14ab1c5 0x1410022 0x140e90a 0x140ddb4 0x140dccb 0x1bcc879 0x1bcc93e 0x370a9b 0x252d 0x24a5 0x1)
terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:49:57.797

Agreed with Peter M, you shouldn't store them locally, at least in plain text. It would help a lot if you could post the error stack, so we could see what's failing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:38:07.693

我实际上是我的错..代码在代码中，所以一次又一次地执行..然后崩溃......但是当我`Return`退出`for`循环时......它工作正常......小而强大的错误。

# c# - 如何在实体框架中链接表

> ID：13744909
> 
> 赞同：0
> 
> 时间：2012-12-06T13:45:30.837
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我正在尝试使用 MVC 和实体框架创建资产跟踪系统。数据库已经存在。我有一个带有 Location 字段的 ComputerInventory 表，它是 Location 表的 LocationID 的伪造键。我想要做的是当我输出有关库存的信息时，我不必查看 LocationID，我想查看对应 LocationID 的 Location 字段。

我一直在使用一些 tutproials，但我似乎无法更改它以适应我的需求。我认为这很常见，所以也许我遗漏了一些东西。这是我的计算机清单：

```
[Table("ComputerInventory")]
public class ComputerInventory
{
    [Key]
    public String AssetTag {get; set;}
    //public Int32 Location { get; set; }

    [ForeignKey("Location")]
    public virtual Location Location { get; set; }

    public Int32 PoolType { get; set; }
    public Int32 Reason { get; set; }
    public Int32 InventoryStatus { get; set; }
    public Int32 InventoryType { get; set; }
    [StringLength(500)]
    public String Comments { get; set; }
    //public String Clock { get; set; }

   // public ICollection<Location> Locations { get; set; }
}

public class AssetDBContext : DbContext
{
    public DbSet<ComputerInventory> ComputerInventory { get; set; }

    public AssetDBContext()
        : base("Name=LaptopLoaner_RW")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Entity<ComputerInventory>().HasRequired(l => l.Location).WithMany();
    }
} 
```

这是我的位置模型

```
[Table("Location")]
    public class Location
    {
        [Key]
        public Int32 Id { get; set; }
        //[Column(LocationName="LocationName")]
        [MaxLength(100)]
        public String LocationName { get; set; }
        [MaxLength(25)]
        public String Country { get; set; }
    }

    public class LocationDBContext : DbContext
    {
        public DbSet<Location> Locations { get; set; }

        public LocationDBContext()
            : base("Name=<name>")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    } 
```

这是我试图在视图中输出数据的地方：

```
@model IEnumerable<LaptopLoaner.Models.ComputerInventory>
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.AssetTag)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.InventoryStatus)
    </td>
    <td>
      @Html.DisplayFor(modelItem => item.Location.LocationName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.PoolType)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Reason)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.InventoryType)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Comments)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.AssetTag }) |
        @Html.ActionLink("Details", "Details", new { id=item.AssetTag }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.AssetTag })
    </td>
</tr> 
```

}

我必须更改我的 ComputerInventory 模型还是必须从视图中访问位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:55:51.240

查看我关于 EF 中的导航属性如何工作的文章。这将介绍如何使用模型构建器来配置外键属性。[http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:04:31.327

**数据注释**

```
[ForeignKey("LocationId")]
public virtual Location { get; set; } 
```

我通常使用数据注释，但是应该开始查看 Fluent API 的东西，并保持我的 POCO 的注释干净

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T13:50:47.530

尝试[**在实体框架中使用一对多关系**](http://www.developer2blog.com/post/2012/11/17/Entity-framework-%28ONE-TO-MANY-RELATIONSHIP%29.aspx)，这可以帮助您如何在两个表的关系中使用表及其字段。

# java - 在链接 jSoup 前后添加文本

> ID：13744912
> 
> 赞同：0
> 
> 时间：2012-12-06T13:45:44.123
> 
> 标签：java, jsoup

我刚刚开始在他们的网站上学习 Jsoup 和食谱，但我只是有点卡在将文本添加到我解析的元素中。

```
try{

            Document doc = Jsoup.connect(url).get();    
            Element add = doc.prependText("a href") ;
            Elements links = add.select("a[href]");                 

                for (Element link : links) {                        

                PrintStream sb =    System.out.format("%n %s",link.attr("abs:href"));

                System.out.print("<br>");
                                        }       

    }       
    catch(Exception e){         
        System.out.print("error --> " + e);
    } 
```

使用 google.com 运行的示例我得到

```
 http://www.google.ie/imghp?hl=en&tab=wi<br>
 http://maps.google.ie/maps?hl=en&tab=wl<br>
 https://play.google.com/?hl=en&tab=w8<br> 
```

但我真的很想要

```
<a href> http://www.google.ie/imghp?hl=en&tab=wi<br></a>
<a href> http://maps.google.ie/maps?hl=en&tab=wl<br></a>
<a href> https://play.google.com/?hl=en&tab=w8<br></a> 
```

使用此代码，我已经从页面上获取了所有链接，但我还想获取 and 标签，以便它们可以在网页上创建我的。我尝试添加一个字符串并添加文本，但似乎无法正确处理。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:13:10.613

with `link.attr(...)` you get the attribute *value*.

But you need the whole tag:

```
Document doc = Jsoup.connect(...).get();

for( Element e : doc.select("a[href]") ) // Select all 'a'-Tags with 'href' attribute
{
    String wholeTag = e.toString(); // Get a string as the element is

    /* No you you can use the html - in this example for a simple output */
    System.out.println(wholeTag);
} 
```

# jquery - Google Dart 表单工作示例

> ID：13744919
> 
> 赞同：7
> 
> 时间：2012-12-06T13:46:02.863
> 
> 标签：jquery, dart

我目前正在尝试在 Dart 中创建一个简单的表单，只需一个用户名和电子邮件用于注册目的。

我找不到可以测试的完整***工作***示例。如果有人可以解释如何将下面的 jQuery 代码转换为 Dart，我认为这将大大澄清事情。

我也看过`FormData`Dart 的课程，但没有例子。任何帮助表示赞赏。

```
$("#submit").click( function() {
     $.post( $("#myForm").attr("action"),
             $("#myForm :input").serializeArray(),
             function(info) {

               $("#responseDiv").empty();
               $("#responseDiv").html(info);
             });

    $("#myForm").submit( function() {
       return false;    
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T16:42:57.460

首先导入两个库：

```
import 'dart:html';
import 'dart:convert'; 
```

然后我们定义一个序列化函数：

```
serializeForm(FormElement form) {
  var data = {};

  // Build data object.
  form.querySelectorAll('input,select').forEach((Element el) {
    if (el is InputElement)
      data[el.name] = el.value;
  });

  return data;
} 
```

它只是将一个表单序列化为一个`Map`数据。我不知道 Dart 形式的序列化程序，可能有一些用于此目的的包。请注意，上面的示例仅处理输入。

接下来我们假设以下 HTML：

```
<form id="myForm" action="/bar">
  <label>Foo:</label>
  <input type="text" name="foo" value="bar" />
</form>

<button id="mySubmit">Send it</button> 
```

最后是我们用于表单处理的 Dart 客户端代码：

```
main() {
  FormElement form = querySelector('#myForm');
  ButtonElement button = querySelector('#mySubmit');

  button.onClick.listen((e) {
    var req = new HttpRequest();

    req.onReadyStateChange.listen((ProgressEvent e) {
      if (req.readyState == HttpRequest.DONE) {
        print('Data submitted!');
      }
    });

    req.open('POST', form.action);
    req.send(JSON.encode(serializeForm(form)));
  });
} 
```

这应该让你开始。

您可能还想在表单中使用[Polymer](https://www.dartlang.org/polymer-dart/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T20:42:41.297

处理上面的例子。你也可以做这样的事情。

```
 main(){
    var form = new FormData(query('#myForm');
    var button = query('#mySubmit');

     button.onClick.listen((e){
         var request = new HttpRequest();
         request.on.readyStateChange.add((HttpRequestProgressEvent e) {
           if (request.readyState == HttpRequest.DONE) {
             print('Data submitted!');
             }
           });
          request.open('POST','http://localhost/form_info.php');
          request.send(form);
        });
      } 
```

# jquery - CSS :focus 为 false 时隐藏 jQuery 生成的内容

> ID：13744923
> 
> 赞同：1
> 
> 时间：2012-12-06T13:46:16.190
> 
> 标签：jquery, css

我有一个搜索框，它的第一个开始是一个放大镜图标。单击 ( `:focus`) 时，它会展开到您可以输入的搜索框。

我的一个朋友帮我写了一个 jQuery 代码，当用户开始在搜索字段中输入时，结果会立即显示在它下面（来自我的 mySQL 数据库），您可以单击它来查看结果。

但是，如果您单击搜索字段，并且 CSS 不再设置为`:focus`jQuery（让我们调用它们）快速结果，那么显然不要消失 - 因为没有任何东西告诉他们。

我的问题是 - 我怎样才能让它们在搜索框打开时显示并在搜索框不`:focus`打开时消失。

这是搜索栏的 CSS：

```
.search_bar input[type="text"] {
position: absolute;
right: 0px;
top: -18px;
    padding: 0 0 0 22px;
    width: 30px;
    height: 54px;
    -webkit-transition: width 0.5s ease-in-out;
}

.search_bar input[type="text"]:focus{
    width: 550px;
    outline: none;
} 
```

这是 jQuery 结果的 CSS（它们生成的空间：

```
#searchResult {
position: absolute;
z-index: 1;
width: 536px;
right: 20px;
top: 40px;  
text-align: left;
} 
```

这是jQuery：

```
jQuery(document).ready(function()
    {
        jQuery('#search_bar').keyup(db_search);
    });

    function db_search()
    {
        var searchFor = jQuery('#search_bar').val();
        if (searchFor=="")
        {
            document.getElementById("searchResult").innerHTML="";
            return;
        } 
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("searchResult").innerHTML=xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET","php/searchFor.php?search="+searchFor,true);
        xmlhttp.send();
    } 
```

如果不清楚，这里有一些静止图像来说明我的问题。

![这是不集中的搜索](../Images/eb5b5e0b2278b89eb51f5774b9db52ec.png) ![这是 <code>:focus</code> 开启的时候](../Images/78f4429a7df2da1dc0fdf1ff8a1e768c.png) ![这是显示的 jQuery“快速搜索”链接（他们应该这样做）](../Images/407fd93c21430607eb3c871d668f8c9f.png) ![这是我的问题，当搜索框向后滑动时，结果仍然存在，我想隐藏它们](../Images/d2be1dee5787ef28f2fd36852fef8d5d.png)

我试图用这个 CSS 来隐藏它：

```
.search_bar input[type="text"]:focus + #searchResult {
display: block;
} 
```

到`display: block`何时`:focus`在搜索栏上。

```
#searchResult {
position: absolute;
z-index: 1;
width: 536px;
right: 20px;
top: 40px;  
text-align: left;
display: none;
} 
```

`:focus`当它不在搜索栏上时隐藏整个 div 及其内容。

但这不起作用，我不知道该怎么做，我对 jQuery/javascript 的了解仍然非常有限，所以如果答案就在于此，是否有人愿意分享答案? 我试图研究 jQuery 中的 hide() 函数，但我不知道将它放在哪里，我认为它会在 if 语句中？

抱歉问了一个很长的问题，我试图尽可能清晰和彻底。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:51:01.617

尝试将此添加到您的 jQuery 代码中

```
jQuery('.search_bar').blur(function(){
    jQuery('#searchResult').hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:52:38.347

在你的 jQuery 代码的末尾添加这个 - （search_bar 是你在 CSS 中的一个类，还是你的 jQuery 代码中显示的一个 id？）

```
$('.search_bar').blur(function(){
    $('#searchResult').hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:53:05.057

您可能想看看 jquery .blur() 事件：[http](http://api.jquery.com/blur/) ://api.jquery.com/blur/ 。

你可以试试这个（未经测试的）代码：

```
 jQuery('#search_bar')
     .keyup(db_search)
     .blur(function() { $("#searchResult").hide(); }); 
```

说明：当元素失去焦点时，会调用 blur 事件。在这种情况下，用户将焦点放在#search_bar 上。当#search_bar 有一个keyup 事件时，它会像您之前一样进行搜索，但是当#search_bar 失去焦点（用户单击其他地方或其中一个结果）时，#searchResults 将被隐藏。

# java - 使用 ArrayList 时如何避免 ConcurrentModificationException？

> ID：13744926
> 
> 赞同：-3
> 
> 时间：2012-12-06T13:46:26.873
> 
> 标签：java, android

在Android上`ConcurrentModificationException`使用时如何避免？`ArrayList`

有人可以给出基本的经验法则来避免它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T13:47:38.733

通过在遍历您的数组列表时不添加/删除元素。

当您在迭代时修改列表时，此代码将引发 ConcurrentModificationException。

```
List<String> al = new ArrayList<String>();
al.add("2");
for(String s: al) {
al.remove("2");
} 
```

此代码不会抛出 ConcurrentModificationException。

```
 List<String> al = new Arraylist<String>();
 Iterator<String> itr = al.iterator();
 while(itr.hasNext()){
   itr.next();
   itr.remove();
 } 
```

您还可以使用[**java.util.Concurrent**](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)包中的一些类，例如[**java.util.concurrent.CopyOnWriteArrayList**](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)`ConcurrentModificationException`在迭代时修改列表时不会抛出：

```
 CopyOnWriteArrayList<String> al = new CopyOnWriteArrayList<String>();
  al.add("2");
  Iterator<String> itr = al.iterator();
  while(itr.hasNext()){
  itr.next();
  al.add("3");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:55:58.793

如果要删除 ArrayList 中的元素，请使用迭代器。例如：

```
ArrayList<String> someStrings;
// fill someStrings
Iterator<String> it = someStrings.iterator();
while(it.hasNext()){
   String buf = it.next();
   // do sth here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:47:53.267

当您在 ArrayList 中迭代时添加/删除/插入元素时，就会发生这种情况。

错误代码示例：

```
Iterator it = list.iterator()
while (it.hasNext())
{
    Object o = it.next();
    list.remove(o);
} 
```

# datagrid - 具有可编辑子行的 GWT DataGrid

> ID：13744930
> 
> 赞同：2
> 
> 时间：2012-12-06T13:46:41.993
> 
> 标签：datagrid, celltable, gwt-2.5

我基于 GWT 展示中的 DataGrid 创建了一个使用 GWT 2.5 的 DataGrid。与那里的主要区别在于，我需要子行中的可编辑单元格。

在上面的代码中将子行的 TableBuilder 从 TextCell 更改为 EditTextCell 时，这样的编辑工作正常。

但这有问题，我看不出它们来自哪里以及如何解决：
- 单击子行中的单元格时，编辑会正确开始，但会显示根行中单元格的值 - 编辑后，新值显示在根行中的单元格中。编辑单元格中的值与编辑前相同。

[在这里，您可以](http://freelancemedia.de/datagrid/)从上面的示例代码中看到问题，只是使子行中的单元格可编辑。

查看此列的 FieldUpdater 时，我发现始终只提供根行作为参数，即使在编辑子行时也是如此。子行信息在内部上下文中正确找到，但未提供给我的处理程序。

覆盖 Column 并将子行提供回 FieldUpdater 显示了一个不同的问题：从已编辑单元格到根的所有单元格都显示新值。隐藏和显示朋友时，值是正确的 -[如此处所示](http://freelancemedia.de/datagrid2/)

我显然在这里错过了一些关于 DataGrid 渲染如何工作的内容。有人可以在这里帮助我吗？

欢迎任何帮助，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:48:05.773

解决方案是创建自己的 Column，并覆盖 onBrowserEvent() 或将相应的数据对象存储在其中。

# powershell - Perfmon.exe 未通过 powershell 显示网络接口的值

> ID：13744931
> 
> 赞同：0
> 
> 时间：2012-12-06T13:46:49.433
> 
> 标签：powershell, collections, perfmon

我一直在尝试让 powershell 在 Windows 7 的 perfmon.exe 中制作一个包含某些信息的 csv 文件

大部分都有效，但似乎忽略了 3 个计数器。

该脚本如下所示：

```
$SampleInterval="4"
$MaxSamples="15"
$FileDestinationFolder="C:\Perfmon"
$date = (Get-Date).ToShortDateString()
Get-Counter 
$gc = ('\Network Interface(`*)\Current Bandwith', 
        '\Network Interface(`*)\Packets Recieved/sec',
        '\Network Interface(`*)\Packets Sent/sec',
        '\PhysicalDisk(_Total)\Disk Write Bytes/sec',
        '\PhysicalDisk(_Total)\Disk Read Bytes/sec',
        '\Processor(_Total)\% Processor Time',
        '\Processor(_Total)\% Idle Time',
        '\Memory\% Committed Bytes In Use',  
        '\Memory\Available MBytes')
Get-Counter -counter $gc -SampleInterval $SampleInterval -MaxSamples $MaxSamples | export-counter -force -path ("$FileDestinationFolder\PerfMon-$date.csv") -FileFormat csv 
```

我确实获得了 PhysicalDisk、处理器和内存的统计信息，但没有获得网络接口的统计信息。网络接口的路径是从数据收集器本身获取的。任何线索为什么会这样？

编辑——如果我单独阅读它们，我可以看到它会打印 Powershell ISE 中的所有网络接口，但不会将内容写入 csv 文件。

输出示例是

> Timestamp CounterSamples
> --------- --------------
> 06-12-2012 15:13:30 \dkspare03\network interface(intel[r] 82577lm gigabi t network connection )\字节总数/秒：
> 27101,2080498825

```
 \\dkspare03\network interface(intel[r] centrino[r] ad
                      vanced-n 6200 agn)\bytes total/sec :                 
                      0 
```

目前，网络接口有一个转义字符，它告诉要读取什么 NIC。如果我没有它，powershell 会列出如下错误：

> Get-Counter：内部性能计数器 API 调用失败。错误：c0000bb9。在 line:38 char:12 + Get-Counter <<<< -counter $gc -SampleInterval $SampleInterval -MaxSamples $M axSamples | export-counter -force -path ("$FileDestinationFolder\PerfMon-$date.csv") -FileFormat csv + CategoryInfo : InvalidResult: (:) [Get-Counter], Exception + FullyQualifiedErrorId : CounterApiError,Microsoft.PowerShell.Commands.Ge tCounterCommand

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:05:29.127

计数器似乎需要 Powershell 3.0。编辑日期变量以避免在命名文件和文件夹时产生更多麻烦。此外，“已收到”必须更改为“已收到”。

# ios - 在使用自动布局下动画/移动视图

> ID：13744932
> 
> 赞同：22
> 
> 时间：2012-12-06T13:46:53.450
> 
> 标签：ios, cocoa-touch, autolayout

我想将视图从一个位置移动到另一个位置，我可以使用它来实现它

```
self.view.center = CGPointMake(100, 200); 
```

但是，如果项目使用了 Autolayout，那么运行后视图会回到原来的位置：

```
[self.view.superview setNeedsLayout]; 
```

那么如何实际将视图移动到新位置？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-11-12T07:23:20.763

`AutoLayout`启用后，我们应该`FORGET FRAMES`且仅。是的，对于`CONSIDER CONSTRAINTS`动画，您也不能再更改框架或中心，视图将在调用布局时恢复到其原始位置。

相反，您应该`consider changing the constant value of the constraint`获得相同的效果。

考虑如下图所示的用户界面。我有一个带有 a 的图像视图，`20 points leading space from it's superview`这意味着它的超级视图具有水平空间约束。此外，我还有三个附加到该图像视图的约束，顶部、宽度和高度。

我将向您展示我们如何从左到右为图像设置动画，如图所示。

为我们需要动画的约束创建 IBOutlet。这里我们只采用水平空间约束，这足以让这个视图从左向右移动。

```
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *horizontalSpaceConstraint; 
```

![在此处输入图像描述](../Images/093c70b5223e1a52eb46a7dade558a41.png)

在`Go Away`action 内部，我们需要更新这个约束的常量值。

```
- (IBAction)moveFrontAction:(id)sender {
    self.horizontalSpaceConstraint.constant = 220;

    [UIView animateWithDuration:0.5 animations:^{
         [self.imageView layoutIfNeeded];
    }];
} 
```

现在视图应该移动到右端。我只是在一个动画块内这样做，所以我们将能够从左到右看到一个漂亮的动画，反之亦然。在生产中，我们不应该硬编码像这样的值这个。只是在这里做是为了让这个概念更清楚。

![在此处输入图像描述](../Images/3f07363ace8f15c39902493940f0133a.png)

在`Come Back`动作内部，我们再次将常量重置为其原始值，因此您可以看到橙色图像动画回到原始位置。

```
- (IBAction)moveBackAction:(id)sender {
    self.horizontalSpaceConstraint.constant = 20;

    [UIView animateWithDuration:0.5 animations:^{
        [self.imageView layoutIfNeeded];
    }];
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-06T14:30:02.377

如果您使用自动布局，则必须更改约束。建议的方法是在约束的视图控制器中创建一个出口，然后更改约束的常量。如果你有时间，我肯定会推荐[去这里](https://developer.apple.com/videos/wwdc/2012/)观看“Auto Layout by Example”或“Best Practices for Mastering Auto Layout”。他们帮了我很多。我想要带走的一点是，使用自动布局，您不再考虑框架。因此，设置中心不适用于自动布局。这都是关于视图如何相互关联的。

# json - 使用 MonoTouch 从 Web 服务检索 JSON 字符串的限制

> ID：13744936
> 
> 赞同：0
> 
> 时间：2012-12-06T13:47:15.593
> 
> 标签：json, web-services, xamarin.ios

我正在使用 MonoTouch 开发 iOS 应用程序。该应用程序使用以下代码从 Web 服务收集其数据：

```
private static string getResult (string url)
        {
            string result;
            var request = HttpWebRequest.Create (url);
            request.ContentType = "application/json";
            request.Method = "POST";

            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                if (response.StatusCode != HttpStatusCode.OK)
                    Console.Out.WriteLine("Error fetching data. Server returned status code: {0}", response.StatusCode);
                using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                {
                    result = reader.ReadToEnd();
                }
            }

            return result;
        } 
```

这工作正常，但是当从 Web 服务返回的 json 字符串达到一定大小时，请求返回内部服务器错误 500。我试图直接在 Web 浏览器中调用服务方法，这会返回一个 json 字符串为预期的。为什么它不适用于我的代码，有没有办法解决这个问题？

**更新：** 我认为这可能会解决我的问题：[http ://forums.iis.net/t/1176077.aspx/1](http://forums.iis.net/t/1176077.aspx/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:53:34.960

尝试为您的服务请求增加超时。您的服务必须超时导致 500 错误

还要检查这个[http://www.checkupdown.com/status/E500.html](http://www.checkupdown.com/status/E500.html)

# wordpress - Wordpress Job Manager 不发送电子邮件

> ID：13744941
> 
> 赞同：0
> 
> 时间：2012-12-06T13:47:35.497
> 
> 标签：wordpress, email, plugins, jobs

我在我的 wordpress 网站上安装了 Job Manager 插件，但它没有发送电子邮件。它正在我的一台测试服务器上运行，该服务器上只安装了 Job Manager，但它在我的客户端计算机上不起作用。我在那里安装了以下插件：

```
Exec-PHP  
Flexi Quote Rotator  
Gravity Forms  
Hide Title  
iframe  
Job Manager  
Linkable Title Html and Pho Widget by Penlamb  
Nivo Slider WordPress Plugin  
pageMash  
Shortcode Exec PHP  
Simple add pages or posts  
Vertical Scroll recent post  
Widget Context  
WP-Mail-SMTP  
WP Title 2 
```

我已经通过停用 WP-Mail-SMTP 来尝试这个，它也不会发送电子邮件。FYI WP-Mail-SMTP 测试电子邮件也很顺利，当我创建新用户时，它通过电子邮件发送用户信息，这意味着服务器正在发送电子邮件，问题可能与其他一些已安装的插件自己的设置有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:58:11.913

您是否尝试过禁用其余插件？

如果您不想禁用它们，您还可以暂时阻止 WordPress 包含它们。只需转到您的`/wp-content/plugins/`目录（通过 FTP 客户端）并重命名所有插件的目录，除了`Job Manager`（例如，只需`_`在所有目录的开头添加）。确保在恢复正确的目录名称之前**不要**进入插件页面 - 否则 WordPress 将禁用插件（而当插件文件不存在并且您不在插件页面上时，它们的文件只是不包含）。然后查看 Job Manager 是否仍然不发送电子邮件。

你也可以尝试在你的测试服务器上安装所有的插件，然后一一禁用，看看是不是插件冲突。

# google-chrome - 我可以使用控制台调整 Chrome 窗口的大小吗？

> ID：13744942
> 
> 赞同：9
> 
> 时间：2012-12-06T13:47:34.600
> 
> 标签：google-chrome

是否可以使用开发人员工具的控制台调整 Chrome 窗口的大小？如果是这样，命令是什么？因为 window.resizeTo(w,h) 对我不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:58:55.800

官方 Chrome[问题](http://code.google.com/p/chromium/issues/detail?id=2091)说：

> 根据设计，我们不支持调整选项卡的大小/移动，仅支持受限窗口。

Chrome 中的 Windows 可以通过[Chrome 扩展 API](https://developer.chrome.com/extensions/windows.html#method-update)调整大小，但不能从控制台使用。您可能应该尝试使用[许多“调整窗口大小”扩展](https://chrome.google.com/webstore/search-extensions/resize%20window?hl=en-US&utm_source=chrome-ntp-launcher)中的一种。在不久的将来，扩展将可以添加自己的控制台命令，但目前它是一个[实验性](http://developer.chrome.com/dev/extensions/experimental.devtools.console.html)功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:56:27.027

我认为您只能调整从控制台创建的窗口的大小，例如弹出窗口：

```
var pop=window.open("","","width=1024,height=768");
pop.resizeTo(100,100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-26T12:33:56.630

在 macOS 上，您可以运行：`open -a Google\ Chrome --args --window-size=1366,768`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:59:38.777

> 从 Firefox 7 开始，网站不再可能根据以下规则更改浏览器中窗口的默认大小：

*   您无法调整不是由`window.open.`
*   当窗口或选项卡位于具有多个选项卡的窗口中时，您无法调整其大小。

在[https://developer.mozilla.org/en-US/docs/DOM/window.resizeTo#Notes上找到](https://developer.mozilla.org/en-US/docs/DOM/window.resizeTo#Notes)

一些尝试和错误似乎证明这些规则也适用于 Chrome。

# c++ - 从链表中删除节点（递归）

> ID：13744946
> 
> 赞同：0
> 
> 时间：2012-12-06T13:47:49.350
> 
> 标签：c++, linked-list

!=我目前正在研究以下擦除递归布尔函数，它将 list 和 int 作为参数，如果找到并删除了 int，则返回 true，如果在列表中找不到它，则返回 false。它*似乎有效*，但*问题*是它删除***了列表中的下一个 int 数字***，而***不是当前的***：

```
 typedef struct E_Type * List;

 struct E_Type
 {
        int data;
        List next = 0;
 }; 
```

* * *

```
bool erase(const List & l, int data){
List current = l;   
if (current == 0)
{
   return false;
 }
else if (current->data == data)
{
      List deleteNode = new E_Type;
     deleteNode = current->next;//probably this causes the error, but how can I point it to the current without crashing the program
     current->next = deleteNode->next;
     delete deleteNode;
     return true;
}

else if (current->data != data)
{
      return erase(current->next, data);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:24:52.897

有两种基本类型的列表：

*   单链表（每个节点都知道它的下一个节点）和
*   双链表（每个节点都知道它的下一个节点以及它的前一个节点）。

如果像您的情况一样，有一个单链表，则不能检查 CURRENT 节点是否与“数据”相等，因为此时更改最后一个节点的下一个指针为时已晚。所以你总是必须检查 NEXT 指针是否相等，如下所示：

```
bool erase(const List & l, int data)
{
    List current = l;   
    if (current == 0)
        return false;

    // special case: node to be deleted is the first one
    if (current->data == data)
    {
        delete current;
        return true;
    }

    if (current->next && current->next->data == data) // next exists and must be erased
    {
        List deleteNode = current->next;   // Step 1: save ptr to next
        current->next = deleteNode->next;  // Step 2: reassign current->next ptr
        delete deleteNode;                 // Step 3: delete the node
        return true;
    }

    return erase(current->next, data);
} 
```

注意：我忽略了你最后一个“else if”条件。'else' 因为前一个 if 在其中有一个 return，而 'if' 因为它的条件只是前一个 'if' 的否定，如果程序走到这一步 - 它将永远成立。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:04:43.230

这里有一些指示。

**迭代方法**

当您遍历列表时，仅维护指向*当前*元素的指针是不够的。您还需要维护指向*前一个*`previous->next`元素的指针，因为如果您删除当前元素，则需要进行修复。

最重要的是，删除列表的第一个元素需要特殊处理。

**递归方法**

编写一个递归函数，该函数将获取指向列表头的指针，查找并删除所需元素，并返回指向新列表头的指针。为此，您需要：

1.  *定义和实施基本案例。*处理单元素列表似乎是一种自然的选择。
2.  *定义递归。*有两种情况：要么列表的头部是您要查找的元素，要么不是。弄清楚在这两种情况下你需要做什么，然后从那里开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:08:00.137

您正在考虑的唯一节点是当前节点，因此您必须准备好修改`l`：

```
if (current->data == data)
{
  l = current->next;
  delete current;
  return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T14:10:46.110

你的情况

```
else if (current->data == data) 
```

将在具有值数据的节点上停止。然后，您继续删除代码中此节点之后的节点。

如果您想保持其余代码相同，则该行应为：

```
else if ((current->next)->data == data) 
```

进行额外检查，以防第一个元素是列表中的唯一元素。

一种更简单的方法是在当前元素之前保留一个指向该元素的指针，然后删除该指针引用的节点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T14:11:09.493

如果你有一个列表：
A --> B --> C --> D
并且你想删除 C，你必须： 将 C
存储在一个临时变量中
Change B->next=C->next
delete C.
所以您需要找到 B 才能对其进行修改。
您当然不应该创建任何 E_type 的新实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T13:55:33.703

从列表中删除节点时，需要将前一个节点指向下一个节点。由于您有一个单链表，因此有 2 个选项：

1.  在函数中维护指向*前一个*节点的指针`erase`。当遇到所需节点时，将前一个节点链接到`current->next`当前节点并删除当前节点。需要对列表中的第一个节点进行特殊处理。

2.  当你遇到想要的节点时，复制`current->next`into的内容`current`，然后删除`current->next`。这样，您的函数中就不需要额外的参数。需要对列表中的最后一个节点进行特殊处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T14:08:25.423

您将需要更改*前一个*条目的`next`指针。所以一切都找到了，但是您必须根据数据检查 current->next->data，而不是 current->data。

 *如果 current 是列表中的最后一个条目，请务必检查 NULL 指针！*

# java - 在 Web Context Root 之外动态编译并包含 JSP(X)

> ID：13744951
> 
> 赞同：2
> 
> 时间：2012-12-06T13:47:56.893
> 
> 标签：java, jsp, tomcat, include, webcontext

我有一个 Web 应用程序大量使用 jspx-files 和`jsp:include`-includes，它从同一个 jar 部署到 tomcat 中的数百个上下文。目前我们只能通过更改 CSS 或覆盖其他文件目录中的某些文件来修改每个实例的布局：

假设 webapp.jar 包含一个名为的文件`/css/forms.css`，那么 webapp 确保将 GETting`http://mydomain/cust1/res/css/forms.css`映射到该文件。如果 webapp 被配置为在 "override directory" 中查找`/data/cust1/`，那么如果有一个名为`/data/cust1/css/forms.css`该文件的文件，则会从应用程序存档中的文件提供该文件。这是由 webapp 本身确保的。

在过去的几年里，这非常成功，但最近我感到了限制不能“覆盖”的或多或少的静态 jspx 的痛苦；）基本上我希望能够为每个文件“覆盖”一些 jspx 文件无需为每个上下文编译和部署自定义 webapp-jar 即可部署上下文。（拥有自定义`something:includeJsp`标签不会有问题）。

基本上，webapp 应该能够为单个 jspx 文件提供对 jsp(x) 编译器的覆盖，例如，看看下面的示例结构：

```
<!-- webapp.jar:/jspx/view.jspx -->
<jsp:root ...>
  <ns:customInclude src="inc/include.jspx" />
</jsp:root>

<!-- webapp.jar:/jspx/inc/include.jspx -->
<jsp:root ...>
  Default-Markup from the webapp.jar
</jsp:root>

<!-- /data/cust1/jspx/inc/include.jspx -->
<jsp:root ...>
  Custom markup for "cust1"
</jsp:root> 
```

现在，当`http://.../cust1/jspx/view.jspx`被请求时，我想`/data/cust1/jspx/inc/include.jspx`由 Tomcat 编译和执行。基本上我知道实际上一切必要的东西在 Tomcat 中的某个地方已经是可能的（从 jspx 编译到 Java 字节码，包括文件，...），但我也知道 Tomcat/Jasper 遵守 jsp-spec。我通过查看代码发现这并不容易......

所以基本上，有谁知道如何让这样的设置工作？也许有人已经解决了这个问题？或者我目前的方法有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:26:40.857

我最终实现了我自己的`FileDirContext`，它通过`<Resources>`-Tag in包含在`context.xml`. 实际上，我实现了两个 - 一个扩展`org.apache.naming.resources.WARDirContext`和一个扩展，`org.apache.naming.resources.FileDirContext`因为我想在使用 eclipse（部署到文件结构）和从非爆炸 .war 文件部署的服务器上启用相同的机制。

它们都可以通过上下文描述符进行配置，并且可以使用多个“虚拟覆盖”。覆盖可以是文件系统路径或外部 .war 文件（实际上更像是重命名为 .war 的 .zip）或打包到部署的 .war 文件中的 .jar 文件。

使用一个虚拟覆盖的调优解决方案的步骤是：

1.  创建一个`MagicWARContext`从上述扩展而来的类（魔术就像解决每个问题;）`WARDirContext`。
2.  在这个类中创建一个静态内部类`ProtectedMethodVisibleMaker extends FileDirContext`。这允许访问 Tomcat 原始实现的某些受保护方法。覆盖`doGetRealPath`和`doLookup`。
3.  在您自己的 WAR 上下文中，为字段`private String overlay`和字段创建 getter 和 setter，并为该字段`private ProtectedMethodVisibleMaker overlayContext`实例化一个新的空实例。
4.  在`allocate()`您的 WAR 上下文调用`overlayContext.setDocBase(overlay)`中。一定要打电话`overlayContext.release()`来`release()`确定。
5.  现在你必须覆盖另外 5 个方法`WARDirContext`
    *   `doGetRealPath(String)`
    *   `doLookup(String)`
    *   `getAttributes(Name, String[])`
    *   `list(String)`
    *   `list(Name)` 两个 s 的最终枚举`list`当然应该包含虚拟覆盖的条目以及原始上下文。所以我最终编写了我自己`NamingEnumeration`的迭代一个委托命名枚举列表，并确保每个命名条目只输出一次。
6.  从上下文描述符中实例化你的魔法上下文：

    ```
    <Resources 
        className="package.name.tomcatextensions.MagicWARContext" 
        overlay="/data/some/dir"/> 
    ```

7.  将您的课程打包在一个罐子中并将其复制到`tomcat/lib`

### 注意事项

我们正在覆盖 Tomcat 的内部类。这自然会将此代码暴露给更改。因此，必须有人确保版本升级后一切都按预期工作。而不是一些受保护的方法可以覆盖实际的公共方法，但其中一些是最终的，所以你基本上不走运。

此外，还可以通过查找方法向其他应用程序层公开非魔法子上下文，这意味着它们不再具有该覆盖或不包含已部署战争的后备资源。当请求子上下文时，我最终在日志中添加了一些警告。在启动过程中，这发生了两次，一次 for`/WEB-INF/classes`和一次 for `/WEB-INF/lib`。
在我的用例中，我禁止添加包含其中任一路径的虚拟覆盖，因为我不想让外部类文件出现在我的 Web 上下文中，所以这不是问题。然而，其他一些客户可能正在调用这些方法并用它们做一些意想不到的事情。在我的测试过程中我没有发现任何问题，但是启用缓存或枚举资源时可能会出现奇怪的效果，并且*会有*使用子上下文时会出现问题...当然可以围绕查找返回的子上下文创建虚拟化包装器，但我还没有这样做，因为我希望这是不必要的。

当然，这种方法使您能够在非爆炸式战争部署中覆盖后备 webapp 的某些资源。如果您只需要将外部资源添加到 Web 上下文，您可以使用 Tomcat `aliases`（请参阅[如何在 java 中将别名添加到 Servlet 上下文？](https://stackoverflow.com/questions/12715331/how-do-i-add-aliases-to-a-servlet-context-in-java)）。

**使用风险自负**，玩得开心。

# silverlight - 在 Silverlight 中查询 CRM 数据

> ID：13744952
> 
> 赞同：0
> 
> 时间：2012-12-06T13:48:09.180
> 
> 标签：silverlight, dynamics-crm-2011

我正在为 CRM 2011 构建一个 silverlight 应用程序，我想知道从 CRM 系统中检索数据的最佳方法是什么。

我已在我的组织中链接为服务参考，并且能够访问它。我见过几种不同的方法来检索数据，但它们看起来都相当复杂。有没有像我们可以在插件中使用的东西，例如 fetch XMl 查询或简单的 Service.Retrieve 方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T11:33:32.187

如果向项目添加服务引用，则可以使用 LINQ 查询数据集。您可以从自定义区域下的开发人员资源下载 CSDL。

```
private FelineSoftContext context;
private System.String serverUrl;
private DataServiceCollection<SalesOrder> _orders;

public MainPage()
    {
        InitializeComponent();
        serverUrl = (String)GetContext().Invoke("getServerUrl");
        //Remove the trailing forward slash returned by CRM Online
        //So that it is always consistent with CRM On Premises
        if (serverUrl.EndsWith("/"))
            serverUrl = serverUrl.Substring(0, serverUrl.Length - 1);

        Uri ODataUri = new Uri(serverUrl + "/xrmservices/2011/organizationdata.svc/", UriKind.Absolute);
        context = new FelineSoftContext(ODataUri) { IgnoreMissingProperties = true };

        var orders = from ord in context.SalesOrderSet
                     orderby ord.Name
                     select new SalesOrder
                     {
                         Name = ord.Name,
                         SalesOrderId = ord.SalesOrderId
                     };

        _orders = new DataServiceCollection<SalesOrder>();
        _orders.LoadCompleted += _orders_LoadCompleted;
        _orders.LoadAsync(orders);
    }

    void _orders_LoadCompleted(object sender, LoadCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            if (_orders.Continuation != null)
            {
                _orders.LoadNextPartialSetAsync();
            }
            else
            {
                OrderLookup.ItemsSource = _orders;
                OrderLookup.DisplayMemberPath = "Name";
                OrderLookup.SelectedValuePath = "Id";
            }
        }
    } 
```

您还需要在您的类中添加一个方法，如下所示：

```
private static ScriptObject GetContext()
    {
        ScriptObject xrmProperty = (ScriptObject)HtmlPage.Window.GetProperty("Xrm");
        if (null == xrmProperty)
        {
            //It may be that the global context should be used
            try
            {

                ScriptObject globalContext = (ScriptObject)HtmlPage.Window.Invoke("GetGlobalContext");

                return globalContext;
            }
            catch (System.InvalidOperationException)
            {
                throw new InvalidOperationException("Property \"Xrm\" is null and the Global Context is not available.");
            }

        }

        ScriptObject pageProperty = (ScriptObject)xrmProperty.GetProperty("Page");
        if (null == pageProperty)
        {
            throw new InvalidOperationException("Property \"Xrm.Page\" is null");
        }

        ScriptObject contextProperty = (ScriptObject)pageProperty.GetProperty("context");
        if (null == contextProperty)
        {
            throw new InvalidOperationException("Property \"Xrm.Page.context\" is null");
        }

        return contextProperty;
    } 
```

您将需要添加一个额外的类库并将以下代码放入其中。更改类名以匹配您导出的上下文：

```
partial class FelineSoftContext
{

    #region Methods
    partial void OnContextCreated()
    {
        this.ReadingEntity += this.OnReadingEntity;
        this.WritingEntity += this.OnWritingEntity;
    }
    #endregion

    #region Event Handlers
    private void OnReadingEntity(object sender, ReadingWritingEntityEventArgs e)
    {
        ODataEntity entity = e.Entity as ODataEntity;
        if (null == entity)
        {
            return;
        }

        entity.ClearChangedProperties();
    }

    private void OnWritingEntity(object sender, ReadingWritingEntityEventArgs e)
    {
        ODataEntity entity = e.Entity as ODataEntity;
        if (null == entity)
        {
            return;
        }

        entity.RemoveUnchangedProperties(e.Data);
        entity.ClearChangedProperties();
    }
    #endregion
}

public abstract class ODataEntity
{
    private readonly Collection<string> ChangedProperties = new Collection<string>();

    public ODataEntity()
    {
        EventInfo info = this.GetType().GetEvent("PropertyChanged");
        if (null != info)
        {
            PropertyChangedEventHandler method = new PropertyChangedEventHandler(this.OnEntityPropertyChanged);

            //Ensure that the method is not attached and reattach it
            info.RemoveEventHandler(this, method);
            info.AddEventHandler(this, method);
        }
    }

    #region Methods
    public void ClearChangedProperties()
    {
        this.ChangedProperties.Clear();
    }

    internal void RemoveUnchangedProperties(XElement element)
    {
        const string AtomNamespace = "http://www.w3.org/2005/Atom";
        const string DataServicesNamespace = "http://schemas.microsoft.com/ado/2007/08/dataservices";
        const string DataServicesMetadataNamespace = DataServicesNamespace + "/metadata";

        if (null == element)
        {
            throw new ArgumentNullException("element");
        }

        List<XElement> properties = (from c in element.Elements(XName.Get("content", AtomNamespace)
                                               ).Elements(XName.Get("properties", DataServicesMetadataNamespace)).Elements()
                                     select c).ToList();

        foreach (XElement property in properties)
        {
            if (!this.ChangedProperties.Contains(property.Name.LocalName))
            {
                property.Remove();
            }
        }
    }

    private void OnEntityPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
        if (!this.ChangedProperties.Contains(e.PropertyName))
        {
            this.ChangedProperties.Add(e.PropertyName);
        }
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:03:21.773

我会建议你使用[Silvercrmsoap](http://silvercrmsoap.codeplex.com/documentation)，它很容易使用。我在我的 Silverlight 项目中使用了它。

# unit-testing - 为什么默认不安装 Code Contract 分析

> ID：13744953
> 
> 赞同：1
> 
> 时间：2012-12-06T13:48:14.693
> 
> 标签：unit-testing, visual-studio-2012, code-contracts

我们刚刚开始一个新项目，我们渴望从头开始进行测试。

当我们在研究使用哪个单元测试解决方案时，我遇到了代码契约，它们似乎提供了一种更简单的方法来检查诸如空参数传递之类的事情，而无需编写独立的单元测试方法。

有一件事我有点困惑，也让我对在代码合同检查上进行大量投资感到警惕，那就是分析工具需要从 DevLabs 下载，并且默认情况下不包含在 VS2012 中。

这是什么原因？

另外：似乎人们报告说 VS2012 对代码契约分析的支持似乎很不稳定，如果分析能力不是很好，为什么还要使用代码契约？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:39:55.100

我不能代表 VS2012，但它在 VS2010 中对我来说非常好。与代码分析有一个非常小的冲突，即引发了错误警报，但您只需关闭该代码分析规则并依赖代码合同静态检查（这更全面）。

获得 IDE 集成答案的最佳位置可能是通过位于[Code Contracts 网站](http://research.microsoft.com/en-us/projects/contracts/default.aspx)上的电子邮件地址，但我怀疑因为它是一个研究项目，不将其作为 IDE 的“官方”部分提供了能力更定期的更新。

# postgresql - 如何使用 PostgreSQL 从 xml 中检索 C DATA 值

> ID：13744954
> 
> 赞同：2
> 
> 时间：2012-12-06T13:48:13.727
> 
> 标签：postgresql, xpath, cdata

```
<EncounterData Key="3RBD-OS62-SSRN" >
  <RowList /><![CDATA[100]]>
  </EncounterData>
 <EncounterData Key="XI4O-9QM5-DEQ6">
  <RowList /><![CDATA[54]]>
 </EncounterData> 
```

在上面的 XML 如何使用 PostgreSql 函数中的键属性检索 CDATA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:56:33.813

以下 XPath 表达式对应于 CDATA 部分并从 @Key 开始：

```
@Key/../text()[2] 
```

# java - XML RPC 服务器（PHP、Drupal）与长整数上的客户端（Java）不兼容

> ID：13744959
> 
> 赞同：1
> 
> 时间：2012-12-06T13:48:29.430
> 
> 标签：java, php, drupal, type-conversion, xml-rpc

我正在编写一个 Java 应用程序，它与使用 XML RPC 支持的基于 Drupal 的通信。

其中一种方法需要一个对象字典，这很好，因为它会自动转换为`<struct>`. 但是，[客户端库](http://ws.apache.org/xmlrpc)以任何整数转换`Map<String, Object>`为长整数的方式进行转换。要在 XMLRPC 调用中[支持长整数，必须启用](http://ws.apache.org/xmlrpc/types.html)[供应商扩展](http://ws.apache.org/xmlrpc/extensions.html)。但是，服务器不支持这些扩展。

据我所知，PHP 中没有任何内容可以支持`<ex:i8>`. 有趣的是，[所谓的 XMLRPC 扩展官方网站](http://ontosys.com/xml-rpc/extensions.php)并没有定义[这里详述](http://ws.apache.org/xmlrpc/types.html)的那些。

除了循环遍历所有成员`Map<String, Object>`并手动将所有长整数转换为整数之外，有什么方法可以在这里进行正确调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:58:03.537

我最终编写了这段代码，它将所有`Long`实例转换为`Integer`a`Map`或`HashMap`a `JSONObject`：

```
@SuppressWarnings("unchecked")
private Object fixLongs(Object p)
{
    String t = p.getClass().getName();
    if (t == "java.util.Map" || t == "java.util.HashMap" || t == "org.json.simple.JSONObject")
    {
        HashMap<Object, Object> n = new HashMap<Object, Object>(((HashMap<Object, Object>) p).size());
        Iterator<Entry<Object, Object>> it = ((HashMap<Object, Object>) p).entrySet().iterator();
        while (it.hasNext())
        {
            Entry<Object, Object> e = it.next();
            n.put(this.fixLongs(e.getKey()), this.fixLongs(e.getValue()));
        }
        return n;
    }
    else if (t == "java.lang.Long")
    {
        return new Integer(((Long) p).intValue());
    }
    else
    {
        return p;
    }
} 
```

# javascript - 使用 JS SDK 在页面上以您自己的身份（而不是页面）发表评论

> ID：13744965
> 
> 赞同：7
> 
> 时间：2012-12-06T13:48:48.240
> 
> 标签：javascript, jquery, facebook

我正在尝试为 Facebook 和网站之间同步的帖子建立一个评论系统。

到目前为止，一切正常，除了当我使用作为页面管理员的用户登录时，无论我尝试做什么，它都会作为页面发布。

我首先进入我的页面设置并取消选中“始终作为测试页面在您的页面上发表评论和发布，即使使用 Facebook 作为 X 也是如此。”

我的代码如下：

```
// fb-id is usually POST_ID

FB.api($comments.data('fb-id') + '/comments', 'post', {
    message: $('textarea', $comments).val(),   // this works fine
    from: FB.getUserID()   // no effect
}, function(){

    // callback here

}); 
```

我什至尝试撤销我在 /me/permissions 上执行 DELETE 的权限，并仅使用 publish_stream 获得一个新令牌，但它仍然作为页面发布。

我刚刚尝试使用 Graph API Explorer，从那里，如果我使用仅具有 publish_stream 的访问令牌发布到 POST_ID/comments，它也会从我的页面发布，而不是作为我的登录用户发布。

也刚刚尝试了 FB PHP SDK，使用相同的参数，不同的方式获取 access_token，并且发生了同样的事情。

任何人都知道我如何强制 FB 以登录用户的身份发布评论？或者这是 Facebook 的错误？我在网上看到有 1-2 个人抱怨这个问题，但没有解决。

**编辑**Facebook 的错误报告被接受并分配。这个问题现在可以关闭，因为它是一个有效的错误。

# objective-c - NSNotificationCenter 和安全多线程

> ID：13744970
> 
> 赞同：8
> 
> 时间：2012-12-06T13:48:56.883
> 
> 标签：objective-c, multithreading, nsnotificationcenter

~~鉴于即使在方法调用正在进行时对象也可能被释放（[链接](https://stackoverflow.com/questions/13737201/can-an-objective-c-object-be-deallocated-while-an-instance-method-is-being-invok)）~~ *，对象注册并接收将在与其期望的线程不同的线程上传递的通知是否安全解除分配？

作为参考，[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/NotificationCenters.html)指出

> 在多线程应用程序中，通知总是在发布通知的线程中传递，这可能与观察者注册自己的线程不同。

同样重要的是 NSNotificationCenter 不会保留对已注册以接收通知的对象的强引用。

这是一个可能使情况更加具体的示例：

```
- (id)init {
    self = [super init];
    if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:SomeNotification object:nil];
    }
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (void)handleNotification:(NSNotification *)notification {
    // do something
} 
```

具有此实现的对象在线程 X 上接收 SomeNotification。在 -handleNotification: 返回之前，对该对象的最后一个强引用（在我可以看到的代码中）被破坏。

1.  我的想法是否正确：

    一种。如果 NSNotificationCenter 在调用 -handleNotification: 之前对该对象进行了强引用，则在 -handleNotification: 返回之前不会释放该对象，并且

    湾。如果 NSNotificationCenter 在调用 -handleNotification: 之前没有对该对象进行强引用，则该对象可能在 -handleNotification: 返回之前被释放

2.  它以哪种方式（a 或 b）起作用？我还没有在文档中找到这个主题，但是在多线程环境中安全地使用 NSNotificationCenter 似乎有些重要。

**更新：**上述链接中的答案已更新，表明“ARC 围绕弱引用的调用保留和释放”。这意味着在方法调用正在进行时不应释放对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T15:03:26.913

我始终建议，如果您看到通知在除主线程之外的线程上飞来飞去，并且您看到在后台发生释放分配，那么您的线程可能太复杂了。ObjC 不是线程快乐的语言。大多数线程工作应该以队列上的短期块的形式出现。他们可以轻松地将通知发布回主线程，但不应该经常使用通知。

也就是说，当今管理多线程通知的最佳方式是`addObserverForName:object:queue:usingBlock:`. 这使您可以更好地控制生命周期。该模式应如下所示：

```
__weak id weakself = self;
id notificationObserver = [[NSNotificationCenter defaultCenter]
 addObserverForName:...
 object:...
 queue:[NSOperationQueue mainQueue]
 usingBlock:^(NSNotification *note){
   id strongself = weakself;
   if (strongself) {
     [strongself handleNotification:note];
   }
 }]; 
```

注意使用weakself/strongself。我们正在避免使用weakself 的保留循环。当我们回来时，我们首先采取强参考。如果我们仍然存在，那么我们将被锁定在块的其余部分（所以我们不能在 中释放`handleNotification:`）。如果我们不存在，则通知被丢弃。（请注意，弱引用在调用之前有效地归零`dealloc`。请参阅[objc_loadWeak](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#runtime.objc_loadWeak)。）我在`mainQueue`这里使用，但您当然可以使用另一个队列。

在“旧时代”（10.6 之前），我通过控制对象生命周期来围绕这个问题进行设计。基本上，我的设计使得短期对象不会监听可能来自其他线程的通知。这比听起来要容易得多，因为在 10.6 之前的代码中，线程可以保持非常少见（而 IMO，仍应保持在低水平）。`NSNotificationCenter`是为那个低线程世界设计的。

另请注意，与`-[NSNotificationCenter addObserver:selector:name:object:]`,不同的是，它`-[NSNotificationCenter addObserverForName:object:queue:usingBlock:]`返回一个充当观察者的不透明对象。您必须跟踪此对象，以便以后可以删除观察者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T08:54:06.127

NSNotificationCenter 不对对象进行强引用，因此必须在释放前移除观察者。启用 ARC 时，如果正在调用 handleNotification，则不会释放观察者，因为调用 handleNotification 会增加其保留计数。如果在通知发布之前观察者被释放，NSNotificationCenter 将在您编写 dealloc 方法时将其从观察者中删除，以便不会调用 handleNotification。NSNotificationCenter 在发布通知时同步调用通知处理程序。

# telerik-mvc - Telerik Grid GridColumnSettings 问题

> ID：13744973
> 
> 赞同：0
> 
> 时间：2012-12-06T13:49:10.043
> 
> 标签：telerik-mvc

如何按照正确的方式进行操作：将列模板分配给 GridColumnSettings 中的列我的意思是：

```
@Html.Telerik().Grid. .. .Columns(c => c.Bound(t.Name).Template(tp => Html.ActionLink... 
```

工作正常

但是，当我在代码隐藏中创建 ColumnSetting 并将其传递给查看时，

```
@Html.Telerik().Grid ... Columns(c => c.LoadSettings(Model.Columns)) 
```

我注意到 GridColumnSetting 类中没有 Template 属性那么，如果列设置是从服务器传递的，如何将 Template 分配给列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:31:09.217

这是不支持的，因为您无法在控制器中访问视图的响应写入方法 - 它仅在视图中可用（网格内部使用此方法来写入其输出）。这就是 Grid 列设置中没有 Template 方法的原因。

# .net - Assembly Reference - System.BadImageFormatException error

> ID：13744976
> 
> 赞同：1
> 
> 时间：2012-12-06T13:49:28.203
> 
> 标签：.net

I am referencing to an assembly built on .net 2.0 in .net 3.5 project. Its working fine on Windows xp machine, but when deploying on Win2003 64 bit

I am getting error below

```
System.BadImageFormatException: Could not load file or assembly 'Wrapper, Version=5.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.

WRN: Assembly binding logging is turned OFF. To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1\. Note: There is some performance penalty associated with assembly bind failure logging. To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

Project is built on Win xp 32 bit machine and then deployed using wix installer, Tried manually replacing assembly but didn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:00:14.007

您应该检查程序集的构建属性`Wrapper`。我怀疑它设置为 32 位（x86）。您需要它是 AnyCpu 或 x64 才能加载到 64 位 CLR。

现在，如果它实际上是非托管代码的包装器，您可能需要两个不同版本的程序集——一个用于 32 位，一个用于 64 位。

另一种选择是将您的*应用程序*更改为 32 位。目前尚不清楚您正在运行哪种应用程序，或者这是否合适 - 但值得考虑。

# r - Violinplot in R with discrete values

> ID：13744979
> 
> 赞同：3
> 
> 时间：2012-12-06T13:49:45.597
> 
> 标签：r, graphics, ggplot2, data-visualization, boxplot

I'm trying to create a violin plot in R from count data. The data I use is a number of mutations that is found in each sample for each source.

It looks something like this:

```
2 Source1
8 Source2
0 Source1
1 Source1
9 Source2
... 
```

I already used the code below to create several plots.

```
ggplot(df_combined, aes(factor(names), y=mutations)) + 
geom_violin() +
geom_boxplot(width=.1, outlier.size=0, fill="grey50") +
stat_summary(fun.y=median, geom="point", fill="white", shape=21, size=4) +
xlab("Source") +
ylab("Number of mutations") +
theme(axis.text = element_text(colour = "black"))` 
```

While most of them show up just fine, some of them start to 'wobble' (best way I can explain it) Here is an example that doesn't work.

![plot](../Images/79c01fea3ecc1f9eb83a3572447f783e.png)

I guess this is because my data is discrete and not continuous but I can't find anything on how to change this for the violin plot. Is there any way I can get this to work with ggplot2 and geom_violin?

Data below:

```
structure(list(mutations = c(6, 6, 6, 6, 6, 6), names = structure(c(1L, 1L, 1L, 1L, 1L,   
1L), .Label = c("1kG", "CG"), class = "factor")), .Names = c("mutations", "names"), 
row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:21:41.730

我[在 ggplot2 论坛上](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/JT653NWKilQ)从 Winston Chang 那里得到了答案。诀窍是使用`geom_violin(adjust=2)`，这将使图形平滑。

# ruby-on-rails - Assign new value to the fetched data from query in rails

> ID：13744986
> 
> 赞同：0
> 
> 时间：2012-12-06T13:50:10.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, strftime

I'm trying to format the date which is received from the query in rails but the value is not updated. Here is my code :-

```
@data = "My query"
@data.each do |eventdata|
      eventdata.start_date = eventdata.start_date.strftime("%Y-%m-%d %I:%M %p")
      puts "*******************"+eventdata.start_date.to_s
      eventdata.end_date = eventdata.end_date.strftime("%Y-%m-%d %I:%M %p")
end 
```

The date received from my ajax call is in this format `'2012-12-06T00:00:00+05:30'`,it is not updated. What could be the issue?

Also the event value printed on my console is `******************2012-12-06 00:00:00 +0530`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:53:21.143

尝试

```
 eventdata.start_date.strftime("%Y-%m-%d %I:%M:%p") 
```

或者

```
 eventdata.start_date.strftime("%Y-%m-%d %H:%M:%S") 
```

# c++ - 将文件“反编译”为原始二进制代码

> ID：13744990
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:50:27.093
> 
> 标签：c++, binary, decompiler

我想将文件反编译成（/读为）原始二进制代码。我还没有找到任何关于它的东西。甚至可能吗？它必须是为了让计算机运行它，但某些操作系统可能不允许读取它。

**编辑：让我们明确答案。我想从（例如）一个 .txt 文件开始，并以 0 和 1 的数组结束**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:15:34.283

存储在 Windows 和 Linux 等操作系统的文件系统上的文件不需要像您想象的那样“反编译”。它们已经存储为二进制数据。

剩下要做的就是简单地读取文件，但您需要使用正确的工具。

如果您使用流 I/O 之类的东西来使用流操纵器读取文件，则应考虑流操纵器用于*格式化*I/O。但是你不想要格式化的 I/O，你想要未格式化的 I/O。

考虑这个例子。如果您的文件`c:\temp\test.txt`包含：

> 你好世界。

...并运行此代码：

```
#include <fstream>
#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
    ifstream f("c:\\temp\\test.txt", ios_base::binary|ios::in);
    for( char c = 0; f.get(c); )
    {
        cout << c << "\t" << "0x" << hex << static_cast<int>(c) << endl;
    }
} 
```

你会看到输出是：

```
H       0x48
e       0x65
l       0x6c
l       0x6c
o       0x6f
,       0x2c
        0x20
w       0x77
o       0x6f
r       0x72
l       0x6c
d       0x64
.       0x2e
        0xd

        0xa 
```

十六进制数字和显示的字符是保存数据，只是格式不同。没有“反编译”步骤或类似的东西。此时剩下要做的就是将此数据存储在 a 之类的某个地方`vector<char>`，并且可能重新格式化输出，以便它以二进制而不是十六进制或 ASCII 显示这些值。我将把它作为练习留给读者。

# ios - Getting thumbnails for files(first page) using SkyDrive api ios

> ID：13744993
> 
> 赞同：2
> 
> 时间：2012-12-06T13:50:41.200
> 
> 标签：ios, xcode, ios-simulator, ios5.1, onedrive

Am created one ios books reader application.. In this application am integrated google drive and skydrive.. Now i can able to signin and retrive datas from google drive and skydrive..
In google drive i can able to get thumbnail views of my files.. In google drive have an option for getting thumbnails.. Using thumbnail url.
In sky drive i searched a lot i cant able to get for this.. Is it possible to get thumbnails of my files(First page) in Sky drive
Really am working on two days in that.. I cant able to get any resource.. So pls help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:08:46.677

您需要联系 SkyDrive API 开发人员。他们的文档不完整。也许有一种方法可以获取文件的缩略图，但是文档中没有说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T00:53:35.037

是的，有一种方法可以从 SkyDrive iOS API 获取文件缩略图。在您从 SkyDrive API 收到的 JSON 数据模型中，检索键“图片”的值。此值是带有缩略图下载 URL 的字符串。下面是你如何得到它（假设 jsonFileModel 是一个 NSDictionary* 代表一个 SkyDrive 文件）：

```
 NSString *thumbnailDownloadURL = [jsonFileModel objectForKey: @"picture"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:47:59.163

我理解你的诚意。没有人会为此提供帮助，因为没有直接获取第一页缩略图的来源。因此，您应该努力工作并自己编写代码来完成这项工作。祝你好运...

谢谢，森希尔。

# python - 为什么 Go 的 map 迭代顺序在打印时会发生变化？

> ID：13744996
> 
> 赞同：3
> 
> 时间：2012-12-06T13:50:57.000
> 
> 标签：python, map, go

```
package main

import "fmt"

func main(){
    sample := map[string]string{
    "key1":"value1",
    "key2":"value2",
    "key3":"value3",
    }
    for i := 0;i<3;i++{
        fmt.Println(sample)
    }
} 
```

上面的 go 代码只打印了 3 次 map[string]string。

我希望它是一个固定的输出，但它显示如下：

```
map[key3:value3 key2:value2 key1:value1]
map[key1:value1 key3:value3 key2:value2]
map[key2:value2 key1:value1 key3:value3] 
```

**它因人而异！**

在 python 中：

```
#!/bin/env python
#encoding=utf8

sample = {
    "key1":"value1",
    "key2":"value2",
    "key3":"value3",
}
for i in range(3):
    print sample 
```

输出：

```
{'key3': 'value3', 'key2': 'value2', 'key1': 'value1'}
{'key3': 'value3', 'key2': 'value2', 'key1': 'value1'}
{'key3': 'value3', 'key2': 'value2', 'key1': 'value1'}` 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T13:53:13.727

您不能依赖获得密钥的顺序。语言规范[说](http://golang.org/ref/spec#Map_types)“映射是一组无序的元素”，后来“映射的迭代顺序没有指定，并且不保证从一次迭代到下一次迭代顺序相同”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T14:12:15.863

是的，它是变化的，甚至是有意的（未修改地图的迭代之前一直很稳定）。目的是尽早发现有人错误地假设稳定迭代保证的情况。此外，随着地图实现的自由度增加，未来可能会对该部分运行时库进行优化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T14:06:16.310

Python 不保证迭代的顺序，但它确实保证只要您不修改调用之间的字典，顺序就会保持稳定：

```
If items(), keys(), values(), iteritems(), iterkeys(), and itervalues() are
called with no intervening modifications to the dictionary, the lists will 
directly correspond. 
```

Go 也不保证。从您的示例中看起来，Go 中的顺序可能是稳定的，只有起点会有所不同，但因为没有任何东西可以保证不依赖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T15:56:25.340

据我了解，您不应该依赖地图迭代器的顺序，因为它没有逻辑顺序。

除此之外，我相信 Go 的地图迭代实现是故意随机的（[http://nathanleclaire.com/blog/2014/04/27/a-surprising-feature-of-golang-that-c​​olored](http://nathanleclaire.com/blog/2014/04/27/a-surprising-feature-of-golang-that-colored-me-impressed/) -me-impressed / 和 [http://www.confreaks.com/videos/3419-gophercon2014-opening-day-keynote](http://www.confreaks.com/videos/3419-gophercon2014-opening-day-keynote)）这是为了阻止人们在他们的代码中依赖它。

我希望这会有所帮助。

# redirect - 将目录重定向到 Azure url

> ID：13744998
> 
> 赞同：2
> 
> 时间：2012-12-06T13:51:00.900
> 
> 标签：redirect, azure, azure-blob-storage

我已经在 webconfig 中编写了这条规则，以将我在 thsi 文件夹中的所有资源重定向到我的 azure blob，但它没有在那里显示任何图像。

```
 <rule name="RewriteIncomingCdnRequest" stopProcessing="true">
      <match url="^/CDN/(.*)$" ignoreCase="false"/>
      <action type="Redirect" redirectType="Permanent" url="https://stplatformstorage.blob.core.windows.net/static/{R:0}" />
    </rule> 
```

[http://sttest.azurewebsites.net/CDN/image_cdn-trans.png](http://sttest.azurewebsites.net/CDN/image_cdn-trans.png) 这应该重定向到天蓝色存储....

存储上的图像 url [https://stplatformstorage.blob.core.windows.net/static/image_cdn-trans.png](https://stplatformstorage.blob.core.windows.net/static/image_cdn-trans.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:27:59.880

你有一个错误的正则表达式 - 如所写， url="^/CDN/(.*)$" 只会匹配 /CDN/image_cdn-trans.png - 因为“^” 表示“从...开始” -你真正需要的是 url=" `^.*/CDN/(.*)$`" 然后使用匹配组 {R:1} - 用于：

```
<rule name="RewriteIncomingCdnRequest" stopProcessing="true">
  <match url="^.*/CDN/(.*)$" ignoreCase="false"/>
  <action type="Redirect" redirectType="Permanent" url="https://stplatformstorage.blob.core.windows.net/static/{R:1}" />
</rule> 
```

URL Rewrite 模块有一个很好的测试功能来测试你的正则表达式。