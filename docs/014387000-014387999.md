# StackOverflow 问答 14387000-14387999

# eclipse - 在 Eclipse 中创建 Mule 项目

> ID：14387007
> 
> 赞同：3
> 
> 时间：2013-01-17T19:53:02.750
> 
> 标签：eclipse, mule, mule-studio

我已经开始和骡子合作了。我正在与 Mule Studio 合作。这看起来不错。但是当我想在 Eclipse 中创建一个 Mule 项目时，我感到很震惊。请建议我如何在 Eclipse 中创建 Mule 项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T14:33:15.047

## 选项 1：使用适用于 Eclipse 的 Mule IDE 插件。

您可以使用 eclipse 中的 Mule IDE 插件。这有助于在 Eclipse 中创建 mule 项目。

要添加插件，请启动 eclipse 并导航到 **帮助->安装新软件 -> 添加站点并选择呈现的工件**

添加 muleide (mule 插件) - [http://dist.muleforge.org/mule-ide/updates/3.4/](http://dist.muleforge.org/mule-ide/updates/3.4/)

然后在插件安装后重新启动 Eclipse，您可以在 New Project 选项下创建一个 Mule 项目。

## 选项 2：没有 Mule IDE。使用 Maven 和 Eclipse。

打开命令提示符。运行以下 Maven 命令以创建 Mule 项目。

```
mvn org.mule.tools:mule-project-archetype:3.3.0:create -DartifactId=MySampleMuleProj -DmuleVersion=3.3.0 
```

然后运行以下命令。

```
mvn clean compile
mvn eclipse:clean eclipse:eclipse 
```

在此打开 Eclipse IDE 之后，将此项目导入 Eclipse 工作区。

> *注意：使用 Import "Existing Maven Project" 选项来导入这个项目。*

要在 Eclipse 中运行 Mule 项目，请执行以下步骤。

```
1\. Goto Run -> Run Configurations in eclipse and select Java Application.
2\. Click on New launch configuration and enter name of the configuration(for ex. MyMuleProj).
3\. Select MyMuleProj as a project and Main class "org.mule.MuleServer".
4\. Click on Arguments tab and enter Program arguments "-config src/main/app/mule-config.xml". 
```

您可以看到 Mule 项目启动并运行。

:) 快乐学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:34:25.070

您可以在 eclipse 中导入现有项目，或者如果您有 Maven 项目，请创建一个`Other`项目并选择 Maven-> Checkout Maven Projects from SCM 或创建一个 Java 项目。有很多方法可以做到这一点。

`MuleServer`我通过类在eclipse中运行我的mule项目并`mule-config.xml`作为程序参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-21T12:47:52.213

实际上 Mule Anypoint Studio 是基于 Eclipse 构建的。如果要导入任何 maven 项目，请执行以下操作： mvn clean compile mvn eclipse:clean eclipse:eclipse

# vba - VBA 读取/搜索文本文件

> ID：14387015
> 
> 赞同：2
> 
> 时间：2013-01-17T19:53:31.380
> 
> 标签：vba, excel

我正在尝试读取一个包含 1147 行的文本文件。下面的代码仅读取第 1050-1147 行。我的目标是读取整个文件并提取位于不同行的特定值以在脚本中使用。一个示例是包含“BlockList: 2”的行中的值 2。我已经包含了文本文件格式的片段，因为它的格式与我遇到的任何示例都不同（第 1116-1128 行）；我试图访问的值的缩进与显示的第一行相同（不确定这是否重要）。

```
 fixation.OffsetTime: 426611
    *** LogFrame End ***
Level: 2
*** LogFrame Start ***
Procedure: TestProc
BlockList: 2
BlockList.Cycle: 1
BlockList.Sample: 2
Running: BlockList
*** LogFrame End *** 
```

级别：1 *** LogFrame 开始 *** 实验：ChoiceofLotteries_fMRI_I

到目前为止的代码：

```
Sub OpenTextFileTest()
    Const ForReading = 1, ForWriting = 2, ForAppending = 3
    Dim fs, f, contents, var1
    Set fs = CreateObject("Scripting.FileSystemObject")
    Set f = fs.OpenTextFile("C:\NameOfFile.txt", 1)
    contents = f.ReadAll
    f.Close
    Debug.Print contents
End Sub 
```

有没有人有任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:59:05.217

试试这个（*关于如何提取值的示例`BlockList:`*）

```
Sub Sample()
    Dim MyData As String, strData() As String
    Dim i As Long

    '~~> Replace this with the relevant file
    Open "C:\NameOfFile.txt" For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)

    For i = LBound(strData) To UBound(strData)
        If InStr(1, strData(i), "BlockList:", vbTextCompare) Then
            Debug.Print Split(strData(i), ":")(1)
            Exit For
        End If
    Next i
End Sub 
```

**跟进**

您拥有的文本文件是`Unicode`文本文件，因此您遇到了这个问题。如果你在编码中做a`SaveAs`然后选择`ANSI`然后运行上面的代码，它可以工作吗？

单击[此处了解](http://vba4all.wordpress.com/category/vba-macros/reading-txt-files-from-vba/)[使用 VBA 读取 txt 文件](http://vba4all.wordpress.com/category/vba-macros/reading-txt-files-from-vba/)的另一种方法

# python - 使用 python 与 Flash 应用程序交互

> ID：14387018
> 
> 赞同：0
> 
> 时间：2013-01-17T19:53:37.723
> 
> 标签：python, flash, testing, automated-tests, jython

我正在考虑使用 python 对 Flash 广告单元进行一些功能测试。目前，我们有一个广告（在 Flash 中）有 N 个需要“点击”的位置（可以定义为 x,y）。我想使用 python，但我知道 Java 会这样做。

我也考虑过 Jython + Sikuli，但想知道是否有一个仅限 python 的库或工具来执行此操作。*如果有本机*python 选项，我宁愿不运行 Jython + Sikuli 。

TIA。

@user1929959 来自 pyswftools 页面，“目前，该库可用于 Python 应用程序（包括基于 Web 的应用程序）以动态生成 Flash 动画。”。并且从瓶子闪光页面，“这个插件在瓶子里启用闪光消息。”。也不帮我，除非我忽略了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:11:18.960

我在网上看到了很多方法，但大多数似乎都涉及通过 JS 公开 Flash，然后使用 JS 接口，如果您尝试测试您没有的东西，这会有点问题dev 访问或需要处于类似 prod 的状态以进行测试。当然，即使您这样做，也不是真正模拟用户交互，因为您是通过 API 工作的。

如果您可以使用相对于运行 Flash 组件的页面元素的固定像素位置可靠地为 Flash 组件建模，那么您应该能够使用 Selenium Webdriver 定位鼠标光标并发送单击命令，而无需实际破解 Flash 本身。我不是 100% 确定这会奏效，但它似乎至少值得一试。验证会有点棘手，但我认为你应该能够通过某种形式的图像比较来做到这一点。我看到的一些 Flash 自动机实际上在后台使用图像处理来控制输入和输出，因此这似乎是一种与之交互的合法方式。

# javascript - 更多关于canjs模型的restfunctions

> ID：14387020
> 
> 赞同：3
> 
> 时间：2013-01-17T19:53:46.997
> 
> 标签：javascript, rest, canjs, canjs-model

有没有办法在模型上添加更多的其余绑定，然后只添加四个 CRUD 函数？

```
var Customer = can.Model({
    findAll: 'GET /customer',    
    findOne: 'GET /customer/{id}',
    create: 'POST /customer',
    update: 'PUT /customer/{id}',
    destroy: 'DELETE /customer/{id}'
    //maybeAnOtherMethod: 'PUT /customer/{id}/activate'
}, {

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:32:18.227

REST 背后的理念是您拥有资源并在这些资源上执行操作。资源本身由 URL 描述，动作由 http 动词描述。

因此，`GET`阅读动作是`/customer/{id}`描述您要加载的资源。这可以。因此，您的所有五种方法都很好，因为[`can.Model`旨在使用基本 REST 接口处理 CRUD 功能](http://canjs.com/docs/can.Model.html#section_Getandmodifydatafromtheserver)。

最后一个（已注释）的问题是您在 url 中混合了资源和操作。“激活”绝对是动词，没有资源。因此它不属于那里，但它应该是一个http动词。这就是为什么您找不到对这种 REST 接口编程方式的支持——仅仅是因为它不是 REST。

虽然您可以重新设计 API 以将其`activate`视为资源，但客户的激活或未激活状态更有可能是`customer`资源的一部分。您将使用该`update`方法，因为您正在更改有关客户的某些内容。在 CanJS 中，它看起来像这样：

```
Customer.findOne({id: 5), function( customer ){
  customer.attr('active', true);
  customer.save();
} 
```

长话短说：在 REST 中，url 都是关于名词的，http 方法都是关于动词的。

这是否有助于使事情变得更清晰？

# ruby-on-rails - ActiveRecord/Rails 中的原子插入或增量

> ID：14387022
> 
> 赞同：11
> 
> 时间：2013-01-17T19:53:51.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

在 Rails 中为带有计数器的模型实现原子插入/更新的最佳方法是什么？我试图解决的问题的一个很好的类比是具有两个字段的“喜欢”计数器：

```
url   : string
count : integer 
```

插入时，如果当前没有匹配 url 的记录，则应创建计数为 1 的新记录；`count`否则应该增加现有记录的字段。

最初我尝试了如下代码：

```
Like.find_or_create_by_url("http://example.com").increment!(:count) 
```

但不出所料，生成的 SQL 表明`SELECT`发生在`UPDATE`事务之外：

```
Like Load (0.4ms)  SELECT `likes`.* FROM `likes` WHERE `likes`.`url` = 'http://example.com' LIMIT 1
(0.1ms)  BEGIN
(0.2ms)  UPDATE `likes` SET `count` = 4, `updated_at` = '2013-01-17 19:41:22' WHERE `likes`.`id` = 2
(1.6ms)  COMMIT 
```

是否有用于处理此问题的 Rails 习语，或者我是否需要在 SQL 级别实现它（从而失去一些可移植性）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-23T19:10:01.757

您可以使用[悲观锁定](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html)，

```
like = Like.find_or_create_by_url("http://example.com")
like.with_lock do
    like.increment!(:count)
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T15:00:42.297

到目前为止，这是我想出的。这假定`url`列上有一个唯一索引。

```
begin
  Like.create(url: url, count: 1)
  puts "inserted"
rescue ActiveRecord::RecordNotUnique
  id = Like.where("url = ?", url).first.id
  Like.increment_counter(:count, id)
  puts "incremented"
end 
```

Rails 的`increment_counter`方法是原子的，并转换为 SQL，如下所示：

```
UPDATE 'likes' SET 'count' = COALESCE('count', 0) + 1 WHERE 'likes'.'id' = 1 
```

捕获异常来实现正常的业务逻辑似乎相当难看，所以我会很感激改进建议。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-19T09:37:08.923

我不知道*在单个查询*中实现原子增量的任何 ActiveRecord 方法。你自己的答案是你能得到的。

所以你的问题可能无法使用 ActiveRecord 解决。请记住：ActiveRecord 只是一个映射器，用于简化某些事情，同时使其他事情复杂化。有些问题只能通过对数据库的普通 SQL 查询来解决。您将失去一些可移植性。下面的示例适用于 MySQL，但据我所知，不适用于 SQLlite 等。

```
 quoted_url = ActiveRecord::Base.connection.quote(@your_url_here)
::ActiveRecord::Base.connection.execute("INSERT INTO likes SET `count` = 1, url = \"#{quoted_url}\" ON DUPLICATE KEY UPDATE count = count+1;"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T21:10:51.383

Rails 支持[Transactions](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)，如果这是您正在寻找的，那么：

```
Like.transaction do
  Like.find_or_create_by_url("http://example.com").increment!(:count)
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-18T18:34:47.787

到目前为止我最喜欢的解决方案：

```
Like.increment_counter(
  :count, 
  Like.where(url: url).first_or_create!.id
) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-08-22T21:11:15.980

对于这个用例和其他用例，我认为`update_all` [方法](https://bibwild.wordpress.com/2013/06/03/activerecord-atomic-check-and-update-through-optimistic-locking/)是最干净的。

```
num_updated =
  ModelClass.where(:id             => my_active_record_model.id,
                   :service_status => "queued").
             update_all(:service_status => "in_progress")
if num_updated > 0
  # we updated
else
  # something else updated in the interim
end 
```

不完全是您的示例，只是从链接页面粘贴。但是您可以控制`where`条件以及要更新的内容。非常漂亮

# ios - 无法在 UITextView 中使 URL 可点击

> ID：14387024
> 
> 赞同：42
> 
> 时间：2013-01-17T19:54:12.293
> 
> 标签：ios, url, interface-builder, uitextview, clickable

我正在使用 Interface Builder 来布局我的应用程序。我有一个包含一些文本的 UITextView，其中一部分是我希望使其可点击的 URL（例如启动浏览器）。我已经阅读了如何执行此操作并相信我做得正确，但是当 URL 显示为蓝色/可单击时，在 iPhone 模拟器中单击它不起作用。什么都没发生。

我的控制器：

```
@interface FirstViewController : UIViewController <UISearchBarDelegate>
@property (nonatomic, retain) IBOutlet UITextView *review;
@end 
```

在我的实现中我`@synthesize review;`（并且能够操纵视图的文本，所以不要认为这是问题）。

在IB我有：

![IB设置](../Images/5998347030abaa8cb12d158bc8b53475.png)

..然后当我去设置文本（并尝试使视图中的 URL 可点击）时，我会：

```
self.review.text = content;
// My understanding is that this makes URLs clickable...
self.review.dataDetectorTypes = UIDataDetectorTypeLink; 
```

...显示如下：

![模拟器输出](../Images/e3d0bbb6325e05ecb8a2c3670f94ce8d.png)

...这看起来真的很想工作，但是单击 URL 时没有任何反应。我错过了什么？

**- 更新 -**

尝试添加`self.review.editable = NO;`以响应 Dixit Patel 的回答，但它没有解决问题：

```
self.review.text = content;
// My understanding is that this makes URLs clickable...
self.review.editable = NO; 
self.review.dataDetectorTypes = UIDataDetectorTypeLink; 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-12-02T17:42:32.923

**检查 textview Attributes Inspector**中的“Selectable”和“Links”复选框：

![在此处输入图像描述](../Images/ec813b96509945b8cb1542d8af8e2f13.png)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-17T20:00:35.307

尝试使用这个希望这对你有帮助

默认情况下，链接是不可点击的`UITextView`。但幸运的是，只需几行简单的代码就可以启用它们：

```
self.review.editable = NO;//required
self.review.selectable = YES;//required
self.review.dataDetectorTypes = UIDataDetectorTypeLink; 
```

不幸的是，您无法使用可`UITextView`点击的链接进行编辑。如果将 editable 设置为 YES，则所有链接都将被视为常规文本。

**编辑**

你有没有正确检查它可能在你的 .xib 文件中禁用了 UITextview。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-12-03T20:00:33.623

问题是`User Interaction Enabled`没有在 IB 属性检查器的视图部分底部检查。

# php - Cakephp 显示由表单中的选择元素设置的视图字段

> ID：14387025
> 
> 赞同：1
> 
> 时间：2013-01-17T19:54:12.377
> 
> 标签：php, cakephp, select, cakephp-2.0, formhelper

我在显示由`FormHelper`. 我已经搜索了互联网，但似乎无法找到答案。这是场景：

我有一个有很多选项的调查表。在模型中，我将这些项目放入一个数组中，例如 ( `$frequencyOptions`) 以及何时`formhelper`使用，

```
$this->Form->input('frequency',array("options"=> $frequencyOptions)); 
```

目前，选项值是数组索引，如下所示：

```
 <option value="">(choose one)</option>
    <option value="0">Rare</option>
    <option value="1">Frequent</option>
    <option value="2">Moderate</option> 
```

当然我知道如果我在构造`$frequencyOptions`变量时也设置了键

```
$frequencyOptions = array("Rare" => "Rare", ... 
```

我将能够将值存储在文本中。

但是，由于其中一些选项非常长，我更愿意将它们保存在数据库中的 INT 中。

然而，我现在面临的挑战是如何在索引页面的“列表”中显示这些字段。当我使用表单域在视图或编辑操作中显示时，没关系，因为选择元素将再次使用。但是，如果我想以纯文本形式显示它，我应该如何“翻译”它？

我能想到的一件事是在模型中创建这些“转换”方法，但我认为在视图中调用模型方法在 MVC 中并不是一个好的做法。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:29:08.547

我认为向您的模型添加一个方法将是可行的方法。这个怎么样：

```
// In your Model class

// Store the index-to-name map in the Model as well
var $frequencyOptions = array(...);

public function translateFrequency(&$data) {
    foreach ($data as &$record) {
        $index = $record['ModelName']['frequency'];
        $record['ModelName']['frequency'] = $this->frequencyOptions[$index];
    }
}

// In your Controller action:
$data = $this->ModelName->find(...);
$this->ModelName->translateFrequency($data); 
```

然后它应该在传递到索引页面时显示人类可读的值。如果愿意，可以更改上述方法，使其`$this->data`在模型内部起作用。

*注意：*如果该方法也适用于单个记录数据数组，则必须更改该方法。

# video-streaming - 带宽/QOS 测试 - 付费或免费

> ID：14387026
> 
> 赞同：0
> 
> 时间：2013-01-17T19:54:14.990
> 
> 标签：video-streaming, bandwidth, bandwidth-throttling, qos

我必须支持一个视频丰富的网站。许多用户都在城市/市政计算机和网络上。当用户报告性能问题（视频加载缓慢或挂起）时，我们会验证服务器和骨干网以及多个端点。我们正在重新设计媒体以从内容交付网络结构中获取内容，但我仍然需要一个好的工具来要求最终用户运行以验证他们从防火墙内部消费视频的能力。

我可以在我的 microsoft IIS 上安装服务或软件包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T21:58:30.150

许多网络速度测试提供商都支持您可以集成到您自己网站中的版本。例如：

*   [http://www.speedtest.net/mini.php](http://www.speedtest.net/mini.php)
*   [http://www.broadbandspeedtest.co.uk/about/](http://www.broadbandspeedtest.co.uk/about/)

# java - 如何更好地转换 Java 中的所有 Set 元素？

> ID：14387027
> 
> 赞同：-1
> 
> 时间：2013-01-17T19:54:16.947
> 
> 标签：java, performance, set, loops

我已经设置为：

```
Set<String> 
```

我需要对 Set 的每个元素进行拆分；并创建仅包含第二个元素的新 Set。我应该直接一一制作还是以更好的方式存在？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:01:15.723

```
Set<String> suffixSet = new HashSet<String>();
for (String s : inputSet) {
      suffixSet.add(s.split(";")[1])
} 
```

当 s 没有 ; 时，我还会添加适当的错误检查和处理。展示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:08:20.880

如果您可以放松对输出 a 的约束，`Set<String>`您可以使用 Guava 并将元素的转换推迟到通过[Collections2#transform()](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Collections2.html#transform%28java.util.Collection,%20com.google.common.base.Function%29)方法`Collection<String>`枚举元素之前。您只需要编写一个自定义函数来对单个元素执行拆分。

但是如果你不能/不应该放松这个约束，你最好留给已经提出的单独迭代（因为它会更清晰）。

代码看起来像：

```
Set<String> input; //Given
Collection<String> output = Collections2.transform(input, new Function<String,String>() {
    @Override
    public String apply (String element) {
        // As JohnnyO says, add appropriate edge case checking...
        return element.split(";")[1]; 
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T19:58:03.113

由于您没有显示代码，我们只能猜测您要做什么。您需要遍历`Set`并拆分每个`String`. 如果需要，您可以使用[拆分](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T20:02:06.603

信息这么少，很难说。您可以遍历集合`split`并添加到另一个`Set`.
或者您可以替换`Set`为例如`HashMap`，当您创建映射时，将字符串的第一部分作为键，将第二部分作为值，以便您可以在需要快速检索第二部分。
或者如果你自己创建字符串，直接将它们放在不同的集合中
或者......（你说得不够）以提供更多选项

# asp.net-web-api - Asp.NET Web Api 路由

> ID：14387029
> 
> 赞同：1
> 
> 时间：2013-01-17T19:54:21.667
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我的 WebApiConfig.cs 中有以下代码

```
 config.Routes.MapHttpRoute(
        name: "Action",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional }
   ); 
```

ABC控制器.cs

```
 public class ABCController : ApiController
 {        
     [AcceptVerbs("GET")]
     [ActionName("GetABCByXYZById")]
     public string GetABCByXYZById(int xYZId)
     {                
         return "GetABCByXYZById";
     }
 } 
```

当我尝试调用 API 时，它说无法在控制器中找到操作。

```
 /api/ABC/GetABCByXYZById/12 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:06:03.077

这是因为您的 routeTemplate 使用了`{id}`action 参数的名称，但您的 action 实际上接受了一个带有 name 的参数`xYZId`。

尝试将您的操作参数更改为被调用`id`，它应该可以工作：
`public string GetABCByXYZById(int id)`

# eclipse - 如何将 Eclipse 升级到 3.8 版本？

> ID：14387031
> 
> 赞同：0
> 
> 时间：2013-01-17T19:54:27.450
> 
> 标签：eclipse, updates

目前我正在运行带有 ADT 和 Android 插件的 Eclipse 3.6。现在我想将这个 Android Eclipse 更新到 3.8 版本。为此，我在 Eclipse 的首选项中更改了两件事：

1.  Eclipse 项目更新：http: [//download.eclipse.org/eclipse/updates/3.8](http://download.eclipse.org/eclipse/updates/3.8)

2.  朱诺：http: [//download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/](http://download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/)

    但问题是在下载时，它无法下载所有文件并显示下载错误。

那么，有什么办法可以将我的 Eclipse 从 3.6 更新到 3.8？

谢谢..

# c++ - 通过套接字接收 GET 请求

> ID：14387035
> 
> 赞同：0
> 
> 时间：2013-01-17T19:54:30.940
> 
> 标签：c++, windows, sockets, windows-7

如何通过套接字接收 GET 请求？例如我在浏览器中写：

> 127.0.0.1:41233/?data=mymessage

我希望我的应用程序收到“mymessage”。我写了这段代码，但 recv() 返回 WSAENOTCONN 错误，我不知道如何修复它。

```
int main() {
    WSADATA socketData;
    SOCKET portListener;
    struct sockaddr_in saInfo = {0};
    if ( WSAStartup( MAKEWORD(1, 1), &socketData ) != 0) {
        printf( "WSAStartup() error!" );
        return 0;
    }
    portListener = socket( AF_INET, SOCK_STREAM, 0 );
    if ( portListener == INVALID_SOCKET ) {
        printf( "socket() error!" );
    } 
    else {
        saInfo.sin_family = AF_INET;
        saInfo.sin_port = htons(41233);
        saInfo.sin_addr.S_un.S_addr = inet_addr( "127.0.0.1" );
        if ( bind( portListener, ( sockaddr * ) &saInfo, sizeof(saInfo)) == SOCKET_ERROR ) {
            printf( "bind() error!\n" );
            closesocket( portListener );
            return 0;
        }
        if ( listen( portListener, SOMAXCONN ) == SOCKET_ERROR ) {
            printf( "listen() error!\n" );
            closesocket( portListener );
            return 0;
        }
        if ( accept( portListener, NULL, NULL ) == INVALID_SOCKET ) {
            printf( "accept() error!\n" );
            closesocket( portListener );
            return 0;
        }
        char buf[128];
        int rcvCount;
        rcvCount = recv( portListener, buf, 128, 0 );
        printf( "Error: %d\n", WSAGetLastError() );
        if ( rcvCount > 0 ) {
            printf( "%s\n", buf );
        }
        closesocket( portListener );
    }
    WSACleanup();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T20:00:59.943

成功后`accept`，它会返回一个新*连接*的套接字，您应该使用它来读取数据。现在您正在丢弃它的返回值，除了检查`INVALID_SOCKET`. 正如预期的那样，`recv`不适用于`portListener`: `portListener`never 连接本身。

# language-design - 将类型术语中的自由变量提升为隐式函数参数

> ID：14387043
> 
> 赞同：1
> 
> 时间：2013-01-17T19:54:43.223
> 
> 标签：language-design, dependent-type

为了让我的问题有意义，我必须提供一些背景信息。

* * *

我认为拥有一种依赖类型的语言来推断一个函数的参数的存在和类型是很有用的`a`，该函数的其他参数和/或返回值的类型依赖于`a`. 考虑我正在设计的语言中的以下代码段：

```
(* Backticks are used for infix functions *)
def Cat (`~>` : ob -> ob -> Type) :=
  sig
    exs id   : a ~> a
    exs `.`  : b ~> c -> a ~> b -> a ~> c
    exs lid  : id . f = f
    exs rid  : f . id = f
    exs asso : (h . g) . f = h . (g . f)
  end 
```

如果我们做出两个（诚然，毫无根据的）假设：

1.  必须不存在无法从显式提供的信息中推断出的依赖关系。
2.  每个自由变量都必须转换为使用`def`or引入的最后一个标识符的隐式参数`exs`。

我们可以将上面的代码片段解释为等同于以下代码片段：

```
def Cat {ob} (`~>` : ob -> ob -> Type) :=
  sig
    exs id   : all {a} -> a ~> a
    exs `.`  : all {a b c} -> b ~> c -> a ~> b -> a ~> c
    exs lid  : all {a b} {f : a ~> b} -> id . f = f
    exs rid  : all {a b} {f : a ~> b} -> f . id = f
    exs asso : all {a b c d} {f : a ~> b} {g} {h : c ~> d}
                 -> (h . g) . f = h . (g . f)
  end 
```

这或多或少与以下 Agda 代码段相同：

```
record Cat {ob : Set} (_⇒_ : ob → ob → Set) : Set₁ where
  field
    id   : ∀ {a} → a ⇒ a
    _∙_  : ∀ {a b c} → b ⇒ c → a ⇒ b → a ⇒ c
    lid  : ∀ {a b} {f : a ⇒ b} → id ∙ f ≡ f
    rid  : ∀ {a b} {f : a ⇒ b} → f ∙ id ≡ f
    asso : ∀ {a b c d} {f : a ⇒ b} {g} {h : c ⇒ d} → (h ∙ g) ∙ f ≡ h ∙ (g ∙ f) 
```

显然，两个毫无根据的假设为我们节省了很多打字时间！

**注意：**当然，这种机制只有在原始假设成立时才有效。例如，我们无法正确推断出依赖函数组合运算符的隐含参数：

```
(* Only infers (?2 -> ?3) -> (?1 -> ?2) -> (?1 -> ?3) *)
def `.` g f x := g (f x) 
```

在这种情况下，我们必须明确提供一些附加信息：

```
(* If we omitted {x}, it would become an implicit argument of `.` *)
def `.` (g : all {x} (y : B x) -> C y) (f : all x -> B x) x := g (f x) 
```

可以扩展为以下内容：

```
def `.` {A} {B : A -> Type} {C : all {x} -> B x -> Type}
        (g : all {x} (y : B x) -> C y) (f : all x -> B x) x := g (f x) 
```

这是等效的 Agda 定义，用于比较：

```
_∘_ : ∀ {A : Set} {B : A → Set} {C : ∀ {x} → B x → Set}
      (g : ∀ {x} (y : B x) → C y) (f : ∀ x → B x) x → C (f x)
(g ∘ f) x = g (f x) 
```

**笔记结束**

* * *

上述机制可行吗？更好的是，是否有任何语言可以实现类似这种机制的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:13:38.457

这听起来像是[Coq 中的隐式泛化。](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual004.html#implicit-generalization)

# android - 单击嵌入式链接时，WebView 消失

> ID：14387048
> 
> 赞同：2
> 
> 时间：2013-01-17T19:54:53.087
> 
> 标签：android, browser, webview

我已经对此进行了很多谷歌搜索，但没有找到答案。我有一个 webview 作为与其他控件的整体布局的一部分。我使用 webview 来显示格式化文本（带有粗体和斜体字体的食谱描述）和 URL。URL 指向 Youtube 并且是完全限定的（即[http://www.youtube.com/watch?v=fyzyhuVgzRE](http://www.youtube.com/watch?v=fyzyhuVgzRE)）。当我单击 Web 视图中的链接时，Web 视图控件本身会从布局中消失（保留页面上的其余控件不变）并且默认 Web 浏览器**不会启动**。

它的行为就像我已将 Web 视图的可见性设置为 GONE，但我不操纵布局上任何控件的可见性。

LogCat 输出中的一个有趣线索是来自操作系统的 INFO 级别消息：

```
MotionRecognitionManager  .unregisterListener : / listener count = 0->0,
listener=android.webkit.ZoomManager$1@41ac2fc0 
```

有什么想法会导致这种行为吗？

*编辑*

以下是我在活动的 onCreate() 方法中设置 webview 的方法：

```
webView1 = (WebView)findViewById(R.id.webView1);
webView1.getSettings().setJavaScriptEnabled(true);
webView1.getSettings().setAllowFileAccess(true);
webView1.setWebViewClient(new MyWebViewClient()); 
```

和 MyWebViewClient 类：

```
private class MyWebViewClient extends WebViewClient {
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url != null && url.startsWith("http://")) {
            view.getContext().startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
            return true;
        } else {
            return false;
        }
    }
} 
```

奇怪的是，*shouldOverrideUrlLoading*从未被调用过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:18:14.527

好吧，我是个瘾君子。事实证明，锚的 href 属性中的双引号被加倍了。我的系统通过网络与 MySQL 数据库集成，我必须在 MySQL/PHP 和 Android/SQLite 之间进行大量数据转换。在这些转换之一中，我双重转义了 href 中的引号。那么应该是什么：

```
<a href="http://some_web_site">Link Text</a> 
```

而是呈现为：

```
<a href=""http://some_web_site"">Link Text</a> 
```

在 Web 视图中，生成的 URL 看起来不错。它被正确地强调并且看起来像任何其他 URL。奇怪的是，简单的双引号会导致这种行为。我会看看Android是否有这样的已知错误。至少 WebView 应该通过某种异常，而不是简单地从屏幕上消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:02:15.703

当 webview 尝试加载它无法处理的内容时，我遇到了这种类型的行为。使用 WebViewClient 拦截 ref 点击并发送意图以在外部应用程序中打开此 ref。[检查这个线程。](https://stackoverflow.com/questions/4810421/open-video-player-in-webview)

# selenium-webdriver - 脚本挂起是因为页面加载太快？

> ID：14387052
> 
> 赞同：0
> 
> 时间：2013-01-17T19:55:04.780
> 
> 标签：selenium-webdriver, robotframework

在单击链接或元素导致页面转换的情况下，我发现 Robot Framework 或 Selenium Webdriver 存在问题。即使窗口成功处理了点击，脚本也会挂起并停止运行，就好像它正在尝试点击请求的元素/链接一样失败。手动刷新 Webdriver 窗口以重新加载页面会启动脚本并从那里恢复。

我能想到的唯一一件事是在 Selenium 或 Robot 执行命令和它能够监听来自浏览器的 HTTP 响应之间存在延迟，并且在Selenium 准备好监听它*之前加载页面。*这是在 Intranet 上运行的，因此页面加载时间非常快。我从未见过在 SauceLabs VM 上运行相同的脚本时会发生此问题，因为我们和他们之间的隧道会增加很多延迟。

假设我的理论是正确的，我该怎么办（除了明显运行较慢的连接）？在 Selenium 中设置延迟只会减慢执行速度，并不会真正影响问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:32:46.510

尝试：

```
Set Selenium Implicit Wait  60
Set Browser Implicit Wait  60 
```

数字 60 是 selenium/浏览器默认等待的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:54:41.260

你可以试试流利的等等...

```
 public static WebElement fluentWait(final By locator, RemoteWebDriver rwd){
  Wait<WebDriver> wait = new FluentWait<WebDriver>(rwd)
          .withTimeout(30, TimeUnit.SECONDS)
          .pollingEvery(2, TimeUnit.SECONDS)
          .ignoring(NoSuchElementException.class);

  WebElement foo = wait.until(
          new Function<WebDriver, WebElement>() {
              public WebElement apply(WebDriver driver) {
                  return driver.findElement(locator);
              }
          }
    );
    return  foo;              
    }; 
```

这将每 2 秒轮询一次，最多等待 30 秒

然后在您的测试中等待一个元素，例如 fluentWait(By.className("home"), driver); 在您可以单击或验证文本等之前

# asp.net - 具有多个页面的应用程序中的 Asp.net url 路由

> ID：14387056
> 
> 赞同：0
> 
> 时间：2013-01-17T19:55:22.690
> 
> 标签：asp.net, c#-4.0

我正在使用 URL 路由来链接到 asp.net 中的用户配置文件，它可以工作，但应用程序的其余页面不起作用，我是否必须为所有页面定义路由，或者我在某个地方错过了某些东西。

我不使用 asp.net mvc，而是使用 asp.net web 表单。

对于个人资料页面，我想要路由，但有些页面我只是不会使用 asp x 链接，但所有页面现在都具有在全局文件的路由中定义的相同 URL。我在两天前写这个问题总是我有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:46:37.177

您可以使用[ASP.NET MVC Routing Debugger Visualizer](http://mvcroutevisualizer.codeplex.com/)调试您的路由， 或者查看[Phil Haack 的博客](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)

# cakephp - CakePHP 从选择框更改中更新多个表单字段

> ID：14387059
> 
> 赞同：0
> 
> 时间：2013-01-17T19:56:01.957
> 
> 标签：cakephp

我正在使用 CakePHP 2.2。我正在采用一种动态更新我从中获得的选择框的方法：http: [//www.willis-owen.co.uk/2011/11/dynamic-select-box-with-cakephp-2-0/#comment -10773](http://www.willis-owen.co.uk/2011/11/dynamic-select-box-with-cakephp-2-0/#comment-10773)可以正常工作。当用户从另一个选择框中选择“区域”时，它会更新“酒店”选择框的内容。

在同一个表单上，当用户从选择框中选择“酒店”时，我想使用“酒店”模型中的地址详细信息自动填充多个“团队”字段。

然后用户可以修改地址......所有这些都在用户单击“团队”添加视图上的提交之前。

在 Team\add.ctp 视图中，我有以下代码：

```
 echo "<div id='address'>";
    echo $this->Form->input('address_1');
    echo $this->Form->input('address_2');
    echo $this->Form->input('address_3');
    echo $this->Form->input('city');
    echo $this->Form->input('postcode');
    echo $this->Form->input('country');
    echo "</div>"; 
```

...

```
 $this->Js->get('#TeamHotelId')->event('change',
        $this->Js->request(array(
            'controller'=>'hotels',
            'action'=>'getAddress'
            ), array(
            'update'=> '#address',
            'async' => true,
            'method' => 'post',
            'dataExpression' => true,
            'data'=> $this->Js->serializeForm(array(
                'isForm' => true,
                'inline' => true))
                        )
        )
    ); 
```

在我的 HotelsController.php 中，我有：

```
public function getAddress() {
    $hotel_id = $this->request->data['Team']['hotel_id'];
    CakeLog::write('debug', print_r($hotel_id, true));
    $address = $this->Hotel->find('first', array(
            'recursive' => -1,
            'fields' => array('hotel.address_1', 'hotel.address_2', 'hotel.address_3', 'hotel.city', 'hotel.postcode', 'hotel.country'),
            'conditions' => array('Hotel.id' => $hotel_id)
            ));
    CakeLog::write('debug', print_r($address, true));
    $this->set('hotels', $address);
    $this->set(compact('address'));
    $this->layout = 'ajax';
} 
```

酒店\get_address.ctp：

```
 <?php 
        echo $this->Form->input('Team.address_1', array('value'=> $address['Hotel']['address_1']));
        echo $this->Form->input('Team.address_2', array('value'=> $address['Hotel']['address_2']));
        echo $this->Form->input('Team.address_3', array('value'=> $address['Hotel']['address_3']));
        echo $this->Form->input('Team.city', array('value'=> $address['Hotel']['city']));
        echo $this->Form->input('Team.postcode', array('value'=> $address['Hotel']['postcode']));
        echo $this->Form->input('Team.country', array('value'=> $address['Hotel']['country'])); ?> 
```

这现在可以工作并且代码已经更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:29:05.633

你不能那样做，因为你正在努力完成。但是，有一种方法可以根据需要进行更新，方法是使用 ajax 从下拉列表中传递一个 id，并根据该 id 填充所有其他字段。请确保`'update'=>#id`您应该将包含您希望在 ajax 请求中显示的页面上显示的所有字段的 div 的 div id 放入其中。

**注意：请按照您提供的 Richard 链接进行操作，即 www.willis-owen.co.uk，它肯定会对您正在尝试做的事情有所帮助。**

# c# - MVC 404 错误 - 仍然是新的

> ID：14387060
> 
> 赞同：0
> 
> 时间：2013-01-17T19:56:02.697
> 
> 标签：c#, asp.net-mvc, forms, http-status-code-404

因此，我在提交当前 MVC 项目时收到 404 错误。我是 MVC 的新手，所以我可能会做一些非常愚蠢的事情。这是相关的代码...

```
<%@ Page Title="Pies" Language="C#" Inherits="System.Web.Mvc.ViewPage" MasterPageFile="~/site.master" %>
<asp:Content ContentPlaceHolderID="MainContent" runat="server">
<h1>Oh Boy Pies</h1>
<p>Tell us about the pies!</p>
<form action="Process" method="post">
    <div class="inputdiv">
        <span class="spaced">Name:</span>
        <%= Html.TextBox("name") %>
        <%= Html.ValidationMessage("name", "*") %>
    </div>
</form> 
```

相关的处理程序是......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Mvc.Ajax;

namespace tabdemo.Controllers
{
     public class HomeController : Controller
     {
         public ActionResult Index ()
         {
            ViewData ["Message"] = "Demo!";
            return View ();
         }
         public ActionResult Process (FormCollection form)
         {
            Response.Write (form ["name"]);
            Response.End ();
            return Redirect ("Index.aspx");
         }
     }
} 
```

另外，例如，人们能否解释一下如何使用 TextBoxFor 来实现这一点？我看过它的例子，但我完全不明白。

编辑：这是母版页

```
 <%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>
 <!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
 </head>
 <body>
    <asp:ContentPlaceHolder ID="MainContent" runat="server">
    </asp:ContentPlaceHolder>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:01:44.343

它应该是`return RedirectToAction("Index")`。MVC 不使用 PAGES，而是依赖于`Controller`路由请求。

控制器返回视图，或重定向到另一个控制器，后者呈现视图。

**编辑** 是的，操作方法不正确（刚刚看到）

```
<form action="/Home/Process" method="post">
    <div class="inputdiv">
        <span class="spaced">Name:</span>
        <%= Html.TextBox("name") %>
        <%= Html.ValidationMessage("name", "*") %>
    </div>
</form> 
```

# magento - 一种产品的每个站点的自定义布局更新

> ID：14387061
> 
> 赞同：1
> 
> 时间：2013-01-17T19:56:06.123
> 
> 标签：magento, magento-1.7

我有一个多站点 Magento 正在运行，并且需要手动为每个产品添加一个规范 URL。由于产品可以在不同的站点上显示，每个站点都有不同的导航，并且由于自定义布局更新是 [全局]，我如何才能让 Magento 仅在站点/商店等于 X 时应用自定义布局更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:40:55.360

我找到了答案。我去了目录 > 管理属性并将 custom_layout_update 范围设置为商店视图。

# c# - MVVM WPF 数据绑定疑难解答

> ID：14387067
> 
> 赞同：0
> 
> 时间：2013-01-17T19:56:28.450
> 
> 标签：c#, wpf, xaml, data-binding

在遵循 WPF 的 MVVM 架构中，学习 WPF DataBindings。`<p:MemoryPersistentStorageBridge x:Key="persistentMemoryBridge" />`我有一个在运行时使用Window Resources中的 XAML 代码实例化的对象的单个实例。我试图从对象实例中获取数据，并将其放入 TextBox 作为示例，但我没有在该文本框中获取任何文本。

XAML：

```
<Window x:Class="UserConsole.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:p="clr-namespace:PollPublicDataStock;assembly=PollPublicDataStock"
        xmlns:local="clr-namespace:UserConsole"
        Title="MainWindow" Height="900" Width="800">

    <Window.Resources>
        <p:MemoryPersistentStorageBridge x:Key="persistentMemoryBridge" />
    </Window.Resources>

    <Grid Name="grid1" >
         <!--  layout defintions  -->
        <TextBox DataContext="{StaticResource persistentMemoryBridge}"   Text="{Binding Path=GetConnectionString}" Margin="0,327,31,491" Foreground="Black" Background="Yellow"/>
    </Grid>
</Window> 
```

代码隐藏：

```
public class MemoryPersistentStorageBridge {

    public MemoryPersistentStorageBridge() {

    }

   public string GetConnectionString() {
        return "THISTEXTSHOULDAPPEARINTEXTBOXBUTSADLYDOESNOT";
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:58:10.780

您正在尝试绑定到一个方法。您需要绑定到一个属性。或者使用[ObjectDataProvider](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.data.objectdataprovider.methodname%28v=vs.90%29.aspx)。

所以你可以这样做：

```
public class MemoryPersistentStorageBridge {

     public MemoryPersistentStorageBridge() {

    }

    public string ConnectionString {
        get { return GetConnectionString(); }
    }

   public string GetConnectionString() {
        return "THISTEXTSHOULDAPPEARINTEXTBOXBUTSADLYDOESNOT";
    }

} 
```

甚至：

```
public class MemoryPersistentStorageBridge {

     public MemoryPersistentStorageBridge() {

    }

    public string ConnectionString {
        get { return "THISTEXTSHOULDAPPEARINTEXTBOXBUTSADLYDOESNOT"; }
    }

} 
```

当然，在任何一种情况下，我们都不会处理更改属性并通知绑定更改。

另一种选择是使用 ObjectDataProvider 来包装您的方法。这在我提供的链接中进行了说明。但看起来像这样：

```
<ObjectDataProvider ObjectInstance="{StaticResource persistentMemoryBridge}"
                  MethodName="GetConnectionString" x:Key="connectionString">
</ObjectDataProvider> 
```

# android - 将图像放入图集中的最佳方法？

> ID：14387070
> 
> 赞同：0
> 
> 时间：2013-01-17T19:56:32.903
> 
> 标签：android, optimization, andengine, atlassprites

Android 的 AndEngine 框架可以将纹理加载到图集中。Atlas加载纹理的方式对我来说是新的，所以我研究了它。根据我在论坛上阅读的内容，图集是图像数据的一个大矩形区域，其中宽度和高度必须是 2 的幂（尽管它们不必相等，即如果你可以拥有 512x1024想）。纹理被加载到这个区域，这用于在应用程序的生命周期内将它们全部保存在内存中。即使您不使用其中的一些空间，它也会分配所有空间。

考虑到这一点，我可以使用什么过程以最佳方式将任意数量的图形放入同一个图集中？我不打算在应用程序的运行时执行此操作，但是一旦我的游戏的所有图形都已创建，我希望我可以通过某种算法运行图像及其大小，以确定制作图集的大小和位置每个图像都应该加载到其中。一旦我知道了这些事情，我就可以为我的游戏硬编码它们的位置。

这不是 AndEngine 甚至 Android 特定的问题。我确信还有其他面向图形的框架以这种方式加载纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:35:19.933

我正要在[Math.StackExchange.com](http://Math.StackExchange.com)上发布这个问题，但我发现它已经被问到并且[已经回答了](https://math.stackexchange.com/questions/68173/algorithm-for-positioning-rectangles-of-various-size-into-a-larger-rectangle/68212#68212)。甚至还有一个指向CSS Sprites的[CodeProject 文章的链接。](http://www.codeproject.com/Articles/210979/Fast-optimizing-rectangle-packing-algorithm-for-bu)

编辑：从长远来看，我最终做的是使用一个名为[TexturePacker](http://www.codeandweb.com/texturepacker)的程序。它不仅打包了图像，还生成了用于 AndEngine（以及其他支持的平台）的文件，并使整个过程对我来说更容易。

# iphone - 如何在 MFMailComposeViewController 上的正文文本中添加换行符

> ID：14387072
> 
> 赞同：3
> 
> 时间：2013-01-17T19:56:34.867
> 
> 标签：iphone, ios, ipad

我正在使用 MFMailComposeViewController 创建新电子邮件。

在正文中，我想要这样的内容：

> 你好，
> 
> 这个应用程序bla bla bla。
> 
> 要完成这项工作，您必须 bla bla。
> 
> 谢谢。

所以，我们有四段文字，我想在它们之间留一个空格。

我正在构建这样的正文文本字符串：

```
NSString *body = @"Hi,\n\nThis application bla bla bla.\n\nTo make this work you have to bla boa.\n\nThanks\n\n"; 
```

希望 \n 会在段落之间添加一个空格。

我知道如果我使用 ，我可以让它工作`<br />`，使电子邮件成为 HTML，但我想创建一个纯文本电子邮件以获得最大的兼容性。

我怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T20:47:29.040

确保您已`isHTML:NO`按照以下方法制作。与`isHTML:NO`,`\n`应该可以正常工作。

```
NSString *body = @"Hi,\n\nThis application bla bla bla.\n\nTo make this work you have to bla boa.\n\nThanks\n\n";
[mailComposer setMessageBody:body isHTML:NO]; 
```

输出：

> 你好，
> 
> 这个应用程序bla bla bla。
> 
> 要完成这项工作，您必须 bla bla。
> 
> 谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-17T21:45:16.280

在 Apple Silicon Mac 上运行的 iOS 应用程序的后续操作...设置 isHTML:YES 以便在从 Mac 上的 iOS 应用程序发送电子邮件时出现换行符。

# java - 如何在 jsp 中使用 RMI 服务器

> ID：14387082
> 
> 赞同：0
> 
> 时间：2013-01-17T19:57:01.683
> 
> 标签：java, jsp, rmi

我刚刚在java中实现了一个RMI服务器。它工作正常。现在我想使用 JSP 页面与我的服务器交互，但它不工作。谁能告诉我我该怎么做才能让它工作？

**MyServer.java**

```
package pack1;
import java.rmi.registry.Registry;
import java.rmi.registry.LocateRegistry;

public class MyServer {

private void startServer(){     
    try{
        Registry registry = LocateRegistry.createRegistry(2000);
        registry.rebind("MyData", new MyClassImpl());
    }catch(Exception ex){
        ex.printStackTrace();
    }
    System.out.println("Server is connected and ready to go....!!");
    System.out.println("Waiting for request...");
}
public static void main(String[] args){
    MyServer server = new MyServer();
    server.startServer();
}
} 
```

**我的客户端.java**

```
package pack1;

import java.rmi.registry.Registry;
import java.rmi.registry.LocateRegistry;

class MyClient{

private void Test(){
    try{
        Registry registry = LocateRegistry.getRegistry(2000);
        MyClass myClass = (MyClass)registry.lookup("MyData");

        if(myClass.upload("AssadUllah","assad.xml")){
            System.out.println("Successfully uploaded file");
        }else{
            System.out.println("Problem uploading file");
        }

    }catch(Exception ex){
        ex.printStackTrace();
    }
}
public static void main(String[] args){
    MyClient client = new MyClient();
    client.Test();
}
} 
```

**MyClass.java**

```
package pack1;

import java.rmi.Remote;
import java.rmi.RemoteException;

public interface MyClass extends Remote{
public Boolean upload(String fileName, String fileData)throws RemoteException;
//public String download(String fileName)throws RemoteException;
//public String checkNumber(int num)throws RemoteException;
//public int factorial(int num)throws RemoteException;
} 
```

**MyClassImpl.java**

```
package pack1;

import java.io.*;
import java.util.regex.*;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;

public class MyClassImpl extends UnicastRemoteObject implements MyClass{

private int c;

public MyClassImpl()throws RemoteException{
    c=0;
}
public Boolean upload(String fileName, String fileData)throws RemoteException{
    String postfix="";

try{

    Pattern pattern = Pattern.compile("[.][a-zA-Z]+");
    Matcher matcher = pattern.matcher(fileData);

    if(matcher.find()){
        postfix = fileData.substring(matcher.start(), matcher.end());
    }

    File inputFile = new File("E:\\UploadedFiles\\"+fileData);
        File outputFile = new File("E:\\DownloadedFiles\\"+fileName+postfix);

        FileInputStream IStream = new FileInputStream(inputFile);
        FileOutputStream OStream = new FileOutputStream(outputFile);

        while((c = IStream.read()) != -1){
            OStream.write(c);
        }
        IStream.close();
        OStream.close();

        return true;

    }catch(IOException ex){
        ex.printStackTrace();
    }
    return false;

}
} 
```

**我的jsp代码page.jsp**

```
 <%@ page import="pack1.*"%>
 <%@ page import="java.rmi.registry.Registry"%>
 <%@ page import="java.rmi.registry.LocateRegistry"%>

 <%

 out.println(request.getRemoteAddr());

try{
Registry registry = LocateRegistry.getRegistry(2000);
MyClass myClass = (MyClass)registry.lookup("MyData");

String fileName = request.getParameter("fileName");
String myFile = request.getParameter("myFile");

myClass.upload(fileName, myFile);

}catch(Exception ex){
ex.printStackTrace();
}
%> 
```

这是我用来在 RMI 服务器上上传文件的 JSP 页面。代码在没有 JSP 的情况下工作得很好，但我希望它也可以与 JSP 一起工作。

# vb.net - Report Builder #Error on the sum of dataset

> ID：14387084
> 
> 赞同：1
> 
> 时间：2013-01-17T19:57:10.517
> 
> 标签：vb.net, reporting, reportbuilder

在我的报告中，我有列对行值求和。

以下列值求和成功

```
=Sum(Fields!alphas.Value)

=Sum(Fields!betas.Value) 
```

但是，当我尝试对一列 alpha/beta 求和时，我在报告上收到 #Error 打印。

```
=Sum(IIF(Fields!betas.Value>0,Fields!alphas.Value/Fields!betas.Value,0)) 
```

我尝试在内部添加检查`IIF`以检查 alphas`IsNumeric`和 betas IsNumeric。我还尝试在内部`IIF`检查 alphas 是否不是`IsNothing`，而 betas 是否不是 IsNothing。

什么可能导致#Error 打印在报告上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:04:10.093

您已经检查了其他所有内容，但没有检查 betas.value = 0 IIF 经常抓人，因为它不会短路；这两个部分总是被评估，所以当 betas.value = 0 时你会被零除

# ajax - 在同一台机器上使用带有 ajax 的自托管 WCF

> ID：14387085
> 
> 赞同：0
> 
> 时间：2013-01-17T19:57:14.500
> 
> 标签：ajax, wcf, localhost, self-hosting

我需要帮助，请……或者，至少，一个方向……</p>

我有一个非常特殊的 WCF 场景……我需要自托管服务（不允许 IIS）并使用 jQuery ajax 通过 HTML 页面使用它……（也不允许 IIS）……页面将“独立”运行，纯 HTML用javascript…有可能吗？

注意：WCF 服务和 HTML/javascript 在同一台机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:06:28.060

> 是否可以？？

我相信这应该是可能的，假设您正确配置了应用程序以支持 HTTP 端点：http: [//msdn.microsoft.com/en-us/library/ee939340.aspx](http://msdn.microsoft.com/en-us/library/ee939340.aspx)

如果您进入“在配置文件中定义端点”部分，您甚至会在他们配置服务器后看到，然后他们配置连接到 localhost 的客户端。当然，您将使用 javascript 连接到服务，但关键是没有任何限制可以阻止 WCF 通过 HTTP 与同一台机器上的客户端进行通信。

如何从 javascript 使用 WCF 的详细信息在其他地方进行了介绍：

[使用 JavaScript 使用 WCF，但保持它对所有客户端足够通用？](https://stackoverflow.com/questions/934859/consume-wcf-with-javascript-but-keep-it-generic-enough-for-all-clients)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:07:02.920

好的......我明白了......我不能从文件系统（不同域）中的页面使用自托管的 WCF 服务......相反，我通过一项服务提供我的 html 页面，并使用 ajax 使用其他服务......嗯......这不是真正好的解决方案，但现在对我有用......

无论如何，非常感谢AaronLS！

# php - 从 PHP 运行 mysqldump

> ID：14387088
> 
> 赞同：0
> 
> 时间：2013-01-17T19:57:21.850
> 
> 标签：php, mysql, apache, mysqldump

我在之前的 Stackoverflow 帖子中发现了一些非常简单的代码，并且运行 mysqldump 命令。我可以在 shell 中以 root 身份运行这个命令，没有问题。但是当我通过 PHP 时，备份文件永远不会被创建。

```
<?php
$backupFile = "/var/www/html/mysql-bak/my_dbname-".date("Y-m-d-H-i-s").".sql";
$command = "mysqldump --opt -u root -pmypassword my_dbname > $backupFile";
system($command);
?> 
```

当Apache服务尝试写入文件时，一定是权限问题，对吧？我创建了一个目录 /var/www/html/mysql-bak/ 并执行了 chgrp 和 chown 以使拥有用户“mysql”和拥有组“mysql”。绝望中，我将用户“apache”添加为组“mysql”的成员，但这仍然没有解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:07:07.487

实际上，我可以通过 chown "apache" 作为该目录的所有者来修复它。

# javascript - 多个require（require.js）实例可以一起玩吗

> ID：14387092
> 
> 赞同：9
> 
> 时间：2013-01-17T19:57:45.617
> 
> 标签：javascript, requirejs

我认为我需要在一个页面中支持多个 require 实例，并且遇到了两个问题使其发生。我正在开发一项向外部客户端页面提供可嵌入交互式对象的服务。最重要的设计标准是易于嵌入，对客户端环境做出尽可能少的假设，并在客户端页面的 js/css 世界中很好地发挥作用。客户端在他们的页面中添加一个脚本标签来加载加载器，然后他们使用一个内联脚本来加载他们想要的内容：

```
<script src="http://server.net/loader"></script> 
<script>               
       special_require(["loader"], function(loader) {
           loader.load({
               object: "objectname",
               target: "#where-i-want-it"
               // other config settings
           })
       })
   </script> 
```

加载器在匿名函数中运行 require.js 源，对其进行配置，然后将 require 和 define 导出为命名空间的全局变量（我们称它们为 special_require 和 special_define）。然后几个模块是special_defined，以“loader”结尾：

```
// Using strategy 2 from http://requirejs.org/docs/faq-advanced.html#rename to 
// namespace require so it doesn't conflict with code on client sites.
;(function() {
    // Here, we use Jinja to drop in require.js, which will define itself in 
    // this non-global namespace.
    {% include 'loader/require.js' %}

    require.config({
        ...
    })
    window.special_require = require
    window.special_define = define
})()

special_define("loader", [...], function(...) { ... }) 
```

在大多数情况下，这非常有效。我能够将我的需求与客户端页面中的任何需求完全分开，并且我对客户端的 js 全局命名空间轻描淡写。但：

1.  如果客户端页面碰巧正在加载 require 并使用 data-main 属性调用它，我的 require 会显示并尝试根据我的 baseUrl 加载他们的 data-main 脚本，我们会收到加载错误。我可以修改我的 require 的来源，以便它停止寻找 data-main 属性。有更清洁的解决方案吗？

2.  require 社区非常清楚，一个页面上不应有多个 require 实例。require.js 源代码竭尽全力避免重复。所以我很紧张，因为我走这条路会让自己陷入困境。也就是说，我更担心可能使用客户端的 require 实例（使用我自己的加载上下文）。Require 1.2、2.0 和 2.1 不兼容，我不知道我在使用什么。我是否只是在一个不寻常的情况下，分开运行是有意义的？我会遇到麻烦吗？有没有办法加载 require.js 并允许它在可能的情况下推迟到现有的要求，同时仍然可以保证我有特定版本的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T15:21:59.800

我认为可以。请参阅此处的示例：[http ://requirejs.org/docs/api.html#multiversion](http://requirejs.org/docs/api.html#multiversion)

# ios - 带有 UIActivityViewController 的自定义文件类型

> ID：14387096
> 
> 赞同：3
> 
> 时间：2013-01-17T19:58:04.070
> 
> 标签：ios

我无法`UIActivityViewController`附加使用创建的自定义文件类型`UIDocument`。任何人都可以帮忙吗？

即使文件 URL 有效，电子邮件也根本没有附件，并且指向一个带有`.wki`扩展名（我的自定义扩展名）的文件，该文件是通过`UIDocument`.

发送电子邮件的代码：

```
 NSURL *url = self.entrySelected.fileURL;

    NSArray *activityItems = @[url];

    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
    [self presentViewController:activityVC animated:YES completion:nil]; 
```

文档类型和导出的 UTI 的 Info-plist 设置是：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeIconFiles</key>
        <array/>
        <key>CFBundleTypeName</key>
        <string>MyApp Doc</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.stephencox.myApp.doc</string>
        </array>
        <key>LSTypeIsPackage</key>
        <string>YES</string>
    </dict>
</array>

<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>com.apple.package</string>
        </array>
        <key>UTTypeDescription</key>
        <string>MyApp Doc</string>
        <key>UTTypeIdentifier</key>
        <string>com.stephencox.myApp.doc</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <array>
                <string>wki</string>
            </array>
        </dict>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T13:48:40.580

我自己的文件类型也有同样的问题。经过大量实验，我找到了解决方案，希望它也适用于您。

您**必须**为文件指定 MIME 类型，例如：

```
...
    <key>UTTypeTagSpecification</key>
    <dict>
        <key>public.filename-extension</key>
        <string>wki</string>
        <key>public.mime-type</key>
        <string>application/x-wki</string>
    </dict>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T09:55:21.030

我最终通过设置另一种文档类型和 UTExportedTypeDeclaration 解决了我的问题。

我留下了第一个（假设 UIDocument 管理需要它），并为压缩文件设置了另一种 doc 类型，其中 UTTypeConformsTo 键设置为“public.data”，并为 public.mime-type 添加了一个附加键（设置为“应用程序/myappname”）。我将压缩文件发送到一个临时目录，并让 UIActivityViewController 从这个 URL 中提取文件。

希望这对其他人有帮助！

# mongodb - 聚合框架中使用 mongodb 的 jasper 报告

> ID：14387099
> 
> 赞同：2
> 
> 时间：2013-01-17T19:58:13.993
> 
> 标签：mongodb, jasper-reports

我有一个名为的集合`Stock_Data_Revise_Nyse`，其中包含一些相关数据，我正在使用 jasper ireporter 制作报告，但是当我执行这个给定的查询时，它只返回具有适当值的**值字段**，其余`_id.Date,_id.Stock`返回`null`。

**此查询在Mongo Shell**中运行良好。

注意：- 如果我使用单组，那么聚合在 Jasper 中工作正常，但是当我使用双组时，就像我在这里使用的那样，它会为该字段返回 null。

我搜索了很多论坛，但几乎没有找到任何答案。

任何形式的帮助将不胜感激。

```
{ runCommand: {
    aggregate : "Stock_Data_Revise_Nyse",
    pipeline : [
        {$project:{Symbol_1:1,Name:1,Change:1,Date:{$substr:["$UTC_Timestmp",0,10]}}},
        {$match:{"Date":"16-01-2013"}},
        {$group:{
            _id:{Date:"$Date",Stock:"$Symbol_1"},
            value:{$sum:"$Change"}
        }},
        {$sort:{"value":-1}},
        {$limit:5}
    ]
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T07:57:50.080

这是因为您使用的是旧版本的 MongoDB 连接器（v0.5.0，这是[MongoDB 连接器下载页面](http://community.jaspersoft.com/project/mongodb-connector/releases)上唯一可用的版本）。

下载[JasperSoft Studio](http://community.jaspersoft.com/project/jaspersoft-studio) v2.0.1 或更高版本，然后使用包含的文件`plugins/com.jaspersoft.studio.data.mongodb_2.0.1.jar`作为您的依赖项来替换旧的 MongoDB 连接器 v0.5.0。

您还可以使用 Maven 获取此工件（我们 Bippo/Soluvas 仅提供在 Maven 存储库中托管常用文件的服务）：

```
<dependencies>
    <dependency>
        <groupId>com.jaspersoft</groupId>
        <artifactId>com.jaspersoft.studio.data.mongodb</artifactId>
        <version>2.0.1</version>
    </dependency>
</dependencies>
...
<repositories>
    <repository>
        <id>bippo-nexus-public</id>
        <url>http://nexus.bippo.co.id/nexus/content/groups/public/</url>
    </repository>
</repositories> 
```

# c# - XML读取与父c#同名的重复子元素

> ID：14387100
> 
> 赞同：2
> 
> 时间：2013-01-17T19:58:16.677
> 
> 标签：c#, xml, linq, linq-to-xml

我有以下格式的xml：

```
<rows>
   <rows>
      <primitiveValue>000</primitiveValue>
   </rows>
   <rows>
      <primitiveValue>58316</primitiveValue>
   </rows>
   <rows>
   <primitiveValue>133083.0</primitiveValue>
   </rows>
</rows>
<rows>
  <rows>
    <primitiveValue>001</primitiveValue>
  </rows>
  <rows>
    <primitiveValue>66018</primitiveValue>
  </rows>
  <rows>
    <primitiveValue>172546.0</primitiveValue>
  </rows>
</rows> 
```

我需要按行的父元素拆分数据，但不知道该怎么做。

我已经尝试了下面的代码，但这会遍历每个行实例并导致重复。

```
 string Values = "";

        foreach (XElement element in xDoc.Descendants("rows"))
        {

            foreach (XElement childElement in element.Descendants("rows").Elements("primitiveValue"))
            {

                Values = Values + "," + childElement.Value.ToString();

            }

        } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:01:13.997

后代将找到具有您要查找的名称的所有节点，无论它们位于 XML 树的下方多远。尝试尝试这样的事情：

```
foreach (XElement element in xDoc.Children("rows"))
        {
            foreach (XElement childElement in element.Descendants("rows").Elements("primitiveValue"))
            {
                Values = Values + "," + childElement.Value.ToString();
            }
        } 
```

关键是使用 Children 应该只返回根元素正下方的节点，而不是在 XML 文档的整个结构中搜索匹配的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:14:32.657

非常简单`System.Xml.XPath.Extensions`：

```
var values = xdoc.XPathSelectElements(@"//rows/rows/primitiveValue").Select(v => (double)v);
string result = String.Join(",", values); 
```

值将`IEnumerable<double>`包含原始值元素的值。结果将是所有值的串联字符串。顺便说一句，您的 xml 中缺少根元素。

更新

```
IEnumerable<string> result = 
             xdoc.Root.Elements("rows")
                 .Select(r => String.Join(",", r.Descendants("primitiveValue")
                                                .Select(v => (double)v))); 
```

这将返回字符串序列，每个字符串将包含内部行的连接值。如果您需要原始字符串而不是双精度值，则将值节点转换为字符串。

# c - linux中的原子写入

> ID：14387104
> 
> 赞同：4
> 
> 时间：2013-01-17T19:58:40.170
> 
> 标签：c, linux

在 linux 上，当写入管道时，如果数据等于或小于内存页面大小（在 64 位 rhel 上至少为 4k），操作系统会保证整个写入成功或失败，但不会损坏数据，当多个进程同时进行写入时。这也适用于写入常规文件。

1.  我的问题是这种原子性是linux虚拟内存的一个特性吗？如果是，请考虑两个进程之间的共享内存场景，其中一个进程在调度程序的写入过程中被换出。虚拟内存子系统是否确保进程正在写入的内存页面也被锁定，以便第二个进程无法写入同一页面？

2.  页面级别的这种原子性是否仅适用于跨进程，或者也适用于同一进程的线程之间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:01:20.390

1.  不。如果两个进程正在使用共享内存，则进程之间没有隐式锁定。您将必须自己安排这样一个锁（如果锁的所有者被换出，那么您的其他进程将不得不等到所有者被换入并在完成持有该锁时所做的任何事情后释放锁锁）。

2.  我不相信有任何隐含（或显式）的规则表明页面与其他内存整体不同。具体规则适用于写入管道和文件，如果所有数据都适合一页，则操作系统可以将其写入一个块 - 我想你会发现操作系统持有它所在的资源的锁一次写一页。如果数据大于一页，当锁被释放时，另一个进程[或线程]可能已经准备好运行，从而从第一个进程“窃取”锁。不到一页，它在一个锁定的运行中完成整个写入。

但需要明确的是，一般来说，内存页的写入（或读取）没有隐式锁定。它严格适用于某些功能。通常，特定函数也将具有某种锁定，以防止其他进程在同一函数中运行[至少在给定资源的情况下-例如文件描述符或类似资源-其他进程完全有可能从另一个文件中读取同时您的进程读取或写入您的文件，但您的文件对于持有锁的某个大小的块是原子的，但不是您的“一次写入整个莎士比亚作品”系统调用，因为这可能会阻塞其他一些重要的过程。

# ios - 如何将 printf 输出定向到与 NSLog 相同的目标？

> ID：14387107
> 
> 赞同：5
> 
> 时间：2013-01-17T19:58:52.837
> 
> 标签：ios, xcode, logging, printf, nslog

如何使 printf 的输出出现在 Xcode Organizer 控制台视图中？在连接的设备上调试时，我可以在 Xcode 的调试控制台中的 NSLog 输出中看到 printf 输出，但我只能在 Organizer 控制台上看到 NSLog 输出。

我正在使用 Objective-C++ 进行开发，并使用 printf 来记录纯 C++ 代码。最终，我希望在设备断开连接时从应用程序中获得此输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:07:00.047

[有](https://stackoverflow.com/questions/8924831/iphone-debugging-real-device)描述如何实现它。看起来没有其他`printf`指向 Organizer 的能力。

# python - python：提高使用列表搜索输入文件的速度

> ID：14387109
> 
> 赞同：0
> 
> 时间：2013-01-17T19:58:58.293
> 
> 标签：python, search

我有一个包含 20k 个元素的列表（inst_list）和一个大约 20k 行的输入文件（netlistFile）。现在我已经编写了两个 for 循环，对于列表中的每个元素，我都会搜索输入文件。但是，由于这两个文件的大小，这需要大约 16 分钟才能运行。

我的编码能力很低，所以必须有更快的方法。下面是我的代码：

```
for x in inst_list:
    count = 0
    for line in fileinput.input(netlistFile):
        if re.search(x,line) and count != 1:
            #print line
            line_split = line.split(" ")
            cell_list.append(line_split[3])
            count = 1 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:03:13.343

最简单的解决方法是像@Eevee 在评论中建议的那样切换循环。

# java - java继承：区分继承类的类型

> ID：14387110
> 
> 赞同：0
> 
> 时间：2013-01-17T19:58:59.550
> 
> 标签：java, inheritance

我有一个抽象类，称为`A`和两个继承的类：`B`和`C`. 我有一个带参数的方法：

```
myMethod (final A a) 
```

对于实例化对象的类型，我想做不同的事情。我该怎么做？

一个不错的选择是遵循另一种设计模式，但我现在不允许更改我的代码。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:00:49.350

使用`instanceof`关键字。例如：

```
if (a instanceof B) {...}
else if (a instanceof C) {...}
else {...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:00:35.193

使用`instanceof`运算符：

```
myMethod (final A a) {
  if(a instanceof B) {
    //...
  } else if(a instanceof C) {
    //...
  } else {
    throw new IllegalArgumentException("Unknown type: " + a);
  }
} 
```

但请记住，这是违背所有 OO 原则的糟糕做法。

# zend-framework - 生成随机公共网址

> ID：14387111
> 
> 赞同：0
> 
> 时间：2013-01-17T19:59:04.300
> 
> 标签：zend-framework, url, doctrine

我正在开发一个调查系统，教师可以登录系统然后创建自己的调查。

当他（老师）完成调查时，我需要为他的调查生成一个公共网址，然后他可以将该网址提供给他的学生，然后他们可以回答该调查，但是，学生不需要在我的系统上注册要做到这一点。

那么，如何生成公共随机 URL 以启用此行为？我将 Zend Framework 1.11 用于服务器端，Doctrine ORM 1.2.4 用于数据库，jQuery 用于客户端。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:30:27.130

您可以使用常规 Zend 控制器和操作组合来执行该任务。您可以使用随机键（可能是时间戳和调查名称之间连接的哈希值）将调查保存在数据库表中。然后发送一个包含哈希值的链接，一旦随机值被接收回控制器，它就可以用来从数据库中提取和显示匹配的调查。如果您不检查（排除）对该特定控制器和操作的请求的身份验证，则公共用户可以访问它。

# c# - 序列化 XML 添加额外元素

> ID：14387114
> 
> 赞同：0
> 
> 时间：2013-01-17T19:59:14.653
> 
> 标签：c#, xml, serialization

序列化这个有很多麻烦。在 XML 中序列化非常新

这是我写入序列化数据类的地方。

```
 string addrID="Sante Fe, New Mexico";
              INPUT r = new INPUT();
              INPUTLOG ls = new INPUTLOG();
              ls.id = id;
              ls.password = password;
              r.LOGIN = ls;
              REQUESTaddr l = new REQUESTaddr();
              l.loan_id = addrID;
              INPUTLOGINREQ r = new INPUTLOGINREQ();
              r.LOAN = l;
              loan.REQUEST = r;

              string serializedSearch = doSerializationsearch(r);   

private static string doSerializationsearch(INPUT r)
    {
        string serializedValue = string.Empty;

            XmlSerializer xmlSerializer = new XmlSerializer(r.GetType());
            using (MemoryStream ms = new MemoryStream())
            {
                xmlSerializer.Serialize(ms, r);

                ms.Position = 0;
                var sr = new StreamReader(ms);
                serializedValue = sr.ReadToEnd();
            }

            serializedValue = serializedValue.Replace("version=\"0\"", string.Empty).Replace("<?xml version=\"1.0\"?>", string.Empty).Replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", string.Empty);

        return serializedValue;
    } 
```

出于某种原因，它使用我不想要的 addridfield 元素将其序列化。

```
<INPUT xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema">    
  <LOGIN api_user_id="user" api_password="password" />   
    <REQUEST>      
      <Address addr_id="53196d9f4c544e4da9f647b2c86444c2">       
      <addridField>53196d9f4c544e4da9f647b2c86444c2</addridField>  <<<<<I do not want this
      </Address>    
   </REQUEST> 
 </INPUT> 
```

我没有注意到我的课程有任何问题，但其他人注意到我在添加这个额外元素时做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:10:32.293

您需要将类中的字段设为`addridField`私有`REQUESTaddr`，而不是公开。XMLSerializer 将序列化所有**公共**属性和字段。

# iphone - 如何判断单元格是在 cellForRowAtIndexPath 中插入还是重新加载？

> ID：14387115
> 
> 赞同：1
> 
> 时间：2013-01-17T19:59:29.613
> 
> 标签：iphone, ios, objective-c

与重新加载的单元格相比，我需要为插入的单元格设置不同的样式。

我正在插入我的单元格，如下所示：

```
[tempArray addObject:[NSIndexPath indexPathForRow:0 inSection:0]];
[[self tableView] beginUpdates];
[[self tableView] insertSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationTop];
[[self tableView] insertRowsAtIndexPaths:(NSArray *)tempArray withRowAnimation:UITableViewRowAnimationNone];
[[self tableView] endUpdates]; 
```

有没有办法让我做到以下几点：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (cell was inserted) {
      cell.mylabel.textColor = [UIColor redColor];
    } else {
      cell.mylabel.textColor = [UIColor blackColor];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:29:23.877

与维护表格视图单元格状态的情况一样，正确的答案是将状态保留在模型中。换句话说，如果 tempArray 是您的模型，其中包含描述表内容的对象集合，请向这些对象添加一个 BOOL 属性，含义类似于`userAdded`.

然后你的“单元格被插入”伪代码可以变成：

```
MyModelClass *modelElement = [tempArray objectAtIndex:indexPath.row];

if (modelElement.userAdded) {
    cell.mylabel.textColor = [UIColor redColor];
} else {
  cell.mylabel.textColor = [UIColor blackColor];
} 
```

# .net - 以编程方式添加项目时，Sitecore 和不受欢迎的丹麦语版本

> ID：14387116
> 
> 赞同：0
> 
> 时间：2013-01-17T19:59:32.120
> 
> 标签：.net, c#-4.0, content-management-system, sitecore

我正在以编程方式将版本添加到 sitecore 数据库。该项目正在工作流程中。一切都很好，但我的项目在工作流程中带有英语和丹麦语版本。我想摆脱丹麦版本或避免首先创建它。这是我的代码片段

```
var database = Sitecore.Configuration.Factory.GetDatabase("master");
Sitecore.Data.Items.Item itm = database.GetItem(Constants.Sitecore.CommonPages.JOB_LISTINGS);

using (new Sitecore.SecurityModel.SecurityDisabler())
{
    TemplateItem itemTemplate = database.GetItem(Constants.Sitecore.Templates.JOB);

    Item scInnerItem = itm.Add(ItemUtil.ProposeValidItemName(string.Format("{0} {1}", jb.JobId, jb.PositionTitle.RemoveSpecialCharacters())), itemTemplate);
    Job scJob = new Job(scInnerItem);

    using (new EditContext(scInnerItem))
        scJob.GetJobFromUserJob(jb);

    return (IBaseSitecoreItem)scJob;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:12:16.567

Danish is indeed installed by default, but it should not be bugging/annoying you while pragmatically adding items. Here are two things to check:

1)What is the default language of your site, check node in web.config
2)Does the Job template have any standard values, and are they by any chance in Danish?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:11:58.317

我可以想到一些事情： 使用 LanguageSwitcher 临时更改代码中的上下文语言。所以改成英文。

当您检索存储新项目的父项目时，您必须已经切换了语言。不知何故，加载父项时的上下文语言将定义新创建版本的语言。

希望有帮助！

# r - 使用 R，如何捕获绘图的位图？

> ID：14387119
> 
> 赞同：-5
> 
> 时间：2013-01-17T19:59:40.253
> 
> 标签：r

我想将以下绘图的输出捕获到包含位图的变量中，在 R 中：

```
require(stats)
plot(sin, -pi, 2*pi) # see ?plot.function 
```

![在此处输入图像描述](../Images/ae0acfd44deb5c55438dc53cf7884fa1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:03:12.050

这会在硬盘上保存一个位图文件：

```
bmp("spam.bmp")
plot(sin, -pi, 2*pi)    
dev.off() 
```

谷歌搜索`R save bitmap`给你这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-11T04:25:02.173

包解决`magick`方案：

```
img <- magick::image_graph(width = 256, height = 256, res = 96, pointsize = 1, clip = FALSE)
plot(sin, -pi, 2*pi)
dev.off()
img
#>   format width height colorspace matte filesize density
#> 1    PNG   256    256       sRGB  TRUE        0 +72x+72
arr <- magick::image_data(img)
str(arr)
#> num [1:256, 1:256, 1:4] 1 1 1 1 1 1 1 1 1 1 ... 
```

# c++ - Fastcgi++：如何创建 404 或 503 响应

> ID：14387122
> 
> 赞同：4
> 
> 时间：2013-01-17T19:59:56.227
> 
> 标签：c++, fastcgi, fastcgi++

Fastcgi++ 是一个用于简化在 C++ 中实现 fastcgi 服务器的库。这是我想做的一个非常简单的用例：检查文件是否存在，如果不存在，则生成一些错误消息。这是代码，寻找问题标志。

```
struct the_fastcgi_server_t: Fastcgipp::Request<char>
{

    bool response() 
    {
        using namespace Fastcgipp;

        Fastcgipp::Http::Environment<char> const &env =
            this->environment();
        // Can I resolve the file?
        std::string target_js;
        try {
            target_js = path_processor( env.scriptName );
        } catch ( file_not_found_exc_t const& e )
        {
            // TODO How do I set a standard 404 here???!!
            return true;
        }

        out << "Content-Type: text/javascript; charset=utf-8\r\n\r\n";

        // ... Here I fill the response.

        return true;
    }
}; 
```

关于如何设置响应类型的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T20:35:18.840

答案基本上如下：

[https://web.archive.org/web/20160115021335/http://www.fastcgi.com/docs/faq.html#httpstatus](https://web.archive.org/web/20160115021335/http://www.fastcgi.com/docs/faq.html#httpstatus)

也就是说，使用这样的一段代码

```
 out << "Status: 404 Not found\r\n\r\n"; 
```

在响应方法中。它不是标准的 http，但 FastCGI 只是 CGI 的一个包装器，而[CGI 就是这样做](https://www.rfc-editor.org/rfc/rfc3875#section-6.2.1)的。

# jquery - 禁用移动设备的某些脚本

> ID：14387126
> 
> 赞同：0
> 
> 时间：2013-01-17T20:00:09.407
> 
> 标签：jquery, responsive-design

如今，网站上的大多数内容都可以响应（针对不同的屏幕尺寸适当调整尺寸）。我还没有找到解决方案的最后一件事是 jQuery 插件。例如，我正在使用一个插件来为网站背景中的一些浮动粒子设置动画。它在桌面上看起来很棒，但在智能手机上会卡顿。

如果页面加载到移动大小的浏览器中，我想听听有关如何禁用脚本的想法和想法。使用javascript来做到这一点就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:02:52.497

这是检测浏览器是否为移动设备的好方法：[http ://www.jquery4u.com/mobile/detect-mobile-devices-jquery/](http://www.jquery4u.com/mobile/detect-mobile-devices-jquery/)

用于[`$.getScript`](http://api.jquery.com/jQuery.getScript/)根据浏览器加载脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:39:32.030

使用 MatchMedia.js [https://github.com/paulirish/matchMedia.js](https://github.com/paulirish/matchMedia.js)并且仅在超过特定视口大小时才加载插件。

# winforms - 分别在末尾和开头添加和删除文本时保持 RichTextBox 中的文本位置

> ID：14387127
> 
> 赞同：0
> 
> 时间：2013-01-17T20:00:09.910
> 
> 标签：winforms, c#-2.0

我有一个非常简单的带有`RichTextBox`字段的表单。它充当粗略的日志文件查看器。随着日志数据添加到文件中，我将新数据附加到文本框中。这很好用，但我想防止文本框在添加新数据时滚动，以便可以读取当前可见的数据。我对此进行了一段时间的试验，最终不得不调用本机`SendEvent`函数来获取和设置附加文本前后的滚动位置。这也很有效，但是，我现在遇到了一个新问题：随着时间的推移，日志文件会变得非常大，并使用大量内存来将日志文件的全部内容保存在文本框中。所以现在我所做的是限制文本框中的文本数量，如果文本大小达到某个阈值，则从开头删除文本。

所以现在我的问题是我可以保持滚动位置，但是文本会改变，因为我从一开始就删除了文本。是否有一种简单的方法来更改滚动位置以保持可读性（显然，如果用户正在阅读文本框的第一行并且将其删除，那么就没有什么可以做的，但我认为这是可以接受的）？

这是一个示例：假设我的阈值是文本框中的 1MB 文本。如果当前有 1MB 的文本，我需要追加 1000 个字符，那么我还需要从开头删除 1000 个字符。如果我滚动到文本的中间，那么我可以在删除和附加文本后保持该滚动位置，但现在我正在阅读的文本进一步向上。

也许我需要重新考虑我的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:21:13.380

我意识到在用户查看文本时修改文本并没有什么意义。所以我决定在这个表单中添加一个选项来“冻结”文本框的更新。冻结时不会添加或删除文本，用户可以自由滚动。解冻后，所有附加/删除都正常工作。

# html - 仅使用 CSS 实现点击事件

> ID：14387129
> 
> 赞同：2
> 
> 时间：2013-01-17T20:00:17.923
> 
> 标签：html, css

![例子](../Images/a939b0bc621118bcac61b723f07e123d.png)

我的问题是：是否可以仅使用 css 来实现此示例？如果不是，你会怎么做？非常感谢 Jsfiddle 示例；）如何获得斜线？我应该使用图像还是在 css 中是可能的？以及点击时变化的三角形？我知道可以用 Js 来做这件事，也许在 css :after 和 :before 对我有帮助吗？PS：隐藏菜单的Javascript：

```
<script language="javascript"> 
    function toggle() {
    var ele = document.getElementById("toggleMenu");
    var text = document.getElementById("displayMenu");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "Menu";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "Hide";
    }
} 
</script>
<div class="menu-toggle"><div id="wrap"><a id="displayMenu" href="javascript:toggle();">Menu</a></div></div>
<div id="toggleMenu" style="display: none">
            <div class="menu">  
                <ul><li> Home </li>
                    <li> Item </li>
                </ul>
            </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:09:40.690

通常我用图像做这样的事情来实现只用 css 的点击事件

```
<figure>
<img id="zoom" src="http://cargowire.net/Content/images/events/stackoverflow.jpg" alt="EE" />
<figcaption>
<ul>
<li>
<a href="#zoom">Zoom In</a>
</li>
<li>
<a href="#">Zoom Out</a>
</li>
</ul>
</figcaption>
</figure> 
```

和 CSS：

```
 figure { background: #e3e3e3; display: block; float: left;}
       #zoom {
          width: 0px; 
          -webkit-transition: width 1s;
      }

      #zoom:target {
         width: 400px;

      } 
```

在这里检查：http: [//jsfiddle.net/dCTeW/](http://jsfiddle.net/dCTeW/)也许菜单也可以做类似的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:03:35.033

这是完全可能的，但只有当鼠标悬停时，据我所知，不是点击。您将需要使用 CSS :hover 状态。

这里有一篇深入的文章：http: [//csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/](http://csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/)

以及该文章的演示：http: [//csswizardry.com/demos/css-dropdown/](http://csswizardry.com/demos/css-dropdown/)

如果你想使用点击，那么一点点 jquery 可能会帮助你：

```
$('.menu-item').click(function(){
    $(this).find('hover-div').toggle()
}) 
```

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)
这是您需要实现的切换文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:35:44.560

如果您坚持使用单击而不是悬停，您可以尝试按照建议使用 :focus ，但这实际上是一种 hack，并且不考虑正确使用 HTML 和 css。只是为了演示，看看这个：http: [//jsfiddle.net/9efMt/1/](http://jsfiddle.net/9efMt/1/)

如您所见，我使用了一个输入，带有`:focus`伪类和`+`兄弟选择器。该css并没有什么问题，但是将菜单放入输入中还没有完成！

我在同一个小提琴中的 imo 正确示例中将 jquery 用于 js。我所做的只是在单击菜单链接时切换一个类。它看起来像这样：

```
$('#menu2').click(function() {
  $('#menu2-sub').toggleClass('active');
}); 
```

css 应该是相当直接的。

# shell - 计算前一个星期一、星期二、...相对于今天的 Shell 脚本

> ID：14387138
> 
> 赞同：0
> 
> 时间：2013-01-17T20:00:50.943
> 
> 标签：shell, unix, date, solaris

我正在拼命地寻找一个 bash 或 ksh 例程，它可以让我找到例如今天日期之前的前一个星期一、星期二、星期三……。另外，它必须在普通的 Solaris X 上工作，而且我没有可用的 GNU 日期。

例如：今天 = 2013/01/17 星期四；假设我想找到最后一个星期一。它必须返回：2013/01/14

我设法在网上找到了一个脚本，它可以完美地完成所有日子的工作，除了在这种特定情况下：例如：Today = Thursday 2013/01/17; 我想找到最后一个星期四，结果应该是： 2013/01/10 ；但相反，我又得到了今天的约会。

使用的脚本是这样的：

```
#!/bin/ksh

#Get the nbr of the current weekday (1-7)
DATEWEEK=`date +"%u"`
#Which previous weekday will we need (1-7)
WEEKDAY=$1
# Main part
#Get current date
DAY=`date +"%d"`
MONTH=`date +"%m"`
YEAR=`date +"%Y"`
#Loop trough the dates in the past
COUNTER=0
if [[ $DATEWEEK -eq $WEEKDAY ]] ; then
# I need to do something special for the cases when I want to find the date of the same day last week
  DAYS_BACK=168
  DAY=`TZ=CST+$DAYS_BACK date +%d`
  echo "DAY (eq) = $DAY"
else
    while [[ $DATEWEEK -ne $WEEKDAY ]] ; do
       COUNTER=`expr $COUNTER + 1`
       echo "Counter is: $COUNTER"
       DAYS_BACK=`expr $COUNTER \* 24`
       echo "DAYS BACK is: $DAYS_BACK"
       DAY=`TZ=CST+$DAYS_BACK date +%d`
       echo "DAY is: $DAY"
        if [[ "$DAY" -eq 0 ]] ; then
         MONTH=`expr "$MONTH" - 1`
           if [[ "$MONTH" -eq 0 ]] ; then
            MONTH=12
           YEAR=`expr "$YEAR" - 1`
           fi
         fi
       DATEWEEK=`expr $DATEWEEK - 1`
     if [[ $DATEWEEK -eq 0 ]]; then
     DATEWEEK=7
     fi
done
fi
echo $DAY/$MONTH/$YEAR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:29:12.677

（我之前的建议并没有像我想象的那样奏效。昨晚已经很晚了……）

关键是今天忽略，但仍然循环。试试这样：

```
#!/bin/ksh

#Get the nbr of the current weekday (1-7)
DATEWEEK=`date +"%u"`
#Which previous weekday will we need (1-7)
WEEKDAY=$1
# Main part
#Get current date
DAY=`date +"%d"`
MONTH=`date +"%m"`
YEAR=`date +"%Y"`
#Loop trough the dates in the past
COUNTER=0
while [ $COUNTER -eq 0 ] || [[ $DATEWEEK -ne $WEEKDAY ]] ; do
   COUNTER=`expr $COUNTER + 1`
   echo "Counter is: $COUNTER"
   DAYS_BACK=`expr $COUNTER \* 24`
   echo "DAYS BACK is: $DAYS_BACK"
   DAY=`TZ=CST+$DAYS_BACK date +%d`
   echo "DAY is: $DAY"
   if [[ "$DAY" -eq 0 ]] ; then
       MONTH=`expr "$MONTH" - 1`
       if [[ "$MONTH" -eq 0 ]] ; then
           MONTH=12
           YEAR=`expr "$YEAR" - 1`
       fi
   fi
   DATEWEEK=`expr $DATEWEEK - 1`
   if [[ $DATEWEEK -eq 0 ]]; then
       DATEWEEK=7
   fi
done
echo $DAY/$MONTH/$YEAR 
```

不过，你的`DAY=`TZ=CST+$DAYS_BACK date +%d``把戏对我不起作用。Linux`date`似乎总有一天能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:16:36.380

这行得通吗？

```
today=$(date +"%u")
weekday=$1
curdate=$(date +"%s")
gobackdays=$(($today - $weekday))
if [ $gobackdays -le 0 ]; then
  let gobackdays+=7
fi
SECSDAY=86400
backtime=$(($curdate - $gobackdays * $SECSDAY))
echo $(date -d "@$backtime") 
```

# vb6 - 不活动导致 VB6 Jet.OLEDB.4.0 中的数据丢失

> ID：14387139
> 
> 赞同：0
> 
> 时间：2013-01-17T20:00:51.583
> 
> 标签：vb6, oledb, ado, jet

我有一个使用 Jet.OLEDB.4.0 的 mdb 文件的 VB6 应用程序。该应用程序在保存和检索数据方面做得很好，除非我让它在打开记录集的情况下闲置半小时左右。

如果我让应用程序空闲一段时间，然后尝试再次使用该应用程序，它会丢失记录。似乎某些东西，数据或 dll，在空闲期间自动移出 ram，并且无法足够快地重新加载，因此当我再次开始使用该程序时，一切都得到协调并且所有记录都在那里。

如果我能知道 Windows 何时将东西移动到 ram，我可以通过在移动之前使用 sql update 命令将记录集更新到磁盘并设置一个布尔变量来提醒程序重新打开连接来解决这个问题和记录集，当应用程序用户返回程序。

我不知道如何判断 Windows 何时将或必须将东西移出 ram。有没有办法知道 Windows 何时将东西移出 ram 并将东西移出 ram？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:25:00.857

> 有没有办法知道 Windows 何时将东西移出 ram 并将东西移出 ram？

不是真的在VB6中。我会尝试使用计时器定期测试连接。像 10 秒的间隔根本不会给系统带来太大的压力。您可以对其进行测试以查看它是否以及何时关闭，以及当时是否发生了其他事情。检查您的操作系统日志。您可能会发现它永远不会因慢速计时器检查而关闭，这可能是您的解决方案。

# c# - 使用单个查询更新两个表

> ID：14387144
> 
> 赞同：0
> 
> 时间：2013-01-17T20:01:06.590
> 
> 标签：c#, mysql, visual-studio-2010

> **可能重复：**
> [MySQL，一次查询更新多个表](https://stackoverflow.com/questions/4361774/mysql-update-multiple-tables-with-one-query)

我想知道如何使用 MySql 和 C# 使用单个查询更新两个不同的表。

这是我从数据库中读取数据的查询。

```
string sql = @"SELECT clb.clube AS nome, clb.email AS email, clb.telefone AS 
telefone, usr.login AS login, usr.senha AS senha 
FROM clubes AS clb 
INNER JOIN usuarios AS usr ON usr.nome = clb.clube 
WHERE usr.login = @log"; 
```

请注意，我从`usr`和获取数据`clb`。现在，我想更新它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:06:30.473

您可以在语句中加入表`UPDATE`：

```
UPDATE clubes AS clb INNER JOIN usuarios AS usr ON usr.nome = clb.clube
SET    clb.telefone = ...,
       usr.senha    = ...
WHERE  usr.login = @log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:06:21.397

有几种方法可以做到这一点，但这样的事情应该适合你：

```
UPDATE clubes, usuarios
SET clubes.clube='SomeVal', 
   usuarios.senha='SomeVal'
WHERE usuarios.nome = clubes.clube
  AND usr.login = 'SomeVal'; 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:06:55.550

请尝试一下：

```
UPDATE clubes clb
INNER JOIN usuarios AS usr 
ON (usr.nome = clb.clube) 
SET youcolumns....
WHERE usr.login = @log 
```

# tcp - C# TcpClient 在其他 TCP 帧中发送数据

> ID：14387150
> 
> 赞同：1
> 
> 时间：2013-01-17T20:01:23.917
> 
> 标签：tcp, frame, tcpclient

我使用`TCPClient`和`NetworkStream`通过套接字发送短消息（Modbus 帧）。我使用`Write()`方法 from`NetworkStream`发送数据。

问题是我使用了两次或更多`write()`，但消息是在一个 TCP 帧中发送的（由 Wireshark 检查），对我来说，所有写入的消息都将在其他 TCP 帧中发送是必要的。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:48:48.233

听起来好像 TCP 正在缓冲您的数据以优化性能。您可能希望在两次发送之间设置延迟或禁用 Nagel 算法（使用 SetSocketOption NoDelay true）。

这可能会影响您的 TCP 性能，因此您需要小心何时/何地使用它。

麦克风

# javascript - iframe 的“Internet Explorer 已修改此页面以帮助防止跨站点脚本”

> ID：14387151
> 
> 赞同：3
> 
> 时间：2013-01-17T20:01:24.843
> 
> 标签：javascript, internet-explorer, iframe, cross-domain

我放置在具有指向另一个域的一个域 iframe 的页面上。一切正常。**然后我通过POST**方法发送到 iframe 表单，当回复时，Internet Explorer 生成错误

```
Internet Explorer has modified this page to help prevent cross-site scripting 
```

**当我通过GET**发送表单时，一切正常。

为什么会出现问题？我该如何解决？如果我无法访问托管 iframe 的页面，我可以修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T16:20:45.167

我知道老问题，但 Niet 在这个问题上是对的。解决方案是为该特定页面启用 CORS。完整细分：[http ://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

对于 PHP，我使用的解决方案是：

```
$http_protocolPos = stripos($_SERVER['SERVER_PROTOCOL'], '/');
$http_protocol = strtolower(substr($_SERVER['SERVER_PROTOCOL'], 0, $http_protocolPos)).'://'; 
$http_serverName = $_SERVER['SERVER_NAME'];
$httpFull = $http_protocol . $http_serverName;

if ($httpFull == "{$http_protocol}www.example1.com" || $httpFull == "{$http_protocol}www.example2.com" || 
    $httpFull == "{$http_protocol}localhost" )
{  
    header("Access-Control-Allow-Origin: $httpFull");
} 
```

从 Microsoft 的文档中，这也可能有效：

header("X-XSS-保护：0");

但我只是猜测那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:03:41.990

当请求中的某些内容也在响应中时，通常会发生这种情况。例如：

```
http://example.com/somepage?name=%3Cscript%3Ealert(%22lol%20hax%22%2Bdocument.cookie)%3B%3C%2Fscript%3E 
```

所以这个问题完全取决于*你*发布到 iframe 的内容。作为一般规则，您可能应该避免使用跨域 iframe。

# c++ - 为什么当我把代码放在课堂上时这个richedit窗口没有出现？

> ID：14387153
> 
> 赞同：0
> 
> 时间：2013-01-17T20:01:47.267
> 
> 标签：c++, oop, winapi, richedit

它编译并运行没有错误。唯一的问题是窗口不显示。析构函数应该永远存在，直到我用鼠标关闭窗口？

```
#include <windows.h>
#include <richedit.h>

class richEdit {
  HWND richeditWindow;
  richEdit() {
    HMODULE richedit_library = LoadLibrary("Msftedit.dll");
    if (NULL == richedit_library) abort();

    HINSTANCE hInstance = (HINSTANCE)GetModuleHandle(0);
    richeditWindow = CreateWindowExW (
      WS_EX_TOPMOST,
      MSFTEDIT_CLASS,
      L"window text",
      WS_OVERLAPPED | WS_SYSMENU | ES_MULTILINE | WS_VISIBLE,
      0, 0, 500, 500,
      NULL, NULL, hInstance, NULL
    );
  }
  ~richEdit() {
    MSG msg;
    while( GetMessageW( &msg, richeditWindow, 0, 0 ) ) {
      TranslateMessage( &msg );
      DispatchMessageW( &msg );
    }
  }
};

int main() {
  richEdit re();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:07:11.420

你的问题在这里：

```
richEdit re(); 
```

不是类型的*默认构造*对象`richEdit`。是一个名为的函数的声明`re`，它不带参数并返回一个`richEdit`.

你想要这个：

```
richEdit re; 
```

...或在*C++11*中：

```
richEdit re{}; 
```

请注意，阻塞*析构函数*肯定会让您在未来感到头疼。

# webkit - webkit：通过javascript添加内容后如何获取页面的实际内容？

> ID：14387155
> 
> 赞同：0
> 
> 时间：2013-01-17T20:01:54.587
> 
> 标签：webkit, vala

在某些 jquery 更新了某些内容后，我想获取加载到 webview 中的页面的实际内容

```
$(document).ready(function() {
$("#main").append('<p>Test</p><p>Test</p><p>Test</p><p>Test</p><p>Test</p><p>Test</p><p>Test</p>');
}); 
```

页面更新后，我尝试使用以下命令 [vala syntax] 获取页面内容

```
web_view.get_main_frame ().get_data_source().get_data().str 
```

但我只得到原始内容（即使加载完成）

使用

```
web_view.get_dom_document().document_element.text_content 
```

我得到了实际的内容，但标签被删除了。

我想我可以走整棵树来获取实际的文档，但应该是一种更简单的方法。

编辑：我的解决方案

```
this.web_view.load_finished.connect ((source, frame) => {
 stderr.printf(this.web_view.get_dom_document().body.get_inner_html());
} 
```

几年后当我读到这篇文章时，我可能会觉得这很糟糕，但现在我会继续下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:20:54.517

在 HTML DOM 中，元素实现了 HTMLElement 接口。WebKit 中的[HTMLElement 接口](http://trac.webkit.org/browser/trunk/Source/WebCore/html/HTMLElement.idl)包括[outerHTML](http://trac.webkit.org/browser/trunk/Source/WebCore/html/HTMLElement.idl#L45)属性。此属性返回一个字符串，其中包含元素及其所有子元素的序列化标记。我不熟悉 Vala，但根据您的代码片段，可以这样访问：

```
web_view.get_dom_document().document_element.outer_html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T09:47:04.040

Vala 中的正确答案是这样的：

```
webview.get_dom_document().get_body().get_inner_html () 
```

# java - Groovy 变量的作用域、赋值和引用

> ID：14387156
> 
> 赞同：1
> 
> 时间：2013-01-17T20:02:03.220
> 
> 标签：java, groovy, scope, variable-assignment

我想帮助理解 Groovy 在函数之间传递时如何管理范围和变量。假设我`def foo`在 main 方法中声明并将其作为参数传递给私有 void 方法 changeStuff。然后我可以进行如下更改：

```
public static void main(args) {
  def foo = [:];
  changeStuff(foo);
  println(foo);
}
private static void changeStuff(foo) {
  foo.bar = "new stuff";
} 
```

打印的结果是`[bar:new stuff]`但我很难以其他方式操纵 foo。请参阅接下来的两个示例：

```
public static void main(args) {
  def foo = [:];
  changeStuff(foo);
  println(foo);
}
private static void changeStuff(foo) {
  def newStuff = [:]
  newStuff.extra = "extra stuff";
  foo = newStuff;
} 
```

印刷：`[:]`

```
public static void main(args) {
  def foo = "before";
  changeStuff(foo);
  println(foo);
}
private static void changeStuff(foo) {
  foo = "after";
} 
```

印刷`before`

我知道这里有一些我不完全理解的概念，可能与`def`？任何关于我可以在哪里了解更多信息的总结或指导都将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:17:08.893

我在 groovy 方面的经验非常有限，所以我可能有点偏离。

在您提到的第一种情况下，您`foo`通过引用传递`changeStuff`，并且在方法内部，您直接修改地图，因此您的方法可以看到更改`main`。

在第二种情况下，方法中的参数`foo`被`changeStuff`分配给另一个映射。`foo`但是，您方法中的变量`main`仍然指向您创建的第一个地图，因此当您打印它时是空地图。

第三种情况与第二种情况相同。另外，您必须意识到`String`Java 中的对象（也可能在 Groovy 中）是不可变的。因此，当“修改” a 时`String`，您真正要做的是每次都创建一个新实例。

# android - Facebook FQL 让我所有的朋友最后一次签到

> ID：14387157
> 
> 赞同：0
> 
> 时间：2013-01-17T20:02:05.227
> 
> 标签：android, facebook-fql

我正在尝试使用 FQL 让我所有的 Facebook 朋友最后一次签到。因为我有很多朋友，所以 FQL 查询要花很长时间，所以我将其范围缩小到他们当前位置与我所在城市相同的朋友：

```
 SELECT author_uid, coords FROM checkin WHERE author_uid IN 
(SELECT uid FROM user WHERE uid IN
(SELECT uid2 FROM friend WHERE uid1 = me()) AND current_location.city IN
(SELECT current_location.city FROM user WHERE uid = me())) 
```

**我的问题：**

1.  对于每个用户，我得到 5 行。有没有办法让每个用户只获得 5 行？
2.  也许有某种方法可以做一个 GROUP BY 吗？
3.  这不是我想要的……很高兴听到建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:51:55.510

如果你得到`"exceeded the rate of 600 calls per 600 seconds"`

刷新你的`access token`

`/me/friends?fields=checkins.limit(<>)`将为您解决问题。

或者

如果你想使用`fql`那么，

```
SELECT checkin_id FROM checkin WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

它会给你你朋友的签到。

如果您还想要标记您的朋友的签到，请使用以下查询：

```
SELECT checkin_id FROM checkin WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1 =

 me()) OR tagged_uids IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:18:20.467

使用 Graph API 可能比使用 FQL 更容易做到这一点。这将为您提供所有朋友的最新签到信息。

```
/me/friends?fields=checkins.limit(1) 
```

FQL中没有`SELECT UNIQUE`语法，因此您需要在客户端应用程序中过滤结果。你可以`ORDER BY`用来对这些进行排序。

# zend-framework - Adobe Reader 无法打开在 Zend Framework 中使用 mPDF 创建的 .pdf 文件

> ID：14387158
> 
> 赞同：3
> 
> 时间：2013-01-17T20:02:06.240
> 
> 标签：zend-framework, adobe, adobe-reader, mpdf, zend-layout

我正在尝试在 Zend Framework 应用程序中使用 mPDF 从操作的输出生成一个 .pdf 文件。

这是我的操作代码：

```
public function testAction()
{       
        $this->_helper->viewRenderer->setNoRender();
        $this->_helper->layout->disableLayout();

        $this->view->foo = 'bar';

        $this->render();
        $output = $this->getResponse()->getBody();

        $layout = new Zend_Layout();
        $layout->content = $output;     
        $layout->setLayoutPath(dirname(dirname(__FILE__)) . '/views/layouts/');
        $layout->setViewSuffix('tpl');
        $layout->setLayout('pdf');

        $html = $layout->render();

        $mpdf = new mPDF('utf-8', 'A4');
        $mpdf->WriteHTML($html);
        $mpdf->Output('report.pdf', 'D');
} 
```

如果要显示的内容很长（即几段），在下载 .pdf 文件时，Adobe Reader 会抛出以下错误：Adobe Reader 无法打开“report.pdf”，因为它不是受支持的文件类型或因为文件已损坏（例如，它作为电子邮件附件发送且未正确解码）。

但是，如果我将相同的输出作为静态变量传递给 mpdf，而不使用 Zend Layout 渲染，那么 .pdf 文件将打开而不会出现任何错误。此外，当且仅当内容很长（即只有几个单词时它才有效）时，Adobe Reader 才会抛出这个问题。

我应该注意什么限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T10:10:52.417

文件开头和结尾不应有空格，因此请检查这些空格，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T21:18:14.470

如果 PDF 文件损坏，Adobe Reader 的宽容度不如其他一些 PDF 阅读器。在文本编辑器中打开您的 PDF 文档并检查文件是否以以下内容开头：%PDF-1.4 %Ã¢Ã£ÃÃ“</p>

有时会在文件顶部找到 PHP 错误通知。

资料来源：[mpdf 论坛 IanBack 的回答](http://www.mpdf1.com/forum/discussion/comment/4216#Comment_4216)

# regex - Linux sed 命令不改变目标文件

> ID：14387163
> 
> 赞同：8
> 
> 时间：2013-01-17T20:02:22.323
> 
> 标签：regex, linux, sed

使用我的 shell 脚本，当我运行`./Test1 hello result`.

它应该`hello`作为标准输入和结果作为标准输出。`<td>`shell 应该删除,`</td>`和之前的所有空格`abc`

所以，我这样写脚本

```
tr -d [:blank:] < $1
grep -r "<td>" $1 | sed -r 's/<td>//g' > $2
sed -r 's/<\/td>//g' $2
sed -r 's/abc//g' $2 
```

但是，当我运行此命令时，结果文件的内容与 hello 文件的内容完全相同（唯一的区别是删除了空格）

文件hello内容：

```
<td>hello</td>
  <td>hello</td>
    <td>hello</td>
<td>abc</td>
 <td>abc</td> 
```

如何`sed`将更改应用到目标文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T20:10:47.460

如果要将更改从`sed`后面存储到文件中，请使用以下`-i`选项：

```
$ cat file
<head>abc</head>
    <td>hello</td>
      <td>hello</td>
        <td>hello</td>
    <td>abc</td>
     <td>abc</td>
<h1>abc</h1>

$ sed -ni '/<td>/{s/^\s*//;s/abc//;s/<\/\?td>//g;p}' file

$ cat file
hello
hello
hello 
```

**编辑：**如果我们使用不同的分隔符`sed`并使用扩展的正则表达式选项，正则表达式会更清晰`-r`：

```
$ sed -r 's_</?td>__g' file
    hello
      hello
        hello
    abc
     abc 
```

使`?`前一个字符可选，因此`/`不必存在使正则表达式匹配`<td>`并合二为一`</td>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-04T12:58:03.733

在 sed 命令**中使用 -i 选项来更改文件本身**，如果没有，则在屏幕上打印输出但文件保持不变。

公式为：

```
sed -i <targetFile> 's/<beforeText>/<afterText>/g' <targetFile> 
```

例如：

```
sed -i myCredentials.txt 's/secretPassword/xxx/g' myCredentials.txt 
```

**另一个选项**- 输出到另一个文件并重命名它：

```
sed 's/secretPassword/xxx/g' myCredentials.txt > temp.txt
rm myCredentials.txt && mv temp.txt myCredentials.txt 
```

有关更多信息，请查看文档：

> **sed 实用程序读取指定的文件，如果没有指定文件，则读取标准输入，根据命令列表修改输入**。然后将输入写入标准输出。可以将单个命令指定为 sed 的第一个参数。可以使用 -e 或 -f 选项指定多个命令。所有命令都按照指定的顺序应用于输入，无论其来源如何。
> 
> **-i** **就地编辑文件，**以指定的扩展名保存备份。如果给出零长度扩展名，则不会保存备份。不建议在就地编辑文件时提供零长度扩展名，因为在磁盘空间耗尽等情况下，您可能会面临损坏或部分内容的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:04:22.340

如果要`sed`编辑现有文件，则应`-i`为其提供选项。

UPD：不清楚你想对结果做什么`tr`（现在它进入脚本的标准输出，是有意的吗？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T21:38:08.387

grep 解决方案：

```
kent$  echo "<td>hello</td>
  <td>hello</td>
    <td>hello</td>
<td>abc</td>
 <td>abc</td>"|grep -v 'abc'|grep -oP '(?<=<td>).*(?=</td>)'                                                                                                                
hello
hello
hello 
```

awk 解决方案：

```
kent$  echo "<td>hello</td>
  <td>hello</td>
    <td>hello</td>
<td>abc</td>
 <td>abc</td>"|awk -F"</?td>" '!/abc/{print $2}'
hello
hello
hello 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T23:45:37.437

您只需要 1 个简单的 sed 或 awk 替换行：

```
sed -r 's/[[:blank:]]|<\/?td>|abc//g' file
awk '{gsub(/[[:blank:]]|<\/?td>|abc/,"")}1' file 
```

例如：

```
$ cat file
<td>hello</td>
  <td>hello</td>
    <td>hello</td>
<td>abc</td>
 <td>abc</td>

$ sed -r 's/[[:blank:]]|<\/?td>|abc//g' file
hello
hello
hello 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-17T20:04:29.030

如果要 sed 修改文件，则需要通过 -e

# tfs - 使用升级模板将 TFS 2008 构建定义升级到 TFS 2012 构建定义，排队构建时出错

> ID：14387168
> 
> 赞同：0
> 
> 时间：2013-01-17T20:02:43.130
> 
> 标签：tfs, tfs-2012

正如标题所说，我们将构建定义从 TFS 2008 升级到使用升级模板的 TFS 2012 构建定义。但作为我们构建过程的一部分，我们调用了一个自定义 DLL，它覆盖了一些 MSBuild 任务以重写构建号和其他实用程序 MSBuild 任务。但是，当在 TFS 2012 中为升级的构建类型之一排队构建时，我们收到此错误：

> C:\Sites\TfsBuild\Rock.QL.Qbert.TfsCustomBuild.Targets - 1 个错误，0 个警告，查看日志文件 C:\Sites\TfsBuild\Rock.QL.Qbert.TfsCustomBuild.Targets (33 )：无法从程序集 C:\Sites\TfsBuild\bin\Rock.Ql.QBert.TfsCustomBuild.dll 加载“Rock.Ql.QBert.TfsCustomBuild.BuildNumberReader”任务。无法加载文件或程序集 'file:///C:\Sites\TfsBuild\bin\Rock.Ql.QBert.TfsCustomBuild.dll' 或其依赖项之一。试图加载格式不正确的程序。确认声明正确，程序集及其所有依赖项都可用，并且任务包含实现 Microsoft.Build.Framework.ITask 的公共类。

C:\Sites\TfsBuild\Rock.QL.Qbert.TfsCustomBuild.Targets - 为 MSBuild 生成的目标文件，以便在自定义过程中使用。

Rock.Ql.QBert.TfsCustomBuild.BuildNumberReader - 表示一个执行实际内部版本号自定义的类。

需要强调的是，在 TFS2012 中排队构建时这会失败，但在 TFS2008 中不会。任何想法或指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:09:35.660

大多数自定义 dll 问题来自于它们不在正确的位置，因此请尝试将任何自定义 dll 放在构建服务器上的以下路径

> “C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\PublicAssemblies”

.

您也可以将它们放在源代码控制上的文件夹中，并从构建控制器属性中对其进行配置，如下图所示。

![在此处输入图像描述](../Images/dd1974edb326e0408fd15ac385bc6acd.png)

# javascript - 如何附加事件“ondblclick”，其直接分配的处理程序以“this”为参数

> ID：14387171
> 
> 赞同：1
> 
> 时间：2013-01-17T20:02:52.613
> 
> 标签：javascript, parameters, event-handling, dom-events

`RawClicked`对于这样的事件，我有 tr 的旧分配方法：

```
<tr ondblclick="RawClicked(this) ....... 
```

我想像这样在 JavaScript 代码中附加事件，并删除在 HTML 标记中分配事件处理程序`<tr .... >`：

```
var element = document.getElementById("CustomersTable").getElementsByTagName("tr");
AssigningEventHandles(element, "dblclick", RawClicked(this));

function AssigningEventHandles(element, event, handler) {
    if (element.addEventListener) {
        element.addEventListener(event, handler, false);
    }

    else if (element.attachEvent) {
        element.attachEvent("on"+ event, handler);
    }
}

function RawClicked(raw) {
    var rawDoubleClicked = raw.id;
    alert(rawDoubleClicked);
} 
```

`this`那么在这种情况下如何将参数传递给函数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:30:52.560

1.  在您的示例`element`中是节点集合，而不是单个元素，因此您不能以这种方式添加事件侦听器。您可以遍历此节点集合或使用事件委托并将事件侦听器附加到`<table>`.

2.  在这一行`AssigningEventHandles(element, "dblclick", RawClicked(this));`中， RawClicked 是在`this`绑定到全局对象的情况下执行的。所以传递的参数`handler`是`AssigningEventHandles`这个函数的结果，它是无效的。您应该像这样传递函数：`AssigningEventHandles(element, "dblclick", RawClicked);`然后使用`this.id`而不是`raw.id`in `RawClicked`。

固定代码：

```
var element = document.getElementById("CustomersTable").getElementsByTagName('tr');
AssigningEventHandles(element, "dblclick", RawClicked);

function AssigningEventHandles(element, event, handler) {
  if( !element.length ){ /* convert to array if it's a single node */
    element = [element];
  }
  for( var i=0; i<element.length; i++){ /* iterate over nodes and attach event listeners */
    if (element[i].addEventListener) {
        element[i].addEventListener(event, handler, false);
    }

    else if (element[i].attachEvent) {
        element[i].attachEvent("on"+ event, handler);
    }
  }
}

function RawClicked() {
/* `this` is bound to the clicked element */
    var rawDoubleClicked = this.id;
    alert(this);
} 
```

[http://jsfiddle.net/WU76d/](http://jsfiddle.net/WU76d/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T20:37:45.420

在 firefox（使用 addEvenListener）中，处理程序似乎在元素的范围内运行，因此在 RawClicked 中使用“this”应该可以按预期工作

# c - 用字符串初始化 char 数组的最佳语法，忽略空终止符

> ID：14387172
> 
> 赞同：1
> 
> 时间：2013-01-17T20:02:55.490
> 
> 标签：c, syntax, coding-style

我经常想做这样的事情：

```
unsigned char urlValid[66] = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~"; 
```

...或者：

```
unsigned char listOfChar[4] = "abcd"; 
```

...也就是说，从字符串文字初始化字符数组并忽略该文字中的空终止符。这很方便，而且我可以做类似的事情`sizeof urlValid`并得到正确的答案。

但不幸的是它给出了错误`initializer-string for array of chars is too long`。

有没有办法：

*   关闭此特定事件的错误和警告（即，如果在初始化 char 数组时没有空终止符的空间）
*   做得更好，保持便利性和可读性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T20:07:37.947

您将问题标记为 C 和 C++。实际上，在 C 语言中，您不会收到此错误。相反，终止零根本不会包含在数组中。即在 C 中，它完全按照您希望的方式工作。

在 C++ 中，您确实会收到错误消息。在 C++ 中，您可能必须容纳终止零并记住从`sizeof`.

另请注意，正如@Daniel Fischer 在评论中建议的那样，您可以将定义与初始化“分离”

```
char urlValid[66]; 
memcpy(urlValid, "ab...", sizeof urlValid); 
```

从而有效地在 C++ 中模拟 C 语言的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:06:12.493

好吧，在 C++ 中，您应该始终使用`std::string`. 它很方便，不容易出现内存泄漏等。

但是，您可以在不指定大小的情况下初始化数组：

```
char urlValid[] = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~"; 
```

这是有效的，因为编译器可以从字符串文字中推断出正确的大小。另一个优点是，如果文字发生变化，您不必更改大小。

**编辑：**你不应该使用`unsigned char`字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T20:13:21.490

用实际的字符数组初始化？

```
char urlValid[] = {'a','b','c','d','e','f',...}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-17T20:11:14.757

有两个简单的解决方案。

1.  您可以像这样向数组中添加一个额外的元素：

    ```
    unsigned char urlValid[67] = 
        "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~"; 
    ```

2.  或一起忽略数组的大小：

    ```
    unsigned char urlValid[] =
        "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~"; 
    ```

# c# - 查找编辑不起作用

> ID：14387173
> 
> 赞同：1
> 
> 时间：2013-01-17T20:03:01.043
> 
> 标签：c#, winforms, devexpress, lookup

我有两个页面的 XtraTabControl，它们都有一个 LookUpEdit，当第二页上的页面加载不起作用时，

```
void Frm1_Load(object sender, EventArgs e)
{
    lookUpEditA.Properties.DataSource = datasource. . . . .
    lookUpEditA.Properties.ValueMember = "ID";
    lookUpEditA.Properties.DisplayMember = "xxxx";
    lookUpEditA.Properties.PopulateColumns();
    lookUpEditA.Properties.Columns["ID"].Visible = false;

    lookUpEditB.Properties.DataSource = datasource. . . . .
    lookUpEditB.Properties.ValueMember = "ID";
    lookUpEditB.Properties.DisplayMember = "xxxx";
    lookUpEditB.Properties.PopulateColumns();
    lookUpEditB.Properties.Columns["ID"].Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:52:40.027

我只能通过在第二个 LookUpEdit 上设置“ID”列的可见性来看到问题。

此问题的原因是 LookUpEdit 在创建句柄之前无法对数据源表示进行操作（执行填充列、操作列的可见性等）。第二个 LookUpEdit 将仅在显示第二个标签页时创建它的句柄。

为避免此问题，您可以使用以下方法：

```
if(!lookUpEditB.IsHandleCreated)
    lookUpEditB.HandleCreated += lookUpEditB_HandleCreated;
else InitLookUpEditDataSource();
//...
void lookUpEditB_HandleCreated(object sender, EventArgs e) {
    lookUpEditB.HandleCreated -= lookUpEditB_HandleCreated;
    InitLookUpEditDataSource();
}
void InitLookUpEditDataSource() {
    lookUpEditB.Properties.DataSource = this.categoriesBindingSource;
    lookUpEditB.Properties.DisplayMember = "CategoryName";
    lookUpEditB.Properties.ValueMember = "CategoryID";
    lookUpEditB.Properties.PopulateColumns();
    lookUpEditB.Properties.Columns["CategoryID"].Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:43:05.830

正如@DmitryG 所说，在未创建控件的 UI 处理程序之前，您不能使用`lookUpEditB.Properties.PopulateColumns()`语句。

据我了解，这些仅在显示第二个标签页时创建。除了创建条件语句来创建处理程序等之外，您可以使用[`XtraTabControl.SelectedPageChanged Event`](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTabXtraTabControl_SelectedPageChangedtopic)您可以`lookUpEditB`通过检查使用**Page2**[`XtraTabControl.SelectedTabPage Property`](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTabXtraTabControl_SelectedTabPagetopic)设置的包含.**`lookUpEditB`**

 **检查下面的测试代码片段：

```
public partial class TabControlTest : Form
{
    List<Category> dataSource = new List<Category>();
    public TabControlTest()
    {
        InitializeComponent();
        for (int i = 0; i < 10; i++)
        {
            dataSource.Add(new Category { ID = i + 1, Name = "Category" + (i + 1) });
        }
    }

    private void TabControlTest_Load(object sender, EventArgs e)
    {
        lookUpEditA.Properties.DataSource = dataSource;
        lookUpEditA.Properties.ValueMember = "ID";
        lookUpEditA.Properties.DisplayMember = "Name";
        lookUpEditA.Properties.PopulateColumns();
        lookUpEditA.Properties.Columns["ID"].Visible = false;
    }

    private void xtraTabControl1_SelectedPageChanged(object sender, DevExpress.XtraTab.TabPageChangedEventArgs e)
    {
        if (xtraTabControl1.SelectedTabPage == xtraTabPage2)
        {
             lookUpEditB.Properties.DataSource = dataSource;
            lookUpEditB.Properties.ValueMember = "ID";
            lookUpEditB.Properties.DisplayMember = "Name";
            lookUpEditB.Properties.PopulateColumns();
            lookUpEditB.Properties.Columns["ID"].Visible = false;
        }
    }
} 
```

希望这有帮助。**

# php - Google+ 保存令牌不起作用

> ID：14387180
> 
> 赞同：1
> 
> 时间：2013-01-17T20:03:25.497
> 
> 标签：php, oauth-2.0, google-plus

我的目标是通过 google plus 提供一次登录。我基本上想保存访问令牌，然后在用户返回时重用它。我尝试了很多论坛，并在过去 2 天尝试了各种代码。它不工作。谁能帮忙。

**首次登录代码：**

```
$client = new apiClient();
$client->setApplicationName("xxxx");
$client->setAccessType("offline");
$client->setClientId(GCLIENT_ID);
$client->setClientSecret(GCLIENT_SECRET);
$client->setRedirectUri('xxxx');
$client->setDeveloperKey('xxxx');
$client->setScopes(array('https://www.googleapis.com/auth/plus.me'));
$url = $client->createAuthUrl();
//redirected to this url 
```

**返回网址上的代码**

```
$client = new apiClient();
$client->setApplicationName("xxxx");
$client->setClientId(GCLIENT_ID);
$client->setClientSecret(GCLIENT_SECRET);
$client->setRedirectUri('xxxx');
$client->setDeveloperKey('xxxx');
$client->setScopes(array('https://www.googleapis.com/auth/plus.me'));
$client->setAccessType("offline");
$plus = new apiPlusService($client);

if (isset($_GET['code'])) {
    $client->authenticate();
    $_SESSION['access_token'] = $client->getAccessToken();
    gp_reg($_SESSION['access_token']); 
   **//this function saves the access token to the database**
} 
```

**当用户返回**

```
$client = new apiClient();
$client->setApplicationName("xxxx");
$client->setClientId(GCLIENT_ID);
$client->setClientSecret(GCLIENT_SECRET);
$client->setRedirectUri('xxxxx');
$client->setDeveloperKey('xxxx');
$client->setScopes(array('https://www.googleapis.com/auth/plus.me'));
$client->setAccessType('online');
$client-> setApprovalPrompt("auto");
$plus = new apiPlusService($client);

print_r($row['token']);

$client->setAccessToken($row['token']);
// **$row['token'] contains the token from database** 
```

**错误信息：**

致命错误：/opt/bitnami/apache2/htdocs/src/auth/apiOAuth2.php: 144 堆栈跟踪中**的消息“无法 json 解码访问令牌**”中未捕获的异常“apiAuthException”导致“$client- >setAccessToken($row['token'])"

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:07:28.200

这听起来像一个类似的问题，并且可以帮助您以最佳方式处理已返回的令牌。听起来这可能是它如何作为 JSON 发送回和如何存储（可能作为字符串而不是 JSON 对象）之间的问题。

[https://groups.google.com/forum/#!msg/google-api-php-client/fc7RUw1Pf44/TKpEihEp35wJ](https://groups.google.com/forum/#!msg/google-api-php-client/fc7RUw1Pf44/TKpEihEp35wJ)

如果是这种情况，您可能需要在将其从数据库中取出时将其重构为对象。

或者您可能只想确保您使用的是 refresh_token 值，因为这确实是您需要使用的。

# java - GZipInputStream .read() 将零插入缓冲区

> ID：14387182
> 
> 赞同：1
> 
> 时间：2013-01-17T20:03:33.430
> 
> 标签：java, binary, inputstream, gzipinputstream

我有一个奇怪的程序，其中 GzipInputStream 零填充缓冲区的一部分。我有幸知道字节在流中应该是什么样子，我可以看到缓冲区被 8 个正确字节和 12 个零（不应该为零）填充

字节应如下所示----> 0 20 82 22 -91 27 -96 65 66 65 88 32 32 32 32 81 32 0 0 0 100 78

字节实际上看起来像这样---> 0 20 82 22 -91 27 -96 65 66 65 0 0 0 0 0 0 0 0 0 0 0 0

前两个字节表示一个整数，它确定前两个之后的可变长度（以字节为单位）有效负载的大小。所以在这个例子中，第一个字节是 0 20，在 BIG_ENDIAN 中，这给了我们一个 20 字节的后续有效负载大小。

这是我的阅读代码

```
gzipInputStream = new GZIPInputStream(url.openStream());        

byte[] payload = new byte[2];
gzipInputStream.read(payload);
for(int i=0;i<payload.length;i++){
    System.out.println(payload[i]);
}
int payloadSize = ((payload[0] & 0xFF) << 8) | ((payload[1]) & 0xFF);
//read the next payloadSize bytes
byte[] messageBytes = new byte[payloadSize];

gzipInputStream.read(messageBytes); 
```

所以前两个字节是有效负载数组中的字节，后 20 个字节是 messageBytes 中的字节。想不通

由于 NPE 修改了代码

```
 byte[] payloadSizeBytes = new byte[2];
            int payloadSizeBytesRead = 0;
            while(payloadSizeBytesRead < 2){
                int r = gzipInputStream.read(buffer);
                if(r>0){
                    payloadSizeBytes[payloadSizeBytesRead] = buffer[0];
                    payloadSizeBytesRead++;
                }
            }
            int payloadSize = ((payloadSizeBytes[0] & 0xFF) << 8) | ((payloadSizeBytes[1]) & 0xFF);
            //read the next payloadSize bytes
            byte[] messageBytes = new byte[payloadSize];
            int messageBytesRead = 0;
            while(messageBytesRead < payloadSize){
                int r = gzipInputStream.read(buffer);
                if(r>0){
                    messageBytes[messageBytesRead] = buffer[0];
                    messageBytesRead++;
                }
            }
            for(int i=0;i<messageBytes.length;i++){
                System.out.println(messageBytes[i]);
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:10:12.993

约定[`read(byte[])`](http://docs.oracle.com/javase/7/docs/api/java/io/FilterInputStream.html#read%28byte%5B%5D%29)是它读取*一些*数据，并返回已读取的字节数。就目前而言，您忽略了返回值。相反，您应该检查 的返回值`read()`并继续调用`read()`，直到您读取`payloadSize`字节。

一个简单的方法是[`read(b, off, len)`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D,%20int,%20int%29)在循环中使用：

```
int payloadSize = ((payload[0] & 0xFF) << 8) | ((payload[1]) & 0xFF);
byte[] messageBytes = new byte[payloadSize];

int bytesRead = 0;
while (bytesRead < payloadSize) {
   bytesRead += gzipInputStream.read(messageBytes, bytesRead, payloadSize - bytesRead);
} 
```

# windows - Windows 服务和连续内存分配

> ID：14387184
> 
> 赞同：1
> 
> 时间：2013-01-17T20:03:37.003
> 
> 标签：windows, delphi, service, delphi-7

我有一个启动`Thread`. 该服务以`SYSTEM ACCOUNT`.

在我使用的线程内部`CoInitialize`，因为我有一个由 COM 对象管理的 XML 对象。

在某些窗口（2008 年 7 月标准，不是全部）中，我的服务变为无故连续分配内存 (12mb -> 50mb -> 100mb -> 500mb....) 。

如果我将服务的登录用户更改为管理员用户，问题就会停止。我无法理解发生了什么！

使用进程资源管理器（Microsoft sysinternals），我能够看到`WaitForMultipleObjects`由于调用`DecodePointer`（内核）而冻结了一些线程。

这是堆栈：

```
Start address: ntdll.dll!RtlDecodePointer+0x32a

ntkrnlpa.exe!KeWaitForMultipleObjects+0xab7
ntkrnlpa.exe!KeWaitForSingleObject+0x492
ntkrnlpa.exe!PsGetCurrentThreadTeb+0x377
ntkrnlpa.exe!KiCheckForKernelApcDelivery+0x24
ntkrnlpa.exe!IofCallDriver+0x64
ntkrnlpa.exe!NtQueryInformationProcess+0x1c63
ntkrnlpa.exe!NtQueryDirectoryFile+0x5b
ntkrnlpa.exe!ZwQueryLicenseValue+0xbc6
ntkrnlpa.exe!ZwQueryDirectoryFile+0x11
fltmgr.sys!FltGetVolumeName+0xd9
fltmgr.sys!FltCheckAndGrowNameControl+0x36a
fltmgr.sys!FltGetTunneledName+0xb81
fltmgr.sys!FltGetDestinationFileNameInformation+0x245
fltmgr.sys!FltReleaseFileNameInformation+0x871
fltmgr.sys!FltIsDirectory+0x58b
fltmgr.sys!FltGetFileNameInformation+0x120
fltmgr.sys!FltRequestOperationStatusCallback+0x635
fltmgr.sys!FltGetIrpName+0x80c
fltmgr.sys!FltGetIrpName+0xd42
fltmgr.sys!FltGetIrpName+0x13b3
fltmgr.sys!FltDeletePushLock+0x1db7
ntkrnlpa.exe!IofCallDriver+0x64
ntkrnlpa.exe!RtlUpcaseUnicodeChar+0x17e7
ntkrnlpa.exe!ObReferenceObjectByHandle+0x976
ntkrnlpa.exe!ObOpenObjectByName+0x13c
ntkrnlpa.exe!RtlUpcaseUnicodeChar+0x6c9
ntkrnlpa.exe!NtCreateFile+0x34
ntkrnlpa.exe!ZwQueryLicenseValue+0xbc6
ntdll.dll!KiFastSystemCallRet
shell32.dll!SHLoadInProc+0x7f3de
shell32.dll!SHLoadInProc+0x7f42c
shell32.dll!SHLoadInProc+0x7f7b5
shell32.dll!SHLoadInProc+0x7f8a5
shell32.dll!SHLoadInProc+0x37487
ntdll.dll!TpSetWait+0x149
ntdll.dll!RtlDecodePointer+0x32a
kernel32.dll!BaseThreadInitThunk+0x12
ntdll.dll!RtlInitializeExceptionChain+0x63
ntdll.dll!RtlInitializeExceptionChain+0x36 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:41:25.203

听起来您的线程可能没有正确释放它创建的 COM 对象。

# eclipse - 使用三星智能电视模拟器 (eclipse)

> ID：14387191
> 
> 赞同：4
> 
> 时间：2013-01-17T20:03:54.910
> 
> 标签：eclipse, samsung-smart-tv

我正在尝试创建三星智能电视应用程序。我在我的 Windows VM 上安装了 SDK（通过 VMWare），在您在模拟器中运行应用程序之前一切看起来都很好。它什么都不做..我什至尝试手动启动模拟器，这里是尊重错误：

# [2011]三星电视模拟器(2.5.1)

```
C:\Program Files (x86)\Samsung\Samsung TV SDK 4\Emulator\Emulator2011_v2.5\bin\Emulator2.exe

The application has failed to start because its side-by-side configuration is incorrect. Please set the application event log or use the command-line sxstrace.exe tool for more detail. 
```

# [2012]三星电视模拟器(3.5.2)

```
The application was unable to start correctly (0xc0150002). Click OK to close the application. 
```

# [2013]三星电视模拟器4

```
The application was unable to start correctly (0xc0150002). Click OK to close the application. 
```

***额外细节***

我正在使用 VMWare Fusion 5 在 Mac OS 上运行 Windows 7 Pro

所以我现在不知道该怎么做。有谁知道解决方法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:01:36.090

我有同样的麻烦。

安装 vcredist_x86.EXE [http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=26347](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=26347)

正是 vcredist_x86.EXE 2.6 MB

模拟器将在 Windows 7 x64 上运行。检查。

# android - 收到短信时采取行动 Android

> ID：14387194
> 
> 赞同：0
> 
> 时间：2013-01-17T20:04:00.417
> 
> 标签：android, android-intent, sms

我想要一个 SMS 接收器处理程序，它会在收到 SMS 时执行某些操作，我是 android 新手，所以我不知道我到底在做什么，我尝试了一些东西，但它不起作用。当我通过 telnet 向模拟器发送短信时，处理程序没有被执行

这是我的代码：

包 com.example.kk;

```
public class MainActivity extends MapActivity {

MapView mapView;
MapController mc;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    SmsReceiver smsreceiver = new SmsReceiver();
    mapView = (MapView) findViewById(R.id.mapView);
    LinearLayout zoomLayout = (LinearLayout) findViewById(R.id.zoom);
    @SuppressWarnings("deprecation")
    View zoomView = mapView.getZoomControls();

    zoomLayout.addView(zoomView, new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    mapView.displayZoomControls(true);
    mc = mapView.getController();
    Toast.makeText(this, "test", Toast.LENGTH_SHORT).show();

    p = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

    mc.animateTo(p);
    mc.setZoom(17);
    MapOverlay mapOverlay = new MapOverlay();
    List<Overlay> listOfOverlays = mapView.getOverlays();
    listOfOverlays.clear();
    listOfOverlays.add(mapOverlay);

    mapView.invalidate();
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
}

class SmsReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

        // ---get the SMS message passed in---
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null) {
            // ---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[])    pdus[i]);
                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
            }
            // ---display the new SMS message---
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:06:26.183

您需要将此添加到该接收器的清单中

```
<intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:21:30.910

您应该拥有 RECEIVE_SMS 权限并注册接收方以获取短信事件。你有RECEIVE_SMS 权限吗？我看不到您注册接收者的任何地方。

您可以通过清单或代码注册接收者。我看到你创建了接收者 (SmsReceiver smsreceiver = new SmsReceiver();) 但你没有注册它。[检查这篇文章](https://stackoverflow.com/a/4805733/477997)。

# jquery - 如何在 Jquery 中选择一组动态创建的 div id

> ID：14387196
> 
> 赞同：1
> 
> 时间：2013-01-17T20:04:00.730
> 
> 标签：jquery, jquery-selectors

我的问题很简单。在我的 php 页面中，我通过“while”语句生成尽可能多的 div 每个 div 都有一个以这种方式更改的 ID：（`id='ref".$i"'`每次 While 语句再次开始继续，`$i`增加 1，我的意思是`$i++` 现在我需要选择我的 JQUERY 文件中的所有这些 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:07:55.157

使用**[“开始于”^=](http://api.jquery.com/attribute-starts-with-selector/)**选择器通配符

```
$('[id^="ref"]')
// or
$('div[id^="ref"]') // if you want to be more specific 
```

一旦你有了这个集合，如果你想要每个值，你可以用 jQuery 循环遍历它们`.each()`：

```
var valueArray = [];

$('div[id^="ref"]').each(function () {
    valueArray.push( $(this).text() ); // storing them all here
});

console.log( valueArray ); // all your values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:08:15.183

给他们上一堂课：

```
id='ref".$i"' class='mydivs' 
```

然后按该类选择它们：

```
$("div.mydivs").doSomething() 
```

# json - 如何在 Servicestack 中使用自定义 JSON 序列化器？

> ID：14387202
> 
> 赞同：6
> 
> 时间：2013-01-17T20:04:11.670
> 
> 标签：json, serialization, servicestack

我想知道如何在 ServiceStack 中使用自定义 JSON 序列化程序。我知道 JsConfig.SerializeFn/DeSerializeFn 但这些似乎总是“JSON.stringify”我的自定义序列化程序的结果。

我喜欢替换整个 DTO 的序列化。最终结果应该是这样的

```
{"Name":"Greg"} 
```

并不是

```
"{\"Name\":\"Greg\"}" 
```

那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T04:31:30.573

[就ServiceStack 的 JSON 序列化](https://github.com/ServiceStack/ServiceStack.Text/)器中的其他钩子而言，`JsConfig<T>.RawSerializeFn`还有哪些`JsConfig<T>.RawDeserializeFn`应该可以满足您的需求。

否则，如果您只想进行一些前/后处理，还有`JsConfig<T>.OnSerializingFn`自`JsConfig<T>.OnDeserializedFn`定义钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:45:08.743

你的意思是使用`ServiceStack.Text.JsonSerializer.SerializeToString(object, typeof(object))`？如果您在 .net 的视图中使用它，您可能需要使用`Html.Raw(ServiceStack.Text.JsonSerializer.SerializeToString(object, typeof(object)))`.

# php - 使用 Twig 访问指定的数组元素

> ID：14387208
> 
> 赞同：0
> 
> 时间：2013-01-17T20:04:30.043
> 
> 标签：php, html, arrays, templates, twig

我有以下数组，我想用树枝访问指定元素的值。

```
numbers => Array ([01234567] => Array ( [0] => 9876543210 [1] => 8765432109 [2] => 0000000000)) 
```

我知道 中只有一个条目`numbers`，所以我想`01234567`直接用密钥访问数组。

即使很难`numbers|keys[0]`返回正确的密钥，我也不能像`numbers[numbers|keys[0]]`获取数组一样使用它。我也试过这个`attribute(array, item)`功能，但我没有让它工作。

是否可以直接访问它还是我需要使用循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:19:06.640

您发现了 Twig 的一个可能未记录的“功能”。如果您检查[源代码](https://github.com/fabpot/Twig/blob/master/lib/Twig/Template.php#L340)，twig 会尝试确定给定键是否为数字。它使用[ctype_digit](http://php.net/manual/en/function.ctype-digit.php)函数进行此检查，该函数检查变量是否仅包含数字字符。

您问题中的示例包含一个满足以下条件的数组键：它仅包含数字。不幸的是，它也是从零开始的，当字符串转换为整数时，它会被删除。

我不确定这是预期的行为，因此您可以尝试将此示例报告为错误。

对于当前的 twig 实现，因为除了循环构造之外的所有内容都使用 getAttribute 函数，所以您别无选择，只能使用 for 循环。

# node.js - Node-browserify 没有产生任何输出

> ID：14387211
> 
> 赞同：0
> 
> 时间：2013-01-17T20:04:43.007
> 
> 标签：node.js, browserify

我使用 全局安装了 node-browserify `npm install browserify -g`，但该模块没有按预期工作。安装后，我尝试`browserify entry.js -o entryBrowserfied.js`在与 相同的文件夹中 运行该命令`entry.js`，但该命令不会在与 entry.js 相同的目录中生成 JavaScript 文件，也不会产生任何控制台输出。既然这个命令似乎不起作用，我如何从 commonJS 模块生成“浏览过的”模块？

完整的控制台输出（使用我输入的命令）如下所示：

```
anderson@anderson-Ideapad-Z560 ~/Dropbox/JavaScript projects/fractal-replacement-images/requireJS_modules $ browserify entry.js -o entryBrowserfied.js
anderson@anderson-Ideapad-Z560 ~/Dropbox/JavaScript projects/fractal-replacement-images/requireJS_modules $ 
```

我仍然不确定为什么这个命令没有按照文档中的描述从 entry.js 生成文件。

# javascript - 以前的表单数据与当前数据一起发布

> ID：14387212
> 
> 赞同：0
> 
> 时间：2013-01-17T20:04:43.787
> 
> 标签：javascript, jquery, backbone.js, backbone-views

我正在创建一个具有滑入和滑出窗口的应用程序。这个滑入和滑出窗口有一个用户需要填写的表格。单击“保存”按钮会触发 POST 请求。一切顺利，直到这里。但是当用户第二次尝试发布时，有 2 个 POST 请求通过网络发送，第一个请求包含旧数据，第二个请求携带新数据。第三次，当用户填写表单时，发送了 3 个 POST 请求。我正在使用主干创建此应用程序，我尝试在发送数据之前清理视图，但这没有用，有人可以建议我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:28:42.530

检查您的事件并确保您没有提交事件和点击事件。

此外，如果您多次渲染视图，最终可能会在一个按钮上附加多个事件。

如果你有一些代码会很有帮助，这样我们就可以真正看到发生了什么。正如@fbynite 所指出的，您还可以检查您的事件绑定。

# css - Jquery - 切换当前列表项（100% 宽度）并向下推动左右（如果有）的项目

> ID：14387213
> 
> 赞同：2
> 
> 时间：2013-01-17T20:04:49.360
> 
> 标签：css, jquery

我有一个 <ul> 有很多 <li> 项目。<li> 以平铺格式显示（使用当前的 CSS，3 个项目放在一行中），每个 <li> 显示一个简短的介绍，并将扩展（到 100% 宽度）以显示所有信息，点击。我想要但不知道如何扩展项目时，它会占用页面的整个宽度**并将项目左右向下推**。使用我到目前为止的代码（如下），项目 1、4、7...（行的第一个）工作正常，但不是 2、3、5、6。在 jquery 或 CSS 中有没有办法做这个？或者另一种看待它的方式：有没有办法让***当前***项目成为该行的第一个？谢谢！

```
<ul class="resutls">
<li>Item 1</li><li>Item 2</li><li>Item 3</li><li>Item 4</li><li>Item 5</li> ...
</ul> 
```

CSS

```
.results li {width:200px; height:140px; margin:7px 14px 7px 0; float:left;}
.results li.current{width:660px; height:auto;} 
```

jQuery

```
 $('li').toggle(function() {  
   $(this).addClass("current");
   $($(this).find('.js-toggleContent')).toggle("slow");
 }, function() {  
   $(this).removeClass("current");
   $($(this).find('.js-toggleContent')).toggle("slow");   
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:13:35.710

我有一些东西可以将一个被选中的单元格弹出到包含它的行的正上方的一行，使其成为全角。这和你要找的很接近吗？如果是这样，您将需要混合使用 CSS 和 JS，并修改您的 HTML 以适应这种情况。这件事做了很多次（并且不得不重做以满足客户/客户的期望），这就是我经常做的事情。看看这个小提琴 [here](http://jsfiddle.net/rdillman/4wZPU/)

**HTML**

```
<ul class="results">
    <div class="detail hide"></div>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul>
<ul class="results">
    <div class="detail hide"></div>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul>
<ul class="results">
    <div class="detail hide"></div>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul> 
```

**CSS**

```
.results{
    background-color: yellow;
    margin: 0;
    padding: 0;
    position:relative;
    height:auto;
    overflow: visible;
    width:652px;
    display:block;
    list-style: none;
}
.results li {
    background-color:red;
    padding: 0;
    width:200px;
    height:140px;
    display:inline-block;
    margin:7px;
    list-style-type: none;
    cursor:pointer;
    -webkit-transition: all .5s linear;
    -moz-transition: all .5s linear;
    -ms-transition: all .5s linear;
    -o-transition: all .5s linear;
    transition: all .5s linear;
}
.detail{
    background-color:orange;
    padding: 7px;
    width:624px;
    position:relative;
    top:7;
    visibility:visible;
    left:auto;
    opacity: 1;
    margin:0 7px 7px 7px;
    cursor:pointer;
    -webkit-transition: all .5s ease-out;
    -moz-transition: all .5s ease-out;
    -ms-transition: all .5s ease-out;
    -o-transition: all .5s ease-out;
    transition: all .5s ease-out;
}
.hide{
    visibility:hidden;
    opacity: 0;
    position:absolute;
}
.fade{
    opacity: .2;
} 
```

**jQuery**

```
$(document).ready(function () {
    'use strict';
    var $getDetails = $('.results div'),
          $getLis = $('.results li');
    $('.results').on('click', 'li', function() {
        $getLis.removeClass('fade');
        $getDetails.addClass('hide').empty();
        $(this).siblings('div')
            .html($(this).html())
            .addClass('hide')
            .removeClass('hide');
        $(this).addClass('fade');
    });
    $('.results').on('click', '.detail', function() {
        $getDetails.addClass('hide').empty();
        $getLis.removeClass('fade');
    });
}); 
```

# django - 从外键（特别是 UserProfile）查询数据

> ID：14387220
> 
> 赞同：0
> 
> 时间：2013-01-17T20:05:24.537
> 
> 标签：django, django-views

如果我有一个模型，其中有几个从 UserProfile 模型继承的字段：

```
class LeaveRequest(models.Model):
    employee = models.ForeignKey(UserProfile)
    supervisor = models.ForeignKey(UserProfile, related_name='+', blank=False, null=False)
    submit_date = models.DateField(("submit date"), default=datetime.date.today)
    leave_type = models.CharField(max_length=64, choices=TYPE_CHOICES)
    start_date = models.DateField(("start date"))
    return_date = models.DateField(("return date"))
    ... 
```

我使用这个模型来创建一个模型表单：

```
class LeaveRequestForm(ModelForm):
    class Meta: 
        model = LeaveRequest 
```

如何在用户配置文件中查询电子邮件 url？在此视图功能中，我正在尝试向发件人（员工）和主管发送有关表单提交的通知电子邮件：

```
def create_request(request):
    if request.method == 'POST':
        form = LeaveRequestForm(request.POST)
        if form.is_valid():
            name = form.cleaned_data['employee']
            subject = form.cleaned_data['leave_type']
            message = form.cleaned_data['notes']
            sender = form.cleaned_data['employee']

            remoterq = form.save(commit=False)
            remoterq.save()
            form.save_m2m()
            recipients = [user.email for user in remoterq.employee, user.email for user in remoterq.supervisor]
            from django.core.mail import send_mail
            send_mail(subject, message, 'projects.xxx@google.com', recipients, fail_silently=False)
            return HttpResponseRedirect('.') 
```

我的“收件人”变量代码无效，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:12:05.193

尝试

```
remoterq.employee.user.email 
```

对于员工电子邮件和

```
remoterq.supervisor.user.email 
```

对于主管电子邮件。

# parsing - 从 Antlr Lexer 和 Parser 定义生成 CommonTree

> ID：14387224
> 
> 赞同：1
> 
> 时间：2013-01-17T20:05:42.310
> 
> 标签：parsing, antlr, lexer

> **可能重复：**
> [如何输出使用 ANTLR 构建的 AST？](https://stackoverflow.com/questions/4931346/how-to-output-the-ast-built-using-antlr)

有没有办法将我的词法分析器和解析器定义文件 (.g) 转换为 CommonTree？（在创建我的解析器生成器的过程中）

我不想使用我生成的解析器。我希望自然的 antlr 解析器（解析词法分析器和解析器定义文件）向我吐出一个 CommonTree 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:31:04.797

当然，它可以在这里找到：[http ://www.antlr.org/grammar/ANTLR/](http://www.antlr.org/grammar/ANTLR/)

在下面发布以防止可能的链接腐烂：

```
/*
 [The "BSD licence"]
 Copyright (c) 2005-2007 Terence Parr
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions
 are met:
 1\. Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.
 2\. Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the
    documentation and/or other materials provided with the distribution.
 3\. The name of the author may not be used to endorse or promote products
    derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
 IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/** ANTLR v3 grammar written in ANTLR v3 with AST construction */
grammar ANTLRv3;

options {
    output=AST;
    ASTLabelType=CommonTree;
}

tokens {
    DOC_COMMENT;
    PARSER; 
    LEXER;
    RULE;
    BLOCK;
    OPTIONAL;
    CLOSURE;
    POSITIVE_CLOSURE;
    SYNPRED;
    RANGE;
    CHAR_RANGE;
    EPSILON;
    ALT;
    EOR;
    EOB;
    EOA; // end of alt
    ID;
    ARG;
    ARGLIST;
    RET;
    LEXER_GRAMMAR;
    PARSER_GRAMMAR;
    TREE_GRAMMAR;
    COMBINED_GRAMMAR;
    INITACTION;
    LABEL; // $x used in rewrite rules
    TEMPLATE;
    SCOPE='scope';
    SEMPRED;
    GATED_SEMPRED; // {p}? =>
    SYN_SEMPRED; // (...) =>   it's a manually-specified synpred converted to sempred
    BACKTRACK_SEMPRED; // auto backtracking mode syn pred converted to sempred
    FRAGMENT='fragment';
    TREE_BEGIN='^(';
    ROOT='^';
    BANG='!';
    RANGE='..';
    REWRITE='->';
}

@members {
    int gtype;
}

grammarDef
    :   DOC_COMMENT?
        (   'lexer'  {gtype=LEXER_GRAMMAR;}    // pure lexer
        |   'parser' {gtype=PARSER_GRAMMAR;}   // pure parser
        |   'tree'   {gtype=TREE_GRAMMAR;}     // a tree parser
        |            {gtype=COMBINED_GRAMMAR;} // merged parser/lexer
        )
        g='grammar' id ';' optionsSpec? tokensSpec? attrScope* action*
        rule+
        EOF
        -> ^( {adaptor.create(gtype,$g)}
              id DOC_COMMENT? optionsSpec? tokensSpec? attrScope* action* rule+
            )
    ;

tokensSpec
    :   TOKENS tokenSpec+ '}' -> ^(TOKENS tokenSpec+)
    ;

tokenSpec
    :   TOKEN_REF
        (   '=' (lit=STRING_LITERAL|lit=CHAR_LITERAL)   -> ^('=' TOKEN_REF $lit)
        |                                               -> TOKEN_REF
        )
        ';'
    ;

attrScope
    :   'scope' id ACTION -> ^('scope' id ACTION)
    ;

/** Match stuff like @parser::members {int i;} */
action
    :   '@' (actionScopeName '::')? id ACTION -> ^('@' actionScopeName? id ACTION)
    ;

/** Sometimes the scope names will collide with keywords; allow them as
 *  ids for action scopes.
 */
actionScopeName
    :   id
    |   l='lexer'   -> ID[$l]
    |   p='parser'  -> ID[$p]
    ;

optionsSpec
    :   OPTIONS (option ';')+ '}' -> ^(OPTIONS option+)
    ;

option
    :   id '=' optionValue -> ^('=' id optionValue)
    ;

optionValue
    :   id
    |   STRING_LITERAL
    |   CHAR_LITERAL
    |   INT
    |   s='*' -> STRING_LITERAL[$s]  // used for k=*
    ;

rule
scope {
    String name;
}
    :   DOC_COMMENT?
        ( modifier=('protected'|'public'|'private'|'fragment') )?
        id {$rule::name = $id.text;}
        '!'?
        ( arg=ARG_ACTION )?
        ( 'returns' rt=ARG_ACTION  )?
        throwsSpec? optionsSpec? ruleScopeSpec? ruleAction*
        ':' altList ';'
        exceptionGroup?
        -> ^( RULE id {modifier!=null?adaptor.create(modifier):null} ^(ARG $arg)? ^(RET $rt)?
              optionsSpec? ruleScopeSpec? ruleAction*
              altList
              exceptionGroup?
              EOR["EOR"]
            )
    ;

/** Match stuff like @init {int i;} */
ruleAction
    :   '@' id ACTION -> ^('@' id ACTION)
    ;

throwsSpec
    :   'throws' id ( ',' id )* -> ^('throws' id+)
    ;

ruleScopeSpec
    :   'scope' ACTION -> ^('scope' ACTION)
    |   'scope' id (',' id)* ';' -> ^('scope' id+)
    |   'scope' ACTION
        'scope' id (',' id)* ';'
        -> ^('scope' ACTION id+ )
    ;

block
    :   lp='('
        ( (opts=optionsSpec)? ':' )?
        a1=alternative rewrite ( '|' a2=alternative rewrite )*
        rp=')'
        -> ^( BLOCK[$lp,"BLOCK"] optionsSpec? (alternative rewrite?)+ EOB[$rp,"EOB"] )
    ;

altList
@init {
    // must create root manually as it's used by invoked rules in real antlr tool.
    // leave here to demonstrate use of {...} in rewrite rule
    // it's really BLOCK[firstToken,"BLOCK"]; set line/col to previous ( or : token.
    CommonTree blkRoot = (CommonTree)adaptor.create(BLOCK,input.LT(-1),"BLOCK");
}
    :   a1=alternative rewrite ( '|' a2=alternative rewrite )*
        -> ^( {blkRoot} (alternative rewrite?)+ EOB["EOB"] )
    ;

alternative
@init {
    Token firstToken = input.LT(1);
    Token prevToken = input.LT(-1); // either : or | I think
}
    :   element+ -> ^(ALT[firstToken,"ALT"] element+ EOA["EOA"])
    |   -> ^(ALT[prevToken,"ALT"] EPSILON[prevToken,"EPSILON"] EOA["EOA"])
    ;

exceptionGroup
    :   ( exceptionHandler )+ ( finallyClause )?
    |   finallyClause
    ;

exceptionHandler
    :    'catch' ARG_ACTION ACTION -> ^('catch' ARG_ACTION ACTION)
    ;

finallyClause
    :    'finally' ACTION -> ^('finally' ACTION)
    ;

element
    :   elementNoOptionSpec
    ;

elementNoOptionSpec
    :   id (labelOp='='|labelOp='+=') atom
        (   ebnfSuffix  -> ^( ebnfSuffix ^(BLOCK["BLOCK"] ^(ALT["ALT"] ^($labelOp id atom) EOA["EOA"]) EOB["EOB"]))
        |               -> ^($labelOp id atom)
        )
    |   id (labelOp='='|labelOp='+=') block
        (   ebnfSuffix  -> ^( ebnfSuffix ^(BLOCK["BLOCK"] ^(ALT["ALT"] ^($labelOp id block) EOA["EOA"]) EOB["EOB"]))
        |               -> ^($labelOp id block)
        )
    |   atom
        (   ebnfSuffix  -> ^( ebnfSuffix ^(BLOCK["BLOCK"] ^(ALT["ALT"] atom EOA["EOA"]) EOB["EOB"]) )
        |               -> atom
        )
    |   ebnf
    |   ACTION
    |   SEMPRED ( '=>' -> GATED_SEMPRED | -> SEMPRED )
    |   treeSpec
        (   ebnfSuffix  -> ^( ebnfSuffix ^(BLOCK["BLOCK"] ^(ALT["ALT"] treeSpec EOA["EOA"]) EOB["EOB"]) )
        |               -> treeSpec
        )
    ;

atom:   range ( (op='^'|op='!') -> ^($op range) | -> range )
    |   terminal
    |   notSet ( (op='^'|op='!') -> ^($op notSet) | -> notSet )
    |   RULE_REF ( arg=ARG_ACTION )? ( (op='^'|op='!') )?
        -> {$arg!=null&&op!=null}?  ^($op RULE_REF $arg)
        -> {$arg!=null}?            ^(RULE_REF $arg)
        -> {$op!=null}?             ^($op RULE_REF)
        -> RULE_REF
    ;

notSet
    :   '~'
        (   notTerminal -> ^('~' notTerminal)
        |   block       -> ^('~' block)
        )
    ;

treeSpec
    :   '^(' element ( element )+ ')' -> ^(TREE_BEGIN element+)
    ;

/** Matches ENBF blocks (and token sets via block rule) */
ebnf
@init {
    Token firstToken = input.LT(1);
}
@after {
    $ebnf.tree.getToken().setLine(firstToken.getLine());
    $ebnf.tree.getToken().setCharPositionInLine(firstToken.getCharPositionInLine());
}
    :   block
        (   op='?'  -> ^(OPTIONAL[op] block)
        |   op='*'  -> ^(CLOSURE[op] block)
        |   op='+'  -> ^(POSITIVE_CLOSURE[op] block)
        |   '=>'    // syntactic predicate
                    -> {gtype==COMBINED_GRAMMAR &&
                        Character.isUpperCase($rule::name.charAt(0))}?
                       // if lexer rule in combined, leave as pred for lexer
                       ^(SYNPRED["=>"] block)
                    // in real antlr tool, text for SYN_SEMPRED is predname
                    -> SYN_SEMPRED
        |           -> block
        )
    ;

range!
    :   c1=CHAR_LITERAL RANGE c2=CHAR_LITERAL -> ^(CHAR_RANGE[$c1,".."] $c1 $c2)
    ;

terminal
    :   (   CHAR_LITERAL                -> CHAR_LITERAL
            // Args are only valid for lexer rules
        |   TOKEN_REF
            ( ARG_ACTION                -> ^(TOKEN_REF ARG_ACTION)
            |                           -> TOKEN_REF
            )
        |   STRING_LITERAL              -> STRING_LITERAL
        |   '.'                         -> '.'
        )   
        (   '^'                         -> ^('^' $terminal)
        |   '!'                         -> ^('!' $terminal)
        )?
    ;

notTerminal
    :   CHAR_LITERAL
    |   TOKEN_REF
    |   STRING_LITERAL
    ;

ebnfSuffix
@init {
    Token op = input.LT(1);
}
    :   '?' -> OPTIONAL[op]
    |   '*' -> CLOSURE[op]
    |   '+' -> POSITIVE_CLOSURE[op]
    ;

// R E W R I T E  S Y N T A X

rewrite
@init {
    Token firstToken = input.LT(1);
}
    :   (rew+='->' preds+=SEMPRED predicated+=rewrite_alternative)*
        rew2='->' last=rewrite_alternative
        -> ^($rew $preds $predicated)* ^($rew2 $last)
    |
    ;

rewrite_alternative
options {backtrack=true;}
    :   rewrite_template
    |   rewrite_tree_alternative
    |   /* empty rewrite */ -> ^(ALT["ALT"] EPSILON["EPSILON"] EOA["EOA"])
    ;

rewrite_tree_block
    :   lp='(' rewrite_tree_alternative ')'
        -> ^(BLOCK[$lp,"BLOCK"] rewrite_tree_alternative EOB[$lp,"EOB"])
    ;

rewrite_tree_alternative
    :   rewrite_tree_element+ -> ^(ALT["ALT"] rewrite_tree_element+ EOA["EOA"])
    ;

rewrite_tree_element
    :   rewrite_tree_atom
    |   rewrite_tree_atom ebnfSuffix
        -> ^( ebnfSuffix ^(BLOCK["BLOCK"] ^(ALT["ALT"] rewrite_tree_atom EOA["EOA"]) EOB["EOB"]))
    |   rewrite_tree
        (   ebnfSuffix
            -> ^(ebnfSuffix ^(BLOCK["BLOCK"] ^(ALT["ALT"] rewrite_tree EOA["EOA"]) EOB["EOB"]))
        |   -> rewrite_tree
        )
    |   rewrite_tree_ebnf
    ;

rewrite_tree_atom
    :   CHAR_LITERAL
    |   TOKEN_REF ARG_ACTION? -> ^(TOKEN_REF ARG_ACTION?) // for imaginary nodes
    |   RULE_REF
    |   STRING_LITERAL
    |   d='$' id -> LABEL[$d,$id.text] // reference to a label in a rewrite rule
    |   ACTION
    ;

rewrite_tree_ebnf
@init {
    Token firstToken = input.LT(1);
}
@after {
    $rewrite_tree_ebnf.tree.getToken().setLine(firstToken.getLine());
    $rewrite_tree_ebnf.tree.getToken().setCharPositionInLine(firstToken.getCharPositionInLine());
}
    :   rewrite_tree_block ebnfSuffix -> ^(ebnfSuffix rewrite_tree_block)
    ;

rewrite_tree
    :   '^(' rewrite_tree_atom rewrite_tree_element* ')'
        -> ^(TREE_BEGIN rewrite_tree_atom rewrite_tree_element* )
    ;

/** Build a tree for a template rewrite:
      ^(TEMPLATE (ID|ACTION) ^(ARGLIST ^(ARG ID ACTION) ...) )
    where ARGLIST is always there even if no args exist.
    ID can be "template" keyword.  If first child is ACTION then it's
    an indirect template ref

    -> foo(a={...}, b={...})
    -> ({string-e})(a={...}, b={...})  // e evaluates to template name
    -> {%{$ID.text}} // create literal template from string (done in ActionTranslator)
    -> {st-expr} // st-expr evaluates to ST
 */
rewrite_template
    :   // -> template(a={...},...) "..."    inline template
        id lp='(' rewrite_template_args ')'
        ( str=DOUBLE_QUOTE_STRING_LITERAL | str=DOUBLE_ANGLE_STRING_LITERAL )
        -> ^(TEMPLATE[$lp,"TEMPLATE"] id rewrite_template_args $str)

    |   // -> foo(a={...}, ...)
        rewrite_template_ref

    |   // -> ({expr})(a={...}, ...)
        rewrite_indirect_template_head

    |   // -> {...}
        ACTION
    ;

/** -> foo(a={...}, ...) */
rewrite_template_ref
    :   id lp='(' rewrite_template_args ')'
        -> ^(TEMPLATE[$lp,"TEMPLATE"] id rewrite_template_args)
    ;

/** -> ({expr})(a={...}, ...) */
rewrite_indirect_template_head
    :   lp='(' ACTION ')' '(' rewrite_template_args ')'
        -> ^(TEMPLATE[$lp,"TEMPLATE"] ACTION rewrite_template_args)
    ;

rewrite_template_args
    :   rewrite_template_arg (',' rewrite_template_arg)*
        -> ^(ARGLIST rewrite_template_arg+)
    |   -> ARGLIST
    ;

rewrite_template_arg
    :   id '=' ACTION -> ^(ARG[$id.start] id ACTION)
    ;

id  :   TOKEN_REF -> ID[$TOKEN_REF]
    |   RULE_REF  -> ID[$RULE_REF]
    ;

// L E X I C A L   R U L E S

SL_COMMENT
    :   '//'
        (   ' $ANTLR ' SRC // src directive
        |   ~('\r'|'\n')*
        )
        '\r'? '\n'
        {$channel=HIDDEN;}
    ;

ML_COMMENT
    :   '/*' {if (input.LA(1)=='*') $type=DOC_COMMENT; else $channel=HIDDEN;} .* '*/'
    ;

CHAR_LITERAL
    :   '\'' LITERAL_CHAR '\''
    ;

STRING_LITERAL
    :   '\'' LITERAL_CHAR LITERAL_CHAR* '\''
    ;

fragment
LITERAL_CHAR
    :   ESC
    |   ~('\''|'\\')
    ;

DOUBLE_QUOTE_STRING_LITERAL
    :   '"' (ESC | ~('\\'|'"'))* '"'
    ;

DOUBLE_ANGLE_STRING_LITERAL
    :   '<<' .* '>>'
    ;

fragment
ESC :   '\\'
        (   'n'
        |   'r'
        |   't'
        |   'b'
        |   'f'
        |   '"'
        |   '\''
        |   '\\'
        |   '>'
        |   'u' XDIGIT XDIGIT XDIGIT XDIGIT
        |   . // unknown, leave as it is
        )
    ;

fragment
XDIGIT :
        '0' .. '9'
    |   'a' .. 'f'
    |   'A' .. 'F'
    ;

INT :   '0'..'9'+
    ;

ARG_ACTION
    :   NESTED_ARG_ACTION
    ;

fragment
NESTED_ARG_ACTION :
    '['
    (   options {greedy=false; k=1;}
    :   NESTED_ARG_ACTION
    |   ACTION_STRING_LITERAL
    |   ACTION_CHAR_LITERAL
    |   .
    )*
    ']'
    {setText(getText().substring(1, getText().length()-1));}
    ;

ACTION
    :   NESTED_ACTION ( '?' {$type = SEMPRED;} )?
    ;

fragment
NESTED_ACTION :
    '{'
    (   options {greedy=false; k=2;}
    :   NESTED_ACTION
    |   SL_COMMENT
    |   ML_COMMENT
    |   ACTION_STRING_LITERAL
    |   ACTION_CHAR_LITERAL
    |   .
    )*
    '}'
   ;

fragment
ACTION_CHAR_LITERAL
    :   '\'' (ACTION_ESC|~('\\'|'\'')) '\''
    ;

fragment
ACTION_STRING_LITERAL
    :   '"' (ACTION_ESC|~('\\'|'"'))* '"'
    ;

fragment
ACTION_ESC
    :   '\\\''
    |   '\\' '"' // ANTLR doesn't like: '\\"'
    |   '\\' ~('\''|'"')
    ;

TOKEN_REF
    :   'A'..'Z' ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
    ;

RULE_REF
    :   'a'..'z' ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
    ;

/** Match the start of an options section.  Don't allow normal
 *  action processing on the {...} as it's not a action.
 */
OPTIONS
    :   'options' WS_LOOP '{'
    ;

TOKENS
    :   'tokens' WS_LOOP '{'
    ;

/** Reset the file and line information; useful when the grammar
 *  has been generated so that errors are shown relative to the
 *  original file like the old C preprocessor used to do.
 */
fragment
SRC :   'src' ' ' file=ACTION_STRING_LITERAL ' ' line=INT
    ;

WS  :   (   ' '
        |   '\t'
        |   '\r'? '\n'
        )+
        {$channel=HIDDEN;}
    ;

fragment
WS_LOOP
    :   (   WS
        |   SL_COMMENT
        |   ML_COMMENT
        )*
    ; 
```

# c# - 无法远程获取 IPv6

> ID：14387225
> 
> 赞同：1
> 
> 时间：2013-01-17T20:05:47.640
> 
> 标签：c#, .net, dns

我正在尝试获取远程机器的 IP。但是我的代码无法远程收集 IPv6。代码在本地运行时运行良好。以下是我的示例代码

```
System.Net.IPHostEntry hostEntryComputer;
try
{
    hostEntryComputer = System.Net.Dns.GetHostEntry(computerName);
    foreach (System.Net.IPAddress addr in hostEntryComputer.AddressList)
    {
        string temp = addr.ToString();
        Console.WriteLine("IP: " + temp);
    }               
}
catch(Exception ex)
{
    Console.WriteLine(ex.Message);
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:10:20.700

[来自 MSDN](http://msdn.microsoft.com/en-us/library/ms143998.aspx)：“如果本地计算机没有安装 IPv6，则从 GetHostEntry 方法的结果中过滤 IPv6 地址。因此，如果只有 IPv6 结果可用于 hostNameOrAddress.parameter，则可以返回一个空的 IPHostEntry 实例。”

按照这些教程在本地计算机上启用它：

*   [视窗](http://support.microsoft.com/kb/2478747)
*   [Windows Vista/7](http://www.yellowhead.com/IPv6_How.htm)

# python - 使用 pydev 时 subprocess.call() 不返回

> ID：14387231
> 
> 赞同：0
> 
> 时间：2013-01-17T20:06:20.320
> 
> 标签：python, powershell, pydev

考虑下面的简单 python 程序，它运行一个 powershell 脚本。如果我从命令行启动 python 程序，它工作正常，即使我觉得它为返回值打印一个空行而不是 0 很奇怪。但是，如果我从 pydev 运行这个 python 程序，脚本在调用`subprocess.call()`. 我在 Windows 7 下的 Eclipse SDK 4.2.1 下使用 Pydev 2.7.0。Python 版本是 2.7.3。

```
import subprocess

def run_powershell_script(script):
    cmd = ['powershell',
         '-ExecutionPolicy',
         'RemoteSigned',
         '-File',
         script]
    returncode = subprocess.call(cmd) 
    print "Done"
    return returncode

if __name__ == "__main__":
    print run_powershell_script("testscript.ps1") 
```

我正在测试的 powershell 脚本非常简单：它打印路径然后返回 0：

```
Write-Host "$env:Path"
exit 0 
```

所以回顾一下，我想我有两个问题，最重要的是为什么`subprocess.call()`当我在 pydev 下运行这个程序时会挂起，另一个问题是为什么当我打印时`returncode`我得到一个空行而不是 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:16:01.620

我不是100％在这里，但不`exit`只是杀死脚本吗？要在退出脚本时返回一个值，请使用`return`.. 所以试试这个 PS 脚本：

```
Write-Host "$env:Path"
return 0 
```

# java - PlayN - iOS 上的渲染性能不佳

> ID：14387239
> 
> 赞同：0
> 
> 时间：2013-01-17T20:06:29.910
> 
> 标签：java, iphone, ios, profiling, playn

我们有一款游戏在 Android 上运行相当流畅，但在 iOS 上运行速度非常慢，尤其是在 iPhone 4 上。我们发现了一些候选者可能会延迟游戏渲染，但整体性能仍然很差。

可以写下以下见解：

*   我们很确定 PlayN 渲染循环中的某些东西可能是性能不佳的主要原因。禁用物理模拟和游戏更新计算的影响是微不足道的，而它是 Android 上计算时间的 70%）。
*   对屏幕分辨率（视网膜/非视网膜）没有显着依赖性，因此可以消除不足的填充率。
*   避免使用 CanvasLayers 和 SurfaceLayers 只会产生很小的影响 - 大多数游戏只是移动 ImageLayers。
*   矢量文本标签渲染（来自 Triple Play）稍慢但边缘化。
*   复合操作更慢，但仍然不是主要原因。

问题/秒：

您是否知道在 iOS 平台上可能会很慢并且应该（并​​且可以）避免的任何其他 PlayN 操作？有什么方法可以让 XCode 分析器获取符号以更好地了解游戏中的主要问题？是否有任何其他工具可以用于 PlayN 内部分析？

感谢您遇到 iOS 性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:11:09.373

不得不说 GWT JBox2d（在 PLAYN v1.4、v1.5 最新版本中）在 Android 上非常慢。只需添加 >50 个物体，它就会开始挂起并降低帧速率。

真的在考虑 Nape 或本地库......谷歌 - **_** -

# ios - 需要知道用户何时点击了 iOS 键盘上的“返回”

> ID：14387244
> 
> 赞同：1
> 
> 时间：2013-01-17T20:06:48.730
> 
> 标签：ios, iphone-keypad

我正在开发 iOS 中的一个应用程序，它向用户显示一个随机字符串，并要求用户通过键盘输入相同的字符串。我想做的是比较用户输入的字符串，只有在他们按下“返回”键之后。这可能吗？

这是我正在执行此操作的相关方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if (textField.tag == 1)
    {

            userString = @"";
            userString = keypadText.text;

            [keypadText resignFirstResponder];

           //here 'rand' is the random string that was presented earlier to the user, and userString is the text that the user has entered.
            if ([userString isEqualToString:rand]) {

                //do something

            }

            else {

                //do something else

            }

            [self.navigationController popViewControllerAnimated:YES];

    }

    return YES;

} 
```

正如我所说，我只想在用户按下“返回”键后进行比较，直到那时，让用户有尽可能多的机会输入给定的文本，并进行任何必要的更正。

有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:23:54.000

只需使用`textFieldDidFinishingEditing`而不是`shouldChangeCharactersinRange`.

当然，也有

`- (BOOL)textFieldShouldReturn:(UITextField *)textField`

后者是更好的方法。

很简单。

# android-emulator - Android 模拟器在 Titanium 中不起作用

> ID：14387245
> 
> 赞同：0
> 
> 时间：2013-01-17T20:06:48.797
> 
> 标签：android-emulator, titanium-mobile

我刚开始使用 Titanium SDK 并创建了一个 android 项目。当项目完成并且我想在模拟器 Titanum 中运行代码时，会出现以下错误。

```
 File 

    "C:\Users\navidos\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 2324, in <module>
        builder = Builder(project_name,sdk_dir,project_dir,template_dir,app_id)
      File "C:\Users\navidos\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 341, in __init__
        self.sdk = AndroidSDK(sdk, self.tool_api_level)
      File "C:\Users\navidos\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\androidsdk.py", line 49, in __init__
        self.set_api_level(api_level)
      File "C:\Users\navidos\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\androidsdk.py", line 53, in set_api_level
        self.find_platform_dir()
      File "C:\Users\navidos\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\androidsdk.py", line 131, in find_platform_dir
        raise Exception("No \"%s\" or \"%s\" in the Android SDK" % ('android-%s' % api_level, android_api_levels[api_level]))

Exception: No "android-8" or "android-2.2" in the Android SDK 
```

有没有人知道我做错了什么，因为我只是不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:08:52.703

您将需要下载适当的 Android sdk（通过[Android SDK Manager](https://developer.android.com/tools/help/sdk-manager.html)、控制台或第三方工具）并安装它。看看这个类似的[问题](https://stackoverflow.com/questions/8961445/how-to-resolve-titanium-error-ex-tion-no-android-8-or-android-2-2-in-t)。

# php - 使用调度程序，如何确保文件仅由 Heroku 服务器运行？

> ID：14387247
> 
> 赞同：0
> 
> 时间：2013-01-17T20:06:58.437
> 
> 标签：php, heroku, cron, scheduled-tasks

我想用 Heroku Scheduler 运行一个 php 文件。有哪些方法可以确保不只是任何人都可以来执行文件？有没有办法把东西放在 web 根目录（带有 php 应用程序的“www”）之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:33:58.913

完成此操作的最简单方法是使用`.htaccess`项目根目录中的文件来确保无法通过 Apache 访问这些文件。调度程序仍然能够执行它们。

```
<Directory /app/www/DIRECTORY_NAME>
    Order Deny,Allow
    Deny from All
</Directory> 
```

作为`DIRECTORY_NAME`您放入这些 PHP 文件的名称。

# jpa - ...没有子类，因此不检查数据存储就返回

> ID：14387250
> 
> 赞同：0
> 
> 时间：2013-01-17T20:07:03.727
> 
> 标签：jpa, datanucleus, entitymanager

即使数据库中存在 D1，调用 em.find(Department.class, "D1") 也会返回 null。

调试日志显示消息为： id 的唯一候选者是 com.ge.dsp.iwork.entity.Department 并且没有子类，因此在不检查数据存储的情况下返回

这意味着什么？为什么它返回null？

* * *

然后我尝试使用

```
 departmentId = emp.getDepartment().getDeptNo().trim();
            Query query = em.createQuery("SELECT d FROM Department d WHERE   
      trim(d.deptNo) = :departmentId");     
            query.setParameter("departmentId", departmentId); 
```

注意：在传递给这里的参数之前，departmentId 已经被修剪了。

日志中打印的查询如下：

```
SELECT 'com.ge.dsp.iwork.entity.Department' AS  
NUCLEUS_TYPE,D.DEPTNAME,D.DEPTNO,D.LOCATION,D.MGRNO FROM DEPARTMENT D WHERE D.DEPTNO =  
<'D1'> 
```

并返回 0 行。

当我将查询修改为

```
 departmentId = emp.getDepartment().getDeptNo().trim();
            Query query = em.createQuery("SELECT d FROM Department d WHERE trim(d.deptNo) = :departmentId");     // 'D1'");
            query.setParameter("departmentId", departmentId.trim()); 
```

注意：departmentId 现在在将其设置为参数时再次修剪。

日志文件将查询显示为：

```
SELECT 'com.ge.dsp.iwork.entity.Department' AS NUCLEUS_TYPE,D.DEPTNAME,D.DEPTNO,D.LOCATION,D.MGRNO FROM DEPARTMENT D WHERE D.DEPTNO = 'D1' 
```

并从数据库返回实体。

为什么会出现这种情况？datanuclueus 何时在参数中添加尖括号 <>？

请指教

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:26:47.323

*“不检查数据存储”*意味着它知道要返回的对象的类型是什么，因此它不会检查数据存储以验证类型。为什么它返回 null 只有您可以回答，因为您知道数据存储中的内容、日志中的内容以及该类是什么。

尖括号表示 JDBC 语句的参数（因此在实际语句中是“？”）。这是 LOGGING，而不是数据存储区。

# javascript - 附加类和 AJAX 调用的正确方法

> ID：14387258
> 
> 赞同：-1
> 
> 时间：2013-01-17T20:07:35.417
> 
> 标签：javascript, jquery

好的，所以我真的不认为我正确地构建了我的 JS，并希望有人能指出我正确的方向。我不认为按顺序命名每个列表项的类是实现此目的的有效或正确方法。

我有一个复选框列表，单击时需要执行两个操作：

1) 切换位于其正下方的 div 的类名。

2) 通过 AJAX 发布状态。

**这是我当前的标记：**

```
<ol class="toolkitList">
<li>
            <label><input class="inlineCheckers" type="checkbox" id="checkers" onchange="setCheck();" /><b id="grayTitle">List Title 1</b></label>
                <i id="hiddenDiv">Div content can go here.</i>
        </li>

        <li>
            <label><input class="inlineCheckers" type="checkbox" id="checkers2" onchange="setCheck2();" /><b id="grayTitle2">List title 2</b></label>
                <i id="hiddenDiv2">Div content can go here.</i>
        </li>

        <li>
            <label><input class="inlineCheckers" type="checkbox" id="checkers3" onchange="setCheck3();" /><b id="grayTitle3">List title 3</b></label>
                <i id="hiddenDiv3">Div content can go here.</i>
        </li>

        <li>
            <label><input class="inlineCheckers" type="checkbox" id="checkers4" onchange="setCheck4();" /><b id="grayTitle4">List Title 4</b></label>
                <i id="hiddenDiv4">Div content can go here.</i>
        </li>
    </ol> 
```

**这是我当前的 JS：**

```
function setCheck() {
var el = document.getElementById("checkers");

if (el.checked) {
    document.getElementById("hiddenDiv").className = "main";
    document.getElementById("grayTitle").className = "titleGray";
 } else {
    document.getElementById("hiddenDiv").className = "";
    document.getElementById("grayTitle").className = "";
 }
}

function setCheck2() {
var el2 = document.getElementById("checkers2");

if (el2.checked) {
    document.getElementById("hiddenDiv2").className = "main";
    document.getElementById("grayTitle2").className = "titleGray";
 } else {
    document.getElementById("hiddenDiv2").className = "";
    document.getElementById("grayTitle2").className = "";
 }
}

function setCheck3() {
var el3 = document.getElementById("checkers3");

if (el3.checked) {
    document.getElementById("hiddenDiv3").className = "main";
    document.getElementById("grayTitle3").className = "titleGray";
 } else {
    document.getElementById("hiddenDiv3").className = "";
    document.getElementById("grayTitle3").className = "";
 }
}

function setCheck4() {
var el4 = document.getElementById("checkers4");

if (el4.checked) {
    document.getElementById("hiddenDiv4").className = "main";
    document.getElementById("grayTitle4").className = "titleGray";
 } else {
    document.getElementById("hiddenDiv4").className = "";
    document.getElementById("grayTitle4").className = "";
 }
} 
```

我意识到我还没有这个设置的 AJAX 部分，但我想让这个要求知道，因为我很快就会将该部分添加到代码中。感谢您提供的任何指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:16:51.167

我会这样做：

```
$toolkitlist.on( 'change', '.inlineCheckers', function () {
    $( this ).closest( 'li' ).toggleClass( 'checked', this.checked );
}); 
```

其中`$toolkitlist`是一个包含 OL 元素的 jQuery 对象。请注意我是如何在 LI 元素上设置类的，因为它是代表选中项的最外层元素。您可以使用这些选择器来设置“选中”状态的样式：

```
/* how they look like initially */
.grayTitle { ... }
.hiddenDiv { ... }

/* how they look like when their check-box is checked */
li.checked .grayTitle { ... }
li.checked .hiddenDiv { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:09:18.930

使用 jQuery 的[**`addClass`**](http://api.jquery.com/addClass/)

```
$('#grayTitle3').addClass('titleGray'); 
```

更新，使用[**`^=`**](http://api.jquery.com/attribute-starts-with-selector/)：

```
$('[id^=grayTitle]').addClass('titleGray'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T20:20:48.033

删除内联 .onchange.. 并将更改事件绑定到您的类`.inlineCheckers - then you can use`this`，这样您就不必为每个集合创建多个函数

```
$('.inlineCheckers').on('change', function {
  $el = $(this);
  var $hd = $el.closest('label').next('i'); 
  var $gt = $el.next('b');
  $hd.toggleClass('main', $el[0].checked);
  $gt.toggleClass('checkers', $el[0].checked);
} 
```

[http://jsfiddle.net/KYzgB/](http://jsfiddle.net/KYzgB/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T20:40:09.460

您还可以将该类应用于外部 div

CSS：

```
.selected label b {
    color:blue
}
.selected i {
    color:red
} 
```

JS：

```
$(".inlineCheckers").on('click',function(){
    $(this).parents("li").toggleClass('selected',$(this).is(":checked"));
}) 
```

jsfiddle：http: [//jsfiddle.net/y2rHF/3/](http://jsfiddle.net/y2rHF/3/)

# ruby-on-rails - Rails：Link_to 助手，带有 :controller、:action、:class 和嵌入的 html 标签

> ID：14387261
> 
> 赞同：0
> 
> 时间：2013-01-17T20:07:46.520
> 
> 标签：ruby-on-rails

嗨，我正在尝试创建一个非常复杂的链接，我也需要它看起来像这样`<a><li>Link text</li></a>`。现在我有这个：

```
<% ["Philosophy", "Team", "Local Vendors"].each do |link_name| %>
    <% if params[:action] == link_name.downcase.sub(" ", "_") %>
    <%= link_to {:controller => :philosophy, :action => link_name.downcase.sub(" ", "_").to_sym}, {:class => "selected"} do %>
        <li><%= link_name %></li>
    <% end %>
    <% else %>
    <%= link_to :controller => :philosophy, :action => link_name.downcase.sub(" ", "_").to_sym do %>
        <li><%= link_name %></li>
    <% end %>
    <% end %> 
```

但不是产生一个看起来像是`<a href="philosophy/philosophy" class="selected"><li>Philosophy</li></a>`给我的链接

```
<a href="/philosophy/philosophy?class=selected">
   <li>Philosophy</li>
</a> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:15:13.687

我认为这将解决您的问题：

```
<%= link_to({:controller => :philosophy, :action => link_name.downcase.sub(" ", "_").to_sym}, {:class => "selected"}) do %> 
```

如果没有括号，我很惊讶您在该行没有收到错误。

# cordova - Phonegap CGImageCreateWithImageProvider 错误

> ID：14387262
> 
> 赞同：1
> 
> 时间：2013-01-17T20:07:49.620
> 
> 标签：cordova, sencha-touch, xcode4.4

我最近迁移到了新的 Mac。上次我需要更新我的旧应用程序，所以我下载了旧版本的 Xcode 和 Phonegap。当我尝试为图像设置背景大小 css 时出现此错误。

```
CGImageCreateWithImageProvider: invalid image size: 210 x 210 
```

这只发生在应用程序第一次启动时，如果我在应用程序加载后尝试设置它，它可以正常工作。这是什么原因造成的？

我看到这个错误与 Mapview 有关，但我没有使用。

iOS 4.2.1、Xcode 4.4.1、Phonegap 1.6.1、Sencha Touch 1.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:38:17.127

我在 iPod Touch Safari 浏览器中测试了我的应用程序，它工作正常。我发现这是我的旧 iPod Touch 无法调整 jpg 图像大小的问题。我将图像更改为 png，现在可以正常工作了。

# cakephp - 如何在 CakePHP 中拒绝 test.ctp 并允许 home.ctp 访问匿名用户？

> ID：14387263
> 
> 赞同：1
> 
> 时间：2013-01-17T20:07:50.983
> 
> 标签：cakephp, authentication, cakephp-2.1

我在 CakePHP 2 中使用 AuthComponent。

我只想向匿名用户显示“主页”视图并拒绝“测试”视图。

两个视图都在文件夹 Views/Pages 内

如果我使用此代码：

```
public function beforeFilter(){
    parent::beforeFilter(); //calling parents before filter
    $this->Auth->allow('home'); //allowing home only for pages controller
} 
```

在我的 PagesController 中，我无法访问 PagesController 的任何页面，包括 home.ctp。

如果我使用：

```
$this->Auth->allow('display') 
```

在我的 PagesController 中，我可以访问 PagesController 的任何页面，包括 test.ctp。

我该如何解决这个问题？

我试图在我的 PagesController 名称 home() 上创建一个新方法。但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:42:18.963

这里给你一个很好的答案。 [允许 Cakephp 中的特定页面](https://stackoverflow.com/questions/5836654/allowing-a-specific-page-in-cakephp)

请记住，Auth->allow 用于方法。显示是页面控制器中的方法。主页被认为是显示中使用的变量。因此，您必须在 Pages 控制器中以编程方式执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:23:13.460

**情况一：如果你不想使用 CakePHP 默认的“显示”功能。**

除了在 PagesController 中创建一个名为 home() 的新方法之外，您还必须更改文件 app\Config\routes.php 中的代码，如下所示，以使其适用于 home 而不适用于其他方法，这个新代码重定向所有查询到页面控制器到 home.ctp。

```
//default code statement:
Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'display'));
//New code
Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'home')); 
```

**情况二：如果你想保留 CakePHP 的默认 'display' 功能**

然后，当访问者访问 test.ctp 页面时，您必须在显示功能中构建一些重定向逻辑，@​​Chuck Burgess 也通过链接回答。

# android - Android片段着色器有问题

> ID：14387264
> 
> 赞同：2
> 
> 时间：2013-01-17T20:07:51.670
> 
> 标签：android, opengl-es, shader, pixel

对不起，这个广泛的问题，但我不知道如何措辞。我正在创建一个操纵相机像素的应用程序。我是 OpenGl 的新手，我的问题可能在于我如何将纹理链接到着色器，或者在我的实际着色器代码中的某个地方。

我有一个 RGB 查找表，我将其转换为纹理并传递给着色器以用作操作表。我相信我的纹理大小和设置都合适，但我不能 100% 确定。在我的着色器中，我有这个：

```
uniform sampler2D data_Texture // The RGB look up table texture
uniform samplerExternalOES u_Texture; // The camera's texture 
```

这是在着色器的主循环中：

```
// Color changing Algorithm
vec3 texel = texture2D(u_Texture, v_TexCoordinate).rgb;
gl_FragColor = vec4(texel.x, texel.y, texel.z, 1.0);

float rr = gl_FragColor.r * 255.0;
float gg = gl_FragColor.g * 255.0;
float bb = gl_FragColor.b * 255.0;

int r = int(rr);
int g = int(gg);
int b = int(bb);

int index = ((r/4) * 4096) + ((g/4) * 64) + (b/4);

int x = int(mod(float(index), 512.0));
int y = index / 512;

vec4 data = texture2D(data_Texture, vec2(float(x)/512.0, float(y)/512.0)); 
```

我们使用相机的 RGB 像素来获取查找表的索引。然后我们尝试从查找表中获取 rgb 数据以替换相机的像素。这就是问题发生的地方。您可能从上面的代码中可以看出，我们实际上并没有用我们的数据更改 FragColor。这是因为我们正在测试并发现了一个有趣的事件。当我们注释掉主循环的最后一行时，

```
//vec4 data = texture2D(data_Texture, vec2(float(x)/512.0, float(y)/512.0)); 
```

相机只是正常显示，因为我们不对实际的 FragColor 进行任何操作。但是当我们留下最后一行时，像素会变成绿色代表深色，粉红色/橙色代表浅色。

为什么填充此数据变量，而不是显式更改 FragColor，会更改相机的像素？

# javascript - 断网重试功能

> ID：14387280
> 
> 赞同：1
> 
> 时间：2013-01-17T20:08:45.210
> 
> 标签：javascript, jquery, ajax, json

给定以下 jQuery 代码

```
function poll(){ 
    $.ajax({ url: /myurl, 
        success: function(data){ 
            //do stuff
        }, 
        dataType: "json", 
        complete: poll, 
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                $("#ajax-msg").html("Not connect.\n Verify Network.");
            } else if (jqXHR.status == 404) {
                $("#ajax-msg").html("Requested page not found. [404]");
            } else if (jqXHR.status == 500) {
                $("#ajax-msg").html("Internal Server Error [500]");
            } else if (exception === 'parsererror') {
                $("#ajax-msg").html("Requested JSON parse failed.");
            } else if (exception === 'timeout') {
                $("#ajax-msg").html("Time out error.");
            } else if (exception === 'abort') {
                $("#ajax-msg").html("Ajax request aborted.");
            } else {
                $("#ajax-msg").html("Uncaught Error.\n" + jqXHR.responseText);
            }
            //wait for some interval and then try to poll again
         },
         timeout: 10000 
    });
} 
```

在错误情况下，我希望在 1s、2s、4s、8s、16s、32s、1m、2m、4m、10m、20m、30m、40m 中再次调用 poll() 函数...

我读过使用睡眠是不正确的。我想知道“睡眠”、设置间隔或超时来完成此操作的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:17:33.573

只需使用 setTimeout 并重新发送请求。

```
function poll() {
  var delay = 1000,
    failnum = 0;
  $.ajax({
    url: /myurl, 
        success: function(data){ 
            / / do stuff
  },
  dataType: "json",
  complete: poll,
  error: function (jqXHR, exception) {
    if (jqXHR.status === 0) {
      $("#ajax-msg").html("Not connect.\n Verify Network.");
    } else if (jqXHR.status == 404) {
      $("#ajax-msg").html("Requested page not found. [404]");
    } else if (jqXHR.status == 500) {
      $("#ajax-msg").html("Internal Server Error [500]");
    } else if (exception === 'parsererror') {
      $("#ajax-msg").html("Requested JSON parse failed.");
    } else if (exception === 'timeout') {
      $("#ajax-msg").html("Time out error.");
    } else if (exception === 'abort') {
      $("#ajax-msg").html("Ajax request aborted.");
    } else {
      $("#ajax-msg").html("Uncaught Error.\n" + jqXHR.responseText);
    }
    //wait for some interval and then try to poll again
    var opts = this;
    failnum++;
    setTimeout(function () {
      $.ajax(opts);
    }, failnum * delay * 2);
  },
  timeout: 10000
  });
} 
```

您当然可以修改`failnum * delay * 2`以获得每次失败时所需的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:19:16.630

延迟后的递归轮询调用将起作用：

```
function poll(delay){ 
   ...
        error: function(jqXHR, exception) {
            ...
            //wait for some interval and then try to poll again
            setTimeout(function() {
                poll(delay ? 2 * delay : 1000);
            }, 
            delay ? delay : 1000);
         },
         timeout: 10000 
    });
} 
```

但这永远不会停止尝试，直到您关闭浏览器或计算机。但这就是你要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:31:14.567

我认为最简单的方法是使用相同的机制在成功和错误条件下继续轮询。

这样的事情应该这样做：

```
function poll(){
    clearTimeout(poll.data.timeout);
    $.ajax({ url: /myurl, 
        success: function(data){ 
            //do stuff
            poll.data.index = 0;
        }, 
        dataType: "json", 
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                $("#ajax-msg").html("Not connect.\n Verify Network.");
            } else if (jqXHR.status == 404) {
                $("#ajax-msg").html("Requested page not found. [404]");
            } else if (jqXHR.status == 500) {
                $("#ajax-msg").html("Internal Server Error [500]");
            } else if (exception === 'parsererror') {
                $("#ajax-msg").html("Requested JSON parse failed.");
            } else if (exception === 'timeout') {
                $("#ajax-msg").html("Time out error.");
            } else if (exception === 'abort') {
                $("#ajax-msg").html("Ajax request aborted.");
            } else {
                $("#ajax-msg").html("Uncaught Error.\n" + jqXHR.responseText);
            }
            poll.data.index = Math.min(++poll.data.index, poll.data.delays.length-1);
        },
        complete: function( jqXHR, textStatus){
            //wait for some interval and then try to poll again
            poll.data.timeout = setTimeout(poll, poll.data.delays[poll.data.index] * 1000);
        },
        timeout: 10000 
    });
}
//And now a tidy place to keep the data for managing the poll.
poll.data = {
    delays: [0, 1, 2, 4, 8, 16, 32, 60, 120, 240, 600, 1200, 1800, 2400],//seconds
    index: 0,
    timeout
}; 
```

# ios - iPhone/iPad 作为服务器

> ID：14387283
> 
> 赞同：0
> 
> 时间：2013-01-17T20:08:57.243
> 
> 标签：ios, cocoa, client-server

我想创建一个应用程序，客户端连接到服务器并通过图像和文本相互通信。我已经有一个服务器作为后端，但是有什么方法可以让 iPhone 成为服务器？我知道有`CocoaHTTPServer`，但所有示例都只是显示网页的服务器。你知道我可以如何使用它来满足我的需要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:17:57.443

没有办法将现在在 apache 上运行的所有东西直接带到 iPone 您可以在互联网上找到一些教程和解决方案。

也许这个线程可以帮助你：[iOS devices as web server](https://stackoverflow.com/questions/6804650/ios-devices-as-web-server)

关于 CocoaHTTPServer 也许看看[SimpleFileUploadServer](https://github.com/robbiehanson/CocoaHTTPServer/tree/master/Samples/SimpleFileUploadServer)

# android - android_listview

> ID：14387285
> 
> 赞同：0
> 
> 时间：2013-01-17T20:09:02.297
> 
> 标签：android

我想在列表视图中单击项目时打开一个新活动。这个怎么做。？这是代码：

```
package com.example.c_progams; 
```

公共类 Second_listview 扩展 ListActivity{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.second_listview);

    setListAdapter (new ArrayAdapter<String>(this, R.layout.second_listview, type));
    ListView list = getListView();
    list.setTextFilterEnabled(true);
    list.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        }

    });
} 
```

静态最终字符串 [] 类型 = 新字符串 []{

```
"Array", "Operator Overloading", "Inheritence", "Strings", "Pointers", "Files", "Misclaneous" 
```

};

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:12:58.980

只需将您的 Activity 调用代码放入 onItemClick(..) 方法

像这样：

```
 @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

            Intent nextScreen = new Intent(getApplicationContext(), nextScreenActivity.class);
            startActivity(nextScreen);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:11:05.707

```
public void onListItemClick(ListView lv, View v, int position, long id) {
    Intent intent;
    switch (position) {
        case 0:
            intent = new Intent(this, FirstActivity.class);
            break;
        case 1:
            intent = new Intent(this, SecondActivity.class);
            break;
        default:
            break;
    }

    startActivity(intent);
} 
```

# dll - 使用 C++Builder 在 DLL 中创建表单

> ID：14387286
> 
> 赞同：3
> 
> 时间：2013-01-17T20:09:14.147
> 
> 标签：dll, c++builder, vcl

我想创建一个导出函数的 DLL，该函数将向用户显示表单。VCL 是否允许这种使用，如果允许，那么这是如何实现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:24:58.317

快速回答：是的

在 IDE 中创建 DLL，确保您在 DLL 创建向导中选择了使用 VCL。同样，在 IDE 中，添加一个新的 VCL 表单。然后，您必须创建一个可从 DLL 外部调用的函数来创建表单并显示它。

# ios - 在“applicationDidEnterBackground”中关闭应用程序

> ID：14387288
> 
> 赞同：0
> 
> 时间：2013-01-17T20:09:22.497
> 
> 标签：ios, objective-c, facebook-ios-sdk

我有一个 iOS 应用程序，由于多种原因，我需要在用户单击设备的主页按钮时关闭它。我不能支持背景。

我现在有一个名为 的选项`Application does not run in background`，但我无法使用它，因为 Facebook sdk 存在一个错误，当使用此选项时，无法通过 Facebook 进行身份验证。[这是 Facebook 的错误报告](https://developers.facebook.com/bugs/414563691940501?browse=search_506e2a4ecd68e7258709929)。

所以我不知道该怎么办，我该如何重新启动它？一个`[[NSThread mainThread] exit]`在`applicationDidEnterBackground`？

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:19:22.900

Plain old`stdlib.h exit()`将终止应用程序，尽管它违反了[苹果指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW1)（请参阅“不要以编程方式退出”）。

如果您不启动任何操作，您的应用将不会执行任何后台操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:24:30.953

`UIApplicationExitsOnSuspend`在. _ `YES`_`Info.plist`

要将此作为您需要的操作`exit(0)`或`[[NSThread mainThread] exit]`，但这违反了 Apple 的人机界面指南

因此，您还可以做的只是将所有视图设计为具有重置功能的方式。然后当`applicationDidEnterBackground`存储您需要在下次启动时重置或直接在所有活动视图上调用重置时`applicationWillEnterBackground`

所以你的应用程序并没有真正重启，但你所有的视图看起来都是这样的。为了给你一个建议，我会设计我的应用程序，使其在我退出时不会自行关闭。这不是很好的用户体验。一旦单击主页按钮，您的所有数据都将消失，当您接到电话时也是如此。

# javascript - 在 JavaScript 中设置光标以进行长同步操作

> ID：14387289
> 
> 赞同：3
> 
> 时间：2013-01-17T20:09:30.077
> 
> 标签：javascript, html, cursor

我正在尝试在长时间运行的*同步*XmlHttpRequest的开头设置一个全局页面光标（使用`cursor: wait !important;`on ） （我知道同步很烂，但现在不用担心），但是浏览器（在 Chrome 中测试）没有更新光标直到控制从脚本返回，直到长时间运行的操作结束时才会发生。`document.body`

 *它适用于异步 XmlHttpRequest（因此将同步的迁移到异步显然是一种解决方案）。

有没有办法让浏览器在不中断当前同步操作的情况下刷新光标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:19:26.887

正如 Teemu 上面评论的那样，您必须延迟函数的执行，即使是 0 毫秒（这会将其安排在事件循环的下一个滴答声中，让浏览器有机会在启动之前更新 UI）：

```
// change cursor
document.body.style.cursor = "wait !important";

// call long-running function from setTimeout
setTimeout(longRunningFunction, 0); 
```

这是我知道的唯一解决方案，但它可能对您不起作用，因为您声明“现在很多逻辑都是在假设它是同步的情况下编写的”，因为您将有效地使其异步启动。*

# javascript - 捕获完整的画布图像

> ID：14387292
> 
> 赞同：2
> 
> 时间：2013-01-17T20:09:41.047
> 
> 标签：javascript, html, canvas, kineticjs

我正在寻找一种将整个画布（包括移动到画布外的元素）捕获到图像的方法。我正在使用 KineticJS 库并且我知道该`toDataURL`功能。问题是图像被裁剪到画布边界。

作为一种解决方法，我想将画布上的所有元素复制到一个足够大以容纳所有元素的临时隐藏画布，然后使用该`toDataURL`功能。我想知道是否有更清洁的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:24:40.600

有趣的问题。我喜欢临时画布的想法。此外，您可以调整主画布的大小，对所有子元素应用偏移平移，捕获图像，然后反向平移并调整大小。这不会比复制到隐藏的画布更复杂。另外，单画布方法会更节省内存。

只是我的 3 美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:03:46.173

我同意 Alvin 的观点，你可以调整画布的大小，方法如下：

```
 stage.setWidth(window.innerWidth);  // inner width of your window
 stage.setHeight(window.innerHeight); // inner height of your window
 stage.draw();    //redraw 
```

这会将您的舞台大小调整为窗口的宽度和高度，但这不会考虑元素比窗口更远的可能性，但您可以修改 .set 函数中的数字以考虑最右边/留下一个。

如果您正在寻找一种将画布中的所有元素复制到另一个阶段的快速方法，您可以对其进行序列化：

```
 var json = stage.toJSON();
  var newStage = Kinetic.Node.create(stageJson, 'newContainer'); 
```

# ios - 我想将 .plist 转换为 sqlite

> ID：14387293
> 
> 赞同：0
> 
> 时间：2013-01-17T20:09:40.830
> 
> 标签：ios, xcode, sqlite, parsing, plist

我正在使用 plist 将数十个数据解析到 tableview 中。它工作得很好。然而，它是不受保护的。如果他打开 .ipa 文件的内容，某人可以轻松访问该 plist 文件。我想保护我的数据。有没有办法保护 .plist 文件？据我所知，Sqlite 通过将值更改为复杂的键来保护数据。然而，如果我要在我的应用程序中使用 sqlite，我必须改变我将数据解析为字符串的方式。我对 SQLite 一无所知。

从哪儿开始？你有什么建议？是否有更简单更好的方法来保护 ios 应用程序中的数据？

提前致谢。

我的 plist 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>quizName</key>
        <string>History</string>
        <key>quizDescription</key>
        <string>Check your knowledge about great historical events, who did what where to whom!</string>
        <key>quizImageName</key>
        <string>quiz-history.png</string>
        <key>questions</key>
        <array>
            <dict>
                <key>question</key>
                <string>In monarchy, for how long does the head of state rule?</string>
                <key>answers</key>
                <array>
                    <string>5 years</string>
                    <string>until someone else is elected</string>
                    <string>as long as he/she is the party leader</string>
                    <string>until death or abdication</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>3</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>When was World War 2 fought?</string>
                <key>answers</key>
                <array>
                    <string>1935 - 1939</string>
                    <string>1914 - 1918</string>
                    <string>1939 - 1945</string>
                    <string>1918 - 1939</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>2</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>Peloponnesian War was famous greek war between...</string>
                <key>answers</key>
                <array>
                    <string>Athens and Sparta</string>
                    <string>Greece and Persia</string>
                    <string>Athens and Attica</string>
                    <string>Greece and Macedonia</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>0</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>Battle of the Pyramids was fought between which two forces?</string>
                <key>answers</key>
                <array>
                    <string>Egypt and Rome</string>
                    <string>French and Mamluk</string>
                    <string>Egypt and Persia</string>
                    <string>Mamluk and Rome</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>1</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>First Winter Olypmics were held in...</string>
                <key>answers</key>
                <array>
                    <string>Italy, 1920</string>
                    <string>Germany, 1921</string>
                    <string>England, 1928</string>
                    <string>France, 1924</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>3</integer>
            </dict>
        </array>
    </dict>
    <dict>
        <key>quizName</key>
        <string>Animal kingdom</string>
        <key>quizDescription</key>
        <string>Not sure how many legs does the spider have? Test your knowledge and find out!</string>
        <key>quizImageName</key>
        <string>quiz-animals.png</string>
        <key>questions</key>
        <array>
            <dict>
                <key>question</key>
                <string>Where were the cats domesticated?</string>
                <key>answers</key>
                <array>
                    <string>In Greece, around 500 B.C.</string>
                    <string>In ancient Egypt, around 1.600 B.C.</string>
                    <string>In China, around 2.000 B.C.</string>
                    <string>In Mongolia, around 1.400 B.C.</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>1</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>Dogs have a range of hearing of...</string>
                <key>answers</key>
                <array>
                    <string>approximately 40 Hz to 60,000 Hz</string>
                    <string>approximately 10,000 Hz to 60,000 Hz</string>
                    <string>approximately 40 Hz to 5,000 Hz</string>
                    <string>approximately 5,000 Hz to 30,000 Hz</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>0</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>Meerkats can be found where?</string>
                <key>answers</key>
                <array>
                    <string>Australia</string>
                    <string>north Africa and south-west Asia</string>
                    <string>south Africa</string>
                    <string>Africa and Australia</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>2</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>Biggest mammal is...</string>
                <key>answers</key>
                <array>
                    <string>Blue whale</string>
                    <string>Elephant</string>
                    <string>Killer whale</string>
                    <string>Rhinoceros</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>0</integer>
            </dict>
            <dict>
                <key>question</key>
                <string>Which of these animals sheads it&apos;s skin?</string>
                <key>answers</key>
                <array>
                    <string>monkey</string>
                    <string>narwal</string>
                    <string>snake</string>
                    <string>cow</string>
                </array>
                <key>correctAnswerIndex</key>
                <integer>2</integer>
            </dict>
        </array>
    </dict>
</array>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:16:12.580

如果您只想加密您的 plist 文件，请查看[这个 SO question](https://stackoverflow.com/questions/5895899/trying-to-encrypt-an-nsdictionary-when-writing-to-file)。

如果你真的想要 sqlite，那么不要直接处理 sqlite，看看[CoreData](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。Core data 是一个 Apple 框架，它使得使用 NSObjects 和关系来存储和获取数据变得非常容易。如果需要，核心数据可以使用 sqlite 进行存储。学习曲线相当陡峭，但值得学习，因为它是一个非常有用的框架，需要掌握。

请记住，sqlite DB 只是存储在默认情况下任何人都可以读取的文件中。所以你需要更多的努力来加密它。

# windows-phone-7 - MediaLibrary.SavePicture 方法导致 System.UnauthorizedAccessException

> ID：14387294
> 
> 赞同：0
> 
> 时间：2013-01-17T20:10:02.747
> 
> 标签：windows-phone-7, windows-phone-8

我有以下代码处理下载图像并将其保存到手机的媒体库。它失败了`System.UnauthorizedAccessException`，好像有一些跨线程访问。据我了解，await 语句下方的所有代码都在 UI 线程上运行，因此这应该不是问题。此外，我尝试使用以下代码包装`var stream = await client.OpenReadTaskAsync(this.Url);`，`Deployment.Current.Dispatcher.BeginInvoke`但没有帮助。:( 我在 WP8 上运行它，目的是稍后将代码移植到 WP7。

```
 private async void OnSaveImageCommand()
    {
        RunProgressIndicator(true, "Downloading image...");
        var client = new WebClient();
        try
        {
            var stream = await client.OpenReadTaskAsync(this.Url); 

            var bitmap = new BitmapImage();
            bitmap.SetSource(stream);

            using (var memoryStream = new MemoryStream())
            {
                var writeableBitmap = new WriteableBitmap(bitmap);
                writeableBitmap.SaveJpeg(memoryStream, writeableBitmap.PixelWidth, writeableBitmap.PixelHeight, 0,
                                         100);
                memoryStream.SetLength(memoryStream.Position);
                memoryStream.Seek(0, SeekOrigin.Begin);

                var mediaLibrary = new MediaLibrary(); 
                mediaLibrary.SavePicture("image.jpg", memoryStream);
                MessageBox.Show("Image has been saved to the phone's photo album");
            }
        }
        catch 
        {
            MessageBox.Show("Failed to download image"); 
        }
        finally
        {
            RunProgressIndicator(false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T20:26:30.037

您是否在应用的清单中添加了 ID_CAP_MEDIALIB_PHOTO 功能？

![ID_CAP_MEDIALIB_PHOTO](../Images/79ff55ab4ba7b1b8ecde1d2684f709a2.png)

UnauthorizedAccessException 有 99% 的情况是缺少能力。

# jquery - Superscrollorama + 响应式设计 = 不能正确流动

> ID：14387295
> 
> 赞同：1
> 
> 时间：2013-01-17T20:10:03.307
> 
> 标签：jquery, css, responsive-design

使用 Superscrollorama 在此特定站点上以箭头为动画：http: [//itsuptous.org/new_site](http://itsuptous.org/new_site)

这也是一个响应式设计。960+、768、480 和 320。使用媒体查询来触发不同的布局。如果我以任何浏览器大小加载网站，箭头会正确动画，当我展开或最小化窗口时，它会移动到不正确的位置。不知道这里发生了什么。有人有想法吗？

我有绝对定位的元素以防止水平滚动条。

jQuery Superscrollorama 代码如下：

```
 jQuery(document).ready(function() {
        //ACTIVATE BUTTON FOR SMOOTH SCROLLING
        jQuery("#scroll_button").scrollTo('#section_two_outer');

        //MOVE ARROWS ON SCROLL
        var controller = jQuery.superscrollorama();
        //INDIVIDUAL ELEMENT TWEEN
        controller.addTween('.apply_now_arrow_left', TweenMax.from(jQuery('.apply_now_arrow_left'), .5, {css:{left:'-2500px'}}));
        controller.addTween('.apply_now_button', TweenMax.from(jQuery('.apply_now_button'), .5, {css:{opacity: 0}}));
        controller.addTween('.apply_now_arrow_right', TweenMax.from(jQuery('.apply_now_arrow_right'), .5, {css:{left:'5000px'}})); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:10:52.043

戴夫，

实际上（在我看来）您的网站并不存在 Superscrollerama 问题，您看到的问题似乎是由于它对您的页面元素所做的内联 CSS 发生了变化。例如，当动画被触发时，它只是随着时间的推移对 CSS 'left' 属性进行动画处理，但是一旦完成，left 属性就会保留在元素上，这会随着窗口大小的调整而破坏你的布局。

为了解决这个问题，我建议在动画完成后简单地使用 jQuery 回调从箭头中删除内联 CSS，这样您的样式表可以在调整窗口大小时控制它们的位置。如果动画在视口大小变化时发生（我什至不知道如何实现），那么最坏的情况会产生几乎无法察觉的闪烁，所以我认为你会很高兴。

```
// Demo code from http://johnpolacek.github.com/superscrollorama/
controller.addTween('#fade', 
  TweenMax.from($('#fade'),.5,{
    css:{opacity:0}, 
    onComplete: function(){alert('test')}
  })); 
```

所以，你可能想做这样的事情：

```
jQuery(document).ready(function() {
    //ACTIVATE BUTTON FOR SMOOTH SCROLLING
    jQuery("#scroll_button").scrollTo('#section_two_outer');

    //MOVE ARROWS ON SCROLL
    var controller = jQuery.superscrollorama();
    //INDIVIDUAL ELEMENT TWEEN
    controller.addTween('.apply_now_arrow_left', TweenMax.from(jQuery('.apply_now_arrow_left'), .5, {css:{left:'-2500px'}, onComplete:function(){jQuery('.apply_now_arrow_left').css("left","auto")}}));
    controller.addTween('.apply_now_button', TweenMax.from(jQuery('.apply_now_button'), .5, {css:{opacity: 0}}));
    controller.addTween('.apply_now_arrow_right', TweenMax.from(jQuery('.apply_now_arrow_right'), .5, {css:{left:'5000px'}, onComplete:function(){jQuery('.apply_now_arrow_right').css("left","auto")}})); 
```

当然，YMMV 取决于您的样式表的工作方式，因此您可能会做一些不同的事情，但这是基本的整体方法。

# sql - 我需要从 1 个变量 SQL Oracle SAP 创建 3 个变量

> ID：14387298
> 
> 赞同：-1
> 
> 时间：2013-01-17T20:10:13.160
> 
> 标签：sql, oracle, sap, business-objects

我正在努力在我的宇宙中创建三个变量。这些变量是应用程序、操作系统和物理位置。我遇到的问题是所有这三个都是从同一张表中提取的，并且它们都在值内。

所以表`BMC_CORE_BMC_BASERELATIONSHIP`有变量名称。当名称等于时，我试图提取操作系统的所有目标实例 ID `SYSTEMOS`。

我的第一个客人是使用派生表，这三个表中的每一个都是一个单独的表，具有以下编码

“操作系统关系”导出表

```
SELECT
BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID 
FROM 
BMC_CORE_BMC_BASERELATIONSHIP 
Where 
BMC_CORE_BMC_BASERELATIONSHIP.Name = 'SYSTEMOS' 
```

“物理位置关系”导出表

```
SELECT
BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID 
FROM 
BMC_CORE_BMC_BASERELATIONSHIP 
Where 
BMC_CORE_BMC_BASERELATIONSHIP.Name = 'ELEMENTLOCATION' 
```

“应用关系”派生表

```
SELECT
BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID 
FROM 
BMC_CORE_BMC_BASERELATIONSHIP 
Where 
BMC_CORE_BMC_BASERELATIONSHIP.Name = 'APPLICATIONSYSTEMCOMPUTER' 
```

但是，当我尝试使用以下语法拉入变量时，Webi 中只会显示其中一个变量。我发现其他人都被取消了。

```
App Var

Case 
WHEN CI_RELATED_CI.INSTANCEID ="Applications Relationship".DESTINATION_INSTANCEID
Then CI_RELATED_CI.NAME
END

Location Var

CASE
WHEN CI_RELATED_CI.INSTANCEID = "Physical Location Relationship".DESTINATION_INSTANCEID
THEN CI_RELATED_CI.NAME
END

OS Var

Case 
WHEN CI_RELATED_CI.INSTANCEID ="Operating System Relationship".DESTINATION_INSTANCEID
Then CI_RELATED_CI.NAME
END 
```

我试图想办法将所有这些作为单独的变量放入一个派生表中，但到目前为止我一直没有成功。任何想法或建议将不胜感激。我是新来的，所以让我知道是否有什么可以让我的问题变得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:56:37.367

```
am able to get the out put 

create table BMC_CORE_BMC_BASERELATIONSHIP (name1 varchar2(100),id number);

insert into BMC_CORE_BMC_BASERELATIONSHIP (name1,id) values('SYSTEMOS',1);

insert into BMC_CORE_BMC_BASERELATIONSHIP (name1,id) values('ELEMENTLOCATION',2);

insert into BMC_CORE_BMC_BASERELATIONSHIP (name1,id) values('APPLICATIONSYSTEMCOMPUTER',3);

select Case 
WHEN Name1 = 'SYSTEMOS'
Then id
WHEN Name1 = 'ELEMENTLOCATION'
Then id
When Name1 = 'APPLICATIONSYSTEMCOMPUTER'
Then id
Else id
END
from BMC_CORE_BMC_BASERELATIONSHIP ;
o/p #
1
2
3

select Decode(Name1,'SYSTEMOS',id,'ELEMENTLOCATION',id,'APPLICATIONSYSTEMCOMPUTER',id,id) 
from BMC_CORE_BMC_BASERELATIONSHIP;
o/p #
1
2
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:29:05.787

```
you can use case like below or Decode, 

select Case 
WHEN BMC_CORE_BMC_BASERELATIONSHIP.Name = 'SYSTEMOS'
Then BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID
WHEN BMC_CORE_BMC_BASERELATIONSHIP.Name = 'ELEMENTLOCATION'
Then BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID
When BMC_CORE_BMC_BASERELATIONSHIP.Name = 'APPLICATIONSYSTEMCOMPUTER'
Then BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID
Else 'Ur Comments'
END
from BMC_CORE_BMC_BASERELATIONSHIP;

or Decode 

select Decode( BMC_CORE_BMC_BASERELATIONSHIP.Name,'SYSTEMOS',BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID,'ELEMENTLOCATION',BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID,'APPLICATIONSYSTEMCOMPUTER',BMC_CORE_BMC_BASERELATIONSHIP.DESTINATION_INSTANCEID,else) from BMC_CORE_BMC_BASERELATIONSHIP; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:46:00.663

不确定我是否正确理解您，这就是您想要的... 这是 Oracle 示例，其中每列都有自己的名称或标签。您可以将表创建为选择 - 只需在选择之前添加创建表，您的列名将是标签名称：

```
SELECT ename, empno, 
   (CASE deptno WHEN 10 THEN 'Accounting' END) dept10
 , (CASE deptno WHEN 20 THEN 'Research' END)   dept20
 , (CASE deptno WHEN 30 THEN 'Sales' END)      dept30
 , (CASE deptno WHEN 40 THEN 'Operations' END) dept40
FROM scott.emp
ORDER BY ename
/
ENAME   EMPNO   DEPT10      DEPT20     DEPT30     DEPT40
---------------------------------------------------------------------
ADAMS   7876                Research        
ALLEN   7499                           Sales    
BLAKE   7698                           Sales    
CLARK   7782    Accounting          
..... 
```

# c# - 如何在 VS 2010 中创建 DirectShow 项目

> ID：14387299
> 
> 赞同：1
> 
> 时间：2013-01-17T20:10:20.327
> 
> 标签：c#, c++, winapi, directshow, directshow.net

我在 Win7（64 位）中有 Visual Studio 2010，我想开始用 C++ 或 C# 开发 DirectShow 项目。老实说，我不知道如何在 VS 2010 中做到这一点。我需要什么软件和库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:18:19.467

DirectShow 是 C++（本机）API。Windows SDK 包含许多示例，您可以从那里开始。制作示例项目的副本，如有必要，将 GUID 替换为新的，这将是您项目的起点。

MSDN 上的 DirectShow 示例：[DirectShow 示例 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375468%28v=vs.85%29.aspx)。

特别是在 .NET 和 C# 中，初学者开始使用 DirectShow 的唯一方法是使用[DirectShow.NET 库](http://directshownet.sourceforge.net/)。该库提供了一个包装器，该包装器尽可能地模仿底层的原生 API，让您生活在 .NET 世界中，同时利用 DirectShow 的 MSDN 文档。它有自己做得好的样品可供检查和开始。

# jquery - 循环遍历对象数组以启用复选框

> ID：14387302
> 
> 赞同：1
> 
> 时间：2013-01-17T20:10:26.380
> 
> 标签：jquery, spring

我一直在寻找，但我找不到我真正需要的东西。

我的问题与此类似：[oop through an Array to enable checkboxes](https://stackoverflow.com/questions/11459360/loop-through-an-array-to-enable-checkboxes)

但我没有一个简单的 var 数组。假设我有一个带有机场列表的对象 Travel。我想编辑我的旅行。在我的 jsp 中，我有完整的机场列表：（我使用的是 Spring）

```
<c:forEach var="airport" items="${airports}">
   <tr>
      <td><input type="checkbox" name="airportsIds" value="${airport.id}" /></td>
      <td><c:out value="${airport.name}" /></td>
   </tr>
</c:forEach> 
```

现在我想使用 jQuery 循环遍历我的 Travel 对象的 Airports 列表并检查它已经拥有的那些。

${airports} 是机场的完整列表。

Travel 的机场列表为 ${travel.airports}

```
public class Travel {
    private List<Airport> airports;
    ...
}

public class Airport {
    private String Id;
    private String Name;
    private String Country;
    ...
} 
```

（类的简化版本）

我的控制器中有一个方法如下：

```
mav.getModelMap().put("travel", travel); //commandObject
List<Airports> airports = getAllAirportsFromDB();
mav.getModelMap().put("airports", airports); 
```

希望我足够清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:24:40.970

受到 ShaneA 帖子的启发，我最终在控制器上创建了一个 id 列表（travel.airports ids）并将其传递给 jsp。

```
List<Long> aiportIds = new ArrayList<Long>();
for (Airport a : travel.getAirports()) {
    aiportIds.add(a.getId());
}
mav.getModelMap().put("aiportIds", allowed); 
```

从那里我做了：

```
var airportsIds = ${airportsIds};
$.each(airportsIds, function() {
    $("#" + this).attr("checked", "checked");
}) 
```

本来希望直接在循环上使用 ${travel.airports} 但 jQuery 不喜欢 Airport 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:19:09.713

您应该能够使用选择器访问所有复选框，`input[name=airportIds]`因为它们都具有`airportIds`

```
$("input[name=airportIds]").attr("checked", "checked"); 
```

**编辑**

* * *

如果你想遍历`Travel`对象中的那些，你将不得不在页面上写一些额外的数据，或者一些内联的 JS。`data-is-in-travel`如果指定的机场是其中的一部分，则 可能在每个标签中设置一个 attr`${travel.airports}`

我是 C# 人（所以如果有语法错误，请见谅）：

```
<td><input type="checkbox" name="airportsIds" value="${airport.id}" 
     data-is-in-travel="${travel.airports.contains(airport)}"/></td> 
```

然后在 jQuery 中

```
$("input[data-is-in-travel=true]") 
```

# jquery - jQuery移动元素的效果

> ID：14387312
> 
> 赞同：-1
> 
> 时间：2013-01-17T20:10:58.050
> 
> 标签：jquery, jquery-ui

我尝试创建一个简单的 HTML 任务板、一些列和一些任务，以及将任务从一列移动到另一列的服务器端事件。使用 jQuery，删除和添加元素很容易，但我想要一个效果（动画）来显示任务正在从 A 列移动到 B 列。

HTML 很简单，只是一个视图 div 的：

```
<div id="colA" class="column">
    <div id="task1" class="task">Task 1</div>
</div>
<div id="colB" class="column">
     <!-- move task1 here -->
</div> 
```

以及由服务器端事件调用的 JavaScript 函数：

```
function moveTask(taskId, fromId, toId) {
    // move #task1 from #colA to #colB with a nice animation
} 
```

使用 jquery-1.8.3 和 jquery-1.9.2 但我不限于此，也可以使用其他库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:03:49.763

你可以做这样简单的事情：

[http://jsfiddle.net/Nd6dc/](http://jsfiddle.net/Nd6dc/)

```
var $bCol = $('#colB'),
    bLeft = $bCol.position().left;

var time = 0;

$('.task').each(function () {
  var _this = $(this);

  setTimeout(function () {
    _this.animate({ left: bLeft });
  }, (time));

  time = time + 200;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:20:39.097

这是我的完整功能。不完美，但适合我的需要。感谢 mcpDESIGNS 对 jquery.animate() 的提示。

```
function moveTask(task, toColumn) {
    var task = $(task);
    var col = $(toColumn);
    var taskPos = task.offset();
    var margin = task.css("marginTop");
    var colPos = col.offset();
    var offset = taskPos.left - colPos.left;
    var mleft;
    if (offset < 0) {
        mleft = "+=" + (offset*-1) + "px";
    } else {
        mleft = "-=" + (offset -col.width() + task.width()) + "px";
    }
    task.css({position:"absolute", top:(taskPos.top - margin), left:taskPos.left})
        .animate({left:mleft,top:"+=20px"}, 500, function() {
            // animation complete
            task.css({position:'',top:'',left:''}).appendTo(col);
        });
} 
```

它计算任务元素和新列之间的偏移量，如果该列留给任务元素，则该偏移量为负。任务元素没有绝对位置，但要使用动画，我们必须设置位置：绝对。动画完成后，回调函数将删除绝对位置并将该任务元素附加到新列（appendTo 将节点从其旧父节点中删除）

# java - 使用二进制搜索返回的缺失元素位置时的代码更简洁

> ID：14387314
> 
> 赞同：2
> 
> 时间：2013-01-17T20:11:05.930
> 
> 标签：java, arrays, algorithm, data-structures, binary-search

我试图弄清楚如何以干净的方式编码二进制搜索返回缺失元素的插入点这一事实。

我用它来解决寻找非重叠间隔的最大子集的算法问题。

我所做的是在对间隔进行排序后保持每个间隔的开始时间不与已经选择的间隔结束时间重叠。

虽然我可以进行线性搜索，但我认为在这里使用二进制搜索会更好。我对吗？

所以我做了以下事情，虽然它看起来是正确的，但它很容易出错，我认为可以更好地使用 API。

我正在做的是在结束间隔上进行二进制搜索，然后查看它是否与前一个或下一个重叠（使用二进制搜索返回的插入点）。

我的逻辑正确吗？另外我相信这个算法可以是一个很好的练习，所以我正在寻找一个干净的 java 版本。

```
private boolean nonOverlapping(Pair interval, SortedSet<Pair> selectedIntervals) {  
    if(selectedIntervals.isEmpty())  
        return true;  
    if(selectedIntervals.contains(interval)){  
        return true;  
    }       
    Pair[] sortedSelections = selectedIntervals.toArray(new Pair[0]);  
    int pos = Arrays.binarySearch(sortedSelections, interval, new Comparator<Pair>() {  

        @Override  
        public int compare(Pair o1, Pair o2) {  
            return o1.getStart() - o2.getEnd();   
        }  
    });  
    pos = (-pos) -1;  
    if(pos == sortedSelections.length){  
        if(sortedSelections[pos - 1].getEnd() < interval.getStart()){  
            return true;  
        }  

    }           
    else if(sortedSelections[pos].getEnd() > interval.getStart()){  
        if(pos + 1 < sortedSelections.length){  
            if(sortedSelections[pos + 1].getEnd() < interval.getStart()){  
                return false;   
            }   
        }  
        if(pos - 1 >= 0){  
            if(sortedSelections[pos - 1].getEnd() < interval.getStart()){  
                return false;  
            }  
        }  
        return true;  
    }  

    return false;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:37:04.503

寻找区间范围内最大的非重叠子集的问题是[贪心算法](http://en.wikipedia.org/wiki/Greedy_algorithm)的经典应用。标准贪心算法如下：

1.  按结束时间对所有间隔进行排序。
2.  按顺序处理所有间隔：
    1.  添加在尽可能早的时间结束的间隔。
    2.  删除与该间隔冲突的所有间隔。
3.  生成的间隔集是非重叠间隔的最大子集。

It should be clear from this algorithm that the resulting set does not contain any overlapping intervals, since each step of the algorithm removes all conflicting intervals from future consideration.

To see that this is optimal, you can use an *exchange argument* to show that there cannot be a better solution. You can find details online, such as [in this set of lecture slides](http://lonati.di.unimi.it/algo/0910/lab/kowalski6.pdf).

Hope this helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:36:08.543

The "normal" comparison for overlapping cannot be utilized?

```
 @Override  
    public int compare(Pair o1, Pair o2) {  
        return o1.getStart() > o2.getEnd() ? 1
            : o1.getEnd() < o2.getStart() ? -1
            : 0;   
    } 
```

* * *

***Explanation***

This covers

```
[o2s .. o2e]  [o1s .. o1e]     o1s > o2e  when after  ->  +1
[o1s .. o1e]  [o2s .. o2e]     o1e < o2s  when before ->  -1
otherwise overlap  ->  0 
```

One needs all 4 variables: o1s, o1e, o2s, o2e.

# actionscript-3 - 我在哪里可以找到一篇关于 AS3 跨类通信的好文章？

> ID：14387326
> 
> 赞同：0
> 
> 时间：2013-01-17T20:12:04.113
> 
> 标签：actionscript-3, oop

我正在寻找一个很好的教程，它概述了您如何在外部类之间进行通信以及如何正确地确定类的范围等，但我正在努力寻找一篇文章。有人对我可以用来更好地熟悉这些概念的教程有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:03:31.130

听起来您正在寻找有关一般面向对象编程的教程。 [http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-basix/](http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-basix/)

不过作为一个概述 - 要与大多数面向对象语言中的不同类进行通信，您可以：

从那个类继承。（在 AS3 中使用“扩展”关键字）

```
class Square {
    var x, y, width, height;
}

class Rectangle extends Square{
    function changeDimensions( newWidth, newHeight ):void {
        super.width = newWidth;
        super.height = newHeight;
    }
} 
```

将该类的实例作为类的属性（参见[http://en.wikipedia.org/wiki/Has-a](http://en.wikipedia.org/wiki/Has-a)）。

```
class Tire {
    var radius, tred;
}

class Car {
    var width, depth;
    var make;
    var leftBackTire:Tire;
    var rightBackTire:Tire;
    var leftFrontTire:Tire;
    var rightFrontTire:Tire;
} 
```

将外部类的实例作为函数参数传递给您的类的函数。

```
class Person {
    var position;
}

class Treadmill {
    function movePerson( personToMove:Person ):void {
        personToMove.x += 5;
    }
} 
```

创建外部类的全局实例（在**任何**类的范围之外）并在任何地方访问它。

```
class World {
    var inhabitance;
}

var earth:World = new World();

class InhabitanceCalculator {
    function calcuateEarthInhabitance():void {
        earth.inhabitance = 3000000000;
    }
} 
```

（特别是 AS3）使用预定义的事件系统，您的类在其中注册要为特定事件调用的函数，外部类将其传输给任何收听的人。

```
class Scoreboard extends EventDispatcher {
     var points = 0;
     Scoreboard(player:Player) {
         player.addEventListener("PlayerKilledEnemy", onPlayerKilledEnemy);
     }
     function onPlayerKilledEnemy():void {
         points += 1;
     }
}

class Player extends EventDispatcher {
    function killEnemy():void {
        //Aaaah!
        dispatchEvent( new Event("PlayerKilledEnemy") );
    }
} 
```

请注意，我没有将“public”关键字添加到变量/类/函数中。您需要将其添加到您希望在课程之外访问的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:26:30.010

我还会花一些时间查看自定义事件。如果使用得当，它们可以在 AS3 中的类之间提供极其通用的管道。

# java - 模棱两可的java错误

> ID：14387329
> 
> 赞同：-1
> 
> 时间：2013-01-17T20:12:08.157
> 
> 标签：java, debugging

```
public static int intersectionSizeMergeAndSort(studentList L1, studentList L2) {

  int intersectionSize = 0;
  int[] C = new int[L1.studentID.length+L2.studentID.length];
  for(int i = 0; i<L1.studentID.length; i++){
  C[i] = L1.studentID[i];
  }
  for(int i = 0; i<L2.studentID.length; i++){
  C[i+L1.studentID.length] = L2.studentID[i];
  }
  Arrays.sort(C);
  int pointer = 0;
  while(pointer<((L1.studentID.length)+(L2.studentId.length))){
    if(C[pointer] = C[pointer+1]){
    intersectionSize = intersectionSize + 1;
    pointer = pointer + 2;
    }
    else {
      pointer == pointer + 1;
  }
return intersectionSize;
  }
} 
```

我有这个算法，我正在为一个作业写。每次编译代码时，都会收到一个我无法理解的错误，无法进行调试。错误如下：

```
Error: /Users/nah/Desktop/studentList.java:137: operator < cannot be applied to int,<nulltype> 
```

错误指向while循环语句

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:24:33.020

不确定这是否与同一错误直接相关，但您的行

```
 while(pointer<((L1.studentID.length)+(L2.studentId.length))){ 
```

第二个“studentId”拼写错误，应该是“studentID”

```
 while(pointer<((L1.studentID.length)+(L2.studentID.length))){ 
```

当然，除非您碰巧为您的 studentID 类定义了两个数组，每个数组都有不同的大小写。

我也同意与“==”比较运算符相关的其他答案，但您告诉我们错误与`while`语句有关

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:15:16.323

我能看到的唯一错误是：

```
if(C[pointer] = C[pointer+1]){ 
```

这应该是：

```
if(C[pointer] == C[pointer+1]){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:16:44.443

以下内容在 Java 中不起作用：

```
if (C[pointer] = C[pointer+1]) 
```

这是赋值，它的类型是int，不能在if语句中使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:28:48.260

虽然循环？好的。调试是通过简化表达式来完成的。

我们唯一看到的 < 是循环条件。代替

```
 int pointer = 0;
  while(pointer<((L1.studentID.length)+(L2.studentId.length))){ 
```

做

```
 int pointer = 0;
  int len = ((L1.studentID.length)+(L2.studentId.length));
  while(pointer< len){ 
```

如果再次出错，请简化引发错误的表达式。

我认为这个问题是错误的。它是*** * 模棱两可的，只是因为您没有尝试对其进行本地化。仅当“<”不适用于两个整数时才发布问题。当前的问题标题必须是：“你如何调试 Java 程序？”

# android - Android - 更改启动器图标语言

> ID：14387330
> 
> 赞同：0
> 
> 时间：2013-01-17T20:12:24.293
> 
> 标签：android, icons, launcher

我想为我的应用程序添加一个独立于系统语言的语言设置。

我可以设法更改任何语言，但启动器图标仍为系统语言。

无论如何都可以更改该图标语言吗？

梅丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:08:21.897

假设您正在支持`N`具有这种可疑功能的语言。

您将需要`N`清单中的条目以用于启动器活动。这 N 个条目中的每一个都需要`android:label`指向一个字符串，该字符串表示当您的应用程序配置为 -such-and-so 语言时您希望显示的内容。然后，您将使用`PackageManager`和`setComponentEnabledSetting()`禁用旧活动并启用新活动。

可以想象，您可以使用一个`<activity>`元素或多个`N` `<activity-alias>`元素来实现您的目标，但我不确定您是否可以启用和禁用活动别名。

# objective-c - SplitView 中 CustomView 中的 cocoa NSTableView 大小不调整

> ID：14387332
> 
> 赞同：1
> 
> 时间：2013-01-17T20:12:58.400
> 
> 标签：objective-c, cocoa, nstableview, nsview, nssplitview

我有一个 NSSplitView 作为我的“Superview”。在这个 SplitView 中是一个带有 NSTableView 的自定义视图。我正在尝试从 Controller 类加载我的自定义视图，然后调整自定义视图和表格的大小。但是表格和/或自定义视图不会调整大小。我做错了什么？

这是我的控制器类方法，我在其中加载并设置自定义视图的大小：
// Header File @property (weak) IBOutlet NSView *navigationView; @property (strong) AppsNavigationViewController *navigationViewController;

```
// Implementation
- (void) initNavigationView :(id)viewControllerClass :(NSString*) viewNibName {

  _navigationViewController = [[viewControllerClass alloc] 
                               initWithNibName:viewNibName bundle:nil]; 

 // add the current custom view to the parent view
 [_navigationView addSubview:[_navigationViewController view]];

 [[_navigationViewController view] setAutoresizingMask:
                                    NSViewHeightSizable|NSViewWidthSizable];

 // set the bounds of the custom view to the size of the parent view
 [[_navigationViewController view] setBounds:[_navigationView bounds]]; 

 [_navigationViewController setDelegate:self]; // not relevant

 [_splitView adjustSubviews]; // checked. contains the _navigationView 
```

}

这是它的外观：

![具有自定义视图和 nstable 的 nssplitview](../Images/a8b5895dd25fc924ee4cf36b516ab28d.png)

**编辑** 我对一些视图进行了子类化并绘制了不同的背景。而且绝对是自定义视图没有得到大小！

![在此处输入图像描述](../Images/1407ab61c62c8fabc37b74f634db9a5e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:11:43.073

看来您的表格框架可能不在其超级视图的原点。首先，尝试设置框架而不是边界，你可以在这样做之后调用它。

```
[[_navigationViewController view] setFrameOrigin:NSMakePoint(0,0)]; 
```

通常，尽管我通常像这样设置框架/边界，因为您的超级视图的边界可能不在其超级视图的 {0,0}...

```
NSRect newFrame;
newFrame.origin.x = 0;
newFrame.origin.y = 0;
newFrame.size.width = [[someView superview] frame].size.width;
newFrame.size.height = [[someView superview] frame].size.height;
[someView setFrame:newFrame]; 
```

# c++ - 如何正确链接 boost::mpl::inherit_linearly 和 boost::mpl::inherit 以便可以解析占位符？

> ID：14387334
> 
> 赞同：6
> 
> 时间：2013-01-17T20:13:00.183
> 
> 标签：c++, templates, boost, template-meta-programming, boost-mpl

假设我有这些类型：

```
template
<
    class T,
    template <class> class Storage
>
struct AbstractFactoryUnit
{
    virtual ~AbstractFactoryUnit() {}
    virtual typename Storage< T >::StoredType doCreate(Storage< T >) = 0;
}; 
```

和

```
template
<
    class TypeSequence,
    template <class> class ProductStorage,
    template <class, template <class> class> class Unit = AbstractFactoryUnit
>
struct AbstractFactory
    : boost::mpl::inherit_linearly
        <
            TypeSequence,
            boost::mpl::inherit
            <
                boost::mpl::_1,
                Unit< boost::mpl::_2, ProductStorage >
            >
        >::type
{
    typedef TypeSequence Products;

    template <class T>
    auto create() -> typename ProductStorage< T >::StoredType
    {
        Unit< T, ProductStorage >& unit = *this;
        unit.doCreate(ProductStorage< T >());
    }
}; 
```

现在我想实现 le `AbstractFactory`...

一些大声笑类型：

```
struct Foo {};
struct Bar {};
struct Baz {}; 
```

大声笑*存储*：

```
template <class T>
struct RawPointerStorage
{
    typedef T* StoredType;
}; 
```

最后是实现：

```
struct FooBarBaz
    : AbstractFactory< boost::mpl::set< Foo, Bar, Baz >, RawPointerStorage >
{
    A* doCreate(RawPointerStorage< Foo >) override
    {
         return new A;
    }

    B* doCreate(RawPointerStorage< Bar >) override
    {
         return new B;
    }

    C* doCreate(RawPointerStorage< Baz >) override
    {
         return new C;
    }
}; 
```

不幸的是，编译器抱怨：

```
1>C:\Libs\boost\boost_1_51_0\boost/mpl/aux_/preprocessed/plain/inherit.hpp(20): error C2500: 'boost::mpl::inherit2<T1,T2>' : 'AbstractFactoryUnit<T,ProductStorage>' is already a direct base class
1>          with
1>          [
1>              T1=AbstractFactoryUnit<boost::mpl::_2,RawPointerStorage>,
1>              T2=AbstractFactoryUnit<boost::mpl::_2,RawPointerStorage>
1>          ]
1>          and
1>          [
1>              T=boost::mpl::_2,
1>              ProductStorage=RawPointerStorage
1>          ] 
```

我有点困惑，因为它只`AbstractFactoryUnit`接受一个模板参数时编译得很好。我的猜测是编译器无法“解析”第二个占位符，但我应该承认我不知道为什么——因为我不太清楚 boost 如何调用`apply`占位符。

我将 VS2012 与 vc100 或 vc110 一起使用。

任何的想法？（是的，我在玩`AbstractFactory`现代 C++ 设计中的描述）

**EDIT**: I finally decided to provide my whole `AbstractFactory` code without disguises in both my question and my answer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:40:49.283

I don't know exactly why --in this context-- the second placeholder cannot be "expanded" but I found out that wrapping the expression `boost::mpl::inherit` solved my problem.

So here you are, this `AbstractFactory` in a nutshell:

We encapsulate the implementation in a namespace `Impl`:

```
namespace Impl
{

    template
    <
        class TypeSequence,
        template <class> class ProductStorage,
        template <class, template <class> class> class Unit
    >
    struct AbstractFactory
    {
    private:
        template <class T, class U>
        struct Inherit : boost::mpl::inherit< T, Unit< U, ProductStorage > >
        {};

    public:
        typedef typename boost::mpl::inherit_linearly
                            <
                                TypeSequence,
                                // the trick is on the following line
                                Inherit< boost::mpl::_1, boost::mpl::_2 >
                            >
                            ::type Type;
    };

} // namespace Impl 
```

and we derive from it like so:

```
template
<
    class TypeSequence,
    template <class> class ProductStorage = RawPointerStorage,
    template <class, template <class> class> class Unit = AbstractFactoryUnit
>
struct AbstractFactory
    : Impl::AbstractFactory< TypeSequence, ProductStorage, Unit >::Type
{
    typedef TypeSequence Products;

    template <class T>
    auto create() -> typename ProductStorage< T >::StoredType
    {
        Unit< T, ProductStorage >& unit = *this;
        return unit.doCreate(ProductStorage< T >());
    }
}; 
```

# database - 区分名字和姓氏相同的用户

> ID：14387336
> 
> 赞同：0
> 
> 时间：2013-01-17T20:13:10.157
> 
> 标签：database

如果每个名字/姓氏对都映射到一个唯一的用户 ID，当用户具有相同的名字和姓氏时，我如何才能获得正确的用户 ID。

例如：

```
User ID     First Name      Last Name
123         Bob             Moore
321         Bob             Moore 
```

当`Bob Moore`尝试登录时，我的系统如何确定`Bob Moore`它是哪个？

谢谢。

附言。我知道这可能是一个常见的问题，但我找不到简短且内容丰富的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:14:27.080

在您的代码中，您需要始终使用用户 ID 字段。在其他数据库结构/表中，如果要加入，则必须使用用户 ID。

切勿尝试根据名字/姓氏进行查找。

编辑：为了登录，您需要独特的东西来区分用户。这通常是一个登录名，现在大多数网站都使用电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:15:33.233

你不能。您将需要使用唯一的密钥来识别不同的 Bob Moores。如果您的数据模式中没有任何东西可以做到这一点，请使用人工键，例如 AUTO_INCREMENTing 主键。

# android - Android：如何使用 shell 命令或意图运行谷歌音乐的“Shuffle all”？

> ID：14387337
> 
> 赞同：3
> 
> 时间：2013-01-17T20:13:11.027
> 
> 标签：android, shell, android-intent, audio-player, android-music-player

如果可能的话，我想以任何方式按下播放器菜单中的“全部随机播放”按钮。

我知道如何模拟按键，因此可以通过简单的 shell 命令使用 DPAD 模拟（如果您的设备已植根）来做到这一点`input keyevent`，但这种方式非常缓慢且不可靠。

我还发现了如何通过意图在 PLAYBACK 视图中运行谷歌音乐播放器并开始播放，但这不是我真正想要的。如果有人感兴趣，请运行以下 shell 命令：

```
am start -a com.google.android.music.PLAYBACK_VIEWER -c android.intent.category.DEFAULT 
```

我自己在谷歌的音乐播放器中找不到洗牌的意图。也许还有其他方法可以模仿这个动作，或者我错过了一些意图？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-10-15T03:02:33.180

就在这儿

手气不错 (32) A1：发送意图 [操作：android.media.action.MEDIA_PLAY_FROM_SEARCH 猫：默认 Mime 类型：数据：额外：字符串，描述：要查找的内容，键：查询，id：SEARCH_AND_PLAY 额外：额外：包：类：目标：活动]

# linux - 是否可以增加 ksh 变量接受的最大字符数？

> ID：14387344
> 
> 赞同：4
> 
> 时间：2013-01-17T20:13:37.840
> 
> 标签：linux, bash, unix, ksh

这是一个后续问题

[ksh 变量接受的最大字符数是多少？](https://stackoverflow.com/questions/14371326/what-is-the-maximum-number-of-characters-that-the-ksh-variable-accepts)

我检查了我的环境，它只允许

```
#include <sys/limits.h>
$ cpp <<  HERE | tail -1
> #include <limits.h>
> ARG_MAX
> HERE
1048576 
```

有没有办法增加这个？或任何替代品

```
 while read line;
   do
      #parse logic
   done < $filename 
```

处理很长的线路？根据我正在解析的记录，它不会停留在 2M 字符行。

环境细节：

```
 AIX $ KSH Version M-11/16/88f 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:22:36.710

您可以编译 Linux 3.7.x 内核，并编辑其`include/uapi/linux/limits.h`文件以增加`ARG_MAX` 参数（到更大的 2 次方，例如 2097152）。但是，如果您想增加更多内存，您应该拥有大量 RAM（例如 8GBytes）。

实际限制与[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)相关。该手册页上有一段。

但是您可能可以避免使用巨大的 shell 变量（在 Unix 环境中）。您是否考虑使用其他工具（`awk`, `python`, `perl`....）来读取您的文件？它们的变量环境不是传递给 fork 程序的 shell 环境，因此它们可以有非常长的值的变量。也许`ksh`有一些内置的 ( `unexport`) 以避免将某些变量导出到 Unix 环境中。

# facebook - 结合 FaceBook 客户端和服务器端身份验证

> ID：14387345
> 
> 赞同：0
> 
> 时间：2013-01-17T20:13:39.367
> 
> 标签：facebook, facebook-ios-sdk, facebook-authentication, facebook-java-api

我有以下用例

1.  我在 iOS 上的应用程序正在使用 FaceBook iOS SDK 向 FB 进行身份验证
2.  然后应用程序通过 https 向我的服务器进行 REST 调用，以将 FB 帐户注册到他们的服务帐户（我提供的服务）

在第 2 步中，客户端正在发送 FaceBook UID。

我的问题是服务器没有 FB 集成，因此必须回复客户端发送正确的 FaceBook UID。

所以问题很明显，黑客可以将其他人的 Facebook 帐户附加到他们的服务帐户。

我希望服务器（Java）能够验证发送请求的用户是否拥有相关的 Facebook UID。

我一直在网上搜索，找不到任何我认为可行的东西。

我遇到了一个关于使用 FB`signedRequest`字段的模糊帖子，这可以传递给服务器以验证用户。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:44:28.373

这是一个想法：

在您的 iOS 应用程序中对用户进行身份验证后，获取`access_token`并仅在您的 REST 调用中将其传递给您的服务器。

在服务器端，请求`https://graph.facebook.com/me?access_token=...`使用`access_token`您传输的。如果访问令牌有效，您将获得所有用户数据，证明您拥有一个有效的、经过身份验证的用户。

如果您想更加确定，您还可以请求`http://graph.facebook.com/app?access_token=...`确保访问令牌是由您的应用程序创建的。

# google-chrome - Processing.js BACKSPACE 在 Chrome 上不起作用

> ID：14387348
> 
> 赞同：1
> 
> 时间：2013-01-17T20:13:56.577
> 
> 标签：google-chrome, processing.js, backspace

不知何故，这个 processing.js 代码在 Chrome 中不起作用，但在 Safari 和 Firefox 中起作用：

```
void keyPressed() {
 if(key == BACKSPACE) {
   println("BACKSPACE was pressed"); 
 } 
} 
```

有什么建议么？

Chrome 版本：24.0.1312.52 | Safari 版本 6.0.2 | 火狐版本 17

Mac OS 10.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:34:59.673

在大多数浏览器中，“退格”是“上一页”的热键。文档不会将密钥发送到您关注的元素，而是劫持密钥并在看到它被按下时尝试切换页面上下文。

如果你想让你的草图接受退格，你首先必须确保它被困住使用类似[http://pomax.nihongoresources.com/pages/KeyTrap](http://pomax.nihongoresources.com/pages/KeyTrap)

# c# - 将绘图图像转换为位图图像

> ID：14387350
> 
> 赞同：4
> 
> 时间：2013-01-17T20:14:10.840
> 
> 标签：c#, wpf, bitmapimage

我想绘制大量形状（线条、椭圆和...），然后将它们保存为位图或 png。我制作了图纸，问题是：如何在 C#**中将 DrawingImage**转换为**BitmapImage ？**代码是这样的：

```
DrawingGroup drawingGroup = new DrawingGroup();
using(DrawingContext context = drawingGroup.Open())
{
    //make some drawing 
}
DrawingImage drawingImage = new DrawingImage(drawingGroup)

// your suggestion? DrawingImage - > BitmapImage 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T20:37:55.103

您可以将 ImageDrawing 放入 Image 控件并将其渲染到[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)中，这是一个 BitmapSource，因此可以由[BitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapencoder.aspx)序列化（在此示例中为 PngBitmapEncoder）。

```
public void SaveDrawingToFile(Drawing drawing, string fileName, double scale)
{
    var drawingImage = new Image { Source = new DrawingImage(drawing) };
    var width = drawing.Bounds.Width * scale;
    var height = drawing.Bounds.Height * scale;
    drawingImage.Arrange(new Rect(0, 0, width, height));

    var bitmap = new RenderTargetBitmap((int)width, (int)height, 96, 96, PixelFormats.Pbgra32);
    bitmap.Render(drawingImage);

    var encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bitmap));

    using (var stream = new FileStream(fileName, FileMode.Create))
    {
        encoder.Save(stream);
    }
} 
```

请注意，您实际上不需要 BitmapImage 进行编码，因为 BitmapSource（或任何派生类，如 RenderTargetBitmap）将被接受为[BitmapFrame.Create](http://msdn.microsoft.com/en-us/library/ms615993.aspx)的参数。

* * *

稍微不同的解决方案将涉及[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)而不是 DrawingImage：

```
public void SaveDrawingToFile(Drawing drawing, string fileName, double scale)
{
    var drawingVisual = new DrawingVisual();

    using (var drawingContext = drawingVisual.RenderOpen())
    {
        drawingContext.PushTransform(new ScaleTransform(scale, scale));
        drawingContext.PushTransform(new TranslateTransform(-drawing.Bounds.X, -drawing.Bounds.Y));
        drawingContext.DrawDrawing(drawing);
    }

    var width = drawing.Bounds.Width * scale;
    var height = drawing.Bounds.Height * scale;
    var bitmap = new RenderTargetBitmap((int)width, (int)height, 96, 96, PixelFormats.Pbgra32);
    bitmap.Render(drawingVisual);

    var encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bitmap));

    using (var stream = new FileStream(fileName, FileMode.Create))
    {
        encoder.Save(stream);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-30T13:35:29.080

我发现这样很容易：

```
public static BitmapSource ToBitmapSource(DrawingImage source)
{
    DrawingVisual drawingVisual = new DrawingVisual();
    DrawingContext drawingContext = drawingVisual.RenderOpen();
    drawingContext.DrawImage(source, new Rect(new Point(0, 0), new Size(source.Width, source.Height)));
    drawingContext.Close();

    RenderTargetBitmap bmp = new RenderTargetBitmap((int)source.Width, (int)source.Height, 96, 96, PixelFormats.Pbgra32);
    bmp.Render(drawingVisual);
    return bmp;
} 
```

您可以使用它来获取 System.Drawing.Bitmap

```
using (MemoryStream ms = new MemoryStream())
{
    PngBitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(ToBitmapSource(drawingImage)));
    encoder.Save(ms);

    using (System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(ms))
    {
        bmpOut = new System.Drawing.Bitmap(bmp);
    }
} 
```

# typescript - 打字稿中的前向声明

> ID：14387351
> 
> 赞同：16
> 
> 时间：2013-01-17T20:14:11.710
> 
> 标签：typescript, forward-declaration

我有两个班级需要了解彼此的成员。

在 C++ 中，我会使用前向声明。

我必须在打字稿中做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T01:08:30.940

对于接口，您确实需要前向声明

```
declare class F {} 

interface A {
    f:F ;
}

class F implement A {
    f:F ;
    init() { f=this; }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T21:22:30.900

我不确定，但我认为您正在尝试解决一个不存在的问题。这在打字稿中完全有效：

```
class A{
    b=new B();
    func(){
        alert(this.b.member);
    }
}
class B{
    member="hello there";
}
var a=new A();
a.func(); 
```

如您所见，您可以在定义类 B 之前使用它，并从类 A 中访问其成员。这同样适用于函数：

```
var a=()=>{
    alert("function a");
    b();
}

var b=()=>{
    alert("function b");
}

a(); 
```

这应该编译得很好。请注意，只有在实际定义了 b 之后才能调用 a。这不起作用：

```
var a=()=>{
    alert("function a");
    b();
}
a();

var b=()=>{
    alert("function b");
} 
```

你不需要 Typescript 中的前向声明。想象一下，它们是为您的代码自动生成的。

当您需要混合使用 Javascript 和 Typescript 时，问题变得更加复杂。由于您的所有 Typescript 代码都由编译器进行静态类型检查，因此连接 Javascript 框架并不是那么简单。

添加到作用域的所有变量、函数和“类”都需要先声明，然后才能使用它们。假设您的 Typescript 项目需要 jQuery。所有的 jQuery 魔法都是通过全局变量“$”完成的，但即使您已将 jQuery 脚本添加到您的 html 站点，您也不能只在 Typescript 代码中引用“$”。这是使用声明文件的地方。通过添加行

```
/// <reference path="jquery.d.ts"/> 
```

在 Typescript 文件的顶部，您可以告知编译器所有可用的 jQuery 代码。可以在此处找到最常用的 Javascript 框架的 .d.ts 文件： [https ://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)

最后两行是 .d.ts 文件语法的一个很好的例子：

```
declare var jQuery: JQueryStatic;
declare var $: JQueryStatic; 
```

现在编译器知道您可以使用两个名为“$”和“jQuery”的全局变量。此外，如果您使用 VisualStudio，这些声明文件将提供出色的智能感知支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T20:42:27.853

如果我正确理解你，请尝试

```
declare var a: [class_name] 
```

例子：

```
 module A {
        class B {
            foo() { }
        }
        declare var b: B;
        class C {
            t() {
                b.foo()
            }
        }
    } 
```

# android - 大帧逐帧动画 Android

> ID：14387363
> 
> 赞同：0
> 
> 时间：2013-01-17T20:14:45.683
> 
> 标签：android, image, animation, bitmap, out-of-memory

我是在 android 上创建动画的新手。

我正在尝试使用大量 .png 逐帧创建大型动画。

我有两个动画需要播放，一个是 100 帧大，另一个是 40 帧。

我目前正在使用 AnimationDrawable 来创建动画，但是在任何内存小于 1GB 的设备上我都得到“位图大小超过 VM 预算”（任何超过它的设备都可以正常运行）。

100 帧长的动画由 78*334 大小的图像创建，40 帧动画由 320*290 和 320*309 的不同图像大小创建。

我还需要能够在随机时间反转动画（目前我只是根据需要创建另一个动画，帧与当前帧相反，并且效果很好）

所以我想我的问题是如何在低端设备上没有内存不足的情况下创建具有大量帧（或动画外观）的多帧动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:11:45.270

我以前遇到过同样的问题，如果使用未压缩格式，在将动画列表声明为（在您的情况下）100frames*78px*334px*4bytes = 10,420,800 字节时减少内存使用量太痛苦了。我使用视频而不是图像序列我可以在 H.264 mp4 编解码器上使用更多的视频帧和分辨率（在我的情况下）5sec*25fps*480px*854px，它的工作原理就像一个魅力:) 在sonxy xperia 上没有延迟没有开销u 256mb 内存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:33:58.190

您可以在 android 中创建多个逐帧动画，但只确保您的图像（PNG）分辨率很小...我在我的项目中使用***320 * 480***分辨率完成了此操作..它的效果很好..但只有一个问题在于，第一次启动动画时有一个加载时间，具体取决于您的图像数量...

# wpf - 在 wpf mvvm 中使用 xml

> ID：14387375
> 
> 赞同：1
> 
> 时间：2013-01-17T20:15:30.410
> 
> 标签：wpf, xml, mvvm

我有一个模型

```
private XmlDataProvider _xmlProvider;
public XmlDataProvider XmlProvider
{
        get { return _xmlProvider; }
        set { _xmlProvider = value; OnPropertyChanged("XmlProvider"); }
} 
```

在模型构造函数中，我读取了一个 xml 文件

```
var doc = new System.Xml.XmlDocument();
doc.Load("books.xml");

 XmlProvider = new XmlDataProvider()
 {
   Document = doc,
   XPath = @"/root"
 }; 
```

xml 文件只有一个根和 1 个元素

```
<proba author="probaauthor"/> 
```

在视图模型中，我参考了模型

```
private Model _model;
public Model Model
{
        get { return _model; }
        set
        {
            _model = value;
            OnPropertyChanged("Model");
        }
} 
```

在视图中：

```
xmlns:localMvvmxml="clr-namespace:MvvmSamples.Mvvm.SimpleXml"

<Grid.Resources>
        <localMvvmxml:ViewModel x:Key="MyXmlProvider"/> 
```

在下面我有一个带有文本框的堆栈面板

```
<StackPanel Orientation="Horizontal" DataContext="{StaticResource MyXmlProvider}" Margin="5">
            <TextBox  Text="{Binding XPath=/root/proba/@author}" Width="113"></TextBox> 
```

当然它不起作用，因为我无法联系到提供商。那么在TextBox Binding中写什么呢？

谢谢。查理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:47:31.870

我猜你的视图可能没有绑定到你的视图模型。我猜您在执行 {Binding XPath=(location)} 时不知道您的视图正在使用 Viewmodel 进行绑定。

这可能有助于记住您的代码的命名空间声明可能会有所不同。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                    xmlns:vm="clr-namespace:MvvmSamples.Mvvm.ViewModels" 
                    xmlns:vw="clr-namespace:MvvmSamples.Mvvm.View">

<DataTemplate DataType="{x:Type vm:SimpleXMLViewModel}">
        <vw:SimpleXML />
    </DataTemplate> 
```

还要记住一个很好的 MVVM 示例：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# php - 使用 tcpdf 创建 PDF 在 iphone 上显示为空白

> ID：14387379
> 
> 赞同：18
> 
> 时间：2013-01-17T20:15:50.843
> 
> 标签：php, tcpdf

我正在使用 tcpdf 从 HTML 生成 PDF。一切正常，当我在计算机上查看 PDF 时，我可以正常查看，但由于某种原因，当我在 iPhone 上查看 PDF 时，它显示为空白。我所能看到的只是我创建的边界，其中包含值，但没有显示值。

这是我的代码

```
require_once('/tcpdf/tcpdf/config/lang/eng.php');
require_once('/tcpdf/tcpdf/tcpdf.php');
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);
$pdf->setLanguageArray($l);
$pdf->SetFont('dejavusans', '', 10);
$pdf->AddPage();
$html = file_get_contents('http://www.website.com/invoice.php?invoice_id='.$invoice_id);
$pdf->writeHTML($html, true, false, true, false, '');
$pdf->lastPage();
$pdf->Output('/html/admin/emailattachements/invoice.pdf', 'F'); 
```

在最后一行。当我稍后使用电子邮件脚本抓取 PDF 并将其发送给客户时，我会将其复制到该目录。

![空白 PDF](../Images/fdf5b30a7fbbd39bf08030921d114fbe.png)

编辑：已解决

我发现这是我用来制作 PDF 的字体。iPhone 无法读取 dejavusans :) 我将其更改为“times”，它工作正常

**编辑：更新**

自从这篇文章以来，我不得不用 tcpdf 创建更多的 PDF，虽然我无法真正解释为什么有些字体不起作用，而另一些字体我最近在[http://www.tcpdf.org/fonts应用了一些建议.php](http://www.tcpdf.org/fonts.php)并应用

```
$fontname = $pdf->addTTFfont('/path-to-font/DejaVuSans.ttf', 'TrueTypeUnicode', '', 32); 
```

通过手动添加字体并设置字体文件路径并手动上传文件，我能够获得不起作用的现有字体并实际让它们工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-21T12:07:41.237

更改以下行：

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

$pdf->SetFont('dejavusans', '', 10); 
```

至：

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, false, 'ISO-8859-1', false);

$pdf->SetFont('helvetica', '', 10, '', true); 
```

然后检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T13:12:20.847

如果没有 AddFont 方法，不确定它如何为您工作，但我遇到了同样的问题并添加第四个参数 $subset = false 修复它。

> $subset (mixed) if true 只嵌入字体的一个子集（只存储与使用的字符相关的信息）；如果 false 嵌入完整字体；如果 'default' 使用使用 setFontSubsetting() 设置的默认值。此选项仅对 TrueTypeUnicode 字体有效。如果要允许用户更改文档，请将此参数设置为 false。如果您对字体进行子集化，则接收您的 PDF 的人需要使用您的相同字体才能对您的 PDF 进行更改。PDF 的文件大小也会更小，因为您只嵌入了字体的一部分。

```
$pdf->AddFont('dejavusans', '', 'dejavusans', false);
$pdf->AddFont('dejavusans', 'B', 'dejavusans', false);

$pdf->SetFont('dejavusans', '', 10); 
```

dejavusans 修复了多字节字符的许多问题，因此无法简单地更改为 helvetica。通过进行此更改，我们发现 PDF 的大小增加了一倍以上。

这与@user3548394 的想法有点相同，但只需进行一次更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T06:09:12.627

检查您正在使用的字体类型，就像 html，但它不会回退。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T07:32:40.587

使用静态文本创建 pdf 并检查。

# java - 为什么在 Java 中使用静态辅助方法不好？

> ID：14387385
> 
> 赞同：22
> 
> 时间：2013-01-17T20:16:22.153
> 
> 标签：java, android, static-methods, mockito, helpermethods

我问是因为我正在尝试使用不允许您模拟静态方法的模拟框架（Mockito）。调查它，我发现很多博客文章说你应该尽可能少地使用静态方法，但我很难理解为什么。特别是为什么不修改全局状态并且基本上是辅助方法的方法。例如，我有一个名为的类`ApiCaller`，它有几个静态方法。静态方法的目的之一是执行 HTTP 调用，处理我们的服务器可能返回的任何自定义问题（例如用户未登录）并返回响应。为了简化，类似：

```
public class ApiCaller {
...
   public static String makeHttpCall(Url url) {
        // Performs logic to retrieve response and deal with custom server errors
        ...
        return response;
   }
} 
```

要使用它，我所要做的就是调用`ApiCaller.makeHttpCall(url)` 现在我可以轻松地将其设为非静态方法，例如：

```
public class ApiCaller {
...
   public String makeHttpCall(Url url) {
        // Performs logic to retrieve response and deal with custom server errors
        ...
        return response;
   }
} 
```

然后使用这个方法调用`new ApiCaller().makeHttpCall()`，但这似乎是额外的开销。谁能解释为什么这很糟糕，以及是否有更好的解决方案使方法成为非静态的（除了删除关键字之外），以便我可以使用模拟框架来存根这些方法？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T20:19:08.870

静态方法的问题在于，当它们与您要测试的系统无关时，它们很难伪造。想象一下这段代码：

```
public void systemUnderTest() {
    Log.connectToDatabaseForAuditing();
    doLogicYouWantToTest();
} 
```

该`connectToDatabaseForAuditing()`方法是静态的。您不在乎此方法对您要编写的测试有什么作用。但是，现在要测试此代码，您需要一个可用的数据库。

如果它不是静态的，代码将如下所示：

```
private Logger log; //instantiate in a setter AKA dependency injection/inversion of control

public void systemUnderTest() {
    log.connectToDatabaseForAuditing();
    doLogicYouWantToTest();
} 
```

现在，如果没有数据库，您的测试将很容易编写：

```
@Before
public void setUp() {
    YourClass yourClass = new YourClass();
    yourClass.setLog(new NoOpLogger());

}

//.. your tests 
```

想象一下当方法是静态的时尝试这样做。`inTestMode`除了修改记录器以使您在中设置为 true的静态变量`setUp()`以确保它不连接到数据库之外，我真的想不出办法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:19:01.560

它的模块化程度较低。`ApiCaller`相反，您应该使用实例方法定义接口，`makeHttpCall()`以便将来可以定义单独的实现。

至少，您将始终拥有接口的 2 个实现，即原始版本和模拟版本。

（注意：有一些模拟框架允许你模拟静态方法）

作为附录，虽然在您的特定应用程序中可能并非如此，但通常使用静态方法表示更大的设计疏忽。模块化和可重用性设计应该在*整个*应用程序中普遍存在，因为即使您*现在*不需要它，将来也可能需要它，而且事后进行更改会更加困难和耗时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-18T17:34:49.523

PRIVATE 静态辅助方法还不错，事实上，在我工作的大公司中，它们实际上是首选。我一直在使用 Mockito，从调用静态辅助方法的方法访问。

编译器处理静态辅助方法的方式略有不同。创建的字节码将产生一个[invokestatic](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokestatic)指令，如果您删除静态，结果将是其他指令之一，如invokespecial。不同之处在于，invokestatic 加载类以访问方法，其中 invokespecial 首先将对象从堆栈中弹出。所以可能会有轻微的性能优势（也许没有）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:26:34.283

当您需要回答自己的问题时，您不能轻易地嘲笑它们。

特别是当它如图所示时：进行 HTTP 调用是昂贵的，并且为*单元*测试您的代码这样做是没有意义的 - 将其保存用于集成测试。

单元测试需要来自 HTTP 调用的已知响应（和响应代码），如果您使用无法控制的网络调用其他*人的服务，则无法做到这一点。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-13T14:49:05.033

这个解释在我看来非常直接，并且易于理解。

将实用方法声明为`static`，通常会使您的代码更易于理解，**这是一件好事。**

但是，这种方法有一个严重的限制：**这样的方法/类不容易被模拟**。

因此，如果辅助方法有任何**外部依赖**项（例如数据库），这使得它 - 因此它的调用者 - 难以进行单元测试，**最好将其声明为 non-static**。

这允许依赖注入，从而使方法的调用者更容易进行单元测试。

来源：[https ://softwareengineering.stackexchange.com/a/111940/204271](https://softwareengineering.stackexchange.com/a/111940/204271)

# c# - NAudio将样本逐个写入文件

> ID：14387393
> 
> 赞同：3
> 
> 时间：2013-01-17T20:16:55.423
> 
> 标签：c#, .net, audio-recording, naudio, voice-recording

我正在构建一个将麦克风中的音频记录到文件（.mp3）的应用程序。我希望我的应用程序仅在检测到足够高的幅度时才将数据写入文件。我在尝试保存所选数据时遇到问题。我得到的只是快速失真，甚至与录制的内容相差甚远。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using NAudio.Wave;

namespace NAudio_Testing
{
    public partial class Form1 : Form
    {
        int counter = 0;
        int passed = 0;
        private BufferedWaveProvider bufferedWaveProvider;
        WaveIn waveIn;
        WaveFileWriter writer;
        string output = "C:/Users/klein/AppData/Roaming/Microsoft/Windows/gravacao.mp3";
        public Form1()
        {
            InitializeComponent();
            waveIn = new WaveIn();
            writer = new WaveFileWriter(output, waveIn.WaveFormat);

            waveIn.DataAvailable += new EventHandler<WaveInEventArgs>(new_dataAvailable);

            bufferedWaveProvider = new BufferedWaveProvider(waveIn.WaveFormat);
            bufferedWaveProvider.DiscardOnBufferOverflow = true;
            waveIn.StartRecording();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Interval = 1000;
            timer1.Start();
        }

        void new_dataAvailable(object sender, WaveInEventArgs e)
        {
            for (int i = 0; i < e.BytesRecorded; i+=2)
            {
                short sample = (short)((e.Buffer[i + 1] << 8) | e.Buffer[i + 0]);
                float sample32 = sample / 32768f;
                if (sample32 > 0.02) //0.02~0.03
                {
                    writer.WriteSample(sample);
                }
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            waveIn.StopRecording();
            waveIn.Dispose();
            waveIn = null;
            writer.Close();
            writer = null;
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            textBox1.Text = counter++.ToString();
        }

    }
} 
```

编辑：如果我删除选择性 if 并添加行，我能够成功录制音频，问题当然是我无法根据音频的幅度录制或不录制：

```
writer.WriteByte(e.Buffer[i + 0]);
writer.WriteByte(e.Buffer[i + 1]); 
```

像这样：

```
void new_dataAvailable(object sender, WaveInEventArgs e)
    {
        for (int i = 0; i < e.BytesRecorded; i+=2)
        {
            short sample = (short)((e.Buffer[i + 1] << 8) | e.Buffer[i + 0]);
            float sample32 = sample / 32768f;

            writer.WriteByte(e.Buffer[i + 0]);
            writer.WriteByte(e.Buffer[i + 1]);

        }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T07:08:08.767

您的方法本质上是丢弃过零附近的所有样本，无论当时的整体音频是否响亮。它会扭曲信号并加速它，因为音频信号通常每秒都有很多过零。

相反，您需要在短时间内测量所有样本的最大体积（多长时间取决于您，但您可以一次测量 1 秒）。如果在此期间任何样本的声音大于指定的最小值，那么您记录整个块。

您的代码的第二个问题是您实际上并没有创建 MP3 文件。WaveFileWriter 创建一个 WAV 文件。将您的文件名更改为以 WAV 结尾，然后收听以听取录音的结果。然后，您需要在录制后转换为 MP3 作为第二步。（我有一篇关于如何在[此处](http://www.codeproject.com/Articles/501521/How-to-convert-between-most-audio-formats-in-NET)转换格式的文章）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-19T19:23:21.050

您应该比较样本的绝对值，因为样本是有符号的。

```
 if (Abs(sample32) > 0.02) //0.02~0.03
   {
      writer.WriteSample(sample);
   } 
```

# javascript - Sencha Touch：如何更改选择下拉字段的默认图像？

> ID：14387394
> 
> 赞同：1
> 
> 时间：2013-01-17T20:17:07.557
> 
> 标签：javascript, css, html, sencha-touch, sencha-touch-2

![在此处输入图像描述](../Images/e4a938b2605e4b39d324a6c11a9e8a14.png)我想将 Sencha Touch 中 Select Dropdown 的默认图像更改为自定义图像？我附上了截图供参考。我找不到任何属性来更改此图像。此外，我没有找到任何可以覆盖以替换此图像的煎茶类。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:50:19.983

尝试这个

```
 .x-field-select .x-component-outer::after {
        -webkit-mask-image:url('myImg')
    } 
```

# c# - @Html.DisplayText 实际上不会显示文本

> ID：14387396
> 
> 赞同：25
> 
> 时间：2013-01-17T20:17:11.433
> 
> 标签：c#, asp.net-mvc, razor

以下是我的一个 ASP MVC3 索引页面上表的第一行中的第一部分。当该页面加载时，我已经逐步完成了代码，并且可以看到条件评估已正确完成，但“CE”或“PT”显示没有。我对 ASP MVC 很陌生，有人可以帮助我了解语法/解释发生了什么吗？

```
@foreach (var item in Model.Where(i => i.Status != "C")) {
var Id = item.Id;
<tr>
    <td>
    @if (!String.IsNullOrWhiteSpace(item.TableName))
    {
        if (item.TableName.Equals("AgentContEd"))
        {
            @Html.DisplayText("CE");
        }
        else if (item.TableName.Equals("AgentProductTraining"))
        {
            @Html.DisplayText("PT");
        }
        else
        {
            @Html.DisplayFor(modelItem => item.TableName)
        }             
    }           
    </td> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-17T20:31:11.537

如果您没有任何其他 html，请使用`@:`或指定服务器端代码中的 html 文本。`<text></text>`

```
if (item.TableName.Equals("AgentContEd"))
{
    @:CE
}
else if (item.TableName.Equals("AgentProductTraining"))
{
    <text>PT</text>
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-18T23:19:17.420

有 5 种不同的显示文本的方式。为了显示你需要使用的字符串

```
@Html.DisplayName(string) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-17T20:27:30.557

DisplayText 是 Model.PropertyName 的同义词。所以 Model.PropertyName = @Html.DisplayText('PropertyName')

因此，如果 CE 不是您的模型的属性，并且您只是尝试输出原始文本，而不仅仅是用原始文本替换该语句：

```
 if (item.TableName.Equals("AgentContEd"))
        {
            <text>CE</text>
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T20:32:07.150

您必须让 Razor 意识到您正在尝试显示文字文本。有关更多信息，请参阅这个优秀的
[Razor 语法指南](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)。

`if (item.TableName.Equals("AgentContEd")) { <text>CE</text> }`

# java - Spring - 使用声明性列表时的 404

> ID：14387397
> 
> 赞同：0
> 
> 时间：2013-01-17T20:17:14.883
> 
> 标签：java, spring

我正在尝试通过 application-context.xml 中的声明在 Spring 中创建一个列表

```
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<context:component-scan base-package="com.example.check" />

<bean id="valueOptions">
    <property name="valueList">
    <list>
        <value>Value A</value>
        <value>Value B</value>
    </list>
    </property>

</bean> 
```

当我尝试运行此代码时，我得到

`SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener java.lang.NullPointerException at java.util.concurrent.ConcurrentHashMap.get(Unknown Source) atorg.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:186)`

我在尝试运行应用程序时收到 404。关于我做错了什么的任何想法？

更新

> 严重：向 org.springframework.beans.factory.annotation 的 java.util.concurrent.ConcurrentHashMap.get(Unknown Source) 的类 org.springframework.web.context.ContextLoaderListener java.lang.NullPointerException 的监听器实例发送上下文初始化事件的异常.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:186) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:857) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean. :829) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。doCreateBean(AbstractAutowireCapableBeanFactory.java:440) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409) at java.security.AccessController.doPrivileged(Native Method) at org.springframework.beans.factory .support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton( DefaultSingletonBeanRegistry.java:220) 在 org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261) 在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164) at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429) at org.springframework .context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381) at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java :255) 在 org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199) 在 org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45) 在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) 在 org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) 在 org.apache.catalina.util.LifecycleBase.start(LifecycleBase. java:150) 在 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559) 在 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) 在 java.util .concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker .run(Unknown Source) at java.lang.Thread.run(Unknown Source)StandardContext.startInternal(StandardContext.java:5285) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)在 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) 在 java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) 在 java.util.concurrent.FutureTask.run(Unknown Source ) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 在 java.lang.Thread.run(Unknown Source) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)StandardContext.startInternal(StandardContext.java:5285) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)在 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) 在 java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) 在 java.util.concurrent.FutureTask.run(Unknown Source ) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 在 java.lang.Thread.run(Unknown Source) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)1559）在 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) 在 java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) 在 java.util.concurrent.FutureTask.run( Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)1559）在 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) 在 java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) 在 java.util.concurrent.FutureTask.run( Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)

我之所以说它与列表创建有关，是因为如果我在我的 xhtml 文件中删除列表和相应的用法，则应用程序可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:17:07.960

您没有在 xml 文件中为 bean 元素提供类属性...

```
<bean id="valueOptions" class="your.package.ObjectName">
    <property name="valueList">
    <list>
        <value>Value A</value>
        <value>Value B</value>
    </list>
    </property>
</bean> 
```

如果您的 bean 是 List 对象的实现，您可以执行以下操作：

```
<bean id="valueOptions" class="java.util.ArrayList">
    <constructor-arg>
        <list>
            <value>Value A</value>
            <value>Value B</value>                
        </list>
    </constructor-arg>
</bean> 
```

或者使用 util 命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd">

<util:list id="valueOptions" value-type="java.lang.String">
    <value>Value A</value>
    <value>Value B</value>   
</util:list> 
```

# c++ - 数组下标c ++的未解析重载类型> [int]

> ID：14387398
> 
> 赞同：0
> 
> 时间：2013-01-17T20:17:14.453
> 
> 标签：c++, arrays, int, overloading

我在我的航班预订系统程序中收到错误消息“未解析的重载类型>[int] for array subscript”。

我要做的是设置它，以便如果 [j] 等于 0,1,2,3... 它将相应地显示为 A,B,C,D。在我开始这样做之前，我的程序至少已经编译好了。</p>

```
// Flight Class - Scotia 2
// 
// Contains information on seating (array), space available and return to menu option.

#include <iostream>
#include <string>
#include "passenger.h"
#include "Seat.h"

using namespace std;

/*struct Seat
        {
            int Available;
            std::string fullName;
        };// End of struct*/

class Flight
{

public:
//default constructor
Flight()
{
//initialise all seat numbers
for(int i=0;i<4;i++)
for(int j=0;j<6;j++)
    {// assigns seats as 1A, 1B etc...
    seatPlan[i][j].setRow(row);
    if(j==0)
    seatPlan[i][j].setCol('A');
    else if(j==1)
    seatPlan[i][j].setCol('B');
    else if(j==2)
    seatPlan[i][j].setCol('C');
    else if(j==3)
    seatPlan[i][j].setCol('D');
    }
}

Seat seatArray[4][6];

    void seatPlan()
    {
        for (int ROW=0;ROW<4;ROW++)
        {
            for (int COL=0;COL<6;COL++)
                {
                    cout << seatPlan[i][j].getSeatRow();
                }
        }
        // End of for loop
    }// End of seatPlan function

//method which returns true if seat is Available and false otherwise
bool getAvailable(int i, int j)
{
    if(seatArray[i][j].Available == 0)
    return true; //seat available
    else
    return false; //seat occupuied
}

string getName(int i,int j){return seatArray[i][j].fullName;}

void setAvailable(int i, int j, int a){seatArray[i][j].Available = a;}
void setName(int i,int j, string name){seatArray[i][j].fullName = name;}

private:
//variables
int row;
char col;

};// End of Flight class 
```

以上是我的 flight.h 文件，其中包含 Flight 类。错误消息指向我的构造函数，其中包含的所有行都重复该消息`seatPlan[i][j].setCol('A');`，依此类推。

我还将包含“seat.h”文件，以防万一。

```
#ifndef SEAT
#define SEAT

#include <iostream>

using namespace std;

class Seat
{

    public:
    //deafult constructor
    Seat(){available = true;}

    //accessor methods
    void setRow(int row){seatRow = row;}
    void setCol(char col){seatCol = col;}

    int getSeatRow(){return seatRow;}
    char getSeatCol(){return seatCol;}

    bool isAvailable(){return available;}
    bool switchAvailable(){
    if(available)
    available = false;
    else
    available = true;
    }

    private:
    bool available;
    int seatRow;
    char seatCol;
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:19:15.100

`void seatPlan()`是一种方法，您将其视为数组。你的意思是`seatArray`相反吗？

还

```
if(seatArray[i][j].Available == 0)
return true; //seat available
else
return false; //seat occupuied 
```

? 真的吗？为什么不只是

```
return seatArray[i][j].Available == 0; 
```

（假设你修复了之前的错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:19:30.343

```
seatPlan[i][j].setRow(row); 
```

这是问题所在。`seatPlan`不是**数组**。它是函数的名称。

你的意思是`seatArray`。所以应该是：

```
seatArray[i][j].setRow(row); 
```

一个建议：考虑使用`std::array`：

```
std::array<std::array<Seat,6>,4> seatArray; 
```

代替

```
Seat seatArray[4][6]; 
```

# javascript - Mapstraction 和 JSON 谷歌地图样式

> ID：14387399
> 
> 赞同：0
> 
> 时间：2013-01-17T20:17:21.970
> 
> 标签：javascript, json, google-maps-api-3, mapstraction

我正在使用 maptraction v2。选择Google作为提供商时，我需要对Google Map V3进行样式化。我使用了 google 不错的“样式化地图向导”工具，该工具生成 JSON 对象以传递给 google.maps.MapOptions 对象的样式属性。该工具生成的 JSON 看起来像这样 { "featureType": "landscape.man_made", "elementType": "geometry.fill", "stylers": [ { "visibility": "on" }, { "color": "#404040" } ] } 等等...

但是，我无法弄清楚是否/如何重新格式化这个 json 对象，以便 mapstraction 可以像这样加载它：

```
 mapstraction = new mxn.Mapstraction('mymap', 'googlev3', true);
    json = { "featureType": "landscape.man_made", "elementType": "geometry.fill", "stylers": [ { "visibility": "on" },{ "color": "#404040" } ] }
    mapstraction.addJSON(json); 
```

更好的是，我真的很想知道是否可以使用 mxn.util.loadScript 直接从 url 获取 json 数据。

由于我对网络制图完全陌生，我可能正在尝试用地图绘制做一些现在不可能的事情。你认为是吗？我搜索了档案，发现 json 看起来不同，但我找不到解释如何重新格式化它以使其可用于 mapstraction 的答案。你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:02:39.880

这个例子有帮助吗？

摘自[http://mapstraction.appspot.com/#json](http://mapstraction.appspot.com/#json)

```
json = {
    features: [{
        "type": "Feature",
        "toponym": null,
        "title": "DSC_0023.JPG",
        "author": "ugef",
        "id": 1930723,
        "description": "",
        "categories": "california unitedstates sanjose eyefi",
        "geometry": {
            "type": "Point",
            "coordinates": [-121.896263,37.328655]
        },
        "properties": 
        {
            "icon_shadow": "http://mapstraction.appspot.com/images/blank.png",
            "icon_shadow_size": [0,0],
            "line_color": "",
            "icon": "http://mapstraction.appspot.com/images/flickr_marker.png",
            "line_opacity": 1.0,
            "pubdate": "2008/07/03 20:14:01 +0000",
            "line_width": 1.0,
            "poly_color": "",
            "icon_size": [16,16]
        },
        "source_id": 1000014
    }
    ]
}
// 
mapstraction.addJSON(json); 
```

# ios - 在 Objective-C 中用 %20 替换空格

> ID：14387401
> 
> 赞同：8
> 
> 时间：2013-01-17T20:17:30.570
> 
> 标签：ios, objective-c

我需要验证 UITextField 以用 '%20' 替换空格 ''，并且想知道这怎么可能？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-17T20:31:47.400

如果您只是想用另一个值替换字符串中的字符，请查看[NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)上的 stringByReplacingOccurrencesOfString:withString: 方法。

返回一个新字符串，其中接收器中所有出现的目标字符串都被另一个给定的字符串替换。

```
NSString *originalString = @"Sample text with spaces";

NSString *newString = [originalString stringByReplacingOccurancesOfString:@" " withString:@"%20"]; 
```

如果您尝试对 URL 进行编码，请在[NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)上使用 stringByAddingPercentEscapesUsingEncoding :。

使用给定的编码返回接收者的表示，以确定将接收者转换为合法 URL 字符串所需的百分比转义。

```
NSString *originalString = @"Sample text with spaces";

NSString *newString = [originalString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-17T20:33:28.927

```
NSString* string = @"Daylight by Maroon 5" ;
NSString* encodedString = [string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] ; 
```

# spotify - 从 spotify api 存储元数据

> ID：14387403
> 
> 赞同：3
> 
> 时间：2013-01-17T20:17:33.683
> 
> 标签：spotify

我想使用 spotify api 创建一个 webapp。在不涉及该项目的太多细节的情况下，我想澄清它是否违反条款和条件。

阅读条款和条件后，我在“不要做的事情”下阅读了这一行：“聚合元数据以创建数据库，或任何其他元数据汇编”。

我不打算做任何自动请求，例如，用不同的查询锤击服务以构建数据库......我只是想知道我是否可以将通过我的应用程序执行搜索的用户的结果存储到 api，这样我就可以在应用程序的其他部分从我的数据库构建内容。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T00:13:25.647

我不是律师，因此您需要让律师确认这一点（包括 ToS 合同在内的合同很重要），但一般要点是，如果您缓存用户生成的创建功能请求的结果，那么您没事。如果您开始缓存不是由用户生成的内容，那么您将陷入泥潭。

好的：

> 其他在 MyAwesomeApp 中搜索“麦当娜”的用户也搜索了“后街男孩”！

坏的：

> 这是 Spotify 上所有蓝色封面艺术的列表：[列表]

要生成第一个示例，您可以缓存并使用应用程序用户显式完成的搜索。第二个需要刮掉服务中的所有封面，这是不允许的。

# c# - 如何使当前隐藏的图像在通过 asp.net 验证时变得可见

> ID：14387404
> 
> 赞同：0
> 
> 时间：2013-01-17T20:17:34.350
> 
> 标签：c#, asp.net

我在 asp.net 中有一个简单的 Web 表单，它对表单字段进行了一些验证。我还有一个可见性设置为 false 的图像。在我的验证 if 语句中，我想要在验证通过时使该图像可见的代码。以下是我所拥有的，但图像未显示。谢谢！

```
if (!Page.IsValid) return;

      //Order is valid. Process it.
      lblOrderDetails.Text = "<h1>Success!</h1>" +
          "<b>Email: </b> " + tbEmail.Text + "<br />" +
          "<b>Model: </b> " + dlModel.SelectedItem.Text + "<br />" +
          "<b>Discounts: </b> ";

      imgSnowboard.Visible = true;

<asp:Image Visible="false" runat="server" ImageUrl="~/SnowBoard.jpg" ID="imgSnowboard"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:32:26.450

有两件事，首先与问题无关，我会开始使用`string.Format`而不是像那样连接。它更清洁，更易于管理。前任。

```
lblOrderDetails.Text = string.Format("<h1>Success!</h1>
    + "<b>Email: </b>{0}<br />" 
    + "<b>Model: </b>{1}<br />" 
    + "<b>Discounts: </b> ", tbEmail.Text, dlModel.SelectedItem.Text); 
```

而不是 + 符号的混乱，这简化了一点。

至于您的问题，我会说`Visible="false"`从声明中删除该属性，而是在 PageLoad 上调出图像并将可见属性设置为 false 服务器端。 `Visible"false"`当你有一个用它声明的控件时，它可能有点时髦。它几乎就像它没有创建控件一样，并且 C# 无法访问它，因此它可能试图显示该图像，但实际上找不到它。

希望这可以帮助！

# spring-mvc - 如何在春季 mvc 3 和 servlet 3.0 中的会话到期时收到通知

> ID：14387410
> 
> 赞同：0
> 
> 时间：2013-01-17T20:18:16.390
> 
> 标签：spring-mvc, servlet-3.0, httplistener, spring-social

使用tomcat 7、servlet 3.0、spring mvc3和spring social，我让我的班级听课；

```
public class AClass implements ApplicationContextAware, HttpSessionListener{

...
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
            this.applicationContext = applicationContext;
            if (applicationContext instanceof WebApplicationContext) {
                ((WebApplicationContext) applicationContext).getServletContext().addListener(this);
    }

    public void sessionCreated(HttpSessionEvent se) {
        System.out.println("session created");
    }

    public void sessionDestroyed(HttpSessionEvent se){
        System.out.println("session destroyed");

    }
...
} 
```

我在 web.xml 中将会话超时设置为 1 分钟（我确信它工作正常）当我打开一个页面时，我收到“会话已创建”消息，但我从未收到“会话已被破坏”。如果我在 1 分钟后刷新页面，我会再次收到“会话已创建”消息，该消息声称该会话即将过期。

所以问题是我做错了什么？sessionDestroyed 方法不应该在会话过期时通知我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:23:00.757

是的，当会话超时或您以编程方式使用以下命令将其过期时，会话将被销毁：

```
HttpSession.invalidate() 
```

请参阅此[博客](http://www.mkyong.com/servlet/a-simple-httpsessionlistener-example-active-sessions-counter/)以确保您正确执行所有操作。

此外，servletcontainer 不会在超时值之后立即销毁会话。有一个后台作业以特定的时间间隔运行，例如 5~15 分钟。因此，由于这个原因，您很可能不会立即在控制台中看到被破坏的行。

# php - 要编译产品列表，特别是价格，我如何使用两个表来构建产品的总价格？

> ID：14387418
> 
> 赞同：1
> 
> 时间：2013-01-17T20:18:55.710
> 
> 标签：php, mysql, sql

我正在尝试创建一个购物网站，在该网站上我销售的商品价格每天都在波动（贵金属）。我有一个表（产品），其中包含每个产品的乘数（类似于“1.1”）。我基本上不想每天走进我的桌子并更改数百件商品的价格。我的想法是创建另一个表，我将在其中简单地使用每天的每日价值更改价格字段。我怎样才能使最终产品价格的总和是一个表中的乘数乘以另一个表中输入的每日价格。或者，有没有比使用两个表更好的方法？到目前为止，这里的编码只使用了一个具有定义价格的表：

```
if (isset($_GET['id'])) {
    //Connect To Mysql Database
    include"storescripts/connect_to_mysql.php";
    $id = preg_replace('#[^0-9]#i','',$_GET['id']);
    //Use This VAR To Check To See If This ID Exists, If Yes Then Get Product
    //Details, If No Then Exit Script and Give Message Why
    $sql = mysql_query("SELECT * FROM products WHERE id='$id' LIMIT 1");
    $productCount = mysql_num_rows($sql);
    if ($productCount > 0) {
        //Get All The Product Details
        while ($row = mysql_fetch_array($sql)) {
            $product_name = $row["product_name"];
            $price = $row["price"];
            $details = $row["details"];
            $category = $row["category"];
            $subcategory = $row["subcategory"];
            $date_added = strftime("%b %d, %Y",strtotime($row["date_added"]));
        }

    } else {
        echo "That Item Does Not Exist";
        exit();
    }

} else {
    echo "Data To Render This Page Is Missing";
    exit();
} 

mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:45:02.257

那么，一个*不是*通常的 mysql_* 相关迂腐的响应怎么样？

在以下架构中，我将材料表与列出的价格分开，以便可以根据日期存储它们。您可能会发现这对记录和/或发票很有用。

```
TABLE products
  prod_id     INT PK
  prod_name   VARCHAR
  prod_price  DECIMAL
  mat_id      INT FK
  ...

TABLE materials
  mat_id    INT PK
  mat_name  VARCHAR
  ...

TABLE material_pricing
  mat_id            INT FK PK
  mat_price_date    DATE PK
  mat_price_factor  DECIMAL

SELECT
  p.prod_name,
  p.prod_price * pr.mat_price_factor AS 'cur_price'
FROM products p INNER JOIN materials m
  ON p.mat_id = m.mat_id
  INNER JOIN material_pricing pr
  ON m.mat_id = pr.mat_id
WHERE mat_price_date = TODAY() 
```

我正在想办法改变查询以获取`material_pricing`相关材料的最后定义条目，但我很难为子查询排列数据......

**编辑**：这应该可以解决问题

```
SELECT
  p.prod_name,
  p.prod_price * pr.mat_price_factor AS 'cur_price'
FROM products p INNER JOIN materials m
  ON p.mat_id = m.mat_id
  INNER JOIN (
    SELECT p1.*
    FROM material_pricing p1 INNER JOIN (
      SELECT mat_id, MAX(mat_price_date) 'mat_price_date'
      FROM material_pricing
      WHERE mat_price_date <= $target_date
      GROUP BY mat_id
    ) p2
    ON p1.mat_id = p2.mat_id
      AND p1.mat_price_date = p2.mat_price_date
  ) pr
  ON p.mat_id = pr.mat_id 
```

where`$target_date`最里面的子查询将替换为今天的日期、`TODAY()`mySQL 函数或正在显示的发票日期。

# java - 将一个项目从一个二维数组复制到另一个二维数组：Java

> ID：14387419
> 
> 赞同：1
> 
> 时间：2013-01-17T20:19:00.203
> 
> 标签：java, arrays

我有一个二维标签网格，我想在其中增长一个图表。根被染成蓝色并随机定位，随后的叶子先是绿色，然后是红色。每个红色标签将在下一个增长周期中为图表添加另外两个叶子。

我想将父副本保存在单独的二维数组中，关于如何实现这一点的任何建议。

```
int xPos, yPos;
xPos = ROW;
yPos = COL;
Random randomCell = new Random();
xPos = randomCell.nextInt( ROW );
yPos = randomCell.nextInt( COL );

if ( !Color.blue.equals(label[xPos][yPos].getBackground())) {
     label[xPos][yPos].setBackground(Color.BLUE);
} 
```

这`label[][] blue`是我想放在一个单独的`parent[][]`.

在进一步的循环中， parent[][] 将是红色的。

# lua - 在 Lua Wireshark Dissector 中重新组装数据包

> ID：14387426
> 
> 赞同：7
> 
> 时间：2013-01-17T20:19:13.050
> 
> 标签：lua, wireshark, wireshark-dissector

我正在尝试为基于 bplists 的 Safari 远程调试协议编写一个解析器，并且已经相当成功（当前代码在这里：[https](https://github.com/andydavies/bplist-dissector) ://github.com/andydavies/bplist-dissector ）。

不过，我在重新组装数据包时遇到了困难。

通常，协议会发送一个包含 4 个字节的数据包，其中包含下一个数据包的长度，然后是包含 bplist 的数据包。

不幸的是，来自 iOS 模拟器的一些数据包不遵循此约定，这四个字节要么被标记到 bplist 数据包的前面，要么被标记到前一个 bplist 数据包的末尾，或者数据是多个 bplist。

我尝试使用以下方法重新组装`desegment_len`它们`desegment_offset`：

```
 function p_bplist.dissector(buf, pkt, root)  

    -- length of data packet
    local dataPacketLength = tonumber(buf(0, 4):uint())
    local desiredPacketLength = dataPacketLength + 4

    -- if not enough data indicate how much more we need
    if desiredPacketLen > buf:len() then
      pkt.desegment_len = dataPacketLength
      pkt.desegment_offset = 0
      return
    end

    -- have more than needed so set offset for next dissection
    if buf:len() > desiredPacketLength then
      pkt.desegment_len = DESEGMENT_ONE_MORE_SEGMENT
      pkt.desegment_offset = desiredPacketLength
    end

    -- copy data needed 
    buffer = buf:range(4, dataPacketLen)

    ... 
```

我在这里尝试做的总是强制将大小字节作为要解析的数据包的前四个字节，但它不起作用我仍然看到一个 4 字节的数据包，然后是一个*x*字节的数据包。

我可以想到其他管理前面额外四个字节的方法，但是该协议包含一个查找表，该表距数据包末尾 32 个字节，因此需要一种将数据包准确拼接到 bplist 中的方法。

这是一个示例上限：[http](http://www.cloudshark.org/captures/2a826ee6045b) : //www.cloudshark.org/captures/2a826ee6045b #338 是一个数据包示例，其中 bplist 大小位于数据的开头，并且数据中有多个 plist。

我这样做是否正确（查看其他关于 SO 的问题，以及我似乎在网络上的示例）还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:44:17.423

TCP Dissector [packet-tcp.c](http://anonsvn.wireshark.org/viewvc/trunk/epan/dissectors/packet-tcp.c?revision=47145&view=markup)有 tcp_dissect_pdus()，它

> 循环用于剖析 TCP 流中的 PDU；假设一个 PDU 由一个固定长度的数据块组成，其中包含足够的信息来确定 PDU 的长度，然后是 PDU 的其余部分。

lua api 中没有这样的功能，但它是一个很好的例子。

再举一个例子。一年前我用它进行测试：

```
local slicer = Proto("slicer","Slicer")
function slicer.dissector(tvb, pinfo, tree)
    local offset = pinfo.desegment_offset or 0

    local len = get_len() -- for tests i used a constant, but can be taken from tvb

    while true do
        local nxtpdu = offset + len

        if nxtpdu > tvb:len() then
            pinfo.desegment_len = nxtpdu - tvb:len()
            pinfo.desegment_offset = offset
            return
        end

        tree:add(slicer, tvb(offset, len))

        offset = nxtpdu

        if nxtpdu == tvb:len() then
             return
        end
    end
end
local tcp_table = DissectorTable.get("tcp.port")
tcp_table:add(2506, slicer) 
```

# c# - c#, 查找String是否有图片链接并将其替换为html超链接

> ID：14387431
> 
> 赞同：2
> 
> 时间：2013-01-17T20:19:26.210
> 
> 标签：c#, asp.net, image

我想获取一串文本并找出是否有图像链接并将其替换为 html 超链接，因此它看起来是嵌入的。

例如：

```
Look at this image www.xyz/abcd.jpg 
```

当我想显示它时，我想嵌入图像：

```
look at this image <img src="www.xyz/abcd.jpg" alt="" /> 
```

像这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:32:00.843

也许类似于以下内容：

```
var str = "Look at this image www.xyz/abcd.jpg Look at this image http://www.xyz/abcd.jpg";
var words = str.Split(' ');
for (int i = 0; i < words.Length; i++)
{
    var word = words[i];
    if((word.EndsWith(".png") || word.EndsWith(".jpg")) && 
       (word.StartsWith("http://") || word.StartsWith("www.")))
        words[i] = "<img src=\"" + word + "\" alt=\"\" />";
}
var str2 = String.Join(" ", words); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:32:27.540

可靠地做到这一点非常困难，但你可以尝试这样的事情：

```
var str = "quick.brown/fox.jpg http://jumps.over.the/lazy/dog.png";
var link = Regex.Replace(
    str,
    "\\b((?:(?:http|https)://)?[a-zA-Z./]+[.](?:jpg|png))\\b",
    "<img src =\"$1\"/>");
Console.WriteLine(link); 
```

`.png`上面的正则表达式匹配以or结尾的任何内容`.jpg`，并使用 中的*捕获组*用标记将`Replace`其包围。`src="..."`

这是[关于 ideone 的快速演示](http://ideone.com/e9SnBW)。输出如下所示：

```
<img src ="quick.brown/fox.jpg"/> <img src ="http://jumps.over.the/lazy/dog.png"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T20:32:53.347

尝试这样简单的事情：

```
string l_input = "Look at this image www.xyz/abcd.jpg";

l_input = Regex.Replace( 
    l_input, 
    @"(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?(?<=jpg|png|gif)", 
    "<img src=\"$0\" alt=\"\">", 
    RegexOptions.IgnoreCase
);

// l_input = Look at this image <img src="www.xyz/abcd.jpg" alt=""> 
```

URL 模式来自[http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:35:56.373

使用以下正则表达式：

```
Regex.Replace(url, @"(https?:?//?[^'<>]+?\.(?:jpg|jpeg|gif|png))", "<img src=\"$0\" alt=\"\">"); 
```

# java - 如何在 Java 中统一处理“异常或空”情况？

> ID：14387434
> 
> 赞同：3
> 
> 时间：2013-01-17T20:19:42.820
> 
> 标签：java

例如，我需要使用 getFoo() 方法获取一个 Foo 对象：

```
Foo foo = getFoo(); 
```

在此之后，我想处理 getFoo() 没有成功返回 Foo 对象的情况。这又包括两种情况：

1.  getFoo() 抛出异常。
2.  getFoo() 的返回结果为 null、空字符串、0 或任何应视为“空结果”的内容。

理想情况下，我希望 getFoo() 抛出异常而不是返回空结果，但有时这可能是对我不拥有的另一个包中的方法的调用。

这些是我能想到的方法：

### 1.重复处理代码

```
Foo foo = null;
try {
    foo = getFoo();
} catch (ResourceNotFoundException ex) {
    logger.warn("blablabla");
    foo = defaultFoo;
    someOtherComplicatedStuff();
}
if (null == foo) {
    logger.warn("blablabla");
    foo = defaultFoo;
    someOtherComplicatedStuff();
} 
```

这绝对不是一个好主意。

### 2\. 将处理逻辑移至单个函数

```
Foo foo = null;
try {
    foo = getFoo();
} catch (ResourceNotFoundException ex) {
    handleNullFoo(var1, var2, var3, var4);
}
if (null == foo) {
    handleNullFoo(var1, var2, var3, var4);
} 
```

问题是逻辑可能会使用很多局部变量。将这些变量传递给外部函数没有多大意义。更糟糕的是，在此过程中可能需要修改一些变量。我不认为修改函数中的参数是一个好习惯，更不用说如果参数是原始类型可能导致的问题。

### 3\. 抛出假异常

```
Foo foo = null;
try {
    foo = getFoo();
    if (null == foo) {
        throw new ResourceNotFoundException();
    }
} catch (ResourceNotFoundException ex) {
    logger.warn("blablabla");
    foo = defaultFoo;
    someOtherComplicatedStuff();
} 
```

这是迄今为止最干净的方式，但它更像是一种 hack。在异常类不属于的包中抛出 ResourceNotFoundException 可能不合适。它还降低了代码的可读性，因为人们可能没有意识到异常是在函数内部处理的。

那么，你的建议是什么？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:23:22.670

这是另一种选择：

```
Foo foo = null;
try {
    foo = getFoo();
} catch (ResourceNotFoundException ex) {
    //TODO: log exception?
    foo = null;
}

if (null == foo) {
    logger.warn("blablabla");
    foo = defaultFoo;
    someOtherComplicatedStuff();
} 
```

请注意，`foo = null;`in`catch`子句几乎可以肯定是不必要的。`foo = getFoo()`仅当之后有一些代码可以 throw时才需要它`ResourceNotFoundException`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T20:25:31.477

关于什么

```
class WrappedFooFactory extends FooFactory {
  public foo tryGetFoo() throws ResourceNotFoundException {
    Foo foo = getFoo();
    if (null == foo) throw new ResourceNotFoundException();
    return foo;
  }
} 
```

后来只是

```
Foo foo = null;
try {
    foo = tryGetFoo();
} catch (ResourceNotFoundException ex) {
    logger.warn("blablabla");
    foo = defaultFoo;
    someOtherComplicatedStuff();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T20:31:19.450

那么这样的选择呢？它更常见，将适用于其他类似情况。

1）创建静态方法：

```
public static <E> E wrapNulls(Callable<E> callable, E defaultValue) {
    E result = null;
    try {
        result = callable.call();
    } catch (Exception e) {
        // log exception
    }
    return result == null ? defaultValue : result;
} 
```

2）以这种风格获取您的对象：

```
 Foo foo = wrapNulls(new Callable<Foo>() {
        @Override
        public Foo call() throws Exception {
            return getFoo();
        }
    }, defaultValue); 
```

**UPD：**对于那些认为这段代码有点冗长的人来说，我可以建议这样的增强：

3）创建静态类：

```
static abstract class C<E> implements Callable<E> {

    public abstract E c();

    @Override
    public E call() throws Exception {
        return c();
    }
} 
```

并使用它代替`Callable`接口：

4)

```
Foo foo = wrapNulls(new C<Foo>() {public Foo c() { return getFoo(); }}, defValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:25:04.863

版本 3 是迄今为止最糟糕的！（不是最干净的！）不要使用异常进行流量控制！

它依赖于一些应用程序，但 1 是最好的，因为您可以并且通常会有两个不同的日志语句：

```
Foo foo = null;
try {
    foo = getFoo();
} catch (ResourceNotFoundException ex) {
    logger.warn("Foo: ", ex);
    foo = defaultFoo;
    someOtherComplicatedStuff();
}
if (null == foo) {
    logger.warn("Foo: Got unexpected null");
    foo = defaultFoo;
    someOtherComplicatedStuff();
} 
```

# android - 第一个活动的android全屏

> ID：14387443
> 
> 赞同：1
> 
> 时间：2013-01-17T20:20:47.310
> 
> 标签：android, android-activity

我正在尝试使第一个活动全屏，如果用户单击“下一个按钮”，它将显示下一个带有标题和状态栏的活动

```
<activity
        android:name=".firstACT"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >...</activity> 
```

谢谢和对不起我的英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:27:03.663

要制作`Activity`全屏：

您要么以**编程**方式进行：

```
public class FullScreen extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.main);
    }
} 
```

或者您在**AndroidManifest.xml**文件中执行此操作：

```
<activity android:name=".ActivityName"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
</activity> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-01T07:52:43.033

这样做，

```
<activity
        android:name=".MainSplashScreen"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:theme="@style/CustomActionBarTheme" >
    </activity> 
```

# css - 类似 Cinemax 标志的 CSS 效果（背景的角端）

> ID：14387444
> 
> 赞同：1
> 
> 时间：2013-01-17T20:20:47.713
> 
> 标签：css, transform

我使用`-webkit-transform: rotate(-#deg);`和`background`选择器倾斜了文本和背景，但背景的末端与文本保持垂直。如何自定义末端被切断的程度（à la Cinemax 标志）。

![电影院](../Images/e89dc41de3a5e4220e7cf4aa2c0f0c37.png)

我尝试将跨度放在父 div 中以切断边缘，但这很棘手。在 CSS 中倾斜背景末端的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:21:41.697

除了`rotate`，您还应该使用`skew`您的元素：

```
div {
    transform: rotate(-5deg) skew(-10deg);
} 
```

这是小提琴：http: [//jsfiddle.net/VANrX/](http://jsfiddle.net/VANrX/)

# jquery - 在 html 文件之间滑动手势

> ID：14387448
> 
> 赞同：0
> 
> 时间：2013-01-17T20:21:02.500
> 
> 标签：jquery, html, css, mobile, swipe

我想将滑动手势集成到整个网页。触发器将是整个包装器 div，目标将是另一个 html 文件。在每个 html 上，我想为左右滑动设置 html 链接。没有必要上下。

我见过 jQuery 移动开发，但没有运气:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:03:32.403

这是我用于某些应用程序的触摸屏拖动/滑动修复。

```
(function(b)
{
b.support.touch = "ontouchend" in document;
if (!b.support.touch)
{
    return;
}
var c = b.ui.mouse.prototype,
    e = c._mouseInit,
    a;
function d(g, h)
{
    if (g.originalEvent.touches.length > 1)
    {
        return;
    }
    g.preventDefault();
    var i = g.originalEvent.changedTouches[0],
        f = document.createEvent("MouseEvents");
    f.initMouseEvent(h, true, true, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, false, false, false, false, 0, null);
    g.target.dispatchEvent(f);
}
c._touchStart = function(g)
{
    var f = this;
    if (a || !f._mouseCapture(g.originalEvent.changedTouches[0]))
    {
        return;
    }
    a = true;
    f._touchMoved = false;
    d(g, "mouseover");
    d(g, "mousemove");
    d(g, "mousedown");
};
c._touchMove = function(f)
{
    if (!a)
    {
        return;
    }
    this._touchMoved = true;
    d(f, "mousemove");
};
c._touchEnd = function(f)
{
    if (!a)
    {
        return;
    }
    d(f, "mouseup");
    d(f, "mouseout");
    if (!this._touchMoved)
    {
        d(f, "click");
    }
    a = false;
};
c._mouseInit = function()
{
    var f = this;
    f.element.bind("touchstart", b.proxy(f, "_touchStart")).bind("touchmove", b.proxy(f, "_touchMove")).bind("touchend", b.proxy(f, "_touchEnd"));
    e.call(f);
};
})(jQuery); 
```

正如 Kevin 所写，您可以使用 ajax 加载您需要准备好的另外两个页面，然后使用滑动触发器为它们设置动画以随机播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T16:00:21.553

不确定我是否为时已晚，但要回答答案，您必须执行以下操作：

1.  通过 ajax 将每个 html 页面加载到某些 div 中。[jQuery $.ajax()](http://api.jquery.com/jQuery.ajax/)做得很好
2.  使用[SwipeJS](https://github.com/bradbirdsall/Swipe)，您可以在 $.ajax 加载所有内容后启动滑动动画。

真的不需要重新制作滑动功能，SwipeJS 很棒。确保您使用 SwipeJS html 结构，并且只加载到每个可滑动的 div 中。希望回答它。

# php - php file_get_contents HTTP 请求失败！ASP 上的 HTTP/1.1 401

> ID：14387452
> 
> 赞同：0
> 
> 时间：2013-01-17T20:21:34.590
> 
> 标签：php, asp.net

我正在尝试从带有`file_get_contents`. 使用浏览器加载页面时，它可以工作，没问题。

要打印状态响应，我得到 200 ok。

```
<%
Response.Write(Response.Status);
%> 
```

但是当我使用时`file_get_contents`，我得到了错误

```
 HTTP request failed! HTTP/1.1 401 Unauthorized 
```

如果是防火墙问题的原因，是否可以解决？其他可能是由错误引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:08:23.110

您可能没有获取/传递 ASP 页面生成的 cookie。

您是否可以使用浏览器直接访问该页面（删除浏览器 cookie 后）？

其他可能性是 ASP 页面正在验证 User-Agent 或 Referer 字符串。

如果没有更多信息，很难确切知道...

# javascript - 在jquery中点击事件每秒触发X次

> ID：14387453
> 
> 赞同：0
> 
> 时间：2013-01-17T20:21:34.693
> 
> 标签：javascript, jquery

我正在尝试为我在 jquery 的帮助下编写的一个小游戏制作触摸控件。但我只是不知道如何编写一个函数，该函数基本上与您按住某个键时发生的事情相同。请你帮助我好吗？

PS。它不是我的代码[源](http://remysharp.com/demo/mousehold.js)

```
jQuery.fn.mousehold = function(timeout, f) {
    if (timeout && typeof timeout == 'function') {
        f = timeout;
        timeout = 100;
    }
    if (f && typeof f == 'function') {
        var timer = 0;
        var fireStep = 0;
        return this.each(function() {
            jQuery(this).mousedown(function() {
                fireStep = 1;
                var ctr = 0;
                var t = this;
                timer = setInterval(function() {
                    ctr++;
                    f.call(t, ctr);
                    fireStep = 2;
                }, timeout);
            })

            clearMousehold = function() {
                clearInterval(timer);
                if (fireStep == 1) f.call(this, 1);
                fireStep = 0;
            }

            jQuery(this).mouseout(clearMousehold);
            jQuery(this).mouseup(clearMousehold);
        })
    }
}

$.fn.extend({
    disableSelection: function() {
        this.each(function() {
            this.onselectstart = function() {
                return false;
            };
            this.unselectable = "on";
            $(this).css('-moz-user-select', 'none');
            $(this).css('-webkit-user-select', 'none');
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:20:37.130

那么问题是，您希望多久检查一次用户输入的变化。当涉及到 JS 中计时器的分辨率时，你是非常有限的。尽管请注意，一切都是按顺序运行的，因此事件会排队并可能汇总。对于 setInterval() 尤其如此，因为它严格地对新事件进行排队，即使之前触发的事件尚未处理。

像这样的工作：

```
var pressed;  // flag for continous press between mousedown and timer-events
var duration; // number of times the timer fired for a continous mousedown
var timeout;  // reference to timer-event used to reset the timer on mouseup

$(document).mousedown = function(){
    pressed = true;
    handleMousedown(false);
}

function handleMousedown(continued){
    if(pressed){    // if still pressed
        if(continued){  // and fired by the timer
            duration++;
            // measure time, use duration 
            // do anything 
        }
        timeout = setTimeout('handleMousedown(true)', 100); // wait for another 100ms then repeat
    }
}

$(document).mouseup = function() {
    // do sth on mouseup
    pressed = false;  // reset flag for continous mousedown
    clearTimeout(timeout); // abandon the timer
}

$(document).mouseout = function() {   // $(document).mouseenter = function(){
    // do sth on mouse leave or mouse entering again according to how your game should behave
    pressed = false;  // reset flag for continous mousedown
    clearTimeout(timeout); // abandon the timer
} 
```

# xml - 在 openoffice/libreoffice 文档中设置 content.xml 样式

> ID：14387454
> 
> 赞同：1
> 
> 时间：2013-01-17T20:21:36.077
> 
> 标签：xml, styles, openoffice.org, libreoffice

这是我之前的问题[LibreOffice 的下一集：生成幻灯片的 XSLT 样式表？](https://stackoverflow.com/questions/14364524)

我现在使用**XSLT生成****content.xml**。

 **在 libreoffice/content.xml 中**可以**在`text:p`. 类似的东西 `xhtml:span`（见下文）？

```
 <draw:page draw:master-page-name="">
    <draw:frame presentation:style-name="" svg:width="25.199cm"
      svg:height="3.506cm" svg:x="1.4cm" svg:y="0.837cm" presentation:class="title">
      <draw:text-box>
        <text:p>My name is <xhtml:span style="color:red;"><xsl:value-of select="name"/></xhtml:span></text:p>
      </draw:text-box>
    </draw:frame>
  </draw:page> 
```

还是我需要在其他地方声明所有命名样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:46:03.483

您可以在 <text:p> 中使用 <text:span> ，是的，您必须在其他地方声明所有命名样式。

<text:span> 当然需要一个结束标签。您需要使用正确的样式属性，这很重要。<xsl:value-of> 元素也不会飞。我认为，您需要检查 ODF 对字段的支持。

<text:span> 元素的唯一属性是最多一个 text:class-names 和最多一个 text:style-name。

text:style-name 值是随后在别处定义的样式的名称。text:class-names 属性是空格分隔的样式名称的值。

更多细节可以在 ODF 规范中找到。我推荐 Office 应用程序的 OpenDocument 格式 (OpenDocument) 版本 1.2，第 1 部分。您可以在[http://docs.oasis-open.org/office/v1.2/os/](http://docs.oasis-open.org/office/v1.2/os/)找到所有内容，包括全套。您还可以通过在段落中的部分运行上设置一些属性来获取更多信息，并查看 content.xml 是什么样的以及最终被引用的样式是在哪里定义的。**

# mathjax - 我们可以从 MathJax 获得 MathML 输出吗

> ID：14387458
> 
> 赞同：4
> 
> 时间：2013-01-17T20:21:45.950
> 
> 标签：mathjax, mathml

我想知道是否有办法将`MathJax`输出转换为`MathML`.

我通读了几篇说`MathJax`支持的文章`MathML`。`Show MathML`当我右键单击`MathJax`公式时，我还可以看到选项“ ”。我的问题是，我可以从 获取`MathML`网页的输出`MathJax`吗？我不熟悉，`MathJax`我不确定它是如何工作的。任何资源或教程页面都会很好！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:30:36.367

@Peter, I think the OP may be asking how to get a MathML string from MathJax, rather than how to insert the MathML tags into the page directly. So perhaps the discussion on the MathJax forums that describes [how to use toMathML](https://groups.google.com/d/msg/mathjax-users/unL8IjcrTto/DjHpH4BbPRcJ) will do the trick.

The basic idea is to get the element jax (using `MathJax.Hub.getAllJax`) for the math you want to convert, then to call its `toMathML` method. But you need to use some care for this, as `toMathML` can operate asynchronously. The link above goes through the details.

**EDIT**: The [MathJax-node](http://github.com/mathjax/MathJax-node/) project allows you to do this from the command line, so you might want to check that out as well.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-10T14:13:53.067

我已经写了一些代码检查一下：首先包括“ [https://code.jquery.com/jquery-1.11.2.min.js](https://code.jquery.com/jquery-1.11.2.min.js) ”和“ [http://cdn.mathjax.org/mathjax/latest/MathJax。 js?config=TeX-AMS-MML_HTMLorMML](http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML) "

```
var JaxToML = {
 toMathML: function(jax, callback) {
     var mml;
     try {
         mml = jax.root.toMathML("");
     } catch (err) {
         if (!err.restart) {
             throw err
         } // an actual error
         return MathJax.Callback.After([JaxToML.toMathML, jax, callback], err.restart);
     }
     MathJax.Callback(callback)(mml);
 },
 convert: function(AjaxText, callback) {
     var tempDiv = $('<div style="width:455px;height:450px:border-width:thick;border-style:double;"></div>').appendTo("body").html(AjaxText)[0];
     MathJax.Hub.Queue(["Typeset", MathJax.Hub, tempDiv]); //first place in Q
     MathJax.Hub.Queue(function() { //wait for a callback to be fired
         var jax = MathJax.Hub.getAllJax(tempDiv);
         for (var i = 0; i < jax.length; i++) {
             JaxToML.toMathML(jax[i], function(mml) {//alert(jax[i].originalText + "\n\n=>\n\n"+ mml);
                 AjaxText = AjaxText.replace(jax[i].originalText, mml);
             });
         }
         $(tempDiv).remove();
         AjaxText = AjaxText.replace(/\(/g,""); //notice this escape character for ( - i.e it has to be \( , know why it is beacuse JS will treat ) or ( as end/begin of function as there are no quotes here.
         AjaxText = AjaxText.replace(/\)/g,""); //notice this escape character for ) - i.e it has to be \)
         AjaxText = AjaxText.replace(/\\/g,"");
         callback(AjaxText);
     });
 }, 
```

};

用法 ：

```
JaxToML.convert(AjaxText, function(mml) {
         alert(mml);             
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:44:50.180

[有关配置 MathJax](http://docs.mathjax.org/en/latest/output.html)的 MathJax 文档可能是开始阅读的地方。您可以配置[每个浏览器的输出 jax](http://docs.mathjax.org/en/latest/options/MMLorHTML.html)。

一个警告。MathJax 现在不使用*任何*浏览器上的 MathML 输出是有原因的：浏览器支持还不完全存在。（这将随着浏览器的追赶而改变，MathJax 可以开始利用它们的原生支持。）所以请确保您的内容实际呈现正常。

# jquery - jQuery UI DatePicker 不能提交

> ID：14387459
> 
> 赞同：0
> 
> 时间：2013-01-17T20:21:46.967
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在使用 jQuery UI Datepicker，但是当有人单击日历图标时，它会“提交”表单，这不是想要的行为。

我可以通过控制我的日历图标（绑定到 jQuery UI CSS 样式日历的那个）的 click 属性来取消它：

```
$('.datePicker').click(
   function ($e) {
       $e.preventDefault();
   }); 
```

但是我很确定必须有更清洁的方法来解决这个问题。如果有人能回答这个问题，那将对我有很大帮助

谢谢 ！

编辑：回答评论...

Javascript：

```
$(function () {
    $('.datePicker').each(function () {
        $(this).datepicker();
        var x = $.trim('#' + $(this).attr('id').split('_')[0]);
        $('#' + $(this).attr('id')).datepicker("option", "altField", x);
        $('#' + $(this).attr('id')).datepicker("option", "dateFormat", "yy-mm-dd");
    });
    $('.datePicker').click(
       function ($e) {
           $e.preventDefault();
       });
}); 
```

.NET 生成的代码：

```
<input type=\"text\" id=\"{0}\" class=\"datePickerText\" style=\"width:80px\">
<input type=\"image\" src=\"/Content/images/calendrier.png\" id=\"{0}_IconeDatePicker\" class=\"datePicker\"> 
```

其中 {0} 是 ID 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:34:42.430

我找到了解决方案：

```
$(function () {
    $('.datePicker').each(function () {
        $(this).datepicker({
            dateFormat: "yy-mm-dd",
            showOn: "button",
            buttonImage: "/Content/images/calendrier.png",
            buttonImageOnly: true
        });
    });
}); 
```

只需使用 API 的按钮选项 :)

# wcf - 强制 WCF 接受不同的 SOAP 消息

> ID：14387461
> 
> 赞同：1
> 
> 时间：2013-01-17T20:22:12.253
> 
> 标签：wcf, web-services, soap

我不确定标题是否真的传达了我需要做的事情。我想强制或强制或任何 WCF 服务接受稍微不同的 SOAP 消息。这是服务的期望：

```
<sch:modifyCandidateNotification>
<!--Optional:-->
     <sch:request vueCandidateID="?" clientCandidateID="?" clientCode="?"> 
```

...

但这是我要发送到服务的内容：

```
<sch:modifyCandidateNotification vueCandidateID="?" clientCandidateID="?" clientCode="?"> 
```

我不负责发送 SOAP，我们的合作伙伴之一是，他们不能改变他们发送的内容。我根本不想要这个结构。

我尝试将 [WebInvoke(BodyStyle = WebMessageBodyStyle.Bare)] 添加到界面，但无济于事。另外，我正在使用 basicHttpBinding。我已经尝试使用 wsHttpBinding 并没有发现任何区别。

谢谢。

# asp.net - youtube api上传“在写入所有字节之前无法关闭流”

> ID：14387468
> 
> 赞同：1
> 
> 时间：2013-01-17T20:22:42.437
> 
> 标签：asp.net, upload, youtube-api

我正在使用 youtube api 直接上传这样的视频：

```
 YouTubeRequestSettings setting = new YouTubeRequestSettings("devpa", key, "user", "pass");
    YouTubeRequest req = new YouTubeRequest(setting);

    Video ytv = new Video();
    ytv.Title = "test video1";
    ytv.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
    ytv.Keywords = "test, dev";
    ytv.Description = "this is a test video";
    ytv.YouTubeEntry.Private = true;
    ytv.YouTubeEntry.MediaSource = new MediaFileSource(Server.MapPath("PATH"), "video/mp4");

    Video createdVideo = req.Upload(ytv); 
```

但每次我得到这个错误：

> 在写入所有字节之前无法关闭流

即使 **我正在上传具有不同灭绝 (flv,mp4 ..etc) **的小视频，有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:50:06.857

您需要设置超时。像 ytv.TimeOut = 100000000;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-22T07:28:17.920

实际设置的实例

```
YouTubeRequestSettings.Timeout = [A LARGER NUMBER] 
```

这就是您要使用的设置。

# oracle-call-interface - 使用 OTL (OCCI, OCI) 将二进制数据插入 Varchar2

> ID：14387469
> 
> 赞同：1
> 
> 时间：2013-01-17T20:22:44.003
> 
> 标签：oracle-call-interface, varchar2, occi, otl

如何使用 OTL 将可能是二进制的数据插入 Varchar2？（OCI/OCCI 当然可以）

背景：我们有很多 Varchar2 列，它们通常不是二进制的，但有一天可能会发生（我特别关心 \0 和 UTF-8）

星期二：我发布了这个相关问题： [如何在 Oracle Varchar2 中存储字节，并将 ASCII 视为文本](https://stackoverflow.com/questions/14452931/how-can-i-store-bytes-in-oracle-varchar2-and-have-ascii-treated-as-text)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:01:46.950

如果必须使用 VARCHAR2，则需要先转换二进制数据，例如使用 BASE-64 编码。

因此，如果您从 C++ 调用插入语句，则首先在 C 中[对您希望插入的字节进行编码](https://stackoverflow.com/questions/342409/how-do-i-base64-encode-decode-in-c)，然后调用该语句以插入结果字符串。

如果您希望从另一个表中插入二进制值，它会变得更加棘手，但您可以[在 PL/SQL 函数中对它们进行编码](https://stackoverflow.com/questions/3804279/base64-encoding-and-decoding-in-oracle)。

但是，如果您可以更改数据类型，最好改用 RAW 数据类型。

# java - 当我的 JAR 在类路径上时，为什么 Ant 会说“NoClassDefFound”？

> ID：14387470
> 
> 赞同：0
> 
> 时间：2013-01-17T20:22:49.730
> 
> 标签：java, eclipse, ant

我正在使用 Java 1.6、Eclipse 和 Ant。

以下是我创建 jar 文件并运行它的目标：

```
 <!-- Settings -->
    <property file="build.properties" />
    <path id="classpath">
        <fileset dir="${lib.dir}" includes="**/*.jar" />
    </path>

    <!-- Compile -->
    <target name="compile">
        <mkdir dir="${classes.dir}" />
        <javac srcdir="${src.dir}" destdir="${classes.dir}" includeantruntime="false">
            <classpath refid="classpath" />
        </javac>
    </target>

    <!-- Package .jar -->
    <target name="jar">
        <mkdir dir="${jar.dir}" />
        <jar destfile="${jar.dir}/App.jar" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="main.App" />
            </manifest>
        </jar>
    </target>

    <!-- Run .jar -->
    <target name="run">
        <java jar="${jar.dir}/App.jar" fork="true" />
    </target> 
```

问题是当我运行这个 jar（通过 Ant 或命令行）时，我收到错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: net/xeoh/plugins/base/impl/PluginManagerFactory
     [java]     at plugins.PluginLoader.<clinit>(Unknown Source) 
```

一些可能有用的知识：

*   当我打印我的类路径时，它表明所有必需的 JAR 都在那里；它还显示了类路径的 Eclipse 的 GUI 版本。

*   我曾尝试清理项目（通过 Eclipse 和 Ant）但无济于事。

*   似乎缺少的库 .jar**不是**.jar 中的 .jar（这似乎是一个常见问题）。

*   这是唯一的错误。其他班级似乎发现图书馆还不错......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:58:49.837

您已设置编译类路径，但 App.jar 不包含您的库（仅包含您编译的类）或清单类路径。

您需要执行以下操作：

```
<target name="jar">
    <mkdir dir="${jar.dir}" />
    <manifestclasspath property="manifest.classpath"
                       jarfile="${jar.dir}/App.jar">
      <classpath refid="classpath" />
    </manifestclasspath>
    <jar destfile="${jar.dir}/App.jar" basedir="${classes.dir}">
        <manifest>
            <attribute name="Main-Class" value="main.App" />
            <attribute name="Class-Path" value="${manifest.classpath}" />.
        </manifest>
    </jar>
</target> 
```

另请参见[ant manifestclasspath 任务](http://ant.apache.org/manual/Tasks/manifestclasspath.html)

# php - 使用 Hostgator 网站安装 JPGraph

> ID：14387471
> 
> 赞同：0
> 
> 时间：2013-01-17T20:22:58.713
> 
> 标签：php, jpgraph

我一直在尝试将 jpgraph 安装到我的 hostgator 网站，但在某个地方出现了我无法弄清楚的问题。有几件事让我认为问题可能出在几个地方；

首先，当将文件解压到我的桌面准备放入服务器时，我收到“目标文件夹是源文件夹的子文件夹”的错误，为此我只需单击继续，它似乎没问题。

这会根据[http://jpgraph.net/download/manuals/chunkhtml/ch02.html#id2475509上的示例 FAQ 解压缩我重命名为 jpgraph 的文件夹](http://jpgraph.net/download/manuals/chunkhtml/ch02.html#id2475509)

其次，当我查看示例时，原始代码是 [code] `require_once ('jpgraph/jpgraph.php');`，尽管文件结构应该是 jpgraph/src/jpgraph.php，尽管即使我更新了文件结构，该文件也不起作用。

第三，在查看不同文件时，我注意到一些文件结构引用 jpgraph 3.xxx(version)/jpgraph.php 但其他文件结构使用简写形式 jpgraph/jpgraph.php

我从 youtube 上找不到任何合理的安装（请参阅：Any）安装教程，并且 SO 上的其他线程并不是很有帮助，因为它是在后台解决的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:46:48.063

从您的评论看来，您的 php 脚本只是找不到 jpgraph 脚本，因此路径错误。

如果您使用 jpgraph 作为您选择的图形库，请尝试这样的操作：

```
$jpgraph_dir = '/your/path/to/your/jpgraph/';
require_once($jpgraph_dir . 'src/jpgraph.php'); 
```

如果您仍然收到此错误消息，那么您的路径就是错误的。

# python - remote_api_shell.py 的 PYTHONSTARTUP 等效项

> ID：14387472
> 
> 赞同：3
> 
> 时间：2013-01-17T20:23:04.467
> 
> 标签：python, google-app-engine

每次我使用远程 api shell 时，我最终都会导入并运行 80% 相同的代码，然后做我需要的事情。

我想知道是否有一种默认方式来为我每次使用它指定一系列导入/命令。

# python - django models.py 中的 Python

> ID：14387475
> 
> 赞同：0
> 
> 时间：2013-01-17T20:23:25.417
> 
> 标签：python, django, lambda, sum

这适用于python IDLE

```
class A:
    b = 0

    def __init__(self, value):
        self.b = value

obj1 = A(1)
obj2 = A(2)
obj3 = A(3)
k = [obj1, obj2, obj3]
result = sum(i.b for i in k)
print str(result) 
```

但这不适用于 django/python

```
from django.db import models

class Flatbar(models.Model):
    width = models.IntegerField()
    height = models.IntegerField()

    def Area(self):
        return self.width * self.height

class Section(models.Model):
    flatbars = models.ManyToManyField(Flatbar)

    def Area(self):
        return str(sum(f.Area for f in self.flatbars)) 
```

为什么这不起作用，我将如何使用 lambda 函数来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:27:07.517

a 的属性`ManyToManyField`产生了一个管理器，并且您创建了`Area`一个方法。

```
return str(sum(f.Area() for f in self.flatbars.all())) 
```

# javascript - 从 css 类动画显示/隐藏

> ID：14387477
> 
> 赞同：0
> 
> 时间：2013-01-17T20:23:35.367
> 
> 标签：javascript, jquery, html, css

我是 JavaScript 和 jQuery 的新手，所以请对我温柔一点。我正在尝试根据它是否具有某个类来为几个 div 的显示/隐藏设置动画。

基本上，我正在为摄影师创建一个网站，并有一个投资组合部分，顶部有一个过滤器列表，每个 div 都有一个“投资组合项目”类以及它所在的所有类别的附加类，所以家庭/婚礼/孩子/情侣。任何图像都可以有多个类。

我想要做的是点击家庭链接，它会隐藏任何没有家庭类的东西。如果我然后单击婚礼，它将关闭当前打开但没有婚礼课程的任何内容，并打开当前关闭但有婚礼课程的任何内容。

我目前正在使用下面的代码，但这只是关闭所有内容，然后打开具有所需类的那些。另外，我不知道如何为其添加动画。

```
function portfolioItems(filter) {
 $(".portfolio-items").hide();
 $("."+filter).show(); }

function initEventHandlers () {
 $(".port-all").click(function () { 
    $(".portfolio-items").show();   
    return false;
 })
 $(".port-wedding").click(function () {
portfolioItems("wedding");
return false;
 })
 $(".port-family").click(function () {
portfolioItems("family");
return false;
 })
 $(".port-kids").click(function () {
portfolioItems("kids");
return false;
 })
 $(".port-couples").click(function () {
portfolioItems("couples");
return false;
 }) } 
```

HTML是...

```
 <div class="portfolio-container">
        <div class="portfolio-links">
            <a href="#"><img alt="All" class="port-all" src="images/port-all.png" /></a>
            <a href="#"><img alt="family" class="port-family" src="images/port-family.png" /></a>
            <a href="#"><img alt="wedding" class="port-wedding" src="images/port-wedding.png" /></a>
            <a href="#"><img alt="couples" class="port-couples" src="images/port-couples.png" /></a>
            <a href="#"><img alt="kids" class="port-kids" src="images/port-kids.png" /></a>
        </div>
        <div class="portfolio">
            <div class="portfolio-items wedding couples family"></div>
            <div class="portfolio-items kids"></div>
            <div class="portfolio-items wedding kids family"></div>
            <div class="portfolio-items couples"></div>
            <div class="portfolio-items couples kids family"></div>
            <div class="portfolio-items wedding"></div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:56:29.287

不确定你想要什么样的过渡，但这会用很少的 jquery 淡入/淡出：

请注意，您也许可以删除 div 中的一些内容，但我不知道您对页面上的其他内容需要什么

小提琴：http: [//jsfiddle.net/Z5uXP/](http://jsfiddle.net/Z5uXP/)

```
 <div class="portfolio-container">
        <div class="portfolio-links">
            <a href="#" data-type="all"><img alt="All" class="port-all" src="images/port-all.png" /></a>
            <a href="#" data-type="family"><img alt="family" class="port-family" src="images/port-family.png" /></a>
            <a href="#" data-type="wedding"><img alt="wedding" class="port-wedding" src="images/port-wedding.png" /></a>
            <a href="#" data-type="couples"><img alt="couples" class="port-couples" src="images/port-couples.png" /></a>
            <a href="#" data-type="kids"><img alt="kids" class="port-kids" src="images/port-kids.png" /></a>
        </div>
        <div class="portfolio">
            <div class="portfolio-items wedding couples family"></div>
            <div class="portfolio-items kids"></div>
            <div class="portfolio-items wedding kids family"></div>
            <div class="portfolio-items couples"></div>
            <div class="portfolio-items couples kids family"></div>
            <div class="portfolio-items wedding"></div>
        </div>
    </div>
    <script>
     $(document).ready(function(){
  var $container = $("div.portfolio-container"),
      $portfolio = $container.find("div.portfolio");

 $container
 .on("click", ".portfolio-links a", function(event){
   var $obj = $(this);
  event.preventDefault();
  $portfolio
   .fadeOut()
  .queue(function(next){
    $($(this)[0]).css("color", "red")
     .removeClass("family wedding couples kids")
     .addClass($($obj[0]).data("type"));
    next();
  })
   .fadeIn();
 });
 });

</script>

<style>
 .portfolio .portfolio-items{
  display: none;
 }
 .portfolio.all .portfolio-items,
 .portfolio.family .portfolio-items.family,
 .portfolio.wedding .portfolio-items.wedding,
 .portfolio.couples .portfolio-items.couples,
 .portfolio.kids .portfolio-items.kids{
  display: block;
 }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:57:51.337

首先，您可以使用非选择器（[看这里](http://api.jquery.com/not-selector/)！）来避免隐藏所有照片。只需为您的带有照片的块分配两个类。像这样的东西

```
 <div class="portfolio-items wedding"></div>
    <div class="portfolio-items family"></div>
    <div class="portfolio-items kids"></div> 
```

然后你可以`portfolioItems`用这种方式重写你的函数

```
 function portfolioItems(filter) {
        $(".portfolio-items:not(."+filter+")").hide();
    } 
```

其次，您可以创建一个通用函数来隐藏某个类别，但不能多次复制相同的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:12:37.880

全部隐藏，将新类名添加到过滤器字符串，然后按过滤器字符串显示

[http://jsfiddle.net/uhCY5/3/](http://jsfiddle.net/uhCY5/3/)

```
var filters = "";

function portfolioItems(filter) {
    filters += '.' + filter
    $(".portfolio-items").hide();
    $(filters).show();
    $("#filter").text(filters)
}

function initEventHandlers() {
    $(".port-all").click(function () {
        filters = "";
        $(".portfolio-items").show();
        return false;
    })
    // the rest is the same
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:54:14.807

这是我发现对通过 CSS 进行过滤有用的一种方法。我喜欢在链接上使用 data 属性来指定过滤器。首先，设置带有一些链接的导航和带有一些图像或 div 的投资组合：

```
<!-- set up some navigation -->
<nav>
    <a href="#" class="filter">All Photos</a>
    <a href="#" class="filter" data-filter=".family">Family Photos</a>
    <a href="#" class="filter" data-filter=".art">Art Photos</a>
    <a href="#" class="filter" data-filter=".wombats">Wombat Photos</a>
</nav>

<!-- set up a portfolio -->
<div class="portfolio">
    <div class="family item">Some family image or something</div>
    <div class="art item"> Some art image or something</div>
    <div class="wombats item">Some wombat image or something</div>
    <div class="wombats item">Some wombat image or something</div>
    <div class="art item"> Some art image or something</div>
</div> 
```

请注意每个 a 标记如何具有您希望用作过滤器的类名作为数据过滤器属性。你可以在这里指定多个类，它的工作原理是一样的。例如，“.wombat.family”可以让您在您的投资组合中使用 DOUBLE 过滤器。

这是一个可以帮助您设置过滤器的脚本：

```
//on document ready
$(document).ready(function(){

  //when you click <a> tag in the <nav>
  $("nav a").click(function(e){

    //if the <a> has a data-filter attribute
    if($(this).attr("data-filter")){

         //show all the .items with the class in the data-filter attribute
         $(".portfolio .item"+$(this).attr("data-filter")).show(300);

         //hide all the .items that do not have that class
         $(".portfolio .item:not("+$(this).attr("data-filter")+")").hide(300);

    }else{

      //if there's no data-filter attribute, show all the images
      $(".portfolio .item").show(300);
    }
  });
}); 
```

对于这个，我只是在 show() 和 hide() 函数中使用了一个时间，但 fadeIn() fadeOut() 也可能对你有用。

为了启用“all”过滤器，我只是没有为特定的 a 标签编写数据过滤器属性，并确保 JS 知道该做什么（检查 if/else）。

要记住的重要一点是投资组合项目上使用的类和数据过滤器属性之间的链接。开始很简单，但我相信在你完成之前它会变得更复杂:)

这是一个可以玩的 jsfiddle：http: [//jsfiddle.net/w4VWm/](http://jsfiddle.net/w4VWm/)

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T20:47:02.520

你可以试试这个：

```
function portfolioItems(filter) {
   $(".portfolio-items.not("+filter+")").fadeOut();
   $("."+filter).fadeIn(); 
} 
```

# internet-explorer - 在 Internet Explorer [iframe] 上强制 Flowplayer 全屏

> ID：14387478
> 
> 赞同：0
> 
> 时间：2013-01-17T20:23:35.300
> 
> 标签：internet-explorer, fullscreen, flowplayer

我一直在一个网站上测试 Flowplayer 和其他媒体播放器，看看哪个更适合需要。Flowplayer 做得很好，但有一点细节是播放器不会为 Internet Explorer 用户提供全屏选项。我已经环顾了一段时间，包括在 SO 上，寻找解决这个问题的想法，但根本没有成功。

为了加快速度，现在我正在使用从“每个人的视频”中获得的代码来解决所有问题，当然在获得代码后我开始根据需要对其进行修改。

这是我在 iFrame 中使用的代码：

```
<video controls="controls" autoplay="autoplay" poster="<?php echo $poster;?>" width="<?php echo $width;?>" height="<?php echo $height;?>">
<source src="<?php echo $video;?>" type="video/mp4" />
<source src="<?php echo $videowebm;?>" type="video/webm" />
    <object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="<?php echo $width;?>" height="<?php echo $height;?>">
        <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
        <param name="allowFullScreen" value="true" />
        <param name="wmode" value="transparent" />
        <param name="flashVars" value="config={'playlist':['<?php echo $poster;?>',{'url':'<?php echo $video;?>','autoPlay':false}]}" />
        <img alt="Big Buck Bunny" src="<?php echo $poster;?>" width="<?php echo $width;?>" height="<?php echo $height;?>" title="No video playback capabilities, please download the video below" />
    </object>
</video> 
```

正如你所看到的，理解发生了什么并不复杂。我相信这个问题存在于播放器脚本在 iFrame 内运行的事实，这在某种程度上限制了播放器本身在全屏上播放。我尝试了很多东西，但在 IE 上没有成功。Chrome 和 Firefox 的工作就像一个魅力，但 IE 只是播放没有全屏选项的视频。

我要留下一张图片，这样你就可以看到我在说什么。
[http://i.stack.imgur.com/yfnVo.jpg](http://i.stack.imgur.com/yfnVo.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:04:19.927

Internet Explorer 不支持全屏 API [0]。已知问题列表提到：

“Chrome 15+、Safari 5.1+ 和 Firefox 14+ 支持原生全屏，其他版本将使用全浏览器窗口。” [1]

[0] [http://caniuse.com/fullscreen](http://caniuse.com/fullscreen) [1] [http://flowplayer.org/docs/known-issues.html](http://flowplayer.org/docs/known-issues.html)

# matlab - 发布到 HTML 时使用 SVG 图

> ID：14387479
> 
> 赞同：2
> 
> 时间：2013-01-17T20:23:35.817
> 
> 标签：matlab, svg, publish

这个问题发布在 Matlab Central ( [http://goo.gl/MkU8P](http://goo.gl/MkU8P) ) 上，但没有得到任何答案。我以为这里有人可能有线索。

我用`publish()`了很多来制作在线课堂笔记。它运行良好，但坦率地说，我发现 PNG 的地块质量很差。我已经尝试过设置`figureSnapMethod='antialiased'`，这有点好，但我大多发现结果很模糊。

制作 SVG 图会很棒。有没有办法做到这一点？我想它必须以`plot2svg`某种方式涉及（也来自文件交换），因为 SVG 输出似乎只支持 Simulink 模型。或者也许有人使用其他高质量格式有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:36:32.663

在使用发布之前，您应该设置一些选项来更改 imageForamt。默认情况下，它设置为 PNG 格式，不适合报告、论文等。您需要的是矢量图形图像，例如 eps 或 emf 文件格式。（在这种情况下，放大多少都没有关系，它永远不会变得模糊或低分辨率）。

您安装的 Microsoft Office 版本可以导入的任何图像格式，包括“png”、“jpg”、“bmp”和“tiff”。如果'figureSnapMethod'是'print'，那么你也可以指定'eps'、'epsc'、'eps2'、'ill'、'meta'和'pdf'

对于 HTML 输出，任何格式都成功发布 对于乳胶输出，任何格式都成功发布

我建议你使用 eps，它是最好的。请记住，发布时不支持 SVG。;)

您应该将此部分添加到您的命令中：

```
 'imageFormat','eps' 
```

# css - 使用精灵时如何裁剪背景图像

> ID：14387480
> 
> 赞同：1
> 
> 时间：2013-01-17T20:23:36.760
> 
> 标签：css, image, background

这是文件：[http](http://studioteknik.ca/stackoverflow_question/test1.html) ://studioteknik.ca/stackoverflow_question/test1.html我当时只需要查看一张背景图片，假设是第二张。它距顶部 400 像素，但我需要将其图像裁剪为顶部 400 高度。怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:29:33.213

一般来说，**内容**图像不应该是背景或精灵，它们应该是使用`IMG`标签的内联图像。Sprites 通常保留给 UI 元素，例如图标和菜单元素。

```
<div class="sprite1"></div> 
```

CSS：

```
.sprite1 { 
        height:400px;
        width:400px;
        background-image:url(http://www.studioteknik.ca/stada/wp-content/themes/stada-theme/images/banner_sprite.jpg);
        background-position:0 -400px; 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T13:39:17.320

我使用伪元素（之前/之后）为精灵生成我想要的框大小，并将背景图像添加到其中。

这样，您可以将 'normal' 元素设置为`position: relative`和`:after`to `position: absolute;`。

然后`after`根据您的需要将其放置在与主容器相关的位置，并且后元素的大小可以防止图像精灵“溢出”。

我在这里更全面地记录了该技术：http: [//benfrain.com/image-sprites-data-uris-icon-fonts-v-svgs/](http://benfrain.com/image-sprites-data-uris-icon-fonts-v-svgs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T00:42:28.157

是的 - 这是一个很好的答案。通常，您定位精灵的方式与定位普通图像的方式完全相同，但要设置高度和宽度，以便它们仅覆盖其中的一部分。背景位置是唯一改变的东西。如果我有一个 40 像素高的精灵并想显示它有 2 个 20 像素高的图像，代码将是这样的：

```
 .sprite1{ height:20px;
 width:20px;
 background-image:url("myimage.jpg");
  background-position: 0 0;
 }

.sprite2{
height:20px;
width:20px;
background-image:url("myimage.jpg");
background-position:0 -20;
} 
```

# java - 这是显示图像的 REST 合规性方式吗？

> ID：14387482
> 
> 赞同：4
> 
> 时间：2013-01-17T20:23:38.943
> 
> 标签：java, ruby, rest

我为我的同事设计了一个图像处理 API。他使用 Ruby (RestClient) 作为客户端。

```
$ curl -i -X GET http://abc.com:8080/api/v0/compare-19
HTTP/1.1 303 See Other
Date: Thu, 10 Jan 2013 08:02:02 GMT
Content-Type: application/json
Location: http://abc.com:8080/result/856caf71-df10-4b9e-a981-4785de2f4854.png
Transfer-Encoding: chunked
Server: Jetty(8.1.3.v20120416)

{
    "id": 19,
    "state": "completed",
    "timestamp": "2013-01-10T00:01:13.755-08:00",
    "resultImage": "856caf71-df10-4b9e-a981-4785de2f4854.png",
    "passcode": "AXBD"
} 
```

他想捕获“状态”和“密码”，但是根据 RESTClient 文档，ruby 程序立即重定向到[http://abc.com:8080/result/856caf71-df10-4b9e-a981-4785de2f4854.png](http://abc.com:8080/result/856caf71-df10-4b9e-a981-4785de2f4854.png)。

```
Exceptions (see www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)
for results code between 200 and 207 a RestClient::Response will be returned
for results code 301, 302 or 307 the redirection will be followed if the request is a get or a head
for result code 303 the redirection will be followed and the request transformed into a get
for other cases a RestClient::Exception holding the Response will be raised, a specific exception class will be thrown for know error codes 
```

我的问题是，这是给出 REST 响应的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:36:38.920

我认为如果您只是将 URL 留在`http://abc.com:8080/api/v0/compare-19`没有重定向的 200 OK 响应中会更好。让响应的 resultImage 是图像的相对/绝对 URL。然后客户端可以获取有关操作的元数据，如果他们想获得最终的结果图像，可以按照 resultImage URL。

# ios - 获取当前核心数据模型的名称

> ID：14387484
> 
> 赞同：4
> 
> 时间：2013-01-17T20:23:47.147
> 
> 标签：ios, core-data

我已经对我的模型进行了一些更改`Core Data`，我们正在处理迁移，如下所述：[轻量级迁移](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)。

这不是问题。但是，我想根据当前模型版本对我的数据进行一些其他更新。如何获取当前模型版本的名称？我希望看到类似的东西：

```
[[NSBundle mainBundle] currentDataModelName] 
```

但我似乎找不到它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-10T07:02:34.660

您可以获取模型名称并使用它来代替模型标识符。查看这篇出色的文章[Custom Core Data Migrations](http://www.objc.io/issue-4/core-data-migration.html)和相应的[Github 代码](https://github.com/objcio/issue-4-core-data-migration)。借助 NSManagedObjectModel+MHWAdditions 类别，您可以检索模型名称。

*   [NSManagedObjectModel+MHWAdditions.h](https://github.com/objcio/issue-4-core-data-migration/blob/master/BookMigration/NSManagedObjectModel%2BMHWAdditions.h)
*   [NSManagedObjectModel+MHWAdditions.m](https://github.com/objcio/issue-4-core-data-migration/blob/master/BookMigration/NSManagedObjectModel%2BMHWAdditions.m)

**源模型**名称：

```
NSError *error;
NSString *storeType = ...;
NSURL *storeURL = ...;
NSDictionary *sourceMetadata = [NSPersistentStoreCoordinator  metadataForPersistentStoreOfType:storeType
                                                                                           URL:storeURL
                                                                                         error:&error];
NSManagedObjectModel *sourceModel = [NSManagedObjectModel mergedModelFromBundles:@[[NSBundle mainBundle]]
                                                                forStoreMetadata:sourceMetadata];
NSString *sourceModelName = [sourceModel mhw_modelName]; 
```

**目标型号**名称：

```
NSString *destinationModelName = [[self managedObjectModel] mhw_modelName]; 
```

假设您实现了一个`managedModelObject`吸气剂。如果没有，这里是开箱即用的实现。

```
- (NSManagedObjectModel *)managedObjectModel {
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }

    NSString *momPath = [[NSBundle mainBundle] pathForResource:@"YourModel" ofType:@"momd"];

    if (!momPath) {
        momPath = [[NSBundle mainBundle] pathForResource:@"YourModel" ofType:@"mom"];
    }

    NSURL *url = [NSURL fileURLWithPath:momPath];
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:url];
    return _managedObjectModel;
} 
```

迁移时，源模型名称和目标模型名称将不同。否则，名称将相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T23:40:13.360

您可以`NSManagedObjectModel`通过发送`versionIdentifiers`给接收者来询问您的。

```
- (NSSet *)versionIdentifiers 
```

文档在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003610)

# javascript - jQuery UI 表单停止工作，没有已知的变化

> ID：14387485
> 
> 赞同：0
> 
> 时间：2013-01-17T20:23:46.540
> 
> 标签：javascript, jquery, jquery-ui, tabs, accordion

我在[http://deadlynightshades.com/custom/squared/eddie等页面上使用以前工作的 jQuery UI 产品订单表时遇到问题](http://deadlynightshades.com/custom/squared/eddie)

这是一个带有 html 表单的 jQuery UI 手风琴、选项卡和按钮。所有脚本和样式表似乎都已正确链接。

手风琴似乎不再正确地建立自己。应用了样式类，但扩展和收缩行为没有响应。

我自己编写的唯一脚本位于[http://deadlynightshades.com/Frontend/Capacitor/Scripts/Deadly.js](http://deadlynightshades.com/Frontend/Capacitor/Scripts/Deadly.js) **谁能告诉我它是否有错误？**同样，它曾经工作了几个月，直到几天前。

jQuery UI 元素是在 Deadly.js 脚本中建立的：

```
//  Establish jQuery-UI controls
$("#Tabs").tabs();
$("input:submit").button();
$("a.addtocart").button({ icons: { primary: "ui-icon-cart" }});
$("#Accordion").accordion(); 
```

如果初始化手风琴的行被移动，那么脚本中保留在命令上方的部分将起作用。当手风琴在脚本顶部附近建立时，接下来的任何内容都不会按预期工作。据我所知，手风琴（）坏了。

另一个症状与 foxycart 有关。将产品添加到购物车后，购物车应显示在灯箱中。出于某种原因，它已开始显示为独立页面。

我会回答任何有关更多信息的请求。我不知所措。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:27:11.410

```
Uncaught TypeError: Cannot read property 'safari' of undefined jquery-ui.min.js:220
Failed to load resource: the server responded with a status of 404 (Not Found)  http://deadlynightshades.com/Frontend/Capacitor/Images/Eggplant/ui-bg_flat_30_3d3644_40x100.png
Uncaught TypeError: Object [object Object] has no method 'live' jquery.nivo.slider.pack.js:24
Uncaught TypeError: undefined is not a function jquery.nivo.slider.pack.js:22 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:29:27.190

您正在使用来自谷歌的 jQuery。可能您的网站在设计时考虑了旧版本的 jQuery，并且您通过使用的链接更新到 1.9.0。

# java - 如何在java类中嵌入版本字符串

> ID：14387486
> 
> 赞同：0
> 
> 时间：2013-01-17T20:23:53.040
> 
> 标签：java, class, svn, version-control, version

我们希望有 java 源代码的版本，在我们的例子中是 svn $Id$ 字符串，嵌入到生成的类文件中。

我们希望能够通过对类文件的静态检查来确定此信息，最好是通过运行字符串或什么命令。

在每个类中声明一个设置为此值的私有最终静态字符串变量的天真尝试不会导致在类文件中嵌入一个清晰的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:00:01.817

你说......*最好通过运行字符串或什么命令*......

假设您的代码中有这样的内容：

```
private static final String SVN_ID = 
    "$Id: SvnIdDemo.java 1081 2008-09-30 19:03:23Z john $"; 
```

以下 Perl 单行...

```
$ perl -nwe 'print "$1\n" if /.*(\$Id:[^\$]+\$).*/' SvnIdDemo.class 
```

... 将 SVN ID 字符串打印到 STDOUT。

```
$Id: SvnIdDemo.java 1081 2008-09-30 19:03:23Z john $ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:37:57.777

您可以使用预定义的名称将方法添加到每个类的底部。假设您使用过：

```
public String extractChaimGeretzVersionNumber() {
    return "$Id$";
} 
```

然后，您会找到带有加载类的程序的版本，并通过反射调用魔术方法并检索版本。

在构建 .class 和 .jar 文件之前，您必须拥有将方法插入 .java 文件的代码，或者您可以有一个构建步骤来检查魔术方法是否已经存在于每个文件中。如果找不到，则构建失败。

# asp.net-mvc - foreach 循环中的 OR 条件

> ID：14387489
> 
> 赞同：0
> 
> 时间：2013-01-17T20:24:05.957
> 
> 标签：asp.net-mvc, foreach

以下是我用于条件 foreach 循环的语法。是否可以同时包含条件和 OR 语句？我尝试过这样的事情：

```
(i => i.Status <condition> || x => x.IssueType <condition>) 
```

但是没有运气。

```
@foreach (var item in Model.Where(i => i.Status != "C"  )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:11:34.633

您只需将`Or`条件放在一个`linq`表达式中

```
@foreach (var item in Model.Where(i => i.Status != "C" || i.IssueType <condition>)) 
```

# iphone - alpha=0 或 hidden=YES 的 UIViews 仍然是性能开销吗？

> ID：14387491
> 
> 赞同：4
> 
> 时间：2013-01-17T20:24:11.390
> 
> 标签：iphone, ios, cocoa-touch

当视图被隐藏或 alpha=0 时，它仍然消耗 CPU 功率还是被忽略？

如果我走：

```
[view setAlpha:0]; 
```

然后

```
[view setFrame:newFrameRect]; 
```

这对性能有何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:31:11.507

“alpha 为零的东西仍然被绘制，但是隐藏的视图不会重绘到屏幕上。因为这只会在视图发生变化时发生，所以差异应该是微不足道的......”

## 编辑

因此，setHidden 很有用，而更改 alpha 则没有那么有益。

一般来说，就记忆而言，几乎没有什么好处。您需要从视图中移除以最大限度地提高性能，但变化是如此之小，它可能无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:33:13.140

我怀疑会有很大的不同。虽然我只是在这里推测。我之所以这么说是因为 ios 设备有一个 gpu，并且在当今时代，这些设备非常复杂。从某种意义上说是复杂的，如果 alpha 为 0，则没有要渲染的内容，因此它只是对处理周期的简单检查。而且我假设它足够聪明来进行这项检查，因为图形芯片足够聪明，不会渲染视口之外的东西（或隐藏在前景像素后面）。

也许在测试应用程序上运行性能工具会揭示一些更具体的东西。

# javascript - HTML5/Javascript - 为什么我的动画在第一次开始时会跳转

> ID：14387500
> 
> 赞同：1
> 
> 时间：2013-01-17T20:24:42.683
> 
> 标签：javascript, html5-canvas

基本上我所做的是制作一个简单的动画，在按住回车键的同时将一个矩形移动到 x 轴。这很好用，但问题是当你按下回车键时，矩形似乎向前跳跃了大约 10px 左右。不确定是什么原因造成的。

```
//event listener
window.addEventListener("keydown", onKeyDown, false);
window.addEventListener("keyup", onKeyUp, false);

function onKeyDown(event){
    var keyCode = event.keyCode;
    switch(keyCode){
        case 13:  //enter
         key = true;
        break;
     }
}

function onKeyUp(event){
    var keyCode = event.keyCode;
    switch(keyCode){
        case 13:  //enter
        key = false;
        break;
    }
}

//neccessary variables
var tick = 0;
var key = false;

//main animation function
function drawStuff(){
window.requestAnimationFrame(drawStuff);
var canvas = document.getElementById("myCanvas");
var c = canvas.getContext("2d");

if(key == true){
    c.clearRect(0,0,500,500);
    c.fillStyle = "blue";
    c.fillRect(tick,0,100,100);
}
else{

}
tick++;
}  
window.requestAnimationFrame(drawStuff); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:28:36.840

这是因为您的 requestAnimationFrame 始终在运行（这很好）。每次调用时，您的刻度都会增加。如果您在按 Enter 之前等待很长时间，您会注意到它从右侧开始。

我的建议是`tick++`移入该`if(key == true)`部分。

# c# - 尝试通过 LINQ 将下拉列表填充到 C# 中的实体

> ID：14387502
> 
> 赞同：0
> 
> 时间：2013-01-17T20:24:52.137
> 
> 标签：c#, linq, entity-framework

我正在尝试填充 DropDownlist，但它似乎没有填充，我不确定它为什么不填充。我可以再找一双眼睛来帮助我找出我哪里出错了吗？下面是我的代码：

```
 private testhousingEntities1 canceldb = new testhousingEntities1();
   /*=================================================*/  
   /*load form                                        */
   /*=================================================*/  
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            InitializeForm();
        }        
    }

    /*================================================*/ 
    /*                                                */
    /*================================================*/  
    private void InitializeForm()
    {
        var version = (from v in canceldb.CancellationVersions
                       where v.Active
                       select v).FirstOrDefault();  

       /*populating states and countries drop downlist */
        FormHelpers.GenerateStates(ddlState);
        FormHelpers.GenerateCountries(ddlCountry);

        /*populating  drop downlist */
        semesterList();            
    }

    /*=================================================*/
    /*populating the Semester drop downlist            */
    /*=================================================*/  
    private void semesterList()
    {
        ddlSemester.Items.Insert(0, new ListItem("---------", "000"));

        var semester = from s in canceldb.cancellationsemesters
                       select new {                                
                                    cid= s.id, cSemester = s.Semester,                           
                                  };
        ddlSemester.DataSource = semester;
        ddlSemester.DataTextField = "cSemester";
        ddlSemester.DataValueField = "cid";
        ddlSemester.DataBind();
    }

    /*=================================================*/  
    /*populating the Semester drop downlist            */
    /*=================================================*/  
    protected void ddlSemester_SelectedIndexChanged(object sender, EventArgs e)
    {              
        if (!IsPostBack)
        {
           semesterList();                
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:29:48.240

尝试添加一个 ToList();

```
ddlSemester.DataSource = semester.ToList(); 
```

# javascript - 检查列表中的任何元素是否有事件

> ID：14387503
> 
> 赞同：0
> 
> 时间：2013-01-17T20:24:52.260
> 
> 标签：javascript, jquery

是否可以遍历表格单元格列表并检查是否有特定事件（例如`click`），然后执行回调函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:27:02.150

您可以使用`td` [选择器](http://api.jquery.com/category/selectors/)和[`each`](http://api.jquery.com/jQuery.each/)方法来循环并使用事件数据来获取您正在寻找的事件：

```
$("td").each(function () 
  {
    //Do you work here
  }); 
```

因此，对于以下 HTML：

```
<table id="t1">
    <tr>  <td id="t1A">A     <td> </tr>
    <tr> <td>B  <td> </tr>
    <tr> <td>C  <td> </tr>
    <tr> <td>D <td></tr>
</table>

<table id="t2">
    <tr>  <td id="t2A">A     <td> </tr>
    <tr> <td>B  <td> </tr>
    <tr> <td>C  <td> </tr>
    <tr> <td>D <td></tr>
</table> 
```

您可以使用以下内容：

```
$("#t1A").click(function () {
    alert("t1A click event");
});

$("td").each(function () {
    var events = $._data(this, "events")

    if (!events) return;

    var clickEvents = events.click;

    if (!clickEvents) return;    

    if (clickEvents.length > 0) {
        alert($(this).attr("id") + " has a click event");
        $(this).click();   // Execute the click if you so desire.
    }
}); 
```

请参阅此示例小提琴：http: [//jsfiddle.net/sdnr6/1/](http://jsfiddle.net/sdnr6/1/)

# c++ - #include 的使用

> ID：14387504
> 
> 赞同：3
> 
> 时间：2013-01-17T20:24:53.017
> 
> 标签：c++

我正在开发一个旧项目，该项目仍然包含已弃用的“#include iostream.h”。我知道 iostream.h 已被弃用且不应使用，但此代码必须在其上运行/编译的某些系统是运行 CC 且没有可用 iostream 的旧 Solaris 机器。我的问题是：如何让我的更现代的 g++ 编译器接受 iostream.h 包含。

编辑：编译器找不到 iostream.h 文件，所以我假设没有任何 .h 版本的库可用于 g++。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:29:28.417

最简单的解决方案可能是创建一个名为的本地头文件`iostream.h`，它只包含`<iostream>`和导入命名空间`std`。然后，为了让编译器允许`#include <iostream.h>`您将本地路径添加到包含文件搜索路径。对于 g++，这有效：

```
g++ -I local_folder [other flags] … 
```

顺便说一句，你关于

> … 已弃用的“#include iostream.h”

不太正确：这不是被弃用的，因为它从来不是合法的 C++。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T20:30:38.710

我会退后一步，写另一个你在任何地方都使用的中间头，而不是像这样：

```
#if defined(sun) || defined(__sun)
# if defined(__SVR4) || defined(__svr4__)
/* Solaris */
#include <iostream>
# else
/* SunOS */
#include "iostream.h"
# endif
#else
/* Sane, modern system */
#include <iostream>
#endif 
```

# mysql - MySQL：获取列中不同字段的值的计数

> ID：14387507
> 
> 赞同：0
> 
> 时间：2013-01-17T20:25:00.097
> 
> 标签：mysql

我需要计算城市列中每种独特动物的数量。

这是我正在尝试的查询：
`SELECT city, animals, COUNT(animals) AS count_animals FROM city_animals GROUP BY city`

这显然是行不通的，它给出的结果就像......

```
City           Animals  count_animals
---------       ---     --
Arlington       Cow     1
Austin          Cat     2
Bastrop         Cow     2
Big Sandy       Horse   2
Cedar Creek     Horse   2
Cedar Hill      Cow     2
Chandler        Horse   1
Decatur         Dog     1 
```

我正在寻找这样的东西：

```
City           Animals  count_animals
---------       ---     --
Arlington       Cow     1
Austin          Cat     2
Bastrop         Cow     2
Big Sandy       Horse   2
*Cedar Creek    Horse   1*
*Cedar Creek    Lizard  1*
*Cedar Hill     Cow     1*
*Cedar Hill     Horse   1*
Chandler        Horse   1
Decatur         Dog     1 
```

这是我拥有的修改后的数据：

```
City            Animals
-----           --------
Arlington       Cow
Austin          Cat
Austin          Cat
Bastrop         Cow
Bastrop         Cow
Big Sandy       Horse
Big Sandy       Horse
Cedar Creek     Horse
Cedar Creek     Lizard
Cedar Hill      Cow
Cedar Hill      Horse
Chandler        Horse
Decatur         Dog
DeSoto          Cow
DeSoto          Horse
DeSoto          Cow
Duncanville     Llama
Duncanville     Cow
Farmers Branch  Cat
Farmers Branch  Dog
Garland         Lizard
Garland         Cow
Garland         Cow
Garland         Lizard
Garland         Cow
georgetown      Llama
Gladewater      Horse
Hurst           Horse
Kempv           Llama
Mckinney        Dog
Mckinney        Dog
Mckinney        Dog
Midlothian      Horse
Midlothian      Horse
Ovilla          Horse
Ovilla          Horse
Palestine       Horse
Palestine       Horse
Porter          Horse
Porter          Cow
Rockwall        Cow
SPRING          Dog
SPRING          Dog
Terrell         Cow 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:28:22.900

如果您想要每个的计数，`animal`那么您将需要`GROUP BY`城市和动物：

```
SELECT city, 
  animals, 
  COUNT(animals) AS count_animals 
FROM city_animals 
GROUP BY city, animals 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/89637/1)

结果：

```
|           CITY | ANIMALS | COUNT_ANIMALS |
--------------------------------------------
|      Arlington |     Cow |             1 |
|         Austin |     Cat |             2 |
|        Bastrop |     Cow |             2 |
|      Big Sandy |   Horse |             2 |
|    Cedar Creek |   Horse |             1 |
|    Cedar Creek |  Lizard |             1 |
|     Cedar Hill |     Cow |             1 |
|     Cedar Hill |   Horse |             1 |
|       Chandler |   Horse |             1 |
|        Decatur |     Dog |             1 | 
```

# jquery - 如何从延迟回调中获取数据；

> ID：14387513
> 
> 赞同：0
> 
> 时间：2013-01-17T20:25:41.760
> 
> 标签：jquery

如何让返回的数据在下面的延迟回调之外工作？

```
 results.done(function(data)
             {
                   alert(data); // works
             });

             alert(data); // does not work but need it to work... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:29:10.340

这有时会起作用，**但这是一个非常糟糕的主意。**

```
var badIdea;
results.done(function(data) {
    alert(data);
    badIdea = data;
});

setTimeout(function(){
    alert(badIdea);
},10000); 
```

重新考虑你的逻辑，不要尝试在 done 回调之外获取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:32:27.657

您需要将数据存储在可从外部范围访问的位置。如果您将其存储在回调内部的全局变量中，它将可用；然后，您只需要确保外部代码仅在异步代码完成后执行。

或者，您可以多次调用“done”（.done() 返回延迟对象，因此 .done().done() 或 temp = .done(); temp.done() 会起作用）。如果结果之前已经完成，回调将立即执行。

# java - 如何强制属性等于常量值之一（在 Java 中）？

> ID：14387514
> 
> 赞同：2
> 
> 时间：2013-01-17T20:25:46.710
> 
> 标签：java, enums

我有一个`Game`带有属性“状态”的类，这个属性将只是“玩家”或“教练”，我怎么能这样做？我会给你我是如何尝试的

```
class Status{
   public static final String player = "player";
   public static final String coach = "coach";
}
class Game {
   String status;
   Game(String status){
     this.status = status;
   }
}
class Main{
   public static void main(String args[]){
     new Game(Status.player);
     new Game(Status.coach);
   }
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T20:28:27.533

使用枚举

```
public class Game {
   public enum Status { PLAYER, COACH };
   private Status status;
   public Game(Status status){
     this.Status = status;
   }

public static void main(String args[]){
     new Game(Status.PLAYER);
     new Game(Status.COACH);
   }
} 
```

# vb.net - 使用 VB 在 .csv 字符串中的第一个值之后删除换行符

> ID：14387517
> 
> 赞同：0
> 
> 时间：2013-01-17T20:25:55.740
> 
> 标签：vb.net, csv, replace, line-breaks, streamwriter

我有一个小函数，可以从存储在数据网格中的字符串创建一个 .csv 文件。

```
Dim rowcount As Integer = DataGridView1.Rows.Count - 1
        For m As Integer = 0 To rowcount
            Dim strrowvalue As String = ""
            strrowvalue += CStr(DataGridView1.Rows(m).Cells(0).Value)
            For n As Integer = 1 To DataGridView1.Columns.Count - 1
                If DataGridView1.CurrentCell.Value Is DBNull.Value Then
                    strrowvalue += "," + "0"
                End If
                If DataGridView1.Rows(m).Cells(n).Value Is DBNull.Value Then
                    strrowvalue += "," + "0"
                Else
                    strrowvalue += "," + CStr(DataGridView1.Rows(m).Cells(n).Value)
                End If
            Next

            If m <> rowcount Then
                streamwriter.WriteLine(strrowvalue)
            End If
        Next 
```

然而，在第一个值之后插入一个换行符。这会导致 Excel 和其他程序将第一个值放在第 1 行，然后将该行的其余值放在第 2 行。

例子：

1.  100 ,

2.  555,333,333,666,777

3.  200 ,

4.  444,555,453,345,778

它应该是：

1.  100,555,333,333,666,777

2.  200,444,555,453,345,778

有任何想法吗？

编辑：问题已被修改以表明它是插入字符串的换行符，而不是空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:31:45.790

从您的代码中不清楚空间的来源，摆脱空间的最佳方法可能是从一开始就防止它发生。

此外，空格*不会*导致Excel添加换行符（我刚刚测试了它以确保）。事实上，Excel 默默地吞噬了这个空间。如果在您的情况下插入了换行符，则表明该字符不是空格而是其他字符。

除此之外，您用于删除空格的代码有效。您可能忘记将结果分配给变量：

```
strrowvalue = strrowvalue.Replace(" ", "") 
```

编辑：因为它显然是一个回车字符而不是一个空格，所以使用这个：

```
strrowvalue = strrowvalue.Replace(vbCr, "") 
```

或者，如果它是完整的 Windows 样式换行符：

```
strrowvalue = strrowvalue.Replace(vbCrLf, "") 
```

如果这些都不起作用（奇怪！），试试这个：

```
strrowvalue = strrowvalue.Replace(vbLf, "") 
```

在其他新闻中，您应该在`StringBuilder`此处使用 a ，它的性能会比大量重复的字符串连接好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:47:08.233

根据插入的换行符类型，我会将此行更新为以下之一：

```
strrowvalue += CStr(DataGridView1.Rows(m).Cells(0).Value).Replace(vbCrLf,"") 
```

- 或者 -

```
strrowvalue += CStr(DataGridView1.Rows(m).Cells(0).Value).Replace(vbCr,"") 
```

- 或者 -

```
strrowvalue += CStr(DataGridView1.Rows(m).Cells(0).Value).Replace(vbLf,"") 
```

# javascript - 网页永远不会停止加载

> ID：14387518
> 
> 赞同：3
> 
> 时间：2013-01-17T20:25:56.893
> 
> 标签：javascript, jquery, html, popcornjs, buzz.js

我目前正在从事一个学生项目，但我的代码遇到了问题。我们构建了一个电子文档，它混合了有关夜间工作人员的视频、图像、声音和文本数据。它由 HTML、Javascript 和一点 PHP 组成，用于访问数据库。

最近我们发现当你到达网站时页面一直在无限加载......它破坏了我们的一些JS代码，我们不知道如何识别可能被破坏的资源......

什么可以使页面“永远”加载？我们应该使用什么样的工具（即 firebugg 或内置的 chrome 工具）来识别问题？

您可以在这里找到我们的开发版本：http: [//mgprddev2012.dream-valenciennes.com](http://mgprddev2012.dream-valenciennes.com)

编辑：PHP 错误现在可以了，我忘了在开发平台上上传最新版本的代码。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:43:51.863

你没疯 - 这个页面确实需要很长时间才能加载。

如果您查看 Chrome 开发者工具中的网络选项卡，您会发现一开始有很多图像、音频文件和视频文件都在加载，并且大部分都无法立即看到。其中一些非常大。这可能是最好将这些资产中的大多数延迟加载到您需要显示它们的情况之一，或者至少在您立即加载所需的资产之后。

我建议检查一下[YSlow](http://yslow.org/)，这是一个审计工具，它会给你一些关于如何让你的网页加载得更快并且*看起来*加载得更快的提示。该网站还提供了一些很好的提示和详尽的解释，说明为什么不同的策略是有效的。

此特定页面的一些提示：

*   你的很多图片都是文字图片。考虑将这些渲染为实际的 html 文本。您仍然可以使用 CSS 修改每个字母的大小，并且您将获得 Chrome 能够为非法语用户翻译文本的额外好处。您应该能够使用 CSS 边框来获取文本周围的这些线条，或者尝试使用 SVG。

*   您的背景图片为 2.2 MB。这是相当大的。尝试以较低的压缩设置保存它。

*   您在单个 png 文件中有一堆图标。考虑将它们全部放在一个文件中并将它们显示为[CSS Sprites](http://en.wikipedia.org/wiki/CSS_sprite#Sprites_by_CSS)。

*   除了透明度之外，有几个 png 文件看起来可能是 jpg 文件。如果你有野心，你可以制作一个 jpg，左边的颜色通道，右边的 alpha 通道渲染为灰度，然后使用画布合成它们。

*   您还有一些包含动画精灵的 png 文件。您可以将它们转换为视频并尝试与上述相同的画布技巧。如果你愿意使用 WebGL，我有一些你可以使用的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T20:28:41.573

停止加载对我来说很好。Firebug 通常会告诉您是否在后台加载了某些内容。查看控制台区域以查看页面加载时是否有任何事情停止。你是说它在当前状态下挂起，因为对我来说它完成得很好。

在控制台中，您还可以看到可能导致无法正常工作的 javascript 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:29:47.373

在 JavaScript 控制台中：

```
Uncaught TypeError: Cannot call method 'pause' of undefined debout.js:979 
```

它说`debout.pop02`没有声明。你在哪里初始化它？

# jquery - Fancybox 2 滚动条消失并且站点向右移动

> ID：14387524
> 
> 赞同：1
> 
> 时间：2013-01-17T20:26:56.863
> 
> 标签：jquery, fancybox, fancybox-2

我对fancybox 2 有一个小问题。我现在要处理编码问题，如果我要问一些愚蠢的问题，我很抱歉。

我在测试站点上使用了fancybox，但是当我单击图像时，该框打开并且背景中的整个页面向右移动并且滚动条消失了。我不想要这种行为。滚动条应该在那里。

它在这个网站上：[http ://elgaucho.lu/restaurant.php](http://elgaucho.lu/restaurant.php)

你能帮我吗？

提前致谢

安迪

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T21:26:50.653

据我所知，您修改了原始的 fancybox css 文件。

您从此更改了第 167 行

```
.fancybox-lock {
    overflow: hidden;
} 
```

进入这个

```
.fancybox-lock {
    overflow: hidden;
    margin-right:0 !important;
} 
```

...以及来自此的第 187 行

```
.fancybox-lock .fancybox-overlay {
    overflow: auto;
    overflow-y: scroll;
} 
```

进入这个

```
.fancybox-lock .fancybox-overlay {
    overflow: hidden;
    overflow-y: hidden;
} 
```

...所以难怪（请记住，js 文件也会动态更改一些 css 属性，因此您可能无法完全控制仅更改 css 文件）

一般来说，除非您非常确定自己在做什么，否则您不应该弄乱原始文件，否则您会得到意想不到的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:20:24.670

我通过在主 CSS 文件中添加以下代码解决了这个问题：

```
body { margin: 0 !important; }
.fancybox-lock,
.fancybox-overlay { overflow: visible !important; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T19:49:53.710

我有同样的问题......滚动条消失了，页面向右移动。烦人，但这段代码确实有效。只需将其添加到您的任何 fancybox css 文件（或任何包含的 css 文件）。

```
.fancybox-lock, .fancybox-overlay { overflow: visible !important;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T21:16:40.823

强制页面始终滚动：

```
body {overflow-y: auto !important;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-10T17:42:27.537

我遇到了这个问题，我的解决方案比我预期的要容易。我只是进入了 html 并注意到我有两个身体

在代码中（靠近底部）有以下内容：

```
 body {
        max-width: 700px;
        margin: 0 auto;
    } 
```

我删除了它，我的网站现在又回到了中心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-05T12:56:05.193

**添加：**

.fancybox-lock，.fancybox-overlay {溢出：可见！重要；}
主体{溢出：可见！重要；}

**删除：**

.fancybox-lock body {溢出：隐藏！重要；}

***美好的***

# mysql - 如何将本地mysql连接到gae rdbms

> ID：14387530
> 
> 赞同：1
> 
> 时间：2013-01-17T20:27:15.633
> 
> 标签：mysql, sql, google-app-engine

我已经在本地计算机上设置了 MySQL，现在我想连接到 gae 云数据库，这样我就可以使用 sql 将我的数据加载到 gae 中。我使用谷歌开发人员的文档让本地 MySQL 工作，他们暗示连接到 gae 数据库，但他们没有提供足够的细节来为新用户做这件事。

我尝试了很多方法，例如：c:\mysql -u host:app-id.appspot.com -p

和 c:\google_sql.cmd app-id.appspot.com [留言簿]

谢谢你的帮助丹

# ios - AFNetworking - 序列化连接

> ID：14387535
> 
> 赞同：0
> 
> 时间：2013-01-17T20:27:38.667
> 
> 标签：ios, grails, afnetworking

我使用 AFNetworking 作为我的应用程序的连接库。由于后端限制，我无法在应用启动时同时发送两个请求，因为服务器会识别出 CookieTheftException (Grails)。在第一次成功连接后，我可以同时请求尽可能多的请求，但第一个请求必须是串行的。我怎样才能做到这一点？

我想使用信号量，但我不能阻止主线程。

### 编辑 1

我试图覆盖，但没有奏效。我认为操作队列不会等待一个请求完成（包括它的回调）来启动另一个请求。

```
- (void)enqueueHTTPRequestOperation:(AFHTTPRequestOperation *)operation
{
    [self.operationQueue setMaxConcurrentOperationCount:1];
    [super enqueueHTTPRequestOperation:operation];
} 
```

### 编辑 2

我意识到 maxConcurrentOperation 有效，实际上一次执行 1 个操作。问题是已经在没有服务器需要的 cookie 的情况下创建了排队的请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:02:31.043

我对 Grails 或您系统的特定架构一无所知，但也许这可以通过简单地关闭该请求的 cookie 来解决，使用`NSMutableURLRequest -setHTTPShouldHandleCookies:`.

除此之外，确保该初始调用只运行一个请求操作的最佳方法是完全忽略队列，并`AFHTTPRequestOperation`在您的子类上简单地拥有一个属性`AFHTTPClient`。您甚至可以使用 KVO 来确保在初始请求完成之前暂停操作队列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:33:00.103

我建议阅读有关[GCD的内容](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

您可以创建一个队列并在此队列中放置一些要执行的块。

这边走：

*   它不会阻塞主线程
*   由于您的所有网络块都将在一个队列中执行，因此不可能同时执行两个块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:34:38.883

您可以将队列的最大并发操作数设置为 1。这样一次只会发出一个请求。

```
[self.httpClient.operationQueue setMaxConcurrentOperationCount:1]; 
```

但是既然你只需要等待第一个请求，为什么不自己调用那个请求，然后在第一个请求完成时才初始化其他请求呢？

# iphone - 使用 CATransition 时应该在何时何地使用 removeAllAnimations？

> ID：14387536
> 
> 赞同：0
> 
> 时间：2013-01-17T20:27:41.780
> 
> 标签：iphone, objective-c, xcode, core-animation

好的。我正在使用 CATransition 为我的导航栏提供自定义动画。

我在 viewDidLoads 中使用 CATransition 来提供弹出动画，并在按钮方法中使用 CATransition 来推送到下一个视图控制器。

我看到有人提到应该使用 removeAllAnimations，但我不确定何时何地。该文档似乎没有帮助。

使用 CATransition 时应该在何时何地使用 removeAllAnimations？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:07:01.893

动画在完成后会自动删除，除非您明确告诉它们不要。`removeAllAnimations`当您想这样做时，您可以使用。一种常见的用例是取消动画，或者如果您已将动画配置为在完成时不被删除以及返回到动画之前的状态。

# backbone.js - 带下划线模板变量的 Haml 插值

> ID：14387537
> 
> 赞同：0
> 
> 时间：2013-01-17T20:27:41.700
> 
> 标签：backbone.js, haml, underscore.js

我试图在我的 haml 模板中输出一个下划线模板变量，但我没有任何运气。

HTML 没有被转义，所以我似乎无法弄清楚为什么下划线变量没有呈现。

**HAML - 完整模板**

```
%script{:type => "text/template", :id => "user_list_template"}
  %h4 Users
  #test
  %table.table.table-bordered
    %thead
      %tr
        %th #
        %th Name
        %th Nickname
        %th
          %tbody
          {{ _.each( users, function(user) { }}
            %tr
              %td {{= user.get('id') }}
              %td {{= user.get('name') }}
              %td {{= user.get('nickname') }}
              %td 
                %a.btn{:href => "{{= user.get('nickname') }}"}
                  View User
          {{ }); }} 
```

**来源**

```
<tr>
  <td>9</td>
  <td>TacoHell</td>
  <td>TacoHelll</td>
  <td>
    <a class="btn" href="<%= user.get('nickname') %>">
      View User
    </a>
  </td>
</tr> 
```

**模板的 Console.log**

```
<h4>Users</h4>
<div id='test'></div>
<table class='table table-bordered'>
  <thead>
    <tr>
      <th>#</th>
      <th>Name</th>
      <th>Nickname</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {{ _.each( users, function(user) { }}
    <tr>
      <td>{{= user.get('id') }}</td>
      <td>{{= user.get('name') }}</td>
      <td>{{= user.get('nickname') }}</td>
      <td>
        <a class='btn' href="{{= user.get('nickname') }}">
          View User
        </a>
      </td>
    </tr>
  {{ }); }}
  </tbody>
</table> 
```

我已通读先前提出的问题，但无法使其正常工作。有任何想法吗？

*   [使用 HAML 插入 underscore.js 模板](https://groups.google.com/forum/#!msg/haml/eYSx8rtk5E0/ACx4KSeWGHcJ)
*   [使用 HAML 呈现“<%%=”](https://stackoverflow.com/questions/12249252/rendering-with-haml)
*   [使用 Underscore.js 插入 html 属性](https://stackoverflow.com/questions/8332389/interpolate-inside-html-attributes-with-underscore-js)

**编辑 1** 添加了完整模板

**编辑** 模板的 2 console.log

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:35:52.537

这与其说是一种解决方案，不如说是一种解决方法，但一种替代方法是为您的下划线模板使用不同的语法（不涉及`<`and的语法`>`）。如果你看：

[http://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template)

您会发现它们提供了替代 Django/Mustache 样式模板语法的示例：

> 如果 ERB 样式的分隔符不是您喜欢的，您可以更改 Underscore 的模板设置以使用不同的符号来衬托内插代码。定义一个插值正则表达式以匹配应逐字插入的表达式，一个转义正则表达式以匹配应在 HTML 转义后插入的表达式，以及一个评估正则表达式以匹配应在不插入结果字符串的情况下计算的表达式。您可以定义或省略这三者的任意组合。例如，要执行 Mustache.js 样式模板：

```
_.templateSettings = {
  interpolate : /\{\{(.+?)\}\}/g
};

var template = _.template("Hello {{ name }}!");
template({name : "Mustache"});
=> "Hello Mustache!" 
```

当然，如果你正在考虑寻找更强大的模板系统，那么放弃`_.template`并使用 Mustache、Handlebars 或类似的模板系统肯定不会有什么坏处。但是，如果您对 Underscore 感到满意，`_.templateSettings.interpolate`将允许您在没有`<`or的情况下使用它`>`。

# prolog - Prolog - 省略 [N-1,2] 范围内的所有主要数字

> ID：14387539
> 
> 赞同：-1
> 
> 时间：2013-01-17T20:27:49.733
> 
> 标签：prolog, primes

我试图编写一个函数 -`noPrime(X,Result)`它给出了 range 中所有非主数的列表`[X-1,2]` 。

例如 -

```
noPrime(9,Result).
Result = [8,6,4] 
```

到目前为止，我尝试了以下操作 -

```
nprimes(4,[]) :- !.
nprimes(X,[H|Rest]) :- H is X-1,nprimes(H,NewRest),
    ( isPrime(H) -> Rest = NewRest; Rest = [H|NewRest]). 
```

但它给了 -

```
Result = [8, 8, 7, 6, 6, 5, 4, 4]. 
```

似乎它复制了 non-primary 并给出了一次 primary 。

**isPrime** - 是我自己的功能，效果很好。

你能发现这里有什么问题以及如何纠正它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:33:50.870

您总是在 的第二个参数的开头添加元素`nprimes/2`。然后，如果元素是素数，则第二个参数仍然有元素；如果元素不是素数，它将被添加两次。

它应该是：

```
nprimes(X,Rest) :- H is X-1,nprimes(H,NewRest),
    ( isPrime(H) -> Rest = NewRest; Rest = [H|NewRest]). 
```

# python - argparse 中的 Python optparse make_option() 等效项

> ID：14387540
> 
> 赞同：2
> 
> 时间：2013-01-17T20:27:52.713
> 
> 标签：python, argparse, optparse

从 OPTPARSE 库参考：

```
option_list = [
    make_option("-f", "--filename",
                action="store", type="string", dest="filename"),
    make_option("-q", "--quiet",
                action="store_false", dest="verbose"),
    ]

parser = OptionParser(option_list=option_list) 
```

* * *

与上面的示例一样，我想使用 make_option 创建一个选项列表并将其传递给一个装饰器，该装饰器实例化解析器并添加参数。

如何在 argparse 中实现这一点？除了 parse_args() 之外，还有其他方法可以填充解析器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:33:13.903

您可以提供[父解析器](http://docs.python.org/2.7/library/argparse.html#parents)`argparse.ArgumentParser`列表：

```
parent = argparse.ArgumentParser(add_help=False)
parent.add_argument('-f','--filename')
parent.add_argument('-q','--quiet',action='store_false',dest='verbose')

parser = argparse.ArgumentParser(parents=[parent])
...
namespace = parser.parse_args() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:38:03.037

```
def process_args():
    parser = argparse.ArgumentParser()
    parser.add_argument('-f', '--filename', dest='filename', type=string, action='store')
    args = parser.parse_args()
    return args

if __name__ == '__main__':
    args = process_args() 
```

# php - PHP未按预期从MySQL查询返回结果

> ID：14387543
> 
> 赞同：1
> 
> 时间：2013-01-17T20:28:18.607
> 
> 标签：php, mysql, wamp

我正在尝试创建一个依赖于数据库中某些信息的变量。我正在尝试生成一个`$path`存储路径的变量，具体取决于从数据库中恢复的信息。

```
$linkid = mysql_connect('localhost','user','password');
mysql_select_db("table", $linkid);
$variable = "00001";
$groupID = null;
$temp = mysql_query("SELECT groupID FROM table WHERE memberID='$variable'", $linkid);

while ($row = mysql_fetch_row($temp)){
    global $groupID;
    foreach ($row as $field){
        $groupID = $field;
    }
}

....

$path = "C:\WAMP\www\project\\" . $groupID;
$dir_handle = @opendir($path) or die('Unable to open $path'); 
```

这背后的想法`$variable`是在 PHP 运行之前设置，但是它设置为`00001`用于测试。理想的情况是`$path`应该相等`C:\WAMP\www\project\00001\`。目前，当我`echo`返回时，`$path`我得到的只是原始路径，没有`$groupID`添加到末尾。

我还收到消息“mysql_fetch_row() 期望参数 1 是资源”，但我之前使用过这个方法来检索信息，它工作得很好，我以同样的方式设置我的表，所以我不认为问题就在那里。

我有一种感觉，我错过了一些明显的东西，所以任何帮助表示赞赏。这不是为了作业或任何与学校相关的事情（只是尝试一些东西以了解更多信息），所以请自己纠正并解释原因：）

此外，只有一个`memberID`与`$variable`.

哦，我知道我的变量名令人震惊，但它们只是在这里，在我的实际代码中它们是不同的，所以请不要批评：p

**编辑：** SQL 查询是正确的，遵循 BT634 的建议并在 phpMyAdmin 上运行它时，我得到了我想要和期望的 groupID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:18:48.707

```
mysql_select_db("table", $linkid) 
```

实际上应该是

```
mysql_select_db("database_name", $linkid) 
```

因为您正在连接到包含表的数据库而不是表本身。

另外，尝试`mysql_result($temp,0)`代替while循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T21:10:00.210

找出它*肯定*在运行的查询，并将其粘贴到普通的 MySQL 客户端以确保您的查询是正确的。

只需在定义“$variable”后执行此操作

```
exit("SELECT groupID FROM table WHERE memberID='$variable'"); 
```

然后将输出复制到 MySQL 客户端（或命令行中的 MySQL）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T21:18:49.000

首先，您没有指定连接中要连接的**数据库**- 您指定的是什么**table**。您可能还想检查查询返回的行数：

```
$temp = mysql_query("SELECT groupID FROM table WHERE memberID='$variable'", $linkid);
echo mysql_num_rows($temp); 
```

如果它仍然抱怨`$temp`不是有效资源，请将您的 MySQL 连接代码更改为：

```
// Establish connection
$con = mysql_connect("localhost","peter","abc123");
if (!$con) die('Could not connect: ' . mysql_error());
mysql_select_db("my_db", $con);

// Make your query
$result = mysql_query("SELECT groupID FROM table WHERE memberID='$variable'");

// Find out what the value of the query is (i.e. what object/resource it is)
var_dump($result); 
```

* * *

一旦您知道 MySQL 正在返回有效数据，请提取您想要的值。您不必使用全局变量：

```
while ($row = mysql_fetch_row($temp)){
    $groupId = $row[0];
}

// Use $groupId however you please... 
```

要记住的一件事是[`mysql_fetch_row`](http://php.net/manual/en/function.mysql-fetch-row.php)它将返回

```
array
(
   0 => '...'
) 
```

虽然[`mysql_fetch_assoc`](http://php.net/manual/en/function.mysql-fetch-assoc.php)将返回：

```
array
(
   'groupId' => '...'
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T21:19:32.267

尝试这样的事情：

```
global $groupID;

$linkid = mysql_connect('localhost','user','password');
mysql_select_db("table", $linkid);
$variable = "00001";
$groupID = null;
$sql = "SELECT groupID FROM table WHERE memberID='$variable'";
$temp = mysql_query($sql, $linkid) or die(mysql_error());

$row = mysql_fetch_row($temp);
if ($row) {
    $groupID = $row['groupID'];
} 
```

如果您正在检索单个值，并且保证它是唯一的，那么循环结构是不必要的。我添加了一个检查，以确保在出现问题时查询退出并出现错误 - 在任何地方都这样做是理想的，所以例如也这样做`mysql_select_db`。

# android - 谷歌地图没有显示任何东西

> ID：14387549
> 
> 赞同：1
> 
> 时间：2013-01-17T20:28:45.940
> 
> 标签：android, google-maps

我正在使用谷歌地图，我想通过其经度和纬度值在地图中显示一个地址。我的代码是这样的：

```
 String coordinates[] = { getString(R.string.lat), getString(R.string.lon) };
    String url = "geo:" + coordinates[0] + "," + coordinates[1] + "?q=" + coordinates[0] + "," + coordinates[1];
    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    startActivity(i); 
```

字符串值为：

```
<string name="lat">39.4457295</string>
<string name="lon">-76.81679639999999</string> 
```

但它不是地图，而是显示在我的模拟器中：

![地图不显示](../Images/a43b1d817315ab9d385b2c2c2edc0716.png)

我是地图 API 的新手。我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:19:13.633

好的，首先如果你在你的模拟器中得到它，那么你可能使用了错误的谷歌地图 API。谷歌最近刚刚发布了一个新的安卓地图 API。[新的谷歌地图 API](https://developers.google.com/maps/documentation/android/)

截至目前，新的 google maps api 尚未在模拟器中运行。这是根据 api 资源，也可以在[此链接](https://stackoverflow.com/questions/14040185/running-google-maps-v2-on-android-emulator)中找到显然有一些人使地图 api 在模拟器中工作，但我个人只是在真实设备上进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:09:26.053

确保您的地图键设置正确，并且您正在调试模式下启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:43:34.760

你的代码对我来说太复杂了。你的地理编码是正确的，我可以在韩国首尔的手机上很好地看到你的位置。使用 Intent 显示谷歌地图时，除了在手机中设置 WiFi 或 3G 外，不需要任何权限。在使用 Intent 方法在手机或模拟器上显示谷歌地图时，我建议您如下；

请注意，您必须将 Build Target 设置为“Google APIs”，而不是“Android xx 版本”，特别是在模拟器的 AVD 上。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("geo:"+39.4457295+","+-76.81679639999999));
startActivity(intent); 
```

我将您的地理编码添加到上面。使用上面的代码，我在我住在韩国首尔的手机上看到了你的位置。您的地理位置是 Reisterstown 附近的 Owings Ct？...对吗？

# java - 如何在android中实时计算按键

> ID：14387561
> 
> 赞同：0
> 
> 时间：2013-01-17T20:29:23.037
> 
> 标签：java, android, keypress

你怎么能实时计算按键次数？还是通过按键？这是我的代码：

```
public class MyActivity extends Activity implements View.OnClickListener, View.OnKeyListener {
    /**
     * Called when the activity is first created.
     */
    EditText ed

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

        ed=(EditText)findViewById(R.id.editText);
       ed.setOnKeyListener(this);
       }

   @Override
    public boolean onKey(View view, int i, KeyEvent keyEvent) {

            keyCounter++;
      Log.d("key","" + keyEvent.getKeyCode());

     return super.onKeyUp(i, keyEvent) ;
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        switch (keyCode) {
            case KeyEvent.KEYCODE_B:

                keyCounter++;
                return true;
        }

        return super.onKeyUp(keyCode, event);
    }
} 
```

我尝试了 onkeyup 和 on key .. 但它没有用；我敬酒 keyCounter 的值，但仍然为零。任何人都知道如何在android中获取按键次数？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:36:04.967

您是在尝试使用真正的键盘还是软件键盘？

> android.view.View.OnKeyListener
> 
> 类概述
> 
> **将硬件**按键事件分派到此视图时要调用的回调的接口定义。

看看您是否可以改用 TextChangedListener 。

```
myEditText.addTextChangedListener(new TextWatcher(){
        public void afterTextChanged(Editable s) {}
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            //do stuff
        }

    }); 
```

其他事情：

1) 使用 Log.d 而不是 Toast。

2) 试试keyCounter++；无条件查看是否调用了onKey。

3) 将 return false/true 更改为 return super.onKey(keyCode, event)

# google-maps - Google Maps 使用 KML 制作地标动画

> ID：14387566
> 
> 赞同：2
> 
> 时间：2013-01-17T20:29:34.567
> 
> 标签：google-maps, kml

我有一个嵌入了谷歌地图视图的 html 文件，我正在使用 JavaScript 将单独的 kml 文件的数据加载到谷歌地图中。在 KML 文件中，我有汽车路线的纬度/经度坐标，我使用 LineString 函数将坐标连接成一条线。我想知道现在如何为我给定坐标绘制的 LineString 上的地标设置动画。

我看过[这个](http://www.kmcgraphics.com/google/)例子，这就是我想要做的，但这个例子没有使用 KML 文件。根据我自己的测试和[此](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/WDfrSC5GKRc)线程，[此](http://code.google.com/apis/kml/documentation/kmlreference.html#gxtrack)示例将为由纬度和经度坐标给出的路线设置动画，但该命令仅受 Google 地球支持，而不是 Google 地图。`gx:track`

**本质上，我试图通过基于网络的谷歌地图界面上的预定坐标为地标设置动画。**这是我的一些代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="2.2.xsd">
<Document>
<Placemark id="car">
 <name>Initial position of car</name>
 <description>Latitude: 31.2844 Longitude: 121.436</description>
 <Point>
 <coordinates>121.436,31.2844</coordinates>
 </Point>
 </Placemark>
<Placemark><LineString><coordinates>
121.436,31.2844,0 
121.435,31.2857,0 
121.435,31.2863,0 
...more coordinates here...
</coordinates></LineString></Placemark>
</Document>
</kml> 
```

我将如何沿线串移动 ID 为“汽车”的地标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:12:24.163

您可以从 KML 加载您的地标/线条，但在谷歌地图中您无法定义动画（如游览）。要完成您的要求，您必须使用基于 KML 文件内容的 JavaScript API 来操作地图。也就是说-您发布的示例是一个很好的起点。

另外 - 我现在正在做类似的事情（将成为下个月某个时间交付的一部分 - 两个）。如果你打败了我完成它，你应该发回任何经验教训。

# drupal-7 - Drupal 7 面板在面板之间共享数据

> ID：14387567
> 
> 赞同：0
> 
> 时间：2013-01-17T20:29:35.393
> 
> 标签：drupal-7, share, panels, panes

我为 Drupal 7 Panels 模块创建了一堆自定义内容类型。一切都很完美。我想知道是否有办法在我的窗格之间共享数据。例如，我进行了布局设置，以便在右侧有几个窗格形成侧边栏。我想将数据从一个侧边栏窗格传递到另一个。是否有一个可以存储数据的整体“页面”变量，以便页面上的任何窗格都可以访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T23:43:09.513

您可以使用面板页面的上下文设置来公开各种上下文，然后使用自定义内容窗格、启用替换模式以及将这些模式与自定义窗格一起使用。

如果您对任何此类内容使用视图，您也可以使用面板上下文作为视图的参数。

# c# - Razor Foreach 型号列表

> ID：14387568
> 
> 赞同：0
> 
> 时间：2013-01-17T20:29:36.813
> 
> 标签：c#, asp.net-mvc-3, razor

我要做的是在剃须刀页面上的列表中显示每个项目：

_layout.cshtml

```
<div id="LeftSidebar">
    <ul>
        @foreach (var x in MenuItems.Items)
        {
            <li><a href="#">@x.ItemName </a></li>
        }
    </ul>
</div> 
```

菜单.cs

```
public class Menu
{
    public string ItemName { get; set; }
    public string Alt { get; set; }

    public Menu()
    {

    }

    public Menu(string itemName, string alt)
    {
        ItemName = itemName;
        Alt = alt;
    }

}

public class MenuItems
{
    public static List<Menu> Items = new List<Menu>();
    public MenuItems()
    {
        Items.Add(new Menu
           {
               Alt = "test item",
               ItemName = "item 1",
           });
        Items.Add(new Menu
        {
            Alt = "test item",
            ItemName = "item 2",
        });
    }
} 
```

这就是我到目前为止所拥有的，但它没有显示任何内容？

谢谢后拉汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:34:13.363

这是因为您永远不会创建 MenuItems 类的实例，因为您只是访问类中的静态字段 - 因此构造函数没有运行并添加两个测试项。

尝试用静态构造函数替换 MenuItems 构造函数：

```
public class MenuItems
{
    public static List<Menu> Items;

    static MenuItems()
    {
       Items = new List<Menu>();

       Items.Add(new Menu
       {
           Alt = "test item",
           ItemName = "item 1",
       });
       Items.Add(new Menu
       {
            Alt = "test item",
            ItemName = "item 2",
        });
     }
} 
```

这应确保当您使用 MenuItems.Items 访问 Items 字段时填充它。

# javascript - 将 LI 元素转换为 DIV

> ID：14387572
> 
> 赞同：2
> 
> 时间：2013-01-17T20:29:58.320
> 
> 标签：javascript, jquery, ajax

我有一个嵌套 div 内的项目列表，其中包含 parent、grand parent 和曾祖父母`div`。html 代码如下所示：

```
<div class="marketing">
  <div class="module-surround">
    <div class="module-content">
      <div class="k2ItemsBlock">
        <ul>
          <li><div>4</div></li>
          <li><div>5</div></li>
          <li><div>6</div></li>
          <li><div>7</div></li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

我想将所有列出的项目转换为父 div 并使用所有列出的项目来替换曾祖父 div，以便整体代码如下所示：

```
<div><div>4</div></div>
<div><div>5</div></div>
<div><div>6</div></div>
<div><div>7</div></div> 
```

在我的逻辑上，我想使用 jQuery 来实现这一点，到目前为止，我能够将所有元素放入 .K2ItemsBloc ul 中列出的项目中，并用列表替换 div.marketing，我的 jQuery 代码这样做看起来像这样

```
//1\. Get all content in K2ItemsBlock ul into a variable called mlist
    var mlist = $(".k2ItemsBlock ul").contents()
//2\. Change all li HTML elements inside the variable mlist to div

//3\. Replace div.marketing with the variable mlist
    $(".marketing").replaceWith(mlist); 
```

上面没有任务 #2 的 jQuery 代码行将我的原始代码转换为

```
<li><div>4</div></li>
<li><div>5</div></li>
<li><div>6</div></li>
<li><div>7</div></li> 
```

我现在能弄清楚的是在用它替换 div.marketing 之前转换变量 mlist 中的所有 li 元素的语法。

有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:38:35.000

不确定 div 是否是元素的有效子`ul`元素.. 但你可以这样做

```
$('.k2ItemsBlock li>div').unwrap() // <--- removes the li
                      .wrap('<div/>'); // <-- adds the div 
```

[小提琴](http://jsfiddle.net/8cnxt/)

**编辑：**我编辑添加`li>div`只是为了使其更具体

如果您只想影响顶级 li/divs.. 将您的选择器更改为此

```
$('.k2ItemsBlock > ul > li > div') // <--  ">" is direct child selector 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:58:45.560

```
// Get an array of li elements
var mlist = $(".k2ItemsBlock ul li");
// new array of div's containing the content of li elements
var dlist = mlist.map(function(i, val){return "<div>" + $(val).html() + "</div>";});
// join div array into a single string
var result = dlist.toArray().join(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:34:48.833

一个完整的解决方案是：

```
var marketing = $(".marketing");
var content = marketing.children().remove();
content.find(".k2ItemsBlock li>div").unwrap().wrap("<div>");
marketing.replaceWith(content.find(".k2ItemsBlock li>div"); 
```

这应该抓取除顶级 div 之外的所有内容。从 dom 中删除它，在 Javascript 中执行操作以提高效率。然后用生成的 html 替换顶级 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:36:40.573

```
mlist = mlist.replace('/li/g','div'); 
```

应该这样做。替换可能会更好`<li>`，`</li>`因此您不会意外替换实际的字母 li 如果有的话。

```
mlist = mlist.replace('/<li>/g','<div>').replace('/<\/li>/g','</div>'); 
```

你明白了。

# java - 基于文本的战舰敌人 AI 无法正常工作 - Java

> ID：14387573
> 
> 赞同：-2
> 
> 时间：2013-01-17T20:29:58.683
> 
> 标签：java, artificial-intelligence

我正在制作一个基于文本的战舰游戏，玩家与电脑对战。3 艘随机 3 单位长的船被放置在板上，如果他的最后一次猜测成功，我希望计算机能够猜测他最后一次猜测的位置。（但我希望它能够工作，以便他一直在同一个地方猜测直到他被击中，并一直在那儿猜测直到他得到整艘船或 3 次击中）它有点工作；如果命中，计算机将在他最后一次猜测附近进行猜测，但如果他错过了那个猜测，那么他会再次开始随机猜测。有人可以帮帮我吗？-getGuess() 方法是带有 AI 的方法-

```
/*
 * computer class to handle computers guesses/ etc
 * most methods are copied from player class, but slightly altered to account for variable names
 * Methods that havent been copied have comments
 */ 

public class Computer{
  static int firstCo, secondCo;
  static int[] guessedHits={7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7};
  //int array to store last guess
  static int[] lastGuess = new int[2];
  //int array to store current guess
  static int[] guess=new int[2];

  public static int[] computerShip1=new int[6];
  public static int[] computerShip2=new int[6];
  public static int[] computerShip3=new int[6];

  /*
   * method to choose random guess for computer - but make it guess around last guess if last guess was a hit
   * return guess coordinate numbers in an array
   */
  public static int[] getGuess(){
    int[] guess=new int[2];
    int firstCo, secCo;
    int ran; //random int between 0 and 1 - will help to make random choices for guesses
    if(isHit(lastGuess[0],lastGuess[1])){
      ran=(int)(Math.random()*2);
      //if ran is 0 and last guesses x coordinate was correct, set next guess to last x, and next y to last y +1
      if((ran==0 && lastGuess[0]==Player.playerShip1[0]) || (ran==0 && lastGuess[0]==Player.playerShip1[2]) || (ran==0 && lastGuess[0]==Player.playerShip1[4])){
        guess[0]=lastGuess[0];
        guess[1]=lastGuess[1]+1;
      //if ran is 1 and last guesses x coordinate was correct, set next guess to last x, and next y to last y -1
      }else if((ran==1 && lastGuess[0]==Player.playerShip1[0]) || (ran==1 && lastGuess[0]==Player.playerShip1[2]) || (ran==1 && lastGuess[0]==Player.playerShip1[4])){
        guess[0]=lastGuess[0];
        guess[1]=lastGuess[1]-1;
      //if ran is 0 and last guesses y coordinate was correct, set next guess to last y, and next x to last x +1
      }else if((ran==0 && lastGuess[1]==Player.playerShip1[1]) || (ran==0 && lastGuess[1]==Player.playerShip1[3]) || (ran==0 && lastGuess[1]==Player.playerShip1[5])){
        guess[0]=lastGuess[0]+1;
        guess[1]=lastGuess[1];
      //if ran is 1 and last guesses y coordinate was correct, set next guess to last y, and next x to last x -1
      }else if((ran==1 && lastGuess[1]==Player.playerShip1[1]) || (ran==1 && lastGuess[1]==Player.playerShip1[3]) || (ran==1 && lastGuess[1]==Player.playerShip1[5])){
        guess[0]=lastGuess[0]-1;
        guess[1]=lastGuess[1];
      }
    return guess;
    }else{
      guess[0]=(int)(Math.random()*7);
      guess[1]=(int)(Math.random()*7);
      return guess;
    }
  }

  public static boolean isHit(int firstC, int secC){
    for(int i=0; i<Player.playerShip1.length; i=i+2){
      if(firstC==Player.playerShip1[i] && secC==Player.playerShip1[i+1]){
        return true;
      }
      if(i==4){
        break;
      }
      }
    for(int i=0; i<Player.playerShip2.length; i=i+2){
      if(firstC==Player.playerShip2[i] && secC==Player.playerShip2[i+1]){
        return true;
      }
        if(i==4){
        break;
        }
      }

    for(int i=0; i<Player.playerShip3.length; i=i+2){
      if(firstC==Player.playerShip3[i] && secC==Player.playerShip3[i+1]){
        return true;
      }
      if(i==4){
        break;
      }
      }

    return false;
  }

  public static void addHits(int firstC, int secC){
    int index=-1;
    for(int i=0; i<guessedHits.length; i++){
      if(guessedHits[i]==7){
        index=i;
        break;
      }
    }
    guessedHits[index]=firstC;
    guessedHits[index+1]=secC;
  }

  public static void setComputerShips(){
   int randX, randY;
   int direction; //will be random int 0-1, determines direction ship will extend(up/down, left/right)

   randX=(int)(Math.random()*7);
   randY=(int)(Math.random()*7);
   direction=(int)(Math.random()*2);

   computerShip1[0]=randX;
   computerShip1[1]=randY;
   if(direction==0){//extend upwards or downwards 2 units(y values change, x stays the same)
    computerShip1[2]=randX;
    computerShip1[4]=randX;
    if(randY>3){//if y value is greater than 3, has to extend down or it wont fit
     computerShip1[3]=randY-1;
     computerShip1[5]=randY-2;
    }else if(randY<2){//if y value is less than 2, has to extend up or it wont fit
     computerShip1[3]=randY+1;
     computerShip1[5]=randY+2;
    }else{//if direction doesnt matter, just extend upwards
     computerShip1[3]=randY+1;
     computerShip1[5]=randY+2;
    }
   }else if(direction==1){//extends left or right 2 units(y values stay the same, x changes)
    computerShip1[3]=randY;
    computerShip1[5]=randY;
    if(randX>3){//if x is greater than 3, must extend left or it wont fit
     computerShip1[2]=randX-1;
     computerShip1[4]=randX-2;
    }else if(randX<2){//if x is less than 2, must extend right or it wont fit
     computerShip1[2]=randX+1;
     computerShip1[4]=randX+2;
    }else{//if direction doesnt matter, just extend right
     computerShip1[2]=randX+1;
     computerShip1[4]=randX+2;
    }
   }
   //do same for both other ships
   do{
   randX=(int)(Math.random()*7);
   randY=(int)(Math.random()*7);
   }while((randX==computerShip1[0] && randY==computerShip1[1])||(randX==computerShip1[2]&&randY==computerShip1[3])||(randX==computerShip1[4]&&randY==computerShip1[5]));
   direction=(int)(Math.random()*2);

   computerShip2[0]=randX;
   computerShip2[1]=randY;
   if(direction==0){
    computerShip2[2]=randX;
    computerShip2[4]=randX;
    if(randY>3){
     computerShip2[3]=randY-1;
     computerShip2[5]=randY-2;
    }else if(randY<2){
     computerShip2[3]=randY+1;
     computerShip2[5]=randY+2;
    }else{
     computerShip2[3]=randY+1;
     computerShip2[5]=randY+2;
    }
   }else if(direction==1){
    computerShip2[3]=randY;
    computerShip2[5]=randY;
    if(randX>3){
     computerShip2[2]=randX-1;
     computerShip2[4]=randX-2;
    }else if(randX<2){
     computerShip2[2]=randX+1;
     computerShip2[4]=randX+2;
    }else{
     computerShip2[2]=randX+1;
     computerShip2[4]=randX+2;
    }
   }
   do{
   randX=(int)(Math.random()*7);
   randY=(int)(Math.random()*7);
   }while((randX==computerShip1[0] && randY==computerShip1[1])||(randX==computerShip1[2]&&randY==computerShip1[3])||(randX==computerShip1[4]&&randY==computerShip1[5])||(randX==computerShip2[0] && randY==computerShip2[1])||(randX==computerShip2[2]&&randY==computerShip2[3])||(randX==computerShip2[4]&&randY==computerShip2[5]));
   direction=(int)(Math.random()*2);

   computerShip3[0]=randX;
   computerShip3[1]=randY;
   if(direction==0){
    computerShip3[2]=randX;
    computerShip3[4]=randX;
    if(randY>3){
     computerShip3[3]=randY-1;
     computerShip3[5]=randY-2;
    }else if(randY<2){
     computerShip3[3]=randY+1;
     computerShip3[5]=randY+2;
    }else{
     computerShip3[3]=randY+1;
     computerShip3[5]=randY+2;
    }
   }else if(direction==1){
    computerShip3[3]=randY;
    computerShip3[5]=randY;
    if(randX>3){
     computerShip3[2]=randX-1;
     computerShip3[4]=randX-2;
    }else if(randX<2){
     computerShip3[2]=randX+1;
     computerShip3[4]=randX+2;
    }else{
     computerShip3[2]=randX+1;
     computerShip3[4]=randX+2;
    }
   }
  }

  public static boolean hasWon(){
    if(guessedHits[17]!=7)
      return true;
    else
      return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:57:19.590

您的 getGuess() 函数是您所追求的，对吗？

1）你永远不会考虑两次猜测同一个地点的时间。创建一个布尔值，确定您尝试猜测的坐标是否尚未被猜测。

2）您保持船舶坐标的方法非常尴尬，其中 0,2,4 是 X 坐标，而 1,3,5 是 Y 坐标？你最好创建一个`Ship`处理坐标的类，并像 isHit 这样检查。

```
public class Ship {
    int[] xCoords = new int[3];
    int[] yCoords = new int[3];

    public boolean isHit(int x, int y) {
      return (Arrays.asList(xCoords).contains(x) && Arrays.asList(yCoords).contains(y));
    }
} 
```

那么你也能：

```
if (Player.ship1.isHit(guess[0],guess[1])) {
  ....
} 
```

在它的核心，你有一些路要走。如果您开始解决问题，然后返回您可能遇到的特定问题，您将在这里得到更好的回应。在给出代码片段时尽量简洁，因为没有多少人会花很多时间通过整个课程来找到一两行给出的问题。

祝你好运！

---PS---

大约 3-4 年前，我用一些相当先进的 AI 编写了一款战舰游戏。我会在这里链接它：

[https://github.com/GrahamBlanshard/AI-Battleship/blob/master/prograham/battleship/player/AIPlayer.java](https://github.com/GrahamBlanshard/AI-Battleship/blob/master/prograham/battleship/player/AIPlayer.java)

首先，我为...蹩脚的代码道歉（我发誓我是一个年轻得多的程序员！）。如果您想查看它以获取提示，那很好。简要说明：

在它的核心，您需要创建某种形式的数据类型来存储他的命中。一旦“命中”得分，您将其推送到数据类型，我使用了`Stack`. 成功命中的炮弹将存储在堆栈中，直到船沉没。那时，它会从属于刚刚沉没的船的堆栈中删除镜头。如果堆栈上仍有射击，它知道在此过程中它已经击中了第二艘船并继续在该区域猜测。

为了实现这一点，它经历了几个阶段：

1）随机射击直到命中。

2）围绕那个镜头射击（使用随机（4）调用来获得N / S / E / W方向） - 继续这样做直到你获得第二个镜头

3）用两点创建一条“线”并沿着它开火，直到船沉没或......

4) 反转线，向另一个方向射击。

这会给您一个良好的合作开始吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:39:49.243

有很多代码要看。所以现在我将给出一些我想到的一般性建议：

当计算机 AI 获得“命中”时，设置“全局”标志（更可能是类变量）并“记住”命中发生的位置。在接下来的回合中，以某种预定的顺序（比如北、南、东、西）猜测相邻的方格，直到找到另一个命中。然后设置另一个标志，并在下一轮猜测与第二次击中相同的方向。仅当找到所有三个命中时才应重置初始标志。这应该可以解决后续未命中导致计算机 AI 再次开始随机猜测的问题。

# apache - HTTP 标头自动设置

> ID：14387576
> 
> 赞同：1
> 
> 时间：2013-01-17T20:30:05.517
> 
> 标签：apache, http

我开始正确地了解http。

我在灯组工作。

在命令行上，我请求一个本地页面，该页面将由 apache 提供，以查看返回的标题。

```
curl -i local.testsite 
```

我请求的页面没有内容，我没有设置任何标题，但响应中已经发送了很多标题，例如：

```
HTTP/1.1 200 OK
Date: Thu, 17 Jan 2013 20:28:52 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: PHP/5.3.10-1ubuntu3.4
Vary: Accept-Encoding
Content-Length: 0
Content-Type: text/html 
```

所以如果我没有设置这些，apache会自动设置这些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:33:14.670

是的，Apache 默认设置这些。顺便说一句，如果你只关心标题，你应该使用

```
curl -I local.testsite 
```

`-I`仅返回标头（HTTP HEAD 请求），这样即使页面上有内容，您也只会获得标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T20:32:44.680

有些是由 PHP 设置的：

*   标`X-Powered-By`头由`expose_php`INI 设置设置。
*   标`Content-Type`头由`default_mimetype`INI 设置设置。

其他由 Apache 设置：

*   标`Server`头由`ServerSignature`指令设置。
*   标`Vary: Accept-Encoding`头通常在`mod_deflate`启用时发送。

`Date`并且`Content-Length`不可配置，因为它们是 HTTP 规范的一部分。[包含为 MUST](https://www.rfc-editor.org/rfc/rfc2616#section-14.18)`Date`（在某些情况下除外）和[SHOULD](https://www.rfc-editor.org/rfc/rfc2616#section-14.13)。`Content-Length`

另请参阅[如何从 apache 中删除日期标头？](https://stackoverflow.com/questions/2519743/how-to-remove-date-header-from-apache)以及[如何使用 Apache 禁用 Content-Length 响应标头？](https://stackoverflow.com/questions/4847238/how-to-disable-the-content-length-response-header-with-apache).

# ruby-on-rails - 菜鸟的Rails身份验证策略

> ID：14387577
> 
> 赞同：6
> 
> 时间：2013-01-17T20:30:10.273
> 
> 标签：ruby-on-rails, authentication, single-sign-on, omniauth, access-token

希望这不是太宽泛，但经过大量谷歌搜索后，我不确定从哪里开始。我正在寻找介绍性/新手概述，以帮助我开始为 rails 3 应用程序构建身份验证实现。

基本技术要求：

*   Rails 3 应用程序托管在第三方服务 (heroku) 上
*   需要使用特定的外部私有 SSO 服务对用户进行身份验证。
*   rails 应用程序中没有本地用户数据库或模型。
*   身份验证是基于令牌的，这意味着需要读取一个特殊的 cookie，并将令牌传递回 SSO 服务器（不是基于 Rails）。
*   我无法控制 SSO 服务器或基础架构。
*   SSO 服务器的信任是隐含的，并且不希望维护用户、密码或敏感信息的本地数据库。用户信息仅在会话期间存在，并且 SSO 服务器具有权威性。
*   会话令牌信息基于 cookie，并在浏览器会话期间存在。

我正在寻找基本示例/教程/策略/解释该过程如何在上述设置的 Rails 中工作。我希望该过程对于用户来说是无缝的，其工作流基本上如下所示：

* * *

*   导航到 Rails 应用程序 -->
*   将未经身份验证的用户重定向到 SSO 服务器 -->
*   通过远程 SSO 服务器登录和验证 -->
*   回调/重定向到 Rails 应用程序 -->
*   捕获从 SSO 服务器传回的用户信息并在 rails 应用程序中加载受保护的资源

* * *

策略是使用私有 SSO 资源完全自定义的，并且不使用已发布的身份验证机制（换句话说，不是 Facebook、Google、Twitter、OAuth 等）。

任何有关术语、连贯教程、示例的帮助将不胜感激。

**编辑/更新：**

更具体地说，我还在寻找如何创建omniauth 自定义开发者策略的良好文档。一些教程介绍了与任意 SSO 服务器通信、从 cookie 中读取令牌以及完成身份验证握手和回调/重定向所需的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:17:24.110

这不是一个真正的答案，但我发布这个是因为评论是行不通的。我不知道任何全面的指南，所以我建议您这样做：

1.  了解 Omniauth 的工作原理。有一个很棒的[Railscast](http://railscasts.com/episodes/241-simple-omniauth)关于使用 Twitter 进行身份验证。这真的很简单，它会让你进入事情的流程。

2.  构建您自己的 Omniauth 策略。转到[Omniauth Strategies](https://github.com/intridea/omniauth/wiki/List-of-Strategies)列表并滚动到**Developer Strategies**。在该表中，选择可用于连接 SSO 服务器的策略。

理想情况下，您将能够使用 OAuth2，并且有一些指南讨论了实施您自己的 OAuth 策略：

1.  [自定义 OAuth 1.0 策略以连接到 Rdio](http://anti-pattern.com/adding-a-new-strategy-to-omniauth)
2.  [Intridea（Omniauth 的创建者）的自定义 OAuth 2.0 策略](https://github.com/intridea/omniauth-oauth2#creating-an-oauth2-strategy)
3.  [Heroku 连接到 Force.com 的自定义 OAuth 2.0 策略](https://devcenter.heroku.com/articles/omniauth-and-force-com)

但既然你不能，只需快速浏览一下这些指南。没有任何细节，（对我来说）很难提供更多帮助，但希望其他人会填写细节。

# facebook - 如何使用 FQL 浏览喜欢的帖子

> ID：14387578
> 
> 赞同：0
> 
> 时间：2013-01-17T20:30:14.283
> 
> 标签：facebook, facebook-fql

我想获取给定帖子的所有喜欢的列表。我遇到的问题是没有可以用来“翻页”的时间戳字段，并且有些帖子的赞数超过 5000（5000 是您一次可以获得的最多记录）

如何获得超过 5000 个赞的帖子的所有赞？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T20:52:38.117

使用`LIMIT`和`OFFSET`：

```
SELECT user_id FROM like WHERE post_id = "POST_ID" LIMIT 5000 OFFSET [n * 5000 + 1] 
```

Where `n`= 0, 1, 2, ... 根据需要，直到查询失败。

# mysql - 选择从 1 列计数到 2 列

> ID：14387582
> 
> 赞同：1
> 
> 时间：2013-01-17T20:30:45.317
> 
> 标签：mysql, select, join, count, group-by

我有一个表，其中有一列称为`type`它包含两个单词之一，`upvote`或者`downvote`我想按 a.question_id 分组，然后得到 2 列，每列计数。

```
select a.*, u.* from answers a
left join users u using(user_id)
left join vote_history v using(answer_id)
where a.question_id = 4 and deleted < 4
group by v.question_id
order by votes desc 
```

示例选择

```
ColumnA  | ColumnB  | upvotes | downvotes
---------+----------+---------+----------
record1A | record2B | 3       | 2
record2A | record2B | 2       | 5 
```

我是否可以在不执行多个查询且不执行子查询的情况下执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:34:51.707

这称为*枢轴*。在 MySQL 中，您可以使用带有`CASE`表达式的聚合函数将数据转换为列：

```
select a.*, u.*,
    SUM(case when v.type='upvote' then 1 else 0 end) Upvotes,
    SUM(case when v.type='downvote' then 1 else 0 end) Downvotes,
from answers a
left join users u using(user_id)
left join vote_history v using(answer_id)
where a.question_id = 4 and deleted < 4
group by v.question_id
order by votes desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:33:38.507

这可以工作：

```
select 
  a.*, 
  u.*,
  SUM(IF(v.type = 'upvote',1,0) as upvotes,
  SUM(IF(v.type = 'downvote',1,0) as downvotes,
from answers a
left join users u using(user_id)
left join vote_history v using(answer_id)
where a.question_id = 4 and deleted < 4
group by v.question_id
order by votes desc 
```

# sql - 需要编辑具有多列的 SQL 搜索查询

> ID：14387585
> 
> 赞同：1
> 
> 时间：2013-01-17T20:31:03.283
> 
> 标签：sql, hql, multiple-columns, wavemaker

我有一个搜索查询，包括一个表和两列。

```
Select * 
from Gecoserv _a 
where _a.typeOfEcosystem IN (:typeNameList) 
    AND _a.service IN (:serviceNameList) 
```

它有效，但没有给出我想要的结果

比方说：

```
typeNameList = { Freshwater, Saltwater, Dunes }
serviceNameList = {Habitat, Food, Recreation } 
```

我希望网格只显示单一组合（淡水栖息地、咸水食物和沙丘娱乐等），但它也显示其他组合（例如：淡水娱乐）。

换句话说：查询结果显示

```
[0,0],[0,1],[0,2],
[1,0],[1,1],[1,2],
[2,0],[2,1],[2,2]. 
```

但我只想看：`[0,0],[1,1],[2,2]`。

我知道我必须在查询末尾添加一些内容。我尝试了很多东西，但无法找到完美的解决方案。

有没有人可以帮助我？

问候，

梅利赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:42:12.690

如果没有任何支持架构甚至数据库制造商，我的回复将不得不对您的设置做出一些假设。

**理论**

这听起来很像笛卡尔积。您的问题的症结在于您的 IN 子句彼此独立。因此，单个记录可以同时满足这两个条件，但不是您希望在结果集中看到的。例如，我们有如下记录：

```
id   name          typeOfEcosystem  service
--   ------------  ---------------  ----------
 1   myEcoService  Freshwater       Recreation 
```

正如现在所写的那样，您的查询将首先采用 typeOfEcosystem (Freshwater) 并检查它是否在您的列表中，它是。 **结果：真**

然后，查询将获取服务（娱乐）并检查它是否在第二个列表中。再次，找到了值。 **结果：真**

所有条件都为真，因此该行包含在最终结果集中。

**解决方案**

在我看来，您想要一个多列 IN 子句。请注意，这与您的尝试不同，因为最终解决方案应该只涉及一个 IN 关键字。现在，查询的确切形式在很大程度上取决于您的数据库及其提供的内容。应该适用于任何符合 SQL 的数据库的解决方案是使用字符串操作。一个粗略的例子如下：

```
Select * 
  from Gecoserv _a 
 where _a.typeOfEcosystem || '-' || _a.service IN ('Freshwater-Habitat', 'Saltwater-Food', 'Dunes-Recreation') 
```

在此示例中，“||” 假定为串联。这是非常便携的，但它很慢。这个问题可以更优雅地解决，但确切的解决方案将更多地取决于您的特定数据库和要求。例如，Oracle 中的多列 in 子句可能很简单：

```
Select * 
  from Gecoserv _a 
 where (_a.typeOfEcosystem, _a.service) IN (('Freshwater', 'Habitat'), ('Saltwater', 'Food'), ('Dunes', 'Recreation')); 
```

您可能必须对这些解决方案中的任何一个进行调整，以使它们与您的 DBMS 配合得很好。可以在以下位置找到更多技术（以及简单的老神阅读）：

1.  [IN子句中的SQL多列](https://stackoverflow.com/questions/13027708/sql-multiple-columns-in-in-clause)

2.  [选择使用 SQLite 重复列组合的记录](https://stackoverflow.com/questions/9430411/select-records-where-a-combinations-of-columns-are-repeated-using-sqlite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:38:16.803

我认为这是无法做到的，因为这是您获得的唯一信息。参数值之间的关系是它们在列表中的位置。没有选项可以在 SQL 中关联和/或保留这些位置。

您对创建 sql 语句有什么影响？

如果您可以遍历代码中的列表并动态创建 sql，您可以找到如下解决方案：

```
SELECT * FROM Gecoserv 
  WHERE typeOfEcosystem = 'Freshwater' AND service = 'Habitat'
UNION
SELECT * FROM Gecoserv 
  WHERE typeOfEcosystem = 'Freshwater' AND service = 'Food'
UNION
... 
```

有关如何参数化的示例，请查看[此答案](https://stackoverflow.com/a/337792/410699)。

**另一种选择：拆分字符串**

您的主要问题是在其列表中保留参数的“等级”/“位置”。这可以通过用字符串替换列表并将它们分解来完成。

我使用了这个[在 sql 中拆分字符串的示例](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)。

生成的查询（使用[此 Fiddle](http://www.sqlfiddle.com/#!3/d960c/12)进行）如下所示：

```
DECLARE 
  @ecoSystems varchar(100) = 'Freshwater,Saltwater,Dunes',
  @services varchar(100) = 'Habitat,Food,Recreation',
  @separator char(1) = ','

SELECT
  [g].[id],
  [g].[typeOfEcoSystem],
  [g].[service]
FROM [dbo].[Split](@separator, @ecoSystems) [e]
INNER JOIN [dbo].[Split](@separator, @services) [s] 
  ON [e].[position] = [s].[position]
INNER JOIN [Gecoserv] [g] 
  ON [e].[part] = [g].[typeOfEcoSystem]
    AND [s].[part] = [g].[service]
ORDER BY [id] ASC 
```

*这适用于您的场景吗？*（答案：是的，几乎……）

**最后没有功能**

```
DECLARE 
  @ecoSystems varchar(100) = 'Freshwater,Saltwater,Dunes',
  @services varchar(100) = 'Habitat,Food,Recreation',
  @separator char(1) = ',';

WITH [EcoSystemsAndServices]([posE], [startE], [endE], [posS], [startS], [endS])
AS 
(
  SELECT 
    1, 
    1, 
    CHARINDEX(@separator, @ecoSystems),
    1, 
    1, 
    CHARINDEX(@separator, @services)
  UNION ALL
  SELECT 
    [posE] + 1, 
    [endE] + 1, 
    CHARINDEX(@separator, @ecoSystems, [endE] + 1),
    [posS] + 1, 
    [endS] + 1, 
    CHARINDEX(@separator, @services, [endS] + 1)
  FROM [EcoSystemsAndServices]
  WHERE [endE] > 0
)

SELECT 
  [g].[id],
  [g].[typeOfEcoSystem],
  [g].[service]
FROM [Gecoserv] [g]
INNER JOIN [EcoSystemsAndServices] [ess] 
  ON [g].[typeOfEcoSystem] = SUBSTRING(@ecoSystems, 
                                        [startE], 
                                        CASE WHEN [endE] > 0 THEN [endE] - [startE] ELSE 100 END)
    AND [g].[service] = SUBSTRING(@services, 
                                  [startS], 
                                  CASE WHEN [endS] > 0 THEN [endS] - [startS] ELSE 100 END)
ORDER BY [id] ASC 
```

# python - Pygame - 如何阻止精灵离开窗口边缘？

> ID：14387587
> 
> 赞同：2
> 
> 时间：2013-01-17T20:31:05.860
> 
> 标签：python, pygame

我的窗口弹出，我可以用箭头键在屏幕上移动我的精灵。我知道精灵碰撞时精灵有碰撞功能，但我似乎无法弄清楚如何阻止它们移动到可见区域之外。有什么想法吗？

我的移动功能：

```
def moveme(self,coords)
    #coords=(x,y)
    self.rect.move_ip(coords) 
```

对于事件处理程序，我正在使用类似的东西

```
keys = pygame.key.get_pressed()
if keys[pygame.K_UP]:
    character.moveme((0, -4)) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T22:37:53.067

移动后使用clamp_ip怎么样？

```
Rect.clamp_ip(Rect): return None 
```

它需要一个 Rectangle ，在您的情况下是您的窗口元组。

所以你的代码看起来像这样：

```
screen_rect = pygame.Rect((0, 0), (700, 400))

def moveme(self,x,y):
    self.rect.move_ip((x,y))
    self.rect.clamp_ip(screen_rect) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:46:06.887

在查找 rect 属性后自己找到了答案.. 这是代码

```
def moveme(self,x,y):
    if self.rect.left + x < 0:
        self.rect.left = 0
    elif self.rect.right + x > 700:
        self.rect.right = 700
    elif self.rect.top + y < 0:
        self.rect.top = 0
    elif self.rect.bottom + y > 400:
        self.rect.bottom = 400
    else:
        self.rect.move_ip((x,y)) 
```

其中 400 是窗口的高度，700 是宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T01:38:35.183

我想我在这里得到它：

```
import pygame
running = True
GREEN = (0,  255,  0)
BLACK = (0,  0,  0)
FPS = 30
pygame.init()
all_sprites = pygame.sprite.Group() #groupes all sprites
all_sprites.update()
tab.fill(BLACK) #any color
all_sprites.draw(tab)
clock = pygame.time.Clock()
WIDTH = 500 #YOUR WIDTH
HEIGHT = 500 #YOUR HEIGHT
tab = pygame.display.set_mode((WIDTH, HEIGHT)) #window width and height

class Player(pygame.sprite.Sprite):
 #your Character
 def __init__():
  pygame.sprite.Sprite.__init__(self)
    self.image = pygame.image.load("Ship.png") #your image or shape/sprites look
    self.rect = self.image.get_rect()
    self.rect.center = (WIDTH / 2, (HEIGHT / 2)) #sprites Position
 def update(self):
   key = pygame.key.get_pressed();
   #stop at edge commands (might need to ajust)
   if(self.rect.x >= (WIDTH-200)):
      self.rect.x -= 10;
   elif(self.rect.x <= 0):
      self.rect.x += 10;
   elif(self.rect.y <= 0):
      self.rect.y += 10;
   elif(self.rect.y >= (HEIGHT-200)):
    self.rect.y -= 10
   else:
    #sprites move commands
    if key[pygame.K_RIGHT]:self.rect.x += 10;
    if key[pygame.K_LEFT]:self.rect.x -= 10;
    if key[pygame.K_UP]:self.rect.y -= 10;
    if key[pygame.K_DOWN]:self.rect.y += 10;

player = Player() #makes the sprite that the player controlles
all_sprites.add(player)
while (running):
 clock.tick(FPS)
 for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False
 all_sprites.update() #updates screen
 tab.fill(BLACK)
 all_sprites.draw(tab) #adds all sprites to the screen
 pygame.display.flip() 
```

我从别人那里得到了一些，但我不记得了，但我认为这会有所帮助 ------------------------------ -------------------------------------------------- ------ 注意：您可能需要调整一些变量和空格等等。（ps：我不擅长语法）也很抱歉，它很长，我认为没有这些东西就行不通。

# ruby - each_with_index_do 从 1 开始索引

> ID：14387589
> 
> 赞同：38
> 
> 时间：2013-01-17T20:31:06.473
> 
> 标签：ruby, ruby-on-rails-3, iterator

我在 Rails 应用程序中的视图上使用 ruby​​ 迭代器，如下所示：

```
<% (1..@document.data.length).each_with_index do |element, index| %>
  ...
<% end %> 
```

我认为添加 1.. 而不是仅仅说： `@document.data`

会得到让上面的索引从 1 开始的技巧。但是，上面的代码索引仍然是 0 到 data.length （有效地为 -1）。那么我做错了什么，我需要索引等于 1-data.length ...不知道如何设置迭代器来执行此操作。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2014-11-03T21:35:03.760

除非您使用的是 1.8 之类的旧 Ruby（我认为这是在 1.9 中添加的，但我不确定），否则您可以使用`each.with_index(1)`获取基于 1 的枚举器：

在你的情况下，它会是这样的：

```
<% @document.data.length.each.with_index(1) do |element, index| %>
  ...
<% end %> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-17T20:39:04.267

我想也许你误会了`each_with_index`。

`each`将遍历数组中的元素

```
[:a, :b, :c].each do |object|
  puts object
end 
```

哪个输出；

```
:a
:b
:c 
```

`each_with_index`遍历元素，并传入索引（从零开始）

```
[:a, :b, :c].each_with_index do |object, index|
  puts "#{object} at index #{index}"
end 
```

哪个输出

```
:a at index 0
:b at index 1
:c at index 2 
```

如果你想要它 1-indexed 那么只需添加 1。

```
[:a, :b, :c].each_with_index do |object, index|
  indexplusone = index + 1
  puts "#{object} at index #{indexplusone}"
end 
```

哪个输出

```
:a at index 1
:b at index 2
:c at index 3 
```

* * *

如果要遍历数组的子集，只需选择子集，然后遍历它

```
without_first_element = array[1..-1]

without_first_element.each do |object|
  ...
end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-03-08T14:59:44.233

这可能与所讨论的方法不完全相同`each_with_index`，但我认为结果可能接近 mod 中的某些问题...

```
%w(a b c).each.with_index(1) { |item, index| puts "#{index} - #{item}" }

# 1 - a
# 2 - b
# 3 - c 
```

有关更多信息[https://ruby-doc.org/core-2.6.1/Enumerator.html#method-i-with_index](https://ruby-doc.org/core-2.6.1/Enumerator.html#method-i-with_index)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-01-04T08:24:35.507

使用[`Integer#next`](https://ruby-doc.org/core-2.2.0/Integer.html#method-i-next)：

```
[:a, :b, :c].each_with_index do |value, index|
  puts "value: #{value} has index: #{index.next}"
end 
```

产生：

```
value: a has index: 1
value: b has index: 2
value: c has index: 3 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T20:38:34.783

没有让索引从 1 开始这样的事情。如果要跳过数组中的第一项，请使用`next`.

```
<% (1..@document.data.length).each_with_index do |element, index| %>
  next if index == 0
<% end %> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T20:38:47.560

数组索引总是从零开始。

如果你想跳过第一个元素，这听起来像你这样做：

```
@document.data[1..-1].each do |data|
   ...
end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-17T20:43:42.783

如果我正确理解您的问题，您想从 1 开始索引，但在 ruby​​ 数组中，基本索引为 0，所以最简单的方法是

给定`@document.data`的是一个数组

```
index = 1
@document.data.each do |element| 
    #your code
    index += 1
end 
```

高温高压

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-24T13:07:41.950

我有同样的问题，并通过使用 each_with_index 方法解决了它。但是在代码中的索引中添加了 1。

```
@someobject.each_with_index do |e, index|
   = index+1 
```

# asp.net-mvc - ImageResizer 和没有扩展名的图像文件

> ID：14387595
> 
> 赞同：3
> 
> 时间：2013-01-17T20:31:20.307
> 
> 标签：asp.net-mvc, imageresizer

我一直在我们的网络应用程序中很好地使用[ImageResizer.net](http://imageresizing.net)，但现在我需要它来调整大小并提供没有（也不能）有文件扩展名的图像，比如这个：

```
http://localhost:58306/ClientImages/Batch/2012/12/10/f45198b7c452466684a4079de8d5f85f?width=600 
```

在这种情况下，我知道我的文件总是 TIFF，但它们不会有文件扩展名。

我有哪些选择？

/resizer.debug.ashx：https://gist.github.com/raw/9c867823c983f0e5be10/4db31cb21af8b9b36f0aa4e765f6f459ba4b309f/gistfile1.txt [_](https://gist.github.com/raw/9c867823c983f0e5be10/4db31cb21af8b9b36f0aa4e765f6f459ba4b309f/gistfile1.txt)

# 更新

我按照计算机语言学家的指示：

```
 protected void Application_Start()
    {
        Config.Current.Pipeline.PostAuthorizeRequestStart +=
            delegate
                {
                    var path = Config.Current.Pipeline.PreRewritePath;
                    var clientImgsRelPath = PathUtils.ResolveAppRelative("~/ClientImages/");
                    var isClientImageRequest = path.StartsWith(clientImgsRelPath, StringComparison.OrdinalIgnoreCase);

                    if (isClientImageRequest)
                        Config.Current.Pipeline.SkipFileTypeCheck = true;
                };

                // other app start code here
    } 
```

`http://localhost:58306/ClientImages/Batch/2012/12/10/92d67b45584144beb5f791aaaf760252?width=600`只响应原始图像而不调整大小。

这也被问到这里：http: [//imageresizing.net/docs/howto/cache-non-images#comment-571615564](http://imageresizing.net/docs/howto/cache-non-images#comment-571615564)

这发生在使用 Cassini 或 Visual Studio Web 服务器或任何您想调用它的开发过程中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:34:51.060

**首先，您必须使用 IIS7 集成模式。经典模式不起作用；它不允许 ASP.NET 访问无扩展请求**

ImageResizer 无法知道无扩展名的 URL 是图像，除非您明确告诉它。

该文档解释说：

[http://imageresizing.net/docs/howto/cache-non-images](http://imageresizing.net/docs/howto/cache-non-images)

本质上，您最终会在您的 URL 上执行逻辑（通常是 String.StartsWith），以确定 ImageResizer 是否应该将文件视为图像。

```
Config.Current.Pipeline.PostAuthorizeRequestStart += delegate(IHttpModule sender, HttpContext context) {
  string path = Config.Current.Pipeline.PreRewritePath;

  //Skip the file extension check for everything in this folder:
  if (path.StartsWith(PathUtils.ResolveAppRelative("~/folder/of/images"), 
        StringComparison.OrdinalIgnoreCase)){

        Config.Current.Pipeline.SkipFileTypeCheck = true; 
  }
}; 
```

您应该在 global.asax 的 Application_Start 中注册此事件处理程序。

# c# - EF Code First Duplicate Foreign Key for同一张表

> ID：14387597
> 
> 赞同：3
> 
> 时间：2013-01-17T20:31:26.290
> 
> 标签：c#, entity-framework, ef-code-first

我一直在阅读有关 EF Code First 生成重复外键的 SO 帖子，并尝试将解决方案应用于我的代码但无法修复我的代码。

这是我的课

```
 public class Schedule
{
    public int Id { get; set; }
    public ICollection<Appointment> Appointments { get; set; }
}

public class Appointment
{
    public int Id { get; set; }
    public Schedule Schedule { get; set; }
}

public class ScheduleConfiguration : EntityTypeConfiguration<Schedule>
{
    public ScheduleConfiguration()
    {
        HasKey(s => s.Id);
        Property(s => s.Id).HasColumnName("SCHEDULEID");            
        ToTable("SCHEDULES");
    }        
}

public class AppointmentConfiguration : EntityTypeConfiguration<Appointment>
{
    public AppointmentConfiguration()
    {
        HasKey(a => a.Id);
        Property(a => a.Id).HasColumnName("APPOINTMENTID");            
        HasRequired(a => a.Schedule).WithMany().Map(x => x.MapKey("SCHEDULEID"));
        ToTable("APPOINTMENTS");
    }
} 
```

这是在表中生成两个外键，`appointments`即`SCHEDULEID`和`Schedule_Id1`。

我如何告诉 EF 不要创建`Schedule_Id1`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:46:02.647

试试这个：

```
HasRequired(a => a.Schedule).WithMany(x=> x.Appointment).Map(x => x.MapKey("SCHEDULEID")); 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T06:49:34.890

您可以在属性 Appointments 中使用 InverseProperty 数据注释

```
public class Schedule
{
    public int Id { get; set; }
    [InverseProperty("Schedule")]
    public virtual ICollection<Appointment> Appointments { get; set; }
}

public class Appointment
{
    public int Id { get; set; }
    public Schedule Schedule { get; set; }
} 
```

# c# - LINQ to SQL 查询中的交叉联接或完全联接

> ID：14387599
> 
> 赞同：0
> 
> 时间：2013-01-17T20:31:35.593
> 
> 标签：c#, sql, sql-server, linq, tsql

我在读书时偶然发现了这个 LINQ 查询。

```
var binary = new int[] { 0, 1 };

var q = from b4 in binary
        from b3 in binary
        from b2 in binary
        from b1 in binary
        select String.Format("{0}{1}{2}{3}", b4, b3, b2, b1);

foreach (var element in q)
    Console.WriteLine(element); 
```

上述 LINQ 的结果将是

```
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111 
```

我想看看这在 SQL Server 中会如何。

我试过的：

```
create table LINQ(x bit)
insert LINQ select 0
insert LINQ select 1

create table LINQ(x bit, y bit)
insert LINQ select 0,1 
```

我尝试使用 LINQPAD（不提供 SQL 或 lambda 版本），使用上述临时表。我试过交叉加入，完全加入。我没有得到与 LINQ 给出相同结果的 SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:35:01.717

```
SELECT CAST(l1.x as varchar(4)) + CAST(l2.x as varchar(4))+ CAST(l3.x as varchar(4)) + CAST(l4.x as varchar(4))
FROM LINQ as l1, LINQ as l2, LINQ as l3, LINQ as l4
ORDER BY l1.x, l2.x, l3.x, l4.x 
```

[sqlfiddle在这里](http://sqlfiddle.com/#!3/5b1daf/4)

# php - 如何让经理看到一个组件 joomla 2.5？

> ID：14387600
> 
> 赞同：0
> 
> 时间：2013-01-17T20:31:35.947
> 
> 标签：php, joomla, joomla2.5, joomla-extensions, joomla-component

我正在创建一个新的 joomla 组件。

我已经将组件压缩到一个 zip 文件中并安装了它，一切正常，当我以超级用户身份登录时，我可以在组件菜单（在后端偏离课程中）看到该组件。问题是当我以经理身份登录时，我在该菜单中看不到组件，但是如果我将浏览器直接指向组件 url，我可以访问它。

这是一个非常简单的组件（没有配置或 access.xml） 我只希望管理员和超级用户都能在菜单中看到该组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:04:05.073

在 config.xml 你必须添加这个-

```
<fieldset
        name="permissions"
        label="JCONFIG_PERMISSIONS_LABEL"
        description="JCONFIG_PERMISSIONS_DESC"
        >

        <field
            name="rules"
            type="rules"
            label="JCONFIG_PERMISSIONS_LABEL"
            class="inputbox"
            filter="rules"
            validate="rules"
            component="com_component"
            section="component" />
    </fieldset> 
```

会有一个`access.xml`文件——

```
<?xml version="1.0" encoding="utf-8"?>
<access component="com_component">
    <section name="component">
        <action name="core.admin" title="JACTION_ADMIN" description="JACTION_ADMIN_COMPONENT_DESC" />
        <action name="core.manage" title="JACTION_MANAGE" description="JACTION_MANAGE_COMPONENT_DESC" />
        <action name="core.create" title="JACTION_CREATE" description="JACTION_CREATE_COMPONENT_DESC" />
        <action name="core.delete" title="JACTION_DELETE" description="JACTION_DELETE_COMPONENT_DESC" />
        <action name="core.edit" title="JACTION_EDIT" description="JACTION_EDIT_COMPONENT_DESC" />
        <action name="core.edit.state" title="JACTION_EDITSTATE" description="JACTION_EDITSTATE_COMPONENT_DESC" />
    </section>
    <section name="category">
        <action name="core.create" title="JACTION_CREATE" description="COM_CATEGORIES_ACCESS_CREATE_DESC" />
        <action name="core.delete" title="JACTION_DELETE" description="COM_CATEGORIES_ACCESS_DELETE_DESC" />
        <action name="core.edit" title="JACTION_EDIT" description="COM_CATEGORIES_ACCESS_EDIT_DESC" />
        <action name="core.edit.state" title="JACTION_EDITSTATE" description="COM_CATEGORIES_ACCESS_EDITSTATE_DESC" />
    </section>
</access> 
```

阅读更多 - [http://docs.joomla.org/Adding_ACL_rules_to_your_component](http://docs.joomla.org/Adding_ACL_rules_to_your_component)

希望这会有所帮助。

# android - 如何在 LED 亮起时覆盖系统默认值

> ID：14387602
> 
> 赞同：1
> 
> 时间：2013-01-17T20:31:38.723
> 
> 标签：android, led

我编写了一个小型测试应用程序（从 Stack Overflow 中给出的先前实现中借用的示例），它将打开我平板电脑上的通知 LED。当我在平板电脑上测试这个应用程序时，它没有按预期工作，即 LED 会打开很短的时间（而不是我在程序中提到的 5 秒持续时间）。我猜它在 LED 需要打开/关闭的持续时间内采用系统默认值，而不是采用我的应用程序中指定的值。有没有人之前看到过类似的问题？有没有办法让我覆盖这个系统的特定值？我的代码如下：

```
public class SampleActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sample);
    RedFlashLight();
}

private void RedFlashLight()
{
    NotificationManager nm = ( NotificationManager ) getSystemService( NOTIFICATION_SERVICE );
    Notification notif = new Notification();
    notif.ledARGB = Color.RED;
    notif.flags = Notification.FLAG_SHOW_LIGHTS ;
    notif.ledOnMS = 5000; //5 seconds 
    notif.ledOffMS = 0;  //do not turn it off 
    nm.notify(10, notif);
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:40:41.577

> 有没有办法让我覆盖这个系统的特定值？

超越你已经在做的事情？不。

记住：

*   并非所有设备都有 LED
*   并非所有具有 LED 的设备都必须将它们用于通知
*   否则设备制造商可以忽略`Notification`对象中的请求，例如 LED 颜色

所以，你可以要求任何你想要的，你是否得到它取决于设备。

# jquery - Bootstrap Datepicker - 问题 首先，对不起，我无法为您提供一个可行的示例。我的构建目前只在我的本地主机上，它被推送到的开发服务器只是 Intranet，只有我的办公室可以使用的密码。否则，我会给你们一个工作的例子。我主要只是好奇这是否对其他人来说是个问题。 我遇到了 datepicker 没有选择除当前日期以外的日期的问题，该日期在框中默认。它在除 IE8 和 IE7 之外的所有浏览器中都能正常工作。这些浏览 问问题 问问题 2013-01-17T20:32:20.240 4567 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 首先，对不起，我无法为您提供一个可行的示例。我的构建目前只在我的本地主机上，它被推送到的开发服务器只是 Intranet，只有我的办公室可以使用的密码。否则，我会给你们一个工作的例子。我主要只是好奇这是否对其他人来说是个问题。 我遇到了 datepicker 没有选择除当前日期以外的日期的问题，该日期在框中默认。它在除 IE8 和 IE7 之外的所有浏览器中都能正常工作。这些浏览器将很好地打开日期选择器 UI，并允许您单击日期。但是，当您单击时，日期将与您当前的默认日期保持一致。用户界面按原样关闭。 http://www.eyecon.ro/bootstrap-datepicker/ <--我将它用于我的引导日期选择器。我正在使用 jQuery 1.8.2，这也是它正在使用的版本。为此，我在所有浏览器上都收到控制台错误： 未捕获的类型错误：无法调用未定义的方法“拆分”（bootstrap-datepicker.js:379） 我已经搞砸了大约 45 分钟，现在尝试不同的方法让它工作。有趣的部分：我访问了上面包含的 bootstrap datepicker 网站，并在 IE8 中查看了它。它在那里也坏了，但没有显示错误。我相信这个错误与这个不起作用没有任何关系，只是一个简单的“引导程序与旧版 IE 浏览器不兼容”问题。我正在寻找确认，以便让人们知道。 感谢您对此的了解：我已经完成了大量的响应式构建，并且我之前也经常使用 jQueryUI 日期选择器。然而，这个特定的客户端请求了 Bootstrap 和 Datepicker 插件/主题，我从未接触过它们中的任何一个。在过去的 6 个小时里，我一直致力于让 IE8 和 IE7 看起来正常并做出响应，所以我的脑袋有点空。我感谢您的帮助！ 其他注意事项：这不是 IE 仿真的问题。这在本机 IE8 和 IE7 以及模拟的 IE8/IE7 中发生的情况完全相同。对于那些感兴趣的人，我在上面包含的错误周围的代码是： parseDate: function (date, format) { var parts = date.split(format.separator), date = new Date(), val; ect... 如果我 console.log date.split(format.separator) 我收到“1/16/2013” ，它也会再次循环到第二天。Val 是一个递增的数字，我觉得我不需要解释 new Date() 是什么。 我最终发现，一般来说，内联 boostrap 日期选择器不适用于IE8 及更低版本。我最终卸载了 bootstrap datepicker 并改用了 jQuery UI datepicker。相同的标记，它工作得很好。我知道这在技术上并不能回答我的问题 - 只是为那些拼命寻找答案并看到这个问题的人添加一些关闭。 jquerytwitter-bootstrapdatepicker 4 2 回答 2 This answer is useful 1 这是因为“日期”obj 不是“字符串”类型。 此错误发生在下面的代码中。 parseDate: function(date, format) { var parts = date.split(format.separator), // Error occured ... } 解决方案是强制将日期对象作为字符串。 修改后的代码如下。 parseDate: function(date, format) { date = date + ""; // Add this line var parts = date.split(format.separator), ... } 祝你好运！！ 于 2014-02-05T08:13:45.003 回答 This answer is useful 1 我最终发现，一般来说，内联 boostrap 日期选择器不适用于IE8 及更低版本。我最终卸载了 bootstrap datepicker 并改用了 jQuery UI datepicker。相同的标记，它工作得很好。我知道这在技术上并不能回答我的问题 - 只是为那些拼命寻找答案并看到这个问题的人添加一些关闭。 于 2013-01-25T22:07:37.087 回答 Related 0 django - 当我在视图函数中渲染时，ModelForm 不是 JSON 可序列化的 4 java - 如何将时间设置为纪元时间java？ 1 android - 在向服务器发送 HTTP 请求后，有时我会得到状态 302（重定向） 1 asp.net - 如何从报表查看器控件将查询字符串参数传递给 ssrs 报表 1 interpreter - 开源 PostScript 解释器 3 c# - C# 正则表达式提取 div 的内容 0 playframework - PlayFramework 2.1.1：生产中的 ClassNotFound 2 windows - 处理混合用户/管理员 Windows 应用程序中的管理员权限 2 php - 将用户路由到某个文件，例如： index.php 从任何没有 index.php 的文件夹 | 使用 .htaccess 2 c++ - 从递归定义的类继承 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14387611
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, twitter-bootstrap, datepicker

首先，对不起，我无法为您提供一个可行的示例。我的构建目前只在我的本地主机上，它被推送到的开发服务器只是 Intranet，只有我的办公室可以使用的密码。否则，我会给你们一个工作的例子。我主要只是好奇这是否对其他人来说是个问题。

我遇到了 datepicker 没有选择除当前日期以外的日期的问题，该日期在框中默认。它在除 IE8 和 IE7 之外的所有浏览器中都能正常工作。这些浏览器将很好地打开日期选择器 UI，并允许您单击日期。但是，当您单击时，日期将与您当前的默认日期保持一致。用户界面按原样关闭。

[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/) <--我将它用于我的引导日期选择器。我正在使用 jQuery 1.8.2，这也是它正在使用的版本。为此，我在所有浏览器上都收到控制台错误：

未捕获的类型错误：无法调用未定义的方法“拆分”（bootstrap-datepicker.js:379）

我已经搞砸了大约 45 分钟，现在尝试不同的方法让它工作。**有趣的部分：**我访问了上面包含的 bootstrap datepicker 网站，并在 IE8 中查看了它。它在那里也坏了，但没有显示错误。我相信这个错误与这个不起作用没有任何关系，只是一个简单的“引导程序与旧版 IE 浏览器不兼容”问题。我正在寻找确认，以便让人们知道。

感谢您对此的了解：我已经完成了大量的响应式构建，并且我之前也经常使用 jQueryUI 日期选择器。然而，这个特定的客户端请求了 Bootstrap 和 Datepicker 插件/主题，我从未接触过它们中的任何一个。在过去的 6 个小时里，我一直致力于让 IE8 和 IE7 看起来正常并做出响应，所以我的脑袋有点空。我感谢您的帮助！

其他注意事项：这不是 IE 仿真的问题。这在本机 IE8 和 IE7 以及模拟的 IE8/IE7 中发生的情况完全相同。对于那些感兴趣的人，我在上面包含的错误周围的代码是：

```
 parseDate: function (date, format) {
    var parts = date.split(format.separator),
        date = new Date(),
        val;
    ect... 
```

如果我 console.log date.split(format.separator) 我收到“1/16/2013”​​，它也会再次循环到第二天。Val 是一个递增的数字，我觉得我不需要解释 new Date() 是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T08:13:45.003

这是因为“日期”obj 不是“字符串”类型。

此错误发生在下面的代码中。

```
parseDate: function(date, format) {
    var parts = date.split(format.separator),  // Error occured
    ...
} 
```

解决方案是强制将日期对象作为字符串。

修改后的代码如下。

```
parseDate: function(date, format) {
    date = date + ""; // Add this line
    var parts = date.split(format.separator),
    ...
} 
```

祝你好运！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:07:37.087

我最终发现，一般来说，内联 boostrap 日期选择器不适**用于**IE8 及更低版本。我最终卸载了 bootstrap datepicker 并改用了 jQuery UI datepicker。相同的标记，它工作得很好。我知道这在技术上并不能回答我的问题 - 只是为那些拼命寻找答案并看到这个问题的人添加一些关闭。

# java - 在android上写一个未压缩的位图

> ID：14387614
> 
> 赞同：2
> 
> 时间：2013-01-17T20:32:36.727
> 
> 标签：java, android, bitmap, bmp

在我的 java 代码中，我有一个 mBitmap 对象。

如何将此未压缩的位图（黑白）保存到这样的文件中：第一个字节包含前 8 个像素，第二个字节包含接下来的 8 个像素......等等？

谢谢！

# c# - 如果我每次创建粒子时都强制重新初始化每个粒子，我应该为粒子使用池吗

> ID：14387615
> 
> 赞同：4
> 
> 时间：2013-01-17T20:32:40.927
> 
> 标签：c#, memory-management, xna, pool, particle-system

我正在 XNA4 中创建一个粒子系统，但遇到了问题。我的第一个粒子系统是一个简单的粒子列表，它的实例在需要时创建。但后来我读到了关于使用池的信息。

我的第二个系统由一个充满粒子的池和一个发射器/控制器组成。我的游泳池非常基本，这是代码：

```
class Pool<T> where T: new ()
{
    public T[] pool;
    public int nextItem = 0;

    public Pool(int capacity)
    {
        pool = new T[capacity];

        for (int i = 0; i < capacity; i++)
        {
            pool[i] = new T();
        }
    }
    public T Create()
    {
       return pool[nextItem++];
    }
    public void Destroy(T particle)
    {
        pool[--nextItem] = particle;
    }
} 
```

问题是池系统更渴望 CPU。每次我从池中取出粒子到我的发射器时，我都被迫重新初始化和重置粒子，因为没有构造函数，这是一个问题。

如果我重新初始化这些粒子，或者我应该为完全相同且永不改变的对象数组留下池，那么使用池是否有任何意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T21:54:13.737

在 XNA 应用程序中，通常对象池不应该加速初始化。这是为了加快垃圾收集。主机上的 GC 速度较慢，并且在整个更新函数运行时间为 16 毫秒的游戏中，收集暂停会很明显。对于您的特定情况，这可能会或可能不会关注，特别是如果这是一个 PC 应用程序，这取决于您使用的粒子的数量和寿命。

# ruby - 括号内的内容正则表达式 Ruby

> ID：14387617
> 
> 赞同：-1
> 
> 时间：2013-01-17T20:32:51.267
> 
> 标签：ruby, regex, parentheses

我正在尝试取出括号内的内容。例如，如果字符串是“(blah blah) This is stack(over)flow”，我只想取出“(blah blah)”，但不理会“(over)”。我正在努力

```
 /\A\(.*\)/ 
```

但返回“（等等等等）这是堆栈（结束）”，我确定它为什么会返回它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:50:59.483

最简单的修复：

```
/\A\(.*?\)/ 
```

通常，`*`它会尽可能多地匹配，所以它会一直匹配到最后`)`一行。这称为“贪婪”匹配。放在/ /`?`之后使它们*不*贪婪，它们将匹配*最短*的字符串。`+``*``?`

 **但请注意，这不适用于嵌套括号。那比较复杂。鉴于您的示例，我假设这是一个非常简单的临时格式，其中嵌套不是问题。**

# jquery - 值为 0 的 Jquery 变量奇怪的行为

> ID：14387628
> 
> 赞同：1
> 
> 时间：2013-01-17T20:33:53.823
> 
> 标签：jquery, variables, alert

我有这样的代码

```
if(itemid){
   expandHighlight(itemid);
}

function expandHighlight(itemid){
    alert(itemid);
} 
```

当然，它可以正常工作，但是如果 itemid 的值为“0”（int） - 什么也没有发生。A get no alert, just nothing... 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:34:39.113

这是因为它`if ("0")`是虚假的，它不会调用该`expandHighlight`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:35:59.373

要么让你`if`更明智：

```
if(itemid !== undefined) 
```

或将其完全删除

# c# - 处理登录到站点的多个用户

> ID：14387630
> 
> 赞同：0
> 
> 时间：2013-01-17T20:34:02.327
> 
> 标签：c#, asp.net, sql-server, session

在我的 ASP.NET C# 网站中，我尝试使用会话来允许用户在会话有效时登录并浏览安全页面。如果出于某种原因他们超时或退出，他们将被重定向到登录页面。目前，该站点一次只允许一个用户登录。显然会话信息存储不正确，但我不明白发生这种情况的位置或原因。如果您使用其他浏览器访问该页面，您会看到代码从会话中提取出它不应该知道的信息（例如用户名）。

我希望允许多个有效用户同时登录，并且这样做不会对彼此产生不利影响。如果您需要比我在下面发布的代码示例更多的信息，请询问。

我的登录页面：

```
//Login.ascx.cs
...
private void Login_Click(object sender, EventArgs e)
{
    if (sender == null || e == null)
    {
        throw new ArgumentNullException("Null Exception: Login_Click");
    }

    User user = new User();            
    user.Login(_username.Text, _password.Text);           

    if (user.IsValid() && user.GetIsUser() != false)
    {
        user.Save();
                Session["Username"] = _username.Text;
                Response.Redirect("Secure/Default.aspx");
    }
    else
    {
        DisplayErrors(user._validationErrors);
    }
    _errors.Text = errorMessage;
} 
```

欢迎页面（用户看到的第一个安全页面）

```
private void Page_Load(object sender, System.EventArgs e)
{
   Business.User user      = new Business.User();

   _labelUsername.Text     = MySession.Current.Username;
   _labelCompanyId.Text    = MySession.Current.CompanyId;

   redirectLogin    = "../Default.aspx";

   //redirect if any conditions fail for user validation.
   if (sessionKey != MySession.GetSessionId() || (string)Session["Username"] != _labelUsername.Text)
   {
      Response.Redirect(redirectLogin);
   }
   else
   {
      Debug.WriteLine("Welcome SUCCESS: " +  _labelUsername.Text);
      Debug.WriteLine("Welcome " + sessionKey);
   }          
} 
```

最后是包含 SQL 查询的用户页面

```
public static string    dataUsername;
public static string    dataCompanyId;

private const string    _getUserByUsernameQuery = 
@"SELECT [User].[username], [Company].[name]
FROM [User] WITH (NOLOCK) INNER JOIN [Company] WITH (NOLOCK)
ON [User].[companyId] = [Company].[id]
WHERE [User].[username] = @username  AND [User].[password] = @password";

private string          _username;
private string          _companyid;

public User(){}

public void Login (string username, string password)
{
  using (SqlConnection connection = new SqlConnection(SQLConfiguration.ConnectionString))
  {
    SqlCommand command = new SqlCommand(_getUserByUsernameQuery, connection);
    command.Parameters.AddWithValue("@username", username);
    command.Parameters.AddWithValue("@password", password);

    connection.Open();

    using (SqlDataReader reader = command.ExecuteReader())
    {
      if (reader.Read())
      {
        Username        = Convert.ToString(reader["username"]);
        CompanyId       = Convert.ToString(reader["name"]);
        dataUsername    = Username;
        dataCompanyId   = CompanyId;
      }
    }
  }
}

#region Properties
public string Username
{
  get{ return _username; }
  set{ _username = value;}
}
public string CompanyId
{
  get{ return _companyid;}
  set{ _companyid = value;}
}
#endregion 
```

编辑：针对一些问题：

```
//in the first accessed page for secure users, before 'Page_load'
public static string sessionKey 
{ 
   get 
   {
      return MySession.GetSessionId(); 
   }  
}
...
//in my 'MySession' class
public static string GetSessionId()
{
   return System.Web.HttpContext.Current.Session.SessionID;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:35:21.137

请参阅[静态类和静态类成员（C# 编程指南）](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)

> 静态构造函数只被调用一次，静态类在程序所在的应用程序域的整个生命周期内都保留在内存中。

编码-

```
public static string GetSessionId()
{
   return System.Web.HttpContext.Current.Session.SessionID;
} 
```

将在应用程序的生命周期内返回相同的 SessionID。

像其他海报一样，我强烈建议您使用 ASP.NET 内置的会员提供程序，而不是尝试自己发明，这将更安全、更广泛理解并因此受到支持、更易于维护和更可扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:52:35.550

只需使用 ASP.NET 表单身份验证。我敢打赌所有匿名用户都在共享同一个会话对象。如果某些东西已经存在，您可以将其连接到您自己的身份验证方案中。（例如，数据库或文件中的密码）

# ruby - Look-ahead 和 Look-behind 概念如何在 Ruby 的 Regex 中支持这种零宽度断言概念？

> ID：14387631
> 
> 赞同：8
> 
> 时间：2013-01-17T20:34:10.380
> 
> 标签：ruby, regex, ruby-1.9.3

我刚刚`Zero-Width Assertions`从文档中了解了这个概念。我想到了一些快速的问题-

*   ***为什么这样的名字`Zero-Width Assertions`？***
*   ***`Look-ahead`和概念如何`look-behind`支持这样 的`Zero-Width Assertions`概念？***
*   ***什么样`?<=s`的 , `<!s`, `=s`, `<=s`- 4 符号在模式中指示？你能帮我集中精力了解实际发生的事情吗***

我还尝试了一些小代码来理解逻辑，但对这些代码的输出没有那么自信：

```
irb(main):001:0> "foresight".sub(/(?!s)ight/, 'ee')
=> "foresee"
irb(main):002:0> "foresight".sub(/(?=s)ight/, 'ee')
=> "foresight"
irb(main):003:0> "foresight".sub(/(?<=s)ight/, 'ee')
=> "foresee"
irb(main):004:0> "foresight".sub(/(?<!s)ight/, 'ee')
=> "foresight" 
```

任何人都可以在这里帮助我理解吗？

**编辑**

*在这里，我尝试了两个片段，一个具有“零宽度断言”概念，如下所示：*

```
irb(main):002:0> "foresight".sub(/(?!s)ight/, 'ee')
=> "foresee" 
```

*另一个没有“零宽度断言”概念，如下所示：*

```
irb(main):003:0> "foresight".sub(/ight/, 'ee')
=> "foresee" 
```

以上都产生相同的输出，现在在内部两者如何`regexp`自行产生输出 - 你能帮我想象一下吗？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T21:00:54.727

正则表达式从左到右匹配，并随着字符串移动一种“光标”。如果您的正则表达式包含一个常规字符，例如`a`，这意味着：“如果`a`光标前面有一个字母，则将光标向前移动一个字符，然后继续前进。否则，出现问题；备份并尝试其他方法。” 所以你可能会说它`a`有一个字符的“宽度”。

“零宽度断言”就是这样：它*断言*有关字符串的某些内容（即，如果某些条件不成立，则不匹配），但它不会向前移动光标，因为它的“宽度”为零.

您可能已经熟悉一些更简单的零宽度断言，例如`^`and `$`。这些匹配字符串的开头和结尾。如果光标在看到这些符号时不在开头或结尾，则正则表达式引擎将失败，备份并尝试其他操作。但它们实际上并没有向前移动光标，因为它们不匹配字符；他们只检查光标的位置。

Lookahead 和lookbehind 的工作方式相同。当正则表达式引擎尝试匹配它们时，它会检查光标*以*查看正确的模式是在其前面还是后面，但如果匹配，它不会移动光标。

考虑：

```
/(?=foo)foo/.match 'foo' 
```

这将匹配！正则表达式引擎是这样的：

1.  从字符串的开头开始：`|foo`.
2.  正则表达式的第一部分是`(?=foo)`. 这意味着：只有`foo`出现在光标之后才匹配。可以？嗯，是的，所以我们可以继续。但是光标*没有移动*，因为这是零宽度。我们还有`|foo`。
3.  接下来是`f`. `f`光标前面有没有？是的，所以继续，将光标移过`f`: `f|oo`。
4.  接下来是`o`. `o`光标前面有没有？是的，所以继续，将光标移过`o`: `fo|o`。
5.  同样的事情，把我们带到`foo|`.
6.  我们到达了正则表达式的末尾，没有失败，所以模式匹配。

特别是关于你的四个断言：

*   `(?=...)`是“前瞻”；它断言`...` *确实*出现在光标之后。

    ```
    1.9.3p125 :002 > 'jump june'.gsub(/ju(?=m)/, 'slu')
     => "slump june" 
    ```

    “jump”中的“ju”匹配，因为接下来是“m”。但是“june”中的“ju”后面没有“m”，所以就不用了。

    由于它不会移动光标，因此在其后放置任何内容时必须小心。 `(?=a)b`永远不会匹配任何内容，因为它会检查下一个字符是否为`a`，然后*还会*检查*相同*的字符是否为`b`，这是不可能的。

*   `(?<=...)`是“向后看”；它断言`...` *确实*出现*在*光标之前。

    ```
    1.9.3p125 :002 > 'four flour'.gsub(/(?<=f)our/, 'ive')
     => "five flour" 
    ```

    “four”中的“our”匹配，因为它前面有一个“f”，但是“flour”中的“our”前面有一个“l”，所以它不匹配。

    像上面一样，你必须小心你放在它*前面*的东西。 `a(?<=b)`永远不会匹配，因为它检查下一个字符是否为`a`，移动光标，然后检查前一个字符是否为`b`.

*   `(?!...)`是“负前瞻”；它断言`...` *不会*出现在光标之后。

    ```
    1.9.3p125 :003 > 'child children'.gsub(/child(?!ren)/, 'kid')
     => "kid children" 
    ```

    “child”匹配，因为接下来是空格，而不是“ren”。“孩子”没有。

    这可能是我最常用的一个；精细控制接下来不能发生的事情会派上用场。

*   `(?<!...)`是“消极的后视”；它断言`...` *不会*出现*在*光标之前。

    ```
    1.9.3p125 :004 > 'foot root'.gsub(/(?<!r)oot/, 'eet')
     => "feet root" 
    ```

    “foot”中的“oot”很好，因为它之前没有“r”。“root”中的“oot”显然有一个“r”。

    作为附加限制，`...`在这种情况下，大多数正则表达式引擎都要求它具有固定长度。所以你不能使用`?`, `+`, `*`, 或`{n,m}`.

你也可以嵌套这些，否则做各种疯狂的事情。我主要将它们用于一次性使用，我知道我永远不需要维护，所以我没有任何实用的实际应用程序的好例子；老实说，它们很奇怪，您应该先尝试以其他方式做您想做的事情。:)

* * *

事后思考：语法来自[Perl 正则表达式](http://perldoc.perl.org/perlre.html)，它使用`(?`后跟各种符号来进行很多扩展语法，因为`?`它本身是无效的。所以`<=`本身并不意味着什么；`(?<=`是一个完整的标记，意思是“这是回顾的开始”。这就像 how`+=`和`++`是单独的运算符，即使它们都以`+`.

但是，它们很容易记住：`=`表示向前看（或者，实际上是“这里”），`<`表示向后看，并且`!`具有“不”的传统含义。

* * *

关于你后面的例子：

```
irb(main):002:0> "foresight".sub(/(?!s)ight/, 'ee')
=> "foresee"

irb(main):003:0> "foresight".sub(/ight/, 'ee')
=> "foresee" 
```

是的，这些产生相同的输出。这是使用前瞻的棘手之处：

1.  正则表达式引擎已经尝试了一些东西，但它们没有奏效，现在它在`fores|ight`.
2.  它检查`(?!s)`. 是光标*后面*`s`的字符吗？不，是`i`！所以那部分匹配并且匹配继续，但是光标*没有移动*，我们仍然有`fores|ight`。
3.  它检查`ight`. 是否`ight`出现在光标之后？嗯，是的，确实如此，所以移动光标：`foresight|`。
4.  我们完成了！

光标移动到 substring`ight`上，所以这是完全匹配，这就是被替换的内容。

做`(?!a)b`是没用的，因为你说：下一个字符*不能*是`a`，它*必须*是`b`。但这与匹配相同`b`！

这有时很有用，但您需要更复杂的模式：例如，`(?!3)\d`将匹配任何不是 3 的数字。

这就是你想要的：

```
1.9.3p125 :001 > "foresight".sub(/(?<!s)ight/, 'ee')
 => "foresight" 
```

这断言*之前*`s`不会出现。 *`ight`*

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T21:00:17.307

在您意识到正则表达式匹配*位置*和字符之前，很难理解零宽度断言。

当您看到字符串“foo”时，您自然会读到三个字符。但是，也有四个*位置*，在这里用竖线标记：“|f|o|o|”。前瞻或后瞻（也称为环视）匹配之前或之后的字符匹配表达式的位置。

零宽度表达式与其他表达式之间的区别在于，零宽度表达式仅匹配（或“消耗”）位置。因此，例如：

```
/(app)apple/ 
```

将无法匹配“apple”，因为它试图匹配“app”两次。但

```
/(?=app)apple/ 
```

将成功，因为前瞻仅匹配“app”后面的*位置。*它实际上不匹配“app”字符，允许下一个表达式使用它们。

**环视描述**

> **积极前瞻：`(?=s)`**
> 
> > 想象一下，您是一名教官，正在执行检查。您从队伍的最前面开始，打算走过每个私人并确保他们达到预期。但是，在这样做之前，您要一一向前看，以确保它们已按财产顺序排列。士兵的名字是“A”、“B”、“C”、“D”和“E”。`/(?=ABCDE)...../.match('ABCDE')`. 是的，他们都在场并被考虑在内。
> 
> **负前瞻：`(?!s)`**
> 
> > 您执行检查并最终站在列兵 D。现在您将向前看，以确保来自其他公司的“F”没有再次意外滑入错误的队形。`/.....(?!F)/.match('ABCDE')`. 不，这次他没有溜进来，所以一切都很好。
> 
> **正面回顾：`(?<=s)`**
> 
> > 完成检查后，中士在编队的末端。他转身向后扫视，以确保没有人偷偷溜走。`/.....(?<=ABCDE)/.match('ABCDE')`. 是的，每个人都在场并受到重视。
> 
> **负面回顾：`(?<!s)`**
> 
> > 最后，训练中士最后看了一下，以确保二等兵 A 和 B 没有再一次调换位置（因为他们喜欢 KP）。`/.....(?<!BACDE)/.match('ABCDE')`. 不，他们没有，所以一切都很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T20:51:45.030

*零宽度断言*的含义是*匹配时消耗零个字符*的表达式。例如，在这个例子中，

```
"foresight".sub(/sight/, 'ee') 
```

匹配的是

```
foresight
    ^^^^^ 
```

因此结果将是

```
foreee 
```

然而，在这个例子中，

```
"foresight".sub(/(?<=s)ight/, 'ee') 
```

匹配的是

```
foresight
     ^^^^ 
```

因此结果将是

```
foresee 
```

零宽度断言的另一个例子是*字边界*字符`\b`. 例如，要匹配一个完整的单词，您可以尝试用空格将单词括起来，*例如*

```
"flight light plight".sub(/\slight\s/, 'dark') 
```

要得到

```
flightdarkplight 
```

但是您看到在替换过程中匹配空格如何将其删除？使用单词边界可以解决这个问题：

```
"flight light plight".sub(/\blight\b/, 'dark') 
```

匹配单词的`\b`开头或结尾，但实际上不匹配字符：它是*零宽度*。

也许对您的问题最简洁的答案是：**Lookahead 和lookbehind 断言是*一种*零宽度断言。所有前瞻和后瞻断言都是零宽度断言。**

* * *

以下是对您的示例的解释：

```
irb(main):001:0> "foresight".sub(/(?!s)ight/, 'ee')
=> "foresee" 
```

上面，你说的是，“匹配下*一个*字符*不是*，`s`然后是`i`。” 对于 an来说*总是*如此`i`，因为 an`i`从来都不是 an `s`，所以替换成功。

```
irb(main):002:0> "foresight".sub(/(?=s)ight/, 'ee')
=> "foresight" 
```

上面，你说，“匹配下*一个*字符*是*一个`s`，然后是一个`i`。” 这*从来都不*是真的，因为 an`i`从来都不是 an `s`，所以替换失败。

```
irb(main):003:0> "foresight".sub(/(?<=s)ight/, 'ee')
=> "foresee" 
```

上面，已经解释过了。（这是正确的。）

```
irb(main):004:0> "foresight".sub(/(?<!s)ight/, 'ee')
=> "foresight" 
```

以上，现在应该清楚了。在这种情况下，“firefight”将替代“firefee”，但不能将“foresight”替代为“foresee”。*

# java - 无法打开模型文件进行读取

> ID：14387641
> 
> 赞同：-2
> 
> 时间：2013-01-17T20:34:45.913
> 
> 标签：java

我是java新手。我想通过命令提示符读取可执行 Jar 文件。当我给出以下命令 Java -java "path.jar file"

它给出了无法打开模型文件进行读取的错误

我有模型文件，但我不知道如何给出该模型文件的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:22:55.063

你听起来很困惑。我认为您可能需要查看一个简单的教程，以确保您在命令行上正确执行操作。我假设您使用的是 Windows：

[http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html)

# memory - 组装中的实验性操作系统 - 无法在屏幕上显示字符 (pmode)

> ID：14387643
> 
> 赞同：2
> 
> 时间：2013-01-17T20:34:48.763
> 
> 标签：memory, video, assembly, operating-system, bootloader

我希望这里有一些经验丰富的汇编/操作系统开发人员，即使我的问题不是很大。我正在尝试组装并创建一个小型操作系统。事实上，我想要的是一个引导加载程序和第二个引导加载程序，它激活 pmode 并在屏幕上显示一个字符，使用视频内存（显然不是中断）。我正在使用 VirtualBox 来模拟​​代码，我将其手动粘贴到 VHD 磁盘中（两个代码扇区）

首先，我的代码：

**boot.asm**
*这是第一个引导加载程序*

```
bits    16
org     0
mov     al, dl

jmp     07c0h:Start

Start:
    cli
    push    ax
    mov     ax, cs
    mov     ds, ax
    mov     es, ax
    pop     ax
    sti
    jmp     ReadDisk

ReadDisk:
    call    ResetDisk
    mov     bx, 0x1000
    mov     es, bx
    mov     bx, 0x0000
    mov     dl, al
    mov     ah, 0x02
    mov     al, 0x01
    mov     ch, 0x00
    mov     cl, 0x02
    mov     dh, 0x00
    int     0x13
    jc      ReadDisk
    jmp     0x1000:0x0000

ResetDisk:
    mov     ah, 0x00
    mov     dl, al
    int     0x13
    jc      ResetDisk
    ret

times       510 - ($ - $$) db 0
dw          0xAA55 
```

**boot2.asm**
*这是第二个引导加载程序，粘贴在第二个扇区（接下来的 512 字节）*

```
bits    16
org     0

jmp     0x1000:Start

InstallGDT:
    cli
    pusha
    lgdt    [GDT]
    sti
    popa
    ret

StartGDT: 
    dd      0
    dd      0 

    dw      0ffffh 
    dw      0
    db      0
    db      10011010b
    db      11001111b
    db      0

    dw      0ffffh
    dw      0
    db      0
    db      10010010b
    db      11001111b
    db      0

StopGDT:

GDT:
    dw StopGDT - StartGDT - 1
    dd StartGDT + 10000h

OpenA20:
    cli
    pusha
    call    WaitInput
    mov     al, 0xad
    out     0x64, al
    call    WaitInput
    mov     al, 0xd0
    out     0x64, al
    call    WaitInput
    in      al, 0x60
    push    eax
    call    WaitInput
    mov     al, 0xd1
    out     0x64, al
    call    WaitInput
    pop     eax
    or      al, 2
    out     0x60, al
    call    WaitInput
    mov     al, 0xae
    out     0x64, al
    call    WaitInput
    popa
    sti
    ret

WaitInput:
    in      al, 0x64
    test    al, 2
    jnz     WaitInput
    ret

WaitOutput:
    in      al, 0x64
    test    al, 1
    jz      WaitOutput
    ret

Start:
    cli
    xor ax,     ax
    mov ds,     ax
    mov     es,     ax
    mov ax,     0x9000
    mov ss,     ax
    mov sp,     0xffff
    sti

    call    InstallGDT
    call    OpenA20

ProtectedMode:
    cli
    mov     eax,    cr0
    or      eax,    1
    mov     cr0,    eax
    jmp 08h:ShowChar

bits    32

ShowChar:
    mov ax, 0x10
    mov ds, ax
    mov ss, ax
    mov es, ax
    mov esp, 90000h

    pusha               ; save registers
    mov edi, 0xB8000
    mov bl, '.'
    mov dl, bl          ; Get character
    mov dh, 63      ; the character attribute
    mov word [edi], dx      ; write to video display
    popa
cli
hlt 
```

所以，我编译这段代码并将二进制文件粘贴到 VHD 中，然后在 Virtual Box 上运行系统。我可以看到它正确地进入了 pmode，启用了 A20 门，并且 LGTR 包含一个内存地址（我不知道它是否正确）。这是日志文件的某些部分，可能会引起您的兴趣：

```
00:00:07.852082 ****************** Guest state at power off ******************
00:00:07.852088 Guest CPUM (VCPU 0) state: 
00:00:07.852096 eax=00000011 ebx=00000000 ecx=00010002 edx=00000080 esi=0000f4a0     edi=0000fff0
00:00:07.852102 eip=0000016d esp=0000ffff ebp=00000000 iopl=0         nv up di pl zr na po nc
00:00:07.852108 cs={1000 base=0000000000010000 limit=0000ffff flags=0000009b} dr0=00000000 dr1=00000000
00:00:07.852118 ds={0000 base=0000000000000000 limit=0000ffff flags=00000093} dr2=00000000 dr3=00000000
00:00:07.852124 es={0000 base=0000000000000000 limit=0000ffff flags=00000093} dr4=00000000 dr5=00000000
00:00:07.852129 fs={0000 base=0000000000000000 limit=0000ffff flags=00000093} dr6=ffff0ff0 dr7=00000400
00:00:07.852136 gs={0000 base=0000000000000000 limit=0000ffff flags=00000093} cr0=00000011 cr2=00000000
00:00:07.852141 ss={9000 base=0000000000090000 limit=0000ffff flags=00000093} cr3=00000000 cr4=00000000
00:00:07.852148 gdtr=0000000000539fc0:003d  idtr=0000000000000000:ffff  eflags=00000006
00:00:07.852155 ldtr={0000 base=00000000 limit=0000ffff flags=00000082}
00:00:07.852158 tr  ={0000 base=00000000 limit=0000ffff flags=0000008b}
00:00:07.852162 SysEnter={cs=0000 eip=00000000 esp=00000000}
00:00:07.852166 FCW=037f FSW=0000 FTW=0000 FOP=0000 MXCSR=00001f80 MXCSR_MASK=0000ffff
00:00:07.852172 FPUIP=00000000 CS=0000 Rsrvd1=0000  FPUDP=00000000 DS=0000 Rsvrd2=0000
00:00:07.852177 ST(0)=FPR0={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852185 ST(1)=FPR1={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852193 ST(2)=FPR2={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852201 ST(3)=FPR3={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852209 ST(4)=FPR4={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852222 ST(5)=FPR5={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852229 ST(6)=FPR6={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852236 ST(7)=FPR7={0000'00000000'00000000} t0 +0.0000000000000000000000 ^ 0
00:00:07.852244 XMM0 =00000000'00000000'00000000'00000000  XMM1 =00000000'00000000'00000000'00000000
00:00:07.852253 XMM2 =00000000'00000000'00000000'00000000  XMM3 =00000000'00000000'00000000'00000000
00:00:07.852262 XMM4 =00000000'00000000'00000000'00000000  XMM5 =00000000'00000000'00000000'00000000
00:00:07.852270 XMM6 =00000000'00000000'00000000'00000000  XMM7 =00000000'00000000'00000000'00000000
00:00:07.852280 XMM8 =00000000'00000000'00000000'00000000  XMM9 =00000000'00000000'00000000'00000000
00:00:07.852287 XMM10=00000000'00000000'00000000'00000000  XMM11=00000000'00000000'00000000'00000000
00:00:07.852295 XMM12=00000000'00000000'00000000'00000000  XMM13=00000000'00000000'00000000'00000000
00:00:07.852302 XMM14=00000000'00000000'00000000'00000000  XMM15=00000000'00000000'00000000'00000000
00:00:07.852310 EFER         =0000000000000000
00:00:07.852312 PAT          =0007040600070406
00:00:07.852316 STAR         =0000000000000000
00:00:07.852318 CSTAR        =0000000000000000
00:00:07.852320 LSTAR        =0000000000000000
00:00:07.852322 SFMASK       =0000000000000000
00:00:07.852324 KERNELGSBASE =0000000000000000
00:00:07.852327 ***
00:00:07.852334 Guest paging mode:  Protected (changed 5 times), A20 enabled (changed 2 times) 
```

因此，这是测试结束时处理器的状态。

**问题是**，我看不到屏幕上的字符。这可能是与内存有关的问题（我必须承认我不太擅长内存寻址），例如段寄存器中的错误内容，或者可能与我尝试按顺序使用视频内存的方式有关显示那个字符，但它可能是别的东西。你觉得哪里不对？非常感谢！

**更新** 问题与内存寻址有关。不执行 ShowChar 指令。我在日志文件中验证了它。我所知道的是，直到这一行，一切都正确执行：

```
jmp 08h:ShowChar 
```

因此，这可能与错误的段寄存器、错误的 GDTR 或与内存寻址有关的其他事情有关。

**更新** 我将 GDT 更改为线性地址而不是段：偏移量，但仍然看不到字符。问题是我无法弄清楚问题的根源，因为我无法验证 GDT 是否正确。我可以看到所有寄存器的内容，但我怎么知道 GDTR（目前是`0000000000ff53f0:00e9`）是正确的？我只是假设由于错误的 GDT 而没有执行 ShowChar 函数，而只是一个假设。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:42:32.577

问题是，尽管您为在 DX 中提供角色和属性所做的所有工作：

```
mov bl, '.'
mov dl, bl          ; Get character
mov dh, CHAR_ATTRIB     ; the character attribute 
```

您最终将字 63 写入屏幕缓冲区：

```
mov word [edi], 63      ; write to video display 
```

这是一个零属性的问号，即*黑底**黑*问号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:32:08.977

我对此不是很有经验，但是...

 `````
GDT:
    dw StopGDT - StartGDT - 1
    dd StartGDT 
```` 

`这不需要是“绝对”（不是 seg:offs）地址吗？由于您已在 1000h 段加载它，因此我希望`dd StartGDT + 10000h`就在此处。不？`

 `* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T00:09:39.560

这是一个可行的极简引导加载程序，它使用 Qemu 切换到受保护并将“X”打印到 VGA（因此无需读取磁盘）。

```
[org 0x7C00]

cli
lgdt [gdt_descriptor] 

; Enter PM
mov eax, cr0
or  eax, 0x1
mov cr0, eax

; 1 GDT entry is 8B, code segment is 2nd entry (after null entry), so
; jump to code segment at 0x08 and load init_pm from there
jmp 0x8:init_pm   

[bits 32]
init_pm :
    ; Data segment is 3rd entry in GDT, so pass to ds the value 3*8B = 0x10
    mov ax, 0x10
    mov ds, ax
    mov ss, ax
    mov es, ax
    mov fs, ax
    mov gs, ax

    ;Print a X of cyan color
    ;Note that this is printed over the previously printed Qemu screen
    mov al, 'L'
    mov ah, 3 ; cyan
    mov edx, 0xb8004
    mov [edx], ax      

    jmp $

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[bits 16]

GDT:
;null : 
    dd 0x0 
    dd 0x0

;code : 
    dw 0xffff       ;Limit
    dw 0x0          ;Base
    db 0x0          ;Base
    db 0b10011010   ;1st flag, Type flag
    db 0b11001111   ;2nd flag, Limit
    db 0x0          ;Base

;data : 
    dw 0xffff       
    dw 0x0          
    db 0x0
    db 0b10010010 
    db 0b11001111 
    db 0x0

gdt_descriptor :
    dw $ - GDT - 1      ;16-bit size
    dd GDT              ;32-bit start address

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Bootsector padding
times 510-($-$$) db 0
dw 0xaa55 
```

然后做：

```
nasm boot.asm
qemu boot 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:40:20.457

要以标准 VGA 写入视频内存，您​​需要将数据写入内存地址`0xb8000`或内存中的 8000 字节。要做一个简单的黑白字符，只需将字符值与该值进行 OR 运算，即可`15 << 8`得到 16 位无符号短整型。然后将这 16 位写入该内存位置以绘制字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-03T12:01:04.840

问题是您使用 ORG 指令并将实模式和保护模式寻址方案混合在一起。你是对的，你的 32 位代码没有被执行。当 CPU 执行此代码时：

```
jmp 08h:ShowChar 
```

它跳转到当前加载的中断向量表中的某个位置，位于内存的开头，而不是您的 32 位代码。为什么？因为您定义的代码段的基数是 0，并且您告诉汇编器解析相对于 0 的地址：

```
Org 0 
```

因此，CPU 实际上是跳转到一个数值等于（0 + ShowChar 代码的第一条指令的偏移量）的地址（即代码段基址 + 偏移量）

要纠正此问题，请更改：

```
Org 0 
```

进入

```
Org 0x10000 
```

然后您需要更改您的段寄存器以匹配，但在这种情况下，您最初设置的段寄存器对于您最初指定的原始指令不正确，但是当原始指令如上所述更改时有效，因此无需进一步更改做出来。作为旁注，您的 origin 指令不正确这一事实可以解释为什么您的 GDT 地址似乎是垃圾 - 因为它实际上是您的 lgdt 指令加载的中断向量表的一部分。您指向 GDT 参数（“GTD”标签）的指针实际上指向中断向量表开头的某个位置。

无论如何，只需如上所示更改 origin 指令即可解决问题。

顺便说一句，您的代码看起来与[http://www.brokenthorn.com/Resources/OSDev8.html上的代码非常相似](http://www.brokenthorn.com/Resources/OSDev8.html)

*特别是*[http://www.brokenthorn.com/Resources/OSDev10.html](http://www.brokenthorn.com/Resources/OSDev10.html)页面底部提供的demo代码

有趣的..``

# javascript - 模拟按键有什么（缺点）优点？有没有更好的办法？

> ID：14387645
> 
> 赞同：0
> 
> 时间：2013-01-17T20:34:51.933
> 
> 标签：javascript, design-patterns, event-handling, dom-events

假设我有以下代码，它侦听输入元素，特别是在用户点击时执行回调`Enter`：

...

```
document.getElementById('human_input').onkeyup = (function (indicate) {
    return function(e) {
        var e = e || window.event; // for IE8
        if (e.keyCode === 13) { // if user presses 'Enter' key*
            indicate('User has submitted text');
        }
    }
})(indicate); 
```

[*`keyCode`参考[这里](http://www.javascriptkit.com/jsref/eventkeyboardmouse.shtml)。]

...

什么`indicate`并不是真正的重点，而是将一些代码应用于参数`'User has submitted text'`以在某处显示它。

现在，如果我希望某个脚本以相同的方式监听要填写的“不可见输入”，而不是由人填写，而是由代码的单独部分填写，该怎么办？

假设一个名为的黑盒脚本函数在某个指定点`fillHidden()`填写该字段。`hidden_input`

```
document.getElementById('hidden_input').value = 'All filled out.'; // for example 
```

一个*非常独立*的侦听器脚本模块如何找出该值。说这样做就够了……

```
document.getElementById('hidden_input').onkeyup = (function (indicate) {
    return function(e) {
        var e = e || window.event; // for IE8
        if (e.keyCode === 13) { // if user presses 'Enter' key
            indicate('User has submitted text');
        }
    }
})(indicate); 
```

并让`fillHidden()`代码执行此操作：

```
document.getElementById('hidden_input').value = 'All filled out.'; // for example
document.getElementById('hidden_input').onkeyup({keyCode: 13}); // simulate keypress 
```

或者这是不好的做法？关于[如何](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)做到这一点甚至[模拟键盘快捷键](https://stackoverflow.com/questions/10366896/have-a-script-simulate-a-control-keypress-sequence)一直存在问题，但我找不到任何关于模拟按键的实际优点或其他方面。

有没有更好的方法，一种模式，或者回调的联锁系统，可以使这些模块在分开的同时进行交互？我看过 Nicholas Zakas 将这种架构称为“松散耦合”的视频，我称之为*JavaScript 模式*的一本书（Stefanov，2010）暗示了订阅者/发布者模型的可能性。与模拟按键相比，这些有什么优势，特别是当模拟按键与用户的事件发生某种对称时？在模拟按键时可能会遇到什么样的缺点/危险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:40:04.200

这一切都非常...抽象。
这一切都很好。

为这样的抽象提出解决方案不一定是 SO 的目标，因为有一百万种方法可以做到这一点。

但是，有几个关键点：

1.  除非您以某种方式将模拟代码链接到用户生成的事件，否则浏览器可能会阻止您的模拟接管用户
    （想象一下浏览器让页面上的任何 JS 模拟任何按键或任何鼠标单击）时间）。
    这通常意味着您受到严格限制，使用一些不适合消费者使用的库，使用用户必须安装/运行或破坏的特定于浏览器的插件（即：FireFox/Chrome/IE）。选择一个（或多个）。

2.  带有回调的自定义事件通常允许您将程序分开，但让它们一起运行。
    Zakas 做了一些关于沙盒的精彩演讲，但这些都是非常企业级的、最终游戏类型的东西。它们很棒，库构建者和系统工程师应该完全考虑它们，但是为了制作平均页面，最好完成你需要编写的 100 行代码，而不是用一个库构建一个完整的框架它既将每个模块包裹在一个外壳中，*又将*自身注入该模块中。

3.  这就是 Pub-Sub（和 Observer）/Moderator（或 Mediator）发挥作用的地方。
    根据库的不同，上述任何一个也可能被称为“发射器”或“生成器”等。

上面的每一个都是以基本相同的方式创建的，并且做同样的事情。
目标是将结果传达给想要聆听的听众。
演讲者选择何时通知听众，以及告诉他们什么。
观众选择随时收听，等待下一次广播（可能永远不会出现，但至少他们正在关注它），或者他们可以选择关闭并停止收听广播。

那么，它们之间的区别在于“说话者”如何知道正在发生的事情。

**发布者-订阅者**

* * *

在`publisher-subscriber`中，说话者是使事情发生的对象。

看看推特。
您注册了一个 Twitter 帐户。拥有它后，您可以关注任何您想要的人。
每当他们发推文时，您都会收到有关它的通知。
任何人都可以关注您，因此无论何时您发布推文，他们都会收到通知。

执行该操作的人将该操作发布给任何想要听到它的订阅者。可能有 3000 个订阅者和一个发布者（一份时事通讯），或者 3000 个发布者和一个订阅者……可能有发布者不订阅，或者订阅者不发布……但这是范式。

**观察者**

* * *

在`observer`中，您正在谈论与执行工作的事物耦合的对象。
可能很紧 它可能是松散的。但是有一个东西在做某事，并且有一个东西确切地知道它在做什么。然后人们会窃听观察者以获取更新。

想想棒球时代，人们通过广播收听比赛。
观察者将是无线电评论员。
他不是那个击球或偷垒的人。他是展台上的那个人，他看到了一切，知道这一切意味着什么，并将其转化为用户友好的信息，供所有在家收听的人使用。

如今，玩家可以在制作游戏时直接向所有粉丝发布推文`pub-sub`（关闭更新谁是三垒之王（这一次，不是杰夫，在他狭窄的 Z28 中）。

**调解员/主持人**

* * *

在这种情况下，我们谈论的是每个人都知道的对象，但没有人知道彼此。

想象一个呼入式谈话广播节目。

每个人都知道这个节目。每个人都可以打电话到节目中，并与主持人交谈。但除了巧合之外，没有人知道其他听众的任何事情。

它与 有点不同`pub-sub`，因为每个人都是发布者，但您不必知道某人的 Twitter 句柄就可以收到他们的消息。你可以说`Hey Twitter, any time anybody in the world mentions #browns, let me know. I'm starving.`。
这有点不同，`observer`因为当主持人看着做工作的人时，*任何人*都可以随时做工作。

* * *

哪一个是正确的？

这完全取决于您需要什么，以及您实际上打算用它做什么。

以下是我们如何制作版主：

```
var Moderator = function () {
    var events = {},

        notify = function (evtName, data) {
            var evt = events[evtName];
            if (!evt) { return; }
            evt.forEach(function (func) { func(data); });
        },

        listen = function (evtName, callback) {
            events[evtName] = events[evtName] || [];
            events[evtName].push(callback);
        },

        ignore = function (evtName, callback) {
            var evt = events[evtName];
            if (!evt) { return; }
            evt.forEach(function (func, i, arr) {
                if (func === callback) { arr.splice(i, 1); }
            });
        };

    return { ignore : ignore,
             listen : listen,
             notify : notify  };
}; 
```

非常简单明了，对吧？当然，这并不是特别充满花里胡哨的东西，比如只订阅下一次事件触发，或者下一次 3 次，或者其他什么......

我们可能会这样使用它：

```
var Game = function () {

    var game_moderator = Moderator(),
        scoreboard     = Scoreboard(),
        messages       = MessageBoard(),
        player_one     = Player(),
        player_two     = Player();

    function initialize () {

        player_one.initialize(game_moderator);
        player_two.initialize(game_moderator);

        game_moderator.listen("player:death", scoreboard.update);
        game_moderator.listen("player:death", messages.add_kill);
        game_moderator.listen("chat:input",   messages.add_msg );

    }

    function start() {}
    /* update... draw... etc... */

    return {
        load : load,
        initialize : initialize,
        start : start
    };
};

var game = Game(),
    loading = game.load();

loading.done(function () {
    var initializing = game.initialize();
    initializing.done(game.start);
}); 
```

同时，`Player`可能看起来像这样：

```
var Player = function (name) {
    var system,

        health = 30,
        damage = [],

        attack = function () { /* ... */ },

        hurt = function (amt, type, from) {
            health -= amt;
            damage.push({ amount : amt, type : type, from : from });
        },

        die = function () {
            var killing_blow = damage[damage.length - 1];
            killing_blow.player = name;

            system.notify("player:death", killing_blow);
        },

        update = function () {
            if (health <= 0) { die(); }
        },

        draw = function () {},

        initialize = function (sys) { system = sys; };

    return {
        initialize : initialize,
        update : update,
        draw   : draw,
        hurt   : hurt
        /* ... */
    };

}; 
```

回顾`Game.initialize`函数，我们可以看到我们有一个记分牌和一个消息面板，它们都将处理“玩家：死亡”事件。

由于调用和定义玩家的方式，我在他们的初始化期间注入了对主持人的引用（以便我可以将所有内容分开：依赖注入）。

但是`player_one`什么都不知道`player_two`，`scoreboard`什么都不知道，除了偶尔调用它的`.update`方法，传入kill信息，`messages`得到各种各样的爱，却是那种大家都陌生的……

回到你原来的问题：

如果你`hidden-input`是通过监视按键来填写的，为什么不建立一个观察者呢？

构建一个连接到`keyup`事件监听器和`keydown`事件监听器的观察者。
让那个观察者把这些事件变成有用的信息（例如：当你按住一个键时，`keydown`事件每秒触发几十次——你可能不希望这样......所以在添加新键时要警惕，或者释放按下的键时发出警报）。

订阅`hidden-input`那个。

当`hidden-input`已满，或者您的要求正在运行时... ...并且您想触发一个事件，请拥有一个全局主持人（或作为其中一部分的系统顶层的主持人`hidden-input`） .

从那里，触发一个名为的事件`"hidden-input-filled"`或任何有意义的事件。

关心这一事件的人可以通过版主订阅该事件。

也就是说，当然，如果你的程序是以这样一种方式构建的，没有人应该知道隐藏输入，但是有些人应该知道`hidden-input`'s 的事件。

如果只有一组选定的事物应该知道`hidden-input`，并且这些是唯一应该知道它的事件的事物，并且`hidden-input`也应该能够对它们有所了解，那么制作它们`pub-sub`。

或者混合搭配你的联系：
这个想法是建立有意义的沟通，告诉人们他们需要知道的东西，仅此而已。

因此，如果 Twitter 用户应该是 sub-pub，但页面上的不同小部件（时间线、搜索和最近的图片等）不应该对彼此了解太多（当然不会让每张图片都能与每个时间线更新共享)，然后创建一个全局主持人，整个小部件可以通过它与其他小部件进行通信（例如当时间线需要根据搜索结果更新时），并且在每个小部件内部，有一个主持人和/或发布订阅用于不同的连接，在组件。

希望这会有所帮助，我希望这能解释为什么通过这样做来设计一个松散耦合的大型程序比通过劫持真实事件然后发射假事件更容易，旨在针对程序的不同区域。

老实说，如果您的整个站点及其所有程序都归结为：“我有这个输入可以做这件事，另一个输入可以做另一件事”，答案是这真的无关紧要很多。

当您到达：“我有一个页面，其中有 8 个空间用于不同的小部件，并且有 16 个可能的小部件可以随时加载到这 8 个插槽中的任何一个中，并且在某些小部件中应该执行一些主要操作在其他小部件中引起响应，并且每个小部件需要在内部控制很多事件，我们需要在 AJAX 库和 DOM/MVC（或 MVVM）库中通过管道来控制内部发生的所有内容每个小部件，它自己，只有我一个……”

那时，敲定这些东西并敲定 Promises/Deferreds/Futures，并将您的大想法分解成更小的部分，分布在正在运行的应用程序生命周期的不同点上，这是一个好主意。

# python - 如何在python中同时连接和压缩字符串变量？

> ID：14387647
> 
> 赞同：0
> 
> 时间：2013-01-17T20:34:57.880
> 
> 标签：python, string, formatting, concatenation

假设我在下面有这个变量（ id ， a,b,c,d ）

```
id  a b c d
x   2 4 5 7
y   4 5   9
z     1   2 
```

我想从这些字符串中创建一个名为“total”的新连接变量，所以我使用了下面的代码：

```
total = a + ' ' + b + ' ' + c + ' ' + d 
```

因为我不希望所有这些都彼此相邻，所以我需要在每个变量之间`2457`留一个空格（ ） ，我的结果看起来像这样`' '``2 4 5 7`

```
id  a b c d        total
x   2 4 5 7       2 4 5 7
y   4 5   9       4 5   9
z     1   2         1   2 
```

我的问题是.. 例如@y 在 5 和 9 之间，我只想要一个空格而不是两个或者我希望我的结果看起来像这样......谁能告诉我如何做到这一点？在 SAS 中，我可以很容易地使用一些东西来压缩，不知道如何在 python 中做到这一点。

```
id  a b c d        total
x   2 4 5 7       2 4 5 7
y   4 5   9       4 5 9
z     1   2       1 2 
```

希望我不会让任何人感到困惑〜，谢谢:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:44:26.310

使用`join`而不是手动连接事物的原因之一是您可以更轻松地完成更复杂的事情。

首先，如果你把你的`a + ' ' + b + ' ' + c + ' ' + d`变成`join`：

```
' '.join((a, b, c, d)) 
```

这还没有改变任何东西。

```
2 4 5 7
4 5   9
  1   2 
```

但是现在，我们怎么说“所有的非空字符串`(a, b, c, d)`”呢？简单的：

```
' '.join(x for x in (a, b, c, d) if x) 
```

所以：

```
2 4 5 7
4 5 9
1 2 
```

就是这样。

如果空值不是空字符串（或`None`），但是，例如`' '`，您需要更改测试。例如，也许：

```
' '.join(x for x in (a, b, c, d) if x.strip()) 
```

如果您不理解生成器表达式，以下所有内容大致等价，希望您能理解其中一个：

```
total = ' '.join(x for x in (a, b, c, d) if x)

total = ' '.join([x for x in (a, b, c, d) if x])

total = ' '.join(filter(bool, (a, b, c, d))

non_zero_values = []
for x in (a, b, c, d):
    if x:
        non_zero_values.append(x)
total = ' '.join(non_zero_values) 
```

在每种情况下，想法都是一样的：我们有一个 4 个值的序列，我们通过只保留不为空的值将其过滤为 0 到 4 个值的序列。

如果我们坚持你的明确连接，这仍然是*可能*的，只是更难更丑：

```
((a + ' ') if a else '' +
 (b + ' ') if b else '' +
 (c + ' ') if c else '' +
  d if d else '') 
```

这又给了你：

```
2 4 5 7
4 5 9
1 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:40:00.623

假设您的表数据位于`list`或`tuple`其中每一行都将 id 值作为其第一列，并且行中给定列的值`None`是否为空：

```
totals = [' '.join(value for value in row[1:] if value is not None) for row in data] 
```

或者，您可以将它放在一个 中`dict`，这可能更有用，具体取决于您以后如何使用它。

```
data = {'x' : {'values' : (2, 4, 5, 7)},
        'y' : {'values' : (4, 5, None, 9)},
        'z' : {'values' : (None, 1, None, 2)}}
for data_set in data.values():
    data_set['total'] = ' '.join(value for value in data_set['values'] if value is not None) 
```

# c# - 在 SQL 中抑制重复的列值

> ID：14387650
> 
> 赞同：0
> 
> 时间：2013-01-17T20:35:12.573
> 
> 标签：c#, linq, linq-to-sql

我正在构建 LINQ to SQL 及其针对 SQlite 数据库的运行。我需要从数据集中删除重复的列值。基本上，该值将显示在数据集中的第一行，并为具有相同值的每个后续行显示为空白。

我读过有关使用 break 的信息，但我不确定如何编写它或是否可以使用它。我阅读了解决相同问题的其他线程，但无法为我的场景提出解决方案。

我应该只检索数据集并在 C# 代码中抑制它们吗？如果是这样，我需要帮助/指针来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:59:03.457

如果您在 SSRS 报告 (.RDLC) 中显示此数据，请将[`HideDuplicates`](http://msdn.microsoft.com/en-us/library/aa256586.aspx)显示数据的文本框的属性设置为数据集的名称或其所在的分组（以在新组的开头显示值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:52:54.933

您是否尝试过使用 Linq 使用 Distinct Method 从表中获取值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:40:29.150

您可以遍历结果并设置一个局部变量

```
string lastValue = null;
foreach(var row in rows)
{
   if(lastValue == row.SomeColumn)
   {
      row.SomeColumn = null;
   }
   else
   {
     lastValue = row.SomeColumn
   }
} 
```

可能是其他方式，但如果没有更多关于你迄今为止所拥有的背景，很难说。

# c++ - 具有延迟密钥生成的 C++ 比较器函数

> ID：14387651
> 
> 赞同：0
> 
> 时间：2013-01-17T20:35:14.403
> 
> 标签：c++, stdmap

我想在 C++ 中存储具有自定义比较器函数的对象`std::map`，例如：

```
std::map<Part, Inventory, PartCmp> 
```

对于比较器，我想通过计算成本可能很高的“键”对对象进行排序，因此我考虑了一种惰性评估方法。下面的示例有点微不足道，但说明了问题：

```
class Part {
public:
   std::string item_id;
   int color_id;
   int condition;
   std::string name;
   std::string category;

   std::string key();       
private:
   std::string key_;
}

std::string Part::key() {
    // Only create key value if it hasn't been done before
    if (key_.empty()) {
        ostringstream keystream;
        keystream << item_id << color_id << condition;
        key_ = keystream.str();
    }
    return key_;
} 
```

这意味着我的比较器看起来是这样的：

```
struct PartCmp {
    bool operator() (Part& p1, Part& p2) const {
        return p1.key() < p2.key();
    }
}; 
```

这与我在哪里看到的所有其他示例都不同，`p1`并且`p2`被声明为`const`参数。

但是，在这种情况下`p1`并`p2`不能声明为`const`因为该`key()`方法修改了其各自的对象。代码可以编译，但这是一件坏事吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:36:40.273

您可能想要声明该字段

```
private:
   mutable std::string key_; 
```

看到[这个问题](https://stackoverflow.com/q/105014/841108)。

而且，正如[juanchopanza](https://stackoverflow.com/users/661519/juanchopanza)的评论所建议的那样，制定你的`key()`方法`const`

最后，我相信你更多的是做一些[记忆](http://en.wikipedia.org/wiki/Memoization)，而不是一些[懒惰的评价](http://en.wikipedia.org/wiki/Lazy_evaluation)。

# android - Android Pull-to-Refresh 在每次 Refresh() 时将 ListView 的大小翻倍

> ID：14387653
> 
> 赞同：0
> 
> 时间：2013-01-17T20:35:21.077
> 
> 标签：android, listview

每次我拉刷新（使用 chrisbanes 库）时，我的 ListView 都会获取附加到旧数据末尾的所有“新”数据，而不是替换它。我已经检查了我的 Json 解析器，它返回我的 ArrayList，这绝对**不是**我不小心在列表本身中加倍了。

我已经尝试了各种“notifyDataSetChanged()”和“.invalidate()”，但我似乎无法说服我的 ListView 完全重新填充自己。它在方向转换上正常工作，我意识到这是一个线索，但我似乎无法弄清楚在这种情况下有什么不同。

下面的代码，感谢任何提示！

```
public class VoicemailsPME extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.voicemails_pme);

    listView = (PullToRefreshListView) findViewById(R.id.pulllist);

    final String username = getIntent().getExtras().getString("username"); 
    final String password = getIntent().getExtras().getString("password");
    mailboxId = getIntent().getExtras().getString("mailboxId");

    m_voicemails = new ArrayList<Voicemail>();

    mHandlerFirst.post(new Runnable() {

        @Override
        public void run() {
            CheckConnectionTask CCT = new CheckConnectionTask(VoicemailsPME.this);
            CCT.execute(username, password);
            firstTime = false;
        }
    });

    listView.setOnRefreshListener(new OnRefreshListener<ListView>() {

        @Override
        public void onRefresh(PullToRefreshBase<ListView> lv) {
            lv.invalidate();
            mHandler.post(new Runnable() {                  
                @Override
                public void run() {
                    CheckConnectionTask CCT = new CheckConnectionTask(VoicemailsPME.this);
                    CCT.execute(username, password);
                }
            });
        }
    });

    this.m_adapter = new OrderAdapter(this, R.layout.voicemails_pme_row, m_voicemails);
    listView.setAdapter(m_adapter);
}

private Runnable returnRes = new Runnable() {

    @Override
    public void run() {
        if(m_voicemails != null && m_voicemails.size() > 0){
            for(int i=0;i<m_voicemails.size();i++)
                m_adapter.add(m_voicemails.get(i));
        }
    }
};

private void getVoicemails(){
    try{
        //Log.d("Data right before Json Parse", data);
        Json jsonParser = new Json(data);

        m_voicemails = jsonParser.getVoicemailsPME();
    } catch (Exception e) {
        Log.e("BACKGROUND_PROC", e.getMessage());
    }
    runOnUiThread(returnRes);
}

private class OrderAdapter extends ArrayAdapter<Voicemail> {

    private ArrayList<Voicemail> items;

    public OrderAdapter(Context context, int textViewResourceId, ArrayList<Voicemail> items) {
        super(context, textViewResourceId, items);
        this.items = items;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Voicemail vm = items.get(position);
        View v = convertView;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.voicemails_pme_row, null);
        }
        if (vm != null) {
            TextView tt = (TextView) v.findViewById(R.id.toptext);
            TextView bt = (TextView) v.findViewById(R.id.bottomtext);
            TextView nm = (TextView) v.findViewById(R.id.length);

            if (tt != null) 
            {
                tt.setText(vm.getPhoneNumber());
                if(vm.getNewStatus())
                    tt.setTypeface(null, Typeface.BOLD);
            }

            if(bt != null)
            {
                bt.setText(vm.getDate());
            }

            if(nm != null)
            {
                nm.setText(vm.getLength());
            }
        }
        return v;
    }
}

class CheckConnectionTask extends AsyncTask<String, Void, String> {
    private VoicemailsPME activity;
    private ProgressDialog dialog;
    private Context context;

    public CheckConnectionTask(VoicemailsPME activity)
    {
        this.activity = activity;
        context = activity;
        dialog = new ProgressDialog(context);
    }

    String username, password, str;
    @Override
    protected void onPreExecute() {
        if(firstTime)
        {
            this.dialog.setMessage("Loading...");
            this.dialog.show();
        }
    }

    @Override
    protected String doInBackground(String...arg0)
    {
        username = arg0[0];
        password = arg0[1];

        DefaultHttpClient httpclient = new DefaultHttpClient();
        Credentials creds = new UsernamePasswordCredentials(username, password);
        httpclient.getCredentialsProvider().setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT), creds);

        try{
            HttpPost post = new HttpPost("https://www.my.patlive.com/api/v1.0/Mailbox/" + mailboxId + "/messages?format=json");

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);

            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));

            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(post);
            str = inputStreamToString(response.getEntity().getContent()).toString();    

            if(str.contains("\"ErrorCode\":0"))
            {
                //data = str;
                return str;
            }

        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();}
        return str;
    }

    @Override
    protected void onPostExecute(String newData)
    {
        if(dialog.isShowing())
        {
            dialog.dismiss();
        }
        data = newData;
        getVoicemails();

        m_adapter.notifyDataSetChanged();

        listView.onRefreshComplete();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:55:20.783

我*认为*你的`getVoicemail()`方法是罪魁祸首。

由于适配器的工作方式，它使用您最初提供的支持数组`m_voicemails`（

```
public void run() {
    //Try adding m_adapter.clear() here
    if(m_voicemails != null && m_voicemails.size() > 0){
        for(int i=0;i<m_voicemails.size();i++)
            m_adapter.add(m_voicemails.get(i)); 
    }
} 
```

我发现将数据列表与适配器分开，然后将该数据输入适配器（使用集合而不是添加）更清楚。

# ruby-on-rails - RoR 的“神奇”命名空间解析是如何工作的？

> ID：14387654
> 
> 赞同：3
> 
> 时间：2013-01-17T20:35:36.047
> 
> 标签：ruby-on-rails, ruby

我来自使用 Python，我对 Ruby on Rails 的“魔力”如何工作感到非常困惑。

**1\. 任何地方都没有 require 语句**

在 Python 中，为了从任何地方访问函数，您必须导入。我认为基础红宝石也是如此。但是在使用 rails 时，我可以调用隐藏在其他模块中定义的变量和函数，而无需页面顶部的任何 require 语句。

例如，我可以有这样的文件：

```
class CartsController < ApplicationController
....
def show
        begin
            @cart = Cart.find(params[:id])
        rescue ActiveRecord::RecordNotFound
            logger.error "Attempt to access invalid cart #{params[:id]}"
            redirect_to store_url, notice: 'Invalid cart'
        end
 end 
```

其中**logger**、**redirect**等都没有定义。它是简单地从 ApplicationController 继承一些复杂的树，还是通过其他机制以某种方式访问​​这些命名空间？

**2.使用不存在的方法**

这是有效的 Rails 代码

```
current_item = line_items.find_by_product_id(product_id) 
```

在**find_by_products_id**尚未在任何地方定义的地方，Rails 以某种方式动态地动态“创建”该方法。关于如何做到这一点的任何技术见解？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T20:54:14.573

Rails 的“Magic”广泛使用`method_missing`和`const_missing`。

当您尝试调用未定义的方法时，ruby 会触发对`method_missing`. 这被库`ActiveRecord`用来实现动态查找器。

**method_missing 示例：**

`SomeModel.find_by_some_field("some_value")`没有定义。

这调用`SomeModel.method_missing(:find_by_some_field, "some_value")`.

ActiveRecord 然后将此调用转换为 `SomeModel.where(:some_field => "some_value")

（为了性能，ActiveRecord然后动态定义了这个方法，所以下次`find_by_some_field`定义）

**const_missing 示例：**

`SomeModel`尚未被要求。

Ruby 解释器`const_missing`使用参数`"SomeModel`"

Rails 遵循约定`"SomeModel"`应该在一个名为`some_model.rb`so`const_missing`的文件中定义`require "some_model"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:43:28.783

由于现有的答案都没有提到它：是的，像这样`redirect_to`的东西是通过 ApplicationController 继承的。在这种特殊情况下，在模块[ActionController::Redirecting](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)`redirect_to`中定义，该模块包含在 ActionController::Base 中（ApplicationController 继承自该模块）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:05:45.580

好的。你一口气问了很多问题。很难在一个答案中解释所有 ruby​​ 和 rails 魔法，但我会尝试为您提供一些有用的资源，您可以在其中找到一些答案。

1）关于require语句。如果您是 ruby​​ 和 rails 的新手，那么将很难理解 rails 应用程序是如何初始化的。这是一个教程，您可以获得一些有用的信息： http:
[//guides.rubyonrails.org/initialization.html](http://guides.rubyonrails.org/initialization.html)
如果您需要有关特定方法的更多信息，您可以随时查看文档。例如 redirect_to 方法信息：
[http ://apidock.com/rails/ActionController/Base/redirect_to](http://apidock.com/rails/ActionController/Base/redirect_to)

2）关于“使用不存在的方法”。这是 ruby​​ 语言最漂亮的特性之一，称为元编程。这也是高级话题。以下是一些有用的资源：
[http :](https://rads.stackoverflow.com/amzn/click/com/1934356476)
[//www.amazon.com/Metaprogramming-Ruby-Program-Like-Pros/dp/1934356476 Ruby 元编程在线教程](https://stackoverflow.com/questions/788689/ruby-metaprogramming-online-tutorial)
[http://yehudakatz.com/2009/11/15/metaprogramming-in -ruby-its-all-about-the-self/](http://yehudakatz.com/2009/11/15/metaprogramming-in-ruby-its-all-about-the-self/)
[http://rubylearning.com/blog/2010/11/23/dont-know-metaprogramming-in-ruby/](http://rubylearning.com/blog/2010/11/23/dont-know-metaprogramming-in-ruby/)

# jquery - 使用带有框大小的 div 的 jquery 动画高度：边框框

> ID：14387656
> 
> 赞同：1
> 
> 时间：2013-01-17T20:35:44.580
> 
> 标签：jquery, css, jquery-animate, border

有没有一种方法可以正确地为具有以下样式的 div 设置动画？

```
.div1{
 background-color: red;
 padding: 5px;
 margin: 5px;
 width: 100%;
 border: 4px solid #000 !important;
 border-radius: 8px;
 -webkit-box-sizing: border-box;
 -moz-box-sizing: border-box;
 box-sizing: border-box;
 height: 200px;
} 
```

我需要这里给出的每一个 CSS 样式。我的问题是动画开始时存在偏移错误（如您在此处看到的[http://jsfiddle.net/q5bmf/1/](http://jsfiddle.net/q5bmf/1/)，当加载示例时，从某处到 200px 有一个动画）。如果我隐藏一个或多个 css 样式，则该示例有效，但我不想这样做。那么有没有办法让jquery正常工作呢？

# php - 一个查询中的多个选择语句

> ID：14387657
> 
> 赞同：1
> 
> 时间：2013-01-17T20:35:44.750
> 
> 标签：php, mysql, pdo

我可以在 2 个查询中执行以下操作，但想让它更简单。这可以组合在一个查询中吗？如果是这样，它比执行两个查询而不是一个查询更有效率吗？

```
query1: SELECT page_id, coupon_id from table_1 WHERE key = :key
query2: SELECT folder from table_2 WHERE page_id = table_1.page_id 
```

对于我的最终结果，我需要 table_1 中的 coupon_id 和 table_2 中的文件夹。

在 query2 中，我需要使用 query1 的 page_id 结果来获取文件夹

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:37:54.893

使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html) ( `LEFT`,`RIGHT`或`INNER`取决于您的需要)：

```
SELECT 
    t1.page_id, 
    t1.coupon_id,
    t2.folder
FROM
    table_1 AS t1
    LEFT JOIN table_2 AS t2 ON
        t2.page_id = t1.page_id
WHERE
    t1.key = :key 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:38:23.203

您将需要`JOIN`以下表格`page_id`：

```
SELECT t1.page_id, 
    t1.coupon_id, 
    t2.folder
from table_1 t1
inner join table_2 t2
    on t1.page_id = t2.page_id
WHERE key = :key 
```

如果您在学习连接语法方面需要帮助，这里有一个[关于连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

我使用了`INNER JOIN`将返回两个表之间匹配的所有行。如果您想返回所有行，`table_1` 即使它在 中没有匹配的行`table_2`，那么您将使用`LEFT JOIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:38:42.847

```
SELECT
  table_1.coupon_id AS coupon_id,
  table_2.folder AS folder
FROM
  table_1
  INNER JOIN table_2 ON table_2.page_id = table_1.page_id
WHERE
  table_1.key = :key 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:39:03.253

```
SELECT t1.page_id, t1.coupon_id, t2.folder
FROM table_1 t1 LEFT JOIN table_2 t2 ON (t1.page_id = t2.page_id)
WHERE t1.key = :key 
```

这将比两个查询快，多少取决于您的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T20:39:18.533

请试试这个：

```
SELECT a.page_id, a.coupon_id, b.folder_id 
from table_1 a
join table_2 b
ON a.page_id = b.page_id
WHERE a.key = :key
group by a.page_id
; 
```

# ruby-on-rails - 将 Sencha Touch 与 Rails 集成

> ID：14387658
> 
> 赞同：0
> 
> 时间：2013-01-17T20:35:46.200
> 
> 标签：ruby-on-rails, sencha-touch-2

我有一个需要移动版本的网站。我决定使用 Sencha Touch 2.1 来创建它。

我找到了[以下宝石](https://github.com/AlexVangelov/sencha-touch-rails)，但它显然已经过时了。

所以我的问题是你知道将 Sencha Touch 与 Rails Assets Pipeline 集成的简单方法吗？

需要构建该应用程序的事实使我现在将其放在公共目录中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:49:04.240

我不认为 Sencha Touch 在这种情况下是一个很好的用例。

对于 Web 应用程序的移动版本，我建议切换到具有响应式网格系统的框架，例如 Zurb Foundation 或 Twitter bootstrap。

如果您仍然坚持使用 Sencha Touch，我建议您创建一个子域，例如[http://mobile.domain.com](http://mobile.domain.com)，然后从 S3 之类的东西提供静态文件，然后您可以使用 Sencha Touch 来使用您的 Rails API。

# ios - AFNetworking 自动持久化 Cookie

> ID：14387662
> 
> 赞同：9
> 
> 时间：2013-01-17T20:36:00.697
> 
> 标签：ios, session, afnetworking, nshttpcookie

在：据说[这个问题](https://stackoverflow.com/a/11039784/945170)`AFNetworking`会在后台自动处理cookie，但是在我问的[上一个](https://stackoverflow.com/q/14372817/945170)问题中，我在登录时无法将会话保持在用php创建的服务器上。一旦我关闭（停止调试在 Xcode 中）应用程序并在会话中返回时消失了。答案是像这样持久化cookie来解决问题：

```
NSData *cookiesData = [[NSUserDefaults standardUserDefaults] objectForKey:@"User"];
if ([cookiesData length] > 0) {
     for (NSHTTPCookie *cookie in [NSKeyedUnarchiver cookiesData]) {
           [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];
      }
} 
```

当我尝试做这样的事情时，这给了我一个应用程序崩溃。当我登录时，我像这样设置 NSUserDefault：

```
[[NSUserDefaults standardUserDefaults] setObject:data forKey:@"User"];
//Then synthesize 
```

这是错误的使用方法吗？NSHTTPCookieStorage 甚至是我的问题吗？谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-18T19:03:18.940

使用以下方法，这是保存和加载对我有用的 cookie 的正确方法：

```
- (void)saveCookies{

    NSData *cookiesData = [NSKeyedArchiver archivedDataWithRootObject: [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject: cookiesData forKey: @"sessionCookies"];
    [defaults synchronize];

}

- (void)loadCookies{

    NSArray *cookies = [NSKeyedUnarchiver unarchiveObjectWithData: [[NSUserDefaults standardUserDefaults] objectForKey: @"sessionCookies"]];
    NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];

    for (NSHTTPCookie *cookie in cookies){
        [cookieStorage setCookie: cookie];
    }

} 
```

希望能帮助到你！

# asp.net-mvc - 处理获取和发布

> ID：14387665
> 
> 赞同：0
> 
> 时间：2013-01-17T20:36:16.843
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个关于ASP.NET MVC 4 中的get 和post 过程的问题。我确定经常谈论但搜索这个话题并不容易。

让我试着解释一下：

我用标准方法启动我的控制器：

```
[HttpGet]
    public ActionResult Item() 
```

所以，在这个函数中，我检索了很多重要的数据，例如用户 ID 等。就我而言，我什至在我的 viewbag() 中收集数据来决定是否必须显示表单。

现在，如果我开始回帖：

```
 [HttpPost]
    public ActionResult Item(FormCollection formCollection) 
```

该函数作为标准 View() 返回。

现在的问题是，在 post 方法之后，没有调用 GET 方法的业务逻辑（检索用户 ID 等）......我试图用

```
return this.RedirectToAction("Item"); 
```

但这真的是从一开始就重复逻辑的解决方案吗？以及如何将新值从 post 方法提供给 get 方法？

最好的问候，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:15:47.493

该模式称为[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

要将其他数据传递给 GET 方法，您可以使用 MvcContrib 中的 TempData 和[ModelStateToTempDataAttribute](http://mvccontrib.codeplex.com/SourceControl/changeset/view/93c3fbd0f8cc#src/MVCContrib/Filters/ModelStateToTempDataAttribute.cs) - 如果返回 Redirect，它将 ModelState 传递给 tempdata，如果返回 View，则将 tempdata 传递给 modelstate。

```
[HttpGet]
[ModelStateToTempData]
public ActionResult Item(int id)
{
     // prepare view

     return View();
}

[HttpPost]
[ModelStateToTempData]
public ActionResult Item(FormCollection formCollection)
{
     // do some business logic
     int id = service.DoBusinessLogicAndReturnSomeId();

     return this.RedirectToAction("Item", new { id });
} 
```

您应该避免在 GET 中包含业务逻辑。所有业务逻辑都应该在 POST 方法中，并且在您调用该方法后，您可以重定向到准备视图的 GET。

# python - 使用 matplotlib 绘制 PNG 文件时反转颜色

> ID：14387668
> 
> 赞同：8
> 
> 时间：2013-01-17T20:36:28.777
> 
> 标签：python, opencv, matplotlib

我正在尝试使用 matplotlib，当然还有 python 来显示 PNG 文件。对于此测试，我生成了以下图像： ![原始文件](../Images/858f2d6346c40b22022525c393892da2.png)

现在，我将图像加载并转换为多维 numpy 矩阵：

```
import numpy as np
import cv2
from matplotlib import pyplot as plt

cube = cv2.imread('Graphics/Display.png')
plt.imshow(cube)
plt.ion() 
```

当我尝试在 matplotlib 中绘制该图像时，颜色会反转：![阴谋](../Images/404a43ab93540eb5b65c85e50005e58e.png)

如果矩阵没有任何修改，为什么图中的颜色是错误的？

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T20:59:03.970

看来您可能以某种方式`RGB`切换了`BGR`. 请注意，您的绿色被保留，但所有蓝色都变成了红色。如果`cube`具有形状 (M,N,3)，请尝试`cube[:,:,0]`与. 交换`cube[:,:,2]`。你可以这样`numpy`做：

```
rgb = numpy.fliplr(cube.reshape(-1,3)).reshape(cube.shape) 
```

从[OpenCV](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#Mat%20imread%28const%20string&%20filename,%20int%20flags%29) 文档：

> 注意：在彩色图像的情况下，解码图像的通道将按 BGR 顺序存储。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-04-24T23:48:01.427

尝试：

```
plt.imshow(cv2.cvtColor(cube, cv2.COLOR_BGR2RGB)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T19:24:35.930

正如其他人指出的那样，问题在于 numpy 数组采用 BGR 格式，但 matplotlib 期望数组以不同的方式排序。

您正在寻找[`scipy.misc.toimage`](http://docs.scipy.org/doc/scipy-0.17.0/reference/generated/scipy.misc.toimage.html)：

```
import scipy.misc
rgb = scipy.misc.toimage(cube) 
```

或者，您可以使用`scipy.misc.imshow()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T08:43:05.227

OpenCV 加载的彩色图像处于 BGR 模式。但是，Matplotlib 以 RGB 模式显示。所以我们需要将图像从 BGR 转换为 RGB：

```
plt.imshow(cv2.cvtColor(cube, cv2.COLOR_BGR2RGB)) 
```

# css - 更改焦点时，IE9 中的链接轮廓仍然存在

> ID：14387672
> 
> 赞同：2
> 
> 时间：2013-01-17T20:36:44.013
> 
> 标签：css, internet-explorer-9

我有一些 CSS 来更改页面上大纲的样式。

```
*:focus{outline: #5ab6df dotted 2px; } 
```

但是当我点击不同的链接时，部分大纲将保留在以前的链接上。

任何帮助，将不胜感激。-IE 9，不在兼容模式下运行。

![插图](../Images/d21231db39feab474ef86f8f0a279b18.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:41:27.383

您是否尝试在 *-selector 中将 outline-property 设置为 none？

```
* { outline:none; } 
```

# odata - OData：日期“大于”过滤器

> ID：14387673
> 
> 赞同：48
> 
> 时间：2013-01-17T20:36:45.760
> 
> 标签：odata

有没有办法通过指定“大于 xxxxx 的日期”过滤器来返回 OData 中的一系列记录……但使用以前从 OData 提要中获得的日期？

**用例：**假设我想构建一个显示最近完成的在线订单列表的网页。这就是我的目标：

1.  加载页面
2.  异步点击我的 OData 服务，返回最后 100 个订单（按日期降序排序，以便最先显示最近完成的订单）
3.  使用 OData 数据在页面上构建 HTML
4.  将 MAX 日期存储到全局变量中（如下所示`/Date(1338336000000)/`：）
5.  每隔 30 秒点击 OData 服务，但这次指定一个过滤器以仅返回订单日期大于前一个 MAX 日期的记录。在这种情况下：`/Date(1338336000000)/`
6.  如果返回任何记录，则为这些记录构建 HTML 并将项目添加到先前加载的项目之前。

我苦苦挣扎的地方是指定日期“大于”过滤器。出于某种原因，OData 中的日期过滤器似乎与 OData 自己的本机日期格式不太匹配。我是否需要将最初获得的日期转换为可用于过滤的不同格式？

我想做这样的事情：

```
http://mydomain/Services/v001.svc/Orders?$filter=close_dt%20gt%201338336000000 
```

仅供参考：我正在使用 V2

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-18T19:07:31.510

想通了。

OData V2 开箱即用以 JSON 日期格式返回 SQL 中的日期，如下所示：

```
/Date(1338282808000)/ 
```

但是，为了在 OData 调用中使用日期作为过滤器，您的日期必须采用 EDM 格式，如下所示：

```
2012-05-29T09:13:28 
```

因此，我需要从我的初始 OData 调用中获取日期，然后将其转换为 EDM 格式，以便在我的后续 OData 调用中使用，如下所示：

```
/Services/v001.svc/Orders?$filter=close_dt gt DateTime'2012-05-29T09:13:28' 
```

我最终创建了一个执行格式化 switcharoo 的 javascript 函数：

```
function convertJSONDate(jsonDate, returnFormat) {
        var myDate = new Date(jsonDate.match(/\d+/)[0] * 1);
        myDate.add(4).hours();  //using {date.format.js} to add time to compensate for timezone offset
        return myDate.format(returnFormat); //using {date.format.js} plugin to format :: EDM FORMAT='yyyy-MM-ddTHH:mm:ss'
    } 
```

几点注意事项：

*   JSON 格式似乎没有针对时区进行调整，因此返回的日期与我在数据库中看到的日期不匹配。所以我不得不手动添加时间来补偿（有人请解释一下）。
*   我正在使用[date.format.js](http://code.google.com/p/datejs/)插件，您可以[在此处](http://code.google.com/p/datejs/)下载该插件来格式化日期和添加时间。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-07-07T19:24:32.553

在 OData V4 中，日期过滤格式已更改为`$filter=close_dt gt 2006-12-30T23:59:59.99Z`

例如

[http://services.odata.org/V4/OData/OData.svc/Products?$filter=ReleaseDate%20gt%202006-12-30T23:59:59.99Z](http://services.odata.org/V4/OData/OData.svc/Products?$filter=ReleaseDate%20gt%202006-12-30T23:59:59.99Z)

对于以前版本的 OData，请参阅以前的答案

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-23T21:45:08.313

如果您使用日期时间逻辑，则可以执行 lt 或 gt。

例如 ...mydomain/Services/v001.svc/Orders?$filter=close_dt gt datetime'20141231'

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-05T21:44:05.330

仅供参考：在协议的 V3 中，非基于刻度的日期时间格式现在是默认格式：

[http://services.odata.org/Experimental/OData/OData.svc/Products%280%29?$format=application/json;odata=verbose&$select=ReleaseDate](http://services.odata.org/Experimental/OData/OData.svc/Products%280%29?%24format=application/json;odata=verbose&%24select=ReleaseDate)

... **“发布日期”：“1992-01-01T00:00:00”** ...

# python-3.x - python3 sqlalchemy pymysql 连接字符串

> ID：14387674
> 
> 赞同：4
> 
> 时间：2013-01-17T20:36:47.283
> 
> 标签：python-3.x, sqlalchemy, pymysql

使用python3，我可以使用pymysql连接到mysql。一切都按预期工作。随附的代码有效。

```
import pymysql

conn = pymysql.connect(host='127.0.0.1',  unix_socket='/home/jhgong/mysql/tmp/mysql.sock', user='root', passwd='my_pass', db='my_db', port='3333')
cur = conn.cursor()
cur.execute('select user from auth_users')
for i in cur:
    print(i) 
```

试图让 sqlalchemy 与 pymysql 连接，默认示例字符串似乎不起作用。除非我同时声明端口号和 unix_socket，否则上面的示例不起作用。

下面是我一直用来尝试连接 sqlalchemy 的方法。我假设套接字和端口号都是需要的。我使用 connect_args 来输入带有额外 unix_socket 位置的哈希。没有喜悦。

附上我一直在使用的导致错误的代码段。

```
conarg = {
   'unix_socket':'/home/jhgong/mysql/tmp/mysql.sock',
   'db'         :'ice'
}
engine = create_engine('mysql+pymysql://root:my_pass@127.0.0.1:3333/my_db',   connect_args = conarg, echo=True)
connection = engine.connect() 
```

无论有没有 conarg 哈希中的 db，我都会收到以下错误：

```
>>> connection = engine.connect()
2013-01-17 13:04:20,819 INFO sqlalchemy.engine.base.Engine b'SELECT DATABASE()'
2013-01-17 13:04:20,819 INFO sqlalchemy.engine.base.Engine ()
Traceback (most recent call last):
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/pool.py", line 724, in _do_get
    return self._pool.get(wait, self._timeout)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/util/queue.py", line 163, in get
    raise Empty
sqlalchemy.util.queue.Empty

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/base.py", line 1574, in connect 
    return self._connection_cls(self, **kwargs)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/base.py", line 58, in __init__
    self.__connection = connection or engine.raw_connection()
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/base.py", line 1637, in raw_connection
    return self.pool.unique_connection()
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/pool.py", line 182, in unique_connection
    return _ConnectionFairy(self).checkout()
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/pool.py", line 398, in __init__
    rec = self._connection_record = pool._do_get()
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/pool.py", line 744, in _do_get
    con = self._create_connection()
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/pool.py", line 187, in _create_connection 
    return _ConnectionRecord(self)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/pool.py", line 284, in __init__
    exec_once(self.connection, self)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/event.py", line 362, in exec_once
    self(*args, **kw)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/event.py", line 379, in __call__
    fn(*args, **kw)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/strategies.py", line 168, in first_connect
    dialect.initialize(c)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/dialects/mysql/base.py", line 2005, in initialize
    default.DefaultDialect.initialize(self, connection)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/default.py", line 183, in initialize
    self._get_default_schema_name(connection)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/dialects/mysql/base.py", line 1970, in _get_default_schema_name
    return connection.execute('SELECT DATABASE()').scalar()
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/base.py", line 645, in execute
    params)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/base.py", line 791, in _execute_text
    statement, parameters
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/base.py", line 854, in _execute_context
    context)
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/SQLAlchemy-0.8.0b1dev-py3.2.egg/sqlalchemy/engine/default.py", line 342, in do_execute
    cursor.execute(statement, parameters) 
  File "/nfs/site/home/jhgongx/.local/lib/python3.2/site-packages/PyMySQL3-0.5-py3.2.egg/pymysql/cursors.py", line 105, in execute
    query = query % escaped_args
TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple' 
```

它似乎在空池队列上引发错误。设置池队列的大小或类型无效。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T00:23:10.667

试试这个非常简单的例子：

```
import sqlalchemy
from sqlalchemy.sql import select
from sqlalchemy import Table, MetaData

def init():
    try:
        server = 'xx'
        db = 'xx'
        login = 'xx'
        passwd = 'xx'
        engine_str = 'mysql+mysqlconnector://{}:{}@{}/{}'.format(login, passwd, server, db)
        engine = sqlalchemy.create_engine(engine_str, echo=False, encoding='utf-8')
        connection = engine.connect()
        metadata = MetaData()
        t_servers = Table('your_table_here', metadata, autoload=True, autoload_with=engine)
        s = select([t_servers])
        result = connection.execute(s)
        for row in result:
            print(row['the_field'])
    except Exception:
        raise
    finally:
        connection.close()
if __name__ == '__main__':
    init() 
```

适用于 Python 3 的 Mysql 连接器：[在此处下载](http://dev.mysql.com/downloads/connector/python/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T20:40:07.667

我知道这已经晚了，但是[PyMySQL 要求](https://github.com/PyMySQL/PyMySQL#id1)提到`CPython >= 2.6 or >= 3.3`了，看起来您使用的是 CPython 3.2（使用的默认 python 版本），这可能是您的问题。

# xslt - Umbraco 宏 - 在所有节点中显示内容

> ID：14387675
> 
> 赞同：1
> 
> 时间：2013-01-17T20:36:56.777
> 
> 标签：xslt, macros, umbraco

我有一个导航栏，其中所有链接都是从 Umbraco 项目（由用户输入）中获取的。此导航栏需要显示在所有页面上。我尝试将项目插入主模板，但链接没有传递到从节点。所以，我假设我需要某种宏来抓取内容并显示在所有页面上。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:53:49.943

不久前我回答了一个关于创建多级 XSLT 导航菜单的问题：

[使用 XSLT 为 umbraco 创建多级菜单？](https://stackoverflow.com/questions/4099166/create-multilevel-menu-for-umbraco-using-xslt/4250176#4250176)

也许这会让你继续前进？

我认为关键是您需要到达内容树（主页）的顶部，然后构建导航。否则，导航将基于当前页面在树中的位置。

# c# - 根据前缀对字符串进行排序

> ID：14387679
> 
> 赞同：1
> 
> 时间：2013-01-17T20:37:14.750
> 
> 标签：c#, .net, sorting, arrays

如果给定一个带有随机前缀的数组，如下所示：

```
DOG_BOB
CAT_ROB
DOG_DANNY
MOUSE_MICKEY
DOG_STEVE
HORSE_NEIGH
CAT_RUDE
HORSE_BOO
MOUSE_STUPID 
```

我将如何对此进行排序，以便我有 4 个不同的数组/字符串列表？

所以最终结果会给我 4 个字符串数组或列表

```
DOG_BOB,DOG_DANNY,DOG_STEVE <-- Array 1
HORSE_NEIGH, HORSE_BOO <-- Array 2
MOUSE_MICKEY, MOUSE_STUPID <-- Array 3
CAT_RUDE, CAT_ROB <-- Array 4 
```

对不起我刚编的名字哈哈

```
var fieldNames = typeof(animals).GetFields()
                    .Select(field => field.Name)
                    .ToList();
List<string> cats = new List<string>();
List<string> dogs = new List<string>();
List<string> mice= new List<string>();
List<string> horse = new List<string>();
foreach (var n in fieldNames)
{
    var fieldValues = typeof(animals).GetField(n).GetValue(n);"

    //Here's what i'm trying to do, with if statements
    if (n.ToString().ToLower().Contains("horse"))
    {
    }
} 
```

所以我需要将它们分成字符串数组/字符串列表，而不仅仅是字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:43:32.397

```
var groups = fieldNames.GroupBy(n => n.Split('_')[0]); 
```

用法

```
foreach(var group in groups)
{
    // group.Key (DOG, HORSE, CAT, etc)

    foreach(var name in group)
         // all names groped by prefix
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:44:12.437

```
string[] strings = new string[] { 
                      "DOG_BOB",
                      "CAT_ROB",
                      "DOG_DANNY",
                      "MOUSE_MICKEY",
                      "DOG_STEVE",
                      "HORSE_NEIGH",
                      "CAT_RUDE",
                      "HORSE_BOO",
                      "MOUSE_STUPID"};

string[] results = strings.GroupBy(s => s.Split('_')[0])
                          .Select(g => String.Join(",",g))
                          .ToArray(); 
```

或者可能是这样的

```
List<List<string>> res = strings.ToLookup(s => s.Split('_')[0], s => s)
                                 .Select(g => g.ToList())
                                 .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:57:43.667

您可以预先对列表进行排序并按前缀排序：

```
 string[] input = new string[] {"DOG_BOB","CAT_ROB","DOG_DANNY","MOUSE_MICKEY","DOG_STEVE","HORSE_NEIGH","CAT_RUDE","HORSE_BOO","MOUSE_STUPID"};
        string[] sortedInput = input.OrderBy(x => x).ToArray();
        var distinctSortedPrefixes = sortedInput.Select(item => item.Split('_')[0]).Distinct().ToArray();

        Dictionary<string, string[]> orderedByPrefix = new Dictionary<string, string[]>();
        for (int prefixIndex = 0; prefixIndex < distinctSortedPrefixes.Length; prefixIndex++)
        {
            string prefix = distinctSortedPrefixes[prefixIndex];
            var group = input.Where(item => item.StartsWith(prefix)).ToArray();
            orderedByPrefix.Add(prefix, group);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:53:41.137

这个 LINQ 表达式可以满足您的需求。

```
var result = data.GroupBy(data.Split('_')[0])
                 .Select(group => String.Join(", ", group))
                 .ToList(); 
```

对于字符串列表的列表，请使用此表达式。

```
var result = data.GroupBy(data.Split('_')[0])
                 .Select(group => group.ToList())
                 .ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T20:39:38.130

```
foreach (String s in strings)
{
    if (s.StartsWith("CAT_")
        cats.Add(s);
    else if (s.StartsWith("HORSE_")
        horses.Add(s);
    // ...
} 
```

或者：

```
foreach (String s in strings)
{ 
    String[] split = s.Split(new Char [] { '_' });

    if (split[0].Equals("CAT")
        cats.Add(s);
    else if (split[0].Equals("HORSE")
        horses.Add(s);

    // ...
} 
```

但我更喜欢第一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T20:41:42.710

从算法上讲，我会执行以下操作：

1.  使用“_”作为分隔符解析所有唯一前缀。

2.  循环浏览您的前缀列表。2a. 检索任何具有您的前缀的值（循环/查找/正则表达式/取决于结构） 2b。将检索到的值放在列表中。2c。排序列表。

3.  输出您的结果，或对您的收藏做您需要的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T20:43:12.213

使用 LINQ，使用类似的东西

```
names.GroupBy(s => s.Substring(0, s.IndexOf("_"))) // group by prefix
     .Select(g => string.Join(",", g))             // join each group with commas
     .ToList();                                    // take the results 
```

**[查看实际情况](http://ideone.com/KQBIBa)**（包括一些额外的`.ToArray()`调用以实现 .NET 3.0 兼容性）

# c# - 在 WPF 中如何使用转换器在离线时为联系人灰度图像

> ID：14387680
> 
> 赞同：0
> 
> 时间：2013-01-17T20:37:20.707
> 
> 标签：c#, wpf, data-binding, binding, converter

我正在制作一个信使应用程序，为此我使用 lync 客户端。在我的应用程序 UI 中，我在列表视图中获取联系人（这是 LyncClient 的一个对象，具有名称、图像等属性）并将它们加载到定义如下的数据模板中：

```
<DataTemplate x:Key="ContactsTemplate">
        <Grid HorizontalAlignment="Left" Width="150" Height="150" Margin="10">
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
            </Border>
            <StackPanel VerticalAlignment="Bottom" Background="{Binding Availability, Converter={StaticResource AvailabilityToPresenceColor}}" Opacity="0.75">
                <TextBlock Text="{Binding Name}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="20" Margin="15,0,15,15"/>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

它有一个图像和文本块，显示联系人的图像和姓名，如下所示，stackpanel 的背景绑定到一个转换器，该转换器将可用性状态映射到一种颜色，例如，当 stackpanel 的背景变为红色时联系人忙。

现在我的**问题是**如何对图像产生相同的效果？（根据存在状态使图像变灰或变红）

我是绑定新手，所以完全迷失在这个绑定概念中。

**我的想法是：**图像 有一个**效果**事件处理程序，所以我想为此目的使用它并使用

```
<Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title} effect="{Binding Availability, Converter={StaticResource AvailabilityToPresenceColor}}"/> 
```

在转换器内部，在某些情况下，我想使用一些需要获取***图像源***的代码，但是当我们通过绑定获取图像源 `<Image Source="{Binding Image}"`时，我无法在转换器中获取图像源。

请建议我你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:12:47.363

不要使用转换器。使用像素着色器，例如这个灰度效果：[http ://bursjootech.blogspot.no/2008/06/grayscale-effect-pixel-shader-effect-in.html](http://bursjootech.blogspot.no/2008/06/grayscale-effect-pixel-shader-effect-in.html)

# php - PHP过滤mysql结果

> ID：14387684
> 
> 赞同：0
> 
> 时间：2013-01-17T20:37:44.860
> 
> 标签：php, mysql, filter

我有下面的 php 代码。我想根据我将在 url 上给出的查询过滤结果。例如，如果我给 http:/www.example.com/?aff=someuser ，只显示包含用户 someuser 的数据。这是我的代码

```
<?php
require_once('visitors_connections.php');//the file with connection code and functions

if ($_GET['start'] == "") $start = 0;
else $start = $_GET['start'];
$limit = 15;

$additionalQuery = "SQL_CALC_FOUND_ROWS ";

mysql_select_db($database_visitors, $visitors);
$query_visitors = "(SELECT ".$additionalQuery." * FROM visitors_table WHERE";

if ($_POST['day']!="") {
$query_visitors .= " visitor_day = '".$_POST['day']."'";
} else {
$query_visitors .= " visitor_day = ".date("d")."";

if ($_POST['month']!="") {
$query_visitors .= " AND visitor_month = '".$_POST['month']."'";
} else {
$query_visitors .= " AND visitor_month = ".date("m")."";
}

if ($_POST['year']!="") {
$query_visitors .= " AND visitor_year = '".$_POST['year']."'";
} else {
$query_visitors .= " AND visitor_year = ".date("Y")."";
}}
$query_visitors .= " LIMIT $start,$limit)";
$insert_visitors = mysql_query($query_visitors, $visitors) or die(mysql_error());
$row_visitors = mysql_fetch_assoc($insert_visitors);
$totalRows_visitors = mysql_num_rows($insert_visitors);

$nbItems = mysql_result(mysql_query("Select FOUND_ROWS() AS nbr"),0,"nbr");
if ($nbItems>($start+$limit)) $final = $start+$limit;
else $final = $nbItems;

echo '<table style="width:100%; border:1px dashed #CCC" cellpadding="3">
      <form id="form1" name="form1" method="post" action="display_visits.php">
       <tr>
        <td>day 
        <select name="day" id="day">
          <option value="" selected="selected"></option>
          <option value="01">01</option>
          <option value="02">02</option>
          <option value="03">03</option>
          <option value="04">04</option>
          <option value="05">05</option>
          <option value="06">06</option>
          <option value="07">07</option>
          <option value="08">08</option>
          <option value="09">09</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
        </select></td>
        <td>Month 
        <select name="month" id="month">
          <option value="" selected="selected"></option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
        </select></td>
        <td>Year 
        <select name="year" id="year">
          <option value="" selected="selected"></option>
          <option value="2013">2013</option>
        </select></td>
        <td><input type="submit" name="Submit" value="Submit" /></td>
        <td></td>
       </tr>';

echo '<tr>
        <td style="width:15%;border-bottom:1px solid #CCC">IP</td>
        <td style="width:15%;border-bottom:1px solid #CCC">Browser</td>
        <td style="width:15%;border-bottom:1px solid #CCC">Time</td>
        <td style="width:30%;border-bottom:1px solid #CCC">Refferer</td>
        <td style="width:25%;border-bottom:1px solid #CCC">Page</td>
       <td style="width:25%;border-bottom:1px solid #CCC">Affiliate</td>
       </tr>';

do {

echo '<tr onmouseout="this.style.backgroundColor=\'\'" 
      onmouseover="this.style.backgroundColor=\'#EAFFEA\'">
        <td>'.$row_visitors['visitor_ip'].'</td>
        <td>'.$row_visitors['visitor_browser'].'</td>
        <td>'.$row_visitors['visitor_hour'].':'.$row_visitors['visitor_minute'].'</td>
        <td>'.$row_visitors['visitor_refferer'].'</td>
        <td>'.$row_visitors['visitor_page'].'</td>
         <td>'.$row_visitors['visitor_affiliate'].'</td>
       </tr>';
} while ($row_visitors = mysql_fetch_assoc($insert_visitors));
paginate($start,$limit,$nbItems,"display_visits.php","");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:45:27.730

在 PHP 中，放置在 URL 中的值：

```
http:/www.example.com/?aff=someuser 
```

被放入一个超全局的`$_GET`. 这是一个数组，您可以`aff`通过执行以下操作获取值：

```
$_GET['aff'] 
```

在您的情况下，您可以使用它来更新您的查询：

```
if ($_GET['aff']!="") {
    $aff = $_GET['aff'];
    $aff = sanitise($aff);
    $query_visitors .= " AND user = '".$aff."'";
} 
```

请注意，您必须清理该值，`mysql_real_escape_string`通常用于执行此操作。

最后 mysql_* 方法已被弃用，您真的不应该使用它们。有关信息，请参见[此处](https://stackoverflow.com/q/12859942/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:43:21.857

尝试这个：

```
 <?php
        $url = "http:/www.example.com/?aff=someuser";
        parse_str(parse_url($url, PHP_URL_QUERY), $parts);
        var_dump( $parts ); // u will get array(1) { ["aff"]=> string(8) "someuser" }
        ?> 
```

# css - 如何仅显示角边框？

> ID：14387690
> 
> 赞同：73
> 
> 时间：2013-01-17T20:38:09.637
> 
> 标签：css, border, css-shapes

我想知道是否可以在 CSS 中制作边框但仅用于角落。像这样的东西：

```
****                         ****
*                               *
*                               *

             CONTENT

*                               *
*                               *
****                         **** 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-17T20:45:16.170

假设`<div id="content">CONTENT</div>`并且`CONTENT`包含至少一个 HTML 节点。

```
#content {position:relative}
#content:before, #content:after, #content>:first-child:before, #content>:first-child:after {
    position:absolute; content:' ';
    width:80px; height: 80px;
    border-color:red; /* or whatever colour */
    border-style:solid; /* or whatever style */
}
#content:before {top:0;left:0;border-width: 1px 0 0 1px}
#content:after {top:0;right:0;border-width: 1px 1px 0 0}
#content>:first-child:before {bottom:0;right:0;border-width: 0 1px 1px 0}
#content>:first-child:after {bottom:0;left:0;border-width: 0 0 1px 1px} 
```

这是一个[小提琴](http://jsfiddle.net/V8jmR/)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-01-17T20:49:39.700

我会使用重叠的div。

一种带有方角。另一个是圆角的（所以它不会隐藏第一个的角）。

```
<div id="div1" />
<div id="div2" />

#div1 {
  position:absolute;
  top:9px;
  left:9px;
  height:100px;
  width:100px;
  background-color:white;
  border:1px solid black;
}

#div2 {
  position:relative;
  top:-1px;
  left:-1px;
  height:102px;
  width:102px;
  background-color:white;
  border-radius: 15px;
} 
```

[http://jsfiddle.net/y3EfP/](http://jsfiddle.net/y3EfP/)

结果：

![在此处输入图像描述](../Images/e8a2bf555f34bb55fddad253fab4452f.png)

* * *

@web-tiki 提供的增强解决方案：

[http://jsfiddle.net/webtiki/y3EfP/147/](http://jsfiddle.net/webtiki/y3EfP/147/)

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2017-12-15T12:41:39.673

您可以使用多个线性渐变作为背景图像来实现这一点。

```
div {
  width: 100px;
  height: 100px;

  background:
    linear-gradient(to right, black 4px, transparent 4px) 0 0,
    linear-gradient(to right, black 4px, transparent 4px) 0 100%,
    linear-gradient(to left, black 4px, transparent 4px) 100% 0,
    linear-gradient(to left, black 4px, transparent 4px) 100% 100%,
    linear-gradient(to bottom, black 4px, transparent 4px) 0 0,
    linear-gradient(to bottom, black 4px, transparent 4px) 100% 0,
    linear-gradient(to top, black 4px, transparent 4px) 0 100%,
    linear-gradient(to top, black 4px, transparent 4px) 100% 100%;

  background-repeat: no-repeat;
  background-size: 20px 20px;
}
```

```
<div></div>
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2015-10-13T15:18:33.733

## SVG

如果您现在想开始使用向量以实现出色的响应能力，这是另一个不错的选择。

```
<svg viewBox="0 0 100 100" width="50px">
  <path d="M25,2 L2,2 L2,25" fill="none" stroke="black" stroke-width="3" />
  <path d="M2,75 L2,98 L25,98" fill="none" stroke="black" stroke-width="3" />
  <path d="M75,98 L98,98 L98,75" fill="none" stroke="black" stroke-width="3" />
  <path d="M98,25 L98,2 L75,2" fill="none" stroke="black" stroke-width="3" />
</svg>
```

SVG 是一个很好的工具。在这种情况下使用 SVG 的一些优点是：

*   曲线控制
*   填充控制（不透明度、颜色）
*   描边控制（宽度、不透明度、颜色）
*   代码量
*   是时候建立和保持形状了
*   可扩展
*   没有 HTTP 请求（如果在示例中使用内联）

* * *

**浏览器**对内联 SVG 的支持可以追溯到 Internet Explorer 9。有关更多信息，请参阅[canIuse](http://caniuse.com/#feat=svg-html5)。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2020-05-20T12:49:18.973

这是一个使用渐变和 CSS 变量的想法，您可以在其中轻松控制边框的形状：

```
.box {
  --b:5px;   /* thickness of the border */
  --c:red;   /* color of the border */
  --w:20px;  /* width of border */

  border:var(--b) solid transparent; /* space for the border */
  --g:#0000 90deg,var(--c) 0;
  background:
    conic-gradient(from 90deg  at top    var(--b) left  var(--b),var(--g)) 0    0,
    conic-gradient(from 180deg at top    var(--b) right var(--b),var(--g)) 100% 0,
    conic-gradient(from 0deg   at bottom var(--b) left  var(--b),var(--g)) 0    100%,
    conic-gradient(from -90deg at bottom var(--b) right var(--b),var(--g)) 100% 100%;
  background-size:var(--w) var(--w);
  background-origin:border-box;
  background-repeat:no-repeat;

  /*Irrelevant code*/  
  width:200px;
  height:100px;
  box-sizing:border-box;
  margin:5px;
  display:inline-flex;
  font-size:30px;
  justify-content:center;
  align-items:center;
  line-height:90px;
}
```

```
<div class="box">
some content
</div>

<div class="box" style="--c:blue;--w:40px;--b:2px">
some content
</div>

<div class="box" style="--c:green;--w:30%;--b:8px">
some content
</div>

<div class="box" style="--c:black;--w:50%;--b:3px">
some content
</div>

<div class="box" style="--c:purple;--w:10px;--b:10px">
some content
</div>

<div class="box" style="--c:orange;--w:calc(50% - 10px);--b:4px">
some content
</div>
```

[![仅 CSS 角边框](../Images/e2d3447f2de15c6698e5371bda9dd4d1.png)](https://i.stack.imgur.com/Fkx4j.png)

如果将其与蒙版结合使用，您也可以拥有复杂的颜色：

```
.box {
  --b:5px;   /* thickness of the border */
  --c:red;   /* color of the border */
  --w:20px;  /* width of border */

  padding:var(--b); /* space for the border */

  position:relative;
  /*Irrelevant code*/  
  width:200px;
  height:100px;
  box-sizing:border-box;
  margin:5px;
  display:inline-flex;
  font-size:30px;
  justify-content:center;
  align-items:center;
  line-height:90px;
}
.box::before {
  content:"";
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:var(--c,red);
  --g:#0000 90deg,#000 0;
  -webkit-mask:
    conic-gradient(from 90deg  at top    var(--b) left  var(--b),var(--g)) 0    0,
    conic-gradient(from 180deg at top    var(--b) right var(--b),var(--g)) 100% 0,
    conic-gradient(from 0deg   at bottom var(--b) left  var(--b),var(--g)) 0    100%,
    conic-gradient(from -90deg at bottom var(--b) right var(--b),var(--g)) 100% 100%;
  -webkit-mask-size:var(--w) var(--w);
  background-origin:border-box;
  -webkit-mask-repeat:no-repeat;
  mask:
    conic-gradient(from 90deg  at top    var(--b) left  var(--b),var(--g)) 0    0,
    conic-gradient(from 180deg at top    var(--b) right var(--b),var(--g)) 100% 0,
    conic-gradient(from 0deg   at bottom var(--b) left  var(--b),var(--g)) 0    100%,
    conic-gradient(from -90deg at bottom var(--b) right var(--b),var(--g)) 100% 100%;
  mask-size:var(--w) var(--w);
  mask-repeat:no-repeat;
}
```

```
<div class="box">
some content
</div>

<div class="box" style="--c:repeating-linear-gradient(45deg,red,blue);--w:40px;--b:2px">
some content
</div>

<div class="box" style="--c:repeating-linear-gradient(90deg,#000 0 5px,transparent 5px 10px);--w:30%;--b:8px">
some content
</div>

<div class="box" style="--c:conic-gradient(red,green,yellow);--w:50%;--b:3px">
some content
</div>

<div class="box" style="--c:purple;--w:10px;--b:10px">
some content
</div>

<div class="box" style="--c:repeating-linear-gradient(45deg,orange 0 5px,blue 5px 10px);--w:calc(50% - 10px);--b:4px">
some content
</div>
```

[![CSS角只有多色](../Images/93397eb6ff5c5185ec5b423aad96d384.png)](https://i.stack.imgur.com/LiOe3.png)

为什么不使用半径：

```
.box {
  --b:5px;   /* thickness of the border */
  --c:red;   /* color of the border */
  --w:20px;  /* width of border */
  --r:25px;  /* radius */

  padding:var(--b); /* space for the border */

  position:relative;
  /*Irrelevant code*/  
  width:200px;
  height:100px;
  box-sizing:border-box;
  margin:5px;
  display:inline-flex;
  font-size:30px;
  justify-content:center;
  align-items:center;
  line-height:90px;
}
.box::before {
  content:"";
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:var(--c,red);
  padding:var(--b);
  border-radius:var(--r);
  -webkit-mask:
    linear-gradient(#fff 0 0) top   /calc(100% - 2*var(--w)) var(--b),
    linear-gradient(#fff 0 0) bottom/calc(100% - 2*var(--w)) var(--b),
    linear-gradient(#fff 0 0) left  /var(--b) calc(100% - 2*var(--w)),
    linear-gradient(#fff 0 0) right / var(--b) calc(100% - 2*var(--w)),
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite:destination-out;
  -webkit-mask-repeat:no-repeat;
  mask:
    linear-gradient(#fff 0 0) top   /calc(100% - 2*var(--w)) var(--b),
    linear-gradient(#fff 0 0) bottom/calc(100% - 2*var(--w)) var(--b),
    linear-gradient(#fff 0 0) left  /var(--b) calc(100% - 2*var(--w)),
    linear-gradient(#fff 0 0) right / var(--b) calc(100% - 2*var(--w)),
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite:exclude;
  mask-repeat:no-repeat;
}
```

```
<div class="box">
some content
</div>

<div class="box" style="--c:repeating-linear-gradient(45deg,red,blue);--w:40px;--b:2px;--r:40px;">
some content
</div>

<div class="box" style="--c:repeating-linear-gradient(90deg,#000 0 5px,transparent 5px 10px);--w:30%;--b:8px">
some content
</div>

<div class="box" style="--c:conic-gradient(red,green,yellow);--w:50%;--b:3px">
some content
</div>

<div class="box" style="--c:purple;--w:10px;--b:10px;--r:0px">
some content
</div>

<div class="box" style="--c:repeating-linear-gradient(45deg,orange 0 5px,blue 5px 10px);--w:calc(50% - 10px);--b:4px;--r:10px">
some content
</div>
```

[![仅具有半径和 CSS 渐变的角边框](../Images/b234183e15fa95cae0a9c681f0d094f6.png)](https://i.stack.imgur.com/4PWUX.png)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2013-01-17T21:23:18.340

您绝对可以放置四个`<div>`s，每个角落一个，每个都有适当的两个边框。

```
.corners {
  position: relative;
  width: 50px; /* for demo purposes */
  padding: 10px;
}

.top, .bottom {
  position: absolute;
  width: 20px;
  height: 20px;
  pointer-events: none;
}

.top {
  top: 0;
  border-top: 1px solid;
}

.bottom {
  bottom: 0;
  border-bottom: 1px solid;
}

.left {
  left: 0;
  border-left: 1px solid;
}

.right {
  right: 0;
  border-right: 1px solid;
}
```

```
<div class="corners">
  <div class="top left"></div>
  <div class="top right"></div>
  <div class="bottom right"></div>
  <div class="bottom left"></div>
  content goes here
</div>
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-10-13T15:08:00.643

这里有一些方法可以在**不使用任何额外的伪/真实元素的情况下**创建这种效果。需要注意的一点是，这两种方法都只适用于现代浏览器，因为它们使用 CSS3 属性。

**Using** `border-image`：该`border-image`属性可以很容易地创建这样的效果。方法如下：

*   创建一个透明图像，它的边框就在角落里，就像[这里](http://i.stack.imgur.com/s2CAw.png)一样。
*   将此图像设置为`border-image-source`，让浏览器处理其余的 :) 由于默认值为`border-image-repeat`，`stretch`因此即使容器变大，浏览器也会拉伸原始图像以适应容器。
*   为该`border-image-width`属性设置的值决定了边框的粗细。

```
.bordered {
  background-color: beige;
  border-image-source: url("http://i.stack.imgur.com/s2CAw.png");
  border-image-slice: 1;
  border-image-width: 5px;
}
.square {
  height: 150px;
  width: 150px;
}
.large-square {
  height: 350px;
  width: 350px;
}

/* Just for demo */

div {
  margin-bottom: 10px;
}
```

```
<div class='bordered square'></div>
<div class='bordered large-square'></div>
```

**优点：**

*   不需要额外的元素（伪或真实），这意味着更少的混乱标记，伪元素可以用于其他需求。
*   反应灵敏。也就是说，即使容器的尺寸发生变化，浏览器也会调整边框。

**缺点：**

*   [相对较低的浏览器支持](http://caniuse.com/#feat=border-image)。如果需要 IE10- 支持，那么这是不行的。
*   由于边框图像被拉伸，如果原始图像的画布是正方形并且容器是矩形，那么边框在顶部和底部看起来会比左右更宽。

    ```
    .bordered {
      background-color: beige;
      border-image-source: url("http://i.stack.imgur.com/s2CAw.png");
      border-image-slice: 2;
      border-image-width: 5px;
    }
    .small-square {
      height: 75px;
      width: 75px;
    }
    .square {
      height: 150px;
      width: 150px;
    }
    .large-square {
      height: 350px;
      width: 350px;
    }
    .rectangle {
      height: 150px;
      width: 250px;
    }
    .large-rectangle {
      height: 150px;
      width: 350px;
    }

    /* Just for demo */

    div {
      margin-bottom: 10px;
    }
    ```

    ```
    <div class='bordered small-square'></div>
    <div class='bordered square'></div>
    <div class='bordered large-square'></div>
    <div class='bordered rectangle'></div>
    <div class='bordered large-rectangle'></div>
    ```

* * *

**Using** `background-image`：该`background-image`属性也可以与`linear-gradient`图像一起使用以产生效果。方法如下：

*   创建四个`linear-gradient`图像（两个用于顶部、底部和两个用于左、右）。这些渐变将从所需的颜色开始，并继续是与边框图像的宽度/高度一样多的像素的颜色。之后它应该是透明的。
*   对于顶部和底部边框，渐变的方向应该是`to right`. 对于左右边框，应该是`to bottom`.
*   该`background-size`值决定了边框的粗细。对于顶部和底部边框，渐变图像的大小在 X 轴上为 100%，在 Y 轴上为 5px（厚度）。对于左右边框，X 轴大小为 5px（厚度），Y 轴大小为 100%。
*   `background-repeat`应该`repeat-x`为顶部、底部边框和`repeat-y`左右边框设置为。
*   视情况在`background-position`X 或 Y 轴上设置为（-1 * 渐变颜色大小的一半）。这是为了使一半的彩色区域出现在元素的一侧，而另一半出现在另一侧（因为渐变是重复的）。

```
.bordered.square {
  height: 150px;
  width: 150px;
}
.bordered.rectangle {
  height: 150px;
  width: 250px;
}
.bordered {
  background-color: beige;
  background-image: linear-gradient(to right, black 30px, transparent 30px), linear-gradient(to right, black 30px, transparent 30px), linear-gradient(to bottom, black 30px, transparent 30px), linear-gradient(to bottom, black 30px, transparent 30px);
  background-size: 100% 5px, 100% 5px, 5px 100%, 5px 100%;
  background-position: -15px 0%, -15px 100%, 0% -15px, 100% -15px;
  background-repeat: repeat-x, repeat-x, repeat-y, repeat-y;
}

/* Just for demo */

div {
  margin-bottom: 10px;
}
```

```
<div class='bordered square'></div>
<div class='bordered rectangle'></div>
```

**优点：**

*   不需要额外的元素（伪或真实），这意味着更少的混乱标记，伪元素可以用于其他需求。
*   由于渐变中颜色的宽度是固定的，因此具有合理的响应性。如果边框虚线的宽度需要根据容器的尺寸进行更改，那么我们可以将渐变中的像素值更改为百分比（还有一些小的更改），如下面的片段所示。

    ```
    .bordered.square {
      height: 150px;
      width: 150px;
    }
    .bordered.large-square {
      height: 250px;
      width: 250px;
    }
    .bordered {
      background-color: beige;
      background-image: linear-gradient(to right, black 10%, transparent 10%), linear-gradient(to right, black 10%, transparent 10%), linear-gradient(to bottom, black 10%, transparent 10%), linear-gradient(to bottom, black 10%, transparent 10%);
      background-size: 90% 5px, 90% 5px, 5px 90%, 5px 90%;
      background-position: 0% 0%, 0% 100%, 0% 0%, 100% 0%;
      background-repeat: repeat-x, repeat-x, repeat-y, repeat-y;
    }

    /* Just for demo */

    div {
      margin-bottom: 10px;
    }
    ```

    ```
    <div class='bordered square'></div>
    <div class='bordered large-square'></div>
    ```

**缺点：**

*   [相对较好的浏览器支持](http://caniuse.com/#feat=css-gradients)。如果需要 IE9 支持，那么这是不行的。
*   如果使用基于百分比的渐变，那么这里提到的矩形的相同缺点`border-image`也将适用。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-10-14T08:03:07.970

### 剪辑路径

在彼此之上使用两个 div。并在后面的 div 中添加一个剪辑路径，您可以创建类似边框的效果。

```
.wrapper {
  display: inline-block;
  background-color: black;
  line-height: 0px;
  -webkit-clip-path: polygon(0% 100%, 30% 100%, 30% 70%, 70% 70%, 70% 100%, 100% 100%, 100% 70%, 70% 70%, 70% 30%, 100% 30%, 100% 0%, 70% 0%, 70% 30%, 30% 30%, 30% 0%, 0% 0%, 0% 30%, 30% 30%, 30% 70%, 0% 70%);
    clip-path: polygon(0% 100%, 
                             30% 100%, 
                             30% 70%, 
                             70% 70%, 
                             70% 100%, 
                             100% 100%, 
                             100% 70%, 
                             70% 70%,
                             70% 30%,
                             100% 30%,
                             100% 0%,
                             70% 0%,
                             70% 30%,
                             30% 30%,
                             30% 0%,
                             0% 0%,
                             0% 30%,
                             30% 30%,
                             30% 70%,
                             0% 70%);
}
.wrapper {} .wrapper div {
  display: inline-block;
  height: 150px;
  width: 150px;
  margin: 10px;
  background-color: white;
}
```

```
<div class="wrapper">
  <div></div>
</div>
```

### 两个伪元素

使用两个大的伪元素可以创建边框效果。

```
.cut-border {
  position: relative;
  display: inline-block;
  border: 5px solid black;
  width: 150px;
  height: 150px;
}
.cut-border::before {
  content: "";
  position: absolute;
  height: calc(100% + 10px);
  width: 50%;
  background-color: white;
  top: -5px;
  left: 25%;
}
.cut-border::after {
  content: "";
  position: absolute;
  height: 50%;
  width: calc(100% + 10px);
  background-color: white;
  top: 25%;
  left: -5px;
}
```

```
<div class="cut-border"></div>
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-10-06T22:02:08.117

发现了这个问题，但是对border-radius的做法并不满意：因为我用的比较粗的边框，效果没有我想的那么好。我设法创建了另一个解决方案，没有图像，也没有任何额外的标记：

```
 .box {
        /* fake border */
        position: relative;
        overflow: hidden;
        box-shadow: inset 0px 0px 0px 10px green;
        padding: 1em;
    }

    .box:before {
        /* this element will hide the fake border on the top and bottom */
        content:'';         
        display: block;
        position: absolute;
        border-top:10px solid white;
        border-bottom:10px solid white;
        /* height = border-width x2 */
        height:calc(100% - 20px); 
        top:0;
        /* width = size of fake-border x2 */
        width: calc(100% - 36px);
        /* left = size of fake-border */
        left:18px;
    }

    .box:after {
        /* this element will hide the fake border on the left and right */
        /* the rules for width, heigth, top and left will be the opposite of the former element */
        display: block;
        position: absolute;
        content:'';
        border-right:10px solid white;
        border-left:10px solid white;
        height:calc(100% - 36px);
        width: calc(100% - 20px);
        top:18px;
        left: 0;
    } 
```

这是一个带有此示例的 JSFiddle：[https](https://jsfiddle.net/t6dbmq3e/) ://jsfiddle.net/t6dbmq3e/ 希望对您有所帮助。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-11-12T21:07:18.450

这是我最近对垂直和水平居中的内容所做的事情。

的HTML

```
<div class="column">
  <div class="c-frame-wrapper">
    <div class="c-frame-tl"></div>
    <div class="c-frame-tr"></div>
    <div class="c-frame-br"></div>
    <div class="c-frame-bl"></div>
    <div class="c-frame-content">
        &copy; Copyright 2015 - Company name<br /><br />
        St Winifrids St,<br />
        The Saints, Harrogate HG1 5PZ, UK<br />
    </div>
  </div>
</div> 
```

CSS

```
.c-frame-wrapper {
  width: 250px;
  height: 100px;
  font-size:11px;
  color: $dark-grey-lighten-70;
  /* center align x axis */
  right: auto;
  left: 50%;
  transform: translateX(-50%);
}

.c-frame-tl {
  top: 0;
  left: 0;
  position: absolute;
  width:10px;
  height:10px;
  border-width: 3px;
  border-style: solid none none solid;
  border-color: #eb0000;
}

.c-frame-tr {
  top: 0;
  right: 0;
  position: absolute;
  width:10px;
  height:10px;
  border-width: 3px;
  border-style: solid solid none none;
  border-color: #eb0000;
}

.c-frame-br {
  bottom: 0;
  right: 0;
  position: absolute;
  width:10px;
  height:10px;
  border-width: 3px;
  border-style: none solid solid none;
  border-color: #eb0000;
}

.c-frame-bl {
  bottom: 0;
  left: 0;
  position: absolute;
  width:10px;
  height:10px;
  border-width: 3px;
  border-style: none none solid solid;
  border-color: #eb0000;
}

.c-frame-content {
  width:100%;
  text-align: center;
  /*center alignment x and y*/
  position: absolute;
  top: 50%;
  left: 50%;
  bottom: auto;
  right: auto;
  transform: translate(-50%,-50%); 
} 
```

[JSFiddle](http://jsfiddle.net/andrewjones83/660mdpfv/)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-04-06T15:35:44.417

我认为最好的解决方案是伪元素方法。漂亮干净，不会用（太多）额外元素污染 html。

我使用上面的代码创建了这个 sass mixin，用于复制和粘贴解决方案：

```
@mixin corner-borders($corner-width: 1px, $corner-size: 5px, $color-border: grey, $color-background: white) {
    position: relative;
    border: $corner-width solid $color-border;
    background-color: $color-background;

    &::before {
        content: "";
        z-index: 0;
        position: absolute;
        top: -$corner-width;
        bottom: -$corner-width;
        left: $corner-size;
        right: $corner-size;
        background-color: $color-background;
    }

    &::after {
        content: "";
        z-index: 0;
        position: absolute;
        top: $corner-size;
        bottom: $corner-size;
        left: -$corner-width;
        right: -$corner-width;
        background-color: $color-background;
    }
} 
```

然后你可以像这样使用它：

# html:

```
<div class="border">
    <div class="content">
        Content
    </div>
</div> 
```

# SCSS

```
.border {
    @include corner-borders;
}

.content {
    position: relative;
    z-index: 1;
} 
```

您需要其中的 z-index 和相对位置，以便内容位于伪元素之上。

我在这里做了一个codepen演示：http: [//codepen.io/timrross/pen/XMwVbV](http://codepen.io/timrross/pen/XMwVbV)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-11-03T15:01:42.923

到目前为止没有人提到的一个选项是使用多个[`box-shadow`](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow)来模拟这种类型的边框。每个角落都需要一个盒子阴影：

```
div {
  width: 150px;
  height: 150px;
  padding: 10px;
  box-shadow:
    -80px -80px 0 -70px black,
     80px -80px 0 -70px black,
    -80px  80px 0 -70px black,
     80px  80px 0 -70px black;
}
```

```
<div>I am a box with borders only in the corners.</div>
```

它的工作原理是有四个阴影（左上、右上、右下、左下）并使用负扩展半径减小它们的大小（模糊半径将保持为零）：

```
box-shadow: offset-x offset-y [blur-radius] [spread-radius] [color]; 
```

虽然这是可行的（即使在 IE 上！）并且它是一个简单的方法（不需要额外的元素或伪元素），但它有两个很大的缺陷：

1.  您需要知道盒子的大小以相应地调整 box-shadow 的值（或者至少有一个大致的想法来调整阴影的值，因为它们不接受百分比）。
2.  角不会完全成正方形。相反，它们将与盒子大小成正比。这可以通过使用 8 个阴影而不是 4 个来避免，但事情会变得一团糟。

* * *

最后，使用背景渐变可能是一个更好的选择，并提供“更多控制”，因为它都在框内。它可以通过 4 个线性梯度来实现（一些答案表示 8 个）：

```
div {
  --size: 32px;
  width: 100px;
  height: 100px;
  padding: 10px;
  background:
    linear-gradient(blue var(--size), transparent 0 calc(100% - var(--size)), blue 0) 0 0 / 4px 100%,
    linear-gradient(blue var(--size), transparent 0 calc(100% - var(--size)), blue 0) 100% 0 / 4px 100%,
    linear-gradient(to right, blue var(--size), transparent 0 calc(100% - var(--size)), blue 0) 0 0 / 100% 4px,
    linear-gradient(to right, blue var(--size), transparent 0 calc(100% - var(--size)), blue 0) 0 100% / 100% 4px
    ;
  background-repeat: no-repeat;
}
```

```
<div>I am a box with borders only in the corners.</div>
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-01-17T20:52:38.717

好的，因为我在 CSS 中很烂，我想我自己无法做到，但我做到了，它似乎有效：

```
<div id="half" style="position:absolute; top:0; left:0; width:30px; height:30px; overflow:visible; border-top:3px solid #F00; border-left:3px solid #06F;"></div>

<div id="half" style="position:absolute; bottom:0; right:0; width:30px; height:30px; overflow:visible; border-bottom:3px solid #F00; border-right:3px solid #06F;"></div> 
```

它似乎正在工作；-) 抱歉打扰并感谢您的帮助。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-01-17T20:52:46.950

没有干净的 css 方法可以只给角落一个边框，但你可以尝试模仿效果。可能是这样的：http: [//jsfiddle.net/RLG4z/](http://jsfiddle.net/RLG4z/)

```
<div id="corners">
  <div id="content">
    content
  </div>
</div>

#corners {
    width: 200px;
    height: 50px;
    border-radius: 10px;
    background-color: red;
    margin: 10px;
}
#content {
  background-color: white;
  border-radius: 15px;
  height: 30px;
  padding: 10px;
} 
```

由于边框半径的不同，底层 div 的背景颜色显示为低谷，在角上产生边框的效果。

我个人认为我会使用背景图像来实现这一点，以便更好地控制结果。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-01-17T20:52:53.080

这是你的照片：

HTML：

```
<div class="shell">

    <div class="top">

        <div class="clear">
            <div class="left">
              &#42;&#42;&#42;&#42;
            </div>
            <div class="right">
              &#42;&#42;&#42;&#42;
            </div>
        </div>

        <div class="clear"> 
            <div class="left">
              &#42;
            </div>
            <div class="right">
              &#42;
            </div>
        </div>

        <div class="clear">
            <div class="left">
              &#42;
            </div>
            <div class="right">
              &#42;
            </div>
        </div>

    </div>

    <div class="content">
        <p>CONTENT</p>
    </div>

    <div class="bottom">

        <div class="clear"> 
            <div class="left">
              &#42;
            </div>
            <div class="right">
              &#42;
            </div>
        </div>

        <div class="clear">
            <div class="left">
              &#42;
            </div>
            <div class="right">
              &#42;
            </div>
        </div>

      <div class="clear">
            <div class="left">
              &#42;&#42;&#42;&#42;
            </div>
            <div class="right">
              &#42;&#42;&#42;&#42;
            </div>
        </div>
    </div> 
```

和 CSS：

```
.shell { width: 200px;}
.left{ float:left; }
.right{float:right; }
.clear { clear: both; line-height: 10px; }
.content { line-height: 10px; text-align: center; } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-10-13T22:42:12.767

这是上述答案的修改版本，该版本具有相对定位的父级和绝对定位的子级，因此我们可以添加悬停效果。

[http://jsfiddle.net/3jo5btxd/](http://jsfiddle.net/3jo5btxd/)

```
HTML:
<div id="div1"><div id="div2"><img src="http://placekitten.com/g/82/82"></div></div>

CSS:

#div1 {
    position: relative;
    height: 100px;
    width: 100px;
    background-color: white;
    border: 1px solid transparent;
}

#div2 {
    position: absolute;
    top: -2px;
    left: -2px;
    height: 84px;
    width: 84px;
    background-color: #FFF;
    border-radius: 15px;
    padding: 10px;
}

#div1:hover {
    border: 1px solid red;
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-07-23T16:44:41.313

我喜欢@Tims 方法，但它迫使我为框设置背景颜色，这是我不想要的，因为我将焦点放在背景图像对象上。在我的情况下，我也只需要 2 个边缘，这使得它的结构可能有所不同。

因此，我对其进行了一些不同的构造，使其更加灵活并且仍然适用于每个浏览器。

如果您需要 4 个角，则该解决方案不起作用，只是想将其留在这里以供将来的搜索者使用。

```
:root {
  --border-width: 5px;
  --corner-size: 20px;
  --border-color: red;
}

.box-corners {
  position:relative;
}

        .box-corners::before,
        .box-corners::after {
            content: "";
            position: absolute;
            width:var(--corner-size);
            height:var(--corner-size);
            border:var(--border-width) solid var(--border-color);
        }

        .box-corners::before {
            left: 0;
            top: 0;
            border-bottom:none;
            border-right:none;
        }

        .box-corners::after {
            bottom: 0;
            right: 0;
            border-left:none;
            border-top:none;
        }

/* ############## THIS IS JUST OPTIONAL FOR THE HOVER EFFECT ############# */

    .box-corners {
        transition:background-color 0.3s ease-in-out;
    }

    .box-corners:hover {
        background:rgba(0, 0, 0, 0.5)!important;
    }

        .box-corners::before,
        .box-corners::after {
            box-sizing:border-box;
            transition:width 0.3s ease-in-out, height 0.3s ease-in-out;
        }

        .box-corners:hover::before,
        .box-corners:hover::after {
            width:100%;
            height:100%;
        }
```

```
<div class="box-corners" style="width:300px;height:300px;background:#f7f7f7;" />
```

**悬停效果**

您只需要 css 代码的第一部分即可使边缘工作。第二部分只是允许轻松添加一个漂亮的悬停效果，如果你不需要它，你也可以删除它。

**没有 CSS 变量和 Sass**

如果您不想使用 css 变量，则可以将变量替换为硬编码值。如果你想用它制作一个 sass mixin，只需将它包装在一个 @mixin 调用中，然后用 sass 变量替换 vars。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-05-18T00:32:01.113

我接受了 Majid Laissi 的回答并修改为更易于理解、简单且易于修改。

```
img{
  width:70px;
  height:70px;
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
}

.custom-corners {
  position: relative;
  width: 150px;
  height: 150px;
  background-color: white;
  border: 1px solid black;
}

.custom-corners:before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  border: 1px solid #fff;
  height: 100%;
  width: 100%;
  border-radius: 10%;
}

.custom-corners:after {
  content: '';
  position: absolute;
  bottom: -1px;
  right: -1px;
  border: 1px solid #fff;
  height: 100%;
  width: 100%;
  border-radius: 10%;
}
```

```
<div class="custom-corners">
  <img src="https://cdn.logo.com/hotlink-ok/logo-social-sq.png" alt="">
</div>
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-10-14T10:41:12.280

```
.border_coners {
      background:
        linear-gradient(to right, #e5e5e5 1px, transparent 1px) 0 0,
        linear-gradient(to right, #e5e5e5 1px, transparent 1px) 0 100%,
        linear-gradient(to left, #e5e5e5 1px, transparent 1px) 100% 0,
        linear-gradient(to left, #e5e5e5 1px, transparent 1px) 100% 100%,
        linear-gradient(to bottom, #e5e5e5 1px, transparent 1px) 0 0,
        linear-gradient(to bottom, #e5e5e5 1px, transparent 1px) 100% 0,
        linear-gradient(to top, #e5e5e5 1px, transparent 1px) 0 100%,
        linear-gradient(to top, #e5e5e5 1px, transparent 1px) 100% 100%;
      background-repeat: no-repeat;
      background-size: 50px 50px;
               } 
```

[![边界锥示例](../Images/49475d629ecdf9be62167b0a0edd7665.png)](https://i.stack.imgur.com/71yH7.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-02-02T20:05:19.217

我调整了边界半径方法，但我不想使用绝对定位或必须知道内容的大小。

幸运的是，在所有方向上设置负边距提供了我们需要的一切：

```
.corner-borders {
    border: 1px solid #ccc;
}

.corner-borders-reveal {
    border-radius: 20%; /* or any other size */
    border: 1px solid white;
    margin: -1px;
    padding: 4px;
 } 
```

# c# - 以编程方式在 asp.net 标记中设置连接字符串

> ID：14387694
> 
> 赞同：1
> 
> 时间：2013-01-17T20:38:26.170
> 
> 标签：c#, asp.net, .net, connection-string

我正在修改某人编写的一些旧代码，他们在 web.config 中放置了一个连接字符串，由于业务规则，我不得不将其删除。我创建了一个生成连接字符串的单例类，并希望以类似的方式在 asp.net 标记中设置它：

```
<asp:SqlDataSource ID="DataSource" runat="server" 
    ConnectionString='<% MyNameSpace.Credentials.Instance.DatabaseConnectionString %>'
    ProviderName="Oracle.DataAccess.Client" 
    SelectCommand="SELECT * from aTable">
</asp:SqlDataSource> 
```

不幸的是，这不起作用，并且正在使用该行并将其用作文字连接字符串。任何人都知道如何像这样访问内联类的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:55:25.617

考虑以下（并非不现实的）场景。这是一个正常的工作日早晨，您的异常监控突然开始发送大量 SQL 登录错误。在给您的基础架构团队打了几次惊慌失措的电话后，很明显数据库服务器上的 RAID 控制器出现故障。最近的替代品在另一个国家/地区，至少需要 48 小时才能到达。

幸运的是，您的 DBA 已经准备好并已开始在另一台服务器上进行恢复，该服务器将在不到一个小时内可用，其中一位将很快给您打电话告知连接详细信息。

此时，如果您的应用程序将数据库连接详细信息存储在一个中央位置，您应该能够在备份数据库恢复后几乎立即使应用程序重新联机 - 在快速测试以确保没有发生数据损坏和正常功能之后可用。

如果您必须搜索项目中的每一个页面和类，那么更新所有不同的连接字符串可能需要几个小时，而且您不能确定您没有错过任何一个。

与其在午餐前恢复应用程序，不如让用户一直工作到深夜，因为用户对你失去了一天感到愤怒。

诚然，查找/替换工具将使跟踪对服务器/数据库名称的引用变得更加容易，而无需手动搜索每一行代码，但是您仍然使生活变得比需要的困难得多。

微软在 web.config 文件中创建了连接字符串元素是有充分理由的，它可以满足许多高安全性环境，甚至为字符串提供加密以保证它们的安全。[简而言之，使用ReSharper](http://www.jetbrains.com/resharper/)、[dotPeek](http://www.jetbrains.com/decompiler/)或[JustDecompile 之](http://www.telerik.com/products/decompiler.aspx)类的解决方案，即使是编译后的代码也几乎可以立即变得可读。如果您的经理认为在编译后的代码中保留连接字符串更安全，那么他们就错了。

如果您**必须**将连接字符串存储在 web.config 之外，那么我建议您为此目的创建一个实用程序类 -

```
using System;

namespace YourApplicationNameSpace
{
    public static class Common
    {
        public static string DatabaseConnectionString
        {
            get { return "server=myserver;database=Products;uid=salesUser;pwd=sellMoreProducts"; }
        }
    }
} 
```

然后可以将字符串添加到页面的声明性数据源中，如下所示 -

```
<asp:SqlDataSource ID="DataSource" runat="server" ProviderName="Oracle.DataAccess.Client" 
SelectCommand="SELECT * from aTable"></asp:SqlDataSource> 
```

在后面的代码中 -

```
protected void Page_Load(object sender, EventArgs e)
{
    DataSource.ConnectionString = YourApplicationNameSpace.Common.DatabaseConnectionString;
} 
```

这看起来像贵公司使用的模式。

我相信这也可以（注意添加等号）-

```
<asp:SqlDataSource ID="DataSource" runat="server" 
ConnectionString='<%= MyNameSpace.Credentials.Instance.DatabaseConnectionString %>'
ProviderName="Oracle.DataAccess.Client" 
SelectCommand="SELECT * from aTable">
</asp:SqlDataSource> 
```

如果您必须将连接字符串限制在单个页面中，那么-

```
protected void Page_Load(object sender, EventArgs e)
{
    DataSource.ConnectionString = "server=myserver;database=Products;uid=salesUser;pwd=sellMoreProducts";
} 
```

然后开始寻找新工作，因为维护代码将是一场噩梦。

旁注，您应该确保为 SQL 使用[参数化命令](http://msdn.microsoft.com/en-us/magazine/cc163917.aspx#S4)，尤其是在更新或删除数据以避免[SQL 注入](https://www.owasp.org/index.php/SQL_Injection)- 甚至更好的存储过程（也使用正确构造的参数）时。

# ios6 - 检测 UIViewController 上的界面旋转，即使未在 - (NSUInteger)supportedInterfaceOrientations 中定义

> ID：14387695
> 
> 赞同：6
> 
> 时间：2013-01-17T20:38:26.013
> 
> 标签：ios6

我有一个 UIViewController 在主视图上处理几个 UIImageViews。底部是一个 UIToolbar，其中包含一些要与之交互的项目。

现在，当我旋转设备时，我不希望 viewController 旋转，而只是 UIImageViews。换句话说，底部的工具栏将在左侧（或右侧），但 imageViews 会正确旋转。

所以，通过使用这些方法

```
- (BOOL)shouldAutoRotate {
   return YES;
} 
```

结合

```
- (NSUInteger)supportedInterfaceOrientations {
   return UIInterfaceOrientationMaskPortrait;
} 
```

和

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
// rotate the image views here
} 
```

设备上的任何旋转都不会执行，因为仅支持一种界面方向 ( `UIInterfaceOrientationMaskPortrait`)。但是当我在 - 方法中添加另一个要支持的界面方向时`supportedInterfaceOrientations`，视图控制器也会旋转。

即使只支持一个方向，如何检测视图控制器的旋转？或者是否有另一种可能性来根据不断变化的设备方向旋转 UIViews？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-13T11:19:09.900

尝试使用 UIDevice 实例来检测设备物理方向的变化。要开始接收通知，您可以使用以下内容（`viewWillAppear:`例如在方法中）：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

    //No reason to ask NSNotification because it many cases `userInfo` equals to
    //@{UIDeviceOrientationRotateAnimatedUserInfoKey = 1;}
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceDidRotate) name:@UIDeviceOrientationDidChangeNotification object:nil];
} 
```

要取消注册接收设备旋转事件，请使用此（`viewWillDisappear:`例如）：

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

    [[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIDeviceOrientationDidChangeNotification object:nil];
} 
```

这是一个`deviceDidRotate`函数的例子：

```
- (void)deviceDidRotate {
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

    switch (orientation) {
        case UIDeviceOrientationPortrait:
        case UIDeviceOrientationPortraitUpsideDown:
            // do something for portrait orientation
            break;
        case UIDeviceOrientationLandscapeLeft:
        case UIDeviceOrientationLandscapeRight:
            // do something for landscape orientation
            break;

        default:
            break;
    }
} 
```

# xslt - XSLT 能否基于 DTD 在两个选项之间切换？

> ID：14387696
> 
> 赞同：0
> 
> 时间：2013-01-17T20:38:30.350
> 
> 标签：xslt

我有一种情况，我正在处理符合两个 DTD 之一的 XML。有没有办法使用 XSL 来评估 XML 文件中指定的 DTD，然后为该 DTD 调用适当的 XSLT？例如，我正在想象我将拥有的 dtd1.xsl 和 dtd2.xsl，其中每一个都被开发用于转换符合两个不同 DTD 的 XML。另一个 XSL 文件将首先查看传入 XML 文件的 DTD，并根据该 DTD 确定应该使用 dtd1.xsl 还是 dtd2.xsl 来转换 XML。

我知道在 XSL 之外的代码中有很多方法可以做到这一点，但我正在专门寻找 XSL 解决方案。

# c# - 如何查看字典中是否存在字符串中的多字子字符串？

> ID：14387697
> 
> 赞同：0
> 
> 时间：2013-01-17T20:38:31.130
> 
> 标签：c#, dictionary

我正在尝试检查关键字的字符串，如果该单词存在，则从字典中获取值。当关键字是多词短语时，问题就存在了。

所以我有一本字典：

```
Dictionary<string, string> d = new Dictionary<string, string>(StringComparer.InvariantCultureIgnoreCase);

d.Add("keyword1", "D2");
d.Add("keyword2", "D3");
d.Add("keyword3", "D4");
d.Add("keyword4", "D4");
d.Add("keyword5", "D5");
d.Add("key word six", "D6"); 
```

我有一个字符串，它可能如下所示，但将是一个随机句子：

```
string errormessage = "This is an error regarding Key Word Six"; 
```

我目前正在使用以下内容检查错误消息并查看字典中是否出现任何单词：

```
string code = null;
string theDcode = null;

foreach (string word in errormessage.Split(' '))
{
    if (d.TryGetValue(word, out theDcode))
    {
        code = theDcode;
    }
} 
```

问题是我无法搜索字符串“关键字六”，因为我正在逐字读取字符串，而 foreach 循环会分别查看每个单词。这适用于单个单词的关键字。如何处理检查多字关键字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:49:39.683

您可以改为迭代字典中的项目并检查字符串是否匹配。

```
string errormessage = "This is an error regarding Key Word Six";
var d = new Dictionary<string, string>(StringComparer.CurrentCultureIgnoreCase);

d.Add("keyword1", "D2");
d.Add("keyword2", "D3");
d.Add("keyword3", "D4");
d.Add("keyword4", "D4");
d.Add("keyword5", "D5");
d.Add("key word six", "D6"); 

string code = null;
foreach (var item in d)
{
    var i = errormessage.IndexOf(item.Key, StringComparison.CurrentCultureIgnoreCase);
    if(i >= 0)
        code = item.Value;
} 
```

但是，这也会为您提供单词内部的匹配项。`testkeyword1test`例如。

**编辑**
为了获得更好的性能（未经测试），您可以使用正则表达式。

```
string code;
var reg = new Regex(GetPatternString(d.Select (x => x.Key)), RegexOptions.IgnoreCase);
foreach (var match in reg.Matches(errormessage))
{
    code = d[match.ToString()];
} 
```

和辅助功能

```
private static string GetPatternString(IEnumerable<string> values)
{
    var sb = new StringBuilder();
    foreach (var oldStr in values)
    {
        sb.Append("(");
        sb.Append(Regex.Escape(oldStr));
        sb.Append(")|");
    }
    return sb.ToString(0, sb.Length - 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:45:21.923

尝试仅遍历 Dictionary 对象的键。

```
foreach (string word in d.Keys)
{
    //Checks here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:52:30.667

我怀疑一维字典（肯定有更好的词，但我不知道）不会起作用。你需要一棵树：

类似的`trie`结构：

```
关键=
 关键词=
   关键字 6 = D6
   关键字 7 = D8

```

因此，当您在 上找到匹配项时`key`，您会比较下一个作品，依此类推。

现在，如果您同时输入“关键字”和“关键字 6”，您会怎么做？这是一个域问题，是在第一个匹配还是最后一个匹配时停止

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:59:11.240

我猜这个算法并不可怕，但你必须做一个循环来检查类似的东西

“这是关于关键词六的错误”

1.  这
2.  这是
3.  这是个
4.  这是一个错误
5.  这是一个关于
6.  这是关于 Key 的错误
7.  这是关于关键字的错误
8.  这是关于关键字六的错误
9.  是
10.  是一个

我想你必须在传入的搜索中找到所有唯一的子字符串。它可以很容易地用一个循环来完成。但是，如果我用“is an”搜索，是否相当于“an is”？单词的顺序重要吗？事情开始变得匆忙起来。似乎您想要推迟使用诸如[Lucene](https://github.com/apache/lucene.net)或一些搜索库之类的东西。

# c++ - 为什么三角形没有显示在屏幕上（OpenGL 3.3）？

> ID：14387701
> 
> 赞同：0
> 
> 时间：2013-01-17T20:38:39.353
> 
> 标签：c++, opengl, matrix, 3d, glsl

我都试过了。遵循来自[http://www.opengl-tutorial.org/beginners-tutorials/](http://www.opengl-tutorial.org/beginners-tutorials/)的 OpenGL 教程。在教程 4 中，它被要求在你的身上做一个双重模型。但是我不能同时渲染三角形和立方体（三角形没有出现）。只是做同样的事情，更改与三角形相关的变量的名称。我没有在任何其他网站上找到关于这个 OPenGL 3.3 语法的答案，只是在完全不同的语法上找到了答案（我不想每次发现错误时都改变我做瘦的方式 - 这就像在任何事情之后改变一切错误。对我来说没有任何意义）。

代码有点大，但很多东西只是打开Window并运行主循环（和立方体坐标。它们不是VBO。我稍后会学习）：

```
// Include standard headers
#include <stdio.h>
#include <stdlib.h>
// Include GLEW. Always include it before gl.h and glfw.h, since it's a bit magic.
#include <GL/glew.h>
// Include GLFW
#include <GL/glfw.h>
// Include GLM
#include <glm/glm.hpp>
#include "common/shader.hpp"
#include <iostream>
#include <glm/gtc/matrix_transform.hpp>
using namespace std;
using namespace glm;

// Include standard headers
#include <stdio.h>
#include <stdlib.h>

// Include GLEW
#include <GL/glew.h>

// Include GLFW
#include <GL/glfw.h>

// Include GLM
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
using namespace glm;

#include <common/shader.hpp>

int main(int argc, char *argv[] )
{
    // Initialise GLFW
    if( !glfwInit() )
    {
        fprintf( stderr, "Failed to initialize GLFW\n" );
        return -1;
    }
    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4); // 4x antialiasing
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3); // We want OpenGL 3.3
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); //We don't want the old OpenGL

    // Open a window and create its OpenGL context
    if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
    {
        fprintf( stderr, "Failed to open GLFW window\n" );
        glfwTerminate();
        return -1;
    }

    // Initialize GLEW
    if (glewInit() != GLEW_OK) {
        fprintf(stderr, "Failed to initialize GLEW\n");
        return -1;
    }

    // Enable depth test
    glEnable(GL_DEPTH_TEST);
    // Accept fragment if it closer to the camera than the former one
    glDepthFunc(GL_LESS);

    GLuint VertexArrayID;
    glGenVertexArrays(1, &VertexArrayID);
    glBindVertexArray(VertexArrayID);

    // Create and compile our GLSL program from the shaders
    GLuint programID = LoadShaders( "TransformVertexShader.vertexshader", "ColorFragmentShader.fragmentshader" );

    //Perspective Matrix

   // Projection matrix : 45° Field of View, 4:3 ratio, display range : 0.1 unit <-> 100 units
    mat4 Projection = perspective(45.0f, 4.0f/3.0f, 0.1f, 100.0f);
    // Camera matrix
    mat4 View = lookAt(
    vec3(4,3,-3), // Camera is at (4,3,3), in World Space
    vec3(0,0,0), // and looks at the origin
    vec3(0,1,0)  // Head is up (set to 0,-1,0 to look upside-down)
    );
    // Model matrix : an identity matrix (model will be at the origin)
    mat4 Model = mat4(1.0f);  // Changes for each model !
    // Our ModelViewProjection : multiplication of our 3 matrices
    mat4 MVP = Projection * View * Model; // Remember, matrix multiplication is the other way around

    // Get a handle for our "MVP" uniform.
    // Only at initialisation time.
    GLuint MatrixID = glGetUniformLocation(programID, "MVP");

    // Send our transformation to the currently bound shader,
    // in the "MVP" uniform
    // For each model you render, since the MVP will be different (at least the M part)
    glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);

    mat4 triangle_Model = mat4(1.0f);
    mat4 triangle_MPV = Projection * View * triangle_Model;
    GLuint triangle_MatrixID = glGetUniformLocation(programID, "MPV");
    glUniformMatrix4fv(triangle_MatrixID, 1, GL_FALSE, &triangle_MPV[0][0]);

    static const GLfloat triangle_buffer_data[] = {
        -2.0f, -3.0f, 1.0f,
         2.0f, -3.0f, 1.0f,
         0.0f,  3.0f,-1.0f
    };
    // This will identify our vertex buffer
    GLuint triangle_vertexbuffer;
    // Generate 1 buffer, put the resulting identifier in vertexbuffer
    glGenBuffers(1, &triangle_vertexbuffer);
    // The following commands will talk about our 'vertexbuffer' buffer
    glBindBuffer(GL_ARRAY_BUFFER, triangle_vertexbuffer);
    // Give our vertices to OpenGL.
    glBufferData(GL_ARRAY_BUFFER, sizeof(triangle_buffer_data), triangle_buffer_data, GL_STATIC_DRAW);

    // Our vertices. Tree consecutive floats give a 3D vertex; Three consecutive vertices give a triangle.
    // A cube has 6 faces with 2 triangles each, so this makes 6*2=12 triangles, and 12*3 vertices
    static const GLfloat g_vertex_buffer_data[] = {
       -1.0f,-1.0f,-1.0f, // triangle 1 : begin
       -1.0f,-1.0f, 1.0f,
       -1.0f, 1.0f, 1.0f, // triangle 1 : end
        1.0f, 1.0f,-1.0f, // triangle 2 : begin
       -1.0f,-1.0f,-1.0f,
       -1.0f, 1.0f,-1.0f, // triangle 2 : end
        1.0f,-1.0f, 1.0f,
       -1.0f,-1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,
       -1.0f,-1.0f,-1.0f,
       -1.0f,-1.0f,-1.0f,
       -1.0f, 1.0f, 1.0f,
       -1.0f, 1.0f,-1.0f,
        1.0f,-1.0f, 1.0f,
       -1.0f,-1.0f, 1.0f,
       -1.0f,-1.0f,-1.0f,
       -1.0f, 1.0f, 1.0f,
       -1.0f,-1.0f, 1.0f,
        1.0f,-1.0f, 1.0f,
        1.0f, 1.0f, 1.0f,
        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f, 1.0f,
        1.0f,-1.0f, 1.0f,
        1.0f, 1.0f, 1.0f,
        1.0f, 1.0f,-1.0f,
       -1.0f, 1.0f,-1.0f,
        1.0f, 1.0f, 1.0f,
       -1.0f, 1.0f,-1.0f,
       -1.0f, 1.0f, 1.0f,
        1.0f, 1.0f, 1.0f,
       -1.0f, 1.0f, 1.0f,
        1.0f,-1.0f, 1.0f
    };
    // This will identify our vertex buffer
    GLuint vertexbuffer;
    // Generate 1 buffer, put the resulting identifier in vertexbuffer
    glGenBuffers(1, &vertexbuffer);
    // The following commands will talk about our 'vertexbuffer' buffer
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    // Give our vertices to OpenGL.
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);

    // One color for each vertex. They were generated randomly.
    static const GLfloat g_color_buffer_data[] = {
        0.583f,  0.771f,  0.014f,
        0.609f,  0.115f,  0.436f,
        0.327f,  0.483f,  0.844f,
        0.822f,  0.569f,  0.201f,
        0.435f,  0.602f,  0.223f,
        0.310f,  0.747f,  0.185f,
        0.597f,  0.770f,  0.761f,
        0.559f,  0.436f,  0.730f,
        0.359f,  0.583f,  0.152f,
        0.483f,  0.596f,  0.789f,
        0.559f,  0.861f,  0.639f,
        0.195f,  0.548f,  0.859f,
        0.014f,  0.184f,  0.576f,
        0.771f,  0.328f,  0.970f,
        0.406f,  0.615f,  0.116f,
        0.676f,  0.977f,  0.133f,
        0.971f,  0.572f,  0.833f,
        0.140f,  0.616f,  0.489f,
        0.997f,  0.513f,  0.064f,
        0.945f,  0.719f,  0.592f,
        0.543f,  0.021f,  0.978f,
        0.279f,  0.317f,  0.505f,
        0.167f,  0.620f,  0.077f,
        0.347f,  0.857f,  0.137f,
        0.055f,  0.953f,  0.042f,
        0.714f,  0.505f,  0.345f,
        0.783f,  0.290f,  0.734f,
        0.722f,  0.645f,  0.174f,
        0.302f,  0.455f,  0.848f,
        0.225f,  0.587f,  0.040f,
        0.517f,  0.713f,  0.338f,
        0.053f,  0.959f,  0.120f,
        0.393f,  0.621f,  0.362f,
        0.673f,  0.211f,  0.457f,
        0.820f,  0.883f,  0.371f,
        0.982f,  0.099f,  0.879f
    };

    GLuint colorbuffer;
    glGenBuffers(1, &colorbuffer);
    glBindBuffer(GL_ARRAY_BUFFER, colorbuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_color_buffer_data), g_color_buffer_data, GL_STATIC_DRAW);

    glfwSetWindowTitle( "Tutorials" );

    // Dark blue background
    glClearColor(0.0f, 0.0f, 0.3f, 0.0f);

    // Ensure we can capture the escape key being pressed below
    glfwEnable( GLFW_STICKY_KEYS );

    //main loop
    do{
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        // Use our shader
        glUseProgram(programID);

        //First Attribute: Draw a Cube
        glEnableVertexAttribArray(0);
        glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
        glVertexAttribPointer(
           0,                  // attribute 0\. No particular reason for 0, but must match the layout in the shader.
           3,                  // size
           GL_FLOAT,           // type
           GL_FALSE,           // normalized?
           0,                  // stride
           (void*)0            // array buffer offset
        );

        // 2nd attribute buffer : colors
        glEnableVertexAttribArray(1);
        glBindBuffer(GL_ARRAY_BUFFER, colorbuffer);
        glVertexAttribPointer(
            1,                                // attribute. No particular reason for 1, but must match the layout in the shader.
            3,                                // size
            GL_FLOAT,                         // type
            GL_FALSE,                         // normalized?
            0,                                // stride
            (void*)0                          // array buffer offset
        );

        // Draw the triangle !
        glDrawArrays(GL_TRIANGLES, 0, 12*3); // 12*3 indices starting at 0 -> 12 triangles -> 6 squares

        glDisableVertexAttribArray(0);

        //3rd attribute: draw a triangle
        glEnableVertexAttribArray(2);
        glBindBuffer(GL_ARRAY_BUFFER, triangle_vertexbuffer);
        glVertexAttribPointer(
           2,
           3,
           GL_FLOAT,
           GL_FALSE,
           0,
           (void*)0
        );

        glDrawArrays(GL_TRIANGLES,0,3);

        glDisableVertexAttribArray(2);

        // Send our transformation to the currently bound shader,
        // in the "MVP" uniform
        // For each model you render, since the MVP will be different (at least the M part)
        glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);

        glUniformMatrix4fv(triangle_MatrixID, 1 ,GL_FALSE, &triangle_MPV[0][0]);

        // Swap buffers
        glfwSwapBuffers();

    } // Check if the ESC key was pressed or the window was closed
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
    glfwGetWindowParam( GLFW_OPENED ) );

    glfwTerminate();

    // Cleanup VBO
    glDeleteBuffers(1, &vertexbuffer);
    glDeleteVertexArrays(1, &VertexArrayID);
    glDeleteBuffers(1, &triangle_vertexbuffer);
    glDeleteBuffers(1, &colorbuffer);

return EXIT_SUCCESS;
} 
```

而且，我不认为这是问题所在（教程说它需要 1 个着色器，并且在立方体上它工作得很好），但我也会在这里发布着色器代码：

```
Collor Fragment shader:

 #version 330 core

 // Interpolated values from the vertex shaders
 in vec3 fragmentColor;

 // Ouput data
 out vec3 color;

 void main(){

 // Output color = color specified in the vertex shader, 
 // interpolated between all 3 surrounding vertices
color = fragmentColor;

}

TransformVertexShadder:

#version 330 core

// Input vertex data, different for all executions of this shader.
layout(location = 0) in vec3 vertexPosition_modelspace;
layout(location = 1) in vec3 vertexColor;

// Output data ; will be interpolated for each fragment.
out vec3 fragmentColor;
// Values that stay constant for the whole mesh.
uniform mat4 MVP;

void main(){    

// Output position of the vertex, in clip space : MVP * position
gl_Position =  MVP * vec4(vertexPosition_modelspace,1);

// The color of each vertex will be interpolated
// to produce the color of each fragment
fragmentColor = vertexColor; 
```

}

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:44:42.633

我认为您不能将片段颜色输出为 vec3，我在大多数情况下使用 vec4(color, 1.0)。

# matlab - 索引错误，MATLAB

> ID：14387709
> 
> 赞同：0
> 
> 时间：2013-01-17T20:39:02.597
> 
> 标签：matlab, matrix, indexing

不断收到索引错误“（）-索引必须出现在索引表达式的最后”基本上我试图创建一个由 randn（n，1000000）组成的矩阵 x，其中每 j 行乘以矩阵 NV（i，j）。

```
%monte carlo simulation
function [y1,y2,y3,y4]= ed1(SNRL,SNRS,SNRH,n) %ed is the energy detection
g1= SNRL:SNRS:SNRH;
g=10.^(g1/10);
beta=0.8; % is the probability pfa, it cannot be more than 1

pf1=zeros(1,length(g));
pd1=zeros(1,length(g));
pf2=zeros(1,length(g));
pd2=zeros(1,length(g));
x=zeros(n,length(g));
y=zeros(n,length(g));

for i=1 : length(g)

for j=1:n
     NV=(i,j); 
    x(j,:) = randn(n,1000000)*sqrt(NV(i,j)); 
     y(j,:)=randn(n,1000000*(j),:)*sqrt(g(i))+x(j,:); 
end

 %Tgam is the threshold of gamma distribution 
 Tgam = gaminv((1-beta),n/2,(2/n)*(1+g(i))); %probab of flase detection
 pf1(i)= gamcdf(Tgam,n/2,(2/n)*(1+g(i))); %ho
 pd1 (i) = gamcdf(Tgam,n/2,2/n); %h1 % prob of detection

 pf2(i)= length (find(sum(y.^2)/n<Tgam))/1000000;
 pd2 (i) = length (find(sum(x.^2)/n<Tgam))/1000000; 

 y1=pf1; y2=pd1; y3=pf2; y4=pd2;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:18:03.517

你有三件事给你错误：

1)`NV=(i,j)`这种语法会给你一个错误信息。如果您没有收到有关此行的错误消息，那么您在调用此代码的行中有错误，也应该发布。尝试`NV=zeros(length(g),n);`临时修复，直到您知道 NV 应该是什么。

2）`randn(n,1000000*(j),:)`也是不好的语法。你的意思是`randn(n,1000000*(j))?`

3) `x(j,:) = randn(1,10000)*sqrt(NV(i,j));`:`x`如您的代码中所写，大小不正确，除非`g`神奇地长度为 10000。

希望检查这三件事能让您了解是什么给出了您的特定错误消息（这与这些错误给我的任何消息都不相同。）

# c# - 静态 DataContext 线程安全吗？

> ID：14387713
> 
> 赞同：2
> 
> 时间：2013-01-17T20:39:11.163
> 
> 标签：c#, entity-framework

我知道公认的做法是在工作单元模式中使用 DataContext，但我从 MSDN 中看到了这个声明：

> 此类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。不保证任何实例成员都是线程安全的。

当我读到它时，如果 DataContext 被声明为静态它是线程安全的。

[http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:40:15.413

不，这是*不*正确的。

这就是说，`DataContext`它本身的静态成员是线程安全的——而不是它的静态实例。

请注意，这几乎是 .NET 中大多数类的标准。（允许对“大多数”的含义存在分歧）。我没有立即意识到`DataContext`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:45:29.507

恰恰相反。

实例成员不是线程安全的。但是您将从同一个共享实例访问实例成员。

但是，即使对象是线程安全的，也要考虑增长的 1 级缓存对长期存在的数据上下文的影响。很少有线程和几十/数百/数千个并发调用，您的实例可能会耗尽内存。相反，您应该在对象完成工作后将其处置。

# html-email - 是否可以在 MailChimp 模板中使用谷歌网络字体？

> ID：14387716
> 
> 赞同：12
> 
> 时间：2013-01-17T20:39:32.067
> 
> 标签：html-email, mailchimp

我一直在尝试将 google webfonts 合并到 MailChimp 中，但无法获得任何解决方案。

我已经使用 @import 尝试了 Campaign Monitor 网站上列出的方法：

[http://www.campaignmonitor.com/blog/post/3897/using-web-fonts-in-email](http://www.campaignmonitor.com/blog/post/3897/using-web-fonts-in-email)

但是在尝试预览时出现此错误：

```
An error occurred parsing your template CSS:
Cannot find a CSS file at: http://fonts.googleapis.com/css?family=Montserrat 
```

有没有人能够在 MailChimp 中使用自定义字体？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-20T17:29:15.223

事实证明，通过 @import 语法是不可能的。它确实使用标签工作：

```
<link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-21T17:56:53.693

我在所有电子邮件中都使用自定义字体，但不是通过[google](/questions/tagged/google "显示标记为“谷歌”的问题")。如果您在使用 Google 的网络字体时遇到问题，我建议您将文件托管在您自己的服务器上并尝试使用它。

对我来说，我像这样导入我的[webfonts](/questions/tagged/webfonts "显示标记为“webfonts”的问题") [样式表](/questions/tagged/stylesheet "显示标记为“样式表”的问题")：

```
@import url('https://www.mydomain.com/en/img/cms/mail/_a/fonts/fonts.css'); 
```

我还在我的样式声明下方添加了一个[条件注释，以增强](/questions/tagged/conditional-comments "显示标记为“条件评论”的问题")[Outlook](/questions/tagged/outlook "显示标记为“展望”的问题")中的 webfont 回退。如果没有这个，Outlook 可能会用你的 webfont 替换它的感觉，并且不尊重你的后备字体。但是，如果您声明此条件注释，然后使用类的附加跨度包装您的文本，Outlook 将尊重您的后备并使用您决定的字体。

```
<!--[if gte mso 9]>
<style>
    .flowerpwr { font-family:Arial,sans-serif; }
    .proxima { font-family:Arial,sans-serif;font-weight:normal; }
    .proxima_novasemibold { font-family:Arial,sans-serif;font-weight:normal; }
</style>
<![endif]--> 
```

[html](/questions/tagged/html "显示标记为“html”的问题")标记如下所示：

```
<td align="center" style="font-family:'proxima_novaregular',Arial,sans-serif;font-size:16px;letter-spacing:0.04em;color:#333333;">
    <span class="proxima">Text here</span>
</td> 
```

这甚至适用于像这样设置图像替代文本：

```
<td>
    <a href="https://www.mylink.com/" target="_blank" style="display:block;font-family:'proxima_novaregular',Arial,sans-serif;color:#666666;font-size:16px;text-align:center;letter-spacing:0.04em;text-decoration:none;outline:none;">
        <span class="proxima">
            <img src="a3.jpg" alt="STYLED ALT TEXT WITH WEBFONT AND OUTLOOK MAINTAINED FALLBACK" border="0" style="display:block;">
        </span>
    </a>
</td> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-24T11:04:18.243

我最近一直在使用 mailchimp 构建电子邮件，我一直在为这个问题摸不着头脑。这些是我的发现：

*   适用于谷歌字体。

*   @import 适用于通过其他网站托管的字体，然后是 google（例如您的个人网站）

*   使用类似的东西：

`<link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>`

*   对谷歌字体使用@import 会给你一个 mailchimp 错误（就像发布的一个 horizens 一样）。

*   base64 也可以。但是代码可能会变得很长并导致其他问题。

*   Firefox 会阻止 Mailchimp 预览中的字体（因为它是 https）。

PS：不同但相关的主题：制作响应式电子邮件并不像互联网上的人们声称的那样可怕。

# java - Eclipse 忽略 Mac OS X 上的排除模式

> ID：14387717
> 
> 赞同：2
> 
> 时间：2013-01-17T20:39:37.433
> 
> 标签：java, eclipse, macos

我有一个需要排除某些文件的 Eclipse 项目

```
src/main/resources 
```

防止它们被复制到目标/类

在我的 Windows PC 上，我通过在 src/main/resources 的构建路径中添加排除模式来排除这些：

```
**/myfile.properties 
```

最近切换到 Mac OS Mountain Lion 和 Eclipse Juno 后，我发现这个设置被忽略了。我基本上尝试通过各种形式的确切路径排除，**/myfile.properties 等。无论我做什么，刷新时，它都会添加到我的目标/类中

有没有人有同样的问题或知道解决这个问题的方法？

# r - 无法编译 r markdown 代码

> ID：14387732
> 
> 赞同：3
> 
> 时间：2013-01-17T20:40:36.587
> 
> 标签：r, knitr

我喜欢使用 knitr 来创建报告。我安装了 knitr，当我尝试编译为 pdf 时，出现此错误：

```
no tex installation detected. please install tex before compiling. 
```

我从哪里得到这个？tex 是一个 r 包吗？我在窗户上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T20:47:49.167

TeX 不是 R 包。TeX 是一个排版系统（具有相当多的在线存在，包括它自己的 StackExchange 站点）。如果你在 Windows 上（如果你不得不问，你可能是），考虑 MiKTeX 发行版：http: [//www.miktex.org/](http://www.miktex.org/)

# ios - 我可以观察 UIViewController 何时更改 interfaceOrientation 吗？

> ID：14387735
> 
> 赞同：15
> 
> 时间：2013-01-17T20:40:46.357
> 
> 标签：ios, cocoa-touch

如果我有一个指向 UIViewController 的指针，是否可以在它更改 interfaceOrientation 时通知我而不修改控制器的代码？

我最好的选择是检测设备方向的变化，然后查看 UIViewController 是否会/已经旋转（d）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T20:44:06.793

您可以使用 NSNotificationCenter ：

```
 [[NSNotificationCenter defaultCenter] addObserver:self // put here the view controller which has to be notified
                                         selector:@selector(orientationChanged:)
                                             name:@"UIDeviceOrientationDidChangeNotification" 
                                           object:nil];
- (void)orientationChanged:(NSNotification *)notification{  
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

    //do stuff
    NSLog(@"Orientation changed");          
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T00:17:42.807

您可以`willAnimateRotationToInterfaceOrientation:duration:`在 UIViewController 上使用该方法，然后将任何 UIView（或任何其他代码）重新定位为横向或纵向。例如

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
  if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {
    // change positions etc of any UIViews for Landscape
  } else {
    // change position etc for Portait
  }

  // forward the rotation to any child view controllers if required
  [self.rootViewController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
} 
```

# string - 切片后释放字符串以进行垃圾收集的正确方法

> ID：14387748
> 
> 赞同：4
> 
> 时间：2013-01-17T20:42:01.187
> 
> 标签：string, garbage-collection, go, slice

根据这篇[Go Data Structures](http://research.swtch.com/godata)文章，在*Strings*部分下，它指出获取字符串的一部分会将原始字符串保留在内存中。

> *“（顺便说一句，在 Java 和其他语言中有一个众所周知的陷阱，当您对字符串进行切片以保存一小段时，对原始字符串的引用会将整个原始字符串保留在内存中，即使只有一小部分仍然存在需要。Go 也有这个问题。我们尝试并拒绝的替代方案是让字符串切片变得如此昂贵——分配和复制——大多数程序都避免它。）”*

所以如果我们有一个很长的字符串：

```
s := "Some very long string..." 
```

我们取一小部分：

```
newS := s[5:9] 
```

在我们也发布之前，原版`s`不会发布`newS`。考虑到这一点，如果我们需要`newS`长期保留，但要释放`s`垃圾收集，应该采取什么正确的方法？

我想也许是这样的：

```
newS := string([]byte(s[5:9])) 
```

但我不确定这是否真的有效，或者是否有更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:55:12.207

是的，转换为字节切片将创建字符串的副本，因此不再引用原始字符串，并且可以在某处进行 GC。

作为对此的“证明”（好吧，它证明了字节切片与原始字符串不共享相同的基础数据）：

[http://play.golang.org/p/pwGrlETibj](http://play.golang.org/p/pwGrlETibj)

编辑：并证明字节片仅具有必要的长度和容量（换句话说，它的容量不等于原始字符串的容量）：

[http://play.golang.org/p/3pwZtCgtWv](http://play.golang.org/p/3pwZtCgtWv)

Edit2：您可以清楚地看到内存分析发生了什么。在reuseString() 中，使用的内存非常稳定。在 copyString() 中，它增长得很快，显示了由 []byte 转换完成的字符串的副本。

[http://play.golang.org/p/kDRjePCkXq](http://play.golang.org/p/kDRjePCkXq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T21:38:15.637

确保字符串在切片并保持切片“活动”后最终可能有资格进行垃圾收集的正确方法是创建切片的副本并保持“活动”副本。但现在人们正在以恶化的时间性能为代价购买更好的内存性能。在某个地方可能是好的，但在其他地方可能是[邪恶](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)的。有时只有适当的测量，而不是猜测，才能知道真正的增益在哪里。

例如，当我更喜欢一点邪恶时，我正在使用[StrPack ;-)](http://godoc.org/github.com/cznic/strutil#StrPack)

# sql - 如果没有条目，如何让 SQL 内部联接返回第一个条目或空白

> ID：14387749
> 
> 赞同：2
> 
> 时间：2013-01-17T20:42:01.983
> 
> 标签：sql, oracle, inner-join

第一次发帖；一直在阅读很多答案，大多数都有帮助，但我一直坚持这一点。使用 Oracle SQL，我正在尝试使用内部连接执行选择，但我想从另一个表中选择第一个条目（如果有的话）。

缩略示例：

```
Table_1
-ID
-Value

1 XYZ
2 ABC
3 DEF

Table_2
-ID
-Value_2

1 Sample_1
3 Sample_2
3 Sample_3 
```

而选择的结果，我试图得到：

```
1 XYZ Sample_1
2 ABC ''
3 DEF Sample_2 
```

我正在使用的选择语句是

```
SELECT * FROM 
(SELECT ID,Value,Value_2 FROM Table_1 
INNER JOIN Table_2 ON Table_1.ID = Table_2.ID
WHERE Value_2 = (SELECT MIN(Value_2) FROM Table_2 WHERE ID=Table_2.ID)
); 
```

但是我得到的结果是删除 Table_2 没有匹配的所有行。

```
1 XYZ Sample_1
3 DEF Sample_2 
```

我尝试使用 COALESCE()，但我猜测 No Rows Selected 与 NULL 不同。希望我可以使用 TOP()，但我不能。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:46:48.527

`LEFT JOIN`对返回`MIN(Value_2)`per的相关子查询执行 a `ID`。`LEFT JOIN`需要在没有匹配的情况下获得空白。

```
SELECT
  Table_1.ID,
  Table_1.Value,
  minval.Value_2
FROM
  Table_1
  /* Subquery returns least Value_2 per group of ID */
  LEFT JOIN (
    SELECT ID, MIN(Value_2) AS Value_2 FROM Table_2 GROUP BY ID
  ) minval ON Table_1.ID = minval.ID 
```

请注意，没有`ORDER BY`. 我选择了第一个排序的`Value_2`。

[http://sqlfiddle.com/#!2/30a6c/5](http://sqlfiddle.com/#!2/30a6c/5)

（抱歉所有的编辑 - SQLfiddle 中的几个错误修正）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:49:48.577

这对你有用吗？

```
 SELECT * FROM 
 (SELECT ID,Value,Value_2 FROM Table_1 
 INNER JOIN Table_2 ON Table_1.ID = Table_2.ID
 WHERE Value_2 = (SELECT MIN(Value_2) FROM Table_2 WHERE ID=Table_2.ID)
 Order by ID Desc limit 0,1
 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:10:30.213

如果您需要来自 的任何其他信息`Table_2`，或者需要加入其他表，Michael 的解决方案当然是正确的（尽管您可以将我的解决方案转换为子选择来解决这个问题）。但只是为了获得请求的具体结果，您可以使用这个简单的查询：

```
SELECT Table_1.ID, Table_1.Value, MIN(Table_2.Value_2)
  FROM Table_1
  LEFT JOIN Table_2 ON Table_1.ID = Table_2.ID
  GROUP BY Table_1.ID, Table_1.Value 
```

# android - 无法在列表视图中对齐文本

> ID：14387751
> 
> 赞同：0
> 
> 时间：2013-01-17T20:42:07.093
> 
> 标签：android, listview

只是无法将我的列表视图中的文本右/左对齐。不知道该怎么做。Android：重力似乎不起作用。

这是我的xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:background= "#FFCC00"
tools:context=".MainActivity" >

<RelativeLayout
    android:layout_weight="0.5"
    android:layout_width="fill_parent"
    android:layout_height="0dip">
    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="@null"
        android:dividerHeight="0dp"
        tools:listitem="@android:layout/simple_list_item_1" 
        android:background= "#FFCC00"
        android:textColor="#330033"
        android:gravity="left">

    </ListView>
</RelativeLayout>

<RelativeLayout
    android:layout_weight="9"
    android:layout_width="fill_parent"
    android:layout_height="0dip">
        <TextView
        android:id="@+id/bookMark"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textStyle="bold"
        android:gravity="center"
        android:text="Bookmarks"
        android:textColor="#330033"
        android:background= "#CCCC99"
        android:onClick="loadBookmarks"/>
</RelativeLayout> 
```

这是填充列表视图的代码

```
lv = (ListView) findViewById(R.id.listView1);
    lv.setAdapter(new ArrayAdapter<String>(this,R.layout.row_listview, getResources().getStringArray(R.array.Stories))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:48:59.163

我相信这就是您正在寻找的。

`android:textAlignment="center"`

`android:gravity`仅当总文本小于视图时才使用。因此，如果您有“包装内容”，那么我认为它不会起作用。[至少这是它在网站TextView](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3agravity)上所说的

下面我为将两个文本视图与行的左侧和右侧对齐的行添加了示例布局和相关代码

```
 private ListView lv = null;
 @Override
public View onCreateView(LayoutInflater inflate, ViewGroup container,
        Bundle savedInstanceState) {
    View result = inflate.inflate(R.layout.lists_layout, container, false);
    lv = (ListView) findViewById(R.id.listView1);

    adapter = new SimpleAdapter(context, things, R.layout.rowLayout, from, to);
    lv.setAdapter(adapter);
} 
```

列表布局.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ListView
    android:id="@+id/listView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     >

</ListView> 
```

行布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingRight="5dp" >

    <TextView
        android:id="@+id/textleft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft = "true"
         />

    <TextView
        android:id="@+id/textright"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight = "true" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:55:49.537

您可能想要更改 R.layout.row_listview 内 textview 中的文本。请分享 row_listview.xml 中的代码，以便我们为您提供帮助。

# pcap - RawCap 嗅探器导致空 pcap 文件

> ID：14387753
> 
> 赞同：6
> 
> 时间：2013-01-17T20:42:11.273
> 
> 标签：pcap, packet-capture

所以...我正在尝试使用 RawCap 捕获到 localhost 的流量 当我运行 rawcap 时，它会在 cmd 提示符中报告数据包 - 但转储文件始终为空。

任何想法（我试过用管理员权限运行）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T11:46:26.403

您应该使用 ctrl+c 终止 RawCap，而不是仅仅关闭窗口。

在此处获取更多信息：http: [//www.netresec.com/?page=Blog &month=2011-10&post=Automatic-Flushing-in-RawCap](http://www.netresec.com/?page=Blog&month=2011-10&post=Automatic-Flushing-in-RawCap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-19T00:45:39.877

设置`-f`标志以在每次打包后将数据刷新到文件中。

```
rawcap -f 127.0.0.1 my_loopback.pcap 
```

然后正如 geniaz1 所说，用`ctrl`+停止捕获`c`

# ember.js - Ember.js 新路由器自定义 slug 使用

> ID：14387761
> 
> 赞同：3
> 
> 时间：2013-01-17T20:42:53.877
> 
> 标签：ember.js, ember-router

我正在使用这个路由器代码：

```
Ngin.Router.map(function(match) {
    "use strict";
    this.route('index', {path: '/'});
    this.route('article', {path: '/technical/:url/'});
}); 
```

我需要以某种方式在`serialize`方法中获取单击的元素 url，以便我可以从模型中获取该文章的数据。我看起来很明显应该如何在 an 的情况下执行此操作，`id`但我不知道如何使用`url`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T08:10:05.837

与 Ember 一样，解决方案很简单。唯一需要习惯的是，Ember 不是 jQuery，而 Ember 中的上下文是（或应该是）数据，也就是模型。

```
Ngin.ArticleRoute = Ember.Route.extend({
    serialize: function(model) {
        "use strict";
        return {
            url: model.get("url") + "/"
        };
    }
}); 
```

在这种情况下，必须像这样设置上下文：

```
{{#linkTo "article" article}}{{article.title}}{{/linkTo}} 
```

就是这个。就如此容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T21:51:05.183

您可以通过这种方式重新定义路线

```
Ngin.Router.map(function(match) {
    "use strict";
    this.route('index', {path: '/'});
    this.route('article', {path: '/technical/:url/'});
});

Ngin.ArticleRoute = Ember.Route.extend({
  model: function(params) {
    return Ngin.Article.find({'url': params.url});
  }
}); 
```

请参阅[http://emberjs.com/guides/routing/specifying-a-routes-model/#toc_dynamic-models](http://emberjs.com/guides/routing/specifying-a-routes-model/#toc_dynamic-models)

# dynamics-crm-2011 - CRM 2011，查找创建电子邮件的工作流

> ID：14387764
> 
> 赞同：1
> 
> 时间：2013-01-17T20:43:10.000
> 
> 标签：dynamics-crm-2011

我的任务是找出哪个工作流具有创建特定电子邮件的任务。创建的电子邮件没什么特别的，它只有测试的主题行以及联系人和所有者信息。由于我们有大量流程，是否有可能将这些创建的电子邮件之一追溯到创建它的工作流程？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:58:27.293

据我所知，没有办法查看电子邮件并知道是哪个工作流创建了它。但是，如果您尝试以下操作，您应该能够非常接近或至少缩小您的搜索范围。

如果您知道电子邮件的创建时间，则工作流程将在该时间范围内运行。因此，请转到：CRM > 设置 > 系统作业，这将显示所有正在运行的工作流和异步任务，因此只需在电子邮件创建位置附近找到并打开它们即可。您可以在“流程进度”部分查看工作流执行了哪些步骤，如果它创建了任何内容，它将显示电子邮件。所以你应该能够以这种方式确认它。如果这不起作用（例如，因为系统作业被定期清除）。

然后您可以查看对电子邮件的依赖关系，转到：CRM > Settings > Customisations > Customize the System > Entities > Email > Show Dependencies，这将显示对电子邮件执行某些操作的任何进程，因此假设没有100s 您可以手动查看它们以找到正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:03:32.467

您可以使用与创建邮件的工作流相对应的代码将标记添加到邮件正文或主题中。我自己没有建立这样的东西，所以这只是一个建议。

# google-maps-api-3 - 使 Google Maps 标记在单击时显示特定的 div

> ID：14387767
> 
> 赞同：2
> 
> 时间：2013-01-17T20:43:18.840
> 
> 标签：google-maps-api-3, google-maps-markers, show-hide

我对javascript很陌生，我正在学习，如果这很简单，很抱歉。

我所拥有的是在地图上显示的一堆标记，这些标记是从一个数组中加载并用一个函数显示的。我想要做的是弹出一个与单击的标记相关的特定 div。单击另一个标记时，前一个 div 关闭，新 div 打开。

[这是我到目前为止所拥有](http://brunchtoronto.com/indexA.html)的，以了解我在做什么。

我想我想写一个函数说......“如果点击'标记A'，打开'div A'，如果在'标记A'打开时点击'标记B'，然后关闭'Div A ' 并打开 'Div B'。

这是我的javascript。

```
 var markers = [
['Saving Grace', 43.652659,-79.412284],
['Starving Artist', 43.660281,-79.443570]
];

  // Standard google maps function
    function initialize() {
    var myLatlng = new google.maps.LatLng(43.655826,-79.383116);
    var image = 'http://www.brunchtoronto.com/images/marker-blue.png';
    var myOptions = {
        zoom: 13,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    // Current Toggle function which displays Feature Box when marker is clicked
    function opendiv() {
        var ele = document.getElementById("div-feature");
                    ele.style.display = "block";                            
            } 

    var infowindow = new google.maps.InfoWindow();
    var marker, i;

    for (i = 0; i < markers.length; i++) {  
    marker = new google.maps.Marker({
    position: new google.maps.LatLng(markers[i][1], markers[i][2]),
    map: map,
    icon: image
    });

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
            map.panTo(marker.getPosition());
            infowindow.setContent(markers[i][0]);
            infowindow.open(map, marker);
            opendiv();
            }   
        })(marker, i));
    }

} 
```

还有我的 HTML

```
<!-- Featued Window -->

    <div class="featured_window" id="div-feature" style="display: none">

                Stuff to display

    </div>

<!-- Saving Grace -->

    <div class="featured_window" id="div-sg" style="display: none">

        Stuff to display

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:43:19.123

您需要在标记和 div 之间建立关系，目前没有。

代替像`div-sg`这样的ID 可以是例如`div0`，其中数字指示标记的索引。

那么访问div就没有问题了：

```
 //access the node
 var content=document.getElementById('div'+i)
   //create a copy of the node
 .cloneNode(true);
   //remove the id to avoid conflicts
 content.removeAttribute('id');
   //make it visible  
 content.style.display='block';
   //apply the content  and open the infoWindow 
 infowindow.setContent(content);
 infowindow.open(map, marker); 
```

# sendmail - 如何解析 sendmail :include:d 文件？

> ID：14387770
> 
> 赞同：0
> 
> 时间：2013-01-17T20:43:29.383
> 
> 标签：sendmail, text-parsing

我正在寻找一种可以获取 sendmail 邮件列表（即可以成为`:include:`别名文件中指令目标的文本文件）并解析它们以生成收件人列表的工具。当然，这些文件可以包含评论、除实际地址外还有“描述性”名称的收件人、外部地址和本地用户以及其他别名的混合等。

是否存在进行此解析的工具，或允许我自己编写的正式规范？还是我必须编写一个几乎可以肯定包含错误的临时文件？

我没有对我正在处理的服务器的 root 访问权限，所以`sendmail -bv`不起作用。（当然，如果我只是需要将它用作独立于实际设置的实用程序，我总是可以设置自己的安装。）`sendmail -bt`似乎确实有效，但我不完全确定如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:56:15.630

这是我最终用来解决这个问题的 Python 代码。您必须对其进行调整才能在与我的配置不同的服务器上工作。

```
import os
import re
import subprocess

def find_recipients(usernames):
    recipients = {'local': set(), 'external': set(), 'missing_local': set(),
                  'file': set(), 'program': set(), 'error_messages': set()}
    visited_lists = set()
    sendmail = subprocess.Popen(('sendmail', '-bt'), stdin=subprocess.PIPE,
                                stdout=subprocess.PIPE)
    def handle_local_user(username):
        username = username.lower()
        list_path = '/shared/aliases/' + username
        if os.path.isfile(list_path):
            visit_list(list_path)
        elif os.path.isdir('/home/' + username):
            recipients['local'].add(username)
        else:
            recipients['missing_local'].add(username)
    def visit_list(list_path):
        if list_path not in visited_lists:
            visited_lists.add(list_path)
            with open(list_path, 'r') as ml_file:
                for ml_line in ml_file:
                    if not re.match(r'^\s*(#.*)?$', ml_line):
                        if not ml_line.endswith('\n'):
                            ml_line += '\n'
                        sendmail.stdin.write('/parse ' + ml_line)
                        sendmail.stdin.flush()
                        match = None
                        while match is None:
                            match = re.match(r'^mailer ([^,]*), (.*)\n$',
                                             sendmail.stdout.readline())
                        mailer, recipient_info = match.groups()
                        if mailer == 'local':
                            handle_local_user(
                                re.match(r'^user (.+)$',
                                         recipient_info).group(1))
                        elif mailer == 'relay':
                            user, at, domain = re.match(
                                r'^host smtp\.mydomain\.org, user (.*)$',
                                recipient_info).group(1).partition('@')
                            domain = domain.lower()
                            if domain == 'mydomain.org':
                                handle_local_user(user)
                            else:
                                recipients['external'].add(user + at + domain)
                        elif mailer == '*file*':
                            recipients['file'].add(
                                re.match(r'^user (.+)$',
                                         recipient_info).group(1))
                        elif mailer == 'prog':
                            recipients['program'].add(
                                re.match(r'^user (.+)$',
                                         recipient_info).group(1))
                        elif mailer == '*include*':
                            visit_list(re.match(r'^user (.+)$',
                                                recipient_info).group(1))
                        elif mailer == '*error*':
                            raise RuntimeError('address parsing error: ' +
                                               recipient_info)
                        else:
                            raise RuntimeError('unrecognized mailer: ' +
                                               mailer)
    for un in usernames:
        handle_local_user(un)
    sendmail.communicate('/quit')
    return recipients 
```

# ruby-on-rails - 当params [：search] =“”时如何防止Sunspot，Solr返回所有记录

> ID：14387771
> 
> 赞同：1
> 
> 时间：2013-01-17T20:43:31.420
> 
> 标签：ruby-on-rails, solr, sunspot, railscasts

我刚开始学习在 Rails 中使用 Sunspot / Solr。

我跟着这个 RailsCast [http://railscasts.com/episodes/278-search-with-sunspot](http://railscasts.com/episodes/278-search-with-sunspot)

当我没有搜索查询并且搜索字段为空白时，Solr 默认从 Article 模型返回所有​​结果。

这是我的 ArticlesController#index

```
def index
    @search = Article.search do
      fulltext params[:search]
    end
    @articles = Article.all
    @search_results = @search.results
end 
```

在搜索栏中不输入任何参数而只输入“”时，控制台会输出以下内容：

```
Started GET "/articles?utf8=%E2%9C%93&search=" for 127.0.0.1 at 2013-01-17 12:28:09 -0800
  Processing by ArticlesController#index as HTML
  Parameters: {"utf8"=>"✓", "search"=>""}
  SOLR Request (17.0ms)  [ path=#<RSolr::Client:0x007f9b5a6643e0> parameters={data: fq=type%3AArticle&start=0&rows=30&q=%2A%3A%2A, method: post, params: {:wt=>:ruby}, query: wt=ruby, headers: {"Content-Type"=>"application/x-www-form-urlencoded; charset=UTF-8"}, path: select, uri: http://localhost:8982/solr/select?wt=ruby, open_timeout: , read_timeout: } ]
  Article Load (0.4ms)  SELECT "articles".* FROM "articles"
  Article Load (0.4ms)  SELECT "articles".* FROM "articles" WHERE "articles"."id" IN (1, 2, 3, 4, 5, 6, 7, 8)
Rendered articles/index.html.erb within layouts/application (7.6ms)
Completed 200 OK in 74ms (Views: 10.8ms | ActiveRecord: 0.8ms | Solr: 17.0ms)
[2013-01-17 12:28:09] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

* * *

除非给出搜索词，否则我想要的行为是不返回任何内容。我尝试修改 ArticlesController#index 如下：

```
def index
    if params[:search] = ""
      @search_results = []

    else
      @search = Article.search do
        fulltext params[:search]
      end
      @search_results = @search.results

    end
    @articles = Article.all
  end 
```

在这种情况下，当我在搜索字段中输入任何内容时`param[:search] = ""`，Solr 不会返回任何内容，这是所需的行为。

```
Started GET "/articles?utf8=%E2%9C%93&search=" for 127.0.0.1 at 2013-01-18 12:02:52 -0800
  Processing by ArticlesController#index as HTML
  Parameters: {"utf8"=>"✓", "search"=>""}
  Article Load (0.5ms)  SELECT "articles".* FROM "articles"
Rendered articles/index.html.erb within layouts/application (11.1ms)
Completed 200 OK in 23ms (Views: 14.1ms | ActiveRecord: 0.5ms | Solr: 0.0ms)
[2013-01-18 12:02:52] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

但是，当我输入搜索词“ruby”时`param[:search] = "ruby"`，没有返回任何内容，并且根本没有调用 Solr。

```
Started GET "/articles?utf8=%E2%9C%93&search=ruby" for 127.0.0.1 at 2013-01-17 12:37:58 -0800
  Processing by ArticlesController#index as HTML
  Parameters: {"utf8"=>"✓", "search"=>"ruby"}
  Article Load (0.5ms)  SELECT "articles".* FROM "articles"
Rendered articles/index.html.erb within layouts/application (11.5ms)
Completed 200 OK in 23ms (Views: 14.5ms | ActiveRecord: 0.5ms | Solr: 0.0ms)
[2013-01-17 12:37:58] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

我的条件逻辑有问题吗？或者，我是否遗漏了 Solr 的工作原理？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:36:37.987

Solr 模式定义了`defaultQuery`在未`q`提供参数或其值为空字符串时运行的 a。

太阳黑子的`defaultQuery`是`*:*`（匹配所有文档查询）；此外，Sunspot 本身更明确地发送一个`*:*`when`fulltext`提供了一个空字符串。

如果在这种情况下您不想要匹配所有文档的查询，最好在控制器中检查用户提供的查询并完全跳过对 Solr 的调用。

这实际上正是您在示例中所做的，所以我可能不清楚真正的问题。你说，“我想要的行为是不返回任何东西”，然后描述你的条件，“在这个条件下，什么都不返回。” 好像你已经解决了自己的问题？

* * *

编辑，澄清：

除非这是一个错字，否则您可能想要更改`if params[:search] = ""`为`if params[:search] == ""`. 注意相等与赋值运算符。

（或者，更好的是`params[:search].blank?`：）

# codeigniter - Firefox 中的 Codeigniter 会话不会设置

> ID：14387773
> 
> 赞同：2
> 
> 时间：2013-01-17T20:43:33.767
> 
> 标签：codeigniter, session, firefox

我正在使用[Codeigniter](http://ellislab.com/codeigniter)的会话类来创建 cookie 并将会话信息存储在我的数据库中，但是我在跨浏览器时遇到了问题。
看来我现在已经为除**Firefox**之外的所有浏览器提供了一切工作。该网站在用户登录后立即将用户踢出。我怀疑由于某种原因会话永远不会设置。

有什么建议吗？
网址：http: [//www.nanp.org](http://www.nanp.org)。
下面的代码：

```
public function post() {
   $this->load->model('rbac/user');
   if($user = $this->user->user_by_column(array('email'=>$_POST['email'],'password'=>$_POST['password'],'verified'=>'true'))) {
      $this->session->set_userdata(array('user_id'=>$user->user_id));
      if($_POST['redirect']!='') {header('Location:'.$_POST['redirect']);}
      else {header('Location:members/dashboard');}
   }
   else {
      $this->data['php_error'] = 'Incorrect email or password.';
   }
} 
```

这是我的会话配置信息：

```
$config['sess_cookie_name']     = 'nanpsession';
$config['sess_expiration']      = 2628000;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;

$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:42:59.740

尝试使用`2 equal signs`if 语句：

```
 public function post() {
   $this->load->model('rbac/user');
   if($user == $this->user->user_by_column(array('email'=>$_POST['email'],'password'=>$_POST['password'],'verified'=>'true'))) {
     $this->session->set_userdata(array('user_id'=>$user->user_id));
     if($_POST['redirect']!='') {header('Location:'.$_POST['redirect']);}
     else {header('Location:members/dashboard');}
   }
   else {
    $this->data['php_error'] = 'Incorrect email or password.';
   }
} 
```

更多关于 PHP If Statment 上一个等于的含义的信息：[A php if statement with one equal sign...? 这是什么意思？](https://stackoverflow.com/questions/1518076/a-php-if-statement-with-one-equal-sign-what-does-this-mean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T04:41:07.477

您如何确认会话不起作用。尝试打印任何会话变量或回显它，如果这返回空数组，那么您的会话可能无法正常工作。

```
 echo  print_r($this->session->set_userdata()); 
```

由于您说您的会话仅在**Firefox**上终止，可能是您在 Firefox 上配置了一些东西，因为它重置了会话变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T12:17:42.533

Have you installed Firebug? It could cause the problem. Please refer to [Firebug destroying session variables in Codeigniter application](https://stackoverflow.com/questions/12364775/firebug-destroying-session-variables-in-codeigniter-application).

# asp.net-web-api - ASP.NET Web API 的 DefaultHttpControllerSelector 是否在每个请求上填充其路由字典？

> ID：14387778
> 
> 赞同：0
> 
> 时间：2013-01-17T20:44:03.813
> 
> 标签：asp.net-web-api, versioning, asp.net-web-api-routing

我正在编写一个自定义 HttpControllerSelector 来处理我的 API 中的版本控制。我查看了 github 上的 SDamann.WebApi.Versioning 库，当我运行它时，似乎路由字典正在填充每个请求。是默认的这样做还是 Sdammann 库中的设计缺陷？

如果我有很多控制器，每次请求都填充这个字典会影响性能吗？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:02:14.577

控制器选择器不需要填充路由数据。路由将填充路由数据。默认管道的工作方式是这样的：

路由运行 - 找到匹配的路由并使用“控制器”、“动作”、其他参数等值填充路由数据控制器选择器运行 - 查看“控制器”路由参数的路由数据并使用该控制器名称来计算使用什么控制器类型

然后框架使用选定的控制器类型来分派请求

# windows - 批处理文件用文件名中的空格替换下划线

> ID：14387780
> 
> 赞同：2
> 
> 时间：2013-01-17T20:44:09.250
> 
> 标签：windows, batch-file, file-rename

我正在尝试用空格替换某些文件名中的下划线，例如：

```
this_is_a_file.pdf 
```

变成：

```
this is a file.pdf 
```

在 Windows 中使用批处理文件。

我发现了一个类似的问题，但它什么都没有替换空格： [如何从文件名中删除空格（批量）](https://stackoverflow.com/questions/11270453/how-to-remove-spaces-from-file-names-in-bulk)

它可以很容易地翻译成我想要的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T21:03:17.440

用于用空格替换下划线`%file:_= %`来表示。`%file%`不幸的是，这不适用于 for 变量，因此如果您要遍历文件，则必须使用中间变量。

```
@echo off
setlocal enabledelayedexpansion
for %%a in (*_*) do (
  set file=%%a
  ren "!file!" "!file:_= !"
) 
```

# ruby-on-rails - Rails 预编译错误（无效的 UTF-8 字节序列）

> ID：14387786
> 
> 赞同：0
> 
> 时间：2013-01-17T20:44:57.630
> 
> 标签：ruby-on-rails, ruby, heroku, precompile

我不小心在 assets/images 中放了一个 js 文件，现在即使我删除了 js 文件，heroku 也不会让我预编译我的资产。

这是我收到的错误消息

```
AssetSync: YAML file found /tmp/build_326asn5xl82tm/config/asset_sync.yml settings will be merged into the configuration
       rake aborted!
       /tmp/build_326asn5xl82tm/app/assets/images/images/index_solid.js has a invalid UTF-8 byte sequence
       /tmp/build_326asn5xl82tm/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/utils.rb:19:in `block (2 levels) in read_unicode' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:23:17.720

尝试进入 Heroku bash 并使用 rm 删除文件。

```
heroku run bash 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:25:43.267

您可以查看几个选项。此类错误通常是由于 yaml 文件中存在非 ASCII 字符（如 Ñ）。

我想我记得运行过这个错误，最后我只是删除了非 ASCII 字符。在 js 文件中。

有时可以通过安装`magic_encoding`gem 并`# encoding: utf-8`在文件顶部使用来解决此类错误。但是，鉴于错误，我认为它不会起作用

# symfony - 如何在查询生成器中编写此查询？

> ID：14387797
> 
> 赞同：1
> 
> 时间：2013-01-17T20:45:26.220
> 
> 标签：symfony, doctrine-orm, query-builder

我有以下（示例性）查询：

```
SELECT *
FROM User u
LEFT JOIN section_user su ON (su.user_id = u.id AND su.section_id = 3)
WHERE section_id is null 
```

我试图在 Symfony2 中使用查询构建器在用户和部分之间建立多对多关系，但我失败了。

我以为它看起来像这样，事实证明这是错误的：

```
$er->createQueryBuilder('u')
    ->leftJoin('u.sections', 's', 'WITH', 's = :section')
    ->where('s is null')
    ->setParameter('section', $section); 
```

非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:37:24.483

```
# Receive Doctrine query builder
$qb = $this->getDoctrine()->getEntityManager()->createQueryBuilder(); 

$qb
   ->select('u')
   ->from('NameBundle:User', 'u')
   ->leftJoin('u.section_user', 'su', \Doctrine\ORM\Query\Expr\Join::WITH, 'su.user_id = u.id AND (su.section_id IS NULL OR su.section_id = :section)'); # Join condition
   ->setParameter('section', $section); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:59:40.163

首先，`WHERE section_id is null`没有多大意义，
section_id 是从哪里来的？
如果它来自 section_user，那么它不能同时是 3 和 null.. ;)
如果它来自 User，那么它是一对多关系而不是多对多关系......

也许有点澄清你想要完成的事情。

基本上它是这样工作的：（左Doctrine，右Sql）

```
$er->createQueryBuilder('u')      -> SELECT * FROM user u
   ->leftJoin('u.sections', 'us') -> LEFT JOIN section_user su ON u.id = su.user_id
                                     LEFT JOIN section s ON s.id = su.section_id 
   ->where('us.id = :section')    -> WHERE s.id = :section
   ->setParameter('section', 4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:39:30.477

[我认为这与此处](https://stackoverflow.com/a/10516474/876117)的情况相同 但是我看到您在 leftJoin 语句中需要 2 个条件，试试这个（我假设两个实体中的身份密钥都是`id`）

```
$qb->select('u')
 ->from('NameBundle:User','u')
 ->leftJoin('u.sections','su','ON'
    $qb->expr()->andx($qb->expr()->eq('u.id', 'su.user_id'), $qb->expr()->eq('su.id', ':section'))
   )
 ->having('COUNT(su.id) = 0')
 ->groupBy('u.id')
 ->setParameter('section',$section_id); 
```

这将获取所有尚未与 id 部分相关的用户`$section_id`

编辑：我刚刚注意到您的示例查询没有任何意义，因为它总是不会返回任何内容。但我想你想要的是未分配给部分的用户`$section_id`

# java - 使用 Maven Jaxb 编译时如何在目标 Jar 文件中包含 Xml 模式/资源？

> ID：14387801
> 
> 赞同：3
> 
> 时间：2013-01-17T20:45:57.340
> 
> 标签：java, maven, resources, jaxb, include

我接管了一个使用*maven-jaxb2-plugin*的 Java 项目的所有权。一切都编译得很好，但是，它没有将 xsd 文件放入生成的 .jar 文件中。

我能想到的唯一不同的是我的 .xsd 文件曾经存在于文件夹*src/main/resources*中，现在它们位于一个名为*xsd*的文件夹中。

*src/main/resources*文件夹是maven（或 jaxb？）在打包 .jar 文件时查找内容的默认文件夹名称吗？如果是这样，我该如何添加/更改默认值？

这是我的 jaxb 插件配置：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <configuration>
                <catalog>xsd/catalog.xml</catalog>
                <catalogResolver>org.jvnet.jaxb2.maven2.resolver.tools.ClasspathCatalogResolver</catalogResolver>
                <extension>true</extension>
                <schemaDirectory>${basedir}/xsd</schemaDirectory>
                <schemaIncludes>
                    <include>core-types.xsd</include>
                </schemaIncludes>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:59:23.500

是的，“src/main/resources”数据默认包含在 jar 中。

You can add other resources following the [example here](http://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html) (first hit on google for "maven resources folder").

# asp.net-mvc - 阻止对 Redis 密钥 (ServiceStack) 的访问

> ID：14387802
> 
> 赞同：2
> 
> 时间：2013-01-17T20:45:57.197
> 
> 标签：asp.net-mvc, redis, servicestack

我正在尝试使用 ServiceStack Redis 客户端实现我认为非常常见的缓存场景，但我很难找到一个很好的例子。

在 ASP.NET MVC 应用程序中，我们对外部 Web 服务进行相对长时间运行（和计量）的调用，并将结果缓存一段时间。在缓存实现中，希望在 Web 服务调用完成之前阻止对该键的额外请求，以避免额外的（昂贵的）调用。

那么，实现键级锁的最佳方式是什么？Redis 是否支持开箱即用？ServiceStack 的[IRedisClient.AcquireLock](https://github.com/ServiceStack/ServiceStack.Redis/wiki/RedisLocks)是否非常适合这种情况，或者如果我们不处理分布式锁，它是否有点矫枉过正？或者我最好自己实现锁，就像[这里](https://stackoverflow.com/questions/5578744/doing-locking-in-asp-net-correctly)描述的那样？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T23:26:01.263

我使用以下模式将 Redis 用作全局网络互斥锁：

1.  **LPUSH**创建互斥锁
2.  **BRPOP**锁定（这是阻塞）
3.  **LPUSH**解锁

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:44:55.847

Redis 是一个非阻塞异步服务器，redis 没有内置语义来阻塞客户端连接，直到**密钥**空闲。

注意：Redis 是一个远程 NoSQL 数据存储，因此您实施的任何涉及 redis 的锁都是按设计“分布式”的。ServiceStack 的 AcquireLock 使用 redis 的原始**SETNX**锁定语义来确保只有 1 个客户端连接拥有锁，所有其他客户端/连接保持阻塞状态，直到通过使用指数重试回退乘数轮询释放锁。

为了在没有轮询的情况下实现分布式锁，您需要创建一个使用 SETNX + redis 的 Pub/Sub 支持组合的解决方案，以通知等待的客户端锁已被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:04:18.290

为什么不在您要锁定的密钥上发出 SETNX？如果可以设置/锁定密钥，这将返回 1。如果它已经存在，则为 0，因此无法获取锁。有关具体信息，请参阅[http://www.redis.io/commands/setnx](http://www.redis.io/commands/setnx)。

# jquery - AJAX 成功加载的元素不响应 .click 函数

> ID：14387805
> 
> 赞同：1
> 
> 时间：2013-01-17T20:46:15.643
> 
> 标签：jquery, ajax

我使用 AJAX 调用中的类创建了元素。我正在尝试将单击事件绑定到这些创建的对象。

当我使用与 AJAX 创建元素相同的处理程序类创建元素时，它绑定得很好。但是，当从 AJAX 调用创建处理程序元素时，它们不会绑定到`.click`函数。

我想这与加载元素时有关。我需要类似`.click()`函数的承诺声明吗？

如果需要，这是我的代码。

**创建元素**

```
function runQuery(){

var url = 'http://www.nexthometown.com/index.php?option=com_singleprop&view=raw&format=raw';

$.ajax({
    url: url,
    dataType: 'json',
    success: function(data){ 
        $.each(data, function (key, value){
            var agentuid = value[0];
            var mlsnum = value[1];
            var address = value[5] + ' ' + value[6] + ' ' + value[7];
            var city = value[9];
            var state = value[10];
            var zip = value[11];
            $('#ohs_table').append('<tr><td>' + mlsnum + '</td><td>' + address + ' ' + city + ' ' + zip + '</td><td><div class="media_button">QRCode</div><div class="f_button media_button" value="' + mlsnum + '">Flyer</div></td></tr>');
        });
    },
    error: function(jqXHR, error, errorThrown) {  
        alert(jqXHR.responseText); 
    }
});

}; 
```

**`.click`功能_**

```
$('.f_button').click(function(){
    $('#test').html('<h1>Hello!</h1>');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:48:05.807

`$('.f_button')`*返回调用选择器时*存在的元素集合。它不会考虑新元素。

使用事件委托语法`.on()`并将`click`事件附加到已经存在的父元素：

```
$('#ohs_table').on('click', '.f_button', function(){
    $('#test').html('<h1>Hello!</h1>');
}); 
```

# opencv - 将 opencv 仿射矩阵转换为 CGAffineTransform

> ID：14387806
> 
> 赞同：1
> 
> 时间：2013-01-17T20:46:18.887
> 
> 标签：opencv, matrix, core-graphics, transformation, cgaffinetransform

我想从 OpenCV 获取一个仿射矩阵：

```
Mat T = getAffineTransform(src_pt, dst_pt); 
```

然后将其转换为 CGAffineTransform 以在 Core Graphics/Objective-C/iOS 中使用。（[CGAffineTransform 文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html)）

我试过了：

```
CGAffineTransform t = CGAffineTransformIdentity;
t.a = T.at<float>(0,0);
t.b = T.at<float>(0,1);
t.c = T.at<float>(1,0);
t.d = T.at<float>(1,1);
t.tx = T.at<float>(0,2);
t.ty = T.at<float>(1,2); 
```

这适用于 x 和 y 平移，但如果矩阵中有任何旋转则不行。由于生成的图像似乎奇怪地倾斜，因此似乎缺少某些东西。我尝试将`.b`and乘以`.c`-1 并切换`.b`and `.c`，但这些似乎都不起作用。图像仍然出现不正确的歪斜。

编辑：我应该提到它*几乎*正确旋转。当我切换 b 和 c 时，它至少朝正确的方向旋转。它看起来有点不对劲，因为旋转得太远了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:08:58.390

您的问题是 opencv 是行专业，而 CGAffineTransform 是您想要的列专业

```
t.a = T.at<float>(0,0);
t.b = T.at<float>(1,0);
t.c = T.at<float>(0,1);
t.d = T.at<float>(1,1); 
```

你可以告诉，因为在文档中 CGAffineTransform 采用形式

```
[a  b  0
 c  d  0
 tx ty 1] 
```

请注意，tx 和 ty 在底行。在标准行主要矩阵中，翻译组件位于最右边的列中

```
[a c tx
 b d ty
 0 0 1] 
```

如果进行此更改后问题仍然存在（您的问题表明您已经尝试过），那么您需要发布更多信息。正如您所建议的，问题可能出在您的坐标系的原点，但没有任何关于您的原点的信息，没有人能够帮助您。

# scheme - 如何在方案中进行基准测试？

> ID：14387809
> 
> 赞同：0
> 
> 时间：2013-01-17T20:46:44.003
> 
> 标签：scheme, benchmarking, chicken-scheme

我正在寻找测试各种方案结构以进行比较，并且想知道如何去做。我知道 Ruby 有一个用于此类基准测试的专用模块，而且网络搜索似乎并不容易提供 Scheme 版本。任何人都可以向我指出这样一个设施的方向吗？如果重要的话，我正在使用鸡计划。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T20:03:24.827

如果您追求一些非常基本的东西，您可以使用[`time`特殊形式](http://api.call-cc.org/doc/chicken/special-forms#def%3atime)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T09:36:34.433

You can compile a program using -profile, then when you run it it will write a profiling file. This can then be analysed with the `chicken-profile` program.

This is documented in the ["using the compiler" section](http://wiki.call-cc.org/man/4/Using%20the%20compiler) of the manual (search for `-profile`).

# android - 片段和 backStack 显示/隐藏

> ID：14387812
> 
> 赞同：0
> 
> 时间：2013-01-17T20:46:52.333
> 
> 标签：android, android-fragments

首先谢谢你看这个。我有 4 个片段。一种是显示菜单的菜单片段。我有 2 个显示数据和图片列表的列表片段。第 4 个片段是细节片段。一切开始正常。

设置：

我单击它显示的列表按钮，菜单片段隐藏在它后面。

我单击列表片段中的一个条目，它使用一个接口来传递数据并显示详细信息片段。

一旦它将我带到应有的列表片段，我单击后退按钮。

我再次单击后退按钮，它会显示应有的菜单片段。

问题：

如果我再次单击列表按钮，则会显示列表，但菜单片段仍显示在其后面。

我假设它与后台堆栈有关，也许我没有正确使用它。任何帮助是极大的赞赏。如果有人能解释这个问题，那就太棒了。如果您希望我发布我的 conde 的任何部分，请告诉我，但我觉得我的问题与后台堆栈有关，这是我与后台堆栈混淆的代码部分。

```
private Fragment visible;
private Fragment mVisibleCached;
@Override
public void onBackPressed() {
    super.onBackPressed();
    visible = mVisibleCached;

} 
```

. .

```
public void showFragment(int fragIn) {
    final FragmentManager fm = getSupportFragmentManager();
    final FragmentTransaction ft = fm.beginTransaction();
    ft.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);
    if (visible != null) {
        ft.hide(visible);
        //ft.remove(visible);
        mVisibleCached = visible;
        ft.addToBackStack(null);

    }
    switch (fragIn) {
    case 0:
        menuFrag = ((MenuFragment) fm.findFragmentByTag(MenuFragment.TAG));
        if (menuFrag == null) {
            menuFrag = MenuFragment.newInstance();
            ft.add(R.id.fragment_container, menuFrag, MenuFragment.TAG);
        } else {
            // ft.show(menuFrag);
            //ft.add(R.id.fragment_container, menuFrag, MenuFragment.TAG);
            if (!menuFrag.isVisible()) {
                ft.show(menuFrag);
            }
        }

        ft.addToBackStack(null);
        visible = menuFrag;
        break;
    case 1:
        programsFrag = ((ListFrag) fm.findFragmentByTag(PROGRAMS_TAG));
        if (programsFrag == null) {
            programsFrag = ListFrag.newInstance(false);
            ft.add(R.id.fragment_container, programsFrag, PROGRAMS_TAG);
        } else {
            // ft.show(programsFrag);
            //ft.add(R.id.fragment_container, programsFrag, PROGRAMS_TAG);

            // ft.replace(R.id.fragment_container, programsFrag);
            if (!programsFrag.isVisible()) {
                ft.show(programsFrag);
            }
        }
        ft.addToBackStack(null);
        visible = programsFrag;
        break;
    case 2:
        hostsFrag = ((ListFrag) fm.findFragmentByTag(HOSTS_TAG));
        if (hostsFrag == null) {
            hostsFrag = ListFrag.newInstance(true);
            ft.add(R.id.fragment_container, hostsFrag, HOSTS_TAG);
        } else {
            // ft.show(hostsFrag);
            //ft.add(R.id.fragment_container, hostsFrag, HOSTS_TAG);

            // ft.replace(R.id.fragment_container, hostsFrag);
            if (!hostsFrag.isVisible()) {
                ft.show(hostsFrag);
            }
        }
        ft.addToBackStack(null);
        visible = hostsFrag;
        break;
    case 3:
        detailsFrag = ((DetailsFrag) fm.findFragmentByTag(DetailsFrag.TAG));
        if (detailsFrag == null) {
            detailsFrag = DetailsFrag.newInstance();
            ft.add(R.id.fragment_container, detailsFrag, DetailsFrag.TAG);
        } else {
            //ft.add(R.id.fragment_container, detailsFrag, DetailsFrag.TAG);
            if (!detailsFrag.isVisible()) {
                ft.show(detailsFrag);
            }
        }
        ft.addToBackStack(null);
        visible = detailsFrag;
        break;
    }
    ft.commit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T23:07:25.003

我按照你的方法解决了这个问题，它并不优雅，但它对我有用..

而不是你的 2 个片段，我使用了一个整数 var 和一个整数数组列表（整数是片段的 id）

`int visible;`

```
ArrayList<Integer> cachedVisible= new ArrayList<Integer>(); 
```

然后在显示正确片段的方法中我做了这样的事情

```
private void setVisibleFragment(int id) {
if(visible!=0){
        cachedVisible.add(visible);
    }else{
        cachedVisible.add(R.id.home);
    }

   switch (id) {
        case R.id.settings:
        visible=R.id.settings;
        break;
    case R.id.services:
        ft.hide(fm.findFragmentById(R.id.settings_frag));
        ft.hide(fm.findFragmentById(R.id.plugin_frag));
        ft.show(fm.findFragmentById(R.id.service_frag));
        ft.addToBackStack(null);
        ft.commitAllowingStateLoss();
        visible=R.id.services;
        break;
        ....
   }
} 
```

最后在 FragmentActivity

```
public void onBackPressed() {
    if(cachedVisible.size()==0){
        finish();
    }else{
    visible = cachedVisible.get(cachedVisible.size()-1);
    cachedVisible.remove(cachedVisible.size()-1);
     }
    setVisibleFragment(visible);
    cachedVisible.remove(cachedVisible.size()-1);   
} 
```

希望它可以帮助某人；）

# web-audio-api - WebAudio API 采样率

> ID：14387814
> 
> 赞同：8
> 
> 时间：2013-01-17T20:46:56.810
> 
> 标签：web-audio-api

是否可以为实时音频上下文指定采样率（对象`sampleRate`的属性）？[`AudioContext`](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#AudioContext-section)

对于我阅读的内容，可以`sampleRate`为[`OfflineAudioContext`](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#OfflineAudioContext-section)对象指定 （构造函数接受 3 个参数，最后一个是采样率），但实时`AudioContext`不接受任何参数。

我想这是不可能的，因为这可能是由浏览器本身定义的，但也许有办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:33:44.720

不，除了在操作系统级别设置声卡的采样率（并非所有 i/o 设备都支持）之外，这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-03T23:04:42.327

更新。最新版本的规范现在允许您指定采样率。用于`new AudioContext({sampleRate: desiredRate})`选择所需的采样率。浏览器将负责重新采样所有内容以使用音频硬件的实际采样率。这在所有浏览器上都受支持，也许 Safari 除外。

# php - 当文件不存在时，我需要停止循环

> ID：14387818
> 
> 赞同：2
> 
> 时间：2013-01-17T20:47:09.663
> 
> 标签：php, loops

我的`/images/`目录中有一组相关图像，依次命名为 image1.jpg、image2.jpg、image3.jpg 等...

我正在尝试使用循环使用 PHP 在我的标记中输出图像。但是由于图像的数量不同，我需要它在到达目录中的最后一个图像文件时停止。

假设我有 5 张图片，我希望它只输出：

```
<img src="images/image1.jpg">
<img src="images/image2.jpg">
<img src="images/image3.jpg">
<img src="images/image4.jpg">
<img src="images/image5.jpg"> 
```

如果我添加`image6.jpg`到目录中，它应该会自动添加到标记中。你怎么做到这一点？

**我目前的方法**

```
for ( $i=1; $i<100; $i++ ) {

    if ( file_exists('http://localhost/images/image' . $i . '.jpg') ) {
        echo '<img src="http://localhost/images/image' . $i . '.jpg'">';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:56:57.583

怎么样[`scandir`](http://php.net/manual/en/function.scandir.php)？

```
$dir    = '/images';
$imgs = scandir($dir);

foreach($imgs as $img)
{
  if($img != '.' && $img != '..')
  {
    echo '<img src="http://localhost/images/'.$img.'">';
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T20:58:18.677

此代码段将生成所需的结果：

```
$i = 1;
while(file_exists('./images/image' . $i . '.jpg')){
    echo '<img src="images/image' . $i . '.jpg">';
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T20:50:33.363

在这种情况下需要调用一个函数`file_exists()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T22:27:16.757

要回答您的问题：

```
for ( $i=1; $i<100; $i++ ) {

    if ( file_exists('http://localhost/images/image' . $i . '.jpg') ) {
        echo '<img src="http://localhost/images/image' . $i . '.jpg">';
    } else {
        break;
    }
} 
```

但是您的示例中有一个额外的单引号，因此它将输出：

```
<img src="images/image1.jpg'">
<img src="images/image2.jpg'">
<img src="images/image3.jpg'">
<img src="images/image4.jpg'">
<img src="images/image5.jpg'"> 
```

# google-chrome - Chrome 应用缓存在首次加载时不起作用，仅在刷新时起作用

> ID：14387819
> 
> 赞同：1
> 
> 时间：2013-01-17T20:47:13.393
> 
> 标签：google-chrome, html5-appcache, cache-manifest

我们的离线应用在 Firefox 中运行良好，但在过去一两个月里，它在所有最新版本的 Chrome 和 Chromium 中都出现了各种问题。这是我在 Linux 的 Chromium 23.0.1271.97 中看到的最新问题。在 Windows 7 上类似版本的 Chrome 中也得到了证实。

当我去离线应用程序“冷”（在 chrome://appcache-internals/ 中没有任何内容）时，什么也没有发生。我在所有 ApplicationCache 事件上都附加了回调，但它们都没有触发。chrome://appcache-internals/ 中没有添加任何内容。控制台、网络控制台等中没有错误。Chrome 或服务器日志均未显示正在请求缓存清单文件。

当我重新加载页面时，一切正常。它继续工作 - 即使在缓存清单文件更改时 - 直到我去 chrome://appcache-internals/ 并删除缓存。然后一切重新开始。

我和其他人已经在操作系统、服务器、http/https 和最新的 Chrome/Chromium 版本中多次验证了这些确切步骤。显然，这是 Chrome 的众多缓存错误之一。我希望能找到解决方法。

它真的看起来像这个未经证实的 Chrome 错误：[http ://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature %20Status%20Owner%20Summary&groupby=&sort=&id=116382](http://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary&groupby=&sort=&id=116382)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:12:00.073

正如上面提到的 Chromium 问题，问题是由于 appcache 页面是通过重定向到达的。作为一种解决方法，我通过 ajax 发布了我需要的数据，然后用于`window.location = "/bla/bla"`导航到 appcache 页面。

不理想，但用户无法区分（除了它有效......）。

# events - Sencha Touch 2 list itemtap 从编辑表单返回时不起作用

> ID：14387821
> 
> 赞同：1
> 
> 时间：2013-01-17T20:47:19.453
> 
> 标签：events, navigation, sencha-touch-2, listitem, sencha-architect

我按照本教程介绍了如何将 Sencha Touch 2 与 Architect 和 ASP.NET MVC 4 WebApi 后端一起使用：[https](https://vimeo.com/45207356#) ://vimeo.com/45207356#一切正常，但很简单。一旦我从详细信息表单中回来，itemtap 事件监听器似乎就不再工作了。无论我是保存、删除还是点击后退按钮，只要我回到主视图（带有列表的那个），我就无法再次进入编辑表单。这是主视图代码：

```
Ext.define('ClientTestApi.view.Main', {
extend: 'Ext.navigation.View',

config: {
    id: 'Main',
    items: [
        {
            xtype: 'list',
            title: 'Songs',
            id: 'ListePieces',
            itemTpl: [
                '<div>{Title}, {Artist}, {Album}, {Genre}, {Year}</div>'
            ],
            loadingText: 'Chargement...',
            store: 'PieceStore'
        }
    ]
} 
```

});

和控制器：

```
Ext.define('ClientTestApi.controller.PieceSimple', {
extend: 'Ext.app.Controller',

config: {
    refs: {
        mainView: '#Main',
        formPiece: '#FormPiece',
        listePieces: '#ListePieces'
    },

    control: {
        "#ListePieces": {
            itemtap: 'onListItemTap'
        }
    }
},

onListItemTap: function(dataview, index, target, record, e, options) {
    var form = Ext.create('ClientMusiqueApi.view.FormPiece',
    {
        title: record.data.Titre
    });

    this.getMainView().push(form);
    form.setRecord(record);
} 
```

我省略了保存和删除代码，因为当你不做任何事情就点击后退按钮时也会发生这种行为。

因此，当我加载应用程序时，一切正常。我单击一个项目并进入编辑表单（“FormPiece”）。当我返回时（例如导航栏中的后退按钮），列表显示确定，单击它们时选择了项目，但这次没有打开编辑表单。有谁知道为什么？

更新：经过一个简单的测试（我在 onListItemTap 事件中放置了一个警报），我看到即使我回来后该事件也会被触发。问题似乎出在“push()”方法上。但是当我在 Chrome 的控制台中跟踪它时，它运行正常。它不会无缘无故地显示编辑表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T08:31:41.177

所有想要将列表放入 sencha 并且听众不在列表中工作的人，然后不要忘记检查您正在扩展的内容，请参阅以下代码并安息吧，因为我花了 5 天时间解决了这个问题。我在任何地方都找不到代码中缺少的东西，所以缺少的片段是“extend:'Ext.navigation.View'：

```
Ext.define('iPhoneTestApp.view.Inbox', {
    extend: 'Ext.navigation.View',
    xtype: 'inbox',
    inline: true,
    requires: [ 'Ext.*','Ext.dataview.List' ],
    config: {
            items : [{
                        xtype: 'list',
                        inline: true,
                        id:'list',
                        itemTpl: '<div class="contact">{title} </div>',
                        data: [
                                { title: 'Item 1' },
                                { title: 'Item 2' },
                                { title: 'Item 3' },
                                { title: 'Item 4' }
                            ],
                        fullscreen: true,
                        listeners: {
                            itemtap: function(el){
                                Ext.Msg.alert('Warning', '3', Ext.emptyFn);
                            }
                        }
                }]
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:36:21.730

原来问题出在编辑表单本身。我在表单中添加了记录“id”字段，这似乎是导致错误的原因。因此，如果您按原样观看视频，它将起作用。

# css - 如何阅读以下css类

> ID：14387825
> 
> 赞同：1
> 
> 时间：2013-01-17T20:47:38.190
> 
> 标签：css

我有以下`CSS`课程：

```
 #menuAccordion h2 a,.dir-rtl #menuAccordion .viewList{
     padding-right:2.5%;
     padding-left:0
 } 
```

将其解释为所有使用 css 类的 HTML 元素是否正确`menuAccordian`，如果此元素中有`<H2>`or`<A>`标记，它将应用在 ? 中定义的填充`{}`？`.dir-rtl`和`.viewList`指的是什么？

另外，如果我在我的 css 中的一行上有以下代码：

```
 #secNav #showHideMenu a.fixed{
     position:fixed;
     top:0
 }

 .HomePage #content{
     min-height:300px
 } 

 #content{
     background-color:#FFF;
     min-height:600px;
     position:relative;
     z-index:0
 } 
```

我可以假设每次我看到 a `#`，它是一个新课程的开始，我是否还可以假设这些课程彼此不相关？我只是想了解为什么作者会将所有这些都放在一行中。它不可读。但也许是因为它们是相关的。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:49:52.767

首先，术语。一组花括号之前的部分称为**选择器**。可以有多个用逗号分隔的选择器。在选择器中，您可以使用按属性`#name`匹配元素和按属性`id`匹配元素。`.name``class`

* * *

一般来说，CSS 选择器匹配*最后列出的项目。*

```
#menuAccordion h2 a 
```

这匹配带有 . 的`<a>`元素内`<h2>`的元素内的元素`id="menuAccordion"`。

```
.dir-rtl #menuAccordion .viewList 
```

这匹配带有`class="viewList"`inside 的元素和带有`id="menuAccordion"`的元素`class="dir-rtl"`。

`viewList`和类的含义`dir-rtl`取决于页面作者。它们没有内在的意义。

* * *

将所有内容放在一行上不会改变 CSS 的含义。这可能只是一种以牺牲可读性为代价的节省空间的策略。

# html - 使用可传输对象/webkitPostMessage 时出现“类型错误”

> ID：14387830
> 
> 赞同：3
> 
> 时间：2013-01-17T20:48:03.217
> 
> 标签：html, webkit, web-worker

我正在尝试使用可转移对象，但在调用 webkitPostMessage 时出现“类型错误”。

```
var message = new Object();
message.type = "mask";
message.mask = mmask;
message.width = width;
message.height = height;
message.useTransferable = transferableObjects;

webWorker[curWorker].webkitPostMessage(message, [message]); 
```

我在工作线程中也遇到了同样的错误。

我错过了什么吗？您需要更多信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:08:56.860

从规范：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#transferable-objects](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#transferable-objects)

```
The following Transferable types exist:

- MessagePort
- ArrayBuffer [TYPEDARRAY]
- CanvasProxy 
```

因此，您现在将数据传输到网络工作者的选项非常有限。但请查看：

[http://updates.html5rocks.com/2012/06/How-to-convert-ArrayBuffer-to-and-from-String](http://updates.html5rocks.com/2012/06/How-to-convert-ArrayBuffer-to-and-from-String)

因此，您可以将对象转换为 JSON 字符串，`window.JSON.parse()`然后使用链接中的方法将其更改为数组缓冲区，然后将该数组缓冲区发送给工作人员。

# matlab - 旋转 MATLAB 的极坐标图？

> ID：14387834
> 
> 赞同：3
> 
> 时间：2013-01-17T20:48:38.323
> 
> 标签：matlab, plot, polar-coordinates

我正在尝试使用 MATLAB 命令`polar`，它似乎从右侧的 0 度开始，角度以逆时针方向增加。

然而，我想做的是，它改变了这一点，因此极坐标系以 0 度作为“北”开始，并且角度沿顺时针方向增加。

有没有一种简单的方法可以做到这一点？

编辑：我希望 MATLAB*显示*一个极坐标图，其中 0 从北开始，角度以顺时针方向增加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T21:06:41.800

像往常一样创建你的极坐标图，然后调用`view(90, -90)`. 这会改变观点，而不会改变情节的任何其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:50:44.507

查找`polar.m`并制作副本（我调用了 mypolar.m，我通过运行 polar 导致错误并单击错误消息中的行号链接找到它。）编辑以下行：

第 133-134 行：

```
 % plot spokes
    th = (1 : 6) * 2 * pi / 12;
    cst = sin(th);
    snt = cos(th);
    cs = [-cst; cst];
    sn = [-snt; snt]; 
```

第 180-181 行：

```
 % transform data to Cartesian coordinates.
    xx = rho .* sin(theta);
    yy = rho .* cos(theta); 
```

你交换 sin 和 cos 两次。我认为这会得到一切...

# testing - Dart 单元测试过滤

> ID：14387835
> 
> 赞同：1
> 
> 时间：2013-01-17T20:48:43.073
> 
> 标签：testing, dart

我为我的一个 Dart 库编写了一组单元测试，但是我希望能够过滤它们以仅允许某些在我的连续构建期间运行。我注意到 unittest api 允许这样做，但我找不到任何示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:49:01.923

您可以通过创建自定义配置并使用`filterTests()`.

```
import "package:unittest/unittest.dart";

class FilterTests extends Configuration {
  get autoStart => false; // this ensures that the tests won't just run automatically
}

void useFilteredTests() {
  configure(new FilterTests()); // tell configure to use our custom configuration
  ensureInitialized(); // needed to get the plumbing to work
} 
```

然后，在 中`main()`，您使用`useFilterTests()`然后`filterTests()`使用字符串或正则表达式调用您要运行的测试。

```
void main() {
  useFilteredTests();

  // your tests go here

  filterTests(some_string_or_regexp);
  runTests();
} 
```

描述与参数匹配的测试`filterTests()`将运行；其他测试不会。我写了[一篇](http://shailen.github.com/blog/2012/12/07/running-only-some-of-your-tests/)关于使用的博客文章`filterTests()`，你可能会觉得有用。

另一种过滤测试的方法是将它们划分为多个库，然后仅使用您要运行其测试的那些库的功能`import()`。`main()`所以，想象一个包含一些测试的库：

```
library foo_tests;

import "package:unittest/unittest.dart";

void main() {
  // some tests for foo()
} 
```

另一个包含其他测试：

```
library bar_tests;

import "package:unittest/unittest.dart";

void main() {
  // some tests for bar()
} 
```

`main()`您可以通过从这些库中的每一个导入来将测试运行器缝合在一起。在, 中`my_tests.dart`，您可以这样做来运行所有测试：

```
import "package:unittest/unittest.dart";
import "foo_tests.dart" as foo_tests;
import "bar_tests.dart" as bar_tests;

void main() {
  foo_tests.main();
  bar_tests.main();
} 
```

如果你想运行 only`foo_tests`或 only `bar_tests`，你可以只导入一个。这将有效地创建一个过滤器。这是这些导入如何工作的[简单工作示例](https://github.com/shailen/droneDemo/tree/master/test)

# galaxy - 为什么我的 Android 应用程序可以在 Eclips 上运行，但在与 PC 断开连接时会失败？

> ID：14387836
> 
> 赞同：0
> 
> 时间：2013-01-17T20:48:44.580
> 
> 标签：galaxy

当连接到在 Windows 7 上运行的 Eclips 时，我的应用程序在三星 Galaxy S III 设备 (SPH-L710) 上运行良好，但如果 USB 电缆断开连接则失败。我通过运行配置框选择了我的设备。我的应用程序访问生产 REST WCF Web 服务以获取数据以填充微调器。但是，一旦断开连接，微调器就会卡在水龙头上，似乎整个应用程序都卡住了。

我做错什么了吗？我怎样才能解决这个问题？感谢您的任何提示。

# c# - 为什么响应对象中的所有项目都为空？

> ID：14387837
> 
> 赞同：-1
> 
> 时间：2013-01-17T20:48:55.733
> 
> 标签：c#, wcf, wcf-client

我目前正在编写一个与 SOAP Web 服务交互的 WCF 客户端。我的问题是我的响应对象总是零，即使是简单的类型。没有异常发生。

WSDL 位置：[https ://sandbox-soap.billsafe.de/wsdl/V209](https://sandbox-soap.billsafe.de/wsdl/V209)

THX 4 救命！

应用程序配置

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.diagnostics>
        <sources>
            <source name="System.ServiceModel.MessageLogging" switchValue="Verbose,ActivityTracing">
                <listeners>
                    <add type="System.Diagnostics.DefaultTraceListener" name="Default">
                        <filter type="" />
                    </add>
                    <add name="BillSAFESServiceMessageLoggingListener">
                        <filter type="" />
                    </add>
                </listeners>
            </source>
        </sources>
        <sharedListeners>
            <add initializeData="BillSAFE.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                name="BillSAFESServiceMessageLoggingListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
                <filter type="" />
            </add>
        </sharedListeners>
    </system.diagnostics>
    <system.serviceModel>
        <behaviors>
            <endpointBehaviors>
                <behavior name="BillSAFEServiceBehavior">
                    <callbackDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </endpointBehaviors>
        </behaviors>
        <bindings>
            <customBinding>
                <binding name="BillSAFEServiceBinding" receiveTimeout="00:01:00">
                    <textMessageEncoding messageVersion="Soap11" />
                    <httpsTransport />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint address="https://sandbox-soap.billsafe.de/V209" behaviorConfiguration="BillSAFEServiceBehavior"
                binding="customBinding" bindingConfiguration="BillSAFEServiceBinding"
                contract="BillSAFE.V209.IBillSAFEService" name="BillSAFEServiceSandbox"
                kind="" endpointConfiguration="" />
        </client>
        <diagnostics performanceCounters="Default">
            <messageLogging logEntireMessage="true" logKnownPii="true" logMalformedMessages="true"
                logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
        </diagnostics>
    </system.serviceModel>
</configuration> 
```

IBillSAFEService.cs

```
[ServiceContract(Namespace = "urn:BillSAFE")]
public interface IBillSAFEService
{
    [OperationContract(Name = "getAgreedHandlingCharges"/*, Action = "urn:BillSAFEAction", ReplyAction = "*"*/)]
    GetAgreedHandlingChargesResponse GetAgreedHandlingCharges(GetAgreedHandlingChargesRequest request);

    [OperationContract(Name = "getAgreedHandlingCharges"/*, Action = "urn:BillSAFEAction", ReplyAction = "*"*/)]
    Task<GetAgreedHandlingChargesResponse> GetAgreedHandlingChargesAsync(GetAgreedHandlingChargesRequest request);
} 
```

BillSAFEServiceClient.cs

```
public class BillSAFEServiceClient : ClientBase<IBillSAFEService>, IBillSAFEService, IDisposable
{
    public BillSAFEServiceClient(string endpointConfigurationName)
        : base(endpointConfigurationName)
    {

    }

    public GetAgreedHandlingChargesResponse GetAgreedHandlingCharges(GetAgreedHandlingChargesRequest request)
    {
        try
        {
            return this.Channel.GetAgreedHandlingCharges(request);
        }
        catch (Exception)
        {
            throw;
        }
    }

    public Task<GetAgreedHandlingChargesResponse> GetAgreedHandlingChargesAsync(GetAgreedHandlingChargesRequest request)
    {
        try
        {
            return this.Channel.GetAgreedHandlingChargesAsync(request);
        }
        catch (Exception)
        {
            throw;
        }
    }
} 
```

GetAgreedHandlingChargesRequest.cs

```
[MessageContract(WrapperName = "getAgreedHandlingChargesRequest", WrapperNamespace = "urn:BillSAFE", IsWrapped = true)]
public class GetAgreedHandlingChargesRequest : Request
{

} 
```

GetAgreedHandlingChargesResponse.cs

```
[MessageContract(WrapperName = "getAgreedHandlingChargesResponse", WrapperNamespace = "urn:BillSAFE", IsWrapped = true)]
public class GetAgreedHandlingChargesResponse : Response
{
    [MessageBodyMember(Name = "agreedCharge", Namespace = "urn:BillSAFE")]
    public ICollection<AgreedHandlingCharge> AgreedCharge { get; set; }

    public GetAgreedHandlingChargesResponse()
    {
        this.AgreedCharge = new List<AgreedHandlingCharge>();
    }
} 
```

响应.cs

```
[MessageContract(WrapperNamespace = "urn:BillSAFE", IsWrapped = true)]
public abstract class Response
{
    [MessageBodyMember(Name = "ack")]
    public string Ack { get; set; }

    [MessageBodyMember(Name = "errorList")]
    public ICollection<Error> ErrorList { get; set; }

    protected Response()
    {
        //this.Ack = V209.Ack.Error;
        this.ErrorList = new List<Error>();
    }
} 
```

请求.cs

```
[MessageContract(WrapperNamespace = "urn:BillSAFE", IsWrapped=true)]
public abstract class Request
{
    [MessageBodyMember(Name = "merchant", Namespace = "urn:BillSAFE")]
    public Merchant Merchant { get; set; }

    [MessageBodyMember(Name = "application", Namespace = "urn:BillSAFE")]
    public Application Application { get; set; }
} 
```

E2ETraceEvent（请求）

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>0</EventID>
<Type>3</Type>
<SubType Name="Information">0</SubType>
<Level>8</Level>
<TimeCreated SystemTime="2013-01-17T20:54:31.1064522Z" />
<Source Name="System.ServiceModel.MessageLogging" />
<Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
<Execution ProcessName="vstest.executionengine.x86" ProcessID="8812" ThreadID="8" />
<Channel />
<Computer>SEBASTIAN-PC</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<MessageLogTraceRecord Time="2013-01-17T21:54:31.1064522+01:00" Source="TransportSend" Type="System.ServiceModel.Dispatcher.OperationFormatter+OperationFormatterMessage" xmlns="http://schemas.microsoft.com/2004/06/ServiceModel/Management/MessageTrace">
<Addressing>
<Action>urn:BillSAFE/IBillSAFEService/getAgreedHandlingCharges</Action>
<To>https://sandbox-soap.billsafe.de/V209</To>
</Addressing>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header>
<VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo4Y6WSDqKJ5EkZhFjJEu4DAAAAAAs2bp4OEOTEWhpHQOICljk07jg5xHVctBqgCzT6DCuOAACQAA</VsDebuggerCausalityData>
</s:Header>
<s:Body>
<getAgreedHandlingChargesRequest xmlns="urn:BillSAFE">
<application xmlns:a="http://schemas.datacontract.org/2004/07/BillSAFE.V209" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<a:signature>###########</a:signature>
<a:version>>###########</a:version>
</application>
<merchant xmlns:a="http://schemas.datacontract.org/2004/07/BillSAFE.V209" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<a:id>>###########</a:id>
<a:license>>###########</a:license>
</merchant>
</getAgreedHandlingChargesRequest>
</s:Body>
</s:Envelope>
</MessageLogTraceRecord>
</DataItem>
</TraceData>
<System.Diagnostics xmlns="http://schemas.microsoft.com/2004/08/System.Diagnostics">
<LogicalOperationStack></LogicalOperationStack>
<Timestamp>752163894457</Timestamp>
<Callstack>
bei System.Environment.GetStackTrace(Exception e, Boolean needFileInfo)
bei System.Environment.get_StackTrace()
bei System.Diagnostics.TraceEventCache.get_Callstack()
bei System.Diagnostics.XmlWriterTraceListener.WriteFooter(TraceEventCache eventCache)
bei System.Diagnostics.XmlWriterTraceListener.TraceData(TraceEventCache eventCache, String source, TraceEventType eventType, Int32 id, Object data)
bei System.Diagnostics.TraceSource.TraceData(TraceEventType eventType, Int32 id, Object data)
bei System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLoggingSource source, Object data)
bei System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLogTraceRecord record)
bei System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(Message& message, XmlReader reader, MessageLoggingSource source)
bei System.ServiceModel.Diagnostics.MessageLogger.LogMessage(Message& message, XmlReader reader, MessageLoggingSource source)
bei System.ServiceModel.Channels.TextMessageEncoderFactory.TextMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset)
bei System.ServiceModel.Channels.HttpOutput.SerializeBufferedMessage(Message message)
bei System.ServiceModel.Channels.HttpOutput.SendAsyncResult.SendWithoutChannelBindingToken()
bei System.ServiceModel.Channels.HttpOutput.SendAsyncResult.Send()
bei System.ServiceModel.Channels.HttpOutput.SendAsyncResult..ctor(HttpOutput httpOutput, HttpResponseMessage httpResponseMessage, Boolean suppressEntityBody, TimeSpan timeout, AsyncCallback callback, Object state)
bei System.ServiceModel.Channels.HttpOutput.BeginSendCore(HttpResponseMessage httpResponseMessage, TimeSpan timeout, AsyncCallback callback, Object state)
bei System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.SendWebRequest()
bei System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.BeginSendRequest(Message message, TimeSpan timeout)
bei System.ServiceModel.Channels.RequestChannel.BeginRequest(Message message, TimeSpan timeout, AsyncCallback callback, Object state)
bei System.ServiceModel.Dispatcher.RequestChannelBinder.BeginRequest(Message message, TimeSpan timeout, AsyncCallback callback, Object state)
bei System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.StartSend(Boolean completedSynchronously)
bei System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.FinishEnsureOpen(IAsyncResult result, Boolean completedSynchronously)
bei System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.StartEnsureOpen(Boolean completedSynchronously)
bei System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.FinishEnsureInteractiveInit(IAsyncResult result, Boolean completedSynchronously)
bei System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.StartEnsureInteractiveInit()
bei System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.Begin()
bei System.ServiceModel.Channels.ServiceChannel.BeginCall(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, TimeSpan timeout, AsyncCallback callback, Object asyncState)
bei System.ServiceModel.Channels.ServiceChannel.BeginCall(ServiceChannel channel, ProxyOperationRuntime operation, Object[] ins, AsyncCallback callback, Object asyncState)
bei System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2,TArg3](Func`6 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, TArg3 arg3, Object state, TaskCreationOptions creationOptions)
bei System.Threading.Tasks.TaskFactory`1.FromAsync[TArg1,TArg2,TArg3](Func`6 beginMethod, Func`2 endMethod, TArg1 arg1, TArg2 arg2, TArg3 arg3, Object state)
bei System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.CreateGenericTask[T](ServiceChannel channel, ProxyOperationRuntime operation, Object[] inputParameters)
bei System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.CreateGenericTask(ServiceChannel channel, ProxyOperationRuntime operation, Object[] inputParameters)
bei System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.CreateTask(ServiceChannel channel, IMethodCallMessage methodCall, ProxyOperationRuntime operation)
bei System.ServiceModel.Channels.ServiceChannelProxy.InvokeTaskService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
bei System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
bei System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
bei BillSAFE.V209.IBillSAFEService.GetAgreedHandlingChargesAsync(GetAgreedHandlingChargesRequest request)
bei BillSAFE.V209.BillSAFEServiceClient.GetAgreedHandlingChargesAsync(GetAgreedHandlingChargesRequest request) in d:\Eigene Dokumente\Visual Studio 2012\Projects\BillSAFEManager\BillSAFE\V209\BillSAFEServiceClient.cs:Zeile 149.
bei BillSAFE.UnitTest.BillSAFEServiceClientUnitTest.<GetAgreedHandlingChargesAsyncTestMethod>d__2.MoveNext() in d:\Eigene Dokumente\Visual Studio 2012\Projects\BillSAFEManager\BillSAFE.UnitTest\BillSAFEServiceClientUnitTest.cs:Zeile 67.
bei System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
bei System.Runtime.CompilerServices.AsyncTaskMethodBuilder.Start[TStateMachine](TStateMachine& stateMachine)
bei BillSAFE.UnitTest.BillSAFEServiceClientUnitTest.GetAgreedHandlingChargesAsyncTestMethod()
bei System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
bei System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments)
bei System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
bei System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
bei Microsoft.VisualStudio.TestPlatform.MSTestFramework.TestMethodRunner.DefaultTestMethodInvoke(Object[] args)
bei Microsoft.VisualStudio.TestPlatform.MSTestFramework.TestMethodRunner.RunTestMethod()
bei Microsoft.VisualStudio.TestPlatform.MSTestFramework.TestMethodRunner.ExecuteTest(TestExecutionOutputs testExecutionOutputs)
bei Microsoft.VisualStudio.TestPlatform.MSTestFramework.TestMethodRunner.ExecuteInternal(TestExecutionOutputs testExecutionOutputs)
bei Microsoft.VisualStudio.TestPlatform.MSTestFramework.TestMethodRunner.Execute()
bei Microsoft.VisualStudio.TestPlatform.MSTestFramework.UnitTestRunner.RunInternal(TestMethod testMethod, Boolean isDataDriven)
bei Microsoft.VisualStudio.TestPlatform.MSTestFramework.UnitTestRunner.RunSingleTest(String name, String fullClassName, Boolean isAsync)
</Callstack>
</System.Diagnostics>
</ApplicationData>
</E2ETraceEvent> 
```

E2ETraceEvent（响应）

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>0</EventID>
<Type>3</Type>
<SubType Name="Information">0</SubType>
<Level>8</Level>
<TimeCreated SystemTime="2013-01-17T20:54:31.5263682Z" />
<Source Name="System.ServiceModel.MessageLogging" />
<Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
<Execution ProcessName="vstest.executionengine.x86" ProcessID="8812" ThreadID="12" />
<Channel />
<Computer>SEBASTIAN-PC</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<MessageLogTraceRecord Time="2013-01-17T21:54:31.5253905+01:00" Source="TransportReceive" Type="System.ServiceModel.Channels.BufferedMessage" xmlns="http://schemas.microsoft.com/2004/06/ServiceModel/Management/MessageTrace">
<HttpResponse>
<StatusCode>OK</StatusCode>
<StatusDescription>OK</StatusDescription>
<WebHeaders>
<Connection>close</Connection>
<Vary>Accept-Encoding</Vary>
<Content-Encoding></Content-Encoding>
<Content-Length>241</Content-Length>
<Content-Type>text/xml; charset=utf-8</Content-Type>
<Date>Thu, 17 Jan 2013 20:54:31 GMT</Date>
<Server>Apache</Server>
</WebHeaders>
</HttpResponse>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:BillSAFE">
<s:Header xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"></s:Header>
<SOAP-ENV:Body>
<ns1:getAgreedHandlingChargesResponse>
<ack xmlns="">ERROR</ack>
<errorList xmlns="">
<code>305</code>
<message>No data to return</message>
</errorList>
</ns1:getAgreedHandlingChargesResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope>
</MessageLogTraceRecord>
</DataItem>
</TraceData>
<System.Diagnostics xmlns="http://schemas.microsoft.com/2004/08/System.Diagnostics">
<LogicalOperationStack></LogicalOperationStack>
<Timestamp>752164731996</Timestamp>
<Callstack>
bei System.Environment.GetStackTrace(Exception e, Boolean needFileInfo)
bei System.Environment.get_StackTrace()
bei System.Diagnostics.TraceEventCache.get_Callstack()
bei System.Diagnostics.XmlWriterTraceListener.WriteFooter(TraceEventCache eventCache)
bei System.Diagnostics.XmlWriterTraceListener.TraceData(TraceEventCache eventCache, String source, TraceEventType eventType, Int32 id, Object data)
bei System.Diagnostics.TraceSource.TraceData(TraceEventType eventType, Int32 id, Object data)
bei System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLoggingSource source, Object data)
bei System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLogTraceRecord record)
bei System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(Message& message, XmlReader reader, MessageLoggingSource source)
bei System.ServiceModel.Diagnostics.MessageLogger.LogMessage(Message& message, XmlReader reader, MessageLoggingSource source)
bei System.ServiceModel.Channels.HttpInput.ProcessHttpAddressing(Message message)
bei System.ServiceModel.Channels.HttpInput.ParseMessageAsyncResult.BeginParse()
bei System.ServiceModel.Channels.HttpInput.BeginParseIncomingMessage(HttpRequestMessage httpRequestMessage, AsyncCallback callback, Object state)
bei System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.ProcessResponse(HttpWebResponse response, WebException responseException)
bei System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
bei System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.OnGetResponse(IAsyncResult result)
bei System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
bei System.Net.LazyAsyncResult.Complete(IntPtr userToken)
bei System.Net.ContextAwareResult.CompleteCallback(Object state)
bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
bei System.Net.ContextAwareResult.Complete(IntPtr userToken)
bei System.Net.LazyAsyncResult.ProtectedInvokeCallback(Object result, IntPtr userToken)
bei System.Net.HttpWebRequest.ProcessResponse()
bei System.Net.HttpWebRequest.SetResponse(CoreResponseData coreResponseData)
bei System.Net.HttpWebRequest.SetAndOrProcessResponse(Object responseOrException)
bei System.Net.ConnectionReturnResult.SetResponses(ConnectionReturnResult returnResult)
bei System.Net.Connection.ReadComplete(Int32 bytesRead, WebExceptionStatus errorStatus)
bei System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
bei System.Net.Connection.ReadCallbackWrapper(IAsyncResult asyncResult)
bei System.Net.LazyAsyncResult.Complete(IntPtr userToken)
bei System.Net.LazyAsyncResult.ProtectedInvokeCallback(Object result, IntPtr userToken)
bei System.Net.Security._SslStream.ProcessFrameBody(Int32 readBytes, Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
bei System.Net.Security._SslStream.ReadFrameCallback(AsyncProtocolRequest asyncRequest)
bei System.Net.AsyncProtocolRequest.CompleteRequest(Int32 result)
bei System.Net.FixedSizeReader.CheckCompletionBeforeNextRead(Int32 bytes)
bei System.Net.FixedSizeReader.ReadCallback(IAsyncResult transportResult)
bei System.Net.LazyAsyncResult.Complete(IntPtr userToken)
bei System.Net.ContextAwareResult.CompleteCallback(Object state)
bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
bei System.Net.ContextAwareResult.Complete(IntPtr userToken)
bei System.Net.LazyAsyncResult.ProtectedInvokeCallback(Object result, IntPtr userToken)
bei System.Net.Sockets.BaseOverlappedAsyncResult.CompletionPortCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
bei System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</Callstack>
</System.Diagnostics>
</ApplicationData>
</E2ETraceEvent> 
```

测试方法

```
 [TestMethod]
    public async Task GetAgreedHandlingChargesAsyncTestMethod()
    {
        using (BillSAFEServiceClient serviceClient = new BillSAFEServiceClient("BillSAFEServiceSandbox"))
        {
            try
            {
                GetAgreedHandlingChargesResponse response = await serviceClient.GetAgreedHandlingChargesAsync(new GetAgreedHandlingChargesRequest()
                {
                    Merchant = this.GetMerchant(),
                    Application = this.GetApplication()
                });

                if (response.Ack == "")
                {

                }
            }
            catch (Exception)
            {
                throw;
            }
        }
    } 
```

@艾伦

```
[DataContract(Name = "getAgreedHandlingChargesRequest")]
[MessageContract(WrapperName = "getAgreedHandlingChargesRequest", WrapperNamespace = "urn:BillSAFE", IsWrapped = true)]
public class GetAgreedHandlingChargesRequest : Request
{

}

[DataContract(Name = "getAgreedHandlingChargesResponse")]
[MessageContract(WrapperName = "getAgreedHandlingChargesResponse", WrapperNamespace = "urn:BillSAFE", IsWrapped = true)]
public class GetAgreedHandlingChargesResponse : Response
{
    #region Properties

    /// <summary>
    /// 
    /// </summary>
    [DataMember(Name = "agreedCharge")]
    [MessageBodyMember(Name = "agreedCharge", Namespace = "urn:BillSAFE")]
    public ICollection<AgreedHandlingCharge> AgreedCharge { get; set; }

    #endregion

    #region Constructor

    /// <summary>
    /// 
    /// </summary>
    public GetAgreedHandlingChargesResponse()
    {
        this.AgreedCharge = new List<AgreedHandlingCharge>();
    }

    #endregion
}

[DataContract]
[MessageContract(WrapperNamespace = "urn:BillSAFE", IsWrapped = true)]
public abstract class Response
{
    #region Properties

    /// <summary>
    /// 
    /// </summary>
    [DataMember(Name = "ack")]
    [MessageBodyMember(Name = "ack")]
    public string Ack { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [DataMember(Name = "errorList")]
    [MessageBodyMember(Name = "errorList")]
    public ICollection<Error> ErrorList { get; set; }

    #endregion

    #region Constructor

    /// <summary>
    /// 
    /// </summary>
    protected Response()
    {
        //this.Ack = V209.Ack.Error;
        this.ErrorList = new List<Error>();
    }

    #endregion
}

[DataContract]
[MessageContract(WrapperNamespace = "urn:BillSAFE", IsWrapped=true)]
public abstract class Request
{
    #region Properties

    /// <summary>
    /// 
    /// </summary>
    [DataMember(Name = "merchant")]
    [MessageBodyMember(Name = "merchant", Namespace = "urn:BillSAFE")]
    public Merchant Merchant { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [DataMember(Name = "application")]
    [MessageBodyMember(Name = "application", Namespace = "urn:BillSAFE")]
    public Application Application { get; set; }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:25:26.283

好的，我刚刚发现我再次查看的错误只是 xml 响应。其中所有属性都没有命名空间。这必须具体说明。

SOAP 响应

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:BillSAFE">
<s:Header xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"></s:Header>
<SOAP-ENV:Body>
<ns1:getAgreedHandlingChargesResponse>
<ack xmlns="">ERROR</ack>
<errorList xmlns="">
<code>305</code>
<message>No data to return</message>
</errorList>
</ns1:getAgreedHandlingChargesResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

C＃

```
[MessageContract(WrapperNamespace = "urn:BillSAFE", IsWrapped = true)]
public abstract class Response
{
    #region Properties

    /// <summary>
    /// 
    /// </summary>
    [MessageBodyMember(Name = "ack", Namespace = "")]
    public Ack Ack { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [MessageBodyMember(Name = "errorList", Namespace = "")]
    public ICollection<Error> ErrorList { get; set; }

    #endregion

    #region Constructor

    /// <summary>
    /// 
    /// </summary>
    protected Response()
    {
        this.Ack = V209.Ack.Error;
        this.ErrorList = new List<Error>();
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:54:59.323

在您的类上：Merchant、Application、Error 等`[DataContract]`在类声明和`[DataMember]`所有属性之上添加，如下所示：

```
[DataContract]
public class Merchant
{
    [DataMember] 
    public int SomeVariable { get; set; }

    ...
} 
```

另外，我注意到您的姓名和班级名称之间存在一些大小写差异，您`MessageBodyMember`是否尝试将它们更改为相同？

# haskell - Hask 中的函子和自由对象

> ID：14387839
> 
> 赞同：2
> 
> 时间：2013-01-17T20:49:07.047
> 
> 标签：haskell, category-theory

根据[维基百科对自由对象的定义，](https://en.wikipedia.org/wiki/Free_object#Definition)在我看来，Hask 中的每个 Functor 都是免费的。相反，每个自由对象也应该是一个 Functor。这是正确的，还是我误解了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T02:34:31.623

我不确定你是什么意思。通常，在函数式编程上下文中，分类定义的写法比人们想要的更通用。与其使用使用具体类别的 wikipedia 定义，不如考虑您获得的定义，您将想要免费的事物类型作为参数。

**定义：免费*foo*。**类型上 的自由*foo*是一个`T`对象`FT`，例如*foo*，以及一个函数，使得任何其他*foo*和那里的函数都存在一个唯一的*foo 态射*，使得.`F`*`i :: T -> FT` *`S``f :: T -> S` *`f'``f' . i = f`***

 ***插入说“monoid”，你会得到自由的幺半群，群，你会得到自由群，等等。注意，这个定义基本上没有使用范畴论，而且肯定不会谈论函子。它不像维基百科给出的定义那么正式，但应该直观地工作。给定这个定义，**自由构造**是制造自由对象的一般方式。例如`[]`，为幺半群提供了一个自由构造，即所有`[a]`的自由幺半群。`a``a`

我不认为所有函子都是自由函子。我也不认为 Hask 中的所有自由结构都是*Haskell*函子（所有自由结构导致抽象函子都是微不足道的）。

我对“免费”的定义仅适用于种类`*`，但更一般的定义也适用于其他种类。例如，免费的单子。

你可以全力以赴，做一些疯狂的事情。例如，您可能可以在`Sing k`（类型的单例类型`k`）上定义自由布尔代数，其中`k`可使用 GADT 进行枚举。这涉及到一些“功能性”的东西在 Hask 中是非常不明显的。***

# javascript - 确定使用多文件选择时的总文件大小

> ID：14387840
> 
> 赞同：0
> 
> 时间：2013-01-17T20:49:07.433
> 
> 标签：javascript, html

我有一些文件要求条件适用于单个文件选择，但是当使用多个文件选择时，它只计算第一个文件。我需要它来确定所有选定文件的总和，并且所有选定文件都具有可接受的文件扩展名。有谁知道我可以如何编辑这些条件？

```
var file = document.getElementById('file'); 
var ext = file.value.substring(file.value.lastIndexOf('.') + 1);

   if(ext!== "mp4" && ext!== "m4v" && ext!== "fv4"){
       alert('not an accepted file extension');
         return false;
} else

   if (file.files[0].size >= 11000000) {
       alert("File too Big");
          return false; 
}

  <input name="uploaded[]"  id="file" type="file" multiple /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:53:17.060

您可以将 映射`.files`到它们的大小，然后添加这些大小：http: [//jsfiddle.net/83F7B/](http://jsfiddle.net/83F7B/)。

```
var sizes = [].map.call(this.files, function(v) {
  return v.size;
});

var totalSize = sizes.reduce(function(a, b) {
  return a + b;
}, 0); 
```

您还可以遍历`.files`with`forEach`并检查每个文件的扩展名（或使用`.every`）。

# java - 在 intellij 中，如何提取添加到列表并返回列表而不是使用列表作为参数的方法？

> ID：14387841
> 
> 赞同：0
> 
> 时间：2013-01-17T20:49:10.850
> 
> 标签：java, intellij-idea, refactoring

如果我从这样的方法开始：

```
package com.sandbox;

import java.util.ArrayList;
import java.util.List;

public class Sandbox {

    public static void main(String[] args) {
        List<String> strings = new ArrayList<String>();
        strings.add("a");
        strings.add("b");

        for (String string : strings) {
            System.out.println(string);
        }
    }
} 
```

如果我突出显示第一`add(...)`行然后提取方法，代码变成这样：

```
package com.sandbox;

import java.util.ArrayList;
import java.util.List;

public class Sandbox {

    public static void main(String[] args) {
        List<String> strings = new ArrayList<String>();
        addA(strings);
        strings.add("b");

        for (String string : strings) {
            System.out.println(string);
        }
    }

    private static void addA(List<String> strings) {
        strings.add("a");
    }
} 
```

我几乎从不想要这个。我宁愿它做这样的事情：

```
package com.sandbox;

import java.util.ArrayList;
import java.util.List;

public class Sandbox {

    public static void main(String[] args) {
        List<String> strings = new ArrayList<String>();
        strings.addAll(addA());
        strings.add("b");

        for (String string : strings) {
            System.out.println(string);
        }
    }

    private static List<String> addA() {
        List<String> strings = new ArrayList<String>();
        strings.add("a");
        return strings;
    }
} 
```

或者可能是这样的：

```
package com.sandbox;

import java.util.ArrayList;
import java.util.List;

public class Sandbox {

    public static void main(String[] args) {
        List<String> strings = addA();        
        strings.add("b");

        for (String string : strings) {
            System.out.println(string);
        }
    }

    private static List<String> addA() {
        List<String> strings = new ArrayList<String>();
        strings.add("a");
        return strings;
    }
} 
```

有没有办法以这种方式制作 intellij 提取方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:12:06.330

您可以通过选择方法的前两行（包括新的 ArrayList 调用）来获得第二个结果。

# iphone - 在 iPhone 上的 Core Data 中存储任意 JSON 键/值

> ID：14387842
> 
> 赞同：1
> 
> 时间：2013-01-17T20:49:19.243
> 
> 标签：iphone, json, core-data, subquery

我已经为这个挑战苦苦挣扎了大约一个星期，但还没有找到合适的解决方案。我的挑战是这样的：

我有一个 JSON 模型，其中包含任意键/值对的属性列表。我的意思是，键/值对在编译时是未知的。只要事先定义好模型，在 Core Data 中建模和存储 JSON 就很容易，但是如果您不知道键的名称和值的类型，事情很快就会变得困难。就我而言，这就是我所面临的现实。

我的模型看起来像这样：

```
{
    knownKey1:knownType1,
    knownKey2:knownType2,
    properties:{
        someKey1:someType1,
        someKey2:someType2,
    }
} 
```

现在，理想情况下，我需要能够直接在商店中对这些任意键/值对执行搜索。我可以按照与[核心数据中的任意属性](https://stackoverflow.com/questions/3561936/arbitrary-attributes-in-core-data)和[如何使用 NSPredicate 过滤核心数据关系中描述的方法类似的方法来做到这一点。](https://stackoverflow.com/questions/3674055/how-can-i-use-nspredicate-to-filter-on-core-data-relationships?rq=1)使用带有 NSPredicates 的[子查询。](https://stackoverflow.com/questions/3076618/where-to-find-the-documentation-of-the-subquery-feature-of-nspredicate-for-core)

按照这种方法，我有一个类似于“对象”实体的东西，它与“属性”实体具有一对多关系：

```
Object <--->> Property 
```

一个属性有两个属性“key”和“value”：

```
Property
    key : someKey
    value : someValue 
```

这有效地允许我在 Core Data 中我的 JSON 对象的属性列表中建模和持久化任意键。并且使用像下面这样的子查询，我可以根据这些键/值对（在浏览器中编写，没有编译器等）获取：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"SUBQUERY($properties, $element, $element.key == %@ AND $element.value == %@) != 0", someKey, someValue]; 
```

到目前为止，只要知道“键”和“值”的类型，一切都很好。键将始终是一个字符串，如果我将自己的价值限制为始终是一个字符串，那么我很高兴，这就是它的结尾。我有我的对象/属性关系，我可以将任意键与字符串值相关联，并根据这些在存储中进行搜索。

但是，我希望解决方案更灵活一点，我想支持 String、Int、Bool、Date，它们通常在 JSON 中找到，并且在 Core Data 中也作为类型存在，但我一直没能找到一个很好的方法。也许我只是缺少一些东西？

我的第一种方法是拥有一个与 Object 有关系并作为 StringProperty、NumberProperty 等的父级的 Property 抽象实体。键将在 Property 中定义，而在任一子级中定义值，这意味着我可以在 StringProperty 中键入值字符串和 NumberProperty 等中的 Integer16，但是这不起作用，因为 Property 没有定义值，因此我无法在 Property/Object 关系的一般级别上执行搜索。

我现在正在考虑摆脱父/子结构，只创建一个 StringProperty 和一个 NumberProperty，然后让每个都与 Object 建立关系，这意味着 Object 将与 StringProperty 建立一对多关系，与 NumberProperty 建立一对多关系. 这不是很优雅，但我可能可以将这个实现隐藏在接口的某个地方。

我真的不喜欢这个解决方案，但这是我现在正在考虑的路线。我考虑过的其他事情：可转换的属性，但这些在存储中是不可搜索的。另外：将搜索放在一起存储，只需存储属性列表的 JSON 字符串并根据请求将其转换为 NSDictionary，但我认为这是最后的手段。

有什么建议，可能有一种我看不到树木的方法？

# android-arrayadapter - 简单的 ArrayAdapter 导致空指针异常

> ID：14387844
> 
> 赞同：0
> 
> 时间：2013-01-17T20:49:34.030
> 
> 标签：android-arrayadapter

我认为它正在发生的原因：

我猜我错误地实现了我的自定义 ArrayAdapter，或者我错误地查询了 ListView

错误：

```
01-17 15:49:56.775: E/AndroidRuntime(531): FATAL EXCEPTION: main
01-17 15:49:56.775: E/AndroidRuntime(531): java.lang.NullPointerException
01-17 15:49:56.775: E/AndroidRuntime(531):  at com.gannett.democratandchronicle.billstrainingcamp.EventAdapter.getView(EventAdapter.java:45) 
```

ScheduleActivity.java

```
package com.gannett.democratandchronicle.billstrainingcamp;
import java.util.ArrayList;
import java.util.Date;

import android.os.Bundle;
import android.widget.ListView;

public class ScheduleActivity extends BillsCampActivity 
{
    private EventAdapter ea;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_schedule);

        Event e1 = new Event("Test 1", new Date(), "Desc");
        Event e2 = new Event("Test 2", new Date(), "Desc");
        Event e3 = new Event("Test 3", new Date(), "Desc");
        Event e4 = new Event("Test 4", new Date(), "Desc");

        ArrayList<Event> schedule = new ArrayList<Event>();
        schedule.add(e1);
        schedule.add(e2);
        schedule.add(e3);
        schedule.add(e4);
        ea = new EventAdapter(this, R.layout.event_item, schedule);
        ListView listView = (ListView)this.findViewById(R.id.schedule_list_view);
        listView.setAdapter(ea);
    }

} 
```

activity_schedule.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" >
    <ListView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:id="@+id/schedule_list_view"
        >
    </ListView>
</LinearLayout> 
```

事件适配器.java

```
package com.gannett.democratandchronicle.billstrainingcamp;

import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.TextView;

public class EventAdapter extends ArrayAdapter<Event> 
{
    private int resource;

    public EventAdapter(Context context, int textViewResourceId,
            List<Event> objects) 
    {
        super(context, textViewResourceId, objects);
        this.resource = textViewResourceId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View eventItemView;
        if (convertView == null)
        {
            eventItemView = new LinearLayout(getContext());
            LayoutInflater li = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            li.inflate(resource, null);
        }
        else
        {
            eventItemView = (LinearLayout)convertView;
        }

        TextView eventName = (TextView)eventItemView.findViewById(R.id.eventName);
        TextView eventDate = (TextView)eventItemView.findViewById(R.id.eventDate);

        Event e = this.getItem(position);

        eventName.setText(e.toString());
        eventDate.setText(e.getDate().toString());
        return eventItemView;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:09:56.357

我看到的第一个错误是在 EventAdapter.java 上，您在其中创建了一个新的 LinearLayout，因为它应该来自 inflate 调用。getView 应如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    View eventItemView = convertView;
    if (eventItemView == null)
    {
        LayoutInflater li = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        eventItemView = li.inflate(resource, false);
    }

    TextView eventName = (TextView)eventItemView.findViewById(R.id.eventName);
    TextView eventDate = (TextView)eventItemView.findViewById(R.id.eventDate);

    Event e = this.getItem(position);

    eventName.setText(e.toString());
    eventDate.setText(e.getDate().toString());
    return eventItemView;
} 
```

然后，在布局 XML 上，您没有为 eventName 和 eventDate 定义 TextView，因此您以后可能会遇到资源未找到异常。activity_schedule.xml 应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" >
    <ListView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:id="@+id/schedule_list_view" >
        <TextView
        android:id="@+id/eventName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
        <TextView
        android:id="@+id/eventDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    </ListView>
</LinearLayout> 
```

希望能帮助到你。

# playframework - 用于 live.com 的 SecureSocial 中的 SMTP 配置

> ID：14387847
> 
> 赞同：2
> 
> 时间：2013-01-17T20:49:40.060
> 
> 标签：playframework, smtp, securesocial

我已经为电子邮件传输配置了我的`SecureSocial`模块。如果我尝试使用 Gmail 进行配置，它可以工作：`Play 2.0.4``SMTP`

```
smtp {
    host=smtp.gmail.com
    #port=25
    ssl=true
    user="user@gmail.com"
    password="password"
    from="user@gmail.com" 
} 
```

但是如果我用 live.com 尝试它（他们使用相同的端口）它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T16:13:08.573

我偶然发现了同样的问题。这是我的解决方案。只需将 smtp 配置设置为以下代码

```
smtp {
    host=smtp.live.com
    port=587
    tls=true
    user=<your email>
    password=<your password>
    from=<your email>
} 
```

注意`tls=true`部分而不是`ssl=true`

希望能帮助到你！

# ios - UISlider中的静态统一背景图像？

> ID：14387848
> 
> 赞同：2
> 
> 时间：2013-01-17T20:49:40.123
> 
> 标签：ios, background-image, uislider

有没有办法在 UISlider 上设置静态统一的背景图像？我想用它来选择一种色调，将色调范围作为背景图像保持不变，无论拇指位于何处，这将是很棒的。我想不出用 setMinimumTrackImage 和 setMaximumTrackImage 来做这件事的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T00:38:22.167

使用轨道图像无法达到您想要的效果。我的一个应用程序也有同样的需求。我所做的是在滑块下方显示色调范围图像。我还使用了一个自定义拇指图像，它在底部有更多的点，因此很清楚滑块选择了哪个色调值。

# javascript - jQuery.mouseover 从嵌套元素而不是附加侦听器的元素返回事件

> ID：14387854
> 
> 赞同：0
> 
> 时间：2013-01-17T20:49:54.150
> 
> 标签：javascript, jquery, html, mouseover

> **可能重复：**
> [$(this) OR event.target OR var input = $(this)](https://stackoverflow.com/questions/3388019/this-or-event-target-or-var-input-this)

我有以下 HTML

```
<span>Foo <b>Bar</b></span> 
```

和下面的JS

```
$("span").mouseover(function(event) {
    ...
}); 
```

当我悬停在`Foo` `$(event.target)`元素`<span>`上时，当我悬停在`Bar` `$(event.target)`元素`<b>`上时

`<b>`如何在不检查是否获得然后选择父项的情况下获得我想要的元素！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T21:02:23.637

使用`event.currentTarget`. 它是对具有事件侦听器的元素的引用。要获得有关事件顺序、冒泡和捕获的深入解释。非常值得花时间：[http ://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

# xml - 对 Hibernate 映射文件中的列属性使用方括号

> ID：14387856
> 
> 赞同：1
> 
> 时间：2013-01-17T20:50:00.047
> 
> 标签：xml, hibernate

休眠映射文件中列名周围的 [ ] 是否意味着什么？

前任。

```
<property name="tableCol" column="[TABLE_col]" not-null="false" type="long" unique="false" optimistic-lock="true" lazy="false" generated="never" /> 
```

对比

```
<property name="tableCol" column="TABLE_col" not-null="false" type="long" unique="false" optimistic-lock="true" lazy="false" generated="never" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:42:45.230

当`[]`您想使用数据库保留关键字作为列名时，使用列名周围。

例子 ：

如果您有一个名为的列，它是数据库保留关键字，如果您尝试使用以下`DESC`命令，它将导致：`JDBCException`

```
<property name="tableCol" type="string" >
    <column name="DESC" type="long" not-null="false" />
</property> 
```

您必须使用：

```
<property name="tableCol" type="string" >
    <column name="[DESC]" type="long" not-null="false" />
</property> 
```

# php - 是否可以检索超过 50 条 Post 对象的评论？

> ID：14387860
> 
> 赞同：2
> 
> 时间：2013-01-17T20:50:08.357
> 
> 标签：php, facebook-graph-api

下载`https://graph.facebook.com/GROUP_ID/feed?limit=500&access_token=TOKEN`，给我该组中的所有条目（我使用 收集更多帖子`paging->next`）。

但是，在查看了一些帖子后，我看到至少有 500 条评论，但提要仅返回 50 条。

我没有看到任何处理评论的分页，所以我怎么能“要求”更多呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:08:19.003

您必须手动请求所有字段，但您可以使用[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)请求更多评论。

```
.../GROUP_ID/feed?fields=comments.limit(100)&limit=... 
```

# sql - 关键字“SELECT”附近的语法不正确

> ID：14387865
> 
> 赞同：0
> 
> 时间：2013-01-17T20:50:37.810
> 
> 标签：sql, sql-server-2008

我有以下从视图调用的 SQL 函数

```
ALTER FUNCTION [dbo].[GetModulesforTesCaseID] 
(@TestCaseID numeric(18))
RETURNS VARCHAR(1000)
AS
BEGIN
declare @Modules VARCHAR(1000)
select @Modules = SUBSTRING(
(SELECT ',' + cast (S.MODULENAME as varchar)
FROM MODULE s JOIN EFFMODFORTESTCASE EMTC ON S.MODULEID = EMTC.MODULEID
JOIN TESTCASE TC ON TC.TESTCASEID =  EMTC.TESTCASEID
where tc.testcaseid = @TestCaseID
ORDER BY s.MODULENAME
FOR XML PATH('')),2,200000)

    if @Modules is null BEGIN
            set @Modules = SELECT M.MODULENAME FROM MODULE M JOIN SUBMODULESFORMODULE SFM ON SFM.MODULEID = M.MODULEID 
            JOIN EFFSUBMODFORTESTCASE ESMTC ON ESMTC.SUBMODULEID = SFM.SUBMODULEID WHERE TESTCASEID = @TestCaseID
    END 

return @Modules
end 
```

我正进入（状态

> *消息 156，级别 15，状态 1，过程 GetModulesforTesCaseID，第 16 行
> 关键字“SELECT”附近的语法不正确*

请帮助我纠正 If 条件下的语法错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:53:17.280

错误是当您将值分配`@Modules`给`IF`. 试试这个（你需要确保结果`SELECT`只返回一行）：

```
ALTER FUNCTION [dbo].[GetModulesforTesCaseID] 
(@TestCaseID numeric(18))
RETURNS VARCHAR(1000)
AS
BEGIN
declare @Modules VARCHAR(1000)
select @Modules = SUBSTRING(
(SELECT ',' + cast (S.MODULENAME as varchar)
FROM MODULE s JOIN EFFMODFORTESTCASE EMTC ON S.MODULEID = EMTC.MODULEID
JOIN TESTCASE TC ON TC.TESTCASEID =  EMTC.TESTCASEID
where tc.testcaseid = @TestCaseID
ORDER BY s.MODULENAME
FOR XML PATH('')),2,200000)

    if @Modules is null BEGIN
            SELECT @Modules = M.MODULENAME 
            FROM MODULE M 
            INNER JOIN SUBMODULESFORMODULE SFM 
                ON SFM.MODULEID = M.MODULEID 
            INNER JOIN EFFSUBMODFORTESTCASE ESMTC 
                ON ESMTC.SUBMODULEID = SFM.SUBMODULEID 
            WHERE TESTCASEID = @TestCaseID
    END 

return @Modules
end 
```

# python - 透视单应性问题

> ID：14387867
> 
> 赞同：3
> 
> 时间：2013-01-17T20:50:51.977
> 
> 标签：python, image-processing, opencv, perspectivecamera

我正在尝试使用 OpenCV 和 Python 中的透视扭曲来纠正图像。我知道相机的方向（X、Y、Z 角度）参考需要翘曲的平面。我知道最简单的方法是根据已知点计算单应矩阵，但是当该信息不可用时，我正在尝试做同样的事情。我正在使用的代码创建了一个旋转矩阵，然后结合了平移矩阵和内在矩阵。目前，该代码仅适用于对 z 轴的操作。对 x 和 y 轴的任何操作都会导致图像出现奇怪的失真。我的代码基于以下帖子底部的答案：[基于已知相机方向的 OpenCV 中的透视变形](https://stackoverflow.com/questions/12288473/perspective-warping-in-opencv-based-on-know-camera-orientation)

附件是标准单应性方法的原始图像和扭曲图像。

![原始图像](../Images/d0980f0710704d05acdcd61ac0d6e810.png)![透视变形](../Images/b5b08e609fc75065394ba796a80a658d.png)

```
from numpy import *
import cv

x = float(0)
y = float(5)
z = float(0)
f = 1

im = cv.LoadImage("Homography_test.jpg")
cv.NamedWindow("Distorted")
cv.NamedWindow("undistorted")

h, w = cv.GetSize(im)

x1 = x * (pi / 180)
y1 = y * (pi / 180)
z1 = z * (pi / 180)

# Create a rotation matrix
R_array = array([[x1], [y1], [z1]])
R_Vec = cv.fromarray(R_array)
R = cv.CreateMat(3, 3, cv.CV_64FC1)

cv.Rodrigues2(R_Vec, R)

#Create and combine with translation matrix
Trans_Mat = array([[[1], [0], [-w/2]],
                    [[0], [1], [-h/2]],
                    [[0], [0], [1]]])

Trans_Mat2 = cv.fromarray(Trans_Mat)
R_T_Mat = dot(R, Trans_Mat2)

#Create and combine with camera matrix
Intrinsic_Mat = array([[[f], [0], [w/2]],
                       [[0], [f], [h/2]],
                       [[0], [0], [1]]])

Int_Mat = cv.fromarray(Intrinsic_Mat)
H = dot(Int_Mat, R_T_Mat)
H2 = cv.fromarray(H)

persp = cv.CreateImage(cv.GetSize(im), cv.IPL_DEPTH_8U, 3)
cv.WarpPerspective(im, persp, H2)

cv.ShowImage("Distorted", im)
cv.ShowImage("undistorted", persp)

cv.WaitKey(0)
cv.DestroyWindow("Distorted")
cv.DestroyWindow("undistorted") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:35:13.867

您似乎错过了我的解决方案中的第 4 步，即“将图像沿 z 轴向下移动”，我曾经这样做过。

```
//4
trans(2,2) += image.rows; 
```

我随意选择了 image.rows，它为我在示例中使用的旋转提供了很好的比例感。由于您没有这样做，因此您的 z 坐标固定为 1。我想这是围绕 x 和 y 旋转时失真的原因，本质上是因为图像在围绕 x 或 y 旋转时离相机非常近透视失真是巨大的。沿 z 轴的平移越大，失真应​​该出现的越小。如果您不希望图像在沿 z 轴移动时缩小，只需增加焦距即可。您可能会注意到，在我的示例中，我将焦距设置为 image.rows。

# ruby-on-rails - Heroku 部署问题.. 仍然

> ID：14387869
> 
> 赞同：1
> 
> 时间：2013-01-17T20:50:54.270
> 
> 标签：ruby-on-rails, sqlite, heroku

昨天我问了一个关于推动 Heroku 的问题。它不工作，然后突然开始工作。我什么都没改变。现在在一个新的应用程序上，我遇到了完全相同的问题。我决定包含我的整个 Gemfile，希望我可以继续没有这种令人难以置信的挫败感

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

group :production, :staging do
  gem "pg"
end

group :development, :test do
  gem "sqlite3-ruby", "~> 1.3.0", :require => "sqlite3"
end

group :development do
  gem 'rspec-rails', '2.3'
end

group :test do
  gem 'rspec-rails', '2.3'
end

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

 gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

更新 gem 文件后，我运行：

```
$bundle install
$git add Gemfile
$git add Gemfile.lock
$git git commit -m "message"
$git push heroku master 
```

我仍然收到此错误

```
An error occurred while installing sqlite3 (1.3.7), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:warm-dusk-1436.git
  ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:warm-dusk-1436.git' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:53:06.780

看起来它在安装`sqlite3`gem 时遇到了问题，这是在您的 Gemfile 中指定要在*所有*环境中安装的，即使 Heroku 不会使用它。

尝试移动`gem 'sqlite3'`到开发组，这样您的生产环境就不会尝试安装它。

# javascript - 使用现有的 HTML 元素/删除文件到拖放文件上传？

> ID：14387871
> 
> 赞同：0
> 
> 时间：2013-01-17T20:51:00.880
> 
> 标签：javascript, jquery, file-upload, drag-and-drop, draggable

我试图找到一种方法，可以将由页面上的 HTML 元素表示的远程文件拖到拖放文件上传框。拖放文件上传的默认功能是使用浏览对话框接受来自浏览器*外部*的输入或在区域内拖动文件，但我不确定是否有一个实现允许来自表示一个元素的输入浏览器页面*内*的文件。

我正在使用[plupload](http://www.plupload.com/)但如果另一个插件支持该功能，我很想听听。*编辑添加：关于 plupload 是否支持这一点的见解将非常有帮助，因为它是项目规范的一部分。*这里对 JS 不是很了解。我希望这个描述能清楚地表达出来，一直在努力寻找这个，但似乎什么也没有出现。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:00:59.227

[https://github.com/blueimp/jQuery-File-Upload/wiki](https://github.com/blueimp/jQuery-File-Upload/wiki)

除了拖放/浏览之外，它还允许您“手动”将文件添加到上传队列（因此​​您可以在某些 html 元素中设置属性数据文件，然后访问这些并将它们添加到队列中）但您需要用 javascript 弄脏你的手，这是一个很棒的插件，但确实需要一些 JS 流利度才能让它做你想做的事情

注意：imo首先不使用它提供的ui/template系统，从基础开始：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)

从 API 页面：

> 块引用
> 
> 程序化文件上传
> 
> 通常，通过文件输入按钮选择文件或将文件拖放到拖放区来调用文件上传。
> 
> 但是，也可以为支持 XHR 文件上传的浏览器以编程方式上传文件（请参阅浏览器支持）：

```
 $('#fileupload').fileupload('add', {files: filesList}); 
```

> 第二个参数必须是具有 File 或 Blob 对象的数组（或类似数组的列表）作为 files 属性的对象。其他属性允许覆盖文件上传的选项，例如上传 url：

```
 $('#fileupload').fileupload('add', {files: filesList, url: '/path/to/upload/handler.json'}); 
```

更多：[https ://github.com/blueimp/jQuery-File-Upload/wiki/API](https://github.com/blueimp/jQuery-File-Upload/wiki/API)

# ssh - SSH 配置文件段落以打开远程服务器上的特定目录

> ID：14387872
> 
> 赞同：22
> 
> 时间：2013-01-17T20:51:16.577
> 
> 标签：ssh, alias, config

有没有办法专门 ssh 到远程位置的特定目录，**特别是使用本地 ssh 配置文件**（不是终端）？`Dir`例如，下面段落中的选项类似，

```
 Host remote_dir
       Hostname remote_server
       User username
       Dir path/to/remote_dir/ 
```

因此，如果我使用上述段落中的 Host 值进行 ssh，

```
ssh remote_dir 
```

然后，我想登录并在`path/to/remote_dir/`远程服务器上为我准备好终端，

```
username@remote_server: path/to/remote_dir/ > pwd
/home/username/path/to/remote_dir/ 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-17T21:57:17.267

[在ServerFault 上](https://serverfault.com/questions/167416/change-directory-automatically-on-ssh-login)的这篇文章中，他们说您不能通过 ssh 配置文件来完成所有操作。但是您可以使用 ssh 配置和您的 .bash_profile 或终端书呆子所说的任何内容来完成。在 ssh 配置文件中添加

```
Host dev
  Hostname server.com
  User joe 
```

然后在你的 .bash_profile 添加一个别名

```
alias domain1="ssh dev -t 'cd domains/domain1; bash'" 
```

这里`dev`指的是您在配置文件中设置的内容。

在终端中，只需键入`domain1`，您将被要求输入密码并直接进入目录。为您的所有域创建一个新别名，这将使每个域的登录变得超级容易。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-17T21:22:36.483

看看 [https://serverfault.com/questions/167416/change-directory-automatically-on-ssh-login](https://serverfault.com/questions/167416/change-directory-automatically-on-ssh-login)

这是[公认的答案](https://serverfault.com/a/167439/151221)：

> `LocalCommand`反正不是你想要的。那是在*你的*机器上运行的。你想要`RemoteCommand`。像这样的东西对我有用：

```
 Host example.net
  RemoteCommand cd / && exec bash --login
  RequestTTY yes 
```

* * *

（旧答案）对于类似的用例，`ssh -t`也是一种选择：

```
ssh server -t "cd /my/remote/directory; bash --login" 
```

它不一样，因为它不使用 ssh 配置。但是您可以为命令定义一个别名并最终得到类似的效果。

# c++ - 如何使用 SetWindowLong 来处理类成员函数？

> ID：14387873
> 
> 赞同：0
> 
> 时间：2013-01-17T20:51:18.650
> 
> 标签：c++, oop, winapi, callback

> **可能重复：**
> [将指针传递给成员函数](https://stackoverflow.com/questions/11792664/to-pass-a-pointer-to-a-member-function)

当我离开课堂时`WNDPROC DefEditProc;`，`EditKeyProc`一切正常。但是现在当我粘贴代码时，编译失败并出现错误`error: invalid use of member function (did you forget the '()' ?)`。所以我的问题是如何将这段代码压缩到类中，这样我就不会污染全局命名空间？

```
#include <windows.h>
#include <richedit.h>

class richEdit {
  HWND richeditWindow;
  WNDPROC DefEditProc;
  public:

  LRESULT EditKeyProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
    return CallWindowProc(DefEditProc, hwnd, uMsg, wParam, lParam);
  }
  richEdit() {
    HMODULE richedit_library = LoadLibrary("Msftedit.dll");
    if (NULL == richedit_library) abort();

    HINSTANCE hInstance = (HINSTANCE)GetModuleHandle(0);
    richeditWindow = CreateWindowExW (
      WS_EX_TOPMOST,
      MSFTEDIT_CLASS,
      L"window text",
      WS_OVERLAPPED | WS_SYSMENU | ES_MULTILINE | WS_VISIBLE,
      0, 0, 500, 500,
      NULL, NULL, hInstance, NULL
    );
    DefEditProc = (WNDPROC)SetWindowLong(richeditWindow, GWL_WNDPROC, (long)EditKeyProc);
  }
  ~richEdit() {
    MSG msg;
    while( GetMessageW( &msg, richeditWindow, 0, 0 ) ) {
      TranslateMessage( &msg );
      DispatchMessageW( &msg );
    }
  }
};

int main() {
  richEdit re;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:53:19.680

您应该使用*自由函数*而不是*成员函数*，因为*成员函数*具有隐式`this`参数。您必须声明`EditKeyProc`为`static CALLBACK`，并在需要时找到另一种传递`this`指针的方法。

```
static LRESULT CALLBACK EditKeyProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
    :::
} 
```

此外，您可以使用`SetWindowSubclass`which 来处理正确的子类化，并为您保留一个额外的指针参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T21:32:53.957

试试这个：

```
#include <windows.h>
#include <richedit.h>

class richEdit
{
private:
    HWND richeditWindow;
    WNDPROC DefEditProc;

    static LRESULT CALLBACK EditKeyProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
    {
        richEdit *pThis = (richEdit*) GetWindowLongPtr(hwnd, GWL_USERDATA);
        return CallWindowProc(pThis->DefEditProc, hwnd, uMsg, wParam, lParam);
    }

public:
    richEdit()
        : richeditWindow(NULL), DefEditProc(NULL)
    {
        HMODULE richedit_library = LoadLibrary("Msftedit.dll");
        if (NULL == richedit_library) abort();

        HINSTANCE hInstance = (HINSTANCE)GetModuleHandle(0);
        richeditWindow = CreateWindowExW (
          WS_EX_TOPMOST,
          MSFTEDIT_CLASS,
          L"window text",
          WS_OVERLAPPED | WS_SYSMENU | ES_MULTILINE | WS_VISIBLE,
          0, 0, 500, 500,
          NULL, NULL, hInstance, NULL
        );
        if (NULL == richeditWindow) abort();

        SetWindowLongPtr(richeditWindow, GWL_USERDATA, (LONG_PTR)this);
        DefEditProc = (WNDPROC) SetWindowLongPtr(richeditWindow, GWL_WNDPROC, (LONG_PTR)&EditKeyProc);
    }

    ~richEdit()
    {
        if (richeditWindow != NULL)
        {
            SetWindowLongPtr(richeditWindow, GWL_WNDPROC, (LONG_PTR)DefEditProc);
            DestroyWindow(richeditWindow);
        }
    }
}; 
```

或者：

```
#include <windows.h>
#include <richedit.h>

namespace myNS
{
    LRESULT CALLBACK richEditKeyProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);

    class richEdit
    {
    private:
        HWND richeditWindow;
        WNDPROC DefEditProc;

    public:
        richEdit()
            : richeditWindow(NULL), DefEditProc(NULL)
        {
            HMODULE richedit_library = LoadLibrary("Msftedit.dll");
            if (NULL == richedit_library) abort();

            HINSTANCE hInstance = (HINSTANCE)GetModuleHandle(0);
            richeditWindow = CreateWindowExW (
              WS_EX_TOPMOST,
              MSFTEDIT_CLASS,
              L"window text",
              WS_OVERLAPPED | WS_SYSMENU | ES_MULTILINE | WS_VISIBLE,
              0, 0, 500, 500,
              NULL, NULL, hInstance, NULL
            );
            if (NULL == richeditWindow) abort();

            SetWindowLongPtr(richeditWindow, GWL_USERDATA, (LONG_PTR)this);
            DefEditProc = (WNDPROC) SetWindowLongPtr(richeditWindow, GWL_WNDPROC, (LONG_PTR)&richEditKeyProc);
        }

        ~richEdit()
        {
            if (richeditWindow != NULL)
            {
                SetWindowLongPtr(richeditWindow, GWL_WNDPROC, (LONG_PTR)DefEditProc);
                DestroyWindow(richeditWindow);
            }
        }
    };

    LRESULT CALLBACK richEditKeyProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
    {
        richEdit *pThis = (richEdit*) GetWindowLongPtr(hwnd, GWL_USERDATA);
        return CallWindowProc(pThis->DefEditProc, hwnd, uMsg, wParam, lParam);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:57:06.300

您不能将指向成员函数的指针用作窗口过程，因为 Windows 需要一个常规函数指针。在内部，它在某些情况下没有足够的存储空间来存储成员指针（在 MSVC 中，它们最多可达 16 个字节，32 位），并且它不知道在任何情况下要使用什么“this”指针。

如果您唯一的兴趣是避免命名空间污染，那么最简单的解决方案是使用命名空间而不是类。否则，您必须使 EditKeyProc 成为该类的静态成员并使用 SetWindowLong 存储“this”指针的副本以供 EditKeyProc 访问。

# ios - 自定义 UITableViewCell 中的 UIButton 在旋转后停止工作

> ID：14387874
> 
> 赞同：6
> 
> 时间：2013-01-17T20:51:21.730
> 
> 标签：ios, ipad, uitableview, rotation, orientation

问题：

我使用了包含两个按钮的自定义 UITalbeViewCell，它们在纵向上工作正常。旋转后，它们都停止响应按钮修饰内部功能。有些人在旋转后出现按钮无法正确绘制的问题。我的看起来不错，因为按钮在旋转后显示在正确的位置，但它们不再响应按钮按下。

对于我的应用程序中的这个特定视图，我使用 UIPageController 在视图中实现多页，对于嵌入在页面滚动控制器中的视图（现在将其命名为 EmbeddedView），有一个包含自定义 UITableViewCell 的 UITableView。自定义表格视图单元格只有一个 nib，文件的所有者是 EmbeddedView。

在嵌入式视图中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
/*===== This is the most memory efficient way of creating table view cells =====*/

static NSString *CellIdentifier = @"CellIdentifier";

CustomTableViewCell *cell = (CustomTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    [[self customTableCellNib] instantiateWithOwner:self options:nil];
    cell = [self customTableCell];
    [self setCustomTableCell:nil];
    }
} 
```

我尝试了什么：

我为自定义表格视图单元格创建了另一个 nib 文件并在 -cellForRowAtIndexPath() 中使用它，我检查了方向并使用不同的 nib 动态创建单元格，没有运气。

我在 -didRotateFromInterfaceOrientation() 中添加了 [tableview reloadData]，没有做任何事情。

请有人指出我正确的方向吗？任何帮助表示赞赏。

这是 IB 中的表视图 Autosizing：

![在此处输入图像描述](../Images/b2dc4b65535bd5e0d3068b8e612b1d94.png)

看起来不错，但按钮不起作用

![在此处输入图像描述](../Images/5e30abfa77b394599854464dca21537c.png)

更新：我尝试在 IB 中为表格视图指定不同的 Autosizing 掩码，结果如下所示：

<1>

![在此处输入图像描述](../Images/2fb6b5cfb7bc3c29684705b01cc68b71.png) ![在此处输入图像描述](../Images/de2875f8d5a98a7626bf8a63ed062bc7.png)

![在此处输入图像描述](../Images/49c75797a8fa8d5ec34bb125a6d164b2.png)

<2>

![在此处输入图像描述](../Images/7717a15d786350bfb0a2913ada45b5e5.png) ![在此处输入图像描述](../Images/7c79ba650b9dca7b458e1a429305dba3.png)

![在此处输入图像描述](../Images/e0e995f68d24a603bcfced92619afb55.png)

<3>

![在此处输入图像描述](../Images/9fccaba6912568df15366d8634d37c4e.png)

![在此处输入图像描述](../Images/52d39c629f31532a5aed00c8ec731c92.png)

<4>

![在此处输入图像描述](../Images/71a6ec24c04012787e24d5fd49531216.png)

![在此处输入图像描述](../Images/0cc1ce570cc80d1805cdda94ca37d9e9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:12:39.957

Have you checked how the superview is being resized?

Check if the superview has 'clip to bounds' checked. If it is not check it. That will make the view clip its contents so you see if it is resizing ok.

I'd say the superview is not sizing correctly and because of that the touch events are not well delivered also.

EDIT - So this was the tip that could let the OP reach the solution:

> What I normally do in cases like of unexpected behavior in resizing and such is to change every view in the hierarchy to a different, well recognizable, color. Right now you have view A and view B with the same background color (or clear) and you don't see if view B is resizing well. Good luck.

# sql-server - 在 VB 中生成带有 SQL 结果的列表框

> ID：14387875
> 
> 赞同：0
> 
> 时间：2013-01-17T20:51:20.560
> 
> 标签：sql-server, vb.net

我正在构建一个小型 VB 应用程序，它查询 MSSQL 数据库，然后在列表框中显示这些结果。有一个 TextBox (TextBox1)，用户将在其中输入一个 CharName，该 CharName 将用于选择数据库中的 CharName，以仅返回该用户的结果。我目前将 sql 查询编码到 Button1 中。

所以我需要帮助的是从 TextBox1 获取输入并将 sql 查询中的 Chars.CharName 替换为用户提供的输入，以便在单击按钮时执行查询并使用结果填充 ListBox1。

顺便说一句，我是 VB 的菜鸟（显然）。

到目前为止我的代码是：

```
Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub TextBox1_Text(sender As System.Object, e As System.EventArgs) Handles TextBox1.TextChanged

    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim sqlquery As String
        sqlquery = ("SELECT Chars.CharName, CharItems.Type, CharItems.TypeID,  CharItems.ItemName, CharItems.Bag, CharItems.Slot, CharItems.ItemUID, CharItems.Craftname, CharItems.Gem1, CharItems.Gem2, CharItems.Gem3, CharItems.Gem4, CharItems.Gem5, CharItems.Gem6 FROM Chars INNER JOIN CharItems ON Chars.CharID = CharItems.CharID WHERE ([CharName] = '" + TextBox1.Text + "'")

    End Sub

    Private Sub ListBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ListBox1.SelectedIndexChanged

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:02:26.823

您需要进行连接并从数据库中获取结果并将它们存储在 a 中`Datatable`，然后您可以将您的绑定`Datatable`到`ListBox`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:16:06.870

不是 VB 的人，所以这不是我的想法。不过注意评论

```
'put these at the top of your code file:
imports System.Data.SqlClient
imports System.Data

'and this in the Button1_Click:
dim sql as string
dim cname as string
cname=TextBox1.Text

'never just directly accept the input from a textbox, etc, into an SQL query. Always use a parameter so prevent SQL Injection attacks.
  sqlquery="SELECT Chars.CharName, CharItems.Type, CharItems.TypeID,CharItems.ItemName,CharItems.Bag, CharItems.Slot, CharItems.ItemUID, CharItems.Craftname, CharItems.Gem1, CharItems.Gem2, CharItems.Gem3, CharItems.Gem4, CharItems.Gem5, CharItems.Gem6 FROM Chars INNER JOIN CharItems ON Chars.CharID = CharItems.CharID WHERE Chars.CharName = @CharName" 

using connection as SqlConnection = new SqlConnection(ConnectionString) 'substitute ConnectionString for the connection string to your database, where you get this from is beyond the scope of this code but it should be somewhere secure i.e app.config ConnectionStrings section
connection.Open()
using comm as SqlCommand = new SqlCommand(query,conn)
dim p as SqlParameter = new SqlParameter("CharName",cname)
comm.Parameters.Add(p)
dim rs as SqlDataReader = comm.ExecuteReader
dim dt as DataTable = new DataTable
dt.Fill(rs)
end using 'comm
end using 'conn

ListBox1.DisplayMember="CharName"
ListBox1.DataSource=dt
ListBox1.DataBind() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:04:45.627

设置值时，字符串文字不需要括号，`sqlquery`并且那里也有错字。

它应该只是

```
Dim sqlquery As String
sqlquery = "SELECT Chars.CharName, CharItems.Type, CharItems.TypeID, CharItems.ItemName, CharItems.Bag, CharItems.Slot, CharItems.ItemUID, CharItems.Craftname, CharItems.Gem1, CharItems.Gem2, CharItems.Gem3, CharItems.Gem4, CharItems.Gem5, CharItems.Gem6 FROM Chars INNER JOIN CharItems ON Chars.CharID = CharItems.CharID WHERE [CharName] = '" + TextBox1.Text + "'" 
```

我不想在这里讨论使用这种方法进行 SQL 注入的整个问题，但是您确实应该阅读有关执行存储过程而不是原始 SQL 的内容，以便您可以参数化您的输入。

# android - 缩放 html-5 视频会导致视频仅在被点击之前播放音频

> ID：14387877
> 
> 赞同：0
> 
> 时间：2013-01-17T20:51:37.637
> 
> 标签：android, cordova, html5-video

我正在尝试缩放视频以使其充满整个屏幕。通过添加

```
style="position:absolute; height:100%;width:100%;" 
```

到视频标签。这可以正常工作并使视频居中，但每次我尝试播放视频时，灰色的视频加载屏幕都会停留。视频正在播放，因为我可以听到音频。当我单击视频时，加载屏幕立即消失并继续正常播放。如果我删除宽度：100%；视频正常播放，但未居中。

这似乎只发生在 android 4.1 或更高版本中。它只发生在第一个视频上。

# ruby-on-rails-3 - `should respond_with_content_type` 和 `should respond_with` 失败，因为 response 为 nil

> ID：14387879
> 
> 赞同：1
> 
> 时间：2013-01-17T20:51:41.210
> 
> 标签：ruby-on-rails-3, unit-testing, tdd, rspec-rails, shoulda

在以下测试中，我**希望**未登录的页面访问者获得“404”，并且响应的内容类型为 html，我表示如下：

```
require 'spec_helper'
require 'rspec-rails'
#require 'shoulda'
#require 'shoulda-matchers'
#require 'shoulda/matchers/action_controller'
describe StaticPagesController do
  context "home page without being logged in" do
    before { visit root_path }
    it { should respond_with :missing }
    it { should respond_with_content_type :html }
    it { should_not render_template :application }
    it { should_not render_with_layout }
    it { should_not set_the_flash }
  end
end 
```

这是被测控制器：

```
class StaticPagesController < ApplicationController
  def home
    if signed_in?
      redirect_to user_path
    else
      render layout: false,
             file: %Q(#{ Rails.root }/public/404),
             formats: [:html],
             status: '404'
    end
  end
end 
```

当我执行测试时，`respond_with`和`respond_with_content_type`匹配器失败

```
NoMethodError: undefined method `content_type' for nil:NilClass
/home/rev/.rvm/gems/ruby-1.9.3-p194/gems/shoulda-matchers-\
1.4.2/lib/shoulda/matchers/action_controller/\
respond_with_content_type_matcher.rb:59:in `response_content_type' 
```

和

```
NoMethodError: undefined method `response_code' for nil:NilClass
/home/rev/.rvm/gems/ruby-1.9.3-p194/gems/shoulda-matchers-\ 
1.4.2/lib/shoulda/matchers/action_controller/respond_with_matcher.rb:57:
in `response_code' 
```

这对我来说很奇怪，因为这些方法是：

```
 def response_content_type
      @controller.response.content_type.to_s
    end 
```

和

```
 def response_code
      @controller.response.response_code
    end 
```

这意味着`@controller`' 的响应为空或`@controller`为零，这是可能的，但不反映我在浏览器中看到的行为。

我的猜测，考虑到我在这方面是一个完整的 n00b（一般是 Ruby/Rails/RSpec/etc/MVC 开发），是我忘记了一两个 gem，或者我做了其他愚蠢的事情，但我猜不出是什么，几天的搜索也没有找到任何有用的线索。这是当前的 gem 环境：

```
 thor (0.16.0)
 bundler (1.2.1)
 childprocess (0.3.6)
 sprockets (2.2.2)
 rspec-mocks (2.12.1)
 rspec (2.12.0)
 selenium-webdriver (2.27.2)
 actionmailer (3.2.11)
 rdoc (3.12)
 polyglot (0.3.3)
 shoulda-matchers (1.4.2)
 mocha (0.10.5)
 rack-ssl (1.3.2)
 metaclass (0.0.1)
 shoulda-context (1.0.2)
 bcrypt-ruby (3.0.1)
 mime-types (1.19)
 websocket (1.0.6)
 rspec-rails (2.12.2)
 rspec-expectations (2.12.1)
 rack-test (0.6.2)
 lumberjack (1.0.2)
 treetop (1.4.12)
 stream (0.5)
 sass (3.2.5)
 listen (0.7.2)
 guard-rspec (2.4.0)
 bourne (1.1.2)
 xpath (1.0.0)
 uglifier (1.3.0)
 mail (2.4.4)
 nokogiri (1.5.6)
 activeresource (3.2.11)
 journey (1.0.4)
 rails (3.2.11)
 i18n (0.6.1)
 coderay (1.0.8)
 activemodel (3.2.11)
 activerecord (3.2.11)
 libwebsocket (0.1.7.1)
 rack-cache (1.2)
 builder (3.0.4)
 guard (1.6.1)
 rake (10.0.3)
 bootstrap-sass (2.2.2.0)
 coffee-script-source (1.4.0)
 slop (3.4.3)
 active_attr (0.7.0)
 rack (1.4.4)
 debugger-ruby_core_source (1.1.6)
 debugger (1.2.3)
 columnize (0.3.6)
 coffee-script (2.2.0)
 ffi (1.3.1)
 shoulda (3.3.2)
 sass-rails (3.2.6)
 arel (3.0.2)
 jquery-rails (2.1.4)
 debugger-linecache (1.1.2)
 tilt (1.3.3)
 coffee-rails (3.2.2)
 hike (1.2.1)
 actionpack (3.2.11)
 rb-inotify (0.8.8)
 railties (3.2.11)
 pry (0.9.11.2)
 rspec-core (2.12.2)
 rgl (0.4.0)
 diff-lcs (1.1.3)
 activesupport (3.2.11)
 addressable (2.3.2)
 libnotify (0.5.9)
 capybara (2.0.2)
 json (1.7.6)
 erubis (2.7.0)
 guard-spork (1.4.1)
 execjs (1.4.0)
 multi_json (1.5.0)
 tzinfo (0.3.35)
 spork (0.9.2)
 sqlite3 (1.3.7)
 method_source (0.8.1)
 rubyzip (0.9.9) 
```

如果我遗漏了以上任何有用的信息，请告诉我。

关于如何确定为什么`@controller`或者`@controller.response`应该是 nil 的任何建议？我粗略地追踪处决的尝试没有成功。

提前致谢，

德雷尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:03:35.780

尝试替换`before { visit root_path }`为`before { get :home }`.

“访问”语法通常与 Capybara 和 Webrat 等库提供的完整堆栈接受规范一起使用。RSpec 提供了一个特殊的上下文和辅助方法来执行控制器规范中的单个操作，您可以在此处阅读更多信息：[https ://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs /控制器规格](https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/controller-specs)。调用`get(:home)`将模拟对被测控制器的“home”操作的 GET 请求。我相信这将`@controller`在引擎盖下设置，正如您的应该匹配器所期望的那样。

`user_signed_in?`您可能还需要模拟登录用户以测试控制器操作中的真假情况。如果您使用的是 Devise，[Devise wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)有一个很好的关于设置 RSpec 控制器规范的演练。

# visual-studio - Team Foundation 在签入后将项目显示为签出

> ID：14387882
> 
> 赞同：1
> 
> 时间：2013-01-17T20:51:46.707
> 
> 标签：visual-studio, tfs, visual-studio-2012

我有一个包含数千个页面的网站，我已将其添加到 TFS 源代码控制中。我创建了一个工作区，其本地路径映射到实际文件目录（因此，无论何时保存文件，实际源文件也会被保存）。我已经添加了我的文件，然后将它们签入。

第一次签入后，我在所有文件旁边看到了锁定符号。现在，如果我去签出和编辑，我可以签入我的更改，这会显示在变更集中，但文件仍处于签出状态。我可以查看历史记录并查看所有迭代（每次签入），但它仍然始终显示文件已签出。

我认为这个问题可能与我作为特定用户创建工作区然后将其设为公共工作区这一事实有关。我现在以尝试签入/签出的其他用户身份登录。

我还刚刚注意到，在我的历史记录中，它显示了 UserB 所做的更改，但在源代码管理资源管理器中，它显示由 UserA 签出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:51:22.287

创建此项目时，我将工作区设置为初始源代码目录。然后我将另一个用户的工作区设置到同一个目录（它是一个共享驱动器）。Visual Studio 并没有阻止我这样做，因为这个本地路径是在不同的计算机上设置的，但我相信这就是问题所在。

# .net - 数据集设计器：添加完全重复的表？

> ID：14387885
> 
> 赞同：0
> 
> 时间：2013-01-17T20:51:54.583
> 
> 标签：.net, visual-studio-2010, dataset, strongly-typed-dataset

我正在数据集设计器中创建一个数据集（称为 Foo）。

它有一个名为 Bar 的 DataTable。它没有底层数据库表；东西以特定于应用程序的方式填充。到目前为止，一切都很好。

代码生成器创建类 Foo、Bar 和 BarRow。在 Foo 类中，还生成了一个名为 tableBar 的 Bar 类型的私有成员。

跟我到现在？

我想添加另一个与 tableBar*完全相同*的 DataTable ，但将包含语义不同的信息。重用 tableBar 是不行的，因为我的应用程序的某些部分需要两组数据。但我希望新表也属于 Bar 类，因为我的应用程序代码中的几个方法需要能够解释“旧”表和“新”表。

换句话说，我试图让 DataSet Designer 这样做：

```
public class Foo: DataSet
{
    public class Bar
    {
        // ... stuff ...
    }
    private Bar tableBar;
    private Bar tableBaz; // <--- this is the new table! Note no separate class Baz.
} 
```

所以我想知道如何使用 DataSet 设计器，或者如何修改底层的 .XSD 文件，以支持 DataSet 中属于同一 DataTable 继承类的两个 DataTable 对象。

谢谢大家的帮助。

# ios - substringFromIndex 得到相反的结果

> ID：14387887
> 
> 赞同：1
> 
> 时间：2013-01-17T20:52:03.873
> 
> 标签：ios, nsstring

这是我的字符串：

```
NStrring x=@"D1 - Damages"; 
```

当我发出`[x substringFromIndex:2]` 我得到 的**- 结果是损害**而不是得到 D1

我只需要将 D1 作为返回的字符串，但上面的语句是删除 D1 并返回字符的其余部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T21:11:19.323

您需要使用**`substringToIndex:2`**来获取`D1`. 您正在使用`substringFromIndex`的基本上是从索引 2 开始获取字符串，这将为您提供`- Damages`

# xamarin.ios - 在 UI 线程之外创建一个不显示的、大小合适的 UIView？

> ID：14387893
> 
> 赞同：1
> 
> 时间：2013-01-17T20:52:29.777
> 
> 标签：xamarin.ios

`UIView`在将其添加到显示的视图之前，有没有办法从 UI 线程外部操纵未显示的大小？

在处理一些异步 iOS 代码时，我想我会尝试构建一个异步方法，该方法`UIView`稍后会显示 [在 UI 线程上]。在这种情况下，这似乎是“陷阱”，这是`UILabel`我想给它一个从[`StringSize`call](https://stackoverflow.com/q/14385826/48700)派生的预定帧大小的地方。不幸的是，首先调用的`UIView`构造函数。`RectangleF frame``UIApplication.EnsureOnUIThread`

```
// Throws UIKitThreadAccessException on Frame-setting UILabel constructor.
Task<UILabel> getView = Task.Factory.StartNew(() => {
    //... Do some async fun (e.g., call web service for some data for someNSString)

    SizeF requiredStringSize = someNSString.StringSize(someFont, new SizeF(maxWidth, float.MaxValue), UILineBreakMode.WordWrap);
    RectangleF someViewFrame = new RectangleF(PointF.Empty, requiredStringSize)
    return new UILabel(someViewFrame);
}); 
```

由于我真的不需要在此任务执行时设置有效位置，我想我可以避免在构造函数中设置框架并在之后设置大小。不幸的是，您似乎只能通过`UIView.Frame`整体修改来设置大小。虽然无参数构造函数不会进行此 UI 线程调用，但只要我尝试将 设置`Frame`为所需的大小，`UIView.Frame`访问器就会执行此操作并且它会爆炸。

```
// Also throws UIKitThreadAccessException, this time when setting the Frame directly.
Task<UILabel> getView = Task.Factory.StartNew(() => {
    //...do all the above stuff...
    UIView someView = new UILabel();
    someView.Frame = new RectangleF(someView.Frame.Location, requiredStringSize);
}); 
```

我已经决定让我的代码更具体到手头的情况，并使用 a`Task<string>`代替，让显示代码（在 UI 线程上运行）处理视图创建，但很高兴知道这是否可能，因为它将使我正在编写的代码更具可扩展性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:57:17.037

[UIKit 不是为在主线程之外使用而设计的。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/Introduction/Introduction.html)

当这条规则被忽略时，我已经看到一些奇怪的行为蔓延，所以我强烈建议不要这样做。

# kendo-ui - 使用数据源模型验证规则进行 KendoUI MVVM 验证

> ID：14387894
> 
> 赞同：1
> 
> 时间：2013-01-17T20:52:29.900
> 
> 标签：kendo-ui, kendo-datasource, kendo-mvvm, kendo-validator

验证一个小技巧`kendo.data.Model`

因此，这个小技巧无需手动将 HTML5 必需属性添加到每个输入字段，而是获取您在模型中定义的所有验证规则，并将它们作为属性添加到适当的字段。没有经过全面测试，只是一个快速破解。根据 Kendo 的说法，如果您使用 MVVM，则不会处理验证规则，但如果您将 Dataource 直接绑定到网格，它们会处理。

代码：我只是把这段代码放在一个名为`definevalidation.js`

```
function getValidationAttributesFromModel(myFields) {
    var myValidatedFields = [];
    var obj = null;
    $.each(myFields, function(fieldName) {
        if (this.validation) {
            var obj = {
                fieldName : fieldName,
                validation : this.validation
            };
            myValidatedFields.push(obj);
        }
    });

    addValidationAttributes(myValidatedFields);
}

function addValidationAttributes(myValidatedFields) {
    $.each(myValidatedFields, function(index) {
        $('#' + this.fieldName).attr(this.validation);
    });
} 
```

用法：如果 ParentDS 是您的数据源，那么在您的表单代码中只需使用

```
getValidationAttributesFromModel(ParentDS.options.schema.model.fields) 
```

样品型号：

```
mydatamodel = kendo.data.Model.define({
            id : "__KEY",
            fields : {
                __KEY : {
                    type : "string"
                },
                __STAMP : {
                    type : "number"
                },
                ID : {
                    editable : false,
                    nullable : true
                },
                firstName : {
                    type : "string",
                    validation : {
                        required : true
                    }
                },
                middleName : {
                    type : "string"
                },
                lastName : {
                    type : "string"
                }
            }
        }); 
```

# testing - Loadrunner Analysis 抛出一个错误，我不知道是什么导致了这些错误

> ID：14387911
> 
> 赞同：0
> 
> 时间：2013-01-17T20:53:13.017
> 
> 标签：testing, performance-testing, loadrunner

我们最近运行了一个 PT，在分析中加​​载该测试的结果时，我收到一个弹出窗口，告诉我有一个错误，错误跟踪如下。我不确定是什么导致了这些错误，或者它们甚至意味着什么。我检查了分析报告，它包含所有必要的信息。

一位专家告诉我，错误的存在是因为我在测试运行期间捕获了错误快照，但我不相信，拍摄快照怎么会产生这么多错误！

这里的负载运行专家之一可以帮助我理解这些错误的含义以及可能导致它们的原因吗？

日志跟踪位于：[https ://docs.google.com/document/d/16gfaAXpGcKC8f6wfKU_dVjM-IqfbzWgdM6VvVYvo68Q/edit](https://docs.google.com/document/d/16gfaAXpGcKC8f6wfKU_dVjM-IqfbzWgdM6VvVYvo68Q/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:07:47.007

与上述错误范围相关的问题：来自您的错误日志....

```
75004 Transaction : <OpenWebPage_Login_31>
InstanceID: 4294967299 
VUser info:
+Host:HostMachine_IP, 
+Group:scriptname.1, 
+Script:scriptname.1, 
+ID:1\. 
End Time: 1357937049.69605 
Transaction end time is less than the scenario start time 
```

为了清楚起见，我已经清理了您日志中的一行。请注意，该行包括几个已被清除的项目，例如“HostMachine_IP”。您还可以检查组“scriptname.1”的主机，以找出应用到哪个负载生成器主机。

正如您所指出的，您涉及多个负载生成器，请仔细检查错误日志中的错误范围。它们都与一个特定的主机名相关联吗？如果您在同一主机上有多个组，那么这两个组都会受到此错误的影响（错误跟随主机而不是组）。如果错误与脚本和组相关联，那么在另一个负载生成器上的另一个组中的相同脚本是否会发生相同的错误，例如在不同负载生成器上作为控制集运行的单个用户？

将错误分开。批判性地检查错误。所有主机都意味着一件事：一个主机另一个。跨多个负载生成器的脚本实例意味着一件事：单个负载生成器上的实例是另一件事。一个负载生成器上的所有脚本都意味着一件事，尤其是当第二个/第三个负载生成器上的实例没有失败时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:47:35.313

确保您的所有负载生成器与您的控制器处于相同的 major.minor(patch) 版本级别。

# angularjs - 执行运行块时未渲染 DOM

> ID：14387912
> 
> 赞同：0
> 
> 时间：2013-01-17T20:53:16.087
> 
> 标签：angularjs

我想在我的 AngularJS 应用程序中加载 json 数据时显示“正在加载...”消息。显示消息和加载数据是在我的主模块的运行块中完成的。问题是执行 run 块时浏览器没有渲染 DOM，因此没有显示消息。运行块究竟是什么时候执行的？我怎样才能实现我想要的：首先显示页面，然后开始加载数据并显示一条消息？

我的代码在这里：www.esatoivola.net/kirkkovuosi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:32:11.127

> “运行块究竟是什么时候执行的？”
> 
> 运行块 - 在创建注入器后执行并用于启动应用程序。只有实例和常量可以注入运行块。这是为了防止在应用程序运行时进行进一步的系统配置。--[模块文档](http://docs.angularjs.org/guide/module)

.

> “我怎么能……先显示页面，然后开始加载数据并显示消息？”

您可以使用 ng-show 和 $scope 或 $rootScope 属性（最初设置为 true）来控制显示“正在加载”消息。您的主控制器可以加载数据，当数据返回时，设置一些与视图绑定的 $scope 属性并将“showLoadingMessage”属性设置为 false。

HTML：

```
<div ng-controller="MyCtrl">
  <div ng-show="showLoadingMessage">Loading... </div>
  <ul>
     <li ng-repeat="item in data">
        ....
     </li>
  </ul>
</div> 
```

控制器：

```
function MyCtrl($scope, $resource) {
    $scope.showLoadingMessage = true;
    var dataResource = $resource('/somewhere/else');
    dataResource.query( function(data) {
       $scope.showLoadingMessage = false;
       $scope.data = data; 
    });
} 
```

# java - 使用 WebDriver 更改 URL

> ID：14387918
> 
> 赞同：3
> 
> 时间：2013-01-17T20:53:28.553
> 
> 标签：java, selenium-webdriver

我正在使用 Selenium WebDriver (Java) 并尝试在 WebDriver 登录到页面后更改 URL。

有没有办法：

1.  更改当前窗口的 URL，或
2.  打开一个新选项卡并转到另一个页面。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T21:13:48.217

你没有分享任何代码，所以我不知道你的方法是什么，我只分享我对这个主题的了解。

**1）**对于您的第一个问题，我认为您知道如何使用 selenium Web 驱动程序打开一个新页面，也许您可​​以使用一些等待方法，然后再次调用驱动程序。

```
 //open browser
    driver = new FirefoxDriver();

    //login
    driver.get("https://www.google.com/");

    //set implicit wait
    driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);

    //Then invoke method again for your second request(I am not try this code maybe you need to create new driver object)
    driver.get("https://www.stackoverflow.com"); 
```

**2）**对于您的第二个问题，此[链接](https://stackoverflow.com/questions/11358316/selenium-web-driver-open-new-tab-instead-of-a-new-window)可以帮助您。

# android - 在 adobe air for android 中写入文件

> ID：14387919
> 
> 赞同：0
> 
> 时间：2013-01-17T20:53:29.783
> 
> 标签：android, flash, file, air

你好 evrey 身体我已经非常努力地将文件写入 android 并且到目前为止没有 secceus。这是我正在使用的代码。

```
function writeAirFile():void
{
    // Change the folder path to whatever you want plus name your mp3
    // If the folder or folders does not exist it will create it.
    var file:File = new File("/mnt/sdcard/new/new.apk");
     //file.nativePath = "/mnt/sdcard/new/new.apk";
     trace(file.nativePath);
    fileStream.open(file, FileMode.WRITE);
    fileStream.writeBytes(fileData, 0, fileData.length);
    fileStream.close();
    trace("The file is written.");
    trace(file.nativePath);

} 
```

uts需要工作，但事实并非如此。我已经添加了本地存储写作的权限，请我需要帮助，非常感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:14:49.273

指出自定义目录不是您可以使用的最佳实践，`File.applicationStorageDirectory`因此无需担心安全和权限相关问题。

```
 var file:File = File.applicationStorageDirectory.resolvePath("new/new.apk");
    fileStream.open(file, FileMode.WRITE);
    fileStream.writeBytes(fileData, 0, fileData.length);
    fileStream.close();
    trace("The file is written.");
    trace(file.nativePath); // you can find where it is stored. 
```

建议始终使用异步模式文件操作，这样即使文件太大也不会发生 UI 冻结。

# qt - Qt Creator 缩进在保存时更改

> ID：14387920
> 
> 赞同：9
> 
> 时间：2013-01-17T20:53:32.803
> 
> 标签：qt, coding-style, ide, qt-creator, indentation

我正在使用 Qt creator，我愿意创建自己的编码风格。

我在默认 Qt [built-in] 设置中唯一更改的是将“Tab policy”更改为“Tabs Only”，将“Align continuation lines”更改为“With regular indent”。“制表符大小”和“缩进大小”都设置为 4。

我得到以下缩进：

```
int function( int param1 )
{
<  t  >if(  param != 0 &&
<  t  >< s >param != 1 )
<  t  >{
<  t  ><  t  >//do something
<  t  >}
} 
```

< t > 用于制表符，< s > 用于空格。

问题是当我保存时（Ctrl+S）Qt Creator 将空格转换为制表符:(我如何设置它不转换任何内容并且在保存时不更改缩进？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T21:03:07.010

看看这里：

```
Tools > Options > Text Editor > Behavior
cleanups upon saving section 
```

或者，如果您只想要当前项目（在路径中更改 qt creator 版本）

[http://doc.qt.io/qtcreator/creator-editor-settings.html](http://doc.qt.io/qtcreator/creator-editor-settings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-12T14:09:50.677

您可以在下面的详细信息：

*   文本文件
*   C++ 文件
*   QML 文件

[http://doc.qt.io/qtcreator/creator-indenting-code.html](http://doc.qt.io/qtcreator/creator-indenting-code.html)

# c++ - C++11 可变参数模板函数——错误在哪里？

> ID：14387924
> 
> 赞同：2
> 
> 时间：2013-01-17T20:53:57.957
> 
> 标签：c++, templates, c++11, variadic-templates

以下代码给出了 MSVC++ 2012 CTP（支持 C+11）和 Intel C++ XE 13.0 的编译错误：

```
template <typename F, typename... Args>
    void apply(F f, std::tuple<Args...>& args) {
       // doesn't do much yet
}

bool f1(char c) {
    return c == 'c';
}

int main(int argc, char* argv[]) {
    auto t = std::make_tuple('c');
    apply(f1, t);
return 0;
} 
```

VS2012错误是：

```
error C2243: 'type cast' : 
conversion from 'std::tuple<char,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil> *'
 to 'std::tuple<std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil> &' exists,
 but is inaccessible 
```

Intel C++ XE 13.0 上的错误是：

```
error : no instance of function template "apply" matches the argument list 
```

我错过了什么？这里真的有错误，还是我只有两个错误的编译器？

更新：当我在两个编译器上使用 boost::tuple 而不是 std::tuple 时，结果相同（或相似）。

附录：感谢评论中的所有交叉检查。我已经向这两家优秀的公司发送了错误报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:58:00.727

这可能是标准库实现中的 VC11 错误。尽管 CTP 支持可变参数模板，但据我所知，标准库并未重写以使用它们，而是采用了一些机制来模拟可变参数模板。这很可能是您问题的根源。

# c# - 如何使用 Windows 窗体将 WriteableBitmap 保存到具有特定大小的文件？

> ID：14387925
> 
> 赞同：2
> 
> 时间：2013-01-17T20:53:59.363
> 
> 标签：c#, .net, winforms

我在 Windows Phone 7 中使用以下代码来保存具有特定大小的 JPEG 图像：

```
WriteableBitmap wBitmap = new WriteableBitmap(resizedImage);
MemoryStream m = new MemoryStream();
wBitmap.SaveJpeg(m, h, w, 0, 100); 
```

我收到错误消息：

```
"WritableBitmap does contain a definition for SaveJpeg" 
```

如何使用 C# 在桌面 Windows 窗体应用程序上执行相同的操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:56:46.607

以下是使用[JpegBitmapEncoder执行此操作的方法（好吧，这很有趣，现在是 srs）](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.jpegbitmapencoder.jpegbitmapencoder.aspx)

```
//Assuming resizedImage is a BitmapSource
JpegBitmapEncoder encoder = new JpegBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create(resizedImage));
using(var stream = File.Open(theAristocratsFilename))
    encoder.Save(stream); 
```

# html - 有没有办法将 jquery ui 类添加到我自己的每个元素的 css 文件中

> ID：14387926
> 
> 赞同：1
> 
> 时间：2013-01-17T20:54:06.680
> 
> 标签：html, css, jquery-ui

有没有办法将jquery ui类添加到我自己的每个元素的css文件中，IE：

```
 input { 
               ui-corner-all  /*  <- JQuery UI class */ 

              } 
```

与将类添加到每个输入相反，IE：

```
 <input name="myinput" type="text" class="ui-corner-all"  value="" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:07:16.737

您可以查看[LESS](http://lesscss.org)，这是一个非常相似的问题，关于 SO [Can a CSS class inherit one or more other classes？](https://stackoverflow.com/questions/1065435/can-a-css-class-inherit-one-or-more-other-classes)

LESS 是 CSS 的扩展，具有变量、嵌套规则、函数、操作等的高度抽象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:10:19.653

你也可以使用像 LESS 这样的预处理器来实现这一点。你必须保存你的`ui.css`as`ui.less`然后你可以做这样的事情：

```
@import url(ui.less);

input {
  .ui-corner-all;
} 
```

在将您的 less 编译为 css 之后，它将采用`ui-corners-all`该类的所有样式并将它们应用于您的输入。这只是使用 css 预处理器的众多优势之一。如果您熟悉 css，那么它确实值得研究并且不是很难学习。你可以在这里找到更多信息：http: [//lesscss.org/](http://lesscss.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:01:27.720

您可以随时使用 jQuery`.addClass`方法向元素添加类，包括页面加载，例如：

```
$(function() {
  $(input).addClass('ui-corner-all');
}); 
```

这将`ui-corner-all`在页面加载时将类添加到 html 中的每个输入元素。如果您只想选择页面上的某些元素，请使用更具体的选择，例如：

```
$(function() {
  $('#myInput').addClass('ui-corner-all');
}); 
```

这会将`ui-corner-all`类添加到页面上 ID 为 的所有元素`myInput`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T21:08:15.737

你可能想研究一下 Sass。这将使您可以选择通过 @extend 将 css 类扩展到您自己的类。

[这是一个方便的 Sass + Compass 视频](http://css-tricks.com/video-screencasts/88-intro-to-compass-sass/)

[然后你可以这样做之后](http://iain.nl/using-sass-with-jquery-ui)

这样，您不必依赖 javascript 来添加类。这一切都是通过css完成的。

希望这可以帮助！

# asp.net - 收到错误“从客户端检测到潜在危险的 Request.Cookies 值（详细信息 =” 我收到错误消息： 从客户端检测到有潜在危险的 Request.Cookies 值（详细信息=

= 100 肯定会对物理计算产生负面影响。根据其中一位大师的文档和这个 Unity 论坛条目，您应该避免 Transform.scale 值！= 1 还是不开心？好的，那么下一个测试是从高速开始但没有加速度。在这个阶段，我们想知道问题是由高速本身还是加速度造成的。知道物理引擎开始失败的速度值会很有趣 - 请发布它们以便我们可以比较它们。 编辑：要调查的更多事情 6.7 m/sec 听起来并不多，所以我想有一个特殊原因或多种原因导致事情出错。 您的最大允许时间步长是否足够高？对于测试，我建议 5 到 10x Fixed Timestep。请注意，这可能会降低帧速率，但可以稍后修复。 在编辑器播放器和 Android 上运行游戏有什么区别吗？ 您是否注意到由于0.01 FixedTimestep. 这表明物理引擎可能有问题。 是不是有静态对撞机（具有对撞机但没有 collider 的对象Rigidbody）被移动或以其他方式操纵？这将导致在 PhysX 中进行大量重新计算。 图层怎么样：所有墙壁都在同一图层上吗？所涉及的层在碰撞检测矩阵中是否正确配置？ 无反弹效果总是发生在同一面墙上吗？如果是这样，您可以复制第一面墙并将其放在第二面的位置，看看这面墙是否有问题。 如果不是付出太多努力，我会尝试设置一些标准立方体作为墙壁，以确保这transform.scale不是罪魁祸首（我在这方面的经历非常糟糕）。 你是操纵重力还是TimeManager.timeScale从脚本中操纵？ 顺便说一句：你在使用重力吗？（应该没问题只是 asp.netvb.nethttp 4 1 回答 1 This answer is useful 0 这是默认的 .NET 行为。您不应该将 html 发送到 cookie。 可用选项： <httpruntime requestvalidationmode="2.0">在 <system.web>使用任何算法加密内容，从而破坏 html。 或者删除html 于 2017-05-03T21:07:58.707 回答 Related 3 ios - MFMessageComposeViewController 在 iOS 7 上要慢得多 1 php - Symfony2：用帖子数据填充表单的某些字段 1 javascript - 用于关闭浏览器窗口的 Selenium web_driver Javascript 问题 1 javascript - 在 Highcharts 学分中使用图像 0 database - 在 Visual Studio 2012 中更改发布数据库的排序规则 1 ruby-on-rails - Rspec 控制器进出同名命名空间 1 asp.net - 如何在asp.net中以网页形式显示word文件 5 php - 在 Codeigniter 中获取 JSON 响应 3 shell - 在每行的两个模式之间打印文本时出错 1 iphone - 从存储在服务器上的 XML 文件中检索数据并加载 iPhone Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</system.web></httpruntime>

> ID：14387934
> 
> 赞同：0
> 
> 时间：
> 
> 标签：asp.net, vb.net, http

我收到错误消息：

> 从客户端检测到有潜在危险的 Request.Cookies 值（详细信息=`<html><p align=cent...)`

来自在服务器上运行的 Visual Studio 2010 VB.NET Web 应用程序。当特定 PC 尝试访问应用程序时会出现该消息。其他电脑在访问应用程序时不会出现此错误。我已经看到了很多关于 Request.Forms 的答案，但没有看到 Request.Cookies。出现错误的 PC 正在运行 Windows XP 和 IE 8。有人对我应该在哪里解决此消息有任何建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T21:07:58.707

这是默认的 .NET 行为。您不应该将 html 发送到 cookie。

可用选项：

*   `<httpRuntime requestValidationMode="2.0" />` 在`<system.web>`
*   使用任何算法加密内容，从而破坏 html。
*   或者删除html

# vba - 循环报告过滤器以更改可见性不起作用

> ID：14387938
> 
> 赞同：4
> 
> 时间：2013-01-17T20:55:00.037
> 
> 标签：vba, excel, pivot-table

我正在尝试选择一个报告过滤器，在本例中为加拿大。这意味着必须使其余部分不可见。此代码可以正常工作：

```
Public Sub FilterPivotTable()

    With ActiveSheet.PivotTables("Epidemiology").PivotFields("COUNTRY")

        .PivotItems("Canada").Visible = True
        .PivotItems("USA").Visible = False
        .PivotItems("Germany").Visible = False
        .PivotItems("France").Visible = False

    End With

End Sub 
```

但是，当我们将其他国家添加到我们的“流行病学”数据透视表中时，我正在尝试做准备，所以我尝试了一个 for 循环。此代码不起作用：

```
With ActiveSheet.PivotTables("Epidemiology").PivotFields("COUNTRY")

    .PivotItems("Canada").Visible = True

    For Each Pi In .PivotItems
        If Pi.Value = "CANADA" Then
            Pi.Visible = True
        Else
            Pi.Visible = False
        End If
    Next Pi

End With 
```

它给了我一个`Pi.Visible = False`在线错误。我得到的错误是`Run-time error '1004': Unable to set the Visible property of the PivotItem class`

为什么它不能在 for 循环中工作？！

令人沮丧的是，我在网上找到的所有示例都使用类似的语法。（有些使用索引，但我尝试过并得到了同样的错误。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T21:09:14.670

这是你正在尝试的吗？

```
Sub Sample()
    Dim Pi As PivotItem

    With ActiveSheet.PivotTables("Epidemiology").PivotFields("COUNTRY")

        .PivotItems("Canada").Visible = True

        For Each Pi In .PivotItems
            If UCase(Pi.Value) = "CANADA" Then
                Pi.Visible = True
            Else
                Pi.Visible = False
            End If
        Next Pi
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:01:59.600

在可透视过滤器中，您必须始终选择至少一项。即使您打算稍后在代码中选择一个。

```
With Pt.PivotFields("COUNTRYSCENARIO")

 ' Sets all filters to true, resetting it.
 .ClearAllFilters

 ' This is necessary if you want to select any options
 ' other than "All Pivot Items = Visible" and 
 ' "OnlyOneSpecificPivotItem = Visible"
 .EnableMultiplePageItems = True

 If .PivotItems.Count > 0 Then

     ' goofy but necessary
     Set firstPi = .PivotItems(1)

         For Each Pi In .PivotItems                                

             ' Make sure that that first pivot item is visible.
             ' It gets mad if it's already visible and you
             ' set it to visible with firstPi.Visible = True
             ' ...pretty silly

             If firstPi.Visible = False Then firstPi.Visible = True

             ' Don't loop through firstPi
             If Pi.Value <> firstPi.Value Then

                 If Pi.Value = opt1 Or Pi.Value = opt2 Or Pi.Value = opt3 Then
                     Pi.Visible = True

                 ElseIf Pi.Visible = True Then

                     Pi.Visible = False

                 End If

             End If

          Next Pi

          ' Finally perform the check on the first pivot item   
          If firstPi = opt1 Or firstPi = opt2 Or firstPi = opt3 Then
              firstPi.Visible = True
          Else
              firstPi.Visible = False
          End If
       End If
End With 
```

请注意，如果您尝试不选择任何内容，例如 opt 1 = "" 和 opt2 = "" 和 opt3 = ""，您将遇到同样的错误：您必须至少选择一个枢轴项目。

# ios - 如何在 uicollectionview didselect 委托方法中检测单元格

> ID：14387941
> 
> 赞同：2
> 
> 时间：2013-01-17T20:55:06.973
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我正在构建一个类似于 iPhone 照片应用程序的应用程序。我可以使用`PSUICollectionView`. 当我点击集合视图的网格单元格时，应该会出现一个复选框图像。我的问题是当我使用以下代码时，我看到多个随机单元格填充了复选框图像。

```
- (void)collectionView:(PSUICollectionView *)collectionView didSelectItemAtIndexPath:     (NSIndexPath *)indexPath 
{
    NSLog(@"%@ - %d", NSStringFromSelector(_cmd), indexPath.item);
    ImageGridCell *cell = (ImageGridCell *)[collectionView cellForItemAtIndexPath:indexPath];
    UIButton *chkboxBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    [chkboxBtn setFrame:CGRectMake(60, 60, 30, 30)];
    [chkboxBtn setImage:[UIImage imageNamed:@"Checkmark-iPhone.png"] forState:UIControlStateNormal];
    [cell addSubview:chkboxBtn];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:55:14.887

问题可能是您的自定义单元没有实现该`prepareForReuse`方法。当一个单元被重复使用时，它可能有也可能没有复选框，这取决于复选框是否是在以前的使用中添加的。

解决这个问题的几种方法。一种简单的方法是在 中添加标签`ckhboxBtn`，然后`chkboxBton`在`prepareForReuse`方法中删除 。例如，添加复选框时，添加以下内容：

```
[chkboxBtn setTag:100]; 
```

然后在您的`UICollectionViewCell`类实现中，添加/扩展该`prepareForReuse`方法：

```
-(void)prepareForReuse{
    [[self viewWithTag:100] removeFromSuperview];
} 
```

# url - 如何拥有不覆盖 URL 的链接

> ID：14387942
> 
> 赞同：1
> 
> 时间：2013-01-17T20:55:11.800
> 
> 标签：url, backbone.js

我有一个链接，我通常会有 href="#"。我希望 URL 在单击时保持不变，但无论它是什么，似乎主干都会复制并粘贴到 URL 的链接。我什 `<a href="javascript:alert('true')>Link</a>` 至把浏览器的 URL 设置为“localhost:5000/javascript:alert('true').

如何让主干避免复制和粘贴到浏览器 URL 的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:01:36.613

这是“它是功能而不是错误”类型的事情之一。Backbone 故意这样做，原因（至少）有两个：

1.  它提供了一个 URL，用户可以复制/粘贴、相互发送电子邮件等，并且仍然将它们带到您网站中的正确位置；没有这种不可能的 URL 操作
2.  它允许基于浏览器的后退/前进功能（在尚不支持历史 API 的浏览器中）

可能还有其他原因，但目前我能想到的就是这些。关键是，这就是 Backbone 路由器应该做的事情。使用它，然后想知道如何让它不操纵 URL 有点类似于`<span>`在页面上使用一个并询问如何让用户编辑其文本。

如果您不想要该功能，请根本不要使用路由器；只是让你的观点相互调用。

# .net - .NET Web API 路由问题

> ID：14387944
> 
> 赞同：1
> 
> 时间：2013-01-17T20:55:13.090
> 
> 标签：.net, asp.net-web-api

我可能只是盯着这个太久了，或者我只是误解了 WebAPI 背后的想法，但我正在寻找是否有办法做到这一点，以便路由表响应自定义操作名称。例如，我想要：

```
// -> /api/student/studentRecord?studentId=1
[HttpGet]
public Student StudentRecord(int studentId){
    //Do Something and return the Student Record
}

// -> /api/student/newStudent?name=john
[HttpPost]
public int NewStudent(String name){
    //Do whatever and return the new id
} 
```

我不确定我在这里缺少什么，或者是否可以完成。我已经在互联网上搜索了一段时间，似乎无法弄清楚。

webAPI 的重点是在每个控制器中只有一个 PUT、POST、GET 等，还是我可以做我想做的事情？

我玩过路由，但我认为我让它变得更糟了！每次我现在尝试调用某些东西时，都会调用相同的方法。

这是我在路由配置文件中的内容：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:44:19.990

您甚至不需要上面链接的“神奇”操作选择器（尽管它听起来确实很酷） - WebApi 允许`action`在 url 中包含名称（= 控制器方法名称，除非被覆盖）。

因此，在您的示例中：

```
// -> /api/student/studentRecord?studentId=1
[HttpGet]
public Student StudentRecord(int studentId){} 
```

路由模板如下所示：

```
routeTemplate: "api/{controller}/{action}" 
```

*   控制器将解析给学生
*   对学生记录的操作
*   我认为您根本不需要将查询字符串参数放在模板中（除非您希望能够将其附加到 url 部分）

阅读此内容以获取更多详细信息： [http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T21:06:40.333

看看这里[Magical Web API action selector - HTTP-verb 和 action name dispatching in a single controller](http://www.strathweb.com/2013/01/magical-web-api-action-selector-http-verb-and-action-name-dispatching-in-a-single-controller/)

您可以拥有更好的 API 路由，例如：

**/api/student/1/studentrecord/2/**

# python - 在python字符串中插入这些破折号的最快方法是什么？

> ID：14387947
> 
> 赞同：15
> 
> 时间：2013-01-17T20:55:23.080
> 
> 标签：python, string, string-formatting

所以我知道 Python 字符串是不可变的，但我有一个字符串：

```
c['date'] = "20110104" 
```

我想转换成

```
c['date'] = "2011-01-04" 
```

我的代码：

```
c['date'] = c['date'][0:4] + "-" + c['date'][4:6] + "-" + c['date'][6:] 
```

好像有点绕，不是吗？最好将它保存为一个单独的变量然后做同样的事情吗？还是基本没有区别？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-17T20:59:17.073

你可以用`.join()`它来清理一下：

```
d = c['date']
'-'.join([d[:4], d[4:6], d[6:]]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T22:51:06.957

Dates are first class objects in Python, with a rich interface for manipulating them. The library is [datetime](https://docs.python.org/3/library/datetime.html).

```
> import datetime
> datetime.datetime.strptime('20110503','%Y%m%d').date().isoformat()
'2011-05-03' 
```

Don't reinvent the wheel!

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-17T20:59:05.853

你最好使用字符串格式而不是字符串连接

```
c['date'] = '{}-{}-{}'.format(c['date'][0:4], c['date'][4:6], c['date'][6:]) 
```

字符串连接通常较慢，因为正如您在上面所说的字符串是不可变的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T21:06:00.060

```
s = '20110104'

def option_1():
    return '-'.join([s[:4], s[4:6], s[6:]])

def option_1a():
    return '-'.join((s[:4], s[4:6], s[6:]))

def option_2():
    return '{}-{}-{}'.format(s[:4], s[4:6], s[6:])

def option_3():
    return '%s-%s-%s' % (s[:4], s[4:6], s[6:])

def option_original():
    return s[:4] + "-" + s[4:6] + "-" + s[6:] 
```

在每个上运行`%timeit`都会产生这些结果

*   option_1：每个循环 35.9 ns
*   option_1a：每个循环 35.8 ns
*   option_2：每个循环 36 ns
*   option_3：每个循环 35.8 ns
*   option_original：每个循环 36 ns

所以......选择最易读的，因为性能改进是微不足道的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T20:59:24.657

我可能会这样做，而不是有很大的收获：

```
d = c['date']
c['date'] = '%s-%s-%s' % (d[:4], d[4:6], d[6:]) 
```

最大的改进（恕我直言）是避免字符串连接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T22:03:41.660

我通常不会说“使用正则表达式”，但这是一个很好的用例：

```
import re    
c['date']=re.sub(r'.*(\w{4})(\w{2})(\w{2}).*',r"\1-\2-\3",c['date']) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-17T23:09:46.983

我不确定您是否要将其转换为正确的日期时间对象，或者只是对格式进行硬编码，您可以执行以下操作：

```
from datetime import datetime
result = datetime.strptime(c['date'], '%Y%m%d')
print result.date().isoformat() 
```

输入：'20110104'

输出：'2011-01-04'

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-14T12:37:12.267

将连字符添加到日期时间的一系列字符串中

```
import datetime
for i in range (0,len(c.date)):
  c.date[i] = datetime.datetime.strptime(c.date[i],'%Y%m%d').date().isoformat() 
```

# content-management-system - eXo 平台有哪些不同的版本，我在哪里可以下载完全免费的版本？

> ID：14387948
> 
> 赞同：0
> 
> 时间：2013-01-17T20:55:28.430
> 
> 标签：content-management-system

我正在尝试将我的应用程序迁移到 eXo 平台。但是，他们很难找到完全免费的版本。有人可以附上eXo平台完全免费版的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:35:30.070

您可以从这里获得 PLF 3.5 的社区版[http://forge.ow2.org/project/showfiles.php?group_id=151](http://forge.ow2.org/project/showfiles.php?group_id=151)

# .net - 使用 DataTrigger 和绑定触发动画

> ID：14387949
> 
> 赞同：1
> 
> 时间：2013-01-17T20:55:30.007
> 
> 标签：.net, wpf, xaml, mvvm

我正在尝试根据属性的值使网格“淡入”或“淡出”。该属性被调用，但动画似乎没有影响网格。我的网格和触发器如下所示：

```
<Grid Background="White"
      Opacity="0">
  <Grid.Style>
    <Style TargetType="Grid">
      <Style.Triggers>
        <DataTrigger Binding="{Binding IsWaiting}"
                     Value="False">
          <DataTrigger.EnterActions>
            <BeginStoryboard Name="pickIn">
              <Storyboard>
                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                 From="0"
                                 To="1"
                                 Duration="0:0:0.8" />
              </Storyboard>
            </BeginStoryboard>
          </DataTrigger.EnterActions>
          <DataTrigger.ExitActions>
            <StopStoryboard BeginStoryboardName="pickIn" />
          </DataTrigger.ExitActions>
        </DataTrigger>
        <DataTrigger Binding="{Binding IsWaiting}"
                     Value="True">
          <DataTrigger.EnterActions>
            <BeginStoryboard Name="pickOut">
              <Storyboard>
                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                 From="1"
                                 To="0"
                                 Duration="0:0:0.8" />
              </Storyboard>
            </BeginStoryboard>
          </DataTrigger.EnterActions>
          <DataTrigger.ExitActions>
            <StopStoryboard BeginStoryboardName="pickOut" />
          </DataTrigger.ExitActions>
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </Grid.Style>
  <Grid.Triggers>
    <EventTrigger RoutedEvent="Loaded">
      <BeginStoryboard>
        <Storyboard>
          <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="0"
                           To="1"
                           Duration="0:0:0.8" />
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger>
  </Grid.Triggers>
  <!-- etc -->
</Grid> 
```

我的`IsWaiting`财产看起来像：

```
public bool IsWaiting{
  get { return _isWaiting; }
  set {
    _isWaiting = value;
    OnPropertyChanged("IsWaiting");
  }
} 
```

属性更改时，输出日志中没有绑定错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:23:42.140

`<Grid.Triggers>`否决您`<Style.Triggers>`可以通过仅在网格加载时设置为 true 或将其设置为 true bu default来替换`<Grid.Triggers>`动画。`IsWaiting`

# sql-server - 与实体框架和瞬态故障处理块的连接？

> ID：14387953
> 
> 赞同：0
> 
> 时间：2013-01-17T20:56:16.963
> 
> 标签：sql-server, azure, entity-framework-4, azure-sql-database

我们正在将 SQL 迁移到 Azure。我们的 DAL 是基于 Entity Framework 4.x 的。我们希望使用瞬态故障处理块为 SQL Azure 添加重试逻辑。

总的来说，我们正在寻找最好的 80/20 规则（或者可能更多的是 95/5，但你明白了）——我们不打算花费数周重构/重写代码（有很多）。我很好地重新实现了我们的 DAL 框架，但不是所有针对它编写和生成的代码都不再是我们必须做的了，因为这已经在这里只是为了解决少数情况。缓解 >>> 为我们消除这种极端情况。

[查看MSDN 此处](http://blogs.msdn.com/b/appfabriccat/archive/2010/12/11/sql-azure-and-entity-framework-connection-fault-handling.aspx)解释的可能选项，似乎**案例 #3**有“最快”的实现方式，但只是乍一看。稍微考虑一下这个解决方案后，我突然想到我们可能在连接管理方面遇到问题，因为这个规避了实体框架用于管理连接的内置过程（即总是关闭它们）。在我看来，“解决方案”是确保我们实例化的 100% 的上下文使用使用块，但是对于我们的架构，这将是困难的。

所以我的问题是：**使用该链接中的案例#3，挂起连接是一个问题，还是在某个地方发生了一些我不知道的魔法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:26:48.340

我做了一些实验，结果证明这让我们回到了我们过去习惯的旧的“管理连接”情况，只是这一次连接从我们身上抽象了一点，我们现在必须“管理上下文”类似。

假设我们有以下`OnContextCreated`实现：

```
private void OnContextCreated()
{
    const int maxRetries = 4;
    const int initialDelayInMilliseconds = 100;
    const int maxDelayInMilliseconds = 5000;
    const int deltaBackoffInMilliseconds = initialDelayInMilliseconds;

    var policy = new RetryPolicy<SqlAzureTransientErrorDetectionStrategy>(maxRetries,
                                                                            TimeSpan.FromMilliseconds(initialDelayInMilliseconds),
                                                                            TimeSpan.FromMilliseconds(maxDelayInMilliseconds),
                                                                            TimeSpan.FromMilliseconds(deltaBackoffInMilliseconds));
    policy.ExecuteAction(() =>
            {
                try
                {
                    Connection.Open();
                    var storeConnection = (SqlConnection) ((EntityConnection) Connection).StoreConnection;
                    new SqlCommand("declare @i int", storeConnection).ExecuteNonQuery();
                    //Connection.Close();
                    // throw new ApplicationException("Test only");
                }
                catch (Exception e)
                {
                    Connection.Close();

                    Trace.TraceWarning("Attempted to open connection but failed: " + e.Message);

                    throw;
                }
            }
        );
} 
```

在这种情况下，我们强制打开连接（这是这里的目标）。因此，上下文在许多调用中保持打开状态。因此，我们必须告诉 Context 何时关闭连接。我们这样做的主要机制是在 Context 上调用 Dispose 方法。因此，如果我们只允许垃圾收集来清理我们的上下文，那么我们就允许连接保持打开状态。

`Connection.Close()`我通过切换块中的注释`try`并针对我们的数据库运行一堆单元测试来测试这一点。在没有调用的情况`Close`下，我们跳到了 ~275-300 个活动连接（从 SQL Server 的角度来看）。通过调用`Close`，该数字徘徊在〜12。然后，我用少量的单元测试进行了复制，包括和不包括`using`Context 块，并复制了相同的结果（不同的数字 - 我忘记了它们是什么）。

我正在使用以下查询来计算我的连接数：

```
SELECT s.session_id, s.login_name, e.connection_id,
      s.last_request_end_time, s.cpu_time, 
      e.connect_time
FROM sys.dm_exec_sessions AS s
INNER JOIN sys.dm_exec_connections AS e
ON s.session_id = e.session_id
WHERE login_name='myuser'
ORDER BY s.login_name 
```

结论：如果您`Connection.Open()`使用此解决方法调用以启用瞬态故障处理块，那么您必须为您使用的**所有**`using`上下文使用块，否则您将遇到问题（使用 SQL Azure，将导致您的数据库被“限制”并最终离线数小时！）。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T16:37:36.550

这种方法的问题是它只处理连接重试而不是命令重试。

如果您使用 Entity Framework 6（目前处于 alpha 阶段），那么有一些新的内置支持使用 Azure SQL 数据库（带有一点配置）进行瞬时重试：[http ://entityframework.codeplex.com/wikipage?title=连接%20Resiliency%20Spec](http://entityframework.codeplex.com/wikipage?title=Connection%20Resiliency%20Spec)

我创建了一个库，它允许您配置 Entity Framework 以使用故障处理块重试，而无需更改每个数据库调用 - 通常您只需要更改配置文件和可能的一两行代码。

这允许您将它用于 Entity Framework 或 Linq To Sql。

[https://github.com/robdmoore/ReliableDbProvider](https://github.com/robdmoore/ReliableDbProvider)**

# compiler-construction - 有和没有编译器优化的并行 OpenMP 代码的性能 (Sun CC)

> ID：14387957
> 
> 赞同：0
> 
> 时间：2013-01-17T20:56:32.227
> 
> 标签：compiler-construction, parallel-processing, openmp, suncc

我正在做一个项目，我们被要求编写一个简单的 OpenMP 代码来并行化一个使用微分方程的程序。我们还被要求测试代码在有和没有编译器优化的情况下的性能。我正在使用 Sun CC 编译器，因此对于优化版本，我使用了选项

```
-xopenmp -fast 
```

对于非优化

```
-xopenmp=noopt 
```

毫不奇怪，编译器优化的运行时间远低于其他情况。令我惊讶的是，非优化版本的缩放性能要好得多。在这里，我所说的性能是指加速系数，即程序运行在 M 个处理器上的运行时间与程序运行在 1 个处理器上的运行时间之比。

有人暗示这可能取决于优化版本受内存限制，而非优化版本受 CPU 限制的事实。我不确定“边界”如何影响我的代码的扩展能力。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:43:22.273

在大多数多处理器系统上，多个 CPU 内核共享一条通往内存的路径。每个线程给定的输出二进制文件将具有一定的固有计算强度（每访问字节的计算量）。当您运行代码的内核数量超过运行速率时，它超过了支持它所需的内存带宽，它将停止使用额外的内核进行扩展。要更好地了解如何推理此类问题，请查看“屋顶线模型”。

我希望通过启用优化看到两个变化。其中之一是计算强度应该有所增加，如果优化提供任何类型的循环阻塞以减少内存访问。另一个是原始操作率应该随着更好地识别向量化机会以及随后的指令选择和调度而增加。这两件事应该对扩展效率产生相反的影响，但在您的情况下，后者显然占主导地位。

# java - 向派生类中的 onClickListener 添加功能

> ID：14387961
> 
> 赞同：0
> 
> 时间：2013-01-17T20:56:41.627
> 
> 标签：java, android, inheritance, button, listener

我已经阅读了许多关于如何使用 onClickListener 创建和处理按钮点击的主题。但是，我找不到任何解决此问题的方法。

我有一个类 myActivity，我想创建第二个类 myExtendedActivity，它通过添加一些额外的功能来扩展 myActivity。myActivity 类包含很多代码，出于可维护性的原因，我不想重复这些代码。myExtendedActivity 的行为应该与带有一些额外功能的 myActivity 完全相同。

特别是在 myActivity 的 onCreate 方法中，我有以下代码将 onClickListener 添加到 my_button。扩展活动应该只附加对 myExtraMethod 的调用。

```
myButton = (Button)findViewById(R.id.my_button); 
myButton.setOnClickListener(new View.OnClickListener() 
{
    public void onClick(View v) 
    {
        [...]   //a lot of code here

        myExtraMethod();

    }
}); 
```

请注意，myExtraMethod 只是广播一个 Intent，它不受 Listener 中代码的任何其他部分的影响。

我想做的是扩展 myExtendedActivity 中的 OnClickListener，以便它首先执行为 myActivity 编写的代码，而不是在 myExtendedActivity 中定义的 myExtraMethod。

我不想修改 myActivity 应该完全不知道 myExtendedActivity 是否包含在项目中。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:09:31.833

完全不修改 myActivity 几乎是不可能的。

您可以在（[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)`MyActivity`的某些变体）中使用类似的东西：

```
onCreate() {
    myButton.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {
           myMethod();
        }
    });

}

protected void myMethod() {
    [...]   //a lot of code here
} 
```

然后在`MyExtendedActivty`：

```
@Override
protected void myMethod() {
    super.myMethod();
    myExtraMethod();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:05:08.797

如果我正确理解了您的问题，则解决方案可能是这样的：

在您的按钮布局中，您从 xml 定义 onClickListener：

```
<Button
        android:id="@+id/myButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="handleButtonClick"
    /> 
```

然后，在 MyActivity 你实现方法：

```
public void handleClick(View view) {

} 
```

在 MyExtendedActivity 你覆盖它：

```
public class MyExtendedActivity extends MyActivity {
    @Override
    public void handleClick(View view) {
        super.handleClick(view);
        //your code goes here

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:06:00.173

如果不修改`myActivity`，则不能，因为您正在实例化一个匿名类，并且子类无法“挂钩”到该匿名类。

如果您可以修改`myActivity`，那么您可以从`myButton.setOnClickListener(...)`静态类创建匿名类，并在您的子类中扩展侦听器类调用`super.onClick(v)`，然后是您期望的功能。

然后添加一个方法来获取正确的监听器

```
myButton.setOnClickListener(createMyButtonsListener()) 
```

然后您可以在提供扩展版本的子类中覆盖它。

或者，添加一个可以在子类中覆盖的方法（即`myExtraMethod()`）。在您的匿名类中调用。

# vba - 从其他 Excel 文件中添加行

> ID：14387964
> 
> 赞同：0
> 
> 时间：2013-01-17T20:56:48.700
> 
> 标签：vba, excel

我有 10 个 Excel 文件，每个文件都有 5 张。我想要一个`One.xls`包含 5 张纸的文件，其中包含 10 个 excel 文件的所有行。

我找到了一些软件，但没有一个是免费的。我想用宏来写。我怎么能这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:58:51.870

最好的起点是 excelforum.com 以获得具体答案，但简而言之，您需要将其布局到以下过程中；1) 为您的 one.xlsx 工作簿和工作表名称定义变量名称，以便您可以切换回来 2) 定义要打开的工作簿和关联文件路径 3) 打开工作簿 1 4) 选择数据 5) 复制并粘贴到主工作簿 6) 关闭工作簿 1 7) 对其他工作簿重复步骤 3 - 6

这会将其纳入一个综合列表。要考虑的事情是您是要擦除电子表格中的内容还是添加到底部，因此您可能需要一些错误陷阱或清理工具才能开始。

# sql - 如何将一对多关系显示为一对一

> ID：14387966
> 
> 赞同：1
> 
> 时间：2013-01-17T20:56:59.037
> 
> 标签：sql, database, ms-access, ms-access-2010

我正在使用寻呼系统。对于我的一些同事，我需要创建一些目录。目录中的每个人都有一个 PAGER_ID 和一个 MESSAGING_ID。PAGER_ID 对于给定的寻呼设备是唯一的，而 MESSAGING_ID 对于一个人是唯一的。一个小组可能轮班工作，并在轮班之间传递一个设备，导致几个人拥有相同的 PAGER_ID 和不同的 MESSAGING_ID。这很好，而且是设计使然。

对于我们的目录，用户希望满足以下条件：

1.  每个 PAGER_ID 只显示一次（我知道我可以通过 SELECT TOP 1 到 PAGER_ID 来做到这一点）
2.  当 PAGER_ID 的 MESSAGING_ID 为十位数字和一个或多个具有不同位数的其他 MESSAGING_ID 时，首选十位数字的 MESSAGING_ID。
3.  如果没有 10 位数的 MESSAGING_ID，则可以使用具有任何其他位数的 MESSAGING_ID。

简而言之：他们只想查看 PAGER_ID / MESSAGING_ID 的一条记录。他们不在乎是否每个人都列在目录中。他们并不真正关心哪个 MESSAGING_ID，只要每个 PAGER_ID 在目录中显示只有一个 MESSAGING_ID 并且只要 10 位 MESSAGING_ID 优先于那些不是 10 位长的 MESSAGING_ID。

我尝试了 TOP 和 IIF 查询的组合，但无法让它们以所需的方式一起玩得很好。

我的基本选择查询是：

```
SELECT
    tbl_Amcom_Prod.NAME,
    tbl_Amcom_Prod.PAGER_ID,
    tbl_Amcom_Prod.MESSAGING_ID
FROM tbl_Amcom_Prod
WHERE
    (((tbl_Amcom_Prod.PAGER_ID) Like "241662"
    Or (tbl_Amcom_Prod.PAGER_ID) Like "18888"))
ORDER BY tbl_Amcom_Prod.PAGER_ID; 
```

结果是：

```
|     NAME       | PAGER_ID | MESSAGING_ID |
--------------------------------------------
| TESTER 1       |    18888 | 18888        |
--------------------------------------------
| SMITH, MARK    |    18888 | 5735551262   |
--------------------------------------------
| SUPERVISOR     |   241662 | 102621       |
--------------------------------------------
| JOHN, JONES    |   241662 | 101436       |
--------------------------------------------
| SEEGER, ROBERT |   241662 | 101409       |
-------------------------------------------- 
```

他们想看到这个：

```
|     NAME       | PAGER_ID | MESSAGING_ID |
--------------------------------------------
| SMITH, MARK    | 18888    | 5735551262   |
--------------------------------------------
| SUPERVISOR     | 241662   | 102621       |
-------------------------------------------- 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:22:08.617

也许：

```
SELECT tt.NAME, tt.PAGER_ID, tt.MESSAGING_ID
FROM tt
WHERE tt.PAGER_ID In (
    SELECT [PAGER_ID] 
    FROM tt a 
    WHERE  a.MESSAGING_ID IN (
        SELECT TOP 1 MESSAGING_ID 
        FROM tt 
        ORDER BY Len(MESSAGING_ID) DESC,PAGER_ID)) 
```

tt 是你的桌子在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:07:13.977

好的，假设您的表是 MyTable，那么您只需要分组：

```
SELECT FIRST(Name), PAGER_ID,  MAX(MESSAGING_ID)
FROM MyTable
GROUP BY PAGER_ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:06:22.853

如果`PAGER_ID`和`MESSAGING_ID`都是文本数据类型，则此查询将返回您请求的结果。

```
SELECT
    t.NAME,
    t.PAGER_ID,
    t.MESSAGING_ID
FROM
    (
        SELECT
            sub1.PAGER_ID,
            DLookUp(
                "MESSAGING_ID",
                "tbl_Amcom_Prod",
                "PAGER_ID = '" & sub1.PAGER_ID &
                    "' AND Len(MESSAGING_ID) = " &
                    sub1.MESSAGING_ID_max_length
            ) AS MESSAGING_ID
        FROM
            (
                SELECT
                    PAGER_ID,
                    Max(Len(MESSAGING_ID))
                        AS MESSAGING_ID_max_length
                FROM tbl_Amcom_Prod
                GROUP BY PAGER_ID
            ) AS sub1
    ) AS sub2
    INNER JOIN tbl_Amcom_Prod AS t
    ON sub2.MESSAGING_ID = t.MESSAGING_ID
WHERE t.PAGER_ID In ("241662","18888")
ORDER BY t.PAGER_ID; 
```

如果`PAGER_ID`是 Long Integer 而不是文本，请使用 ...

```
 DLookUp(
                "MESSAGING_ID",
                "tbl_Amcom_Prod",
                "PAGER_ID = " & sub1.PAGER_ID &
                    " AND Len(MESSAGING_ID) = " &
                    sub1.MESSAGING_ID_max_length
            ) AS MESSAGING_ID 
```

和 ...

```
WHERE t.PAGER_ID In (241662,18888) 
```

如果`MESSAGING_ID`是 Long Integer 而不是文本，则更`Max(Len(MESSAGING_ID))`改为`Max(Len(CStr(MESSAGING_ID)))`和`Len(MESSAGING_ID)``Len(Cstr(MESSAGING_ID))`

# c# - 从二维列表 C# 返回最大值 + 名称

> ID：14387969
> 
> 赞同：0
> 
> 时间：2013-01-17T20:57:08.207
> 
> 标签：c#

我创建了一个二维列表，并希望返回最大值、最小值以及与这些值具有相同索引的名称。

这就是我所做的。

```
class Info
{
    private string stad;
    private double temperatur;

    public string Stad
    {
        get { return stad; }
        set { stad = value; }
    }

    public double Temperatur
    {
        get { return temperatur; }
        set { temperatur = value; }
    }
}

    static double SearchMax(List<Info> list)
    {
        if (list.Count == 0)
        {
            throw new InvalidOperationException("Tomt Lista");
        }
        double Temperatur = double.MinValue;
        foreach (Info temperatur in list)
        {
            if (temperatur.Temperatur > Temperatur)
            {
                Temperatur = temperatur.Temperatur;
            }        
        }
        return Temperatur;
    }

    static double SearchMin(List<Info> list)
    {
        if (list.Count == 0)
        {
            throw new InvalidOperationException("Tomt Lista");
        }
        double Tempertatur = double.MaxValue;
        foreach (Info temperatur in list)
        {
            if (temperatur.Temperatur < Tempertatur)
            {
                Tempertatur = temperatur.Temperatur;
            }
        }
        return Tempertatur;
    } 
```

但我得到的只是最大值和最小值，而不是温度所在城市的名称。

谁能告诉我或告诉我如何返回两者？

感谢您提供的所有帮助，但这只是让我回到了在此发布之前的位置。我想要的是让程序返回城市和城市的温度，即“最温暖的城市是奥斯陆，它的温度是 20°C”，而不是“最温暖的城市是 consoleaplication.info”

编辑：2 感谢您的帮助，尤其是 Alex ^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:06:24.000

一个非常紧凑但效率低下的 LINQ 解决方案：

```
static Info SearchMin(List<Info> list)
{
     return data.OrderBy(i => i.Temperatur).First();
} 
```

但是您可能想要调整自己的代码：

```
static Info SearchMin(List<Info> list)
{
    if (list.Count == 0)
    {
        throw new InvalidOperationException("Tomt Lista");
    }
    double Tempertatur = double.MaxValue;
    Info result = null;

    foreach (Info temperatur in list)
    {
        if (temperatur.Temperatur < Tempertatur)
        {
            Tempertatur = temperatur.Temperatur;
            result = temperatur;
        }
    }
    return result;
} 
```

如您所见，要点是返回 an`Info`而不是 a `double`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T21:06:42.667

您可以使用 MoreLinq 中的[MaxBy](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs?r=2da75c30d5bda7959e5113b702b4bb204a0e4a2c)和[MinBy](http://code.google.com/p/morelinq/source/browse/MoreLinq/MinBy.cs?r=2da75c30d5bda7959e5113b702b4bb204a0e4a2c)方法来执行此操作。

```
public static partial class MoreEnumerable
{
    public static TSource MaxBy<TSource, TKey>(this IEnumerable<TSource> source,
        Func<TSource, TKey> selector)
    {
        return source.MaxBy(selector, Comparer<TKey>.Default);
    }

    public static TSource MaxBy<TSource, TKey>(this IEnumerable<TSource> source,
        Func<TSource, TKey> selector, IComparer<TKey> comparer)
    {
        using (IEnumerator<TSource> sourceIterator = source.GetEnumerator())
        {
            if (!sourceIterator.MoveNext())
            {
                throw new InvalidOperationException("Sequence was empty");
            }
            TSource max = sourceIterator.Current;
            TKey maxKey = selector(max);
            while (sourceIterator.MoveNext())
            {
                TSource candidate = sourceIterator.Current;
                TKey candidateProjected = selector(candidate);
                if (comparer.Compare(candidateProjected, maxKey) > 0)
                {
                    max = candidate;
                    maxKey = candidateProjected;
                }
            }
            return max;
        }
    }
    public static TSource MinBy<TSource, TKey>(this IEnumerable<TSource> source,
        Func<TSource, TKey> selector)
    {
        return source.MinBy(selector, Comparer<TKey>.Default);
    }

    public static TSource MinBy<TSource, TKey>(this IEnumerable<TSource> source,
        Func<TSource, TKey> selector, IComparer<TKey> comparer)
    {
        using (IEnumerator<TSource> sourceIterator = source.GetEnumerator())
        {
            if (!sourceIterator.MoveNext())
            {
                throw new InvalidOperationException("Sequence was empty");
            }
            TSource min = sourceIterator.Current;
            TKey minKey = selector(min);
            while (sourceIterator.MoveNext())
            {
                TSource candidate = sourceIterator.Current;
                TKey candidateProjected = selector(candidate);
                if (comparer.Compare(candidateProjected, minKey) < 0)
                {
                    min = candidate;
                    minKey = candidateProjected;
                }
            }
            return min;
        }
    }
} 
```

（编辑删除注释和参数的空检查。）

一旦你有了它，它就很简单了：

```
Info maxInfo = list.MaxBy(item => item.Temperatur);
Info minInfo = list.MinBy(item => item.Temperatur); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:06:12.847

当然可以稍微调整一下以使其更短：

```
var maxtemp = list.Max(x => x.Temperatur);
var maxstad = list.First(x => x.Temperatur == maxtemp).Stad;

var mintemp = list.Min(x => x.Temperatur);
var minstad = list.First(x => x.Temperatur == mintemp).Stad; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T21:08:15.690

您可以直接订购`Temperatur`并拿第一个。

这在 BIG 列表上可能会很慢

```
 static Info SearchMax(List<Info> list)
    {
        if (list.Count == 0)
        {
            throw new InvalidOperationException("Tomt Lista");
        }
        return list.OrderByDescending(i => i.Temperatur).FirstOrDefault();
    }

    static Info SearchMin(List<Info> list)
    {
        if (list.Count == 0)
        {
            throw new InvalidOperationException("Tomt Lista");
        }
         return list.OrderBy(i => i.Temperatur).FirstOrDefault();;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T21:20:38.333

```
private static TempratureInfo FindHighestTemprature(IList<TempratureInfo> tempratures)
{
    if(tempratures.Count == 0)
        throw new InvalidOperationException("tempratures");

    return tempratures.OrderByDescending(t => t.Temprature)
                      .First();
}

private static TempratureInfo FindLowestTemprature(IList<TempratureInfo> tempratures)
{
    if (tempratures.Count == 0)
        throw new InvalidOperationException("tempratures");

    return tempratures.OrderBy(t => t.Temprature)
                      .First();
} 
```

您可以修改您的`Info`类以覆盖`ToString`，当您调用上述任何一个函数时，当需要字符串、参数传递、变量赋值等时，它将返回格式化的字符串。

```
internal class TempratureInfo
{
    public string Name { get; set; }
    public double Temprature { get; set; }

    public override string ToString()
    {
        return string.Format("Temprature in {0} is currently {1}", Name, Temprature);
    }
} 
```

示例实现：

```
private static void Main(string[] args)
    {
        List<TempratureInfo> unitedKingdomTempratures = new List<TempratureInfo>()
            {
                {new TempratureInfo() { Name = "Wales", Temprature = 10.0}},
                {new TempratureInfo() { Name = "England", Temprature = 55.0}},
                {new TempratureInfo() { Name = "Scotland", Temprature = 22.0}},
                {new TempratureInfo() { Name = "Northen Ireland", Temprature = 4.0}}
            };

        Console.WriteLine("Hottest: " + FindHighestTemprature(unitedKingdomTempratures).Name);
        Console.WriteLine("Coldest: " + FindLowestTemprature(unitedKingdomTempratures).Name);

        Console.ReadLine();
    } 
```

# microsoft-metro - 如何使用 C# 和 Xml 在 Bing 地图 Metro 应用程序中的图钉上添加鼠标单击事件？

> ID：14387970
> 
> 赞同：1
> 
> 时间：2013-01-17T20:57:10.747
> 
> 标签：microsoft-metro, windows-store-apps, winrt-xaml, bing-maps

我在 bing 地图上有多个动态图钉。我想在这些图钉上添加鼠标点击事件。告诉我我该怎么做。我正在使用 C# 和 XML 在 Windows 商店应用程序中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:20:31.137

当您以编程方式添加图钉时，将公共事件处理程序添加`Tapped`到每个图钉。当图钉被点击时，它将被调用，并且`sender`您可以从对象中区分每个图钉并做任何您喜欢的事情。

```
//Suppose I have PushpinsCollection which is list of MyPushpin class. PushpinsCollection is generated dynamically
public class MyPushpin
{
    public int PinID { get; set; }
    public Pushpin Pin { get; set; }
    public Location PinLocation { get; set; }
}

//run foreach loop do add event hanlder and add to map
//Here MyMap is Bing Map control
foreach(var pushpin in PushpinsCollection)
{
    var _pin = pushpin.Pin;
    _pin.Tapped += Pushpin_Tapped
    MapLayer.SetPosition(_pin, PinLocation);
    MyMap.Children.Add(_pin);
}

private void Pushpin_Tapped(object sender, TappedRoutedEventArgs e)
{
    var TappedPin = (Pushpin)sender;
    //TODO: do whatever opetraion you want to with TappedPin
} 
```

# java - JLabel 工具提示文本未显示

> ID：14387975
> 
> 赞同：0
> 
> 时间：2013-01-17T20:57:20.433
> 
> 标签：java, swing, user-interface, tooltip, jlabel

我希望这非常简单明了，但是将鼠标悬停在上面时不会显示工具提示文本。我尝试打印文本并正确打印。任何评论我做错了什么？

```
public class gui2 extends JFrame {
private JLabel item1;
public gui2() {
    super("The title bar");
    setLayout(new FlowLayout());
    item1 = new JLabel("label 1");
    item1.setToolTipText("This is a message");
    String str = item1.getToolTipText();
    System.out.println(str);
    add(item1);
}

   class gui {
public static void main(String[] args) {

    gui2 g2 = new gui2();
    g2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    g2.setSize(400, 200);
    g2.setVisible(true);
} 
```

} }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:11:44.867

即使您添加了导入，您的代码也不会编译。这是您的代码已更正并可以正常工作：

```
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class Gui {
    public static void main(String[] args) {

        Window window = new Window();
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setSize(400, 200);
        window.setVisible(true);
    }
}

class Window extends JFrame {
    private static final long serialVersionUID = 1L;
    private JLabel jlabel;

    public Window() {
        super("The title bar");
        setLayout(new FlowLayout());
        jlabel = new JLabel("label 1");
        jlabel.setToolTipText("This is a message");
        String str = jlabel.getToolTipText();
        System.out.println(str);
        add(jlabel);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T21:51:01.880

正如@restricteur 所述，您的代码无法编译。

这是因为`gui`持有 的类`main(..)`嵌套在另一个类中，因此`static`除非嵌套类被标记，否则不允许声明方法`static`。（我只是`Gui`从移动/取消嵌套`Gui2`）

除了您的代码确实有效之外，我认为您很仓促 -**将鼠标悬停** `JLabel` **3-4 秒**，您应该会看到以下内容`ToolTip`：

（使用您的代码当然没有编译错误）： ![在此处输入图像描述](../Images/0d28cbc1aea8dc609cda7cd80bd576df.png)

**代码建议：**

1）请注意java命名约定，即类名应该以大写字母开头，之后的每个新词也应该`gui`变成`Gui`或`GUI`，但我更喜欢前者。

2）不要调用`setSize`使用`JFrame`和=适当`LayoutManager`并在设置为可见之前调用`pack()`（`JFrame`但在添加组件之后）。

3）不要不必要地扩展`JFrame`，只需创建一个实例并使用它。

4) 始终通过块在[事件调度线程上创建和操作 Swing 组件。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)`SwingUtilities.invokeLater(Runnable r)`

5) 选择`setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`除非使用`Timer`s，因为`main(..)`无论是否退出 GUI，这将允许继续。

这是具有上述修复的代码：

![在此处输入图像描述](../Images/fa51008a4e4dc8fa75c2d4555f0a2e8f.png)

```
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

class Gui2 {

    private JLabel item1;
    private JFrame frame;

    public Gui2() {
        frame = new JFrame("The title bar");
        frame.setLayout(new FlowLayout());
        item1 = new JLabel("label 1");
        item1.setToolTipText("This is a message");
        String str = item1.getToolTipText();
        System.out.println(str);
        frame.add(item1);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
}

class Gui {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Gui2();
            }
        });
    }
} 
```

# vb.net - 在本地 IIS 安装上部署 .vbhtml

> ID：14387978
> 
> 赞同：3
> 
> 时间：2013-01-17T20:57:39.187
> 
> 标签：vb.net, sql-server-2005, iis, razor, webmatrix

我进入了一家公司，该公司一直在将 asp.net 用于存储在我们本地服务器上的一些 Web 应用程序。目前没有程序员，所以我使用了我所拥有的知识来使用 MebMatrix Razor VB.NET 页面和我们当前的 SQL Server 数据库构建一个新功能。我必须将项目迁移到运行 IIS 的本地服务器来部署它。

我不想使用 WebMatrix Web Deploy 功能或任何东西，我宁愿手动移动文件并让它们运行。我假设只需将 IIS 配置为处理 .vbhtml 文件扩展名。我的理解是，您不必像使用 ASP 那样使用这种方法构建解决方案。有谁知道如何做到这一点，或者我可以在哪里找到一个好的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:51:34.780

从 Documents 的“我的网站”文件夹中复制您网站的目录。将其粘贴到服务器上的“inetpub”目录中。

现在打开 IIS 管理器，在连接窗格的左侧，右键单击“站点”和“添加网站”。选择一个名称，选择默认的 AppPool，浏览器到“inetpub”目录并选择您站点的文件夹，设置一个不与任何其他运行的站点冲突的端口，然后单击确定。

在右侧窗格中，单击浏览，您应该能够看到您的新网站。

# c# - 获取引发异常的特定元素

> ID：14387979
> 
> 赞同：1
> 
> 时间：2013-01-17T20:57:41.937
> 
> 标签：c#, entity-framework-4.1

所以假设我需要更新一个对象列表。

```
 using(db)
      {
          repository = new Repository<Publication>(db);
          foreach (KeyValuePair<int,int> item in publications)
          {
                Publication publication = repository.GetById(item.Key);
                if (publication != null)
                {
                    publication.Quantity = publication.Quantity - item.Value;
                    if (publication.Quantity > 0)
                        db.Publication.Attach(publication);
                }
          }
          try
          {
              db.SaveChanges();
          }
          catch (DbUpdateConcurrencyException e)
          {
              throw new Exception("Could not update the database", e);
          }
        }
    } 
```

当我试图保存所有对象时，如果有人失败，它应该在`catch`块中，但我的问题是：如何获取引发异常的特定对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T21:03:06.147

你正在捕捉`DbUpdateConcurrencyException`，它有一个[`Entries`](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbupdateexception.entries.aspx)属性，记录为：

> 获取表示无法保存到数据库的实体的 DbEntityEntry 对象。

所以基本上这给了你所有有问题的问题。

# ssl - Glassfish 3.1.2.2 在 SSL 终止负载均衡器后面

> ID：14387985
> 
> 赞同：6
> 
> 时间：2013-01-17T20:58:04.870
> 
> 标签：ssl, glassfish, glassfish-3, load-balancing

我工作的组织目前正在 Glassfish 3.1.2.2 上运行一个应用程序，该应用程序位于一个硬件（与软件/云相同的问题）负载均衡器后面，该负载均衡器也负责***SSL 终止***。我们目前遇到 Glassfish 的问题，不知道它位于 SSL 连接后面，因此会错误地生成某些内容。具体如下：

*   会话 cookie 未标记为安全
*   从 Glassfish 生成的重定向是作为`http://`而不是`https://`
*   `request.isSecure()`没有返回正确的值
*   `request.getScheme()`没有返回正确的值

理论上我们可以在负载均衡器中重写所有这些东西，但是在以前使用 Tomcat 的项目中，并且已经能够在容器级别解决所有这些问题。

在 Tomcat 中，我可以在 HTTP 连接器定义上设置安全标志和方案值，一切顺利。但我似乎无法在 Glassfish 上找到等价物。

有人有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-28T09:52:15.190

如果您的负载均衡器提供`X-Forwarded-Proto`标头，您可以尝试在定义中使用`scheme-mapping`属性：`http``domain.xml`

```
<http default-virtual-server="server"
      max-connections="100"
      scheme-mapping="X-Forwarded-Proto">... 
```

例如，nginx 可以很容易地配置为提供此标头：

```
location / {
    proxy_set_header X-Forwarded-Proto https;
    proxy_pass http://glassfish;
} 
```

看起来 glassfish 有一些与支持相关的[已知问题](https://java.net/jira/browse/GLASSFISH-20842)`scheme-mapping`。

# iis - windows azure 或 IIS 初始加载速度慢

> ID：14387986
> 
> 赞同：1
> 
> 时间：2013-01-17T20:58:05.300
> 
> 标签：iis, azure, asp.net-mvc-4

我有一个托管在 Windows Azure 中的简单个人 MVC4 Web 应用程序。

这个网络应用程序的使用非常少，特别是当我早上尝试点击时，初始调用非常慢。

我怀疑 IIS 正在休眠并且需要唤醒。我发现这篇文章并提到这是 IIS 中的一个错误[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/8b3258e7-261c-49a0-888c-0b3e68b2af13](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/8b3258e7-261c-49a0-888c-0b3e68b2af13)需要在 IIS 中进行设置但是我的 Web 应用程序托管在 Azure 中，有没有办法在 Web.config 文件中进行某种设置？

所有后续调用都很快。

这是我的个人页面。[javierdelacruz.com](http://javierdelacruz.com)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:25:40.680

两种选择：

1.  启动任务
2.  OnStart 代码

有关启动任务，请参阅[此链接](http://blog.smarx.com/posts/controlling-application-pool-idle-timeouts-in-windows-azure)。

对于 OnStart 代码，试试这样的函数（这个函数还做了更多的事情）：

```
 private const string _web_app_project_name = "Web";

    public static void SetupDefaultEgConfiguration(int idleTimeoutInMinutes = 1440, int recycleTimeoutInMinutes = 1440, string appPoolName = "My Azure App Pool", bool enableCompression = true)
    {
        if (!RoleEnvironment.IsEmulated)
        {
            Trace.TraceWarning("Changing IIS settings upon role's OnStart. Inputs: ({0}, {1}, {2}, {3}", idleTimeoutInMinutes, recycleTimeoutInMinutes, appPoolName, enableCompression);

            // Tweak IIS Settings
            using (var iisManager = new ServerManager())
            {
                try
                {
                    var roleSite = iisManager.Sites[RoleEnvironment.CurrentRoleInstance.Id + "_" + _web_app_project_name];
                    if (enableCompression)
                    {
                        //================ Enable or disable static/Dynamic compression ===================//
                        var config = roleSite.GetWebConfiguration();
                        var urlCompressionSection = config.GetSection("system.webServer/urlCompression");
                        urlCompressionSection["doStaticCompression"] = true;
                        urlCompressionSection["doDynamicCompression"] = true;
                        Trace.TraceWarning("Changing IIS settings to enable static and dynamic compression");
                    }

                    //================ To change ApplicationPool name ================================//
                    var app = roleSite.Applications.First();
                    app.ApplicationPoolName = appPoolName;

                    //================ To change ApplicationPool Recycle Timeout ================================//
                    var appPool = iisManager.ApplicationPools[app.ApplicationPoolName];
                    appPool.Recycling.PeriodicRestart.Time = new TimeSpan(0, recycleTimeoutInMinutes, 0);

                    //================ idletimeout ====================================================//               
                    var defaultIdleTimeout = iisManager.ApplicationPoolDefaults.ProcessModel.IdleTimeout;
                    var newIdleTimeout = new TimeSpan(0, idleTimeoutInMinutes, 0);
                    if ((int)newIdleTimeout.TotalMinutes != (int)defaultIdleTimeout.TotalMinutes)
                    {
                        appPool.ProcessModel.IdleTimeout = newIdleTimeout;
                    }

                    // Commit the changes done to server manager.
                    iisManager.CommitChanges();
                }
                catch (Exception e)
                {
                    Trace.TraceError("Failure when configuring IIS in Azure: " + e.ToString().Take(63000));
                }
            }
        }
    } 
```

[我在此处包含的函数的源代码和更多详细信息](http://blogs.msdn.com/b/sriharsha/archive/2012/04/07/how-to-increase-application-pool-idletimeout-in-windows-azure-cloud-applications.aspx)- 您可能需要一些依赖项来完成此操作。

# mysql - 如何在外键约束中组合字段

> ID：14387994
> 
> 赞同：2
> 
> 时间：2013-01-17T20:58:49.447
> 
> 标签：mysql, sql, database, foreign-key-relationship

问题表：

```
QuestionId (PK)  QuestionNo  QuestionContent SessionId
11               1           blah            4
12               2           blah blah       4
13               1           BLAH            5
14               2           BLAH BLAH       5 
```

Image_Question 表：

```
Image_QuestionId (PK) ImageId (FK) SessionId (FK) QuestionNo
4                     6              4              1 
```

会话表：

```
SessionId SessionName
4         DFOFK
5         FEOWF 
```

上面有三张桌子。现在，如果您查看表`SessionId`中的`Image Question`，它是表的外键，`Session`因此如果我单击表中的`SessionId`值`Image_Question`，它将显示表中的`Session`详细信息`Session`。

现在我在表中有另一列`Image Question`尚未分配外键，那就是`QuestionNo`字段。现在这不是任何表中的主键，但我需要使用此字段才能知道图像属于哪个问题。无论如何，这不是问题。

我的问题是，如果我只是`QuestionNo`在`Image_Question`表格中设置为`FK`，那么如果我点击表格`QuestionNo's`中的值`Image_Question`，那么它将显示所有会话中的所有`QuestionNo`内容。`1`我不想要这个，我想在问题编号所属的`QuestionNo`范围内查找。`SessionId`

所以我的问题是我如何在 SQL 中设置外键，以便它将和字段`QuestionNo`连接在一起，从而创建一个唯一约束。`SessionId``QuestionNo``SessionId/QuestionNo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:14:46.840

使用图像，您知道 SessionId 和 QuestionId，因此您可以先输入一个 NULL 问题，然后获取 QuestionId 并在图像表中使用它。当您确实获得问题信息时，您可以更新问题表。

但是，这不是一个好习惯。

在您提交问题之前，您不应该将图像提交给问题，这些应该保留在您的业务层中，直到您拥有全部信息 - 然后将它们提交到永久 ant 存储。

# iphone - NSDate 倒计时与 NSInterval

> ID：14387996
> 
> 赞同：0
> 
> 时间：2013-01-17T20:58:50.340
> 
> 标签：iphone, objective-c

这是我的代码：

```
NSDate *currDate = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"HH:mm:ss"];
NSString *currentTime = [dateFormatter stringFromDate:currDate];

NSDate *now = [NSDate date];
int interval = 1*60; // one minute (minutes*60)
long int nowSeconds = (long int) [now timeIntervalSince1970];
int secondsLeft = interval - (nowSeconds % interval);

NSDate *nextIntervalDate =  [NSDate dateWithTimeIntervalSince1970:nowSeconds+secondsLeft];

NSString *nextTrigger = [dateFormatter stringFromDate:nextIntervalDate];

timeRemaining.text = [NSString stringWithFormat:@"%02d:%02d", secondsLeft/60, secondsLeft%60];

NSLog([NSString stringWithFormat:@"%@:%@", currentTime, nextTrigger]);

if ([currentTime isEqualToString:nextTrigger]) {

} 
```

问题是，'if ([currentTime isEqualToString:nextTrigger])' 永远不相等。因为 nextTrigger 在它们相等之前更改为下一个时间段。这是NSLog：

```
2013-01-17 15:54:59.987 app[35987:c07] 15:54:59:15:55:00
2013-01-17 15:54:59.997 app[35987:c07] 15:54:59:15:55:00    
2013-01-17 15:55:00.007 app[35987:c07] 15:55:00:15:56:00   <----RIGHT HERE
2013-01-17 15:55:00.016 app[35987:c07] 15:55:00:15:56:00 
```

我的代码的 nextTrigger 基本上是将当前时间按最近的分钟向上取整。此外，整个代码段每 0.1 秒重复一次 NSTimer。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:42:34.443

如果您有想要在下一整分钟过去时触发的代码，那么重复检查以查看所述时间是否已经过去是低效的。将该代码放入它自己的方法中，并创建一个 NSTimer 以在适当的时间触发它。

```
NSDate* date = [NSDate date] ;
NSCalendar* calendar = [NSCalendar currentCalendar] ;

NSDateComponents* secondsComponents = [calendar components:NSSecondCalendarUnit fromDate:date] ;
NSTimeInterval secondsUntilNextWholeMinute = 60 - secondsComponents.second ;
[NSTimer scheduledTimerWithTimeInterval:secondsUntilNextWholeMinute  target:self  selector:@selector(yourMethod)  userInfo:nil  repeats:NO ] ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T21:44:05.900

我有一个类似的问题。我所做的是制作一个副本并通过它来检查它。（一件事是两者都有`oldTrigger`并且`newTrigger`已经声明）检查这个代码

```
NSDate *currDate = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"HH:mm:ss"];
NSString *currentTime = [dateFormatter stringFromDate:currDate];

NSDate *now = [NSDate date]; 
int interval = 1*60; // one minute (minutes*60)
long int nowSeconds = (long int) [now timeIntervalSince1970];
int secondsLeft = interval - (nowSeconds % interval);

NSDate *nextIntervalDate =  [NSDate dateWithTimeIntervalSince1970:nowSeconds+secondsLeft];
oldTrigger = nextTrigger;
nextTrigger = [dateFormatter stringFromDate:nextIntervalDate];

timeRemaining.text = [NSString stringWithFormat:@"%02d:%02d", secondsLeft/60, secondsLeft%60];

NSLog([NSString stringWithFormat:@"%@:%@", currentTime, nextTrigger]);

if ([currentTime isEqualToString:oldTrigger]) {

} 
```

# php - PDO 和 SQL Server 使用 SQL Server Auth 而不是 Windows Auth

> ID：14387997
> 
> 赞同：2
> 
> 时间：2013-01-17T20:58:55.723
> 
> 标签：php, sql-server, sql-server-2008, authentication, pdo

我的环境：
- Windows Server 2008 R2。
- 阿帕奇网络服务器。
- PHP 5.4.7

我刚刚下载并安装了 Microsoft Drivers 3.0 for PHP for SQL Server。
我已将“php_pdo_sqlsrv_54_ts.dll”包含在 php 中。

Microsoft 在驱动程序中包含了一个有用的 chm 文件 (SQLSRV_Help.chm)。

在这个帮助文件中有一个使用 Windows 身份验证的 PDO 示例：

```
/* Connect using Windows Authentication. */
try {
  $conn = new PDO("sqlsrv:server=$serverName ; Database=AdventureWorks", "", "");
  $conn->setAttribute( PDO::ATTR ERRMOE, PDO::ERRMODE EXCEPTION );
} 
```

但我必须使用 SQL Server 身份验证连接到我们的 MS SQL Server 2008 R2！

连接到 SQL Server 有什么区别

1.  使用 PDO 和 Windows 身份验证
2.  使用 PDO 和 SQL Server 身份验证

它只是连接字符串吗？我必须写：

```
$conn = new PDO("sqlsrv:server=$serverName; Database=AdventureWorks; UID=sa; PWD=abc"); 
```

还是我必须写：

```
$conn = new PDO("sqlsrv:server=$serverName; Database=AdventureWorks; User Id=sa; password=abc"); 
```

提前致谢

更新：

我找到了一个资源：

[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T21:18:38.057

构造函数中有可选的第二个和第三个参数，它们指定用户名和密码[，如下所述](http://msdn.microsoft.com/en-us/library/ff628159%28v=sql.105%29.aspx)：

> PDO::__构造
> 
> 创建到 SQL Server 数据库的连接。
> 
> 语法 PDO::__construct($dsn [,$username [,$password [,$driver_options ]]] )
> 
> 参数
> 
> $dsn：包含前缀名称（始终为 sqlsrv）、冒号和 Server 关键字的字符串。例如“sqlsrv:server=(local)”。您可以选择指定其他连接关键字。有关 Server 关键字和其他连接关键字的描述，请参见连接选项。整个 $dsn 都用引号引起来，因此不应单独引用每个连接关键字。
> 
> $用户名：可选。包含用户名的字符串。要使用 SQL Server 身份验证进行连接，请指定登录 ID。要使用 Windows 身份验证进行连接，请指定“”。
> 
> $密码：可选。包含用户密码的字符串。要使用 SQL Server 身份验证进行连接，请指定密码。要使用 Windows 身份验证进行连接，请指定“”。
> 
> [...]

这意味着您可以使用 PDO + SQL 身份验证连接到 SQL Server，如下所示：

```
$conn = new PDO(
    "sqlsrv:server=$serverName ; Database=AdventureWorks",
    "sa",
    "strong password"
); 
```

[连接选项部分](http://msdn.microsoft.com/en-us/library/ff628167%28v=sql.105%29.aspx)还提到在使用 PDO_SQLSRV 时不能在连接字符串中使用和参数`UID`。`PWD`

# android - 如何使用兼容的应用程序打开文件

> ID：14387998
> 
> 赞同：0
> 
> 时间：2013-01-17T20:58:55.993
> 
> 标签：android, file

我有一个 android 应用程序，用户应该能够在其中点击一个文件，它应该提供选项/选择器，其中列出了可以播放/查看内容的可能应用程序。

因此，如果不将其硬编码为音乐/视频/pdf 或其他任何内容，有没有办法动态地让合适的应用程序播放文件，因为文件扩展名可以是任何东西。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:03:48.123

`Intent`在你使用的文件中提供文件的 MIME 类型，`startActivity()`如果合适，Android 会自动提供一个选择器。

您可以自行决定是否找到合适的 MIME 类型。对于`android.webkit.MimeTypeMap`一些常见的 MIME 类型，实用程序类可以提供帮助。如果适用，您还可以在从 Web 服务器下载文件时保存 MIME 类型。