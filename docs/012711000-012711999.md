# StackOverflow 问答 12711000-12711999

# javascript - Javascript 表单提交 - 锚点与按钮

> ID：12711001
> 
> 赞同：0
> 
> 时间：2012-10-03T14:47:36.943
> 
> 标签：javascript, html, forms

有什么理由让我看到的关于通过 Javascript 提交表单的大多数信息都是通过锚链接完成的：

```
<a id="submitButton" href="#">Submit</a> 
```

代替

```
<button id="submitButton">Submit</button> 
```

Javascript：

```
$("#submitButton").click(function(){
    //do whatever
}); 
```

我想不出这是标准做法的任何理由，但也许我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:49:57.317

从历史上看，将链接样式设置为看起来像*Not A Standard Button*然后使用 JS（调用`submit()`方法、执行 ajaxy 等）而不是设置真正的按钮样式更容易。

没有理由超越化妆品，缺乏优雅的退化给了一个很好的理由不这样做。

使用常规提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:50:08.563

许多 Web 开发人员，比如我自己，只是更喜欢“与众不同”。

制作提交按钮没有正确或错误的方法，地狱，你可以把它变成一个图像......

这只是一种练习，而且很多时候，链接看起来比按钮漂亮得多。纯粹的偏好

# java - 使用 JoinTable 和 Lazy Fetch 对 @ManyToMany 中的表进行 JPA 2.0 CriteriaQuery

> ID：12711008
> 
> 赞同：2
> 
> 时间：2012-10-03T14:47:58.247
> 
> 标签：java, jpa-2.0, criteria-api

我在@ManyToMany 关系中有两个实体，如下所示：

> ```
> @Entity
> @Table(name = "USERS") 
> public class User implements EntityMetaModel, Serializable {
> 
>   @Id
>   @GeneratedValue(strategy = IDENTITY)
>   @Column(name = "ID", unique = true, nullable = false)
>   private Integer id; 
> 
>   @Column(name = "USERNAME", unique = true, length = 20)
>   private String username;
> 
>   @Column(name = "PASSWORD", nullable = false, length = 32)
>   private String password;
> 
>   @Column(name = "ENABLED")
>   private Boolean enabled;
> 
>   @ManyToMany(
>       cascade = {CascadeType.PERSIST, CascadeType.MERGE},
>       fetch = (FetchType.LAZY)
>   )
>   @JoinTable(         
>       name = "USER_ROLES",
>       joinColumns = @JoinColumn(name="USERID", referencedColumnName="ID"),
>       inverseJoinColumns = @JoinColumn(name="ROLEID", referencedColumnName="ID")
>   )
>   @SequenceGenerator(
>       name = "sgIdUserRoles",
>       sequenceName = "SQ_ID_USER_ROLES"
>   ) 
>   @CollectionId(
>       columns = {@Column(name="ID")},
>       type = @Type(type="integer"), 
>       generator = "sgIdUserRoles"
>       )
>   @Fetch(value = FetchMode.SELECT)
>   private Collection<Role> roles = new HashSet<Role>();
> }
> 
> @Entity
> @Table(name = "ROLES")
> public class Role implements EntityMetaModel, Serializable {
> 
>   @Id
>   @GeneratedValue(strategy = IDENTITY)
>   @Column(name = "ID", unique = true, nullable = false)
>   private Integer id; 
> 
>   @Column(name = "ROLENAME", unique = true, length = 50)
>   private String rolename;
> 
>   @ManyToMany(
>       cascade = {CascadeType.PERSIST, CascadeType.MERGE},
>       fetch = (FetchType.LAZY)
>   )
>   @JoinTable(         
>       name = "USER_ROLES",
>       joinColumns = @JoinColumn(name="ROLEID", referencedColumnName="ID"),
>       inverseJoinColumns = @JoinColumn(name="USERID", referencedColumnName="ID")
>   )
>   @SequenceGenerator(
>       name = "sgIdUserRoles",
>       sequenceName = "SQ_ID_USER_ROLES"
>   ) 
>   @CollectionId(
>       columns = {@Column(name="ID")},
>       type = @Type(type="integer"), 
>       generator = "sgIdUserRoles"
>       )
>   @Fetch(value = FetchMode.SELECT)
>   private Collection<User> users = new HashSet<User>();
> } 
> ```

我创建了元模型：

> ```
> @StaticMetamodel(User.class)
> public class User_ {
>   public static volatile SingularAttribute<User, Integer> id;
>   public static volatile SingularAttribute<User, String> username;
>   public static volatile SingularAttribute<User, String> password;
>   public static volatile SingularAttribute<User, Boolean> enabled;        
>   public static volatile CollectionAttribute<User, Role> roles;
> }
> 
> @StaticMetamodel(Role.class)
> public class Role_ {
>   public static volatile SingularAttribute<Role, Integer> id;
>   public static volatile SingularAttribute<Role, String> rolename;
>   public static volatile CollectionAttribute<Role, User> users;
> } 
> ```

类用户有一个角色集合。我需要从 JPA2 CriteriaQuery 中找到没有由 id 给出的用户的角色。我怎样才能做这样的 CriteriaQuery？

```
select r.id, r.rolename 
from roles r 
where not exists 
(select 1 
from user_roles ur 
where ur.roleid = r.id 
and ur.userid = :userid) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:10:02.637

如果查询是：

```
List<Role> roles = session.createQuery("select u.roles from User u left join fetch u.roles where u.id= :idParam").
     setParameter("idParam", param).
     asList(); 
```

我记得以下标准应该有效：

```
List<Role> roles = session.
    createCriteria(Role.class).
    add(Restrictions.eq("users.id", param)).
    setFetchMode("users", FethchMode.EAGER).
    list(); 
```

否则，你返回一个非实体结构的查询，你可能需要一个 ResultTransformer。

# handlebars.js - 如何在 Handlebars 中引用当前迭代的对象

> ID：12711011
> 
> 赞同：5
> 
> 时间：2012-10-03T14:47:59.387
> 
> 标签：handlebars.js

有没有办法在 Handlebars 中获取当前迭代的对象？
代码：

```
<script id="HandleBarTemplate1" type="text/x-handlebars-template">
{{#each objArr}}
<img src="{{objField1}}"/>
<strong>Name:</strong> {{objField2}}
<input type="button" onclick="processObject({{.}});"/>
{{/each}}
</script> 
```

我已经提到`processObject({{.}})`这是不正确的。那就是我需要更换/解决方案的地方。希望你能明白我想说的话。
的内容`objArr`可能看起来像

```
var objArr = [{objField1:"smith.jpg",objField2:"Smith"},{objField1:"jane.jpg",objField2:"Jane"},...] 
```

模板编译代码为：

```
var source = document.getElementById("HandleBarTemplate1").innerHTML;
var compiledTemplate = Handlebars.compile(source);
var html = compiledTemplate({objArr:objArr}); 
```

如果我可以得到对象的引用，那么处理数据就很容易了。而不是将字段传递给函数并搜索整个数组以获取所需的对象然后处理它。
我更喜欢**没有自定义块助手/自定义表达式助手**的解决方案，但如果不存在，我宁愿选择自定义块助手。欢迎任何不搜索整个数组的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T19:51:55.643

我会建议一条不同的路线。知道您已经拥有对 objArr 的引用，请创建一个指向它的全局变量或名称空间变量。例如：window.objArr = objArr;

创建你的点击处理程序，做任何你想做的事：function processObject(key){}

用模板中的密钥调用它：

```
< script id="HandleBarTemplate1" type="text/x-handlebars-template">

   {{#each objArr}}

      <img src="{{objField1}}"/>

      <strong>Name:</strong> {{objField2}}

      <input type="button" onclick="processObject({{objField2}});"/>

   {{/each}}

</script> 
```

其他替代方案：客户处理程序。

其他替代方案：如果您无法创建对 objArray 的引用，则可以在使用 html5 时将对象的属性存储在 data- 属性中。然后 processObject 可以检索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-01T16:23:07.243

我使用 Handlebars 助手和一组上下文对象来执行此操作。

在某个地方，我们有一个上下文对象数组，它将存储对我们需要引用的每个上下文对象的引用：

```
var ContextObjects = []; 
```

当我们在模板中放置“{{obj}}”时，我们需要注册一个 Handlebars 辅助函数，该函数将当前上下文对象存储在数组中。助手返回数组中对象的索引，这是渲染的内容：

```
// Must be function and not lambda to preserve the correct 'this' 
Handlebars.registerHelper("obj", function () 
{
    var contextObject = this; // the current context object
    var index = ContextObjects.indexOf(contextObject);
    if (index < 0)
    {
        index = ContextObjects.length;
        ContextObjects[index] = contextObject;
    }
    return index;
}); 
```

接下来我们需要一个函数来从元素的索引中检索对象：

```
// Get the context object for the current event (e.g. click or context).
function GetContextObject(event)
{
    var $e = $(event.currentTarget);
    var index = $e.attr("data-obj");
    return ContextObjects[index];
} 
```

我们在模板中将它们联系在一起，如下所示：

```
{{#each Items}}
<div data-obj="{{obj}}" onclick="DoSomething(GetContextObject(event));">...</div>
{{/each}} 
```

这可能会呈现如下内容：

```
<div data-obj="0" onclick="DoSomething(GetContextObject(event));">...</div>
<div data-obj="1" onclick="DoSomething(GetContextObject(event));">...</div>
<div data-obj="2" onclick="DoSomething(GetContextObject(event));">...</div>
... 
```

# asp.net-mvc-3 - 如何让 MVC 贡献网格自定义列与 aspx 一起使用

> ID：12711021
> 
> 赞同：2
> 
> 时间：2012-10-03T14:48:17.920
> 
> 标签：asp.net-mvc-3, datagrid, mvccontrib, mvccontrib-grid

我正在使用 MVC Contrib Grid 来渲染、排序和过滤我的数据网格，但是现在我遇到了问题，因为它已经针对 MVC3 和 Razor 进行了升级。我的 columns 集合中的 Custom 方法不适用于 aspx pages ，并且 columns Action 方法现在已过时。

我使用网格操作方法在 MVC 2 中呈现这样的列：

```
 ...
 <% Html.Grid(Model).Columns(column => {
            column.For(x => x.Id);
            column.For(x => x.Name);
            column.For(x => x.Email);
            column.For(x => x.DateOfBirth);
            column.For("View User").Named("Tools").Action(x => { %>
                 <td>
                   <%= Html.ActionLink("View", "View", new { id = p.Id })%>
                   <%= Html.ActionLink("Edit ", "Edit", new { id = p.Id })%>
                   //Snip as there are too many tools :-)
                   //.....
                   <%= Html.ActionLink("Delete", "Delete", new { id = p.Id })%>
                </td>
            <% });
 ... 
```

现在在最新版本中，有一个自定义方法可以替换过时的 Action 方法。[我在这里](https://stackoverflow.com/questions/6391737/how-to-use-a-custom-column-in-a-mvccontrib-grid-model)查看了它是如何完成的，它现在基本上对我有用，但是我在 aspx 视图（url 等）中释放了我的所有助手，现在需要在我的模型中以另一种方法呈现我的内容，如下所示：

```
 ...
 <% Html.Grid(Model).Columns(column => {
            column.For(x => x.Id);
            column.For(x => x.Name);
            column.For(x => x.Email);
            column.For(x => x.DateOfBirth);
            //the new custom column 
            column.Custom(Model.ToolsRenderer);
            <% });
 ... 
```

下面称为 ToolsRenderer 的网格模型方法用于渲染我的 html 字符串。

```
 public UserManagementViewModel : BaseModel {
   //..snip
   //
     public object ToolsRenderer(Client client)
     {
        List<string> links = new List<string>();

        var editLink = new TagBuilder("a");
        // here is my biggest problem, before  Html.ActionLink used to make
        // sure that I don't have any missing links or help me if i need to 
        // refactor an action / controller name :-(
        editLink.Attributes["href"] = GetEditUserLink(client,   HttpContext.Current.Request.Url.AbsoluteUri);
        editLink.SetInnerText("edit");
        links.Add(editLink.ToString());
        ...
        ...lots of links to be generated here
        ...
        return MvcHtmlString.Create(string.join(" |", links))
        }
   //..snip
} 
```

这暂时有效，但是有没有办法让我的 aspx 页面像下面的剃刀视图一样工作？

```
@Html.Grid(Model).Columns(column =>
{
  column.For(x => x.Id).
  column.For(x => x.Name);
  column.Custom(@<td><a href='@Html.Actionlink("edit","user",new {id})' alt="@item.email"/><a></td>)

}) 
```

我想说的是：

```
...     
column.Custom(%><td><a href='<%=Html.Actionlink("edit","user",new {id})%>' alt="<%=item.email%>"/><a></td><%)
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:31:57.110

最后设法通过一些帮助和挖掘找到了解决方法，而不是使用自定义列，而是使用 column.for 并推入 Html.Partial。类似于下面的代码。

```
<% Html.Grid(Model).Columns(column => {
        column.For(x => x.Id);
        column.For(x => x.Name);
        column.For(x => x.Email);
        column.For(x => x.DateOfBirth);

        // could use RenderPartial() to
        column.For(x =>Html.Partial("UserActionColumn", x));

        <% }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:22:47.190

对于 Razor 案例，@helper 可用于自定义字段。

例如：

```
column.For(r => Status(r.Status)).Encode(false).Named("Status");

@helper Status(string value)
{
    if (value == RequestStatus.Pending)
    {
        <span class="label label-info">@value</span>
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T20:54:48.983

作为其他答案的补充，如果您想按该自定义列进行排序，请不要忘记添加`SortColumnName`. 如果不这样做，网格将使用`Named`参数作为列名，但`Named`也用于为列指定标题。我只是头疼，因为我的列名与标题不匹配：

```
column.For(c => "custom text").Named("Column Name").SortColumnName("ColumnName"); 
```

# linux - 如何跟踪文件的创建和修改

> ID：12711023
> 
> 赞同：0
> 
> 时间：2012-10-03T14:48:22.940
> 
> 标签：linux, bash, shell

我们已经组合了一个 perl 脚本，该脚本主要查看传递给它的参数，检查是否正在创建或修改文件，然后将其保存在 mysql 数据库中，以便以后轻松访问。这是有趣的部分，我如何让这个 perl 脚本在终端中输入所有命令之前运行。我需要制作这个虚拟证明，这样人们就不会忘记运行它。

对不起，我没有正确地提出这个问题。我想要做的是添加到每个命令之前，这样每个命令都会像“./run.pl ls”一样运行。这样，如果命令是 mv 或者它创建了一个输出文件，我就可以跟踪文件更改。该脚本几乎可以解决这个问题，但我只是不知道如何将它无缝地运行给用户。

我正在使用 bash 终端运行 ubuntu 服务器。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:07:55.000

如果我理解正确，您需要在运行每个命令之前执行一个函数`preexec`，类似于`precmd`.`zsh`

不幸的是`bash`，没有对此的本机支持，但您可以使用`DEBUG`陷阱来做到这一点。

[这](http://hints.macworld.com/dlfiles/preexec.bash.txt)是应用此方法的示例代码。

[该页面](http://blog.pointsoftware.ch/index.php/howto-bash-audit-command-logger/)还提供了一些有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:04:12.147

您可以修改该`~/.bashrc`文件并在那里启动您的脚本。请注意，每个用户将（并且应该）仍然拥有修改此文件的权限，可能会删除脚本调用。

该`/etc/bash.bashrc`文件是系统范围的，只能由 root 更改。

这些`.bashrc`s 在创建新的 bash 实例（例如新终端）时执行。

它与Ubuntu 系统上`sh`的系统 shell不同。`dash`

# php - Foreach 循环，在一个数组中使用键标识符

> ID：12711026
> 
> 赞同：0
> 
> 时间：2012-10-03T14:48:34.540
> 
> 标签：php, arrays, loops, foreach

我在我的 foreach 循环中使用键标识符来控制我如何在数据旁边回显字符串。例如

数组

```
 $array = array("name" => "Jim", "age" => 34);

array(2) {
  ["name"]=> string(3) "Jim"
  ["age"]=>  int(34)
} 
```

循环

```
<?php
 foreach ($array as $value) {

  echo "Name " .$value["name"]."</br>
    Age ".$value["age"] . "</br>";

 }
?> 
```

我得到的输出

```
Name J
Age J
Name
Age 
```

想要的结果

```
Name Jim 
Age 34 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:50:35.227

摆脱 foreach 循环：

```
echo "Name " . $array["name"] . "</br>\n"
   . "Age "  . $array["age"]  . "</br>\n"; 
```

或者，如果要循环多个人，则需要创建一个嵌套数组。

```
$people = array(
    array("name" => "Jim", "age" => 34),
    array("name" => "Bob", "age" => 42)
);

foreach ($people as $person) {
    echo "Name " . $person["name"] . "</br>\n"
       . "Age "  . $person["age"]  . "</br>\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:50:20.670

你为什么要使用这个`foreach`功能？如果你删除它，你会得到你想要的。您将更`$value`改为`$array`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:54:11.860

```
 <?php
   foreach ($array as $key => $value) {
    echo ucfirst($key).' '.$value.'<br />';
   }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:51:57.060

你可以在没有 for 循环的情况下做到这一点......

```
<?php

  $array = array("name" => "Jim", "age" => 34);
  echo "Name " .$array["name"]."</br>
    Age ".$array["age"]. "</br>";

 }

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T14:53:41.353

你不需要 foreach 循环来完成你想要完成的事情，它就像这样简单：

```
$array = array("name" => "Jim", "age" => 34);

echo "Name " . $array["name"] . "</br>";
echo "Age " . $array["age"]; 
```

# .net - 检测 ThreadPool 用户工作项何时被清理

> ID：12711028
> 
> 赞同：0
> 
> 时间：2012-10-03T14:48:38.550
> 
> 标签：.net, multithreading, clr, threadpool

据我了解，任何使用 .NET 线程池运行的东西都像这样：

```
ThreadPool.QueueUserWorkItem(myproc); 
```

当应用程序关闭时，CLR 将彻底终止。

假设在这种情况下 myproc 函数包含一个无限循环。有没有办法可以挂钩线程的终止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:02:41.113

不会。当 CLR 拆除您的进程时，它会积极中止任何剩余的后台线程。我之所以说*积极*中止，是因为与对 的正常调用不同`Thread.Abort()`，您的代码中不会引发异常，因此您无法响应它。

此时，CLR 并不特别关心您是否还有其他事情要做。你的进程已经死了，kaput，即将被掩埋，你无法阻止它。如果某些事情非常重要，以至于*必须在进程终止之前将其清理干净*，那么它应该进入前台线程，以便该进程将停留足够长的时间，以便它可以完成它需要做的任何事情。

# multithreading - NSManagedObjectContext 从主线程合并到其他线程

> ID：12711029
> 
> 赞同：0
> 
> 时间：2012-10-03T14:48:49.047
> 
> 标签：multithreading, core-data, merge, nsmanagedobject, nsmanagedobjectcontext

我在各种项目中使用过 Core Data，所以我知道如何处理从线程到主应用程序的上下文合并。

我的问题是，在我正在处理的新应用程序中，我有一个主上下文和一个线程上下文，它们在整个应用程序生命周期中都存在，而通常我为每个线程调用创建一个上下文。

所以我不确定如何处理我在主线程中修改对象的情况。我需要将它们合并到上下文线程吗？如何 ？是否可以在每次调用之前要求上下文线程从主上下文重新同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:27:22.573

您可以从主线程收听 NSManagedObjectContextDidSaveNotification 并将其合并到您需要的地方。我的建议是改变你的方法，不要从主线程进行保存。让主线程远离数据库IO，在后台保持需要同步的MOC的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:24:23.943

在不知道其他上下文正在执行的任务的情况下，很难说使其他上下文保持最新的最佳方法是什么。

您可以尝试使用`NSManagedObjectContext`'`setStalenessInterval:`方法，然后确保您在该上下文中使用的所有托管对象`refreshObject:mergeChanges:`在您完成使用它们时都恢复为错误。

# active-directory - Sitecore 活动目录模块

> ID：12711031
> 
> 赞同：3
> 
> 时间：2012-10-03T14:48:54.143
> 
> 标签：active-directory, sitecore, sitecore6

目前，我们在 ConnectionStrings.config 文件中定义了我们的 Active Directory (LDAP) 域控制器。是否可以配置第二个域控制器作为故障转移选项？

例如，最近域控制器 1 发生故障，我不得不手动更改连接字符串以指向域控制器 2 - 但同时网站正在生成错误（停机数小时）。

我们正在运行 Sitecore 版本 6.5 (Sitecore.NET 6.5.0 (rev. 120706) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:29:10.033

你实际上可以这样做。AD 模块有一些选项允许连接到多个域和/或使用多个提供程序。Sitecore 中的所有管道都是可扩展的，因此没有什么可以阻止您进行设置。您可以轻松地进行一些自定义编码以在登录期间捕获异常并切换到不同的提供程序。诀窍就是进行自定义编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:58:37.767

不，无法配置故障转移伙伴。

您可以在两个域控制器之间放置一个负载均衡器。

# php - 从 PHP 中包含嵌套数组的变量中提取数据

> ID：12711035
> 
> 赞同：0
> 
> 时间：2012-10-03T14:49:07.607
> 
> 标签：php, facebook

我正在尝试创建一个 facebook 注册。我收到来自 facebook 的 signed_request，它正在被解码并显示如下：

```
Array
(
    [algorithm] => HMAC-SHA256
    [expires] => 0
    [issued_at] => **********
    [oauth_token] => *******************************************************************************************************************
    [registration] => Array
        (
            [name] => Darren West
            [email] => dwest@madeup.com
            [password] => IJ8sU10lw
        )

    [registration_metadata] => Array
        (
            [fields] => name,email,password
        )

    [user] => Array
        (
            [country] => us
            [locale] => en_US
        )

    [user_id] => ***************
) 
```

我想将注册数组中的三个字段添加到隐藏表单中，并自动将其提交到另一个页面以保存到数据库中。

我的问题是如何从注册数组中提取姓名、电子邮件和密码并将它们分配给各个变量。我使用了以下内容，但没有得到结果：

```
print $response['registration']->password; 
```

任何帮助将不胜感激。

非常感谢，neojakey

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:50:11.973

```
print $response['registration']['password']; 
```

# c++ - 线程执行的顺序

> ID：12711036
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:49:08.830
> 
> 标签：c++, multithreading, unix

我是多线程的新手，正在关注“unix 环境中的高级编程”。我无法获得线程执行的顺序。我有以下代码。

```
int err1 = pthread_create(&first, NULL, disp, a);
int err2 = pthread_create(&second, NULL, disp, b);
int err3 = pthread_create(&third, NULL, disp, c); 
```

但是与第三个 tid 相关的线程首先执行，然后是第二个，最后是第一个。不确定这是行为还是出了什么问题。

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:51:15.877

It's not deterministic. Threads run in parallel, so it will depend on how many processors and hyperthreading you have. If you want them in a given order, you need to use synchronisation points. Once started all threads run independently at their own rate.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:51:25.473

There is no guarantee about the order of executing the code once they are created.
Only thing that can be guaranteed is that Thread 3 will be created after Thread 2 and Thread 2 will be created after Thread 1.
You cannot predict or assume that thread 2 will be spawned only after certain code has executed in thread 1\. If you want to achieve something like that you need to provide your some **[Thread synchronization](http://en.wikipedia.org/wiki/Synchronization_%28computer_science%29#Thread_or_process_synchronization)**.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:13:37.740

您的程序在一个线程中运行，并创建了另外三个。您可以保证的是其他三个线程的创建顺序以及它们将在某个阶段执行的顺序。操作系统可以停止您的主线程，并在创建新线程时按顺序为您完成新线程，它可以将它们粘在一些线程堆栈中，以便在您的主程序完成创建它们后稍后查看。关键是，你真的不知道。

如果你需要这三个线程按顺序执行并在下一个开始之前完成，你基本上需要首先不使用线程。

# c++ - '_mm_hadd_ps' 未在此范围内声明

> ID：12711037
> 
> 赞同：3
> 
> 时间：2012-10-03T14:49:17.237
> 
> 标签：c++, sse

我正在优化我的矩阵乘法代码。

```
for (int i = 0; i < SIZE; i++) {
    for (int j = 0; j < SIZE; j++) {
        float tmp = 0;
        for (int k = 0; k < SIZE; k+=4) {
            v1 = _mm_load_ps(&m1[i][k]);
            v2 = _mm_load_ps(&m2[j][k]);
            vMul = _mm_mul_ps(v1, v2);

            vRes = _mm_add_ps(vRes, vMul);
        }
        vRes = _mm_hadd_ps(vRes, vRes);
        vRes = _mm_hadd_ps(vRes, vRes);
        _mm_store_ss(&result[i][j], vRes);
    }
} 
```

但`g++`抱怨“*'_mm_hadd_ps' 未在此范围内声明*”。为什么会这样，我可以使用其他 SSE 功能，例如`_mm_add_ps`...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:56:20.923

水平添加指令（例如`_mm_hadd_ps`）是 SSE3 的一部分。您当前使用的所有其他都是 SSE。

您似乎只包含了 SSE 或 SSE2 标头。

所以你需要 SSE3 标头：

```
#include <pmmintrin.h> 
```

它将启用：

*   `_mm_addsub_ps`
*   `_mm_addsub_pd`
*   `_mm_hadd_ps`
*   `_mm_hadd_pd`
*   `_mm_hsub_ps`
*   `_mm_hsub_pd`
*   `_mm_movehdup_ps`
*   `_mm_movehdup_pd`
*   `_mm_moveldup_ps`
*   `_mm_moveldup_pd`
*   `_mm_lddqu_si128`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T15:45:09.397

使用`#include <x86intrin.h>`，它将包括目标处理器支持的所有内在函数。`pmmintrin.h`在最新版本的 GCC 中，不推荐使用包含等，也不推荐使用。还要确保在编译中以 SSE3 指令集为目标，或者通过添加`-msse3`选项，或者（更好）通过使用`-march=`选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T15:05:51.397

除了像 Mysticial 指出的那样包含正确的标头之外，您可能还需要将`-msse3`标志添加到`g++`的命令行参数以启用 SSE3 指令。这将允许代码生成器发出 SSE3 指令，并将定义`__SSE3__`预处理器宏，然后启用`<pmmintrin.h>`.

# vba - 在用户桌面上创建当前文件夹的快捷方式

> ID：12711040
> 
> 赞同：2
> 
> 时间：2012-10-03T14:49:23.160
> 
> 标签：vba, batch-file, vbscript, programming-languages, shortcut

我想在用户桌面上自动创建当前文件夹的快捷方式。我正在使用的一些用户不知道如何创建快捷方式或如何拖放文件夹。我只想创建一个名为“单击我在您的桌面上创建此文件夹的快捷方式”的文件，该文件可以在我想要的任何文件夹中使用。

例如，如果我运行 C:\myRandomFolder\CLICK ME.whatever，我希望它在“D:\Documents and Settings\%username%\Desktop”上创建一个名为“myRandomFolder”的“C:\myRandomFolder\”快捷方式.

我想知道是否最好使用批处理文件 (.bat)、VB 脚本 (.vbs) 或任何其他脚本语言来执行此操作。什么是最简单和更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:59:58.557

最好的方法最终似乎是 VBS 脚本。这是我最终正确工作的内容：

```
Option Explicit
On Error Resume Next

Private WshShell
Private strDesktop
Private oShellLink
Private aSplit

set WshShell = WScript.CreateObject("WScript.Shell")
strDesktop = WshShell.SpecialFolders("Desktop")
aSplit = Split(WScript.ScriptFullName, "\")

set oShellLink = WshShell.CreateShortcut(strDesktop & "\" & aSplit(Ubound(aSplit) - 1) & ".lnk")
oShellLink.TargetPath = Replace(WScript.ScriptFullName, WScript.ScriptName, "")
oShellLink.WindowStyle = 1
oShellLink.Description = "Shortcut Script"
oShellLink.WorkingDirectory = Replace(WScript.ScriptFullName, WScript.ScriptName, "")
oShellLink.Save 

MsgBox "Shortcut to " & Replace(WScript.ScriptFullName, WScript.ScriptName, "") & " added yo your desktop!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:16:39.697

很棒的代码！出于好奇，由于这适用于脚本当前所在的目录，你有没有办法让它出现在每个目录中？否则，学习这个和学习以本机方式制作捷径似乎没有太大区别。您仍然需要将脚本拖放到当前文件夹中，不是吗？

在寻找解决方案的过程中，我尽量让用户导航到并选择他们需要链接到的特定文件。我不知道你是否有任何用处。

```
Dim diaSelectFile
    Set diaSelectFile = Application.FileDialog(msoFileDialogFilePicker)

diaSelectFile.Show

strPickedFile = diaSelectFile.SelectedItems(1)

Set diaSelectFile = Nothing

Dim oWsh
Dim myshortcut
Dim oShortcut
Dim strSplitFileName
Dim strTarget
Dim nShortName

Set oWsh = CreateObject("WScript.Shell")

strSplitFileName = Split(strPickedFile, "\")
nShortName = UBound(strSplitFileName)
strTarget = strSplitFileName(nShortName)

myshortcut = "C:\users\%USERNAME%\Desktop\" & strTarget & " - Shortcut" & ".lnk"

Set oShortcut = oWsh.CreateShortcut(myshortcut)

With oShortcut
    .TargetPath = strPickedFile
    .Save
End With

Set oWsh = Nothing
Set oShortcut = Nothing 
```

不过，这再次感觉比右键单击并将快捷方式发送到桌面更复杂。谁是需要这个的用户？我知道我有一些自闭症的朋友，他们为我们可能认为的计算机上的基本任务而苦苦挣扎。我肯定很想知道您提出的脚本是否真的对您的客户有所帮助。

# javascript - 理解正则表达式

> ID：12711041
> 
> 赞同：2
> 
> 时间：2012-10-03T14:49:25.703
> 
> 标签：javascript, jquery, regex

jQuery 数据表库文件中有一个构造正则表达式的方法。谁能告诉我以下正则表达式是什么意思-

```
^(?=.*?il)(?=.*?oh).*$ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T15:01:04.680

```
^ 
```

匹配输入的乞求。这匹配一个位置，而不是一个字符（将其视为字符之间的空格）。

```
(?=) 
```

这称为前瞻。同样，这匹配一个位置。它匹配的位置是当前位置前面的文本等于给定文本的位置，但“指针”不向前移动。可以把它想象成在不弹出的情况下向前窥视。

```
.*?il 
```

匹配任意数量的任意字符（默认情况下，换行符除外），后跟字符“il”。

```
.*?oh 
```

同上，除了字符“哦”。

```
$ 
```

匹配输入的结尾。

基本上，这个正则表达式检查输入字符串是否包含字符“il”和“oh”。

**类比：**
这样想。你有一个人的阵容，然后你升到第一人称（`^`）。然后你一次向前看一个人，直到你找到一个戴红帽子的人，紧接着是一个黄帽子。( `(?=.*?il)`)。你的眼睛飞快地回到阵容中的第一个人，然后重复搜索，但这次你正在寻找一个戴着紫色帽子的人，紧接着是一个绿色帽子（`(?=.*?oh)`）。最后，你走过所有的人，将每个人从队伍中拉出来，直到你走到队伍的尽头（`.*$`）。如果在任何时候你都找不到你要找的东西，你就会转身离开房间（相当于返回 false）。否则，到了阵容的尽头，你就喊“糖果”！（相当于返回true）。

**兴趣点：**
前瞻使用所谓的“非贪婪”量词 ( `*?`)。这基本上是说“尽可能多地匹配，但不再匹配”。贪心量词 ( `*`) 表示“尽可能多地匹配”。如果使用了贪婪的量词，这相当于将你的眼睛移到阵容的后面，然后向前面扫视，在第一场比赛时停下来（如果从前面算起，那将是阵容中的最后一场）。

如果您要删除输入锚 ( `^`) 的开头，则此表达式将容易受到灾难性回溯的影响。由于前瞻是根据一个位置进行匹配的，如果不匹配，那么它会尝试前进一个字符并重试。保持前瞻锚定到输入中的`^`第一个位置。如果他们不能从那个位置找到他们正在寻找的东西，那么他们就会失败。

这`.*$`部分是绒毛。您可以在不影响表达式的情况下删除它（*编辑：实际上，如果您只是测试输入，那是真的。您正在使用结果匹配，那么您需要`.*`生成一个非零长度字符串*）。但是，如果您想确保输入具有一定的长度，请`.{5,10}$`改用。这就像走过阵容，数着你拉出来的人数，然后只喊“糖果！” 如果您找到至少 5 个人但不超过 10 人（替代方案：`{5,}`- 至少 5 个字符，没有上限；`{0,10}`- 不超过 10 个字符`0`作为下限值）。鉴于您已经在寻找字符“il”和“oh”，因此已经隐含要求输入至少为 4 个字符（没有上限）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:57:56.250

您可以使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)来帮助分析大多数正则表达式并根据输入数据对其进行测试。互联网上有一些类似的工具。这个需要Flash。（这不是卖点，只是信息。）

请注意，我提供的 URL 在`regex`.

# asp.net - Gridview 在列标题中排序向上/向下箭头

> ID：12711044
> 
> 赞同：5
> 
> 时间：2012-10-03T14:49:37.000
> 
> 标签：asp.net, vb.net, sorting, gridview, paging

我目前正在编写一些代码，这些代码负责在 gridview 中对数据进行排序和分页。我现在正在尝试实现排序箭头（列标题旁边的向上/向下箭头），但我没有成功。实现排序箭头的代码位于 *GridView1_RowCreated* 子例程中。现在，当我运行代码时，我根本看不到排序箭头。有问题的行是以下行：“If tblAdministrators.SortExpression = lnk.CommandArgument Then”我不知道那行有什么问题。它总是*False*因此箭头不会出现。

```
Private Function GetData(sort As SortDirection) As Data.DataView

    Dim connection As OracleDBConnect = DAL.GetOracleDBConnection()
    Dim request As OracleDBRequest = Nothing
    Dim result As OracleDBResult = Nothing
    Dim trace As OracleDBChronoTrace = Nothing
    Dim status As DBStatus
    Dim sb As New StringBuilder
    Dim dv As DataView

    With sb
        .Append("SELECT * FROM USERS")
    End With

    request = New OracleDBRequest(sb.ToString, CommandType.Text)

    status = connection.Execute(request, result, trace)

    dv = New DataView(result.DataSet.Tables(0))

    If (ViewState("sortExp") IsNot Nothing) Then
        dv = New Data.DataView(result.DataSet.Tables(0))

        If (GridViewSortDirection = SortDirection.Ascending) Then
            GridViewSortDirection = SortDirection.Descending
            dv.Sort = CType(ViewState("sortExp").ToString() & DESCENDING, String)
        Else
            GridViewSortDirection = SortDirection.Ascending
            dv.Sort = CType(ViewState("sortExp").ToString() & ASCENDING, String)
        End If
    Else
        dv = result.DataSet.Tables(0).DefaultView
    End If

    Return dv

End Function

Public Property GridViewSortDirection() As SortDirection
    Get
        If ViewState("sortDir") Is Nothing Then
            ViewState("sortDir") = SortDirection.Ascending
        End If

        Return CType(ViewState("sortDir"), SortDirection)
    End Get

    Set(ByVal value As SortDirection)
        ViewState("sortDir") = value
    End Set

End Property

Protected Sub GridView1_PageIndexChanging(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewPageEventArgs) Handles tblAdministrators.PageIndexChanging

    tblAdministrators.PageIndex = e.NewPageIndex
    GridViewSortDirection = If(GridViewSortDirection = SortDirection.Descending, SortDirection.Ascending, SortDirection.Descending)
    tblAdministrators.DataSource = GetData(GridViewSortDirection)
    tblAdministrators.DataBind()

End Sub

Protected Sub GridView1_Sorting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewSortEventArgs) Handles tblAdministrators.Sorting

    ViewState("sortExp") = e.SortExpression
    tblAdministrators.DataSource = GetData(GridViewSortDirection)
    tblAdministrators.DataBind()

End Sub

Protected Sub GridView1_RowCreated(sender As Object, e As GridViewRowEventArgs) Handles tblAdministrators.RowCreated
    If e.Row.RowType = DataControlRowType.Header Then
        For Each tc As TableCell In e.Row.Cells
            If tc.HasControls() Then

                Dim lnk As LinkButton = DirectCast(tc.Controls(0), LinkButton)
                If lnk IsNot Nothing Then

                    Dim img As New System.Web.UI.WebControls.Image()

                    img.ImageUrl = "/images/" & (If(GridViewSortDirection = SortDirection.Ascending, "asc", "desc")) & ".gif"

                    If tblAdministrators.SortExpression = lnk.CommandArgument Then

                        tc.Controls.Add(New LiteralControl(" "))
                        tc.Controls.Add(img)

                    End If
                End If
            End If
        Next
    End If
End Sub 
```

ASP 代码：

```
 <asp:GridView ID="tblAdministrators" runat="server" AutoGenerateColumns="false" EmptyDataText="No records found" PageSize="25" AllowPaging="True" AllowSorting="True" OnRowCreated="GridView1_RowCreated">
        <Columns>
            <asp:BoundField HeaderText="Name" DataField="Name" SortExpression="NAME"></asp:BoundField>
        </Columns>
        <Columns>
            <asp:BoundField HeaderText="City" DataField="City" SortExpression="CITY"></asp:BoundField>
        </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:43:36.747

看看我的样本：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
    AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="CustomerId" 
    DataSourceID="SqlDataSource1">
    <SortedAscendingHeaderStyle CssClass="sortasc" />
    <SortedDescendingHeaderStyle CssClass="sortdesc" />
    <Columns>
        <asp:CommandField ShowSelectButton="True" />
        <asp:BoundField DataField="CustomerId" HeaderText="CustomerId" 
            InsertVisible="False" ReadOnly="True" SortExpression="CustomerId" />
        <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
        <asp:BoundField DataField="IdNumber" HeaderText="IdNumber" 
            SortExpression="IdNumber" />
    </Columns>
</asp:GridView> 
```

注意 SortedAscendingHeaderStyle 和 SortedDescendingHeaderStyle。只需使用背景图像（向上箭头和向下箭头）创建适当的 css 类，您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T15:33:22.300

为了在 VB.net Windows 窗体的数据网格中添加排序箭头，您甚至不必编写任何代码

1.  在设计模式下的表单上 - 选择您正在使用的网格，右键单击转到属性，设置选择模式 = 单元格选择
2.  在设计模式下的表单上 - 单击右侧网格上的箭头，以编辑列属性，选择编辑或添加列，设置 SortMode = Automatic
3.  如果您有单元格内容的代码（假设您希望用户在单击数据网格中的任何行时打开另一个表单）然后使用 CellDoubleClick 属性来处理事件。如果您使用了单击，那么它将对标题进行排序并打开给定单元格的表单

Private Sub _CellDoubleClick(sender As Object, e As DataGridViewCellEventArgs) 处理 DGAcctGrpList.CellDoubleClick

# php - 仅在 Chrome [漂亮的 URL 和 .htaccess] 中丢失会话变量/cookie

> ID：12711045
> 
> 赞同：0
> 
> 时间：2012-10-03T14:49:44.320
> 
> 标签：php, codeigniter, session, google-chrome

这个问题一直存在，并且有几个不同的版本，但我很难过。首先我会告诉你我的设置是什么......

CodeIgniter install 在除 chrome 之外的所有浏览器上都可以正常工作...我已将问题缩小到漂亮的 URL，并且 .htaccess 会话存储在数据库中

基本上，如果我使用 codeigniter 的默认引导结构 index.php/controller 它可以正常工作，但是当我使用 mod rewrite .htaccess 时，会话会丢失，仅在 chrome 中。

**我在那里看到的一些东西，我已经尝试过......**

*根* [http://bit.ly/UFsYjj](http://bit.ly/UFsYjj)和[bit.ly/JPUzub中的 favicon.ico](http://bit.ly/JPUzub)

*切换到 cookie 并设置路径* [bit.ly/JPUzub](http://bit.ly/JPUzub)

对我来说，这真的归结为 index.php 的 htaccess 删除导致会话问题。我的codeigniter设置如下（注意*如果尝试了这些设置的所有不同配置，如无域等）：

```
$config['sess_cookie_name']     = 'cisession';
$config['sess_expiration']      = 99999;
$config['sess_expire_on_close'] = TRUE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = FALSE;
$config['sess_time_to_update']  = 300;

$config['cookie_prefix']    = "";
$config['cookie_domain']    = ".mydomain.com";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE; 
```

我的 htaccess 如下（现在它是空白的......）：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteEngine on
RewriteCond $1 !^(index\.php|assets|images|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ index.php/$1 [L]

RewriteCond %{HTTP_HOST} ^mydomain.com [NC]
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [L,R=301]

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:03:55.060

尝试将会话到期设置为零。

```
$config['sess_expiration'] = 0; 
```

# php - 在 Apache/PHP 中显示所有活动的 RewriteRules

> ID：12711047
> 
> 赞同：2
> 
> 时间：2012-10-03T14:49:54.080
> 
> 标签：php, apache, mod-rewrite

我遇到了 mod_rewrite 问题，我认为这可能是由我的 .htaccess 之外的其他配置文件中的全局规则引起的，需要查看是否有办法显示所有有效的 RewriteRules。

具体来说，我的问题是[http://mydomain.com/pages/test](http://mydomain.com/pages/test)工作正常（重定向到 pages/index.php），但是[http://mydomain.com/pages/test-page](http://mydomain.com/pages/test-page)返回 404 错误。任何在页面/中断后包含破折号的内容。其他一切都有效。重写规则应该是：如果找到 /pages/file.xx，则显示它。否则将其发送到 /pages/index.php

我的 .htaccess

```
重写引擎开启
RewriteBase /pages

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
重写规则。- [大]
重写规则 ^([_0-9a-zA-Z-]+/)?(am-.*) $2 [L]
重写规则 ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
重写规则 (.*)$ /pages/$1/ [R=301,L]

重写规则 ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
重写规则 ^([a-zA-Z0-9\-_\/\s]+)/?$ /pages/index.php [L]

```

**编辑** 打开 RewriteLog，我得到以下 URL “domain.com/pages/test-string”：

```
xx.xx.xx.xx - - [03/Oct/2012:11:34:15 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (1) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 通过 /hsphere/local/home/domain/domain.com/pages/test-string
xx.xx.xx.xx - - [03/Oct/2012:11:34:16 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (1) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 通过 /hsphere/local/home/domain/domain.com/splash/test-string

```

这是 URL “domain.com/pages/test”的结果

```
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (2) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 重写测试 -> /pages/test/
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (2) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 使用 http://domain.com/pages/test/ 显式强制重定向
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (2) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 试图用 /pages 替换前缀 /hsphere/local/home/domain/domain.com/pages/
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (1) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 转义 http://domain.com/pages/test/ 以进行重定向
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (1) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 重定向到 http://domain.com/pages/test/ [REDIRECT/301]
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (2) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 重写 test/ -> /pages/index.php
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (2) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 试图用 /pages 替换前缀 /hsphere/local/home/domain/domain.com/pages/
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#172fe530/initial] (1) [per-dir /hsphere/ local/home/domain/domain.com/pages/] 内部重定向与 /pages/index.php [内部重定向]
xx.xx.xx.xx - - [03/Oct/2012:11:37:46 -0400] [domain.com/sid#17b39d20][rid#17c144e0/initial/redir#1] (1) [per- dir /hsphere/local/home/domain/domain.com/pages/] 通过 /hsphere/local/home/domain/domain.com/pages/index.php

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:52:23.663

Add lines for [RewriteLog](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog) and RewriteLogLevel. I would start with log level 2 or 3 because it can get pretty long.

# sed - Sed - 在一行中打印多次匹配的模式

> ID：12711050
> 
> 赞同：2
> 
> 时间：2012-10-03T14:50:05.453
> 
> 标签：sed

输入-

> 第 576 场比赛中 X 得分 1725 和 Y 得分 6248

我想 sed 输出-

> 1725
> 
> 6248

我的代码-

```
sed 's/Score[[:space:]]\([0-9]+\)/\1/g' 
```

上面的代码输出 -

> 1725 和 Y 的 6248 在比赛中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:06:30.587

您可以尝试以下 sed 命令

```
#!/bin/sed f
s/Score\s*/\
/g
s/\n\([0-9]\+\)[^\n]*/\
\1/g
s/^[^\n]*\n// 
```

第一个命令用换行符替换所有“Score”，所以现在所有数字都在一行的开头。要插入换行符，我们必须写一个反斜杠，后跟一个实际的换行符。这就是该命令产生两行的原因。

第二个命令将删除行首数字之后的所有内容。它将匹配一个后跟一个数字的换行符（这就是我们现在这个数字以“Score”字符串为前缀的方式）。该数字将被捕获到变量`\1`中。然后它将跳过所有字符直到换行符。在编写替换时，我们必须将换行符和捕获的数字恢复到`\1`.

因为第一行包含第一个“Score”之前的文本，我们必须删除它。这就是最后一个命令的作用，它匹配所有字符直到第一个换行符，从模式空间内容的开头（即我们的工作缓冲区）开始。

在一个命令中：

```
sed -e 's/Score\s*/\
/g;s/\n\([0-9]\+\)[^\n]*/\
\1/g;s/^[^\n]*\n//' 
```

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:06:54.070

`GNU sed`因为匹配单词边界而使用的一种方法`\b`是扩展。

```
echo "X's Score 1725 and Y's Score 6248 in the match number 576" | sed -e '
    ## Surround searched numbers (preceded by "Score") with newline characters.
    s/\bScore \([0-9]\+\)\b/\n\1\n/g;
    ## Delete all numbers not preceded by a newline character.
    s/\([^\n0-9]\)[0-9]\+/\1/g;
    ## Remove all other characters but numbers and newlines.
    s/[^0-9\n]\+//g;
    ## Remove extra newlines.
    s/\n\([0-9]\)/\1/g; 
    s/\n$//
' infile 
```

它产生：

```
1725
6248 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:28:37.880

你可以和两个 egreps：

```
<infile egrep -o 'Score [0-9]+' | egrep -o '[0-9]+$' 
```

# iphone - 使用restkit的coredata中的空值

> ID：12711051
> 
> 赞同：1
> 
> 时间：2012-10-03T14:50:07.717
> 
> 标签：iphone, ios5, restkit

我正在使用restkit处理核心数据，我有两个模型（帖子和照片）现在一个帖子有很多照片，我在帖子中有照片，它们映射到模型中，核心数据中的条目已经完成，但是照片的值一片空白，

帖子中有 5 张照片这些记录已插入 coredata 但值为空

这是映射代码

照片映射

```
- (RKManagedObjectMapping *)photosMapping {
   RKManagedObjectMapping *mappingPhoto = [RKManagedObjectMapping mappingForClass:[DBPhoto class] inManagedObjectStore:self.objectStore];
   mappingPhoto.setDefault``ValueForMissingAttributes = NO;
   mappingPhoto.primaryKeyAttribute = @"photoID";
   [mappingPhoto mapKeyPathsToAttributes:
    @"id", @"photoID",
    @"full_url", @"full_url",
    @"thumb_url", @"thumb_url",
    nil];
   return mappingPhoto;``
}

-
},

Post Mapping 

[mappingPost mapKeyPath:@"photos" toRelationship:@"photos" withMapping:[self photosMapping]];

The Json response for Post is 

"post": {
"id": 4,
"topic": "Post Meniscectomy Knee Pain",
"body": "<p>I&#39;ve got a healthy, active 60 yo woman with normal to low BMI who is s/p partial medial meniscectomy x 2 in the past 7 years (last was two years ago).&nbsp; She has relatively benign articular cartilage throughout the knee, including medially.</p><p>&nbsp;Her <u>medial joint line tenderness and pain</u> and really bothering her and she has a small Baker&#39;s cyst.&nbsp; Her MRI 1/2008 shows, not surprisingly, an irregular medial meniscus, possible tear/globular, small B cyst.</p><p>Her alignment is a couple degrees of physiologic varus bilaterally, nothing too impressive.</p><p>standing AP, 45 PA Xrays are more or less normal, other than symmetrical, slight narrowing in the medial compartment bilaterally.</p><p>She wants to get back to her daily walk and some limited cardio exercise activities.&nbsp; </p><p>I tried an unloader brace a year ago, and she was not very compliant with it. What options would you consider?&nbsp; She&#39;s obviously &#39;old&#39; for a meniscal allograft, and I don&#39;t know if her personality would tolerate it, but her cartilage was benign when I scoped her two years ago</p>",
"comments_count": 26,
"votes_count": 8,
"views_count": 1,
"created_at": "2008-06-03T04:40:00-03:00",
"updated_at": "2012-04-01T04:08:08-03:00",
"has_poll": true,
"has_photos": true,
"has_videos": true,
"has_documents": false,
"subspecialty": {
"id": 5
},-
"user": {
"id": 15
},-
"post_type": {
"id": 1
},-
"forum_type": {
"id": 1
},-
"tags": [(5)
{
"tag": {
"id": 50
}-
},-
{
"tag": {
"id": 51
}-
},-
{
"tag": {
"id": 52
}-
},-
{
"tag": {
"id": 53
}-
},-
{
"tag": {
"id": 54
}-
}-
],-
"": [(0)],
"poll": {
"id": 2,
"title": "Primary Treatment Options?",
"a1": "Medial Unloader Brace and live with it",
"a2": "Scope it, Meniscectomy then Unloader brace",
"a3": "Medial Unicompartmental Arthroplasty",
"a4": "Medial Meniscal Allograft",
"a5": "Total Knee Replacement"
},-
"photos": [(1)
{
"photo": {
"id": 2,
"full_url": "/uploads/photos/posts/4/2_9371a426ef.jpg",
"thumb_url": "/uploads/photos/posts/4/2_9371a426ef_thumb.jpg"
}-
}-
],-
"videos": [(1)
{
"video": {
"id": 133,
"full_url": "/images/fallback/videos/default.gif",
"thumb_url": "/images/fallback/videos/thumb_default.gif"
}-
}-
]-
}-
} 
```

,*强调文本*

这是我访问照片模型时的响应

```
"<DBPhoto: 0x7daf4d0> (entity: DBPhoto; id: 0x7d9a5e0 <x-coredata://162D7572-B46F-4566-92E6-C07DA4ABEAD2/DBPhoto/p1> ; data: <fault>)",
   "<DBPhoto: 0x7dae460> (entity: DBPhoto; id: 0x7d9cfb0 <x-coredata://162D7572-B46F-4566-92E6-C07DA4ABEAD2/DBPhoto/p2> ; data: <fault>)",
   "<DBPhoto: 0x7da8ab0> (entity: DBPhoto; id: 0x7d9bd70 <x-coredata://162D7572-B46F-4566-92E6-C07DA4ABEAD2/DBPhoto/p3> ; data: <fault>)",
   "<DBPhoto: 0x7dad8f0> (entity: DBPhoto; id: 0x7da3040 <x-coredata://162D7572-B46F-4566-92E6-C07DA4ABEAD2/DBPhoto/p4> ; data: <fault>)",
   "<DBPhoto: 0x7daa240> (entity: DBPhoto; id: 0x7d92c10 <x-coredata://162D7572-B46F-4566-92E6-C07DA4ABEAD2/DBPhoto/p5> ; data: <fault>)" 
```

但这些条目为空。它们在数据库中

# c# - 当对具有多个对应名称的枚举值调用 ToString() 时，是什么决定了选择哪个名称？

> ID：12711059
> 
> 赞同：15
> 
> 时间：2012-10-03T14:50:28.313
> 
> 标签：c#, .net, enums, clr, tostring

## 当调用具有多个对应名称的值`ToString()`时，是什么决定了选择哪个名称？`enum`

*问题的详细解释如下。*

我已经确定这不是由以下任何一个唯一确定的：字母顺序；申报单；也不是，名称长度。

例如，考虑我想要一个枚举，其中数值直接对应于实际用途（例如颜色的 rgb 值）。

```
public enum RgbColor 
{
    Black   = 0x000000,
    Red     = 0xff0000,
    Green   = 0x00ff00,
    Blue    = 0x0000ff,
    White   = 0xffffff
} 
```

现在，使用这个枚举，调用`default(RgbColor)`将返回黑色的 rgb 值。假设我不希望默认值是黑色，因为我希望 UI 设计人员能够在他们没有关于使用什么颜色的具体说明时使用对“默认”的调用。目前，UI 设计人员使用的默认值实际上是“蓝色”，但这可能会改变。所以，我在枚举上添加了一个额外的`TextDefault`定义，现在它看起来像：

```
public enum RgbColorWithTextDefaultFirst
{
    TextDefault = 0x0000ff,
    Black   = 0x000000,
    Red     = 0xff0000,
    Green   = 0x00ff00,
    Blue    = 0x0000ff,
    White   = 0xffffff
} 
```

现在，我已经对此进行了测试，我发现调用`RgbColorWithTextDefaultFirst.TextDefault.ToString()`并且`RgbColorWithTextDefaultFirst.Blue.ToString()`两者都产生“蓝色”。因此，我认为最后声明的名称将覆盖先前声明的名称。为了检验我的假设，我写道：

```
public enum RgbColorWithTextDefaultLast
{
    Black   = 0x000000,
    Red     = 0xff0000,
    Green   = 0x00ff00,
    Blue    = 0x0000ff,
    White   = 0xffffff,
    TextDefault = 0x0000ff 
} 
```

然而，令我惊讶的是，`RgbColorWithTextDefaultLast.Blue.ToString()`和`RgbColorWithTextDefaultLast.TextDefault.ToString()`。我的下一个猜测是它按字母顺序对名称进行排序并返回第一个。为了测试这一点，我尝试：

```
public enum RgbColorWithATextDefaultFirst
{
    ATextDefault = 0x0000ff,
    Black   = 0x000000,
    Red     = 0xff0000,
    Green   = 0x00ff00,
    Blue    = 0x0000ff,
    White   = 0xffffff
}

public enum RgbColorWithATextDefaultLast
{
    Black   = 0x000000,
    Red     = 0xff0000,
    Green   = 0x00ff00,
    Blue    = 0x0000ff,
    White   = 0xffffff,
    ATextDefault = 0x0000ff
} 
```

现在，对于所有四个`RgbColorWithATextDefaultFirst.ATextDefault.ToString()`, `RgbColorWithATextDefaultFirst.Blue.ToString()`, `RgbColorWithATextDefaultLast.ATextDefault.ToString()`, `RgbColorWithATextDefaultLast.Blue.ToString()`，我最终得到“蓝色”。我意识到还有另一个区别因素，那就是字符串的长度。我现在的猜测是，所选名称是由名称字符串的长度决定的。所以，我的测试是使用这些声明：

```
public enum RgbColorWithALast
{
    Black   = 0x000000,
    Red     = 0xff0000,
    Green   = 0x00ff00,
    Blue    = 0x0000ff,
    White   = 0xffffff,
    A = 0x0000ff
}

public enum RgbColorWithAFirst
{
    A = 0x0000ff,
    Black   = 0x000000,
    Red     = 0xff0000,
    Green   = 0x00ff00,
    Blue    = 0x0000ff,
    White   = 0xffffff
} 
```

现在，猜猜我得到的所有值是多少`RgbColorWithAFirst.A.ToString()`：`RgbColorWithAFirst.Blue.ToString()`; `RgbColorWithALast.A.ToString()`, `RgbColorWithALast.Blue.ToString()`. 没错，就是“蓝”。

在这一点上，我已经放弃试图通过猜测来弄清楚是什么决定了这一点。我打开了反射器，我要看看并试图弄清楚这一点，但我想我会在这里问一个问题，看看这里是否有人已经知道答案，再次是：**什么决定了哪个名字是调用具有多个对应名称的值`ToString()`时选择？`enum`**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T15:44:45.853

我在这里可能走得太远了，但我认为**这是由排序值的二进制搜索决定的，因此可以取决于值总数的奇偶性**。您可以通过在两者中定义另一个值来用上一个示例 (`RgbColorWithAFirst`和) 来说明这一点 - 然后您可以从所有调用中获得。`RgbColorWithALast``A``ToString`

我通过反编译`mscorlib`(4.0) 来到这里，并注意到最终我们会调用`Array.BinarySearch`对已声明值的排序数组的调用。自然地，二分搜索一旦得到匹配就会停止，所以要让它在两个相同的值之间切换，最简单的方法是通过添加一个额外的值来改变搜索树。

当然，这是一个实现细节，不应依赖。在我看来，在您的情况下，最好使用`DescriptionAttribute`您希望明确显示值的枚举值和辅助方法，例如：

```
public static class EnumExtensions
{
    public static string Description(this Enum value)
    {
        var field = value.GetType().GetField(value.ToString());
        var attribute = Attribute.GetCustomAttribute(
                            field, 
                            typeof (DescriptionAttribute)) 
                        as DescriptionAttribute;

        return attribute == null ? value.ToString() : attribute.Description;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T16:50:48.220

文档警告说重复值会产生错误。
您有重复的值并且出现错误 - 这并不奇怪。

你得到了第一个 Equal。
平等仅基于价值。
您无法控制评估枚举的顺序。

如评论中所述，枚举需要该类型的唯一值。

[枚举类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/cc138362.aspx)

*但是，您不应该这样做，因为隐含的期望是枚举变量将仅保存枚举定义的值之一。将任意值分配给枚举类型的变量会带来很高的错误风险。*

显然，您已经发现了类型重复值的高风险错误之一。

我将此错误描述为不确定性，因为我考虑更改顺序但相同的数据相同的输入在规范状态中没有给出任何内容意味着枚举输入是顺序相关的。OP将不同的顺序视为不同的数据。使用 OP 的假设不会将其表征为非确定性。仍然公平地将其描述为由类型重复值引起的错误。

另一个暗示唯一性的参考是预期的

[枚举.GetName](http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx)

返回是字符串（不是字符串 []）。

Equals 完全基于价值。

[枚举.Equals](http://msdn.microsoft.com/en-us/library/8bafh2by.aspx)

GetName 将匹配第一个值。
这就是我对非确定性的定义。
如果他们被认为是平等的，你怎么知道你有哪些？

怀疑微软不会因为开销而强制枚举类型值的唯一性。

当没有指示该类型的关联时，OP 期望 Enum 将 A 值与 A 字符串（如 KVP）显式关联。
该文档明确警告不要做出这种假设。
文档在哪里表明 Enum 是作为一组键值对、类或支柱实现的？
结果和方法表明 Enum 是具有松散关联的字符串和值类型（char 除外）。

可能的解决方法。

字典不需要唯一值。

```
public enum RgbColor : byte
{
    Black,
    Red,
    Green,
    Blue,
    White,
    Default
}

static void Main(string[] args)
{
    Dictionary<RgbColor, Int32> ColorRGB = new Dictionary<RgbColor, int>();
    ColorRGB.Add(RgbColor.Black, 0x000000);
    ColorRGB.Add(RgbColor.Default, 0x0000ff);
    ColorRGB.Add(RgbColor.Blue, 0x0000ff);
    ColorRGB.Add(RgbColor.Green, 0x00ff00);
    ColorRGB.Add(RgbColor.White, 0xffffff);

    Debug.WriteLine(ColorRGB[RgbColor.Blue].ToString("X6"));
    Debug.WriteLine(ColorRGB[RgbColor.Default].ToString("X6"));
    Debug.WriteLine(ColorRGB[RgbColor.Black].ToString("X6"));
    Debug.WriteLine(ColorRGB[RgbColor.White].ToString("X6")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:06:18.950

行为未定义。即使您能够显示某些特定版本的 .NET 的结果是什么，它也可能会改变。请参阅[enum.toString](http://msdn.microsoft.com/en-us/library/16c1xs4z.aspx)文档，其中说：

> 如果多个枚举成员具有相同的基础值，并且您尝试根据其基础值检索枚举成员名称的字符串表示形式，则您的代码不应对该方法将返回哪个名称做出任何假设。例如，以下枚举定义了两个具有相同基础值的成员 Shade.Gray 和 Shade.Grey。
> 
> 枚举阴影 { 白色 = 0，灰色 = 1，灰色 = 1，黑色 = 2 }
> 
> 以下方法调用尝试检索其基础值为 1 的 Shade 枚举成员的名称。该方法可以返回“Gray”或“Grey”，并且您的代码不应对将返回哪个字符串做出任何假设。
> 
> 字符串 shadeName = ((Shade) 1).ToString();

另请参阅上一段是文档，其中显示了如何检索*所有*名称

# sql - SQL - 每次更新表时自动更改日期列

> ID：12711063
> 
> 赞同：0
> 
> 时间：2012-10-03T14:50:34.127
> 
> 标签：sql

我的表中有一个`date`列。当我对行执行`update`查询时，每次`date`都会刷新到当前日期。我已将日期的默认值设置为，`CURRENT_TIMESTAMP`但为什么每次都会发生这种情况？

**更新**

我的创建查询：

```
CREATE TABLE  `ACCOUNTS` (
  `id` bigint(7) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(30) DEFAULT NULL,
  `date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` varchar(1) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1234567 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:52:22.800

这可能与`date`成为关键字有关。尝试将其更改为`some_date`. 是`CURRENT_TIMESTAMP`故意的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:52:39.980

当您将默认值设置为 CURRENT_TIMESTAMP 时，sql 将仅在创建新记录时插入当前时间戳，除非您自己更新，否则永远不会更新它。刷新不会更新时间戳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-05T23:45:27.907

如果您使用 MariaDB，此文档页面[https://mariadb.com/kb/en/library/timestamp/](https://mariadb.com/kb/en/library/timestamp/)可能会为您提供一些令人惊讶的信息：

> “时间戳字段通常用于定义添加或更新行的时间，默认情况下**会在插入或更新记录时自动分配当前日期时间**。自动属性仅适用于记录中的第一个 TIMESTAMP ; 后续的 TIMESTAMP 列将不会更改。"

希望这一点可以帮助下一个遇到这个奇妙功能的开发人员......

# xml - How to parse XML and how to use XMLOpen

> ID：12711071
> 
> 赞同：0
> 
> 时间：2012-10-03T14:51:02.380
> 
> 标签：xml, windev

Most XML Functions require a name for the xml document. But there's no way in XMLOpen to specify such a name. Is there another way to parse xml from an url?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:33:05.160

如果要命名文档，则必须使用 XMLDocument 而不是 XMLOpen，XMLDocument 使用名称和源代码，而 XLMOpen 使用 xmlDocument 类型的变量。

# google-apps-script - How to pause App Scripts until spreadsheet finishes calculation

> ID：12711072
> 
> 赞同：11
> 
> 时间：2012-10-03T14:51:03.733
> 
> 标签：google-apps-script, google-sheets

Because google spreadsheets does not support iterations, I wrote my own simple app script to adjust an input based upon the calculation of the spreadsheet output. However, after I change the input variable, the spreadsheet recalculates but app scripts does not seem to wait for that recalculation so I end up retrieving values such as "Thinking..." or "#NA". Is there a way to pause a script and wait for the calculation to complete before moving to the next line in the script?

Currently, I am just using a loop to watch the cell but I wanted to find out if there was a more elegant way to pause the execution until the sheet was done calculating.

I write a lot of Excel Macros and Excel VBA always waits for the calculation to complete before moving to the next line in the code. Apps Script does not seem to do this so I am hoping there is an easy way to do this.

A second question: Because this iteration can take some time, how does one interrupt and terminate a script from running? I can't seem to find a way to do this.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-04-17T01:46:42.817

这是一种非常简单的方法，可以防止下一个脚本启动，直到当前脚本在 google 应用程序脚本中完成。只需在您连续处理的每个脚本之后添加对 testWait() 的调用。SpreadsheetApp.flush() 似乎还将电子表格上的超时计时器重置为默认的 5 分钟，因此您有更多时间一次性处理多个脚本。

```
//holds processing of next script till last one has completed
function testWait(){
  var lock = LockService.getScriptLock(); lock.waitLock(300000); 
  SpreadsheetApp.flush(); lock.releaseLock();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T01:01:12.160

脚本在大约 6 分钟后超时，以防止无限循环和不断运行的程序。我认为没有手动方法可以停止脚本。

编辑：哎呀，忘了回答你的第一个问题：我认为 onEdit 在重新计算值后运行，但显然我没有使用足够的公式来查看这一点。如果它不等待，那么最好的方法是做这样的事情：

```
while(value === "Thinking..." || value === "#NA") {
  Utilities.sleep(10000);
} 
```

它暂停脚本几秒钟，然后再次检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T04:42:51.877

我还在 Excel VBA 中写了一点，本地的计算函数就派上用场了。我在 Google Apps/Docs 中多次遇到同样的问题，希望在计算完成时执行代码。我想知道为什么 Google Apps/Docs 中没有本机功能来处理这个问题。无论如何，我写了这段代码来解决这个问题。希望能帮助到你。

```
function onEdit() {

Refresh();

};

function Refresh () {

     var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
     var sheet2 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet2");

     // set the range wherever you want to make sure loading is done    

     var range = sheet.getRange('A:A')
     var values = range.getValues();

     var string = values.toString();

     var loading = "Loading";

                    do
                      {var randomWait = Math.floor(Math.random()*1+0); randomWait;}
                    while (string.search(loading) ==! 0);

      range.copyTo(sheet2.getRange('A1'), {contentsOnly:true});

customMsgBox();

};

function customMsgBox() {
  Browser.msgBox("Data refreshed.");
}; 
```

这是一个实际示例：
[https ://docs.google.com/spreadsheet/ccc?key=0AkK50_KKCI_pdHJvQXdnTmpiOWM4Rk5PV2k5OUNudVE#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AkK50_KKCI_pdHJvQXdnTmpiOWM4Rk5PV2k5OUNudVE#gid=0)

如果您想玩弄它，请制作一个副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-23T09:13:44.853

我有同样的问题。我使用 2 个脚本解决了这个问题，因为我需要确保电子表格包含我需要的数据。

第一个脚本提供种子值以通过 IMPORTXML 函数填充电子表格。

第二个脚本处理这些数据。

我使用基于时间的触发器来运行脚本，从而为第一个脚本提供足够的时间来完成

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T20:05:06.043

您可以将递归结构放在 code.js 文件中，而不是放在电子表格中。Javascript 可以很好地处理递归。然后，您可以让脚本在每次迭代（或每 100 次）时更新电子表格。

# php - 在phonegap中使用php表单

> ID：12711074
> 
> 赞同：3
> 
> 时间：2012-10-03T14:51:11.993
> 
> 标签：php, javascript, jquery, cordova

我[之前曾](https://stackoverflow.com/questions/12597891/phonegap-contact-form-not-working-over-php)寻求帮助以使我的 php 表单在 phonegap ipa 中工作。我完全按照我被告知的那样做，一切都很好，即使在 ipa 内也是如此。我唯一的问题是我在页面加载的那一刻得到了这个警报，显然它应该在客户端忘记填写必填字段时出现。

这是我所做的：

contact.html 中的 FORM

```
 <form action="http://mobile.alicante-intermedia.com/submit_contact.php" method="get">
          <div class="form-element">
        <label for="txtfullname">Firstname</label>
        <input id="txtfullname" name="FirstName" type="text" placeholder="required" required />
      </div>
      <div class="form-element">
        <label for="txtemail">Lastname</label>
        <input id="txtemail" name="LastName" type="text" placeholder="required" required  />
      </div>
      <div class="form-element">
        <label for="txtcontact">Email</label>
        <input id="txtcontact" name="Email" type="email" placeholder="optional" />
      </div>
      <div class="form-element">
        <label for="txtmessage">Message</label>
        <textarea id="txtmessage" name="MessageText" placeholder="required" rows="5" required ></textarea>
      </div>
      <input type="button" onclick="submit()" value="submit contact"/>
      </form> 
```

然后我创建了一个 jquery_form.js 文件，它只在 conatct.html 中加载

```
$.post('http://mobile.alicante-intermedia.com/submit_contact.php', {

    // These are the names of the form values

    FirstName: $('#FirstName_input').val(),
    LastName: $('#LastName_input').val(),
    Email: $('#Email_input').val(),
    MessageText: $('#MessageText_input').val()

    // HTML function

    }, function (html) {
        // Place the HTML in a astring
        var response=html;

        // PHP was done and email sent
        if (response=="success") {
            alert("Message sent!"); 
        } else {

            // Error postback
            alert("Please fill all fields!"); 
        return false;
    }
}); 
```

php看起来像这样：

```
<?php

    // VARS
    $FirstName=$_GET["FirstName"];
    $LastName=$_GET["LastName"];
    $Email=$_GET["Email"];
    $MessageText=$_GET["MessageText"];
    $Headers = "From:" . $Email;

    //VALIDATION
    if(
    $FirstName=="" ||
    $LastName=="" ||
    $Email=="" ||
    $MessageText==""
    ) {
        echo "Error";
    } else {
        mail("myemail@email.com","mobile app message",$MessageText, $Headers);
        echo "Success";
    }
?> 
```

一切正常，除了警报屏幕。这里有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:05:20.123

您的 JavaScript 代码是“裸露的”，没有包装在任何函数中或附加到任何事件处理程序，因此在加载后立即执行 - 因此在第一次解析 jQuery 脚本时它会立即发布一个空表单。

将其放入`onclick`提交按钮的事件处理程序中：

```
// When the document has loaded...
$(document).ready(function() {
  // Bind this action as a function to be executed when the button is clicked...
  $('input[type="button"][value="submit contact"]').click(function() {
    $.post('http://mobile.alicante-intermedia.com/submit_contact.php', {

      // These are the names of the form values
      // EDIT: You have the wrong ids on these...

      FirstName: $('#txtfullname').val(),
      LastName: $('#txtemail').val(),
      Email: $('#txtcontact').val(),
      MessageText: $('#txtmessage').val()

      // HTML function

      }, function (html) {
          // Place the HTML in a astring
          var response=html;

          // PHP was done and email sent
          if (response=="success") {
            alert("Message sent!"); 
          } else {

            // Error postback
            alert("Please fill all fields!"); 
            return false;
          }
    });
  });
}); 
```

由于它绑定在 JavaScript 代码中，因此请`onclick`从标记中的按钮中删除：

```
<input type="button" value="submit contact"/> 
```

### 编辑：

您拥有的 PHP 正在寻找 中的值`$_GET`，但您已从 jQuery 发布它们。而是在`$_POST`.

```
$FirstName=$_POST["FirstName"];
$LastName=$_POST["LastName"];
$Email=$_POST["Email"];
$MessageText=$_POST["MessageText"]; 
```

# java - Java EE duplicates session over the network

> ID：12711076
> 
> 赞同：3
> 
> 时间：2012-10-03T14:51:18.933
> 
> 标签：java, proxy, network-protocols

I've developed a Java EE Sprint Maps Application with realm. The problem is that when I logged in a computer, every computer on the network I am getting the same session as the first computer that logged in.

This network have a proxy in the 8080 port.

This is very weird, why is this happening?

# c# - 设置字符串的哪一部分显示在 WPF 组合框中

> ID：12711080
> 
> 赞同：1
> 
> 时间：2012-10-03T14:51:25.720
> 
> 标签：c#, wpf, xaml

当字符串太长而无法完整显示时，有没有办法设置字符串的哪一部分显示在 WPF 组合框中？

例如，我有一个字符串“my very long string”，当它被选中时，会被截断为“my very l”。我想改为显示“长字符串”。

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:02:46.197

如果您指定了绑定，则可以使用考虑字符串长度的值转换器，如果它大于某个值，则修剪字符串并添加“...”

# c# - 使用“as”运算符测试 Page.RouteData.Values 中的整数类型

> ID：12711082
> 
> 赞同：1
> 
> 时间：2012-10-03T14:51:35.907
> 
> 标签：c#, .net

在我的代码中，我在 global.asax 中注册了路由，如下所示：

```
void RegisterRoutes(RouteCollection routes)
{
   routes.MapPageRoute(
    "product",
    "product/{id}",
    "~/index.aspx"
); 
```

然后在我的 index.aspx 页面中，我想测试 {id} 值是否为整数：

```
if (Page.RouteData.Values["id"] as int? != null)   
//always evaluate as null even id is an integer in the URL, ex: /product/1 
```

我知道我可以使用其他一些方法（例如 int.TryParse 或[this](https://stackoverflow.com/questions/349742/how-do-you-test-your-request-querystring-variables)）来实现相同的目标，但是在这种情况下使用“as”是否有意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:07:20.430

The way to go depends on what is really stored in `Values["id"]`. If it is in fact an `int`, you can test for `int` with `Values["id"] is int`. The `Values[]` property is typed as object. Therefore it can be `null`. But this does NOT mean, that the stored `int` is a `Nullable<int>`. (see my update below.)

If you assign an `int` (and all other non-reference types) to an object variable or property, it will be boxed. I.e. it will be packed into an object of the corresponding type. `int` or `System.Int32` exists as value type as well as a boxed and immutable `System.Int32` reference type. Because of its immutability, you don't notice that it is a reference type. An `int` can be boxed with `object obj = 5;` and unboxed with `int i = (int)obj;`.

On the other hand, if the id was stored as string then you would have to convert it to a number

```
int id;
if (Int32.TryParse((string)Page.RouteData.Values["id"], out id)) {
    // use id here
} 
```

* * *

UPDATE:

There seems to be some confusion with `null` and `Nullable<T>`.

```
int? i; // Same as Nullable<int> or Nullable<System.Int32> or System.Int32?
object obj;
bool test;

i = null;
test = i.HasValue; // ==> false
test = i == null;  // ==> true

// Now comes the strange part

obj = 5;           // The int is boxed here.
// Debugger shows type of obj as "object {int}"
test = obj is int;   // ==> true
test = obj is int?;   // ==> true
int x = (int)obj;  // ==> 5, the int is unboxed here.

// But

obj = null;
// Debugger shows type of obj as "object"
test = obj is int; // ==> false
test = obj is int?; // ==> false
test = obj == null; // ==> true

// And
i = 5;
obj = i; // i is a Nullable<int>
// Debugger shows type of obj as "object {int}"
test = obj is int; // ==> true
test = obj is int?; // ==> true
test = obj == null; // ==> false

i = null;
obj = i;
// Debugger shows type of obj as "object"
test = obj is int; // ==> false
test = obj is int?; // ==> false
test = obj == null; // ==> true 
```

Both `obj is int` and `obj is int?` return `true` if `obj` contains an `int` number but both return false if `obj` contains `null`! A `null` `Nullable<int>` is converted to `(object)null` when asssigned to `obj` and is no more `Nullable<int>`.

The debugger shows the type of `obj` as `object {int}` when there is a number stored, no matter whether an `int` or an `int?` was assigned! The type of `obj` is `object` when `null` is stored.

So Chuong Le is in fact right!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:00:21.787

我建议您使用`Int.TryParse`，因为该值很可能是一个字符串。不要使用，`Int.Parse`因为您还必须处理异常，并且您通常希望避免编写可能引发异常的代码（即使您正在处理它们）。

using`as`并不是一个很好的解决方案，因为它迫使您使用 nullable `int`；如果你走这`is`条路线，那么当传入的值是一种类型时，~~几乎~~可以保证它不起作用。`string`

关于`is`辩论，我在 VS 中运行了这个：

```
string value = "42";
object answerToUniverse = value;
if (answerToUniverse is int)
{
    Console.WriteLine("It's an integer!");
}
else
{
    Console.WriteLine("It's NOT an integer!");
} 
```

结果是：它**不是**整数！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:00:59.903

也许你真的想这样做，

```
var idString = Page.RouteData.Values["id"] as string;
int id;
if (int.TryParse(idString, out id))
{
   // id is now a valid number 
}
else
{
   // your types are confused
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:01:27.580

看起来您想要检查**值**而不是**类型**，这意味着您并不真正关心类型是什么。

在这种情况下，这是我可以推荐的最佳方法：

```
object idValue = Page.RouteData.Values["id"];
int dummy;
if (idValue != null && Int32.TryParse(idValue.ToString(), out dummy))
{
    //value is integer!
} 
```

这样，类型是什么都没有关系。如果它是整数、双精度、字符串甚至是具有适当`ToString()`覆盖的复杂类型，它将起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T15:02:08.637

`as` is a safe cast. It will try and cast the provided value to the desired type, returning `null` instead of throwing an exception when a standard cast would.

Therefore unless Page.RouteData.Values["id"] was an integer object this would not work and you need to user the alternative methods you suggested.

One was could be to use an extension method

```
public static class IntExtensions {
   public static int? AsInt(this string source) {
     int result;
     return (int.TryParse(source,out result)) ? (int?)null : result;
   }

   public static bool IsInt(this string source) {
     return source.AsInt.HasValue;
   }
} 
```

Allowing you to do

```
if (Page.RouteData.Values["id"].IsInt()) 
```

# ios - iOS MFMailComposeViewController 并从联系人卡片中获取用户名

> ID：12711085
> 
> 赞同：0
> 
> 时间：2012-10-03T14:51:42.100
> 
> 标签：ios, email, contact, mfmailcomposeviewcontroller, abaddressbook

我想获得“我”卡的名称，所以当我使用 MFMailComposeViewController 创建邮件窗口时

我可以

```
MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
mailer.mailComposeDelegate = self;
[mailer setSubject:@"Suggestion: from (Name of Person)"]; 
```

基本上用他们的联系卡上的名字代替（人名）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:37:15.517

您无法从 iOS SDK 中获取“我”卡。[mac](https://developer.apple.com/library/mac/#documentation/UserExperience/Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/cl/ABAddressBook)有一个`me`方法，但 iOS 没有。如果此人的姓名将在 From: 字段中，将其添加到主题行有什么价值？

# spring - Spring Instantiation using a none-static factory method

> ID：12711087
> 
> 赞同：0
> 
> 时间：2012-10-03T14:51:55.003
> 
> 标签：spring, configuration

I have got a situation where I would like to create bean2 in Spring config:

beans.xml:

```
<bean id="bean1" class="...">
    <property name="..." ref="..." />
</bean> 
```

bean2 = bean1.foo()

Would appreciate any help,

Thanks, Behzad

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:58:15.887

您可以使用实例工厂方法。请参阅Spring 文档中的[相应章节](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-factory-class-instance-factory-method)。

```
<bean id="bean2" factory-bean="bean1" factory-method="foo"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:32:15.433

如果您使用注释，您可以使用：

```
@Configuration
public class AppConfig {

    @Bean
    @Lazy
    public Bean1 getBean1(){
        return Bean1.getInstance();
    }

    @Bean
    public Bean2 getBean2() {
        return this.getBean1().newBean2(); //in your example is this.getBean1().foo();
    }

} 
```

# shell - Delete everything starting from "\\" and ending at the white space

> ID：12711088
> 
> 赞同：2
> 
> 时间：2012-10-03T14:51:55.377
> 
> 标签：shell

I have a text file contains:

```
台北市\\tai2bei3shi4 警察局\\jing3cha2ju2. 
```

I want to delete everything starting from `\\` and ending at the white space. The result looks like this:

```
台北市 警察局 
```

How can I do it? Is there a one line command?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:56:43.117

这使用[GNU sed](https://www.gnu.org/software/sed/)有效：

```
sed 's/\\[^ ]*//g' <textfile> 
```

Sed 的替换工作如下：`s/regexp/replacement/`

*   `regexp`部分是，这`\\[^ ]*`意味着“找到一个`\`和它后面的任何非空白字符”
*   `replacement`是空的，因为我们想用空替换匹配的`regexp`部分
*   `g`意味着应该在每一行上尽可能多地执行替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:44:07.473

如果您删除从 \\ 开始并以空格结尾的所有内容，您将得到

`台北市警察局\\jing3cha2ju2.`

不是

`台北市 警察局`

但如果你想得到`台北市 警察局`：

```
sed -r 's/\\\\[^ ]+( |\.)//g' file.txt 
```

产生以下输出：

```
台北市警察局 
```

您可以通过添加将输出发送到第二个文件`> file2.txt`

`\\\\` 你必须对两个角色进行转义，这就是为什么有四个角色

`[^ ]+` 一系列不包括空格的字符

`( |\.)`空格或点（点必须转义）

`-r` 所以你不必转义方括号或括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:11:02.877

基于您的输入的 sed 行：

```
sed 's/[0-9a-zA-Z.\\\\]*//g' file 
```

**测试**

```
kent$  echo "台北市\\tai2bei3shi4 警察局\\jing3cha2ju2."|sed 's/[0-9a-zA-Z.\\\\]*//g'
台北市  警察局 
```

# performance - Performance tuning - Query on partitioned vs non-partitioned table

> ID：12711094
> 
> 赞同：3
> 
> 时间：2012-10-03T14:52:15.173
> 
> 标签：performance, oracle, partitioning

I have two queries, one of which involves a partitioned table in the query while the other query is the same except that it involves the non-partitioned equivalent table. The original (non-partitioned table) query is performing better than the partitioned counter-part. I am not sure how to isolate the problem for this. Looking at the execution plan, I find that the indexes used are the same b/w the two queries and that the new query shows the PARTITION RANGE clause in its execution plan meaning that partition pruning is taking place. The query is of the following form:-

```
Select rownum, <some columns> 
from partTabA 
inner join tabB on condition1
inner join tabC on condition2
where partTabA.column1=<value> and <other conditions>
and partTabA.column2 in (select columns from tabD where conditions) 
```

where partTabA is the partitioned table and partTabA.column1 is the partitioning key(range partition). In the original query, this gets replaced by the non-partitioned equivalent of the same table. What parameters should I look at to find out why the new query performs badly. Tool that I have is Oracle SQL Developer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:10:47.220

`PARTITION RANGE ITERATOR`并不一定意味着分区修剪正在发生。您还需要查看说明计划中的`Pstart`和`Pstop`，以了解正在使用哪些分区。

分区查询会变慢有几个潜在原因，即使它正在读取相同的数据。（假设分区查询没有正确修剪，而是从整个表中读取。）

1.  从多个本地索引读取可能比从单个更大的索引读取效率低得多。
2.  较大的初始段大小、大量分区等可能会浪费大量空间。将段大小与此进行比较：`select * from dba_segments where segment_name in ('PARTTABA', 'TABA');` 如果这是问题所在，您可能需要查看表空间设置，或使用延迟段创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:04:59.657

我相信您正在处理分区开销，如果您有分区表，那么 oracle 必须首先找到要扫描的分区。

你能把两个执行计划都贴在这里吗？桌子有多大？此处使用的索引的选择性如何？

您是否尝试收集统计数据？

您也可以尝试查看跟踪文件以查看发生了什么。

# c - MMX SSE 到 C 代码转换时图像质量下降

> ID：12711101
> 
> 赞同：0
> 
> 时间：2012-10-03T14:52:35.800
> 
> 标签：c, sse, sse2, mmx

我正在将 MMX SSE 转换为等效的 C 代码。我几乎已经转换了它，但我得到的图像质量不合适，或者我可以看到图像中有一些噪点。我正在调试过去 5 天的代码，但我没有得到任何原因。如果你们调查这个问题并帮助我，我会非常高兴。

原始 SSE 代码：

```
void unpack_8bit_to_16bit( __m128i *a, __m128i* b0, __m128i* b1 ) 
{
    __m128i zero = _mm_setzero_si128();
    b0 = _mm_unpacklo_epi8( a, zero );
    b1 = _mm_unpackhi_epi8( a, zero );
}

void convolve_cols_3x3( const unsigned char* in, int16_t* out_v, int16_t* out_h, int w, int h )
{
    using namespace std;
    assert( w % 16 == 0 && "width must be multiple of 16!" );
    const int w_chunk  = w/16;
    __m128i*    i0       = (__m128i*)( in );
    __m128i*    i1       = (__m128i*)( in ) + w_chunk*1;
    __m128i*    i2       = (__m128i*)( in ) + w_chunk*2;
    __m128i* result_h  = (__m128i*)( out_h ) + 2*w_chunk;
    __m128i* result_v  = (__m128i*)( out_v ) + 2*w_chunk;
    __m128i* end_input = (__m128i*)( in ) + w_chunk*h;

    for( ; i2 != end_input; i0++, i1++, i2++, result_v+=2, result_h+=2 ) 
    {
        *result_h     = _mm_setzero_si128();
        *(result_h+1) = _mm_setzero_si128();
        *result_v     = _mm_setzero_si128();
        *(result_v+1) = _mm_setzero_si128();
        __m128i ilo, ihi;
        unpack_8bit_to_16bit( *i0, ihi, ilo ); 
        *result_h     = _mm_add_epi16( ihi, *result_h );
        *(result_h+1) = _mm_add_epi16( ilo, *(result_h+1) );
        *result_v     = _mm_add_epi16( *result_v, ihi );
        *(result_v+1) = _mm_add_epi16( *(result_v+1), ilo );
        unpack_8bit_to_16bit( *i1, ihi, ilo );
        *result_v     = _mm_add_epi16( *result_v, ihi );
        *(result_v+1) = _mm_add_epi16( *(result_v+1), ilo );
        *result_v     = _mm_add_epi16( *result_v, ihi );
        *(result_v+1) = _mm_add_epi16( *(result_v+1), ilo );
        unpack_8bit_to_16bit( *i2, ihi, ilo );
        *result_h     = _mm_sub_epi16( *result_h, ihi );
        *(result_h+1) = _mm_sub_epi16( *(result_h+1), ilo );
        *result_v     = _mm_add_epi16( *result_v, ihi );
        *(result_v+1) = _mm_add_epi16( *(result_v+1), ilo );
    }
} 
```

我转换的代码如下

```
void convolve_cols_3x3( const unsigned char* in, int16_t* out_v, int16_t* out_h, int w, int h )
{
    using namespace std;
    assert( w % 16 == 0 && "width must be multiple of 16!" );
    const int w_chunk  = w/16;

    uint8_t*    i0       = (uint8_t*)( in );
    uint8_t*    i1       = (uint8_t*)( in ) + w_chunk*1*16;
    uint8_t*    i2       = (uint8_t*)( in ) + w_chunk*2*16;
    int16_t* result_h  = (int16_t*)( out_h ) + 2*w_chunk*16;
    int16_t* result_v  = (int16_t*)( out_v ) + 2*w_chunk*16;
    uint8_t* end_input = (uint8_t*)( in ) + w_chunk*h*16;
    for( ; i2 != end_input; i0+= 16, i1+= 16, i2+= 16, result_v+= 16, result_h+= 16 ) 
    {
        for (int i=0; i<8;i++)
        {
            result_h[i]     = 0;
            result_h[i + 8] = 0;
            result_v[i]        = 0;
            result_v[i + 8] = 0;
            result_h[i]     = (int16_t)(i0[i]) + result_h[i] ;
            result_h[i + 8] = (int16_t)(i0[i + 8]) + result_h[i + 8] ;
            result_v[i]     = (int16_t)(i0[i]) + result_v[i] ;
            result_v[i + 8] = (int16_t)(i0[i + 8]) + result_v[i + 8] ;
            result_v[i]     = (int16_t)(i1[i]) + result_v[i] ;
            result_v[i + 8] = (int16_t)(i1[i + 8]) + result_v[i + 8] ;
            result_v[i]     = (int16_t)(i1[i]) + result_v[i] ;
            result_v[i + 8] = (int16_t)(i1[i + 8]) + result_v[i + 8] ;
            result_h[i]     = result_h[i] - (int16_t)(i2[i]);
            result_h[i + 8] = result_h[i + 8] - (int16_t)(i2[i + 8]);
            result_v[i]     = (int16_t)(i2[i]) + result_v[i] ;
            result_v[i + 8] = (int16_t)(i2[i + 8]) + result_v[i + 8] ;
        }
    }
} 
```

抱歉，如果代码不那么可读。`w`并`h`表示宽度和高度。`out_h`并且`out_v`是稍后用于其他目的的两个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:56:26.263

这些错误似乎存在于您的指针数学和源数据的读取中。指针变量 i0、i1、i2 是无符号字符。在您的代码中这样的行：

```
 result_h[i + 8] = (int16_t)(i0[i + 8]) + result_h[i + 8] ; 
```

应该是这样的：

```
result_h[i + 8] = (int16_t)(i0[i*2 + 16]) + result_h[i + 8] ; 
```

强制转换为 int16_t 不会影响 i0 方括号内的偏移量。您正在使用 16 字节结构 (__m128i)，但以 8 字节偏移量访问它们。您也只使用 i0 和 i1 指向的整数的低 8 位。在原始 SSE 代码中，您正在读取 16 位整数。如果您需要在加法之前读取 16 位整数，则最终更正的代码可能如下所示：

```
result_h[i + 8] = *(int16_t *)(&i0[i*2 + 16]) + result_h[i + 8]; 
```

# java - 越来越消耗内存的简单 Java 程序

> ID：12711106
> 
> 赞同：3
> 
> 时间：2012-10-03T14:52:50.070
> 
> 标签：java, swing, memory-efficient, memory-consumption

我有这个简单的 Java 代码，它创建一个 JFrame 实例并显示它。此链接包含 jconsole 拍摄的内存消耗图的屏幕截图

![在此处输入图像描述](../Images/049fb537cc5940966dcffc8d3fcae539.png)

让我担心的是，任务管理器中的 java.exe 显示内存使用量以每 8-9 秒 4-5 kbs 的速度持续增加。需要帮忙

```
import javax.swing.*;

class MyGUI extends JFrame
{
    public void makeGUI()
    {
        setLayout(null);
        setSize(500, 200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
}

public class Launcher
{
    public static void main(String []args)
    {
        SwingUtilities.invokeLater(new Runnable()
                    {
                       public void run()
                       {
                        new MyGUI().makeGUI();
                       }
                    });
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:56:35.283

配置文件看起来非常正常 - 程序创建对象，并且不时地，垃圾收集器通过摆脱不再可访问的对象来释放内存。

重要的观察是波谷点或多或少都在同一级别，因此看起来您的代码没有内存管理问题。

您可以通过将堆空间的最大数量设置为较低的水平来降低峰值的高度，但 5 MB 并不多......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T14:58:44.423

我认为这个内存是由于 Swing 使用的对象的生成，比如各种 UI 事件（鼠标移动等）。Swing 倾向于为每个事件生成对象并调用处理这些事件的侦听器。之后不再使用这些与事件相关的对象（除非您继续引用它们）。

**这不是内存泄漏，**这是正常行为。事实上，在你的内存消耗截图中，当垃圾收集器释放这些对象时，内存急剧下降。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:04:18.013

Java 倾向于根据需要使用内存。它不会经常进行垃圾收集，因此即使在运行时使用简单的程序，它也会自然地增加大小。因为它必须为您甚至大部分都看不到的小事件开设课程。

`System.gc()`如果您想强制 java 进行垃圾收集并手动减少内存使用量，您可以随时调用，但您应该*非常谨慎地*使用它。

# python - Python：从项目列表中获取项目

> ID：12711107
> 
> 赞同：1
> 
> 时间：2012-10-03T14:52:50.947
> 
> 标签：python

我是 python 新手，在做一些练习时发现了一些困难。

我在一个类下几乎没有 def 函数，如下所示：

```
Class A(object):

    def __init__(self):

        self.itemID = []
        self.itemlist = []

    def add(self, ID, list):

        self.itemID.append(ID)
        self.itemlist.append(list)

    def get_item(self,ID):

        self.ID = ID
        result = []
        for self.ID in self.itemlist:
            result.append(self.itemlist)
        return result 
```

我在使用“def get_item”时遇到问题。这是一个例子..

如果我做：

```
A.add('abc', 'bcd')

A.add('abc1', 'bcd1')

A.get_item('abc') 
```

这应该返回 abc, bcd 但我的返回 [['bcd', 'bcd1'], ['bcd', 'bcd1']]...

为冗长复杂的愚蠢代码道歉....任何反馈将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:56:27.163

为什么不使用`dict`?

```
A = {}
A['abc'] = 'bcd'
A['abc1'] = 'bcd1' 
```

然后，根据需要`A['abc']`返回`'bcd'`。

您可以访问 ID`A.keys()`和项目`A.values()`，这样您就不会失去任何功能。

正如@Stals 在评论中指出的那样，如果您想保留添加内容的顺序，您也可以使用[`OrderedDict`](http://docs.python.org/library/collections.html#collections.OrderedDict).

如果您确实需要多个具有相同 ID 的物品，则有多种方法`multidict`可能会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:05:06.420

其他人已经解释了如何使其工作；我将解释为什么你所拥有的不起作用。

这里的问题是 Python 正在做你告诉它做的事情：

```
for self.ID in self.itemlist:
         result.append(self.itemlist) 
```

1.  在一个循环`self.ID`中，按顺序设置为每个元素`self.itemlist`。（顺便说一下，完全没有必要为此使用实例属性，因为`ID`方法完成时不需要保留；您可能应该在此处使用局部变量。）

2.  每次通过循环时，都会附加`self.itemlist`对结果的引用。

换句话说，您正在从您的 中请求单个项目`self.itemlist`，但没有对这些项目做任何事情。您的所有附加操作都会附加*原始列表，*而不是列表中的当前项目。

因此，您的方法会返回一个列表，其中包含与`self.itemlist`其中元素一样多的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:58:29.217

你的 get_item 函数是绝对错误的:)

它应该是这样的：

```
def get_item(self,ID):
  result = []
  for x in range(0, len(self.itemID)):
      if (self.itemID[x] == ID):
          result.append(self.itemlist[x])
  return result 
```

甚至更好：

```
def get_item(self, ID):
   return [self.itemlist[x] for x in range(0, len(self.itemID) if self.itemID[x] == ID] 
```

现在，如果我了解您的类背后的逻辑，您希望能够检索给定公共 ID 的对象列表。使用 dict 可以更好地完成此操作

```
class A:
   def __init__(self):
       self.content  = {}

   def add(self, ID, object):
       list = self.get_item(ID)
       list.append(object)
       content[ID] = list

   def get_item(self, ID):
       return content.get(ID, []) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:06:34.773

你的`get_item`代码很混乱。当它应该只读取它时，它会覆盖`self.ID`数次，并且循环将*整个 itemlist*（或者更确切地说，itemlist 本身）附加到结果中 - 它在每次迭代时都会这样做。这就是为什么您会看到如此奇怪的结果。

你可能想到的是这样的：

```
def get_item(self, ID):
   for index in range(self.ID.length):
      if self.id[index] == ID:
         return self.itemlist[index] 
```

即：遍历两个列表的索引，当在ID列表的那个位置找到匹配ID的，返回对应位置的东西`itemlist`。

使用 Python 的内置函数可以稍微改进此代码。例如，您可以使用[`zip`](http://docs.python.org/library/functions.html#zip)- 它可以同时获取您的列表（`ID`和`itemlist`），并返回成对的相应项目 - 所以，您有：

```
def get_item(self, ID):
    for id, item in zip(self.ID, self.itemlist):
        if id == ID:
            return item 
```

[但是您可以通过使用列表方法](http://docs.python.org/library/functions.html#zip)完全摆脱循环-`list.index`是否会为您搜索：

```
def get_item(self, ID):
   return self.itemlist[self.ID.index(ID)] 
```

# java-native-interface - 假人的 JNI

> ID：12711112
> 
> 赞同：0
> 
> 时间：2012-10-03T14:53:10.397
> 
> 标签：java-native-interface

我刚刚开始阅读 JNI，我们项目 C++ 方面的人刚刚向我指出了 2 个文件，Java 接口和 DLL 文件。有了 DLL，我是否需要对 C++ 端发生的事情有任何其他了解。我现在是否只是将 DLL 放在类路径中并通过他给我的 Java 接口访问它？他使用 Java 接口创建了一个头文件，该文件包含在 .cpp 文件中。据此，我假设生成了 DLL。

以下是我的一些代码

```
 System.loadLibrary("PredictionService");
    JNIPrediction predictor = new JNIPrediction();
    predictor.getPredictions("test"); 
```

我没有收到任何错误，这是否意味着它正在成功加载 DLL 并在 DLL 中调用 getPredictions() 方法？基本上我需要知道这就是你通常如何使用 JNI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:50:42.420

“Java 接口文件”不是一个通常定义的术语。您至少需要一个 C 头文件或一些文档来指示如何调用 DLL 中的函数。您可能从 DLL 本身获得的唯一信息是可用方法的名称。

虽然可以在描述 DLL 方法签名的 DLL 中嵌入调试信息，但您的 DLL 中不太可能有这样的信息，您需要额外的工具才能使用它。

# c++ - CDialog 与 IWebBrowser 组件，退格不起作用

> ID：12711113
> 
> 赞同：4
> 
> 时间：2012-10-03T14:53:14.440
> 
> 标签：c++, mfc, iwebbrowser2, cdialog

我有一个带有 IWebBrowser2 的 MFC CDialog。我进入一个有 HTML 文本区域的页面，我可以输入文本，但退格键不会删除它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:57:03.627

在 Internet Explorer 中承载作为编辑控件子类的 ATL ActiveX 控件时，当焦点设置为 Edit 控件时按 BACKSPACE 键会导致 Internet Explorer 导航到上一个网页。如果具有该控件的网页之前没有网页，则 ​​BACKSPACE 键正常工作。

当用户单击子类控件时，该控件不是 UI 激活的。这意味着任何加速键都由 Internet Explorer 框架处理。控件永远不会更改以处理 BACKSPACE 加速键。

参考： http: [//support.microsoft.com/kb/190044](http://support.microsoft.com/kb/190044)

# mysql - MySQL SELECT 基于可选 NULL 值的最佳记录

> ID：12711115
> 
> 赞同：1
> 
> 时间：2012-10-03T14:53:17.403
> 
> 标签：mysql, select, null

请参考这个 SQLFiddle：[http ://sqlfiddle.com/#!2/9db4f](http://sqlfiddle.com/#!2/9db4f)

表“费率”存储工作角色的每小时收费率，并可选择存储基于客户公司、组（“组”只是公司的一个部门）和客户联系人的角色的不同费率。

费率也可能随时间而变化。

我想为角色、公司、组和联系人的给定组合选择一个最近的、最合适的费率。它应该尝试按以下顺序匹配：

1.  client_contact、client_group、client_company 和角色
2.  客户组、客户公司和角色
3.  客户公司和角色
4.  只是角色

例如：我正在寻找一个费率匹配角色 ID 3、公司 ID 3 和客户 ID 4。

没有与所有这些匹配的记录，因此它应该查找仅匹配角色 ID 3 和公司 ID 3 的记录。（其他字段 - client_contact 和 client_group - 必须为 NULL）。其中有两个：行 ID 的 2 和 3。它应该选择行 ID 3，因为它具有最近的“date_from”日期。

另一个例子：我正在寻找一个费率匹配的角色 ID 3 和公司 ID 25。其中也没有一个，因此它应该寻找一个仅匹配角色 ID 3 的角色，而所有其他值都为 NULL。只有一个匹配的行：数字 1。

当前 SQLFiddle 上的查询执行“获取最新”位，但我坚持让它匹配可选列（如果它们存在）。

哈尔普:(

编辑：哎呀，看起来 SQLFiddle 只保存模式，而不是查询。这就是我所拥有的：

```
SELECT 
  rate.*
FROM
  rate
LEFT JOIN rate AS newest ON (
  rate.role = newest.role
  AND COALESCE(rate.client_company, 1) = COALESCE(newest.client_company, 1)
  AND COALESCE(rate.client_group, 1) = COALESCE(newest.client_group, 1)
  AND COALESCE(rate.client_contact, 1) = COALESCE(newest.client_contact, 1)
  AND newest.date_from > rate.date_from
)
WHERE newest.id IS NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:13:59.653

我会这样处理它。

假设您正在寻找：

```
client_contact = 5
client_group= 3
client_company= 3
role = 3 
```

询问：

```
select *
from rate
where ifnull(client_contact, 5) = 5
    and ifnull(client_group, 3) = 3 
    and ifnull(client_company, 3) = 3 
    and ifnull(role, 3) = 3
order by case
    when client_contact = 5 and client_group = 3 and client_company = 3 and role = 3
      then 1
    when client_contact is null and client_group = 3 and client_company = 3 and role = 3
      then 2
    when client_contact is null and client_group is null and client_company = 3 and role = 3
      then 3
    when client_contact is null and client_group is null and client_company is null and role = 3
      then 4
end, date_from desc
limit 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/9db4f/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:51:37.550

在您返回的集合上，我会尝试根据可选列分配排名，因此排名越高，最接近匹配项，然后将获得具有 Max rank 的记录......（在[SQL Fiddle](http://sqlfiddle.com/#!2/9db4f)上测试）

扩展您的查询：

```
SELECT T.*
FROM
(
    SELECT
      rate.*,
      ((CASE WHEN COALESCE(rate.client_company, 1) = COALESCE(newest.client_company, 1)
                       AND rate.client_company = 25  THEN 1
             ELSE 0 END) +
       (CASE WHEN COALESCE(rate.client_group, 1) = COALESCE(newest.client_group, 1)
                      AND rate.client_group = NULL THEN 1
             ELSE 0 END) +
       (CASE WHEN COALESCE(rate.client_contact, 1) = COALESCE(newest.client_contact, 1)
                      AND rate.client_contact = NULL THEN 1
             ELSE 0 END)) AS RANK
      FROM
        rate
      LEFT JOIN rate AS newest
        ON rate.role = newest.role
       AND COALESCE(rate.client_company, 1) = COALESCE(newest.client_company, 1)
       AND COALESCE(rate.client_group, 1) = COALESCE(newest.client_group, 1)
       AND COALESCE(rate.client_contact, 1) = COALESCE(newest.client_contact, 1)
       AND newest.date_from > rate.date_from
     WHERE newest.id IS NULL
       AND rate.role = 3
) T
HAVING T.Rank = MAX(T.Rank) 
```

请注意：在我们有 rate.client_company = 25 的代码中，25 应替换为公司代码的输入参数。在我们有 rate.client_group = NULL 的代码中，NULL 应该替换为 Client Group Id 的输入参数在我们有 rate.client_contact = NULL 的代码中，NULL 应该替换为 ClientContactId 的输入参数在我们有 rate.role 的代码中= 3, 3 应替换为 RoleId 的输入参数。

我试图在 SQl Fiddle 中声明变量但无法这样做，所以我对上述值进行了硬编码......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:20:38.170

我认为这意味着对于每个汇率记录，您都需要匹配的最新汇率。以下适用于给定的数据，但真正的答案是在此之后。

```
select rate.*,
       rmax.hourly_rate,
       rmax.maxdate
from rate join
     (select rmax.*, forhr.hourly_rate
      from (select role, client_company, client_group, client_contact, MAX(date_from) as maxdate
            from rate
            group by role, client_contact, client_group, client_company, role with rollup
           ) rmax join
           rate forhr
           on coalesce(rmax.role, '') = coalesce(forhr.role, '') and
              coalesce(rmax.client_company , '') = coalesce(forhr.client_company, '') and
              coalesce(rmax.client_contact, '') = coalesce(forhr.client_contact, '') and
              coalesce(rmax.client_group, '') = coalesce(forhr.client_group, '') and
              rmax.maxdate = forhr.date_from
     ) rmax
     on coalesce(rmax.role, '') = coalesce(rate.role, '') and
        coalesce(rmax.client_company , '') = coalesce(rate.client_company, '') and
        coalesce(rmax.client_contact, '') = coalesce(rate.client_contact, '') and
        coalesce(rmax.client_group, '') = coalesce(rate.client_group, '') 
```

内部查询只是为了获取与日期相关的最新汇率。外部查询对费率表中的每条记录进行匹配。

我不确定我在想什么；我想我的思维过程被打断了。我认为解决此问题的最佳方法是使用相关子查询。以下获得最大速率。您可以使用相同的方法来获取 id 和其他信息：

```
select r.*,
       (select hourly_rate
        from rates r2
        where coalesce(r.role, '') = coalesce(r2.role, '') and
              coalesce(r.client_company , '') = coalesce(r2.client_company, '') and
              coalesce(r.client_contact, '') = coalesce(r2.client_contact, '') and
              coalesce(r.client_group, '') = coalesce(r2.client_group, '')
        order by (case when r2.client_contact is not null then 1
                       when r2.client_group is not null then 2
                       when r2.client_company is not null then 3
                       when r2.role is not null then 4
                       else 5
                  end),
                 date_from desc
        limit 1
       ) as most_recent_hourly_rate
from rates r 
```

这使用相关子查询来获取匹配最多的行。关键是`order by`子句，它按“最匹配”字段到“最不匹配”字段排序，然后按日期排序。在这种情况下，它会拉动小时费率。在实践中，我会拉出 id 并加入到费率中以获取费率和其他信息（例如日期）。

在给定的表单中，它假定数据`rates`按照您所说的那样结构化，并且您没有包含 client_group 和 role 的行，但没有其他字段。

# iphone - 带有 Xcode 4.5 的故事板

> ID：12711116
> 
> 赞同：0
> 
> 时间：2012-10-03T14:53:21.023
> 
> 标签：iphone, objective-c, ios, xcode, uistoryboard

伙计们，我需要有关 Storyboard 的帮助。我有一个带有表格和视图的情节提要，我想单击一个单元格并对视图进行事务处理。我将 DetalheMeuPostoAmigo 设置为 View 并在 didSelectRowAtIndexPath 中调用它，如下代码所示。

当我运行应用程序时，我没有收到任何错误，但事务也不起作用。我用警报进行了测试并且做得很好。我多次查看代码...

```
 Top10.m
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{   
   UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];   
   DetalheMeuPostoAmigo *detalhesMeuPostoAmigoVC = [storyboard instantiateViewControllerWithIdentifier:@"DetalheMeuPostoAmigo"];
   [self.navigationController pushViewController:detalhesMeuPostoAmigoVC animated:YES];
} 
```

[链接到故事板图像](https://docs.google.com/open?id=1aYJU7mG0yvpVv0P_sQSX4HsATlfPtjcerXnQUM7wJFmHThMP7xIIdR3EwC6L)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:00:56.843

我不是这方面的专家，但尝试使用现有的 VC：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{    
   UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];    
   YOURCURRENTVC *detalhesMeuPostoAmigoVC = [storyboard instantiateViewControllerWithIdentifier:@"DetalheMeuPostoAmigo"]; 
   [self.navigationController pushViewController:detalhesMeuPostoAmigoVC animated:YES]; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:58:35.230

您的初始 ViewController 不在 NavigationController 中。

在情节提要上选择 TableViewController 并从菜单中选择

**编辑器 -> 嵌入 -> 导航控制器**

![在此处输入图像描述](../Images/f6ecff189e65204c5468de45d3aa211a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:01:51.183

我不知道答案。但我过去也有类似的问题。检查 self.navigationController == null 如果它是 null 这是你的问题。

蟒蛇

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T15:21:46.627

为什么不在表格单元格上创建 Segue？选择表格单元格，按控制键并将箭头拖到您的视图控制器并选择推送。为 Segue 提供标识符，您就完成了！

您的代码的问题是您没有在 UINavigationController 中嵌入 UITableview。通过选择“编辑器 -> 嵌入 -> 导航控制器”来嵌入它。然后你的代码应该可以工作。

仅供参考，故事板上的这篇[文章很棒！](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T00:53:25.153

感谢所有答案，我测试了所有选项，但没有成功，低于 Sérgio 的测试

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

        DetalheMeuPostoAmigo *detalhesMeuPostoAmigoVC = [storyboard instantiateViewControllerWithIdentifier:@"DetalheMeuPostoAmigo"];

    [self.navigationController pushViewController:detalhesMeuPostoAmigoVC animated:YES];

    if (detalhesMeuPostoAmigoVC == nil) {
        NSLog(@"Is null?"); // Here is not Null

    }
    if (self.navigationController == nil) {
        NSLog(@"Is null?"); // Here is Null

    } 
```

# database-design - 客户数据库设计

> ID：12711119
> 
> 赞同：1
> 
> 时间：2012-10-03T14:53:37.157
> 
> 标签：database-design, sql-server-2008-r2

我们设计这个数据库来跟踪我们的客户数据库，但我觉得它的设计有点复杂我觉得它可以更简单有人可以提供一些设计建议吗？ ![在此处输入图像描述](../Images/5961d2dde5ea99b3b9e8da6ae0a84c22.png)

![在此处输入图像描述](../Images/180444b7b58bd517d02003293c765ffd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:34:47.673

关于这张图的一些想法：

*   在多对多连接表上设置主键（大概两列都应该是 PK）
*   我不认为表格中的“重复”电话号码违反了规范化规则，相反，我认为这是巧合。例如，您不会仅仅因为两个人被命名为“Joe”而有一个完整的名字表。另外，想象一下如果两个人共享一个电话号码，那么其中一个人会得到一个不同的号码。如果直接`phone`引用，更新一个数字是一项简单的操作`Customer`，但奇怪的是（对我来说）插入一个新的`phone`并在连接表上进行多个操作只是为了做同样的事情。
*   同样处理`Email`。
*   如果有多种选择，应用程序将如何选择要使用的电话或电子邮件？是否应该提供`default`位或`ordinal`列？
*   客户是否有许多地点、许多公司，或两者兼而有之？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:02:26.260

如果简单是这里的关键点，我建议您将与客户相关的地址类型信息折叠到一个表中，如下所示：

```
 customer_contact_details{
    customer_id MEDIUM_INT
    contact_type VARCHAR2(10)
    contact_details VARCHAR2(100)
    status BOOLEAN
    } 
```

然后可以`Home Phone,email,primary_email,work_phone,primary contact`根据您的需要将contact_type 字段标记为。然后，您可以将所有此类相关的联系信息放在一个表中。简化您的架构，您只需要一个连接即可理解信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:29:51.347

另一个部分解决方案是使用联系人表：客户有联系人（一对多）；每个联系人可能有多个电话号码（即使那样，您也只需要一个手机号码、一个家庭号码、一个工作号码和一个传真号码）但只有一个电子邮件地址。

# jquery - 使用jquery的美元符号变量

> ID：12711124
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:54:03.427
> 
> 标签：jquery, html

我的要求是找到与 'vrr' 匹配的 id，所以我使用 * 来表示它，但它不适用于美元，猜猜为什么这不起作用？

**HTML：**

```
<div id="vrrcss">you</div> 
```

**脚本**

```
$(function(){
    $('[id$*=vrr]').text('me')
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:55:26.107

[`$=`匹配以指定值*结尾*的属性。](http://api.jquery.com/attribute-ends-with-selector/) `'vrrcss'`不以`'vrr'`.

请改用[`^=`(attribute started with)](http://api.jquery.com/attribute-starts-with-selector/)或[`*=`(attribute contains)](http://api.jquery.com/attribute-contains-selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:56:51.197

如果要更改元素“vrr”的文本，请尝试[以下](http://jsfiddle.net/jYapV/)操作，或者只是...

```
$("[id^=vrr]").text('Me'); 
```

# jquery - 好的干净的接口库来补充jquery.js 和backbone.js？

> ID：12711129
> 
> 赞同：0
> 
> 时间：2012-10-03T14:54:30.117
> 
> 标签：jquery, frameworks, backbone.js, instant-messaging

***我计划构建一个 facebook 即时消息克隆，并寻找一个 jquery 接口框架，我的目标是：***

[http://www.arrowchat.com/demo.brand/](http://www.arrowchat.com/demo.branded/)

现在的想法是有一个干净的用户界面库来处理对话框和其他东西。我已经看过了：

*   余烬到现在复杂的早熟
*   骨干但不支持ui的东西
*   jquery-ui 不喜欢这个不知道为什么，对于初学者来说它很臃肿
*   [http://www.jeasyui.com/demo/index.php](http://www.jeasyui.com/demo/index.php)看起来不错，但与backbone.js 的联系并不紧密 - 这是完美的，但需要更专注于backbone.js 的lib

是否有任何其他 jquery 库来呈现可能特定于主干.js 的用户界面，以获得一个体面的布局并在干净的代码上运行？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:08:28.133

看看[Bootstrap](http://twitter.github.com/bootstrap/)或[Foundation Zurb](http://foundation.zurb.com)。

它们都为您提供了具有通用 UI 元素的响应式脚手架。如果你想要更多的 JS 插件，那么 Bootstrap 就是其中之一。

# ruby-on-rails - Rails 2 数据库模型返回带有问号的错误编码字符串

> ID：12711132
> 
> 赞同：1
> 
> 时间：2012-10-03T14:54:42.767
> 
> 标签：ruby-on-rails

嗨，我有一个存储一些数据的 oracle 数据库。它还包含一些非英文文本，例如“TEST”。引用不是英文引用“。问题是当我从 Rails 2.2.2 (Ruby 1.8.7) 检索它时，此数据库模型的字段值在 erg 视图中返回问号，因此“TEST”变为？TEST？。但是在 Rails 3 下，它显示正确。

erb 中显示值的代码是

```
User.first.description 
```

我确实使用以下内容在 database.yml 中设置了编码，但没有帮助

编码：UTF8 排序规则：utf8_unicode_ci

可能是因为 Ruby 1.9 比 Ruby 1.8 更好地处理编码。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:12:34.370

是的，ruby 1.9 处理与 1.8 不同的编码。此外，Rails 3 通过尝试确保所有内容都使用 UTF-8 来简化编码。

您的问题很可能是该字符串是用编码的，`Latin-1`并且 Rails 2 尝试将其作为`UTF-8`编码读取。有几个在线猴子补丁，您可以为您的数据库尝试，或者您可以执行一次性脚本来重新编码数据库中的所有字段。

我建议阅读这篇文章，以进一步了解编码如何与 Ruby 一起工作：[Encodings, Unabridged (by Yehuda Katz)](http://yehudakatz.com/2010/05/17/encodings-unabridged/)

# iphone - 如何在顶部设置图像避免 UIimageView 中的空间

> ID：12711133
> 
> 赞同：4
> 
> 时间：2012-10-03T14:55:02.677
> 
> 标签：iphone, objective-c, ios, uiimageview, aspect-fit

我有一个内容模式 Aspect Fit 大小为 220x155 的 UIImageView。我正在以不同的分辨率动态插入不同的图像，但都大于 UIImageView 的大小。由于内容模式设置为 Aspect Fit，图像会根据比例缩放以适合 UIImageView。

我的问题是，例如，如果 UIImageView 内的图像缩放到 220x100，我希望 UIImageView 也从 155 的高度缩小到 100，以避免元素之间的空间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:06:59.407

我编写了这个方法，以便在加载图像后获取图像视图的框架。因此，对我的要求与您的情况相同：

1）具有宽高比内容模式的图像视图 2）获取图像的确切帧（这样您可以重新定位图像视图）

希望这可以帮助：

```
- (CGRect) getFrameOfImage:(AsyncImageView *) imgView
{
    if(!imgView.loaded)
        return CGRectZero;

    CGSize imgSize      = imgView.image.size;
    CGSize frameSize    = imgView.frame.size;

    CGRect resultFrame;

    if(imgSize.width < frameSize.width && imgSize.height < frameSize.height)
    {
        resultFrame.size    = imgSize;
    }
    else
    {
        float widthRatio  = imgSize.width  / frameSize.width;
        float heightRatio = imgSize.height / frameSize.height;

        float maxRatio = MAX (widthRatio , heightRatio);
        NSLog(@"widthRatio = %.2f , heightRatio = %.2f , maxRatio = %.2f" , widthRatio , heightRatio , maxRatio);

        resultFrame.size = CGSizeMake(imgSize.width / maxRatio, imgSize.height / maxRatio);
    }

    resultFrame.origin  = CGPointMake(imgView.center.x - resultFrame.size.width/2 , imgView.center.y - resultFrame.size.height/2);

    return resultFrame;
} 
```

我在这里使用，`AsyncImageView`但它与`UIImageView`. 要记住的重要一点是在加载图像后调用此方法。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:50:55.013

它非常简单，您只需要获取图像的实际大小，可以通过

```
UIImage *image = [UIImage imageName:@""]; 
```

那么你只需要设置框架就像： -

```
imageView.frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:20:58.740

一旦 imageview 的图像设置为新图像（并因此缩放），您可以获取 imageview 内图像的高度（imageview.image.size.height）并相应地设置 imageview 的高度（帧）。

# objective-c - 创建本地对象，优先还是更好？

> ID：12711134
> 
> 赞同：0
> 
> 时间：2012-10-03T14:55:13.283
> 
> 标签：objective-c, foundation

创建一个本地对象以供以后使用是否更好，例如

```
NSDictionary *dic = [NSDictionary Dictionary]; 
```

或者

```
NSDictionary * dic = nil; 
```

是偏好还是一种比另一种更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:02:12.420

如果您稍后将使用该对象，那么您应该使用第一个选项来实例化它。如果您必须在某个 if-else 块中创建一个对象，您将在其中使用一些自定义值重新初始化它，那么第二个选项就是要走的路。

例如第一个选项：

```
NSMutableArray *arr = [NSMutableArray array];

for (int i = 0; i < 5; i++) {
  [arr addObject:@"string"];
} 
```

或者

```
NSDictionary *dictionary = nil;
BOOL flag;

if (flag) {
  dictionary = [NSDictionary dictionaryWithObject:@"string" forKey:@"myKey"];
}
else {
  NSArray *objects;
  NSArray *keys;
  dictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:09:21.723

这不是“一个更好”，而是“另一个不好”。

如果您稍后要为其分配一个新对象，请将其初始化为 nil，否则（您会通过丢失对错误创建的第一个对象的引用来泄漏内存。） - 编辑：不，您没有泄漏内存（或者因为自动释放或自动引用计数，但无论如何，这是一个额外的不需要的方法调用。）这很糟糕。

如果它是一个可变集合，请在使用它之前创建它，否则它将继续为 nil 并且基本上忽略发送给它的所有消息，这也很糟糕。

结论：这不是偏好问题 - 您必须逻辑思考并选择适合您使用它的特定目的的任何一个。

# php - 是否需要为此使用 cronjobs

> ID：12711135
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:55:15.530
> 
> 标签：php, html, mysql

当它是下午 5 点。我希望我的网站执行一些**php 代码**。（我不知道怎么做）这是它应该做的：在订阅列表中查看哪些参赛者订阅了（我知道怎么做）。随机选择一名参赛者作为第一、第二和第三名。（我知道怎么做）每 2 分钟，所以一场游戏大约需要 20 分钟，我希望每 2 分钟我可以生成一条随机消息。（我想我可以通过睡眠来做到这一点）

我想知道，我的服务器是**linux**，所以我猜我应该使用 cronjobs 吗？cronjobs 可以做我想要/需要的吗？

我认为很难理解 cronjobs。我查了一些东西，但我主要还是在黑暗中。我只是编写 php 代码并将其上传到 cronjobs 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:59:10.167

问题是：你到底想做什么？

我的意思是，如果您想在下午 5 点将您的网站切换到夜间设计，而没有人加载您的页面，那么没有人会注意到。所以这类任务最好在请求执行时完成。

另一方面，如果您希望在下午 5 点发送一些电子邮件，而没有人访问您的站点，则不会发送任何邮件。这就是 cronjobs 的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:58:25.563

我认为你应该做更多的研究，然后回来问具体的问题。Cron 作业只是定期运行的 shell 脚本。他们没有什么神秘之处。你可以有一个像这样的 cron 作业：`php /blah/blah/myScript.php`这将运行一个 php 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:58:59.213

取决于你的主机是如何设置的，设置一个 cronjob 可以像输入你希望它运行的时间（间隔与否）一样简单，然后选择脚本。

届时，他们将运行您设置的脚本。对它们进行更多研究并查看您的托管功能，有些主机不提供它们作为标准。

# c# - 无法控制文本框

> ID：12711138
> 
> 赞同：-3
> 
> 时间：2012-10-03T14:55:25.013
> 
> 标签：c#, wpf, multithreading, textbox

当我启动一个进程时，我无法控制我的文本框。

我的问题是：如何在启动进程时修改文本框？

即使我尝试在进程启动之前修改文本框，它仍然不起作用。

我在这个论坛上找到了一些答案，但解释对我来说有点难以解决我的问题。

我创建了一个小程序，它将运行一个批处理文件来进行备份。备份运行时，我无法修改我的文本框、禁用按钮等。

我已经看到这是正常的，但我不知道如何实施解决方案。我的最后一次尝试是`Dispatcher.invoke`如下所示。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        tb_Status.Text = "Ready";

    }

    public void status()
    {
       Dispatcher.Invoke(DispatcherPriority.Send, new Action( () => { tb_Status.Text = "The backup is running!"; } ) );

    }

    public void process()
    {
        try
        {            
            Process p = new Process();
            p.StartInfo.WindowStyle = ProcessWindowStyle.Minimized;
            p.StartInfo.CreateNoWindow = true;
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.FileName = "Robocopy.bat";
            p.Start();

            string output = p.StandardOutput.ReadToEnd();
            p.WaitForExit();
            tb_Output.Text = File.ReadAllText("Backup\\log.txt");
        }
        catch (Exception ex)
        {
            tb_Status.Text = ex.Message.ToString();
        }
    }

    private void Bt_Start_Click(object sender, EventArgs e)
    {
        status();
        Directory.CreateDirectory("Backup");

        process();
        tb_Status.Text = "The backup finished";
        File.Delete("Backup\\log.txt");

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:52:10.150

当我将您的 status() 方法的主体替换为：

```
Dispatcher.CurrentDispatcher.Invoke(DispatcherPriority.Send, new Action(() => { tb_Status.Text = "The backup is running!"; }));
Application.DoEvents(); 
```

它工作正常。

# ember.js - 无法响应状态 rootState.loaded.created.uncommitted 中的事件 didChangeData

> ID：12711142
> 
> 赞同：0
> 
> 时间：2012-10-03T14:55:28.697
> 
> 标签：ember.js, ember-data

创建记录以及通过适配器加载固定装置时出现此错误。当我将创建方法函数放在计时器中时，它可以正常工作。

见[小提琴](http://jsfiddle.net/lewang/tUtfm/6/)。

有任何想法吗？

# facebook - Facebook API 标记照片仅在沙盒模式下工作

> ID：12711143
> 
> 赞同：1
> 
> 时间：2012-10-03T14:55:30.553
> 
> 标签：facebook, api, tags

我在标记 facebook API 的功能上遇到问题，我会总结一下我正在创建的应用程序，以便您更好地了解我需要什么。

我正在创建一个应用程序，用户可以在其中选择他的朋友，并且该软件会生成一张包含他所有朋友姓名以及每个人标签的图像。

我在所有功能上都取得了成功：列出朋友、选择他们、生成图像并发布到时间线。但是我不能标记人，这是应用程序病毒效应的一个重要功能。

发生了一件奇怪的事情，如果我启用沙盒模式并只选择 ADMINS 或 TESTERS，代码就可以工作。但是如果我关闭沙盒模式并选择任何其他朋友，标签就不会发生任何事情。

下面我留下我用过的代码。我使用 array_push 函数将 ID 添加到 Facebook 'tags' 数组中。

脸书连接：

```
// INSERE O HEADER
include('includes/header.php');

// CONNECT // CONFIGURAÇÕES 
require('facebook_sdk/src/facebook.php');

// CONEXÃO COM O FACEBOOK
$facebook = new Facebook(array(
  'appId' => 'XXXXXXXXX,
  'secret' => 'XXXXXXXXXXXXXXXXXXXXXXXXXXX',
));

// PEGA SEU ID
$user = $facebook->getUser();

// FUNÇÕES QUE PEGA AS INFOS DO FACEBOOK
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me?fields=id,name,email,friends,photos,friends.fields(photos)');
    $input = $facebook->api('/me?fields=id,name,email,friends,photos,friends.fields(photos)');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// LINK PARA LOGOUT E REDIRECT SE FOR USUARIO
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
  header('Location: passo1.php');
}
?>            <div class="bt-face"><a href="" onClick="fbLogin(); return false;" target="_self"><img name="bt_face" id="bt_face" onMouseOver="formbaixo_ON('face');" onMouseOut="formbaixo_OFF('face');" src="images/bt-face.png" alt="Conectar no Facebook" /></a></div>
    </div>

    <!---------------- PHP / JAVA BUTTON FACEBOOK (SCOPE = PERMISSÕES)  ----------------->
    <div id="fb-root"></div>

    <script type="text/javascript">

        function fbLogin() {
            FB.login(function(response) {
                 if (response.session) {
                    //user is logged in, reload page
                    window.location.reload(true);
                  } else {
                    // user is not logged in
                  }
                }, { perms:'email,manage_friendlists,publish_stream,user_photos,friends_photos'} );
            }

                </script> 
```

标记代码：

```
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $access_token = $facebook->getAccessToken();
    $timeline = $facebook->api('/me?link');
    $timeline_link = $timeline['link'];
    $input = $facebook->api('/me?fields=id,name,email,friends,photos,friends.fields(photos)');
    //At the time of writing it is necessary to enable upload support in the Facebook SDK, you do this with the line:
    $facebook->setFileUploadSupport(true);

$album = $facebook->api(array(
'query' => "SELECT object_id FROM album WHERE owner=me() AND name='Album name' AND can_upload=1",
'method' => 'fql.query',
    ));

if (isset($album[0]['object_id'])) $album_uid = $album[0]['object_id'];
else
{
 foreach ($albums[data] as $album) {
//Test if the current album name is already in facebook
if($album[name] == 'Album name'){
$album_uid = $album[id];

}
}

if(!$album_uid){ 

}

}

    //Upload a photo to album of ID...
    $photo_details = array(
        'message'=> 'Eu criei um time...'
);
    $file = $url_image; //'images/teste2.gif'; //Example image file

$args_tags = array();

    // RETIRA BARRAS DOS ARRAYS
    $parte = explode("//", $convocados);
    $conta = count($parte);

    // EXIBE
    $espacamento_linha = 20;
    $x_convocados = 0;
    $y_convocados = 0;
    $array_facebook_tag = '';

    for($i=0; $i < ($conta-1); $i++) {

        $explode_parte = explode("-", $parte[$i]);

        $nome = str_replace("_"," ", $explode_parte[0]);
        $id = $explode_parte[1];

        $x_jogador = $x_convocados;
        $y_jogador = $y_convocados + ($i * $espacamento_linha);

        array_push($args_tags, array('tag_uid' => $explode_parte[1], 'x' => $x_jogador, 'y' => $y_jogador));

    }
$args = array(

    'message' => 'Esse é o meu time dos sonhos. Crie o seu time ',
    'image' => '@' . realpath($file),
    'tags' => $args_tags,

);

    $upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $args);
} catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

欢迎任何帮助，谢谢！

# spring - 如何从 JSF 获取远程 Windows 登录？

> ID：12711146
> 
> 赞同：1
> 
> 时间：2012-10-03T14:55:38.993
> 
> 标签：spring, jsf-2, spring-security

我想在我的用户运行我的 JSF 脚本时检索他们的 Windows 登录名。目标是避免向我的用户询问登录信息，只想让 Windows 登录抛出请求。

我试试这个[如何获取请求头、远程地址和其他 HttpServletRequest 特定的信息？](https://stackoverflow.com/questions/8579321/how-to-obtain-request-headers-remote-address-and-other-httpservletrequest-speci)但我总是用 externalContext.getRemoteUser() 得到一个空字符串。

这是否意味着网络浏览器不发送远程用户信息？我必须更改浏览器的配置吗？是否有可能获得这些信息？

谢谢，

菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:48:54.190

[Spring security kerberos 插件](http://blog.springsource.com/2009/09/28/spring-security-kerberos/)将很好地实现这一点，但您将把 spring 框架作为依赖项。我在这里还假设您正在运行一个托管安全企业，您的用户在其中对域进行身份验证。

您想要实现的目标无法通过纯 Java EE 规范完成（有人证明并非如此）。该`getRemoteUser`方法的目的是检索已通过 Webapp 容器或第三方 Web auth 框架进行身份验证的已验证用户的用户名。[请参阅此处的](http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser())规格

请参阅[此答案](https://stackoverflow.com/a/9778242/1530938)以获取更多信息

# c++ - Visual Studio 08 鼠标悬停时的功能信息显示

> ID：12711147
> 
> 赞同：6
> 
> 时间：2012-10-03T14:55:43.427
> 
> 标签：c++, visual-studio-2008, function, mouse

我只是想知道哪种格式是我必须在函数中编写注释以便在用鼠标悬停在函数上时显示的格式。

就像是

```
void myfunct(int a; char b, float c);

This function just messes with the variables with no objective 
but to show people from stack overflow what I mean.
Inputs-> a: does nothing
         b: neither this one
         c: nope 
```

所以当我在一个大项目中使用这些函数时，我不需要去寻找那个特定的函数是什么或者那个变量的含义是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:42:22.273

如果你想到像 C# 或 VB 这样显示参数和函数描述的东西，MSVC 中没有这样的东西，但微软有一种特殊的代码注释格式，如下所示，你可以使用它来生成帮助：

```
/// <summary>
/// summary of variable, function, class or any thing else
/// </summary>
/// <remarks>
/// detailed description of object
/// </remarks>
/// <param name="a">description of a</param>
/// <param name="b">description of b</param>
/// <param name="c">description of c</param>
/// <returns>describe return value of function</returns> 
```

当您编译代码时，它将生成一个 XML 文档，该文档可用于生成帮助文档。

# azure - 无法将文件（图像 n vdo）上传到 blob 存储，出现错误：强制标头缺少“x-ms-blob-type”

> ID：12711150
> 
> 赞同：4
> 
> 时间：2012-10-03T14:55:50.747
> 
> 标签：azure, upload, header, blob, required

我正在尝试将图像上传到 azure blob 存储，2 天前代码运行良好，但最近我收到了缺少强制请求标头的错误。以下是返回的错误：

```
"<?xml version=\"1.0\" encoding=\"utf-8\"?><Error><Code>MissingRequiredHeader</Code><Message>An HTTP header that's mandatory for this request is not specified.\nRequestId:93cefc02-45af-41b0-9cb5-649d485faa49\nTime:2012-10-03T09:05:58.1982699Z</Message><HeaderName>x-ms-blob-type</HeaderName></Error>" 
```

让我解释一下程序流程。我正在使用 nodejs 服务器从 azure 创建 SAS。然后，Windows 8 客户端使用该 sas 将特定文件放入 blob 存储中。

```
 function uploadFileAsync(uploadURL, file) {
        return new WinJS.Promise(function (complete, error, progress) {
            file.openAsync(Windows.Storage.FileAccessMode.read).then(function (stream) {

                makeBlob(file.contentType, stream).then(function (blob) {
                    WinJS.xhr({ url: uploadURL, type: "PUT", data: blob, headers: { "Content-type":
             file.contentType} }).then(function (res) {
                        complete(res);
                    }, function (err) {
                        error(err);
                    });
                });
            });
        });

    }

 function makeBlob(contentType, stream) {
        return new WinJS.Promise(function (c, e) {
            var blob = window.MSApp.createBlobFromRandomAccessStream(contentType, stream);
                c(blob);
        });
    } 
```

uploadURL 是来自节点服务器的 SAS。

我尝试`"x-ms-blob-type": "BlockBlob"`在 PUT 请求中添加另一个标头，但是没有用！

```
WinJS.xhr({ url: uploadURL, type: "PUT", data: blob, headers: { "Content-type":
file.contentType,  "x-ms-blob-type": "BlockBlob" } }).then(function (res) { 
```

我和我的团队尝试使用之前运行良好的我们应用程序的最基本（最旧）版本从多个安装中上传它。由此我们得出结论，在天蓝色的层面上肯定有一些变化。请指教！

更新：终于让它再次工作，这次添加标题 x-ms-blob-type 做到了。Fiddler 确实是一个很大的帮助，感谢 Gaurav ......

然而，使用 Fiddler 向我揭示了一些仍不清楚的事情。

1）以下是提琴手捕获的请求和响应

```
Request:
PUT /dummy/Content/dummy.bmp?st=2012-10-06T06%3A53%3A49Z&se=2012-10-06T07%3A53%3A49Z&sr=dummy&sig=dummydummyNQ4%3D HTTP/1.1
Accept: */*
Filename: dummy.bmp
Content-Type: image/bmp
x-ms-blob-type: BlockBlob
Method: PUT
UA-CPU: AMD64
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Win64; x64; Trident/6.0)
Host: dummy.blob.core.windows.net
Content-Length: 85414
Connection: Keep-Alive
Pragma: no-cache

Response:
HTTP/1.1 201 Created
Transfer-Encoding: chunked
Content-MD5: MdRpPr+eOePkjry2+6myQg==
Last-Modified: Sat, 06 Oct 2012 06:57:45 GMT
ETag: "dummyTag"
Server: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: dummyide-f2defa18c095
x-ms-version: 2011-08-18 
```

serviceVersion 不应该是 2012-02-12，因为我没有在任何地方指定它。所以它不应该默认为最新的。

2）根据这个页面[http://msdn.microsoft.com/en-us/library/windowsazure/dd179451.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179451.aspx) x-ms-blob-type 是一个可选的标题那么为什么它说它是强制性的？

PS：添加所有必需的标题没有帮助。它仍然说 Mandatory Header Missing (x-ms-blob-type)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:14:03.730

即使它在 2 天前为您工作，您是否可以尝试[从此页面](http://msdn.microsoft.com/en-us/library/windowsazure/dd179451.aspx)添加所需的标题（例如**x-ms-date**示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:28:16.357

我在这里寻找从 StorageFile 对象中获取 blob 或 File 的方法。你的makeblob函数给了我一个线索。谢谢。

我建议使用 makeblob 函数的替代方法。

```
function makeblob(storageFile)
{
    return MSApp.createFileFromStorageFile(storageFile);
} 
```

调用站点也需要稍作更改并调用 file.OpenAsync 可以删除。

关于 PUT blob api 调用 -

1.  建议显式放置 x-ms-version 标头
2.  您的 sas 客户端是在做其他事情，比如放置 sharedkey 授权标头等，还是公共 blob？
3.  我也在解决类似的问题 - win8 客户端、nodejs 服务器、将图像上传到 azure 存储。目前，我可以直接上传到 azure blob 工作。我正在探索使用共享访问签名来查看 win8 客户端是否可以直接与放置 blob api 对话，而不是通过 nodejs 服务器（在 nodejs 服务器上节省一些负载）。尚未通过调查。

HTH。

# android - 如何更改选项卡主机中的默认图像位置：android

> ID：12711151
> 
> 赞同：0
> 
> 时间：2012-10-03T14:55:54.660
> 
> 标签：android, android-layout, tabs, android-tabhost, android-imageview

我需要更改选项卡主机内图像的默认位置，当我们单击任何选项卡时，我想将图像显示为每个选项卡顶部的指向图像..所以现在如何更改选项卡内图像的默认位置小部件？我的显示选项卡小部件的简单 xml 代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:layout_weight="1"/>

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:layout_marginBottom="-4dp"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:47:54.217

您可以使用[setIndicator（视图视图）](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html#setIndicator%28android.view.View%29)`tabwidget`膨胀到您想要的任何视图

```
public TabHost.TabSpec setIndicator (View view)
Since: API Level 4

Specify a view as the tab indicator. 
```

例子：

**TabWidget 布局：** `tab_widget_custom.xml`

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:background="@drawable/tabwidget_selector"
    android:gravity="center"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/tabIndicatorIcon"
        android:layout_width="28dp"
        android:layout_height="28dp"
        android:layout_marginTop="2dp" />

    <TextView
        android:id="@+id/tabIndicatorText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:textColor="@color/white" />

</LinearLayout> 
```

在活动中创建一个方法返回`tabwidget`视图

```
private View getTabIndicatorView(Context context, String tag, int drawable) {
        View view = LayoutInflater.from(context).inflate(
                R.layout.tab_widget_custom, null);
        TextView tv = (TextView) view.findViewById(R.id.tabIndicatorText);
        tv.setText(tag);
        ImageView tabIndicatorIcon = (ImageView) view
                .findViewById(R.id.tabIndicatorIcon);
        tabIndicatorIcon.setBackgroundResource(drawable);
        return view;

    } 
```

使用此方法创建新的`tabwidget`

```
private void initTab() {
        Intent intent;
        TabHost.TabSpec spec;

        spec = tabHost.newTabSpec("Inbox").setIndicator(
                getTabIndicatorView(MainTabActivity.this, "Inbox",
                        R.drawable.inbox_tab_selector));

        spec.setContent(intent);
        tabHost.addTab(spec);

        } 
```

# jquery - 尽管在 window.load 函数中，JavaScript 代码仍会在页面加载时加载

> ID：12711152
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:55:56.470
> 
> 标签：jquery, onload, window-load

> **可能重复：**
> [使用 jQuery 或 ASP.NET，如何下载页面然后异步下载页面上的图像？](https://stackoverflow.com/questions/11860966/using-jquery-or-asp-net-how-to-download-page-and-then-asynchrously-download-ima)

我想通过在 window.load() 函数中实现的 JS 代码添加背景图像。基本上，我想要的是更快的页面加载，然后在呈现页面时我想将背景图像添加到我的元素中。

我使用这段代码：

```
 <script>
    $(window).load(function() {
    $('#image2').css('background-image','url(images/people-big-2.jpg)');
        $('#image3').css('background-image','url(images/people-big-3.jpg)');
        $('#image4').css('background-image','url(images/people-big-4.jpg)');
        $('#image5').css('background-image','url(images/people-big-5.jpg)');
        $('#image5').css('background-image','url(images/people-big-6.jpg)');
        $('#image7').css('background-image','url(images/people-big-7.jpg)');
        $('#image8').css('background-image','url(images/people-big-8.jpg)');
        $('#image9').css('background-image','url(images/people-big-9.jpg)');
        $('#image10').css('background-image','url(images/people-big-10.jpg)');

        $('#image11').css('background-image','url(images/places-big-1.jpg)');
        $('#image13').css('background-image','url(images/places-big-3.jpg)');
        $('#image16').css('background-image','url(images/places-big-6.jpg)');
        $('#image17').css('background-image','url(images/places-big-7.jpg)');
        $('#image18').css('background-image','url(images/places-big-8.jpg)');
        $('#image19').css('background-image','url(images/places-big-9.jpg)');
        $('#image21').css('background-image','url(images/places-big-11.jpg)');
        $('#image24').css('background-image','url(images/places-big-14.jpg)');
        $('#image25').css('background-image','url(images/places-big-15.jpg)');
        $('#image26').css('background-image','url(images/places-big-16.jpg)');

        $('#image27').css('background-image','url(images/things-big-1.jpg)');
        $('#image28').css('background-image','url(images/things-big-2.jpg)');
        $('#image29').css('background-image','url(images/things-big-3.jpg)');
        $('#image30').css('background-image','url(images/things-big-4.jpg)');
        $('#image31').css('background-image','url(images/things-big-5.jpg)');
        $('#image32').css('background-image','url(images/things-big-6.jpg)');
        $('#image33').css('background-image','url(images/things-big-7.jpg)');
        $('#image34').css('background-image','url(images/things-big-8.jpg)');
        $('#image35').css('background-image','url(images/things-big-9.jpg)');
        $('#image36').css('background-image','url(images/things-big-10.jpg)');
        $('#image37').css('background-image','url(images/things-big-11.jpg)');
        $('#image38').css('background-image','url(images/things-big-12.jpg)');
        $('#image39').css('background-image','url(images/things-big-13.jpg)');

        $('#image40').css('background-image','url(images/water-big-1.jpg)');
        $('#image41').css('background-image','url(images/water-big-2.jpg)');
        $('#image42').css('background-image','url(images/water-big-3.jpg)');
        $('#image43').css('background-image','url(images/water-big-4.jpg)');
        $('#image44').css('background-image','url(images/water-big-5.jpg)');
        $('#image45').css('background-image','url(images/water-big-6.jpg)');
        $('#image46').css('background-image','url(images/water-big-7.jpg)');
        $('#image47').css('background-image','url(images/water-big-8.jpg)');
        $('#image48').css('background-image','url(images/water-big-9.jpg)');
        $('#image49').css('background-image','url(images/water-big-10.jpg)');

            });

             </script> 
```

但这不起作用，我所有的背景图像仍然在第一次加载时加载。如何使其工作，因此它仅在页面加载后添加此代码。

我的意思是我可以把这个放在身体的点击事件中，但这只是愚蠢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:39:54.557

我建议使用预加载器，而不是一次简单地设置所有背景图像属性。

[http://jsfiddle.net/GBvp4/2/](http://jsfiddle.net/GBvp4/2/)

**HTML**

```
<div data-img="foo.jpg"></div>
<div data-img="bar.jpg"></div>
<div data-img="foobar.jpg"></div>
<div data-img="barfoo.jpg"></div>​ 
```

**JS**

```
$(document).ready(function(){
    var imagesToPreload = $("div[data-img]").map(function(){
       return $(this).attr("data-img"); 
    }).get();

    function preloader() {
        var src = imagesToPreload.shift();
        if (!src) return;
        var img = new Image();
        $(img).load(function() {
            $('div[data-img="' + src + '"]').css('background-image', 'url(' + src + ')');
            preloader();
        }).error(function() {
            $('div[data-img="' + src + '"]').css('background-image', 'url(' + src + ')');
            preloader();
        });
        img.src = src;
    }
    preloader();
}); 
```

# c - Makefile C子目录规则制作obj

> ID：12711154
> 
> 赞同：7
> 
> 时间：2012-10-03T14:55:57.640
> 
> 标签：c, compilation, compiler-errors, makefile

我正在运行一个没有问题的简单 Makefile：

```
CC=gcc
CFLAGS= -std=c99 -ggdb -Wall -I.
DEPS = hellomake.h
OBJ = hellomake.o hellofunc.o 

%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

hellomake: $(OBJ)
    gcc -o $@ $^ $(CFLAGS) 
```

这些文件位于主项目的目录中：

```
./project/Makefile
./project/hellomake.c
./project/hellomake.h 
```

然后我尝试组织文件，并放置如下内容：

```
./project/Makefile
./project/src/hellomake.c
./project/include/hellomake.h 
```

和额外的子目录目录：

```
./project/lib
./project/obj 
```

然后是新版本的Makefile：

```
IDIR =include
CC=gcc
CFLAGS= -std=c99 -ggdb -Wall -I$(IDIR)

ODIR=obj
LDIR =lib

LIBS=-lm

_DEPS = hellomake.h
DEPS = $(patsubst %,$(IDIR)/%,$(_DEPS))

_OBJ = hellomake.o hellofunc.o 
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ))

$(ODIR)/%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

hellomake: $(OBJ)
    gcc -o $@ $^ $(CFLAGS) $(LIBS)

.PHONY: clean

clean:
    rm -f $(ODIR)/*.o *~ core $(INCDIR)/*~ 
```

我正在使用 Emacs 和 gcc 编译器在 Linux 上进行编译：

```
$ gcc --version
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

然后，我在 Emacs 上运行：

```
<Esc> 
x
compile
make 
```

它给出了这样的信息：

```
"./project/src/" -*-
make: *** No rule to make target `obj/hellomake.o', needed by `hellomake'.  Stop.
Compilation exited abnormally with code 2 at Wed Oct  3 17:10:01 
```

Makefile 文件中应该缺少什么规则？

高度赞赏所有意见和建议。

* * *

感谢您的建议，已将其添加到代码中。然后编译器抱怨：

```
make -k 
make: *** No rule to make target `src/hellomake.c', needed by `obj/hellomake.o'.
make: *** No rule to make target `../include/hellomake.h', needed by `obj/hellomake.o'.
make: Target `obj/hellomake.o' not remade because of errors 
```

还有什么建议？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T15:17:03.053

修复错误`make: *** No rule to make target 'obj/hellomake.o', needed by 'hellomake'. Stop.`

更改此行：

```
$(ODIR)/%.o: %.c $(DEPS) 
```

至：

```
$(OBJ): $(ODIR)/%.o: src/%.c $(DEPS) 
```

`$(OBJ)`这将为变量中的所有对象创建一个规则。第二个参数 (' `$(ODIR)/%.o`') 从完整路径中提取文件名，以便仅将文件名传递给第三个参数 (' `src/%.c`')。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T07:52:51.270

好的。现在我正在尝试在此处找到的另一个示例 [[如何为具有 SRC、OBJ 和 BIN 子目录的 C 项目创建 Makefile？](https://stackoverflow.com/questions/7004702/how-can-i-create-a-makefile-for-c-projects-with-src-obj-and-bin-subdirectories)] 就这样：

```
TARGET   = hi.sh
CC       = gcc
# compiling flags here
CFLAGS   = -std=c99 -ggdb -Wall -I./src
TARGET   = bin/hi.sh

LINKER   = gcc -o
# linking flags here
LFLAGS   = -Wall -I. -lm

# change these to set the proper directories where each files shoould be
SRCDIR   = src
OBJDIR   = obj
BINDIR   = bin

SOURCES  := $(wildcard $(SRCDIR)/*.c)
INCLUDES := $(wildcard $(SRCDIR)/*.h)
OBJECTS  := $(SOURCES:$(SRCDIR)/%.c=$(OBJDIR)/%.o)
rm       = rm -f

$(BINDIR)/$(TARGET): $(OBJECTS)
    @$(LINKER) $(TARGETPATH)/$(TARGET) $(LFLAGS) $(OBJECTS)
    @echo "Linking complete!"

OBJECTS  := $(SOURCES:$(SRCDIR)/%.c=$(OBJDIR)/%.o)

$(OBJECTS): $(OBJDIR)/%.o : $(SRCDIR)/%.c
    $(CC) $(CFLAGS) -c $< -o $@
    @echo "Compiled "$<" successfully!"

.PHONEY: clean
clean:
    @$(rm) $(OBJECTS)
    @echo "Cleanup complete!"

.PHONEY: remove
remove: clean
    @$(rm) $(BINDIR)/$(TARGET)
    @echo "Executable removed!" 
```

这些文件组织为：

```
./project/bin/ executable
./project/ojb/*.0
./project/src/*.c and *.h
./project/Makefile 
```

编译器坚持只给出一个抱怨：

```
make -k 
/usr/bin/ld: cannot open output file /bin/hi.sh: Permission denied
collect2: ld returned 1 exit status
make: *** [bin/bin/hi.sh] Error 1 
```

非常感谢所有的意见和建议！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-09-16T09:32:22.787

我认为你应该改变这条线

```
$(ODIR)/%.o: %.c $(DEPS) 
```

改成

```
$(ODIR)/%.o : %.c $(DEPS) 
```

在 %.o 之后添加一个空格。

# c - 对函数使用宏

> ID：12711158
> 
> 赞同：0
> 
> 时间：2012-10-03T14:56:09.940
> 
> 标签：c, macros

我对函数的宏有以下问题。这一直有效，直到我添加了 print_heavyhitters 函数。我在 m61.h 中有这个：

```
#if !M61_DISABLE
#define malloc(sz)      m61_malloc((sz), __FILE__, __LINE__)
#define free(ptr)       m61_free((ptr), __FILE__, __LINE__)
#define realloc(ptr, sz)    m61_realloc((ptr), (sz), __FILE__, __LINE__)
#define calloc(nmemb, sz)   m61_calloc((nmemb), (sz), __FILE__, __LINE__)
#define print_heavyhitters(sz)  print_heavyhitters((sz), __FILE__, __LINE__)
#endif 
```

在 m61.c 中，所有这些函数都很好，除了 print_heavyhitters(sz)。我得到“ - 函数 print_heavyhitters 上的宏使用错误：

```
- Macro usage error for macro: 
 print_heavyhitters
- Syntax error 
```

m61.c：

```
#include "m61.h"
...

void *m61_malloc(size_t sz, const char *file, int line) {...}

void print_heavyhitters(size_t sz, const char *file, int line) {...} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:57:22.583

您对宏和它打算扩展的函数使用相同的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:08:30.990

就预处理器而言，对宏和函数名使用相同的名称是可以的，因为它不会递归地扩展它，但它很容易导致诸如此类的混乱错误。只要您`#undef`在正确的地方小心，您就可以这样做，但我建议使用不同的符号名称以避免混淆。

我会做这样的事情：

```
// Header file
#if !M61_DISABLE
...
#define print_heavyhitters(sz)  m61_print_heavyhitters((sz), __FILE__, __LINE__)
#endif

// Source file
#include "m61.h"

#if !M61_DISABLE
#undef print_heavyhitters
#endif

void print_heavyhitters(size_t sz)
{
    // Normal implementation
}

void m61_print_heavyhitters(size_t sz, const char *file, int line)
{
    // Debug implementation
} 
```

# c# - 以编程方式使单元格自动适应宽度和高度

> ID：12711163
> 
> 赞同：10
> 
> 时间：2012-10-03T14:56:28.823
> 
> 标签：c#, excel, office-interop

当我将数据表转换为 .csv 我的 excel 表生成如下： ![在此处输入图像描述](../Images/c34886542d4681c4cada38e15acbe79d.png)

并尝试如下：

```
sw.Write(string.Format("=\"{0}\"", drow[i].ToString())); 
```

然后我的excel表就像：

![在此处输入图像描述](../Images/d6c7bcaf79129f3833b97c1e7b5399fb.png)

请注意，单元格有 =" " 字符；

我正在尝试以编程方式自动调整每个单元格的宽度和高度。如何？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-19T07:41:22.103

尝试获取范围，然后执行 Autofit

```
Range.Rows.AutoFit();
Range.Columns.AutoFit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-19T22:57:02.880

这个问题只是帮助我解决了部分问题。我必须将数据复制到辅助工作表，然后将其发送到数据网格，但是当我这样做时，它会在数据网格中显示我的一些数据的 ######### 序列比领域本身更大。所以我过去 `**sheets.UsedRange.Columns.AutoFit();**` 每次创建新列时都会解决这个问题。哪里**sheet**是我收到的变量`**Microsoft.Office.Interop.Excel.Worksheet**`。

非常感谢你们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:51:49.677

我在另一个页面上找到了这个：

C＃

[http://www.spreadsheetgear.com/support/help/spreadsheetgear.net.3.0/SpreadsheetGear~SpreadsheetGear.IRange~AutoFit.html](http://www.spreadsheetgear.com/support/help/spreadsheetgear.net.3.0/SpreadsheetGear~SpreadsheetGear.IRange~AutoFit.html)

// 自动设置 B 列和 C 列的宽度 worksheet.Cells["B:C"].Columns.AutoFit();

// 将第 7 行到第 9 行的行高设置为自动。 worksheet.Cells["7:9"].Rows.AutoFit();

# android - Android 清单无法识别 style.xml 中列出的系统主题

> ID：12711168
> 
> 赞同：2
> 
> 时间：2012-10-03T14:56:48.327
> 
> 标签：android, xml, styles, themes, manifest

在我的清单中，应用程序主题指向 styles.xml 文件中列出的 android 样式：

```
<manifest 
xmlns:android="http://schemas.android.com/apk/res/android"
package="test.theme"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

样式.xml：

```
<resources>
    <style name="AppTheme" parent="android:Theme.Black" />
</resources> 
```

但由于某种原因，无法识别主题，而是加载了白色主题。然而，当我像这样将主题直接放入清单时，它会按预期运行：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black" > 
```

即使在一个空的默认项目中也会出现同样的问题。值 AppTheme 列在 R.java 中，因此可以正常识别文件。有没有人有任何其他想法可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:32:49.087

我最终确实解决了这个问题，最终它是一个非常简单的问题。

有一个特定于平台的 values-v14/styles.xml 文件，我应该将我的样式放入其中，因为此表中的默认值优先于我对全局 values/styles.xml 文件所做的更改。

因此，如果有人在这里遇到同样的问题，您可能需要检查是否为您的目标平台保存了正确的 styles.xml 文件。

# javascript - 如何知道 JQuery 中元素 onChange 或 onTrigger 的旧值？

> ID：12711172
> 
> 赞同：1
> 
> 时间：2012-10-03T14:56:58.977
> 
> 标签：javascript, jquery

我有一个按钮：

```
<button id="btn1">55</button> 
```

所以我将按钮值更改为 test2

```
$('#btn1').text("22"); 
```

如果按钮 oldValue 大于 newValue，我想显示背景图片。

如何从此按钮获取旧值？

“我有 100 多个按钮，它们在动态变化。”

**更新：**在它改变之前没有触发事件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:11:59.203

您可以使用 jQuery 的[.data()](http://api.jquery.com/jQuery.data/)调用并将其存储起来以便根据需要进行检索。

例如，假设您的 HTML 是：

> HTML

```
<form action="#" method="GET">
    <input type="text" value="369" />
    <button id="btnID">420</button>
</form> 
```

您可以轻松地首先收集所需的数据并将其分配给每个元素：

> 打开脚本

```
$("button") //  would simply grab all buttons, you can use whatever css selector
    .each(function(i) {
        $(this).data("prevVal", parseInt($(this).text()));
    }); 
```

然后，您可以稍后根据需要将该值与新值核对：

```
... some change function
    $('#btn1').text("22");
    if ($('#btn1').data("prevVal") > 22) {
        //  do work
    }
    $('#btn1').data("prevVal", 22) 
```

> **仅供参考**

如果您使用的是输入，它会更容易：

```
$("input").each(function(i) { $(this).data("prevVal", parseInt($(this).val())) })
    .on("change", function(e) {
        var newVal = parseInt($(this).val());
        if ($(this).data("prevVal") > newVal) {
            //  do work
        };
        $(this).data("prevVal" newVal);
    }); 
```

或者，如果您想维护一个值列表：

```
$("input").each(function(i) { 
        $(this).data("vals", new Array());
        $(this).data("vals").push(parseInt($(this).val()));
    })
    .on("change", function(e) {
        $(this).data("vals").push(parseInt($(this).val()));
        var vals = $(this).data("vals");
        if (vals[vals.length-1] > vals[vals.length-2]) {
            //  do work
        };
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:02:54.547

您需要在更改值之前对其进行比较。

例如

```
$('#btn1').text(function (index, old) {
   if (parseInt(old) > 22) {
    //change background image
   }
   return "22";
}); 
```

[小提琴](http://jsfiddle.net/xyaWW/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:01:26.800

除非您在更改之前保留它，否则您无法获得旧值。在值已经更改后会触发 change 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:00:40.213

不确定您想要旧值的位置.. 但如果它在更改文本时使用该函数来更改文本。

```
$('#btn1').text(function (index, oldvalue) {
   console.log(oldvalue);
   return "test2";
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T15:03:00.247

使用 jQuery.data() 存储与指定元素关联的数据，您只需访问同一元素即可获取它。

这是向您展示如何使用 jQuery.data()的[链接；](http://api.jquery.com/jQuery.data/)

这是使用更方便的 .data()[链接的代码](http://api.jquery.com/data/)

放

```
$("#btn1").data("oldVal",  $("#btn1").html()); 
```

得到

```
$("#btn1").data("oldVal"); 
```

[小提琴](http://jsfiddle.net/ZZhEr/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T15:03:57.137

```
 <button id="btn1">test1</button>

    ​$(document).ready(function(){
        var i=1;
        $('#btn1').click(function(){
        $(this).data('old', $.trim($(this).text())).text('btn'+(++i));
            alert( $(this).data('old'));
        });
    });​ 
```

用于[演示](http://jsfiddle.net/nanoquantumtech/8KLxZ/)

# java - 减少 H2 上的线程争用

> ID：12711173
> 
> 赞同：3
> 
> 时间：2012-10-03T14:57:05.403
> 
> 标签：java, h2

我正在尝试从多个线程在 H2 上插入时获得更好的性能。

我尝试了四种不同的设置，每一种都有 20 个并发线程进行插入：

1.  共享连接；
2.  共享连接禁用自动提交；
3.  连接池；
4.  连接池禁用自动提交。

使用选项 4 获得最佳结果：

![H2 线程争用](../Images/379a8779c9de54b163deb6c0308105c1.png)

创建的表：

```
create table foo (id int not null auto_increment primary key, name varchar(50)) 
```

插入代码（`c`是来自的连接`org.h2.jdbcx.JdbcConnectionPool`）：

```
private static void insertDataWithConnection(Connection c, String n) throws SQLException {
    c.setAutoCommit(false);
    PreparedStatement ps = c.prepareStatement("insert into foo (name) values (?)");
    ps.setString(1, n);
    ps.executeUpdate();
    ResultSet rs = ps.getGeneratedKeys();
    rs.next();
    rs.getInt(1);
    rs.close();
    c.commit();
    c.setAutoCommit(true);
    ps.close();
} 
```

连接字符串：

```
jdbc:h2:test;AUTOCOMMIT=OFF;WRITE_DELAY=300;MVCC=TRUE;LOCK_MODE=0;FILE_LOCK=SOCKET 
```

是否有可能以某种方式减少线程争用？

PS：

*   获取生成的密钥很重要。
*   将 H2 切换到另一个嵌入式数据库可能是一种选择；但是，请，答案应该集中在 H2 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:02:28.933

我们使用[了多版本并发控制](http://www.h2database.com/html/advanced.html#mvcc)和[多线程](http://www.h2database.com/html/grammar.html#set_multi_threaded)选项。它们似乎确实有助于解决一些争用问题，但它们并不是灵丹妙药。

# c# - 如何在 C# 中打开一个可点击的 Gridview Row 来打开一个 modalpopup？

> ID：12711174
> 
> 赞同：0
> 
> 时间：2012-10-03T14:57:08.733
> 
> 标签：c#, asp.net

如何在 C# 中打开一个可点击的 Gridview Row 来打开一个 modalpopup？

我有一个包含几列的gridview。每行（行的整个宽度）都需要是可点击的，onclick 会打开一个 modalpopupextender，显示一个带有行详细信息的弹出面板。

单击 ImageButton 时，我的 modalpopupextender 和面板正常工作。但是，我正在删除 ImageButton 并将其功能替换为 onClick 行。

我很感激你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:06:26.983

您应该将该`SelectionMode`属性更改为 FullRowSelect。

您可以使用该`SelectionChanged`事件来确定当前选定的行。

```
GridView.SelectedRows[0].Index 
```

将为您提供所选行的索引。您必须确保 MultiSelect 也被禁用。

所以你选择了行的索引，所以现在根据这个索引打开需要打开的任何表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:28:05.687

检查这个：

[使用 Ajax ModalPopUpExtender 编辑更新 GridView 示例](http://csharpdotnetfreak.blogspot.com/2012/07/edit-update-gridview-modalpopupextender.html)

此示例说明如何使用 C# 和 VB.NET 在 Asp.Net 中使用**Ajax ModalPopUpExtender编辑更新 GridView 行记录。**

# c# - 通过 COM4J 从 .NET 方法返回接口数组

> ID：12711177
> 
> 赞同：19
> 
> 时间：2012-10-03T14:57:12.470
> 
> 标签：c#, java, com, com-interop, com4j

如何通过 COM4J 从 C# 方法将对象数组（实现 COM 接口）返回到 Java 方法？

生成数组的示例 C# 类：

```
using System;
using System.Runtime.InteropServices;

namespace Example
{

    [ComVisible(true), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    public interface IAnimal
    {
        string Speak();
    }

    [ComVisible(true), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    public interface IFarm
    {
        [return:MarshalAs(UnmanagedType.SafeArray,
        SafeArraySubType=VarEnum.VT_UNKNOWN)]
        IAnimal[] GetAnimals();
    }

    [ComVisible(true), ClassInterface(ClassInterfaceType.None)]
    public class Farm : IFarm
    {
        public IAnimal[] GetAnimals()
        {
            return new IAnimal[] { new Cow(), new Pig() };
        }
    }

    internal class Cow: IAnimal
    {
        public string Speak()
        {
            return "Moo";
        }
    }

    internal class Pig: IAnimal
    {
        public string Speak()
        {
            return "Oink";
        }
    }
} 
```

生成的 .tlb 中的接口声明如下所示：

```
[
  odl,
  uuid(1FB5E376-E78D-3A2E-BEF3-F3C798FCF44C),
  version(1.0),
  oleautomation,
  custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "Example.IFarm")
]
interface IFarm : IUnknown
{
    HRESULT _stdcall GetAnimals([out, retval] SAFEARRAY(IUnknown*)* pRetVal);
}; 
```

Java客户端代码：

```
import com4j.*;

public class Example {
    public static void main(String[] args) {
        IFarm farm = ClassFactory.createFarm();
        Com4jObject[] animals = farm.getAnimals();

        for (Com4jObject o: animals) {
            IAnimal animal = o.queryInterface(IAnimal.class);

            if (animal != null) {
                animal.speak();
            }
        }
    }
} 
```

这可以编译，但我在运行时得到这个异常：

```
Exception in thread "main" com4j.ComException: 
    unexpected conversion type: 500 : .\invoke.cpp:470
        at com4j.Wrapper.invoke(Wrapper.java:185)
        at $Proxy5.getAnimals(Unknown Source)
        at MainClass.main(MainClass.java:7)
Caused by: com4j.ComException: unexpected conversion type: 500 : .\invoke.cpp:470
        at com4j.Native.invoke(Native Method)
        at com4j.StandardComMethod.invoke(StandardComMethod.java:35)
        at com4j.Wrapper$InvocationThunk.call(Wrapper.java:354)
        at com4j.Task.invoke(Task.java:55)
        at com4j.ComThread.run0(ComThread.java:157)
        at com4j.ComThread.run(ComThread.java:137) 
```

我尝试过的其他事情：

*   编组为 a`SAFEARRAY(VARIANT)*`而不是`SAFEARRAY(IUnknown*)*`
    （这会引发相同的异常。）
*   删除`MarshalAs`属性（`tlbimp`创建代理方法失败）

有没有办法编组数组以便 COM4J 可以将其转换为有效的 Java 数组？

或者，有没有办法在 Java 中分配一个数组并允许 .NET 方法填充它？（我试过了，但是 .NET 方法接收到数组的副本，Java 代码永远不会看到插入到副本中的对象。也许有办法覆盖它？）

* * *

**编辑**：这可能是相关的：[https](https://stackoverflow.com/a/6340144/12048) ://stackoverflow.com/a/6340144/12048 - 类似的东西似乎可以从 VBScript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:20:56.227

您是否尝试过将您的接口声明为 InterfaceIsDual 和/或 InterfaceIsIDispatch？

```
[ComVisible(true), InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IAnimal
{
... 
```

大多数 COM 互操作库都需要调度接口；但是，我不确定 COM4J。您还可以使用抽象的 COM 基类而不是接口来实现相同的目标，但如果上述更改不能让您启动并运行，我会感到惊讶。

# ruby-on-rails-3 - Rails 3 - 使用复选框删除多条记录

> ID：12711178
> 
> 赞同：13
> 
> 时间：2012-10-03T14:57:14.503
> 
> 标签：ruby-on-rails-3

如何使用 Rails 3 中的复选框删除多条记录？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-03T16:21:09.237

路线.rb：

```
 resources :blog_posts do
    collection do
      delete 'destroy_multiple'
    end
  end 
```

index.html.erb：

```
<%= form_tag destroy_multiple_blog_posts_path, method: :delete do %>
<table>
...
<td><%= check_box_tag "blog_posts[]", blog_post.id %></td>
...
</table>
<%= submit_tag "Delete selected" %>
<% end %> 
```

blog_posts_controller.rb：

```
def destroy_multiple

  BlogPost.destroy(params[:blog_posts])

  respond_to do |format|
    format.html { redirect_to blog_posts_path }
    format.json { head :no_content }
  end

end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T16:13:36.930

假设您要在表中显示一个记录列表，每个记录都有一个复选框，并且有一个删除按钮，该按钮将删除所有选中的记录。

首先，您必须为包含记录 ID 的复选框创建名称，您可以这样做：

```
<%= check_box_tag("delete[#{@thing.id}]",1) %> 
```

这将创建包含以下内容的 HTML

```
 <input id='delete[1000]' type='checkbox' value='1' name='delete[1000]'> 
```

因此，当您发布表单时，如果您选中了 ID 为 1001 和 1002 的记录框，您的帖子将包含：

```
"delete[1001]"=>"1"
"delete[1002]"=>"1" 
```

所以在你的控制器里面，你可以这样做

```
params[:delete].each do |id|
  Thing.find(id.to_i).destroy
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:00:31.843

发送控制器上所有选中元素的 id。我假设你已经发送要删除的 Foo 类的 id 被删除

```
ids = params[:ids]
Foo.where("id in (#{ids}")).destroy 
```

或者

```
ids = params[:ids].split(",")
Foo.where(id => ids).destroy 
```

使用destroy，如果你有任何依赖，不要使用delete。

# xcode - XCode 源代码控制文件所有者

> ID：12711180
> 
> 赞同：0
> 
> 时间：2012-10-03T14:57:26.783
> 
> 标签：xcode, git, xcode4

我正在使用 XCode 4.5 并使用源代码控制中的构建，我修改了一个文件但仍未提交，我尝试从另一台 iMac 访问此文件并修改相同的文件，修改没有问题。

问题是我如何才能拥有这个文件并且在我提交之前没有其他开发人员可以修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:03:24.620

使用 git？你没有。这不是 git 的工作方式，没有“文件锁”的概念，它们在分布式版本控制系统中没有意义。如果您认为避免该文件上的合并冲突很重要，您将不得不与其他开发人员进行实际交谈。

# c# - RegEx.Replace 替换整个单词并在部分单词时跳过

> ID：12711181
> 
> 赞同：1
> 
> 时间：2012-10-03T14:57:32.063
> 
> 标签：c#, .net, regex, string

我正在使用正则表达式将字符串（或 Stringbuilder）中的某些关键字替换为我选择的关键字。但是，我无法构建有效的正则表达式模式来仅替换整个单词。

例如，如果我有 InputString = "fox foxy" 并想用 "dog" 替换 "fox"，那么输出将是 "dog dogy"。

什么是仅采用“狐狸”而留下“狐狸”的有效正则表达式模式？

```
 public string Replace(string KeywordToReplace, string Replacement) /
        {

            this.Replacement = Replacement;
            this.KeywordToReplace = KeywordToReplace;

            Regex RegExHelper = new Regex(KeywordToReplace, RegexOptions.IgnoreCase);

            string Output = RegExHelper.Replace(InputString, Replacement);

            return Output;
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T15:00:21.580

正则表达式支持表示单词边界的特殊转义序列。单词字符是`[a-zA-Z0-9]`. 因此，单词边界位于属于该组的任何字符与不属于该组的字符之间。转义序列是`\b`：

```
\bfox\b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T18:24:10.977

不要忘记在你的 '\bword\b' 之前加上 '@' 符号。例如：

```
address = Regex.Replace(address, @"\bNE\b", "Northeast"); 
```

@ 符号确保转义字符反斜杠 (\) 不会被转义！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:04:46.890

你需要使用边界..

```
KeywordToReplace="\byourWord\b" 
```

# php - 为什么我的控制器没有从模型中的 db 查询将变量传递给我的视图？

> ID：12711185
> 
> 赞同：0
> 
> 时间：2012-10-03T14:57:46.487
> 
> 标签：php, codeigniter

# 模型

```
public function cart()
{

    $this->load->model('Cart_model');
    $this->load->view('head');
    $data['pricing'] = $this->Cart_model->R_products();
    $this->load->view('cart', $data);
    $this->load->view('footer');    
} 
```

# 看法

```
var_dump($data); 
```

这会产生错误“遇到PHP错误

严重性：通知

消息：未定义变量：数据

文件名：views/cart.php

行号：4"

但是，如果我插入我的`VIEW`

```
$data = $this->Cart_model->R_products(); 
```

那么一切都很好。但是为什么控制器不做它的工作呢？

# 模型

```
class Cart_model extends CI_Model {

    function R_products() 
    {

        return $this->db->get('pricing')->result();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:00:21.867

采用：

```
var_dump($pricing); 
```

在你看来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:01:08.333

```
$data['pricing'] = $this->Cart_model->R_products(); 
```

创建一个名为的变量`$pricing`，您可以在 VIEW 中使用该变量

```
var_dump($pricing); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:01:12.943

您不会在视图中获得 $data 。尝试

```
 var_dump($pricing); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:05:33.617

使用 load->view($view, $data)，CI 总是将数组拆分为单独的变量，因此 $data['pricing'] 将是 $pricing

希望能帮助到你。

# java - 从命令行在 Maven 中设置 cucumber-jvm 选项

> ID：12711189
> 
> 赞同：9
> 
> 时间：2012-10-03T14:58:01.413
> 
> 标签：java, maven, cucumber-jvm

我正在尝试为 Cucumber 设置“名称”选项，以便能够运行特定的功能或场景。

我进入了这个，

```
mvn test -DCucumber.Options--name="MyFeatureName" 
```

但它只是运行所有功能并且不会出错。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T23:21:16.017

这是Cucumber-JVM 存储库中关于如何通过传递 cucumber 选项运行 java-helloworld 示例的[片段：](https://github.com/cucumber/cucumber-jvm/tree/master/examples/java-helloworld)

```
mvn test -Dcucumber.options="--format json-pretty --glue classpath:cucumber/examples/java/helloworld src/test/resources" 
```

请记住，它将覆盖您在“RunCukesTest”上拥有的 @Cucumber.Options 注释中的所有选项。我还没有让它为我自己的测试工作，但也许这会有所帮助。

因此，您似乎需要提供运行 cucumber 所需的所有选项，包括 java 类路径以及使用“--glue”参数的代码所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:20:12.723

您的测试在单独的 JVM 中运行，因此您需要在测试插件配置中指定该系统属性（即 pom.xml 中的surefire 或故障安全插件配置）。

# php - Zend Framework：如何在目录中组装正确的 url

> ID：12711191
> 
> 赞同：0
> 
> 时间：2012-10-03T14:58:09.073
> 
> 标签：php, zend-framework, url, redirect

当站点在目录下运行时，如何强制 Zend Router 组装正确的 url？

这就是我的意思：

```
$this->view->url(array('controller' => 'controller', 'action' => 'action'), null, true) 
```

通常会返回类似于`/controller/action`在我的情况下返回的内容`/tbogdanov/brandenburg/controller/action`，因为该站点正在目录中运行`/tbogdanov/brandenburg`。

这实际上是一个很好的 URL，我对此没有任何问题。但是，当传递给`$this->_redirect()`重定向器时，只会再次添加目录。所以，最终的重定向 url 现在看起来像这样`/tbogdanov/brandenburg/tbogdanov/brandenburg/controller/action`：

现在，这是不正确的。

有没有我可能会丢失的设置？似乎 zend 知道它在目录/子目录中运行，但在某些时候，它仍然忽略它。我正在寻找一个好的通用解决方案，没有`str_replace`人！

即使在某些时候项目被移动到根目录中（这将会发生），该方法也应该正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:03:24.190

的第二个参数`_redirect()`配置选项。添加`array('prependBase' => false)`并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:09:17.487

尝试使用重定向器对象，您可以在其中有更多链接创建选项

[http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector)

```
 // Redirect to 'my-action' of 'my-controller' in the current
    // module, using the params param1 => test and param2 => test2
    $this->_redirector->gotoSimple('my-action',
                                   'my-controller',
                                   null,
                                   array('param1' => 'test',
                                         'param2' => 'test2'
                                         )
                                   ); 
```

# android - 当用户离开然后启动应用程序时执行方法

> ID：12711199
> 
> 赞同：0
> 
> 时间：2012-10-03T14:58:25.007
> 
> 标签：android

我有一个关于 android 生命周期的问题。这是我的主应用程序的**onCreate方法：**

```
@Override
public void onCreate(Bundle b) {
    super.onCreate(b);
    decode = new Decode(this);

    adjustToDimensions();
    setLoadingScreen("Zorgdossier wordt geladen...");
    initReceiver();
    startCommunicationWithServer();
} 
```

我将屏幕设置为加载屏幕，初始化广播接收器并向服务器发送消息。

现在，当我按下主页按钮并再次启动我的应用程序时，我总是想启动这个活动，所以我添加了

```
android:clearTaskOnLaunch="true" 
```

到清单。

但是现在我希望在用户再次启动应用程序时执行**startCommunicationWithServer ()。**此方法向服务器发送一条消息，另一方面，服务器发送一条我在接收器中收到的消息。通过此消息，我决定显示哪个屏幕。

我试图把它放在**onRestart**方法中：

```
 @Override
protected void onRestart() {
    Log.d("MainActivity", "activity restarted");
    startCommunicationWithServer();
    super.onRestart();
} 
```

但是这个活动在整个应用程序中会显示多次，所以每次都会执行 onRestart 方法。但我只需要在应用程序启动时执行**startCommunicationWithServer ()。**

长话短说，当用户退出并随后启动我的应用程序时，如何调用**startCommunicationWithServer () 方法？**

# python - 如何仅在 y 轴 matplotlib 上打开次要刻度

> ID：12711202
> 
> 赞同：91
> 
> 时间：2012-10-03T14:58:29.220
> 
> 标签：python, matplotlib

如何在线性与线性图上仅在 y 轴上转动小刻度？

当我使用该功能`minor_ticks_on`打开小刻度时，它们同时出现在 x 和 y 轴上。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-03T15:29:04.873

没关系，我想通了。

```
ax.tick_params(axis='x', which='minor', bottom=False) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-03T15:40:08.870

这是我在[matplotlib 文档](http://matplotlib.org/examples/pylab_examples/major_minor_demo1.html)中找到的另一种方法：

```
import numpy as np
from matplotlib import pyplot as plt
from matplotlib.ticker import MultipleLocator

a = np.arange(100)
ml = MultipleLocator(5)
plt.plot(a)
plt.axes().yaxis.set_minor_locator(ml)
plt.show() 
```

*这将仅*在 y 轴上放置次要刻度，因为默认情况下次要刻度是关闭的。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-06-04T15:32:22.783

为了澄清@emad 的回答过程，在默认位置显示次要刻度的步骤是：

1.  打开轴对象的小刻度，以便在 Matplotlib 认为合适的情况下初始化位置。
2.  关闭不需要的次要刻度。

一个最小的例子：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
plt.plot([1,2])

# Currently, there are no minor ticks,
#   so trying to make them visible would have no effect
ax.yaxis.get_ticklocs(minor=True)     # []

# Initialize minor ticks
ax.minorticks_on()

# Now minor ticks exist and are turned on for both axes

# Turn off x-axis minor ticks
ax.xaxis.set_tick_params(which='minor', bottom=False) 
```

## 替代方法

或者，我们可以使用以下命令在默认位置获取小刻度`AutoMinorLocator`：

```
import matplotlib.pyplot as plt
import matplotlib.ticker as tck

fig, ax = plt.subplots()
plt.plot([1,2])

ax.yaxis.set_minor_locator(tck.AutoMinorLocator()) 
```

## 结果

无论哪种方式，生成的绘图仅在 y 轴上有小刻度。

[![仅在 y 轴上带有小刻度的绘图](../Images/af343ac5a63e1d9fb6907f58972e1637.png)](https://i.stack.imgur.com/MEZq1.png)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-01-07T10:42:03.887

在自定义位置设置次要刻度：

```
ax.set_xticks([0, 10, 20, 30], minor=True) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-31T09:06:38.290

此外，如果您只想在实际的 y 轴上而不是在图表的左侧和右侧都需要小刻度，您可以遵循`plt.axes().yaxis.set_minor_locator(ml)`with `plt.axes().yaxis.set_tick_params(which='minor', right = 'off')`，如下所示：

```
import numpy as np
from matplotlib import pyplot as plt
from matplotlib.ticker import MultipleLocator

a = np.arange(100)
ml = MultipleLocator(5)
plt.plot(a)
plt.axes().yaxis.set_minor_locator(ml)
plt.axes().yaxis.set_tick_params(which='minor', right = 'off')
plt.show() 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-12-25T18:45:01.470

以下片段应该会有所帮助：

```
from matplotlib.ticker import MultipleLocator
ax.xaxis.set_minor_locator(MultipleLocator(#))
ax.yaxis.set_minor_locator(MultipleLocator(#))

# refers to the desired interval between minor ticks. 
```

# delphi - 获取用于打开关联应用程序的文件的文件名

> ID：12711204
> 
> 赞同：3
> 
> 时间：2012-10-03T14:58:30.307
> 
> 标签：delphi

我想编写一个小应用程序，对简单文本文件的内容进行一些数据操作。

我只想能够右键单击这样的文件，在 Windows 中选择“打开方式”，选择我的应用程序，然后应用程序打开，解析文件，执行一些操作并立即再次关闭。

问题：当我的应用启动时，如何获取触发应用启动的文件名？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T15:06:27.600

您将文件作为参数号 1获取。
您可以使用函数获取它`ParamStr(1)`。

在这里查看更多详细信息： http:
[//www.delphibasics.co.uk/RTL.asp?Name=ParamStr](http://www.delphibasics.co.uk/RTL.asp?Name=ParamStr)

供您参考，`ParamStr(0)`是您的 EXE 应用程序的文件名（包括完整路径）。

# ios - 如何从开源 Xcode 项目中排除密钥？

> ID：12711205
> 
> 赞同：5
> 
> 时间：2012-10-03T14:58:30.243
> 
> 标签：ios, xcode

我正在开发一个使用 Facebook SDK 与 Facebook 连接的 iPhone 应用程序。SDK 要求我的代码在调用 SDK 中的代码时设置一个 app ID（app ID 是在 Facebook 注册的）。我想开源这个项目，但显然我不希望我的应用 ID 被其他人使用。如何设置项目以便我可以使用我的应用 ID 构建它，但其他人也可以使用他们自己的构建项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:23:46.123

假设您在应用的 plist 中添加 AppID 和 Secret，您可以修改 Release 构建的构建方案并添加可以运行脚本执行以下操作的“构建后命令”：

```
echo -n ${TARGET_BUILD_DIR}/${INFOPLIST_PATH} | xargs -0 /usr/libexec/PlistBuddy -c "Set :<Your Facebook App ID Key> YOUR_APP_ID_HERE"
echo -n ${TARGET_BUILD_DIR}/${INFOPLIST_PATH} | xargs -0 /usr/libexec/PlistBuddy -c "Set :<Your Facebook Secret Key> YOUR_APP_SECRET_HERE" 
```

这会将这些 plist 条目的值更改为某个通用值。

[这是对我正在谈论的内容的参考](http://blog.manbolo.com/2012/04/25/xcode-4-vs-me-running-custom-scripts-after-build)。随意调整。

# javascript - 使用 D3.js 的层次力图

> ID：12711207
> 
> 赞同：4
> 
> 时间：2012-10-03T14:58:34.697
> 
> 标签：javascript, d3.js, hierarchy, force-layout

我想使用 D3.js 生成一个层次力图 - 一个力导向图，它允许您通过单击将图形扩展到子级（显示子级之间的关系）的节点来导航树状结构。节点可以通过两种方式相互关联，父节点或兄弟节点。父关系表明节点“属于”它们的父节点。

作为一个起点，我查看了力集群示例：[https](https://github.com/mbostock/d3/blob/master/examples/force/force-cluster.html) ://github.com/mbostock/d3/blob/master/examples/force/force-cluster.html ，并包括了上面的关系，但我不知道了解如何只渲染扩展的集群而不是整个网络（见下图）。

```
JSON data:
{"nodes":
        [
        {"name":"Person 0","group":"Person 0"},
        {"name":"Person 1","group":"Person 1"},
        {"name":"Person 2","group":"Person 1"},
        {"name":"Person 3","group":"Person 1"},     
        {"name":"Person 4","group":"Person 3"},
        {"name":"Person 5","group":"Person 3"}  
        ],
"links":
        [
        {"source":1,"target":0,"type":"sibling"},
        {"source":2,"target":1,"type":"parent"},
        {"source":3,"target":1,"type":"parent"},
        {"source":3,"target":2,"type":"sibling"},
        {"source":4,"target":3,"type":"parent"},
        {"source":5,"target":3,"type":"parent"},
        {"source":4,"target":5,"type":"sibling"}
        ]
} 
```

![扩展集群](../Images/412ca818677c137717bb20906fc40483.png)

上图：力图，其中红色链接表示兄弟关系。

也可以将“孩子”安排为 JSON 中的孩子，而不是使用父“类型”：

```
{
"nodes": [
    {
        "name": "Person 0",
    },
    {
        "name": "Person 1",
        "children": [
            {
                "name": "Person 2",
            },
            {
.
.
.
"links": [
    {
        "source": 1,
        "target": 0
    },
.
. 
```

但是，如何在跟踪子节点之间的关系的同时结合树结构？

一个富有想象力的树状结构如下所示： ![树](../Images/305399df5327e48bd851c84325c1073b.png)

下半部分表示所需的视觉布局（类似于上图中的功能）。

您对如何进行有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T12:40:53.760

隐含地，具有相同直接父节点的所有节点都是兄弟节点。因此，您应该不需要额外跟踪节点是否是彼此的兄弟姐妹。

如果您碰巧有仅与其他兄弟节点相关但没有父节点的节点（例如您示例中的 Person 0 和 Person 1 之间的关系），则树布局不是正确的选择。相反，您可能想尝试强制布局。

# javascript - web sql中的嵌套选择查询

> ID：12711210
> 
> 赞同：1
> 
> 时间：2012-10-03T14:58:51.820
> 
> 标签：javascript, html, web-sql

我无法找到一个明确的答案，异步 web sql 真的让我很困惑。如何使用基于父 SELECT 查询的数据执行 SELECT 查询？这是我认为有效但实际上不是的片段：

```
db.transaction(function(tx){
    tx.executeSql('SELECT a, b FROM  mytable WHERE c=5', [], function(tx,results) {
        var i = results.rows.length;
        while(i--){
            var votes = results.rows.item(i).a;
            var marker = results.rows.item(i).b;
            tx.executeSql('SELECT a FROM mytable WHERE c=?', [marker], function(tx,aresults) {
                if(!aresults){
                    //do something
                } else {
                    myScore += (votes*100)/aresults.rows.item(0).a;
                }
            }(marker));
        }
        nextFunction();
    });
}, function(){onError}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-25T03:13:01.723

尝试这个：

```
function firstQuery(){

  db.transaction(function(tx){
      tx.executeSql('SELECT a, b FROM  mytable WHERE c=5', [], 
        function(tx,results) {
          var i = results.rows.length;
          while(i--){
               secondQuery(results.rows[i]);
          }       
      });
  }, function(){onError});

}

function secondQuery(responseQuery){

    var votes = responseQuery.a;
    var marker = responseQuery.b;

      db.transaction(function(tx){
      tx.executeSql('SELECT a FROM mytable WHERE c=?', [marker], function(tx,aresults) {
          if(!aresults){
              //do something
          } else {
              myScore += (votes*100)/aresults.rows.item(0).a;
          }
      }(marker));
    }, function(){onError});
} 
```

# python - 在简单的 DataFrame 中接收“索引的多个错误值”

> ID：12711211
> 
> 赞同：1
> 
> 时间：2012-10-03T14:58:52.667
> 
> 标签：python, pandas, dataframe

我有几个要输入数据框的列表：

```
 mydates = [0, 6, 15, 21, 30, 37, 45, 53]
    prices = [30.4, 32.5, 31.7, 31.2, 32.7, 34.1, 35.8, 37.8]
    mylist = [6.907894736842111, -2.461538461538464, -1.5772870662460567,4.807692307692319,
    4.2813455657492305, 4.985337243401747, 5.5865921787709505, -3.9682539682539684] 
```

我进入

```
 df = DataFrame(prices, mylist, index=mydates, columns=['Prices', 'Percentage
    s']) 
```

并收到此错误：

```
 Traceback (most recent call last):
      File "<input>", line 1, in <module>
    TypeError: __init__() got multiple values for keyword argument 'index' 
```

虽然如果我输入这个一切正常。

```
 df = DataFrame(prices, index=mydates, columns=['Prices']) 
```

有人可以告诉我如何解决问题吗？.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:09:03.960

```
In [604]: d = {'dates' : mydates, 'prices': prices, 'mylist': mylist}

In [605]: df= DataFrame(d)

In [606]: print df
   dates    mylist  prices
0      0  6.907895    30.4
1      6 -2.461538    32.5
2     15 -1.577287    31.7
3     21  4.807692    31.2
4     30  4.281346    32.7
5     37  4.985337    34.1
6     45  5.586592    35.8
7     53 -3.968254    37.8 
```

编辑：

正如 Wouter Overmeire 指出的那样，您可以使用`DataFrame({'prices': prices, 'mylist': mylist}, index=columnanme)`按列索引。

# android - 如何更改 Android DatePicker 对话框的“分隔符”颜色

> ID：12711212
> 
> 赞同：10
> 
> 时间：2012-10-03T14:58:55.840
> 
> 标签：android, datepicker, android-4.0-ice-cream-sandwich

我正在尝试创建一个自定义对话框，基本上我正在使用`DatePickerDialog.THEME_HOLO_DARK`，但我想更改“分隔线”颜色和文本颜色。

![在此处输入图像描述](../Images/3819575e5a53bfaa2b6c69086c4dcba0.png)

我想将蓝线和文本颜色更改为红色。

提前致谢！

编辑：

使用此代码：

```
<style name="testo" parent="@android:style/Widget.DeviceDefault.DatePicker">
    <item name="android:divider">@drawable/dialog_divider</item>
</style> 
```

这就是我得到的： ![在此处输入图像描述](../Images/e020386bc68c57ac4d5725f321de27ec.png)

分隔线的drawable基本上是一条红线..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:07:32.270

您必须创建自己的主题来扩展 THEME_HOLO_DARK。[更改android应用程序的基本主题颜色](https://stackoverflow.com/questions/9688724/change-basic-theme-color-of-android-application)

编辑：尝试这样的事情

```
<style name="testo" parent="@android:style/Widget.DeviceDefault.DatePicker">
    <item name="android:divider">@drawable/MyDivider</item>
</style> 
```

并将对主题的引用传递给[构造函数](http://developer.android.com/reference/android/app/DatePickerDialog.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T11:46:59.443

将此项目添加到您的主题中

```
<item name="numberPickerStyle">@style/MyApp.NumberPicker</item> 
```

以这种风格设置自定义分隔线颜色

```
<style name="MyApp.NumberPicker" parent="Widget.Holo.NumberPicker">
   <item name="selectionDivider">@color/white</item>
</style> 
```

编辑：仅在 HoloEverywhere 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T19:49:41.923

我知道这是一个迟到的回复，但我想与那些经历过或将来会遇到这个问题的人分享我的发现。

我搜索了很多地方，我找到的唯一解决方案是 SimonVT 的 Pickers。

实现该库后，更改颜色非常容易。在 numberpicker 中，该库使用可以简单地替换为所需设计的图像。

此示例具有三个选择器：NumberPicker、DatePicker 和 TimerPicker。

[https://github.com/rodrigobusata/android-pickers](https://github.com/rodrigobusata/android-pickers)

希望对你有帮助。

**更新**

上面的链接已经不存在了，现在你必须使用 Material Design [https://github.com/wdullaer/MaterialDateTimePicker](https://github.com/wdullaer/MaterialDateTimePicker)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-10T07:00:21.770

```
 fun applyStyLing(timePickerDialog: DatePickerDialog,context: Context) {

        try {
            var dividerId = timePickerDialog.getContext().getResources().getIdentifier("titleDivider", "id", "android")
            val divider = timePickerDialog.findViewById<View>(dividerId)
            divider.setBackgroundColor(ContextCompat.getColor(context, R.color.colorDatePicker))

            var dividerId1 = timePickerDialog.getContext().getResources().getIdentifier("alertTitle", "id", "android")
            val divider1 = timePickerDialog.findViewById<TextView>(dividerId1)
            divider1.setTextColor(ContextCompat.getColor(context, R.color.colorDatePicker))

            val system = Resources.getSystem()
            val hourNumberPickerId = system.getIdentifier("day", "id", "android")
            val minuteNumberPickerId = system.getIdentifier("month", "id", "android")
            val ampmNumberPickerId = system.getIdentifier("year", "id", "android")

            val hourNumberPicker = timePickerDialog.findViewById<View>(hourNumberPickerId) as NumberPicker
            val minuteNumberPicker = timePickerDialog.findViewById<View>(minuteNumberPickerId) as NumberPicker
            val ampmNumberPicker = timePickerDialog.findViewById<View>(ampmNumberPickerId) as NumberPicker

            setNumberPickerDividerColour(hourNumberPicker,context)
            setNumberPickerDividerColour(minuteNumberPicker,context)
            setNumberPickerDividerColour(ampmNumberPicker,context)

        }catch (e:Exception)
        {
            e.printStackTrace()
        }

    }

private fun setNumberPickerDividerColour(number_picker: NumberPicker,context: Context) {
        val count = number_picker.childCount

        for (i in 0 until count) {

            try {
                val dividerField = number_picker.javaClass.getDeclaredField("mSelectionDivider")
                dividerField.isAccessible = true
                val colorDrawable = ColorDrawable(context.getResources().getColor(R.color.colorDatePicker))
                dividerField.set(number_picker, colorDrawable)

                number_picker.invalidate()
            } catch (e: NoSuchFieldException) {
                Log.w("setNumberPickerTxtClr", e)
            } catch (e: IllegalAccessException) {
                Log.w("setNumberPickerTxtClr", e)
            } catch (e: IllegalArgumentException) {
                Log.w("setNumberPickerTxtClr", e)
            }

        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-08T06:13:52.723

请使用以下代码

这里，dialog 是 DatePickerDialog 的一个对象。

```
 int dividerId = dialog.getContext().getResources().getIdentifier
            ("android:id/titleDivider", null, null);
    View divider = dialog.findViewById(dividerId);
    divider.setBackgroundColor(getResources().getColor(R.color.red));

    int textViewId = dialog.getContext().getResources().getIdentifier
            ("android:id/alertTitle", null, null);
    TextView tv = (TextView) dialog.findViewById(textViewId);
    tv.setTextColor(getResources().getColor(R.color.red)); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-02T23:38:53.040

you can change the text color by doing something like

`<style name="testo" parent="@android:style/Widget.DeviceDefault.DatePicker">`

`<item name="android:textColor">#FF0000</item>`

`</style>`

Did you ever figure out how to change the divider color? I'm trying to do the same thing and can't really find anything at the moment.

# php - echo 中的 PHP 第三语句...？语法问题

> ID：12711222
> 
> 赞同：1
> 
> 时间：2012-10-03T14:59:23.633
> 
> 标签：php, if-statement, echo

只是对此语法有问题，有可能吗？

```
echo '<li><a href="' .$item->url. '" ' .($item->target != '') ? "target=$item->target" : "". '>' .$item->post_title. '</a></li>'; 
```

我不确定应该在哪里连接以及如何回显 if 语句结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:01:18.023

运算符优先级可能很难看，尤其是在 PHP 中，`?:`运算符的规则与大多数其他语言不匹配（它在 PHP 中是左关联的，而在其他任何地方都是右关联的，尽管这不太可能是您的问题，因为您只在此处使用运算符一次）。

如有疑问，请使用括号明确您的意图：

```
echo '<li><a href="' .$item->url. '" ' . (
    ($item->target != '')
    ? "target=$item->target"
    : ""
). '>' .$item->post_title. '</a></li>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:01:51.343

您需要使用大括号，因为 php 无法识别 tern 的结尾。同上。

```
echo '<li><a href="' .$item->url. '" ' . (
  ($item->target != '')
  ? "target=$item->target"
  : ("". '>' .$item->post_title. '</a></li>')
); 
```

# javascript - 平滑/快速加载静态网站部分

> ID：12711224
> 
> 赞同：0
> 
> 时间：2012-10-03T14:59:35.130
> 
> 标签：javascript, ajax, web

我正在写一个小网站，其中有几个非常相似的页面。大多数时候，只有一个 div 的内容不同。导航、标题等保持不变。起初，我通过一个 html 文件和这样的 javascript 代码（由按钮单击事件触发）实现了这一点：

```
 $.get("content/text1.html", function(data) {
    $("#content").html(data);
}); 
```

这非常顺利，但问题是地址栏中的 url 不会随着这些请求而改变。那么用户是否不可能链接到某些页面。我知道#-urls 是可能的，但我想要这样的网址：

> example.com/talks/foo/bar

而不是一些解决方法。

为了实现这种行为，我将代码更改为许多 html 文件，每个文件都这样做：

```
$.get("content/header.html", function(data) {
    $("#header").html(data);
});
$.get("content/footer.html", function(data) {
    $("#footer").html(data);
}); 
```

所以我得到了我的好网址，但现在是问题，整个事情不是很顺利。您对每个新页面的认识都很差，因为页眉和页脚在正文之后几毫秒。

[我的问题是：像github](https://github.com/)这样的流行网站如何同时实现两者？如果您单击顶部栏中的“探索”或“博客”，所有“静态”内容似乎都会永久保留在那里。鉴于他们的网址，我认为他们没有通过 ajax 实现这一点。

有什么我错过的吗？

问候

# java - 这个错误是什么意思：方法...不适用于参数

> ID：12711225
> 
> 赞同：1
> 
> 时间：2012-10-03T14:59:36.347
> 
> 标签：java, gwt

我是新手，我无法弄清楚这个错误是什么意思。

我试过谷歌搜索，但对我的发现没有任何意义。

我需要与 API 交互以将票证发布到远程服务器，并且我从我正在关注的教程中获得了此代码。

在这段代码中，我收到了这个错误：

> HelpDeskTestService 类型中的方法 postToRemoteServer(String) 不适用于参数 (String, new AsyncCallback(){})

```
sendButton.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            HelpDeskTestService.postToRemoteServer(
                    "http://xx.xx.xx.xx/sdpapi/request/", 
                    new AsyncCallback<String>() {
                        @Override
                        public void onFailure(Throwable caught)  {
                            Window.alert("Failure getting XML through proxy");
                        }

                        @Override
                        public void onSuccess(String result) {
                            processXML(result);
                        }
                    });
        }
    }); 
```

这是来自同步接口的代码：

```
public String postToRemoteServer(final String serviceUrl)
    throws HelpDeskTestException; 
```

这是来自异步接口的代码：

```
void postToRemoteServer(
        final String serviceUrl,
        AsyncCallback<String> callback); 
```

最后，这是实现类的代码：

```
@Override
public String postToRemoteServer(String serviceUrl)
        throws HelpDeskTestException {

    try {
        //dividing url into host: http://some.server
        //path: a/path/in/it
        //and parameters: this=that&those=others

        int hostStart= serviceUrl.indexOf("//");

        int pathStart= serviceUrl.substring(hostStart + 2).indexOf("/");

        int parameterStart= serviceUrl.substring(hostStart + 2 + pathStart).indexOf("?");

        final String serverHost= serviceUrl.substring(0, hostStart + pathStart + 2);

        final String serverPath= serviceUrl.substring(hostStart + 3, 
                hostStart + pathStart + 2 + parameterStart);

        final String serverParameters= serviceUrl.substring(hostStart + pathStart + 3 + parameterStart);

        final  URL url = new URL(serverHost);

        final URLConnection connection= url.openConnection();
        connection.setDoOutput(true);

        final OutputStreamWriter out= new OutputStreamWriter(connection.getOutputStream());

        final BufferedReader in= new BufferedReader(new InputStreamReader(
                connection.getInputStream()));

        out.write("POST " + serverPath + "\r\n");
        out.write("Host: " + serverHost + "\r\n");
        out.write("Accept-Encoding: identity\r\n");
        out.write("Connection: close\r\n");
        out.write("Content-Type: application/x-www-form-urlencoded\r\n");
        out.write("Content-Length: " + serverParameters.length() + "\r\n\r\n" +
            serverParameters + "\r\n");

        String result = "";
        String inputLine;

        while ((inputLine=in.readLine()) != null) {
            result+= inputLine;
        }

        in.close();
        out.close();

        return result;

    }  catch (final Exception e) {
        throw new HelpDeskTestException();

    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:09:32.490

调用服务时需要使用异步接口。您可以使用 GWT.create() 创建它的一个实例。假设您的异步接口称为“HelpDeskTestServiceAsync”，您将执行以下操作：

```
HelpDeskTestServiceAsync asyncService = GWT.create(HelpDeskTestService.class);

asyncService.postToRemoteServer(
                "http://xx.xx.xx.xx/sdpapi/request/", 
                new AsyncCallback<String>() {
                    @Override
                    public void onFailure(Throwable caught)  {
                        Window.alert("Failure getting XML through proxy");
                    }

                    @Override
                    public void onSuccess(String result) {
                        processXML(result);
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:02:04.160

该错误意味着参数表达式的类型与方法的形式参数的类型不匹配。

> “HelpDeskTestService 类型中的方法 postToRemoteServer(String) 不适用于参数 (String, new AsyncCallback(){})”

它是说您正在尝试`postToRemoteServer`使用两个参数，但它被声明为采用一个参数。

目前尚不完全清楚为什么会发生这种情况，但*看起来*您正在调用静态方法，如果是这种情况，接口就没有实际意义。

或者，如果`HelpDeskTestService`是一个变量*（tsk, tsk ...违反代码风格... tsk, tsk）*那么问题可能出在变量声明的类型上。如果您已将其声明为`Synchronous`，那么该语言将不允许您使用`Asynchronous`类型中的所有方法...除非`Synchronous`extends `Asynchronous`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:02:15.237

正如它所说的，你用一个 String 和一个 ASyncCallback 类型来调用它。它只需要一个字符串来调用。有关其使用的更多信息，请参阅有关该方法的 API 文档或“HelpDeskTestService”类。

# c++ - CodeLite 格式化

> ID：12711230
> 
> 赞同：12
> 
> 时间：2012-10-03T15:00:07.903
> 
> 标签：c++, codelite

我使用[CodeLite](https://en.wikipedia.org/wiki/CodeLite) IDE 进行 C++ 开发，但我没有找到任何方法来选择 -> 正确格式化文本。

这个：

```
if(1 == 1){
return 1;
} 
```

应格式化为：

```
if(1 == 1){
   return 1;
} 
```

有没有办法选择一段代码，然后使用 CodeLite IDE 对其进行格式化？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T15:05:58.333

转到菜单*插件*→*源代码格式化*程序→*格式化当前源*或只需按`Ctrl`+ `I`。

如果要设置格式首选项，请选择菜单*插件*→*源代码格式化*程序→*选项...*

# google-apps-script - Web App 代码及其 scriptDb 数据的安全性如何？

> ID：12711231
> 
> 赞同：1
> 
> 时间：2012-10-03T15:00:14.033
> 
> 标签：google-apps-script

我们有一个用 Apps Script 编写的 Web 应用程序（使用每个用户域上的电子表格）并使用 ScriptDb（只是为了存储来自每个用户域的一些特定信息。）

这是访问每个部分的场景：

1.  脚本项目（代码）：“只对我私有”
2.  发布的网络应用程序：“以访问网络应用程序的用户身份执行应用程序”和“任何人都可以访问该应用程序”
3.  此网络应用程序将在 Chrome 网上应用店中注册

这些是我在获取信息方面的问题：

1.  这个网络应用程序的代码有多安全？（谁可以访问？）
2.  存储在 ScriptDb 上的数据有多安全？（谁可以访问？）
3.  有人侵入 Script 代码或 ScriptDb 数据的可能性有多大？

谢谢，福斯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:56:09.233

我尽我所能给你我最了解的东西，如果我错了，请随时纠正我。

ScriptDB 与您的帐户相关联，如果您的代码仅与您共享，则只有您能够访问它，如果应用程序以访问 Web 应用程序的用户身份执行，则只有您能够访问它和 IIRC，它将是该用户的 scriptDB 和与你无关。

因此，如果您问您的代码有多安全，我认为访问所有代码的方法之一是当您的帐户被黑客入侵时，该人将能够访问您的所有代码和 ScriptDB 中的数据存储。至于有人侵入 Script 代码或 ScriptDB 数据的机会，我认为如果你保证你的帐户安全的话，这是相当低的。

# mysql - 在非对象上调用成员函数 create()

> ID：12711233
> 
> 赞同：0
> 
> 时间：2012-10-03T15:00:19.427
> 
> 标签：mysql, cakephp, controller

我正在尝试在名为`tutors`. 我这样命名它是为了遵循 CakePHP 的约定。

```
$codigoAlumnoNuevo = $this->Persona->id;
$tipoPersona = $this->request->data('TipoPersona'); # Just grabbing a POSTED value.

switch ($tipoPersona) {
    case '0': # Es Tutor
        $this->Tutor->create();
        $this->Tutor->PersonaId = $codigoAlumnoNuevo;
        $this->Tutor->save();
        die("Saved record");
        break;

    case '1': # Es Alumno
        $this->Tutor->create();
        $this->Tutor->PersonaId = $codigoAlumnoNuevo;
        $this->Tutor->save();
        die("Saved record");
    break;

    case '2': # Es Coordinador de Programa
        $this->Tutor->create();
        $this->Tutor->PersonaId = $codigoAlumnoNuevo;
        $this->Tutor->save();
        die("Saved record");
    break;

    default:
        break;
} 
```

尝试运行此代码时，会触发以下异常：

> 在非对象上调用成员函数 create()

如果我尝试这个，我可以看到它`$this->Tutor`是 NULL：

```
var_dump($this->Tutor); 
```

但是在同一个控制器中，我可以调用`$this->Persona->create();`就好了；`$this->Persona`不为空。为什么是这样？为什么 Persona 可用但 Tutor 不可用？

是命名的事情吗？

这是我的数据库模型：

![在此处输入图像描述](../Images/1b710a3f9c4c6a2d9dbdd29519f6b3b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:20:26.353

`PersonasController`默认情况下，您只能从您那里访问`Persona`模型。

如果你想在`Tutor`模型上运行创建，你需要添加`var $uses = array('Persona','Tutor');`到你`PersonasController.php`喜欢的开头：

```
<?php
class PersonasController extends AppController {
    var $uses = array('Persona','Tutor');

    ....functions.....

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:30:57.977

如果您在模型之间和模型中定义了`hasMany`关系，则可以访问模型，并且不需要约瑟夫回答中的数组。`Persona``Tutor``Persona``Tutor``$this->Persona->Tutor->create()``$uses`

# google-analytics - 谷歌分析标签管理器失败

> ID：12711240
> 
> 赞同：0
> 
> 时间：2012-10-03T15:00:27.190
> 
> 标签：google-analytics, google-tag-manager

谷歌最近发布了一项新功能“标签管理器”

*   [https://developers.google.com/tag-manager/devguide#migration](https://developers.google.com/tag-manager/devguide#migration)
*   [https://developers.google.com/tag-manager/reference#varnames](https://developers.google.com/tag-manager/reference#varnames)

您知道任何成功案例并提供成功的网站 html 示例吗？

我无法使事件工作。这是我的网站，但它失败了。你可以在FF中按Ctrl+U查看里面有哪些代码。 [http://landkey.org](http://landkey.org) 当我单击应该发送此事件的测试按钮时：.....

```
input type="button" onclick="dataLayer.push({'bubbles_event' : 'ANCHOR_.....  '});  alert('clicking'); " value="bubbles" 
```

.....“网络”窗格中没有发送任何内容。在“标签管理器”/Container/Tags 的仪表板中，我设置了一个标签，TrackType 作为“事件”设置事件规则，并仔细检查了几次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:39:34.463

我想知道您是否遇到了“事件”命名空间发生冲突的问题。我们已经自动创建了“事件”规则/宏类型以直接映射到 dataLayer.push({ 'event' : event_name })。这仅在您使用“事件”作为键时才有效。

在您的代码示例中，您似乎为事件选择了不同的名称，称为“bubble_event”。我对您的最简单建议是在您的数据层中将“bubble_event”重命名为“event”。这应该会奏效。

如果您附加到“bubble_event”，则可以创建数据层变量类型的宏，其中数据层变量名称为“bubble_event”。然后您可以创建一个规则，其中 Bubble Event = 您正在寻找的任何值。但是，最好的做法是尽可能只使用“事件”语法，因为这样您就可以合并所有事件。

试一试，如果您仍然遇到问题，请告诉我。

干杯，劳拉

# java - 需要关于字符串搜索设计的建议

> ID：12711242
> 
> 赞同：0
> 
> 时间：2012-10-03T15:00:31.620
> 
> 标签：java, sql, string, search, memcached

这是我的情况。我有一个包含以下数据的表格。

```
Property_name Property_value
--------------------------------------
prob_name_1   ,sdfsdf@ce.o,jfgj@ce.o, 
prob_name_2   ,sdfsf@ce.o,dsf@ce.o, 
prob_name_3   ,sdfsfss@ce.o,sdfsdf@ce.o, 
.              .
.              .
.              .
prob_name_n    ,sdfsfss@ce.o,sdfsdf@ce.o, 
```

此表中可以有很多行，并且电子邮件将以逗号分隔存储。Property_value 将保持数据更新的最大值（2k）。我在最后一个属性中没有“n”，如果需要，我需要查找。

我的查询是，我需要在此数据中搜索电子邮件。由于我们使用 memcache 工具来缓存这些数据（它存储在 中`Hashtable<String, String>`），所以我们不使用查询。我的想法很少。请给我推荐一个更好的。

1.  HashMap - property_name 和 property 值的键对值。迭代它并检查值直到找到它。
2.  迭代所有行并搜索直到找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:08:34.550

由于电子邮件地址不能按数字排序，因此您的第二个选择将是您的选择。如果你说的是你需要找到给定property_value的property_name，那就是。

如果您的列表可以以任何方式排序，则可以使用二进制搜索方法。但是，排序电子邮件地址的唯一方法是按字母顺序排列，我认为这将花费更长的时间。

# android - 服务器证书扩展和与 Android 的接口

> ID：12711248
> 
> 赞同：0
> 
> 时间：2012-10-03T15:00:49.417
> 
> 标签：android, ssl, https, ssl-certificate

我们的 Android 应用程序与使用证书链的服务器交互，证书由 Verisign 颁发。到目前为止，我们能够与此端点建立 SSL 会话。此 Verisign 证书将于下个月到期。

问题： 1\. 服务器站点是否应该从 Verisign 获得重新颁发的新证书并且一切正常？2\. 原证书的有效期可以延长而不发新的吗？

可以做些什么来确保平稳过渡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:04:29.620

您需要获得新证书，但不需要由 Verisign 签发。 *任何*受信任的机构都可以签署证书。

包含受信任颁发者的密钥库在这里：

```
/system/etc/security/cacerts.bks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:06:26.230

您不能扩展证书，但您不应该这样做。只要服务器证书是由您信任的 CA 颁发的（不是 VeriSign），事情就应该继续工作。不过，您可能希望尽快更换证书，因为人们的时钟可能会延迟几天。

# assembly - 在汇编语言中用“a”代替空格

> ID：12711253
> 
> 赞同：0
> 
> 时间：2012-10-03T15:01:04.210
> 
> 标签：assembly, character, ascii

我正在编写一个将小写字母大写的代码。该程序就像一个魅力，但它在字符串中出现一个空格，程序而不是一个空格，插入“a”。我正在尝试使用其 32 的 ascii 代码插入一个空格。这是破坏程序的代码块。

```
WhiteSpace2:
sb $t1,New($t0)
addi $t0,$t0,1
j Small 
```

*   $t1 包含 White space 的 ascii 值
*   $t0 是 String 中字节的偏移量。
*   新的是字符串标签

该程序是用汇编语言编写的。有人告诉我为什么我得到“a”而不是空白。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:53:53.653

我并没有真正看到您要在代码中完成什么。

要制作一个大写的程序，您必须查看字符是否在 asci 'a' 和 'z' 之间，如果是，则减去一个常数值（如果我记得的话，是 32）。对于任何其他字符，只需复制它。

# c# - 无法将 DialogResult 隐式转换为 MessageBoxResult

> ID：12711257
> 
> 赞同：2
> 
> 时间：2012-10-03T15:01:14.130
> 
> 标签：c#, wpf

我收到错误“无法将类型 'System.Windows.Forms.DialogResult' 隐式转换为 System.Windows.MessageBoxResult”

起初我以为这只是一个缺失的导入，所以我输入了导入的 System.Windows.Forms 但它没有用，因为这样做会在我的实际消息框上引发一个错误，即“MessageBox”是“System.Windows”之间的模棱两可的引用。 Windows.MessageBox' 和 'System.Windows.Forms.MessageBox' （这不难弄清楚：P）但原始消息保持不变。

```
 private void DisplayOnWebsiteChecked(Object sender, EventArgs e)
    {
        var departments = model.Name;
        var departmentChildren = model.Children;

        var messagebox = MessageBox.Show("Do you wish to hide all sub deparments and products.",
             "List of Box",
             MessageBoxButton.YesNo);

        if (messagebox = System.Windows.Forms.DialogResult.Yes)
        {
            if (departmentChildren != null)
            {
                int zeroChildren = 0;

                if (departmentChildren.Count.Equals(zeroChildren)) ;
                 {
                    foreach (Department Children in departmentChildren)
                        Children.IsVisibleOnWebsite = false;
                }
            }
        }
        else
            return;
    } 
```

我已经包含了整个方法，以防你需要它的任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T15:07:09.977

鉴于您现在已经解释说这是一个 WPF 应用程序，如果您正在使用[`System.Windows.MessageBox.Show`](http://msdn.microsoft.com/en-us/library/system.windows.messagebox.show.aspx)，您应该与[`System.Windows.MessageBoxResult`](http://msdn.microsoft.com/en-us/library/system.windows.messageboxresult.aspx).

基本上，如果您正在使用 WPF，您几乎肯定不想*提及*，`System.Windows.Forms`反之亦然。（我很惊讶这是在编译 - 你是否引用了这两个程序集？这通常是一个坏主意......）

此外，您需要`==`用于比较，而不是`=`（分配）

```
var result = MessageBox.Show(...);

if (result == MessageBoxResult.Yes)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:09:47.310

我认为您将 Windows 窗体和 WPF 混淆了 - 如果您使用的是[WPF MessageBox](http://msdn.microsoft.com/en-us/library/ms602949.aspx)，那么您的返回值是不同的。

所以不是

```
messagebox = System.Windows.Forms.DialogResult.Yes 
```

它是

```
messagebox == System.Windows.MessageBoxResult.Yes 
```

另请注意，`==`否则您正在分配值，并且 if 测试将始终成功（带有编译器警告）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T15:09:53.140

你的问题在这里：

```
 if (messagebox = System.Windows.Forms.DialogResult.Yes) 
```

首先，您将 a 分配`DialogResult`到 a`MessageBox`中。其次，您试图将 a`DialogResult`与 a进行比较`MessageBox`。尝试类似：

```
if(MessageBox.Show("Message", MessageBoxButtons.YesNo) == DialogResult.Yes) 
```

或者您可以将 DialogResult 分配给它自己的变量，然后进行比较。

# javascript - 在画布内获取相对触摸坐标

> ID：12711263
> 
> 赞同：4
> 
> 时间：2012-10-03T15:01:25.493
> 
> 标签：javascript, html, mobile, canvas

在过去的几天里，我一直在开发我的第一个 HMLT5 游戏原型，我需要让它在桌面和移动设备上都能运行。问题是，我一般是 Web 开发的新手。

为了获得相对于画布的鼠标/触摸位置，我已停止使用`e.layerX`或`e.offsetX`开始使用[此方法](https://stackoverflow.com/questions/5085689/tracking-mouse-position-in-canvas/5086147#5086147)。我什至添加了`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">`.

但即使在那之后，触摸坐标在旋转屏幕时也会发生偏移，而且 Dolphin 也以一种非常奇怪的方式对待触摸。

有什么通用的方法来解决这个问题吗？我不熟悉这些技术，所以可能使用 jQuery 或类似的东西？

编辑：另外，`pageX` `screenX`并且`clientX`都返回相同的值。不知道为什么，我用`e.touches[0].clientX`.

Edit2：我想我解决了。`findPos(obj);`忘了如果屏幕旋转我必须再次打电话。我什至不想在没有元标记的情况下测试它，我现在就这样吧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:05:31.030

我使用它（通过 JQuery）来获取我的鼠标在画布中的位置，相对于画布：

```
canvas.mousemove(function(e){
    mmouseX = e.pageX-canvas.position().left;
    mmouseY = e.pageY-canvas.position().top;
} 
```

在 Android 默认浏览器上尝试过，它工作正常，在台式机上也一样。不过，从来没有在 Dolphin 上试过。

# objective-c - 保存 NSString 的唯一表示

> ID：12711266
> 
> 赞同：0
> 
> 时间：2012-10-03T15:01:32.587
> 
> 标签：objective-c, nsstring, sha

在我的应用程序中，我需要比较 vcard 并确定它们之间是否有变化。

我不想在内存中保留整个 vcard，因为这可能非常庞大。我想做的是保留该 vcard 的散列值，但散列值必须非常精确，以免在非常接近/相似的 vcard 的情况下不重复（例如，差异是由一个字符引起的）。

我已经尝试过 Objective-C 的`hash`字符串方法，但这并不能很好地工作，因为它会在类似的 vcard 的情况下创建重复项。

我现在正在考虑使用 SHA256 加密电子名片，然后比较 SHA（类似于密码比较的方式）。

这是个好主意吗？关于如何保存大字符串的较小版本然后能够将其与另一个进行比较以进行更改的任何其他想法？

# facebook - 类似 Facebook 的选择

> ID：12711267
> 
> 赞同：0
> 
> 时间：2012-10-03T15:01:38.873
> 
> 标签：facebook, select, autocomplete

我做了[这个类似于 Facebook 的选择](http://ajaxdump.com/?jGTEq2fo)，其中可以通过单击`x`按钮取消选择。我已经开始`Auto-complete`工作了，但我只想让选定的选项看起来像链接上的那个。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:43:01.467

FCBKcomplete 的源代码可以在这里找到： [http ://www.emposha.com/javascript/fcbkcomplete.html](http://www.emposha.com/javascript/fcbkcomplete.html)

它基本上是一个带有样式列表项的列表 (UL)。

```
/* Copyright: Guillermo Rauch <http://devthought.com/> - Distributed under MIT - Keep this message! */

/* TextboxList sample CSS */
ul.holder { margin: 0; border: 1px solid #999; overflow: hidden; height: auto !important; height: 1%; padding: 4px 5px 0; }
*:first-child+html ul.holder { padding-bottom: 2px; } * html ul.holder { padding-bottom: 2px; } /* ie7 and below */
ul.holder li { float: left; list-style-type: none; margin: 0 5px 4px 0; white-space:nowrap;}
ul.holder li.bit-box, ul.holder li.bit-input input { font: 11px "Lucida Grande", "Verdana"; }
ul.holder li.bit-box { -moz-border-radius: 6px; -webkit-border-radius: 6px; border-radius: 6px; border: 1px solid #CAD8F3; background: #DEE7F8; padding: 1px 5px 2px; }
ul.holder li.bit-box-focus { border-color: #598BEC; background: #598BEC; color: #fff; }
ul.holder li.bit-input input { width: auto; overflow:visible; margin: 0; border: 0px; outline: 0; padding: 3px 0px 2px; } /* no left/right padding here please */
ul.holder li.bit-input input.smallinput { width: 20px; }

/* Facebook demo CSS */
ul.holder { margin: 0 !important }
ul.holder li.bit-box, #apple-list ul.holder li.bit-box { padding-right: 15px; position: relative; z-index:1000;}
#apple-list ul.holder li.bit-input { margin: 0; }
#apple-list ul.holder li.bit-input input.smallinput { width: 5px; }
ul.holder li.bit-hover { background: #BBCEF1; border: 1px solid #6D95E0; }
ul.holder li.bit-box-focus { border-color: #598BEC; background: #598BEC; color: #fff; }
ul.holder li.bit-box a.closebutton { position: absolute; right: 4px; top: 5px; display: block; width: 7px; height: 7px; font-size: 1px; background: url('close.gif'); }
ul.holder li.bit-box a.closebutton:hover { background-position: 7px; }
ul.holder li.bit-box-focus a.closebutton, ul.holder li.bit-box-focus a.closebutton:hover { background-position: bottom; }

/* Autocompleter */

.facebook-auto { display: none; position: absolute; background: #eee; z-index:1001;}
.facebook-auto .select_all_items {display: block; float: right;}
.facebook-auto .default { padding: 5px 7px; border: 1px solid #ccc; border-width: 0 1px 1px;font-family:"Lucida Grande","Verdana"; font-size:11px; }
.facebook-auto ul { display: none; margin: 0; padding: 0; overflow: auto; position:absolute; z-index:9999}
.facebook-auto ul li { padding: 5px 12px; z-index: 1000; cursor: pointer; margin: 0; list-style-type: none; border: 1px solid #ccc; border-width: 0 1px 1px; font: 11px "Lucida Grande", "Verdana"; background-color: #eee }
.facebook-auto ul li em { font-weight: bold; font-style: normal; background: #ccc; }
.facebook-auto ul li.auto-focus { background: #4173CC; color: #fff; }
.facebook-auto ul li.auto-focus em { background: none; }
.deleted { background-color:#4173CC !important; color:#ffffff !important;}
.hidden { display:none;}

#demo ul.holder li.bit-input input { padding: 2px 0 1px; border: 1px solid #999; }
.ie6fix {height:1px;width:1px; position:absolute;top:0px;left:0px;z-index:1;} 
```

# python - Boto 与 py2exe

> ID：12711269
> 
> 赞同：1
> 
> 时间：2012-10-03T15:01:40.653
> 
> 标签：python, amazon-web-services, py2exe, boto

我正在使用 Python 2.7、Boto 2.6 和 py2exe 创建与亚马逊的 Dynamodb 交互的 Windows 可执行文件。该应用程序使用 py2exe 进行编译，但在与任何 AWS 交互时会无限期挂起。

这是我的 py2exe 的 setup.py

```
from distutils.core import setup
import py2exe
import sys

setup(windows=[{"script" : "smart_gui.py"}],
 options={"py2exe" : {
 "includes" : ["sip", "PyQt4", "simplejson", "email","lxml","http", "urllib",
 "email"], 
 "packages":["gzip", "email"],
 "excludes":["Carbon","_scproxy", "Carbon.Files"]}}) 
```

这条线导致程序无限期地移交。

```
table = self.dynamo.get_table(self.conf['users_table']) 
```

这是py2exe的相关输出

```
The following modules appear to be missing
['Crypto.PublicKey._fastmath', 'builtins', 'cchardet', 'certifi', 'email.Charset',
'email.Encoders', 'email.Errors', 'email.Generator', 'email.Header',
'email.Iterators', 'email.MIMEAudio', 'email.MIMEBase', 'email.MIMEImage',
'email.MIMEMessage', 'email.MIMEMultipart', 'email.MIMEText', 'email.Message', 
'email.Parser', 'email.Utils', 'email.base64MIME', 'email.quopriMIME', 'http.client',
'http.cookiejar', 'http.cookies', 'kerberos', 'oauthlib.common', 'oauthlib.oauth1', 
'oauthlib.oauth1.rfc5849', 'packages.ssl_match_hostname.CertificateError', 
'packages.ssl_match_hostname.match_hostname', 'queue', 'simplejson._speedups', 
'test.test_support', 'urllib.parse', 'urllib.request']

Make sure you have the license if you distribute any of them, and
make sure you don't distribute files belonging to the operating system.

OLEAUT32.dll - C:\Windows\system32\OLEAUT32.dll
USER32.dll - C:\Windows\system32\USER32.dll
MSVCP90.dll - C:\Users\karl\Desktop\Smart_Select\MSVCP90.dll
SHELL32.dll - C:\Windows\system32\SHELL32.dll
KERNEL32.dll - C:\Windows\system32\KERNEL32.dll
WINMM.dll - C:\Windows\system32\WINMM.dll
COMDLG32.dll - C:\Windows\system32\COMDLG32.dll
ADVAPI32.dll - C:\Windows\system32\ADVAPI32.dll
NETAPI32.dll - C:\Windows\system32\NETAPI32.dll
WS2_32.dll - C:\Windows\system32\WS2_32.dll
WINSPOOL.DRV - C:\Windows\system32\WINSPOOL.DRV
GDI32.dll - C:\Windows\system32\GDI32.dll
IMM32.dll - C:\Windows\system32\IMM32.dll
VERSION.dll - C:\Windows\system32\VERSION.dll
ole32.dll - C:\Windows\system32\ole32.dll
ntdll.dll - C:\Windows\system32\ntdll.dll 
```

如何让 Boto 使用 py2exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T23:59:09.780

我花了一天的大部分时间在这上面 - py2app 将所有依赖项包装到一个 site-packages.zip 中，boto 尝试直接从 zip 存档中读取它的 cacerts.txt（将其视为一个目录，这是行不通的） .

我不清楚什么（如果有的话）运行时解压魔法 py2app 做了什么，但我最简单的解决方案是制作我自己的 cacerts.txt 副本，将其作为数据文件包含在 py2app setup.py 中：

```
DATA_FILES = [                                                                                                                              
#Add the cert                                                                                                                           
('backup_cacert', ['cacerts.txt'])                                                                                                      
] 
```

然后在我的主要功能中执行以下操作：

```
import boto.connection                                                                                                                      
try:                                                                                                                                        
    open(boto.connection.DEFAULT_CA_CERTS_FILE)                                                                                             
except IOError as e:                                                                                                                                                                                                                                                                                                              
    boto.connection.DEFAULT_CA_CERTS_FILE = os.path.join(os.path.dirname(__file__), 'backup_cacert', 'cacerts.txt')                                                                                                    
try:                                                                                                                                        
    open(boto.connection.DEFAULT_CA_CERTS_FILE)                                                                                             
except IOError as e:                                                                                                                        
    raise e 
```

# sql - Oracle ProC 插入值（（选择 ...））

> ID：12711271
> 
> 赞同：2
> 
> 时间：2012-10-03T15:01:46.177
> 
> 标签：sql, oracle, insert, subquery, oracle-pro-c

在 Oracle 10g 上运行 Pro*C。

我希望在插入语句值子句中执行子查询。此 sql 查询完全有效，并且在 TOAD 中运行没有问题，但 Pro*C 无法解析查询。

```
EXEC SQL INSERT INTO TARGET_ATTACHMENT 
      (
          TARGET_ID
          FILENAME
      ) 
      VALUES ( 
         :targetID,
         ( SELECT CREATED_FLAG from TARGET t where t.TARGET_ID = :targetID ) || '.tif'
      ) 
```

如果我删除：

```
( SELECT (CREATED_FLAG || DISPLAY_ID) from TARGET t where t.TARGET_ID = :targetID ) ||**". 
```

Pro*C 编译器正常工作，一切都按预期编译和运行。

如果我不删除： Pro*C 编译器会引发语法错误。

```
1>Syntax error at line 128, column 12, file        d:\SVN\...\TA.pc:
1>Error at line 128, column 12 in file d:\SVN\...
1>...\TA.pc
1>                ( select CREATED_FLAG from target t where t.TARGET_ID = :targetID )
1>...........1
1>PCC-S-02201, Encountered the symbol "CREATED_FLAG" when expecting one of the fol
1>lowing:
1>   ( ) * + - / . @ | at, day, hour, minute, month, second, year, 
```

这是一个问题，因为我希望 Pro*C 能够在值 caluse 中编译子查询：

IE。

```
INSERT into table1 (col1) values ( (select t2.singleCol from table2 t2 where t2.priKey = :priKey) ) 
```

这是 Pro*C 的预期行为吗？还是应该支持 values 子句中的子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:07:32.597

可能将子查询更改为：

```
( SELECT CREATED_FLAG || '.tif' from TARGET t where t.TARGET_ID = :targetID ) 
```

我认为我从未见过以您尝试的方式附加到子查询的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-11T09:52:09.013

Pro*C 预处理器能够在静态 SQL 语句中解析的 SQL 数量非常有限。例如，它甚至无法解析显式`inner joiner`/`outer left join`等符号。

作为一种解决方法，您可以只准备一个动态 SQL 语句并执行它——即使您的 SQL 语句不是真正动态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:25:53.310

您发布的代码在逻辑上与此相同：

```
INSERT INTO TARGET_ATTACHMENT       
  ( TARGET_ID ,  FILENAME )      
 select    :targetID, CREATED_FLAG|| '.tif' 
 from TARGET t 
where t.TARGET_ID = :targetID ) 
```

是否有特殊原因需要在 VALUES 子句中使用标量游标？

# ruby - 在 axlsx 中设置超链接文本颜色

> ID：12711274
> 
> 赞同：4
> 
> 时间：2012-10-03T15:01:50.803
> 
> 标签：ruby, colors, hyperlink, axlsx

我正在尝试在超链接单元格中设置文本的前景色，但它似乎不起作用。

使用类似的东西：`sheet["A1"].color = "0000FF"`适用于正常细胞，但不适用于超链接细胞

这段代码只是在“日志”表上创建了一个指向单元格 D1 的链接（工作正常），但 A1 永远不会变成蓝色！

`sheet.add_hyperlink :location => "'Log'!D1", :target => :sheet, :ref => "A1"` `sheet["A1"].color = "0000FF"`

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T05:10:16.193

在将颜色应用于链接之前，有两件重要的事情要做：

1.  您必须在样式中定义颜色，并且
2.  您必须知道相关单元的确切地址。

样式通常应用于行，但在这种情况下，您希望将其应用于特定单元格。这是可能的，但您需要直接*通过*工作表对象来寻址单元格。此外，有点反直觉的是，“add_hyperlink”方法可用于工作表对象，而不是单元格。所以也要注意这一点。

以下是如何将样式应用于包含链接的单元格的示例：

```
p = Axlsx::Package.new
p.workbook do |wb|
  wb.styles do |s|
    blue_link = s.add_style :fg_color => '0000FF'
    wb.add_worksheet(:name => "Anchor Link Test") do |sheet|
      sheet.add_row ['Title', 'Link']

      # Define the row here, we will use that later
      row = sheet.add_row ['Google', 'Click to go']

      # Add the hyperlink by addressing the column you have used and add 1 to the row's index value.
      sheet.add_hyperlink :location => "http://www.google.com", :ref => "B#{row.index + 1}"
      sheet["B#{row.index + 1}"].style = blue_link
    end
    s = p.to_stream()
    File.open("anchor_link_test.xlsx", 'w') { |f| f.write(s.read) }
  end
end 
```

最后说明：您可能会注意到我使用这些方法编写了此电子表格

```
s = p.to_stream()
File.open("anchor_link_test.xlsx", 'w') { |f| f.write(s.read) } 
```

[Axlsx Github 问题页面上](https://github.com/randym/axlsx/issues/61)有证据表明这种写出文件的方法比

```
p.serialize 
```

只是认为在 StackOverflow 上的某处值得一提！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:23:05.977

这似乎有效：

```
require 'axlsx'
p = Axlsx::Package.new
ws = p.workbook.add_worksheet
ws.add_row ['hoge-hoge']
ws['A1'].color = '0000FF'
ws.add_hyperlink :location => 'F6', :target => :sheet, :ref => 'A1'
p.serialize 'where_is_my_color.xlsx' 
```

您能否发布一个更大的未设置颜色的代码示例？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:52:51.577

显然 Axlsx 仅将自定义样式应用于字符串数据类型。通过将每一列设置为 :string 来解决此问题，如下所示：

`Sheet.add_row [ "1", "2", "3" ], :types => [:string, :string, :string]`

谢谢兰迪！

# ios - 此类与键 imageView 的键值编码不兼容

> ID：12711280
> 
> 赞同：11
> 
> 时间：2012-10-03T15:02:11.830
> 
> 标签：ios, exception, compiler-errors, iboutlet

我的应用程序的 RootViewController 有问题。当我运行该应用程序时，我收到此错误。这是什么意思？

```
 NSUnknownKeyException', reason: '[<UIApplication 0x8634010> setValue:forUndefinedKey:]:     this class is not key value coding-compliant for the key bigImageView.'
 First throw call stack:
 (0x1992012 0x1357e7e 0x1a1afb1 0xe04711 0xd85ec8 0xd859b7 0xdb0428 0x4bc0cc
 0x136b663 0x198d45a 0x4babcf 0x4bc98d 0x29eceb 0x29f002 0x29ded6 0x2af315 0x2b024b 
 0x2a1cf8 0x1dbedf9 0x1dbead0 0x1907bf5 0x1907962 0x1938bb6 0x1937f44 0x1937e1b 0x29d7da 0x29f65c 0x2c6d 0x2b95)   
 libc++abi.dylib: terminate called throwing an exception 
```

我在 RootViewController.h 中的代码

```
 #import <UIKit/UIKit.h>

  @interface RootViewController : UIViewController <UIGestureRecognizerDelegate>{

  }

 @property (nonatomic, copy)IBOutlet UIImageView * bigImageView;
 @property (nonatomic, assign)BOOL fromRootViewController;

 - (void)handleTap:(UITapGestureRecognizer *)recognizer;

 @end 
```

我在 RootViewController.m 中的代码

```
 #import "RootViewController.h"
   #import "MenuViewController.h"

  @interface RootViewController ()

   @end

  @implementation RootViewController

  @synthesize bigImageView;
  @synthesize fromRootViewController;

  - (void)viewDidLoad
   {
        [super viewDidLoad];
         UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice]orientation];

          if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation==    UIInterfaceOrientationPortraitUpsideDown) {
    self.bigImageView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"milanocina_V.png"]];

}
else if (deviceOrientation== UIInterfaceOrientationLandscapeRight){
   self.bigImageView  = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"milanocina_O.png"]];

}
else if (deviceOrientation==UIInterfaceOrientationLandscapeLeft){

    self.bigImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"milanocina_O.png"]];

}

[self.view addSubview:self.bigImageView];

UITapGestureRecognizer * recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
recognizer.delegate = self;
[self.view addGestureRecognizer:recognizer];

} 
```

RootViewController 最初称为 ViewController，我已更改名称。可以与错误相关吗？我能做些什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-03T15:36:48.350

在某个时候，您设置了一个`@property`. 然后你从你的代码中删除了它，但没有在你的 xib/storyboard 中解开它。您需要在情节提要中找到它，右键单击它，然后删除插座。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-25T16:36:19.683

这是另一种可能性：您重命名了您的类，但忘记更改您的 UIViewController 初始化代码。对我来说，是这样的：

```
NewViewController *vc;
vc = [[NewViewController alloc] initWithNibName:@"OldViewController" bundle:nil]; 
```

一旦我用@“NewViewController”替换了字符串@“OldViewController”，问题就消失了。

# excel - VBA 错误处理 - 给定情况的最佳实践是什么？

> ID：12711286
> 
> 赞同：2
> 
> 时间：2012-10-03T15:02:27.753
> 
> 标签：excel, vba

我有一个程序可以打开许多 Excel 工作簿并将所有这些工作簿中的数据合并到目标工作簿中。合并后，它对数据进行一些转换（使用自定义逻辑将列转置为行），然后使用查找数据添加更多列。

我有以下代码

```
Sub consolidateFiles()
    On Error GoTO ErrorHandler

    processFiles
    transform
    addLookupData

    Exit Sub
    ErrorHandler:
    Debug.Print Err.Number & " = " & Err.Description & ", Source = " & Err.Source 
End Sub

Sub processFiles()
 'Here I open all the files in the directory and copy and paste into the target workbook. 
 'If there is an error here, I would like to know the file that caused the error 
 'and I would like to proceed to the next file after logging the error
End Sub

Sub transform()
 'Here I transform some of the data from column to year.
End Sub

Sub addLookupData()
 'Here I add some new columns by looking up the data in another sheet in the target  workbook. Here the lookups can return error
End Sub 
```

我想知道在我的代码中添加错误处理的良好编程实践是什么。现在，我有一个全局错误处理程序，它记录错误并继续执行程序。为我从主过程调用的 3 个子过程中的每一个添加错误处理是否是个好主意？

我阅读了有关使用未记录的 ERL 来获取错误行的信息。我们如何在 VBA 编辑器中添加行号？

这是我在 VBA 中的第一个程序。我做过很多 Java 编程，但是错误处理范式非常不同。因此，我想向有经验的 VBA 程序员学习我可以遵循的良好实践。

我已经阅读了这篇优秀的文章，该文章链接到与 SO 中的 VBA 错误处理相关的问题之一：

[http://www.cpearson.com/excel/errorhandling.htm](http://www.cpearson.com/excel/errorhandling.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:41:59.997

由于我没有得到任何答案，因此我试图进行更多研究。以下是一些我发现有用的文章：

[http://www.techrepublic.com/blog/five-apps/five-tips-for-handling-errors-in-vba/339](http://www.techrepublic.com/blog/five-apps/five-tips-for-handling-errors-in-vba/339)

[http://www.jpsoftwaretech.com/vba-tips-tricks-and-best-practices-part-four/](http://www.jpsoftwaretech.com/vba-tips-tricks-and-best-practices-part-four/)

[http://www.fmsinc.com/tpapers/vbacode/debug.asp#BasicErrorHandling](http://www.fmsinc.com/tpapers/vbacode/debug.asp#BasicErrorHandling)

此外，我发现在每个过程中遵循 SingleExitPoint（有错误或没有错误）是一种很好的做法。

Siddharth 提供的链接中说明/暗示了许多想法。但在我阅读这些文章之前，它们对我来说并不是很清楚。

# css - 尝试使用动态内容创建无表格控件

> ID：12711290
> 
> 赞同：3
> 
> 时间：2012-10-03T15:02:32.153
> 
> 标签：css, css-tables

我正在从 Web 服务中提取一些内容，该服务创建带有标签作为标题形式的选择列表。规则是选择列表必须排列并堆叠在一起，并占据标签不占据的其余屏幕空间。

我可以通过使用表格创建它们来做到这一点，但如果可能的话，我正在寻找更纯粹的 CSS 路线。

尝试将 div 与`display: table`,结合使用`display: table-row`，`display: table-cell`但我无法使堆叠效果正常工作。

这是我正在寻找的效果：

```
.horizontalFill {
    width: 100%;                
}

.noWrap {
    white-space: nowrap;        
}
```

```
<table class="horizontalFill">
    <tr>
        <td class="noWrap">
            <label>some dynamic text</label>
        </td>

        <td class="horizontalFill">
            <select class="horizontalFill">
            </select>
        </td>
    </tr>        

    <tr>
        <td class="noWrap">
            <label>
                other dynamic text here
            </label>
        </td>

        <td class="horizontalFill">
           <select class="horizontalFill"></select>
        </td>
    </tr>
</table>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:26:41.300

您可以尝试类似的方法：

```
label {
    display: block;
    overflow: hidden;
    padding-bottom: 5px;
}

label .label {
    display: block;
    float: left;
    width: 150px;
}

label .input {
    display: block;
    margin-left: 160px;
}

label select {
    width: 100%;
}
```

```
<label class="row">
    <span class="label">Label name one</span>
    <span class="input">
        <select>
            <option>Select item</option>
        </select>
    </span>
</label>

<label class="row">
    <span class="label">Label name two</span>
    <span class="input">
        <select>
            <option>Select item</option>
        </select>
    </span>
</label>

<label class="row">
    <span class="label">Label name three</span>
    <span class="input">
        <select>
            <option>Select item</option>
        </select>
    </span>
</label>
```

但是，它涉及将标签列设置为静态宽度，因此如果您需要该列拉伸或收缩，它可能不适合您。不过，标签文本将自动换行到下一行。

# jquery - JQuery 选项选择器

> ID：12711295
> 
> 赞同：1
> 
> 时间：2012-10-03T15:02:49.530
> 
> 标签：jquery, jquery-ui, jquery-plugins

我是使用 JQuery 的新蜜蜂。

这两种说法都对我有用。但我不明白第一个 > 符号在做什么？

```
$("#OrganiastionSettingsAll > option:selected"); 
```

和

```
$("#OrganisationSettingsAll option:selected"); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:05:10.103

该`>`符号指定`option`标签必须是 的子代`#OrganiastionSettingsAll`，而不是后代。

例如：

```
<div id="outer">
   <div>
     <span>Foo</span>
   </div>
</div> 
```

`#outer span`匹配`<span>`标签，但`#outer > span`不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:04:15.583

P `>`C 用于第一级的后代，而`P` `C`对于层次结构的所有级别。更具体地说，子组合器 (P > C) 可以被认为是后代组合器 (PC) 的一种更具体的形式，因为它只选择第一级后代，[**jQuery Doc**](http://api.jquery.com/child-selector/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:05:45.990

`>`**只选择第一个孩子。** 例子

```
ul>li 
```

仅选择作为 ul 的直接子级的 li

```
ul li 
```

选择 ul 中的所有 li 元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:05:24.180

这`>`意味着`option:selected`必须是 的孩子或直系后裔`#OrganiastionSettingsAll`。`>`没有方法的示例`option:selected`可以是任何级别的后代`#OrganiastionSettingsAll`。

> 子组合器 (E > F) 可以被认为是后代组合器 (EF) 的一种更具体的形式，因为它只选择第一级后代。

参考：[http ://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T15:07:17.510

`>`用于 CSS 选择器中的直接后代。

图片案例

```
<div>
    <span>
        <strong>Hi!</strong>
    </span>
</div> 
```

`$('div > strong')`将返回零个元素，strong 不是 div 的直接后代。

`$('div strong')` and `$('div > span > strong')` will both return the strong element with text of "Hi!". The second selector uses the direct descendent operator while the first selector doesn't require that the strong be a direct descendent of the div.

# mysql - Mysql多边形到点的集合

> ID：12711296
> 
> 赞同：0
> 
> 时间：2012-10-03T15:02:53.053
> 
> 标签：mysql, polygon

在 Mysql 中如何将多边形转换为点集合？线？将在存储过程中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:38:06.483

您可以为此编写一个存储过程。

# java - Try and Catch User Input 导致变量未初始化

> ID：12711299
> 
> 赞同：0
> 
> 时间：2012-10-03T15:03:04.630
> 
> 标签：java, variables, input, initialization, try-catch

**编辑：好的，在修复 try catch 错误后，我在`catch {..`打印时遇到问题。**，基本上当我说我想再玩一次时，它会继续游戏，但它也会打印第一个`catch`，然后在第 23 行要求输入。

```
if (decision.equalsIgnoreCase("yes"))
        {
            ai = (int)(Math.random()*101);
            System.out.println("From 0 to 100, what number do you think I have generated?");

            tryCatch = true;
            loop = true;
            rtrn = true;

            while (tryCatch == true)    
            {   
                while (loop == true)
                {
                    try
                    {
                        guess = Integer.parseInt(iConsole.nextLine());
                        if (guess >= 0)
                        {
                            loop = false;
                        }
                    }

                    catch (NumberFormatException e)
                    {
                        System.out.println("Invalid input. Please try again.");
                    }

                    catch (InputMismatchException e)
                    {
                        System.out.println("Invalid input. Please try again!");
                    }
                } 
```

嗨，这是我的第一篇文章，所以如果我在论坛上弄错了代码格式，我会编辑它。

现在我正在用 java eclipse 编写一个游戏，其中 cpu 生成一个数字，用户必须猜测它。我大部分时间都在使用扫描仪类。我遇到的麻烦是创建一个 try catch 来检查用户输入是否是有效的整数。

最终发生的是它下面的代码块无法识别已经初始化的变量。

```
package ics3U;

import java.util.*;
import java.io.*;

public class highLow
{
    static public void main (String args[]) throws IOException
    {
        String name;
        String decision;
        String decision2;
        int ai;
        int guess;
        int counter = 1;
        boolean fullGame = true;
        boolean tryCatch = true;
        boolean rtrn = true;

        Scanner iConsole = new Scanner(System.in);

        System.out.println("Hello! Welcome to HiLo!");
        System.out.println("What is your full name?");

        name = iConsole.nextLine();

        System.out.println("Hello " + name + "! Would you like to play?");
        decision = iConsole.nextLine();

        while (fullGame == true)
        {
            if (decision.equalsIgnoreCase("yes"))
            {
                ai = (int)(Math.random()*101);
                System.out.println("From 0 to 100, what number do you think I have generated?");

                tryCatch = true;
                rtrn = true;

                while (tryCatch == true)    
                {   
                    try
                    {
                        guess = Integer.parseInt(iConsole.nextLine());
                    }

                    catch (Exception e)
                    {
                        System.out.println("Invalid input. Please try again.");
                    }

                    while (guess != ai)
                    {
                        if (guess < ai)
                        {
                            System.out.println("Too low!");
                            guess = iConsole.nextInt();
                        }

                        else if (guess > ai)
                        {
                            System.out.println("Too high!");
                            guess = iConsole.nextInt();
                        }
                        counter = counter + 1;
                    }
                    System.out.println("Correct! You guessed it after " + counter + " tries!");
                    counter = ((counter - counter)+1);
                    System.out.println("Would you like to play again?");

                    while (rtrn == true)
                    {
                        decision2 = iConsole.next(); //finally..

                        if (decision2.equalsIgnoreCase("yes"))
                        {
                            fullGame = true;
                            tryCatch = false;
                            rtrn = false;
                            break; //do-while may be needed, have to bypass catch, 'break' works after restating value of tryCatch & rtrn
                        }

                        else if (decision2.equalsIgnoreCase("no"))
                        {
                            System.out.println("Goodbye.");
                            fullGame = false;
                            tryCatch = false;
                            rtrn = false;
                            iConsole.close();
                        }

                        else
                        {
                            System.out.println("Sorry?");
                        }
                    }

                    /*catch (Exception e)
                    {
                        System.out.println("Invalid input. Please try again.");
                    }

                    catch (NumberFormatException e)
                    {
                        System.out.println("Invalid input. Please try again.");
                    }
                    //More specific Exceptions, turn this on later              
                    catch (InputMismatchException e)
                    {
                        System.out.println("Invalid input. Please try again!");
                    }*/
                }
            }

            else if (decision.equalsIgnoreCase("no"))
            {
                System.out.println("Goodbye.");
                fullGame = false;
                tryCatch = false;
                rtrn = false;
                iConsole.close();
            }

            else
            {
                System.out.println("Sorry?");
                decision = iConsole.nextLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:08:34.673

`continue`在你的 catch 块中添加一个语句。这样，如果用户输入的不是整数并且解析失败，它将立即重试，而不是尝试运行循环的其余部分。

```
try
{
    guess = Integer.parseInt(iConsole.nextLine());
}
catch (Exception e)
{
    System.out.println("Invalid input. Please try again.");
    continue; // jump to beginning of loop
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:05:04.520

由于语句位于 try 块中，因此它们有可能会失败，并且您的程序有可能尝试使用未初始化的变量。解决方案是将变量初始化为有意义的默认值，即

```
int guess = -1; // some default value 
```

您还应该将 while 循环包裹在 try/catch 块周围。在输入的数据有效之前，不要让程序继续进行。

```
boolean validGuess = false;
while (!validGuess) {
  // prompt user for input here
  try {
    guess = Integer.parseInt(iConsole.nextLine());
    if (/* .... test if guess is valid int */ ) {
      validGuess = true;
    } 
  } catch (NumberFormatException e) {
      // notify user of bad input, that he should try again
  }
} 
```

如果您需要在整个程序中执行类似的操作，您甚至可以将所有这些封装到它自己的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:09:29.697

尝试在此行之后的 try 块内的 catch 块之后（在循环中）移动所有代码

```
guess = Integer.parseInt(iConsole.nextLine()); 
```

正如您目前拥有的那样，只要 parseInt 中出现异常，它仍然会尝试处理未分配的**猜测**而不是重新启动循环。

# solr - solr facet !tag 在多列上

> ID：12711302
> 
> 赞同：1
> 
> 时间：2012-10-03T15:03:23.783
> 
> 标签：solr

我知道这在 Solr 中是可能的，它进行分组而不考虑一个值。即下面的行根据column1进行分组，考虑除column1之外的所有过滤器

`&facet.field={!ex=column1}column1`

现在我想知道我可以进行分组，其中我考虑除两个过滤器之外的所有过滤器，比如 column1,colun2

像

`&facet.field={!ex=column1 !ex=column2}column1`

但是上面不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:18:32.243

在[Solr wiki](http://wiki.apache.org/solr/SimpleFacetParameters#Tagging_and_excluding_Filters)中它说：

> tag 和**ex** local 参数都可以通过逗号分隔来指定多个值。

所以，它应该是这样的：

```
&facet.field={!ex=column1,column2}column1 
```

我没有尝试过，但认为它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:21:25.087

&fq={!tag=COLUMN2,column1}column1:(16 31)&fq={!tag=COLUMN2,column1}COLUMN2:(6)&facet.field={!ex=COLUMN2,column1}COLUMN2

# mysql - NHibernate、MySQL (InnoDB) 和锁定行

> ID：12711306
> 
> 赞同：2
> 
> 时间：2012-10-03T15:03:35.717
> 
> 标签：mysql, nhibernate, locking, innodb

我在数据库表中有一个计数器（Mysql with InnoDB）。在客户端我使用 NHibernate。

以安全方式更新计数器的推荐方法是什么（只有一个客户端能够同时更新值） - 所以我们不会得到任何重复？

*   使用 MySQL 锁定技术（SELECT FOR UPDATE）
*   使用 NHibernate 锁定 Session.Lock ....

NHibernate 手册说，如果 Session.Lock 工作与否，它取决于数据库。它适用于 MySQL 和 InnoDB 吗？

有人对此主题有更多信息或一些提示吗？

# api - Openstreetmap 标题和联系信息

> ID：12711307
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:03:41.917
> 
> 标签：api, http-headers, contacts, openstreetmap

我正在尝试为 Openstreetmap 设置标题。我使用 AJAX 发送请求。

哪个 HTTP 标头字段用于联系人？我以为是“发件人”，但请求不允许该字段。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:35:40.673

因此，从您的澄清看来，您可能正在谈论我们的一项使用政策：

*   [http://wiki.openstreetmap.org/wiki/API_usage_policy](http://wiki.openstreetmap.org/wiki/API_usage_policy)
*   [http://wiki.openstreetmap.org/wiki/Tile_usage_policy](http://wiki.openstreetmap.org/wiki/Tile_usage_policy)
*   [http://wiki.openstreetmap.org/wiki/Nominatim_usage_policy](http://wiki.openstreetmap.org/wiki/Nominatim_usage_policy)

唯一明确谈论联系信息的似乎是地理编码器的 Nominatim ，尽管所有这些都需要一个有效的`User-Agent`标题来帮助我们识别任何有问题的用户。

发送 Nominatim 策略请求的联系信息的最佳方式可能是作为其中的一部分，`User-Agent`但使用 URL 参数也可以正常工作 - 如果基本上存在问题，任何让管理员从日志中确定您是谁的方法。

# focus - JDialog 没有得到关注

> ID：12711308
> 
> 赞同：2
> 
> 时间：2012-10-03T15:03:42.747
> 
> 标签：focus, jdialog

我已经完成了下面的代码，但是有些我无法将焦点设置在 JDialog 上：( loginDialog.requestFocusInWindow() 返回 false。有没有办法让 JDialog 获得焦点？LoginDialog.this.txt_PASSWORD.requestFocusInWindow() 也返回 false .

Esc 按钮按下事件也不起作用

```
 this.loginDialog  = new JDialog();                  
    this.loginDialog.setTitle(applicationName+Keys.BLANK+Keys.DASH+Keys.BLANK+Messages.getMessage(IMessageKeys.LOGIN));
    this.loginDialog.setModal(true);        
    this.loginDialog.setLayout(new BorderLayout());
    this.loginPanel=getLoginPane();
    this.buttonPanel=getButtonPanel();
    this.infoLabel.setText(Keys.BLANK);
    this.loginDialog.add(this.infoLabel,BorderLayout.NORTH);
    this.loginDialog.add(this.loginPanel,BorderLayout.CENTER);
    this.loginDialog.add(this.buttonPanel,BorderLayout.SOUTH);
    this.loginDialog.setSize(370, 236);
    this.loginDialog.setResizable(false);
    this.loginDialog.setLocationRelativeTo(null);
    objLogger.debug("Login dialog init method call end"); //$NON-NLS-1$

    this.loginDialog.addWindowListener(new WindowAdapter() {
        @Override
        public void windowOpened(WindowEvent e) {
            LoginDialog.this.loginDialog.requestFocus();
            LoginDialog.this.loginDialog.requestFocusInWindow();
            LoginDialog.this.txt_PASSWORD.addNotify();
            LoginDialog.this.txt_PASSWORD.requestFocusInWindow();
            LoginDialog.this.txt_PASSWORD.requestFocus();
        }
        @Override
        public void windowClosing(WindowEvent e) {
            close();
        }
    }); 

    KeyStroke ks = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0, true);
    this.loginDialog.getRootPane().getInputMap().put(ks, GenePanelConstants.CLOSE_ACTION);
    this.loginDialog.getRootPane().getActionMap().put( GenePanelConstants.CLOSE_ACTION, new AbstractAction() {
        private static final long serialVersionUID = 2871751669355251894L;
        @Override
        public void actionPerformed(ActionEvent ae) {
            close();
        }
    });

    this.txt_PASSWORD.requestFocusInWindow();
    this.txt_PASSWORD.requestFocus();
    this.loginDialog.setAlwaysOnTop(true);
    this.loginDialog.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:08:03.767

我对此有所了解。由于焦点管理由系统管理。当且仅当它是系统中唯一一个可编辑的活动窗口时，您才能将焦点放在对话框上。

例如，保持 eclipse 打开，光标在其可编辑窗口上闪烁，然后启动您的应用程序，您的应用程序中存在的文本框将不会获得焦点（即使在您启动应用程序后，光标也会在 eclipse 的可编辑窗口上闪烁） . 在相同的情况下，如果 Eclipse 的可编辑窗口上没有闪烁的光标，您的应用程序文本框将获得焦点。

# c++ - WinSock2 IOCP WSARecv GetQueuedCompletionStatus：数据（自动）在 char*buffer 中结束，而不是 WSABUF.buf...为什么？

> ID：12711311
> 
> 赞同：1
> 
> 时间：2012-10-03T15:03:47.823
> 
> 标签：c++, c, winsock2, iocp

在调试时，当调用 WSARecv 时，我为函数提供**PerIoData->WSABUF**结构的地址。这应该将发送的数据分配给**WSABUF.buf** char* 数组，看起来是这样。当工作线程循环回到等待的**GetQueuedCompletionStatus**时，它似乎以某种方式（神奇地）将该数据发送到 PerIoData.Buffer （char* 数组）。所以本质上，**PerIoData.Buffer**和**PerIoData.WSABUF.buf**都等于同一个 char* 数组。当我从**PER_IO_DATA**结构（以及对它的所有引用）中删除**PerIoData.Buffer**时，尽管我知道客户端发送数据时**GetQueuedCompletionStaus永远不会返回********WSABUF.buf**应该填充数据。****

 ****相关资料：

1.  我正在实现“Microsoft Windows 网络编程”（第 157 页）中的完成端口模型。尽管那本书中的示例还有很多有待独立发现，但我的代码现在可以正常工作了。
2.  ServerWorkerThread的while循环中：首先调用GetQueuedCompletionStatus，接收per_handle_data，per_io_data
3.  per_io_data 结构是这样的：

    ```
    struct _PER_IO_DATA{ //in the interests of an efficient question, i'm omitting the
    //constructor/destructor code
    public:
        OVERLAPPED Overlapped;
        WSABUF DataBuf;
        char myBuffer[BUFFER_LENGTH];
        int BufferLen;
        int OperationType;
    };
    typedef _PER_IO_DATA PER_IO_DATA;
    typedef _PER_IO_DATA *PPER_IO_DATA; 
    ```

4.  我的 GetQueuedCompletionStatus 函数调用如下：

    `ret = GetQueuedCompletionStatus(CompletionPort, &BytesTransferred, (LPDWORD)&PerHandleData, (LPOVERLAPPED *)&PerIoData, INFINITE);`

5.  我的 WSARecv 函数是这样调用的：

    `WSARecv(PerHandleData->Socket, &(PerIoData->DataBuf), 1, NULL, &Flags, ((LPWSAOVERLAPPED)&PerIoData->Overlapped), NULL); //i know casting the Overlapped structure as LPWSAOVERLAPPED is unnecessary, but I was tweaking the //code when I didn't fully understand the problems I was having.`

我的问题是我从来没有明确地为**PerIoData->Buffer**分配任何东西，但它似乎总是被发送的数据填充。我相信 GetQueuedCompletionStatus “知道”将此数据发送到该**PerIoData->Buffer**尽管它期望一个指向**LPOVERLAPPED**结构的指针（我将包含相关**Buffer** char 数组的**PerIoData**结构实例传递给该结构）。这真的让我很烦......也许它的行为不像我想的那样，但我可以看到**PerIoData->Buffer**被填充的唯一地方是来自**GetQueuedCompletionStatus**方法。如果不是这样，那么**PerIoData->Buffer**********似乎无处不在？我已经搜索了 MSDN 和谷歌好几天了。我会继续寻找，如果我找到答案，我会发布更新。请帮忙？提前致谢！********

 *******注意：我会创建标签 WSABUF 和 GetQueuedCompletionStatus，但这是我的第一篇文章。

**--编辑：我发布了结构和工作线程，省略了所有其他不相关的代码。--** 您会注意到 _PER_IO_DATA::DataBuf.buf 已分配内存，然后归零。不指向 myBuffer 数组....

```
#include "stdafx.h"
#define SEND_POSTED 1
#define RECV_POSTED 2
#define BUFFER_LENGTH 1024

HANDLE CompletionPort;
SOCKADDR_IN serverAddress, *clientAddress;
SOCKET listener, client;
unsigned short port = 5000;
SYSTEM_INFO SystemInfo;
int i;

struct _PER_HANDLE_DATA{//Per handle data structure
    SOCKET Socket;
    SOCKADDR_STORAGE Address;
    _PER_HANDLE_DATA(){
        Socket = 0;
        ZeroMemory(&Address, sizeof(SOCKADDR_STORAGE));
    }
    ~_PER_HANDLE_DATA(){
        Socket = NULL;
        ZeroMemory(&Address, sizeof(SOCKADDR_STORAGE));
    }
};typedef _PER_HANDLE_DATA PER_HANDLE_DATA;typedef _PER_HANDLE_DATA *PPER_HANDLE_DATA;

struct _PER_IO_DATA{
public:
    OVERLAPPED Overlapped;
    WSABUF DataBuf;
    char myBuffer[BUFFER_LENGTH];
    int BufferLen;
    int OperationType;
    _PER_IO_DATA(){
        OperationType = 0;
        DataBuf.len = BUFFER_LENGTH;
        DataBuf.buf = (char*)malloc(BUFFER_LENGTH+1);
        BufferLen = BUFFER_LENGTH;
        ZeroMemory(DataBuf.buf, (sizeof(BUFFER_LENGTH+1)));
        ZeroMemory(&myBuffer, (sizeof(char)*BUFFER_LENGTH));
        SecureZeroMemory((PVOID)&Overlapped, sizeof(Overlapped));
    }
    ~_PER_IO_DATA(){
        free(&DataBuf.buf);
    }
};
typedef _PER_IO_DATA PER_IO_DATA;
typedef _PER_IO_DATA *PPER_IO_DATA;

unsigned _stdcall ServerWorkerThread(LPVOID CompletionPortID);

int _tmain(int argc, _TCHAR* argv[])
{
    /*
        INITIALIZE WINSOCK AND COMPLETION PORT, AND ACCEPT CONNECTIONS
    */
}

unsigned _stdcall ServerWorkerThread(LPVOID CompletionPortID){
    printf("ServerWorkerThread(%d) Working\n", GetCurrentThreadId());
    HANDLE CompletionPort = (HANDLE) CompletionPortID;
    DWORD BytesTransferred;
    PPER_HANDLE_DATA PerHandleData = new PER_HANDLE_DATA;
    PPER_IO_DATA PerIoData = new PER_IO_DATA;
    DWORD SendBytes = 0, RecvBytes = 0;
    DWORD Flags;
    BOOL ret;
    Sleep(2000);
    while(TRUE){
        ret = GetQueuedCompletionStatus(CompletionPort,
            &BytesTransferred,
            (LPDWORD)&PerHandleData,
            (LPOVERLAPPED *)&PerIoData,
            INFINITE);
        //printf("\n\nBytesTransferred: %d\n\n", BytesTransferred);
        if(BytesTransferred == 0 && (PerIoData->OperationType == RECV_POSTED || PerIoData->OperationType == SEND_POSTED)){
            closesocket(PerHandleData->Socket);
            GlobalFree(PerHandleData);
            GlobalFree(PerIoData);
            continue;
        }
        if(PerIoData->OperationType == RECV_POSTED){
        //output received data
            if(!strcmp(PerIoData->DataBuf.buf, "Disconnect") || !strcmp(PerIoData->DataBuf.buf, "disconnect")){
                printf("Disconnecting...\n");
                if(!shutdown(PerHandleData->Socket, SD_BOTH)){
                    closesocket(PerHandleData->Socket);
                    delete(PerHandleData);
                }
            }else{
                printf("RECV_POSTED: %s\n", PerIoData->DataBuf.buf);
            }
        }
        Flags = 0;

        SecureZeroMemory((PVOID)&PerIoData->Overlapped, sizeof(WSAOVERLAPPED));
        PerIoData->DataBuf.len = BUFFER_LENGTH;
        //***************************************************************************
        //Even though the following is commented out, PerIoData->DataBuf.buf 
        //is still being populated and so is PerIoData-myBuffer
        //So why is myBuffer being populated with data when DataBuf.buf is not pointing to it??
        //PerIoData->DataBuf.buf = PerIoData->myBuffer;
        //Also, if you comment out all references of myBuffer, GetQueuedCompletionStatus(),
        //will never return if myBuffer doesn't exist...how does it seem to be 'aware' of myBuffer?
        //***************************************************************************
        PerIoData->OperationType = RECV_POSTED;
        WSARecv(PerHandleData->Socket, &(PerIoData->DataBuf), 1, NULL, &Flags, ((LPWSAOVERLAPPED)&PerIoData->Overlapped), NULL);
    }
    return 0;
} 
```**********

# hadoop - Hadoop Mapper 运行缓慢

> ID：12711313
> 
> 赞同：1
> 
> 时间：2012-10-03T15:03:50.853
> 
> 标签：hadoop, mapreduce

我正在尝试使用映射器和减速器运行作业，但映射器运行缓慢..

如果对于相同的输入我禁用减速器，映射器会在 3 分钟内完成，而对于映射器-减速器作业，即使在 30 分钟结束时映射器也没有完成。

我正在使用 hadoop 1.0.3 ..我尝试了压缩和不压缩地图输出。我删除了旧版本的 hadoop 0.20.203 并从头开始重新安装了 1.0.3 的所有内容

Jobtracker 日志也​​充满：

```
2012-10-03 10:26:20,138 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 54311: readAndProcess threw exception java.lang.RuntimeException: readObject can't find class . Count of bytes read: 0
java.lang.RuntimeException: readObject can't find class
        at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:185)
        at org.apache.hadoop.ipc.RPC$Invocation.readFields(RPC.java:102)
        at org.apache.hadoop.ipc.Server$Connection.processData(Server.java:1303)
        at org.apache.hadoop.ipc.Server$Connection.processOneRpc(Server.java:1282)
        at org.apache.hadoop.ipc.Server$Connection.readAndProcess(Server.java:1182)
        at org.apache.hadoop.ipc.Server$Listener.doRead(Server.java:537)
        at org.apache.hadoop.ipc.Server$Listener$Reader.run(Server.java:344)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ClassNotFoundException:
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:264)
        at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:820)
        at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:183) 
```

谁能告诉我可能出了什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T07:28:54.253

如果您的映射器在 3 分钟内完成。那么它的批处理性质并不慢。是的，对于您使用的 mapreduce 版本，您需要确保您使用的减速器数量正确。如果您的集群大小为 X 则尝试使用减速器的数量作为 X-1 。看看这是否有帮助

# ruby-on-rails - 查询两组 ruby on rails

> ID：12711316
> 
> 赞同：0
> 
> 时间：2012-10-03T15:04:01.400
> 
> 标签：ruby-on-rails

我有两个值@details 和@users 如下

```
@details = ProjectTeamDetail.find_all_by_project_id_and_stage_id($projectID, stage.stage_id)
@users = User.find(:all) 
```

ProjectTeamDetail 模型具有 user_id 列

我的要求是从用户表中获取不在@details 中的用户。希望你能理解我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:21:16.343

导轨 3 方式：

```
@details = ProjectTeamDetail.where(project_id: $projectID, stage_id: stage.stage_id)
@users = User.all.where("id NOT IN (?)", @details.map(&:id)) 
```

# php - PHP 搜索引擎优化功能

> ID：12711322
> 
> 赞同：1
> 
> 时间：2012-10-03T15:04:12.437
> 
> 标签：php, function

我在尝试理解带有变量的函数时遇到问题。这是我的代码。我正在尝试为报告诈骗的网站创建友好的网址。如果预设，我创建了一个充满坏词的数据库，以便从 url 中删除。如果 url 中的名称包含一个链接，我希望它看起来像这样：example.com-scam.php 或 html（以更好者为准）。但是，现在它去掉了 (.)，它看起来像这个 examplecom。如何解决此问题以保留 (.) 并在末尾添加 -scam.php 或 -scam.html？

函数/seourls.php

```
/* takes the input, scrubs bad characters */
function generate_seo_link($link, $replace = '-', $remove_words = true, $words_array = array()) {
  //make it lowercase, remove punctuation, remove multiple/leading/ending spaces
  $return = trim(ereg_replace(' +', ' ', preg_replace('/[^a-zA-Z0-9\s]/', '', strtolower($link))));

  //remove words, if not helpful to seo
  //i like my defaults list in remove_words(), so I wont pass that array
  if($remove_words) { $return = remove_words($return, $replace, $words_array); }

  //convert the spaces to whatever the user wants
  //usually a dash or underscore..
  //...then return the value.
  return str_replace(' ', $replace, $return);
}

/* takes an input, scrubs unnecessary words */
function remove_words($link,$replace,$words_array = array(),$unique_words = true)
{
  //separate all words based on spaces
  $input_array = explode(' ',$link);

  //create the return array
  $return = array();

  //loops through words, remove bad words, keep good ones
  foreach($input_array as $word)
  {
    //if it's a word we should add...
    if(!in_array($word,$words_array) && ($unique_words ? !in_array($word,$return) : true))
    {
      $return[] = $word;
    }
  }

  //return good words separated by dashes
  return implode($replace,$return);
} 
```

这是我的 test.php 文件：

```
require_once "dbConnection.php"; 

$query = "select * from bad_words";
$result = mysql_query($query);

while ($record = mysql_fetch_assoc($result)) 
{
    $words_array[] = $record['word'];
}

$sql = "SELECT * FROM reported_scams WHERE id=".$_GET['id'];
$rs_result = mysql_query($sql);

while ($row = mysql_fetch_array($rs_result)) {

$link = $row['business'];

}

require_once "functions/seourls.php";
echo generate_seo_link($link, '-', true, $words_array); 
```

任何帮助理解这一点将不胜感激:) 另外，为什么我必须回显该功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:15:24.837

您的第一行真正的代码有以下注释：

```
//make it lowercase, remove punctuation, remove multiple/leading/ending spaces 
```

句号是标点符号，所以它们被删除了。`.`如果要例外，请添加到接受的字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:17:34.050

更改您的正则表达式（第二行）以允许句号：

```
$return = trim(ereg_replace(' +', ' ', preg_replace('/[^a-zA-Z0-9\.\s]/', '', strtolower($link)))); 
```

您的代码需要回显的原因是因为您在函数中返回了一个变量。如果您想在调用该函数后立即将其打印出来，您可以将函数中的 return 更改为 echo/print。

# java - android 的 java 应用程序中的错误

> ID：12711323
> 
> 赞同：0
> 
> 时间：2012-10-03T15:04:12.900
> 
> 标签：java, android, compiler-errors

所以，我是java中的菜鸟，我正在尝试为android制作一个应用程序。我遇到了一些错误，但我无法解决它们。谁能帮我找出问题所在？

这是我的主要活动：

```
 package com.example.w;

//import com.example.jkhgvcxz.R;

import views.DrawView;
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

    Ponto2D patual = new Ponto2D();
    int contador = 0;

    DrawView drawView;
    View view2;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout rl = (RelativeLayout) findViewById(R.id.rl);

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(500, 500);
        params.leftMargin = 50;
        params.topMargin = 50;

         drawView = new DrawView(this);
         drawView.setBackgroundColor(Color.WHITE);

          rl.addView(drawView, params);

        drawView.setOnTouchListener(new View.OnTouchListener() {
           // @Override
            public boolean onTouch(View v, MotionEvent event) {

                Ponto2D patual = new Ponto2D((int)event.getX(), (int)event.getY());             Reta r1 = new Reta (inicio, fim);

                DrawView.ar[contador] =rl[];

                inicio.X = \.X;
                inicio.Y = fim.Y;

                contador++;

                if (event.getAction()== MotionEvent.ACTION_DOWN)
                {
                drawView.a=7;
                drawView.antigox=drawView.X;
                drawView.antigoy=drawView.Y;
                drawView.X=event.getX();
                drawView.Y=event.getY();
                //drawView.draw();
                drawView.desenhar_quadrado();}

                    return true;
            }
        });

    }
    public void btn(View v)
    {
            drawView.desenhar_quadrado();
    }
    public void btn_verde(View v)
    {
            drawView.paint.setColor(Color.GREEN);
    }
    public void btn_vermelho(View v)
    {
        drawView.paint.setColor(Color.RED);
    }
    public void btn_preto(View v)
    {
        drawView.paint.setColor(Color.BLACK);
    }
    public void btn_azul(View v)
    {
        drawView.paint.setColor(Color.BLUE);
    }

    public void btn_amarelo(View v)
    {
        drawView.paint.setColor(Color.YELLOW);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我的 Reta 课程：

```
 package com.example.w;

public class Reta {
    Ponto2D inicio;
    Ponto2D fim;
    int cor;

    public Reta(Ponto2D p1, Ponto2D p2){

        inicio = new Ponto2D(p1.x, p1.y);
        fim = new Ponto2D(p2.x, p2.y);

    }
} 
```

我的 DrawView 类：

```
 package views;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

import com.example.w.Reta;

public class DrawView extends View {
    public Paint paint = new Paint();

    Reta ar[] = new Reta [10];
    public int a;
    public float antigox=0;
    public float antigoy=0;
    public float X=0;
    public float Y=0;

    public DrawView(Context context) {
        super(context);
        paint.setColor(Color.BLACK);  
        a=0;
    }

    public void desenhar_quadrado()
    {
        invalidate();
    }
    @Override
    public void onDraw(Canvas canvas) {
        for(int j=0; j<10; j++){
            drawLine(ar[j].inicio.x, ar[j].inicio.y);
        }
    }
} 
```

还有我的 Ponto2D 课程：

```
package com.example.w;

public class Ponto2D {

    int x;
    int y;

    public Ponto2D()
    {
       x = -1;
       y = -1;
    }

    public Ponto2D(int x, int y)
    {
       this();
       this.x = x;
       this.y = y;
    }

} 
```

现在我有（44-50）

```
- The constructor Ponto2D(float, float) is undefined 
- fim cannot be resolved to a variable 
- inicio cannot be resolved to a variable 
- line 47: Syntax error on token "[", Expression expected after this token 
- Cannot refer to a non-final variable rl inside an inner class defined in a different method 
- The field DrawView.ar is not visible 
- The type of the expression must be an array type but it resolved to RelativeLayout  
- fim cannot be resolved to a variable - inicio cannot be resolved to a variable. 
```

同样在 DrawView.java 的第 34 行，我得到：

```
- The field Reta.inicio is not visible,
- The method drawLine(int, int) is undefined for the type DrawView
- The field Reta.inicio is not visible
- The field Ponto2D.x is not visible. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:08:15.203

看这个

```
public class MainActivity extends Activity {

Ponto2D patual = new Ponto2D(); <---- here
//...
} 
```

你从来没有在你的类中定义过 Ponto2D() 构造函数。

添加一个

```
public Ponto2D()
{
   x = -1;
   y = -1;
}

public Ponto2D(int x, int y)
{
   this();
   this.x = x;
   this.y = y;
} 
```

第2部分：

```
 public float X=0;
   public float Y=0; 
```

后来你这样做

```
 Ponto2D patual = new Ponto2D(event.getX(), event.getY()); 
```

真的应该是

```
 Ponto2D patual = new Ponto2D((int)event.getX(), (int)event.getY()); 
```

或者你修改你的 Ponto2D 类看起来像这样

```
public class Ponto2D 
{

float x;
float y;

public Ponto2D ()
{
    x=-1.0;
    y=-1.0;
}

public Ponto2D(float x, float y)
{
    this();
    this.x = x;
    this.y = y;
}
} //end of class 
```

第 3 部分：

好的，我现在将描述每个错误。

*   构造函数 Ponto2D(float, float) 是未定义的——我们已经介绍了这个。
*   fim 无法解析为变量 - 您从未在 MainActivity 类中定义“fim”。您需要使用定义的值。我猜您想使用 Reta 课程中的“fim”？在这种情况下...

    Reta r1 = 新 Reta (inicio, fim);

将其更改为

```
Reta r1 = new Reta (new Ponto2D(), new Ponto2D()); 
```

或者

```
Reta r1 = new Reta (new Ponto2D(<your values>), new Ponto2D(<values again>)); 
```

*   inicio 无法解析为与前一个相同的变量。

*   第 47 行：标记“[”上的语法错误，此标记后应为表达式

    ```
     DrawView.ar[contador] =rl[];

            inicio.X = \.X;
            inicio.Y = fim.Y; 
    ```

这永远不会编译儿子。我不知道你在尝试什么，但我建议你收集你对这个的想法：D

*   不能在不同方法中定义的内部类中引用非最终变量 rl

这个很有趣。这意味着您不能针对 rl，它是在内部类的外部类中定义的。所以要修复它，只需交换这个

```
RelativeLayout rl = (RelativeLayout) findViewById(R.id.rl); 
```

有了这个

```
final RelativeLayout rl = (RelativeLayout) findViewById(R.id.rl); 
```

此错误有时很难修复，有时您只需添加 final，有时您需要变量的最终副本，有时您需要真正重组代码。幸运的是，这次添加 final 就可以了。

*   字段 DrawView.ar 不可见

打开你的 DrawView 类，看看这个

```
public class DrawView extends View {
public Paint paint = new Paint();

Reta ar[] = new Reta [10];  //offending line
public int a;
//... 
```

所以要么像这样公开那个领域

```
public class DrawView extends View
{
    public Paint paint = new Paint();

    public Reta ar[] = new Reta [10];
    //... 
} 
```

或生成 getter/setter。

*   表达式的类型必须是数组类型，但是
    一旦您对前面提到的类型进行了思考，它就会解析为RelativeLayout，这个类型会自动消失。相信我，我是一个工程师 ;）

*   字段 Reta.inicio 不可见，这现在是不言自明的......

    公共类 Reta { public Ponto2D inicio; 公共 Ponto2D 电影；公共情报；//... }

*   Reta.inicio 字段不可见

*   字段 Ponto2D.x 不可见。

看，这就是为什么你使用 getter 和 setter 并且不直接从不同的类访问类的字段的原因。

试着让它像这样

```
public class Ponto2D 
{
    private int x; //2d plane shouldn't use floating coordinates.
    private int y;

    Ponto2D() { }; //ctor does nothing.

    public Ponto2D(int x, int y)
    {
       this();
       this.x = x;
       this.y = y;
    }

    public int getX() { return x; }
    public int getY() { return y; }
}

public class Reta 
{
    private Ponto2D inicio;
    private Ponto2D fim;
    private int cor;

    Reta()
    {
       fin = new Ponta2D(); //might cause an error because it's not public
       inicio = new Ponta2D(-1, -1); //this should be ok 
    }

    public Reta(Ponto2D p1, Ponto2D p2)
    { 
```

// this.inicio = new Ponto2D(p1.getX(), p1.getY()); //这真是胡说八道 // this.fim = new Ponto2D(p2.getX(), p2.getY()); 这个.inicio = p1; this.fim = p2; //让我们使用这些而不是新对象。除非你想要新的对象。} }

这种代码风格将让您了解如何避免此类错误。

最后部分：

我会帮你解决这个问题，如果你想以此为生，其余的你必须自己弄清楚……你遇到的错误是学生级别的初学者编程错误，与Java 或安卓。那些您需要了解并知道如何解决自己的问题，因为没有人会浪费时间为您修复未定义的引用，而且这样提出它甚至是粗鲁的（这表明您甚至没有阅读您的代码）

无法对非静态字段 DrawView.ar 进行静态引用

好的，这就是你所做的：

```
public class DrawView extends View {
public Paint paint = new Paint();

Reta ar[] = new Reta [10];
public int a; 
```

所以 DrawView 类有一个名为 ar[] 的成员。

通常，您会像这样访问它：

```
DrawView dv = new DrawView();
System.out.println(Arrays.toString(dv.ar)); // dv.ar, not DrawView.ar 
```

当您将它作为 DrawView.ar 调用时，这意味着它对于此类的所有实例都是相同的，这就是为什么它说“不能以静态方式引用非静态变量 ar”。

当事物是“静态的”时，它们在该类的所有实例中都是共享的/相同的/通用的。

所以如果你这样做

公共类 DrawView 扩展视图 { public Paint paint = new Paint();

```
static Reta ar[] = new Reta [10];
public int a; 
```

您的所有 DrawView 实例都将具有相同的 Reta 数组 :) 由于您可能想要多个具有自己的矩形的 drawview，因此它应该是私有的。当它是私有的时，您不能以静态方式 (Class.someMember) 而是从实例 (classInstance.someMember) 或 ((new Class).someMember) 定位它

这意味着....您决定 Reta ar[] 应该是私有的还是公共的。

```
 public boolean onTouch(View v, MotionEvent event) {

            Ponto2D patual = new Ponto2D((int)event.getX(), (int)event.getY());
            Reta r1 = new Reta (inicio, fim);

            //DrawView.ar[contador] =rl[]; //offending line
            //it should be
            //drawView.ar = something; but thats also wrong because you cannot refer to a non-final variable drawView in a inner-class blahblah so here's what you do
            ((DrawView)v).ar[contador] = rl; //or whatever you want it to be 
```

;)

如果您还有其他问题，请点击书籍。试试谷歌。谷歌你的错误:) 所有这些都是非常非常常见的，并且已经被报道了数千次。

# c# - 从 C++ 到 C# 的 bool 指针

> ID：12711324
> 
> 赞同：3
> 
> 时间：2012-10-03T15:04:13.067
> 
> 标签：c#, c++, boolean, dllimport

我想使用 DLLImport 在我的 C# 应用程序中使用 C++ DLL 中的函数：

```
BOOL IsEmpty( DWORD KeyID, BOOL *pFlag ) 
```

我尝试了许多组合但徒劳无功，例如：

```
public extern static bool IsEmpty(int KeyID, ref bool pFlag); 
```

该方法返回 false（这意味着错误）。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:12:20.940

[引用“威利”](http://www.pcreview.co.uk/forums/big-c-boolean-t1343763.html)（有修正）：

> 当心布尔值！
> 
> Win32 定义了不同版本的布尔值。
> 
> 1) 大多数 Win32 API 使用的 BOOL 是~~无符号整数~~ [和有符号整数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx)（4 字节）
> 
> 2) BOOLEAN 是单字节，只有少数win32 API 使用！！
> 
> 3) 并且 C/C++ 有它内置的“布尔”，它是一个单字节

...并添加@tenfour 指出的内容：

> 4) 更离奇的 VARIANT_BOOL

```
typedef short VARIANT_BOOL;
#define VARIANT_TRUE ((VARIANT_BOOL)-1)
#define VARIANT_FALSE ((VARIANT_BOOL)0) 
```

有符号或无符号的性质对 BOOL 来说无关紧要，因为唯一的“假”模式是 0。所以尝试将其视为 4 字节数量......但是您与 DWORD 的接口[可能是令人满意](https://stackoverflow.com/questions/39419/visual-c-how-large-is-a-dword-with-32-and-64-bit-code)的，（我没有处理使用 Windows 64 位约定。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:12:13.310

`BOOL`在 Win32 中是 int 的 typedef，所以你应该改成`bool`，`Int32`所以定义是`int IsEmpty(uint KeyID, ref int pFlag)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:18:32.400

因为在 c++ 中，BOOL 被定义为 int。你应该使用

```
 [return: System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)]
    public static extern  bool IsEmpty(uint KeyID, ref int pFlag) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:58:23.767

感谢您的帮助！

最后这对我有用

公共外部静态 int IsEmpty(int KeyID, int[] pFlag)

# javascript - google maps js API v3：重新创建没有内存泄漏的地图/将地图对象移动到不同的div

> ID：12711330
> 
> 赞同：0
> 
> 时间：2012-10-03T15:04:38.947
> 
> 标签：javascript, google-maps, memory

我正在制作一个幻灯片窗格来显示需要 0 个内存泄漏的不同页面。我想显示该地区的谷歌地图，但地图附加到的 div 将定期替换为不同的内容，然后返回。从理论上讲，我可以将 div 移出窗格并将其隐藏，稍后再显示，但这将是最后的手段，因为我觉得将隐藏的 div 附加到后台页面确实不是一个好主意。有没有办法从 div 中分离地图然后重新附加它，或者有没有办法在 V3 中销毁地图？我想如果你摆脱了 div 里面的地图会破坏自己，但是这个测试会泄漏内存，就像不破坏 div 一样：

```
<!DOCTYPE html>
<html>
  <head>
    <script src = "/javascript/jquery.js"></script>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=MYKEY&sensor=false">
    </script>
    <script type="text/javascript">
    function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
        setTimeout(remMap,3000);
        setTimeout(mapempty,6000);
      }
    function mapempty(){
          $("body").append("<div id = 'map_canvas'></div>");
          initialize();
        }
    function remMap(){
          remove(document.getElementById("map_canvas"));
        }

        function remove(selection){
          selection.parentNode.removeChild(selection);
            }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

编辑：与我之前读到的相反，谷歌地图 V3 似乎*不*支持自定义卸载；地图仅在页面关闭时卸载，而不是在其 div 被销毁时卸载。似乎将 div 附加到隐藏的窗口是最好的选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:47:46.110

google maps V3 不*支持*自定义卸载；地图仅在页面关闭时卸载，而不是在其 div 被销毁时卸载。

V2 有 GUnload

# php - 用于在 for 循环中运行 mysql 查询的意外 T_STRING

> ID：12711333
> 
> 赞同：0
> 
> 时间：2012-10-03T15:04:40.673
> 
> 标签：php, mysql

我在 for 循环中运行查询并收到意外的 T_STRING 错误。请帮我。我只想回应查询。谢谢

```
<?php
$row = 1;
if (($handle = fopen("book1.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        $row++;
        for ($c=0; $c < $num; $c++) {

    $query="UPDATE users SET email_alert=1 where email="trim($data[$c]")";
    echo($query);

    }
}
    fclose($handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:06:09.433

```
$query="UPDATE users SET email_alert=1 where email="trim($data[$c]")"; 
```

应该：

```
$query="UPDATE users SET email_alert=1 where email='".trim($data[$c])."')"; 
```

在 PHP 中，字符串连接具有以下语法：`$string = $str1.$str2.$str3;`

**注意：**您的 sql 查询无效。最后还有额外`)`的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:06:35.780

```
 $query="UPDATE users SET email_alert=1 where email='".trim($data[$c])."')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:06:50.727

```
$query="UPDATE users SET email_alert=1 where email="trim($data[$c]")"; 
```

应该

```
$query="UPDATE users SET email_alert=1 where email='trim($data[$c]')"; 
```

您不能在字符串中同时使用双引号来引用数据，以及开始和结束字符串本身。

编辑添加：

如果你想让它很清楚，你可以连接：

```
$query="UPDATE users SET email_alert=1 where email='" . trim($data[$c] . "')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:08:31.763

```
$query="UPDATE users SET email_alert=1 where email='".trim($data[$c]).'"; 
```

对于查询，我更喜欢另一种方式

```
$a=trim($data[$c]);
$query=<<<HERE
UPDATE users SET email_alert=1 where email='$a'
HERE; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T15:08:53.423

你可以试试替换这个

```
$query="UPDATE users SET email_alert=1 where email="trim($data[$c]")"; 
```

`sprintf`最好用

```
$query= sprintf("UPDATE users SET email_alert=1 where `email` = '%s'",trim($data[$c])); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T15:11:35.827

代码应该是

```
$query="UPDATE users SET email_alert=1 WHERE email='" . trim($data[$c]) . "';"; 
```

支架放错地方了

编辑：忘记添加`'`

# ios - 从 app 目录中的文件创建要加载到 tableview 中的图像缩略图

> ID：12711337
> 
> 赞同：2
> 
> 时间：2012-10-03T15:04:52.677
> 
> 标签：ios, uitableview, uiimageview, thumbnails

对于我无法解决的问题，我需要一些帮助，但我认为我已经接近解决方案。就这个：

在我的应用程序的一个版本中，我能够使用从以下 2 行`CellforRowAtIndexPath`获取的图像填充 tableview (in) ：`Assetlibrary`

```
ALAsset someAsset = [theAssets objectAtIndex:indexPath.row];
[cell.imageView setImage:[UIImage imageWithCGImage:[someAsset thumbnail]]]; 
```

现在，我正在尝试从目录中读取图像文件并存储在`NSMutableArray`. 我可以`NSLog`在`NSMutableArray`. 但是我现在如何将文件转换为图像并显示在我的表格视图中，就像我为什么使用`Assetlibrary`? 我已经尝试了几次，但应用程序要么崩溃，要么在表格视图中不显示图像缩略图。例如，此语句不显示图像但应用程序不会崩溃：

```
UIImage *anImage = [UIImage imageWithContentsOfFile:[self.listTable objectAtIndex:0]]; 
```

当我在下一行设置图像时，它不起作用。有人请帮忙！

更新：当我 NSLog 时 self.listable 的内容是这样的：“19-10-25 276-10-12.jpg”、“19-10-37 276-10-12.jpg”、“19- 10-54 276-10-12.jpg”、“19-10-65 276-10-12.mov”等

当我 NSLog 我的文档目录时，它是：/var/mobile/Applications/8CB1368A-AAE2-4815-BD26-A7B7C8536193/Documents。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:58:48.470

应用程序只能`imageWithContentsOfFile`用于位于应用程序沙箱内的文件（例如，在`Documents`、捆绑包等）。如果这些文件位于您的`Documents`文件夹中，您可以通过以下方式获得完整路径：

```
NSString *documentsFolder = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *imageFullPath   = [documentsFolder stringByAppendingPathComponent:imageFilename]; 
```

然后，您可以在`imageWithContentsOfFile`.

* * *

**更新：**

您询问：

> 我`directoryContents`是一个`NSArray`；如何将其转换为`NSString`然后`[documentsFolder stringByAppendingPathComponent ...]`将每个完整路径存储在`NSMutableArray`?

您可能会执行以下操作：

```
NSFileManager *fileManager   = [NSFileManager defaultManager];
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSArray *filenames           = [fileManager contentsOfDirectoryAtPath:documentsDirectory error:nil];
NSMutableArray *paths        = [[NSMutableArray alloc] initWithCapacity:[filenames count]];

for (NSString *filename in filenames)
{
    [paths addObject:[documentsDirectory stringByAppendingPathComponent:filename]];
}

NSLog(@"%s filenames = %@", __FUNCTION__, filenames);
NSLog(@"%s paths = %@", __FUNCTION__, paths); 
```

# excel - Excel VBA：如何清除复选框

> ID：12711349
> 
> 赞同：0
> 
> 时间：2012-10-03T15:05:19.767
> 
> 标签：excel, vba, checkbox

```
Private Sub CheckBox9_Click()
    If CheckBox9.Value = True Then
        CheckBox9.Caption = "Done"
        ActiveWorkbook.Sheets("Well Planning Checklist").Tab.ColorIndex = 4
        'ActiveSheet.Tab.ColorIndex = 22
        Range("Q17").Value = CheckBox9.Caption
    Else
        If LCase(Range("Q17").Value) = CheckBox9.Caption Then
            CheckBox9.Value = Not (CheckBox9.Value)
        Else
            CheckBox9.Value = Not (CheckBox9.Value)
        End If
    End If
End Sub 
```

我用上面的方法来确保一旦用户点击复选框，他就不能取消选中它。但是，我希望能够拥有一个我的用户可以重置的 Button 。一切，而不仅仅是复选框。我有以下但它不工作。有人可以帮我让它工作吗？

```
Private Sub CommandButton1_Click()
    CheckBox9

    ActiveWorkbook.Sheets("Well Design Section").CheckBox9.Caption = "Incomplete "
    ActiveWorkbook.Sheets("Well Design Section").CheckBox9.Value = False
    Range("Q17").Value = "Incomplete"
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:35:04.017

要解决此问题，您可以将 CheckBox9_Click 子替换为：

```
Private Sub CheckBox9_Click()
    If CheckBox9.Value = True Then
        CheckBox9.Caption = "Done"
        ActiveWorkbook.Sheets("Well Planning Checklist").Tab.ColorIndex = 4
        'ActiveSheet.Tab.ColorIndex = 22
        Range("Q17").Value = CheckBox9.Caption
    Elseif Checkbox9.Caption <> "Incomplete" Then
        If LCase(Range("Q17").Value) = CheckBox9.Caption Then
            CheckBox9.Value = Not (CheckBox9.Value)
        Else
            CheckBox9.Value = Not (CheckBox9.Value)
        End If
    End If
End Sub 
```

唯一的区别是您的`Else`语句被替换为`Elseif`. 它现在只会在`Caption <> "Incomplete",`which 很好的情况下才会发生，因为如果单击复选框，初始 if 将为 true。

# matlab - 如何在字符串单元格中查找特定字符串的存在

> ID：12711352
> 
> 赞同：1
> 
> 时间：2012-10-03T15:05:30.640
> 
> 标签：matlab

假设我有一个像

```
A = {'erogol' 'grerol' 'biral'} 
```

然后我想在里面搜索一个特定的字符串。

有什么特殊的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:08:08.080

功能之一是`strmatch`：

```
 index = strmatch('grerol',A,'exact'); 
```

它返回一个索引数组。现在已弃用，Mathworks 建议`strcmp`改用

```
 logicalIndexing = strcmp('grerol',A); 
```

* * *

另一种选择是`ismember`：

```
 [bIsMember,index]=ismember('grerol',A); 
```

* * *

另一种选择是`strfind`：indexes = strfind(A,'grerol');

* * *

最后但并非最不重要的，

```
 booleanIndexes = cellfun(@(x)(isequal(x,'grerol')),A); 
```

# android - 安卓缓存管理器

> ID：12711353
> 
> 赞同：1
> 
> 时间：2012-10-03T15:05:31.993
> 
> 标签：android, caching

我想为我正在开发的 Android 应用程序创建自己的缓存管理器。我知道 CacheManager 存在并且与 WebView 一起使用，但是，它被列为已弃用。因此，我需要能够使用我自己的实现来管理缓存，但我还没有找到任何可以帮助我做到这一点的东西。有人对从哪里开始/如何做有任何建议吗？我没有找到很多关于如何创建自己的缓存管理器的信息，所以我感觉很迷茫。任何帮助将不胜感激。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:12:49.557

好吧，在这个时间点上，似乎没有真正的方法可以通过 webview 管理缓存。我不得不继续使用 httpURLConnection 来尝试管理缓存。

# c++ - c++错误std::result_of没有命名类型

> ID：12711354
> 
> 赞同：6
> 
> 时间：2012-10-03T15:05:32.427
> 
> 标签：c++, gcc, c++11, g++, result-of

`g++ -std=c++0x`'ing后`std::result_of`产生以下错误信息

```
error: ‘result_of’ in namespace ‘std’ does not name a type 
```

（SUSE 上的 g++ 版本 4.5.0。）

足以重现错误的相关代码如下

```
#include <random>
#include <type_traits>

using namespace std;

class Rnd{
protected:
  static default_random_engine generator_;
};

template<class distribution>
class Distr: Rnd{
  distribution distribution_;
public:
  typename std::result_of<distribution(default_random_engine)>::type 
       operator() (){ return distribution_(default_random_engine); }
}; 
```

此外，我尝试从 wikipedia 或 cpluplus.com 编译示例，但无济于事。这是特定编译器的问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T17:39:23.973

也尝试包括在内`<functional>`。gcc 4.5 基于旧版本的 C++11，其中`std::result_of`定义`<functional>`为`<type_traits>`.

[修复问题 1270](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#1270)后，此举措在[n3090](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3090.pdf)（2010 年 3 月 29 日）中引入。gcc 4.5.0 仅在更改后 16 天 [（2010 年 4 月 14 日）](http://gcc.gnu.org/gcc-4.5/)[发布](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-api-4.5/a00875_source.html#l00172)，没有足够的时间申请，从.`<functional>`

`std::result_of`移至[gcc 4.6](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-api-4.6/a01093_source.html#l01139)`<type_traits>`中。

# cordova - 脸书、推特、谷歌加分享

> ID：12711359
> 
> 赞同：1
> 
> 时间：2012-10-03T15:05:50.313
> 
> 标签：cordova, jquery-mobile

我想在 facebook、twitter 和 google 上分享/点赞一个链接，并使用电话间隙

任何人都可以建议实施它的最佳实践吗？

我已经通过 Share this plugin for html5，因为我的网站建立在 Phone gap + jquery Mobile 上，它对电话差距有好处吗？

我喜欢让它简单，如果我可以使用 HTML5 和 css 完成这件事，那么我不想去电话间隙 + facebook 插件和所有东西

如果关于这个话题的任何事情真的很受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T06:12:08.530

我经历过同样的问题。有一个插件可以在社交网站上共享链接或文本。此 socialshare 插件可在 github 链接[https://github.com/mayurloved/Share-Plugin-for-iPhone-and-Android](https://github.com/mayurloved/Share-Plugin-for-iPhone-and-Android)和[https://github.com/mayurloved/socialshare-windows](https://github.com/mayurloved/socialshare-windows)上找到。

它帮助了我。我希望它可以帮助你。祝你好运！:)

# php - 用 2 个正则表达式替换一个

> ID：12711361
> 
> 赞同：2
> 
> 时间：2012-10-03T15:05:51.410
> 
> 标签：php, regex

我有一个字符串...

```
$str = 'bob<br /><br />looked so good<br />tonight!'; 
```

我想用两个替换任何只有一个的实例`<br />`。

此刻我有...

```
echo preg_replace('/(<br \/>\s*){1}/', '<br /><br />', $str); 
```

`<br />`但是当它应该只追求好时，这个放是在鲍勃之后的两个。

任何帮助都会很棒！

**编辑：**输出应该是......

```
bob<br /><br />looked so good<br /><br />tonight! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:16:30.933

基本上，您想要一个`<br />`既不在另一个标签之前也不在其后紧随其后的标签。因此：

```
/(?<!<br \/>)<br \/>(?!<br \/>)/ 
```

这假设所有`<br />`标签都是字面意思`<br />`，而不是`<br>`, `<br/>`，甚至`<br style="clear:both;">`。为了更好地解析，您应该使用 DOM 解析器并查找`BR`没有紧跟在另一个节点之前或之后的`BR`节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:18:10.093

这用两个替换任何数字（大于零）`<br />`：

```
print preg_replace('|(?:<br />)+|', '<br /><br />', $str); 
```

例子：

```
$str = 'bob<br /><br />looked so good<br />tonight!<br /><br /><br />Bye!';
print preg_replace('|(?:<br />)+|', '<br /><br />', $str);
# output: "bob<br /><br />looked so good<br /><br />tonight!<br /><br />Bye!" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:16:53.757

您指定要匹配一个
并将其替换为两个。

这不是你想要的 -如果那个后面没有第二个相同的东西，你只想添加一个额外的？

尝试

```
echo preg_replace('/(<br \/>\s*){1}([^<])/', '<br /><br />$1', $str); 
```

这可确保
在替换之前，您要匹配的标签后面没有任何其他标签。

请注意，这不会在以下情况下取代

```
<b>bob<br /></b> 
```

尽管如此，您可能希望更具体地确定结束边界条件，只要确保将其添加回末尾，您就可以根据需要使结束边界变得复杂。

# jquery - jquery 动画在 IE 8 中不起作用

> ID：12711366
> 
> 赞同：0
> 
> 时间：2012-10-03T15:06:11.153
> 
> 标签：jquery, internet-explorer, internet-explorer-8

我有一个脚本，当单击按钮时，该按钮会旋转，不透明度会发生变化，并且段落会滑动。我知道旋转不会发生，因为它使用了 webkit 功能，但我仍然希望改变不透明度和打开段落，这些应该在 IE 8 中发生，但由于某种原因不会。提前感谢您的帮助。

```
var effects_of_yoga_2010_INFO = {
    "-webkit-transition": "webkit-transform 0.25s ease-in-out"
};
$("#effects_of_yoga_2010_INFO").css(effects_of_yoga_2010_INFO);

var effects_of_yoga_2010_DEG = 0;

$("#effects_of_yoga_2010_INFO").toggle(function() {
$("p#effects_of_yoga_2010_TEXT").slideDown("250");
effects_of_yoga_2010_DEG += 45;
effects_of_yoga_2010_INFO.style.setProperty('-webkit-transform', 'rotateZ(' +   
effects_of_yoga_2010_DEG + 'deg)');
$("#effects_of_yoga_2010_INFO").fadeTo("250", 0.65);
}, function() {
$("p#effects_of_yoga_2010_TEXT").slideUp("250");
effects_of_yoga_2010_DEG += 45;
effects_of_yoga_2010_INFO.style.setProperty('-webkit-transform', 'rotateZ(' +  
effects_of_yoga_2010_DEG + 'deg)');
$("#effects_of_yoga_2010_INFO").fadeTo("250", 0.3);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:10:48.320

现在您已经提供了一个 jsFiddle，当我运行您的代码时，我看到它在 IE8 中抛出异常，因为该`style.setProperty()`方法不存在。因此，切换功能的其余部分不会运行。如果我暂时将这些`setProperty()`行注释掉，则`.fadeTo()`可以在 IE8 中使用。

那么，为什么不使用 jquery 的`.css()`方法而不是`.setProperty()`设置那些样式参数，然后您不必担心浏览器的兼容性。

例如：

```
$("#effects_of_yoga_2010_INFO").css("-webkit-transition", "-webkit-transform 0.25s ease-in-out"); 
```

* * *

使用`.fadeTo()`而不是，`.animate()`jQuery 将为旧版本的 IE 中的不透明度设置使用正确的过滤器值。有关更多信息，请参阅[fadeTo() 上的 jQuery 文档](http://api.jquery.com/fadeTo/)。

这是一个在 IE8 中使用`.toggle()`and的示例：http: [//jsfiddle.net/jfriend00/29JUB/](http://jsfiddle.net/jfriend00/29JUB/)`.fadeTo()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:13:09.847

您在切换功能中使用切换功能，这将无法正常工作。尝试[`slideUp`](http://api.jquery.com/slideUp/)，[`slideDown`](http://api.jquery.com/slideDown/)而不是。

正如 jfriend00 所说，您可以使用[fadeTo](http://api.jquery.com/fadeTo/)属性轻松更改不透明度！

# jquery - 悬停后将文本返回到默认 div

> ID：12711367
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:06:17.107
> 
> 标签：jquery, html, css

在将文本 div 恢复为默认值时，此代码不起作用。我有 12 个链接，除了在悬停之前将文本返回到默认内容外，一切正常

**查询：**

```
<script type="text/javascript">
    $(document)
        .ready(function () {
        $("#MenuBar1 li")
            .mouseover(function () {
            $("#back")
                .attr("src", $(this)
                .data("img"));
            $('.description')
                .text($(this)
                .data('description'));
        })
            .mouseout(function () {
            $("#back")
                .attr("src", $("#back")
                .data("original"));
            $('.description')
                .text($('.description')
                .data('change'));
        });
    });
</script> 
```

**HTML：**

```
<div style="width: 357px; position: relative; top: -357px; left: 5px;"
id="content">
    <img src="http://6/images/pic1.jpg" alt="logo's" width="357"
    height="241" id="back" data-original="http://64.197.156.235/images/pic1.jpg"
    />
</div>
<div id="change" class="description" 
      style="background-color: #CCC; 
      width: 338px; 
      position: relative; 
      top: -359px; 
      left: 5px; 
      padding: 15px 10px 15px; 
      color: #414141; 
      font: arial, Trebuchet MS; height: 266px;">
      change text for each link with each picture then set back to default
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:28:35.683

您似乎没有特别在任何地方定义默认文本。尝试将此添加到代码的开头（就在 之后`.ready(function() {`）：

```
var defaultText = $(".description").text(); 
```

然后，在设置`.description`' 文本时，使用：

```
$(".description").text(defaultText); 
```

# url-rewriting - 自己网站的自定义个人资料 URL，通过各种帖子..！

> ID：12711371
> 
> 赞同：0
> 
> 时间：2012-10-03T15:06:27.520
> 
> 标签：url-rewriting, user-profile, custom-url

我看过一些类似的帖子， [Facebook Like Custom Profile URL PHP](https://stackoverflow.com/questions/10595556/facebook-like-custom-profile-url-php)

[自定义 URL / Apache URL 重写](https://stackoverflow.com/questions/9689446/custom-url-apache-url-rewriting)

但它仍然不清楚，实际的方法/过程不可用.. 伙计们，多一点指导会做很多..

**我想在这里提出问题：**

1.  用户应该有机会决定他们的 url 是什么，就像在 fb 的情况下，twitter 例如：www.facebook.com/harry.inaction

2.  我为此使用 linux、apache、mysql、php 环境。

3.  用户是根据他们加入时自动创建的用户 ID 来识别的

我在第一步就失败了，说真的，我不知道如何开始。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:29:01.243

将任何细节作为答案是不可能的，因为你必须*建立*你自己的这个系统，而且有不止一种方法可以做到。设计决策需要根据您希望事物工作的方式以及您已经拥有的东西（它们必须以某种方式协同工作）来做出。

假设您已经有了一个用于创建用户的系统（听起来确实如此），并且您已经有了一个用于查看配置文件的系统。您需要扩展此系统，以便在数据库的用户表中存储一个额外的“my_vanity_url”字段。该字段必须是唯一的。当用户编辑他们的个人资料时，他们可以选择将其更改为他们想要的任何内容（为简单起见，将其限制为仅字母和数字以及破折号）。

接下来，当您显示此配置文件时，假设它是 via `/profile.php`，您的代码需要检查一些事情。

1.  首先它需要检查它是如何被调用的，看着`$_SERVER['REQUEST_URI']`你可以看到`/user/some-vanity-name`或`/profile.php?u=1234`。
2.  如果是后者，则需要重定向浏览器，进行数据库查找以查看具有 user_id 的用户`1234`是谁。
3.  将此用户从数据库中拉出“my_vanity_url”列并将浏览器重定向到`/user/my_vanity_url_value`（替换`my_vanity_url_value`为该列的值）。

所以现在，如果您访问**http://your.domain.com/profile.php?u=1234**，您的浏览器会被重定向，并且 URL 地址栏会显示**http://your.domian.com/user/my_name**。

接下来，您需要能够使用该唯一名称并将其变回旧的丑陋的个人资料页面。这里需要做两件事：

1.  您需要再次扩展您`profile.php`以采用可选的虚荣名称而不是 user_id
2.  您需要使用 mod_rewrite 在内部将虚名路由到`/profile.php`

首先，您只需寻找不同的`$_GET[]`参数，而不是寻找 user_id 的任何参数。说它被称为`name`：所以看看`$_GET['name']`它是否存在，如果它确实在用户表中查找其虚 url 名称为的用户`$_GET['name']`。返回该用户的个人资料。

对于第二件事，您只需将其放在文档根目录中的 htaccess 文件中的适当位置：

```
RewriteEngine On
RewriteRule ^/?user/([A-Za-z0-9-]+)/?$ /profile.php?name=$1 [L] 
```

* * *

这只是如何实现这样的事情的一个例子。它可能完全不适用于您拥有的东西，但它应该让您了解您需要做什么。

# android - 如何调整位图的色相/饱和度？

> ID：12711376
> 
> 赞同：0
> 
> 时间：2012-10-03T15:06:38.043
> 
> 标签：android

我需要一种方法来调整位图的色调/饱和度。到目前为止，我发现了这个

```
public static Bitmap colorize(Bitmap src, float hue, float saturationDelta, float valueDelta) {

    Bitmap b = src.copy(Bitmap.Config.ARGB_8888, true);

    for (int x = 0; x < b.getWidth(); x++) {
        for (int y = 0; y < b.getHeight(); y++) {
            int color = b.getPixel(x, y);
            float[] hsv = new float[3];
            Color.colorToHSV(color, hsv);
            hsv[0] = hue;
            hsv[1] += saturationDelta;
            hsv[2] += valueDelta;
            int newColor = Color.HSVToColor(Color.alpha(color), hsv);
            b.setPixel(x, y, newColor);
        }
    }

    return b;
} 
```

但处理 400x500 位图需要 10 秒。有没有更快的方法？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:36:51.207

我在上面发布的链接应该有助于调整色调。一般来说，上述代码如此缓慢的原因是因为您正在调用图像`getPixel()`中`setPixel()`的每个像素。您应该使用`getPixels()`and`setPixels()`方法将所有像素作为一个数组获取，循环遍历该数组并进行修改，然后将修改后的数组一次全部设置回位图。您会注意到速度的巨大提升。

# php - 通过控制器在数据库中多次添加数组

> ID：12711378
> 
> 赞同：2
> 
> 时间：2012-10-03T15:06:42.567
> 
> 标签：php, mysql, codeigniter

我在购买多少优惠券时多次生成此数组时遇到问题。

现在看起来像

```
$coupon_array = array(
    'user_id'=>$_POST["user_id"],
    'mergent_id'=>$_POST["merchant_id"],
    'deals_id'=>$_POST["deal_id"],
    'order_id'=>$order_id,
    'secret'=>$secret,
    'expire_time'=>$time,
    'create_time'=>$time,
    'status'=>1
   );

   $this->common_model->insertData('coupon', $coupon_array); 
```

但我有一个帖子值，例如：

```
"quantity"=>$_POST["quantity"] 
```

我想制作这个 X 次。例子：

```
$quantity x $this->common_model->insertData('coupon', $coupon_array); 
```

对不起我的英语，我希望我能解释一下，这样可以理解...... ;)

另一个！当我们插入优惠券时，它们都具有相同的 md5($secret)，是否也可以使用所有不同的代码...

```
 $secret = md5($secret);

   $coupon_array = array(
    'user_id'=>$_POST["user_id"],
    'mergent_id'=>$_POST["merchant_id"],
    'deals_id'=>$_POST["deal_id"],
    'order_id'=>$order_id,
    'secret'=>$secret,
    'expire_time'=>$time,
    'create_time'=>$time,
    'status'=>1
   ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:12:20.047

好吧，如果我了解您想要什么，您可以使用`for`，但这很明显：

```
for($i=0; $i<$this->input->post('quantity');$i++) {
    $coupon_array['secret'] = md5($coupon_array['secret'].$i);
    $this->common_model->insertData('coupon', $coupon_array);
} 
```

此外，切勿`$_POST["..."]`在 CodeIgniter 中使用，仅`$this->input->post('...')`在正确转义时使用。更多关于`input`课程的信息可以在[这里](http://codeigniter.com/user_guide/libraries/input.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:15:16.717

```
for ($i=0; $i<$quanity; $i++) {
       $this->common_model->insertData('coupon', $coupon_array);
  } 
```

# svn - SVN为什么不能添加以句点开头的文件

> ID：12711382
> 
> 赞同：1
> 
> 时间：2012-10-03T15:06:51.880
> 
> 标签：svn

我正在对包含以句点开头的文件名的项目使用颠覆。这就是我尝试将这些文件添加/删除到存储库时发生的情况。

```
$ svn delete CRM/Core/DAO/.listAll.php
svn: Use --force to override this restriction
svn: 'CRM/Core/DAO/.listAll.php' is not under version control

$ svn add CRM/Core/DAO/.listAll.php
svn: warning: 'CRM/Core/DAO/.listAll.php' is already under version control 
```

为什么会这样？

# iphone - SSL 错误、NSURLRequest 和无效证书

> ID：12711384
> 
> 赞同：2
> 
> 时间：2012-10-03T15:06:54.503
> 
> 标签：iphone, objective-c, xcode, ios5, asihttprequest

我有一个用于开发的自签名证书。我正在尝试在我的应用程序中请求一个网页。

这是代码：

```
 NSURL* myUrl  = [[NSURL alloc] initWithString:url];
    NSURLRequest *myRequest = [NSURLRequest requestWithURL:myUrl];

    [self.webView loadRequest:myRequest]; 
```

..当请求通过时，我的错误方法被命中：

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    NSLog(@"Error : %@",error);
} 
```

并将其写入记录器：

```
Error : Error Domain=NSURLErrorDomain Code=-1202 "The certificate for this server is invalid. You might be connecting to a server that is pretending to be.... 
```

我该怎么做才能“无论如何连接”，以便我可以在开发中测试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T19:13:28.350

使用以下两种方法，我们可以允许自签名证书

```
-(BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace;

-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge; 
```

要了解如何使用这些方法来实现它，请访问[这里](https://stackoverflow.com/a/20789128/730807)

# jquery - 砌体容器调整大小

> ID：12711389
> 
> 赞同：1
> 
> 时间：2012-10-03T15:07:23.180
> 
> 标签：jquery, reload, jquery-masonry

我正在使用 Masonry 在投资组合网站上组织图像。如果容器的大小发生变化，有没有办法改变排水沟的宽度？

非常感谢！

巴特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:48:25.910

您正在寻找的一个简单的解决方案是拥有一个 jQuery $(window).resize() 事件侦听器，并检查窗口的 .width()，根据宽度，您可以拥有一个完全单独调用。我试过了，效果很好……

```
var $gridElement = $(".grid-elements").masonry({
     columnWidth: 150,
     gutterWidth: 12,
});

$(window).resize(function(){
    var width = $(window).width();

    if(width > 1000) {
         console.log('greater than 1000');
         $gridElement.masonry({
              columnWidth: 150, // different column width here
              gutterWidth: 6, // different gutter width here
         });
    } else if (width < 1000) {
         console.log('less than 1000');
         $gridElement.masonry({
              columnWidth: 150, // different column width here
              gutterWidth: 12, // different gutter with here
         });
    }
}); 
```

因此，如您所见，我们使用 .masonry() 调用缓存“.grid-elements” jQuery 选择，然后在我们的 .resize() 处理函数中检查窗口的宽度，并调用 .masonry( ) 方法与一组新的选项。

另外请记住，上面的代码不会去抖动，因此它将为您调整大小的每个像素调用 .masonry() 。你可以[查看这个 Stack question 的答案](https://stackoverflow.com/questions/11147266/javascript-onresize-event-fires-multiple-times)。

# php - onSubmit javascript 表单事件换出图像？

> ID：12711390
> 
> 赞同：-2
> 
> 时间：2012-10-03T15:07:26.030
> 
> 标签：php, javascript, jquery

我有以下输入按钮代码。如何更改此代码以使用`btn_nxt.png_hold.gif`提交后调用的按钮的灰色版本？

```
<input onsubmit="this.disabled=true;return true;" type="image" name="Insert" id="Insert" value="Insert" alt="Insert" src="images/btn_nxt.png"  /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:12:49.770

单击按钮时需要更改图片：

```
onclick="this.src='images/btn_nxt.png_hold.gif';" 
```

`onsubmit`仅属于表单元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:12:56.727

```
onclick="this.src='images/btn_nxt.png_hold.gif';this.disabled=true;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:15:07.817

正确的解决方案是在提交时向按钮添加一个类。然后，您可以使用样式表对您喜欢的按钮进行任何类型的修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:32:44.957

你也可以用 jQuery 来操作它。它的清洁剂。

```
$("#Insert").live("click", function(){

    $(this).attr("src","path/tp/image.gif").attr("disabled", "disabled");

}); 
```

希望能帮助到你。

# rdf - 耶拿直接推断图

> ID：12711394
> 
> 赞同：3
> 
> 时间：2012-10-03T15:07:34.123
> 
> 标签：rdf, jena, ontology, owl

我是耶拿的菜鸟，正在阅读这个[页面](http://jena.apache.org/documentation/ontology/index.html#experimental-ontology-tools)，更具体地说，在图 5(iii) -“直接推断关系”中，我找到了我需要的东西。基本上，我的 OntModel 需要遵守以下规则：“不能允许可以推断的直接语句”。但不幸的是，我不知道如何在耶拿实现这个想法。

我的示例代码是：

```
 String baseUri="http://entidades.owl";
    OntModel base = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM);

    OntClass studant = base.createClass(baseUri +"#Student");

    OntClass person = base.createClass(baseUri +"#Person");
    OntClass ser = base.createClass(baseUri +"#ThingLive");

    Property isA = base.createTransitiveProperty(baseUri+"#IsA", true);
    nome.addDomain(person);
    base.add(new StatementImpl(studant, isA, person));
    base.add(new StatementImpl(person, isA, ser));

    base.createIndividual(baseUri+"#JonhDoe",studant);
    base.createIndividual(baseUri+"#JonhDoe",person);
    base.createIndividual(baseUri+"#JonhDoe",ser);
    base.write(System.out);

    OntModel model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM_MICRO_RULE_INF,base);
    model.write(System.out); 
```

出色地，

1.  我尝试将“isA”属性构建为“transitiveProperty”，但推理器无法识别它。我该如何解决？

2.  如果我改变： base.add(new StatementImpl(studant, isA, person)); base.add(new StatementImpl(person, isA, ser));

至：

person.addSubClass(学生); ser.addSubClass(person);

推理器能够完美地推断，但不幸的是 OntModel “base”和 OntModel “model”向我展示了相同的 RDF。我认为“模型”应该向我展示反映的最小 RDF 图。

我该怎么做才能看到 RDF 结构的这种变化？

十分感谢大家！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:16:26.320

你的代码很好，唯一的问题是：

```
model.write(System.out); 
```

调用`OntModel.write()`，它被定义为仅编写*基本模型*。这是因为许多用户希望能够拥有读取模型、操作模型、保存模型的工作流，并且不让保存的版本被传递属性的闭包污染。

如果您查询模型，您的查询将看到推断的三元组以及基本模型三元组。只是`write()`这里受到影响。如果您真的想编写整个模型进行调试，包括推导三元组，请使用`OntModel.writeAll()`.

# python - Python：递归函数查找列表中的最大数

> ID：12711397
> 
> 赞同：4
> 
> 时间：2012-10-03T15:07:48.317
> 
> 标签：python, recursion

我正在尝试从教科书 Zelle Python Programming 中进行实验室工作

这个问题要求我“编写并测试一个递归函数`max()`来查找列表中的最大数字。最大值是第一项和所有其他项中的最大值。” 我不太明白教科书上的问题。

```
def Max(list):
    if len(list) <= 1:
        else:
            return list[0]
        else:
            m = Max(list[1:])
            return m if m > list[0] else list[0]

def main():
    list = eval(raw_input(" please enter a list of numbers: "))
    print("the largest number is: ", Max(list))

main() 
```

或者，也许我想打开一个带有数字的 txt 文件，然后使用递归？

我相信这样的递归作品

```
def function()
> if something:
>>return 0
>else:
>>return function() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T15:12:37.100

您对递归如何工作的理解似乎很好。

你的 if 块搞砸了，你有 2`else`对 1`if`并且对齐不正确。您需要删除一个级别`else`以下的第一个和取消缩进的所有内容。`if`例如：

```
def Max(list):
    if len(list) == 1:
        return list[0]
    else:
        m = Max(list[1:])
        return m if m > list[0] else list[0]

def main():
    list = eval(raw_input(" please enter a list of numbers: "))
    print("the largest number is: ", Max(list))

main() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-19T20:05:53.843

我发布了该问题的不同解决方案。大多数答案在每个递归调用中使用切片运算符来操作列表。当练习没有提供要使用的严格函数原型时，我还将列表的长度作为函数参数传递。

假设我们尝试从包含**n 个元素的序列****S**中查找并返回最大元素。

 ****函数原型：** `Max(S, n)`

**基本情况：**如果**S**只包含一项，则返回它。*（显然，序列中唯一的项目是最大的。）*

**重复：**如果不是基本情况，则`Max`每次调用少一项，即调用`Max(S, n-1)`。然后我们将返回值存储到一个名为的变量中，该变量`previous`指示序列中的前一个元素，并与序列中的下一个元素（当前递归调用中最右边的元素）检查该值，并返回这些值的最大值。

下图给出了上述过程的递归跟踪。假设我们尝试从包含 的列表中找到最大值`[5, 10, 20, 11, 3]`。

[![递归跟踪](../Images/6b0096cf4def8e391ea33e52e1715603.png)](https://i.stack.imgur.com/lqJJn.png)

***注意：****为了进一步帮助您，请记住，我们从最右边的元素到最左边的元素递归地迭代列表。*

最后是工作代码：

```
def find_max_recursively(S, n):                                                
    """Find the maximum element in a sequence S, of n elements."""             
    if n == 1:  # reached the left most item                                   
        return S[n-1]                                                          
    else:                                                                      
        previous = find_max_recursively(S, n-1)                                
        current = S[n-1]                                                       
        if previous > current:                                                 
            return previous                                                    
        else:                                                                  
            return current                                                     

if __name__ == '__main__':                                                     
    print(find_max_recursively([5, 10, 20, 11, 3], 5)) 
```

**注意：**默认情况下，递归实现仅适用于 1000 个大多数元素的序列。

> 为了对抗无限递归，Python 的设计者有意决定限制可以同时激活的函数激活的总数。此限制的精确值取决于 Python 分布，但典型的默认值为`1000`. 如果达到此限制，Python 解释器将引发`RuntimeError`带有消息的 a `maximum recursion depth exceeded`。
> 
> *Michael T. Goodrich (2013)，[Python 中的数据结构和算法](https://rads.stackoverflow.com/amzn/click/com/1118290275)，Wiley*

要更改默认值，请执行以下操作：

```
import sys
sys.setrecursionlimit(1000000) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-12T17:28:07.930

这是解决上述问题的另一种方法

```
def maximum(L):
    if len(L) == 1:
        return L[0]
    else:
        return max(L[0],maximum(L[1:])) 
```

所以示例输入和输出：

```
L= [2,4,6,23,1,46]
print maximum(L) 
```

生产

```
46 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T15:15:25.727

基本方法是这样的。

1.  如果列表仅包含一个元素，则该元素是最大值。立即归还。
2.  否则，列表包含多个元素。列表中的第一个元素要么是最大值，要么不是。
3.  第一个元素的最大值就是列表中的第一个元素。
4.  递归调用`Max`其余元素（除第一个元素外的所有元素）以找到这些元素的最大值。
5.  比较第 3 步和第 4 步的结果。结果是较大的数字。把它返还。

现在你有一些语法错误。例如，您有两个`else`子句用于单个`if`，并且缩进看起来很有趣。你只能有一个`else`块`if`。但是，如果您遵循这些说明，您应该有一个有效的算法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T15:14:54.370

```
def Max(lis,maxx=-float("inf")):

    if len(lis) == 1:            #only one element in lis
        return maxx if maxx>lis[0] else lis[0]  #return lis[0] if it's greater than maxx

    else:
        m=lis[0] if lis[0]>maxx else maxx  # m = max(lis[0],maxx)
        return Max(lis[1:],m)              #call Max with lis[1:] and pass 'm' too

print Max([1,2,39,4,5,6,7,8]) #prints 39
print Max([1,2,3,4,5,6,7,8]) #prints 8 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-22T20:26:57.423

这些解决方案在特定列表大小后失败。

这是一个更好的版本：

```
def maximum2(a, n):
    if n == 1:
        return a[0]
    x = maximum2(a[n//2:], n - n//2)
    return x if x > a[0] else a[0]
def maximum(a):
    return maximum2(a, len(a))

maximum(range(99999))

>>> 99998 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-16T11:32:09.973

一种简单的方法是先对列表进行排序，然后使用索引。

这是一个可行的功能：

```
a = [1,233,12,34]

def find_max(a):
    return sorted(a)[-1] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-21T11:57:36.413

```
def find_max(arr):
  """find maximum number in array by recursion"""
  if arr == []: # if its an empty array
    return 0
  if len(arr) == 1: # if array has only one element
    return arr[0]
  else: # get max of first item compared to other items recursively
    return max(arr[0], find_max(arr[1:])) # 1: means all other excluding 0th element

def main():
  print(find_max([2,3,5,6,7,1])) # will print max - 7

if __name__ == "__main__":
  main() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-03T19:28:52.077

你也可以这样做：

```
def maximum(data, start, stop):

    if start >= stop:
            return data[start]

    else:
            if data[start] >= data[stop - 1]:
                return maximum(data, start, stop - 1)

            else:
                return maximum(data, start + 1, stop) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-21T05:10:32.520

```
def recursiveMax(a):
    if len(a) == 1:
        return a[0]
    else:
        return a[0] if a[0] > recursiveMax(a[1:]) else recursiveMax(a[1:]) 
```

测试：

```
print(recursiveMax([1, 2, 15, 6, 3, 2, 9]))
print(recursiveMax([98, 2, 1, 1, 1, 1, ])) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-10-02T07:50:01.407

这是我的答案，只有一行代码:))

```
def max_value(n_list):
    return n_list[0] if len(n_list) == 1 else max(n_list[0], max_value(n_list[1:])) 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2016-01-31T04:12:48.600

```
def getMaxNumber(numbers): 
    return 'N.A' if len(numbers) == 0 else max(numbers) 
```**

# asp.net-mvc-3 - 从 LINQ 到 SQL 查询返回后的 ObjectDisposedException

> ID：12711405
> 
> 赞同：0
> 
> 时间：2012-10-03T15:08:19.750
> 
> 标签：asp.net-mvc-3, linq, linq-to-sql, objectdisposedexception

我将 MVC3 与 .NET 4.0 一起使用，当我的创建表单被调用时，我得到一个 ObjectDisposedException ，表明该对象已被释放。此 MVC3 页面语句出现异常：

```
@Html.DropDownListFor(model => model.Country, GeneralActivity.GetCountriesMVC("NL")) 
```

调用的方法是这样的：

```
IEnumerable<SelectListItem> GetCountriesMVC(string preselectCountryCode)
{
   ... some error checking code omited for simplicity ...
   IEnumerable<SelectListItem> qlist;
   using (Data.MyDataContext ctx = new Data.MyDataContext()) {
      qlist = from p in ctx.Countries select new SelectListItem {
          Text = p.CountryName,
          Value = p.CountryCodeId,
          Selected = (p.CountryCodeId == preselectCountryCode)
      };
   }
   return qlist;
} 
```

在调试期间，我执行到 return 语句，然后它离开并将我带到 MVC 页面上的调用 @Html 语句并引发异常。

qlist 实例在 USING 语句之外声明并由 LINQ 查询初始化，所以我不明白为什么它说对象已被释放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:15:06.800

您实际上并没有执行查询 - 因此，当您尝试访问 qList 时，它会尝试连接回您的数据库，并且连接已关闭。

尝试将您的查询转换为列表，以便将其存储在内存中：

```
 qlist = (from p in ctx.Countries select new SelectListItem {
      Text = p.CountryName,
      Value = p.CountryCodeId,
      Selected = (p.CountryCodeId == preselectCountryCode)
  }).ToList(); 
```

# jmeter - Jmeter - 如何向计数器添加前缀。类似于随机变量

> ID：12711406
> 
> 赞同：5
> 
> 时间：2012-10-03T15:08:19.570
> 
> 标签：jmeter

目前在随机变量中，我可以在变量的输出格式中添加前缀或后缀。然而，这个不错的功能不适用于简单的计数器控制器。每次使用变量时连接字符串+${counter} 对我来说不是一个好的选择，因为我经常这样做。

有没有办法以随机变量的方式实现前缀+计数器？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:25:00.643

您是在谈论 Counter Config Element 吗？

如果是这样，可以使用数字格式属性：

*   [http://jmeter.apache.org/usermanual/component_reference.html#Counter](http://jmeter.apache.org/usermanual/component_reference.html#Counter)

看：

```
 Format   Optional format, e.g. 000 will format as 001, 002 etc. 
   This is passed to DecimalFormat, so any valid formats can be used. 
   If there is a problem interpreting the format, then it is ignored. 
   [The default format is generated using Long.toString()] 
```

![在此处输入图像描述](../Images/b91264124510f37a79525b2d5f922efd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-07T10:05:40.283

在计数器的“数字格式”字段中，用 0...0 编写您的模式，表示值向上计数。

例子：

“数字格式”模式：prefix_000_suffix

真实值：prefix_001_suffix、prefix_002_suffix、prefix_003_suffix、...

希望这可以帮助！

# c# - C# Json.Net - 如何反序列化复杂对象

> ID：12711407
> 
> 赞同：2
> 
> 时间：2012-10-03T15:08:19.890
> 
> 标签：c#, json, serialization, json.net

我有一个 JSON 编码的字符串。它看起来像这样：

{"jsonrpc":"2.0","method":"test","params":["80851851709e01bc9453cced585a7bca","this"],"id":3}

由于某种原因，我无法使用 C# 访问“参数”。对象返回 null。这是我正在使用的代码：

```
public class Access : System.Web.Services.WebService
{

    [WebMethod]
    public string EntryMethod(string json)
    {
        Requests d = JsonConvert.DeserializeObject<Requests>(json);
        return "done";
    }
}
public class Requests
{
    public string jsonrpc { get; set; }
    public string method { get; set; }
    public List<string> param { get; set; }
    public string id { get; set; }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:10:09.517

由于错字，应该是：

```
ParamS // Add one more S 
```

所以，你的班级应该是：

```
public class Requests
{
    public string jsonrpc { get; set; }
    public string method { get; set; }
    public List<string> @params { get; set; }
    public string id { get; set; }
} 
```

# php - 使用 if 语句进行 DUPLICATE KEY UPDATE

> ID：12711411
> 
> 赞同：0
> 
> 时间：2012-10-03T15:08:28.580
> 
> 标签：php, mysql, duplicates

我需要从两个 csv 文件中导入数据。

如果第二个文件包含相同的 sku，它应该只在价格低于价格存在时更新。

这是我的代码：

```
$sql = mysql_query("INSERT INTO varer (sku,productname,price,mpn,stock,distributor)  

VALUES ('$sku','$productname','$price','$mpn','$stock','$distributor')"); 
```

上面的代码仅适用于插入数据，所以问题只是存在相同的 sku。

这是我想做的：

如果`$SKU`数据库中存在且`$pric`e 低于数据库中存在的价格，则应更新`$price`, `$productname`, `$stock`,`$distributor`

如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:11:44.313

从[文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

```
INSERT INTO table (a,b,c) VALUES (1,2,3),(4,5,6)
  ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b); 
```

似乎原始列以其名称可用，并且要插入的值需要 VALUES() 函数。更新到新旧价格的最大值应该很容易：[如何在 MySQL 中获取两个值的最大值？](https://stackoverflow.com/questions/1565688/how-to-get-the-max-of-two-values-in-mysql)

# objective-c - Objective-C：到达 samba url 上的文件

> ID：12711414
> 
> 赞同：0
> 
> 时间：2012-10-03T15:08:32.097
> 
> 标签：objective-c, networking, samba

我在 Finder 中有一个映射的 samba 网络驱动器（例如“smb://192.168.15.119/public/ptest/test.rtf”），并且想将该驱动器中的文件复制到我的桌面。

你们知道如何实现这一目标吗？通过映射驱动器连接到该 url 不是强制性的，如果您有一个简单地获取该 url 并从中复制文件的解决方案，那也完全可以。

**编辑**：根据`Bastian`的回答，解决方案是使用 NSFileManager 的 copyItemAtPath 方法，源路径为：

```
NSString *sourcePathx1 = [NSString stringWithFormat:@"/Volumes/public/ptest/test.rtf"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:22:38.257

当您连接到网络驱动器时，查找器会将其安装到 /Volumes ...然后您可以通过此安装点访问共享。

如果共享未连接，您可以通过执行连接它

```
mount_smbfs //host/share /some/temp/folder 
```

如果您想直接访问该文件，您将需要某种 samba 库，例如[http://nicolas.brodu.numerimoire.net/common/programmation/libsmb/archived_site/index.html](http://nicolas.brodu.numerimoire.net/common/programmation/libsmb/archived_site/index.html)但我不知道有任何活跃的库。

# asp.net - 可空枚举值不显示在智能感知或设计视图中

> ID：12711417
> 
> 赞同：2
> 
> 时间：2012-10-03T15:08:34.617
> 
> 标签：asp.net, vb.net, enums, custom-controls, intellisense

我正在开发一个自定义用户控件。用户控件具有映射到枚举的属性，并且不应具有任何默认值，即控件的使用者必须设置它。

**物业：**

```
<Description("This is the property description"),
Category("SomeCategory"), Bindable(True)>
Public Property SomeProperty As Enumerations.SomeEnumeration? 
```

**枚举：**

```
Namespace Enumerations
    Public Enum SomeEnumeration
        Zero = 0
        One
        Two
    End Enum
End Namespace 
```

**支票：**

```
If SomeProperty Is Nothing Then
    Throw New ApplicationException("You must set SomeProperty.")
End If 
```

**问题：**

所有的逻辑都有效。我的问题是，当您尝试`SomeProperty` **从标记**设置时，没有任何枚举值显示在智能感知中。我的一位同事发现[了这个相关的支持请求](http://connect.microsoft.com/VisualStudio/feedback/details/760202/nullable-enumeration-types-dont-get-intellisense-auto-complete)，因此这似乎是一个已知问题。

我的问题是，在此控件上支持我需要的所有行为以及在此属性上保持智能感知的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:15:31.543

我可以重新创建这个问题 - 使枚举为空会使智能感知停止工作。我猜这是因为可空类型是对象。

建议保持枚举不可为空。具有默认值`NotSet`or `None`。如果未设置枚举，您可能会在 getter 或初始化代码中引发异常。

财产

```
<Description("This is the property description"),
Category("SomeCategory"), Bindable(True)>
Public Property SomeProperty As Enumerations.SomeEnumeration 
```

枚举

```
Namespace Enumerations
    Public Enum SomeEnumeration
        NotSet = -1
        Zero = 0
        One
        Two
    End Enum
End Namespace 
```

查看

```
If SomeProperty Is SomeProperty.NotSet Then
    Throw New ApplicationException("You must set SomeProperty.")
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:15:46.233

```
Public Enum SomeEnumeration
    NotSet = -1
    Zero = 0
    One
    Two
End Enum 
```

enum 的默认值为 0，因此如果您声明 SomeEnumeration 的变量，该变量的默认值将为零。例如; SomeEnumeration SomeProperty;

SomeProperty 的值将是 SomeEnumeration.Zero

# android - 更改首选项屏幕背景颜色

> ID：12711418
> 
> 赞同：6
> 
> 时间：2012-10-03T15:08:35.177
> 
> 标签：android, preferences, preferenceactivity

我使用此代码更改颜色 PreferenceScreen。但是如何在主 Preference 活动中获取 Preference Screen 并更改 Preference Screen 颜色？

```
getListView().setBackgroundColor(Color.TRANSPARENT);
    getListView().setCacheColorHint(Color.TRANSPARENT);
    getListView().setBackgroundColor(Color.rgb(4, 26, 55)); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-25T04:09:48.843

您可以覆盖 OnCreate 方法：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = super.onCreateView(inflater, container, savedInstanceState);
        view.setBackgroundColor(getResources().getColor(<COLOR>));
        return view;
    } 
```

或者你可以在styles.xml中输入以下内容

```
<style name="PreferenceTheme" parent="@style/Theme.AppCompat.Light.DarkActionBar">
        <item name="preferenceTheme">@style/PreferenceThemeOverlay</item>
        <item name="android:background">@android:color/white</item>
    </style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-16T12:36:24.233

只需扩展 AppTheme 并使用 colorBackground 属性

```
<style name="PreferenceTheme" parent="@style/AppTheme">
    <item name="android:colorBackground">@color/colorBackground</item>
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-08T07:31:47.147

我正在使用 PreferenceFragmentCompat，以下解决方案对我有用。

设置画面

```
import android.os.Bundle
import android.util.TypedValue
import android.view.View
import androidx.annotation.ColorInt
import androidx.preference.ListPreference
import androidx.preference.Preference
import androidx.preference.PreferenceFragmentCompat
import com.almarai.easypick.R

class SettingsScreen : PreferenceFragmentCompat(), 
Preference.OnPreferenceChangeListener {

    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {

    //Providing the XML file for the view to be created
    setPreferencesFromResource(R.xml.app_settings_preferences, rootKey)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {

    //Get the Theme specific color
    val typedValue = TypedValue()
    val theme = requireContext().theme

    /*R.attr.colorBackgroundScreenBody is my own attr from attrs.xml file, 
    you can directly use R.color.red - Or any color from your colors.xml 
    file if you do not have multi-theme app.*/
    theme.resolveAttribute(R.attr.colorBackgroundScreenBody, typedValue, true)
    @ColorInt val color = typedValue.data

    view.setBackgroundColor(color)

    super.onViewCreated(view, savedInstanceState)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:13:49.863

为您的活动使用[样式](http://developer.android.com/guide/topics/ui/themes.html)。

# java - PigServer 将作业 jar 留在本地文件系统上

> ID：12711419
> 
> 赞同：1
> 
> 时间：2012-10-03T15:08:44.420
> 
> 标签：java, apache-pig

我在 Java 应用程序中使用 Pig。目前我有一个线程每 15 分钟运行一次猪查询。每次运行后，我的临时文件夹中都会留下 MR Job Jar，在我的例子中是 /tmp。

他们的代码结构方式是在启动时创建一个 PigServer 实例。然后在一个循环中，我用不同的分区重新注册一个查询，并通过 openIterator 调用执行查询。在线程关闭之前，PigServer 不会关闭。

所以我的问题变成了我需要打个电话来清理罐子吗？还是我需要为每次执行关闭 PigServer？还是我应该在查询完成后自己清理 FS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:48:16.307

看来您确实需要在每次使用后创建和销毁 PigServer 对象以清理 tmp 空间中的 pig* 目录。然而，这似乎并没有清理 Job jar。所以我确实必须建立自己的清理功能来处理这个问题。

# java - lucene中的首选字段搜索

> ID：12711420
> 
> 赞同：0
> 
> 时间：2012-10-03T15:08:47.043
> 
> 标签：java, search, solr, lucene, full-text-search

我有一个索引，我想在多个字段上搜索它。我正在为此应用程序开发查询生成器，其中我想比其他字段更偏爱某个字段。

假设这些字段是：`RollNo, Name, Age`

在这种情况下，当有人用`RollNo`field 和 进行搜索时`Name`，我想优先考虑`RollNo`匹配的结果。

任何人都知道如何在 Lucene 中执行此操作。我正在使用 Lucene 3.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:51:42.133

您可以使用[Query.setBoost()](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/Query.html#setBoost%28float%29)方法在查询期间进行提升。

[查看本](http://blog.architexa.com/2010/12/custom-lucene-scoring/)文档的boosting 部分以获取更多信息。

# android - 使用进度对话框时强制关闭此活动的错误

> ID：12711424
> 
> 赞同：0
> 
> 时间：2012-10-03T15:09:16.307
> 
> 标签：android, webview, progressdialog

这段代码中有什么问题，它说强制关闭？使用进度对话框时出错

```
ourBrow = (WebView) findViewById(R.id.wvBrowser);
ourBrow.setBackgroundColor(Color.parseColor("#000000"));
ourBrow.getSettings().setJavaScriptEnabled(true);
ourBrow.setWebViewClient(new WebViewClient() {
    ProgressDialog dialog;
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        dialog = ProgressDialog.show(Moile_gole.this, "",
                    "Loading. Please wait...", true);
        ourBrow.loadUrl(url);
        return true;
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        dialog.dismiss();
            // HIDE PROGRESS DIALOG LOADING IT HAS FINISHED
        }

    });

    ourBrow.loadUrl("http://www.google.com"); 
```

日志猫：

```
10-03 20:43:59.440: D/AndroidRuntime(304): Shutting down VM 10-03 20:43:59.440: W/dalvikvm(304):
threadid=1: thread exiting with uncaught exception (group=0x4001d800) 10-03 20:43:59.461: E/AndroidRuntime(304): FATAL EXCEPTION: main 
10-03 20:43:59.461: E/AndroidRuntime(304): java.lang.NullPointerException 
10-03 20:43:59.461: E/AndroidRuntime(304): at com.mobile.specification.Moile_Specification$2.onProgressChanged(Moile_Specifica‌​tion.java:68) 
10-03 20:43:59.461: E/AndroidRuntime(304): at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:358)
10-03 20:43:59.461: E/AndroidRuntime(304): at android.os.Handler.dispatchMessage(Handler.java:99) 
10-03 20:43:59.461: E/AndroidRuntime(304): at android.os.Looper.loop(Looper.java:123)
10-03 20:43:59.461: E/AndroidRuntime(304): at android.app.ActivityThread.main(ActivityThread.java:4627) 
10-03 20:43:59.461: E/AndroidRuntime(304): at java.lang.reflect.Method.invokeNative(Native Method) 
10-03 20:43:59.461: E/AndroidRuntime(304): at java.lang.reflect.Method.invoke(Method.java:521) 
10-03 20:43:59.461: E/AndroidRuntime(304): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 
10-03 20:43:59.461: E/AndroidRuntime(304): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
10-03 20:43:59.461: E/AndroidRuntime(304): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:40:36.200

由于对话框引起的 NullPointerException，发生强制关闭错误。shouldOverrideUrlLoading() 方法仅在单击 WebView 内的链接时调用，而不是在您尝试通过 webview.loadUrl(url) 加载网页时调用。所以这里你的对话框没有初始化并导致 NullPointerException。

我建议您使用 webchromeclient 和 ProgressBar(pb) 来显示网页加载进度，如下例所示。

```
wv.setWebChromeClient(new WebChromeClient(){

         public void onProgressChanged(WebView view, int progress) 
         {

             pb.setProgress(progress);
             if(progress==100)
                 pb.setVisibility(View.GONE);
          }

    }); 
```

# xcode - 如何为 4" 屏幕指定图像资源？

> ID：12711427
> 
> 赞同：4
> 
> 时间：2012-10-03T15:09:22.500
> 
> 标签：xcode, ios5, ios6, iphone-5

在 Xcode 我有这样的：

![截屏](../Images/e3ae117e3ec8226fa9ea3f1c6ff328cd.png)

在`MyViewController.m`我正在加载图像时，它很好地在需要时加载了@2x（在视网膜上）

```
tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"emptyList.png"]]; 
```

我想添加另一个只能在 iPhone 5 的 4" 屏幕上加载的文件。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T15:16:45.517

这个问题不是很清楚，但我假设您要问的是：iPhone 5 特定图像的命名约定是什么？

我们已经知道我们可以使用以下方法定位 iPad/iPhone 和这些设备的视网膜/标准显示器：

```
.png
@2x.png
~iphone.png
~ipad.png 
```

等等

好吧，关于 iPhone 5 特定图像的问题已经在 Apple Developer Forums 上进行了详细讨论，很明显没有办法做到这一点。

值得注意的是，一个线索是必须命名触发 4" 兼容应用程序的 Default.png 文件，`Default-568h@2x.png`这引发了许多开发人员认为添加后缀“-568h@2x.png”是可行的方法。事实并非如此。你可以在 Apple Developer Forums 上找到此讨论[。](https://devforums.apple.com/thread/166421?tstart=0)

通常人们将此作为一种解决方案，希望能适应更大的屏幕和更大的图像。但是，您应该实现 iOS 6 的**AutoLayout**功能。请记住，iPhone 5 的操作系统最低版本为 iOS 6，否则您也可以使用弹簧和支柱实现布局。

这应该足以缩放到更大的屏幕。如果您希望为更大的屏幕提供完全不同的布局，您可以检测屏幕尺寸并进行相应调整。您还可以在 Xcode 中指定一个不同的 nib 文件以在 4" 屏幕上使用。希望这会有所帮助。

Apple 开发者论坛上有关此[线程](https://devforums.apple.com/thread/166642?tstart=15)的更多信息。

# android - BroadcastReceiver 的 onreceive 中的 Android PendingIntent 为 null

> ID：12711428
> 
> 赞同：1
> 
> 时间：2012-10-03T15:09:25.663
> 
> 标签：android, broadcastreceiver, android-pendingintent

我有一个我正在打电话的应用程序`sendBroadcast()`。我的接收器类如下：

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.location.LocationManager;
import android.util.Log;

public class ProximityIntentReceiver extends BroadcastReceiver {

    private static final String TAG = ProximityIntentReceiver.class
            .getSimpleName();
    private static final int NOTIFICATION_ID = 1000;

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.e(TAG, "inside prox onreceive");
        String key = LocationManager.KEY_PROXIMITY_ENTERING;
        Boolean entering = intent.getBooleanExtra(key, false);
        if (entering) {
            Log.d(getClass().getSimpleName(), "entering");
        } else {
            Log.d(getClass().getSimpleName(), "exiting");
        }
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                null, 0);
        Notification notification = createNotification();
        notification.setLatestEventInfo(context, "Proximity Alert!",
                "You are near your point of interest.", pendingIntent);
        notificationManager.notify(NOTIFICATION_ID, notification);
    }

    private Notification createNotification() {
        Notification notification = new Notification();
        notification.icon = R.drawable.ic_launcher;
        notification.when = System.currentTimeMillis();
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.flags |= Notification.FLAG_SHOW_LIGHTS;
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notification.defaults |= Notification.DEFAULT_LIGHTS;
        notification.ledARGB = Color.WHITE;
        notification.ledOnMS = 1500;
        notification.ledOffMS = 1500;
        return notification;
    }
} 
```

我`NullPointerException`在下一行有一个。

```
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0); 
```

调用服务如下。

```
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.support.v4.content.LocalBroadcastManager;
import android.util.Log;

public class LocationService extends Service {

    private static final String TAG = LocationService.class.getSimpleName();
    LocationManager mlocManager;
    LocationListener mlocListener;
    NfcScannerApplication nfcscannerapplication;
    private static final String PROX_ALERT_INTENT = "com.carefreegroup.ProximityAlert";
    Intent intent;
    PendingIntent proximityIntent;
    ProximityIntentReceiver pir;

    @Override
    public void onCreate() {
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        mlocListener = new MyLocationListener();
        pir = new ProximityIntentReceiver();
        intent = new Intent(PROX_ALERT_INTENT);
        proximityIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
        Log.e(TAG, "Service created and location manager and listener created");
        super.onCreate();
    }

    @Override
    public void onDestroy() {
        mlocManager.removeUpdates(mlocListener);
        unregisterReceiver(pir);
        Log.e(TAG, "Service destroyed");
        super.onDestroy();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                mlocListener);
        IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);
        registerReceiver(pir, filter);
        Log.e(TAG, "requesting location updates");
        super.onStart(intent, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;// TODO Auto-generated method stub
    }

    private class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location loc) {
            Log.e(TAG, "about to set geopoints in application object");
            nfcscannerapplication.setLat(loc.getLatitude());
            nfcscannerapplication.setLon(loc.getLongitude());
            fireLocationChangeEvent(loc.getLongitude(), loc.getLatitude());
            mlocManager.addProximityAlert(53.653480529785156,
                    -1.51961088180542, 2, -1, proximityIntent);
            sendBroadcast(intent);
        }

        @Override
        public void onProviderDisabled(String provider) {}

        @Override
        public void onProviderEnabled(String provider) {}

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    }// end of MyLocationListener

    private void fireLocationChangeEvent(double lon, double lal) {
        LocalBroadcastManager.getInstance(getApplicationContext())
                .sendBroadcast(new LocationChangeIntent(lon, lal));
    }
}// end of service 
```

.

为什么我`NullPointerException`在这条线上得到一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:45:39.100

由于您尚未创建 Intent 对象并在 getActivity 方法中放置 null，因此它会引发 NullPointerException。我希望你想在 Intent Action 触发 BroadcastReceiver 时调用 LocationService。如果是这样，为此您需要创建调用服务的 Intent，如下所示，然后将 Intent 对象放入待处理的 Intent 中。

```
Intent i = new Intent(context,LocationService.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, i, 0); 
```

# asp.net - ajax aspx 页面中包含的图像的相对路径

> ID：12711441
> 
> 赞同：0
> 
> 时间：2012-10-03T15:10:05.960
> 
> 标签：asp.net, iis

在我的 web 应用程序中，我有一个文件夹 Views。在这个文件夹中有几个 .aspx 页面。我不直接在 webapp 中使用呈现的内容，而是在 webapp 根目录的主 aspx 页面中使用 ajax 请求内容。

现在，当我引用图像时，“images/image.png”将起作用，因为图像引用位于根目录的 aspx 页面中。当我将其更改为“/images/image.png”时，这将不起作用，因为根由虚拟 IIS 文件夹确定。

我怎样才能有一个干净的参考，例如“/images/image.png”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:45:39.963

首先，可能也是最优雅的，让元素在服务器上运行并使用与根相关的 url：

```
<img src="~/images/image.png" alt="image" runat="server" /> 
```

这将自动将您的 src-value 转换为将从您当前位置解析的路径。但是，有一个警告。如果您在包含的页面上执行此操作，asp.net 可能会在此处创建不正确的值，因为它可能会变形为

```
<img src="../images/image.png" alt="image" /> 
```

如果你是一个目录下来。因此，如果您将此结果包含在应用程序根文件夹的页面中，您的值可能不正确。我还没有看到解决这个问题的好方法。但是，如果文件不存在，它将向您显示警告。

或者，您可能希望手动设置此类页面的根路径：

```
<img src="<%=Request.ApplicationPath %>/images/image.png" alt="image" /> 
```

这将转换为始终来自站点根目录的路径：

```
<img src="/AppPath/images/image.png" alt="image" /> 
```

显然，这有点冗长。此外，如果引用的文件不存在，您将看不到任何警告，因为它将动态构建。

# php - 无法运行查询：?? 没有查询错误消息让我无处可去

> ID：12711446
> 
> 赞同：1
> 
> 时间：2012-10-03T15:10:13.517
> 
> 标签：php, mysql, authentication, login

所以我有这个验证码。除了我输入错误的用户名外，其他一切都有效。它只是一直显示在页面中：“无法运行查询：” <-- 只有这个。我不知道怎么了。请帮忙。

这是我那部分的代码：

```
if($UserN){
    if($UserP){
        require("connect.php");

        $query = mysql_query("SELECT * FROM customer WHERE UserName = '$UserN'");
        $numrows = mysql_num_rows($query) or die ('Unable to run query:'.mysql_error());

        if($numrows == 1){
            $row = mysql_fetch_assoc($query)or die ('Unable to run query:'.mysql_error()); // fetch associated: get function from a query for a database
            $dbpass = $row['PassWord']; // read password of inputted user from the query.
            $dbuser = $row['UserName']; // read username from the query
            $dbactive = $row['Active']; // read if user is active
            $dbid = $row['CustNum'];

            if($UserP == $dbpass){
                if($dbactive == 1){
                //set session information
                $_SESSION['CustNum'] = $dbid;
                $_SESSION['UserName'] = $dbuser;

                echo "<br><br><center><b>You have been logged in as <b>$dbuser</b>. <a href='orderform.php'>Click here</a> to go to the member page.</b></center><br><br>";
                }
                else
                    echo "$form <center><b>You need to activate your account.</b></center></br>";
            }
            else
                echo "$form <center><b>You did not enter a correct password.</b></center> </br>";
        }
        else
            echo "$form <center><b>The username you entered was not found.</b></center></br> ";

        mysql_close();
    }
    else
        echo "$form <center><b>You must enter your password. </b></center></br>";
}
else
    echo "$form <center><b>You must enter your username. </b></center></br>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:12:58.350

您的问题似乎是`mysql_num_rows()`在用户名无效的情况下返回 0 。

您可以像这样调整您的代码：

```
$numrows = mysql_num_rows($query);
if ($numrows === FALSE)
    die ('Unable to run query:'.mysql_error());
if ($numrows === 0) {
    echo "User not found!";
} 
```

注意使用`===`来测试是否`mysql_num_rows()`返回了 0 或 FALSE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:13:02.607

```
$numrows = mysql_num_rows($query) or die ('Unable to run query:'.mysql_error()); 
```

如果您的查询返回 0 行，则此部分的第一部分将评估为 false。这将触发`die()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:15:02.063

如果有任何结果集返回，则将此行更改`if($numrows == 1){`为您希望条件检查通过。`if( $numrows !== FALSE && $numrows >= 1 ){`

或者，如果总是只返回 1 条记录，那么`if( $numrows !== FALSE && $numrows === 1 ){`

# r - R中的TeachingDemos库

> ID：12711449
> 
> 赞同：0
> 
> 时间：2012-10-03T15:10:35.833
> 
> 标签：r, tk

在 tkexamp 方法中，如何将复选框项目初始化为 TRUE？我应该使用什么选项？到目前为止，我还没有找到任何例子。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:21:00.447

要将复选框默认为 TRUE，您需要将 init 选项设置为“T”。

```
tkexamp( plot(1:10), list(ann=list('checkbox', init='T')) ) 
```

该软件包的下一个版本将对此进行更好的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:54:12.583

这不会回答您的问题（已经回答），但显示了在 R 中制作简单交互式图形的替代方法。在这种情况下，使用 RStudio`manipulate`包的语法：

```
library(gWidgets) ## or use gWidgets2 from github
## get code
tmp <- tempfile()
cat(RCurl::getURL("https://raw.github.com/jverzani/gWidgets2/master/inst/examples/manipulate.R"), file=tmp)
source(tmp)

# example like a tkexamp demo
# some common plotting parameters
x <- sort( runif(25,1,10) )
y <- rnorm(25, x)

w <- gwindow("Example of a simple to make graphic", visible=FALSE)
manipulate(plot(x, y, pch=pch, cex=cex/10, type=type, lwd=lwd, lty=lty),
           pch = slider(0, 25, 1, 1),
           cex = slider(1, 50, 15, 1),  # tcltk in steps of 1 not .1
           type = picker('p','l','b','o','c','h','s','S','n'),
           lwd = slider(0, 5, 1, 1),
           lty = slider(0, 6, 1, 1),
           ##
           container=w
           )
visible(w) <- TRUE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:32:11.290

[这里](http://www.tcl.tk/man/tcl8.5/TkCmd/checkbutton.htm#M6)：

> 如果选中了一个复选按钮，则指标通常以选定的外观绘制，并且与该复选按钮关联的 Tcl 变量设置为特定值（通常为 1）。

反之亦然

# macros - 如何在 Razor 宏中获取当前成员

> ID：12711450
> 
> 赞同：6
> 
> 时间：2012-10-03T15:10:35.263
> 
> 标签：macros, umbraco

我在[Our Umbraco 论坛](http://our.umbraco.org/forum/developers/razor/35083-How-to-get-current-member-in-a-Razor-macro)上问过这个问题，但是我也想通过在此处发布相同的问题来增加获得解决方案的机会。

我遇到的问题是，在 Razor 宏中，我无法获取当前`Member`正在访问该站点的人员。我尝试了以下方法：

*   调用 Member.GetCurrentMember()，但这返回 NULL。
*   调用 Membership.GetUser()，但这返回 NULL
*   调用 UmbracoEnsuredPage.CurrentUser 返回 NULL；

是否有另一种方法可以让当前`Member`查看上述方法在我的情况下如何不起作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T15:27:30.077

```
var m = Membership.GetUser(); 
```

那应该可以，刚刚在 4.7.1 上自己验证过；如果您没有以会员身份登录，它将返回 NULL，但是当您登录时，它应该可以得到您想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T08:18:39.110

如果 NULL 是一个问题，则与 @EJBrennan 略有不同，您可以在尝试 GetUser() 之前检查您是否已登录：

```
if (umbraco.library.IsLoggedOn())
{
  m = Membership.GetUser();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-15T10:55:33.127

从 v7 开始，您可以使用[MembershipHelper](https://our.umbraco.org/documentation/Reference/Querying/MemberShipHelper/)

```
@Members.CurrentUserName
@Members.GetCurrentMember()
@Members.GetCurrentMemberId() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-12T20:47:36.727

现在更简单了，在 surfaceController 中你可以只使用一行：

```
var member = ApplicationContext.Current.Services.MemberService.GetById(Members.GetCurrentMemberId()); 
```

如果无法访问 Members MembershipHelper：

```
var memberShipHelper = new MembershipHelper(UmbracoContext.Current);
var member = ApplicationContext.Current.Services.MemberService.GetById(memberShipHelper.GetCurrentMemberId()); 
```

# c++ - 使用 Eclipse IDE 在 C++ 中对 GUI 进行编程需要做什么？

> ID：12711457
> 
> 赞同：5
> 
> 时间：2012-10-03T15:11:06.253
> 
> 标签：c++, eclipse, user-interface, eclipse-plugin

我想知道将 GUI 添加到 C++ 程序需要什么。我的意思是有一些按钮、滑块、窗口、文本框等，但不必使用 Visual Studio。

这可能吗？是否有允许在我的程序中编程/包含 GUI 的 eclipse 插件？

或者有人知道如何手动编程窗口、按钮、滑块或文本框吗？

我知道这将非常密集且耗时，但我想知道如何手动执行这种 GUI 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:51:32.523

你必须这样做：

[http://mentalissue.blogspot.se/2011/08/installing-eclipse-ide-for-c-and-qt.html](http://mentalissue.blogspot.se/2011/08/installing-eclipse-ide-for-c-and-qt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:11:48.907

使用 Qt。[http://qt-project.org/](http://qt-project.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:33:13.060

另一种选择是[WxWidgets](http://www.wxwidgets.org/)。它使用本机 API 来提供本机外观。

# java - Maven Gwt 原型错误

> ID：12711458
> 
> 赞同：1
> 
> 时间：2012-10-03T15:11:28.497
> 
> 标签：java, gwt, maven

所以我试图让 Maven Gwt 原型启动并运行。所以一些背景信息，我得到了 Maven 3.0，我在 Eclipse 中有 JDK 1.7。

我运行了原型，导入了项目，并遇到了一堆警告和错误，我解决了大部分问题，但这个：GWT SDk servlet.jar is missing in WEB-INF/lib 所以我搜索了堆栈溢出，并使用了某人的建议使用快速修复来同步它们。现在我收到一条警告说我没有安装 J2SE1.5。

我需要 J2SE1.5 来运行我的 Web 应用程序吗？为什么 JDK 1.7 还不够？

接下来，我收到警告

```
 Classpath entry com.google.gwt.eclipse.core.GWT_CONTAINER will not be exported or published. Runtime ClassNotFoundExceptions may result. 
```

我也不知道为什么这么说。

但是我可以毫无问题地运行 clean install gwt:run Maven 目标。

我可以压制警告，但我的 ADD 会杀了我，如果我要忽略它们，我宁愿理解这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:38:30.537

如果你`GWT_CONTAINER`的构建路径中有一个 Maven 项目的条目，那么你做错了（`gwt-maven-plugin`原型很可能做错了，但我没有耐心修复它的所有缺陷，而且似乎没有其他人打扰；也许我们应该简单地摆脱它）。

您应该首先安装 Google Plugin for Eclipse (GPE)，它与 ​​M2Eclipse (M2E) 协同工作，在检测到项目是 GWT 项目时自动配置项目（利用`gwt-maven-plugin`IIRC）。

然后确保您没有任何`.project`、`.classpath`或`.settings/`文件/文件夹，并在 Eclipse 中导入您的 Maven 项目。M2E 和 GPE 应该为您做一切。如果 GPE 没有将 GWT 特性添加到您的项目中，请检查项目首选项中的“Google Web Toolkit”，您会看到 GPE 会自动`gwt-user`从您的 POM 中选择 GWT SDK 作为*GWT SDK*。

请参阅[http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven](http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven)（建议避免使用`gwt-maven-plugin`原型）。

总而言之，从头开始更容易：添加依赖`gwt-user`项并添加 . `gwt-maven-plugin`，然后在 Eclipse 中使用 GPE 向导执行其他所有操作。
您可能还会发现[https://github.com/tbroyer/gwt-maven-archetypes](https://github.com/tbroyer/gwt-maven-archetypes)很有帮助。

# asp.net - ASP.NET 应用程序发送大量电子邮件

> ID：12711460
> 
> 赞同：0
> 
> 时间：2012-10-03T15:11:33.673
> 
> 标签：asp.net, email, sendmail, mass-emails

我们有一个应用程序允许用户向存储在数据库中的客户发送电子邮件。它是一个 ASP.NET 应用程序，它使用 AspMail 来发送这些电子邮件。

该应用程序会一一发送电子邮件，以防用户选择太多客户。我们看到有些用户拥有超过 10.000 名客户，当他们向他们发送电子邮件时，我们遇到了问题，例如 Hotmail。由于电子邮件过多，他们阻止了我们的 IP。这些邮件有时也会阻塞我们的邮件服务器。

我们想要最好的方法来做到这一点。也许最好只向成千上万的人发送一封电子邮件。

我们能做什么？一个一个发送比较好？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:16:50.437

大量电子邮件可能引发的无数问题是电子邮件服务诞生的原因。有多种邮件服务提供商拥有可直接从 .net 使用的详细记录的 API。Mailgun 是我用过的一个例子。他们已经建立了自己的递送服务，可以可靠地向 hotmail 和其他域发送电子邮件，而不会被列入黑名单。

以下是电子邮件服务提供商的一些链接。

*   [http://www.mailgun.com/](http://www.mailgun.com/)
*   [http://sendgrid.com/](http://sendgrid.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:28:41.463

一种解决方案是分批发送您的电子邮件。您可以使用控制台应用程序来实现这一点；我已经成功地将它用于 2,000 封电子邮件，每发送 100 封电子邮件之间有一段休息时间：

[http://www.codersbarn.com/post/2011/11/08/Calling-Console-Application-from-Web-Form.aspx](http://www.codersbarn.com/post/2011/11/08/Calling-Console-Application-from-Web-Form.aspx)

```
while (dr.Read())
{
    ....
    toAddress = dr[1].ToString();

    // Send email in batches of 100 with a 30 second pause between each batch 
    if ((count >= 100) && (count % 100 == 0))
        Thread.Sleep(30000);
    ....
} 
```

# javascript - 当焦点在地址栏中开始时，Firefox 焦点转换失败

> ID：12711466
> 
> 赞同：2
> 
> 时间：2012-10-03T15:11:56.323
> 
> 标签：javascript, firefox, focus, onload, address-bar

当我在页面加载时尝试将焦点设置到输入元素时，在某些情况下它会因 Firefox 而失败。这是代码：

```
:focus {
    outline: 3px solid #ff0000;
}

<script type="text/javascript">
    function setFocus() {
        document.getElementById('input-id').focus();
        document.getElementById('input-id').select();
        console.log(document.activeElement);
    }
</script>

<body onload="setFocus()">
    <div><input id="input-id" type="text" value="Waiting for focus..." onfocus="console.log('Received focus!')" /></div>
</body> 
```

在这里试试：http: [//jsfiddle.net/johnericsutton/p6VhQ/](http://jsfiddle.net/johnericsutton/p6VhQ/)。这个想法很简单，当页面加载时，输入元素获得焦点（并且文本被选中）。

在以下情况下，它可以在 Firefox 中运行：

*   将光标放在 URL 栏中，然后按 Enter；
*   将光标放在输入文本中并按 Enter，或按 Reload 按钮，或按 Ctrl-R（在 Windows 和 Linux 上，Cmd-R 在 Mac 上）。

但是如果将光标放在 URL 栏中并按“重新加载”按钮，或者按 Ctrl-R（在 Windows 和 Linux 上，Mac 上是 Cmd-R），它在 Firefox 中不起作用**。**您可以从 console.log 中看到 DOM 认为 activeElement**是**输入，但这在 2 种意义上是不正确的：

*   CSS 输入选择器未激活；
*   输入元素尚未收到焦点事件。

所以DOM现在处于混乱状态（这在我的应用程序中造成了严重的问题！）只是因为用户点击了URL栏并按下了Reload，而不是没有点击URL栏并按下Reload或点击了URL栏和按 Enter。真是一团糟！

火狐，我的意思是：

*   Linux 和 Mac 上的 FF15；
*   Windows 和 Linux 上的 FF10；
*   Windows 上的 FF9。

它适用于我尝试过的每个版本的 Chrome 和 Safari。

我唯一的“解决方案”是在 .focus() 之前引入一个 alert()。不是很满意！我应该在警报中添加什么？“Firefox 错误解决方法，请按 OK！”。

感谢收到任何更好的想法:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-01T19:44:28.333

用 window.focus() 初始化；似乎将焦点从地址栏推出。

# graph - 如何解决 VBScript（经典 ASP）中的运行时错误（'800a01a8'）？

> ID：12711467
> 
> 赞同：0
> 
> 时间：2012-10-03T15:11:56.170
> 
> 标签：graph, asp-classic, vbscript

我有以下经典的 asp 代码：

```
 <BODY>

  <%   
 'In this example, we show how to connect FusionCharts to a database.
 'For the sake of ease, we've used an Access database which is present in
 '../DB/FactoryDB.mdb. It just contains two tables, which are linked to each
 'other. 

 'Database Objects - Initialization
 Dim oRs, oRs2, strQuery
 'strXML will be used to store the entire XML document generated
 Dim strXML

 'Create the recordset to retrieve data
  Set oRs = Server.CreateObject("ADODB.Recordset")

 'Generate the chart element
  strXML = "<graph caption='Factory Output report' subCaption='By Quantity'         decimalPrecision='0' showNames='1' numberSuffix=' Units' pieSliceDepth='30' formatNumberScale='0'>"

 'Iterate through each factory
strQuery = "select * from deal_price"
Set oRs = oConnection.Execute(strQuery)

While Not oRs.Eof
'Now create second recordset to get details for this factory
Set oRs2 = Server.CreateObject("ADODB.Recordset")
strQuery = "select sum(price) as TotOutput from deal_price where deal_id=" &  ors("deal_id")
Set oRs2 = oConnection.Execute(strQuery) 
'Generate <set name='..' value='..'/> 
strXML = strXML & "<set name='" & ors("name") & "' value='" & ors2("TotOutput") & "' />"
'Close recordset
Set oRs2 = Nothing
oRs.MoveNext
Wend
'Finally, close <chart> element
strXML = strXML & "</chart>"
Set oRs = nothing

'Create the chart - Pie 3D Chart with data from strXML
 Call renderChart("MyWeb/includes/FCF_Pie2D.swf", "", strXML, "FactorySum", 650, 450)
 %>
 </BODY>
  </HTML> 
```

DBconnection文件代码：

```
Dim oConnection
Set oConnection = Server.CreateObject("ADODB.Connection")
oConnection.Open "Provider=SQLOLEDB; Data Source=MA-PC\SQLEXPRESS; Initial      Catalog=test; User ID=missy; Password=hello;" 
```

我在以下行中收到运行时错误： **Set oRs = oConnection.Execute(strQuery)**。

我似乎无法解决问题，我哪里出错了。任何助手将不胜感激。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:59:03.003

您收到错误的原因是您的包含文件 (DBConn.asp) 正在打开连接，将其关闭并将其设置为 Nothing。

从 DBConn.asp 文件中删除：

```
oConnection.Close
Set oConnection = Nothing 
```

更改您的代码：

```
 'Create the recordset to retrieve data
        Set oRs = Server.CreateObject("ADODB.Recordset")

       'Generate the chart element
        strXML = "<graph caption='Factory Output report' subCaption='By Quantity'         decimalPrecision='0' showNames='1' numberSuffix=' Units' pieSliceDepth='30' formatNumberScale='0'>"

     'Iterate through each factory
      strQuery = "select * from deal_price"
      Set oRs = oConnection.Execute(strQuery)

      While Not oRs.Eof
      'Now create second recordset to get details for this factory
      Set oRs2 = Server.CreateObject("ADODB.Recordset")
      strQuery = "select sum(Quantity) as TotOutput from Factory_Output where FactoryId=" &  ors("FactoryId")
      Set oRs2 = oConnection.Execute(strQuery) 
      'Generate <set name='..' value='..'/> 
      strXML = strXML & "<set name='" & ors("FactoryName") & "' value='" & ors2("TotOutput") & "' />"
      'Close recordset
      Set oRs2 = Nothing
      oRs.MoveNext
    Wend
     'Finally, close <chart> element
      strXML = strXML & "</chart>"
      Set oRs = nothing

    'Create the chart - Pie 3D Chart with data from strXML
     Call renderChart("../../FusionCharts/FCF_Pie3D.swf", "", strXML, "FactorySum", 650, 450)
'Create the recordset to retrieve data
    Set oRs = Server.CreateObject("ADODB.Recordset")

   'Generate the chart element
    strXML = "<graph caption='Factory Output report' subCaption='By Quantity'         decimalPrecision='0' showNames='1' numberSuffix=' Units' pieSliceDepth='30' formatNumberScale='0'>"

 'Iterate through each factory
  strQuery = "select * from deal_price"
  Set oRs = oConnection.Execute(strQuery)

  While Not oRs.Eof
  'Now create second recordset to get details for this factory
  Set oRs2 = Server.CreateObject("ADODB.Recordset")
  strQuery = "select sum(Quantity) as TotOutput from Factory_Output where FactoryId=" &  ors("FactoryId")
  Set oRs2 = oConnection.Execute(strQuery) 
  'Generate <set name='..' value='..'/> 
  strXML = strXML & "<set name='" & ors("FactoryName") & "' value='" & ors2("TotOutput") & "' />"
  'Close recordset
  Set oRs2 = Nothing
  oRs.MoveNext
Wend
 'Finally, close <chart> element
  strXML = strXML & "</chart>"
  Set oRs = nothing

'Create the chart - Pie 3D Chart with data from strXML
 Call renderChart("../../FusionCharts/FCF_Pie3D.swf", "", strXML, "FactorySum", 650, 450)

'Add these lines back in as you are done processing your records
 oConnection.Close
 Set oConnection = Nothing

 %> 
```

# android - Android：具有外部网站和 CSS 使用的自定义字体（Arial）的 WebView

> ID：12711469
> 
> 赞同：1
> 
> 时间：2012-10-03T15:11:59.813
> 
> 标签：android, css, fonts, android-webview

是否可以在我的 Android 应用程序中包含可由外部加载的网页的 CSS 使用的 TTF 字体（Arial）？

例如，假设我的网站[http://www.some-site.com](http://www.some-site.com)它有一个 CSS 文件，其中包含以下内容：

```
@font-face { 
    font-family: "CustomArial"; 
    src: url('Arial.ttf'); 
}

h1 {  
    font-family: 'CustomArial', serif;
} 
```

我还尝试将字体的 url src 设置为以下内容，但它们都不起作用：

*   `/mnt/sdcard/Arial.ttf`
*   `file://mnt/sdcard/Arial.ttf`

我知道如果 Arial.ttf 文件与服务器上的 CSS 文件位于同一目录中，则此方法有效，但我想要做的是能够使用我的应用程序 /assets 文件夹中的 Arial.ttf 或某处我已将它放在 SDCard 上。推理是因为 Arial.ttf 文件为 775kb，需要用户在呈现页面之前下载。

这甚至可能吗？我知道如果我加载到 WebView 的 HTML 存在于本地并且我将通过 WebView.loadData() 加载它，我可以完成此操作，但我需要使用 WebView.loadUrl()。

任何想法/帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:32:10.013

1）将字体放在项目的资产文件夹中，而不是放在SD卡上。在您的项目中创建一个名为`assets`

2）在你的`@font-face`with 中引用它`src: url('file:///android_asset/Arial.ttf');`

# scala - 请解释一些scala代码 - 初学者

> ID：12711470
> 
> 赞同：3
> 
> 时间：2012-10-03T15:12:10.580
> 
> 标签：scala

阅读[http://www.scala-lang.org/docu/files/ScalaByExample.pdf](http://www.scala-lang.org/docu/files/ScalaByExample.pdf)

这段代码：

```
def While (p: => Boolean) (s: => Unit) {
  if (p) { s ; While(p)(s) }
} 
```

给出了这样的解释：

> While 函数将一个测试函数作为第一个参数，该函数不接受任何参数并产生一个布尔值。作为第二个参数，它接受一个命令函数，该函数也不接受任何参数并产生 Unit 类型的结果。只要测试函数为真，就会调用命令函数。

在哪里被`if (p)`评估为 true 或 false ？

该函数`s`不应该在某处声明吗？函数没有代码`s`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:21:39.697

> 在哪里被`if (p)`评估为 true 或 false ？

就在那里，在那一行。

`p`并且`s`是**按名称调用的**参数，因为`=>`在方法的参数列表中它们前面`While`。每次在 的正文中使用它们的名称时`While`，都会对它们进行评估。

> 该函数`s`不应该在某处声明吗？函数没有代码`s`？

`s`是`While`方法的参数，就像`p`. （你为什么问这个问题`s`，而不是关于`p`？）。Scala 中的方法和函数可以有多个参数列表。该`While`方法有两个参数列表。

您可以通过将计算结果为（参数）和块（参数）`While`的内容传递给此方法来调用此方法。`Boolean``p``s`

```
var i = 0
While (i < 5) {
  i = i + 1
  println(i)
} 
```

在这个例子`p`中是`i < 5`，一个计算结果为 a 的函数`Boolean`，并且是和`s`之间的块。`{``}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:25:00.053

因为`p`你可以输入*任何*带有签名的函数`=> Boolean`，因为`s`你可以输入任何带有签名的函数`=> Unit`。

`p`while 函数的停止标准也是如此。如果您的`p`函数评估为`false`它会跳出`while`循环，如果它是`true`，则调用*主体*（`s`函数）一次，然后`while`使用相同的停止条件（`p`函数）和主体递归地再次调用该函数。

# glassfish - glassfish 上的 spring defaultmessagelistener 容器在异常后重新传递的正确设置是什么？

> ID：12711472
> 
> 赞同：3
> 
> 时间：2012-10-03T15:12:13.333
> 
> 标签：glassfish, spring-jms

我正在尝试设置 spring 的 DefaultMessageListenerContainer 类以在引发异常或调用 session.rollback() 后重新传递消息。我也试图让它在 glassfish 3.1.2 网络配置文件上运行。

在我的 SessionAwareMessageListener 的 onMessage() 方法中调用 session.rollback() 时，我收到一条异常消息：**MessageDispatcher - [C4024]：会话未处理。** 我没有看到 ActiveMQ 的这个问题，但是该配置当然是不同的，因为我没有在应用程序服务器中使用它。

这里有没有人得到这个工作？我的配置如下：

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">com.sun.enterprise.naming.SerialInitContextFactory</prop>
            <prop key="java.naming.provider.url">${jms.jndicontext.url}</prop>
            <prop key="java.naming.factory.state">com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl</prop>
            <prop key="java.naming.factory.url.pkgs">com.sun.enterprise.naming</prop>
        </props>
    </property>
</bean>

<bean id="jmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jndiTemplate" />
    <property name="jndiName" value="${jms.connection.factory}" />
</bean>

<bean id="jmsTemplate"
      class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
    <property name="defaultDestination" ref="jmsServiceQueue"/>
</bean>

<bean id="jmsServiceProducer"
      class="net.exchangesolutions.services.messaging.service.jms.JmsMessageServiceProducerImpl">
    <property name="serviceTemplate" ref="jmsTemplate"/>
    <property name="serviceDestination" ref="jmsServiceQueue"/>
</bean>

<bean id="myMessageListener"
      class="com.myorg.jms.MessageDispatcher"/>

<bean id="jmsServiceContainer"
   class="org.springframework.jms.listener.DefaultMessageListenerContainer">
   <property name="connectionFactory" ref="jmsConnectionFactory"/>
   <property name="destination" ref="jmsServiceQueue"/>
   <property name="messageListener" ref="myMessageListener"/>
   <property name="errorHandler" ref="jmsErrorHandler" />
   <property name="receiveTimeout" value="180000"/>
   <property name="concurrentConsumers" value="1"/>
   <property name="cacheLevelName" value="CACHE_NONE"/>
   <property name="pubSubNoLocal" value="true"/>
   <property name="sessionTransacted" value="true"/>
   <property name="sessionAcknowledgeMode" value="2" />
   <property name="transactionManager" ref="jmsTransactionManager"/>
</bean>

<bean id="jmsTransactionManager" class="org.springframework.jms.connection.JmsTransactionManager">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:00:54.687

设置`acknowledge="auto"`，消息在侦听器执行之前被确认，因此消息从队列中删除。

通过对您的代码进行以下更改，我还实现了 Spring Application 中的 DLQ 场景。

首先，我们设置了 acknowledge="transacted" （因为我们希望在抛出异常的情况下保证重新传递和成功执行监听器的 Trans 确认）

```
<jms:listener-container container-type="default" connection-factory="connectionFactory" acknowledge=" transacted"> 
```

接下来，由于我们要抛出`JMSException`，我们正在实现`SessionAwareMessageListener`.

```
public class MyMessageQueueListener implements SessionAwareMessageListener {
    public void onMessage( Message message , Session session ) throws JMSException {
        //DO something
        if(success){
            //Do nothing – so the transaction acknowledged
        } else {
            //throw exception - So it redelivers
            throw new JMSException("..exception");
        } 
    }
} 
```

我已经对此进行了测试。这似乎工作正常。

# linux - 在 NX 位关闭的情况下在 linux 中分配数据页

> ID：12711475
> 
> 赞同：0
> 
> 时间：2012-10-03T15:12:27.247
> 
> 标签：linux, operating-system

我想在我的程序中生成一些机器代码然后运行它。一种方法是写出一个 .so 文件，然后将其加载到程序中，但这似乎太昂贵了。

linux中有没有办法让我在我的数据页中写出代码，然后在那里设置我的函数指针并调用它？我在 Windows 上看到过类似的东西，您可以在该页面上分配一个关闭 NX 保护的页面，但我找不到类似的 Linux 操作系统调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:19:01.330

[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html) (with `munmap(2)`) 和[mprotect(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mprotect.2.html)系统调用是执行此操作的基本操作。回想一下，从应用程序的角度来看，[系统调用是基本操作。](http://en.wikipedia.org/wiki/System_call)你要`PROT_EXEC`

您可以`strace`使用任何动态链接的可执行文件来了解如何调用它们，因为动态链接器`ld.so`正在使用它们。

生成共享对象可能比您想象的要便宜。实际上，生成 C 代码，运行编译器，然后`dlopen`-ing 生成的共享对象是有一定意义的，即使您以交互方式工作也是如此。我的[MELT](http://gcc-melt.org/)领域特定语言（用于扩展 GCC）正在执行此操作。回想一下，您可以毫无问题地做很多`dlopen`-s 。

如果你想在内存中生成机器码，你可以使用[GNU Lightning](http://www.gnu.org/software/lightning/)（快速生成慢速机器码），`libjit`来自[dotgnu](http://www.gnu.org/software/dotgnu/)（生成较少错误的机器码），[LuaJit](http://luajit.org/)，[asmjit](http://code.google.com/p/asmjit/)（特定于 x86 或 amd64），[LLVM](http://llvm.org/)（缓慢生成优化机器代码）。顺便说一句，[SBCL](http://sbcl.org/) Common Lisp 实现是动态编译到内存并在运行时生成良好的机器代码（并且还有用于 JVM 的所有 JIT 执行此操作）。

# notifications - 通过开放图通知

> ID：12711479
> 
> 赞同：0
> 
> 时间：2012-10-03T15:12:49.213
> 
> 标签：notifications, facebook-opengraph

我在 Facebook 添加通知时遇到问题。

根据：

`https://developers.facebook.com/docs/reference/api/user/#notifications`

我准备请求：

```
https://graph.facebook.com/FACEBOOK_USER_ID/notifications?template=hello&href=track_123&access_token=USER_ACCESS_TOKEN 
```

但我得到了回应：

*抱歉，出了一些问题。我们正在尽快努力修复这个。*

这个要求正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:14:12.347

上面的 url 有一个小问题，要使用的访问令牌不是用户的，而是您的应用程序的。首先，您需要使用以下 get 调用来获取您的应用程序 access_token。

```
GET https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID
       &client_secret=YOUR_APP_SECRET
       &&grant_type=client_credentials 
```

这将返回您需要在上述 url 中使用的应用程序访问令牌。

希望这能解决您的问题。

# html - td 元素上的圆角边框

> ID：12711485
> 
> 赞同：0
> 
> 时间：2012-10-03T15:13:12.797
> 
> 标签：html, css, html-table, internet-explorer-9, rounded-corners

我有一张桌子，在里面我试图通过 css3 给每个 td 元素圆角。这适用于 Firefox、Chrome、Safari 但不适用于 Opera 和 IE9。我只需要为 IE9 做这项工作，也许有人知道我做错了什么。我将给出一些代码，因为有很多。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1">
<title></title>
<meta name="description" content="">
<meta name="viewport" content="width=1024">
</head>

<div class="timeline_page_wrapper">

<div class="wrap">
<table class="events_table">

<tr>
<th id="oct12">October</th>
<th id="nov12">November</th>
<th id="dec12">December</th>
<th id="jan13">January</th>
</tr>

<td class="event fn_milestone fn_healthcare fn_regulation fn_priority_med  priority2 ">
<a class="inline-cBox" href="#milestone_3">
<div class="content">Again, Not Very Important</div>
    <div class="lower">
<hr>
<span class="date">10.2012</span>
<span class="type">Regulation</span>
    <img src="http://policyapp.beamland.com/img/icon-medical.png" alt="" height="21px" />
</div>
</a>
</td> 
```

和CSS：

```
td.event {
-webkit-border-radius: 12px;
    -moz-border-radius: 12px;
    -ms-border-radius:12px;
    -o-border-radius:12px;
    border-radius: 12px;
    -webkit-box-shadow:
    0 1px 2px #fff, /*bottom external highlight*/
    1px 1px 1px #666, /*side right external shadow*/
    inset 0 -1px 1px rgba(0,0,0,0.5), /*bottom internal shadow*/
    inset 0 1px 1px rgba(255,255,255,0.8), /*top internal highlight*/
    inset -1px 1px 1px rgba(0,0,0,0.5); /*side right internal highlight*/
    box-shadow:
       0 1px 2px #fff, /*bottom external highlight*/
       1px 1px 1px #666, /*side right external shadow*/
       inset 0 -1px 1px rgba(0,0,0,0.5), /*bottom internal shadow*/
       inset 0 1px 1px rgba(255,255,255,0.8), /*top internal highlight*/
       inset -1px 1px 1px rgba(0,0,0,0.5); /*side right internal highlight*/
    behavior: url('../pie/PIE.htc');
   } 
```

当我查看 IE9 的网络检查器时，它显示了正在应用的边框，但没有显示出来。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:40:56.087

我会回答我自己的问题，因为当我问这个问题时，我没有给出足够的 CSS。显然 IE 9 不喜欢你同时使用渐变和圆角。这就是我遇到的问题，但没有意识到。所以我通过使用纯色解决了这个问题，瞧，圆形边框出现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:26:24.490

只需添加

```
border-radius: 12px;
border-top-left-radius: 12px;
border-top-right-radius: 12px;
border-bottom-right-radius: 12px;
border-bottom-left-radius: 12px; 
```

E9 将使用默认值`border-radius`，因此只需确保将其包含在所有调用边框半径的样式中。然后您的网站将准备好支持 IE9。

`-moz-border-radius`适用于 Firefox，`-webkit-border-radius`适用于 Safari 和 Chrome。

此外：不要忘记声明您的 IE 编码是 ie9：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

IE8 没有计划。请参阅[CSS 兼容性页面](http://msdn.microsoft.com/en-us/library/cc351024%28VS.85%29.aspx)。

# java - 带句点和逗号的自定义格式数字

> ID：12711493
> 
> 赞同：2
> 
> 时间：2012-10-03T15:13:46.337
> 
> 标签：java, formatting

[与this question](https://stackoverflow.com/questions/4738853/java-decimal-format-parse-to-return-double-value-with-specified-number-of-deci/4746352#4746352)和其他几个与格式化小数有关的SO问题有些相关（在这种情况下，所有这些都对我没有帮助）。

我正在尝试将 Long 格式化为字符串，例如 123456 -> 012.345,6 （**句点后跟逗号**，看起来很奇怪，这是项目要求）。

我正在尝试使用 DecimalFormat 进行格式化：

> 私有静态最终 DecimalFormat 格式 = new DecimalFormat("##0.000,0");

但是它在实例化过程中抛出异常：

> java.lang.IllegalArgumentException：格式错误的模式“##0.000,0”

我还尝试过预先将语言环境更改为欧盟系统，例如

> NumberFormat numberFormat = NumberFormat.getNumberInstance(Locale.GERMAN);

如何以这种方式格式化数字？DecimalFormat 是错误的解决方案吗？我可以使用 NumberFormat 吗？还是我需要一个自定义格式化程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T15:25:00.913

您应该避免`DecimalFormat`直接构建。逗号*始终*用于模式定义中的分组，无论它们在目标语言环境中如何显示。同样，句点始终用于小数。这看起来不合逻辑，但必须记住这是一个 *模式*定义，并且像 # 一样，这些字符描述的是替换，而不是字符本身。

```
NumberFormat f = NumberFormat.getInstance(Locale.GERMANY);
if (f instanceof DecimalFormat) {
    ((DecimalFormat) f).applyPattern("##0,000.0");
}
f.format(123456 / 10.0); 
```

需要除以 10 才能获得小数点后的一位数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:16:20.960

[http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)

让我们试试这个

新的 DecimalFormat("0##,###.0");

请记住，逗号是分隔符，点是分数。你不能切换这两个。

这种格式将打印前导零，两个重要数字，然后是三个数字，然后是小数，如果是整数，则为 0。我认为。

所以，你能得到的最好的是 123456-> 012,345.6

解决方法：

```
int index1 = string.indexOf(',');
int index2 = string.indexOf('.');
string.setCharAt(index1, '.');
string.setCharAt(index2, ','); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:34:43.763

抱歉，如果我错过了您的请求，但是如果您需要非标准的数字表示，那么您可以简单地编写一个格式化程序：

```
static String formatLong(long value) {
        String ret = Long.toString(value);

        // Make the value 7 digits by prepending 0's
        while(ret.length()<7) ret="0"+ret;

        // Add a comma before the last digit
        ret = ret.substring(0,ret.length()-1)+","+ret.substring(ret.length()-1);

        // Add a period before the 4th digit
        ret = ret.substring(0,ret.length()-5)+"."+ret.substring(ret.length()-5);

        return ret;
    }

long a = 123456;
System.out.println(formatLong(a)); 
```

打印“012.345,6”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:24:37.200

您可以使用`DecimalFormatSymbols`该类将分组和小数分隔符设置为您想要的任何字符。Java 教程中显示了一个示例（在更改格式符号部分）：[http ://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)

在模式本身中，分组总是用 a 表示，`,`小数点用 a 表示`.`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T15:37:16.403

根据我对 javadoc 的阅读，DecimalFormat 仅支持数字的整数部分中的“分组”；即小数点*前的部分。*

*   格式字符串的语法暗示了这一点，其中`','`仅允许在`'.'`.

*   javadoc 也暗示了这一点，[`setGroupingSize(int)`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#setGroupingSize%28int%29)其中说

    > *“分组大小是数字**整数部分中**分组分隔符之间的位数”*。

# php - CI 控制器函数如何从表单或其他函数接收数据？

> ID：12711497
> 
> 赞同：1
> 
> 时间：2012-10-03T15:13:56.977
> 
> 标签：php, codeigniter, post

在我的控制器中，我创建了一个向数据库插入一行的函数。它从表单接收输入，并将其传递给模型。这是该控制器功能的简化版本：

```
function add_row()
{
$name = $this->input->post('name');
$type = $this->input->post('type');
$newRow = array (
        "name" => $name,
        "type" => $type
    );
$this->places_model->addRow($newRow)
} 
```

我还在控制器中创建了另一个函数，它执行各种其他操作，并以这两个字段的值结束。现在我想从控制器中调用相同的 add_row 函数，但这次传递在我的另一个函数中生成的两个值。

修改 add_row 函数的最佳方法是什么，以便它足够灵活地从表单接收发布的值，或者从同一控制器中的另一个函数传递值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:54:10.513

```
function add_row($name ='', $type ='')
{
   if (!empty($this->input->post())
   {
     $name = $this->input->post('name');
     $type = $this->input->post('type');         
    }
     $newRow = array (
             "name" => $name,
             "type" => $type
            );
    $this->places_model->addRow($newRow)
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:18:45.920

```
function add_row($name = NULL, $type = NULL)
{
    if(isset($_POST["name"]) && $name == NULL)
    {
         $name = $this->input->post('name');
    }

    if(isset($_POST["type"]) && $type == NULL)
    {
         $type= $this->input->post('type');
    }

    $newRow = array (
         "name" => $name,
         "type" => $type
    );
    $this->places_model->addRow($newRow)
} 
```

# php - 约定和检查文件存在与数据库存储

> ID：12711500
> 
> 赞同：1
> 
> 时间：2012-10-03T15:14:01.323
> 
> 标签：php, database, database-design

我正在为门户网站构建数据库结构，我对我决定不会存储在数据库中的元素有一些疑问，通常是媒体，特别是图像。

假设我们有内容，并且每个内容都可以有一个主图像。此外，还有一个包含特色内容的幻灯片，需要内容中的大图像。一个直观的想法是让数据库不执行此任务，并使用名称约定存储图像。然后，在代码 (php) 中，我可以检查文件是否存在，然后根据需要执行操作（要求上传幻灯片的图像，显​​示默认图像或地图而不是所需的主图像......）。另一个极端是将文件名存储在数据库中，其他选项是使用文件名约定，但在数据库中存储一个布尔值，而不是检查代码中是否存在。

我对主观角度感兴趣，但我真的很想知道是否有基于技术和客观原因的最佳实践，或者仅仅是出于实际原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:29:31.050

将图像文件名与每个内容记录一起存储在数据库中。这是最灵活的选项，因为您可以通过更新数据库记录轻松更改所选图像。

假设您添加某种后端/管理区域来管理内容。要更改内容的主图像，您可以在图像文件夹中显示文件下拉列表（以及文件上传选项），并轻松将记录更新为所选图像。

如果您想要内容图像的幻灯片，您可以简单地从表中选择图像文件名并输出`<img />`指向图像的标签。

如果您在没有数据库的情况下执行此操作，例如通过使用命名约定`content-image-{contentId}.jpg`来更改图像，您将需要重命名/删除文件，并且您需要满足不同的图像文件扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:29:53.740

我不在数据库中存储图像。相反，我将它们存储在磁盘上的一个单独文件夹中，并维护一个包含名称、大小、mimetype 等的表。

我不将它们存储在数据库中的**实际**原因：

*   如果我想在数据库结构中进行更改，我会使用`mysqldump`然后使用编辑器。如果没有转储中的所有二进制数据，这会更容易。
*   我的数据库服务器运行在一个快速的 128GB SSD SATA 600 磁盘上以提高性能。空间有限。images 文件夹从 12TB 大小的 NAS 存储中挂载。
*   当浏览器需要图像时，它不会与 html 一起加载，而是在单独的请求中加载。交付 html 时，图像不需要来自快速存储设备。

# android - ActionBar Sherlock SwitchWidget

> ID：12711502
> 
> 赞同：2
> 
> 时间：2012-10-03T15:14:08.293
> 
> 标签：android, actionbarsherlock

ActionBarSherlock 包中是否有 Android 4.0 及更高版本附带的 Switch 小部件。我看到 ABS 有一个兼容 4.0 的 Spinner View，但没有 Switch。Jake 是否打算将其包含在任何即将发布的版本中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:46:17.277

不，该`Switch`组件不是操作栏的一部分，因此永远不会成为 ActionBarSherlock 的一部分。`Spinner`包含的内容是完整版本的子集，仅具有在操作栏中工作所需的必要功能。

如果您在所有版本的 Android 上都需要这样的组件，我建议您自己进行反向移植。只需获取源、样式和可绘制对象并修复任何新 API 的使用，以使用旧的或兼容的方法调用。

# c# - 为什么此代码不能在 jQuery/JavaScript 中用于使用复选框的 HTML 表单？

> ID：12711503
> 
> 赞同：1
> 
> 时间：2012-10-03T15:14:13.073
> 
> 标签：c#, javascript, jquery, razor

好的，这让我大吃一惊，因为我已经分别使用了这些代码，而且非常成功，但是当我把它们放在一起时，它们就不起作用了。我将解释我正在尝试做的事情，尽管当您看到下面的代码时，它可能是不言自明的。

我试图简单地确保一次只能检查一个 HTML 表单的两个复选框中的一个。（不能使用单选按钮，因为这两个框都不能被选中的选项必须可用）。

无论如何，这里是代码（请假设输入字段的 id 是准确的，它们是“sIsGangMember”和“sIsNotGangMember”

```
$("#sIsGangMember").change(function () {

    if ($("#sIsGangMember").is(':checked')) {
        document.getElementById("sIsNotGangMember").checked = false;
    }
});

$("#sIsNotGangMember").change(function () {

    if ($("#sIsNotGangMember").is(':checked')) {
        document.getElementById("sIsGangMember").checked = false;
    }
}); 
```

如果这是一些愚蠢的事情，我真的很抱歉，但我知道我之前已经分别使用过这段代码的所有部分并且一切都很好，但我根本看不出它有什么问题，也看不出 HTML 部分有什么问题：

```
<tr>
    <td class="lineupColor2">
        Search For Street<br/>Gang Member
    </td>
    <td class="lineupColor2">
        <label for="sIsGangMember">Is Gang Member</label>
        <br/>
        <input type="checkbox" id="sIsGangMember" name="sIsGangMember" 
            style="margin-left: 115px;" value="ticked" @IsGangMemberTicked/>
    </td>
    <td class="lineupColor2"> 
        <label for="sIsNotGangMember">Is Not Gang Member</label>
        <br/>
        <input type="checkbox" id="sIsNotGangMember" name="sIsNotGangMember"
            style="margin-left: 115px;" value="ticked" @IsNotGangMemberTicked/>
    </td>
    <td class="lineupColor2">
         <button type="button" style="cursor: pointer;" 
             onclick="clearIsGangMembers()">Clear Fields
         </button>
    </td>
    <td class="lineupColor2">
    </td>
</tr> 
```

您看到的 razor (C#) 只是一个不包含任何内容或包含字符串“checked='checked'”的值，以便表单记住它们是否被检查以进行进一步搜索或是否发生错误以及表格未提交等

分配 C# 变量的部分是：

```
 //////////////////////////////////////////////////////////////////////////////////////////
    if(IsGangMember=="ticked"){IsGangMemberTicked="checked='checked'";}///////////////////////
    if(IsNotGangMember=="ticked"){IsNotGangMemberTicked="checked='checked'";}/////////////////
    ////////////////////////////////////////////////////////////////////////////////////////// 
```

无论如何，感谢您的帮助！

感谢大家的帮助，但是谁能告诉我“为什么”这不起作用？

更新：

好的， .click 也不起作用......显然这里还有其他事情发生......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:23:37.810

您将需要使用 click 或 mousedown 而不是 change 事件。

[jQuery复选框更改和单击事件](https://stackoverflow.com/questions/7031226/jquery-checkbox-change-and-click-event)

前任。[http://jsfiddle.net/qn8Kh/2/](http://jsfiddle.net/qn8Kh/2/)

有关为什么会这样的更多信息： [jQuery difference between change and click event of checkbox](https://stackoverflow.com/questions/11205957/jquery-difference-between-change-and-click-event-of-checkbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:02:55.137

好的，我非常感谢您的帮助，并且不知何故（经过数小时的搜索和研究可能出现的问题）我知道这将是一件愚蠢的事情。

事实是，以这种方式使用 .change 并没有错。

我的问题是我不小心把函数放在了：

```
$("#sIsGangMember").change(function () {

if ($("#sIsGangMember").is(':checked')) {
    document.getElementById("sIsNotGangMember").checked = false;
}
});

$("#sIsNotGangMember").change(function () {

if ($("#sIsNotGangMember").is(':checked')) {
    document.getElementById("sIsGangMember").checked = false;
}
}); 
```

全部在 js 文件中（例如，不包含在 (document).ready 或 jQuery(function) 或任何东西中......

那太蹩脚了，是的，我知道 xD 很抱歉，谢谢大家的帮助！

# eclipse - 使用 Photran 和 GDB 调试器在 Eclipse 中调试 fortran 代码：缺少符号

> ID：12711506
> 
> 赞同：2
> 
> 时间：2012-10-03T15:14:22.557
> 
> 标签：eclipse, debugging, gdb, fortran90, photran

我有一个用 fortran90 编写的程序，以前在 compaq 编译器上成功编译并工作，现在我正在尝试用 gfortran 编译。我可以将代码编译为 .exe 并运行它。它工作正常，直到例程中的某个点然后引发错误。

我目前的配置：

*   Windows 7的
*   带有 CDT 的 Eclipse Juno
*   光腾
*   使用 gfortran 编译器和 GDB 调试器 (gdb.exe) 安装 Cygwin
*   调试器的配置：
    *   GDB 命令集：标准 (Windows)
    *   协议：mi
    *   共享库：不要自动加载共享库符号（激活此功能时，不会记录任何更改）。

运行调试命令时，我得到以下输出：

```
.gdbinit: No such file or directory.
Reading symbols from /cygdrive/c/Users/thys/Documents/doctoraat/12_in   progress/Hamfem/Debug/Hamfem.exe...done.
auto-solib-add on
Undefined command: "auto-solib-add".  Try "help".
Warning: C:/Users/thys/Documents/doctoraat/12_in progress/Hamfem/Hamfem/in: No such     file or directory.
[New Thread 5816.0x1914]
[New Thread 5816.0x654] 
```

基本上这给我留下了两个问题：

1.  我在哪里可以找到 cygwin 安装中的 .gdbinit 文件？
2.  我的设置中是否还有其他可能的错误，或者需要考虑的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:55:11.603

编译的时候添加调试信息了吗？在控制台中使用 gdb 应该没有问题，除了查看内存地址和大量乱码，但使用 Eclipse 可能会出现并发症......

# .net - 使用 Razor 2 在 元素上编写 RSS 失败

> ID：12711507
> 
> 赞同：12
> 
> 时间：2012-10-03T15:14:28.317
> 
> 标签：.net, asp.net-mvc, razor, asp.net-mvc-4, razor-2

我昨天升级到 MVC 4，刚刚发现升级引入的一个错误。

我有一个用于生成 RSS 提要的 Razor 视图。它有一些这样的标记（简化）：

```
<item>
    <title>@post.BlogPost.Title</title> 
    <link>@Url.BlogPost(post.BlogPost, isAbsolute: true)</link>
</item> 
```

在 Razor 版本 2 中，[特别支持](http://vibrantcode.com/blog/2012/4/13/what-else-is-new-in-razor-v2.html/)HTML5 [void 元素](http://dev.w3.org/html5/markup/syntax.html#void-element)。这样的 void 元素是自闭合的，并且没有闭合标签。

不幸的是，`<link>`就是这样一个元素。

这意味着上述 Razor 标记不再有效，并且在运行时失败。删除结束`</link>`标记会删除解析器错误，但这意味着它不再是有效的 RSS。

那么，有没有办法解决这个问题，或者 Razor 是否真的只适合生成 HTML5？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T11:09:54.347

我会这样做：

```
<item>
   <title>
      @post.BlogPost.Title
   </title>

   @Html.Raw("<link>")
      @Url.BlogPost(post.BlogPost, isAbsolute: true)
   @Html.Raw("</link>")
</item> 
```

生成的源代码如下所示：

```
<item>
    <title>
        Google
    </title>

     <link>
         http://www.google.se
    </link>
</item> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:06:07.837

现在我使用这个解决方法：

```
 @Html.Raw(string.Format(@"<param name=""{0}"">{1}</param>",Name, Value)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T11:15:09.903

由于 Alexander Taran 在此问题上展开了悬赏以寻找明确的答案，因此我想我会查看[CodePlex 上的 Razor 源代码](http://aspnetwebstack.codeplex.com/)并提供一些详细信息。

首先，看一下[`HtmlMarkupParser`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/f079d76e57b5#src%2fSystem.Web.Razor%2fParser%2fHtmlMarkupParser.cs)。它包含以下参考数据：

```
//From http://dev.w3.org/html5/spec/Overview.html#elements-0
private ISet<string> _voidElements = new HashSet<string>(StringComparer.OrdinalIgnoreCase)
{
    "area", "base", "br", "col", "command", "embed", "hr", "img", "input", "keygen",
    "link", "meta", "param", "source", "track", "wbr"
}; 
```

这是通过 公开`HtmlMarkupParser.VoidElements`的，并且该属性的唯一用途是在[`HtmlMarkupParser.RestOfTag(...)`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/f079d76e57b5#src%2fSystem.Web.Razor%2fParser%2fHtmlMarkupParser.Block.cs). 这是一个遍历一系列标记的解析器。相关的代码片段是：

```
if (VoidElements.Contains(tagName))
{
    // Technically, void elements like "meta" are not allowed to have end tags. Just in case they do,
    // we need to look ahead at the next set of tokens. If we see "<", "/", tag name, accept it and the ">" following it
    // Place a bookmark
    int bookmark = CurrentLocation.AbsoluteIndex;

    // Skip whitespace
    IEnumerable<HtmlSymbol> ws = ReadWhile(IsSpacingToken(includeNewLines: true));

    // Open Angle
    if (At(HtmlSymbolType.OpenAngle) && NextIs(HtmlSymbolType.Solidus))
    {
        HtmlSymbol openAngle = CurrentSymbol;
        NextToken();
        Assert(HtmlSymbolType.Solidus);
        HtmlSymbol solidus = CurrentSymbol;
        NextToken();
        if (At(HtmlSymbolType.Text) && String.Equals(CurrentSymbol.Content, tagName, StringComparison.OrdinalIgnoreCase))
        {
            // Accept up to here
            Accept(ws);
            Accept(openAngle);
            Accept(solidus);
            AcceptAndMoveNext();

            // Accept to '>', '<' or EOF
            AcceptUntil(HtmlSymbolType.CloseAngle, HtmlSymbolType.OpenAngle);
            // Accept the '>' if we saw it. And if we do see it, we're complete
            return Optional(HtmlSymbolType.CloseAngle);
        } // At(HtmlSymbolType.Text) && String.Equals(CurrentSymbol.Content, tagName, StringComparison.OrdinalIgnoreCase)
    } // At(HtmlSymbolType.OpenAngle) && NextIs(HtmlSymbolType.Solidus)

    // Go back to the bookmark and just finish this tag at the close angle
    Context.Source.Position = bookmark;
    NextToken();
} 
```

这意味着将成功解析以下内容：

```
<link></link> 
```

然而，前瞻是有限的，这意味着在结束标记之前看到的任何额外标记都会导致它失败：

```
<link>Some other tokens</link> 
```

在这种情况下，可以扩展前瞻的范围。如果有人热衷，他们可以向 MVC 团队提供拉取请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T15:25:39.503

Html5 链接是用于样式表等标题的特殊元素。

您的 Rss 不应该是 Html5，而是类似

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0"> 
```

你可以在你的 rss 提要使用的布局控制器中使用它

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
    @RenderBody()
</rss> 
```

我以前做过的另一种方法是有一个完全空的视图，然后是下面的控制器：

```
 [NHibernateActionFilter]
    public AtomActionResult Feed()
    {
        var dto = _service.GetThings(NHibernateSession);
        var items = Mapper.Map<List<ThingDto>, List<SyndicationItem>>(dto);
        var url = HttpContextWrapper.Request.UrlReferrer;
        var feed = new SyndicationFeed("MyTitle", "MyByline", url, items)
        {
            Copyright = new TextSyndicationContent("© 2012 SO"),
            Language = "en-IE"
        };
        return new AtomActionResult(feed);
    } 
```

特别值得注意的是`System.ServiceModel.Syndication.SyndicationFeed`

这是我的自定义结果

```
 public class AtomActionResult : ActionResult
    {
        readonly SyndicationFeed _feed;

        public AtomActionResult() { }

        public AtomActionResult(SyndicationFeed feed)
        {
            _feed = feed;
        }

        public override void ExecuteResult(ControllerContext context)
        {
            //context.HttpContext.Response.ContentType = "application/atom+xml";
            //chrome does not yet support atom+xml 
            //http://code.google.com/p/chromium/issues/detail?id=104358
            context.HttpContext.Response.ContentType = "application/xml";
            var formatter = new Atom10FeedFormatter(_feed);
            using (XmlWriter writer = XmlWriter.Create(context.HttpContext.Response.Output))
            {
                formatter.WriteTo(writer);
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T10:28:10.763

对这个问题的简短回答似乎是 Razor 与第 2 版一样，与 HTML 相关联，排除了 XML。我[要求其中一位开发人员确认](http://vibrantcode.com/blog/2012/4/13/what-else-is-new-in-razor-v2.html/)，所以希望他能回来。

我最终将我的方法更改为使用 Linq to XML 和 custom `ActionResult`，绕过 Razor 和任何视图引擎：

```
[HttpGet]
[OutputCache(Duration = 300)]
public ActionResult Feed()
{
    var result = new XmlActionResult(
        new XDocument(
            new XElement("rss",
                new XAttribute("version", "2.0"),
                new XElement("channel",
                    new XElement("title", "My Blog")
                    // snip
                )
            )
        )
    );

    result.MimeType = "application/rss+xml";

    return result;
} 
```

这需要以下自定义`ActionResult`：

```
public sealed class XmlActionResult : ActionResult
{
    private readonly XDocument _document;

    public Formatting Formatting { get; set; }
    public string MimeType { get; set; }

    public XmlActionResult([NotNull] XDocument document)
    {
        if (document == null)
            throw new ArgumentNullException("document");

        _document = document;

        // Default values
        MimeType = "text/xml";
        Formatting = Formatting.None;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.Clear();
        context.HttpContext.Response.ContentType = MimeType;

        using (var writer = new XmlTextWriter(context.HttpContext.Response.OutputStream, Encoding.UTF8) { Formatting = Formatting })
            _document.WriteTo(writer);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-26T14:23:08.977

你可以做的是：

```
@("<link>" + Url.BlogPost(post.BlogPost, isAbsolute: true) + "</link>") 
```

简单得多

# html - Paypal IPN - 隐藏的“退货”字段也接收信息

> ID：12711508
> 
> 赞同：0
> 
> 时间：2012-10-03T15:14:34.293
> 
> 标签：html, paypal, paypal-ipn

我正在处理一些 Paypal IPN 项目，但我发现了一些让我开始担心的事情。

我的表单中设置了以下字段：

```
<input type="hidden" name="return" value="http://mysite.com/succes.php" />
<input type="hidden" name="notify_url" value="http://mysite.com/ipn_handler.php" /> 
```

无论如何，当用户付款时，他将返回到success.php页面并且不会与ipn_handler.php有任何关系，但是我的success.php url（在地址栏中）从Paypal返回后看起来像这样：

```
http://mysite.com/success.php?transaction_subject=57&txn_type=web_accept&payment_date=07%3A53%3A24+Oct+03%2C+2012+PDT&last_name=SOMETHING&residence_country=US&pending_reason=multi_currency&item_name=SOMETHING&payment_gross=&mc_currency=EUR&business=seller%40paypalsandbox.com&payment_type=instant&protection_eligibility=Ineligible&payer_status=verified&verify_sign=Adm5TcLO5.Dgm0ttCdwtx43iz69qAOB8yELzqmpoKwztT.v5nX7naEIQ&txn_id=77L26596YM827223E&payer_email=dugagj_1346872586_per%40gmail.com&tax=0.00&test_ipn=1&first_name=SOMETHING&receiver_email=seller%40paypalsandbox.com&quantity=0&payer_id=4D9U3R4S4D7CC&receiver_id=Y2CCK4NAA75Q2&item_number=&payment_status=Pending&mc_gross=25.00&custom=57&charset=windows-1252&notify_version=3.7&merchant_return_link=Return+to+Sandbox&auth=AqXhaNS8jZidb-pkJqUa3t2qAy-SPrpCt12155Ku703imQ3302J0cHyBD36AdiSVrY6hMc3JN6gwQo9gmRlxQjA 
```

我不喜欢我的地址栏显示所有这些信息。这很危险吗？设置 HTML 时我做错了吗？

请帮忙。

PS：上面的网址是通过 Paypal Sandbox 创建的，因此您不必担心，因为它不包含任何来自真实付款的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:22:14.390

将表单提交到贝宝时检查您的 rm 变量。

您可能已将 rm 变量设置为 0、1 或根本没有设置（默认为 0）。如果您使用值为 2 提交此变量，那么所有信息都将通过 POST 到达您的 success.php 页面。

因此，在您的表单中设置以下内容：

```
<input type="hidden" name="rm" value="2" /> 
```

[请参阅此处](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HI0709B)`rm`的变量文档

[你可以在这里](https://www.x.com/developers/paypal/forums/website-payments-standard/getting-payment-data-paypal-auto-return-pdt-ipn-demystified)阅读更多

# iphone - 在Objective C（iPhone）中从点x1，y2到点x2，y2发射粒子

> ID：12711510
> 
> 赞同：3
> 
> 时间：2012-10-03T15:14:37.740
> 
> 标签：iphone, gravity, particles

我目前正在开发一个 iphone 应用程序，其中应该有从插头到设备的“电力流”可视化。

我把它做成了一条静态线，但如果有某种方法可以用粒子代替这些线，显示实际的流动而不是简单的连接，那就更好了。

例如，设备 A 位于位置 100,50，插头位于位置 200,300。我希望粒子从 200,300 开始发射并“流动”到点 100,50 并停在那里。

我已经考虑了重力，但是由于屏幕上会同时出现超过 1 个设备，这可能会被搞砸？

静态地执行此操作也不是解决方案：设备可以在屏幕周围移动，并且粒子应该跟随。

编辑：

最后我的一个朋友帮助了我：

有这个点 X1, y1 和点 x2, y2

所以要计算去哪里的角度：dx = 100 - 200 dy = 50 - 300 speed = 100；alpha = arctan2(dy,dx)
距离 = sqrt(dx*dx + dy*dy) 设置发射器单元 litetime = 距离/速度 设置发射器单元速度 = 速度 设置发射器发射经度 = alpha

并做了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:11:43.277

我认为您需要调查 CAEmitterLayer 图层。他们应该做你想做的事。不幸的是，我只阅读过它们并且从未使用过它们，因此无法提供任何示例。

[链接到 CAEmitterLayer 类参考](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAEmitterLayer_class/Reference/Reference.html)

# python - 暂停嵌入式 python 脚本执行

> ID：12711511
> 
> 赞同：1
> 
> 时间：2012-10-03T15:14:41.423
> 
> 标签：python, embed

我有一个嵌入 python 脚本的应用程序。

我正在从 C 添加对 python 的调用，我的问题是我需要暂停脚本执行让应用程序运行，并从暂停的位置恢复执行。

这个想法是 python 会调用，比如“WaitForData”函数，所以此时脚本必须暂停（暂停）调用，以便应用程序事件循环继续。当必要的数据存在时，我想恢复脚本的执行，就像python调用在那个时候返回一样。

我正在运行单线程python。

有什么想法我该怎么做，或者类似的事情，我将在 python 调用退出之前运行应用程序事件循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:25:29.320

好吧，我能想到的唯一方法是在单独的线程上运行 Python 引擎。然后当python线程运行时主线程被阻塞。

当我需要暂停时，我会阻塞 Python 线程，让主线程运行。必要时，主线程的OnIdle，我阻塞它，让python继续。

它似乎工作正常。

# android - Android - 电子邮件应用程序中的最大字符数

> ID：12711513
> 
> 赞同：0
> 
> 时间：2012-10-03T15:14:43.853
> 
> 标签：android, email

我正在开发一个 Android 电子邮件应用程序。我应该为主题和消息文本设置什么字符限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:31:35.057

官方电子邮件规范可在此处获得：[https](https://www.rfc-editor.org/rfc/rfc2822) ://www.rfc-editor.org/rfc/rfc2822它必须在第 2.2 节的某处指定。

# javascript - DOJO 中未正确显示树

> ID：12711514
> 
> 赞同：0
> 
> 时间：2012-10-03T15:14:45.520
> 
> 标签：javascript, dojo, digit

我是 DOJO 1.6 的新手

我试图显示带有子文件夹的树。

```
dojo.require("dojo.data.ItemFileWriteStore");
            dojo.require("dijit.form.Button");
            dojo.require("dijit.tree.TreeStoreModel");
dojo.require("dojo.store.Memory");
dojo.require("dijit.Tree");
            dojo.addOnLoad(function() {
                 // Create test store, adding the getChildren() method required by ObjectStoreModel
        var data =  [ { id: 1, name: "answerTypeLabel",                 type:'scenario',    children:[{_reference: 2}]},
                       { id: 2, name: "acceptRequestLabel",             type:'paragraph',   data: "acceptRequestLabel"},
                       { id: 3, name: "rejectRequestLabel",             type:'scenario',    children:[{_reference: 5},{_reference: 6}]},
                       { id: 4, name: "MoreInformationLabel",       type:'scenario',    children:[{_reference: 7},{_reference: 8}]},
                       { id: 5, name: "rejectRequestStatusLabel",   type:'paragraph',   data: "rejectRequestStatusLabel"},
                       { id: 6, name: "rejectRequestNotCoveredLabel", type:'paragraph',     data: "rejectRequestNotCoveredLabel" },
                       { id: 7, name: "MoreInformationDocumentLabel", type:'paragraph',     data: "MoreInformationDocumentLabel"},
                       { id: 8, name: "MoreInformationDataLabel",   type:'paragraph',   data: "MoreInformationDataLabel"}
                     ];
         // Building the store object
        var sortableStore = new dojo.data.ItemFileWriteStore({
                    data: {
                        identifier: 'id',
                        label: 'name',
                        items: data 
                    },
                    });
        // building the model           
        var model = new dijit.tree.ForestStoreModel({

                    store: sortableStore, 
            query: { 
                id: "*" 
            }, 
            rootId: "root", 
            rootLabel: "sorting of tree"

        }); 
        // Building the tree            
        var tree = new dijit.Tree({

            model:model,
            'class': "tundra" 
        },
        "resourceTree");

            }); 
```

![代码输出](../Images/e47e2a20e03d44e3f805cba2be587aeb.png).

这里 Id 2 在 Id 1 的一个孩子中，所以在显示 Id 2 时必须在 Id 1 内。但这里 Id 2 出现在 id 1 内并且也在 id 1 的同一级别上。（所有所有孩子都有重复身份证）。这是 id 2,5,6,7,8 的情况。

我想删除重复。

输出应该像

![正确的输出应该是这样的](../Images/4c38eb5d4791353f6249c240152cfc81.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:51:28.957

原因是您将非分层存储应用到树上，该树不应该显示将父项作为根的兄弟的项目。

要“修复”这个问题，引用的id 不需要**与**.`model query`

在您的数据情况下，看起来`type:'paragraph'`应该是叶子。因此，将查询设置为匹配`type:'scenario'`而不是您当前的 ' id: "*" '

```
 var model = new dijit.tree.ForestStoreModel({

                store: sortableStore, 
        query: { 
            type:'scenario'
        }, 
        rootId: "root", 
        rootLabel: "sorting of tree"

    }); 
```

# excel - vba 简单范围/对象错误

> ID：12711519
> 
> 赞同：1
> 
> 时间：2012-10-03T15:15:06.830
> 
> 标签：excel, vba, object, range

所以我以为我对 VBA 有很好的掌握，但现在这个错误真的让我很烦恼，我无法弄清楚问题所在。这是一个非常短的子程序（从模块运行）：

```
Sub test()
    Dim lr
    lr = Sheets(1).Range("a1", Cells(65, 1))
    MsgBox lr.Address
End Sub 
```

无论出于何种原因，这都会引发“应用程序定义/对象定义错误”

谁能解释一下？

编辑：这也会引发同样的错误：

```
MsgBox Sheets(1).Range("a1", Cells(65, 1)).Address 
```

Edit2：根据我对对象事物的理解，我将稍微改变我的问题，但我将如何使用“查找”方法来使用它。所以这里是代码：

```
Set lookrange = Sheets(1).Range(Cells(2, 1), Cells(200, 1))
Set result = lookrange.Find(what:=searchTerm, lookat:=xlWhole) 
```

在这种情况下，它告诉我lookrange 引起了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:20:34.950

行。你有几个问题。

```
Option Explicit
sub test()
    Dim lr as Range
    set lr = Sheets(1).Range("a1", Cells(65, 1))
    MsgBox lr.Address
End Sub 
```

首先，作为刚接​​触 VBA 的人，`Option Explicit`几乎总是在模块的顶部使用，因此需要对变量进行标注。

其次，您永远不会将其声明`lr`为对象类型 - 确保将其声明为类型`Range`- 您不一定必须这样做，但是，这是一种很好的做法。

`set`第三，在分配诸如值之类的对象时，您需要按照其他人的指示使用，`Range`否则您将始终遇到该错误。

* * *

到你问题的第二部分。

```
MsgBox Sheets(1).Range("a1", Cells(65, 1)).Address 
```

将此更改为

```
With Sheets(1)
    MsgBox .Range(.Range("A1"), .Cells(65, 1)).Address
End With 
```

如果您曾经从不同于`Sheet1`您的工作表运行此操作，则会出现错误，因为`Cells(65,1)`引用不会打开`Sheet1`- Excel 会认为您的意思是当前工作表。

* * *

第三部分

```
Set lookrange = Sheets(1).Range(Cells(2, 1), Cells(200, 1))
Set result = lookrange.Find(what:=searchTerm, lookat:=xlWhole) 
```

与第二部分有相同的问题。`result`另请注意，如果找不到，您完全有可能运行错误，如果不成功，上面的第二条语句（的结果`Find`）将导致错误。`Find`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:26:37.737

可能您的范围定义不正确...不确定您要在那里实现什么，但 sheet(1).range(myrange) 返回一个范围对象。

```
Sub tetPop()

    Call popAddress(10, 12)
    Call popAddress(14, 21)
    Call popAddress(11, 18)

End Sub

Sub popAddress(ByVal row As Integer, ByVal col As Integer)

    Dim lr As Range

    Set lr = Sheets(1).Range("a1", Cells(row, col))
    MsgBox lr.Address

    ' or better and direct
    MsgBox Sheets(1).Range("a1", Cells(row, col)).Address

End Sub 
```

会弹出不同的地址干杯

丹尼尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:44:39.620

关键是`lr = Sheets(1).Range("a1", Cells(65, 1))`返回一个范围对象。
强调*对象*。所以你需要`set`在开始时使用，就像 Daniel 所做的那样。
当您不使用 分配该对象时`set`，Excel 将使用默认属性，即 Range.Value。所以赋值不会抛出错误，只使用 lr 作为对象。

# c# - 如何为 ComboBox 的项目添加价值，所以我可以像这样选择它 comboBox.SelectedIndex = myInt？

> ID：12711521
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:15:12.183
> 
> 标签：c#, .net, winforms

假设我有这些物品：

```
 comboBox.Items.Add("Access"); // make it equal to 31
        comboBox.Items.Add("Create"); // make it equal to 34
        comboBox.Items.Add("Delete"); // make it equal to 36
        comboBox.Items.Add("Modify"); // make it equal to 38 
```

现在，我打电话

```
comboBox.SelectedIndex = 34; // want to "Create" item has been chosen 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:21:24.523

不幸的是，winforms 没有`ListItem`像 ASP.NET 这样的类，所以你必须自己编写：

```
public class cbxItem
{
public string text {get;set;}
public int id {get;set;}

 public override string ToString() 
 { 
      return text;
 }
// you need this override, else your combobox items are gonna look like 
// "Winforms.Form1 + cbxItem"
} 
```

然后像这样将项目添加到您的组合框中：

```
cbxItem item = new cbxItem();
item.text = "Access";
item.id = 31;    
comboBox.Items.Add(item); 
```

要获取“id”或“value”或者您希望调用它：

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
       var cbxMember = comboBox1.Items[comboBox1.SelectedIndex] as cbxItem;

      if (cbxMember != null) // safety check
       {
       var value = cbxMember.id; 
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:21:52.233

这在很大程度上取决于如何管理您的数据。

如果您的项目不会在您的程序过程中被修改，您可以简单地使用字典作为映射表。

```
comboBox.Items.Add("Access"); // make it equal to 31
comboBox.Items.Add("Create"); // make it equal to 34
comboBox.Items.Add("Delete"); // make it equal to 36
comboBox.Items.Add("Modify"); // make it equal to 38

Dictionary<int, int> mapTable = new Dictionary<int, int>();
mapTable.Add(31, 0);
mapTable.Add(34, 1);
mapTable.Add(36, 2);
mapTable.Add(38, 3); 
```

然后只需使用以下内容：

```
comboBox.SelectedIndex = mapTable[34]; 
```

您甚至可以将此逻辑放在从 ComboBox 继承的类中，以实现更好的抽象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:20:27.827

您想使用[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)而不是[SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex.aspx)。索引只是一个计数（0,1,2,3 ...）。可以指定值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:29:49.320

您需要添加比简单字符串更复杂的内容来执行您想要的操作。如果您想要的只是一个 int 和一个关联的字符串，那么您可以使用 KeyValuePair，但任何自定义对象都可以使用。然后，您需要在组合框上设置 DisplayMember 和 ValueMember 以使其正确显示。哦，使用 SelectedValue 或 SelectedMember 代替 SelectedIndex。

这是你的补充：

```
comboBox.Items.Add(new KeyValuePair<int, string>(){ Key = 34, Value = "Access"}); 
```

是的，自定义对象会使这句话变得更简单，但概念是一样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T16:07:50.227

```
comboBox.Items.Add(new WorkItem { Key = 31, Value = "Access" });
comboBox.Items.Add(new WorkItem { Key = 34, Value = "Create" });
comboBox.Items.Add(new WorkItem { Key = 36, Value = "Delete" });
comboBox.Items.Add(new WorkItem { Key = 38, Value = "Modify" }); 
selectItemByKey(34); 
```

您需要添加此方法：

```
 private void selectItemByKey(int key)
   {
        foreach (WorkItem item in comboBox.Items)
        {
            if (item.Key.Equals(key))
                comboBox.SelectedItem = item;
        }
   }` 
```

像这样的类：

```
public class WorkItem
{
    public int Key { get; set; }
    public string Value { get; set; }

    public WorkItem()
    {
    }

    public override string ToString()
    {
        return Value;
    }
} 
```

# c# - ServiceStack 路由设计

> ID：12711522
> 
> 赞同：2
> 
> 时间：2012-10-03T15:15:14.430
> 
> 标签：c#, .net, servicestack

这3条路线一样吗？通常首选哪一个？

```
[Route("/todo/{id}", "DELETE")]
[Route("/todo/delete","POST")]
[Route("/todo/delete/{id}","GET")]
public class DeleteTodo : IReturnVoid
{
    public int Id { get; set; }
} 
```

非常感谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T17:15:59.123

首选路线实际上是`Id`在 pathinfo 中包含 ，因为**DELETE**请求没有 HTTP 请求正文，您可以提交此信息，例如：

```
[Route("/todo/{id}", "DELETE")]
public class DeleteTodo : IReturnVoid
{
    public int Id { get; set; }
} 
```

出于务实的原因，您可能希望允许**POST**执行 DELETE，因为我的默认浏览器（和一些代理）不允许发送 DELETE 请求。

```
[Route("/todo/{id}/delete", "POST")]
public class DeleteTodo : IReturnVoid
{
    public int Id { get; set; }
} 
```

**您可以通过在 Ajax 调用中添加X-Http-Method-Override** HTTP 请求标头或作为 FormData 或 QueryString 中的字段来模拟Ajax 或 jQuery 中的**DELETE请求，例如**

 **```
POST /todo/1
X-Http-Method-Override=DELETE 
```

或嵌入在 HTML FormData 中，例如：

```
<form action="/todo/1" method="POST">
   <input type="hidden" name="X-Http-Method-Override" value="DELETE"/>
</form> 
```

虽然重要的是不允许通过 GET 删除，因为根据合同 GET 应该没有副作用，因此可以安全地被 HTTP 中间件（如代理等）缓存和重放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T16:24:08.163

如果您想遵循 REST 准则，则不应使用 GET 或 POST 来删除资源。

> GET 动词用于读取资源。一个重要的经验法则是 GET 操作是安全的。也就是说，它可以重复执行而不会明显改变资源的状态。由于各种原因，该属性非常重要。首先，索引引擎使用 GET 来索引资源的内容。因此，如果索引资源也改变了它，那就不好了。其次，诸如代理之类的中介可以缓存 GET 操作的结果，以加速对同一资源的后续访问。
> 
> PUT 和 DELETE 动词允许请求以原子方式更改资源的状态。
> 
> POST 动词可以有多种含义。它是 HTTP 动词的瑞士军刀。对于某些资源，它可以用来改变内部状态。对于其他人，它的行为可能是远程过程调用的行为。

查看该[页面](http://developer.mindtouch.com/REST/REST_for_the_Rest_of_Us)以获取完整说明。**

# sql - 如何构建 API 使用历史数据库

> ID：12711530
> 
> 赞同：0
> 
> 时间：2012-10-03T15:15:40.640
> 
> 标签：sql, sqlite, database-design

我有一个用于 Web API 的用户数据库，但我还想存储每个用户的使用历史记录，即：页面请求计数、数据量等。就数据库结构而言，实现这一点的最佳方法是什么？我最初的想法是保留主表，然后为每个用户创建一个历史表。然而，这似乎非常不切实际。我的直觉是，我可能需要一个单独的表来记录使用历史，但我不清楚如何构建它。

我正在使用 SQLite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:11:48.533

在我的一个程序中，我维护了每个用户的模块使用表。表的结构是

```
table id
user id
prog id
date/time
history flag (0=current, 1=history)
runs (number of time user has run program on date) 
```

大约每周一次，我汇总表中的数据：如果用户 1 在给定日期运行程序 1 两次，那么表中最初将有两个条目：

```
1;1;1;04/10/12 08:56;0;1
2;1;1;04/10/12 09:33;0;1 
```

聚合后，表变为

```
3;1;1;04/10/12 00:00;1;2 
```

虽然聚合会丢失时间部分，但不会丢失其他数据，并且对表的查询会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:02:51.207

对于事件日志模型（这是您想要的），我可以推荐两个选项

1.  一张桌子，让我们称之为`activity_log`。

    ```
     `activity_log`{
      id INTEGER PRIMARY KEY,
      user_id MEDIUM INT NOT NULL,
      event_type VARCHAR(10),
      event_time TIMESTAMP 
             } 
    ```

    对于系统中影响用户的每个事件，您都在该角色中插入一条记录（我相信列名是不言自明的）。我相信 SQLite 不提供本机`TIMESTAMP`类型，因此您必须处理应用程序代码中的存储。这种设计会给您留下一个有可能变得非常大的表格，但它会给您提供细粒度的统计信息。SQLite 不支持聚集索引，但这里有一些选项[可以](http://www2.sqlite.org/cvstrac/wiki?p=PerformanceTuningWindows)帮助您进行性能调整。

2.  与上面相同的表，只是不是为每个事件插入一个新行，您将执行一个条件插入，即为已经存在的用户更新现有行并为新用户更新。此选项将使您的表格比上面的表格小几倍，但您只能访问最近使用的 api。

如果你负担得起，我会说选择1号。

# format - 获取表格的最后一个插入

> ID：12711533
> 
> 赞同：0
> 
> 时间：2012-10-03T15:15:56.663
> 
> 标签：format

我有一个表 RECEIPT，我创建的 ID 是

REC-201290001 = "REC-"+"YEAR"+"MONTH"+"0001"

我使用 String.Format 创建数字，但为了创建下一个，我需要插入的最后一个 ID，以便增加它。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:19:39.540

```
$query = mysql_query("select value from config where name = 'next_receipt_id'");
$row = mysql_fetch_assoc($query);
$receiptId = "REC-"+"YEAR"+"MONTH"+$row['value'];

$insert_query = mysql_query("INSERT into order (`id`,...) values($receiptId,...)");

$updateReceiptId = mysql_query("update config set value = value+1 where name = 'next_receipt_id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:20:34.193

您需要某种持久存储来存储计数器。您使用该计数器作为种子生成新的 ID。

您可以使用一个简单的文件，或者更优雅的数据库来实现持久存储。互联网上有数百个关于此的教程。

# jquery - 不断获取滚动条的垂直位置

> ID：12711535
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:15:57.020
> 
> 标签：jquery, scrollbar, scrolltop

我希望在用户达到某个**文档高度**时显示一个弹出窗口。例如，当读者接近帖子的结尾时，可以触发弹出窗口询问他/她的输入（评论是否喜欢帖子）我尝试通过以下方式获取/传递文档高度：

```
function doch() {
    var currentscrollpos;
    if (currentscrollpos > 1500) { 
        //trigger popup
        alert(currentscrollpos);
    }
    setInterval(function() {
        currentscrollpos = $(document).scrollTop();
        return currentscrollpos;
    }, 3e3);
}​ 
```

in html 函数可以简单地通过 doch() 触发；

问题是 currentscrollpos 的值不能从*setInterval 函数*传递到*if 循环*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:27:03.360

如果可以绑定到用户向下滚动页面，为什么还要使用 setInterval？

```
$(window).scroll(function(){ //when a user scrolls
    if(this.pageYOffset + $(this).height() > $(document).height() - 200){ //if the scroll is within 200 px of the bottom of the page
        $('div').css('background', 'red'); //do popup
    }
}); 
```

[http://jsfiddle.net/rUbwq/2/](http://jsfiddle.net/rUbwq/2/)

# mysql - 基于另一个字段选择具有重复字段的行

> ID：12711537
> 
> 赞同：2
> 
> 时间：2012-10-03T15:16:08.733
> 
> 标签：mysql, duplicates

我正在尝试解决这个棘手的问题，但没有成功。我有一个如下的mysql表：

```
Category      Model      Description
cat1           AAA       Triple A
cat1/cat2      AAA       Triple A
cat1/cat2      BBB       Triple B
cat1           BBB       Triple B
cat3           CCC       Triple C
cat3/cat4/cat5 CCC       Triple C
cat3/cat4      CCC       Triple C 
```

等等

我想选择具有唯一模型和“最长”类别的行。基本上我想获得：

```
Category      Model      Description
cat1/cat2      AAA       Triple A
cat1/cat2      BBB       Triple B
cat3/cat4/cat5 CCC       Triple C 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:18:10.493

```
select m.*
from MyTable m
inner join (
    select Model, max(char_length(Category)) as MaxLen
    from MyTable
    group by Model
) mm on m.Model = mm.Model and char_length(m.Category) = mm.MaxLen 
```

实际上，您可能想要最深的类别而不是最长的类别。如果是这种情况，还有比上面更好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:26:20.460

根据您提供的数据，以下内容将起作用：

```
select max(category), Model, Description
from t
group by Model, Description 
```

这是因为 "cat1" < "cat1/cat2" 等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:02:46.913

如果“最长”表示类别中的最大数量`/`（应该是），请尝试以下操作：

```
SELECT
    t.Category
    , t.Model
    , t.Description
FROM
    t
    INNER JOIN
    (
        SELECT
            Model
            , MAX(CHAR_LENGTH(Category) - CHAR_LENGTH(REPLACE(Category, '/', ''))) AS Depth
        FROM
            t
        GROUP BY
            Model
    ) AS tmax
        ON t.Model = tmax.Model
        AND CHAR_LENGTH(t.Category) - CHAR_LENGTH(REPLACE(t.Category, '/', '')) = tmax.Depth 
```

此外，它似乎工作：[http ://sqlfiddle.com/#!2/725e5/3/0](http://sqlfiddle.com/#!2/725e5/3/0)

# c# - 在树视图中添加书签作为文件并双击打开它

> ID：12711542
> 
> 赞同：1
> 
> 时间：2012-10-03T15:16:20.017
> 
> 标签：c#, ms-office, office-interop, office-addins

我正在为 Microsoft Word 创建一个加载项。我有一个树视图控件，我在其中以分层结构生成文件夹、文件和文件的书签。

为此，我正在使用这些代码：

```
void GetTree(string strSearchPath)
    {
        treeFiles.Nodes.Clear();
        SetNode(treeFiles, strSearchPath);
        treeFiles.TopNode.Expand();
    }

    void SetNode(TreeView treeName, string path)
    {
        DirectoryInfo dirInfo = new DirectoryInfo(path);
        TreeNode node = new TreeNode(dirInfo.Name);
        node.Tag = dirInfo;
        GetFolders(dirInfo, node);
        GetFiles(dirInfo, node);
        treeName.Nodes.Add(node);
    }

    void GetFolders(DirectoryInfo d, TreeNode node)
    {

        try
        {
            DirectoryInfo[] dInfo = d.GetDirectories();

            if (dInfo.Length > 0)
            {
                TreeNode treeNode = new TreeNode();
                foreach (DirectoryInfo driSub in dInfo)
                {
                    treeNode = node.Nodes.Add(driSub.Name, driSub.Name, 0, 0);
                    GetFiles(driSub, treeNode);
                    GetFolders(driSub, treeNode);
                }
            }
        }
        catch { }

    }

    void GetFiles(DirectoryInfo d, TreeNode node)
    {
        var files = d.GetFiles("*.doc*");
        FileInfo[] subfileInfo = files.ToArray<FileInfo>();

        if (subfileInfo.Length > 0)
        {
            for (int j = 0; j < subfileInfo.Length; j++)
            {
                bool isHidden = ((File.GetAttributes(subfileInfo[j].FullName) & FileAttributes.Hidden) == FileAttributes.Hidden);
                if (!isHidden)
                {
                    string strExtention = Path.GetExtension(subfileInfo[j].FullName);
                    if (strExtention.Contains("doc"))
                    {
                        TreeNode treeNode = new TreeNode();
                        treeNode = node.Nodes.Add(subfileInfo[j].FullName, subfileInfo[j].Name, 1, 1);
                       AddBookMarkFile(subfileInfo[j].FullName, treeNode);
                    }
                }
            }
        }
    }

    private void AddBookMarkFile(string strParentFile, TreeNode node)
    {
        object oDocPath = strParentFile;
        object oMissing = System.Reflection.Missing.Value;
        object oVisible = false;
        object oReadOnly = true;
        object saveChanges = Word.WdSaveOptions.wdSaveChanges;
        object originalFormat = Word.WdOriginalFormat.wdOriginalDocumentFormat;
        object routeDocument = true;

         Word.Document ReadDoc=null;

        try
        {
           // ReadDoc = Globals.ThisAddIn.Application.Documents.Open(ref oDocPath, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oVisible);
            ReadDoc = Globals.ThisAddIn.Application.Documents.Open(ref oDocPath, ref oMissing, ref oReadOnly, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oVisible, ref oMissing, ref oMissing, ref oMissing);

            // Loop through all hyperlink
            Word.Bookmarks bms = ReadDoc.Bookmarks;
            for (int i = 1; i <= bms.Count; i++)
            {

                object index = (object)i;
                Word.Bookmark bm = bms.get_Item(ref index);
                if (!string.IsNullOrWhiteSpace(bm.Name.ToString()))
                {
                    node.Nodes.Add(strParentFile + "~" + bm.Name.ToString(), bm.Name.ToString(), 1, 1);
                }
            }
        }
        finally
        {
           // ReadDoc.Close(ref saveChanges, ref originalFormat, ref routeDocument);

        }
    } 
```

在节点上双击我正在使用此代码：

```
private void treeFiles_NodeMouseDoubleClick(object sender, TreeNodeMouseClickEventArgs e) 
    {          
        string[] fullPath = e.Node.Name.Split('~');
        string checkExt = Path.GetExtension(fullPath[0]);
        if (checkExt.Contains("doc"))
        {
            object fileName = fullPath[0];
            object readOnly = false;
            object isVisible = true;
            object missing = System.Reflection.Missing.Value;

            Word.Document aDoc = Globals.ThisAddIn.Application.Documents.Open(ref fileName, ref missing, ref readOnly, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref isVisible);

            //if (!string.IsNullOrWhiteSpace(fullPath[1]))
            //{
            //    //Select the bookmark
            //    object bookmarkName = fullPath[1];
            //    if (aDoc.Bookmarks.Exists(bookmarkName.ToString()))
            //    {
            //        Word.Bookmark bookmark = aDoc.Bookmarks.get_Item(ref bookmarkName);
            //        bookmark.Select();
            //    }
            //}
            aDoc.Activate();
        } 
```

问题如下： 1）。文件不会在树视图中的文件的单击方法上打开。如果我不使用

```
AddBookMarkFile(string strParentFile, TreeNode node) 
```

然后是它的工作文件。但我想将书签文件显示为父文件的子文件。单击书签或文件时，它应该打开。

2）同时在树视图中添加文件。如果我添加书签文件，则文件会出现在文档恢复任务窗格中。我怎么能摆脱它。

3）。如果我不使用

```
 AddBookMarkFile(string strParentFile, TreeNode node) 
```

方法然后它工作正常。

请帮帮我。

# ajax - 使用 jQuery AJAX post 将 JS 数组传递给 VB.Net

> ID：12711545
> 
> 赞同：1
> 
> 时间：2012-10-03T15:16:24.647
> 
> 标签：ajax, vb.net, jquery, post

我正在使用 jQuery AJAX 发布请求将客户端 JS 数组传递给服务器端 VB.NET 代码。我有一种可行的方法，但我想知道最佳实践。我是这样开始的：

JS：

```
var myArray=["Apple","Banana"];
$.ajax({url:"myhandler.ashx", 
        data:{"myArray":myArray.toString()}, type: "POST"}); 
```

VB：

```
Dim myArray as String() 
    = HttpContext.Request.Form("myArray").Split(New [Char]() {","c}) 
```

在 JS 中，myArray.toString() 将我的数组转换为逗号分隔的字符串“Apple,Banana”，然后在 VB 中，Split 将其转换回字符串数组。

然后我发现ajax会自动为你序列化数组。所以我可以关闭 .toString() ：

```
$.ajax({url:"myhandler.ashx", data:{"myArray":myArray}, type: "POST"}); 
```

当我这样做时，在 VB 端我发现 HttpContext.Request.Form 不再有一个键“myArray”它现在称为“myArray[]”，你瞧，它是一个逗号分隔的字符串：“Apple，香蕉”。

以下是我的问题：

1) VB.NET 中是否有内置的反序列化方法将逗号分隔的字符串转换回字符串数组？

2）我的数组的Ajax序列化是否只是调用toString（），如果存在反序列化函数，它只是像我一样调用Split（）吗？

3）除了标准之外，使用内置的序列化/反序列化有什么好处吗？我能想到一个缺点。我不喜欢它通过添加方括号来重命名我的密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:16:36.230

将数组转换为 JSON：

```
$.ajax({url:"myhandler.ashx", data:{"myArray":JSON.stringify(myArray)}, type: "POST"}); 
```

[使用Json.NET](http://james.newtonking.com/pages/json-net.aspx)反序列化 .NET 中的 JSON 数组

# c++ - 永久保存数据

> ID：12711547
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:16:35.173
> 
> 标签：c++

我正在使用 qt 开发一个项目，我需要永久保存数据（文件路径和密码），以便我可以随时获取或修改它，即使我退出我的应用程序并重新运行它。我想用加密的 xml 文件来解决它，但我想不留痕迹地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:24:11.953

当然不可能不留痕迹地在计算机上保存一些东西。一切都对 root 用户可见。

但是如果你不想让别人改变它，你可以加密它，隐藏它并设置它只读和root编辑权限。但不让任何人发现它是不可能的。（你是想制造病毒吗？）即使你把BIOS放进去，也有办法找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:28:14.327

您要么使用文件，要么使用其他特定于平台的数据库机制，例如 Windows 的注册表。但它会留下痕迹；您不能希望在本地存储某些内容并且在不对操作系统进行 rootkit 的情况下不留下痕迹（即使这样也会在硬件中留下痕迹，毕竟您正在将数据写入驱动器）。

您可以希望不留痕迹地做的一件事是通过网络将数据远程存储在某个服务器中，因为通常不记录网络活动（但可以观察到），但我可以看到这种方法存在两个问题：

1）这可能会给您的用户带来一些隐私问题（如果我是您的应用程序的用户，我不希望看到我的数据通过网络发送到未知服务器）；

2）您如何识别信息以便检索它？您可以对用户名和计算机硬盘驱动器 ID 和网络接口 MAC 地址使用一些哈希，但如果其中一些更改，数据将会丢失。您还可以为应用程序的每次安装生成一个唯一的 id，但这需要您在本地存储该 ID，这将是*一个 trace*。

防止读取/篡改数据的本地加密本质上是不安全的，因为您需要有一些可重复的方法来检索密钥。你会怎么做？如果您只是在应用程序中对其进行硬编码，则可以通过一些二进制文件阅读器轻松检索它。由于显而易见的原因，它不能位于名为“key.txt”的文件中。您可以在运行时使用一些复杂的算法来计算它，但是您总是需要在某个时间点将它加载到内存中，以便有人愿意从那里检索它。

# python - 用几个文件喂空 pandas.dataframe

> ID：12711551
> 
> 赞同：0
> 
> 时间：2012-10-03T15:16:58.983
> 
> 标签：python, dataframe, pandas

我想提供一个空的`dataframe`附加几个相同类型和结构的文件。但是，我看不出这里有什么问题：

```
def files2df(colnames, ext):
    df = DataFrame(columns = colnames)
    for inf in sorted(glob.glob(ext)):
        dfin = read_csv(inf, sep='\t', skiprows=1)
        print(dfin.head(), '\n')
        df.append(dfin, ignore_index=True)
    return df 
```

结果数据框为空。有人可以帮帮我吗？

```
 1.0  16.59  0.597  0.87  1.0.1   3282 100.08
 0  0.953  14.52  0.561  0.80   0.99   4355      -
 1  1.000  31.59  1.000  0.94   1.00   6322      -
 2  1.000   6.09  0.237  0.71   1.00  10568      -
 3  1.000  31.29  1.000  0.94   1.00  14363      -
 4  1.000  31.59  1.000  0.94   1.00  19797      - 

      1.0   6.69  0.199  0.74  1.0.1   186 13.16
 0      1   0.88  0.020  0.13   0.99   394     -
 1      1   0.75  0.017  0.11   0.99  1052     -
 2      1   3.34  0.097  0.57   1.00  1178     -
 3      1   1.50  0.035  0.26   1.00  1211     -
 4      1  20.59  0.940  0.88   1.00  1583     - 

      1.0  0.12  0.0030  0.04  0.97   2285 2.62
 0     1  1.25   0.135  0.18  0.99   2480    -
 1     1  0.03   0.001  0.04  0.97   7440    -
 2     1  0.12   0.003  0.04  0.97   8199    -
 3     1  1.10   0.092  0.16  0.99  11174    -
 4     1  0.27   0.007  0.06  0.98  11310    - 

   0.244  0.07  0.0030  0.02  0.76  41314 1.32
 0  0.181  0.64   0.028  0.03  0.36  41755    -
 1  0.161  0.18   0.008  0.01  0.45  42420    -
 2  0.161  0.18   0.008  0.01  0.45  42461    -
 3  0.237  0.25   0.011  0.02  0.56  43060    -
 4  0.267  1.03   0.047  0.07  0.46  43321    - 

 0.163  0.12  0.0060  0.01   0.5  103384 1.27
 0  0.243  0.27   0.014  0.02  0.56  104693    -
 1  0.215  0.66   0.029  0.04  0.41  105192    -
 2  0.190  0.10   0.005  0.01  0.59  105758    -
 3  0.161  0.12   0.006  0.01  0.50  109783    -
 4  0.144  0.16   0.007  0.01  0.42  110067    - 

Empty DataFrame
Columns: array([D, LOD, r2, CIlow, CIhi, Dist, T-int], dtype=object)
Index: array([], dtype=object) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:52:50.570

df.append(dfin, ignore_index=True) 返回一个新的DataFrame，它不会原地改变df。使用 df = df.append(dfin, ignore_index=True)。但即使有了这个改变，我认为这不会给你所需要的。附加在axis = 1（列）上扩展一个框架，但我相信你想组合axis = 0（行）上的数据

在这种情况下（读取多个文件并使用所有数据创建一个 DataFrame），我会使用 pandas.concat()。下面的代码将为您提供一个包含以 colnames 命名的列的框架，并且行由 csv 文件中的数据形成。

```
def files2df(colnames, ext):
    files = sorted(glob.glob(ext))
    frames = [read_csv(inf, sep='\t', skiprows=1, names=colnames) for inf in files]
    return concat(frames, ignore_index=True) 
```

我没有尝试这段代码，只是在这里写的，也许你需要调整它才能让它运行，但这个想法很清楚（我希望）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:34:40.527

另外，我找到了另一种解决方案，但不知道哪个更快。

```
def files2df(colnames, ext):
    dflist = [ ]
    for inf in sorted(glob.glob(ext)):
        dflist.append(read_csv(inf, names = colnames, sep='\t', skiprows=1))
        #print(dflist)                                                                                                                            
    df = concat(dflist, axis = 0, ignore_index=True)
    #print(df.to_string())                                                                                                                        
    return df 
```

# wpf - Bit blit 位图（WriteableBitmapEx 框架）

> ID：12711555
> 
> 赞同：0
> 
> 时间：2012-10-03T15:17:07.140
> 
> 标签：wpf, writeablebitmapex

我还没有完全理解 Bit blit 位图的基础知识。

我正在使用 WriteableBitmapEx 框架 (WPF)。我的位图代表一张地图，我想要实现的是将（移动）符号复制到该地图中。

对于实际复制，我使用函数 Blit：

```
 _bitmap.Blit(myObject.Value.Location.ToWindowsPoint(), symbol, rect, Colors.Cyan,
                         WriteableBitmapExtensions.BlendMode.Additive); 
```

其中 symbol 是 png 图像（透明背景）。

这适用于主体，但我不明白混合模式如何应用颜色（Colors.Cyan）。我已经尝试了所有可用的混合模式，但我没有成功地将青色作为符号的颜色，或者我得到了颜色，但是透明背景也被复制到源位图（黑色背景）。

对于我的用例，“Bliting”是错误的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:26:32.663

一种更简单的方法是使用图像（对应的 WPF ui 元素）并将其分层在位图之上。这还有一个优点，即您可以移动图像而无需重新绘制位图。

# python - 我应该如何将本地模块导入项目？

> ID：12711556
> 
> 赞同：0
> 
> 时间：2012-10-03T15:17:06.123
> 
> 标签：python

按照[这个文件结构](http://as.ynchrono.us/2007/12/filesystem-structure-of-python-project_21.html)，我的项目如下（简化）：

```
Project/
|-- project/
    |-- test/
        |-- test_foo.py
    |-- foo.py 
```

使用最佳实践，我应该如何`foo`从内部导入`test_foo.py`？我知道相对进口，但[PEP 8 不鼓励他们](http://www.python.org/dev/peps/pep-0008/#imports)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:31:15.323

在单元测试中，至少对于外部接口，更喜欢绝对导入。测试应该尽可能地看起来像客户端代码，并且当事情移动时，当`__init__.py`没有正确地从模块重新导出等时，它们应该会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:18:52.437

在测试中，我总是使用`from .. import foo`，因为它是最简单的，使包最容易重构，并且不会破坏，因为我总是将测试保存在`tests/`子包中。

PEP8 前半部分讨论的相对导入是隐式相对导入：例如， from `foo.py`: `import test.test_foo`。这些*很*糟糕，而且*从来没有*理由使用它们。

否则，唯一的选择是`from project import foo`。

# javascript - 将字符串传递给函数以定义属性名称

> ID：12711558
> 
> 赞同：1
> 
> 时间：2012-10-03T15:17:10.867
> 
> 标签：javascript, parameters

早上好

我想在 java 脚本中将字符串作为函数参数传递，但该字符串将表示我希望函数对其进行操作的属性的名称。我以前见过这样做，但不太理解。

下面的函数显示了我所指的“字段”参数。它作为字符串传递了一个值，但对名称与字符串值匹配的属性进行操作。

我想要做的是循环遍历对象数组并仅返回存储在名称与传递的字符串匹配的属性中的值。这个想法是有一个函数可以处理任何具有已添加到数组中的属性的对象并返回任何属性，而无需为每个属性编写循环函数。

下面是这种魔法的一个例子：

```
listName.sort(sort_by('stringPropertyName', false, function(a){return a.toUpperCase()}));

var sort_by = function(field, reverse, primer){ //http://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects
   var key = function(x){return primer ? primer(x[field]) : x[field]};
   return function (a,b){
       var A = key(a), B = key(b);
       return ((A < B) ? -1 :(A > B) ? +1 : 0) * [-1,1][+!!reverse];                  
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:20:37.683

如果您想*“循环遍历对象数组并仅返回名称与传递的字符串匹配的属性中存储的值”*，您可以这样做：

```
function getValues(array, propname) {
     var values = [];
     for (var i=0; i<array.length; i++) {
         if (typeof array[i][propname] !== 'undefined') {
             values.push(array[i][propname])
         }
     }
     return values;
} 
```

“技巧”是使用包含属性名称的变量`obj[propname]`而不是`obj.propname`when来访问属性。`propname`

例如`window.location`可以访问为`window["location"]`

[示范](http://jsfiddle.net/dystroy/GNE86/1/)

# sql-server - 索引视图以优化对多个表的搜索

> ID：12711561
> 
> 赞同：0
> 
> 时间：2012-10-03T15:17:15.827
> 
> 标签：sql-server, sql-server-2008, search, indexed-view

我有一个关于优化复杂搜索查询性能的想法的问题。这是这种情况：

基表，包含要搜索的字段：

```
Server (uniqueNumber, serverName, hostName) 
```

要加入的表，以及要搜索的字段：

```
Customer (Company, vatNumber)
CustomerContact (firstName, lastName, email, telephone, mobile)
Ip (ipAddress) 
```

我的想法是创建一个像这样的索引视图：

```
viewServers (ServerID, Term) 
```

（ServerID 上的聚集索引，Term 上的非聚集索引）

这是所有可能数据的联合：

```
SELECT * FROM (
    SELECT s.ServerID AS ServerID, c.Company AS Term FROM Customer c 
        INNER JOIN Server s ON s.CustomerID = c.CustomerID
    UNION
    SELECT s.ServerID AS ServerID, c.vatNumber AS Term FROM Customer c 
        INNER JOIN Server s ON s.CustomerID = c.CustomerID
    UNION
    SELECT s.ServerID AS ServerID, c.firstName AS Term FROM CustomerContact cc 
        INNER JOIN Customer s ON s.CustomerID = cc.CustomerID
        INNER JOIN Server s ON s.CustomerID = c.CustomerID
    UNION
    SELECT s.ServerID AS ServerID, i.ipAddress AS Term FROM Ip i 
        INNER JOIN Server s ON i.ServerID = i.ServerID
    UNION
) AS result ORDER BY Term 
```

当我想搜索时，我打算这样做：

```
SELECT * FROM Server WHERE ServerID IN (SELECT ServerID FROM viewServers WHERE Term LIKE @Term 
```

好主意还是坏主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:25:15.373

如果不了解有关数据库的许多其他信息，很难说这是一个好主意还是坏主意。索引视图可能会帮助该特定查询，但可能会损害其他数据库操作。此外，创建非唯一聚集索引 (ServerID) 也不是一个好主意。

# activepivot - 水平分布的 ActivePivot 集群管理

> ID：12711563
> 
> 赞同：1
> 
> 时间：2012-10-03T15:17:24.693
> 
> 标签：activepivot

我们目前在水平分布上使用 ActivePivot 4.3。

我们按历史天数拆分数据。即使加载速度很快，我们也不想让用户访问部分加载的节点。

我们希望在加载时在集群外部有一个节点，并在它准备好时加入它。此外，如果它正在维护中，我们可能希望将其排除在集群之外。为了实现这一点，我们需要对节点如何加入/离开集群进行一些控制。

我相信通过 JMX 可以进行一些控制，但是，我们希望以编程方式访问这些控件，最好是通过 Web 服务。

我们如何实施呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:08:55.877

使用 ActivePivot 4.3.3，您可以这样实现：

要防止节点在完全加载之前加入集群，您可以将“autoStart”分发属性设置为 false。

在您的 schema.xml 文件中，添加以下代码

```
...
    <distributionDescription>
        <distributedPivotId> xxxx </distributedPivotId>
        <clusterId> xxxx </clusterId>
        <distributionType> xxxx </distributionType>
        <properties>
            <entry key="autoStart" value="false" />
        </properties>
    </distributionDescription>
... 
```

然后，负责通过网络进行通信的信使组件将不会启动。您必须手动完成。

要启动这个组件，你必须调用它的“start()”方法。如果您不想使用 JMX 工具并以编程方式进行操作，则必须使用“ActivePivotManager”组件。它提供了获取多个 ActivePivot 实例的方法：使用它来获取所需的分布式 ActivePivot。

最后，使用分布式 ActivePivot 中的“getMessenger()”方法获取信使组件，并启动它。然后被考虑的节点将加入集群。

假设您有经理，您的代码应如下所示：

```
ADistributedActivePivot myDistributedPivot = (ADistributedActivePivot) manager.getActivePivots().get("myDistributedPivot"); // Change it to the Id of your distributed pivot
myDistributedPivot.getMessenger().start(); 
```

要使节点加入/离开集群，您可以自由地使用其信使的“pause()”和“resume()”方法。

# javascript - 在javascript中将正则表达式存储在字符串中？

> ID：12711566
> 
> 赞同：3
> 
> 时间：2012-10-03T15:17:36.007
> 
> 标签：javascript, regex, firefox-addon, xul

> **可能重复：**
> [将用户输入字符串转换为正则表达式](https://stackoverflow.com/questions/874709/converting-user-input-string-to-regular-expression)
> [javascript new regexp from string](https://stackoverflow.com/questions/5172183/javascript-new-regexp-from-string)

我在javascript中的正则表达式有点问题（我还不太习惯在javascript中使用正则表达式）。我想替换字符串中的一些东西，我注意到编写正则表达式的语法似乎没有`'`或`"`像这样：`var replacedtitle = title.replace(/\[.*?\]/g, "");`

现在这一切都按预期工作，但我希望用户能够在不更改代码的情况下从界面添加自己的正则表达式（我正在为一个不编码的朋友做一个私人项目，我希望能够当需要更换新东西时，只需将正则表达式发送给他输入，而不是我每次都重新包装所有东西）。我通过在其中输入正则表达式的 xul 文本框（这是一个 firefox 插件，但应该与 html 文本框相同）来做到这一点，它被添加到一个 json 对象并保存。我试着做这样的事情：

```
var replacedtitle = "";
for(a = 0; a < regex.data.length;a++){
    replacedtitle = title.replace(regex.data[a].regex, "");
} 
```

但它不会工作。我怀疑这是因为`regex.data[a].regex`将被视为一个字符串，但 replace() 似乎没有将字符串作为第一个参数，对吧？

我对此有点不确定，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T15:20:03.270

您可以改为创建一个 RegEx 对象`new`，并为模式和修饰符提供字符串；

```
var re = new RegExp("\\[.*?\\]", "g"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:06:45.840

将字符串拆分为模式和修饰符。

```
function getRegFromString(string){

     var a = string.split("/");
     modifiers= a.pop(); a.shift();
     pattern = a.join("/");
     return new RegExp(pattern, modifiers);
}
getRegFromString("/\[.*?\]/gim"); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-03T15:22:00.567

```
var string = "/\[.*?\]/g";
var regex = new RegExp(string); 
```

会正常工作。

# google-app-engine - AppEngine 上的 JSTL - 标记不起作用

> ID：12711572
> 
> 赞同：1
> 
> 时间：2012-10-03T15:18:06.890
> 
> 标签：google-app-engine, jstl

我想在我的 AppEngine JSP 中使用 JSTL 来呈现数据。我已经完成了[留言簿演示](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)，它对我来说很好，包括像这样的 JSTL 调用（来自链接的示例）：

```
<blockquote>${fn:escapeXml(greeting_content)}</blockquote> 
```

但是，然后我尝试通过标签使用 JSTL，例如：

```
<fn:out value="greeting_content" /> 
```

要不就

```
<fn:out value="" /> 
```

我得到一个 500 错误和一个异常堆栈跟踪说：

```
org.apache.jasper.JasperException: /guestbook.jsp(80,4) No tag "out" defined in tag library imported with prefix "fn" 
```

JSTL 库如示例所示在文件顶部导入，即

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %> 
```

正如预期的那样，如果我删除该行 ${fn:something} 调用将停止工作。

有谁知道为什么会这样？JSTL 应该以这种方式工作，不是吗？我觉得我在这里遗漏了一些基本的东西，但我就是找不到它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:58:49.867

您应该`<c:out value=""/>`用于输出。

# css - 在视频缩略图上制作 css 播放按钮

> ID：12711576
> 
> 赞同：4
> 
> 时间：2012-10-03T15:18:10.400
> 
> 标签：css, video, playback, video-thumbnails

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:27:02.373

I can't explain why but for some reason your change of methods for declaring a child element is causing the problem. Using my first two recommendations of using the unicode entity for the content and using the pseudo element rather than the pseudo class, the CSS should work. However, it did not initially work. When I removed `>` from the first line the CSS worked.

Here's a demo: [http://jsfiddle.net/vtPhZ/4/](http://jsfiddle.net/vtPhZ/4/)

Your method was strange but the fact that it didn't work was even more strange...

# c# - SignalR 和异构类型的客户端

> ID：12711579
> 
> 赞同：2
> 
> 时间：2012-10-03T15:18:16.420
> 
> 标签：c#, asp.net-mvc, signalr, signalr-hub, signalr.client

我对 SignalR 完全陌生，所以请原谅我的愚蠢问题。

比方说，我有许多在 AWS EC2 实例上运行的控制台应用程序（或 Windows 服务），我有一个 Web 服务器（托管 MVC3 的 IIS），当然我有无数个 Web 客户端......

我如何在它们之间进行交流？比方说

1.  我需要每隔几秒钟在网络浏览器中从 EC2 机器上获取一些信息——（CPU 负载或类似的东西）
2.  按需（当用户单击网页上的按钮时）它应该拉取所选机器的其他内容（比如说 C: 驱动器上的 AvailibleDiskSpace）

我应该使用什么 - Hub 或 PersistentConnection？在这种情况下，控制台应用程序也将是客户端或 SelfHosts（SelfHost 到底是什么？）

是否有任何示例代码可以让我学习如何构建类似的东西？（我相信 Nuget 和 Github 和 VideoTutorials 上的示例向您展示了如何构建一个服务器/多个 Web 客户端解决方案，但不是我需要的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:36:03.767

您最好的选择可能是将 SignalR 服务器与您的 MVC 应用程序一起托管在 IIS 上。不要担心自托管，因为您已经设置了 IIS。

我认为您会更轻松地使用 Hubs 而不是 PersistentConnections，因为 Hubs 允许 RPC。

*   [https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)
*   [https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

在您的控制台应用程序和 Windows 服务中，我建议使用 SignalR .NET 客户端。

[https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)

您可以将数据从控制台应用程序推送和拉取到 SignalR 服务器，然后该服务器可以充当浏览器客户端的*代理。*当然，SignalR 服务器可以双向代理，允许任何客户端向任何其他客户端发送实时消息或请求。

[https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)

您的 .NET 和 JS 客户端可以访问相同的集线器或不同的集线器。如果所有客户端都访问同一个集线器，您可能希望将它们分成组，以便区分两种类型的客户端。如果您选择使用多个集线器，您可能希望使用`GlobalHost.ConnectionManager.GetHubContext<MyHub>()`与连接到与被调用集线器不同的集线器的客户端进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:18:31.453

一个问题很多...... :)

首先，控制台应用程序/Windows 服务可能只是客户端，就像浏览器一样`Hub`。完全没有理由为此下降到`PersistentConnection`编程模型。

其次，您讨论了两个不同的用例：

1.  如果您需要每隔几秒推送一次状态，这是一个完美的 SignalR 客户端方法。您只需根据可能从性能计数器收到的任何通知在客户端上调用该方法。此逻辑可能在集线器本身内，也可能只是来自集线器的客户端调用一个方法，然后将“扇形”到集线器的所有其他客户端（建议后者）。
2.  对于 ServerA 场景中的按钮按下/获取可用空间，您正在谈论几个层。您需要以某种方式从浏览器到集线器到 ServerA 获取一条消息，以获取您正在寻找的结果，然后响应浏览器。老实说，这不是由 SignalR 纯粹解决的。ServerA 需要有自己的服务接口，集线器可以调用它来获取结果并能够响应浏览器客户端。然后，您将让浏览器调用 hub 方法，hub 方法将向 ServerA 发出请求，等待结果，然后将结果返回给浏览器。那里有很多路由工作要做，但没有什么神奇的，也没有特定于 SignalR 的。出于所有意图和目的，这个场景现在可以在纯 Web 服务架构中完成。

接下来，Self-Host 是指 SignalR 服务器托管在 IIS+ASP.NET 以外的主机中。例如，您可以在另一个控制台应用程序或 Windows 服务中启动 SignalR 服务，而不是在 IIS+ASP.NET 中托管。[您可以在 SignalR Wiki](https://github.com/SignalR/SignalR/wiki/Self-host)中找到关于自托管的不错的文档。

至于 SignalR 示例，老实说，您正在考虑构建的内容与向您展示如何操作的基本文档没有什么不同。您需要[查看控制台应用程序/Windows 服务的 .NET 客户端中心 wiki 页面](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)，您需要[查看浏览器应用程序的浏览器客户端 wiki 页面](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)，然后如果需要，您需要查看[自托管 wiki 页面](https://github.com/SignalR/SignalR/wiki/Self-host)在 IIS+ASP.NET 之外托管您的服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:48:12.073

您将需要使用集线器。

这是一个如何做到这一点的例子（在 0.5.3 中）：

服务器端（集线器）：

```
public class MyDashboard : Hub
{
    /* Have this method called every few seconds via a timer */
    public void SendLoad()
    {
        // Will call the "retrieveLoad" JS method on the clients
        Clients.retrieveLoad(new {
            CPU = 10.25, // Put something relevant here
            Memory = "80%" // Again, put something relevant here
        });
    }

    public double GetDiskSpace()
    {
        return 3829847; // You'd replace the number with something more relevant
    }
} 
```

客户端（javascript）：

```
var dashboard = $.connection.myDashboard;

dashboard.retrieveLoad = function(info) {
    console.log("The CPU is at: " + info.CPU);
    console.log("The Memory is at: " + info.Memory);
}

$.connection.hub.start(function() {
    // This is called once the hub has started, so we need to wire up our click event
    $("#myButton").click(function() {
        dashboard.getDiskSpace(function(space) {
            console.log("The disk space is at: " + space);
        });
    });
}); 
```

希望这可以帮助！随时在我们的 JabbR 房间停下来与其他人讨论该框架：http: [//jabbr.net/#/rooms/signalr](http://jabbr.net/#/rooms/signalr)

注意：请记住，如果您希望在集线器上保留任何内容（私有/公共变量等）以使该数据静态化。

# html - 如何使用 file: 方案在 html 中指定本地文件？

> ID：12711584
> 
> 赞同：55
> 
> 时间：2012-10-03T15:18:32.690
> 
> 标签：html, url, file-uri

我正在加载一个托管在 Apache 服务器中的 OS X 上的 html 文件，在该文件中我链接到同一目录中的另一个 html 文件，如下所示：

```
<a href="2ndFile.html"><button type="submit">Local file</button> 
```

这行得通。但是（由于太长的原因无法进入）我正在尝试使用 file: 方案，但是我无法得到任何工作。这是我使用文件重写上述行的方式：

```
<a href="file://192.168.1.57/~User/2ndFile.html"><button type="submit">Local file</button> 
```

（192.168.1.57 是我当前的 IP 地址）

将其更改为以下内容也不起作用：

```
<a href="file://Name-Of-MacBookPro/~User/2ndFile.html"><button type="submit">Local file</button> 
```

但是找不到文件，应该如何使用file:scheme来指定呢？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-03T15:33:10.227

`file:`URL 方案引用客户端计算机上的文件。方案中没有主机名`file:`；您只需提供文件的路径。因此，您本地计算机上的文件将是`file:///~User/2ndFile.html`. 注意三个斜线；URL 的主机名部分为空，因此路径开头的斜杠紧跟 URL 开头的双斜杠。您还需要扩展用户的路径；`~`不在`file:`URL 中展开。所以你需要`file:///home/User/2ndFile.html`（在大多数 Unix 上）、`file:///Users/User/2ndFile.html`（在 Mac OS X 上）或`file:///C:/Users/User/2ndFile.html`（在 Windows 上）。

出于安全原因，许多浏览器不允许从服务器加载的文件链接到本地​​文件。因此，您可能无法从通过 HTTP 加载的页面执行此操作；您可能只能链接到`file:`来自其他本地页面的 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:31:11.233

“文件”协议不是网络协议。因此 file://192.168.1.57/~User/2ndFile.html 根本没有多大意义。

问题是如何加载第一个文件。这真的是使用网络服务器完成的吗？听起来不像。如果是，那么为什么不使用相同的协议，很可能是 http？您不能期望简单地切换协议并以相同的方式使用两种不同的协议...

我怀疑第一个文件实际上是使用 apache 服务器加载的，而只是通过打开文件？href="2ndFile.html" 之所以有效，是因为它使用“相对 url”。这使得浏览器使用与他获取第一个（当前）文件的位置相同的协议和路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-07T18:47:56.443

"file://" url 协议只能用于在本地机器的文件系统中定位文件。由于此 html 代码由浏览器解释，因此“本地机器”是运行浏览器的机器。

如果您收到文件未找到错误，我怀疑这是因为找不到文件。但是，它也可能是浏览器的安全限制。某些浏览器不允许您从非文件系统 html 页面引用文件系统文件。您可以尝试在运行浏览器的计算机上使用命令行中的文件路径来确认这是浏览器限制，而不是合法的丢失文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-29T04:28:18.163

对于 apache 查找 SymLink 或者您可以通过带有符号链接的操作系统或在 linux 上设置库链接/等来解决

我的答案是一种专门针对 Windows 10 的方法。

所以我的方法涉及将网络驱动器映射到 U:/（例如，我使用 G:/ 表示 Google Drive）

打开`cmd`并输入`hostname`（示例结果：`LAPTOP-G666P000`，您可以改用您的 ip，但如果您的网络停止，使用静态主机名来识别您自己更有意义）

按`Windows_key + E`> `right click 'This PC'`> 按`N` （它是映射网络驱动器，而不是添加网络位置）

如果您右键单击桌面上的快捷方式，您需要按 N 然后输入

填写`U:`或`G:`或`Z:`或任何您想要的示例地址：`\\LAPTOP-G666P000\c$\Users\username\`

然后你可以`<a href="file:///u:/2ndFile.html"><button type="submit">Local file</button>`在你的问题中使用like

* * *

相关：您也可以将此方法用于 FTP，并为同一网络上的不同相对路径设置多个驱动器。

相关2：我`http://localhost/c$`之前也曾在一些 WAMP/apache 服务器上使用过 etc，您可以`.htaccess`用于控制/安全，但我建议不要在实时/生产机器上这样做——或者您可以谷歌的任何其他符号链接 documentroot 示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-15T05:48:39.160

我之前遇到过类似的问题，在我的情况下，文件在另一台机器上，所以我已将网络驱动器 z 映射到我的文件所在的文件夹位置，然后我在 tomcat 中创建了一个上下文，所以在我的 Web 项目中，我可以通过上下文访问 HTML 文件

# jquery - 在fancybox打开时保持页面可滚动

> ID：12711585
> 
> 赞同：0
> 
> 时间：2012-10-03T15:18:38.177
> 
> 标签：jquery, fancybox, scrollbar, fancybox-2

我将 Fancybox-Plugin V2 用于网页。**现在我遇到的问题是，当 Fancybox 打开时，身体的背景图像和所有背景 DIV（页脚部分）略微向左移动**，因为滚动条消失了。我试图在可滚动的幻想框下维护页面，但没有成功。有没有人有解决方案？

该问题仅出现在已经有滚动条的页面上。

这些是移动元素的 CSS 设置：

```
#footer {width:100%;height:400px;margin-top:100px;position:absolute;text-align:center;

#footer-wrap {width:900px;text-align:center;margin:auto;}

body {background:url(images/hintergrund.jpg) top center no-repeat;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:25:50.167

滚动条不应该消失。该页面是发回还是什么？您可以在下面看到我的小提琴，我在正文中添加了足够的内容以创建垂直滚动条，但请注意，fancyBox 不会导致任何东西闪烁或调整大小。

你的`<a>`标签是什么样的，你如何/用 FancyBox 显示什么？IFrame、内联等

[http://jsfiddle.net/5Um2L/](http://jsfiddle.net/5Um2L/)

# jquery - 一个带有四个 div 页面的索引页面，而不是四个单独的 .html

> ID：12711587
> 
> 赞同：0
> 
> 时间：2012-10-03T15:18:46.803
> 
> 标签：jquery, html, css

我创建了一个 jQuery 页面，并在一个 index.html 上的本地文件夹上使用 jQuery 处理多个页面，而无需费心。

现在我更多地在 CSS3 和 HTML5 上执行此操作，并使用 jQuery 1.7 来实现特性和功能。所以我对样式有更多的控制，而不是 100% 依赖 jQuery 布局。

例如：一个索引页面有四个 div 页面，而不是四个单独的 index.html

在 jQuery index.html 上，您有索引页面

```
 <div data-role="page" id="page" data-theme="a" >
  <?php include("php/header1.php"); ?>
      <!--End HEADER -->
      <div data-role="content">
          <ul data-role="listview">
              <li><a href="#page2">Page 2</a></li>
              <li><a href="#page3">Page 3</a></li>
              <li><a href="#page4">Page 4</a></li>
          </ul>
      </div>   
   <?php include("php/footer_front.php"); ?>
  </div>

  <!-- Start Page two--> 
  <div data-role="page" id="page2">
  <?php include("php/header2.php"); ?>
      <!--End HEADER --> 
      <!-- Start Collapsible Block widget-->
      <div data-role="content">
          Content here for page two
      </div>
      <!-- END Collapsible Block widget--> 
    <?php include("php/footer_front.php"); ?>
  </div>
  <!-- End Page two--> 

  <!-- Start Page Three--> 
  <div data-role="page" id="page3">
  <?php include("php/header3.php"); ?>
      <!--End HEADER --> 
      <!-- Start Collapsible Block widget-->
      <div data-role="content">
          Content here for page two
      </div>
      <!-- END Collapsible Block widget--> 
    <?php include("php/footer_front.php"); ?>
  </div>
  <!-- End Page Three--> 

  <!-- Start Page Four--> 
  <div data-role="page" id="page4">
  <?php include("php/header4.php"); ?>
      <!--End HEADER --> 
      <!-- Start Collapsible Block widget-->
      <div data-role="content">
          Content here for page two
      </div>
      <!-- END Collapsible Block widget--> 
    <?php include("php/footer_front.php"); ?>
  </div>
  <!-- End Page Three--> 
```

但是它不能像索引页本身那样工作，然后单击第二页以获取新的干净第二页？相反，我在一个浏览器窗口中看到索引页、第 2 页、第 3 页和第 4 页>

如何在一个浏览器上分隔页面而不是全部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:50:58.313

我不确定我们是否在这里拥有所有信息，但是如果您想要使用 jQuery 不刷新的单独页面，那么您应该有一个占位符，用于放置页面的所有主要内容，然后仅在您的索引中有第一页内容的代码。当您单击第 2 页时，然后使用 jQuery 通过使用 .html() 删除主内容容器内的 html，并将其替换为新页面 2 的 html。最好的方法是使用 AJAX。如果你不知道那是什么，你应该做一个快速的谷歌搜索并阅读什么是 AJAX 以及如何使用它。

# apache - 带问号的基本 mod_rewrite 操作

> ID：12711593
> 
> 赞同：0
> 
> 时间：2012-10-03T15:19:01.823
> 
> 标签：apache, mod-rewrite

我想重写一个地址：

[http://mysite.com/page?att=XXXXX](http://mysite.com/page?att=XXXXX) 到： http://mysite.com/page.php?att= [XXXXX](http://mysite.com/page.php?att=XXXXX)

我尝试了以下代码，但对我不起作用。我想问号是问题所在：

```
RewriteRule ^page?att=([A-Za-z0-9-_]+)/?$ page.php?att=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:21:16.840

您无法匹配 a 中的查询字符串`RwriteRule`，但在这种情况下，您根本不需要重写查询字符串，您只需要重写 URI ( `page`-> `page.php`)，查询字符串将自动附加：

```
RewriteRule ^/?page$ page.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:24:00.707

我将包含一个 R 指令来显式触发重定向，并包含 QSA 来简单地将整个查询字符串保留在重定向 URL 中。

最后，根据上下文，URI 可能以斜杠开头。如果是这样，您的规则（要求 URI*不*以斜杠开头）将永远不会匹配。添加 /? 开头将匹配带有前导斜杠和不带斜杠的 URI。

```
RewriteRule ^/?page/?$ page.php [R,QSA,L] 
```

试一试。

# javascript - jQuery - 动画闪烁？(IE8)

> ID：12711594
> 
> 赞同：1
> 
> 时间：2012-10-03T15:19:02.177
> 
> 标签：javascript, jquery, html, web

这段代码可以满足我的需要，但它在执行此操作时会出现令人讨厌的闪烁。它的作用是在我有一个包含在“大” div（navContainer）中的内联列表的基础上，在大 div 之上是一个较小的 div（smallNavContainer）。当下面的大 div 向左或向右移动时，较小的 div 会显示列表的不同部分。当我使用“margin-left”时，它可以工作，但有一个烦人的闪烁，如果我只使用“left”，则没有闪烁，但是一旦显示的区域在屏幕外，列表的其余部分都不会移动显示在。有什么办法可以摆脱marginLeft的闪烁？或者当我使用“左”时，有没有办法让列表的其余部分呈现。

jQuery

```
$('#capeBtnsPrevTab').live("click",function() 
{   
    $("#navContainer").animate({"margin-left": "+=468"}, 1000, function(){
    });
});

$('#capeBtnsNextTab').live("click",function() 
{   
    $("#navContainer").animate({"margin-left": "-=468"}, 1000, function(){
    });
}); 
```

CSS

```
.floatIt
{
    float:left;
}

div#smallNavContainer
{
    left: 50%;
    position: absolute;
    z-index:0;
    overflow:hidden;
    width: 780px;
    height: 88px;
    margin-left:-392px;
    margin-top: 72px;
}

#navContainer
{
    position: relative;
    margin-left:-506px;
    margin-top:0px;
}

#navlist li
{
    display: inline;
    list-style-type: none;
    padding-right: 0px;
    padding-left: 0px;
    margin-right: -2px;
    margin-left: -2px;
} 
```

HTML

```
<img class="floatIt" id="capeBtnsPrevTab" src="btn_1.png" alt="Previous"/></a>
<div class="floatIt" id="smallNavContainer">
    <div id="navContainer">
        <ul id="navlist">
            <li><img id="btn9" src="menu_one.jpg"/></li>
            <li><img id="btn10" src="menu_two.jpg"/></li>
            <li><img id="btn11" src="menu_three.jpg"/></li>
            <li><img id="btn1" src="menu_four.jpg"/></li>
            <li><img id="btn2" src="menu_five.jpg"/></li>
            <li><img id="btn3"  src="menu_six.jpg"/></li>
            <li><img id="btn4" src="menu_seven.jpg"/></li>
            <li><img id="btn5" src="menu_eight.jpg"/></li>
            <li><img id="btn6" src="menu_nine.jpg"/></li>
            <li><img id="btn7" src="menu_ten.jpg"/></li>
            <li><img id="btn8" src="menu_eleven.jpg"/></li>
        </ul>
    </div>
</div>
<a><img class="floatIt" id="capeBtnsNextTab" src="UI/btnNext_n.png" alt="Next"/></a><br/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:25:34.527

使用`%`代替`+=`或`-=`可能有帮助但不确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:04:41.777

我弄清楚了闪烁是什么，当它的边缘与渲染的 div 交叉时，IE 过早地删除了每个按钮。

# formatting - Yii：如何根据语言环境格式化 mysql 日期戳？

> ID：12711597
> 
> 赞同：1
> 
> 时间：2012-10-03T15:19:04.130
> 
> 标签：formatting, yii, datestamp

我在 Yii 的第一天

我刚刚学会了如何过滤列

```
$dataProvider=new CActiveDataProvider('User', 
            array(
                'criteria' => array(
                                'select' => 'id, username, realname, email, companyId, languageId, registrationDate',
                                'order' => 'username ASC',
                                )
                 )
    );
    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    )); 
```

现在我有一个问题：**'registrationdDate' 是一个 MySql 日期戳。**

所以我需要显示本地化......我该怎么做？

视图的代码是一个列表。我正在使用这个列出：

```
<td><?php echo CHtml::encode($data->registrationDate); ?></td> 
```

可以做些什么来检测用户区域设置？例如，如何将“2012-10-13 13:33:45”格式化为正确的本地化字符串？

对于意大利语，它将是 13/10/2012 或 13-10-2012 附加 13:33:45

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:05:27.420

最简单的方法是：

```
<td>
        <?php echo Yii::app()->locale->dateFormatter
                  ->formatDateTime($data->registrationDate); ?>
</td> 
```

# r - 调试：显示所有值

> ID：12711598
> 
> 赞同：1
> 
> 时间：2012-10-03T14:40:29.213
> 
> 标签：r

我正在尝试调试`cosmo`R 包，因为我正在尝试找出所有图案的位置。我展示了其中一些打印“主题”变量，但我不知道如何在一次运行中显示所有找到的主题。

[http://www.bioconductor.org/packages/2.10/bioc/html/cosmo.html](http://www.bioconductor.org/packages/2.10/bioc/html/cosmo.html)

我认为它们必须在 cosmo.R 中“站点”变量的第 366 行：

```
for (i in 1:com$selNumSites){
      site <- seqMat[com$alignStarts[i]:(com$alignStarts[i]+com$selWidth-1),
                     com$alignSeqs[i]]
      sites <- c(sites, toString(site)) 
```

但是当我尝试调试它时，我需要先加载 cosmo 库，然后读取数据，然后运行 ​​cosmo：

```
library(cosmo)
seqal <- system.file("Exfiles/short702k.FASTA", package="cosmo")
res <- cosmo(seqs=seqal, constraints="None", minW=10, maxW=10, models="TCM" ) 
```

对于调试第 366 行，我认为我应该：

```
library(cosmo)
seqal <- system.file("Exfiles/short702k.FASTA", package="cosmo")
setBreakpoint("cosmo.R",366)
res <- cosmo(seqs=seqal, constraints="None", minW=10, maxW=10, models="TCM" ) 
```

但我没有得到任何变量的任何值..

而且这似乎不是获取站点变量值的最简单方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:07:09.753

`setBreakpoint`用于调试使用该`source`函数加载的 R 代码。如果 mysource.R 是某个`f`在第 2 行定义了函数的源文件，那么

```
source('mysource.R')
setBreakpoint('mysource.R', 2) 
```

将在第 2 行定义的函数的开头设置断点`f`。 Calling`library(cosmo)`与 call 不同`source('cosmo.R')`，因此您的调用`setBreakpoint`可能会给您消息“未找到源引用”。

如果要在`cosmo`定义的函数中的特定行设置断点`cosmo.R`，请使用

```
library(cosmo)
trace(cosmo, at=line.no) 
```

其中`line.no`是相对于 的定义开始的行号`cosmo`。`untrace`关闭断点。

# java - 如何删除一个节点 我正在使用private TreeNode root;创建动态树。 我用 <p:tree value="#{bean.root}" var="node"><p:treenode>h:outputText value="#{node}" /> 问问题 问问题 2012-10-03T15:19:29.423 6528 次 This question shows research effort; it is useful and clear 5 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用private TreeNode root;创建动态树。 我用 <p:tree value="#{bean.root}" var="node"><p:treenode>h:outputText value="#{node}" /></p:treenode></p:tree> 在我的页面中显示它。 我的问题是如何删除空节点（不包含子节点） 例子： node1 child 1 child 2 node2 node3 child 1 （节点2为空，如何删除？） 使用扩展精度的外部库时，还要检查它们是否使用旧式d1mach.f、r1mach.f、i1mach.f来获取有关机器算术的信息。这里可能需要调整一些值。 Lapack 不会有问题，它使用 dlamch.f（此处为http://www.netlib.org/lapack/util/dlamch.f），它使用 Fortran 90 内在函数来获取这些机器常量。 但是，如果您使用 BLAS 或 SLATEC，它可能会出现问题。 javaprimefaces 4 2 回答 2 This answer is useful 6 您可以首先让所有孩子循环树： List <treenode>nodes = this.root.getChildren(); 然后你也许可以做这样的事情： List <treenode>nodes = .... Iterator <treenode>i = nodes.iterator(); while (i.hasNext()) { TreeNode = i.next(); // Use isLeaf() method to check doesn't have childs. i.remove(); } 这将是下一个代码的正确版本，因为我猜您无法在循环中删除集合元素。 for (TreeNode treeNode : nodes) { if(treeNode.isLeaf()){ TreeNode parent = treeNode.getParent(); parent.getChildren().remove(treeNode); } } 希望能帮助到你。 问候。 于 2012-10-23T08:10:25.197 回答 This answer is useful 0 我用了这段代码 dropNode.getParent().getChildren().removeIf(n -> n==dropNode); 于 2021-11-18T22:10:27.383 回答 Related 3 lighttpd - Lightttpd 文档根目录：将默认页面从 index.php 更改为 xyz.php 1 asp.net - aspx.cs 需要向我解释 3 javascript - 使用javascript显示/隐藏div而不刷新页面 5 android - 为 Android WebView 启用 WebGL 支持 1 linux - 为 powerpc 构建 mysql++ 库 1 amazon-web-services - Amazon Route 53 - 为 ELB 创建 A 记录，在指向该 A 记录的另一个域上创建 CNAME？ 2 c++ - 对于 C++ 模板，有没有办法找到“有效”输入的类型？ 1 android - Gridview 多屏支持？ 2 c# - 登录存储过程 1 mysql - 带条件的 MySQL SUM DISTINCT Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</treenode></treenode></treenode></p:treenode></p:tree>

> ID：12711602
> 
> 赞同：5
> 
> 时间：
> 
> 标签：java, primefaces

我正在使用`private TreeNode root;`创建动态树。

我用

```
<p:tree value="#{bean.root}" var="node">
    <p:treeNode>
        h:outputText value="#{node}" />
    </p:treeNode>
</p:tree> 
```

在我的页面中显示它。

我的问题是如何删除空节点（不包含子节点）

例子：

```
node1
   child 1
   child 2
node2 
node3
  child 1 
```

（节点2为空，如何删除？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:10:25.197

您可以首先让所有孩子循环树：

```
List<TreeNode> nodes = this.root.getChildren(); 
```

然后你也许可以做这样的事情：

```
List<TreeNode> nodes = ....
Iterator<TreeNode> i = nodes.iterator();
while (i.hasNext()) {
   TreeNode = i.next(); 
   // Use isLeaf() method to check doesn't have childs.
   i.remove();
} 
```

这将是下一个代码的正确版本，因为我猜您无法在循环中删除集合元素。

```
for (TreeNode treeNode : nodes) {
   if(treeNode.isLeaf()){
       TreeNode parent = treeNode.getParent();
       parent.getChildren().remove(treeNode);
   }
} 
```

希望能帮助到你。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T22:10:27.383

我用了这段代码

```
dropNode.getParent().getChildren().removeIf(n -> n==dropNode); 
```

# spring - 带有 Spring 安全性的 WAS j_security_check

> ID：12711603
> 
> 赞同：0
> 
> 时间：2012-10-03T15:19:31.120
> 
> 标签：spring, jsp, spring-security

当您使用 Websphere 提供的基于 j_security_check 表单的实现时，如何禁用 remember_me 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:37:28.197

从 spring 的安全配置中删除`<remember-me>`标签。或在您的 login.jsp 中不为 _spring_security_remember_me 提供价值

# jquery - jQuery不是未定义的，但我不能使用它？

> ID：12711606
> 
> 赞同：-2
> 
> 时间：2012-10-03T15:19:51.693
> 
> 标签：jquery

我使用一个函数来检查我的网站中是否存在 jQuery！好吧，第一行是：

```
if (typeof jQuery == 'undefined') {
    // it doesnt exist. I load it
} else {
    console.log($);
    $(document).ready(function() {
        startMyFunction();
    });
}; 
```

问题是，当我加载页面时，jQuery 不是未定义的，所以它直接转到 else 语句（我看到了 console.log 消息）。

但是，好像不能用。`console.log($)`print `undefined`，`$ is not a function`当`$(document).ready`被调用时我得到了。

怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:23:17.550

如果`jQuery`存在但不存在`$`，您可能已经在`noconflicts`模式下加载了 jQuery。

# bash - 使用 bash 脚本遍历目录时出现分段错误

> ID：12711608
> 
> 赞同：0
> 
> 时间：2012-10-03T15:19:57.590
> 
> 标签：bash, directory

我知道这通常与递归有关，但我很确定我没有这样做。在每次循环中，它都会给出一个指向 for 循环行的分段错误。

```
for file in $DATAFOLDER*; do
    echo $file;
    filename=$(basename $file);
    echo $filename;
    echo "$DESTFOLDER$SUBFOLDER${filename%%.*}"
    pwd
    # move data to cppapplication folder
    cp -R "$file" "$DESTFOLDER";
    sleep 1
    # create subdirectory
    mkdir "$SUBFOLDER";
    # create new folder for extracted data
    mkdir "$DESTFOLDER$SUBFOLDER${filename%%.*}";
    # copy MassLynx header file into new folder (get the description info)
    cp "$file/_HEADER.TXT" "$DESTFOLDER$SUBFOLDER${filename%%.*}";
    # run the cppapplication
    # <program> <project file> <MassSpectrum> <Mobilogram> <bins in Da> <extract m/z ranges>
    ./cppapplication.exe "$filename" 0 1 1 0 ;
    # fix last character comma bug
    sed -i '$ s/,$//g' MassMobility.txt
    # move the created files into the new folder
    mv Mobilogram.txt "$DESTFOLDER$SUBFOLDER${filename%%.*}";
    mv MassMobility.txt "$DESTFOLDER$SUBFOLDER${filename%%.*}"; 
    mv MassMobilityXaxis.txt "$DESTFOLDER$SUBFOLDER${filename%%.*}";
    mv MassMobilityYaxis.txt "$DESTFOLDER$SUBFOLDER${filename%%.*}";    
    # get driftscope quicklook image
    sleep 3
    python "C:\Users\ganesh\Dropbox\PhD\03_Amphitrite\CppApplication\quicklook_driftscope.py" "$DESTFOLDERWINDOWS$SUBFOLDERWINDOWS" "${filename%%.*}" "$DESTFOLDERWINDOWS$SUBFOLDERWINDOWS${filename%%.*}";

    # remove MassLynx Project
    rm -r "$filename";

done 
```

除了文件的复制之外，我认为循环与循环通过的原始文件夹没有任何联系。

这是错误：

```
./extract_all_projects.sh: line 26:  7500 Segmentation fault      (core dumped) 
```

我不知道问题是什么，因为如果在 bash 脚本之外运行，“cppapplication.exe”在这些文件上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:04:57.253

您`$filename`可能为空，也可能与预期不同。我确定段错误是`cppapplication.exe`崩溃（你为什么不告诉我们第 26 行是什么？）要对此进行测试，请尝试

```
./cppapplication.exe "" 0 1 1 0 
```

看看它是否有段错误。如果我不得不猜测：该应用程序尝试打开一个文件，但不检查返回值，并且使用 NULL 指针打开士兵。

顺便说一句，脚本中除了第一个分号之外的所有内容都是无用的。外壳不是 C :-)

# php - 如何使用 php5 和 apache2 在 debian 上安装soap.so 扩展？

> ID：12711610
> 
> 赞同：5
> 
> 时间：2012-10-03T15:20:04.113
> 
> 标签：php, soap, apache2, php-extension

我在 apache2 中有一个带有 php5 的 debian 服务器，我想使用soap 扩展。

我用 安装soap 扩展，用`# sudo apt-get install php-soap`修改
php.ini`extension=php_soap.so`
并重置apache。

但是我检查了 phpinfo 并且肥皂扩展不在`phpinfo`. 另外，我在服务器上搜索了soap.so文件，它没有出现。

谢谢，对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:30:00.230

我认为您必须找到soap扩展文件并更改soap文件的`extension_dir`位置目录`.so`。试着用**`locate soap`**. 另外，也许您可​​以像这样指向您的`.so`文件并且不要更改`extension_dir`：

```
extension=/whateverlocation/soap.so 
```

# actionscript-3 - 在 cs5 flash 中编辑对象 ActionScript 3.0 中的子项

> ID：12711611
> 
> 赞同：0
> 
> 时间：2012-10-03T15:20:07.850
> 
> 标签：actionscript-3

我有类似的东西：

```
btn_1.addChild(btn1_text);
btn_2.addChild(btn2_text);
btn_3.addChild(btn3_text);
addChild(btn_1);
addChild(btn_2);
addChild(btn_3); 
```

它是创建按钮的代码的一部分。我想编辑文本而`btn1_text`不是使用

```
btn1_text.text = "....."; 
```

但是使用类似的东西：

```
btn_1.btn1_text.text = "......"; 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:42:56.113

您可以使用[`name`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#name)和的组合[`getChildByName()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getChildByName%28%29)：

```
// Create the button and its textfield
var btn_1:Sprite = new Sprite();
var btn1_text:TextField = new TextField();
btn_1.addChild(btn1_text);
addChild(btn_1);

// Add a name to the textfield
btn1_text.name = "btn1_text";

// Retrieve the textfield using its name and set its content
TextField(btn_1.getChildByName("btn1_text")).text = "..."; 
```

# android - 造型夏洛克 ActionMode 背景

> ID：12711612
> 
> 赞同：3
> 
> 时间：2012-10-03T15:20:08.357
> 
> 标签：android, actionbarsherlock

似乎无法设置 ActionMode 背景的样式。

我已经覆盖了操作栏背景，但设置 ActionMode 背景似乎不起作用：

```
<style name="Theme.apptheme" parent="@style/Theme.Sherlock.Light.DarkActionBar">

...

<item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>

<item name="actionModeBackground">@drawable/actionmode_background</item>
<item name="actionModeSplitBackground">@drawable/actionmode_split</item>

...

</style> 
```

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T22:14:20.617

您可能在 ICS 或 JB 上进行测试，因此不会看到任何差异。您**还**必须使用命名空间包含这些标签`android:`。

例如

```
<item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>

<item name="android:actionModeBackground">@drawable/actionmode_background</item>
<item name="android:actionModeSplitBackground">@drawable/actionmode_split</item> 
```

# loops - SPSS中的循环项目和总和项目

> ID：12711613
> 
> 赞同：0
> 
> 时间：2012-10-03T15:20:10.243
> 
> 标签：loops, sum, spss

我有两组变量，称为 ITEM 1 到 ITEM 47，另一组称为 L1 到 L47。如果有任何 ITEM#i=1，我想要做的是计算 Ls 的总和。我写的内容如下：

计算 LSUM=0。循环#i=1 到
47。IF (ITEM(#i)=1) LSUM=LSUM+L(#i)。结束循环。

但我收到一条错误消息，说这些字符与任何现有函数或向量都不匹配。那我该怎么办？您的意见将不胜感激。

谢谢。

真诚的，露西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:14:56.207

```
COMPUTE LSUM=0.
exe.

vector vitems = ITEM 1 to ITEM 47.
vector vl = L1 to L47.

LOOP #vecid = 1 to 47.
do IF (  vitems(#vecid) eq 1 and not missing(vl(#vecid))  ).
compute LSUM=LSUM+vl(#vecid).
end if.
END LOOP.
exe. 
```

请参阅 SPSS 中的 VECTOR 命令。您不能只创建循环并将变量视为数组。它们必须首先放入向量中。另外，检查 COMPUTE 命令。我认为 SUM 会更合适，因为如果您编写“计算 v1 = v2 + v3”并且 v2 有数据但 v3 为空白，则 v1 将为空白。

# ssl - 在 Ubuntu 11.04 中是否可以使用 OpenSSL 1.0.x？

> ID：12711617
> 
> 赞同：0
> 
> 时间：2012-10-03T15:20:18.823
> 
> 标签：ssl, openssl

有没有办法在 Ubuntu 11.04 中获取 OpenSSL 1.0.x 包，而无需从源代码构建？

`apt-get update/upgrade`只带来一个 0.9.8g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:51:08.603

没有官方支持的方式来获得它的整洁。您可能可以在某个地方找到将其打包的人，但如果您想使用受信任的来源，您将不会在低于 11.10 的版本上找到它，如果您想要最新版本的 openssl，您将想去 12.04

# eclipse - 如何在 Eclipse 4.2 中创建一个菜单项，它完全按照 Eclipse 的“文件 > 新建”菜单项的方式接受贡献

> ID：12711619
> 
> 赞同：0
> 
> 时间：2012-10-03T15:20:25.470
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-juno

我想在我的 Eclipse 4 RCP 应用程序中创建一个与 Eclipse 的“文件 > 新建”完全相同的菜单项，因此为 Eclipse 构建的其他功能可以为其贡献他们的“新向导”。

我之前在一个基于 Eclipse 3.7 的 Eclipse RCP 应用程序中已经成功地做到了这一点。现在我正在 Eclipse 4.2 中创建一个基于 Features 的 Eclipse RCP 应用程序，并且我想在我的 RCP 应用程序中使用 Eclipse 功能，例如 Eclipse Java Development Tools。

我在 Application.e4xmi 中创建了一些类似于 Eclipse IDE 的“文件 > 新建”菜单的菜单项。我已确保 ID 与我的 Eclipse 4.2 IDE 中使用的 ID 匹配。

但是，当我启动我的 RCP 应用程序时，新 Java 项目向导并没有添加到我的“文件 > 新建”菜单项中。

我知道这听起来很奇怪，但这些是我正在处理的需求： 一个 RCP 应用程序，其中包含我们构建的功能，以及 Eclipse 构建的功能，例如 Java 开发工具。

# php - session_id() 没有获取会话变量

> ID：12711626
> 
> 赞同：0
> 
> 时间：2012-10-03T15:20:50.370
> 
> 标签：php, session, hosting, session-variables

我在两个不同的 Web 服务器上安装了自制 CMS。每个维护相同的代码。当我尝试`$_SESSION`在不同域之间传递变量时，我遇到了一个非常烦人的问题。

我的 CMS 在 domain1.com 上。它控制的网站位于 domain2.com 上。我的系统通过 url 链接将登录信息的所有会话变量从 domain1.com 传递到 domain2.com（domain1.com 有这样的链接：`http://domain2.com?sessionId=1gh...`）（sessionId 由 session_id() 生成）。domain2.com 检索会话 ID 并`session_id($_GET['sessionId'])`设置会话并获取变量。然后它继续在顶部显示一个带有管理功能的栏。

该系统在我的一台主机以及我的本地主机上运行良好。但我最近转移到另一台主机并成功安装了我的 CMS 与相同的代码。除此功能外，一切正常。当我单击链接并尝试设置 session_id 时，session_id 会更改，但`$_SESSION`变量会被删除。当我返回我的 CMS 时，我必须重新登录。不知何故，在这台主机上，更改 session_id 会删除`$_SESSION`变量。

我从不喜欢会话变量，如果我要重新开始，我不会使用它们（我可能会使用纯 cookie）。但我真的需要弄清楚这一点。它工作的主机是 Bluehost，两个域都由 Bluehost 托管。它不工作的主机是[EDIT]ByteHost，域名注册商是Godaddy。

以下是来自 domain2.com 的一些示例代码：

...

```
if ( $_GET['sessionId'] )
{
 session_id($_GET['sessionId']);
}

session_start();

echo session_id(); // returns the proper sessionId passed through the url

print_r($_SESSION); // does not work. returns array()

... 
```

我可以保证`$_SESSION`变量之前存在，因为我仍然登录到我的 CMS。

任何想法为什么会话变量在一台主机上工作，而不是在另一台主机上工作？

我尝试用工作主机替换 php.ini 文件。问题仍然存在。

感谢您的时间！

**更新**

我最终从我的 CMS 中删除了它。现在，我只需通过 url 传递登录详细信息，它就会将人登录。它工作得更干净。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:39:22.193

以下是这可能不起作用的一些原因：

*   **不同的物理服务器**
*   **每个域的不同帐户**（即使它是相同的物理服务器）
*   **域不同的apache/php守护进程**（一些共享主机站点会为每个域创建一个单独的目录，然后限制apache在域之间共享信息。这也会起到阻止会话信息传递的效果。想想看——您是否希望同一托管服务提供商上的其他人的域能够访问您客户的会话信息？）
*   **配置（apache 或 php），或 .htaccess 规则**

这是我的建议：**停止这样做**。这是修复代码中非常严重的安全漏洞的绝佳机会。当您通过托管服务提供商进行诊断时，您可能只需使用 HTML5 存储或安全 cookie 重写您需要的所有内容。

我的猜测是托管服务提供商足够聪明，可以保护会话信息表格被从另一个域窃取。但无论哪种情况，我都*强烈*建议您更改代码，以便它不需要从另一个域窃取会话信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:40:13.817

要在多个域上进行会话，您需要在 url 中传递会话 id 而不是会话 cookie，因为 cookie 仅在单个域的基础上工作。

如果他们不是单独的客户，使用子域将解决问题`a.domain.com and b.domain.com`

# php - 在标准上使用现有关系 HAS-MANY

> ID：12711631
> 
> 赞同：0
> 
> 时间：2012-10-03T15:21:16.220
> 
> 标签：php, mysql, yii

我在使用自定义功能从我的数据库中搜索特定数据时遇到了一些问题。

我有 TableA(id,....) 和 TableB(id, tablea_id, userid,...)

模型 TableA 具有以下关系代码：

'relation_name' => 数组（self::HAS_MANY，'TableB'，'tablea_id'）

我需要创建一个自定义函数来查询 TableA 并给我存在于 TableA 上的结果，这些结果包含 TableB 数据上的某个用户 ID，TableB 也与来自 tablea_id 字段的 TableA 相关。

我通过使用以下代码找到了我的问题的解决方案：

```
 public function findABCD($user_id)
    {
              $criteria=new CDbCriteria;
              $criteria->join = 'left join TableB on t.id=TableB.tablea_id';
              $criteria->condition = "TableB.userid = ".$user_id;
              return new CActiveDataProvider($this, array(
                      'criteria'=>$criteria,
              ));
    } 
```

这可行，但我没有利用我之前创建的关系。关于我需要使用什么的任何想法？

我测试了很多东西，但我收到一个 SQL 错误。

这是我之前测试过的（而不是条件加入和条件）：

```
$criteria->with=array('relation_name');
$criteria->condition = "relation_name.userid= ".$user_id;
//this does not work as well
//$criteria->condition = "TableB.userid= ".$user_id; 
```

错误是这样的：

```
SQL: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'relation_name.userid' in 'where clause'. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:07:08.373

我用 ActiveRecord 查询做这种连接，不确定它是否适用于 CActiveDataProvider：

```
$criteria->with = array(
    'relation_name' => array(
        'joinType' => 'INNER JOIN',
        'on'       => 'user_id = :user_id',
        'params'   => array( 'user_id' => $userId )
    )
);

$criteria->together = true; 
```

# javascript - 无浏览器 javascript“带有 NS 的 XML DOM”支持

> ID：12711632
> 
> 赞同：0
> 
> 时间：2012-10-03T15:21:18.637
> 
> 标签：javascript, xml, ajax, web-services, dom

在不依赖浏览器的情况下，有哪些推荐的方法来处理重命名空间的 xml 文档？

背景：我正在使用 ajax 处理来自 Web 服务的 wsdl/soap 文档。当 doc.getElementsByTagName("xs:complexType") 之类的东西在平板电脑中的移动科尔多瓦应用程序和桌面上的 chrome 浏览器上表现不同时，这非常令人沮丧。在某些设备上，您必须去除前缀，而在其他设备上，您必须包含它。另一个问题的例子是旧浏览器上的 getElementsByTagNameNS。

开箱即用的 JQuery 似乎让您在选择器中使用前缀，而不是实际的命名空间。这有点痛苦，因为文档对同一个命名空间使用多个前缀是很常见的。

Dojox.xml 需要我带来一个完整的框架来与我现有的 JQuery 代码一起使用来处理 xml。

我目前正在逐案处理这些问题，但我想知道是否有更好的方法。

# java - 如何从Java中的时间字符串中提取秒数？

> ID：12711634
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:21:29.120
> 
> 标签：java, string

在 Java 中，我想从时间输入字符串中提取秒数，例如：

```
05h23m45s 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:24:20.357

`m`如果这是您的时间格式，只需获取在分钟之后开始的子字符串。

```
String time = "05h23m45s";
String seconds = time.substring(time.lastIndexOf("m") + 1, time.lastIndexOf("s")); 
```

此代码将返回 a ，其中包含 之后和直到 的`String`所有字符。`m``s`

我强烈建议您阅读[String 类文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)。如果使用得当，它的噱头非常有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:26:24.513

**更新**

如果您想要一个真正强大的处理日期和时间的解决方案，您可以考虑使用[JodaTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)或其他[Date](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)包 ( `java.text`)。

```
String time = "05h23m45s";

DateTimeFormatter dateFormatter = DateTimeFormat.forPattern("hh'h'mm'm'ss's'");
DateTime parsed = dateFormatter.parseDateTime(time);
int sec = parsed.getSecondOfMinute(); 
```

**原答案：**

要将秒数作为`int`值：

```
String time = "05h23m45s";
String strSeconds = time.substring(time.lastIndexOf("m") + 1, time.lastIndexOf("s"));
int seconds = Integer.parseInt(strSeconds);
System.out.println(seconds); 
```

打印出来：

```
45 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T15:29:49.493

```
String timeStr = "05h23m45s";

int sec = Integer.parseInt(timeStr.substring(6,7)); 
```

在许多其他方式中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T15:26:21.287

```
System.out.println("05h23m45s".split("m")[1].toString().substring(0,2)); 
```

# google-maps-api-3 - 标记集群限制

> ID：12711636
> 
> 赞同：5
> 
> 时间：2012-10-03T15:21:37.087
> 
> 标签：google-maps-api-3, markerclusterer

嗨，这是我在这里的第一篇文章..

我一直在玩谷歌地图，试图列出法国的露营地。

我已经到了读取数据的 xml 文件的地步，加载地图并对结果进行聚类，一切正常**，但速度很慢。**

Q1 即使使用聚类器，您可以渲染的标记数量是否有限制（目前有超过 7000 条记录）

Q2 到目前为止我的代码有什么明显的问题吗：

```
 <!DOCTYPE html>
<html>
 <head>
  <title>Read XML in Microsoft Browsers</title>
      <script src="http://maps.google.com/maps/api/js?sensor=false&language=en&region=GB" type="text/javascript"></script>
      <script src="scripts/markerclusterer.js" type="text/javascript"></script>
      <link rel="stylesheet" type="text/css" href="stylesheets/style_1024.css" />
   <script type="text/javascript">
       var xmlDoc;
       function loadxml() {
           xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
           xmlDoc.async = false;
           xmlDoc.onreadystatechange = readXML;
           xmlDoc.load("xml_files/France_all.xml");
       }

       function readXML() {
           if (xmlDoc.readyState == 4) {
               //alert("Loaded");
               //set up map
               var map = new google.maps.Map(document.getElementById('map'), {
                   zoom: 10,
                   center: new google.maps.LatLng(0, 0),
                   mapTypeControl: true,
                   mapTypeControlOptions: { style: google.maps.MapTypeControlStyle.DROPDOWN_MENU },
                   navigationControl: true,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
               });

               var bounds = new google.maps.LatLngBounds();
               var infowindow = new google.maps.InfoWindow({ maxWidth: 100 });
               var marker, i

               var markers = [];
               var html = [];

               var x = (xmlDoc.getElementsByTagName("placemark").length);
               //for (i = 0; i < x; i++) {
               for (i = 0; i < x; i++) {
                   //document.write(xmlDoc.documentElement.childNodes[1].firstChild.tagName) + '<br>';
                   desc = xmlDoc.getElementsByTagName("description")[i].text;
                   lat = parseFloat((xmlDoc.getElementsByTagName("latitude")[i].text));
                   lon = parseFloat((xmlDoc.getElementsByTagName("longitude")[i].text));
                   myicon = (xmlDoc.getElementsByTagName("icon")[i].text);
                   //create new point
                   var point = new google.maps.LatLng(lat, lon);

                   //create new marker
                   marker = new google.maps.Marker({
                       position: point,
                       panControl: false,
                       map: map,
                       icon: myicon
                   });

                   //increae map bounds
                   bounds.extend(point);
                   //fit to bounds
                   map.fitBounds(bounds);

                   //add reference to arrays
                   markers.push(marker);
                   html.push(desc);

                   //add listener
                   google.maps.event.addListener(marker, 'click', (function (marker, i) {
                       return function () {
                           infowindow.setContent(html[i]);
                           infowindow.open(map, marker);
                       }
                   })(marker, i));

                   //alert(i + " " + desc +" added!");
               };
               //var mc = new MarkerClusterer(map);
              var mcOptions = {gridSize: 50, maxZoom: 15 };
              var mc = new MarkerClusterer(map, markers, mcOptions);
           }

       }
  </script>

 </head>

 <body onload="loadxml()">

 <div style="height:100%; width:100%">
    <div id="map" style="float:left; width:50%; height:100%">
        <!--filled via script-->
    </div>
     <div style="float:left; width:50%; height:100%">
        <h4>Select Region</h4>
       <select>
        <option value="Alsace" onclick="loadxml()">Alsace</option>
       </select>
     </div>
 </div>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:13:22.960

这篇[文章](https://developers.google.com/maps/articles/toomanymarkers)可能会有所帮助。基于图块的解决方案（FusionTables、KmlLayer 或基于服务器的自定义地图）将比原生 Google Maps API v3 对象更快地呈现，即使使用集群也是如此。您可能会看到 xml 文件的传输和处理时间。

# jenkins - 如何让 Jenkins 在 Windows64 上自动升级？

> ID：12711640
> 
> 赞同：0
> 
> 时间：2012-10-03T15:21:41.333
> 
> 标签：jenkins

我正在 Windows 64 位机器上设置 Jenkins。它被配置为作为 Windows 服务运行。

詹金斯 1.482

我在将 svn 与 jenkins 一起使用时遇到了另一个问题，在尝试解决该问题时，我正在尝试升级 jenkins。

升级失败并显示：

> 检查互联网连接检查更新中心连接 java.net.SocketException: Permission denied: connect at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source) at java.net.DualStackPlainSocketImpl.doConnect( Unknown Source) at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) at java.net.AbstractPlainSocketImpl.connect(Unknown Source) at java.net.PlainSocketImpl.connect(Unknown Source) at java.net.SocksSocketImpl.connect(Unknown Source ) 在 java.net.Socket.connect(Unknown Source) 在

和

> hudson.util.IOException2：无法从 [http://updates.jenkins-ci.org/download/war/1.484/jenkins.war](http://updates.jenkins-ci.org/download/war/1.484/jenkins.war) 在 hudson.model.UpdateCenter$UpdateCenterConfiguration.download(UpdateCenter.java:716)下载.model.UpdateCenter$DownloadJob._run(UpdateCenter.java:1052) at hudson.model.UpdateCenter$DownloadJob.run(UpdateCenter.java:1031) at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) at java .util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor $Worker.run（未知来源）

我不确定出了什么问题。
当作为服务运行时以及在我的用户空间中作为 exe 运行时，这会失败。

谁能解释如何解决这个问题，以便我可以升级 jenkins 然后修复 svn 插件？

# javascript - 无法按索引引用数组

> ID：12711645
> 
> 赞同：1
> 
> 时间：2012-10-03T15:22:00.010
> 
> 标签：javascript, arrays

我有一个数组定义为：

```
var subjectCache = []; 
```

然后我有一些代码来构建它，这工作正常。

但是，如果我尝试通过索引引用数组，例如：

```
var x = subjectCache[0]; 
```

或者

```
var x = subjectCache[1]; 
```

我明白了`undefined`。也`subjectCache.length`始终为 0（零）。

如果我尝试通过它的键来引用它，例如：

```
var x = subjectCache['12345']; 
```

有用。

这是正常的吗？我不应该通过它的索引来引用它吗？

我正在使用 Internet Explorer，如果它有所作为（它可能会：（）

[编辑]

这是我用来构建数组的代码，虽然我真的不认为这是罪魁祸首。

这是来自网络服务调用的回调。这工作正常，并且正在填充数组。

```
var subjectCache = [];
var subjectCacheCount = 0;

function refreshSubjectsCallback(data) {
    // update subjects
    // loop through retrieved subjects and add to cache
    for( i=0; i < data.length; i++ )
    {
        var subject = data[i];
        var subjectid = subject.SubjectId;
        subjectCache[subjectid] = subject;
        subjectCacheCount += 1;
    }
} 
```

[/编辑]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:28:13.440

您可能是手动分配键而不是使用`subjectCache.push()`向数组添加新元素：

```
var array = [];

array['foo'] = 'bar';

console.log(array.length);  // 0 
```

该`length`属性不会以您期望的方式反映这些更改：

```
> var a = [];
undefined
> a[100] = 2;  // The previous `100` entries evaluate to `undefined`
2
> a.length;
101 
```

相反，使用一个对象：

```
var object = {};

object['foo'] = 'bar';

for (var key in object) {
    var value = object[key];

    console.log(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:24:51.223

从您的症状来看，听起来您正试图将数组视为关联数组。

在 Javascript 中，数组的工作方式如下：

```
var a = [];
a[1] = 10;
alert(a.length); 
```

对象的工作方式如下：

```
var o = {};
o.myProp = true;
o["myOtherProp"] = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:25:30.290

数组只适用于数字键而不是字符串。字符串将属性分配给对象，不计入`length`数字索引的一部分，也不计入数字索引。

构建数组时，请确保分配给数组中的数字位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T15:25:52.000

不，它不起作用，因为您没有创建数组而是对象。您将必须通过其密钥访问它。

```
var x = subjectCache['12345']; 
```

如果这有效而`subjectCache.length`无效，我认为您正在制作一个**对象**而不是数组。你很困惑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T15:32:08.373

在路上的某个地方，你丢失了数组，变量`subjectCache`指向了另一种对象。

如果它是一个数组，它的长度不能为零并且包含一个可以使用`subjectCache['12345']`. 当您访问数组中的项目时，使用数字索引或表示数字的字符串没有任何区别。

# architecture - 客户端-服务器和发布-订阅混合的架构风格

> ID：12711649
> 
> 赞同：1
> 
> 时间：2012-10-03T15:22:11.143
> 
> 标签：architecture, client-server, publish-subscribe

我正在为基本的在线协作 IDE 构建 Java 应用程序。在此应用程序中，客户端将命令发送到服务器，服务器将这些命令序列化，然后将结果返回给每个客户端。我正在尝试确定能够最大限度地提高性能、效率和代码简单性的架构风格。

目前，我正在使用客户端-服务器模型和发布-订阅模型之间的一种混合。客户端向服务器发送命令（即编辑代码、远程编译等的请求）。对于特定的客户端命令，在服务器响应命令之前，客户端的文件实际上并没有改变。由于该项目的主要目标之一是 IDE 允许实时协作，因此每次输入的按键都会发送客户端命令。这是客户端-服务器方面。

但是，由于客户端还必须接收从其他客户端转发给它们的事件，因此它不是纯粹的客户端-服务器设置。我正在使用 ExecutorService 类来实现这个发布-订阅行为。

我的问题是 - 是否有与这样的应用程序相对应的特定架构风格？我可以采取另一种方法来实现应用程序目标吗？或者，也许，我已经在使用最好的建筑风格了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:06:51.717

混合样式在复杂系统中很常见。最重要的是确保所使用的样式所提升的质量属性相辅相成，不会造成紧张。显然，需要解决造成的紧张局势。

似乎有一个隐藏的质量属性，“在服务器响应命令之前，客户端上的文件实际上并没有改变”，这表明除了发布-订阅之外，您选择使用调用返回样式的原因。我确实担心这里会出现阻塞调用以提高性能，但您还需要担心数据完整性问题。

稍微考虑一下，您似乎可以使用带有正确消息集的纯发布-订阅样式。

就“使用正确的风格”而言——关注您的质量属性，并具体说明您的设计决策促进和抑制的内容。根据您在这里所写的内容，我认为需要充实一些额外的场景才能真正为一种风格而不是另一种风格提供强有力的理由。

# typo3 - 带有当前页面 uid 的 TypoScript 常量

> ID：12711656
> 
> 赞同：0
> 
> 时间：2012-10-03T15:22:39.103
> 
> 标签：typo3, typoscript

是否可以将当前页面的 ID 放入 TypoScript 常量（动态）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T11:49:39.273

你不能，因为常量是在设置**之前**处理的。如前所述，常量是**常量**固定值。

没有可用的动态过程。

# jquery - 从当前行选择输入？

> ID：12711659
> 
> 赞同：0
> 
> 时间：2012-10-03T15:23:00.113
> 
> 标签：jquery

我有一个带有行的表和一个用于向表中添加行的按钮。我使用以下代码增加输入字段的 ID：

```
$("#add_row_e").click(function() {
    var row = $("#expenses tbody > tr:last"),
        newRow = row.clone(true);
    newRow.find("input").each(function() {
        var num = +(this.id.match(/\d+$/) || [0])[0] + 1;
        this.id = this.id.replace(/\d+$/, "") + num;
        this.name = this.id;
    });
    newRow.insertAfter(row);
    return false;
}); 
```

然后，我将 2 个输入相乘并使用以下命令将它们输出到 div：

```
$('.multiplier').on('keyup', function() {
    $('#results').html("&pound;" + parseInt($('#E_NONM').val()) * parseInt($('#E_CCNM').val()));
}); 
```

有什么办法可以让它为我添加的每一行工作？我想它必须查看行中的 id 并使用它来乘法，但是我不知道该怎么做。

另外，如何让上述内容输出到输入框而不是 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:38:57.670

试试这个

```
$('.multiplier').on('keyup', function() {

   var $tr = $(this).closest('tr');
   var $non = $tr.find('[id*=E_NONM]').val();
   var $ccn = $tr.find('[id*=E_CCNM]').val();

   $tr.find('#results').val("&pound;" + parseInt($non) * parseInt($ccn));
}); 
```

这是假设 #E_NONM 和 #E_CCNM 位于 .multiplier 文本框所在的当前行内。

# sql - 需要 Sqlite 查询优化

> ID：12711660
> 
> 赞同：0
> 
> 时间：2012-10-03T15:23:02.780
> 
> 标签：sql, database, sqlite

我将 sqlite 用于小型验证应用程序。我有一个简单的单表数据库，其中包含 4 个 varhchar 列和一个整数主键。表中有近 100 万行。我已经对其进行了优化并对其进行了真空处理。

我正在使用以下查询从表中检索存在计数。为了隐私，我更改了字段和名称。

```
 SELECT 
                  count(*) as 'test'
                  FROM
                  my_table
                  WHERE
                  LOWER(surname) = LOWER('Oliver')
                  AND
                  UPPER(address_line2) = UPPER('Somewhere over the rainbow')  
                  AND
                  house_number IN ('3','4','5'); 
```

此查询运行大约需要 1.5-1.9 秒。我已经尝试过索引，它们真的没有什么区别。这次可能听起来不错，但我必须在读取 csv 文件时运行这个测试大约 40,000 次，所以你可以想象它加起来很快。关于如何减少执行时间的任何想法。我通常在 mssql 或 mysql 中开发，所以如果我在 sqlite 中缺少一些技巧，我会很高兴听到它们。

祝一切顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:26:43.530

当您在索引列上使用函数时，SQLite 不能使用索引，因为该函数可能不保留排序 - 即可以有诸如`1>2`, 但是之类的函数`F(1)<F(2)`。不过，有一些方法可以解决这种情况：

1.  如果要使用索引使查询更快，则必须将值保存为固定大小写（大写或小写），然后仅将查询参数转换为相同大小写：

```
SELECT count(*) as 'test'
FROM my_table
WHERE surname = LOWER('Oliver') 
```

1.  您可以使用不区分大小写的 LIKE 运算符（**我不知道索引是如何受到影响的！**）：

```
SELECT count(*) as 'test'
FROM my_table
WHERE surname LIKE 'Oliver'; 
```

1.  或者您可以将每一列创建为`text collate nocase`，并且不再担心有关此列的大小写差异：

```
CREATE TABLE my_table (surname text collate nocase, <... other fields here ...>);
SELECT count(*) as 'test'
FROM my_table
WHERE surname ='Oliver'; 
```

[您可以在此处](http://www.sqlite.org/lang_expr.html)找到有关`=`和`LIKE`运算符的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:41:14.327

```
 SELECT  
              count(1) as 'test' 
              FROM 
              my_table 
              WHERE 
              surname = 'Oliver' 
              AND 
              address_line2 = 'Somewhere over the rainbow'   
              AND 
              house_number IN ('3','4','5')
              COLLATE NOCASE; 
```

# sql - 如何交换记录值？

> ID：12711661
> 
> 赞同：3
> 
> 时间：2012-10-03T15:23:06.017
> 
> 标签：sql

如何用 to value 更新所有记录和`role = 1`to value`2`记录？`role = 2``1`

```
 login   | role
----------+------
 john     |    1
 anne     |    2
 adam     |    1
 robert   |    1
 katie    |    1
 bob      |    2
 tom      |    2
 ...many records with 1 and 2 values 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:24:54.907

```
UPDATE table

SET role = CASE role
               WHEN 1 THEN 2
               ELSE 1
           END

WHERE role = 1 OR role = 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:25:23.290

```
UPDATE [table]
SET role = CASE role
               WHEN 1 THEN 2
               ELSE 1
           END
WHERE role = 1 OR role = 2; 
```

# ruby - Ruby / Sinatra - 没有重定向的重定向

> ID：12711662
> 
> 赞同：1
> 
> 时间：2012-10-03T15:23:09.527
> 
> 标签：ruby, sinatra

在我的控制器中，我有以下内容

```
post "/buy_item" do
    redirect '/login' unless session[:name]

    @owner = Market::User.user_by_name(params[:owner])
    @item = @owner.item_by_id(params[:item].to_i)

    @current_user = Market::User.user_by_name(session[:name])
    if @current_user.buy_item?(@item)
      @current_user.buy_item(@item)
    else
      redirect '/error'
    end
  end 
```

当我强制执行“ `else`”时，我会正确重定向到`/error`，但之后我会直接重定向到另一个页面（`/?loggedin=true`）。`redirect "/?loggedin=true"`是`post "/login"`方法的最后一行。所以，它似乎在`POST /login`以某种方式调用..

的路线`/error`如下所示：

```
 get "/error" do
    redirect '/login' unless session[:name]

    template = ERB.new File.new($VIEWS_FOLDER + "/error.erb").read, nil, "%"
    template.result(binding)
  end 
```

没有`/error.erb`重定向，当我直接调用*localhost:4567/error*时，它不会被重定向。

这是日志：

> 127.0.0.1 - - [03/Oct/2012 17:15:03] “POST /login HTTP/1.1”303 - 0.0012
> 
> 本地主机 - - [03/Oct/2012:17:15:03 CEST] "POST /login HTTP/1.1" 303 0
> 
> 本地主机：4567/登录 -> /登录
> 
> 127.0.0.1 - - [03/Oct/2012 17:15:03] “GET /?loggedin=true HTTP/1.1”200 3916 0.0055
> 
> 本地主机 - - [03/Oct/2012:17:15:03 CEST] "GET /?loggedin=true HTTP/1.1" 200 3916
> 
> localhost:4567/login -> /?loggedin=true
> 
> 127.0.0.1 - - [03/Oct/2012 17:15:05] “POST /buy_item HTTP/1.1”303 - 0.0030
> 
> 本地主机 - - [03/Oct/2012:17:15:05 CEST]“POST /buy_item HTTP/1.1”303 0
> 
> 本地主机：4567/?loggedin=true -> /buy_item
> 
> 127.0.0.1 - - [03/Oct/2012 17:15:05] “GET /error HTTP/1.1”200 1609 0.0039
> 
> 本地主机 - - [03/Oct/2012:17:15:05 CEST] "GET /error HTTP/1.1" 200 1609
> 
> 本地主机：4567/?loggedin=true -> /error
> 
> 127.0.0.1 - - [03/Oct/2012 17:15:05] “GET /?loggedin=true HTTP/1.1”200 3916 0.0063
> 
> 本地主机 - - [03/Oct/2012:17:15:05 CEST] "GET /?loggedin=true HTTP/1.1" 200 3916
> 
> localhost:4567/login -> /?loggedin=true

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:09:58.837

您的路线中有两个重定向`'/buy_item'`；而在`'/error'`你不回来之后`redirect`。 `redirect`对您的 HTTP 标头执行某些操作，最好在调用后返回，即在路由`/buy_item`和`/error`：

```
-redirect '/login' unless session[:name]
+unless session[:name]
+  redirect '/login'
+  return nil
+end 
```

我在一个大型的 Sinatra 应用程序上工作过，重定向有很多问题，上面的补丁应该会有所帮助。此外，我建议您查看[HTTP RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3)并熟悉[Post-Redirect-Get 方案](http://en.wikipedia.org/wiki/Post/Redirect/Get)。要使用自定义状态代码进行重定向，您可以执行`redirect '/foo', 303`.

# assembly - 如何将字符串存储在字符串标签中

> ID：12711664
> 
> 赞同：0
> 
> 时间：2012-10-03T15:23:12.990
> 
> 标签：assembly, mips, pcspim

我正在编写一个用户输入字符串的程序。该字符串默认存储在寄存器 $v0 中，但我想将 $v0 中的数据复制到字符串标签，这样如果我在程序中将 $v0 用于其他目的，用户输入就不会损坏。我弄清楚该怎么做。如果有人能告诉我怎么做，我会很高兴。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:07:09.370

在*Spim*中，从用户那里读取字符串的服务是 service *8*，它作为参数：

*   `$a0`: 指向将写入字符串的缓冲区的指针
*   `$a1`: 缓冲区的大小

返回*syscall*后，缓冲区将被输入文本（最多`$a1`字节）覆盖，`$v0`不受影响

示例用法：

```
.data
buffer: .space 128

.text
  la $a0, buffer
  li $a1, 128 # maximum number of bytes to be read
  li $v0, 8
  syscall 
```

# javascript - 谷歌图表折线图小时和分钟

> ID：12711667
> 
> 赞同：7
> 
> 时间：2012-10-03T15:23:22.780
> 
> 标签：javascript, charts, google-visualization

我正在尝试使用 Google 的图表 API 来显示折线图。
我创建了一个包含两列、一个日期和一个数值的数据表。该线显示正确，但 X 轴上的标签丢失。所有数据都在同一天，但在不同的时间。如果我编辑日期以便将它们分布在不同的日子里，一切都会奏效。
我只需要在一天内集中我的图表，并在 X 轴上显示小时和分钟。
我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T15:48:38.340

通常归结为您如何传递数据。`arrayToDataTable`你的日期只是字符串。如果您实例化一个 JS 日期对象并构建它，`dataTable`您应该会得到更好的结果。这段代码对我有用（[现场](http://jsfiddle.net/QzrBx/)查看）：

```
function drawVisualization() {

var data = new google.visualization.DataTable();

data.addColumn('datetime', 'Time of Day');
data.addColumn('number', 'Some Measurement');

data.addRows([
  [new Date(2012,10,3,11,30,0), 12],
  [new Date(2012,10,3,11,45,0), 2],
  [new Date(2012,10,3,12,1,0), 16],
  [new Date(2012,10,3,12,15,0), 3],
  [new Date(2012,10,3,12,30,0), 12],
  [new Date(2012,10,3,12,45,0), 7]
]);

new google.visualization.LineChart(document.getElementById('visualization')).
  draw(data, {curveType: "function",
              width: 500, height: 400,
              vAxis: {maxValue: 10}}
      );
} 
```

我曾经是 Google Visualization 的粉丝，但被他们的未公布更新烧伤了太多次。它也有很多限制。查看[Dygraph](http://dygraphs.com/)，它可以很好地处理时间序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:32:23.437

您`focus my chart in one day only and show hours and minutes on the X axis.`需要在查询中执行此操作。这与谷歌图表没有任何关系。您可以查看 haxis 参数，看看是否可以更改其中一些值以实现您想要的[https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)

# r - xlsx 中的自动图形生成

> ID：12711672
> 
> 赞同：2
> 
> 时间：2012-10-03T15:23:46.937
> 
> 标签：r, excel, plot, xlsx

我在 R 中编写了一个脚本来进行一些分析，并将结果作为一组 xlsx 格式的表格。

但是，我想在另一张表中从这些表中自动生成一些默认图形。

一种方法是使用

```
addPicture(file, sheet, scale=1, startRow=1, startColumn=1) 
```

来自 xlsx 包。意思是使用 R 生成此图并将它们分开保存并将它们插入到 excel 文件中。

我想知道，是否有更简单的方法，使用 excel 功能。例如，如果有任何公式可以生成这些图吗？

基本上，我想知道是否有任何自动脚本方式来生成这些图表？有什么办法，比如做这样的事情的公式吗？

# css - 调整浏览器大小并且未放置在需要的位置时，CSS APDIV 移动

> ID：12711673
> 
> 赞同：0
> 
> 时间：2012-10-03T15:23:51.513
> 
> 标签：css, html, position

嘿，我有一个很棒的 CSS 问题。

我正在尝试使用具有以下样式的 APDIV：

```
#name {
    position: absolute;
    width: 356px;
    height: 25px;
    z-index: 1;
    left: 43px;
    top: 1000px;
}

#donation_form {
    margin-left:auto;
    margin-right:auto;
    width:785px;
    height:520px;
    background-image:url(../img/formBG_ChattClub.gif);
} 
```

这在设计视图中的 Dreamweaver 中看起来很棒： ![织梦者](../Images/6a7b36fc5dda2806fcd9f8fd2b9d9dbd.png)

**但是**当我在浏览器中查看它时，它显示如下： ![在浏览器中](../Images/0807bf3b6fcba806e4f2f58038e27bc2.png)

该名称的 HTML 代码为：

![代码](../Images/b803a47cd1259cdb5f1e81da725b9e3a.png)

**donation_container**没有与之关联的样式。

我错过了什么，所以它与盒子排列得很好，没有任何问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:27:34.740

```
#donation_form {
    position: relative;
}
#name {
    top: 3px;
    left: 5px;
} 
```

除了你已经写的

# android - BitmapFactory.decodeFileDescriptor

> ID：12711678
> 
> 赞同：0
> 
> 时间：2012-10-03T15:24:01.860
> 
> 标签：android, image, android-layout, bitmap, android-imageview

我需要上传一张大图。正确的方法是将 BitmapFactory.decodeFileDescriptor 与 inSampleSize 选项一起使用。但问题是，图像仍然太大，无法放入某些设备的内存中。有没有办法以某种方式接收缩放图像的 InputStream 而不是位图？

或者你能建议任何其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:29:00.350

始终最好的起点是提供的文档。它们提供了如何有效[显示位图的示例代码](http://developer.android.com/training/displaying-bitmaps/index.html)

从[这里](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)开始，它将帮助您有效地加载大型位图

# c# - 使用 asp.net 表达式在文本值中定义服务器标记？

> ID：12711683
> 
> 赞同：3
> 
> 时间：2012-10-03T15:24:24.767
> 
> 标签：c#, asp.net, web-controls

我在代码隐藏中有一个函数，想在 aspx 上使用它。

代码隐藏：

```
 public string GetTranslate(string Text)
    {
       return Glob.GetTranslate(Text);
    } 
```

aspx：

```
<asp:LinkButton Text='<%= GetTranslate("Admin_HeaderInfo")%>' id="blabla" runat="server" /> 
```

结果 ：

```
LinkButton Text On Page => "<%= GetTranslate("Admin_HeaderInfo")%>" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:26:27.247

您不能在服务器`<%`内部使用`%>`带有`runat="server"`. 您可以从代码中设置该属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:44:40.893

您可以使用[DataBinding](http://support.microsoft.com/kb/307860)，即`<%#`，但是您将需要`DataBind()`从后面的代码中显式调用，即

.aspx

```
<asp:LinkButton  Text='<%#GetTranslate("Admin_HeaderInfo")%>' id="blabla" runat="server" /> 
```

代码背后：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        blabla.DataBind();
    } 
```

正如阿德里亚诺所提到的，另一种方法是从后面的代码中设置它，例如：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        blabla.Text = GetTranslate("Admin_HeaderInfo");
    } 
```

请注意，在确定将代码放置在何处时，您需要考虑 PostBack 和页面生命周期方面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T15:44:24.420

我们`ExpressionBuilders`过去使用过这种类型的东西，它们工作得很好，即使你没有数据绑定也可以使用。

我们在一些较旧的 WebForms 项目中使用[代码表达式生成器。](http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx)

有关表达式构建器的其他详细信息，请参阅[本文](http://www.4guysfromrolla.com/articles/022509-1.aspx)

这将允许您使用类似的语法

```
<asp:Label runat="server" Text='<%$ Lookup : SomeLookupValue %>'></asp:Label> 
```

[更多关于这个 SO 帖子的解释](https://stackoverflow.com/questions/7934160/asp-net-syntax)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:26:37.410

您需要将方法设为静态并尝试以下操作：

```
<%# GetTranslate("Admin_HeaderInfo")%> 
```

# javascript - 如何从字符串中调用函数？

> ID：12711695
> 
> 赞同：0
> 
> 时间：2012-10-03T15:25:03.010
> 
> 标签：javascript, namespaces, callback, scope, eval

您将如何从字符串调用函数，可能包括范围，并且不使用`eval`.

这个想法是我想在 a`dragEndCallback`属性中指定一个回调，并调用它，将拖动开始和结束对象作为参数。在我的情况下，某种通用的拖放。

大多数人会告诉你使用 eval，但它不安全、速度慢，而且总体上是一个非常糟糕的主意。

以下是一些我想支持的示例字符串：

```
"NamespaceA.functionName"
"functionName"
"NamespaceB.NamespaceA.functionName"
"ClassB.methodName" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:25:03.010

这是一种通用，干净且方便的方法。如果未找到该函数，则返回 undefined。

```
window.getFunctionFromString = function(string)
{
    var scope = window;
    var scopeSplit = string.split('.');
    for (i = 0; i < scopeSplit.length - 1; i++)
    {
        scope = scope[scopeSplit[i]];

        if (scope == undefined) return;
    }

    return scope[scopeSplit[scopeSplit.length - 1]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:01:41.080

如果“范围”是指要带入函数的范围，则可以使用以下方法：

```
var callFn = function(str, scope) {

    scope = scope || window;

    var namespaces = str.split('.'),
        fn = window; // or whatever root you want

    while(fn = fn[namespaces.shift()]){
        if(typeof fn == 'function') {
            fn.call(scope);
            return;
        }
    }
}; 
```

例子：

```
window.ns = {
    one: {
        two: function(){ console.log('Two!') }
    }
};
window.foo = function() {
    console.log(this); // document
};

callFn('ns.one.two');
callFn('foo', document); 
```

# mysql - 返回关系的整个列表匹配的所有行（而不是任何组合）

> ID：12711699
> 
> 赞同：0
> 
> 时间：2012-10-03T15:25:06.390
> 
> 标签：mysql, sql, doctrine-1.2, doctrine-query

具有以下简单的表结构：

```
Data
----------
id

Tag
----------
id

TaggedData
----------
id
tag_id
data_id 
```

如果我有一个标签 ID 列表，我将如何获取每一行数据，其中列表中的每一行标签都与匹配的数据行相关，而不是其子集？

这是我现在不起作用的查询：

```
 SELECT
        Data.*

    FROM
        Data
    LEFT JOIN
        TaggedData ON (Data.id = TaggedData.data_id)
    LEFT JOIN
        Tag ON (Tag.id = TaggedData.tag_id)

    WHERE
        Tag.id IN ('1' , '2') 
```

具体来说：这个不起作用，因为它将返回与标签 1 或 2 相关的任何数据行。不是 1**和**2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:26:44.630

这称为“关系划分”

```
 SELECT 
        Data.ID  
    FROM 
        Data 
    INNER JOIN 
        TaggedData ON (Data.id = TaggedData.data_id) 
    INNER JOIN 
        Tag ON (Tag.id = TaggedData.tag_id) 
    WHERE 
        Tag.id IN ('1' , '2') 
    HAVING COUNT(DISTINCT tag.iD)=2 
```

# hibernate - 删除域对象和外键

> ID：12711711
> 
> 赞同：0
> 
> 时间：2012-10-03T15:25:54.687
> 
> 标签：hibernate, grails, orm, groovy

我有一个中等复杂的设计，我试图从系统中删除一个“ItemCollection”。该对象属于 Publisher（一对多）并具有 MediaItems（一对多）和一个 Posting（一对一）。Posting 由非拥有多对多中的 2 个其他对象引用。

当我删除 ItemCollection （通过在父级上调用 removeFrom() ）时，级联被触发，但我最终在多对多集合上出现外键异常。我尝试从 beforeDelete() 中的其他集合中删除 Posting，虽然我的日志输出告诉我这是有效的，但外键异常仍然发生。

主要层次结构在这里：

```
 class Publisher { 
    String name
    static hasMany = [collections : ItemCollection, defaultTags : MetaTag, feeds : Feed]

    static mapping = {
        collections cascade: 'all-delete-orphan'
    } 
}

class ItemCollection  {

    static hasOne = [posting:Posting]
    static hasMany = [items:MediaItem, tags:MetaTag] 
    static mapping = {
        items sort:'collectionOrder', order: 'asc', lazy:false, cascade: "all-delete-orphan"
        posting cascade: "all-delete-orphan"
        tags lazy:false
    }
    static belongsTo = [publisher:Publisher]
}

class Posting {
    static belongsTo = [itemCollection: ItemCollection]

    << see beforeDelete method below >>
} 
```

Posting 被这两个类引用。

```
class ItemFeed {
    List posts  
    static hasMany = [posts:Posting, segments:FeedSegment] 

    static mapping = {
        segments cascade: 'all-delete-orphan'
        posts lazy:'false'

    }
    static constraints = {
        posts nullable:true
        segments nullable:true
    }
}

class FeedSegment {
    Date postingTime
    String s3objname
    List posts

    static belongsTo = [feed:ItemFeed]
    static hasMany = [posts:Posting]

    static constraints = {
        posts nullable:true
    }
} 
```

在我的控制器中，我正在调用：

```
collectionIds.addAll(params?.collectionIds)
collectionIds.each { id->
    log.info("deleting ${id}")
    def itemCollectionInstance = ItemCollection.get(id)
    def publisher = itemCollectionInstance.publisher
    publisher.removeFromCollections(itemCollectionInstance)
    publisher.save(flush:true)
} 
```

我在 Posting 中添加了以下 onDelete。

```
def beforeDelete() {
        Posting.withNewSession {
            log.info 'trying to delete posting from feeds'

            Posting thees = Posting.get(id)   /// using "this" seemed to not be reliable..?
            log.info 'Deleting: ' + thees

            def feedsWithPost = ItemFeed.createCriteria().list{
                posts {
                    eq('id', thees.id)
                }
            }

            def x = feedsWithPost
            x.each { feed ->
                log.info '#posts: ' + feed.posts.size()
                feed.removeFromPosts(thees)
                if(feed.validate()) {
                    feed.save()
                } else {
                    log.warn "Problem with validation " + feed.errors.allErrors.dump()
                }
                log.info '#posts: ' + feed.posts.size()  <---- THIS SEEMS TO WORK. I SEE SIZE GO DOWN

            }

            // repeated for FeedSegment...

        }
    } 
```

当我尝试删除 ItemCollection 时，我得到以下堆栈跟踪：

```
2012-10-02 18:09:21,499 [http-bio-9090-exec-1] INFO  feeds.Posting  - Deleting: com.broadcastr.feeds.Posting : 2
2012-10-02 18:09:21,507 [http-bio-9090-exec-1] INFO  feeds.Posting  - found feeds: [<com.broadcastr.feeds.ItemFeed@7592b321 category=Arts & Entertainment city=New York City posts=[com.broadcastr.feeds.Posting : 1, com.broadcastr.feeds.Posting : 2] lastUpdated=2012-10-02 17:27:48.819 segments=[] jsonMetaData=null errors=null id=1 version=2>]
2012-10-02 18:09:21,507 [http-bio-9090-exec-1] INFO  feeds.Posting  - #posts: 2
2012-10-02 18:09:21,507 [http-bio-9090-exec-1] INFO  feeds.Posting  - #posts: 1
2012-10-02 18:09:21,508 [http-bio-9090-exec-1] INFO  feeds.Posting  - found feeds: [<com.broadcastr.feeds.ItemFeed@7592b321 category=Arts & Entertainment city=New York City posts=[com.broadcastr.feeds.Posting : 1] lastUpdated=2012-10-02 17:27:48.819 segments=[] jsonMetaData=null errors=grails.validation.ValidationErrors: 0 errors id=1 version=2>]
2012-10-02 18:09:21,510 [http-bio-9090-exec-1] WARN  util.JDBCExceptionReporter  - SQL Error: 23503, SQLState: 23503
| Error 2012-10-02 18:09:21,510 [http-bio-9090-exec-1] ERROR util.JDBCExceptionReporter  - Referential integrity constraint violation: "FKFD598F4D2EE471: PUBLIC.ITEM_FEED_POSTING FOREIGN KEY(POSTING_ID) REFERENCES PUBLIC.POSTING(ID)"; SQL statement:
delete from posting where id=? and version=? [23503-164]
| Error 2012-10-02 18:09:21,512 [http-bio-9090-exec-1] ERROR events.PatchedDefaultFlushEventListener  - Could not synchronize database state with session
Message: could not delete: [com.broadcastr.feeds.Posting#2]
   Line | Method
->>  41 | doCall   in DebugFilters$_closure1_closure2_closure5
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   195 | doFilter in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter in grails.plugin.cache.web.filter.AbstractFilter
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   680 | run      in java.lang.Thread
Caused by JdbcSQLException: Referential integrity constraint violation: "FKFD598F4D2EE471: PUBLIC.ITEM_FEED_POSTING FOREIGN KEY(POSTING_ID) REFERENCES PUBLIC.POSTING(ID)"; SQL statement:
delete from posting where id=? and version=? [23503-164]
->> 329 | getJdbcSQLException in org.h2.message.DbException
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   169 | get      in     ''
|   146 | get . .  in     ''
|   398 | checkRow in org.h2.constraint.ConstraintReferential
|   415 | checkRowRefTable in     ''
|   291 | checkRow in     ''
|   862 | fireConstraints in org.h2.table.Table
|   879 | fireAfterRow in     ''
|    99 | update . in org.h2.command.dml.Delete
|    73 | update   in org.h2.command.CommandContainer
|   226 | executeUpdate in org.h2.command.Command
|   143 | executeUpdateInternal in org.h2.jdbc.JdbcPreparedStatement
|   129 | executeUpdate in     ''
|   105 | executeUpdate in org.apache.commons.dbcp.DelegatingPreparedStatement
|    41 | doCall . in DebugFilters$_closure1_closure2_closure5
|   195 | doFilter in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter in grails.plugin.cache.web.filter.AbstractFilter
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   680 | run      in java.lang.Thread
| Error 2012-10-02 18:09:21,516 [http-bio-9090-exec-1] ERROR servlet.GrailsDispatcherServlet  - HandlerInterceptor.afterCompletion threw exception
Message: could not delete: [com.broadcastr.feeds.Posting#2]; SQL [delete from posting where id=? and version=?]; constraint ["FKFD598F4D2EE471: PUBLIC.ITEM_FEED_POSTING FOREIGN KEY(POSTING_ID) REFERENCES PUBLIC.POSTING(ID)"; SQL statement:
delete from posting where id=? and version=? [23503-164]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not delete: [com.broadcastr.feeds.Posting#2]
   Line | Method
->>  41 | doCall   in DebugFilters$_closure1_closure2_closure5
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   195 | doFilter in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter in grails.plugin.cache.web.filter.AbstractFilter
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   680 | run      in java.lang.Thread
Caused by ConstraintViolationException: could not delete: [com.broadcastr.feeds.Posting#2]
->>  41 | doCall   in DebugFilters$_closure1_closure2_closure5
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   195 | doFilter in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter in grails.plugin.cache.web.filter.AbstractFilter
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   680 | run      in java.lang.Thread
Caused by JdbcSQLException: Referential integrity constraint violation: "FKFD598F4D2EE471: PUBLIC.ITEM_FEED_POSTING FOREIGN KEY(POSTING_ID) REFERENCES PUBLIC.POSTING(ID)"; SQL statement:
delete from posting where id=? and version=? [23503-164]
->> 329 | getJdbcSQLException in org.h2.message.DbException
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   169 | get      in     ''
|   146 | get . .  in     ''
|   398 | checkRow in org.h2.constraint.ConstraintReferential
|   415 | checkRowRefTable in     ''
|   291 | checkRow in     ''
|   862 | fireConstraints in org.h2.table.Table
|   879 | fireAfterRow in     ''
|    99 | update . in org.h2.command.dml.Delete
|    73 | update   in org.h2.command.CommandContainer
|   226 | executeUpdate in org.h2.command.Command
|   143 | executeUpdateInternal in org.h2.jdbc.JdbcPreparedStatement
|   129 | executeUpdate in     ''
|   105 | executeUpdate in org.apache.commons.dbcp.DelegatingPreparedStatement
|    41 | doCall . in DebugFilters$_closure1_closure2_closure5
|   195 | doFilter in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter in grails.plugin.cache.web.filter.AbstractFilter
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   680 | run      in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:20:01.513

您可能不应该使用两个会话。我认为 hibernate 不能保证在您的`beforeDelete`处理程序中创建的会话将在 Posting 对象被删除之前被刷新。如果您不需要两个单独的会话，请使用`withSession`而不是`withNewSession`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:17:51.687

原来有另一个我没有处理的表被引用。为了澄清上述答案 - withNewSession 是在这里使用的正确习惯用法，并且您不想在 beforeDelete 方法中保存（flush：true）。

# trigger.io - 带有图像问题的 Trigger.IO 标头

> ID：12711712
> 
> 赞同：1
> 
> 时间：2012-10-03T15:25:59.523
> 
> 标签：trigger.io

我一直在研究 Trigger.IO 并且对标题和选项卡组非常感兴趣，我注意到它们允许标题中的图像，但不清楚 src 选项的工作原理。

我想知道的是是否可以在标题中包含动态图像，或者是否必须将其与应用程序本身打包。

目前我有一个应用程序，在登录后（取决于用户）将加载一个不同的标题图像，这个图像作为 base64 拉入并存储在本地存储中，所以我想知道这是否可以使用本机 UI 标题，或者它们是在“构建”时编译的，因此需要成为应用程序的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:43:38.010

是的，这是可能的。您可以使用动态更改当前标题图像

```
forge.topbar.setTitleImage(image, success, error); 
```

其中 image 是要显示的图像的路径（字符串），成功/错误是回调函数。

来源：[Trigger.io 顶部栏 API 文档](http://docs.trigger.io/en/latest/modules/topbar.html#settitleimage)。

# scala - 如何使用 Play 2.0 在 Java 中实现 PayPal IPN 控制器

> ID：12711713
> 
> 赞同：2
> 
> 时间：2012-10-03T15:26:02.393
> 
> 标签：scala, playframework, playframework-2.0, paypal-ipn

我正在使用 Play Framework 2.0 实现一个 PayPal IPN 控制器（目前使用 Java），它从 PayPal 服务器接收表单编码的 POST 请求。我正在改编[Guillame Leone 的博客文章中](http://blog.guillaumeleone.fr/play-and-paypal-ipn/)的 Play 1.x 控制器以使用 Play 2.0。由于“参数”现在消失了，这个任务似乎有点棘手。

PayPal IPN 流程有两个步骤：

1) 将请求正文解析为文本，以便我可以向 PayPal 提交他们想要的确切响应。它必须是与他们提交给我的顺序相同的字符串。这目前有效：

```
 @BodyParser.Of(BodyParser.TolerantText.class)
 public static Result validation() throws Exception {
   Logger.info("Received IPN request");
    String str = "cmd=_notify-validate&" + request().body().asText();
    Logger.info("Validation string: " + str); 
```

2) 向 PayPal 发送验证请求，当他们回复“已验证”响应时，我想解码表单编码的请求正文并将其作为地图访问。但由于我已经使用注释将请求正文解析为文本，因此以下返回 null 而不是映射：

```
Map<String,String[]> data = request().body().asFormUrlEncoded() //returns null 
```

将此请求解析两次的最佳方法是什么，一次作为文本（忽略表单编码的 MIME 类型），第二次作为表单编码的数据？

（看来我可能想摆脱注释并直接调用 TolerantText 和 FormEncoded 解析器，但我不知道该怎么做！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:35:37.267

由于 Java 和 Scala 集合之间的互操作性问题，使用 Play Java API 似乎没有直接的方法来执行此操作。

要使用 Java 集合访问表单数据，我必须编写一个 Scala 助手：

```
object BodyParserUtils {
  def parseTextAsFormUrlEncodedForJava(textBody: String) = {
    import collection.JavaConverters._
    val scalaMap = FormUrlEncodedParser.parse(textBody)
    scalaMap.mapValues(_.asJava).asJava
  }
} 
```

然后我可以设置数据变量：

```
Map<String, List<String>> data = BodyParserUtils.
     parseTextAsFormUrlEncodedForJava(request().body().asText()); 
```

如果您想要一个裸露的（尚未完成的）Play 2.0 Java 控制器来开始接收 PayPal IPN 请求，这就是全部：

```
public class PaypalController extends Controller {

@BodyParser.Of(BodyParser.TolerantText.class)
public static Result validation() throws Exception {
    Logger.debug("Received IPN request");

    String str = "cmd=_notify-validate&" + request().body().asText();
    Logger.debug("Validation string: " + str);

    URL url = new URL("https://www.sandbox.paypal.com/cgi-bin/webscr");
    URLConnection connection = url.openConnection();
    connection.setDoOutput(true);
    connection.setRequestProperty("Content-Type",
            "application/x-www-form-urlencoded");

    PrintWriter out = new PrintWriter(connection.getOutputStream());
    out.println(str);
    out.close();

    BufferedReader in = new BufferedReader(new InputStreamReader(
            connection.getInputStream()));
    String result = in.readLine();
    in.close();

    Logger.debug("IPN result: " + result);

    Map<String, List<String>> data = BodyParserUtils
            .parseTextAsFormUrlEncodedForJava(request().body().asText());
    Logger.debug("Form data: " + data);

    if (StringUtils.equals(result, "VERIFIED")) {
        return ok();
    } else {
        return badRequest();
    }

}

} 
```

# unit-testing - 测试优化

> ID：12711715
> 
> 赞同：0
> 
> 时间：2012-10-03T15:26:12.237
> 
> 标签：unit-testing, testing, automated-tests

我们刚刚继承了一个包含大量自动化测试的新代码库。我们一直在“顺其自然”并在每次合并和部署之前运行它们。我们的一些员工甚至在编写新功能时添加到测试集合中。

我一直在尽我最大的努力说服团队我们需要像烫手山芋一样放弃这些东西，但内部存在很多争吵。

正如我所看到的，问题如下 - 这些测试需要很长时间才能运行（在一位开发人员的旧机器上最多需要 10 分钟！）。他们一直在崩溃——我不了解你，但当我的软件崩溃时我讨厌它。如果我们只是摆脱所有这些有缺陷的代码，我们至少会将错误数量减少 10 倍。一直在编写新代码的开发人员在做任何事情上花费的时间至少是其他人的两倍。这太荒谬了，我们已经在紧迫的期限内工作，现在进展进一步放缓，至少对于这个项目来说。我正在查看其中一位开发人员所做的提交，该功能刚刚超过 100 LOC，测试接近 250 LOC！

我的问题是我们如何去除所有这些错误的、无法维护的、每五分钟中断一次的代码（我不只是想进行搜索和替换，以防实际功能因此而开始中断）并说服我们的开发人员别浪费时间了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:34:58.713

为什么测试总是失败？为什么它们有缺陷且无法维护？那是你问题的根源。

测试应该表达你的软件的需求。如果它们不断中断，那可能是因为它们与实现的内部耦合太紧密，而不是仅通过公共接口调用代码。如果您不能通过公共接口驱动代码，那么这通常表明代码可以更好地设计为更具可测试性——这也往往会使代码更清晰、更灵活和更健壮。

如果您删除测试，那么您将不知道您的代码库是否仍然有效。因为测试有“bug”而去掉测试会给你带来一个不舒服的问题：如果测试有 bug，为什么实际代码的 bug 会少一些？

另一方面，如果（旧版）测试非常缓慢且笨拙，那么*其中一些*至少可能会比它们更有价值 - 但您必须逐案考虑它们，并且弄清楚你将如何更换它们。您可以对测试进行计时，看看是否有任何特别慢的要针对 - 如果它们是 JUnit 测试，那么您会自动获得计时。您还可以测量代码覆盖率并查看测试是否重叠，或者考虑到它们的大小和运行时间，它们是否覆盖了非常少量的代码库。有一些专门针对处理遗留代码的[书籍。](https://rads.stackoverflow.com/amzn/click/com/0131177052)

如果做得好，自动化测试会加快开发速度，而不是减慢开发速度（假设您希望软件实际运行），因为开发人员可以进行更改和重构代码，而不必担心每次接触任何东西都会破坏其他东西，并且因为他们可以清楚地判断某个功能何时起作用，而不是“我认为它似乎起作用”。

加快测试速度是可取的。如果端到端地运行系统，并非所有测试都可以很快，但我通常将此类“功能测试”与细粒度的单元测试分开，后者应该运行得非常快，因此它们可以一直运行。请参阅Michael Feathers 的[这篇文章](http://www.artima.com/forums/flat.jsp?forum=106&thread=126923)，了解他对单元测试的定义，以及如何处理慢速测试。

如果您关心您的代码是否有效，那么测试代码与实际代码一样重要——它需要正确、清晰和分解以避免重复。测试代码至少与真实代码一样多是完全正常的，尽管比率会因代码类型而有很大差异。你的具体例子是否过分，不看就无法判断。

**更新：**在您的[其他问题](https://stackoverflow.com/questions/11098042/paranoid-management-contractor-checking-work)之一中，您说*“我已经向环境介绍了最新的漂亮框架、单元和功能测试、CI、错误跟踪器和敏捷工作流”*。您是否改变了对测试的想法，或者这个问题可能是稻草人？还是您的问题真的是*“我应该放弃所有旧测试并重新开始”*？（鉴于您对开发人员编写新测试的评论，它不是这样读的......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:50:47.547

测试是测试框架的一部分，还是它们自己开发的测试逻辑部分已经附加到您的生产逻辑？

如果是本土开发的，您可能会很幸运地说服团队将测试重构为结构化框架。现在有很多，这在最初设置时可能不是这种情况。

如您所知，越早发现并修复错误越好。自动化测试是人们在错误仍然很容易修复时发现错误的一种方式。准备和维护测试可能会花费您额外的开发时间，但要平衡这一点与除了最终客户之外的每个人都漏掉的主要缺陷（尤其是在涉及截止日期时）。

# mysql - 更改所有简单产品的可见性

> ID：12711716
> 
> 赞同：4
> 
> 时间：2012-10-03T15:26:12.327
> 
> 标签：mysql, sql, magento

我正在尝试通过 SQL 更改所有 SIMPLE-only 产品的可见性。

这是我选择可见性属性的所有值的方法：

```
SELECT * FROM `catalog_product_entity_int` WHERE attribute_id = 102 
```

`catalog_product_entity_int`表的`entity_id`列是产品实体 ID，对于所有简单产品都`value`应该更改为。`1`

以下是我选择所有简单产品的方法：

```
SELECT * FROM `catalog_product_entity` WHERE `type_id`= 'simple' 
```

我不能做的是编写查询来更新所有简单产品`value`的列`catalog_product_entity_int`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:35:52.113

您有任何理由使用直接 sql 查询来编辑 EAV 属性吗？

您可以使用集合甚至在管理后端执行相同操作：目录 - 管理产品 - 键入“简单产品” - 全选 - 操作 - 更新属性 - 可见性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-28T06:49:41.577

确切的工作查询

```
UPDATE catalog_product_entity_int CPI INNER JOIN catalog_product_entity CP ON CPI.entity_id = CP.entity_id
SET value = 1 
WHERE CPI.attribute_id = 102 AND CP.type_id = 'simple'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-11T19:26:53.383

您想使用 Magento 的批量操作之一。这样，仍然会分派正确的事件。

```
<?php

// Get all simple product ids
$ids = Mage::getResourceModel('catalog/product_collection')
    ->addAttributeToFilter('type_id', array('eq' => Mage_Catalog_Model_Product_Type::TYPE_SIMPLE))
    ->getAllIds();

// Update their visibility
Mage::getSingleton('catalog/product_action')->updateAttributes(
    $ids,
    array("visibility" => Mage_Catalog_Model_Product_Visibility::VISIBILITY_NOT_VISIBLE),
    Mage_Core_Model_App::ADMIN_STORE_ID
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T15:30:08.070

当我收到你的问题时，这个简单的代码对你有用。

我假设这两个表之间的关系是-entity_id

```
update catalog_product_entity_int set value =1 
where attribute_id = 102 and  entity_id=
(select entity_id from `catalog_product_entity` where `type_id`= 'simple') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-17T09:53:32.780

请按照步骤操作。

Step1：在通过查询进行任何更改之前，您需要备份受影响的表或数据库。在这种情况下，请备份 (catalog_product_entity_int) 表。

Step2：在 eav_attribute 表中搜索准确的可见性属性 id。

( `SELECT * FROM eav_attribute WHERE attribute_code LIKE 'visibility'`)。然后将该值保留在以下查询中...

第 3 步：运行此查询

`UPDATE catalog_product_entity_int SET VALUE =2 WHERE attribute_id = 102 AND entity_id IN (SELECT entity_id FROM catalog_product_entity WHERE type_id= 'simple')`

祝你好运...

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-04T04:21:18.673

我认为这个sql命令究竟是：

```
UPDATE catalog_product_entity_int SET VALUE =2  
WHERE attribute_id = 93 AND  
      entity_id IN (SELECT entity_id FROM catalog_product_entity 
                    WHERE type_id= 'simple') 
```

注意：检查您的 attribute_id 女巫映射号码

# javascript - 让用户在尝试三遍后继续

> ID：12711732
> 
> 赞同：4
> 
> 时间：2012-10-03T15:26:57.847
> 
> 标签：javascript, jquery

在我的拼写游戏中，有一个填满单词的网格。单词是隐藏的，游戏的目的是拼出借助声音和图片突出显示的单词。

要突出显示一个单词，请按“下一步”按钮。目前，如果您正确拼写该单词，它会显示“做得好”，您可以前进到下一个单词，但如果您拼写错误，您必须继续尝试该单词直到它完成。

由于游戏是为儿童设计的，我认为这不是最好的方法，所以我想这样做，这样你就可以在 3 次错误尝试后继续前进。

我一直在玩这个脚本，试图将计数器放在不正确的尝试上，然后使按钮处于活动状态，但似乎无法让它工作。有人可以帮帮我吗？

这是按钮的脚本

```
var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
if (noExist) {
    $('.minibutton').click();

} else {
    $('.minibutton').click('disable');
    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
    audio.play();
    $("#mypic").attr('src', listOfWords[rndWord].pic);
    pic.show();
}
}); 
```

“wordglow2”是单词拼写正确时应用的样式。这是一个帮助理解的小提琴...... [http://jsfiddle.net/smilburn/ZAfVZ/4/](http://jsfiddle.net/smilburn/ZAfVZ/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:35:02.453

将全局变量添加到您的脚本

```
var numberOfTries = 0; 
```

接下来，在您的 $('.drag').on('click') 侦听器回调中，您有一个 if 语句来确定单词是正确还是不正确：

```
if (!$('.drop-box.spellword:not(.occupied)').length) 
```

在 if 语句中，将 numberOfTries 重置为 0。在 else 语句中，您将输入：

```
numberOfTries++;
if (numberOfTries >= 3)
{
    $('.minibutton').prop('disabled', false);
} 
```

这将计算尝试次数，并在第三次尝试后启用“下一步”按钮。一旦用户得到正确的单词，它将将该变量重置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:56:42.880

您可以做的是使用 jQuery 的 .data() 函数为每个 TR 附加一个计数器。如果尝试不成功，请增加计数器并据此决定是禁用还是启用按钮。我已经修改了您发送的 jsfiddle 并添加了此行为。查看具有注释的行（您可以按 Ctrl+F 找到它） // Edits here

[http://jsfiddle.net/dflor003/ZAfVZ/7/](http://jsfiddle.net/dflor003/ZAfVZ/7/)

# css - 谷歌浏览器唯一的错误

> ID：12711733
> 
> 赞同：2
> 
> 时间：2012-10-03T15:27:00.003
> 
> 标签：css, html, google-chrome

我在我的网站上遇到了一个问题，我无法解决。这是[链接：](http://www.juxcore.com/x/bmw/html5/modifications.php)。如您所见，当我尝试浮动时出现问题：将“编辑”右侧的图片向右移动并向下移动。问题是，这仅在 Google Chrome、Firefox 或 IE 中发生，它工作正常。如果发现任何错误，我将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:30:51.447

尝试：

```
 .admineditright{
 width:70px;
 } 
```

这个div的当前宽度是65px，还不够，设置一个更高的值比如70px就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:36:28.493

您是否尝试过将浮动从图像上移开并将其移至 EDIT？

当我申请`float left;`编辑时，它起作用了。我还应用了一个小的上边距以使编辑以图像为中心。

另外，请注意该错误也存在于铬中。考虑到与铬和铬的关系，这并不奇怪，但有时我会遇到铬中没有发现铬的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:39:09.190

编辑这个类：

```
.mod_edits1 {
   float: left;
   margin-top:7px
} 
```

# google-maps - MarkerClusterer 完成后触发事件

> ID：12711736
> 
> 赞同：6
> 
> 时间：2012-10-03T15:27:05.777
> 
> 标签：google-maps, google-maps-api-3, markerclusterer

所以我有一个应用程序，其中包含一个带有（数百个）标记的地图。我使用 Google 提供的 markerclusterer.js 来聚集我的标记并使整个事情更容易查看。我正在使用 API V3。

我对这一切都很好。但是我想做的是在markerclusterer完成所有标记的聚类后执行一些操作。我试过自己做，但没有看。

有什么建议么？（我假设这会比我想象的要容易，而且我的大脑只是油炸了）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T07:38:50.487

我只是想知道同样的事情。我是这样做的：

```
google.maps.event.addListener(markerClusterer, 'clusteringend', myFunction); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:07:26.633

地图[“空闲”](https://developers.google.com/maps/documentation/javascript/reference#Map)事件对您有用吗？它应该在 MarkerClusterer 完成后触发（假设您在页面加载时加载 MarkerClusterer）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-27T01:32:39.970

似乎没有维护这个库。多年来，它不能与 v3 一起正常工作，也没有开发出任何解决方案。

因此，我下载了非最小化版本并将其放入我正在工作的项目的源代码中。如果您直接在库中进行以下更改，则接受的解决方案仅适用（对于 v3）：

`google.maps.event.trigger(this, "clusteringend", this);`在 for 循环之后找到 createClusters_ 函数。所以它将如下所示：

```
MarkerClusterer.prototype.createClusters_ = function() {
  if (!this.ready_) {
    return;
  }

  // Get our current map view bounds.
  // Create a new bounds object so we don't affect the map.
  var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),
      this.map_.getBounds().getNorthEast());
  var bounds = this.getExtendedBounds(mapBounds);

  for (var i = 0, marker; marker = this.markers_[i]; i++) {
    if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {
      this.addToClosestCluster_(marker);
    }
  }
  google.maps.event.trigger(this, "clusteringend", this);
}; 
```

现在您可以使用：

```
google.maps.event.addListener(markerClusterer, 'clusteringend', myFunction); 
```

# javascript - 从 Javascript 心理学实验中收集数据

> ID：12711737
> 
> 赞同：0
> 
> 时间：2012-10-03T15:27:10.833
> 
> 标签：javascript, webserver, data-collection

作为研究的一部分，我正在用 JavaScript 设计一个基本的识别记忆实验，其中首先向参与者展示一系列要学习的图片，然后向他们展示一组更大的图片，并且必须识别他们中的哪些以前见过。

虽然我通常会使用 EPrime 包或 Python（实验）来完成此类任务，但我一直在用 JavaScript 编写它，以便我可以在大型组中进行测试（我只有 6 台计算机上的 EPrime，目前只有 Python我自己的）。

作为一个 JS/html 菜鸟，我的问题是我想不出一种收集数据进行分析的方法（即发送给我自己，或者将它保存到某处的服务器）。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:40:47.137

您可以使用标准 GET/POST 请求将结果提交到 PHP 服务器。然后 PHP 服务器可以将提交的结果保存到数据库中。

您可以在[http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=510查看入门指南](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=510)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:54:14.860

首先，欢迎来到stackoverflow！

在这里提出更直接和客观的问题是很常见的（顺便说一下常见问题解答中的描述），例如：

> 方法 X 如何在框架 Y 上工作以及为什么它不工作？

像这样的问题：

> 我如何构建一个完整的系统 X 来完成 Y？

都有些超出本站的范围。

*然而*

我将尝试提供有关如何实现您想要做的事情的一般指导。由于您的问题非常笼统（缺乏适当的细节，例如代码、目标公众、环境），不幸的是，我的回答将是通用的。

## Javascript

您可能知道，javascript 是一种客户端技术，它旨在为用户提供简单而动态的交互。仅使用 javascript，您几乎无法实现您想要做的事情。你看，即使 javascript 有办法与服务器通信来存储和处理信息，你也可能会使用另一种服务器端技术，比如[php](http://www.php.net)，也可能使用像[mysql这样的数据库](http://dev.mysql.com)

## 记忆游戏

让我们将问题划分为较小的任务，以便您可以单独询问如何：

*   您需要几张图像来完成您正在尝试做的事情。
*   您将需要至少两个阶段：一个显示第一张图像的阶段，一个将所有图像呈现给用户的阶段
*   您将需要一些随机函数来选择应该在哪个阶段显示哪些图像。这可以通过 php 轻松完成，而使用 javascript（或 jQuery）则或多或少容易。
*   您需要使用 javascript 向服务器提交用户选择的图像
*   您将需要提供一个 php 脚本来处理这些提交，然后将其存储在某个地方进行分析。此外，此步骤需要向用户提供一定的输出。
*   最后，您需要向用户显示此结果。

所以现在你可以开始思考你已经拥有的东西，你会在这里问。下次来一段代码。如果您正在尝试学习 HTML/Javascript/CSS/PHP/MYSQL（我不知道您是否没有），您可以查看[w3schools](http://www.w3schools.com)以获得不错且完整的教程，当然，请在堆栈溢出处进行一些研究。

我希望它能以某种方式帮助你。干杯

# wcf - 删除 log4net.config 文件不会停止 WCF 应用程序的日志记录

> ID：12711738
> 
> 赞同：0
> 
> 时间：2012-10-03T15:27:13.907
> 
> 标签：wcf, log4net, log4net-configuration

我有一个托管在 IIS 7 下的 WCF 应用程序，并且我已经为它启用了 log4net。我正在使用单独的 log4net.config 文件，因为我想让启用/禁用日志记录变得非常容易，而无需更改 web.config。通过将 log4net.config 文件放到指定路径中，我的 WCF 应用程序开始登录到文件中。但是如果我删除 log4net.config 文件，应用程序会继续记录。似乎要删除日志记录选项，我总是必须手动重新启动应用程序池。

有没有其他方法可以禁用 log4net 日志记录，而无需重新启动 IIS 应用程序池或将配置添加到 web.config？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:31:34.010

如果您的日志记录在文件创建时开始，那么您的应用程序必须监视它，这表明您需要做的就是编辑您的 log4net.config 并将日志记录级别更改为关闭。

# javascript - 加载新页面时保持导航打开

> ID：12711740
> 
> 赞同：-2
> 
> 时间：2012-10-03T15:27:15.247
> 
> 标签：javascript, html, css, joomla2.5

> **可能重复：**
> [链接到新页面时，让有孩子的父母保持打开状态](https://stackoverflow.com/questions/12494387/keep-parent-with-children-open-when-linking-to-new-page)

我有这个控制手风琴菜单的代码......我以前问过这个但无济于事，所以我想我可以简化我的问题......

```
<script type="text/javascript">
$(function () {
 $("ul.menu-main > li").hover(function () {
    //Don't do this again if the same menu is hovered
    if (!$(this).hasClass('selected')) {
        //Ensure any open sub-menu is closed.
        $("li.selected").children("ul").stop(true, true).slideUp(1000);
        $("li.selected").removeClass('selected');
        //Open sub-menu
        $(this).addClass('selected');
        $(this).children("ul").slideDown(1000);
    }
});
});
</script> 
```

我正在寻找一种在选择菜单项时保持打开状态的方法，仅在导航子菜单项时子菜单保持打开状态。也许某种“查找当前网址”？如果需要，我可以解释更多，这有点漫不经心......

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:18:01.147

您可能需要将打开的菜单（列表）存储在 cookie、localStorage 或 sessionStorage 中。请注意，只有 cookie 方法会被广泛支持。

但是，基本思想是在打开菜单时存储打开的菜单（并在关闭时将它们从列表中删除）。然后，当页面加载时，查找打开的菜单列表，如果存在，使用该列表手动（以编程方式）打开，然后在页面加载时再次打开。

希望这可以帮助。

# python - 用python对列表中的项目进行分类

> ID：12711743
> 
> 赞同：3
> 
> 时间：2012-10-03T15:27:30.363
> 
> 标签：python, list

目前，我在 Excel 中有一个 110,000 名捐赠者的列表。他们给我们的信息之一是他们的职业。我想将此列表压缩为我定义的 10 或 20 个类别。

通常我会逐行处理，但由于我必须为数年的数据执行此操作，因此我真的没有时间逐行执行 1,000,000+ 行。

无论如何定义我的 10 或 20 个类别，然后让 python 从那里进行排序？

更新：

数据格式不正确。人们可以在线或在纸条上自行填写字段，然后将其邮寄到数据处理公司。有很大的差异。首席执行官，首席执行官，执行办公室，名单还在继续。

我使用了 SORT UNIQ 命令，发现我的列表中有大约 13,000 个不同的职业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:36:24.890

我假设数据是嘈杂的，从某种意义上说，它可以是任何东西，写入。这里的主要困难是如何定义输入数据和类别之间的映射，这将涉及，首先，查看数据。

我建议你看看你有什么，并制定一个从输入职业到类别的映射列表。然后，您可以使用几乎任何工具（如果您使用的是 excel，请坚持使用 excel）将该映射应用于每一行。有些行不属于任何类别。您应该查看它们，并确定这是因为您的映射不充分（例如，您没有想到如何与兽医打交道），或者是因为数据嘈杂。如果是噪音，您可以手动处理剩余部分，或者尝试使用其他技术对数据进行分类，例如正则表达式或某种自然语言处理库。

一旦您弄清楚了您的问题案例是什么，请回来向我们询问它们，并提供示例数据和您一直在使用的代码。

如果您甚至无法迈出第一步来弄清楚如何运行映射，请进行一些研究，尝试写一些东西，然后再回来提出一个具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:33:43.773

以当前格式转储这些数据几乎是不可能的。您将需要手动将所有案例减少为定义明确的案例集，例如：

*   首席执行官、执行办公室、首席信息官、首席执行官、首席技术官都将进入 C-Star 类别
*   经理、PM、主管将进入经理类别
*   像 Vet 或 Care Giver 之类的一次性服务将归入“其他”类别

此手动配对还将让您深入了解如何为数据处理公司制定更好的问卷或格式，并进一步增加您能够更快地处理以后数据的可能性。

一旦达到这一点，元组字典就足以进行数据分类，您将拥有如下内容：

```
dict_x = {'C-Star': (('bob', donation_dollars, 'company_y', 'e_mail_addy'), 
                    ('jim', donation_dollars_2, 'company_z', 'e_mail_addy')),
          'Other': (('sophie', donation_dollars_3, 'company_x', 'e_mail_addy')) } 
```

这可以使用列表推导、lambda 函数、生成器或一些老式的 for 循环来构建。

tl：博士；您将不得不手动对该集合进行分类，几乎不可能在没有格式良好的数据集的情况下以编程方式完成所有边缘情况。如果您没有时间，那里有专门从事此方面的公司，并且能够帮助您将数据格式化为您想要的组，那么您将不得不花费时间或金钱来让自己成一个易于排序的数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T04:31:52.127

我以前处理过类似/几乎完全相同的情况。很多很多次。

简短的回答 - “哦，f**！@#，我是 scr@#@#$。”

长答案 - “有一些方法可以最大限度地减少你是简短答案的程度”

就个人而言，我会做以下事情：

*   至少将您的职业转换为 RDMBS。sqlite 很好。准备好为分析的每个“通过”或“阶段”添加新列。我认为这些列是“提示”，可以帮助您更好地完善您的目标。
*   编写一个脚本来生成跨您姓名的分布报告。这将帮助您尽可能地不断“标准化”它们。例如：“博士”=“医生”=“博士”。; “律师”=“律师”（并且可能=“合伙人”，但这会打开一罐蠕虫……）；CEO = 首席执行官 = 首席执行官等
*   编写一个脚本来遍历所有专业，并使用 soundex / metaphone 版本将它们转换为表示形式。我更喜欢 metaphone2 / doubele metaphone (http://en.wikipedia.org/wiki/Metaphone)。这将帮助您克服大多数拼写错误和发音相似的单词。
*   持续运行分发脚本以查找应合并到另一个概念中的项目组。

一般的攻击计划是，您需要不断分析您的数据，以找出从成百上千的职业到几十个职业的某种映射。

在原始 python 中执行此操作的另一种方法是使用曾经是 freebase 的软件，如 google 精炼 ( [http://code.google.com/p/google-refine/](http://code.google.com/p/google-refine/) )。这使您可以在应用程序中执行很多此操作。

无论如何，随着您不断完善，您将不得不处理大量的手动数据分析——而且您也不得不在某个时候放弃。如果你能在几个小时内把 80% 的职业推到 < 50 个组里，拍拍自己的后背，感到非常自豪。

# ant - 使用 xjc 和 ant 的布尔吸气剂

> ID：12711747
> 
> 赞同：0
> 
> 时间：2012-10-03T15:27:43.023
> 
> 标签：ant, cxf, xjc

我正在开发一个使用 xjc 从 XSD 生成 java 文件的项目。我面临的问题是它生成布尔 getter 作为 isXXX 而不是 getXXX。

```
<target name="jaxb">
    <delete dir="${generated-src}"/>
    <mkdir dir="${generated-src}"/>
    <xjc destdir="${generated-src}" extension="true">
        <schema dir="${schema-source}" includes="*.xsd"/>
        <binding dir="${schema-source}" includes="*.xjb"/>

    </xjc>
</target> 
```

提供参数如或
给出错误原因：com.sun.tools.xjc.BadCommandLineException: com.sun.tools.xjc.Options.parseArguments(Options.java:762) 处无法识别的参数 -enableIntrospection

我看到 maven 插件 CXF XJC Boolean Getter Plugin 但我不知道如何将它与 ant 一起使用。我正在使用 jaxb-impl -2.1.12 和 jaxb-xjc-2.1.12。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T05:16:26.330

参考：[https](https://jaxb.dev.java.net/issues/show_bug.cgi?id=631) ://jaxb.dev.java.net/issues/show_bug.cgi?id=631 。jaxb-xjc-2.1.12 修复了此问题，但仅对 jaxb 2.2 或更高版本有效。

但如果您使用 jaxb-xjc-2.2.5，则参数“-enableIntrospection”适用于此问题。

但是对于CXF XJC Boolean Getter Plugin，我不知道。当您使用命令行时，它应该可以工作。

我在使用DynamicClientFactory时遇到了同样的问题，我发现无法设置参数enableIntrospection或CXF XJC Boolean Getter Plugin。

# makefile - 带有“make”的调试标志

> ID：12711750
> 
> 赞同：2
> 
> 时间：2012-10-03T15:27:47.167
> 
> 标签：makefile, cmake

我使用 CMake 为稍后发出的 make 命令生成所有必要的文件。在 CMake 中，我可以将构建类型（和其他相关变量）设置为 debug 或 -g，然后在 make 生成可执行文件后使用 gdb 对其进行调试。我的问题是：我可以向 make 命令传递一个参数来告诉它在调试或发布模式下编译，而不必在 CMake 中设置它吗？如果我想在编译期间经常在发布和调试之间切换，我需要继续回到 CMake。如果我能避免这种情况，那就太好了。我希望这个问题很清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:35:33.607

您可以做的是使用源外系统，在该系统中您将使用具有不同 cmake 标志的 2 个不同构建目录。想象一下您的目录结构如下：

```
source/CMakeLists.txt
build-release/
build/debug/ 
```

当你创建你的环境时，你会这样做：

在`build-release`

```
cmake ../source -DCMAKE_BUILD_TYPE=Release 
```

在`build-debug`

```
cmake ../source -DCMAKE_BUILD_TYPE=Debug 
```

然后要在两种构建类型之间切换，您只需要更改目录并运行 make。

# c# - 构造函数中的 C# 虚拟方法调用 - 如何重构？

> ID：12711752
> 
> 赞同：3
> 
> 时间：2012-10-03T15:28:05.437
> 
> 标签：c#, .net

我有一个与数据库无关的游标操作的抽象类。从中派生出一些类，它们实现了用于处理特定于数据库的东西的抽象方法。

问题是，基类ctor需要调用一个抽象方法——当调用ctor时，它需要初始化数据库特定的游标。

**我知道为什么不应该这样做，我不需要*那个*解释！**

这是我的第一个实现，显然不起作用 - 这是教科书的“错误方式”。重写的方法访问派生类中的一个字段，该字段尚未实例化：

```
public abstract class CursorReader
{
    private readonly int m_rowCount;
    protected CursorReader(string sqlCmd)
    {
         m_rowCount = CreateCursor(sqlCmd); //virtual call !
    }
    protected abstract int CreateCursor(string sqlCmd);

    //...other (non-abstract) methods that assume a cursor exists
}

public class SqlCursorReader : CursorReader
{
    private SqlConnection m_sqlConnection;

    public SqlCursorReader(string sqlCmd, SqlConnection sqlConnection)
    {
        m_sqlConnection = sqlConnection;     //field initialized here
    }
    protected override int CreateCursor(string sqlCmd)
    {
        //uses not-yet-initialized member *m_sqlConnection*
        //so this throws a NullReferenceException
        var cursor = new SqlCursor(sqlCmd, m_sqlConnection); 
        cursor.Create();
        return cursor.Count();
    }
} 
```

我将跟进我尝试解决此问题的答案...

## 更新

重写的方法在数据库中`CreateCursor()`创建一个*实际*的游标。这对于类中省略的许多方法的正确运行至关重要。
`CreateCursor()`必须在基 ctor 中调用，以便类在 ctor 返回时处于一致状态。我稍微更新了上面的代码以反映这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:29:50.963

你总是可以有一个惰性属性来获取计数。

```
public abstract class CursorReader
{
    private int? m_rowCount;
    protected CursorReader()
    {

    }
    protected abstract int CreateCursor(string sqlCmd);
    protected int RowCount {
      get {
          if (m_RowCount == null)
          {
             m_RowCount = CreateCursor(sql);
          }
          return m_RowCount.Value;
      }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:31:27.950

怎么样：

```
public abstract class CursorReader
{
    private int? m_rowCount = null;
    private int rowCount { get { return m_rowCount = m_rowCount ?? CreateCursor(sqlCmd); } }
    protected CursorReader() { }
    protected abstract int CreateCursor(string sqlCmd);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:34:53.797

您可能需要将逻辑分成构造函数和初始化。

```
public abstract class CursorReader
{
    private readonly int m_rowCount;
    protected CursorReader()
    {

    }

    protected void Init()
    {
         m_rowCount = CreateCursor(sqlCmd); //virtual call !
    }

    protected abstract int CreateCursor(string sqlCmd);
} 
```

这将要求您调用`Init()`每个新实例，但这是我能想到的最佳解决方案。

请注意，`Init`可以像您提到的那样从派生类中调用它，但我认为从调用代码中调用它会更简单。有很多类型使用这种模式，尽管它需要更多代码，但这并不是一个坏习惯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T21:10:38.867

这是我正在考虑的第二个方向：

为了回避先有鸡还是先有蛋的问题，同时允许急切地创建光标，一些抽象是有序的。

在基类中，虚拟调用尝试访问派生类中尚未初始化的字段。因此，让我们提取在不同类中创建游标的功能。基类对它的创建方式不感兴趣，它只是更大算法中的一个步骤。

在我看来，这种方法的要点类似于[*策略模式*](http://en.wikipedia.org/wiki/Strategy_pattern)——主类知道算法的一般步骤，而这些步骤的实际实现细节是在运行时插入的。

```
public interface ICursorCreator {
    int CreateCursor(string sqlCmd);
}
public abstract class CursorReader
{
    private readonly int m_rowCount;
    protected CursorReader(string sqlCmd, ICursorCreator creator)
    {
         m_rowCount = creator.CreateCursor(sqlCmd); //no longer a virtual call 
    }
    //protected abstract int CreateCursor(string sqlCmd);//no longer needed

    //...other (non-abstract) methods that assume a cursor exists
}

//move the logic of creating a cursor in a separate class, and pass an instance of that to the base class. 
public SqlCursorCreator: ICursorCreator {
    private SqlConnection m_sqlConnection;
    public SqlCursorCreator(SqConnection conn){
        m_sqlConnection = conn;
    }
    public int CreateCursor(string sqlCmd)
    {
        var cursor = new SqlCursor(sqlCmd, m_sqlConnection); 
        cursor.Create();
        return cursor.Count();
    }
}

public class SqlCursorReader : CursorReader
{
    //private SqlConnection m_sqlConnection;//no longer needed

    //by saving the connection in the factory, it will be available when needed later
    public SqlCursorReader(string sqlCmd, SqlConnection sqlConnection)
        :this(sqlCmd, new SqlCursorCreator(sqlConnection))
    { }
    protected SqlCursorReader(string sqlCmd, SqlCursorCreator creator)
        : base(sqlCmd, creator)
    { }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T15:35:47.397

第一次尝试是将虚拟调用移出基本 ctor，但它有一些缺点：

*   m_rowCount 不再是只读的
*   派生类和所有未来派生类都需要调用基类 Initialize() 方法。

-

```
public abstract class CursorReader
{
    private int m_rowCount;//no longer read-only
    protected CursorReader()
    {
        //no virtual call here
    }
    protected abstract int CreateCursor(string sqlCmd);
    protected void Initialize()
    {
         //virtual call moved here
         m_rowCount = CreateCursor(sqlCmd); //virtual call !
    }
}
public class SqlCursorReader : CursorReader
{
    private SqlConnection m_sqlConnection;

    public SqlCursorReader(string sqlCmd, SqlConnection sqlConnection)
    {
        m_sqlConnection = sqlConnection;

        //the derived classes NEED to call the base class' Initialize() 
        Initialize();
    }
    protected override int CreateCursor(string sqlCmd)
    {
        //uses not-yet-initialized member m_sqlConnection
        var cursor = new CustomCursor(sqlCmd, m_sqlConnection); 
        return cursor.Count();
    }
} 
```

我特别不喜欢第二个子弹...

# mysql - 当所有内容都排序相同时，MySQL 非法混合排序规则

> ID：12711756
> 
> 赞同：2
> 
> 时间：2012-10-03T15:28:17.840
> 
> 标签：mysql, union, collation

我可以在 MySQL 中运行这个查询，它工作得很好。但是，我需要对 ctd.FULL_DESCIPTION （TEXT 数据类型）执行 LEFT 函数并只获取前 3600 个字符，当我尝试这样做时（使用 LEFT(ctd.FULL_DESCIPTION, 3600)）我收到错误：非法混合'UNION' 操作的排序规则 (utf8_general_ci,IMPLICIT) 和 (latin1_swedish_ci,COERCIBLE)

我能找到的关于这个错误的所有内容都表明我的一个专栏与其他专栏的整理方式不同。我在这个查询中的所有表上都做了一个 SHOW FULL COLUMNS，所有的整理都是使用 utf8_general_ci。数据库的默认排序规则也是 utf8。我在任何地方都找不到 latin1_swedish_ci 的来源。我错过了什么？

```
SELECT 
CONCAT(''73'',RIGHT(CONCAT(''000000'',cd.CHANGEID),6)) AS CHANGEID, 
LEFT(cd.TITLE,80) AS CHANGETITLE, FROM_UNIXTIME(cd.CREATEDTIME/1000) AS PRJDATE, 
LEFT(sd.NAME,10) AS STATUSNAME, wo.WORKORDERID AS WOID, LEFT(wo.TITLE,80) AS WOTITLE,
LEFT(au.FIRST_NAME,10) as TECHNAME, ctd.FULL_DESCRIPTION AS CHANGEDSC
FROM servicedesk.changedetails cd, servicedesk.incidenttochangemapping itcm, 
servicedesk.workorder wo, servicedesk.stagedefinition sd, servicedesk.workorderstates 
wos, servicedesk.sduser sdu, servicedesk.aaauser au, servicedesk.changetodescription ctd 
WHERE cd.CHANGEID = itcm.CHANGEID and itcm.WORKORDERID = wo.WORKORDERID and
cd.STAGEID = sd.STAGEID and wo.WORKORDERID = wos.WORKORDERID and wos.OWNERID = 
sdu.USERID and sdu.USERID = au.USER_ID and cd.CHANGEID = ctd.CHANGEID and
cd.STAGEID NOT IN (3,2) and cd.CATEGORYID IN 
(301,2701,3601,3602,3605,3606,4201,4202,4501,4502,4801) and wos.REQUESTTYPEID IN 
(301,601)
UNION
SELECT CONCAT(''73'',RIGHT(CONCAT(''000000'',cd.CHANGEID),6)) AS CHANGEID, 
LEFT(cd.TITLE,80) AS CHANGETITLE, FROM_UNIXTIME(cd.CREATEDTIME/1000) AS PRJDATE, 
LEFT(sd.NAME,10) AS STATUSNAME, '''' AS WOID, '''' AS WOTITLE, '''' AS TECHNAME, 
ctd.FULL_DESCRIPTION AS CHANGEDSC
FROM servicedesk.changedetails cd, servicedesk.stagedefinition sd,
servicedesk.changetodescription ctd
WHERE cd.STAGEID = sd.STAGEID and cd.CHANGEID = ctd.CHANGEID and cd.STAGEID NOT 
IN (3,2) and cd.CATEGORYID IN
(301,2701,3601,3602,3605,3606,4201,4202,4501,4502,4801) and NOT EXISTS (
SELECT NULL FROM servicedesk.incidenttochangemapping itcm WHERE cd.CHANGEID = 
itcm.CHANGEID) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:56:18.740

问题是系统变量 collat​​ion_connection 被设置为 latin1_swedish_ci，其他的都是 utf8_general_ci。将 collat​​ion_connection 设置为 utf8_general_ci 允许查询成功运行。

# scala - 将 List[ValidationNEL[String, Unit]] 转换为 ValidationNEL[String, Unit]

> ID：12711758
> 
> 赞同：3
> 
> 时间：2012-10-03T15:28:20.777
> 
> 标签：scala, scalaz

有没有一种标准方法可以将左侧展平为一个列表？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:58:40.320

我不确定您要做什么，但是该`Monoid`实例应该可以解决问题：

```
scala> List(
     |   println("test").successNel[String],
     |   "a".failNel[Unit],
     |   "b".failNel[Unit]
     | ).suml == Failure(NonEmptyList("a", "b"))
test
res0: Boolean = true 
```

哪里`suml`是一个方法，它被添加到任何包含`Monoid`实例的集合上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:00:51.767

好的，这是一些可以解决问题的代码：

```
scala> type MyValidationNEL[A] = ValidationNEL[String, A]
defined type alias MyValidationNEL

scala> val x: List[MyValidationNEL[Unit]] = 
     | List("a".failNel, "b".failNel)
x: List[MyValidationNEL[Unit]] = List(Failure(NonEmptyList(a)), Failure(NonEmptyList(b)))

scala> x.sequence
res57: MyValidationNEL[List[Unit]] = Failure(NonEmptyList(a, b))

scala> 
```

我已经从这个演示文稿中提取了部分示例： [http](http://www.scribd.com/doc/93526802/Bjarnason-Scalaz) ://www.scribd.com/doc/93526802/Bjarnason-Scalaz by Rúnar Bjarnason [http://scalaz.org](http://scalaz.org)

# sql - 插入表上的 IDENT_CURRENT

> ID：12711763
> 
> 赞同：1
> 
> 时间：2012-10-03T15:28:49.100
> 
> 标签：sql, sql-server

我对 SQL Server 相当陌生，我正在尝试创建一个触发器，该触发器将在执行更新语句时捕获表的标识列。我现在拥有的是：

```
SET @myVar = IDENT_CURRENT('inserted'); 
```

但这总是会返回`NULL`（根据[文档](http://msdn.microsoft.com/en-us/library/ms175098.aspx)，这意味着有错误或我没有权限）。

有没有人遇到过插入表的类似问题？调试的任何提示。我不确定这会是什么类型的权限问题。我也尝试过使用`@@IDENTITY`and `SCOPE_IDENTITY()`，但是在我设置后它们返回了表使用的标识`@myVar`（我觉得这有点奇怪）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:49:32.697

如果是 INSERT 或 UPDATE 的触发器，则将创建名为“INSERTED”的临时表。检查此列 INSERTED.your_identity_column。

# emacs - Emacs 24.2 中 CEDET 和 ECB 的状态

> ID：12711765
> 
> 赞同：22
> 
> 时间：2012-10-03T15:28:58.180
> 
> 标签：emacs, cedet, emacs-ecb

我对在 Emacs 24.2.1 中运行 CEDET 和 ECB 需要做什么感到有点困惑。

Emacswiki[有以下文本](http://www.emacswiki.org/CollectionOfEmacsDevelopmentEnvironmentTools)：

> **如何启用与 Emacs 合并的 CEDET 工具**
> 
> 在 Emacs 23.2 中，CEDET 被合并到主要的 Emacs 发行版中。CEDET 教程中解释的配置代码不再起作用。例如，您不能使用 (semantic-load-enable-gaudy-code-helpers) 来启用有用的功能。
> 
> TODO：请说明您需要哪些代码来加载 CEDET 提供的最有用的 IDE 工具
> 
> 我的 .emacs 中有一个基本配置可以使用以下内容：
> 
> ```
> (global-ede-mode 1)
> (require 'semantic/sb)
> (semantic-mode 1) 
> ```

*   **Q1：** CEDET 和 ECB 现在是否与 Emacs 捆绑在一起？如果是这样，为什么有一个单独的 Sourceforge 项目呢？
*   **Q2：**如何在 Emacs 24.2 中启用 CEDET 和 ECB？我还需要从各自的网站下载源代码并单独安装吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T20:33:30.897

你需要考虑几件事情：

*   CEDET 与 GNU Emacs 24.2 捆绑在一起，但它有点过时了......从功能的角度来看，来自 bzr 的 CEDET 1.1 或 CEDET 更好。我希望 Emacs 24.3 会有新版本的 CEDET
*   我有一个[ECB 的分支](http://alexott.blogspot.de/2012/06/ecb-fresh-emacscedet.html)，它适用于新的 CEDET（1.1 或 bzr）以及与 Emacs 捆绑的 CEDET - 但您需要手动安装它
*   [您可以使用以下](https://github.com/alexott/emacs-configs/blob/master/rc/emacs-rc-cedet.el)配置启用与 GNU Emacs 或来自 bzr 的 CEDET 捆绑的 CEDET ，对于 CEDET 1.1，您可以使用[以下配置](https://github.com/alexott/emacs-configs/blob/master/rc/emacs-rc-cedet-old.el)。

PS我会尝试在这里回答更多问题，或者您可以通过电子邮件直接给我写信

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T17:57:04.553

Q1：是与否：CEDET 是捆绑的，但 ECB 不是。虽然 CEDET 是捆绑的，但由于部分历史和部分技术原因，主要开发一直在 Emacs 存储库之外进行。

Q2：`(semantic-mode 1)`并且`(global-ede-mode 1)`应该足以启用 CEDET（无需`(require 'semantic/sb)`）。至于欧洲央行，因为它没有捆绑，...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-08T12:42:04.063

Emacs 代码浏览器很棒，但我花了几天时间才弄清楚如何在我当前的 Emacs 24.5.1 上设置它让我满意。希望以下说明将有助于使其更受欢迎。

第 1 步：在 Ubuntu 上：通过以下方式安装 texinfo：

```
sudo apt-get install texinfo 
```

这实际上安装了安装 ecb 所需的 makeinfo。Mac 可能已经安装了 makeinfo —— 我认为我不必在我的 Mac 上安装 texinfo。

第二步：使用el-get安装ecb。在“el-get emacs”上进行网络搜索以了解有关 el-get 的更多信息。使用 el-get 的优点是它会自动将 ecb 添加到您的 emacs 加载路径。

顺便说一句，使用 el-get 安装 ecb 似乎需要 15 分钟左右的时间。如果它告诉您它有一个活动进程正在运行，请耐心等待并且不要退出emacs。

el-get 完成后，将显示一条消息：ecb 已成功安装（或类似的东西）

第 3 步：将以下内容添加到您的 emacs 初始化文件（~/.emacs.d/init.el 或 ~/.emacs - 对这两个文件中的任何一个进行编辑）

```
;; start of ecb configuration/customization:
;;
(require 'ecb)

(setq stack-trace-on-error t)
(setq ecb-version-check nil)
(setq ecb-layout-name "left15")
(setq ecb-tip-of-the-day nil)
(setq ecb-primary-secondary-mouse-buttons 'mouse-1--mouse-2)

(setq ecb-source-file-regexps
  '((".*" .     (("\\(^\\(\\.\\|#\\)\\|\\(~$\\|\\.\\(pyc\\|elc\\|obj\\|o\\|class\\|lib\\|dll\\|a\\|so\\|cache\\)$\\)\\)")
             ("^\\.\\(emacs\\|gnus\\)$")))))

;;
;; disable global semantic idle scheduler.
;; it doesn't really seem to work all that well in automatically
;; reparsing buffers and it's actually intrusive when i'm typing:

(add-hook 'ecb-activate-hook
          '(lambda()
             (semantic-mode t)
             (ecb-maximize-window-methods)
             (setq global-semantic-idle-scheduler-mode nil)
             ))

(add-hook 'after-save-hook
          '(lambda()
             (when (bound-and-true-p ecb-minor-mode)
               ;; this is to get the methods buffer to refresh correctly.
               ;; semantic idle mode refresh doesn't seem to work all that     well.
               (run-at-time 1 nil 'semantic-force-refresh)
               )
             ))

(set-face-attribute 'ecb-default-general-face nil
                    :inherit 'default)

(set-face-attribute 'ecb-default-highlight-face nil
                    :background "#464646")

(set-face-attribute 'ecb-tag-header-face nil
                    :background "#464646")
;;
;; end of ecb configuration/customization 
```

第四步：重启emacs，在emacs中打开一个python源文件（作为测试示例）然后输入：mx ecb-activate

如果您在左侧有一个方法列表窗口，在右侧有源文件视图，那么您就可以正常工作了。

# javascript - 风向条件的正则表达式

> ID：12711769
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:29:19.243
> 
> 标签：javascript, regex

我想写一个正则表达式来检查风向条件。我想从用户那里得到这样的输入：

```
BETWEEN (45 AND 90) OR (270 AND 320) 
```

`BETWEEN`,当然是关键字`AND`，`OR`括号内可以有多个条件，`()`由`OR`

**例如：**

```
BETWEEN (45 AND 90)

BETWEEN (45 AND 90) OR (270 AND 320)

BETWEEN (15 AND 40) OR (170 AND 200) OR (270 AND 320)

BETWEEN (45 AND 90) OR (270 AND 320) OR (220 AND 240) OR (270 AND 320) 
```

数值应介于 0 和 360 之间。我想为用户提供输入多个条件的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:16:47.537

这将验证您的行并返回括号之间的匹配项。它还确保数字在 0 到 360 之间。

```
^BETWEEN(?:\s*(\((?:[0-2]?[0-9]?[0-9]|3[0-5][0-9]|360)\s+(?:AND)\s+(?:[0-2]?[0-9]?[0-9]|3[0-5][0-9]|360)\))\s*(?:(OR)(?!$))?)+$ 
```

成功：

```
BETWEEN (45 AND 90)
BETWEEN (45 AND 90) OR (270 AND 320)
BETWEEN (15 AND 40) OR (170 AND 200) OR (270 AND 320)
BETWEEN (45 AND 90) OR (270 AND 320) OR (220 AND 240) OR (270 AND 320) 
```

失败：

```
BETWEEN (361 AND 90)
BETWEEN (15 AND 40) OR (170 AND 459) OR (270 AND 320)
BETWEEN (45 AND 90) OR (270 AND 320) OR (220 AND 240) OR (270 AND 320) OR
BETWEEN (45 AND 90) OR (270 AND 320) OR (220 AND 240) OR (270 AND 320) ORR
BETWEEN (45 AND 90) OR (270 AND 320) OR (220 AND 240) OR (270 AND 320) OR 
```

它还利用非捕获组`(?: )`，以便仅`(### AND ###)`捕获 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:44:53.947

尝试这个：

```
/^BETWEEN \(([0-2]?[0-9]?[0-9]|3[0-5][0-9]|360) AND ([0-2]?[0-9]?[0-9]|3[0-5][0-9]|360)\)( OR \(([0-2]?[0-9]?[0-9]|3[0-5][0-9]|360) AND ([0-2]?[0-9]?[0-9]|3[0-5][0-9]|360)\))*$/ 
```

这很长，但它确保您只有`OR` **在**多个方向之间，而不是在结尾或开头。长度数字字符串还确保您只有从 0（或 000）到 360 的数字。

但是，您应该考虑是否将字符串拆分为`OR`和`AND`可能是一个更简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:32:45.527

这应该可以解决问题

`/BETWEEN ( ?\(\d+ (AND) \d+\)( OR)?)+/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:33:15.077

您可以使用此正则表达式来验证数据...

```
/BETWEEN (( OR )?\(\d+ AND \d+\))+/ 
```

**编辑**

制作一个**可以**解决您复杂需求的正则表达式是一个非常糟糕的主意，因为下次您访问正则表达式进行一些更改时，这将是一团糟。相反，

将代码分成不同的部分...

1>检查其格式是否正确 `BETWEEN (( OR)? \((\d+) AND (\d+)\))+`

2>现在通过访问组来检查各个值并与简单的`if-else`构造进行比较

# html - 一个在左侧重复的纹理，另一个在右侧重复的纹理

> ID：12711776
> 
> 赞同：2
> 
> 时间：2012-10-03T15:29:47.297
> 
> 标签：html, css, background-image, repeat

我不知道该怎么做，但我想要 2 个重复的纹理，一个向左重复，一个向右重复。

代替：

```
#header {
   background-image : Url('My_Two_Textures_Combined.png');
   background-repeat : repeat-x; /*Which repeats my joined textures a long the x axis*/
} 
```

我想：

```
#header {
   background-image : Url('My_Left_Texture');
   background-repeat : repeat-x-left; /*Which would ideally repeat my texture to the left on the x axis*/
   background-image : Url('My_Right_Texture');
   background-repeat : repeat-x-Right; /*Which would ideally repeat my texture to the right on the x axis*/
} 
```

我希望有办法做到这一点，因为我认为它在我的网站上看起来不错。我会尝试寻找其他方法来做到这一点，比如使用伪命令或其他东西。如果我发现任何东西，我会在这里发布！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T15:35:08.213

:before 和 :after 是一个很好的解决方案，但是您总是可以使用 CSS3 查看多个背景。显然，支持也有点有限： > IE8，但这也可以解决问题。

```
background-image: url(left.png), url(right.png);
background-position: left bottom, right bottom;
background-repeat: no-repeat; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:34:12.237

并排编写两个 div 的标题。每个都有自己的纹理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:41:10.670

你可以这样做：http: [//jsfiddle.net/9V2vE/9/](http://jsfiddle.net/9V2vE/9/)（用图像替换背景颜色）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:32:39.963

`:before`您可以使用像and之类的CSS 选择器`:after`，并将您的背景`#header:before {}`之一放在`#header:after {}`.

# iphone - 在我的 UIWebView 网站中调用应用程序文件

> ID：12711783
> 
> 赞同：0
> 
> 时间：2012-10-03T15:29:57.740
> 
> 标签：iphone, xcode, uiwebview

我有一个`UIWebView`应用程序，我正在加载一个使用 PHP、jQuery 和 Ajax 构建的网站。我有一些我调用的外部 jQuery 插件文件以及一些图像。

前任：`<script type="text/javascript" src="http://www.mydomain.com/jquery.easing.1.3.js"></script>`

这使得应用程序加载速度有点慢......是否可以将`jquery.easing.1.3.js`文件放入 Xcode 中的“支持文件”文件夹中，然后通过执行以下操作在我的网站上调用插件：

`<script type="text/javascript" src="file://supporting_files/jquery.easing.1.3.js"></script>`

如果是这样，从我的应用程序中获取这些文件的扩展名是什么？

**编辑（附加代码）：**

在我的`PHP`文件中：

`<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>` （连同其他外部文件）

```
<script type="text/javascript">
$(document).ready(function(){   
    $('#body').fadeIn(500);
});
</script>

<body id="body> 
```

所以页面在加载时会淡入......显然，这需要jQuery，当我尝试注入jQuery时，应用程序不会显示网站......

在 Xcode 中：

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    //load URL into webview
    [myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL
                                URLWithString:@"http://mydomain/file.php"]]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:33:59.290

你试过JS注入吗？您可以使用 UIWebView 的`stringByEvaluatingJavaScriptFromString`方法并加载本地 JS 文件。我用谷歌搜索了一个教程。这是： [http ://www.ziconic.com/2010/10/javascript-injection-using-uiwebview.html](http://www.ziconic.com/2010/10/javascript-injection-using-uiwebview.html)

# arrays - 将命令行参数转换为 Bash 中的数组

> ID：12711786
> 
> 赞同：203
> 
> 时间：2012-10-03T15:30:16.783
> 
> 标签：arrays, bash, shell

如何将命令行参数转换为 bash 脚本数组？

我想接受这个：

```
./something.sh arg1 arg2 arg3 
```

并将其转换为

```
myArray=( arg1 arg2 arg3 ) 
```

这样我就可以使用 myArray 在脚本中进一步使用。

这篇之前的 SO 帖子很接近，但没有讨论如何创建数组：[如何在 Bash 中解析命令行参数？](https://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash)

我需要将参数转换为常规的 bash 脚本数组；我意识到我可以使用其他语言（例如 Python），但需要在 bash 中执行此操作。我想我正在寻找“附加”功能或类似的东西？

更新：我还想问如何检查零参数并分配默认数组值，并且由于下面的答案，能够得到这个工作：

```
if [ "$#" -eq 0 ]; then
  myArray=( defaultarg1 defaultarg2 )
else
  myArray=( "$@" )
fi 
```

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2012-10-03T15:33:13.110

实际上，您的命令行参数*实际上*已经像一个数组了。至少，您可以将`$@`变量视为数组。也就是说，您可以将其转换为实际的数组，如下所示：

```
myArray=( "$@" ) 
```

如果您只想输入一些参数并将它们输入到`$@`值中，请使用`set`：

```
$ set -- apple banana "kiwi fruit"
$ echo "$#"
3
$ echo "$@"
apple banana kiwi fruit 
```

了解如何使用参数结构在 POSIX sh 中特别有用，它没有其他任何东西像数组。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-10-03T15:34:02.263

也许这可以帮助：

```
myArray=("$@") 
```

你也可以通过省略'in'来迭代参数：

```
for arg; do
   echo "$arg"
done 
```

将是等效的

```
for arg in "${myArray[@]}"; do
   echo "$arg"
done 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-07-16T23:37:14.803

实际上，可以使用`$1 $2 ...`etc访问参数列表。
这完全等同于：

```
${!i} 
```

因此，可以使用 set 更改参数列表，
并且`${!i}`是访问它们的正确方法：

```
$ set -- aa bb cc dd 55 ff gg hh ii jjj kkk lll
$ for ((i=0;i<=$#;i++)); do echo "$#" "$i" "${!i}"; done 
```

```
12 1 aa
12 2 bb
12 3 cc
12 4 dd
12 5 55
12 6 ff
12 7 gg
12 8 hh
12 9 ii
12 10 jjj
12 11 kkk
12 12 lll 
```

对于您的特定情况，可以使用它（不需要数组）在没有给出参数列表时设置参数列表：

```
if [ "$#" -eq 0 ]; then
    set -- defaultarg1 defaultarg2
fi 
```

这转化为这个更简单的表达式：

```
[ "$#" == "0" ] && set -- defaultarg1 defaultarg2 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-03-18T16:00:39.010

这是另一种用法：

```
#!/bin/bash
array=( "$@" )
arraylength=${#array[@]}
for (( i=0; i<${arraylength}; i++ ));
do
   echo "${array[$i]}"
done 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-12T10:09:26.113

更简单，您可以直接在`$@`;)

以下是如何直接从提示中传递参数列表：

```
function echoarg { for stuff in "$@" ; do echo $stuff ; done ; } 
```

```
 echoarg Hey Ho Lets Go
    Hey
    Ho
    Lets
    Go 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-20T18:11:45.580

双引号的重要性值得强调。假设一个参数包含空格。

代码：

```
#!/bin/bash
printf 'arguments:%s\n' "$@"
declare -a arrayGOOD=( "$@" )
declare -a arrayBAAD=(  $@  )

printf '\n%s:\n' arrayGOOD
declare -p arrayGOOD
arrayGOODlength=${#arrayGOOD[@]}
for (( i=1; i<${arrayGOODlength}+1; i++ ));
do
   echo "${arrayGOOD[$i-1]}"
done

printf '\n%s:\n' arrayBAAD
declare -p arrayBAAD
arrayBAADlength=${#arrayBAAD[@]}
for (( i=1; i<${arrayBAADlength}+1; i++ ));
do
   echo "${arrayBAAD[$i-1]}"
done 
```

输出：

```
> ./bash-array-practice.sh 'The dog ate the "flea" -- and ' the mouse.
arguments:The dog ate the "flea" -- and 
arguments:the
arguments:mouse.

arrayGOOD:
declare -a arrayGOOD='([0]="The dog ate the \"flea\" -- and " [1]="the" [2]="mouse.")'
The dog ate the "flea" -- and 
the
mouse.

arrayBAAD:
declare -a arrayBAAD='([0]="The" [1]="dog" [2]="ate" [3]="the" [4]="\"flea\"" [5]="--" [6]="and" [7]="the" [8]="mouse.")'
The
dog
ate
the
"flea"
--
and
the
mouse.
> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-24T18:34:57.743

数组和 $@ 几乎相同的并排视图。

代码：

```
#!/bin/bash

echo "Dollar-1 : $1"
echo "Dollar-2 : $2"
echo "Dollar-3 : $3"
echo "Dollar-AT: $@"
echo ""

myArray=( "$@" )

echo "A Val 0: ${myArray[0]}"
echo "A Val 1: ${myArray[1]}"
echo "A Val 2: ${myArray[2]}"
echo "A All Values: ${myArray[@]}" 
```

输入：

```
./bash-array-practice.sh 1 2 3 4 
```

输出：

```
Dollar-1 : 1
Dollar-2 : 2
Dollar-3 : 3
Dollar-AT: 1 2 3 4

A Val 0: 1
A Val 1: 2
A Val 2: 3
A All Values: 1 2 3 4 
```

# forms - Liferay 门户中的快速 Web 表单开发

> ID：12711787
> 
> 赞同：1
> 
> 时间：2012-10-03T15:30:16.700
> 
> 标签：forms, liferay, portlet, orbeon, xforms

我正在寻找可以部署在 liferay 门户中的快速 Web 表单开发技术。

我知道 orbeon xform 可以作为 portlet 部署在 liferay 门户中。是否还有其他竞争 Java 产品/技术。

这是用户 orbeon xform 作为 portlet 的[链接。](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-separate-deployment-with-portlets "使用 Portlet 的 XForms 单独部署")

# mysql - 包含最新元素的 GROUP BY

> ID：12711788
> 
> 赞同：0
> 
> 时间：2012-10-03T15:30:23.407
> 
> 标签：mysql, sql

通常我们使用 SELECT MAX(datetime) 和 GROUP BY(page_ID) 来获取最新的页面，但我不明白为什么它在这里不起作用。

我的以下查询应该只选择行 ID 75 和 77 但它选择 75 和 76 ： ![在此处输入图像描述](../Images/32fdac6ed2750fbc7db94f2051634d71.png)

```
SELECT ru.page_ID AS id, 
    pFrom.name AS name,
    UNIX_TIMESTAMP(ru.rating_time) AS action_date,                          
    ru.current_rank AS current_rank,        
    MAX(ru.rating_time)                     
FROM ranks_update ru
INNER JOIN pages pFrom
    ON ru.page_ID = pFrom.page_ID
WHERE ru.ranking_ID = :id_rk
    AND ru.page_ID IN ( ** subquery 1 **)
    AND ru.rating_time >= ( ** subquery  2 **)                      
GROUP BY ru.page_ID                             
ORDER BY ru.current_sum_vote DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:36:38.630

```
select ru.page_ID AS id, 
    pFrom.name AS name,
    UNIX_TIMESTAMP(ru.rating_time) AS action_date,                          
    ru.current_rank AS current_rank,        
    rum.MaxDate
from ranks_update ru
inner join(
    select page_ID, MAX(rating_time) as MaxDate
    from ranks_update
    WHERE ranking_ID = :id_rk
        AND page_ID IN ( ** subquery 1 **)
        AND rating_time >= ( ** subquery  2 **)   
    group by page_ID
) rum on ru.page_ID = rum.page_ID and ru.rating_time = rum.MaxDate
inner join pages pFrom on ru.page_ID = pFrom.page_ID
ORDER BY ru.current_sum_vote DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:31:52.537

一个促成因素是 MySQL 对`GROUP BY`. 在标准 SQL 中，您必须指定所有非聚合列（例如：）`GROUP BY ru.page_ID, pFrom.name, ru.currentRank, ru.current_sum_vote`。MySQL 将允许你不这样做，但它的行为是未定义的，很可能是随机的。如果您编写标准 SQL，您将获得可预测的结果。

# php - 如何从移动网站重定向到完整网站？

> ID：12711789
> 
> 赞同：1
> 
> 时间：2012-10-03T15:30:25.517
> 
> 标签：php, redirect, mobile, web

我试图弄清楚如何从我的移动网站重定向到完整的网站。当我创建一个按钮时，例如：“查看完整站点” - 它没有转到完整站点，而是返回到移动网站。我使用 Google 代码：[http](http://code.google.com/p/phpmobilizer/) ://code.google.com/p/phpmobilizer/从普通网站转换为移动网站。我想知道您是否知道一些可以从移动站点重定向到完整站点的 php 代码？

这是我目前正在开发的 [网站 http://www.roofpro.ca](http://www.roofpro.ca)

谢谢！克里斯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:39:45.337

如果用户想从移动版本转到桌面版本，只需设置一个会话。这样做：

```
<a href="/index.php?goToDesktop=1">Go to desktop version</a> 
```

然后，在 index.php 文件的顶部：

```
<?php
session_start();
if ($_GET['goToDesktop'] == 1)
{
  $_SESSION['desktop'] = 1;
}

// then in your auto-mobile-detect, check for the variable first
if ($_SESSION['desktop'] != 1)
{
  // check for mobile and redirect
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:35:18.223

您面临的问题是，一旦您使用移动设备进入主域，就会再次重定向回您的移动域。

您可以尝试以下方法：

如果用户想访问普通版本，设置一个会话变量并将他重定向到普通域。在普通域上，只要没有设置只访问普通域的会话变量，就只执行phpmobilizer。

# ruby-on-rails - Rails：在 ActiveRecord 中为可选关系建模

> ID：12711793
> 
> 赞同：1
> 
> 时间：2012-10-03T15:30:50.613
> 
> 标签：ruby-on-rails, activerecord

我想映射两个 Rails 模型之间的关系，其中一侧可以是可选的。让我更准确一点...

我有两个模型：`Profile`存储用户个人资料信息（姓名、年龄……）和`User`存储用户对应用程序的访问权限（电子邮件、密码……）的模型。

为了向您提供更多信息，`User`模型由 Devise gem 处理以进行注册/登录。

这是我的应用程序的场景：

1/ 当用户注册时，在表中创建了一个新行，并且在`User`表中存在一个等价的行`Profile`。这导致以下脚本：

```
class User < ActiveRecord::Base
    belongs_to :profile
end 
```

2/ 用户无需注册即可创建其个人资料（具有公共信息的公共个人资料），因此行中的行`Profile`不一定具有`User`等效行（这里是可选关系，`0..1`UML 中的关系）。

**问题：**`class Profile < AR::Base`可选的映射到的相应脚本是什么`User`？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:35:28.493

```
class Profile << ActiveRecord::Base
  has_one :user
end 
```

所有 AR 关系都是可选的（至少默认情况下 - 我不确定你是否可以坚持它们存在）。如果您询问`profile.user`未设置关系的位置，您就会`nil`回来。

# android - 设置正确的 Android Build Target、minSdkVersion、targetSdkVersion

> ID：12711796
> 
> 赞同：1
> 
> 时间：2012-10-03T15:30:52.580
> 
> 标签：android, sdk, target

我有一个实际上是为 7 级开始开发的应用程序。到目前为止，我有以下设置：

```
Android Build Target = 7 - for compiling
minSdkVersion=7, targetSdkVersion=7 - for GooglePlay filter 
```

现在事实证明，当使用这些设置时，应用程序在 14 级及更高级别上不再正常工作。虽然它不会崩溃，但仍有一些功能无法正常工作。

现在我发现将设置更改为：

```
Android Build Target = 12, minSdkVersion=7, targetSdkVersion=7 
```

解决了问题 - 该应用程序仍然可以安装在 7 级设备上并且可以毫无问题地运行。

离开这样的环境真的可以吗，还是有什么我看不到的风险？

一个 12 级编译的应用程序只在 7 级（或希望在所有其他 < 12 级）上运行而没有任何问题，这似乎很奇怪。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:45:24.303

您应该查看 manifest.xml 的文档。几点建议：

targetsdkversion 用于告诉框架你为你的应用考虑了哪个版本。最佳实践（以及谷歌强烈推荐的）是将其设置为最新版本（目前为 16）

-minsdkversion 是您的应用能够运行的最低 Android 版本。由于每个新版本都会添加新的 api，并且旧版本的 Android 无关紧要，因此非常有用。

- 从不使用 maxsdkversion。当新的平板电脑可以给你一些时间来开发你的应用程序的平板电脑版本但它不应该再使用时，它很有用。

所以是的， target=min=7 实际上是奇怪的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:57:07.073

只要您在 Android API 7 级设备上进行了足够的测试以确保应用程序正常运行，您的配置就可以了。

更正常的可能是设置 targetSdkVersion = Android Build Target

我在市场上有一个应用程序（从 2010 年开始），Android Build Target =4 和 minSDKVersion=3，它很好。但我也设置了 targetSdkVersion=4。

# parallel-processing - 并行创建子进程

> ID：12711799
> 
> 赞同：0
> 
> 时间：2012-10-03T15:31:00.977
> 
> 标签：parallel-processing, fork, parent-child

说我有这段代码

```
for (int n = 0; n < 4; ++n)
{
   if (fork())
   {
      // do something
      // if some condition is met
      // kill the parent
      // else, just return 
   }
   else
      printf("cannot get a process\n");
} 
```

我会创建 4 个并行运行的子进程吗？或者我会创建 4 个一个接一个地运行（因为父进程中的循环在子进程返回之前不会前进）？

谢谢

PS：我确实意识到这可能是一种不好的做法（即，杀死孩子的父母会导致僵尸四处走动，但现在让我们忽略它！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:29:10.267

将您的代码重写为：

```
for( int n = 0; n < 4; ++n ) {
    switch( fork()) { 
        case 0: /* child */
            /* Do stuff */
            exit( 0 );
        case -1:
            perror( "fork" );
            exit( 1 );
        default:  /* parent */
            /* do stuff, but don't wait() or terminate */
    } 
} 
```

孩子们确实会并行运行。尽管完全有可能一个孩子会快速运行并在下一次运行之前终止，但在这种情况下，孩子们实际上是在连续运行。如果父母等待孩子，他们将连续运行。另外，请注意，如果父级不在`wait()`这里，并且不在`wait`循环之外，则子级在终止时将成为僵尸。一旦父进程终止，僵尸子进程将被 init 继承，init 将等待它们并将它们从进程表中删除（因此它们将不再是僵尸。）

# javascript - Heroku API 适用于 curl，但我在使用 XMLHttpRequest 时遇到了问题。XHR、Heroku 还是我的错？

> ID：12711800
> 
> 赞同：2
> 
> 时间：2012-10-03T15:31:09.677
> 
> 标签：javascript, heroku, xmlhttprequest

我正在开发一个与[Heroku API](https://api-docs.heroku.com/)交互的 Chrome 扩展，但似乎使用`XMLHttpRequest`(XHR) 发出的请求的处理方式与`curl`. 特别是，Basic Auth 似乎没有与 XHR 一起使用，而是与 cookie 一起使用。

因此，如果我运行以下命令：

```
curl https://:yourapitokengoeshere@api.heroku.com/user -H "Accept: application/json" 
```

我得到了没有问题的正确结果。

另一方面，如果我在 Chrome JavaScript 控制台中为我的扩展页面运行以下命令，请求的成功将取决于我是否登录到 Heroku。

```
var xhr = new XMLHttpRequest()
xhr.open("GET", "https://api.heroku.com/user", false, "", "yourapitokengoeshere")
xhr.setRequestHeader("Accept", "application/json")
xhr.send() 
```

如果我已登录，我会得到`curl`与`xhr.responseText`. 如果我退出，我会得到`GET https://:yourapitokengoeshere@api.heroku.com/user 401 (Unauthorized)`. 我可以从网络选项卡中看到 cookie 被传递，Heroku 基于它的响应而不是 API 令牌作为传递的密码传递`XMLHttpRequest::open`。（我也尝试在`https://:yourapitokengoeshere@api.heroku.com/user`不使用用户名、密码参数的情况下打开，结果相同（如预期的那样，但值得一试））

如果您想尝试一下，我`manifest.json`的方法很简单：

```
{
  "name": "Testing Heroku.js",
  "version": "0.1",
  "background": {
    "page": "test.html"
  },
  "permissions": [
    "cookies",
    "https://api.heroku.com/"
  ],
  "manifest_version": 2
} 
```

并且`test.html`只是一个空文件，因此我可以打开检查视图并在扩展的上下文中访问控制台。在任何地方创建这两个文件并将封闭目录加载为未打包的扩展名。

**所以我的问题是**：我能做些什么吗？我错过了什么吗？Heroku API 有问题吗？或者`XMLHttpRequest`？我倾向于 API 行为不端……</p>

更一般地说，我有兴趣了解`XMLHttpRequest`通话和`curl`通话之间的区别。

根据我的研究，我似乎无法在`XMLHttpRequest`没有 cookie 的情况下使用，也无法更改用户代理以使其看起来像`curl`. 我还尝试了一些方法来使 curl 表现得像`XMLHttpRequest`（更改用户代理，使用相同的标题），但`curl`总是按预期工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:33:41.733

Heroku 支持团队的回答：

> 这是 Rails 的怪异之处。直到最近，该 API 还处理了 Web UI 等，因此在这种情况下假定 XHR 不是 API 请求，而是来自 API 网站上的最终用户的请求是正常的。
> 
> 希望在不久的将来，我们的 API 将不再与这种行为相关联，并且也将被宣布为适当的产品（带有适当的文档）。

所以，问题出在 API 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T20:22:11.790

您需要按如下方式生成 Heroku 密钥：

```
herokuKey = btoa(":" + herokuToken + "\n") 
```

然后使用适当的标题提出您的请求。

```
xhr = new XMLHttpRequest()
xhr.open("GET", "https://api.heroku.com/apps")
xhr.setRequestHeader("Accept", "application/vnd.heroku+json; version=3")
xhr.setRequestHeader("Authorization", herokuKey)
xhr.send() 
```

我从这篇文章中拼凑起来：[https](https://devcenter.heroku.com/articles/platform-api-quickstart) ://devcenter.heroku.com/articles/platform-api-quickstart并使用您的示例使其适应网络。

# sql-server-ce - 看不到 SQL Server Compact Edition 表的表内容等

> ID：12711805
> 
> 赞同：1
> 
> 时间：2012-10-03T15:31:17.960
> 
> 标签：sql-server-ce

我收到了一个`.sdf`与之关联的应用程序。我可以使用 Management Studio 连接到`.sdf`- 我可以看到表格以及我有兴趣查看的表格的列标题。

但是，没有显示表格数据的选项。有没有办法将表格导出到 Excel 或以其他方式查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:41:13.780

[您可以使用LINQPad](http://www.linqpad.net/)打开 .sdf 文件，也可以使用这个[不错](http://sqlcecmd.codeplex.com/)的 SQL CE 命令行工具。

CodePlex 上还有其他有用的附加组件和独立工具。查看[exportsqlce.codeplex.com](http://exportsqlce.codeplex.com/)和[sqlcetoolbox.codeplex.com](http://sqlcetoolbox.codeplex.com/)

# java - Xstream 和枚举解组：没有枚举常量

> ID：12711806
> 
> 赞同：5
> 
> 时间：2012-10-03T15:31:21.163
> 
> 标签：java, xml, enums, xstream

这是我要解析的 XML 的摘录：

```
<node version="1.0.7" errorCode="0" message=""> 
```

errorCode 实际上是一组固定的常量，所以我认为将其表示为 enum 是个好主意：

```
public enum ErrorCode {
 OK (0,"ok"),
 ERR (1,"Error"),
 BIGERR (2,"Big Error");

 private int code;

 private String name;

 ErrorCode(int code, String name) {...}
} 
```

我不知道如何将 xml 文件中的“0”与枚举中定义的各种常量映射...我不断得到一个没有枚举常量的转换异常：

```
com.thoughtworks.xstream.converters.ConversionException: No enum constant my.package.ErrorCode.0 
```

我不知道如何为值指定别名...（或者如果我必须实现自己的转换器。）。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-02T02:11:32.053

我用 EnumToStringConverter 完成了这个

```
Map<String, ErrorCode> map = new HashMap<>();
map.put(ErrorCode.OK.getCode(), Error.OK);
map.put(ErrorCode.ERR.getCode(), Error.ERR);
map.put(ErrorCode.BIGERR.getCode(), Error.BIGERR);
xstream.registerConverter(new EnumToStringConverter<>(ErrorCode.class, map); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:58:31.973

我有同样的问题，我通过创建一个 Converter 类解决了它。

```
public class MyEnumConverter implements Converter {

    public static MyEnumConverter getInstance() {
    return new MyEnumConverter();
    }

    public void marshal(Object value, HierarchicalStreamWriter writer,
            MarshallingContext context) {
         writer.setValue(((MyEnum) value).name());
    }

    //method that return the enum value by string
    //if value equals return the correct enum value
    public Object unmarshal(HierarchicalStreamReader reader,
            UnmarshallingContext context) {
        return MyEnum.get(reader.getValue()); //method get implemented in enum
    }

    @SuppressWarnings("rawtypes")
    public boolean canConvert(Class clazz) {
        return MyEnum.class.isAssignableFrom(clazz);
    }
} 
```

不要忘记注册转换器

```
xstream.registerConverter(MyEnumConverter.getInstance()); 
```

# wordpress - 将 wordpress 与 cakephp 集成

> ID：12711811
> 
> 赞同：3
> 
> 时间：2012-10-03T15:31:40.727
> 
> 标签：wordpress, cakephp, integration

我有一个使用 CakePHP 运行的网站。现在我需要包含一个 Wordpress 博客来与它一起运行。问题是我需要进行一些集成，比如用户登录，所以我试图包含应该提供集成的 Wordpress 文件。

我的服务器的文件系统结构是：

```
/root
    /app (cake's app directory)
        /webroot
        /...
    /blog (wordpress directory)
        /wp-admin
        /... 
```

Wordpress 的安装很顺利（我正在使用指向该文件夹的子域），所以现在我的两个站点都可以完美地自行运行。

然而，正如我上面提到的，我需要与他们创建一些集成，特别是当用户登录到我的 CakePHP 站点时登录 Wordpress 站点。我试过做[这个其他问题所说](https://stackoverflow.com/questions/7307722/access-wordpress-session-from-cake-php-site)的，但我收到以下错误：

```
Fatal error: Cannot redeclare __() (previously declared in /homepages/36/d******/htdocs/cake/basics.php:657) in /homepages/36/d********/htdocs/app/controllers/users_controller.php on line 60 
```

我正在尝试将应该将 Wordpress 功能带入 CakePHP （**require('../../blog/wp-blog-header.php');**）的代码放在**users_controller**中，但我什至不确定这是正确的地方。

我在其他地方读到过，有时不同的框架会声明具有相同名称的函数，这可能会导致冲突。

所以我不确定是否是这种情况，或者我只是将“集成代码”放在错误的位置。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T19:17:21.867

如果您可以将您的设计修改为拥有 2 个独立的域以及每个域中的一个框架，那么您将为自己省去很多麻烦（尤其是在未来升级时）。通过这种方式，最复杂的一点是在两者之间实现某种 SSO……但它应该比尝试合并 2 个框架（操作完全不同）更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T07:43:43.787

如果您想管理多域登录，那么您只能使用单点登录方法来做到这一点。您还可以使用 CAS Server 以及 Auth 来管理该功能。

我只是给你一些与 CAS 相关的小信息。

其中，您必须安装 CAS 服务器。并且有可用的 PHP 客户端。

成功安装 CAS 服务器后，您必须将您的 CAS 服务器应用程序设置为整个应用程序的主页。

因此，如果您首先访问您的应用程序，它将直接检查您的 cas 服务器上的会话。如果您没有登录，那么它会询问登录表单，您的 php 客户端将为您的应用程序管理登录会话。

成功登录后，您可以获取用户 id 的详细信息，并在此基础上比较您的 cakephp 应用程序数据库和 wordpress 数据库。

如果找到了 id，那么您只需要登录，否则它将重定向到 CAS 服务器。

# facebook - Facebook Open Graph：喜欢“粉丝页面”的帖子总是显示为来自页面而不是用户

> ID：12711812
> 
> 赞同：0
> 
> 时间：2012-10-03T15:31:49.190
> 
> 标签：facebook, facebook-like, facebook-opengraph

在尝试使用 PHP 代码（我很乐意使用 Javascript，但它表现出相同的行为）时，我进行了大量的搜索/阅读和修改，以在我的游戏“粉丝页面”上为特定帖子点赞。我的 Facebook API 调用返回成功，但“Like”总是来自页面而不是来自我的实际 Facebook 用户帐户。

我正在使用以下代码：

```
$post = array();  
$post['access_token'] = $sr->oauth_token; //from decoded $_REQUEST['signed_request'];  
$r = $this->facebook->api($fbPostID.'/likes', 'POST', $post); 
```

我知道我的帖子 ID 是有效的。我首先使用 PHP 存储它来发布帖子。（我在[这个线程](https://stackoverflow.com/questions/7507228/cant-get-access-token-for-a-facebook-page-for-an-application-that-has-all-the-r)的帮助下得到了这个工作）

我一开始并没有使用 access_token 集（因为 Facebook 文档声明发布点赞不需要任何参数），而是在我拼命尝试让点赞正确显示时添加了它。

我想到的一件事是：它表现出这种行为是因为我的 Facebook 帐户被指定为页面的管理员吗？如果是这样，我该如何在尚未发布的页面上使用非管理员帐户进行测试？

希望有人可以提供见解！

谢谢，
布拉德

# java - Insets.top , left, bottom, right 都为零

> ID：12711822
> 
> 赞同：2
> 
> 时间：2012-10-03T15:32:22.737
> 
> 标签：java, swing, layout, layout-manager, insets

这是我用来实例化 JFrame 的代码示例：

```
public class TestFrame{
public static void main(String[] args){
    JFrame frame = new JFrame();
    Insets insets = frame.getInsets();
    frame.setSize(new Dimension(insets.right + insets.left + 400, insets.bottom + insets.top + 400));
    System.out.println(String.format("Top = %d \nBottom = %d \nLeft = %d \n Right
            = %d", insets.top, insets.bottom, insets.left, insets.right));

    frame.setResizable(false);
    frame.setVisible(true);
}
} 
```

框架显示正常，但所有插图似乎都为零。我需要知道顶部标题栏的大小，因为我想要一个大小为 400x400 的内容窗格。

我在多个平台上对其进行了测试，在 windows 和 mac 上也发生了同样的事情。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:37:13.937

1.  如果您希望内容窗格精确为 400x400，那么我会考虑将其 preferredSize 设置为 400x400（尽管我不喜欢在内容窗格上强制使用首选尺寸，但在某些情况下它可能是可以接受的）。
2.  在设置了首选尺寸之后，在显示框架之前，调用`pack()`框架。

这是最干净和最简单的解决方案，您不必关心边框插图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T15:37:21.343

如果 contentPane 应该正好是 400 x 400，则创建一个类，将其重新调整为它的 preferredSize 并将其用作 contentPane：

```
class MyContentPane extends JPanel {
   public static final int PREF_W = 400;
   public static final int PREF_H = 400;

   public Dimension getPreferredSize() {
     return new Dimension(PREF_W, PREF_H);
   }
} 
```

或者更好：

```
class MyContentPane extends JPanel {
   public int prefW;
   public int prefH;

public MyContentPane(int prefW, int prefH) {
   this.prefW = prefW;
   this.prefH = prefH;
}

   public Dimension getPreferredSize() {
     return new Dimension(prefW, prefH);
   }
} 
```

正如其他海报所提到的，您必须`pack()`在顶级窗口上使用并使用布局管理器。

我自己不喜欢这样做，而是让各种组件的实际首选大小和容器的布局管理器为我做所有这些决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T15:39:51.897

你误解了你正在使用的东西，所以它看起来是“错误的”。

插图不是内容窗格之外“东西”的尺寸。它们类似于内容窗格周围的“边框”，不允许进行绘图。与边框不同，插图不重叠。

*窗口周围*装饰的大小不是由程序决定的。它由处理焦点和窗口导航的不同程序确定。该程序称为*窗口管理器*。它是处理“顶部标题栏”及其高度、字体等的窗口管理器。

要获得“精确大小”的程序，您需要向窗口管理器询问无框窗口，这可以在 Java 中完成。它不会在顶部有标题栏，也不会在边缘附近调整大小手柄、窗口命令菜单、要关闭的红色“x”或在桌面上移动窗口的方法（尽管您的程序可以重新定位自己如果这样写）。

另一种方法是在适当的尺寸和根窗格窗口中请求一个专有的“屏幕”，这有时是在游戏中完成的。这是一种限制性更强的处理方式，分辨率仅限于支持的屏幕尺寸。

如果您确实希望内容窗格具有特定大小，而不是整个窗口具有特定大小，请查看其他处理内容窗格首选大小的优秀答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T15:38:43.297

1.  在面板中制作您的用户界面。
2.  设置面板的首选尺寸。
3.  将面板添加到框架并调用`pack()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T16:17:26.417

*   `BorderLayout`(pre_implemented in the `JFrame API`) 忽略`Insets`,

*   大多数也`LayoutManager`忽略`Insets`，仅需要`AbsoluteLayout`，

基本和普通的东西

*   `JFrame`（和大部分）只能`Containers`返回`Insets`, `Bounds`,`Size`

    a) 从已经可见的容器中

    b) 通话后`JFrame(e.i.)#pack()`

*   那么在大多数情况下，设置为`Insets`, `Bounds`, `Size`,`XxxSize`而不是相反的，因为

    a) 大多数都`JComponents`可以将自己的和适当的返回`PreferredSize`给其父级，

*   但不包括

    一） `Graphics(2D)`，

    b) 对于空容器

    c) `JScrollPane`& ，在可以通过容器调整大小`JList / JTable`的情况下生成自己的代码怪物是矛盾的`JScrollPane`

# cocoa - NSTokenField 的 tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem: indexOfToken 总是零

> ID：12711825
> 
> 赞同：2
> 
> 时间：2012-10-03T15:32:34.827
> 
> 标签：cocoa, nstokenfield

我已经尝试了一个简单的第一个 NSTokenField 示例，它使用基于文档的 ARC 使用应用程序，使我的 Document 类成为 NSTokenFieldDelegate。它可以工作，但有一个原因：委托方法 tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem: 只看到 indexOfToken 的值为 0，即使我成功编辑了一个不是标记字符串中第一个标记的标记。我在 OS X 10.8.2 上使用 XCode 4.5 和 10.8 框架。

问题：为什么总是0？我希望它是用户正在编辑的字段中间接看到的标记数组 0 .. n - 1 中标记的索引。

要重现，如上所述启动项目并添加以下文本，然后使用 XIB 编辑器并将 NSTokenField 拖到文档窗口上，将令牌字段设置为文档的令牌字段，并使文档实例成为令牌字段的代表。

**文档.h**：

```
#import <Cocoa/Cocoa.h>

@interface Document : NSDocument <NSTokenFieldDelegate>
{
    IBOutlet NSTokenField *tokenField;  // of (Token *).
    NSMutableDictionary *tokens;        // of (Token *).
}
@end 
```

**令牌.h**：

```
#import <Foundation/Foundation.h>

@interface Token : NSObject
@property (strong, nonatomic) NSString *spelling;
- (id)initWithSpelling:(NSString *)s;
@end 
```

**令牌.m**：

```
#import "Token.h"

@implementation Token
@synthesize spelling;

- (id)initWithSpelling:(NSString *)s
{
    self = [super init];
    if (self)
        spelling = s;
    return self;
}

@end 
```

**文档.m**：

```
#import "Document.h"
#import "Token.h"

@implementation Document

- (id)init
{
    self = [super init];
    if (self) {
        tokens = [NSMutableDictionary dictionary];
    }
    return self;
}

...

#pragma mark NSTokenFieldDelegate methods

- (NSArray *)tokenField:(NSTokenField *)tokenField
completionsForSubstring:(NSString *)substring
           indexOfToken:(NSInteger)tokenIndex
    indexOfSelectedItem:(NSInteger *)selectedIndex
{
    NSLog(@"tokenField:completionsForSubstring:\"%@\" indexOfToken:%ld indexOfSelectedItem:",
          substring, tokenIndex);
    NSMutableArray *result = [NSMutableArray array];
    for (NSString *key in tokens) {
        //NSLog(@"match? \"%@\"", key);
        if ([key hasPrefix:substring])
            [result addObject:key];
    }
    return result;
}

- (id)tokenField:(NSTokenField *)tokenField representedObjectForEditingString:(NSString *)editingString
{
    NSLog(@"tokenField:representedObjectForEditingString:\"%@\"", editingString);
    Token *token;
    if ((token = [tokens objectForKey:editingString]) == nil) {
        token = [[Token alloc] initWithSpelling:editingString];
        [tokens setObject:token forKey:editingString];
        //NSLog(@"token %@", [token description]);
        NSLog(@"tokens %@", [tokens description]);
    }
    return token;
}

- (NSString *)tokenField:(NSTokenField *)tokenField displayStringForRepresentedObject:(id)representedObject
{
    NSString *spelling = [representedObject spelling];
    NSLog(@"tokenField:displayStringForRepresentedObject: = \"%@\"", spelling);
    return spelling;
}

@end 
```

令牌的输入以换行符或逗号字符终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:33:01.907

这绝对是您应该向 Apple 报告的事情。

为了确定 中已编辑标记的索引`NSTokenField`，我首先创建了 的子类，`NSTextView`这样我就有了一个自定义字段编辑器。（如果你走这条路，不要忘记将你的`NSTextView`实例设置为字段编辑器[`-[NSTextView setFieldEditor:]`](https://developer.apple.com/documentation/appkit/nstextview/1449156-fieldeditor?language=objc)。）然后，我将 子类化`NSTokenFieldCell`，覆盖[`-[NSCell fieldEditorForView:]`](https://developer.apple.com/documentation/appkit/nscell/1532763-fieldeditorforview?language=objc)到

1.  创建我的`NSTextView`子类的实例，
2.  将此`NSTextView`实例设置为`self`的委托，并且
3.  返回此`NSTextView`实例。

`tokenFieldCell:completionsForSubstring:indexOfToken:indexOfSelectedItem:`在您的子类中实现`NSTextView`：

```
- (NSArray *)tokenFieldCell:(NSTokenFieldCell *)tokenFieldCell completionsForSubstring:(NSString *)substring indexOfToken:(NSInteger)tokenIndex indexOfSelectedItem:(NSInteger *)selectedIndex
{
    // The tokenIndex passed to this function seems to be 0 in all cases, so we
    // need to determine the tokenIndex ourselves. The range returned by
    // NSText's selectedRange method treats non-plain-text tokens as if they
    // have unit length. So, for each token, subtract from the range location
    // either the token's length if it's a plain text token, or 1 if it's any
    // other style of token. Each time we subtract from the range location,
    // increment tokenIndex. When the range location becomes less than or equal
    // to 0, tokenIndex will be the index of the edited token.
    tokenIndex = 0;
    NSInteger rangeLocation = self.selectedRange.location;
    for (id token in tokenFieldCell.objectValue) {
        if ([self tokenFieldCell:tokenFieldCell styleForRepresentedObject:token] == NSPlainTextTokenStyle) {
            rangeLocation -= [self tokenFieldCell:tokenFieldCell displayStringForRepresentedObject:token].length;
        } else {
            rangeLocation--;
        }
        if (rangeLocation > 0) {
            tokenIndex++;
        } else {
            break;
        }
    }
} 
```

`selectedRange`这里的想法是利用计算an的事实，`NSTextView`假设非纯文本标记的长度为 1。通过从`selectedRange`位置减去标记的长度直到位置为负，我们可以确定标记索引。

请注意，您的`NSTextView`子类还必须实现[`tokenFieldCell:displayStringForRepresentedObject:`](https://developer.apple.com/documentation/appkit/nstokenfieldcelldelegate/1523804-tokenfieldcell?language=objc)并[`tokenFieldCell:styleForRepresentedObject:`](https://developer.apple.com/documentation/appkit/nstokenfieldcelldelegate/1523829-tokenfieldcell?language=objc)使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T19:02:27.397

这是我的快速解决方案，对我来说效果很好。只需将此添加到您的`viewController`.

```
 func tokenIndex() -> Int {
        var index = 0
        let range = self.tokenField?.currentEditor()?.selectedRange
        let rangeLocation = range?.location ?? 0

        let string = self.tokenField?.currentEditor()?.string as NSString?
        if let subString = string?.substring(to: rangeLocation) as NSString? {
            let maxLimit = subString.length

            for i in 0..<maxLimit {
                //each token is represented as NSAttachmentCharacter,
                //so count it till current selected range
                if subString.character(at: i) == unichar(NSAttachmentCharacter) {
                    index += 1
                }
            }
        }

        return index
    } 
```

# visual-studio - 使用 Visual Studio 调试 TypeScript 代码

> ID：12711826
> 
> 赞同：82
> 
> 时间：2012-10-03T15:32:36.147
> 
> 标签：visual-studio, typescript

有没有办法在 Visual Studio 中调试 TypeScript 源代码（而不是调试生成的 javascript）？

来自 TypeScript 语言规范：

> TypeScript 可以选择提供源映射，从而启用源级调试。

因此，我希望能够在 ts 代码中放置断点并能够对其进行调试，但它不起作用。我没有在规范中找到任何其他关于调试的提及。我应该做些什么来完成这项工作吗？也许“可选”这个词暗示我需要做一些事情才能让它工作......有什么建议吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-03T15:34:09.600

**VS2017 及更高版本的当前答案**

自 VS2017 以来，直接在 Visual Studio 中调试 Typescript 成为可能。从[文档](https://docs.microsoft.com/en-us/visualstudio/javascript/debug-nodejs?view=vs-2019)中：

> 您可以使用 Visual Studio 调试 JavaScript 和 TypeScript 代码。您可以设置和命中断点、附加调试器、检查变量、查看调用堆栈以及使用其他调试功能。

还有关于[在 Visual Studio 中调试 Typescript/Asp.NET Core 的](https://docs.microsoft.com/en-us/visualstudio/javascript/tutorial-aspnet-with-typescript?view=vs-2019)其他资源。

也可以在[Visual Studio Code](https://code.visualstudio.com/docs/typescript/typescript-debugging)中调试打字稿：

> Visual Studio Code 通过其内置的 Node.js 调试器支持 TypeScript 调试，也通过 Debugger for Chrome 等扩展支持客户端 TypeScript 调试。

**VS早期版本的原始答案：**

您可能无法在 VS 中进行调试，但您可以在某些浏览器中进行调试。Aaron Powell 刚刚发表了一篇关于让断点在 Chrome Canary 中工作的博客：[https](https://www.aaron-powell.com/posts/2012-10-03-typescript-source-maps/) ://www.aaron-powell.com/posts/2012-10-03-typescript-source-maps/ 。

总结（非常简要地）Aaron 所说的，您使用编译器上的开关在与源代码相同的目录中`-sourcemap`生成一个文件。`*.js.map`在支持[源映射](https://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)的浏览器中（Chrome Canary，可能是最近的 Firefox 构建，因为它们是 Mozilla 的想法），然后您可以像调试`.ts`普通`.js`文件一样调试源。

该博客以“希望 Visual Studio 或 IE（或两者）团队也选择 Source Maps 并添加对它们的支持”结束。- 这表明它还没有发生。

**更新：**

随着 TypeScript 0.8.1 的发布，Visual Studio 现在也可以进行 Source Map 调试：

[https://blogs.msdn.com/b/typescript/archive/2012/11/15/announcing-typescript-0-8-1.aspx](https://blogs.msdn.com/b/typescript/archive/2012/11/15/announcing-typescript-0-8-1.aspx)

来自公告：

> **调试** TypeScript 现在支持源代码级调试！源映射格式作为一种调试语言的方式越来越受欢迎，这种语言可以转换为 JavaScript，并受到各种浏览器和工具的支持。在 0.8.1 版本中，TypeScript 编译器正式支持源映射。此外，新版 TypeScript for Visual Studio 2012 支持使用源映射格式进行调试。从命令行，我们现在完全支持使用 --sourcemap 标志，它输出与 JavaScript 输出相对应的源映射文件。此文件将允许在启用源映射的浏览器和 Visual Studio 中直接调试原始 TypeScript 源。要在 Visual Studio 中启用调试，请在使用 TypeScript 项目创建 HTML 应用程序后从下拉列表中选择“调试”。

**更新**：

WebStorm 还增加了对通过 SourceMaps 进行调试的支持：http: [//blog.jetbrains.com/webide/2013/03/webstorm-6-0-released-adds-typescript-debugging-with-source-maps-fresh-ui-以及更多/](http://blog.jetbrains.com/webide/2013/03/webstorm-6-0-released-adds-typescript-debugging-with-source-maps-fresh-ui-and-much-more/)

> 首先，WebStorm 允许使用 TypeScript、CoffeeScript 和 Dart 等现代语言进行更智能、更简化的 Web 开发。除了为这些语言提供一流的代码编辑器外，WebStorm 6 还提供：
> 
> 将这些高级语言自动编译/转换为所有支持平台上的浏览器可识别的语言。使用源映射对 TypeScript、Dart 或 CoffeeScript 进行全功能调试。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-11T00:46:19.137

使用 VS2013 Typescript 应用程序，我无需更改 web.config 中的任何内容。我在 ts 文件中放了一个断点并在 IE 中调试，然后断点在 TypeScript 中停止了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-03T05:51:08.100

这现在已在 VS 2017 中修复，因此您可以直接在 Visual Studio 和 typescript 中进行调试。

只需在 *.ts 文件中设置断点，它就会被命中。

它会在 VS 而不是 IE 中调试，就像你在调试 c# 一样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-06T05:52:20.373

使用 Visual Studio 调试 typescript 可以使用正确的设置。（在以前的 VS 版本中，我有时会遇到问题，下面是它与 VS 2015 CTP 6 的工作方式）

1.  首先，**确保**在将 typescript 编译为 javascript 时创建源映射。所以你应该在每个 xxx.js 附近都有一个 xxx.js.map 文件。

    通过在 Visual Studio 之外运行 typescript 编译器获取源映射不会造成任何困难，在 tsc 命令行添加

    ```
    --sourcemap %1.ts 
    ```

    默认情况下，您的 gulp 脚本通常会创建源映射。

2.  **在 Visual Studio 中配置您的 Web 应用程序**。

    将**Internet Explorer**设置为启动浏览器。我得到它只与 IE 一起工作，不认为任何其他浏览器都可以工作。

    在项目属性中，转到“Web”选项卡并配置底部的“调试器”部分：**禁用所有调试器**！这是违反直觉的，您可能会看到以下错误消息：

    *您已尝试启动调试器，但根据您在 Web 属性页面上的当前调试设置，没有要调试的进程。This occurs when the "Don't open a page. Wait for a request from another process" option is selected, and ASP.NET debugging is disabled. 请检查 Web 属性页面上的设置，然后重试。*

    正如错误消息所说，Web 属性顶部的“开始操作”应该是另一个选项，例如“**当前页面**”。

    现在或以后在 Visual Studio 中的 ts 代码中设置**断点**。

    按**F5**

虽然您可以使用 Visual Studio 编辑器来调试和编辑 ts 文件，但“编辑并继续”将不起作用，目前没有可以重新加载 js 和 js.map 文件并继续的浏览器。（如果我错了，请纠正我，我会很高兴。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-31T15:55:34.310

在我的任何机器上使用 VS2013 Update 3 时，TypeScript 调试对我都不起作用。经过一番挫折，我决定尝试更新到 VS2013 Update 4 CTP。最后断点在VS中被击中！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-14T10:16:18.737

简短回答：重新启动 Visual Studio

背景：我有 2 个 Visual Studio 2015 实例，其中有两个使用 TypeScript 的不同项目。第一个启动的实例没有正确调试，第二个没有。所有项目设置都是相同的。我终于重新启动了第一个实例，然后它调试了 TypeScript（最后）。

# mongodb - MongoDB：使用洋葱架构，我的域/核心层是否需要引用 MongoDB dll？

> ID：12711830
> 
> 赞同：1
> 
> 时间：2012-10-03T15:32:45.577
> 
> 标签：mongodb, onion-architecture

MongoDB 有自己的 ObjectId 类型，它用作默认主键。我正在尝试设置一个使用 Onion Architecture 设计的应用程序，并将 MongoDB 作为基础设施层中的持久性引擎。如果我的 POCO 类是在我的域层中定义的，但使用 MongoDB 的 ObjectID 类型作为主键，这会迫使我将 MongoDB 添加为对我的域层的依赖吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:06:48.560

除了最外层，您不需要在任何地方引用 MongoDB。在洋葱架构中，数据持久性被认为是基础设施。我会让 MongoDB 成为实现域模型中定义的存储库接口的存储库实现的一部分。

MongoDB 文档有一个`_id`唯一标识它的字段。 [见这里](http://www.mongodb.org/display/DOCS/Object+IDs)：

> 该`_id`值可以是除数组以外的任何类型，只要它是唯一的即可。如果您的文档有一个不可变的自然主键，我们建议您使用它`_id`而不是自动生成的 id。

不要让你的持久性机制左右你！

# c++ - 如何使模板原型继承，以便所有特化继承相同的类/接口？

> ID：12711834
> 
> 赞同：1
> 
> 时间：2012-10-03T15:33:02.283
> 
> 标签：c++, templates, inheritance

如何创建一个模板原型来声明要从接口继承的类？
我希望该类的所有特化都从同一个接口继承。

就像是：

```
template <typename T>
class A : public BaseInterface { }

template <>
class A<int> { } //somehow still inherit from the interface "BaseInterface" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:38:07.107

你不能。模板不是“类”。它们是“类模板”（此处的模板不是 C++ 术语，而是英语术语）。它们是构建实际类的骨架。所以当你说：

```
template <typename T>
class A : public BaseInterface { } 
```

您实际上并没有声明一个类，而是为将要构建的某些类提供了规则。此外，当您专门化模板时

```
template <>
class A<int> { } //somehow still inherit from the interface "BaseInterface" 
```

您**明确**表示您希望它针对此专业化表现不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:36:08.410

您不能限制显式专业化。但它们可能源自 BaseInterface：

```
template <> class A<int>: public BaseInterface {...} 
```

# javascript - 淘汰赛 JSON 未更新

> ID：12711839
> 
> 赞同：0
> 
> 时间：2012-10-03T15:33:17.430
> 
> 标签：javascript, json, knockout.js

在下面的小提琴中：http: [//jsfiddle.net/Xa9ez/](http://jsfiddle.net/Xa9ez/)

有一个名为 jsonData 的变量，它使用 KO 函数 toJSON。

为什么更新其他变量时它不更新？或者甚至在调用 goCaps 函数时？

脚本：

```
function AppViewModel() {

    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Bertington");

    this.fullName = ko.computed(function() {
        return this.firstName() + " " + this.lastName();    
    }, this);

    this.capitalizeLastName = function() {
        var currentVal = this.lastName();        // Read the current value
        this.lastName(currentVal.toUpperCase());

        this.data = ko.toJSON(this);

    };    
    this.data = ko.toJSON(this);
}
var appViewModel = new AppViewModel()
// Activates knockout.js

ko.applyBindings(appViewModel ); 
```

html

```
<p>Last name: <strong data-bind="text: lastName"></strong></p>

<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>

<p>Full name: <strong data-bind="text: fullName"></strong></p>

<button data-bind="click: capitalizeLastName">Go caps</button>
<p>JSON: <strong data-bind="text: data"></strong></p>
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:54:55.720

你必须使`this.data`observable：

```
function AppViewModel() {

    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Bertington");

    this.fullName = ko.computed(function() {
        return this.firstName() + " " + this.lastName();    
    }, this);

    this.capitalizeLastName = function() {
        var currentVal = this.lastName();        // Read the current value
        this.lastName(currentVal.toUpperCase());

        this.data(ko.toJSON(this));

    };    
    this.data = ko.observable(ko.toJSON(this));
} 
```

[更多关于 observables](http://knockoutjs.com/documentation/observables.html)的信息。

# c# - 我可以使用类型化工厂设施返回基于（枚举）参数的实现吗？

> ID：12711840
> 
> 赞同：12
> 
> 时间：2012-10-03T15:33:21.570
> 
> 标签：c#, dependency-injection, castle-windsor, typed-factory-facility

不确定这是否可能。

我需要根据枚举值返回服务的正确实现。所以手工编码的实现看起来像：

```
public enum MyEnum
{
  One,
  Two
}    

public class MyFactory
{
  public ITypeIWantToCreate Create(MyEnum type)
  {
    switch (type)
    {
       case MyEnum.One
           return new TypeIWantToCreate1();
           break;
       case MyEnum.Two
           return new TypeIWantToCreate2();
           break;
       default:
           return null;       
    }    
  }
} 
```

返回的实现具有额外的依赖项，需要通过容器注入，因此手动工厂将无法工作。

这可能吗？如果可以，注册会是什么样子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T09:45:25.073

如果将您的组件注册到将枚举值指定为组件 id 的容器中是一种选择，您也可以考虑这种方法

```
 public class ByIdTypedFactoryComponentSelector : DefaultTypedFactoryComponentSelector
 {
      protected override string GetComponentName(MethodInfo method, object[] arguments)
      {
            if (method.Name == "GetById" && arguments.Length > 0 && arguments[0] is YourEnum)
            {
                 return (string)arguments[0].ToString();
            }

            return base.GetComponentName(method, arguments);
      }
} 
```

比 ByIdTypedFactoryComponentSelector 将用作您的类型化工厂的选择器

```
public enum YourEnum
{
    Option1
}

public IYourTypedFactory
{
    IYourTyped GetById(YourEnum enumValue)
}

container.AddFacility<TypedFactoryFacility>();
container.Register
(       
    Component.For<ByIdTypedFactoryComponentSelector>(),

    Component.For<IYourTyped>().ImplementedBy<FooYourTyped>().Named(YourEnum.Option1.ToString()),

    Component.For<IYourTypedFactory>()
    .AsFactory(x => x.SelectedWith<ByIdTypedFactoryComponentSelector>())
    .LifeStyle.Singleton,

    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:49:54.527

看起来这是可能的。看看这个：

[例子](http://kozmic.pl/2010/03/11/advanced-castle-windsor-ndash-generic-typed-factories-auto-release-and-more/)

您将需要创建一个 ITypedFactoryComponentSelector 实现来解析调用，并将其注册到容器中以仅解析您感兴趣的类的调用。

# jquery - 通过单独的 id 在一个页面上嵌入多条推文

> ID：12711841
> 
> 赞同：1
> 
> 时间：2012-10-03T15:33:30.753
> 
> 标签：jquery, twitter, oembed

我正在尝试通过 twitter 的新指南找到一种方法，该指南允许我将来自不同用户的特定推文动态嵌入到网页中。我查看了[Twitter 的 oEmbed 端点](https://dev.twitter.com/docs/embedded-tweets)，这似乎是我所需要的，但是我不确定如何通过一个 ajax 调用来实现这一点。

我显然不想对 Twitter 服务器进行大量调用并最大化，所以有没有办法在 ajax 调用中运行一个循环来尝试不同的推文 id 而不会多次访问服务器？

还是有另一种我不熟悉的方法有人可以建议？

我希望这是一个足够清楚的问题，感谢您花时间阅读。

干杯

```
$(document).ready(function(){ 
var output = $("#output");
var ids = [ php code to build an array of IDs];

for(i=0; i<ids.length; i++){
   $.ajax({
 url: 'https://api.twitter.com/1/statuses/oembed.json?id=' + ids[i] + '&align=center&callback=?',
 dataType: 'json',
 success: function(data) {
  $(data.html).appendTo(output);
    }
      });
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:49:07.033

对于任何有兴趣的人，我完成此操作的方法是寻找嵌入的推文 html 块引用并将其存储到数据库中，然后将它们一一抽出...

例如..

```
<blockquote class="twitter-tweet"><p>RT @<a href="https://twitter.com/nosherwan">nosherwan</a>: Enyojs of webOS fame is now open source and looks like a serious contender for multi platform application development</p>&mdash; Enyo (@EnyoJS) <a href="https://twitter.com/EnyoJS/status/263664668839645184" data-datetime="2012-10-31T15:32:10+00:00">October 31, 2012</a></blockquote> 
```

一次添加脚本标签。

```
<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script> 
```

希望它可以帮助某人。

# c# - PictureBox Grid 并在单击时选择单个单元格

> ID：12711843
> 
> 赞同：2
> 
> 时间：2012-10-03T15:33:33.377
> 
> 标签：c#, winforms

我目前正在使用图片框和网格。我已经能够在图片框的顶部成功设置一个网格。现在我正在寻求帮助/指导，以编码一种选择每个单独单元格的方法。如何选择单个单元格并将其颜色显示为蓝色？这是指生命游戏。

**网格代码：**

```
 private void pictureBox1_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            int numOfCells = 200;
            int cellSize = 10;
            Pen p = new Pen(Color.Black);

            for (int i = 0; i < numOfCells; i++)
            {
                // Vertical
                g.DrawLine(p, i * cellSize, 0, i * cellSize, numOfCells * cellSize);
                // Horizontal
                g.DrawLine(p, 0, i * cellSize, numOfCells * cellSize, i * cellSize);
            }
        } 
```

蓝色单元格是单击的单元格：

![在此处输入图像描述](../Images/1a1a0b1cb1ef5219ef7d06d5b9e73fa7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T06:54:33.160

您将需要添加一些结构来处理单元格，而不是处理paint 方法中的所有内容。这是我拼凑起来的一个快速而肮脏的应用程序。它使用两个简单的类：Cell 和 Grid，其中包含一个 2D 单元格数组。

这里要理解的主要是表单类中的 Grid.SetDimentions 方法和 Form1_MouseDown 事件，它将鼠标位置映射到世界坐标。

**细胞类：**

```
using System.Drawing;

public sealed class Cell
{
    public bool Hover { get; set; }
    public enum CellState { Inactive, Intermediate, Active }
    public CellState State { get; private set; }
    public int Column { get; private set; }
    public int Row { get; private set; }
    public Rectangle Bounds { get; private set; }

    public Cell (int column, int row, CellState state = CellState.Inactive)
    {
        this.Column = column;
        this.Row = row;
    }

    public void SetDimensions (Rectangle bounds)
    {
        this.Bounds = bounds;
    }

    public void RotateState ()
    {
        switch (this.State)
        {
            case CellState.Active: { this.State = CellState.Inactive; break; }
            case CellState.Inactive: { this.State = CellState.Intermediate; break; }
            case CellState.Intermediate: { this.State = CellState.Active; break; }
        }
    }
} 
```

**网格类：**

```
using System.Drawing;

public class Grid
{
    public Cell [,] Cells { get; private set; }
    public Size Size { get; private set; }
    public Rectangle Bounds { get; private set; }

    public Grid (Size gridSize)
    {
        this.Size = gridSize;
        this.Cells = new Cell [this.Size.Width, this.Size.Height];

        for (int r=0; r < this.Size.Height; r++)
        {
            for (int c=0; c < this.Size.Width; c++)
            {
                this.Cells [c, r] = new Cell(c, r);
            }
        }
    }

    public void SetDimensions (Rectangle bounds)
    {
        Size size;

        this.Bounds = bounds;
        size = new Size((int) (((float) bounds.Width) / ((float) this.Size.Width)), (int) (((float) bounds.Height) / ((float) this.Size.Height)));

        for (int r=0; r < this.Size.Height; r++)
        {
            for (int c=0; c < this.Size.Width; c++)
            {
                this.Cells [c, r].SetDimensions(new Rectangle(bounds.Left + (size.Width * c), bounds.Top + (size.Height * r), size.Width, size.Height));
            }
        }
    }
} 
```

**表格：**

```
using System;
using System.Drawing;
using System.Windows.Forms;

public partial class Form1: Form
{
    private Grid World { get; set; }

    public Form1 ()
    {
        this.InitializeComponent();

        this.World = new Grid(new Size(50, 50));
        this.World.SetDimensions(new Rectangle(0, 0, this.pictureBox1.ClientSize.Width, this.pictureBox1.ClientSize.Height));
    }

    private void Form1_Shown (object sender, EventArgs e)
    {
        this.pictureBox1.Invalidate();
    }

    private void Form1_Resize (object sender, EventArgs e)
    {
        this.World.SetDimensions(new Rectangle(0, 0, this.pictureBox1.ClientSize.Width, this.pictureBox1.ClientSize.Height));

        this.pictureBox1.Invalidate();
    }

    private void pictureBox1_MouseMove (object sender, MouseEventArgs e)
    {
        for (int r=0; r < this.World.Size.Height; r++)
        {
            for (int c=0; c < this.World.Size.Width; c++)
            {
                this.World.Cells [c, r].Hover = this.World.Cells [c, r].Bounds.Contains(e.X, e.Y);
            }
        }

        this.pictureBox1.Invalidate();
    }

    private void pictureBox1_MouseClick (object sender, MouseEventArgs e)
    {
        for (int r=0; r < this.World.Size.Height; r++)
        {
            for (int c=0; c < this.World.Size.Width; c++)
            {
                if (this.World.Cells [c, r].Bounds.Contains(e.X, e.Y))
                {
                    this.World.Cells [c, r].RotateState();
                }
            }
        }
    }

    private void pictureBox1_Paint (object sender, PaintEventArgs e)
    {
        for (int r=0; r < this.World.Size.Height; r++)
        {
            for (int c=0; c < this.World.Size.Width; c++)
            {
                if (this.World.Cells [c, r].State == Cell.CellState.Active)
                {
                    e.Graphics.FillRectangle(System.Drawing.Brushes.Blue, this.World.Cells [c, r].Bounds);
                }
                else if (this.World.Cells [c, r].State == Cell.CellState.Inactive)
                {
                    e.Graphics.FillRectangle(System.Drawing.Brushes.White, this.World.Cells [c, r].Bounds);
                }
                else if (this.World.Cells [c, r].State == Cell.CellState.Intermediate)
                {
                    e.Graphics.FillRectangle(System.Drawing.Brushes.Gray, this.World.Cells [c, r].Bounds);
                }

                if (this.World.Cells [c, r].Hover)
                {
                    e.Graphics.DrawRectangle(System.Drawing.Pens.Red, this.World.Cells [c, r].Bounds);
                }
                else
                {
                    e.Graphics.DrawRectangle(System.Drawing.Pens.Black, this.World.Cells [c, r].Bounds);
                }
            }
        }
    }
} 
```

# android - Android上小目标的hittesting策略

> ID：12711844
> 
> 赞同：1
> 
> 时间：2012-10-03T15:33:34.603
> 
> 标签：android, hittest

我正在移植一个桌面应用程序，该应用程序需要类似鼠标的精确输入到 Android，并且正面临一个我不熟悉的设计决策：在屏幕上点击测试小目标。

我遇到的问题是经常出现多个目标聚集到一个小区域的情况，它们的距离小于我可以轻松用手指准确触摸的距离。我可以放大图像，然后我可以区分它们，但要求是没有缩放的触摸能力。

我正在考虑以下两种策略：

1) 使命中测试区域比原始对象大50~100%，或者

2）检查命中测试区域和实际触摸事件位置之间的距离（<阈值）

我还应该考虑其他常用的做法吗？

# c# - 除非我单步执行，否则循环不会执行

> ID：12711845
> 
> 赞同：0
> 
> 时间：2012-10-03T15:33:40.367
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, playing-cards

首先让我对我糟糕的语法和拼写表示抱歉。

我有一个 MVC3 项目，它创建了一个 Deck 并向其中添加了 52 张卡。然后我添加了一个 shuffle 函数，该函数仅在**我逐步通过**shuffle 方法中的循环时才起作用。

在我的类 Deck 中，我创建了一个包含 52 个 PlayingCard 对象的数组。Deck 有一个将数组复制到我的视图中显示的列表的方法，它还有一个打乱列表的方法。

不容易解释，但代码只运行**一次**，除非我单步执行。

我的甲板模型中的洗牌方法。

```
 public void Shuffle()
 {
    for (int i = 0; i < 51; i++)
    {
        PlayingCard temp;
        temp = myDeck[i];
        Random rnd = new Random();
        int randomNr = rnd.Next(51);
        myDeck[i] = myDeck[randomNr];
        myDeck[randomNr] = temp;
    }   
} 
```

**随机播放后的输出，无需单步执行：**

***4 方块**1 颗 2 颗 3 颗 4 颗 5 颗 6 颗 7 颗 8 颗 9 颗 10 颗 11 颗 12 颗 13颗 1 黑桃 2 黑桃 3 黑桃 4 黑桃 5 黑桃 6 黑桃 7 黑桃 8 黑桃 9 黑桃 10 黑桃 11黑桃 12 黑桃 13 黑桃 1 梅花 2梅花 3梅花 4梅花 5梅花 6梅花 7梅花 8梅花 9梅花 10梅花 11梅花 12梅花 13梅花 1菱形 2菱形 **12菱形** 3菱形 5菱形 6菱形 7菱形 8菱形 9菱形 10钻石 11 钻石 13 钻石 *

**单步执行 15 次后的输出：**

*2 黑桃 3 梅花 5 黑桃 3 菱形 12 菱形 13 红桃 11 红桃 1 黑桃 6 梅花 5 菱形 1 梅花 12 红桃 7 梅花 13 黑桃 2 梅花 10 红桃 3 黑桃 4 黑桃 3 红桃 6 黑桃 7 黑桃 8 黑桃 9 黑桃 10 黑桃 11 黑桃12 黑桃 8 心 7 心 1 心 2 心 4 梅花 5 梅花 9 心 6 心 8 梅花 9 梅花 10 梅花 11 梅花 12 梅花 13 梅花 1 方块 2 方块 4 心 4 方块 5 心 6 方块 7 方块 8 方块 9 方块 10 方块11 颗钻石 13 颗钻石*

**单步执行整个循环后的输出：**

*10 红桃 6 梅花 8 红桃 5 红桃 5 梅花 7 方块 5 黑桃 11 方块 12 黑桃 12 梅花 8 方块 5 方块 1 梅花 9 黑桃 10 方块 12 颗红桃 8 黑桃 9 梅花 13 梅花 6 颗红桃 1 黑桃 11 黑桃 1 红桃 12 方块 4 梅花3 个梅花 8 个梅花 9 个钻石 7 个梅花 2 个梅花 3 个钻石 1 个钻石 7 黑桃 10 个黑桃 2 个红桃 6 个黑桃 13 个黑桃 4 个黑桃 2 个黑桃 6 个钻石 4 个红心 2 个钻石 4 个钻石 11 个梅花 7 个红心 11 个红桃 3 个黑桃 3 个红心 10 个梅花 13 个红心9颗心13颗钻石*

如图所示，循环仅在我单步执行时运行。我尝试了不同的循环，创建了一个新项目，将随机播放功能移至控制器，没有任何帮助。

任何人有任何想法我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:07:43.483

我已经围绕这个创建了一个示例应用程序，并且移到`Random rnd = new Random()`循环之外给了我我期望的行为。

在我看来，它似乎只洗了一张牌的原因是因为随机生成的值与整个循环的值相同。

# joomla2.5 - Joomla 2.5 组件：com_categories 出现时没有工具栏按钮

> ID：12711847
> 
> 赞同：1
> 
> 时间：2012-10-03T15:33:53.013
> 
> 标签：joomla2.5, joomla-extensions

我为 Joomla 2.5 开发了一些组件。我遵循官方教程：
[http ://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories)

现在，我为我的组件添加了类别功能，但是当我在管理面板中打开类别菜单时，我看不到添加、删除、编辑按钮......
这是帮助程序的代码：

```
abstract class youtubeHelper
{
        public static function addSubmenu($submenu) 
        {
                JSubMenuHelper::addEntry(JText::_('COM_YOUTUBE_SUBMENU_ITEMS'),
                                         'index.php?option=com_youtube', $submenu == 'items');
                JSubMenuHelper::addEntry(JText::_('COM_YOUTUBE_SUBMENU_CATEGORIES'),
                                         'index.php?option=com_categories&view=categories&extension=com_youtube',
                                         $submenu == 'categories');

                // set some global property
                $document = JFactory::getDocument();
                $document->addStyleDeclaration('.icon-48-youtube ' .
                                               '{background-image: url(../media/com_youtube/images/tux-48x48.png);}');

                if ($submenu == 'categories') 
                {
                        $document->setTitle(JText::_('COM_YOUTUBE_ADMINISTRATION_CATEGORIES'));
                }
        }
} 
```

我需要做什么来添加按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:04:16.683

您不需要在代码中添加任何东西，您需要`access.xml`在组件中添加文件。

如果您查看`com_content`文件夹，您将看到此文件。

将此文件复制到您的组件文件夹并为您的组件编辑它。

# spring-mvc - WebApplicationContext 与 ApplicationContext

> ID：12711848
> 
> 赞同：1
> 
> 时间：2012-10-03T15:33:57.480
> 
> 标签：spring-mvc

在我的 Spring-MMVC 应用程序中，

我有一个与调度程序 servlet 对应的**xx-servlet.xml - 定义我的 Web 层 bean/类并导入另一个定义所有持久层 bean/服务的 context.xml。**

在 xx-servlet.xml 中，

定义了一个`ApplicationContextProvider`实现`ApplicationcontextAware`接口的类。

并在需要时从（不使用）`@Component`获取这些 bean 的实例并注释了我所有的 bean（表示对象）。`ApplicationContext``WebApplicationContext`

那么，在这种情况下，我的 bean 的范围是什么？

另外，如果我使用会`WebApplicationContext`怎样？

最好的做法是什么……使用`ApplicationContext`or `WebApplicationContext`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:30:19.653

WebApplicationContext向标准应用程序上下文（仅提供 Singleton 和 Prototype 范围）添加了[更多范围（请求、会话、全局会话）。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-factory-scopes-other)如果您不指定 bean 范围，默认情况下它将是 Singleton 范围。

最佳实践是，如果您在 Web 环境中，则应该使用 WebApplicationContext，这样您就可以使用那些额外的范围和[ServletContextAware](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/WebApplicationContext.html) bean。但是，如果您不使用它们，则取决于您。

除此之外，大多数 spring mvc 基础设施 bean 都需要一个 WebApplicationContext。

# c# - 将站点名称传递给 javascript 函数时出现未终止的字符串常量错误

> ID：12711849
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:33:57.977
> 
> 标签：c#, javascript

当用户单击网格上的编辑按钮时，我将站点名称和订单 ID（隐藏值）传递给 javascript 函数。我收到一个站点名称的“未终止的字符串常量错误”。我不知道那有什么问题。请看下面的图片。![在此处输入图像描述](../Images/4eda91d83b479e394804b96ddd3d28c5.png)

```
protected void gvCktMap_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        try
        {
            if (Session["TaskID"] != null)
            {
                int intTskID = Convert.ToInt32(Session["TaskID"]);
                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    e.Row.Attributes.Add("class", "taskListRow");
                }
                CheckBox chkBoxOne = (CheckBox)e.Row.FindControl("chkSelect");
                Label lblREJ = (Label)e.Row.FindControl("lblREJ");
                // Label lblDesc = (Label)e.Row.FindControl("lblDesc");
                Label lblStatus = (Label)e.Row.FindControl("lblTaskStatus");
                Label lblDaysUntillPTD = (Label)e.Row.FindControl("lblDaysUntilPTD");
                Label lblPastDue = (Label)e.Row.FindControl("lblPastDue");
                if (lblStatus != null)
                {
                    if (lblStatus.Text.Trim().ToLower() == "complete" || lblStatus.Text.Trim().ToLower() == "not_required")
                        chkBoxOne.Enabled = false;
                }
                //Do Not move this code...We are selecting orderids based on checkbox enable or not....//Babu//
                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    LinkButton lnkSiteName = (LinkButton)e.Row.FindControl("lnkSiteName");
                    Label lblServiceOrderNumber = (Label)e.Row.FindControl("lblServiceOrderNumber");
                    LinkButton lnkCMNumber = (LinkButton)e.Row.FindControl("lnkCORECMNumber");
                    LinkButton lnkSiteCMTicketNumber = (LinkButton)e.Row.FindControl("lnkSiteCMTicketNumber");
                    LinkButton lnkSMNumber = (LinkButton)e.Row.FindControl("lnkSMTicketNumber");
                    LinkButton lnkSiteSMTicketNumber = (LinkButton)e.Row.FindControl("lnkSiteSMTicketNumber");
                    Label lblorderId = (Label)e.Row.FindControl("lblorderId");
                    Label lblsId = (Label)e.Row.FindControl("lblsId");
                    Label lblsiteId = (Label)e.Row.FindControl("lblsiteId");
                    Label lbllob = (Label)e.Row.FindControl("lblLOB");
                    Label lblclarifyAccountNumber = (Label)e.Row.FindControl("lblclarifyAccountNumber");
                    Label lblTaskStatus = (Label)e.Row.FindControl("lblTaskStatus");
                    LinkButton lnkCustomerName = (LinkButton)e.Row.FindControl("lnkCustomerName");
                    LinkButton lnkProjectName = (LinkButton)e.Row.FindControl("lnkProjectName");
                    LinkButton lnkRoeID = (LinkButton)e.Row.FindControl("lnkPreSaleAssociation");
                    ImageButton detailsbutton = (ImageButton)e.Row.FindControl("btnDetails");
                    LinkButton lnkpendingdependencies = (LinkButton)e.Row.FindControl("lnkPendingDependencies");
                    LinkButton lnknotes = (LinkButton)e.Row.FindControl("lnkNotes");
                    LinkButton lnkuserpendingdependencies = (LinkButton)e.Row.FindControl("lnkUserPendingDependences");
                    LinkButton lnkPendJeopCount = (LinkButton)e.Row.FindControl("lnkPendJeopCount");
                    LinkButton lnkPreSaleAssociation = (LinkButton)e.Row.FindControl("lnkPreSaleAssocation");
                    LinkButton lnktaskowner = (LinkButton)e.Row.FindControl("lnkTaskOwner");
                    LinkButton lnkConfigs = (LinkButton)e.Row.FindControl("lnkConfigFiles?");
                    LinkButton lnkCircuits = (LinkButton)e.Row.FindControl("lnkCircuits");
                    LinkButton lnkOptics = (LinkButton)e.Row.FindControl("lnkOptics");
                    ImageButton btnMixedorder = (ImageButton)e.Row.FindControl("btnMixedOrd");
                    ImageButton edit_button = (ImageButton)e.Row.FindControl("edit_button");
                    if (edit_button != null)
                        edit_button.OnClientClick = "StoreOrderIDAndLOB('" + lblorderId.Text + "','" + lbllob.Text + "')";

                    if (lnkConfigs != null)
                        lnkConfigs.OnClientClick = "StoreConfigs('" + lblsId.Text + "','" + lnkSiteName.Text.Replace("'", "&apos") + "')";

                    if (lnktaskowner != null)
                        lnktaskowner.OnClientClick = "StoreTaskOwner('" + lnkSiteName.Text.Replace("'", "&apos") + "','" + lnktaskowner.Text.Replace("'", "&apos") + "','" + lblorderId.Text + "','" + lbllob.Text + "','" + lblTaskStatus.Text + "')";

                    if (lnkSiteName != null)
                        lnkSiteName.OnClientClick = "StoreLnkSiteName('" + lblorderId.Text + "','" + lnkSiteName.Text.Replace("'", "&apos") + "')";

                    if (detailsbutton != null)
                        detailsbutton.OnClientClick = "Storedetails('" + lnkSiteName.Text.Replace("'", "&apos") + "')";

                    if (lnkCMNumber != null)
                        lnkCMNumber.OnClientClick = "StoreCMNumber('" + lnkCMNumber.Text + "', '" + lblorderId.Text + "')";

                    if (lnkSiteCMTicketNumber != null)
                        lnkSiteCMTicketNumber.OnClientClick = "StoreSiteCMTicketNumber('" + lnkSiteCMTicketNumber.Text + "', '" + lblorderId.Text + "')";

                    if (lnkSMNumber != null)
                        lnkSMNumber.OnClientClick = "StorelnkSMNumber('" + lnkSMNumber.Text + "', '" + lblorderId.Text + "')";

                    if (lnkSiteSMTicketNumber != null)
                    {
                        lnkSiteSMTicketNumber.OnClientClick = "StorelnkSiteSMTicketNumber('" + lnkSiteSMTicketNumber.Text + "', '" + lblorderId.Text + "')";
                    }
                    if (lnkpendingdependencies != null)
                    {
                        lnkpendingdependencies.OnClientClick = "StoreOrderId('" + lblorderId.Text + "')";
                    }
                    if (lnknotes != null)
                    {
                        lnknotes.OnClientClick = "StoreNotes('" + lblorderId.Text + "','" + lnkSiteName.Text.Replace("'", "&apos") + "')";
                    }
                    if (lnkuserpendingdependencies != null)
                    {
                        lnkuserpendingdependencies.OnClientClick = "StoreUserpendingdependencies('" + lblorderId.Text + "','" + lnkSiteName.Text.Replace("'", "&apos") + "')";
                    }
                    if (lnkPendJeopCount != null)
                    {
                        lnkPendJeopCount.OnClientClick = "StorePendJeopCount('" + lblorderId.Text + "','" + lnkSiteName.Text.Replace("'", "&apos") + "')";
                    }
                    if (lnkProjectName != null)
                    {
                        lnkProjectName.OnClientClick = "Storeprojectname('" + lnkProjectName.Text.Replace("'", "&apos") + "')";
                    }
                    if (lnkCustomerName != null)
                    {
                        lnkCustomerName.OnClientClick = "StoreCustomername('" + lnkCustomerName.Text.Replace("'", "&apos") + "')";
                    }
                    if (lnkPreSaleAssociation != null)
                    {
                        lnkPreSaleAssociation.OnClientClick = "StorePreSaleAssociation('" + lblorderId.Text.Trim() + "','" + lblsId.Text.Trim() + "','" + lblTaskStatus.Text.Trim() + "')";
                    }
                    if (lnkCircuits != null)
                    {
                        lnkCircuits.OnClientClick = "StoreCircuitsInfo('" + lblorderId.Text + "','" + lblsiteId.Text + "','" + lbllob.Text + "','" + lblclarifyAccountNumber.Text + "','" + lnkSiteName.Text.Replace("'", "&apos") + "')";
                    }
                    if (lnkOptics != null)
                    {
                        lnkOptics.OnClientClick = "StoreOpticsInfo('" + lblsId.Text + "','" + lnkSiteName.Text.Replace("'", "&apos") + "')";
                    }
                    if (btnMixedorder != null)
                    {
                        btnMixedorder.OnClientClick = "StoreMixedorder('" + lblServiceOrderNumber.Text + "')";
                    }
                }
            }
        }
        catch (Exception ex)
        {
            log4net.Config.XmlConfigurator.Configure();
            log.Warn("Logging:" + ex);
        }
    } 
```

如何解决此错误？

```
function StoreOrderIDAndLOB(sender) {
//get handle to parent row:
var oRow = sender;
while (oRow && oRow.tagName.toLowerCase() !== "tr")
    oRow = oRow.parentNode;

//something might be wrong, sanity check:
if (!oRow)
    return;

//build array of all possible elements we have to look into:
var elements = [];
var arrSpans = oRow.getElementsByTagName("span");
for (var i = 0; i < arrSpans.length; i++)
    elements.push(arrSpans[i]);

//site name is the sender, grab its contents:
var siteName = "";
for (var i = 0; i < elements.length; i++) {
    var element = elements[i];
    if (element.id.indexOf("lnkSiteName") >= 0) {
        siteName = element.innerHTML;
        break;
    }
}
siteName = sender.innerHTML;

//find the order ID by looking for matching element:
var orderId = "";
for (var i = 0; i < elements.length; i++) {
    var element = elements[i];
    if (element.id.indexOf("lblorderId") >= 0) {
        orderId = element.innerHTML;
        break;
    }
}

//here you can use the values same way you use in the original code...
alert("site name: " + siteName + " and order ID is " + orderId); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:06:47.383

一个值包含双引号就足够了，整个事情都会中断，因为在这种情况下输出本身会被破坏。

不要将原始值发送给 JavaScript 函数，而是让函数找到它们需要的值。我将举一个函数的例子，你可以在所有其他函数中应用相同的逻辑，并拥有干净的代码而没有引号风险。

JavaScript：

```
function StoreLnkSiteName(sender) {
    //get handle to parent row:
    var oRow = sender;
    while (oRow && oRow.tagName.toLowerCase() !== "tr")
        oRow = oRow.parentNode;

    //something might be wrong, sanity check:
    if (!oRow)
        return;

    //build array of all possible elements we have to look into:
    var elements = [];
    var arrSpans = oRow.getElementsByTagName("span");
    for (var i = 0; i < arrSpans.length; i++)
        elements.push(arrSpans[i]);

    //site name is the sender, grab its contents:
    var siteName = sender.innerHTML;

    //find the order ID by looking for matching element:
    var orderId = "";
    for (var i = 0; i < elements.length; i++) {
        var element = elements[i];
        if (element.id.indexOf("lblorderId") >= 0) {
            orderId = element.innerHTML;
            break;
        }
    }

    //here you can use the values same way you use in the original code...
    alert("site name: " + siteName + " and order ID is " + orderId);
} 
```

那么所需的 C# 就是：

```
lnkSiteName.OnClientClick = "StoreLnkSiteName(this)"; 
```

无需更换，无需担心报价。

[现场测试用例](http://jsfiddle.net/PvT3D/)。

如果您决定使用 jQuery，JavaScript 代码可以大大简化，但也可以使用纯 JS 来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:37:13.297

这意味着您的参数传递不正确。你可以粘贴你的代码吗？您是否尝试过设置断点以查看通过了什么？

# gwt - 绘制后 GWT 更改图表选项

> ID：12711854
> 
> 赞同：0
> 
> 时间：2012-10-03T15:34:06.433
> 
> 标签：gwt, google-visualization

是否可以更改已绘制图表（即柱形图）的某些图表选项。

我想要完成的总体思路是，我创建了一个包含图表的小部件，并且在图表已经绘制并显示之后，我希望能够在单击时更改图表的背景小部件，在我的例子中，它扩展了 FocusPanel 以便能够监听 clickevents（它包含的不仅仅是 1 个图表）

我在柱状图中看不到任何方法可以设置选项或获取此图表的选项（能够创建一个更改了一个选项的新图表并保持其余选项相同）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:54:45.127

唯一的方法是使用更新的选项重新绘制图表。根据谷歌图表工具[文档](https://developers.google.com/chart/interactive/docs/reference#visdraw)：

> 画（）
> 
> 在页面上绘制可视化。在幕后，这可以是从服务器获取图形或使用链接的可视化代码在页面上创建图形。**您应该在每次数据或选项更改时调用此方法**。该对象应在传递给构造函数的 DOM 元素内绘制。
> 
> 绘制（数据 [，选项]）

# amazon-web-services - 为 jee6 应用程序选择云

> ID：12711856
> 
> 赞同：0
> 
> 时间：2012-10-03T15:34:10.643
> 
> 标签：amazon-web-services, java-ee-6, jboss7.x, openshift

我们正在 jboss 7.1 中构建一个 jee6 应用程序，现在我们需要部署一个生产基础设施；我对如何使用云中的服务有疑问，虽然我的第一个想法是使用 openshift 来部署 java 应用程序，但我想知道你的想法，如果这是一个好主意，或者我是否应该使用 ec2，即使我没有配置生产环境的经验？我还想知道 mysql (open shift) 服务是否适合生产应用程序，或者我是否应该使用 amazon rds 或其他数据库服务？最后，如何在轮班中管理文件？amazon s3 还是其他简单的方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T22:55:00.363

Openshift 非常适合开发和 QA，因为您真的不必担心很多基础设施方面，包括

1.  安装
2.  配置
3.  修补/升级
4.  管理
5.  负载均衡

由于各种原因，我也喜欢 Openshift。它们为您提供选择语言/选择框架的选项。

是否已准备好投入生产，这取决于您如何构建应用程序。Openshift 实际上将其工作负载放在 EC2 上，因此您可以获得与 EC2 类似的 SLA。

如果您能够创建部署在不同节点上的高可用性应用程序，则可以消除单点故障，但如果 EC2 关闭（关闭所有节点），我不确定 Openshift 如何处理这些场景。

在所有公共 PaaS 产品中，Openshift 绝对是我的最爱。

在这种环境下，MySQL 应该与 JBoss 没有什么不同。适用于 JBoss 的一切也适用于 MySQL。

祝你好运，请在此处发布您的发现。

# logging - 将 AWS 用于应用程序日志记录数据库

> ID：12711858
> 
> 赞同：5
> 
> 时间：2012-10-03T15:34:17.993
> 
> 标签：logging, amazon-web-services, error-logging

我目前正在开发一个生成大量日志数据的大型 Web 应用程序。因为我们没有将所有事件记录到数据库的基础设施，所以我们将它们写入文件。不幸的是，这使得在日志中搜索特定事件变得非常困难，并且无法生成频率报告。

在试图弄清楚如何实现更好的数据库日志记录时，我发现了 Amazon 的服务。特别是[SimpleDB](http://aws.amazon.com/simpledb/)和[DynamoDB](http://aws.amazon.com/dynamodb/)。SimpleDB 的用例之一是[记录](http://aws.amazon.com/simpledb/usecases_logging/)，但后来它指出

> Amazon SimpleDB 旨在存储相对少量的数据...

这似乎是矛盾的。以下是我的问题：

1.  这些数据库服务是否适合记录应用程序事件？
2.  是否适合从日志数据生成报告？
3.  我会使用时间戳作为我的主键吗？
4.  这种服务有缺点还是我应该考虑的其他事情？

**2018 年 6 月 13 日更新：**此后我使用 SimpleDB 记录大型应用程序的应用程序数据。关键是将日志划分为与它们生成的时间段相对应的域（例如每天），以确保它们不会超出其限制。然后设置 CRON 作业以定期删除旧域。该解决方案运行良好并且易于搜索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T16:19:51.943

我的回答是基于我在生产环境中使用 SimpleDB 的经验。

1.  我每天将数千个应用程序事件记录到 SimpleDB。
2.  我们有研究人员定期从 SimpleDB 中提取日志数据，他们从未抱怨过。我不确定在 SimpleDB 本身上运行报告查询，但我不明白为什么这会是一个问题，当我运行查询时，它们对我来说总是很快。
3.  SimpleDB 索引所有列，没有“主键”。
4.  我个人不喜欢使用为与 SimpleDB 交互而构建的第三方工具。此外，根据您将使用的数据量和处理量来考虑价格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T05:59:59.357

SimpleDB*旨在*存储*相对*少量的数据。如果您有“大量的日志数据”并且想要“搜索日志以查找特定事件”和“生成频率报告”，那么您肯定想要使用 DynamoDB。

DynamoDB 具有“散列键”（例如，索引）和“范围键”，它们允许您以各种方式对数据进行排序。例如：“显示从上周到现在的所有 INFO 日志。”

此外，如果您查看[官方 DynamoDB 论坛](https://forums.aws.amazon.com/forum.jspa?forumID=131)，开发人员和支持人员非常善于跟进并确保您的问题得到解答。

# database - 在 Web 应用程序上存储小数据

> ID：12711859
> 
> 赞同：0
> 
> 时间：2012-10-03T15:34:36.710
> 
> 标签：database, database-design, widget, storing-data

我正在开发一个门户网站。这个门户有内容（文章、书籍...），并且有一些小部件可以选择这些内容（如精选文章）并以确定的顺序显示它们。

我认为向目录的每个内容条目添加一个布尔“特色”和一个字段“顺序”是多余的，特别是因为可能存在不同类型的特色，然后是不同的顺序。

此外，一些小部件适用于静态数据：有一个显示链接列表。当然，这可能是一个简单的静态页面，但网络管理员必须能够编辑链接，然后必须将其动态存储在某个地方。

如果解决方案是为此问题设计特殊表，我不知道如何计划，因为我的第一种方法是创建一个表“widget1_items”，其中包含一对字段、内容的 id 和订单值。这适用于每个小部件，静态小部件也是如此。

这个问题有更好的解决方案吗？感谢您的帮助和关注

# c++ - 将模板化的原始包装类相互转换

> ID：12711862
> 
> 赞同：1
> 
> 时间：2012-10-03T15:34:43.353
> 
> 标签：c++, templates, reference, casting

我正在开发用于包装其他库的跨平台环境，特别是因为这有助于我理解 C++ 及其库/扩展，因为我对编程语言还很陌生。

我正在为原始类型创建包装器，因此我可以为它们提供诸如 eventSerialize(...)、eventRepresentate(...) 等功能（并且因为其他一些原因）。

为了节省时间，我想为原语制作一个模板类包装器。

我有以下问题：

*   我是否正确地参考了运营商的参考资料？
*   如何确保它们可以相互投射？（模板运算符 Primitive();)？
*   我的意思是，所有其他运算符呢，我可以找到它们，但是在哪里可以找到如何使用正确的语法（如 const / &）正确编写它们？

我希望有人能给我这些答案。

```
#ifndef swift_Int32
#define swift_Int32
#include <boost/cstdint.hpp>

namespace swift
{
template<class T> class Primitive : public Object
{
    T data;
public:
    Primitive();
    Primitive(T&);
    Primitive(Primitive<T>&);

    Primitive<T>& operator = (const Primitive<T>&);

    Primitive<T> operator * (const Primitive<T>& value);
    Primitive<T> operator / (const Primitive<T>& value);
    Primitive<T> operator + (const Primitive<T>& value);
    Primitive<T> operator - (const Primitive<T>& value);
    Primitive<T>& operator *= (const Primitive<T>& value);
    Primitive<T>& operator /= (const Primitive<T>& value);
    Primitive<T>& operator += (const Primitive<T>& value);
    Primitive<T>& operator -= (const Primitive<T>& value);

    bool operator == (const Primitive<T>&) const;
    bool operator != (const Primitive<T>&) const;
    bool operator <  (const Primitive<T>&) const;
    bool operator >  (const Primitive<T>&) const;
    bool operator <= (const Primitive<T>&) const;
    bool operator >= (const Primitive<T>&) const;
};

typedef Primitive<bool> Bool;
typedef Bool Bit;
typedef Primitive<int8_t> Char;
typedef Primitive<uint8_t> Byte;
typedef Primitive<int16_t> Int16;
typedef Primitive<uint16_t> UInt16;
typedef Primitive<int32_t> Int32;
typedef Primitive<uint32_t> UInt32;
typedef Int16 Short;
typedef UInt16 UShort;
typedef Int32 Int;
typedef UInt32 UInt; 
} 

#endif //swift_Int32 
```

# javascript - Kendo UI TreeView DragEnd 事件崩溃非常滞后

> ID：12711864
> 
> 赞同：1
> 
> 时间：2012-10-03T15:34:44.720
> 
> 标签：javascript, jquery, kendo-ui

我试图检测拖动项目后何时将项目放在树视图中。当我这样做时，它只是无限期地挂起搜索javascript函数。有时它会在 10 秒后找到它，有时它不会。我已经用 Firebug 验证了该函数始终在加载（并且只加载一次）。

我的剑道 UI 版本是：2012.2.913

提前感谢您的任何帮助或建议。

```
@(Html.Kendo().TreeView()
.Name("CompanyHierarchy")
.Events(events => events
    .DragEnd("HierarchyDragEnd")
)
.BindTo(Model.Hierarchy as System.Collections.IEnumerable, mappings =>
{
    mappings.For<Models.EnterpriseChildModel>(binding => binding
        .Children(c => c.Children)
        .ItemDataBound((item, c) =>
        {
            item.Text = c.Name;
        })
    );
})
.DragAndDrop(true))

<script type="text/javascript">
function HierarchyDragEnd(e) {
    alert("here");
}</script> 
```

我不知道它是否会有所帮助，但这是它“冻结”时的照片 ![在此处输入图像描述](../Images/b63363ff209cadc0b4e9e6f6417cb7f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:27:55.467

对于 dragend 事件，Firefox 似乎存在一个错误（在 Chrome 中，您的示例工作正常）。一种解决方法是延迟结果，以便让 dragend 事件被正确注册，如下所示：

```
function HierarchyDragEnd(e) {
    setTimeout(function() {
        alert('here');
    }, 100);
} 
```

# php - 无法删除上传的文件

> ID：12711867
> 
> 赞同：2
> 
> 时间：2012-10-03T15:34:55.387
> 
> 标签：php, file-upload, delete-file, safe-mode

当我尝试使用取消链接功能删除我网站上上传的文件时，我得到

```
Message: unlink() [function.unlink]: SAFE MODE Restriction in effect. The script whose uid/gid is 10566/2524 is not allowed to access /var/www/vhosts/websitename owned by uid/gid 0/0 
```

我读到这是一个安全模式问题。好的，但是如何删除上传的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:38:28.083

从技术上讲，您应该移动（或删除）上传的文件。

从[手册](http://www.php.net/manual/en/features.file-upload.post-method.php)：

> 如果该文件未被移走或重命名，则该文件将在请求结束时从临时目录中删除。

如果无法删除它们，请留下它们。当您的脚本完成时，它们将被系统删除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T15:38:09.090

在删除文件的 PHP 脚本中，尝试在顶部添加以下指令：

```
ini_set('safe_mode', 'off'); 
```

*编辑*

如果您无权访问 Web 服务器的配置，您可以尝试通过 .htaccess 文件关闭 safe_mode。

```
php_admin_flag safe_mode Off 
```

# ios - 带有 didChangeObject 的 NSFetchedResultsController 在表格视图中显示单元格的速度很慢

> ID：12711872
> 
> 赞同：0
> 
> 时间：2012-10-03T15:35:07.927
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

我使用 NSFetchedResultsControllerDelegate 在我的所有数据下载并插入 coreData 后显示我的单元格。我使用下面的代码知道何时发生了修改

```
[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshDatas:) name:NSManagedObjectContextDidSaveNotification object:nil]; 
```

然后，调用此方法

```
- (void)refreshDatas:(NSNotification *)notification
{
    [[self.fetchedResultsController managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];
} 
```

但是，我有一个问题，代表 NSFetchedResultsControllerDelegate 的 insertRowAtIndexPath 的第一次调用和插入到 UITableView 中的单元格的显示之间有 5 到 10 秒，我不知道为什么。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:41:44.827

如果您使用的是后台线程并且在那里触发了通知，则需要在主线程中“重新发布”通知，例如：

```
- (void)refreshDatas:(NSNotification*)notification
{
  if ([notification object] == [self managedObjectContext]) return;

  if (![NSThread isMainThread]) {
      [self performSelectorOnMainThread:@selector(refreshDatas:) withObject:notification waitUntilDone:YES];
      return;
  }

  [[self managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];
} 
```

如果这不是问题，请尝试在您的问题中添加一些细节。核心数据很难，没有细节就很难理解发生了什么。

**编辑**

`[notification object]`如果（在这种情况下为上下文）是主要的，则您不会合并更改。相反，如果该上下文来自不同的线程，则合并更改。这是出于性能原因，但您可以简单地删除它。

希望有帮助。

# excel - Excel VBA 动态范围/索引选择

> ID：12711873
> 
> 赞同：0
> 
> 时间：2012-10-03T15:35:10.333
> 
> 标签：excel, vba, ms-office

我正在尝试为自己创建一个人才计算器，整个第一张表都调用了一个数据表来完成所有后台工作。在 Excel 工作表本身上，所有内容都调用 INDEX(TableName,Row,Column) 因为它很容易跟踪，而且我发现我经常需要在处理数据时移动数据，因此处理名称比处理单元格引用更容易。

但是，我也在这张表上使用了 VBA，而且我对它还很陌生。例如，如果 C1 是 TableOne 表的一部分，而不是使用 Range("C1")，那么是否有一种方法可以像在 Excel 公式中那样引用它，例如 INDEX(TableOne,1)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:39:16.187

代替 Range，您可以简单地使用`Worksheets(...).Cells(row, column)`，或者如果 TableOne 是一个命名的 Range，那么`Range("TableOne").Cells(row, column)`. 我不确定这是否就是你所需要的...

# razor - NancyFX 站点尝试服务器剃须刀视图时的 406 响应

> ID：12711874
> 
> 赞同：3
> 
> 时间：2012-10-03T15:35:13.967
> 
> 标签：razor, nancy, http-status-code-406

我的 NancyFX 站点使用 cshtml razor 视图、asp.net 和 IIS7，在本地运行良好。它通过内置在“ASP.NET 开发服务器”中的 VS12 工作，也可以通过我的 IIS7 本地副本作为独立站点工作。我已确保我的 web.config 包含正确的剃须刀部分。

如果我将此站点部署到远程服务器（在我的登台和实时服务器上测试），那么每个 URI 都会返回错误：

```
406 - Client browser does not accept the MIME type of the requested page. 
```

我已经检查`Accept`了请求中的标头。他们来了：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en-US;q=0.8,en;q=0.6 
```

在远程服务器上运行的其他非 nancy 站点工作正常，它们具有完全相同的接受标头。据我所知，该站点曾经在具有相同 Accept 标头的远程服务器上正常工作。

我还在我的登台服务器上做了以下测试。

我将我的重命名`HomeView.cshtml`为`HomeView.html`并将其所有内容替换为`hello world`（没有 html 标签，只有文本）。这服务没有问题。然后我将纯文本重命名`HomeView.html`为`HomeView.cshtml`并再次获得 406。

最后，在绝望中，我向映射的服务器添加了一个 MIME 类型`.cshtml`->`text/html`但当然它没有任何区别，因为我实际上并没有提供`.cshtml`文件。

为什么 Nancy（或者可能是 IIS7）`406 Not Acceptable`对从文件派生的任何内容返回响应`.cshtml`？

**编辑** 这是南希的踪迹。它似乎表明要么`HomeView.cshtml`找不到，要么没有使用 Razor View 引擎，因此找不到*任何**.cshtml 文件。

```
Currently available view engine extensions: sshtml,html,htm 
```

这会导致内部 Nancy 异常：

```
Nancy.ViewEngines.ViewNotFoundException 
```

然而，完全相同的站点文件在本地运行并正确调用 Razor View 引擎并因此找到`HomeView.cshtml`.

我仍然很难过。

**_南希追踪**

```
[StaticContentConventionBuilder] The requested resource '/home' does not match convention mapped to '/Content'
[DefaultRouteResolver] Found exact match route
[DefaultRouteInvoker] Processing as negotiation
[DefaultRouteInvoker] Accept header: text/html;q=1, application/xhtml+xml;q=1, application/xml;q=0.9, */*;q=0.8
[DefaultRouteInvoker] Acceptable media ranges: text/html
[DefaultRouteInvoker] Invoking processor: Nancy.Responses.Negotiation.ViewProcessor
[DefaultViewFactory] Rendering view with name HomeView
[DefaultViewResolver] Resolving view for 'HomeView', using view location conventions.
[DefaultViewResolver] Attempting to locate view using convention 'views/Home/HomeView'
[DefaultViewResolver] Attempting to locate view using convention 'Home/HomeView'
[DefaultViewResolver] Attempting to locate view using convention 'views/HomeView'
[DefaultViewResolver] Attempting to locate view using convention 'HomeView'
[DefaultViewResolver] No view could be resolved using the available view location conventions.
[DefaultViewFactory] Unable to find view engine that could render the view.
[DefaultRouteInvoker] Processor threw Nancy.ViewEngines.ViewNotFoundException exception: Unable to locate view 'HomeView'
Currently available view engine extensions: sshtml,html,htm
Locations inspected: ,views/Home/HomeView,,Home/HomeView,views/HomeView,HomeView
Root path: D:\wwwroot\GoodPractice.uMentor\[DefaultRouteInvoker] Invoking processor: Nancy.Responses.Negotiation.ViewProcessor
[DefaultViewFactory] Rendering view with name HomeView
[DefaultViewResolver] Resolving view for 'HomeView', using view location conventions.
[DefaultViewResolver] Attempting to locate view using convention 'views/Home/HomeView'
[DefaultViewResolver] Attempting to locate view using convention 'Home/HomeView'
[DefaultViewResolver] Attempting to locate view using convention 'views/HomeView'
[DefaultViewResolver] Attempting to locate view using convention 'HomeView'
[DefaultViewResolver] No view could be resolved using the available view location conventions.
[DefaultViewFactory] Unable to find view engine that could render the view.
[DefaultRouteInvoker] Processor threw Nancy.ViewEngines.ViewNotFoundException exception: Unable to locate view 'HomeView'
Currently available view engine extensions: sshtml,html,htm
Locations inspected: ,views/Home/HomeView,,Home/HomeView,views/HomeView,HomeView
Root path: D:\wwwroot\GoodPractice.uMentor\[DefaultRouteInvoker] Unable to negotiate response - no processors returned valid response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:12:39.043

答案很简单。我只需要

*   卸载 Nancy.Viewengines.Razor 包 (NuGet)
*   安装 Nancy.Viewengines.Razor 包 (NuGet)
*   清理项目
*   重新编译
*   重新部署

瞧！我想我应该在 16 小时前这样做。

# animation - Raphael.js 围绕圆形动画文本

> ID：12711875
> 
> 赞同：1
> 
> 时间：2012-10-03T15:35:16.787
> 
> 标签：animation, svg, raphael

这个小提琴会解释这一切：

[http://jsfiddle.net/Mirodil/Ww2ud/](http://jsfiddle.net/Mirodil/Ww2ud/)

[http://jsfiddle.net/Mirodil/Ww2ud/3/](http://jsfiddle.net/Mirodil/Ww2ud/3/)

我正在尝试围绕圆圈为这些文本设置动画。每个文本都有自己的旋转角度度数。当我尝试围绕圆圈旋转它们时，第一个文本失去其旋转角度，第二次旋转。

如何在不丢失旋转角度的情况下围绕圆圈旋转文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:28:56.450

谢谢@尼尔。这个例子帮助我解决了我的问题。波纹管链接中的工作示例。 [http://jsfiddle.net/Mirodil/XTDpF/](http://jsfiddle.net/Mirodil/XTDpF/)

# zend-framework - 如何在zend框架中显示fetchAll函数的返回数组值

> ID：12711879
> 
> 赞同：0
> 
> 时间：2012-10-03T15:35:17.777
> 
> 标签：zend-framework, frameworks

我使用以下[Zend Framework 快速入门教程](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-model.html)创建了模型。

现在在控制器中我有调用`fetchAll()`函数，并且我从模型类中以数组的形式获取值。这个数组看起来像......

```
Array
(
    [0] => Admin_Model_Users Object
        (
            [_id:protected] => 1
            [_access_id:protected] => 1
            [_firstname:protected] => test
            [_lastname:protected] => test
            [_username:protected] => admin
            [_password:protected] => 1@3$523456
            [_salt:protected] => 
            [_email:protected] => 
            [_active:protected] => 0
            [_last_access:protected] => 0
            [_created:protected] => 0
        )

) 
```

现在我使用`foreach`循环来获取数组的值，但这次它给出了如下错误：

> 消息：无效的用户属性

我有`foreach`如下运行循环：

```
<?php 
    foreach($this->profile as $myprofile){
                 echo $myprofile->id; 
        } ?> 
```

我试图解决它，也在谷歌搜索上。但我没有得到任何解决方案。请告诉我，如何访问数组的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:04:06.867

看起来好像您正在尝试使用“id”访问“_id”。

你试过`echo $myprofile->_id;`吗？

如果这仍然不起作用，您链接到的教程页面指向在 Admin_Model_Users 类中创建用于检索值的方法。

特别是，因为变量是受保护的，并且应该通过诸如`$myprofile->getId()`（需要在模型中定义）之类的方法来访问。

# php - 如何在 CakePHP 2.0 中使用 handleError 保存错误？

> ID：12711882
> 
> 赞同：0
> 
> 时间：2012-10-03T15:35:33.543
> 
> 标签：php, cakephp, handleerror

我有一个大问题。好吧，我正在尝试保存我的 Web 应用程序中发生的错误。例如（仅作为示例），如果我除以零，或者在查询中发生错误或类似情况。所以，我想抓住它并将其保存在数据库中。但是 CakePHP 的 handleError 是静态的，所以我不能使用 $this->MyModel->saveError(...)。

在我的 /app/Lib/AppError.php 我有这个：

```
class AppError extends ErrorHandler
{
     public $uses = array('Errors.Error');

     public static function handleError($code, $description, $file = null, $line = null, $context = null)
     {
         //This print the error:
         echo "Code: ".$code." Description: ".$description." File: ".$file." Line: ".$line."<br>";
         //I want to do this, (save to the database):
         $this->Error->saveError($code, $description, $file, $line);

     }
} 
```

没有 $this->Error->saveError($code, $description, $file, $line); 它有效，但我不仅想显示错误。我认为需要一个例子或类似的东西。请帮我。问候和谢谢。谢谢... PD：对不起英语，我是一名英语学生...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:17:31.063

您将函数定义`handelError`为静态函数，因此该变量`$this`不存在，因为静态环境无法知道它所指的对象，只能知道其类名。在静态环境中，`self::`必须使用，而不是`$this`，例如

`self::Error->saveError($code, $description, $file, $line);`

这也意味着`Error`必须声明该属性`static`。

# ios - MPMoviePlayerController 看到双重

> ID：12711883
> 
> 赞同：0
> 
> 时间：2012-10-03T15:35:39.920
> 
> 标签：ios, youtube, mpmovieplayercontroller, mpmovieplayer

来自 YouTube 的某些流式视频在 MPMoviePlayer 中显示被压扁并加倍，如下面的屏幕截图所示，而同时制作并以相同方式托管的其他视频在同一视图中也能正常工作。如果我直接在 safari 中访问 YouTube 网址，它有时可以正常工作，有时会出现完全相同的问题。我在失败的 url 中注意到的一件事是它们指定了 algorithm=throttle-factor，但我似乎无法在不破坏它的情况下编辑 YouTube 嵌入式 url。我怎样才能解决这个问题？

![在此处输入图像描述](../Images/02666c8d4c0583e87a0d0348ab95ebce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:07:21.863

我正在使用 HCYouTubeParser 库（https://github.com/hellozimi/HCYoutubeParser），它为每种尺寸返回两个 url。对于某些视频，它有一个中等大小的 url 包含“algorithm=throttle-factor”，而另一个没有。在其中添加以下代码`HCYoutubeParser.m` `h264videosWithYoutubeURL:`可确保仅输出不受限制的视频 url。

```
BOOL throttled = [url rangeOfString:@"algorithm=throttle-factor"].location != NSNotFound;

if(!throttled)
    [videoDictionary setObject:url forKey:quality]; 
```

这可行，但由于我不知道为什么这些视频会失败或后果是什么，所以我没有将更改提交给 hellozimi。

# actionscript-3 - 使用 ActionScript 读取图像的 DPI

> ID：12711884
> 
> 赞同：0
> 
> 时间：2012-10-03T15:35:40.467
> 
> 标签：actionscript-3, apache-flex, actionscript

如何读取本地图像/位图的 DPI？

...当用户通过 FileReference “上传”图像时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T22:09:39.363

假设您的图像中甚至包含编码的 DPI 值，则该值毫无意义。我可以制作一个 64px x 64px 的图像，将其 DPI 值设置为 300，但它仍然不是打印的好选择。[这篇文章](http://www.rideau-info.com/photos/mythdpi.html)更详细。

您应该做的是确定您将以什么 DPI 值打印图像（通常是 300 DPI），然后根据图像的像素尺寸计算该值。这是[根据源图像尺寸计算打印尺寸的一种方法](https://stackoverflow.com/questions/4223975/calculating-image-size-in-inches-or-dpi-from-pixels-using-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:50:26.467

忘记嵌入式 DPI，获取图像像素大小并计算在 300 DPI 下它有多大（以英寸为单位）（这是在纸上打印清晰内容所需的最小密度，但是，对于横幅和大尺寸打印，它可能是 180甚至 72 DPI）。如果用户试图在比结果尺寸更大的纸上打印图像，则会弹出警告。

# xcode - 将 xcode-select 添加到 PATH 与安装 Xcode 命令行工具？

> ID：12711886
> 
> 赞同：5
> 
> 时间：2012-10-03T15:35:47.400
> 
> 标签：xcode, path, .bash-profile, command-line-tool

现在使用 Xcode 4.5，是否可以将以下行添加到我的`~/.bash_profile`而不是安装 Xcode 命令行工具？

```
export PATH="$PATH:`xcode-select -print-path`/usr/bin:`xcode-select -print-path`/Toolchains/XcodeDefault.xctoolchain/usr/bin" 
```

注意：Xcode 对命令行工具有以下说明：

> 在安装之前，请注意，您可以在终端中使用 XCRUN 工具来启动编译器和嵌入在 Xcode 应用程序中的其他工具。使用 XCODE-SELECT 工具定义激活的 Xcode 版本。在终端中键入“man xcrun”以了解更多信息。

# xcode - 添加新组时xcodeproj git合并失败

> ID：12711887
> 
> 赞同：1
> 
> 时间：2012-10-03T15:35:52.240
> 
> 标签：xcode, git, merge

我目前正在将 Xcode 与 Git 一起使用，并且在**xcodeproj**的合并过程中遇到了一些麻烦。

Developer1 在 Xcode 文件中创建一个新组来树状提交和推送。另一台计算机上的 Developer2 对其他组名执行相同的操作，提交和拉取（合并）。

Developer 2 的 xcodeproj 变得无法使用 Xcode 读取。

但是当我创建一个新文件或只是将文件从 finder 拖放到存储库时，合并成功。

有没有人遇到过这样的麻烦？

我在 .gitattributes 中使用：

```
*.pbxproj -crlf -diff merge=union
# Better to treat them as binary files.
*.pbxuser -crlf -diff -merge
*.xib -crlf -diff -merge 
```

在我的 .gitignore

```
# Mac OS X
*.DS_Store
*~

# Xcode
*.mode1v3
*.mode2v3
*.perspectivev3
*.xcuserstate
project.xcworkspace/
xcuserdata/

*.xcodeproj/*
!*.xcodeproj/project.pbxproj
!*.xcodeproj/*.pbxuser

# Generated files
*.o
*.pyc
*.hi

#Python modules
MANIFEST
dist/
build/

# Backup files
*~.nib
\#*#
.#* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:14:27.520

Adding a new file isn't the same as adding a new group.
A group is also registered in the `project.xcworkspace` file (see "[Undo “New group from selection” project xcode 4](https://stackoverflow.com/questions/5906656/undo-new-group-from-selection-project-xcode-4)"), and it is possible the merge put that file at odd with the merged `project.pbxproj` file.
Check if closing XCode, removing `project.xcworkspace` and re-opening XCode doesn't fix the "readibility" issue for Dev2\.

If that doesn't solve it, then he/she will need to isolate the changes introduced by Dev1 and apply them manually.

# jquery - 使用 .each() 进行 jQuery 变量迭代

> ID：12711888
> 
> 赞同：0
> 
> 时间：2012-10-03T15:35:57.400
> 
> 标签：jquery, jquery-selectors

我的代码需要在变量中捕获图像的“src”。然后它需要将此变量插入到围绕图像的链接上的“href”标签中。

```
$('.fancybox-image-li img').each(function(test) {
    var test = $(this).attr("src");
    $('.fancybox-image-link').attr('href', ''+test+'');
}); 
```

不幸的是，似乎正在发生的事情是“测试” var 只获取最后一个 img 的属性，然后将其插入到所有“href”属性中。

任何想法如何让变量更改每个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:37:12.437

也许你应该做

```
$('.fancybox-image-li img').each(function(test) {

    var test = $(this).attr("src");
    // find the closest element with the class
    $( this ).closest('.fancybox-image-link').attr('href', ''+test+'');

}); 
```

否则，在每次迭代中，您将 all 的 href 设置为`$('.fancybox-image-link')`当前 href 属性，从而获得`$('.fancybox-image-link')`最后一个 href 的alle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:37:41.093

您的链接选择器不正确。这`$('.fancybox-image-link')`将选择该类的所有链接，因此所有链接都将具有相同的 href 属性。

您需要一个更具体的链接选择器。如果图像和链接都包含在同一个元素中，也许可以尝试使用父元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:38:27.927

您应该更具体地`$('.fancybox-image-link')`使用诸如 child ... to 之类的选择方法`$(this)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:38:47.993

`$('.fancybox-image-link')`返回该类的*所有元素。*您实际上是在每次循环迭代都修改所有这些。

相反，用于`.index()`选择单个：

```
$('.fancybox-image-li img').each(function(index, value) {
    $('.fancybox-image-link').index(index).attr('href', $(this).attr("src"));
}); 
```

# python - 使用 M2Crypto 加密文件

> ID：12711892
> 
> 赞同：3
> 
> 时间：2012-10-03T15:36:09.313
> 
> 标签：python, encryption, m2crypto

众所周知，我可以读取内存中的整个文件内容并使用以下代码对其进行加密。

```
contents = fin.read()
cipher = M2Crypto.EVP.Cipher(alg="aes_128_cbc", key = aes_key, iv = aes_iv, op = 1)
encryptedContents = cipher.update(contents)
encryptedContents += cipher.final() 
```

但是如果文件很大怎么办，有没有办法让我将输入流传递给 M2Crypto 而不是先读取整个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:11:13.277

我知道您可以多次调用 .update(data) 。

为了最大限度地减少内存使用并使用文件进行输出，您应该能够执行以下操作：

```
cipher = M2Crypto.EVP.Cipher(alg="aes_128_cbc", key = aes_key, iv = aes_iv, op = 1)
encrypted_contents_file = open(outfile_name, "w")

while True:
    buf = fin.read(1024)
    if not buf:
        break
    encrypted_contents_file.write(cipher.update(buf))

encrypted_contents_file.write( cipher.final() ) 
```

# primefaces - 使用 primefaces 获取 Liferay 用户信息

> ID：12711893
> 
> 赞同：0
> 
> 时间：2012-10-03T15:36:21.127
> 
> 标签：primefaces, liferay

我在 Liferay 6.1 中开发了一个 primefaces portlet 是否可以在 portlet 中获取用户信息，如果可以，怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:32:18.287

这在基于 JSF 的 portlet 中很容易做到，在您的情况下，使用 Primefaces 作为 JSF 实现，通过使用[Liferay Faces 库](http://www.liferay.com/community/liferay-projects/liferay-faces/overview)：[LiferayFacesContext.getInstance().getUser()](http://www.portletfaces.org/doc/liferayfaces/6.0.0.0/javadoc/org/portletfaces/liferay/faces/context/LiferayFacesContext.html)应该为您提供当前登录的 Liferay 用户对象用户。

# web - 在easyphp上重写本地网络网页中的整个URL

> ID：12711896
> 
> 赞同：0
> 
> 时间：2012-10-03T15:36:28.333
> 
> 标签：web, lan, easyphp

我有一个托管示例网站的 easyphp Web 服务器。该网站可通过以下 URL 访问：

192.888.888.2/网站

有哪些可能的方法使它看起来像

www.fakeurl.com？

该网络未连接到互联网，因为人们可以在连接到我的网络时通过智能手机访问该网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:48:19.053

您需要使用 DNS 服务注册您的 IP 地址。有一些免费服务可用，例如 dynamicdns 或 zoneedit。这是您可以将 IP 解析为域名的唯一方法。如果用户在您的网络上，您可以使用每台计算机上的 hosts 文件强制进行 DNS 转换。

# c# - 更改 Win7 任务栏中显示的应用程序名称

> ID：12711899
> 
> 赞同：1
> 
> 时间：2012-10-03T15:36:35.980
> 
> 标签：c#, wpf, prism, taskbar

我想更改显示在 Windows 7 任务栏上下文菜单中的应用程序名称。

![在此处输入图像描述](../Images/b09a9ca0ed52de396cfb34c223db0958.png)

我的应用程序当前显示我的应用程序名称。我想把它改成微软产品的样子

![在此处输入图像描述](../Images/7bf1b70148b0fb7da8fb8106dec25a91.png)

我的应用程序使用 Prism 框架，我想显示的应用程序名称将取决于模块的类型。所以我想动态设置应用程序名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T15:47:36.777

您看到`vshost32.exe`是因为您在调试器下运行。这只是调试器使用的主机进程的名称，您无法更改它。好吧，我想你可以，但这不是你想做的。您想更改可执行文件使用的名称。

当您在没有调试的情况下运行时，就像您的用户一样，任务栏应用程序弹出窗口上显示的应用程序名称由项目配置的“应用程序”页面中指定的程序集名称确定。因此，只需将其更改为您想要的任何内容，就没有什么可做的了。

![在此处输入图像描述](../Images/f6930916aa1d8d7ebce22dd845db3ded.png)

![在此处输入图像描述](../Images/8b776bd88262c9adf43557de9fe64ed7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:41:23.380

对于通过 Windows API 代码包库设置该属性的托管应用，您可以使用作为对象`AppID`一部分的属性`Taskbar`，您可以在`Microsoft.WindowsAPICodePack.Shell.Taskbar`命名空间中找到该属性。使用该属性，您可以设置和获取给定应用程序的应用程序 ID。

您也可以手动设置它（如果不使用包）。只需使用它的 id 设置名称设置：

```
void SetAppID(HWND hWnd, int iAppID)
{
    IPropertyStore *pps;
    HRESULT hr = SHGetPropertyStoreForWindow(hWnd, IID_PPV_ARGS(&pps));
    if (SUCCEEDED(hr))
    {
        PROPVARIANT pv;
        if (iAppID >= 0)
        {
            hr = InitPropVariantFromString(c_rgszAppID[iAppID], &pv);
        }
        else
        {
            PropVariantInit(&pv);
        }
        if (SUCCEEDED(hr))
        {
            hr = pps->SetValue(PKEY_AppUserModel_ID, pv);
            PropVariantClear(&pv);
        }
        pps->Release();
    }
} 
```

然后像这样称呼它：

```
private static void SetWindowAppId(string appId)
{
    Microsoft.WindowsAPICodePack.Shell.ShellNativeMethods.SetWindowAppId
        (OwnerHandle, "the name you want to display here");
} 
```

有关完整示例，请参见[此处](http://windowsteamblog.com/windows/b/developers/archive/2009/06/18/developing-for-the-windows-7-taskbar-application-id.aspx)。

# wpf - 如何使用 Binding 从 WPF 中的列表框中更改窗口窗体背景颜色？

> ID：12711904
> 
> 赞同：0
> 
> 时间：2012-10-03T15:36:43.013
> 
> 标签：wpf, binding, user-controls, listbox, wpf-controls

我正在使用`ListBox`，并且我想在单击 时更改背景窗口颜色`ListBoxItem`，我的方法有效，但我想对绑定做同样的事情。

```
<ListBox Grid.Column="1" Grid.Row="3" Grid.RowSpan="2" Margin="10,20,30,10" Name="listBox1" SelectionChanged="listBox1_SelectionChanged_1">
            <ListBoxItem Content="Blue" Name="lst" />
            <ListBoxItem Content="Green" Name="lst1" />
            <ListBoxItem Content="Yellow" Name="lst2"/>
            <ListBoxItem Content="Transparent" Name="lst3"/>

        </ListBox> 
```

我正在使用以下方法：

```
private void listBox1_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
    {
       if(listBox1.SelectedIndex.ToString() == "0")
       {
            win.Background = Brushes.Blue;
       }
       else if (listBox1.SelectedIndex.ToString() == "1")
       {
           win.Background = Brushes.Green;
       }
       else if (listBox1.SelectedIndex.ToString() == "2")
       {
           win.Background = Brushes.Yellow;
       }
       else
       {
           win.Background = Brushes.Transparent;
       }

    } 
```

但是我需要使用bind方法，怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:48:45.263

您可以通过遵循 MVVM 并使列表框的值（本质上是颜色）来自模型来轻松实现这一点。然后可以将表单的背景绑定到相同的值。

所以基本上你的模型将是：

```
public class ColorModel
{
   public Enum Colors{get; set;}
}

public enum Colors
{
    Red,
    Blue,
    Green
} 
```

你的 Viewmodel 会收集这个。

然后你 View 将它绑定到列表框。对于窗口背景 - 您可以将其绑定到列表框值并使用转换器（因为模型没有将其定义为颜色） - 您可以更改颜色。

如果你想要一个完整的工作样本 - 让我知道 - 会在我的办公桌上尽快发布一些东西。

# ruby-on-rails - Rails：未定义的方法`photos_path'？

> ID：12711907
> 
> 赞同：3
> 
> 时间：2012-10-03T15:36:49.697
> 
> 标签：ruby-on-rails

嗨，我目前正在使用嵌套资源。

路线

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums do
    resources :photos
  end
end
end 
```

我有 3 个模型（用户、相册、照片）。我已经成功地注册了用户并创建了相册，但我一直在尝试为照片制作表单。在创建相册时，用户被重定向到相册/显示页面：

专辑/节目

```
<% if @album.photos.any? %>
yes  pics
<% else %>
no  pics
<% end %>

<%= link_to "Upload new pics!", new_user_album_photo_path(@user, @album) %> 
```

如您所见，在页面底部有一条通往新照片的路径，这就是问题所在。当我点击链接时，它给了我一个错误：

`undefined method`#<#:0x007fb69e167220> 的照片路径'`

错误发生在该页面的第 3 行（照片/新）

照片/新

```
<% provide(:title, "Upload pictures") %>

<%= form_for(@photo, :html => { :multipart => true }) do |f| %>

<%= f.file_field :photo %>

<% end %> 
```

我怀疑我向控制器输入了错误的信息（我仍然对在控制器中放入什么感到非常不安。）？这是我的照片控制器。

照片控制器

```
class PhotosController < ApplicationController

    def new
      @user = User.find(params[:user_id])
      @album = @user.albums.find(params[:album_id])
      @photo = @album.photos.build
    end

    def create
      @album = Album.find(params[:album_id])
      @photo = @album.photos.build(params[:photo])
      respond_to do |format|
        if @album.save
          format.html { redirect_to @album, notice: 'Album was successfully created.' }
          format.json { render json: @album, status: :created, location: @album}
        else
          format.html { render action: "new" }
          format.json { render json: @album.errors, status: :unprocessable_entity }
        end
      end
    end

    def show
      @album = Album.find(params[:album_id])
      @photos = @album.photos
    end

end 
```

我的表格不正确吗？将什么放入控制器以及错误发生在表单还是控制器中，这让我感到困惑。谢谢

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:45:20.803

与您必须向`link_to`助手提供父资源相同的方式，您还必须将其提供给表单。因此，将表单行更改为：

```
 <%= form_for([@user, @album, @photo], :html => { :multipart => true }) do |f| %> 
```

..它应该工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:51:41.997

所以这里发生的事情是 Rails 正在使用一些反射来查看您传递给表单助手的对象，（我猜）它只是一个 Photo 对象。默认情况下，Rails 将查找**photos_path**，因为这是 POST 请求通常用于**创建**操作的地方。所以它发布到**/photos**，不幸的是，根据您当前的路线不存在。

如果您将该表单助手行更改为：

```
<%= form_for [@user,@album,@photo], html: { multipart: true} do |f| %> 
```

这导致它发布到**/users/(user id)/albums/(album id)/photos**应该创建新照片。

# git - Git 无法推送到 github 上的分叉仓库

> ID：12711920
> 
> 赞同：0
> 
> 时间：2012-10-03T15:37:25.110
> 
> 标签：git, github

因此，我在 github 中创建了一个项目，但由于“推送”命令期间出现错误，需要我先执行“拉取”操作，因此我无法将本地更改推送到我的原始仓库。那么问题是“拉”不断覆盖我所有的本地提交。

示例如下所示：

github上有一个项目A（remote = upstream），我将它分叉到我自己的项目（remote = origin）中。然后，我创建了一个分支“branch_a”，在其中添加了所有补丁更改并将此分支推送到我的远程原始存储库。我最终用多个提交搞砸了整个过程，所以我需要将我的提交压缩成一个，以便提交一个拉取请求以将我的更改发送到项目 A。尝试压缩我的提交并与上游存储库同步如下：

> git rebase -i 上游/主

我看到了 4 个提交并选择了我想要的一个并删除了其他的

> git push origin branch_a

收到错误：

> ！[rejected] branch_a -> branch_a (non-fast-forward) error: failed to push some refs to 'https://github.com/#####/#####.git' 防止你输历史记录，非快进更新被拒绝 在再次推送之前合并远程更改（例如“git pull”）。有关详细信息，请参阅“git push --help”的“关于快进的说明”部分。

运行拉取命令：

> git pull origin branch_a

收到消息：

> *   分支 branch_a -> FETCH_HEAD 递归合并。libpex/安装 | 364 +++++++++++++++++++++++++++++++++++++++++++++++++++ ++++ 1 个文件已更改，364 次插入 (+)，0 次删除 (-) 创建模式 100644 libpex/INSTALL

本地提交完全被 pull 命令覆盖（我尝试删除此文件大约 10 次，但它不断回来）。

所以现在我又回到了 4 次提交，我无法终生将正确的提交推回我的原始仓库。我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:39:57.053

如果您想告诉 Git 推送您拥有的内容并覆盖目的地的任何内容（这会破坏历史记录，因此请谨慎使用），然后`--force`向您的推送语句提供：

```
git push --force origin branch_a 
```

这将导致`origin/branch_a`分支更新为指向您的本地`branch_a`分支，无论它是否是快进。 **从本地****分支或任何其他远程分支无法访问的****任何可访问的提交都将在远程存储库中丢失。`origin/branch_a``branch_a`**

# php - 如何在 php 中播放来自 BLOB 的流音频？

> ID：12711922
> 
> 赞同：0
> 
> 时间：2012-10-03T15:37:28.290
> 
> 标签：php, mysqli, blob, audio-streaming

我有这个 smartReadFile() php 函数，它允许从文件播放音频流。您将如何修改此函数以便查询 mysql 数据库 BLOB 而不是读取特定文件？

```
function smartReadFile($location, $filename, $mimeType = 'audio/octet-stream')
{
if (!file_exists($location))
{
    header ("HTTP/1.1 404 Not Found");
    return;
}

$size   = filesize($location);
$time   = date('r', filemtime($location));

$fm     = @fopen($location, 'rb');
if (!$fm)
{
    header ("HTTP/1.1 505 Internal server error");
    return;
}

$begin  = 0;
$end    = $size - 1;

if (isset($_SERVER['HTTP_RANGE']))
{
    if (preg_match('/bytes=\h*(\d+)-(\d*)[\D.*]?/i', $_SERVER['HTTP_RANGE'], $matches))
    {
        $begin  = intval($matches[1]);
        if (!empty($matches[2]))
        {
            $end    = intval($matches[2]);
        }
    }
}

if (isset($_SERVER['HTTP_RANGE']))
{
    header('HTTP/1.1 206 Partial Content');
}
else
{
    header('HTTP/1.1 200 OK');
}

header("Content-Type: $mimeType"); 
header('Cache-Control: public, must-revalidate, max-age=0');
header('Pragma: no-cache');  
header('Accept-Ranges: bytes');
header('Content-Length:' . (($end - $begin) + 1));
if (isset($_SERVER['HTTP_RANGE']))
{
    header("Content-Range: bytes $begin-$end/$size");
}
header("Content-Disposition: inline; filename=$filename");
header("Content-Transfer-Encoding: binary");
header("Last-Modified: $time");

$cur    = $begin;
fseek($fm, $begin, 0);

while(!feof($fm) && $cur <= $end && (connection_status() == 0))
{
    print fread($fm, min(1024 * 16, ($end - $cur) + 1));
    $cur += 1024 * 16;
}
} 
```

# asp.net - MultipartFileStreamProvider 是否有效地保存文件上传？

> ID：12711923
> 
> 赞同：2
> 
> 时间：2012-10-03T15:37:33.413
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-web-api

我对用于使用 Web Api 上传文件的 MultipartFileStreamProvider 有疑问。发生文件上传时，是否将其加载到内存中然后流式传输到文件？或者是从请求内容中直接（部分）读取内容，然后流式传输到文件（从而减少服务器内存分配）。我正在尝试确定在使用此类将大文件保存到文件之前是否将其加载到内存中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:42:35.657

它们在请求期间被写入磁盘。您可以[在源代码](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/2abdc3a0a539#src/System.Net.Http.Formatting/MultipartFileStreamProvider.cs)中自己看到这一点，其中`FileStream`s 在根路径中创建并从`GetStream`每个不同部分返回。

# sql - 通过 SQL 在 ms-Access 中为 Double 创建一个列

> ID：12711926
> 
> 赞同：2
> 
> 时间：2012-10-03T15:37:46.683
> 
> 标签：sql, vb.net, visual-studio, ms-access, visual-studio-2005

我正在尝试使用 SQL 在我的 ms-access 表中创建列。我想将`double`我的 vb.net 软件中的 s 放入带有几个小数位的列中。我不确定用于启用访问以接收小数位的正确列类型。如下所示，我尝试过`long`，但这似乎是长整数而不是长数字。从 Microsoft.com 看来，我的选择如下：

> `CHAR [( {size} )] | CHARACTER [( {size} )] | LONGCHAR | SHORT | INT | INTEGER | LONG | OBJECT [NOT NULL] [TEMPORARY] [LOCALIZABLE] [HOLD]`.

我当前的代码如下，子运行一个访问数据库的函数。

```
 Public Sub AddColumnsToDatabase(ByVal Parameter)

    Dim scaleCounter
    Dim TableName As String
    Dim ColumnString As String
For scaleCounter = 2 To 2
        DatabaseSelector(scaleCounter)
        TableName = DataLocations(1, scaleCounter)

        cnnOLEDB = New OleDbConnection
        cnnOLEDB.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & DataDirectoryName & DatabaseFileName
        cnnOLEDB.Open()

        cmdOLEDB.Connection = cnnOLEDB

        ColumnString = "PAR" & Format(Parameter, "0000")
        DatabaseConnectioninsert("ALTER TABLE " & TableName & " ADD " & ColumnString & " Long", "Non-Query")

        cnnOLEDB.Close()
        rdrOLEDB.Close()
end sub

 Public Function DatabaseConnectioninsert(ByVal Query As String, ByVal Task As String) As String
    On Error GoTo Err

    cmdOLEDB.CommandText = Query

    Select Case Task
        Case "Read Recordset"
            rdrOLEDB = cmdOLEDB.ExecuteReader()
            DatabaseConnectioninsert = "Read Recordset"
        Case "Read Scalar"
            DatabaseConnectioninsert = cmdOLEDB.ExecuteScalar
        Case "Non-Query"
            cmdOLEDB.ExecuteNonQuery()
            DatabaseConnectioninsert = "Non-Query"
    End Select

    Exit Function
Err:
    DatabaseConnectioninsert = "Error"

End Function 
```

一个示例 SQL 查询是`Query = "ALTER TABLE tabDataHourly ADD PAR0005 Long"`

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:07:29.953

用于`DOUBLE`字段类型。

```
ALTER TABLE tabDataHourly ADD COLUMN PAR0005 DOUBLE; 
```

您可以在此处找到有关 Access DDL 字段类型的更多信息：[字段类型参考 - DDL、DAO 和 ADOX 的名称和值](http://allenbrowne.com/ser-49.html)

# php - 如何使用 WP 中的任何 jQuery Zoom 插件缩放附加图像？

> ID：12711931
> 
> 赞同：3
> 
> 时间：2012-10-03T15:38:11.963
> 
> 标签：php, jquery, wordpress

我需要有关我的 WordPress 主题的帮助。在我的文章中，我只使用附加的图像。所以我制作了一个产品滑块，可以自动加载附加到这个产品滑块的图像。要显示图像，我使用：

```
<?php echo wp_get_attachment_image($product_image->ID, array(350, 250)); ?> 
```

但是这个函数也创建了一些显示图像的 div 元素。因此，我不能像 jQuery 缩放插件所需要的那样向图像添加一个需要的类。有谁能够帮我？我只想使用其中一些[缩放插件](http://www.tripwiremagazine.com/2012/07/jquery-zoom-effects.html)。

我没有很多声誉，所以我不能在pastebin上发布链接。
这里是 HTML+PHP

```
<div id="slides" class="grid_5">

<div class="slides_container grid_5">
    <?php 
    $product_images = get_posts(
            array(
                'posts_per_page' => -1,
                'post_type' => 'attachment',
                'post_mime_type' => 'image',
                'post_parent' => $post->ID,
                'order' => 'ASC'
            )
        );

    foreach($product_images as $product_image) :?>
        <div>

            <center>
            <?php echo wp_get_attachment_image($product_image->ID, array(350, 250)); ?>
            </center>
        </div>
    <?php 
    endforeach;
    ?>
</div>
<br>
    <ul class="pagination grid_5">      
        <?php 
        reset($product_images);
        foreach($product_images as $product_image) :?>
            <li><a href="#"><?php echo wp_get_attachment_image($product_image->ID, array(50, 50)); ?></a></li>
        <?php 
        endforeach;
        ?>
    </ul> 
```

并生成 HTML： http: [//pastebin.com/EZByPvYm](http://pastebin.com/EZByPvYm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:41:07.500

`wp_get_attachment_image()`还有两个参数，第四个参数用于覆盖`wp_get_attachment_image()`生成的 HTML 标签的属性，使用下面的代码。

```
<?php echo wp_get_attachment_image($product_image->ID, array(350, 250), false, array('class' => 'YOUR-DESIRED-CLASSNAME')); ?> 
```

# ruby-on-rails - Ruby on Rails：项目控制器中的 RuntimeError

> ID：12711932
> 
> 赞同：0
> 
> 时间：2012-10-03T15:38:13.940
> 
> 标签：ruby-on-rails, ruby, runtime

尝试将新条目保存到我的数据库时遇到问题。提交时，项目应保存到项目表中，该项目中的技术/技术应保存到名为 Technols 的技术表中，它们之间的关系存储在名为 Projecttechnols 的表中。

**这是我的新动作：**

```
def new
    @project = Project.new
    @technol = Technol.new(params[:tech])

@all_technols = Technol.all
tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

@project_technol = @project.projecttechnols.build

#@project_technol = Projecttechnol.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end 
```

**创建动作：**

```
 def create
    @all_technols = Technol.all
    @project = Project.new(params[:project])

@technol = Technol.new(params[:tech])

params[:technol].each_value do |tech|

technology = Technol.find_by_tech(tech.strip)

@project_technol = @project.projecttechnols.build(:technol_id => technology.id)

end

    @project.client = params[:new_client] unless params[:new_client].blank?
    @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
    @project.tech = params[:new_tech] unless params[:new_tech].blank?
    @project.role = params[:new_role] unless params[:new_role].blank?
    @project.industry = params[:new_industry] unless params[:new_industry].blank?
    @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

还有我的 3 个模型：

**项目.rb**

```
class Project < ActiveRecord::Base
  attr_accessible  :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech , :technols

validates_presence_of :business_div, :client, :customer_benifits, :end_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

def self.like(text); "%#{text}%"; end

  def self.search(search_client, search_industry, search_role, search_techs_ids, search_business_div, search_project_owner,  search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end
    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end

#_projects = _projects.joins(:technols).
 #             where("technols.id" => search_techs_ids)

#_projects = _projects.joins(:projecttechnols).where("projecttechnols.id" => search_techs_ids)

if search_techs_ids.present?
_projects = _projects.joins(:technols).where("technols.id" => search_techs_ids)
end

    if search_business_div.present?
      _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
    end
    if search_project_owner.present?
      _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
    end

     if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end

todays_date = DateTime.now.to_date

if !search_start_date_A.blank? or !search_start_date_B.blank?
    search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
    search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
    todays_date = nil
    search_start_date_dd = nil

    end

if search_start_date_dd.blank?
    todays_date = nil
end

if search_start_date_A.present? or search_start_date_B.present?

      _projects = _projects.where [' DATE(start_date) BETWEEN ? AND ?', search_start_date_A, search_start_date_B]
    end

                if search_start_date_dd.present?
      _projects = _projects.where ['DATE(start_date) BETWEEN ? AND ?', search_start_date_dd, todays_date]
    end

    if search_keywords.present?
      _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
    end
    # now you have applied only the present scopes. return the result, and watch 
    # the query as it executes.
    _projects
  end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

**技术.rb**

```
class Technol < ActiveRecord::Base
  attr_accessible :tech

has_many :projecttechnols
has_many :projects, :through => :projecttechnols
end 
```

**工程技术.rb**

```
class Projecttechnol < ActiveRecord::Base
  attr_accessible :project_id, :technol_id

belongs_to :technol
belongs_to :project
end 
```

这是新观点的一部分，我认为这是导致问题的原因：

```
<div class="tech">

<% common_techs = [['Mainframe'],['UNIX'],['Windows Servers'],['Networking'],['CISCO'], ['Win7'], ['Telephony'], ['Web services'], ['Website'], ['Cloud'], ['Virtualisation'], ['Data Centre']] %>
 <% db_techs = Technol.all.map {|p| [p.tech]}.uniq %>

<% all_tech = common_techs + db_techs %>

<%= form_for(@technol) do |tech| %>
<div class="field">
    <%= tech.label :tech %><br />
    <%= tech.text_field :tech %>
  </div>
<%end%> 
```

当我单击提交按钮创建一个新项目时，我收到此错误：

```
 RuntimeError in ProjectsController#create

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id

app/controllers/projects_controller.rb:116:in `block in create'
app/controllers/projects_controller.rb:112:in `each_value'
app/controllers/projects_controller.rb:112:in `create' 
```

这些是我的参数：

```
 {"utf8"=>"✓",
 "authenticity_token"=>"sPyJbgBKTxa9iHWF9r0Gg/0R/v0l0/e8KwXpPebzdus=",
 "project"=>{"project_name"=>"",
 "status"=>"Active",
 "client"=>"",
 "business_div"=>"",
 "project_owner"=>"",
 "start_date"=>"01-10-2012",
 "entry_date"=>"2012-10-03",
 "end_date"=>"09-10-2012",
 "role"=>"",
 "industry"=>"",
 "summary"=>"",
 "lessons_learned"=>"",
 "customer_benifits"=>"",
 "financials"=>"",
 "keywords"=>""},
 "new_client"=>"",
 "new_business_div"=>"",
 "new_project_owner"=>"",
 "technol"=>{"tech"=>"TESTER"},
 "new_role"=>"",
 "new_industry"=>"",
 "commit"=>"Save New Project"} 
```

我是 Rails 新手，所以在尝试帮助我时请记住这一点。所有帮助将不胜感激。提前致谢。

更新：

工作代码

```
def create
    @all_technols = Technol.all
    @project = Project.new(params[:project])

@technol = Technol.new(params[:tech])

params[:technol].each_value do |tech|

technology = Technol.find_or_create_by_tech(tech.strip)

@project_technol = @project.projecttechnols.build(:technol_id => technology.id)

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:43:46.640

筛选所有内容有点困难，但每当您看到此消息时：

```
Called id for nil, which would mistakenly be ... 
```

这意味着您尝试在未正确加载的对象上调用方法（在本例中为 .id）。如果我不得不猜测这将在您的创建操作中：

```
technology = Technol.find_by_tech(tech.strip)
  @project_technol = @project.projecttechnols.build(:technol_id => technology.id)
end 
```

具体来说`technology.id`。你确定这条线：

```
technology = Technol.find_by_tech(tech.strip) 
```

是否返回预期结果？如果将其替换为`Technol.first`是否会停止错误？如果是这样`find_by_tech`就失败了。

# c# - 使用 ComplexType 参数通过 WCF webHttpBinding 上传文件

> ID：12711933
> 
> 赞同：3
> 
> 时间：2012-10-03T15:38:14.390
> 
> 标签：c#

我想寻求帮助。考虑参加以下课程：

```
public class UploadRequest{
    public byte[] Data{get;set;}

    public string Filename{get;set;}
} 
```

和 WCF 方法

```
UploadFile(UploadRequest request); 
```

我的配置是：

```
<service name="WCF.Messenger" behaviorConfiguration="DefaultBehavior">
  <endpoint                 binding="basicHttpBinding" contract="WCF.Interfaces.IMessenger" bindingConfiguration="soapBinding"/>
  <endpoint address="json"  binding="webHttpBinding" behaviorConfiguration="jsonBehavior" contract="WCF.Interfaces.IMessenger" bindingConfiguration="jsonBinding"/>
  <endpoint address="mex"   binding="mexHttpBinding" contract="IMetadataExchange"/>
</service> 
```

我可以通过 HTTP Web 请求以某种方式调用此方法吗？

感谢您的任何回复

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T15:42:33.253

如果您想通过 http Web 请求调用此方法，则必须使用 WCF REST 服务

请看这个：[WCF 休息服务](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)

# database - 如何查看谁更改了表结构？

> ID：12711938
> 
> 赞同：2
> 
> 时间：2012-10-03T15:38:31.123
> 
> 标签：database, postgresql, audit

postgresql 是否记录架构、表、索引、触发器和存储过程的更改？我不是指数据的变化，而是数据库结构的变化。

在网上搜索我总是以数据审计解决方案告终，这不是我的问题。但是，我确实知道，表和 SP 是数据库某处主表中的记录。

postgresql中有这样的日志吗？如果没有，我怎么能创建一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:45:05.053

默认情况下，这种类型的日志不会保存在任何 postgres 表中。我认为你能得到的最接近的方法是让 postgres 记录所有`ALTER`和`CREATE`语句。然后您可以在日志中查看时间戳和特定修改。您应该可以通过调整 log_statement() 参数来做到这一点。更多细节在这里：[http ://www.postgresql.org/docs/9.1/static/runtime-config-logging.html#GUC-LOG-STATEMENT](http://www.postgresql.org/docs/9.1/static/runtime-config-logging.html#GUC-LOG-STATEMENT)

# css - Disqus 2012 - 如何删除讨论/社区导航？

> ID：12711939
> 
> 赞同：1
> 
> 时间：2012-10-03T15:38:33.933
> 
> 标签：css, disqus

我想删除仅适用于移动用户的 Disqus 2012 讨论/社区导航。我希望非移动用户仍然可以看到它。可以使用 CSS 或其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:41:20.943

您可以使用媒体查询根据他们的分辨率来定位移动用户。[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)，并在该链接上有一个类，以便您可以轻松地在您的 css 中定位它。

# solaris - 不使用时禁用 Webmin？

> ID：12711941
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:38:43.887
> 
> 标签：solaris, webmin

我的 Web 服务器安装了“webmin”基于 Web 的管理控制台，可在端口 10000 上访问。通常我不使用它，除非添加一个新域名（mysite.com 等）。由于这种情况很少见，您是否建议我禁用端口 10000 以增加安全性？

我正在运行最新版本的 Solaris。如果你推荐它；如何使用 IP 表关闭端口？另外，将来我可以在再次需要时简单地重新启用端口？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:42:04.927

您可以在不使用时停止 Webmin 服务，并在计划使用时重新启动它。

# objective-c - 如何将单元格附件类型设置为字符串，IOS

> ID：12711945
> 
> 赞同：1
> 
> 时间：2012-10-03T15:39:04.157
> 
> 标签：objective-c, ios, string, uitableview

我的一些表格视图单元格有箭头，我设置箭头

`cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;`

但是在其中一个表格视图单元格中，我想显示一个简单的字符串或文本而不是箭头

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
      if ([cell.textLabel.text isEqualToString:@"Version"]){
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
} 
```

如何在表格视图单元格的最右侧显示字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:48:01.377

`cell.accessoryType`您可以设置`self.accessoryView`为 any ，而不是设置，`UIView`例如设置为`UILabel`您使用文本创建的 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:49:27.180

使用`accessoryView`单元格的属性：

```
UILabel *closureLabel = //创建你的 UILabel
cell.accessoryView = 披露标签；
[披露标签发布]；

```

# c# - C# 中具有可为空类型的 += 运算符

> ID：12711947
> 
> 赞同：20
> 
> 时间：2012-10-03T15:39:07.443
> 
> 标签：c#, operators, nullable

在 C# 中，如果我写

```
int? x = null;
x += x ?? 1 
```

我希望这相当于：

```
int? x = null;
x = x + x ?? 1 
```

因此，在第一个示例中，`x`将包含`1`第二个示例中的内容。但它没有，它包含空值。+= 运算符在未分配时似乎不适用于可空类型。为什么会这样？

**编辑**：正如所指出的，这是因为`null + 1 = null`和运算符优先级。在我的辩护中，我认为[MSDN](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)中的这条线是模棱两可的！：

> 可空类型也可以使用预定义的一元和二元运算符以及为值类型存在的任何用户定义的运算符。*如果[其中一个]*操作数为空，则这些运算符产生空值；否则，操作员使用包含的值来计算结果。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-03T15:41:11.083

以下是这两种说法的区别：

```
x += x ?? 1
x = (x + x) ?? 1 
```

第二个不是你所期望的。

以下是它们的细分：

```
x += x ?? 1
x += null ?? 1
x += 1
x = x + 1
x = null + 1
x = null

x = x + x ?? 1
x = null + null ?? 1
x = null ?? 1
x = 1 
```

# c# - System.Threading.Timer 没有启动？

> ID：12711954
> 
> 赞同：8
> 
> 时间：2012-10-03T15:39:42.580
> 
> 标签：c#, timer, freeze, compact-framework2.0

我将 C# 与 Compact Framework 2 SP2 一起使用。

设备的操作系统设置为使用我的应用程序启动，我们将应用程序称为“Loader.exe”。

加载器就是这样：一个单一的、简单的表单，在整个加载过程中显示状态消息，如有必要（外行术语，即存在错误和异常消息，或“正在启动应用程序 [xyz]”），以及在后台运行的状态机同时显示一个基本的全屏形式。

所以 Loader 的表单的构造函数最后有以下**内容**：

```
try
{
    label1.Text = "Starting GUI Init Thread...";  //debug only message
    System.Threading.Timer guiInit = new System.Threading.Timer(
        RunStateMachine, null, 2000, System.Threading.Timeout.Infinite
        );
    //callback: RunStateMachine, null argument
    //initial callback is 2000ms from this point, and doesn't run again.
}
catch (Exception ex1)
{
    label1.Text = "GUI Init Error 2";
    Failure_Label.Text = ex1.Message;
} 
```

而且“RunStateMachine”确实在与 UI 不同的线程上工作，允许显示表单，并且任何时候 RunStateMachine 需要与表单交互，例如更新消息，我都会调用一个使用 if(this.InvokeRequired){this .Invoke(...);} 其他{...}

那么，我的问题？
间歇性地，我的程序会挂起，这是因为计时器没有触发回调。我在上面的 try 块中添加了调试消息，以及许多其他地方告诉我它挂断的位置，包括“RunStateMachine”最开始处的一条消息。最终，我的程序挂在“正在启动 GUI 初始化线程...”的消息上。

这告诉我线程计时器没有在我需要的**时候**运行。
我的理论是它在定时器触发回调之前被垃圾收集。这意味着如果计时器是全局的，然后在我到达 RunStateMachine 时显式处理，它将完美运行......但我不想认为我解决了它只是为了发现这个问题会在一个月后间歇性地出现。

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T15:55:09.717

> 我的理论是它在定时器触发回调之前被垃圾收集。这意味着如果计时器是全局的，然后在我到达 RunStateMachine 时显式处理，它将完美运行......但我不想认为我解决了它只是为了发现这个问题会在一个月后间歇性地出现。

看起来您想要确认这是您的问题。**是的，这就是问题所在。**

计时器存储在一个永远不会再次使用的局部变量中。这使它有资格获得 GC。Timer 的 GC 会导致最终确定，从而导致计时器被禁用。

我建议您将计时器存储在表单类的实例字段中，并在回调触发后将其从那里删除。

# html - HTML5 拖放节点

> ID：12711956
> 
> 赞同：6
> 
> 时间：2012-10-03T15:39:46.507
> 
> 标签：html, drag-and-drop

借助 Mozilla，我可以拖放 DOM 节点元素，这要归功于`application/x-moz-node`类型。Chrome、Opera等有没有类似的类型？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:15:28.833

如果您希望跨浏览器的拖放行为一致，我建议您使用[jQueryUI](http://jqueryui.com/)。使用[Draggable](http://jqueryui.com/draggable/)和[Droppable](http://jqueryui.com/droppable/)，他们已经为您完成了所有艰苦的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:01:23.693

您可以使用 Modernizr.draganddrop 来检测 HTML 5 原生拖放功能。

如果浏览器支持此功能。可以使用 draggable=true 设置节点可拖动。否则，需要使用 JQuerUI 来支持。

# javascript - jQuery中换行的含义

> ID：12711963
> 
> 赞同：-5
> 
> 时间：2012-10-03T15:39:57.643
> 
> 标签：javascript, jquery

这里的 wrap 是什么意思？

```
// wrap this with jQuery
var $foo = $(foo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:41:32.267

`$(foo)`每次调用时都会构造一个新的 jQuery 对象。您可以将 的值保存`$(foo)`到变量中以缓存它：

```
var $foo = $(foo); 
```

在 JavaScript 中，`$`也是变量名的有效字符，因此您可以在包含 jQuery 对象的变量前面加上`$`.

没有看到其余的代码，很难说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:45:44.153

这意味着您正在获取名为“foo”的元素（或选择器，或其他）并将其传递给 jQuery 以创建为 jQuery 控制对象。这允许您执行将操纵任何 foo 的 jQuery 方法。

例如，如果 foo 是一个元素，则不能这样做：

`foo.html('Hello World');`因为 foo 不是 jQuery 对象。

但是，您可以这样做：

```
 var $foo = $(foo);
  $foo.html('Hello World'); 
```

并且 foo 元素的 innerHTML 将设置为“Hello World”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:44:31.583

Foo 被 JQuery “包装”，通过将 $() 方法的返回归因于变量，您将能够在 foo 对象上使用 JQuery 特定的方法。这是一种在不修改其原型的情况下用附加行为“装饰”对象的方法。

# c++ - 为什么 shared_ptr 不隐式转换为 shared_ptr ？

> ID：12711965
> 
> 赞同：10
> 
> 时间：2012-10-03T15:40:08.527
> 
> 标签：c++, c++11, shared-ptr, const-correctness

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T15:56:36.900

在您的情况下，问题不在于可能从/到 different 的转换`std::shared_ptr`，而是与模板函数的类型推断如何工作有关。

当编译器尝试将函数调用与模板匹配时，它将只接受**完全**匹配，即根本不接受类型转换。在这种情况下，您的函数采用 a `std::shared_ptr<const T>`，而调用者采用`std::shared_ptr<U>`where `U`is not `const`。因为匹配不是**精确的**，它会丢弃模板并选择下一个重载候选。

简单的解决方法是：完全避免类型推断并提供模板参数：

```
std::shared_ptr<A> p;
foo<A>(p);             // will use the templated shared_ptr conversion 
```

或者自己执行转换：

```
foo(std::shared_ptr<const A>(p)); 
```

# datatable - 如何找出 DataTable 中哪些列可以为空？

> ID：12711971
> 
> 赞同：1
> 
> 时间：2012-10-03T15:40:21.920
> 
> 标签：datatable, dbnull, datacolumn

有没有办法找出 DataTable 中哪些列可以为空？我知道有一个属性：DataColumn.AllowDBNull，在DataSet的设计模式中可以设置为true或false，但我想直接从数据库中获取这些信息。

我正在使用 MySQL 数据库中的值填充 DGV，并将 DGV 的 DataSource 绑定到 DataTable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:06:03.297

作为一种解决方案，我决定检索数据库的列模式并从那里分配哪些列 AllowDBNull：

```
 DataTable dbColumnsSchema;
     using (MySqlConnection connection = new MySqlConnection(ConnectionString))
        {
            connection.Open();
        dbColumnsSchema = connection.GetSchema("Columns");
            connection.Close();

        }

        AssignMandatoryColumns(dbColumnsSchema);

    }

    private void AssignMandatoryColumns(DataTable table)
    {
      foreach (DataRow row in table.Rows)
            if (row["TABLE_NAME"].ToString()==myTableName)
                if(row["IS_NULLABLE"].ToString()=="NO")
                {  string columnName = row["COLUMN_NAME"].ToString();
                    myDataSet.Tables[myTableName].Columns[columnName].
                        AllowDBNull = false;
                }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:54:26.850

您可以使用以下内容来确定 DataTable 中的哪些 DataColumns 可以为空（已[`AllowDBNull`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.allowdbnull.aspx)设置为 true）：

```
var nullableDataColumns = dataTable.Columns.Cast<DataColumn>().Where(c => c.AllowDBNull);
foreach (var col in nullableDataColumns) {
    Console.WriteLine(col.ColumnName);
} 
```

# java - DuplicateKeyException 仅在 Linux WebLogic 上引发

> ID：12711973
> 
> 赞同：0
> 
> 时间：2012-10-03T15:40:26.513
> 
> 标签：java, linux, oracle, web-applications, weblogic

我在使用 Oracle 数据库的 WebLogic 上部署了一个相对简单的 Web 应用程序。当我完成应用程序的开发并准备将其部署到生产 WebLogic 实例所在的实际 Linux 服务器时，应用程序将在所有插入时抛出 DuplicateKeyException。如果我在本地 Windows 机器上运行该应用程序并指向远程数据库，该应用程序就可以正常工作。我还应该注意，从数据库中读取的所有内容在两种环境中都可以正常工作，没有问题。

我已经删除了表上的所有主键约束，只是为了缩小问题的范围，但是每次我在 Linux 部署上执行插入查询时，它都会失败。在本地使用相同的代码、相同的远程数据库、相同版本的 WL (10.3.6) 可以完美运行。所以这里最大的变量是同一个 WAR 文件在 Linux 10.3.6 WL 服务器上抛出了 DuplicateKeyException，但在 Windows 上却没有。Linux 实例实际上位于 Oracle 托管环境中，因此虽然 DB 和 WL 位于不同的服务器上，但我认为由于我的读取命令有效，托管环境不应该与我的插入失败有任何关系。

对此的任何建议或帮助将不胜感激。我不是 Linux 人，只是一名 Java 开发人员，对此我束手无策。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:18:59.647

所以我追踪了这个问题。我继承的一些 GWT 代码正在捕获异常并将 DuplicateKeyException 抛出给客户端。我不确定为什么会抛出这个异常，但我有一个想法，即停止从一个为我做一些数据库工作的类继承，该类有很多登录信息。由于日志记录将与 Linux 文件系统而不是 Windows 进行交互，我认为这可能是不同的。瞧，当我以更原始的方式完成所有数据库交互并停止使用无关代码时，一切都奏效了。除了知道在 Linux 上部署时记录的某些内容被破坏之外，我并没有真正深入研究这一点。我将使用这个特定的程序来帮助我为一些业务人员生成一些 CSV，通常我会

# java - 如何在 AWS 中创建新用户

> ID：12711975
> 
> 赞同：6
> 
> 时间：2012-10-03T15:40:31.487
> 
> 标签：java, amazon-web-services, amazon-iam

我试图弄清楚如何使用适用于 Java 的 AWS API 创建新用户，但我不知道我需要做什么。

到目前为止，我设法编写了这段代码，它给了我一个 CreateUserRequest、一个 CreateAccessKeyRequest 和一个 BasicAWSCredentials，所有字段都填满了。

我只是不知道下一步该做什么。我必须使用 CreateUserResult 吗？如何？

```
 CreateUserRequest user = new CreateUserRequest("userName");

    CreateAccessKeyRequest key = new CreateAccessKeyRequest();

    BasicAWSCredentials cred = new BasicAWSCredentials("access", "secret");

    key.withUserName(user.getUserName());
    key.setRequestCredentials(cred);

    user.setRequestCredentials(key.getRequestCredentials());
    user.setPath("/"); 
```

编辑：我今天仍在努力。

我想我需要使用 AmazonIdentityManagementClient 类的 createUser(CreateUserRequest) 方法。（它返回一个 CreateUserResult，我不应该手动实例化这个类）

问题是，我不知道如何使用正确的 AWSCredentials 正确初始化此类（我正在使用帐户的 AccessKey 和 SecretAccessKey）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T09:52:25.880

```
CreateUserRequest user = new CreateUserRequest("userName");

CreateAccessKeyRequest key = new CreateAccessKeyRequest();

BasicAWSCredentials cred = new BasicAWSCredentials("access", "secret");

key.withUserName(user.getUserName());
key.setRequestCredentials(cred);

user.setRequestCredentials(key.getRequestCredentials());
user.setPath("/");
AmazonIdentityManagementClient client =  new AmazonIdentityManagementClient(cred);
CreateUserResult result = client.createUser(user); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:53:21.117

也许这个链接可以帮助你：

[http://docs.amazonwebservices.com/IAM/latest/APIReference/API_CreateUser.html](http://docs.amazonwebservices.com/IAM/latest/APIReference/API_CreateUser.html)

我没有使用过 Amazon S3 服务，但是使用过其他类似的服务，我必须手动创建请求并使用正确的数据对请求进行签名。

# ruby-on-rails - 如何在 declarative_authorization 中使用 with_permissions_to？

> ID：12711978
> 
> 赞同：0
> 
> 时间：2012-10-03T15:40:45.087
> 
> 标签：ruby-on-rails, declarative-authorization

我有下一个模型：

```
class AssignmentReport < ActiveRecord::Base

end 
```

并定义了 2 个权限来管理它：

```
privilege: :approve_all, context: :assignment_reports 
```

和

```
privilege: :approve_some, context: :assignment_reports 
```

当我在控制台中尝试时：

```
AssignmentReport.with_permissions_to(:approve_all, user: user) 
```

它什么都不返回（空），我希望它返回 2 条记录。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:41:54.107

您是否已将所有权限分配给用户？

否则试试

```
privilege: :approve_all, :context => :assignment_reports

privilege: :approve_some, :context => :assignment_reports

AssignmentReport.with_permissions_to(:approve_all, :user => user) 
```

声明式授权不支持新的地图表示法。

您可以尝试设置您的上下文

```
AssignmentReport.with_permissions_to(:approve_all, :user => user, :context => :assignment_reports) 
```

默认上下文是模型的表名。

# python - 按带参数的方法对 Django 对象进行排序

> ID：12711991
> 
> 赞同：0
> 
> 时间：2012-10-03T15:41:20.753
> 
> 标签：python, django

我有一个名为 Task 的模型，它根据用户返回日期。它定义了一个方法：

```
def date_for_display(self, user):
  # return some date for the task 
```

我想创建一个按此方法返回的日期排序的任务列表。我试过类似的东西：

```
user = User.objects.get(username="jamie")
sorted(Task.objects.all(), key = lambda task: task.date_for_display(user)) 
```

但无济于事。我明白了`NameError: global name 'user' is not defined`。我是否需要使用某种闭包来完成此操作？不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:00:22.663

解决这个问题的最简单方法是在 lambda 中使用关键字参数：

```
user = User.objects.get(username="jamie")
sorted(Task.objects.all(), key = lambda task, user=user: task.date_for_display(user)) 
```

这会将用户从外部范围复制到 lambda 的本地范围。

# javascript - 打开没有工具栏的窗口

> ID：12711997
> 
> 赞同：5
> 
> 时间：2012-10-03T15:41:53.047
> 
> 标签：javascript, html

我正在尝试使用下面的代码打开没有工具栏的新窗口，但它会打开带有工具栏的新窗口（至少在 IE 中）。知道我在做什么错吗？

```
<a href="http://www.google.com" onclick="popupWindow(this.href)" target="_blank"><img src="/myImage"/><a>

function popupWindow(url)
{
    window.open(url,"MyWindow","config='toolbar=no, menubar=no,scrollbars=no,resizable=no,location=no,directories=no,status=no'");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T16:16:29.957

一个快速的谷歌搜索在[DevShed](http://forums.devshed.com/html-programming-1/opening-new-window-without-toolbar-scrollbar-etc-313.html)找到了这个语法：

```
<script language="javascript">
function myPopup(url, windowname, w, h, x, y)
{
    window.open(url, windowname, "resizable=no, toolbar=no, scrollbars=no, menubar=no, status=no, directories=no, width=" + w + ", height=" + h + ", left=" + x + ", top=" + y);
}
</script> 
```

请注意，它与您自己的不同之处在于您将其`config=`作为最后一个参数的一部分，并且不需要它（正如 AlienWebguy 指出的那样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:17:33.437

您的代码中有几个问题：

*   里面应该只有3个ws`wwww.google.com`
*   不必要`config='`的。还要删除最后的关闭`'`。
*   `atus=no`应该`status=no`

更正这些问题会使弹出窗口正常工作：

```
<a href="http://www.google.com" onclick="popupWindow(this.href)" target="_blank">Click</a>
<script type="text/javascript">
function popupWindow(url)
  {
    window.open(url,"MyWindow","toolbar=no, menubar=no,scrollbars=no,resizable=no,location=no,directories=no,status=no");
  }
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T22:28:06.970

感谢大家的回复。

这里提到的问题是错别字，它们在我的原始代码中是正确的。

出于某种原因，在 IE 中，窗口的名称必须是一个空字符串。因此，如果我将“MyWindow”重命名为“”，它会起作用。奇怪但谷歌搜索显示更多人有这个问题。