# StackOverflow 问答 12950000-12950999

# android - 触摸iOS跳板中的文件夹时如何制作翻录效果？

> ID：12950007
> 
> 赞同：2
> 
> 时间：2012-10-18T08:13:24.490
> 
> 标签：android, animation, layout

[领航桌面](http://www.addictivetips.com/mobile/get-the-ios-springboard-on-your-android-homescreen-with-espier-launcher/)是一款安卓启动器应用，几乎100%抄袭了iOS跳板应用的设计，现在我很好奇触摸文件夹时，主屏幕被撕裂，文件夹被展开的撕裂效果，比如截图如下：

![在此处输入图像描述](../Images/a6c41c6eb6c6109387be904ab6d131ef.png)

现在我摸不着头脑，得到了一个线索，但实施起来并不容易，我怀疑它是否是解决方案。

这是我的想法：在触摸文件夹之前截取整个屏幕的屏幕截图，使用此屏幕截图创建一个翻录效果，该效果将用作最终效果的背景图像，因此展开后的文件夹将类似于叠加层。这是我能想到的方法，对我来说有点道理，但对我来说并不优雅。

也许我需要覆盖 GridView 并扩展它以支持我想要的，那么从哪里开始呢？

# vb.net - 如何检查空值或零

> ID：12950009
> 
> 赞同：1
> 
> 时间：2012-10-18T08:13:34.797
> 
> 标签：vb.net

使用 VB.Net

我想检查表格行是空还是0

代码

```
 sCmd = New SqlCommand("SELECT * from table1)", conObjects.myConnection)
        dReader = sCmd.ExecuteReader
        While dReader.Read()
 If dReader.Item(11) <> "0" And dReader.Item(11) IsNot Nothing Then
msgbox ("Not NUll or 0")
End if
End while 
```

将错误显示为“ `Operator '<>' is not defined for type 'DBNull' and string "0"`”

为什么我收到此错误，如何解决此问题。

需要 VB.Net 代码帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:17:26.930

您应该始终使用`AndAlso`and`OrElse`而不是`And`and `Or`。`AndAlso`后一个表达式仅在前一个返回时才被评估`true`。通过这种方式，您可以避免异常并使您的代码更有效率。

但除此之外，您应该使用[`reader.IsDBNull(index)`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)：

```
If Not dReader.IsDBNull(11) AndAlso dReader.GetString(11) <> "0" Then

End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:15:37.697

尝试使用**[`AndAlso`](http://msdn.microsoft.com/en-us/library/cb8x3kfz%28v=vs.71%29.aspx)**

```
If (dReader.Item(11) IsNot Nothing) AndAlso (cint(dReader.Item(11)) <> 0) Then
    msgbox ("Not NUll or 0")
End if 
```

基本上它的作用是，当第一个表达式已经是 时`true`，第二个表达式不会被计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:19:08.150

这里有两个问题：一个是你使用`And`而不是`AndAlso`：前者会导致你的整行被评估，而后者只会评估第二个参数，如果它的第一个参数已经是`True`。

您的第二个问题是您在检查“无”之前检查“非零”，因此您的第一部分可能会在评估第二部分之前失败。

试试这个：

```
If dReader.Item(11) IsNot Nothing AndAlso dReader.Item(11) <> "0" Then 
```

另外，自从我做 ADO 以来已经有一段时间了，但你不应该检查`IsDbNull`而不是比较`Nothing`吗？也许VB会为你处理这个问题，我不确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:28:09.600

```
If Convert.ToString(dReader.Item(11)) <> "0" AndAlso dReader.IsDBNull(11)=False 
```

# plugins - 如何使用bravia freeDWG在浏览器中打开dwg文件

> ID：12950010
> 
> 赞同：0
> 
> 时间：2012-10-18T08:13:36.317
> 
> 标签：plugins, browser, dwg

我安装了freeDWG.http://www.bravaviewer.com/viewers，它在作为桌面应用程序打开时非常好用，但它接缝我无法弄清楚如何将它用作网络浏览器插件。

我需要在浏览器中打开 dwg 文件，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:06:02.827

试试 AutoDWG 的浏览器插件，它对我来说效果很好，请参阅：[http ://www.autodwg.com/dwg-viewer/dwgviewx.htm](http://www.autodwg.com/dwg-viewer/dwgviewx.htm)

我所有的 dwg 绘图文件都可以在我的 IE 窗口中打开，除了 AutoCAD 2013 绘图文件。

# asp.net - 异常日志记录 HttpModule 不会从 ASP .NET 页面方法中捕获错误

> ID：12950011
> 
> 赞同：5
> 
> 时间：2012-10-18T08:13:45.527
> 
> 标签：asp.net, webforms

我们有一个 HttpModule 旨在捕获异常并将它们记录到数据库中。它看起来像这样：

```
public class ExceptionLoggingModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.Error += OnError;
    }

    private static void OnError(object sender, EventArgs e)
    {
        try
        {
            var context = (HttpApplication) sender;
            var exception = context.Server.GetLastError();

            if (exception != null)
            {
                // Log exception
            }
        }
        catch(Exception)
        {
        }
    }
} 
```

这通常有效，但我刚刚注意到，当*页面方法*中发生错误时，OnError 方法永远不会触发（即，代码隐藏文件中的方法标记为 WebMethod 属性）。

怎么来的？

除了在页面方法本身中重新实现异常日志记录之外，我能做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:13:04.283

我在这里找到了一个对我有用的解决方案：

[http://blogs.microsoft.co.il/blogs/oshvartz/archive/2008/05/17/asp-net-error-handling-using-httpmodule-full-and-partial-post-back-ajax-updatepanel。 aspx](http://blogs.microsoft.co.il/blogs/oshvartz/archive/2008/05/17/asp-net-error-handling-using-httpmodule-full-and-partial-post-back-ajax-updatepanel.aspx)

这是我编写的处理程序的关键点：

```
public class PathfinderModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.PostMapRequestHandler += this.OnPostMapRequestHandler;
        context.Error += OnError;
    }

    private void OnPostMapRequestHandler(object sender, EventArgs e)
    {
        Page aux = HttpContext.Current.Handler as Page;

        if (aux != null)
        {
            aux.Error += this.OnPageError;
        }
    }

    private static void OnError(object sender, EventArgs e)
    {
        // Blah..
    }

    private void OnPageError(object sender, EventArgs e)
    {
        // Blah...
    }        
} 
```

# java - JTabbedPane 问题：如何查找和跟踪现有 JTabbedPane 的选项卡

> ID：12950013
> 
> 赞同：0
> 
> 时间：2012-10-18T08:14:01.990
> 
> 标签：java, swing, tabs, jtabbedpane

我有一个使用 JTabbedPane 来显示其内容的开源应用程序。看这个截图：

[![http://i46.tinypic.com/4rrs6c.jpg](../Images/3afa5a255ba48fc511890c05f318c05a.png)](https://i.stack.imgur.com/H8JIo.jpg)

主要内容有一个 JSplitPane，左侧是 TreeMenu 对象，右侧是 JTabbedPane 对象。

当我从左侧面板单击菜单时，它将使用 JTabbedPane.addTab() 方法在 JTabbedPane 中显示菜单内容：

```
tabbedPane.addTab(menu.getTitle(), menu.getAPanel()); 
```

我需要知道如何执行此操作：当我单击已打开关联选项卡的菜单时，它不会添加新选项卡，而是应该将焦点放在已打开的选项卡上。

例如，您可以在屏幕截图中看到，我已经打开了**成本类型**选项卡。现在，如果我再次单击“**成本类型**”菜单，它应该将焦点带到“**成本类型**”选项卡，而不是添加新的“**成本类型**”选项卡。

菜单本身有一个唯一的 id 字段 (menu.getId())。但是，每次我单击菜单时，menu.getAPanel() 总是返回一个新的 APanel 实例。这意味着如果我两次单击“**成本类型**”菜单，则第一次单击和第二次单击从 menu.getAPanel() 返回的 APanel 将永远不会是同一个实例。

任何人都可以帮忙吗？

**更新：**
好吧，似乎这个问题让其他人感到困惑，老实说，我不是以英语为母语的人，这就是为什么我很难解释我的问题并且我还是找到了解决方案（感谢 MadProgrammer），所以我'我打算删除这个问题，因为我认为它不会再使其他人受益，但为了向 MadProgrammer 致敬，我将把这个问题开放两天，让他有机会提交答案并获得他应得的声誉。

只是有点好奇：
这个案例与[我之前的问题有关](https://stackoverflow.com/questions/12927112/how-to-put-jframe-into-existing-jpanel-in-java-swing)。在原始源代码中，当单击菜单时，它实际上会显示一个弹出窗口。我正在尝试将流程更改为：单击菜单时，弹出窗口被隐藏，并且弹出窗口的内容面板（APanel）被提取并作为选项卡的组件传输到 JTabbedPane 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:45:10.793

您的菜单已经包含您需要的所有信息。这是一个快速的模拟：

```
final JTabbedPane tabbedPane = new JTabbedPane();
final JComboBox items = new JComboBox(new Object[] {
        new MyMenu("one"), new MyMenu("other"), new MyMenu("got it?")
});
Action action = new AbstractAction("showInTab") {

    @Override
    public void actionPerformed(ActionEvent e) {
        MyMenu selected = (MyMenu) items.getSelectedItem();
        int index = tabbedPane.indexOfComponent(selected.getMenuPanel());
        if (index < 0) {
            tabbedPane.addTab(selected.getName(), selected.getMenuPanel());
        } else {
            tabbedPane.setSelectedIndex(index);
        }
    }
};
items.setSelectedIndex(-1);
items.setAction(action); 
```

**编辑**

这些陈述（在问题中）：

> 它将使用 tabbedPane.addTab(menu.getTitle(), menu.getAPanel()) 在 JTabbedPane 中显示菜单内容；

并在评论中：

> 这就是为什么在我最初的问题中（在我多次编辑之前），我说我不能直接使用 indexOfComponent

是相互矛盾的，因为以下断言成立：

```
int old = tabbedPane.getTabCount(); 
tabbedPane.addTab(somename, myTabContent)
assertEquals(old, tabbedPane.indexOfComponent(myTabContent)); 
```

清理一个或另一个;-)

# javascript - 如何动态调整 Shindig Gadget 的 iframe 高度

> ID：12950014
> 
> 赞同：1
> 
> 时间：2012-10-18T08:14:03.607
> 
> 标签：javascript, jquery, opensocial, apache-shindig

我想根据其中的内容动态调整 Shindig Gadget 的 iframe 的高度。经过一些研究，我发现需要这样的 iframe`src`声明`<!DOCTYPE ...>`使用以下内容在 iframe 中获取内容的高度：

```
document.getElementById("iframe").contentWindow.document.body.scrollHeight 
```

但是在`<![CDATA[`Shinding 模块中定义文档类型是不可能的。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:45:19.997

您应该使用 adjustHeight API 来执行此操作。不带任何参数调用 API 将调整 iFrame 高度以适应其内容。 [http://opensocial-resources.googlecode.com/svn/spec/trunk/Core-Gadget.xml#gadgets.window.adjustHeight](http://opensocial-resources.googlecode.com/svn/spec/trunk/Core-Gadget.xml#gadgets.window.adjustHeight)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T09:59:51.667

尝试这个

这是一个工作示例，[**请单击此处**](http://jsfiddle.net/7nbTx/)

```
<script type="text/javascript">
 function resizeIframe(obj)
  {
    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
 }
</script>

<iframe src="http://www.yahoo.com" onload='javascript:resizeIframe(this);'></iframe>

</div> 
```

# grails - Grails 中的 Seam 对话模拟

> ID：12950015
> 
> 赞同：1
> 
> 时间：2012-10-18T08:14:04.253
> 
> 标签：grails, seam

**Seam**将每个工作单元与**对话**ID 统一起来。JSF 页面具有一定的结构，可以将客户端 ajax/非 ajax 请求唯一地映射到使用可序列化/有状态 bean 操作的相应 Seam 组件（通过 cid、视图 id）。并且不用担心会话中的多个选项卡、后退/前进、会话中的对象以及担心内存泄漏等。

**我想知道 Grails 是否具有与上述类似的功能，无论是原生支持还是通过插件支持？**

据我了解，Grails 中的对话范围就像没有状态 bean 支持的 JBPM 页面流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:46:17.250

也许[WEBFLOW](http://www.grails.org/doc/latest/guide/theWebLayer.html#webflow)是您正在寻找的。

# javascript - Firefox中的滚动条

> ID：12950017
> 
> 赞同：0
> 
> 时间：2012-10-18T08:14:19.630
> 
> 标签：javascript, asp.net-mvc-3, firefox, scrollbar

我有一个 Javascript 代码，它打开一个包含表格的弹出窗口。问题是表格包含太多行，无法在屏幕区域显示。在 IE 和 Chrome 上，我有一个可以上下移动的滚动条，但在 Firefox 上我没有。这是javascript代码：

```
 function openWindowInsertResp() {
     .............
dropDownValueA + "&subactivityID=" + dropDownValueS, "PartialTask", "status = 1,height = auto,width = 900,top = 100,left=250,resizable = 1");
.............
    } 
```

这是HTML：

```
<table style="border:none; width:100%;">
<tr>
<th style="text-align:center;">
No.</th>
<th style="text-align:center;">Description</th></tr>
@{
    int i=1;
    foreach (Project.Domain.Entities.Labor_JobDesc cr in contracts)
    {
        <tr style="border:none">
        <td style="text-align:center; width:2%;">@i</td>
        <td style="text-align:center;">
         <textarea cols="auto"; rows="auto"; style="width:100%;"; readonly="readonly"> @cr.Res</textarea>
        </td>
        </tr>
        i++;
    }
}
</table> 
```

我必须做什么才能在 Firefox 上拥有滚动条？有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:19:52.563

尝试将 'scrollbars=1' 添加到您的 window.open 选项中：

```
window.open(url, name, "status = 1, ... ,resizable = 1, scrollbars=1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:20:38.020

采用

```
window.open(adress, '....other params..., scrollbars = yes') 
```

# python - 在分层数据框上添加带有 groupby 的列

> ID：12950024
> 
> 赞同：9
> 
> 时间：2012-10-18T08:14:42.003
> 
> 标签：python, group-by, pandas

我有一个结构如下的数据框：

```
First     A                             B                         
Second  bar       baz       foo       bar       baz       foo     
Third   cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog
0         3    8    7    7    4    7    5    3    2    2    6    2
1         8    6    5    7    8    7    1    8    6    0    3    9
2         9    2    2    9    7    3    1    8    4    1    0    8
3         3    6    0    6    3    2    2    6    2    4    6    9
4         7    6    4    3    1    5    0    4    8    4    8    1 
```

所以有三个列级别。我想在第二级添加一个新列，其中每个第三级都执行计算，例如“new”=“foo”+“bar”。所以生成的数据框看起来像：

```
First     A                                       B                                   
Second  bar       baz       foo       new       bar       baz       foo       new     
Third   cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog
0         3    8    7    7    4    7    7   15    5    3    2    2    6    2   11    5
1         8    6    5    7    8    7   16   13    1    8    6    0    3    9    4   17
2         9    2    2    9    7    3   16    5    1    8    4    1    0    8    1   16
3         3    6    0    6    3    2    6    8    2    6    2    4    6    9    8   15
4         7    6    4    3    1    5    8   11    0    4    8    4    8    1    8    5 
```

我找到了一个在这篇文章末尾列出的解决方法，但它根本不是“熊猫风格”并且容易出错。组上的应用或转换功能似乎是正确的方法，但经过数小时的尝试，我仍然没有成功。我认为正确的方法应该是这样的：

```
def func(data):

    fi = data.columns[0][0]
    th = data.columns[0][2]

    data[(fi,'new',th)] = data[(fi,'foo',th)] + data[(fi,'bar',th)]

    print data
    return data

print grouped.apply(func) 
```

新列已正确添加到函数中，但不会返回。如果 df 中已经存在“新”列，则使用与变换相同的函数将起作用，但是如何在“动态”或分组之前在特定级别添加新列？

生成示例 df 的代码是：

```
import pandas, itertools

first = ['A','B']
second = ['foo','bar','baz']
third = ['dog', 'cat']

tuples = []
for tup in itertools.product(first, second, third):
    tuples.append(tup)

columns = pandas.MultiIndex.from_tuples(tuples, names=['First','Second','Third'])

data = np.random.randint(0,10,(5, 12))
df = pandas.DataFrame(data, columns=columns) 
```

我的解决方法：

```
dfnew = None
grouped = df.groupby(by=None, level=[0,2], axis=1)

for name, group in grouped:
    newparam = group.xs('foo', axis=1, level=1) + group.xs('bar', axis=1, level=1)

    dftmp = group.join(pandas.DataFrame(np.array(newparam), columns=pandas.MultiIndex.from_tuples([(group.columns[0][0], 'new', group.columns[0][2])], names=['First','Second', 'Third'])))

    if dfnew is None:
        dfnew = dftmp
    else:
        dfnew = pandas.concat([dfnew, dftmp], axis=1)

print dfnew.sort_index(axis=1) 
```

哪个有效，但是为每个组创建一个新的数据框并“手动”分配级别是一种非常糟糕的做法。

那么这样做的正确方法是什么？我发现了几个处理类似问题的帖子，但所有这些都只有 1 级列，而这正是我正在努力解决的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T15:31:46.603

这里的 API 肯定有一个弱点，但我不确定是否要让你更容易做你正在做的事情。这是解决此问题的一种简单方法，至少对于您的示例：

```
In [20]: df
Out[20]: 
First     A                             B                         
Second  foo       bar       baz       foo       bar       baz     
Third   dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat
0         7    2    9    3    3    0    5    9    8    2    0    6
1         1    4    1    7    2    3    2    3    1    0    4    0
2         6    5    0    6    6    1    5    1    7    4    3    6
3         4    8    1    9    0    3    9    2    3    1    5    9
4         6    1    1    5    1    2    2    6    3    7    2    1

In [21]: rdf = df.stack(['First', 'Third'])

In [22]: rdf['new'] = rdf.foo + rdf.bar

In [23]: rdf
Out[23]: 
Second         bar  baz  foo  new
  First Third                    
0 A     cat      3    0    2    5
        dog      9    3    7   16
  B     cat      2    6    9   11
        dog      8    0    5   13
1 A     cat      7    3    4   11
        dog      1    2    1    2
  B     cat      0    0    3    3
        dog      1    4    2    3
2 A     cat      6    1    5   11
        dog      0    6    6    6
  B     cat      4    6    1    5
        dog      7    3    5   12
3 A     cat      9    3    8   17
        dog      1    0    4    5
  B     cat      1    9    2    3
        dog      3    5    9   12
4 A     cat      5    2    1    6
        dog      1    1    6    7
  B     cat      7    1    6   13
        dog      3    2    2    5

In [24]: rdf.unstack(['First', 'Third'])
Out[24]: 
Second  bar                 baz                 foo                 new               
First     A         B         A         B         A         B         A         B     
Third   cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog
0         3    9    2    8    0    3    6    0    2    7    9    5    5   16   11   13
1         7    1    0    1    3    2    0    4    4    1    3    2   11    2    3    3
2         6    0    4    7    1    6    6    3    5    6    1    5   11    6    5   12
3         9    1    1    3    3    0    9    5    8    4    2    9   17    5    3   12
4         5    1    7    3    2    1    1    2    1    6    6    2    6    7   13    5 
```

您当然可以根据自己的喜好重新排列：

```
In [28]: rdf.unstack(['First', 'Third']).reorder_levels(['First', 'Second', 'Third'], axis=1).sortlevel(0, axis=1)
Out[28]: 
First     A                                       B                                   
Second  bar       baz       foo       new       bar       baz       foo       new     
Third   cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog  cat  dog
0         3    9    0    3    2    7    5   16    2    8    6    0    9    5   11   13
1         7    1    3    2    4    1   11    2    0    1    0    4    3    2    3    3
2         6    0    1    6    5    6   11    6    4    7    6    3    1    5    5   12
3         9    1    3    0    8    4   17    5    1    3    9    5    2    9    3   12
4         5    1    2    1    1    6    6    7    7    3    1    2    6    2   13    5 
```

# php - Magento MySQL 连接需要关闭

> ID：12950025
> 
> 赞同：2
> 
> 时间：2012-10-18T08:14:44.723
> 
> 标签：php, magento

我已经使用下面的代码打开了 MySQL 数据库连接

```
Mage::getSingleton('core/resource')->getConnection('core_write'); 
```

我需要自己关闭这个mysql连接还是Magento默认处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:23:41.683

不，您不必关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:49:10.993

您需要关闭数据库连接，因为如果您没有在自定义查询中关闭与数据库的连接，那么它将成为睡眠查询。我面临的问题是正确的 mysql 服务器充满了睡眠查询。我为那个找到解决方案。

# wicket - AbstractAjaxTimerBehavior 立即启动

> ID：12950028
> 
> 赞同：0
> 
> 时间：2012-10-18T08:14:56.607
> 
> 标签：wicket, wicket-1.5

我正在尝试将 AbstractAjaxTimerBehavior 设置为在调用时立即启动，然后每 X 秒重复一次（比如说 10 秒），但我找不到任何东西。我想到了一个技巧，将第一个间隔设置为 1 秒，然后在 onTimer 方法中，将每次间隔设置为所需的 X 秒。

```
myBehavior = new AbstractAjaxTimerBehavior(Duration.seconds(1)) {

    private static final long serialVersionUID = 1L;

    @Override
    protected void onTimer(AjaxRequestTarget target) {
        this.setUpdateInterval(Duration.seconds(10));
        .
        .
        .
    }
} 
```

有没有更好的方法来做到这一点，而不必每次都在 onTimer 中设置间隔？谢谢！

# wifi - Arduino + WPA2-企业

> ID：12950031
> 
> 赞同：0
> 
> 时间：2012-10-18T08:15:14.760
> 
> 标签：wifi, arduino, wireless, wpa

如果 anoyone 有一个线程的链接，有人成功地将 arduino 连接到 WPA2-Enterprise 连接，请回复一个链接。

Sparkfun 的 WiFly 屏蔽手册[http://www.sparkfun.com/datasheets/Wireless/WiFi/rn-131G-ds.pdf](http://www.sparkfun.com/datasheets/Wireless/WiFi/rn-131G-ds.pdf) 提到了对 WPA2-Enterprise 的支持；

但是，本[手册](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&cad=rja&ved=0CD0QFjAD&url=http%3A%2F%2Fwww.rovingnetworks.com%2Fresources%2Fdownload%2F93%2Fwifly_user_manual&ei=Xbh_UJmfLYO-yQGs64D4DA&usg=AFQjCNFkOVaKF1DKAvVrVcWDUThMJCeSHg&sig2=5IK5el5V6-8QWkKY0aMCwA)的“支持的接入点”部分说它不

那是什么。可以做到吗？如何将我的 arduino 连接到 WPA2-Enterprise Connection？请帮忙。我愿意买一个新的盾牌，但我正在寻找一个线程，表明它已经用那个硬件完成了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:24:13.763

我有一个 WiFly 防护罩，但我没有成功将它与 WPA2 Enterprise 连接，但它在 WEP 上运行良好。

# c - 两个线程调用函数的不可预测的结果

> ID：12950032
> 
> 赞同：0
> 
> 时间：2012-10-18T08:15:34.347
> 
> 标签：c, multithreading, real-time

我希望有人可以帮助我解决我需要修复的 C 程序中的一些不可预测的行为：

我有两个 Xenomai 实时任务（线程）等待它们从两条 CAN 总线之一接收到传入消息。
每个任务都调用一个函数 checkMessageNumber() 但是我得到了不可预测的结果。

请注意，我使用的是基于优先级的单线程系统。一个线程比另一个线程具有优先级，但是当另一个线程具有优先权时，一个线程可能会在执行过程中部分执行。
未来有可能将硬件升级为多线程系统，但是这部分程序仍将仅限于单个线程（一个 CPU 内核）。

我的理解是每个线程都会调用它自己的这个函数的实例，所以我不知道发生了什么。

```
int getMessageIndex(unsigned int msg_number)
{
    unsigned int i = 0;
    while(i < global_number_message_boxes)
    { 
        if (global_message_box[i].id == msg_number}
            return i; // matched the msg number, so return the index number
        i++;
    }
    return -1; // no match found
} 
```

最初这个函数是高度不可预测的，并且由于消息流入并由两个任务处理（取决于消息来自哪个硬件总线），即使传入的“msg_number”确实与“id”匹配，该函数有时也会返回 -1 ' 在 'global_message_box' 结构中。

通过将'global_number_message_boxes'设置为整数，我能够使其更好地工作：
例如。 `while(i < 50)`
但是，即使应该有匹配项，该函数有时仍会返回 -1。

我只在读取全局变量，那么为什么它们会损坏？我需要了解什么？

我的想法是简化事情，因此传入的“msg_number”只是“global_message_box”中的“id”。
然后每个线程将直接写入结构，而不必检查要写入的“id”。
使用互斥锁有多重要？由于系统设计，每个线程永远不会写入结构的同一部分，所以我不确定它是否重要？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:22:14.573

This likely comes down to lack of thread synchronisation around the global struct: you say this function is just reading. Sure, but what if another thread calls another function that writes `global_number_message_boxes` or `global_message_box`? In a system where you have globals and multiple threads accessing them the safes rule is: put a lock around every access. Maybe the platform you use even supports read/write locks, so multiple threads can read at the same time as long as none is writing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:24:10.753

Lock 和 Semaphores 将成为您的朋友。使用两个线程写入数据会导致许多问题。

当线程进入函数时，您将不得不阻塞其他线程并在退出时取消阻塞这些线程。这将确保线程安全操作并产生一致的结果。

# android - Android 4 ActionBar - 使用 Action Bar Sherlock 时更改 textColor

> ID：12950038
> 
> 赞同：0
> 
> 时间：2012-10-18T08:15:52.560
> 
> 标签：android, styles, actionbarsherlock, textcolor

我正在使用 ActionBarSherlock，几乎一切正常。但我希望标题文本颜色为白色。使用 Sherlock-Actionbar 时，它可以正常工作，但不适用于 Android 4 中的原始 ActionBar

在绝望的行为中，我尝试了这个：

```
 <style name="Widget.AppTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
        <item name="titleTextStyle">@style/TextAppearance.AppTheme.Widget.ActionBar.Title</item>
        <item name="android:gravity">center</item>

        <item name="android:background">@color/white</item>
        <item name="android:textColor">@color/white</item>
</style> 
```

并发现背景更改为白色。所以这显然是改变的正确地方。但是仍然将 textColor 更改为白色对我不起作用。

我用这个作为我的主题：

```
<style name="AppTheme" parent="Theme.Sherlock.Light">
        <item name="android:actionBarStyle">@style/Widget.AppTheme.ActionBar</item>
        <item name="actionBarStyle">@style/Widget.AppTheme.ActionBar</item>

        <item name="textColorPrimary">@color/white</item>
        <item name="android:textColor">@color/white</item>
        ...
</style> 
```

那么知道可能是什么问题吗？为什么它适用于背景而不适用于 textColor？

谢谢，托拜厄斯

**--- 从这里编辑 ---**

我刚刚发现如果我以编程方式使用我的主题

```
setTheme(R.style.Widget_AppTheme_ActionBar); 
```

有用。但是，如果我依赖我在 Manifest 中的设置，它不会。

```
<application ... android:theme="@style/AppTheme" > 
```

但

```
<application ... android:theme="@style/Widget_AppTheme_ActionBar" > 
```

会做得很好 - 即使不会设置 AppTheme 的其他样式。所以看起来使用定义自己的 ActionBarStyle 的主题不起作用。

有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T11:27:44.477

好的，很抱歉回答我自己的问题。我终于意识到了我的问题。当然，我必须使用这两个论点

```
<item name="titleTextStyle">@style/TextAppearance.AppTheme.Widget.ActionBar.Title</item>
<item name="android:titleTextStyle">@style/TextAppearance.AppTheme.Widget.ActionBar.Title</item> 
```

因为第一个适用于带有 ActionBarSherlock 的 Android 2.x，而第二个适用于本机 Action Bar。

我希望这可以帮助和我遇到同样麻烦的人。

# mysql - 在 cakephp 中创建我自己的保存命令

> ID：12950039
> 
> 赞同：0
> 
> 时间：2012-10-18T08:15:53.657
> 
> 标签：mysql, cakephp

众所周知，cakephp 具有用于将记录插入数据库的默认保存命令。但我想知道我可以在 cakephp 中创建自己的保存命令还是修改现有的命令。我可以这样做吗？

你一定在问我为什么要问我为什么这么说？让我给你一个活生生的例子----假设我有一个包含用户输入的用户名的文本框。我不认为这是唯一的，因此多个用户将插入相同的用户名（可能..） .

Ex-我的名字是 prakash Gupta，我正在使用用户名“prakash”。还有其他用户的名字也可以是 prakash gupta，他们将提供相同的用户名。现在为了解决这个问题，我正在使用随机函数并在用户名后面附加一些数字，这样每个人都会有所不同。现在“保存”命令将采用我在文本框中输入的用户名并插入数据库，但我想将修改后的用户名插入我通过随机函数生成的数据库中。这可能吗？？？如果是，请告诉我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:24:33.940

通常您不会更改标准的，而是添加另一个或使用 beforeSave 等钩子。

保存功能是模型的一部分。通常你修改它们： 行为。请参阅：[http](http://book.cakephp.org/2.0/en/models/behaviors.html) ://book.cakephp.org/2.0/en/models/behaviors.html它们允许您修改模型、保存等，而无需将所有代码直接编码到您的模型中。

*根据您的编辑：*

**唯一约束**

如我所见，您想要一个唯一的用户名。有多种解决方案。首先确保设置约束。甚至您的 random() 技巧也可能会生成重复，因为 random 也可以创建相同的。所以 username.random(4) 可以生成多次：username1234。你不能确定。

约束应设置在例如您的模型级别。从对 CakePHP 的验证开始这个独特的检查。

**您何时知道用户名已被使用**

您将知道验证失败的时间。所以首先验证记录。所以在保存调用 model::validate() 之前检查你的唯一约束是否正常。如果是，请保存。 [http://book.cakephp.org/2.0/en/models/data-validation.html](http://book.cakephp.org/2.0/en/models/data-validation.html)

如果不是，您可以添加随机字符串并再次检查。调用 model::validate 看看现在是否正常。例如，这部分可以在 beforeSave() 方法中的行为中实现。

现在你有一个独特的保存你的记录。确保检查它是否成功，因为可能同时添加了具有该用户名的另一条记录。在这种情况下，重新运行该过程。

**很多工作**

这很困难，因为多个客户端甚至可以在您知道之前在数据库中同时添加数据。最简单的是捕获错误，因此只需使用您的用户名调用 save 即可。如果由于您的唯一约束而失败，请添加 random() 字符串并一次又一次地尝试。应该可以保存。在这里使用您的随机字符串进行技巧，因为如果它很短并且用户名被大量使用，您可能会遇到问题。如果您的随机字符串是 3 个数字，您可以使用相同的用户名 1000 次，从 000 到 999。

**其他选项**

您有时会看到建议，界面会根据您的用户名输入建议一些免费名称。你仍然需要检查。

**另一种选择** 只是告诉用户它正在使用中。也许添加一个 ajax 检查，这样您就可以通过验证字段来立即显示结果。

# .net - 使用 RichtTextBox 将文本保存为 rtf

> ID：12950044
> 
> 赞同：0
> 
> 时间：2012-10-18T08:16:11.740
> 
> 标签：.net, vb.net, file-io, richtextbox, rtf

我有一个 vb2010 应用程序，想将文本保存为 rtf 文档。

我这样做如下：

```
Dim rtb As New RichTextBox
rtb.Text = "something"
rtb.SaveFile(myfile) 
```

但该文件保存为一个空的 rtf 文档。

如果我再次重复 savefile 行（第 3 行），它会起作用，并且我会得到我的 rtf 文件文档。

这里的“工作”代码：

```
Dim rtb As New RichTextBox
rtb.Text = "something"
rtb.SaveFile(myfile)
rtb.SaveFile(myfile) 
```

换句话说，就像第一个 SaveFile（第 3 行）指令初始化 RichtTextBox 和下一行（第 4 行）保存文件一样。

出了点问题，但我在仅有的 3 行代码中找不到任何东西！有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:11:31.290

我建议您从属性“Rtf”获取 RTF 并将其手动保存到文件中，例如在 C# 中

（对不起，我是 C# 程序员，不是 VB）：

```
 RichTextBox rtb = new RichTextBox();
        rtb.Text = "Something";
        System.IO.File.WriteAllText(@"d:\Something.rtf", rtb.Rtf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:24:55.540

尝试使用

```
Application.DoEvents(); 
```

前

```
rtb.SaveFile(myfile) 
```

# objective-c - 在 NSMutableArray 崩溃中删除项目的快速枚举

> ID：12950045
> 
> 赞同：3
> 
> 时间：2012-10-18T08:16:14.387
> 
> 标签：objective-c, nsmutablearray, fast-enumeration

我有一个奇怪的问题，如果我在 forin 枚举中删除我的项目，它会崩溃，所以像这样：

```
for (Obstacle *obstacleToTrack in _obstaclesToAnimate) {
    //this if else not so important for happening crash
    if(obstacleToTrack.distance > 0){
        obstacleToTrack.distance -= _playerSpeed * _elapsed;
    }else{
        if (obstacleToTrack.watchOut) {
            obstacleToTrack.watchOut = NO;
        }
        obstacleToTrack.x -= (_playerSpeed + obstacleToTrack.speed) * _elapsed;
    }
    if (obstacleToTrack.x < -obstacleToTrack.width || _gameState == GS_OVER) {
        [self removeChild:obstacleToTrack];
        //this line makes crash happen , if remove this line code work fine
        [_obstaclesToAnimate removeObject:obstacleToTrack];
    }
} 
```

如果我将代码更改为

```
NSMutableArray *forRemoving = [[NSMutableArray alloc]init];
for (Obstacle *obstacleToTrack in _obstaclesToAnimate) {
    //this if else not so important for happening crash
    if(obstacleToTrack.distance > 0){
        obstacleToTrack.distance -= _playerSpeed * _elapsed;
    }else{
        if (obstacleToTrack.watchOut) {
            obstacleToTrack.watchOut = NO;
        }
        obstacleToTrack.x -= (_playerSpeed + obstacleToTrack.speed) * _elapsed;
    }
    if (obstacleToTrack.x < -obstacleToTrack.width || _gameState == GS_OVER) {
        // code change here
        [self removeChild:obstacleToTrack];
        [forRemoving addObject:obstacleToTrack];
    }
}
for(Obstacle *obstacleToTrack in forRemoving){
    [_obstaclesToAnimate removeObject:obstacleToTrack];
    [forRemoving removeObject:obstacleToTrack];
}
[forRemoving release]; 
```

这会很完美，有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T08:20:51.873

答案是，如果您删除一个对象，则该数组中的其他对象会在数组中移动位置，因为删除了一个项目。

例如，我们有一个包含 4 个项目的数组，如果我们删除第一个项目（项目 0），则以前位于索引 1 的项目现在位于索引 0，而位于 2 的项目现在位于 1。因此枚举中断。

您可以通过从倒数到 0 循环遍历数组来解决此问题：

```
for (int i = [array count]-1; i >= 0; i--) {
    id object = [array objectAtIndex:i];

    if (some check) {
       [array removeObjectAtIndex:i];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T08:28:31.623

就像 rckoenes 所说，您通过在遍历数组时删除数组中的内容来打破枚举。

您可以做的是有第二个数组，您可以在其中插入要删除的对象。然后，在您的枚举完成后，您可以从第一个数组中删除在第二个数组中找到的所有对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:22:48.797

在迭代其项目时​​，您不得修改集合。

如果你基于索引进行迭代（即经典的 for 循环），你可以删除一些东西，但要小心调整你的索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T09:03:38.380

检查此链接

[https://developer.apple.com/library/mac/documentation/cocoa/conceptual/Collections/Articles/Enumerators.html](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/Collections/Articles/Enumerators.html)

> 枚举是“安全的”——枚举器有一个突变保护，因此如果您在枚举期间尝试修改集合，则会引发异常。

# bundle - 在 64 位机器上创建 32 位 JavaFx Native Bundle

> ID：12950051
> 
> 赞同：7
> 
> 时间：2012-10-18T08:16:27.060
> 
> 标签：bundle, native, 32bit-64bit, javafx-2, 32-bit

我的机器和 IDE 具有以下配置

产品版本：NetBeans IDE 7.2（内部版本 201207171143）Java：1.7.0_07；Java HotSpot(TM) 64 位服务器 VM 23.3-b01 系统：在 amd64 上运行的 Windows 7 版本 6.1；CP1252; en_US (注)

在构建期间创建的 JavaFx 包 (.exe) 是 64 位的。我的用户在 32 位机器上，所以我需要在 32 位中创建包。有什么方法可以使用我的机器创建 32 位 exe 文件

尝试下载 32 位 JDK 并在项目属性中指出相同的内容，但我不确定 exe 是否以 32 位创建，因为在任务管理器中，应用程序不知道它旁边的 *32。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-23T00:21:11.367

您可以使用 32 位 JDK：

```
 <fx:platform basedir="C:\Program Files (x86)\Java\jdk1.8.0_121"/> 
```

# regex - Perl 正则表达式分隔符 /.../ 和 #...# 之间的区别

> ID：12950054
> 
> 赞同：8
> 
> 时间：2012-10-18T08:16:58.367
> 
> 标签：regex, perl, syntax

今天我遇到了 Perl 正则表达式匹配的两种不同语法。

```
#I have a date string
my $time = '2012-10-29';

#Already familiar "m//":
$t =~ m/^(\d{4}-\d\d-\d\d)$/

#Completely new to me m##.
$t =~ m#^(\d{4}-\d\d-\d\d)#/ 
```

`/expression/`现在和有什么区别`#expression#`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T08:30:58.050

正如其他人所说，您可以在`m`.

`/`有一个特殊功能：您可以单独使用它，例如

```
$string =~ /regexp/; 
```

相当于：

```
$string =~ m/regexp/; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T08:37:19.597

Perl 允许您使用几乎任何字符来分隔字符串，包括正则表达式。如果您需要匹配包含大量斜杠字符的模式，这将特别有用：

```
$slashy =~ m/\/\//;   #Bad
$slashy =~ m|//|;   #Good 
```

根据[文件](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)，其中第一个是“倾斜牙签综合症”的例子。

大多数**但不是所有**角色在转义时的行为方式都相同。有一个重要的例外：`m?...?`是一种特殊情况，它只匹配对`reset()`.

另一个例外：如果使用单引号作为分隔符，则不进行变量插值。但是，您仍然必须转义`$`，因为它是与行尾匹配的特殊字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T08:18:35.513

除了你必须在正则表达式中逃避的东西之外，什么都没有。您可以使用任何您喜欢的匹配字符。

```
$string = "http://example.com/";
$string =~ m!http://!;
$string =~ m#http://!#;
$string =~ m{http://};
$string =~ m/http:\/\//; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T08:20:40.020

在匹配或搜索/替换运算符（分别为`m`和`s`）之后，您可以使用任何字符作为分隔符，例如`#`您的情况。这也适用于成对的括号：`s{ abc (.*) def }{ DEF $1 ABC }x`.

优点是您不必转义`/`（当然是实际的分隔符）。它通常用于清晰起见，尤其是在处理路径或协议之类的事情时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T08:22:26.823

没有区别; “/”和“#”字符用作表达式的分隔符。它们只是标记表达式的“边界”，而不是表达式的一部分。理论上，您可以使用大多数非字母数字字符作为分隔符。[这里](http://www.php.net/manual/en/regexp.reference.delimiters.php)是关于Perl兼容正则表达式语法的PHP手册的链接（不管是PHP手册，Regex语法都是一样的，我只是喜欢它，因为它解释得很好）；阅读有关分隔符的部分

# macos - 在确定的时间内运行脚本

> ID：12950055
> 
> 赞同：0
> 
> 时间：2012-10-18T08:17:13.997
> 
> 标签：macos, timer, applescript

我想在确定的时间内运行一个applescript。当计数器达到 0 时，脚本应该停止工作。

我在网上找到了一个像这样的计时器代码：

```
set input to text returned of (display dialog "Enter length of timer" default answer "")
delay input
beep 
```

但与其等待那段时间，我更愿意执行脚本的所有周期和动作。有什么简单的方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:22:12.420

```
set start to current date
repeat
    say "a"
    if (current date) - start ≥ 3 then exit repeat
    delay 1
end repeat 
```

# android - 如何制作像 android market 一样的 listview。即分为两列

> ID：12950058
> 
> 赞同：2
> 
> 时间：2012-10-18T08:17:21.520
> 
> 标签：android, android-listview

我想知道如何实现`listview`类似 android 市场。

![在此处输入图像描述](../Images/df23d810cdadb1f280a4357fc670a40b.png)

在右侧面板中，a`listview`分为两行。这非常有用，因为它节省了大量空间，用户一次可以查看几乎两个项目`listview`。我该如何实现呢？有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T08:26:44.000

您可以使用 GridView 而不是两列的 ListView..

[1\. 网格视图](http://developer.android.com/guide/topics/ui/layout/gridview.html)

[2\. GridView 示例](http://www.mkyong.com/android/android-gridview-example/)

样品设计：![在此处输入图像描述](../Images/b90344da1f80fb49297021f66600a319.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:36:48.877

Android Market 还使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)在页面之间滚动。[这](http://manishkpr.webheavens.com/android-viewpager-example/)是一个关于如何实现它的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:21:22.260

还有另一个与此相关的问题。检查以下链接，它可能会对您有所帮助：

[如何在 Android 中显示两列 ListView？](https://stackoverflow.com/questions/2432951/how-to-display-a-two-column-listview-in-android)

修改你的 *.xml 文件以获得你想要的。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T08:22:18.510

1.  如果您想使用 listView 执行此操作，则列表视图中的每个项目（行）应包含两个视图。您可以使用两个并排的项目的相对布局（或线性布局）来做到这一点。
2.  您还可以使用具有两列的 gridview 来实现这一点。

# haskell - 反转折叠

> ID：12950063
> 
> 赞同：5
> 
> 时间：2012-10-18T08:17:41.530
> 
> 标签：haskell, fold

假设我们认为以下是一个好主意：

```
data Fold x y = Fold {start :: y, step :: x -> y -> y}

fold :: Fold x y -> [x] -> y 
```

在这种方案下，诸如`length`或之类的函数`sum`可以通过`fold`以适当的`Fold`对象作为参数调用来实现。

现在，假设您想做一些巧妙的优化技巧。特别是，假设你想写

```
unFold :: ([x] -> y) -> Fold x y 
```

`RULES`规则这样的编译指示应该相对容易`fold . unFold = id`。但有趣的问题是……我们真的可以*实现* `unFold`吗？

显然，您可以使用`RULES`任意代码转换，无论它们是否保留代码的原始含义。但是你真的能写出一个`unFold`实现它的类型签名所暗示的实现吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T08:34:09.240

不，这是不可能的。证明：让

```
f :: [()] -> Bool
f[] = False
f[()] = False
f _ = True 
```

首先我们必须， for `f' = unFold f`， have `start f' = False`，因为当折叠空列表时，我们直接得到起始值。然后我们必须要求`step f' () False = False`实现`fold f' [()] = False`。但是现在进行评估时`fold f' [(),()]`，我们将再次只得到一个调用`step f' () False`，我们必须将其定义为`False`，导致`fold f' [(),()] ≡ False`，而`f[(),()] ≡ True`。所以不存在`unFold f`满足`fold $ unFold f ≡ f`。□</p>

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T15:50:00.647

你可以，但你需要对它进行轻微的修改`Fold`才能把它拉下来。

列表上的所有函数都可以表示为折叠，但有时为了实现这一点，*需要额外的簿记*。假设我们向您的类型添加了一个额外的类型参数`Fold`，它传递了这个额外的上下文信息。

```
data Fold a c r = Fold { _start :: (c, r), _step :: a -> (c,r) -> (c,r) } 
```

现在我们可以`fold`像这样实现

```
fold :: Fold a c r -> [a] -> r
fold (Fold step start) = snd . foldr step start 
```

现在，当我们试图走另一条路时会发生什么？

```
unFold :: ([a] -> r) -> Fold a c r 
```

从哪里来`c`？函数是不透明的值，因此很难知道如何检查函数并知道它依赖于哪些上下文信息。所以，让我们作弊一点。我们将“上下文信息”作为整个列表，所以当我们到达最左边的元素时，我们可以将函数应用于原始列表，忽略之前的累积结果。

```
unFold :: ([a] -> r) -> Fold a [a] r
unFold f = Fold { _start = ([], f [])
                , _step = \a (c, _r) -> let c' = a:c in (c', f c') } 
```

* * *

现在，可悲的是，这不一定与 组成`fold`，因为它要求`c`必须是`[a]`。让我们通过`c`存在量化隐藏来解决这个问题。

```
{-# LANGUAGE ExistentialQuantification #-}
data Fold a r = forall c. Fold
  { _start :: (c,r)
  , _step :: a -> (c,r) -> (c,r) }

fold :: Fold a r -> [a] -> r
fold (Fold start step) = snd . foldr step start

unFold :: ([a] -> r) -> Fold a r
unFold f = Fold start step where
  start = ([], f [])
  step a (c, _r) = let c' = a:c in (c', f c') 
```

现在，它应该永远是真的`fold . unFold = id`。并且，给定`Fold`数据类型相等的宽松概念，您也可以说`unFold . fold = id`. 您甚至可以提供一个智能构造函数，其作用类似于旧`Fold`构造函数：

```
makeFold :: r -> (a -> r -> r) -> Fold a r
makeFold start step = Fold start' step' where
  start' = ((), start)
  step' a ((), r) = ((), step a r) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-18T08:50:29.290

tl;博士：

## 结论1：你不能

你最初要求的东西是不可能的，至少不是你想要的任何版本我都能想出。（见下文。）如果更改您的数据类型以允许我存储中间计算，我想我会没事的，但即使那样，该功能`unFold`也会相当低效，这似乎与您聪明的优化技巧议程背道而驰！

## 结论 2：我认为它没有达到你想要的效果，即使你通过改变类型来解决它

列表算法的任何优化都会受到您使用原始未优化函数计算阶跃函数的问题的影响，而且很可能是以复杂的方式。

由于函数不相等，因此不可能将 step 优化为有效的东西。我认为你需要一个人来做`unFold`，而不是一个编译器。

无论如何，回到最初的问题：

## 可以折叠。展开 = 身份证？

不。假设我们有

```
isSingleton :: [a] -> Bool
isSingleton [x] = True
isSingleton _ = False 
```

then if we have `unFold :: ([x] -> y) -> Fold x y`then if与需要`foldSingleton`的相同`unFold isSingleton`

```
foldSingleton = Fold {start = False , step = ???} 
```

其中 step 获取列表的一个元素并更新结果。现在`isSingleton "a" == True`，我们需要

```
step False = True 
```

因为`isSingleton "ab" == False`，我们需要

```
step True = False 
```

所以`step = not`到目前为止，`isSingleton "abc" == False`我们也需要

```
step False = False 
```

因为有些函数`([x] -> y)`不能用类型的值表示`Fold x y`，所以不可能存在`unFold :: ([x] -> y) -> Fold x y`这样的函数`fold . unFold = id`，因为`id`是一个全函数。

* * *

编辑：

事实证明您对此并不信服，因为您只期望`unFold`处理具有折叠表示的函数，所以也许您的意思是`unFold.fold = id`.

## 可以展开。折叠 = 身份证？

不
，即使您只想`unFold`处理`([x] -> y)`可以使用 获得的功能`fold :: Fold x y -> ([x] -> y)`，我认为这是不可能的。让我们假设现在我们已经定义了这个问题

```
combine :: X -> Y -> Y
initial :: Y

folded :: [X] -> Y
folded = fold $ Fold initial combine 
```

恢复价值`initial`是微不足道的：`initial = folded []`. 恢复原件`combine`不是，因为没有办法从一个给你一些值的函数`Y`到一个组合任意值的函数`Y`。

例如，如果我们有`X = Y = Int`并且我定义了

```
 combine x y | y < 0 = -10
                | otherwise = y + 1
    initial = 0 
```

然后，因为每次在 positive 上使用它时都`combine`加一，并且初始值为 0，就其输出而言无法区分。请注意，由于永远不会是负数，因此也不可能定义一个可以恢复我们函数的函数。这归结为不是内射的事实。它携带不同的 type 值到相同的 type 值。`y``y``folded``length``folded xs``unFold :: ([x] -> y) -> Fold x y``combine``fold``Fold x y``[x] -> y`

因此，我证明了两件事：if `unFold :: ([x] -> y) -> Fold x y`then both`fold.unFold /= id`和 now also`unFold.fold /= id`

我打赌你也不相信这一点，因为你并不真正关心你是从 得到`Fold 0 (\_ y -> y+1)`还是`Fold 0 combine`从 回来`unFold folded`，因为它们在重折叠时具有相同的价值！让我们再次缩小球门柱。也许你想`unFold`在函数可以通过 获得的时候工作`fold`，并且你很高兴它不会给你不一致的答案，只要你再次折叠结果，你会得到相同的函数。我可以用下一个问题来总结一下：

## 可以折叠。展开。折叠=折叠？

即，您能否定义`unFold`这`fold.unFold`是可通过 获得的函数集的标识`fold`？

我真的相信这是不可能的，因为在`step`不保留有关子列表中间值的额外信息的情况下计算函数不是一个容易处理的问题。

假设我们有

```
unFold f = Fold {start = f [], step = recoverstep f} 
```

我们需要

```
recoverstep f x1 initial == f [x1] 
```

因此，如果有 x 的 Eq 实例（敲响警钟！），那么 recoverstep 必须具有与

```
recoverstep f x1 y | y == initial = f [x1] 
```

我们也需要

```
recoverstep f x2 (f [x1]) == f [x1,x2] 
```

所以如果 x 有一个 Eq 实例，那么 recoverstep 必须具有与

```
recoverstep f x2 y | y == (f [x1]) = f [x1,x2] 
```

但这里有一个大问题：`x1`这个等式右边的变量是自由的。这意味着从逻辑上讲，除非我们已经知道在 x 上使用了什么值，否则我们无法判断阶跃函数在 x 上应该具有什么值。我们需要将 等的值存储`f [x1]`在`f [x1,x2]`Fold 数据类型中以使其工作，这就是为什么我们不能定义`unFold`. 如果您更改数据类型 Fold 以允许我们存储有关中间列表的信息，我可以看到它会起作用，但就目前而言，恢复上下文是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T01:58:49.527

与[Dan 的回答](https://stackoverflow.com/a/12958624/98117)类似，但使用的方法略有不同。我们没有将累加器与最终被丢弃的部分结果配对，而是添加了一个“后处理”函数，它将从累加器类型转换为最终结果。

相同的“作弊”`unFold`只是在后处理步骤中完成所有工作：

```
{-# LANGUAGE ExistentialQuantification #-}

data Fold a r = forall c. Fold
  { _start  :: c
  , _step   :: a -> c -> c
  , _result :: c -> r }

fold :: Fold a r -> [a] -> r
fold (Fold start step result) = result . foldr step start

unFold :: ([a] -> r) -> Fold a r
unFold f = Fold [] (:) f

makeFold :: r -> (a -> r -> r) -> Fold a r
makeFold start step = Fold start step id 
```

# windows-installer - 有什么方法可以将产品版本从major.minor.build 更改为major.build.minor？

> ID：12950069
> 
> 赞同：1
> 
> 时间：2012-10-18T08:17:54.733
> 
> 标签：windows-installer

我的产品有版本号major.minor.build（比如5.0.196）。现在我们正在开发补丁，并将其作为修订号添加为 major.minor.build.revision（例如：5.0.196.123 “123 是修订号”）。由于微星的属性不考虑产品版本的第四字段，所以我们无法使用检测和升级补丁。有人提议将产品版本更改为 major.build.revision (5.196.123)。我们可以这样做吗？如果是，如何做以及它如何影响升级的版本检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:35:30.883

如果您在产品版本中包含第四个字段，安装程序将忽略第四个字段。

对于补丁包，[修订号摘要属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371255%28v=vs.85%29.aspx)指定补丁的 GUID 补丁代码。后面可以是一个补丁代码 GUID 列表，用于在应用此补丁时删除的过时补丁。补丁代码连接在一起，列表中没有分隔 GUID 的分隔符。

如果您打算进行的更新符合[小型更新](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/c74ef2bd-9cf5-4ec0-bfff-1fad0e17ba98)并且不保证更改[ProductVersion](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/551fca7e-a827-482d-bc56-ff2fe5a17025)，则更改修订号属性。

次要升级可以作为补丁交付，但需要更改 ProductVersion。[在这种情况下ProductCode](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/33cedd37-0343-471c-ad4b-0db5f98d5894)不需要更改。

此处比较了不同类型的 Windows Installer 更新：[修补和升级](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/da946739-9efc-4bf0-8a9a-6f6ead3c4a34)。

# c# - 数据绑定引擎如何在后台工作？

> ID：12950084
> 
> 赞同：22
> 
> 时间：2012-10-18T08:18:35.047
> 
> 标签：c#, data-binding, 2-way-object-databinding

从技术上讲，数据绑定引擎如何在幕后工作？尤其是数据绑定中“同步器”的机制是怎样的？

在 .NET、Java、Flex 等许多框架中，它们提供了数据绑定引擎。我一直在使用 API 调用，所以一切对我来说都很容易，因为我所要做的就是调用 API。

现在，我有兴趣尝试为我正在开发的游戏编写一个相对简单的数据绑定引擎。虽然我使用的是 C#，但我有理由无法使用内置的 WinForms 和数据绑定引擎（请参阅下面的背景信息了解原因）。由于我无法使用 C# 中现有的数据绑定引擎，我想我可能不得不自己编写一个。因此，我需要了解数据绑定通常如何在幕后工作的基本细节。这并不是说如何在 C# 中使用数据绑定。我的意思是，数据绑定在内部和架构上是如何工作的。

我尝试在网上搜索有关数据绑定的教程和文章，但大多数结果都是关于如何在 C# 中使用现有数据绑定，这不是我想要的。

所以，在我开始计划编写自己的数据绑定器之前，我想我需要知道数据绑定引擎是如何工作的？更重要的是，数据绑定引擎中的“同步器”机制的外观和工作方式如何，即数据如何始终保持同步，无论是单向绑定还是双向绑定？

*关于我为什么问这个问题的一些背景信息：*

不久前，我提出了一个[问题](https://stackoverflow.com/questions/12947775/how-can-i-do-data-binding-in-code-with-c)，关于如何在 C# 中为不使用标准 WinForms 的 UI 使用数据绑定。我得到的答案是 C# 中的数据绑定引擎与 WPF/Windows 窗体 UI 紧密耦合。所以，我想我不能使用 C# 中现有的数据绑定引擎，可能不得不自己创建一个。这样做的目的是为了一个游戏，我正在努力。游戏通常有自己的自定义 UI（非 WinForm）。我的目的是为游戏中的 UI 和游戏对象设置类似 MVVM 的设计。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-18T09:18:49.273

你的问题是一个非常有趣的问题，但它的范围实际上非常大。

在这种情况下，一个非常有用的工具是[ILSpy](http://ilspy.net/)，它允许您查看框架实现。

我会反对的一件事是以下声明：

> 我得到的答案是 C# 中的数据绑定引擎与 WPF/Windows 窗体 UI 紧密耦合

我不同意; 数据绑定引擎与 .Net 事件实现紧密耦合，但 Target 和 Source 可以是任何东西 - 大多数示例将是 Windows Forms、WPF 或 ASP.Net，因为它们是 .Net 语言最常见的前端，但它是完全可以在没有 UI 的其他场景中使用多重绑定。

添加双向绑定时会发生什么？好吧，如果我们查看[MultiBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)的源代码，我们会注意到一些有趣的事情：

*   它公开了一个[BindingMode](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode.aspx)属性，该属性描述了绑定场景——通常是`OneWay`或者`TwoWay`
*   它暴露了两个有趣的事件：`NotifyOnSourceUpdated`和`NotifyOnTargetUpdated`

其中有基本形式：

```
// System.Windows.Data.MultiBinding
/// <summary>Gets or sets a value that indicates whether to raise the <see cref="E:System.Windows.FrameworkElement.SourceUpdated" /> event when a value is transferred from the binding target to the binding source.</summary>
/// <returns>true if the <see cref="E:System.Windows.FrameworkElement.SourceUpdated" /> event will be raised when the binding source value is updated; otherwise, false. The default value is false.</returns>
[DefaultValue(false)]
public bool NotifyOnSourceUpdated
{
    get
    {
        return base.TestFlag(BindingBase.BindingFlags.NotifyOnSourceUpdated);
    }
    set
    {
        bool flag = base.TestFlag(BindingBase.BindingFlags.NotifyOnSourceUpdated);
        if (flag != value)
        {
            base.CheckSealed();
            base.ChangeFlag(BindingBase.BindingFlags.NotifyOnSourceUpdated, value);
        }
    }
} 
```

即我们使用事件来告诉我们何时更新源（`OneWay`）以及何时更新目标（用于`TwoWay`绑定）

请注意，还有一个`PriorityBinding`类以类似的方式运行，只是您可以订阅多个数据源，并且它将优先考虑最快返回数据的那个。

所以它的工作原理很清楚 - 当我们创建绑定时，我们订阅一侧的更改（用于只读更新）或两侧的更改（例如，当数据可以在 GUI 中更改并发回时）到数据源），所有通知都通过事件管理。

下一个问题是，真的，谁来管理这些事件？简单的答案是 Target 和 Source 都可以。这就是为什么实现`INotifyPropertyChanged`很重要，例如——所有绑定真正做的是为双方应该如何订阅彼此的更改创建一个契约——它是目标和源紧密耦合的契约，真的。

[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)是一个值得研究的有趣测试用例，因为它广泛用于 GUI 应用程序中，用于将数据源中的更新推广到 UI，并将 UI 中数据的更改发送回底层数据源。

请注意（通过查看代码）用于传达事物已更改的实际事件非常简单，但是用于管理添加、删除、更新的代码实际上非常依赖于通过 SimpleMonitor 属性（`BlockReentrancy`和`CheckReentrancy`）的一致性 - 它有效地保证了这些操作是原子的，并且订阅者会按照发生的顺序收到更改通知，并且基础集合与更新的集合一致。

这确实是整个操作的棘手部分。

简而言之，.Net 中的 DataBinding 实现并没有与 GUI 技术紧密耦合；只是大多数示例将在 Windows 窗体、WPF 或 ASP.Net 应用程序的上下文中呈现 DataBinding。实际的数据绑定是事件驱动的，为了利用它，更重要的是同步和管理对数据的更改 - DataBinding 框架只允许您通过合约将 Target 和 Source 在共享数据更新中耦合在一起（接口）它定义。

玩得开心 ;-）

**编辑：**

我坐下来创建了两个类，`MyCharacter`明确的目的是在和属性`MyCharacterAttribute`之间设置双向数据绑定：`Health``HealthValue`

```
public class MyCharacter : DependencyObject
{
    public static DependencyProperty HealthDependency =
        DependencyProperty.Register("Health",
                                    typeof(Double),
                                    typeof(MyCharacter),
                                    new PropertyMetadata(100.0, HealthDependencyChanged));

    private static void HealthDependencyChanged(DependencyObject source,
            DependencyPropertyChangedEventArgs e)
    {
    }

    public double Health
    {
        get
        {
            return (double)GetValue(HealthDependency);
        }
        set
        {
            SetValue(HealthDependency, value);
        }
    }

    public void DrinkHealthPotion(double healthRestored)
    {
        Health += healthRestored;
    }
}

public class MyCharacterAttributes : DependencyObject
{
    public static DependencyProperty HealthDependency = 
        DependencyProperty.Register("HealthValue",
                                    typeof(Double),
                                    typeof(MyCharacterAttributes),
                                    new PropertyMetadata(100.0, HealthAttributeDependencyChanged));

    public double HealthValue
    {
        get
        {
            return (Double)GetValue(HealthDependency);
        }
        set
        {
            SetValue(HealthDependency, value);
        }
    }

    public List<BindingExpressionBase> Bindings { get; set; }

    public MyCharacterAttributes()
    {
        Bindings = new List<BindingExpressionBase>(); 
    }

    private static void HealthAttributeDependencyChanged(DependencyObject source,
            DependencyPropertyChangedEventArgs e)
    {
    }
} 
```

这里要注意的最重要的事情是从[DependencyObject的继承和](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.aspx)[DependencyProperty](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)的实现。

那么，在实践中，会发生以下情况。我创建了一个简单的 WPF 表单并设置了以下代码：

```
MyCharacter Character { get; set; }

MyCharacterAttributes CharacterAttributes = new MyCharacterAttributes();

public MainWindow()
{
    InitializeComponent();

    Character = new MyCharacter();
    CharacterAttributes = new MyCharacterAttributes();

    // Set up the data binding to point at Character (Source) and 
    // Property Health (via the constructor argument for Binding)
    var characterHealthBinding = new Binding("Health");

    characterHealthBinding.Source = Character;
    characterHealthBinding.NotifyOnSourceUpdated = true;
    characterHealthBinding.NotifyOnTargetUpdated = true;
    characterHealthBinding.Mode = BindingMode.TwoWay;
    characterHealthBinding.IsAsync = true;

    // Now we bind any changes to CharacterAttributes, HealthDependency 
    // to Character.Health via the characterHealthBinding Binding
    var bindingExpression = 
        BindingOperations.SetBinding(CharacterAttributes, 
                                     MyCharacterAttributes.HealthDependency,
                                     characterHealthBinding);

    // Store the binding so we can look it up if necessary in a 
    // List<BindingExpressionBase> in our CharacterAttributes class,
    // and so it "lives" as long as CharacterAttributes does, too
    CharacterAttributes.Bindings.Add(bindingExpression);
}

private void HitChracter_Button(object sender, RoutedEventArgs e)
{
    CharacterAttributes.HealthValue -= 10.0;
}

private void DrinkHealth_Button(object sender, RoutedEventArgs e)
{
    Character.DrinkHealthPotion(20.0);
} 
```

单击 HitCharacter 按钮将`CharacterAttributes.HealthValue`属性减少 10。这会触发一个事件，通过我们之前设置的 Binding，该事件也会从`Character.Health`值中减去 10.0。点击 DrinkHealth 按钮可恢复`Character.Health`20.0 并增加`CharacterAttributes.HealthValue`20.0。

另请注意，这些东西确实已融入 UI 框架`FrameworkElement`（继承自`UIElement`）`SetBinding`并`GetBinding`在其上实现。这是有道理的——DataBinding GUI 元素对于用户界面来说是一个完全有效的场景！但是，如果你看得更深入，`SetValue`例如，它只是调用`BindingOperations.SetBinding`一个内部接口，所以我们可以实现它而无需实际使用 a `UIElement`（如上例所示）。但是，我们必须继承的一个依赖项是`DependencyObject`and `DependencyProperty`- 这些是 DataBinding 工作所必需的，但是，只要您的对象继承自`DependencyObject`，您就不需要靠近文本框 :-)

然而，缺点是一些 Binding 的东西是通过`internal`方法实现的，所以你可能会遇到想要实现的绑定操作可能需要你编写额外代码的场景，因为你根本无法访问原生的框架实现班可以。但是，如上例所示，TwoWay 数据绑定是完全可能的，如所示。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-21T10:59:09.553

[这篇文章](http://www.scottlogic.com/blog/2012/04/05/everything-you-wanted-to-know-about-databinding-in-wpf-silverlight-and-wp7-part-one.html)中的“绑定之前的生活”部分让我更容易理解如何创建双向绑定。

[这个想法与詹姆斯](https://stackoverflow.com/a/12950451/292787)描述的相同。当调用属性设置器时触发一个事件。但是*只有*在属性值发生变化时才这样做。然后您订阅该事件。在订阅者中，您更改了一个依赖属性。对于从属属性，您执行相同的操作（以获取 2 路绑定）。这个模式不会因为堆栈溢出而死，因为如果值没有改变，setter 会立即返回。

我[将帖子](http://www.scottlogic.com/blog/2012/04/05/everything-you-wanted-to-know-about-databinding-in-wpf-silverlight-and-wp7-part-one.html)中的代码简化为 2 向绑定的手动实现：

```
 static void Main()
    {
        var ui = new Ui();
        var model = new Model();
        // setup two-way binding
        model.PropertyChanged += (propertyName, value) =>
        {
            if (propertyName == "Title")
                ui.Title = (string) value;
        };
        ui.PropertyChanged += (propertyName, value) =>
        {
            if (propertyName == "Title")
                model.Title = (string) value;
        };
        // test
        model.Title = "model";
        Console.WriteLine("ui.Title = " + ui.Title); // "ui.Title = model"
        ui.Title = "ui";
        Console.WriteLine("model.Title = " + model.Title);// "model.Title = ui"
        Console.ReadKey();
    }
}

public class Ui : Bindable
{
    private string _title;
    public string Title
    {
        get { return _title; }
        set
        {
            if (_title == value) return;
            _title = value; 
            OnChange("Title", value); // fire PropertyChanged event
        }
    }
}

public class Model : Bindable
{
    private string _title;
    public string Title
    {
        get { return _title; }
        set
        {
            if (_title == value) return;
            _title = value; 
            OnChange("Title", value); // fire PropertyChanged event
        }
    }
}

public class Bindable
{
    public delegate void PropertyChangedEventHandler(
        string propertyName, object value);
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnChange(string propertyName, object value)
    {
        if (PropertyChanged != null)
            PropertyChanged(propertyName, value);
    }
} 
```

您可以使用方面（例如 PostSharp）来拦截属性设置器调用，从而摆脱支持字段。您的课程将如下所示：

```
public class Ui : Bindable
{
    [Bindable]
    public string Title { get; set; }
    [Bindable]
    public string Name { get; set; }
} 
```

使用反射，您可以将绑定代码简化为：

```
 Binder.Bind(() => ui.Title, () => model.Title);
        Binder.Bind(() => ui.Name, () => model.Name); 
```

My proof of concept: [https://gist.github.com/barsv/46650cf816647ff192fa](https://gist.github.com/barsv/46650cf816647ff192fa)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T08:39:46.117

这是一个非常简单的想法，但实现起来并不一定简单。您需要 2 路事件通知。您的模型对象在更改时通知数据绑定框架，并且 UI 通知数据绑定框架任何用户交互。

在模型方面，这意味着编写模型以通知属性的任何更改（例如实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms743695.aspx)接口）和集合的更改（例如使用[ObservableColleciton](http://msdn.microsoft.com/en-us/library/ms668604.aspx)）。在 UI 方面，您可以连接到 UI 系统提供的事件。

如果您不想更改模型（即您希望数据绑定在 POCO 上工作），那么您需要一些触发器来告诉数据绑定系统使用反射检查模型的更改。每当您的代码更改模型时，您可能会手动调用它。

之后它只是探测所有事件，这可能是它变得混乱的地方，因为您需要一个不同类型的绑定对象库，将各种类型的数据连接到各种类型的 UI。

可能值得查看 knockout.js 的文档， http: [//knockoutjs.com/](http://knockoutjs.com/)，显然是一个 Web 解决方案，但原理是相同的，并且它详细介绍了库中的组件原则上将与任何系统的组件非常相似。

# xml - 来自服务器 idhttp 的 XML 响应

> ID：12950087
> 
> 赞同：-3
> 
> 时间：2012-10-18T08:18:43.607
> 
> 标签：xml, delphi, networking, idhttp

获取发送请求到服务器并收到错误 409，程序暂停，使用 try except 并忽略她，我也收到错误 409 和 XML 响应，我该如何阅读？

HTTP.Response.gettext - 不给我，只有关于服务器的信息

http.response.rawheaders.commatext - 只有关于服务器的信息

内容长度匹配

答案可以在嗅探器中看到

我在程序中得到答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:01:28.297

当`TIdHTTP`收到来自服务器的 HTTP 错误，如 409 时，它会引发`EIdHTTPProtocolException`异常，并且错误的内容文本将在其`ErrorMessage`属性中，例如：

```
try
  IdHTTP1.Get(...);
except
  on E: EIdHTTPProtocolException do
  begin
    // HTTP-specific error
    ShowMessage(Format('HTTP Error'#13'Response: %d %s'#13'Content: %s', [E.ErrorCode, E.Message, E.ErrorMessage]));
  end;
  on E: Exception do
  begin
    // any other error
    ShowMessage(Format('Exception'#13'Class: %s'#13'%s', [E.ClassName, E.Message]));
  end;
end; 
```

当您遇到密码错误时，它应该显示一个弹出消息框，内容如下：

```
HTTP Error
Response: 409 Conflict
Content: <?xml version="1.0" encoding="UTF-8" standalone="yes"?><error code="10003" appid="1"><failure cause="INVALID_PASSWORD" field="password" value="******"/></error> 
```

# c# - 为什么 LogonUser 总是返回错误代码 1008？

> ID：12950089
> 
> 赞同：4
> 
> 时间：2012-10-18T08:18:47.527
> 
> 标签：c#, windows, security, winapi, windows-authentication

我正在使用 LogonUserA 函数对在 IIS7/Win2008 上运行的 ASP.NET 4.0 Web 应用程序中的用户进行身份验证。如果用户输入正确的用户名和密码，它会很好地工作，但如果用户名或密码错误，LogonUserA 总是返回相同的错误代码 1008，这会转换为模糊的消息“尝试引用不存在的令牌”。当然，如果 LogonUserA 失败了，那么就没有有效的令牌，那么这个错误是什么意思呢？典型的登录错误是否有任何特定的错误代码？我怎样才能得到它？

下面是我的代码：

```
[DllImport("advapi32.dll", SetLastError = true)]
public static extern int LogonUserA(string lpszUserName,
    string lpszDomain,
    string lpszPassword,
    int dwLogonType,
    int dwLogonProvider,
    ref IntPtr phToken);

if (0 != LogonUserA(userName, domain, newPassword, Logon32LogonInteractive, Logon32ProviderDefault, ref token))
{
    // error is always 1008 if user name of password is incorrect.
    int error = Marshal.GetLastWin32Error();

    var exception = new Win32Exception(error);

    // What I got in error log for above Win32Exception is:
    // System.ComponentModel.Win32Exception (0x80004005): An attempt was made to reference a token that does not exist
} 
```

# visual-studio-2010 - 什么是 DebuggerProxy.dll，发布的隔离外壳需要这个文件吗

> ID：12950092
> 
> 赞同：2
> 
> 时间：2012-10-18T08:18:59.317
> 
> 标签：visual-studio-2010, vsx

我在 VS2010 上创建了一个独立的 shell 应用程序，我发现有两个我不熟悉的文件

**DebuggerProxy.dll , DebuggerProxy.dll.manifest**

当我输出调试版隔离shell时，这两个文件必须和shell exe放在同一个文件夹下，否则会出现并排错误，shell根本无法启动。

但是对于发布版本的隔离shell，如果我删除这两个文件然后shell也可以正常启动而不会出错

那么 DebuggerProxy.dll 文件是做什么用的呢？是否需要和发布版的shell应用放在同一个目录下？

# .net - IIS 7.5 对服务器的初始请求永远不会被加载

> ID：12950104
> 
> 赞同：2
> 
> 时间：2012-10-18T08:19:50.240
> 
> 标签：.net, iis, iis-7.5

我无法让工作中的项目运行。问题是服务器 (IIS) 从不响应。当我使用 chrome 开发人员工具时，我可以看到 GET 请求只是挂起，并且在我关闭窗口或停止进程之前一直处于挂起状态。

因此，我制作了一个示例项目，一个简单的 .net 4 Web 应用程序，并对其进行了编译。当我在 VS2010 中运行它时一切都很好，但是当我尝试从浏览器访问它时，我遇到了与原始工作项目相同的问题。所以这不仅仅是一个项目的问题，这就是为什么我认为 IIS 设置有问题。我知道 IIS 监听的端口没问题，并且我已经检查了我能找到的所有设置。

我查看了stackoverflow并搜索了它，但我没有找到任何解决方案。谁能帮我这个？

IIS 版本是 7.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:59:56.740

经过1天的故障排除后，我想通了。早些时候我遇到了一个问题，IIS 没有读取 web.config 文件的权限，所以我设置了该文件的权限。事实证明，IIS 没有读取文件夹中其他任何内容的权限，因此它无法读取为页面提供服务所需的文件。因为它可以读取 web.config 文件，所以我没有收到任何错误消息。

我只是将 IIS_IUSRS 用户权限设置为读取整个项目文件夹。

# spring - 应用程序部署在 tomcat 上时找不到文件

> ID：12950108
> 
> 赞同：0
> 
> 时间：2012-10-18T08:20:06.757
> 
> 标签：spring, tomcat, servlets

这在单元测试中工作正常。我得到文件并可以打印内容。当我在服务器上部署它时，我得到一个 FilenotFoundExcpetion。这可能是什么原因？我正在部署在tomcat上。

```
String path = "WebContent/images/image.jpeg";

FileSystemResource resource = new FileSystemResource(path);

File image = resource.getFile(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:40:40.023

使用上下文路径将位置带到您的工作项目中，然后您可以存储自己的路径，就像您提到的 images/image.jpg

```
 String path = request.getSession().getContextPath().getRealPath("/")+"images/image.jpg"; 
```

我想它会帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:28:35.060

当您将 Web 应用程序部署到服务器上时，WebContent 文件夹是隐式的。

在 Web 服务器的上下文中执行时使用 String path = "/images/image.jpeg";

还

使用 Class.getResourceAsStream()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:28:57.837

```
String path = "WebContent/images/image.jpeg"; 
```

这是一个相对路径，当部署在像 tomcat 这样的 servlet 容器中时，它将相对于您的部署目录或 tomcat 的主目录。并且您可能不会有一个名为 Webconent 的目录。WebContent 的内容可能会在战争中发生。

我可以想到两个解决方案

*   `getRealPath`如果您有权访问`request`或使用方法`ServletContext`
*   `ClassPathResource`如果您可以将文件放入，请使用`WEB-INF\classes`

# java - 如何调试 Java 代理（两头野兽方法）

> ID：12950109
> 
> 赞同：2
> 
> 时间：2012-10-18T08:20:11.533
> 
> 标签：java, debugging, lotus-notes, lotus, agent

从 Notes/Domino 版本 7 开始，我使用了 Bob Balaban 的“双头野兽”中的原则 (http://bobzblog.com/tuxedoguy.nsf/dx/the-2-headed-beast-debugging-domino-java-agents- with-eclipse) 用于在 Eclipse 中编写可调试的 Java 代理！这就像一个魅力 - 唯一的事情是我必须将代码从 Eclipse 复制/粘贴到标准 Notes 代理。

使用当前 Eclipse 版本 (8.5.3 FP2) 的 Domino Designer，我尝试查看是否可以使用相同的设置在 Domino Designer 中直接调试代理（作为 Java 程序）。似乎我可以让代码运行，但是，我不能让它在任何断点处停止。我得到的信息是：

> 由于缺少行号属性，无法在 dk.domain.AgentTemplate 中安装断点。修改编译器选项以生成行号属性。

我试图将调试配置设置为“在主中停止”。它似乎停止了。但是，如果我跨步，它会运行所有代码 - 我看不到我在代码中的位置，当然我看不到变量或它们的值。

Preferences - Java - Compiler to "Add line number attributes to generated class files" 中的选项已被选中。我还没有找到其他编译器选项来生成行号。

我在 Designer 中使用 Java 1.5 合规性。

有没有人能够设置这个？

/约翰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:48:07.300

好吧，有时您只需要解释您的问题即可找到解决方案。

在彻底描述问题时，我最终尝试使用 JDK 1.6 编译器合规级别（在首选项 - Java 编译器下）。这确实有效！

因此，构建具有这样结构的代理，您可以直接在 Domino Designer 中调试 Java 代理：

```
package dk.dalsgaarddata;

import lotus.domino.AgentBase;
import lotus.domino.AgentContext;
import lotus.domino.Database;
import lotus.domino.DocumentCollection;
import lotus.domino.NotesException;
import lotus.domino.NotesFactory;
import lotus.domino.NotesThread;
import lotus.domino.Session;
import dk.dalsgaarddata.debug.DebugAgentContext;

/*  ------------------------------------------------------------------------------------
    Created: 2009.04.21/Jda
    Revised: 2009.04.29/Jda - v.1.1

    Agent template.... 
    ------------------------------------------------------------------------------------ */

public class AgentTemplate extends AgentBase {
    // DEBUG: For Eclipse debugging - see main method at the end of this class.

    // Beginning of "ordinary" Lotus Notes/Domino Agent....
    private Session mySession = null;
    private AgentContext myContext = null;
    private DD_BackendLog myLog = null;

    private void cleanUp() {
        try {
            if (null != myLog)
                myLog.end();
            if (null != mySession)
                mySession.recycle();
        } catch (NotesException ne) {
            System.err.println("Error cleaning up log and Session.");
        }
    }

    // Lotus Notes/Domino entry point...
    public void NotesMain() {
        try {
            if (mySession == null) {
                mySession = getSession();
                myContext = mySession.getAgentContext();
            }
            SessionContext.getInstance(mySession, myContext);
            myLog = SessionContext.getLog();

            System.out.println("NotesMain Started....");
            // Your code goes here....

            myLog.information(".... completed!");
        } catch (NotesException ne) {
            myLog.error("Agent ERROR: NotesException = " + ne.text);
            myLog.writeStackTrace(ne);
        } catch (Exception e) {
            myLog.error("Agent ERROR: Exception = " + e.getMessage());
            myLog.writeStackTrace(e);
        } finally {
            cleanUp();
        }
    }

    /*  Instructions for debugging!!
    // TODO - adjust run configuration
        You need to add VM arguments, e.g.:

            -Dsun.boot.library.path="c:\\Lotus\\Notes;c:\\Lotus\\Notes\\jvm\\bin"

     ... and you need to add a PATH environment variable, e.g.:

            PATH    c:\Lotus\Notes
    */

    // Remember to rename these constructors when duplicating this code to a new agent!!!
    // ... if not handled by Eclipse when pasting a copy ;-)
    public AgentTemplate() {
    }

    public AgentTemplate(Session s, AgentContext c) {
        this.mySession = s;
        this.myContext = c;
    }

    // Entry point for Java program (when running from Eclipse)
    public static void main(String[] args) {
        // By example from Bob Balaban "The two-headed beast". See more at:
        // http://www.bobzblog.com/tuxedoguy.nsf/dx/DominoAgents-Eclipse_v2.pdf/$file/DominoAgents-Eclipse_v2.pdf
        System.out.println("main Starting....");
        Session s = null;
        Database d = null;
        DocumentCollection dc = null;
        AgentContext ctx = null;

        System.out.println("NotesThread.sinitThread()....");
        NotesThread.sinitThread();
        try {
            System.out.println("createSession....");
            s = NotesFactory.createSession();
            System.out.println("set database....");
            d = s.getDatabase(DebugAgentContext.ECLIPSE_SERVER, DebugAgentContext.ECLIPSE_DATABASE);
            System.out.println("Database: " + d.getFileName() + " on " + d.getServer());
            System.out.println("set debug context....");
            ctx = new DebugAgentContext(s, d, dc);
            // Create the agent object, invoke it on NotesMain(), the way Domino does
            System.out.println("create agent object....");
            AgentTemplate agent = new AgentTemplate(s, ctx);
            System.out.println("call agent....");
            agent.NotesMain();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                if (s != null)
                    s.recycle();
            } catch (Exception x) {
            }
            NotesThread.stermThread();
        }
    } // end main - and Eclipse entry point

} 
```

我在代码中留下了我的“打印”命令以便于测试。显然，您会将它们从您的真实模板中删除。

另一个可能有助于使其工作的事情是，我更改了配置参数的大小写，以匹配与磁盘上的目录完全相同的大写/小写。

/约翰

# windows - 提交后钩子向客户端发送错误消息

> ID：12950110
> 
> 赞同：0
> 
> 时间：2012-10-18T08:20:15.307
> 
> 标签：windows, svn, svn-hooks

我在我的 windows(7) 机器上使用 svnserver。

我需要将错误消息从 post-commit.bat 发送到 windows 中的 svn 客户端（可能是任何客户端）。

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:25:20.420

我设法在提交后挂钩失败并将失败消息报告给用户的情况下意外地做到了这一点。

GUI 客户端*应*显示错误消息。

当我们安装了 scmbug 并且它与 bugzilla 的连接中断时，我们遇到了这个问题。这表明您只需要让 post-commit 挂钩返回错误代码（返回非零）并输出您想要显示的错误消息。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:04:58.380

请注意，错误应写入标准错误，而不是标准输出，以便客户端显示。

因此，对于通过客户端可见的“回声”，您应该使用

```
echo Non-Fatal error: Commit succeeded but issue tracker not updated >&2 
```

# sublimetext2 - Sublime text 2 - 更改插件设置

> ID：12950114
> 
> 赞同：0
> 
> 时间：2012-10-18T08:20:27.527
> 
> 标签：sublimetext2

我是 Sublime 的新手，使用了一个名为[ASCII-Decorator](https://github.com/viisual/ASCII-Decorator)的插件，它带有一个带有默认设置的 .sublime-settings 文件：

```
{
    /* Name of the font file to use. */
    "ascii_decorator_font": "slant"
} 
```

如何更改此设置？

**编辑：该设置文件位于何处？**

# ruby - 如何忽略字符串中的特殊字符

> ID：12950115
> 
> 赞同：0
> 
> 时间：2012-10-18T08:20:35.073
> 
> 标签：ruby, string, special-characters

我知道在 C# 中，当我们需要在其中使用特殊字符作为字母时，我们可以对字符串使用运算符。就像`%"!@#*&#Y!@#*&!@#\123"`。有谁知道我们如何在 Ruby 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:27:01.877

在 Ruby 中，您可以使用`'`or`"`作为字符串分隔符。前者不会在字符串中进行任何特殊字符处理，甚至不会像`\n`; 后者确实如此。

# ruby-on-rails - 如何在rails中设置“快捷方式图标”？

> ID：12950117
> 
> 赞同：5
> 
> 时间：2012-10-18T08:20:36.880
> 
> 标签：ruby-on-rails, shortcut, favicon

```
<head>
  <title>Application</title>
  <% link { :rel => "shortcut icon", :href => "/images/favicon.ico" } %>
</head> 
```

我看不到我设置的图像，上面的代码有什么问题？我怎样才能成功运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T08:23:57.047

[见文档：](http://apidock.com/rails/ActionView/Helpers/AssetTagHelper/favicon_link_tag)

```
<%= favicon_link_tag 'favicon.ico' %> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T08:28:34.353

```
favicon_link_tag(source='/favicon.ico', options={})

<%= favicon_link_tag %> 
```

生成

```
<link href="/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" /> 
```

您可以在第一个参数中指定不同的文件：

```
<%= favicon_link_tag '/myicon.ico' %> 
```

它按原样传递给 path_to_image ，所以它给出了

```
<link href="/myicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" /> 
```

助手接受一个额外的选项散列，您可以在其中覆盖“rel”和“type”。

例如，Mobile Safari 会查找不同的 LINK 标记，指向将在您将页面添加到 iPod Touch、iPhone 或 iPad 的主屏幕时使用的图像。以下调用将生成这样的标签：

```
<%= favicon_link_tag 'mb-icon.png', :rel => 'apple-touch-icon', :type => 'image/png' %> 
```

方法喜欢

```
def favicon_link_tag(source='/favicon.ico', options={})
  tag('link', {
    :rel  => 'shortcut icon',
    :type => 'image/vnd.microsoft.icon',
    :href => path_to_image(source)
  }.merge(options.symbolize_keys))
end 
```

# javascript - 如何在javascript中创建构造函数

> ID：12950120
> 
> 赞同：0
> 
> 时间：2012-10-18T08:20:42.247
> 
> 标签：javascript, jquery

我正在尝试在 javascript 中创建一个构造函数。此构造函数用于 deleteIcon。每当用户悬停任何元素时，如果我想在该元素上显示删除图标，而不是使用此构造函数。但我对这种方法很陌生，我想在构造函数中创建一个点击事件。谁能指导我如何做到这一点？

```
function deleteIcon(el)
{
        var self = this;
        self.button = $("<button type='button' id='removemyparent' />");

        self.element = el;

        self.add = function () {
            var widths = $(self.element).children().map(function () { return $(this).width(); });
            var maxWidth = max(widths);

            self.button.button({ text: false, icons: { primary: "ui-icon-close" } });
            $(self.element).append(self.button);

            self.button.css({ position: "absolute", top: 0, left: maxWidth - self.button.width() });
        }

        self.remove = function () {
            $(self.element).find("#" + self.button.attr("id")).remove();
        }

        self.button.click = function () {            //this is not working
            self.element.remove();
        }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:25:33.677

试试这个：

```
self.button.click(function () { self.element.remove(); }) 
```

或者：

```
self.button.on('click', function () { self.element.remove(); }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:33:38.523

有几种方法可以在 JS 中创建构造函数。

最简单明了的方法是这个：

 `````
// Constructor
var MyObj=function(){ .... }

MyObj.prototype = {
    constructor : MyObj,
    button: function(){...},
    add: function(){...},

} 
`````

# android - AndEngine - 注销然后注册所有场景的触摸区域

> ID：12950123
> 
> 赞同：2
> 
> 时间：2012-10-18T08:20:52.360
> 
> 标签：android, andengine, out-of-memory

我正在使用 AndEngine 开发一个 android 应用程序。我有一个带有可拖动对象的游戏场景。当一个对象被拖动时，我希望所有其他对象的触摸区域都未注册，这样它们就不会干扰，并且当拖动操作完成时 - 重新注册所有触摸区域。

我尝试在拖动开始时尝试这样做：

```
 touchAreas = gameScene.getTouchAreas();

    try {
        gameScene.detachChild(towerDragSprite);
        gameScene.detachChild(rangeDragSprite);
        gameScene.unregisterTouchArea(rangeDragSprite);
        for (int i = 0; i < touchAreas.size(); i++)
            gameScene.unregisterTouchArea(touchAreas.get(i));
    } catch (IllegalStateException e) {
    } 
```

当拖动完成时：

```
if (!pSceneTouchEvent.isActionMove()) {
                .
                .
                .
                try {
                    for (int i = 0; i < touchAreas.size(); i++)
                        gameScene.registerTouchArea(touchAreas.get(i));
                } catch (Exception e) {}
                return true;
            } 
```

但是当拖动完成时（即使触摸区域不多），我得到了 OutOfMemory 异常。

我看到AndEngine中的一个场景也有一个`scene.unregisterTouchAreas(ITouchAreaMathcer pTouchAreaMatcher)`方法，但是我不知道如何获得ITouchAreaMatcher，并且在互联网上找不到解决方案。

有谁知道该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:08:49.127

查看[AndEngineExamples](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/MultiTouchExample.java)中的[MultiTouchExample.java](http://code.google.com/p/andengineexamples/)或[TouchDragExample.java](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/TouchDragExample.java)。这两个都做触摸和拖动。多点触控显然是多点触控，但如果您将当前的实体拖到它们上面，也不会打扰其他实体。也许这会对你有所帮助？

如果您还不知道，您可以使用[此应用程序](https://play.google.com/store/apps/details?id=org.anddev.andengine.examples)尝试这些示例。

顺便说一句……只是为了好玩，你试过了吗？

```
 mScene.setTouchAreaBindingOnActionDownEnabled(true); 
```

?

从你的帖子来看，我认为你让这种方式变得比它必须的更难。您正在尝试做的是一个常见的功能，应该很容易用引擎来完成。

# javascript - 用于 IE9 的通用生成 SVG

> ID：12950125
> 
> 赞同：1
> 
> 时间：2012-10-18T08:21:03.687
> 
> 标签：javascript, svg

我正在尝试将垂直分割背景添加到 ie9 中的 Textarea。不幸的是 IE9 不支持 CSS3 垂直分割。[我在http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)找到了一个漂亮的工具来生成跨浏览器 css3 代码以支持所有浏览器。它是使用prototypeJS编写的

我只是想知道是否有人已经编写了一个纯 SVG 背景生成器函数，以颜色和 % 作为输入。请帮助我。我正在寻找功能，因为我对 SVG 了解不多，而且需要很长时间。

# sql - 重复查询

> ID：12950127
> 
> 赞同：0
> 
> 时间：2012-10-18T08:21:13.887
> 
> 标签：sql

有人可以帮我解决这个问题吗：

我有客户有多个记录的数据（在一个表中，这是一个读入表的平面文件），例如

```
Name  Policy
Fred  SSS
Fred  SST
Joe   SSS 
```

我需要提取 Policy='SSS' 但该客户只有“SSS”政策的所有记录。所以只有乔会从上面返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:23:26.147

```
select name
from yourtable
group by name
having count(policy)=1 and max(policy)='SSS' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:24:18.030

```
SELECT Name
FROM tableName a
WHERE Policy = 'SSS'
GROUP BY Name
HAVING COUNT(*) = (SELECT COUNT(*) FROM tableName b WHERE a.Name = b.Name) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/5f52b/2)

# c# - C# Reading a console application in a loop

> ID：12950133
> 
> 赞同：1
> 
> 时间：2012-10-18T08:21:39.170
> 
> 标签：c#

I need to execute my console app for many files in a loop and update my GUI. When I execute my app for the first time everything is ok, GUI updates are done in realtime. But with every iteration, reading of console output get longer delay. After 3-4 files I get only few updates or no updates at all. Its not a problem with updating GUI, my dataraceivedevent doesn't fire up.

I can't understand why, because after every iteration I close and dispose my process.

This is the method that I execute in the for-loop.

```
public void execute(string arguments, string path)
    {
        Process myProcess = new Process();
        myProcess.StartInfo.CreateNoWindow = true;
        myProcess.StartInfo.FileName = path;
        myProcess.StartInfo.UseShellExecute = false;
        myProcess.StartInfo.RedirectStandardOutput = true;
        myProcess.StartInfo.Arguments = arguments;
        myProcess.Start();
        myProcess.BeginOutputReadLine();
        myProcess.OutputDataReceived += new DataReceivedEventHandler(this.updateProgress);
        myProcess.WaitForExit();
        myProcess.CancelOutputRead();
        myProcess.OutputDataReceived -= updateProgress;
        myProcess.Close();
        myProcess.Dispose();

        if (progressBar1.InvokeRequired)
        {
            progressBar1.BeginInvoke(new Action(() =>
            {
                progressBar1.PerformStep();
            }));
        }
        else
        {
            progressBar1.PerformStep();
        }

        if (progressBar2.InvokeRequired)
        {
            progressBar2.BeginInvoke(new Action(() =>
            {
                progressBar2.Value = 100;
                progressBar2.Refresh();
            }));
        }
        else
        {
            progressBar2.Value = 100;
            progressBar2.Refresh();
        }

        if (this.InvokeRequired)
        {
            this.BeginInvoke(new Action(() =>
            {
                this.Text = " ";
            }));
        }
        else
        {
            this.Text = " ";
        }
        Thread.Sleep(500);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:27:50.113

请在之后调用`.BeginOutputReadLine();`方法`.OutputDataReceived += new DataReceivedEventHandler(...);`

`OutputDataReceived`在您开始阅读之前可能正在发生事件（在您附加事件之前）

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)

喜欢：

```
 myProcess.OutputDataReceived += new DataReceivedEventHandler(this.updateProgress);
    myProcess.BeginOutputReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:56:42.737

执行 100K 次后我遇到了同样的问题，最后一次`myProcess.WaitForExit();`花了这么多时间。相反，您可以使用另一个重载，它采用整数表示进程有多少毫秒的时间退出。 `myProcess.WaitForExit(1000);`

# powershell - PowerShell 2.0 with .NET 4.0 on Windows 8

> ID：12950139
> 
> 赞同：2
> 
> 时间：2012-10-18T08:22:08.957
> 
> 标签：powershell

Windows 8 has PowerShell 3 installed

If I need to get PowerShell 2 I am using

```
PowerShell.exe -Version 2 
```

But this runs against .NET CLR 2.0

I want to use .NET CLR 4.0

I tried all approaches from [How can I run PowerShell with the .NET 4 runtime?](https://stackoverflow.com/questions/2094694/how-can-i-run-powershell-with-the-net-4-runtime)

But I apply any of them and then

```
PowerShell.exe -Version 2 
```

It will actually load PowerShell 3. To check this type

```
$host.Version 
```

Is this a bug?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:55:10.217

PS的64位版本好像不支持版本2。在windows 8 64位上，需要运行32位版本。

这运行不支持 2.0 (BAD) 的 64 位版本：

```
%systemroot%\System32\WindowsPowerShell\v1.0\powershell.exe -version 2.0 
```

这运行 32 位版本（好！）：

```
%SystemRoot%\syswow64\WindowsPowerShell\v1.0\powershell.exe -version 2.0 
```

# c# - .NET working directory of loaded assembly

> ID：12950140
> 
> 赞同：1
> 
> 时间：2012-10-18T08:22:11.153
> 
> 标签：c#, .net

in a C# application i load another application via

```
Assembly assembly = Assembly.LoadFrom("tool.dll"); 
```

and then run it via

```
Type typeGame = assembly.GetType("com.Program");
object instanceOfMyType = Activator.CreateInstance(typeGame);
typeGame.InvokeMember("Run", BindingFlags.InvokeMethod, null, instanceOfMyType, null); 
```

this loaded application loads files from its current working directory, which works fine when run alone.

but when it is loaded into another application like above it gives FileNotFoundExceptions, even though the working directory is correct and the file is there.

also if i output the working directory via

```
Console.WriteLine(Directory.GetCurrentDirectory()); 
```

it tells me the correct directory where the file resides.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:49:23.290

您最好使用`AppDomain.CurrentDomain.GetAssemblies`方法并检查您是否已将其加载到您的域中。通常，bin文件夹（执行文件夹）中的所有dll都加载到域程序集列表中。至少对于 asp.net Web 应用程序是这样。

# c# - JSON 响应字段未定义

> ID：12950143
> 
> 赞同：1
> 
> 时间：2012-10-18T08:22:19.737
> 
> 标签：c#, asp.net-mvc, jquery, razor

我按照此处的说明[从 ASP.NET MVC2 应用程序执行 Ajax 调用问题](https://stackoverflow.com/questions/5371658/problem-performing-ajax-call-from-asp-net-mvc2-app)，并阅读了有关 JSON 的信息。我搜索了很多，但没有找到答案。我使用以下代码：

看法：

```
<script type="text/javascript">
var userName = $("#userName").val();

$.ajax({
    type: 'POST',
    url: '/Home/PgAJAXTest',
    data: {
        q: 'Test1',
        s: 'Test2'
    },
    success: function (bbb) {
        alert(bbb.Val13);
    },
    error: function (msg) {
        alert("error");
    }
});

</script> 
```

ASP.NET MVC 控制器代码为：

```
 [HttpPost]
    public JsonResult PgAJAXTest(string q, string s)
    {
        var a = Json(new { Val13 = " TEST " }); 
        return a;
    } 
```

问题是我得到了`"undefined"`.
如果我`alert(bbb.Val13);`改为`alert(bbb);`我得到`{"Val13":" TEST "}`

我想这与控制器没有完全按照 JSON 期望的格式返回 JSON 有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:29:54.123

你得到一个字符串响应。

使用类似的东西

```
success: function (bbb) {
    var response  = jQuery.parseJSON(bbb);
    alert(response.Val13);
} 
```

由于您使用的是 jQuery，因此您可以使用它`jQuery.parseJSON`来解析字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:28:44.047

您需要添加`datatype: 'json'`到您的 JQuery AJAX 请求。

尝试：

```
<script type="text/javascript">
var userName = $("#userName").val();

$.ajax({
    type: 'POST',
    datatype: 'json',
    url: '/Home/PgAJAXTest',
    data: {
        q: 'Test1',
        s: 'Test2'
    },
    success: function (bbb) {
        alert(bbb.Val13);
    },
    error: function (msg) {
        alert("error");
    }
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:27:43.390

试试这个

```
[HttpPost]
    public JsonResult PgAJAXTest(string q, string s)
    {
        return Json(new { Val13 = " TEST " }); 
    } 
```

# html - 看看这个容器第一个元素的边距错误！并为此给出适当的理由

> ID：12950144
> 
> 赞同：1
> 
> 时间：2012-10-18T08:22:20.467
> 
> 标签：html, css, margin

花点时间看看这个小提琴。这里，Container1 和 Container2 有 background-color:#ccc 和 h1，.logo div 有边距。左边距和右边距工作正常。为什么 Margin-Top 和 bottom 无法正常工作。

建议仅当容器具有带边距的第一个元素时才会发生这种情况。你知道为什么会这样吗？以适当的理由回答。

[http://jsfiddle.net/daljir/M4X7e/5/](http://jsfiddle.net/daljir/M4X7e/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:01:43.570

这是由于边距折叠效应，这意味着顶部/底部边距折叠。这也是元素没有在内部扩展的原因。

### 更多解释在这里：

[请](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)参阅[w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)
和[developer.mozilla.org/en-US/docs/CSS/margin_collapsing](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)和
colinaarts.com/articles/the-magic-of-overflow-hidden _ [/](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)

### 修复它：

修复折叠有不同的方法，您可以将容器设置为`float: left|right`(< 或`position: absolute`, set `border: solid 1px`(*也尝试`border-top: solid 1px;`更好地理解它*) 或设置`min-height: height-with-margins`为防止折叠。

### 需要记住的是：

> 当边缘折叠发生时，边缘区域没有明确定义，因为边缘在框之间共享。
> 
> 浮动和绝对定位元素的边距永远不会塌陷。

# wcf - WCF DataContractSerializer

> ID：12950145
> 
> 赞同：3
> 
> 时间：2012-10-18T08:22:21.920
> 
> 标签：wcf, entity-framework

I am getting the following error when trying to return a Questionnaire object to the client. I added the KnowType[typeof(...)] in the Data Contract as suggested, but it still doesn't work. Not knowing which type is unknown to the Serializer, I just threw in all classes that are in the EF model. Can someone help? Thanks.

Here is the Service Contract

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using QuestionnaireWcfServiceApp.Models;

namespace QuestionnaireWcfService
{
    [ServiceContract]
    public interface IQuestionnaireService
    {
        [OperationContract]
        QuestionnaireContract GetQuestionnaire(string questionnaireName);

        [OperationContract]
        QuestionChain LoadQuestion(int questionnaireID, int? questionID, int? userResponse);
    }

    [DataContract]
    [KnownType(typeof(Questionnaire))]
    [KnownType(typeof(Question))]
    [KnownType(typeof(Choice))]
    [KnownType(typeof(Decision))]
    [KnownType(typeof(QuestionFlow))]
    public class QuestionChain
    {
        [DataMember]
        public Question Question { get; set; }

        [DataMember]
        public int? Decision {get;set;}
    }

    [DataContract]
    [KnownType(typeof(Questionnaire))]
    [KnownType(typeof(Question))]
    [KnownType(typeof(Choice))]
    [KnownType(typeof(Decision))]
    [KnownType(typeof(QuestionFlow))]
    public class QuestionnaireContract
    {
        [DataMember]
        public Questionnaire Questionnaire { get; set; }
    }
} 
```

Here is the Service.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using QuestionnaireWcfServiceApp.Models;

namespace QuestionnaireWcfService
{
    public class QuestionnaireService : IQuestionnaireService
    {
        QuestionnaireWcfServiceApp.Models.QuestionnaireEntities db = new QuestionnaireEntities();

        public QuestionnaireContract GetQuestionnaire(string questionnaireName)
        {
            QuestionnaireContract questionnaireContract = new QuestionnaireContract();
            if (!string.IsNullOrEmpty(questionnaireName))
            {
                Questionnaire thisQuestionnaire = (from q in db.Questionnaires where q.Name.Equals(questionnaireName) select q).FirstOrDefault();
                if (thisQuestionnaire == null)
                    throw new ArgumentNullException("Questionnaire ID is not found.");
                else
                {
                    questionnaireContract.Questionnaire = thisQuestionnaire;
                    return questionnaireContract;
                }
            }
            else
                throw new ArgumentException("Questionnaire name is not specified.");
        }

        public QuestionChain LoadQuestion(int questionnaireID, int? currentQuestionID, int? userResponse)
        {
            QuestionChain qc = new QuestionChain();
            QuestionFlow thisFlow = null;
            Question nextQuestion = null;           
            Questionnaire thisQuestionnaire = (from q in db.Questionnaires where q.QuestionnaireId == questionnaireID select q).FirstOrDefault();

            if (thisQuestionnaire == null)
                throw new ArgumentNullException("Questionnaire ID is not found");   //InvalidOperationException;

            if (currentQuestionID.HasValue)
            {
                //QuestionID should never be changed after setup.  Change the QuestionText around the QuestionID
                Question thisQuestion = thisQuestionnaire.Questions.Where(q => q.PKey.Equals(currentQuestionID)).FirstOrDefault();
                if (thisQuestion == null)
                    throw new ArgumentNullException("Question ID is not found");
                else
                {
                    if (userResponse.HasValue)
                    {
                        thisFlow = thisQuestion.QuestionFlows.First(f => f.QuestionId.Equals(currentQuestionID) && f.ChoiceId.Equals(userResponse));
                        if (thisFlow.Question1 != null)
                        {
                            nextQuestion = thisFlow.Question1;
                            qc.Question = nextQuestion;
                        }
                        else
                        {
                            qc.Question = null;
                            qc.Decision = thisFlow.Decision.Value;
                        }
                    }
                    else
                    {
                        //can't happen. when reaches here, a userResponse must not be null
                    }
                }
            }           
            else
            {
                //default to question 1
                nextQuestion = thisQuestionnaire.Questions.First(q => q.QuestionId.Equals(1));
                if (nextQuestion == null)
                    throw new ArgumentNullException("Question ID");
                else
                    qc.Question = nextQuestion;
            }
            return qc;
        }
    }
} 
```

This is the exception in the Windows Application Log.

```
Exception: System.ServiceModel.CommunicationException: There was an error while trying to serialize parameter http://tempuri.org/:GetQuestionnaireResult. The InnerException message was 'Type System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' 
with data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:
http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' 
is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.'.  Please see InnerException for more details. ---> System.Runtime.Serialization.SerializationException: Type 'System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' with data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.
           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiTypeAtTopLevel(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle originalDeclaredTypeHandle, Type graphType)
           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
           at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
           at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)
           --- End of inner exception stack trace ---
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)
           at System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(XmlDictionaryWriter writer, MessageVersion version, Object[] parameters, Object returnValue, Boolean isRequest)
           at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)
           at System.ServiceModel.Channels.BodyWriterMessage.OnBodyToString(XmlDictionaryWriter writer)
           at System.ServiceModel.Channels.Message.ToString(XmlDictionaryWriter writer)
           at System.ServiceModel.Diagnostics.MessageLogTraceRecord.WriteTo(XmlWriter writer)
           at System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLogTraceRecord record)
           at System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(Message& message, XmlReader reader, MessageLoggingSource source)
           at System.ServiceModel.Diagnostics.MessageLogger.LogMessage(Message& message, XmlReader reader, MessageLoggingSource source)
         Process Name: WebDev.WebServer40
         Process ID: 11620

        Event Xml:
        <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
          <System>
            <Provider Name="System.ServiceModel 4.0.0.0" />
            <EventID Qualifiers="49154">5</EventID>
            <Level>2</Level>
            <Task>7</Task>
            <Keywords>0x80000000000000</Keywords>
            <TimeCreated SystemTime="2012-10-18T07:32:11.000000000Z" />
            <EventRecordID>36499</EventRecordID>
            <Channel>Application</Channel>
            <Computer>Jon-PC</Computer>
            <Security UserID="S-1-5-21-334737869-2079735299-2176000493-1000" />
          </System>
          <EventData>
            <Data>System.ServiceModel.CommunicationException: There was an error while trying to serialize parameter http://tempuri.org/:GetQuestionnaireResult. The InnerException message was 'Type 'System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' with data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.'.  Please see InnerException for more details. ---&gt; System.Runtime.Serialization.SerializationException: Type 'System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' with data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.
           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiTypeAtTopLevel(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle originalDeclaredTypeHandle, Type graphType)
           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
           at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
           at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)
           --- End of inner exception stack trace ---
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)
           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)
           at System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(XmlDictionaryWriter writer, MessageVersion version, Object[] parameters, Object returnValue, Boolean isRequest)
           at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)
           at System.ServiceModel.Channels.BodyWriterMessage.OnBodyToString(XmlDictionaryWriter writer)
           at System.ServiceModel.Channels.Message.ToString(XmlDictionaryWriter writer)
           at System.ServiceModel.Diagnostics.MessageLogTraceRecord.WriteTo(XmlWriter writer)
           at System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLogTraceRecord record)
           at System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(Message&amp; message, XmlReader reader, MessageLoggingSource source)
           at System.ServiceModel.Diagnostics.MessageLogger.LogMessage(Message&amp; message, XmlReader reader, MessageLoggingSource source)</Data>
            <Data>WebDev.WebServer40</Data>
            <Data>11620</Data>
          </EventData>
        </Event> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:11:11.380

与 WCF 一起使用的所有类型都必须是数据协定或标记为 [Serializable]。这包括已经在 WCF 数据协定中的任何对象。如果您有能力，则必须将 [Serializable] 标记添加到类中，或者将 WCF 特定标记添加到它们。这不是开玩笑的意思，即使您将 Type 添加到 KnownTypes，这并不意味着 WCF 会知道它是可序列化的。

如果这些选项都不可用，我建议创建“代理”对象，这些对象可以包含您要传递的值，并让这些值与您的目标对象相互转换。听起来很疯狂，但事情就是这样……

添加示例：

WCF 利用[System.Runtime.Serialization](http://msdn.microsoft.com/en-us/library/kd1dc9w5.aspx)命名空间中包含的序列化程序将数据序列化和反序列化为不同格式（XML、SOAP、JSON、二进制）。为了使其工作，要序列化的对象必须是某种可序列化类型（用属性标记）。数据对象的内置 WCF 属性如下所示：

```
//This is marked with the DataContract attribute, which is WCF specific
[DataContract]
public class Foo
{
    //The DataMember attribute is also WCF specific and specifies what data
    // is included in the serialization.  Any properties (or variables) must be
    // accessable, as in not read only.
    [DataMember]
    public string Property1{get;set;}

    //This variable will be serialized as well, even though it is private.  This
    // works great if you have a readonly property but still need to pass the data
    [DataMember]
    private int Id = 0;

    //This does not have a DataMember attribute and will not be serialized
    private string var1;
} 
```

[WCF 还可以利用标记为Serializable](http://msdn.microsoft.com/en-us/library/system.serializableattribute%28v=vs.110%29.aspx)的类（例如 DataTable 和 DataSet）。

```
//This is marked with the Serializable attribute.  All public and private
// fields are automatically serialized (unless there is a containing object
// that is not serializable then you get a SerializationException
[Serializable]
public class Bar
{
    //gets serialized
    public string Property1{get;set;}

    //gets serialized
    private string var1;
} 
```

创建“代理”对象的想法与添加服务引用时 Visual Studio 生成的想法相同，只是相反。假设您有不可序列化的类“Foo2”，并且具有某些属性。

```
public class Foo2
{
    public string Property1{get;set;}

    public string Property2{get;set;}

    public int Property3{get;set;}
} 
```

您可以创建一个代理类（几乎以任何您想要的方式），它允许您在服务之间来回传递属性。

```
[DataContract]
public class Foo2Proxy
{
    [DataMember]
    public string Property1{get;set;}

    [DataMember]
    public string Property2{get;set;}

    [DataMember]
    public int Property3{get;set;}

    public Foo2Proxy()
    {
    }

    public Foo2Proxy(Foo2 foo)
    {
        this.Property1 = foo.Property1;
        this.Property2 = foo.Property2;
        this.Property3 = foo.Property3;
    }

    public static Foo2 Create(Foo2Proxy fProxy)
    {
        var foo = new Foo2();
        foo.Property1 = fProxy.Property1;
        foo.Property2 = fProxy.Property2;
        foo.Property3 = fProxy.Property3;
        return foo;
    }
} 
```

我确信关于如何做到这一点可能有 100,000 种不同的方式和意见，但这只是当时对我有用的可能性的一个例子。如果你看一下[CodeProject 上的这篇文章，](http://www.codeproject.com/Articles/127395/Implementing-a-WCF-Service-with-Entity-Framework)你可以看到我在这里拍摄的内容。

在您的特定情况下，您可能需要为 EF 创建的 Question 和 Decision 类型创建“代理”对象（或任何您想调用的包装对象），因为它们似乎不是天生可序列化的，除非您可以进入为这些对象生成的代码并添加如上所述的属性。另一个考虑因素是，如果它们是从另一个类（或抽象类）派生的，那么基类也必须标记为可序列化或 DataContract！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:11:08.747

这里的问题是当您使用*QuestionnaireEntities*查询数据库时获得的对象属于代理类型，而不是*Questionnaire*（或您定义的其他类型）类型。

您可以测试任何返回对象的调用 .GetType() 。

创建代理以支持*延迟加载*。它们仅在您尝试访问属性时加载数据。

如果您从 WCF 服务返回它们，您必须告诉实体框架停止创建代理。

您可以通过编写以下代码来做到这一点：

```
db.Configuration.ProxyCreationEnabled = false; 
```

注意：据我所知，关闭代理也应该有效地关闭*延迟加载*。根据我对实体框架的经验，您有两个选择，*延迟加载*或完全*不加载*。

因此，禁用*延迟加载*后，所有导航属性都将为*null*。要让 EF 也加载这些属性的值，您需要在查询中使用*Include()*方法。

# java - How to invoke a link using href or anything from my java method?

> ID：12950148
> 
> 赞同：0
> 
> 时间：2012-10-18T08:22:29.693
> 
> 标签：java, struts, href, struts-1

I need to invoke the href link on my java method. My sample code is defined below. After finishing my logic i need to invoke the URL. The URL is used to open an Excel workbook and import our bean values to there.

```
public void populateExcelReportValues(HttpServletRequest request, HttpServletResponse response) throws Exception
    {
        String METHOD_NAME = "populateExcelReportValues";
        log.entering(CLASS_NAME, METHOD_NAME);

        //Rating Element Id 
        String ratingElementIdForExcel = request.getParameter("ratingElementIdFromJSP");
        //Instance Type Name
        String instanceTypeForExcel = request.getParameter("instanceTypeFromJSP");
        int ratingElementIdForExcelInt = 0;

        String instanceTypeValueForExcel = "";
        if(ratingElementIdForExcel != null && ratingElementIdForExcel.trim().length()>0)
        {
            ratingElementIdForExcelInt = Integer.parseInt(ratingElementIdForExcel);
            System.out.println("ratingElementIdForExcelInt: "+ratingElementIdForExcelInt);

        }
        if(instanceTypeForExcel != null && instanceTypeForExcel.trim().length()>0)
        {
            instanceTypeValueForExcel = instanceTypeForExcel.trim();
            System.out.println("instanceTypeValueForExcel: "+instanceTypeValueForExcel);
        }
        switch (ratingElementIdForExcelInt) 
        {
            case 1: //ASN Accuracy - Rating Element ID - 1 
                    weeklyDeliveryInstancesRatingElementQO = getASNAccuracyRatingElement(instanceTypeValueForExcel);
                    //return weeklyDeliveryInstancesRatingElementQO;
                    break;
            default:
                    weeklyDeliveryInstancesRatingElementQO = new ArrayList<WeeklyDeliveryInstancesRatingElementQO>();
                    break;
        }
        //How to invoke this url to here
        **(MultiTableExportServlet?multitablesId=WeeklyDeliveryInstances-Count&amp;name=WeeklyDeliveryInstances-Count&amp;type=excel)**
        log.exiting(CLASS_NAME, METHOD_NAME);
    } 
```

In above my code i showed to bold for your identification.

## Jsp page:

```
<display:table name="${weeklyDlvyInstancesDashboardReportForm.asnAccuracyListQO}" uid="asnAccuracyListUID" sort="list" defaultsort="1" 
                                        requestURI="/weeklyDlvyInstancesDashboardReportPre.do?method=httpGet" excludedParams="method"
                                        decorator="com.ford.mpl.superg.decorator.WeeklyDeliveryInstancesTypeTableDecorator" keepStatus="true">
                                        <%@include file="/jsp/include/displaytag.jsp"%>
                                        <c:set value="${asnAccuracyListUID.firstWeekOfCountLabel}" var="asnAccuracyFirstWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.secondWeekOfCountLabel}" var="asnAccuracySecondWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.thirdWeekOfCountLabel}" var="asnAccuracyThirdWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.fourthWeekOfCountLabel}" var="asnAccuracyFourthWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.fifthWeekOfCountLabel}" var="asnAccuracyFifthWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.sixthWeekOfCountLabel}" var="asnAccuracySixthWeekOfCount"/>

                                        <c:choose>
                                        <c:when test="${asnAccuracyListUID.instanceTypeDescription != null && asnAccuracyListUID.instanceTypeDescription != 'Sum'}">
                                            <display:column property="instanceTypeDescription" title="Instance Type" sortable="false"/>
                                        </c:when>
                                        <c:otherwise>
                                            <display:column property="instanceTypeDescription" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
                                        </c:otherwise>
                                        </c:choose>

                                        <display:column property="firstWeekOfCount" title="${asnAccuracyFirstWeekOfCount}" sortable="false"/>
                                        <display:column property="secondWeekOfCount" title="${asnAccuracySecondWeekOfCount}" sortable="false"  />
                                        <display:column property="thirdWeekOfCount" title="${asnAccuracyThirdWeekOfCount}" sortable="false"  />
                                        <display:column property="fourthWeekOfCount" title="${asnAccuracyFourthWeekOfCount}" sortable="false" />
                                        <display:column property="fifthWeekOfCount" title="${asnAccuracyFifthWeekOfCount}" sortable="false" />
                                        <display:column property="sixthWeekOfCount" title="${asnAccuracySixthWeekOfCount}" sortable="false"/>
                                    </display:table>
                                </fieldset>

                                <export:multitables id="WeeklyDeliveryInstances-Count">
                                        <export:table title="tablename" source="${weeklyDlvyInstancesDashboardReportForm.weeklyDeliveryInstancesRatingElementQO}">
                                            <export:column property="shipCode" title="Ship Code" />
                                            <export:column property="plantOrRecLoc" title="Plant/Rec Loc" />
                                            <export:column property="instanceType" title="Instance Type" />
                                            <export:column property="fordOrg" title="Ford Org" />
                                            <export:column property="OrgType" title="Org Type" />
                                            <export:column property="region" title="Region" />
                                            <export:column property="shipDate" title="Ship Date" />
                                            <export:column property="errorTransmitted" title="Error Transmitted" />
                                            <export:column property="externalAlertNo" title="External Alert Number" />
                                            <export:column property="asnNumber" title="ASN Number"/>
                                            <export:column property="packingSlipNumber" title="Packing Slip Number"/>
                                        </export:table>
                                    </export:multitables> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:49:33.233

我会采取这种方法：

在 struts-config.xml 中为您的操作中的 servlet 添加转发，例如：

```
<forward name="Success" path="/servlet/MultiTableExportServlet"/> 
```

（如果与上面不同，您需要将“路径”更改为 servlet 的 url 模式）。

在您的 Action 类中，您可以通过执行以下操作重定向到此转发：

```
 ActionForward originalForward = a_mapping.findForward ("Success");  
    String path = originalForward.getPath() 
        + "?multitablesId=WeeklyDeliveryInstances-Count&name=WeeklyDeliveryInstances-Count&type=excel";     

    ActionForward forward = new ActionForward(path);
    forward.setRedirect(true);
    return (forward); 
```

您的查询字符串（multitablesId=WeeklyDeliveryInstances-Count 等）看起来错误。WeeklyDeliveryInstances-Count 是变量吗？我看不到您在哪里定义或使用它。

# cocoa - Mac app, menuitem to bring main window to front grayed out on close/minimize

> ID：12950151
> 
> 赞同：0
> 
> 时间：2012-10-18T08:22:41.437
> 
> 标签：cocoa, menu, nsmenuitem

I'm trying to add a menu item to show the main window. It's enabled when the window has not been minimized or closed (yellow - and red x buttons), but when it has, the menu item is grayed out. That is of course useless and silly. :)

Another menu item, File/Page Setup... is NOT grayed out in the same way (on minimize/close). I have found no differences in IB between this menu item and the one I created, except the title. Both are connected to First Responder selectors (runPageLayout: for page setup, and showWindow: for mine), both have keyboard shortcuts, and both are enabled.

Likewise, the parent menu items are identical, except for the title.

How do I make sure this Show Main Window menu item is available when the user has pressed the red x or the yellow - button?

**Edit:** I made the menu items not gray out by unchecking Auto Enables Items for the parent menu item.

That made this method in the standard NSDocument class for the application be called:

```
- (IBAction)clickMinimizeButton:(id)sender {
    NSWindow *ww=[[NSApplication sharedApplication] mainWindow];
    NSLog(@"%@",ww);
} 
```

And ww is a valid object.

The problem is, I can't restore the window from minimized/closed, because the method *isn't* called when it is.

How do I make this method be called when the window is minimized/closed? I want to simply do the opposite of the minimize or close click.

There's only one window in the app, and clicking the dock icon again does show the window, but Apple requires a menu item to do the exact same thing.

It would seem I have to connect the menu item to a custom, created by me, application method (certainly no application method restores all windows, for example), but I don't know where to declare it, since I'm not as experienced with Cocoa as I am with Cocoa Touch.

**Edit 2:** Going from the above, I created a method in the application delegate and connected it to the menu item. This gets the method called even when minimized, but I don't know the correct code to restore the main window. This desperate try of course only activates the app that is already active, not the window that is minimized.

```
NSApplication *theapp=[NSApplication sharedApplication];
[theapp activateIgnoringOtherApps:YES]; 
```

So this is all that is left now. How to emulate the standard "Bring All to Front" menu item in a default application? I will have a look at some standard windowed Mac app from Apple.

**Edit 3:** I created a standard Cocoa Application, and it too grays out all menu items in the Window menu when the window is minimized. But the default NSDocument is automatically added below these, and is not grayed out. I will be happy with such a solution.

For some reason, in my Window menu, my NSDocument does **not** automatically appear. The Info.plists are identical (apart from pointing to differently named NSDocument classes, of course).

How do I

a) programmatically add the document to that menu,

b) get the Window menu to automatically add it as it does in the standard application, or

c) replace my "damaged" Window menu (if that is the case) with a Window menu from my standard app that behaves as expected?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:39:11.870

尝试将您的方法重命名为其他名称。 `showWindow:`已经在 NSWindowController 中声明，这可能会产生冲突。还要确保没有释放应该响应菜单项的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:05:31.863

你实现了你的showWindow吗？

```
- (void)showWindow {
    if (!self.window) {
        [NSBundle loadNibNamed:@"MainWin" owner:self];
    }

    [self.window makeKeyAndOrderFront:self];
} 
```

ps你`window`不能`autoreleased`关闭窗口（`Behavior`-> `Release When Closed`）

# ruby - Ruby：带有转义反斜杠的 JSON.parse

> ID：12950153
> 
> 赞同：2
> 
> 时间：2012-10-18T08:22:43.053
> 
> 标签：ruby, json, escaping

我有一个 JSON 编码的数组，看起来像这样（注意：这是在文件中，而不是字符串的内容）`["Company\\","NN","Company\\"]`：。这是无效的 JSON 吗？它包含一个转义`\`字符，在我看来是正确的。然而：

```
a = '["Company\\","NN","Company\\"]'
 => "[\"Company\\\",\"NN\",\"Company\\\"]" 
JSON.parse a
JSON::ParserError: 387: unexpected token at 'NN","Company\"]'
from /Users/nneubauer/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/json/common.rb:148:in `parse'
from /Users/nneubauer/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/json/common.rb:148:in `parse'
from (irb):11
from /Users/nneubauer/.rvm/rubies/ruby-1.9.3-p0/bin/irb:16:in `<main>' 
```

有趣的是：

```
puts a
["Company\","NN","Company\"] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T08:59:12.357

我认为从文件中读取该字节序列并将其按字面意思放入您的 Ruby 代码中是有区别的。

当您`'`在 Ruby 代码中用作字符串分隔符时，它仍被解释`\\`为转义序列。所以你得到一个值为 的字符串`["Company\","NN","Company\"]`。

然后 JSON 解析器得到它。它看到了开始`[`，然后寻找一个字符串。它将`\"`序列解释为转义，因此它看到的第一个字符串的值为`Company\",`. 然后它期望看到一个逗号 - 但看到`NN`并抛出：

```
1.9.3-p194 :009 > a = '["Company\\","NN","Company\\"]'
 => "[\"Company\\\",\"NN\",\"Company\\\"]" 
1.9.3-p194 :010 > puts a
["Company\","NN","Company\"]
 => nil 
1.9.3-p194 :011 > JSON.parse(a)
JSON::ParserError: 387: unexpected token at 'NN","Company\"]' 
```

但是，如果我使用 . 从文件中读取该字节序列`gets`，则该值最终为`["Company\\","NN","Company\\"]`. 这可以解析为 JSON -`\\`由 JSON 解释，然后它会看到`"`并正确关闭数组中的第一个字符串。

```
1.9.3-p194 :012 > b = gets
["Company\\","NN","Company\\"]
 => "[\"Company\\\\\",\"NN\",\"Company\\\\\"]\n" 
1.9.3-p194 :013 > puts b
["Company\\","NN","Company\\"]
 => nil 
1.9.3-p194 :014 > JSON.parse b
 => ["Company\\", "NN", "Company\\"] 
1.9.3-p194 :015 > JSON.parse(b).length
 => 3 
```

那么，你做错了什么？从数据文件剪切并粘贴到源代码中。:)

# javascript - How to create a suitable object for IndexedDB from a dynamically created input form

> ID：12950154
> 
> 赞同：0
> 
> 时间：2012-10-18T08:22:42.347
> 
> 标签：javascript, html, indexeddb

I wish to save the values from the input boxes in a dynamically created form but I´m having some trouble constructing the object that is to put into the IndexedDB objestStore. I need something like this:

`[{"name": "box1 value", "last name": "box2 value", "age": "box3 value"},{"name": "box4 value", "last name": "box5 value", "age": "box6 value"}]`

propriety names have to stay the same (equal to the indexes in the objectStore), only the values change.

The code:

```
var rows = document.getElementById('myTable').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
for (i = 0; i < rows.length; i++) {
    var boxes = rows.getElementsByClassName('input');
    for (i = 0; i < boxes.length; i++) {

       objectStore.put('values');

    };  
}; 
```

I'm trying JSON.stringify(); but I'm not getting it to work... Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:13:15.020

我认为最好的做法是： - 为同一属性的所有输入字段赋予相同的名称属性 - 为每一行检索这些输入字段的值 - 构造对象 - 保存对象。

在伪代码中：

```
for each (row in rows){
  var obj = {};
  obj.name = row.getElementByName('name').value;
  obj.lastname = row.getElementByName('lastname').value;
  obj.age = row.getElementByName('age').value;

  objectStore.put(obj)
} 
```

# windows-xp - Set ArchitecturesInstallIn64BitMode conditionally

> ID：12950156
> 
> 赞同：1
> 
> 时间：2012-10-18T08:22:46.303
> 
> 标签：windows-xp, inno-setup

I use `ArchitecturesInstallIn64BitMode=x64` and it works fine on 64-bit Vista/Win7, but on XP x64 it causes problems (regserver fails), so I want to set it only if the OS is not XP x64.

Is that possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:31:04.380

无法有条件地设置[`ArchitecturesInstallIn64BitMode`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_architecturesinstallin64bitmode)指令，也无法决定是否要以任何方式从脚本以 32 位或 64 位安装模式运行安装程序（甚至[`ArchitecturesAllowed`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_architecturesallowed)不能有条件地设置）。我建议作为您的问题的解决方法是使用[`RegisterServer`](http://www.jrsoftware.org/ishelp/index.php?topic=isxfunc_registerserver)从代码传递到其第一个参数条件的函数，当您将在 64 位 Vista 以上系统上时返回 True。使用参考中的代码，它可能看起来像这样（以下伪代码应将 OCX 扩展注册为 64 位，仅在上面装有 Windows Vista 的 64 位系统上）：

```
RegisterServer(IsWin64 and (GetWindowsVersion >= $06000000), 
  ExpandConstant('{sys}\hhctrl.ocx'), False); 
```

# windows - Detecting failure of UDP multicast receive

> ID：12950159
> 
> 赞同：3
> 
> 时间：2012-10-18T08:23:01.030
> 
> 标签：windows, sockets, multicast

I have a UDP server which binds to a well-known port, adds itself to a multicast group and listens for requests for clients. (The server is on Windows, and uses WSARecvFrom to issue an overlapped receive for client datagrams.) Clients send messages to the server at its well-known port and multicast IP address.

When testing the 'server' on a laptop, I have noticed that if the laptop enters a 'sleep' state the server's receiving socket becomes 'unbound' from the multicast address (so that client sends to the multicast address are no-longer received). However, the socket is still receiving in that a send to its port at 127.0.0.1 is still received - and Windows does not indicate any error. (The server socket is bound to INADDR_ANY.)

The 'server' is part of a peer-to-peer application, used for auto-discovery - so this situation is not as unusual as might be expected.

Can you suggest a way to determine whether the server is still actively listening on the multicast address without sending to the multicast address (which would result in unnecessary traffic to all 'servers' on the network)? One possible solution would be to send to the IP address of the adapter used for multicast, but I'm not sure how to determine this.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T09:37:57.890

您的网络堆栈将定期发送[IGMP](http://en.wikipedia.org/wiki/Internet_Group_Management_Protocol)消息。您网络上的交换机可以使用[IGMP 侦听](http://en.wikipedia.org/wiki/IGMP_snooping)来确定您的计算机需要哪些（如果有）多播消息。（这一切都是为了避免由于没有请求的流量而给主机施加过多的负载。）

当您的笔记本电脑休眠时，它将停止发送定期消息，以确认其对某些多播流量感兴趣。您的交换机会注意到这一点并停止将流量发送到您的笔记本电脑。

我认为您需要发现笔记本电脑何时从休眠状态恢复并将成员资格重新添加到多播组。我过去通过使用控制代码[SIO_ADDRESS_LIST_CHANGE调用](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736550(v=vs.85).aspx)[WSAIoctl](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741621(v=vs.85).aspx)来完成此操作（加上处理启用/禁用的网络适配器） 。每当笔记本电脑休眠时，所有适配器都会报告为已禁用；当它恢复时，将报告适配器再次启用。（请注意，这可能有点繁琐，因为适配器可能会在它们真正能够发送 UDP 数据报之前几秒钟报告为可用，因此您可能必须重试几次添加成员资格，每次重试之间会有小的延迟。或者您如果您愿意，可以在收到适配器更改通知后等待 30 秒。）

# facebook-graph-api - Posts to wall via graph api don't show when I include a link

> ID：12950162
> 
> 赞同：0
> 
> 时间：2012-10-18T08:23:19.543
> 
> 标签：facebook-graph-api

I've created a facebook app, and authorized a user (my personal facebook account) to the app with the 'publish_stream' and 'offline_access' permissions.

Using my access token, I can post status updates to my wall (USER_ID/feed) when I include a "message" parameter by itself.

Example: [https://graph.facebook.com/USER_ID/feed?access_token=ACCESS_TOKEN&message=Test](https://graph.facebook.com/USER_ID/feed?access_token=ACCESS_TOKEN&message=Test)

However, I need my app to post additional data, such as a link to the page which the user is sharing. No problem, right? Per the spec, I just need to include a "link" parameter with the post to the graph api.

The problem is that, as soon as I include the "link" parameter, the post never shows up on my wall! And to make matters worse, the graph api returns a post ID as if everything was ok!

Example: [https://graph.facebook.com/USER_ID/feed?access_token=ACCESS_TOKEN&message=Test&link=http%3A%2F%2Fwww.google.com](https://graph.facebook.com/USER_ID/feed?access_token=ACCESS_TOKEN&message=Test&link=http%3A%2F%2Fwww.google.com)

What in the world am I missing here?

# unit-testing - Creating custom Code Analysis rules for XAML

> ID：12950163
> 
> 赞同：7
> 
> 时间：2012-10-18T08:23:22.327
> 
> 标签：unit-testing, xaml, visual-studio-2012, visual-studio-2013, code-analysis

I'm interested in creating custom rules for Code Analysis (`Visual Studio 2010` and above) ***which target the XAML specifically***.

I've read about [creating custom rules](http://blogs.msdn.com/b/codeanalysis/archive/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio-2010.aspx) and even about FXCop + [XAML Toolkit](http://archive.msdn.microsoft.com/XAML), but the later is now archived and doesn't support latest versions of FXCop (i.e. the version that Code Analysis works with). I've also looked at other tools such as [NDepend](http://www.ndepend.com/Features.aspx) but it doesn't seem to support this either.

An example for a custom rule I'd like to make: *Make sure no elements in the XAML have the **Width** property set to a constant.*

Any ideas on how to do this in `VS 2012/VS 2013` (any external tool that integrates with Visual studio is also an option)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:00:30.920

我们的代码分析产品[http://submain.com/CodeIt.Right](http://submain.com/CodeIt.Right)包含一组开箱即用的 XAML/SL/WPF 规则，您还可以使用 CodeIt.Right 自定义规则 SDK 创建您提到的自定义规则。我们很乐意引导您完成您的自定义规则。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T13:17:52.963

StyleCop 规则可能是您所追求的，而不是 CodeAnalysis 规则。CodeAnalysis 对编译后的代码起作用，这使得验证 xaml 代码变得更加困难。

StyleCop 在源代码上工作，允许您使用像 XPath 这样简单的东西来制作检查，以验证属性或值的存在。

# php - dompdf 忽略宽度属性

> ID：12950169
> 
> 赞同：5
> 
> 时间：2012-10-18T08:23:37.303
> 
> 标签：php, dompdf

我正在尝试创建一个在页面上具有三个黑框的 PDF。我已经编码了以下..

```
 <?php
  require_once("dompdf_config.inc.php");

  $html =
    '
  <!DOCTYPE html>
  <html>
  <head>
  <meta charset="utf-8" />
  <title></title>
  <style type="text/css">

  .main
  {
  border: 0pt solid black;
  }
  .gutter
  {
  width: 100px;
  border: 1px solid black;
  }
  .card
  {
  width:50px;
  height:50px;
  border: 0px solid black;
  }
  </style>
  </head>
  <body>
  <table class="main" >
    <tbody>
      <tr>
        <td class="gutter"> </td>
        <td class="card"> </td>
        <td class="gutter"> </td>
        <td class="card"> </td>
        <td class="gutter"> </td>
      </tr>
    </tbody>
  </table>
  </body>
  </html>';

  $dompdf = new DOMPDF();
  $dompdf->load_html($html);
  $dompdf->render();
  $dompdf->stream("sample.pdf");
  ?> 
```

width 属性被完全忽略。我在表格顶部有 3 个非常窄的盒子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-16T09:32:16.413

尝试为表格编写样式宽度 = 100%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:34:58.960

您必须在单元格中添加一个空格，以便它们采用您指定的宽度。

编辑：如果您不想更改 HTML，另一种解决方案是添加此 CSS（您需要 dompdf 0.6 beta 3）：

```
.gutter:before, .card:before  {
  content: "";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T18:44:59.527

更新最后一个版本，它应该可以工作，
dompdf_0-6-0_beta3
下载[https://code.google.com/p/dompdf/downloads/list](https://code.google.com/p/dompdf/downloads/list)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T12:53:14.357

我最终使用了百分比。就我而言，它有所帮助。

# gwt - GoogleWebToolkit 运行时动态布局活动

> ID：12950171
> 
> 赞同：0
> 
> 时间：2012-10-18T08:23:39.963
> 
> 标签：gwt, uibinder

我在客户端使用 GWT 和活动和地点。我有一个布局（LeftSide - CenterSide - RightSide），每一面都有自己的 ActivityMapper + Activity + View。

我想将动态视图（有活动）添加到侧面。例如，如果用户的性别是男性，则在左侧显示 AView+APresenter 和 BView+BPresenter；但如果用户的性别是女性，则只显示 BView+BPresenter。

有人可以帮助我如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:43:35.857

您必须创建一个在需要时`ActivityMapper`返回的第四个`null`。
当传递一个小部件时，它的显示区域 ( `AcceptsOneWidget`) 可能会缩小/消失`null`。

有关更多上下文和一些示例代码，请参阅[http://blog.ltgt.net/gwt-21-activities-nesting-yagni/](http://blog.ltgt.net/gwt-21-activities-nesting-yagni/)。

但是，如果您因用户而异，并在您的应用程序之外进行身份验证（这意味着应用程序加载了一个已知用户，然后它永远不会更改，或者应用程序为其他用户重新加载），那么您可以简单地在启动时决定 ( ) 是否与它的and一起`onModuleLoad`创建第四个： `ActivityMapper``ActivityManager``AcceptsOneWidget`

```
if (user.getGender() == Gender.MALE) {
  SimplePanel display = new SimplePanel();
  parent.add(display);

  ActivityManager manager = new ActivityManager(new MaleSpecificActivityMapper(), eventBus);
  manager.setDisplay(display);
} 
```

# php - Foreach 如果多维，否则没有循环，最干净的解决方案

> ID：12950173
> 
> 赞同：0
> 
> 时间：2012-10-18T08:23:43.333
> 
> 标签：php, html, multidimensional-array

我有一些标记需要根据数组进行相应的循环，如果它是多维的，我必须以一种方式循环它，否则我不必循环它。

现在我通过做一个大的'ol if/else来解决这个问题，如果它不是多维的，则打印“静态”标记，如果是则循环标记。这很难看，让我使用 2 个相同的标记块。

```
if (count($data_array) == count($data_array, COUNT_RECURSIVE)) 
    { block of html }
else
{ looped-almost same block of html } 
```

任何人对此都有更好的解决方案，我很乐意实施它:)

编辑：要清除，我有一个具有循环或不循环属性的表。

```
foreach($i as $b => $v)
$v['item'] 
```

如果`$v['item']`数组是多维的，如果数组不是多维的，则遍历表的位置我只需简单地打印表`$i['item']`

这让我使用 2 个相同的 html-blocks 唯一的区别是 $v / $i

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:41:42.687

更新答案后，我认为只需检查`$array['item']`with[`isset`](http://php.net/isset)即可解决您的问题。

例子：

```
if(isset($array['item'])) {
    // Do non-recursive stuff
}
else {
    // Do more checks and recursive stuff
} 
```

* * *

**老答案：**

你有没有想过[`is_array`](http://php.net/is_array)？

```
for($yourArray as $key => $value) {
    if (is_array($value)) {
        // Do multidimensional stuff
    }
    else {
        // Do normal stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:27:29.247

通过这样做解决了这个问题：

```
 if(is_array($v))
    {
        $table_array = $v;
    }
    else
    {
        $table_array = $i;
        $single = true;
    } 
```

在 foreach 循环内，在循环结束时

```
if(isset($single))
    break; 
```

不是那么热....但至少我不复制 html :)

# sql-server - SQL REAL 0 除法在 SQL Server 2008 上导致有趣的错误

> ID：12950174
> 
> 赞同：4
> 
> 时间：2012-10-18T08:23:46.790
> 
> 标签：sql-server, sql-server-2008, compilation, real-datatype

昨天在 SQL Server 上发现了一个有趣的问题，试试这个：

```
DECLARE @a REAL = 0.0000
DECLARE @c DECIMAL (18,10) = 20754/3.45 -- this is 6015.6521730000
DECLARE @b DECIMAL (18,10) = 
CASE 
    WHEN 1 > 2 
        THEN @a / 100
    WHEN 1 = 2
        THEN 56
    ELSE @c
END

SELECT @b 
```

这似乎是一个精度问题，以及如何编译 case 语句。它可以通过在 case 语句中将 REAL @a 转换为小数来轻松解决，但由于它是 @c 我们正在返回并且其他情况不应该被击中，这是一个奇怪的问题。任何人都足够了解 SQL 编译来解释这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:39:21.563

It's down to [Data Type Precedence](http://msdn.microsoft.com/en-us/library/ms190309%28v=sql.100%29.aspx), as detailed in the documentation

> [CASE] Returns the highest precedence type from the set of types in result_expressions and the optional else_result_expression.

[http://msdn.microsoft.com/en-us/library/ms181765(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms181765(v=sql.100).aspx)

You can break it entirely by adding the line

```
WHEN 1 = 3 then getdate() 
```

There's a more detailed explanation [here](http://www.sqlmag.com/article/tsql3/subtleties-of-data-type-precedence)

I imagine that the compiler assumes that all cases may be possible (your example is of course deliberately perverse :) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:34:04.900

**这是一个错误的答案，请参阅 podiluska 的正确答案。**

case 语句的结果类型是第一个`then`子句的类型。所以：

```
CASE 
    WHEN 1 > 2 
        THEN @a / 100 
```

使`case`结果为`@a`, a的类型`real`。将其更改为：

```
CASE 
    WHEN 1 > 2 
        THEN cast(@a as decima(18,10)) / 100 
```

得到结果为`decimal(18,10)`.

# css - 多个css类奇怪的行为

> ID：12950180
> 
> 赞同：0
> 
> 时间：2012-10-18T08:24:05.230
> 
> 标签：css, class, styles

我有这样的课

```
.lifetime .containerrow
{
    text-align: center;
    height: 20px;
} 
```

我需要将某些元素中的文本加粗，所以我这样做了：

```
.lifetime .containerrow .info
{
    font-weight:bold;
} 
```

这没有用，但这确实：

```
.lifetime.containerrow.info
{
    font-weight:bold;
} 
```

为什么？不是一样的吗？
谢谢
不太懂css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:26:24.083

这是正确的行为。`.class1.class2.class3`匹配具有所有三个类的元素。`.class1 .class2 .class3`匹配`.class3`inside 的元素`.class2`inside 的元素`.class1`。

如果要将相同的样式应用于三个单独的类，则需要用逗号分隔它们（例如`.class1, .class2, .class3 { font-weight: bold; }`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:26:55.687

```
.lifetime .containerrow .info
{
    font-weight:bold;
} 
```

表示嵌套在 .containerrow 内的 .info 类的元素，该类嵌套在 .lifetime 内

```
.lifetime.containerrow.info
{
    font-weight:bold;
} 
```

表示具有 .lifetime、.containerrow 和 .info 类的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:27:37.647

我假设您想对多个类应用粗体字重：

```
.lifetime,
.containerrow,
.info
{
    font-weight:bold;
} 
```

您必须用逗号分隔类以在不同元素上选择不同的类，但应用相同的样式。

使用选择器：`.lifetime .containerrow .info`您正在选择一个元素，该元素的`.info`类是其子级，而该类`.containerrow`又是`.lifetime`.

# javascript - 使用 jQuery 将 JSON 中的元素转换为 html 不起作用

> ID：12950182
> 
> 赞同：1
> 
> 时间：2012-10-18T08:24:09.777
> 
> 标签：javascript, json

我正在使用以下代码从这个 JSON 中获取一些元素，但似乎没有任何效果。有人知道我做错了什么吗？（我花了很长时间试图弄清楚）。

```
$(document).ready(function() {

$.getJSON('http://free.worldweatheronline.com/feed/weather.ashx?q=Stockholm&format=json&num_of_days=2&key=e8536d3a52101433121710', function(Wdata) {
                $.each(Wdata.data, function() {

                $('<div id="test"></div>').append(

                        this.weather[0].date;

                        ).appendTo('body');

                  });
    });
}); 
```

我的 HTML 看起来像这样：

```
<!doctype html>
<html lang="se">
    <head>
        <meta charset="utf-8" />
        <title>Title of This Web Page</title>
        <script src="scripts\jquery-1.8.2.js" type="text/javascript"></script>
        <script src="scripts\js.js" type="text/javascript"></script>
    </head>

    <body>
              <div id="test">
              </div>
    </body>

</html> 
```

JSON 看起来像这样：

```
{

    "data": {
        "current_condition": [ … ],
        "request": [ … ],
        "weather": [
            {
                "date": "2012-10-17",
                "precipMM": "0.8",
                "tempMaxC": "11",
                "tempMaxF": "51",
                "tempMinC": "8",
                "tempMinF": "46",
                "weatherCode": "119",
                "weatherDesc": [
                    {
                        "value": "Cloudy"
                    }
                ],
                "weatherIconUrl": [
                    {
                        "value": "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0003_white_cloud.png"
                    }
                ],
                "winddir16Point": "SW",
                "winddirDegree": "224",
                "winddirection": "SW",
                "windspeedKmph": "27",
                "windspeedMiles": "17"
            },
            { … }
        ]
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:28:09.043

使用 JavaScript 控制台。阅读它给你的错误。

> Uncaught SyntaxError: Unexpected token ;

终止语句，而不是表达式。`;`从_`this.weather[0].date;`

如果你修复它，那么你会得到：

> `http://free.worldweatheronline.com/feed/weather.ashx?q=Stockholm&format=json&num_of_days=2&key=e8536d3a52101433121710\. Origin http://fiddle.jshell.net`Access-Control-Allow-Origin 不允许XMLHttpRequest 无法加载。

这个网站上有[很好的介绍](https://www.google.co.uk/search?q=site%3Astackoverflow.com+Access-Control-Allow-Origin&oq=site%3Astackoverflow.com+Access-Control-Allow-Origin&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:28:56.530

如果您的请求是跨域的 = url 不是来自您的域，您应该设置跨域标志或使用 jsonp。

# java - Java Quartz - cron 表达式

> ID：12950186
> 
> 赞同：0
> 
> 时间：2012-10-18T08:24:21.077
> 
> 标签：java, cron, quartz-scheduler

我有一个用 Java 编写的报告创建程序，需要每周一运行，我使用 Quartz 作为我的调度部分。诀窍是，需要生成的报告数量各不相同；取决于星期一是每月的第一天，还是接下来的星期一。

为了实现这一点，我所做的是为每月的每个星期一创建一个触发器，第一个星期一指向特定的工作类别，而其余的星期一（触发器）指向另一个工作类别。

```
 .withIdentity("trigger1", "group1")
        .withSchedule(cronSchedule("0 1 0 ? 1/1 MON#1 *"))
        .build();

        .withIdentity("trigger2", "group1")
        .withSchedule(cronSchedule("0 1 0 ? 1/1 MON#2 *"))
        .build(); 
```

依此类推，直到我到达

```
 .withIdentity("trigger5", "group1")
        .withSchedule(cronSchedule("0 1 0 ? 1/1 MON#5 *"))
        .build(); 
```

它达到了 MON#5，因为一个月可能有 5 个星期一；就像这个十月一样。这很好，它有效（我认为），但我的问题是这个。有没有办法结合我的 cron 计划，这样我在接下来的星期一只需要一个触发器？就像是;

```
 .withSchedule(cronSchedule("0 1 0 ? 1/1 MON#2,MON#3,MON#4,MON#5 *")) 
```

如果有，请不吝赐教。如果我只是在我的编程中遗漏了一些东西，或者如果迷宫中存在一个未知页面，它是引导我了解真相的网络，那么请指出我正确的方向。

非常感谢您的客气话。谢谢

ps：我包含了一个 cron 标签，尽管它说它是用于 UNIX 计算机的。我相信 Quartz cron 和 Unix cron 之间几乎没有区别。如果有，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:11:30.983

就个人而言，我会将这种逻辑放在 Java 中而不是 Quartz 配置中。让 Quartz 始终执行 Java 作业调度程序，然后根据日期确定要运行哪些报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:15:59.183

让 cron 在每月的第一个 X 天运行某些东西的常用 unix 解决方法是让 cron 在表单上触发脚本：

```
#! /usr/bin/bash
day=$( date +%d )
if ( ( day <= 7 ) ) ; then
    exec firstdayofthemonthshellscript.sh
fi 
```

在表单上有一个 crontab 条目

```
0 0 * * 1 wrapperscript.sh 
```

（例如星期一）。

总而言之，我认为使用 Quartz cron 也不容易实现您的目标，但也许您可以在实现中使用上述技巧。

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:16:45.927

看起来您的问题没有正式的解决方案。

这是 Quartz 2.0[文档](http://quartz-scheduler.org/api/2.0.0/org/quartz/CronExpression.html)的引用：

> 星期几字段允许使用“#”字符。此字符用于指定一个月中的“第 n 个”XXX 天。例如，星期几字段中的“6#3”值表示该月的第三个星期五（第 6 天 = 星期五，“#3” = 该月的第三个星期五）。其他示例：“2#1”= 每月的第一个星期一，“4#5”= 每月的第五个星期三。请注意，如果您指定“#5”并且当月没有给定的星期几中的 5 个，则该月不会发生触发。**如果使用 '#' 字符，则星期字段中只能有一个表达式（“3#1,6#3”无效，因为有两个表达式）。**

这也有一个开放的错误[。](http://jira.terracotta.org/jira/browse/QTZ-66?page=com.atlassian.streams.streams-jira-plugin%3aactivity-stream-issue-tab)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-24T12:51:08.180

正如 Tomer 所说，Quartz 不支持这种用例。但是如果 Quartz 不是一个约束，可以在[cron-utils](https://github.com/jmrozanec/cron-utils)创建一个有效的表达式。下面是一个例子：

```
String multicron = "0 1 0 ? 1/1 MON#2|MON#3|MON#4|MON#5 *";
CronDefinition definition = CronDefinitionBuilder.instanceDefinitionFor(CronType.QUARTZ);
CronParser parser = new CronParser(definition);
Cron cron = parser.parse(multicron); 
```

cron-utils 目前不提供执行作业的方法，但会为您提供任何给定日期的下一个/上一个执行时间。

# sharepoint - Sharepoint 2013：在显示模板呈现内容后运行任何其他 javascript

> ID：12950187
> 
> 赞同：1
> 
> 时间：2012-10-18T08:24:25.373
> 
> 标签：sharepoint

1.  我创建了一个 ContentBySearchWebpart，指定了我的自定义显示模板。
2.  想要在显示模板呈现内容后运行其他一些 javascript 代码
3.  在显示模板中注册了我的自定义 javascript 文件。

    ```
     $includeScript(this.url, "~sitecollection/_catalogs/masterpage/Display Templates/Slider.js"); 
    ```

4.  问题是，我的 Slider.js 文件代码在显示模板 Javascript 代码之前执行。在显示模板呈现 ContentBySearchWebpart(CSWP) 的内容后，任何人都可以为我提供一种运行 Slider.js 代码的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:05:27.573

:) 我的问题解决了。

我做了以下事情：

1.  在 Control_YourTemplateName.html 文件中注册了自定义 JS 文件（如 Control_Banner）

    $includeScript(this.url, "~sitecollection/_catalogs/masterpage/Display Templates/HWScripts/Banner.js");

在 YourTemplateName.html（如 Banner.html）文件中，在 body 标签后的第一个 div 下添加了这三行。

```
<!--#_

ctx.OnPostRender = [];

ctx.OnPostRender.push(function(){ 
CustomMethodWhichIsIncludedInTheCustomJSFile();
});
 _#--> 
```

# database - 数据库中没有条目？但是，错误消息不

> ID：12950188
> 
> 赞同：1
> 
> 时间：2012-10-18T08:24:32.107
> 
> 标签：database, message

我写了这段代码但是没有在数据库中列出会显示成功插入的消息吗？

```
if (txtdate.Text != "" && txtalireza.Text != "" && txtdatekamel.Text != "" && txthasan.Text != "" && txtkarbar.Text != "" && txtkarkard.Text != "" && txtkharid.Text != "" && txtmoj.Text != "" && txttozih.Text != "")
            {

                SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirector  y|\Resources\dbcn.mdf;Integrated Security=True;User Instance=True");
                SqlCommand com = new SqlCommand();
                com.Connection = con;
                com.CommandText="INSERT INTO newbuy(byname,datekol,dateshort,karkard,kharidha,b  arali,barhasan,barmoj,descrip)VALUES(@byname,@date  kol,@dateshort,@karkard,@kharidha,@barali,@barhasa  n,@barmoj,@descrip)";
                com.Parameters.AddWithValue("@byname",txtkarbar.Te  xt);
                com.Parameters.AddWithValue("@datekol", txtdatekamel.Text);
                com.Parameters.AddWithValue("@dateshort", txtdate.Text);
                com.Parameters.AddWithValue("@karkard",txtkarkard.  Text);
                com.Parameters.AddWithValue("@kharidha",txtkharid.  Text);
                com.Parameters.AddWithValue("@barali",txtalireza.T  ext);
                com.Parameters.AddWithValue("@barhasan",txthasan.T  ext);
                com.Parameters.AddWithValue("@barmoj",txtmoj.Text)  ;
                com.Parameters.AddWithValue("@descrip",txttozih.Te  xt);
                con.Open();
                com.ExecuteNonQuery();

                MessageBox.Show("inserted");

                con.Close();
            }
            else
            { MessageBox.Show("error"); }` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:30:05.333

```
int result=0;    
SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirector  y|\Resources\dbcn.mdf;Integrated Security=True;User Instance=True");
            SqlCommand com = new SqlCommand();
            com.Connection = con;
            com.CommandText="INSERT INTO newbuy(byname,datekol,dateshort,karkard,kharidha,b  arali,barhasan,barmoj,descrip)VALUES(@byname,@date  kol,@dateshort,@karkard,@kharidha,@barali,@barhasa  n,@barmoj,@descrip)";
            com.Parameters.AddWithValue("@byname",txtkarbar.Te  xt);
            com.Parameters.AddWithValue("@datekol", txtdatekamel.Text);
            com.Parameters.AddWithValue("@dateshort", txtdate.Text);
            com.Parameters.AddWithValue("@karkard",txtkarkard.Text);
            com.Parameters.AddWithValue("@kharidha",txtkharid.Text);
            com.Parameters.AddWithValue("@barali",txtalireza.Text);
            com.Parameters.AddWithValue("@barhasan",txthasan.Text);
            com.Parameters.AddWithValue("@barmoj",txtmoj.Text)  ;
            com.Parameters.AddWithValue("@descrip",txttozih.Text);
            try
            {
               con.Open();
               result=Convert.ToInt32(com.ExecuteNonQuery());
               if(result > 0)
               {
               // Success (show your message)
               }
            }
            catch(SqlException ex)
            {
               // Log exception 
               throw ex; 
            }
            finally
            {
              con.Close();
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:29:24.667

`remove space`从值括号

`com.CommandText="INSERT INTO newbuy(byname,datekol,dateshort,karkard,kharidha,b arali,barhasan,barmoj,descrip)VALUES(@byname,@date kol,@dateshort,@karkard,@kharidha,@barali,@barhasa n,@barmoj,@descrip)";`到@date 和 kol 之间

```
com.CommandText="INSERT INTO newbuy(byname,datekol,dateshort,karkard,kharidha,b  arali,barhasan,barmoj,descrip)VALUES(@byname,@datekol,@dateshort,@karkard,@kharidha,@barali,@barhasa  n,@barmoj,@descrip)"; 
```

# objective-c - UIWebView 委托方法

> ID：12950200
> 
> 赞同：0
> 
> 时间：2012-10-18T08:25:40.797
> 
> 标签：objective-c, uiwebview, delegates

在 UIWebView 通过 didLoadWithErrors 捕获错误后，我如何让它重试并通过其委托方法重新运行。

我尝试使用

```
[webView reload] 
```

但是它不会通过委托方法重新运行，所以我不知道重新加载是否成功。

谁能告诉我该怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:37:52.770

reload 方法重新加载当前页面——如果没有页面，因为你还没有成功加载一个，没有什么可以重新加载。

您可以通过使用 -loadRequest: 消息再次发送最后一个请求来“重新加载”页面。如果 UIWebView 再次失败，您应该记录错误的本地化描述（以检查您的应用程序中是否存在例如没有连接或问题）并发送 UIAlertView 以通知用户该错误。

我的建议：为了获得更好的用户界面，如果您认为用户会理解错误详细信息（例如“没有连接到互联网”），但不要发送诸如“未知错误 2525：Wfo3”之类的神秘消息 - 而只是告诉用户发生了错误。

# jquery - Jquery .on('change') 不会触发动态添加的元素

> ID：12950201
> 
> 赞同：9
> 
> 时间：2012-10-18T08:25:45.627
> 
> 标签：jquery, jquery-on

所以我有一个具有以下结构的页面

```
<div class="editCampaignBanner">
    <div>
    <hr>
    <label for="file">Upload a new image</label>
    <input id="file" type="file" name="file" class="valid">
    <label for="NewImageURLs">Link URL (Optional)</label>
    <input id="NewImageURLs" type="text" value="" name="NewImageURLs">
    <hr>
    </div>
</div> 
```

我这样写了一些jquery：

```
$('div.editCampaignBanner input:file').on('change', function () {
        var value = $(this).val();
        var div = $(this).parent();
        var html = '<div>'+ div.html() + '</div>';
        if (value.length > 0) {
            div.after(html);
        }
        else if ($(this) > 1) {
            div.remove();
        }
    }); 
```

所以当我在文件中输入一个元素时，它会在前一个元素下生成一个 div：

```
 <div class="editCampaignBanner">
        <div>
        <hr>
        <label for="file">Upload a new image</label>
        <input id="file" type="file" name="file" class="valid">
        <label for="NewImageURLs">Link URL (Optional)</label>
        <input id="NewImageURLs" type="text" value="" name="NewImageURLs">
        <hr>
        </div>
        <div>
        <hr>
        <label for="file">Upload a new image</label>
        <input id="file" type="file" name="file" class="valid">
        <label for="NewImageURLs">Link URL (Optional)</label>
        <input id="NewImageURLs" type="text" value="" name="NewImageURLs">
        <hr>
        </div>
    </div> 
```

但是现在，尽管事件是使用`.on()`div 中的第二个文件输入注册的，但不会触发该事件。我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T08:26:59.897

代替

```
$('div.editCampaignBanner input:file').on('change', function () { 
```

经过

```
$('div.editCampaignBanner').on('change', 'input:file', function () { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T08:30:31.190

```
$(document).delegate("div.editCampaignBanner input:file", "change", function() {
  //code goes here
});

$(document).on('change', 'div.editCampaignBanner input:file', function () {
 //code goes here
}); 
```

> 根据一组特定的根元素，将处理程序附加到现在或将来与选择器匹配的所有元素的一个或多个事件。从 jQuery 1.7 开始，.delegate() 已被 .on() 方法取代。然而，对于早期版本，它仍然是使用事件委托的最有效方法。有关事件绑定和委托的更多信息在 .on() 方法中。

[***jQuery .bind() 与 .live() 与 .delegate() 与 .on() 的区别***](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:28:12.267

试试这个：

```
$('div.editCampaignBanner').on('change','input:file', function () {
        var value = $(this).val();
        var div = $(this).parent();
        var html = '<div>'+ div.html() + '</div>';
        if (value.length > 0) {
            div.after(html);
        }
        else if ($(this) > 1) {
            div.remove();
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:30:40.750

可能是使用`$.live()`jquery 方法，它已弃用但对我有用：

```
$('div.editCampaignBanner input:file').live('change', function () {
        var value = $(this).val();
        var div = $(this).parent();
        var html = '<div>'+ div.html() + '</div>';
        if (value.length > 0) {
            div.after(html);
        }
        else if ($(this) > 1) {
            div.remove();
        }
    }); 
```

更多信息：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

如果您不愿意使用最新的 ( `.on()`)，请像这样使用它：

```
function fileChanged(ele){
    var value = ele.val();
    var div = ele.parent();
    var html = '<div>'+ div.html() + '</div>';
    if (value.length > 0) {
        div.after(html);
    }
    else if (ele > 1) {
        div.remove();
    }
    $('div.editCampaignBanner').unbind().on('change','input:file', function () {
        fileChanged($(this))
    });
}
$(function(){
    $('div.editCampaignBanner').on('change','input:file', function () {
        fileChanged($(this))
    });
}); 
```

# php - 从数字和密码开始构建短密码

> ID：12950204
> 
> 赞同：2
> 
> 时间：2012-10-18T08:25:50.770
> 
> 标签：php, encryption

我必须从一个递增的数字（1 到 50000）和一个秘密密码开始构建 50,000 个代码。我必须在 php 中完成，最终代码必须是 8 或 12 个字符长，并且只包含大写字母 (AZ) 和数字 (0-9)。

最终代码必须可以使用密码**解密**...

我正在尝试使用 openssl_encrypt 但我找不到使最终代码“缩短”的方法。

```
$longCode = openssl_encrypt($number, $method, ENC_KEY, true, $iv);
$shortCode = ..... 
```

一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:48:56.647

第一步是使用块大小为 8 字节的密码方法，例如“rc2-cbc”。

```
$nr = 1234;
$key = 'secretkey';
$method = 'rc2-cbc';

$iv = openssl_random_pseudo_bytes(openssl_cipher_iv_length($method));

$code = openssl_encrypt($nr, $method, $key, true, $iv); 
```

第二步是将生成的字符串转换为您的字母表；因为您的字母大小只有 36，所以最接近且“简单”的转换是 base32；这给出了（在去除可选填充之后）正好 13 个字符的字符串。

理论上您可以将 4 个字节转换为 6 个 base36 字符：

```
log(36) / log(2) ~ 5.17 bits, saves 1 bit after 6 blocks

6 x 5.17 ~ 31.02, 6 blocks fits inside 32 bits (unsigned long)

32 bits = 4 bytes -> 6 characters 
```

**错误的实施**

下面的代码应该做到这一点 - 但并不（总是）工作！

```
$final = '';
foreach (str_split($code, 4) as $part) {
    $x = current(unpack('L', $part));
    $final .= strtoupper(base_convert($x, 10, 36));
} 
```

解码将是这样的：

```
$code2 = '';
foreach (str_split($final, 6) as $part) {
        $code2 .= pack('L', base_convert(strtolower($part), 36, 10));
} 
```

不知何故，整数精度无法处理它，或者我正在做一些愚蠢的事情；无论哪种方式，它并不总是有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:29:34.357

试试这个：

```
// generate random ID
    function generateRandomID ($len) {
        //To Pull Unique Random Values Out Of AlphaNumeric
        //removed number 0, capital o, number 1 and small L
        //Total: keys = 32, elements = 33
        $characters = array(
        "A","B","C","D","E","F","G","H","J","K","L","M",
        "N","P","Q","R","S","T","U","V","W","X","Y","Z",
        "1","2","3","4","5","6","7","8","9");

        //make an "empty container" or array for our keys
        $keys = array();

        //first count of $keys is empty so "1", remaining count is 1-6 = total 7 times
        while(count($keys) < $len) {
                //"0" because we use this to FIND ARRAY KEYS which has a 0 value
                //"-1" because were only concerned of number of keys which is 32 not 33
                //count($characters) = 33
                $x = mt_rand(0, count($characters)-1);
                if(!in_array($x, $keys)) {
                     $keys[] = $x;
                }
        }

        foreach($keys as $key){
             $random_chars .= $characters[$key];
        }
        return $random_chars;
    } 
```

编辑：删除了一些字母和数字，以便更好地阅读，请参阅代码中的注释。

# oracle - 没有“回收站”的 BIN$ 表

> ID：12950212
> 
> 赞同：0
> 
> 时间：2012-10-18T08:26:13.830
> 
> 标签：oracle

My Oracle Database (10.2) 包含表格“BIN$”中的表。它们被列出

```
从 user_recyclebin 中选择 *
```

但不是通过

```
显示回收站
```

命令“show parameters”表示“recyclebin=on”（这也是Oracle中的默认值）。

此外：Oracle 仅当它是集群成员时才会将表放入回收站，不是吗？（我理解Oracle管理员指南......）。我确实删除了相应的表，但我从未在这个数据库中使用过任何集群......

对 PURGE TABLE 的调用有效：user_recyclebin 的条目消失了。但为什么我有它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:31:41.707

好吧，我先没看懂SQL语句参考：

> 如果删除属于集群的表，则该表将移至回收站。但是，如果您随后删除集群，则该表将从回收站中清除，并且无法再使用 FLASHBACK TABLE 操作进行恢复。

所有的表都放在 bin 中，普通的和集群的。不同之处在于，如果集群被删除，集群的回收表就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:34:13.947

删除的表会进入回收站，集群成员*除外*！

请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14231/tables.htm#ADMIN01511](http://docs.oracle.com/cd/B19306_01/server.102/b14231/tables.htm#ADMIN01511)

你是怎么放下桌子的？

命令

```
drop table x; 
```

将导致表被移动到回收站，而

```
drop table x purge; 
```

将导致表立即被删除。

# android - 在模拟器上运行应用程序时强制关闭

> ID：12950214
> 
> 赞同：0
> 
> 时间：2012-10-18T08:26:19.493
> 
> 标签：android, android-emulator

有时收到强制关闭消息，或者有时不显示任何消息，我的应用程序将关闭，只显示白色计划屏幕，但早些时候我得到了我所做的每一件事，但现在出现强制关闭问题，代码没问题显示任何错误，请建议我需要采取什么步骤，并查看 logcat 报告的内容：-

```
 10-18 13:41:34.202: I/dalvikvm(709):   
      at   android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
      10-18 13:41:34.202: I/dalvikvm(709):   
      at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
      10-18 13:41:34.202: I/dalvikvm(709):   
      at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
      10-18 13:41:34.202: I/dalvikvm(709):   
      at android.content.res.Resources.loadDrawable(Resources.java:1930)
      10-18 13:41:34.202: I/dalvikvm(709):   
      at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
      10-18 13:41:34.202: I/dalvikvm(709):   at android.widget.ImageView.
      <init>(ImageView.java:120)
      10-18 13:41:34.202: I/dalvikvm(709):   at android.widget.ImageView.
      <init>(ImageView.java:110)
      10-18 13:41:34.212: I/dalvikvm(709):   
      at   java.lang.reflect.Constructor.constructNative(Native Method)
      10-18 13:41:34.212: I/dalvikvm(709): 
      at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
      10-18 13:41:34.212: I/dalvikvm(709): 
      at android.view.LayoutInflater.createView(LayoutInflater.java:587)
      10-18 13:41:34.212: I/dalvikvm(709):   
      at    com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView
      (PhoneLayoutInflater.java:56)
      10-18 13:41:34.212: I/dalvikvm(709):   
      at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
      10-18 13:41:34.212: I/dalvikvm(709):   
      at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
      10-18 13:41:34.212: I/dalvikvm(709):   
      at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
      10-18 13:41:34.212: I/dalvikvm(709):   
      at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
      10-18 13:41:34.212: I/dalvikvm(709):  
      at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
      10-18 13:41:34.212: I/dalvikvm(709):   
      at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    10-18 13:41:34.226: I/dalvikvm(709):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    10-18 13:41:34.226: I/dalvikvm(709):   at com.ssmobileproductions.catalogue.ListViewCustomAdapter.getView(ListViewCustomAdapter.java:60)
    10-18 13:41:34.226: I/dalvikvm(709):   at android.widget.AbsListView.obtainView(AbsListView.java:2267)
    10-18 13:41:34.226: I/dalvikvm(709):   at android.widget.ListView.makeAndAddView(ListView.java:1769)
    10-18 13:41:34.226: I/dalvikvm(709):   at android.widget.ListView.fillDown(ListView.java:672)
    10-18 13:41:34.226: I/dalvikvm(709):   at 

android.widget.ListView.fillFromTop(ListView.java:733)
10-18 13:41:34.226: I/dalvikvm(709):   at android.widget.ListView.layoutChildren(ListView.java:1622)
10-18 13:41:34.233: I/dalvikvm(709):   at android.widget.AbsListView.onLayout(AbsListView.java:2102)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.View.layout(View.java:13754)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:41:34.233: I/dalvikvm(709):   at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.View.layout(View.java:13754)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:41:34.233: I/dalvikvm(709):   at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.View.layout(View.java:13754)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:41:34.233: I/dalvikvm(709):   at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
10-18 13:41:34.233: I/dalvikvm(709):   at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
10-18 13:41:34.233: I/dalvikvm(709):   at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.View.layout(View.java:13754)
10-18 13:41:34.233: I/dalvikvm(709):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:41:34.233: I/dalvikvm(709):   at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.View.layout(View.java:13754)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1866)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1687)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.Choreographer.doCallbacks(Choreographer.java:555)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.Choreographer.doFrame(Choreographer.java:525)
10-18 13:41:34.242: I/dalvikvm(709):   at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
10-18 13:41:34.242: I/dalvikvm(709):   at android.os.Handler.handleCallback(Handler.java:615)
10-18 13:41:34.242: I/dalvikvm(709):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-18 13:41:34.242: I/dalvikvm(709):   at android.os.Looper.loop(Looper.java:137)
10-18 13:41:34.242: I/dalvikvm(709):   at android.app.ActivityThread.main(ActivityThread.java:4745)
10-18 13:41:34.242: I/dalvikvm(709):   at java.lang.reflect.Method.invokeNative(Native Method)
10-18 13:41:34.242: I/dalvikvm(709):   at java.lang.reflect.Method.invoke(Method.java:511)
10-18 13:41:34.242: I/dalvikvm(709):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-18 13:41:34.242: I/dalvikvm(709):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-18 13:41:34.242: I/dalvikvm(709):   at dalvik.system.NativeStart.main(Native Method)
10-18 13:41:34.242: A/libc(709): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 709 (tions.catalogue)
10-18 13:42:21.142: E/Trace(745): error opening trace file: No such file or directory (2)
10-18 13:42:21.751: D/dalvikvm(745): GC_FOR_ALLOC freed 65K, 2% free 8102K/8259K, paused 37ms, total 41ms
10-18 13:42:21.832: I/dalvikvm-heap(745): Grow heap (frag case) to 16.458MB for 8910016-byte allocation
10-18 13:42:21.921: D/dalvikvm(745): GC_CONCURRENT freed 2K, 1% free 16801K/16967K, paused 30ms+5ms, total 87ms
10-18 13:42:22.751: D/dalvikvm(745): GC_FOR_ALLOC freed 0K, 1% free 16801K/16967K, paused 25ms, total 25ms
10-18 13:42:22.912: I/dalvikvm-heap(745): Grow heap (frag case) to 35.579MB for 20052016-byte allocation
10-18 13:42:23.042: D/dalvikvm(745): GC_CONCURRENT freed 0K, 1% free 36383K/36551K, paused 34ms+28ms, total 123ms
10-18 13:42:23.742: D/dalvikvm(745): GC_FOR_ALLOC freed 29039K, 77% free 9083K/38407K, paused 55ms, total 56ms
10-18 13:42:23.742: I/dalvikvm-heap(745): Grow heap (frag case) to 11.064MB for 2250016-byte allocation
10-18 13:42:23.881: D/dalvikvm(745): GC_CONCURRENT freed <1K, 71% free 11280K/38407K, paused 29ms+18ms, total 136ms
10-18 13:42:23.881: D/dalvikvm(745): WAIT_FOR_CONCURRENT_GC blocked 9ms
10-18 13:42:23.982: D/dalvikvm(745): GC_FOR_ALLOC freed 3174K, 79% free 8106K/38407K, paused 87ms, total 87ms
10-18 13:42:23.992: I/dalvikvm-heap(745): Grow heap (frag case) to 16.461MB for 8910016-byte allocation
10-18 13:42:24.082: D/dalvikvm(745): GC_CONCURRENT freed <1K, 57% free 16807K/38407K, paused 30ms+18ms, total 90ms
10-18 13:42:24.712: D/dalvikvm(745): GC_FOR_ALLOC freed 0K, 57% free 16807K/38407K, paused 44ms, total 44ms
10-18 13:42:24.773: I/dalvikvm-heap(745): Grow heap (frag case) to 35.584MB for 20052016-byte allocation
10-18 13:42:24.881: D/dalvikvm(745): GC_CONCURRENT freed 0K, 6% free 36389K/38407K, paused 39ms+9ms, total 113ms
10-18 13:42:25.471: D/dalvikvm(745): GC_FOR_ALLOC freed 28284K, 78% free 8706K/38407K, paused 62ms, total 63ms
10-18 13:42:25.471: I/dalvikvm-heap(745): Grow heap (frag case) to 9.869MB for 1382416-byte allocation
10-18 13:42:25.591: D/dalvikvm(745): GC_CONCURRENT freed <1K, 74% free 10056K/38407K, paused 23ms+18ms, total 119ms
10-18 13:42:25.591: D/dalvikvm(745): WAIT_FOR_CONCURRENT_GC blocked 12ms
10-18 13:42:25.801: D/dalvikvm(745): GC_FOR_ALLOC freed 1950K, 79% free 8339K/38407K, paused 70ms, total 71ms
10-18 13:42:25.801: I/dalvikvm-heap(745): Grow heap (frag case) to 8.702MB for 534616-byte allocation
10-18 13:42:25.872: D/dalvikvm(745): GC_CONCURRENT freed <1K, 77% free 8860K/38407K, paused 26ms+8ms, total 66ms
10-18 13:42:25.872: D/dalvikvm(745): WAIT_FOR_CONCURRENT_GC blocked 22ms
10-18 13:42:25.922: D/dalvikvm(745): GC_FOR_ALLOC freed 232K, 78% free 8633K/38407K, paused 28ms, total 29ms
10-18 13:42:25.931: I/dalvikvm-heap(745): Grow heap (frag case) to 16.976MB for 8910016-byte allocation
10-18 13:42:26.072: D/dalvikvm(745): GC_CONCURRENT freed <1K, 55% free 17334K/38407K, paused 78ms+8ms, total 134ms
10-18 13:42:27.002: D/dalvikvm(745): GC_FOR_ALLOC freed 0K, 55% free 17334K/38407K, paused 25ms, total 25ms
10-18 13:42:27.032: I/dalvikvm-heap(745): Grow heap (frag case) to 36.099MB for 20052016-byte allocation
10-18 13:42:27.192: D/dalvikvm(745): GC_CONCURRENT freed 0K, 4% free 36916K/38407K, paused 73ms+20ms, total 156ms
10-18 13:42:27.822: D/dalvikvm(745): GC_FOR_ALLOC freed 28283K, 75% free 9612K/38407K, paused 52ms, total 53ms
10-18 13:42:27.822: I/dalvikvm-heap(745): Grow heap (frag case) to 11.581MB for 2250016-byte allocation
10-18 13:42:28.011: D/dalvikvm(745): GC_CONCURRENT freed <1K, 70% free 11809K/38407K, paused 75ms+19ms, total 189ms
10-18 13:42:28.011: D/dalvikvm(745): WAIT_FOR_CONCURRENT_GC blocked 3ms
10-18 13:42:28.092: D/dalvikvm(745): GC_FOR_ALLOC freed 977K, 72% free 10839K/38407K, paused 50ms, total 51ms
10-18 13:42:28.112: I/dalvikvm-heap(745): Grow heap (frag case) to 19.130MB for 8910016-byte allocation
10-18 13:42:28.253: D/dalvikvm(745): GC_CONCURRENT freed <1K, 50% free 19540K/38407K, paused 74ms+20ms, total 140ms
10-18 13:42:29.172: D/dalvikvm(745): GC_FOR_ALLOC freed 0K, 50% free 19540K/38407K, paused 27ms, total 27ms
10-18 13:42:29.172: I/dalvikvm-heap(745): Forcing collection of SoftReferences for 20052016-byte allocation
10-18 13:42:29.232: D/dalvikvm(745): GC_BEFORE_OOM freed 9K, 50% free 19531K/38407K, paused 55ms, total 56ms
10-18 13:42:29.232: E/dalvikvm-heap(745): Out of memory on a 20052016-byte allocation.
10-18 13:42:29.232: I/dalvikvm(745): "main" prio=5 tid=1 RUNNABLE
10-18 13:42:29.232: I/dalvikvm(745):   | group="main" sCount=0 dsCount=0 obj=0x40a14568 self=0x2a00b9e0
10-18 13:42:29.232: I/dalvikvm(745):   | sysTid=745 nice=0 sched=0/0 cgrp=apps handle=1073870640
10-18 13:42:29.242: I/dalvikvm(745):   | schedstat=( 6322252531 1424837307 387 ) utm=585 stm=47 core=0
10-18 13:42:29.242: I/dalvikvm(745):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
10-18 13:42:29.242: I/dalvikvm(745):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
10-18 13:42:29.242: I/dalvikvm(745):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
10-18 13:42:29.242: I/dalvikvm(745):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
10-18 13:42:29.242: I/dalvikvm(745):   at android.content.res.Resources.loadDrawable(Resources.java:1930)
10-18 13:42:29.242: I/dalvikvm(745):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
10-18 13:42:29.242: I/dalvikvm(745):   at android.widget.ImageView.<init>(ImageView.java:120)
10-18 13:42:29.242: I/dalvikvm(745):   at android.widget.ImageView.<init>(ImageView.java:110)
10-18 13:42:29.242: I/dalvikvm(745):   at java.lang.reflect.Constructor.constructNative(Native Method)
10-18 13:42:29.242: I/dalvikvm(745):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-18 13:42:29.242: I/dalvikvm(745):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
10-18 13:42:29.242: I/dalvikvm(745):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-18 13:42:29.242: I/dalvikvm(745):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
10-18 13:42:29.242: I/dalvikvm(745):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
10-18 13:42:29.242: I/dalvikvm(745):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
10-18 13:42:29.242: I/dalvikvm(745):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
10-18 13:42:29.242: I/dalvikvm(745):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
10-18 13:42:29.253: I/dalvikvm(745):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-18 13:42:29.253: I/dalvikvm(745):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-18 13:42:29.253: I/dalvikvm(745):   at com.ssmobileproductions.catalogue.ListViewCustomAdapter.getView(ListViewCustomAdapter.java:60)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.AbsListView.obtainView(AbsListView.java:2267)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.ListView.makeAndAddView(ListView.java:1769)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.ListView.fillDown(ListView.java:672)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.ListView.fillFromTop(ListView.java:733)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.ListView.layoutChildren(ListView.java:1622)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.AbsListView.onLayout(AbsListView.java:2102)
10-18 13:42:29.253: I/dalvikvm(745):   at android.view.View.layout(View.java:13754)
10-18 13:42:29.253: I/dalvikvm(745):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
10-18 13:42:29.253: I/dalvikvm(745):   at android.view.View.layout(View.java:13754)
10-18 13:42:29.253: I/dalvikvm(745):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:29.253: I/dalvikvm(745):   at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 13:42:29.262: I/dalvikvm(745):   at android.view.View.layout(View.java:13754)
10-18 13:42:29.262: I/dalvikvm(745):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:29.262: I/dalvikvm(745):   at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
10-18 13:42:29.262: I/dalvikvm(745):   at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
10-18 13:42:29.262: I/dalvikvm(745):   at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
10-18 13:42:29.262: I/dalvikvm(745):   at android.view.View.layout(View.java:13754)
10-18 13:42:29.262: I/dalvikvm(745):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:29.262: I/dalvikvm(745):   at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.View.layout(View.java:13754)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1866)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1687)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.Choreographer.doCallbacks(Choreographer.java:555)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.Choreographer.doFrame(Choreographer.java:525)
10-18 13:42:29.271: I/dalvikvm(745):   at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
10-18 13:42:29.271: I/dalvikvm(745):   at android.os.Handler.handleCallback(Handler.java:615)
10-18 13:42:29.271: I/dalvikvm(745):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-18 13:42:29.271: I/dalvikvm(745):   at android.os.Looper.loop(Looper.java:137)
10-18 13:42:29.271: I/dalvikvm(745):   at android.app.ActivityThread.main(ActivityThread.java:4745)
10-18 13:42:29.271: I/dalvikvm(745):   at java.lang.reflect.Method.invokeNative(Native Method)
10-18 13:42:29.271: I/dalvikvm(745):   at java.lang.reflect.Method.invoke(Method.java:511)
10-18 13:42:29.271: I/dalvikvm(745):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-18 13:42:29.271: I/dalvikvm(745):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-18 13:42:29.271: I/dalvikvm(745):   at dalvik.system.NativeStart.main(Native Method)
10-18 13:42:29.282: A/libc(745): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 745 (tions.catalogue)
10-18 13:42:35.582: E/Trace(758): error opening trace file: No such file or directory (2)
10-18 13:42:36.222: D/dalvikvm(758): GC_FOR_ALLOC freed 68K, 2% free 8102K/8259K, paused 55ms, total 59ms
10-18 13:42:36.292: I/dalvikvm-heap(758): Grow heap (frag case) to 16.458MB for 8910016-byte allocation
10-18 13:42:36.432: D/dalvikvm(758): GC_CONCURRENT freed 2K, 1% free 16801K/16967K, paused 81ms+6ms, total 139ms
10-18 13:42:37.172: D/dalvikvm(758): GC_FOR_ALLOC freed 0K, 1% free 16801K/16967K, paused 25ms, total 25ms
10-18 13:42:37.321: I/dalvikvm-heap(758): Grow heap (frag case) to 35.579MB for 20052016-byte allocation
10-18 13:42:37.482: D/dalvikvm(758): GC_CONCURRENT freed 0K, 1% free 36383K/36551K, paused 74ms+24ms, total 157ms
10-18 13:42:38.161: D/dalvikvm(758): GC_FOR_ALLOC freed 29039K, 77% free 9083K/38407K, paused 55ms, total 56ms
10-18 13:42:38.161: I/dalvikvm-heap(758): Grow heap (frag case) to 11.064MB for 2250016-byte allocation
10-18 13:42:38.362: D/dalvikvm(758): GC_CONCURRENT freed <1K, 71% free 11280K/38407K, paused 75ms+19ms, total 191ms
10-18 13:42:38.562: D/dalvikvm(758): GC_FOR_ALLOC freed 3174K, 79% free 8106K/38407K, paused 188ms, total 189ms
10-18 13:42:38.572: I/dalvikvm-heap(758): Grow heap (frag case) to 16.461MB for 8910016-byte allocation
10-18 13:42:38.712: D/dalvikvm(758): GC_CONCURRENT freed <1K, 57% free 16807K/38407K, paused 73ms+19ms, total 137ms
10-18 13:42:39.262: D/dalvikvm(758): GC_FOR_ALLOC freed 0K, 57% free 16807K/38407K, paused 24ms, total 24ms
10-18 13:42:39.292: I/dalvikvm-heap(758): Grow heap (frag case) to 35.584MB for 20052016-byte allocation
10-18 13:42:39.451: D/dalvikvm(758): GC_CONCURRENT freed 0K, 6% free 36389K/38407K, paused 73ms+18ms, total 155ms
10-18 13:42:40.002: D/dalvikvm(758): GC_FOR_ALLOC freed 28284K, 78% free 8706K/38407K, paused 54ms, total 55ms
10-18 13:42:40.012: I/dalvikvm-heap(758): Grow heap (frag case) to 9.869MB for 1382416-byte allocation
10-18 13:42:40.182: D/dalvikvm(758): GC_CONCURRENT freed <1K, 74% free 10056K/38407K, paused 74ms+17ms, total 168ms
10-18 13:42:40.182: D/dalvikvm(758): WAIT_FOR_CONCURRENT_GC blocked 15ms
10-18 13:42:40.372: D/dalvikvm(758): GC_FOR_ALLOC freed 1950K, 79% free 8339K/38407K, paused 47ms, total 48ms
10-18 13:42:40.372: I/dalvikvm-heap(758): Grow heap (frag case) to 8.702MB for 534616-byte allocation
10-18 13:42:40.491: D/dalvikvm(758): GC_CONCURRENT freed <1K, 77% free 8860K/38407K, paused 75ms+9ms, total 125ms
10-18 13:42:40.491: D/dalvikvm(758): WAIT_FOR_CONCURRENT_GC blocked 11ms
10-18 13:42:40.552: D/dalvikvm(758): GC_FOR_ALLOC freed 232K, 78% free 8633K/38407K, paused 29ms, total 30ms
10-18 13:42:40.572: I/dalvikvm-heap(758): Grow heap (frag case) to 16.976MB for 8910016-byte allocation
10-18 13:42:40.712: D/dalvikvm(758): GC_CONCURRENT freed <1K, 55% free 17334K/38407K, paused 73ms+20ms, total 137ms
10-18 13:42:41.632: D/dalvikvm(758): GC_FOR_ALLOC freed 0K, 55% free 17334K/38407K, paused 25ms, total 25ms
10-18 13:42:41.663: I/dalvikvm-heap(758): Grow heap (frag case) to 36.099MB for 20052016-byte allocation
10-18 13:42:41.812: D/dalvikvm(758): GC_CONCURRENT freed 0K, 4% free 36916K/38407K, paused 74ms+18ms, total 151ms
10-18 13:42:42.452: D/dalvikvm(758): GC_FOR_ALLOC freed 28283K, 75% free 9612K/38407K, paused 53ms, total 54ms
10-18 13:42:42.452: I/dalvikvm-heap(758): Grow heap (frag case) to 11.581MB for 2250016-byte allocation
10-18 13:42:42.652: D/dalvikvm(758): GC_CONCURRENT freed <1K, 70% free 11809K/38407K, paused 74ms+18ms, total 189ms
10-18 13:42:42.732: D/dalvikvm(758): GC_FOR_ALLOC freed 977K, 72% free 10839K/38407K, paused 49ms, total 50ms
10-18 13:42:42.742: I/dalvikvm-heap(758): Grow heap (frag case) to 19.130MB for 8910016-byte allocation
10-18 13:42:42.882: D/dalvikvm(758): GC_CONCURRENT freed <1K, 50% free 19540K/38407K, paused 73ms+9ms, total 139ms
10-18 13:42:43.802: D/dalvikvm(758): GC_FOR_ALLOC freed 0K, 50% free 19540K/38407K, paused 27ms, total 27ms
10-18 13:42:43.802: I/dalvikvm-heap(758): Forcing collection of SoftReferences for 20052016-byte allocation
10-18 13:42:43.862: D/dalvikvm(758): GC_BEFORE_OOM freed 9K, 50% free 19531K/38407K, paused 53ms, total 54ms
10-18 13:42:43.862: E/dalvikvm-heap(758): Out of memory on a 20052016-byte allocation.
10-18 13:42:43.862: I/dalvikvm(758): "main" prio=5 tid=1 RUNNABLE
10-18 13:42:43.862: I/dalvikvm(758):   | group="main" sCount=0 dsCount=0 obj=0x40a14568 self=0x2a00b9e0
10-18 13:42:43.862: I/dalvikvm(758):   | sysTid=758 nice=0 sched=0/0 cgrp=apps handle=1073870640
10-18 13:42:43.872: I/dalvikvm(758):   | schedstat=( 6298623943 1113168855 340 ) utm=594 stm=35 core=0
10-18 13:42:43.872: I/dalvikvm(758):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
10-18 13:42:43.872: I/dalvikvm(758):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
10-18 13:42:43.872: I/dalvikvm(758):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
10-18 13:42:43.872: I/dalvikvm(758):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
10-18 13:42:43.872: I/dalvikvm(758):   at android.content.res.Resources.loadDrawable(Resources.java:1930)
10-18 13:42:43.872: I/dalvikvm(758):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
10-18 13:42:43.872: I/dalvikvm(758):   at android.widget.ImageView.<init>(ImageView.java:120)
10-18 13:42:43.872: I/dalvikvm(758):   at android.widget.ImageView.<init>(ImageView.java:110)
10-18 13:42:43.872: I/dalvikvm(758):   at java.lang.reflect.Constructor.constructNative(Native Method)
10-18 13:42:43.872: I/dalvikvm(758):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-18 13:42:43.872: I/dalvikvm(758):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
10-18 13:42:43.872: I/dalvikvm(758):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-18 13:42:43.872: I/dalvikvm(758):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
10-18 13:42:43.872: I/dalvikvm(758):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
10-18 13:42:43.872: I/dalvikvm(758):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
10-18 13:42:43.872: I/dalvikvm(758):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
10-18 13:42:43.872: I/dalvikvm(758):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
10-18 13:42:43.872: I/dalvikvm(758):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-18 13:42:43.882: I/dalvikvm(758):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-18 13:42:43.882: I/dalvikvm(758):   at com.ssmobileproductions.catalogue.ListViewCustomAdapter.getView(ListViewCustomAdapter.java:60)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.AbsListView.obtainView(AbsListView.java:2267)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.ListView.makeAndAddView(ListView.java:1769)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.ListView.fillDown(ListView.java:672)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.ListView.fillFromTop(ListView.java:733)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.ListView.layoutChildren(ListView.java:1622)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.AbsListView.onLayout(AbsListView.java:2102)
10-18 13:42:43.882: I/dalvikvm(758):   at android.view.View.layout(View.java:13754)
10-18 13:42:43.882: I/dalvikvm(758):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
10-18 13:42:43.882: I/dalvikvm(758):   at android.view.View.layout(View.java:13754)
10-18 13:42:43.882: I/dalvikvm(758):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:43.882: I/dalvikvm(758):   at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 13:42:43.882: I/dalvikvm(758):   at android.view.View.layout(View.java:13754)
10-18 13:42:43.882: I/dalvikvm(758):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:43.892: I/dalvikvm(758):   at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
10-18 13:42:43.892: I/dalvikvm(758):   at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
10-18 13:42:43.892: I/dalvikvm(758):   at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.View.layout(View.java:13754)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:43.892: I/dalvikvm(758):   at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.View.layout(View.java:13754)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.ViewGroup.layout(ViewGroup.java:4362)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1866)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1687)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
10-18 13:42:43.892: I/dalvikvm(758):   at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
10-18 13:42:43.902: I/dalvikvm(758):   at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
10-18 13:42:43.902: I/dalvikvm(758):   at android.view.Choreographer.doCallbacks(Choreographer.java:555)
10-18 13:42:43.902: I/dalvikvm(758):   at android.view.Choreographer.doFrame(Choreographer.java:525)
10-18 13:42:43.902: I/dalvikvm(758):   at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
10-18 13:42:43.902: I/dalvikvm(758):   at android.os.Handler.handleCallback(Handler.java:615)
10-18 13:42:43.902: I/dalvikvm(758):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-18 13:42:43.902: I/dalvikvm(758):   at android.os.Looper.loop(Looper.java:137)
10-18 13:42:43.902: I/dalvikvm(758):   at android.app.ActivityThread.main(ActivityThread.java:4745)
10-18 13:42:43.902: I/dalvikvm(758):   at java.lang.reflect.Method.invokeNative(Native Method)
10-18 13:42:43.902: I/dalvikvm(758):   at java.lang.reflect.Method.invoke(Method.java:511)
10-18 13:42:43.902: I/dalvikvm(758):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-18 13:42:43.902: I/dalvikvm(758):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-18 13:42:43.912: I/dalvikvm(758):   at dalvik.system.NativeStart.main(Native Method)
10-18 13:42:43.912: A/libc(758): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 758 (tions.catalogue) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:55:15.647

继评论之后：似乎您需要减小图像的大小/质量或以其他方式实现某种分页机制，以便并非所有图像一次都在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:23:50.910

如果您使用列表视图显示图像，请尝试使用延迟列表，这将减小图像大小，并且在您滚动时也会加载图像。

# android - onKeyDown 和 onKeyLongPress

> ID：12950215
> 
> 赞同：11
> 
> 时间：2012-10-18T08:26:21.223
> 
> 标签：android, keylistener

我希望我的应用程序对音量按钮的正常和长按按键事件做出不同的反应。

我已经看到[了这个](https://stackoverflow.com/questions/7493531/trying-to-catch-the-volume-onkeylongpress-not-working)，但是如果我按住音量按钮，我会`KeyDown`在收到事件之前收到很多`KeyLongPressed`事件。

我想要一个事件或另一个事件，而不是两者，这样我可以在短按时调整音量并在长按时跳过曲目。

你能帮帮我吗？

这是我的代码：

```
 @Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) 
    {
        Log.d("Test", "Long press!");
        return true;
    }
    return super.onKeyLongPress(keyCode, event);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        event.startTracking();
        Log.d("Test", "Short");
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

任何帮助表示赞赏！- 鸢尾花

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T09:05:07.277

这是我写的代码。它就像一个魅力。也许你可以优化它以获得更好的逻辑。但你会明白的。关键是使用标志。**短按是我们短按音量按钮并释放的按**。所以**onKeyUp**可以帮助我们检测短按。

```
package com.example.demo;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;

public class TestVolumeActivity extends Activity {
    boolean flag = false;

    boolean flag2 = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash_screen);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_splash_screen, menu);
        return true;
    }

    @Override
    public boolean onKeyLongPress(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
            Log.d("Test", "Long press!");
            flag = false;
            flag2 = true;
            return true;
        }
        return super.onKeyLongPress(keyCode, event);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
            event.startTracking();
            if (flag2 == true) {
                flag = false;
            } else {
                flag = true;
                flag2 = false;
            }

            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {

            event.startTracking();
            if (flag) {
                Log.d("Test", "Short");
            }
            flag = true;
            flag2 = false;
            return true;
        }

        return super.onKeyUp(keyCode, event);
    }
} 
```

**所有长按的Logcat（未检测到短按）：**

```
10-18 02:06:15.369: D/Test(16834): Long press!
10-18 02:06:18.683: D/Test(16834): Long press!
10-18 02:06:21.566: D/Test(16834): Long press!
10-18 02:06:23.738: D/Test(16834): Long press! 
```

**适用于所有短按的 Logcat：**

```
10-18 02:07:42.422: D/Test(16834): Short
10-18 02:07:43.203: D/Test(16834): Short
10-18 02:07:43.663: D/Test(16834): Short
10-18 02:07:44.144: D/Test(16834): Short 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-14T07:30:44.460

根据 SDK 处理长按按钮的正确方法。

```
import android.app.Activity;
import android.util.Log;
import android.view.KeyEvent;

public class TestVolumeActivity extends Activity
{
    private static final String TAG = TestVolumeActivity.class.getSimpleName();

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if( keyCode == KeyEvent.KEYCODE_VOLUME_UP || 
            keyCode == KeyEvent.KEYCODE_VOLUME_DOWN)
        {
            event.startTracking();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onKeyLongPress(int keyCode, KeyEvent event)
    {
        if(keyCode == KeyEvent.KEYCODE_VOLUME_UP){
            Log.d(TAG, "Long press KEYCODE_VOLUME_UP");
            return true;
        }
        else if(keyCode == KeyEvent.KEYCODE_VOLUME_DOWN){
            Log.d(TAG, "Long press KEYCODE_VOLUME_DOWN");
            return true;
        }
        return super.onKeyLongPress(keyCode, event);
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event)
    {
        if((event.getFlags() & KeyEvent.FLAG_CANCELED_LONG_PRESS) == 0){
            if(keyCode == KeyEvent.KEYCODE_VOLUME_UP){
                Log.e(TAG, "Short press KEYCODE_VOLUME_UP");
                return true;
            }
            else if(keyCode == KeyEvent.KEYCODE_VOLUME_DOWN){
                Log.e(TAG, "Short press KEYCODE_VOLUME_DOWN");
                return true;
            }
        }
        return super.onKeyUp(keyCode, event);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T09:20:33.770

当我正要发布我的答案时，我发现有人已经有了某种解决方案....

但这是我的，简单，就像一个魅力。只有一个标志;）

此代码检测短按和长按，当长按发生时不会触发短按！

**注意：**如果您想要正常的音量上下行为，请将 onKeyPress 方法中的 return true 更改为 super 调用，如下所示：

```
event.startTracking();
if(event.getRepeatCount() == 0){
    shortPress = true;
}
//return true;
return super.onKeyDown(keyCode, event); 
```

没有超级调用的代码：

```
private boolean shortPress = false;

@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        shortPress = false;
        Toast.makeText(this, "longPress", Toast.LENGTH_LONG).show();
        return true;
    }
    //Just return false because the super call does always the same (returning false)
    return false;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        if(event.getAction() == KeyEvent.ACTION_DOWN){
            event.startTracking();
            if(event.getRepeatCount() == 0){
                shortPress = true;
            }
            return true;
        }
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        if(shortPress){
            Toast.makeText(this, "shortPress", Toast.LENGTH_LONG).show();
        } else {
            //Don't handle longpress here, because the user will have to get his finger back up first
        }
        shortPress = false;
        return true;
    }
    return super.onKeyUp(keyCode, event);
} 
```

**此处的代码是添加了音量增大键，只需选择您的一边；)**

```
private boolean shortPress = false;

@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        shortPress = false;
        Toast.makeText(this, "longPress Volume Down", Toast.LENGTH_LONG).show();
        return true;
    } else if(keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        shortPress = false;
        Toast.makeText(this, "longPress Volume Up", Toast.LENGTH_LONG).show();
        return true;
    }
    //Just return false because the super call does always the same (returning false)
    return false;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN || keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
        if(event.getAction() == KeyEvent.ACTION_DOWN){
            event.startTracking();
            if(event.getRepeatCount() == 0){
                shortPress = true;
            }
            return true;
        }
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        if(shortPress){
            Toast.makeText(this, "shortPress Volume Down", Toast.LENGTH_LONG).show();
        } else {
            //Don't handle longpress here, because the user will have to get his finger back up first
        }
        shortPress = false;
        return true;
    } else if(keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        if(shortPress){
            Toast.makeText(this, "shortPress Volume up", Toast.LENGTH_LONG).show();
        } else {
            //Don't handle longpress here, because the user will have to get his finger back up first
        }
        shortPress = false;
        return true;

    }
    return super.onKeyUp(keyCode, event);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:47:48.817

我不知道这个答案是否会为您的问题提供可接受的解决方案，因为它依赖于不断获取**频繁** `KeyDown`的事件。

您可以尝试记住引发最后一个事件的系统时间`KeyDown`（我将命名它`tLast`），并忽略所有`KeyDown`事件，直到您收到一个`KeyLongPressed`事件。

为了获得“正确的”`KeyDown`事件（您在上一步中忽略的事件），您可以有一个线程检查当前系统时间和`tLast`（我将命名它`tDelta`）之间的时间差是否足够大，以免被认为是一个连续的新闻。

鉴于`KeyDown`在短时间内抛出了很多事件，您理论上可以确定当事件间隔足够时（`tDelta`大于固定值）时没有连续按下音量按钮。

该解决方案的缺点是，如果用户真的快速按下音量按钮（`tDelta`两次按下之间低于用于评估连续按下的固定值），则多次按键将被忽略/视为连续按键.

另一个（次要）缺点是在解释常规按键之前会有延迟，因为`tDelta`它必须大于在评估您是否正在处理常规或连续按键时使用的固定值。

问候，

卢西安

编辑：嗯......第二个想法：你不是在使用`KeyListener`Android实现吗？

如果您正在使用它，请查看`onKeyUp`为此定义的方法。

我认为如果你只是扩展这个类（或它的派生类之一）并使用该`onKeyUp`方法来确定你是否正在处理连续按下（即按下按钮的时间大于一个固定值）。

如果您可以使用此方法，请执行此操作。它也比上面介绍的解决方法更有效、更容易维护和更直接。

[KeyListener Javadoc](http://developer.android.com/reference/android/text/method/KeyListener.html)

# c++ - 为什么在下面的程序中没有调用复制构造函数？

> ID：12950219
> 
> 赞同：1
> 
> 时间：2012-10-18T08:26:46.330
> 
> 标签：c++

> **可能重复：**
> [为什么在这种情况下不调用复制构造函数？](https://stackoverflow.com/questions/1758142/why-copy-constructor-is-not-called-in-this-case)

考虑以下代码片段：

```
#include <iostream>

using namespace std;

class Test
{
        char name[16];
        public:
        Test ()
        {
                cout <<"Inside Constructor"<<endl;
        }

        Test (const Test & t)
        {
                cout <<"Inside Copy Constructor "<<endl;
        }

};

Test f()
{
        return Test();
}

int main ( int argc, char ** argv)
{
        Test t;
        Test t1 = f();

} 
```

Test t1= f() -> 它调用 f()，并返回 Test 对象，然后根据我的理解应该调用复制构造函数。但我得到以下输出：

```
Inside Constructor
Inside Constructor 
```

我的理解有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:44:37.753

*这里发生了两个*复制省略。

第一种是返回值优化（不是将表达式的结果复制`Test()`到作为 的返回值的临时对象中，而是通过直接构造到作为 的返回值的临时对象中来评估`f`表达式）。`Test()``f`

第二个是从初始化表达式的复制`t1`到`t1`自身的省略（因此不是复制作为的返回值`f`的`t1`临时，而是`f`直接构造作为的返回值的临时`t1`）。

这两个省略链在一起——所以`t1`构造返回值时将内存用作目标，构造时将返回值`f`的内存`f`用作目标`Test()`。所以实际上`t1`是由无参数构造函数直接初始化的，不需要副本。

复制构造函数省略在 C++03 的 12.8/15 和 C++11 的 12.8/31 的标准中定义（也允许移动省略）。它需要特定的权限，因为它会更改程序的可观察行为（在您的情况下，它省略了复制构造函数的副作用，即输出）。所以*只能*在标准规定的条件下进行。

当源是临时的时，这两个省略都是C++03 中*第二个允许的省略（C++11 中的第三个）的示例。*

第一个允许的省略通常称为“命名返回值优化”，当源不是临时的时，它允许省略特定类型的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:29:23.200

因为[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)消除了所需的额外副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:29:33.233

这称为[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:34:42.137

好吧，我认为您永远不会调用复制构造函数。您调用默认构造函数，获取临时副本，然后调用赋值运算符。

编辑。好的，我看错了`Test t1 = f();`。RVO 确实很可能正在发挥作用`f()`。所以它本质上等于`Test t1 = Test();`。

我认为这是允许应用的一些优化之一，即使它会导致程序的行为发生变化。如果您使用优化标志进行处理，您可能可以让它执行复制构造函数（旧对象上的 + 析构函数）。

# c++ - 还有其他方法可以在函数中传递数组吗？

> ID：12950220
> 
> 赞同：1
> 
> 时间：2012-10-18T08:26:52.947
> 
> 标签：c++

> **可能重复：**
> [将二维数组传递给函数](https://stackoverflow.com/questions/8767166/passing-2d-array-to-function)

我的问题与将数组作为 C++ 函数参数传递有关。让我先展示一个例子：

```
void fun(double (*projective)[3])
{
    for(int i=0; i<3; i++)
        for(int j=0; j<3; j++)
        {
            projective[i][j]= i*100+j;
        }
}

int main()
{
    double projective[3][3];     

    fun(projective);
    for(int i=0; i<3; i++)
    {
        cout<<endl;
        for(int j=0; j<3; j++)
            cout<<projective[i][j]<<"   ";
    }

    return 0;
} 
```

在示例中，传递参数 for`fun`是一个数组，我想知道是否还有其他方法可以传递此参数。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:36:02.340

`fun`接受一个指向 3-double 数组的指针，并假设（依赖于调用者） this 指向至少 3 个 3-double 数组的数组的第一个元素。它确实如此，因为正如您所说，提供给调用的参数`main`是一个数组。这立即衰减为指向其第一个元素的指针。

一种替代方法是`fun`采用指向 3x3-array-of-double 的指针，因为它假定无论如何大小并且调用者确实有这样的野兽：

```
void fun(double (*p_projective)[3][3])
{
    for(int i=0; i<3; i++)
        for(int j=0; j<3; j++)
        {
            (*p_projective)[i][j]= i*100+j;
        }
} 
```

用 调用它`fun(&projective)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:32:42.963

你不能像这样传递一个数组，它总是衰减到一个指针。但是，如果您在其中包装一个结构，则可以传递一个数组。这适用于 C 和 C++。在 C++ 中，您可以传递对数组的引用。在这两种情况下，数组都是固定大小的。

```
// as a struct
struct Array
{
  int elems[10];
};

void func(Array a);

// as a reference
void func(int (&a)[10]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:41:10.380

如果您愿意，也可以只使用基指针并自己进行偏移，假设您的数组已分配或声明为具有 dim*dim 元素。

```
void fun(double *projective, size_t dim)
{
    for(size_t i=0; i<dim; i++)
        for(size_t j=0; j<dim; j++)
            projective[i*dim+j] = i*100+j;
}

int main(int argc, char *argv[])
{
    double ar[5*5];
    fun(ar, 5);
    return 0;
} 
```

有很多方法可以做到这一点，这只是一种方法，但通常是最容易理解的（我通常使用 std::vector<> 作为后端）。

# java - 带有自定义 jar 库的 adobe air 中的 NativeProcess

> ID：12950221
> 
> 赞同：0
> 
> 时间：2012-10-18T08:26:53.193
> 
> 标签：java, apache-flex, actionscript, air, native

我有一个使用自定义 java 库 (jcifs-1.3.17.jar) 的 java 代码 (New.java)。

然后我需要做的是使用**带有**自定义 java 库的 NativeProcess 将 java 代码移植到 adobe air。

这是代码片段。

```
var info:NativeProcessStartupInfo = new NativeProcessStartupInfo(); 
info.executable = new File("/usr/bin/java/");
info.workingDirectory = File.applicationDirectory;

var args:Vector.<String> = new Vector.<String>();

args.push("-cp", ".://Users//angelo//jcifs-1.3.17");
args.push("-cp","../bin", "New");

trace(args);

info.arguments = args;

process = new NativeProcess();
process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onDataOutput)
process.addEventListener(NativeProcessExitEvent.EXIT, exitFunc);
process.start(info); 
```

在多次尝试参数组合后，我仍然在移植自定义库时遇到错误，当我在命令行上尝试它时，它工作得很好。

> java -cp .://Users//angelo//jcifs-1.3.17 新

我有这个错误：无法对未运行的 NativeProcess 执行操作。

显然，NativeProcess 在执行代码时执行 NativeProcessExitEvent。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:41:04.190

我所做的不是添加自定义 jar 文件，而是提取 jar 文件的内容，然后将其添加到项目中，这将在编译后生成单个 Main.class 文件，该文件可以正常工作。

但我仍然希望将 jar 文件本身添加到操作脚本中。

# php - PHP - 用值表单数据库填写选择框

> ID：12950228
> 
> 赞同：0
> 
> 时间：2012-10-18T08:27:03.017
> 
> 标签：php, forms, loops, dom

我有一个带有选择框的表单和一个以前选择过的数据库值。是的，我需要这个值，它被选择显示为最后选择的内部表格。我尝试使用 php dom，但我无处可去。

所以这里是html：

```
<select name="conf_1">
     <option value="Y">Yes</option>
     <option value="N">No</option>
</select>
<select name="conf_2">
     <option value="text">text</option>
     <option value="alsotext">alsotext</option>
</select> 
```

现在我想显示存储在数组中的所选选项，如下所示：

```
$confs = array([1] => N, [2] => text ); 
```

做一些代码：

```
loop{
   <option value="$confs[$i]">$confs[$i]</option> has to be appended to <select name="conf_$i">
} 
```

现在我找不到办法做到这一点。我尝试过使用 php dom，但我不知道如何按名称属性选择元素然后循环槽，所以我无法制作一个真正的 php 示例。我只是不知道从哪里开始。

如果有人有办法做到这一点，请赐教！？

使用受@Markus I 启发的代码完成它：

```
$dom = new DOMDocument();
    $dom->loadHTML($form);
    $xPath = new DOMXPath($dom);

    foreach ($dom->getElementsByTagName('select') as $select) {
        $name = $select->getAttribute('name');
        $name = str_replace('conf_', '', $name);

        foreach($xPath->query('./option', $select) as $option) {
            if ($option->getAttribute('value') == $confs[$name]) {
                $option->setAttribute('selected', 'selected');
            }
        }
    }

    $form = $dom->saveHTML($dom);

    echo $form; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:39:39.710

像这样 ？？

```
$confs_arr = array("1" => N, "2" => text,"3" => N4, "4" => text3,"5" => N5,"6" => text7);
echo "<select name='option' id='option'>";
foreach($confs_arr as $keys=>$confs){

echo "<option value='".$confs."'>".$confs."</option>";

}
echo "</select>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:47:39.593

我更喜欢将孔模板加载到 DOM 中并对其进行修改：（代码未测试！）

```
$dom = new DOMDocument();
$dom->loadXML('<yourTemplateXML />');
$xPath = new DOMXPath($dom);
$data = array('conf1' => 'N', 'conf2' => 'text');

foreach ($xPath->query('//select') as $select) {
    foreach($xPath->query('./option', $select) as $option) {
        if ($option->getAttribute('value') == $data[$select->getAttribute('name')]) {
            $option->setAttribute('selected', 'selected');
        }
    }
}

echo $dom->saveXML(); 
```

我写了一个类，它可以处理所有的字段类型。请注意，这只是示例代码。在生产中，您应该注意数据数组中的键是否存在等等。

这有一个很好的副作用：因为您通过 dom 设置值，所以它可以保护您的表单免受 XSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:42:26.010

以下是与您询问的示例代码类似的示例代码：

```
 <?php

$categories = $rows; //array from database
foreach($rows as $row){
     if($row['name'] == $_POST['category']){
          $isSelected = ' selected="selected"'; // if the option submited in form is as same as this row we add the selected tag
     } else {
          $isSelected = ''; // else we remove any tag
     }
     echo "<option value='".$row['id']."'".$isSelected.">".$row['name']."</option>";
}
?> 
```

`$_POST['category']`是用户先前选择的，它可以是任何东西，而不仅仅是`$_POST`.

基于此示例，您可以修改您的代码。

如果用户之前选择了`"text"`，那么 html 代码应该是：

```
<select name="conf_2">
     <option value="text" selected="selected">text</option>
     <option value="alsotext">alsotext</option>
</select> 
```

放入标签，`selected="selected"`该`<option>`项目将被默认选择。

希望这可以帮助

# c# - 从字符串解析json值

> ID：12950230
> 
> 赞同：1
> 
> 时间：2012-10-18T08:27:15.597
> 
> 标签：c#, json

我需要在结果下获取错误值在我在 JObject 中得到的以下 json 中：

```
 {
   "multicast_id": 6958024579437543738,
   "success": 0,
   "failure": 1,
   "canonical_ids": 0,
   "results": [
      {
       "error": "NotRegistered"
      }
     ].     
   } 
```

我试过像

```
 JArray errors = (JArray)o["results"];
 string errorMessage = (string)o["results"].   ["error"]; 
```

但它无法得到正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:29:51.960

尝试：

```
var errors = o["results"][0];
string errorMessage = (string)errors["error"]; 
```

那应该给你“NotRegistered”字符串。

# jquery - 为什么克隆 DIV 中的 SELECT 在刷新时会出现错误行为？

> ID：12950234
> 
> 赞同：2
> 
> 时间：2012-10-18T08:27:27.430
> 
> 标签：jquery, select, jquery-mobile, refresh, clone

我正在使用 jQuery Mobile 的 .clone() 函数来克隆表单中的 div，这样我就可以拥有可重复的部分，但现在我遇到了嵌套选择的问题。
一旦 div 被克隆并且嵌套的选择被更新为新的 id，在下一次“刷新”之后会发生一些奇怪的事情。

发生的事情很奇怪，选择只是加倍并将自己放在现有的选择中，所以结果是这样的：

![JQM 和克隆选择的奇怪行为](../Images/7f07aa2427732fd7d5d2b1fbe50f9998.png)

浏览器是 Safari，我没有对其他浏览器进行任何测试，因为我只需要在 Safari 上运行此代码。

我克隆 div 的方法是：

```
var div = $.mobile.activePage.find('.repeatable').last().clone(); 
```

克隆，然后我更新 ID：

```
var newValue = pid +'-' + index;
$(this).attr('id', newValue);
$("label[for='"+ old +"']").attr('for', newValue); 
```

最后，我刷新所有选择以在调用 .val() 后选择正确的值：

```
if ($(this).data('role') === 'select') {
    $(this).selectmenu();
    $(this).selectmenu('refresh');
} 
```

调用代码的最后一部分时会出现问题。在选择正确显示但无法正常工作之前，一旦刷新选择，它就会开始以正确的方式工作，但 UI 很混乱，因为已被加倍并放置为原始元素的子元素。

我在克隆按钮之前按以下方式添加 div：

```
$('#clone_button').before(div); 
```

这个问题的根源是什么？

**编辑：**看起来这可能是 jQuery Mobile 的错误：[example](http://jsfiddle.net/bontoJR/7jGcw/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:39:48.380

我终于找到了解决这个问题的方法。目前，jQuery mobile 不支持可扩展项目的克隆。

这样做的唯一方法是手动编辑和修复克隆的 div，删除选择周围的样式项目并隔离它们。

我们要做的很简单，但很棘手：

*   使用类导航所有 DIV`ui-select`
*   推断嵌套`SELECT`删除无用标签
*   在DIV之后或之前附加**HTML**代码`SELECT``ui-select`
*   删除`ui-select`DIV
*   附加可重复的 DIV
*   调用`trigger('create')`父级以重新生成正确的样式。

这很混乱，但它有效。

我已经更新了[JSFiddle 中的示例](http://jsfiddle.net/7jGcw/3/)。（编辑：来自[JSFiddle](https://github.com/arschmitz)的[arschmitz](http://jsfiddle.net/7jGcw/17/)的另一个很好的解决方案）

PS如果您使用标签，您必须将它们保存在某处并将它们重新附加到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:42:45.247

似乎 .find() 是你的问题。使用 children() 也解决了更新 jsfiddle 的“错误”

```
function cloneRepeatableGroup() {
var div = $.mobile.activePage.find('.repeatable').last().clone();
div.children('select').each(function() {
    var element = $(this);
    var index = element.attr('id');
    index++;
    element.attr('id', index);

    element.selectmenu();
    element.selectmenu('refresh');
});

$('#clone_button').before(div);
}

$("#clone_button").click(function(){
cloneRepeatableGroup();
}); 
```

[​http://jsfiddle.net/7jGcw/2/](http://jsfiddle.net/7jGcw/2/)

# html - 如何使用 HTML5 Canvas 和 JavaScript 让绘制的对象出现在图像上？

> ID：12950235
> 
> 赞同：2
> 
> 时间：2012-10-18T08:27:34.500
> 
> 标签：html, canvas

我想知道是否有人可以帮助我弄清楚如何使用 HTML5 Canvas 和 JavaScript 在图像上绘制对象？

我写了一个例子来说明我的问题（只要你有一个名为 choc.jpg 的图像可用，它应该可以工作）。我希望香蕉对象出现在 JPEG 上，但事实并非如此。我是 HTML5 和画布的新手，非常感谢您指出正确的方向。非常感谢你的帮助！

```
<!DOCTYPE HTML>
<script>

window.onload=function() {
var testcanvas=document.getElementById("bananaDesign");
var testcontext=testcanvas.getContext('2d');

//set a background image
/* if I comment out this section no image appears and the banana gets drawn. How do I get banana to go over image? */

var importedImg = new Image();
importedImg.src = 'pictures/choc.JPG';
importedImg.onload = function(){
testcontext.drawImage(importedImg, 10, 10);
};

//draw a banana
testcontext.fillStyle = "#FFA824";
testcontext.beginPath();
testcontext.moveTo(62,20);
testcontext.lineTo(80,20); //2
testcontext.lineTo(80,30); //3
testcontext.lineTo(90,50); //4
testcontext.lineTo(80,85); //5
testcontext.lineTo(45,95); //6
testcontext.lineTo(40,80); //7
testcontext.lineTo(60,60); //8
testcontext.lineTo(60,30); //9
testcontext.fill();
}

</script>

<canvas id="bananaDesign" width="500" height="600" style="border: 5px red solid">
<p>Your browser does not display HTML5 canvas. Please update to view this design.</p>
</canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:44:29.863

您需要在上下文中配置**globalCompositeOperation**属性。在您的情况下，将值设置为**'destination-over'**以绘制图像。这是所有可能值的列表[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-globalcompositeoperation](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-globalcompositeoperation)。

您的代码示例[http://jsfiddle.net/gU4xc/](http://jsfiddle.net/gU4xc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:41:00.547

图像是异步加载的，因此在您绘制香蕉（因此在其上方）之后，它实际上被绘制到画布上。一个快速的解决方法是将你的香蕉绘制代码移动到你的图像加载处理程序中，在你将图像绘制到画布之后（参见[http://jsfiddle.net/5pGqV/](http://jsfiddle.net/5pGqV/)，回想起来我选择的背景图像并不理想;))：

```
<!DOCTYPE HTML>
<script>

    window.onload=function() {
        var testcanvas=document.getElementById("bananaDesign");
        var testcontext=testcanvas.getContext('2d');

        //set a background image
        /* if I comment out this section no image appears and the banana gets drawn. How do I get banana to go over image? */

        var importedImg = new Image();
        importedImg.src = 'pictures/choc.JPG';
        importedImg.onload = function(){

            //draw the loaded image to canvas first
            testcontext.drawImage(importedImg, 10, 10);

            //now draw a banana on top
            testcontext.fillStyle = "#FFA824";
            testcontext.beginPath();
            testcontext.moveTo(62,20);
            testcontext.lineTo(80,20); //2
            testcontext.lineTo(80,30); //3
            testcontext.lineTo(90,50); //4
            testcontext.lineTo(80,85); //5
            testcontext.lineTo(45,95); //6
            testcontext.lineTo(40,80); //7
            testcontext.lineTo(60,60); //8
            testcontext.lineTo(60,30); //9
            testcontext.fill();
        }; 
    }

</script>

<canvas id="bananaDesign" width="500" height="600" style="border: 5px red solid">
<p>Your browser does not display HTML5 canvas. Please update to view this design.</p>
</canvas> 
```

# struts2 - 将多个 Struts2 命名空间与瓦片一起使用

> ID：12950236
> 
> 赞同：5
> 
> 时间：2012-10-18T08:27:36.663
> 
> 标签：struts2, tiles, struts2-namespace

我想在我的 struts2 配置中添加命名空间，并使用磁贴。

我的 struts.xml 包例如：

```
<package name="search" namespace="/search" extends="struts-default"> 
<result-types>
    <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
</result-types>
<action name="SearchActionInit"  class="web.action.SearchAction" method="initSearch"> 
   <result name="input" type="tiles">search</result> 
   <result name="success" type="tiles">search</result> 
</action> 
</package> 
```

以及相应的瓷砖配置：

```
<definition name="baseLayout"    template="layout.jsp">
    <put-attribute name="titre"               value="titre.default" />
    <put-attribute name="header"            value="/common/header.jsp" />
    <put-attribute name="menu"          value="/common/menu.jsp" />
    <put-attribute name="leftcontent"          value="/common/leftcontent.jsp" />
    <put-attribute name="rightcontent"          value="/common/rightcontent.jsp" />
    <put-attribute name="detail"          value="/common/detail.jsp" />
    <put-attribute name="footer"               value="/common/footer.jsp" />
</definition>

<definition name="search"    extends="baseLayout">
    <put-attribute name="titre"               value="titre.search" />
    <put-attribute name="rightcontent"          value="/pages/search/Search.jsp" />
</definition> 
```

我遇到的问题是我需要在名称空间搜索的搜索文件夹中复制 layout.jsp（对于其他名称空间，依此类推）。它不在瓷砖逻辑中，并且会带来更多的维护工作。

有没有人解决这个问题的关键以避免重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:51:37.473

试试这个：

模板：

```
<!-- meta template -->
<definition name="global" template="/WEB-INF/template/layout.jsp">
    <put-attribute name="attr1" value="/WEB-INF/template/attr1.jsp"/>
    <put-attribute name="attr2" value="/WEB-INF/template/attr2.jsp"/>
    <!-- more -->
</definition> 
```

然后数据：

```
<!-- instance -->
<definition name="myApp.search" extends="global">
    <put-attribute name="attr2" value="/jsp/search/search.jsp"/>
</definition>
<!-- instance -->
<definition name="myApp.page2" extends="global">
    <put-attribute name="attrN" value="/jsp/namespaceN/whatever.jsp"/>
</definition> 
```

您只需要覆盖`layout.jsp`您想要加载的页面部分。

这是我的项目结构：

```
Root
|
--jsp
    |
    namespace1
        |
        --*.jsp
    |
    --*.jsp
|
--WEB-INF
    |
    --template
        |
        --layout.jsp
        |
        --attr1.jsp 
```

我希望这能解决你的问题。

# .net - 这是处理多语言网站的好方法吗？

> ID：12950240
> 
> 赞同：0
> 
> 时间：2012-10-18T08:27:46.783
> 
> 标签：.net, web-applications, web

我已经有一个多语言网站的解决方案，但我不确定这是否是一个好的解决方案.. 并且尽可能灵活。首先，我正在使用 Visual webgui 开发一个项目。长话短说，webgui 是一种 Web 编程，但与 WinForms 非常相似。

所以，这里是：

1.  我有一个 MDI 应用程序。这是一个简单的网页，顶部有 MainMenu，可以在里面打开许多窗口。

2.  首先，我在我的主启动项目中创建 resx 文件。让我们说`"myStrings.resx"`默认语言和`"myStrings.de-DE.resx`“德语翻译。

3.  每个要翻译的字符串都必须在这两个资源文件中。

4.  现在，我最大的担忧。在每个类（表单或非表单）中，我必须有这样的方法（在这个例子中，只有一个控件要翻译）：

    ```
    private void adjustCulture()
        {
            System.Resources.ResourceManager rm = new System.Resources.ResourceManager("MyApp.myStrings", typeof(testWindow).Assembly);
            label2.Text = rm.GetString("DefaultString", culture);
        } 
    ```

这让我很困扰，因为我必须在每个窗口中分别实现这个功能。并不完全适用于该窗口中的每个控件（只有那些将被翻译的控件）。所以它有点“不灵活”。

5.我也不能只在我的设计器中初始化标签，我必须手动在构造函数中进行所有初始化：

```
label2.Text = rm.GetString("DefaultString", culture);

(or in Designer partial class inside InitializeComponent method - but also, manually). 
```

6.最后，当有人改变语言时：

我必须在每个窗口的 Load 事件中调用 adjustCulture 函数，总是！首先，初始化..其次，当有人（在 MDI 菜单中）将语言更改为德语时，我在 MDI 中打开了三个窗口。我必须分别翻译每个人。所以我必须将打开的 Windows 处理程序存储在某个地方，并调用每个人的 Load 事件。

这是多语言 webgui 应用程序的好解决方案吗？或者有没有更好的解决方案？更灵活？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:32:01.270

一种方法是为每种语言创建一个带有键/值对的 xml 文件，并将其用作不同语言的翻译器。在这种情况下，您还可以为每个表达式实现缓存、rtl/ltr 和其他必要的属性。您可以为它编写一个库，然后您可以轻松地添加对不同语言的支持，还可以自动化翻译和其他功能。

# eclipse - 限制项目在eclipse中只有一种文件类型

> ID：12950242
> 
> 赞同：0
> 
> 时间：2012-10-18T08:27:56.687
> 
> 标签：eclipse, eclipse-plugin, eclipse-gmf

我正在写一个 Eclipse 插件。我需要在项目中限制具有特定扩展名（不创建多个）的文件。通过向导，我正在创建一个扩展名为“file.extension”的文件。我在向导级别进行了限制，因为不允许用户创建多个扩展名为“.extension”的文件。我还需要限制用户不允许他将文件复制或拖动到其他相同类型的项目中。因为，该项目必须只有一个具有特定扩展名（“.extension”）的文件。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:38:08.123

不要那样做。用户总是可以关闭 Eclipse，在项目中创建另一个文件并重新启动 Eclipse。你根本无法避免这种情况。

相反，为您的项目性质创建一个自定义构建器，以*验证*只有一个文件。如果超过 1 个文件，项目构建器会在问题视图中引发错误，因此用户可以修复它。

# jquery - 剥离谷歌地图jquery

> ID：12950248
> 
> 赞同：2
> 
> 时间：2012-10-18T08:28:19.443
> 
> 标签：jquery, google-maps, google-maps-api-3

这是我正在使用的代码：

[http://jsfiddle.net/Rr5PL/9/](http://jsfiddle.net/Rr5PL/9/)

我在我的网站上使用谷歌地理编码服务我想做的是对地址进行地理编码，包括自动完成。我有这个工作，除了它显示了一张地图。

我想做的是去掉代码上的地图组件，而是在结果页面上显示地图，这符合谷歌的 T&C。

所以我的问题是，使用上面发布的代码，如何删除不需要删除地图功能的代码？

**编辑：这是我在被卡住之前走了多远！ [http://jsfiddle.net/Rr5PL/34/](http://jsfiddle.net/Rr5PL/34/)**

**EDIT2：这就是我可以在它中断之前发表评论的全部内容：http: [//jsfiddle.net/cNbkj/](http://jsfiddle.net/cNbkj/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:34:20.550

您无需加载地图即可使用地理编码器。只需删除您的地图 div 并注释掉以下行：

```
map = new google.maps.Map(document.getElementById("geomap"), options); 
```

请注意 Google Maps Geocoding API 受以下[限制](https://developers.google.com/maps/documentation/geocoding/#Limits)：

> “注意：Geocoding API 只能与 Google 地图一起使用；禁止在地图上不显示地理编码结果。有关允许使用的完整详细信息，请参阅 Maps API 服务条款许可限制。”

# c# - c# Winforms如何获取属性绑定的控件

> ID：12950249
> 
> 赞同：0
> 
> 时间：2012-10-18T08:28:22.967
> 
> 标签：c#, binding, system.reflection

我有各种在我的表单上动态创建的文本框，当它们被创建时，添加了数据绑定，将文本框绑定到我的类中的一个属性。

我需要能够获得对文本框的引用，但是我只知道文本框绑定到的属性。那么是否有可能获得对文本框的引用，只知道它绑定到的属性的名称。

我希望我已经正确解释了这一点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T23:04:32.377

*如果我理解正确，您可以在Form*类中尝试此方法：

```
public Control GetControlByDataBinding(string key)
{
    foreach (Control control in Controls)
    {
        foreach (Binding binding in control.DataBindings)
        {
            if (binding.PropertyName == key) return control;
        }
    }

    return null;
} 
```

*或者使用Linq*甚至更好：

```
public Control GetControlByDataBinding(string key)
{
    return 
        Controls
        .Cast<Control>()
        .FirstOrDefault(control => 
            control.DataBindings
            .Cast<Binding>()
            .Any(binding => binding.PropertyName == key));
} 
```

# django - get_list_or_404 在 django 中有多个过滤器

> ID：12950250
> 
> 赞同：2
> 
> 时间：2012-10-18T08:28:23.750
> 
> 标签：django, django-models

我有一个模型名称学生：

```
class Student(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    unique_id = models.CharField(max_length=15)
    email = models.EmailField(blank=True)
    grade = models.ForeignKey(Grade)
    hr_teacher = models.ForeignKey(User, related_name='hr_students')
    parent = models.ForeignKey(User, related_name='children')

    def __unicode__(self):
        return u'%s, %s (G-%s, %s)' % (self.last_name, self.first_name, self.grade.short_name, self.unique_id)

    def hr_teacher_absent(self):
        return self.hr_teacher.groups.filter(name='Absent Teachers').count() > 0

    def hr_booking(self):
        return self.booking_set.filter(teacher=self.hr_teacher,status__uses_space=True)

    def has_booking(self):
        return bool(self.hr_booking())

    def hr_booking_for_event(self, ptc_event):
        return self.hr_booking().filter(period__ptc_event=ptc_event)

    def has_booking_for_event(self, ptc_event):
        return bool(self.hr_booking_for_event(ptc_event))

    def delete_all_bad_bookings(self):
        bad_bookings = self.booking_set.exclude(teacher=self.hr_teacher).delete()

    class Meta:
        ordering = ['grade','last_name','first_name'] 
```

每个学生都有一个家庭教师，它是组名“教师”中的用户（这些是默认用户，在 django 的管理员中定义的组）。我正在尝试获取至少有 1 个学生的教师组中的用户列表。这是我的代码：

```
teacher_list_db = get_object_or_404(Group, name="Teachers").user_set.annotate(num_students=Count('hr_students')).filter(num_students__gt=0).order_by("last_name","first_name") 
```

它返回一个空数组。

我阅读了 django 文档，发现了这个方法：

```
get_list_or_404(klass, *args, **kwargs) 
```

我试过并被困在这里：

```
teacher_list_db = get_list_or_404(User.objects.order_by('last_name', 'first_name'), groups__name='Teachers') 
```

我不知道如何处理计算学生人数的注释部分有同一位老师！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:01:10.137

好的，我刚刚想通了：

```
teachers_list_db = get_list_or_404(User.objects.order_by('last_name', 'first_name'), groups__name='Teachers')
if teachers_list_db:
    teachers_list = []
    for teacher in teacher_list_db:
        if teacher.hr_students.all().count() >= 0:
            teachers_list.append(teacher) 
```

**Teachers_list**是我需要的列表。

耶！姜戈太棒了！！！\米/

# iphone - 以编程方式在 UITextView 中写入文本

> ID：12950251
> 
> 赞同：1
> 
> 时间：2012-10-18T08:28:30.057
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitextview

下面的文字我想写在 UITextView 那么我怎么能写在 UITextView

```
Provides freeze protection to -45°F to ensure a clean, clear windshield

    >Concentrated formula
    >Provides freeze protection to -45°F
    >Removes road film and bug splatter
    >Use year-round
    >Choose the freeze protection you need
    >Contains a special bittering agent
    >Harmless to car finishes when used as directed 
```

我想要 UITextView 中的类似结构。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:36:17.113

您可以设置任何您想要使用的文本：

```
yourTextView.text = @"YOUR TEXT HERE"; 
```

因此，如果您想拥有与我们展示的相同结构：

```
yourTextView.text = @"Provides freeze protection to -45°F to ensure a clean, clear windshield\n\n >Concentrated formula\n >Provides freeze protection to -45°F\n >Removes road film and bug splatter\n >Use year-round\n >Choose the freeze protection you need\n >Contains a special bittering agent\n >Harmless to car finishes when used as directed"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:36:35.320

只需按照您的要求格式化字符串：

```
yourTextView.text = [NSString stringWithFormat:@" Provides freeze protection to -45°F to ensure a clean, clear windshield\n    >Concentrated formula\n    >Provides freeze protection to -45°F\n    >Removes road film and bug splatter\n    >Use year-round\n    >Choose the freeze protection you need\n    >Contains a special bittering agent\n    >Harmless to car finishes when used as directed"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T10:08:07.360

您可以以编程方式执行此操作。

```
textView.text = @"Type your text here"... 
```

您可以将 \n 用于新行，将 \t 用于标签栏空间。

试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:49:41.310

利用文本视图文本中`'\n'`的新行开始和`'\t' (Escape sequences)`选项卡空间。

# audio - 以编程方式实现虚拟音频电缆

> ID：12950259
> 
> 赞同：4
> 
> 时间：2012-10-18T08:28:47.553
> 
> 标签：audio, audio-streaming, audio-recording, multimedia, wdm

Virtual Audio Cable 是一种 Windows WDM 多媒体驱动程序，允许用户将音频流从一个应用程序传输到另一个应用程序。我想以编程方式实现此功能。我更喜欢用c#来做。任何开发人员都可以指导我如何做

# mysql - 如何加入mysql

> ID：12950261
> 
> 赞同：1
> 
> 时间：2012-10-18T08:28:50.267
> 
> 标签：mysql, count, left-join

如果它为空，我怎样才能得到计数为 0。当我使用以下语句运行时：

```
SELECT S.shortText, COUNT(O.selectionID) AS C FROM Opinions O
LEFT JOIN Selections S ON S.id=O.selectionID
WHERE S.qID=3 AND MONTH(O.entryDate)=5 
GROUP BY S.shortText 
```

* * *

```
 shortText         C    
 ----------------  ---- 
 Leisure           0       <------ this line missing 
 Business          3
 University visit  1 
```

我的选择表

```
 id     shortText        
 -----  ---------------- 
 1      Leisure          
 2      Business         
 3      University visit 
```

我的意见表

```
 id     entryDate              selectionID    
 -----  ---------------------  -------------- 
 186    5/21/2012 11:34:37 AM  2              
 205    5/22/2012 9:13:25 AM   2              
 216    5/22/2012 9:43:14 AM   2              
 237    5/24/2012 8:24:00 PM   3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:45:29.250

如果您想将休闲行显示为 0，即使意见表中没有匹配的记录。使用子查询如下：

```
select t1.shorttext,if(t2.c is null,0,t2.c)as c from selections t1 left join (

SELECT s.id,S.shortText, COUNT(O.selectionID) AS C FROM selections S
LEFT JOIN opinions O ON S.id=O.selectionID
WHERE  MONTH(O.entryDate)=5 
GROUP BY S.shortText
  ) t2 on t1.id=t2.id 
```

[http://sqlfiddle.com/#!2/8ca3e/11](http://sqlfiddle.com/#!2/8ca3e/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:30:04.450

如果要显示，请交换`Selections`and`Opinions`表。

```
SELECT S.shortText, COUNT(O.selectionID) AS C 
FROM   Selections S
       LEFT JOIN Opinions O 
         ON S.id=O.selectionID
-- WHERE  S.ID=3 AND                     -- add extra conditions here
--       MONTH(O.entryDate)=5 
GROUP BY S.shortText 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/39159/7)

或使用`RIGHT JOIN`

```
SELECT S.shortText, COUNT(O.selectionID) AS C 
FROM   Opinions O 
       RIGHT JOIN Selections S
         ON S.id=O.selectionID
-- WHERE  S.ID=3 AND 
--       MONTH(O.entryDate)=5 
GROUP BY S.shortText 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/39159/14)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:38:44.890

你试过换桌子吗？从 SELECTTIONS 中选择并加入 OPINIONS，而不是您拥有它的方式。

# ruby-on-rails-3 - 一个索引页的记录未显示在另一个索引页中，rails

> ID：12950267
> 
> 赞同：1
> 
> 时间：2012-10-18T08:29:17.013
> 
> 标签：ruby-on-rails-3

我想将记录（标题）从一个索引页显示到另一个索引页，为此我这样做

在 index.haml 中：-

```
-if @individual.important_event.present?
  -@individual.important_event.each do |event|
    %p
     = link_to event.title, important_events_path 
```

在个人.rb 中：-

```
has_many :important_event 
```

在important_event.rb中：-

```
belongs_to :individual 
```

但它不起作用。它给出了错误“#<ImportantEvent:0xbb729c8> 的未定义方法‘每个’”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:33:43.997

在您的`individual.rb`模型中，您需要在`has_many`语句中使用复数，如下所示：

```
has_many :important_events 
```

然后您可以使用：`-@individual.important_events.each`在您的视图中。

即使英语是您的第一语言，弄清楚何时应该或不应该在 Rails 中使用复数形式是一件很痛苦的事情。

# c++ - 如何在 Symbian C++ 中获取网络类型（2G/3G/Wi-Fi）？

> ID：12950274
> 
> 赞同：1
> 
> 时间：2012-10-18T08:29:32.470
> 
> 标签：c++, networking, symbian

在 Symbian C++ 应用程序中，我需要获取当前的网络类型（2G/3G/Wi-Fi）。我怎样才能通过代码做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:14:47.097

您可以使用 RConnectionMonitor API，[示例代码](http://www.developer.nokia.com/Community/Wiki/Determine_the_bearer_type_using_RConnectionMonitor_API)请[参见此处，可用承载类型（TConnMonBearerType）请参见此处](http://www.developer.nokia.com/document/Cpp_Developers_Library/GUID-759FBC7F-5384-4487-8457-A8D4B76F6AA6/html/rconnmon_8h-source.html)

# php - CakePHP 2.2.0 多树重排序性能

> ID：12950276
> 
> 赞同：1
> 
> 时间：2012-10-18T08:29:39.360
> 
> 标签：php, mysql, cakephp, optimization, tree

我正在使用 CakePHP 多树行为来存储`site_id`. 每个`site_id`人都有自己的树。

目前数据库中只有 119 条记录，分布在 8 个不同的`site_id`. 但是，当我希望为特定的树重新排序时，`site_id`我运行以下代码：

```
$this->Category->recursive = -1;
$this->Category->reorder(array('id' => $last_category['Category']['parent_id'], 'field' => 'order', 'order' => 'asc')); 
```

这目前需要 10-12 秒来执行，我无法弄清楚我可以做些什么来优化它？

我正在使用的树行为代码：http: [//pastebin.com/Xhf1LAgQ](http://pastebin.com/Xhf1LAgQ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:36:29.747

我很确定您没有为数据库表使用正确的索引。添加索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:29:11.080

cakephp 的 Tree 行为基于 Modified Preorder Tree Traversal 范式。

有人已经研究过 cakphp 树行为的性能，但是源代码不再可用。如果您发现它，请分享： [https ://cakephp.lighthouseapp.com/projects/42648/tickets/10-b_tree-behavior-for-bigger-faster-trees](https://cakephp.lighthouseapp.com/projects/42648/tickets/10-b_tree-behavior-for-bigger-faster-trees)

# java - 如何在不创建任何中间字符串的情况下将 char[] 转换为 byte[]

> ID：12950278
> 
> 赞同：1
> 
> 时间：2012-10-18T08:29:44.730
> 
> 标签：java, string, char, bytearray, arrays

> **可能重复：**
> [将 char 数组转换为字节数组并再次返回](https://stackoverflow.com/questions/4931854/converting-char-array-into-byte-array-and-back-again)

我有一个密码，`char[]`我想输入这个密码`byte[]`而不创建任何`String`. 请建议最好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T08:33:57.167

如果您只需要 ASCII 或 ISO-8859-1 编码，则可以一次复制一个字符。

```
char[] chars = ...
byte[] bytes = new byte[chars.length];
for(int i = 0; i < chars.length; i++)
    bytes[i] = (byte) chars[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:41:47.543

我不知道有任何内置工具可以做到这一点。您可能想要创建一个实用程序类来为您解决问题。

```
public static byte[] charToByte(char[] array) {

  byte[] result = new byte[array.length];

  for(int i = 0; i < array.length; i++) {
    result[i] = (byte) array[i];
  }

  return result;
} 
```

此解决方案如何受到您使用的编码的限制。

# java - 日历 <= 另一个日历

> ID：12950279
> 
> 赞同：0
> 
> 时间：2012-10-18T08:29:47.210
> 
> 标签：java, calendar

```
while (r.next()) {
    String rn = r.getString(3);
    String sqldate = r.getString(2); // database reservation date
} 
```

从数据库中获取日期

```
DateFormat RD = new SimpleDateFormat("yyyy-MM-dd");
     java.sql.Date converteddate = new java.sql.Date(RD.parse(sqldate).getTime());
     Calendar cal = Calendar.getInstance();
     Calendar cal1 = Calendar.getInstance();
     cal.setTime(converteddate);
     cal.add(Calendar.DATE, 7);
     if(cal<=cal1){ }// i need to this opration i dont know how 
```

我需要检查`cal`的是 <= `Cal1`。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T08:31:06.087

日历是可比较的，您可以使用以下[`Calendar#compareTo()`方法](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#compareTo%28java.util.Calendar%29)：

> `compareTo`如果参数表示的时间等于此日历表示的时间，则返回值 0；如果此日历的时间早于参数表示的时间，则值小于 0；如果此日历的时间在参数表示的时间之后，则值大于 0

在您的情况下，要确定是否`cal`在 之前或等于`cal1`，您将使用：

```
if (cal.compareTo(cal1) <= 0) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:34:23.133

如何使用简单的方法：

```
if (cal.before(cal1)) { ... } 
```

内容如下：“如果某个日期早于另一个日期，您应该执行以下操作..”。

我认为如果你写“之前”比“compareTo”更容易阅读，即使操作是一样的。[另请阅读 Java Calendar 的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#before%28java.lang.Object%29)。

编辑：我已经对答案进行了一些更新，以包括下面评论的内容，因此答案更加完整。感谢 assylias 指出，但如果您想比较某个日期是否早于或等于另一个日期，您应该使用：

```
if (!cal.after(cal1)) { ... } 
```

内容如下：“如果某个日期不在另一个日期之后，您应该执行以下操作..”。另请注意，“not after”与“before or equal to”相同。

# java - 调用使用 Java ASM 添加的方法时出现 NoClassDefFoundError 错误

> ID：12950288
> 
> 赞同：0
> 
> 时间：2012-10-18T08:30:02.143
> 
> 标签：java, java-bytecode-asm

我正在使用 ASM 将代码注入方法：

```
 @Override
    public void visitCode() {
        visitMethodInsn(Opcodes.INVOKESTATIC, "sssss/CopyOfsss", "foo", "()V");

        super.visitCode();
    }

Exception in thread "main" java.lang.NoClassDefFoundError: sssss/CopyOfsss
    at java.util.regex.Pattern$Node.match(Pattern.java)
    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3760)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Matcher.match(Matcher.java:1127)
    at java.util.regex.Matcher.matches(Matcher.java:502)
    at sssss.CopyOfsss.main(CopyOfsss.java:26) 
```

请帮忙~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:03:15.707

嗯，我得到了我的答案。这是因为注入的类是由引导类加载器加载的，所以注入的代码不能调用“CopyOfsssss”中的方法。参考[这篇文章](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/findingclasses.html)。解决方案是在 jvm 参数中添加“-Xbootclasspath/a:/path/yourclass.lib”。注意“Xbootclasspath”后面的“/a”表示追加。

# javascript - 如何在mongodb中使用for循环

> ID：12950300
> 
> 赞同：10
> 
> 时间：2012-10-18T08:30:40.113
> 
> 标签：javascript, mongodb, mongodb-query

我需要向 mongodb 集合插入一个新字段（列），该集合现在有 5246 个文档。该字段应自动递增。所以我使用了一个 for 循环。我的查询如下`

```
for(i=1;i<=5246;i++) {
    db.coll.update({},{$set:{"new_field":i}},false,true)
}; 
```

但我的坏输出是，

```
{new_field:5246},{new_field:5246},{new_field:5246},....... 
```

查询有没有问题...？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-18T09:02:47.830

为什么要更新所有没有查找条件的记录？从技术上讲，这个循环正在正常工作。相反，您需要做的是循环遍历您的集合的游标，如下所示：

```
var cursor = db.coll.find(),
    i = 0;

cursor.forEach(function(x){
    db.coll.update({_id: x._id}, {$set:{new_field:i}})
    $i++;
}); 
```

类似的东西会起作用。

# ruby-on-rails - 数据解析到数据库 Nokogiri rails

> ID：12950302
> 
> 赞同：1
> 
> 时间：2012-10-18T08:30:51.843
> 
> 标签：ruby-on-rails, ruby, nokogiri

所以我刚刚开始使用 Nokogiri 和 Rails 我有以下返回某人的名字。

测试.rb：

```
require 'nokogiri'
require 'open-uri'

url = "http://www.imdb.com/title/tt1439629/"
doc = Nokogiri::HTML(open(url))  

puts doc.css("div#wrapper [...too long...]")[0].text 
```

现在我在 Rails 上的数据库中创建了一个表，并希望将返回的名称发送到名称列中的演员表！我该怎么做？我似乎找不到这方面的教程...

我的目标最终是有一个rails表单，我可以在其中输入一个IMDB链接，该链接将返回标题等等......

（另外我是 ruby​​ rails 和编程的新手，所以请提供简单的信息！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:14:20.697

看看这些：

1.  [http://ericlondon.com/posts/249-a-ruby-class-to-crawl-a-website-using-nokogiri-mongodb-database-and-mongomapper-orm](http://ericlondon.com/posts/249-a-ruby-class-to-crawl-a-website-using-nokogiri-mongodb-database-and-mongomapper-orm)
2.  [http://ruby.bastardsbook.com/toc/](http://ruby.bastardsbook.com/toc/)

第二个是迄今为止最好的资源——它有一个关于与 Nokogiri 报废的整个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:01:16.673

使用 Rails 时，您使用迁移来创建数据库并在数据库中创建或修改表。这是关于此的官方文章：[http ://edgeguides.rubyonrails.org/migrations.html](http://edgeguides.rubyonrails.org/migrations.html)

当您创建模型（以及属于它的表）时，您可以使用 ActiveRecord 模型访问该表，如下所示：

```
object = ModelName.new({has of data})
object.save 
```

或者找到他们

```
ModelName.find(id_of_object_in_db) 
```

您应该阅读处理模型的整个部分：

[http://edgeguides.rubyonrails.org/](http://edgeguides.rubyonrails.org/)

# javascript - Jquery在chrome中给出错误

> ID：12950308
> 
> 赞同：0
> 
> 时间：2012-10-18T08:31:10.100
> 
> 标签：javascript, jquery, google-chrome

我在我的网站上有这个脚本，可以在 facebook/twitter 等上分享...

它适用于 IE firefox，但不适用于 chrome。

脚本如下所示：

```
<script>

$(document).ready(function () {

    var c = document.getElementsByTagName('meta'), d;

    for ( var x = 0, y = c.length; x < y; x++) {

        if (c[x].attributes[1].value.toLowerCase() == "og:description") {

            d = c[x];

        }

    }

    $("#maincontent_social_bar").replaceWith('<div id="maincontent_social_bar"><iframe src="http://share.bimbim.nl/sharepanel.php?s=YTozOntzOjE6ImQiO2k6MjtzOjI6InNuIjtzOjk6IjUsMSw0LDIsMyI7czoxOiJoIjtzOjMyOiI5ODdlNjAxMmYyYTU1MmY0YWQwMjdlMTY3NTFkZDIxYyI7fQ==&u='

                    + encodeURIComponent(window.location)

                    + '&t='

                    + encodeURIComponent(document.title)

                    + '&desc='

                    + encodeURIComponent(d.content)

                    + '" height="16" width="90" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:16px;" allowTransparency="true"></iframe></div>');

});

</script> 
```

在谷歌浏览器中它说： D 未定义。我无法弄清楚为什么......有人可以给我一个提示吗？

- - 更新 - -

这是脚本正在查看的 HTML 标头：

```
<meta property="og:description" content="De landelijke docentendag voor mbo-interieurdocenten (niveau 4) op dinsdag 11 september was een succes. Ruim 30 docenten van twaalf convenantscholen waren op initiatief van WoonWerk in Nieuwegein bijeen om kennis te maken met de nieuwste ontwikkelingen in de woonbranche en te sparren met..." /><meta property="og:title" content="Grote opkomst docentendag: Onderwijs ontmoet woonbranche" /><meta name="description" content="De landelijke docentendag voor mbo-interieurdocenten (niveau 4) op dinsdag 11 september was een succes. Ruim 30 docenten van twaalf convenantscholen waren op initiatief van WoonWerk in Nieuwegein bijeen om kennis te maken met de nieuwste ontwikkelingen in de woonbranche en te sparren met..." /><meta name="robots" content="index, follow" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:44:30.413

看起来问题来自这一行：

```
encodeURIComponent(d.content) 
```

如果`d`此时未定义，则意味着在较早的`for`循环期间未为其分配值。这意味着它没有找到任何具有`"og:description"`要分配给的属性值的标签`d`。如果我是你，我会在`for`循环之后放置一个断点，并`d`在该点检查 's 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:32:41.280

`, d`从_`var c = document.getElementsByTagName('meta'), d;`

像这样：

```
var c = document.getElementsByTagName('meta'); 
```

# jakarta-ee - 配置 Geronimos MDB InstanceLimit

> ID：12950311
> 
> 赞同：1
> 
> 时间：2012-10-18T08:31:26.257
> 
> 标签：jakarta-ee, jms, activemq, geronimo

我无法配置 Geronimo/ActiveMQ 以便一次处理超过 10 条消息。

我尝试了此[邮件列表中](https://mail-archives.apache.org/mod_mbox/geronimo-user/200807.mbox/%3Cadd18bc80807171044u57cf26cfq467cf3eb29e7084b@mail.gmail.com%3E)的建议，但将 设置`maxSessions`为高于 10 的值没有任何效果。将其设置为低于该值会产生效果...

我也尝试`InstanceLimit`通过设置来设置：

```
<module name="org.apache.geronimo.configs/j2ee-server/2.1.4/car">
    <gbean name="org.apache.geronimo.configs/j2ee-server/2.1.4/car?ServiceModule=org.apache.geronimo.configs/j2ee-server/2.1.4/car,j2eeType=GBean,name=CustomPropertiesGBean" 
           gbeanInfo="org.apache.geronimo.system.properties.SystemProperties">
        <attribute name="systemProperties">Default\ MDB\ Container.InstanceLimit=50</attribute>
    </gbean>
</module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:34:46.710

好的，我终于明白了！这是一个冗长的解释，希望对某人也有帮助。

在修改了[这些示例](https://cwiki.apache.org/GMOxDOC22/jms-application-with-message-driven-bean.html)之后，我发现 ActiveMQ 的激活参数并没有限制上限，但是我们可以减少并行实例：

```
<activation-config-property>
    <activation-config-property-name>destinationType</activation-config-property-name>
    <activation-config-property-value>javax.jms.Queue</activation-config-property-value>
</activation-config-property>
<activation-config-property>
    <activation-config-property-name>maxSessions</activation-config-property-name>
    <activation-config-property-value>3</activation-config-property-value>
</activation-config-property>
<activation-config-property>
    <activation-config-property-name>maxMessagesPerSessions</activation-config-property-name>
    <activation-config-property-value>2</activation-config-property-value>
</activation-config-property> 
```

所以我决定走开源之路！附加相关组件的所有需要​​的源代码后：

*   杰罗尼莫
*   活动MQ
*   开放式EJB

并在堆栈跟踪中发现，InstanceLimit 是一个明确查询的 GBean 属性。它的默认值为 10，这是在 Geronimo 中硬编码的。通过在调试器中调整这个值，我得到了想要的结果！

[但是在邮件列表](https://mail-archives.apache.org/mod_mbox/geronimo-user/200807.mbox/%3Cadd18bc80807171044u57cf26cfq467cf3eb29e7084b@mail.gmail.com%3E)中也建议设置 InstanceLimit ，建议将其添加到 Geronimos config.xml

```
<module name="org.apache.geronimo.configs/j2ee-server/2.1.4/car">
    <gbean name="org.apache.geronimo.configs/j2ee-server/2.1.4/car?ServiceModule=org.apache.geronimo.configs/j2ee-server/2.1.4/car,j2eeType=GBean,name=CustomPropertiesGBean" 
           gbeanInfo="org.apache.geronimo.system.properties.SystemProperties">
        <attribute name="systemProperties">Default\ MDB\ Container.InstanceLimit=50</attribute>
     </gbean>
</module> 
```

（当然使用正确的版本号）但这没有任何效果。仔细阅读此[提示](https://mail-archives.apache.org/mod_mbox/geronimo-user/200803.mbox/%3C466797bd0803231115p7c3d15bfhb37712c58fc984c7@mail.gmail.com%3E)后：

> 尝试将 MdbContainer 的 InstanceLimit 属性设置为 0，以便创建的实例数与可用的 AMQ 会话数相匹配。要设置它，您需要将其设置为系统属性。该属性应为 containerId.InstanceLimit 其中 containerId 的格式为

`<artifactId>.<Resource Group Name>-<listener interface>`

> 例如：org.apache.geronimo.configs/activemq-ra/2.2-SNAPSHOT/car.ActiveMQ RA-javax.jms.MessageListener

*   `<artifactId>`= jms RA 的 artifactId
*   `<Resource Group Name>`- 您在创建 RA 时提供的资源组名称
*   `<listener interface>`- javax.jms.MessageListener 在这种情况下

并检查 Geronimos 代码和运行时状态，我发现它正在寻找`org.apache.geronimo.openejb.OpenEjbSystemGBean`第 309 行中的 InstanceLimit，其目标 ID 位于示例项目中：

org.apache.geronimo.configs/activemq-ra/2.2.1/car.ActiveMQ RA-javax.jms.MessageListener

有了这些信息，我试了一下：

```
<module name="org.apache.geronimo.configs/j2ee-server/2.2.1/car">
    <gbean name="org.apache.geronimo.configs/j2ee-server/2.2.1/car?ServiceModule=org.apache.geronimo.configs/j2ee-server/2.2.1/car,j2eeType=GBean,name=CustomPropertiesGBean" 
               gbeanInfo="org.apache.geronimo.system.properties.SystemProperties">
        <attribute name="systemProperties">org.apache.geronimo.configs/activemq-ra/2.2.1/car.ActiveMQ\ RA-javax.jms.MessageListener.InstanceLimit=50</attribute>
    </gbean>
</module> 
```

它奏效了！由此我从调试会话中获得了使用的 ID... 现在我们可以设置 InstanceLimit=0 并可以通过`maxSessions`ActiveMQ 的属性配置并行工作的 MDB！

# php - drupal 7主题中的var之间有什么关系？

> ID：12950316
> 
> 赞同：1
> 
> 时间：2012-10-18T08:31:49.707
> 
> 标签：php, drupal-7, drupal-theming

我在 Drupal 7 中创建了一个主题并呈现了一个节点页面。

1、drupal调用页面--node.tpl.php处的函数：

```
print render($page['content']); 
```

2、调用template.php中的函数：

```
function mytheme_preprocess_node(&$vars){
  //...
}; 
```

第三，它使用 node.tpl.php 来渲染页面。

那么，$page['content'](page--node.tpl.php)、$vars(template.php)和node.tpl.php中的变量是什么关系呢？我在哪里可以找到文档来回答这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:12:13.843

这就是drupal主题工作流程，我认为您需要看到“大局”

[这里](http://drupal.org/node/173880)解释了主题注册表，可以澄清我们的问题

[在这里](http://drupal.org/node/171194)和主题文件的概述

# android - Android：在 onItemSelected for Spinner 中出现错误

> ID：12950319
> 
> 赞同：0
> 
> 时间：2012-10-18T08:32:14.043
> 
> 标签：android, android-spinner

即使我还没有从微调器中选择，我在 EditText 中也获得了默认值。有人可以帮助我吗？

```
public void onItemSelected(AdapterView<?> parent, View v, int position,
        long id) {
    // TODO Auto-generated method stub
    etCountry.setText("");
    switch(parent.getId()){
    case R.id.spcountry:
        etCountry.setText(parent.getItemAtPosition(position).toString());
        break;
    }

}
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
    etCountry.setText("");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:45:40.253

**在你的代码**中，

您在此处将 edittext 值设置为空`etCountry.setText("");`。但是您在 Switch case 中再次设置该值。

**开关盒**

```
 case R.id.spcountry:
    etCountry.setText(parent.getItemAtPosition(position).toString());//Here is where you setting the edittext value again
    //Do you stuff here if you dont want default text
    break; 
```

**编辑**

查找您设置 etCountry 值的位置。去`Find-> or Press Ctl+F`。输入 etCountry 搜索它，您将找到设置值的位置。

希望它有帮助。

# matlab - 带有 scilab 的西门子之星

> ID：12950321
> 
> 赞同：0
> 
> 时间：2012-10-18T08:32:19.003
> 
> 标签：matlab, scilab

我正在尝试用 Scilab 绘制[siemens 星](http://en.wikipedia.org/w/index.php?title=File%3aSiemens_star.svg&page=1)，但我无法完成。

知道为什么以下代码不起作用吗？

```
t = 0:.001:2*%pi;
xc = 4;
yc= 4;
r =2 ;
n = 1:length(t)/32 : length(t);
v =0:.001:r;
for k =1:length(n)
    if modulo(k,2) ==0 then
           for a=1:length(t)
           for b =1:length(v)
               x(a) = xc+ (r-v(b)) *cos(t(a));
                y(a) = yc+ (r-v(b))* sin(t(a));
               set(gca(),"auto_clear","off")  
               plot(x,y,"black");
           end;
       end;
   else 
     x=xc;
     y=yc;
 end;
end; 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:01:28.937

我知道你已经用不同的方式解决了这个问题，但值得注意的是，这个`plot`调用非常昂贵，你试图在这三层嵌套循环中调用它 4e8 次。

如果您减小循环的大小，它可以正常工作。仍然需要很长时间，是的，绘制实心块比一系列线条更有效:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:57:41.827

感谢 xenoclast 的建议，但这是我的代码，我认为它很短：

```
plot2d(0,0,-1,"030"," ",[-2,-2,2,2]);
n=16 // number of bands 
for i=1:n
   xfarc(-1.5,1.5,3,3,2*i*(180/n)*64,64*(180/n));
end 
```

# xslt - 将 NodeList 插入 XSLT 输出

> ID：12950323
> 
> 赞同：0
> 
> 时间：2012-10-18T08:32:34.260
> 
> 标签：xslt, xslt-2.0, saxon

我将 NodeList 作为参数传递给 XSLT（如果有任何区别，我使用 SaxonB 9.1/XSLT 2）。

我想要做的是将节点列表中的所有元素/值插入到 XSLT 输出（即 XML 文件）中。

当我在下面做时，它只打印节点的文本值（即它根本不生成 XML 元素）

```
<xsl:param name="NL" />
.    <xsl:template match="/">
.          <xsl:value-of select="$NL" />
.     </xsl:template>
<xsl:stylesheet> 
```

我可以使用 XPath 访问特定元素，即。$NL/节点 1。为了在输出中包含所有 NodeList 的 XML 元素和值，我需要做什么？

我也尝试像下面这样循环，但它只打印 NOdeList 的“顶级”元素 - 它不包括这些元素的任何子节点。

```
<xsl:for-each select="$NL/*">
.   <xsl:element name="{./name()}">
.       <xsl:value-of select="./text()"/>
.   </xsl:element>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:38:42.293

`<xsl:value-of>`给你字符串值，你可能想用它`<xsl:copy-of>`来代替。

# iphone - 使用 Blue Marble Drop 在 Google/Apple 地图上显示多个用户位置

> ID：12950326
> 
> 赞同：0
> 
> 时间：2012-10-18T08:32:46.587
> 
> 标签：iphone, ios, google-maps, ios5, mapkit

所以我需要在这里做的是，我需要在地图上显示两个用户位置，并使用默认蓝色大理石掉落。

任务是，用户 A 将每 5-10 秒将当前位置坐标上传到网络服务器，从那里用户 B 将每 5-10 秒拉出该位置。因此，在 MKMapView 上，用户 B 将使用默认位置注释显示他自己的当前位置，但我还需要使用一些注释在用户 B 的 mapView 上显示用户 A 的位置。

现在我不能使用 Pin Annotation，因为该位置将每 5-10 秒更新一次。必须为第二个用户的拉动位置显示默认用户注释（蓝色大理石滴），以便用户可以知道第二个用户的位置不是静态的，而是移动的。Pin Annotation 暗示该位置是静态的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:32:29.167

```
-(void)updateLocation
{// this will update your location
    NSString *latitude = @"0.0";
    NSString *longitude=@"0.0";
    MyAnnotation *ann = [[MyAnnotation alloc] initWithLatitude:latitude Longitude:longitude];
    [self.theMapView removeAnnotations:[self.theMapView annotations]];
    [self.theMapView performSelectorOnMainThread:@selector(addAnnotation:) withObject:ann waitUntilDone:YES];

    MKCoordinateRegion region = MKCoordinateRegionMake(CLLocationCoordinate2DMake(0.0, 0.0), MKCoordinateSpanMake(0.1f, 0.1f));
    [self.theMapView setRegion:region];

}

- (MKAnnotationView *) mapView:(MKMapView *)mapView1 viewForAnnotation:(id <MKAnnotation>) annotation{

    // if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;
    // try to dequeue an existing pin view first
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKAnnotationView *pinView = [[MKAnnotationView alloc]
                                  initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    pinView.image = [UIImage imageNamed:@"BlueMarbleDrop"];

    pinView.annotation = annotation;
    return pinView;
} 
```

![这是 BlueMarbleDrop.png](../Images/8326782760a3f70ca7f5703046077a38.png)

# php - 如何在php中播放音频文件？

> ID：12950330
> 
> 赞同：0
> 
> 时间：2012-10-18T08:32:51.173
> 
> 标签：php

我想使用 PHP 脚本播放 MP3 文件。在哪里存储音频文件以及如何在 PHP 中给出路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:35:04.540

恐怕您不能直接在 PHP 中执行此操作。您必须使用 HTML5 音频或 Flash。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:37:16.563

您需要使用 javascript 或嵌入它来播放 mp3 客户端`<embed src="file.mp3">` 您可以将文件路径存储为 PHP 中的变量

```
$soundfile = "file.mp3"; 
```

然后吐出一些标记

```
echo "<embed src =\"$soundfile\" hidden=\"true\" autostart=\"true\"></embed>"; 
```

Tho，我不确定您是否可以使用 embed 播放 .mp3 文件格式。瓦应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:37:02.137

PHP 是一种服务器端编程语言。您可以使用它将文件的信息和内容（例如通过表单上传）移动到您的服务器，但播放音频是客户端的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:39:51.550

用这个：

[播放器](http://www.jplayer.org/latest/developer-guide/#jPlayer-constructor)

或者

[声音管理器2](http://www.schillmania.com/projects/soundmanager2/)

这都是基于 javascript 和 html5 的。不过，您可以使用 php 控制其播放列表，具体取决于您如何实现它。

# jquery - 下拉列表获取非选定项目的文本

> ID：12950337
> 
> 赞同：1
> 
> 时间：2012-10-18T08:33:37.270
> 
> 标签：jquery, jquery-selectors

我在同一个容器中有*多个下拉列表*，它们的第一项是“任何”选项。我正在寻找选择的单个选项的文本，或者如果选择“任何”（值 = 0），则获取该列表中选项的 REST OF 数组（但不是“任何”选项） . 序列化当然不起作用，因为我正在寻找某些列表中的未选择选项。

在我的简单测试中，以下内容可用于在一次选择中获取未选择的选项文本的文本：

```
var opts = $('select > option:not(:selected)').map(function() { return this.text; }).get(); 
```

但是当我翻译它以支持与我的容器中一样多的选择（一个未知数）时，我遇到了麻烦。map( .. ).get() / array concat 对我来说是最明显的方式，循环/推送似乎很乱（即使它只是在 jquery 中隐藏了相同的过程）

```
 var val = [];
    jQuery("select :selected", "#container").each(function () {
        if ($(this).val() == 0) { // "any"
            // _val.concat($(this).siblings().map(function() {return this.text; }).get()); // didn't work, even though siblings matches everything OTHER THAN the selected item
            _val.concat($('option:not(:selected)', $(this).parent()).map(function() { return this.text; }).get()); // didn't work either, even though this is all the options not selected mapped to an array
            //for (var i=0;i<$(this).siblings().length-1;i++) _val.push($(this).siblings().get(i).text()); // no; even though it is a <HTMLOptionElement>; ignore the potential bug in i if you spot it, it doesn't affect me!
        } else {
            _val.push(this.text); //$(this).text());
        }
    });
    _val.push(jQuery("input","#container").val());
    alert(_val.join(" ").toLowerCase()); // all my drop downs + my fields 
```

像往常一样，这将是一些愚蠢的小东西，对我来说太明显了（而且这里已经很晚了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:50:46.407

这是我想出的，对我来说是一个解决方案：

```
 var _val = [];
    jQuery("select", "#container").each(function() {
        if ($(this).val() == 0) {
            jQuery.merge(_val, $(this).find('option:not(:selected)').map(function() { return this.text.toLowerCase(); }).get());
        } else {
            _val.push($(this).find('option:selected').map(function() { return this.text.toLowerCase(); }).get());
        }
    });
    _val.push(jQuery("input","#container").val().toLowerCase()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:54:02.403

我已将您的脚本修改为：

```
var val = [];

jQuery("select", "#container").each(function() {
    if ($(this).val() == 0) {
        val.push($(this).find('option:not(:selected)').map(function() {
            return this.text;
        }).get());
    } else {
        val.push($(this).find('option:selected').map(function() {
            return this.text;
        }).get());
    }
});

alert(val.join(", ").toLowerCase()); 
```

请参阅此[FIDDLE](http://jsfiddle.net/mTaVH/1/)以检查它是否符合您的预期。

# reflection - 如何使用反射实现或模拟 Go 接口？

> ID：12950346
> 
> 赞同：2
> 
> 时间：2012-10-18T08:33:57.113
> 
> 标签：reflection, mocking, go, stub, stubbing

我想用反射实现 Go 接口以生成模拟和存根。但是如果我查看[反射](http://golang.org/pkg/reflect/)包，我不知道该怎么做（也许不可能）。

示例：测试 func 调用[ResponseWriter](http://golang.org/pkg/net/http/#ResponseWriter)`WriteHeader(404)`：

```
type ResponseWriterMock struct {                              //
  status int                                                  //
}                                                             // How to replace
func (*ResponseWriterMock) Header() Header {}                 // this block with 
func (*ResponseWriterMock) Write([]byte) (i int, e error) {}  // a reflectivly 
func (m *ResponseWriterMock) WriteHeader(status int) {        // generated mock? 
  m.status = status                                           //  
}                                                             //
responseWriterMock := new(ResponseWriterMock)

funcToTest(responseWriterMock)

if responseWriterMock.status != 404 {
    // report error
} 
```

使用 RhinoMocks (C#) 我会这样写：

```
var responseWriterMock = MockRepository.GenerateMock<ResponseWriter>();

funcToTest(responseWriterMock);

responseWriterMock.AssertWasCalled(rw => rw.WriteHeader(404)); 
```

如何使用反射实现 Go 接口？

**附录**

[看来今天是不可能了。](http://code.google.com/p/go/issues/detail?id=4146)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-22T19:14:33.280

不幸的是，由于语言的静态特性，反射包有点受限，无法在运行时创建动态对象。这可能永远不可能。

我可以提出一些解决方案——所有这些都涉及在设计时创建任何存根/模拟。

1.  手动编写你的模拟。

    我见过人们走这条路，一旦代码库变得更大，它很快就会变得难以忍受。

    一般来说，这个想法是编写一个实现你的接口的结构。在每个方法中，您添加的代码会增加一些计数器（以跟踪调用），并且通常会返回一个已硬编码或作为结构配置提供的值。

2.  使用[证明](https://github.com/stretchr/testify)工具包。

    在撰写本文时，这似乎是提供模拟支持的最受欢迎的项目。然而，由于该项目提供了其他功能，因此有多少喜欢是由于模拟功能本身造成的。

    我没有使用过这个工具包，也无法详细分析它是否有用。

    查看自述文件，它似乎采用了一种与手动模拟非常相似的方法（如上所述）。它在顶部提供了一些帮助代码，但仍然需要手动输入伪造的方法。然后通过字符串指定方法来完成测试中的存根，这违背了 Go 语言的静态特性，并且可能对某些用户来说是个问题。

3.  使用 Go 的官方[模拟](https://github.com/golang/mock)工具。

    自从我上次写这篇文章以来，这个工具似乎已经流行起来。此外，与官方 Go 项目一样，可以预期该工具将很快采用任何新的 Go 功能。它对 go 模块的支持就是一个很好的例子，而其他工具则落后。

    它确实采用了一种特定的模拟方法。您需要在测试代码的开头指定您的测试期望。在测试结束时，框架会检查是否满足所有期望。意外调用会导致框架测试失败。

    如果您使用的是像[Ginkgo](https://github.com/onsi/ginkgo)这样的自定义测试框架，那么干净地集成可能会很棘手。在我的项目中，我编写了辅助函数来弥合差距。

    虽然它确实为您生成了假方法，但它生成的断言和期望方法采用`interface{}`类型。这允许框架提供更高级的参数匹配器，但也意味着您需要确保以正确的顺序传递正确数量的参数。

    以我的经验，用这个工具编写的测试往往更大，有时阅读起来也更复杂。从好的方面来说，他们经常更彻底地测试事物并且更具表现力。

4.  使用[造假](https://github.com/maxbrunsfeld/counterfeiter)工具。

    该工具已在 Cloud Foundry 生态系统中大量使用，并已证明自己是一个可行的选择。

    它允许您跟踪调用给定方法的次数、用于调用该方法的参数，并使用自定义实现来伪造整个方法或指定要返回的结果值。

    使它成为一个不错选择的原因是它会产生非常明显的假货。开发人员不需要使用字符串名称来指定方法，也不需要记住参数的顺序和数量。生成的辅助方法与原始辅助方法非常相似，具有正确类型和顺序的参数。

* * *

我上面提供的一些选项要求您运行命令行工具来为您的模拟生成源代码。随着需要模拟的接口数量迅速增长，您可以使用一个很酷的技巧来跟踪所有内容。

您可以利用`go:generate`Go 中的功能轻松生成所有存根/伪造品，而无需调用任何命令参数或为每个接口手动运行该工具。

您需要做的就是`go:generate`在包含您的界面的文件中添加正确的注释。

**嘲笑**

```
//go:generate mockgen -source person.go

type Person interface {
  Name() string
  Age() int
} 
```

**造假者**

```
//go:generate counterfeiter ./ Person

type Person interface {
  Name() string
  Age() int
} 
```

然后，您可以在项目的根目录中运行该`go generate ./...`命令，所有存根/伪造文件都将为您重新生成。如果您正在与多个合作者一起处理一个项目，这可能是一个救命稻草。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:00:01.443

据我所知和[这个相关问题](https://stackoverflow.com/questions/12397557/can-i-create-a-new-function-using-reflection-in-go)的答案，不可能在运行时创建新类型。

您可能想尝试应该支持在其宇宙中定义新类型的[`go-eval`包。](https://github.com/sbinet/go-eval)

# css - 仅使用 2 个 div 的 3 列 css 布局

> ID：12950350
> 
> 赞同：0
> 
> 时间：2012-10-18T08:34:13.280
> 
> 标签：css

我正在尝试将页面修复为具有 3 列。我正在尝试处理的内容只有 2 个 div。一个只影响内容的最后一部分，另一个影响整个内容。

基本上这是它现在的样子：

> 这是第一个内容-------这是第二个内容
> 
> ```
>  This is the third content 
> ```

我一直在尝试将第三个内容推到第三列。我试过使用 float right，它确实移到了第三列，但低于其他内容。我也不能对 margin-top 使用负值，因为如果调整窗口大小，这将与其他内容重叠。我需要发生的是这样的事情：

> ----这是第一个内容----这是第二个内容----这是第三个内容

我相信我遇到的一个大问题是我不允许编辑页面的 html 文件，所以我正在处理的只是 css 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:37:27.690

像这样的代码：

```
//Left:
float:left;

//MAIN:
margin-left: 20em; //these will define the width
margin-right: 20em;

//Right:
float:right; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:38:10.123

我认为您应该尝试在名为 Firebug [https://addons.mozilla.org/en-us/firefox/addon/firebug/](https://addons.mozilla.org/en-us/firefox/addon/firebug/)的 Firefox 中使用此插件，因为它会显示您在 CSS 中更改的所有内容在您的浏览器上实时显示，以便您在获得正确视图时可以再次更改它。

在您的情况下，我认为您应该在尝试正确浮动之前尝试检查 div 的大小（宽度和高度）。因为如果宽度不能同时处理它们，浮动右侧将不起作用。

# ios6 - 如何为横向左侧和横向右侧设置状态栏方向？

> ID：12950352
> 
> 赞同：0
> 
> 时间：2012-10-18T08:34:18.580
> 
> 标签：ios6, orientation

嗨，我开发了一个 iPad 应用程序，它将完全以横向模式运行，然后在 ios 6 中安装了相同的应用程序，它被迫以纵向模式运行，所以我在我的代码中添加了一些东西，通过这些东西我可以在 ios6 和横向模式下运行我的应用程序较低的版本。但我的问题是，在我旋转之后，我推到下一个视图，横向右侧变成横向左侧。如果我不旋转，那么没问题，它可以完美运行。即使我也旋转它应该可以完美地工作，请帮助我做到这一点。

鉴于负载我给出了以下几行。

```
 - (void)viewDidLoad {
    [super viewDidLoad];
if (IOS_OLDER_THAN_6)
       [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO];
       //[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];
} 
```

然后我用下面的行替换了应该自动旋转。

我将检查 iOS 版本，如果它小于 6 我在下面添加的行

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||(toInterfaceOrientation == UIInterfaceOrientationLandscapeRight); 
```

}

如果 iOS 版本为 6 及以上，我将给出以下代码行

```
 -(BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

在上面的代码中，我提到它应该同时支持landscapeleft 和landscape right，但是在viewDidLoad 中我只提到了landscape left，所以这就是问题所在。有人指导我为横向左侧和横向右侧提供状态方向。甚至尝试在两行中给出两个方向，但没有改变，所以我评论了一个。这就是我的问题的原因。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:11:52.180

你不需要给

`[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO];` 让您的状态栏旋转。这两位代表

```
-(BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

就足够了。此外，当我在模拟器上测试应用程序时，它无法正常工作，但是当我在设备上运行相同的应用程序时，方向工作正常。因此，一旦尝试运行您在 iOS6 设备上创建的应用程序。

# email - 没有 Kerberos 的电子邮件客户端的 GSSAPI

> ID：12950357
> 
> 赞同：0
> 
> 时间：2012-10-18T08:34:35.410
> 
> 标签：email, kerberos, thunderbird, gssapi

是否可以在不使用 Kerberos 系统的情况下使用 GSSAPI 身份验证机制？

我的意思是 GSSAPI 支持例如非常接近 Kerberos 的 SPKM。例如有可能使用它吗？

我不想使用 Kerberos 的主要原因 - 因为它需要完成复杂的先决条件，用户可能不太容易完成，所以我需要在这里替代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:16:40.760

是的，你可以**但是**

1.  您的 GSS-API 需要您支持该机制
2.  您的 SASL 实现需要与 GSS-API 和该机制进行交互

你愿意写一个 MIT/Heimdal 和 Cyrus SASL 插件吗？

# android - 选项卡和片段图像之间的空白

> ID：12950362
> 
> 赞同：0
> 
> 时间：2012-10-18T08:34:46.343
> 
> 标签：android, android-layout

我正在开发我的应用程序的 GUI，并且我使用了 Actionbar sherlock 以及选项卡和片段。有白线（选项卡和图像之间的间隙）我正在尝试删除它，但我不能。它只显示在较低的屏幕尺寸尺寸（小于 4 英寸）上。它没有显示在 Galaxy Nexus 上。 ![在此处输入图像描述](../Images/b99a15221bd92f6f2ff2c69f118c6afe.png) 这是我的片段 XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:src="@drawable/promo" />
<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" />
<ListView
    android:id="@+id/lv1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button2"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/imageView1" >
</ListView>
<ImageView
    android:id="@+id/imageView2"
    android:layout_width="100dip"
    android:layout_height="50dip"
    android:layout_above="@+id/lv1"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:src="@drawable/mid_bar" />
<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/imageView2"
    android:layout_marginRight="35dp"
    android:layout_marginTop="14dp"
    android:src="@drawable/play_button" />
<TextView
    android:id="@+id/tv1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/imageView2"
    android:textColor="@android:color/black"
    android:textSize="14dp"
    android:textStyle="bold" 
    android:paddingLeft="10dip"/> 
```

# asp.net - 使用 dropdowm 列表更改 asp.net 网站语言

> ID：12950367
> 
> 赞同：1
> 
> 时间：2012-10-18T08:35:02.497
> 
> 标签：asp.net, asp.net-mvc-2

我正在尝试在 asp.net 中学习本地化。我正在尝试在从下拉列表中选择语言时更改标签文本和按钮标题。我搜索了示例代码并使用它们。但它不起作用。不使用下拉菜单并使用语句设置语言`Thread.CurrentThread.CurrentCulture = new CultureInfo("hi-IN");` 。我已经为英语和印地语生成了资源文件。

给出了代码和屏幕图像 ![在此处输入图像描述](../Images/79854acfd102d65bf6a32b08050b52ed.png)

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    listvalue = DropDownList1.SelectedValue;
    InitializeCulture();
}
 protected override void InitializeCulture()
{

    if (listvalue != null)
    {
        String selectedLanguage = listvalue;
        UICulture = selectedLanguage;
        Culture = selectedLanguage;
        Thread.CurrentThread.CurrentCulture = new CultureInfo(listvalue);

        /*Thread.CurrentThread.CurrentCulture =
            CultureInfo.CreateSpecificCulture(selectedLanguage);
        Thread.CurrentThread.CurrentUICulture = new
            CultureInfo(selectedLanguage);*/
    }
    base.InitializeCulture();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:30:46.360

这行不通。更改初始化文化逻辑以从会话/cookie 或类似内容中读取文化信息，然后更改下拉列表的事件处理程序以将所选值写入会话/cookie，然后执行 Response.Redirect()。

InitializeCulture 在下拉列表的事件处理程序之前执行。

# c# - C# XAML 将 Grid 实例传递给其他类

> ID：12950370
> 
> 赞同：0
> 
> 时间：2012-10-18T08:35:07.630
> 
> 标签：c#, xaml, winrt-xaml

我有一个简单`Grid`的`Image`命名 TestImage ，我需要将该 Grid 实例传递给其他类。另一个类会找到 TestImage 并且它会改变`Source`。

当我尝试`Grid`从 XAML 的代码隐藏访问时，它是可以的，但是当我尝试将实例传递`Grid`给其他类时，我无法访问那里的 TestImage。

**测试页.xaml.cs**

```
var otherClass = new OtherClass();
otherClass.DoSomeStuff(this.GridName); 
```

**其他类.cs**

```
public void DomeSomeStuff(Grid gridInstance)
{
    gridInstance.TestImage.Source = ....;
} 
```

我会收到错误消息：

> “Windows.UI.Xaml.Controls.Grid”不包含“TestImage”的定义，并且找不到接受“Windows.UI.Xaml.Controls.Grid”类型的第一个参数的扩展方法“TestImage”

我理解这个错误，但我不知道如何解决它。

你能帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:39:10.440

试试这个：

```
public void DomeSomeStuff(Grid gridInstance)
{
    var image = VisualTreeHelper.GetChild(gridInstance, 0) as Image;
    // or var image = gridInstance.Children[0] as Image;
    // or var image = gridInstance.FindName("TestImage") as Image;
    if (image != null)
        image.Source = ...;
} 
```

# vim - vim：如何在启动时在特定窗口上运行命令

> ID：12950374
> 
> 赞同：0
> 
> 时间：2012-10-18T08:35:16.957
> 
> 标签：vim, vim-plugin

我在 Windows 上使用 gvim 7.3。

我正在使用[Tail Bundle](http://www.vim.org/scripts/script.php?script_id=1714)插件，但为了克服 Windows 的限制，我需要在启动时运行一些命令......但只能在插件打开的窗口/缓冲区上运行，而不是在其他插件上。

这个插件打开一个预览窗口，如果我 ls，我没有看到我用这个插件打开的文件的缓冲区......所以我打算使用 autocmd 以某种方式将动作限制在那个缓冲区似乎是不可行的。

有没有办法只在这个插件打开的特定预览窗口上运行命令？我想是的，但我还是 vim 的新手......

* * *

编辑：好的，感谢Kev，这部分已经解决，我对主要问题保持开放......

另外，作为附录，我在启动时运行一些命令

```
 -c "tabn" 
```

这很好用，但是当我尝试运行`-c "<C-W> H"`那些不起作用的东西时，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:45:37.927

`-c`选项只接受一个`ex`命令（AKA 冒号命令）。
您需要将其重写为`-c 'exe "norm \<C-w>H"'`
另一种方法是`-c 'wincmd H'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:36:01.407

这个插件使用一个预览窗口（参见 参考资料`:h preview-window`）来显示它正在跟踪的文件。不幸的是，我认为打开预览窗口时不会触发任何事件，因此唯一的方法是编辑插件本身并在打开窗口时添加您的命令。

# javascript - Javascript 对象到格式化字符串

> ID：12950375
> 
> 赞同：8
> 
> 时间：2012-10-18T08:35:22.673
> 
> 标签：javascript, json, object

**如何将对象输出为具有格式的可读字符串（结构类似于 with `<pre>`）？**

没有 jQuery 可能。

我的对象看起来像这样使用`console.log`.

```
Object
   title: "Another sting"
   type: "tree"
   options: Object
      paging: "20"
      structuretype: "1"
   columns: Object
      ...
   description: "This is a string"
   ... 
```

将其转换为结构化字符串的最佳方法是什么？

**我的尝试：**

我尝试使用`stringify()`来获取 JSON 结构。然后我可以编写自己的解析器，但也许已经有任何实现了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T09:30:05.577

`JSON.stringify`包括一个格式化参数：

> JSON.stringify(value[, replacer [, space]])
> 
> space 参数可用于控制最终字符串中的间距。如果它是一个数字，则字符串化中的连续级别将由这么多空格字符（最多 10 个）缩进。如果它是一个字符串，连续的级别将由这个字符串（或它的前十个字符）缩进。
> 
> 使用制表符模仿标准的漂亮打印外观
> 
> [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

这足以满足您的需要吗？例如尝试：

```
 JSON.stringify( object, null, 2 ); 
```

否则，[http://code.google.com/p/google-code-prettify/](http://code.google.com/p/google-code-prettify/)是一个独立的 JSON 到 HTML 漂亮的打印机。我相信被stackoverflow和谷歌代码使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:57:03.710

同时我想出了这个功能，也许有人可以使用它：

```
addIndent: function(nSpaces) {
         var strOutput = '';
         for(var i = 0; i < nSpaces; i++) {
            strOutput += '--';
         }
         return strOutput; 
      }

parseObjToStr: function(oObject, nLevel) {
         var that = this;
         var strOutput = '';
         nLevel = nLevel || 0;

         for(var oEl in oObject) {
            if(typeof oObject[oEl] === 'object' || Object.prototype.toString.call( oObject[oEl] ) === '[object Array]') 
            {
               strOutput += that.addIndent(nLevel) + oEl + "<br />";
               strOutput += that.parseObjToStr( oObject[oEl], nLevel+1);
            } 
            else 
            {
               strOutput += that.addIndent(nLevel) + oEl + " = " + oObject[oEl] + "<br />";
            }
         }
         return strOutput;
      } 
```

# html - Opacity IE8 仅适用于本地主机

> ID：12950376
> 
> 赞同：2
> 
> 时间：2012-10-18T08:35:33.993
> 
> 标签：html, internet-explorer, opacity

这让我发疯了——我一直试图让不透明度在 IE8（和 IE < 7）中工作，所以我添加了 IE 特定的 css-property `-ms-filter`（以及`filter`旧版 IE）。使用 Visual Studio 2010 的内置开发服务器在 localhost 上运行效果很好，或者只是从磁盘打开 html 文件。

[但是，在查看它（或使用http://www.quirksmode.org/css/opacity.html](http://www.quirksmode.org/css/opacity.html)`filter`之类的任何其他页面）时，我没有得到不透明度 - 只是纯色。

我在这里做了一个演示[http://jsfiddle.net/3nvN9/9/](http://jsfiddle.net/3nvN9/9/) - 在 jsFiddle 中查看 div 时，div 对我来说是纯黑色的，但是如果我使用相同的代码（这就是为什么我把它全部保存在html) 并从 localhost 或磁盘查看它我可以通过 div 看到文本。

以下是示例页面的完整代码：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            div {
                position: absolute;    
                top: 0;            
                height: 150px;
                width: 150px;
                background-color: black;
                opacity: .3;
                -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
                filter: alpha(opacity = 30);
            }
        </style>
    </head>
    <body>
        <p>Can you see me?</p>
        <div></div>
    </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:35:33.993

写这个问题时，我意识到这与 IE 的安全设置有关——尤其是因为我在一个可能完全被锁定的公司网络上。

通过设置我终于发现是导致问题的*二进制和脚本行为*设置。由于`filter`s 是 ActiveX 的一部分，它们也会被禁用。

找到设置后，我尝试用谷歌搜索它，发现这个页面很好地解释了它。[http://paintincode.blogspot.de/2012/06/css-opacity-ie-filter-binary-and-script.html](http://paintincode.blogspot.de/2012/06/css-opacity-ie-filter-binary-and-script.html)。我只希望在知道设置名称之前能够找到它。=)

# java - 仅在应用程序内部的系统剪贴板

> ID：12950381
> 
> 赞同：0
> 
> 时间：2012-10-18T08:35:45.130
> 
> 标签：java, security, awt, clipboard

我有一个 Swing 应用程序，我想将一些文本复制到系统剪贴板。我这样做

```
Clipboard systemClipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
StringSelection dataToClipboard = new StringSelection(stringToCopy);
systemClipboard.setContents(dataToClipboard, null); 
```

但它只存在于应用程序内部，我可以将其粘贴到其中的任何文本字段中，但是当我尝试在网络浏览器中这样做时，它什么也没有粘贴。

我还尝试实现 ClipboardOwner 接口并传递它的引用而不是传递它`null`，但这并没有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:41:15.857

> 但是当我尝试在网络浏览器中这样做时，它什么也没有粘贴。

对应用程序进行数字签名，或在沙盒中使用等效的 JNLP API 服务。

有关更多详细信息，另请参阅[此答案](https://stackoverflow.com/a/8513818/418556)（并将链接返回到 OTN 的线程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:46:50.287

好的，我再次编写了整个模块，这次它可以工作了。

感谢您的时间。

PS。“在网络浏览器中”是指其中的地址栏；

# javascript - 商店的 Extjs 问题

> ID：12950385
> 
> 赞同：2
> 
> 时间：2012-10-18T08:36:15.613
> 
> 标签：javascript, extjs, load

我有一个 Ext.Data.Store。而且我有一个函数，需要在加载商店时调用一次。只有一次。起初我这样做：

```
function invokeMe() {
alert("!");
}

actionTemplateStore.on('load', function () {
    invokeMe();
} 
```

但是这个解决方案有一个问题：我真的需要一次调用“invokeMe”-function

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:39:42.707

```
actionTemplateStore.on('load', function () {
    if (!actionTemplateStore.actionInvoked) {
        invokeMe();
        actionTemplateStore.actionInvoked = true;
    }
} 
```

**更新**：正如劳埃德所说，您也可以使用 {single:true} 选项。

```
actionTemplateStore.on('load', yourFunction, {single:true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:39:15.477

试试这个：

```
function invokeMe() {
alert("!");
}

actionTemplateStore.on('load',function () {
    invokeMe();
},this,{single: true}); 
```

我们传入`this`作用域和一个配置对象，`single: true`使其只执行一次。

你也可以这样做：

```
var onLoad = function(store) {
    alert('!');
    store.un('load',onLoad);
}

actionTemplateStore.on('load',onLoad); 
```

# java - KSOAP2 -信封.bodyIn 或信封.getResponse() 给出一个肥皂错误

> ID：12950388
> 
> 赞同：0
> 
> 时间：2012-10-18T08:36:25.070
> 
> 标签：java, android, web-services, jax-ws, ksoap2

我正在尝试在 Ksoap2 库的帮助下从我的 android 应用程序访问托管在 tomcat 服务器中的 JAX-WS Web 服务。当我运行该应用程序时，它在信封.bodyIn 调用中抛出了一个肥皂错误（打印 1.1 ;-)） .

在logcat中，我得到：找不到{http://titpl.com/service/UserLogon../}UserLogonOperation..的调度方法。

如果有人可以提供任何建议，我将不胜感激。

我的安卓代码：

```
private final String NAMESPACE ="http://titpl.com/service/UserLogon/";

private final String URL="http://10.0.2.2:8085/PrepaidMobileServer/UserLogonService?wsdl";

private final String SOAP_ACTION ="http://titpl.com/service/UserLogon/UserLogonOperation";

     final String METHOD_NAME = "UserLogonOperation";

    Login_Res login_res=new Login_Res();
    Log.i("WSC ACT", "inside the method");

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo cardprop = new PropertyInfo();

    cardprop.setName("login_req");
    cardprop.setValue(login_req);
    cardprop.setType(Login_Req.class);

    request.addProperty(cardprop);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.dotNet = false;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {

        System.out.println(login_req.getNric());
        System.out.println(login_req.getPassword());
        System.out.println(request.getProperty("login_req"));
        androidHttpTransport.call(SOAP_ACTION, envelope);
        System.out.println("------------------------------1------------------------------");
        //get the response
        //SoapObject response = (SoapObject) envelope.getResponse();
        //SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
        //SoapObject response = (SoapObject) envelope.bodyIn;

        if (envelope.bodyIn instanceof SoapFault) {
            String str= ((SoapFault) envelope.bodyIn).faultstring;
            Log.i("", str);
            System.out.println("------------------------------1.1-------------------------------");

        } else {
            SoapObject response  = (SoapObject) envelope.bodyIn;
            Log.d("WS", String.valueOf(response));
            System.out.println("------------------------------1.2-------------------------------");
            Log.i("WSC:UserLogonOperation", response.toString());
            login_res.setNric(response.getProperty(1).toString());
            login_res.setStatus(response.getProperty(2).toString());
            login_res.setDesc(response.getProperty(3).toString());

        }

    } catch (Exception e) {
        Log.i(" Exception in WSC:UserLogonOperation", e.toString());
        e.printStackTrace();
    } 
```

我的 WSDL：

```
 <!--
Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2-hudson-740-.
-->
<wsdl:definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://titpl.com/service/UserLogon" xmlns:ns0="http://titpl.com/service/UserLogon/request" xmlns:ns1="http://titpl.com/service/UserLogon/response" name="UserLogon" targetNamespace="http://titpl.com/service/UserLogon">
<wsdl:types>
<xsd:schema>
<xsd:import namespace="http://titpl.com/service/UserLogon/request" schemaLocation="http://localhost:8085/PrepaidMobileServer/UserLogonService?xsd=1"/>
<xsd:import namespace="http://titpl.com/service/UserLogon/response" schemaLocation="http://localhost:8085/PrepaidMobileServer/UserLogonService?xsd=2"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="GetUserLogonRequest">
<wsdl:part name="parameters" element="ns0:Login_Req"/>
</wsdl:message>
<wsdl:message name="GetUserLogonResponse">
<wsdl:part name="parameters" element="ns1:Login_Res"/>
</wsdl:message>
<wsdl:portType name="UserLogonPortType">
<wsdl:operation name="UserLogonOperation">
<wsdl:input name="GetUserLogonRequest" message="tns:GetUserLogonRequest"/>
<wsdl:output name="GetUserLogonResponse" message="tns:GetUserLogonResponse"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="UserLogonSoap" type="tns:UserLogonPortType">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<wsdl:operation name="UserLogonOperation">
<soap:operation soapAction=""/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="UserLogonService">
<wsdl:port name="UserLogonPortType" binding="tns:UserLogonSoap">
<soap:address location="http://localhost:8085/PrepaidMobileServer/UserLogonService"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

日志猫：

```
 0-18 07:28:30.817: I/WSC ACT(1872): inside the method
10-18 07:28:30.817: I/System.out(1872): ------------------------------1-------------------------------
10-18 07:28:31.197: I/System.out(1872): ------------------------------2-------------------------------
10-18 07:28:31.197: I/System.out(1872): as
10-18 07:28:31.197: I/System.out(1872): we
10-18 07:28:31.197: I/System.out(1872): com.android.beans.Login_Req@412d5d08
10-18 07:28:33.647: I/System.out(1872): ------------------------------3-------------------------------
10-18 07:28:33.647: I/(1872): Cannot find dispatch method for {http://titpl.com/service/UserLogon/}UserLogonOperation
10-18 07:28:33.647: I/System.out(1872): ------------------------------3.1-------------------------------
10-18 07:28:33.647: I/System.out(1872): ------------------------------4-------------------------------
10-18 07:28:33.647: I/System.out(1872): -----------------------------null-------------------------------
10-18 07:28:33.667: D/AndroidRuntime(1872): Shutting down VM
10-18 07:28:33.667: W/dalvikvm(1872): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
10-18 07:28:33.697: E/AndroidRuntime(1872): FATAL EXCEPTION: main
10-18 07:28:33.697: E/AndroidRuntime(1872): java.lang.NullPointerException
10-18 07:28:33.697: E/AndroidRuntime(1872):     at com.android.tiwallet.LoginActivity.onClick(LoginActivity.java:91)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at android.view.View.performClick(View.java:3511)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at android.view.View$PerformClick.run(View.java:14105)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at android.os.Handler.handleCallback(Handler.java:605)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at android.os.Looper.loop(Looper.java:137)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at java.lang.reflect.Method.invokeNative(Native Method)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at java.lang.reflect.Method.invoke(Method.java:511)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-18 07:28:33.697: E/AndroidRuntime(1872):     at dalvik.system.NativeStart.main(Native Method)
10-18 07:28:34.237: I/dalvikvm(1872): threadid=3: reacting to signal 3
10-18 07:28:34.317: I/dalvikvm(1872): Wrote stack traces to '/data/anr/traces.txt'
10-18 07:28:36.847: I/Process(1872): Sending signal. PID: 1872 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:57:21.807

从你的网络服务，SOAP_ACTION 应该是这样的

```
 private final String SOAP_ACTION ="UserLogonPortType";
    // equal the line: <wsdl:portType name="UserLogonPortType"> 
```

代替

```
 private final String SOAP_ACTION ="http://titpl.com/service/UserLogon/UserLogonOperation"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:01:37.843

尝试`wsdl`在 URL 中删除：

```
private final String URL="http://10.0.2.2:8085/PrepaidMobileServer/UserLogonService/"; 
```

# scala - JodaTime：用第一天、第二天、第三天等格式化日期

> ID：12950392
> 
> 赞同：9
> 
> 时间：2012-10-18T08:36:35.260
> 
> 标签：scala, jodatime

JodaTime 是否提供此功能？在文档中找不到，也许我错过了什么？[格式化 API 文档](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)没有显示这样的功能。

如果不是，什么，解析结果字符串并与日期匹配，相应地附加 st,nd,th？

看起来很老套，认为像 JodaTime 一样全面和精彩的库（它确实很摇滚 ;-)）会提供这个看似简单的功能。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-06T16:06:51.663

虽然 Joda 没有直接实现这一点，但您不需要外部库，只需求助于这样的简单实现即可。

```
/**
 * Returns the correct suffix for the last digit (1st, 2nd, .. , 13th, .. , 23rd)
 */
public static String getLastDigitSufix(int number) {
    switch( (number<20) ? number : number%10 ) {
        case 1 : return "st";
        case 2 : return "nd";
        case 3 : return "rd";
        default : return "th";
    }
} 
```

为了响应 MHaris，上面的代码产生

```
for (int i = 0; i < 99; i++) {
    System.out.print(i + getLastDigitSufix(i) + ", ");
}

0th, 1st, 2nd, 3rd, 4th, 5th, 6th, 7th, 8th, 9th, 
10th, 11th, 12th, 13th, 14th, 15th, 16th, 17th, 18th, 19th, 
20th, 21st, 22nd, 23rd, 24th, 25th, 26th, 27th, 28th, 29th, 
30th, 31st, 32nd, 33rd, 34th, 35th, 36th, 37th, 38th, 39th, 
40th, 41st, 42nd, 43rd, 44th, 45th, 46th, 47th, 48th, 49th, 
50th, 51st, 52nd, 53rd, 54th, 55th, 56th, 57th, 58th, 59th, 
60th, 61st, 62nd, 63rd, 64th, 65th, 66th, 67th, 68th, 69th, 
70th, 71st, 72nd, 73rd, 74th, 75th, 76th, 77th, 78th, 79th, 
80th, 81st, 82nd, 83rd, 84th, 85th, 86th, 87th, 88th, 89th, 
90th, 91st, 92nd, 93rd, 94th, 95th, 96th, 97th, 98th, 99th 
```

根据[维基百科中的英语序数](https://en.wikipedia.org/wiki/English_numerals#Ordinal_numbers)看起来是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:05:21.873

# java - ViewFlipper 中动画的 OutOfMemory

> ID：12950393
> 
> 赞同：1
> 
> 时间：2012-10-18T08:36:39.127
> 
> 标签：java, android, android-layout, memory, memory-management

我知道有很多关于不同情况下Android中OOM的问题和论坛，但我找不到完整的解决方案。

我有一个活动，用户可以在许多动画之间滚动。因为只有动画应该在滚动时移动，并且在开始时它必须在没有用户交互的情况下移动，所以我使用了一个 ViewFlipper，里面有动画。如下图所示： ![在此处输入图像描述](../Images/cb1a8689c166b0d5595c6cd4f30f0fa6.png)

问题在于，在 3.0 以上的平板电脑和设备上，它会在翻转一些动画并播放它们后抛出 OOM。为了解决问题，我到目前为止所尝试的方法是：

1.  `BitmapFactory.Options`我使用（我按照教程[Loading Large Bitmaps Efficiently tutorial](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) ）缩小了动画图像。我在教程中唯一没有实现的是缓存。
2.  由于动画很多，位图很多，我一次只加载了 3 个动画（当前视图，左侧一个和右侧一个），但是添加和删除位图会使应用程序的速度变慢太多。
3.  我试图让垃圾收集器更快地释放我的图像，方法是手动调用所有可能有帮助的东西：`setCallback(null)`, `setImageDrawable(null)`, `destroy()`, `destroyDrawingCache()` （AdView 的最后 2 个）。我什至尝试`recycle()`过（对于位图），但它导致了其他异常

上述更改后有一些改进，但我仍然**在模拟器 Android 4.x WVGA854 或 WVGA800 上收到 OOM**（经过较长时间）。但即使它没有引发 OOM，内存分析显示 80% 的负载在一开始就有问题的设备上。此外，由于动画删除和添加，所有设备上的用户体验都很糟糕。

我开始认为更多的是架构/设计问题。**可能是模拟器问题？您现在是否比 DDMS 的内存分析器更好？**

我将非常感谢任何建议，我不知道还能尝试什么:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:51:33.673

通常我用它来防止内存不足问题

```
bmp.recycle();
bmp = null;
System.runFinalization();
Runtime.getRuntime().gc();
System.gc(); 
```

我在使用位图后调用它

如果它仍然不起作用，也许你应该在真实设备中尝试它

# wcf - WCF 路由和各种端点

> ID：12950403
> 
> 赞同：2
> 
> 时间：2012-10-18T08:37:15.757
> 
> 标签：wcf, routing, wcf-routing

我有一个小问题，不知道从哪里开始。

我需要提供订阅服务，如果返回订阅后消费者将发送肥皂的唯一地址。它的工作原理是这样的：你在地址[http://foo.org/Subscribe](http://foo.org/Subscribe)上发送一个 SOAP ，作为响应你得到地址[http://foo.org/SubscriptionManager/1](http://foo.org/SubscriptionManager/1)，下一个消费者将得到[http://foo.org /SubscriptionManager/2](http://foo.org/SubscriptionManager/2)等

我如何通过 WCF 实现它？我猜想 WCF 有类似 ASP.Net Routing 之类的东西，我可以在其中路由 [http://foo.org/SubscriptionManager/](http://foo.org/SubscriptionManager/)之类的链接并访问 2 作为参数，但我还没有找到类似的东西。

我期待任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:07:10.437

我的问题是为什么要将用户路由到不同的端点？

在我看来，返回服务 URI 供消费者调用的整个想法并不是一个好的设计。

你在强迫你的消费者做更多的工作——他们必须打一个额外的电话并询问响应只是为了找出他们必须调用的端点。

如果您的要求是在两个服务之间分散负载，您应该提供一个负载平衡端点，然后将请求发送到其他端点。

或者，如果您的要求是根据某些规则将某些用户路由到一个或其他订阅服务，那么您可以查看[WCF-Routing](http://msdn.microsoft.com/en-us/library/ee517423.aspx)。

# sql - 如何解决“控制没有焦点”的问题

> ID：12950412
> 
> 赞同：-3
> 
> 时间：2012-10-18T08:37:44.353
> 
> 标签：sql, ms-access, vba, ms-access-2010

每当我尝试在 MS access VBA 中构建和执行 SQL 查询时，它通常会给出如下错误：

除非获得焦点，否则您无法访问控件的属性或方法。

文本框控件会发生这种情况。

如何解决这个问题？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:11:05.053

这个问题已经贴出来了，你可以在这里找到答案：[MS Access: An error in vba of my form](https://stackoverflow.com/questions/7623686/ms-access-an-error-in-vba-of-my-form)

# c# - 从 WebBrowser 访问 DOM

> ID：12950413
> 
> 赞同：3
> 
> 时间：2012-10-18T08:37:48.007
> 
> 标签：c#, dom, browser, pixelsense

我正在尝试实现一个类似浏览器的小应用程序，它允许我修改查看的网站外观（例如，使链接的字体更大）。它专为 Microsoft Surface 设计，可在巨大的触摸屏上使用。它使用 WPF 作为 UI。

我打算为此任务使用 WebBrowser 控件。但是，文档中有两个名为 WebBrowser 的类。其中一个在`System.Windows.Forms`，另一个在`System.Windows.Controls`。第一个可以访问 DOM 模型，但适用于 Forms 应用程序（如果我理解正确，那绝对不是我所拥有的）。如果您在 xaml 中添加控制器，则默认添加第二个，但它无法访问 DOM。

那么，如何从 Surface 的 WebBrowser 访问 DOM 模型？我对 c# 和 Microsoft 技术非常陌生，所以如果我的问题不清楚或显而易见，我深表歉意。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T20:48:10.260

对于`System.Windows.Controls.WebBrowser`该类，您可以使用 Document 属性。[通过右键单击项目并选择“添加引用”将mshtml](http://msdn.microsoft.com/en-us/library/aa741317%28v=vs.85%29.aspx)引用添加到您的项目中，然后您应该能够将其转换为 mshtml.IHTMLDocument2

```
mshtml.IHTMLDocument2 htmlDoc = webBrowser.Document as mshtml.IHTMLDocument2;
// do something like find button and click
htmlDoc.all.item("testBtn").click(); 
```

# c# - 如何修复我的文本到 pdf 的转换？

> ID：12950415
> 
> 赞同：1
> 
> 时间：2012-10-18T08:37:57.583
> 
> 标签：c#, itextsharp

我使用此代码将我的 TextBox 内容保存为 PDF，但它仅支持英语。它不支持僧伽罗语、泰米尔语、盲文字母。

```
<sfd.Title = "Save As PDF";

        sfd.Filter = "(*.pdf)|*.pdf";

        sfd.InitialDirectory = @"C:\";

        if (sfd.ShowDialog() == DialogResult.OK)
        {
            iTextSharp.text.Document doc = new iTextSharp.text.Document();

            iTextSharp.text.pdf.PdfWriter.GetInstance(doc, new FileStream(sfd.FileName, FileMode.Create));

            doc.Open();

            doc.Add(new iTextSharp.text.Paragraph(textBox1.Text));

            doc.Close();

         }> 
```

你能帮我修一下吗？

![在此处输入图像描述](../Images/1d62d5b14f7ccf303cb5cc5be87c8bd0.png)

这是僧伽罗语文本，不支持此代码请帮助

# android - 如何检查或验证 Enter 键

> ID：12950418
> 
> 赞同：0
> 
> 时间：2012-10-18T08:38:14.170
> 
> 标签：android

如何在android中检查编辑文本的回车键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:42:41.927

您必须在 Activity 中实现 OnKeyListener 并覆盖其 onKey() 方法：

```
 @Override
    public boolean onKey(View view, int keyCode, KeyEvent event) {
    flag = false;

    if (keyCode == KeyEvent.KEYCODE_ENTER) {
        if (event.getAction() != KeyEvent.ACTION_DOWN) {
                         flag = false;
        } else if (event.getAction() != KeyEvent.ACTION_UP) {
                         // do your work on Enter key pressed.
                         flag = true;
        }
    }

    return flag;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:39:31.890

```
final EditText edittext = (EditText) findViewById(R.id.edittext);
edittext.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        // If the event is a key-down event on the "enter" button
        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER)) {
          // Perform action on key press
          Toast.makeText(HelloFormStuff.this, edittext.getText(), Toast.LENGTH_SHORT).show();
          return true;
        }
        return false;
    }
}); 
```

试试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:39:33.373

用于`onKeyListener`检查 Enter 按下

例如。

```
edittext.setOnKeyListener(new OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction()!=KeyEvent.ACTION_DOWN)
                return false;
            if(keyCode == KeyEvent.KEYCODE_ENTER ){
                            //your necessary codes...
                return true;
            }
            return false;
        }
    }; 
```

更多信息，查看[官方文档](http://developer.android.com/reference/android/view/View.OnKeyListener.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T08:43:07.697

我想您有一个保存按钮，并且您想在单击它时进行验证？

```
saveButton.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {
        String textInput = myEditText.getText().toString();
        // do your validation here
    }
}); 
```

# java - 绑定到事件流的线程池，按顺序推送异步事件

> ID：12950420
> 
> 赞同：2
> 
> 时间：2012-10-18T08:38:26.967
> 
> 标签：java, concurrency

我管理一组客户端提供的事件接收器，每个接收器都订阅自己的事件流。每个接收器通常会将数据推送到自己的网络管道中，这意味着将事件推送到接收器时存在可利用的并发性。同时我需要确保正确的事件排序。这是一种天真的方法：

* * *

```
final Set<Sink> sinks = new HashSet<>();
final ExecutorService pool = Executors.newCachedThreadPool(); 
```

* * *

```
eventSource.addListener(new SourceListener() { 
  public void sourceEvent(final Event event) {
    final Sink sink = resolveSink(sinks, event);
    pool.submit(new Runnable() { public void run() { sink.accept(event); }});
}}); 
```

* * *

这不能保证正确订购。如果我的线程池将每个事件队列与单个线程相关联并将我的接受事件任务分派到该特定线程的任务队列，这将是健壮的。我正在寻找一个基本想法或可行方法的草图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:36:42.763

如果您的意思是每个事件都`Sink`应该按照它们发生的顺序处理事件，那么这正是[Actor 模型](http://en.wikipedia.org/wiki/Actor_model)的应用。存在许多用 Java 实现的 Actor 框架，最简单的是我开发的[df4j](https://github.com/rfqu/df4j/tree/master/df4j-core)。

* * *

## 附录

*（作者 Marko Topolnik，评论中的讨论摘要）*

为每个事件流维护一个队列并使用执行器服务。当出现新事件时，提交将队列排入接收器的任务。不得无条件提交任务，但前提是此类任务尚未运行。为确保这一点，请使用在提交任务时设置并在完成时由任务重置的布尔标志（每个事件流一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:42:52.703

为了确保独立性，我将为每个客户端设置一个单线程池。

您可以包装客户端侦听器以在客户端的线程池上触发相同的事件，以便其他代码可以将其视为简单的侦听器。

# javascript - 我的 URL 没有响应带有 json 数据

> ID：12950424
> 
> 赞同：-1
> 
> 时间：2012-10-18T08:38:39.910
> 
> 标签：javascript, json

我尝试使用以下代码从我的 json url 在 javascript 中获取响应：

```
$(document).ready(function(){ 
    //attach a jQuery live event to the button
    $('#getdata-button').live('click', function(){
        alert("get data"); 
        $.getJSON('http://vamdemo2.e-isg.com/vamsyncservices/api/site/GetAllSites?username=Admin&password=password', function(data) {  
            alert(" data alert"+data); //uncomment this for debug
        });
    });
}); 
```

我没有从上面的网址得到任何回复。如果我将网址从[http://vamdemo2.e-isg.com/vamsyncservices/api/site/GetAllSites?username=Admin&password=password](http://vamdemo2.e-isg.com/vamsyncservices/api/site/GetAllSites?username=Admin&password=password)更改为[https://www.googleapis.com/freebase/v1/text/en/ bob_dylan](https://www.googleapis.com/freebase/v1/text/en/bob_dylan)，得到回应。如果我在浏览器中打开这两个 url，两者都有数据。但是，当我尝试使用 javascript 从 url 获取响应时，一个 url 只给出响应。问题出在哪里？？为什么另一个网址没有任何回应？

请给我任何解决方案...提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:38:31.187

我已将您的代码放在我的浏览器中，对我来说，这两个 URL 都不起作用。

即使对于 googleapis.com URL，当我在 chrome 中加载您的代码并按 F12 时，我也会收到此错误：

```
XMLHttpRequest cannot load https://www.googleapis.com/freebase/v1/text/en/bob_dylan. Origin null is not allowed by Access-Control-Allow-Origin. 
```

这是因为 JavaScript 通常不允许在 domain1 上运行并从 domain2 加载 URL。这是设计使然，作为一种安全措施。

如果

-您很高兴在上面更改您的客户端代码并且

-当添加“回调”查询字符串参数时，您可以使您的 vamdemo2.e-isg.com 服务器更改响应

然后

- 有一个解决方案：JSONP

在此处阅读有关如何实现此功能的更多详细信息：

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

# c# - C#从soap webservice消费复杂类型

> ID：12950427
> 
> 赞同：0
> 
> 时间：2012-10-18T08:38:46.573
> 
> 标签：c#, visual-studio-2010, web-services, soap

我在 VS2010 C# 中使用了一个 web 服务。在 WSDL 中有一些复杂类型，其中之一定义为：

```
<element name="dsPageInfo">
  <complexType>
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" name="ttPageInfo">
        <complexType>
          <sequence>
            <element name="PageTitle" nillable="true" type="xsd:string"/>
            <element name="MetaTitle" nillable="true" type="xsd:string"/>
            <element name="MetaDescription" nillable="true" type="xsd:string"/>
            <element name="MetaKeywords" nillable="true" type="xsd:string"/>
          </sequence>
        </complexType>
      </element>
    </sequence>
  </complexType>
</element> 
```

要在 VB 中定义和调用它：

```
Dim webService As New myWeb.wsObjClient()

Dim systemType As String

Dim ds(0) As myWeb.dsPageInfoTtPageInfo

webService.Getpageinfo(systemType, ds) 
```

`Dim ds(0) As myWeb.dsPageInfoTtPageInfo`C# 中 的等价物是什么？

到目前为止，我有：

```
string systemType = "mySysType";
myWeb.wsObjClient webService = new myWeb.wsObjClient();

webSevice.Getpageinfo (
    systemType,
    // complex type goes here); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:49:39.460

这是在 C# 中创建数组的等价物

```
myWeb.dsPageInfoTtPageInfo[] ds= new myWeb.dsPageInfoTtPageInfo[1]

ds[0]= new dsPageInfoTtPageInfo();
webSevice.Getpageinfo (systemType,ds); 
```

# extjs - Extjs Grid 面板 - 使用 hideable=false 隐藏列

> ID：12950428
> 
> 赞同：1
> 
> 时间：2012-10-18T08:38:49.860
> 
> 标签：extjs, extjs4, extjs4.1

我正在使用 Extjs 4.1 网格面板。

我正在寻找一种从网格中隐藏列的方法。我可以使用 setHidden 但随后用户可以从列标题的菜单中再次“取消隐藏”该列。似乎隐藏的属性只是没有削减它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:12:28.510

行。最终我做到了：在网格的“afterrender”事件中：

```
var header = pnl.down("headercontainer");
if(header != null && header["getMenu"] != null)
{
   var menu=header.getMenu();
   menu.on('beforeshow',function(sender,eOpts){

            var menu=sender;
            if(!menu.items.containsKey("columnItem"))
            {
                return;
            }

            var columnsSubMenuItem=menu.items.getByKey("columnItem");
            var columnsCheckboxes=columnsSubMenuItem.menu.items["items"];

            // More code here...
            // See the pseudo code
   });
} 
```

现在我只是遍历列，如果 checkbox.text == column.get_Title() && column.get_Hideable() == true then checkbox.Show() else checkbox.Hide();

（对于伪代码，我很抱歉，我使用的是一个 C# 到 javascript 转换器的 Sharpkit，所以如果我复制粘贴代码，就很难解释了。

注意：您可以对网格的 enableColumnHide 事件执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:05:05.443

使用以下配置列

`hidden: true, hideable: false`

'grid.headerCt.getGridColumns()'

使用上述方法获取所有网格列并使用 hide() 和 show() 显示特定列

这将适用于 Ext js 4.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:50:54.143

您可以在 initComponent 方法中配置 columns 属性，并仅将必要的列插入 this.columns 数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T18:19:26.953

为每个场景重新配置网格。[链接到 api](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-reconfigure)提示

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T16:28:32.013

我在列上使用 setVisible(false | true)。 [文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-method-setVisible)

# assembly - 堆栈纪律大会

> ID：12950431
> 
> 赞同：2
> 
> 时间：2012-10-18T08:38:55.850
> 
> 标签：assembly, stack

所以我正在学习系统期中，并且类似课程的旧期中出现了这个问题，C和汇编代码如下：

```
int gcd(int a, int b)
{
    if(!b)
    {
        return a;
    }
    return gcd(b, a%b);
}

0x08048394 <+0>: push %ebp
0x08048395 <+1>: mov %esp,%ebp
0x08048397 <+3>: sub $0x10,%esp
0x0804839a <+6>: mov 0x8(%ebp),%eax
0x0804839d <+9>: mov 0xc(%ebp),%ecx
0x080483a0 <+12>: test %ecx,%ecx
0x080483a2 <+14>: je 0x80483b7 <gcd+35>
0x080483a4 <+16>: mov %eax,%edx
0x080483a6 <+18>: sar $0x1f,%edx
0x080483a9 <+21>: idiv %ecx
0x080483ab <+23>: mov %edx,0x4(%esp)
0x080483af <+27>: mov %ecx,(%esp)
0x080483b2 <+30>: call 0x8048394 <gcd>
0x080483b7 <+35>: leave
0x080483b8 <+36>: ret 
```

他们告诉我们 %esp 的起始值为 0xffff1000，并告诉我们 gcd(213, 18) 将导致：gcd(213, 18)、gcd(18, 15)、gcd(15, 3) 和 gcd (3, 0)。然后他们在执行 gcd(15, 3) 的返回指令之前询问 %esp 的值是多少。

解决方案说它是0xffff0fcc。我不太明白为什么。这是我的推理：

我们将 0x10 减去 3 次，调用 gcd(18, 15) 和 gcd(15, 3)，它们结合起来我们应该从堆栈中减去 0x30 和 0x8。那么我们不应该在 0xffff0fc8 吗？然后，在我们返回之后，我们再次添加 0x4，这样 $esp 就是 0xffff0fcc，但不是之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:09:31.760

如果他们的意思是`esp`= 0xffff1000 就在这一行之前：

```
0x08048394 <+0>: push %ebp 
```

然后你减去`esp`：

```
4: 0x08048394 <+0>: push %ebp
16: 0x08048397 <+3>: sub $0x10,%esp
4: 0x080483b2 <+30>: call 0x8048394 <gcd>; gcd(18, 15) 
```

进而：

```
4: 0x08048394 <+0>: push %ebp
16: 0x08048397 <+3>: sub $0x10,%esp
4: 0x080483b2 <+30>: call 0x8048394 <gcd>; gcd(15, 3) 
```

进而：

```
0: because "leave" undoes "sub $0x10,%esp" and "push %ebp" 
```

这样你就得到 0xffff1000 - 2 * (4 + 16 + 4) = 0xffff0fd0。

如果 OTOH, `esp`= 0xffff1000 之前`call 0x8048394 <gcd>; gcd(213, 18)`在主程序中，那么上面的值减去返回地址的大小，4，你得到 0xffff0fcc。

我会说问题陈述（假设您没有改变其含义）有点模棱两可。`gcd(213, 18)`即使是在主程序中的调用，我也会计算参数的大小。但是还有另一个问题。主程序之前是否有任何堆栈对齐，`gcd(213, 18)`我也应该计算它吗？请注意，内部`gcd()`有堆栈对齐，因为该函数仅使用 8 个字节来递归传递参数，但分配了 16 个字节。

为了正确解决这个问题（=获得老师期望的数字），它必须明确说明代码中的确切位置`esp`= 0xffff1000 并确保包含该代码。

# javascript - 数组中所有元素的jQuery偏移方法，而不仅仅是第一个元素

> ID：12950433
> 
> 赞同：3
> 
> 时间：2012-10-18T08:38:57.890
> 
> 标签：javascript, jquery, html, offset

我在同一类的页面上几乎没有 div。我想使用 jquery offset 方法来查找所有这些 div 的偏移量。

> $('div').offset()

返回我第一个 div 的偏移量。

但是，如果我想要所有 div 的偏移量，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T08:40:36.310

您必须迭代 div：

```
$('div').each(function() {
     console.log($(this).offset());
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T08:54:48.157

基于@dystroy 的回答：

```
var offsetCollection = new Array();
$('div').each(function() {
     offsetCollection.push(
       $(this).offset(), $(this).index()
     );
}); 
```

然后您可以：

```
offsetCollection[0][0]; //div 1, offset
offsetCollection[0][1]; //div 1, elementIndex 
```

# wcf - SoapUI 得到响应，但没有 .Net 客户端

> ID：12950439
> 
> 赞同：2
> 
> 时间：2012-10-18T08:39:12.623
> 
> 标签：wcf, web-services, wcf-binding, wcf-behaviour

我正在尝试从 .net 客户端访问 https Java webservice，但总是以“504 Gateway Timeout”异常结束。

我可以使用 SoapUI 从同一个 Web 服务获得响应。

我还注意到 SoapUI 和 .net 客户端的请求肥皂消息并不相似。我的问题是，错误的消息格式是否会导致“504 网关超时”问题？如果是的话，我如何修改.net 客户端中的soap 消息？

这是两个不同的应用程序生成的请求肥皂消息：

肥皂界面

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://company.domain.com/EchoService/v1_00">
       <soapenv:Header/>
       <soapenv:Body>
          <v1:Echo>test</v1:Echo>
       </soapenv:Body>
</soapenv:Envelope> 
```

.NET 客户端

```
{<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope">
  <s:Header>
    <a:Action s:mustUnderstand="1">Echo</a:Action>
    <a:MessageID>urn:uuid:7a76925d-5bf0-4f2d-a9c5-c5a026e1eefb</a:MessageID>
    <a:ReplyTo>
      <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
  </s:Header>
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Echo xmlns="http://company.domain.com/EchoService/v1_00">test</Echo>
  </s:Body>
</s:Envelope>} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-03T21:43:54.130

抱歉，人们与 wcf 绑定或肥皂消息无关，但代理阻止了请求。SoapUI 可以发送/接收消息，因为它不使用代理。`useDefaultWebProxy="false"`只是在配置的绑定部分进行了更改。

# perl - Perl：集成测试

> ID：12950442
> 
> 赞同：5
> 
> 时间：2012-10-18T08:39:25.687
> 
> 标签：perl, testing, integration-testing

我正在寻求最佳实践。

通常我把所有的单元测试都放到 t/ 中，但是集成测试呢？

集成测试的最佳地点在哪里？他们将如何命名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:42:09.310

我在 Perl 中知道的集成测试没有全球公认的命名/位置约定。

根据我的观察，大多数人将所有内容都放在 t/.

有些人将测试拆分为 t/ 下的子目录（因此您可能在单独的 t/integration/ 目录中进行集成测试）。

有些人使用文件前缀（因此您可能有名为“I-whatever.t”的集成测试）。

有些人不在乎 - 只是将所有内容都放入同一个目录中。

我偶尔会看到人们将一组测试分离到与 't/' 相同级别的单独目录中-但这通常用于不正常运行的测试（例如，针对 CPAN 分发的作者特定测试）而不是用于集成与单位）。

# android - Android：从其他活动动态更改 ListView 数据

> ID：12950443
> 
> 赞同：0
> 
> 时间：2012-10-18T08:39:26.417
> 
> 标签：android, listview

我有一个**Activity_A**，其中有一个**ListView**，其数据取决于一个值，比如**依赖项**

从此**Activity_B**用户转到**Activity_B**，他可以在其中更改**依赖项的值**

由于此依赖项必须更改 ListView 中的数据，因此我需要重新加载 ListView，因此我这样做了：

```
if(//dependency is changed){
Intent intent = new Intent(Activity_B.this,Activity_A.class);
startActivity(intent);
} 
```

ListView 填充了新数据。

**问题：**

当我从这个新加载的 Activity_A 按下设备后退按钮两次时，我最终会在 Activit_A 中使用以前的 ListView 数据。所以，如果我尝试点击任何项目，我会得到这个**异常**

```
The content of the adapter has changed but ListView  did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread 
```

如何避免这种情况？？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:43:56.543

您可以根据`dependency`_`SharedPreferences``dependency``Activity_A` `onResume()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:57:04.060

要返回上一个活动，您不应调用 new `intent`。只需调用`finish()`您的`ACtivity B`. 然后在你`onResume()`的 中，用新值`Activity A`更新。`listview`

这里你`Activity A`作为一个新的Activity调用，而前一个`Activity A`还在`backstack`. 因此，当您按下返回时，您将到达`ACtivity A`，这是您的第一个 Activity。但是填充的值`listview`已经改变。因此，当您尝试单击任何内容时，就会发生异常。那就是问题所在。

因此，当您将值更改为 时，`listview`请调用`finish()`. `Activity B`它会带你回到`Activity A`. 在`onResume()`活动 A 中，更新`listview.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:33:10.823

在**活动 A**你有一个**ListView**

在**Activity A 的**onResume **()**方法中，您为**ListView**设置了适配器。

当您通过**Intent导航到****Activity_B** 并更改

 ****依赖**。在按钮上单击不要重新开始**活动A**刚刚完成

**活动_B**。然后会自动调用**Activity A的****onResume()**方法并

 **再次加载**列表视图。**因此改变了对**列表视图值的影响**

注意：不要忘记将**依赖**声明为静态。****

# java - 在java中上传具有给定目标路径的文件

> ID：12950444
> 
> 赞同：0
> 
> 时间：2012-10-18T08:39:28.197
> 
> 标签：java, file-upload

在 tomcat 上运行的 java web 应用程序（struts）中，我需要将文件（任何类型）上传到目标文件夹，该文件夹将作为用户的输入参数。目的地不仅可以在服务器目录中，还可以在系统中的任何位置。是否有任何 api 可用于文件上传，或者可以使用 java IO 来实现吗？任何带有示例代码的建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:21:23.060

尝试更改具有服务器目录路径的“user.dir”属性。这是示例代码可能会有所帮助

```
System.setProperty("user.dir", <destination path on your system>);

File f = new File(System.getProperty("user.dir")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:46:57.893

使用`common-fileupload`. [这里](http://struts.apache.org/2.0.14/docs/file-upload.html)有更多的例子。

# configuration - 特定机器分布的相干分布方案

> ID：12950453
> 
> 赞同：1
> 
> 时间：2012-10-18T08:39:52.563
> 
> 标签：configuration, oracle-coherence

假设机器 1、机器 2 和机器 3 在同一个一致性集群上。

有没有一种方法可以说，在集群中，我希望我的缓存放在机器 1 和机器 2 下，而不是机器 3 下？这种结构有什么缺点（网络问题、性能等）吗？

谢谢。

编辑：我不想要任何禁用存储的节点。每个节点都可以存储数据，但我希望他们选择他们想要存储的缓存数据。例如：Cache1：M1 OK、M2 OK、M3 NOK、Cache2：M1 NOK、M2 OK、M3 OK 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T17:15:52.497

我们在 Coherence 集群中所做的是启动我们不想用作“缓存节点”的 JVM，并`-Dtangosol.coherence.distributed.localstorage=false`在命令行上设置属性。这允许这些 JVM 加入集群并首先访问缓存-class 集群成员，但它们实际上不是缓存的一部分。

因此，在您的示例中，机器 3 上的所有 JVM 将`tangosol.coherence.distributed.localstorage`属性指定为`false`，并且机器 1 和 2，如果使用此属性集`true`（或没有此属性，它默认为`true`）运行，将用作缓存服务器。

**编辑：**

我不知道实施您更新的问题的具体方法。您可以尝试为每台机器提供不同的 coherence-cache-config.xml（以便每台机器“看到”一组不同的缓存），但[这个页面](http://coherence.oracle.com/display/COH35UG/Cache+Configuration+Elements)似乎表明它没有得到很好的支持。我希望我有一个更好的答案。

# php - 产品页面上的 Magento 自定义用户输入

> ID：12950455
> 
> 赞同：0
> 
> 时间：2012-10-18T08:40:08.747
> 
> 标签：php, magento

我正在寻找有关如何执行以下操作的一些建议或信息。基本上我想让产品视图页面上的用户能够从硬编码的自定义下拉菜单中进行选择，当他们按下“添加到购物车”时，它会将这些信息保存到与该产品关联的购物车中。下拉菜单不能在管理部分自定义，因为它在产品页面模板中是硬编码的。

我真的不知道如何做到这一点，或者搜索哪些术语可以让我进行研究。

基本上我要问的是如何为每个产品添加自定义输入。

任何帮助或建议或链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:16:21.047

是的，就像有人评论的那样，自定义选项就是您要寻找的。

在产品的管理部分，您会发现“自定义选项”选项卡。在那里你想添加一个类型为“下拉”的新选项并在那里添加你的值。

为什么要对选项进行硬编码？似乎是一个奇怪的要求。使用自定义选项，您可以完全控制更改选项而无需更改任何代码。

# javascript - javascript继承模式混淆

> ID：12950456
> 
> 赞同：1
> 
> 时间：2012-10-18T08:40:09.043
> 
> 标签：javascript, jquery

我发现这是在 javascript 中进行继承的最推荐方法。

```
function extend(Child, Parent) {
 var F = function(){};
 F.prototype = Parent.prototype;
 Child.prototype = new F();
} 
```

如果我在孩子的原型中已经有了方法，它们不会被覆盖，我们不应该保留它们吗？

```
function extend(Child, Parent) {
 var c = child.prototype;
 var oldProto = new C();  
 var F = function(){};
 F.prototype = Parent.prototype;
 Child.prototype = new F();
 for(var i in oldProto ){
   Child.prototype[i] = oldProto[i]  
 }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:58:35.730

我不确定这对你是否有好处，但记住这一点很重要：原型与类不同。你所做的是试图让 JS 表现得像一门传统的 OO 语言，试图教海豚跳芭蕾舞，或者迫使老虎成为素食主义者：令人钦佩，但注定要以眼泪收场。

我真的不明白你为什么要使用这个`extend`函数来做你想做的任何事情。为什么不简单地使用这个：

```
function Parent()
{};
function Child()
{};
//augment parent proto
Parent.prototype.parentMethod1 = function()
{};
//set Child's proto to Parent
Child.prototype = new Parent();
Child.prototype.constructor = Child;
//Then augment the Child's prototype
Child.prototype.childMethod1 = function()
{};
var foo = new Child();
foo.parentMethod1();//works
foo.childMethod1();//works, too 
```

IMO，这完全解决了这个问题。当然，它有点冗长，但 OOP 总是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:07:19.143

下面的代码是我见过的最好的 JavaScript 继承代码之一。

Object.create(proto [, propertiesObject ]) 在 MDN [**here**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)上进行了讨论。

下面，Jon 定义了一个名为 ExtendBase 的基本空对象，然后添加了一个名为 extend 的函数属性，该属性不可枚举，它将单个新对象作为其参数。

该对象应包含可枚举的属性，例如将添加到基础对象的方法和数据。

他从传递的对象中获取所有可枚举的属性，然后创建一个必要的描述符数组，以使用这些属性的名称传递给 Object.create。然后，他使用父对象作为原型，并将结果描述符作为新属性，直接在 Object.create() 调用中添加到子对象。

如您所见，您可以使用带有属性（包括方法）的对象参数来扩展父对象，而不会丢失传递的对象的属性，结果是子对象，以父对象为原型，并直接添加传递对象的可枚举对象给孩子。

然而，这维护了一个干净的原型链，同时打算使用其他对象扩展父对象，这些对象是合理创建的，以一种有意义的方式将父对象扩展到新子对象：

现场示例（[**在**](http://www.sanbarcomputing.com/flat/forumPosts/src/extend/extend.html)Chrome 中按 F12 进行控制台输出，或在 FireFox 中使用 FireBug 等）

JavaScript：

```
// Original Author:  FireFly - Jonas Höglund - ##javascript channel
// on irc.freenode.net - see THANKS File.  Updated to private data
// members and passable initial parameters by Scott Sanbar

///////////////
// Library code
///////////////

var ExtendBase = {};

Object.defineProperty(ExtendBase, 'extend', {
    enumerable:false, value:function (obj) {
        'use strict';

        var descs = {};

        Object.getOwnPropertyNames(obj).forEach(function (key) {
            descs[key] = Object.getOwnPropertyDescriptor(obj, key)
        });

        return Object.create(this, descs);
    }
});

///////////////
// Sample Usage
///////////////

function PersonObj(nam) {

    return {
        name:new function () {

            var name = nam;

            this.set = function (value) {
                name = value;
            };

            this.get = function () {
                return name;
            }
        },

        // A person can tell you its name.
        talk:function () {
            return "Hello, I'm " + this.name.get();
        }
    }
}
;

function WorkingPersonObj(occ) {

    return {

        occupation:new function () {

            var occupation = occ;

            this.set = function (value) {
                occupation = value;
            };

            this.get = function () {
                return occupation;
            }
        },

        // A working person also tells you their occupation when they talk.
        talk:function () {
            return Person.talk.call(this) + " and I am a " + this.occupation.get();
        }
    }
}
;

var hush = {

    hush:function () {
        return "I am supposed to be quiet";
    }
};

var Person = ExtendBase.extend(new PersonObj('Harry'));
var WorkingPerson = Person.extend(new WorkingPersonObj('wizard'));

var wp1 = WorkingPerson.extend(hush);

console.log(wp1.talk()); // "Hello, I'm Harry and I am a wizard"
console.log(wp1.hush()); // "I am supposed to be quiet"
wp1.name.set("Elijah");
wp1.occupation.set("prophet");
console.log(wp1.talk()); // "Hello, I'm Elijah and I am a prophet"
console.log(wp1.name.get());
console.log(wp1.occupation.get()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:57:24.947

您尝试实现的模式称为[多重继承](http://en.wikipedia.org/wiki/Multiple_inheritance)。由于您遇到的问题，称为钻石问题，因此强烈不建议使用它。只需使用[mixin 模式](http://en.wikipedia.org/wiki/Mixin)。

# ruby-on-rails - Rails 3 的 jQuery 文件上传 v4，上传不起作用

> ID：12950458
> 
> 赞同：1
> 
> 时间：2012-10-18T08:40:13.480
> 
> 标签：ruby-on-rails

我正在学习本[教程](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-v4-for-Rails-3)并遇到了困难。

我无法上传文件，我只能选择一个文件，但什么也没有发生。我猜插件不起作用或者我没有添加一些重要的东西，如果有人帮助我，我将不胜感激。

Hier 是我的 routes.rb：

```
Try::Application.routes.draw do
 match '/home' => 'home#index'
 resources :uploads
 root :to => "home#index"
end 
```

uploads_controller.rb：

```
class UploadsController < ApplicationController
  def home
  end

  def index
  end

  def create
    @upload = Upload.new(params[:upload])
    if @upload.save
      render :json => { :pic_path => @upload.picture.url.to_s , :name => @upload.picture.instance.attributes["picture_file_name"] }, :content_type => 'text/html'
    else
      render :json => { :result => 'error'}, :content_type => 'text/html'
    end
  end

end 
```

和意见/主页/index.html.erb：

```
<%= stylesheet_link_tag('jquery.fileupload-ui') %>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<%= javascript_include_tag 'jquery.fileupload', 'jquery.fileupload-ui' %>

<script type="text/javascript" charset="utf-8"> 
   $(function () {
  $('.upload').fileUploadUI({
        uploadTable: $('.upload_files'),
        downloadTable: $('.download_files'),
        buildUploadRow: function (files, index) {
            var file = files[index];
            return $('<tr><td>' + file.name + '<\/td>' +
                    '<td class="file_upload_progress"><div><\/div><\/td>' +
                    '<td class="file_upload_cancel">' +
                    '<button class="ui-state-default ui-corner-all" title="Cancel">' +
                    '<span class="ui-icon ui-icon-cancel">Cancel<\/span>' +
                    '<\/button><\/td><\/tr>');
        },
        buildDownloadRow: function (file) {
            return $('<tr><td><img alt="Photo" width="40" height="40" src="' + file.pic_path + '">' + file.name + '<\/td><\/tr>');
        },
    });
});
</script>

<div class="files"> 
<%= form_for @upload, :html => { :class => "upload", :multipart => true } do |f| %>
  <%= f.file_field :picture %>
  <div>Upload files</div>
<% end %>

<table class="upload_files"></table>
<table class="download_files"></table>
</div> 
```

home_controller.rb：

```
class HomeController < ApplicationController
def index
  @upload  = Upload.new
end
end 
```

# npapi - 如何比较 NPVariant 对象？

> ID：12950459
> 
> 赞同：2
> 
> 时间：2012-10-18T08:40:16.123
> 
> 标签：npapi

我正在将 JS 的侦听器注册到 NPAPI 插件。为了不多次注册同一个侦听器，我需要一种方法来将传递的 NPVariant 对象与列表中已经存在的对象进行比较。

这就是我从 JS 注册监听器的方式：

```
 PluginObject.registerListener("event", listener); 
```

然后在插件源中：

```
 for (l=head; l!=NULL; l=l->next) {
      // somehow compare the listeners
      // l->listener holds NPVariant object
      if (l->listener-> ??? == new_lle->listener-> ???) 
      {
        found = 1;
        DBG("listener is a duplicate, not adding.");
        NPN_MemFree(new_lle->listener);
        free(new_lle);
        break;
      } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:33:37.883

当您谈论 javascript 函数时，NPVariant 只是一个 NPObject。

```
typedef struct _NPVariant {
  NPVariantType type;
  union {
    bool boolValue;
    int32_t intValue;
    double_t doubleValue;
    NPString stringValue;
    NPObject *objectValue;
  } value;
} NPVariant; 
```

比较 val.type 和 val.objectValue。这通常会起作用，但如果不起作用，则没有其他方法，所以您最好还是尝试一下。我想另一种可能性是创建一个 javascript 函数来比较它们，用 NPN_Evaluate 注入它并用两个对象调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:51:25.033

我认为您不能依赖 objectValue。例如，如果您执行以下操作：

`foo={}; bar=foo; x={};
x.f=foo; x.b=bar;`

Now, if you call `NPN_Enumerate` and pass x as the NPObject, you get two identifiers. Calling GetProperty for each of these returns NPVariants, but the value of `variant->value.objectValue` will be different for each, and different again in subsequent calls to `NPN_Enumerate`.

taxilian: is there significant overhead in calling `NPN_Invoke` with the two NPObjects, just to test for equality? This also involves some calls to `GetProperty` and the creation of identifiers and calling the NPVARIANT macros to test the results, etc.. I am wondering just how much logic I should be injecting and evaluating in Javascript.. this code injection seems to come up as a solution again and again. Is it costly?

# objective-c - 解析维基百科表格

> ID：12950461
> 
> 赞同：1
> 
> 时间：2012-10-18T08:40:35.507
> 
> 标签：objective-c, ios, wikipedia

我渴望在我的应用程序中列出不同国家/地区的插头尺寸的功能，并且我找到了一个包含以下数据的不错的维基百科页面：

[按国家/地区划分的主电源](http://en.wikipedia.org/wiki/Mains_electricity_by_country)

如果向下滚动，您可以看到数据显示在表格中。由于没有 Wikipedia API，我必须将数据插入 PLIST 对吗？还有另一种方法可以做到这一点吗？如何将这些表解析为字典或数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:50:36.787

我已经为 Objective-C 编写了一个 Wikipedia API Wrapper，在那里你可以得到这个 wikipedia 条目的 html 源代码。使用 DOM 解析器，您可以找到表并遍历条目并将其写入字典。

不幸的是，您需要的表没有 ID。但是您可以在表格中搜索其中一个标题词，然后跳出一个元素并获取表格。

[https://github.com/prine/WikiApiObjectiveC](https://github.com/prine/WikiApiObjectiveC)

我刚检查过。这些是您获取所需文章的 html 源代码所需的仅有的四行。

```
WikipediaHelper *wikiHelper = [[WikipediaHelper alloc] init];
wikiHelper.apiUrl = @"http://en.wikipedia.org";

NSString *searchWord = @"Mains_electricity_by_country";

NSString *htmlSource = [wikiHelper getWikipediaHTMLPage:searchWord]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:48:50.933

我能想到的最简单的方法是复制数据并将其粘贴到您选择的编辑器中。

然后结合使用列编辑、搜索和替换。我倾向于为此使用 TextWrangler，它支持正则表达式搜索和替换。

这是一次性的工作，行数是有限的，所以解决方案可能不需要完美——只要足够好和方便。

# php - 为会议创建一个简单的 Web 服务

> ID：12950463
> 
> 赞同：-4
> 
> 时间：2012-10-18T08:40:36.340
> 
> 标签：php

有一个有趣的挑战是创建一个允许第二个人相互交流语音的网络服务，语音必须被扭曲。在我使用 PHP 的语言中，我想知道是否有针对此任务的公式化解决方案/库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:09:14.210

检查此链接：

*   使用 HTML5： [http ://www.sitepoint.com/html5-speech-input-fields/](http://www.sitepoint.com/html5-speech-input-fields/)

*   使用 Flash：//stackoverflow.com/questions/7966044/how-can-i-make-microphone-sound-transfer-from-website-open-in-my-pc-to-websites

*   VoicePHP 应用程序：//voicephp.com/howitworks.html

但是如果你真的想建立一个通信系统，你应该使用 VOIP（IP 语音）大多数成功的通信公司都使用它 //en.wikipedia.org/wiki/Voice_over_IP

[Asterisk IP PBX http://www.asterisk.org/](http://www.asterisk.org/)是一个可以与 PHP 完美配合的开源软件

# jquery - 如何在 html5、jquery、javascript 中获取图像字节字符串（base64）？

> ID：12950465
> 
> 赞同：11
> 
> 时间：2012-10-18T08:40:40.693
> 
> 标签：jquery, html

我在 iPhone 或 Android 中有一个图像，我想通过 jQuery AJAX 将该文件流或字节字符串传递给 Web 服务以将文件存储在服务器上。

那么，在 HTML5 中，我如何获取图像文件（jpg、gif 等）字节字符串，以便将其发布到服务器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T08:45:04.780

您可以使用将图像复制到具有相同大小的画布`canvas.drawImage(image, 0, 0)`，然后使用`.toDataURL('image/TYPE')`画布的方法来检索图像的 base64 表示。'TYPE' 将是 jpg、gif 或 png

示例：确保当前页面和图像都在同一个域、子域和协议上，否则会出现安全错误。还要确保画布与图像具有相同的宽度和高度

HTML

```
<img src="whatever.jpg" id="myimage" />
<canvas width="300" height="300" id="mycanvas" style="display: none;"></canvas> 
```

Javascript

```
var myImage = document.getElementById('myimage');
var myCanvas = document.getElementById('mycanvas');

var ctx = myCanvas.getContext('2d');

ctx.drawImage(myImage, 0, 0);

var mydataURL=myCanvas.toDataURL('image/jpg'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-22T16:08:17.020

要添加到代码示例以隔离字符串开头没有格式的原始数据...

Javascript：

```
var myImage = document.getElementById('myimage');
var myCanvas = document.getElementById('mycanvas');
var ctx = myCanvas.getContext('2d');
    ctx.drawImage(myImage, 0, 0);

var myDataURL = myCanvas.toDataURL('image/png');// could also be 'image/jpg' format

/* to remove the 'data:image/jpg;base64,' later from using the toDataURL() function (or PNG version data:image/png;base64,') and have only the raw base4 data string, split the result string from the ctx.drawImage() function at the comma and take the second half, and the remaining data will be in tact like so: */

var myBase64Data = myDataURL.split(',')[1];// removes everything up to and including first comma 
```

我个人喜欢这个，发现它比使用 indexOf 和 substring 更干净、更快

# c# - WPF 用户控件超出网格范围

> ID：12950466
> 
> 赞同：0
> 
> 时间：2012-10-18T08:40:42.497
> 
> 标签：c#, wpf, user-controls, grid

我有一个正在测试的 WPF 应用程序，它加载 XML 并将其可视化在用户控件中。现在我遇到的问题是每次加载用户控件时`HorizontalAlignment`都可以，但是`VerticalAlignment`不适合用户控件的高度大小。

任何人都知道如何解决这个问题？

主窗口.xaml

```
 <Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:UserControls="clr-namespace:RackBuildingTesT.UserControls" x:Class="RackBuildingTesT.MainWindow"
    Title="MainWindow" Height="578" Width="758" SizeChanged="Window_SizeChanged_1">
<Grid>
        <DockPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Border DockPanel.Dock="Top" BorderBrush="Black" BorderThickness="1">
                <Grid>
                    <Label Content="Welke rack laden" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <ComboBox x:Name="RackChooser" HorizontalAlignment="Left" Margin="100,0,0,0" VerticalAlignment="Top" Width="120" SelectionChanged="RackChooser_SelectionChanged"/>
                </Grid>
            </Border>
        <Border DockPanel.Dock="Top" BorderBrush="Black" BorderThickness="1">
            <Grid x:Name="RackGrid" Margin="0,0,0,0">
            </Grid>
        </Border>
        </DockPanel>
    </Grid> 
```

主窗口.xaml.cs

```
 public MainWindow()
    {
        InitializeComponent();
        LoadRackCombo();
    }
    private void LoadRackCombo()
    {
        var files = Directory.GetFiles(Properties.Settings.Default.FilePathXMLRack);
        foreach (var item in files)
        {
            RackChooser.Items.Add(item);
        }
    }

    private void RackChooser_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        this.RackGrid.Children.Clear();
        this.Cursor = Cursors.Wait;
        if (RackChooser.SelectedIndex == -1)
            MessageBox.Show("Select a rack");
        else
        {
            string rackFile = Convert.ToString(RackChooser.Items[RackChooser.SelectedIndex]);
            UserControls.RackBuilder r = new UserControls.RackBuilder();
            RackGrid.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;
            RackGrid.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;
            r.Width = RackGrid.Width;
            r.Height = RackGrid.Height;
            var _r = TRack.CreateFromXMLFile(rackFile, null);
            r.set_Rack(_r);
            RackGrid.Children.Add(r);
        }
        this.Cursor = Cursors.Arrow;
    }

    private void Window_SizeChanged_1(object sender, SizeChangedEventArgs e)
    {
        RackGrid.Width = this.Width;
        RackGrid.Height = this.Height;
    } 
```

RackBuilder.xaml.cs（xaml 页面是标准的 WPF 用户控件）

```
 public RackBuilder()
    {
        InitializeComponent();
    }

    public TRack fRack { get; set; }

    public void set_Rack(TRack value)
    {
        this.fRack = value;
        this.InvalidateVisual();
    }

    protected override void OnRender(DrawingContext drawingContext)
    {
        if (this.fRack != null)
        {
            var xScale = this.Width / this.fRack.Size.Width;
            var yScale = this.Height / this.fRack.Size.Height;
            var smallest = 0.0;

            if (xScale < yScale)
                smallest = xScale;
            else
                smallest = yScale;

            foreach (var hole in this.fRack.HolePositions)
            {
                drawingContext.DrawEllipse(Brushes.Aquamarine, null, new Point(hole.Position.X * xScale, hole.Position.Y * yScale),
                                           hole.Diameter * smallest * 0.5, hole.Diameter * smallest * 0.5);
            }
        }
    } 
```

结果

![应用结果](../Images/9b147a702ad8084744c1d907839d0574.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:50:59.197

不要将您的 Control 添加到 a`Grid`中，而是使用[ContentControl](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.controls.contentcontrol.aspx)并将其添加到其 Content-Property。它还会自动拉伸它的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:20:33.490

我将 MainWindow`SizeToContent`放到`WidthAndHeight`.

# android - 将对象添加到 ArrayList 失败。总是复制相同的

> ID：12950473
> 
> 赞同：0
> 
> 时间：2012-10-18T08:40:58.707
> 
> 标签：android, sqlite, arraylist

要将数据库中的不同对象添加到一个，`ArrayList`这是我使用的代码：

```
try {
    Statement stat = con.createStatement();
    ResultSet rs = stat.executeQuery("SELECT DISTINCT Id, Username, FirstName, LastName FROM USER WHERE Username LIKE '%"+name+"%' or FirstName LIKE '%"+name+"%' or LastName LIKE '%"+name+"%'");
    while (rs.next()){
        finded.setUsername(rs.getString("Username"));
        finded.setFirstName(rs.getString("FirstName"));
        finded.setLastName(rs.getString("LastName"));
        finded.setId(rs.getInt("Id"));
        findList.add(finded);
        Log.d("this is the content of the List:",((Integer) findList.get(j).getId()).toString());
        Log.d("this is the content of the List 0:",((Integer) findList.get(0).getId()).toString());

    }
    con.close(); 
```

这就是 Log.d 每次都给我的。

```
10-18 08:31:39.407: D/this is the content of the List:(427): 3
10-18 08:31:39.407: D/this is the content of the List 0:(427): 3
10-18 08:31:39.427: D/this is the content of the List:(427): 15
10-18 08:31:39.427: D/this is the content of the List 0:(427): 15
10-18 08:31:39.437: D/this is the content of the List:(427): 13
10-18 08:31:39.437: D/this is the content of the List 0:(427): 13
10-18 08:31:39.447: D/this is the content of the List:(427): 50
10-18 08:31:39.447: D/this is the content of the List 0:(427): 50
10-18 08:31:39.460: D/this is the content of the List:(427): 34
10-18 08:31:39.460: D/this is the content of the List 0:(427): 34
10-18 08:31:39.467: D/this is the content of the List:(427): 49
10-18 08:31:39.467: D/this is the content of the List 0:(427): 49
10-18 08:31:39.479: D/this is the content of the List:(427): 53
10-18 08:31:39.479: D/this is the content of the List 0:(427): 53 
```

如您所见，它在`ArrayList`. 我也尝试使用`findList.add(index, finded)`( `index`is an `int`who is incrementing) 但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:44:37.667

您需要`finded`在循环内部创建一个新对象

```
while (rs.next()){
    finded = new Finded();   // <<-- here
    finded.setUsername(rs.getString("Username")); 
```

否则你只是一遍又一遍地添加同一个对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:46:55.390

更改为以下内容：

```
 int j=0;
 try {
                Statement stat = con.createStatement();
                ResultSet rs = stat.executeQuery("SELECT DISTINCT Id, Username, FirstName, LastName FROM USER WHERE Username LIKE '%"+name+"%' or FirstName LIKE '%"+name+"%' or LastName LIKE '%"+name+"%'");
                while (rs.next()){
                    Finded finded=new Finded();
                    finded.setUsername(rs.getString("Username"));
                    finded.setFirstName(rs.getString("FirstName"));
                    finded.setLastName(rs.getString("LastName"));
                    finded.setId(rs.getInt("Id"));
                    findList.add(finded);
                    Log.d("this is the content of the List:",((Integer) findList.get(j).getId()).toString());
                    Log.d("this is the content of the List 0:",((Integer) findList.get(0).getId()).toString());
j++;
                }
                con.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:51:27.130

您的查询返回多条记录，但是您正在覆盖该`finded`对象，而不是在循环中创建一个新记录。在循环中创建一个新对象

```
Finded finded =null;
while (rs.next()){
                    finded = new Finded();
                    finded.setUsername(rs.getString("Username"));
                    finded.setFirstName(rs.getString("FirstName"));
                    finded.setLastName(rs.getString("LastName"));
                    finded.setId(rs.getInt("Id"));
                    findList.add(finded);

                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:42:46.947

也许你可以使用“group by”而不是“distinct”。

select .... from ... group by ...

试试这个怎么样？

# c# - 显示 ToolStripDropDown 时捕获鼠标消息

> ID：12950476
> 
> 赞同：1
> 
> 时间：2012-10-18T08:41:03.743
> 
> 标签：c#, winforms, toolstripdropdown, mousecapture

我正在尝试创建一个包含自定义控件的“工具提示”。我使用`ToolStripDropDown`which 实现了它，它可以满足我的需要 - 当用户单击其他地方时关闭，或者激活另一个窗口等。

但是，即使显示了，我也希望能够`MouseMove`在父控件中获取事件`ToolStripDropDown`。我尝试`Capture`在各个阶段设置父控件的属性（在显示下拉列表之前，在其`Opened`事件处理程序中等），但它总是立即设置回 false。有没有办法（不一定使用属性）在父控件`Capture`中获取事件？`MouseMove`不，我不想考虑像使用计时器和定期检查鼠标位置这样的丑陋黑客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:59:16.003

如果您想一直知道鼠标位置，那么您应该`MouseDown`为父控件和`ToolStripDropDown`控件注册事件，如下所示：

```
private void Form1_MouseMove(object sender, MouseEventArgs e)
{
    lblPosition.Text = e.Location.ToString();
}

private void toolStripDropDownButton2_MouseMove(object sender, MouseEventArgs e)
{
    lblPosition.Text = e.Location.X + toolStripDropDownButton2.Bounds.Location.X + ", " + toolStripDropDownButton2.Bounds.Location.Y + e.Location.Y;
} 
```

因为`ToolStripDropDown`您应该计算与其父级的相对位置

# html - 为什么这个 inline-block 元素的内容不是垂直对齐的

> ID：12950479
> 
> 赞同：27
> 
> 时间：2012-10-18T08:41:18.463
> 
> 标签：html, css, vertical-alignment

遇到一个奇怪的 CSS 问题。有人可以解释为什么包含内容的框没有垂直对齐吗？

如果您将文本放在带有类的范围内`.divPutTextToFixIssue`- 它会正确对齐。

[http://jsfiddle.net/KgqJS/88/](http://jsfiddle.net/KgqJS/88/)

```
 #divBottomHeader {
        background-color: #d5dbe0;
        height: 43px;
    }
    .divAccountPicker {
        display: inline-block;
        background: blue;            
        width: 200px;
        height: 40px;
    }
    .divAccountData {
        display: inline-block;
        background: red;
        width: 400px;
        height: 40px;
    }
```

```
<div id="divBottomHeader">
        <div class="divAccountPicker">
           <span class="divPutTextToFixIssue"></span>                 
        </div>
        <div class="divAccountData">
            <span>Balance: $555</span>
        </div>
    </div>
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-18T08:44:10.210

默认[`vertical-align`](http://www.w3.org/wiki/CSS/Properties/vertical-align)值`baseline`是

> 将框的基线与父框的基线对齐

`vertical-align:baseline`注意：您可以通过添加到您的选择器来查看此默认值`.divAccountData`。由于`baseline`是默认值，因此对齐方式不变。

您需要将其更改`top`为对齐顶部的块，例如：

```
.divAccountData {
    display: inline-block;
    background: red;
    width: 400px;
    height: 40px;
    vertical-align: top;
} 
```

[基线](http://en.wikipedia.org/wiki/Baseline_%28typography%29)定义为

> 大多数字母“坐”的线和下降线延伸的线下方

要解决*为什么*添加文本似乎可以解决问题，这是因为

> 'inline-block' 的基线是它在正常流中的最后一个行框的基线，除非它没有流入行框，或者如果它的 'overflow' 属性具有除 'visible' 之外的计算值，在在这种情况下，基线是底部边距边缘。

来自[CSS2 视觉格式化模型细节](http://www.w3.org/TR/CSS2/visudet.html#leading)

因此，仅添加一个字符会更改基线，导致第二个块以相同的垂直对齐方式出现。这**仅**在两个块包含相同数量的行时才有效。尝试在其中一个块中添加更多单词，您会发现在不强制`vertical-align:top`第二个块的情况下，它将根据第一个块中存在的文本行数移动。

编辑：找到一个相关的问题[为什么这个 inline-block 元素被向下推？](https://stackoverflow.com/questions/9273016/why-is-this-inline-block-element-pushed-downward)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:43:22.190

您需要添加`vertical-align: top;`到`.divAccountPicker` [**演示**](http://jsfiddle.net/KgqJS/90/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:43:01.453

像这样添加`vertical-align:top`你的`.divAccountData, .divAccountPicker` **类**

```
.divAccountData, .divAccountPicker {
    vertical-align: top;
} 
```

**[现场演示](http://jsfiddle.net/rohitazad/KgqJS/91/)**

如果你习惯了`display:inline-block;` 比习惯于各种方式`vertical-align:top`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T08:43:27.503

试试这个

```
.divPutTextToFixIssue {
   display:inline-block;
 } 
```

[jsFiddle](http://jsfiddle.net/KgqJS/92/)

# r - 编程> 提取列表项与列值匹配的行

> ID：12950482
> 
> 赞同：0
> 
> 时间：2012-10-18T08:41:33.057
> 
> 标签：r

```
l <- c("a","b","c") 
```

`m`是一个 5x2 的数据框。`C1`是`1:5`,`C2`是`a:e`:

```
m <- data.frame(C1 = 1:5, C2 = letters[1:5], stringsAsFactors = FALSE) 
```

我想找到`n`，它只包含那些行`m`中`m$C2`所述的值中的行`l`

结果`n`是 3x2 使得 C2 是`a:c`，即

```
 C1 C2
1  1  a
2  2  b
3  3  c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:53:08.540

一种选择是手动进行匹配`%in%`：

```
m <- data.frame(C1 = 1:5, C2 = letters[1:5], stringsAsFactors = FALSE)
l <- c("a","b","c")

with(m, m[C2 %in% l, ])

R> with(m, m[C2 %in% l, ])
  C1 C2
1  1  a
2  2  b
3  3  c 
```

或者通过以下`match()`功能：

```
R> m[with(m, match(C2, l, nomatch = FALSE)), ]
  C1 C2
1  1  a
2  2  b
3  3  c 
```

其中`nomatch`需要参数来摆脱`NA`行。

# jquery - 处理搜索自动完成逻辑的推荐方法（服务器与客户端）

> ID：12950484
> 
> 赞同：0
> 
> 时间：2012-10-18T08:41:36.687
> 
> 标签：jquery, autocomplete

我无法决定在页面生成时将所有可能的条目放在客户端中，然后让客户端进行过滤或在每次按钮单击时询问服务器以更新预先输入列表。

我很想选择前一个选项，但可以肯定的是，如果我的数据库中有太多条目，这会适得其反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:36:26.830

我倾向于把它放在服务器上。但这取决于。这是我的思考过程。

*   将列表放在服务器上允许在一个地方维护列表项。
*   服务器端/数据库逻辑可以限制返回的条目数（即`SELECT TOP X`）
*   根据我的经验，自动完成请求和响应对于大量数据来说非常快（< 1 秒，如果数据库设置正确，可能会更短）。
*   通过仅在用户需要时获取数据而不是预先加载所有数据，可以减少页面加载时间。

# c# - 在 asp.net 中作为模板发送电子邮件

> ID：12950485
> 
> 赞同：1
> 
> 时间：2012-10-18T08:41:38.010
> 
> 标签：c#, asp.net, visual-studio-2010

我可以通过我的应用程序发送和接收电子邮件，但它只是纯文本内容。我想发送用 css 和 div 或表格装饰的完整格式的内容。怎么做？我正在使用 asp.net 3.5 VS2010。

```
public void Send(string To, string Subject, string Body)
{
    System.Net.Mail.MailMessage m = new System.Net.Mail.MailMessage("mymail@gmail.com", To);
    m.Subject = Subject;
    m.Body = Body;
    m.IsBodyHtml = true;
    m.From = new MailAddress("mymail@gmail.com");

    m.To.Add(new MailAddress(To));
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "198.208.0.***";

    NetworkCredential authinfo = new NetworkCredential("mymail@gmail.com", "password");
    smtp.UseDefaultCredentials = false;
    smtp.Credentials = authinfo;
    smtp.Send(m);
} 
```

像这样调用这个函数
`Send("mynewmail@gmail.com", "testmail", "new test body");` 是我的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:59:36.070

答案在这里：[http ://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/c65502fa-955e-4fa1-b409-238bbb677df7](http://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/c65502fa-955e-4fa1-b409-238bbb677df7)

我认为您缺少的主要内容是 LinkedResource 上的 MIME 内容类型。myMagic.css：

```
 body {
      background-color: rgb(240,240,240);
      font-family: Verdana,Arial,Helvetica,Sans-serif;
      font-size: 10pt;
   }
   h2 {
      background-color: rgb(255,255,128);
      color: rgb(255,0,0);
   }
   p {
      background-color: rgb(0,0,255);
      color: rgb(0,255,0);
      font-style: italic;
   } 
```

程序.cs：

```
using System.Net.Mail;
using System.Net.Mime;

namespace MailMessageHTML
{
    class Program
    {

        private static MailMessage ConstructMessage(string from, string to, string subject)
        {
            const string textPlainContent =@"You need a HTML-capable mail agent to read this message.";
            const string textHtmlContent =@"<html><head><link rel='stylesheet' type='text/css' href='cid:myMagicStyle' />
</head>
<body>
<h2>Hello world!</h2>
<p>This is a test HTML e-mail message.</p>
</body>
</html>
";

   MailMessage result = new MailMessage(from, to, subject, textPlainContent);
   LinkedResource cssResource = new LinkedResource("myMagic.css", "text/css");
   //NOTE: Message encoding adds the surrounding <> on this Id cssResource.ContentId =myMagicStyle";
   cssResource.TransferEncoding = TransferEncoding.SevenBit;

      AlternateView htmlBody = AlternateView.CreateAlternateViewFromString( textHtmlContent , new ContentType("text/html"));
            htmlBody.TransferEncoding = TransferEncoding.SevenBit;
            htmlBody.LinkedResources.Add(cssResource);

            result.AlternateViews.Add(htmlBody);

            return result;
        }

        static void Main(string[] args)
        {
            MailMessage foo = ConstructMessage(
        "sender@foo.com"
                ,"recipient@bar.com"
                , "Test HTML message with style."
                );
            SmtpClient sender = new SmtpClient();
            sender.DeliveryMethod = SmtpDeliveryMethod.SpecifiedPickupDirectory;
            sender.PickupDirectoryLocation = @"...\MailMessageHTML\bin\Debug\";
            sender.Send(foo);
        }
    }
} 
```

注意 1：我在上面的消息部分中指定了 TransferEncoding.SevenBit。您通常不会在生产环境中执行此操作 - 我只在此处执行此操作，因此您可以使用记事本读取生成的 .eml 文件以查看生成的内容。

注意 2：许多邮件代理不支持在邮件部分中链接的样式表。一种更可靠的方法可能是使用内联样式（即：HTML 消息正文中的内联 ... 块）。

祝你好运，

这个答案来自：[http ://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/c65502fa-955e-4fa1-b409-238bbb677df7](http://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/c65502fa-955e-4fa1-b409-238bbb677df7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:46:31.380

如果您不需要动态内容（if/else 或 foreach）或模型绑定。我认为将您的模板放入文本文件并使用 string.Format() 就足够了。

否则，您将需要一个模板引擎。[这个问题](https://stackoverflow.com/questions/1518954/c-sharp-template-engine)对你来说可能是一个很好的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:48:31.213

看看github上的[MvcMailer](https://github.com/smsohan/MvcMailer)

它使用视图引擎来呈现电子邮件，因此您可以享受视图模型和模板的所有好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:56:50.923

看看[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)，它展示了如何将 CSS 应用于电子邮件。

另外，使用内联 CSS .. 你在设置`emailMessage.IsBodyHtml = true;`吗？

# c# - Web 服务返回列表中的 %Field 是什么？

> ID：12950488
> 
> 赞同：1
> 
> 时间：2012-10-18T08:41:54.713
> 
> 标签：c#, asp.net, web-services

我正在开始我的网络网络服务世界之旅，如果我的问题很菜鸟，请原谅。

调用 web 服务后，我在我定义的 List 对象中得到了结果，但对我来说奇怪的是列表中的每个条目都是重复的，真正的条目（我定义的）和另一个带有 +"Field 的新条目“， 喜欢：

```
aStatus.Result 
```

和

```
aStatus.resultField 
```

请看附图，我的问题是 %Field 是什么，为什么会出现？

![从 web 服务返回的结果](../Images/b3a180c8bdd6464fed13277e6d06400f.png)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:50:29.417

它们只是公共属性的私有支持字段，因此无需担心。在 Visual Studio 为 Web 服务代理生成的 C# 代码中，您将看到如下内容：

```
private string subscriptionPINField;

public string SubscriptionPIN
{
    get
    {
        return this.subscriptionPINField;
    }
    set
    {
        this.subscriptionPINField = value;
    }
} 
```

# php - PHP正则表达式以特定方式解析HTML

> ID：12950489
> 
> 赞同：-2
> 
> 时间：2012-10-18T08:41:56.270
> 
> 标签：php, html, regex

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我有以下 HTML：

```
<Text><strong>Cancellation</strong>
A cancellation is free of charge possible until 6PM on arrival day. With later    cancellation or no arrivals without previous cancellation the hotel is justified to place 90% of the booked achievements (excl. breakfast) in calculation whereby the amount at a value of USD 500.00 is not exceeded.
<strong>Check-in time</strong>
Starting from 15:00
<strong>Check-out time</strong>
Until 12:00
<strong>Guarantee</strong>
No guarantee required.</Text> 
```

我想解析它并存储在一个数组中，例如：

```
array(
 'Cancelation'    => 'A cancellation is free of charge possible until 6PM on arrival day. With later    cancellation or no arrivals without previous cancellation the hotel is justified to place 90% of the booked achievements (excl. breakfast) in calculation whereby the amount at a value of USD 500.00 is not exceeded.',
 'Check-in time'  => 'Starting from 15:00',
 'Check-out time' => 'Until 12:00',
 'Guarantee'      => 'No guarantee required.'
); 
```

感谢您提前提供提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:47:48.137

阅读[本](http://techgossipz.blogspot.com/2010/02/how-to-parse-html-using-dom-with-php.html)教程，无需使用饥饿的正则表达式引擎。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T08:43:49.720

将**有效**的HTML 添加到`DOMElement`对象中。有了它，您可以选择孩子并将他们的 HTML/文本提取到变量中。

文档： http: [//php.net/manual/en/class.domelement.php](http://php.net/manual/en/class.domelement.php)

# c# - 尝试在 SmartDevice 项目中使用 PInvoke 时出现 MissingMethodException

> ID：12950492
> 
> 赞同：0
> 
> 时间：2012-10-18T08:42:11.310
> 
> 标签：c#, c++, windows-mobile, pinvoke

我已经为 windows mobile SDK 编译了一个本机 dll，然后创建了 c# 项目来调用它。但是，我得到的只是一个 MissigMethodException。

Dll 与托管可执行文件位于同一文件夹中。

以下是导出函数在标题中的外观：

```
namespace cuttingStream
{
    /**
     * Открывается файл и производится его проверка.
    **/
    __declspec(dllexport) bool open_png_file(char* , pngDataStructures* );
    __declspec(dllexport) void close_png_file(pngDataStructures*);
    ...
} 
```

这是我导入它们的方式：

```
static class CuttingStreamWrapper
{
    [DllImport("libpngStreamWrap.dll", EntryPoint = "open_png_file")]
    public static extern bool OpenPngFile(string fileName, out pngDataStructures dataStruct);
    [DllImport("libpngStreamWrap.dll", EntryPoint = "close_png_file")]
    public static extern bool ClosePngFile(ref pngDataStructures dataStruct);
} 
```

这是dumpbin的输出（相关部分）：

```
1    0 00001340 ?close_png_file@cuttingStream@@YAXPAUpngDataStructures@@@Z
2    1 00001194 ?open_png_file@cuttingStream@@YA_NPADPAUpngDataStructures@@@Z 
```

在源文件和头文件中标记函数后`extern "C"`，dumpbin 输出变为：

```
ordinal hint RVA      name

      1    0 00001314 close_png_file
      2    1 0000118C open_png_file 
```

这似乎没有被破坏。

但是，问题仍然存在。这是我收到的例外情况：

```
System.MissingMethodException was unhandled
  Message="Не удается найти PInvoke DLL \"libpngStreamWrap.dll\"." 
```

StackTrace 仅具有程序的主要功能，我尝试在其中调用包装函数。

更新：

在我试图加载的 dll 上运行依赖 walker 后，我有 2 个依赖项：Coredll.dll、msvcr90d.dll。在我试图部署到那里的设备上只有 msvcr80.dll。这解释了加载失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:58:29.123

问题的根源在于 dll 对 msvcr90d.dll 的依赖，这在设备上找不到。一旦消除了依赖关系（通过从 /MDd 切换到 /MTd），就找到了 dll。

# java - 如何在 Eclipse 的类型层次结构中找到特定的类？

> ID：12950493
> 
> 赞同：2
> 
> 时间：2012-10-18T08:42:14.967
> 
> 标签：java, eclipse

我只知道通过使用快速层次结构视图（ctrl + T）我可以编写类名`*MyClass`并找到它。但是我在类型层次结构视图中找不到如何做到这一点，这可能吗？

Eclipse 版本：Indigo 服务版本 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T11:40:34.213

我认为您正在寻找的是：

*   快捷键：Ctrl+Shift+H
*   菜单：导航->在层次结构中打开类型...

这将弹出一个窗口，您可以在其中写下所需类的名称，然后它将打开层次结构视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:52:10.983

只需单击`Type hierarchy view`（按 F4 时出现），然后开始输入。它对我来说很好。但是通配符搜索似乎是不可能的。

# ruby-on-rails-3 - rails 复杂表

> ID：12950495
> 
> 赞同：0
> 
> 时间：2012-10-18T08:42:19.437
> 
> 标签：ruby-on-rails-3

我在创建这张表时遇到了很大的问题。

我有一个模型

**单元** 编号楼层单元编号

这是我当前的查看代码

```
<% block.units.each do |unit| %>
....
<% end %> 
```

我需要遍历整个街区，获取所有唯一的单元编号和楼层。像这样创建一个表。

```
BLOCKNO  Unitnumber1  Unitnumber2  Unitnumber3  Unitnumber4  Unitnumber5  Unitnumber6
Floor10   unit_id      unit_id      unit_id      unit_id
Floor9
Floor8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:49:09.430

```
<% block.each do |block| %>
  <% block.units.each do |unit| %>
    ...
  <% end %>
<% end %> 
```

# php - symfony2 学说 ResultSetMapping 错误

> ID：12950497
> 
> 赞同：4
> 
> 时间：2012-10-18T08:42:33.290
> 
> 标签：php, symfony, doctrine, sqlresultsetmapping

在这里，我尝试使用 ResultSetMapping 来映射 nativeQuery 生成的结果。但我不知道为什么学说总是抛出未定义的索引错误。谁能帮我解决这个问题？这是我的代码： PlaceMarkerRepository：

```
namespace Leo\FoodRadarBundle\Entity;

use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\Query\ResultSetMappingBuilder;

/**
 * PlaceMarkerRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class PlaceMarkerRepository extends EntityRepository
{
    public function findNearBy($query,$lat, $lng, $radius){

        $rsm = new ResultSetMappingBuilder($this->getEntityManager());
        // $rsm = new ResultSetMappingBuilder();
        // $rsm->addRootEntityFromClassMetadata('LeoFoodRadarBundle:PlaceMarker', 'p');
        // $rsm->addJoinedEntityFromClassMetadata('LeoFoodRadarBundle:Coordinate', 'c', 'p', 'coordinate', array('id' => 'coordinate_id'));

        $rsm->addEntityResult('LeoFoodRadarBundle:PlaceMarker', 'p');
        $rsm->addFieldResult('p', 'id', 'id');
        $rsm->addFieldResult('p', 'name', 'name');
        $rsm->addJoinedEntityResult('LeoFoodRadarBundle:Coordinate' , 'c', 'p', 'coordinate');
        $rsm->addFieldResult('c', 'coordinate_id', 'id');
        $rsm->addFieldResult('c', 'latitude', 'latitude');
        $rsm->addFieldResult('c', 'longitude', 'longitude');

        $sql ="SELECT p.id, p.name, c.latitude, c.longitude, c.id as coordinate_id
                FROM placeMarker p join coordinate c on p.coordinate_id = c.id
                ";

         $this->getEntityManager()->createNativeQuery($sql, $rsm)->getResult();

    }
} 
```

和地标：

```
namespace Leo\FoodRadarBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Leo\FoodRadarBundle\Entity\PlaceMarker
 *
 * @ORM\Table(name="placeMarker")
 * @ORM\Entity(repositoryClass="Leo\FoodRadarBundle\Entity\PlaceMarkerRepository")
 */
class PlaceMarker {

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var Coordinate coordinate 
     * @ORM\OneToOne(targetEntity="Coordinate") 
     * @ORM\JoinColumn(name="coordinate_id", referencedColumnName="id")
     */
    private $coordinate;

    /**
     *
     * @var Address address
     * @ORM\OneToOne(targetEntity="Address") 
     * @ORM\JoinColumn(name="address_id", referencedColumnName="id")
     */
    private $address;

    /**
     *
     * @ORM\Column(name="name", type="string", length=100)
     */
    private $name;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId() {
        return $this->id;
    }

    /**
     * Set coordinate
     *
     * @param Leo\FoodRadarBundle\Entity\Coordinate $coordinate
     * @return PlaceMarker
     */
    public function setCoordinate(\Leo\FoodRadarBundle\Entity\Coordinate $coordinate = null) {
        $this->coordinate = $coordinate;

        return $this;
    }

    /**
     * Get coordinate
     *
     * @return Leo\FoodRadarBundle\Entity\Coordinate 
     */
    public function getCoordinate() {
        return $this->coordinate;
    }

    /**
     * Set address
     *
     * @param Leo\FoodRadarBundle\Entity\Address $address
     * @return PlaceMarker
     */
    public function setAddress(\Leo\FoodRadarBundle\Entity\Address $address = null) {
        $this->address = $address;

        return $this;
    }

    /**
     * Get address
     *
     * @return Leo\FoodRadarBundle\Entity\Address 
     */
    public function getAddress() {
        return $this->address;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return PlaceMarker
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }
} 
```

坐标：

```
<?php

namespace Leo\FoodRadarBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Leo\FoodRadarBundle\Entity\Coordinate
 *
 * @ORM\Table(name="coordinate")
 * @ORM\Entity
 */
class Coordinate
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(type="float") 
     */
    private $longitude;

    /**
     * @ORM\Column(type="float") 
     */
    private $latitude;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Get longitude
     * @return float 
     */
    public function getLongitude() {
        return $this->longitude;
    }

    /**
     * Set longitude
     */
    public function setLongitude($longitude) {
        $this->longitude = $longitude;
    }

    /**
     * Get Latitude
     * @return float 
     */
    public function getLatitude() {
        return $this->latitude;
    }

    /**
     * Set Latitude
     */
    public function setLatitude($latitude) {
        $this->latitude = $latitude;
    }

} 
```

此语句引起的错误：

```
$targetClass = $this->_ce[$relation['targetEntity']]; 
```

有关错误的信息是：

```
Notice: Undefined index: Leo\FoodRadarBundle\Entity\Coordinate in /Volumes/DATA/LEO/Sites/FoodRadar/vendor/doctrine/orm/lib/Doctrine/ORM/Internal/Hydration/ObjectHydrator.php line 427 

 ErrorHandler ->handle ('8', 'Undefined index: Leo\FoodRadarBundle\Entity\Coordinate', '/Volumes/DATA/LEO/Sites/FoodRadar/vendor/doctrine/orm/lib/Doctrine/ORM/Internal/Hydration/ObjectHydrator.php', '427', array('row' => array('id' => '1', 'name' => 'test', 'latitude' => '233.234342', 'longitude' => '-232.23232323232', 'coordinate_id' => '2'), 'cache' => array('id' => array('fieldName' => 'id', 'type' => object(IntegerType), 'isIdentifier' => true, 'dqlAlias' => 'p'), 'name' => array('fieldName' => 'name', 'type' => object(StringType), 'isIdentifier' => false, 'dqlAlias' => 'p'), 'latitude' => array('fieldName' => 'latitude', 'type' => object(FloatType), 'isIdentifier' => false, 'dqlAlias' => 'c'), 'longitude' => array('fieldName' => 'longitude', 'type' => object(FloatType), 'isIdentifier' => false, 'dqlAlias' => 'c'), 'coordinate_id' => array('fieldName' => 'id', 'type' => object(IntegerType), 'isIdentifier' => true, 'dqlAlias' => 'c')), 'result' => array(object(PlaceMarker)), 'id' => array('p' => '|1', 'c' => '|2'), 'nonemptyComponents' => array('p' => true, 'c' => true), 'rowData' => array('p' => array('id' => '1', 'name' => 'test'), 'c' => array('latitude' => '233.234342', 'longitude' => '-232.23232323232', 'id' => '2')), 'dqlAlias' => 'c', 'data' => array('latitude' => '233.234342', 'longitude' => '-232.23232323232', 'id' => '2'), 'entityName' => 'LeoFoodRadarBundle:Coordinate', 'parentAlias' => 'p', 'path' => 'p.c', 'parentObject' => object(PlaceMarker), 'parentClass' => object(ClassMetadata), 'oid' => '000000003e34db9d00000000492221b6', 'relationField' => 'coordinate', 'relation' => array('fieldName' => 'coordinate', 'targetEntity' => 'Leo\FoodRadarBundle\Entity\Coordinate', 'joinColumns' => array(array('name' => 'coordinate_id', 'unique' => true, 'nullable' => true, 'onDelete' => null, 'columnDefinition' => null, 'referencedColumnName' => 'id')), 'mappedBy' => null, 'inversedBy' => null, 'cascade' => array(), 'orphanRemoval' => false, 'fetch' => '2', 'type' => '1', 'isOwningSide' => true, 'sourceEntity' => 'Leo\FoodRadarBundle\Entity\PlaceMarker', 'isCascadeRemove' => false, 'isCascadePersist' => false, 'isCascadeRefresh' => false, 'isCascadeMerge' => false, 'isCascadeDetach' => false, 'sourceToTargetKeyColumns' => array(*DEEP NESTED ARRAY*), 'joinColumnFieldNames' => array(*DEEP NESTED ARRAY*), 'targetToSourceKeyColumns' => array(*DEEP NESTED ARRAY*)), 'reflField' => object(ReflectionProperty), 'reflFieldValue' => null, 'element' => object(Coordinate), 'entityKey' => '0', 'resultKey' => '0'))
in /Volumes/DATA/LEO/Sites/FoodRadar/vendor/doctrine/orm/lib/Doctrine/ORM/Internal/Hydration/ObjectHydrator.php at line 427  -+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:12:59.093

Finally, I found the reason why caused this problem. I think this because resultsetmapping runs internally, So it can't understand the logic name which provide by Symfony. The solution for this problem is that changing logical name to full path name. then it will work.

# drupal - 在 Drupal 7 中隐藏特定引用者的菜单链接

> ID：12950498
> 
> 赞同：3
> 
> 时间：2012-10-18T08:42:33.643
> 
> 标签：drupal, drupal-7, drupal-modules

我正在寻找一种在特定条件下为匿名用户隐藏特定菜单项的方法。特别是，我在几个子域上为附属公司提供网站，对于某些子域（附属公司），我想隐藏指向我的“关于我们”页面的链接，该页面出现在几个菜单中。

我并不太担心完全拒绝访问“关于我们”节点，但我很欣赏这可能是探索的一种途径。

到目前为止，我已经看过： * hook_menu_alter 但这仅在重建菜单树时调用，而且我看不到如何仅为特定匿名会话删除项目。* template_preprocess_menu_link ：可能，但我如何告诉项目不要渲染。我可以向隐藏它的菜单项添加一个类，不是特别好，但它会起作用。* hook_node_access ：看不到我将如何阻止仅此会话的访问。

欢迎任何想法或指示。

[编辑]为了跟进这一点，我有一个可行的解决方案，但我一点也不为此感到自豪，一定有更好的方法。我正在使用 'hidden' 类向列表项添加一个 css 'display:none' 属性。

```
function sil_affiliate_preprocess_menu_link(&$variables) {
  $affiliate = get_affiliate_from_session();

  if ($affiliate && !$affiliate->show_aboutus) {
    $real_path = drupal_lookup_path('source','customerservice/aboutus');    
    if ($variables['element']['#original_link']['link_path'] == $real_path) {
      $variables['element']['#attributes']['class'][] = 'hidden';
    }
  }
} 
```

:wq 全家福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:40:03.817

您可以在自定义模块中使用以下代码示例。它实现了[hook_node_access](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_access/7)（未测试）

```
function [YOUR_MODULE]_node_access($node, $op, $account)
{
    if($account->uid == 0 && $op == "view" && $node->nid == 15)
    {
        return NODE_ACCESS_DENY;
    }
} 
```

希望这行得通……穆罕默德。

# html - 如何在 IE9 的 HTML 中制作圆角边框

> ID：12950505
> 
> 赞同：-1
> 
> 时间：2012-10-18T08:42:53.610
> 
> 标签：html, internet-explorer-9, css

我想在 Asp.net HTML 页面内有一个圆桌角，所以我编写了以下 HTML 代码，以便在 Chrome 和 Mozila 以及 IE 中可见（我使用的是 IE9）。

```
<style type="text/css">.round{-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}
</style> 
```

除了 IE9 之外，一切都是正确的。有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:49:48.527

你的代码很好。IE9 使用无前缀的边界半径。

[http://caniuse.com/#feat=border-radius](http://caniuse.com/#feat=border-radius)

将此添加到您的`<head>`

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

这应该确保 IE9 运行边界半径。

# c# - URL 重写 ASP.net

> ID：12950509
> 
> 赞同：1
> 
> 时间：2012-10-18T08:43:05.980
> 
> 标签：c#, asp.net, url-rewriting

我有一个 asp.net 网站，我需要在其中使用 URL 重写，所以我编写了一个 HTTP 模块并且我已经实现了它并且它可以正常工作唯一的问题是当页面重定向到其相应的地址时，图像和样式是未加载。

这是http模块：

// 你的 BeginRequest 事件处理程序。

```
private void Application_BeginRequest(Object source, EventArgs e)
{
    HttpApplication application = (HttpApplication)source;
    string URL = application.Request.Url.ToString();
    //int pid = Convert.ToInt32(application.Request.QueryString["pid"]);

    if ((URL.ToLower().Contains(".aspx"))
        || (URL.ToLower().Contains(".js"))
        || (URL.ToLower().Contains(".css"))
        || (URL.ToLower().Contains(".gif"))
        || (URL.ToLower().Contains(".png"))
        || (URL.ToLower().Contains(".jpeg"))
        || (URL.ToLower().Contains(".jpe"))
        || (URL.ToLower().Contains(".jpg"))
        || (URL.ToLower().Contains(".ashx")))
        return;
    else
    {
        string mname = URL.Substring(URL.LastIndexOf("/") + 1).ToString();

        Merchand ms = merchantDB.GetMerchant(mname);

        HttpContext context = application.Context;
        if (ms != null)
        {

            string url = "~/pages/Merchant.aspx?mid=" + ms.MerchandID + "&catid=" + ms.MainCategory + "&subcatid=0";
            context.RewritePath(VirtualPathUtility.ToAppRelative(url));
        }
        else
        {
            //("");
            string url = "~/pages/default.aspx";
            context.RewritePath(VirtualPathUtility.ToAppRelative(url));
        }
    }

} 
```

当我从它的正常 URL 打开页面时，它可以正常打开，但是当我使用 URL 时，它会重新打开，但没有图像或样式。

当我打开 firebug 时，我收到一个错误，即找不到 css 和 javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:58:46.653

要使用 IIS 进行重写，请执行以下操作：

1.  在 system.webserver 标签的 web.config 中注册 httpmodule：

> ```
> <modules>
> <add name="Rewrite" type="Rewrite"/>
> </modules> 
> ```

1.  改变这个： context.RewritePath(VirtualPathUtility.ToAppRelative(url)); 为此： context.RewritePath(url, false);
2.  使您的图像在服务器上运行并将它们的路径放置为 ~/images/imagename

# python - 文件的实际大小

> ID：12950511
> 
> 赞同：2
> 
> 时间：2012-10-18T08:43:07.147
> 
> 标签：python, file, metadata

我正在尝试获取仍在由另一个进程下载的文件的大小。我使用了下面的代码（我在[这里](https://stackoverflow.com/questions/3211999/sparse-file-usage-in-python)找到）：

```
os.stat(filepath).st_blocks*512 
```

但是，它也返回文件的分配大小。在最近的检查中，我发现这个解决方案的准确性取决于它正在运行的操作系统。目前，我的操作系统是带有 ext3 文件系统的 ubuntu 12.04 服务器。有没有另一种方法可以在 python 中找到真实的文件大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T10:43:08.317

从[文档中`stat()`](http://docs.python.org/library/os.html#os.stat)：

> 在某些 Unix 系统（例如 Linux）上，以下属性也可能可用：
> 
> *   **st_blocks** - 为文件分配的 512 字节块数
> *   **st_blksize** - 文件系统块大小
> *   **st_rdev** - 如果是 inode 设备，则为设备类型
> *   **st_flags** - 文件的用户定义标志

你似乎想要的是`st_blocks * st_blksize`. 请注意，这**不是**文件的实际大小，它是`st_size`成员。块数乘以块大小将*大于*实际文件大小。

* * *

***注意：***当它显示“ **st_blocks** - 为文件分配的 512 字节块的数量”时，该数量`512`实际上取决于系统。[POSIX 规范](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_stat.h.html)说

> **stat**结构的*st_blocks*成员的单位未在 POSIX.1-2008 中定义。在某些实现中，它是 512 字节。它可能因文件系统而异。

 **如果该`st_block`属性可用，那么如果它是其他值，请不要感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:53:46.417

尝试

```
os.stat(filepath).st_size 
```

似乎它返回您在“ls -l”中看到的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:54:01.737

独立于您的 SO，您可以访问文件的元数据：

```
metadata = os.stat(path_to_file)
metadata.st_size 
```**

# ios - 加载图像后重新计算高度或 UITableViewCell？

> ID：12950520
> 
> 赞同：2
> 
> 时间：2012-10-18T08:43:23.923
> 
> 标签：ios, uitableview

伙计们：

我使用委托方法创建了表格视图单元格`cellForRowAtIndexPath`，现在我想将一些照片加载到单元格中并调整单元格的高度以适合这些照片，所以我认为我应该在照片全部加载后执行此操作，以便我可以获取高度以调整单元格的大小。

我知道单元格的高度将在`heightForRowAtIndexPath`委托方法中计算，但该 `heightForRowAtIndexPath`方法似乎是之前调用的`cellForRowAtIndexPath`？

那么，有没有办法在加载照片后重新计算高度以调整大小或重新创建单元格？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:19:03.250

最简单的方法是重新加载单元格：

```
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:path] withRowAnimation:UITableViewRowAnimationNone]; 
```

我们在我们的一个应用程序中做到了这一点，它甚至可以很好地动画化。

# ios - UINavigationController 中的 UIScrollView 中的 UIViewController 想要推送一个新的控制器

> ID：12950530
> 
> 赞同：2
> 
> 时间：2012-10-18T08:43:58.930
> 
> 标签：ios, uiscrollview, uinavigationcontroller

我的一个应用程序现在遇到了一个愚蠢的 UI 问题。

我从 UINavigationController 开始，它是我的 Storyboard 中的初始视图控制器。根视图控制器是一个 UIViewController 巫婆一个 UIScrollView 作为子视图。UIScrollView 本身已启用分页并包含多个 UIViewControllers。

现在这是我的问题： UIScrollView 中的 UIViewControllers（我们称之为 View #1）应该对按钮事件做出反应，并与另一个 UIViewController（View #2）进行 segue，该 UIViewController 需要从前一个 UIViewController 获取数据并需要发送委托方法返回的数据。

当我尝试获取 UINavigationController 并在其上推送 View #2 时，没有任何反应。通过 presentViewController 显示它当然可以。

![图表](../Images/ba2ce9fe70abc51677cd43d363f956af.png)

你能帮我一点吗，告诉我这不起作用，什么时候不起作用？我有点卡在这一点上，我不知道如何继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:01:04.787

**不要**将 UIViewControllers 放在另一个违反苹果开发指南的 UIViewController（至少在 iOs5 之前）中。UIViewControllers 的生命周期是在内部管理的，如果您直接将 UIViewController 添加为子视图，则会有很多方法，例如

viewDidLoad
viewWillAppear
viewDidAppear
。. .

不会被调用，根据我的经验会导致非常不稳定的行为

尝试使用自定义 UIView 对象来获取每个视图的内部逻辑，这在一定程度上打破了 MVC 模式，但这将是解决您的问题的最佳方式

但是 iOS 5.0 添加了包含 UIViewControllers 的容器，它通过添加子视图控制器来正确处理这些生命周期事件。因此，如果您仅针对发布 iOs 5 设备，这可能是解决此问题的好方法

看看[这个](http://blog.carbonfive.com/2011/03/09/abusing-uiviewcontrollers/)和[这个](https://stackoverflow.com/questions/1141015/is-it-wise-to-nest-uiviewcontrollers-inside-other-uiviewcontrollers-like-you-w)

# visual-studio-2010 - 在设置和部署项目中设置表单的代码页

> ID：12950531
> 
> 赞同：0
> 
> 时间：2012-10-18T08:43:59.147
> 
> 标签：visual-studio-2010, visual-studio, windows-installer, setup-deployment

我有一个设置和部署项目（VS 2010），并在 UI 视图中添加了 TextBox 表单。我想向用户显示的文本不是英语，而是希腊语。当我运行 msi 时，文本看起来更像是一种古老的矮人语言。

现在，我不想本地化整个 msi（我不想要不同语言的替代文本和所有这些东西）。我只是想让这个特定的文本正确显示。有没有办法设置 msi 将使用的代码页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:13:25.397

通常 MSI 将英语的代码页设置为[1252](http://en.wikipedia.org/wiki/Windows-1252 "Windows-1252")。

要显示希腊字符，代码页必须设置为[1253](http://en.wikipedia.org/wiki/Windows-1253 "Windows-1253")。\ 英文文本仍将正确显示。

您需要为您的产品设置正确的 LangId，并在摘要表中设置代码页。有关详细信息，请参阅[代码页处理](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367867%28v=vs.85%29.aspx)。
我无法提供有关在 Visual Studio 部署项目中的设置位置的指导。

# large-files - 在大型 xml 文件的 Stax 解析期间“复制”xml 块

> ID：12950532
> 
> 赞同：0
> 
> 时间：2012-10-18T08:43:59.520
> 
> 标签：large-files, stax

我有一个非常大的 XML 文件（~3Gb），其结构如下：

```
<stuff>
   <list>
     <list-item id="..."> ... </list-item>
     <list-item id="..."> ... </list-item>
     <list-item id="..."> ... </list-item>
     <list-item id="..."> ... </list-item>
     <list-item id="..."> ... </list-item>    
     ....    
   </list>
</stuff> 
```

我需要基于属性 id 存储整个元素文本，即。`<list-item id="..."> ... </list-item>`在记忆中。在 Stax 中是否有一种简单的方法可以做到这一点，还是我需要手动编写字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:00:59.910

在这种情况下，我建议使用基于 java.util.Scanner 的版本：

```
 Pattern pattern = Pattern.compile("<list-item .+</list-item>");
    Scanner sc = new Scanner(new File("test.xml"));
    for (;;) {
        String e = sc.findWithinHorizon(pattern, 0);
        if (e == null) {
            break;
        }
        System.out.println(e);

        // analize element's id, decide what to do with it

    } 
```

酷，不是吗？

# mysql - 从 Datanucleus/JPA 中获得的结果集中实现对单个实体的运行查询的好模式是什么

> ID：12950534
> 
> 赞同：1
> 
> 时间：2012-10-18T08:44:06.507
> 
> 标签：mysql, jpa, jpql, datanucleus

我基本上是通过运行 JPQL 查询通过 datanucleus 获得一个大小合适的结果集（几千个）。在每一个上，我还想从另一个表中找到引用的数量。数据在 MySQL 数据库中。

例如：

```
List<Instrument> instruments = em().createQuery("SELECT i FROM Instrument AS i").getResultList();
for(Instrument i : instruments)
{
    Query q = em().createQuery("SELECT COUNT(c) FROM Component AS c WHERE c.instrument.id = :id")
    q.setParameter("id", i.getId());
    long count = (Long) q.getSingleResult();
} 
```

所以，基本上我想要仪器列表以及根据上面的示例连接到仪器的组件列表。

我在很多地方都使用过类似的代码，但性能很差。我知道对于 2000 个仪器，我将触发 2000 个额外的查询来计算组件，这会减慢速度。我确信有更好的模式来获得我想要的相同结果。我怎样才能让事情加速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:45:00.043

没错，这不是最优解。但好消息是，所有这些都可以通过一个或最多两个查询来完成。例如，您不必为 each 执行一次计数查询`instrument`。您可以使用分组并通过一个查询获取所有计数：

```
List<Instrument> instruments = em().createQuery("SELECT i FROM Instrument AS i").getResultList();

Query q = em().createQuery("SELECT c.instrument.id, COUNT(c) FROM Component AS c GROUP BY c.instrument.id")
List<Object[]> counts = q.getResultList();

for (Object[] elem : counts) {
    // do something 
    // elem[0] is instrument ID
    // elem[1] is count
} 
```

我还没有检查过，但是您也可以通过将第二个查询作为子查询放在第一个查询中来使用一个查询完成所有操作：

```
SELECT i 
(SELECT COUNT(c) FROM Component AS c WHERE c.instrument.id = i.id)
FROM Instrument AS i 
```

与第一个示例类似，结果列表 elem[0] 将是 an`Instrument`并且 elem[1] 是计数。它的效率可能会降低，因为无论如何数据库都必须为每个仪器执行子查询，但它仍然比您的代码更快，因为它完全发生在数据库端（每个计数查询都没有到数据库的往返）。

# c# - 为什么windows服务看不到环境变量？

> ID：12950537
> 
> 赞同：0
> 
> 时间：2012-10-18T08:44:09.877
> 
> 标签：c#, windows-services, environment-variables

在我的 Windows 服务中，我试图读取环境变量 MY_SCRIPT 的值。但是，该服务看不到它，并且

```
String myScriptPath = Environment.GetEnvironmentVariable("MY_SCRIPT", EnvironmentVariableTarget.User); 
```

返回空字符串。

任何解释为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:48:48.783

这个变量在哪里设置？

环境要么继承自父进程，要么在进程本身中更改。

# sql-server - MS SQL 2008 - 获取数据库中的所有表名及其行数

> ID：12950538
> 
> 赞同：37
> 
> 时间：2012-10-18T08:44:14.320
> 
> 标签：sql-server, sql-server-2008, row

我试图通过应用程序（由其他人开发）确定哪些表受到数据更新的影响。数据库中有 200 多个表，我想避免检查每个表的更改。

### 有没有其他方法可以列出所有表名及其行数？

```
select table_name from information_schema.tables 
```

列出我的数据库购买中的所有表我如何包括行数？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-18T08:46:38.743

```
SELECT sc.name +'.'+ ta.name TableName
 ,SUM(pa.rows) RowCnt
 FROM sys.tables ta
 INNER JOIN sys.partitions pa
 ON pa.OBJECT_ID = ta.OBJECT_ID
 INNER JOIN sys.schemas sc
 ON ta.schema_id = sc.schema_id
 WHERE ta.is_ms_shipped = 0 AND pa.index_id IN (1,0)
 GROUP BY sc.name,ta.name
 ORDER BY SUM(pa.rows) DESC 
```

看到这个：

*   [**SQL SERVER - 查找表中的行数 - 查找数据库中的最大表**。](http://blog.sqlauthority.com/2010/09/08/sql-server-find-row-count-in-table-find-largest-table-in-database-part-2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-06T06:20:32.413

获取数据库中的所有表：

```
select * from INFORMATION_SCHEMA.TABLES 
```

获取数据库中的所有列：

```
select * from INFORMATION_SCHEMA.columns 
```

获取数据库中的所有视图：

```
select * from INFORMATION_SCHEMA.TABLES where table_type = 'view' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T12:07:54.483

为完整性而发布。

如果您正在寻找***所有****数据库中****所有****表的**行数*****（这是我正在寻找的），那么我发现这个[和](https://stackoverflow.com/a/12950581/823393)这个[的](https://stackoverflow.com/q/2875768/823393)组合可以工作。不知道它是否是最优的：****

 ****```
SET NOCOUNT ON
DECLARE @AllTables table (DbName sysname,SchemaName sysname, TableName sysname, RowsCount int )
DECLARE
     @SQL nvarchar(4000)
SET @SQL='SELECT ''?'' AS DbName, s.name AS SchemaName, t.name AS TableName, p.rows AS RowsCount FROM [?].sys.tables t INNER JOIN sys.schemas s ON t.schema_id=s.schema_id INNER JOIN [?].sys.partitions p ON p.OBJECT_ID = t.OBJECT_ID'

INSERT INTO @AllTables (DbName, SchemaName, TableName, RowsCount)
    EXEC sp_msforeachdb @SQL
SET NOCOUNT OFF
SELECT DbName, SchemaName, TableName, SUM(RowsCount), MIN(RowsCount), SUM(1)
FROM @AllTables
WHERE RowsCount > 0
GROUP BY DbName, SchemaName, TableName
ORDER BY DbName, SchemaName, TableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-25T05:22:08.457

> 试试这个，简单又快速

```
SELECT T.name AS [TABLE NAME], I.rows AS [ROWCOUNT] 
FROM   sys.tables AS T 
   INNER JOIN sys.sysindexes AS I ON T.object_id = I.id 
   AND I.indid < 2 ORDER  BY I.rows DESC 
```****

# hadoop - 将文件复制到 HDFS 时出错

> ID：12950539
> 
> 赞同：4
> 
> 时间：2012-10-18T08:44:17.597
> 
> 标签：hadoop, hdfs

我尝试在两个节点上安装 hadoop。两个节点都已启动并正在运行。namenode 在 Ubuntu 10.10 上运行，Datanode 在 Fedora 13 上运行。在将文件从本地文件系统复制到 hdfs 时，我遇到了以下错误。

终端显示：

```
 12/04/12 02:19:15 INFO hdfs.DFSClient: Exception in createBlockOutputStream java.io.OException: Bad connect ack with firstBadLink as 10.211.87.162:9200
    12/04/12 02:19:15 INFO hdfs.DFSClient: Abandoning block blk_-1069539184735421145_1014 
```

namenode 中的日志文件显示：

```
 2012-10-16 16:17:56,723 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: DatanodeRegistration(10.6.2.26:50010, storageID=DS-880164535-10.18.13.10-50010-1349721715148, infoPort=50075, ipcPort=50020):DataXceiver
   java.net.NoRouteToHostException: No route to host
         at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
         at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
         at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
         at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:404)
         at org.apache.hadoop.hdfs.server.datanode.DataXceiver.writeBlock(DataXceiver.java:282)
         at org.apache.hadoop.hdfs.server.datanode.DataXceiver.run(DataXceiver.java:103)
         at java.lang.Thread.run(Thread.java:662) 
```

可用的数据节点显示为 2。我已禁用防火墙和 selinux。hdfs-site.xml 中也进行了以下更改

dfs.socket.timeout -> 360000

dfs.datanode.socket.write.timeout -> 3600000

dfs.datanode.max.xcievers -> 1048576

两个节点都运行 sun-java6-jdk，datanode 包含 Openjdk，但已为 sun java 进行了路径设置。

然而，同样的错误仍然存​​在。

可能是什么解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-26T02:11:02.343

那是因为您的防火墙已打开。

尝试

```
sudo /etc/init.d/iptables stop 
```

如果您在 Ubuntu 上，请执行

```
sudo ufw disable 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:55:08.807

提到失败原因的异常日志是`No route to host`。

尝试`ping 10.6.2.26`测试您的网络连接。

# c++ - 是否可以使用与 2 个互斥锁关联的 1 个条件变量（单独）

> ID：12950540
> 
> 赞同：3
> 
> 时间：2012-10-18T08:44:20.030
> 
> 标签：c++, mutex, condition-variable

我想问一下是否可以使用与 2 个互斥锁关联的 1 个条件变量来进行 2 种数据更新。

基本上，我有thread1和thread2。Thread1 可以等待 2 种数据更新，所以它有 2 个互斥锁，每个互斥锁一个。（我知道我可以对所有这些数据使用一个互斥锁，但这不是这个问题的重点，对吗？）而且我当然不希望它在 data1 上等待 data2 已经可用，所以它只有 1 个条件变量. 而thread2 将同时提供data1 和data2。问题是在thread2中，我不知道thread1现在是在等待data1还是data2，还是根本不等待。

伪代码如下所示：

```
global data:
    cond_var
    mutex1
    data1
    mutex2
    data2

thread1:
    while true
        lock1.lock(mutex1)
        if data1 is not available
        cond_var.wait(lock1)
        if data1 is available
            process data1
        lock1.unlock()

        lock2.lock(mutex2)
        if data2 is not available
            cond_var.wait(lock2)
        if data2 is available
            process data2
        lock2.unlock()

thread2:
    func1:
        lock1.lock(mutex1)
        update data1
        cond_var.notify_all()
        lock1.unlock()

    func2:
        lock2.lock(mutex2)
        update data2
        cond_var.notify_all()
        lock2.unlock() 
```

外界会调用 func1 或 func2 来更新数据。当func1或func2被调用时，它会发信号cond_var，无论是在lock1还是lock2。cond_var 的等待没有被 while 包围，所以如果 cond_var 在 lock1 上被唤醒，但 data2 可用，thread1 会继续处理 data2。

实际的实现是通过 boost::thread，由于我的测试平台是 Linux，所以 boost::thread 应该通过 pthread 实现。

在我阅读的几乎所有关于条件变量的教程和文档中，它只与 1 个互斥锁相关联。所以我很想知道上面的程序是否可以使用，或者根本上存在缺陷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:50:46.280

还行吧。

Boost.Thread 实现了 C++11 线程库（它在 v1.50 之前有一些差异，但现在非常接近）并且该线程库在概念上接近 Pthread 模型，但使用不同的 API，所以我们可以看看那些答案的规格。

C++11 标准中的规则是：

> *Requires:* `lock.owns_lock()` is`true`并且`lock.mutex()`被调用线程锁定，并且要么
> - 没有其他线程在此`condition_variable`对象上等待，要么
> -为所有并发等待的 ( 、 或 ) 线程提供的每个参数返回相同的`lock.mutex()`值。`lock``via wait``wait_for``wait_until`

在您的情况下，互斥锁已正确锁定，并且只有一个线程在 condvar 上等待，因此满足条件。

POSIX 中的规则是等价的，但措辞不同：

> 对同一条件变量使用多个互斥体进行并发`pthread_cond_timedwait()`或操作的效果是不确定的；`pthread_cond_wait()`也就是说，当线程等待条件变量时，条件变量将绑定到唯一的互斥体，并且此（动态）绑定将在等待返回时结束。

同样，您没有并发等待操作。

一般来说，只要您从不等待*同时使用不同的互斥锁，就可以使用具有不同互斥锁的 condvar*. 当等待一个 condvar 时，您将它与一个互斥锁和一个谓词（“条件”）相关联，正如 POSIX 描述的那样，condvar 和互斥锁被“绑定”在一起，任何一个 condvar 一次不得绑定到多个互斥锁. 原因是当 condvar 从等待中唤醒时，它必须重新获取与其关联的互斥锁，如果不同的线程已将它与不同的互斥锁一起使用，它可能会将错误的互斥锁重新锁定在错误的线程中，从而导致混乱。一个线程会醒来，以为它已经重新锁定了它等待的互斥锁，但它实际上锁定了另一个互斥锁，也许它没有任何引用，因此永远无法解锁。僵局和/或未定义的行为以及狮子、老虎和熊，哦，我的。

在您的情况下，没有并发等待，所以没问题。如果您有多个线程在等待，则需要确保两个线程在任何给定的等待中都使用相同的互斥锁...这将很困难，因为您需要一些额外的同步，因此使用起来会更简单两个条件。

# iphone - iframe Safari 中的跨域 cookie

> ID：12950541
> 
> 赞同：11
> 
> 时间：2012-10-18T08:44:25.540
> 
> 标签：iphone, iframe, cookies, safari, cross-domain

我在 iframe 中设置 cookie 时遇到问题（从另一个域加载站点）。
在我的网站 X.COM 我加载`<iframe src='Y.COM'>`

Y.COM 尝试设置 cookie，但 Safari 阻止了它们，因为该站点以前没有访问过。所以加载 Y.COM 失败，因为没有 cookie 就无法工作。有没有办法解决这个问题？

PS 我无法修改 Y.COM 的任何数据。

PSS 我们也可以修改 Safari 的设置 - `"Accept cookies" = "Always"`，但这不是我的解决方案 - 似乎不可能引导每个用户都这样做..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:51:47.420

我尝试了一个类似的问题。一个网络“父”页面在 jquery fancybox i-frame 跨域中打开我的“子”网站。Explorer、Chrome、Firefox、Opera 甚至 Mac 上的 Safari (5.8.1) 都没有问题。但是对于 iPhone、iPad 和 mini iPad，i-frame 中的会话会丢失。

这意味着每次点击 i-frame 中的元素（网站在 aspx 中）都会启动一个新会话。

我们以非常简单的方式解决问题：

当父网站启动时，它直接调用子网站中的页面（而不是在 i-frame 中）。在这个页面中，我只是设置了一个会话变量，然后我重定向到了父网站。现在，当子网站在 iframe 中打开时，会保留会话。

# c++ - 使用 bzip 提升 iostream - 未解析的符号

> ID：12950544
> 
> 赞同：14
> 
> 时间：2012-10-18T08:44:33.310
> 
> 标签：c++, boost, unresolved-external, bzip2, boost-iostreams

我的项目使用的是带有 bzip2 的 Boost iostreams 的旧版本。我现在正在尝试升级到 Boost 1.51。起初我没有用 bzip 编译，所以很明显我让链接器大喊 libboost_bzip2-vc100-mt-sgd-1_51.lib 丢失。然后我按照[这些说明](https://stackoverflow.com/questions/7282645/how-to-build-boost-iostreams-with-gzip-and-bzip2-support-on-windows)（并添加了静态标志）来编译这个文件。

但是，现在运行链接器会返回一堆缺少的符号：

```
>error LNK2001: unresolved external symbol "protected: __thiscall boost::iostreams::detail::bzip2_base::~bzip2_base(void)" (??1bzip2_base@detail@iostreams@boost@@IAE@XZ)
>error LNK2001: unresolved external symbol "protected: __thiscall boost::iostreams::detail::bzip2_base::bzip2_base(struct boost::iostreams::bzip2_params const &)" (??0bzip2_base@detail@iostreams@boost@@IAE@ABUbzip2_params@23@@Z)
>error LNK2001: unresolved external symbol "int const boost::iostreams::bzip2::stream_end" (?stream_end@bzip2@iostreams@boost@@3HB)
... 
```

有什么想法为什么 lib 不包含所有这些代码？我错过了什么？我在 Windows 上使用 VS2010。

* * *

编辑：明白了！

有一个旧版本的 libboost_iostreams-vc100-mt-sgd-1_51.lib，它是在没有 bzip 的情况下编译的。我仍然不确定的是：对于我使用的原始编译：

```
>b2 --with-iostreams -sBZIP2_SOURCE=D:\Work\external\bzip2-1.0.6 -sZLIB_SOURCE=d:\work\external\zlib-1.2.3 runtime-link=static 
```

这产生了以下文件：

```
libboost_bzip2-vc100-mt-s-1_51.lib
libboost_bzip2-vc100-mt-sgd-1_51.lib 
```

对于“正确”的编译（解决了问题），我使用了：

```
>b2 --with-iostreams -sBZIP2_SOURCE=D:\Work\external\bzip2-1.0.6 runtime-link=static 
```

即简单地删除了 zlib，因为它对我来说是不必要的。它产生了：

```
libboost_bzip2-vc100-mt-s-1_51.lib
libboost_bzip2-vc100-mt-sgd-1_51.lib
libboost_iostreams-vc100-mt-s-1_51.lib
libboost_iostreams-vc100-mt-sgd-1_51.lib 
```

为什么 iostreams 库不是在原始编译中生成的？很奇怪。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-28T21:13:37.347

来自 EK 的问题回答：

有一个旧版本的 libboost_iostreams-vc100-mt-sgd-1_51.lib，它是在没有 bzip 的情况下编译的。我仍然不确定的是：对于我使用的原始编译：

```
>b2 --with-iostreams -sBZIP2_SOURCE=D:\Work\external\bzip2-1.0.6 -sZLIB_SOURCE=d:\work\external\zlib-1.2.3 runtime-link=static 
```

这产生了以下文件：

```
libboost_bzip2-vc100-mt-s-1_51.lib
libboost_bzip2-vc100-mt-sgd-1_51.lib 
```

对于“正确”的编译（解决了问题），我使用了：

```
>b2 --with-iostreams -sBZIP2_SOURCE=D:\Work\external\bzip2-1.0.6 runtime-link=static 
```

即简单地删除了 zlib，因为它对我来说是不必要的。它产生了：

```
libboost_bzip2-vc100-mt-s-1_51.lib
libboost_bzip2-vc100-mt-sgd-1_51.lib
libboost_iostreams-vc100-mt-s-1_51.lib
libboost_iostreams-vc100-mt-sgd-1_51.lib 
```

为什么 iostreams 库不是在原始编译中生成的？很奇怪。

# c# - unity：无法构造类型LogWriter

> ID：12950547
> 
> 赞同：6
> 
> 时间：2012-10-18T08:44:44.573
> 
> 标签：c#, unity-container

对于以下“项目”，我在解决 Unity for DI 时遇到了一个非常烦人且莫名其妙的错误。

> InvalidOperationException - 无法构造类型 LogWriter。您必须配置容器以提供此值。
> 
> ？例如消息；“依赖项解析失败，类型 = \"WindowsFormsApplication1.Performance\"，名称 = \"(none)\"。\r\n在解析时发生异常。\r\n异常是：InvalidOperationException - 类型 LogWriter 不能已构造。您必须配置容器以提供此值。\r\n--------------------------------- -------------\r\n出现异常时，容器为：\r\n\r\n Resolving WindowsFormsApplication1.Performance,(none)\r\n Resolving parameter \ "lw\" 的构造函数 WindowsFormsApplication1.Performance(Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter lw, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionManager em)\r\n 正在解决 Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter,(none) \r\n"
> 
> ?ex.StackTrace; " 在 Microsoft.Practices.Unity.UnityContainer.DoBuildUp(Type t, Object existing, String name, IEnumerable `1 resolverOverrides) in e:\\Builds\\Unity\\UnityTemp\\Compile\\Unity\\Unity\\Src\\UnityContainer.cs:line 515\r\n at Microsoft.Practices.Unity.UnityContainer.DoBuildUp(Type t, String name, IEnumerable`1 resolverOverrides) 在 e:\Builds\Unity\UnityTemp\Compile\Unity\Unity\Src\UnityContainer.cs:line 485\ r\n 在 Microsoft.Practices.Unity.UnityContainer.Resolve(Type t, String name, ResolverOverride[] resolverOverrides) 在 e:\Builds\Unity\UnityTemp\Compile\Unity\Unity\Src\UnityContainer.cs:line 173\ r\n 在 Microsoft.Practices.Unity.UnityContainerExtensions.Resolve[T](IUnityContainer container, ResolverOverride[] overrides) 在 e:\Builds\Unity\UnityTemp\Compile\Unity\Unity\Src\UnityContainerExtensions.cs:line 504\ r\n 在 D:\Devzone\Tasking\WindowsFormsApplication1\Form1.cs:line 33 中的 WindowsFormsApplication1.Form1.OnLoad(EventArgs e)"

以一种形式：

```
 protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);

            try
            {
                IUnityContainer container = new UnityContainer();
                Performance p = container.Resolve<Performance>();
            }
            catch (Exception ex)
            {

            }
        } 
```

依赖类：

```
 public class Performance
    {
        public Performance(LogWriter lw, ExceptionManager em)
        {
        }
    } 
```

配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
        <section name="exceptionHandling" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration.ExceptionHandlingSettings, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
    </configSections>
    <loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
        <listeners>
            <add name="Event Log Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                source="Enterprise Library Logging" formatter="Text Formatter"
                log="" machineName="." traceOutputOptions="None" />
        </listeners>
        <formatters>
            <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
                name="Text Formatter" />
        </formatters>
        <categorySources>
            <add switchValue="All" name="General">
                <listeners>
                    <add name="Event Log Listener" />
                </listeners>
            </add>
            <add switchValue="All" name="Category2" />
        </categorySources>
        <specialSources>
            <allEvents switchValue="All" name="All Events" />
            <notProcessed switchValue="All" name="Unprocessed Category" />
            <errors switchValue="All" name="Logging Errors &amp; Warnings">
                <listeners>
                    <add name="Event Log Listener" />
                </listeners>
            </errors>
        </specialSources>
    </loggingConfiguration>
    <exceptionHandling>
        <exceptionPolicies>
            <add name="Policy">
                <exceptionTypes>
                    <add name="All Exceptions" type="System.Exception, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                        postHandlingAction="NotifyRethrow" />
                </exceptionTypes>
            </add>
        </exceptionPolicies>
    </exceptionHandling>
</configuration> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T08:54:34.150

您需要将 Enterprise Library 扩展添加到您的容器中。没有它，容器就不会读取配置文件，因此不知道如何创建 Entlib 对象，例如 LogWriter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-27T12:22:22.663

[尝试获取 LogWriter 类型的实例时发生激活错误，键“”](https://stackoverflow.com/questions/6189154/activation-error-occured-while-trying-to-get-instance-of-type-logwriter-key)

检查您的配置文件，它必须具有正确的默认“loggingConfiguration”部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:49:35.950

为了让 Unity 构造你的 Performance 类，它需要知道如何构造 ILogWriter 的实现。

我在您的代码中看不到您告诉 Unity 为 ILogWriter 接口创建什么类的任何地方，所以我怀疑您可能需要添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:51:04.187

LogWriter 没有空构造函数或具有所有具体类型参数的构造函数：[LogWriter Constructor](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.logging.logwriter.logwriter.aspx)。

所以 Unity 无法构建它，正如它所说，它需要你的帮助，通过配置容器来提供实现。

作为确认， ExceptionManager 可能会被解决，因为它只有一个[构造函数](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.exceptionhandling.exceptionmanager.exceptionmanager%28v=pandp.50%29.aspx)，也是无参数的:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T08:53:56.620

试试这个：

```
protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);

            try
            {
                IUnityContainer container = new UnityContainer();
                container.RegisterType<ILogWriter, LogWriter>();
                container.RegisterType<ExceptionManager>();
                container.RegisterType<Performance>(new InjectionConstructor(typeof(ILogWriter), typeof(ExceptionManager));                    
                Performance p = container.Resolve<Performance>();
            }
            catch (Exception ex)
            {

            }
        } 
```

# visual-studio-2010 - 无需安装本地服务器的 SharePoint 2010 开发

> ID：12950548
> 
> 赞同：7
> 
> 时间：2012-10-18T08:44:50.157
> 
> 标签：visual-studio-2010, sharepoint, dll, sharepoint-2010

我想在不安装本地 SharePoint 的情况下开发 SharePoint 2010 Web 部件。我的意思是我不想安装 SharePoint 服务器，因为我不需要它而且它太大了。

我发现了一些关于此的问题，但我仍然无法使其正常工作。我发现了一个关于此的博客条目：http: [//techblog.hk.agenda-asia.com/2010/10/29/create-sharepoint-project-without-install-sharepoint-server/](http://techblog.hk.agenda-asia.com/2010/10/29/create-sharepoint-project-without-install-sharepoint-server/)

我尝试按照该博客的说明进行操作。现在我可以使用 Visual Studio 创建 SharePoint 2010 项目。问题是 Visual Studio 找不到 SharePoint dll。即使我将它们复制到本地目录并使用密钥 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework\v3.5\AssemblyFoldersEx\MyAssemblies 将该文件夹添加到注册表（如建议的博客条目）

我如何告诉 Visual Studio SharePoint dll 在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:10:16.387

您可以从 14 hive 中的 ISAPI 文件夹中的 sharepoint 获取 DLL：

C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI

只需将 dll 复制到本地计算机并在项目中引用它们即可编译。

当您调试/部署您的项目时，您会意识到这是一个巨大的痛苦，因为您将无法在本地测试您的代码。

**更新**：Sharepoint 2010 评估机器不再可用。所以下面的信息不再是最新的。现在最好的选择是从 MSDN 获取 Sharepoint 2010，如果您有订阅的话。

我的建议是获取 Microsoft 2010 Information Worker Demonstration and Evaluation Virtual Machine (SP1)：

[http://www.microsoft.com/en-au/download/details.aspx?id=27417](http://www.microsoft.com/en-au/download/details.aspx?id=27417)

它是一个带有 Sharepoint 2010 的虚拟机，它配备了您需要的所有工具，例如 infopath 和预安装的 Visual Studio。

唯一的问题是您需要 2008 server r2 来运行它。

我已经成功地将机器转换为 VMWare，并且我很高兴按照这篇文章的说明在 Windows 7 下运行它：

[http://sharepointyankee.com/2010/06/03/converting-the-sharepoint-and-office-2010-information-worker-virtual-machines-to-vmware-from-hyper-v/](http://sharepointyankee.com/2010/06/03/converting-the-sharepoint-and-office-2010-information-worker-virtual-machines-to-vmware-from-hyper-v/)

确保您阅读了该帖子的评论，因为有几个问题。

还要确保你有一台有点脏的机器。我正在使用具有 8 gig ram、SSD 的 i7 运行它，并为 VM 分配了 4 个内核，并且运行平稳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T18:32:53.623

好的，回答原来的问题：

1.  从 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI 将 SharePoint dll 从实际的 SharePoints 服务器（无论如何您都需要其中一个）复制到您的开发机器 - 您不需要放置它们具有相似的结构 - 选择你想要的任何东西。

2.  在 Visual Studio 中，要么直接引用这些 dll（添加引用、浏览），要么在项目设置中的“引用路径”中添加一个文件夹。

3.  如果您是多个人在项目上工作，如果您使用不同版本/服务包的 SharePoint dll，您可能会遇到问题 - 然后确保引用将“特定版本”标志设置为 true（每个引用）

# java - java从带有重音符号的字符串中保存pdf

> ID：12950549
> 
> 赞同：1
> 
> 时间：2012-10-18T08:44:52.213
> 
> 标签：java, encoding, pdf-generation, itext

我有一个带有法国口音的简单字符串。我正在尝试使用 ITextRenderer 将其保存到 pdf 中。问题是所有重音都从生成的 pdf 中删除。

要保存的输入字符串来自我的速度模板。在那里，我在做 StringEscapeUtils.escape(StringEscapeUtils.unescape(stringWithAccents))，这个过程给了我输入字符串，比如补充：Visa&Pourboires"。

我的代码：

```
 String documentHtml = "Suppl&eacute;ment : &agrave;&egrave"
         DocumentBuilder builder;
        try {
            DocumentBuilderFactory fac = DocumentBuilderFactory.newInstance();
            fac.setFeature("http://xml.org/sax/features/namespaces", false);
            fac.setFeature("http://xml.org/sax/features/validation", false);
            fac.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
            fac.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
            builder = fac.newDocumentBuilder();
            byte[] docByte = documentHtml.getBytes("UTF-8");
            ByteArrayInputStream is = new ByteArrayInputStream(docByte);
            Document doc = builder.parse(is);
            is.close();
            File file = new File(this.getFolder(), this.getFileName());
            if (file.exists()) {
                file.delete();
            }

            // save pdf
            OutputStream os = new FileOutputStream(file);
            ITextRenderer renderer = new ITextRenderer();
            renderer.setDocument(doc, file.getParentFile().getAbsolutePath());
            renderer.layout();
            renderer.createPDF(os, true);
            os.close();

            return this.getFolder().getAbsolutePath() + "/" + this.getFileName();
        } catch (ParserConfigurationException e) {
            LOGGER.error("Error while parsing the configuration " + e.getMessage(), e);
            throw new BOServiceException("Error while parsing the configuration : " + e.getMessage(), e);
        } catch (UnsupportedEncodingException e) {
            LOGGER.error("Encoding error :  " + e.getMessage(), e);
            throw new BOServiceException("Encoding error : " + e.getMessage(), e);
        } catch (SAXException e) {
            LOGGER.error("Error in the document because of SAX :  " + e.getMessage(), e);
            throw new BOServiceException("Error in the document because of SAX :  " + e.getMessage(), e);
        } catch (IOException e) {
            LOGGER.error("Error due to io problem : " + e.getMessage(), e);
            throw new BOServiceException("Error due to io problem :" + e.getMessage(), e);
        } 
```

所以你知道为什么我的编码不起作用？为什么在结果pdf中我看不到像àè这样的字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:06:45.457

尝试将编码从 UTF-8 更改为 ISO-8859-1。

# jquery - 如何将 $.getJSON 超时设置为无限期

> ID：12950551
> 
> 赞同：3
> 
> 时间：2012-10-18T08:44:53.187
> 
> 标签：jquery

如何将 $.getJSON 超时设置为无限期

浏览器将默认超时设置为 20 秒，但我希望它无限期地进行长轮询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:49:47.910

使用 jQuery.ajaxSetup 和超时设置：

> 为请求设置超时（以毫秒为单位）。[..] 超时时间从 $.ajax 调用开始；如果其他几个请求正在进行中并且浏览器没有可用的连接，则请求可能会在发送之前超时。在 jQuery 1.4.x 及以下版本中，如果请求超时，XMLHttpRequest 对象将处于无效状态；访问任何对象成员都可能引发异常。仅在 Firefox 3.0+ 中，脚本和 JSONP 请求不能被超时取消；即使脚本在超时期限之后到达，它也会运行。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[http://api.jquery.com/jQuery.ajaxSetup/](http://api.jquery.com/jQuery.ajaxSetup/)

```
$.ajaxSetup({
  timeout: 0
}); 
```

# iphone - 我的 iPad 在我对其进行测试时变得太热 [正在运行项目]

> ID：12950552
> 
> 赞同：1
> 
> 时间：2012-10-18T08:44:54.620
> 
> 标签：iphone, xcode, ipad, ipad-2

当我在我的 iPad 2 视网膜上测试我的新应用程序时，我注意到我的设备温度太高了，有人知道为什么吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:55:15.953

在您的设备上使用“能源诊断工具”等仪器运行您的应用程序。如果您的应用程序消耗大量能量，电池将很快耗尽。电池快速消耗会产生热量。使用 Xcode Instruments，您可以发现您的应用程序是否存在任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:45:55.410

我认为是电池问题。

看到这个链接：[iPad电池](http://ipod.about.com/od/ipad/a/conserve-ipad-battery-life.htm)

# javascript - 如何根据数据属性中对象的属性选择元素？

> ID：12950554
> 
> 赞同：2
> 
> 时间：2012-10-18T08:44:57.177
> 
> 标签：javascript, jquery, jquery-selectors, custom-data-attribute

如果我的标记如下所示：

```
<div data-test="{ "value" : "bar", "_id" : 1234, "name" : "john", "age" : 25 }">...</div>
<div data-test="{ "value" : "foo", "_id" : 1235, "name" : "paul", "age" : 26 }">...</div>
<div data-test="{ "value" : "drummer", "_id" : 1236, "name" : "ringo", "age" : 22 }">...</div> 
```

如果我只有键“bar”或“foo”，我将如何使用 JQuery 选择特定元素？

我可以为每一行提取整个对象并遍历它以寻找匹配项，但如果有更有效的方法，我宁愿不这样做。

如何根据对象的属性干净地选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:53:38.803

试试这个

```
$('div[data-test$=": bar }"]')
$('div[data-test$=": foo }"]') 
```

更多细节[在这里](http://api.jquery.com/attribute-ends-with-selector/)

**更新：** 如果属性不以 bar/foo 结尾，那么您可以尝试`contains selector`

```
$('div[data-test*="'value' : 'bar'"]')
$('div[data-test*="'value': 'foo'"]') 
```

更多细节[在这里](http://api.jquery.com/attribute-contains-selector/)

或者，如果它以值开头，您也可以使用[开始选择器](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:41:26.767

您可以使用：

```
$("div").filter(function() {
    return $(this).data("test").value == "bar";
}) 
```

`jQuery.data()`自动将 JSON 格式的数据值解析为相应的对象。

[小提琴](http://jsfiddle.net/barmar/qEFSe/1/)

# arrays - 将共享内存复制到全局内存导致错误的部分为零

> ID：12950555
> 
> 赞同：0
> 
> 时间：2012-10-18T08:44:58.877
> 
> 标签：arrays, cuda, copy, shared-memory

我写了一个简单的CUDA内核如下：

```
 __global__ void cudaDoSomethingInSharedMemory(float* globalArray, pitch){

      __shared__ float sharedInputArray[1088];
      __shared__ float sharedOutputArray[1088];

      int tid = threadIdx.x //Use 1D block
      int rowIdx = blockIdx.x //Use 1D grid

      int rowOffset = pitch/sizeof(float);//Offset in elements (not in bytes)

       //Copy data from global memory to shared memory (checked)
       while(tid < 1088){
           sharedInputArray[tid] = *(((float*) globalArray) + rowIdx*rowOffset + tid);
           tid += blockDim.x;
           __syncthreads();
       }
       __syncthreads();

       //Do something (already simplified and the problem still exists)
       tid = threadIdx.x;
       while(tid < 1088){
           if(tid%2==1){
              if(tid == 1087){
                 sharedOutputArray[tid/2 + 544] = 321;
              }
              else{
                  sharedOutputArray[tid/2 + 544] = 321;
              }
           }
           tid += blockDim.x;
           __syncthreads();
       }

       tid = threadIdx.x;
       while(tid < 1088){
           if(tid%2==0){
               if(tid==0){
                    sharedOutputArray[tid/2] = 123;
               }
               else{
                    sharedOutputArray[tid/2] = 123;
               }

           }
           tid += blockDim.x;
           __syncthreads();
       }
       __syncthreads();

       //Copy data from shared memory back to global memory (and add read-back for test)
       float temp = -456;
       tid = threadIdx.x;
       while(tid < 1088){
           *(((float*) globalArray) + rowIdx*rowOffset + tid) = sharedOutputArray[tid];
            temp = *(((float*) globalArray) + rowIdx*rowOffset + tid);//(1*) Errors are found.
            __syncthreads();
            tid += blockDim.x;
       }
       __syncthreads();
    } 
```

代码是将“sharedOutputArray”从“interlaced”更改为“clustered”：“123 321 123 321 ... 123 321”更改为“123 123 123.. 123 321 321 321...321”并输出clustered结果到全局内存数组“globalArray”。“globalArray”由“cudaMallocPitch()”分配

该内核用于处理二维数组。这个想法很简单：一行一个块（所以一维网格，块数等于行数），每行有 N 个线程。行号是 1920，列号是 1088。所以有 1920 个块。

问题是：当 N（一个块中的线程数）为 64、128 或 256 时，一切正常（至少看起来正常）。但是，当 N 为 512 时（我使用的是 GTX570，CUDA 计算能力为 2.0，一个块的每个维度的最大大小为 1024），错误发生了。

错误是：全局内存中从位置 256 到 287（索引从 0 开始，错误条长度为 32 个元素，128 位）的一行中的元素（每个元素是一个 4 字节的浮点数）是 0 而不是 123 . 它看起来像“123 123 123 ... 0 0 0 0 0 ... 0 123 123 ...”。我检查了上面的行 (1*)，这些元素在“sharedOutputArray”中为 123，当在 (1*) 中读取元素（例如 tid==270）时，“temp”显示为 0。我试图查看“tid” ==255" 和 "tid==288" 元素为 123（正确）。这种类型的错误几乎发生在所有 1920 行中。

我试图“同步”（可能已经过度同步）线程，但它不起作用。让我感到困惑的是为什么 64,128 或 256 个线程工作正常，但 512 没有工作。我知道使用 512 线程可能不会针对性能进行优化，我只想知道我在哪里犯了错误。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:55:45.363

您正在使用`__syncthreads()`内部条件代码，其中条件不会在块的线程之间统一评估。[不要那样做](http://docs.nvidia.com/cuda-c-programming-guide/index.html#synchronization-functions)。

在您的情况下，您可以简单地删除循环`__syncthreads()`内部`while`，因为它没有任何作用。

# android - 发出大型 REST 请求

> ID：12950559
> 
> 赞同：1
> 
> 时间：2012-10-18T08:45:05.617
> 
> 标签：android, rest

我有一个无法更改的 REST 服务，其中包含上传图像的方法，编码为 Base64 字符串。

问题是图像的大小可以达到 5-10MB，甚至更多。当我尝试在设备上构建这种大小的图像的 Base64 表示时，我得到了 OutOfMemory 异常。

但是，我可以一次编码字节块（比如说 3000 个），但这没用，因为我需要整个字符串来创建一个 HttpGet/HttpPost 对象：

```
DefaultHttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet("www.server.com/longString");
HttpResponse response = client.execute(httpGet); 
```

有没有办法解决这个问题？

编辑：尝试使用 Heiko Rupp 的建议 + android 文档，我在以下行出现异常（“java.io.FileNotFoundException： [http ://www.google.com”）： InputStream in = urlConnection.getInputStream();](http://www.google.com)

```
 try {
        URL url = new URL("http://www.google.com");
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        urlConnection.setDoOutput(true);
        urlConnection.setChunkedStreamingMode(0);

        OutputStream out = new BufferedOutputStream(urlConnection.getOutputStream());
        out.write("/translate".getBytes());

        InputStream in = urlConnection.getInputStream();
        BufferedReader r = new BufferedReader(new InputStreamReader(in));
        StringBuilder total = new StringBuilder();
        String line;
        while ((line = r.readLine()) != null) {
            total.append(line);
        }           
        System.out.println("response:" + total);

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我错过了什么吗？我需要执行的 GET 请求如下所示：“ *http://myRESTService.com/myMethod?params=LOOONG-String* ”，所以想法是连接到*http://myRESTService.com/myMethod*然后输出一个一次长字符串的几个字符。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:58:03.060

您应该尝试使用`URLConnection`apache http 客户端而不是 apache http 客户端，因为这不需要您将要发送的对象保存在内存中，而是您可以执行以下操作：

**伪代码！**

```
HttpUrlConnection con = restUrl.getConnection();
while (!done) {
  byte[] part = base64encode(partOfImage);
  con.write (part);
  partOfImage = nextPartOfImage();
}
con.flush();
con.close(); 
```

同样在 Android 2.2 之后 Google 推荐`URLConnection`over the http 客户端。[请参阅DefaultHttpClient](http://developer.android.com/reference/org/apache/http/impl/client/DefaultHttpClient.html)的描述。

您可能想要查看的另一件事是要发送的数据量。`URLConnection`通过移动网络传输 10 MB + base64 将需要相当长的时间（即使使用 gzip 压缩，如果服务器端接受它，它会透明地启用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:58:32.720

您必须阅读此 REST 服务的文档，此类服务不会要求您在 GET 中发送如此长的数据。图像始终作为 POST 发送。POST 数据始终位于请求的末尾，并且允许迭代添加。

# jquery - 将自定义规则添加到 jquery 验证以检查唯一用户名

> ID：12950560
> 
> 赞同：0
> 
> 时间：2012-10-18T08:45:10.680
> 
> 标签：jquery, validation

我正在尝试添加一个自定义规则来检查我的 jquery 验证函数中用户名的唯一性，但它不返回任何结果。当我提醒 msg 变量时，它会正确提醒。

这是我的代码：

```
jQuery(document).ready(function() {
    var validator = $("#frmregister").validate({
        rules: {
            "txtName":"required",
            txtuName: {
                required:true,
                usernameCheck:true    // remote check for duplicate username
            },
        },
        messages: {
            txtuName:{
                required:"Please enter User name",
                usernameCheck:"this username is already in use."
            },
        },
        highlight: function( element, errorClass, validClass ) {
            $(element).removeClass(validClass);
        },
        errorElement: 'div'
    });
});

jQuery.validator.addMethod('usernameCheck', function(txtuName) {
    var burl=$("#bseurl").val();

    //alert(burl);
    var postURL = burl+"home/usernamechk";
    //alert(postURL);
    var cnt = $("#frmregister").serialize();

   jQuery.ajax({
      type: "POST",
      data: cnt,
      url: postURL,
      success: function(msg) {
          result = (msg== 2) ? true : false;
      }
      return result;
   });
}, ''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:03:41.293

这看起来不像是有效的 Javascript 语法。`return result`是在一个物体里面。但真正的问题是 AJAX 是异步的，因此验证器方法返回时无需等待 AJAX 的结果。

jquery-validate 提供了一种`remote:`验证方法，负责等待响应。服务器只需以 JSON 格式返回 true 或 false。

# c# - 调色板位图 - 分形颜色循环

> ID：12950561
> 
> 赞同：0
> 
> 时间：2012-10-18T08:45:10.880
> 
> 标签：c#, winforms, bitmap, fractals, pallet

我正在尝试在 C# windows 窗体上使用现有的位图图像，它是渲染的 MandleBrot 分形。我想实现颜色循环。必须使用调色板图像来完成。这是我的代码，我被困了好几天，无法让它工作。代码必须在 timer 方法中。

```
 private void timer1_Tick(object sender, EventArgs e)
    {
                   Bitmap bitmap2 = new Bitmap(640, 480,PixelFormat.Format8bppIndexed);

        ColorPalette palette = bitmap2.Palette;

        for (int i = 0; i < 256; i += 3)
        {
            Color b = new Color(); 
            b = Color.FromArgb(i);
            bitmap2.Palette.Entries.SetValue(b, i);
           //b = Color.FromArgb(palette[i], palette[i + 1], palette[i + 2]);
           // bitmap.Palette.Entries.SetValue(b, i);
            //bitmap.Palette = palette;
        } 

        mandelbrot();
    } 
```

原始图像称为位图，调色板需要是位图2。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:44:55.143

将[另一个答案](https://stackoverflow.com/a/12894915/21679)与我的结合起来：

```
var bitmap = new Bitmap(width, height, width, PixelFormat.Format8bppIndexed);

ColorPalette palette = bitmap.Palette;
palette.Entries[0] = Color.Black;
for (int i = 1; i < 256; i++)
{
    // set to whatever colour here...
    palette.Entries[i] = FromHsv(360.0*i/256, 1, 1);
}
bitmap.Palette = palette;

public Color FromHsv(double hue, double saturation, double value)
{
   int hi = Convert.ToInt32(Math.Floor(hue / 60)) % 6;
   double f = hue / 60 - Math.Floor(hue / 60);
   value = value * 255;
   int v = Convert.ToInt32(value);
   int p = Convert.ToInt32(value * (1 - saturation));
   int q = Convert.ToInt32(value * (1 - f * saturation));
   int t = Convert.ToInt32(value * (1 - (1 - f) * saturation));

   if (hi == 0)
       return Color.FromArgb(255, v, t, p);
   else if (hi == 1)
       return Color.FromArgb(255, q, v, p);
   else if (hi == 2)
       return Color.FromArgb(255, p, v, t);
   else if (hi == 3)
       return Color.FromArgb(255, p, q, v);
   else if (hi == 4)
       return Color.FromArgb(255, t, p, v);
   else
       return Color.FromArgb(255, v, p, q);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:40:07.100

```
ColorPalette palette = originalBitmap.Palette;
Color first = palette.Entries[0];
for (int i = 0; i < (palette.Entries.Length - 1); i++)
{
    palette.Entries[i] = palette.Entries[i + 1];
}
palette.Entries[(palette.Entries.Length - 1)] = first;
originalBitmap.Palette = palette; 
```

# ssl - 站点 SSL 导致不同的目录

> ID：12950562
> 
> 赞同：0
> 
> 时间：2012-10-18T08:45:11.670
> 
> 标签：ssl

我在我的网站上启用了 SSL。我的问题是 https 导致不同的目录。SSL 的目录应该相同。我正在使用 Parallel Plesk 并不太了解它。你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:50:07.013

一些托管公司为您提供 SSL，但它有自己的目录。预计您会将任何需要 SSL 的页面放在该目录中。

这不是最好的设置，但看起来你已经安排好了。

# hudson - 如何将 testng 报告写入 html.jelly？

> ID：12950563
> 
> 赞同：3
> 
> 时间：2012-10-18T08:45:12.793
> 
> 标签：hudson, testng

我使用 email-ext-plugin 在 hudson 生成报告，并检查 $HUDSON_ROOM\plugins\email-ext\WEB-INF\classes\hudson\plugins\emailext\templates\html.jelly 中的模板 html.jelly，但我不要如何将 testng 测试结果添加到这个果冻文件中。

html.jelly 中的 junit 脚本，有人可以知道脚本的含义吗？例如，it.JUnitTestResult 的含义是什么？“it”对象变量来自哪里？

```
<j:set var="junitResultList" value="${it.JUnitTestResult}" />
<j:if test="${junitResultList.isEmpty()!=true}">
  <TABLE width="100%">
    <TR><TD class="bg1" colspan="2"><B>JUnit Tests</B></TD></TR>
    <j:forEach var="junitResult" items="${it.JUnitTestResult}">
      <j:forEach var="packageResult" items="${junitResult.getChildren()}">
        <TR><TD class="bg2" colspan="2"> Name: ${packageResult.getName()} Failed: ${packageResult.getFailCount()} test(s), Passed: ${packageResult.getPassCount()} test(s), Skipped: ${packageResult.getSkipCount()} test(s), Total: ${packageResult.getPassCount()+packageResult.getFailCount()+packageResult.getSkipCount()} test(s)</TD></TR>
        <j:forEach var="failed_test" items="${packageResult.getFailedTests()}">
          <TR bgcolor="white"><TD class="test_failed" colspan="2"><B><li>Failed: ${failed_test.getFullName()} </li></B></TD></TR>
        </j:forEach>
      </j:forEach> 
    </j:forEach>  
  </TABLE>  
<BR/>
</j:if> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:14:29.830

`it`是对[`ScriptContentBuildWrapper`](https://github.com/jenkinsci/email-ext-plugin/blob/master/src/main/java/hudson/plugins/emailext/plugins/content/ScriptContentBuildWrapper.java)类的引用。

`${it.JUnitTestResult}`返回一个`List<TestResult>`对象。

# nginx - Nginx通配符代理，将子域传给服务器（上游代理）

> ID：12950572
> 
> 赞同：16
> 
> 时间：2012-10-18T08:45:56.697
> 
> 标签：nginx, wildcard, wildcard-subdomain

我希望能够将子域 .domain.com 传递**给**.domain.com apache 服务器，并带有**子域**信息。

我想为域创建一个 nginx 缓存，就像通配符一样，但将**子域**传递到目的地（也有 apache 巫婆通配符）。到目前为止，我通过**proxy_set_header Host $host;传递信息。**但我想在 apache 服务器上请求子域。

```
 upstream domain.com {
    server 172.1.1.1:80 weight=50 fail_timeout=30s;
  }

  server {
    server_name *.domain.com;

    location / {
      proxy_pass http://domain.com;
      #proxy_pass $request;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $host;
     }

    location ~* ^.+.    (jpg|jpeg|gif|png|ico|zip|tgz|gz|rar|bz2|doc|xls|exe|pdf|ppt|txt|tar|mid|midi|wav|bmp|rtf|js|swf)$ {
     proxy_pass http://topmanagergame.com;
     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
     proxy_cache my-cache;
     proxy_cache_valid  200 302  30m;
     proxy_cache_valid  404      1m;
    }

    access_log /var/log/nginx/domain.com.log main;
    error_log off;
 } 
```

您认为我可以将 proxy_pass 与 upstream 一起使用吗？

```
Nginx (*wildcard_domain.com) --(cache)--> Apache (*wildcard_domain.com)
Nginx (anything.domain.com) --(cache)--> Apache (anything.domain.com) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-25T01:44:56.847

```
upstream somestring {
    server domain2.com:80 weight=50 fail_timeout=30s;
}

server {
    listen  80;
    server_name *.domain.com;

    server_name ~^(?<subdomain>.+)\.domain\.com$;

    location / {
        proxy_pass http://somestring;
        proxy_set_header   Host             $subdomain.domain2.com;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-01T16:51:33.513

所以我试图找到这个问题的答案并一直在寻找这个帖子。但我认为 dmytrivv 的答案已经过时了。在我们的场景中，我们同时拥有通配符域（例如 *.mydomain.com）和自定义域（例如fullycustomdomain.com）。但是您可以通过使用*proxy_set_header Host $host;来解决这两个问题。* 并在收听结束时*设置默认值。*

```
upstream qaweb {
    # Servers in the web farm
    server ip-notreal-name.ec2.internal:80;
}

server {
        listen 443 ssl default;

        ssl_certificate     certs/mydomain.com.crt;
        ssl_certificate_key certs/mydomain.com.key;

        # Support for wildcard domains
        server_name admin.mydomain.com *.mydomain.com "";

        location / {
                # Turn off access logging so we don't fill the hardrive
                access_log      off;
                proxy_pass http://qaweb;
                proxy_set_header Host $host;
                # So that the correct IP shows up in the log once libapache2-mod-rpaf is installed
                proxy_set_header X-Real-IP  $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
} 
```

请注意，我们还将它用作 TLS 终止代理。

您还可以在这里找到更多关于如何使用 proxy_pass 的示例[https://www.liaohuqiu.net/posts/nginx-proxy-pass/](https://www.liaohuqiu.net/posts/nginx-proxy-pass/)

# php - 为什么 Yahoo Social SDK for PHP 的示例代码总是为会话变量返回 NULL？

> ID：12950575
> 
> 赞同：6
> 
> 时间：2012-10-18T08:46:13.207
> 
> 标签：php, api, sdk, yahoo, social

[我正在尝试从 Yahoo Social SDK for PHP 页面获取示例代码，但没有成功。](http://developer.yahoo.com/social/sdk/php/)

这是该网站的代码片段：

```
<?php  
  require("Yahoo.inc");  

  // Your Consumer Key (API Key) goes here.  
  define('CONSUMER_KEY', "");  

  // Your Consumer Secret goes here.  
  define('CONSUMER_SECRET', "");  

  // Your application ID goes here.  
  define('APPID', "");  

  $session = YahooSession::requireSession(CONSUMER_KEY,CONSUMER_SECRET,APPID);  
?> 
```

我设置`CONSUMER_KEY`,`CONSUMER_SECRET`和`APPID`. **但`$session variable`始终为 NULL。**

在挖掘了 yahoo.inc 源代码后，我将问题追溯到这个函数：

```
function getRequestToken($consumerKey, $consumerSecret, $callback); 
```

特别是函数中的这个调用：

```
$response = $client->post($request_url, "application/x-www-form-urlencoded", $parameters);
$request_url：https://api.login.yahoo.com/oauth/v2/get_request_token
$parameters: 有我的回调 url

```

`$response`变量是`null`！！我认为这是问题的根源。我正在使用示例代码。所以，我不确定为什么会这样。

有任何想法吗 ？？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T00:10:54.370

尝试这个：

```
$yahooUserData = YahooSession::requireSession($yahooConsumerKey, $yahooConsumerSecret, $yahooAppId, $returnUrl);

if (!empty($yahooUserData)) {
  $yahooUserId = $yahooUserData->guid;
  $accessToken = $yahooUserData->accessToken->key;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:52:08.760

指定返回 url 并尝试这个...

```
$yahooUserData = YahooSession::requireSession($yahooConsumerKey, $yahooConsumerSecret, $yahooAppId, $returnUrl);

if (!empty($yahooUserData)) {
  $yahooUserId = $yahooUserData->guid;
  $accessToken = $yahooUserData->accessToken->key;
} 
```

# typescript - 在 TypeScript 中使用类型变量访问对象文字不起作用

> ID：12950576
> 
> 赞同：1
> 
> 时间：2012-10-18T08:46:13.120
> 
> 标签：typescript

我正在将 Java 代码翻译成 TypeScript，但我遇到了一些我无法理解的东西。我在这里创建了对象文字名称`a`，并设法将其用作关联数组。然后我定义了类`Node`并创建了变量名`n`，当我尝试使用变量 n 作为关联数组的键时，tsc 编译器失败`Illegal property access`。如果我将 n 变量转换为 kk 类型的变量，则一切正常。

这是为什么？

```
var a = {}
a['a'] = 3
a[4] = 5

class Node {

}
var n:Node = new Node();
a[n] = 44;  <---- Illegal property access

var kk: any = n;
a[kk] = 55 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:18:09.137

在本声明中：

```
a[n] = 44; 
```

`a`是一个对象。

`n`是 Node 类的一个实例。

所以你试图使用一个类作为`a`对象属性的键。

当你使用`kk`类型`any`时，TypeScript 会假设你知道自己在做什么，并假设它在运行时会是一个字符串或数字。这真是忽略了问题。

您可以使用`n`变量的类型，它是一个字符串：

```
a[typeof n] 
```

# ios - OpenGL ES 从 iOS6 的变化

> ID：12950583
> 
> 赞同：0
> 
> 时间：2012-10-18T08:46:42.733
> 
> 标签：ios, opengl-es, ios6, caeagllayer

这是一个相当开放的问题。对不起，第一个。

我有显示使用 Open GL ES 2.0 的视频流的代码。它适用于 iOS5，但在我将设备更新到 iOS6 后出现问题。视频根本没有显示。当我检查流和解码在 iOS6 上运行良好时。只有渲染不能正常工作。

我使用 CAEAGLLayer 视图和纹理（带有 glTexImage2D 函数）来渲染视频。

如果您以前遇到过类似的问题，我想得到一些建议。任何评论都可能有助于我开始挖掘它。

再次抱歉信息不足和这个开放式问题。

**更新：** 我找到了一个简单的示例程序，它显示了我的相同问题。

[http://db-in.com/blog/2011/02/all-about-opengl-es-2-x-part-23/](http://db-in.com/blog/2011/02/all-about-opengl-es-2-x-part-23/)

此示例程序适用于 iPhone 5.1 模拟器，但不适用于 iPhone 6 模拟器（黑屏）。任何人都可以检查此示例并让我知道问题所在？我认为它应该和我的有类似的问题。

BR，Wonil。

# android - 视频无法播放三星 Android 手机或 Barnes & Noble Nook 平板电脑

> ID：12950589
> 
> 赞同：1
> 
> 时间：2012-10-18T08:47:05.240
> 
> 标签：android, jwplayer, samsung-mobile

我无法在三星 Android 手机或 Barnes & Noble Nook 平板电脑上观看视频。

我的代码如下。

```
<div id='mediaspace'>
</div>
<script type="text/javascript">
    jwplayer("mediaspace").setup({
            'file': "1.mp4",
            'width': $('[data-role="content"]').width(),
            'height': $(window).height() - 100,
            'autostart': 'true',
            'stretching': 'exactfit',
            'controlbar': 'bottom',
            modes: [
            {type: 'html5'},
            {type: 'flash', src: 'player.swf'}

        ],
            'allowfullscreen':"true",
            events:{
                onComplete:function()
                    {
                        jwplayer("mediaspace").setFullscreen(false)
                    }   
            }

    });
</script> 
```

在浏览器中，一切都很好，我在 Firefox、Safari 和 Chrome 浏览器上进行了测试，但在 android 平板电脑和手机中显示错误“无法播放视频，抱歉，无法播放此视频。” [http://i8ecoders.com/adnan/igrappling/](http://i8ecoders.com/adnan/igrappling/) 这是我网站的实时链接。

# c# - ServiceStack 返回 XML 格式的类型化响应

> ID：12950592
> 
> 赞同：1
> 
> 时间：2012-10-18T08:47:15.927
> 
> 标签：c#, .net, servicestack

所以我修改了给我响应的 todo 服务。

当我**故意抛出一个未处理的错误来测试**下面的 ServiceExceptionHandler 代码时，如果我使用 default`/Backbone.Todos/todo/1?format=json`就可以了。

但如果我使用`/Backbone.Todos/todo/1?format=xml`，它会说：

> *XML 解析错误：格式不正确 位置：/Backbone.Todos/todo/1 第 1 行，第 2 列：*

这是我的代码：

```
public class AppHost : AppHostBase {
    public override void Configure(Funq.Container container) {
        //Unhandled errors
        this.ServiceExceptionHandler = (req, ex) => {
            var res = new { //i return a dynamic object here ... and it doesn't work
                Result = null as object,
                ResponseStatus = new ResponseStatus() {
                ErrorCode = "Error",
                Message = "Not available",
                StackTrace = "Not available"
                }
            };
            return res;
        };
    //...
    }
//....
}

//My normal request/response dtos look like this:
//-----------------------------------------
[Route("/todo/{id}", "GET")] //display req
public class GetTodo : IReturn<TodoResponse> {
    public long Id { get; set; }
}
public class TodoResponse : IHasResponseStatus {
    public IList<Todo> Result { get; set; }
    public ResponseStatus ResponseStatus { get; set; }
} 
```

问题是，当发生错误时，**我无法在不知道它是什么类型的情况下构建正确类型的响应**。我只将传入的请求和异常作为参数，而不是响应类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:20:28.770

我怀疑这个错误是因为 XML 无法自动序列化 .net 中的动态对象。

我不完全确定我知道您要做什么，但是您可以尝试使用内置实用程序来处理异常，然后根据需要对其进行修改。

```
this.ServiceExceptionHandler = (req, ex) =>
{
    var responseStatus = ex.ToResponseStatus();
    var errorResponse = ServiceStack.ServiceHost.DtoUtils.CreateErrorResponse(req, ex, responseStatus);
    return errorResponse;
}; 
```

# paypal - Magento 贝宝管理员配置不起作用

> ID：12950593
> 
> 赞同：1
> 
> 时间：2012-10-18T08:47:17.583
> 
> 标签：paypal, magento-1.7, magento

我安装了 magento 1.7，它安装了许多扩展，问题是**配置 > 销售**下的贝宝徽标没有显示，并且贝宝设置完全显示在付款方式管理配置页面上。我尝试使用 url 访问它

**http://hellteam.bizarsoftware.com.au/index.php/admin/system_config/edit/section/payment/** 以上一个重定向到管理区域

但仍然没有运气

**我删除了所有核心文件和管理主题文件并替换为新文件**，但还没有运气..有人对此有任何想法..请救救我，谢谢

# c# - 带有按钮和requirefieldvalidators c#的动态创建表

> ID：12950599
> 
> 赞同：3
> 
> 时间：2012-10-18T08:47:27.987
> 
> 标签：c#, asp.net, button, requiredfieldvalidator

我正在创建一个带有按钮的表格。该按钮称为“更新”，当我单击它时，一切正常。在这张表下，我有一个“日志”按钮，可以查看所做更改的历史记录。这隐藏了第一个表格（里面有表格的面板），并使显示第二个表格的第二个面板可见。在此表中，我有一列带有“恢复”按钮来恢复状态 = 0 的数据。我的问题在这里，当我单击此按钮时，它会触发页面的 requiredfieldvalidators。我已经使用了 Validationgroup 和 Causesvalidation，但似乎没有任何效果......请帮助我！:)

这是一些代码：

带有更新 btn 的表可以正常工作：

```
public void getData()
{
    Provider p = new Provider();
    providers = p.getAllProviders();
    int count = 1;

    //Create a Table
    Table tbl = new Table();
    tbl.Style["Border-width"] = "5px";
    tbl.Style["Border-style"] = "solid";
    tbl.GridLines = GridLines.Both;
    tbl.CellPadding = 5;

    //Header of Table
    TableRow infoRow = new TableRow();

    //Cell of header
    TableCell tch0 = new TableCell();
    tch0.Text = "<b>ProviderID</b>";
    TableCell tch1 = new TableCell();
    tch1.Text = "<b>Name</b>";
    TableCell tch2 = new TableCell();
    tch2.Text = "<b>Phone</b>";
    TableCell tch3 = new TableCell();
    tch3.Text = "<b>Address</b>";
    TableCell tch4 = new TableCell();
    tch4.Text = "<b>Update</b>";

    //Add cells to header
    infoRow.Cells.Add(tch0);
    infoRow.Cells.Add(tch1);
    infoRow.Cells.Add(tch2);
    infoRow.Cells.Add(tch3);
    infoRow.Cells.Add(tch4);

    //Add header to table
    tbl.Rows.Add(infoRow);

    if (providers != null)
    {
        foreach (Provider pr in providers)
        {
            //Create a row
            TableRow tr = new TableRow();

            //Add lable to evry cell
            TableCell tc1 = new TableCell();
            Label pID = new Label();
            tc1.Controls.Add(pID);

            TableCell tc2 = new TableCell();
            Label name = new Label();
            tc2.Controls.Add(name);

            TableCell tc3 = new TableCell();
            Label phone = new Label();
            tc3.Controls.Add(phone);

            TableCell tc4 = new TableCell();
            Label address = new Label();
            tc4.Controls.Add(address);

            TableCell tc5 = new TableCell();
            Button updateBtn = new Button();
            updateBtn.Click += new System.EventHandler(setUpdate);
            updateBtn.Text = "Update";
            updateBtn.ID = "update" + count;
            updateBtn.ValidationGroup = "updateGrp";
            tc5.Controls.Add(updateBtn);

            //Fill lables
            pID.Text = pr.getProviderID().ToString();
            name.Text = pr.getName();
            phone.Text = pr.getPhone();

            Address a = new Address();
            a.setAddressID(pr.getAddressID());
            a = a.getAddressByID();
            address.Text = a.getStreet() + " " + a.getNumber() + " " + a.getCity() + " " + a.getZipCode() + " " + a.getCountry();

            //Add cells to row
            tr.Cells.Add(tc1);
            tr.Cells.Add(tc2);
            tr.Cells.Add(tc3);
            tr.Cells.Add(tc4);
            tr.Cells.Add(tc5);

            //Add row to table
            tbl.Rows.Add(tr);
            count++;
        }
    }
    //Add table to form
    pTableData.Controls.Add(tbl);
} 
```

更新btn的功能：

```
public void setUpdate(object sender, EventArgs e)
{
    Button btn = (Button)sender;
    string id = btn.ID;
    int idInt = Convert.ToInt32(id.Substring(6));

    Provider p = new Provider();
    Address a = new Address();

    p = (Provider)providers[idInt - 1];
    a.setAddressID(p.getAddressID());
    a = a.getAddressByID();

    pUpdate.Visible = true;

    lbl_providerID.Text = p.getProviderID().ToString();
    txt_pUpdate_Name.Text = p.getName();
    txt_pUpdate_Phone.Text = p.getPhone();
    txt_pUpdate_Street.Text = a.getStreet();
    txt_pUpdate_Number.Text = a.getNumber().ToString();
    txt_pUpdate_City.Text = a.getCity();
    txt_pUpdate_ZipCode.Text = a.getZipCode();
    txt_pUpdate_Country.Text = a.getCountry();
} 
```

具有还原 btn 的第二个表：

```
public void getLog()
{
    LogProvider lp = new LogProvider();
    logproviders = lp.getAllLogProviders();
    int count = 1;

    //Create a Table
    Table tbl = new Table();
    tbl.Style["Border-width"] = "5px";
    tbl.Style["Border-style"] = "solid";
    tbl.GridLines = GridLines.Both;
    tbl.CellPadding = 5;

    //Header of Table
    TableRow infoRow = new TableRow();

    //Cell of header
    TableCell tch0 = new TableCell();
    tch0.Text = "<b>LogProviderID</b>";
    TableCell tch1 = new TableCell();
    tch1.Text = "<b>Name</b>";
    TableCell tch2 = new TableCell();
    tch2.Text = "<b>Phone</b>";
    TableCell tch3 = new TableCell();
    tch3.Text = "<b>Address</b>";
    TableCell tch4 = new TableCell();
    tch4.Text = "<b>Status</b>";
    TableCell tch5 = new TableCell();
    tch5.Text = "<b>Type</b>";
    TableCell tch6 = new TableCell();
    tch6.Text = "<b>Updated on</b>";
    TableCell tch7 = new TableCell();
    tch7.Text = "<b>Changed by</b>";
    TableCell tch8 = new TableCell();
    tch8.Text = "<b>Restore</b>";

    //Add cells to header
    //infoRow.Cells.Add(tch0);
    infoRow.Cells.Add(tch1);
    infoRow.Cells.Add(tch2);
    infoRow.Cells.Add(tch3);
    infoRow.Cells.Add(tch4);
    infoRow.Cells.Add(tch5);
    infoRow.Cells.Add(tch6);
    infoRow.Cells.Add(tch7);
    infoRow.Cells.Add(tch8);

    //Add header to table
    tbl.Rows.Add(infoRow);

    if (providers != null)
    {
        foreach (LogProvider logp in logproviders)
        {
            //Create a row
            TableRow tr = new TableRow();

            //Add lable to evry cell
            TableCell tc1 = new TableCell();
            Label lpID = new Label();
            tc1.Controls.Add(lpID);

            TableCell tc2 = new TableCell();
            Label name = new Label();
            tc2.Controls.Add(name);

            TableCell tc3 = new TableCell();
            Label phone = new Label();
            tc3.Controls.Add(phone);

            TableCell tc4 = new TableCell();
            Label address = new Label();
            tc4.Controls.Add(address);

            TableCell tc5 = new TableCell();
            Label status = new Label();
            tc5.Controls.Add(status);

            TableCell tc6 = new TableCell();
            Label type = new Label();
            tc6.Controls.Add(type);

            TableCell tc7 = new TableCell();
            Label updatedOn = new Label();
            tc7.Controls.Add(updatedOn);

            TableCell tc8 = new TableCell();
            Label by = new Label();
            tc8.Controls.Add(by);

            TableCell tc9 = new TableCell();

            //Fill lables
            lpID.Text = logp.getLogProviderID().ToString();
            name.Text = logp.getName();
            phone.Text = logp.getPhone();

            LogAddress la = new LogAddress();
            la.setLogAddressID(logp.getLogProviderID());
            la = la.getLogAddressByID();
            address.Text = la.getStreet() + " " + la.getNumber() + " " + la.getCity() + " " + la.getZipCode() + " " + la.getCountry();

            int stat;
            if (logp.getStatus())
                stat = 1;
            else
                stat = 0;

            status.Text = stat.ToString();
            type.Text = logp.getType();
            updatedOn.Text = String.Format("{0:yyyy-MM-dd HH:mm:ss}", logp.getUpdateDate());
            by.Text = logp.getUserName();

            if(stat == 0)
            {
                Button restoreBtn = new Button();
                restoreBtn.Click += new System.EventHandler(setRestore);
                restoreBtn.Text = "Restore";
                restoreBtn.ID = "restore" + count;
                restoreBtn.ValidationGroup = "restoreGrp";
                tc9.Controls.Add(restoreBtn);
            }

            //Add cells to row
            //tr.Cells.Add(tc1);
            tr.Cells.Add(tc2);
            tr.Cells.Add(tc3);
            tr.Cells.Add(tc4);
            tr.Cells.Add(tc5);
            tr.Cells.Add(tc6);
            tr.Cells.Add(tc7);
            tr.Cells.Add(tc8);
            tr.Cells.Add(tc9);

            //Add row to table
            tbl.Rows.Add(tr);
            count++;
        }
    }
    //Add table to form
    pTableLog.Controls.Add(tbl);
} 
```

恢复 btn 的功能（不起作用！！）：

```
public void setRestore(object sender, EventArgs e)
{
    Button btn = (Button)sender;
    string id = btn.ID;
    int idInt = Convert.ToInt32(id.Substring(7));

    LogProvider lp = new LogProvider();
    Provider p = new Provider();
    LogAddress la = new LogAddress();

    lp = (LogProvider)logproviders[idInt - 1];
    p.setProviderID(lp.getProviderID());
    p = p.getProviderByID();
    la.setLogAddressID(lp.getProviderID());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:56:00.600

我不确定页面中必填字段验证器背后的逻辑。我的理解是因为验证器事件没有触发？

如果是这样，您可以在调用按钮单击事件之前禁用验证器并稍后启用它

# c++ - 如何从头到尾遍历向量？

> ID：12950601
> 
> 赞同：1
> 
> 时间：2012-10-18T08:47:38.680
> 
> 标签：c++, vector

> **可能重复：**
> [从向量中删除元素](https://stackoverflow.com/questions/347441/erasing-elements-from-a-vector)

我想删除一些元素，所以不想错过迭代

我现在遍历如下

```
vector<double> distances;
for(size_t i=0; i<distances.size();i++)
{

} 
```

如何从头到尾遍历，以便安全地删除元素并访问我想要的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:52:25.150

```
for (size_t i = distances.size() - 1; i >=0; --i) 
```

`std::remove_if`但是，您应该使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:14:21.577

实际上，处理这种情况的最好方法是作弊。

在 C++ 中，我们使用擦除/删除习语来获得最高效率。你创建了一个谓词，然后你就开始了，现在使用 lambdas 变得非常简单。

```
// This removes all odd elements in vec
vec.erase(vec.remove_if([](int i) { return i % 2 == 1 }), vec.end(); 
```

工作方式`remove_if`是它随机播放元素（复制或移动）以收集您希望保留在容器头部的所有元素，尾部保持未指定（但有效）状态，然后返回你是尾部第一个元素的迭代器。

然后使用容器的范围擦除方法，您要求容器一次性删除所有这些元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:50:13.883

使用`reverse_iterator :`

```
vector<something>::reverse_iterator iter = v.rbegin();
iter++; //Iterates backwards 
```

# javascript - javascript：以编程方式确定对象的结构

> ID：12950602
> 
> 赞同：0
> 
> 时间：2012-10-18T08:47:46.950
> 
> 标签：javascript

我正在构建与远程服务的 javascript (nodejs) 集成。该服务返回格式不一致的结果，并且在 javascript 中，我正在努力确定如何根据响应切换我的格式。

两种格式如下所示，第一种是当 Parent 有一个孩子时，第二种是当 Parent 有 >1 个孩子时：

```
var single = { "Parent" : { "name" : "foo" } }
var multi = { "Parent" : [ { "name" : "foo" }, { "name" : "bar" } ] } 
```

因此，当我尝试在 js 中解析结果，访问“name”的子属性时，会得到不一致的结果：

```
for (var i in single) {
    console.log("child name: " + single[i].name;
}

for (var i in multi.Parent) {
    console.log("child name: " + multi.Parent[i].name;
} 
```

确定我得到的是单个结果还是多个结果的最佳方法是什么？我尝试了“typeof response”，希望为 multi 获得一个“Array”，但这不起作用。该对象最初是作为字符串接收的，但使用`JSON.parse(responseString)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:54:05.683

您可能可以使用`constructor`属性。

```
>> single.Parent.constructor == Array
false
>> multi.Parent.constructor == Array
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:52:36.730

您可以测试要定义的“名称”属性。

```
var single = { "Parent" : { "name" : "foo" } };
var multi = { "Parent" : [ { "name" : "foo" }, { "name" : "bar" } ] };

console.log(single.Parent.name == undefined); // True
console.log(multi.Parent.name == undefined);  // False 
```

参考：http : [//jsfiddle.net/QhFvP/](http://jsfiddle.net/QhFvP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:55:23.360

`typeof response`会告诉你两者都是对象，因为 Array 是一个对象。

您可以尝试获取 multi.Parent.length 如果它是一个数组，它会给你一个数字，如果它是一个 JSON 对象，它会给你一个未定义的数字。所以，

```
for (var i = 0; i < multi.Parent.length; i++){
    console.log("child name", multi.Parent[i].name)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:56:58.663

我看到你在这里做的一个错误。首先，这两个响应都是对象。根据结果​​的数量，它`Parent`是对象或列表的字段。你不应该这样做：

```
single[i].name 
```

你应该写：

```
single.Parent[i].name 
```

因此，要检查您是否有单个或多个响应，您必须检查

```
if(response.Parent instanceof Array){} 
```

注意使用 of`instanceof`而不是`typeof`. 顺便说一句，使用 JSON 从文本构造对象没有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T11:36:46.220

最终代码：

```
// Using instanceof
if (response.Parent instanceof Array !== true) response.Parent = [response.Parent]
// More robust method, using .constructor:
if (response.Parent.constructor !== Array) response.Parent = [response.Parent]

// Continue with multi processing 
for (var i in response.Parent) {} 
```

感谢所有的反馈。

# c# - 使用 CMS 进行 ASP.NET MVC 项目的最佳方法是什么

> ID：12950616
> 
> 赞同：2
> 
> 时间：2012-10-18T08:48:38.740
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, content-management-system

***任务***

我的任务是建立一个在线商店。该网站将支持浏览产品、在线购物和论坛。网站上会有两个演员——普通客户和特权客户（有折扣）。在网站上出售的产品会从一些存储程序的数据库中提取出来，并在它们显示在网站上之前排队等待修改（如产品名称验证、添加缺失的详细信息等）。

这大约涵盖了整个项目。

***不便***

除了客户还要求他可以在网站上添加/删除和编辑内容。

***我很难解决的问题***

所以，在这种情况下，需要一个 CMS。对吗？至少那是我强硬的，虽然我从来没有使用过。所以我查找了一些 .Net CMS，然后选择了 Umbraco。

***失望***

在我看到 Umbraco 的使用方法后，我不再觉得这就是我需要的。我坚持认为 .Net 的 CMS 将与 VisualStudio 集成，并且不会妨碍 ASP.NET MVC 的开发。但确实如此。现在我回到零点，因为我必须选择使用 CMS 并忘记 .net 或在 .net 中开发并且无法编辑内容......

***问题***

如何使用 asp.Net MVC 在 VS 中开发站点并支持 CMS？这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:11:24.850

> **温顺**
> 
> 通常，当您处理 CMS 系统时，您是在该系统允许您执行的操作的限制范围内工作。对于很多用途，这非常有效，您可以创建一个充满内容的站点，并为您想要添加到该站点的常见功能添加一个插件。Meek 采用了这种方法并将其反转，作为开发人员，我们通常为客户创建自定义应用程序，然后他们需要能够管理其中的有限内容集。然后由您来创建一种简单的方法来管理应用程序中的一些内容和图像。使用 Microsoft MVC 框架 Meek 使这项任务变得像添加单个程序集引用和 web.config 条目一样简单。 [http://www.gingerrant.com/meek/](http://www.gingerrant.com/meek/)

不能说我曾经使用过它，但它是我遇到的唯一一个似乎有这个目标的 CMS。

> **MVC Easy CMS** 通常你（作为开发人员）创建网站需要他们的页面和内容是可管理的。现在有太多免费的 CMS 平台，但不需要它们所有的强大功能。您只需编写代码并将一些 html 区域标记为可管理。如果不编写任何特定于 CMS 框架的服务器代码，就可以非常快速地完成这项工作。在这种情况下，MVC Easy CMS 就是您需要的产品。
> 
> 框架的主要特点：
> 
> *   易于安装和卸载
> *   使用 html 属性轻松使您的静态 html 变为动态
> *   非常好的数据管理性能
> *   可管理区域的标记可以从创建 html 设计步骤开始
> *   网站的源代码在使用 CMS 期间或删除后不应更改
> 
> 我们在第一个版本中支持使用 Razor 作为引擎和 C# 作为语言的 MVC 3 和 MVC 4。我们正在实现 VB 语言支持。
> 
> [http://mvceasycms.ism-ukraine.com/](http://mvceasycms.ism-ukraine.com/)

快速使用它后看起来相当整洁。显然缺少真正 cms 的许多功能（版本控制等），但非常适合您只有一点内容需要更新的网站

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:56:17.833

有可能，野外有很多样本，“我们”每天都在这样做：使用 .net**并**允许我们的用户编辑内容。最后一点不是 .net 的优点，而是 HTML 中称为表单的东西。

通过使用 Umbraco 或[Orchard](http://www.orchardproject.net/) (MVC)，您可以在这样的框架之上构建您的应用程序，并根据您的需求对其进行扩展。

尽管我怀疑您是否需要一个成熟的 CMS 来编辑产品信息。

但是，您似乎希望有一个为您生成站点的 Visual Studio 插件。如果是这样，那么我会向您指出谷歌并找出几个提供在线商店的网站，您可以在无需编程的情况下进行可视化**定制**。

只需注册，填写空白，您就可以轻松愉快地运行。

# c# - C# 编辑文件中的字符串 - 删除一个字符 (000)

> ID：12950618
> 
> 赞同：1
> 
> 时间：2012-10-18T08:48:48.240
> 
> 标签：c#, file, edit

我是 C# 的菜鸟，但我需要解决一个问题。我在文件夹中有几个文本文件，每个文本文件都有这样的结构：

身份证号 000000100

姓名 姓名

姓 姓

性别男

.... ETC...

从文件夹加载所有文件，这没问题，但我需要删除 IdNr 中的“零”，所以删除 000000 和 100 留在那里。此文件保存后。**每个文件都有其他 IdNr**，因此，它更难:(

是的，每个文件都可以手动编辑，但是当我有 3000 个文件时，这并不好 :) C# 一种算法，这个 000000 可以删除并只留下 100 号吗？

谢谢你们。瓦茨拉夫

**所以，谢谢大家！** 但最后我有这个代码:-)：

```
using System.IO; 
```

命名空间名称 { 公共部分类 Form1 ： Form { 公共 Form1() { InitializeComponent(); }

```
 private void Browse_Click(object sender, EventArgs e)
    {
        DialogResult dialog = folderBrowserDialog1.ShowDialog();
        if (dialog == DialogResult.OK)
            TP_zdroj.Text = folderBrowserDialog1.SelectedPath;

    }

    private void start_Click(object sender, EventArgs e)
    {

       try
       {
           foreach (string file in Directory.GetFiles(TP_zdroj.Text, "*.txt"))
           {
               string text = File.ReadAllText(file, Encoding.Default);

               text = System.Text.RegularExpressions.Regex.Replace(text, "IdNr    000*", "IdNr    ");
               File.WriteAllText(file, text, Encoding.Default);

           }
       }
           catch
       {
           MessageBox.Show("Warning...!");
               return;

           }

        {
            MessageBox.Show("Done");

        }

    }
} 
```

}

谢谢你们 ！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:51:22.293

您可以使用`int.Parse`：

```
int number = int.Parse("000000100");
String withoutzeros = number.ToString(); 
```

根据您的读取/保存文件问题，文件是否包含多个记录，是标题还是每条记录都是键和值列表，例如“IdNr 000000100”？没有这些信息很难回答。

**编辑**：这是一种简单但有效的方法，如果格式严格，应该可以使用：

```
var files = Directory.EnumerateFiles(path, "*.txt", SearchOption.TopDirectoryOnly);

foreach (var fPath in files)
{ 
    String[] oldLines = File.ReadAllLines(fPath); // load into memory is faster when the files are not really huge
    String key = "IdNr ";
    if (oldLines.Length != 0)
    {
        IList<String> newLines = new List<String>();
        foreach (String line in oldLines)
        {
            String newLine = line;
            if (line.Contains(key))
            {
                int numberRangeStart = line.IndexOf(key) + key.Length;
                int numberRangeEnd = line.IndexOf(" ", numberRangeStart);
                String numberStr = line.Substring(numberRangeStart, numberRangeEnd - numberRangeStart);
                int number = int.Parse(numberStr);
                String withoutZeros = number.ToString();
                newLine = line.Replace(key + numberStr, key + withoutZeros);
                newLines.Add(line);
            }
            newLines.Add(newLine);
        }
        File.WriteAllLines(fPath, newLines);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:51:48.213

这些是您想要采取的步骤：

*   循环每个文件
*   逐行读取文件
*   对于在“”上分割的每一行，并从第二个元素中删除前导零
*   将新行写回临时文件
*   处理完所有行后，删除原始文件并重命名临时文件
*   做下一个文件

（您可以通过将每个文件全部读入内存来避免临时文件部分，但根据您的文件大小，这可能不切实际）

* * *

您可以使用以下内容删除前导零：

```
string s = "000000100";
s = s.TrimStart('0'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:53:06.240

使用修剪启动

```
var trimmedText = number.TrimStart('0'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:53:38.100

这应该这样做。它假定您的文件具有 .txt 扩展名，并从每个文件中删除所有出现的“000000”。

```
foreach (string fileName in Directory.GetFiles("*.txt"))
{
    File.WriteAllText(fileName, File.ReadAllText(fileName).Replace("000000", ""));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T08:53:51.933

简单地说，从文件中读取每个标记并使用此方法：

```
var token = "000000100";
var result = token.TrimStart('0'); 
```

您可以编写一个类似于此的函数：

```
static IEnumerable<string> ModifiedLines(string file) {
    string line;
    using(var reader = File.OpenText(file)) {
        while((line = reader.ReadLine()) != null) {
            string[] tokens = line.Split(new char[] { ' ' });
            line = string.Empty;
            foreach (var token in tokens)
            {
                line += token.TrimStart('0') + " ";
            }
            yield return line;
        }
    }
} 
```

用法：

```
File.WriteAllLines(file, ModifiedLines(file)); 
```

# xamarin.ios - MonoTouch 上的 NUnitLite：测试成功但未在 UI 中标记为已执行

> ID：12950622
> 
> 赞同：1
> 
> 时间：2012-10-18T08:49:00.423
> 
> 标签：xamarin.ios, nunit, touch.unit

我在 MonoTouch 6.0.4 上并使用 MonoTouch 的 NUnitLite 实现了单元测试。如果我执行测试并以 a 结束，`Assert()`我可以从日志中看到测试成功执行：

> 测试运行：1 通过：0 不确定：0 失败：1 忽略：0

但是在UI中，并没有体现出测试结果：![测试结果](../Images/f96caac0ec4f2a7a323707361a956e73.png)

测试方法：

```
[Test]
public void TestPing()
{
    APIPingResult oRes = oManager.PingConnector.Ping(5);
    Assert.True(oRes.Success);
} 
```

只是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:22:52.990

这是一个*已知*的（我以前注意到过）错误。

**运行所有测试（例如Run Everything**）或特定套件中的所有测试（例如**Run** all ）时，状态会正确更新。

但是，在运行特定测试时，更新现已完成（实际上我认为它只是没有刷新）。请注意，测试结果仍会发送到编写器的输出（例如应用程序输出或设备控制台上）。

**更新：**在 GIT（0.7 和 master 分支）中修复。

# java - 如何防止netbeans中MDI子窗体的多个实例

> ID：12950624
> 
> 赞同：0
> 
> 时间：2012-10-18T08:49:08.510
> 
> 标签：java, swing, netbeans, mdi, jmenuitem

我正在开发一个带有 MDI 应用程序表单的 java 应用程序。我已分配菜单项来打开两个内部子窗体。当我重复单击它们时，它们会为每次单击创建实例，我如何才能停止此操作并在第一次单击时显示先前实例化的表单。

这是我正在使用的菜单项的动作侦听器的代码，

```
private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        RecognitionForm recForm=new RecognitionForm();
        desktopPane.add(recForm);
        recForm.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:00:10.793

我可以想到两种方法。

第一个是在创建框架时升旗。这里的问题是您需要监视帧何时关闭，这会增加额外的开销。

[第二个是使用`JDesktopPane#getAllFrames'](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDesktopPane.html)检查当前在桌面上打开的所有框架以获取框架实例。

从那里你可以简单地遍历结果，或者`instanceof`比较标题（例如），如果你没有找到，创建它们，否则你可以[`JDesktopPane.selectFrame`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDesktopPane.html#selectFrame%28boolean%29)用来突出显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T07:27:05.427

1.  给你所有的 MDI 子内部框架一个不同的名字
2.  将以下代码放在您的代码 RecognitionForm recForm=new RecognitionForm();

    ```
    //start code
    javax.swing.JInternalFrame[] frames = jDPane1.getAllFrames();
    for (int i = 0; i < frames.length; i++) {
        javax.swing.JInternalFrame f = frames[i];
        if (f.getName() == "yourInternalFramename") {
            return;
        }
    } 
    ```

# javascript - 使“下一步”按钮起作用

> ID：12950631
> 
> 赞同：0
> 
> 时间：2012-10-18T08:49:40.513
> 
> 标签：javascript, jquery, button, triggers

我正在创建一个简单的算术游戏，其中有一个填充有数字的网格。数字是隐藏的，当游戏运行时，网格空间会突出显示。旁边的 div 产生一个总和，以帮助用户得到正确的答案。然后，用户点击相应的数字，动画就位并指示它们是对还是错。

我只有一个下一个按钮（'.minibutton'），所以如果用户回答错误 3 次，他们就有机会转到下一个问题。该按钮还具有 .trigger('click') 功能，因此当一个单词正确完成时，它会自动移动并保持游戏流畅。

**我的问题是按钮停止工作，我不知道为什么**。这是“.minibutton”功能...

```
$('.minibutton').click(function() {
var sum = $('#answerlist li[data-answer="' + answer + '"]').data('sum');
$(right).val('');
$(wrong).val('');
$('td').removeClass('spellanswer');
score.wrong = 0;
var r = rndanswer;
while (r == rndanswer) {
    rndanswer = Math.floor(Math.random() * (listOfanswers.length));
} 
```

当我添加此语句时，按钮停止工作

```
 //for (var x = 0; x < listOfanswers.length; x++) {
    //if (eval(sum.replace("=", "").replace("x", "*")) == listOfanswers[x].name) {
       // rndanswer = x;
   // }
//}

$('td[data-answer="' + listOfanswers[rndanswer].name + '"]').addClass('spellanswer');
$('td[data-answer=' + answer + ']').removeClass('answerglow').removeClass('answerglow4').removeClass('answerglow3').css('color', 'transparent');

var noExist = $('td[data-answer=' + listOfanswers[rndanswer].name + ']').hasClass('answerglow2');
if (noExist) {
    $('.minibutton').prop('disabled', false);

} else {

    $('.sumstyle').text(sum);
    sum.hide();

}
}).trigger("click"); 
```

[http://jsfiddle.net/ZAfVZ/28/](http://jsfiddle.net/ZAfVZ/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:21:33.297

运行 jsFiddle 会出现此错误：

```
Object 1 + 2 = has no method 'hide' 
```

你试图隐藏一个字符串，这显然是错误的。它导致脚本在该点之后停止执行。删除/注释掉`sum.hide()`，猜错三个后出现“下一步”按钮。

我编辑了 JSFiddle 以在函数顶部定义`sum`（包含玩家试图回答的总和的文本字符串）和`seumElem`（包含总和的 HTML 元素）：http: [//jsfiddle.net/ZAfVZ/30 /](http://jsfiddle.net/ZAfVZ/30/)

# python - 如何从列表中传递一个参数，在 Python 的内置函数 map() 中传递另一个参数？

> ID：12950635
> 
> 赞同：3
> 
> 时间：2012-10-18T08:49:45.527
> 
> 标签：python

在 Python 中，可以`foo()`使用内置函数将函数应用于列表的每个元素，`map()`如下所示：

```
def foo(x):
  return x*x

print map(foo, [1, 2, 3, 4]) 
```

这将打印出来，就像人们猜到的那样：1 4 9 16。

假设该函数`foo()`现在接受两个参数而不是一个参数，并且定义如下：

```
def foo(x, y):
  return x+y 
```

在这种情况下，x 是列表的一个元素，y 是某个数字，对于整个列表都是相同的。在这种情况下，我们如何使用 map() 以便将 foo() 应用于列表的每个元素，同时采用另一个对每个元素都相同的参数 y？

我希望能够做类似的事情：

```
print map(foo(:, 5), [1, 2, 3, 4]) 
```

这应该给我：6 7 8 9。

在 Python 中可能吗？对于这个添加`'y'`到所有元素的特定示例，可能有其他选择。但我正在寻找一个可以使用的答案`map()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T08:52:00.933

您可以使用 lambda 函数。这就像一个普通函数一样处理，`x`值是迭代器的参数，`x+5`在这种情况下返回值。

```
>>> def foo(x, y)
...   return x + y
...
>>> l = [1, 2, 3, 4]
>>> map(lambda x: foo(x, 5), l)
[6, 7, 8, 9] 
```

作为记录，@PaoloMoretti 在我面前有这个:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T08:58:16.677

一种方法是使用`functools.partial`：

```
>>> from functools import partial
>>> def foo(x, y):
...     return x + y
... 
>>> l = [1, 2, 3, 4]
>>> map(partial(foo, y=2), l)
[3, 4, 5, 6]
>>> 
```

另一种方法是更改​​定义函数的方式：

```
>>> def foo(y):
...     def inner(x):
...         return x + y
...     return inner
... 
>>> map(foo(2), l)
[3, 4, 5, 6]
>>> 
```

顺便说一句，正如[Paolo Moretti 所说](https://stackoverflow.com/a/12950739/1142167)`lambda`，使用将是最直接的方法。您必须使用您描述的方式的任何特殊原因？`map()`

# asp.net-mvc-3 - 如何在 MVC 中禁用数据注释必填字段验证器

> ID：12950640
> 
> 赞同：3
> 
> 时间：2012-10-18T08:49:57.043
> 
> 标签：asp.net-mvc-3, validation

我正在尝试设计一个页面，该页面具有两个单选按钮选项和两个带有每个单选按钮的文本框。我正在使用数据注释验证属性验证这些文本框。我正在使用 jquery slider.toggle() 根据单击的单选按钮显示每个文本框。当我提交页面时，两个文本框的必填字段验证器都会被触发。我想要做的是在单击第二个单选按钮时禁用第一个文本框验证。当未选择与其关联的单选按钮时，MVC 中是否有任何方法可以禁用文本框的验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:01:44.120

这可以很简单地在前端完成。发生的验证是基于 html5 的`data`属性完成的。`data`从输入元素中删除属性，验证将停止运行。

# c# - 如何在将字节数组写入文件时添加新行

> ID：12950652
> 
> 赞同：9
> 
> 时间：2012-10-18T08:50:31.793
> 
> 标签：c#

嗨，我正在将音频文件读入字节数组。然后我想从该字节数组中读取每 4 个字节的数据并将其写入另一个文件。

我能够做到这一点，但是，我的问题是我想在每 4 个字节的数据写入文件后添加新行。怎么做？？这是我的代码...

```
FileStream f = new FileStream(@"c:\temp\MyTest.acc");
for (i = 0; i < f.Length; i += 4)
{
    byte[] b = new byte[4];
    int bytesRead = f.Read(b, 0, b.Length);

    if (bytesRead < 4)
    {
        byte[] b2 = new byte[bytesRead];
        Array.Copy(b, b2, bytesRead);
        arrays.Add(b2);
    }
    else if (bytesRead > 0)
        arrays.Add(b);

    fs.Write(b, 0, b.Length);
} 
```

请有任何建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T09:08:10.763

我认为这可能是您问题的答案：

```
 byte[] newline = Encoding.ASCII.GetBytes(Environment.NewLine);
            fs.Write(newline, 0, newline.Length); 
```

所以你的代码应该是这样的：

```
 FileStream f = new FileStream("G:\\text.txt",FileMode.Open);
            for (int i = 0; i < f.Length; i += 4)
            {
                byte[] b = new byte[4];
                int bytesRead = f.Read(b, 0, b.Length);

                if (bytesRead < 4)
                {
                    byte[] b2 = new byte[bytesRead];
                    Array.Copy(b, b2, bytesRead);
                    arrays.Add(b2);
                }
                else if (bytesRead > 0)
                    arrays.Add(b);

                fs.Write(b, 0, b.Length);
                byte[] newline = Encoding.ASCII.GetBytes(Environment.NewLine);
                fs.Write(newline, 0, newline.Length);
            } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:08:21.807

传递`System.Environment.NewLine`到文件流

欲了解更多信息[http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)

# magento - （随机？） Magento 前端和后端出现 500 个错误 - 版本 1.4.1.1

> ID：12950656
> 
> 赞同：1
> 
> 时间：2012-10-18T08:50:40.547
> 
> 标签：magento, fastcgi, magento-1.4

我再次需要你的帮助:)

一段时间以来，我在 magento 的前端和后端遇到奇怪的 500 错误。我使用 magento 1.4.1.1。

错误可以随时随地出现。我每天大约收到10-20个。错误日志如下所示：[Wed Oct 17 16:02:19 2012] [warn] [client 93.219.97.29] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server, referer: /index.php /admin/sales_order/view/order_id/1617/ [Wed Oct 17 16:02:19 2012] [warn] [client 93.219.97.29] (104) Connection reset by peer: mod_fcgid: ap_pass_brigade failed in handle_request_ipc function, referer: [http ://www.xxxx.com/index.php/admin/sales_order/view/order_id/1617/](http://www.xxxx.com/index.php/admin/sales_order/view/order_id/1617/)

我附上了错误的截图。 [http://i.imgur.com/i6dvO.jpg](http://i.imgur.com/i6dvO.jpg)

你们知道我能做什么吗？非常感谢 ：）

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T16:32:35.193

我在 Ubuntu 10.04 LTS LAMP 服务器上的 1.7.0.2 社区版上收到了类似的错误。在我的情况下（使用 Virtualmin），我错误地将虚拟服务器设置为在 FastCGI 中作为网站所有者运行 php。apache 用户与站点所有者不同，并且 magento 多站点安装设置为以该 apache 用户身份运行。

另外，我在 index.php 中取消了 Magento 的分析器的注释，`Varien_Profiler::enable();` 并通过 Magento 管理面板（系统->配置->开发人员）打开了分析器。

注释掉分析器对象并将更改反转为 php 执行模式就可以了。

有关正确的 virtualmin 设置，请参见附件，可在 Virtualmin->Server Configuration->Website Options 中找到![截屏](../Images/4391c03bac33aa65b0730225a3523559.png)

# c++ - 从变量类型 System.DateTime 在 C++ 中读取日期/时间

> ID：12950659
> 
> 赞同：1
> 
> 时间：2012-10-18T08:50:43.170
> 
> 标签：c++, timestamp

我有一个由刻度数表示的时间戳值。通过创建一个新的 System.DateTime 对象并将时间戳值传递给构造函数，在 c# 下从它获取日期/时间很容易，或者我被告知（它是在 c# 中创建的）。问题是我只能使用 C/C++。即使将刻度转换为秒也有些令人困惑。根据 cplusplus.com 与宏 CLOCKS_PER_SEC 的简单乘法 - 每秒时钟滴答声就足够了。这导致乘以 1000。然而，根据 Microsoft 网站，到秒的转换因子应该是 1e7。要转换的样本值为634400640022968750，这表明第二个版本更接近现实。

我不会花时间描述我失败的尝试，因为它们让我无处可去。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:28:11.630

假设您在 Windows 上，问题是 c# DateTime 从 0001 年 1 月 1 日开始，而 c++ FILETIME 从 1601 年 1 月 1 日开始，因此要获得具有 C# 值的 SYSTEMTIME，您需要这样的东西...

```
 ULARGE_INTEGER uliTime;
    uliTime.QuadPart = 634400640022968750; // Your sample value

    SYSTEMTIME stSytemTime;
    memset(&stSytemTime,0,sizeof(SYSTEMTIME));

    FILETIME stFileTime;
    memset(&stFileTime,0,sizeof(FILETIME));

    // Fill FILETIME with your value
    stFileTime.dwLowDateTime = uliTime.LowPart;
    stFileTime.dwHighDateTime = uliTime.HighPart;

    // Convert FILETIME so SYSTEMTIME
    FileTimeToSystemTime(&stFileTime, &stSytemTime);
    stSytemTime.wYear -= 1600; // Remove the "start" diference 
```

将 SYSTEMTIME 转换为 time_t

```
void ConvertSystemTimeToTimeT(const SYSTEMTIME &stSystemTime, time_t &stTimeT)
{
    // time_t min value is 1 January 1970
    LARGE_INTEGER liJanuary1970 = {0};
    liJanuary1970.QuadPart = 116444736000000000;

    FILETIME stFileTime = {0};    
    SystemTimeToFileTime(&stSystemTime, &stFileTime);

    ULARGE_INTEGER ullConverter;
    ullConverter.LowPart = stFileTime.dwLowDateTime;
    ullConverter.HighPart = stFileTime.dwHighDateTime;

    // time_t resolution is 1 second, FILETIME is 100 nanoseconds, so convert to seconds and remove the 1970 value  
    stTimeT = (time_t)(ullConverter.QuadPart - liJanuary1970.QuadPart) / 10000000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:00:30.840

如果你想为你的代码计时，我建议使用[QueryPerformance 库](http://support.microsoft.com/kb/815668)（`QueryPerformanceFrequency`尤其`QueryPerformanceCounter`是函数），如果你的硬件支持它的话。

如果您只想从一个纪元开始以秒为单位的时间戳，请使用`"time.h"`库：[如何在 C++ 中获取当前时间和日期？](https://stackoverflow.com/questions/997946/c-get-current-time-and-date)

# django - modelformset_factory 不支持额外参数

> ID：12950661
> 
> 赞同：4
> 
> 时间：2012-10-18T08:50:44.673
> 
> 标签：django, django-forms

姜戈：1.4.1

模型：

```
class Hoja(models.Model):
    nombre = models.CharField(max_length=200) # requerido

class Linea(models.Model):
    hoja = models.ForeignKey(Hoja) # requerido
    nombre = models.CharField(max_length=200) # requerido
    padre = models.ForeignKey('self', null=True, blank=True, related_name='hijo') 
```

看法：

```
lineas = Linea.objects.filter(hoja=alt).order_by('id')
LineaHojaSet = modelformset_factory(Linea, can_delete=True, extra=1 if request.POST.has_key('siguiente') else 0)
formset = LineaHojaSet(request.POST or None, queryset=lineas)
if request.method=='POST':
    # process formset
return render_to_response('template.html', {'formset':formset}, context_instance=RequestContext(request)) 
```

模板：

```
<table>
    <thead>
        <tr><th>Nombre</th><th>Borrar</th></tr>
    </thead>
    <tbody>
        {% for fs in formset %}
        <tr>
            <td>{{ fs.nombre }}</td>
            <td>{{ fs.id }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<input type="submit" name="siguiente" value="Añadir siguiente" /> 
```

当我提交“siguiente”按钮时，我可以看到表单集获得了正确的额外字段 1，但在网页中，唯一显示的行是数据库行。这是一个错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:21:46.123

Formset 工厂通过管理表单中的`max_num`参数`extra`或`form-TOTAL_FORMS`参数`request.POST`（或数据）查找表单数量。

在您的情况下，`request.POST['form-TOTAL_FORMS']`具有不包括额外形式的数字。所以当你创建表单集时它不会添加额外的表单。

一种解决方案是在满足您的条件时将此数字加一。例如

```
data = None
if request.POST:
    data = request.POST.copy() #required as request.POST is immutable
if request.POST.has_key('siguiente'):
   data['form-TOTAL_FORMS'] = int(data['form-TOTAL_FORMS']) + 1

#now use data instead of request.POST
formset = LineaHojaSet(data, queryset=lineas)
.... 
```

但是，以这种方式操作表单集存在一些缺点。当您验证表单集时，如果有任何必填字段，额外的表单将显示错误。

更好的解决方案是在使用一个额外的表单和查询集传递模板之前再次创建表单集。最有可能的是，当 formset 有效时，您将保存任何新对象，这些对象将由 queryset 添加。因此，您的页面将显示新添加的对象和一个额外的表单。

```
lineas = Linea.objects.filter(hoja=alt).order_by('id')
LineaHojaSet = modelformset_factory(Linea, can_delete=True,)
formset = LineaHojaSet(request.POST or None, queryset=lineas)
if request.method=='POST':
    # process formset
    if formset.is_valid:
       #saved and done with formset.
       if request.POST.has_key('siguiente'):
           LineaHojaSet = modelformset_factory(Linea, can_delete=True, extra=1)
           formset = LineaHojaSet(queryset=lineas)
           ...
return render_to_response('template.html', {'formset':formset}, context_instance=RequestContext(request)) 
```

# html - 停止在某些 jsp 页面中显示框架

> ID：12950666
> 
> 赞同：2
> 
> 时间：2012-10-18T08:50:55.250
> 
> 标签：html, jsp

我在jsp中使用框架。我在起始 jsp 页面中包含了三个框架。我希望这些框架只出现在起始页中。但是这些框架出现在整个前端（在所有 jsp 页面中）。

我需要为不同的jsp页面定义不同的框架。

任何人都可以帮忙..

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:14:46.813

您可以使用一些 Javascript 和 CSS 来实现这一点。如果您使用像 jQuery 这样的库会更容易，但您可以不使用它。

基本上一个快速的方法是给 iframe 一个 class/id 并用 JavaScript 找到它们。

```
var myFrame = document.getElementByID("myFrame"); 
```

然后在每个 JSP 上添加一些逻辑来确定它是哪个页面，然后您可以：

1.  通过将 CSS 显示设置为无来隐藏您不想显示的帧）
2.  将框架的 src 属性更新为该页面的正确属性

这取决于实际有多少帧。

所以：

```
myFrame.css("display:none");
myFrame.src("newURL"); 
```

# objective-c - 在 Obj-C 中创建 POCO 对象的只读版本？

> ID：12950670
> 
> 赞同：0
> 
> 时间：2012-10-18T08:51:07.803
> 
> 标签：objective-c

假设我有一个像这样的简单 DTO 类：

```
@interface MYNugget
@property (nonatomic, copy) NSString *color;
@end

@implementation MYNugget
// automatic @synthesize
@end 
```

然后我想以一种不可修改的方式将该对象存储在***另一个类***中（也就是说，通过 a或其他东西使`color`属性只读。`- (void)freeze`

除了编写我自己的二传手之外，最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T08:57:36.507

标准的方法是拥有类，一个可变的和一个不可变的。

```
@interface MYNugget
@property (nonatomic, copy, readonly) NSString *color;
@end 
```

和

```
@interface MYMutableNugget : MYNugget
@property (nonatomic, copy, readwrite) NSString *color;
@end 
```

您的其他类只会公开一个`MYNugget`属性，理想情况下又是`copy`. 这就是我们一直这样做`NSString`的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:58:29.280

我要做的只是通过构造函数设置颜色：

```
@interface MYNugget
@property (nonatomic, copy, readonly) NSString *color;

- (id) initWithColor:(NSString *)color;

@end

@implementation MYNugget

@synthesize color = _color;

- (id) initWithColor:(NSString *)color {
   self = [super init];

   if (self) {
     _color = [color copy];
   }

   return self;
}

@end 
```

# excel - 在excel中堆叠和分层框

> ID：12950671
> 
> 赞同：0
> 
> 时间：2012-10-18T08:51:12.383
> 
> 标签：excel, vba, combinatorics

我正在分层，将我的选项堆叠在 excel 中。我以类似的方式提出了这个问题，但是我现在想在其中添加更多细节。如果我有 n 个要堆叠的盒子，堆叠它们的可能选项是 2^n-1。让我举一个 3 个盒子的例子，我们给它们命名为 A、B、C 和 D。它们的堆叠方式无关紧要，即 AB=BA 和 ABC=CAB，它们算作 1 个堆叠选项。结果将是：

A、B、C、AB、BC、AC、ABC

现在我想创建一个 excel 文件，我将在其中输入框字母，它为我提供了所有堆叠可能性的列表。所以我会提供盒子的数量和字母。（3 个框，A、B、C）Excel 会读入并在单元格中为我提供选项。

是否可以在彼此下方连续获得选项？对于 n 个盒子？

这可能吗？谁能帮我这个？

提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:34:16.303

一些代码修改自 Tony Dallimore 关于[从数组创建所有可能的唯一组合的列表（使用 VBA）的帖子](https://stackoverflow.com/questions/8760185/creating-a-list-of-all-possible-unique-combinations-from-an-array-using-vba)

用法：

1.  在宏“stackBox”中——将“Sheet1”更改为您想要的工作表名称

2.  输入单元格 A1 中的框数

3.  在B1，C1，...等中输入名称..

4.  调用堆栈框

“Sheet1”中的输入格式和输出结果：

```
3   A   B   C   D   E
A                   
B                   
AB                  
C                   
AC                  
BC                  
ABC                 
D                   
AD                  
BD                  
ABD                 
CD                  
ACD                 
BCD                 
E                   
AE                  
BE                  
ABE                 
CE                  
ACE                 
BCE                 
DE                  
ADE                 
BDE                 
CDE 
```

编码：

```
 Function stackBox()
    Dim ws As Worksheet
    Dim width As Long
    Dim height As Long
    Dim numOfBox As Long
    Dim optionsA() As Variant
    Dim results() As Variant
    Dim str As String
    Dim outputArray As Variant
    Dim i As Long, j As Long
    Set ws = Worksheets("Sheet1")
    With ws
        'clear last time's output
        height = .Cells(.Rows.Count, 1).End(xlUp).row
        If height > 1 Then
            .Range(.Cells(2, 1), .Cells(height, 1)).ClearContents
        End If

        numOfBox = .Cells(1, 1).Value
        width = .Cells(1, .Columns.Count).End(xlToLeft).Column
        If width < 2 Then
            MsgBox "Error: There's no item, please fill your item in Cell B1,C1,..."
            Exit Function
        End If
        ReDim optionsA(0 To width - 2)
        For i = 0 To width - 2
            optionsA(i) = .Cells(1, i + 2).Value
        Next i

        GenerateCombinations optionsA, results, numOfBox

        ' copy the result to sheet only once
        ReDim outputArray(1 To UBound(results, 1) - LBound(results, 1) + 1, 1 To 1)
        Count = 0
        For i = LBound(results, 1) To UBound(results, 1)
            If Not IsEmpty(results(i)) Then
                'rowNum = rowNum + 1
                str = ""

                For j = LBound(results(i), 1) To UBound(results(i), 1)
                    str = str & results(i)(j)
                Next j
                Count = Count + 1
                outputArray(Count, 1) = str
            '.Cells(rowNum, 1).Value = str
            End If
        Next i
        .Range(.Cells(2, 1), .Cells(UBound(outputArray, 1) + 1, 1)).Value = outputArray
    End With

End Function

Sub GenerateCombinations(ByRef AllFields() As Variant, _
                                             ByRef Result() As Variant, ByVal numOfBox As Long)

  Dim InxResultCrnt As Integer
  Dim InxField As Integer
  Dim InxResult As Integer
  Dim i As Integer
  Dim NumFields As Integer
  Dim Powers() As Integer
  Dim ResultCrnt() As String

  NumFields = UBound(AllFields) - LBound(AllFields) + 1

  ReDim Result(0 To 2 ^ NumFields - 2)  ' one entry per combination
  ReDim Powers(0 To NumFields - 1)          ' one entry per field name

  ' Generate powers used for extracting bits from InxResult
  For InxField = 0 To NumFields - 1
    Powers(InxField) = 2 ^ InxField
  Next

 For InxResult = 0 To 2 ^ NumFields - 2
    ' Size ResultCrnt to the max number of fields per combination
    ' Build this loop's combination in ResultCrnt

    ReDim ResultCrnt(0 To NumFields - 1)
    InxResultCrnt = -1
    For InxField = 0 To NumFields - 1
      If ((InxResult + 1) And Powers(InxField)) <> 0 Then
        ' This field required in this combination
        InxResultCrnt = InxResultCrnt + 1
        ResultCrnt(InxResultCrnt) = AllFields(InxField)
      End If
    Next

    If InxResultCrnt = 0 Then
        Debug.Print "testing"
    End If
    'additional logic here
    If InxResultCrnt >= numOfBox Then
        Result(InxResult) = Empty

    Else
         ' Discard unused trailing entries
        ReDim Preserve ResultCrnt(0 To InxResultCrnt)
        ' Store this loop's combination in return array
        Result(InxResult) = ResultCrnt
    End If

  Next

End Sub 
```

# jsp - Liferay 服务构建器和 jsp 表单 portlet

> ID：12950672
> 
> 赞同：0
> 
> 时间：2012-10-18T08:51:15.570
> 
> 标签：jsp, liferay, portlet

我已经创建了我的数据库并使用了服务构建器，现在我想创建一个 portlet，它将成为添加一些实体的表单。我不知道如何在 jsp 中使用创建的 dto 以及如何将用户输入持久化到数据库中。

我必须在jsp中初始化dto类吗？

我将不胜感激任何帮助，尤其是示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:15:28.637

看看[这个项目](http://www.xmlportletfactory.org/)。它们完全支持您尝试做的事情的类型。它为任何服务构建器实体生成 CRUD 页面。实际上，它会生成包括 CRUD 页面在内的整个 portlet。它将处理从用户输入一直到层到数据库的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:22:28.337

请通过以下链接

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/service-build-5](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/service-build-5)

希望它会帮助你。

# html - 如何让文本溢出在表格中工作

> ID：12950674
> 
> 赞同：2
> 
> 时间：2012-10-18T08:51:21.737
> 
> 标签：html, css

我有下表：

```
#content table
{
    width: 800px;
    table-layout: fixed;
}

#content table thead
{
    font-weight: bold;
}

#content table thead td
{
    padding: 0;
    vertical-align: bottom;
    cursor: pointer;
    border-bottom: 2px solid #427AA8;
    padding-right: 5px;
}

#content table thead td.sorttable_nosort 
{
    cursor: default;
}

#content table thead td span
{
    display: inline-block;
}

#content table:not(.widthSet) thead td:last-child span
{
    width: 100%;
}

#content table tbody
{
    font-size: 90%;
}

#content table tbody tr
{
    border-top: 1px solid #AAA;
    vertical-align: middle;
}

#content table tbody tr .status
{
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 5px;
    background-color: #777;
    margin-right: 5px;
    line-height: 2em;
    vertical-align: middle;
    position: relative;
    bottom: 1px;
}

.ie7_html #content table tbody tr .state 
{
    *display:inline;
    *position: static;
    zoom: 1;
}

#content table tbody tr .generating, #content table tbody tr .info
{
    background-color: #3399FF;
}

#content table tbody tr .templatemoderation, #content table tbody tr .moderating
{
    background-color: #0044FF;
}

#content table tbody tr .contentmoderation
{
    background-color: #FF9900;
}

#content table tbody tr .pending, #content table tbody tr .warn, #content table tbody tr .uploaded
{
    background-color: #FF5500;
}

#content table tbody tr .printing
{
    background-color: #FFFF00;
}

#content table tbody tr .failed, #content table tbody tr .rejected, #content table tbody tr .error
{
    background-color: #DD0000;
}

#content table tbody tr .printed, #content table tbody tr .accepted, #content table tbody tr .processed
{
    background-color: #00AA00;
}

#content table tbody tr .deleted
{
    background-color: #404040;
}

#content table tbody tr .archived
{
    background-color: #CCCCCC;
}

#content table tbody tr:first-child
{
    border: none;
}

#content table tbody tr:nth-child(even)
{
    background: #DDD;
}

#content table tbody tr.selected, #content table tbody tr.selectable:hover
{
    background-color: #FFFFDD;
    cursor: pointer;
}

#content table tbody td
{
    padding: 5px;
    vertical-align: top;
    word-wrap: break-word;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.3em;
}

#content table tbody td a 
{
    color: #38688F;
    margin-bottom: 3px !important;
}

#content table tbody td a:hover
{
    color: #729CBE;
    text-decoration: underline;
}

#content table tbody td pre 
{
    overflow: auto;
    max-height: 200px;
    background-color: #EEE;
    border: 1px solid #AAA;
    padding: 3px;
}

#content table tbody td input[type="checkbox"] 
{
    position: relative;
    top: 1px;
}

#content table tbody td .tablebtn 
{
    font-size: 90%;
    margin: 0;
    padding: 0 8px;
    height: 20px;
    line-height: 20px;
    display: inline-block;
}
```

```
<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org">

  <title></title>
</head>

<body id="content">
  <table id="downloads" class="sortable">
    <colgroup>
      <col span="1" style="width: 28px;">
      <col span="1">
      <col span="1" style="width: 85px;">
      <col span="1" style="width: 110px;">
      <col span="1" style="width: 110px;">
      <col span="1">
      <col span="1" style="width: 110px;">
      <col span="1" style="width: 110px;">
      <col span="1" style="width: 78px;">
    </colgroup>

    <thead>
      <tr>
        <td class="sorttable_nosort"><span><input title="Select All" type="checkbox" id=
        "tableSelectAll" style="margin-left: 5px; display: none;">&nbsp;</span></td>

        <td><span title="Click to Sort">Student Name</span></td>

        <td><span title="Click to Sort">Student Number</span></td>

        <td><span title="Click to Sort">Type</span></td>

        <td><span title="Click to Sort">Qualification</span></td>

        <td><span title="Click to Sort">Centre</span></td>

        <td><span title="Click to Sort">PO Number</span></td>

        <td><span title="Click to Sort">Print Status</span></td>

        <td class="sorttable_nosort"><span>&nbsp;</span></td>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td><input type="checkbox" name="downloads" value=
        "097a9836-ab93-4844-b971-a0ed0120d7df"></td>

        <td>MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
        MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW</td>

        <td>EFS1774</td>

        <td>Full Certificate</td>

        <td>8345-17</td>

        <td>Some company name</td>

        <td>4684546513</td>

        <td>
          <div class="status pending">
            &nbsp;
          </div>Pending
        </td>

        <td><a class="button gradient tablebtn">Preview</a></td>
      </tr>

      <tr>
        <td><input type="checkbox" name="downloads" value=
        "c7d07d05-cfe9-4e81-984c-a0ed0120d7fb"></td>

        <td>MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
        MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW</td>

        <td>EFS1774</td>

        <td>Full Certificate</td>

        <td>8274-21</td>

        <td>Some company name</td>

        <td>4684546513</td>

        <td>
          <div class="status pending">
            &nbsp;
          </div>Pending
        </td>

        <td><a class="button gradient tablebtn">Preview</a></td>
      </tr>

      <tr>
        <td><input type="checkbox" name="downloads" value=
        "4810ac9f-20f5-4f39-af83-a0ed0120d817"></td>

        <td>MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
        MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW</td>

        <td>EFS1774</td>

        <td>CUC</td>

        <td>8274-20</td>

        <td>Some company name</td>

        <td>4684546513</td>

        <td>
          <div class="status pending">
            &nbsp;
          </div>Pending
        </td>

        <td><a class="button gradient tablebtn">Preview</a></td>
      </tr>

      <tr>
        <td><input type="checkbox" name="downloads" value=
        "9d8d8acc-4f6b-446a-aa6b-a0ed0120d838"></td>

        <td>MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
        MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW</td>

        <td>EFS1774</td>

        <td>CUC</td>

        <td>8287-30</td>

        <td>Some company name</td>

        <td>4684546513</td>

        <td>
          <div class="status pending">
            &nbsp;
          </div>Pending
        </td>

        <td><a class="button gradient tablebtn">Preview</a></td>
      </tr>

      <tr>
        <td><input type="checkbox" name="downloads" value=
        "d0224b8b-bbff-4d62-a901-a0ed0120d861"></td>

        <td>MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
        MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW</td>

        <td>EFS1774</td>

        <td>CUC</td>

        <td>8351-50</td>

        <td>Some company name</td>

        <td>4684546513</td>

        <td>
          <div class="status pending">
            &nbsp;
          </div>Pending
        </td>

        <td><a class="button gradient tablebtn">Preview</a></td>
      </tr>

      <tr>
        <td><input type="checkbox" name="downloads" value=
        "cfe6080a-f0ee-434c-ac14-a0ed0120d8cb"></td>

        <td>MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
        MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW</td>

        <td>EFS1774</td>

        <td>Full Certificate</td>

        <td>8287-35</td>

        <td>Some company name</td>

        <td>4684546513</td>

        <td>
          <div class="status pending">
            &nbsp;
          </div>Pending
        </td>

        <td><a class="button gradient tablebtn">Preview</a></td>
      </tr>

      <tr>
        <td><input type="checkbox" name="downloads" value=
        "c7b2ff75-0c01-40ed-adaf-a0ed0120d8dd"></td>

        <td>MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
        MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW</td>

        <td>EFS1774</td>

        <td>NCR</td>

        <td></td>

        <td>Some company name</td>

        <td>4684546513</td>

        <td>
          <div class="status pending">
            &nbsp;
          </div>Pending
        </td>

        <td><a class="button gradient tablebtn">Preview</a></td>
      </tr>
    </tbody>
  </table>
</body>
</html>
```

它用于`<colgroup>`设置宽度并且效果很好，直到我得到像示例中那样有点太长的数据。

问题还不错，但能够以`text-overflow`某种方式（如果可能）应用于学生姓名等列会很好。

我已经尝试将其设置为`col`样式，但没有任何乐趣。也将它应用于每个`<td>`都不会做任何事情。我想我只是在接近它是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:10:06.457

由于您让内容中断，因此单元格无需使用文本溢出。

**删除**此规则应该有助于：

```
word-wrap: break-word; 
```

# c++ - 定义静态常量通用唯一标识符 (UUID)

> ID：12950677
> 
> 赞同：2
> 
> 时间：2012-10-18T08:51:38.097
> 
> 标签：c++, uuid, boost-uuid

## 语境

我经常使用 Boost 库的 UUID 实现来识别派生类。为此，我通常使用以下内容：
在声明文件中：

```
 #include "ClassA.h"
  #include <boost/uuid/uuid.hpp>

  class SubClass1 : public ClassA {
    public:
      static const boost::uuids::uuid classId; // 7feb24af-fc38-44de-bc38-04defc3804de
    ... 
  }; 
```

在实现文件中：

```
 #include "SubClass1.h"
  #include <boost/uuids/uuid_generator.h>

  const boost::uuids::uuid SubClass1 ::classId = boost::uuids::string_generator()("{7feb24af-fc38-44de-bc38-04defc3804de}");
  ... 
```

## 问题

**我想知道是否可以在声明文件中为 UUID 赋值。**

## 想法

起初，我认为这是可能的，因为 Boost 实现是 POD。因此，我尝试了几种使用聚合初始化器直接在标头中分配值的方法（有关非静态聚合初始化器的示例，请参见[boost 文档）：](http://www.boost.org/doc/libs/1_51_0/libs/uuid/uuid.html#POD%20Efficiencies)

```
 static const boost::uuids::uuid classId = { 0x7f, 0xeb, ... }; 
```

不幸的是，它在编译时失败了（编译器只能初始化静态 const 整数类型）。

你有什么建议来解决这个问题，最好使用 UUID 的 Boost 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:35:46.987

在头文件中将非整数常量定义*为类成员*的最简单方法是将其包装在函数中，如下所示：

```
typedef whatever Uuid;

class MyClass
{
public:
    static Uuid const& uuid()
    {
        Uuid const theValue = ...;
        return theValue;
    }
}; 
```

如果你想要它作为一个实际的常量，而不是一个函数，那么你可以使用一些模板技巧，如下所示：

```
template< class Dummy >
class MyClass_constants
{
public:
    static Uuid const uuid;
};

template< class Dummy >
Uuid const MyClass_constants<Dummy>::uuid = ...;

class MyClass
    : public MyClass_constants<void>
{}; 
```

使用 C++11，您可以使用`constexpr`，如下所示：

```
class MyClass
{
public:
    static Uuid constexpr uuid = ...;
}; 
```

但是，尽管使用 g++ 4.7.1 的测试编译良好，没有链接器警告，但它太新了，我不确定标准的单一定义规则是否真的支持它，或者是否在多个翻译单元中使用这样的定义，我'我进入未定义的行为。

所以，如果你想做这个`constexpr`，也许可以问一个关于 ODR 的单独问题。

作为替代方案，您可以等待 C++2040 标准，然后编写

```
inline static Uuid const uuid = ...; 
```

值得深思的是，如图所示，即使在 C++98 中也可以*模拟*这个假设的未来特性，即编译器和链接器已经实现了所有需要的功能，并且从第一个标准开始就已经实现。然而，这种简单的功能在语言中是缺乏的。我相信这是由于一种偶然的历史语言演变。

无论如何，我会选择首先显示的简单函数包装器。:-)

# typescript - for-in 语句

> ID：12950681
> 
> 赞同：81
> 
> 时间：2012-10-18T08:51:58.377
> 
> 标签：typescript

TypeScript 文档没有提到像`for`or之类的循环`for-in`。从使用语言来看，循环中似乎只支持`any`or`string`变量。`for`

为什么做出这个决定？

为什么不使用类型信息并拥有强类型迭代变量？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2015-12-09T14:47:07.957

In Typescript 1.5 and later, you can use [`for..of`](https://basarat.gitbooks.io/typescript/content/docs/for...of.html) as opposed to `for..in`

```
var numbers = [1, 2, 3];

for (var number of numbers) {
    console.log(number);
} 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-10-19T21:03:29.587

TypeScript 并没有给你一把枪来射你自己的脚。

迭代器变量是一个字符串，因为**它是一个字符串**，句号。观察：

```
var obj = {};
obj['0'] = 'quote zero quote';
obj[0.0] = 'zero point zero';
obj['[object Object]'] = 'literal string "[object Object]"';
obj[<any>obj] = 'this obj'
obj[<any>undefined] = 'undefined';
obj[<any>"undefined"] = 'the literal string "undefined"';

for(var key in obj) {
    console.log('Type: ' + typeof key);
    console.log(key + ' => ' + obj[key]);
} 
```

现在有多少个键/值对`obj`？6、多还是少？不，3，所有的键都是字符串：

```
Type: string
0 => zero point zero
Type: string
[object Object] => this obj; 
Type: string
undefined => the literal string "undefined" 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-10-18T09:11:33.310

for-in 语句实际上是用来枚举对象属性的，这就是它在 TypeScript 中的实现方式。[在数组上使用它](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)存在一些问题。

我不能代表 TypeScript 团队发言，但我相信这就是使用该语言实现的原因。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-04-01T20:36:35.873

**编辑 2018**：这是过时的，js 和 typescript 现在有 for..of 循环。
[http://www.typescriptlang.org/docs/handbook/iterators-and-generators.html](http://www.typescriptlang.org/docs/handbook/iterators-and-generators.html)

* * *

“TypeScript Revealed”一书说

“您可以使用 for 或 for..in 循环遍历数组中的项目，如下所示：

```
// standard for loop
for (var i = 0; i < actors.length; i++)
{
  console.log(actors[i]);
}

// for..in loop
for (var actor in actors)
{
  console.log(actor);
} 
```

"

事实证明，第二个循环**没有**通过循环中的演员。所以会说这是完全错误的。可悲的是，如上所述，打字稿没有触及循环。

**map** and **forEach** often help me and are due to typescripts enhancements on function definitions more approachable, lke at the very moment:

```
this.notes = arr.map(state => new Note(state)); 
```

My wish list to TypeScript;

1.  Generic collections
2.  Iterators (IEnumerable, IEnumerator interfaces would be best)

# django - [[Django Celery]] Celery 阻止执行 IO 任务

> ID：12950682
> 
> 赞同：1
> 
> 时间：2012-10-18T08:51:59.140
> 
> 标签：django, io, celery

我用 celery 做一些 IO 任务，比如抓取远程图片，给用户发邮件。但芹菜有时会因没有原木而阻塞。此时，它不会执行我发送的任何任务。我必须重新启动它，它开始在它阻塞的地方工作。

它让我困惑了很长时间。我能做些什么 ？用 celery 分发 IO 任务的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T06:07:21.533

默认情况下，celery worker fork 多个进程等待来自客户端的任务请求。对于 IO 待处理的任务，您的系统需要大量并发处理请求。这是命令：

```
 celery -A tasks worker --without-heartbeat -P threads --concurrency=10 
```

如果同时收入请求很多，您的并发级别必须设置为高于传入请求突发的大小。系统的性能可能会受到硬件内存大小或操作系统选择 API 的限制。并发量大时可以使用 celery 的 thread/gevent 模型：

```
 celery -A tasks worker --without-heartbeat -P threads --concurrency=1000 
```

或者

```
 celery -A tasks worker --without-heartbeat -P gevent --concurrency=1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:34:14.010

你可以增加芹菜并发

```
manage.py celeryd --concurrency=3  

```

其中并发 == 处理器数量

运行外壳命令

```
   grep -c 处理器 /proc/cpuinfo

```

获取您机器上的处理器数量

# android - 如何以编程方式拍摄设备屏幕快照？

> ID：12950690
> 
> 赞同：0
> 
> 时间：2012-10-18T08:52:27.117
> 
> 标签：android, android-intent

我想在按钮单击时拍摄我的设备屏幕快照。请提供一些代码示例而不是链接。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:46:41.817

我得到了我的问题的答案。实际上，我将位图设为空。但我找到了原因和解决方案。

```
View v = findViewById(R.id.attachments_list);
    v.setDrawingCacheEnabled(true);
    // this is the important code :)
    // Without it the view will have a dimension of 0,0 and the bitmap will
    // be null
    v.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
    v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());

    v.buildDrawingCache(true);
    Bitmap bitmap = Bitmap.createBitmap(v.getDrawingCache()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:54:48.303

您无法获取设备的屏幕截图（未植根），但在您的应用程序中可以。

下面是截取应用程序屏幕并将文件保存在 sdcard 中的代码。

```
mLayoutRoot.setDrawingCacheEnabled(true); //mLayoutRoot is your Parent Layout(may be RelativeLayout, LinearLayout or etc..)
mLayoutRoot.buildDrawingCache();

Bitmap mBitmap= mLayoutRoot.getDrawingCache();
try {
    if(mBitmap!=null)
    {
        FileOutputStream out = new FileOutputStream("/sdcard/filename.png"));
        mBitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
        out.flush();
        out.close();
    }
} catch (Exception e) {} 
```

# c - 参数名称省略错误？

> ID：12950694
> 
> 赞同：7
> 
> 时间：2012-10-18T08:53:04.487
> 
> 标签：c, arrays, function, methods

尝试调用该方法时出现错误：

```
int box(int rows, int cols, int [rows][cols]) 
```

从使用此调用的主要方法：

```
box(arrayDimensions, arrayDimensions, array); 
```

但我不确定问题是什么。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T08:55:01.170

```
int box(int rows, int cols, int [rows][cols]) 
```

需要是

```
int box(int rows, int cols, int something[rows][cols]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-16T15:20:33.177

请记住，您在函数定义/标头中使用的每个变量都需要有一个标识符/名称。像其他任何东西一样，您使用的数组需要有一个标识符/名称，因为它是一个变量 @AkshaiShah 很好地修改了您的代码。

# javascript - Extjs 4如何在没有doComponentLayout的组合框字段上隐藏/显示触发器？

> ID：12950700
> 
> 赞同：2
> 
> 时间：2012-10-18T08:53:36.167
> 
> 标签：javascript, extjs

我需要在没有调用方法**doComponentLayout() （** **setReadOnly**方法的源代码）的情况下对字段（**组合框**、* *date* * 等）进行隐藏/显示触发器。**doComponentLayout()**方法在 IE 上非常慢。有谁能够帮助我？谢谢！

 ******* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:06:32.630

您还可以使用**setHideTrigger(true)**方法。这是 Ext.form.field.ComboBox 上的私有方法 - （请参阅[Extjs ComboBox](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox)，确保选中“显示”菜单中的“私有”。）

如果组合组件尚未呈现，则调用 myCombo.triggerEl.hide() 不起作用。

您还可以通过设置配置属性**hideTrigger: false 在首次初始化组件时隐藏触发器。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:39:26.940

您应该能够显示/隐藏作为扩展 Ext.form.field.Trigger 的任何属性的 triggerEl（例如组合、日期等）。

在此处查看实时示例：

[http://jsfiddle.net/hWGYE/765/](http://jsfiddle.net/hWGYE/765/)******

# node.js - 使用 NodeJS 从 TypeScript 与 MongoDB 通信

> ID：12950716
> 
> 赞同：1
> 
> 时间：2012-10-18T08:54:18.250
> 
> 标签：node.js, mongodb, typescript

据我了解，必须对 NodeJS 中的所有 IO 使用异步回调（？）

我正试图围绕微软提供的[这个示例代码。](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#samples%2fimageboard%2fdb.ts)

它们以 db.open(function() {}); 开头 即“open”的回调中没有提供任何代码..

因此，所有与 db 对象交互的代码都将在 open 完成之前执行。他们的样本如何工作？

为了让我在自己的代码中能够将任何数据写入数据库，我必须提供写入代码作为对 db.open 函数的回调。

运行我的代码时的另一个奇怪问题，在写入数据后，即使所有用户代码都已完成，nodejs 服务器也不会退出。这是为什么？

# iis - 如何在 IIS 6 中使用多个 ISAPI 重定向 dll（每个站点都有自己的 isapi dll）

> ID：12950718
> 
> 赞同：0
> 
> 时间：2012-10-18T08:54:31.060
> 
> 标签：iis, tomcat, iis-6

我有一个已配置的 IIS 6，其中已经定义了一个页面，该页面使用 ISAPI dll 将传入的请求重定向到底层的 tomcat。现在我想添加一个新页面并为此页面使用它自己的 isapi dll，但这对我来说不起作用。isapi 重定向的状态不会更改为活动

在这里您可以看到重定向的缺失状态 [http://pbrd.co/TwXwCQ](http://pbrd.co/TwXwCQ)

是否可能在 iis 上有多个站点，每个站点都使用自己的重定向 dll？或者我怎样才能实现对我网站的请求将被重定向到我的底层tomcat。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:01:54.943

您在这里展示的是一个 ISAPI 过滤器。这些可以在服务级别安装，使它们成为全局（影响所有站点），或者它们可以在站点级别应用，使其成为本地（仅影响单个站点）。

如果支持在站点级别使用所讨论的过滤器，那么为每个站点配置过滤器的实例应该没有问题。如果过滤器仅在全局级别受支持，那么您需要查看配置以查看是否有一些方法可以配置过滤器以根据请求最初指向的站点（或页面）采取特定操作。

在这种特殊情况下，我建议查看 Tomcat 文档以了解如何正确配置其 ISAPI 过滤器。

# java - 如何在 Firefox 中使用不同的 Java 版本测试 Java 小程序？

> ID：12950720
> 
> 赞同：3
> 
> 时间：2012-10-18T08:54:33.183
> 
> 标签：java, firefox, applet

如何使用不同的 Java 插件版本在 Firefox 中测试 Java Applet 应用程序？例如，使用 Java 6 和 Java 7？

有没有办法将 Firefox 引导到正确的 java.plugin.dll？

到目前为止，还没有找到任何关于 NPAPI 的 Firefox 命令行选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T15:11:18.400

最后，我设法做到了。

使您的计算机使用另一个 JRE/JDK 的步骤：

1.  打开`regedit`.
2.  打开`HKEY_LOCAL_MACHINE\SOFTWARE\MozillaPlugins\@java.com/JavaPlugin,version=XXX`子树。
3.  将值更改`Path`为插件 dll 所在的位置。例如：`c:\java\jdk1.6.0_37\jre\bin\plugin2\npjp2.dll`。
4.  更改`Version`值 例如：`1.6.0_37`.
5.  确保您在`%PATH%`环境变量中有正确的 Java。
6.  在控制面板 -> Java -> 查看禁用所有你不会使用的 javas。只选择您需要的那个。
7.  玩得开心！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:01:23.497

使用 JNLP 部署小程序并在[部分](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html#resources)[`version`的`j2se`元素中`resources`](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html#resources)指定适当的。那将是`1.6*`&`1.7*`分别。请注意，这仅适用于实现 Plug-In 2 架构 JRE 的 1.6 版本（例如 Oracle 的 1.6.0_10+）。

有关版本字符串使用的详细信息，另请参阅[Java Web Start - 运行时版本控制。](http://pscode.org/jws/version.html)

## 交替

转到控制面板并导航到 JNLP 运行时设置。

![JNLP 运行时设置](../Images/fa029bbded749b6747931928bc39856b.png)

要在 1.6 中进行测试，请选择 1.6 JRE，然后取消选择 1.7。

# c# - int.Parse(ToString) 不同于 (int)

> ID：12950724
> 
> 赞同：2
> 
> 时间：2012-10-18T08:54:42.340
> 
> 标签：c#, parsing, casting

我有一个`object`大于零的数字（授予）。让我们给它 42。它最初是`HttpContext.Session`集合的一部分。

```
Session["myNumber"] = 42;
object obj = Session["myNumber"]; 
```

我尝试将它用作带有强制转换的int：

```
int num = (int)obj; 
```

这返回`0`。

但是，我设法得到了我想要做的事情：

```
int num = int.Parse(obj.ToString()); 
```

这给了我`42`.

这有意义吗，可能是声明或类型有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:07:53.153

我在下面要说明的关键点是，是的，***如果***实际`obj`不是真正的`int`但足够`int`像 unbox 工作的东西，那么它可能是可能的。就理解它而言，我在这里要看的主要内容是：什么是`obj.GetType()`.

好的，邪恶的代码： - 首先是重要的一点：

```
static void Main()
{
    object obj = Evil();
    int i = (int)obj; // 0
    int j = int.Parse(obj.ToString()); // 42
} 
```

我是怎么做到这个怪物的？

我撒谎和欺骗......基本上，我是这样做的：

```
enum bar {
    @42 = 0 // not legal C#... "42" is not a valid identifier
} 
```

但在 CLI 级别它是有效的......

```
static object Evil()
{
    var ab = AppDomain.CurrentDomain.DefineDynamicAssembly(
        new AssemblyName("foo"), AssemblyBuilderAccess.Run);
    var mb = ab.DefineDynamicModule("foo");
    var eb = mb.DefineEnum("bar", TypeAttributes.Public, typeof(int));
    eb.DefineLiteral("42", 0);
    Type t = eb.CreateType();
    return Enum.ToObject(t, 0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:09:57.330

你所描述的根本不会发生。

如果您`0`在拆箱对象时获得值，则该对象实际上包含一个 boxed `int`，并且它实际上具有 value `0`。

拆箱值的唯一方法是使用该值的确切类型，这意味着如果它不是`int`.

您的代码中必须有其他原因导致此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:01:43.807

是的，它确实有意义，因为“42”可以用多种方式表示。它是一个字符串吗？是整数吗？它是一个十六进制字符串吗？是香蕉和橙子吗（不是开玩笑）？

因此，当您询问 C#“int.Parse”时，您告诉 C#“这个东西是一个使用标准 C# 字符串表示法表示整数的整数。

当你用“(int)obj”行告诉 C# 时，你是在说这个东西已经是一个整数，就像你喜欢的那样。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T09:03:38.097

当我执行代码时

```
 object obj = 42;

        int num = (int)obj; 

        int num2 = int.Parse(obj.ToString()); 
```

在这两种情况下它都返回 42。

所以，你的 obj 必须是 object 以外的东西（如你所说）。所以我们需要声明的类型 og obj 来进一步回答这个问题。

# android - 如何在android中正确关闭光标

> ID：12950725
> 
> 赞同：10
> 
> 时间：2012-10-18T08:54:45.427
> 
> 标签：android, android-sqlite, android-cursor

我有这个使用 sqlite 的数据库，我在关闭游标时遇到问题，它说`Application did not close the cursor or database object that was opened here`这里是 logcat

```
10-18 08:40:56.354: E/Cursor(331): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
10-18 08:40:56.354: E/Cursor(331):  at android.database.sqlite.SQLiteCursor.<init>(SQLiteCursor.java:210)
10-18 08:40:56.354: E/Cursor(331):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
10-18 08:40:56.354: E/Cursor(331):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
10-18 08:40:56.354: E/Cursor(331):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
10-18 08:40:56.354: E/Cursor(331):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
10-18 08:40:56.354: E/Cursor(331):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
10-18 08:40:56.354: E/Cursor(331):  at standard.internet.marketing.mymovingfriend.SQLHandler.checkMove(SQLHandler.java:1094)
10-18 08:40:56.354: E/Cursor(331):  at standard.internet.marketing.mymovingfriend.ListMovingNames$3.onKey(ListMovingNames.java:98)
10-18 08:40:56.354: E/Cursor(331):  at android.view.View.dispatchKeyEvent(View.java:3735)
10-18 08:40:56.354: E/Cursor(331):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 08:40:56.354: E/Cursor(331):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 08:40:56.354: E/Cursor(331):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 08:40:56.354: E/Cursor(331):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 08:40:56.354: E/Cursor(331):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1667)
10-18 08:40:56.354: E/Cursor(331):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1102)
10-18 08:40:56.354: E/Cursor(331):  at android.app.Activity.dispatchKeyEvent(Activity.java:2063)
10-18 08:40:56.354: E/Cursor(331):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
10-18 08:40:56.354: E/Cursor(331):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
10-18 08:40:56.354: E/Cursor(331):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
10-18 08:40:56.354: E/Cursor(331):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
10-18 08:40:56.354: E/Cursor(331):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 08:40:56.354: E/Cursor(331):  at android.os.Looper.loop(Looper.java:123)
10-18 08:40:56.354: E/Cursor(331):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-18 08:40:56.354: E/Cursor(331):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 08:40:56.354: E/Cursor(331):  at java.lang.reflect.Method.invoke(Method.java:521)
10-18 08:40:56.354: E/Cursor(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-18 08:40:56.354: E/Cursor(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-18 08:40:56.354: E/Cursor(331):  at dalvik.system.NativeStart.main(Native Method) 
```

这个问题困扰了我 3 天。

这里有一些相关的代码：

```
public class SQLHandler {

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID5 = "_id";
    public static final String KEY_MOVEDATE = "movedate";
    public static final String KEY_TOTALMOVEWEIGHT = "totalmoveweight";
    public static final String KEY_TOTALITEM = "totalitem";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_LISTITEMNAME = "listitemname";
    public static final String KEY_LISTITEMWEIGHT = "listitemweight";
    public static final String KEY_LISTITEMROOM = "listitemroom";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE5 = "listitem";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_TOTALMOVEWEIGHT + " TEXT NOT NULL, " + 
            KEY_TOTALITEM + " INTEGER NOT NULL, " +
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ID2 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ROOMMOVEHOLDER + " TEXT NOT NULL, " + 
            KEY_ROOMWEIGHT + " TEXT NOT NULL, " + 
            KEY_ROOM + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_5 = "CREATE TABLE " + DATABASE_TABLE5 + " (" + 
            KEY_ID5 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_LISTITEMNAME + " TEXT NOT NULL, " + 
            KEY_LISTITEMWEIGHT + " TEXT NOT NULL, " +
            KEY_LISTITEMROOM + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_2);
            db.execSQL(CREATE_TABLE_3);
            db.execSQL(CREATE_TABLE_4);
            db.execSQL(CREATE_TABLE_5);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE2);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE3);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE4);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE5);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourDatabase.close();
        ourHelper.close();
    }

    public long createMove(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVENAME, smovename);
        cv.put(KEY_MOVEDATE, "Not yet set");
        cv.put(KEY_TOTALMOVEWEIGHT, "0");
        cv.put(KEY_TOTALITEM, 0);
        return ourDatabase.insert(DATABASE_TABLE1, null, cv);
    }

    public void createList(){

        String[] sroom = new String[]{"Kitchen", "Bedroom", "Dinning Room"};
        String[] sitem = new String[]{"Dishwasher", "Bed", "Table"};
        String[] sweight = new String[]{"40", "25", "15"};

        for (int i = 0; i < sroom.length; i++) {
            cv.put(KEY_LISTITEMROOM, sroom[i]);
            cv.put(KEY_LISTITEMNAME, sitem[i]);
            cv.put(KEY_LISTITEMWEIGHT, sweight[i]);
            ourDatabase.insert(DATABASE_TABLE5, null, cv);
        }
    }

    public void setMoveDate(String smovedate, String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVEDATE, smovedate);
        ourDatabase.update(DATABASE_TABLE1, cv, KEY_MOVENAME + "='" + smovename + "'", null);
    }

    public void setMoveWeight(String smoveweight, String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_TOTALMOVEWEIGHT, smoveweight);
        ourDatabase.update(DATABASE_TABLE1, cv, KEY_MOVENAME + "='" + smovename + "'", null);
    }

    public void setTotalItem(String smovename, int imoveitem){
        ContentValues cv = new ContentValues();
        cv.put(KEY_TOTALITEM, imoveitem);
        ourDatabase.update(DATABASE_TABLE1, cv, KEY_MOVENAME + "='" + smovename + "'", null);
    }

    public void renameRoom(String movename, String roomname, String currentroom){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOM, roomname);
        ourDatabase.update(DATABASE_TABLE2, cv, KEY_ROOMMOVEHOLDER + "='" + movename + "'" + " AND " + KEY_ROOM + "='" + currentroom + "'", null);
    }

    public void setRoomWeight(String sroomweight, String smovename, String sroomname){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOMWEIGHT, sroomweight);
        ourDatabase.update(DATABASE_TABLE2, cv, KEY_ROOMMOVEHOLDER + "='" + smovename + "'" + " AND " + KEY_ROOM + "='" + sroomname + "'", null);
    }

    public long addRooms(String sroommoveholder, String sroom){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOMMOVEHOLDER, sroommoveholder);
        cv.put(KEY_ROOM, sroom);
        cv.put(KEY_ROOMWEIGHT, "0");
        return ourDatabase.insert(DATABASE_TABLE2, null, cv);
    }

    public long addNewItems(String sitemmoveholder, String sroomholder, String sitemname, String sitemvalue, String sitemweight){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ITEMMOVEHOLDER, sitemmoveholder);
        cv.put(KEY_ROOMHOLDER, sroomholder);
        cv.put(KEY_ITEMNAME, sitemname);
        cv.put(KEY_ITEMVALUE, sitemvalue);
        cv.put(KEY_ITEMWEIGHT, sitemweight);
        return ourDatabase.insert(DATABASE_TABLE3, null, cv);
    }

    public void updateItems(String sitemmoveholder, String sroomholder, String sitemname, String sitemvalue, String sitemweight){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ITEMVALUE, sitemvalue);
        cv.put(KEY_ITEMWEIGHT, sitemweight);
        ourDatabase.update(DATABASE_TABLE3, cv, KEY_ITEMMOVEHOLDER + "='" + sitemmoveholder + "'" + " AND " + 
                KEY_ROOMHOLDER + "='" + sroomholder + "'" + " AND " + KEY_ITEMNAME + "='" + sitemname + "'", null);
    }

    public Cursor getMove(){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};

        Cursor c = null;
        try {
            c = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
        } catch (Exception e) {
            c.close();
        }
        return c;
    }

    public String getTotalWeight(String m) throws SQLException{
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME, KEY_MOVEDATE, KEY_TOTALMOVEWEIGHT};

        Cursor c = null;
        try {
            c = ourDatabase.query(DATABASE_TABLE1, columns, KEY_MOVENAME + "= '" + m + "'", null, null, null, null);
            if (c != null) {
                c.moveToFirst();
                String totalWeight = c.getString(3);
                return totalWeight;
            }
        } catch (Exception e) {
            c.close();
        }
        return null;

    }

    public String getTotalWeightLBS(String m) throws SQLException{
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME, KEY_MOVEDATE, KEY_TOTALMOVEWEIGHT};

        Cursor c = null;
        try {
            c = ourDatabase.query(DATABASE_TABLE1, columns, KEY_MOVENAME + "= '" + m + "'", null, null, null, null);
            if (c != null) {
                c.moveToFirst();
                int x = Integer.parseInt(c.getString(3)) * 7;
                String totalWeight = "" + x + " lbs";
                return totalWeight;
            }
        } catch (Exception e) {
            c.close();
        }
        return null;

    }

    public String getDateMove(String md){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME, KEY_MOVEDATE};

        Cursor c = null;try {
            c = ourDatabase.query(DATABASE_TABLE1, columns, KEY_MOVENAME + "= '" + md + "'", null, null, null, null);

            if (c != null) {
                c.moveToFirst();
                String moveDate = c.getString(2);
                return moveDate;
            }
        } catch (Exception e) {
            c.close();
        }
        return null;
    }

    public ArrayList<String> loadRooms(String mn) throws SQLException{
        String[] columns = new String[]{KEY_ID2, KEY_ROOMMOVEHOLDER, KEY_ROOM};

        ArrayList<String> array = new ArrayList<String>();

        Cursor c = null;
        try {
            c = ourDatabase.query(DATABASE_TABLE2, columns,KEY_ROOMMOVEHOLDER + "='" + mn + "'", 
                    null, null, null, null);
            int iroom = c.getColumnIndex(KEY_ROOM);

            for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                array.add(c.getString(iroom));
            }
        } catch (Exception e) {
            c.close();
        }
        return array;
    }

    public void deleteMove(String m) throws SQLException{
        ourDatabase.delete(DATABASE_TABLE1, KEY_MOVENAME + "='" + m + "'", null);
        ourDatabase.delete(DATABASE_TABLE2, KEY_ROOMMOVEHOLDER + "='" + m + "'", null);
        ourDatabase.delete(DATABASE_TABLE3, KEY_ITEMMOVEHOLDER + "='" + m + "'", null);
        ourDatabase.delete(DATABASE_TABLE4, KEY_TODOMOVE + "='" + m + "'", null);
    }

    public ArrayList<String> getitems(){
        String[] columns = new String[]{KEY_ID5, KEY_ITEMNAME};
        ArrayList<String> items;
        items = new ArrayList<String>();

        Cursor c = null;
        try {
            c = ourDatabase.query(DATABASE_TABLE5, columns, null, null, null, null, null);

            for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                items.add(c.getString(1));
            }
        } catch (Exception e) {
            c.close();
        }

        return items;
    }

    public ArrayList<String> getitemweight(){
        String[] columns = new String[]{KEY_ID5, KEY_ITEMWEIGHT};
        ArrayList<String> items = new ArrayList<String>();

        Cursor c = null;
        try {
            c = ourDatabase.query(DATABASE_TABLE5, columns, null, null, null, null, null);
            for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                items.add(c.getString(1));
            }
        } catch (Exception e) {
            c.close();
        }

        return items;
    }

    public ArrayList<String> getitemclass(){
        String[] columns = new String[]{KEY_ID5, KEY_LISTITEMROOM};
        ArrayList<String> items = new ArrayList<String>();

        Cursor c = null;
        try {
            c = ourDatabase.query(DATABASE_TABLE5, columns, null, null, null, null, null);

            for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                items.add(c.getString(1));
            }
        } catch (Exception e) {
            c.close();
        }

        return items;
    }

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T09:01:19.237

您没有在`getDateMove`, `getTotalWeightLBS`, `loadRooms`,...中关闭光标

在不再需要光标的地方关闭它。在这些方法中使用 try-finally，即使发生抛出异常，它也会保证在 finally 块中执行代码。

从此更改方法中的代码：

```
try{
  // get data from cursor
} catch (Exception e) {
    c.close();
} 
```

对此：

```
try {
   // get data from cursor
} catch (Exception e) {
   // exception handling
} finally {
   if(c != null){
       c.close();
   }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-11T14:17:10.050

如果一个元素正在实现 AutoCloseable（就像`Cursor.class`那样），我会建议做一个`try-with-resources`，就像[这里](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)描述的那样。如果您使用 Retrolambda，则它具有`try-with-resources`向后移植的功能。

所以你的代码：

```
Cursor cursor = db.query("tableName", columns, null, null, null, null, null);
try {
    if (cursor.moveToFirst()) return cursor.getString(3);
    else return null;
} finally {
   cursor.close();
} 
```

只会变成：

```
try (Cursor cursor = db.query("tableName", columns, null, null, null, null, null)) {
    if (cursor.moveToFirst()) return cursor.getString(3);
    else return null;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-18T08:58:54.183

关闭光标`finally`将保证它会被关闭；

```
public void myfunc() {

    Cursor c = null;

    try {

      c = ... // Open cursor here
      return .... // maybe return something

    } finally {
       if(c != null) { c.close(); }
    } 
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-08-19T20:29:45.573

如果你使用 Kotlin（也可以在 Java 中以不同的方式使用）和 Android 4.1 及更高版本，你可以使用这个：

```
 cursor?.use { 
       //..do stuff
    } 
```

例如，您可以[**在此处查看**](https://stackoverflow.com/a/17852351/878126)。

如果您想使用 Java，请执行以下操作：

```
 try (Cursor cursor = ...) {
            // do something
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T08:59:58.503

关闭您的数据库`onStop()`或`onDestroy()`您的活动方法！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T09:01:57.003

您正在尝试使用 catch 块内关闭光标

```
catch (Exception e) {
            c.close();
        } 
```

但是如果你没有得到任何异常，那么它将如何关闭

所以把它放在 finally 块中

```
finally {
            c.close();
        } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-18T09:05:12.887

试试这个，

在`onStop()`或`onDestroy()`

检查游标是否为空

```
@Override
public void onStop(){
 Cursor cursor;

 if(cursor!=null){
  cursor.close();}
 } 
```

如果没有，则关闭光标。

**编辑**

关闭数据库对象

```
DatabaseObject db;
if(db!=null)
{ db.close();} 
```

希望能帮助到你。

# java - SetCharacterEncodingFilter 仅适用于 GET 请求

> ID：12950731
> 
> 赞同：0
> 
> 时间：2012-10-18T08:55:02.853
> 
> 标签：java, tomcat, servlets, utf-8, servlet-filters

我使用一个小的 HTML 表单来请求 tomcat 服务器（servlet）。如果我使用“GET”请求，我实现的“SetCharacterEncodingFilter”效果很好，结果显示了所有德语“元音变音”。但是如果我使用 POST 请求（不幸的是我需要这样做），所有的“元音变音”看起来都很有趣 ;-)

HTML 部分如下所示：

```
<form id="form1" name="form1" method="POST" 
accept-charset="uft-8" 
action="http://localhost:8080/foo">
<p>
<label for="textfield"></label>
<textarea name="text" id="text" 
cols="45" rows="5"></textarea>
</p>
</form> 
```

小服务程序部分：

```
protected void processRequest(HttpServletRequest request, 
HttpServletResponse response)
throws ServletException, IOException, JSONException, Exception {

response.setContentType("text/html;charset=UTF-8");

String querytext = request.getParameter("text");

... 
... 
```

有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:01:31.463

不要在响应中设置字符集。这对客户发送给您的内容没有影响。它只会影响您发回给客户的内容。

而是在获取参数**之前尝试在请求上设置字符集：**

```
request.setCharacterEncoding("UTF-8") // or ISO-8859-1, you have to check
String querytext = request.getParameter("text"); 
```

您获得的字符集取决于最初发送到客户端的 HTTP 标头，因此浏览器通常会尊重这一点并为 POST 使用相同的字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T08:55:45.930

对于 GET 请求，您需要在 server.xml 中的 tomcat 连接器标记上设置 URIEncoding="UTF-8"；对于 POST 请求，字符集过滤器应该可以工作，但它必须是配置的第一个过滤器。见：[http ://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q3](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q3)

# ieee-754 - IEEE 754 浮点十进制

> ID：12950733
> 
> 赞同：0
> 
> 时间：2012-10-18T08:55:08.680
> 
> 标签：ieee-754

如何将 mx 10^x 转换为 nx 2^y 。

我想将 2.93 x 10^12 转换为 IEEE-754 表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:10:52.430

两个选项：明确计算 n,y：

y = ceil(log2(m*10^x)), n = (m*10^x / 2^y)

仅使用整数迭代：

将整数 293 写入变量*尾数*（并保持指数计数=10）

```
exp_two=0;
while (exponent>0) {
    mantissa*=10; exponent--;
    while ((mantissa & 1)==0) {
        mantissa>>=1; exp_two++;
    }
} 
```

编辑：在 IEEE-754 中，假设`0.5<n<=1.0`. 这是固定的（通过乘/除以 2 直到满足条件并相应地调整指数 y ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T23:05:49.650

你可以试试这个：

```
float f = 2.93E12;

unsigned int ui = *reinterpret_cast<unsigned int *>(&f); 
```

# c# - 类和功能选择性泛型

> ID：12950734
> 
> 赞同：1
> 
> 时间：2012-10-18T08:55:12.830
> 
> 标签：c#, .net, wpf, generics

我有一个名为`IFilterDataSourceAdapter`. 此接口公开 EndPoints 以适应传入数据源（`IEnumrable<T>`、`iCollectionView`或`DataTable`或`DataView`或`XmlDocument`），并提供直观过滤它们的功能。

1.  它接受来自数据源的字段名称。
2.  生成`FilterFields`每个公开三个属性的列表

    1.  字段名称
    2.  根据字段的筛选运算符列表`Type`- 等于、包含、小于等。
    3.  提供的值字段。

    GUI 可以使用此`FilterField`列表来显示过滤器面板。

3.  适配器将提供自己的`ICommand`以从 GUI 执行过滤器调用。

所以在适配器中，我想做以下

1.  如果传入的数据源是类型，`IEnumrable<SomeClass>`我会在应用过滤器时生成`AsQueryable()` **Linq 表达式并返回****查询`IEnumrable<SomeClass>`**的列表。
2.  如果传入的数据源是类型，`ICollectionView`我将生成`Filter`委托并刷新集合视图。
3.  如果传入的数据源是类型`DataTable`，或者`DataView`我会生成`DataFilter`基于字符串的查询并刷新数据表或数据视图。
4.  如果传入的数据源是类型`XDocument`，它将产生`XPath`表达式和`XElements`过滤列表。

我想基于`Generics`上述类型的数据源来执行此操作，并`Filter`相应地区分命令执行。

我们可以`IFilterDataSourceAdapter<T>`基于 T 是`IEnurable<SomeClass>`or `ICollectionView`or `DataTable`or or `DataView`or来限制其成员（字段和函数）的单个接口`XDocument`吗？

**编辑：**

我当前的实现实际上是每种数据源的 5 种抽象适配器，它们工作正常。他们都实施`IFilterDataSourceAdapter`。但我认为也许我们可以`IFilterDataSourceAdapter<T>`使用约束而不是更适合每个适配器实现设计。所以可能是我已经很好了。

可能是我想太多了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:33:14.083

可能不是答案，但评论太长了...根据我对您问题的理解，我会说您现在拥有的（具有不同接口的通用基本接口，每个接口都特定于数据源）很好。

我专门指的是你问题的这一部分：

> 我们可以`IFilterDataSourceAdapter<T>`基于 T 是`IEnurable<SomeClass>`or `ICollectionView`or `DataTable`or or `DataView`or来限制其成员（字段和函数）的单个接口`XDocument`吗？

如果您的“通用”接口应该根据其通用参数 T 的类型指定不同的实现，那么该接口实际上不是通用的，是吗？

使用泛型，您应该抽象出不同类型共有的行为，并且约束应该只允许您更精确地定义要为其定义这种常见行为的不同类型的集合。

# php - Magento - 使用 Freeshipping 时删除运输和处理

> ID：12950737
> 
> 赞同：1
> 
> 时间：2012-10-18T08:55:15.430
> 
> 标签：php, magento, checkout, shipping

我有以下问题：我必须主要运输方式。第一个对 200 美元以下的订单收取 10 美元的运费。第二种方法是默认免费送货，适用于 200 美元以上的订单。

应用免费送货时，运输和处理小计显示 0.00，我不希望此行既不显示在结帐中，也不显示在发票中。

使用免费送货时，有什么方法可以完全移除运输和装卸线？

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T00:36:35.110

I dislike filtering things like this by code. So I came up with a solution overriding Mage_Sales_Model_Quote_Address_Total_Shipping::fetch(Mage_Sales_Model_Quote_Address $address)

app/code/local/Me/MyModule/Model/Sales/Quote/Address/Total/Shipping.php:

```
<?php
class Me_MyModule_Model_Sales_Quote_Address_Total_Shipping
  extends Mage_Sales_Model_Quote_Address_Total_Shipping
{
    /**
     * Add shipping totals information to address object
     *
     * @param   Mage_Sales_Model_Quote_Address $address
     * @return  Mage_Sales_Model_Quote_Address_Total_Shipping
     */
    public function fetch(Mage_Sales_Model_Quote_Address $address)
    {
        if ($address->getShippingAmount() == 0) {
            return $this;
        }

        return parent::fetch($address);
    }
} 
```

app/code/local/Me/MyModule/etc/config.xml:

```
<?xml version="1.0"?>
<config>
  <modules>
    <Me_MyModule>
      <version>0.0.1</version>
    </Me_MyModule>
  </modules>
  <global>
    <models>
      <me_mymodule>
        <class>Me_MyModule_Model</class>
      </me_mymodule>
      <sales>
        <rewrite>
          <quote_address_total_shipping>Me_MyModule_Model_Sales_Quote_Address_Total_Shipping</quote_address_total_shipping>
        </rewrite>
      </sales>
    </models>
  </global>
</config> 
```

app/etc/modules/Me_MyModule.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Me_MyModule>
            <active>true</active>
            <codePool>local</codePool>
        </Me_MyModule>
    </modules>
</config> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:24:49.163

从购物车和结帐中删除运输线，您可以覆盖此方法 Mage_Checkout_Block_Cart_Totals::renderTotal()

```
public function renderTotal($total, $area = null, $colspan = 1)
{
    $code = $total->getCode();
    if ($total->getAs()) {
        $code = $total->getAs();
    }
   if ($code == 'shipping' && $total->getValue() == 0) {
       return '';
   }
    return $this->_getTotalRenderer($code)
        ->setTotal($total)
        ->setColspan($colspan)
        ->setRenderingArea(is_null($area) ? -1 : $area)
        ->toHtml();
} 
```

有关更多参考，请查看此链接[http://www.magentocommerce.com/boards/viewthread/295412/#t410854](http://www.magentocommerce.com/boards/viewthread/295412/#t410854)

# sql - 从重复表创建唯一值表

> ID：12950741
> 
> 赞同：1
> 
> 时间：2012-10-18T08:55:27.893
> 
> 标签：sql

我有一个包含 500,000 多行和以下列的表：

`Symbol`, `ExternalCode`, `ExternalCodeType`,`StartDate`

`Symbol`应该是唯一的，但不是。有一些行（~60）具有相同的值`Symbol`但具有不同的`ExternalCode`+`StartDate`对。

我想创建一个唯一的表，这样，当有多个相同的条目时`Symbol`，我只取最近的一个`StartDate`。

有没有简单/优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:13:49.700

在 SQL-Server 中，这可以在没有 JOINing 的情况下解决。
试试这个：

```
SELECT * 
FROM   (SELECT SYMBOL, 
               STARTDATE, 
               EXTERNALCODE, 
               EXTERNALCODETYPE, 
               Row_number() 
                 OVER ( 
                   PARTITION BY SYMBOL 
                   ORDER BY STARTDATE DESC) RN 
        FROM   TABLENAME) T 
WHERE  T.RN = 1 
```

ROW_NUMBER 函数启动一系列新的 'ID'，按日期排序（因此最新的总是等于 1）并按符号分区，因此每个符号都有自己的一组 ID。

希望答案是明确的。

# jquery - jquery-自动完成-多输出

> ID：12950742
> 
> 赞同：0
> 
> 时间：2012-10-18T08:55:30.530
> 
> 标签：jquery, asp.net, ajax

您好，我已经根据搜索条件填充了文本框，即如果我键入 a，那么以 a 开头的项目将填充在文本框中，并且我使用了另一个文本框，其中我显示了派对名称，但问题是当我在项目文本框中选择值时它不在文本框中显示，但派对名称文本框正在工作，即当我从下拉列表中选择派对名称时，它显示在隐藏字段和文本框中，但如果有项目，它不起作用，我正在发送我的 jquery 函数，所以请帮忙

```
$(document).ready(function() {
    SearchText();
    SearchItem();
});

function SearchText() {
    $('input[name$="tbAuto"]').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "PartyList.asmx/FetchPartyList",
                data: "{ 'prefix': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    response(data.d);
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        },
        minLength: 1,
        focus: function(event, ui) {
            $('input[name$="tbAuto"]').val(ui.item.Name);
            return false;
        },
        select: function(event, ui) {
            $('input[name$="tbAuto"]').val(ui.item.Name);
            $('input[name$="tbHidden"]').val(ui.item.value);
            return false;
        }
    }).data('autocomplete')._renderItem = function(ul, item) {
        return $('<li>').data('item.autocomplete', item).append('<a>' + item.Name + '</a>').appendTo(ul);
    };
}

function SearchItem() {
    $('input[name$="txtitem"]').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "Itemslist.asmx/FetchItemList",
                data: "{ 'prefix': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    response(data.d);
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        },
        minLength: 1,
        focus: function(event, ui) {
            $('input[name$="txtitem"]').val(ui.item1.Name);
            return false;
        },
        select: function(event, ui) {
            $('input[name$="txtitem"]').val(ui.item1.Name);
            $('input[name$="hditem"]').val(ui.item1.value);
            return false;
        }
    }).data('autocomplete')._renderItem = function(ul, item1) {
        return $('<li>').data('item1.autocomplete', item1).append('<a>' + item1.Name + '</a>').appendTo(ul);
    };
} 
```

项目信息类：

```
public class Iteminfo
{
    connection oConnection = new connection();
    Control oControl = new Control();
    AccountInfo oAccount = new AccountInfo();
    connection c = new connection();

    public string Title { get; set; }
    public string Name { get; set; }
    public string value { get; set; }

    public List<Iteminfo> GetItems(string prefixText)
    {
        List<Iteminfo> itemList = new List<Iteminfo>();

        try
        {
            DataTable dt;
            AccountInfo oAccount = new AccountInfo();
            //dt = oAccount.GetAccountInfo((int)HttpContext.Current.Session["CompCode"], 0);
            dt = oAccount.GetIteminfo(prefixText);
            if (dt.Rows.Count > 0)
            {
                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    itemList.Add(new Iteminfo() { Name = dt.Rows[i]["groupname"].ToString() + dt.Rows[i]["subgroup"].ToString() + dt.Rows[i]["itemname"], Title = dt.Rows[i]["itemname"].ToString(), 
                    value = dt.Rows[i]["groupname"].ToString() + dt.Rows[i]["subgroup"].ToString() + dt.Rows[i]["itemname"].ToString()+";"+dt.Rows[i]["itemcode"].ToString() });
                }
            }
        }
        catch (SqlException)
        {
            itemList.Add(new Iteminfo() { Name = "Problem Getting Results.", value = "Error" });
        }

        if (itemList.Count == 0)
            itemList.Add(new Iteminfo() { Name = "Nothing to Display.", value = "Info" });

        return itemList;
    }
} 
```

页面方式：

```
[WebMethod]
public List<Iteminfo> FetchItemList(string prefix)
{
    var items = new Iteminfo();
    var fetchitems = items.GetItems(prefix);
    //.Where(m => m.Name.ToLower().StartsWith(prefix.ToLower()));

    // .Where(m => m.Name.ToLower().StartsWith(prefix.ToLower()));
    return fetchitems.ToList();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:55:37.407

您的第一个问题似乎在`SearchItem`起作用。您不应该将所有这些更改`item`为，`item1`因为这是内部 jQuery UI 名称并且它始终相同（对于所有实例）。所以你的 JavaScript 函数应该是这样的：

```
function SearchItem() {
    $('input[name$="txtitem"]').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "Itemslist.asmx/FetchItemList",
                data: "{ 'prefix': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    response(data.d);
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        },
        minLength: 1,
        focus: function(event, ui) {
            $('input[name$="txtitem"]').val(ui.item.Name);
            return false;
        },
        select: function(event, ui) {
            $('input[name$="txtitem"]').val(ui.item.Name);
            $('input[name$="hditem"]').val(ui.item.value);
            return false;
        }
    }).data('autocomplete')._renderItem = function(ul, item) {
        return $('<li>').data('item.autocomplete', item).append('<a>' + item.Name + '</a>').appendTo(ul);
    };
} 
```

可能还有一些关于选择器的进一步错误，但如果没有 HTML/ASPX 代码，这是无法判断的。

# hibernate - jpa 将 java 类型映射到数据库类型

> ID：12950747
> 
> 赞同：5
> 
> 时间：2012-10-18T08:55:45.417
> 
> 标签：hibernate, jpa, jdbc

每个 JPA-Provider（至少 hibernate、eclipselink 和 openjpa）都提供了基于 jpa 实体类创建 ddl-schema 的可能性。但是每个数据库管理系统都有自己的数据类型。

那么 jpa-providers 如何决定选择哪种 sql 数据类型。（我认为这将是特定于提供商的）。是否有类似映射`String->varchar(xx), boolean->tinyint`之类的。但是，每个数据库都必须存在这种映射，对吗？任何人都可以把我放在正确的方向吗？我在休眠源代码中进行了搜索，但没有找到正确的代码片段。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:09:59.733

> 那么每个数据库都必须存在这个映射，对吗？

你说的对。在 DB 连接中使用的方言中也指定了相同的内容。

对于我搜索过的任何内容，此**信息都封装在**您使用的数据库的方言驱动程序中，并且必须包含`java types -> db types`.

[在这里](http://grepcode.com/file/repository.jboss.org/maven2/org.hibernate/hibernate-core/3.3.0.SP1/org/hibernate/dialect/Oracle9Dialect.java#Oracle9Dialect)，您可以看到**Constructor**中的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:00:32.140

请参阅[方言](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-optional-dialects)类及其实现。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:01:50.330

对于每个 DBMS，hibernate 都维护着方言。在 hibernateX.jar 中可用。

# php - php sqlite3：数据库文件是否自动关闭？

> ID：12950749
> 
> 赞同：3
> 
> 时间：2012-10-18T08:55:47.900
> 
> 标签：php, sqlite

我在 PHP 手册的 SQLite3::close() 中找不到的简单问题：PHP 是在脚本结束时关闭 sqlite 数据库，还是我们需要一直自己调用 $db->close()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:02:12.747

一个简单的答案：是的，文件在脚本结束时关闭。无需关闭。

# sql - 带有二进制附件问题的 sp_send_dbmail

> ID：12950756
> 
> 赞同：3
> 
> 时间：2012-10-18T08:56:21.223
> 
> 标签：sql, sql-server-2008, sp-send-dbmail

我正在尝试使用 sp_send_dbmail 发送附件。附件存储在表的 varbinary(MAX) 列中。这是我的查询：

```
EXEC msdb.dbo.sp_send_dbmail 
        @recipients='mick.walker@somewhere.com',
        @subject = 'Test Attachment',
        @body = 'Test',
        @body_format = 'HTML',
        @profile_name = 'intranetadmin',
        @query = 'Select DocumentData from [myDB].[dbo].[Documents] Where DocumentID = 8',
        @query_result_header = 0,
        @attach_query_result_as_file = 1,
        @query_attachment_filename = 'Test.pdf',
        @exclude_query_output = 1,
        @query_no_truncate = 0; 
```

电子邮件成功发送并带有 pdf 附件。但是，在打开附件时，出现错误。我认为文件的大小正在被截断，即使我在查询中明确声明不。

我已经检查了数据库邮件设置中允许的最大邮件大小，目前是 104857600 字节（100mb），我尝试发送的文件远不及这个大小 - 所以我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:47:29.817

尝试将`@query_no_truncate`参数设置为 1。当查询中使用较大的可变长度数据类型并且此选项为 0 或未指定时，数据将被剪切为 256 个字符。参考：http: [//msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T22:28:52.747

我知道这是一个旧线程，但我刚刚遇到了同样的问题。问题是 SQL 报错，并且已经将错误信息存储在附件中。

将附件名称更改为具有`.txt`扩展名并发送电子邮件。打开`.txt`文件并查看错误。安全配置可能与此有关。

# c++ - 为什么 boost::format 不能直接转换为 std::string？

> ID：12950759
> 
> 赞同：12
> 
> 时间：2012-10-18T08:56:44.137
> 
> 标签：c++, boost, boost-format

以下是不可能的：

```
std::string s = boost::format("%d") % 1; // error 
```

您必须显式调用 str() 方法：

```
std::string s = (boost::format("%d") % 1).str(); // OK 
```

它只是语法糖，但为什么不添加转换呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T10:06:29.300

我认为这样做的原因与 相同`std::stringstream`，在这种情况下，您还应该使用`.str()`将流转换为字符串和相同`boost::formatter`的原因，原因如下：

```
std::string s1 = "Hello ", s2 = "World";
format("%s.") % s1 + s2; 
```

现在 if`boost::formatter`可以隐式转换为`std::string`then 它产生“Hello .World”，因为`format("%s.") % s1`将被转换为“Hello ”。然后它将被隐式转换为`std::string`并用于`operator+`添加它`s2`，但可能大多数程序员都希望拥有“Hello World”。这将是错误和混乱的根源。但是在不存在隐式转换的情况下，编译器会为此生成错误（因为没有`operator+`for `boost::formatter`and `std::string`）并且您可以将其更正为`format("%s.") % (s1 + s2)`or`str( format("%s.") % s1 ) + s2`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T10:15:31.473

如果隐式转换可以抛出异常，这不是一件好事。如果输入的参数少于所需的参数，则默认情况下转换为字符串会引发异常`format`。例如

```
std::string f()
{
   boost::format fmt("%d");
   // forgot to feed an argument
   std::string s = fmt;  // throws boost::io::too_few_args
   widget.set_title( fmt );  // throws boost::io::too_few_args
   return fmt;  // throws boost::io::too_few_args
} 
```

这种隐式转换使得很难发现和分析可能引发异常的代码部分。但是显式`.str()`调用提供了此类可能异常的提示，这在确保周围代码的异常安全时使生活更轻松，并且（在这种特殊情况下）提示仔细检查前面的代码以首先防止所述异常发生。

# html - HTML 代码弄乱了以下 URL

> ID：12950761
> 
> 赞同：2
> 
> 时间：2012-10-18T08:56:48.627
> 
> 标签：html, asp.net-mvc, razor-2

我正在将 Visual Studio 2012 用于使用 EF 5.0 的代码优先方法的 MVC Web 应用程序。我编写了以下代码来使模态窗口出现在某个点：

```
<div id="mod" style="display:none;">
    <div id="mod-container">  
        <div id="mod-close"><img src="~/Content/icons/close.png" title="close" onclick="$('#mod').fadeOut();"/></div>   
        <div id="mod-content"></div>
    </div>
</div> 
```

如果工作正常，除了`<img src="~/Content/icons/close.png" [...] />`认为其 URL 为的浏览器无法找到该图像

```
http://localhost:49895/Class1/Home/~/Content/icons/close.png 
```

准确地说，我的 div**下的每个代码都有损坏的 URL。**如果我将图像放在 div 上方，则它会使用以下 URL 正确显示：

```
http://localhost:49895/Content/icons/edit.png 
```

你知道我把事情搞砸了吗？

Edit2：示例（问题解决后）

这有效：

```
<img src="~/Content/icons/close.png" title="close" onclick="$('#mod').fadeOut();"/>
<!-- comment containing a quote ' -->
<div id="mod" style="display:none;">
    <div id="mod-container">  
        <div id="mod-close"></div>   
        <div id="mod-content"></div>
    </div>
</div> 
```

这不起作用：

```
<!-- comment containing a quote ' -->
<div id="mod" style="display:none;">
    <div id="mod-container">  
        <div id="mod-close"></div>   
        <div id="mod-content"></div>
    </div>
</div>
<img src="~/Content/icons/close.png" title="close" onclick="$('#mod').fadeOut();"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:00:14.850

可能是新的 Razor 2.0 波浪号解析中的错误，或者您通过缺少引号或其他内容弄乱了您的 html。尝试使用更明确的方式来解析 url

```
<img src="@Url.Content("~/Content/icons/close.png")" /> 
```

如果可行，则表明存在剃刀错误，如果不可行，则您的 html 可能以某种方式损坏，但额外的 @ 符号可能足以让解析器启动并告诉您出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:00:40.017

`~`是一个 asp 代码元素，而不是 HTML。因此，它不会被 HTML 呈现。

尝试用`@Url.Content`

```
<img src="@Url.Content("~/Content/icons/close.png")" /> 
```

# vba - 在 vb6 中使用 mCore Active x 发送多条短信并访问数据库

> ID：12950763
> 
> 赞同：1
> 
> 时间：2012-10-18T08:56:55.247
> 
> 标签：vba, vb6

我正在使用它在 VB6 中使用 mCore ActiveX 组件发送短信。这段代码运行良好，但有时它会多次发送一条短信（事实上，在我关闭应用程序之前已经发送了数百次）。请指导我，因为我对 VB6 非常熟悉

```
Public Function SendSMS()

    On Error Resume Next

    Dim strSendResult As String
    Dim ij  As Integer
    Dim message As String
    Dim blnAllMsgsSent As Boolean
    Dim message1
    Dim id As Integer
    blnAllMsgsSent = True

    If objSMS.Connect Then

        Timer2.Enabled = False
        ij = 0
        Sql = "SELECT id,message,MobileNo FROM tblSendSMS where status='Pending'  order by id asc;"
        RS.Open Sql, Conn, adOpenDynamic
        If Not RS.EOF Then

            RS.MoveFirst
            Do While Not RS.EOF

                message = RS!message

                If RS!message <> "" Then

                    id = RS!id

                    '' send message now

                    strSendResult = objSMS.SendSMS(MobileNo, message)
                    strSendResult = ""

                    If objSMS.IsError(True, "Application.exe") Then
                        blnAllMsgsSent = False
                    End If

                End If

                If blnAllMsgsSent Then
                    Sql = "update tblSendSMS set status='Sent' where  id=" & id
                    Conn.Execute Sql
                End If

                ij = ij + 1
                RS.MoveNext

            Loop

        End If
        RS.Close
    Else
        SetCommParameters
    End If
    Timer2.Enabled = True
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:49:10.543

如果有一个错误，则`blnAllMsgsSent`变为 false 并且该表永远不会更新`sent`该消息以及**所有**后续消息，导致它们在下一个计时器事件中重新发送，因为它们的状态仍然是`pending`。

您还只设置了`id`if`RS!message <> ""`但随后在更新 SQL 中的检查之外使用它，以便它可以包含来自先前消息的 id。

# php - imagemagick 转换图像时出错

> ID：12950764
> 
> 赞同：1
> 
> 时间：2012-10-18T08:56:57.923
> 
> 标签：php, iis, imagemagick

当我尝试通过 php 将我的 svg 文件转换为 ex 时。png 文件我得到这个错误：

```
 $filename = '507e6221c9f0f.svg';
    $content = file_get_contents($filename);
    $im = new Imagick();
    $im->readImageBlob($content);

Fatal error: Uncaught exception 'ImagickException' with message 'no decode delegate for this image format `' @ blob.c/BlobToImage/347' in.. 
```

但是，当我通过推荐行执行此操作时，一切正常。我会使用 php`exec()`命令，但我使用的是 PHP + IIS 服务器，所以我不想授予 IUSR 用户（IIS 用户）使用 cmd.exe 的权限

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:11:26.550

该错误意味着 imagemagick 不知道如何处理该文件。您可以检查的一些事项：

1）手动检查svg文件。2）检查您使用的是inkscape还是rsvg。3）尝试一个shell命令（假设你在linux上），比如'convert 507e6221c9f0f.svg image.jpg'

可能会在此处发布输出，以便有人可以查看。

# html - 我知道填充和边距之间的区别，但是你应该什么时候使用它们呢？

> ID：12950772
> 
> 赞同：3
> 
> 时间：2012-10-18T08:57:22.930
> 
> 标签：html, css

[这个链接](https://stackoverflow.com/questions/2189452/when-to-use-margin-vs-padding-in-css)（以及我检查过的所有其他“边距与填充”问题），同时提出相同的问题似乎只说明了两者之间的区别。它说，“当你想要外部空间时，使用边距。当你想要内部空间时，使用填充”。

这很公平，但是如果您查看[This quick jsFiddle example](http://jsfiddle.net/yRnTN/1/)，我使用了各种 CSS 来获得完全相同的效果。

这个问题是主观的，可能会被关闭，但我浪费了很多时间来决定，“我应该在包含元素上放置填充......还是在内部元素本身上放置边距。”

如果您将这些 div 扩展为具有多个段落，那么如果您想要具有一致的边框/背景，第三个示例很快就会失败。在标签上使用 Margin 的那个`<p>`看起来更好看，因为它会自动分隔段落。

在设计我的网站时，我可以问自己一个简单的思考过程/一组问题来得出结论吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:09:43.920

我认为*Itay Moav*对[这个问题](https://stackoverflow.com/a/1419621/1753682)的回答提供了一个很好的清单，说明您希望使用边距的条件以及您希望使用填充的条件。让我在这里复制粘贴：

1.  你有某种背景属性。利润不会得到它们。
2.  你有边界
3.  您使用 TD（无边距）
4.  两个嵌套项目，边距折叠在一起，填充没有。（需要检查这个）
5.  它们可能以不同的方式影响元素的宽度和高度。（如果有人知道更好，请编辑此）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:06:03.930

*   边距（可以）相互折叠，即两个边距为 3em 的元素，每个元素之间有 3em 的空间
*   填充不会折叠，即两个具有 3em 填充的元素在其内容之间有 6em 空间
*   一旦您将背景和/或边框应用于具有边距/填充的元素，两者将导致非常不同的行为

牢记这些，酌情申请。没有硬性规定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:38:37.537

边距是相关对象外部的间隙，但填充是内部的间隙，

即：当您的对象是一个带有一些文本的绿色框时，带有白色背景，边距在白色区域留下间隙，而填充在绿色区域中留下。

# php - 使用 Simple HTML DOM 获取特定的纯文本

> ID：12950775
> 
> 赞同：-1
> 
> 时间：2012-10-18T08:57:26.450
> 
> 标签：php, html, regex, dom

**问题：**

试图从我可以通过 PHP 获得的 HTML 代码中提取特定文本。

**HTML 代码：**

```
<a href="/debatt/s-vill-ha-tioarig-skolplikt-och-farre-elever-i-klassen">
    <span class="number">2\. </span>Skolplikt och färre elever i klassen
    <br />
    <span class="metadata">I går</span>
</a>

<a href="/sthlm/edholm-backar-om-skolornas-smorforbud">
    <span class="number">3\. </span>Edholm backar om skolornas smörförbud
    <br />
    <span class="metadata">16 okt</span>
</a> 
```

**期望的输出：**

```
2\. Skolplikt och färre elever i klassen
3\. Edholm backar om skolornas smörförbud 
```

两个代码示例具有相同的 HTML 结构。是否可以通过简单的 HTML DOM 来做到这一点，还是应该追求正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:00:28.580

将 HTML 添加到`DOMElement`对象中。有了它，您可以选择孩子并将他们的 HTML/文本提取到变量中。

文档： http: [//php.net/manual/en/class.domelement.php](http://php.net/manual/en/class.domelement.php)

* * *

*[与https://stackoverflow.com/a/12950525/711129](https://stackoverflow.com/a/12950525/711129)的答案相同*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:07:13.290

如果你必须经常这样做，你可以使用一个非常方便和简单的类来解析 html dom。

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# iphone - 如何让 iOS 应用程序在 iPhone 3GS 及更高版本上运行，适用于 iOS 5.1 和 6？

> ID：12950777
> 
> 赞同：1
> 
> 时间：2012-10-18T08:57:28.193
> 
> 标签：iphone, ios6, armv7

这是一个出于兴趣的问题，因此请尽可能提供您的答案。

我最近将 Xcode 更新到 4.5，并且无法访问 iOS SDK 5.1。使用几篇 SO 帖子中描述的方法（使用以前 Xcode 安装程序中的图像），我再次添加了 iOS SDK 5.1。

我希望我的应用程序支持的环境是 iPhone 3GS、iPhone 4、iPhone 4S 和 iPhone 5。显然使用 iOS SDK 5.1 和 6.0。这些要求的推荐构建设置是什么？

现在我在 armv7 和 armv7s 上设置了`Deployment Target`5.1、6.0`Base SDK`架构。它是否正确？

现在，我相信 iOS SDK 5.1 不是为 armv7s（iPhone 5 架构）编译的。如何确保为 iOS 6.0 编译的代码也适用于小于 5 的 iPhone？现在我收到`ld: file is universal (4 slices) but does not contain a(n) armv7s slice`指向 iOS 5.1 SDK 的链接器错误，而不是检查`Build For Active Architectures Only`. 我如何确保在发布到 App Store 时，该应用仍将在 iOS SDK 5.1 上运行。它似乎正在为结合 iOS 5.1 的 armv7s 进行编译——这是行不通的。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:05:03.477

您将 设置`Deployment Target`为 5.1 是正确的，您可以将架构保留在 ARMv7 和 ARMv7s 上。

您不想指向 5.1 SDK，只需使用 iOS 6 SDK。只需确保您没有直接调用任何仅适用于 iOS 6 SDK 的方法或类。

部署目标是这里的关键，它定义了运行此应用程序所需的最低 iOS 版本，因此将其设置为 5.1 将使您的应用程序运行在 5.1 或更高版本上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:08:36.553

您根本不需要下载 SDK 5.1。SDK 6.0 包括 SDK 5.1 包括的所有库和头文件，以及 iOS6 中添加的库和头文件。

请务必了解 SDK 版本、您的应用程序将兼容的 iOS 版本以及您构建应用程序的架构之间的区别。

**使用SDK** 6.0编译并不意味着您的应用只能在 iOS6 上运行；这意味着您的应用程序将能够在iOS上运行，从您设置`IOS_DEPLOYMENT_TARGET`的版本到SDK对应的版本，即6.0。

因此，如果您希望您的应用程序与 iOS 5.1 及更高版本兼容，您仍然**使用 Base SDK 6.0 编译它并且根本不需要 SDK 5.1**：您只需将 设置`Deployment Target`为 5.1 并设置为`Base SDK`6.0（正如您在你的问题），所以没有任何地方需要 SDK 5.1，这对于为 iOS6、iPhone5 和 armv7s 编译无论如何都是无用的（它不包含必要的头文件、库和架构，这就是为什么 SDK 6.0 已经发布和是必要的）。

使用像 5.1 这样的旧 SDK（您单独下载）和最新版本的 Xcode 可能会导致您遇到问题，更重要的是不允许您为高于 SDK 版本的 iOS 版本编译您的应用程序（在您的情况下为 5.1） . 所以**请**使用 SDK 6.0，即使您希望您的应用程序从 iOS 5.1 开始兼容。

* * *

有关您使用的 SDK 版本（基础 SDK）、部署目标以及您的应用程序支持的 iOS 版本和架构之间的差异的更多信息，请**阅读Apple 文档中的[SDK 兼容性指南](http://developer.apple.com/library/ios/#documentation/developertools/conceptual/cross_development/Introduction/Introduction.html)**，其中详细解释了这一切。

# java - Java - 从一个类到另一个类的变量值

> ID：12950781
> 
> 赞同：0
> 
> 时间：2012-10-18T08:57:38.580
> 
> 标签：java, variables, getter-setter

我想将 List 类型的变量值（变量名为 seznamRacunov）从一个类转移到另一个类。

1级

```
public class UvoziRacun 
{
  private String potRacuna;
  private List<String> seznamRacunov = new ArrayList();

  public void setRacun(List<String> seznamRacunov)
  {
      this.seznamRacunov = seznamRacunov;
  }

  public List<String> getRacun()
  {
      return seznamRacunov;
  }

  public String getPotRacuna()
  {
      return potRacuna;
  }

  public void showDailog()
  {
      try
      {
        JFileChooser racun = new JFileChooser();
        racun.setCurrentDirectory(new File(""));

        racun.setFileFilter(new javax.swing.filechooser.FileFilter() 
        {
            public boolean accept(File f) 
            {
                return f.getName().toLowerCase().endsWith(".xml") || f.isDirectory();
            }
            public String getDescription() 
            {
                return "XML Datoteka";
            }
        });

        //racun.setMultiSelectionEnabled(true);
        int r = racun.showOpenDialog(new JFrame());

        if (r == JFileChooser.APPROVE_OPTION)
        {
            potRacuna = racun.getSelectedFile().getPath();
            seznamRacunov.add(potRacuna); //value is stored
        }
        //System.out.print("Racuni: " + seznamRacunov);
      }
      catch(Exception ex){}
  }
} 
```

2 级

```
public class PrikaziRacune extends javax.swing.JFrame 
{
    UvoziRacun rac = new UvoziRacun();

    public PrikaziRacune() 
    {
        initComponents();

        try
        {
            System.out.print(rac.getRacun()); // value is null, why?
            //jLabel2.setText();
        }
        catch(Exception ex){}
} 
```

方法`seznamRacunov.add(potRacuna);`将值存储到类 1 中的 seznamRacunov 中，但列表的值没有传递到我调用 getter 的类 2 中。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:01:17.677

> 方法 seznamRacunov.add(potRacuna); 将值存储到类 1 中的 seznamRacunov 中，但列表的值没有传递到我调用 getter 的类 2 中。

那是因为，你`get()`甚至`List`没有调用你的方法来`method - showDailog()`调用你的`add()`方法来填充列表。

*   确保在实际获取with方法`showDailog()`之前调用此方法 -填充列表`List``get`

*   `constructor`或者，如果您将 a 添加到您的课程中，它会更好地完成`initializing`您的任务`List`。然后您可以使用它创建一个实例，`constructor`因此您不会有任何问题。

**PS** : - 你应该总是至少有一个`0-arg constructor`来初始化你的字段，而不是`letting`编译器为你处理这个任务。

还有一件事，你永远不应该通过一个`empty`catch 块来吞噬你的异常。否则，抓住他们是没有意义的。`printStackTrace()`改为添加呼叫。

```
 public PrikaziRacune() {
    initComponents();

    try
    {
        rac.showDailog();  // Will populate the list
        System.out.print(rac.getRacun()); // You can get the value here.
        //jLabel2.setText();
    }
    catch(Exception ex) {
        ex.printStackTrace();
    }
} 
```

*   `ArrayList`另外，请在您的第一堂课中检查您的声明。您`generic type List`在 LHS上使用，`Raw type ArrayList`在 RHS 上使用。它是你应该避免的。

`Generic`两边都有类型：-

```
private List<String> seznamRacunov = new ArrayList<String>(); 
```

# php - 我们如何在不使用 pcntl_fork() 的情况下在 php 中执行多个进程？

> ID：12950782
> 
> 赞同：2
> 
> 时间：2012-10-18T08:57:42.687
> 
> 标签：php, multithreading

我们如何在不使用**pcntl_fork()**的情况下在 php 中执行多个进程？

我谷歌了很多次，但没有发现任何有用的东西。我的服务器不支持**pcntl_fork()**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:05:26.490

如果你有 php cli 可用，你可以使用 exec() 或 system() 来分叉进程。但有时更优雅的方法是在后台进行 http 子请求，并将原始 url 目标仅用作控制实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:05:58.507

我发现这样做的简单方法是使用**exec()**。@arkascha 非常感谢你！

现在我们可以在 php 中执行多个进程并使用 exit() 从这些进程中返回我们想要的任何内容。

# xcode - 使用单个故事板的新 Xcode 本地化工作流程

> ID：12950798
> 
> 赞同：3
> 
> 时间：2012-10-18T08:58:33.323
> 
> 标签：xcode, cocoa, localization, storyboard

也许这是一个热门问题，但我有一个奇怪的问题（或者更可能是我:)）。我正在尝试使用 XCode 4.5 中的新本地化工作流。我正在使用的程序如下：

1.  创建项目
2.  使用基本语言本地化 MainStoryboard。
3.  添加新语言。

所以现在我有三个文件夹，例如：

1.  base.lproj
2.  en.lproj
3.  它.lprj

我在 en.lproj 和 it.lproj 中有 MainStoryboard.strings。

这很酷...

我注意到 .strings 文件在我修改布局（添加、删除按钮、标签等）时不会自动填充。

我注意到 .strings 文件在我本地化情节提要时被填充。要添加新更改，我需要删除本地化并重新本地化。

这样做我会丢失我之前的更改，即我需要再次翻译所有字符串。

我的程序有什么问题？

我也尝试在 Build Phases 部分使用 .sh 自动更新 .strings 文件，但问题是一样的，每次更新文件时我都会丢失我的翻译......（这听起来很逻辑）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:32:13.707

诀窍是将本地化的字符串文件转换为文件检查器的本地化区域中的本地化故事板文件。

![文件检查器的本地化区域](../Images/c8f47a37aa3a7aaec6868e28f6b8f67f.png).

之后，您可以转换回字符串文件，并且不会丢失您的翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T16:53:23.383

你可以通过两种方式做到这一点。听起来您已经创建了情节提要的本地化版本，这很好，但是如果您对默认（英语）情节提要进行更改，则必须取消选中意大利语的本地化框。然后重新选中意大利语框以使意大利语情节提要获取您对英语情节提要所做的任何更改。

或者...

您可以将 Localizable.strings 文件与单个故事板一起使用，并使用 NSLocalizedString(@"KEY",@"comment") 方法以编程方式处理所有文本。创建初始 Localizable.strings 文件后，只需将其本地化并将意大利语翻译添加到 it.lproj 文件中。

希望这是有道理的。这里确实发生了两种不同的本地化。第一个是允许系统选择适当的故事板。这通常在您翻译故事板中的文本时使用。第二个是为您的应用程序中的文本值使用适当的 Localizable.strings 文件。

查看我们的应用程序，它可以为您创建 40 多个 Localization.strings 文件（包括翻译）。 [https://itunes.apple.com/app/generate-localizable-strings/id572287184?mt=12](https://itunes.apple.com/app/generate-localizable-strings/id572287184?mt=12)

# ruby-on-rails - Embedded Ruby 中的代码按什么顺序执行？

> ID：12950802
> 
> 赞同：2
> 
> 时间：2012-10-18T08:58:52.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

我今天做了一点 Ruby on Rails 魔术，它以某种方式起作用，但我不知道如何。

我正在编写一个应用程序，它应该在每个页面的顶部都有一个导航栏，所以我编写了一个部分，我在我的默认布局中呈现：

`views/layouts/application.html.erb`：

```
...
<%= render 'shared/navbar' %>
<%= yield %>
... 
```

但我希望突出显示当前选定部分的链接。我认为每个链接中的一系列`if`语句会很丑陋，所以我编写了一个或两个帮助程序类来管理导航栏上显示的链接。我会详细说明它们是如何工作的，因为它们现在微不足道且无关紧要，但它们的使用方式如下：

`views/shared/_navbar.html.erb`：

```
...
<% navbar_manager.each_entry do |entry, active| %>
  <li <% if active %>class="active"<%end%>>
    <%= link_to entry.label, entry.url %>
  </li>
<% end %>
... 
```

现在我只需要让`navbar_manager`知道哪个条目处于活动状态。操作导航栏与视图密切相关，因此我决定不在控制器中放置适当的代码，而是在视图文件中执行，如下所示：

`views/foo/index.html.erb`

```
<% navbar_manager.set_active_entry(:home) %>
... 
```

一个很大的惊喜：它有效。但现在想起来：`render 'shared/navbar'`出现在布局文件之前的`yield`. 那么它`navbar_manager.set_active_entry`是如何发生的`navbar_manager.each_entry`呢？更一般地说：嵌入式 Ruby 的处理顺序是什么？

如果我很幸运：有没有办法确保我想要的订单？

我正在使用 Ruby 1.9.3 和 Rails 3.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:02:34.423

## 代码执行顺序：

1.  `views/foo/index.html.erb`在调用 foo#index 时，会从文件中准备相应的视图内容。

2.  处理适当的布局。在这种情况下，`views/layouts/application.html.erb`文件被拾取进行处理。

3.  `<%= render 'shared/navbar' %>`布局中的语句使其处理`navbar`部分。此时，要显示的视图内容已经可用（作为上述步骤 1 的一部分，因此`navbar_manager`标记了适当的部分以突出显示。

4.  [`<%= yield %>`布局中的语句](http://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield)插入视图内容（在步骤 1 和步骤 3 中处理）。

5.  显示完整处理的结果。

`log/development.log`是一个很好的资源，可以查看各种视图和部分是如何执行的。

这是我的一个应用程序的示例：

```
Started GET "/" for 127.0.0.1 at 2012-10-13 14:42:23 -0600
Processing by DashboardController#welcome as HTML   
User Load (0.8ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1  User Load (0.8ms)  SELECT `users`.* FROM `users`
Rendered dashboard/welcome.html.erb within layouts/application (2.6ms)
Rendered layouts/_navigation.html.erb (1.5ms)
Rendered layouts/_messages.html.erb (0.2ms)
SQL (1.4ms)  UPDATE `users` SET `updated_at` = '2012-10-13 20:42:23' WHERE `users`.`id` = 1
Completed 200 OK in 104ms (Views: 88.6ms | ActiveRecord: 3.1ms) 
```

在这个例子中，在调用 dashboard#welcome 时，`dashboard/welcome.html.erb`首先处理视图，然后在`layouts/application`; 在完成渲染过程之前，布局也会调用`navigation`和局部化。`messages`

# java - 缺少 android 类 - AbstractWheelTextAdapter 和 WheelView

> ID：12950804
> 
> 赞同：0
> 
> 时间：2012-10-18T08:58:53.623
> 
> 标签：java, android, import

我已经安装了 Android SDK，然后是 eclipse 的插件。没关系，但是现在当我导入现有项目时，它给了我两个错误。第一个是：

```
//The import kankan cannot be resolved
import kankan.wheel.widget.WheelView; 
```

另一个问题是：

```
//The import kankan cannot be resolved
import kankan.wheel.widget.adapters.AbstractWheelTextAdapter; 
```

我想问题是缺少这个kankan，但是我该如何添加呢？也许它没有安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:50:06.913

以下是丢失的文件：

[http://code.google.com/p/android-wheel/source/browse/#svn%2Ftrunk%2Fwheel%2Fsrc%2Fkankan%2Fwheel%2Fwidget](http://code.google.com/p/android-wheel/source/browse/#svn%2Ftrunk%2Fwheel%2Fsrc%2Fkankan%2Fwheel%2Fwidget)

我下载了它们并将它们添加到我的项目中的一个包中。然后只是修复了他们的进口。它有效。

# java - 今天的日历在两个日历之间？

> ID：12950806
> 
> 赞同：0
> 
> 时间：2012-10-18T08:59:07.517
> 
> 标签：java, calendar

> **可能重复：**
> [日历 <= 另一个日历](https://stackoverflow.com/questions/12950279/calendar-another-calendar)

```
Calendar newdate = Calendar.getInstance(); // Collect before this date 
Calendar today = Calendar.getInstance();
rdate.setTime(converteddate);
newdate.setTime(converteddate);
newdate.add(Calendar.DATE, 7); 
```

如何检查今天是在`rdate`和之间`newdate`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:00:55.910

```
rdate.after(today)&&rdate.before(newdate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:02:23.947

您可以尝试以下方法：

```
 (today.after(rdate) && today.before(newdate) ||
 (today.after(newdate) && today.before(rdate)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:02:36.397

怎么样

```
if ( today.after( rdate ) && today.before( newdate ) ) { .... } 
```

假设它`newdate`总是晚于`rdate`您的代码注释所建议的。

干杯，

# iphone - 为 iPhone 应用注册 Tumblr 应用

> ID：12950810
> 
> 赞同：3
> 
> 时间：2012-10-18T08:59:18.110
> 
> 标签：iphone, ios, oauth, tumblr, xauth

我在 Tumblr 开发者网站上为我的 iPhone 应用程序注册了一个应用程序。该应用程序需要将带有标签和标题的照片上传到 Tumblr，并且它可以正常运行。但是，上传到 Tumblr 后的照片并没有在照片下方显示我的 iPhone 应用程序名称。它只显示照片下方的标题和标签。作为 Diptic（iPhone 应用程序）或 Instagram，我看到上传的照片下方有一个应用程序图标和一个指向其应用程序主页的链接。

我想知道当我在 Tumblr 开发者页面上注册应用程序时有什么问题，或者我的 iPhone 应用程序客户端遗漏了什么？

P/S：我的 iPhone 应用程序正在使用 xAuth。

感谢您阅读我的问题。如果您有任何不清楚的地方，请告诉我。

问候，田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T20:17:31.363

尝试以 128x128 像素的 24 位 PNG 格式上传您的应用照片。如果成功，您将看到应用程序图标。您可以尝试从不同的应用程序保存这个 128x128 PNG，或者您可以尝试以 8 位格式保存 PNG。

# php - PHP验证时文本框值消失/清空

> ID：12950814
> 
> 赞同：0
> 
> 时间：2012-10-18T08:59:30.503
> 
> 标签：php

嗨，我的结构如下。问题是一旦显示错误消息，文本框内容就会消失，需要重新输入一个值。我需要在显示消息时保留原始文本框的值/内容。你觉得我应该怎么改变？谢谢。

```
 <?php 
if(isset($_POST['subN'])) {
$InNo = $_POST['invc_no'];

$MSG = '';
if($InNo == "") 
{$MSG = 'Invoice number is required';} 
else
{//some code to save data to a database}
?>

<!DOCTYPE html>
<head><title></title></head>
<body>
<form method="POST" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<div id="msgBox"><?php if(!empty($MSG)) echo $MSG; ?></div>
<table>
<tr>
<td><input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php htmlentities('InNo')?>"></td>
<td><input type="submit" name="subN" id="subN" value="Save"></td>
</tr>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:01:50.720

改变

```
<input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php htmlentities('InNo')?>"> 
```

到

```
<input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php echo htmlentities($_POST['invc_no'])?>"> 
```

**第二种解决方案：**

如下所示

```
$InNo = ''; // if you doesn't put any value into text box, then you will get undefined error while you use this variable later on so give initial value to null

if(isset($_POST['subN'])) {
 continue ....
}
else{
 continue ..
}

<input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php echo htmlentities($InNo); ?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:02:13.463

`$_POST['inNo']`在您的输入框中使用：

```
<input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?= $_POST['inNo'] ?>"> 
```

顺便说一句，你并没有呼应这个价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:04:05.727

你错过了把 echo 放在那里。

改变这个，

```
<input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php htmlentities('InNo')?>"> 
```

到

```
<input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php echo htmlentities('InNo')?>"> 
```

# c# - Rx Retry() 没有按预期工作

> ID：12950815
> 
> 赞同：5
> 
> 时间：2012-10-18T08:59:37.553
> 
> 标签：c#, system.reactive

我正在尝试使用 Reactive Extensions 来获取一堆 RSS 项目。我基于 Tim Greenfield 的博客文章：[Silverlight Rx DataClient inside MVVM](http://programmerpayback.com/2010/03/22/silverlight-rx-dataclient-within-mvvm/)。

我在桌面应用程序中使用它，但代码是相似的。

我遇到的问题是理解`Retry()`功能。它似乎没有按照我的期望和我期望的那样做。

```
var items = new List<RssItem>();
WebHelper.DownloadXmlFileAsync<RssItem>(new Uri(URI), "item")
    .Retry(2)
    .Finally(PublishResults)
    .Subscribe(items.Add, ProcessError, () => ProcessCompleted(items)); 
```

当我传入一个有效的 URI 时，这可以正常工作。当我在 URI 中打错字时，它会通过函数报告 404 错误`ProcessError()`，正如人们所期望的那样，但它只报告了一次。我原以为它会显示此错误两次。

因此，该`Retry()`函数似乎没有在我的 Web 请求上运行，但看起来它实际上适用于传递给`Subscribe()`. 不过，我在这里可能是错的。

如何确保`Retry()`调用适用于 Web 请求？

额外代码：

```
public static class WebHelper
{
    public static HttpWebRequest CreateHttp(Uri uri)
    {
        return CreateHttp(uri, "GET");
    }

    public static HttpWebRequest CreateHttp(Uri uri, string method)
    {
        if (uri.Scheme != Uri.UriSchemeHttp && uri.Scheme != Uri.UriSchemeHttps)
        {
            throw new ArgumentException("The specified URI does not use HTTP or HTTPS.", "uri");
        }

        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = method;

        return request;
    }

    public static IObservable<T> DownloadXmlFileAsync<T>(Uri uri, string elementName) where T : class
    {
        return (from request in Observable.Return(CreateHttp(uri))
                from response in Observable.FromAsyncPattern<WebResponse>(request.BeginGetResponse, request.EndGetResponse)()
                let stream = response.GetResponseStream()
                where stream != null
                from item in XmlReader.Create(stream).GetXmlItem<T>(elementName).ToObservable()
                select item);
    }
}

public static class XmlExtensions
{
    public static IEnumerable<T> GetXmlItem<T>(this XmlReader reader, string elementName) where T : class
    {
        var serializer = new XmlSerializer(typeof (T));
        while (reader.GoToElement(elementName))
        {
            yield return serializer.Deserialize(reader) as T;
        }
    }

    public static bool GoToElement(this XmlReader reader, string elementName)
    {
        do
        {
            if (reader.NodeType == XmlNodeType.Element && reader.Name == elementName)
            {
                return true;
            }
        } while (reader.Read());

        return false;
    }
}

XmlRoot("item")]
public class RssItem
{
    [XmlElement("description")]
    public string Description { get; set; }

    [XmlElement("link")]
    public string Link { get; set; }

    [XmlElement("pubDate")]
    public string PublishDate { get; set; }

    [XmlElement("title")]
    public string Title { get; set; }

    public override string ToString()
    {
        return string.Format("Title: {0}", Title);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T16:35:46.853

序列的 Rx 文法定义为：

> OnNext* (OnError | OnCompleted)？

接收到一个`OnError`或一个`OnCompleted`信号表示序列的结束，并且管道上的订阅预计将被拆除。

在运营商的背景下：

`observable.Retry(n)``observable`is：收到an后重新订阅`OnError`，最多n次。

`observable.Finally(action)`是：`action`接收时执行`OnError|OnCompleted`

重试旨在与冷可观察对象一起使用（[Lee Campbell](https://stackoverflow.com/users/393615/lee-campbell)对此有[一篇很好的文章](http://introtorx.com/Content/v1.0.10621.0/14_HotAndColdObservables.html)），订阅本质上会导致源启动。

类似`Repeat`地，`Retry`除了它在接收到`OnCompleted`.

为了看到这一点，我们可以创建一个 observable，它会在前 n 次“失败”，然后成功。现在看一些代码：

```
 private static IObservable<int> ErrorProducer(int i)
    {
        int count = 0;
        return Observable.Create<int>(observer =>
        {
            Console.WriteLine("Doing work");

            if (count++ < i)
            {
                Console.WriteLine("Failed");
                observer.OnError(new Exception());
            }
            else
            {
                Console.WriteLine("Done");
                observer.OnNext(count);
                observer.OnCompleted();                    
            }
            return Disposable.Empty;
        });
    } 
```

对于总是失败的生产者：

```
 print(ErrorProducer(3).Retry(2)); 
```

给出：

```
Doing work <-- Subscription
Failed
Doing work <-- Resubscription
Failed
OnError(System.Exception)
Finally 
```

对于最终成功的生产者：

```
print(ErrorProducer(2).Retry(3));

Doing work
Failed
Doing work
Failed
Doing work
Done
OnNext(3) <-- Succeeded
OnCompleted()
Finally 
```

如果您希望进程错误函数在重试时被调用多次，则应将其放在`Retry`.

IE，`seq.Do(value => { }, exception => { }).Retry(n)`

您可以阅读有关使用热/冷 observables 以及使用带有 Rx 的异步模式来阐明您的理解的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T09:00:06.607

Asti 的回答很到位。我只是想添加一些额外的信息，以防您想知道如何为单个逻辑序列公开多个错误。

正如 Asti 指出的那样，您只能终止一次序列。此终止可以是错误或完成 (OnError|OnCompleted)。

然而，没有什么能阻止你拥有嵌套的可观察序列！如果您确实希望看到多条错误消息，请考虑返回`IObservable<IObservable<T>>`. 内部序列是数据序列（您当前拥有的序列）。当这个序列出错时，就不能再使用了，所以外序列可以产生一个新的内数据序列。

这可能看起来有点奇怪，但它是 Rx 中支持的概念，因为 Merge 和 Switch 等运算符已经满足了这些嵌套序列。这种 Rx 风格在我的书 IntroToRx 中的[嵌套序列](http://introtorx.com/Content/v1.0.10621.0/07_Aggregation.html#NestedObservables)段落中有所涉及，然后在[序列的巧合](http://introtorx.com/Content/v1.0.10621.0/17_SequencesOfCoincidence.html)章节中再次更详细地介绍

我希望这可以帮助您了解将来如何进行 Rx 的其他可能性。

# qt - 在 OVI 商店以外的地方分发 Qt symbian 应用程序

> ID：12950823
> 
> 赞同：0
> 
> 时间：2012-10-18T08:59:59.017
> 
> 标签：qt, distribution, publish

我有一个用 Qt 开发的 Express 签名 Symbian 应用程序。我不想在诺基亚 OVI 商店中发布它。我只想将应用程序分发给某些特定的人。我应该怎么办？

我认为在我的网站上上传 SIS 文件并提供下载应用程序的链接对我来说不是一个可行的解决方案。

我可以将 SIS 文件邮寄给这些人吗？或者对于 Qt 应用程序是否有类似“目标分发”（如 Windows Phone 的情况）的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:55:44.627

好的，我更正了我之前关于电子邮件分发不可用的陈述。我基于前段时间启用有限分发（即网络下载）所必须采取的路径进行了假设。看看下面的网址

[http://my-symbian.com/s60/faq/showquestion.php?faq=4&fldAuto=13](http://my-symbian.com/s60/faq/showquestion.php?faq=4&fldAuto=13)

1.  如果您的目标用户拥有诺基亚 PC 套件，您可以通过任何方式将文件交付给他，但他需要知道如何使用套件安装 SISX。
2.  IR/蓝牙可能不适用，你想做的不是点对点的分发。
3.  MMC 上的“物理”分发可能对您来说太麻烦了
4.  如果您的目标用户在他的手机上设置了电子邮件阅读，您确实可以向他发送一封带有 SISX 附件的电子邮件。这意味着*真正的 Symbian 本地电子邮件代理*不会“通过浏览器阅读 web 邮件”——这样您将丢失附件的关键 MIME 类型。见下文。
5.  应用最广的方式，网页OTA。如果您需要限制访问，您可以随时在该网页上设置 HTTP 身份验证，并让您的目标用户知道名称和密码。**然而，要实现这一点，有一个关键步骤**：您需要覆盖 MIME 类型的 SISX HTTP 下载。默认情况下，*application/octet-stream*将由通用网络服务器分配，这将不起作用。[你需要做一些 HTTP 响应黑客攻击](http://www.developer.nokia.com/Community/Wiki/Archived%3aHow_to_enable_OTA_%28Over_The_Air%29_SIS_install_from_your_website)。

# perl - 一个数组和一个变量作为 Perl 子程序中的参数

> ID：12950828
> 
> 赞同：2
> 
> 时间：2012-10-18T09:00:06.367
> 
> 标签：perl

考虑：

```
sub abc()
{

}

abc(@array, $a); 
```

我如何访问`@array`和`$a`子程序`abc()`？

我知道`$_[0]`and `$_[1]`，但我不确定是否可以将它用于数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T09:04:04.523

`@_`您可以使用数组访问 sub 的参数。第一个参数是`$_[0]`，第二个 -`$_[1]`等。在这种特殊情况下，您的数组将展开到其元素列表，所以`$_[0]`is `$array[0]`，`$_[1]`is`$array[1]`然后在所有这些元素之后，最后一个元素 of`@_`将是 的值`$a`。

如果您想避免在列表上下文中使用数组时总是发生展开，请改用对数组的引用。对数组和哈希的引用是使用`\`. 所以调用你的函数，如：

```
abc(\@array, $a); 
```

之后，`$_[0]`将有参考`@array`和`$_[1]`将是`$a`。要通过引用访问数组元素，请使用`->`运算符。`$_[0]->[2]`与 相同`$array[2]`。`->`实际上，只要它在括号之间，您甚至可以删除，所以`$_[0][2]`也可以。[请参阅perlref](http://p3rl.org/perlref)中有关参考的更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T09:19:15.143

你有两个选择：

1.  首先传递标量变量（肮脏的方式）

    ```
    abc($a, @array); 
    ```

    然后接收子程序中的参数为

    ```
    my ($a, @array) = @_; 
    ```

2.  通过在数组变量之前添加反斜杠将数组作为引用传递（推荐）

    ```
    abc(\@array, $a); 
    ```

    然后接收子程序中的参数为

    ```
    my ($array_ref, $a) = @_; 
    ```

    并取消引用 $array_ref

    ```
    my @array = @$array_ref; 
    ```

有关[perlref](http://perldoc.perl.org/perlref.html)的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T11:37:51.543

其他答案解释了两种基本方法。但是，重要的是要注意两者之间有很大的区别：当您通过引用传递数组时，您对其所做的任何更改*也会更改原始数组*。这是一个例子：

```
use warnings;
use strict;

my @array = (1, 2, 3, 4, 5);

sub by_ref
{
    my $array_ref = $_[0];
    @$array_ref = (0, 0, 0);
    print "Array inside by_ref: @$array_ref\n";
}

sub by_val
{
    my @array_copy = @_;
    @array_copy = (0,0,0);
    print "Array inside by_val: @array_copy\n";
}

by_val(@array);

print "Original array after calling by_val: @array\n";

by_ref(\@array);

print "Original array after calling by_ref: @array\n"; 
```

如果您确实通过引用传递，则需要牢记这种行为，如果您不希望在您的 sub 中所做的更改影响原始数组，则制作一个引用数组的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:11:17.360

如果您传递数组引用而不是 Oleg V. Volkov 提到的数组，那就太好了

```
sub abc()
{
    my ( $array, $a ) = @_; #receiving the paramters
    my @arr = @{$array}; # dereferencing the array
}

abc(\@array,$a); 
```

# sql - SQL Server 计算两列

> ID：12950835
> 
> 赞同：1
> 
> 时间：2012-10-18T09:00:28.053
> 
> 标签：sql, count

是否可以计算两列？

我有一个存储应用程序名称和用户随时间启动的表。

查询日期范围时，您最终会得到如下示例所示的结果。

```
| App   | User   |
| App A | User A |
| App A | User A |
| App A | User B |
| App A | User C |
| App A | User D |
| App A | User D |
| App A | User D |
| App B | User A |
| App B | User E |
| App B | User F |
| App C | User A |
| App C | User C |
| App C | User C |
| App C | User C |
| App C | User F | 
```

我想要的是一列显示每个应用程序启动的应用程序数量，另一列显示启动该应用程序的用户数量。

我不知道该怎么做。

任何人任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:03:46.877

```
select  App
,       count(*) as Launches
,       count(distinct [User]) as Users
from    Table1
group by
        App 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/b13c9/2)

方括号`[User]`用于 SQL Server。没有它们，您将获得自己的用户名而不是`User`列。在 MySQL 中，您将使用反引号。

# sql - 如何创建“递归 sql”

> ID：12950839
> 
> 赞同：4
> 
> 时间：2012-10-18T09:00:51.343
> 
> 标签：sql, recursion, hsqldb

我想做“链接”

例如，我有 5 个帖子（id：“1”，id：“2”，id：“3”，id：“4”，id：“5”）

他们有一个序列

> {id:"1", nextId:"2"},
> {id:"2", nextId:"4"},
> {id:"3", nextId:"0"},
> {id:"4", nextId :"3"},
> {id:"5", nextId:"0"},

当我从 "1" 搜索时，我得到一个结果：{id:"1"}, {id:"2"}, {id:"4"}, {id:"3"} 当我从 "5" 搜索时"，我得到了一个结果：{id:"5"}

如何在 ANSI SQL 中找到 All start with {id:"1"}？

```
select s.id, s.nextId from sample s
join sample ns on ns.id = s.nextId 
```

它从第一个节点到所有节点。

我想开始“{some id}”并且我想使用“limit 10”

帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:48:23.973

```
create table links (id integer, nextid integer);

insert into links 
values 
(1, 2),
(2, 4),
(3, 0),
(4, 3),
(5, 0);

commit;

with recursive link_tree as (
   select id, nextid
   from links
   where id = 1  -- change this to change your starting node
   union all 
   select c.id, c.nextid
   from links c
     join link_tree p on p.nextid = c.id
)
select *
from link_tree; 
```

这是 ANSI SQL，适用于 HSQLDB、PostgreSQL、H2、Firebird、DB2、Microsoft SQL Server、Oracle 11.2 和其他几个引擎——只是*不适*用于 MySQL（它不支持当今最先进的任何现代 SQL 特性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:27:58.310

我没有 HSQLDB，但应该这样做：

```
WITH RECURSIVE chain(seq, me, next) AS (
  VALUES(0, CAST(null AS int), 1) -- start
  UNION ALL
  SELECT seq + 1, id, nextId
  FROM sample, chain
  WHERE id = next
)
SELECT * FROM chain WHERE seq > 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:23:48.993

其他答案清楚地证明了递归的问题 - RDBMS 供应商的实现不一致。

或者，您可以使用[“嵌套集”](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)模型，它完全避免了递归，并且应该很容易在与平台无关的 SQL 实现中构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:33:27.533

这适用于 sql server，也许它会在 HSQLDB 上帮助你

在您的示例中，如果您通知 1，它将返回

```
2->4->3->0 
```

如果您想在开头添加 1 或者从结尾删除 0，这取决于您

```
CREATE table test_sequence(
id int,
next_id int
)

insert into test_sequence VALUES(1,2)
insert into test_sequence VALUES(2,4)
insert into test_sequence VALUES(3,0)
insert into test_sequence VALUES(4,3)
insert into test_sequence VALUES(5,0)

alter function selectSequence(@id int)
returns varchar(max)
begin
    declare @next varchar(max)
    select @next=next_id from test_sequence WHERE id =@id
    if (@next != '') begin
        return @next +'->'+ dbo.selectSequence(@next)
    end else begin
        select @next=''
    end
    return @next
end

select dbo.selectSequence(1) 
```

# sql - 将 Sybase ASE 特定的 *= 和 =* 转换为 LEFT/RIGHT OUTER JOIN

> ID：12950844
> 
> 赞同：2
> 
> 时间：2012-10-18T09:01:03.617
> 
> 标签：sql, sql-server, sql-server-2008, sap-ase

我有一些在 Sybase ASE 15.0.2 上运行的 PHP 应用程序，我需要将它们移植到 MicroSoft SQL Server 2008 R2。许多查询使用 Sybase-only 语法`*= and =*` 是否有一种自动方法可以使用 LEFT/RIGHT OUTER JOIN 将查询从 Sybase 语法转换为标准语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:07:44.387

`*=`表示左外连接

`=*`表示右外连接

所以

```
select * 
from tableA, titleauthor
where tableA.ID *= titleauthor.ID 
```

方法

```
select * 
from tableA left join titleauthor
on tableA.ID = titleauthor.ID 
```

我认为您不会找到自动为您执行此操作的工具。尽管很简单，但它可能会变得很棘手，并且自动化过程不会 100% 可靠（我认为）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T02:17:32.930

对于其他人将来遇到的转换问题（我们将从 SAP ASE 16.0 升级到 SQL Server 2016），只需在 SSMS 中选择查询，执行 CTRL+SHIFT+Q 即可打开查询设计器。这将在可能的情况下转换为 SQL Server ANSI 标准。

# c - c程序图形错误

> ID：12950846
> 
> 赞同：0
> 
> 时间：2012-10-18T09:01:09.050
> 
> 标签：c, dos, turbo-c

我用 C 语言实现了边界填充算法，代码如下：--

```
/* WAP to fill the polygon using boundary fill 4 connected algo */

#include "stdio.h"
#include "conio.h"
#include "graphics.h"
#include "dos.h"

void main()
{

    int gd = DETECT, gm;
    clrscr();

    detectgraph(&gd, &gm);
    initgraph(&gd, &gm , "C:\\TC\\BGI");

    rectangle(60,60,500,500);
    boundary_fill(65,65,4,15);
    getch();
    closegraph();
}

boundary_fill(int x, int y, int fclr, int bclr)
{

    if(getpixel(x,y)!= bclr && getpixel(x,y)!= fclr)
    {
        putpixel(x,y,fclr);
        boundary_fill(x+1,y,fclr,bclr);
        boundary_fill(x-1,y,fclr,bclr);
        boundary_fill(x,y+1,fclr,bclr);
        boundary_fill(x,y-1,fclr,bclr);

    }
} 
```

当我编译它没有错误来。但是当我运行程序时，窗口关闭并出现以下错误：-- C:\TC\BIN\TC.EXE NTVDM CPU 遇到非法指令...... . . . .

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:02:57.333

停止使用turboC。改为使用 DosBox 运行 16 位程序（例如 TurboC/C++）。NTVDM 错误是由于 32 位 COMMAND-PROMPT 尝试运行 16 位程序而发生的。

# jquery - Jquery计算器小数点

> ID：12950847
> 
> 赞同：1
> 
> 时间：2012-10-18T09:01:09.857
> 
> 标签：jquery, decimal, tofixed

最后一天我一直在努力研究如何在我的计算器的总数上加上一个小数点。

[http://www.waveleisure.co.uk/calc/](http://www.waveleisure.co.uk/calc/)

最好查看该链接，每月保存有效，但我似乎无法将价格格式化为 .00 。

脚本在这里，（http://www.waveleisure.co.uk/calc/js/myscript.js）它是我在网上找到的一个修改版本？任何想法，我都尝试过 toFixed(4); 无济于事。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:24:30.120

尝试添加

```
var total = (+aaa + +bbb + +ccc).toFixed(2);
$("#total").val(total); 
```

在 myscript.js 中的第 116、184 和 253 行之后，并替换您拥有的所有实例

```
Math.round((+aaa + +bbb + +ccc) *4 - value).toFixed(2); 
```

和

```
((aaa + +bbb + +ccc) *4 - value).toFixed(2) 
```

当然用`value`代码中的原始常量替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:10:17.813

在您的代码中，您正在四舍五入答案

```
// Total Saving Scriptt
var savingchoice = Math.round((+aaa + +bbb + +ccc) *4 - 41).toFixed(2); 
```

将此更改为

```
var savingchoice = ((aaa + +bbb + +ccc) *4 - 41).toFixed(2); 
```

Math.round 四舍五入到最接近的*Integer value*，因此您将丢失小数后的数字。

# android - 如何让我的 SimpleCursorAdapter 自动刷新？

> ID：12950849
> 
> 赞同：2
> 
> 时间：2012-10-18T09:01:12.747
> 
> 标签：android, simplecursoradapter, android-adapter

我正在使用 a`SimpleCursorAdapter`来填写我的列表，如下所示：

```
adapter = new SimpleCursorAdapter(this, R.layout.fang_listlayout, 
            MainController.getInstance().getCursor(), 
            new String[] {"Foo", "Foo2"}, 
            new int[] {R.id.foo1, R.id.foo2}, 0); 
```

现在我想实现，当发生`Cursor`更改时，我想自动刷新列表内容。

如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:03:53.527

您可以使用 managedQuery() 和 reQuery() 方法。但这些方法已被贬低。因为您有另一种方式来管理光标和列表视图，通过 CursorLoader api，请参阅以下链接：

[http://developer.android.com/reference/android/content/CursorLoader.html](http://developer.android.com/reference/android/content/CursorLoader.html)

# python - 在 webpy 中使用另一个类

> ID：12950851
> 
> 赞同：1
> 
> 时间：2012-10-18T09:01:15.520
> 
> 标签：python, web.py

我必须在 webpy Web.py 中导入另一个类

```
urls = (
    '/', "Home"
)
class Web:

    def __init__(self):
        app = web.application(urls, globals())
        app.run() 
```

主页.py

```
class Home:
    def GET(self):
        return "Hello, world!" 
```

谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:10:39.083

添加

```
import web
from home import Home 
```

到您的主模块应该可以完成导入。

然后，在您实例化您的`Web`类之前，您的 Web 应用程序不会启动。你为什么不按照教程代码说

```
if __name__ == "__main__": 
    app = web.application(urls, globals())
    app.run() 
```

反而？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:19:54.387

如果两个文件都在同一个文件夹中，那么你可以试试这个：

```
urls = (
    '/', "home.Home"
) 
```

# asp.net - 如何在 rad 日历中水平显示月视图？

> ID：12950853
> 
> 赞同：2
> 
> 时间：2012-10-18T09:01:16.350
> 
> 标签：asp.net, telerik

如何水平显示 rad 日历月视图。这是我的代码：

```
<telerik:RadCalendar ID="rcJan" runat="server" SingleViewColumns="31"
    SingleViewRows="1" FocusedDate="2012-01-01" ShowOtherMonthsDays="false">
</telerik:RadCalendar> 
```

但它只显示从 1 月开始的 24 天。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:05:54.603

您只能通过以下一些设置来执行此操作

**只需将 Orientation 属性设置为RenderInColumns**或**RenderInRows**即可指定日历的方向。

编辑::

**get_orientation === 如果方向是“RenderInRows”，则返回 1，如果是“RenderInColumns”，则返回 2。**

或者

**radCalendar.Orientation = 方向。水平；**

# ruby - 如何将 Ruby 类名（“NewUserBatch”）转换为带下划线的字符串（“new_user_batch”）

> ID：12950861
> 
> 赞同：3
> 
> 时间：2012-10-18T09:01:40.013
> 
> 标签：ruby, string, class

我需要一种通用的方法来将类名转换为带下划线的小写。例如，我希望将类名转换`NewUserBatch`为`new_user_batch`. 这该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T09:02:53.913

[`Underscore`](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-underscore).

```
>> 'NewUserBatch'.underscore
=> "new_user_batch" 
```

它包含在 Rails 中，所以如果你不使用它，你可以参考它的源代码。

```
def underscore(camel_cased_word)
  word = camel_cased_word.to_s.dup
  word.gsub!(%r::/, '/')
  word.gsub!(%r(?:([A-Za-z\d])|^)(#{inflections.acronym_regex})(?=\b|[^a-z])/) { "#{$1}#{$1 && '_'}#{$2.downcase}" }
  word.gsub!(%r([A-Z\d]+)([A-Z][a-z])/,'\1_\2')
  word.gsub!(%r([a-z\d])([A-Z])/,'\1_\2')
  word.tr!("-", "_")
  word.downcase!
  word
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:31:12.870

在简单的情况下，你只有**非命名空间的**类名，你可以使用这个 oneliner：

**编辑：**更新了积极的前瞻性断言（感谢@vladr）

```
"MYRubyClassName".gsub(/(.)([A-Z](?=[a-z]))/,'\1_\2').downcase

# => "my_ruby_class_name" 
```

这会找到跟随另一个字符的所有大写字符，然后是一个小写字符，在它之前插入下划线，然后将所有内容小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:05:20.627

Also a nice tip: to find if you know INPUT (NewUserBatch) and OUTPUT (new_user_batch) use the following method

```
"NewUserBatch".find_method("new_user_batch")

```

# android - 可以使用 ScaleType CENTER_CROP 但不垂直居中图像吗？（显示图像的顶部）

> ID：12950868
> 
> 赞同：0
> 
> 时间：2012-10-18T09:01:52.030
> 
> 标签：android, android-layout, bitmap, imageview, scale

我正在显示带有位图的图像视图。imageview 最初在位图的左侧和右侧显示了一些空格，所以我使用 CENTER_CROP 来解决这个问题。问题是现在位图垂直居中，图像的顶部不可见，我不希望这样。我希望必须显示图像顶部，我不在乎底部。

有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:43:40.123

您是否尝试过将 paddingTop 设置为图像。我希望通过将 paddingTop 设置为图像视图，您可以将内容的顶部向下推。有时在底部它会遗漏一些东西，但您仍然可以看到图像的顶部。

# authentication - 使 openam/opensso 返回角色名称而不是角色通用 id

> ID：12950869
> 
> 赞同：1
> 
> 时间：2012-10-18T09:01:53.603
> 
> 标签：authentication, openam, role, opensso

我正在使用 OpenAM 9.5.2 对应用程序上的用户进行身份验证。身份验证运行良好，但我在从最终应用程序中获取用户成员身份时遇到问题。

我在 openam 中定义了组“somegroup”并将我的用户添加到该组中。现在在我的应用程序中，我想测试经过身份验证的用户是否是该组的成员。如果我正在测试它：

```
request.isUserInRole("somegroup"); 
```

我得到`false`结果。实际上，我必须测试

```
request.isUserInRole("id=somegroup,ou=group,dc=opensso,dc=java,dc=net"); 
```

为了得到`true`回应。

我知道可以在 sso 代理配置中定义一个特权属性映射列表来映射`id=somegroup,ou=group,dc=opensso,dc=java,dc=net`，`somegroup`但它不适合我的情况，因为角色和组存储在外部数据库中。在 sso agent conf 中定义数据库中的角色和映射并不方便。

所以我的问题是：有没有办法让 openam 使用“短”（即`somegroup`）组名而不是它的长通用 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:21:00.137

这不是一个答案，只是一个评论。

我已经在 openam 源代码中进行了一些研究，并且似乎确认当 openam 构建请求时存储在存储库中的角色名称被替换为universalId。这是在`com.sun.identity.idm.server.IdRepoJAXRPCObjectImpl.java`课堂上进行的：

```
public Set getMemberships_idrepo(String token, String type, String name,
                                 String membershipType, String amOrgName,
                                 String amsdkDN
) throws RemoteException, IdRepoException, SSOException {
  SSOToken ssoToken = getSSOToken(token);
  Set results = new HashSet();
  IdType idtype = IdUtils.getType(type);
  IdType mtype = IdUtils.getType(membershipType);
  Set idSet = idServices.getMemberships(ssoToken, idtype, name, mtype, amOrgName, amsdkDN);
  if (idSet != null) {
    Iterator it = idSet.iterator();
    while (it.hasNext()) {
      AMIdentity id = (AMIdentity) it.next();
      results.add(IdUtils.getUniversalId(id));
    }
  }
  return results;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:33:07.707

据我所知，目前使用开箱即用的代码是不可能的。如果您的组数量有限，那么特权属性映射可能是一种方法，但如果不是，那么问题就会变得更加复杂。

您可以尝试更改 AmRealm 实现（authenticateInternal 方法）以匹配您的要求并将新类挂钩到特定于容器的 ServiceResolver 类（如[http://sources.forgerock.org/browse/openam/trunk/opensso/products/ j2eeagents/tomcat/v6/source/com/sun/identity/agents/tomcat/v6/AmTomcatAgentServiceResolver.java?r=700&r=700&r=700](http://sources.forgerock.org/browse/openam/trunk/opensso/products/j2eeagents/tomcat/v6/source/com/sun/identity/agents/tomcat/v6/AmTomcatAgentServiceResolver.java?r=700&r=700&r=700) )

您还可以创建一个关于提供配置属性以将成员身份信息以非 UUID 格式放入角色的 JIRA 问题。

# android - MVVMCross 按钮命令绑定未触发

> ID：12950879
> 
> 赞同：3
> 
> 时间：2012-10-18T09:02:23.383
> 
> 标签：android, xamarin.android, mvvmcross

这是关于stackoverflow的以下问题。我正在尝试对此处描述的按钮进行触摸命令，但没有任何反应。[android中的mvvmcross touch命令绑定](https://stackoverflow.com/questions/11815893/mvvmcross-touch-command-binding-in-android)

```
<Button
xmlns:local="http://schemas.android.com/apk/res/Test.UI.Droid"
android:text="Office"
android:layout_column="0"
android:id="@+id/imageButton1" 
local:MvxBind="{'Touch':{'Path':'ItemClickCommand'}}"/>  

public IMvxCommand ItemClickCommand
{
get
{
return new MvxRelayCommand(() => this.RequestNavigate<Tests.OfficeViewModel>(true));
}
} 
```

我在上面的代码中做错了什么，为什么它没有触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:29:51.743

目前没有针对 a 的绑定`Touch`。

```
public event EventHandler<View.TouchEventArgs> Touch 
```

如果您想添加一个，然后在 StackOverflow 上搜索如何设置新绑定 - 例如，[在 android 中的 mvvmcross touch 命令绑定中](https://stackoverflow.com/questions/11815893/mvvmcross-touch-command-binding-in-android)的答案给出了一个完整的示例。

* * *

但是......对于大多数按钮按下，您可能只使用：

```
public event EventHandler Click 
```

因为它是 an`EventHandler`而不是 an `EventHandler<TCustom>`then this 自动绑定。

IE：

```
<Button
xmlns:local="http://schemas.android.com/apk/res/Test.UI.Droid"
android:text="Office"
android:layout_column="0"
android:id="@+id/imageButton1" 
local:MvxBind="{'Click':{'Path':'ItemClickCommand'}}"/> 
```

应该可以工作——这可能是你正在寻找的——你想响应`Click`一个按钮，而不仅仅是一个`Touch`？

* * *

要调试绑定问题，值得查看`MvxBindingTrace`输出 - 通常它会告诉您何时无法绑定到事物 - 如果没有，请在 github 问题上记录错误 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T02:41:05.023

我在安卓上遇到了同样的问题。这是斯图尔特的答案，它奏效了。我只是想把它放在这里以便更方便地查找 android。只需将此类放入您的项目中，命令绑定将开始在发布模式下在设备上工作：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;

namespace BestSellers.Droid
{
  // things in this class are only required in order to prevent the linker   overoptimising!
class LinkerIncludePlease
{
    private void IncludeVisibility(View widget)
    {
        widget.Visibility = widget.Visibility + 1;           
    }

    private void IncludeClick(View widget)
    {
        widget.Click += (s,e) => {};
    }

    private void IncludeRelativeLayout(RelativeLayout relativeLayout)
    {
        relativeLayout.Click += (s, e) => { };
    }
} 
```

}

# unix - 当三列相同时删除行

> ID：12950882
> 
> 赞同：2
> 
> 时间：2012-10-18T09:02:32.623
> 
> 标签：unix, awk, uniq

我有一个制表符分隔的文件，我想删除仅在前三列中相同的行（保留一份）。我更喜欢使用 unix 来执行此操作，例如 awk 或 uniq。

输入文件：

```
Supercontig_1.1 241783  286397  5677    52
Supercontig_1.1 241783  286397  5678    53
Supercontig_1.1 241783  286397  5679    53
Supercontig_1.2 10500  25700  3000    57
Supercontig_1.2 10500  25700  3001    59
Supercontig_1.2 10500  25700  3002    59
Supercontig_1.3 2000  7000  5686    60
Supercontig_1.3 2000  7000  5687    60 
```

输出：

```
 Supercontig_1.1 241783  286397  5677    52
 Supercontig_1.2 10500  25700  3000    57
 Supercontig_1.3 2000  7000  5686    60 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:07:21.100

一种使用方式`awk`：

```
awk '!array[$1,$2,$3]++' file.txt 
```

结果：

```
Supercontig_1.1 241783 286397 5677 52
Supercontig_1.2 10500 25700 3000 57
Supercontig_1.3 2000 7000 5686 60 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:07:39.127

这个 oneliner 可以解决问题：

```
awk '!a[$1$2$3]++' file 
```

**测试**

```
kent$  echo "Supercontig_1.1 241783  286397  5677    52
dquote> Supercontig_1.1 241783  286397  5678    53
dquote> Supercontig_1.1 241783  286397  5679    53
dquote> Supercontig_1.2 10500  25700  3000    57
dquote> Supercontig_1.2 10500  25700  3001    59
dquote> Supercontig_1.2 10500  25700  3002    59
dquote> Supercontig_1.3 2000  7000  5686    60
dquote> Supercontig_1.3 2000  7000  5687    60
dquote> "|awk '!a[$1$2$3]++'
Supercontig_1.1 241783  286397  5677    52
Supercontig_1.2 10500  25700  3000    57
Supercontig_1.3 2000  7000  5686    60 
```

# c - 在文件中查找不同字符的实例

> ID：12950883
> 
> 赞同：0
> 
> 时间：2012-10-18T09:02:33.753
> 
> 标签：c

在这个程序中，我想打印出文件中不同字符的实例。输出将包含三个变量，出现次数、字母的十六进制和字母本身。有人可以帮我弄这个吗？我被困住了！

```
 Results of program should be something like this:
 10 instance  of character 0x4s (O)
 10 instance  of character 0x51 (W)
 10 instance  of character 0x51 (Y)
 2 instances of character 0x65 (a)
 18 instances of character 0x67 (c)
 16 instances of character 0x81 (d)

//here is my program. 
#include <stdio.h>
#include <stdlib.h> 
#include <string.h>

const char FILE_NAME[] = "input.txt";

int main(argc, *argv[]) {

    char temp;   
     char count[255];

FILE *in_file;   
int ch;

fp = fopen(FILE_NAME, "r");
if (in_file == NULL) {
    printf("Can not open %s \n", FILE_NAME);
    exit(0);
}

while (!feof(fp)) {

    ch = fgetc(fp);

if(strchr(count, ch)!= NULL)
{

}

}
printf("%d instance of character (%c)", count);

fclose(in_file);
return (0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:41:33.147

这就是你想要的（基于你的代码，我有很多评论）：

```
#include <stdio.h>
#include <stdlib.h> 
#include <string.h>
#include <ctype.h>  // you need this to use isupper() and islower()

const char FILE_NAME[] = "input.txt";

int main(int argc,char *argv[]) {
    char temp;   
    unsigned count[52] = {0};  // An array to store 52 kinds of chars
    FILE *fp;   
    int i;

    fp = fopen(FILE_NAME, "r");
    if (fp == NULL) {
        printf("Can not open %s \n", FILE_NAME);
        exit(0);
    }

    while((temp = fgetc(fp)) != EOF) {   // use this to detect eof
        if(isupper(temp))
            count[26+(temp-'A')]++;   // capital letters count stored in 26-51
        if(islower(temp))
            count[temp-'a']++;        // lower letters count stored in 0-25
    }
    fclose(fp);  // When you don't need it anymore, close it immediately.

    for(i = 0; i < 26; i++)
        if(count[i])
            printf("%d instance of character 0x%x (%c)\n", count[i], 'a'+i, 'a'+i);
    for(; i < 52; i++)
        if(count[i])
            printf("%d instance of character 0x%x (%c)\n", count[i], 'A'+i-26, 'A'+i-26);
    return (0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:05:26.097

您的数组`count`不是字符串，因此使用`strchr()`它不是一个好主意。此外，它的类型为`char`，因此对于较大文件的范围非常有限。

您可能应该使用类似`unsigned long count[256]`. 确保在开始之前将计数初始化为 0。

另外，不要使用`feof()`. 只需循环调用`fgetc()`，直到返回的字符（正确地具有 type `int`）为`EOF`. 在使用它来索引`count`增量之前将其转换为积极的东西。

# jquery - 使用 ajax 仅在提交表单时重新加载 div

> ID：12950884
> 
> 赞同：2
> 
> 时间：2012-10-18T09:02:33.997
> 
> 标签：jquery, ajax, forms, html, submit

我有一个简单的*FORM*，一个*INPUT*和一个*SUBMIT Button*。来自那里的数据将被发送到*PHP*脚本，该脚本将其发送到 db，然后将其放入*DIV*中。（与 smarty）
没有 Ajax，它工作得很好，数据进入数据库，它将被显示等等。但是使用 Ajax，它会更快、更轻量级。

通常，提交会重新加载页面或重定向到我定义的页面。

但是有没有办法在提交后重新加载 DIV？

**的HTML：**

```
<div> <!-- THE DATA FROM THE FORM VIA PHP --> </div>

<form id='foo'>
<input type='text'>
<input type='submit'>
</form> 
```

**到目前为止的 JQuery：**

```
$('#foo').submit(function(event){
  $.ajax({
    url: 'index.html',
    type: 'post,
    data: $('#foo').serialize(),
    success: function(response, textStatus, jqXHR){
      console.log('worked fine');
    },
    error: function(jqXHR, textStatus, errorThrown){
      console.log('error(s):'+textStatus, errorThrown);
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:16:53.393

给你的 div 一个 id...添加 onsubmit="return false" 以便表单不会重新加载，或者提交时不会重新加载

HTML

```
<div id="divID"> <!-- THE DATA FROM THE FORM VIA PHP --> </div>
<form id='foo' onsubmit="return false">
 <input type='text' name="yourname">
 <input type='submit'>
</form> 
```

在您提供 id 的 html 中显示响应。

查询

```
$('#foo').submit(function(event){
  $.ajax({
    url: 'index.php',
    type: 'post',
    dataType:'html',   //expect return data as html from server
   data: $('#foo').serialize(),
   success: function(response, textStatus, jqXHR){
      $('#divID').html(response);   //select the id and put the response in the html
    },
   error: function(jqXHR, textStatus, errorThrown){
      console.log('error(s):'+textStatus, errorThrown);
   }
 });
 }); 
```

在这里写你的 html ......我只是在这里打印 post 变量......你可以`<table>`根据需要使用 (html)

索引.php

```
echo $_POST['yourname']. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:08:17.007

成功：

```
function(response, textStatus, jqXHR){
      do stuff here
    }, 
```

如：`$("#mydiv").html(response);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:15:57.750

停止页面重新加载你会想要阻止默认

```
$('#foo').submit(function(event){
 event.preventDefault();
  $.ajax({
   url: 'index.html',
type: 'post,
data: $('#foo').serialize(),
success: function(response, textStatus, jqXHR){
  console.log('worked fine');
 // have the div update here $('div').html();
},
error: function(jqXHR, textStatus, errorThrown){
  console.log('error(s):'+textStatus, errorThrown);
}
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:41:21.417

我想你是在问如何动态修改网页内容。这是一些示例代码：

```
<html>
<head>
<script src="./jquery-1.8.2.js">
</script>
<script>
function test()
{
    var test_div = $("#test_div");
    test_div.html("hihihi");
}
</script>
</head>
<body>
<input type="button" onclick="javascript:test();" value="test"/>
<div id="test_div">
test_div here
</div>
</body>
</html> 
```

您将需要一个服务器端脚本以 json 或 xml 形式返回 div 内容，然后使用返回的 json/xml 动态修改 div 内容。

# ios - iOS 6 中的 UIAlertView 崩溃

> ID：12950887
> 
> 赞同：5
> 
> 时间：2012-10-18T09:02:39.883
> 
> 标签：ios

我有这个代码：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:msg delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
[alert release]; 
```

问题是这段代码在显示警报之前就崩溃了，我已经在较低的 iOS 上对其进行了测试，它可以工作，但在 iOS 6 上它会崩溃。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T09:29:24.140

我找到了答案。我编码：

```
[alert performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
```

代替

```
[alert show]; 
```

它崩溃是因为该进程可能不在主线程中执行。

来源： [https ://stackoverflow.com/a/12475858/1179680](https://stackoverflow.com/a/12475858/1179680)

# jquery - jQuery 无法获取 UL 元素的自定义属性

> ID：12950898
> 
> 赞同：3
> 
> 时间：2012-10-18T09:03:01.030
> 
> 标签：jquery, html, firefox, prop

我目前正在关注 jQuery 1.8.2 的以下问题。

自定义属性适用于例如输入字段：

```
<input id="test" required="true">

$("#test").prop("required")

true

$("#test").get(0).required

true 
```

但不适用于 UL 元素。

```
<ul id="test" required="true"></ul>

$("#test").prop("required")

undefined

$("#test").get(0).required

undefined 
```

任何想法为什么它不适用于 Firefox 16 但在 MSIE 8 中的 UL 元素？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:14:49.063

如果您出于某种原因需要使用自定义属性，请查看 HTML5`data-`属性。

```
<ul id="test" data-required="true"></ul>

console.log($('#test').data('required')); 
```

[http://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

[http://api.jquery.com/data/#data-html5](http://api.jquery.com/data/#data-html5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:10:57.843

那是因为 HTML5`required`是输入元素的有效属性，而 jQuery 返回此属性的值，而`ul`元素`required`只是无效属性。一个`ul`元素没有`required`属性，所以它是未定义的。

[http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-required-attribute](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-required-attribute)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T09:07:50.830

您必须使用：

```
$('#test').attr('required') 
```

# ruby-on-rails - 是否可以在同一个域上运行两个不同的 Rails 应用程序（使用子目录）？

> ID：12950903
> 
> 赞同：1
> 
> 时间：2012-10-18T09:03:24.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, nginx

我有一个我在 Rails 3.1 中开发的游戏，我想将它添加到我现有的 Rails 2.3.8 中，而无需升级它。是否可以让这个 3.1 游戏应用程序存在于同一个域中，例如[http://mydomain.com/game](http://mydomain.com/game)？那么任何带有 /game 的 url 都将指向 Rails 3.1 应用程序，而所有其他 url 将指向常规 2.3 应用程序？我将如何使用 nginx 使用子目录来解决这个问题（我宁愿不使用子域并丢失 seo）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:11:04.790

您可以这样做，但更容易使用像 game.mydomain.com 这样的子域，因为这样您就可以使用 nginx 来处理这个问题。对于不同的 ruby​​ 和 rails 版本的分离，请使用 rvm (https://rvm.io/)。

然后你可以像这样创建一个 nginx 配置：

```
upstream mydomain.com {
        server unix:/var/run/thin/mydomain.0.sock;
        server unix:/var/run/thin/mydomain.1.sock;
        server unix:/var/run/thin/mydomain.2.sock;
        server unix:/var/run/thin/mydomain.3.sock;
}
upstream game.mydomain.com {
        server unix:/var/run/thin/game.mydomain.0.sock;
        server unix:/var/run/thin/game.mydomain.1.sock;
        server unix:/var/run/thin/game.mydomain.2.sock;
        server unix:/var/run/thin/game.mydomain.3.sock;
}
server {
        listen 80;
        server_name mydomain.com;
        access_log /path/to/rails/app/log/access.log;
        error_log /path/to/rails/app/log/error.log;
        root /path/to/rails/app/public;
        index index.html;
        location / {
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_redirect off;

                if (-f $request_filename/index.html) {
                        rewrite (.*) $1/index.html break;
                }

                if (-f $request_filename.html) {
                        rewrite (.*) $1.html break;
                }

                if (!-f $request_filename) {
                        proxy_pass http://mydomain.com;
                        break;
                }
        }
}
server {
        listen 80;
        server_name game.mydomain.com;
        access_log /path/to/rails/app/log/access.log;
        error_log /path/to/rails/app/log/error.log;
        root /path/to/rails/app/public;
        index index.html;
        location / {
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_redirect off;

                if (-f $request_filename/index.html) {
                        rewrite (.*) $1/index.html break;
                }

                if (-f $request_filename.html) {
                        rewrite (.*) $1.html break;
                }

                if (!-f $request_filename) {
                        proxy_pass http://game.mydomain.com;
                        break;
                }
        }
} 
```

如果可以接受使用子域而不是子文件夹，那应该为您做。

如果你真的想使用子目录，你可以使用 nginx`location`指令来做到这一点：

[http://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:54:53.160

是的

在您不想对现有应用程序造成问题的子域上运行它。

# mysql - 在批量 SQL 导入命令行中跳过 X 行而不擦除以前的数据

> ID：12950906
> 
> 赞同：0
> 
> 时间：2012-10-18T09:03:28.983
> 
> 标签：mysql, macos, command-line, import

我尝试使用 cmd 行通过命令导入非常大的文件：

```
mysql -uroot -ppassword --default-character-set=utf8 mydb < /Users/user1/Downloads/dump.sql 
```

但过了一段时间我收到一条消息：

```
ERROR 2006 (HY000) at line 8498: MySQL server has gone away 
```

所以，我需要从第 8498 行重新开始导入，而不删除以前插入的数据。

我怎样才能做到这一点？

非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:16:50.480

遵循@shellter - 一种方法是将数据导入临时表，然后执行“插入<final table> select * from <temp table> limit <start line, lines to import>”。

我怀疑你的转储有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:11:37.227

虽然我同意 ethrbunny 的问题和评论，但要回答您的明确问题，请继续阅读...

我没有任何方法可以测试这个，但是像

```
tail -n +8497 /Users/user1/Downloads/dump.sql | mysql -uroot -ppassword --default-character-set=utf8 mydb 
```

正如 linux tail 的手册页所说

```
-n, --lines=K
output the last K lines, instead of the last 10; 
or use -n +K to output lines starting with the Kth 
```

（我见过一些不需要 -n 的 tail 版本，只需 +K，因此可能需要您进行一些实验。）

或与 相同的想法`sed`，即

```
sed -n '9498,9999999p' /Users/user1/Downloads/dump.sql | mysql -uroot -ppassword --default-character-set=utf8 mydb 
```

999999 是一个大于文件中记录数的数字。

IHTH。

# linux-device-driver - 内核空间中的动态分配

> ID：12950915
> 
> 赞同：2
> 
> 时间：2012-10-18T09:03:53.540
> 
> 标签：linux-device-driver, kernel

我一直试图`malloc`在内核空间中为我正在处理的驱动程序分配空间（使用在`malloc`这里是一个约束；我不允许以任何其他方式分配空间），但是如果我尝试分配“太多”元素（ ~500 倍非常小的结构），实际上只分配了我所需空间的一小部分。

减少分配元素的数量确实对我有用，没有任何问题。内核空间中的动态分配是否有可能导致我看到的行为的限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:43:32.213

`malloc`是一个用户空间库函数。您不能在内核空间中使用它。有一个名为[kmalloc()](http://imada.sdu.dk/~svalle/courses/dm14-2005/assignments/man/kmalloc.9.html)的函数用于在内核空间中分配内存。

您也可以使用[vmalloc()](http://man-wiki.net/index.php/9:_vmalloc)。我建议你阅读这个线程[vmalloc和kmalloc有什么区别？](https://stackoverflow.com/questions/116343/what-is-the-difference-between-vmalloc-and-kmalloc) 有关 vmalloc() 和 kmalloc() 的一些说明。

我还建议您在 SO 中搜索您的查询，然后提出问题。[因为，这里](https://stackoverflow.com/questions/2888421/malloc-in-kernel)已经有人问过了

# iphone - 保存在 NSDocumentDirectory 或 NSCachesDirectory

> ID：12950916
> 
> 赞同：3
> 
> 时间：2012-10-18T09:03:56.113
> 
> 标签：iphone, objective-c, ios

已尝试将我`NSMutableArray`的对象存储到，`NSUserDefaults`但没有运气。我`NSMutableArray`在此处包含此日志：

```
`ALAsset - Type:Photo, URLs:assets-library://asset/asset.JPG?id=92A7A24F-D54B-496E-B250-542BBE37BE8C&ext=JPG` 
```

我知道它是一个`ALAsset object`，在`AGImagePickerController`它被比较为 NSDictionary，所以我需要做的是保存 NSDictionary 或我用来存储我的数组，`ALAsset object`然后将其保存在文件中`NSDocu`或`NSCaches`文件中，然后再次检索它（这是我的主意）。

但问题是，虽然我尝试了这段代码但没有工作，也没有在`NSDocu`或`NSCache`目录中显示任何内容。

**第一次尝试**（`info`是包含的那个`ALAsset object`）：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *filePath = [basePath stringByAppendingPathComponent:@"filename.plist"];
NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfURL:filePath];
NSString *error;
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict  format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];
if(plistData) {
 [info writeToFile:filePath atomically:YES];
} else {
   NSLog(error);

} 
```

**第二次尝试**：

```
- (NSString *)createEditableCopyOfFileIfNeeded:(NSString *)_filename {
    // First, test for existence.
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *writableFilePath = [documentsDirectory stringByAppendingPathComponent: _filename ];

    success = [fileManager fileExistsAtPath:writableFilePath];
    if (success) return writableFilePath;

    // The writable file does not exist, so copy the default to the appropriate location.
    NSString *defaultFilePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent: _filename ];
    success = [fileManager copyItemAtPath:defaultFilePath toPath:writableFilePath error:&error];
    if (!success) {
        NSLog([error localizedDescription]);
        NSAssert1(0, @"Failed to create writable file with message '%@'.", [error localizedDescription]);
    }
    return writableFilePath;
} 
```

以这种方式保存它：

```
 NSString *writableFilePath = [self createEditableCopyOfFileIfNeeded:[NSString stringWithString:@"hiscores"]];   
    if (![info writeToFile:writableFilePath atomically:YES]){
        NSLog(@"WRITE ERROR");
    } 
```

**第三次尝试**：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:??????];

[info writeToFile:filePath atomically:YES]; 
```

**第四次尝试**（不确定，因为它在 appbundle 中进行了修改）： [https ://stackoverflow.com/a/6311129/1302274](https://stackoverflow.com/a/6311129/1302274)

还有其他方法吗？希望有人指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:02:07.457

您可以将 NSMutableArray 存储到 NSUserDefault，方法是将其归档到 NSData，然后通过将其取消归档回 NSMutableArray 来检索它。

```
-(NSData*) getArchievedDataFromArray:(NSMutableArray*)arr
{
    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:arr];
    return data;
}

-(NSMutableArray*) getArrayFromArchievedData:(NSData*)data
{
    NSMutableArray *arr = [NSKeyedUnarchiver unarchiveObjectWithData:data];
    return arr;
} 
```

将数组保存到 NSUserDefault ：

```
 [[NSUserDefaults standardUserDefaults] setObject:[self getArchievedDataFromArray: yourArray] forKey:@"YourKey"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

从 NSUserDefault 检索数组：

```
NSMutableArray *yourArray = [self getArrayFromArchievedData:[[NSUserDefaults standardUserDefaults]objectForKey:@"YourKey"]]; 
```

您还可以将 NSData 形式的 Array 保存到 NSDocumentDirectory 或 NSCachesDirectory 中的文件中。希望这可以帮助....

编辑：**一个 UIImage+NSCoding 类别**

.h 文件

```
#import <UIKit/UIKit.h>

@interface UIImage (NSCoding)
- (id) initWithCoderForArchiver:(NSCoder *)decoder;
- (void) encodeWithCoderForArchiver:(NSCoder *)encoder ;
@end 
```

.m 文件

```
#import "UIImage+NSCoding.h"
#import <objc/runtime.h>
#define kEncodingKey        @"UIImage"

@implementation UIImage (NSCoding)

+ (void) load
{

    @autoreleasepool {
        if (![UIImage conformsToProtocol:@protocol(NSCoding)]) {
            Class class = [UIImage class];
            if (!class_addMethod(
                                 class,
                                 @selector(initWithCoder:), 
                                 class_getMethodImplementation(class, @selector(initWithCoderForArchiver:)),
                                 protocol_getMethodDescription(@protocol(NSCoding), @selector(initWithCoder:), YES, YES).types
                                 )) {
                NSLog(@"Critical Error - [UIImage initWithCoder:] not defined.");
            }

            if (!class_addMethod(
                                 class,
                                 @selector(encodeWithCoder:),
                                 class_getMethodImplementation(class, @selector(encodeWithCoderForArchiver:)),
                                 protocol_getMethodDescription(@protocol(NSCoding), @selector(encodeWithCoder:), YES, YES).types
                                 )) {
                NSLog(@"Critical Error - [UIImage encodeWithCoder:] not defined.");
            }

        } 
    }
}

- (id) initWithCoderForArchiver:(NSCoder *)decoder {
    if (self = [super init]) {
        NSData *data = [decoder decodeObjectForKey:kEncodingKey];
        self = [self initWithData:data];
    }

    return self;

}

- (void) encodeWithCoderForArchiver:(NSCoder *)encoder {

    NSData *data = UIImagePNGRepresentation(self);
    [encoder encodeObject:data forKey:kEncodingKey];

}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:53:17.837

“writeToFile:atomically:”方法的 NSArray 文档显示所有成员都必须是属性列表对象。ALAsset 不是属性列表对象，因此将其写入文件是行不通的。

> 我知道它是一个 ALAsset 对象，在 AGImagePickerController 中它被比较为 NSDictionary

如果您仔细查看，您会发现它不比较 ALAsset，而是比较它们的“ALAssetPropertyURLs”属性。该属性的值是一个 NSDictionary。

由于 ALAsset 没有公共构造函数，因此即使您设法编写它，也无法在从文件或 NSUserDefaults 读取后重建它。

因此，您可以做的最好的事情是从您最初获得它们的源重新获取 ALAsset。我假设这是一个 ALAssetsGroup？与其保存到文件并再次检索，不如直接在 ALAssetsGroup 上使用与最初生成它们时相同的查询重新生成它们？

**编辑**：

所以你说你从 AGImagePickerController 得到了原始的 ALAsset。为了存储它们，您可以在评论中采纳 Matej 的建议并存储识别它们的 URL。

但请记住，AGImagePickerController 是一种让用户选择一些照片然后***对它们***进行操作的方法。也就是说，ALAsset 只是指向照片原始位置的中间结果。如果您存储 URL 并稍后检索它们，则根本无法保证原件仍然存在。

所以问问自己：您希望用户对照片做什么，并存储该操作的结果，而不是资产本身。例如，您可以执行的一项合理操作是创建一个新的 ALAssetGroup（使用 ALAssetsLibrary 上的 addAssetsGroupAlbumWithName: 方法），并将资产存储在其中。ALAssetGroups 会自动保存，因此您无需为此做任何事情。

**编辑 2** - 从 OP 获得更多信息后

Matej 在评论中暗示的是，通过从资产中检索 url，将您拥有的 ALAssets 数组转换为字典数组。正如您可以在[ALAsset 类文档](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html)中阅读的那样，您可以通过以下方式执行此操作：

```
NSArray *assetArray = // your array of ALAssets
NSMutableArray *urls = [NSMutableArray arrayWithCapacity:assetArray.count];
for( ALAsset *asset in assetArray ) {    
    NSDictionary *urlDictionary = [asset valueForProperty:@"ALAssetPropertyURLs"];
    [urls addObject:urlDictionary];
} 
```

您可以以任何您喜欢的方式保存生成的字典数组。

重新启动您的应用程序后，您从存储它的位置读取字典数组。然后 Matej 建议使用 ALAssetsLibrary`assetForURL:resultBlock:failureBlock:`重新创建 ALAssets。但是我们现在知道您想再次在原始资产上打勾，最好获取原始 ALAsset 数组，并检查它们中的任何一个是否存在于恢复的 url 中。以下应该适用于：

```
NSArray *assetArray = // the full array of ALAssets from AGImagePickerController
NSArray *urls = // the recovered array of NSDictionaries
for( ALAsset *asset in assetArray ) {
    NSDictionary *urlDictionary = [asset valueForProperty:@"ALAssetPropertyURLs"];
    if( [urls containsObject:urlDictionary] ) {
        ... // set checkmark on asset
    }
} 
```

这假设原始资产没有更改，这不受您的控制（例如，用户已删除/添加照片）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:47:19.420

这是我用来存储数组或字典对象的方法。

```
- (NSArray*)readPlist
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"filename.plist"]; 
    NSFileManager *fMgr = [NSFileManager defaultManager];

    if (![fMgr fileExistsAtPath:plistPath]) {
        [self writePlist:[NSArray array]];
    }
    return [NSArray arrayWithContentsOfFile:plistPath];
}

- (void)writePlist:(NSArray*)arr 
{ 
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"filename.plist"]; 
    NSFileManager *fMgr = [NSFileManager defaultManager]; 
    if ([fMgr fileExistsAtPath:plistPath]) 
        [fMgr removeItemAtPath:plistPath error:nil]; 

    [arr writeToFile:plistPath atomically:YES]; 
} 
```

# delphi - 在 Delphi 中使用 WinAPI 模拟键盘输入

> ID：12950920
> 
> 赞同：10
> 
> 时间：2012-10-18T09:04:05.520
> 
> 标签：delphi, winapi, delphi-2009

我需要以编程方式将一个字符输入到 Delphi 网格的单元格中（在其他应用程序中）。

为了手动执行此操作，需要执行以下步骤：

1.  按 F3 按钮。
2.  按向右箭头键 3 次。
3.  按空格键。
4.  在键盘上键入字母“E”。
5.  按右箭头键。

    ```
     // Press F3 button         
     keybd_event(VK_F3, 0, 0, 0);         
     // Press right arrow key 3 times
     keybd_event(VK_RIGHT, 0, 0, 0);
     keybd_event(VK_RIGHT, 0, 0, 0);
     keybd_event(VK_RIGHT, 0, 0, 0);

     // Press the space button
     keybd_event(VK_SPACE, 0, 0, 0);

     // Type letter E
     keybd_event(Ord('E'), 0, 0, 0);

     // Move to the right
     keybd_event(VK_RIGHT, 0, 0, 0); 
    ```

但它不起作用。当我运行这段代码时，似乎什么都没有发生。

我应该如何修改此代码以使其真正模拟用户输入？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T09:10:54.927

每次按键都是一个按键向下然后一个按键向上。`keybd_event`因此，每次按键都需要两次调用。例如，要按 F3：

```
keybd_event(VK_F3, 0, KEYEVENTF_KEYDOWN, 0);
keybd_event(VK_F3, 0, KEYEVENTF_KEYUP, 0); 
```

请注意，这`KEYEVENTF_KEYDOWN`实际上不是由 Windows 头文件或 Delphi 翻译定义的。将其定义为`0`。它使代码更清晰地明确写出来。

当然，您不会在配对调用时乱扔代码`keybd_event`。但相反，您会将配对调用包装到一个辅助函数中。

在某些情况下，您可能需要指定第二个参数，即扫描码。但这通常不是必需的。

# cuda - CUDA。共享内存中的银行冲突（设备参数）

> ID：12950922
> 
> 赞同：0
> 
> 时间：2012-10-18T09:04:11.687
> 
> 标签：cuda

为了避免剪切内存中的银行冲突，我需要知道银行的数量和银行的大小。据我所知，对于计算能力为 1.1 - 1.3 的设备，它是 16 个具有 32 位元素大小的库。我有 Tesla C2075（计算能力 2.0）。我有相同的价值观吗？我在哪里可以找到这个？（我没有在“cudaDeviceProp”信息中找到这个）。顺便说一句，如果有人给我一个包含有关我的 CUDA 设备的所有技术信息的文档的链接，我将不胜感激。再想一想，我需要使用双打，所以我真的希望银行大小是 64 位。如果不是，我应该期待什么样的银行冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:18:29.060

您正在寻找的信息在 cuda 编程指南中。
cc 2.0 的附录 F.4.3。

# c# - 在字符之间插入空格

> ID：12950925
> 
> 赞同：0
> 
> 时间：2012-10-18T09:04:16.507
> 
> 标签：c#, asp.net, string, list, char

我有一个字符串，

```
string aString = "a,aaa,aaaa,aaaaa,,,,,"; 
```

我想插入列表的地方..但是当我使用以下方法时，

```
List<string> aList = new List<string>();

aList.AddRange(aString.Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries));

MessageBox.Show(aList.Count.ToString()); 
```

我得到的计数只有 4，但实际上有 8 个元素，即使 (,) 符号之间的最后一个字符也是空白的。

但是如果我传递如下所示的字符串，

```
string aString = "a,aaa,aaaa,aaaaa, , , , ,"; 
```

它将显示为 8 个元素。请帮助我，程序检索字符串的默认方式是这样的，

```
a,aaa,aaaa,aaaaa,,,,, 
```

请对此提供帮助，如果我可以在空白区域或任何其他方式中添加空格，这样我就可以将 (,) 符号之间的所有这些字符添加到列表中……甚至是空白区域。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:05:21.213

不要使用`StringSplitOptions.RemoveEmptyEntries`

```
string aString = "a,aaa,aaaa,aaaaa,,,,,";
var newStr = String.Join(", ", aString.Split(',')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:09:51.637

我认为你必须删除`StringSplitOptions.RemoveEmptyEntries`

```
aList.AddRange(aString.Replace(",,", ", ,").Split(new string[] { "," })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:07:04.087

您可以`Replace`在拆分之前只保留空间。

```
aList.AddRange(aString.Replace(" ", "").Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries)); 
```

# android - 如何在其他c++项目中添加native项目并使用native函数

> ID：12950934
> 
> 赞同：0
> 
> 时间：2012-10-18T09:04:45.720
> 
> 标签：android, c++

我正在研究android项目。我创建了一个本机edittext。我想在其他android c++项目中使用本机jni函数来显示c++中的edittext。每当我添加jni和edittext的头文件时，编译器都找不到。

你能建议我吗？如何在我自己的项目中添加本机编辑文本项目以及如何在 c++ 中使用 jni 函数。你的建议会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:12:27.257

获取您想要共享的代码并将其放入它自己的编译库中。然后你可以在 android 项目和 c++ 项目中引用它，并在两者中使用代码。

[如何在 C++ 中创建和使用静态库](http://msdn.microsoft.com/en-us/library/ms235627.aspx "如何在 C++ 中创建和使用静态库")

[如何在 C++ 中添加库？](https://stackoverflow.com/questions/2749733/how-to-add-libraries-in-c)

# javascript - 如何在jquery中除第一个1之外的所有元素上绑定事件

> ID：12950937
> 
> 赞同：1
> 
> 时间：2012-10-18T09:05:02.690
> 
> 标签：javascript, jquery

我想在除此之外的所有元素`hover`上绑定事件，我编写了以下代码：`.menu class``first element`

```
 $(".menu:not(:first-child')").hover(function () {
        },
        function () {
        }); 
```

但这不起作用。有什么问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:13:11.780

```
$(".menu").not(":first-child") 
```

或者

```
$(".menu").not(":eq(0)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:15:46.367

jQuery的[`slice`](http://api.jquery.com/slice/)方法

```
$('.menu').slice(1).hover(function () {
    // in
}, function () {
    // out
});​ 
```

*只是为了与众不同...*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:09:23.087

使用此代码：

```
$('.menu').not(":first") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:10:09.733

```
 $(".menu:not(:first)").hover(function() {

 },
 function () {
 }); 
```

# algorithm - 使用强连通分量算法检查顶点是否可达

> ID：12950949
> 
> 赞同：8
> 
> 时间：2012-10-18T09:05:35.410
> 
> 标签：algorithm, graph

我想看看一个给定的顶点，比如 V0，是否可以被图 G 中的所有其他顶点访问。
我知道我可以遍历图中的每个顶点并执行 BFS/DFS 以查看 V0 是否可达。
然而，这似乎是非常低效的。

我想知道我是否在图表上执行 SCC 算法，如果 v0 是所有 scc 的一部分，那么我可以安全地得出结论，所有顶点都可以访问 v0？这会很好，因为 SCC 的成本只有 Tarjan 的 O(V+E) 并且检查 v0 是否是 scc 的一部分也将花费线性时间。

我认为这是有道理的，因为 SCC 意味着顶点是可达的。对这个逻辑有任何确认吗？

或任何有效的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:54:18.213

V0 可能不属于 SCC，但仍可被所有其他顶点访问。例如，`d`所有其他顶点都可以访问图表上的顶点，但唯一的非平凡 SCC 包含 vertices `a`、`b`、`c`并且不包含 vertex `d`。

![在此处输入图像描述](../Images/b3b71983b57189d39f5cfd5d94ce144d.png)

要检查所有其他顶点是否可以到达 V0，您可以反转每条边的方向（在线性时间），然后使用 BFS/DFS，从 V0 开始，检查是否每个其他顶点都可以从 V0 到达（也在线性时间） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:45:22.153

让我们将一个所有其他顶点都可以到达的顶点称为 vista 顶点。如果图有一个 vista 顶点，那么它必须只有一个源 SCC（因为两个源 SCC 彼此不可达），它必须包含 vista 顶点（如果它在任何其他 SCC 中，则没有来自 vista 的路径到源 SCC 的顶点）。此外，在这种情况下，源 SCC 中的每个顶点都将是一个 vista 顶点。该算法然后简单地从任何节点开始DFS并标记具有最高完成时间的顶点。这必须在源 SCC 中。我们现在再次从该顶点运行 DFS 以检查我们是否可以到达所有节点。由于该算法仅使用分解为 SCC 和 DFS，因此运行时间是线性的。这个算法是正确的。请注意，当且仅当只有一个源 SCC 时，才会存在 vista 顶点。源 SCC 中的任何顶点只能由同一 SCC 中的其他顶点到达，因此没有顶点可以到达两个不同源 SCC 中的顶点。此外，如果只有一个源 SCC，则该 SCC 中的任何顶点都是 vista 顶点，因为它们都可以相互访问。请注意，在任何特定 SCC 中开始的 DFS 将在探索完所有可从它到达的 SCC 后完成。这意味着要完成的最后一个节点位于无法从任何其他 SCC（即源 SCC）到达的 SCC 中。因此，在我们算法的第一部分，我们在源 SCC 中找到一个节点。通过执行 DFS，我们将正确地确定它是否是 vista 顶点，如果它不是 vista 顶点，我们知道我们的图中不存在任何东西。此外，如果只有一个源 SCC，则该 SCC 中的任何顶点都是 vista 顶点，因为它们都可以相互访问。请注意，在任何特定 SCC 中开始的 DFS 将在探索完所有可从它到达的 SCC 后完成。这意味着要完成的最后一个节点位于无法从任何其他 SCC（即源 SCC）到达的 SCC 中。因此，在我们算法的第一部分，我们在源 SCC 中找到一个节点。通过执行 DFS，我们将正确地确定它是否是 vista 顶点，如果它不是 vista 顶点，我们知道我们的图中不存在任何东西。此外，如果只有一个源 SCC，则该 SCC 中的任何顶点都是 vista 顶点，因为它们都可以相互访问。请注意，在任何特定 SCC 中开始的 DFS 将在探索完所有可从它到达的 SCC 后完成。这意味着要完成的最后一个节点位于无法从任何其他 SCC（即源 SCC）到达的 SCC 中。因此，在我们算法的第一部分，我们在源 SCC 中找到一个节点。通过执行 DFS，我们将正确地确定它是否是 vista 顶点，如果它不是 vista 顶点，我们知道我们的图中不存在任何东西。这意味着要完成的最后一个节点位于无法从任何其他 SCC（即源 SCC）到达的 SCC 中。因此，在我们算法的第一部分，我们在源 SCC 中找到一个节点。通过执行 DFS，我们将正确地确定它是否是 vista 顶点，如果它不是 vista 顶点，我们知道我们的图中不存在任何东西。这意味着要完成的最后一个节点位于无法从任何其他 SCC（即源 SCC）到达的 SCC 中。因此，在我们算法的第一部分，我们在源 SCC 中找到一个节点。通过执行 DFS，我们将正确地确定它是否是 vista 顶点，如果它不是 vista 顶点，我们知道我们的图中不存在任何东西。

# ios - 登录 UIWebView 的弹窗

> ID：12950953
> 
> 赞同：0
> 
> 时间：2012-10-18T09:06:06.457
> 
> 标签：ios, uiwebview, popup, social-networking

有一个问题，我为社交网络做分享。我下载了 sdk facebook，并且有一个非常好的登录弹出窗口。这个窗口分别是 UIWebView。我怎样才能为其他社交网络制作这个？

试图更改 Twitter 库中的代码 - 不起作用（但技能很少）

帮我为简单的 UIWebView 制作这个弹出窗口。

![在此处输入图像描述](../Images/4bfdfe9fe9516d29a98e28058bafd48a.png)

![在此处输入图像描述](../Images/09004747d657a395d9433745cd0bd76c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:27:25.777

# android - 位图在解码时不读取 EXIF 数据

> ID：12950954
> 
> 赞同：4
> 
> 时间：2012-10-18T09:06:09.067
> 
> 标签：android, android-camera

**我的问题**

我有一系列想要以正确方向加载的位图。

当我保存图像时，我进入并使用`ExifInterface`

```
 ExifInterface exif = new ExifInterface(EXTERNAL_IMAGE_PATH+File.separator+this._currentPhotoName+JPEG_FILE_SUFFIX);
            int rotation = CCDataUtils.exifToDegrees(exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,ExifInterface.ORIENTATION_NORMAL));
            Log.v("PhotoManager", "Rotation:"+rotation);
            if (rotation > 0) {
                exif.setAttribute(ExifInterface.TAG_ORIENTATION,String.valueOf(0)); 
```

这很好用，如果我要从我的设备上拉出这张图片，它会处于正确的方向。但是，当我稍后解码我的位图时，即使图像是纵向拍摄的，它也会保持相机的默认左水平方向？

**我的问题**

如何解码位图并考虑其 EXIF 信息？

我不想每次解码后都必须旋转图像，因为我必须创建另一个位图，而那是我没有的内存。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:21:34.147

对于那些在操作多个位图时也遇到困难并遇到 oom 问题的人来说，这是我的解决方案。

**不要像我最初在问题中所想的那样更改 exif 数据**- 我们稍后需要这个。

在解码要查看的图像时，无需解码完整尺寸的图像，只需将按比例缩小到您需要的图像进行解码。下面的代码示例包含将位图解码为设备屏幕大小，然后它还为您处理位图的旋转。

```
public static Bitmap decodeFileForDisplay(File f){

    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);
        DisplayMetrics metrics = MyApplication.getAppContext().getResources().getDisplayMetrics();

        //The new size we want to scale to  
        //final int REQUIRED_SIZE=180;

        int scaleW =  o.outWidth / metrics.widthPixels;
        int scaleH =  o.outHeight / metrics.heightPixels;
        int scale = Math.max(scaleW,scaleH);
        //Log.d("CCBitmapUtils", "Scale Factor:"+scale);
        //Find the correct scale value. It should be the power of 2.

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        Bitmap scaledPhoto = BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        try {
            ExifInterface exif = new ExifInterface(f.getAbsolutePath());
            int rotation = CCDataUtils.exifToDegrees(exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,ExifInterface.ORIENTATION_NORMAL));
            if (rotation > 0)
                scaledPhoto = CCBitmapUtils.convertBitmapToCorrectOrientation(scaledPhoto, rotation);

        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return scaledPhoto;

    } catch (FileNotFoundException e) {}
    return null;
    }

public static Bitmap convertBitmapToCorrectOrientation(Bitmap photo,int rotation) {
    int width = photo.getWidth();
    int height = photo.getHeight();

    Matrix matrix = new Matrix();
    matrix.preRotate(rotation);

    return Bitmap.createBitmap(photo, 0, 0, width, height, matrix, false);

} 
```

因此，调用后返回的图像位图`decodeFileForDisplay(File f);`具有正确的方向和正确的屏幕大小，可以为您节省大量内存问题。

**我希望它可以帮助某人**

# jquery - 使用模板渲染嵌套的 UL LI 并从代码中删除 TABLE

> ID：12950955
> 
> 赞同：0
> 
> 时间：2012-10-18T09:06:10.263
> 
> 标签：jquery, css

下面是我的 HTML 代码，我需要你的帮助来解决 2 个问题，

1.  我需要`table`从代码中删除 a 并使其无表。
2.  使用模板和 jQuery AJAX 呈现此代码的最佳方式，此处数据来自 XML 文件。

运行代码：http: [//jsfiddle.net/samansari/ppu6T/](http://jsfiddle.net/samansari/ppu6T/)

XML 数据：

```
$(function() {
    $.ajax({
        type: "POST",
        url: "/echo/xml/",
        dataType: "xml",
        data: {
            xml: "<data caption='Start Processes'><heading caption='Customer Registration'><info caption='Credit note approval' desc='Credit Note request form and approval process.'/></heading><heading caption='Installation'><info caption='Credit note approval' desc='Credit Note request form and approval process..'/><info caption='Credit And Rebill Note (smartforms)' desc='Generate and Process a Letter of Guarantee for the customer.'/></heading></data>>"
        },
        success: function(xml) {
            console.log(xml);
        }
    });
});​ 
```

HTML 代码：

```
<div id="navcontainer">
    <ul>
        <li>
           <div class="gtpointer"><span>&#160;&#160;&#160;&#160;Start Processes</span>    </div>        
           <ul>
               <li>
                    <span> <span class="gtpointer">Customer Registration</span> </span>
                    <ul>
                        <li>
                            <span>
                                <table width="100%" border="0">
                                    <tr>
                                        <td width="30%">
                                            <span class="landingSubmenu"><a href="#">Credit note approval</a></span>
                                        </td>
                                        <td>
                                            <span >Credit Note request form and approval process.</span>
                                        </td>
                                    </tr>
                                </table>
                            </span>
                        </li>
                    </ul>
               </li>

                <li>
                    <span> <span class="gtpointer">Installation</span> </span>
                    <ul>
                        <li>
                            <span>
                                <table width="100%" border="0">
                                    <tr>
                                        <td width="30%">
                                            <span class="landingSubmenu"><a href="#">Credit note approval</a></span>
                                        </td>
                                        <td>
                                            <span >Credit Note request form and approval process.</span>
                                        </td>
                                    </tr>
                                </table>
                            </span>
                        </li>
                        <li>

                            <span>
                                <table width="100%" border="0">
                                    <tr>
                                        <td width="30%">
                                            <span class="landingSubmenu"><a href="#">Credit And Rebill Note (smartforms)</a></span>
                                        </td>
                                        <td>
                                            <span >Generate and Process a Letter of Guarantee for the customer.</span>
                                        </td>
                                    </tr>
                                </table>
                            </span>

                        </li>
                    </ul>
                </li>

           </ul>
        </li>

    </ul>
</div> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:20:38.307

对于第一个问题：只需使用内联块显示的 DIV 而不是 TD，并删除 TABLE 和 TR。然后设置两个 DIV 的宽度百分比，并将垂直对齐设置为中间以模拟 TD：

[http://jsfiddle.net/bQbzK/](http://jsfiddle.net/bQbzK/)

HTML

```
 <div id="navcontainer">
     <ul>
         <li>
             <div class="gtpointer">
                 <span>&#160;&#160;&#160;&#160;Start Processes</span>
             </div>        
             <ul>
                 <li>
                     <span> 
                         <span class="gtpointer">Customer Registration</span> 
                     </span>
                     <ul>
                         <li>
                             <span>
                                 <div class="col1">
                                     <span class="landingSubmenu">
                                         <a href="#">Credit note approval</a>
                                     </span>
                                 </div>
                                 <div  class="col2">
                                      <span >
                                       Credit Note request form and approval process.
                                      </span>
                                 </div>
                             </span>
                          </li>
                     </ul>
                 </li>                       
                 <li>
                     <span> 
                         <span class="gtpointer">Installation</span> 
                     </span>
                     <ul>
                         <li>
                             <span>
                                <div class="col1">
                                   <span class="landingSubmenu">
                                      <a href="#">Credit note approval</a>
                                   </span>
                                </div>
                                <div class="col2">
                                   <span >
                                    Credit Note request form and approval process.
                                   </span>
                                </div>
                             </span>
                          </li>
                          <li>                                    
                              <span>
                                 <div class="col1">
                                    <span class="landingSubmenu">
                                       <a href="#">
                                        Credit And Rebill Note (smartforms)
                                       </a>
                                    </span>
                                 </div>
                                 <div  class="col2">
                                    <span>
                                     Generate and Process a Letter of 
                                     Guarantee for the customer.
                                    </span>
                                 </div>
                              </span>    
                           </li>
                        </ul>
                     </li>
                  </ul>
               </li>    
           </ul>
       </div> 
```

CSS：

```
div{
    display: inline-block;
    vertical-align: middle;
}
.col1{
    width: 30%;
}
.col2{
    width: 69%;
} 
```

# python - python将文本中的行分隔值转换为列表时，将“\ n”添加到列表中的元素

> ID：12950959
> 
> 赞同：3
> 
> 时间：2012-10-18T09:06:21.810
> 
> 标签：python

我很惊讶，这么简单的事情一直困扰着我。下面是代码

```
list = []
f = open("log.txt", "rb")  # log.txt file has line separated values, 

for i in f.readlines():
    for value in i.split(" "):
        list.append(value)

print list 
```

输出是

```
['xx00', '\n', 'xx01in', '\n', 'xx01na', '\n', 'xx01oz', '\n', 'xx01uk', '\n'] 
```

我怎样才能摆脱新行，即'\ n'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:07:45.523

```
list = []
f = open("log.txt", "rb")  # log.txt file has line separated values, 

for i in f.readlines():
    for value in i.strip().split(" "):
        list.append(value)

print list 
```

`.strip()`删除尾随换行符。明确地说，您可以使用`.strip('\n')`or`.strip('\r\n')`在某些情况下。

[你可以在这里](http://docs.python.org/library/stdtypes.html#str.strip)阅读更多`.strip()`

**编辑**

做你想做的更好的方法：

```
with open("log.txt", 'rb') as f:
    mylist = [val for subl in [l.split(' ') for l in f.read().splitlines()] for val in subl] 
```

对于看起来更容易的答案，您可以导入 itertools 并使用链来展平列表列表，例如@ [Jon Clements 示例](https://stackoverflow.com/a/12951160/1561176)

所以它看起来像这样：

```
from itertools import chain
with open("log.txt", 'rb') as f:
    mylist = list(chain.from_iterable(l.split(' ') for l in f.read().splitlines())) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:08:52.477

```
with open("log.txt", "rb") as f:
    mylist = f.read().splitlines() 
```

另外，不要`list`用作变量名，因为它会掩盖 python type `list()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T09:17:33.460

这样做的正确方法是：

```
with open('log.txt') as fin:
    for line in fin:
        print line.split() 
```

通过`split()` **不带**参数使用，'\n' 自动不会成为问题（因为 split 或 split(None) 使用不同的拆分规则）。

或者，更简洁地说：

```
from itertools import chain
with open('log.txt') as fin:
    mylist = list(chain.from_iterable(line.split() for line in fin)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T09:33:08.607

如果行分隔意味着每行只有一个值，则根本不需要`split()`：

```
with open('log.txt', 'rb') as f:
    mylist = map(str.strip, f) 
```

在 Python 3`map()`中，将`list()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T09:23:18.947

如果您有一堆带有空格分隔值的行，并且您只想要一个所有值的列表而不关心换行符的位置（从您的示例中似乎就是这种情况，因为您总是附加到相同的不管你在哪一行列出），然后不要费心循环线路。只需将整个文件作为单个字符串读取`split()`并不带参数调用；它将在一个或多个空格字符的*任何*序列上拆分字符串，包括空格和换行符，结果没有任何值包含任何空格：

```
with open('log.txt', 'rb') as f:
    values = f.read().split() 
```

# testing - 虚拟 UI 或如何在无头模式下运行 sikuli

> ID：12950963
> 
> 赞同：2
> 
> 时间：2012-10-18T09:06:36.787
> 
> 标签：testing, watir, watir-webdriver, headless, sikuli

当我遇到摘要式身份验证问题时，我正在执行测试自动化我正在使用 watir 进行自动化，watir 无法访问需要用户名和密码的警报窗口，watir 及其 browser.alert.set 方法只能访问用户名场地。我在 sikuli 中找到了一个解决方案，但它需要 UI，我需要在没有任何 UI 的服务器上运行这个测试用例，我在 watir 测试用例中使用无头我可以在 UI 中有类似无头浏览器的东西来运行这个测试案例，例如虚拟 UI 或其他东西或如何在无头模式下运行 sikuli。或者关于我的其他问题的任何解决方案[如何使用 watir 在弹出窗口中输入密码？](https://stackoverflow.com/questions/12710287/how-to-enter-password-in-a-popup-using-watir)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:28:32.233

我所知道的都在这里： [https ://answers.launchpad.net/sikuli/+question/118598](https://answers.launchpad.net/sikuli/+question/118598)

我假设您**需要**查看桌面，因为 Sikuli 可以视觉识别对象，因此在无头环境中运行它是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T11:22:30.977

我已经在无头模式下使用 sikuli。

**Windows：** 看我的[回答](https://sqa.stackexchange.com/a/9683/8552)。

**Ubuntu：**试试 Xvfb。

# jquery - 如何在 sj 下拉选择中提交表单？

> ID：12950968
> 
> 赞同：0
> 
> 时间：2012-10-18T09:06:52.817
> 
> 标签：jquery, struts2, struts2-jquery, struts2-json-plugin

我正在使用 Struts 2 jquery 插件的下拉列表。我想提交具有此下拉列表的表单，并希望将目标提供给其他 div。请给出一些想法。提前谢谢你。这是代码：

```
 <sj:select 
          list="dayList" 
          href="%{idDayList}"
          title="Select day"
          id="dayId" headerKey="-1"
          headerValue="-----Select Day-----" 
          targets="rightBottomDiv"/>   

<sj:div id="rightBottomDiv"  formIds="idLeftForm"  cssStyle="height:100%;width:100%;background-color:#dfdsf;"                                        draggableRevert="invalid" cssClass="accept ui-widget-content ui-corner-all" >
          <jsp:include page="templateRightBottomDiv.jsp"/>
          </sj:div>
<action name="daySubmitAction2"  method="divRefreshMethod" class="com.ebhasin.fitnessbliss.actions.templateExerciseAction">
                <result  name="success">/jsps/templateRightBottomDiv.jsp</result>
            </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:53:50.997

尝试：

```
 <sj:select 
          list="dayList" 
          href="%{idDayList}"
          title="Select day"
          id="dayId" headerKey="-1"
          headerValue="-----Select Day-----" 
          targets="rightBottomDiv"
          onChangeTopics="somethingHappened"/>

<script>
    $.subscribe('somethingHappened', function(){
        $("your-form-selector").submit();
    });
</script> 
```

**更新**

如果您有这样的操作：

```
<action name="daySubmitAction2"  method="divRefreshMethod" class="com.ebhasin.fitnessbliss.actions.templateExerciseAction">
    <result name="success">/jsps/templateRightBottomDiv.jsp</result>
</action> 
```

您可以`div`像这样轻松加载：

```
<s:url var="remoteUrl" action="daySubmitAction2"/>
<sj:div href="%{remoteUrl}/> 
```

# c# - 通过保存对话框将 Web 应用程序中的文件保存到本地目录

> ID：12950972
> 
> 赞同：1
> 
> 时间：2012-10-18T09:07:03.897
> 
> 标签：c#, xml, web-applications, save

我有以下代码：

```
 public static string ExportToXML(DataSet dts, string Filename)
    {
        string returnmsg = "";

        try
        {

            dts.WriteXml(Filename, System.Data.XmlWriteMode.IgnoreSchema);
        }
        catch (Exception err)
        {
            returnmsg = returnmsg + err.ToString();
        }

        return returnmsg;
    } 
```

这将帮助我将我的数据集转换为 XML 文件。我在我的 Web 应用程序中创建了一个按钮来调用上述函数，并期待以下屏幕：

![在此处输入图像描述](../Images/30bc15352c73aea532e46dd45d036956.png)

（当然，名称不是 default.aspx，而是文件名。）

当我单击按钮时，我的代码中是否遗漏了导致上述对话框不出现的任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:11:09.747

您传递给的第一个参数`WriteXml`，字符串`Filename`是将保存**在服务器上**的文件的名称。

您需要使用该`HttpResponse`对象 - 该[`WriteFile`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.writefile.aspx)方法将采用文件的路径 - 这可以与您在示例代码中编写的文件相同。

所以，在你的代码后面的某个地方，你应该有如下内容：

```
ExportToXML(myDataSet, theFileName);

Response.WriteFile(theFileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:12:03.290

您应该将文件[传输](http://forums.asp.net/t/1185493.aspx)给客户端。

基本上你想

1.  将 XML 文件保存在您的服务器上。

2.  使用上述方法将其传输给客户端

有关更多信息，请阅读[Response.TransmitFile](http://msdn.microsoft.com/en-us/library/12s31dhy%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:53:09.463

在 Yener、Oded 和 Blachshma 的帮助下，

我修改了我的代码如下：

```
 try{
            HttpContext context = HttpContext.Current;
            context.Response.Clear();

            //dts.WriteXml(Filename, System.Data.XmlWriteMode.IgnoreSchema);
            context.Response.Write("<?xml version=\"1.0\" standalone=\"yes\"?>");
            dts.WriteXml(context.Response.OutputStream, System.Data.XmlWriteMode.IgnoreSchema);
            context.Response.ContentType = "text/xml";
            context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + Filename + ".xml");

            context.Response.End();

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:17:49.917

您可以调用[DataSet.WriteXml 方法 (Stream, XmlWriteMode)](http://msdn.microsoft.com/en-us/library/ms135424.aspx)传递[Response.OutputStream](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.outputstream.aspx)作为第一个参数。您可能必须在此之前调用[Response.Clear()](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.clear.aspx)。

```
dts.WriteXml(Response.OutputStream, System.Data.XmlWriteMode.IgnoreSchema); 
```

# vim - Vim 不显示 macvim 显示的颜色

> ID：12950976
> 
> 赞同：1
> 
> 时间：2012-10-18T09:07:16.030
> 
> 标签：vim, macvim, color-scheme

我尝试了两种方案，沙漠和袋熊，我在我的 .vimrc 文件中设置了颜色方案。当我从 shell 打开 vim 时，我看不到方案的颜色，但是当我用 MacVim 打开时，我看到了。在这两者中，当我输入 :colorscheme 时，我看到了 .vimrc 文件中设置的方案，但我看不到为什么我看不到颜色。

作为说明，我安装了[spf13](https://github.com/spf13/spf13-vim)发行版并使用提供的脚本将其卸载。

关于如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:37:21.773

首先，检查您的终端支持多少种颜色：

```
:echo $TERM
:set t_Co? 
```

颜色方案必须通过提供`term=`和`cterm=`定义来实际支持终端；许多人没有。有关如何使用 CSApprox 插件解决此问题，请参阅[https://stackoverflow.com/a/12949536/813602 。](https://stackoverflow.com/a/12949536/813602)

检查颜色方案文件（在`colors/`子目录中找到），或使用`:highlight`命令列出当前颜色定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:46:03.930

终端支持 88 或 256 色。即使您的终端支持 256 色，您也必须在 vimrc 中指定您的终端支持它。（参见[在终端中使用 GUI 颜色设置](http://vim.wikia.com/wiki/Using_GUI_color_settings_in_a_terminal)）

```
set t_Co=256 
```

关于您的背景，如果您的主题尚未声明它，您可能应该指定您使用的是深色或浅色背景。

```
set background=dark
set background=light 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:35:09.247

1.  终端仿真器最多限制为 256 种颜色，并且通常需要手动设置才能超过 8 或 16 种颜色。

2.  最酷的 Vim 配色方案是为 GVim/MacVim 设计的，可以显示数千种颜色。

3.  由于 1 和 2，如果 GUI 颜色方案使用 X11 调色板中 256 种颜色之外的颜色，则无法在终端仿真器中完全模拟 GUI 颜色方案。

4.  但是，您可以：

    *   使用适用于 GUI*和*CLI的配色方案
    *   使用*仅*在 CLI中有效的颜色方案和*仅*`~/.vimrc`在 GUI 中有效的颜色方案，并根据上下文在它们之间切换
    *   使用一个插件来即时转换你的 GUI 配色方案：[this one](http://www.vim.org/scripts/script.php?script_id=2682) , [this one](http://www.vim.org/scripts/script.php?script_id=2390) , [this one](http://www.vim.org/scripts/script.php?script_id=1809) or [this one](http://www.vim.org/scripts/script.php?script_id=2924)
    *   手动编辑您的配色方案以添加终端支持

# php - 将 libXL 与 PHP 和 mySQL 一起使用

> ID：12950978
> 
> 赞同：2
> 
> 时间：2012-10-18T09:07:27.600
> 
> 标签：php, mysql, excel

我正在通过 PHP 将大量数据从 Excel 导入/导出 MySQL。我有一个可行的解决方案，但它非常占用内存且速度很慢。

我看到一个开发人员制作了一个包含 libXL 的 Unix 构建 PHP 脚本——一个非常快速的用于 excel 的 C 库，成本约为 200 美元。这声称使用 262kb 的 PHP 内存在 0.03 秒内处理 10,000 个单元格。

我还注意到在这个网站上发帖的人正在开发一个基于 libXL 的独立 dll，我认为这不适合我的目的。

问题：

有没有人希望生成一个简单的实现 PHP libaray，围绕 libXL 构建，我可以部署在本地基于 Windows 的 XAMPP 装备和基于 UNIX 的主机上（我正在开发时的 Hostpapa）

我是否需要为 Windows 和 UNIX 购买 libXL 才能在本地和在线工作

是否有其他 PHP 解决方案非常快且内存要求低

我已经尝试了 PHPExcel 开发人员 Mark Ba​​ker（感谢 Mark）建议的所有 PHP 解决方案，但没有任何东西完全符合我的要求，所以请不要提出任何建议。

我正在考虑学习 Perl，这样我就可以使用现有的优秀 Excel 解析器，但不幸的是我有时间限制，我认为这将花费我太长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:21:03.073

我正在使用 libXL 来满足我的要求，这涉及在 linux 中解析大量单元格，它物有所值，而且在我看来，没有其他 PHP Excel 解决方案可以匹配这个，因为它是一个已编译的解决方案。您可以在这里找到更多信息： [http ://www.king-foo.be/2011/05/a-first-attempt-at-the-php-excel-extension/](http://www.king-foo.be/2011/05/a-first-attempt-at-the-php-excel-extension/)

# windows-runtime - 仅使用 StreamReader/StreamWriter 在 WinRT 中读取/写入大型文本文件？

> ID：12950987
> 
> 赞同：3
> 
> 时间：2012-10-18T09:07:51.590
> 
> 标签：windows-runtime, winrt-xaml, windows-store-apps

我试图弄清楚如何在 WinRT 中逐行读取和写入一个大文本文件。

FileIO.ReadLinesAsync 分别 FileIO.WriteLinesAsync 将不起作用，因为它们使用分别返回的字符串列表。使用可能导致 OutOfMemoryException 的大型文本文件。

我当然可以使用 FileIO.AppendTextAsync 逐行编写，但这效率低下。

我发现我可以像下面的示例代码一样使用 StreamReader 或 StreamWriter。

但是真的没有原生的 Windows 运行时方法来实现这一点吗？

顺便说一句，我知道 Windows 应用商店应用程序不应该读取或写入大型文本文件。我需要一个解决方案，因为我正在为程序员写一本食谱书。

示例：使用 StreamReader 读取：

```
StorageFile file = ...

await Task.Run(async () =>
{
   using (IRandomAccessStream winRtStream = await file.OpenAsync(FileAccessMode.Read))
   {
      Stream dotnetStream = winRtStream.AsStreamForRead();
      using (StreamReader streamReader = new StreamReader(dotnetStream))
      {
         string line;
         while ((line = streamReader.ReadLine()) != null)
         {
            ...
         }
      }
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:16:47.250

实际上，您对字符串列表的假设并不完全正确。`FileIO.WriteLinesAsync`接受`IEnumerable<string>`作为参数。所以你可以这样做：

```
IEnumerable<string> GenerateLines()
{
    for (int ix = 0; ix < 10000000; ix++)
        yield return "This is a line #" + ix;
}

//....
WriteLinesAsync(file, GenerateLines()); 
```

至于读取大文件，您是对的，我们需要一些自定义工作，就像您在示例中所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:07:46.937

这是我使用 StreamWriter 编写大文件的解决方案。即使写入非常大的文件，使用的内存仍然很低：

```
StorageFile file = ...

using (var randomAccessStream = await file.OpenAsync(FileAccessMode.ReadWrite))
{
    using (var outputStream = randomAccessStream.GetOutputStreamAt(0))
    {
        using (StreamWriter streamWriter = 
           new StreamWriter(outputStream.AsStreamForWrite()))
        {
            for (...)
            {
                await streamWriter.WriteLineAsync(...);
             }
         }
      }
 } 
```

# java - 未在 SD 卡上创建 Android 文件

> ID：12950992
> 
> 赞同：2
> 
> 时间：2012-10-18T09:08:09.890
> 
> 标签：java, android, file, io

我正在尝试在我的设备上的 SD 上创建一个文件。这在一周前有效，但现在无效，我不明白为什么。

Logcat 打印：

```
java.io.FileNotFoundException ...pathtofile... (no such file or directory) 
```

因此，该文件没有被创建。我对 android 清单具有正确的权限：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

我以这种方式创建文件：

```
if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
           base = Environment.getExternalStorageDirectory().getAbsolutePath();
       }
   String fname = File.separator +"VID_"+ timeStamp + ".3gp";
       mediaFile = new File(base+fname); 
```

然后我检查它是否存在：

```
 if(mediaFile.exists()){
           Log.v("mediaFile","ex");
       }else{
           Log.v("mediaFile","no ex");

       } 
```

日志说它不存在。我也尝试过使用 file.createNewFile() 但它不起作用。

所以，一周前它可以工作，现在它不能工作，可能是SD卡的问题？？？？会不会是某种BUG！！！？？？

谢谢

编辑：更多代码

创建文件的函数是：

```
private static File getOutputMediaFile() 
```

调用自：

```
private static Uri getOutputMediaFileUri(){
         return Uri.fromFile(getOutputMediaFile());
   } 
```

并将 mediarecorder 输出设置为：

```
vMediaRecorder.setOutputFile(getOutputMediaFileUri().toString()); 
```

所以，当我做 mediarecorder.prepare() 时：

```
try {
            vMediaRecorder.prepare();

        } catch (IllegalStateException e) {
            Log.v("RELEASE VIDREC1",e.toString());
            releaseMediaRecorder();
            return false;
        } **catch (IOException e) {
            Log.v("RELEASE VIDREC2",e.toString());
            releaseMediaRecorder();
            return false;**
        } 
```

粗体字是运行的，并打印：

```
java.io.FileNotFoundException ...pathtofile... (no such file or directory) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:13:33.460

您只需创建对象 mediaFile，而不是实际文件。用这个：

```
if(!f.exists()){
  f.createNewFile();
} 
```

我试过这个，对我来说它有效。

```
final String filename = "file.3gp";
final String path = Environment.getExternalStorageDirectory() + "/" + filename;
File outputfile = new File(path);
if (!outputfile.exists()) {
    try {
        outputfile.createNewFile();
    } 
    catch (IOException e) {
        e.printStackTrace();
    }
}
MediaRecorder recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setOutputFile(outputfile.toString());
try {
    recorder.prepare();
    recorder.start();
    /*recorder.stop();
    recorder.reset();
    recorder.release();*/
} 
catch (IllegalStateException e) {
    e.printStackTrace();
} 
catch (IOException e) {
    e.printStackTrace();
} 
```

试试看它是否有效。如果没有，能否添加getOutputMediaFile()的完整代码？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:15:23.317

试试这个

```
String fname = "VID_"+ timeStamp + ".3gp";

if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
{
   mediaFile = new File(android.os.Environment.getExternalStorageDirectory(),fname);
    if(!mediaFile.exists())
    {
         mediaFile.createNewFile();
    }
}

if(mediaFile.exists()){
       Log.v("mediaFile","ex");
   }else{
       Log.v("mediaFile","no ex");

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:19:43.893

[我在这里](https://stackoverflow.com/questions/12865267/java-io-filenotfoundexception-access-denied-even-though-ive-putted-permissions/12865325#12865325)的回答：

先打开路径，然后添加文件：

```
String dir = Environment.getExternalStorageDirectory(); // getAbsolutePath is not requried
File path = new File(dir);
File root = new File(path,  "VID_"+ timeStamp + ".3gp";); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T08:18:57.243

感谢您的帮助，我已经使用旧代码解决了这个问题。这很奇怪，因为“文件保存”部分没有修改。谢谢大家，有点。

# php - 如果网站不提供给禁用 Javascript 的人，那么它的安全性如何？

> ID：12950997
> 
> 赞同：-4
> 
> 时间：2012-10-18T09:08:25.600
> 
> 标签：php, javascript, html, jquery-ui

我在我的新项目中广泛使用 JQuery 和 Javascript，包括表单验证，因为我不想使用 PHP 验证给服务器增加负担。因此，我限制在浏览器上禁用 Javascript 的人访问我的网站。我正在尝试使用元标记重定向它们：

```
<meta http-equiv="refresh" content="2; URL=../../enablejs.html"> 
```

我认为这是安全的，因为如果未启用 javascript，他们将无法访问我的网站。

但我仍然对此有疑问，需要您的建议。它完全安全吗？如果不是，我需要集中精力的领域是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T09:10:45.300

这是一个可怕的、可怕的想法。

> 因为我不想使用 PHP 验证给服务器增加负担

你的意思是，你不想让自己承担实施它的负担:)

我可以联系起来。每个人都讨厌做两次事情。但是服务器端验证不是可以协商的额外费用；客户端验证可以很容易地绕过，只是为了用户方便。为了安全起见，始终需要服务器端验证。

除了这是一个坏主意之外，没有办法可靠地排除关闭 JavaScript 的用户。JavaScript 在客户端运行，它的存在或不存在很容易被服务器伪造。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T09:11:07.360

客户端的任何东西都***永远不安全***。您*总是*需要服务器端验证。这不是“负担”，而是必需品。我什至*不需要*您的网站向您的服务器提交（未经验证的）数据，最终这一切都归结为 HTTP 请求。如果你不验证用户在服务器上所做的一切，你就没有安全性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T09:11:27.563

> 我在我的新项目中广泛使用 Jquery 和 Javascript，包括表单验证，因为我不想使用 PHP 验证给服务器带来负担。

这不应该减轻重大负担。不过，它应该可以更快地向用户提供反馈，这很好。

> 因此，我限制在浏览器上禁用 Javascript 的人访问我的网站。

That is a waste of time. The proportion of submissions in that which will be from users with JS disabled will be tiny.

> I am trying to redirect them using meta tag

That's a very user hostile thing to do.

> I assume that this is safe because if javascript is not enabled they will not be able to access my site.

If you mean that it avoids the need to write server side validation routines, then you are wrong. If someone wants to *attack* the site (rather then submit bad data by accident) then they can construct HTTP requests manually.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T09:12:37.703

No that's not safe. Client side validations are nowhere safe. With javascript enabled anyone can bypass your validations. Using chrome console I can probably alter any text on your input boxes or any other input method without you validation noticing it.

**Use server side validation or you're screwed.**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T09:13:23.477

No, this is not safe. Never rely on the browser for form validation. Form validation in the browser should only be to improve user experience, not to protect your data. You need to add some PHP validation.

Also, are people who have JavaScript disabled not supposed to use your site? You should make JavaScript degrade gracefully so that your site is still usable without it.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T09:20:55.597

Using client side validation is a recipe for disaster "never ever trust clients input" clients inputs are GET (URL included), POST, FLash ...

All inputs should be validated by server side scripting language like PHP, ASP.net, java ... If you use PHP then check [http://www.phpclasses.org/](http://www.phpclasses.org/) and look for form validation scripts and Cross-site scripting (XSS). Or use validation classes offered in frameworks like zend, codeigniter

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

# iphone - 在 iPhone 中单击按钮时隐藏 UIScrollview 的 UITableView

> ID：12950998
> 
> 赞同：1
> 
> 时间：2012-10-18T09:08:27.853
> 
> 标签：iphone, uitableview, xcode4

我有一个 UITableView，在 -(void)ViewDidLoad 中有一些数据。所以它相应地出现。但是当我单击一个按钮时，我的 tableview 应该被隐藏，我应该加载一个带有一些文本的 UIlabel。

但对我来说，点击按钮的空表视图正在加载一些行。我应该避免它。我该怎么做？

这是我的代码

```
 -(void)ViewDidLoad {
 tableView=[[UITableView alloc]initWithFrame:CGRectMake(0,380,320,200)  style:UITableViewStylePlain];
    tableView.delegate = self;
    tableView.dataSource = self;
    [self.view addSubview:tableView];  

   }
     -(void)DatePickerDoneClick:(id)sender {
       [tableview setHidden:YES];
       displayError  =[[UILabel alloc]init];
        [displaytError setFrame:CGRectMake(20,400,320,100)];
        displayError.textAlignment=UITextAlignmentLeft;
        displayError.backgroundColor=[UIColor clearColor];
        displayError.text=[NSString stringWithFormat:@"Not found"];
        [self.view addSubview:displayError];
    } 
```

无法找到我要去哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:25:01.590

要隐藏表格视图，您可以使用

```
myTableView.hidden = YES; 
```

或者

```
[mtTableView setHidden:YES]; 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:48:15.223

如果`tableview.hidden = YES;` 没有做这项工作

尝试下一个代码：

```
[self.tableview removeFromSuperView]; 
```